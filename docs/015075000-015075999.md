# StackOverflow 问答 15075000-15075999

# cordova - 移动多平台应用程序开发

> ID：15075001
> 
> 赞同：0
> 
> 时间：2013-02-25T19:36:20.167
> 
> 标签：cordova, mobile, mobile-application

在一个平台上开发应用程序并在多个平台上部署是一种最佳方式。因为有多种可用的工具，比如 PhoneGap 可以帮助做到这一点。

采用这种方法有什么缺点吗？

如果它是一个很好的方法，请为此提供最佳平台选择。

请提供指针（或）如果它已经回答，请提供相同的链接。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:40:37.573

没有简单的方法。对于一个多平台项目，我们使用了运行良好的 XAMARIN，但您仍然必须围绕每个平台的不同“怪癖”和行为来思考。如果您想为每个平台的用户提供真正的原生应用程序的感觉，并针对他们想要的平台进行了优化，那么在我看来，Phonegap 不是您要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:48:33.037

我想你可以试试 Snappii。它非常易于使用，因为那里有拖放编辑器，因此您无需任何编码即可制作应用程序。然后该应用程序可以在 iPhone、iPod、Android 和 HTML5 上运行。我喜欢这个平台，因为，你知道，我不是编程方面的专家，它对我帮助很大，尽管与所有其他多平台应用程序制造商一样，它有一些限制，但对我来说，它仍然提供比许多其他此类应用程序构建器更丰富的功能。所以，我想，你可能也喜欢它））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:31:50.270

我建议您可以使用Phonegap。它是一种简单易行的方法，可以在所有平台上为每个 Native 应用程序提供。我个人在PhoneGap中开发了一个应用程序，它确实减轻了我的负担。一旦我开始着手这方面的工作，就可以轻松地在所有平台上开发一个应用程序，并对核心进行少量修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-21T07:11:28.810

同样，这一切都取决于应用程序的复杂性，例如功能、业务逻辑、设计等。为了使开发过程更加轻松简单，只需继续使用 Configure.IT- 在线移动应用程序开发平台来构建所有数据驱动的移动应用程序无需编码即可满足您的目的。它是 100% 本机代码 iOS(Swift 3) 和 android(java)

请参考 - [http://www.configure.it/benefits-business/](http://www.configure.it/benefits-business/)

# html - IE中边距与Firefox不同的div的宽度

> ID：15075007
> 
> 赞同：2
> 
> 时间：2013-02-25T19:36:50.897
> 
> 标签：html, css, layout, quirks-mode

我正在开发一个向服务器执行异步发布的用户控件。我希望用户控件在工作时淡出并显示“正在发送...”消息和 gif。为此，我试图将一个半透明的 div 绝对定位在控件的主 div 之上。事实证明这比它应该做的要难得多。我终于让它在 Firefox 中看起来不错，但进入 IE 并发现控件的主 div 甚至不是正确的宽度。

我希望总宽度为 275px。所以在 Firefox 中，我将其设置为

```
width: 245px; margin 36px 15px 46px 15px; 
```

所以宽度 + 边距 = 275，这就是它的渲染方式。在 IE 中，浏览器从宽度中减去边距，因此总宽度为 245，其中包含 15px 的边距。好吧，我发现两个浏览器都在怪癖模式下运行，尽管......我认为......文档类型是：

```
<!DOCTYPE HTML PUBLIC -//W3C//DTD HTML 4.01 Transitional//EN> 
```

我的理解是这是 quirks 模式应该做的，但是当 IE 和 Firefox 以不同的方式呈现它时，即使两者都处于 quirks 模式，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:24:38.343

如果您发布链接会更容易回复，但如果我的假设是正确的，您可以使用如下所示的元标记强制 IE 模式

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

显然，根据您要使用的版本，它会有所不同。同样，您可以强制退出兼容模式，进入怪癖模式等。我在 Firefox 中从未遇到过这个问题，所以不能说，但我想 Mozilla 也有类似的东西。

不过，我认为通过设置盒子模型可以更好地解决您的问题。在有问题的块元素上使用这个 CSS 类

```
#yourdiv { box-sizing: border-box } 
```

这将有助于减轻不同浏览器渲染盒子模型的痛苦。更多关于 box-sizing 的信息在[这里](http://paulirish.com/2012/box-sizing-border-box-ftw/)。

另外，不要忘记`display: block`，有时这会解决奇怪的问题。

# matlab - matlab中的向量场

> ID：15075009
> 
> 赞同：3
> 
> 时间：2013-02-25T19:36:53.620
> 
> 标签：matlab

我正在尝试在 matlab 中解决这个特殊问题

"考虑系统 dr/dt = r*(l - r^2) + mu*r cos (theta)

d(θ)/dt = 1

当 mu = o 时，在 r =1 处有一个稳定的极限环，表明只要 mu 足够小，对于 ,mu > 0 仍然存在闭合轨道。”

我能够绘制一个封闭的极限环，但无法为 x 与 y 图绘制矢量场。

这是我的代码..

```
function file->
function dy = tst(t,y)
%UNTITLED Summary of this function goes here
% Detailed explanation goes here
dy = zeros(2,1);
dy(1) = y(1)*(1-y(1)*y(1))+1.5*y(1)*cos(y(2));
dy(2) = 1;
end

script file->

[t,r] = ode45(@tst,[0, 40],[1,0]);
x = r(:,1).*cos(r(:,2)); 
y = r(:,1).*sin(r(:,2));
figure(1)
plot(x,y);

hold on

[R,T] = meshgrid(r(:,1),r(:,2));

X = R.*cos(T);

Y = R.*sin(T);

quiver(R,T,X,Y); 
```

我的事情我做错了，绘制矢量场的正确方法是什么？问题出在脚本文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:56:08.500

这个想法是采用参数的微分：

```
quiver(x(1:end-1),y(1:end-1),diff(x)./diff(t),diff(y)./diff(t)) 
```

![在此处输入图像描述](../Images/38a1e49c18370726819faccc22130067.png)

# java - 正则表达式字典搜索单用字母

> ID：15075016
> 
> 赞同：1
> 
> 时间：2013-02-25T19:37:06.780
> 
> 标签：java, regex

我正在开发一个 Java 程序，该程序在字典中搜索由一组特定字母组成的单词。我想知道是否可以设置一个正则表达式，让您只使用一个字符，就像它出现在一个字符串中一样频繁。例如，带有字母 SHARE。听到，野兔，海，等等都是有效的。但是 see 或 sarah 无效，因为您分别只有一个 e 或一个 a。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:55:20.937

正则表达式是关于模式匹配的。找到一个简单的模式可能是不可能的。

如果你**真的真的很**想要一个正则表达式，这些函数会生成一个：

```
public  static String permutation(String str) {
    return "^" + permutation("",str).replaceFirst("\\|", "(") + ")$";
 }

 private static String permutation(String prefix, String str) {
    String s = "";
    int n = str.length();
    if (n == 0) return "|"+prefix;
    else {
        for (int i = 0; i < n; i++)
           s += permutation(prefix + str.charAt(i)+"?",
                            str.substring(0, i) + str.substring(i+1, n));
    }
    return s;
} 
```

对于“分享”，它将返回：

```
^(s?h?a?r?e?|s?h?a?e?r?|s?h?r?a?e?|s?h?r?e?a?|s?h?e?a?r?|s?h?e?r?a?|s?a?h?r?e?|s?a?h?e?r?|s?a?r?h?e?|s?a?r?e?h?|s?a?e?h?r?|s?a?e?r?h?|s?r?h?a?e?|s?r?h?e?a?|s?r?a?h?e?|s?r?a?e?h?|s?r?e?h?a?|s?r?e?a?h?|s?e?h?a?r?|s?e?h?r?a?|s?e?a?h?r?|s?e?a?r?h?|s?e?r?h?a?|s?e?r?a?h?|h?s?a?r?e?|h?s?a?e?r?|h?s?r?a?e?|h?s?r?e?a?|h?s?e?a?r?|h?s?e?r?a?|h?a?s?r?e?|h?a?s?e?r?|h?a?r?s?e?|h?a?r?e?s?|h?a?e?s?r?|h?a?e?r?s?|h?r?s?a?e?|h?r?s?e?a?|h?r?a?s?e?|h?r?a?e?s?|h?r?e?s?a?|h?r?e?a?s?|h?e?s?a?r?|h?e?s?r?a?|h?e?a?s?r?|h?e?a?r?s?|h?e?r?s?a?|h?e?r?a?s?|a?s?h?r?e?|a?s?h?e?r?|a?s?r?h?e?|a?s?r?e?h?|a?s?e?h?r?|a?s?e?r?h?|a?h?s?r?e?|a?h?s?e?r?|a?h?r?s?e?|a?h?r?e?s?|a?h?e?s?r?|a?h?e?r?s?|a?r?s?h?e?|a?r?s?e?h?|a?r?h?s?e?|a?r?h?e?s?|a?r?e?s?h?|a?r?e?h?s?|a?e?s?h?r?|a?e?s?r?h?|a?e?h?s?r?|a?e?h?r?s?|a?e?r?s?h?|a?e?r?h?s?|r?s?h?a?e?|r?s?h?e?a?|r?s?a?h?e?|r?s?a?e?h?|r?s?e?h?a?|r?s?e?a?h?|r?h?s?a?e?|r?h?s?e?a?|r?h?a?s?e?|r?h?a?e?s?|r?h?e?s?a?|r?h?e?a?s?|r?a?s?h?e?|r?a?s?e?h?|r?a?h?s?e?|r?a?h?e?s?|r?a?e?s?h?|r?a?e?h?s?|r?e?s?h?a?|r?e?s?a?h?|r?e?h?s?a?|r?e?h?a?s?|r?e?a?s?h?|r?e?a?h?s?|e?s?h?a?r?|e?s?h?r?a?|e?s?a?h?r?|e?s?a?r?h?|e?s?r?h?a?|e?s?r?a?h?|e?h?s?a?r?|e?h?s?r?a?|e?h?a?s?r?|e?h?a?r?s?|e?h?r?s?a?|e?h?r?a?s?|e?a?s?h?r?|e?a?s?r?h?|e?a?h?s?r?|e?a?h?r?s?|e?a?r?s?h?|e?a?r?h?s?|e?r?s?h?a?|e?r?s?a?h?|e?r?h?s?a?|e?r?h?a?s?|e?r?a?s?h?|e?r?a?h?s?)$ 
```

显然这可以被简化+优化很多，但仍然不是一个好主意。

**编辑：**较短输出的功能：

```
public  static String permutation(String str) {
    return "^(" + permutation("",str) + ")$";
 }

 private static String permutation(String prefix, String str) {
   String s = "";
   int n = str.length();
   if (n == 0) return prefix;
   else {
     for (int i = 0; i < n; i++)
       if (i != n-1)
         s += prefix + str.charAt(i) + "?(" +
            permutation("", str.substring(0, i) + str.substring(i+1, n))+")|";
       else
         s += prefix + str.charAt(i) + "?" +
            permutation("", str.substring(0, i) + str.substring(i+1, n));
   }
   return s;
} 
```

印刷：

```
^(s?(h?(a?(r?(e?)|e?r?)|r?(a?(e?)|e?a?)|e?a?(r?)|r?a?)|a?(h?(r?(e?)|e?r?)|r?(h?(e?)|e?h?)|e?h?(r?)|r?h?)|r?(h?(a?(e?)|e?a?)|a?(h?(e?)|e?h?)|e?h?(a?)|a?h?)|e?h?(a?(r?)|r?a?)|a?(h?(r?)|r?h?)|r?h?(a?)|a?h?)|h?(s?(a?(r?(e?)|e?r?)|r?(a?(e?)|e?a?)|e?a?(r?)|r?a?)|a?(s?(r?(e?)|e?r?)|r?(s?(e?)|e?s?)|e?s?(r?)|r?s?)|r?(s?(a?(e?)|e?a?)|a?(s?(e?)|e?s?)|e?s?(a?)|a?s?)|e?s?(a?(r?)|r?a?)|a?(s?(r?)|r?s?)|r?s?(a?)|a?s?)|a?(s?(h?(r?(e?)|e?r?)|r?(h?(e?)|e?h?)|e?h?(r?)|r?h?)|h?(s?(r?(e?)|e?r?)|r?(s?(e?)|e?s?)|e?s?(r?)|r?s?)|r?(s?(h?(e?)|e?h?)|h?(s?(e?)|e?s?)|e?s?(h?)|h?s?)|e?s?(h?(r?)|r?h?)|h?(s?(r?)|r?s?)|r?s?(h?)|h?s?)|r?(s?(h?(a?(e?)|e?a?)|a?(h?(e?)|e?h?)|e?h?(a?)|a?h?)|h?(s?(a?(e?)|e?a?)|a?(s?(e?)|e?s?)|e?s?(a?)|a?s?)|a?(s?(h?(e?)|e?h?)|h?(s?(e?)|e?s?)|e?s?(h?)|h?s?)|e?s?(h?(a?)|a?h?)|h?(s?(a?)|a?s?)|a?s?(h?)|h?s?)|e?s?(h?(a?(r?)|r?a?)|a?(h?(r?)|r?h?)|r?h?(a?)|a?h?)|h?(s?(a?(r?)|r?a?)|a?(s?(r?)|r?s?)|r?s?(a?)|a?s?)|a?(s?(h?(r?)|r?h?)|h?(s?(r?)|r?s?)|r?s?(h?)|h?s?)|r?s?(h?(a?)|a?h?)|h?(s?(a?)|a?s?)|a?s?(h?)|h?s?)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:54:37.787

这是一种方法：

1.  遍历您的字符串数组以创建一个`MultiMap<String, String>`（如果您使用 Guava 库或`HashMap<String, List<String>>`使用 java.util），其中键是已排序的单词，值是该排序字符串的合法单词。这将是您的预处理步骤，因此您只需执行一次。由于您的哈希图已经存在，因此后续搜索将相对较快（与每次循环通过您的字典以匹配某些正则表达式相比，这比使用哈希图要慢得多）。
2.  对您的搜索字符串进行排序，并找到该排序字符串的所有子字符串。
3.  遍历排序子集，并搜索 HashMap 或 MultiMap 以获取该排序子集字符串的值。跟踪所有的值，你就会得到答案。

我认为这里的问题是正则表达式不适合您所描述的内容，因为您仍然必须为每次搜索（已存储为数组）遍历整个字典。然而，如果您创建哈希图（这一步相对昂贵），您只会循环通过排序的子集列表（这很便宜）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:55:11.583

如果单词中没有出现两次的字母，因为没有 in `share`，你可以使用

```
^(?!([share]).*\\1)[share]+$ 
```

这将匹配由 中的部分或全部字母组成的任何单词`share`。

如果一个字母出现不止一次，则`(?!)`包含对括号中匹配内容的反向引用的负前瞻会阻止匹配。`\\1`

您可以扩展此原则以处理包含多次出现的字母的单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T19:56:52.597

好的，这是一个如何执行此操作的示例。但是，您应该阅读这些有关灾难性回溯的文章：

[失控的正则表达式：灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)

[正则表达式性能](http://www.codinghorror.com/blog/2006/01/regex-performance.html)

```
^(?!.*s.*s)(?!.*h.*h)(?!.*a.*a)(?!.*r.*r)(?!.*e.*e)(?![^share]).*$ 
```

如果您想允许 2 个字母“s”之类的共享来允许单词 sashes，您可以这样做。

```
^(?!.*s.*s.*s)(?!.*h.*h)(?!.*a.*a)(?!.*r.*r)(?!.*e.*e)(?![^share]).*$ 
```

单词中少于3个“s”的想法是可以的......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T20:28:04.403

一种不使用模式匹配但解决问题根源的方法是创建一个数组，其中包含目标单词中每个字符的计数：“deaf”将是数组 (1,0,0,1 ,1,1,0,0,...)。

然后，当您遍历字典时，为每个单词准备相同的数组并将其从目标单词的数组中减去 - 如果差异数组中有任何负值，则该单词不能由字母组成目标词。

# compiler-construction - 如何在flex中匹配小于运算符？

> ID：15075017
> 
> 赞同：2
> 
> 时间：2013-02-25T19:37:07.770
> 
> 标签：compiler-construction, flex-lexer, lexical-analysis

我正在尝试将文件中的字符串与 flex 中的正则表达式匹配。例如，为了匹配赋值运算符，我写：

```
= printf("tASSIGN token"); 
```

但是当我想与 operator 匹配时`<`，它不接受以下行：

```
< printf("tLT token"); 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:51:10.533

该`<`字符对 lex 来说是特殊的——它用于将模式标记为仅适用于某些状态。要获得文字`<`，您需要转义或引用它：

```
"<"    printf("tLT token"); 
```

# css - 为什么 IE9 会忽略我的 CSS？

> ID：15075022
> 
> 赞同：2
> 
> 时间：2013-02-25T19:37:28.917
> 
> 标签：css, internet-explorer-9

我正在尝试关闭用户选择，并且正在使用以下综合 CSS：

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

对于 Firefox 和 chrome，完美运行。然而，在 IE9 中，检查器告诉我它根本看不到那些 CSS 行。它将所有其他 CSS 从完全相同的集合中取出——该元素的其他样式规则都在那里——它只是完全忽略了这些行！

为什么 IE9 检测不到我的用户选择控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:05:50.230

本质上，在 IE10 之前的 IE 版本中，您不能使用该 CSS。您必须手动将`unselectable="on"`属性应用于您希望使其无法选择的所有 div。

[有关更多信息，请参阅此问题](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)的第二高答案。

# objective-c - NSMenuItem、自定义视图和 mouseUp 的奇怪问题：

> ID：15075033
> 
> 赞同：9
> 
> 时间：2013-02-25T19:38:06.317
> 
> 标签：objective-c, macos, cocoa, nsmenuitem, nsmenu

我在这里遇到了一个非常奇怪的 NSMenu 问题。

我使用的大约一半的 NSMenuItems 通过 NSMenuItem 上的 setView: 方法对它们有自定义视图。在这个自定义视图中，我实现了 mouseUp: 来捕捉用户单击菜单项的时间，这在我第一次打开菜单时非常有效。

但是第二次，如果我在单击时保持鼠标稳定，则不会在任何这些菜单项上调用 mouseUp。但是，如果我向下单击，然后稍微移动光标，然后释放 mouseUp 就会被调用。所以由于某种原因，有些东西正在拦截这些事件，但只有第二次出现菜单时，如果光标在 mouseDown 事件之后移动，它就会通过。（由于某种原因，mouseDown 永远不会在菜单的第一次或第二次出现时被调用）。

有人对这里可能发生的事情有任何线索吗？是什么拦截了我的鼠标事件，为什么它们会在菜单第一次出现时传递到我的自定义视图，但不是在第二次出现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-04T18:47:19.010

我有同样的问题。原来问题是我在第一次菜单点击后启动了一个外部应用程序，当菜单再次打开时，它的窗口不再是关键。将此方法添加到我在菜单项中使用的 NSView 子类解决了问题：

```
- (void)viewWillMoveToWindow:(NSWindow *)newWindow;
{
    [super viewWillMoveToWindow:newWindow];

    if ( newWindow != nil && ![newWindow isKeyWindow] )
        [newWindow becomeKeyWindow];

    [self updateTrackingAreas];
} 
```

有关更多上下文，请查看此链接： http: [//openradar.appspot.com/7128269](http://openradar.appspot.com/7128269)

# java - Java 类比实例或字符串

> ID：15075042
> 
> 赞同：2
> 
> 时间：2013-02-25T19:38:57.700
> 
> 标签：java, arraylist, compare, comparable, compareto

我正在尝试创建一个可以与同一类的实例进行比较的类，或者与`String`.

例如，考虑以下情况：

```
public class Record implements Comparable<Record> {
    public String name;

    public Record(String name) {
        this.name = name;
    }

    public int compareTo(Record o) {
        return name.compareTo(o.name);
    }
} 
```

然后我将其放入`ArrayList`如下：

```
ArrayList<Record> records = new ArrayList<Record>();
records.add(new Record("3"));
records.add(new Record("1"));
records.add(new Record("2")); 
```

如果我然后对它们进行排序，它们就会正确排序：

```
Collections.sort(records); 
```

但是，我不希望能够通过基于字符串的二进制搜索来获取记录。例如：

```
int index = Collections.binarySearch(records, "3"); 
```

问题是没有`compareTo`将 String 作为参数的方法，我不确定如何实现它。

我试着做：

```
public class Record implements Comparable<Record>, Comparable<String> {
    public String name;

    public Record(String name) {
        this.name = name;
    }

    public int compareTo(Record o) {
        return name.compareTo(o.name);
    }

    public int compareTo(String o) {
        return name.compareTo(o);
    }
} 
```

但是，当然，您不能多次使用不同的参数实现同一个接口。

所以，我正在寻找一种方法来完成上述工作。我已经查看了以下先前的答案，但还没有找到一个真正充分回答这个问题的答案。至少，如果是这样，我不明白。

*   [使用 Scanner 的 compareTo 和 Strings](https://stackoverflow.com/questions/10022635/compareto-and-strings-using-a-scanner)
*   [在Java中根据不同的数据成员对对象列表进行排序](https://stackoverflow.com/questions/10527990/sorting-a-list-of-objects-based-on-different-data-members-in-java)
*   一堆我现在没有链接的其他人......

基本上，我想做的是以下几点：

```
public int compare(Record r, String s) {
    return r.name.compareTo(s);
} 
```

不过，据我所知，如果不实现某种通用接口或超类，就无法比较不同类型的对象。我真的没有那个选项`String`。

如果可能的话，有人可以告诉我如何做到这一点吗？谢谢。

**更新** 我意识到我可以执行以下操作：

```
Collections.binarySearch(records, new Record("3")); 
```

但是，这不是我所追求的。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:42:20.240

您可以在不使用类型限定的情况下实现 Comparable，并使用 instanceof 检查传入的对象，并根据您收到的类型采取不同的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:47:25.580

你不能这样做。来自 javadoc

> 从 compareTo 的合同中可以看出，商是 C 上的等价关系，并且 String 的 compareTo 永远不会为您的 Record 返回 true。

您可以做的是创建比较字符串和记录的比较器。不用泛型就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:59:26.380

您可以尝试下一个获取排序集合中的索引：

```
class Record implements Comparable<String> {

    public String name;

    public Record(String name) {
        this.name = name;
    }

    @Override
    public int compareTo(String o) {
        return name.compareTo(o);
    }

} 
```

和：

```
public static void main(String[] args) {

    ArrayList<Record> records = new ArrayList<Record>();
    records.add(new Record("3"));
    records.add(new Record("1"));
    records.add(new Record("2"));

    Collections.sort(records, new Comparator<Record>() {
        @Override
        public int compare(Record a, Record b) {
            return a.name.compareTo(b.name);
        }
    });

    int index = Collections.binarySearch(records, "3");
    System.out.println(index); // 2

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T19:47:08.333

定义接口 ComparableToString 并实现它有问题吗？它的 compareTo 方法可以将调用者限制为 String。没有instanceof，不需要强制转换。

```
 public class Record implements Comparable<Record>, ComparableToString
    {
        public String name;

        public Record(String name)
        {
            this.name = name;
        }

        public int compareTo(Record o)
        {
            return name.compareTo(o.name);
        }

        public int compareTo(String o)
        {
            return name.compareTo(o);
        }
    }
    interface ComparableToString
    {
        public int compareTo(String s);
    } 
```

# lucene - Neo4j Lucene 集成层 - 它是否支持 soundex/spelling 功能？

> ID：15075049
> 
> 赞同：1
> 
> 时间：2013-02-25T19:39:17.480
> 
> 标签：lucene, neo4j

我们正在 Neo4j 中使用 Lucene 支持的索引实现带有通配符的文本搜索，并希望添加 soundex 和拼写检查功能。有人做过吗？我们想使用 Neo4j Lucene 集成层，这样我们就可以整合 Neo4j\Lucene 索引的管理，而不是直接使用 Solr 或 Lucene API。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:11:55.253

不确定这是否完成，但请查看 Neo4j 索引中的扩展 Lucene API，请参阅[http://docs.neo4j.org/chunked/snapshot/indexing-lucene-extras.html](http://docs.neo4j.org/chunked/snapshot/indexing-lucene-extras.html)

# php - Mysql php/pdo 语句执行时间在刷新时显着不同

> ID：15075052
> 
> 赞同：0
> 
> 时间：2013-02-25T19:39:21.157
> 
> 标签：php, mysql, pdo

我在与 mysql 数据库通信的 php 文档中有类似于以下的代码：

```
$db = new PDO('mysql:host=127.0.0.1;dbname=db;charset=UTF-8', 'name', 'pw',array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::ATTR_PERSISTENT => true, PDO::MYSQL_ATTR_USE_BUFFERED_QUERY=>true));    

$stmt=$db->prepare("SELECT SUM(anything)
                                FROM table
                                WHERE date IN (SELECT date FROM table WHERE something=:something AND somethingElse=:somethingElse) 
                                AND somethingElse=:somethingElse1"); 
```

这段代码第一次在浏览器中运行需要很长时间……如果通过刷新再次执行，它的运行速度会快 100 倍以上。我试图弄清楚是什么原因导致这样的 pdo 语句在刷新时运行得如此之快，但无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:41:51.920

这就是 mysql 的查询缓存启动...只要您的 RAM（阅读：MySQL 缓存内存分配）足够大，几乎所有 SELECT 都会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:44:38.850

为了优化，几个要点：

1.  避免 IN 和嵌套查询。
2.  请务必在加入/搜索的字段上添加索引。
3.  此外，如果可能的话，预先计算总和并将其存储在另一个表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:41:58.767

那只是查询缓存。
它与准备好的语句无关。

无论如何，您都必须优化您的查询，以使其始终快速运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T19:42:34.333

服务器“缓存”执行您的查询。所以第一次需要很多时间，但之后系统知道如何解决它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T19:45:07.437

首先，如果您有正确的索引，这样的事情根本不需要很长时间（即使在大型表上）。

你的表是什么，索引是如何设置的。这将帮助我们优化您的查询。

# php - PHP中的imagecopyresampled错误

> ID：15075053
> 
> 赞同：0
> 
> 时间：2013-02-25T19:39:23.990
> 
> 标签：php, image-resizing

我在这里不知所措。我已经成功上传了所有内容并使用`imagejpeg()`命令调整了文件的质量，但是，我的`imagecopyresampled`函数似乎给了我一个错误：

警告：imagecopyresampled() 期望参数 1 是资源，第 394 行给出的字符串

```
 $imgRaw = $_FILES[$file]['name'];
    $imgRawTemp = $_FILES[$file]['tmp_name'];

    $nameExtract = explode(".", $imgRaw);

    $ext = $nameExtract[count($nameExtract)-1];

    $imgAll = getimagesize($_FILES[$file]['tmp_name']);

    $uploadedName = time().uniqid()."_original.";

    $dir = "usrPld/";

    $thisImg = $dir.$uploadedName.$ext;

    if($imgAll['mime'] == 'image/jpeg' || $imgAll['mime'] == 'image/png')
    {
        if(move_uploaded_file($imgRawTemp, $thisImg))
        {

            list($width, $height, $type, $attr) = $imgAll;

            $thumbnailWidth = 250;
            $viewingWidth = 910;

            $thumbHeight = $thumbnailWidth*($height/$width);
            $viewingHeight = $viewingWidth*($height/$width);

            if($imgAll['mime'] == 'image/jpeg')
            {
                $image = imagecreatefromjpeg($thisImg);
            }
            else if($imgAll['mime'] == 'image/png')
            {
                $image = imagecreatefrompng($thisImg);
            }

            $newName = time().uniqid().".jpg";
            $newName2 = time().uniqid().".jpg";

            if($width > $viewingWidth)
            {
                if(imagejpeg($image, $dir.$newName, 100))
                {
                    if(imagecopyresampled($dir.$newName2, 
                            $dir.$newName, 
                            0, 0, 0, 0, 
                            $viewingWidth, 
                            $viewingHeight, 
                            $width, 
                            $height))
                    {
                        unlink($thisImg);
                        unlink($dir.$newName);
                    }
                }
            }
            else
            {
                if(imagejpeg($image, $dir."no_".$newName, 100))
                {
                    unlink($thisImg);
                }
            }
        }
    }
    else
    {
        return "format error";
    } 
```

奇怪的是，我检查了`$height`（因为这是错误指向的地方）并且它正在输出一个应该的数字。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:50:53.137

$height 不是你的问题。您将目录路径作为前两个参数传递给 imagecopyresampled() 但它们必须是图像资源。所以你需要先做这样的事情：

```
$destImage = imagecreatetruecolor($viewingWidth, $viewingHeight);
$sourceImage = imagecreatefromjpeg($dir.$newName); 
```

然后将它们传递到您的函数中：

```
if(imagecopyresampled($destImage, 
                        $sourceImage, 
                        0, 0, 0, 0, 
                        $viewingWidth, 
                        $viewingHeight, 
                        $width, 
                        $height)) 
```

然后，大概您想将 $destImage 写入您的 $dir.$newName2 路径。

# laravel - Laravel 4：如何将数据放入每个视图中？

> ID：15075054
> 
> 赞同：3
> 
> 时间：2013-02-25T19:39:24.153
> 
> 标签：laravel, laravel-4

我有一个应用程序需要从数据库中为每个视图/请求获取菜单。我该怎么做？我想将数据放入每个视图中。

我看到有[`View Composers`](http://four.laravel.com/docs/responses#view-composers)，但我不能这样做`View::composer('*', ...)`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T19:50:25.710

如果您有默认视图，则可以使用该视图上的视图编辑器来传递菜单。它可能看起来像这样：

```
 View::composer('layout', function($view)
    {
        $view->with($menu,Menu::get());
    }); 
```

这将确保无论何时`layout`调用您的视图，`$menu`都将包含您的模型返回的任何内容。

此外，Laravel`View::share('foo',$bar)`可以`$foo`在所有视图中访问，并将其设置为 $bar。因此，如果您没有单一视图，您可以利用它来确保您始终可以`$menu`访问。

根据您的情况，一个可能比另一个更好

# javascript - JavaScript 中的异常记录，捕获堆栈跟踪

> ID：15075058
> 
> 赞同：2
> 
> 时间：2013-02-25T19:39:31.447
> 
> 标签：javascript, stack-trace, exception-logging

我使用[https://github.com/eriwen/javascript-stacktrace](https://github.com/eriwen/javascript-stacktrace)在发生异常时捕获堆栈跟踪。

在某些情况下，记录的信息看起来很奇怪，例如用户使用 IE9 并且记录的消息是`at {anonymous}()&#xA; at printStackTrace()&#xA; at {anonymous}(#object,&quot;error&quot;,&quot;&quot;)&#xA; at {anonymous}(#object,[#object...&quot;&quot;])&#xA; at d(12031,&quot;&quot;,#object,&quot;&quot;)&#xA; at {anonymous}()`.

在我的代码中，我有很多 jQuery 事件处理代码

```
$(document).ready(function () {
    $('#reset').bind('click', reset);
}

function reset(e){
    $.ajax({
        type: 'POST',
        url: '/my/url',
        dataType: "json",
        success: function (result) {
            // do something useful
        },
        error: function (request, error) {
            // log to server side.
            logError(error, printStackTrace());
        }
    });
} 
```

我认为在这种情况下，捕获的堆栈跟踪看起来就像匿名对象。

有没有更好的方法可以以更易读的方式捕获堆栈跟踪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:48:07.380

try catch 块怎么样 看看链接

```
<script>
var txt="";
function message()
{
try
  {
  adddlert("Welcome guest!");
  }
catch(err)
  {
  txt="There was an error on this page.\n\n";
  txt+="Error description: " + err.message + "\n\n";
  txt+="Click OK to continue.\n\n";
  alert(txt);
  }
}
</script> 
```

[http://www.w3schools.com/js/js_errors.asp](http://www.w3schools.com/js/js_errors.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T03:09:29.863

Javascript 中的每个函数曾经都有一个 caller 属性，但由于安全限制，您不能再指望它了。

即使可以，对于匿名函数也无能为力，因为它们根本没有名字。您可以将字符串与堆栈跟踪一起使用并使其更漂亮：

```
function prettyTrace(stackTrace) {
    if (!stackTrace || stackTrace === "")
        return "";

    return stackTrace.replace(/\&[^;]+\;/, "");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T18:16:10.037

根据[http://kangax.github.com/nfe/](http://kangax.github.com/nfe/) `function expressions is the only way to get a truly robust stack inspection` ，我想我知道原因。

所以在编码中，我们必须考虑如何创建函数以便让调试器捕获名称。

# java - Eclipse中的Java RMI问题

> ID：15075059
> 
> 赞同：0
> 
> 时间：2013-02-25T19:39:31.230
> 
> 标签：java, jakarta-ee, network-programming, rmi

我收到此错误，我尝试了所有可能的方法，但无法解决问题，请帮助解决此问题。

我正在使用 Eclipse 靛蓝 IDE。

从. `rmiregistry`_`cmd`

```
Exception:
    java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: 
    java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: 
    java.lang.ClassNotFoundException: RMISIntf
    java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: 
    java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: 
    java.lang.ClassNotFoundException: RMISIntf
    at sun.rmi.server.UnicastServerRef.oldDispatch(UnicastServerRef.java:419) 
```

.....................

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:06:15.573

注册表没有`ClassNotFoundException`在其 CLASSPATH 中命名的类。最简单的解决方案和其他几个 RMI 问题是在服务器 JVM 中启动 Registry，使用`LocateRegistry.createRegistry().`

# c++ - 可以静态链接具有较新平台 SDK 的库吗？

> ID：15075060
> 
> 赞同：2
> 
> 时间：2013-02-25T19:39:31.817
> 
> 标签：c++, windows, sdk

我正在使用一些使用 Visual C++ 6.0 构建的古老代码库。我需要调用，`AllowSetForegroundWindow()`但它正在构建的平台 SDK 没有定义该函数（我猜它是 2000 年之前的一些 PSDK）。

将 PSDK 更新为包含的 PSDK`AllowSetForegroundWindow()`似乎不是一种选择，因为 Microsoft 不再提供对 Visual C++ 6.0 的支持，并且 SDK 无法在线获得（或者甚至通过购买光盘，我已经尝试过）。

我的问题是我是否可以在 VS2010 中编写一个包含`AllowSetForegroundWindow()`调用的静态库，并与 VSC++ 6.0 项目链接，并通过该库调用调用。

或者有没有人对我如何解决这个问题有更好的想法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T20:05:32.697

您可以使用`GetProcAddress()`在运行时将包装函数连接到真实函数：

```
BOOL WINAPI defaultAllowSetForegroundWindow( DWORD dwProcessId)
{
    SetLastError(ERROR_NOT_SUPPORTED);
    return 0;
}

BOOL WINAPI shimAllowSetForegroundWindow( DWORD dwProcessId)
{
    static BOOL  (WINAPI *asfw)(DWORD) = 0;

    if (!asfw) {
        HMODULE user32 = LoadLibraryW(L"USER32");

        if (user32) {
            asfw = (BOOL (WINAPI *)(DWORD)) GetProcAddress( user32, "AllowSetForegroundWindow");
        }

        if (!asfw) {
            asfw = defaultAllowSetForegroundWindow;
        }
    }

    return (*asfw)(dwProcessId);
} 
```

您的代码可以调用`shimAllowSetForegroundWindow()`将转发到真正的 API（或在不支持 API 的平台上正常失败的默认值）。

您可能需要根据您的错误处理或线程安全需求进行自定义。

# ruby-on-rails - Rails 专用模型实例

> ID：15075062
> 
> 赞同：0
> 
> 时间：2013-02-25T19:39:38.797
> 
> 标签：ruby-on-rails, database-design, model

首先 - 欢迎提供其他建议，因为设计很灵活。

假设我们有一个徽章数据库（想想游戏化）。数据库中应该存在某些 Badge 实例（属性：名称、描述、图像）。我想定义专门的方法（earned()）来测试用户是否有资格获得其行为取决于模型的特定*实例*的徽章。

基本上，徽章的 id 决定了 Earn() 函数的行为。

有没有标准的方法来做到这一点？对我来说，它有一丝设计的味道。

# vba - 如何从 MS Word 文档中选择性地提取以黄色突出显示的文本？

> ID：15075067
> 
> 赞同：0
> 
> 时间：2013-02-25T19:40:00.747
> 
> 标签：vba, ms-word, text-formatting

我正在尝试编写一个 VB 脚本，从给定的 MS Word 文档中提取所有以黄色突出显示的文本段落。我的代码似乎 >> 几乎 << 正在工作......但我无法将文本导出限制为仅以黄色突出显示的部分。请注意，脚本必须选择高亮颜色，以防文档包含多种颜色的高亮显示。

```
Sub FindHighlightedText()

    'Get current working directory.
    Dim pwd As String
    pwd = ActiveDocument.Path

    Dim Name As String
    Name = pwd & "\Output.txt"

    ' Create a filehandle and open the output file.
    handle = FreeFile()
    Open Name For Output As #handle

    With ActiveDocument.Range.Find

        .ClearFormatting
        .Highlight = True
        .Forward = True

        'I THINK THE PROBLEM IS HERE!!
        If .Parent.HighlightColorIndex = wdYellow Then
              print #handle, .Parent.Text & vbNewLine
        End If

    End With

    ' Close the output filehandle.
    Close #handle

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:10:03.617

这可能会有所帮助

```
Sub Macro1()

    With Selection.Find
        .Highlight = True
        .Wrap = wdFindContinue
        .Format = True
    End With

    Do While Selection.Find.Execute()

        If Selection.Range.HighlightColorIndex = wdYellow Then
             Debug.Print Selection.Range.Text
        End If

    Loop

End Sub 
```

# actionscript-3 - AS3 如何获取外部图像的宽度和高度

> ID：15075071
> 
> 赞同：0
> 
> 时间：2013-02-25T19:40:17.067
> 
> 标签：actionscript-3

我只是尝试从 HTML URL 变量加载外部图像。示例：src="http://mysite.com/flash/load.swf?imageURL=http://mysite.com/img/image.jpg"

```
 var imageURL:String = this.loaderInfo.parameters.imageURL;
    var murl:URLRequest = new URLRequest(imageURL);
    var loader:Loader = new Loader();
    loader.load(murl);
    loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, loadProgress);
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadComplete);

function loadProgress(event:ProgressEvent):void
{
   var percentLoaded:Number = Math.round((event.bytesLoaded/event.bytesTotal) * 100);
   trace("Loading: "+percentLoaded+"%");
}

function loadComplete(event:Event):void
{
   trace("Complete");
   mc.addChild(loader);
} 
```

是的，这是有效的。但我想知道图像宽度和高度信息。因为我尝试为图像信息执行此操作

```
 function loadComplete(event:Event):void
{
   trace("Complete");
  var bm:Bitmap = Bitmap(loader.content);
   var CXL = bm.width;
   var CYL = bm.height; 
```

但它不起作用。任何建议请谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:44:08.840

该事件应该有一个 target.content 它是加载的 bmp，您应该能够从中获取宽度/高度。

```
function loadComplete(event:Event):void
{
   var bmp:Bitmap = event.target.content as Bitmap;
   trace("Complete width : "+ bmp.width);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:15:22.390

您不需要提取`content`or`bitmap`来获取宽度和高度。由于 Loader 是一个 DisplayObject，它的宽度和高度将与加载到其中的图像相同。所以`loader.width`和`loader.height`。

# arrays - 无法在 JDBC 中创建 varchar2 的 Oracle ARRAY

> ID：15075073
> 
> 赞同：0
> 
> 时间：2013-02-25T19:40:19.650
> 
> 标签：arrays, oracle, jdbc, nested-table

我使用以下代码创建 varchar2 的 Oracle ARRAY：

```
CREATE TYPE T_VARCHAR_LIST AS TABLE OF varchar2(32);

Class.forName("oracle.jdbc.driver.OracleDriver");
Connection con = DriverManager.getConnection(
      "jdbc:oracle:thin:@localhost:1521:TEST", user, password);
ArrayDescriptor arrayDescriptor = ArrayDescriptor.
      createDescriptor("T_VARCHAR_LIST", connection);
ARRAY array = new ARRAY(arrayDescriptor, conection, new String[]{"1", "2", "3"}); 
```

但是`array.getArray()`返回`["???", "???", "???"]`。

任何想法为什么 varchar2 的 ARRAY 没有正确创建？

顺便说一句，数字数组 ( `CREATE TYPE T_NUM_LIST AS TABLE OF NUMBER`) 已成功创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:02:58.603

我拿走了你的代码，并通过一些小的改动让它运行：

我的 Array TYPE 对象是这样的：

```
create or replace
TYPE TBL_ARRAY_VARCHAR2  AS TABLE OF VARCHAR2(80); 
```

我的代码如下所示：

```
try {
        Connection con;
        Class.forName("oracle.jdbc.driver.OracleDriver");

        con = DriverManager.getConnection(
                "jdbc:oracle:thin:@myhost:1521:LX1120", user,
                password);
        ArrayDescriptor arrayDescriptor = ArrayDescriptor.createDescriptor(
                "TBL_ARRAY_VARCHAR2", con);
        ARRAY array = new ARRAY(arrayDescriptor, con, new String[] { "1",
                "2", "3" });

        Object oArray = array.getArray();
        System.out.println(oArray.getClass().getName());

        if (oArray instanceof String[]) {
            String[] oArrayString = (String[]) oArray;
            for (int i = 0; i < oArrayString.length; i++) {
                System.out.println(i + ":" + oArrayString[i]);
            }
        }

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我运行它时看到的是：

```
[Ljava.lang.String;
0:1
1:2
2:3 
```

因此，您尝试做的事情没有错...

我的猜测——基于使用许多不同版本的 Oracle 和不同的 Oracle JDBC 驱动程序——是你的 JDBC 驱动程序版本和数据库版本不匹配，但这只是一个猜测。如果我是你，我会从服务器复制 JDBC 驱动程序并重试。请注意，即使名称不变，驱动程序的内容也可能发生变化，因此您需要做的不仅仅是比较名称。

大卫·罗尔夫

# objective-c - 何时使用 RACReplaySubject 与 RACMulticastConnection？

> ID：15075075
> 
> 赞同：16
> 
> 时间：2013-02-25T19:40:25.500
> 
> 标签：objective-c, reactive-programming, reactive-cocoa

使用[ReactiveCocoa](https://github.com/ReactiveCocoa/ReactiveCocoa)，似乎有两种方法可以让订阅者从信号中接收相同的值，而不是重新触发生成这些值的任何操作：通过 RACReplaySubject 或 RACMulticastConnection。

以下是 RACReplaySubject 的标头文档：

> 重播主题保存它发送的值（直到其定义的容量）并将这些值重新发送给新的订阅者。它还将重播错误或完成。

对于 RACMulticastConnection：

> 多播连接封装了将一个订阅共享给多个订阅者的想法。如果对基础信号的订阅涉及副作用或不应多次调用，则通常需要这样做。
> 
> 多播信号仅在 `-[RACMulticastConnection connect]`被调用时订阅。在此之前，不会在 上发送任何值`signal`。查看`-[RACMulticastConnection autoconnect]`如何 `-[RACMulticastConnection connect]`自动调用。
> 
> 请注意，您不应手动创建 RACMulticastConnection。而是使用 `-[RACSignal publish]`or `-[RACSignal multicast:]`。

有人可以提供**关于何时使用 RACReplaySubject 或 RACMulticastConnection 的简单指南**吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-10T05:29:34.020

实际上，它们并不相互排斥，甚至可以一起使用。

的主要目的[`RACMulticastConnection`](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/ReactiveCocoaFramework/ReactiveCocoa/RACMulticastConnection.h)是订阅一个基本信号，然后将该订阅多播给任意数量的其他订阅者，*而不会*多次触发基本信号的副作用。

`RACMulticastConnection`通过将值发送到 private 来实现这一点，该 private[`RACSubject`](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/ReactiveCocoaFramework/ReactiveCocoa/RACSubject.h)是通过连接的[`signal`](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/83e23a96e726c99a444e83f306271d0e7d981379/ReactiveCocoaFramework/ReactiveCocoa/RACMulticastConnection.h#L26-L27)属性公开的。订阅者附加到主题（不会导致任何副作用），并且连接将所有基本信号的事件转发到那里。

有几种不同的方法来创建连接：

*   [`-publish`](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/2171061e0511aaefc0fd19f4771a8d34ea4b5045/ReactiveCocoaFramework/ReactiveCocoa/RACSignal%2BOperations.h#L300-L302)创建与普通的连接`RACSubject`。该主题不会将以前的值重播给新订阅者。
*   该[`-multicast:`](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/2171061e0511aaefc0fd19f4771a8d34ea4b5045/ReactiveCocoaFramework/ReactiveCocoa/RACSignal%2BOperations.h#L304-L307)方法创建与您选择的主题的连接。你可以决定在`RACReplaySubject`这里使用。
*   , [`-replay`](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/2171061e0511aaefc0fd19f4771a8d34ea4b5045/ReactiveCocoaFramework/ReactiveCocoa/RACSignal%2BOperations.h#L309-L313),[`-replayLast`](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/2171061e0511aaefc0fd19f4771a8d34ea4b5045/ReactiveCocoaFramework/ReactiveCocoa/RACSignal%2BOperations.h#L315-L319)和[`-replayLazily`](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/2171061e0511aaefc0fd19f4771a8d34ea4b5045/ReactiveCocoaFramework/ReactiveCocoa/RACSignal%2BOperations.h#L321-L328)方法可以方便地创建与 a 的连接`RACReplaySubject`，然后自动[连接](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/83e23a96e726c99a444e83f306271d0e7d981379/ReactiveCocoaFramework/ReactiveCocoa/RACMulticastConnection.h#L29-L44)到它。

如果有疑问，`-replayLazily`可能会做您想做的事，因为它会保存所有值并且仅在返回的信号收到订阅时触发任何副作用（或开始任何工作）。

# ruby-on-rails - 动作控制器：捕获异常 [Home#index 中的 NoMethodError]

> ID：15075078
> 
> 赞同：1
> 
> 时间：2013-02-25T19:40:48.360
> 
> 标签：ruby-on-rails, ruby, mongodb, actioncontroller

我正在尝试为以前的开发人员传给我的 ROR 应用程序设置本地开发环境。我是 ROR 和 Ruby 的新手。

首先我运行`bundle install`没有问题，然后`mongod`。当我运行`rails s`服务器启动时，它会输出`host is not a valid option for Mongo::Connection`.

当我尝试转到时`http://0.0.0.0:3000`出现错误消息。 `NoMethodError in Home#index`

错误指向以下路径：

显示 /Users/ryansnyder/Rails/myAppX/app/views/home/index.html.haml 其中第 12 行提出：

`undefined method 'url' for nil:NilClass`

提取的源代码（第 12 行附近）：

```
9:     %h2 Asset Protection
10:     = link_to image_tag('asset-protection-guide.png'), 'http://myAppX.s3.amazonaws.com/assets/downloads/myAppX-AssetProtectionGuide.pdf', :title => 'Asset Protection Guide', :alt => 'Download our Asset Protection Guide', :target => '_blank'
11:   %section#graphs
12:     = link_to image_tag(@chart.url, :alt => @chart.alt), eval(@chart.link), :title => @chart.title
13: 
14: %section#recent-happenings
15:   %section#upcoming-events 
```

我在 .haml 文件中注释掉了该行，然后刷新`http://0.0.0.0:3000`并收到另一个`undefined method 'question' for nil:NilClass`错误。我认为这是数据库或错误处理问题。但我只是猜测。

编辑：我不知道这是否有帮助，但是在运行时`rake test`我收到以下输出。

```
host is not a valid option for Mongo::Connection
/Users/ryansnyder/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.0.19/lib/active_support/dependencies.rb:242:in `require': no such file to load -- turn (LoadError)
    from /Users/ryansnyder/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.0.19/lib/active_support/dependencies.rb:242:in `block in require'
    from /Users/ryansnyder/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.0.19/lib/active_support/dependencies.rb:227:in `load_dependency'
    from /Users/ryansnyder/.rvm/gems/ruby-1.9.2-p290/gems/activesupport-3.0.19/lib/active_support/dependencies.rb:242:in `require'
    from /Users/ryansnyder/Rails/alerstallings-master/test/test_helper.rb:4:in `<top (required)>'
    from /Users/ryansnyder/Rails/alerstallings-master/test/functional/lawyers_controller_test.rb:1:in `require'
    from /Users/ryansnyder/Rails/alerstallings-master/test/functional/lawyers_controller_test.rb:1:in `<top (required)>'
    from /Users/ryansnyder/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.3/lib/rake/rake_test_loader.rb:10:in `require'
    from /Users/ryansnyder/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.3/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
    from /Users/ryansnyder/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.3/lib/rake/rake_test_loader.rb:9:in `each'
    from /Users/ryansnyder/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.3/lib/rake/rake_test_loader.rb:9:in `block in <main>'
    from /Users/ryansnyder/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.3/lib/rake/rake_test_loader.rb:4:in `select'
    from /Users/ryansnyder/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.3/lib/rake/rake_test_loader.rb:4:in `<main>'
Errors running test:functionals! 
```

编辑 2：mondoid.yml

```
defaults: &defaults
  host: localhost
  # slaves:
  #   - host: slave1.local
  #     port: 27018
  #   - host: slave2.local
  #     port: 27019

development:
  <<: *defaults
  database: alerstallings_development

test:
  <<: *defaults
  database: alerstallings_test

staging:
  uri: <%= ENV['MONGOHQ_URL'] %>

# set these environment variables on your prod server
production:
  uri: <%= ENV['MONGOHQ_URL'] %> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:20:52.883

您需要检查您要返回的对象是否不为零。您应该添加一些错误处理并检查您的数据库是否返回了适当的对象。一个快速的解决方法是有条件地运行您的代码：

```
unless @chart.nil?
  # Your previous code here
end 
```

# html - iPad 2 不尊重电子邮件的媒体查询

> ID：15075082
> 
> 赞同：0
> 
> 时间：2013-02-25T19:40:57.813
> 
> 标签：html, css, ipad, email, media-queries

所以我最近遇到了一个与 iPad 2 的邮件有关的问题。

我有这个媒体查询：

```
@media only screen and
  (max-width: 727px) {
     ...
  } 
```

（我使用 727 只是为了在屏幕宽度小于电子邮件标头时开始缩小内容。

问题是，对于 iPad 2（我也假设为 1，但我没有要测试的），它不会开始尊重媒体查询，除非我一直下降到 701px 的最大宽度.

它似乎可以在 iPad3 上运行（至少根据试金石，因为我也没有可以测试的物理设备）。

有人遇到过这种情况么？我假设 iPad 的最大宽度为 768 像素。

编辑：对不起，我最初并不清楚这一点，但对于 iPad2，它实际上是在使用这个媒体查询（我没想到，因为设备宽度应该是 768px），但对于 iPad3，它实际上并没有解释它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-18T14:32:18.567

我在 iPad Mini 上的电子邮件模板也遇到了同样的问题。这是我最初的@media 查询：

```
@media only screen and (max-width: 760px) {
  ...
} 
```

但正如您所指出的（顺便说一句，谢谢！）iPad 正在接受这些。我只在 iPad mini 上进行了测试，但我能够通过添加`max-device-width`如下声明来“欺骗”iPad 忽略它们：

```
@media only screen and (max-width: 760px) and (max-device-width: 760px) {
  ...
} 
```

*注意：使问题更加复杂的是 Litmus 显示 iPad Mini 忽略了仅限移动设备的 CSS，但是当我在实际设备上对其进行测试时，它发现了它们。*

# jquery - 如何使用 Malsup jquery Form 插件设置 contentType？

> ID：15075083
> 
> 赞同：0
> 
> 时间：2013-02-25T19:41:18.407
> 
> 标签：jquery, utf-8, multipartform-data

我有一个包含文件输入元素的表单。当我向服务器发出请求时，Firebug 在请求标头中报告以下内容：

```
Content-Type    multipart/form-data; boundary=---------------------------287452692419072 
```

但是，我将内容类型设置如下：

```
 var setupOptions = { 
            success: update,
            type: 'POST',
            dataType: 'json',            
            url:   '../update.html',
            contentType: 'multipart/form-data; charset=UTF-8',
            error: error.handle,
            timeout: 50000
    };                
    $('#form').ajaxSubmit(setupOptions); 
```

当用户在表单元素中输入如下数据时

```
sellers’ 
```

数据存储在数据库中

```
 sellersâ 
```

我相信这是因为浏览器没有将请求作为 charset=UTF-8 发送。如何设置 charset=UTF-8？如果可能的话，我宁愿继续使用这个插件。

**编辑**

如果问题不在浏览器中，或者我需要在服务器上实施解决方法，这里有一些附加信息：

我正在使用 Java 1.6、SQL Server、Maven、myBatis 3 和 Spring 3.0（使用 MVC 注释）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:11:53.767

aw ie 的恐怖......你需要在你的 servlet 中返回一个带有标题的 ResponseEntity。就像是：

```
 @RequestMapping(value = "/somefile/add", method = RequestMethod.POST) {
public ResponseEntity<String> uploadTempImage(
HttpHeaders responseHeaders = new HttpHeaders();
responseHeaders.set("Content-Type", "text/html");
return new ResponseEntity("horses on a boat", responseHeaders, HttpStatus.OK);
} 
```

# ruby-on-rails - 如果 URL 中没有 http://，则不接受 URL

> ID：15075088
> 
> 赞同：0
> 
> 时间：2013-02-25T19:41:28.373
> 
> 标签：ruby-on-rails, validation, devise

环境：RAILS 3.2.6 宝石：设计

在我的 user.rb 中，我有以下内容：

```
validates :url, format: {with: NO_SPACES_REGEX}, presence: true 
```

NO_SPACES_REGEX 在别处定义为：

```
NO_SPACES_REGEX = /\S/ 
```

问题是如果有人输入没有 http:// 的 url，Rails 不喜欢它，它会要求用户输入一个 URL。我该如何解决这个问题？

# database - Codeigniter 在非对象上调用成员函数 database()

> ID：15075097
> 
> 赞同：1
> 
> 时间：2013-02-25T19:42:34.523
> 
> 标签：database, codeigniter, autoload

是的，是的，我已经在整个互联网上搜索过这个问题。发现了一些结果，甚至来自 Stackoverflow。但他们中的大多数人说“你应该自动加载数据库”，或者“parent::__construct();” 像代码。我几乎都试过了。还是没有结果。它简直要了我的命。

我有一个名为“我们”的表。我只需要从中读取数据。

**模型：** application/models/we_model.php

```
 class We_model extends CI_Model {

    function __construct() {

        parent::__construct();
        $this->load->database();
    }

    public function get_all_we() {

        $query = $this->db->get('we');
        return $query->result();
    }
} 
```

**控制器：** applicatoin/controllers/home.php

```
class Home extends CI_Controller {

    function __construct() {

        parent::__construct();
        $this->load->model('we_model');
    }

    public function index() {

        $data['we_lists'] = $this->we_model->get_all_we();
        $this->load->view('home_template_view', $data);
    }
} 
```

**自动加载：** application/config/autoload.php

```
$autoload['libraries'] = array('database', 'session', 'form_validation'); 
```

**截屏：** ![错误截图](../Images/787977db203ac8f714fba1dda6e6be3d.png)

我正在使用 Codeigniter 2.1.3、Wampserver 2.2e、PhpStorm 5.0.4 并遵循[本](http://www.w3programmers.com/introduction-to-codeigniter-basic-with-crud/)教程。

**更新：** 我读[了这个论坛](http://ellislab.com/forums/viewthread/218108/#1006613)。他说，在将编辑器从 Eclipse 切换到 Dreamweaver 之后，代码就可以工作了。所以我改变了我的 IDE，从 PHPStorm 到 Sublime text 2。代码现在可以工作了。你可以解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T05:52:43.790

无需调用`$this->load->database();`您的模型

只需在 autoload.php 中使用它：

```
$autoload['libraries'] = array('database', 'session'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:50:17.713

如果您没有自动加载数据库库（老实说，您确实应该这样做）更改此行：

```
$this->load->database(); 
```

到

```
$this->load->library('database'); 
```

# wordpress - 为什么单词分页在第 2 页制动？

> ID：15075101
> 
> 赞同：0
> 
> 时间：2013-02-25T19:42:43.957
> 
> 标签：wordpress, loops, pagination, categories

我有一个有分页的类别循环。第一页永远是对的。一旦我通过第一页，它就会将类别混合在一起。此外，页数总是错误的。

```
<?php
    global $paged;
    $cat = get_the_category();
    $catSlug = $cat[1]->slug;
    $query = new WP_Query(array('category_name' => $catSlug,'posts_per_page' => 20,'paged' => $paged));
 ?>
<?php
    while ( $query->have_posts() ) :
        $query->the_post();
?>
        <li><a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( '%s', 'starkers' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a></li>
<?php endwhile; ?>
    </ul>
<?php
    global $wp_query;

    $catSlug = $cat[0]->slug;
    $total_pages = $wp_query->max_num_pages;

    if ($total_pages > 1){

  $current_page = max(1, get_query_var('paged'));

  echo paginate_links(array(
      'base' => get_pagenum_link(1) . '%_%',
      'format' => '?paged=%#%',
      'current' => $current_page,
      'total' => $total_pages,
      'add_args' => array('category_name' => $catSlug)
    ));
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:54:20.890

弄清楚了：

paginate_links() 需要 query_posts() 才能工作。我不得不更改 query_posts 而不是使用 wp_query，如下所示：

```
<?php
    global $query_string;
    query_posts( $query_string . '&posts_per_page=20' );
?>
<?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
        <li><a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( '%s', 'starkers' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a></li>
<?php endwhile; ?>
    </ul>
<?php
    global $wp_query;

$total_pages = $wp_query->max_num_pages;

if ($total_pages > 1){

  $current_page = max(1, get_query_var('paged'));

  echo paginate_links(array(
      'base' => get_pagenum_link(1) . '%_%',
      'format' => '?paged=%#%',
      'current' => $current_page,
      'total' => $total_pages,
    ));
}
?> 
```

# mysql - Oracle 等效于 MySQL 代码“插入虚拟”以返回错误消息

> ID：15075102
> 
> 赞同：2
> 
> 时间：2013-02-25T19:42:48.610
> 
> 标签：mysql, sql, oracle, oracle11g

我在 mysql db 中有几百个触发器，我正在迁移到 Oracle db。有一个声明，我看到了很多我无法在 oracle 中找到等效的声明。

```
INSERT INTO $some_kind_of_message._BD_TRIGG$ (dummy) VALUES (value); 
```

我在程序和函数中也看到了这一点，它似乎向调用程序的应用程序“返回”了一条消息（我认为）。我在两个 RDBMS 中都是新手，但我已经使用 oracle 几个月了。

是否有等效的语句来替换 oracle 中的 mysql 语句？非常感谢。

**编辑：**

这是许多触发器的示例。这个用于登录验证。我不太确定 oracle 的触发器语法，但现在这不是问题。'case' 部分仍然是 mysql 语法。我无法在 mysql 或 oracle 文档中找到信息。这不是一个正常的插入，它是 mysql 使用的某种*返回消息*（这就是我的猜测），我在函数和过程中也看到了它。¿我如何替换它以供 oracle 执行相同的任务？

```
CREATE OR REPLACE TRIGGER adduser 
BEFORE INSERT
ON tbl_users
FOR EACH ROW

  DECLARE flag INTEGER;

  begin
  flag := 1;

  /* validate login */
  IF(LENGTH(TRIM(:NEW.login)) < 4) THEN
    flag := -1;
  END IF;

  /* valido clave */
  IF(flag = 1) THEN
    IF(LENGTH(:NEW.clave) < 3) THEN
      flag := -2;
    END IF;
  END IF;
    CASE flag
        WHEN -1 THEN INSERT INTO $login_less_then_4_characters._BD_TRIGG$ (dummy) VALUES ('error');
        WHEN -2 THEN INSERT INTO $pass_less_then_5_characters._BD_TRIGG$ (dummy) VALUES ('error');
        ELSE flag := 0;
    END CASE;
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:29:07.077

我认为您需要`RAISE_APPLICATION_ERROR()`功能/程序。

句法：

```
raise_application_error(error code, your error message); 
```

例子：

```
raise_application_error(-20001, 'Login must have 4 characters or more'); 
```

在 Oracle 自定义应用程序中，错误代码介于`-20000`和之间`-20999`。

更多信息在这里：

[Oracle PL/SQL - 使用自定义 SQLERRM 引发用户定义的异常](https://stackoverflow.com/questions/6020450/oracle-pl-sql-raise-user-defined-exception-with-custom-sqlerrm)

Oracle 文档：[链接](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/errors.htm#i3329)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:02:16.933

我不熟悉 MySQL 语法，但在 Oracle 中它翻译为

```
Insert into table_name(column_name) VALUES (value); 
```

其中 dummy 是某个表中的列或传递给函数的参数。您不能在 Oracle 的 Insert 语句中使用过程、触发器。您可以在 DML 语句中使用 Function()，例如 SELECT your_function(dummy)..., INSERT your_function(dummy)... 众所周知，函数返回一个值。

# scala - 创建新游戏的最佳方式是什么！2.1模块？

> ID：15075104
> 
> 赞同：1
> 
> 时间：2013-02-25T19:42:50.497
> 
> 标签：scala, playframework-2.0, sbt

从 Play 2.0 开始，除了创建新的 Play 应用程序之外，似乎不再有为现有 Play 应用程序创建模块的方法。经过一番搜索，我发现了[这些说明](http://www.objectify.be/wordpress/?p=363)，这表明我必须（或至少应该）删除在新模块（应用程序）中创建的任何路由，并且模块的 application.conf 文件实际上只是一个存根需要才能将该模块识别为 Play 应用程序。

我是 Play 新手，但显然曾经有一个用于生成模块的控制台命令（'new-module'），它可能只创建了应用程序发现模块所需的那些文件。在我看来，能够以这种方式快速创建新模块仍然很有用，特别是如果从控制台注册新模块还会将该模块添加到您的构建和您选择的存储库中，从而删除（尽可能）手动接线的要求。

我还希望能够维护我的应用程序所依赖的 Play 模块作为同一代码库/构建的一部分，这样，当我对模块进行更改时，它们会在应用程序编译时被拾取（例如，当播放是〜正在运行并保存更改的文件）。注册为依赖项的模块是否已经发生这种情况，或者我必须独立于我的应用程序重新构建模块？

因为我是新人，所以我不肯定*没有*办法以自动化的方式完成这些任务。[Play for Scala 一书](http://www.manning.com/hilton/)（第三部分，第 9 章）中列出了关于包和模块的一章，但该书尚未完成，不幸的是，该章尚未完成。

如果有经验的玩！开发人员会很好地确认我上面链接的指令仍然是创建模块并将其注册/维护为依赖项的推荐过程，或者列出一个更好的过程，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:00:34.300

大部分信息是有效的。

对于 Play 2.x，常规库和 Play 模块（本身依赖于 play 库 jar 的库）之间没有区别。

[关于路由文件的部分仍然有效，但他们引入了“子路由组合”以给您一些额外的自由（在高亮页面](http://www.playframework.com/documentation/2.1.0/Highlights#Allow%20more%20modularization%20for%20your%20projects)上搜索“允许对您的项目进行更多模块化” ）。

带有版本的文件中引用了库（以及因此 Play 模块）`Build.scala`，例如：

```
"play.modules.mailer" %% "play-mailer" % "1.1.0" 
```

如果您自己开发一个模块，您可以使用“发布本地”命令来确保您计算机上的其他项目可以找到依赖项。因为模块本质上是版本库，所以您需要将它们与您的应用程序分开编译。但是，没有人阻止您运行脚本来使事情自动化。

# javascript - 当 Facebook 已被授权时，我如何调用函数？无法调用 FB.ui

> ID：15075112
> 
> 赞同：0
> 
> 时间：2013-02-25T19:43:20.870
> 
> 标签：javascript, facebook, facebook-login

当 Facebook 已被授权时，我如何调用函数？我需要根据成功将它传递到另一个页面。如果它被授权，我想将它转发到新的 jsp。我怎样才能调用该函数？我通过 Fb.ui 读到我们可以编写回调函数。但是 FB.ui 将如何被调用呢？我试过但是如何调用FB.ui？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:56:29.507

在 FB.init 之后添加事件监听器

```
<div id="fb-root"></div>
<script>
  FB.init({
      appId      : 'YOUR_APP_ID', // App ID from the App Dashboard
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File for x-domain communication
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

  FB.Event.subscribe('auth.login', function(response) {
      alert('The status of the session is: ' + response.status);
      window.location.replace('http://www.NEW_URL.COM/');
  });
}); 
```

传入的响应对象将包含：

```
{
  status: "",         /* Current status of the session */
  authResponse: {          /* Information about the current session */
    userID: ""          /* String representing the current user's ID */
    signedRequest: "",  /* String with the current signedRequest */
    expiresIn: "",      /* UNIX time when the session expires */
    accessToken: "",    /* Access token of the user */
  }
} 
```

根据您的要求，您可以收听其他与身份验证相关的事件 - 请参阅 facebook 开发人员文档以在此处订阅事件：http: [//developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# r - 具有复杂功能的tryCatch和R中的plyr

> ID：15075113
> 
> 赞同：2
> 
> 时间：2013-02-25T19:43:22.350
> 
> 标签：r, error-handling, parallel-processing, try-catch, domc

我有一个复杂而冗长的函数，我用它来进行模拟。它可能会产生错误，主要与以零方差相等的值结束的随机向量有关，被输入 PCA 或逻辑回归。

我正在使用`doMC`and的集群上执行它`plyr`。我不希望`tryCatch`函数内部的每一件小事，因为错误的可能性很多，而且每个错误的概率都很小。

我如何尝试每次运行，而不是`tryCatch`每条小线？代码是这样的：

```
iteration = function(){
    a really long simulation function where errors can happen
    }
reps = 10000
results = llply(1:reps, function(idx){out<-iteration()},.parallel=TRUE) 
```

**大约一年后编辑：** 该`foreach`软件包使这比使用该软件包要容易得多`plyr`

```
library(foreach)
output <- foreach(i=1:reps, .errorhandling = 'remove')%dopar%{
  function
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:00:15.163

你能把try catch循环包装在你传递给llply的函数中吗？

```
results = llply(1:reps, function(idx){
    out = NA
    try({ 
        out<-iteration()
    }, silent=T)
    out
},.parallel=TRUE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:20:54.393

您可以`tryCatch`在函数迭代中放入，例如：

```
iteration <- function(idx){
  tryCatch(
    { idx <- idx+1
      ## very long treatments here...
      ## I add a dummy error here to test my tryCatch
      if(idx %% 2000 ==0) stop("too many iterations")
    },error = function(e) print(paste('error',idx)))
} 
```

现在在内部测试它`llply`，

```
library(plyr)
reps = 10000
results = llply(1:reps, iteration,.parallel=TRUE)
1] "error 2000"
[1] "error 4000"
[1] "error 6000"
[1] "error 8000"
[1] "error 10000" 
```

# asp.net - ASP.NET：子用户控件内的 UpdatePanel 内的 Response.BinaryWrite

> ID：15075118
> 
> 赞同：1
> 
> 时间：2013-02-25T19:43:42.133
> 
> 标签：asp.net, user-controls, updatepanel, parent-child, binarywriter

所以我有以下场景：

--- 页面.aspx ---

```
UpdatePanel
   ListView
      UserControl.ascx 
```

--- 用户控件.ascx ---

```
 ListView
        Button|ID:btnDownloadAttachment 
```

我使用以下方法下载附件：

```
public void OpenDocument(byte[] AttContent, string fileName, string inExtension)
{
    Response.Clear();
    Response.ClearHeaders();
    Response.ClearContent();

    Response.ContentType = "application/pdf";

    Response.AddHeader("Content-Disposition", "attachment;filename=" + fileName + inExtension);
    Response.AddHeader("Content-Length", AttContent.Length.ToString());
    Response.BinaryWrite(AttContent);
} 
```

但由于内容在更新面板内，我收到以下错误：

“Sys.WebForms.PageRequestManagerParserErrorException：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器收到的消息。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-22T15:30:11.623

如果你运行 fiddler 来查看响应，我猜你会看到你的下载。问题是部分页面呈现。当客户端得到它认为它应该得到一个页面更新，而不是得到一个二进制文件。有几个解决方案：

选项 #1，完全禁用页面的部分页面渲染（必须在 page_init 中完成）：

```
protected void Page_Init(object sender, EventArgs e)
{
  ScriptManager mgr = ScriptManager.GetCurrent(this);
  mgr.EnablePartialRendering = false;
} 
```

选项 #2 使用启动下载的控件强制回发：

```
ScriptManager.GetCurrent(this.Page).RegisterPostBackControl(BtnExport); 
```

选项 #3 创建回发触发器

```
<asp:updatepanel id="UpdatePanel1" runat="server">
    <triggers>
        <asp:postbacktrigger ControlID="BtnExport"/>
    </triggers>
</asp:updatepanel> 
```

# text - 在数千个文本文件中用 X 替换名称

> ID：15075119
> 
> 赞同：1
> 
> 时间：2013-02-25T19:43:45.410
> 
> 标签：text, replace

我对编程一无所知。

1.  我有数千个文本文件 (.txt)，每个文件中都包含人名。我在单独的电子表格的列中也有这些名称。我想用“X”替换所有这些名称。因此，代替“布拉德皮特”或“安吉丽娜朱莉”或“乔治克鲁尼”，将全部替换为“X”。是否可以通过几步方法来完成，而不是打开每个文件并替换名称？

2.  我在每个文件中都有一个 7 字符的数字字符串，比如 1234567 或 1234568。是否可以将所有这些文件中的所有这些数字都替换为“X”？

请指导我可以使用 Windows 中的哪些程序来执行这些操作？接受我对普通计算机语言的道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:52:52.233

下载notepad++，[http://notepad-plus-plus.org/download/v6.3.html](http://notepad-plus-plus.org/download/v6.3.html) 点击顶部，搜索>查找（或ctrl+f）点击find in files选项卡选择目录，填写find what并用文件中的单击替换替换

编辑：“我做了，但问题是在“查找内容”中，我可以输入一个名字，但我有一个包含 1000 个不同名字和姓氏的列表，要替换为 X（我的意思是去识别化）”

在这种情况下，我会编写一个 C# 程序来读取所有文件，逐个文件并遍历您的名称列表。使用 String.Replace 方法将名称替换为 X，然后保存文件。查看 StreamReader 和 StreamWriter 类。

[http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)

[http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)

# wpf - 找出 WPF 中控件的实际（！）显示大小

> ID：15075123
> 
> 赞同：1
> 
> 时间：2013-02-25T19:43:59.200
> 
> 标签：wpf, layout

我正在对类似工具栏的控件进行一些布局，并且在空间不足时需要隐藏按钮的文本。我已经在 Windows 窗体中成功完成了这项工作，现在我已将此逻辑移植到 WPF。但是这里有一个很大的问题：为了让我的算法正常工作，我需要知道容器控件的所需宽度（知道如果所有内容都可见则需要什么大小）和控件的实际宽度（知道如何确实很宽，以及是否有足够的空间容纳所需的宽度）。第一个是可用的，尽管有时有点倒退。（如果可用空间多于所需空间，则 DesiredSize 会增加以将其全部填满，尽管更少也可以。）后一个完全不可用！

我已经尝试过 ActualWidth，但如果 Grid 比窗口宽，则 ActualWidth 比实际可见的要多。所以这一定是错的。然后我尝试了 RenderSize，但它是一样的。在我的 Measure 调用之后使用 Arrange 会导致更多的怪异。

我需要知道控件的实际宽度，而不是它认为自己的宽度。我怎样才能确定那个大小？

**更新**：好的，这里有一些代码。这个问题已经很长了，仍然不完整。这是来自 Window 的代码隐藏。

```
private void ToolGrid_LayoutUpdated(object sender, EventArgs e)
{
    AutoCollapseItems();
}

private void AutoCollapseItems()
{
    if (collapsingItems) return;
    if (ToolGrid.ActualWidth < 10) return;   // Something is wrong
    try
    {
        collapsingItems = true;

        // Collapse toolbar items in their specified priority to save space until all items
        // fit in the toolbar. When collapsing, the item's display style is reduced from
        // image and text to image-only. This is only applied to items with a specified
        // collapse priority.

        Dictionary<ICollapsableToolbarItem, int> collapsePriorities = new Dictionary<ICollapsableToolbarItem, int>();

        // Restore the display style of all items that have a collpase priority.
        var items = new List<ICollapsableToolbarItem>();
        EnumCollapsableItems(ToolGrid, items);
        foreach (var item in items)
        {
            if (item.CollapsePriority > 0)
            {
                item.ContentVisibility = Visibility.Visible;
                collapsePriorities[item] = item.CollapsePriority;
            }
        }

        // Group all items by their descending collapse priority and set their display style
        // to image-only as long as all items don't fit in the toolbar.
        var itemGroups = from kvp in collapsePriorities
                         where kvp.Value > 0
                         group kvp by kvp.Value into g
                         orderby g.Key descending
                         select g;
        foreach (var grp in itemGroups)
        {
            //ToolGrid.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
            //ToolGrid.Arrange(new Rect(ToolGrid.DesiredSize));
            //ToolGrid.UpdateLayout();
            System.Diagnostics.Debug.WriteLine("Desired=" + ToolGrid.DesiredSize.Width + ", Actual=" + ToolGrid.ActualWidth);
            if (ToolGrid.DesiredSize.Width <= ToolGrid.ActualWidth) break;
            foreach (var kvp in grp)
            {
                kvp.Key.ContentVisibility = Visibility.Collapsed;
            }
        }
        //ToolGrid.UpdateLayout();
    }
    finally
    {
        collapsingItems = false;
    }
} 
```

更多代码：这是 Window XAML 的一部分：

```
<Window>
    <DockPanel>
        <Grid Name="ToolGrid" DockPanel.Dock="Top" LayoutUpdated="ToolGrid_LayoutUpdated">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                ...
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
        </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:59:55.170

据我了解，您使用的是 Grid，但您将列宽度设置为 Auto，您如何使用 * 作为 Grid.Column 的宽度而不是 Auto。如果 Auto 然后 Grid 拉伸其宽度和高度以适应其内容，因此您的 Grid.Width 大于窗口宽度。当您使用 * 时，该列不会关心内容，但它始终位于窗口边界内。

现在在实现 * 之后，您可以使用位于窗口边界内的 column.width/height 作为最终宽度/高度，并且在 Grid 内，您可以测量嵌套内部控件的缩小尺寸。这就是你如何获得最终尺寸和缩小尺寸的控件。

显示更多代码/xaml，我们将能够为您提供更多帮助。

**编辑：**

```
<Window>
<DockPanel x:Name="dockyPanel>
    <Grid Name="ToolGrid" DockPanel.Dock="Top" LayoutUpdated="ToolGrid_LayoutUpdated">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            ...
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
    </Grid>

var itemGroups = from kvp in collapsePriorities
                     where kvp.Value > 0
                     group kvp by kvp.Value into g
                     orderby g.Key descending
                     select g;
    double x = 0.0;
    foreach (var grp in itemGroups)
    {
        // x will be increased by the sum of all widths of items
        x += grp.SumOfAllWidthOfGroup;

        // if x greater than available space then this group needs to collaps its items
        if(x > this.dockyPanel.ActualWidth)
        {
          foreach (var kvp in grp)
          {
            kvp.Key.ContentVisibility = Visibility.Collapsed;
          }
        }
    } 
```

这个怎么样？我的伪代码会进一步帮助你吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:00:06.860

事实证明，WPF 不会为我提供可预测的 Grid 大小，该 Grid 包含所有带有按钮元素的自动调整大小的列。但是这个 Grid 的父元素，无论它是什么以及它是如何布局的，都提供了可用的信息。所以我的解决方案基本上是在已经存在的内容和我的实际工具栏布局网格之间插入另一个级别的 Grid 容器，并比较两者的不同大小。确定网格是否适合给定空间的中心测试现在是：

```
foreach (var grp in itemGroups)
{
    InnerToolGrid.UpdateLayout();
    if (InnerToolGrid.RenderSize.Width - extentWidth <= ToolGrid.ActualWidth) break;
    foreach (var kvp in grp)
    {
        kvp.Key.ContentVisibility = Visibility.Collapsed;
    }
} 
```

它遍历所有可能被折叠在一起的元素的优先级（无论它们位于网格上的哪个位置），并折叠一个类（组）中的所有元素。然后更新内部网格的布局以反映按钮的变化，并将内部网格的 RenderSize 与外部网格的 ActualWidth 进行比较。如果它更小，则它适合并且不需要折叠更多项目。

所有这些都是从内部网格的 LayoutUpdated 事件中调用的，仍然防止通过锁定变量进行递归。这使我可以对工具栏上任何按钮的大小变化做出反应，例如当文本更新时。

由于 LayoutCompleted 事件似乎是异步触发的，因此 lock 变量必须保持设置直到下一次布局运行完成，并且不能在 LayoutUpdated 处理程序结束时再次重置：

```
private bool collapsingItems;
private void InnerToolGrid_LayoutUpdated(object sender, EventArgs e)
{
    if (collapsingItems) return;
    // Prevent further calls before the layouting is completely finished
    collapsingItems = true;
    Dispatcher.BeginInvoke(
        (Action) (() => { collapsingItems = false; }),
        System.Windows.Threading.DispatcherPriority.Loaded);
    // ...
} 
```

# java - LDAP+ Java：我如何知道我的活动目录的名称

> ID：15075125
> 
> 赞同：0
> 
> 时间：2013-02-25T19:44:08.277
> 
> 标签：java, eclipse, attributes, active-directory

我怎样才能知道我的活动目录的所有属性？

我看到了像“ou = People”这样的例子，但我不知道如何访问我公司特有的名称“People”。我无权访问 LDAP（或者我不知道如何访问），所以我不知道我应该放什么。

```
DirContext ctx = null;

             Hashtable<String, Object> env = new Hashtable<String, Object>();
             env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
             env.put(Context.PROVIDER_URL, "ldap://"+serverAddress+":389");

             env.put(Context.SECURITY_AUTHENTICATION, "simple");
             env.put(Context.SECURITY_PRINCIPAL, DOMAIN+username);
             env.put(Context.SECURITY_CREDENTIALS, password);

            try {
                 ctx = new InitialDirContext(env);
                Attributes matchAttrs = new BasicAttributes(true); // ignore attribute name case

             matchAttrs.put(new BasicAttribute("mail", "XXXXXX@XXXX.com"));
             Attributes attrs = ctx.getAttributes("");

             // Search for objects that have those matching attributes
             NamingEnumeration<SearchResult> answer = ctx.search("ou=Users", matchAttrs);

                 while (answer.hasMore()) {
                      SearchResult sr = (SearchResult)answer.next();
                      System.out.println(">>>" + sr.getName());
                 } 
```

我有错误：`Failed to bind to LDAP [LDAP: error code 1 - 000020D6: SvcErr: DSID-03100754, problem 5012 (DIR_ERROR), data 0 remaining name 'ou=Users'`

我怎么知道公司用哪个名字`ou=....`

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:53:19.240

您可以使用 ldap 浏览器来探索 ldap。（我通常使用softerra Ldap管理员）您需要连接的所有信息都在代码的第一行（地址，端口等......）

# sql - 查询以获取最近 60 分钟内更新的记录

> ID：15075128
> 
> 赞同：1
> 
> 时间：2013-02-25T19:44:12.393
> 
> 标签：sql, oracle, oracle11g

我的示例表看起来像这样..

```
Primary_Key  || Start_Time || End_Time || Value

1 || 24-FEB-13 18:00:00 || 24-FEB-13 19:00:00 || 6 
```

这些列的数据类型是

```
Primary_Key --   Int  
Start_Time  ---  TimeStamp  
End_Time    ---  TimeStamp  
Value       ---  Int 
```

现在，我想在当前时间的 60 分钟内获取表中具有 End_Time 值的所有记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:06:52.590

尝试这个...

```
SELECT * FROM yourTable
WHERE end_time >= CURRENT_TIMESTAMP - NUMToDSInterval(1, 'HOUR') 
```

这应该适用于 DATE 和 TIMESTAMP 以及 TIMESTAMP WITH TIME ZONE 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:51:28.703

这应该有效：

```
select *
from sample s
where CURRENT_TIMESTAMP - end_time <= 1/24.0 and CURRENT_TIMESTAMP >= end_time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:53:16.650

尝试这个

```
select * from yourtable
WHERE (sysdate - End_Time) * 1440 between 0 and 60 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T20:53:21.520

您可以试试这个 - 在 your_start_date 和 your_start_date + INTERVAL '60' MINUTE 之间选择您的数据：

```
SELECT SYSDATE start_dt, (SYSDATE + INTERVAL '60' MINUTE) end_dt 
  FROM dual
/

SELECT * FROM
(
SELECT  to_date('24-FEB-13 18:00:00', 'DD-MON-YYYY HH24:MI:SS') your_start_date
       ,(to_date('24-FEB-13 18:00:00', 'DD-MON-YYYY HH24:MI:SS') + INTERVAL '60' MINUTE) your_end_dt 
 FROM dual
)
/ 
```

# python - 如何搜索具有未知路径的特定文件名？

> ID：15075129
> 
> 赞同：-1
> 
> 时间：2013-02-25T19:44:13.190
> 
> 标签：python, python-3.x

我正在尝试为我的工作创建一个小程序，该程序将在网络和一些指定的驱动器上运行。我是python 3（和python）的新手，所以请多多包涵。如果文件已移动到另一个位置，此程序会链接或找到一个小的唯一编号。谁能给我一个示例（或在哪里可以找到）在指定文件夹范围内搜索文件名然后返回文件位置的代码。如果它不适用于当前目录查找（因为这是我迄今为止看到的所有示例），这将很有帮助。欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:50:51.430

像这样的东西

```
def findfile(fname,base_dir):
    for root, dirs, files in os.walk(base_dir):
        if fname in files:
            return os.path.join(root,fname)

    return None 
```

# awt - JavaMelody 不显示图表

> ID：15075130
> 
> 赞同：1
> 
> 时间：2013-02-25T19:44:14.157
> 
> 标签：awt, tomcat5.5, rhel5

我有四个虚拟服务器，它们都是从原始系统克隆的。我在所有四个上都安装了 javamelody，但在其中两个上，图表没有出现在监控页面中。其他图像显示正常。我在两台无法正常工作的服务器上收到以下错误。

我找到了要添加的建议：-Djava.awt.headless=true 但是两个正常工作的服务器没有这个。有什么建议么？

这是错误的堆栈跟踪：

```
java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11GraphicsEnvironment
      at java.lang.Class.forName0(Native Method)
      at java.lang.Class.forName(Class.java:169)
      at java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvironment.java:68)
      at java.awt.image.BufferedImage.createGraphics(BufferedImage.java:1135)
      at org.jrobin.graph.ImageWorker.resize(Unknown Source)
      at org.jrobin.graph.ImageWorker.<init>(Unknown Source)
      at org.jrobin.graph.RrdGraph.<init>(Unknown Source)
      at net.bull.javamelody.JRobin.graph(JRobin.java:217)
      at net.bull.javamelody.MonitoringController.doGraph(MonitoringController.java:342)
      at net.bull.javamelody.MonitoringController.doReport(MonitoringController.java:168)
      at net.bull.javamelody.MonitoringController.doActionIfNeededAndReport(MonitoringController.java:141)
      at net.bull.javamelody.MonitoringFilter.doMonitoring(MonitoringFilter.java:340)
      at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:170)
      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
      at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
      at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
      at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
      at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
      at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
      at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
      at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
      at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
      at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
      at java.lang.Thread.run(Thread.java:619)` 
```

# grails - 如何在 grails 应用程序中为应用程序的生命周期保存变量

> ID：15075131
> 
> 赞同：0
> 
> 时间：2013-02-25T19:44:18.480
> 
> 标签：grails

在我的一个控制器中，我通过在显示表单之前迭代许多元素（与数据库无关）来创建一个长列表。每次显示此表单时，我都会运行这段代码并执行相同的操作。

是否可以将此列表保存到变量中，这样我就不会每次都遍历元素？如果是这样，我如何在我的控制器中访问它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:20:32.417

具有全局范围并支持像and这样的`servletContext`Map 访问，因此您可以像这样存储它：`session``request`

```
def someList = ...
servletContext.foo = someList 
```

然后检索它：

```
def someList = servletContext.foo 
```

# r - 在 R 中访问包内的数据框

> ID：15075132
> 
> 赞同：0
> 
> 时间：2013-02-25T19:44:18.693
> 
> 标签：r, dataframe

数据帧 CHAIN 在 R 的包“mi”中定义。

我想访问它而无需打开/附加。

是否可以从外部引用它？它的完全限定名称是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:55:18.243

```
data(CHAIN, package = "mi") 
```

将为您加载它，而无需加载“mi”。现在您可以将其称为 CHAIN。

# php - 如何让 AJAX 发送的 JSON 与 PHP 一起工作

> ID：15075134
> 
> 赞同：0
> 
> 时间：2013-02-25T19:44:20.963
> 
> 标签：php, jquery, ajax, json, post

我在寻求让 PHP 可以使用这个 JSON 的过程中遇到了一个又一个的障碍，所以我想知道是否有人可以在这里帮助我。

我将 JSON 存储在变量 partitionsJSON 中：

```
 var divisionsJSON = JSON.stringify(divisions); 
```

然后我尝试使用 .ajax 发布以下内容：

```
$.ajax({
     url: "divisions.php",
     type: "post",
     data: divisionsJSON,
     success: function(){
     alert("success");
       $("#result").html('submitted successfully');
     },
     error:function(){
      alert("failure");
      $("#result").html('there is error while submit');
     }   
     }); 
```

（我从另一个关于 SO 的问题中复制了这个，但在我的 html 中没有任何 id="result" - 我想我可以删除那部分 [已确认删除]）

然后，我的 divisions.php 页面包含以下内容：

```
<?php 
    $url = "divisions.php";
    $json = file_get_contents($url);
    $json = utf8_encode($json);
    $elements = json_decode($json);
    var_dump($elements);
  ?> 
```

我对 PHP/ajax 的缺乏经验加上我对让它工作的挫败感让我尝试了很多不同的事情。到目前为止，当我加载 Divisions.php 时，我要么得到 NULL，要么什么都没有。我的直觉告诉我，这是 ajax 的问题，但我对 PHP 非常缺乏经验，因此我不能自信地说我的 PHP 足够正确，我*应该*得到一些回报。我已经尝试过 var_dump、print_r、echo，但与实际 PHP/JSON 相关的 Divisions.php 上绝对没有出现任何内容。任何和所有的帮助将不胜感激！

更新代码的响应：

我在没有 utf8 行的情况下使用以下 php 得到 NULL，当我在 utf8 行中添加时，我得到了 string(0) "" ：

```
<?php
        $json = json_decode(file_get_contents('php://input'));
        $elements = utf8_encode($json);
        var_dump($elements);
?> 
```

有任何想法吗？

编辑完整的php页面：

```
<!DOCTYPE html>

<html lang="en">

<head>  
    <meta charset="utf-8">
    <title>untitled</title>
    <link rel="stylesheet" href="styles/reset.css" />
</head>

<body>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="underscore.js"></script>
<script type="text/javascript" src="application.js"></script>
<script type="text/javascript" src="divisions.js"></script>
<?php
        print_r($_POST);
?>
</body>
</html> 
```

我已经为 php、print_r($_POST);、json_decode($_POST); 等尝试了多行，但我根据我在其他 SO 和这个页面上看到的内容更改了很多东西我真的发呆了。

编辑：我打算制作一个数组的这段代码不会产生 JSON 吗？因为它看起来不像我正在使用 JSON atm。

```
var divisions = [];
for (var i = 0; i < arr.length; i++) {
    if(arr[i].value != "N/A"){
    var obj = { "login": arr[i].login,
            "value": "http://www.value.net/index/" + arr[i].value};
    divisions.push(obj);} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:48:49.110

首先，在处理 JSON 时，最好的方法是尽可能不处理它。想想如果它是易碎品。你对它做的任何事情都可能破坏它。

考虑到这一点，不要使用 stringify() 实际上你不需要因为 JQuery 会检测到它并为你处理它（因为他们知道它很脆弱）。

二、选项数据：在$ajax()方法中需要给一个对象。通常你会做这样的事情，

```
data: {mydata:divisionsJSON} 
```

这样您就可以通过以下方式访问后端的 JSON

```
$json = json_decode($_POST['mydata']); 
```

或者，根据您设置部门数组的方式，您可以将其作为对象数据发布：正在通过 $_POST['divisions_key'] = Divisions_value 在 PHP 中查找和访问它；但这会导致以后出现各种问题，并且将前端硬链接到后端，这非常糟糕（大多数情况下，例外情况如下）。

此外，如果您期望 JSON 响应，则需要在原始调用中使用 dataType: 'JSON' 选项指定它，以便 JQuery 可以适当地处理它。

```
$.ajax({
 url: "divisions.php",
 type: "post",
 data: {mydata:divisions},
 success: function(response){
   $("#result").html(response.message);
 },
 error:function(response){
  $("#result").html(response.message);
 }   
 }); 
```

但是，在我们走得太远之前，JS 中的除法变量很麻烦。那是从哪里来的？它是一种形式吗？如果是这样，您可以使用 serialize() 这样

```
var divisions = $('#myform').serialize(); 
```

这将创建 key=>value 对，其中键是表单字段的名称，值是（显然）字段的值。您可以像往常一样访问 PHP 中的值。

在考虑前面关于数组结构的问题时，将数据作为对象发布是可接受的情况。如果它是一个表单，那么表单结构无论如何都会链接到后端，因此直接使用 data: 选项中的对象就可以了。这是“别管它”的第一个概念。这里的最后一种情况完全不考虑该对象。从它离开 DOM 到它被处理程序接收到的时间，它 100% 的时间都是一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:50:20.390

正如评论中提到的@slamborne，正确的调用是`json_decode(file_get_contents('php://input'))`.

您的调用实际上是对 Divisions.php 进行了另一次调用，这就是您返回 NULL 的原因（它没有任何数据可以返回给您，因为 divisions.php 没有输出任何内容）。

# c# - 数据表加载很慢

> ID：15075135
> 
> 赞同：3
> 
> 时间：2013-02-25T19:44:24.077
> 
> 标签：c#, asp.net, sql-server-2008

我正在使用数据表作为页面上某些下拉菜单的数据源，但注意到该页面在回发期间非常慢。

我已经追踪到这里：

```
DataTable dt = new DataTable();
dt.Load(sqlCmd.ExecuteReader()); // this takes ages 
```

sql 命令是参数化查询，而不是存储过程（返回值和位置非常“动态”，因此这不切实际），但仍然是一个简单的选择联合查询。通常每个下拉菜单返回 5 到 20 个选项，具体取决于在其他下拉菜单中选择的内容。当我在管理工作室中运行查询时，它会在一秒钟内完成。在这里，每个下拉菜单最多可能需要 7 秒，页面上的 6 个下拉菜单很快就会加起来。我也尝试过使用 SqlDataAdapter：

```
SqlDataAdapter sqlDa = new SqlDataAdapter(sqlCmd);
sqlDa.Fill(dt); // this takes ages 
```

但这同样慢。我在 2 个不同的系统上都有这个，并且两者都有相同的性能问题。

如果有人知道更好（更快）的方法，或者知道为什么速度如此之慢，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:49:02.627

不是我在这个问题上看到的最好的线程，但里面有很好的链接，它在我的帖子历史中：

[在 SSMS 中运行良好的 SQL 查询在 ASP.NET 中运行速度非常慢](https://stackoverflow.com/questions/15010892/sql-query-that-runs-fine-in-ssms-runs-very-slow-in-asp-net/15012264#15012264)

SQL 优化器有时喜欢决定什么是最好的，你必须通过一些跟踪和记录数据执行计划来打破你的查询。它很可能像坏索引一样被埋没，或者您的查询代码可能需要优化。看到我们没有查询代码，并且拥有它可能会或可能不会有帮助。我建议您按照上述帖子中链接的指南并关闭您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:01:39.447

这是一个关于如何快速加载 DataTable 的示例，请注意我如何显示`Columns`我想要返回的具体内容

```
private DataTable GetTableData()
{
  string sql = "SELECT Id, FisrtName, LastName, Desc FROM MySqlTable";
  using (SqlConnection myConnection = new SqlConnection(connectionString))
  {
    using (SqlCommand myCommand = new SqlCommand(sql, myConnection))
    {
      myConnection.Open();
      using (SqlDataReader myReader = myCommand.ExecuteReader())
      {
        DataTable myTable = new DataTable();
        myTable.Load(myReader);
        myConnection.Close();
        return myTable;
      }
    }
  }
} 
```

如果你想用`DataAdapter`这里`Fill the DataTable`是一个简单的例子

```
private void FillAdapter()
{
    using (SqlConnection conn = new SqlConnection(Your ConnectionString))
    {
      conn.Open();
          using (SqlDataAdapter dataAdapt = new SqlDataAdapter("SELECT * FROM EmployeeIDs", conn))
      {
         DataTable dt = new DataTable();
         dataAdapt.Fill(dt);
        // dataGridView1.DataSource = dt;//if you want to display data in DataGridView 
      }
    }
} 
```

# wcf - 以编程方式将 SecurityTokenHandler 添加到 WCF

> ID：15075137
> 
> 赞同：0
> 
> 时间：2013-02-25T19:44:37.747
> 
> 标签：wcf, security, wif

我正在实现自定义 UserNameSecurityTokenHandler ( [http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.usernamesecuritytokenhandler.aspx](http://msdn.microsoft.com/en-us/library/system.identitymodel.tokens.usernamesecuritytokenhandler.aspx) )，我计划将它与我的 WCF 服务一起使用。

我在 web.config 中注册它没有任何问题，它可以完美运行。

但是由于客户端的要求，我应该将处理程序的初始化从 Web.Config 移到代码中。

我一直在寻找一种以某种方式将 UserNameSecurityTokenHandler 实现为 IServiceBehavior 的方法，但是没有取得多大成功。

a) 它完全可行吗？

b) 怎么做？

c) 为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:06:41.760

请参阅此处 [http://leastprivilege.com/2012/07/16/wcf-and-identity-in-net-4-5-usernamepassword-authentication/](http://leastprivilege.com/2012/07/16/wcf-and-identity-in-net-4-5-usernamepassword-authentication/)

我在服务主机创建时添加了令牌处理程序。

# ruby-on-rails - git checkout 代码直到 Michael Hart 的书的第 8 章

> ID：15075142
> 
> 赞同：0
> 
> 时间：2013-02-25T19:44:54.907
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, github, ruby-on-rails-3.1

我一直在尝试从 [http://ruby.railstutorial.org/ruby-on-rails-tutorial-book学习 ruby​​ on rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)

我完成了第 8 章，但在此过程中，我的 rpsec 和控制器出现了一些错误。
我应该定期更新我的 git repo，但我没有。有没有办法在本书的第 8 章之前检查代码？

我想从第 9 章开始继续练习，但我想确保在第 8 章之前我有正确的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:58:02.193

[您可以直接从Github](https://github.com/railstutorial/sample_app)下载本教程的完整存储库。

执行以下步骤：

1.  `mkdir new_dir_name` 创建一个新目录
2.  在这个目录里面： `git clone git@github.com:railstutorial/sample_app.git`

结果：您将在您的目录中找到源代码，然后您可以继续。

# linux - 否则如何在bash中执行sqlplus？

> ID：15075144
> 
> 赞同：0
> 
> 时间：2013-02-25T19:44:56.190
> 
> 标签：linux, oracle, bash, sqlplus

我正在尝试编写一个bash函数，如果用户输入1，它应该从table1中删除一些条目，否则删除不同的条目。我的功能如下所示：

```
function reset_db
{
        if [ $usr_input == 1 ]  
        then
        sqlplus -s $USR/$pwd@$SID << EOF

        delete from table1 where component = 'ABC';
        delete from table2 where component = 'ABC';
        exit
EOF
        else if [ $usr_input == 2 ]

        delete from table1 where component = 'XYZ';
        delete from table2 where component = 'XYZ';
        exit
EOF
fi
} 
```

我收到错误：*意外标记“fi”附近的语法错误*

我确信它正在发生，因为我在某处错误地使用了 if-else 但无法找到解决它的方法。

如果我还有更多后续问题，请告诉我如何在同一线程下发布代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:48:01.287

你的“else if”是错误的，正确的语法是“elif”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:58:58.037

您需要在`if`语句的每个子句中重复该命令：

```
function reset_db
{
        if [ $usr_input == 1 ]  
        then
        sqlplus -s $USR/$pwd@$SID << EOF

        delete from table1 where component = 'ABC';
        delete from table2 where component = 'ABC';
        exit
EOF
        elif [ $usr_input == 2 ]; then

        sqlplus -s $USR/$pwd@$SID << EOF
        delete from table1 where component = 'XYZ';
        delete from table2 where component = 'XYZ';
        exit
EOF
fi
} 
```

作为简化，你应该重构这个：

```
reset_db () {
    if [[ $usr_input = 1 ]]; then
      to_delete='ABC'
    elif [[ $usr_input = 2 ]]; then
      to_delete='XYZ'
    else
      return
    fi
    sqlplus -s "$USR/$pwd@$SID" <<EOF
    delete from table1 where component = '$to_delete'
    delete from table2 where component = '$to_delete'  
    exit
EOF
    fi
} 
```

# php - Time() 和 MYSQL 数据库数据空白

> ID：15075145
> 
> 赞同：0
> 
> 时间：2013-02-25T19:45:04.230
> 
> 标签：php, mysql, database, time

我无法在我的数据库中以秒的格式插入当前时间。我不能做`NOW()`或其他选择，因为我需要**seconds**。任何帮助都会很棒。

我使用秒是因为我希望比较从他们提交此代码到他们下次访问页面的秒数。

PHP代码片段：

```
$time=time();
$query = mysql_query("INSERT INTO logs (var1,var2,var3,var4,date) VALUES ('$var1','$var2','$var3','$var4', '$time')"); 
```

这是我从 MYSQL 数据库中的代码中得到的：

> 0000-00-00 00:00:00

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:10:50.113

确保我们数据库中的列是 INT 类型，而不是 DATE 或 TIMESTAMP。

time() 返回自纪元以来的秒数，而 Now() 返回 Date 对象

# mysql - 选择早于 x 天的日期计数

> ID：15075146
> 
> 赞同：1
> 
> 时间：2013-02-25T19:45:04.003
> 
> 标签：mysql, sql, select, group-by, having

我的示例表：

```
+----------+---------------------+
| username |        time         |
+----------+---------------------+
| john     | 2013-02-04 17:39:43 |
| john     | 2013-02-03 00:21:31 |
| peter    | 2013-02-02 15:04:53 |
| grace    | 2013-02-02 03:57:43 |
| peter    | 2013-02-03 15:36:15 |
+----------+---------------------+ 
```

此表记录来自用户的活动。我需要统计上次活动日期超过 30 天的用户数量。

我开发了这个查询：

```
SELECT
  username,
  MAX(time),
  DATEDIFF(NOW(), MAX(time)) as diff
FROM tracking
GROUP BY username
HAVING diff > 30 
```

它有效地返回了活动超过 30 天的用户列表，以及最后一次活动的日期。

但我需要这个列表的**计数**，而不是列表本身。有什么办法可以计算列表吗？

**笔记：**

*   我只能依靠**SQL**语句，我不能使用**PHP**或**ASP**或其他任何东西。
*   我不能使用**STORED PROCEDURES**。
*   我不需要性能，因为这个语句只会偶尔运行一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:49:38.567

这是一个比较简单的方法：

```
SELECT count(distinct username) - 
       count(distinct case when DATEDIFF(NOW(), time) <= 30 then username end) as numusers
FROM tracking 
```

这需要用户总数并减去过去 30 天内有活动的用户数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:48:32.140

就这样？

```
Select count(*) as Num FROM
  (
 SELECT
   username,
    MAX(time),
     DATEDIFF(NOW(), MAX(time)) as diff
     FROM tracking
 GROUP BY username
 HAVING diff > 30
 ) 
```

# algorithm - 是否可以在指定日期之前加密数据？

> ID：15075151
> 
> 赞同：4
> 
> 时间：2013-02-25T19:45:34.467
> 
> 标签：algorithm, encryption, cryptography

我想知道是否有一种方法可以使用某种算法加密某些数据，这样在指定日期之前没有人可以解密该数据，例如`2014/05/16`。

当我自己考虑时，我想出了“否”的答案，但我认为可能有一种我没有考虑过的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:47:51.173

根本问题在于算法如何确定当前日期的确切时间。

任何软件都必须在提供当前日期的硬件上运行，并且更改该日期通常是微不足道的。即使是基于网络的时间协议也不是特别难以欺骗。

我看到的唯一解决方案是在该日期释放密钥。密钥发布必须是手动的或使用具有可信时间源的可信自动化过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T22:28:47.670

如果存在这样的算法，那么对我们宇宙运行方式的影响会让物理学家感到困惑。这意味着宇宙有一个中央时钟，可以通过执行如下所述的一些计算从任何地方获得：

您可以加密一百万条消息，从明天（作为发布日期）开始的每一天（作为发布日期），并获得这样一个时钟，纯粹基于数据的时钟。想知道今天是几号吗？只需解密来自第一个消息的消息，直到您卡住为止。最后可解密的消息确定当前日期。

我认为这样的中央时钟的存在会证伪相对论（但我不确定。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-24T19:42:34.730

Obviously it can't be done as an algorithm. But there are some services like [http://www.tellyoulater.com/](http://www.tellyoulater.com/) that publish private keys in predetermined moments of time.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T20:34:51.057

使用传统加密并在目标日期发布密钥。

# java - 字符串辅助方法

> ID：15075153
> 
> 赞同：0
> 
> 时间：2013-02-25T19:45:41.867
> 
> 标签：java

我需要一些关于如何放入辅助方法的帮助。这是我写的辅助方法。

```
public static String helper(String help) {
    help = help.toLowerCase();
    help = help.replaceAll("\\s+", "");
} 
```

这就是我在主要方法中使用它的方式。

```
String help = RecursivePalindrome.helper(x); 
```

如果我保持这样，那么在辅助方法上，他们会要求我提供返回值，但是如果我放了，`return help;`那么该方法将无法正确执行。如果我将辅助方法更改为 void，那么我不能将字符串帮助放在我的主要方法上。

这是我运行程序时发生的情况：

```
Enter a word to test whether it is a palindrome or not(press quit to end.): RaceCar
'RaceCar' is not a palindrome. 
```

看到我把助手类忽略了大写，但它不会。RaceCar 将是一个回文，但大写使程序说它不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:15:02.900

我认为你需要这个：

```
public static String helper(String help) {
    help = help.toLowerCase();
    help = help.replaceAll("\\s+", "");
    help = help.replaceAll("\\p{Punct}", "");
    return help;
} 
```

调用`helper`将返回 a`String`所有字符都小写并删除所有出现的空格或标点字符。

示例：`helper("Race Car#")`将返回`"racecar"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T20:26:41.147

您的方法应该返回字符串。Java中的String也是不可变的，对字符串的任何修改都会返回新的字符串。尝试这个：

```
public static String helper(String help) {
    return help.toLowerCase().replaceAll("\\s+", "");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T21:07:16.820

这是我创建的一个快速回文计算器，适用于 RaceCar .....使用 ako 的辅助方法。

```
public class Main {

    public static void main(String [] args){
         System.out.println(palindrom(helper("RaceCar")));
    }

    public static String helper(String help){
         return help.toLowerCase().replaceAll("\\s+", "");
    }

    public static boolean palindrom(String pal)
    {
        int end = pal.length()-1;
        for(int i = 0; i<=pal.length()/2;i++)
        {
            if(pal.charAt(i)== pal.charAt(end-i));
            else 
            {
                return false;
            } 
        }
        return true;

    }
} 
```

# apache-flex - 如何将 Flex 库中的 mxml 组件包含到不同的 Flex 项目中？

> ID：15075154
> 
> 赞同：1
> 
> 时间：2013-02-25T19:45:46.840
> 
> 标签：apache-flex, mxml

我创建了一个 Flex 库项目，其中包含一个带有一个组件（一个按钮）的 .MXML 文件。它在 myLibrary.views 包中称为 Button.mxml。

然后我创建了一个不同的 Flex Mobile 项目，我想在其中包含我的库项目中的按钮。这个项目引用了之前创建的库。

我找不到如何实现这一目标的答案。

我可以像 mxml 组件一样添加它吗？

```
 <?xml version="1.0" encoding="utf-8"?>
  <         s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 

           applicationDPI="240">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<fx:Script>
    <![CDATA[
        import myPackage.views.Button; // this is the package containing Button.mxml

    ]]>
</fx:Script>
 <myPackage.Views.Button id="myButton" /> // is this possbile somehow ???

     </s:Application> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:56:48.907

首先确保将另一个项目添加到您的库路径中。您可以通过将生成的 SWC 添加到 libs 文件夹或将其添加到库路径来执行此操作。如果两个项目都在同一个 Flash Builder 工作区中，您可以使用库选项卡上的“添加项目”按钮。

接下来，要在 MXML 中使用新的 Button 文件，您必须在顶级 MXML 标记中导入命名空间；像这样的东西：

```
 <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:myPackage="myPackage.views.*"
               applicationDPI="240"> 
```

语法与 Flex 为自己的包所做的非常相似。除非您可能还没有完成创建命名空间 URL 的过程，所以您使用包名称。在大多数情况下，不创建命名空间 URL 是可以的，这比它的价值更令人头疼。

然后你可以像这样使用你的自定义按钮：

```
<myPackage:Button id="myButton" /> 
```

这遵循与其他 Flex 组件相同的语法；这是`namespace:ComponentName`。

您不能基于 ActionScript 中的导入语句在 MXML 中使用组件；但你有正确的想法。

# r - 在散点图中绘制 95% 置信限

> ID：15075157
> 
> 赞同：7
> 
> 时间：2013-02-25T19:46:07.093
> 
> 标签：r, ggplot2, scatter-plot, confidence-interval

我需要绘制几个定义为的数据点

> c（x，y，stdev_x，stdev_y）

作为散点图，表示其 95% 置信限，例如显示该点及其周围的一个轮廓。理想情况下，我想在该点周围绘制椭圆形，但不知道该怎么做。我正在考虑构建样本并绘制它们，添加 stat_density2d() 但需要将轮廓数限制为 1，并且无法弄清楚如何做到这一点。

```
require(ggplot2)
n=10000
d <- data.frame(id=rep("A", n),
                se=rnorm(n, 0.18,0.02), 
                sp=rnorm(n, 0.79,0.06) )
g <- ggplot (d, aes(se,sp)) +
  scale_x_continuous(limits=c(0,1))+
  scale_y_continuous(limits=c(0,1)) +
  theme(aspect.ratio=0.6)
g + geom_point(alpha=I(1/50)) +
  stat_density2d() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T20:33:19.340

首先，将所有绘图保存为对象（更改限制）。

```
g <- ggplot (d, aes(se,sp, group=id)) +
  scale_x_continuous(limits=c(0,0.5))+
  scale_y_continuous(limits=c(0.5,1)) +
  theme(aspect.ratio=0.6) + 
  geom_point(alpha=I(1/50)) +
  stat_density2d() 
```

使用功能`ggplot_build()`保存用于绘图的所有信息。轮廓存储在 object 中`data[[2]]`。

```
gg<-ggplot_build(g)
str(gg$data)
head(gg$data[[2]])
  level         x         y piece group PANEL
1    10 0.1363636 0.7390318     1   1-1     1
2    10 0.1355521 0.7424242     1   1-1     1
3    10 0.1347814 0.7474747     1   1-1     1
4    10 0.1343692 0.7525253     1   1-1     1
5    10 0.1340186 0.7575758     1   1-1     1
6    10 0.1336037 0.7626263     1   1-1     1 
```

总共有 12 条等高线，但要只保留外线，您应该只设置子集`group=="1-1"`并替换原始信息。

```
gg$data[[2]]<-subset(gg$data[[2]],group=="1-1") 
```

然后使用`ggplot_gtable()`and`grid.draw()`得到你的情节。

```
p1<-ggplot_gtable(gg)
grid.draw(p1) 
```

![在此处输入图像描述](../Images/ce4a597ea0b0872586117b6bd61f6937.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T21:33:50.803

`latticeExtra`提供`panel.ellipse`是一个格子面板函数，它从可能由第三个变量分组的双变量数据中计算和绘制置信椭球。

在这里，我根据您的数据绘制了 0.65 和 0.95 的水平。

```
library(latticeExtra)
xyplot(sp~se,data=d,groups=id,
       par.settings = list(plot.symbol = list(cex = 1.1, pch=16)),
       panel = function(x,y,...){
         panel.xyplot(x, y,alpha=0.2)
         panel.ellipse(x, y, lwd = 2, col="green", robust=FALSE,  level=0.65,...)
         panel.ellipse(x, y, lwd = 2, col="red", robust=TRUE,  level=0.95,...)

       }) 
```

![在此处输入图像描述](../Images/245a75990d4389c097184ea19822af01.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-26T09:48:18.823

看起来`stat_ellipse`您找到的功能确实是一个很好的解决方案，但这是另一个（非 ggplot），仅用于记录，`dataEllipse`从`car`包中使用。

```
# some sample data
n=10000
g=4
d <- data.frame(ID = unlist(lapply(letters[1:g], function(x) rep(x, n/g))))
d$x <- unlist(lapply(1:g, function(i) rnorm(n/g, runif(1)*i^2))) 
d$y <- unlist(lapply(1:g, function(i) rnorm(n/g, runif(1)*i^2))) 

# plot points with 95% normal-probability contour
# default settings...
library(car)
with(d, dataEllipse(x, y, ID, level=0.95, fill=TRUE, fill.alpha=0.1)) 
```

![在此处输入图像描述](../Images/86840e850df8b84b5b0f8b68b7ebab65.png)

```
# with a little more effort...
# random colours with alpha-blending
d$col <- unlist(lapply(1:g, function (x) rep(rgb(runif(1), runif(1), runif(1), runif(1)),n/g)))
# plot points first
with(d, plot(x,y, col=col, pch="."))
# then ellipses over the top
with(d, dataEllipse(x, y, ID, level=0.95, fill=TRUE, fill.alpha=0.1, plot.points=FALSE, add=TRUE,  col=unique(col), ellipse.label=FALSE, center.pch="+")) 
```

![在此处输入图像描述](../Images/a621673da2e383d3c0d07777bb10e4e3.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-26T00:34:52.543

刚刚在`stat_ellipse()` [这里](https://github.com/JoFrhwld/FAAV/blob/master/r/stat-ellipse.R)（和[这里](https://stackoverflow.com/questions/2397097)）找到了这个功能，它可以很好地处理这个问题。

```
g + geom_point(alpha=I(1/10))  +
  stat_ellipse(aes(group=id), color="black") 
```

不同的数据集，当然：![](../Images/9a135e6493befe367a9bdf4c496baff7.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-25T20:23:19.393

我对 ggplot2 库一无所知，但您可以使用 plotrix 绘制椭圆。这个情节看起来像你要求的吗？

```
library(plotrix)
n=10
d <- data.frame(x=runif(n,0,2),y=runif(n,0,2),seX=runif(n,0,0.1),seY=runif(n,0,0.1))
plot(d$x,d$y,pch=16,ylim=c(0,2),xlim=c(0,2))
draw.ellipse(d$x,d$y,d$seX,d$seY) 
```

# entity-framework - 为什么 DateTime 需要是实体框架中的 byte[]？以及如何设置它？

> ID：15075160
> 
> 赞同：1
> 
> 时间：2013-02-25T19:46:15.127
> 
> 标签：entity-framework, datetime, dbcontext

我有一个带有 DateTime（在数据库中）的 DBContext，它在 EF 中被定义为一个字节 []。那么如何发送代表当前日期的字节[]？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:17:46.163

时间不应作为字节数组数据类型出现。如果您使用的是 SQL Server，则可能您将数据类型声明为时间戳而不是日期时间，因为它在代码中显示为字节数组。在 SQL Server 的较新版本中，时间戳类型已重命名为 rowversion，以便更加清晰，因为它不包含任何类型的时间数据。

# function - VBA 函数或过程允许的最长名称是什么

> ID：15075164
> 
> 赞同：3
> 
> 时间：2013-02-25T19:46:27.793
> 
> 标签：function, vba, max

为函数分配名称时可以使用的最大字符数是多少（换句话说，VBA 函数允许的最长名称）？

仅供参考，模块允许的最长名称是 31（Excel 2003 中的 Microsoft Visual Basic 6.5）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T19:52:40.110

我刚刚测试了它 - 它有 255 个字符......

# ios - 故事板 + 基本本地化 + .strings 文件在运行时不本地化

> ID：15075165
> 
> 赞同：15
> 
> 时间：2013-02-25T19:46:30.457
> 
> 标签：ios, ios6, localization, storyboard

（有类似的问题。有些导致我尝试过但发现不起作用的答案。我认为其他人没有答案，因为询问者没有提供我即将提供的详细信息。）

我从一个适用于我的应用程序的故事板开始；它包含的字符串是英文的。我想添加法语本地化。我这样做了：

*   添加了一个基础本地化， `MainStoryboard.storyboard`从转移`en.lproj`到`Base.lproj`.
*   添加了法语本地化，将`InfoPlist.strings`(English) 和`MainStoryboard.storyboard`(Base) 克隆到`fr.lproj`.
*   `UISegmentedControl`更改了法语中的几个字符串（a 中段的标题 ） `MainStoryboard.storyboard`。
*   在模拟器中，将语言设置为法语。
*   从 Xcode 运行应用程序。

**结果**：这行得通；我更改的字符串出现在正在运行的应用程序中。

但我想变得花哨。我想使用`.strings`文件进行法语本地化。（这不仅仅是花哨的问题；法语本地化将交给非技术翻译人员，他们不能指望掌握 Interface Builder。）所以：

*   `MainStoryboard.storyboard`在 Xcode 项目导航器中选择基础。
*   在文件检查器的本地化下，将法语本地化从“Interface Builder Cocoa Touch Storyboard”更改为“Localizable Strings”。
*   接受 Xcode 的警告，即法语情节提要将被丢弃以支持`.strings`出现在助手编辑器中的文件。
*   进行了相同的两次编辑；毫无疑问它们是错误的字符串，因为它们都被评论为 `IBUISegmentedControl...segmentTitles`; 并且标签文本不会出现在`.strings`文件的其他任何地方。
*   从模拟器中删除了应用程序的现有（工作）副本。
*   运行应用程序。

**结果**：视图使用基本（最初是英语）本地化，而不是加载法语字符串。

这并不令人满意。我试过从模拟器中删除应用程序，甚至删除派生数据文件夹。该错误仍然存​​在。

正如我所说，我不能将`.storyboard`文件交给非技术翻译。如何让 iOS 接受来自`.strings`文件的情节提要本地化？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-25T06:52:21.153

这是我解决它的方法：

在 viewDidLoad 中：

```
[self.segmentedControl setTitle:NSLocalizedString(@"Title", @"Your localize comment") forSegmentAtIndex:0]; 
```

您可以对搜索占位符执行相同操作：

```
[self.searchBar setPlaceholder:NSLocalizedString(@"Your string placeholder", @"Your comment for localizers")]; 
```

然后只需创建一个 Localizable.strings 文件就可以了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T15:36:30.177

我的`UISegmentedControl`s也有同样的问题。事实证明，iOS 6 中存在一个错误：.strings 故事板本地化不适用于`UISegmentedControl`文本和`UISearchBar`占位符。看到这个开放雷达：http://openradar.appspot.com/radar?id= [2159402](http://openradar.appspot.com/radar?id=2159402)

您是否尝试过本地化其他元素，例如`UILabel`s？那应该行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-01T19:24:25.143

对于为**iOS 7 或更高版本**开发并搜索`.strings`搜索栏格式的人，您应该这样翻译该`placeholder`字段，例如：

```
/* Class = "UISearchBar"; normalTitle = "Search for Places"; ObjectID = "F3d-Ir-fni"; */
"F3d-Ir-fni.placeholder" = "Nach Orten suchen"; 
```

# c# - 用c#和Dictionary出现文件中的元素

> ID：15075167
> 
> 赞同：-3
> 
> 时间：2013-02-25T19:46:56.170
> 
> 标签：c#

我有一个文件

```
outlook temperature Humidity  Windy  PlayTennis
sunny      hot        high     false   N
sunny      hot        high     true    N
overcast   hot        high     false   P
rain       mild       high     false   P
rain       cool       normal   false   P
rain       cool       normal   true    N 
```

我想找到每个元素的出现，例如晴天：2 雨：3 阴天：1 热：3 等等

我的代码是：

```
 string file = openFileDialog1.FileName;
    var text1 = File.ReadAllLines(file);
    StringBuilder str = new StringBuilder();

    string[] lines = File.ReadAllLines(file);

    string[] nonempty=lines.Where(s => s.Trim(' ')!="")
              .Select(s => Regex.Replace(s, @"\s+", " ")).ToArray();       

    string[] colheader = null;       

    if (nonempty.Length > 0)
        colheader = nonempty[0].Split();
    else
        return;

    var linevalue = nonempty.Skip(1).Select(l => l.Split());
    int colcount = colheader.Length;

    Dictionary<string, string> colvalue = new Dictionary<string, string>();
    for (int i = 0; i < colcount; i++)
    {
        int k = 0;
        foreach (string[] values in linevalue)
        {               
            if(! colvalue.ContainsKey(values[i]))
            {
                colvalue.Add(values[i],colheader[i]);                    
            }

         label2.Text = label2.Text + k.ToString();
        }           
    }

    foreach (KeyValuePair<string, string> pair in colvalue)
    {
        label1.Text += pair.Key+ "\n";
    } 
```

我得到的输出是晴 阴雨 热 温和 凉爽 N P 真 假

我也想找到我无法得到的发生。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:01:45.840

此 LINQ 查询将返回`Dictionary<string, int>`其中包含文件中的每个单词作为键，单词的出现作为值：

```
var occurences = File.ReadAllLines(file).Skip(1) // skip titles line
    .SelectMany(l => l.Split(new []{' '}, StringSplitOptions.RemoveEmptyEntries))
    .GroupBy(w => w)
    .ToDictionary(g => g.Key, g => g.Count()); 
```

字典的用法：

```
int sunnyOccurences = occurences["sunny"];

foreach(var pair in occurences)
    label1.Text += String.Format("{0}: {1}\n", pair.Key, pair.Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:01:48.623

如果您想要的只是关键字和它们在文件中出现的次数，那么lazyberezovsky 的解决方案与您所找到的解决方案一样优雅。但是，如果您需要对文件数据执行任何其他指标，那么我会将文件加载到一个集合中，以保持您的其他元数据完好无损。

像这样简单的东西：

```
var forecasts = File.ReadAllLines(file).Skip(1) // skip the header row
    .Select(line => line.Split(new []{' '}, StringSplitOptions.RemoveEmptyEntries)) // split the line into an array of strings
    .Select (f =>
    new
    {
        Outlook = f[0],
        Temperature = f[1],
        Humidity = f[2],
        Windy = f[3],
        PlayTennis = f[4]
    }); 
```

会给你一个`IEnumerable<>`具有可查询属性的匿名类型。

例如，如果您想查看 Outlook 中出现了多少次“晴天”，那么您可以使用 LINQ 来执行此操作：

```
var count = forecasts.Count( f => f.Outlook == "sunny"); 
```

或者，如果您只想要所有前景的列表，您可以编写：

```
var outlooks = forecasts.Select(f => f.Outlook).Distinct(); 
```

当您想要执行更复杂的查询时，这很有用，例如“有多少阴雨凉爽的日子？

```
var count = forecasts.Count (f => f.Outlook == "rain" && f.Temperature == "cool"); 
```

同样，如果您只想要所有单词及其出现次数，那么这是矫枉过正的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:10:51.760

在我看来，您正在实施一个简单的标签云。我使用了非泛型集合，但您可以将其替换为泛型。替换为`HashTable`遵循`Dictionary` 此代码：

```
 Hashtable tagCloud = new Hashtable();
            ArrayList frequency = new ArrayList(); 
```

从文件中读取并将其存储为数组

```
 string[] lines = File.ReadAllLines("file.txt");
            //use the specific delimiter
            char[] delimiter = new char[] { ' ' };
            StringBuilder buffer = new StringBuilder();
            foreach (string line in lines)
            {
                if (line.ToString().Length != 0)
                {
                    buffer.Append((" " + line.Trim()));
                }
            }
            string[] words = buffer.ToString().Trim().Split(delimiter); 
```

存储每个单词的出现。

```
 List<string> listOfWords = new List<string>(words);
            foreach (string i in listOfWords)
            {
                int c = 0;
                foreach (string j in words)
                {
                    if (i.Equals(j))
                        c++;
                }
                frequency.Add(c);
            } 
```

存储为键值对。值将是单词，键将是它的出现

```
 for (int i = 0; i < listOfWords.Count; i++)
            {
                //use dictionary here
                tagCloud.Add(listOfWords[i], (int)frequency[i]);
            } 
```

# c# - 在 asp.net 中以编程方式创建 Listview

> ID：15075168
> 
> 赞同：0
> 
> 时间：2013-02-25T19:47:02.813
> 
> 标签：c#, asp.net, listview

我是 ASP.net 的新手，我想以编程方式创建一个动态 Listview 组件。我找到了有关如何为 Gridview 和 Datatable 而不是 Listview 执行此操作的示例。可能吗？有谁知道好的教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:30:38.863

尝试这个

```
private void CreateMyListView()
 {
  // Create a new ListView control.
  ListView listView1 = new ListView();
  listView1.Bounds = new Rectangle(new Point(10,10), new Size(300,200));
  // Set the view to show details.
  listView1.View = View.Details;
  // Allow the user to edit item text.
  listView1.LabelEdit = true;
  // Allow the user to rearrange columns.
  listView1.AllowColumnReorder = true;
  // Display check boxes.
  listView1.CheckBoxes = true;
  // Select the item and subitems when selection is made.
  listView1.FullRowSelect = true;
  // Display grid lines.
  listView1.GridLines = true;
  // Sort the items in the list in ascending order.
  listView1.Sorting = SortOrder.Ascending;

  //Creat columns:
  ColumnHeader column1 = new ColumnHeader();
  column1.Text = "Customer ID";
  column1.Width = 159;
  column1.TextAlign = HorizontalAlignment.Left;

  ColumnHeader column2 = new ColumnHeader();
  column2.Text = "Customer name";
  column2.Width = 202;
  column2.TextAlign = HorizontalAlignment.Left;

  //Add columns to the ListView:
  listView1.Columns.Add(column1);
  listView1.Columns.Add(column2); 

  // Add the ListView to the control collection.
  this.Controls.Add(listView1);
 } 
```

或者看看那个[例子](http://www.dotnetspider.com/resources/23287-Programmatically-Create-List-View.aspx)

```
 Imports System
 Imports System.Drawing
 Imports System.Windows.Forms

Public Class listview
Inherits Form

Friend WithEvents btnCreate As Button

Public Sub New()
    Me.InitializeComponent()
End Sub

Private Sub InitializeComponent()
    btnCreate = New Button
    btnCreate.Text = "Create"
    btnCreate.Location = New Point(10, 10)

    Me.Controls.Add(btnCreate)
    Text = "Countries Statistics"
    Size = New Size(450, 245)
    StartPosition = FormStartPosition.CenterScreen
End Sub

Private Sub btnCreate_Click(ByVal sender As System.Object, _
                        ByVal e As System.EventArgs) Handles btnCreate.Click

    Dim lvwCountries As ListView = New ListView
    lvwCountries.Location = New Point(10, 40)
    lvwCountries.Width = 420
    lvwCountries.Height = 160

    Controls.Add(lvwCountries)

End Sub

Public Shared Sub Main()
    Application.Run(New Exercise)
End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:36:13.693

*如何处理此任务的基本思想。`GridView`关键概念与需要的相同。*

1）您需要在页面上的某个地方放置`ListView`- 一个**容器**。

2）这个容器需要**在服务器上运行**，所以你的 C# 代码（服务器评估）可以添加`ListView`到它。您可以使用的两个示例容器：一个和一个带有属性`Panel`的标准`div`标签。`runat=server`

3) 选择**何时****调用**创建 ListView 的代码以及**如何**调用。我建议您将其定义为一种**方法**，并从您想要的任何**事件中调用它，例如：**

```
protected void Page_Load(object sender, EventArgs e)
{
    // Call your method here so the ListView is created
    CreateListView();
}

private void CreateListView()
{
    // Code to create ListView here
} 
```

4）在上述方法中使用以下代码创建`ListView`并将其添加到容器中，如下所示：

```
var myListView = new ListView();
containerName.Controls.Add(myListView); 
```

除了明显的数据绑定之外，您还需要添加`ListView`的**属性**以使其美观。

[此页面](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/a9295967-7233-44ed-8091-f754909a7a8a/)上的代码包含一些您很可能想要使用的示例属性。

# excel - Excel INSTR 在单元格中查找硬返回

> ID：15075169
> 
> 赞同：6
> 
> 时间：2013-02-25T19:47:04.703
> 
> 标签：excel, vba

我有一个电子表格，其中项目描述是可变长度，但总是以“硬返回”结束以强制在单元格中换行。我需要将单元格的第一行复制到另一个单元格中。

我可以使用 INSTR 查找硬返回（不可见字符）的第一个实例，然后复制前 N-1 个字符吗？

例如：

```
Dell PowerEdge R720XD
Chassis (Max of ...... 
```

或者

```
Dell OptiPlex 7010 Minitower   
Intel Core............. 
```

在所有情况下，无论长度如何，我都需要复制单元格中文本的第一行。

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T19:50:47.500

是的，您可以轻松做到这一点

```
strShort = Left(strLong, InStr(strLong, vbCrLf) - 1) 
```

有时（eep。当来自 Unix 系统时），您可能必须将`vbCrLf`(carriage Return, LineFeed) 替换为`vbLf`only。

如果您不确定它是否包含 Enter，则此代码将执行

```
strShort = IIf(InStr(strLong, vbCrLf), Left(strLong, InStr(strLong, vbCrLf) - 2), strLong) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:53:10.003

根据换行符的类型，您可以这样做：

```
InStr(Range("A1").Text, vbLf)
InStr(Range("A1").Text, vbCr)
InStr(Range("A1").Text, vbCrLf) 
```

获取换行符之前的文本：

```
Left(Range("A1").Text, InStr(Range("A1").Text, vbLf) - 1) 
```

在换行符后获取文本：

```
Right(Range("A1").Text, InStr(Range("A1").Text, vbLf)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-08T15:27:40.033

我无法在下面的 Ripster 代码中添加评论。我需要50的声望；我的只有 36 岁，但这确实是该评论应该去的地方，而不是单独的答案。

在我看来，Ripster 的最后一段代码，

```
Right(Range("A1").Text, InStr(Range("A1").Text, vbLf)) 
```

应该，

```
Right(Range("A1").Text, (Len(Range("A1")-InStr(Range("A1").Text, vbLf)) - 1) 
```

最后在没有中断的情况下重新生成字符串

```
strString = Left(Range("A1").Text, InStr(Range("A1").Text, vbLf) - 1) & Right(Range("A1").Text, (Len(Range("A1")-InStr(Range("A1").Text, vbLf)) - 1) 
```

给版主的说明：请查看此内容。我仍然认为 mysefl 是 VBA 的初学者，我的逻辑可能是错误的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-01-23T15:22:24.973

我的解决方案是：

strString = 替换(strString, vbLf, "")

即使字符串包含多个线制动器，它也很有用。

# struts2 - 定义一个消息键 ?

> ID：15075171
> 
> 赞同：1
> 
> 时间：2013-02-25T19:47:24.390
> 
> 标签：struts2

我试图找到一种方法在 struts.xml 中为 Action 类可以抛出的每种异常类型配置错误消息。在动作类中，我可以通过捕获异常、调用`addActionError(String)`并重新抛出异常（假设`<exception-mapping>`存在）来完成类似的操作。有没有办法通过配置来做到这一点？

作为参考，这个功能存在于 Struts1 中，`key`具有异常处理程序的属性——我希望能够做类似的事情。

```
<exception key="some.key"
           type="java.io.IOException"
           handler="com.yourcorp.ExceptionHandler"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T03:36:43.640

在 Struts2 中，您可以使用以下映射将键/消息传递给结果（结果可以是 jsp 或其他操作类）。

```
<global-exception-mappings>
 <exception-mapping exception="com.test.exception.MyCustomException"  result="error">
    <param name="param">display.custom.error</param>
 </exception-mapping>
</global-exception-mappings>

<global-results>
    <result name="error" type="chain">handleAction</result>
</global-results>

<action name="handleAction" class="HandleExceptionAction">          
     <result name="result">/WEB-INF/jsp/error.jsp</result>
</action> 
```

如果它是动作类，则在链接的情况下（如果用户想要处理异常），那么您需要在动作类中具有相应的属性，其中包含 getter 和 setter。

```
public class HandleExceptionAction extends ActionSupport implements 
               ServletRequestAware, SessionAware {

private **String param**; 

private HttpServletRequest httpRequest;
private static final Log LOG = LogFactory.getLog(InputAction.class); 

public String execute(){

    LOG.debug("inside excute().....");
    LOG.debug("Parameter passed:" + param);
    System.out.println("Parameter passed:" + param);

    return "result";
} 
```

我正在使用弹簧注射，希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:57:14.197

在 strut2 中，您还可以定义异常映射。请参阅[http://struts.apache.org/release/2.1.x/docs/exception-configuration.html](http://struts.apache.org/release/2.1.x/docs/exception-configuration.html)。您可以有一个常见的 error.jsp，它显示一条根据异常的类名查找的消息。

# ios - GPUImageMovieWriter - 因“状态为 2 时无法调用方法”而崩溃

> ID：15075172
> 
> 赞同：5
> 
> 时间：2013-02-25T19:47:25.003
> 
> 标签：ios, avassetwriter, gpuimage

尝试开始使用 Brad Larson 慷慨分享的非常棒的 GPUImage 框架，但遇到了问题。

运行 SimpleVideoFileFilter 示例时，它总是在完成时崩溃并出现以下错误：

[AVAssetWriterInput markAsFinished] 状态为 2 时无法调用方法

有谁知道如何纠正这个？

在模拟器中运行时也看不到视频，它不适用于模拟器吗？

运行 iOS 6.1 和 Xcode 4.6

谢谢！

我注意到 finishRecordingWithCompletionHandler 被调用了两次，它在第二次调用时崩溃

# javascript - 如何访问存储在资产下的javascript中的rails数组

> ID：15075175
> 
> 赞同：0
> 
> 时间：2013-02-25T19:47:32.567
> 
> 标签：javascript, ruby-on-rails, arrays, json, controller

我在 Rails 控制器中定义了一个数组：

```
str_array = ["Hi","hello"] 
```

我需要在存储在 assets 下的 javascript 文件中访问这个数组。我在我的 js 中定义了一个可变类型的数组数组。我尝试像这样访问但失败了：

```
var js_arr = [<%= raw @str_array.to_json %>]; 
```

有没有其他方法可以访问我的 javascript 中的 rails 数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:50:50.937

您是否为该 JavaScript 文件添加了 .erb 扩展名？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:51:00.000

有两种方法。

1) 必要时通过 ajax 将其传递给 javascript。（例如，在按钮单击等上）。

2) 将内联 javascript 放入要访问的视图模板（erb、haml 或 w/e）之一，然后在方法调用中使用 #{rails_array}.to_json 传递 rails 数组。

第一个更干净，更可测试，并且从长远来看更易于维护。第二个更容易实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:53:24.957

将东西从 RoR 传递到 JS 的一种非常干净的方法是[gon gem](https://github.com/gazay/gon)。

没有带有 erb 或类似东西的讨厌的打印变量。

您会得到一个名为的对象`gon`，您可以将数据堆积到您的 RoR 控制器中。添加`include_gon`到您的布局中，瞧—— gon 对象在 JS 中也可用。

# android - 不使用 OnItemSelectedListener 的 Android 微调器刷新

> ID：15075176
> 
> 赞同：0
> 
> 时间：2013-02-25T19:47:35.110
> 
> 标签：android, spinner, sharedpreferences

我有一个我一直无法弄清楚的问题。我有一个从保存在 SharedPreferences 中的 ArrayList 加载的微调器。我允许用户通过一个单独的类 startActivityForResult 中的 PreferenceActivity 修改微调器名称。它可以工作，但除非应用程序关闭然后重新打开，否则我无法让微调器使用新名称刷新自身。

当用户使用后退键关闭编辑名称窗口时，结果代码和 result_ok 信息将正确传回。这是我无法弄清楚的地方。我知道我需要使用 NotifyDataSetChanged 但我不知道该怎么做，因为修改是在一个单独的类中进行的，而不是在 OnItemSelectedListener 中，就像 StackOverflow 上的许多问题的答案建议刷新微调器数据一样。

这是我的微调器代码：

```
private ArrayAdapter<String> adapter1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {
        /* enable hardware acceleration on Android >= 3.0 */
        final int FLAG_HARDWARE_ACCELERATED = WindowManager.LayoutParams.class
                .getDeclaredField("FLAG_HARDWARE_ACCELERATED").getInt(null);
        getWindow().setFlags(FLAG_HARDWARE_ACCELERATED,
                FLAG_HARDWARE_ACCELERATED);
    } catch (Exception e) {
    }
    checkPreferences();
    setContentView(R.layout.main);
    this.findViewById(R.id.label_mode).setOnClickListener(this);
    this.findViewById(R.id.label_clear).setOnClickListener(this);
    this.findViewById(R.id.label_data).setOnClickListener(this);
    this.findViewById(R.id.label_wifi).setOnClickListener(this);
    this.findViewById(R.id.label_roam).setOnClickListener(this);
    this.findViewById(R.id.label_vpn).setOnClickListener(this);
    this.findViewById(R.id.label_invert).setOnClickListener(this);

    SharedPreferences prefs = PreferenceManager
            .getDefaultSharedPreferences(getApplicationContext());
    // create the spinner
    spinner = (Spinner) findViewById(R.id.spinner);

    // profile names for spinner
    final List<String> profilestring = new ArrayList<String>();
    profilestring.add(prefs.getString("default",
            getString(R.string.defaultprofile)));
    profilestring.add(prefs.getString("profile1",
            getString(R.string.profile1)));
    profilestring.add(prefs.getString("profile2",
            getString(R.string.profile2)));
    profilestring.add(prefs.getString("profile3",
            getString(R.string.profile3)));
    profilestring.add(prefs.getString("profile4",
            getString(R.string.profile4)));
    profilestring.add(prefs.getString("profile5",
            getString(R.string.profile5)));
    profileposition = profilestring
            .toArray(new String[profilestring.size()]);

    // adapter for spinner
    adapter1 = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_dropdown_item, profileposition);

    adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter1);
    spinner.setSelection(prefs.getInt("itemPosition", 0));
    spinner.post(new Runnable() {
        public void run() {
            spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
                public void onItemSelected(AdapterView<?> parent,
                        View view, int position, long id) {
                    SharedPreferences prefs = PreferenceManager
                            .getDefaultSharedPreferences(getApplicationContext());
                    SharedPreferences.Editor editor = prefs.edit();
                    int index = parent.getSelectedItemPosition();
                    if (index == 0) {
                        editor.putInt("itemPosition", index);
                        editor.commit();
                        LoadDefaultProfile();
                    }
                    if (index == 1) {
                        editor.putInt("itemPosition", index);
                        editor.commit();
                        LoadProfile1();
                    }
                    if (index == 2) {
                        editor.putInt("itemPosition", index);
                        editor.commit();
                        LoadProfile2();
                    }
                    if (index == 3) {
                        editor.putInt("itemPosition", index);
                        editor.commit();
                        LoadProfile3();
                    }
                    if (index == 4) {
                        editor.putInt("itemPosition", index);
                        editor.commit();
                        LoadProfile4();
                    }
                    if (index == 5) {
                        editor.putInt("itemPosition", index);
                        editor.commit();
                        LoadProfile5();
                    }
                }

                public void onNothingSelected(AdapterView<?> parent) {
                    // do nothing
                }
            });
        }
    }); 
```

然后我设置我的选择并使用 spinner.post(New Runnable) 运行微调器。

我的偏好屏幕非常简单。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<EditTextPreference
    android:key="default"
    android:summary="Edit name for Default Profile"
    android:title="@string/defaultprofile" />

<EditTextPreference
    android:key="profile1"
    android:summary="Edit name for profile1"
    android:title="@string/profile1" />

<EditTextPreference
    android:key="profile2"
    android:summary="Edit name for profile2"
    android:title="@string/profile2" />

<EditTextPreference
    android:key="profile3"
    android:summary="Edit name for profile3"
    android:title="@string/profile3" />

<EditTextPreference
    android:key="profile4"
    android:summary="Edit name for profile4"
    android:title="@string/profile4" />

<EditTextPreference
    android:key="profile5"
    android:summary="Edit name for profile5"
    android:title="@string/profile5" /> 
```

编辑名称类

```
public class EditProfileNames extends PreferenceActivity implements
    OnSharedPreferenceChangeListener {
@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.layout.prefs);
    PreferenceManager.setDefaultValues(EditProfileNames.this,
            R.layout.prefs, false);

    for (int i = 0; i < getPreferenceScreen().getPreferenceCount(); i++) {
        initSummary(getPreferenceScreen().getPreference(i));
    }
}

@SuppressWarnings("deprecation")
@Override
protected void onResume() {
    super.onResume();
    // Set up a listener whenever a key changes
    getPreferenceScreen().getSharedPreferences()
            .registerOnSharedPreferenceChangeListener(this);
}

@SuppressWarnings("deprecation")
@Override
protected void onPause() {
    super.onPause();
    // Unregister the listener whenever a key changes
    getPreferenceScreen().getSharedPreferences()
            .unregisterOnSharedPreferenceChangeListener(this);
}

@SuppressWarnings("deprecation")
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
        String key) {
    updatePrefSummary(findPreference(key));
}

private void initSummary(Preference p) {
    if (p instanceof PreferenceCategory) {
        PreferenceCategory pCat = (PreferenceCategory) p;
        for (int i = 0; i < pCat.getPreferenceCount(); i++) {
            initSummary(pCat.getPreference(i));
        }
    } else {
        updatePrefSummary(p);
    }

}

private void updatePrefSummary(Preference p) {
    if (p instanceof ListPreference) {
        ListPreference listPref = (ListPreference) p;
        p.setSummary(listPref.getEntry());
    }
    if (p instanceof EditTextPreference) {
        EditTextPreference editTextPref = (EditTextPreference) p;
        p.setSummary(editTextPref.getText());
    }

}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        resultOk();
    }
    return super.onKeyDown(keyCode, event);
}

/**
 * Set the activity result to RESULT_OK and terminate this activity.
 */
private void resultOk() {
    final Intent response = new Intent(Api.PREF_PROFILES);
    setResult(RESULT_OK, response);
    finish();
} 
```

}

那么我该怎么做才能刷新微调器？我知道如果在 OnItemSelectedListener 中进行了更改，我可以做到这一点，但因为它是一个完全不同的类，所以我现在迷失了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:11:42.810

听起来您正在将对数组的引用传递`profileposition`给另一个类，以便它可以向其中添加元素。您还需要传递`adapter`对该类的引用，以便它可以`adapter.notifyDataSetChanged();`在更新数组后调用。

编辑：现在我看到您为结果而启动的 Acitivty 正在更新数组，您只需调用`adapter.notifyDataSetChanged();`回调`onActivityResult()`即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:52:04.797

更改内容后，调用`notifyDataSetChanged`适配器即可解决问题。

试试这个方法

```
 adapter.notifyDataSetChanged(); 
```

# php - 基于id在mysql php中只出现一次表行

> ID：15075177
> 
> 赞同：0
> 
> 时间：2013-02-25T19:47:36.403
> 
> 标签：php, mysql

我有一张看起来像这样的桌子

```
编号 | 项目ID | 猫ID | 标题
-------------------------------------------------- --------------------------
0 3 4 你好
1 3 6 你好
2 4 4 哟
3 4 8 哟
4 5 2 嗨
5 1 3 什么

```

我想做一个 MySQL PHP Select，它只出现一次 itemID。如您所见，它们是相同的项目，只是属于不同的类别。

这是我尝试过的

```
SELECT * FROM Table GROUP BY itemID 
```

这似乎不起作用，它仍然只是显示重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:02:55.737

这是你想要的？ [http://www.sqlfiddle.com/#!2/5ba87/1](http://www.sqlfiddle.com/#!2/5ba87/1)

```
select itemID, Title from test group by itemID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:05:03.297

如果您想要不同 itemID 的所有内容，您当然可以通过对所有不同 itemID 进行一次选择，然后根据第一个查询的结果进行一系列选择来走很长的路。

```
select distinct(`itemID`) from Table 
```

然后在您的 PHP 代码中，执行以下操作：

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC))
    {
    $itemID = $row['itemID'];

    $sql2 ="SELECT * FROM Table WHERE 1 and `itemID`=\"$itemID\" limit 1";
    $result2 = @mysql_query($sql2, $connection);
    while ($row2 = mysql_fetch_array($result2))     
        {
            $id = $row2['id'];
            $itemID = $row2['itemID'];
            $catID = $row2['catID'];
            $Title = $row2['Title'];
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:56:30.757

就 MySQL 而言，数据都是唯一的，因为您需要所有列。你必须更具体。

您只想要 itemID（或其他列）吗？然后这样说：

`select [column] from Table GROUP BY itemID`

您想要特定项目 ID 的最后一个条目吗？然后说：

`select * from Table where itemID = 1 ORDER BY id DESC`

还是第一个？

`select * from Table where itemID = 1 ORDER BY id`

如果这些都不是您想要的，那么您可能需要重组您的表。看起来您想要为您的项目提供不同的类别。如果是这样，那么您将希望将它们拆分到一个新的连接表中，因为您在项目和类别之间具有多对多的关系。我建议阅读数据库规范化，这样您就不会复制数据（例如您使用标题）。

# sql - 日期时间变量的动态 sql 语法问题

> ID：15075179
> 
> 赞同：2
> 
> 时间：2013-02-25T19:47:42.550
> 
> 标签：sql, sql-server

对于此代码，当我引入 2 个日期变量时，代码错误并出现错误。

错误是

```
Msg 137, Level 15, State 1, Line 8
Must declare the scalar variable "@STARTDATE".
Msg 137, Level 15, State 1, Line 9
Must declare the scalar variable "@ENDDATE". 
```

知道如何解决这个问题，因为我的大脑现在已经正式死了？

```
DECLARE 
    @Query1  AS NVARCHAR(MAX),
    @Startdate DATETIME,
    @Enddate DATETIME

SET @STARTDATE = '10-JAN-2012'
SET @ENDDATE = '11-JAN-2012'

SET @Query1 = '

;WITH CTE AS
(
    select COALESCE( PT.[description] , ''Grand Total'') AS [Transaction Type], 
           Sum (AI.PRICE_INC_VAT) AS [AMOUNT (ú) CREDIT],
           P.[DESCRIPTION] AS [PRODUCT TYPE]

From  [dbo].[T1] C 
join [dbo].[T2] S on S.[Customer_ID]=C.[Customer_ID] 
join [dbo].[T3] SO on SO.[SITE_ID]=S.[SITE_ID]
join [dbo].[T4] OI on OI.[ORDER_ID]=SO.[SITE_ORDER_ID]
left join [dbo].[T5] P on P.[PRODUCT_ID]=OI.[PRODUCT_ID]
JOIN [dbo].[T6] AI ON  AI.ORDER_ITEM_ID = OI.ORDER_ITEM_ID
JOIN [T7] JBAI ON JBAI.ACTION_ITEM_ID = AI.ACTION_ITEM_ID
JOIN T8 JB ON JB.JOB_BATCH_ID = JBAI.JOB_BATCH_ID
JOIN [T9] PA on PA.PAYMENT_ID=JB.PAYMENT_ID
LEFT JOIN [T10] CU ON JB.CUSTOMER_USER_ID = CU.CUSTOMER_USER_ID
JOIN [T11] PT ON PT.PAYMENT_TYPE_ID=PA.PAYMENT_TYPE_ID 
LEFT JOIN [T12] ON SU.SYS_USER_ID=JB.SYS_USER_ID

where P.[PRODUCT_CATEGORY_ID]= ''PADS'' 
    and C.COMPANY_ID= ''19992''
    and PA.DATE_RECEIVED BETWEEN @Startdate AND @Enddate 

group by PT.DESCRIPTION, P.DESCRIPTION
)' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T19:53:59.303

您的参数超出了 sql 查询的范围。您需要将参数传递到 sql 字符串中。您会注意到您还必须将参数转换为 a`varchar`以便可以将其连接到字符串：

```
DECLARE 
    @Query1  AS NVARCHAR(MAX),
    @Startdate DATETIME,
    @Enddate DATETIME

SET @STARTDATE = '10-JAN-2012'
SET @ENDDATE = '11-JAN-2012'

SET @Query1 = '

;WITH CTE AS
(
    select COALESCE( PT.[description] , ''Grand Total'') AS [Transaction Type], 
           Sum (AI.PRICE_INC_VAT) AS [AMOUNT (ú) CREDIT],
           P.[DESCRIPTION] AS [PRODUCT TYPE]

From  [dbo].[T1] C 
join [dbo].[T2] S on S.[Customer_ID]=C.[Customer_ID] 
join [dbo].[T3] SO on SO.[SITE_ID]=S.[SITE_ID]
join [dbo].[T4] OI on OI.[ORDER_ID]=SO.[SITE_ORDER_ID]
left join [dbo].[T5] P on P.[PRODUCT_ID]=OI.[PRODUCT_ID]
JOIN [dbo].[T6] AI ON  AI.ORDER_ITEM_ID = OI.ORDER_ITEM_ID
JOIN [T7] JBAI ON JBAI.ACTION_ITEM_ID = AI.ACTION_ITEM_ID
JOIN T8 JB ON JB.JOB_BATCH_ID = JBAI.JOB_BATCH_ID
JOIN [T9] PA on PA.PAYMENT_ID=JB.PAYMENT_ID
LEFT JOIN [T10] CU ON JB.CUSTOMER_USER_ID = CU.CUSTOMER_USER_ID
JOIN [T11] PT ON PT.PAYMENT_TYPE_ID=PA.PAYMENT_TYPE_ID 
LEFT JOIN [T12] ON SU.SYS_USER_ID=JB.SYS_USER_ID

where P.[PRODUCT_CATEGORY_ID]= ''PADS'' 
    and C.COMPANY_ID= ''19992''
    and PA.DATE_RECEIVED BETWEEN '+ convert(varchar(10), @Startdate, 120) 
    + ' AND '+ convert(varchar(10), @Enddate, 120) +' 

group by PT.DESCRIPTION, P.DESCRIPTION
)' 
```

不过，我不确定您为什么要在此过程中使用动态 SQL。这可以在不使用动态 SQL 的情况下轻松执行：

```
;WITH CTE AS
(
    select COALESCE( PT.[description] , 'Grand Total') AS [Transaction Type], 
           Sum (AI.PRICE_INC_VAT) AS [AMOUNT (ú) CREDIT],
           P.[DESCRIPTION] AS [PRODUCT TYPE]

From  [dbo].[T1] C 
join [dbo].[T2] S on S.[Customer_ID]=C.[Customer_ID] 
join [dbo].[T3] SO on SO.[SITE_ID]=S.[SITE_ID]
join [dbo].[T4] OI on OI.[ORDER_ID]=SO.[SITE_ORDER_ID]
left join [dbo].[T5] P on P.[PRODUCT_ID]=OI.[PRODUCT_ID]
JOIN [dbo].[T6] AI ON  AI.ORDER_ITEM_ID = OI.ORDER_ITEM_ID
JOIN [T7] JBAI ON JBAI.ACTION_ITEM_ID = AI.ACTION_ITEM_ID
JOIN T8 JB ON JB.JOB_BATCH_ID = JBAI.JOB_BATCH_ID
JOIN [T9] PA on PA.PAYMENT_ID=JB.PAYMENT_ID
LEFT JOIN [T10] CU ON JB.CUSTOMER_USER_ID = CU.CUSTOMER_USER_ID
JOIN [T11] PT ON PT.PAYMENT_TYPE_ID=PA.PAYMENT_TYPE_ID 
LEFT JOIN [T12] ON SU.SYS_USER_ID=JB.SYS_USER_ID

where P.[PRODUCT_CATEGORY_ID]= 'PADS'
    and C.COMPANY_ID= '19992'
    and PA.DATE_RECEIVED BETWEEN @Startdate AND @Enddate

group by PT.DESCRIPTION, P.DESCRIPTION
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:57:02.777

如果这确实需要动态 SQL，您应该执行以下操作：

```
-- USE UNAMBIGUOUS FORMATS PLEASE!

SET @STARTDATE = '20120110';
SET @ENDDATE = '20120111';

SET @Query1 = ';WITH CTE AS
...
    and PA.DATE_RECEIVED BETWEEN @STARTDATE AND @ENDDATE 
    group by PT.DESCRIPTION, P.DESCRIPTION
)';

EXEC sp_executesql 
  @Query1, 
  N'@STARTDATE DATETIME, @ENDDATE DATETIME',
  @STARTDATE, @ENDDATE; 
```

但是，除非我遗漏了什么，否则这里不需要动态 SQL。

# php - Magento Collections（按特定顺序按类型 ID 获取产品

> ID：15075184
> 
> 赞同：0
> 
> 时间：2013-02-25T19:48:02.957
> 
> 标签：php, mysql, magento, entity-attribute-value

我想按特定顺序从 magento 获取产品集合。

1.  简单产品
2.  可配置产品
3.  分组产品

我将如何添加一个过滤器来按该顺序检索产品

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:09:45.737

直接是不可能的。我有 2 个解决方案：

**1.**`addAttributeToFilter`使用where `attribute name`is将您的产品放入 3 个不同的集合中`type_id`。对于您可以使用的条件`Mage_Catalog_Model_Product_Type::TYPE_SIMPLE`，`Mage_Catalog_Model_Product_Type::TYPE_CONFIGURABLE`和 `Mage_Catalog_Model_Product_Type::TYPE_GROUPED`。

例子：

```
$simple_products = $model->getCollection()
        ->addAttributeToSelect('*')
        ->addAttributeToFilter('type_id', Mage_Catalog_Model_Product_Type::TYPE_SIMPLE); 
```

* * *

**2.**从管理面板添加自定义属性（例如`1`，简单、`2`可配置、`3`分组产品等）并将其与`addAttributeToSort`.

# eclipse - eclipse中未列出的weblogic数据源

> ID：15075186
> 
> 赞同：0
> 
> 时间：2013-02-25T19:48:12.267
> 
> 标签：eclipse, jsf, netbeans

我在 netbeans 中开发 java ee 应用程序，出于某种原因我跳到了 eclipse。

在netbeans中，当我点击“数据库中的实体类”时，我曾经看到oracle的数据源，基本上是数据库。我很容易用来创建我的豆子。

现在，有没有办法在eclipse中这样做？如果是这样，该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:54:09.493

您在 eclipse 中寻找的 netbeans 功能没有直接的等价物（或者至少不是我在 eclipse 安装中所知道的）。

对于初学者，您应该使用为**Java EE 开发人员**构建的 eclipse 版本。它有一个数据源浏览器作为选项卡之一。在这里，您可以添加可用于配置应用程序的数据源。

更多信息[在这里](http://www.cleartoolkit.com/dokuwiki/doku.php?id=clearwiki:20.cleardatabuilder:02.creating_cdb_project:02.building_workspace_datasource)。

# c# - 将两个相关实体的 ObservableCollection 绑定到一个 DataGrid

> ID：15075187
> 
> 赞同：0
> 
> 时间：2013-02-25T19:48:22.123
> 
> 标签：c#, linq, entity-framework, datagrid, observablecollection

我的模型文件中有两个相关实体。

他们看起来像：

```
 MasterPartNumber (parent, one) --> MasterPartsList (children, many)
      (PK) partNum                        (PK) listID
           partNumDesc                    (FK) partNum
                                               parentAssyPartNum 
```

如果我只能将我的 DataGrid 的 ItemsSource 绑定到一个`ObservableCollection`，我如何将来自这两个相关实体的所有信息包含在我的 DataGrid 中？

注意：我不绑定到`collectionViews`，只依赖`PropertyChanged`通知并将“SelectedItem”设置为我的视图模型上的属性。我意识到我很可能需要将其中一种实体类型转换为另一种，以便将它们组合在一个集合下。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:19:44.650

发布后几分钟，我意识到一切都已经正确设置，我只是在包含（/相关）表属性的 xaml 绑定上有一个错字：

我的视图模型相关代码如下：

```
 public ObservableCollection<MasterPartNumber> AssyPns
    {
        get
        {
                var enumerable = this._context.MasterPartNumbers.Include("MasterPartsLists").Where(t => t.MasterPartsLists.Any(x => x.isAssy == true));

                return this._assyPns = new ObservableCollection<MasterPartNumber>(enumerable);

        }

        set 
        {
            this._assyPns = value;
            RaisePropertyChanged("AssyPns");

        }
    }

            public MasterPartNumber SelectedTopLevelAssyPN //<-- this is the selected Parent item i am getting my DataGrid's ObservableCollection from
    {
        get { return this._selectedTopLevelAssyPN; }
        set
        {
            this._selectedTopLevelAssyPN = value;
            RaisePropertyChanged("SelectedTopLevelAssyPN");
            RaisePropertyChanged("SelectedAssyBOMLineItems");
        }
    }

    public ObservableCollection<MasterPartsList> SelectedAssyBOMLineItems //<-- this is my itemsSource
    {
        get
        {
            if (this._selectedTopLevelAssyPN != null)
            {
                var children = _context.MasterPartsLists.Where(lineItem => lineItem.parentAssyPN != null)
                                                        .Where(lineItem => lineItem.parentAssyPN == this._selectedTopLevelAssyPN.pn);     

                return this._selectedAssyBOMLineItems = new ObservableCollection<MasterPartsList>(children);

            }

            return this._selectedAssyBOMLineItems;
        }
        set
        {
            this._selectedAssyBOMLineItems = value;
            RaisePropertyChanged("SelectedAssyBOMLineItems");
        }
    } 
```

我将 dataGrid TextColumn 绑定到的路径只是

```
 {Binding MasterPartNumber.pnDesc} 
```

谢谢两位这么及时的回复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:04:20.393

您可以创建`MasterPartsList`实体的部分类并访问您的子实体详细信息。

```
public partial class MasterPartsList
{
    public string PartDescription
    {
        get { return this.MasterPartNumber.partNumDesc; }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:59:36.417

`DataContext`如果您实际上将 绑定到您的父母列表`DataGrid`，然后在每个孩子的数据模板中将 绑定`DataContext`到子项，这可能会更容易。

然后，您可以在任何需要的地方获得信息。

# cakephp - 删除 Behavior::beforeSave 中的字段

> ID：15075188
> 
> 赞同：-1
> 
> 时间：2013-02-25T19:48:22.630
> 
> 标签：cakephp, cakephp-1.3, behavior, cakephp-2.3

我在 CakePHP 中准备了我最简单的行为，在 1.3 中完美运行。

简短描述：我有五个输入的表单（类型文件），但用户只添加了两个文件（3 个输入为空）。我的行为删除了 beforeSave 中的这三个字段并返回 true。但是`debug();`save/saveAll 总是将这些字段返回为 incorecct。

在此示例中，1.3 和 2.x 之间存在一些差异（在 2.3 上测试）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T20:46:10.530

这是因为您使用的是 beforeSave() 而不是 beforeValidate()。

但是，如果您正确设置验证规则，则不需要取消设置这些字段，请参阅[http://book.cakephp.org/2.0/en/models/data-validation.html#allowempty](http://book.cakephp.org/2.0/en/models/data-validation.html#allowempty)

# php - php 从另一个数组的搜索结果创建一个新数组

> ID：15075192
> 
> 赞同：0
> 
> 时间：2013-02-25T19:48:36.230
> 
> 标签：php, arrays, search

我的初始数组是

```
$employees = array(
array('name' => 'jack',
      'area' => 'crafts'),

array('name' => 'janet',
      'area' => 'aquatics'),

array('name' => 'brad',
      'area' => 'crafts')
); 
```

我正在尝试根据另一个数组的搜索结果创建一个新数组，因此如果我搜索“工艺品”，新数组应该如下所示：

```
$employees2 = array(
array('name' => 'jack',
      'area' => 'crafts'),

array('name' => 'brad',
      'area' => 'crafts')
); 
```

我能得到这个新结果的最简单的解决方案是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:59:45.670

```
foreach($employees as $key => $value){

    if($value['area']=='crafts'){
        $employees2[] = $value;
    }

} 
```

这很简单地遍历第一个数组并检查内部数组中“区域”的值。如果该值等于“crafts”，则可以将其放入一个名为 $employees2 的新数组中。如果您希望自定义密钥，您可以将工艺更改为您想要的任何内容，并在 employees2 中的 [ ] 之间添加您想要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:58:46.860

试试这个：

```
$employees = array(
array('name' => 'jack',
  'area' => 'crafts'),

array('name' => 'janet',
  'area' => 'aquatics'),

array('name' => 'brad',
  'area' => 'crafts')
);

$employees2 = array();

foreach ($employees as $key) {
if($key['name'] == "jack")
{
    array_push($employees2,array('name'=>$key['name'],'area'=>$key['area']));
}
}

var_dump($employees2); 
```

array_push 做所有的把戏；）

萨卢多斯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:05:52.277

您可以通过使用实用程序带库 Underscore.php ( [http://brianhaveri.github.com/Underscore.php/](http://brianhaveri.github.com/Underscore.php/) ) 来简化语法（但不是算法复杂性）

有许多数组“采摘”方法可以节省您编写循环的需要，但在引擎盖下，它的作用与上面答案中描述的大致相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T20:10:55.350

我将假设可能的结果集可能很大。在这种情况下，您希望使用尽可能少的额外内存来处理数组。为此，我建议通过引用遍历数组并取消设置与您的条件不匹配的项目。可能比创建一个新数组来存储与您的过滤器匹配的项目更少的开销。然后您可以检查数组是否为空，以确定过滤器是否返回任何结果。像这样：

```
<?php
// maybe this will be set through an option from the UI
$area_filter = 'crafts';

// fetched results
$employees = array(
    array('name' => 'jack',
          'area' => 'crafts'),

    array('name' => 'janet',
          'area' => 'aquatics'),

    array('name' => 'brad',
          'area' => 'crafts')
);

// filter out the items that match your filter
foreach($employees as $i => &$employee){
    if($employee['area'] != $area_filter){
        unset($employees[$i]);
    }
}

// do something with the results
if(!empty($employees)){
    print_r($employees);
} else {
    echo "Sorry, your filter '$area_filter' did not match any results\n";
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T05:04:39.417

试试这个 ：

```
$employees = array(
array('name' => 'jack',
  'area' => 'crafts'),
array('name' => 'janet',
  'area' => 'aquatics'),
array('name' => 'brad',
  'area' => 'crafts')
);

$employees       = array_filter($employees, function($employee) {
   return ($employee['area'] == 'crafts' );
});
echo "<pre>";
print_r($employees); 
```

# oracle - 在axis2 Web服务中调用oracle jdbc时出错

> ID：15075200
> 
> 赞同：1
> 
> 时间：2013-02-25T19:49:05.330
> 
> 标签：oracle, jdbc, axis2

我在制作要制作 java 类 java 的轴 Web 服务时遇到问题（oracle jdbc）

```
 package com.omar;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DB {
    public Connection connectDB(Connection conn){
        try {
            Class.forName("oracle.jdbc.driver.OracleDriver");
        } catch (ClassNotFoundException e) {
            System.out.println("Where is your Oracle JDBC Driver?");
            e.printStackTrace();
        }
        //System.out.println("Oracle JDBC Driver Registered!"); 
        try {
            conn = DriverManager.getConnection(
                    "jdbc:oracle:thin:@//127.0.0.1:1521/orcl.world", "omar",
                    "a1s2w3e4r5t6");
        //  statement = (Statement) conn.createStatement();
        } catch (SQLException e) {
        //  System.out.println("Connection Failed! Check output console");
            e.printStackTrace();
        }
        return conn;
    }
} 
```

我尝试使用 eclipse 进行部署，这是错误

```
Error: org.apache.axis2.deployment.DeploymentException: The following error occurred during schema generation: null
    at org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:432)
    at org.apache.axis2.deployment.repository.util.ArchiveReader.buildServiceGroup(ArchiveReader.java:101)
    at org.apache.axis2.deployment.repository.util.ArchiveReader.processServiceGroup(ArchiveReader.java:178)
    at org.apache.axis2.deployment.ServiceDeployer.deploy(ServiceDeployer.java:82)
    at org.apache.axis2.deployment.repository.util.DeploymentFileData.deploy(DeploymentFileData.java:136)
    at org.apache.axis2.deployment.DeploymentEngine.doDeploy(DeploymentEngine.java:813)
    at org.apache.axis2.deployment.repository.util.WSInfoList.update(WSInfoList.java:144)
    at org.apache.axis2.deployment.RepositoryListener.update(RepositoryListener.java:377)
    at org.apache.axis2.deployment.RepositoryListener.checkServices(RepositoryListener.java:254)
    at org.apache.axis2.deployment.DeploymentEngine.loadServices(DeploymentEngine.java:142)
    at org.apache.axis2.deployment.WarBasedAxisConfigurator.loadServices(WarBasedAxisConfigurator.java:283)
    at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContext(ConfigurationContextFactory.java:95)
    at org.apache.axis2.transport.http.AxisServlet.initConfigContext(AxisServlet.java:584)
    at org.apache.axis2.transport.http.AxisServlet.init(AxisServlet.java:454)
    at org.apache.axis2.webapp.AxisAdminServlet.init(AxisAdminServlet.java:60)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1280)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1193)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1088)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5033)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5317)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

Caused by: org.apache.axis2.deployment.DeploymentException: The following error occurred during schema generation: null
    at org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:396)
    ... 27 more

Caused by: java.lang.NullPointerException
    at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchema(DefaultSchemaGenerator.java:606)
    at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchemaforFieldsandProperties(DefaultSchemaGenerator.java:732)
    at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchema(DefaultSchemaGenerator.java:623)
    at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchemaforFieldsandProperties(DefaultSchemaGenerator.java:732)
    at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchema(DefaultSchemaGenerator.java:623)
    at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchemaforFieldsandProperties(DefaultSchemaGenerator.java:732)
    at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchema(DefaultSchemaGenerator.java:623)
    at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchemaTypeforNameCommon(DefaultSchemaGenerator.java:1092)
    at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchemaForType(DefaultSchemaGenerator.java:996)
    at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.processMethods(DefaultSchemaGenerator.java:385)
    at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchema(DefaultSchemaGenerator.java:273)
    at org.apache.axis2.deployment.util.Utils.fillAxisService(Utils.java:468)
    at org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:388)
    ... 27 more 
```

# java - 检查一个/或一个 EnumSet

> ID：15075203
> 
> 赞同：1
> 
> 时间：2013-02-25T19:49:10.623
> 
> 标签：java, enums, bit-fields, enumset

所以我将我们应用程序中的一些位域转换为使用 EnumSet，我很好奇是否有更好的方法来比较 X|Y。目前我们正在做类似的事情：

```
if(bitfield & (X | Y) != 0) {
    //do stuff
} 
```

EnumSet 等效项似乎是：

```
if(enumSet.contains(X) || enumSet.contains(Y)) {
    //do stuff
} 
```

有没有更清洁的方法来做到这一点？我知道你可以这样检查`containsAll()`：

```
EnumSet flagsToCheck = EnumSet.of(X, Y);
if(enumSet.containsAll(flagsToCheck)) {
    //do stuff
} 
```

但这是针对您想知道是否`(X & Y)`已设置的场景。有没有等效的方法来检查`(X | Y)`？我认为会有类似`containsAny()`方法的东西，但我没有看到任何似乎有这种效果的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T19:53:11.260

我会说现有方法比您的按位方法*更具*可读性。它准确地表达了你的意思：如果集合包含 X，或者集合包含 Y...保持原样。已经很干净了。

如果集合变大，您可以使用：

```
EnumSet<Foo> valid = EnumSet.of(Foo.X, Foo.Y, Foo.A, Foo.B);
valid.retainAll(enumSet);
if (valid.isEmpty()) {
    ...
} 
```

但我只会在更大的情况下保留它。对于两个或三个选项，我会使用速记形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:52:31.500

您可以使用该`AbstractSet`方法`removeAll`（如果找到任何元素，则为 true）。显然，您可能想使用原始集合的克隆来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-15T21:29:47.237

如果您无法更新集合，只需创建一个新集合...@assylias 是对的。一个选项是根据您想要的枚举值创建一个新集并相应地更改/验证。

```
public enum ResultingState {
    NOT_PERSISTED, PERSISTED, NOT_CALCULATED, CALCULATED;
}
EnumSet<ResultingState> errorsState = EnumSet.of(ResultingState.NOT_PERSISTED, ResultingState.NOT_CALCULATED);
Collection<ResultingState> results = new HashSet<>(phaseResults.values());
boolean containsAny = results.retainAll(errorsState) && results.size() > 0; 
```

# php - 单击并保存时可编辑的内容

> ID：15075208
> 
> 赞同：0
> 
> 时间：2013-02-25T19:49:23.277
> 
> 标签：php, html-table, export-to-csv, contenteditable

我有一个 html 页面，可让您创建联系人。

创建后，它使用 php 保存到 .csv 文件中。然后使用以下方法在表格中显示所有联系人的列表：

```
print "<thead style='color: blue; background-color: #DCDCDC'><tr>";
$Info = array("ID", "Picture", "Title", "FirstName", "LastName", "Email", "WebSite", "CellNo", "HomeNo", "OfficeNo", "Twitter", "Facebook", "Comment");
foreach($Info as $Heading)
{
    print "<th style='border: 1px black solid;'>$Heading</th>";
}
print "</tr></thead>";

//Print all contact info using PHP.. 
```

我现在需要能够使表中的一行只有当用户单击它旁边的链接然后将其保存回 .csv 时才可编辑。

还可以在单​​击旁边的链接时删除一行。

我怎样才能做到这一点？我可以使用表单来做到这一点，`$_POST`但我无法弄清楚如何使用 ContentEditable 属性和链接来做到这一点。

关于如何实现这一目标的任何想法或示例？还是我仅限于表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:10:48.577

您可以使用 contentEditable 属性（仅在支持 html5 的浏览器中可用）。但是为了保存编辑的内容，您必须对服务器进行 Ajax 调用。

# jquery - jquery jstree cookies插件抛出未定义的错误

> ID：15075213
> 
> 赞同：0
> 
> 时间：2013-02-25T19:49:39.553
> 
> 标签：jquery, cookies, jstree

我需要用户 jquery jstree cookies 插件。我的脚本如下：

这是使用 cookie 插件的脚本：

```
$(document).ready(function(){

     $("#tree").jstree({  

         "xml_data" : {  

             "ajax" : {  

                 "url" : "jstree.xml" 

             },  

             "xsl" : "nest"

         },  
         "themes" : {  

             "theme" : "classic",  

            "dots" : true,  

             "icons" : true 

         },  
         "ui": {
         "save_selected" : false,
         },

        "search" : {  

                 "case_insensitive" : true,  

                 "ajax" : {  

                     "url" : "jstree.xml" 

                 }  

             }, 

        "cookies" : { 
                    "cookie_options" : {
                                    "path": "C:/Users/docs"

                                    } 
                }, 

              "plugins" : ["themes", "xml_data", "ui","types", "search"] 

    }).bind("select_node.jstree", function (event, data) {

        $("#tree").jstree("toggle_node", data.rslt.obj); 
```

网页错误详情

```
User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E)
Timestamp: Mon, 25 Feb 2013 19:46:57 UTC

Message: Exception thrown and not caught
Line: 2053
Char: 42
Code: 0
jquery.jstree.js 
```

这是它抱怨的那一行：

```
if(typeof $.cookie === "undefined") { throw "jsTree cookie: jQuery cookie plugin not included."; } 
```

cookies 插件是 jstree.js 文件的一部分，还是有一个单独的 js 用于 cookies 插件？如果有不同的 cookies.js 文件，我在哪里可以得到这个文件？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:58:08.540

jsTree 插件需要[jQuery cookie 插件](https://github.com/carhartl/jquery-cookie)才能使用 cookie。确保在加载 jsTree 之前加载它。

* * *

有效的示例代码：

```
<html>
<head>
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="/path/to/jquery.cookie.js"></script>
  <script src="/path/to/jstree/jquery.jstree.js"></script>
  <script>
$(function() {
   $("#tree").jstree({  
     "cookies" : { 
                    "cookie_options" : {
                                    path: 'c:/Users/hceylan1/docs'
                                    } 
                },
                "xml_data" : {
            "data" : "" +
"<root>" +
    "<item id='node_1'>" +
        "<content><name>Root node 1</name></content>" +
    "</item>" +
    "<item>" +
        "<content><name>Root node 2</name></content>" +
    "</item>" +
    "<item parent_id='node_1'>" +
        "<content><name>Child node</name></content>" +
    "</item>" +
"</root>"
        },

    "plugins" : ["themes", "xml_data", "ui","types", "search", "cookies"] 
    }).bind("select_node.jstree", function (event, data) {

        $("#tree").jstree("toggle_node", data.rslt.obj);
    });
});
  </script>
</head>
<body>
<div id="tree">
</div>
</body>
</html> 
```

# javascript - 与 IIFE 相比，使用命名函数是否有优势？

> ID：15075215
> 
> 赞同：0
> 
> 时间：2013-02-25T19:49:42.590
> 
> 标签：javascript, function, iife

我经常看到 IIFE。

我看到一系列未打开的语句，即它们没有被括号封装。

为什么我没有看到一个函数后跟它的调用

```
 // lib code...we are inside an IIFE 

    function fooName () {
    }
    fooName();

    // lib code... 
```

当您不需要闭包时立即调用一系列语句，即您不需要持久或静态局部变量？

这个成语/模式有问题吗？它有名字吗？用了吗？

**非“小”代码**

```
function manageGlobal() {
    if (win.$A && win.$A.cg) {
        $A.extend($A, window.$A);
    } else if (window.$A) {
        $A_previous = window.$A;
    } else {
        $A = window.$A = {};
    }
}
manageGlobal(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:51:08.643

这只是一个函数声明，然后是它的调用。

它没有名称，因为它**没有特殊性**：它只是该语言的基本显而易见的使用。

顺便说一句，它比 IIFE 没有优势：

*   它更冗长
*   它将名称添加到全局（或本地）命名空间。

如果您不需要闭包，并且不需要像在小型 IIFE 中那样避免命名空间污染，那么您可以直接在函数中包含您拥有的代码，而不是声明它。

# .net - 重复的 HtmlElementEventHandler 事件被触发

> ID：15075219
> 
> 赞同：0
> 
> 时间：2013-02-25T19:49:55.943
> 
> 标签：.net, vb.net, winforms, browser, contextmenu

关于这篇文章“HtmlElementEventHandler Delegate” [http://msdn.microsoft.com/en-us/library/system.windows.forms.htmlelementeventhandler.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmlelementeventhandler.aspx)

上下文菜单事件处理程序多次触发。你如何抑制重复事件的触发？

这是我的代码：

公共事件 DocumentCompleted As WebBrowserDocumentCompletedEventHandler

```
Private Sub WebBrowser1_DocumentCompleted(sender As Object, e As WebBrowserDocumentCompletedEventArgs) Handles    WebBrowser1.DocumentCompleted
    Dim Doc As HtmlDocument = Me.WebBrowser1.Document
    AddHandler Doc.ContextMenuShowing, New HtmlElementEventHandler(AddressOf Document_ContextMenuShowing)
    Dim htmldoc As HtmlDocument = Me.WebBrowser1.Document
End Sub

Private Sub Document_ContextMenuShowing(ByVal sender As Object, ByVal e As HtmlElementEventArgs)
    Try
        Dim doc As HtmlDocument = CType(sender, HtmlDocument)
        If doc.ActiveElement.TagName = "A" Then
            MsgBox(doc.ActiveElement.InnerHtml)
            e.ReturnValue = False
        End If
    Catch ex As Exception
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:27:07.407

DocumentCompleted 将为网页中的每个框架触发。在您的 WebBrowser1_DocumentCompleted Sub 中仅使用一次 AddHandler 以使其仅触发一次。

# c - 放大立方体并将其放入 3D 空间

> ID：15075220
> 
> 赞同：1
> 
> 时间：2013-02-25T19:49:57.670
> 
> 标签：c, opengl, cube, voxel

我已经创建了一个程序来在白色画布上显示一个带衬里的立方体，但我不确定如何将该立方体组合成多个？10 x 10。另一个问题是如何在 3D 空间中创建相同的立方体？

这是我的代码：

```
void drawScene(void)
{
    int i, j;

    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(0.0, 0.0, 0.0);
    glLoadIdentity();

     glTranslatef(0.0, 0.0, -25.0); 
    glutWireCube(5.0); // Box.
    glColor3f(1.0, 0.0, 0.0);

    for(i=5; i<5; i++)
    {
        for (j = -5; j < 5; j++)
        {

            glPushMatrix();
            glTranslatef(i*5, j*5, -35.0);
            glColor3f(1.0, 1.0, 0);
            glutSolidCube(5.0);
            glColor3f(0.0, 0.0, 1.0);
            glutWireCube(5.0);
            glPopMatrix();
        }
    }

glFlush();

}

void setup(void)
{
    glClearColor(1.0, 1.0, 1.0, 0.0);
}

void resize (int w, int h)
{
    glViewport(0, 0, (GLsizei)w, (GLsizei)h); 
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glFrustum(-10.0, 10.0, -10.0, 10.0, 10.0, 100.0);
    glMatrixMode(GL_MODELVIEW);
}

void KeyInput(unsigned char key, int x, int y)
{
    switch(key)
    {
    case 27:
        exit(0);
    break;
    default:
    break;
    }
}

int main(int argc, char **argv) 
{
   glutInit(&argc,argv);
   glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
   glutInitWindowSize(500,500); /* Size of the Program Window */
   glutInitWindowPosition(100,100);
   glutCreateWindow("Box.cpp"); 
   setup();
   glutDisplayFunc(drawScene); 
   glutReshapeFunc(resize);
   glutKeyboardFunc(KeyInput);
   glutMainLoop(); 

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:53:02.393

glu 库有很多有用的花絮，比如`gluLookAt( xfrom, yfrom, zfrom, xto, yto, zto, xup, yup, zup );`

您可以使用`glScaled( factor )`/`glScalef( factor )`

您应该在 Google 上搜索一些 GL 1.X 文档。

# javascript - 如何更改下面的 url 重定向脚本

> ID：15075221
> 
> 赞同：1
> 
> 时间：2013-02-25T19:50:03.410
> 
> 标签：javascript, regex

我有一个运行良好的 url 重定向脚本，但我想对其进行一些更改。

当我重定向传出链接时，在重定向 url 的末尾我得到了类似“ **#lcinside** ”的内容

例子

`http://dl.dropbox.com/u/36139836/unknown.html?urlc=http://imgur.com/`

去

`http://imgur.com/#lcinside`

但我想放在`#lcinside`url 开始之前。

例子

`#lcinsidehttp://imgur.com`

我想放置 adf url 重定向链接而不是`#lcinside`.

我怎么能把`#lcinside`网址放在前面。

下面是脚本。

请帮我。

```
<script>
function gup(sName)
{
    sName = sName.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
    var sRegEx = "[\\?&]" + sName + "=([^&#]*)";
    var regEx = new RegExp(sRegEx);
    var aResult = regEx.exec(window.location.href);
    if(aResult == null)
    {
      return "";
    }
    else
    {
       return aResult[1];
    }
}
if(gup("urlc") != "")
{
    window.location = gup("urlc").replace("lcamp", "&") + "#lcinside";
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:54:36.553

如果您只是想清除引荐来源网址，也许您应该使用元刷新

`<meta http-equiv="refresh" content="1;url=http://imgur.com/#lcinside">`

# c - openmp on for 循环

> ID：15075228
> 
> 赞同：0
> 
> 时间：2013-02-25T19:50:19.570
> 
> 标签：c, openmp

我有以下代码：

```
for(i=0; i<num1; i++)
{
 j=i%num2;
 a[j]=do_compute(j);
} 
```

让我们假设 num2 << num1。如果我想使用 omp ，是否需要将 j 用作私有？即如下：

```
#pragma omp parallel private(i,j)
{
 #pragma omp for
 for(i=0; i<num1; i++)
 {
  j=i%num2;
  a[j]=do_compute(j);
 }
} 
```

或者这就足够了：

```
#pragma omp parallel
{
 #pragma omp for
 for(i=0; i<num1; i++)
 {
  j=i%num2;
  a[j]=do_compute(j);
 }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:16:34.947

如果 j 仅在循环范围内使用，我将执行以下操作：

```
[...]
unsigned int i;
#pragma omp parallel for
for(i = 0; i < num1; ++i)
{
    unsigned int j = i % num2;
    a[j] = do_compute(j);
}
[...] 
```

不要在这里挑剔，但鉴于这`do_compute`是确定性的并且没有副作用，你最好只使用

```
[...]
unsigned int i;
#pragma omp parallel for
for(i = 0; i < num2; ++i)
    a[i] = do_compute(i);
[...] 
```

# mysql - Mysql 更新仅从第一行获取数据，是错误吗？

> ID：15075230
> 
> 赞同：0
> 
> 时间：2013-02-25T19:50:22.370
> 
> 标签：mysql, sql-update

我有这样的查询：

```
UPDATE `portal_dyslektyczny`.`questions` AS `Question` SET `Question`.`order` = `Question`.`order` - (`Question`.`order` - 3) + 1 WHERE `Question`.`order` > 3 AND `Question`.`question_group_id` = 1; 
```

即使所有行都有升序

```
+----+-------+-------------------+
| id | order | question_group_id |
+----+-------+-------------------+
| 74 |     6 |                 1 |
| 75 |     7 |                 1 |
| 76 |     8 |                 1 |
+----+-------+-------------------+ 
```

但是当我运行查询表时像这样结束

```
+----+-------+-------------------+
| id | order | question_group_id |
+----+-------+-------------------+
| 74 |     4 |                 1 |
| 75 |     4 |                 1 |
| 76 |     4 |                 1 |
+----+-------+-------------------+ 
```

当我得到它的每一行值变化应该是这样的

```
ID: 74

`Question`.`order` = 6 - ( 6 - 3) + 1;

ID: 75

`Question`.`order` = 7 - ( 7 - 3) + 1; 
```

很快。

但事实并非如此。看起来它只从第一行获取值。有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:57:41.917

检查您的公式 - 在所有情况下它都解析为 4。

x - (x - 3) + 1 = 4

# c++ - 在 C++ 中解决涉及多继承和复合类的设计

> ID：15075233
> 
> 赞同：7
> 
> 时间：2013-02-25T19:50:36.990
> 
> 标签：c++, templates, multiple-inheritance, composite, ambiguity

我已经为这个设计问题苦苦挣扎了一段时间。我将尽我所能解释我正在尝试做什么以及我所看到的各种方法，我正在尝试什么以及为什么。

我在一个科学计算环境中工作，我反复处理相同类型的对象。想象一个包含太阳系的星系，每个太阳系都包含行星系统，每个行星系统都包含卫星。为此，我认为这种情况是一种“有”的情况，因此我使用组合来让银河系进入它的太阳系，让每个太阳系进入可以进入它们的卫星的行星系统：每个类别作为自己的班级。

通常情况下，我正在处理的各种问题包含有关这些对象的不同类型的数据。而且，随着不同类型的数据可用，我可以对我的对象做某些事情。所以，当我有可用的数据类型 1 时，我创建了以下类

```
class GalaxyOne { /* … */ };
class SolarSystemOne { /* … */ };
class PlanetOne{ /* … */ };
class MoonOne{ /* … */ }; 
```

当我有可用的数据类型 2 时，我创建

```
class GalaxyTwo { /* … */ };
class SolarSystemTwo { /* … */ };
class PlanetTwo{ /* … */ };
class MoonTwo{ /* … */ }; 
```

每个类的复合方面是通过使用容器变量来处理的，例如包含指向所包含类的指针的向量。例如，在每个 Galaxy 类中都可以找到。

```
class GalaxyTwo{ /* … */
protected:
std::vector<SolarSystemTwo*> solarSystems;
/* … */
}; 
```

当我想将类组合成高阶类时，困难就来了。

```
class GalaxyOneTwo: public GalaxyOne, public GalaxyTwo{
/* Additional methods */
}; 
```

但是，这会在 solarSystems 向量中产生一个模糊问题，因为 GalaxyOneTwo 将具有来自 GalaxyOne 和 GalaxyTwo 的版本。此外，它继承的向量包含指向非 SolarSystemOneTwo 类型对象的指针，这将是必需的。所以，我想我可以创建一个模板类，我的所有对象都从我放置所有容器变量的地方继承。

```
template<MoonT,PlanetT,SolarSystemT>
    class PrimitiveGalaxy {
    private:
        std::vector<SolarSystemT*> solarSystems
};

class GalaxyOne: public PrimitiveGalaxy <MoonOne,PlanetOne,SolarSystemOne>{
    /* No longer defining any container variables for composition */
}; 
```

这种方法非常适用于那些基本的 Galaxy 类型（GalaxyOne 和 GalaxyTwo）。然而，每当我尝试创建组合星系类型时，我都会遇到各种模棱两可的问题。

```
class GalaxyOneTwo: public GalaxyOne, public GalaxyTwo, public     PrimitiveGalaxy<MoonOneTwo,PlanetOneTwo,SolarSystemOneTwo>{
    /* … */
}; 
```

如果我在 GalaxyOneTwo 中定义的任何方法中使用 solarSystems，我会感到模棱两可，因为它被定义了三次，一次是通过 GalaxyOne 和 GalaxyTwo 的每个继承版本，第三次是通过 GalaxyOneTwo。

我可以通过具体和使用来摆脱这种歧义

PrimitiveGalaxy::solarSystems

每次都引用正确的向量，但这是不可取的，因为它需要大量额外的输入和语法。

我考虑过在每个星系类型和原始星系之间使用友谊，但这需要类似程度的冗长写作。

我有一种预感，命名空间可以简化我的代码编写，但我不确定如何定义命名空间，以便在为 GalaxyOneTwo 定义的命名空间中，对 solarSystems 的任何引用都是对 PrimitiveGalaxy::solarSystems 的引用

编辑：

请注意，GalaxyOne 和 GalaxyTwo 之间的唯一区别不是 solarSystems 中包含的类的类型。由于每个类别处理与星系相关的不同数据，因此存在许多差异。因此，我创建了不同的类，这些类将具有不同的状态变量、用于这些状态变量的 getter 和 setter，以及用于计算和打印数据的方法。solarSystems 是给我带来问题的功能的一个示例，因此这就是我在这里所描述的。创建 GalaxyOneTwo 时，它将使用用于 GalaxyOne 和 GalaxyTwo 的相同数据，因此我想继承它们的所有变量和方法。而且因为数据可以以不同的方式组合，我需要在 GalaxyOneTwo 中为此创建新的方法。这些是导致我使用继承的许多差异中的一些。话虽如此，允许组合的容器变量给我带来了问题。在每个 solarSystem 类中都会有一个类似的向量，让他们可以访问他们的行星，依此类推。

编辑：

对于一个专门针对我的设计哲学的问题（而不是这个问题强调试图解决我当前的设计尝试），请参阅以下链接： [Guidance in created design for multiple-inheritance composite classes in c++](https://stackoverflow.com/q/15121365/1618297)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:57:37.577

我认为你必须有 one `class Galaxy`, one`class SolarSystem`等。而你`GalaxyOne`的 ,`GalaxyTwo` `SolarSystemOne`等`SolarSystemTwo`只是从这些类实例化的不同对象。

```
class SolarSystem { /* … */ };
class Planet{ /* … */ };
class Moon{ /* … */ };

class Galaxy{ /* … */
 public: // Galaxy(...?...){for (...) {read data??; solarSystem.push_back(createSolarSystem(data)); }
 void AddSolarSystem(SolarSystem* ss){solarSystem.push_back(ss);}
 protected:
   std::vector<SolarSystem*> solarSystems;
   /* … */
}; 
```

……

```
Galaxy GalaxyOne, GalaxyTwo; 
```

如果我们无法使用这种简单的方法......让我们看看你的：

```
class GalaxyOneTwo: public GalaxyOne, 
                    public GalaxyTwo, 
                    public PrimitiveGalaxy<MoonOneTwo,PlanetOneTwo,SolarSystemOneTwo>{
    /* … */
 using PrimitiveGalaxy<MoonOneTwo,PlanetOneTwo,SolarSystemOneTwo>::solarSystems;
 GalaxyOneTwo(){solarSystems.reserve(10);}
}; 
```

在这里，您有三个私有向量：（使用`using`您使其可直接访问）

```
std::vector<SolarSystemOne*   > GalaxyOne::solarSystems;
std::vector<SolarSystemTwo*   > GalaxyTwo::solarSystems;
std::vector<SolarSystemOneTwo*> solarSystems; //GalaxyOneTwo::solarSystems; 
```

这是你需要的吗？让它受到保护？ ![在此处输入图像描述](../Images/e0791ff099bf0b5ba98a6ee41b579b80.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T00:29:20.640

也许您可以更改数据模型以实现基于组件的某些东西。每个组件都可以包含您为不同类型提到的相同状态信息。你可以继承虚函数

```
class Galaxy
{
  // galaxy information

  // Virtual functions shared among galaxies
  virtual void sharedGalaxyFunction() = 0;

  // Vector containing all solar systems in this galaxy
  std::vector<SolarSystem*> solarSystems_;
};

class SolarSystem
{     
  // solar system info

  // Virtual functions shared among all solar systems
  virtual void sharedSolarSystemFunction() = 0;

  // Vector containing planets
  std::vector<Planets*> planets_;
};

// etc for planets... 
```

然后，您可以继承不同类型的太阳系或星系来创建特殊情况并填写虚函数调用

```
class CoolSolarSystem : public SolarSystem
{
  // Special variables

  // Fill in the virtual function
  void sharedSolarSystemFunction();
}; 
```

然后，您可以使用指向您的特殊类型的指针填充不同基本类型内的容器。如果虚函数调用处理了足够多的信息，您应该能够避免转换回特殊类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:29:11.617

您需要将“One”和“Two”版本之间的共同内容抽象为一组“Common”基类：

```
class GalaxyCommon {
    // all the common stuff between GalaxyOne and GalaxyTwo including
    std::vector<SolarSystemCommon *> solarSystems;
    ...
};

class GalaxyOne : public virtual GalaxyCommon {
    // all the stuff that is unique to model One
};

class GalaxyTwo : public virtual GalaxyCommon {
    // all the stuff that is unique to model Two
};

class GalaxyOneTwo : public virtual GalaxyOne, public virtual GalaxyTwo {
    // should be complete
}; 
```

请注意使用`virtual`-- required 以获得正常工作的多重继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T00:16:28.820

因此，如果我正确理解您的问题：

1.  有几种类型的星系在它们之间根本没有任何共同之处。
2.  太阳和行星系统也是如此。
3.  您希望组合这些不同类型的集合，但仍可以完全访问该类型的底层方法。

这听起来像是[boost::any](http://www.boost.org/doc/libs/1_53_0/doc/html/any.html)

所以现在你的 Galaxy 是：

```
#include <list>
#include <boost/any.hpp>
typedef std::vector<boost::any> collection;
class Galaxy
{
   collection SolarSystems;
   public:
   ...methods...
};
class SolarSystem
{
   collection PlanetarySystems;
   public:
   ...methods...
};
class PlanetarySystem
{
   collection Moons;
   public:
   ...methods...
}; 
```

当然，这并没有真正做任何事情，但确实允许您对它们进行分组。为了做任何有用的事情（调用方法），您仍然必须检测类型，将其转换为该类型，然后运行您需要的代码。

但是，这确实允许您将不同类型的对象组合在一起，我认为这就是您使用 GalaxyOneTwo 所追求的。这是有关如何执行此操作的[更多信息。](http://sandfly.net.nz/blog/2009/12/the-c-boost-libraries-part-6-boostany/)

# vim - 使用 clojure 和 midje 1.4.0 从单个命名空间运行测试

> ID：15075235
> 
> 赞同：2
> 
> 时间：2013-02-25T19:50:42.060
> 
> 标签：vim, clojure, read-eval-print-loop, midje

我想从一个没有 leiningen 的 clojure repl 的命名空间中调用我的*midje 1.4.0单元测试。*

背景是我想从 vim 中的快捷方式调用它们，而不需要项目中的所有其他测试。我正在使用 vimclojure-static 和前戏。

我怎么能做这样的事情？我已经搜索了*midje*文档。*midje 1.5*似乎有一种方法，但它仍然是*alpha*并且看起来也不是很舒服。

目前我从控制台为所有命名空间运行*midje*，不太舒服：

```
lein midje 
```

对于 clojure.test 我可以使用以下快捷方式，对于 midje 类似的事情将不胜感激：

```
command! -bar -bang RunTests :Require!<bang>|Eval (clojure.test/run-tests) 
```

相关部分是：

```
(clojure.test/run-tests) 
```

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:08:23.557

`run-tests`从 Midje 1.5（现在是一个候选版本）开始，相当于`(midje.repl/load-facts)`.

# detection - Harris & Stephens 角点检测算法：行列式始终为 0（零）

> ID：15075239
> 
> 赞同：6
> 
> 时间：2013-02-25T19:50:46.393
> 
> 标签：detection, zero, feature-detection, corner-detection

作为我的学士论文的一部分，我正在尝试使用 Harris 和 Stephens 算法实现角检测器： [A combined Corner and Edge Detector](http://www.bmva.org/bmvc/1988/avc-88-023.pdf/)

我计算：

1.  使用 sobel 滤波器 (3x3) 的 x 和 y 偏差
2.  计算系统矩阵 M

    M = [交流; CB]

    这意味着，如果我没问题：

    1.  A = sobel_x 平方的响应：Ix * Ix（在特定像素处）
    2.  B = sobel_y 平方的响应：Iy * Iy（在特定像素处）
    3.  C = sobel_x 的响应乘以 sobel_y 的响应：Ix * Iy（在某个像素处）
3.  现在我确实计算了 trace(M) 以及我特别关心的：行列式(M)

在那篇论文中，他们提出了行列式的以下近似值，因为它避免了对特征值进行昂贵的计算：

det(M) = A * B - C^2

这*必须*始终以零结尾！

表达式 det(M) = A * B - C^2 可以重写为：（利用第 2 点的知识）

det(M) = A * B - C * C

det(M) = Ix*Ix * Iy*Iy - Ix*Iy * Ix*Iy

det(M) = Ix*Ix * Iy*Iy - Ix*Ix * Iy*Iy

det(M) = 0

那么我为什么还要费心计算行列式呢？据我所知，计算trace就足够了！（或者我在某个地方犯了一个重大错误？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-13T08:54:07.490

在计算 R 之前，对 Ix2、Iy2、Ixy 应用高斯核。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-19T22:42:19.097

我遇到了同样的问题。对于图像中的每个像素，您需要考虑一个小窗口，例如像素周围的 3x3。

对于该 3x3 窗口中的每个像素，您对 Ix^2、Ix*Iy 和 Iy^2 应用高斯掩码以构造 2x2 矩阵 H'。然后对 H' 矩阵求和以获得最终的 H 矩阵，然后从那里计算行列式。

我不清楚的是为什么需要应用高斯蒙版，因为网上找到的许多幻灯片和资源都没有提到它

# sql - 基于其他列值的 SQl 约束 UNIQUE

> ID：15075241
> 
> 赞同：0
> 
> 时间：2013-02-25T19:50:48.337
> 
> 标签：sql, sql-server-2008, constraints, where-clause, unique-constraint

表 A 有第 1 列和第 2 列。如果第 2 列等于 x，则第 1 列的值必须是唯一的。

```
ALTER TABLE A
ADD UNIQUE (1) WHERE 2 = x. 
```

但这给了我 WHERE 附近的语法错误。

我试图创建一个索引，但我也不知道如何让它做我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:57:06.407

```
Create unique nonclustered index [my_index]
on [TableA]([1])
where [2] = x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:13:51.497

这是使用 Function 的替代解决方案，尽管索引是更好的解决方案：

```
CREATE FUNCTION dbo.CheckConstraint
(
   @col1 int,
   @col2 CHAR(1)
)
RETURNS INT
AS
BEGIN

  DECLARE @ret INT
  SELECT @ret = COUNT(*) 
  FROM YourTable 
  WHERE col1 = @col1 AND @col2 = 'X' 
  RETURN @ret

END;

CREATE TABLE YourTable (col1 int, col2 char(1));

ALTER TABLE YourTable
  ADD CONSTRAINT CheckForXConstraint CHECK (NOT (dbo.CheckConstraint(col1,col2) > 1));

INSERT INTO YourTable VALUES (1, 'X');
INSERT INTO YourTable VALUES (2, 'X');
INSERT INTO YourTable VALUES (2, 'Y');
INSERT INTO YourTable VALUES (2, 'X');   <-- This line fails 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/c80fc/1)

# django - 在views.py中处理其形式后获取对象的id

> ID：15075252
> 
> 赞同：0
> 
> 时间：2013-02-25T19:51:15.730
> 
> 标签：django, django-forms, django-views

我需要获取我刚刚保留的对象的 id，以便在 HttpResponseRedirect 中传递它：

```
def pujar_track(request):
if request.method=='POST':
    formulari = TrackForm(request.POST, request.FILES)
    if formulari.is_valid():                    
        formulari.save()            
        # code to get the track_id ???          
        return HttpResponseRedirect('/track/pujar/acoplar',track_id)
else:
    formulari = TrackForm()

return render(request,'principal/trackForm.html',
    {'formulari':formulari}) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:55:37.440

假设 TrackForm 扩展 ModelForm：

```
formulari = formulari.save()
return HttpResponseRedirect('/track/pujar/acoplar',formulari.id) 
```

在不知道您如何接受变量的情况下，我无法告诉您如何最好地传递参数。但是，我鼓励您使用`reverse`URL 而不是硬编码，如下所示：

```
return HttpResponseRedirect(reverse('view_name', args=(),
    kwargs={'track_id': formulai.id})) 
```

假设您的视图接受关键字参数`track_id`

# php - 一系列窗口打开，颜色框调整大小以适应内容

> ID：15075255
> 
> 赞同：0
> 
> 时间：2013-02-25T19:51:23.180
> 
> 标签：php, jquery, html

文件夹我有一系列不同大小的表格需要相互打开并根据内容调整大小，我的第一个窗口打开得很好，第二个窗口没有调整大小我认为这是因为它从带有而不是关联

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:59:23.070

不需要锚`<a href>`来触发 colorBox

```
$(document).ready(function(){
 $(".what-ever-class-selector").colorbox();
}); 
```

其中任何带有 class="what-ever-class-selector" 的元素都将通过 jQuery 选择器查询触发。

# java - 使用 OpenGL 的文本字段

> ID：15075258
> 
> 赞同：0
> 
> 时间：2013-02-25T19:51:30.107
> 
> 标签：java, opengl, text, lwjgl, slick2d

所以，我是 OpenGL 的新手，并试图创建一个 2D 多人游戏，我知道如何做所有的网络，虽然图形部分老实说让我很生气。

我尝试查看 NiftyGUI 和 TWL，因为它们被推荐了很多，虽然我似乎无法掌握它们，因为没有太多教程和视频来帮助解释发生了什么，而不是提到OpenGL纪录片页面的布局非常糟糕。

我尝试绘制一个黑色矩形，我将继续以某种方式以白色勾勒出轮廓，并通过在其上绘制白色字体使其成为临时文本框，尽管我什至不知道如何绘制字体。这些只是我正在努力解决的一些我找不到的事情，而且我知道我将不得不使用一些库，所以我将命名我目前已经实现的那些。

*   LWJGL
*   Slick2D

除了 TWL 之外，我目前没有任何其他人，但我无法弄清楚如何在我的生活中使用它。

这是我在尝试让一个黑色的小矩形运行时自己编写的代码

```
void drawTextBox(int fromLeft, int fromTop, int width, int height) {
    glColor3f(1.0f, 1.0f, 1.0f);
    glBegin(GL_QUADS);
        glTexCoord2f(0, 0);
        glVertex2i(fromLeft, fromTop);  // Upper Left
        glTexCoord2f(1, 0); 
        glVertex2i(fromLeft - width, fromTop);  // Uppright
        glTexCoord2f(1, 1); 
        glVertex2i(fromLeft - width, fromTop + height);  // Bottom right
        glTexCoord2f(0, 1); 
        glVertex2i(fromLeft, fromTop + height); // bottom left
    glEnd();
} 
```

这工作正常，除了一个部分......它正在绘制我加载的最后一个纹理，即使我没有在程序中的任何地方绑定它，因为我已经确定了它。然后它会缩放它以适应文本框的尺寸。

有人可以帮我解决这个错误并指导我学习如何设置四边形的不透明度以及绘制一些文本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T06:14:45.183

```
void drawTextBox(int fromLeft, int fromTop, int width, int height) {

    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA);
    glColor4f(1.0f, 1.0f, 1.0f, <B>0.5f</B>);

    glBegin(GL_QUADS);
        glTexCoord2f(0, 0);
        glVertex2i(fromLeft, fromTop);  // Upper Left
        glTexCoord2f(1, 0); 
        glVertex2i(fromLeft - width, fromTop);  // Uppright
        glTexCoord2f(1, 1); 
        glVertex2i(fromLeft - width, fromTop + height);  // Bottom right
        glTexCoord2f(0, 1); 
        glVertex2i(fromLeft, fromTop + height); // bottom left
    glEnd();

    glDisable(GL_BLEND);
} 
```

此代码块允许您绘制一个不透明度为 %50 的白色矩形。

看一下**粗体**部分（0.5f）。这个浮点数定义了矩形的不透明度。这个数字越大（0.0f~1.0f），矩形的不透明度就越高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:33:53.743

在调用函数之前尝试绑定你想要的纹理。在不知道您如何“确保”其他纹理没有被绑定的情况下，我只能这么说。此外，要更改不透明度，只需使用其中一种`GL11.glColor4_`功能；最后一个参数是颜色的 alpha（不透明度）。

# java - 用 Java 读取 Gmail

> ID：15075259
> 
> 赞同：1
> 
> 时间：2013-02-25T19:51:30.930
> 
> 标签：java, gmail, jakarta-mail

我正在尝试编写一个 Java 类，它将通过 POP3 从 GMail 中检索消息。到目前为止，我已经复制了这段代码：[http ://www.java-tips.org/other-api-tips/javamail/connecting-gmail-using-pop3-connection-with-ssl-6.html](http://www.java-tips.org/other-api-tips/javamail/connecting-gmail-using-pop3-connection-with-ssl-6.html)

它确实检索了消息，但我需要让它只获取未读消息。我有一个用于测试目的的 GMail 帐户，其中包含 3 条消息：1 条已读，2 条未读。代码正确地说有 3 条消息，但说有 0 条新消息。

当我添加一行

```
folder.getUnreadMessageCount(); 
```

它返回 3。我希望它返回 2，因为其中一条消息已被读取（通过 Gamil 网络访问）

这是怎么回事？有什么方法可以只检索未读消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:01:11.290

这是协议的限制。POP3 只是下载服务器上所有可用的消息，但它不会使服务器端的邮件的已读/未读状态可用。如果您希望能够查询这种状态，则必须改用 IMAP。

# jquery - 根据选中的单选按钮检查隐藏的输入字段

> ID：15075262
> 
> 赞同：-1
> 
> 时间：2013-02-25T19:51:39.140
> 
> 标签：jquery, radio-button, hidden-field

我已经在这里搜索过，但是尽管发现了很多类似的并且很可能更复杂的情况，但找不到我想要做的事情的答案。

基本上，在我网站的搜索表单上，我想展示 2 个单选按钮选项：

```
<label><input type="radio" name="question_9[]" value="Blue" checked="checked" />Blue</label>    
<label><input type="radio" name="question_9[]" value="Green" />Green</label> 
```

但我想通过搜索表单提交的是：

```
<input type="hidden" name="question_9[]" value="Blue"  checked="checked"/>
<input type="hidden" name="question_9[]" value="Blue/Green"  checked="checked"/> 
```

或者

```
<input type="hidden" name="question_9[]" value="Green"  checked="checked"/>
<input type="hidden" name="question_9[]" value="Blue/Green"  checked="checked"/> 
```

取决于提交表单时选中的单选按钮。

我最近使用的软件从 scriptaculous 迁移到了 JQuery，我对它完全陌生。我希望有一种简单的方法可以根据选择的单选按钮为问题传递 2 个值，因为据我所知，除非我采取这样的解决方法，否则我只能使用单选按钮选择一个值。由于单选按钮本身不会/不应该通过表单提交值，因此可以重命名它们或进行任何需要使其工作的操作。

我真的很感谢任何提示，我再次查看并没有发现另一个问题要求这样做（让我感到惊讶），但希望我不会对这样的问题感到多余。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:31:19.087

您将无法提交具有相同名称的两个值 - 无论您使用单选按钮、复选框、隐藏文本字段还是其他任何东西。您需要考虑处理您的数据的 PHP/ASP 脚本会看到什么 - 例如对于 PHP，$_POST['question_9']（或 $_GET['question_9']）应该有什么值？该值需要从单个字段传递。

好消息是您不需要任何花哨的 javascript 技巧即可将正确的信息传递给您的脚本。如果您希望 PHP 变量为“Blue Blue/Green”，您只需将单选按钮的“value”元素更改为“Blue Blue/Green”即可。

您需要在 PHP 端解析您的值 - 例如

```
$colorArray = explode(' ',$_POST['question_9']) 
```

[PHP explode()](http://php.net/manual/en/function.explode.php)将使用分隔符将字符串分解为数组，在此示例中使用空格。

编辑：

响应澄清，解决方案更简单。单选按钮将告诉您是否提交了蓝色或绿色 - 如果您还想提交蓝色/绿色作为“question_9”数组的一部分，无论是否选中蓝色或绿色，您应该能够只添加一个像你说的隐藏字段（删除'checked'属性，因为它只适用于复选框和单选按钮）：

```
<input type="hidden" name="question_9[]" value="Blue/Green"/> 
```

# html - 删除选择标签上的边框

> ID：15075264
> 
> 赞同：2
> 
> 时间：2013-02-25T19:51:48.697
> 
> 标签：html, css

我为一个网站制作了一个表格，所有文本框都有圆角，除了选择下拉框。我做了一个圆角盒子样式，它显示了，但原来的正方形也显示在它后面。有什么办法可以删除它，所以我是唯一显示的。我将添加代码

```
<td>Service Requested:
      <select style="margin-left: 10px" name="service" tabindex="4">
           <option value=" " selected="selected"> </option>
           <option value="Residential Move">Residential Move*</option>
           <option value="Commercial Move">Commercial Move*</option>
           <option value="Storage Unit Loading">Storage Unit Loading</option>
           <option value="Storage Unit Unloading">Storage Unit Unloading</option>
           <option value="Furniture Consignment">Furniture Consignment</option>
           <option value="Assembly/Removal">Assembly/Removal</option>
           <option value="Landscaping">Landscaping</option>
           <option value="Cleanout">Cleanout</option>
           <option value="General Help">General Help</option>
      </select>
</td> 
```

这是整个表单的整个 CSS。只要有它

```
#searchbox {
padding-left: 190px;
padding-bottom:40px;
background: url(../images/border-dashed.gif) repeat-x left bottom;
}

#searchbox form {
margin: 0;
}

#searchbox table {
margin: 0;
}

#searchbox th, td {
text-align: left;
font-weight: normal;
color:#302f2f;
}

#searchbox .submitrow {
text-align: right;
}

#search {

}

#search input[type="text"] {
   border: 2px solid #c1c2c3 ;
   font: bold 12px Arial,Helvetica,Sans-serif;
   color: #302f2f;
   width: 100px;
   padding: 6px 15px 6px 15px;
   -webkit-border-radius: 20px;
   -moz-border-radius: 20px;
   border-radius: 20px;
   text-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
   -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
   -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
   box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
   -webkit-transition: all 0.7s ease 0s;
   -moz-transition: all 0.7s ease 0s;
   -o-transition: all 0.7s ease 0s;
   transition: all 0.7s ease 0s;
}

#search input[type="text"]:focus {
   width: 150px;
}

#search select {
    border: 2px solid #c1c2c3 ;
    font: bold 12px Arial,Helvetica,Sans-serif;
    color: #302f2f;
    width: 200px;
    padding: 6px 15px 6px 15px;
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;
    text-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
    -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
    -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
    -webkit-transition: all 0.7s ease 0s;
    -moz-transition: all 0.7s ease 0s;
    -o-transition: all 0.7s ease 0s;
    transition: all 0.7s ease 0s;
}

#search select:focus {
    width: 250px;
}

#search textarea {
    border: 2px solid #c1c2c3 ;
    font: bold 12px Arial,Helvetica,Sans-serif;
    color: #302f2f;
    width: 300px;
    padding: 6px 15px 6px 15px;
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;
    text-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
    -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
    -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15) inset;
    -webkit-transition: all 0.7s ease 0s;
    -moz-transition: all 0.7s ease 0s;
    -o-transition: all 0.7s ease 0s;
    transition: all 0.7s ease 0s;
}

#search textarea:focus {

}

.contactwrapper {width:auto; height:200px; overflow:hidden;}
.extra-wrap {width:800px; overflow:hidden;}

.formbtn {
background: url(../images/formbtns.png) no-repeat;
background-position: 0 bottom;
color: #f1f2ea;
display: block;
line-height: 28px;
float:right;
margin-left:450px;
margin-bottom:40px;
height: 30px;
width: 100px;
margin: 48px 10px;
outline: 0;
text-align: center;
text-decoration: none;
}
.formbtn:hover {
background-position: 0 top;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:54:09.887

不同浏览器对选择框进行样式设置的能力不一致。其中一些对 CSS 样式响应良好，而另一些则没有，但如果您真的想对它及其行为进行完全一致的控制，您需要制作一个由 javascript 提供支持的虚假选择。

查看[Select2 控件](http://ivaynberg.github.com/select2/)，它很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:05:51.937

选择框的样式主要由浏览器选择，除了使用背景图像之外，如果没有 javascript，则无法自定义。

自 jQuery UI 1.8 以来，已经有一个[自动完成控件，它具有一个组合框](http://jqueryui.com/autocomplete/#combobox)功能，它取代了一个选择控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:51:30.287

我找到了一个替代方案，但不确定它在所有浏览器中的表现如何。但是，如果您将边框属性更改为继承，它将做到这一点。至少在 Chrome 中

边框：2px 继承 #c1c2c3 ；

# html - 单页应用程序 (SPA) 中的命名锚点

> ID：15075265
> 
> 赞同：6
> 
> 时间：2013-02-25T19:51:51.547
> 
> 标签：html, single-page-application, sammy.js

在 SPA 中，使用诸如 Sammy.js 之类的导航框架，我如何在名为锚点的页面中使用页面内导航？

例如，假设我有一条路线`localhost/myapp/#/somerecord/1`，例如应用程序加载*一些*id = 1 的记录。

然而*somerecord*真的很复杂而且很长。我希望能够使用命名锚点跳转到某个部分。

假设文章元素定义为 like`<article id=section-d> ... </article>`并且我只是链接到喜欢`<a href=#section-d>Section D</a>`它在技术上有效，但 URL 读取为`localhost/myapp/#section-d`，这会破坏导航堆栈。点击后退按钮让我回到顶部，`localhost/myapp/#/somerecord/1`而*不是*跳回顶部。

首选操作是跳回顶部或上一页。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:27:21.397

实际上，您必须将您的 URL 定义为正则表达式，并在其末尾允许可选的书签哈希；就像是：

```
get(/#\/somerecord\/(\d+)(#.+)?/, function() {
    var args = this.params['splat'];
    var recordId = args[0];
    var articleId = args[1];
}); 
```

这应该匹配以下任何路线：

*   #/somerecord/1
*   #/somerecord/1#（当作没有文章id处理）
*   #/somerecord/1#section-d (articleId = '#section-d')

然后，您应该能够使用 articleId 找到匹配的元素并手动滚动。例如，在上面的最后一条路线中，使用 jQuery 您可以执行以下操作：

```
var $article = $(articleId);
    $(document.body).animate({ scrollTop: $article.offset().top });
}); 
```

如果您有兴趣，我刚刚写了一篇关于此的更全面的文章（使用 Durandal）：http: [//quickduck.com/blog/2013/04/23/anchor-navigation-durandal/](http://quickduck.com/blog/2013/04/23/anchor-navigation-durandal/)

**编辑** 链接已死。此处提供的文章[http://decompile.it/blog/2013/04/23/anchor-navigation-durandal/](http://decompile.it/blog/2013/04/23/anchor-navigation-durandal/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T09:25:05.777

我在使用 durandal 和 sammy.js 时遇到了同样的问题。基本上，您必须为页面上所需的每个锚点创建一个（不可见的）路由。请参阅我关于我找到的解决方案的帖子：http: [//papamufflon.blogspot.de/2013/04/durandal-scrollspy.html](http://papamufflon.blogspot.de/2013/04/durandal-scrollspy.html)

# linux - 如何在 Google Chrome 中确保我的网站安全？

> ID：15075277
> 
> 赞同：0
> 
> 时间：2013-02-25T19:52:49.067
> 
> 标签：linux, apache, google-chrome, firefox, ssl

我正在做一个 Web 开发项目，我主要在 Firefox 上对其进行测试。但是，当我在 Google Chrome 上尝试它时，它无法完全加载，并且 Chrome 会警告我该网站包含“不安全的内容”。在寻找答案后，我被建议让我的网站使用“https”而不是“http”。我对 SSL 或类似的东西知之甚少，但我遵循了一组说明来设置 Apache 以使用 SSL。说明在这里：

[https://www.digitalocean.com/community/articles/how-to-create-a-ssl-certificate-on-apache-for-ubuntu-12-04](https://www.digitalocean.com/community/articles/how-to-create-a-ssl-certificate-on-apache-for-ubuntu-12-04)

我跟着他们。好消息是，我的网站可以通过 https 访问。坏消息是，除非键入 https，否则该网站无法访问。最重要的是，Chrome 和 Firefox 都会显示“此证书不受信任”的消息，这很讽刺，因为我这样做只是为了保护网站。

谁能告诉我我哪里出错了或更完整地解释了发生了什么？我正在使用 Apache 2 和 PHP5 开发 Ubuntu 12.10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:02:30.380

您可以在线搜索以获得最佳 SSL 供应商并使用我们在工作中使用的 symantec [http://www.symantec.com/theme.jsp?themeid=compare-ssl-certificates](http://www.symantec.com/theme.jsp?themeid=compare-ssl-certificates)

使用下面的 javascript 将 http 重定向到 https。

```
window.location.replace("http://stackoverflow.com"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:58:12.557

“此证书不受信任”消息是由于您使用的是自行生成的证书。SSL 使用受信任的第三方（证书颁发机构）来确保安全通信。您将需要为您的生产环境从其中一个购买证书。简单的谷歌 SSL 证书，你会得到一大堆选择。

# java - 将数据传递给添加的片段 - IlligalStateException：片段已处于活动状态

> ID：15075280
> 
> 赞同：5
> 
> 时间：2013-02-25T19:52:51.880
> 
> 标签：java, android, android-fragments

我有 2 个片段处于活动状态，并在平板电脑上并排显示。当用户从 FragmentA 中的列表视图中选择一个项目时，我需要将一些数据从 FragmentA 传递到 FragmentB。尝试将数据从活动获取到fragmentB 时出现我的问题。我收到错误消息：IlligalStateException：片段已处于活动状态。

我从这样的活动中传递数据：

```
 @Override
    public void onTrackSelected(String trackId) {

        topBarFragment topBarFragment = (topBarFragment)getSupportFragmentManager().findFragmentById(R.id.topBar_fragment);

        Bundle bundle = new Bundle();
        bundle.putString("trackId", trackId);
        //set Fragmentclass Arguments
        topBarFragment.setArguments(bundle);

        topBarFragment.onTrackSelected();

    } 
```

然后像这样在fragmentB中接收：

```
public void onTrackSelected() {

        String trackId = getArguments().getString("trackId");
        Toast.makeText(getActivity().getApplicationContext(), trackId,Toast.LENGTH_SHORT).show();

    }   
} 
```

日志猫：

```
02-25 02:58:22.190: E/AndroidRuntime(29593): FATAL EXCEPTION: main
02-25 02:58:22.190: E/AndroidRuntime(29593): java.lang.IllegalStateException: Fragment already active
02-25 02:58:22.190: E/AndroidRuntime(29593):    at android.support.v4.app.Fragment.setArguments(Fragment.java:500)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at com.harteg.fragmentstest.ItemListActivity.onTrackSelected(ItemListActivity.java:88)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at com.harteg.fragmentstest.TracksFragment.onListItemClick(TracksFragment.java:136)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at android.support.v4.app.ListFragment$2.onItemClick(ListFragment.java:58)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at android.widget.AbsListView$1.run(AbsListView.java:3423)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at android.os.Handler.handleCallback(Handler.java:725)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at android.os.Looper.loop(Looper.java:137)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at java.lang.reflect.Method.invokeNative(Native Method)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at java.lang.reflect.Method.invoke(Method.java:511)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-25 02:58:22.190: E/AndroidRuntime(29593):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T20:19:28.040

创建片段后，您无法更改传递给片段的参数。您应该做的只是在方法调用中传递数据，如下所示：

```
topBarFragment.onTrackSelected(trackId); 
```

并在您的片段上使用它：

```
public void onTrackSelected(int trackId) {
  Toast.makeText(getActivity().getApplicationContext(), String.valueOf(trackId),Toast.LENGTH_SHORT).show();
} 
```

有关更多信息，请查看[此处](http://developer.android.com/training/basics/fragments/communicating.html)有关如何处理片段之间通信的文档。

# java - java程序在eclipse中运行但不在终端中

> ID：15075285
> 
> 赞同：0
> 
> 时间：2013-02-25T19:53:07.587
> 
> 标签：java, eclipse, exception, netbeans, terminal

我可以毫无问题地在 Eclipse 中运行以下代码：

```
import java.applet.Applet;
import java.awt.Color;
import java.awt.Graphics;

public class Rect extends Applet {
    public void paint(Graphics g) {
        g.setColor(Color.ORANGE);
        g.drawRect(10, 60, 40, 30);
        g.fillRect(10, 60, 40, 30);
    }
} 
```

但是当我尝试通过使用“javac”和“java”命令从终端运行完全相同的代码时，我收到了这个错误：

```
Exception in thread "main" java.lang.NoSuchMethodError: main 
```

我怎样才能在终端完美地运行这个确切的程序&这背后的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:56:37.167

Applet 通常不会从 main 方法运行。如果您选择这样做，您可以从那里创建您的小程序，除此之外，您很可能必须创建一个 html 文件才能从命令终端执行代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T19:57:19.960

创建主函数并调用paint()；或尝试 html 文件方法。

# c# - 如何正确使用导航属性 EF？

> ID：15075286
> 
> 赞同：2
> 
> 时间：2013-02-25T19:53:07.610
> 
> 标签：c#, asp.net, linq, entity-framework, ef-code-first

下面是我首先使用实体​​框架代码设置的 POCO 类。如何查询我的数据库，以便我可以返回特定类别的所有品牌？

示例：您有一个类别列表，然后单击其中一个。它显示了该类别下可用的所有产品品牌。

我不知道我的课程是否设置正确以执行此操作。

```
 public class Product
    {
        [Key,ScaffoldColumn(false)]
        public int ProductID { get; set; }

        public string ProductName { get; set; }

        public int? CategoryID { get; set; }

        public virtual Category Category { get; set; }

        public int? BrandID { get; set; }

        public virtual Brand Brand { get; set; }

    }

   public class Brand
    {

        [ScaffoldColumn(false)]
        public int BrandID { get; set; }

        public string BrandName { get; set; }

    }

    public class Category
    {
        [ScaffoldColumn(false)]
        public int CategoryID { get; set; }

        public string CategoryName { get; set; }

        public virtual ICollection<Product> Products { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:13:03.583

关于什么

```
context.Products.
    Where(p => p.Category.CategoryID == categoryToFind).Select(p => p.Brand); 
```

或者

```
var brands = context.Products.
    Where(p => p.Category.CategoryID == categoryToFind).
    Select(p => p.Brand.BrandName).Distinct().ToList(); 
```

如果您只需要品牌名称。

# ruby-on-rails - Rails 按日期分组并计数

> ID：15075289
> 
> 赞同：0
> 
> 时间：2013-02-25T19:53:10.107
> 
> 标签：ruby-on-rails, ruby, activerecord, group-by

我的表中有以下数据列（使用 Postgres）：

```
occurred_at, name
2012-01-01, Ryan
2012-01-01, Ryan
2012-01-01, Mark
2012-01-01, Ryan
2012-01-01, Paul
2012-01-01, John
2012-02-01, Ryan
2012-02-01, Mark
2012-02-01, Ryan
2012-02-01, Mark
2012-02-01, Paul
2012-02-01, Kevin
2012-02-01, John
2012-03-01, Ryan
2012-03-01, Gary
2012-03-01, Ryan
2012-03-01, Mark
2012-03-01, Paul
2012-03-01, Kevin
2012-01-01, John 
```

我要做的是按日期对名称进行分组并添加计数并将其输出到 json

```
{ date: 2012-01-01, ryan: 3, mark: 1, paul: 1, john: 1 },
{ date: 2012-02-01, ryan: 2, mark: 2, paul: 1, john: 1, kevin: 1 },
{ date: 2012-03-01, ryan: 2, mark: 1, paul: 1, john: 1, kevin: 1 } 
```

到目前为止，我有以下代码：

```
# user controller
 def index
  @users = User.show_data
  render :json
end

# user model

def self.show_data(start = 14.months.ago)
    total_users = users_by_month(start)
    (start.to_date..Date.today).map do |date|
      {
        occurred_at: date,
        total_users[date].name.to_sym: total_users[count],
      }
    end
  end

  def self.users_by_month(start)
    users = where(occurred_at: start.beginning_of_day..Time.zone.now )
    users = users.group("date(occurred_at)")
    users = orders.select("occurred_at, count(name) as user_name")
    users.each_with_object({}) do |user, names|
       names[user.occurred_at.to_date] = user.user_name
    end
  end 
```

大约有 200 万行，因此它需要是一个可扩展的选项。

提前致谢，

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:03:05.130

如果您需要这种更具可扩展性，您可能需要创建一个`DATE`类型列以用于分组并确保其上有索引。

您将使用此列代替`DATE(occurred_at)`您的计算。

请记住，此列应设置为回调处理程序`occurred_at`中的等效日期。`before_save`

# java - 如何在我的 JFrame 中的 JPanel 之间切换

> ID：15075297
> 
> 赞同：1
> 
> 时间：2013-02-25T19:53:30.523
> 
> 标签：java, swing, user-interface, jframe, jpanel

我不知道为什么这不起作用。我已经实现了一个 ItemListener 来检查是否在 SplashScreen 上单击了继续按钮，然后切换到 MainMenu 面板。当我运行代码时，我得到第一个带有背景图像和按钮的面板，然后当我单击按钮时没有任何反应。

这是我的窗口类

```
package edu.ycp.cs.Main;

import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.Container;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;

import javax.swing.JButton;
import javax.swing.JPanel;

public class Window implements ItemListener{
private static final long serialVersionUID = 1L;
JPanel cards; // a panel that uses CardLayout
final static String SPLASHSCREEN = "SplashScreen";
final static String MAINMENU = "MainMenu";

public void addComponentToWindow(Container pane) {
    // Put the JComboBox in a JPanel to get a nicer look.
    JPanel gameWindow = new JPanel(); // use FlowLayout

    // Create the "cards".
    JPanel card1 = new JPanel();
    JButton continueButton = new JButton("Continue");
    continueButton.addItemListener(this);
    card1.add(new SplashScreen());
    card1.add(continueButton);

    JPanel card2 = new JPanel();
    card2.add(new MainMenuScreen());

    cards = new JPanel(new CardLayout());
    cards.add(card1, SPLASHSCREEN);
    cards.add(card2, MAINMENU);

    pane.add(gameWindow, BorderLayout.PAGE_START);
    pane.add(cards, BorderLayout.CENTER);
}

public void itemStateChanged(ItemEvent evt) {
    CardLayout cl = (CardLayout) (cards.getLayout());
    cl.show(cards, (String) evt.getItem());
}
} 
```

这是我的闪屏代码 MainMenu 代码与不同的图像文件完全相同

```
package edu.ycp.cs.Main;

import javax.imageio.ImageIO;
import javax.swing.*;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.File;

class SplashScreen extends JPanel {
private static final long serialVersionUID = 1L;

private BufferedImage background;

public SplashScreen() {
    try {
        background = ImageIO.read(new File("Logo.png"));
    } catch (Exception e) {
        e.printStackTrace();
    }
}

@Override
public Dimension getPreferredSize() {
    return new Dimension(800, 600);
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    if (background != null) {
        int x = (getWidth() - background.getWidth());
        int y = (getHeight() - background.getHeight());
        g.drawImage(background, x, y, this);
    }

    Graphics2D g2d = (Graphics2D) g;
    g2d.setPaint(Color.white);
    g2d.drawString("Please wait...", getWidth() / 2, getHeight() * 3 / 4);
}
} 
```

这是我的主要

```
package edu.ycp.cs.Main;

import javax.swing.JFrame;

public class Main {
    public static void main(String[] args) {
        //Schedule a job for the event dispatch thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                makeGUI();
            }
        });
    }

private static void makeGUI() {
    // Create and set up the window.
    JFrame frame = new JFrame("M&M Arcade");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Create and set up the content pane.
    Window window = new Window();
    window.addComponentToWindow(frame.getContentPane());

    // Display the window.
    frame.pack();
    frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:59:54.613

单击 continue 时将`ItemListener`不起作用`JButton`。改为使用`ActionListener`：

```
continueButton.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {
        CardLayout cl = (CardLayout) (cards.getLayout());
        cl.show(cards, MAINMENU);
   }
}); 
```

还可以考虑使用[CardLayout#next](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html#next%28java.awt.Container%29)进行导航。

# python - 如何覆盖初始化？

> ID：15075298
> 
> 赞同：0
> 
> 时间：2013-02-25T19:53:39.237
> 
> 标签：python

我有：

```
Class A:
    def __init__(self, y):
        blah, blah, blah
    def af(self, h):
        print "this" 
```

我像这样骑过defs：

```
def my_init(self,h):
    gangsta wangsta
def aff(self,h):
    print "that"

A.af = aff # works
A.__init__ = my_init # doesn't work 
```

它不适用于 init....我该怎么做`__init__`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:55:14.797

最简单的方法是子类化：

```
class B(A):
     __init__ = my_init 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:58:29.133

究竟是什么问题？

```
>>> class X:
...   def __init__(self):
...     print "Original Init!"
...
>>> def new_init(self):
...    print "OK New Init"
>>> X()
Original Init!
>>> X.__init__ = new_init
>>> X()
OK New Init 
```

# iphone - 如何在不同的类中创建界面（UIView）并添加到我的屏幕上

> ID：15075299
> 
> 赞同：1
> 
> 时间：2013-02-25T19:53:43.003
> 
> 标签：iphone, ios, view, uiview

我想创建一个具有视图的不同类并在屏幕上调用该类。当我运行应用程序时，视图不会出现。如果我删除该结构并在主文件上创建按钮，它工作正常。当我把它放在不同的班级时，它不起作用。

我的视图.h

```
#import <UIKit/UIKit.h>

@interface viewHome : UIViewController

-(UIView*) myHome;

@end 
```

MyView.m（为测试创建一个按钮）

```
#import "viewHome.h"

@implementation viewHome

-(UIView*) myHome {
    UIView * myScreen = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    myScreen.backgroundColor = [UIColor whiteColor];

    UIButton * myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    myButton.frame = CGRectMake(100,100,100,44);
    [myButton setTitle:@"Login" forState:UIControlStateNormal];

    [myScreen addSubview:myButton];

    return myScreen;
}
@end 
```

视图控制器.m [...]

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    viewHome * fncScreen;
    UIView * homeScreen = [fncScreen myHome];
    [self.view addSubview:homeScreen];

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:08:05.263

我在您的代码中看到的一个明显错误是这一行：

```
viewHome * fncScreen; 
```

好的，这是一个指针声明，但您实际上并没有创建对象。你需要这样的东西：

```
viewHome * fncScreen = [[viewHome alloc] init]; 
```

然后你可以调用这样的初始化对象的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T04:25:52.143

您可以在分配视图 homeScreen 后调用方法 [fncScreen myHome]。像这样 -

```
UIView *homeScreen = [[UIView alloc] init];
homeScreen = [funScreen myHome];
[self.view addSubView: homeScreen];
[homeScreen release]; 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:07:53.110

将一个视图控制器的视图作为子视图添加到另一个视图控制器是一种不好的做法。（除非您使用某些类/方法让您拥有 childViewControllers）。

正是出于这个原因，您的视图不会出现在一种情况下，而是出现在另一种情况下。

尝试`-(UIView*) myHome`在 viewController.m 中添加该方法，然后执行

```
 [self.view addsubview: [self myHome]]; 
```

这是一篇关于嵌套 UIViewControllers 的好帖子：

[像 UIViews 一样在其他 UIViewControllers 中“嵌套”UIViewControllers 是否明智？](https://stackoverflow.com/questions/1141015/is-it-wise-to-nest-uiviewcontrollers-inside-other-uiviewcontrollers-like-you-w)

# ios - AVCaptureVideoPreviewLayer 方向 - 需要横向

> ID：15075300
> 
> 赞同：66
> 
> 时间：2013-02-25T19:53:52.923
> 
> 标签：ios, orientation, avfoundation, avcapturesession, avcapture

我的应用程序仅是横向的。我正在展示这样的 AVCaptureVideoPreviewLayer：

```
self.previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
[self.previewLayer setBackgroundColor:[[UIColor blackColor] CGColor]];
[self.previewLayer setVideoGravity:AVLayerVideoGravityResizeAspect];                    
NSLog(@"previewView: %@", self.previewView);
CALayer *rootLayer = [self.previewView layer];
[rootLayer setMasksToBounds:YES];
[self.previewLayer setFrame:[rootLayer bounds]];
    NSLog(@"previewlayer: %f, %f, %f, %f", self.previewLayer.frame.origin.x, self.previewLayer.frame.origin.y, self.previewLayer.frame.size.width, self.previewLayer.frame.size.height);
[rootLayer addSublayer:self.previewLayer];
[session startRunning]; 
```

self.previewView 的帧为 (0,0,568,320)，这是正确的。self.previewLayer 记录一帧 (0,0,568,320)，理论上是正确的。但是，相机显示在横向屏幕中间显示为纵向矩形，并且相机预览图像的方向错误 90 度。我究竟做错了什么？我需要相机预览层以全屏、横向模式出现，并且图像的方向应该正确。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2016-04-12T13:54:35.083

斯威夫特 5.5，Xcode 13.2

```
private func updatePreviewLayer(layer: AVCaptureConnection, orientation: AVCaptureVideoOrientation) {
    layer.videoOrientation = orientation
    self.previewLayer?.frame = view.bounds
}

override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()

    if let connection = self.previewLayer?.connection {
        let currentDevice = UIDevice.current
        let orientation: UIDeviceOrientation = currentDevice.orientation
        let previewLayerConnection: AVCaptureConnection = connection

        if previewLayerConnection.isVideoOrientationSupported {
            switch orientation {
            case .portrait: self.updatePreviewLayer(layer: previewLayerConnection, orientation: .portrait)
            case .landscapeRight: self.updatePreviewLayer(layer: previewLayerConnection, orientation: .landscapeLeft)
            case .landscapeLeft: self.updatePreviewLayer(layer: previewLayerConnection, orientation: .landscapeRight)
            case .portraitUpsideDown: self.updatePreviewLayer(layer: previewLayerConnection, orientation: .portraitUpsideDown)
            default: self.updatePreviewLayer(layer: previewLayerConnection, orientation: .portrait)
            }
        }
    }
} 
```

斯威夫特 2.2，Xcode 7.3

```
private func updatePreviewLayer(layer: AVCaptureConnection, orientation: AVCaptureVideoOrientation) {

    layer.videoOrientation = orientation

    previewLayer.frame = self.view.bounds

}

override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()

    if let connection =  self.previewLayer?.connection  {

        let currentDevice: UIDevice = UIDevice.currentDevice()

        let orientation: UIDeviceOrientation = currentDevice.orientation

        let previewLayerConnection : AVCaptureConnection = connection

        if (previewLayerConnection.supportsVideoOrientation) {

            switch (orientation) {
            case .Portrait: updatePreviewLayer(previewLayerConnection, orientation: .Portrait)

            case .LandscapeRight: updatePreviewLayer(previewLayerConnection, orientation: .LandscapeLeft)

            case .LandscapeLeft: updatePreviewLayer(previewLayerConnection, orientation: .LandscapeRight)

            case .PortraitUpsideDown: updatePreviewLayer(previewLayerConnection, orientation: .PortraitUpsideDown)

            default: updatePreviewLayer(previewLayerConnection, orientation: .Portrait)

            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2013-02-25T20:33:16.563

默认相机方向是向左横向（左侧一个主页按钮）。你需要在这里做两件事：

1-将 previewLayer 框架更改为：

```
self.previewLayer.frame=self.view.bounds; 
```

您需要将预览层框架设置为屏幕的边界，以便在屏幕旋转时预览层的框架会发生变化（您不能使用根视图的框架，因为它不会随旋转而改变，而是根视图的边界做）。在您的示例中，您将 previewlayer 框架设置为我没有看到的 previewView 属性。

2-您需要随着设备的旋转而旋转预览层连接。在 viewDidAppear 中添加此代码：

```
-(void) viewDidAppear:(BOOL)animated
{
  [super viewDidAppear:YES];

  //Get Preview Layer connection
  AVCaptureConnection *previewLayerConnection=self.previewLayer.connection;

  if ([previewLayerConnection isVideoOrientationSupported])
    [previewLayerConnection setVideoOrientation:[[UIApplication sharedApplication] statusBarOrientation]]; 
} 
```

希望这能解决它。

完全披露：这是一个简化版本，因为您不在乎横向或横向。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-10-11T01:12:51.573

```
override func viewWillTransitionToSize(size: CGSize, withTransitionCoordinator coordinator: UIViewControllerTransitionCoordinator) {
    super.viewWillTransitionToSize(size, withTransitionCoordinator: coordinator)
    if let connection = self.previewLayer?.connection {
        let currentDevice: UIDevice = UIDevice.current
        let orientation: UIDeviceOrientation = currentDevice.orientation
        let previewLayerConnection : AVCaptureConnection = connection

        if (previewLayerConnection.isVideoOrientationSupported) {
            switch (orientation) {
            case .portrait:
                previewLayerConnection.videoOrientation = AVCaptureVideoOrientation.portrait
            case .landscapeRight:
                previewLayerConnection.videoOrientation = AVCaptureVideoOrientation.landscapeRight
            case .landscapeLeft:
                previewLayerConnection.videoOrientation = AVCaptureVideoOrientation.landscapeLeft
            case .portraitUpsideDown:
                previewLayerConnection.videoOrientation = AVCaptureVideoOrientation.portraitUpsideDown

            default:
                previewLayerConnection.videoOrientation = AVCaptureVideoOrientation.portrait
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2017-08-25T05:23:44.833

API 似乎发生了一些变化。`videoOrientation`现在是预览图层属性的一个`connection`属性。此外，无需使用开关。Swift 3.0 的答案：

```
override func viewDidLayoutSubviews() {
    self.configureVideoOrientation()
}

private func configureVideoOrientation() {
    if let previewLayer = self.previewLayer,
        let connection = previewLayer.connection {
        let orientation = UIDevice.current.orientation

        if connection.isVideoOrientationSupported,
            let videoOrientation = AVCaptureVideoOrientation(rawValue: orientation.rawValue) {
            previewLayer.frame = self.view.bounds
            connection.videoOrientation = videoOrientation
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2015-05-13T14:23:29.470

我们不能使用

```
[previewLayerConnection setVideoOrientation:[[UIApplication sharedApplication] statusBarOrientation]]; 
```

因为`UIInterfaceOrientation != AVCaptureVideoOrientation`

但是我们可以只测试值......并且这项工作，使用以下代码。

```
-(void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];

    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    switch (orientation) {
        case UIInterfaceOrientationPortrait:
            [_videoPreviewLayer.connection setVideoOrientation:AVCaptureVideoOrientationPortrait];
            break;
        case UIInterfaceOrientationPortraitUpsideDown:
            [_videoPreviewLayer.connection setVideoOrientation:AVCaptureVideoOrientationPortraitUpsideDown];
            break;
        case UIInterfaceOrientationLandscapeLeft:
            [_videoPreviewLayer.connection setVideoOrientation:AVCaptureVideoOrientationLandscapeLeft];
            break;
        case UIInterfaceOrientationLandscapeRight:
            [_videoPreviewLayer.connection setVideoOrientation:AVCaptureVideoOrientationLandscapeRight];
            break;
    }
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-03-14T01:23:56.940

对于任何在全功能相机预览上苦苦挣扎的人。这是生产代码。当然，缺点是方向改变时会出现滞后。如果有人有更好的解决方案来克服这个问题，请分享

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self initCamera];
}

- (void)initCamera
{
    AVCaptureDeviceInput *captureInput = [AVCaptureDeviceInput deviceInputWithDevice:[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] error:nil];
    if (captureInput) {
        mSession = [[AVCaptureSession alloc] init];
        [mSession addInput:captureInput];
    }
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    [super didRotateFromInterfaceOrientation:fromInterfaceOrientation];
    if ([mSession isRunning]) {
        [mSession stopRunning];
        [mCameraLayer removeFromSuperlayer];

        [self initCamera];

        [self startCamera];
    }
}

- (void)startCamera
{
    [mSession startRunning];
    Settings::getInstance()->setClearColor(Color(0, 0, 0, 0));
    mCameraLayer = [AVCaptureVideoPreviewLayer layerWithSession: mSession];
    [self updateCameraLayer];
    [mCameraView.layer addSublayer:mCameraLayer];
}

- (void)stopCamera
{
    [mSession stopRunning];
    [mCameraLayer removeFromSuperlayer];
    Settings::getInstance()->setDefClearColor();
}

- (void)toggleCamera
{
    mSession.isRunning ? [self stopCamera] : [self startCamera];
    [mGLKView setNeedsDisplay];
}

- (void)updateCameraLayer
{
    mCameraLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
    mCameraLayer.frame = mCameraView.bounds;
    float x = mCameraView.frame.origin.x;
    float y = mCameraView.frame.origin.y;
    float w = mCameraView.frame.size.width;
    float h = mCameraView.frame.size.height;
    CATransform3D transform = CATransform3DIdentity;
    if (UIDeviceOrientationLandscapeLeft == [[UIDevice currentDevice] orientation]) {
        mCameraLayer.frame = CGRectMake(x, y, h, w);
        transform = CATransform3DTranslate(transform, (w - h) / 2, (h - w) / 2, 0);
        transform = CATransform3DRotate(transform, -M_PI/2, 0, 0, 1);
    } else if (UIDeviceOrientationLandscapeRight == [[UIDevice currentDevice] orientation]) {
        mCameraLayer.frame = CGRectMake(x, y, h, w);
        transform = CATransform3DTranslate(transform, (w - h) / 2, (h - w) / 2, 0);
        transform = CATransform3DRotate(transform, M_PI/2, 0, 0, 1);
    } else if (UIDeviceOrientationPortraitUpsideDown == [[UIDevice currentDevice] orientation]) {
        mCameraLayer.frame = mCameraView.bounds;
        transform = CATransform3DMakeRotation(M_PI, 0, 0, 1);
    } else {
        mCameraLayer.frame = mCameraView.bounds;
    }
    mCameraLayer.transform  = transform;
}

    enter code here 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-12-17T22:28:13.460

由于使用上述解决方案存在弃用和转换警告，并且在 iOS7 中设置 videoOrientation 似乎不起作用，因此我在 AVCaptureVideoPreviewLayer 的 getter 中检查方向，如下所示：

```
- (AVCaptureVideoPreviewLayer *) previewLayer
{
    if(!_previewLayer)
    {
        _previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession: self.captureSession];

    [_previewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];

    _previewLayer.frame = self.view.bounds; // Assume you want the preview layer to fill the view.

    [_previewLayer setPosition:CGPointMake(0,0)];

    if (UIDeviceOrientationLandscapeLeft == [[UIDevice currentDevice] orientation]) {
        _previewLayer.transform = CATransform3DMakeRotation(-M_PI/2, 0, 0, 1);
    }
    else if (UIDeviceOrientationLandscapeRight == [[UIDevice currentDevice] orientation])
    {
        _previewLayer.transform = CATransform3DMakeRotation(M_PI/2, 0, 0, 1);
    }
}

return _previewLayer;
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-04-03T13:27:53.070

斯威夫特 5 版本

```
 override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()
    updatePreview()
  }

  func updatePreview() {
    let orientation: AVCaptureVideoOrientation
    switch UIDevice.current.orientation {
      case .portrait:
        orientation = .portrait
      case .landscapeRight:
        orientation = .landscapeLeft
      case .landscapeLeft:
        orientation = .landscapeRight
      case .portraitUpsideDown:
        orientation = .portraitUpsideDown
      default:
        orientation = .portrait
    }
    if previewLayer?.connection?.isVideoOrientationSupported == true {
      previewLayer?.connection?.videoOrientation = orientation
    }
    previewLayer.frame = view.bounds
  } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-11-14T05:11:39.453

适用于 Swift 4、Xcode 9：

```
 override func viewWillTransition(to size: CGSize,
                                   with coordinator: UIViewControllerTransitionCoordinator)
  {
    super.viewWillTransition(to: size, with: coordinator)
    guard
    let conn = self.previewLayer?.connection,
      conn.isVideoOrientationSupported
      else { return }
    let deviceOrientation = UIDevice.current.orientation
    switch deviceOrientation {
    case .portrait: conn.videoOrientation = .portrait
    case .landscapeRight: conn.videoOrientation = .landscapeLeft
    case .landscapeLeft: conn.videoOrientation = .landscapeRight
    case .portraitUpsideDown: conn.videoOrientation = .portraitUpsideDown
    default: conn.videoOrientation = .portrait
    }
  } 
```

这里要注意的一个微妙之处是`UIDeviceOrientation.landscapeRight`与`AVCaptureVideoOrientation.landscapeLeft`.

另一个景观案例同样不匹配。这是故意的，并适应了 UIKit 和 AVFoundation 之间不幸的不匹配。如果您通过匹配名称来匹配案例，它将不起作用，并且您的视频将在横向配置中颠倒。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-08-09T09:50:29.273

适用于 Swift 4.2 - Xcode 10.0 - iOS 12.0 的选定答案：

```
var videoPreviewLayer: AVCaptureVideoPreviewLayer?

override func viewDidLayoutSubviews() {
  super.viewDidLayoutSubviews()
  if let previewLayerConnection =  self.videoPreviewLayer?.connection, previewLayerConnection.isVideoOrientationSupported {
    updatePreviewLayer(layer: previewLayerConnection, orientation: UIApplication.shared.statusBarOrientation.videoOrientation)
  }
}

private func updatePreviewLayer(layer: AVCaptureConnection, orientation: AVCaptureVideoOrientation) {
  layer.videoOrientation = orientation
  videoPreviewLayer?.frame = self.view.bounds
} 
```

不要忘记从 UIInterfaceOrientation 到 AVCaptureVideoOrientation 的映射

```
extension UIInterfaceOrientation {

  public var videoOrientation: AVCaptureVideoOrientation {
    switch self {
    case .portrait:
      return AVCaptureVideoOrientation.portrait
    case .landscapeRight:
      return AVCaptureVideoOrientation.landscapeRight
    case .landscapeLeft:
      return AVCaptureVideoOrientation.landscapeLeft
    case .portraitUpsideDown:
      return AVCaptureVideoOrientation.portraitUpsideDown
    default:
      return AVCaptureVideoOrientation.portrait
    }
  }

} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-09-10T07:19:56.843

*`UIDeviceOrientation`正确的从to映射`AVCaptureVideoOrientation`是必要的。*

如果您的应用支持`device rotation`,`resizing preview.frame`也是必需的，这`func`应该从`viewDidLayoutSubviews()`和调用`viewWillTransition()`。

```
private func configureVideoOrientation() {
    if let preview = self.previewLayer,
        let connection = preview.connection {
        let orientation = UIDevice.current.orientation

        if connection.isVideoOrientationSupported {
            var videoOrientation: AVCaptureVideoOrientation
            switch orientation {
            case .portrait:
                videoOrientation = .portrait
            case .portraitUpsideDown:
                videoOrientation = .portraitUpsideDown
            case .landscapeLeft:
                videoOrientation = .landscapeRight
            case .landscapeRight:
                videoOrientation = .landscapeLeft
            default:
                videoOrientation = .portrait
            }
            preview.frame = self.view.bounds
            connection.videoOrientation = videoOrientation
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-09-10T16:03:20.573

嘿，伙计们，感谢您对此的所有答案和反馈，我在开发 swift 应用程序时遇到了这个问题。您可以使用以下代码实现相机随设备旋转：

```
override func shouldAutorotate() -> Bool {
        if your cameraController.previewLayer.connection != nil {
            var currentDevice: UIDevice = UIDevice.currentDevice()
            var orientation: UIDeviceOrientation = currentDevice.orientation

            var previewLayerConnection : AVCaptureConnection = your cameraController.previewLayer.connection

            if (previewLayerConnection.supportsVideoOrientation)
            {
                switch (orientation)
                {
                case .Portrait:
                    previewLayerConnection.videoOrientation = AVCaptureVideoOrientation.Portrait
                    break
                case .LandscapeRight:
                    previewLayerConnection.videoOrientation = AVCaptureVideoOrientation.LandscapeLeft
                    break
                case .LandscapeLeft:
                    previewLayerConnection.videoOrientation = AVCaptureVideoOrientation.LandscapeRight
                    break
                default:
                    previewLayerConnection.videoOrientation = AVCaptureVideoOrientation.Portrait
                    break
                }
            }

        }
        return true
    } 
```

希望这可以帮助！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-10-01T07:31:47.210

首先我们需要创建 AVCaptureVideoPreviewLayer 和：

1.  设置它的videoGravity（在我的例子中，我使用一个小视图来获取视频输出）。
2.  设置框架。

    ```
    [_videoPreviewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];
    [_videoPreviewLayer setFrame:_viewPreview.layer.bounds]; 
    ```

3.  最初设置方向

    ```
    if (_videoPreviewLayer.connection.supportsVideoOrientation) {
            _videoPreviewLayer.connection.videoOrientation = [self interfaceOrientationToVideoOrientation:[UIApplication sharedApplication].statusBarOrientation];
        }
    ```

4.  使用简单的 switch case 为每个 case 设置方向

    ```
    -(AVCaptureVideoOrientation)interfaceOrientationToVideoOrientation:

    ```
    (UIInterfaceOrientation)orientation {

        switch (orientation) {
            case UIInterfaceOrientationPortrait:
                return AVCaptureVideoOrientationPortrait;
            case UIInterfaceOrientationPortraitUpsideDown:
                return AVCaptureVideoOrientationPortraitUpsideDown;
            case UIInterfaceOrientationLandscapeLeft:
                return AVCaptureVideoOrientationLandscapeLeft ;
            case UIInterfaceOrientationLandscapeRight:
                return AVCaptureVideoOrientationLandscapeRight;
            default:
                break;
        }
        NSLog(@"Warning - Didn't recognise interface orientation (%d)",orientation);
        return AVCaptureVideoOrientationPortrait; 
    ```

    } 
    ```

5.  由于设备同时支持landscapeLeft 和landscapeRight，因此使用调用旋转的委托：

    ```
    - (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    if (_videoPreviewLayer.connection.supportsVideoOrientation) {
        _videoPreviewLayer.connection.videoOrientation = [self interfaceOrientationToVideoOrientation:toInterfaceOrientation];
     }
    } 
    ```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-08-05T10:18:10.117

我也面临同样的问题这是为了修复我的相机方向

```
override func shouldAutorotate() -> Bool {
        return false
    }

override func preferredInterfaceOrientationForPresentation() -> UIInterfaceOrientation {
        return UIInterfaceOrientation.LandscapeLeft
    }

override func supportedInterfaceOrientations() -> UIInterfaceOrientationMask {
        return UIInterfaceOrientationMask.LandscapeLeft
    } 
```

固定相机

```
let previewLayer: AVCaptureVideoPreviewLayer = AVCaptureVideoPreviewLayer(session: self.avCaptureSession)    
previewLayer.frame = self.view.layer.frame
previewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-07-06T22:05:47.710

[Maselko 的回答](https://stackoverflow.com/a/36575423/38971)几乎对我有用，除了如果状态栏方向翻转，则相机输出显示颠倒。我已经通过在状态栏翻转时重新调用 Maselko 的逻辑来解决这个问题。

这是我修改后的 Maselko 解决方案（在 ios12/swift4 上测试）：

```
override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()
    setCameraOrientation()
}

override func viewWillTransition(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator) {
    super.viewWillTransition(to: size, with: coordinator)
    setCameraOrientation()
}

@objc func setCameraOrientation() {
    if let connection =  self.previewLayer?.connection  {
        let currentDevice: UIDevice = UIDevice.current
        let orientation: UIDeviceOrientation = currentDevice.orientation
        let previewLayerConnection : AVCaptureConnection = connection
        if previewLayerConnection.isVideoOrientationSupported {
            let o: AVCaptureVideoOrientation
            switch (orientation) {
            case .portrait: o = .portrait
            case .landscapeRight: o = .landscapeLeft
            case .landscapeLeft: o = .landscapeRight
            case .portraitUpsideDown: o = .portraitUpsideDown
            default: o = .portrait
            }

            previewLayerConnection.videoOrientation = o
            previewLayer!.frame = self.view.bounds
        }
    }
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-04-11T07:52:32.933

Maselko答案的改进版本

效果很好！

```
override func viewDidLayoutSubviews() {
  super.viewDidLayoutSubviews()
  if let connection =  previewView.connection  {
    if connection.isVideoOrientationSupported {
      let videoOrientation = AVCaptureVideoOrientation.init(rawValue: UIApplication.shared.statusBarOrientation.rawValue)!
      connection.videoOrientation = videoOrientation
      previewView.frame = self.view.bounds
    }
  }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-11-06T20:44:32.793

它在 iOS 8 到 11.1 中为我工作而没有任何问题的唯一方法是这样做，我应该提到，在我的情况下，我只在横向模式下加载了我的应用程序，但它应该在所有方向上工作。（顺便说一句，你可以覆盖通过imageview手动相机或任何你想要的东西很容易）

```
@interface ViewController (){
    AVCaptureVideoPreviewLayer * previewLayer;
    AVCaptureSession* session;
}
@property (weak, nonatomic) IBOutlet UIView *cameraPreviewView;

-(void)viewDidLoad{
    AVCaptureDeviceInput *captureInput = [AVCaptureDeviceInput deviceInputWithDevice:[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] error:nil];
    if (captureInput) {
        session = [[AVCaptureSession alloc] init];
        [session addInput:captureInput];
    }
    previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
    [previewLayer setBackgroundColor:[[UIColor blackColor] CGColor]];
    [previewLayer setVideoGravity:AVLayerVideoGravityResizeAspect];

    CALayer *rootLayer = [self.cameraPreviewView layer];
    [rootLayer setMasksToBounds:YES];
    [previewLayer setFrame:[self.view bounds]];
    [rootLayer addSublayer:previewLayer];
    [session startRunning];

    //Orientation Code is in viewDidLayoutSubviews method
}
-(void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];

    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    switch (orientation) {
        case UIInterfaceOrientationPortrait:
            [previewLayer.connection setVideoOrientation:AVCaptureVideoOrientationPortrait];
            break;
        case UIInterfaceOrientationPortraitUpsideDown:
            [previewLayer.connection setVideoOrientation:AVCaptureVideoOrientationPortraitUpsideDown];
            break;
        case UIInterfaceOrientationLandscapeLeft:
            [previewLayer.connection setVideoOrientation:AVCaptureVideoOrientationLandscapeLeft];
            break;
        case UIInterfaceOrientationLandscapeRight:
            [previewLayer.connection setVideoOrientation:AVCaptureVideoOrientationLandscapeRight];
            break;
        default:break;
    }
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-06-28T05:49:22.930

@Maselko 的答案是正确的，但有一件事：您应该使用`UIApplication.shared.statusBarOrientation`而不是`UIDevice.current.orientation`，因为设备方向是您的设备**物理**定位的方式。当您的设备处于横向但您的 UI 不支持该方向时，它会中断（例如，当我制作仅限横向的相机应用程序并在设备处于纵向位置时启动视图时）。

```
private func updatePreviewLayer(layer: AVCaptureConnection, orientation: AVCaptureVideoOrientation) {

    layer.videoOrientation = orientation

    previewLayer.frame = self.view.bounds

}

override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()

    if let connection =  self.previewLayer?.connection  {

        let currentDevice: UIDevice = UIDevice.current

        let orientation = UIApplication.shared.statusBarOrientation

        let previewLayerConnection : AVCaptureConnection = connection

        if previewLayerConnection.isVideoOrientationSupported {

            switch (orientation) {
            case .portrait: updatePreviewLayer(layer: previewLayerConnection, orientation: .portrait)

                break

            case .landscapeRight: updatePreviewLayer(layer: previewLayerConnection, orientation: .landscapeLeft)

                break

            case .landscapeLeft: updatePreviewLayer(layer: previewLayerConnection, orientation: .landscapeRight)

                break

            case .portraitUpsideDown: updatePreviewLayer(layer: previewLayerConnection, orientation: .portraitUpsideDown)

                break

            default: updatePreviewLayer(layer: previewLayerConnection, orientation: .portrait)

                break
            }
        }
    }
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-08-09T17:26:58.287

这是我在 Swift 4 中使用的解决方案。

它很短，对我来说效果很好。

```
open override func viewWillTransition(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator) {
    super.viewWillTransition(to: size, with: coordinator)

    let videoLayer = self.previewLayer
    coordinator.animate(alongsideTransition: { (context: UIViewControllerTransitionCoordinatorContext) in

        guard let connection = videoLayer?.connection, connection.isVideoOrientationSupported, let orientation = AVCaptureVideoOrientation(rawValue: UIApplication.shared.statusBarOrientation.rawValue) else {
            return
        }

        connection.videoOrientation = orientation
        videoLayer?.frame = self.view.bounds

    }) { (context: UIViewControllerTransitionCoordinatorContext) in
        // handle any completion logic here...
    }
} 
```

# ajax - mvc3 ajax 预填充文本框

> ID：15075307
> 
> 赞同：0
> 
> 时间：2013-02-25T19:54:08.597
> 
> 标签：ajax, asp.net-mvc-3, data-binding

我有一个控制器，它使用**ajax.actionlink**从另一个控制器获取部分视图。我的问题是如何使用该**ajax 部分视图的结果来填充我的主要操作中的文本框**。

这是**我正在处理的视图**对应于这个视图

```
@Ajax.ActionLink("Find location", "getzipcode",
new AjaxOptions
{
    UpdateTargetId = "ajax_insert",
    InsertionMode = InsertionMode.Replace,
    HttpMethod = "GET"
});

<div id="ajax_insert">

</div>

@using (Html.BeginForm("create", "service", FormMethod.Post))
{

    // fill Ajax code in this EditFor Result
    @Html.EditorFor(model => model.zipcode)

} 
```

正如您在上面看到的，ajax 只是请求一个名为**getzipcode**的局部视图，它只是链接到这个动作

```
public PartialViewResult getzipcode()
{
    var zipco = (from s in db.servicers where s.zipcode == 32839 select s);

    return PartialView("_review", zipco);
} 
```

ajax 工作正常，我只是在将邮政编码插入 EditFor 框中时遇到了困难，我尝试了 **@Html.EditorFor(model => model.zipcode,@ajax_insert)**但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:23:02.493

*您可以使用`onSuccess`回调函数*

```
 @Ajax.ActionLink("Find location", "getzipcode",
    new AjaxOptions
    {
        UpdateTargetId = "ajax_insert",
        InsertionMode = InsertionMode.Replace,
        HttpMethod = "GET",
        OnSuccess = "fillTextBox"
    });

    <script type="text/javascript>
     function fillTextBox(){
      //Use jquery to fill your text box
     }
    </script> 
```

# c++ - 使用已在其他地方 std::move 的变量时出现错误或至少是警告

> ID：15075311
> 
> 赞同：9
> 
> 时间：2013-02-25T19:54:18.403
> 
> 标签：c++, c++11, move-semantics

这：

```
void foo(int &&r) {
  std::cout << r << std::endl;
}

int main() {
  int i = 2;
  foo(std::move(i));
  i = 3; //no warning. any way to get some warnings here?
  return 0;
} 
```

如果我在移动变量后不小心使用了变量，有没有办法告诉编译器给我一个错误（或警告）？我想这会很方便。很多时候，我发现自己像那样将变量移动到其他地方，但是我必须手动非常小心，以后不要使用它们。现在这还没有造成任何问题，但谁知道呢……最好是安全的！

也许存在一些预处理器技巧（或相当广泛可用的编译器扩展）来做这些事情？

* * *

更现实的例子：

```
struct HugeStorage {
  std::vector<double> m_vec;
  HugeStorage(std::vector<double> vec) : m_vec(std::move(vec)) { }
};

struct SmallStorage {
  std::vector<double> m_vec;
  SmallStorage(std::vector<double> vec) : m_vec(std::move(vec)) { }
};

std::vector<double> vec_from_data_source() {
  return std::vector<double>(); //only example!!
}

int main() {
  std::vector<double> vec = vec_from_data_source();
  if (vec.size() > 10000)
  {
    HugeStorage storage(std::move(vec));
    //do some things, but I gotta be careful I don't do anything to vec
  }
  else
  {
    SmallStorage storage(std::move(vec));
    //do some things, but I gotta be careful I don't do anything to vec
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T20:08:33.130

> 如果我在移动变量后不小心使用了变量，有没有办法告诉编译器给我一个错误（或警告）？

答案是**“不，没有办法”**（至少据我所知，目前没有可用的编译器提供这样的选项，并且有充分的理由 - 见下文）。

即使这完全有可能，你为什么会期望在这种情况下给出警告，甚至更糟的是一个错误？首先，从整数移动与复制它没有什么不同。

其次，对于*大多数*类型，分配该类型的移动对象是完全合法的操作；这对于基本类型（如 ）总是如此，`int`对于 绝对是正确的`std::vector`，尽管对于其他类型可能不是这样。

一般来说，分配一个移动的对象是否合法取决于该类型的移动操作的特定后置条件和赋值运算符的先决条件（标准库类型的赋值运算符没有先决条件左边的论点）。这是编译器在一般情况下无法检查的东西。

因此，如果您要：

1.  从移动赋值或移动构造函数将移动的对象置于*未指定状态*的对象移动（对于 的情况就是这种情况`std::vector`），然后；
2.  在该对象的状态上调用任何具有*先决条件*的函数（分配给 的情况**并非**`std::vector`如此）；

那肯定会很糟糕。另一方面，编译器没有办法对您的程序执行*语义分析*并确定是否是这种情况：

```
A x, y;
...
if (complicatedCondition())
{
    y = move(x);
} 

foo(x); // Did I move from x? And if so, is it safe to call foo()? 
```

此外，不要忘记 C++ 的理念是为您提供强大的功能和（最常见的）设计指南，但如果您真的想这样做，“让您大吃一惊”。

*你可以在 C++ 中做一些*危险的，甚至是毫无意义的事情（如果你尝试两次指向同一个指针，你的编译器会给你一个警告还是一个错误`delete`？），但是语言本身不会阻止你这样做，假设你真的，真的知道你在做什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T20:34:08.383

```
//do some things, but I gotta be careful I don't do anything to vec 
```

澄清：您需要注意不要做任何`vec`需要先决条件的事情。你**可以**做任何**不需要**`vec`任何先决条件的事情。例如，您可以分配一个新值。你可以打电话。你可以打电话。但是不要调用，因为该成员函数有一个先决条件。**`vec``vec.clear()``vec.size()``vec.pop_back()`**

# python - Django - 创建模型的新实例

> ID：15075315
> 
> 赞同：1
> 
> 时间：2013-02-25T19:54:39.970
> 
> 标签：python, django, django-models, python-2.7

**答案**

正如 Sergey 指出的那样，**类 Model(**kwargs)**是无效的，并且是 Django 文档中的错字。
“类”部分来自他们编写时使用的标记。

因此，它们在 Django 文档中的实际含义是：

> 创建对象
> 
> 要创建模型的新实例，只需像任何其他 Python 类一样实例化它：
> 
> **型号(**kwargs)**
> 
> 关键字参数只是您在模型上定义的字段的名称。请注意，实例化模型绝不会触及您的数据库；为此，您需要保存（）。

 **我在阅读 [有关模型实例的 Django 文档时发现了以下](http://docs.djangoproject.com/en/1.4/ref/models/instances/)**原始问题**：** 

 **> 创建对象
> 
> 要创建模型的新实例，只需像任何其他 Python 类一样实例化它：
> 
> 类模型（**kwargs）
> 
> 关键字参数只是您在模型上定义的字段的名称。请注意，实例化模型绝不会触及您的数据库；为此，您需要保存（）。

这两个代码有什么区别？

```
class Model(**kwargs)
new_model = Model(**kwargs) 
```

我知道第二个使用 kwargs 创建了 Model 类的新实例。
第一个和它不一样吗？对我来说，它似乎重新定义了 Model 类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T20:08:20.377

`class Model(**kwargs)`不是[有效的 Python 语法](http://docs.python.org/2/tutorial/classes.html#inheritance)，后者看起来像

```
class Model(SomeBaseClass):
    pass 
```

从格式来看（该行看起来像一个副标题），这一定是 Django 文档中的错误。

如果您查看[页面的 Sphinx 源代码](https://github.com/django/django/blob/master/docs/ref/models/instances.txt)，您会发现“类”实际上是 Sphinx 标记的一部分。他们的意思是

> 要创建模型的新实例，只需像任何其他 Python 类一样实例化它：
> 
> ```
> Model(**kwargs) 
> ```
> 
> 关键字参数只是您在模型上定义的字段的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:58:51.277

第一行定义了一个类。第二行定义了一个类的实例。**

# java - 如何格式化时间以 hh:mm 格式出现在 FormattedJTextField 中，之后没有 AM 或 PM？

> ID：15075327
> 
> 赞同：0
> 
> 时间：2013-02-25T19:55:29.757
> 
> 标签：java, jformattedtextfield

如何格式化时间以出现在[JFormattedTextField](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html)格式`hh:mm`中，在它之后没有 AM 或 PM，并且在单个数字小时（例如“09:30”）的情况下为 0？提前致谢。我曾尝试过`DateFormat`这样做，但它添加了上午/下午。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:04:21.677

您可以使用 SimpleDateFormat 对象：

```
 SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm");
    dateFormat.format(yourDate); 
```

在日期格式构造函数`HH`中指的是从 0 到 23 的两位数小时，`mm`指的是分钟。

# linux - JavaFXSceneBuilder1.1 未在 Ubuntu Linux 中启动

> ID：15075329
> 
> 赞同：1
> 
> 时间：2013-02-25T19:55:45.293
> 
> 标签：linux, javafx-2, netbeans-7

JavaFXSceneBuilder1.1 无法在我的 Ubuntu Linux 机器上启动。

用 strace 运行它会给出

```
[...]
_llseek(3, 58278358, [58278358], SEEK_SET) = 0
read(3, "PK\3\4\n\0\0\0\0\0j\26AB\327\343\f!\242\0\0\0\242\0\0\0\36\0\0\0", 30) = 30
_llseek(3, 58278418, [58278418], SEEK_SET) = 0
read(3, "\312\376\272\276\0\0\0003\0\t\1\0\nSourceFile\1\0\tinterr"..., 162) = 162
gettimeofday({1361821505, 463824}, NULL) = 0
gettimeofday({1361821505, 463860}, NULL) = 0
gettimeofday({1361821505, 463896}, NULL) = 0
gettimeofday({1361821505, 463932}, NULL) = 0
gettimeofday({1361821505, 463968}, NULL) = 0
gettimeofday({1361821505, 464003}, NULL) = 0
gettimeofday({1361821505, 464068}, NULL) = 0
gettimeofday({1361821505, 464106}, NULL) = 0
gettimeofday({1361821505, 464142}, NULL) = 0
gettimeofday({1361821505, 464183}, NULL) = 0
gettimeofday({1361821505, 464222}, NULL) = 0
gettimeofday({1361821505, 464309}, NULL) = 0
gettimeofday({1361821505, 464346}, NULL) = 0
futex(0x835beac, FUTEX_WAIT_PRIVATE, 1, NULL 
```

然后它挂起。

奇怪的是，当我开始时

```
sudo ./JavaFXSceneBuilder1.1 
```

一切似乎都没有问题。

Linux 是 3.2.0-38-generic-pae #61-Ubuntu SMP Tue Feb 19 12:39:51 UTC 2013 i686 i686 i386 GNU/Linux

SceneBuilder 是 javafx_scenebuilder-1_1-beta-b21-linux-i586-14_feb_2013

sudo 对我来说不是一个选项，不仅因为它没有与 Netbeans 7.3 集成，而且出于安全原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T15:59:09.610

如果您是视力障碍者，您不会喜欢我的回答：

为了使其正确渲染，我不得不禁用“辅助技术”。

在 GNOME 2 中，系统-> 首选项-> 辅助技术-> 启用辅助技术设置为禁用和注销。

# github - 在“github pages”站点中查看 .rst

> ID：15075332
> 
> 赞同：9
> 
> 时间：2013-02-25T19:56:02.537
> 
> 标签：github, restructuredtext, github-pages

我正在将一个开源项目的文档移至 Github Pages，但我一直在移动 .rst 文件。

我们有一个 ReadMe.rst，您可以[在此处](https://github.com/pi3d/pi3d.github.com)的代码中看到它。我想从我们的[主文档页面](http://pi3d.github.com)链接到该页面，但 GitHub 不会将 .rst 呈现为 HTML，因此当您单击[链接](http://pi3d.github.com/ReadMe.rst)时浏览器只会下载 .rst 文件的文本）。

当然有工具可以将 .rst 呈现为 HTML，但这是一个重要的额外步骤。我们开始使用 .rst 的全部原因完全是因为 GitHub 会在代码页中自动呈现它。你会认为有一些方法可以让 Github Pages 发生这种自动渲染......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-03T20:00:52.313

GitHub Pages 不支持 .rst/RestructuredText。它只支持 Markdown 和 Textile 转换为 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T13:13:33.747

GitHub Pages 不直接支持 reStructuredText，但 Anne Gentle 创建了一个很好的演示，说明如何通过相当简单的步骤获得一些东西：

[https://github.com/annegentle/create-demo](https://github.com/annegentle/create-demo)

查看 github 工作流程，了解如何在每次提交时从 reStructuredText 源自动生成所需的 HTML 尤其有用。

# extjs - 在 extjs 中使用复选框显示动态数据

> ID：15075333
> 
> 赞同：0
> 
> 时间：2013-02-25T19:56:05.670
> 
> 标签：extjs

我有一个组合框，用户在其中选择一个值，该值被传递到复选框数据存储，并从数据库（oracle）动态填充。我尝试了下面的代码。似乎选定的参数正在传递给复选框，我可以看到控制台上正在填充数据。我只是无法在表单上呈现复选框。我得到的错误是： typeError: this.items[0] is undefined。

```
 testArray = new Array();
    var testStore = new Ext.data.JsonStore({
        proxy:new Ext.data.HttpProxy({
        method:'GET',
        prettyUrls:false,
        url:'kiu.htm',
        listeners:{
            'loadexception':{
            fn:test.form.data.loadException
            }
        }
        }),
        fields:["id", "display"],
        reader:new Ext.data.JsonReader({
        id:'id',
        root:'results',
        totalProperty:'totalCount',
        fields:new Ext.data.Record.create([
            {name:'id',type:'int'},
            {name:'display',type:'string'}
        ])
        }),
        listeners:{      
        load: function(t, records, options, success) {
            for(var i=0; i<records.length; i++) {
              testArray.push({name:records[i].data.id, boxLabel: records[i].data.display});
              alert(testArray[i].id);
            }
        }
        }
    });

    {
                         xtype:'combo',
                         id:'comboid3',                         
                         store:combostore,
                         displayField:'display',
                         valueField:'id',
                         tabIndex:1,
                         loadingText:'Loading combo...',
                         listeners :{
                                   select:function(event){
                                         testStore.baseParams = {
                                                "comboid":Ext.getCmp('comboid3').getValue()
                                            };                                        

                                         testStore.load();

                                    }
                         }

                   },
                   {

                                xtype:'checkboxgroup',
                                                         fieldLabel:'Check',                             
                               items:testArray
           } 
```

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:13:37.977

指定 Ext JS 版本总是有帮助的。看来这必须是 2.x 或 3.x 而不是当前版本。

问题在于时间，加载调用是异步的，因此通过尝试以这种方式使用 testArray，您可能会在它解析复选框组的 items 属性时引用一个空数组。您有几个选择...一个是获取对复选框组的引用并将项目添加到其中，另一个是在调用返回之前根本不将复选框组放入表单中，然后添加它填充的项目数组。无论哪种情况，您都可能需要从加载处理程序函数中查找对 FormPanel 或 CheckboxGroup 的组件引用，并调用“add”方法来添加子项。

# prolog - 在 Prolog 中只匹配一次数据库项目？

> ID：15075334
> 
> 赞同：0
> 
> 时间：2013-02-25T19:56:08.200
> 
> 标签：prolog

假设 Prolog 中有一个简单的人员数据库

```
person(john).
person(mary).    
person(john).
person(susan). 
```

我需要完全匹配一次：

```
john-mary, john-john, john-susan, mary-john, mary-susan, john-susan 
```

我试着想出这样的事情：

```
match:- person(X),!,person(Y),   write(X),write(-), write(Y),nl.
run:- person(X), match(X), fail. 
```

但是它匹配了很多次，并且匹配了一个人与他/她自己，这不应该。

基本上，我需要的是遍历所有 X 并使 Prolog 看起来严格“低于”Y。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:27:13.713

一个快速的解决方案是给你的人编号：

```
person(1, john).
person(2, mary).
person(3, john).
person(4, susan). 
```

然后你可以像这样匹配人：

```
match(X-Y) :-
  person(I, X), person(J, Y), I < J. 
```

由于您有两个`john`条目，我不确定任何其他解决方案是否有效。通常你可以使用伪造的排序，`@>/2`但这需要你的原子是唯一的，因为它们不是，它会阻止`john-john`解决方案。

**编辑**：由于我们愿意使用`findall/3`具体化人员数据库，我们可以将其视为列表问题并找到功能解决方案。让我们获取列表中的所有组合：

```
combinations([X|Rest], X, Y) :- member(Y, Rest).
combinations([_|Rest], X, Y) :- combinations(Rest, X, Y). 
```

有了这个谓词，我们可以找到解决方案：

```
combined_folks(People) :-
  findall(P, person(P), Persons),
  findall(X-Y, combinations(Persons, X, Y), People).

?- combined_folks(X).
X = [john-mary, john-john, john-susan, mary-john, mary-susan, john-susan]. 
```

结果发现真的很干净！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:59:13.057

```
person(john).
person(mary).    
person(john).
person(susan).    

match :- findall(P,person(P),People), match_all(People).

match_all([_]) :- !.
match_all([P|People]) :- match_2(P,People), match_all(People).

match_2(_,[]) :- !.
match_2(P1,[P2|People]) :- format('~a-~a~n',[P1,P2]), match_2(P1,People).

?- match. 
```

# iis - 主目录 iis 中的 URL 重写查询

> ID：15075338
> 
> 赞同：0
> 
> 时间：2013-02-25T19:56:21.193
> 
> 标签：iis, iis-7, url-rewriting, web-config, rewrite

我正在尝试重写 iis7 url 以处理主目录中的查询。最终目标是让它附加`index.php`到查询字符串的开头。我尝试的一切都以 500 错误结束。我究竟做错了什么？

```
<rule name="post preview fix" patternSyntax="ECMAScript">
    <match url="^\?p=([0-9]+)&preview=true"  />
    <action type="Rewrite" url="index.php?p={R:1}&preview=true"  />
</rule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:34:42.683

由于您希望将规则基于查询字符串，因此您必须使用条件。
这样的事情应该做：

```
<rule name="post preview fix" stopProcessing="true">
    <match url="^index.php$" negate="true" />
    <conditions>
        <add input="{QUERY_STRING}" pattern="^p=([0-9]+)&preview=true" />
    </conditions>
    <action type="Rewrite" url="index.php" />
</rule> 
```

如果请求的页面不是`index.php`并且查询字符串匹配`^p=([0-9]+)&preview=true`，则触发 rwrite。
该`appendQueryString`选项默认设置为 true，因此无需设置。

# ios - UICollectionView + NSFetchedResultsController + performBatchUpdates

> ID：15075343
> 
> 赞同：4
> 
> 时间：2013-02-25T19:56:38.243
> 
> 标签：ios, nsfetchedresultscontroller, uicollectionview

我一直在[这里](https://github.com/AshFurrow/UICollectionView-NSFetchedResultsController)测试建议的解决方案，以`UICollectionView`从`NSFetcherResultsController`. 但我有一些问题。

My`UICollectionView`显示文件夹和文档的层次结构（按名称排序）。点击一个文档打开它并点击一个文件夹用`UICollectionView`（向下钻取）推动一个新的控制器。

用户可以复制/剪切/粘贴文档和文件夹。

问题示例：

```
Root
|
---"B"
    |---"A" 
```

如果我将“A”从“B”复制到 Root，“A”将插入 Root，并且“B”会更新（elmentsCount--）。问题是“B”正在获取用于插入的动画，而“A”正在获取用于更新的动画。

我在用于执行批量更新的块中放置了两条日志消息：

```
case NSFetchedResultsChangeInsert:
    NSLog(@"INSERTING at pos : %d", ((NSIndexPath *)obj).item);
    [self.libraryCollectionBrowser insertItemsAtIndexPaths:@[obj]];
    break;
 case NSFetchedResultsChangeUpdate:
    NSLog(@"UPDATING at pos : %d", ((NSIndexPath *)obj).item);
    [self.libraryCollectionBrowser reloadItemsAtIndexPaths:@[obj]];
    break; 
```

日志是：

```
INSERTING at pos : 0
UPDATING at pos : 0 
```

这样做的正确方法是什么？

# c# - 我的 Winforms C# 项目设计器被我的 C++/CLI 项目消灭了

> ID：15075344
> 
> 赞同：3
> 
> 时间：2013-02-25T19:56:38.230
> 
> 标签：c#, winforms, visual-studio-2010, c++-cli, windows-forms-designer

在过去的几年里，我有很多使用 C++/CLI 的经验，如果我知道一件事，那就是混合模式 DLL 不利于设计。

我有一个 CSPROJECT 项目，它依赖于 CPPPROJECT（使用项目参考，copylocal=true，versionspecific=false，copylocalsattelitedpeendances=false）。

每当我尝试从 CSPROJECT 打开表单或用户控件时，我都会得到：`system.exception`被抛出。

我试过 fuslogvw，它不会将任何故障绑定到磁盘。我尝试打开第二个 devenv 进行调试，但它只是在设计器在其调用堆栈中显示的同一位置中断。这是我的 CPPPROJECT 参考的 csproj 片段：

```
<ProjectReference Include="..\dfResultsStructures\dfResultsStructures.csproj">
  <Project>{D93C5625-0EB1-4645-95C8-F389758521EE}</Project>
  <Name>dfResultsStructures</Name>
  <Private>False</Private>
  <SpecificVersion>False</SpecificVersion>
</ProjectReference> 
```

下面是调用堆栈

```
 Exception of type 'System.Exception' was thrown.    

Instances of this error (1)  

1\.   Hide Call Stack 

at VSLangProj.Reference.get_Path()
at Microsoft.VisualStudio.Design.VSTypeResolutionService.AddProjectDependencies(Project project)
at Microsoft.VisualStudio.Design.VSTypeResolutionService.AssemblyEntry.get_Assembly()
at Microsoft.VisualStudio.Design.VSTypeResolutionService.AssemblyEntry.Search(String fullName, String typeName, Boolean ignoreTypeCase, Boolean allowPrivate, Assembly& assembly, String description)
at Microsoft.VisualStudio.Design.VSTypeResolutionService.AssemblyEntry.Search(String fullName, String typeName, Boolean ignoreTypeCase, Assembly& assembly, String description)
at Microsoft.VisualStudio.Design.VSTypeResolutionService.SearchProjectEntries(AssemblyName assemblyName, String typeName, Boolean ignoreTypeCase, Assembly& assembly)
at Microsoft.VisualStudio.Design.VSTypeResolutionService.SearchEntries(AssemblyName assemblyName, String typeName, Boolean ignoreCase, Assembly& assembly, ReferenceType refType)
at Microsoft.VisualStudio.Design.VSTypeResolutionService.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase, ReferenceType refType)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.AggregateTypeResolutionService.GetType(String name, Boolean throwOnError, Boolean ignoreCase)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.AggregateTypeResolutionService.GetType(String name)
at System.ComponentModel.Design.Serialization.DesignerSerializationManager.GetRuntimeType(String typeName)
at System.ComponentModel.Design.Serialization.DesignerSerializationManager.GetType(String typeName)
at System.ComponentModel.Design.Serialization.DesignerSerializationManager.System.ComponentModel.Design.Serialization.IDesignerSerializationManager.GetType(String typeName)
at System.ComponentModel.Design.Serialization.CodeDomSerializerBase.GetType(IDesignerSerializationManager manager, String name, Dictionary`2 names)
at System.ComponentModel.Design.Serialization.CodeDomSerializerBase.FillStatementTable(IDesignerSerializationManager manager, IDictionary table, Dictionary`2 names, CodeStatementCollection statements, String className)
at System.ComponentModel.Design.Serialization.TypeCodeDomSerializer.Deserialize(IDesignerSerializationManager manager, CodeTypeDeclaration declaration)
at System.ComponentModel.Design.Serialization.CodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager manager)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager serializationManager)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.DeferredLoadHandler.Microsoft.VisualStudio.TextManager.Interop.IVsTextBufferDataEvents.OnLoadCompleted(Int32 fReload) 
```

有什么我想念的吗？此时我可以使用哪些调试策略？

我的 CSPROJECT 需要这个 CPPProject 项目。如果我删除 CPPProject，我的应用程序会设计，但不会编译。我不想每次修改表单时都必须删除引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T07:48:32.053

我猜这是堆栈跟踪中的 c++/cli 和/或 c# 参考问题：

```
VSLangProj.Reference.get_Path() 
```

尝试删除 c++/cli 和/或 c# 项目中的任何无效引用。（无效引用在项目属性中标有感叹号图标）

# php - 处理两个 PHP 会话 cookie？

> ID：15075349
> 
> 赞同：0
> 
> 时间：2013-02-25T19:57:00.303
> 
> 标签：php, session, cookies, multiple-instances

我正在尝试处理两个 PHPSESSID 可可。一个使用 www 子目录 - 所以 www.mydomain.com - 而另一个使用 .mydomain.com。

就目前而言，该脚本能够设置 cookie 域，但如果在我访问 mydomain.com 之前在 www 子域上运行另一个脚本，则该 cookie 是为 www.mydomain.com 设置的。然后，如果我访问 mydomain.com，则会设置 .mydomain.com 的 cookie。这意味着我可以得到两个 PHPSESSID cookie。

有没有办法确定在这种情况下我正在处理哪个 cookie？

我看过另一篇帖子，但没有得出任何结论。

[如何处理多个同名cookies？](https://stackoverflow.com/questions/4056306/how-to-handle-multiple-cookies-with-the-same-name)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:59:13.577

相反，您应该将所有流量重定向到两者之一。这将解决您遇到的问题并处理重复的搜索结果。使用 www 或不使用 www。检查第 362 行：

[https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess](https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess)

除非你有理由同时使用 www。和 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:49:08.283

把它放在第一个运行的 php 文件的顶部，比如 index.php 或 config.php 文件。在会话开始之前。

```
<?php

if(stripos($_SERVER['HTTP_HOST'],'www')===false) {
   ini_set('session.cookie_domain', 'site.com');
} else {
   ini_set('session.cookie_domain', 'www.site.com');
}

?> 
```

这将导致 cookie 仅与 1 个或其他域相关联，这意味着用户可以拥有 2 个名为 PHPSESSID 的 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:58:44.380

为什么不直接更改 php.ini 中的会话 cookie 名称？

```
session.name = WHATEVER_YOU_LIKE 
```

# python - 如何通过掷骰子的分数对名字进行排序

> ID：15075351
> 
> 赞同：1
> 
> 时间：2013-02-25T19:57:04.233
> 
> 标签：python

我正在开发一个程序，该程序生成三个不同的整数并将它们分配给单独的值，以便可以决定它是第一个、第二个和第三个。在这种情况下，我假设三个不同的玩家，每个人掷一个“十面骰子”。最高的应该第一回合，第二高的应该第二，第三应该最后。一切似乎都很好，但现在我有了自己的价值观，我不知道如何安排它们，以便我可以开始让玩家轮流玩。我会很感激任何意见。

这是我到目前为止整理的代码：

```
import sys
import os
import random
import time

os.system('clear')
print ('Welcome!  Please type Player 1\'s name!: ')
playerOne = input()
print ('Okay!  Please type Player 2\'s name!: ')
playerTwo = input()
print ('Fantastic!  Finally, please type Player 3\'s name!: ')
playerThree = input()
os.system('clear')
print()
time.sleep(2)

def startFightRoll():
    playerOneRoll = random.randint(1,10)
    time.sleep(.5)
    print('Okay, let\'s roll a ten-sided die to see who gets to go first!')
    print()
    time.sleep(2)
    print ('<Ten-sided dice roll> ')
    print ('---------------------------------')
    print (playerOne + ' rolls ' + str(playerOneRoll))
    print()
    print()
    playerTwoRoll = random.randint(1,10)
    time.sleep(2)
    print ('<Ten-sided dice roll> ')
    print ('---------------------------------')
    print (playerTwo + ' rolls ' + str(playerTwoRoll))
    print()
    print()
    playerThreeRoll = random.randint(1,10)
    time.sleep(2)
    print ('<Ten-sided dice roll> ')
    print ('---------------------------------')
    print (playerThree + ' rolls ' + str(playerThreeRoll))

startFightRoll() 
```

响应以下线程；

好的，所以我是新手，所以请原谅我的代码 - 它效率不高，我仍然习惯了。我在其中添加了一些部分以解决 1）玩家在名称字段中不输入任何内容，以及 2）在掷骰子时生成平局。我还创建了一个按降序排列的掷骰子列表，但现在我需要找到一种方法将掷骰子关联回生成它的用户。非常感谢任何有关如何正确执行此操作的指示；

```
import sys
import os
import random
import time

os.system('clear')

def playerOneName():
    global playerOne
    playerOne = input()
    if len(playerOne) < 1:
        print('Please enter your name, Player 1!')
        playerOneName()

def playerTwoName():
    global playerTwo
    playerTwo = input()
    if len(playerTwo) < 1:
        print('Please enter your name, Player 2!')
        playerTwoName()

def playerThreeName():
    global playerThree
    playerThree = input()
    if len(playerThree) < 1:
        print('Please enter your name, Player 3!')
        playerThreeName()

os.system('clear')
print()
time.sleep(2)
def startFightRoll():
    global playerOneRoll
    global playerTwoRoll
    global playerThreeRoll
    playerOneRoll = random.randint(1,10)
    time.sleep(.5)
    print('Okay, let\'s roll a ten-sided die to see who gets to go first!')
    print()
    time.sleep(2)
    print ('<Ten-sided dice roll> ')
    print ('---------------------------------')
    print (playerOne + ' rolls ' + str(playerOneRoll))
    print()
    print()
    playerTwoRoll = random.randint(1,10)
    time.sleep(2)
    print ('<Ten-sided dice roll> ')
    print ('---------------------------------')
    print (playerTwo + ' rolls ' + str(playerTwoRoll))
    print()
    print()
    playerThreeRoll = random.randint(1,10)
    time.sleep(2)
    print ('<Ten-sided dice roll> ')
    print ('---------------------------------')
    print (playerThree + ' rolls ' + str(playerThreeRoll))
    if playerOneRoll == playerTwoRoll:
        print ('There\'s a tie, rolling again!')
        time.sleep(3)
        os.system('clear')
        startFightRoll()
    if playerOneRoll == playerThreeRoll:
        print ('There\'s a tie, rolling again!')
        time.sleep(3)
        os.system('clear')
        startFightRoll()
    if playerTwoRoll == playerThreeRoll:
        print ('There\'s a tie, rolling again!')
        os.system('clear')
        time.sleep(3)
        startFightRoll()    

    O = [playerOneRoll, playerTwoRoll, playerThreeRoll]
    O = sorted(O, reverse = True)
    print (O)

print ('Welcome!  Please type Player 1\'s name!: ')
playerOneName()
print ('Okay!  Please type Player 2\'s name!: ')
playerTwoName()
print ('Fantastic!  Finally, please type Player 3\'s name!: ')
playerThreeName()
os.system('clear')
startFightRoll() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:53:13.660

就像提到的 Lattyware 一样，您正在重复一些代码。它不仅使它太忙而无法阅读，而且还提供了弄乱逻辑的机会（如果您在粘贴后忘记更改变量）。因此，将重复代码放入函数中是一种很好的做法。

关于您的代码，我考虑了两个玩家是否掷出相同的数字。在这种情况下，程序将再次滚动，直到滚动一个新号码。

```
import os
import random
import time

os.system('clear')
print ('Welcome!  Please type Player 1\'s name!: ')
playerOne = input()
print ('Okay!  Please type Player 2\'s name!: ')
playerTwo = input()
print ('Fantastic!  Finally, please type Player 3\'s name!: ')
playerThree = input()
os.system('clear')
print()
time.sleep(2)

def initialRoll(player):
    """Roll the dice for the given player"""

    playerRoll = random.randint(1, 10)
    print ('<Ten-sided dice roll> ')
    print ('---------------------------------')
    print (player + ' rolls ' + str(playerRoll))
    print()
    return playerRoll

def startFightRoll():
    """Determine the order of the players."""

    time.sleep(.5)
    print('Okay, let\'s roll a ten-sided die to see who gets to go first!')
    print()

    // Temporarily store the rolls. The key is the roll number and the value is the
    // player who rolled it
    order = {}
    for player in [playerOne, playerTwo, playerThree]:
        playerRoll = initialRoll(player)

        # Let's make sure that two players didn't roll the same number, if they did
        # then let's roll a new number
        while playerRoll in order:
            print ('OH No! That number has already been rolled. Let\'s roll again')
            playerRoll = initialRoll(player)

        order[playerRoll] = player
        time.sleep(2)

    # Sort the keys (which are the numbers rolled), then create a new list with order
    # of who should go first
    return [order[roll] for roll in sorted(order.keys(), reverse=True)]

rollOrder = startFightRoll()
print ('The order of the players are: ' + ', '.join(rollOrder)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:00:39.627

将您的值添加到列表中（例如列表为`x`）：

```
x = sorted(x) 
```

你想使用字典。

将每个玩家姓名及其随机掷骰添加到字典中：

```
players = {'player1': randint(1, 10), 'player2': randint(1, 10), 'player3': randint(1, 10)} 
```

但是，出于您的目的，您需要与此字典相反（滚动然后是玩家名称），因为您想要遍历滚动。如果任何卷相同，这将搞砸，因此您可以创建更大的范围（`randint(1, 1000)`例如）：

```
players = {randint(1, 1000): 'player1', randint(1, 1000): 'player2', randint(1, 1000): 'player3'}
rolls = sorted(players.keys())
player_sequence = [players[n] for n in rolls] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:09:40.083

这是一种可能的选择，创建一个字典并对其键进行排序（这有点奇怪，我承认）。请注意三个“重复”块，因此请通过实施 Lattyware 的评论建议更进一步，即循环遍历每个播放器。

```
import sys
import os
import random
import time

os.system('clear')
print ('Welcome!  Please type Player 1\'s name!: ')
playerOne = raw_input()
print ('Okay!  Please type Player 2\'s name!: ')
playerTwo = raw_input()
print ('Fantastic!  Finally, please type Player 3\'s name!: ')
playerThree = raw_input()
os.system('clear')
print()
time.sleep(2)
def startFightRoll():
    time.sleep(.5)
    print('Okay, let\'s roll a ten-sided die to see who gets to go first!')
    print

    rolls = {}

    playerOneRoll = random.randint(1,10)
    rolls[playerOneRoll] = 'Player One'
    time.sleep(1)
    print ('<Ten-sided dice roll> ')
    print ('---------------------------------')
    print (playerOne + ' rolls ' + str(playerOneRoll))
    print
    print

    playerTwoRoll = random.randint(1,10)
    rolls[playerTwoRoll] = 'Player Two'
    time.sleep(1)
    print ('<Ten-sided dice roll> ')
    print ('---------------------------------')
    print (playerTwo + ' rolls ' + str(playerTwoRoll))
    print
    print

    playerThreeRoll = random.randint(1,10)
    rolls[playerThreeRoll] = "Player Three"
    time.sleep(1)
    print ('<Ten-sided dice roll> ')
    print ('---------------------------------')
    print (playerThree + ' rolls ' + str(playerThreeRoll))
    print
    print

    print "The winner is %s" % rolls[max(rolls.keys())]

startFightRoll() 
```

# java - 通过 java.nio 通道发送字符串无法正常工作

> ID：15075354
> 
> 赞同：2
> 
> 时间：2013-02-25T19:57:23.300
> 
> 标签：java, sockets, io, nio

这是我尝试过的：

服务器：

```
import java.net.InetSocketAddress;
import java.nio.*;
import java.nio.channels.*;
import java.nio.charset.*;

public class JavaApplication12 {
    public static void main(String[] args) throws Exception{
    Charset charset = Charset.forName("ISO-8859-1");
    ServerSocketChannel s = ServerSocketChannel.open();
    s.configureBlocking(true);
    s.socket().bind(new InetSocketAddress(1024));
    CharBuffer c = CharBuffer.wrap("Hello from server!");
    System.out.println("writing " + c);
    ByteBuffer b = charset.encode(c);
    SocketChannel sc = s.accept();
    sc.configureBlocking(true);
    b.flip();
    int a = sc.write(b);
    sc.close();
    s.close();
    System.out.println("wrote " + a);
}
} 
```

客户：

```
import java.net.InetSocketAddress;
import java.nio.*;
import java.nio.channels.*;
import java.nio.charset.*;

public class JavaApplication11 {

    public static void main(String[] args) throws Exception {
    Charset charset = Charset.forName("ISO-8859-1");
    SocketChannel sc = SocketChannel.open(new InetSocketAddress("127.0.0.1", 1024));
    sc.configureBlocking(true);
    ByteBuffer b = ByteBuffer.allocate(32);
    b.flip();
    int a = sc.read(b);
    sc.close();
    b.flip();
    CharBuffer c = charset.decode(b);
    c.flip();
    System.out.println("Got " + c);
    System.out.println("read " + a );
}
} 
```

对方似乎只是得到了一个很长很空的字符串，我不知道我做错了什么。

**更新**：我更新了我的代码，发现服务器正在写入 0 个字节。有字节要写，那为什么`sc.write()`什么都不写呢？

**更新 2**：在 Vishal 的帮助下，我们终于有了一个可行的解决方案：

服务器：

```
Charset charset = Charset.forName("ISO-8859-1");
ServerSocketChannel s = ServerSocketChannel.open();
s.configureBlocking(true);
s.socket().bind(new InetSocketAddress(1024));
CharBuffer c = CharBuffer.wrap("Hello from server!");
ByteBuffer b = charset.encode(c);
SocketChannel sc = s.accept();
sc.configureBlocking(true);
b.compact();
b.flip();
int a = sc.write(b);
sc.close();
s.close();
System.out.println("wrote " + a); 
```

客户：

```
Charset charset = Charset.forName("ISO-8859-1");
SocketChannel sc = SocketChannel.open(new InetSocketAddress("127.0.0.1", 1024));
sc.configureBlocking(true);
ByteBuffer b = ByteBuffer.allocate(32);
int a = sc.read(b);
sc.close();
b.flip();
CharBuffer c = charset.decode(b);
System.out.println("Got " + c); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:39:25.520

> **[Buffer.flip()](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/Buffer.html#flip%28%29)**方法**将 Buffer 从写入模式切换到读取模式**。调用`flip()`将***位置设置***回 0，并将***限制***设置为位置刚刚的位置。
> 即***位置***现在标记读取位置，***限制*** 标记有多少字节，字符等写入缓冲区 - 可以读取多少字节，字符等的限制

如果您在文档中看到`Buffer.flip()`它指出：

> 在一系列通道读取或**`put`操作**之后，调用此方法以准备一系列通道写入或相关获取操作。

并且进一步指出：

> `compact`在将数据从一个地方传输到另一个地方时，此方法通常与该方法结合使用。

在您的情况下，`put`操作不用于`ByteBuffer` 创建。所以你必须在调用`compact`翻转之前调用方法。

`ByteBuffer's` [**compact()**](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/ByteBuffer.html#compact%28%29)方法保持：

> 缓冲区的当前位置和它的限制之间的字节（如果有的话）被复制到缓冲区的开头。也就是说，索引 p = position() 处的字节被复制到索引 0，索引 p + 1 处的字节被复制到索引 1，依此类推，直到索引 limit() - 1 处的字节被复制到索引 n =限制（） - 1 - p。然后将缓冲区的位置设置为 n+1，并将其限制设置为其容量。标记（如果已定义）将被丢弃。
> 
> **缓冲区的位置设置为复制的字节数，而不是零，以便调用此方法后可以立即调用另一个相对 put 方法。** *从缓冲区写入数据后调用此方法，以防写入不完整。*

在服务器端的代码中 Before`flip()`被称为位置本身是 0 。因此，`position`要将写入的字节数设置为`b`您必须在调用`compact()`之前调用方法，`b.flip()`以便将`b.flip()`设置`limit`为前一个`position`，即写入的字节数`ByteBuffer`，并将 设置`position`为`0`。

因此，您的服务器代码应如下所示：

```
import java.net.InetSocketAddress;
import java.nio.*;
import java.nio.channels.*;
import java.nio.charset.*;

public class JavaApplication12 {
    public static void main(String[] args) throws Exception{
    Charset charset = Charset.forName("ISO-8859-1");
    ServerSocketChannel s = ServerSocketChannel.open();
    s.configureBlocking(true);
    s.socket().bind(new InetSocketAddress(1024));

    CharBuffer c = CharBuffer.wrap("Hello from server!");
    System.out.println("writing " + c);
    ByteBuffer b = charset.encode(c);
    System.out.println(new String(b.array()));
    SocketChannel sc = s.accept();
    //sc.configureBlocking(true);
    b.compact();
    System.out.println(b.capacity() + " "+ b.position() + " " + b.limit());
    b.flip();
    System.out.println(b.capacity() + " "+ b.position() + " " + b.limit());
    int a = 0;
    while (b.hasRemaining())
    {
        a += sc.write(b);
    }

    sc.close();
    s.close();
    System.out.println("wrote " + a);
    }
} 
```

LikeWise ，在客户端你的代码应该是这样的：

```
import java.net.InetSocketAddress;
import java.nio.*;
import java.nio.channels.*;
import java.nio.charset.*;

public class JavaApplication11 {
    public static void main(String[] args) throws Exception {
    Charset charset = Charset.forName("ISO-8859-1");
    SocketChannel sc = SocketChannel.open(new InetSocketAddress("127.0.0.1", 1024));
    sc.configureBlocking(true);
    ByteBuffer b = ByteBuffer.allocate(32);
    //b.flip();//Don't flip the ByteBuffer here because it sets the position to 0 and limit to 0 also. Hence no read.
    int a = sc.read(b);
    sc.close();
    b.flip();//sets the Position to 0 and limit to the number of bytes to be read.
    CharBuffer c = charset.decode(b);
    //c.flip();//Don't flip the ChharBuffer. Because it is setting the position to zero and limit to previous position i.e zero
    System.out.println("Got " + c);
    System.out.println("read " + a );
    }
} 
```

> **注意**：我已对您犯错的行发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:08:18.977

您需要在 read() 和 decode() 之间翻转（）缓冲区。

# c# - AppData 文件夹中的文件权限

> ID：15075355
> 
> 赞同：2
> 
> 时间：2013-02-25T19:57:25.950
> 
> 标签：c#, file-permissions

我有一个 XML 文件，我需要更改其中的一个元素。我正在测试我的应用程序，并将该文件复制到我的桌面，并且它工作正常。

默认情况下，XML 文件将位于 C:\Users\myPC\AppData\Roaming\direc

我的应用程序使用

```
string pathToXml = @"C:\Users\myPC\AppData\Roaming\direc\cqn.xml"; 
```

将路径传递给我需要它进行更改的函数。

但现在我得到一个 Access to the path is denied 错误。现在我知道以前有人问过这个问题，所以对此我深表歉意。但不幸的是，我正在寻找的东西并没有帮助。

*   在关闭 UAC 的情况下以管理员身份运行 W8 x64
*   以管理员身份运行 Visual Studio 无济于事（如另一个线程中所建议）
*   以管理员身份运行构建的 .exe 文件没有帮助
*   该文件和文件夹确实存在，并且未被其他进程使用。

我尝试在编辑文件的部分上方添加它，但没有运气：

```
 FileSecurity fSec = System.IO.File.GetAccessControl(pathToXml);
        fSec.AddAccessRule(new FileSystemAccessRule(Environment.UserName,
            FileSystemRights.FullControl, AccessControlType.Allow));

        File.SetAccessControl(pathToXml, fSec);

        DirectorySecurity dSec = System.IO.Directory.GetAccessControl(pathToXml);
        dSec.AddAccessRule(new FileSystemAccessRule(Environment.UserName,
            FileSystemRights.FullControl, AccessControlType.Allow)); 
```

有人可以帮我吗？谢谢你的时间。

# r - 如何执行两个 SpatialPolygonsDataFrame 对象的矢量叠加？

> ID：15075361
> 
> 赞同：7
> 
> 时间：2013-02-25T19:57:48.587
> 
> 标签：r, gis, spatial, topology

我有两个 GIS 层——调用它们`Soils`并`Parcels`存储为`SpatialPolygonsDataFrame`s( `SPDF`s)，并且我想“覆盖”它们，[在此处描述的意义上](http://resources.esri.com/help/9.3/ArcGISengine/java/Gp_ToolRef/geoprocessing/overlay_analysis.htm)。

叠加操作的结果应该是一个新的 SPDF，其中：

1.  该`SpatialPolygons`组件包含由两层相交形成的多边形。（想想在投影仪上覆盖两个聚酯薄膜形成的所有原子多边形）。

2.  该组件记录每个原子多边形所属的多边形和多边形`data.frame`的属性。`Soils``Parcels`

**我的问题：**是否存在执行此操作的现有 R 函数？（我什至很乐意学习一个函数，它只是让`SpatialPolygons`组件正确，计算从两层的交叉点形成的原子多边形。）我觉得**rgeos**应该至少有一个函数（1），但它好像没有……

这是一个可以帮助我更清楚我所追求的图，然后是创建图中所示的`Soils`和层的代码。`Parcels`

![在此处输入图像描述](../Images/b2f6771e766f1f74134f18460a35d8b5.png)

```
library(rgeos)

## Just a utility function to construct the example layers.
flattenSpatialPolygons <- function(SP) {
    nm <- deparse(substitute(SP))
    AA <- unlist(lapply(SP@polygons, function(X) X@Polygons))
    SpatialPolygons(lapply(seq_along(AA),
                           function(X) Polygons(AA[X], ID=paste0(nm, X))))
}

## Example Soils layer
Soils <-
local({
    A <- readWKT("MULTIPOLYGON(((3 .5,7 1,7 2,3 1.5,3 0.5), (3 1.5,7 2,7 3,3 2.5,3 1.5)))")
    AA <- flattenSpatialPolygons(A)
    SpatialPolygonsDataFrame(AA,
           data.frame(soilType = paste0("Soil_", LETTERS[seq_along(AA)]),
                      row.names = getSpPPolygonsIDSlots(AA)))
})

## Example Parcels layer
Parcels <-
local({
    B <- readWKT("MULTIPOLYGON(((0 0,2 0,2 3,0 3,0 0),(2 0,4 0,4 3,2 3,2 0)),((4 0,6 0,6 3,4 3,4 0)))")
    BB <- flattenSpatialPolygons(B)
    SpatialPolygonsDataFrame(BB,
           data.frame(soilType = paste0("Parcel_", seq_along(BB)),
                      row.names = getSpPPolygonsIDSlots(BB)))
}) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-17T16:35:54.350

自 2014 年 1 月以来，**raster**包包含一个`union()`使此操作变得简单的函数：

```
library(raster)
Intersects <- Soils + Parcels  ## Shorthand for union(Soils, Parcels)

## Check that it work
data.frame(Intersects)
## soilType.1 soilType.2
## 1     Soil_A       <NA>
## 2     Soil_B       <NA>
## 3       <NA>   Parcel_1
## 4       <NA>   Parcel_2
## 5       <NA>   Parcel_3
## 6     Soil_A   Parcel_2
## 7     Soil_A   Parcel_3
## 8     Soil_B   Parcel_2
## 9     Soil_B   Parcel_3
plot(Intersects, col = blues9) 
```

![在此处输入图像描述](../Images/428cf2c89c3ca15069986d150ebc78e0.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T23:40:13.307

自 2014 年 1 月以来，此处发布的解决方案已完全被该`raster::union()`功能取代，如上面官方接受的答案所示。

* * *

这得到了通过覆盖两个不同`SpatialPolygons`层形成的“原子”多边形，解决了我问题的第 1 部分。

```
library(rgeos)

gFragment <- function(X, Y) {
    aa <- gIntersection(X, Y, byid = TRUE)
    bb <- gDifference(X, gUnionCascaded(Y), byid = T)
    cc <- gDifference(Y, gUnionCascaded(X), byid = T)
    ## Note: testing for NULL is needed in case any of aa, bb, or cc is empty,
    ## as when X & Y don't intersect, or when one is fully contained in the other
    SpatialPolygons(c(if(is.null(aa)) NULL else aa@polygons,
                      if(is.null(bb)) NULL else bb@polygons,
                      if(is.null(cc)) NULL else cc@polygons)) 
}

## Try it out
Fragments <- gFragment(Parcels, Soils)
plot(Fragments, col=blues9) 
```

这将提取`gFragment()`上面输出的每个“原子”多边形覆盖的两个输入层中多边形的 ID（如果有），解决了我的问题的第 2 部分。

```
getAttributes <- function(Fragments, Layer1, Layer2, eps = 0) {
    ## Function to extract attributes from polygon layers
    ## overlain by fragments
    OVER <- function(AA, BB) {
        X <- gRelate(AA, BB, byid = TRUE, pattern="2********")
        ii <- sapply(seq_len(ncol(X)),
                    function(i) {
                        A <- which(X[,i])
                        if(!length(A)) NA else A
                    })
        rownames(X)[ii]
    }
    ## First need to (very slightly) trim Fragments b/c otherwise they
    ## tend to (very slightly) overlap adjacent ring(s)
    Frags <- gBuffer(Fragments, width = -eps, byid = TRUE)
    ## Construct data.frame of attributes
    df <- data.frame(OVER(Frags, Layer1), 
                     OVER(Frags, Layer2),
                     row.names = names(Fragments))
    names(df) <- c(deparse(substitute(Layer1)), deparse(substitute(Layer2)))
    ## Add data.frame to SpatialPolygons object
    SpatialPolygonsDataFrame(Fragments, data=df)
}

FragmentsDF <- getAttributes(Fragments = Fragments,
                             Layer1 = Parcels,
                             Layer2 = Soils)

## A few ways to examine the results
data.frame(FragmentsDF, row.names=NULL)
#   Parcels Soils
# 1      B2    A1
# 2      B2    A2
# 3      B3    A1
# 4      B3    A2
# 5      B1  <NA>
# 6      B2  <NA>
# 7      B3  <NA>
# 8    <NA>    A1
# 9    <NA>    A2
spplot(FragmentsDF, zcol="Soils", col.regions=blues9[3:4])
spplot(FragmentsDF, zcol="Parcels", col.regions=grey.colors(3)) 
```

**编辑：**

请注意，如果您的任何输入多边形具有 id 的 named ，则此代码可能会失败`"1"`。在这种情况下，一种解决方法是重命名 id，也许通过执行类似`Parcels <- spChFIDs(Parcels, paste0("pp", row.names(Parcels)))`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T23:37:42.977

这是我的破解，这只是给出了带有包裹（包裹->土壤）数据的碎片列表。您仍然需要从 Soils 对象中获取属性，然后对“差异”进行类似的工作，然后反之亦然（Soils->Parcels），这样您就可以拥有任何类型的重叠关系。

```
intersects <- list()

## find all intersections (NULLs do nothing to the result)
for (i in 1:nrow(Soils)) {
  for (j in 1:nrow(Parcels)) {
    intersects[[sprintf("%sx%s", i, j)]] <- gIntersection(Soils[i,],
                                                          Parcels[j,]) 
  }
}

result <- list()
## let's try Parcels, transfer data attributes to new pieces
for (i in 1:nrow(Parcels)) {
  for (j in seq_along(intersects))
   if(gContains(Parcels[i,], intersects[[j]])) {
     result <- c(result, SpatialPolygonsDataFrame(intersects[[j]],     as.data.frame(Parcels[i,]), match.ID = FALSE))

   }
}

## plot
plot(Parcels, xlim = range(c(bbox(Parcels)[1,], bbox(Soils[1,]))),
     ylim = range(c(bbox(Parcels)[2,], bbox(Soils[2,]))))
plot(Soils, add = TRUE)

cols <- colorRampPalette(c("lightblue", "darkblue"))(length(result))
for (i in 1:length(result)) plot(result[[i]], col = cols[i], add = TRUE)
for (i in 1:length(result)) text(coordinates(result[[i]]), label =     as.data.frame(result[[i]])[,"soilType"]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T22:48:56.473

这是基本思想（将其作为嵌套循环在地块上然后在土壤上进行；我不确定它是否可以按照`g*`编写函数的方式进行矢量化）：

```
i <- 2
j <- 2
pieces <- list()
pieces[["int"]] <- gIntersection(Parcels[i,],Soils[j,])
pieces[["diff1"]] <- gDifference(Parcels[i,],Soils[j,])
pieces[["diff2"]] <- gDifference(Soils[j,],Parcels[i,])
plot(Parcels)
plot(Soils,add=TRUE)
plot(pieces[["int"]],col="red",add=TRUE)
plot(pieces[["diff1"]],col="blue",add=TRUE)
plot(pieces[["diff2"]],col="green",add=TRUE) 
```

![阴谋](../Images/475adeed7fbc981da7eb8733e7bf9f19.png)

这应该足以让你开始。其余的只是循环，同时跟踪各个部分并将它们全部合并到一个大的 SPDF 中。

一种更加矢量化的替代方法是：

```
pieces <- list()
pieces[["int"]] <- gIntersection(Parcels,Soils,byid=TRUE)
pieces[["diff1"]] <- gDifference(Parcels,Soils,byid=TRUE)
pieces[["diff2"]] <- gDifference(Soils,Parcels,byid=TRUE) 
```

出于某种原因，这为您提供了比实际存在的更多的碎片。然后，您必须返回并 rbind 并剔除多余的`gEquals`.

# python - 实例化多个 AbstractConcreteBase 问题

> ID：15075362
> 
> 赞同：0
> 
> 时间：2013-02-25T19:57:48.923
> 
> 标签：python, sqlalchemy

我收到了一个我不理解 AbstractConcreteBase 的错误

在 my_enum.py

```
class MyEnum(AbstractConcreteBase, Base):
    pass 
```

在 enum1.py

```
class Enum1(MyEnum):
    years = Column(SmallInteger, default=0)

# class MyEnums1:
#    NONE = Enum1()
#    Y1 = Enum1(years=1) 
```

在 enum2.py

```
class Enum2(MyEnum):
    class_name_python = Column(String(50)) 
```

在 test.py 中

```
from galileo.copernicus.basic_enum.enum1 import Enum1
from galileo.copernicus.basic_enum.enum2 import Enum2
#... 
```

如果我取消注释 enum1.py 中的三行，我会在第二次导入时收到以下错误。

AttributeError：类型对象“MyEnum”没有属性“**表**”

但是没有 MyEnums1 它可以正常工作，或者在单独的文件中使用 MyEnums1 它可以正常工作。为什么这种实例化会影响导入？无论如何我可以将 MyEnums1 保存在同一个文件中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:46:58.697

abstractconcretebase 的目的是将非标准的操作顺序应用于标准映射过程。通常，映射的工作方式如下：

1.  定义要映射的类
2.  定义一个表
3.  使用 mapper() 将类映射到表。

声明式本质上结合了这三个步骤，但这就是它的作用。

当使用抽象的具体基时，我们需要执行这个完全特殊的步骤——基类需要映射到子类映射到的所有表的*联合。*因此，如果您有 enum1 和 enum2，则“Base”需要映射到本质上“select * from enum1 UNION ALL select * from enum2”。

这种到 UNION 的映射不能零碎发生；MyEnum 基类必须同时将每个子表的完整 UNION 呈现给 mapper()。[因此 AbstractConcreteBase 执行重新安排声明性工作方式的复杂任务，以便在映射器配置](http://docs.sqlalchemy.org/en/rel_0_8/orm/mapper_config.html?highlight=mapper%20configuration#sqlalchemy.orm.configure_mappers)发生之前根本不映射基 MyEnum ，这在您第一次实例化映射类时发生。然后它将自己插入为所有现有映射子类的映射基础。

所以基本上通过像这样在类级别实例化一个 Enum1() 对象，您太早地调用了 configure_mappers() ，这样当 Enum2() 出现时，abstractconcretebase 已经烘焙并且过程失败。

除此之外，在类级别实例化像 Enum1() 这样的映射类是完全不正确的。ORM 映射对象与全局对象完全相反，必须始终在特定会话的本地创建。

编辑：这些类也应该有 {"concrete": True} ，这是您收到此消息的部分原因。我想看看这个消息是否可以改进。

编辑2：是的，这里的机制很奇怪。我已经提交了一些跳过此特定错误消息的其他内容，尽管它现在会以不同的方式失败并且不会更好。让它更优雅地失败需要更多的工作。

# sqlite - 需要sqlite选择帮助

> ID：15075364
> 
> 赞同：0
> 
> 时间：2013-02-25T19:57:53.960
> 
> 标签：sqlite, select

我有以下账单表

```
building      name      amount      payments     receiptno
1234          name a    123         0            0
1234          name a    12          10           39
1234          name a    125         125          40
1235          name a    133         10           41
1235          name b    125         125          50
1234          name c    100         90           0 
```

我想选择金额减去付款大于零的行并显示receiptno 的最大值

所以我只想从 1234 楼中选择以下内容

```
 name a     39
         name c     0 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:18:33.187

将您的描述翻译成 SQL 会导致：

```
SELECT building,
       name,
       MAX(receiptno)
FROM BillTable
WHERE amount - payments > 0
GROUP BY building,
         name 
```

# cocos2d-iphone - 为什么我的主菜单图像在启动时大小错误，但在游戏后却没有？

> ID：15075365
> 
> 赞同：0
> 
> 时间：2013-02-25T19:57:59.137
> 
> 标签：cocos2d-iphone

我有一个加载到 MainMenu 场景的图像，并且在游戏启动时显示为错误大小，但在完成关卡后再次返回 MainMenu，图像显示为正确大小。

第一次出现时，图像从左到右显示为屏幕尺寸的四分之三或 4/5。图像周围有一个白色背景，所以我可以在主菜单第一次启动时在屏幕右侧看到一个黑色的高矩形。但是在一场比赛之后，它的大小是正确的，并且白色背景图像的大小是正确的。

有人遇到过这种情况吗？

这是 MainMenuLayer 的初始化代码：

```
-(id)init {
    if( (self=[super initWithColor:ccc4(255,255,255,255)]) ) {
        [[GameManager sharedGameManager] playBackgroundTrack:BACKGROUND_TRACK_MAIN_MENU];
        CGSize screenSize = [CCDirector sharedDirector].winSize;

        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
            CCSprite *background = [CCSprite spriteWithFile:@"MainMenu-iPad.png"];
            [background setPosition:ccp(screenSize.width/2,screenSize.height/2)];
            [self addChild:background];
            [self displayMainMenu];
        } else {
            CCSprite *background = [CCSprite spriteWithFile:@"MainMenu.png"];
            [background setPosition:ccp(screenSize.width/2,screenSize.height/2)];
            [self addChild:background];
            [self displayMainMenu];
        }
- 
```

虽然它在模拟器上运行良好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:42:22.367

打印屏幕位置，如果位置错误，则将代码放入 onEnter 而不是 init。

[请参阅堆栈溢出中的此线程。](https://stackoverflow.com/questions/12488515/ccdirector-shareddirectorwinsize-is-wrong/12488926#12488926)

```
-(id)init {
    if( (self=[super initWithColor:ccc4(255,255,255,255)]) ) {
       }
     return self;
}

-(void)onEnter {
        [super onEnter];
        [[GameManager sharedGameManager] playBackgroundTrack:BACKGROUND_TRACK_MAIN_MENU];
        CGSize screenSize = [CCDirector sharedDirector].winSize;

         CCSprite *background = [CCSprite spriteWithFile:@"MainMenu.png"];
         [background setPosition:ccp(screenSize.width/2,screenSize.height/2)];
         [self addChild:background];
         [self displayMainMenu]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:53:59.583

即使在清理和构建之后，图像显然也被缓存了！我最终通过删除原始图像并添加相同的图像来替换图像，但使用一些标记只是为了确保它被替换。

# jsf - JSF 页面中的注销链接

> ID：15075372
> 
> 赞同：0
> 
> 时间：2013-02-25T19:58:13.803
> 
> 标签：jsf, jsf-2

我创建了用于客户端身份验证的 JSF 登录页面。我创建了在用户打开页面时破坏用户会话的过滤器`logout.html`。我想创建简单的 http 链接，当单击它以将用户重定向到`logout.html`页面时将使用该链接。您可以推荐哪些 JSF 标记用于页面重定向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T20:02:25.020

只需使用`<h:outputLink>`.

```
<h:outputLink value="logout.html">Logout</h:outputLink> 
```

你知道你甚至可以在 JSF 中使用纯 HTML 吗？

```
<a href="logout.html">Logout</a> 
```

# git - 找到我需要从中拉变基的遥控器

> ID：15075375
> 
> 赞同：1
> 
> 时间：2013-02-25T19:58:28.297
> 
> 标签：git

所以我们有一个主人，我创建了一个分支表格并在我的分支上进行了结帐然后我说`git pull --rebase`

我得到了消息：

> 当前分支没有跟踪信息。请指定要针对哪个分支进行变基。详见 git-pull(1)
> 
> ```
> git pull <remote> <branch> 
> ```
> 
> 如果您想为此分支设置跟踪信息

然后我做了一个`git remote -v`，我得到了这样的链接：

```
origin  http://github.blah.com/masterLink.git (fetch)
origin  http://github.blah.com/masterLink.git (push) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:13:53.960

您创建了一个分支，但它没有任何远程可供拉取。

如果您想要做的只是对 master 分支进行 rebase，您将需要这样做，`git rebase origin/master` 这将从 master 获取更新。

# postgresql - PostgreSQL 和 SELECT FOR UPDATE LIMIT

> ID：15075381
> 
> 赞同：1
> 
> 时间：2013-02-25T19:58:50.327
> 
> 标签：postgresql, transactions, locking

你能解释一下这个奇怪的行为吗：

我有这个存储过程，它告诉我一行是否被锁定

```
CREATE OR REPLACE FUNCTION tg_availablega_is_unlocked(availablega_id integer)
  RETURNS boolean AS
$BODY$
DECLARE
  is_locked     boolean = FALSE;
BEGIN
  BEGIN
    PERFORM id FROM tg_availablega WHERE id = availablega_id
    FOR UPDATE NOWAIT;
  EXCEPTION 
    WHEN lock_not_available THEN
            is_locked := TRUE;
  END;
  RETURN not is_locked;
END;$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100; 
```

如果我开始交易并执行此操作：

```
SELECT "tg_availablega"."id",
       "tg_availablega"."isactive",
       "tg_availablega"."schedule",
       "tg_availablega"."zone_tg_id"
FROM "tg_availablega"
WHERE (tg_availablega_is_unlocked("tg_availablega"."id")
       AND "tg_availablega"."zone_tg_id" = 1
       AND "tg_availablega"."isactive" = TRUE
       AND "tg_availablega"."schedule" = 20)
LIMIT 100
FOR
UPDATE; 
```

它锁定并返回 100 行。如果我在其他事务中同时执行相同的操作，它会锁定并返回不同的 100 行。如果总行数为 101，则第一次执行返回 100 行，第二次执行仅返回 1 行。

但是如果我添加 ORDER BY 子句

```
SELECT "tg_availablega"."id",
       "tg_availablega"."isactive",
       "tg_availablega"."schedule",
       "tg_availablega"."zone_tg_id"
FROM "tg_availablega"
WHERE (tg_availablega_is_unlocked("tg_availablega"."id")
       AND "tg_availablega"."zone_tg_id" = 1
       AND "tg_availablega"."isactive" = TRUE
       AND "tg_availablega"."schedule" = 20)
***ORDER BY "tg_availablega"."id"***
LIMIT 100
FOR
UPDATE; 
```

然后第一个事务返回 100 个锁定行，第二个事务返回 NO ROWS

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:09:31.087

问题是函数 tg_availablega_is_unlocked 确实锁定了它检查的行。如果没有 order by，Postgres 不会访问所有行 - 因此不会在所有行上调用该函数。我想你的意思是：

```
select * from (
SELECT "tg_availablega"."id",
   "tg_availablega"."isactive",
   "tg_availablega"."schedule",
   "tg_availablega"."zone_tg_id"
FROM "tg_availablega"
 WHERE "tg_availablega"."zone_tg_id" = 1
   AND "tg_availablega"."isactive" = TRUE
   AND "tg_availablega"."schedule" = 20)
ORDER BY "tg_availablega"."id"
) a
where tg_availablega_is_unlocked(id)
limit 100 
```

# vba - 在 Outlook 2003 中创建右键单击上下文菜单

> ID：15075384
> 
> 赞同：2
> 
> 时间：2013-02-25T19:58:54.583
> 
> 标签：vba, outlook, contextmenu, outlook-2003

我已经能够在 Outlook 2003 的顶部菜单栏中创建一个新菜单，但希望在用户右键单击电子邮件时执行相同操作（但如果可能，不要在界面中的其他任何位置）。

这是我得到的：

```
Sub AddMenus()
    Dim cbMainMenuBar As CommandBar
    Dim cbcCustomMenu As CommandBarControl
    Dim cbcTest As CommandBarControl
    Dim iHelpMenu as Integer

    Set cbMainMenuBar = Application.ActiveExplorer.CommandBars.ActiveMenuBar
    iHelpMenu = cbMainMenuBar.Controls("&?").index

    Set cbcCustomMenu = cbMainMenuBar.Controls.Add(Type:=msoControlPopup, before:=iHelpMenu)
    cbcCustomMenu.caption = "Menu &Name"

    Set cbcTest = cbcCustomMenu.Controls.Add(Type:=msoControlPopup)
    cbcTest.caption = "&Test"

    With cbcTest.Controls.Add(Type:=msoControlButton)
                .caption = "&Submenu item"
                .OnAction = "macro"
    End With
    With cbcTest.Controls.Add(Type:=msoControlButton)
                .caption = "Another submenu item"
                .OnAction = "macro"
    End With
    With cbcCustomMenu.Controls.Add(Type:=msoControlButton)
                .caption = "About"
                .OnAction = "macro"
    End With
End Sub 
```

右键单击时，我必须进行哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T17:09:01.633

可以在此处找到该问题的最终答案：[http ://www.outlookcode.com/codedetail.aspx?id=314](http://www.outlookcode.com/codedetail.aspx?id=314)

这是删除一些我不需要的代码/注释后得到的结果：

```
Option Explicit

Private WithEvents ActiveExplorerCBars As CommandBars
Private WithEvents ContextButton As CommandBarButton     
Private IgnoreCommandbarsChanges As Boolean

Private Sub Application_Startup()
    Set ActiveExplorerCBars = ActiveExplorer.CommandBars
End Sub

Private Sub ActiveExplorerCBars_OnUpdate()
    Dim bar As CommandBar

    If IgnoreCommandbarsChanges Then Exit Sub

    On Error Resume Next
    Set bar = ActiveExplorerCBars.Item("Context Menu")
    On Error GoTo 0

    If Not bar Is Nothing Then
        AddContextButton bar
    End If
End Sub

Sub AddContextButton(ContextMenu As CommandBar)
    Dim b As CommandBarButton
    Dim subMenu As CommandBarControl
    Dim cbcCustomMenu As CommandBarControl, cbcLink As CommandBarControl

    Set ContextMenu = ActiveExplorerCBars.Item("Context Menu")

    'Unprotect context menu
    ChangingBar ContextMenu, Restore:=False

    'Menu
    Set cbcCustomMenu = ContextMenu.Controls.Add(Type:=msoControlPopup)
    cbcCustomMenu.caption = "&Menu"

    'Link in Menu
    Set cbcLink = cbcCustomMenu.Controls.Add(Type:=msoControlButton)
    cbcLink.caption = "Link 1"
    cbcLink.OnAction = "macro"

    'Reprotect context menu
    ChangingBar ContextMenu, Restore:=True
End Sub

'Called once to prepare for changes to the command bar, then again with
'Restore = true once changes are complete.
Private Sub ChangingBar(bar As CommandBar, Restore As Boolean)
  Static oldProtectFromCustomize, oldIgnore As Boolean

  If Restore Then
    'Restore the Ignore Changes flag
    IgnoreCommandbarsChanges = oldIgnore

    'Restore the protect-against-customization bit
    If oldProtectFromCustomize Then bar.Protection = bar.Protection And msoBarNoCustomize

  Else
    'Store the old Ignore Changes flag
    oldIgnore = IgnoreCommandbarsChanges
    IgnoreCommandbarsChanges = True

    'Store old protect-against-customization bit setting then clear
    'CAUTION: Be careful not to alter the property if there is no need,
    'as changing the Protection will cause any visible CommandBarPopup
    'to disappear unless it is the popup we are altering.
    oldProtectFromCustomize = bar.Protection And msoBarNoCustomize
    If oldProtectFromCustomize Then bar.Protection = bar.Protection And Not msoBarNoCustomize
  End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:42:13.570

我不再安装 Outlook 2003 并且 Outlook 2010 不会让您以同样的方式弄乱右键菜单。所以这个编译并且希望接近你需要做的。

在编写任何代码之前，您需要显示隐藏的项目，我认为，以获得几个对象的智能感知。在 2010 年，ActiveExporer 和 ActiveInspector 对象 - 这是 Outlook 中的两种视图，例如查看所有电子邮件或查看单个电子邮件 - 被隐藏。要取消隐藏它们，请在 VBE 中单击 F2 进入对象资源管理器，然后右键单击任意位置并选中“显示隐藏的项目”。

所以现在你已经准备好编写代码了：

首先，您需要一种方法来确定您感兴趣的右键单击菜单的名称。这会尝试为每个菜单添加一个按钮，按钮的标题是菜单的名称和索引。它首先重置菜单，以免创建多个这样的按钮。该按钮应位于菜单的底部。这些按钮是临时的，这意味着下次打开 Outlook 时它们将消失：

```
Sub GetCommandBarNames()
Dim cbar As Office.CommandBar
Dim cbarButton As Office.CommandBarButton

For Each cbar In ActiveInspector.CommandBars
    On Error Resume Next
    cbar.Reset
    Set cbarButton = cbar.Controls.Add(Type:=msoControlButton, temporary:=True)
    With cbarButton
        .Caption = cbar.Name
        .Style = msoButtonCaption
        .Visible = True
    End With
    On Error GoTo 0
Next cbar
For Each cbar In ActiveExplorer.CommandBars
    On Error Resume Next
    cbar.Reset
    Set cbarButton = cbar.Controls.Add(Type:=msoControlButton, temporary:=True)
    With cbarButton
        .Caption = cbar.Name & "-" & cbar.Index
        .Style = msoButtonCaption
        .Visible = True
    End With
    On Error GoTo 0
Next cbar
End Sub 
```

运行此程序后，右键单击 Outlook 并获取所需菜单的名称。它将是最后一个按钮上破折号之前的部分。假设它是“foobar”。

然后你应该能够做到这一点：

```
Sub AddButton()
Dim cbar As Office.CommandBar
Dim cbarButton As Office.CommandBarButton

Set cbar = ActiveExplorer.CommandBars("foobar")    'or maybe it's ActiveInspector
Set cbarButton = cbar.Controls.Add(Type:=msoControlButton, temporary:=True)
With cbarButton
    .Caption = "&Submenu item"
    .OnAction = "macro"
    .Style = msoButtonCaption
    'etc.
End With
'do the next button
Set cbarButton = cbar.Controls.Add(Type:=msoControlButton, temporary:=True)
'...
End Sub 
```

就像我说的那样，我这样做有点盲目，但我在 Excel 中做过很多次（我什至写了两个插件），所以如果这不起作用，我应该能够让你到达那里。

# html - html5画布变换阴影

> ID：15075392
> 
> 赞同：0
> 
> 时间：2013-02-25T19:59:11.527
> 
> 标签：html, canvas

是否可以对阴影应用变换？例如，矩形的阴影呈菱形。

```
<div><canvas id="myCanvas" width="900" height = "700" style="border:solid 1px #000000;"></canvas></div>

<script>
    var context = document.getElementById("myCanvas").getContext("2d");

    function draw_rectangle() {
        context.shadowOffsetX = 50;
        context.shadowOffsetY = 50;
        context.shadowBlur = 5;
        context.shadowColor = "DarkGoldenRod";
        context.strokeStyle = "Gold";
        context.strokeRect(200, 200, 100, 120);
    }
    window.onload = draw_rectangle();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:03:46.343

你为什么不为此使用css3？在这里你可能会找到如何做到这一点：[http ://www.w3schools.com/cssref/css3_pr_box-shadow.asp](http://www.w3schools.com/cssref/css3_pr_box-shadow.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:22:45.020

不，您不能将阴影与矩形分开变换。

您*可以*像这样旋转矩形+阴影：http: [//jsfiddle.net/m1erickson/W4fgp/](http://jsfiddle.net/m1erickson/W4fgp/)

您也可以分别绘制 2 个对象，1 个矩形和 1 个矩形作为“阴影”。

这是旋转矩形+阴影的代码：

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");

        ctx.rotate(.6);
        ctx.rect(150, 50, 50, 60);
        ctx.shadowOffsetX = 50;
        ctx.shadowOffsetY = 50;
        ctx.shadowBlur = 5;
        ctx.shadowColor = "DarkGoldenRod";
        ctx.strokeStyle = "Gold";
        ctx.stroke();

    }); // end $(function(){});
</script>

</head>

<body>
  <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

# layout - Joomla 2.5 - 根据类别布局的文章布局

> ID：15075394
> 
> 赞同：1
> 
> 时间：2013-02-25T19:59:17.980
> 
> 标签：layout, joomla, overriding, categories, article

我想根据其类别的自定义布局为文章使用自定义布局。

*   体育类布局——体育文章布局
*   科学类布局-科学类布局

感谢您的任何回复。

更新：
我对如何处理这个有一个想法，因为下面的答案给了我一些提示。我需要能够在文章项目页面上获取类别布局。我知道这很棘手，但 Joomla 有所有的东西可以做，那么现在最好的事情是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-01T07:24:53.860

好吧，我找到了更容易和无缝的解决方案来完成这种技巧。一旦你覆盖了类别布局，你应该在你的模板文件夹中放置类似“sports.xml”的东西，否则它不会与你的菜单项一起工作（因为 joomla blog.xml 有关于布局的隐藏字段，你应该覆盖它来制作对的）。在这个 sports.xml 中，您可以为文章布局添加另一个字段 - 比如

```
<field
      name="article_layout" type="componentlayout"
      label="JGLOBAL_FIELD_LAYOUT_LABEL"
      description="JGLOBAL_FIELD_LAYOUT_DESC"
      menuitems="true"
      extension="com_content"
      view="article"
      /> 
```

或者只是您想要的布局的隐藏字段。它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:06:13.533

首先，您需要进行模板覆盖。这很容易。可以在此处查看向您展示如何执行此操作的文档：

[http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

然后，在您的覆盖中，您需要根据文章所属的类别 ID 使用 if 语句。这可以像这样实现：

```
$catid = JRequest::getInt('catid');

if($catid == 1){
    //layout for article belonging to a category with an ID of 1 goes here
}
elseif($catid == 2){
    //layout for article belonging to a category with an ID of 2 goes here
}
else {
    //standard layout goes here
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-16T12:51:31.897

这必须在 yourblog.xml 中的 name="article" 部分

```
 <fieldset name="article" label="COM_CONTENT_ATTRIBS_FIELDSET_LABEL"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T00:55:38.620

实现这一点的最佳方法是使用 K2 ( [http://getk2.org](http://getk2.org) )，因为您可以创建模板覆盖集（例如项目、类别等），然后将它们分配给后端的类别。

您可以在此处找到分步指南：http: [//getk2.org/documentation/tutorials/174-templating-with-k2-and-the-concepts-of-sub-templates](http://getk2.org/documentation/tutorials/174-templating-with-k2-and-the-concepts-of-sub-templates)

为了使切换变得容易，他们还包括将所有文章导入 K2 的功能。

# java - lwjgl fps绘图问题

> ID：15075419
> 
> 赞同：0
> 
> 时间：2013-02-25T20:00:22.433
> 
> 标签：java, opengl, lwjgl, slick2d

我在尝试使用 LWJGL 在屏幕上跟踪 FPS 时遇到了一些麻烦。我的代码有什么问题？

我一直都有这个：

```
Exception in thread "main" java.lang.NullPointerException
    at TheGame.renderFont(TheGame.java:66)
    at TheGame.start(TheGame.java:48)
    at TheGame.main(TheGame.java:88)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

Process finished with exit code 1 
```

代码在这里，非常简单——基本上是打开窗口并计算FPS，如果追踪到Title，FPS是可以的，但是我如何绘制字符串而不出错？

```
import java.awt.Font;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.Sys;

import org.newdawn.slick.Color;
import org.newdawn.slick.TrueTypeFont;
import org.newdawn.slick.util.ResourceLoader;

public class TheGame
{ 
    int fps;
    long lastFPS;
    TrueTypeFont font;
    boolean antiAlias = true;

    public void start()
    {
        try
        {
            Display.setDisplayMode(new DisplayMode(800,600));
            Display.create();
            initFont();
        } catch (LWJGLException e) {
            e.printStackTrace();
            System.exit(0);
        }

        // init OpenGL here

        lastFPS = getTime(); // call before loop to initialise fps timer

        while (!Display.isCloseRequested())
        {
            // render OpenGL here

            updateFPS();
            Display.update();
        }

        Display.destroy();
    }

    public void initFont()
    {
        Font awtFont = new Font("Times New Roman", Font.BOLD, 24);
        TrueTypeFont font = new TrueTypeFont(awtFont, antiAlias);
    }

    public void updateFPS()
    {
            if (getTime() - lastFPS > 1000)
            {
                font.drawString(100, 50, "THE LIGHTWEIGHT JAVA GAMES LIBRARY", Color.yellow);
                fps = 0; //reset the FPS counter
                lastFPS += 1000; //add one second
            }
            fps++;
    }

    public long getTime()
    {
        return (Sys.getTime() * 1000) / Sys.getTimerResolution();
    }

    public static void main(String[] argv)
    {
        TheGame displayExample = new TheGame();
        displayExample.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:36:58.863

问题是您在 initFont 方法中重新声明字体。将 initFont 更改为：

```
public void initFont()
{
    Font awtFont = new Font("Times New Roman", Font.BOLD, 24);
    font = new TrueTypeFont(awtFont, antiAlias);
} 
```

# db2 - DB2 注册表和配置设置

> ID：15075422
> 
> 赞同：2
> 
> 时间：2013-02-25T20:00:38.850
> 
> 标签：db2, ibm-mobilefirst

我`DB2 10.1 (FP2)`正在`AIX 7.1`为`IBM Worklight 5.0.5`.

以下注册表设置是否可接受？

```
DB2_SKIPINSERTED=YES
DB2_OPTPROFILE=YES
DB2_INLIST_TO_NLJN=YES
DB2_MINIMIZE_LISTPREFETCH=YES
DB2_EVALUNCOMMITTED=YES
DB2_ANTIJOIN=EXTEND
DB2_SKIPDELETED=YES 
```

我找不到有关 DB2 设置的建议，因此使用 WCS 设置作为起点。

对 Worklight 的 dbm 和 db 配置设置有什么建议吗？

谢谢沙迪亚拉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:44:59.017

至于这些设置是否正确，像往常一样，答案是......这取决于。;-)

这些增强了并发性，因为一个连接受另一个连接的未提交行的影响较小（具有某些隔离级别）。这是否可取取决于正在完成的工作类型。请参阅[http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.perf.doc/doc/c0012389.html](http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.perf.doc/doc/c0012389.html) )

```
DB2_SKIPINSERTED=YES
DB2_SKIPDELETED=YES
DB2_EVALUNCOMMITTED=YES 
```

增强并发性的另一个重要设置是 DB CFG 参数 CUR_COMMIT - 现在默认为 ON。

现在已经过时了，它指的是优化配置文件的使用（有点像 DB2 的提示）。搜索有关此主题的信息中心。

```
DB2_OPTPROFILE=YES 
```

这些是可以改变优化器决策行为的注册表变量（通常是为了限制优化器做出自己的决定）。通常，它们仅应在特定应用程序（例如 Worklight 或 SAP 等）或 IBM 支持作为绩效参与的结果推荐时设置。请注意，当迁移到不同的 DB2 版本（例如，从 v9 到 v10）时，应始终重新检查变量的影响，因为优化器总是有改进，因此这些变量的重要性。

```
DB2_INLIST_TO_NLJN=YES
DB2_MINIMIZE_LISTPREFETCH=YES
DB2_ANTIJOIN=EXTEND 
```

# java - 重命名 maven 的 settings.xml 修复了错过的依赖错误？

> ID：15075426
> 
> 赞同：0
> 
> 时间：2013-02-25T20:00:48.753
> 
> 标签：java, maven

我最近在 maven 中遇到了构建失败，说我缺少应该很容易找到的依赖项。我几乎尝试了所有方法，唯一可行的方法是将我的 maven 的 settings.xml 重命名为 settings1.xml？如果我将该文件改回原来的名称，它会丢失我所有应该看到的 .jars。这里发生了什么？它是否正在使用另一个设置文件？

# php - 在 php 中处理档案

> ID：15075433
> 
> 赞同：0
> 
> 时间：2013-02-25T20:01:19.157
> 
> 标签：php, compression, inflate

我正在为网站（一种淡化的 CMS）开发一个可分发的框架，它有一个用于添加插件的模块系统。我将使用上传的档案来安装这些模块，并且我想允许使用 zip、bzip、gzip、rar 和 tar。我做了一些谷歌搜索，知道其中一些文件类型可以由 zlib 扩展或 ZipArchive 处理，但是，我不清楚这些包中的任何一个是否支持这些允许的文件类型的解包。我还研究了一些用于处理档案的 3rd 方类（主要是 pclzip），但大多数是几年前发布的，最近没有更新。我不确定现在应该如何处理以及这些包的工作方式是否存在差异。如果有人能对这个主题有更多的了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:59:09.287

是的，它们确实存在，并且对于所有提到的存档类型都存在扩展名（参见：[http](http://www.php.net/manual/en/refs.compression.php) ://www.php.net/manual/en/refs.compression.php ）。正如 Mark 所描述的，对于使用二进制工具的大规模解压缩操作，可能会更快——尽管没有进行基准测试。

这是一个关于如何使用 ZipArchive 的示例，请参阅其他文档：

```
$z = new \ZipArchive();
if ($z->open("/some/path/the.zip") === true) {

    // extract all
    $z->extractTo("/some/path/output/folder");

    // extract by rel path
    if (($c = $z->getFromName("some/file/in/zip.txt")) !== false) {
        file_put_contents("/tmp/my-file.txt", $c);
    }

    // iterate all, print index: name
    for ($i = 0; $i < $z->numFiles; $i++) {
        $info = $z->statIndex($i);
        echo "File #$i: ". $info['name']. ' ('. $info['size']. " size)\n";
    }
    $z->close();
} 
```

不同的界面有点烦人。您可能想使用包装器，有几个：[https ://packagist.org/search/?q=archive](https://packagist.org/search/?q=archive)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:35:45.437

很难为所有这些找到库。最简单的方法是使用`system()`运行相关实用程序来提取提供的文件类型。

# spring - PropertyPlaceholderConfigurer 未以编程方式加载

> ID：15075434
> 
> 赞同：2
> 
> 时间：2013-02-25T20:01:26.220
> 
> 标签：spring, spring-3

我有一个自定义 ApplicationContext 类，我试图以编程方式加载 PropertyPlaceholderConfigurer，然后在我的 XML 配置文件中使用占位符。

到目前为止，我已经尝试了三种不同的方法，每次我收到这样的错误：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named '${domain}.testId' is defined 
```

我做错了什么？

**上下文类**

```
public class MyApplicationContext extends GenericApplicationContext {
    public MyApplicationContext (String... locations) throws IOException {

        // method one
        ClassPathBeanDefinitionScanner scanner = new ClassPathBeanDefinitionScanner(this);
        scanner.scan("com.my.package");

        // method two
        new MyPropertyPlaceholderConfigurer().postProcessBeanFactory(getBeanFactory());

        // method three
        getBeanFactory().registerSingleton("propertyPlaceholderConfigurer", new MyPropertyPlaceholderConfigurer());

        // load XML config files
        XmlBeanDefinitionReader xmlReader = new XmlBeanDefinitionReader(this);
        for (String location : locations) {
            xmlReader.loadBeanDefinitions(location);
        }
    }
} 
```

**XML**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean id="test.testId" class="java.lang.String">
        <constructor-arg value="this is the test value" />
    </bean>

    <bean id="prod.testId" class="java.lang.String">
        <constructor-arg value="this is the prod value" />
    </bean>

    <alias name="${domain}.testId" alias="testId" />

</beans> 
```

**用法**

```
MyApplicationContext context = new MyApplicationContext(
    new String[] { "test.xml" });
Assert.assertEquals("this is the test value", context.getBean("testId")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:31:31.340

我很欣赏有关如何定义 bean 的答案，但事实证明问题要简单得多。我加载 bean 很好，但是在加载所有 bean 后我没有正确初始化我的上下文。对 refresh() 的简单调用就可以解决问题。

```
MyApplicationContext context = new MyApplicationContext(
    new String[] { "test.xml" });

context.refresh();   // this runs BeanFactoryPostProcessors like 
                     // MyPropertyPlaceholderConfigurer, among other things

Assert.assertEquals("this is the test value", context.getBean("testId")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:25:03.080

这是使您的属性在配置文件中可访问的标准方式。

```
<util:list id="locations">
    <value>classpath:appconfig.properties</value>
    <value>classpath:jdbc.properties</value>
</util:list>

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
      p:ignoreResourceNotFound="true"
      p:locations-ref="locations" />

<!-- bean that uses properties -->
<bean id="dataSource"
      class="com.mchange.v2.c3p0.ComboPooledDataSource"
      p:driverClass="${jdbc.driver}"
      p:jdbcUrl="${jdbc.url}"
      p:user="${jdbc.user}"
      p:password="${jdbc.pw}"
      p:initialPoolSize="5"
      p:minPoolSize="5"
      p:maxPoolSize="50"
      p:idleConnectionTestPeriod="5" /> 
```

如何在任何地方的配置文件中“注入”属性的另一种非常有用的方法是使用 maven：您使用相同的语法`${property-name}`，但在 maven 构建过程中更早地提供了值 - 这是 maven 配置的相关部分：

```
<properties>
<jdbc.url>jdbc:mysql://localhost:3306/dummyuserdb</jdbc.url>
<jdbc.user>root</jdbc.user>
<jdbc.pw>admin</jdbc.pw>
</properties> 
```

并且您必须在 Maven 过滤资源中包含 Spring 的配置目录：

```
<build>
    <resources>
    <resource>
        <directory>${basedir}/src/main/webapp/WEB-INF/spring-config</directory>
        <filtering>true</filtering>
        </resource>
</resources> 
```

或者，如果您更喜欢 java 配置：

```
 @Configuration
 @PropertySource(value = "config/jdbc.properties")
 public class BaseWebConfig {

    @Autowired Environment env;

    @Bean
    public MyBean myBean() {
       MyBean myBean = new MyBean();
       String propertyValue = env.getProperty("my-property-name");
       // do something with myBean and propertyValue
       return myBean;
    }
 } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:30:36.943

如果您只想使用自己的自定义`MyPropertyPlaceholderConfigurer`（假设它 extends `PropertyPlaceholderConfigurer`，那么您只需将其作为 a`bean`放在您的应用程序上下文中，它将为您完成所有其余的工作：

```
<bean class="my.pkg.MyPropertyPlaceholderConfigurer" /> 
```

# css - Bootstrap 中心水平形式

> ID：15075435
> 
> 赞同：2
> 
> 时间：2013-02-25T20:01:29.410
> 
> 标签：css, twitter-bootstrap

我试图通过设置`text-align:center;`然后在英雄单位中居中水平形式`display:block-inline;`

有关演示，请参见 jsfiddle [http://jsfiddle.net/bVJZ2/](http://jsfiddle.net/bVJZ2/)

但这并没有完全奏效，因为复选框和提交按钮不再正确对齐。任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:59:46.653

有一些问题不允许您将复选框居中。

1.  `<div class="controls">`有一个`margin-left`。你不应该把你的复选框放在那个 div 里面。
2.  有`input[checkbox]`一个`float: left`. 您应该使用以下方法删除该浮动：

    ```
    .radio input[type="radio"], .checkbox input[type="checkbox"] {
        float: none;
    } 
    ```

3.  复选框未对齐。您应该添加`vertical-align: top`到最后一个选择器。

总结一下：

**HTML：**

```
<div class="control-group">
   <label class="checkbox">
       <input type="checkbox"> Remember me
   </label>
   <button type="submit" class="btn">Sign in</button>
</div> 
```

**CSS：**

```
.radio input[type="radio"], .checkbox input[type="checkbox"] {
    float: none;
    vertical-align: top;
} 
```

你可以在这里看到结果：http: [//jsfiddle.net/GW8zk/](http://jsfiddle.net/GW8zk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T02:48:47.210

好吧，这就是你如何实现一个以中间为中心的形式的英雄单元的方法。

居中形式的 JSFiddle [http://jsfiddle.net/shail/YmmVS/](http://jsfiddle.net/shail/YmmVS/)

首先是CSS：

```
.hero-unit {
padding:50px 50px 50px 50px;
    }
.form-horizontal .control-label {
    width: 61px;
    }
.form-horizontal .controls {
margin-left: 80px;
    }
  /* Landscape phones and down */
  @media (max-width: 480px) { 

   .hero-unit{
        margin-left:-20px;
        margin-right:-20px;
      }
   .form-horizontal .controls {
        margin-left: 0;
      }
  } 
```

![形式](../Images/b19a69ac98198c9e600210f2267410ee.png) Html 部分：

```
<div class="container">
<div class="hero-unit">
    <div class="row-fluid">
        <div class="offset4 span4">
            <legend>Sign in to WebApp</legend>
            <form class="form-horizontal">
                <div class="control-group">
                    <label class="control-label" for="inputEmail">Email</label>
                    <div class="controls">
                        <input type="text" id="inputEmail" placeholder="Email">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputPassword">Password</label>
                    <div class="controls">
                        <input type="password" id="inputPassword" placeholder="Password">
                    </div>
                </div>
                <div class="control-group">
                    <div class="controls">
                        <label class="checkbox">
                            <input type="checkbox">Remember me</label>
                        <button type="submit" class="btn">Sign in</button>
                    </div>
                </div>
            </form>
        </div>
     </div>
   </div>
 </div> 
```

# python - 即使使用正确的路径，Vim 中的 Python（Django）自动完成功能也无法正常工作

> ID：15075436
> 
> 赞同：1
> 
> 时间：2013-02-25T20:01:31.957
> 
> 标签：python, vim, omnicomplete

我遵循[了 Sontek 的指南](http://sontek.net/blog/detail/turning-vim-into-a-modern-python-ide)，一切都很好，直到关于配置虚拟和 Django 自动完成的部分。他给出的让它工作的说明在我寻找答案的每个地方都被复制了......我遇到的问题是 python 路径显然很好，但我无法自动完成任何 python 库，内部或在 Django 之外。

我的 Django 项目文件夹是这样的：

```
- proj
  - bin (this is virtualenv's bin folter)
  - (other folders)
  - src (contains all code, including my settings.py) 
```

我`.vimrc`有这个

```
" Add the virtualenv's site-packages to vim path

py << EOF
import os.path
import sys
import vim
if 'VIRTUAL_ENV' in os.environ:
    project_base_dir = os.environ['VIRTUAL_ENV']
    sys.path.insert(0, project_base_dir)
    activate_this = os.path.join(project_base_dir, 'bin/activate_this.py')
    execfile(activate_this, dict(__file__=activate_this))
EOF 
```

我正在使用从`src`文件夹中调用 Vim

```
DJANGO_SETTINGS_MODULE=src.settings vim shop/models.py 
```

如果我运行，`:python from django import db`我根本不会收到任何错误，这应该是我的工作，但是如果我输入类似的东西`from django import co`并按下`tab`或者`ctrl-n`我得到

```
-- Omni completion (^O^N^P) Pattern not found 
```

我一直在尝试不同的插件，但似乎没有任何效果。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T19:10:48.070

```
import os.path 
```

应该：

```
import os 
```

我已经尝试过了，它对我有用。

# file - 在 COBOL 中创建文件

> ID：15075438
> 
> 赞同：4
> 
> 时间：2013-02-25T20:01:32.863
> 
> 标签：file, cobol

如果指定名称的文件不存在，如何使用 COBOL 创建行顺序 .dat 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T21:41:00.577

使用任一

```
OPEN OUTPUT fd 
```

每次**擦除任何现有数据**时都会创建一个新文件，或者将**OPTIONAL**关键字添加到 FILE-CONTROL SELECT 短语中。

```
ENVIRONMENT DIVISION.
INPUT-OUTPUT SECTION.
FILE-CONTROL.
    select OPTIONAL data-file
        assign to file-name
        organization is line sequential
        file status is data-file-status. 
```

并使用**OPEN IO data-file**。如果需要，COBOL 将为首次写入准备一个空文件。

有关任意示例，请参见[http://opencobol.add1tocobol.com/#does-opencobol-support-isam （不是行顺序的，但应该明白这一点）。](http://opencobol.add1tocobol.com/#does-opencobol-support-isam)

为了完整起见，此处包含列表（和输出）：

```
OCOBOL >>SOURCE FORMAT IS FIXED
      *> ***************************************************************
      *><* ================
      *><* indexing example
      *><* ================
      *><* :Author:    Brian Tiffin
      *><* :Date:      17-Feb-2009
      *><* :Purpose:   Fun with Indexed IO routines
      *><* :Tectonics: cobc -x indexing.cob
      *> ***************************************************************
       identification division.
       program-id. indexing.

       environment division.
       configuration section.

       input-output section.
       file-control.
          select optional indexing
          assign to "indexing.dat"
          organization is indexed
          access mode is dynamic
          record key is keyfield of indexing-record
          alternate record key is splitkey of indexing-record
              with duplicates
          .

      *> ** OpenCOBOL does not yet support split keys **
      *>  alternate record key is newkey
      *>      source is first-part of indexing-record
      *>                last-part of indexing-record
      *>      with duplicates

       data division.
       file section.
       fd indexing.
       01 indexing-record.
          03 keyfield          pic x(8).
          03 splitkey.
             05 first-part     pic 99.
             05 middle-part    pic x.
             05 last-part      pic 99.
          03 data-part         pic x(54).

       working-storage section.
       01 display-record.
          03 filler            pic x(4)  value spaces.
          03 keyfield          pic x(8).
          03 filler            pic xx    value spaces.
          03 splitkey.
             05 first-part     pic z9.
             05 filler         pic x     value space.
             05 middle-part    pic x.
             05 filler         pic xx    value all "+".
             05 last-part      pic z9.
          03 filler            pic x(4)  value all "-".
          03 data-part         pic x(54).

      *> control break
       01 oldkey               pic 99x99.

      *> In a real app this should well be two separate flags
       01 control-flag         pic x.
          88 no-more-duplicates          value high-value
             when set to false is              low-value.
          88 no-more-records             value high-value
             when set to false is              low-value.

      *> ***************************************************************
       procedure division.

      *> Open optional index file for read write
       open i-o indexing

      *> populate a sample database
       move "1234567800a01some 12345678 data here" to indexing-record
       perform write-indexing-record
       move "8765432100a01some 87654321 data here" to indexing-record
       perform write-indexing-record
       move "1234876500a01some 12348765 data here" to indexing-record
       perform write-indexing-record
       move "8765123400a01some 87651234 data here" to indexing-record
       perform write-indexing-record

       move "1234567900b02some 12345679 data here" to indexing-record
       perform write-indexing-record
       move "9765432100b02some 97654321 data here" to indexing-record
       perform write-indexing-record
       move "1234976500b02some 12349765 data here" to indexing-record
       perform write-indexing-record
       move "9765123400b02some 97651234 data here" to indexing-record
       perform write-indexing-record

       move "1234568900c13some 12345689 data here" to indexing-record
       perform write-indexing-record
       move "9865432100c13some 98654321 data here" to indexing-record
       perform write-indexing-record
       move "1234986500c13some 12349865 data here" to indexing-record
       perform write-indexing-record
       move "9865123400c13some 98651234 data here" to indexing-record
       perform write-indexing-record

      *> close it ... not necessary, but for the example
       close indexing

      *> clear the record space for this example
       move spaces to indexing-record

      *> open the data file again
       open i-o indexing

      *> read all the duplicate 00b02 keys
       move 00 to first-part of indexing-record
       move "b" to middle-part of indexing-record
       move 02 to last-part of indexing-record

      *> using read key and then next key / last key compare
       set no-more-duplicates to false
       perform read-indexing-record
       perform read-next-record
           until no-more-duplicates

      *> read by key of reference ... the cool stuff
       move 00 to first-part of indexing-record
       move "a" to middle-part of indexing-record
       move 02 to last-part of indexing-record

      *> using start and read next
       set no-more-records to false
       perform start-at-key
       perform read-next-by-key
           until no-more-records

      *> read by primary key of reference
       move "87654321" to keyfield of indexing-record

      *>
       set no-more-records to false
       perform start-prime-key
       perform read-previous-by-key
           until no-more-records

      *> and with that we are done with indexing sample
       close indexing

       goback.
      *> ***************************************************************

      *><* Write paragraph
       write-indexing-record.
         write indexing-record
             invalid key
                 display
                     "rewrite key: " keyfield of indexing-record
                 end-display
                   rewrite indexing-record
                       invalid key
                           display
                               "really bad key: "
                               keyfield of indexing-record
                           end-display
                   end-rewrite
         end-write
       .

      *><* read by alternate key paragraph
       read-indexing-record.
           display "Reading: " splitkey of indexing-record end-display
           read indexing key is splitkey of indexing-record
         invalid key
             display
                "bad read key: " splitkey of indexing-record
             end-display
               set no-more-duplicates to true
           end-read
       .

      *><* read next sequential paragraph
       read-next-record.
           move corresponding indexing-record to display-record
           display display-record end-display
           move splitkey of indexing-record to oldkey

           read indexing next record
               at end set no-more-duplicates to true
               not at end
                   if oldkey not equal splitkey of indexing-record
                       set no-more-duplicates to true
                   end-if
           end-read
       .

      *><* start primary key of reference paragraph
       start-prime-key.
           display "Prime < " keyfield of indexing-record end-display
           start indexing
              key is less than
                  keyfield of indexing-record
              invalid key
                  display
                      "bad start: " keyfield of indexing-record
                  end-display
                  set no-more-records to true
              not invalid key
                  read indexing previous record
                      at end set no-more-records to true
                  end-read
           end-start
       .

      *><* read previous by key of reference paragraph
       read-previous-by-key.
           move corresponding indexing-record to display-record
           display display-record end-display

           read indexing previous record
               at end set no-more-records to true
           end-read
       .
      *><* start alternate key of reference paragraph
       start-at-key.
           display "Seeking >= " splitkey of indexing-record end-display
           start indexing
              key is greater than or equal to
                  splitkey of indexing-record
              invalid key
                  display
                      "bad start: " splitkey of indexing-record
                  end-display
                  set no-more-records to true
              not invalid key
                  read indexing next record
                      at end set no-more-records to true
                  end-read
           end-start
       .

      *><* read next by key of reference paragraph
       read-next-by-key.
           move corresponding indexing-record to display-record
           display display-record end-display

           read indexing next record
               at end set no-more-records to true
           end-read
       .
       end program indexing.
      *><*
      *><* Last Update: 20090220 
```

输出：

```
Reading: 00b02
    12345679   0 b++ 2----some 12345679 data here
    97654321   0 b++ 2----some 97654321 data here
    12349765   0 b++ 2----some 12349765 data here
    97651234   0 b++ 2----some 97651234 data here
    12345679   0 b++ 2----some 12345679 data here
    97654321   0 b++ 2----some 97654321 data here
    12349765   0 b++ 2----some 12349765 data here
    97651234   0 b++ 2----some 97651234 data here
    12345679   0 b++ 2----some 12345679 data here
    97654321   0 b++ 2----some 97654321 data here
    12349765   0 b++ 2----some 12349765 data here
    97651234   0 b++ 2----some 97651234 data here
Seeking >= 00a02
    12345679   0 b++ 2----some 12345679 data here
    97654321   0 b++ 2----some 97654321 data here
    12349765   0 b++ 2----some 12349765 data here
    97651234   0 b++ 2----some 97651234 data here
    12345679   0 b++ 2----some 12345679 data here
    97654321   0 b++ 2----some 97654321 data here
    12349765   0 b++ 2----some 12349765 data here
    97651234   0 b++ 2----some 97651234 data here
    12345679   0 b++ 2----some 12345679 data here
    97654321   0 b++ 2----some 97654321 data here
    12349765   0 b++ 2----some 12349765 data here
    97651234   0 b++ 2----some 97651234 data here
    12345689   0 c++13----some 12345689 data here
    98654321   0 c++13----some 98654321 data here
    12349865   0 c++13----some 12349865 data here
    98651234   0 c++13----some 98651234 data here
    12345689   0 c++13----some 12345689 data here
    98654321   0 c++13----some 98654321 data here
    12349865   0 c++13----some 12349865 data here
    98651234   0 c++13----some 98651234 data here
    12345689   0 c++13----some 12345689 data here
    98654321   0 c++13----some 98654321 data here
    12349865   0 c++13----some 12349865 data here
    98651234   0 c++13----some 98651234 data here
Prime < 87654321
    87651234   0 a++ 1----some 87651234 data here
    12349865   0 c++13----some 12349865 data here
    12349765   0 b++ 2----some 12349765 data here
    12348765   0 a++ 1----some 12348765 data here
    12345689   0 c++13----some 12345689 data here
    12345679   0 b++ 2----some 12345679 data here
    12345678   0 a++ 1----some 12345678 data here 
```

在 indexing.dat 不存在的任何第一次运行中。随后的运行具有相同的输出：

```
rewrite key: 12345678
rewrite key: 87654321
rewrite key: 12348765
rewrite key: 87651234
rewrite key: 12345679
rewrite key: 97654321
rewrite key: 12349765
rewrite key: 97651234
rewrite key: 12345689
rewrite key: 98654321
rewrite key: 12349865
rewrite key: 98651234 
```

前置，因为 WRITE INVALID KEY 子句触发 REWRITE 以允许覆盖密钥和数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-26T22:15:47.283

我知道你的问题在这里很老了。但是我今天仍然遇到同样的问题，几个小时后，我发现我正在使用的带有 OpenCobolIDE 4.7.6 的 GnuCOBOL 2.0 在尝试使用 OPEN EXTEND 时会生成错误 35。我以一种不太优雅的方式解决了它，但效果很好。我正在分享我找到的解决方案。

```
 IDENTIFICATION DIVISION.
   PROGRAM-ID. CREATFIL.

   ENVIRONMENT DIVISION.
   CONFIGURATION SECTION.
   REPOSITORY.
       FUNCTION ALL INTRINSIC.
   INPUT-OUTPUT SECTION.
   FILE-CONTROL.
       SELECT FD-VIRTUAL ASSIGN TO "CADFILE.TXT"
       ORGANIZATION IS LINE SEQUENTIAL
       ACCESS MODE IS SEQUENTIAL
       FILE STATUS IS WS-GET-ERROR.

   DATA DIVISION.
   FILE SECTION.
   FD  FD-VIRTUAL.
   01  FS-BOOK.
       05 NOME PIC X(40).

   WORKING-STORAGE SECTION.
   77  WS-GET-ERROR      PIC XX.

   LOCAL-STORAGE SECTION.
   01  TB-VIRTUAL.
       05  TB-BOOK.
           10 LS-NOME    PIC X(40).
   77  LS-ENTER          PIC X.
   77  WS-RESP           PIC A VALUE "Y".

   PROCEDURE DIVISION.
       OPEN EXTEND FD-VIRTUAL.
       IF WS-GET-ERROR = "35" 
          OPEN OUTPUT FD-VIRTUAL
       END-IF
       IF WS-GET-ERROR = "00"
          PERFORM UNTIL UPPER-CASE(WS-RESP) NOT = "Y"
             DISPLAY X"0D"
             DISPLAY "Name: " WITH NO ADVANCING
             ACCEPT LS-NOME
             WRITE FS-BOOK FROM TB-BOOK
             DISPLAY "More record (Y) for YES " WITH NO ADVANCING
             DISPLAY "- any key for NOT: " 
                WITH NO ADVANCING
             ACCEPT WS-RESP
             IF UPPER-CASE(WS-RESP) NOT = "Y"
                EXIT PERFORM
             END-IF
          END-PERFORM
       END-IF.

       CLOSE FD-VIRTUAL.

       DISPLAY X"0D".
       DISPLAY "Press <ENTER> to finish... " WITH NO ADVANCING.
       ACCEPT LS-ENTER.
       STOP RUN.
   END PROGRAM CREATFIL. 
```

遵守指示

```
OPEN EXTEND FD-VIRTUAL.
IF WS-GET-ERROR = "35" 
   OPEN OUTPUT FD-VIRTUAL
END-IF 
```

# makefile - 为 gdb 配置我的 makefile

> ID：15075441
> 
> 赞同：0
> 
> 时间：2013-02-25T20:01:44.487
> 
> 标签：makefile, gdb, g++

我以前使用过 gdb，但从来没有使用过 makefile 并且只以非常简单的方式进行配置。g++ -g -o file.cpp 等。我已经尝试了一切，但我无法让它识别调试对象。我想调试我所有的可执行编译。

我正在运行 g++ 和 Ubuntu。

```
compile: scanner.o parser.o listing.o locals.o globals.o
    g++ -o compile scanner.o parser.o listing.o locals.o globals.o

scanner.o: scanner.c locals.h globals.h listing.h tokens.h
    g++ -c scanner.c

scanner.c: scanner.l
    flex scanner.l
    mv lex.yy.c scanner.c

parser.o: parser.c listing.h locals.h globals.h
    g++ -c parser.c

parser.c tokens.h: parser.y
    bison -d -v parser.y
    mv parser.tab.c parser.c
    mv parser.tab.h tokens.h

listing.o: listing.cc
    g++ -c listing.cc

locals.o: locals.cc
    g++ -c locals.cc

globals.o: globals.cc
    g++ -c globals.cc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:09:20.700

不要覆盖默认规则。只需根据需要分配 CC 和 CFLAGS。换句话说，你的 Makefile 应该是（完整的）：

```
CC=g++    # Not best practice.  See comments below
CFLAGS=-g
compile: scanner.o parser.o listing.o locals.o globals.o
    $(CC) $(CFLAGS) -o $@  $^

scanner.o: scanner.c locals.h globals.h listing.h tokens.h
parser.o: parser.c listing.h locals.h globals.h

scanner.c: scanner.l
    flex scanner.l
    mv lex.yy.c scanner.c

parser.c tokens.h: parser.y
    bison -d -v parser.y
    mv parser.tab.c parser.c
    mv parser.tab.h tokens.h 
```

顺便说一句，您确实应该使用`CXX`指定 C++ 编译器并适当地命名您的源代码文件。（对于 C 使用 *.c，对于 C++ 使用 *.cxx）由于您使用的是非标准名称，因此您需要使用 CC 的 C++ 编译器来欺骗 make，这并不是最佳实践。

# function - 想要将向量用作函数的参数，而不必分离其元素

> ID：15075444
> 
> 赞同：5
> 
> 时间：2013-02-25T20:01:49.617
> 
> 标签：function, matlab, parameter-passing

如果我使用以下命令调用 matlab 函数： ***func(1,2,3,4,5)*** ，它将完美运行。

但如果我这样做： ***a=[1,2,3,4,5]*** %(a[1;2;3;4;5] 给出相同的结果)

然后：

***函数（一）***

给我：

*？？？错误 ==> func at 11 输入参数不足。*

func.m 中的第 11 行是：

***错误(nargchk(5, 6, nargin));***

我注意到这非常有效：

***函数(a(1),a(2),a(3),a(4),a(5))***

如何使用向量“a”作为函数的参数？我有另一个返回 a 的函数 otherfunc(b) ，并希望将其输出用作参数，例如***func(otherfunc(b))***。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-06T11:31:43.433

[逗号分隔列表](http://www.mathworks.com/help/matlab/matlab_prog/comma-separated-lists.html?refresh=true) (CSL) 可以作为参数列表传递给函数，

所以你需要的是一个`1,2,3,4,5`从数组构造的 CSL。

它可以使用像这样的单元格数组生成：

```
a=[1,2,3,4,5];
c = num2cell(a);
func(c{:}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T23:31:25.923

也许您可以尝试使用 nargin - 函数中的一个变量，它具有输入参数数量的值。由于您需要不同长度的输入，我相信这最好用 varargin 处理，它可以设置为最后一个输入变量，然后将所有额外的输入参数组合在一起。

```
function result = func(varargin)
    if nargin == 5: % this is every element separately
        x1 = varargin{1}
        x2 = varargin{2}
        x3 = varargin{3}
        x4 = varargin{4}
        x5 = varargin{5}
    else if nargin == 1: % and one vectorized input
        [x1 x2 x3 x4 x5] = varargin{1} 
```

我已经`x1...x5`为你的输入变量写了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-20T19:53:35.847

另一种方法是创建一个单独的内联函数。假设您有一个带有多个参数的函数 f：

```
f = f(x1,x2,x3) 
```

您可以通过定义一个单独的函数 g 来使用参数值数组调用它：

```
g = @(x) f(x(1),x(2),x(3)) 
```

现在，如果您有一个参数值向量 v = [1,2,3]，您将能够使用 g(v) 调用 f(v(1),v(2),v(3))。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-24T16:01:47.140

您可以创建以下形式的函数：

```
function [ out ] = funeval( f, x )
   string = 'f(';
   for I = 1:length(x)
      string = strcat( string, 'x(' , num2str(I), '),' );
   end
   string( end ) = ')';
   out = eval( string );
end 
```

在这种情况下，`funeval( func, a )`给出所需的输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T21:50:51.890

由于 Matlab 中函数的参数本身可以是向量（甚至矩阵），因此您不能用单个向量替换多个参数。
如果`func`需要 5 个参数，则不能传递单个向量并期望 matlab 理解所有五个参数都是向量中的元素。Matlab 如何区分这种情况和第一个参数是 5 向量的情况？

所以，我建议这个解决方案

```
s.type = '()';
s.subs = {1:5};
func( subsref( num2cell( otherfunc(b) ), s ) ) 
```

我不确定这是否有效（我这里没有 matlab），但基本原理是将 5 向量`a`（ 的输出`otherfunc(b)`）转换为元胞数组，然后将其扩展为 5 个不同的参数`func`。
请不要区分`a{:}`和`a(:)`in this `subsref`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T20:04:23.380

只需让函数接受一个参数。

```
function result = func(a)
    if ~isvector(a)
        error('Input must be a vector')
    end
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-07T14:26:50.450

使用评估：

```
astr = [];
for i=1:length(a)
    astr     = [astr,'a(',num2str(i),'),']; % a(1),a(2),...
end
astr  = astr(1:end-1);
eval(['func(' astr ');']); 
```

# jquery - Jquery document.location.reload() 无法正常工作

> ID：15075447
> 
> 赞同：0
> 
> 时间：2013-02-25T20:01:55.130
> 
> 标签：jquery, reload

通过 ajax 更新数据库后，我需要重新加载页面。在我的 ajax post 方法中，我有如下内容：

```
success: function (data) {
    ....(some code doesn't matter)
    document.location.reload();
    ....(some other code I wish to execute after document is reloaded)

} 
```

但是，之后的代码`reload()`将首先执行，然后页面将重新加载。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:05:03.840

不要重新加载，而是重定向页面并在最后添加一个变量

```
window.location.replace("http://example.com/yourpage.php?extravariable"); 
```

然后，您可以添加一些代码来检查 GET 并在设置了 get 值时运行 javascript 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:06:54.470

当页面重新加载时，代码在`document.location.reload();`页面的旧实例上执行，而不是重新加载的。

您需要向当前位置添加一个参数，并在测试 document.location 上的参数的漏洞上执行 onDocumentReady 以添加您想要的代码。前任：

```
document.location = document.location.href + "?afterReload=true";

$(document).ready(function() {
  if ( window.location.search.substring(1) != '' ){
     //do something
  }
}); 
```

# ant - ant 和命令行参数和绝对路径

> ID：15075456
> 
> 赞同：0
> 
> 时间：2013-02-25T20:02:25.320
> 
> 标签：ant

我只是将 -D build.dir = ~/myhome/build 传递给我的 ant 脚本，当我回显 build.dir 时，它会相对于 build.xml 的位置出现，例如 ./~/myhome/build。

我正在使用命令行参数，因为我必须覆盖属性文件中定义的属性。

对此有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:05:34.620

试试这个代码：

```
<?xml version="1.0" encoding="UTF-8" ?>
<project default="all" basedir="."> 
    <taskdef resource="net/sf/antcontrib/antcontrib.properties" />
    <target name="all">
        <echo message="${user.home}" />
        <propertyregex property="build.dir"
               input="${build.dir}"
               regexp="~"
               replace="${user.home}"
                override="true" />      
        <echo message="${build.dir}" />
    </target>
</project> 
```

# macos - OS X 如何将项目添加到应用程序的顶部菜单？

> ID：15075462
> 
> 赞同：1
> 
> 时间：2013-02-25T20:02:34.703
> 
> 标签：macos, cocoa, menuitem

我正在尝试制作一个 OS X 应用程序，由于某种原因，我找不到有关如何将项目添加到主菜单（文件、编辑等）以及如何实际处理这些操作的任何信息。我发现的一切都是如何实现状态栏应用程序，这不是我想要的。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:09:37.880

菜单栏是应用程序的一部分`MainMenu.nib`，可以在那里进行编辑。与其他用户界面对象一样，每个菜单项都有一个可以配置为控制其功能的目标。

[此处提供视频教程。](http://www.youtube.com/watch?v=hF-sRs1_2-0)（我通常不喜欢视频，但这个视频非常准确，我例外。）

# java - 展开 折叠 展开 JTree 延迟加载的问题

> ID：15075463
> 
> 赞同：5
> 
> 时间：2013-02-25T20:02:42.240
> 
> 标签：java, swing, jtree, expand, collapse

我已经使用延迟加载实现了一棵树。第一级节点是在创建树时创建的，而子节点仅在用户展开任何特定节点时创建。

数据来自数据库，我们向数据库发起查询以填充子节点。实现 TreeExpansionListener 并使用 treeExpanded 方法的重写实现。在扩展时，我删除所选节点的所有子节点，进行数据库查询并将记录作为子节点添加到所选节点。在将任何节点添加到树之前，会向该节点添加一个虚拟子节点。使用 DefaultMutableTreeNode。

到目前为止一切顺利，按预期运行良好。

问题1 - 就像你一样，每次扩展都会调用数据库，所以如果一个节点被折叠并再次扩展，我将进行一次数据库旅行并再次处理......如果已经扩展，则不要重新加载节点...

问题 2 - 如果我必须进行强制刷新，即重新加载树并保持扩展状态。这现在处于工作状态......我怎样才能达到同样的效果以及解决上面的问题 1？

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T22:48:44.887

正如 MadProgrammer 所解释的，这里是一个小型演示示例，显示了当树在节点上扩展时动态加载数据的 JTree（并带有一个漂亮的加载栏作为奖励）：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.beans.Transient;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JProgressBar;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.TreeExpansionEvent;
import javax.swing.event.TreeWillExpandListener;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.ExpandVetoException;
import javax.swing.tree.MutableTreeNode;
import javax.swing.tree.TreePath;

public class TestJTree {

    public static class MyTreeNode extends DefaultMutableTreeNode {

        private boolean loaded = false;

        private int depth;

        private final int index;

        public MyTreeNode(int index, int depth) {
            this.index = index;
            this.depth = depth;
            add(new DefaultMutableTreeNode("Loading...", false));
            setAllowsChildren(true);
            setUserObject("Child " + index + " at level " + depth);
        }

        private void setChildren(List<MyTreeNode> children) {
            removeAllChildren();
            setAllowsChildren(children.size() > 0);
            for (MutableTreeNode node : children) {
                add(node);
            }
            loaded = true;
        }

        @Override
        public boolean isLeaf() {
            return false;
        }

        public void loadChildren(final DefaultTreeModel model, final PropertyChangeListener progressListener) {
            if (loaded) {
                return;
            }
            SwingWorker<List<MyTreeNode>, Void> worker = new SwingWorker<List<MyTreeNode>, Void>() {
                @Override
                protected List<MyTreeNode> doInBackground() throws Exception {
                    // Here access database if needed
                    setProgress(0);
                    List<MyTreeNode> children = new ArrayList<TestJTree.MyTreeNode>();
                    if (depth < 5) {
                        for (int i = 0; i < 5; i++) {
                            // Simulate DB access time
                            Thread.sleep(300);
                            children.add(new MyTreeNode(i + 1, depth + 1));
                            setProgress((i + 1) * 20);
                        }
                    } else {
                        Thread.sleep(1000);
                    }
                    setProgress(0);
                    return children;
                }

                @Override
                protected void done() {
                    try {
                        setChildren(get());
                        model.nodeStructureChanged(MyTreeNode.this);
                    } catch (Exception e) {
                        e.printStackTrace();
                        // Notify user of error.
                    }
                    super.done();
                }
            };
            if (progressListener != null) {
                worker.getPropertyChangeSupport().addPropertyChangeListener("progress", progressListener);
            }
            worker.execute();
        }

    }

    protected void initUI() {
        JFrame frame = new JFrame(TestJTree.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        MyTreeNode root = new MyTreeNode(1, 0);
        final DefaultTreeModel model = new DefaultTreeModel(root);
        final JProgressBar bar = new JProgressBar();
        final PropertyChangeListener progressListener = new PropertyChangeListener() {

            @Override
            public void propertyChange(PropertyChangeEvent evt) {
                bar.setValue((Integer) evt.getNewValue());
            }
        };
        JTree tree = new JTree() {
            @Override
            @Transient
            public Dimension getPreferredSize() {
                Dimension preferredSize = super.getPreferredSize();
                preferredSize.width = Math.max(400, preferredSize.width);
                preferredSize.height = Math.max(400, preferredSize.height);
                return preferredSize;
            }
        };
        tree.setShowsRootHandles(true);
        tree.addTreeWillExpandListener(new TreeWillExpandListener() {

            @Override
            public void treeWillExpand(TreeExpansionEvent event) throws ExpandVetoException {
                TreePath path = event.getPath();
                if (path.getLastPathComponent() instanceof MyTreeNode) {
                    MyTreeNode node = (MyTreeNode) path.getLastPathComponent();
                    node.loadChildren(model, progressListener);
                }
            }

            @Override
            public void treeWillCollapse(TreeExpansionEvent event) throws ExpandVetoException {

            }
        });
        tree.setModel(model);
        root.loadChildren(model, progressListener);
        frame.add(new JScrollPane(tree));
        frame.add(bar, BorderLayout.SOUTH);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestJTree().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:30:44.683

填充节点后，简单地不要重新填充它。On `treeExpanded`，只需检查父节点是否有任何子节点，如果有，则不要重新加载任何内容。

您将需要提供刷新父节点的能力。我通常用`JPopupMenu`.

# mysql - 如果只找到一条记录，则返回 Yes

> ID：15075465
> 
> 赞同：0
> 
> 时间：2013-02-25T20:02:54.330
> 
> 标签：mysql, sql

我有一个具有这种结构的表：

```
table
id      | site_id
-------------------
240     | 1
240     | 2
240     | 3
320     | 1
320     | 2
421     | 1
520     | 2
------------------- 
```

30 万条记录

现在我正在尝试编写一个查询来为每条记录（id）返回一个是或否。

例如，如果 id 为 240 的记录**只有**site_id 1，则返回“是”，如果有 2、3 等等，则返回“否”

我不知道如何处理它，但这是一个结果示例：

```
result_table
.-----------------------.
| id        | result    |
|-----------------------|
| 240       |   No      |  -- has a site_id 1, 2 and 3
| 320       |   No      |  -- has a site_id 1 and 2
| 421       |   Yes     |  -- has a site_id 1 only
| 520       |   No      |  -- has a site_id  2
'-----------------------' 
```

这是我到目前为止的查询，但似乎不正确

```
SELECT CASE WHEN count(id) > 1 THEN 'N' ELSE 'Y' END as Result 
FROM table sm 
WHERE sm.site_id IN (1) 
AND sm.site_id NOT IN (2,3,4,5,6,7,8,9) 
AND id = 240 
```

**更新**

所以这是我的完整查询，我添加了@gordon 的答案

```
SELECT 
    m.merchant_name,
    m.merchant_id,
    ut.realname,
    a.affiliate_name,
    (select (case when count(site_id) = 1 then 'Yes' else 'No' end) as result
    from site_merchant sm
    WHERE sm.merchant_id = m.merchant_id
    group by merchant_id) as isTjoos,   -- y or no
    (select (case when count(site_id) = 2 then 'Yes' else 'No' end) as result
    from site_merchant sm
    WHERE sm.merchant_id = m.merchant_id
    group by merchant_id) as isUCOnly
--  isdlkonly   -- y or no
FROM merchant m
LEFT JOIN merchant_editor_assignment mea ON mea.merchant_id = m.merchant_id
LEFT JOIN user_table ut ON ut.user_id = mea.user_id
LEFT JOIN affiliate a ON a.affiliate_id = m.affiliate_id_default 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:11:34.240

我将这个问题解释为您想要只有一个 site_id 值的 id。我以问题中的示例为例，site_id = 1。为此：

你想使用`count(distinct)`：

```
select id, (case when count(distinct site_id) = 1 then 'Yes' else 'No' end) as result
from site_merchant sm
group by id 
```

一个稍微高效的版本是使用`min()`and `max()`，假设 site_id 从不为 NULL：

```
select id, (case when min(site_id) = max(site_id) then 'Yes' else 'No' end) as result
from site_merchant sm
group by id 
```

这是因为 min 和 max 通常比`count(distinct)`.

如果要检查 site_id 是否为“1”而不是其他任何内容，则将条件添加`and min(site_id) = 1`到`when`子句中。

如果您想检查 site_id 是否为 1 并且恰好只有一行，那么您可以执行以下操作：

```
select id, (case when count(site_id) = 1 and min(site_id) = 1 then 'Yes' else 'No' end) as result
from site_merchant sm
group by id 
```

而且，如果您想检查是否正好有一行：

```
select id, (case when count(site_id) = 1 then 'Yes' else 'No' end) as result
from site_merchant sm
group by id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:11:16.610

```
SELECT
  it,
  CASE WHEN COUNT(CASE WHEN site_id THEN 1 END)=1
            AND COUNT(CASE WHEN site_id!=1 THEN 1 END)=0 THEN 'Yes'
       ELSE 'No'
  END
FROM sm
GROUP BY it 
```

请[在此处](http://sqlfiddle.com/#!2/7b155/1)查看小提琴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T20:11:30.000

```
SELECT ID, CASE WHEN EXTRA > 1 THEN 'No' ELSE 'Yes' END AS Result
FROM
(SELECT ID, Sum(site_id) AS Extra
 from myTable
 GROUP BY ID
) AS Test 
```

编辑：我想这应该在 MySQL 中工作。我还没有研究它。
这个想法是`SUM`增加site_id。对于**只有**site_id = 1 的记录，总和将为 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T23:05:25.203

这是我找到的解决方案。我使用@Gordons 查询开始，缺少的是 site_id，并且不需要 group by：

```
SELECT 
    m.merchant_name,
    m.merchant_id,
    ut.realname,
    a.affiliate_name,
    (select (case when count(*)>0  then 'No' else 'Yes' end) as result
    from site_merchant sm
    WHERE sm.merchant_id = m.merchant_id
    AND site_id != 1) as isTjoos,
    (select (case when count(*)> 0 then 'No' else 'Yes' end) as result
    from site_merchant sm
    WHERE sm.merchant_id = m.merchant_id
    AND site_id != 2) as isUCOnly,
    (select (case when count(*)> 0 then 'No' else 'Yes' end) as result
    from site_merchant sm
    WHERE sm.merchant_id = m.merchant_id
    AND site_id != 3) as isDLKonly
FROM merchant m
LEFT JOIN merchant_editor_assignment mea ON mea.merchant_id = m.merchant_id
LEFT JOIN user_table ut ON ut.user_id = mea.user_id
LEFT JOIN affiliate a ON a.affiliate_id = m.affiliate_id_default 
```

感谢您的帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T20:05:58.220

您的查询似乎过于复杂。刚开始，为什么`IN(1)`and `NOT IN(2,3...9)`？`AND id = 240`当您的“结果样本”显然不想要时，为什么要限制为单个 ID ( )？这没有任何意义。这个怎么样？

```
SELECT CASE WHEN count(merchant_id) > 1 THEN 'N' ELSE 'Y' END as isTjoos 
FROM site_merchant
GROUP BY site_id; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T20:09:42.367

我会使用有计数语句。像这样的东西：

```
SELECT site_id
FROM site_merchant
HAVING (count(merchant_id) > 1)
GROUP BY site_id; 
```

# highcharts - x 轴 tickInterval 在 highstock 图表中无法正常工作

> ID：15075467
> 
> 赞同：5
> 
> 时间：2013-02-25T20:02:57.907
> 
> 标签：highcharts, highstock

我在 highstock 图表中显示了许多系列。我选择 highstock 是因为如果用户添加了超过 4 小时的数据点，我想显示至少 4 小时的数据并选择滚动（但我不希望启用 rangeSelector 或导航器，如果这与我的问题有关）我有）。

我认为这很简单，但我在 x 轴上显示 15 分钟间隔时遇到问题。当动态添加一个数据点时，图表正确显示了 15 分钟的刻度间隔，但当添加更多数据点时，x 轴开始不正确地缩放时间。如果我然后刷新页面并显示一个包含多个数据点的图表，我会得到非常奇怪的滴答间隔。

这是我的 xAxis 选项：

```
xAxis: {
        type: 'datetime',
        min: 1361815200000,
        max: 1361829780000,
        tickInterval: 15 * 60 * 1000,
        minTickInterval: 15 * 60 * 1000, // 15 minute intervals
        gridLineWidth: 2,
        labels: {
            formatter: function () {
                var d = new Date(this.value);
                return (d.getMinutes() == 0) ? '<b>' + Highcharts.dateFormat('%H:%M', this.value) + '</b>' : d.getMinutes();
            }
        }
    } 
```

你可以在这里看到其余的：http: [//jsfiddle.net/pxCsX/](http://jsfiddle.net/pxCsX/)

我错过了什么？我已经修改了 minRange、type 和其他 xAxis 和 series 属性并搜索了 highstock 文档，但我一直在想出 bupkis。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T22:14:38.267

将 ordinal 设置为 false 可以解决问题：

```
xAxis: {
    ordinal: false
} 
```

# php - PHP cookie 和会话

> ID：15075468
> 
> 赞同：-1
> 
> 时间：2013-02-25T20:03:01.413
> 
> 标签：php, session, cookies

登录时进入另一个页面时，我不断收到此错误：

```
Warning: session_start() [function.session-start]: Cannot send session cache limiter -      headers already sent (output started at     /home/content/63/10400363/html/SeniorProject/update.php:5) in      /home/content/63/10400363/html/SeniorProject/update.php on line 6 
```

此外，每当我直接调用 update.php 时（未登录时），它不应该显示表单，它应该将您引导回登录页面。我花了几个小时在这上面，无法弄清楚我做错了什么。任何帮助将不胜感激。

这是我的代码：LOGIN.PHP

```
<?php 
session_start(); 
require("passwords.php");
?>
<?php
function redirect(){    
    echo '<META HTTP-EQUIV="Refresh" Content="0; URL=update.php">';    
    exit;    
};
if ($_POST["ac"]=="log") { /// do after login form is submitted  
     if ($USERS[$_POST["username"]]==$_POST["password"]) { /// check if submitted 
    // username and password exist in $USERS array 
          $_SESSION["logged"]=$_POST["username"]; 
     } else { 
          echo 'Incorrect username/password. Please, try again.'; 
     }; 
}; 
if (array_key_exists($_SESSION["logged"],$USERS)) { //// check if user is logged or not  
     echo '<center><font color="red">You are logged in.</font></center>';
     echo '<center><font color="red">You will be redirected to the correct page in     3 seconds.</font></center>';
     echo "Your session is running " . $_SESSION["logged"];

} else { //// if not logged show login form 
     echo '<form action="login.php" method="post"><input type="hidden" name="ac"     value="log"> '; 
     echo 'Username: <input type="text" name="username" />'; 
     echo 'Password: <input type="password" name="password" />'; 
     echo '<input type="submit" value="Login" />'; 
     echo '</form>'; 
 }; 
?> 
```

更新.PHP

```
<?php
session_start();  
require("passwords.php");
check_logged();
?>
<?php

'<p align="center">
<h1>UPDATE RECORDS</h1>
<form method="post" action="doupdate.php">
    <fieldset>
    <legend> Update Form: </legend>
    <font color="red">PROF. ID*</font> <br>
    <input name="id" type="text" size="50" /><br>
    <font color="red">BUILDING* </font> <br>
    <input name="building" type="text" size="50" /><br>
    <font color="red">ROOM NUM* </font> <br>
    <input name="roomNum" type="text" size="50" /><br>
    <font color="red">OFFICE HR* </font> <br>
    <input name="officeHr" type="text" size="50" /><br>
    <font color="red">SPECIAL REMARKS </font> <br>
    <input name="special" type="text" size="50" /><br><br>
    <input name="submit" type="submit" value="submit" />

    </fieldset><br><br>
</form>
<font color="red">* REQUIRED FIELDS<br>
OFFICE HOURS UPDATED IN FOLLOWING FORMAT:<br>
M/TH 00:00-11:11</font><br>

</html>';
echo "Your session is running " . $_SESSION["logged"];
?> 
```

密码.PHP

```
 //OMITTED PASSWORDS ARRAY HERE
 //OMITTED PASSWORDS ARRAY HERE
 //OMITTED PASSWORDS ARRAY HERE
 //OMITTED PASSWORDS ARRAY HERE

function check_logged(){ 
     global $_SESSION, $USERS; 
     if (!array_key_exists($_SESSION["logged"],$USERS)) { 
          header("Location: login.php"); 

      }; 
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:06:21.403

尝试插入 session_start(); 进入 PASSWORDS.PHP 并在其他文件中删除它。我认为这比它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:10:18.097

在会话开始之前，您不能向用户输出任何内容。您的 update.php 文件也不会将表单回显给用户。

# c# - 内存不足线程 - 性能测试工具

> ID：15075469
> 
> 赞同：2
> 
> 时间：2013-02-25T20:03:02.487
> 
> 标签：c#, multithreading, threadpool, out-of-memory

我正在创建一个工具来加载测试（发送 http: GETs），它运行良好，但最终由于内存不足错误而死。

**问：**我怎样才能重置线程，以便这个循环可以持续运行并且不会出错？

```
 static void Main(string[] args)
    {
       System.Net.ServicePointManager.DefaultConnectionLimit = 200;

       while (true)
        {
            for (int i = 0; i < 1000; i++)
            {
                new Thread(LoadTest).Start(); //<-- EXCEPTION!.eventually errs out of memory
            }
            Thread.Sleep(2);
        }
    }

    static void LoadTest()
    {
        string url = "http://myserv.com/api/dev/getstuff?whatstuff=thisstuff";

        // Sends http get from above url ... and displays the repose in the console....
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:07:41.373

使用[ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)并使用 QueueUserWorkItem 而不是创建数千个线程。线程是昂贵的对象，内存不足也就不足为奇了，此外，在有这么多线程的情况下，您将无法获得任何性能（在您的测试工具中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:14:17.887

您的代码片段创建了很多线程，难怪它最终会耗尽内存。这里最好使用线程池。您的代码将如下所示：

```
 static void Main(string[] args)
    {
        System.Net.ServicePointManager.DefaultConnectionLimit = 200;
        ThreadPool.SetMaxThreads(500, 300);
        while (true)
        {
            ThreadPool.QueueUserWorkItem(LoadTest);
        }
    }

    static void LoadTest(object state)
    {
        string url = "http://myserv.com/api/dev/getstuff?whatstuff=thisstuff";
        // Sends http get from above url ... and displays the repose in the console....
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T20:21:05.097

您正在实例化左右和中心的线程。这很可能是你的问题。你想更换

```
new Thread(LoadTest).Start(); 
```

和

```
Task.Run(LoadTest); 
```

这将在 ThreadPool 中的线程上运行您的 LoadTest，而不是每次都使用资源来创建一个新线程。然而。这将暴露一个不同的问题。

ThreadPool 上的线程是有限资源，您希望尽快将 Threads 返回到 ThreadPool。我假设您使用的是同步下载方法，而不是 APM 方法。这意味着当请求被发送到服务器时，产生请求的线程正在休眠，而不是去做一些其他的工作。

要么使用（假设.net 4.5）

```
var client = new WebClient();
var response = await client.DownloadStringTaskAsync(url);
Console.WriteLine(response); 
```

或使用回调（如果不是 .net 4.5）

```
var client = new WebClient();
client.OnDownloadStringCompleted(x => Console.WriteLine(x));
client.BeginDownloadString(url); 
```

# java - 检查并增加java堆

> ID：15075471
> 
> 赞同：0
> 
> 时间：2013-02-25T20:03:20.027
> 
> 标签：java, memory, windows-server-2008-r2

所以为了增加java内存，我会这样做：

```
set JAVA_OPTS=-Xms512m -Xmx8g 
```

在 Windows 2008 服务器计算机（64 位）上，我最多可以为 Xmx 做什么？

将以上内容添加到类路径后，是否需要重新启动任何内容？

如何通过 cmd 行检查大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:06:57.787

您可以将其设置为您喜欢的值，但 Xmx 不应大于系统物理内存。

如果您遇到性能问题并想要更改堆大小，则根据 Oracle 的说法，“将最大大小设置为接近平台上总物理内存的值”。

[http://www.oracle.com/technetwork/java/javase/memorymanagement-whitepaper-150215.pdf](http://www.oracle.com/technetwork/java/javase/memorymanagement-whitepaper-150215.pdf)

在检查方面，您可以使用 jstat 或 jmap 从命令行进行检查。请看下面的链接

[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html)

# xna - XNA 如何在调整大小时渲染和更新

> ID：15075480
> 
> 赞同：2
> 
> 时间：2013-02-25T20:04:02.877
> 
> 标签：xna, resize, render, updates

是否可以在调整窗口大小以使其不拉伸时继续渲染和更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:22:48.843

这深深地融入了 XNA`Game`类的行为。~~我现在正在处理这个确切的问题，但我还没有一个好的解决方案。~~编辑：我现在是如何找到解决方案的——但它没有回答关于缩放的问题——所以我把它作为[问题/答案对发布在这里](https://gamedev.stackexchange.com/q/51376/288)。

您可能会潜入思考并断开在开始调整大小时暂停游戏计时器的事件（并在停止时取消暂停）。我还没有尝试过，我有点讨厌在不了解它们为什么存在的情况下这样做。

（就我个人而言，我正在考虑让我的游戏也订阅调整大小的开始/结束事件，然后让`Update`自己在适当的计时器上抽水，直到 XNA 回来。我不会担心显示的缩放。）

* * *

解决此问题的一种方法是`Game`完全替换该类。[XNA WinForms Sample](http://xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_1)提供了一个合适的替代品——尽管您必须实现自己的 Draw/Update 循环和计时。我刚刚在旧的关卡编辑器中对此进行了测试，并且在调整大小时它可以按照您的意愿工作。

尽管当您使窗口变大时它确实会减慢很多，因为它会不断重新分配后台缓冲区以使其更大。您可以替换该行为以使其过度分配后备缓冲区大小，因此它不会经常重新分配。

* * *

潜在问题与 win32 有关，并[在 GameDev.net 上的此线程](http://www.gamedev.net/topic/488074-win32-message-pump-and-opengl---rendering-pauses-while-draggingresizing/?view=findpost&p=4189300)中进行了详细描述。但它也没有真正提供令人满意的解决方案。

有趣的是，WinForms 示例利用了它的`OnPaint`方法（并且您通过不断调用得到一个循环`Invalidate`）。而 XNA 的内置`Game`类订阅`Application.Idle`.

# javascript - 文本输入选择在 IE9 中不起作用

> ID：15075481
> 
> 赞同：2
> 
> 时间：2013-02-25T20:04:15.267
> 
> 标签：javascript, internet-explorer-9, selection

单击按钮时，我试图在文本输入中获取用户选择的文本。这就是我正在尝试的：

```
<head>
    <script type="text/javascript">
        function GetSelectedText () {
            if (window.getSelection) {  // all browsers, except IE before version 9
                var range = window.getSelection ();                                        
                alert (range.toString ());
            } 
            else {
                if (document.selection.createRange) { // Internet Explorer
document.getElementById("foo").focus();
                    var range = document.selection.createRange();
                    alert (range.text);
                }
            }
        }
    </script>
</head>
<body>
    <button onclick="GetSelectedText ()">Get the selected text!</button>
    <input type = 'text' id = 'foo' />12345
</body> 
```

它在所有浏览器中都按预期工作，除了`IE9`. 在`IE9`中，如果您从`12345`块中选择一些文本并按下按钮，则所选文本会被警告。但是，如果您在文本输入中键入内容，选择其中一些内容，然后单击按钮，则会生成空白警报。

谁能告诉我如何让它工作`IE9`？还有什么方法可以让选择开始的光标位置也开始（类似于Mozilla的`selectionStart`）？我正在寻找 Javascript 解决方案，没有`Rangy`或其他相关的 jQuery 库..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:54:19.403

文本输入和文本区域具有单独的选择 API，即输入本身`selectionStart`的`selectionEnd`属性。这些在 IE <= 8 中不受支持，但您已经有了替代方案。

这`GetSelectedText()`是适用于所有主要浏览器的函数的实现：

演示：http: [//jsfiddle.net/UK8gA/](http://jsfiddle.net/UK8gA/)

代码：

```
function GetSelectedText() {
    var selectedText = "";
    var input = document.getElementById("foo");
    var sel, val = input.value;
    input.focus();
    if (typeof input.selectionStart == "number") {
        selectedText = val.slice(input.selectionStart, input.selectionEnd);
    } else if ( (sel = document.selection) && sel.createRange) { // IE
        var range = document.selection.createRange();
        selectedText = range.text;
    }
    alert(selectedText);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:10:02.870

你可以看看 jQuery Caret 插件：[jCaret](http://www.examplet.buss.hk/jquery/caret.php)

```
// Get start pos in intput box with id="box1"
$("#box1").caret().start

// Get end pos
$("#box1").caret().end

// Get selected text
$("#box1").caret().text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:18:39.247

除了 "document.getElementById("foo").focus();" 行之外，一切看起来都不错 似乎没有必要，这可能是浏览器无法检测到突出显示的文本的原因。尝试删除它，看看你会得到什么。

# ssl - 如何构建用于 OpenSSL 的 CA 目录？

> ID：15075488
> 
> 赞同：3
> 
> 时间：2013-02-25T20:05:03.093
> 
> 标签：ssl, openssl, certificate, certificate-authority

如果您想设置自己的 CA，您很可能会创建一个具有适当权限的专用文件夹，您可以在其中保存所有必要的文件，`serial`例如`index.txt`.

此外，您可能希望保留所有收到的 CSR，以及所有签名和发布的证书。此外，很可能还有一个`.config`您想要存储在该文件夹中的 OpenSSL 文件。

现在我的问题是，是否有任何最佳实践，或者在如何构建 CA 目录方面是否有任何常识？是否应该将所有内容都保存在一个文件夹中，还是使用子文件夹更有意义？如果是这样，您将为哪些项目创建特定的子文件夹？...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:17:50.403

我现在`ca`按如下方式组织文件夹：

```
ca
+- certs             # Here, the created certificates are stored
+- private           # Permissions locked down to 0700
|  +- ca.key
+- ca.cert
+- index.txt
+- serial
+- openssl.config 
```

无论如何，我期待其他想法。

# jquery - 浏览器与 jQuery、IE 和 FF 不兼容

> ID：15075492
> 
> 赞同：1
> 
> 时间：2013-02-25T20:05:22.910
> 
> 标签：jquery, select, filter, cross-browser, option

我有一些简单的 jQuery，它允许用户单击一个链接`LI`来过滤选择列表中的选项。它在 FF 中完全运行，但在 Chrome 或 IE 中仅部分运行。我在控制台中没有收到任何错误。问题是类更新适用于 Chrome 和 IE，但不适用于过滤。

我必须走在正确的轨道上，因为它在 FF 中工作，但我认为我在这里遗漏了一个概念。我非常感谢您的意见。

jQuery：

> 摘要：获取单击的 li 的 id，更新 li 类，使用该 id 值仅显示以该值作为标题的选择列表选项。

```
$("ul#mission-list li").click(function(){
    var currMission = this.id;
    $("li.here").removeClass();
    $(this).addClass('here');
    $("#selBox1").children('option').hide();
    if (currMission != 'all') {
        $("#selBox1").children("option[title^=" + currMission + "]").show();
    }
    else {
        $("#selBox1").children('option').show();
    }
}); 
```

HTML

选择列表很简单：

```
<ul id="mission-list">
    <li id="all" class="here"><a href="javascript:void(0);">All</a></li>
    <li id="group1"><a href="javascript:void(0);">Group 1</a></li>
    <li id="group2"><a href="javascript:void(0);">Group 2</a></li>
    <li id="group3"><a href="javascript:void(0);">Group 3</a></li>
</ul>

And when the select options get rendered from the query, it's something like this (simplified down here).  This is the list that should be filtered in the display as a result of clicking the li option above:
<select multiple="multiple" id="selBox1">
    <option value="12" title="group1">Mission 1</option>
    <option value="34" title="group2">Mission 2</option>
    <option value="45" title="group2">Mission 3</option>
    <option value="78" title="group3">Mission 3</option>
    <option value="90" title="group3">Mission 3</option>
</select> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:36:51.363

The issue is that you are triyng to "display: none" on a multiple select box which will not work. Instead you must set to visible: hidden. But the issue with this is that the values will still be there so you may have to rethink and recreate the multiple select box by the values instead.

[http://jsfiddle.net/UBdhn/1](http://jsfiddle.net/UBdhn/1)

Javascript

```
$("ul#mission-list li").click(function(){
    var currMission = this.id;
    console.log(this.id);
    $("li.here").removeClass();
    $(this).addClass('here');
    console.log($("#selBox1").children());
    $("#selBox1").children().css("visibility", "hidden");
    if (currMission != 'all') {
        $("#selBox1").children("option[title^=" + currMission + "]").css("visibility", "visible");
    }
    else {
        $("#selBox1").children('option').css("visibility", "visible");
    }
}); 
```

# html - 在打印 css 中调整列宽

> ID：15075493
> 
> 赞同：1
> 
> 时间：2013-02-25T20:05:24.780
> 
> 标签：html, css, printing

在打印预览中，我试图使所有标题列在一行中对齐.....但是某些标题需要另一行，因为列中的字母更多....如何使所有标题在一行中对齐的列......我调整了媒体 css 中的每一列宽度......但仍然没有扩展该列以使其成为一行，提供下面的代码......

[http://jsfiddle.net/e5JEH/embedded/result/](http://jsfiddle.net/e5JEH/embedded/result/)

```
 @media print {

            body {margin:0; padding:0; line-height: 1.4em; word-spacing:1px; letter-spacing:0.2px; font: 12px Arial, Helvetica,"Lucida Grande", serif; color: #000;}

            .mainDiv {
                display: none;
            }

              #soLeft{ 
                width: 300px;
                /*border: 1px solid red; */
                background-color: green;
              }

              #billLabelLeft{ /*border: 1px solid red;*/ font-size: 12px; width: 50px;}
              #billTextSO{ width: 221px; /*border: 1px solid red;*/}
              .form-horizontal .controls {
                margin-left: 5px;
              }
              .form-horizontal .control-label {
                text-align: left;
                width: 50px;
              }
              #attentionTextSo{ width: 221px; }
              #addressTextSo{ width: 221px; }
              #cityTextSo{width: 70px; margin-left: 25px; height: 13px; }
              #stateLabelLeftSo{display: inline-block; margin-left: 4px;/* border: 1px solid red;*/ background-color: green; -webkit-print-color-adjust: exact; }
              #stateTextSo{width: 20px;  height: 13px;}
              #zipLabelLeftSo{display: inline-block; margin-left: 1px;}                   
              #zipTextSo{width: 25px; height: 13px;}
              #countryTextSo{width: 90px; margin-left: 5px; height: 13px;}
              #phoneTextSo{width: 70px; height: 13px;}
              #emailTextSo{width: 50px;}
              #userListSO{margin-left: 20px;color: white; display: inline-block; background-color: #cc3333;}
              #addUsersSO{color: white; display: inline-block; background-color: #cc3333;}
              #textLeftSO{
                display: none;
                /*width: 221px; margin-left: 58px;*/
              }
              #mainTextLeftSO{width: 221px;}
              #emailControlSO{width: 25px; display: inline-block;margin-left: 59px; margin-left: 40px;  margin-right: 20px;}
              #emailLabelSO{width: 11px;}

              #soRight{
                display: inline-block; 
               /* border: 1px solid red; */
                clear: left;
                position: relative;
                bottom: 160px;
                /*bottom: 250px;*/
                width: 300px; 
                float: right;
              }
              #shipSORight{width: 221px;}
              #attentionSORight{width: 221px;}
              #addressSORight{width: 221px;}
              #citySORight{width: 70px; margin-left: 25px; height: 13px; /*border: 1px solid red;*/}
              #stateSORight{width: 20px;  height: 13px; }
              #stateLabelSORight{display: inline-block; border: 1px solid right; margin-left: 1px;}               
              #zipSORight{width: 22px; height: 13px;}
              #zipLabelSORight{display: inline-block; margin-left: 4px;}
              #countrySORight{width: 90px; margin-left: 2px; height: 13px;}
              #phoneSORight{width: 70px; height: 13px;}
              #addressListSORight{color: white; display: inline-block; background-color: #cc3333; margin-left: 55px;}
              #newAddressSORight{color: white;  display: inline-block; background-color: #cc3333;}
              #storeFilesText{width: 140px;}
              #storeFilesButtonSO{margin-left: 140px; display: inline-block; background-color: #666; color: white;}
              #uploadFilesText{width: 125px;}
              #uploadFilesButtonSO{margin-left: 130px; display: inline-block; background-color: #666; color: white;}
              #downloadFilesText{width: 125px;}
              #downloadFilesButtonSO{margin-left: 115px; display: inline-block; background-color: #666; color: white;}
              #filesSO{width: 31px;}

              #fileContainerSO{
                display: none;
              }

               #storeFilesControl{
                width: 15px; display: inline-block;margin-left: 1px; margin-left: 10px;

              }

              #uploadFilesControl{
                width: 15px; display: inline-block;margin-left: 45px;
              }

              #downloadFilesControl{
                width: 15px; display: inline-block;margin-left: 45px;
              }

              #referenceSO{
                display: none;
              }

              #soTable{
                position: relative;
                bottom: 150px;
               /* bottom: 250px;*/
                border: 1px solid right;
              }

              .vendorListHeading {
                background-color: #1a4567;
                color: white;
                -webkit-print-color-adjust: exact; 
              }
              #soSecondTable{
                position: relative;
                bottom: 150px;
               /* bottom: 250px;*/
               /*  border: 1px solid green;*/
              }

              #quoteNumberPO{/*border: 1px solid red;*/ width: 310px;}
              #shippingMethodPO{width: 310px;border: 1px solid black;}
              #shippingAccountPO{width: 310px;border: 1px solid black;}

              #paddingEP{padding-left: 37px;}

              #QaPO{width: 6px;border: 1px solid black;}

              #decriptionPO{width: 992px;/*border: 1px solid red;*/ }

              #unitPricePO{width: 180px;/*border: 1px solid red;*/ }

              #partIDPO{ border: 1px solid black;}

              #paddingFirstEP{text-align: center;}

              #mfgNamePO{ border: 1px solid black; }
              #soLastRow{
                position: relative;
                bottom: 170px;
               /* bottom: 250px;*/
                /*border: 1px solid green;*/
              }

              #soTextConatiner{
                display: inline-block; margin-left: 1px;
                /*border: 1px solid red;*/
              }

               #soFirstTextLastRow{
                width: 125px;
              }

              #soSecondTextConatiner{display: inline-block; margin-left: 4px; }
              #soSecondTextLastRow{width: 124px;}

              #subTotalContainer{width: 160px; display: inline-block; margin-left: 79px;/* border: 1px solid red;*/}
              #markUpSoContainer{
                display: none;
              /*width: 258px; display: inline-block; position: relative; bottom: 81px; left: 440px; border: 1px solid red;*/}

              #printSOButtons{
                display: none;
              }

              #saveButton, #saveEmailButton, #printSummaryButton, #printDetailsButton{margin-top: 0px;}

/*

              #subTotalPrice{margin-left: 76px; }
              #taxPrice{margin-left: 170px;}
              #shippingPrice{margin-left: 106px;}
              #totalPrice{margin-left: 102px;}

*/
 #subTotalPrice{margin-left: 10px; }
              #taxPrice{margin-left: 107px;}
              #shippingPrice{margin-left: 38px;}
              #totalPrice{margin-left: 37px;}

          }

<div class="bs-docs-example" id="soTable" style="padding-top: 10px;">
              <table class="table" style="margin-bottom: 0px;width: 100%; max-width: 100%; background-color: transparent; border-collapse: collapse; border-spacing: 0;">
                <thead>
                  <tr class="vendorListHeading" style="background-color: #1a4567;color: white; -webkit-print-color-adjust: exact;">
                    <th id="datePO">Date</th>
                    <th id="referencePO">PO Number</th>
                    <th id="termPO">Term</th>
                    <th id="taxPO">Tax</th>
                    <th id="quoteNumberPO">Quote Number</th>
                    <th id="statusPO">Status</th>
                    <th id="buyerPO">Account Mgr</th>
                    <th id="shippingMethodPO">Shipping Method</th>
                    <th id="shippingAccountPO">Shipping Account</th>
                    <th id="QaPO">QA</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="">
                    <td style="border: 1px solid black;">22</td>
                    <td style="border: 1px solid black;">20130000</td>
                    <td style="border: 1px solid black;">Jim B.</td>
                    <td style="border: 1px solid black;">22</td>
                    <td style="border: 1px solid black;">510 xxx yyyy</td>
                    <td style="border: 1px solid black;">zznn@abc.co</td>
                    <td style="border: 1px solid black;">PDF</td>
                    <td style="border: 1px solid black;">12/23/2012</td>
                    <td style="border: 1px solid black;">Approved</td>
                    <td style="border: 1px solid black;">PDF</td>
                  </tr>

                </tbody>
              </table>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:08:15.183

创建一个仅打印的样式表，您可以使用标准 CSS 创建它们，但您尝试使用 EM 而不是 PX。当您`<link`将 css 添加到 html 页面时，请确保添加属性，该属性`media="print"`将使样式表成为仅打印样式表。看看[http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)以供进一步参考

# cloud - 云中的软件开发实用吗？

> ID：15075496
> 
> 赞同：2
> 
> 时间：2013-02-25T20:05:51.293
> 
> 标签：cloud, development-environment

有没有人尝试过在云中进行软件开发？我没有设置带有 Web 服务器、DBMS、编译器和 IDE 的台式机或笔记本电脑，而是考虑将这些安装在 Amazon EC2 实例上。然后我可以通过 VNC 客户端连接到它，并在可以访问 Internet 的任何地方进行开发。但我担心速度和安全性。如果您考虑过或尝试过，请分享您的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T07:06:52.227

您可以在云上拥有一个完整的开发环境。但是，您应该根据自己的目的在 IaaS 或 PaaS 之间进行选择。在 PaaS 上，您通常启用所需的服务并开始使用它们，而无需关心配置或安装过程。您可以通过单击鼠标启用 MySQL 数据库、云端 IDE 或运行时环境。

例如，我知道使用[Codenvy](http://www.cloudbees.com/platform-service-codenvy.cb)，您可以直接在云上进行编码、构建和调试。它们支持某些语言，但如果您需要另一种语言，您应该在云上寻找另一个 IDE。其中有一些。

如今，您可以轻松地将源代码存储在在线存储库中，甚至可以构建和部署到运行时实例。所以你可以有一个这样的模式：

Cloud IDE -> 存储库 -> CI 工具 -> 运行时环境

您可以观看我发现的有关 PaaS 的视频[。](http://www.youtube.com/watch?v=oHQcu7Px8Qc)它解释了上面的模式，除了云 IDE。

在 IaaS 上，您可能会遇到类似的情况。但是，您必须从头开始安装所有内容。

您应该自己尝试一下，看看它是否满足您的需求。对于大型项目，我更喜欢使用 Eclipse、IntelliJ、Netbeans、...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T23:48:46.990

您可以考虑使用 VNC 连接器在云中运行 IDE 映像，或者使用纯云 IDE。云 IDE 在配置、性能和安全性方面表现出很大的潜力。作为一些额外的背景，您可以阅读有关云 IDE 是否是未来的信息，以及在 quora 上的云 IDE 的整体市场，并提出了一些很好的问题并得到了回答。

[https://www.quora.com/Do-you-think-that-Web-Based-IDEs-are-the-future-of-IDEs/answer/Tyler-Jewell？**snids** =895306182& **nsrc** =1&**过滤器**=全部](https://www.quora.com/Do-you-think-that-Web-Based-IDEs-are-the-future-of-IDEs/answer/Tyler-Jewell?__snids__=895306182&__nsrc__=1&__filter__=all)

[https://www.quora.com/What-is-the-market-size-of-cloud-IDEs-and-what-are-the-possible-business-models/answer/Tyler-Jewell](https://www.quora.com/What-is-the-market-size-of-cloud-IDEs-and-what-are-the-possible-business-models/answer/Tyler-Jewell)

免责声明：我是 Cloud IDE 制造商 Codenvy 的创始人。

# javascript - Javascript函数编译？

> ID：15075502
> 
> 赞同：0
> 
> 时间：2013-02-25T20:06:10.513
> 
> 标签：javascript, function

我注意到，在 javascript 中编码时，我在调用它之前或之后声明该函数并不重要。在其他语言中它会导致异常，但是在 chrome 中运行 javascript 时它工作得很好。那是只有chrome，还是正常的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:09:21.657

你所看到的是函数提升的作用：[http ://elegantcode.com/2011/03/24/basic-javascript-part-12-function-hoisting](http://elegantcode.com/2011/03/24/basic-javascript-part-12-function-hoisting)

# macos - 在 emacs + iterm2 中显示适当的日晒颜色

> ID：15075508
> 
> 赞同：3
> 
> 时间：2013-02-25T20:06:38.533
> 
> 标签：macos, emacs

我在 Ethan 的网站上看到了以下内容，而不是日晒主题：

![emacs 主题](../Images/3cf66058fea38da7957a9198f5edaabe.png)

我尝试了许多不同的方法（xterm-256colors，重新编译不同的曝光主题），但似乎没有一个显示正确的颜色。

请帮忙！非常感谢！

# c# - SqlConnection 忽略用户的默认架构

> ID：15075512
> 
> 赞同：5
> 
> 时间：2013-02-25T20:06:57.177
> 
> 标签：c#, schema, default, sqlconnection

抱歉这么长，但我看到了很多问题，其中包含的信息太少......如果有人在前几行看到我的错误，我会很高兴......

我有一个 SQL Server 2008 R2 数据库，并且在通过 C# SqlConnection 连接时无法获得我认为应该是正确的行为。

我有两个使用 Visual C# 2010 Express 构建的 C# 应用程序：

*   一种用于数据导入/导出/报告和浏览
*   一种用于做一些复杂的处理

这一切都在 Windows 7 上，所有更新等......

这两个应用程序使用的一些表是共享的公共表，而另一些则需要保持分开。由于我需要能够在双方之间转换和传输数据，因此我希望将所有这些都保存在一个数据库中。

为了保持一定程度的分离，我创建了两个模式、两个用户、两个角色和两个登录，例如：

```
CREATE LOGIN [Import_User] WITH PASSWORD=N'*****'
CREATE LOGIN [Engine_User] WITH PASSWORD=N'*****'

CREATE USER [Import_User] FOR LOGIN [Import_User] WITH DEFAULT_SCHEMA=[Import_Schema]
CREATE USER [Engine_User] FOR LOGIN [Engine_User] WITH DEFAULT_SCHEMA=[Engine_Schema]

CREATE ROLE [Import_Role] AUTHORIZATION [dbo]
CREATE ROLE [Engine_Role] AUTHORIZATION [dbo]

EXEC('CREATE SCHEMA [Import_Schema] AUTHORIZATION [Import_User]')
EXEC('CREATE SCHEMA [Engine_Schema] AUTHORIZATION [Engine_User]')

-- Import role permissions on the Import schema
GRANT EXECUTE, DELETE, INSERT, SELECT, UPDATE, REFERENCES ON SCHEMA::[Import_Schema] TO [Import_Role]

-- Engine_Role permissions on the engine schema
GRANT EXECUTE, DELETE, INSERT, SELECT, UPDATE, REFERENCES ON SCHEMA::[Engine_Schema] TO [Engine_Role]

EXEC sp_addrolemember N'Import_Role',  N'Import_User'
EXEC sp_addrolemember N'Engine_Role',  N'Engine_User'

GRANT CONNECT TO [Import_User]
GRANT CONNECT TO [Engine_User] 
```

然后我在每个模式中创建一些表并存储过程，以适合每个角色。引擎模式中可能有 20 个表，导入模式中有 30 个左右。其中一些在两个模式中非常相似，但并不完全相同，例如：

```
CREATE TABLE [Engine_Schema].[Problem](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Name] [varchar](50) NOT NULL,
    [Description] [varchar](max) NULL,
 CONSTRAINT [PK_Status] PRIMARY KEY CLUSTERED ( [ID] ASC )
    WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF,
          ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCK  = ON) ON [PRIMARY]) 
 ON [PRIMARY]

CREATE TABLE [Import_Schema].[Problem](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Name] [varchar](50) NOT NULL,
    [Client] [varchar](50) NOT NULL,
    [Description] [varchar](max) NULL,
 CONSTRAINT [PK_Status] PRIMARY KEY CLUSTERED ( [ID] ASC )
    WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF,
          ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCK  = ON) ON [PRIMARY]) 
 ON [PRIMARY] 
```

当我通过 SSMS 检查使用这两个登录名时，这一切似乎都工作正常 - 每个登录名都能看到我期望的表和 SP。在每种情况下，我都可以在 SSMS 中运行查询和 USP，而无需使用架构前缀，因为这些连接使用我为每个登录名/用户设置的默认架构。如果我以“sa”身份登录，那么我当然可以看到两种模式中的所有内容。

在我的 C# 代码中，我像这样连接到数据库：

```
SqlConnection dbConnection = new SqlConnection(""server=laptop; database=test; user id=Engine_User; password=*****; Trusted_Connection=yes; connection timeout=30");
dbConnection.Open(); 
```

然后我尝试像这样直接查询数据库表：

```
using (SqlCommand cmdSelectProblems = new SqlCommand()) {
  cmdSelectProblems.Connection = dbConnection;
  cmdSelectProblems.CommandText = "Select ID, Name from Problem order by Name";
  DataTable dataTableProblems = new DataTable();
  using (SqlDataAdapter dataAdapterProblems = new SqlDataAdapter(cmdSelectProblems)) {
    dataAdapterProblems.Fill(dataTableProblems);
    ... 
```

或者我可以尝试使用我的存储过程之一，如下所示：

```
using (SqlCommand cmd = new SqlCommand()) {
  cmd.Connection = dbConnection;
  cmd.CommandType = CommandType.StoredProcedure;
  cmd.CommandText = "SelectProblems";
  using (SqlDataAdapter da = new SqlDataAdapter(cmd))
    da.Fill(_problemsTable);
} 
```

但是，当我尝试通过我的 C# 代码（如这些示例）使用连接时，我收到如下错误：

```
Invalid object name 'Problem' 
```

或者

```
Could not find stored procedure 'SelectProblems' 
```

我似乎需要使用显式模式前缀来访问数据库中相同的 DB 对象。就我测试它们而言，使用模式前缀明确包含所有东西都可以从我的 C# 代码中运行，因此将直接表查询更改为：

```
 cmdSelectProblems.CommandText = "Select ID, Name from [Engine_Schema].Problem order by Name"; 
```

或尝试使用以下架构前缀访问 USP：

```
 cmd.CommandText = "[Engine_Schema].SelectProblems"; 
```

然后一切正常。

现在我*知道*使用显式模式名称是最佳实践，但我在 C# 和存储过程中都有一整套代码，这些代码是在不使用这些模式前缀的情况下编写的。如果我可以让 C#`SqlConnection`查询尊重我定义和使用的登录名的默认模式，那将会简单得多。我相信按照我的设置方式应该可以正常工作，但我想我一定在某个地方遗漏了一些东西。

到目前为止，我已经在这上面浪费了两天时间，我所读到的所有内容都表明这一切都应该奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:32:34.413

> 服务器=笔记本电脑；数据库=测试；用户 id=Engine_User；密码= ***** ;
> **Trusted_Connection=yes** ; 连接超时=30

这是您的问题 - 您使用的是 Windows 身份验证而不是 SQL 身份验证。将您的连接字符串更改为`Trusted_Connection=no`，一切都应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:17:36.013

在 rmdbs 上设置用户默认模式

```
USE AdventureWorks;
ALTER USER Engine_User WITH DEFAULT_SCHEMA = Engine_Schema;
GO 
```

对导入模式执行相同的操作

# mule - 如何在mule中连接2个值？

> ID：15075515
> 
> 赞同：6
> 
> 时间：2013-02-25T20:07:04.940
> 
> 标签：mule

有人可以让我知道如何在 mule 中连接多个值吗？

就像是，

```
#[payload.getPayload()].concat(#[getSubject()]) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T21:39:11.987

我假设您使用的是 Mule 3.3.x 或更高版本。如果是这样，您可以使用 Mule 表达语言（MEL）。

使用 MEL 的一个示例是：

```
#['Hello' + 'World'] 
```

或者 MEL 还允许您使用标准 Java 方法调用：

```
#[message.payload.concat(' Another String')] 
```

[MEL 备忘单](https://blogs.mulesoft.com/wp-content/uploads/2012/12/refcard-mel.pdf)

**骡子 4 更新**

对于 Mule 4。Dataweave 2.0 是主要的表达语言：

简单的连接：

```
#['Hello' ++ ' World'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-27T17:03:06.903

其他替代方法是使用**Mule Design**插件：

根据需要多次删除**“附加字符串”操作。**

此操作获取上一步的消息有效负载并将指定的字符串连接到它。不确定性能细节，但肯定会更容易维护。

[附加到字符串 - MuleSoft](https://docs.mulesoft.com/mule-user-guide/v/3.2/append-string-transformer-reference)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-28T05:33:59.387

您可以使用表达式组件声明字符串缓冲区

```
<expression-component doc:name="Expression"><![CDATA[StringBuffer sb = new 
    StringBuffer();
    flowVars.stBuffer=sb;
    ]]></expression-component> 
```

然后在流中的任何位置附加使用附加到字符串缓冲区。

flowVars.stBuffer.append("要追加的字符串")

完成后用于`#[flowVars.stBuffer]`访问连接的字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-16T07:03:13.817

如果您想在 mule 流中添加通过有效负载接收到的两个不同的值，那么我们可以使用 concat() 方法。

例如下面我们通过arraylist接收到值，我在其中添加了两个不同的字段，即FirstName和LastName -

concat(#[payload[0].'firstname']," "#[payload[0].'lastname']

# php - 使用 SESSION 创建购物车对象

> ID：15075516
> 
> 赞同：0
> 
> 时间：2013-02-25T20:07:09.187
> 
> 标签：php, session, shopping-cart

我应该如何创建我的购物车对象而不每次都覆盖会话/对象？我下面的代码无法正常工作，因为当我每次单击提交按钮时添加项目时，它都会从头开始并覆盖购物篮。

在此处查看实时版本：[http ://www.animportantdate.co.uk/home/products.php](http://www.animportantdate.co.uk/home/products.php)

我的代码是：

```
 session_start();
 include('oopCart.php');

 $basket = new shoppingCart($_SESSION['cart']);

 if (isset($_POST['submit'])){
      $id = $_POST['id'];
      $qty = $_POST['qty'];
      $basket->addItem($id, $qty);
 }
 ?>
   <form method="POST" action="products.php">
<input type="hidden" value="dog" name="id">
<input type="hidden" value="10" name="qty">
<input type="submit" value="buy 10 dogs" name="submit">
   </form>

  <?php
  echo '<BR>items in basket: '. $basket->countItems();
  echo '<BR>Total number of dogs (201): '. $basket->numberOfProduct('dog');
  echo '<BR>is dog in basket? '. $basket->isInCart('dog');
  ?> 
```

编辑：我在下面添加了一些购物车类。我应该提到，当我创建对象并测试它包含在同一个 php 文件中的所有方法时，它工作正常。因此，这些方法都运行良好。只是实例化给我带来了问题。

```
 class ShoppingCart{

protected $id;
protected $qty;
protected $cart = array();

// constructor accepts the session variable to create cart object
function __construct($cart=""){
   $this->cart = $cart;
}

function addItem($id, $qty=1){
    if (($this->isInCart($id))  == false ){ 
        $this->cart[$id] = array( 'id' => $id, 'qty' => $qty);
    } else{
        $this->cart[$id]['qty'] += $qty;            
    }
}

function isInCart($id){
    $inCart=false;
    if ($this->cart[$id]){
        return $inCart=true;
                break;
    }   
    return $inCart;
}

public function isEmpty(){
    return (empty($this->cart));
}

function countUniqueItems(){
    if ($this->isEmpty()==false){
        foreach($this->cart as $item){
            if($item['id']){
                $uniqueItems++;
            }
        }
    }
    return $uniqueItems;

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:47:35.213

也许您的会话设置配置错误。如果 php.ini 文件中的会话路径不正确，如果您将错误报告设置为 0，则可能实际上并未保存会话。

检查您的 php.ini 会话部分。

# php - 上个月和下个月按钮不适用于 PHP 日历

> ID：15075522
> 
> 赞同：2
> 
> 时间：2013-02-25T20:07:37.077
> 
> 标签：php, calendar

我正在使用严格的 PHP 日历，而我的上一个和下一个按钮无法正常工作。到目前为止，我只有月份、年份和一个小表格。我还没有实际的日历。该表单由一个按钮组成，该按钮将日历带到当前月份和年份。每个月和年都有一个下拉框，带有一个允许用户选择月和年的提交按钮。然后两个按钮用于转到上/下个月。我的代码是：

```
<?php
$month_numbers = array(1,2,3,4,5,6,7,8,9,10,11,12);
$months_of_year = array("January","February","March","April","May","June","July","August","September","October","November","December");
$days_of_week = array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");
$month = ($_GET['m']) ? $_GET['m'] : date("n");
$current_month = date("n");
$year = ($_GET['y']) ? $_GET['y'] : date("Y");
$current_year = date("Y");
$previous_month = ($month - 1);
$next_month = ($month + 1);
if($month == 0)
{
  $month = 12;
  $year--;
}
if($month == 13)
{
  $month = 1;
  $year++;
}
$month_name = $months_of_year[$month - 1];
$first_day_of_month = new DateTime();
$first_day_of_month -> setDate($year,$month,1);
$first_day_of_month = $first_day_of_month -> format("w");
echo("<form name = 'formCalendar' id = 'formCalendar' action = 'index.php?' method = 'get'>");
echo("  <table border = '1' cellspacing = '0' cellpadding = '2'>");
echo("    <thcolspan = '7'>
            {$month_name} {$year}
            <span class = 'formTopRight'>
              <input type = 'button' value = 'Today' onclick = 'location=\"index.php?m={$current_month}&y={$current_year}\"'/>
              <select name = 'm' id = 'selMonth'>");
for($a = 0; $a < count($months_of_year); $a++)
{
  echo("        <option value = '{$month_numbers[$a]}'>{$months_of_year[$a]}</option>");
}
echo("        </select>");
echo("        <select name = 'y' id = 'selYear'>");
for($b = ($current_year - 10); $b <= ($current_year + 10); $b++)
{
  echo("        <option value = '{$b}'>{$b}</option>");
}
echo("        </select>");
echo("        <input type = 'submit' name = 'dateChange' id = 'dateChange' value = 'Go'/>");
echo("        <input type = 'button' name = 'prev' value = '<<' onclick = 'location=\"index.php?m={$previous_month}&y={$year}\"'/>");
echo("        <input type = 'button' name = 'next' value = '>>' onclick = 'location=\"index.php?m={$next_month}&y={$year}\"'/>");
echo("  </table>");
echo("<form>");
?> 
```

我已将它上传到我的网站[www.rgbwebd.net/tests](http://www.rgbwebd.net/tests)上的测试文件中，这样您就可以亲眼看到它在做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:23:41.757

一个简单的解决方法是计算您是否需要在返回时使用前一年，因为您在前进时已经这样做了。

您可以利用`$previous_year`和使用它而不是`$year`.

像这样

```
'location=\"index.php?m={$previous_month}&y={$previous_year}\"'/>"); 
```

并像您在顶部一样进行计算。

```
$previous_month = ($month - 1);
$previous_year = $year;
$next_month = ($month + 1);
if($month == 0)
{
  $month = 12;
  $year--;
}
if($month == 13)
{
  $month = 1;
  $year++;
}
if($previous_month == 0)
{
  $previous_month = 12;
  $previous_year--;
} 
```

**编辑**

您不应该使用一个变量并在早期对其进行修改以支持两种不同的操作。因此，您用于`$month`填写上一个和下一个按钮。您应该将它们分成`$next_month; $next_year;`和`$previous_month; $previous_year;`（用于下一个和上一个按钮）。此外，您可能会查看[PHP 日期](http://php.net/manual/en/function.date.php)并使用方法来添加/减去一个月并格式化输出。

# bash - 如何更频繁地更新 bash_history？

> ID：15075523
> 
> 赞同：3
> 
> 时间：2013-02-25T20:07:37.677
> 
> 标签：bash

我经常在我的 .bash_history 文件中查看我是如何运行程序的或者我使用了哪些参数。问题是我的历史似乎很不完整。我会发现一些命令是我几个月前运行的，另一些是我昨天运行的，但不存在。我认为问题在于我经常使用 ssh 工作，而且我经常不会干净地注销，而是在我的笔记本电脑休眠或移动到不同的 wifi 网络时断开连接。所以看起来 bash 只在退出时写入历史文件。这是正确的吗？有没有办法强制它写每个命令，或者每隔几个命令？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T20:11:40.430

添加`history -a`到您的`PROMPT_COMMAND`以在每次提示之前更新您保存的历史记录。

```
PROMPT_COMMAND='history -a' 
```

这应该在您的`.bashrc`文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-30T19:52:21.043

您可以安装[Advanced Shell History](https://github.com/barabo/advanced-shell-history)`bash` ，这是一个将您的或`zsh`历史写入 sqlite 数据库的开源工具。这比简单地包含`history -a`在您的. 中要极端一些`PROMPT_COMMAND`，但它还记录了当前工作目录、命令退出代码、命令开始和停止时间、会话开始和停止时间、tty 等内容。

如果您想查询历史数据库，您可以编写自定义 SQL 查询并将它们提供给捆绑的`ash_query`工具。还有一些有用的预打包查询，但由于我对 SQL 非常了解，所以我通常只是在需要查找某些内容时打开数据库并编写一些自定义的内容。

不过，我发现一个非常有用的命令是查看当前工作目录的历史记录。它可以帮助我记住我在做某事时停下来的地方。

```
vagrant@precise32:~$ ash_query -q CWD
session
    when                   what
1
    2014-08-27 17:13:07    ls -la
    2014-08-27 17:13:09    cd .ash
    2014-08-27 17:16:27    ls
    2014-08-27 17:16:33    rm -rf advanced-shell-history/
    2014-08-27 17:16:35    ls
    2014-08-27 17:16:37    less postinstall.sh
    2014-08-27 17:16:57    sudo reboot -n 
```

以及使用当前工作目录（以及它下面的任何内容）的相同历史记录：

```
vagrant@precise32:~$ ash_query -q RCWD
session
    where
        when                   what
1
    /home/vagrant/advanced-shell-history
        2014-08-27 17:11:34    nano ~/.bashrc
        2014-08-27 17:12:54    source /usr/lib/advanced_shell_history/bash
        2014-08-27 17:12:57    source /usr/lib/advanced_shell_history/bash
        2014-08-27 17:13:05    cd
    /home/vagrant
        2014-08-27 17:13:07    ls -la
        2014-08-27 17:13:09    cd .ash
    /home/vagrant/.ash
        2014-08-27 17:13:10    ls
        2014-08-27 17:13:11    ls -l
        2014-08-27 17:13:16    sqlite3 history.db
        2014-08-27 17:13:43    ash_query
        2014-08-27 17:13:50    ash_query -Q
        2014-08-27 17:13:56    ash_query -q DEMO
        2014-08-27 17:14:39    ash_query -q ME
        2014-08-27 17:16:26    cd
    /home/vagrant
        2014-08-27 17:16:27    ls
        2014-08-27 17:16:33    rm -rf advanced-shell-history/
        2014-08-27 17:16:35    ls
        2014-08-27 17:16:37    less postinstall.sh
        2014-08-27 17:16:57    sudo reboot -n 
```

FWIW - 我是该项目的作者和维护者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T11:12:17.523

**执行以下命令**

1.  导出 HISTTIMEFORMAT="%d/%m/%y %T"
2.  shopt -s histappend
3.  PROMPT_COMMAND="历史-a;$PROMPT_COMMAND"

注意-您可以将上述命令添加到 .bash_profile 文件并重新启动以获得永久解决方案

# xml - 在 XML 文档中选择节点值返回 null

> ID：15075525
> 
> 赞同：2
> 
> 时间：2013-02-25T20:07:41.087
> 
> 标签：xml, vb.net

这是我试图解析的 XML 响应：

```
<?xml version="1.0" encoding="utf-8"?>
<double xmlns="http://www.webserviceX.NET/">0.7627</double> 
```

VB代码：

```
Dim responseString As String

Dim fromCurrency As String = "EUR"
Dim toCurrency As String = "USD"

Dim req As System.Net.HttpWebRequest = System.Net.HttpWebRequest.Create("http://www.webservicex.net/CurrencyConvertor.asmx/ConversionRate?FromCurrency=" & fromCurrency & "&ToCurrency=" & toCurrency)
Dim Resp As System.Net.HttpWebResponse = req.GetResponse()
Dim reader As StreamReader = New StreamReader(Resp.GetResponseStream)
responseString = reader.ReadToEnd()

'get the XML
Dim objXML As New XmlDocument
objXML.LoadXml(responseString)

Dim root As XmlNode = objXML.DocumentElement

Dim nodeList As XmlNodeList = root.SelectNodes("/double") 
```

如何读取“0.7627”的结果值？

我试过：

```
nodeList(0).InnerText 
```

和

```
nodeList(0).SelectSingleNode("/double").InnerText 
```

两者都抛出错误“对象引用未设置为对象的实例”。

我还尝试添加一个命名空间管理器：

```
Dim mgr As XmlNamespaceManager = New XmlNamespaceManager(objXML.NameTable)
mgr.AddNamespace("currency", objXML.DocumentElement.NamespaceURI)

Dim node As XmlNode = objXML.SelectSingleNode("double", mgr) 
```

并通过以下方式选择：

```
node.InnerText 
```

但这也会引发“对象引用未设置为对象的实例”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:22:51.310

以下是我在代码中看到的问题：

*   您需要正确定义名称空间（它是 XML 中的名称`"http://www.webserviceX.NET/"`：）

*   您需要在传递给的 XPath 表达式中使用命名空间`SelectSingleNode`

这是我的做法（使用 C#）：

```
var namespaceManager = new XmlNamespaceManager(objXML.NameTable);
namespaceManager.AddNamespace("wsx", "http://www.webserviceX.NET/");

var doubleNode = root.SelectSingleNode("/wsx:double", namespaceManager);

Console.WriteLine(doubleNode.InnerText); 
```

这是等效的 VB.NET（我希望它是正确的，我使用工具转换了代码）：

```
Dim namespaceManager = New XmlNamespaceManager(objXML.NameTable)
namespaceManager.AddNamespace("wsx", "http://www.webserviceX.NET/")

Dim doubleNode = root.SelectSingleNode("/wsx:double", namespaceManager)

Console.WriteLine(doubleNode.InnerText) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:23:02.783

您可以尝试使用 LINQ to XML：

```
Imports System.XML.Linq

(...)

Dim req As System.Net.HttpWebRequest = System.Net.HttpWebRequest.Create("http://www.webservicex.net/CurrencyConvertor.asmx/ConversionRate?FromCurrency=" & fromCurrency & "&ToCurrency=" & toCurrency)
Dim Resp As System.Net.HttpWebResponse = req.GetResponse()

Dim doc as XDocument = XDocument.Load(Resp.GetResponseStream)
Dim myDoubleValue as Double = CDbl(doc.Root) 
```

`myDoubleValue`应该是 0.7627

# arrays - 使用 Python/JSON 打印新闻标题

> ID：15075528
> 
> 赞同：0
> 
> 时间：2013-02-25T20:07:54.263
> 
> 标签：arrays, json

我在正确解析数组时遇到了困难。我意识到这是一个新手错误，所以请原谅我。

例子：

```
import urllib2
import json
import sys

print "Good Morning, Rusty"
i = 0

print "From USA Today: Top Headlines"
f = urllib2.urlopen('http://api.usatoday.com/open/articles/topnews?encoding=json&api_key=98j............v5a93qs')
json_string = f.read()
parsed_json = json.loads(json_string)
for i in parsed_json[0]['stories']['title']:
        print json.dump(i)

f.close() 
```

有一个称为故事的主要部分，在它下面多次出现描述、标题、链接、pubDate 和其他几个字段。

我只是想打印该 JSON 提供的十几个标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:34:45.890

好吧，我做了更多的学习和研究，至少得到了可以打印前 5 个标题的代码：

这是我解决这个问题的方法：

```
json_string = f.read()
parsed_json = json.loads(json_string)
for i in range(6):
        title = parsed_json['stories'][i]['title']
        link = parsed_json['stories'][i]['link']
        print title
        print link
        print "-----------------------------------" 
```

# windows-phone-7 - Window Phone 7 和 MVVM，页面的 Loaded 事件

> ID：15075531
> 
> 赞同：2
> 
> 时间：2013-02-25T20:08:22.467
> 
> 标签：windows-phone-7, xaml, mvvm

嗨，在我以这种方式实例化我的视图模型后，我在使用 MVVM 模式时遇到了问题：

```
<phone:PhoneApplicationPage.Resources>
    <local:DetailVM x:Key="DetailVM"/>

</phone:PhoneApplicationPage.Resources> 
```

我如何知道此页面何时加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:46:28.763

您可以使用[Blend SDK](http://www.microsoft.com/en-us/download/details.aspx?id=3062)并添加一个事件触发器来触发您的视图模型中的命令。

包括

```
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
```

在您的 xmlns 中包含，然后为`Loaded`事件添加触发器。

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
        <i:InvokeCommandAction Command="{Binding LoadCommand}" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

`LoadCommand`只是一个返回 的属性`ICommand`。您当然应该将页面的 DataContext 设置为您的视图模型，或者将绑定的源设置为资源中的源。

# magento - 欧盟和世界其他地区的 Magento 税率

> ID：15075535
> 
> 赞同：0
> 
> 时间：2013-02-25T20:08:45.603
> 
> 标签：magento

作为在英国销售的英国增值税注册企业，我根据所有欧盟国家的英国增值税税率创建了一个税率。在欧盟之外，不会收取增值税，所以我认为我不必创建任何进一步的费率是正确的，而且从世界其他地区购买的用户不会适用任何税收规则，因此不会征收增值税添加也不会在发票明细中出现税收元素（在配置中启用了增值税明细）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-30T10:32:20.423

适用于 Magento 1.9.0.1 的 2014 年欧盟税率的最新 CSV（请注意，这是当前英国 20% 的增值税税率）。*当您运送*到欧盟地区以外的国家/地区时，您不应该收取增值税- 忽略他们的帐单地址，这是您发送重要物品的地方。还应注意的是，冰岛、列支敦士登、挪威和瑞士免征英国增值税。

```
Code,Country,State,Zip/Post Code,Rate,Zip/Post is Range,Range From,Range To,default
GB,GB,*,,20.0000,,,,VAT
AL,AL,*,,20.0000,,,,VAT
AD,AD,*,,20.0000,,,,VAT
AT,AT,*,,20.0000,,,,VAT
BY,BY,*,,20.0000,,,,VAT
BE,BE,*,,20.0000,,,,VAT
BA,BA,*,,20.0000,,,,VAT
BG,BG,*,,20.0000,,,,VAT
HR,HR,*,,20.0000,,,,VAT
CY,CY,*,,20.0000,,,,VAT
CZ,CZ,*,,20.0000,,,,VAT
DK,DK,*,,20.0000,,,,VAT
EE,EE,*,,20.0000,,,,VAT
FO,FO,*,,20.0000,,,,VAT
FI,FI,*,,20.0000,,,,VAT
FR,FR,*,,20.0000,,,,VAT
DE,DE,*,,20.0000,,,,VAT
GI,GI,*,,20.0000,,,,VAT
GR,GR,*,,20.0000,,,,VAT
HU,HU,*,,20.0000,,,,VAT
IS,IS,*,,0.0000,,,,VAT
IE,IE,*,,20.0000,,,,VAT
IT,IT,*,,20.0000,,,,VAT
LV,LV,*,,20.0000,,,,VAT
LB,LB,*,,20.0000,,,,VAT
LI,LI,*,,0.0000,,,,VAT
LT,LT,*,,20.0000,,,,VAT
LU,LU,*,,20.0000,,,,VAT
MT,MT,*,,20.0000,,,,VAT
MD,MD,*,,20.0000,,,,VAT
MC,MC,*,,20.0000,,,,VAT
ME,ME,*,,20.0000,,,,VAT
NL,NL,*,,20.0000,,,,VAT
NO,NO,*,,0.0000,,,,VAT
PL,PL,*,,20.0000,,,,VAT
PT,PT,*,,20.0000,,,,VAT
RO,RO,*,,20.0000,,,,VAT
RS,RS,*,,20.0000,,,,VAT
SK,SK,*,,20.0000,,,,VAT
SI,SI,*,,20.0000,,,,VAT
ES,ES,*,,20.0000,,,,VAT
SJ,SJ,*,,20.0000,,,,VAT
SE,SE,*,,20.0000,,,,VAT
CH,CH,*,,0.0000,,,,VAT
TR,TR,*,,20.0000,,,,VAT
UA,UA,*,,20.0000,,,,VAT
VA,VA,*,,20.0000,,,,VAT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T20:12:20.257

据我了解，这两个答案都不正确。我相当肯定，作为英国企业，我们必须仅向英国和欧盟其他成员国收取英国增值税，对欧盟以外的任何国家/地区征收零税率。两个答案都包括csv中的非欧盟国家，包括AL（阿尔巴尼亚）、AD（安道尔）、BY（白俄罗斯）、BA（波斯尼亚和黑塞哥维那）等。

这是我编辑的列表，虽然我不确定 VA（梵蒂冈城），但它似乎正式不是欧盟的一部分，所以理论上零评级，有人能澄清一下吗？（并不是说我曾经从那里下过订单！）

```
Code,Country,State,Zip/Post Code,Rate,Zip/Post is Range,Range From,Range To,default
GB,GB,*,,20.0000,,,,VAT
AT,AT,*,,20.0000,,,,VAT
BE,BE,*,,20.0000,,,,VAT
BG,BG,*,,20.0000,,,,VAT
CY,CY,*,,20.0000,,,,VAT
CZ,CZ,*,,20.0000,,,,VAT
DK,DK,*,,20.0000,,,,VAT
EE,EE,*,,20.0000,,,,VAT
FI,FI,*,,20.0000,,,,VAT
FR,FR,*,,20.0000,,,,VAT
DE,DE,*,,20.0000,,,,VAT
GI,GI,*,,20.0000,,,,VAT
GR,GR,*,,20.0000,,,,VAT
HR,HR,*,,20.0000,,,,VAT
HU,HU,*,,20.0000,,,,VAT
IE,IE,*,,20.0000,,,,VAT
IT,IT,*,,20.0000,,,,VAT
LV,LV,*,,20.0000,,,,VAT
LI,LI,*,,0.0000,,,,VAT
LT,LT,*,,20.0000,,,,VAT
LU,LU,*,,20.0000,,,,VAT
MT,MT,*,,20.0000,,,,VAT
MC,MC,*,,20.0000,,,,VAT
NL,NL,*,,20.0000,,,,VAT
NO,NO,*,,0.0000,,,,VAT
PL,PL,*,,20.0000,,,,VAT
PT,PT,*,,20.0000,,,,VAT
RO,RO,*,,20.0000,,,,VAT
SK,SK,*,,20.0000,,,,VAT
SI,SI,*,,20.0000,,,,VAT
ES,ES,*,,20.0000,,,,VAT
SE,SE,*,,20.0000,,,,VAT
CH,CH,*,,0.0000,,,,VAT
VA,VA,*,,20.0000,,,,VAT 
```

# android - 从 OS X 上的 shell 脚本获取手机上 EXTERNAL_STORAGE 环境变量的值

> ID：15075540
> 
> 赞同：2
> 
> 时间：2013-02-25T20:08:59.363
> 
> 标签：android, adb

我希望能够从运行在 OS X 上`EXTERNAL_STORAGE`的 ant`build.xml`脚本中获取我的 Android 手机上的变量值，以便我随后可以`adb push`在手机上的该位置执行一个文件。

当我被炮击到手机中时，我可以很好地看到价值：

```
$ adb shell
shell@android:/ $ echo $EXTERNAL_STORAGE
/mnt/sdcard 
```

当我尝试使用单行`adb shell`命令在 OS X 上恢复该值时，我什么也得不到：

```
$ adb shell "echo $EXTERNAL_STORAGE" 
```

关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T20:24:11.437

你需要逃避`$`. 像这样：

```
adb shell "echo \$EXTERNAL_STORAGE" 
```

否则，shell 变量扩展会在命令发送到设备之前在本地发生，并且您的命令最终会`adb shell "echo "`因为本地`$EXTERNAL_STORAGE`未设置而结束。

# android - 强制平板电脑使用 xhdpi 资源

> ID：15075541
> 
> 赞同：8
> 
> 时间：2013-02-25T20:09:02.497
> 
> 标签：android, xml

我正在开发一个应用程序，并且我已经提供了从 ldpi 到 xhdpi 的所有资源，但是有些平板电脑使用 hdpi（或者在我正在测试的 nexus 7 的情况下使用 tvdpi）所以当我在平板电脑上打开应用程序时一切都很小，我想强迫他们使用 xhdpi 资源我该怎么做？

我不想仅为平板电脑创建单独的文件，否则应用程序的大小会增加，xhdpi 资源可以正常工作

![在此处输入图像描述](../Images/13e338acee6bdbf1f0146f6b0aada88f.png)

在手机上一切都正常显示，平板电脑是问题，因为它们的大屏幕采用小分辨率资产，因此以英寸为单位的实际尺寸（4cm，用尺子测量）是正确的，但它们实际上看起来很小，使得整体设计不正确

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T20:16:44.050

通常，缩小是最好的选择（与放大相反）。如果您的图像在缩小时没有降级或丢失信息，请将图像的 2x 版本放在*res/drawable **-xhdpi***文件夹中。Android 将在低密度设备上适当缩小这些图像。

例如，如果您将 64x64 像素的 jpg/png 放入*res/drawable-xhdpi*，Android 将在 mdpi 设备上显示为 32x32 像素，在 hdpi 设备上显示为 48x48 像素图像，在 xhdpi 设备上显示为 64x64 像素图像。

如果缩小图像会使它们恶化（例如，图像中有 1 像素线会在缩小时消失），那么唯一的选择是在 drawable-mdpi、drawable-hdpi 等中添加图像的变体。目录。

**评论后更新：**

你想让你的图像在**更大的**屏幕上显示得更大（而不是在更高**密度**的屏幕上）。您可以通过仍然将图像仅放在 drawable-xhdpi 文件夹中来做到这一点，然后执行以下操作：

例如，您将在 res/layout 中使用显示您的图像之一的 ImageView 的此布局：

**res/drawable-xhdpi/one_of_my_images.png**

**资源/布局/somelayout.xml**

```
....
<ImageView 
    android:layout_height="@dimen/image_height"
    android:layout_width="@dimen/image_width"
    android:src="@drawable/one_of_my_images"
    android:scaleType="fitCenter"
    ....
    /> 
```

**res/values/dimens.xml**

```
....
<dimen name="image_height">100dip</dimen>
<dimen name="image_width">150dip</dimen>
.... 
```

**res/values-large/dimens.xml**

```
....
<dimen name="image_height">150dip</dimen>
<dimen name="image_width">225dip</dimen>
.... 
```

**res/values-xlarge/dimens.xml**

```
....
<dimen name="image_height">200dip</dimen>
<dimen name="image_width">300dip</dimen>
.... 
```

如您所见，屏幕越大，图像越大（以倾角为单位，因此以英寸为单位）。您可以在 res/values-xlarge-hdpi、res/values-xlarge-xhdpi 等中的 dimens.xml 中尝试不同的 image_height 和 image_width 值，看看哪个看起来最好。

**评论后更新 2：** 如果您想要自己的“自定义”方案来加载适当的资源，请将它们放入 id res/drawable-nodpi：例如
res/drawable-nodpi/one_of_my_images_normal.png res/drawable-nodpi/one_of_my_images_large.png res/ drawable-nodpi/one_of_my_images_xlarge.png

然后放入适当的可绘制目录（res/drawable/、res/drawable-large、/res/drawable-sw360dp/ 等，无论你能想到什么）一个 xml 文件，该文件间接引用来自 nodpi 目录的正确资源：例如

**res/drawable-xlarge-mdpi/my_images.xml**

```
<resources>
    ....
    <item type="drawable" name="one_of_my_images">@drawable/one_of_my_images_large</item>
    ....
</resources> 
```

这意味着对于超大 mdpi 屏幕，Android 将从 drawable-nodpi 目录加载“one_of_my_image_large.png”。

# perl - 使用 HTML::TableExtract 提取多行

> ID：15075542
> 
> 赞同：0
> 
> 时间：2013-02-25T20:09:04.450
> 
> 标签：perl, www-mechanize

我制作了一个脚本，它将从 HTML`<TR>`标记中提取所有 Row 数据。`<TR>`我的 HTML 页面上有 30 个 HTML标签。根据计数，我的代码将获取特定的行数据。假设我需要 5th 中的数据`<tr>...</tr>`，那么我的条件是`if(count =5) {(go inside and get that data)}`

但我的问题是我一次需要一个选定行的数据。假设我需要第 5、6 和 14 行的数据。

你能帮我整理一下吗？

```
$te = new HTML::TableExtract(count => 0 );
$te->parse($content);
# Examine all matching tables
foreach $ts ($te->table_states) {
    #print "Table (", join(',', $ts->coords), "):\n";
    $cnt = 1;
    foreach $row($ts->rows) {
        # print " ---- Printing Row $cnt ----\n";
        $PrintLine= join("\t", @$row);
        @RowData=split(/\t/,$PrintLine);
        $PrintLine =~ s/\r//ig;
        $PrintLine =~ s/\t//ig;
        $cnt = $cnt + 1;
        #   if ($PrintLine =~ /Site ID/ig || $PrintLine =~ /Site name/ig){print " Intrest $PrintLine $cnt =====================\n"};
        if ( $cnt == 14) { 
            $arraycnt = 1;
            my $SiteID="";
            my $SiteName="";
            foreach (@RowData) {
                # print " Array element $arraycnt\n";
                chomp;
                $_ =~ s/\r//ig;
                $_ =~ s/[\xC3\xA1\xC3\xA0\xC3\xA2\xC3\xA3]//ig;
                if ($arraycnt== 17 ) { $SiteID= $_;}
                if ($arraycnt== 39 ) { $SiteName= $_;}
                    $arraycnt = $arraycnt + 1;
            } 
            #$PrintLineFinal = $BridgeCase."\t".$PrintLine;
            $PrintLineFinal = $BridgeCase."\t".$SiteID."\t".$SiteName;
            #print "$PrintLineFinal\n";
            print MYFILE2 "$PrintLineFinal\n";          
            last;
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:46:32.290

您可以像这样访问结果：

```
foreach $ts ($te->table_states) {
    #you need 14th rows
    #my 14throws = $ts->rows->[13];#starting with zero!
    #17th col from the 14th row
    #my $17colfrom14throws = $ts->rows->[13]->[16];
    my $SiteName = $ts->rows->[13]->[38];
    my $SiteID   = $ts->rows->[13]->[16];
    my $PrintLineFinal = $BridgeCase."\t".$SiteID."\t".$SiteName;
    print MYFILE2 "$PrintLineFinal\n";     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:40:39.893

几点建议：

总是：

```
 use strict;
 use warnings; 
```

这将迫使您使用`my`. 例如

```
foreach my $ts ($te->table_states) {
   my $cnt = 1; 
```

（`warnings`会让你知道最愚蠢的错误。`strict`通过要求你在某些情况下使用更好的做法来防止错误）。

在几个地方，您在遍历数组时使用自己的计数器变量。你不需要这样做。相反，只需直接获取您想要的数组元素。例如`$array[3]`获取第三个元素。

Perl 还允许数组切片获取您想要的某些元素。`@array[4,5,13]`获取数组的第五个、第六个和第十四个元素。您可以使用它来仅处理您想要的行，而不是遍历所有行：

```
my @rows = $ts->rows;
foreach my $row (@rows[4,5,13]) #process only the 5th, 6th, and 14th rows.
{
    ...
} 
```

这是同一事物的快捷版本，使用匿名数组：

```
foreach my $row (@{[$ts->rows]}[4,5,13]) 
```

此外，也许您想在代码的其他地方定义您想要的行：

```
my @wanted_rows = (4,5,13);
...
foreach my $row (@{[$ts->rows]}[@wanted_rows]) 
```

这段代码很混乱：

```
$PrintLine= join("\t", @$row);
@RowData=split(/\t/,$PrintLine);
$PrintLine =~ s/\r//ig;
$PrintLine =~ s/\t//ig; 
```

首先，您要加入一个带有制表符的数组，然后您要拆分刚刚加入的数组以再次获取该数组。然后，您无论如何都要从该行中删除所有制表符。

我建议你摆脱所有这些代码。只需`@$row`在需要数组时使用，而不是复制它。如果您需要打印数组以进行调试（这就是您似乎正在做的所有事情`$PrintLine`，您可以直接打印一个数组：

```
print @$row;    #print an array, nothing between each element.
print "@$row";  #print an array with spaces between each element. 
```

通过所有这些更改，您的代码将如下所示：

```
use strict;
use warnings;

my @wanted_rows = (4,5,13);

my $te = new HTML::TableExtract(count => 0);

$te->parse($content);
# Examine all matching tables
foreach my $ts ($te->table_states) {
    foreach my $row (@{[$ts->rows]}[@wanted_rows]) {

        s/[\xC3\xA1\xC3\xA0\xC3\xA2\xC3\xA3\r\n]//ig for (@$row);

        my $SiteID   = $$row[16] // '';  #set to empty strings if not defined.
        my $SiteName = $$row[38] // '';  
        print MYFILE2 $BridgeCase."\t".$SiteID."\t".$SiteName;
    }
} 
```

# php - 在表中显示多个数组

> ID：15075545
> 
> 赞同：0
> 
> 时间：2013-02-25T20:09:10.837
> 
> 标签：php, arrays

我有 5 个数组

```
 $array1 = array('ar1_1','ar1_2','ar1_3','ar1_4');
    $array2 = array('ar2_1','ar2_2','ar2_3','ar2_4','ar2_5');
    $array3 = array('ar3_1','ar3_2','ar3_3','ar3_4','ar3_5','ar3_6');
    $array4 = array('ar4_1','ar4_2','ar4_3','ar4_4');
    $array5 = array('ar5_1','ar5_2','ar5_3');
    $loc = array('AM','IN','US'); 
```

我想以某种方式显示它；

```
<table>
<tr class="d1 vevent">
<td>
<b><abbr class="dtstart" title="' . $array1 . '">' . $array2 . '</abbr></b> <br>' . $array3 . '</td>
<td>
<span class="summary">' . $array4 . ' - ' . $array5 . '</span>
<span class="location">' . $loc . '</span>
</td>
</tr>
</table> 
```

有什么解决办法吗？

我尝试过 for 循环、foreach 循环、zip、array_merge 和 array_combine，但无法获得预期的结果。

我试过的代码：

```
echo '<table width="100%" border="1" cellspacing="0" cellpadding="5">
<tbody>
<tr class="toprow">
<td><strong>Date </strong></td>
<td><strong> Details</strong></td>
</tr>';

/*
foreach(array_combine($date, $time) as $time1 => $date1)
{
 @$date1 = split('[()]', $date1);
  echo $time1\. $date1[1]. "<br />";
} */

$result = count($match_no);
for($i=0; $i<$result; $i++) {
echo '
<tr class="d1 vevent">
<td>
<b><abbr class="dtstart" title="';
echo trim($date[0]);
echo '">';
echo $date[0]; 
echo '</abbr></b> <br>';

foreach($time as $time1)
{
 @$time1 = split('[()]', $time1);
  echo $time1[1];
}
echo '</td>
<td>
<span class="summary">';
echo $match_no[0];
echo ' - <a href="';
echo '#" class="url">';
echo $team[0];
echo ' vs ';
echo $team[1];
echo '</a></span>';
echo '<span class="location">';
echo $location;
echo '</span>';
echo '</td>
</tr>';

}

echo '</table>'; 
```

这是我尝试过的代码，但是每次 for 循环迭代时 foreach 循环都会迭代多次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:25:13.993

我可以建议您为此使用课程吗？类似于以下内容：

```
class myClass(){
    public $title;
    public $var1;
    public $var2;
    public $var3;
    public $var4;
    public $var5;
    public $loc;

    public function __construct($title, $var1, $var2, $var3, $var4, $var5){
         $this->title = $title;
         $this->var1 = $var1;
         $this->var2 = $var2;
         $this->var3 = $var3;
         $this->var4 = $var4;
         $this->var5 = $var5;
    }

    public function printTable(){
    echo '
        <tr class="d1 vevent">
          <td>
             <b><abbr class="dtstart" title="' . $this->var1 . '">' . $this->var2 . '</abbr></b> <br>' . $this->var3 . '</td>
          <td>
              <span class="summary">' . $this->var4 . ' - ' . $this->var5 . '</span>
              <span class="location">' . $this->loc . '</span>
          </td>
        </tr>';
    }
} 
```

然后您可以使用数组中的数据创建对象，例如：

```
$obj = myClass($ar1_1,$ar1_2,$ar1_3, $ar1_5,$loc);
//Then print the table:
$obj->printTable(); 
```

或者，如果您有一组对象：

```
echo "<table>";
for($objArray as $obj){
    $obj->printTable();
}
echo "</table>"; 
```

最后，如果您想通过此类使用当前的数组系统，您可以执行以下操作：

```
$longestArray = $array1;
if(count($array2)>count($longestArray)) $longestArray = $array2;
if(count($array3)>count($longestArray)) $longestArray = $array3;
if(count($array4)>count($longestArray)) $longestArray = $array4;
if(count($array5)>count($longestArray)) $longestArray = $array5;
if(count($loc)>count($longestArray)) $longestArray = $loc;

$objArray = Array();
for($i=0;$i<count($longestArray);$i++){
    $objArray[] = myClass($array1[$i],$array2[$i],$array3[$i], $array4[$i], $array5[$i], $loc[$i]);
}

echo "<table>";
for($objArray as $obj){
    $obj->printTable();
}
echo "</table>"; 
```

注意：只要数组的长度短于索引，就会收到很多关于数组不存在索引的警告，但这应该是有效的并且执行得很好。另外，我没有测试它，所以很容易出现拼写错误。

# asp-classic - 在经典asp中访问IIS7.5上的虚拟目录中的文件

> ID：15075549
> 
> 赞同：0
> 
> 时间：2013-02-25T20:09:27.320
> 
> 标签：asp-classic, iis-7.5, server-side-includes

我的应用程序中有一个名为 index.asp 的文件，位于以下结构 MyApp/Admin/index.asp 下

这个文件有一个条目

```
<!--#INCLUDE VIRTUAL="/dbinfo/MyFile.asp"--> 
```

我在 IIS7.5 的 MyApp 级别创建了一个虚拟目录，我可以在 dbinfo 虚拟目录中看到 MyFile.asp。但是，当我在代码中访问它时，我在 IIS 日志中收到以下错误：

GET /MyApp/Admin/index.asp |30|ASP_0126|Include_file_not_found 80

此代码在 IIS6.0 中运行良好。我们现在需要升级到 7.5 并且遇到了这个问题。当我将文件放在与我的代码相同的目录中并按如下方式访问它时，它工作得很好。

```
<!--#INCLUDE FILE="MyFile.asp"--> 
```

下面是我的 web.config 供参考。

```
<configuration>  
    <system.webServer>
        <directoryBrowse enabled="true" />
    </system.webServer>  
    <system.web>        
        <compilation debug="true" />
        <authentication mode="Windows" />
        <authorization>
      <deny users="?" />
      <allow users="*" />
        </authorization>
        <identity impersonate="false" />    
    </system.web>  
</configuration> 
```

请指教。

# c# - 如何从不同的线程更新命令的“CanExecute”值？

> ID：15075553
> 
> 赞同：3
> 
> 时间：2013-02-25T20:09:42.417
> 
> 标签：c#, wpf, threadpool

在我的应用程序中，我有一个命令，我只希望用户能够在它尚未运行时触发。有问题的命令绑定到 WPF 按钮，这意味着如果 CanExecute 为 false，它会自动禁用该按钮。到现在为止还挺好。

不幸的是，该命令执行的操作是一个长时间运行的操作，因此它需要发生在不同的线程上。我不认为这会是一个问题......但它似乎是。

我已经提取了一个可以显示问题的最小样本。如果绑定到一个按钮（通过 LocalCommands.Problem 静态引用），该按钮将根据需要被禁用。当工作线程尝试更新 CanExecute 时，将从 System.Windows.Controls.Primitives.ButtonBase 内部抛出 InvalidOperationException。

解决此问题的最合适方法是什么？

示例命令代码如下：

```
using System;
using System.Threading;
using System.Windows.Input;

namespace InvalidOperationDemo
{
    static class LocalCommands
    {
        public static ProblemCommand Problem = new ProblemCommand();
    }

    class ProblemCommand : ICommand
    {
        private bool currentlyRunning = false;
        private AutoResetEvent synchronize = new AutoResetEvent(false);

        public bool CanExecute(object parameter)
        {
            return !CurrentlyRunning;
        }

        public void Execute(object parameter)
        {
            CurrentlyRunning = true;

            ThreadPool.QueueUserWorkItem(ShowProblem);
        }

        private void ShowProblem(object state)
        {
            // Do some work here. When we're done, set CurrentlyRunning back to false.
            // To simulate the problem, wait on the never-set synchronization object.
            synchronize.WaitOne(500);

            CurrentlyRunning = false;
        }

        public bool CurrentlyRunning
        {
            get { return currentlyRunning; }
            private set
            {
                if (currentlyRunning == value) return;

                currentlyRunning = value;

                var onCanExecuteChanged = CanExecuteChanged;
                if (onCanExecuteChanged != null)
                {
                    try
                    {
                        onCanExecuteChanged(this, EventArgs.Empty);
                    }
                    catch (Exception e)
                    {
                        System.Windows.MessageBox.Show(e.Message, "Exception in event handling.");
                    }
                }
            }
        }

        public event EventHandler CanExecuteChanged;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T20:18:00.713

改变：

`onCanExecuteChanged(this, EventArgs.Empty);`

到：

```
Application.Current.Dispatcher.BeginInvoke((Action)(onCanExecuteChanged(this, EventArgs.Empty))); 
```

**编辑：**

原因是 WPF 正在侦听这些事件并尝试在 UI 元素中执行操作（IE`IsEnabled`在 a 中切换`Button`），因此必须在 UI 线程中引发这些事件。

# spring - 找不到spring + hibernate类

> ID：15075554
> 
> 赞同：0
> 
> 时间：2013-02-25T20:09:45.553
> 
> 标签：spring, hibernate, classpath

我有一个简单的 Web 应用程序，我正在尝试运行它并且遇到了问题。我将 Java EE 6 应用程序迁移到 Spring。似乎休眠开始正常，但是当 Spring 尝试创建一个引用实体的命名 bean 时，我得到 ClassNotFoundException。

任何想法为什么春天没有看到WAR的WEB-INF / lib中的jar？我有某种代理问题吗？

让我知道您希望查看哪些文件的片段（如果有）。

编辑：附加堆栈跟踪-为简洁起见，我在堆栈跟踪中修改了完全限定的类名。我还附上了我的 spring bean 配置。另外，仅供参考，我的实体类都在不同的 jar 文件中（按设计）。我相信这会导致一些问题，但不知道为什么。

```
n]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: api/model/principal/Group
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1011)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:957)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:626)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [server.administration.GroupExampleBean]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: api/model/principal/Group
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:163)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1004)
    ... 23 more
Caused by: java.lang.NoClassDefFoundError: api/model/principal/Group
    at server.administration.GroupExampleBean.<init>(GroupExampleBean.java:20)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:148)
    ... 25 more
Caused by: java.lang.ClassNotFoundException: api.model.principal.Group
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 31 more 
```

我的 Spring 应用程序上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:context="http://www.springframework.org/schema/context"
             xmlns:tx="http://www.springframework.org/schema/tx"
             xmlns:jdbc="http://www.springframework.org/schema/jdbc"
            xmlns:jpa="http://www.springframework.org/schema/jpa"
             xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.2.xsd
                     http://www.springframework.org/schema/tx
                     http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
                     http://www.springframework.org/schema/jdbc
                     http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
                     http://www.springframework.org/schema/jpa
                     http://www.springframework.org/schema/jpa/spring-jpa-3.2.xsd">
  <jpa:repositories base-package="examples" />
    <context:component-scan base-package="examples"/>
    <context:annotation-config/>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="generateDdl" value="true" />
                <property name="database" value="HSQL" />
                <property name="databasePlatform" value="org.hibernate.dialect.HSQLDialect" />
            </bean>
        </property>
        <property name="persistenceUnitName" value="persistenceUnit" />
    </bean>

    <bean id="transactionMa## Heading ##nager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <!--<property name="entityManagerFactory" ref="entityManagerFactory"/>-->
    </bean>

    <!--
    can be: HSQL/H2/Derby
    -->
    <jdbc:embedded-database id="dataSource" type="HSQL"/>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <!--    For some reason the annotations are not being picked up yet -->
    <!--<bean id="startupListener" class="examples.web.application.StartupListener"/>-->

    <!--    Spring will manage the JPA Listeners
    <jpa:auditing auditor-aware-ref="auditorAware" />
    <bean id="auditorAware" class="org.springframework.data.jpa.example.auditing.AuditorAwareImpl" />
    -->

    <!--
    <jpa:repositories base-package="org.springframework.data.jpa.example.repository.simple" />
    -->
</beans> 
```

谢谢，

沃尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:19:35.863

我想通了，我必须在我的 persistence.xml 中指定指向外部罐子。

沃尔特

# c - 屏蔽最高有效位

> ID：15075557
> 
> 赞同：0
> 
> 时间：2013-02-25T20:09:57.273
> 
> 标签：c, compression, bit-manipulation, binaryfiles

我编写了这个函数来删除每个字节中的最高有效位。但是这个功能似乎并没有按照我想要的方式工作。

输出文件大小始终为“0”，我不明白为什么没有将任何内容写入输出文件。有没有更好更简单的方法来删除每个字节中的最高有效位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:34:14.987

关于移位运算符，C 标准的第 6.5.7 节说：

> 如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。

所以首先，删除`nBuffer << 8;`. 即使它被很好地定义，它也不会是一个赋值运算符。

正如人们所提到的，你最好使用`CHAR_BIT`8。我很确定，而不是`0x7f`你的意思`UCHAR_MAX >> 1`，而不是 7 你的意思`CHAR_BIT - 1`。

让我们在这里只关注 nBuffer 和 bit_count。我将注释掉任何不使用其中任何一个的内容。

```
 bit_count += 7;

 if (bit_count == 7*8)
  {
    *out_buf++ = nBuffer;
    /*if((write(out_fd, bit_buf, sizeof(char))) == -1)
      oops("Cannot write on the file", "");*/
    nBuffer << 8;
    bit_count -= 8;
  }
nBuffer = 0;
bit_count = 0; 
```

在这段代码的最后，nBuffer 的值是多少？bit_count 呢？这会对您的第二个循环产生什么影响？`while (bit_count > 0)`

现在让我们关注注释掉的代码：

```
 if((write(out_fd, bit_buf, sizeof(char))) == -1)
      oops("Cannot write on the file", ""); 
```

您在哪里为 bit_buf 赋值？使用未初始化的变量是未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:27:42.283

这不是通过所有位来找到高位，而是仅通过`1`位。 `high()`返回参数的高位，如果参数为零，则返回零。

```
inline int high(int n)
{
    int k;

    do {
        k = n ^ (n - 1);
        n &= ~k;
    } while (n);
    return (k + 1) >> 1;
}

inline int drop_high(int n)
{
    return n ^ high(n);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:37:13.957

```
unsigned char remove_most_significant_bit(unsigned char b)
{
    int bit;
    for(bit = 0; bit < 8; bit++)
    {
        unsigned char mask = (0x80 >> bit);
        if( mask & b) return b & ~mask;
    }
    return b;
}

void remove_most_significant_bit_from_buffer(unsigned char* b, int length)
{
    int i;
    for(i=0; i<length;i++)
    {
        b[i] = remove_most_significant_bit(b[i]);
    }
}

void test_it()
{
    unsigned char data[8];
    int i;
    for(i = 0; i < 8; i++)
    {
        data[i] = (1 << i) + i;
    }
    for(i = 0; i < 8; i++)
    {
        printf("%d\r\n", data[i]);
    }
    remove_most_significant_bit_from_buffer(data, 8);
    for(i = 0; i < 8; i++)
    {
        printf("%d\r\n", data[i]);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T21:31:39.297

我不会通过您的整个答案来提供您重新编写的代码，但删除最重要的位很容易。这是因为通过使用以 2 为底的对数转换为整数可以很容易地找到最高有效位。

```
#include <stdio.h>
#include <math.h>

int RemoveMSB(int a)
{
    return a ^ (1 << (int)log2(a));
}

int main(int argc, char const *argv[])
{
    int a = 4387;

    printf("MSB of %d is %d\n", a, (int)log2(a));

    a = RemoveMSB(a);

    printf("MSB of %d is %d\n", a, (int)log2(a));
    return 0;
} 
```

输出：

```
MSB of 4387 is 12
MSB of 291 is 8 
```

因此，二进制中的 4387 是 1000100100011，最高有效位为 12。

同样，二进制的 291 是 0000100100011，最高有效位为 8。

# php - 将日期转换为不同的日期格式

> ID：15075558
> 
> 赞同：0
> 
> 时间：2013-02-25T20:09:58.863
> 
> 标签：php

所有，我在从 Tumblr 获得的以下输出中有一个日期格式：

格林威治标准时间 2013-02-25 18:00:25

我想使用 date 函数将其转换为我想要的日期格式。我尝试了以下方法：

```
$date = date("F d, Y",$tumblr_posts->date); 
echo $date; 
```

当我这样做时，输出是“1970 年 1 月 1 日”，这显然是不正确的。有想法该怎么解决这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:13:33.943

您需要像这样使用[strtotime 函数](http://php.net/manual/en/function.strtotime.php)。

```
$date = date("F d, Y", strtotime($tumblr_posts->date)); 
```

要查找如何解析您的日期，请使用[PHP 日期函数](http://php.net/manual/en/function.date.php)参考。

# sql - 如果原始列为 NULL，如何将 SELECT 值设置为等于不同的列？

> ID：15075568
> 
> 赞同：0
> 
> 时间：2013-02-25T20:10:37.670
> 
> 标签：sql, tsql, case

```
SELECT TOP 10
        VendorId,
        CASE WHEN VendorNumber IS NULL THEN VendorId
        END AS 'VendorNumber'
FROM    Table 
```

以上不起作用。

基本上我想这样做：

我想选择 2 列：VendorId 和 VendorNumber。

如果 VendorNumber 为 NULL，我想显示 VendorId。

我怎样才能用上面的查询来完成这个？该查询基本上显示 NULL 而不是 VendorID。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T20:14:16.327

您必须指定一个，否则当*不*为`ELSE`空时您将获得空：`VendorNumber`

 *```
SELECT TOP 10
        VendorId,
        CASE WHEN VendorNumber IS NULL THEN VendorId ELSE VendorNumber
        END AS 'VendorNumber'
FROM    Table 
```

您可以使用[`isnull`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)或简化[`coalesce`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)：

```
select top 10 VendorId, isnull(VendorNumber, VendorId) as VendorNumber
from Table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T20:14:44.230

你错过了，`ELSE`所以它在所有不为空`null`的行中放置一个：`VendorNumber`

```
SELECT TOP 10 VendorId,
    CASE 
        WHEN VendorNumber IS NULL 
        THEN VendorId
        ELSE VendorNumber
    END AS 'VendorNumber'
FROM    Table 
```

这也可以写成：

```
SELECT TOP 10 VendorId,
    Coalesce(VendorNumber, VendorId) AS 'VendorNumber'
FROM    Table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:15:23.140

尝试 Select top 10 VendorId, COALESCE(VendorNumber, VendorId) as vendornumber From table

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T20:15:23.483

试试这个

```
select top 10, vendorid, coalesce(VendorNumber,VendorID) VendorNumber
from yourtable 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T20:15:54.717

执行此操作的 SQL 函数是`coalesce()`：

```
SELECT TOP 10 VendorId, coalesce(VendorNumber, VendorId) as VendorNumber
FROM    Table 
```

这假定 VendorId 和 VendorNumber 是同一类型。否则，您可能需要添加一些转换。例如，如果 VendorId 是一个字符串，而 VendorNumber 是一个数字：

```
select top 10, VendorId, coalesce(cast(VendorNumber as varchar(255)), VendorId)
from Table 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T20:17:11.813

“其他”不见了。

```
 SELECT TOP 10 VendorId,
        CASE 
            WHEN VendorNumber IS NULL 
            THEN VendorId
            ELSE VendorNumber
        END AS 'VendorNumber'
    FROM    Table 
```*

# php - 如何将json解码为数组

> ID：15075570
> 
> 赞同：0
> 
> 时间：2013-02-25T20:10:40.130
> 
> 标签：php, json

我有一个包含大量信息的 Json 数组。JSON文本里面有单引号和双引号。由于 json 中的单引号和双引号，我正在尝试将此 JSON 解码为数组。

这意味着我需要将 '' 放在我的 JSON 之外，以便它可以编码，但我无法做到，或者我的逻辑可能是错误的。任何人都可以帮助我尝试解码与此类似的一长串 json 吗？

我知道我必须使用 json_decode('{my json info}'); 但我在放置这些引号时遇到问题

```
$b= {"articles": [
        {
            "content": "THE Queen last night toasted the UK's \"special relationship\" with the US \u2013 and told Barack Obama how their two nations are keeping the world safe.\\n\\nAt a state banquet held for the US President at Buckingham Palace last night, she thanked America for twice coming to the rescue of the \"free world\" in two world wars.\\n\\nShe said: \"Your visit to this country inevitably reminds us of our shared history, our common language, and our strong intellectual and cultural links.\\n\\n\"It also reminds us that your country twice came to the rescue of the free and democratic world when it was facing military disaster.\\n\\n\"On each occasion, after the end of those destructive wars, the generosity of the United States made a massive contribution to our economic recovery. Today the United States remains our most important ally and our two nations contribute to the security and prosperity of our peoples, and of the world, through shared national interests.\"\\n\\nShe told the assembled VIP guests that when the two countries stand together \"our people and other people of goodwill around the world will be more secure and can become more prosperous\".\\n\\nThe Queen finished with a toast, saying: \"Ladies and gentlemen, we are here to celebrate the tried, tested and \u2013 yes \u2013 special relationship between our two countries.\"\\n\\nIn response, Mr Obama praised the nations' bond \u2013 and said it had never been stronger in the post-9/11 world.\\n\\nHe said: \"Our relationship never rested as we approach the 10th anniversary of 9/11\. I am particularly grateful for the solidarity that the UK has shown in the last decade. From that day to this you have been our closest partner.\"\\n\\nMr Obama paid particular tribute to the UK's military help in Iraq and Afghanistan.\\n\\nHe said: \"You have been our closest partner in the struggle to protect our people from terror attacks and violent extremists around the world, despite heavy sacrifices. Allow me to pay tribute to the considerable sacrifices of your military forces who have stood shoulder to shoulder with us for decades as we together faced the challenges of the 21st century.\"\\n\\nHe finished with a toast, saying: \"Ladies and gentlemen stand with me and raise your glasses as I propose a toast to Her Majesty the Queen. To the vitality of the special relationship between our peoples and in the words of Shakespeare, 'To this blessed plot, this earth, this realm, this England'.\"\\n\\nThe 170 VIP guests included former prime ministers and diplomats as well as Hollywood royalty including Tom Hanks and Kevin Spacey.\\n\\nEarlier in the day, the first of their three-day visit to the UK, Mr Obama and First Lady Michelle were given a 41-gun salute by the Royal Artillery as they arrived at the Palace.\\n\\nAs gusts of wind circled all around, they were greeted by the Queen and Prince Philip. Even though the salute was half a mile away in Green Park, the Queen joked about the noise, shaking her head to clear her ears.\\n\\nThe Obamas also met the Duke and Duchess of Cambridge before being taken on a tour of the Buckingham Palace picture gallery, where Mr Obama was shown letters and artefacts charting Britain's loss of the American colonies.\\n\\nHe peered over to look at a handwritten manuscript by George III from 1783 in which the King proclaimed: \"America is lost.\"\\n\\nMr Obama joked: \"That was only a temporary blip in the relationship.\"\\n\\nHe was then shown a photo of HMS Resolute, timbers from which have been recycled for use in the White House. \"This is now my desk in the Oval Office,\" he said. \"I think we got a pretty good deal out of that.\"\\n\\nSecurity for the presidential visit is ultra-tight \u2013 and even while they're staying at Buckingham Palace the Obamas are taking no chances.\\n\\nThey have brought their own bomb- and bullet-proof windows \u2013 installed in the Belgian Suite at the Palace.\\n\\nIn a packed day, Mr Obama also met David Cameron at Downing Street before they visited a South London school.", 
            "title": "The Queen toasts Barack Obama and special relationship with the US", 
            "source_url": "http://www.mirror.co.uk/news/top-stories/2011/05/25/the-queen-toasts-barack-obama-s-special-relationship-115875-23154933/", 
            "author": "Don Mackay", 
            "published": "25/05/2011"
        } }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:14:13.770

根据我的经验，在处理`json_decode`.

我推荐的是尝试`json_decode( $b );`

如果这不起作用，那么您的“json”实际上不是有效`application/json`数据，这就是解码失败的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T20:17:30.037

你错过了最后`]`

```
<?php
$json =<<<A
{"articles": [
        {
            "content": "THE Queen last night toasted the UK's \"special relationship\" with the US \u2013 and told Barack Obama how their two nations are keeping the world safe.\\n\\nAt a state banquet held for the US President at Buckingham Palace last night, she thanked America for twice coming to the rescue of the \"free world\" in two world wars.\\n\\nShe said: \"Your visit to this country inevitably reminds us of our shared history, our common language, and our strong intellectual and cultural links.\\n\\n\"It also reminds us that your country twice came to the rescue of the free and democratic world when it was facing military disaster.\\n\\n\"On each occasion, after the end of those destructive wars, the generosity of the United States made a massive contribution to our economic recovery. Today the United States remains our most important ally and our two nations contribute to the security and prosperity of our peoples, and of the world, through shared national interests.\"\\n\\nShe told the assembled VIP guests that when the two countries stand together \"our people and other people of goodwill around the world will be more secure and can become more prosperous\".\\n\\nThe Queen finished with a toast, saying: \"Ladies and gentlemen, we are here to celebrate the tried, tested and \u2013 yes \u2013 special relationship between our two countries.\"\\n\\nIn response, Mr Obama praised the nations' bond \u2013 and said it had never been stronger in the post-9/11 world.\\n\\nHe said: \"Our relationship never rested as we approach the 10th anniversary of 9/11\. I am particularly grateful for the solidarity that the UK has shown in the last decade. From that day to this you have been our closest partner.\"\\n\\nMr Obama paid particular tribute to the UK's military help in Iraq and Afghanistan.\\n\\nHe said: \"You have been our closest partner in the struggle to protect our people from terror attacks and violent extremists around the world, despite heavy sacrifices. Allow me to pay tribute to the considerable sacrifices of your military forces who have stood shoulder to shoulder with us for decades as we together faced the challenges of the 21st century.\"\\n\\nHe finished with a toast, saying: \"Ladies and gentlemen stand with me and raise your glasses as I propose a toast to Her Majesty the Queen. To the vitality of the special relationship between our peoples and in the words of Shakespeare, 'To this blessed plot, this earth, this realm, this England'.\"\\n\\nThe 170 VIP guests included former prime ministers and diplomats as well as Hollywood royalty including Tom Hanks and Kevin Spacey.\\n\\nEarlier in the day, the first of their three-day visit to the UK, Mr Obama and First Lady Michelle were given a 41-gun salute by the Royal Artillery as they arrived at the Palace.\\n\\nAs gusts of wind circled all around, they were greeted by the Queen and Prince Philip. Even though the salute was half a mile away in Green Park, the Queen joked about the noise, shaking her head to clear her ears.\\n\\nThe Obamas also met the Duke and Duchess of Cambridge before being taken on a tour of the Buckingham Palace picture gallery, where Mr Obama was shown letters and artefacts charting Britain's loss of the American colonies.\\n\\nHe peered over to look at a handwritten manuscript by George III from 1783 in which the King proclaimed: \"America is lost.\"\\n\\nMr Obama joked: \"That was only a temporary blip in the relationship.\"\\n\\nHe was then shown a photo of HMS Resolute, timbers from which have been recycled for use in the White House. \"This is now my desk in the Oval Office,\" he said. \"I think we got a pretty good deal out of that.\"\\n\\nSecurity for the presidential visit is ultra-tight \u2013 and even while they're staying at Buckingham Palace the Obamas are taking no chances.\\n\\nThey have brought their own bomb- and bullet-proof windows \u2013 installed in the Belgian Suite at the Palace.\\n\\nIn a packed day, Mr Obama also met David Cameron at Downing Street before they visited a South London school.", 
            "title": "The Queen toasts Barack Obama and special relationship with the US", 
            "source_url": "http://www.mirror.co.uk/news/top-stories/2011/05/25/the-queen-toasts-barack-obama-s-special-relationship-115875-23154933/", 
            "author": "Don Mackay", 
            "published": "25/05/2011"
        }]
}
A;

echo '<pre>';
print_r(json_decode($json, true));
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:14:32.850

```
$b = <<<JSON
{"articles": [
    {
        "content": ...
        ...
JSON; 
```

[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

# java - 如何设置删除权限？

> ID：15075579
> 
> 赞同：0
> 
> 时间：2013-02-25T20:11:03.763
> 
> 标签：java, permissions

我正在编写一个程序，其中一部分是删除某个文件夹中的文件（在程序的根目录中）。目前，这些文件不是由程序创建的，而是在外部创建的 - 但将来它们可能会或可能不会由程序本身创建/编辑。

现在的问题：

当我尝试删除文件时，我得到权限异常。经过大量的检查、调试和研究，我写了这段代码：

```
private void checkAndDelete(int n, String fileName) {
    // TODO: file permission error
    if (n == JOptionPane.YES_OPTION) {
        File file = new File(fileName);
        file.setWritable(true);
        SecurityManager s = new SecurityManager();
        s.checkDelete(fileName);
        System.out.println(file);
        if(file.delete()) {
            JOptionPane.showMessageDialog(null, "Deletion successful!");
            initializeNorth();
        } else {
            JOptionPane.showMessageDialog(null, "Deletion failed!");
        }
    }
} 
```

`n`是用户在确认删除对话框中单击是或否时的值，`fileName`是文件名。

现在，该`checkDelete`方法抛出这个：

```
Exception in thread "AWT-EventQueue-0" java.security.AccessControlException: access denied ("java.io.FilePermission" "DB/fun trivia.kgf" "delete") 
```

所以我缩小了问题的范围——权限问题。如果重要的话，我将文件放在保管箱中（我所有的项目都在其中）。文件存在，可读可写。我已经完成了所有检查。问题只是为了许可。

我该如何解决？

编辑：我试图将我的文件的位置更改为在我的本地系统上，但它有同样的错误。因此，仅在 Dropbox 上这不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T23:35:29.070

显然，我没有关闭我`Scanner`的文件。我只是在抑制资源泄漏。我必须将文件包装起来`Scanner`才能`try { } finally { }`使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:27:04.047

如果您使用的是 Windows，请以管理员身份运行您的软件。您可以以管理员身份或 IDE 本身（Netbeans、Eclipse）运行您的程序。两者都应该工作。

# c++ - C++之间的区别virtual = 0; 和空函数

> ID：15075581
> 
> 赞同：14
> 
> 时间：2013-02-25T20:11:14.433
> 
> 标签：c++, oop, class, methods

我现在正在学习 C++，OO 方面，我一直看到这个：

```
class SomeClass{
   virtual void aMethod()=0;
}

class AnotherClass{
   void anotherMethod(){/*Empty*/}
}

class SomeClassSon : public SomeClass{
   void aMethod(){/*Also Empty*/}
} 
```

3种方法有什么区别？虚拟等于 0，空的等于 1，而虚拟的，因为它是继承的，所以是空的。

为什么我不能像父亲一样让 SomeClassSon 方法，virtual void 等于 0？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T20:18:46.923

为您

```
class SomeClass{
   virtual void aMethod()=0;
} 
```

*纯虚方法*的存在使您的类*抽象*。一旦你在你的类中拥有了一个这样的纯虚方法，`=0`你就不能实例化这个类。更重要的是，任何派生类都必须实现纯虚拟`aMethod()`，否则它也成为抽象类。

在您的派生类中，您从上面覆盖纯虚方法，这使得派生类非抽象。您可以实例化这个派生类。

但是，在派生类中，方法的主体是空的，对吧？这就是为什么你的问题是有道理的：为什么不把课程也变成纯虚拟的。好吧，您的课程可能需要其他方法。如果是，`SomeClass`则不能实例化（有纯虚方法），而子类`SomeClassSon`可以。

同样适用于您的`AnotherClass`，它可以被实例化，与`SomeClass`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T20:15:00.120

不同之处在于它`virtual void aMethod() = 0`是一个[***纯*虚函数**](http://www.learncpp.com/cpp-tutorial/126-pure-virtual-functions-abstract-base-classes-and-interface-classes/)，这意味着：

1.  `SomeClass`成为一个抽象基类，这意味着它不能被实例化。
2.  任何继承自的类都`SomeClass`必须实现`aMethod`，否则它也成为无法实例化的抽象基类

请注意，任何具有一个或多个纯虚函数的类都会自动成为抽象基类。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T20:17:44.247

您所指的“等于0”称为“*纯虚拟*”。这是一个希望被实例化的孩子必须实现的功能，而不是提供基本功能，这意味着父类将定义必须存在的功能，但父母不知道孩子将如何做到这一点。请注意，这使得类抽象，因为它不能被实例化。例如，我可能想定义一个我可以继承的“哺乳动物”类，并且我希望它的孩子以某种方式行事——但我不能简单地制作一个“哺乳动物”。相反，我会创建一个“长颈鹿”类，并确保它的行为符合预期。

在这个[SO](https://stackoverflow.com/questions/1306778/c-virtual-pure-virtual-explained) question 中也对此进行了解释。

您所指的“空”函数是定义函数并且可以调用的功能 - 但什么也不做。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-25T20:16:16.740

声明 aMethod()=0 告诉编译器必须在子类中提供此方法。任何没有实现该方法的子类都不能被实例化。这可以帮助您确保基类的任何对象都将实现该方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-25T20:15:19.197

纯虚函数（您的第一个示例，带有`=0`）意味着必须在派生类中重写该函数才能实例化该类的对象。

第二个基本上只是一个什么都不做的成员函数。由于函数名称不同且类与 无关`SomeClass`，因此两者根本不会相互影响。

第三个覆盖纯虚函数，因此可以实例化`SomeClassSon`，但在派生类中，被覆盖的函数什么也不做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T20:15:08.207

A pure`virtual`使类抽象。一个空的非虚拟方法不会做任何事情——如果你试图调用它，它只会导致链接器错误。相比之下，您不能尝试调用 pure `virtual`（除非您尝试从构造函数中调用它，这无论如何都很糟糕），因为编译器不会让您创建该对象。

还有一个逻辑差异 - 标记的方法`virtual`将通过继承链是虚拟的 - 其他只是常规方法。

# camera - 给定度数的校准相机圆周运动

> ID：15075583
> 
> 赞同：2
> 
> 时间：2013-02-25T20:11:27.003
> 
> 标签：camera, computer-vision, camera-calibration, calibration

根据这个项目（[雕刻恐龙](http://blogs.mathworks.com/loren/2009/12/16/carving-a-dinosaur/)），我想创建一个数据集，其中包含从对象拍摄的 36 张图像并估计适当的相机投影矩阵。

因此，我为具有三个棋盘图案的第一张图像校准了一次相机（外在/内在），现在我想根据我拍摄的 36 张图像添加圆周运动（大约 10 度）以获得如下所示的效果：

![相机姿势](../Images/be32e72ec2dd9121e2c4a43e4f6f7a6d.png)

我的相机是静态的，而拍摄的物体对于每张图像都旋转了 10 度。

我如何实现这一目标？手动创建旋转矩阵并将其添加到我的相机投影矩阵中是否正确？

谢谢你的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:32:35.600

修改旋转矩阵是不够的，你需要改变相机的位置。在运动问题的结构中，假设场景是静态的，而相机是移动的。您可以考虑这种情况，因为只有关系移动很重要。

设外部相机矩阵为 A = R[I | -C]，其中 C 是全局坐标系中相机中心的位置，R 是从全局坐标系到相机坐标系的旋转。设 Ra 表示在全局框架中绕垂直轴旋转角度 alpha。它可以写成 (cos(alpha),-sin(alpha),0;sin(alpha),cos(alpha),0;0,0,1)。然后所需的相机矩阵可以计算为 A2 = R2[I | -C2]，其中 R2 = R * transpose(Ra) 和 C2 = Ra * C。

但是，在使用这种方法时，您应该确保两件事。首先，全局框架的垂直轴必须对应于现实世界的垂直方向。其次，全局框架的原点必须位于相机中心旋转的轴上。后者可以通过将对象置于全局框架的原点来实现。

如果角度测量不准确或全局框架没有很好地居中，那么计算的外在矩阵也可能不准确。在这种情况下，它可以用作运动算法对结构的初始估计。另一种选择是为每一帧校准相机，而不仅仅是第一帧。

# ruby-on-rails - 我是否应该使用 2 个模型来存储相似的数据，但在 rails 中有不同的用途

> ID：15075590
> 
> 赞同：1
> 
> 时间：2013-02-25T20:11:40.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3, models

您好，我目前正在规划一个非常基本的 Rails 应用程序。我想创建一个小型体重跟踪应用程序，它将在体重模型中存储一个体重（数字），还可以每周添加一个目标体重（数字），用户将输入他们的新体重，并将其与目标权重并向用户显示完成百分比等。

现在我的问题是我会同时拥有一个权重模型和一个目标模型，还是应该是一个带有一些额外元信息的权重模型来将权重设置为目标？我承认我是一个非常有轨的菜鸟，我的直觉说有 2 个模型，但我可能完全错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:18:34.600

这是一个非常主观的答案，但出于两个原因，我会将它们分开。

1.  更加模块化。例如，您可能需要对权重模型进行一些模型验证，而不是目标模型。在这种情况下，将它们制成两个不同的模型比将它们合二为一更容易。

2.  模型协会。您可能希望在将来创建模型关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:17:25.807

体重甚至不是我的模型，体重将是用户的参数，goal_weight也是如此。您可以在之后实现一个方法`weight_over_goal_weight?`来检查重量是否超过或等于goal_weight。

# javascript - 取消设置以相同子字符串开头的 Backbone.js 模型的所有属性

> ID：15075592
> 
> 赞同：2
> 
> 时间：2013-02-25T20:11:45.833
> 
> 标签：javascript, backbone.js, model, underscore.js

我想取消设置以相同子字符串开头的 Backbone.js 模型的所有属性，例如：

```
logo_id
logo_width
logo_height 
```

我想做类似的事情：

```
model.unsetAllStartsWith('logo'); 
```

代码将类似于：

```
_.extend(Backbone.Model, {
    unsetAllStartsWith : function(str){
        // something with this.toJSON() ?
    }
}); 
```

我对模型和 toJSON 感到困惑。另外，这是扩展 Backbone 模型类的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T20:36:28.820

Backbone.Model 有一个内置的 extend 方法，所以你可以这样做：

```
var MyModel = Backbone.Model.extend({
    unsetAllStartsWith: function(str){
       // get clone of attributes to iterate over
       var attrs = _.clone(this.attributes);
       _.each(attrs, function(val, key){
              if(key.indexOf(str) == 0){
                  this.unset(key);
              }
           }, this);
    }
});

var model = new MyModel({logo_width: 100, logo_height: 200});
model.unsetAllStartsWith('logo'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T20:37:26.683

试试这个。

```
unsetAllStartsWith：函数（str）{
        var $this = 这个
        var 属性 = Object.keys($this.toJSON());
        _.each（属性，函数（属性）{
            var regex = new RegExp('^'+ str, 'gi')
            如果（属性。匹配（正则表达式））
               $this.unset(属性)        
        }

      }

}

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T00:11:36.703

[这是添加方法（ jsfiddle](http://jsfiddle.net/ctasims/q8paf/) ）的稍微不同的看法：

```
Backbone.Model.prototype.unsetAllStartsWith = function(prefix) {
    var that = this;
    _.each(this.attributes, function(attrVal, attrName) {
      if (attrName.slice(0,prefix.length) === prefix) {
          that.unset(attrName);
      }
  })
}; 
```

像这样使用：

```
var MyModel = Backbone.Model.extend({
    defaults: {
        'foo_first': 'bar',
        'foo_second': 'bar2',
        'different': 'bar3'
    }
});

var testModel = new MyModel();
testModel.unsetAllStartsWith('foo'); 
```

# ruby-on-rails - 如何使用回形针将文件上传到已安装的网络文件夹？

> ID：15075593
> 
> 赞同：1
> 
> 时间：2013-02-25T20:11:48.860
> 
> 标签：ruby-on-rails, paperclip, carrierwave

我`myfiles`在已安装的网络驱动器下有一个文件夹。

我可以`\\networkdrive\myfiles`在 Windows 资源管理器中访问它，并且我可以完全访问它。

我在我的模型中指定了这个：

```
has_attached_file :file,
                    :path => "//networkdrive/myfiles/:id/:basename.:extension",
                    :storage => :filesystem 
```

但它不会将文件保存到我指定的位置。

知道这里有什么问题吗？

# php - wordpress wp_nav_menu 在 ul 末尾添加 span

> ID：15075597
> 
> 赞同：0
> 
> 时间：2013-02-25T20:12:05.143
> 
> 标签：php, html, wordpress, navigation

我正在使用 wordpress 和 wp_nav_menu 函数来获取导航，我想在 ul 中添加一个跨度，如下所示：

```
<ul>
  <li><a href="">url1</a></li>
  <li><a href="">url2</a></li>
  <li><a href="">url3</a></li>
  <span></span> <-- I want to add this
</ul> 
```

我用谷歌搜索了几次，但找不到我必须在 wp_nav_menu 中更改的选项

```
<?php wp_nav_menu( array( 
    'theme_location'  => 'primary',
    'menu'            => '',
    'container'       => 'div',
    'container_class' => '',
    'container_id'    => '',
    'menu_class'      => 'menu',
    'menu_id'         => '',
    'echo'            => true,
    'fallback_cb'     => 'wp_page_menu',
    'before'          => '',
    'after'           => '',
    'link_before'     => '',
    'link_after'      => '',
    'items_wrap'      => '<ul id="%1$s" class="%2$s">%3$s</ul>',
    'depth'           => 0,
    'walker'          => ''
    ) ); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:45:53.733

[http://codex.wordpress.org/Function_Reference/wp_nav_menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)

看看**$items_wrap的例子**

# javascript - Javascript 和 Rails 交互

> ID：15075599
> 
> 赞同：0
> 
> 时间：2013-02-25T20:12:13.763
> 
> 标签：javascript, ruby-on-rails-3

我是一个相当新的 Web 开发人员，并且在解决 Rails 应用程序的所有部分如何交互时遇到了一些问题。我正在使用导轨 3.2

基本上，我希望做的是从包含一些独特格式数据的远程网站检索响应。然后需要解析这些数据以提取重要的部分，然后这些部分需要用于在我的页面上生成部分。

在我使用的控制器中：

```
require 'net/http'
@result = Net::HTTP.get(URI.parse("http://remote.website.toget.data")); 
```

然后在不生成部分的情况下初始呈现页面。在此之后，我使用脚本标记将 @result 解析为包含我需要的数据的数组：

```
var myData='<%= @result %>';
var myDataCleaned = myData.replace(/%20/g, " ");
while(gameTeams = regexGameTeams.exec(myDataCleaned)){
myTeams[count] = new Array();
myTeams[count][0] = gameTeams[1];
myTeams[count][1] = gameTeams[2];
count++;
} 
```

现在我对如何使用这些数据来生成我的部分感到困惑。研究表明，将其作为本地传递给 <%= render 'partial' %> 调用是不可能的，那么我该如何进行这项工作呢？我的猜测是我以错误的方式解决了这个问题，需要在呈现页面之前以某种方式完成解析，然后将结果传递给控制器​​，但我似乎无法弄清楚。如果有人能指出我正确的方向，将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:27:09.383

你是对的，你应该解析 ruby​​ 中的数据（在进行远程调用的控制器中）并从提取的数据中构建你的部分。
数据是什么格式的？

如果是的话`json`，你可以使用`parsed_data = JSON.parse(data)`

但即使它采用不同的格式，ruby 也使解析相对容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:37:18.477

如果您的目标是在部分内部提供对 Javascript 的 Rails/Ruby 变量的访问，那么在部分内部您会使其输出 JS 代码，例如：

```
some_js_var = <%= some_local_ruby_var_that_is_in_scope %> 
```

或者

```
some_js_var = <%= @some_instance_ruby_var_that_is_in_scope %> 
```

您不能将 Javascript 变量传递到 Rails 部分而不向服务器发出请求，因此您需要在服务器上进行响应解析等，或者如果您出于某种原因*必须*在 Javascript 中进行解析，那么你会在 Rails 端设置一些 JSON 服务来处理来自 JS 端的 JSON 请求，但这有点傻。

# c# - 如何编写 Windows Search 风格的查询字符串解析器？

> ID：15075602
> 
> 赞同：4
> 
> 时间：2013-02-25T20:12:25.097
> 
> 标签：c#, search, lexer

使用 C# 我正在尝试向我正在处理的应用程序添加搜索功能，但我想编写一个可以反复使用的搜索提供程序，它将接收用户输入的查询字符串，然后将其解析为结果字典。字典将只包含关键字和值。IE。关键字“last”和值“Simpson”

我想允许搜索字段接受普通字符串、带引号的字符串和带参数的字符串，就像 Windows 搜索一样。它不必像 Windows Search 那样广泛。显然，必须先解析用户输入的查询字符串，然后再将解析后的查询字符串解释为对数据源的查询。

有人如何着手编写词法分析器或可以将用户可以输入的多种变体解析为实际有用的东西？是否有任何框架可以使这更容易，例如指定关键字和参数？基本上我正在寻找的是一些关于如何开始的信息。我做实际工作没有问题，我只是不知道从哪里开始尝试这样做。普通字符串和带引号的字符串很容易解析，但参数字符串一直是让我感到困惑的曲线球。

```
Example of plain query strings:
- hello.txt
- one two three

Example of quoted strings:
- "one two"
- one "two three"

Example of parametered strings:
- last:simpson
- first:bart
- name:"Bart Simpson"
- name:"Bart Simpson" age:12
- hello name:"Bart Simpson" fart age:12 
```

# xcode - 检查脚本中的 GCC_PREPROCESSOR_DEFINITIONS 参数

> ID：15075605
> 
> 赞同：5
> 
> 时间：2013-02-25T20:12:33.880
> 
> 标签：xcode, bash

在我的项目目标的构建设置中，我将预处理器宏配置如下：

```
Debug FILE_SHARE = 1
Adhoc FILE_SHARE = 1
Release FILE_SHARE = 2 
```

我想`UIFileSharingEnabled`根据脚本中的这些设置值更改标志，如下所示：

```
#!/bin/bash
if [${buildSettings}/${GCC_PREPROCESSOR_DEFINITIONS}/${FILE_SHARE} = 1 ]; then
     /usr/libexec/PlistBuddy -c "Set :UIFileSharingEnabled YES" "${TARGET_BUILD_DIR}/${INFOPLIST_PATH}"
else
     usr/libexec/PlistBuddy -c "Set :UIFileSharingEnabled NO" "${TARGET_BUILD_DIR}/${INFOPLIST_PATH}"
fi 
```

我知道`${buildSettings}/${GCC_PREPROCESSOR_DEFINITIONS}/${FILE_SHARE} = 1`是错误的语法，但我不知道什么应该是正确的语法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T21:47:50.397

执行运行脚本时，“用户定义的构建设置”也是环境的一部分，因此以下应该可以工作：

```
if [ ${FILE_SHARE} = 1 ]; then
/usr/libexec/PlistBuddy -c "Set :UIFileSharingEnabled YES" "${TARGET_BUILD_DIR}/${INFOPLIST_PATH}"
else
/usr/libexec/PlistBuddy -c "Set :UIFileSharingEnabled NO" "${TARGET_BUILD_DIR}/${INFOPLIST_PATH}"
fi 
```

**编辑：**我误读了您的问题，上述答案适用于“用户定义的构建设置”，而不适用于预处理器宏。

以下脚本使用 的正则表达式匹配功能`expr`来提取 FILE_SHARE 预处理器宏的值：

```
val=`expr "$GCC_PREPROCESSOR_DEFINITIONS" : ".*FILE_SHARE=\([0-9]*\)"`
if [ $val = 1 ]; then
...
else
...
fi 
```

# ios - Twitter API，也允许应用程序的关注者

> ID：15075606
> 
> 赞同：0
> 
> 时间：2013-02-25T20:12:44.580
> 
> 标签：ios, twitter

我想知道 Twitter API 是否有类似于 Facebook 的“已安装”用户属性的东西。如果您不知道那是什么，Facebook 将根据连接是否已安装/授权应用程序返回一个值（请参阅下面的官方说明）。

我要做的是显示用户关注的也使用该应用程序的人员列表，以便他们可以与他们联系。就像 Instagram 对你的 Facebook 朋友所做的那样，Vine 对你的 Twitter 朋友所做的那样。

来自 Facebook：指定用户是否已安装与用于发出请求的应用访问令牌关联的应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:05:06.240

看来这是不可能的。至少现在没有了。

你现在能做到这一点的唯一方法就是你自己。这意味着，为经过身份验证的用户存储 Twitter ID。然后，您可以将 twitter GET friends/ids api 调用返回的朋友 id 与您拥有的存储 twitter id 的数据库进行比较并显示这些用户。

Twitter 让使用他们的 API 和数据变得如此困难，真是太可惜了。

# android - 如何在列表视图中选择适当的复选框

> ID：15075607
> 
> 赞同：0
> 
> 时间：2013-02-25T20:12:50.210
> 
> 标签：android, listview, checkbox

请帮忙，这个（可能很简单）问题让我发疯了。

我有一个包含文本视图和复选框的自定义列表视图。当复选框被选中时，我想对 listview 元素进行操作。我正在尝试使用下面的代码，但问题是我不知道如何检测单击了哪个特定复选框。

```
checkBox = (CheckBox) findViewById(R.id.textCheckbox);
checkBox.setOnCheckedChangeListener(this);

public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    if (isChecked)
        make some action
    else
        make another action
} 
```

我还尝试让复选框对 OnItemLongClickListener 做出反应：

```
OnItemLongClickListener LongListener = new OnItemLongClickListener() {
    @Override
    public boolean onItemLongClick(AdapterView<?> a, View v, int position, long id) {
        CheckBox checkBox = (CheckBox) v.findViewById(R.id.textCheckbox);
        listView = (ListView) a;
        checkBox.setChecked(true);
        return true;
    }
}; 
```

这样，当我长按列表视图项目时，我可以检查一个正确的复选框，但是一旦我向下滚动列表，复选框就会从它的位置移动。

请指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:18:52.367

最好的方法是更新底层数据并调用`notifyDatasetChanged()`

```
OnItemLongClickListener LongListener = new OnItemLongClickListener() {
@Override
    public boolean onItemLongClick(AdapterView<?> a, View v, int position, long id) {
        someListWithYourData.get(position).setSomething(true); // Now your data reflects the change
        yourAdapter.notifyDataSetChanged();
        return true;
    }
}; 
```

# ruby-on-rails - 如何引用具有多词模 型的连接表？

> ID：15075608
> 
> 赞同：0
> 
> 时间：2013-02-25T20:12:52.710
> 
> 标签：ruby-on-rails, activerecord, jointable

这可能是一个愚蠢的问题，但我似乎无法让它发挥作用：

通常可以像这样访问用户和组之间的连接表：

```
GroupsUsers.find(:all) 
```

但是如果两个模型之一有多个单词，比如用户和朋友组呢？这不起作用：

```
FriendGroupsUsers.find(:all) 
```

我已经尝试了以下方法，但没有一个有效：

```
FriendGroupsUsers.find(:all)
FriendgroupsUsers.find(:all)
FriendGroups_Users.find(:all)
Friend_GroupsUsers.find(:all) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T08:21:55.360

如果您不喜欢标准连接模型名称，只需为您的连接表创建模型，然后分配您想要的任何名称：

```
class AnyName < ActiveRecord::Base
  set_table_name :friends_group_users
end 
```

# visual-studio-2012 - 为什么在 Visual Studio 中构建我的 TypeScript 项目会忽略 TypeScriptTarget 参数？

> ID：15075615
> 
> 赞同：1
> 
> 时间：2013-02-25T20:13:30.280
> 
> 标签：visual-studio-2012, typescript

我在 Visual Studio（Express 2012 for Web）中有一个现有的 TypeScript 项目。该项目是使用 TypeScript 0.8.1 创建的。

一些类使用属性，因此需要`--target ES5`编译器参数。

我刚刚将插件更新为 TypeScript 0.8.2，并按照[此处](http://typescript.codeplex.com/wikipage?title=Compile-on-Save)定义的步骤启用“保存时编译”。这如所描述的那样工作，包括编译使用属性的类。

但是，当我尝试构建项目时，会出现以下错误： `Config.ts (32,6): Property accessors are only available when targeting ES5 or greater`

这是我的 .csproj 文件中的相关部分：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.targets" />
<PropertyGroup Condition="'$(Configuration)' == 'Debug'">
  <TypeScriptTarget>ES5</TypeScriptTarget>
  <TypeScriptIncludeComments>true</TypeScriptIncludeComments>
  <TypeScriptSourceMap>true</TypeScriptSourceMap>
</PropertyGroup> 
```

完整的文件可以在[这里](https://gist.github.com/sykesd/5033772)看到。

为什么它适用于编译单个文件，但如果我构建或重建整个项目则不行？

编辑：更新片段以显示该`<Import>`标签也包括在内。

编辑 2：添加了完整项目文件要点的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:44:45.507

Did you modify your .csproj file to also import the TypeScript .targets file (in lieu of the build event action to invoke TSC)? If you just update the PropertyGroup, you won't actually be invoking the compiler through the thing that turns those settings into command-line flags.

Edit: You need the `Import` tag to be after the `PropertyGroup` (otherwise the imported file doesn't "see" the property values you're setting). Ideally the `Import` would be last or near-last in the file - definitely after all the `PropertyGroup`s that change settings it depends on.

# c# - 单元格边框导致日历变大

> ID：15075623
> 
> 赞同：0
> 
> 时间：2013-02-25T20:13:54.923
> 
> 标签：c#, asp.net, html, css

我有一个自定义的 asp.net 日历。选择日期后，它将运行以下样式：

```
.calendar-cell
{
    -webkit-border-radius: 7px;
    border-radius: 7px;
    background: rgb(239,239,239); /* Old browsers */
    background: -moz-linear-gradient(-45deg, rgba(239,239,239,1) 0%, rgba(235,235,235,1) 50%, rgba(229,229,229,1) 51%, rgba(254,254,254,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,rgba(239,239,239,1)), color-stop(50%,rgba(235,235,235,1)), color-stop(51%,rgba(229,229,229,1)), color-stop(100%,rgba(254,254,254,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(-45deg, rgba(239,239,239,1) 0%,rgba(235,235,235,1) 50%,rgba(229,229,229,1) 51%,rgba(254,254,254,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(-45deg, rgba(239,239,239,1) 0%,rgba(235,235,235,1) 50%,rgba(229,229,229,1) 51%,rgba(254,254,254,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(-45deg, rgba(239,239,239,1) 0%,rgba(235,235,235,1) 50%,rgba(229,229,229,1) 51%,rgba(254,254,254,1) 100%); /* IE10+ */ /* W3C */
    border-style: solid;
    border-width: thin;
    border-color: inherit;
    background: linear-gradient(135deg, rgba(239,239,239,1) 0%,rgba(235,235,235,1) 50%,rgba(229,229,229,1) 51%,rgba(254,254,254,1) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#efefef', endColorstr='#fefefe',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
    border-collapse:collapse !important;
    -webkit-box-shadow: 1px 1px 2px 1px rgba(0, 0, 0, 0.08);
    box-shadow: 1px 1px 2px 1px rgba(0, 0, 0, 0.08);
    color: #019fde !important;
} 
```

这增加了一个边框。

这会导致整个日历变大。

我试过没有运气的边框间距和折叠属性。

当边框被添加到选定的日期时，有没有办法让日历不增长？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:38:14.190

不幸的是，这就是边界的工作方式。如果你的边框是 1px 宽，那么它会占用 1px 的空间。

您可以改用该`outline`属性。它实际上与边框相同，但没有随之而来的不受欢迎的额外宽度/高度。您可以在下面的演示中看到，包含轮廓元素的元素集合比包含边框元素的元素集合窄 20px。

[http://codepen.io/cimmanon/pen/wyktr](http://codepen.io/cimmanon/pen/wyktr)

```
<div class="container">
  <div class="solid"></div>
  <div class="bordered"></div>
  <div class="solid"></div>
</div>

<div class="container">
  <div class="solid"></div>
  <div class="outlined"></div>
  <div class="solid"></div>
</div>

div.container {
  display: table;
  margin: 1em;
}

div.container div {
  display: table-cell;
  width: 100px;
  height: 100px;
}

.bordered {
  border: 10px solid orange;
}

.outlined {
  outline: 10px solid red;
}

.solid {
  background: #CCC;
} 
```

[http://caniuse.com/#search=outline](http://caniuse.com/#search=outline)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:59:18.253

如上所述，您可以使用不会增加大小的**轮廓**，也可以使用将边框带入内容空间的**box-sizing 。**

例如这里 [http://jsfiddle.net/Y5VmT/](http://jsfiddle.net/Y5VmT/)

```
div {
    width: 200px;
    height: 200px;
    border: 2px solid black;
    background: grey;
}

.sizing {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -o-box-sizing: border-box;
    -ms-box-sizing: border-box;
    box-sizing: border-box;
}

<div>
    pppppppppppppp pppppppppppppppppp pppppppppppppppppppppp
    pppppppppppppp pppppppppppppppppp pppppppppppppppppppppp
    pppppppppppppp pppppppppppppppppp pppppppppppppppppppppp
</div>

<div class="sizing">
    pppppppppppppp pppppppppppppppppp pppppppppppppppppppppp
    pppppppppppppp pppppppppppppppppp pppppppppppppppppppppp
    pppppppppppppp pppppppppppppppppp pppppppppppppppppppppp
</div> 
```

# hl7 - HL7 CDR 组件是如何表示/实现的？

> ID：15075624
> 
> 赞同：1
> 
> 时间：2013-02-25T20:13:59.417
> 
> 标签：hl7

我是新手`HL7`，我正在尝试弄清楚如何表示 PID 段 - 即 PID-5-10。PID-5-10 是“CDR 组件”，它由 2 个子组件组成，每个子组件由 2 个值组成 - `Time and Degree of Precision`。如果我查看 MSH-2 中定义的标准分隔符，似乎没有足够的分隔符来区分这些`Time and Degree of Precision`值。

例如

```
PID|1|2|3|4|5-1^^^^^^^^^5-10-1.Time?5-10-1.Precision&5-10-2.Time?5-10-1.Precision^5.11 
```

我应该使用什么标准分隔符来代替“？” 在上面的例子中？非常感谢任何见解和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:48:28.050

PID 5 是患者姓名。通常不超过

> |last^first^mid^suffix^prefix|

# jquery - Jquery 每个循环都不起作用？

> ID：15075634
> 
> 赞同：0
> 
> 时间：2013-02-25T20:14:23.630
> 
> 标签：jquery, each

```
$(':submit').click(function(e) {
    $('.requiredField :input').each(function() {
        if ('input[type=text]'){
            if($(this).val().length === 0) {
                $(this).addClass('warning'); //
                var errorMsg = $('<br /> Please Fill all the Fields').addClass('warning');
                errorMsg.insertAfter('.requiredField .textbox');
            }
        }
    });
    e.preventDefault(); //preventing form submission
}); 
```

我需要从这个函数中给出每个空文本框的错误消息，但它会做类似的事情：如果我有两个空文本框，它会在所有文本框 x 2 上给出错误？请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:22:10.730

1.  您最初的检查`if ('input[type=text]'){`并没有真正意义。
2.  该行：

    `errorMsg.insertAfter('.requiredField .textbox');`

    将在该类的每个实例之后插入您的错误消息。你可能想要更多的东西：

    `errorMsg.insertAfter(this);`

    如果没有看到 HTML，我无法确定您需要什么，但我可以保证您所拥有的并不是您真正想要的。

# javascript - 拒绝加载 Chrome 中的脚本错误

> ID：15075636
> 
> 赞同：1
> 
> 时间：2013-02-25T20:14:27.417
> 
> 标签：javascript, google-chrome, same-origin-policy

在我的网站上加载页面时，我在 Chrome 中收到以下错误，该页面和 HTML5 页面：

```
Refused to load the script 'data:application/x-javascript;base64,LyohICRGaWxlVmVyc2lvbj0xLjYuMTczICovIA…ExMTIyQTYyNjUzRjZDQzcyOEIwRjZFRjJGRkMxQ0E3QjU3OUY0RDIyNERBRDY0QUI2RDRFQUFD' because it violates the following Content Security Policy directive: "script-src https://*.facebook.com http://*.facebook.com https://*.fbcdn.net http://*.fbcdn.net *.facebook.net *.google-analytics.com *.virtualearth.net *.google.com 127.0.0.1:* *.spotilocal.com:* chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl 'unsafe-inline' 'unsafe-eval' https://*.akamaihd.net http://*.akamaihd.net". 
```

有什么办法可以解决这个问题。我对服务器 (Amazon EC2) 拥有完全控制权，因此我无法进行任何必要的更改。谢谢

# python - 当日志路径重叠时防止python FileHandler中的双重输出

> ID：15075640
> 
> 赞同：0
> 
> 时间：2013-02-25T20:14:35.963
> 
> 标签：python, logging

以下代码导致相同的日志消息被输出两次：

```
log1 = logging.getLogger('foo')
log1.addHandler(logging.FileHandler('log.txt'))
log2 = logging.getLogger('foo.bar')
log2.addHandler(logging.FileHandler('log.txt'))

log2.warn("test message") 
```

我意识到这是因为 'foo.bar' 匹配 'foo' 和 'foo.bar' 路径，所以两个记录器都会收到消息。我的问题是：除了确保我永远不会有两个记录器指向同一个日志路径中的同一个文件之外，还有什么方法可以防止这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:17:11.033

您可以告诉`log2` [不要将消息传播](http://docs.python.org/2/library/logging.html#logging.Logger.propagate)到祖先记录器的处理程序：

```
log2.propagate = False 
```

* * *

```
import logging

log1 = logging.getLogger('foo')
log1.addHandler(logging.FileHandler('log.txt'))
log2 = logging.getLogger('foo.bar')
log2.addHandler(logging.FileHandler('log.txt'))
log2.propagate = False
log2.warn("test message") 
```

中只写`test message`一次`log.txt`。

# cordova - 初始化 Cordova 时出错：JSON 错误

> ID：15075646
> 
> 赞同：0
> 
> 时间：2013-02-25T20:14:58.817
> 
> 标签：cordova

当我尝试在 Android 模拟器中启动我的 phonegap 应用程序时，我收到**Error Initializing Cordova:JSON 错误。**我已按照此[链接](http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.html)为 Phonegap 设置环境。我正在使用 Cordova-2.4.0 和我自己的一组带有 jQ​​uery 的 HTML、CSS 和 JS 文件。应用程序在只有 HTML、CSS、JS 文件时运行，没有 PhoneGap更改托管在 Web 服务器中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:39:16.157

我认为您错过了设置[Domain-Whitelist](http://docs.phonegap.com/en/2.4.0/guide_whitelist_index.md.html)。我建议使用官方的 cordov 教程：[http](http://cordova.apache.org/docs/en/2.4.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android) ://cordova.apache.org/docs/en/2.4.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android来设置您的项目。

您的教程的链接适用于 1.5 版。该版本中没有域白名单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:45:12.627

`deviceready`我更改了调用函数/js的顺序。在该`deviceReady`方法之后，所有其他 js 文件都被加载。这解决了我的问题

# c# - 如何为具有返回类型的特定条件添加断言

> ID：15075651
> 
> 赞同：0
> 
> 时间：2013-02-25T20:15:03.447
> 
> 标签：c#

我的代码中有这样的东西。现在该方法假设返回一个枚举类型。但是，并非所有代码路径都返回一个值。我想解决这个问题，同时我希望调试器提醒我（即）断言没有枚举类型可以返回，以防它进入 else （代码中的第三个条件）。通常我会为 else 条件添加另一个枚举类型并检查返回值，但我想知道是否有更好的方法来执行此操作。

```
 private enumType AdjustType(someo_object q)
        {
            if(q.val.Equals("M"))
            {
                return enumType.FirstType;
            }
            else if (q.val.Equals("N"))
            {
                return enumType.SecondType;
            }
            else
            {
                return null; //This isnt allowed - I would like something like an assertion here
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:16:41.427

我只想扔`ArgumentException`- 并且可能通过开关来做：

```
private enumType AdjustType(someo_object q)
{
    switch (q.val)
    {
        case "M": return enumType.FirstType;
        case "N": return enumType.SecondType;
        default : throw new ArgumentException(...);
    }
} 
```

我个人更喜欢这个而不是使用`Debug.Assert`- 无论如何你都必须返回*一些东西*，然后当在发布版本中关闭断言时错误可能会传播。

另一种选择是只拥有一个`Dictionary<string, enumType>`- 你可能会很高兴让[`KeyNotFoundException`](http://msdn.microsoft.com/en-us/library/system.collections.generic.keynotfoundexception.aspx)传播。（这取决于您的上下文。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T20:19:30.003

你有几个选择：

1.  抛出异常。当您知道输入*无效*（例如由于调用代码中的错误）时，这是合适的。

    ```
    throw new InvalidOperationException("Cannot convert from Q to MyEnum."); 
    ```

2.  使用可为空的类型。当操作没有有效结果时（例如，由于无效的用户输入或不是错误的情况），这是合适的。

    ```
    private MyEnum? AdjustType(object q)
    {
        // ...
        else
            return null;
    } 
    ```

3.  向枚举添加一个`None`值并返回：

    ```
    public enum MyEnum
    {
        None = 0,
        First,
        Second
    } 
    ```

（请注意，始终建议添加这样的值，可以在[此处](http://msdn.microsoft.com/en-us/library/ms182149.aspx)阅读。）

* * *

如果传入参数的某些值对您的方法永远无效，则应在方法的开头检查这些值，并`ArgumentException`在该值无效时抛出或其派生类之一。然后你可以假设你的方法的其余部分传入的值是有效的，这使你的代码更清晰。这就是我喜欢编写此类方法的方式：

```
private MyEnum AdjustType(object q)
{
    #region Contract
    if (q == null)
        throw new ArgumentNullException("q");
    if (q.Value != "M" && q.Value != "N")
        throw new ArgumentException("Value must be M or N.", "q");
    #endregion

    // Here all incoming arguments are valid and within range.
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T20:16:27.740

您始终可以使用枚举的可为空版本：

```
private enumType? AdjustType(someo_object q) 
```

# linux - 在 USB 笔式驱动器上安装 Windows 8 iso 映像，以便在 linux 上进行安装

> ID：15075654
> 
> 赞同：0
> 
> 时间：2013-02-25T20:15:15.070
> 
> 标签：linux, windows-8, installation

我的大学免费为我提供了一个 Windows 8 系统，所以我想“是的，让我们把游戏从地窖里拿出来吧”并下载了 iso 映像，但现在我有一个问题：如何在 USB 笔式驱动器上安装安装程序映像一台linux机器？我正在使用 crunchbang statler，它是 ubuntu 的一个子发行版。

一些系统规格：
Linux 3.2.0-0.bpo.1-686-pae (ubuntu/crunchbang)
i686
有足够的空间来加载每个随机的 click'n'color-woosh GUI，这是它的目的，但我更喜欢终端方式：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:26:33.847

您可以使用[WinUSB](http://www.webupd8.org/2012/01/tool-to-create-windows-usb-install.html)。您可以通过 ppa 安装它：

```
sudo add-apt-repository ppa:colingille/freshlight
sudo apt-get update
sudo apt-get install winusb 
```

它带有一个 UI，对我来说效果很好。通过终端使用它

```
sudo winusb --format <iso path> <device> 
```

它格式化整个驱动器（！）并安装 ISO 和 MBR。如果您不想格式化整个驱动器而只想格式化单个分区，请使用

```
sudo winusb --install <iso path> <partition> 
```

分区必须格式化为 NTFS。这也写入 MBR。

# ios - 以编程方式设置 ipad 布局问题

> ID：15075655
> 
> 赞同：1
> 
> 时间：2013-02-25T20:15:16.417
> 
> 标签：ios, objective-c, ios5, ipad-2

我遇到了一个有趣的问题。现在，当我进入场景 2 时，我遇到了问题，在场景 2 上设置了我的控件的帧大小（它们也以图形方式布置在故事卡上），以便根据设备旋转处理需要绘制的任何方式。到目前为止，已经在 ipad 3 上进行了测试，没有任何问题。但是我有一个 ipad 2 测试仪，他说当他按下场景 2 时程序退出，这对我来说意味着它正在崩溃。现在我不确定崩溃是否与按钮和文本视图等控件的帧大小的编程设置有关，但它发生在场景加载时，所以我从那里开始。

我有两个问题。视图的程序化绘图何时会使程序崩溃，并且 ipad 2 的屏幕区域是否与 ipad 3 不同。我知道一个是视网膜，但我不认为 2 和 3 之间的坐标系以前的工作方式不同。我确实意识到本周末高 ipod 和短 ipod 有不同的可用空间，但这从未产生崩溃可能是因为我首先为短 ipod 编程，并且布局被绘制得更小而不是更大，告诉我更新它以支持两者。

我是否走在正确的道路上，可能是我的布局图导致了崩溃？我给他发了一个测试版本，我在其中禁用了控件的编程大小（这意味着它现在在该版本中不支持翻转），看看我的理论是否正确，但我想在这里问一下，我希望能相对地解决这个问题很快。

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T20:09:21.807

他尝试了另一个构建，它停止了崩溃。我在左上角有一些控件，我意识到我没有以编程方式设置位置（它们在正确的位置，翻转时的左上角）或创建了引用插座。我修复了它以设置每个控制位置。我还将它更改为以编程方式更改视图，而不是连接按钮以通过情节提要更改视图。还有一个问题是，如果您在连接之前更改视图，它会挂在我的 iPad 3 上（可能是因为套接字未初始化），这可能导致他崩溃。我不确定测试人员在做什么。我无法确定修复了哪些更改（尽管我已经总结了主要的）并且几周过去了，我才让他尝试另一个构建，但我'

# php - xml解析与php错误

> ID：15075663
> 
> 赞同：0
> 
> 时间：2013-02-25T20:15:41.143
> 
> 标签：php, xml, dom, xml-parsing

我在谷歌和这里都找不到任何有用的东西。我无法解析我的 xml 文件。

```
 $xml = new DOMDocument();
    $xml->load('racunixml.xml');
    $searchNode = $xml->getElementsByTagName( "racun" ); 
    foreach( $searchNode as $searchNode ) 
    {   
       $xmlNaruc=$searchNode->getElementsByTagName('narucitelj');
       $valNaruc = $xmlNaruc->getAttribute('naziv'); 
       $valID = $searchNode->getAttribute('redbr'); 
       $valDate = $searchNode->getAttribute( "date" ); 
        $valPaci = $searchNode->getAttribute( "pacijent"); 
    } 
```

返回引用以下行的错误： `$valNaruc = $xmlNaruc->getAttribute('naziv');`

致命错误：调用未定义的方法 DOMNodeList::getAttribute()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:45:40.913

如果您正在调用 ::getElementsByTagName()（注意其中的“s” - 复数），它总是返回 DOMNodeList。它会礼貌地向您提示错误消息。如果我们查看手册[http://www.php.net/manual/en/class.domnodelist.php](http://www.php.net/manual/en/class.domnodelist.php)这个类没有 ::getAttribute() 方法。但是 DOMNode 有并且您在这里需要做的是在 foreach 中遍历 getElementsByTagName() 返回的结果：

```
foreach($searchNode->getElementsByTagName('narucitelj') as $xmlNaruc) {
    $valNaruc = $xmlNaruc->getAttribute('naziv'); 
    .....
} 
```

# android - 将 OpenCV 图像（或位图）从服务发送到活动（SurfaceView）

> ID：15075666
> 
> 赞同：3
> 
> 时间：2013-02-25T20:15:44.710
> 
> 标签：android, opencv, service, android-activity, surfaceview

我正在开发一个 Android 应用程序，该应用程序安装了一项服务，该服务进行一些持续且昂贵的处理（它利用 OpenCV 抓取相机图像并对其进行一些处理）。我希望我的活动连接到服务并从服务断开连接以在设备上执行其他操作并查看处理（主要用于调试，但我也可以查看其他用例）。

问题是我不确定如何设计这个应用程序——我对 Android 编程也很陌生。

由于它是一个性能关键的应用程序，我想我无法将位图从服务传递到活动，所以我想我想在活动进入前台后立即将 SurfaceView 耦合到服务。

如下所示 - 注意：它不是一个完整的示例，它只是显示流程

```
public class MainActivity extends Activity {
    private OpenCVCameraService mService;
    private SurfaceView mSurfaceView;
    @Override
    public void onCreate() {
        // show UI
        // start mService with mSurfaceView
    }
}

public class OpenCVCameraService extends Service {
    private Processing mProcessing;
    private SurfaceView mSurfaceView;
    @Override
    public void onCreate() {
        // setup OpenCV camera stuff
        // init mProcessing with mSurfaceView
    }
}

public class Processing extends Thread {
    private VideoCapture mCamera;
    private SurfaceView mSurfaceView;   // maybe just the SurfaceHolder
    Processing(VideoCapture camera, SurfaceView surfaceView) {
        mCamera = camera;
        mSurfaceView = surfaceView;
    }
    @Override
    public void run() {
        mCamera.grab();
        mCamera.retrieve(...);
        // process retrieved images
        // image to bitmap
        // What now, how to get bitmap to MainActivity? Passing using intent is a performace hit I guess
        // maybe something like if (mSurfaceView != null) { Canvas canvas = mSurfaceView.lockSurface(); ... }
    }
} 
```

你会如何设计这样的应用程序？还有什么我需要考虑的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:33:59.983

好的，这就是我的做法：我在 MainActivity 的 onServiceConnected/onServiceDisconnected 中将 SurfaceView 设置为正确的视图（如果应用程序正在运行），如果不是（即暂停）则设置为 null。在服务中，我检查视图是否存在。这不是最好的解耦，但它可以工作，而且据我现在所知，性能还可以。

# linux - 如何使用 BASH 设置循环以查找具有写权限的目录？

> ID：15075673
> 
> 赞同：0
> 
> 时间：2013-02-25T20:16:10.127
> 
> 标签：linux, bash

我对 Linux 和 shell 脚本非常陌生，我被困在我必须编写的脚本的某个部分上。这是课堂作业。

我需要编写一个循环来检查是否有用户（在我的组中）使用 write 开关打开了 public_html 文件`rwx`。这样我就可以将信息写入其中，而不是`public_html`在我获得所需信息后从该组成员那里检索它。

这就是我现在的位置：

```
while read temp;do

# this is my main hang up, to see it this global 
# switch is turned on to write.
if[[ <9> = 'w' ]] 
echo "$temp has their w switch turned on."

# this also is throwing me off, i think this is the way to 
# keep going until all the public_html directories in the 
# group have been seen.
done < ..public_html 
```

或者我正在试图弄清楚如何使用 find 命令，这在逻辑上似乎更简单，更有意义，我只是从未使用过它，所以我在这方面有点坐不住了，我试过这条线没有有用，也许它接近？

```
find . */home/public_html -perm -g +w
#I was hoping that would search all user directories looking for the permission +w turned on in public_html. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:04:31.397

您是否需要使用循环来执行此操作？这似乎是天作之合[`find`](http://linux.die.net/man/1/find)。特别是`-perm`，`-gid`、 和`-type`测试在这里会很有用。

你能更详细地解释一下你的环境吗？您是否正在寻找`public_html`在用户主目录中命名的文件？还是您在当前目录中寻找文件/文件夹？还是完全不同的东西？

一些使用提示`find`：

*   使用`-type d`测试将结果限制在文件夹中
*   使用`-name`测试将您的结果限制为名为“public_html”的内容
*   使用`-gid`测试将您的结果限制在您组中的内容（该`id -g`命令应报告您的组 ID）
*   使用`-perm -g+w`测试将结果限制为可组写的内容

结合所有这些，您应该能够准确地过滤出您正在寻找的内容。我链接到的手册页底部有一个“示例”部分，显示了如何使用各种参数。您可能还想查看[本`find`教程](http://content.hccfl.edu/pollock/unix/findcmd.htm)以获取更多带有解释的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T20:21:53.627

如果您在组中，则您可以阅读目录。

```
shopt -s globstar

for i in **/*/; do
    test -x "$i" && echo "$i have 'x' bit"
done 
```

要求`bash --version`>=4

# jakarta-ee - 如何将联合存储库中的组映射到 WebSphere App Server v8.0 中的 LDAP 组

> ID：15075674
> 
> 赞同：0
> 
> 时间：2013-02-25T20:16:14.373
> 
> 标签：jakarta-ee, web-applications, java-ee-6, rad, websphere-8

我能够将 LDAP 用户从 Active Directory 映射到在 WAS v8.0.0.5 的联合存储库中定义的 LDAP 存储库。但是，我无法列出与这些用户关联的任何 Active Directory 组。

例如，当我单击我的安全域时，展开用户领域，然后单击“为此域自定义”单选按钮下列出的“管理组”，我得到 0 个组返回。当我点击“管理用户”时，我得到了一个返回的用户列表。一些关于 LDAP 组的配置是错误的，但我不知道从哪里开始。有人可以为我提供一些关于我应该在哪里/如何配置 LDAP 组的一般指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:14:16.150

我想出了解决方案。问题是这些组是在一个单独的主要分支中定义的，而我关心的用户位于另一个主要分支中。

一旦我将我的基本条目设置为更高级别以包含两个主要分支，这些组就会通过 WAS 的管理控制台变得可见。

# x86 - 可以虚拟化并运行 Linux 内核的最简单的架构

> ID：15075678
> 
> 赞同：26
> 
> 时间：2013-02-25T20:16:23.167
> 
> 标签：x86, arm, emulation, virtual-machine

我受到了 Fabrice Bellard[在 Javascript 中实现 x86 虚拟机](http://bellard.org/jslinux/)的启发，我想尝试编写能够运行 Linux 内核的最简单的虚拟机。这是一项纯粹的教育努力，除了理解和分享使之成为可能的代码之外没有其他目的。

浏览了[x86 规范](http://download.intel.com/design/intarch/manuals/24319101.pdf)后，我怀疑我可能会因为尝试编写能够模拟完整 x86 指令集的虚拟机而陷入困境。相反，我正在寻找一种可以尝试模仿的更简单的架构。

我已经阅读了[这个](https://stackoverflow.com/questions/6041004/emulating-an-x86-processor-how-should-i-start)询问如何模拟 x86 架构的问题，答案建议从更简单的东西开始，比如 ARM 架构。我的问题更具体：**我可以尝试模拟能够运行 Linux 内核的最简单的可能架构是什么？**

我有兴趣完全模拟整个机器，而不是简单地将指令传回主机（例如，如果我正在编写 x86 模拟器，这将是可能的）。我有相当多的 16 位汇编知识，以及一些操作系统理论背景，所以只要有足够的工作，这应该是触手可及的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T19:01:00.187

从易于实施的角度来看，最简单的架构是可能的。由于您正在构建一个完全模拟机器的模拟器，因此具有最简单的指令集设计/架构的模拟器将是合适的。RISC 架构无疑更好。但是选择使用不广泛的架构也不好，如果您需要支持，很少有人能够帮助您。编写模拟器绝非易事。我想说要么选择 ARM 要么选择 MIPS，两者都很受欢迎：

*   [ARM指令集](http://www.element14.com/community/servlet/JiveServlet/previewBody/41836-102-1-229511/ARM.Reference_Manual.pdf)
*   [MIPS指令集](http://www.weblearn.hs-bremen.de/risse/RST/docs/MIPS/mips-isa.pdf)

您还必须知道，Fabrice Bellard 的 javascript 虚拟机使用 32 位 x86 兼容 CPU，这是 Linux 原生支持的。您必须自己为 ARM 或 MIPS 移植 linux 内核（使用工具链）。查看有关如何使用 linux 内核的链接

对于 MIPS：

*   [http://www.linux-mips.org/wiki/Main_Page](http://www.linux-mips.org/wiki/Main_Page)
*   [将 Linux 内核 2.6 移植到新的 MIPS 板](https://stackoverflow.com/questions/3696346/porting-linux-kernel-2-6-to-new-mips-board)
*   [http://developer.mips.com/linux/](http://developer.mips.com/linux/)

对于 ARM：

*   [http://www.arm.com/community/software-enablement/linux.php](http://www.arm.com/community/software-enablement/linux.php)
*   [http://www.arm.linux.org.uk/docs/kerncomp.php](http://www.arm.linux.org.uk/docs/kerncomp.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T13:40:59.690

Linux内核支持的架构列表：

[http://en.wikipedia.org/wiki/List_of_Linux_supported_architectures](http://en.wikipedia.org/wiki/List_of_Linux_supported_architectures)

“最简单的可能”有点主观，但以下是我认为该列表中不太复杂的内容：

*   MIPS
*   H8 (μClinux)
*   68k/冷火 (μClinux)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T14:11:55.270

正如我在评论中所说，我会平衡三个方面：

*   简单的指令集（指令格式少，操作码少：任何不像 x86 的东西）
*   文档：广泛可用。这意味着可能会丢弃一些简单的架构，专注于广泛支持的架构（例如，x86 在这里获胜，但您也可以找到很多关于 RISC 的材料，尤其是来自学术界的 MIPS）。或者选择一些开放的东西，比如[OpenRisc](http://en.wikipedia.org/wiki/OpenRISC)
*   在“内核模式”中易于使用。在特权内核模式下，需要考虑一个全新的寄存器、指令和内部结构世界。并且不要忘记处理器也带有总线，简单的处理器可能有非常复杂的总线！你也需要效仿。或者，如果您对它感到满意，您可以选择[用户模式 ​​Linux 。](http://en.wikipedia.org/wiki/User-mode_Linux)

最后，我会建议一些“旧”的东西：相当简单，尤其是在特权模式下，经过充分研究和记录。例如，原始的 MIPS、摩托罗拉 68k 系列，或接近原始 RISC ( [http://en.wikipedia.org/wiki/Berkeley_RISC](http://en.wikipedia.org/wiki/Berkeley_RISC) ) 的东西，如果有 Linux 变体的话！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T18:53:19.460

您可能会查看 microBlaze，这是一种专为在 FPGA 上高效实现而设计的处理器。它只有两种指令格式和 32 个主要操作码值。

Xilinx 为其 FPGA 产品线定义和支持，参考文档位于： [http ://www.xilinx.com/support/documentation/sw_manuals/mb_ref_guide.pdf](http://www.xilinx.com/support/documentation/sw_manuals/mb_ref_guide.pdf)

# spring - 错误丰富：panelMenu 示例展示不呈现

> ID：15075683
> 
> 赞同：0
> 
> 时间：2013-02-25T20:16:29.907
> 
> 标签：spring, jsf, richfaces, jboss7.x

嗨，我无法在richfaces 4.3.0.Final 展示中复制该示例： [http](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=panelMenu&skin=blueSky) ://showcase.richfaces.org/richfaces/component-sample.jsf?demo=panelMenu&skin=blueSky 具体在rich:panelMenu 组件中，当我运行 panelMenu 没有响应的代码，并且 panelMenuItem 没有显示，我将代码更改如下：

```
<rich:panelMenu style="width:200px" itemMode="ajax" groupMode="ajax"> 
```

至

```
<rich:panelMenu style="width:200px" mode="ajax"> 
```

并且 panelMenuItems 显示和工作，但这部分不起作用：

```
<a4j:outputPanel ajaxRendered="true">
      <rich:panel rendered="#{not empty panelMenuBean.current}">
                <h:outputText value="#{panelMenuBean.current} selected" id="current" />
      </rich:panel>
 </a4j:outputPanel> 
```

为什么？坦克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:28:34.180

我刚刚使用来自展示柜的完全相同的代码进行了测试（我只是复制了整个`h:form`），它工作正常。

您只需创建一个`PanelMenuBean`使用`current`String 属性和`updateCurrent`侦听器方法调用的支持 bean（根据 panelMenu 的[VDL 文档，](http://docs.jboss.org/richfaces/latest_4_X/vdldoc/rich/panelMenu.html)`itemChangeListener`接收属性的 ItemChangeEvent ）：

```
@ManagedBean
public class PanelMenuBean {

    private String current;

    public void updateCurrent(ItemChangeEvent evt) {
        current = evt.getNewItemName();
    }

    // getter and setter ...
} 
```

# ios - NSData dataWithBytesNoCopy 返回错误的类型？

> ID：15075684
> 
> 赞同：1
> 
> 时间：2013-02-25T20:16:31.003
> 
> 标签：ios, objective-c, azure

我正在使用适用于 iOS 的 Windows Azure SDK 将二进制文件上传到 Azure Blob 存储。在 Debug 中一切正常，当构建直接复制到手机时，但是当它在通过 TestFlight 发送的 AdHoc 构建上运行时，我得到了这个异常：

```
NSInvalidArgumentException: -[__NSCFConstantString dataWithBase64DecodedString]: unrecognized selector sent to instance 
```

现在Azure SDK在NSData上的一个category中定义了dataWithBase64DecodedString，异常出现在这段代码中：

```
void* buffer=malloc(CC_SHA256_DIGEST_LENGTH);
CCHmac(kCCHmacAlgSHA256, [cKey bytes], [cKey length], [contentData bytes], [contentData length], buffer);
NSData *encodedData = [NSData dataWithBytesNoCopy:buffer length:CC_SHA256_DIGEST_LENGTH freeWhenDone:NO]; 
contentMD5 = [encodedData stringWithBase64EncodedData]; /* exception is on this line */
free(buffer); 
```

如您所见，encodedData 应该是一个 NSData。有时确实如此。但是一旦编译并在手机上，远离我的调试器，就没有那么多了。Airbrake 与从手机中提取的崩溃日志相匹配。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:27:15.137

这可能是因为 Azure 框架未正确链接到您在为设备而不是模拟器构建时使用的构建配置。由于这是类别方法的问题，因此在 x86_64 或 ARM 上链接时，该问题可能是一个[已知错误。](https://developer.apple.com/library/mac/#qa/qa2006/qa1490.html)如果是这种情况，请尝试添加`-ObjC -all_load`到**其他链接器标志**设置。

# c++ - 我得到一个除以零错误，但不知道为什么

> ID：15075690
> 
> 赞同：1
> 
> 时间：2013-02-25T20:16:50.247
> 
> 标签：c++, exception

错误发生在这一行：

```
return(rand()% sides + 1); 
```

这是我的程序：

```
//  main.cpp
//  dcChecker
//
//  Created by Max Huber on 2/21/13.
//  Copyright (c) 2013 S0URC3 Studioss. All rights reserved.
//

#include <iostream>
#include <ctime>
#include <cstdlib>

int rollDice(int);
int diceCheck(int diceMod, int dci, int roll);
void clearScreen();
void pressEnter();
void dcFunction();

int main()
{
    dcFunction();
    clearScreen();
    main();
}

// Roll a n sided die
int rollDice(int sides)
{
    //int gen;

    //create time variable
    time_t timer;

    //set time variable to current time in seconds
    time(&timer);

    //seed random number generator using current time in seconds
    srand(timer);

    //generate random number
    //gen = (rand()% sides + 1);

    return(rand()% sides + 1);
}

// Check if the dice roll + modifier (if any) is greater than the check value
int diceCheck(int diceMod, int dci, int roll)
{
    if(roll + diceMod >= dci)
    {
        return 0;
    }
    else
        return 1;
}

void clearScreen()
{
    #ifdef WINDOWS
        std::system ( "CLS" );

    #else
        // Assume POSIX
        std::system ( "clear" );
    #endif
}
void pressEnter()
{
    std::cin.sync();
    std::cout << std::endl << "Press ENTER to continue..." << std::endl;
    std::cin.get();
}

void dcFunction()
{
    //define variables
    int neededRoll;
    int diceMod;
    int sides;
    int roll;

    //get user inputs
    std::cout << "How many sides: ";
    std::cin >> sides;
    std::cout << "Enter needed roll: ";
    std::cin >> neededRoll;
    std::cout << "Enter dice modifiers: ";
    std::cin >> diceMod;

    //store roll in variable so it can be gotten later
    roll = rollDice(sides);

    //check if your roll was better than the dice check

    //success check
    if(diceCheck(diceMod, neededRoll, roll) == 0)
    {
        std::cout << "\nSUCCESS\n\n"
        << "You rolled a " << sides << " sided die\n"
        << "You rolled: " << roll << " + " << diceMod << " = " << roll + diceMod << "\n"
        << "You needed: " << neededRoll << "\n";
    }

    //otherwise you fail
    else
    {

        std::cout << "\nFAILURE!!!\n\n"
        << "You rolled a " << sides << " sided die\n"
        << "You rolled: " << roll << " + " << diceMod << " = " << roll + diceMod << "\n"
        << "You needed: " << neededRoll << "\n";
    }
    pressEnter();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T20:20:44.673

很可能在`return(rand()% sides + 1);`

模也可以导致被零除，它的优先级高于加法。你实际上是在说`return (rand() % sides) + 1;`，如果`sides`是`0`，那么你就会得到例外。

# php - 404 Not Found：在此服务器上未找到请求的 URL /website/Array

> ID：15075692
> 
> 赞同：-1
> 
> 时间：2013-02-25T20:17:04.153
> 
> 标签：php, mysql

我正在尝试安装用 php 和 mysql 制作的 Web 应用程序。

我将 install.php 文件加载到浏览器中，它要求输入用户名和密码（用于网站管理员）。

提交后显示404错误：

在此服务器上找不到请求的 URL /website/Array。

并且错误日志显示：

文件不存在：D:/wamp/www/website/Array，引用者：`http://localhost/website/install.php`

那个数组文件是什么？

至于 install.php 脚本，它会在 mysql 中创建所需的表，并向其中插入用户名和密码。

install.php 脚本（使用西班牙语）

```
 <?php

/***********************************************************************

Install script

***********************************************************************/

include_once( "config.php" );

if ( isset($send) )
// We have already sent the admin data
{
require("common.php");
// We make avaiable the database
$db = new database()
or die("La base de datos está sobrecargada, por favor intentalo más tarde");

echo "Eliminando las anteriores bases de datos si existieran<br><br>";
$query = "DROP TABLE `League` , `Matches` , `Messages` , `Modules` , `Players` ,           `Teams` , `Users` ;";
 $db->doQuery ($query);

 echo "Creando las bases de datos...<br><br>";

 // Users Table
 $query = "CREATE TABLE Users (uname CHAR(16) NOT NULL, pass CHAR(50), team INT, admin     BIT,";
$query .= "email CHAR(30), language CHAR(5), skin CHAR(16), KEY(uname));";
 $db->doQuery ($query);

 $pass = md5($pass);
 $query = "INSERT INTO Users (uname, pass, admin, email, language, skin) VALUES ";
 $query .= "('$user', '$pass', '1', '', 'es', 'default');";
 $db->doQuery ($query);

 // Players table
 $query = "CREATE TABLE Players (id INT NOT NULL AUTO_INCREMENT, name CHAR(30), team INT, uname CHAR(16), defence INT(7),";
  $query .= " pass INT(7), shoot INT(7), keeping INT(7), endurance INT(7), physicalForm INT(7), weeksInjured INT UNSIGNED, matchesPlayed INT UNSIGNED, goals INT, KEY(id) );";
  $db->doQuery ($query);

 // Match table
  $query = "CREATE TABLE Matches (id INT NOT NULL AUTO_INCREMENT, home INT,";
  $query .= " away INT, played BIT, scoreHome INT, scoreAway INT, commentary LONGTEXT,";
  $query .= " week INT, KEY(id) );";
  $db->doQuery ($query);

  // Teams table
   $query = "CREATE TABLE Teams (id INT NOT NULL AUTO_INCREMENT, teamName CHAR(30),uname CHAR(16) NOT NULL,";
   $query .= " tactic CHAR(8),N1 INT, N2 INT, N3 INT, N4 INT, N5 INT, N6 INT, N7 INT, N8 INT, N9 INT,";
  $query .= " N10 INT, N11 INT, N12 INT, N13 INT, N14 INT, N15 INT,";
  $query .= " leaguePoints INT, KEY(id) );";
  $db->doQuery ($query);

  // League table
  $query = "CREATE TABLE League (id INT NOT NULL AUTO_INCREMENT, week INT, KEY(id));";
  $db->doQuery ($query);

  $query = "INSERT INTO League (id,week) VALUES ('1','0')";
  $db->doQuery ($query);

  // Modules table
  $query = "CREATE TABLE Modules (id CHAR(20) NOT NULL, name CHAR(30),";
  $query .= " type INT, KEY(id) );";
  $db->doQuery ($query);

  // Insert modules values
  $query = "INSERT INTO Modules (id, name, type) VALUES ('calendar',";
  $query .= " 'Calendario', 1)";
  $db->doQuery ($query);

 $query = "INSERT INTO Modules (id, name, type) VALUES ('change_profile',";
 $query .= " 'Editar perfil', 1)";
 $db->doQuery ($query);

 $query = "INSERT INTO Modules (id, name, type) VALUES ('roster',";
 $query .= " 'Alineacion', 2)";
 $db->doQuery ($query);

 $query = "INSERT INTO Modules (id, name, type) VALUES ('next_week',";
 $query .= " 'Avanzar jornada', 0)";
  $db->doQuery ($query);

  $query = "INSERT INTO Modules (id, name, type) VALUES ('add_user',";
 $query .= " 'Añadir usuario', 0)";
 $db->doQuery ($query);

  $query = "INSERT INTO Modules (id, name, type) VALUES ('reset_league',";
  $query .= " 'Resetear liga', 0)";
  $db->doQuery ($query);

  $query = "INSERT INTO Modules (id, name, type) VALUES ('standings',";
  $query .= " 'Clasificacion', 1)";
  $db->doQuery ($query);

 $query = "INSERT INTO Modules (id, name, type) VALUES ('private_messages',";
 $query .= " 'Mensajes Privados', 1)";
 $db->doQuery ($query);

 $query = "INSERT INTO Modules (id, name, type) VALUES ('manage_users',";
 $query .= " 'Administrar usuarios', 0)";
 $db->doQuery ($query);

 // Private Messages Table
 $query = "CREATE TABLE Messages (id INT NOT NULL AUTO_INCREMENT, messagefrom CHAR(30),";
  $query .= " messageto CHAR(30), subject CHAR(50), body LONGTEXT, internal BIT,  KEY(id) );";
  $db->doQuery ($query);

  echo "Creación completa. Borra el archivo install.php y ya puedes entrar con tu nuevo usuario.";
  echo "¡Disfruta del juego!";
 }
 else
 {
  ?>
 <h1>Instalador de SITE</h1><br><br>
  Introduzca un nombre de usuario y una contraseña para el administrador:<br>
  <form method="POST" action="<?php echo $_SERVER; ?>">
  Nombre de usuario: <input type="text" name="user"><br>
  Contraseña: <input type="password" name="pass"><br><br>
   <input type="submit" value="Enviar" name="send">
 </form>

  <?php

 }
 ?> 
```

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:52:34.070

你的问题是在线

```
<form method="POST" action="<?php echo $_SERVER; ?>"> 
```

$_SERVER 是一个数组，当您尝试打印它时，您得到的只是“数组”。
据我了解，您正在尝试将表单发布到同一页面，因此您可以删除 action 属性。如果没有，只需提供您想要的 URL 并避免使用 $_SERVER，除非您想以某种方式编辑 URL（例如添加 https 或类似的）

# facebook - Facebook 提供 API

> ID：15075695
> 
> 赞同：0
> 
> 时间：2013-02-25T20:17:17.017
> 
> 标签：facebook, facebook-graph-api

我想创建一个应用程序，该应用程序将从我的系统中获取报价并使用 facebook graph API 发布到我的 facebook 页面，但根据下面的 facebook 链接，它表示对应于报价，添加必须与它一起发布.

那么是否可以在 Facebook 上推送和发布优惠？

参考链接：[https ://developers.facebook.com/docs/reference/api/offer/](https://developers.facebook.com/docs/reference/api/offer/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T17:38:55.817

您链接的页面包含[另一个链接](https://developers.facebook.com/docs/graph-api/reference/page/offers/#publish)，该链接描述了通过 api 创建报价的过程。基本上，您只需`/PAGE_ID/offers`使用页面访问令牌以及您想要传递的任何参数发出一个发布请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T21:24:30.300

是的，尽管它现在已被重写为 /nativeoffers 端点。

[https://developers.facebook.com/ads/blog/post/2016/08/30/offer-ads-apis/](https://developers.facebook.com/ads/blog/post/2016/08/30/offer-ads-apis/)

# php - php。如果条件

> ID：15075696
> 
> 赞同：-3
> 
> 时间：2013-02-25T20:17:20.310
> 
> 标签：php, if-statement, while-loop

这看起来很简单，但我不知道为什么它不起作用。

我需要写一个 if 语句

```
 first, checks if it is numeric  

 second, if it is not between 1 and 10, issue errorA

 third, if it is not between 20 and 30, issue errorB

 fourth, it is not a number, issue errorC 
```

如果不是数字且满足所有范围，则添加到数据库中。

无论如何，我不确定 if 和 while 组合可以满足这一点....

到目前为止，我有，

如果数字并满足范围，则添加到数据库，否则发出错误C

如何过滤错误 A 和 B？

```
if ( isset [some code...]) {

    $a = ...;
    $b = ...);
    $c = ...;

    if (preg_match('/^\d+$/',$b) && preg_match('/^\d+$/',$c) &&
        ((1 <= $b && 10 >= $b)) && ((20 <= $c && 30 >= $c))) {

        $sql = "INSERT [some code...]

        mysql_query($sql);

        $_SESSION['success'] = $_POST['success'];
        header('Location: index.php') ;
        return;

    } else {

        $_SESSION['error'] = $_POST['error'];
        header('Location: index.php') ;
        return;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:49:03.037

```
if (preg_match('/^\d+$/',$b) && preg_match('/^\d+$/',$c)) {
    if (($b >= 1 && $b <= 10) && ($c >= 20 && $c <= 30)) {
        echo "OK";
    } else {
        echo "not in range";
    }
} else {
  echo "not a number";
} 
```

# vi - 如何使用VI检索文件中特定字符的字符位置？

> ID：15075698
> 
> 赞同：2
> 
> 时间：2013-02-25T20:17:29.717
> 
> 标签：vi, character-properties, charactercount

我需要检索文件中字符的字符位置。我怎样才能做到这一点，使用 Vi？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T20:31:37.473

搜索您想要的角色：

`/<char_you_want>`

然后按`Ctrl-g`。`45,28`你应该在左下角看到类似的东西。第二个数字是字符的位置。第一个数字是行号。

# php - 如果 IE 不显示对象 [Wordpress 中的标题]

> ID：15075709
> 
> 赞同：0
> 
> 时间：2013-02-25T20:17:57.387
> 
> 标签：php, html, wordpress, object, if-statement

希望将 IE 浏览器指向静态图像，而不是我在 medio.com 主页上创建的对象。

这是运行对象的 header_block php 文件：

```
<!--Start of Product Banner--> 
```

```
<object data=http://prep.medio.com/dash/graphless.html width="450" height="350"> <embed src=http://prep.medio.com/dash/graphless.html id=sgraph width="450" height="350"> </embed> Error: Embedded data could not be displayed. 
```

```
<?php
        if (@$data['banner_position'] == "right")
        {
            include("block_header_banner_text.php");
            include("block_header_banner_media.php");

        } else {
            include("block_header_banner_media.php");
            include("block_header_banner_text.php");
        }
    ?>
</div> 
```

我基本上想说：

如果 Chrome、Safari、Opera、Firefox：显示对象。否则：不显示对象。或者反之亦然，如果这更有意义的话。

IE 9 和 10 可以很好地显示对象。它真的是 IE 8 和更低版本。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:48:07.613

您是否尝试过仅用`<object>`MS 注释块注释掉？

```
<!--[if !IE]> <-->
    <object>...</object>
<!--> <![endif]-->

or

<!--[if gte IE 9]> <-->
    <object>...</object>
<!--> <![endif]--> 
```

# c# - How to remove a standard property from a PropertyGridView

> ID：15075712
> 
> 赞同：2
> 
> 时间：2013-02-25T20:18:01.527
> 
> 标签：c#, .net, winforms, propertygrid

I am creating a graphing interface and would like to give the user the option to edit the graphs look, i.e. Series color, BackColor, Data point size, etc... The chart is being created using

```
System.Windows.Forms.DataVisualization.Charting 
```

To allow the user to edit those options I've placed a PropertyGrid in the form. However there are some properties I do not want the user to have access to. I would like to be able to set up a chart in my form then create a propertygrid that is connected to that chart but have certain properties removed from the grid. What I have so far tried is ...

```
public partial class Form1: Form 
{
    PropertyGrid propG1 = new PropertyGrid();
    this.Controls.Add(propG1);

    //... There is code here where my chart(chart1) is being populated with data 
    private void toolStripButton1_Click(object sender, EventArgs e)// The button is just to test 
    MyChart myC = new MyChart(); 
    propG1.SelectedObject = myC; 
} 
```

So based on the recomendations I've received so far I've created a class called MyChart which contains the properties that I don't want to be displayed on my chart.

```
using System.ComponentModel
//...

public class MyChart : Chart 
{
    [Browsable(false)]
    public new System.Drawing.Color Property
    {
        get{return BackColor;}  // BackColor is just an example not necessarily a property I'd like to remove
        set{base.BackColor = value;}
    } 
```

I haven't been able to remove the properties from my grid nor have I been able to connect myC with my chart1 so when a property is changed in the grid chart1 is affected. Thanks for the continuing help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:21:36.240

Instead of modifying the PropertyGrid component and its behavior you can modify the objects that you display with attributes. Something like this:

```
[Browsable(false)]
public object SomeProperty
{
} 
```

Don't forget to add:

```
using System.ComponentModel; 
```

And to override inherited properties and hide them from the propertyGrid you could do something like:

```
public class Chart : BaseChart
{
    [Browsable(false)]
    public new string BaseString // notice the new keyword!
    {
        get { return base.BaseString; } // notice the base keyword!
        set { base.BaseString = value; }
    }

    // etc.
}

public class BaseChart
{
    public string BaseString { get; set; }
} 
```

Setting the Browsable attribute to false will keep SomeProperty from showing up in the PropertyGrid.

So, in a hypothetical chart class like the one below, you will see the chart instance, the SomeProperty1 property but not SomeProperty2.

```
public class Chart
{
    public object Property1 { get; set; }

    [Browsable(false)]
    public object Property2 { get; set; }

    // etc.
} 
```

See [Getting the most out of your property grid](http://msdn.microsoft.com/en-us/library/aa302326.aspx) for more information. And here is a very, very good deep-dive into [customizing the PropertyGrid control](http://www.codeproject.com/Articles/13630/Add-Custom-Properties-to-a-PropertyGrid) that will blow your mind. ;-)

And, even more fun with attributes and the PropertyGrid:

```
[DefaultPropertyAttribute("Property1")]
public class Chart
{
    [CategoryAttribute("My Properties"),
     DescriptionAttribute("My demo property int"),
     DefaultValueAttribute(10)]
    public int Property1 { get; set; }

    [Browsable(false)]
    public object Property2 { get; set; }

    [CategoryAttribute("My Properties"),
     DescriptionAttribute("My demo property string"),
     DefaultValueAttribute("Hello World!")]
    public string Property3 { get; set; }

    // etc.
} 
```

# python - 如何从一个可迭代的元组中填充两个（或更多）numpy 数组？

> ID：15075715
> 
> 赞同：9
> 
> 时间：2013-02-25T20:18:16.270
> 
> 标签：python, arrays, numpy, iteration

我遇到的实际问题是我想`(float, str)`在 RAM 中存储一个长排序的元组列表。一个普通的列表不适合我的 4Gb RAM，所以我想我可以使用两个`numpy.ndarray`s.

数据源是 2 元组的可迭代对象。`numpy`有一个`fromiter`功能，但我该如何使用它？迭代中的项目数是未知的。由于内存限制，我不能先将它消耗到列表中。我想过`itertools.tee`，但是这里似乎增加了很多内存开销。

我想我可以做的是分块使用迭代器并将它们添加到数组中。那么我的问题是，如何有效地做到这一点？我是否应该制作 2 个二维数组并向它们添加行？（然后我需要将它们转换为一维）。

或者也许有更好的方法？我真正需要的只是在对数时间内通过相应数字的值搜索字符串数组（这就是我想按浮点值排序的原因）并使其尽可能紧凑。

PS iterable 没有排序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T21:28:58.887

也许使用以下方法构建一个单一的结构化数组`np.fromiter`：

```
import numpy as np

def gendata():
    # You, of course, have a different gendata...
    for i in xrange(N):
        yield (np.random.random(), str(i))

N = 100

arr = np.fromiter(gendata(), dtype='<f8,|S20') 
```

按第一列排序，将第二列用于决胜局将花费 O(N log N) 时间：

```
arr.sort(order=['f0','f1']) 
```

通过第一列中的值查找行可以`searchsorted`在 O(log N) 时间内完成：

```
# Some pseudo-random value in arr['f0']
val = arr['f0'][10]
print(arr[10])
# (0.049875262239617246, '46')

idx = arr['f0'].searchsorted(val)
print(arr[idx])
# (0.049875262239617246, '46') 
```

* * *

您在评论中提出了许多重要问题；让我尝试在这里回答他们：

*   numpybook 中解释了基本的[dtype](http://web.archive.org/web/20130405085237/http://www.tramy.us/)。可能有一个或两个额外的 dtypes（就像`float16`那本书写完之后添加的一样，但是基础知识都在那里解释了。）

    [在线文档](http://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html)中可能会进行更深入的讨论。[这是对您在此处](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dtype.html)提到的示例的一个很好的补充。

*   Dtypes 可用于定义具有列名或默认列名的结构化数组。`'f0'`,`'f1'`等是默认列名。由于我在`'<f8,|S20'`未能提供列名时定义了 dtype，因此 NumPy 将第一列命名为 ，第二列命名`'f0'`为 `'f1'`。如果我们使用

    ```
    dtype='[('fval','<f8'), ('text','|S20')] 
    ```

    那么结构化数组`arr`将具有列名`'fval'`和 `'text'`.

*   不幸的是，dtype 必须在`np.fromiter`调用时固定。您可以想象`gendata`一次迭代以发现字符串的最大长度，构建您的 dtype，然后调用 `np.fromiter`（并再次迭代`gendata`），但这相当繁琐。如果您事先知道字符串的最大大小当然更好。（`|S20`将字符串字段定义为具有 20 个字节的固定长度。）
*   NumPy 数组将预定义大小的数据放置在固定大小的数组中。将数组（甚至是多维数组）视为一维内存的连续块。（这是一种过度简化——存在不连续的数组——但将有助于您对以下内容的想象。）NumPy 通过利用固定大小（由 设置`dtype`）来快速计算访问所需的偏移量来获得其大部分速度数组中的元素。如果字符串的大小可变，那么 NumPy 就很难找到正确的偏移量。硬，我的意思是 NumPy 需要一个索引或以某种方式重新设计。NumPy 根本不是以这种方式构建的。
*   NumPy 确实有一个`object`dtype，它允许您将 4 字节指针放置到您想要的任何 Python 对象。这样，您就可以拥有带有任意 Python 数据的 NumPy 数组。不幸的是，该`np.fromiter` 函数不允许您创建 dtype 数组`object`。我不知道为什么会有这个限制......
*   请注意，指定`np.fromiter`时具有更好的性能`count`。通过知道`count`（行数）和 `dtype`（以及每行的大小）NumPy 可以为结果数组预先分配足够的内存。如果不指定`count`，那么 NumPy 会猜测数组的初始大小，如果太小，它会尝试调整数组的大小。如果可以扩展原始内存块，那么您很幸运。但是如果 NumPy 必须分配一个全新的内存块，那么所有旧数据都必须复制到新位置，这将显着降低性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T14:22:59.463

这是一种从-tuples`N`生成器中构建单独数组的方法：`N`

```
import numpy as np
import itertools as IT

def gendata():
    # You, of course, have a different gendata...
    N = 100
    for i in xrange(N):
        yield (np.random.random(), str(i))

def fromiter(iterable, dtype, chunksize=7):
    chunk = np.fromiter(IT.islice(iterable, chunksize), dtype=dtype)
    result = [chunk[name].copy() for name in chunk.dtype.names]
    size = len(chunk)
    while True:
        chunk = np.fromiter(IT.islice(iterable, chunksize), dtype=dtype)
        N = len(chunk)
        if N == 0:
            break
        newsize = size + N
        for arr, name in zip(result, chunk.dtype.names):
            col = chunk[name]
            arr.resize(newsize, refcheck=0)
            arr[size:] = col
        size = newsize
    return result

x, y = fromiter(gendata(), '<f8,|S20')

order = np.argsort(x)
x = x[order]
y = y[order]

# Some pseudo-random value in x
N = 10
val = x[N]
print(x[N], y[N])
# (0.049875262239617246, '46')

idx = x.searchsorted(val)
print(x[idx], y[idx])
# (0.049875262239617246, '46') 
```

上面的`fromiter`函数以块（大小`chunksize`）读取迭代。它根据需要调用 NumPy 数组方法`resize`来扩展结果数组。

我使用了一个小的默认值`chunksize`，因为我是在小数据上测试这段代码。当然，您会想要更改默认块大小或传递`chunksize`具有更大值的参数。

# sql - 加入重叠的日期范围

> ID：15075717
> 
> 赞同：13
> 
> 时间：2013-02-25T20:18:30.843
> 
> 标签：sql, sas

我需要连接表 A 和表 B 来创建表 C。

表 A 和表 B 存储 ID 的状态标志。状态标志（A_Flag 和 B_Flag）可以随时更改，因此一个 ID 可以包含多行，代表 ID 状态的历史记录。特定 ID 的标志可以彼此独立更改，这可能导致表 A 中的一行属于表 B 中的多行，反之亦然。

结果表（表 C）需要是涵盖 ID 生命周期（01/01/2008-18/08/2008）内每个日期的唯一日期范围列表，以及每个日期范围的 A_Flag 和 B_Flag 值。

实际的表包含数百个 ID，每个 ID 在每个表中具有不同数量的行。

我可以使用 SQL 和 SAS 工具来实现最终结果。

```
Source - Table A
ID  Start           End     A_Flag
1   01/01/2008  23/03/2008  1
1   23/03/2008  15/06/2008  0
1   15/06/2008  18/08/2008  1

Source - Table B
ID  Start           End     B_Flag
1   19/01/2008  17/02/2008  1
1   17/02/2008  15/06/2008  0
1   15/06/2008  18/08/2008  1

Result - Table C
ID  Start           End  A_Flag B_Flag
1   01/01/2008  19/01/2008  1   0
1   19/01/2008  17/02/2008  1   1
1   17/02/2008  23/03/2008  1   0
1   23/03/2008  15/06/2008  0   0
1   15/06/2008  18/08/2008  1   1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T21:15:42.187

您提出的问题可以在一条 SQL 语句中解决，无需非标准扩展。

要认识到的最重要的事情是，开始-结束对中的每个日期都代表标志对为真的时间跨度的潜在开始或结束点。实际上，一个日期是“开始”，另一个日期是“结束”，这并不重要。任何日期都是一个时间分隔符，它*同时*完成：它结束前一个时期并开始另一个时期。构造一组最小时间间隔，并将它们连接到表中以查找在每个间隔期间获得的标志。

我将您的示例（和解决方案）添加到我的[Canonical SQL](http://www.schemamania.org/sql/#overlapping.dates)页面。有关详细讨论，请参见那里。公平地说，这是查询本身

```
with D (ID, bound) as (
    select   ID 
       , case T when 's' then StartDate else EndDate end as bound
    from  (
    select ID, StartDate, EndDate from so.A 
    UNION
    select ID, StartDate, EndDate from so.B
    ) as U
    cross join (select 's' as T union select 'e') as T
)
select P.*, a.Flag as A_Flag, b.Flag as B_Flag
from (
    select s.ID, s.bound as StartDate, min(e.bound) as EndDate
    from D as s join D as e 
    on s.ID = e.ID 
    and s.bound < e.bound
    group by s.ID, s.bound
) as P
left join so.A as a
on  P.ID = a.ID 
and a.StartDate <= P.StartDate and P.EndDate <= a.EndDate
left join so.B as b
on  P.ID = b.ID 
and b.StartDate <= P.StartDate and P.EndDate <= b.EndDate
order by P.ID, P.StartDate, P.EndDate 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T20:36:46.790

我将在 SQL 中解决这个问题，假设您有一个名为`lag`(SQL Server 2012, Oracle, Postgres, DB2) 的函数。您可以使用相关子查询获得相同的效果。

这个想法是获得所有不同的时间段。然后加入原始表以获取标志。

我在上传代码时遇到问题，但可以获取大部分代码。但是，它从开始结束开始，您可以通过对一列中的四个日期执行`union`（不是`union all`）来创建：选择 a.start 作为日期。然后将其与 a.end、b.start 和 b.end 联合。

```
with driver as (
    select thedate as start, lag(thedate) over (order by thedate) as end
    from startends
   ) 

select startdate, enddate, a.flag, b.flag
from  driver left outer join
     a
     on a.start >= driver.start and a.end <= driver.end left outer join
     b
     on b.start >= driver.start and b.end <= driver.end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T03:17:06.533

这种带有移位和偏移的顺序处理是 SAS DATA 步大放异彩的情况之一。并不是说这个答案很简单，而是它比使用 SQL*更简单*，可以做到，但在设计时并未考虑到这种顺序处理。

此外，基于 DATA 步的解决方案往往非常有效。这个在理论上运行时间 O(n log n)，但在实践中更接近 O(n)，并且在恒定空间中。

前两个 DATA 步骤只是加载数据，对 Joe 的回答稍作修改，使其具有多个 ID（否则语法更容易）并添加一些极端情况，即无法确定初始状态的 ID。

```
data tableA;
informat start end DDMMYY10.;
format start end DATE9.;
input ID  Start           End     A_Flag;
datalines;
1   01/01/2008  23/03/2008  1
2   23/03/2008  15/06/2008  0
2   15/06/2008  18/08/2008  1
;;;;
run;

data tableB;
informat start end DDMMYY10.;
format start end DATE9.;
input ID  Start           End     B_Flag;
datalines;
1   19/01/2008  17/02/2008  1
2   17/02/2008  15/06/2008  0
4   15/06/2008  18/08/2008  1
;;;;
run; 
```

下一个数据步骤为每个 id 和 flag 找到第一个修改，并将初始值设置为它找到的相反值。

```
/* Get initial state by inverting first change */
data firstA;
    set tableA;
    by id;
    if first.id;
    A_Flag = ~A_Flag;
run;

data firstB;
    set tableB;
    by id;
    if first.id;
    B_Flag = ~B_Flag;
run;
data first;
    merge firstA firstB;
    by id;
run; 
```

下一个数据步骤将人工“第一个”表与其他两个表合并，保留最后一个已知状态并丢弃人工初始行。

```
data tableAB (drop=lastA lastB);
   set first tableA tableB;
   by id start;
   retain lastA lastB lastStart;
   if A_flag = . and ~first.id then A_flag = lastA;
   else lastA = A_flag;
   if B_flag = . and ~first.id then B_flag = lastB;
   else lastB = B_flag;
   if ~first.id;  /* drop artificial first row per id */
run; 
```

上面的步骤几乎可以做所有事情。唯一的错误是结束日期是错误的，因为它们是从原始行复制的。要解决此问题，请将下一个开始复制到每一行的末尾，除非它是最后一行。最简单的方法是对每个id进行反向排序，回溯一条记录，最后再升序排序。

```
/* sort descending to ... */
proc sort data=tableAB;
   by id descending start;
run;
/* ... copy next start to this row's "end" field if not final */
data tableAB(drop=nextStart);
   set tableAB;
   by id descending start;
   nextStart=lag(start);
   if ~first.id then end=nextStart;
run;

proc sort data=tableAB;
   by id start;
run; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T16:12:36.263

One possible SAS solution to this is to perform a partial join, and then create the necessary additional rows in the data step. This should work assuming tableA has all possible records; if that's not the case (if tableB can start before tableA), some additional logic may be needed to consider that possibility (if first.id and start gt b_start). There may also be additional logic needed for issues not present in the example data - I don't have a lot of time this morning and didn't debug this for anything beyond the example data cases, but the concept should be evident.

```
data tableA;
informat start end DDMMYY10.;
format start end DATE9.;
input ID  Start           End     A_Flag;
datalines;
1   01/01/2008  23/03/2008  1
1   23/03/2008  15/06/2008  0
1   15/06/2008  18/08/2008  1
;;;;
run;

data tableB;
informat start end DDMMYY10.;
format start end DATE9.;
input ID  Start           End     B_Flag;
datalines;
1   19/01/2008  17/02/2008  1
1   17/02/2008  15/06/2008  0
1   15/06/2008  18/08/2008  1
;;;;
run;

proc sql;
create table c_temp as 
    select * from tableA A 
        left join (select id, start as b_start, end as b_end, b_flag from tableB) B
    on A.Id = B.id
    where (A.start le B.b_start and A.end gt B.b_start) or (A.start lt B.b_end and A.end ge B.b_end)
    order by A.ID, A.start, B.b_start;
quit;

data tableC;
set c_temp;
by id start;
retain b_flag_ret;
format start_fin end_fin DATE9.;
if first.id then b_flag_ret=0;
do until (start=end);
    if (start lt b_start) and first.start then do;
        start_fin=start;
        end_fin=b_start;
        a_flag_fin=a_flag;
        b_flag_fin=b_flag_ret;
        output;
        start=b_start;
    end;    
    else do; *start=b_start;
            start_fin=ifn(start ge b_start, start, b_start);
            end_fin = ifn(b_end le end, b_end, end);
            a_flag_fin=a_flag;
            b_flag_fin=b_flag;
            output;
            start=end; *leave the loop as there will be a later row that matches;
    end;
end;
run; 
```

# java - Android DatagramChannel.register() 块执行

> ID：15075720
> 
> 赞同：2
> 
> 时间：2013-02-25T20:18:33.437
> 
> 标签：java, android, sockets, nio, nonblocking

我在 Java 上有通用网络非阻塞套接字库，在默认 JVM 上一切正常，但在 Android 平台上的下一个代码块：

```
DatagramChannel channel;
. . .
channel.bind(...)
channel.configureBlocking(false);
. . .
channel.register(udpSelector,  SelectionKey.OP_READ | SelectionKey.OP_WRITE); 
```

register() 上的块，执行可以被阻止 20-40 秒或永远，仅与 OP_READ 或仅与 OP_WRITE 相同。

任何提示如何解决？

编辑：Android 2.3 和 Android 4.0.4 上的相同问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:46:31.893

这是一个重复的问题。请参阅 [导致通道寄存器阻塞的 Java 非阻塞 IO 选择器，](https://stackoverflow.com/questions/3189153/java-non-blocking-io-selector-causing-channel-register-to-block)其中指出“选择器具有多个记录在案的内部同步级别，并且您都遇到了它们。在调用 register() 之前在选择器上调用 wakeup()。确保如果选择的键为零，则选择循环正常工作，这将在 wakeup() 上发生。”

# list - 根据喜欢的数量订购项目列表

> ID：15075725
> 
> 赞同：0
> 
> 时间：2013-02-25T20:18:48.820
> 
> 标签：list, button

我有一个项目列表，每个项目都有一个喜欢按钮和喜欢的数量。我需要根据喜欢的数量来订购。任何想法如何做到这一点？

```
<div>
  <h1>Ranking</h1>
  <!-- The list -->
  <ul>
    <li>
      <h4>Item 1</h4>
      <p>200 likes</p>
      <p><a href="">&#9829; like?</a></p>
    </li>
    <li>
      <h4>Item 2</h4>
      <p>100 likes</p>
      <p><a href="">&#9829; like?</a></p>
    </li>
    <li>
      <h4>Item 3</h4>
      <p>50 likes</p>
      <p><a href="">&#9829; like?</a></p>
    </li>
    <li>
      <h4>Item 4</h4>
      <p>25 likes</p>
      <p><a href="">&#9829; like?</a></p>
    </li>
    <li>
      <h4>Item 5</h4>
      <p>1 likes</p>
      <p><a href="">&#9829; like?</a></p>
    </li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:40:30.727

你可以试试这段代码：

```
function sortAlpha(a,b){  
    // here we take the number of likes
    var aLikes = parseFloat($(a).children("p").first().html());
    var bLikes = parseFloat($(b).children("p").first().html());
    return aLikes > bLikes? 1 : -1;  
};  

$('div ul li').sort(sortAlpha).appendTo('ul'); 
```

# php - 无法获得ajax的成功信息

> ID：15075727
> 
> 赞同：0
> 
> 时间：2013-02-25T20:18:56.737
> 
> 标签：php, javascript, ajax

我不知道为什么我无法在 JSON 中收到成功消息。数据已很好地插入数据库，因此可以正常工作，但没有回调消息（成功）。我不知道为什么。

这个文件是在数据库中插入数据的地方。

```
include ("connect_to_mysql.php");
if ( isset($_POST['register'])) {
    $First_Name = mysql_real_escape_string($_POST['firstname']);
    $Last_Name = mysql_real_escape_string($_POST['lastname']);
    $Email = mysql_real_escape_string($_POST['email']);
    $Password = mysql_real_escape_string($_POST['password']);
    $Gender = mysql_real_escape_string($_POST['gender']);

    $sql3 =mysql_query("SELECT email FROM members WHERE email = '$Email' ");
    $result3= mysql_num_rows($sql3) ;
    $found ='';
    if ($result3 == 1 ) { 
        $found = "email already exist ! ";
    } else {
        mysql_query("INSERT INTO members (firstname, lastname,gender, email, password,bio_body, sign_up_date , account_type)
        VALUES( '".$First_Name."', '".$Last_Name."','".$Gender."','".$Email."','".$Password."','NULL' ,NOW() , 'a' )  ");
        $found = "registered succefully !";
    }
    echo json_encode(array('returned_val' => "$found"));
    //-- i have tried this also echo json_encode(array('returned_val' => $found));
} 
```

这是我的ajax

```
$(document).ready(function(){

    $('#register').click(function() {
        $('#mydata').html('Saving your data...<img src="images/loading.gif" />');
        $.ajax({
            url: "sendata.php",
            dataType: 'json' ,
            data: {
                firstname: firstname.value,
                lastname: lastname.value,
                email: email.value,
                password: password.value,
                gender: gender.value
            },
            type: 'POST',
            success: function(data){
                $('#mydata').html("<span style='font-size:18px; color: green;'> Your data is saved succefully! </span>").delay(3000).fadeOut('fast');
                alert(data.returned_val);
                alert (1);
            }
        });
    });
}); 
```

OBS：关于mysql或一些安全的东西（密码）我知道，当我解决这个问题时我会修复它们。

谢谢你的时间。

编辑：我没有错误信息

编辑。html表单

```
<form action="" method="post" enctype="multipart/form-data">
    <table width="100%" class="noborder" >
        <tr>
            <td width="23%" height="47" class="right">First Name:</td>
            <td width="77%" class="left left_nowrap">
                <input type="text" class="left left_nowrap tb10  border1" name ="firstname" id="First_Name" value="<?php echo $_SESSION['firstname'];  ?>" />
            </td>
        </tr>
        <tr>
            <td height="47" class="right">Last Name:</td>
            <td valign="middle" class="left left_nowrap">
                <input type="text" class="left  left_nowrap tb10 border1" name ="lastname" id="Last_Name"  value="<?php echo  $_SESSION['lastname'];  ?>" /><br/>
            </td>
        </tr>
        <tr>
            ........
            <td valign="middle" class="left"><input id="register" name="register" type="button" class="submit1 tb10 border4" value="Sign - Up" /></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:16:14.090

如果 jQuery 认为发送数据时出现问题，您可以使用将触发的`error`回调（[文档](http://api.jquery.com/jQuery.ajax/)），例如：

```
$.ajax({
  url: "sendata.php",
  dataType: 'json' ,
  data: {
    firstname : firstname.value,
    lastname : lastname.value,
    email : email.value,
    password : password.value,
    gender : gender.value
  },
  type : 'POST',
  success: function(data){
    $('#mydata').html("<span style='font-size:18px; color: green;'> Your data is saved succefully! </span>").delay(3000).fadeOut('fast');
    alert(data.returned_val);
    alert (1);
  },
  error: function(data){
    console.log(data);
  }
}); 
```

通过查看控制台中打印的数据，您应该能够知道为什么 jQuery 不调用您的成功回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:20:53.713

您应该检查 PHP 错误日志。那里一定有什么东西。您的 javascript 没有得到任何答案，可能是由于 PHP 方面的一些错误。如果 PHP 错误日志中没有任何内容，那么在 ajax 请求中实现错误处理程序，那里一定有东西。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T20:49:49.323

用于`console.log(data)`快速验证 ajax 响应。

# c# - 保持高度/宽度比的 WPF MinWidth 或 MinHeight 的任何技巧？

> ID：15075729
> 
> 赞同：0
> 
> 时间：2013-02-25T20:19:13.560
> 
> 标签：c#, wpf, data-binding

我有下面的代码有效。它正确地将最小绘图宽度保持在 20 像素宽。但是，我需要设置一个 MinHeight 值。我希望我的 MinHeight 值保持当前的高度/宽度比率。我怎么做？

```
<Grid MinWidth="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type c:IWorldAndScreen}}, Path=MetersPerPixel, Converter={StaticResource multiplier}, ConverterParameter=20}">
    <Grid.Width>
        <MultiBinding Converter="{StaticResource summation}">
            <Binding Path="Front" />
            <Binding Path="Back" />
        </MultiBinding>
    </Grid.Width>
    <Grid.Height>
        <MultiBinding Converter="{StaticResource summation}">
            <Binding Path="Left" />
            <Binding Path="Right" />
        </MultiBinding>
    </Grid.Height>
...
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:20:12.160

这是我想出的：

```
<Grid.MinHeight>
    <!-- height/width * actualWidth -->
    <MultiBinding Converter="{StaticResource divMulAdd}">
        <Binding RelativeSource="{RelativeSource Self}" Path="Height"/>
        <Binding RelativeSource="{RelativeSource Self}" Path="Width"/>
        <Binding RelativeSource="{RelativeSource Self}" Path="ActualWidth"/>
    </MultiBinding>
</Grid.MinHeight> 
```

结合这个转换器：

```
public class DivMulAddMultiConverter : IMultiValueConverter
    {
        #region Implementation of IMultiValueConverter

        public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
        {
            if (targetType != typeof(double)) throw new ArgumentException("Expected a target type of Double", "targetType");
            if (values == null || values.Length <= 0) return 0.0;

            var cur = System.Convert.ToDouble(values[0]);
            if(values.Length > 1)
                cur /= System.Convert.ToDouble(values[1]);
            if(values.Length > 2)
                cur *= System.Convert.ToDouble(values[2]);
            for(int i = 3; i < values.Length; i++)
                cur += System.Convert.ToDouble(values[i]);

            return cur;
        }

        public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }

        #endregion
    } 
```

# regex - 将 YYYY-mm-dd 添加到 CSV 文件中的 hh:mm:ss 时间戳

> ID：15075730
> 
> 赞同：1
> 
> 时间：2013-02-25T20:19:15.400
> 
> 标签：regex, sed, timestamp

让我们考虑以下 CSV 文件格式：

```
server_name status_code timestamp probe_name 
```

其中 status_code 可以是 I 或 E，并且所有字段都由表格分隔

例如，我们可以考虑以下 CSV 行：

```
albatros.benches.com I 14:55:23.145 througput_probe 
```

每个 CSV 文件都包含一整天的日志。我试图让所有 hh:mm:ss 时间戳都以实际的 YYYY-mm-dd 为前缀，以便生成的行如下所示：

```
albatros.benches.com I 2013-02-25 14:55:23.145 througput_probe 
```

作为奖励，由于 CSV 文件包含日期（文件名是 log_2013_02_25.txt）并且因为我有许多这些文件（当然是在不同的日子）要“sed”，我希望我可以自动使用文件名作为在其中获取合适日期并将其应用于时间戳转换的种子。

**编辑**：文件名是 log_YYYY_MM_DD.txt，而不是前面描述的 log_YYYY-MM-DD.txt）

我的 sed 和正则表达式知识相当有限。到目前为止，我正在使用类似的东西：

```
s/I^T/I^T 2013-02-25 /g
s/E^T/E^T 2013-02-25 /g 
```

（^T 实际上是一个 ^V 后跟一个制表键）

在我所有的文件上，但这对我来说真的很尴尬。如果有一天我们添加另一个状态码（例如 X），这个技巧将不起作用。我想 sed 处理第三个字段并为其添加前缀会更容易出错。我不知道如何正确地做到这一点。

欢迎任何想法！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:33:59.743

假设你所有的 csv 文件都被命名为`log_YYYY_MM_DD.txt`你可以尝试在你的 csv 文件所在的目录中运行这个 bash 脚本：

```
#!/bin/bash
for file in log_*.txt; do
    [[ $file =~ [0-9]{4}_[0-9]{2}_[0-9]{2} ]] \
        && date="${BASH_REMATCH}" \
        && sed -E -i.bak "s/\t(E|I)\t/\t\1\t${date//_/-} /" $file
done 
```

所有应该处理的状态码都可以放在括号中。例如，还要处理状态代码`X`，只需更改`(E|I)`为`(E|I|X)`.

如果您注意到一切都按预期工作，您可以删除`.bak`以禁用创建备份文件。

# jquery - 使用画布裁剪并显示结果

> ID：15075739
> 
> 赞同：0
> 
> 时间：2013-02-25T20:19:50.930
> 
> 标签：jquery, css, canvas, jcrop

我正在尝试使用`jCrop`and `canvas`。

我没有将图像发送到服务器并使用裁剪图像再次返回，而是尝试使用画布直接裁剪它，因为结果，我将裁剪转换为`base64`图像并发送到服务器。

我`drawImage`从画布上得到的结果。

但问题是：

我将图像设置为 400x400，但原始图像要大得多，而且我认为画布是直接从原始图像获取尺寸，而不是我确定的尺寸，所以结果与裁剪完全不同。

我举了一个确切问题的例子。

[**演示**](http://jsfiddle.net/VmQH8/2/)

只需裁剪图像，然后单击 CROP。

我错过了什么？

**编辑：我更改为 320x320 图像，看起来裁剪效果很好，但其他图像不是方形的，没有任何效果。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T21:19:27.177

您可以通过将图像的原始尺寸除以其在页面上的当前大小来找到原始图像上的坐标，然后将裁剪矩形的坐标乘以该比率。

```
var img = document.getElementById("canvasToThumb"),
    $img = $(img),
    imgW = img.width,
    imgH = img.height;

var ratioY = imgH / $img.height(),
    ratioX = imgW / $img.width();

var getX = $('#x').val() * ratioX,
    getY = $('#y').val() * ratioY,
    getWidth = $('#w').val() * ratioX,
    getHeight = $('#h').val() * ratioY; 
```

jsFiddle - [http://jsfiddle.net/s39P3/](http://jsfiddle.net/s39P3/)

# php - 有什么方法可以将变量作为参数发送给 CodeIgniter 中控制器的构造函数？

> ID：15075744
> 
> 赞同：0
> 
> 时间：2013-02-25T20:20:10.157
> 
> 标签：php, codeigniter, constructor, controller

我是 CodeIgniter 的新手。我只是在想，有什么方法可以将任何变量发送到控制器的构造函数，就像我在 Java 中创建对象时可以做的一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:46:14.163

您可以通过 URL 将变量发送到控制器函数。

例如，如果您的 URL 是 www.domain.com/index.php/reports/userdata/35，那么文件 controllers/reports.php 中的控制器函数将如下所示：

```
function userdata($userId) {
    .....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:51:43.547

我不知道您为什么要这样做以及您打算从哪里获取要发送的变量，但这在这种情况下确实有效：

```
function __construct($f=null) {
    parent::__construct();

    if($f){
       return $f; //Here use the variable for whatsoever you want.
    }
}

function testvariable($id) { //Using $id, you could still get the value from url

    $myVariable = 3; //Or you could just hard code the value

    if($id){
    $myVariable = $id;
}

    echo $this->__construct($myVariable);
    exit;
} 
```

当你跑`http://localhost/controller/testvariable/54`

你会得到结果 54

当你跑`http://localhost/controller/testvariable`

你会得到结果 3

在这些之外，另一个选择是在构造中定义变量。

# c# - 用于绘制最佳实践的 SQL 长流程统计生成

> ID：15075745
> 
> 赞同：1
> 
> 时间：2013-02-25T20:20:12.700
> 
> 标签：c#, sql-server, sql-server-2008

我有一些 SQL Server Store Procs，它们为 C# Web 应用程序中的图表生成统计数据。

现在，Web 应用程序中的用户必须等待大约 5 分钟才能看到这些带有更新数据的图表，这对用户和我来说都是一种痛苦。

某些 Store procs 需要超过 5 分钟才能生成数据，但网络用户不需要即时查看信息。也许每 2-3 小时更新一次图表。

所以，我不知道解决这个问题的最佳做法是什么。

我正在考虑创建一个 Windows 服务，每 2-3 小时将调用一次 SP，然后将数据存储在不同的表中。

关于如何处理这个问题的任何线索？

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:38:21.080

这里有一些索引视图的链接。正如评论所说，视图允许您快速获取信息，而不是每次使用存储过程时都进行选择。阅读第二个链接以获得关于视图的非常好的解释。

MSDN [http://msdn.microsoft.com/en-ca/library/ms187864%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-ca/library/ms187864%28v=sql.105%29.aspx)

这里解释得很好 [http://www.codeproject.com/Articles/199058/SQL-Server-Indexed-Views-Speed-Up-Your-Select-Quer](http://www.codeproject.com/Articles/199058/SQL-Server-Indexed-Views-Speed-Up-Your-Select-Quer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:38:54.000

正如我在评论中所说，索引视图（有点像物化视图）可以提高某些常见查询的性能，而无需制作临时表之类的东西。

索引视图的好处是**性能**，并且不需要太多额外的编码和工作。当您创建索引视图而不是临时表时，查询导航器将（应该）知道何时利用此视图，*而*最终用户无需指定临时表或聚合表。

可以在此处找到索引视图的好处以及如何实现它们的示例[http://msdn.microsoft.com/en-us/library/dd171921(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/dd171921(v=sql.100).aspx)

# sql - 报告文本框中链接的字体大小问题

> ID：15075746
> 
> 赞同：0
> 
> 时间：2013-02-25T20:20:14.767
> 
> 标签：sql, sql-server, tsql, reporting-services, ssrs-2008

由于某种原因，我对报告的订阅通过订阅服务通过电子邮件发送，字体大小仅在具有基础链接的文本上增加，例如：

![在此处输入图像描述](../Images/72b712e02832c204a04848f38afa046a.png)

但是，当我正常运行报告时（只需使用浏览器导航到它），一切都很好：

![在此处输入图像描述](../Images/fa43a2b87b961979c9b9b8f35419a3f0.png)

我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:09:27.420

我也是。没有修复

我只是通过 pdf、excel 或 html 而不是 mhtml 获得我的。

但是 html 有它自己的问题，不推荐。

# c++ - sockaddr_storage 大小为 128 字节

> ID：15075748
> 
> 赞同：6
> 
> 时间：2013-02-25T20:20:24.680
> 
> 标签：c++, c, sockets

我只是想知道为什么 sockaddr_storage 是 128 字节。我知道 IPv6 必须至少有 28 个字节，但这似乎有点过分，比 sockaddr_in6 多出 100 个字节。这只是为了将来证明存储结构还是有理由现在需要它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T20:27:24.780

[您将在rfc 2553](http://www.ietf.org/rfc/rfc2553.txt)的 §3.10和此[SO 帖子](https://stackoverflow.com/questions/1345109/why-sockaddr-storage-structure-defined-as-the-way-it-is-defined)中找到您的问题的答案。

原因是*应该至少保持 ip6 和其他协议数据*和*64 位对齐*以提高效率的组合。

从 RFC 的相关部分：

> 可以帮助应用程序编写者的套接字 API 的一个简单补充是“struct sockaddr_storage”。这种数据结构可以
> 简化编写跨多个地址族和
> 平台可移植的代码。该数据结构的设计目标如下。
> 
> ```
>  - It has a large enough implementation specific maximum size to
>     store the desired set of protocol specific socket address data
>     structures. Specifically, it is at least large enough to
>     accommodate sockaddr_in and sockaddr_in6 and possibly other
>     protocol specific socket addresses too.
>   - It is aligned at an appropriate boundary so protocol specific
>     socket address data structure pointers can be cast to it and
>     access their fields without alignment problems. (e.g. pointers
>     to sockaddr_in6 and/or sockaddr_in can be cast to it and access
>     fields without alignment problems).
>   - It has the initial field(s) isomorphic to the fields of the
>     "struct sockaddr" data structure on that implementation which
>     can be used as a discriminants for deriving the protocol in use.
>     These initial field(s) would on most implementations either be a
>     single field of type "sa_family_t" (isomorphic to sa_family
>     field, 16 bits) or two fields of type uint8_t and sa_family_t
>     respectively, (isomorphic to sa_len and sa_family_t, 8 bits
>     each). 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T20:26:22.207

可能有些系统也希望能够适应[`struct sockaddr_un`](http://pubs.opengroup.org/onlinepubs/007904975/basedefs/sys/un.h.html)这种结构。后者具有大约 100 到 110 个字符的系统相关路径长度。128 是一个漂亮的偶数。

# javascript - 如何让我的弹出窗口只为页面上的新访问者加载一次？

> ID：15075752
> 
> 赞同：0
> 
> 时间：2013-02-25T20:20:39.980
> 
> 标签：javascript, jquery, lightbox

每次刷新页面时都会出现此脚本。我现在使用的 JavaScript 来生成一个在页面加载时自动加载的灯箱。我只需要为唯一的新访问者加载一次。

```
<script type="text/javascript">

    $(function () {
        $("#button").click(function () {
            $("#overlay").fadeTo(1000, .8);
            $(".playerWindow").show(750);
            //$("body").scrollTop(0);
        });
        $(".closePlayer, #overlay").click(function () {
            $(".playerWindow").hide(750);
            $("#overlay").fadeOut(1000);
        });
    });

    $(window).load(function () {
        $("#overlay").fadeTo(1000, .8);
        $(".playerWindow").show(750);
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:08:32.720

我会检查来自 PHP（或您正在使用的任何支持）的 cookie。如果 cookie 不存在，则在 dom 中放置一个 div。然后，使用 javascript，检查 dom 中元素的存在并弹出该东西。

您可以通过 javascript 处理 cookie 来完成所有这些工作。相同的逻辑，不需要只检查 dom 元素。

# json - 使用 Gson 将“狗”序列化为“动物”

> ID：15075756
> 
> 赞同：1
> 
> 时间：2013-02-25T20:20:49.513
> 
> 标签：json, subclass, gson

我有一个**具体**的基类，`Animal`和几个子类`Dog`，`Cat`等等。

`Dog`和的细节`Cat`无关紧要，所以我想像序列化`Animal`s 一样序列化这些子类的实例。

有很多这样的子类，所以我更喜欢没有列出所有子类的解决方案。基于 an 的东西`instanceof Animal`将是理想的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:50:40.483

（从评论移至完整答案）

如果您不想将子类序列化为那些子类并且只作为父类，只需将子类中的所有字段标记为*-*`transient`默认情况下`Gson`不会序列化它们。

如果您希望能够做到这一点，请使用 Gson`@Expose`注释标记父类中的所有字段。然后，当您序列化时，您可以使用以下命令选择序列化方式：

```
Gson gson = GsonBuilder().excludeFieldsWithoutExposeAnnotation().create(); 
```

当您只希望在 JSON 中表示父类时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T17:24:33.283

我天真的 hack，我只是为了好玩而编码（但如果性能不是问题，那值得一试）。

```
public static void main(String[] args) {
  ArrayList<Animal> al = new ArrayList<Animal>();
  al.add(new Dog());
  al.add(new Fish());
  al.add(new Dog());

  String originalString = new Gson().toJson(al);
  System.out.println(originalString);

  ArrayList<Animal> a = new ArrayList<Animal>();
  Type listType = new TypeToken<List<Animal>>() {}.getType();

  a = new Gson().fromJson(originalString, listType);

  String newString = new Gson().toJson(a);

  System.out.println(newString);

} 
```

结果：

```
Original string: [{"feet":4,"name":"Dog"},{"canSwim":true,"name":"fish"},{"feet":4,"name":"Dog"}]
New string: [{"name":"Dog"},{"name":"fish"},{"name":"Dog"}] 
```

# java - WebDriver - 无法定位元素，提取网页输入字段

> ID：15075759
> 
> 赞同：0
> 
> 时间：2013-02-25T20:20:56.610
> 
> 标签：java, selenium, junit, webdriver

我正在尝试从网页中提取所有输入字段及其标题和元素详细信息，并将它们放入 HashMap 以供以后在 JUnit 测试中使用，例如

**这是来自测试类的示例代码：**

```
accountDetails.chooseField("Date of Birth");
accountDetails.changeValueTo(dateOfBirth); 
```

**这是页面源的一部分。**我正在尝试获取标签名称为“input”的所有字段。不幸的是，在运行测试时，我收到以下硒错误：

> **org.openqa.selenium.NoSuchElementException：无法找到元素：** {“方法”：“标签名称”，“选择器”：“输入”}**

```
<tbody>
    <tr>
    <tr class="subtitle">
    <tr>
    <tr class="subtitle">
    <tr>
    <tr class="subtitle">
    <tr>
    <tr>
    <td class="caption">Staff Member</td>
    <td>
    <input id="StaffMember" type="text" maxlength="6" size="6" value="" name="StaffMember">
    </td>
    <tbody> 
```

**那是提取类：**

```
public class AccountDetails {

    WebDriver driver;
    WebElement accountDetailsTable;
    WebElement radioButton;

    HashMap<String, WebElement> fields = new HashMap<String, WebElement>();
    WebElement addCustomerButton;

    public AccountDetails(WebDriver driver) {
        this.driver = driver;
        driver.switchTo().defaultContent();
        driver.switchTo().frame(driver.findElement(By.name("officePane")));
        driver.switchTo().frame(driver.findElement(By.name("MainArea")));
        accountDetailsTable = driver.findElement(By.tagName("tbody"));
        addCustomerButton = accountDetailsTable.findElements(By.className("btn_def")).get(0);

        List<WebElement> tr = accountDetailsTable.findElements(By.tagName("tr"));

        for (WebElement el : tr) {
            List<WebElement> td = el.findElements(By.tagName("td"));
            if (td.size() > 0) {
                fields.put(td.get(1).getText(), td.get(0).findElement(By.tagName("input")));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:16:53.190

为了捕捉所有输入，我通常会这样做：

```
List<WebElement> inputList = driver.findElements(By.xpath("//input")); 
```

像这样使用之后（愚蠢的例子：D）：

```
void showInputValue (List<WebElement> c) {
    for (WebElement e : c){
        Systeme.println(e.getAttribute("value"));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:33:44.880

我看到你在最后一个 tr 中有两个 td。`td.get(1).findElement(By.tagName("input"))`会给出正确的结果。

# jquery - jQuery 特定内容加载不适用于 # 链接

> ID：15075762
> 
> 赞同：0
> 
> 时间：2013-02-25T20:21:08.107
> 
> 标签：jquery, html

这是我的代码：

[http://jsfiddle.net/h3ctt/](http://jsfiddle.net/h3ctt/)

如果您在`www.example.com/page.html#example-name1`没有先加载页面的情况下导航到，它将显示整个页面而不是请求的内容。

但是，如果您在页面加载后导航到链接，它将起作用并显示所需的内容。

这很奇怪。有人可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:34:27.800

你应该检查哈希`onload`和`onhashchange`

```
// On page load
$(document).ready(function(){
    // When the hash (#something) changes
    window.onhashchange = function() {
        doAction();
    };

    doAction();

    function doAction() {
        // get the current hash minus '#'
        var profileId = window.location.hash.substr(1);

        if(profileId != '') {
            // hide all profiles
            $('.profile').hide();
            // show only the appropriate profile
            $('#' + profileId).show();
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:34:09.037

我相对确定您无法*在 jsfiddle 上*显示该功能，但是，如果您在正确的页面上，则 url 栏中的 page.html#example-name1 应该会产生您想要显示的功能。然而，为了使其在正确的页面上工作，您必须按照 aboodred1 对您的代码的建议进行操作。即，在 hashchange 上运行代码。这是为了确保在更改 url 时，它会显示该特定内容。

# frameworks - 安装 ProPowerTools.vsix 后无法在解决方案资源管理器中找到逆向工程师代码优先

> ID：15075769
> 
> 赞同：0
> 
> 时间：2013-02-25T20:21:28.527
> 
> 标签：frameworks, entity

在为 Visual Studio 2012 安装 ProPowerTools.vsix 后，当我右键单击项目 > EntityFramework 菜单选项时，我无法在解决方案资源管理器中找到逆向工程师选项。

我已经通过 NuGet 安装了 EF5.0。

# javascript - onClick javascript函数每次页面加载仅执行一次

> ID：15075770
> 
> 赞同：1
> 
> 时间：2013-02-25T20:21:33.990
> 
> 标签：javascript, html

所以我做了2个按钮，看起来像这样：

```
<input id="buttonLED1_green" type="button" value="green LED" onClick="writeLED(1,0)">
<input id="buttonLED1_red" type="button" value="red LED" onClick="writeLED(1,1)"> 
```

onCLick 正在执行的函数：

```
function writeLED(id, color) {
    try {
        SetDataAnalog( id+400,  color, 1,true);
        document.write("hi");
    } catch (e) {

    }
} 
```

这个发送一个 xmlHTTP 请求来更改我的另一台设备上的模拟数据点，该设备在地址上存储数字。

```
var xmlHttp = new Array(2); // Index 0 fĂĽrs Lesen, Index 1 fĂĽrs Schreiben
var ddcURL = "http://192.168.1.60/";
function SetDataAnalog(addr, wert, endeAdddr, isFullQualified) {
    endeAdddr = parseInt(endeAdddr);
    var cmd;
    if (isFullQualified) {
        cmd = ddcURL + "SetADP:" + addr + ":" + wert;
    } else {
        cmd = ddcURL + "SetADP:" + addr + ":" + wert;
    }
    try{
        if (xmlHttp[1]){
            xmlHttp[1].open('GET', cmd, true);
            xmlHttp[1].send(null);
        }
    } catch (e) {
        alert('error');
    }
} 
```

问题是，第一次单击任何按钮时，它们都起作用，并且在模拟地址 401 上设置了 0 或 1，但是当我第二次单击它时，所有功能也会执行，但是数据是因为任何原因没有写在 401 地址上。由于某种原因，当我关闭浏览器并重新打开页面时，它再次工作一次。

# php - php mysql 从2个表的列中选择加入

> ID：15075775
> 
> 赞同：0
> 
> 时间：2013-02-25T20:21:47.333
> 
> 标签：php, mysql

我有两张桌子。visitor_details，带有 id、scanner_id、time 列，visitors_info 带有scanner_id、name、surname 列

我想在表格中取回 id、name、surname、time

我写了这个，但不工作

```
$result = mysql_query("SELECT visitors_details.id AS id, 
visitors_info.name AS name, visitors_info.surname AS surname, visitors_details.time 
AS time FROM visitors_details AS d LEFT JOIN visitors_info AS i ON 
d.scanner_id=i.scanner_id ");

echo "<table border='1'>
<tr>
<th>id</th>
<th>name</th>
<th>surname</th>
<th>Time</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
 echo "<tr>";
 echo "<td>" . $row['id'] . "</td>";
 echo "<td>" . $row['name'] . "</td>"; 
 echo "<td>" . $row['surname'] . "</td>";
 echo "<td>" . $row['time'] . "</td>";
  echo "</tr>";
  }
   echo "</table>"; 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:33:29.110

试试这个查询

```
 $result = mysql_query("SELECT d.id , i.name , i.surname , d.time 
                       FROM visitors_details AS d LEFT JOIN visitors_info AS i 
                        ON d.scanner_id=i.scanner_id "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:38:09.947

最好为您的代码启用一些调试，如下所示：

```
<?php
error_reporting(E_ALL);
$sql = "
SELECT d.id AS id, i.name AS name, i.surname AS surname, d.time  AS time 
  FROM visitors_details AS d 
  LEFT JOIN visitors_info AS i ON d.scanner_id=i.scanner_id
";

$result = mysql_query($sql);
if (!$result) {
    die('Invalid query: ' . mysql_error());
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:39:51.347

添加它以捕获错误。节省大量时间：

```
if(!$result) {
    echo mysql_error();
} 
```

# breeze - fetchEntityByKey 没有向服务器发出任何请求

> ID：15075778
> 
> 赞同：0
> 
> 时间：2013-02-25T20:22:00.737
> 
> 标签：breeze

我正在尝试使用 Angularjs 创建一个文件管理器，我最近发现了 Breezejs，并有兴趣尝试使用它与我的后端通信并管理我的模型关系。后端是一个我可以完全控制的 rest api。

然而，我遇到了一个问题。我知道文件的 id，所以我想向格式的 url 发出请求，`backend_url/files/:fileId`其中`:fileId`文件的 url 是 base64 编码的。根据我应该`EntityManager.fetchEntityByKey()`用于此目的的文档。这是我用来创建 Angularjs 服务的函数：

```
var FilestoreService = function () {

    var dataService, manager;

    dataService = new breeze.DataService({
        serviceName: "../VFS-Symfony-Backend/web/app_dev.php/filesystems/local/",

        hasServerMetadata: false
    });         

    manager = new breeze.EntityManager({
        dataService: dataService
    });

    manager.metadataStore.addEntityType(fileEntityType);

    return {
        findOneById: function (id) {
            /* I have tried to leave the 3th argument empty or changing it to false with the same results */
            return manager.fetchEntityByKey("File", id, true).then(function(){console.log("success");}).fail(function(){console.log("failure");});

            /* I have also tried the following approach with the same result:
            var type, key, query;

            type = manager.metadataStore.getEntityType("File");
            key = new breeze.EntityKey(type, id);
            query = breeze.EntityQuery.fromEntityKey(key);

            return manager.executeQuery(query); 
             */
        }
    };
}; 
```

其中`fileEntityType`定义为：

```
var FileEntityType = new breeze.EntityType({
    shortName: "File"
});

FileEntityType.addProperty(new breeze.DataProperty({
    name: "uri",
    dataType: breeze.DataType.String,
    isNullable: false
}));
FileEntityType.addProperty(new breeze.DataProperty({
    name: "mTime",
    dataType: breeze.DataType.Int16,
    isNullable: false
}));
FileEntityType.addProperty(new breeze.DataProperty({
    name: "type",
    dataType: breeze.DataType.String,
    isNullable: false
}));
 FileEntityType.addProperty(new breeze.DataProperty({
    name: "size",
    dataType: breeze.DataType.int16,
    isNullable: true
})); 
```

但是，当我调用时，`findOneById`不会向服务器发出任何请求，并且控制台会记录 2 行：

*   `Should be empty:[]`由 q.js

*   `failure`（根据`fail()`回调函数）

“正常”查询 ( `manager.executeQuery(new breeze.EntityQuery().from("Files"));`) 确实会按预期向服务器发出请求。

我真的很迷失在这里。我整个周末都在寻找解决方案，最后决定在 SO 上发帖，希望有人能帮助我。

非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T02:12:56.700

至少有一个问题是**您没有**在“文件”实体类型的元数据描述中确定键（'id'？）。您已经定义了除“id”属性之外的*所有其他属性。*

> 您知道这一点，但让我告诉这个问题的其他读者，他们可能不明白您是在 JS 客户端上定义元数据，而不是从服务器检索元数据。

我也很好奇你为什么使用int16？这真的是正确的类型吗？你真的需要剃掉这两个字节吗？

最后，Breeze`fetchEntityByKey`不会以“backend_url/files **/:fileId** ”的形式发出请求 URL。相反，请求 URL 将是“backend_url/files **/?id=:fileId** ”，以适合 OData 查询。在 DocCode 示例的 queryTests.cs 中查看 Id 查询的网络流量。

如果服务器需要您指定的 URL，您仍然可以获取该文件。您不会使用 Breeze 查询语法。您只需使用它期望的 URL 访问服务，例如，

```
函数 findOne(id) {
    // 先检查缓存
    var file = manager.getEntityByKey('File', id);
    如果（文件）{
       console.log("从缓存中获取");
       返回Q（文件）；// 知道了; 返回已解决的承诺
    }
    // 不在缓存中；从服务器获取
    返回微风.EntityQuery
        .from('Files/'+id) // 构造你想要的 URL
        .using(manager).execute()
        .then（函数（数据）{
            console.log("成功");}
            // 在已解决的承诺中返回文件
            返回数据.结果[0] || 空值;
         })
        .失败（功能（错误）{
            console.log("失败："+ error.message);
         });
}

```

这是`getByIdCacheOrRemote`DocCode 示例中 queryTest.cs 中方法的变体。

是的，它更长。您正在重新实现`fetchEntityByKey`，因此您可以按预期方式访问远程服务。

该方法首先在缓存中查找文件。这`getEntityByKey`是缓存的同步搜索。该`findOne`方法具有异步语法...返回一个承诺...因为它*可能*必须转到服务器。因此，如果我们在缓存中找到文件（同步），我们将结果包装在一个已解析的 Q.js 承诺中，以使调用者受益，该调用者期望`findOne`是异步的。

如果在缓存中未找到该文件，您将使用“查询”转到服务器，该“查询”**实际上只是对您选择的 URL 的请求**。

我很久没试过这个了。我相信你会告诉我它是否有效......或无效。如果没有，它应该这样做，我们会修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T17:42:34.243

正如 Ward 建议的那样，我创建的 EnityType 确实需要将其中一个字段标记为关键字段。除此之外，EntityType 还需要`defaultResourceName`提供给它的构造函数。我认为这解释了为什么“正常”查询确实有效（resourceName 由 提供`from()`）以及为什么 fetchEntityByKey 无效。更新后的 FileEntityType 现在如下所示：

```
var FileEntityType = new breeze.EntityType({
    shortName: "File",
    defaultResourceName: "files"
});
FileEntityType.addProperty(new breeze.DataProperty({
    name: "id",
    dataType: breeze.DataType.String,
    isNullable: false,
    isPartOfKey: true
}));

// These properties were not altered
FileEntityType.addProperty(new breeze.DataProperty({
    name: "uri",
    dataType: breeze.DataType.String,
    isNullable: false
}));
FileEntityType.addProperty(new breeze.DataProperty({
    name: "mTime",
    dataType: breeze.DataType.Int16,
    isNullable: false
}));
FileEntityType.addProperty(new breeze.DataProperty({
    name: "type",
    dataType: breeze.DataType.String,
    isNullable: false
}));
FileEntityType.addProperty(new breeze.DataProperty({
    name: "size",
    dataType: breeze.DataType.int16,
    isNullable: true
})); 
```

# windows - 从 Windows 上的命令行向 git commit -m 添加换行符

> ID：15075783
> 
> 赞同：14
> 
> 时间：2013-02-25T20:22:11.210
> 
> 标签：windows, git

我的公司有一项政策，即对特定项目的所有签入都必须遵循 git 提交的特定多行模板。我怎样才能最简单地从 Windows 的命令行创建一个包含多行的提交消息？

[*这几乎完全是“从命令行向 git commit -m 添加换行符”的副本，*除了[这个](https://stackoverflow.com/questions/5064563/add-line-break-to-git-commit-m-from-command-line)问题*特定于 Windows/cmd.exe，而该问题与 bash 有关。*]

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T20:56:30.097

要么创建一个包含正确格式的提交消息的文件并使用`git commit -F <message_file>`，然后您可以继续编辑和重复使用同一文件，或者创建一个模板文件并使用`git commit -t <template_file>`要填写的预煮模板打开您的编辑器。第二个选项可以通过设置`commit.template`配置变量来永久化，因此您不需要`-t ...`在每次提交时都使用该位。有关详细信息，请参阅`git commit`手册页（`git help commit`如果您`git`的安装正确，或在线搜索）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-07-08T12:00:17.747

您可以像这样创建多行提交消息：

```
C:\> git commit -m "Line 1"^
More?
More? "Line 2"^
More?
More? "Line 3" 
```

请注意，抑扬符字符仅在奇数行上。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-02-26T08:55:25.610

```
git commit -m "Subject" -m "Description..." 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-13T08:15:22.620

您还可以使用交互式 rebase 然后 reword 来编辑提交的消息。

键入`git commit -m "doesnt really matter whats here"`然后`git rebase -i HEAD~1`，替换`pick`为`r`or `reword`，保存然后编辑消息。

# multithreading - 安全的 perl 线程

> ID：15075784
> 
> 赞同：1
> 
> 时间：2013-02-25T20:22:17.480
> 
> 标签：multithreading, perl, memory-management

我正在尝试使用分离方法运行带有线程的 perl 脚本。该应用程序应该永久运行，24/7。我正在尝试使用[这个例子](http://cpansearch.perl.org/src/JDHEDDEN/threads-1.86/examples/pool.pl)。

但是当我在更长的时间段内运行这个例子时，发现内存在不断增加。我怎样才能避免这种情况？如何在`threads->detach`不增加内存的情况下使用该方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:42:14.400

另一种方法可能是使用[Parallel::ForkManager](http://search.cpan.org/perldoc?Parallel%3a%3aForkManager)模块（一个简单的并行处理分支管理器）。我已经使用它并且完成了我的工作（长时间运行的进程没有内存泄漏）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:33:19.627

您可以发布您的代码或您要分离的内容吗？

你不需要使用 pool.pl 来运行一个分离的程序。

你能做的最简单的就是

```
use threads;
use threads::shared; # if required,

###loop main prog

my $detach_thread = threads->create(

    sub {
         # DO YOUR STUFF here
          return;
        }

);

$detach_thread->detach(); 
```

其他要考虑的替代方案是在后台运行（在 unix 中：）`yourcommand &`。

# sdk - 掌上电脑未连接到电脑

> ID：15075785
> 
> 赞同：1
> 
> 时间：2013-02-25T20:22:27.657
> 
> 标签：sdk, windows-mobile, pocketpc

我有一个无法连接到 Windows Mobile 设备中心的 Symbol PPT8800。它工作正常，我把它从通讯座上取下来，做了一个硬重置，现在它没有连接。HH 本身是否有阻止连接的设置？

我有其他 Symbol PPT8800 可以毫无问题地连接到同一个底座中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:03:03.387

Windows 移动手持设备和运行 WMDC (ActiveSync) 的 PC 之间的连接问题可能有很多来源。

1.  使用已知良好的 USB 电缆
2.  将 USB 电缆直接连接到 PC，避免使用 USB 集线器
3.  验证 WMDC 是否与另一个 Windows 移动设备连接
4.  断开手持设备并重新启动您的 PC 并等待 PC 启动后再尝试连接
5.  WMDC 连接设置中的“允许 USB 连接”已取消选择
6.  有时必须取消选中（或选中）开始/设置/连接/“USB to PC”中的设备设置“启用高级网络功能”。
7.  设备的注册表已损坏，无法启动连接 (repllog.exe) 或未正确验证。执行干净启动或擦除设备以使设备恢复出厂默认设置

很抱歉，有许多可能的问题会导致 WMDC 连接失败。最近我发现在我的电脑睡眠/恢复后 USB 集线器处于省电模式，我无法让设备连接到 WMDC。

当您将 USB 电缆连接到设备时，您的 PC 是否会发出一些“嘭”的声音？硬件设备管理器显示什么？有感叹号吗？

编辑：如何擦除设备？您需要使用[DMProcessConfigXML](http://msdn.microsoft.com/en-us/library/bb158518.aspx)和以下 wap 配置 xml 编写一个小的 .net 或 c++ 应用程序：

```
<wap-provisioningdoc>
  <characteristic type="RemoteWipe">
     <parm name="doWipe" value="1"/>
  </characteristic>
</wap-provisioningdoc> 
```

[另见 http://peterfoot.net/UsingRemoteWipe.aspx]

或使用[Mobile SDK](http://msdn.microsoft.com/en-us/library/bb737283.aspx)中的 RapiConfig 工具。

如果两者都对您不可用（是运行 Windows Mobile 还是 Windows CE？），或者只是恢复出厂默认设置或[重新刷新](http://software.symbol.com/detail.cfm?prod=1799)设备。如果是 Windows Mobile 版本 5 之前的设备，您可以冷启动，但先删除任何永久文件夹（即 Flash 文件存储或???）。

[PT 8800 恢复](http://www.exactsoftware.com/docs/DocView.aspx?DocumentID=%7B819d0083-0977-4be6-81dc-b2db242d86c0%7D)出厂设置：

```
 hold white RESET button + POWER + FUNC 
```

# python - 通过 python 从 gmail 获取电子邮件

> ID：15075786
> 
> 赞同：3
> 
> 时间：2013-02-25T20:22:30.857
> 
> 标签：python, gmail, gmail-imap

我正在使用以下代码从 gmail 下载我的所有电子邮件，但不幸的是，返回的电子邮件总数与帐户中的电子邮件总数不匹配。特别是，我能够收到前 43 封邮件，但我在收件箱中还有 20 多封邮件丢失了。也许这是对可以撤回的数量的某种限制（？）。提前感谢您提供的任何帮助！

```
import imaplib, email, base64

def fetch_messages(username, password):
    messages = []
    conn = imaplib.IMAP4_SSL("imap.gmail.com", 993)
    conn.login(username, password)
    conn.select()
    typ, data = conn.uid('search', None, 'ALL')

    for num in data[0].split():
        typ, msg_data = conn.uid('fetch', num, '(RFC822)')
        for response_part in msg_data:
            if isinstance(response_part, tuple):
                messages.append(email.message_from_string(response_part[1]))
        typ, response = conn.store(num, '+FLAGS', r'(\Seen)')
    return messages 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:40:07.470

我使用以下内容获取所有电子邮件。

```
resp,data = mail.uid('FETCH', '1:*' , '(RFC822)') 
```

并获得`id`我使用的所有 s：

```
result, data = mail.uid('search', None, "ALL")
print data[0].split() 
```

给出：

```
['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', ... etc ] 
```

**编辑**

在我的情况下，以下返回 202 个日期，这超出了 OP 正在寻找的日期，并且是正确的数字。

```
resp,data = mail.uid('FETCH', '1:*' , '(RFC822)')
messages = [data[i][1].strip() for i in xrange(0, len(data), 2)] 
for msg in messages:
    msg_str = email.message_from_string(msg)
    print msg_str.get('Date') 
```

# c - 特定计算机的软件堆栈

> ID：15075787
> 
> 赞同：1
> 
> 时间：2013-02-25T20:22:39.863
> 
> 标签：c, assembly, computer-architecture, instruction-set

我正在做一个项目，我的团队负责特定硬件的软件堆栈。

我手里只有处理器的指令集，我需要用它开发完整的软件堆栈。

除了汇编器的指令集之外，我还需要其他什么吗？

请注意，我不知道该计算机的硬件结构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:57:28.933

非常简短的回答是“如果没有进一步的信息，可能是不可能的”。

至少，您需要知道不同类型的内存位于何处，需要在处理器本身内初始化什么[这通常不在指令集手册中]。典型示例：中断向量、定时器、内存控制器等，它们通常是处理器本身的一部分，但实际上并不是指令集的一部分。

显然，数字手表的软件堆栈非常基础。一个完整的家庭娱乐系统的软件堆栈，能够流式传输加密视频和浏览网络，将会非常大。手机的软件堆栈更大。对手表的要求和构建所需的硬件[不是说你可以很容易地把它弄得足够小，而是忽略了，因为这是一个软件，而不是一个硬件问题]，最多可能需要几天时间。一款能够与当今市场上的顶级产品竞争至少取得一些成功的智能手机将需要一个由非常熟练的软件开发人员组成的大型团队几年时间才能完成。显然，在这些相对极端的例子之间还有很多其他基于软件的系统。

# jquery - Slickgrid：显示空组？

> ID：15075788
> 
> 赞同：0
> 
> 时间：2013-02-25T20:22:43.493
> 
> 标签：jquery, jquery-plugins, slickgrid

有没有一种方法可以为 SlickGrid 提供预先确定的组值列表，无论该组中是否有行，这些值都将显示在网格中？我有一个网格，用户可以按几个不同的列进行分组，所以当 groupBy 更改时我需要能够更新它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:29:44.747

现在还没有，但我正在努力为其添加多级分组，所以现在是提出您的建议的好时机:)

我真的不明白这将如何适应当前的 DataView API。你对此有什么想法吗？

**更新：** 已经实现了新的多级分组，并且在[https://github.com/mleibman/SlickGrid/commit/8c840b2e81e858f44b57f4bf351cfb0b5197af66](https://github.com/mleibman/SlickGrid/commit/8c840b2e81e858f44b57f4bf351cfb0b5197af66)中添加了对预定义组值的支持。

# python - 对信用卡债务的最低付款使用二分搜索和

> ID：15075792
> 
> 赞同：0
> 
> 时间：2013-02-25T20:22:57.407
> 
> 标签：python, bisection

我的代码：

```
monthlyInterestRate = annualInterestRate/12.0 
low = balance/12 
high = (balance*(1+monthlyInterestRate)**12)/12 
guess = (low+high)/2 
unpaidBalance = balance 
month = 1

while True:
    unpaidBalance= unpaidBalance-guess 
        while month < 13:
            if unpaidBalance <= -0.1:
                low = guess
                month += 1
            elif unpaidBalance >= 0.1:
                high = guess
                month += 1
            else:
                break
            guess = (low + high)/2 
print "Lowest Payment: " + str(round(guess, 2)) 
```

当我测试它时，它卡在“当月 < 13:”这一行

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:30:39.627

如果你在每个内部 while 循环处中断，你仍然小于 13。

自从您继续`While True`并且不更新您的`guess`.

我担心你在那里面临无限循环。

您的`break`语句打破了最近的循环，即`While month < 13`循环。下一行不读。`guess`没有更新。`while True`不坏。

也许你想说

```
while month < 13:
   unpaidBalance= unpaidBalance-guess 
   if unpaidBalance <= -0.1:
         low = guess
   elif unpaidBalance >= 0.1:
         high = guess
   month += 1
   guess = (low + high)/2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-27T21:26:39.640

这个给你

否是最好的解决方案，但它有效

```
monthlyPaymentRate = (balance*annualInterestRate/12)/((1-(1+annualInterestRate/12)**-12))

interest = monthlyPaymentRate * (annualInterestRate/12)

#print (monthlyPaymentRate)
#print (interest)
monthlyPaymentRate = (monthlyPaymentRate - interest) +1
#print (monthlyPaymentRate)
balanceInit = balance

epsilon = 0.01
low = monthlyPaymentRate
while low*12 - balance > epsilon:
    balances = balanceInit
    for i in range(12):
                 minpay =  monthlyPaymentRate
                 unpaybal = balances - minpay
                 interest = (annualInterestRate /12) * unpaybal
                  smontfinal =  unpaybal + interest
                  balances = smontfinal
                 #print('Remaining balance: ' ,round(balances,2) )
                 if balances <0:
                     low = -1
                     break
    if balances < 0 :
        low = -1
    else:
        monthlyPaymentRate =monthlyPaymentRate + 0.001 

print('Lowest Payment:' ,round(monthlyPaymentRate,2) ) 
```

# node.js - 节点 removeListener 不起作用

> ID：15075793
> 
> 赞同：3
> 
> 时间：2013-02-25T20:23:00.283
> 
> 标签：node.js, listener

尝试使用此代码删除侦听器：

```
var EventEmitter = require('events').EventEmitter;

var emitter = new EventEmitter;

emitter.on('message', function(text)
{
        console.log(text);
});

setInterval(function()
{
        emitter.emit('message', Date.now());
}, 300);

setTimeout(function()
{
        emitter.removeListener('message', function()
        {
                console.log('removing "message" listener');
        });
}, 1000); 
```

它不会打破间隔，我的节点版本：v0.8.11

阅读文档我认为没关系： [http ://nodejs.org/api/events.html#events_emitter_removelistener_event_listener](http://nodejs.org/api/events.html#events_emitter_removelistener_event_listener)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-25T23:11:11.290

您需要将相同的函数传递给`removeListener`，因此在这种情况下您不能使用匿名函数。

这是一个工作版本：

```
var EventEmitter = require('events').EventEmitter;

var emitter = new EventEmitter;

function listener(text) {
  console.log(text);
}

emitter.on('message', listener);

setInterval(function() {
  emitter.emit('message', Date.now());
}, 300);

setTimeout(function() {
  console.log("removing");
  emitter.removeListener('message', listener);
}, 1000); 
```

# git - 从其他存储库的部分构建 GIT 存储库

> ID：15075794
> 
> 赞同：0
> 
> 时间：2013-02-25T20:23:01.217
> 
> 标签：git, module

是否可以使用另一个 GIT 存储库的一部分创建一个全新的 GIT 存储库？

让我解释。我有一个包含几个模块的中等大小的存储库。这个“系统”可以完全或模块化使用。但是从主存储库中取出每个模块所需的所有文件并不总是一件容易的事。

所以我想知道我是否可以创建一些小型存储库，假设每个模块都有一个具有所有依赖项的模块，并使它们与主存储库保持同步。

从概念上讲，这将是一个子模块，但除非我错了，否则这不是此功能的用途。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:42:51.967

Git submodules let you to move entire subdirectory into separate repository and link to exact commit in there.

If your modules overlap, like you have few shared directories and each module has few files in each of these dirs, then you need to redesign your modules. Git submodules are nice when you have dir hiearchy like this:

```
 |-- application
 |   |-- class
 |   `-- some stuff
 |
 `-- plugins
     |-- first
     |   |-- class
     |   `-- some stuff
     |-- second
     |   |-- class
     |   `-- some stuff
     `-- third
         |-- class
         `-- some stuff 
```

Where `plugins/first`, `plugins/second`, and `plugins/third` are submodule root directories.

# django - 带有芹菜的Django：计划任务（ETA）并行执行多次

> ID：15075797
> 
> 赞同：2
> 
> 时间：2013-02-25T20:23:07.200
> 
> 标签：django, heroku, celery, django-celery

我正在使用 Django 开发一个 Web 应用程序，它使用 Celery 来处理异步任务，特别是对于事务性电子邮件。

我的电子邮件任务中的一个是使用 ETA 选项安排的，但它并行执行了多次，导致邮件链非常烦人。我无法弄清楚究竟是为什么。我检查了两次我的 Django 代码，我确信它只发布了一次。

我使用 Redis 作为代理/后端结果。

我的 Celery 守护进程托管在 Heroku 上，并通过以下命令启动：

```
python manage.py celeryd -E -B --loglevel=INFO 
```

谢谢你的帮助。

**编辑：**感谢#celery IRC 频道上的一个人，我在这里找到了一个有效的解决方案：http: [//loose-bits.com/2010/10/distributed-task-locking-in-celery.html](http://loose-bits.com/2010/10/distributed-task-locking-in-celery.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:50:55.150

您是否检查过[确保任务一次只执行一个](http://ask.github.com/celery/cookbook/tasks.html#ensuring-a-task-is-only-executed-one-at-a-time)文档？

# windows - 带有空格和括号的批处理文件变量

> ID：15075799
> 
> 赞同：5
> 
> 时间：2013-02-25T20:23:13.940
> 
> 标签：windows, variables, batch-file, escaping

我已经阅读了许多关于让 Windows 批处理文件解析器正确处理具有空格、括号和其他特殊字符的变量的不同方法的线程，但似乎没有一个建议能够解决我遇到的问题。

这是脚本（在尝试任何解决方法之前），其目标是根据为 variable01 和 variable02 找到的值设置 variable03 的值：

```
set variable01="C:\Program Files (x86)\SomeProgram\Subfolder"
set variable02="${macro}"

set variable01=%variable01:"=%
set variable02=%variable02:"=%

set variable03=""

if %variable02:~0,1%==$ (
   if %variable01:~0,1%==$ (
      set variable03=%variable03:"=%
   ) else (
      set variable03=-o '%variable01%'
   )
) 
```

... variable01 和 variable02 的值事先不知道 - 它们在运行脚本之前被另一个程序替换，所以上面的脚本显示了 variable01 和 variable02 在替换完成后的一组示例值。

这个脚本运行时我得到的错误是：

```
\SomeProgram\Subfolder' was unexpected at this time. 
```

...对应于上述脚本中的最后一个“设置”行。我认为这个错误是由于 variable01 的值中的括号造成的。

如果我将该行更改为：

```
set "variable03=-o '%variable01%'" 
```

...然后我收到此错误：

```
Files was unexpected at this time. 
```

...这似乎表明它正在尝试对变量 01 中的空格进行标记，并且解析器仍然不满意。

如果我在脚本顶部添加这一行：

```
 setlocal enableextensions enableDelayedExpansion 
```

...并将 %variable01% 更改为 !variable01!，我仍然得到同样的错误。

显然，我不明白批处理文件解析器需要什么才能满足我的要求，即 variable03 的值具有以下值：

```
-o 'C:\Program Files (x86)\SomeProgram\Subfolder' 
```

...有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T23:05:47.560

正如 Nate 所写，这种情况下的问题是括号，但完整的代码仍然不稳定。

使用延迟扩展总是更好，因为这对任何特殊字符都是安全的。
并且您应该使用扩展语法`SET` `set "variable=content"`将完整的表达式用引号括起来，这样几乎是安全的，并且引号不会添加到内容中。
而且您以后不需要删除引号。

这应该适用于 var1 和 var2 中的任何内容

```
setlocal EnableDelayedExpansion
set "variable01=C:\Program Files (x86)\SomeProgram\Subfolder"
set "variable02=${macro}"

set "variable03="

if "!variable02:~0,1!"=="$" (
   if "!variable01:~0,1!"=="$" (
      rem
   ) else (
      set "variable03=-o '!variable01!'"
   )
)
echo(!variable03! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T20:53:04.500

问题是`variable01`' 值中的括号。由于它在一个`if`条件下被扩展，这些括号被解释为流控制。通过始终将其放在双引号中来修复。

```
set variable01="C:\Program Files (x86)\SomeProgram\Subfolder"
set variable02="${macro}"

set variable01=%variable01:"=%
set variable02=%variable02:"=%

set variable03=""

if "%variable02:~0,1%"=="$" (
   if "%variable01:~0,1%"=="$" (
      set variable03=%variable03:"=%
   ) else (
      call :set3 "%variable01%"
   )
)
goto :eof

REM If it is important to have single quotes instead of double then
REM I found I had to call a subroutine.  Otherwise the set could be
REM left up in the else.
:set3
set variable03=-o '%~1'
goto :eof 
```

# php - 全局变量在 PHP CLI 中不起作用

> ID：15075803
> 
> 赞同：-1
> 
> 时间：2013-02-25T20:23:28.080
> 
> 标签：php

遇到一个问题，我的代码在使用 apache 运行时可以正常工作，但是当我通过 CLI 运行它时，它看不到这个变量 $jobID。有什么想法吗？

PS。请不要教我不使用全局变量。

编辑：

这不起作用：

```
$jobID = mysql_insert_id();

function someFunction() {
     global $jobID;
     echo $jobID;
} 
```

这样做：

```
$jobID = mysql_insert_id();

function someFunction($jobID) {
     echo $jobID;
} 
```

**使用 Register Globals修复** ：此功能自 PHP 5.3.0 起已弃用，自 PHP 5.4.0 起已移除。 [http://php.net/manual/en/security.globals.php](http://php.net/manual/en/security.globals.php)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T20:42:33.860

这可能是：

```
 $GLOBALS['jobID'] = 12; 

//Thats the way to initialize the var...and in the function:

function someFunction() {
  echo $GLOBALS['jobID'];
}

someFunction(); //testing 
```

萨卢多斯 ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:30:38.843

PHP 将命令行参数存储在 $argv 数组中，而不是将参数扩展为普通变量。这种扩展是旧 PHP 版本经常使用的不良行为，所以不要使用它，而是使用 $argv 数组来访问参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:26:13.623

不要使用全局，通过函数调用传递您的参数，因为 [ [see this](https://stackoverflow.com/questions/6998974/replacing-the-global-variables-how-and-why) ]，例如：更改：

```
function someFunction() {
     global $jobID;
     echo $jobID;
} 
```

到：

```
function someFunction($arg1) {
     echo $arg1;
}
$anyvar = 'some value';
someFunction($anyvar); 
```

# c - FFTW3 向后对我不起作用

> ID：15075806
> 
> 赞同：1
> 
> 时间：2013-02-25T20:23:42.587
> 
> 标签：c, fftw

首先我为我糟糕的英语道歉......

所以这是我的问题。我正在用一个简单的输入信号测试 FFTW3 库，一个连续的。然后我计算 FFT 并得到好的结果：只是频率为 0 的信号，其他一切都为 0。

然后我想用反向 FFT 取回我的输入，但它不起作用。这是我的代码：

```
fftw_complex* imgIn;
fftw_complex* imgIn2;
fftw_complex* imgOut;
fftw_plan plan;

int taille = 100;
int i;

 //Allocation des entrées et sorties
imgIn = fftw_malloc(sizeof(fftw_complex)*taille);
imgIn2 = fftw_malloc(sizeof(fftw_complex)*taille);
imgOut = fftw_malloc(sizeof(fftw_complex)*taille);

//Remplissage des données d'entrées pour le calcul de la FFT
for(i = 0 ; i < taille ; i++){
    imgIn[i][0] = 1.0;
    imgIn[i][1] = 0.0;
}

//Plan d'execution
plan = fftw_plan_dft_2d(taille/10, taille/10, imgIn, imgOut, FFTW_FORWARD, FFTW_ESTIMATE);

//Execute la FFT
fftw_execute(plan);

//Inverse
plan = fftw_plan_dft_2d(taille/10, taille/10, imgOut, imgIn2, FFTW_BACKWARD, FFTW_ESTIMATE);

for(i = 0 ; i < taille ; i++){
    printf("%d : %g\n%d : %g\n", i, imgIn2[i][0], i, imgIn2[i][1]);
} 
```

如您所见，我只是尝试执行正常的 FFT，然后对其进行反转。问题是我的输出 imgIn2 只是充满了 0，而不是 1 和 0...

那么我的代码有什么问题？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:14:30.890

您的代码不执行第二个计划。

# vba - VBA：如果在第 1 行找到 A，在第 2 行找到 B .. 那么

> ID：15075809
> 
> 赞同：2
> 
> 时间：2013-02-25T20:23:59.890
> 
> 标签：vba, if-statement, readline

我目前将我的 VBA 设置为读取文本文件（使用`FileSystemObject`）并查找某些字符串。这一切都很好。但是我想要实现的是让 VBA 通读文本，当它找到某个字符串 (A) 并在它下面的下一行中找到另一个字符串 (B) 时，它会做一些事情。但前提是 B 在 A 之后。

例子：

```
Find in the following text "Bob's House" and in the next line after that "Electricity.
Text 1: - Return False
blablabla *Bob's House* blablabla
blablabla blablabla blablabla
blabla *Electiricity* blablabla

Text 1: - Return True
blablabla *Bob's House* blablabla
blabla *Electiricity* blablabla 
```

这是我到目前为止所拥有的：

```
Set fsFile = fs.OpenTextFile(FilePath, 1, False)
sLine = fsFile.ReadLine

If VBA.InStr(1, sLine, "Bobs House") > 0 Then
   checkpointHeading = True
End If
If VBA.InStr(1, sLine, "Electricity") > 0 Then
   checkpointSubheading = True
End If
If checkpointHeading = True And checkpointSubheading = True Then
   MsgBox "Found it!"
End If 
```

`Bobs House`无论和之间有多少行，这都会返回“找到它” `Electricity`。这是有道理的。但是，只有在找到第一个约束之后，我如何强制第二个约束呢？

是否有类似`sLine +1`/的东西`.Readline + 1`（然后在第一个 if 语句中应用第二个？）。在此先感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:17:25.063

您遇到了这个麻烦，因为如果该行不等于“Electricity”，您没有在下一行重置“Bob's House”变量。因此，一旦找到鲍勃的房子，它就永远是真实的，“电力”从哪里来并不重要。

您可以通过以下两种方式之一完成您的工作。使用像你一样的布尔值和“方式 1”中的代码（我已经膨胀了一点，所以它很容易理解），或者可能是一种更好的方法，你只需将当前行字符串变量设置为一个新的字符串变量循环结束时的上一行，然后在下一行检查这两个变量，就像在“方式 2”中一样。

（请注意，我保留了您的示例中的几个拼写错误，因此代码适用于该示例）。

```
 Sub Way1()
    Dim fs As New FileSystemObject, fsfile As Object
    Dim sLine As String
    Dim checkpointHeading As Boolean, checkpointSubheading As Boolean

    'Open file
    Set fsfile = fs.OpenTextFile("G:Test.txt", 1, False)

    'Loop through
    Do While fsfile.AtEndOfStream <> True

        sLine = fsfile.ReadLine

        If VBA.InStr(1, sLine, "Bob's House") > 0 Then
           checkpointHeading = True
        Else
           'If the line doesn't have Bob's House then check if the line before did
           If checkpointHeading Then
               'If it did then check for Electricity
               If VBA.InStr(1, sLine, "Electiricity") > 0 Then
                   'If it's found then happy days
                   checkpointSubheading = True
               Else
                   'If it's not found then reset everything
                   checkpointHeading = False: checkpointSubheading = False
               End If
           End If
        End If

        'Check if we've found it
        If checkpointHeading = True And checkpointSubheading = True Then
           MsgBox "Found it!"

           'You may want to reset here to be safe
           checkpointHeading = False:    checkpointSubheading = False
        End If

    Loop

    fsfile.Close
    Set fsfile = Nothing
    Set fs = Nothing
End Sub 
```

更简单，更简洁的方式2：

```
Sub Way2()
    Dim fs As New FileSystemObject, fsfile As Object
    Dim sLine As String, sPrevLine As String

    'Open file
    Set fsfile = fs.OpenTextFile("G:Test.txt", 1, False)

    'Loop through
    Do While fsfile.AtEndOfStream <> True

        sLine = fsfile.ReadLine

        If VBA.Len(sPrevLine) > 0 Then
            If VBA.InStr(1, sPrevLine, "Bob's House") > 0 And VBA.InStr(1, sLine, "Electiricity") Then
                MsgBox "Found it!"
            End If
        End If

        'Set the current line to the previous line *at the end of the loop*
        sPrevLine = sLine
    Loop

    fsfile.Close
    Set fsfile = Nothing
    Set fs = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:37:33.360

我没有测试它，但这应该证明逻辑：

```
 Const filepath = "..."

 Sub test()

    Dim fs
    Dim fsFile
    Dim found As Boolean
    Dim flag As Boolean
    Dim sLine As String

    Set fs = CreateObject("Scripting.FileSystemObject")
    Set fsFile = fs.OpenTextFile(filepath, 1, False)

    found = False
    flag = False
    Do While Not fsFile.AtEndOfStream And Not found
        sLine = fsFile.readLine
        If flag And InStr(sLine, "Electricity") Then found = True
        flag = (InStr(sLine, "Bobs House") > 0)
    Loop

    If found Then
        MsgBox sLine
    Else
        MsgBox "not found"
    End If

 End Sub 
```

编辑：经过测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:43:23.137

Something like this:

```
 sLine = fsFile.ReadLine

    If isHeading Then
        If InStr(1, sLine, "Electricity") > 0 Then
            MsgBox "Found It!"
        End If
        isHeading = False
    End If

    If InStr(1, sLine, "Bobs House") > 0 Then
        isHeading = True
    End If 
```

# ruby-on-rails - 为什么我得到两个对话框确认（rails）

> ID：15075810
> 
> 赞同：1
> 
> 时间：2013-02-25T20:24:00.953
> 
> 标签：ruby-on-rails

当我单击链接删除评论时，我会收到两个对话框确认。当我删除确认时，我没有得到任何确认。

查看/评论/_comment：

```
<span class="comment_info">
  <aside class="span2">
    <%= link_to gravatar_for((comment.user), size: 35), comment.user %>
    <%= link_to comment.user.name, comment.user, id: "feedusername" %>
  </aside>
<span id="comment_contentz"> <%= comment.content %>
<span id="timestamp_and_delete">
  Said <%= time_ago_in_words(comment.created_at) %> ago.
  <% if current_user?(comment.user) || current_user.id == (comment.micropost.user_id) %>
    <%= link_to "erase", comment, method: :delete, id:"",
            data: { confirm: "You sure?" },
            title: comment.content %>
    <% end %>
  </span>
  </span>
</span> 
```

我的帖子也有同样的问题

微博/_micropost：

```
 <span class="timestamp">Posted  
    <%=time_ago_in_words(micropost.created_at) %> ago.</span>
    <%= render 'shared/delete_micropost', object: micropost %> </span>
    <br/>
    <%= micropost.content %>
  </span>
<%= render micropost.comments %> 
```

共享/删除微贴：

```
<% if current_user?(object.user) %>
  <%= link_to "delete", object, method: :delete,        id:"micropost_delete",
            data: { confirm: "Remove Post?" },
            title: object.content %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:24:47.627

这通常发生在单击处理程序两次绑定到同一元素时。检查您的 javascript 文件是否包含两次。

如果您使用的是 Rails 3.2.8，请查找多个包含的`application.js`or `jquery_ujs`。或者，您可以尝试在单击删除按钮时调用的单击处理程序上使用 Javascript 控制台设置断点。您必须在上述文件的某处挖掘该方法。

如果该断点被命中两次，那么您可能已经包含该文件两次。如果它只被点击一次，那么其他一些代码正在同一元素上设置点击处理程序。

警告：就像 244an 在他对您的帖子的评论中所说的那样，您不必放入`confirm: "You sure?`数据哈希的内部。你可以这样做：`<%= link_to 'erase', delete_path, confirm: 'You sure?' %>`. 请参阅[UrlHelper#link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)。不过，按照你的方式做这件事似乎并没有伤害任何东西。

# java - Android SAXParser 解析本地存储的 xml 文件

> ID：15075812
> 
> 赞同：0
> 
> 时间：2013-02-25T20:24:03.073
> 
> 标签：java, android, xml-parsing, local-storage, sax

我正在使用在线`SAX`存储。然后填充一个自定义 这工作正常。现在我想在应用程序开始处下载 XML 文件，然后再解析它。`parse``XML File``GridView``local storage`

**解析：**

```
class loadingTask extends AsyncTask<String, Void, String> {
        @Override
        protected void onPostExecute(String s) {
            super.onPostExecute(s);
            gridView.setAdapter(new LkwAdapter(Lkw.this,itemList));
            showProgress.dismiss();
        }

        @Override
        protected String doInBackground(String... strings) {

            try{
                URL contURL = new URL(rUrl);
                SAXParserFactory spf = SAXParserFactory.newInstance();
                SAXParser sp = spf.newSAXParser();
                XMLReader xr = sp.getXMLReader();
                LkwParseHandler handler = new LkwParseHandler();
                xr.setContentHandler(handler);
                xr.parse(new InputSource(contURL.openStream()));//THIS WORKS
                //xr.parse(new InputSource(new FileInputStream("test.xml")));
                //THIS IS ONE OF MY MANY TRIES, what InputSource do i use?

                itemList = handler.getLkwItems();

            }catch (Exception e){
                e.printStackTrace();
            }
            return "";
        }
    } 
```

这适用于在线文件！然后当我第一次保存文件并尝试使用它时，GridView 保持为空！

**保存文件：（**在初始屏幕上的线程中）

```
InputStream input = null;
FileOutputStream output = null;
try {
   URL url = new URL("http://test.com/test.xml");
   input = url.openConnection().getInputStream();
   output = openFileOutput("test.xml", Context.MODE_PRIVATE);

   int read;
   byte[] data = new byte[1024];
   while ((read = input.read(data)) != -1)
       output.write(data, 0, read);

   output.close();
   input.close();

} catch (MalformedURLException e) {
   e.printStackTrace();
} catch (IOException e) {
   e.printStackTrace();
} finally {
    Intent i = new Intent(SplashScreen.this, MainMenu.class);
   }

   startActivity(i);
   finish();
} 
```

我首先保存正确吗？我错过了什么？

在这个问题中，您可以看到我正在尝试做什么[Android 数据处理和 XML 版本控制概念](https://stackoverflow.com/questions/15039269/android-data-handling-and-xml-version-control-concept) 最后我想将 a`URL`或 a传递`FilePath`给`AsyncTask`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:59:29.667

由于甚至没有人看过这个问题（这里有什么交易？？）我在几个小时后使用：

```
...
FileInputStream fis =  openFileInput("test.xml");
InputStreamReader in = new InputStreamReader(fis);

xr.parse(new InputSource(in));
... 
```

# javascript - Selenium WebDriverJs 无法使用 iOS 创建新客户端

> ID：15075816
> 
> 赞同：2
> 
> 时间：2013-02-25T20:24:15.137
> 
> 标签：javascript, ios, selenium, selenium-webdriver

我正在尝试将 Selenium WebDriverJS 与 iOS 浏览器一起使用。不幸的是，这不起作用，因为我需要这样做。

[我已经按照iPhoneDriver wiki page](http://code.google.com/p/selenium/wiki/IPhoneDriver)中的描述设置了“iWebDriver”项目。我已经复制了python脚本并且它有效。即使是一个小的 nodeJS 项目也可以工作，但是当我尝试从浏览器运行它时，Firefox 给了我以下错误消息。

> 错误：无法为此浏览器创建新客户端。尚未定义 WebDriver 会话 ID。

我试图运行的代码：

```
var driver = new webdriver.Builder().
    usingServer('http://localhost:3001/wd/hub').
    withCapabilities({'browserName': 'iPhone'}).
    build();

driver.get('http://www.google.com');
driver.quit(); 
```

[我已经编译了 WebDriverJs wiki page](http://code.google.com/p/selenium/wiki/WebDriverJs)中描述的webdriverjs 。是的，webdriver.js 已加载；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T17:36:58.187

所以我深入研究，我认为我有一个解决方案。这似乎是一个 hack，但对于 firefox 来说，我正在制作的 firefox 扩展到目前为止工作得非常好。

我编辑了`webdriver.js`文件`webdriver.Builder.prototype.build`

```
webdriver.Builder.prototype.build = function() {
  var a;
//  if(webdriver.FirefoxDomExecutor.isAvailable()) {
//    return a = new webdriver.FirefoxDomExecutor, webdriver.WebDriver.createSession(a, this.getCapabilities())
//  }
  a = new webdriver.http.CorsClient(this.getServerUrl());
  a = new webdriver.http.Executor(a);
//  if(this.getSession()) {
//    return webdriver.WebDriver.attachToSession(a, this.getSession())
//  }
//  throw Error("Unable to create a new client for this browser. The WebDriver session ID has not been defined.");
  return webdriver.WebDriver.createSession(a, this.getCapabilities());
}; 
```

基本上我强迫它创建一个会话，不知道为什么`FirefoxDomExecutor`需要，因为它在 Firefox 和 chrome 上工作得很好，我做了一些更改。无论如何，感谢您让我走上正轨，希望这对其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T16:17:19.870

似乎 WebDriverJS 在不在 Node.js 中运行时无法创建新会话。

您必须手动创建一个 Session 并为 WebDriverJS 提供 session-id 作为**wdsid** GET-Parameter （例如`urltowebdriver.html?wdsid=someID&wdurl=localhost:9000`）。

# complexity-theory - 复杂性类的项目建议

> ID：15075819
> 
> 赞同：-1
> 
> 时间：2013-02-25T20:24:33.963
> 
> 标签：complexity-theory, p-np

我正在参加关于复杂性和解决问题的 400 级课程。最后一个项目是实现一个与 P 和 NP 相关的问题。不幸的是，老师对项目的界限一直含糊不清。

所以我只是想我会在这里询问是否有人对我可能实施的中等难度问题提出建议。我知道这个问题很模糊，但我很想知道是否有人有最喜欢的问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:10:18.383

尝试**TSP、VRP 或课程安排**。

[您将在这本元启发式框架手册](http://docs.jboss.org/drools/release/5.5.0.Final/drools-planner-docs/html_single/index.html#useCasesAndExamples)中找到这些问题定义和数据集的链接。

# ruby-on-rails - Activeadmin：销毁/添加 has_many 关系内容

> ID：15075824
> 
> 赞同：0
> 
> 时间：2013-02-25T20:24:47.573
> 
> 标签：ruby-on-rails, controller, activeadmin

我在关系中有这 2 个模型（echanges 和 echange_answers）：

> has_many / 属于_to

```
#Model Echange
class Echange < ActiveRecord::Base
  attr_accessible :content, :title
  validates_presence_of :title, :content, :section_id
  validates :section_id, numericality: { only_integer: true }
  validates :title, length: { :minimum => 3 }
  validates :content, length: { :minimum => 3 }

  belongs_to :section
  belongs_to :user
  has_many :echange_answers
end 
```

和

```
#Model EchangeAnswer
class EchangeAnswer < ActiveRecord::Base
  attr_accessible :content

  validates_presence_of :content
  validates :content, length: { :minimum => 3 }

  belongs_to :user
  belongs_to :echange
end 
```

这是我在活动管理员中得到的：所有“echanges”的列表

![换货清单](../Images/cbece7e3aec7359180d230835cc346f6.png)

这是其中一个 echange 的展示。我在页面上打印与此 echange 有belongs_to 关系的所有echange_answer。 ![显示交换页面](../Images/dda0d907e1363c2f0c717a1e2bc1de65.png)

我想对该表中的每个 echange_answer 设置一个删除/编辑操作，并且管理员可以添加一个新的 echange_answer。我想知道最好的方法是否不是创建新的 active_admin:resource 并删除“索引”页面或在 activeadmin 中自定义 echange 页面。如果自定义是最好的方法，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:53:33.087

由于您已经拥有 ActiveAdmin，我将通过为 echange_answer 创建资源并让 ActiveAdmin 为您处理所有视图和操作来使用它。在您的 ActiveAdmin echange_answers 控制器中，只需确保您有下面的行，然后您就不必担心有任何不必要的控制器操作。

```
 actions :only => [:create, :edit, :destroy] 
```

# html - 如何添加过渡/效果来显示：块

> ID：15075825
> 
> 赞同：3
> 
> 时间：2013-02-25T20:24:50.920
> 
> 标签：html, css, css-transitions

我有一个这样的div：

```
.x{
   ...
} 
```

还有一种最初隐藏的“子菜单”：

```
.x_submenu {
   ...
   display:none;
   ...
} 
```

只有当用户在 x div 上时子菜单才可见：

```
div.x:hover .x_submenu {display:block; } 
```

现在，我想通过事务或使可见性更“慢”的效果使其可见。有没有办法实现这个目标，可能是跨浏览器的解决方案？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:36:55.437

最好的选择是不透明度：

HTML：

```
<p><b>Note:</b> This example does not work in Internet Explorer.</p>

<div></div>

<p>Hover over the div element above, to see the transition effect.</p> 
```

CSS：

```
div
{
opacity:0;
width:100px;
height:100px;
background:red;
transition:width 2s;
-moz-transition:width 2s; /* Firefox 4 */
-webkit-transition:width 2s; /* Safari and Chrome */
-o-transition:width 2s; /* Opera */
}

div:hover
{
opacity:100;
width:300px;
} 
```

见演示：http: [//jsfiddle.net/wyKyT/](http://jsfiddle.net/wyKyT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:34:33.853

您将无法在“显示”属性上进行转换。您必须使用 'opacity' 属性来实现这一点。

相关 ：

*   [显示器上的转换：属性](https://stackoverflow.com/questions/3331353/transitions-on-the-display-property)
*   [-webkit-transition 带显示](https://stackoverflow.com/questions/4178567/webkit-transition-with-display)

[吉姆杰弗斯](https://stackoverflow.com/users/230649/jim-jeffers)解释说：

要解决此问题，请始终允许元素显示块，但通过调整以下任何方式隐藏元素：

```
Set the height to 0.
Set the opacity to 0.
Position the element outside of the frame of another element that has overflow: hidden. 
```

并且，为了您的过渡，使其成为“跨浏览器”：

```
.transition {
 -webkit-transition: all 0.3s ease-out;  /* Chrome 1-25, Safari 3.2+ */
     -moz-transition: all 0.3s ease-out;  /* Firefox 4-15 */
       -o-transition: all 0.3s ease-out;  /* Opera 10.50–12.00 */
          transition: all 0.3s ease-out;  /* Chrome 26, Firefox 16+, IE 10+, Opera     12.50+ */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:34:10.397

不，那里没有。CSS 转换仅适用于标量值，因此它们可以应用于处理尺寸、颜色（因为这些也以 rgb 值表示）、不透明度等的属性。其他值（如 display、float、font-family 等）无法转换因为没有可能的中间状态可以显示。您将不得不回退到使用 JavaScript 或尝试使用类似的属性`opacity`或应用类似`height: 0`的变通方法`height: 100px`

# facebook - 将地点添加到 Facebook 提要对话框

> ID：15075827
> 
> 赞同：0
> 
> 时间：2013-02-25T20:25:02.530
> 
> 标签：facebook, facebook-graph-api, dialog, feed

发布到 /me/feed 时，可以使用“place”添加位置的页面 id。这会导致一个帖子作为签入，显示带有位置地图的消息。

将“地点”作为查询字符串参数添加到 facebook.com/dialog/feed 的提要表单中似乎不会将位置添加到帖子中。有没有办法使用 /dialog/feed 并添加位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:29:30.973

请提供您的代码。

这是我的代码，它正在工作：

```
$post_url = '/' . $user . '/feed';

$msg_body = array(
    'message' => 'message for user timeline',
    'place' => '106339232734991',
);

// posting on user page feed
$postResult = $facebook->api($post_url, 'post', $msg_body ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:59:39.733

在FB群讨论之后，看起来只有消息，图片和地点工作才能与位置进行签到。如果添加其他参数，如标题或链接，它会变成没有位置的常规提要帖子。这是不幸的，因为没有返回应用程序的链接，几乎没有动力从应用程序进行签到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T14:12:14.907

[https://developers.facebook.com/bugs/428651263853608](https://developers.facebook.com/bugs/428651263853608) - “javascript ui feed 对话框 - place 参数不起作用”</p>

脸书的回应：

> 'place' 不是[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)支持的参数。
> 
> 状态更改为**按设计**

# c# - 访问 Visual Studio 资源

> ID：15075829
> 
> 赞同：0
> 
> 时间：2013-02-25T20:25:04.467
> 
> 标签：c#, visual-studio-2010

我无法引用我的 VS 资源目录中的图像。

根据我[在这里](http://msdn.microsoft.com/en-us/library/7k989cfy%28v=vs.80%29.aspx)和[这里](https://stackoverflow.com/questions/10368025/visual-studio-cannot-access-resources-from-code)阅读的内容，我这样做：

> MyProject.Properties.Resources.Append_16x16

然后我将构建操作设置为“编译”。

但随后这一行在编译时失败：

```
this._appendToolStripButton.ImageTransparentColor = MyProject.Properties.Resources.Append_16x16; 
```

我可以访问的唯一文件（它们显示在 IntelliSense 中）是我没有从另一个项目复制的文件。

奇怪的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:55:40.167

事实证明，以这种方式引用图像，您必须在解决方案资源管理器中单击该项目的属性目录，单击“打开”，单击“资源”选项卡，然后单击“添加资源”。

见[这里](http://msdn.microsoft.com/en-us/library/7k989cfy%28v=VS.80%29.aspx)。

VS 的这种设计，您可以通过在解决方案资源管理器中单击资源目录来添加这些文件，但路径引用不起作用。

# windows-8 - 努力通过 MVVM Light 传递消息

> ID：15075830
> 
> 赞同：0
> 
> 时间：2013-02-25T20:25:10.250
> 
> 标签：windows-8, mvvm-light

我有两个视图及其对应的 ViewModel，我想使用 MVVM Light 将文本从一个视图发送到另一个视图，如下所示

在第一个视图模型中，我正在调用以下方法

```
public void NavigatePage()
    {
        string temp = "temp value";

        Messenger.Default.Send("temp");

        Frame frame = Window.Current.Content as Frame;

        if (frame != null) frame.Navigate(typeof(MyPage), temp);
    } 
```

在第 2 页视图模型中，我有以下代码

```
public MyViewModel()
    {
        Messenger.Default.Register<string>(this, MessageReceived);
    }
    private string test;

    public string Test
    {
        get { return test; }
        set { test = value; RaisePropertyChanged("Test");}
    }

    private void MessageReceived(string message)
    {
        Test = message;
    } 
```

当我调试我的代码时，这个视图模型的 ctor 被调用但 MessageReceived 没有被调用，因此属性 Test 永远不会被设置，我遗漏了一些东西，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:41:28.847

是`SecondViewModel`在您发送消息之前实际创建的吗？您可以在`ViewModelLocator`类中指定它。

在定位器中，您必须注册您的视图模型并在应用程序启动时创建它。像这样：

```
SimpleIoc.Default.Register<SecondViewModel>(true); 
```

使用`true`参数`SecondViewModel`将在应用程序启动时创建！:)

# android - 手机上的 Android 更改角度开关活动

> ID：15075832
> 
> 赞同：0
> 
> 时间：2013-02-25T20:25:18.463
> 
> 标签：android

我试图找到解决方案，但我什至不知道如何称呼这个操作，也许我的问题标题错误。无论如何，当手机改变角度时，我想做一些事情（切换活动，显示隐藏任何元素），比如我将手机倒置或只是改变角度。就像我们在 chake listener 上做某事一样。有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:05:36.040

我有一个应用程序需要根据方向（纵向/横向）运行不同的活动。我所做的是创建一个中间类/活动来检查设备的方向，然后将其路由到相应的活动。

```
int orientation = getResources().getConfiguration().orientation;//get current orientation

if (orientation == Configuration.ORIENTATION_PORTRAIT ) {
        //portrait layout        
    } else {
        //landscape layout
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:27:09.693

您需要覆盖 Activity 的[`onConfigurationChanged`](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)方法。然后，您添加`android:configChanges="orientation"`到您的清单。

```
<activity android:label="@string/app_name" 
        android:configChanges="orientation|keyboardHidden" 
        android:name=".your.package"> 
```

# java-me - 哪些支持 JavaME 的手机具有 JSR-253（如果有）？

> ID：15075834
> 
> 赞同：2
> 
> 时间：2013-02-25T20:25:19.330
> 
> 标签：java-me, midp, midp-2.0

我需要创建一个手机应用程序来捕捉来电的电话号码。我实际上不需要对调用本身做任何事情。只要抓住电话号码。我首先简单地查看了 PushRegistry，并尝试了 tel:// 协议（因为这是使用 platformRequest 进行调用的方法）。但它不会安装在我的索尼爱立信 Aino 上，所以我想不能那样做。

然后我了解到它似乎可以使用 JSR-253 来完成。但是我很难找到任何支持 JSR-253 的手机。

PhoneArena.com 称索尼爱立信 Hazel 支持 JSR-253： [http ://www.phonearena.com/phones/Sony-Ericsson-Hazel_id4276/fullspecs](http://www.phonearena.com/phones/Sony-Ericsson-Hazel_id4276/fullspecs)

但是索尼爱立信自己的 Hazel 白皮书没有提到 JSR-253：http: [//developer.sonymobile.com/downloads/whitepapers/sony-ericsson-hazel-white-paper/](http://developer.sonymobile.com/downloads/whitepapers/sony-ericsson-hazel-white-paper/)

我在想也许有包含 JSR-253 的固件更新？我没有索尼爱立信 Hazel 可供测试，如果它不起作用，我也不想买。

无论如何，问题是：如何找到支持 JSR-253 的手机列表？

谢谢

# javascript - JQuery 将多个下拉选项设置为选中

> ID：15075842
> 
> 赞同：5
> 
> 时间：2013-02-25T20:25:58.080
> 
> 标签：javascript, jquery

我遇到了一个有趣的小问题，可能只是我很傻。

我有一个看起来有点像这样的选择框：

```
<select id="dom_" name="dom_">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    ... 
```

这些选项代表一个月中的几天，最多 31 天。

现在，我试图在加载包含信息的表单（用于编辑）时选择一个默认值，但我无法让它正常工作。

我尝试使用我在之前的一些 SO 问题中找到的这个片段：

```
$("#dom_ option[value$='" + 2 + "']").attr('selected', true); 
```

该行运行并将第二个选项设置为选中，但它也将其他 2X 或 X2 选项设置为选中。例如，12 和 22 也将设置为选中。

但是，如果我使用这个：

```
$("#dom_ option").each(function()
{
    if ($(this).val() == 2)
    {
        $(this).attr('selected', true);
    }
    else
    {
        $(this).attr('selected', false);
    }

}); 
```

然后将选择正确的选项，但`SELECT`不会更新该框。

我必须手动调用`$("#dom_").val(2);`后记来更新盒子。

所以，我的问题是，为什么第一个选项不起作用，为什么第二个不能自动刷新？

`SELECT`另外，通过一个对象`$("#dom_")`并调用`.val`它与选择一个选项并将其设置`selected`为 true之间到底有什么区别？这两个都发回相同的`POST`还是`GET`数据？

这是一个[jsFiddle](http://jsfiddle.net/xMC6x/)，希望能证明这一点。

如果有帮助，我使用的是 JQuery 1.6.4，但我可以在 jsFiddle 的一些较新版本上重现相同的问题。

如果这个问题太简单，我很抱歉。当谈到 JavaScript 和 JQuery 时，我仍然是个业余爱好者。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T20:27:19.300

您正在使用带有 ( ) 的结尾`$=`，而不是仅使用`value=`which 只会与您想要的值完全匹配。

```
$("#dom_ option[value='" + 2 + "']").attr('selected', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:30:14.117

这听起来像是一个足够简单的设计，您不需要在 javascript 中执行此操作（即，如果它是静态内容并且您只需要一个简单的默认值）。您知道您可以将“选定”属性应用于您的 html 选项标签吗？

```
<select id="dom_" name="dom_">
    <option value="1">1</option>
    <option value="2" selected="selected">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T20:33:45.007

***两者现在都应该工作***，

1) *根据 Jquery `Ends With Selector`( [[name$="value"]](http://api.jquery.com/attribute-ends-with-selector/) ) 将选择具有指定属性且值恰好以给定字符串结尾的元素。*

```
 $("#dom_ option[value='" + 2 + "']").attr('selected', true); 
```

*2）在第二个例子中，`else`大小写是不必要的，因为它会重置`selected`选项*

```
$("#dom option").each(function()
{
    if ($(this).val() == 2)
    {
        $(this).attr('selected', true);
    }
}); 
```

*检查这个 Jsfiddle* [http://jsfiddle.net/NUTWR/](http://jsfiddle.net/NUTWR/)

# playframework - Play Framework 2.1 的“播放停止”是什么？

> ID：15075843
> 
> 赞同：16
> 
> 时间：2013-02-25T20:26:10.223
> 
> 标签：playframework, playframework-2.1

`play stop`Play 2.1相当于什么？

如果我这样做`play start`了，我如何干净地终止该过程？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-28T07:36:40.900

我`Windows`正在使用以下脚本来终止当前正在运行的播放服务器

```
@echo off
if exist RUNNING_PID (
  setlocal EnableDelayedExpansion
  set /p PLAY_PID=<RUNNING_PID
  echo killing pid !PLAY_PID!
  taskkill /F /PID !PLAY_PID!
  del RUNNING_PID
  endlocal
) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-25T20:45:44.133

如[文档中所述](http://www.playframework.com/documentation/2.1.0/Production)：

> 当您运行 start 命令时，Play 会创建一个新的 JVM 并运行默认的 Netty HTTP 服务器。标准输出流被重定向到 Play 控制台，因此您可以监控其状态。
> 
> 服务器的进程 ID 在引导时显示并写入 RUNNING_PID 文件。要杀死正在运行的 Play 服务器，只需向进程发送 SIGTERM 以正确关闭应用程序即可。
> 
> 如果您按 Ctrl+D，Play 控制台将退出，但创建的服务器进程将继续在后台运行。然后关闭分叉的 JVM 的标准输出流，并且可以从 logs/application.log 文件中读取日志记录。

所以我认为你必须使用`play run`而不是`play start`. 然后你就可以`Ctrl+D`用来停止播放了。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-01-18T07:15:39.040

您可以运行此脚本：

```
kill $(cat /your-play-project-path/target/universal/stage/RUNNING_PID) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-06-25T01:00:23.057

如果您使用该`play start`命令运行您的应用程序，则从应用程序目录发出该`play stop`命令确实有效，并将停止正在运行的应用程序服务器。

我在 Play 2.1.1 中验证了此功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-11T07:33:44.620

[为此，您可以按照此处所述](http://www.technowise.in/2014/12/play-framework-activator-stop-command.html)修改 build.sbt 文件。

```
TaskKey[Unit]("stop") := {
  val pidFile = target.value / "universal" / "stage" / "RUNNING_PID"
  if (!pidFile.exists) throw new Exception("App not started!")
  val pid = IO.read(pidFile)
  s"kill $pid".!
  println(s"Stopped application with process ID $pid")
} 
```

但是，这只适用于 *nix 系统。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T20:27:13.637

只需`Ctrl + D`在控制台窗口中按。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-13T08:27:55.883

您可以致电`<your_server_url>/@kill`，例如：`http://localhost:9022/app3/@kill`

# javascript - javascript和iframe的麻烦

> ID：15075849
> 
> 赞同：0
> 
> 时间：2013-02-25T20:26:50.020
> 
> 标签：javascript, html, iframe

我正在使用 js 和 html，所有客户端。我有以下情况...我有一个 html 表单（在 index.html 中），其中包含一些输入和一个提交按钮。除此之外，该表单还包含一个 iframe 标记，该标记引用另一个包含其他 html 表单的页面 (other.html)。问题是在另一个名为 other.html 的页面中，我在保存一些信息的表单标记内有一个文本输入 (name="info")。

现在我要做的是用 index.html 的形式提交这个信息的输入值。

示例 index.html：

```
<html>
    <body>
        <form method="post" action="aphpfile.php">
            <input type="text" name="a"/>
            <input type="text" name="b"/>
            <input type="text" name="c"/>
            <iframe id="other1" width="408" height="200" frameborder="0" 
                scrolling="no" marginheight="0" 
                marginwidth="0" src="other.html"></iframe>
            <input type="submit" value="submit"/>
        </form>
    </body>
</html> 
```

示例 other.html：

```
<html>
    <script type="text/javascript">
        function setInfo() {
            document.getElementById("info").value = "this is the info";
        }
    </script>
    <body>
        <form>
            <input type="text" id="info" name="info"/>
        </form>
        <input type="button" onclick="setInfo();" value="setInfo"/>
    </body>
</html> 
```

所以从 aphpfile.php 我想这样做：

```
$a = $_POST['a'];
$b = $_POST['b'];
$c = $_POST['c'];
$info = $_POST['info'];
echo $a . "," . $b . "," . $c . "," . $info; 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:45:49.930

解决了许多 iframe。下面的代码写在一个函数中，该函数在提交到 aphpfile.php 的表单时被调用。我希望有人觉得这很有用:)

```
var iframe = document.getElementById('other1');
        var innerDoc;
        var data;
        var name;
        var htmlData="";
        var i=1;
        while(iframe != null)
        {
            innerDoc = iframe.contentDocument || iframe.contentWindow.document;
            data=innerDoc.getElementById("info").value;
            name="info"+i;
            htmlData+="<input type='hidden' name='"+name+"' value='"+data+"'/>";
            i++;
            iframe = document.getElementById('other'+i);
        }
        document.getElementById("hiddens").innerHTML=htmlData; 
```

而且ofc有一个

```
<div id="hiddens"></div> 
```

在 index.html 中的表单内

# android - Android 均衡器 - getBand()

> ID：15075850
> 
> 赞同：1
> 
> 时间：2013-02-25T20:26:56.387
> 
> 标签：android, equalizer

我正在尝试使用 getBand() 方法，但是当代码运行时，我得到了 IllegalArgumentException。

```
public void setupEqualizer(){

    equalizer = new Equalizer(0, mediaPlayerSessionId);
    minEQLevel = equalizer.getBandLevelRange()[0];
    maxEQLevel = equalizer.getBandLevelRange()[1];

    band01 = equalizer.getBand(50000);

} 
```

getBand 方法的参数以毫赫兹为单位，以防我得到对 50 Hz 频率影响最大的频段。

为什么我会收到 IllegalArgumentException？

Tks

# function - 对不同的子功能使用相同的图

> ID：15075852
> 
> 赞同：0
> 
> 时间：2013-02-25T20:27:00.083
> 
> 标签：function, matlab, plot, matlab-figure

我正在递归调用一个函数，我希望它们都绘制在同一个图中。当我尝试创建一个处理程序并使用参数传递它时，我收到以下错误：

```
??? Error using ==> set Invalid handle object.

Error in ==> triangle at 23
set(h, 'xdata', [x1,x3], 'ydata', [y1,y3]); 
```

在调用我的函数之前，我创建了一个处理程序并设置了我的首选项：

```
h = plot([0,1],[0,0]);
set(h, 'erasemode', 'none');
triangle(0,0,1,0,10,0,h) 
```

这是我的功能：

```
function triangle(x1,y1,x2,y2, deepth , n,h)
%Paints a equilateral triangle for two given Points
if depth > n

    shg
    clf reset

    %vector
    v_12 = [x2-x1;y2-y1];

    %rotate vector
    g_uz = [0.5,-sqrt(3)/2;sqrt(3)/2, 0.5];
    p = g_uz * v_12;
    x3 = p(1) + x1;
    y3 = p(2) + y1;

    axis([-10 10 -10 10]);
    axis off

    drawnow

    set(h, 'xdata', [x1,x3], 'ydata', [y1,y3]);
    drawnow

    set(h, 'xdata', [x2,x3], 'ydata', [y2,y3]);
    drawnow

    v_13 = [x3-x1,y3-y1];
    v_23 = [x3-x2,y3-y2];

    % 1-3 triangle
    triangle(x1+v_13(1)/3,y1 + v_13(1)/3, x1+ 2*v_13(1)/3,y1 + 2*v_13(1)/3, tiefe, n+1 );
end 
```

你知道有什么解决办法吗？如何以对象形式绘制我调用的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:37:06.593

第`clf`6 行清除图形，删除要用作图形输出的行。

删除该行，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:37:41.617

尝试使用`hold all`. 它使您可以`plot`在图中新建行而不清除现有行。

```
figure
hold all
triangle(...) 
```

在你的函数里面调用 plot.

```
plot(x, y)
plot(x, z) 
```

# hadoop - Hadoop 和亚马逊网络服务

> ID：15075853
> 
> 赞同：6
> 
> 时间：2013-02-25T20:27:01.617
> 
> 标签：hadoop, amazon-web-services

我想在线自学 Hadoop 和 Amazon Web Services。网络上有什么好的大学课程或教程吗？我可以在 Amazon 上找到有关 Hadoop 或 AWS 的书籍，但我想亲自尝试和学习。

PS 我浏览了非常有用的 Yahoo Hadoop 教程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T22:15:04.587

对于 hadoop，AWS 团队有关于 Hadoop 在 AWS 和 EMR 上的生态系统的精彩演讲： [http ://www.youtube.com/watch?v=hrRUAvKVfxw](http://www.youtube.com/watch?v=hrRUAvKVfxw)

然后是他们关于 EMR 培训的一系列视频教程：

1.  [http://www.youtube.com/watch?v=RlKndm22bXw](http://www.youtube.com/watch?v=RlKndm22bXw)
2.  [http://www.youtube.com/watch?v=y8YM2rAsAhY](http://www.youtube.com/watch?v=y8YM2rAsAhY)
3.  [http://www.youtube.com/watch?v=cAZur5maWZE](http://www.youtube.com/watch?v=cAZur5maWZE)
4.  [http://www.youtube.com/watch?v=yN0TPbj23dY](http://www.youtube.com/watch?v=yN0TPbj23dY)
5.  [http://www.youtube.com/watch?v=5lA93QzUny8](http://www.youtube.com/watch?v=5lA93QzUny8)
6.  [http://www.youtube.com/watch?v=ZSu8N2PoVbM](http://www.youtube.com/watch?v=ZSu8N2PoVbM)
7.  [http://www.youtube.com/watch?v=06rz0h5-arw](http://www.youtube.com/watch?v=06rz0h5-arw)
8.  [http://www.youtube.com/watch?v=o5D9dmZX9zo](http://www.youtube.com/watch?v=o5D9dmZX9zo)
9.  [http://www.youtube.com/watch?v=1IUokcqDRcQ](http://www.youtube.com/watch?v=1IUokcqDRcQ)
10.  [http://www.youtube.com/watch?v=5i20nf3Kyzg](http://www.youtube.com/watch?v=5i20nf3Kyzg)
11.  [http://www.youtube.com/watch?v=y4z6RxWAvqs](http://www.youtube.com/watch?v=y4z6RxWAvqs)

## **更新**：您也可以阅读这本书：[使用 Amazon Elastic MapReduce 学习大数据](https://rads.stackoverflow.com/amzn/click/com/1782173439)

Cloudera 团队支持部署到 AWS，并提供一系列文档。尝试在 google 上搜索 Cloudera 和 AWS，并在[此处](http://www.cloudera.com/content/cloudera-content/cloudera-docs/CM4Ent/latest/Cloudera-Manager-Installation-Guide/cmig_install_on_EC2.html)阅读文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T21:05:24.020

我发现从头开始使用 AWS 的最佳方法是遵循 Amazon 提供的文档和代码示例。他们的 YouTube 频道上也提供了大量的演练视频，尤其是在 Amazon re:Invent 大会之后。还有一些峰会即将举行。最重要的是，玩耍（在免费层内），犯一些错误，并从中获得乐趣！以下是一些应该有所帮助的链接：

[来自 Amazon](http://aws.amazon.com/aws-training/)
[AWS 文档的培训信息](http://aws.amazon.com/documentation/)
[示例代码和库](http://aws.amazon.com/code/)
[AWS YouTube 频道](http://www.youtube.com/user/AmazonWebServices)
[即将到来的 AWS 峰会信息](http://aws.amazon.com/aws-summit-2012/)

至于 Hadoop，不幸的是我不在循环中。如果我发现更多信息，我会四处询问并编辑我的答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-01T16:13:53.053

这是来自 Cloudera 的一篇文章，它将引导您在 EC2 上设置[Hadoop](http://blog.cloudera.com/blog/2012/10/set-up-a-hadoophbase-cluster-on-ec2-in-about-an-hour/)

Cloudera 现在正在更新他们的[Hadoop on EC2 文档](http://www.cloudera.com/content/cloudera-content/cloudera-docs/CM4Ent/latest/Cloudera-Manager-Installation-Guide/cmig_install_on_EC2.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-02T12:14:05.770

我想在@Sixty4Bit 的回答中发表评论，但我没有足够的声誉。

Cloudera 正在使他们的教程保持最新的 AWS 配置[这里](http://www.cloudera.com/content/cloudera-content/cloudera-docs/CM4Ent/latest/Cloudera-Manager-Installation-Guide/cmig_install_on_EC2.html)。

# ssis - 带有 SQL Server 目标的 TempDB 中的 SSIS 批量插入排序

> ID：15075854
> 
> 赞同：0
> 
> 时间：2013-02-25T20:27:03.140
> 
> 标签：ssis, sql-server-2012

我有一个使用部署到 SQL Server 2012 实例的 SQL Server Data Tools 创建的 SSIS 包，该实例使用 SQL Server Destination 对象将大量数据从一个数据库移动到同一服务器上的另一个数据库。

我正在使用带有 SQL 查询的 OLE DB 源对象，该查询按我的登台表的聚集索引的顺序排序。我在高级编辑器中标记了 Source 对象，表明数据已排序，并且列的 SortKeyPosition 也设置为 1。我相信这应该避免碰到 TempDB，但在执行期间我仍然看到 TempDB 上有很多活动。该软件包是当前服务器上唯一运行的东西。

下面是包执行的过程。如果我在 OLE DB 目标中运行完全相同的包交换，则数据将直接进入 .mdf 文件，而 TempDB 上没有任何活动。该程序包使用 SQL Server 目标运行大约 30 分钟，使用 OLE DB 目标运行大约 20 分钟。我只会使用 OLE DB 目标，但它偶尔会抛出这样的网络错误：“TDS 流中的协议错误”。

我已经阅读了很多关于这个问题的白皮书和文章，它们似乎都描述了我正在使用的过程，并且都建议使用 SQL Destination 对象而不是 OLE DB 对象来提高性能。（例如：[http](http://sql10.blogspot.com/2010/07/ssis-check-list-for-minimally-logged.html) ://sql10.blogspot.com/2010/07/ssis-check-list-for-minimally-logged.html和[http://msdn.microsoft.com/en-us/library/dd425070(SQL .100).aspx](http://msdn.microsoft.com/en-us/library/dd425070(SQL.100).aspx) )。

步骤 1) 截断登台表

步骤 2) 禁用临时表上的所有非聚集索引

步骤 3) 从临时表中删除主键约束

步骤 4) 将数据复制到临时表

步骤 5) 启用临时表上的所有非聚集索引

步骤 6) 将主键添加回临时表

SQL 目标对象中是否有我丢失的设置或其他可能导致此活动的设置？提前感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:51:52.130

您的信息已过时 - 现在首选 OLE DB 目的地，既灵活又速度快，参考：

[http://www.mattmasson.com/index.php/2012/06/should-i-use-the-sql-server-destination/](http://www.mattmasson.com/index.php/2012/06/should-i-use-the-sql-server-destination/)

你的结果似乎证实了这一点。

# javascript - 转换和自动滚动 div

> ID：15075861
> 
> 赞同：1
> 
> 时间：2013-02-25T20:27:18.477
> 
> 标签：javascript, jquery, html, css

我创建了一个包含不同部分的 HTML 页面。每个部分都包含在一个 DIV 中。我的要求是在每个 div 之间进行转换。例如，几秒钟后，section1 模糊，section2 模糊，依此类推。现在在一个特定的部分中，我希望部分内容自动滚动，直到到达部分的末尾，从下到上。我能够在不同部分之间创建切换，但无法滚动每个部分的内容，例如，第一部分自动滚动，当到达部分末尾时，它才会转到另一个部分，然后滚动那个. 有人可以帮我吗？我已将我的代码粘贴在下面的链接中，

[http://pastebin.com/rE8h5NK0](http://pastebin.com/rE8h5NK0)

此外，我已经为每个部分标题提供了固定位置，但是当我最小化页面时，标题没有正确对齐。如果我没有修复它，它就不会在页面上正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:58:41.097

我建议在循环中运行 JQuery ，通过将' 高度减去容器高度与滚动量`scrollTop`相匹配来寻找滚动到达底部的时间：`div`

```
function scroll() {
    if ($('#div').scrollTop() == $('#div').height() - $('#container').height()) {
        scrollInterval.clearInterval();
        // Transition to next section
    } else {
        $('#div').scrollTop($('#div').scrollTop() + 1);
    }
}

var scrollInterval = setInterval(scroll,20 /* Scroll speed */); 
```

# uitableview - 自定义 uitableheader 视图

> ID：15075866
> 
> 赞同：0
> 
> 时间：2013-02-25T20:27:29.723
> 
> 标签：uitableview, frame

我想在我的 uitableviewheader 中放置一个自定义视图，这个自定义视图有一个 UILabel 和一个 UITextView，标签有一个固定的大小，而 uitextview 需要根据 uitextview 的内容进行更改。为此，我使用以下代码：

```
- (CGFloat) tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {

    return 100;
}
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

headerView = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,100)];
headerView.backgroundColor = [UIColor blueColor];

NSString *userString = [user username];
UILabel *userLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 40)];
[userLabel setTextAlignment:NSTextAlignmentCenter];
[userLabel setText:userString];
userLabel.backgroundColor = [UIColor redColor];
[headerView addSubview:userLabel];

UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(0, 40, 320, 60)];
NSString *postString = [currentPost objectForKey:@"postTextKey"];
textView.text = postString;

[headerView addSubview:textView];

CGRect frame = textView.frame;
frame.size.height = textView.contentSize.height;
textView.frame = frame;

frame = headerView.frame;
frame.size.height = textView.frame.size.height+40;
headerView.frame = frame;

self.tableView.tableHeaderView.frame = headerView.frame;

return headerView;

} 
```

问题是，如果 headerview 的高度正确，则 tableviewheader 是错误的。错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:38:38.513

1)`tableHeaderView`与节标题视图 ( `headerViewForSection:`)不同
2) 如果要更改高度，请在`- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`方法中指定它，然后`reloadData`在高度更改时调用该方法。

注意：你不想经常这样做。

# python - 无法使用 lambda 在 python 中过滤

> ID：15075867
> 
> 赞同：0
> 
> 时间：2013-02-25T20:27:30.747
> 
> 标签：python, lambda

这是python代码

```
languages = ["HTML", "JavaScript", "Python", "Ruby"]
print filter(lambda x: x == "Python",languages) 
```

输出是：

```
[u'Python'] 
```

来自哪里`u`以及如何避免它。

所需输出：

```
['Python'] 
```

***更新：：***

我在 code academy 上尝试过这个。我猜 dere 是他们软件中的一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:29:36.677

您的输入包含`unicode`文本，而不是`str`文本。`u''`表示`unicode`文字。

这可能是正常的，并且完全取决于您*从*`languages`何处获得列表。否则一切*正常*。

 **您链接到的 CodeAcademy 练习实际上已*损坏*。它向您显示 Python`str`输入，但它的输出使用`unicode`. 您需要将其报告为错误。

您可以通过将所有内容映射到 a 来解决该错误`str`：

```
print filter(lambda x: x=='Python', map(str, languages)) 
```

或通过将*输出*映射到：`filter``str()`

```
print map(str, filter(lambda x: x=='Python', languages)) 
```

这适用于**这种情况**，因为输入仅使用 ASCII 字符。**通常**，您会通过指定编码`unicode`来显式编码，请参阅[Python Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)。`str`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:46:17.880

通过以下方式进行直接转换：

```
languages = ["HTML", "JavaScript", "Python", "Ruby"]
flt = filter(lambda x: x == "Python",languages)
print [str(X) for X in flt] 
```

输出

```
['Python'] 
```

是的，简单`str()`的就是做转换。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T20:31:05.427

`u`代表 unicode，您可以将其转换为普通字符串`str(filter(...))`**

# delphi - Delphi：CreateProcess + WaitForSingleObjects + DDE = 15 秒延迟

> ID：15075869
> 
> 赞同：3
> 
> 时间：2013-02-25T20:27:43.363
> 
> 标签：delphi, subprocess, wait, dde

我遇到了有趣的问题。

我有一个从 DDE 服务器读取一些值的 DDE 客户端。当我从 Delphi 启动这个客户端，或者在 exe 上使用 dblclick 时，结果立即出现。

但是：当我从 Indy TCPServer 的线程或主应用程序启动它时，我得到了 15 秒的延迟。

我使用这段代码来启动子进程：

```
function StartAndWaitProcess
  (CmdLine : string='';
  CmdShow : integer = SW_SHOW;
  TimeOut : longint = -1) : Int64;
var
  SInfo: TStartupInfo;
  PInfo: TProcessInformation;
  ExitCode : Cardinal;
begin
    Result := -1;
    FillChar(SInfo,SizeOf(TSTartupInfo),0);
    with SInfo do begin
        cb := sizeof(TStartupInfo);
        dwFlags := STARTF_USESHOWWINDOW;
        wShowWindow := CmdShow;
    end;
    if not CreateProcess(nil, PChar(CmdLine),nil,nil,False,
        NORMAL_PRIORITY_CLASS,nil,nil,SInfo,PInfo) then Exit;
    if TimeOut > 0 then begin
        if WaitForSingleObject(PInfo.hProcess, TimeOut) <> WAIT_OBJECT_0 then begin
            TerminateProcess(PInfo.hProcess, 0);
            Exit;
        end
    end else begin
        WaitForSingleObject(PInfo.hProcess, INFINITE);
    end;
    GetExitCodeProcess(PInfo.hProcess, ExitCode);
    Result := ExitCode;
end; 
```

我有什么奇怪的？

如果我不等待结束，那么子进程的运行性能与我从普通应用程序运行时的性能相同，所以我立即得到结果并且窗口很快消失。

但是，如果我等待主人的客户结束，我会延迟 15 秒。

我记录了客户端过程的时间，这个 dde ​​过程通过了 15 秒....

[Delphi：来自 Indy TCPServer 线程的 DDE 调用](https://stackoverflow.com/questions/15066705/delphi-dde-call-from-indy-tcpserver-thread)

所以我不明白为什么 WaitForS 在调用 ddelcient.exe 时会导致速度问题？

主进程的 WaitForS 如何减慢子进程的 dde ​​调用速度？

你对这个问题有什么想法吗？感谢您提供任何信息，链接，建议！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T21:59:55.503

DDE 对窗口消息进行操作。如果调用线程接收到任何 DDE 消息（例如来自已启动进程的消息）但不处理它们，则调用`WaitForSingleObject()`可以在整个系统中阻塞 DDE。因此，您的 15 秒延迟可能是由于您的线程意外阻塞了 DDE 操作，直到它在另一端超时。

你有几个选择：

1.  让你的线程调用`OleInitialize()`，它会默默地为你处理 DDE 问题。

2.  使用您的等待代码`MsgWaitForMultipleObjects()`，而不是`WaitForSingleObject()`这样您就可以在等待时发送任何收到的消息。

3.  使用`ShellExecuteEx()`而不是`CreateProcess()`指定`SEE_MASK_NOASYNC`标志，因此操作系统知道调用线程没有消息循环来处理 DDE 消息。

# c - 循环数组实现

> ID：15075873
> 
> 赞同：6
> 
> 时间：2013-02-25T20:27:54.200
> 
> 标签：c, arrays, circular-buffer

到目前为止，这是我对循环数组的实现。它应该存储最后输入的 5 个命令，通过输入第 6 个命令代替第 5 个命令并丢弃第 1 个命令。到目前为止，我所做的是能够存储 5 个命令并将它们打印出来。在第 6 个命令上，我注意到它位于 的第二个位置 ( `k=1`) `historyArray`，但是在调试时，`k`它等于`0`至少会将最后一个命令推到顶部。如果你能让我再次走上正轨，我将不胜感激。这是代码的一部分。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main (int argc, char *argv[])
{
    int i=0; 
    int j=0; 
    int k=0;
    int tempIndex = 0;
    int elementCounter = 0;

    char inputString[100];
    char *result=NULL;
    char delims[] = " ";
    char historyArray[5][20] = {0};
    char tokenArray[20][20] ;
    char hCommand[1][20];

    do
    {
         j = 0;

         printf("hshell>");
         gets(inputString);

         //skip writing "history" in historyArray
         if (strcmp(inputString,"history")!= 0)
         {
             strcpy (historyArray[k], inputString);
         }

         k = (k+1) % 5;
         if (elementCounter <= 5)
             elementCounter++;

         // Break the string into parts
         result = strtok(inputString, delims);

         while (result!=NULL)
         {
             strcpy(tokenArray[j], result);
             j++;
             result= strtok(NULL, delims);                  
         }

         if (strcmp(tokenArray[0], "exit") == 0)
             return 0;

         if (strcmp(tokenArray[0], "history") ==  0)
         {
             if (j>1)
             {
                 tempIndex = atoi(tokenArray[j]);
                 puts(tempIndex);
             }
             else
             {
                 for (i=0; i<elementCounter-1;i++)
                     printf("%i. %s\n", i+1, historyArray[i]);
             }
         }
         else
         {
             printf("Command not found\n");
         }
    } while (1);
} 
```

建议后（仍然不完整）：

```
 j = 0;
         //elementCounter = 0;
         printf("327>");
         gets(inputString);

         strcpy (historyArray[k], inputString);
         k = (k+1) % 5;

        if (elementCounter <= 5)
         {         
          elementCounter++;                
         } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T20:51:41.650

您描述的错误是由于以下几行而发生的：

```
k = (k + 1) % 5;
elementCounter++; 
```

我看到发生的事情：

```
k initial | calculation | k result  | elementCounter
0           (0 + 1) % 5   1 % 5 = 1   1
1           (1 + 1) % 5   2 % 5 = 2   2
...
4           (4 + 1) % 5   5 % 5 = 0   5
0           (0 + 1) % 5   1 % 5 = 1   5 
```

`k`据我所见，它的行为是应有的。但是，当`elementCounter`为 5 时，k = 1。

编辑：我看到的问题是最新命令被添加到位置`k`，而不是位置 0，根据您的实现，它是最近输入的命令（基于各种`if`子句，例如处理“退出”和“历史”命令）。使用您当前的算法尝试这组命令。我希望 [Command List] 列的内容是您将看到的...

```
Command # | Command Text | [Command List]
0           (null)         []
1           Login          [Login]
2           History        [Login,History]
3           Skynet         [Login,History,Skynet]
4           ps -al         [Login,History,Skynet,ps -al]
5           Skynet         [Login,History,Skynet,ps -al,Skynet]
6           Exit           [Exit,History,Skynet,ps -al,Skynet] 
```

您想要做的是复制元素 0-3，并将它们移动到元素 1-4。然后，将新命令插入到`historyArray`. 因此，在适当调整算法后，您的历史记录应如下所示：

```
Command # | Command Text | [Command List]
0           (null)         []
1           Login          [Login]
2           History        [History,Login]
3           Skynet         [Skynet,History,Login]
4           ps -al         [ps -al,Skynet,History,Login]
5           Skynet         [Skynet,ps -al,Skynet,History,Login]
6           Exit           [Exit,Skynet,ps -al,Skynet,History] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:14:16.783

这是我尝试过的，它似乎按预期工作：

```
 j = 0;
             //elementCounter = 0;
             printf("hshell>");
             gets(inputString);

             strcpy (historyArray[k], inputString);
             k = (k+1) % 5;

            if (elementCounter <= 5)
             {         
              elementCounter++;                
             }

             if (elementCounter ==6)
             {
                k = 5;
                for (i=0; i<5; i++)
                {
                    strcpy(historyArray[i], historyArray[i+1]);
                }
                 strcpy (historyArray[4], inputString);                 
             } 
```

基本上，这会检查是否`elementCounter`变为`6`（意味着已输入第 6 个命令）。如果是这样，它将设置`k=5`为在数组的最后一个位置输入命令，然后将前 4 个值向上移动一个位置，使索引 4 为空白。最后一步用命令填充位置。它不是最优雅的代码，但似乎可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-30T05:32:26.657

```
#include <assert.h>
#include <limits.h>
#include <math.h>
#include <stdbool.h>
#include <stddef.h>
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main()
{
    long n; 
    long k; 
    long q; 
    scanf("%ld %ld %ld",&n,&k,&q);
    long *a = malloc(sizeof(long) * n);
    long *b = malloc(sizeof(long) * n);
    for(long a_i = 0; a_i < n; a_i++)
    {
       scanf("%ld",&a[a_i]);
    }
    for(long i = 0; i < k; i++)
    {
        b[0] = a[n-1];
        for(long a_i = 1; a_i < n; a_i++)
        {
        b[a_i] = a[a_i-1];
        }
        for(long a_i = 0; a_i < n; a_i++) 
             a[a_i] = b[a_i];
    }
    for(long a0 = 0; a0 < q; a0++) 
   {
    long m; 
    scanf("%ld",&m);
    printf("%ld\n", b[m]);
    }
    return 0;
} 
```

# c# - 如何将 XML 文件上传到 TomCat？

> ID：15075877
> 
> 赞同：1
> 
> 时间：2013-02-25T20:28:13.403
> 
> 标签：c#, tomcat

我有一个运行几个 webapps 的 TomCat 服务器。

我想将一个 XML 文件上传到我的 TomCat 服务器上，这样我就可以使用我正在用 C# 开发的程序访问和下载该文件。

我做了很多搜索，但没有可靠的线索，那么如何将文件上传到 Tomcat 服务器以便可以访问它？

```
For example, I want my program to be able to use this: 
get file from(http://tomcat-ip:port/example/data.xml) 
```

谢谢你。

* * *

**找到解决方案：将文件放在 webapps/root 中，您将能够从 hostname:port/filename 访问文件**

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:39:07.663

如果你在 XAMPP 中运行你的 tomact 服务器，你可以把你的`xml`文件放在`C:\xampp\htdocs` 代码中：

```
URL oracle = new URL("http://localhost/data.xml);
BufferedReader in = new BufferedReader(
new InputStreamReader(oracle.openStream()));

while ((inputLine = in.readLine()) != null)
{
   Sysetm.out.println(inputLine);
}
in.close(); 
```

如果你也有 html 表，你可以制作数组：

```
Document doc = Jsoup.parse(inputLine);
            Elements tables = doc.select("table");
            for (Element table : tables) {
                Elements trs = table.select("tr");
                String[][] trtd = new String[trs.size()][];
                for (int i = 0; i < trs.size(); i++) {
                    Elements tds = trs.get(i).select("td");
                    trtd[i] = new String[tds.size()];
                    for (int j = 0; j < tds.size(); j++) {
                        trtd[i][j] = tds.get(j).text(); 
                    }
                }
                // trtd now contains the desired array for this table
                    System.out.println(trtd[column][row]);
            } 
```

# spring - 通过服务和部分响应暴露实体

> ID：15075878
> 
> 赞同：0
> 
> 时间：2013-02-25T20:28:16.300
> 
> 标签：spring, model-view-controller, rest

您如何看待通过服务公开域实体？我在一个应用程序中尝试过，但我得出的结论是向客户端公开域模型并不是一个好主意。

优点：

*   非常容易将数据从客户端传输到客户端
*   项目清单
*   (De)序列化非常简单：只需将 jackson 放在类路径中，它就会处理它。不需要额外的逻辑。
*   无需复制实体 POJO。至少在早期阶段，API 资源将与领域模型几乎相同。

缺点：

*   API 与模型紧密耦合，您无法在不影响 API 的情况下更改模型
*   部分回应。在某些情况下，您不想返回实体的所有字段，只返回其中的一部分。你如何实现它？

因此，让我们以下面的 REST 示例为例。以下 API 声明用户资源上的 GET 返回以下信息。获取/用户/12

```
{
    "firstName":"John",
    "lastName":"Poe"
    "address":"my street"
} 
```

通常，我会创建一个用户实体、一个返回用户的用户服务和一个 REST 控制器来为请求提供服务，如下所示：

```
@RequestMapping("/users/{id}")
public @ResponseBody User getUser(@PathVariable Long id) {
    return userService.findById(id);
} 
```

我应该避免返回用户实体吗？如果是，我应该创建另一个类并自己处理这个类和实体之间的映射吗？有这种模式吗？如何实现局部扩容？（即只返回用户的名字和姓氏）

PS：使用@JSONFilter 和 ObjectMapper 来完成部分响应对我来说似乎太重了，因为你失去了 spring 数据的美感

# c# - 如何使用 StringBuilder 写入 csv 文件而忽略 CSV 的第一行/行？

> ID：15075879
> 
> 赞同：1
> 
> 时间：2013-02-25T20:28:18.990
> 
> 标签：c#, csv, stringbuilder

由于这个 CSV 文件的第一行已经包含列名，所以我只想忽略第一行并使用 StringBuilder 从第二行开始编写。

```
StringBuilder sb = new StringBuilder();
            foreach (DataRow dr in distinctValues.Rows)
            {
                vendor = dr.ItemArray[0].ToString();
                for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
                {
                    if (vendor == ds.Tables[0].Rows[i]["VendorCode"].ToString())
                    {
                        for (int j = 0; j <= ds.Tables[0].Columns.Count - 1; j++)
                        {
                            if (j != 0)
                                sb.Append(",");
                            sb.Append(ds.Tables[0].Rows[i][ds.Tables[0].Columns[j]]);
                        }
                        sb.AppendLine();
                    }
                }
                File.WriteAllText(@csvFile, sb.ToString());
            } 
```

最后我明白我需要的不是写文件而是编辑文件。所以改变主意终于给出了答案。 **File.AppendAllText**是我真正需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:34:15.857

像这样的东西？

```
class Program
{
    private const string csv ="Header\r\nLine1\r\nLine2";
    static void Main(string[] args)
    {
        StringReader reader = new StringReader(csv);

        StringBuilder builder = new StringBuilder();
        bool header = true;
        while (true)
        {
            string line = reader.ReadLine();

            if(header)
            {
                header = false;
                continue;
            }

            if (line == null)
                break;
            builder.AppendLine(line);

        }

        Console.WriteLine(builder.ToString());
        Console.ReadLine();
    }
} 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:34:45.177

尝试

[File.AppendText("路径文件")](http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx)

或者

`FileMode.Append`通过`FileStream`

如果是`File.AppendText`，您的所有调用都`sb.AppendLine()`将变为`sw.WriteLine()`以下示例：

```
 // This text is always added, making the file longer over time 
 // if it is not deleted.

using (StreamWriter sw = File.AppendText(path)) 
{
    sw.WriteLine("This");
    sw.WriteLine("is Extra");
    sw.WriteLine("Text");
} 
```

# asp.net - 如何增加 ASP.NET HTTP 进程的超时？

> ID：15075880
> 
> 赞同：2
> 
> 时间：2013-02-25T20:28:27.537
> 
> 标签：asp.net, http, timeout

我们有一个调用存储过程的网页。存储过程大约需要 5 分钟才能运行。从 ASP.NET 调用时，它会在 2 分 40 秒后超时，并出现 HTTP 执行超时错误。

我尝试在 web.config 文件中将 HTTP 超时属性设置为：

```
<httpRuntime executionTimeout="600"> 
```

但这没有帮助。

任何想法表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:13:31.800

您不应该使用可能需要服务器响应时间如此长的页面来创建 Web 应用程序。作为一般规则，任何您知道将花费超过 10 秒左右的时间都应该作为异步过程来完成。您可能已经看到为长时间运行的进程显示“请稍候”屏幕的网站，大多数情况下，这些页面通过将长时间运行的作业委托给后台进程或消息队列来工作，然后轮询直到作业成功完成或出错.

我知道如果您以前没有这样做过，这似乎是一项艰巨的任务，但它确实是处理您所面临的场景的专业方法。在某些情况下，您的客户端可能正在使用代理服务器设置为中止 HTTP 请求的网络工作，而不管您将超时设置为什么。

这是一个过时的链接，我相信 .NET 框架已经引入了其他方法来做到这一点，但实际上我今天在某些场景中仍然使用以下方法。

[http://www.devx.com/asp/Article/29617](http://www.devx.com/asp/Article/29617)

# regex - excel正则表达式宏以匹配邮政编码并将其向右移动四列

> ID：15075882
> 
> 赞同：1
> 
> 时间：2013-02-25T20:28:54.447
> 
> 标签：regex, excel, vba

我正在处理一个大型 Excel 文件，其中包含与我的公司合作的企业的大量信息。我刚刚导入了另一个大的 excel 文件，它们的格式有所不同。我们已经拥有的较大文件在单独的列中包含地址、州和邮政编码，每列间隔两个，如下所示：

![在此处输入图像描述](../Images/40c9e05a4c4d578e4f0702912b98385d.png)

我没有制作这个电子表格，否则我不会像那样放置列，但这就是使用它的女士喜欢它的方式。

问题是我导入的工作表在同一个单元格中包含城市、州和邮政编码信息，如下所示：

> 纽约州特洛尔维尔 12345

因为 99% 的新状态都是相同的状态，所以我已经遍历了这些状态，快速查找和替换所有状态都有效。我现在只剩下这个了

> 巨魔镇 12345

我想将该邮政编码向右移动四列到正确的单元格中。我写了一个基本的正则表达式，但对 excel-vba 了解不多，因为我已经多年没有使用它了，但这就是我想出的。我只是不知道如何告诉 vba 将匹配项（我制作成一个数组）打印到适当的列中。这是我到目前为止所拥有的：

```
Function findZipCode(zipCode)
     Dim regEx As New VBScript_RegExp_55.RegExp
     Dim matches, s
     regEx.Pattern = "\s\d{5}\W"
     regEx.Global = True
     s = ""
     If regEx.Test(zipCode) Then
         Set matches = regEx.Execute(zipCode)
         For Each Match In matches
             s = s & Match.Value

         Next
         findZipCode = s
     Else
         findZipCode = ""
     End If
End Function 
```

我需要添加什么？如果有更简单的方法可以做到这一点，我也愿意接受替代方法。

提前感谢您的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:44:40.770

Can you use the in-built Excel Worksheet Functions?

Place this in target column `=RIGHT(A2,5)` would capture the rightmost 5 characters of your string iff they are numeric. This will work if all of your values data values have a 5-digit zip codes at the end.

Alternatively, you could wrap it with a conditional such as `IF(ISNUMBER(VALUE(RIGHT(A2,5))),RIGHT(A2,5),"")`, whcih would add a layer of validation to the process.

Also, did you know there is an option that may do this for you automatically if your data is comma (or space) delimited `Data ribbon->Text to columns`

# java - Java 8 中的闭包会启用使用构造函数指针的工厂方法吗？

> ID：15075884
> 
> 赞同：2
> 
> 时间：2013-02-25T20:29:08.180
> 
> 标签：java, design-patterns, closures, lambda

我最不喜欢[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)的方面是冗长的**if/then**或**case**语句几乎不可避免。如果你有很多类要解决，那就更糟了。我只是不喜欢冗长的 if/thens。

考虑以下示例：

```
public class StatementFactory 
{
    public static Statement createStatement(String stmtSql)
    {
        Statement rslt = null;

        String frstWord = stmtSql.split("\\s+")[0].toUpperCase();

        if(frstWord.equals("SELECT"))
        {
            rslt = new SelectStatement(stmtSql);
        }
        else if(frstWord.equals("UPDATE"))
        {
            rslt = new UpdateStatement(stmtSql);
        }
        else if(frstWord.equals("INSERT"))
        {
            rslt = new InsertStatement(stmtSql);
        }
        else if(frstWord.equals("DELETE"))
        {
            rslt = new DeleteStatement(stmtSql);
        }

        return rslt;
    }
} 
```

我想做的是有一个静态 Map 将**frstWord**映射到不同**Statement**实现的构造函数的指针，这样我就可以从映射中获取给定**frstWord**的指针并构造一个新实例，而不是拥有这个 if/then ugliness . 当然，现在可以使用反射来完成，但它比 if/then 更难看。

我的问题是：我可以期待[Java 8](http://openjdk.java.net/projects/lambda/)中的闭包为我解决这个问题并提供上述所需的功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T20:49:20.137

即使在 Java SE 7 中，您也可以将其编写为：

```
 switch (frstWord) {
        case "SELECT": return new SelectStatement(stmtSql);
        case "UPDATE": return new UpdateStatement(stmtSql);
        case "INSERT": return new InsertStatement(stmtSql);
        case "DELETE": return new DeleteStatement(stmtSql);
        default: throw new IllegalArgumentException();
    } 
```

没有必要对这类事情大发雷霆。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T20:33:53.253

就像是

```
static Map<String, Function<String,Statement> map = new HashMap<>();
static
{
    map.put("SELECT", SelectStatement::new);
    // etc...
}

public static Statement createStatement(String stmtSql)
{
    ...
    return map.get(fstWord).apply(stmtSql);
} 
```

当然，你可以在 Java 7 中用匿名内部类做类似的事情，这有点罗嗦。

* * *

有关构造函数参考，请参阅[http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-final.html](http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-final.html)`SelectStatement::new`的第 9 节

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:43:06.260

You can do this without closures

```
interface StatementCreator<T> {
    T createStatement(String sql);
}

public class SelectStatementCreator implements StatementCreator<SelectStatement> {

    SelectStatement createStatement(String sql) {
        return new SelectStatement(sql);
    }
 } 
```

similarly for the update, insert and delete statements. Then you map is created static or singleton or whatever...

```
static Map<String, StatementCreator<?>> factories = new HashMap<>();

static {
    factories.add("SELECT", new SelectStatementCreator());
} 
```

Then pick up the creator and execute it

```
return map.get(frstWord).createStatement(); 
```

Ta Da!

# ios - Plist 内部无法识别数组 - iOS

> ID：15075889
> 
> 赞同：0
> 
> 时间：2013-02-25T20:29:19.453
> 
> 标签：ios, plist

我无法访问放置在此 plist 中的数组：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN""http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>PageTitle</key>
        <string>Title</string>
        <key>Filters</key>
        <array>
            <dict>
                <key>Filter</key>
                <string>SomeFilter</string>
                <key>Param</key>
                <string>SomeParam</string>
            </dict>
            <dict>
                <key>Filter</key>
                <string>SomeFilter2</string>
                <key>Param</key>
                <string>SomeParam2</string>
            </dict>
        </array>
   </dict>
</array>
</plist> 
```

我的代码如下（路径已正确设置）：

```
NSMutableArray* propertyFile = [[NSMutableArray alloc] initWithContentsOfFile:path];
NSMutableDictionary* dict = [propertyFile objectAtIndex:0];
NSMutableArray* filters = [dict[@"Filters"] mutableCopy]; 
```

'dict' 变量仅返回一个键/值对，即 'PageTitle' 键。“过滤器”键未被识别。对 iOS 来说非常新，似乎正在旋转我的轮胎试图解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:03:32.687

我刚刚运行了您的代码，并按预期获得了您的过滤器。你试过在 NSLog 中打印出你的过滤器吗？

```
2013-02-26 08:01:38.162 test[24849:c07] filters = (
        {
        Filter = SomeFilter;
        Param = SomeParam;
    },
        {
        Filter = SomeFilter2;
        Param = SomeParam2;
    }
) 
```

# java - 替换文件名中的非法字符

> ID：15075890
> 
> 赞同：60
> 
> 时间：2013-02-25T20:29:19.597
> 
> 标签：java, regex, replace

在 Java 中，我有一个文件名字符串。在那里我想用'_'替换所有非法字符，但不是`a-z`，，，和`0-9``-``.``_`

我尝试了以下代码：但这没有用！

```
myString = myString.replaceAll("[\\W][^\\.][^-][^_]", "_"); 
```

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-02-25T20:30:38.913

您需要替换所有内容，但`[a-zA-Z0-9.-]`. 括号内`^`的代表“NOT”。

```
myString = myString.replaceAll("[^a-zA-Z0-9\\.\\-]", "_"); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-12-12T20:11:38.737

如果您正在寻找 Windows 平台上的选项，那么您可以尝试以下解决方案来使用文件名中除 "\/:*?"<>|" 之外的所有有效字符。

```
fileName = fileName.replaceAll("[\\\\/:*?\"<>|]", "_"); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-02-25T20:31:08.740

把事情简单化。

```
myString = myString.replaceAll("[^a-zA-Z0-9.-]", "_"); 
```

[http://ideone.com/TINsr4](http://ideone.com/TINsr4)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-02-24T00:43:27.847

更简单

```
myString = myString.replaceAll("[^\\w.-]", "_"); 
```

预定义的字符类：

*   `\w` 一个字字符：`[a-zA-Z_0-9]`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-24T13:32:41.207

我知道这里已经有了一些答案，但我想指出我必须稍微改变给定的建议。

```
filename.matches("^.*[^a-zA-Z0-9._-].*$") 
```

这就是我必须在 Java 中使用 .matches 来获得所需的结果。我不确定这是否 100% 正确，但这就是它对我的工作方式，如果遇到 az AZ 0-9 (.) (_) 和 (-) 以外的任何字符，它将返回 true。

我想知道我的逻辑是否有任何缺陷。

在以前的答案中，我看到了一些关于应该或不应该逃避什么的讨论。对于这个例子，我没有转义任何东西，但你应该转义 (-) 减号字符以确保安全，因为它会“破坏”你的表达式，除非它位于列表的末尾。(.) 点字符不必在看起来的 ([]) 方括号内转义，但如果您转义它不会对您造成伤害。

有关详细信息，请参阅 Java[模式。](https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-24T12:12:13.363

如果您想使用的不仅仅是 [A-Za-z0-9]，请检查[MS Naming Conventions](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx#naming_conventions)，并且不要忘记过滤掉“...整数表示在 1 到 31 范围内的字符，... ”。

# javascript - 根据表格中的值设置日期

> ID：15075892
> 
> 赞同：0
> 
> 时间：2013-02-25T20:29:32.340
> 
> 标签：javascript, date

我正在尝试从表单中获取日期值。我在这里尝试做的是获取值，然后将该值与正则表达式进行比较。然后我尝试创建一个日期对象，在其中将日期值设置为匹配结果。`NaN`即使我输入了正确的格式，我的控制台也会返回。关于如何修改它以便正确设置日期值的任何想法？

```
var adate = document.getElementById("dueDate").value;
var datestring = new RegExp("[0-9]{4}\\.\[0-9]{2}\\.\[0-9]{2}");
var stringmatch = adate.match(datestring);
var date = (new Date()).setDate(stringmatch);
console.log(date);
if (checkInputText(date, "Please enter a due date")) {
    return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:18:43.387

当我稍微更改正则表达式并执行此操作时，我得到了字符串匹配和日期的值，而你的却没有。

```
 var adate = "11/09/2288";
     var datestring = /^(\d{2}[.\/-])(\d{2})([.\/-]\d{4})$/;
     var stringmatch = adate.match(datestring);
     var d = new Date(stringmatch[0]);
     var date = d.setDate(stringmatch[2]); 
```

Date.setDate(day) <-- 用法，我不确定你想在这里做什么。在我的硬编码日期中，您希望设置“09”吗？我正试图围绕你想要完成的事情展开我的大脑。

# jquery - 在 ASP.NET MVC3 中通过 Ajax.BeginForm 上传文件

> ID：15075893
> 
> 赞同：3
> 
> 时间：2013-02-25T20:29:33.420
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-3, file-upload

我如何通过这些方式将文件或图像上传到服务器：

我想`Ajax.BeginForm()`用于处理用户个人资料。

它将提供处理`Json`来自服务器的响应和更新消息容器信息的机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:31:44.167

您不能使用 Ajax.BeginForm 上传文件

您可以使用 JQuery 插件或 Uploadify

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

[http://www.uploadify.com/](http://www.uploadify.com/)

# java - Java中的printf左对齐

> ID：15075899
> 
> 赞同：14
> 
> 时间：2013-02-25T20:30:10.927
> 
> 标签：java, printf

当我运行程序时，阶乘值右对齐。有没有办法让它左对齐，同时保持中间的 50 个空格？

```
public class Exercise_5_13
{
    public static void main( String[] args )
    {
        int[] numbers = { 1, 2, 3, 4, 5, 6, 7, 8, 9,
                          10, 11, 12, 13, 14, 15, 16,
                          17, 18, 19, 20 };

        long factorial = 0;

        try
        {
            System.out.print("\n\n");
            System.out.printf("%s%50s\n", "Integer", "factorial");

            for ( int number : numbers )
            {
                System.out.printf( "%4d", number);
                factorial = (long)1;

                for(int i=1; i <= number; i++)
                    factorial = factorial * (long)i;

                System.out.printf("%50.0f\n",(double)factorial);
            } 

            System.out.print("\n\n");
        } 
        catch (Exception e)
        {
            e.printStackTrace();  
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-25T20:31:08.487

根据`printf()`规范，`-`符号左对齐输出。

```
System.out.printf("%-50.0f\n",(double)factorial); 
```

来源： [http ://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)

# javascript - 在对象命名空间中定义和引用常量值？

> ID：15075902
> 
> 赞同：5
> 
> 时间：2013-02-25T20:30:29.083
> 
> 标签：javascript, namespaces, constants

我想为 JS 对象定义一个常量默认值，并在同一个命名空间的进一步声明中引用它，例如：

```
var Foo = {
  // 'constant' value for default key 
  DEFAULT_KEY : "COOKIE_MONSTER",

  // a map declaration that should ideally reference the default key 
  key_map : {
    a : Foo.DEFAULT_KEY, 
    b : Foo.DEFAULT_KEY
  }
}; 
```

`Foo`不会在 Foo.key_map 之前定义，所以`Foo.DEFAULT_KEY`不是真的。
设置/使用这些对象常量的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:38:05.907

我想到的第一个模式：

```
var Foo = (function() {
    var DEFAULT_KEY = "COOKIE_MONSTER";
    return {
        DEFAULT_KEY: DEFAULT_KEY,
        key_map: {
            a: DEFAULT_KEY,
            b: DEFAULT_KEY
        }
    }
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:37:47.790

您可以使用 iife 返回您想要的对象（命名空间）：

```
var Foo = (function(){
    var namespace = {};

    namespace.DEFAULT_KEY = 'COOKIE_MONSTER';

    namaespace.key_map = {
        a : namespace.DEFAULT_KEY, 
        b : namespace.DEFAULT_KEY
    };

    return namespace; 
})(); 
```

# java - GAE Blob Store 获取文件大小

> ID：15075911
> 
> 赞同：3
> 
> 时间：2013-02-25T20:30:47.750
> 
> 标签：java, google-app-engine, blobstore, google-cloud-storage

我尝试从 Java 中的 Google App Engine 获取存储在 Google Cloud Storage 中的文件的大小，

我试过这个：

```
FileService fileService = FileServiceFactory.getFileService();
AppEngineFile appEngineFile = fileService.getBlobFile(new BlobKey("blob key"));
int size = (int) fileService.stat(appEngineFile).getLength().longValue(); 
```

但它返回 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:25:06.347

你必须使用[`BlobInfo.getSize()`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobInfo#getSize%28%29)：

```
BlobInfoFactory blobInfoFactory = new BlobInfoFactory();
BlobInfo blobInfo = blobInfoFactory.loadBlobInfo(new BlobKey("blob key"))
Long blobSize = blobInfo.getSize(); 
```

# java - 如何让我的 TreeCellRenderer 填充我的 JTree？

> ID：15075912
> 
> 赞同：5
> 
> 时间：2013-02-25T20:30:48.400
> 
> 标签：java, swing, jpanel, jtree, renderer

如何使我的树单元格填充我的 JTree 的宽度：

```
JTree tree = new JTree();
tree.setCellRenderer(new TreeCellRenderer() { 
    @Override
    public Component getTreeCellRendererComponent(JTree tree, Object value,
        boolean selected, boolean expanded, boolean leaf, int row, 
        boolean hasFocus) {
            // TODO: How do I make this panel fill the width 
            // of the JTree?
            JPanel panel = new JPanel();
            panel.add(new JLabel("ITEM");
            return panel;
        }
});
add(tree); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T22:12:02.340

*   `JPanel panel = new JPanel();`,`JPanel`是容器,

*   `JPanel`默认为空返回`zero Dimension`,

*   只有空的`JPanel`（仅限AFAIK）返回`10px`，`BorderLayotu`如果JPanels被放置到NORTH，SOUTH，WEST，SOUTH区域，然后创建非常漂亮的10pxs`EmptyBorders`

*   必须覆盖`getPreferredSize`for `JPanel`，与在 Swing 中绘画所需的方式相同

*   不知道为什么你把`JPanel`as`Renderers JComponent`放进去`JTree`，也许有/还有另一种方式，肯定会尽快发布更好的帮助`SSCCE`

# sql - 尝试获取 scope_identity() 时使用 Massive Insert 我得到 DBNull

> ID：15075913
> 
> 赞同：2
> 
> 时间：2013-02-25T20:31:02.573
> 
> 标签：sql, c#-4.0, massive

我有一个带有标识列的表。
将 Massive 与这样的代码一起使用

```
var table = new Categories();
var newID = table.Insert(new {CategoryName = "Buck Fify Stuff", Description = "Things I like"}); 
```

然后

```
table.Scalar("select scope_identity()"); 
```

返回 DBNull :(

我需要做些什么来获得实际插入的身份值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T20:42:29.630

MSDN 文档指出[SCOPE_IDENTITY](http://msdn.microsoft.com/en-us/library/ms190315.aspx)：

> *“检索当前会话中任何表中生成的最后一个标识值”*

查看[大量源代码](https://github.com/robconery/massive/blob/master/Massive.cs)，似乎每次调用都会`Scalar()`打开一个新连接：

```
/// <summary>
/// Returns a single result
/// </summary>
public virtual object Scalar(string sql, params object[] args) {
    object result = null;
    using (var conn = OpenConnection()) {            // <-- see this ...
        result = CreateCommand(sql, conn, args).ExecuteScalar();
    }
    return result;
}

...

/// <summary>
/// Returns and OpenConnection
/// </summary>
public virtual DbConnection OpenConnection() {
    var result = _factory.CreateConnection();
    result.ConnectionString = ConnectionString;
    result.Open();                                  // <-- ...and this 
    return result;
} 
```

因此，每次您`table.Scalar("select scope_identity()");`执行此操作时，您实际上都是在一个新连接中执行此操作（这意味着不同的会话/范围）。

这解释了`DBNull`结果。

但既然你已经在做：

```
var newID = table.Insert(...) 
```

您可能想`newID`在插入发生后检查 的值；我希望你能在那里找到一些不错的东西。

至少，这就是代码`Insert()`让我相信的：

```
 public virtual dynamic Insert(object o) {
        var ex = o.ToExpando();
        if (!IsValid(ex)) {
            throw new InvalidOperationException("Can't insert: " + String.Join("; ", Errors.ToArray()));
        }
        if (BeforeSave(ex)) {
            using (dynamic conn = OpenConnection()) {
                var cmd = CreateInsertCommand(ex);
                cmd.Connection = conn;
                cmd.ExecuteNonQuery();
                cmd.CommandText = "SELECT @@IDENTITY as newID";
                ex.ID = cmd.ExecuteScalar();
                Inserted(ex);
            }
            return ex;
        } else {
            return null;
        }
    } 
```

# python - Gdata python 谷歌应用程序身份验证

> ID：15075919
> 
> 赞同：6
> 
> 时间：2013-02-25T20:31:11.690
> 
> 标签：python, oauth-2.0, gdata

`client.programmaticlogin`按照 gdata 下载包中的示例/电子表格，我已经能够使用 gdata python 函数登录到 Google 电子表格。

现在我无法登录到我的企业 gapps 'me@mycompany.com' 我是否必须通过其他任何武器？我尝试使用托管帐户类型不起作用。

我尝试`oath2`从 gui 创建密钥，生成了我的客户端 ID 和电子邮件 ID。在 gdata 中运行 oauth 示例需要消费者密钥和密钥。有人可以就此提出建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T10:25:15.690

好的，我用下面的方法解决了

```
import gdata.gauth

Client_id='xxx';
Client_secret='yyy'
Scope='https://spreadsheets.google.com/feeds/'
User_agent='myself'

token = gdata.gauth.OAuth2Token(client_id=Client_id,client_secret=Client_secret,scope=Scope,user_agent=User_agent)
print token.generate_authorize_url(redirect_uri='urn:ietf:wg:oauth:2.0:oob')
code = raw_input('What is the verification code? ').strip()
token.get_access_token(code)
print "Refresh token\n"
print token.refresh_token
print "Access Token\n"
print token.access_token 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:57:55.967

[在这里](https://github.com/yoavaviram/python-google-spreadsheet/blob/master/google_spreadsheet/api.py)查看如何使用客户端登录的示例。它是我创建的一个库的一部分，目的是让使用 Google 电子表格变得简单。

# arrays - 数组如何存储在寄存器文件中？

> ID：15075920
> 
> 赞同：0
> 
> 时间：2013-02-25T20:31:18.597
> 
> 标签：arrays, mips

我正在查看一个 32x32 的寄存器文件，其中包含 $s0-$s7、$t0-$t9、$zero、$a0-$a3、$v0-$v1、$gp、$fp、$ra 和 $at。

我的问题是数组是如何存储在这些寄存器文件中的？它们不是每个都只有 32 位宽吗？

例如，给定数组 A 的基地址是 $s3，如果我要给出获取 A[8] 的指令：

```
lw $t0, 32($s3) 
```

它如何检索数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:39:10.987

数组访问是通过指针（C 人非常熟悉的东西）进行的，所以寄存器只是保存数组的基地址。然后将 8 * 4 = 32 字节添加到该基地址以获取第 8 个元素的地址，最后取消引用该指针（这意味着查看该地址处的内容）以获取值（使用 lw 指令）。

您显示的指令是此 C 代码的翻译：

```
t0 = *(s3 + 8)  // same as s3[8] 
```

# hibernate - 有没有办法告诉 DWR 忽略延迟初始化的字段？

> ID：15075928
> 
> 赞同：0
> 
> 时间：2013-02-25T20:31:52.680
> 
> 标签：hibernate, lazy-loading, dwr, lazy-initialization

我正在使用 DWR 3.0.0-rc2、Spring 3.1.1.RELEASE、Hibernate 4.1.0.Final。我有这个域对象……</p>

```
@GenericGenerator(name = "uuid-strategy", strategy = "uuid.hex")
@Entity
@Table(name = "sb_product")
@Cacheable
@DataTransferObject
public final class Product implements Serializable, Comparable<Product>
{

    @Id
    @Column(name = "ID")
    @GeneratedValue(generator = "uuid-strategy")
    private String id;

    @Column(name = "ISBN")
    @NotEmpty
    private String isbn;

    @Column(name = "NAME")
    @NotEmpty
    private String name;
    …
    @ManyToMany
    @LazyCollection(LazyCollectionOption.TRUE)
    @JoinTable(name = "sb_product_std_category", joinColumns = { @JoinColumn(name = "PRODUCT_ID") },    inverseJoinColumns = { @JoinColumn(name = "STD_CATEGORY_ID") })
    private List<StandardCategory> standardCategories; 
```

当我在返回上述对象的服务方法上调用 DWR 时，我收到异常“原因：org.hibernate.LazyInitializationException：未能延迟初始化角色集合：org.mainco.subco.ecom.domain.Product.standardCategories ，没有会话或会话已关闭”。我不关心延迟初始化的字段。有没有办法告诉 DWR 在封送数据时忽略该字段？以下是完整的例外。谢谢， - 戴夫

```
12:43:18,169 WARN  [org.directwebremoting.convert.CollectionConverter] (http--127.0.0.1-8080-4) Conversion error for java.util.ArrayList.:  org.directwebremoting.ConversionException: Error marshalling data. See the logs for more details.
    at org.directwebremoting.convert.BasicObjectConverter.convertOutbound(BasicObjectConverter.java:310) [dwr-3.0.0-rc2.jar:]
    at org.directwebremoting.impl.DefaultConverterManager.convertOutbound(DefaultConverterManager.java:441) [dwr-3.0.0-rc2.jar:]
    at org.directwebremoting.convert.CollectionConverter.convertOutbound(CollectionConverter.java:213) [dwr-3.0.0-rc2.jar:]
    at org.directwebremoting.impl.DefaultConverterManager.convertOutbound(DefaultConverterManager.java:441) [dwr-3.0.0-rc2.jar:]
    at org.directwebremoting.extend.ScriptBufferUtil.createOutput(ScriptBufferUtil.java:68) [dwr-3.0.0-rc2.jar:]
    at org.directwebremoting.dwrp.BaseCallHandler$CallScriptConduit.addScript(BaseCallHandler.java:485) [dwr-3.0.0-rc2.jar:]
    at org.directwebremoting.dwrp.BaseCallHandler.marshallOutbound(BaseCallHandler.java:345) [dwr-3.0.0-rc2.jar:]
    at org.directwebremoting.dwrp.BaseCallHandler.handle(BaseCallHandler.java:105) [dwr-3.0.0-rc2.jar:]
    at org.directwebremoting.servlet.UrlProcessor.handle(UrlProcessor.java:120) [dwr-3.0.0-rc2.jar:]
    at org.directwebremoting.spring.DwrController.handleRequestInternal(DwrController.java:234) [dwr-3.0.0-rc2.jar:]
    at org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923) [spring-webmvc-3.1.2.RELEASE.jar:   3.1.2.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) [spring-webmvc-3.1.2.RELEASE.jar: 3.1.2.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:754) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160) [spring-security-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [spring-web-3.1.2.RELEASE.jar:   3.1.2.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) [spring-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:    7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_41]
Caused by: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: org.mainco.subco.ecom.domain.Product.standardCategories, no session or session was closed
    at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:394) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:386) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:379) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:113) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.hibernate.collection.internal.PersistentBag.iterator(PersistentBag.java:266) [hibernate-core-4.1.5.SP1.jar:4.1.5.SP1]
    at org.directwebremoting.convert.CollectionConverter.convertOutbound(CollectionConverter.java:189) [dwr-3.0.0-rc2.jar:]
    at org.directwebremoting.impl.DefaultConverterManager.convertOutbound(DefaultConverterManager.java:441) [dwr-3.0.0-rc2.jar:]
    at org.directwebremoting.convert.BasicObjectConverter.convertOutbound(BasicObjectConverter.java:299) [dwr-3.0.0-rc2.jar:]
    ... 57 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:16:07.407

使用`HibernateBeanConverter`. [在此处](http://directwebremoting.org/dwr/documentation/server/integration/hibernate.html)检查文档。

# javascript - 无法正确解析 JSON

> ID：15075930
> 
> 赞同：1
> 
> 时间：2013-02-25T20:32:02.070
> 
> 标签：javascript, json

在类型的响应中，`application/x-javascript`我在变量中选择所需的`JSON`部分。下面是`JSON`——

```
{
   "__ra":1,
   "payload":null,
   "data":[
      [
         "replace",
         "",
         true,
         {
            "__html": "\u003Cspan class=\"highlight fsm\" id=\"u_c_0\">I want this text only\u003C\/span>"
         }
      ]
   ]
} 
```

从我从 Stackoverflow 获得的参考资料中，我可以`data`通过以下方式选择里面的内容 -

```
var temp = JSON.parse(resp).data; 
```

但我的目标是只获得`__html`价值的文本部分，即`I want this text only`. 有人帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:00:20.150

首先，您必须访问您定位的对象：

```
var html = JSON.parse(resp).data[0][3]._html; 
```

但是你想要的输出是**我只想要这个文本**

**html**变量不包含该文本，而是一些 html，其中您要查找的内容是跨度内的**文本**

如果您接受在您的项目中包含 jQuery，您可以通过这种方式访问​​该内容

```
var text = $(html).text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:03:15.470

首先，您需要更具体地使用该数据以获取所需的文本字符串：

```
var temp = JSON.parse(resp).data[0][3]['__html']; 
```

接下来，您需要搜索该字符串以提取所需的数据。这在很大程度上取决于您得到的响应的规律性。在任何情况下，您都可能需要使用正则表达式来解析您在响应中获得的字符串。

在这种情况下，您试图获取`<span>`字符串中元素内的文本。如果您的所有回复都是这种情况，您可以执行以下操作：

```
var text = /<span[^>]*>([^<]*)<\/span>/.exec(temp)[1]; 
```

这非常具体地在一个不包含其他 HTML 标记的 span 标记的开始和结束中查找文本。

此处表达式中要查看的主要部分是`([^<]*)`，它将捕获不是左尖括号的任何字符，`<`。这周围的一切都在寻找`<span>`具有可选属性的实例。这`exec`是您在`temp`字符串上执行以返回匹配项的方法，`[1]`它将为您提供第一个也是唯一的捕获（例如`<span>`标签之间的文本）。

您需要阅读有关[RegExp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)的更多信息，以了解如何做更具体的事情（或在您的问题中提供有关您正在寻找的响应模式的更具体信息）。但是，如果您要进行此类工作（解析文本，查找模式和匹配项），通常非常值得阅读正则表达式，因为它们是一种非常简洁和强大的方法，如果一开始有点混乱.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T21:16:21.530

把它们放在一起：

```
var html = JSON.parse(resp).data[0][3]._html;
var div = document.createElement("div");
div.innerHTML = html;
var text = div.textContent || div.innerText || ""; 
```

感谢@Tim Down 对跨浏览器innerHTML 的回答：[JavaScript：如何从字符串中去除HTML 标记？](https://stackoverflow.com/questions/5002111/javascript-how-to-strip-html-tags-from-string)

# java - 从 IFC 文件中提取几何图形

> ID：15075934
> 
> 赞同：3
> 
> 时间：2013-02-25T20:32:26.883
> 
> 标签：java, ifc, bim

我必须在 JAVA 中提取 ifc 文件的几何图形。我的问题是，我不知道该怎么做。

我尝试使用[openifctools](http://www.openifctools.org/)但文档真的很糟糕。现在我已经加载了 ifc 文件，但我无法从模型中获取几何图形。

有没有人有 ifc 模型加载的经验？

提前致谢。

编辑：这是我到目前为止所做的

```
try {
    IfcModel ifcModel = new IfcModel();
    ifcModel.readStepFile(new File("my-project.ifc"));
    Collection<IfcClass> ifcObjects = ifcModel.getIfcObjects();
    System.out.println(ifcObjects.iterator().next());
} catch (Exception e) {
    e.printStackTrace();
} 
```

这会正确加载 ifc 文件。但我不知道如何处理这些信息。

我也尝试使用[IfcOpenShell](http://ifcopenshell.org/index.html)，但提供的 jar 容器也没有工作。目前我尝试自己构建 IfcOpenShell。

我有点绝望，因为一切都没有记录，我真的需要加载和解析 ifc 几何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-09T12:49:24.917

根据您想要对几何体执行的操作、想要深入研究 IFC 标准以及解决方案所需的性能，您有两种不同的选择：

1.  自行提取隐式几何
2.  使用外部几何引擎

如果您选择第一个选项，则必须深入研究[IFC 模式](http://www.buildingsmart-tech.org/ifc/IFC2x3/TC1/html/index.htm)。你只会对[IFCProducts](http://www.buildingsmart-tech.org/ifc/IFC2x3/TC1/html/ifckernel/lexical/ifcproduct.htm)感兴趣，因为只有那些才能有几何。使用 OpenIfcTools 您可以执行以下操作：

```
Collection<IfcProduct> products = model.getCollection(IfcProduct.class);
for(IfcProduct product: products){
    List<IfcRepresentation> representations = product.getRepresentation().getRepresentations();
    assert ! representations.isEmpty();
    assert representations.get(0) instanceof IfcShapeRepresentation:
    Collection<IfcRepresentationItem> repr = representations.get(0).getItems();
    assert !repr.isEmpty();
    IfcRepresentationItem representationItem = repr.iterator().next();
    assert representationItem instanceof IfcFacetedBrep;
    for(IfcFace face: ((IfcFacetedBrep)representationItem).getOuter().getCfsFaces()){
        for(IfcFaceBound faceBound: face.getBounds()){
            IfcLoop loop = faceBound.getBound();
            assert loop instanceof IfcPolyLoop;
            for(IfcCartesianPoint point: ((IfcPolyLoop) loop).getPolygon()){
                point.getCoordinates();
            }
        }
    }
} 
```

但是，有很多不同的 GeometryRepresentations，您必须涵盖它们，可能自己进行三角测量和其他东西。我已经展示了一种特殊情况并做出了很多断言。而且您必须摆弄坐标转换，因为它们可能是递归嵌套的。

如果你选择第二个选项，我知道的几何引擎都是用 C/C++ 编写的（[Ifcopenshell](http://ifcopenshell.org/)，[RDF IfcEngine](http://rdf.bg/ifc-engine-dll.php)），所以你必须处理本地库集成。IFCOpenshell 提供的 jar 包旨在用作 Bimserver 插件。如果没有相应的依赖项，您将无法使用它。但是，您可以从此包中获取本机二进制文件。为了使用引擎，您可以从 Bimserver[插件源](https://svn.code.sf.net/p/ifcopenshell/svn/tags/0.3.0/src/bimserver_plugin/)中获得一些灵感。您将使用的关键本机方法是

*   `boolean setIfcData(byte[] ifc)`解析 ifc 数据
*   `IfcGeomObject getGeometry()`依次访问提取的几何图形。

# java - 在按钮内调用另一个类方法

> ID：15075936
> 
> 赞同：0
> 
> 时间：2013-02-25T20:32:34.960
> 
> 标签：java, android

我有`ContactUs.java`和`Mail.java`课。

我想将方法​​从 Mail 类调用到`Contactus onclicklistner`方法中。

```
 package com.hesham.sams;

public class ContactusActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_contactus);

    TextView subjectTxt = (TextView) findViewById(R.id.subjectTxt);
    TextView emailTxtus = (TextView) findViewById(R.id.emailTxtus);
    final TextView messageTxt = (TextView) findViewById(R.id.messageTxt);
    Button lButton = (Button)findViewById(R.id.sendbtn);

     String hh =  messageTxt.getText().toString();

    Spinner s = (Spinner) findViewById(R.id.spinner1);

    Typeface font = Typeface.createFromAsset(getAssets(), "extrafine.ttf");  
    subjectTxt.setTypeface(font);
    emailTxtus.setTypeface(font);
    messageTxt.setTypeface(font);

    String array_spinner[];
    array_spinner=new String[3];
    array_spinner[0]="general";
    array_spinner[1]="quisiton";
    array_spinner[2]="suggsution";

     Spinner spinner = new Spinner(this);
        ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(
                this, android.R.layout.simple_spinner_item, array_spinner);
        spinnerArrayAdapter.setDropDownViewResource(      android.R.layout.simple_spinner_dropdown_item );

        spinner = (Spinner) findViewById( R.id.spinner1 );
        spinner.setAdapter(spinnerArrayAdapter);

    //ArrayAdapter adapter = new   ArrayAdapter(this,android.R.layout.simple_spinner_dropdown_item, array_spinner);
    //adapter.setDropDownViewResource(R.layout.special_spinner_dropdown);   
    //s.setAdapter(adapter);

        // send Botton
    //public string hesham(){

        lButton.setOnClickListener(
                new View.OnClickListener()
                {
                    public void onClick(View view)
                    {
                        // here is the proeblem 
                        Mail.send();

                    }
                });

               // ignoring 
              final class SpinnerActivity implements OnItemSelectedListener {

                    public void onItemSelected(AdapterView<?> parent, View view, 
                            int pos, long id) {
                        // An item was selected. You can retrieve the selected item using
                        // parent.getItemAtPosition(pos)
                        Spinner spinner = (Spinner) findViewById(R.id.spinner1);
                        spinner.setOnItemSelectedListener(this);
                    }

                    public void onNothingSelected(AdapterView<?> parent) {
                        // Another interface callback
                    }

            } 

}// end of on create

                } // end of class 
```

二等：

```
 package com.hesham.sams;

 import java.util.Date;
import java.util.Properties;
 import javax.activation.CommandMap;
import javax.activation.MailcapCommandMap;
import javax.mail.BodyPart;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
 import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

 public class Mail extends javax.mail.Authenticator { 

  private String _user; 
  private String _pass; 

  private String[] _to; 
  private String _from; 

  private String _port; 
  private String _sport; 

  private String _host; 

  private String _subject; 
  private String _body; 

  private boolean _auth; 

  private boolean _debuggable; 

  private Multipart _multipart; 

  public Mail() { 
    _host = "smtp.gmail.com"; // default smtp server 
    _port = "465"; // default smtp port 
    _sport = "465"; // default socketfactory port 

    _user = ""; // username 
    _pass = ""; // password 
    _from = ""; // email sent from 
    _subject = ""; // email subject 
    _body = ""; // email body 

    _debuggable = false; // debug mode on or off - default off 
    _auth = true; // smtp authentication - default on 

    _multipart = new MimeMultipart(); 

    // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
    MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
    CommandMap.setDefaultCommandMap(mc); 
  } 

  public Mail(String user, String pass) { 
    this(); 

    _user = user; 
    _pass = pass; 
  } 

  public boolean send() throws Exception { 
    Properties props = _setProperties(); 

    if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) { 
      Session session = Session.getInstance(props, this); 

      MimeMessage msg = new MimeMessage(session); 

      msg.setFrom(new InternetAddress(_from)); 

      InternetAddress[] addressTo = new InternetAddress[_to.length]; 
      for (int i = 0; i < _to.length; i++) { 
        addressTo[i] = new InternetAddress(_to[i]); 
      } 
        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

      msg.setSubject(_subject); 
      msg.setSentDate(new Date()); 

      // setup message body 
      BodyPart messageBodyPart = new MimeBodyPart(); 
      messageBodyPart.setText(_body); 
      _multipart.addBodyPart(messageBodyPart); 

      // Put parts in message 
      msg.setContent(_multipart); 

      // send email 
      Transport.send(msg); 

      return true; 
    } else { 
      return false; 
    } 
  } 

  /*public void addAttachment(String filename) throws Exception { 
    BodyPart messageBodyPart = new MimeBodyPart(); 
    DataSource source = new FileDataSource(filename); 
    messageBodyPart.setDataHandler(new DataHandler(source)); 
    messageBodyPart.setFileName(filename); 

    _multipart.addBodyPart(messageBodyPart); 
  } */

  @Override 
  public PasswordAuthentication getPasswordAuthentication() { 
    return new PasswordAuthentication(_user, _pass); 
  } 

  private Properties _setProperties() { 
    Properties props = new Properties(); 

    props.put("mail.smtp.host", _host); 

    if(_debuggable) { 
      props.put("mail.debug", "true"); 
    } 

    if(_auth) { 
      props.put("mail.smtp.auth", "true"); 
    } 

    props.put("mail.smtp.port", _port); 
    props.put("mail.smtp.socketFactory.port", _sport); 
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
    props.put("mail.smtp.socketFactory.fallback", "false"); 

    return props; 
  } 

  // the getters and setters 
  public String getBody() { 
    return _body; 
  } 

  public void setBody(String _body) { 
    this._body = _body; 
  } 

  // more of the getters and setters ….. 
} 
```

注意：我不能使用extend，因为这个类中的每一个都已经捍卫到扩展另一个类。你知道java不能同时扩展两个类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:38:16.837

你可以通过不使用匿名类来做到这一点。创建一个完整的类，并给它一个构造函数，该构造函数引用它需要的任何数据。将其存储在类的成员变量中。然后在 onClick 中，您可以引用该成员变量。当您调用 setOnClickListener 时，只需向其传递该类的新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:35:45.887

这取决于类是否是静态的。如果它们是静态的，您可以内联使用它们`Mail.MethodName();`

如果它们不是静态的，那么您需要先创建它们的实例

```
Mail mc = new Mail();

mc.MethodName(); 
```

# android - 创建轮播样式 ViewPager

> ID：15075937
> 
> 赞同：0
> 
> 时间：2013-02-25T20:32:40.640
> 
> 标签：android

我正在尝试在我的应用程序中实现这种样式模式：

[http://www.androidpatterns.com/uap_pattern/carousel](http://www.androidpatterns.com/uap_pattern/carousel)

但是我很难找到现有的库或解决方案。有人知道我可以使用的任何库或我将如何实现它吗？

到目前为止，我发现了这个：

[http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)

但这并不是我想要的，因为如果它托管在 ViewPager 中会很好，这样我就可以在视图中使用按钮等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:40:41.220

你可以试试[twoway-view](https://github.com/lucasr/twoway-view)，一个支持水平滚动的 AdapterView（类似于 ListView/GridView）的实现。

在这种情况下，您将更像 ListView 而不是 ViewPager 来使用它，因此每个元素将是一个单独的项目布局，而不是 Fragment。

现在使用 twoway-view 的一个例子是最新的[Firefox for Android nightly ，正如](http://nightly.mozilla.org/)[公告](http://lucasr.org/2013/02/25/ui-improvements-in-firefox-for-android/)中所讨论的那样，其中包含一些使用中的屏幕截图： ![在此处输入图像描述](../Images/c902027c681e09dfea0b76646097af33.png)

# hibernate - Hibernate 保存、更新和 saveOrUpdate

> ID：15075939
> 
> 赞同：0
> 
> 时间：2013-02-25T20:32:58.730
> 
> 标签：hibernate

我有一个名为变量的对象，其中包含名称和值字段。name 字段是主键，在 Hibernate 中将其作为“标识符”。我想 1）将变量插入数据库（如果它不存在）和 2）更新数据库中的变量（如果它已经存在）。我怎么做？我已经查看了 Hibernate 文档，但我对此感到困惑。它对瞬态、持久和分离状态进行了冗长的解释，我将指出一些问题。

> Transient - 如果一个对象刚刚使用 new 运算符实例化，并且它与 Hibernate Session 无关，则它是瞬态的。它在数据库中没有持久表示，也没有分配标识符值。如果应用程序不再持有引用，垃圾收集器将销毁瞬态实例。使用 Hibernate Session 使对象持久化（并让 Hibernate 处理需要为此转换执行的 SQL 语句）。

如果我实例化一个新的变量对象，那么该变量对象显然是瞬态的，因为它是用 new 运算符实例化的。现在，如果我为它分配一个已经在数据库中找到的名称（标识符/主键属性）怎么办？还是暂时的吗？从技术上讲，它还没有与 Hibernate 会话相关联——Hibernate 不知道我的变量对象存在。但是，它*确实*分配了一个标识符，并且该标识符确实已经存在于数据库中。那么它是什么......在这一点上它是否是一个瞬态对象？

> 持久性 - 持久性实例在数据库中具有表示形式和标识符值。它可能刚刚被保存或加载，但是，根据定义，它在 Session 的范围内。Hibernate 将检测对处于持久状态的对象所做的任何更改，并在工作单元完成时将状态与数据库同步。开发人员不执行手动 UPDATE 语句，或在对象应为瞬态时执行 DELETE 语句。

这个持久化的定义意味着如果我从 Hibernate Session 加载一个变量对象，`.load(Variable.class, "name")`那么这个变量现在是持久化的，因为 Session 知道它的存在。然而，它也表示它将“在工作单元完成时与数据库同步状态”。什么时候发生？在我对它进行更改后，我应该从数据库中调用 .load() 的变量上的 .save() 或 .update() 吗？否则我应该如何让数据库中的值更新？

基本上，我阅读了有关[Hibernate - Working with Objects](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/objectstate.html#objectstate-makingpersistent)的文档，但对持久状态和瞬态状态的解释仍然不清楚，因此保存、更新和 saveOrUpdate 也是如此。

# c# - 带有 Mono 2.10 的 Castle 动态代理

> ID：15075942
> 
> 赞同：2
> 
> 时间：2013-02-25T20:33:08.683
> 
> 标签：c#, mono, castle-dynamicproxy

我使用 VS 2012/.NET 4.5 构建了一个类库，该类库根据[这篇文章](http://litemedia.info/lazy-loading-property-with-castle-dynamicproxy2)使用 Castle.DynamicProxy 实现延迟加载。它在 .NET 中完美运行，但不能与 Mono 一起使用，尽管[文档](http://docs.castleproject.org/Tools.DynamicProxy-Introduction.ashx)明确指出 DynamicProxy 可与 Mono 2.6 或更高版本一起使用。我得到的众多例外之一是：

```
Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly 'Castle.Core'. 
```

我是 Mono 新手，所以对于 Mono 专家来说，这可能是显而易见的。我很沮丧：Castle.DynamicProxy 看起来非常适合我当前的项目。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:11:32.463

我不会说 Castle 与 Mono 不兼容。

我实际上将它用于一些项目。我的意思是，我使用使用它的模拟框架。而且效果很好。

Castle 贡献者的实际意思可能是它不能保证 100% 兼容，因为 Castle 套件中的某些单元测试不会通过 Mono。

这些测试没有通过的唯一原因是没有人坐下来调查原因并修复 Mono 中的错误。如果有 10 个失败的测试，很可能是 Mono 中有 10 个错误，或者只有 1 个在 10 个测试中被击中！

鉴于我在 Mono 中使用 Castle 的良好经验，我个人对修复这些错误不感兴趣，因为它们一定只是边缘情况。当我击中它们并被它们阻止时，我会修复它们（就像我对[https://bugzilla.xamarin.com/show_bug.cgi?id=10004](https://bugzilla.xamarin.com/show_bug.cgi?id=10004)所做的那样），否则很遗憾我没有足够的时间。

故事的精神：尝试修复 Mono 中你遇到的错误（而不是 Castle 遇到的所有错误），这可能需要你 1 或 2 天的调查，但稍后你可能会成为一个快乐的 Castle+之后是 Mono 用户（和开源贡献者）。

PS：测试 Mono 3.x，您将有更多机会不必调查任何内容，因为该错误可能已经修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:41:23.857

没关系：我刚收到 Castle 贡献者之一的回复，但文档有误：Castle.DynamicProxy 与 Mono 不兼容。他说他会更改文档，所以希望没有其他人会犯同样的错误！干杯。

# c++ - 如何遍历类 C++ 的变量成员

> ID：15075947
> 
> 赞同：4
> 
> 时间：2013-02-25T20:33:28.323
> 
> 标签：c++, loops

我目前正在尝试对我正在读入的一些数据对一堆变量（基于在各种相空间中的归一化）进行复杂的变量校正。由于每次校正都遵循相同的过程，我想知道是否会有无论如何要迭代地执行此操作，而不是自己处理每个变量（因为我需要大约 18-20 个变量）。C++ 可以处理这个吗？有人告诉我在 python 中尝试这个，但我觉得它可以在 C++ 中以某种方式完成......我只是碰壁了！

给你一个想法，给定类似的东西：

```
class VariableClass{
    public :
      //each object of this class represents an event for this particlular data set 
      //containing the following variables
      double x;
      double y;
      double z;
} 
```

我想做一些类似的事情：

```
for (int i=0; i < num_variables; i++)
{
   for (int j=0; j < num_events; j++)
   {
     //iterate through events
   }
   //correct variable here, then move on to next one
} 
```

提前感谢您的任何建议！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:01:52.193

我假设您的成员变量不会都具有相同的类型。否则，您可以将它们放入容器中。如果你有 C++11，你可以解决这个问题的一种方法是[tuple](http://en.cppreference.com/w/cpp/utility/tuple)。通过一些[模板元编程](https://stackoverflow.com/a/6401663/46821)，您可以模拟元组所有元素的循环。函数[std::tie](http://en.cppreference.com/w/cpp/utility/tuple/tie)将构建一个引用所有成员的元组，您可以像这样“迭代”：

```
struct DoCorrection
{
    template<typename T>
    void operator()(T& t) const { /* code goes here */ }
};

for_each(std::tie(x, y, z), DoCorrection());
// see linked SO answer for the detailed code to make this special for_each work. 
```

然后，您可以专门`operator()`针对每个成员变量类型。这将让您自动进行适当的数学运算，而无需手动跟踪类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T20:42:17.023

取自[glm](http://glm.g-truc.net/)（详细 vec3.incl）

```
template <typename T>
GLM_FUNC_QUALIFIER typename tvec3<T>::value_type & 
tvec3<T>::operator[]
(
    size_type i
)
{
    assert(i < this->length());
    return (&x)[i];
} 
```

这将转化为您的示例：

```
class VariableClass{
public :
  //each object of this class represents an event for this particlular data
  double x;
  double y;
  double z;

  double & operator[](int i) {
    assert(i < 3);
    return (&x)[i];
  }
}

VariableClass foo();
foo.x = 2.0;
std::cout << foo[0] << std::endl; // => 2.0 
```

虽然我会推荐 glm，如果它只是关于矢量数学。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T20:35:16.917

是的，只需将所有变量放入容器中，`std::vector`例如 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T20:40:30.907

[http://en.cppreference.com/w/cpp/container/vector](http://en.cppreference.com/w/cpp/container/vector)

我建议花一些时间阅读所有 std 类。有许多容器和许多用途。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T20:55:53.193

一般来说，如果不依赖实现定义的东西，例如填充或对具有不同访问限定符的部分重新排序（实际上没有编译器会这样做——尽管它是允许的），你就不能迭代成员。

但是，您可以使用记录类型的泛化： a `std::tuple`。迭代一个元组并不简单，但你会发现很多代码可以做到这一点。这里最糟糕的是命名变量的丢失，你可以用成员来模仿。

如果您使用 Boost，您可以使用[Boost.Fusion 的](http://www.boost.org/doc/libs/1_53_0/libs/fusion/doc/html/index.html)辅助宏[BOOST_FUSION_ADAPT_STRUCT](http://www.boost.org/doc/libs/1_53_0/libs/fusion/doc/html/fusion/adapted/adapt_struct.html)将结构转换为 Fusion 序列，然后您可以将其与 Fusion 算法一起使用。

# jquery - 初始选择器包含子项时的Jquery slideUp回调函数

> ID：15075952
> 
> 赞同：1
> 
> 时间：2013-02-25T20:33:45.483
> 
> 标签：jquery, slideup, jquery-callback

`slideUp()`如果我使用的初始选择器包含，我如何向函数添加回调函数`children()`？

```
$('.homebuttonbutton').hover(function() {
        $(this).stop().children('.homebuttonaction').slideDown();
        $(this).children('.homebuttonlabel').addClass('whitebutton');
    }, function() {
        $(this).stop().children('.homebuttonaction').slideUp(300, function() {
             $(this).children('.homebuttonlabel').removeClass('whitebutton');
        });
        //$(this).children('.homebuttonlabel').removeClass('whitebutton');
    }); 
```

所以理想情况下，当悬停时，孩子`.homebuttonaction`向下滑动并`.whitebutton`添加类，然后当未悬停时，`.homebuttonaction`向上滑动并`.whitebutton`删除类。

我希望在`slideUp`动画完成后删除该类，但我不确定如何“选择”它，因为初始选择器`children`用于回调函数。

会有多个`.homebuttonaction`类，所以我不能只使用

```
$('.homebuttonaction').removeClass('.whitebutton'); 
```

因为那样它将适用于每个人，对吗？回调函数是否`$(this)`首先将其视为被选中的项目，还是将其视为通过 找到的当前选定项目`children()`？

谢谢你的帮助，所以。

**编辑** 这是我的小提琴 - [http://jsfiddle.net/kcxWc/](http://jsfiddle.net/kcxWc/) - 如您所见，该类没有被删除，因为它应该在 slideUp 效果结束之后。我相信这是一个选择器问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:40:40.723

您不必总是依赖“this”关键字。这些函数通过事件对象传递，您可以通过 event.target 属性找到“选定的项目”。例如。

```
$('.homebuttonbutton').hover(function(event) {
    var onlyTheButtonThatWasClicked = event.target;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:47:14.503

`this`将引用`.homebuttonbutton`mouseenter / mouseleave 回调中的`.homebuttonlabel`对象，以及 slideUp 回调中的对象。

要引用`.homebuttonbutton`回调内部，您可以搜索 dom 树，或在闭包中捕获对它的引用。

遍历dom树：

```
$(this).stop().children('.homebuttonaction').slideUp(300, function() {
    $(this).closest('.homebuttonbutton').children('.homebuttonlabel').removeClass('whitebutton');
}); 
```

在闭包中捕获：

```
var homeButton = $(this);
$(this).stop().children('.homebuttonaction').slideUp(300, function() {
    homeButton.children('.homebuttonlabel').removeClass('whitebutton');
}); 
```

# windows-phone-8 - LongListMultiSelector 将复选框与列表项对齐

> ID：15075956
> 
> 赞同：5
> 
> 时间：2013-02-25T20:33:58.787
> 
> 标签：windows-phone-8, silverlight-toolkit

我有一个具有较大字体大小的列表项的 LongListMultiSelector。由于这种字体更改，我意识到复选框总是与实际列表项不对齐。我尝试在每个级别更改水平和垂直对齐方式，并调整填充和边距值。这些更改了列表项内的文本块，但复选框保持在顶部，并且它给列表带来了扭曲的外观。

反正有没有让复选框垂直居中或管理它的填充？我意识到[最近有一篇](https://stackoverflow.com/questions/14550001/space-between-items-in-longlistmultiselector)关于列表样式边距的帖子，但它似乎相当复杂，没有任何直接输入我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T15:05:25.940

我找到了解决方案。您可以像这样在数据模板中更改网格的边距 Margin="0,-15,0,22" - 在我的情况下，复选框的顶部边缘将平行于文本的顶部边​​缘。

希望它会帮助你。

```
<toolkit:LongListMultiSelector x:Name="SelectedPlayListLLS" ItemsSource="{Binding PlayListTracsObservationCollection}" LayoutMode="List" toolkit:TiltEffect.IsTiltEnabled="True">               <toolkit:LongListMultiSelector.ItemTemplate>
<DataTemplate>
<Grid Background="Transparent" Margin="0,-15,0,22">
    <Grid.RowDefinitions>
        <RowDefinition Height="auto"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="36" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Image  x:Name="image" 
            Width="36" 
            Height="36" 
            Source="{Binding Image}" VerticalAlignment="Top" Margin="0,15,0,0"/>
    <StackPanel Grid.Column="1">
        <TextBlock Text="{Binding Title}" 
            TextTrimming="WordEllipsis"
            Margin="12,0,0,0"/>
        <TextBlock Text="{Binding Name}"  
            TextTrimming="WordEllipsis" 
            Margin="12,0,0,0" Foreground="#99FFFFFF"/>
    </StackPanel>
    </Grid>
</DataTemplate>
</toolkit:LongListMultiSelector.ItemTemplate>   
</toolkit:LongListMultiSelector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:07:44.080

您总是可以尝试将复选框和文本块放在 StackPanel 中。从那时起，您可以调整复选框的对齐方式。

尝试这样的事情：

```
<StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
       <CheckBox VerticalAlignment="Top" IsChecked="{Binding Selected}" />
       <TextBlock Text="{Binding DisplayName}" FontSize="40"/>
</StackPanel> 
```

# ios - 在 iOS webapp 上的启动屏幕和预加载器之间获取 Flash

> ID：15075958
> 
> 赞同：1
> 
> 时间：2013-02-25T20:34:02.500
> 
> 标签：ios, iphone-standalone-web-app

我已经构建了以下作为测试场景：[http](http://dev.driz.co.uk/Spinner/) : //dev.driz.co.uk/Spinner/ 用于将在 iPhone Chromeless 上运行的 web 应用程序。如果您在 iPhone 上打开它并将其添加到您的主屏幕，您会看到它是一个带有启动屏幕和预加载器的全屏 Web 应用程序。

我已经使用户看到的启动屏幕和第一个屏幕与[Apple 文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)引用**的相同：“***通常，设计一个与应用程序的第一个屏幕相同的启动图像。避免包含在启动时可能看起来不同的元素应用程序完成启动，因此用户不会在启动图像和第一个应用程序屏幕之间体验到闪烁。* ”

 *如上所述，我将它们设置为相同以防止启动和应用程序本身之间可能发生的闪烁（通常是由于不同的 UI 组件，其中我在启动时不会更改）。**但是我仍然得到这个闪光！**就好像该应用程序正在显示启动，然后隐藏然后显示网站，其中包括再次显示带有启动图像的启动屏幕。

关于如何解决这个问题的任何想法？我什至尝试将 html/body 本身设置为具有启动屏幕的背景图像，但它们在加载时仍然是 Flash。还尝试使用实际图像而不是背景，但同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:03:37.347

我敢打赌你看到的闪光是窗口的背景，或者你的 web 视图。它很可能是白色的，当应用程序加载时，它不会立即呈现页面，因此您会在一瞬间看到窗口的白色背景。

我会尝试在您的应用程序委托或 Interface Builder 中编辑 _window.backgroundColor （我猜是该属性名称），如果这不能解决它，请查看您是否可以编辑 webview 的背景颜色。所有这些都可能取决于您用于创建 webapp 的任何工具链（即 phonegap）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:12:32.110

好的。快速回答：不要使用 ios 启动图像 imo，因为它只是显示非常不真实，并且在 ios 之外您无论如何都无法使用它。我不知道我尝试了多长时间来展示一个像样的图像，一旦你谈论不同的设备和格式，你必须提供的所有图像都令人讨厌。

我已经完成了一个 css/javascript 启动画面，我将其用于我自己的应用程序（例如[这里](http://www.stokkers.de/test2012/members/login.cfm?app=biberna)）。您可以指定根据设备加载的纵向和横向图像（4 种尺寸）。

背景附加到`splash`类，我将其设置在主体上，并在应用程序加载后将其删除。

我已将代码放在 Github 上的一个[仓库](https://github.com/frequent/splashview)中。随意使用。如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:18:03.607

我确实知道放置加载图像对于本机应用程序是正确的，但是在您链接的文档上没有任何地方说对于网络应用程序也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-27T18:55:02.560

你找到解决办法了吗？我发现问题是 iPhone 的根本问题，无论您的应用程序如何。

以这个为例：它显示了一个背景为 的网站，`#ccc`带有 iphone 7 的初始屏幕`#ccc`。

```
<!doctype html>
<html style="background-color: #ccc;">
<head>
  <title>iOS web app</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="iOS web app">
  <meta name="viewport" content="initial-scale=1">
  <link href="https://placehold.it/750x1294" media="(device-width: 375px) and (device-height: 667px)
                 and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
</head>
<body style="background-color: #ccc;">
  <h1>iOS web app</h1>
</body>
</html> 
```

[https://imgur.com/a/tGiREVM](https://imgur.com/a/tGiREVM)

应用程序加载时您会看到闪烁。

更快的加载应用程序感觉更糟，有点癫痫，闪烁。如果启动画面很暗，它看起来又更糟了。*

# kendo-ui - ajax 应用程序中的剑道下拉列表

> ID：15075963
> 
> 赞同：0
> 
> 时间：2013-02-25T20:34:09.080
> 
> 标签：kendo-ui

我有一个 ajax 应用程序，它返回包含一个元素的 html。我可以给它一个 id，我正试图抓住它以使其进入剑道下拉列表。

但是无论我尝试将代码放在 ajax 结果之前还是之后，我都无法将我的 ajax 元素转换为下拉列表。

```
$jq(document).ready(function(){
      $jq("#myselect").kendoDropDownList();
}); 
```

任何想法如何使用 ajax 生成的元素来解决这个问题？

问候

卡雷尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:06:45.743

使用您的 Ajax 请求的**[成功](http://api.jquery.com/jQuery.ajax/)**回调来初始化您的“元素”。还要确保您的“元素”是**输入**或**选择**html 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:23:18.510

删除 document.ready 事件，然后将此代码添加到 `$jq("#myselect").kendoDropDownList();` 返回 HTML 的初始 ajax 调用的回调函数中。如果仍然无法正常工作，请创建一个 JSFiddle 解决方案并在此处发布链接。

# ssl - 如何创建一个连接到端口 443 的客户端，并带有一个指示它应该切换协议的开场白？

> ID：15075967
> 
> 赞同：1
> 
> 时间：2013-02-25T20:34:16.663
> 
> 标签：ssl, tcp, https

如果我连接到端口 80 并发送 text `FOOBAR`，那么 HTTP 服务器将立即拒绝。因为我知道这始终是一个非 HTTP 请求，所以我可以拦截以开头的请求`FOOBAR`并将它们发送到我自己的自定义 TCP 服务。因此，我可以扩展对端口 80 的使用以添加非 HTTP 服务器，而不会中断真正的 HTTP 流量。

我知道如何使用端口 80，因为只要不与现有方法名称之一（、、、等）发生冲突，我就`GET`可以`POST`使用`HEAD`。我可以自己制作（例如`BAZ`）没有碰撞风险。

如果我想使用端口 443 怎么办？我应该寻找什么来创建一个不会导致冲突的开场白？

# sql - 选择不同的和非不同的列值

> ID：15075970
> 
> 赞同：8
> 
> 时间：2013-02-25T20:34:28.400
> 
> 标签：sql, oracle, select, group-by, distinct

我想运行一个查询，根据 colA 和 colB 的值消除重复行。但是，我仍然想返回 colC 和 colD 的值。

这是我到目前为止的一个简单示例：

```
SELECT DISTINCT colA, colB   ?colC, colD?
FROM TABLE1 
```

或者

```
SELECT colA, colB    ?colC, colD?
FROM TABLE1
GROUP BY colA, colB 
```

任何一种方法都不允许我返回 colC 和 colD，除非我将它们检查为不同的值或 colA 和 colB 之类的组。我不想这样做，只有 colA 和 colB 需要区分，而不是 colC 和 colD。我只想退货。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T20:49:16.397

你想要`list_agg`吗？

```
select colA, colB,
       list_agg(distinct colC, ','),
       list_agg(distinct colD, ',')
from Table1
Group by ColA, ColB 
```

如果 ColC 和 colD 可以使用任意值，您可以使用`min()`：

```
select colA, colB, min(colC), min(colD)
from Table1
Group by ColA, ColB 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T21:15:14.417

DISTINCT 适用于您选择的所有值，而不仅仅是某些列。在您的情况下，它将适用于所有：colA、colB、colC、colD。不可能选择所有列并使一些不同而另一些不同。Gordon 的示例中显示了这样做的唯一方法，这是唯一有效的示例和答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T21:30:14.147

也许使用简单的集合操作

使用 UNION 和 UNION ALL（请参阅[http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries004.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries004.htm)）

UNION colA 和 colB 将消除这些列中的双重条目，而 UNION ALL 将保留 colC 和 colD 中的所有值

# javascript - 当我点击不同的 DIV 时，会出现一个可点击的对象

> ID：15075971
> 
> 赞同：0
> 
> 时间：2013-02-25T20:34:28.703
> 
> 标签：javascript, html, css

请参阅我包含的图像。当您单击表格中的一行时（它很可能不是表格，因为每一行都可能是 Dojo 小部件），“下拉阴影”出现并且是可点击的。当用户单击它时，会出现一个新的内容层，并且下拉阴影从“打开”切换到“关闭”。

这一切都可以用 CSS 完成，意思是做一个 Hover:After 类型事件，还是我必须使用 JS 来实现这一点？JS 不是问题，只是想确认我必须使用 JS 来实现它。

![在此处输入图像描述](../Images/bd3d7b73cb7ddff1bd0950231a6ee794.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:50:53.583

点击事件需要Javascript，

1 - 您可以通过悬停显示附加内容

2 - 然后将其绑定到单击（*没有点使用悬停，因为旧 IE 不起作用，除非它是锚标记**`<a>`***）

3 - 然后你可以用js切换文本。

:)

**记住**

*   css 用于视觉
*   js 是为了行为 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:40:08.143

在 CSS 中有一个使用`:target`伪类的选项（更多关于这里[https://developer.mozilla.org/en-US/docs/CSS/:target](https://developer.mozilla.org/en-US/docs/CSS/:target)），但我不确定这是否适用于您的情况- 您必须为每一行创建单独的元素，这似乎并不明智。

# java - 对 HashSet 集合进行排序

> ID：15075973
> 
> 赞同：0
> 
> 时间：2013-02-25T20:34:29.467
> 
> 标签：java, sorting, hashmap

如果这是重复的，我深表歉意，但我找不到任何专门回答这个特定问题的答案。

我有一个 HashMap，其中包含一个与 Set 值配对的字符串键。我想根据集合的长度对地图中的值进行排序。考虑：

```
HashMap<String, Set<String>> myMap; 
```

包含：

```
{"A", {"Dukmerriot", "King", "Pumpkin"}}  
{"B", {"Steve"}}
{"C", {"Jib", "Jab", "John", "Julie"}}
{"D", {"Apple", "Amy", "Unicorn", "Charlie", "Raptor"}}
{"E", {}} 
```

我希望能够有效地获取列表`{"D", "C", "A", "B", E"}`（指定集合从最大到最小的顺序）`myMap`。

除了创建实现 Set 并覆盖该`compareTo`方法的包装类之外，有没有办法根据集合的长度对集合进行排序？

编辑：我应该指定我不需要使用 HashMap 来维护这个集合。我可以使用 TreeMap 或其他东西，但我不确定这是否可能，因为 Set 没有实现 Comparable。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T20:58:22.747

> 除了创建实现 Set 并覆盖 compareTo 方法的包装类之外，有没有办法根据集合的长度对集合集合进行排序？

这是一种完全可行的方法。您还可以使用`Comparator`：

```
List<Set<String>> mySets = new ArrayList<>(myMap.values());
mySets.sort(new Comparator<Set<String>>() {
    @Override
    public int compare(Set<String> a, Set<String> b) {
        return Integer.compare(a.size(), b.size());
    }
}); 
```

...但是现在您已经丢失了每组对应的密钥。所以让我们对地图条目进行排序！

```
List<Entry<String, Set<String>>> entries = new ArrayList<>(myMap.entrySet());
entries.sort(new Comparator<Entry<String, Set<String>>>() {
    @Override
    public int compare(Entry<String, Set<String>> a,Entry<String, Set<String>> b) {
        return Integer.compare(a.getValue().size(), b.getValue().size());
    }
}); 
```

现在您可以“轻松”获得密钥：

```
List<String> sortedKeys = new ArrayList<>();
for (Entry<String, Set<String>> e : entries) {
    sortedKeys = e.getKey();
} 
```

此列表不会是键的实时视图，但如果这是一个可接受的限制，它将是您最好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T21:11:22.807

```
final Map<String, Set<String>> map = new HashMap<>();

map.put("A", ImmutableSet.of("Dukmerriot", "King", "Pumpkin"));
map.put("B", ImmutableSet.of("Steve"));
map.put("C", ImmutableSet.of("Jib", "Jab", "John", "Julie"));
map.put("D", ImmutableSet.of("Apple", "Amy", "Unicorn", "Charlie", "Raptor"));
map.put("E", new HashSet<String>());

List<String> keys = new ArrayList<>(map.keySet());
Collections.sort(keys, new Comparator<String>() {

    @Override
    public int compare(String o1, String o2) {
        return Integer.valueOf(map.get(o2).size()).compareTo(map.get(o1).size());
    }
});

for (String key : keys) {
    System.out.println(key);
} 
```

印刷

```
D
C
A
B
E 
```

我使用了 Google Guava 的 ImmutableSet，只是为了使代码简短。您可能想查看他们的[Multimap](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multimap)，因为您可能会发现它很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:40:46.217

既然`HashMaps`不维护内部秩序，就不能那样做。您可以做的最好的事情是使用 获取所有值`map.values()`，对其进行迭代并查看哪个是最长的。

```
HashMap<T, V> map = ...
Collection<V> values = map.values();

int maxLen = Integer.MIN_VALUE;
Set<String> winner = null;
for(V v : values) {
   if(v.size() > maxLen) {
     winner = v;
   }
} 
```

`T`并且`V`是任意类型。在您的情况下，T 等于 String，V 等于 Set。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T21:00:37.720

我会创建一个自定义对象来同时保存`Set`和`String`。让类实现`Comparable`，实现是使用设定的大小。然后只需使用 a`List`填充它并`Collections.sort()`获得所需的结果。

```
class A implements Comparable {
    Set set;
    String string;

    ...constructor etc....

    @Override
    public int compare(A a,A b) {
        return Integer.compare(a.set.size(), b.set.size());
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T20:36:30.957

HashMap 不可排序。它们针对通过键查找值进行了优化。

# android - 如何解析 CSV 文件

> ID：15075979
> 
> 赞同：0
> 
> 时间：2013-02-25T20:34:55.403
> 
> 标签：android, split, readline

我正在尝试读取一个由一些行组成的文件，每行有 3 个部分： id 、 name 和 surname 。还有一个`EditText`用户需要输入他的 id 的地方，如果它与从文件中读取的一个匹配，它应该显示一个像这样的对话框：你是“姓名”，“用户名”吗？

我试过做以下事情，但不幸的是它不起作用。

```
public String getDNI() {
    String[] parts = fichero.split("\\,");
    String DNI = parts[0];
    return DNI;
}

public String getNombre() {
    String[] parts = fichero.split("\\,");
    String Nombre = parts[1];
    return Nombre;
}

public String getEnunciado() {
    String[] parts = fichero.split("\\,");
    String Apellido = parts[2];
    return Apellido;
}

public void onCreate(Bundle icicle)
   {
      super.onCreate(icicle);
      setContentView(R.layout.identificacion);
      Button bSiguiente = (Button) findViewById(R.id.btn_siguiente);
     dniText = (EditText) findViewById(R.id.dni_candidato);

     try {
            InputStream is = getAssets().open(File);
            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            // Skips lines
            for (i = 0; i<= 100; i++) {
                reader.readLine();

            }
            fichero = reader.readLine();

        } catch (IOException e) {
            e.printStackTrace();
        }

bSiguiente.setOnClickListener(new View.OnClickListener() {
    public void onClick(View arg0) {

   try{
       longitud = dniText.getText().toString();
          user = Integer.parseInt(dniText.getText().toString());
          DNIWord(user);
          for (i = 0; i<= 100; i++) {
         if (longitud.equals(getDNI())){
             // (longitud.length()==8){
                     showDialog(DIALOG_CONFIRMAR_CANDIDATO);}

                else{
                 showDialog(DIALOG_ERROR_DNI);
                }

   }
   }
      catch (NumberFormatException e)
    {}
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:01:56.513

更好的方法是创建一个类来代表您的用户：

```
class User{
    public String nombre;
    public String enunciado;
    public String dni;

   public User(String nombre, String enunciado, String dni){
      this.nombre = nombre;
      this.enunciado = enunciado;
      this.dni = dni;
   }

   public User(String csvLine){
       String[] values = csvLine.split(",");
       this(values[0], values[1], values[2]);
   }

} 
```

我更喜欢第一个构造函数，因为它更容易阅读。

像这样使用：

```
ArrayList<User> users = new ArrayList<User>();

...

     String s;
     while ((s = reader.readLine()) != null) {
         users.add(new User(s));
     } 
```

或者

```
 String s;
 String[] value;
 while ((s = reader.readLine()) != null) {
     values = s.split(",");
     users.add(new User(values[0], values[1], values[2])); <-- prefer this one
 } 
```

为了让它变得更好：

```
public static final int DNI = 0;
public static final int NOMBRE = 1;
public static final int ENUNCIADO = 2;

...

     String s;
     String[] value;
     while ((s = reader.readLine()) != null) {
         values = s.split(",");
         users.add(new User(values[DNI], values[NOMBRE], values[ENUNCIADO]));
     } 
```

现在您可以使用`users.contains`, `users.getElementAt`,`Collections.sort`等来处理您的用户集合`Collections.binarySearch`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:44:44.717

这是另一个有助于在 C++ 中解析 CVS 的问题：[如何在 C++ 中读取和解析 CSV 文件？](https://stackoverflow.com/questions/1120140/csv-parser-in-c)

如果您对其他语言（例如 python）持开放态度，那可能会容易得多。例如，python 有内置的 csv 工具： [http ://docs.python.org/2/library/csv.html](http://docs.python.org/2/library/csv.html)

# javascript - 在引导日期选择器中设置开始日期限制

> ID：15075984
> 
> 赞同：2
> 
> 时间：2013-02-25T20:35:18.890
> 
> 标签：javascript, twitter-bootstrap, datepicker

**更新：**

更新了 HTML 中的日期格式并将今天的日期分配给数据，但日期范围限制不受限制。

新小提琴：http: [//jsfiddle.net/D9Xav/143/](http://jsfiddle.net/D9Xav/143/)

==========

我正在尝试创建一个允许用户选择年份和月份的日期选择器。目前，我对为什么开始月份是 2013 年以及为什么开始日期限制没有阻止我超过 x 年感到困惑？

这是代码：http: [//jsfiddle.net/D9Xav/140/](http://jsfiddle.net/D9Xav/140/)

文件：

*   [http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)
*   [https://github.com/eternicode/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker)

代码在这里，因为规则：

```
<div id="dpMonths" class="input-append date" data-date-minviewmode="months"
    data-date-viewmode="years" data-date-format="mm-yyyy"
>
    <input type="text" readonly=""> 
    <span class="add-on">
        <i class="icon-th"></i>
    </span>
</div>

$('#dpMonths').data({
    date: '01/01/2000'
});

$('#dpMonths').datepicker('update');

$('#dpMonths').datepicker({
    startDate: '+10y'
}).on('changeDate', function (ev) {
    console.log(ev.date);
}); 
```

我设置了日期选择器数据，否则它会中断，不知道如何绕过它/我也不知道为什么它会被今天的日期/月份覆盖。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:45:49.050

看起来日期值 01/01/2000 需要采用与您选择的日期格式相同的格式：mm-yyyy。所以它需要是01-2000。

```
$('#dpMonths').data({
    date: '01-2000'
}); 
```

不过，您可以将该值作为数据属性添加到您的 HTML 中，例如`data-date="01-2000"`

进行更改后，日期限制也将起作用。

[编辑] 更新到新版本后，将您的 javascript 部分更改为：

```
$('#dpMonths')
    .datepicker({
        startDate: '-3y',
        format: 'mm-yyyy'
})
    .on('changeDate', function (ev) {
    console.log(ev.date);
}); 
```

小提琴：http: [//jsfiddle.net/SdZBF/5/](http://jsfiddle.net/SdZBF/5/)

# ios - 动态改变 UIKeyboards 返回键

> ID：15075987
> 
> 赞同：6
> 
> 时间：2013-02-25T20:35:21.427
> 
> 标签：ios, uitextfield, uikeyboard

我有两个 UITextfield 用户在第一个中输入他的名字，在第二个中输入电子邮件。我想知道如何根据名称文本字段是否有条目来更改 UIKeyboards 返回键。

例如，如果 nametextfield 为空，那么我希望 UIkeyboard 返回键为 Next，否则如果 nametextfield 中有一个条目，那么当用户选择电子邮件文本字段时，我希望提交返回键。

这可能吗？如果是这样，我将如何去完成它？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T20:50:11.660

您可以将返回键自定义为您可以在`UIReturnKeyType`每个枚举中看到的前缀值`UITextField`。

```
textFieldName.returnKeyType = UIReturnKeyNext;
textFieldEmail.returnKeyType = UIReturnKeyDefault; 
```

不确定这是否是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T23:50:39.220

**您有机会在UITextFieldDelegate 协议**方法**textFieldShouldBeginEditing:**中设置键盘特性，该方法在文本字段成为第一响应者之前调用（实际上是决定它是否**可能**成为第一响应者）。如果您还没有相关文本字段的委托，则必须分配一个委托并至少实现该方法。大概处理文本字段的同一对象可以保存委托方法。以下实现将返回键设置为“搜索”。

```
- (BOOL) textFieldShouldBeginEditing:(UITextField *)textField {
    NSLog(@"textFieldShouldBeginEditing");
    textField.returnKeyType = UIReturnKeySearch;
    return YES;
} 
```

您必须查看文本字段的内容来决定使用什么值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T20:48:56.070

利用 textField.returnKeyType 属性。

您可以在此处查看所有可用选项[http://developer.apple.com/library/ios/documentation/uikit/reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/doc/c_ref/UIReturnKeyType](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/doc/c_ref/UIReturnKeyType)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-02T15:42:43.057

textfield.returnKeyType = UIReturnKeySearch;

# c++ - 在 Windows 中通过 c++ 更改另一个程序的变量

> ID：15075988
> 
> 赞同：0
> 
> 时间：2013-02-25T20:35:24.390
> 
> 标签：c++, windows, api

我想通过 c++ 更改程序的变量。老实说，我想制作一个机器人来玩暗黑破坏神II。我没有恶意，我只是想学习。暗黑破坏神 II 从我还是个孩子的时候就一直是我最喜欢的游戏，所以我认为这将是探索 c++ 和 OOP 语言其他方面的好途径。这是否可以通过指定的方式实现，如果不是（或者即使是），请在正确的方向上轻推我。

我已经对该主题进行了一些研究，尽管它没有产生太多结果。据我了解，我需要通过 Windows API 访问程序的变量。这让我想到了第二个问题：stackoverflow 的伟大社区是否会推荐我阅读以学习和理解 Windows API 的任何教程或书籍？

非常感谢有关此主题或相关主题的任何和所有建议。感谢您阅读并可能回复。

米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:08:44.183

为了更改另一个程序的变量，您将需要以下内容：

**变量在内存中的位置。**
如果它在堆栈或局部变量上，请忘记它。几乎不可能在其他程序正在执行时进行修改。

**变量的类型。**
它是双精度、浮点、整数还是结构？

**变量的目的。** 变量的目的是什么？这是要修改的正确变量吗？何时使用或何时可以修改？

您还应该弄清楚使用哪个操作系统 API 来访问其他程序的内存。

# ruby - Ruby Regex：如何匹配遵循另一个模式的模式？

> ID：15075990
> 
> 赞同：0
> 
> 时间：2013-02-25T20:35:25.700
> 
> 标签：ruby

我的 ID 号码应该在文本之后，`ID:`所以我的文件包含

`ID: A1234` `ID: A1235` `ID: A1236`

等等。我想匹配`/[A-Z]*[0-9]+/`，但前提是它出现在 characters 之后`ID:`。我如何将它添加到正则表达式但不让它返回 ID: 作为结果的一部分？我只希望它匹配 ID: 后面的正则表达式，因为在文件末尾我有数字并且它正在返回它们，但这些不是 ID 号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:38:01.503

```
/ID:\s*([A-Z]*[0-9]+)/ 
```

括号捕获括号内的内容，然后您可以使用反向引用来引用它。如果您发布一些有关如何使用正则表达式的代码，我可以尝试添加更多细节来向您展示如何使用。

# eclipse - 如何从 Eclipse 运行和调试 JBoss EAP 6？

> ID：15075991
> 
> 赞同：2
> 
> 时间：2013-02-25T20:35:27.960
> 
> 标签：eclipse, jboss

我在我的本地计算机上安装了 JBoss EAP 6.01，并在我的 eclipse（Juno）中安装了 JBoss 工具，我尝试从我的 eclipse 中访问 JBoss 和调试，我按照新的服务器向导在 eclipse 中创建和配置服务器，见附图：

![在 Eclipse 中创建和配置 JBoss](../Images/87d5f41196ffc49170ef293d008ecc22.png)

![在 Eclipse 中创建和配置 JBoss](../Images/61603ed5215255c42038659c66b9c9a7.png)

![在此处输入图像描述](../Images/bce6f81cca7f4fd16cb396a8254f3790.png)

然后我尝试启动服务器，但是，连接到 JBoss Runtime Server 的 jmx 时出错

谁能帮我弄清楚为什么？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:55:46.973

如果您想 a) 在 eclipse 中运行完全托管的 JBoss 或 b) 您想手动启动 Jboss 然后让 eclipse 连接到它，您的问题有点不清楚。

我假设它是点'a'，并且您希望 eclipse 为您启动和管理 jboss eap 服务器。

在这种情况下，在您的第二个屏幕截图中，您需要取消选中所有复选框并点击下一步。还要确保在服务器选项卡中创建服务器后双击服务器以显示服务器配置页面并输入用户名/密码等。

你应该准备好了。让我知道这是否有效。

# opencl - OpenCl 声明，是真是假？

> ID：15075992
> 
> 赞同：1
> 
> 时间：2013-02-25T20:35:28.740
> 
> 标签：opencl

我正在阅读一些结果。在那里我看到他们使用了 5120 个工作组和 1 的本地大小。我对 OpenCl 的了解有限，我想知道这个说法是否正确：

> 从 GPU 可以看出，第一个测试有 5120 个工作组，每个工作组有 1 个工作项。这意味着并行执行的线程受限于机器中的计算单元数量。例如，如果 GPU 有 20 个计算单元，则最多只能有 20 个并行工作的线程。虽然当本地大小增加到 2 时，同时运行的线程数量增加了一倍

从阅读有关 OpenCl 的一些信息来看，这似乎是正确的。虽然我需要第二个意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:37:17.540

**更新**。嗯，nat chouf 的评论是对的，我将问题理解为“同时飞行”而不是“同时物理执行”。

正如我所写，可以在给定时间在单个计算单元中安排多个工作组。这种“运行中”工作组的数量受每个计算单元上可用资源（本地内存、寄存器等）的限制。

在现有的实现 (afaik) 中，计算单元将从同一工作组中选择一个工作项块 (warp/wavefront) 来执行，在计算单元中的所有正在运行的块中。这个块的一个“指令”被插入到流水线中（可能需要几个周期，每个“指令”可能对应于每个工作项中的几个操作），然后再选择另一个块。

所以，是的，如果工作组大小为 1，则每个计算单元只有 1 个工作项将同时物理启动。但可能所有工作项都可能同时在 GPU 中运行。

# visual-studio - VS2005编译时经常崩溃

> ID：15075993
> 
> 赞同：0
> 
> 时间：2013-02-25T20:35:39.527
> 
> 标签：visual-studio, debugging, linker, crash, visual-studio-2005

我可以更改评论/取消评论的一件小事，并且 VS2005 在任何一种情况下都将崩溃或不崩溃，而无需其他原因。

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: devenv.exe
  Application Version:  8.0.50727.867
  Application Timestamp:    45d2c842
  Fault Module Name:    StackHash_0646
  Fault Module Version: 6.1.7601.17725
  Fault Module Timestamp:   4ec49b8f
  Exception Code:   c0000374
  Exception Offset: 000ce6c3
  OS Version:   6.1.7601.2.1.0.256.4
  Locale ID:    1033
  Additional Information 1: 0646
  Additional Information 2: 06468f0034e46fb7e5e65a0a8a306ffb
  Additional Information 3: 9aba
  Additional Information 4: 9abaaa502ccb3837971bddc9d127747d 
```

由于上述内容对我真的没有帮助，有什么方法可以诊断出发生了什么吗？我能够摆脱的调试编译崩溃（在 VS2005 中）就是堆损坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:14:14.773

您可以尝试一些选项：

*   `/log`您可以在使用as 属性启动 Visual Studio 时获取日志。

[http://msdn.microsoft.com/en-us/library/vstudio/ms241272(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms241272(v=vs.80).aspx)

*   创建故障转储

[http://blogs.msdn.com/b/mikhailarkhipov/archive/2006/07/25/678308.aspx](http://blogs.msdn.com/b/mikhailarkhipov/archive/2006/07/25/678308.aspx)

*   卸载 ReSharpen（如果你使用它）

*   重新安装 Visual Studio

*   创建一个新的 Windows 用户，看看你是否遇到同样的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T15:28:26.660

嗯.. 解决方案：摆脱过时的错误 IDE 并升级到更新的 IDE。去了[VSC15](https://www.visualstudio.com/en-us/products/visual-studio-community-vs.aspx)。从那以后没有崩溃。

# google-maps-sdk-ios - Google SDK ios 6.0 GMSMutablePath 与 Apple Overlays

> ID：15075994
> 
> 赞同：1
> 
> 时间：2013-02-25T20:35:42.103
> 
> 标签：google-maps-sdk-ios

晚上我无法将一些 MKOverlays（使用 Apple 记录的文件 KMLParser.h 和 KMLParser.m 创建）转换为 GMSMutablePaths 以在新的 Google Maps SDK for iOS 6.0 中创建多边形形状。有人有意见吗？谷歌地图对于处理 1000 多个多边形/叠加层（在苹果 mapkit 中似乎很容易管理、添加、删除、删除和“点击”）不是用户友好的吗？提前感谢您的任何回复。麦克风

# playframework - 什么会导致 Play 自动重新编译中断？

> ID：15075996
> 
> 赞同：0
> 
> 时间：2013-02-25T20:35:50.450
> 
> 标签：playframework, playframework-2.1

[也可以看看](https://stackoverflow.com/questions/11808053/java-play-2-does-not-recompile)

不知何故，我确实导致 Play 停止重新编译我的源代码。我杀死了这个过程，`play clean`一次`play start`又一次。

我确认没有另一个胭脂播放过程。

我相信触发问题的原因是我试图使用`play debug`. 我能做些什么来找出我的重新编译失败的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:12:29.903

[如此处所述](https://stackoverflow.com/questions/15075843/what-is-the-equivalent-to-play-stop-for-play-framework-2-1/15076154#15076154)，`play run`已重新编译，`play start`适用于生产模式。就我而言，我有一个从 play start 开始的 rouge 过程。

解决：

1.  杀死所有可疑的 java.exe 进程
2.  `play clean`
3.  `play run`

# mysql - 锁定 MySQL 数据库中的记录

> ID：15075998
> 
> 赞同：0
> 
> 时间：2013-02-25T20:36:04.170
> 
> 标签：mysql, locking, block

是否可以锁定 MySQL 表中的特定记录？

我有一个表“类别”的结构，它与同一个表的“id”有一个内部关系（对于嵌套和父子类别）：

```
CREATE TABLE `dokumenti`.`categories` (
`id` INT( 9 ) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`categoryId` INT( 9 ) UNSIGNED NOT NULL,
`title` VARCHAR( 128 ) NOT NULL ,
`description` TEXT NULL DEFAULT NULL ,
INDEX ( `categoryId` )
) ENGINE = InnoDB; 
```

`categoryId`默认情况下可以是`0`或`NULL`值。

是否可以插入这样的记录：

```
INSERT INTO categories VALUES(0, 0, 'Root Level Category', 'Root Level Category') 
```

**并锁定它，使其不能被删除、更新或更改？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:40:43.313

如果您需要永久“锁定”，可以查看[“存档”引擎](http://dev.mysql.com/doc/refman/5.0/en/archive-storage-engine.html)