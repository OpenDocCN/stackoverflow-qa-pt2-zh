# StackOverflow 问答 15115000-15115999

# opencv - 从图像中删除所有轮廓

> ID：15115000
> 
> 赞同：0
> 
> 时间：2013-02-27T14:48:00.457
> 
> 标签：opencv, contour

我需要从二进制图像中删除小部分。所以我通过 findContour 找到了它的轮廓。然后我通过contourArea找到每个轮廓的面积。是否有一个函数可以在边界上和这些轮廓内绘制所有像素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:50:42.173

cvDrawContours(图像, 轮廓, 255, 255, 0, CV_FILLED);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T06:37:45.580

或者，更确切地说，因为您使用的是 OpenCV 2.x API：
drawContours(image, contours, contourIdx, Scalar(255,255,255))

有关更多信息，请参阅[文档](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=drawcontours#cv.DrawContours)。

# android - 简单的网络位置测试不起作用？

> ID：15115001
> 
> 赞同：0
> 
> 时间：2013-02-27T14:48:01.150
> 
> 标签：android

我只想看看从粗略的位置修复返回的位置是什么形式。像这样使用谷歌代码：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_get_mission);

     // Acquire a reference to the system Location Manager
        LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

        // Define a listener that responds to location updates
        LocationListener locationListener = new LocationListener() {
            public void onLocationChanged(Location location) {
              // Called when a new location is found by the network location provider.
              makeUseOfNewLocation(location);
            }

            public void onStatusChanged(String provider, int status, Bundle extras) {}

            public void onProviderEnabled(String provider) {}

            public void onProviderDisabled(String provider) {}
          };

        // Register the listener with the Location Manager to receive location updates
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

    }

    private void makeUseOfNewLocation(Location location) {

        TextView locationOutput = (TextView)findViewById(R.id.locationOutput);
        locationOutput.setText((CharSequence) location);

    } 
```

这在我的手机上不起作用，所以我认为这并不容易。我错过了什么？

TIA

当前权限已启用：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:51:28.463

您是否在清单中添加了权限？

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

您还可以获得空的位置，确保能够处理它。

**编辑**

尝试`getLastKnownLocation(LocationManager.GPS_PROVIDER);`或添加 wifi 权限。

# android - 将 checkBoxPreference 动态添加到 PreferenceFragment

> ID：15115003
> 
> 赞同：0
> 
> 时间：2013-02-27T14:48:08.330
> 
> 标签：android

我需要显示从 API 获得的文件和文件夹的目录列表。一旦用户单击其中一个目录，我就会查找它的子目录并将它们列在右侧的父目录下，这样就可以继续。**不确定最好的方法是什么？**

我做了一个设置视图并有一个“目录”设置。单击它后，我需要在 PreferenceScreen 中加载子目录。并且用户必须能够深入到子目录并使用**checkBoxPreference之类的东西选择他想要的目录**

所以最后我可以制作一个检查目录的列表。

**我的想法**

1.  显示文件夹，一旦用户单击文件夹，将子文件夹滑动到视图中，等等。
2.  显示文件夹，一旦用户单击文件夹，就会在父文件夹下方显示子文件夹，将子文件夹向右移动一点。
3.  显示选择为**checkBoxPreferences**的文件夹，并有一个按钮来启动用户从中选择文件夹的新视图

我对 Android 开发人员真的很陌生，不知道如何实现这些？

你能指点我的方向，让我试试吗？我不是要代码示例，只是对一些可能的方法或想法的逻辑解释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:04:04.130

你的问题很抽象，所以我不能给你一个具体的答案。

不过，我可以提供一些指导和示例。

动态添加首选项的示例（将 EditTextPreference 替换为 CheckboxPreference）并在此之前获取文件列表：

**SettingsActivity**（扩展 PreferenceActivity）

```
private void setHomeDirectoryPreference(String home_dir)
{
    final EditTextPreference etp = new EditTextPreference(this);

    etp.setKey("home_directory");
    etp.setTitle("Home directory");
    //...
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);

    ((PreferenceScreen) findPreference("initial_preference")).addPreference(etp);
} 
```

列出文件子文件：

```
file.listFiles(); 
```

此外，您可能需要经常检查底层文件是否存在：

```
f.exists(); 
```

> 单击它后，我需要在 PreferenceScreen 中加载子目录

我个人会使用 PreferenceDialog 和 ListView 来做：

DialogPreference 示例：

```
public class HiddenFilesDialogPreference extends DialogPreference {

    public static Context ctx;

    public HiddenFilesDialogPreference(Context context, AttributeSet attrs) {
        super(context, attrs);

        this.ctx = context;
    }

    @Override
    protected View onCreateDialogView() {

        LayoutInflater inflater = ((Activity) ctx).getLayoutInflater();

        View vw = inflater.inflate(R.layout.content_view, null);

        ListView lv = (ListView) vw.findViewById(android.R.id.list);

        File[] hidden_files = HiddenFileHandler.getAllHiddenFilesAsFiles();

        HiddenFilesListAdapter adapter = new HiddenFilesListAdapter(ctx, hidden_files);
        lv.setAdapter(adapter);

        return vw;
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        super.onDialogClosed(positiveResult);
        persistBoolean(positiveResult);
    }

    @Override
    public void onClick (DialogInterface dialog, int which)
    {
        super.onClick(dialog, which);

        Log.v("which", Integer.toString(which));

        if(which == -1) { //Clear all
            HiddenFileHandler hfh = new HiddenFileHandler(ctx);

            hfh.clearHiddenFiles();
        }
    }

} 
```

然后，在您的对话框中，您可以设置 onClickListeners() 来替换对话框内容等。

从具体实施开始，然后返回更具体的问题。

# android - 全屏启动wifi设置活动

> ID：15115007
> 
> 赞同：0
> 
> 时间：2013-02-27T14:48:18.427
> 
> 标签：android, android-wifi

我需要创建一个需要调用 android wifi setting screen 的项目。我的项目需要在全屏模式下运行，所以这是我的 AndroidManifest.xml 文件。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.fullscreenwifi"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

在主要活动中，我放置了一个按钮，这是我的按钮 onClick 方法

```
public void onClick(View v)
   startActivity(new Intent(Settings.ACTION_WIFI_SETTINGS));
} 
```

当我单击此按钮时，它会启动 wifi 设置屏幕，但此屏幕**不会以全屏模式启动**。我完全被这个问题震惊了。有没有办法把这个wifi设置屏幕和全屏模式一起调用？. 提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:52:00.147

不，您不能通过代码强制设置应用以全屏模式启动。

设置应用程序是一个独立的应用程序，它被设计为在没有全屏的情况下运行。通过使用 Intent，您可以启动 Settings 应用程序。用户不再在您的应用程序中，因此您无法控制显示活动的全屏状态。

# eclipse - 带有 Java Server Faces 1.2 的 Maven Java EE 配置标记

> ID：15115009
> 
> 赞同：26
> 
> 时间：2013-02-27T14:48:23.083
> 
> 标签：eclipse, maven, m2e, dwm

我在 Eclipse 中遇到了一个奇怪的 Maven 配置问题。虽然我可以构建项目并将其部署到 tomcat 而不会出现任何错误，但 Marker 选项卡仍显示以下消息：

```
[-] Maven Java EE Configuration Problem
(x) JavaServer Faces 1.2 can not be installed : One or more constraints have not been satisfied.
(x) JavaServer Faces 1.2 requires Dynamic Web Module 2.5 or newer. 
```

我实际上正在使用动态 Web 模块 2.4，这将是消息的来源。我需要将其更改为至少 2.5 才能使用 JSF。问题是，我什至没有使用 JSF。

因此，可能项目的依赖项之一需要它。我运行以下命令来找出我的项目的依赖关系树：

```
mvn dependency:tree -DoutputFile=<i>/path/to/outputFile/dependencies.txt</i> 
```

和惊喜！没有提到 JSF 1.2。

**编辑**忘记添加我的电脑设置：

操作系统：Ubuntu 12.10

日食：4.2 SR1

Java：jdk1.5.0_22 和 jdk1.7

阿帕奇 Maven：3.0.4

Maven 主页：/usr/share/maven

平方米：1.3.1.20130219-1424

m2e-wtp: 0.17.0.20130212-1821

我的同事都没有这个问题。其中两个使用 Windows，两个使用 Ubuntu 12.10。其中之一使用 Eclipse 4.2，其他使用 Eclipse 3.7。所以显然这与 4.2SR1 或我的项目设置有关。但我找不到问题出在哪里。

这是我的 pom.xml 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>edited</groupId>
    <artifactId>edited</artifactId>
    <packaging>war</packaging>
    <version>edited</version>
    <name>edited</name>
    <distributionManagement>
        <repository>
            <id>deployment</id>
            <name>Internal Releases</name>
            <url>http://edited/nexus/content/repositories/releases/</url>
        </repository>
        <snapshotRepository>
            <id>deployment</id>
            <name>Internal Releases</name>
            <url>http://edited/nexus/content/repositories/snapshots/</url>
        </snapshotRepository>
    </distributionManagement>
    <dependencies>
        <!-- Testes com Junit -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
        </dependency>
        <dependency>
            <groupId>org.hamcrest</groupId>
            <artifactId>hamcrest-all</artifactId>
            <version>1.3</version>
            <scope>test</scope>
        </dependency>
        <!-- Testes Funcionais com cucumber-jvm -->
        <dependency>
            <groupId>info.cukes</groupId>
            <artifactId>cucumber-spring</artifactId>
            <version>1.1.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>info.cukes</groupId>
            <artifactId>cucumber-junit</artifactId>
            <version>1.1.1</version>
            <scope>test</scope>
        </dependency>
        <!-- Mockito para criar mocks e stubs -->
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-all</artifactId>
            <version>1.9.5</version>
        </dependency>
        <!-- Fixture Factory Test Data Builder -->
        <dependency>
            <groupId>br.com.fixturefactory</groupId>
            <artifactId>fixture-factory</artifactId>
            <version>2.1.0-SNAPSHOT</version>
            <scope>test</scope>
        </dependency>
        <!-- Jasper Reports -->
        <dependency>
            <groupId>net.sf.jasperreports</groupId>
            <artifactId>jasperreports</artifactId>
            <version>4.5.1</version>
        </dependency>
        <!-- Struts 2 -->
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>2.2.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts.xwork</groupId>
            <artifactId>xwork-core</artifactId>
            <version>2.2.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-tiles-plugin</artifactId>
            <version>2.2.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-json-plugin</artifactId>
            <version>2.2.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-jasperreports-plugin</artifactId>
            <version>2.2.1.1</version>
        </dependency>
        <!-- Banco de dados Mysql + Hibernate + c3p0 -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.22</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.3.1.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.4.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-commons-annotations</artifactId>
            <version>3.1.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.2.0.Final</version>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>
        <!-- <dependency> <groupId>javax.xml.bind</groupId> <artifactId>jaxb-api</artifactId> 
            <version>2.2.7</version> </dependency> <dependency> <groupId>com.sun.xml.bind</groupId> 
            <artifactId>jaxb-impl</artifactId> <version>2.2.6</version> </dependency> -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-c3p0</artifactId>
            <version>3.6.10.Final</version>
        </dependency>
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>
        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.3.GA</version>
        </dependency>
        <!-- Servlet API -->
        <dependency>
            <groupId>org.apache.tomcat</groupId>
            <artifactId>servlet-api</artifactId>
            <version>6.0.36</version>
        </dependency>
        <!-- Especificação do Java EE -->
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.5</version>
        </dependency>
        <dependency>
            <groupId>javaee</groupId>
            <artifactId>javaee-api</artifactId>
            <version>5</version>
            <scope>provided</scope>
        </dependency>
        <!-- Logging -->
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.7.2</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.7.2</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.7.2</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>1.7.2</version>
        </dependency>
        <!-- Apache Commons -->
        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2.1</version>
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging-api</artifactId>
            <version>1.1</version>
        </dependency>
        <dependency>
            <groupId>commons-beanutils</groupId>
            <artifactId>commons-beanutils</artifactId>
            <version>1.8.3</version>
        </dependency>
        <dependency>
            <groupId>commons-httpclient</groupId>
            <artifactId>commons-httpclient</artifactId>
            <version>3.1</version>
        </dependency>
        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.6</version>
        </dependency>
        <!-- Templating -->
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-core</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-api</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-servlet</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-template</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-compat</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.freemarker</groupId>
            <artifactId>freemarker-gae</artifactId>
            <version>2.3.19</version>
        </dependency>
        <!-- Quartz Scheduler -->
        <dependency>
            <groupId>org.quartz-scheduler</groupId>
            <artifactId>quartz</artifactId>
            <version>1.8.6</version>
        </dependency>
        <!-- Geração de Código -->
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib-nodep</artifactId>
            <version>2.2.2</version>
        </dependency>
        <!-- Xstream -->
        <dependency>
            <groupId>com.thoughtworks.xstream</groupId>
            <artifactId>xstream</artifactId>
            <version>1.4.3</version>
        </dependency>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.0.6.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>3.0.6.RELEASE</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.0.6.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.0.6.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-spring-plugin</artifactId>
            <version>2.1.8</version>
        </dependency>
        <!-- RestEasy -->
        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>resteasy-jaxrs</artifactId>
            <version>2.0.1.GA</version>
        </dependency>
        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>resteasy-jaxb-provider</artifactId>
            <version>2.0.1.GA</version>
        </dependency>
        <!-- Xfire -->
        <dependency>
            <groupId>org.codehaus.xfire</groupId>
            <artifactId>xfire-all</artifactId>
            <version>1.2.6</version>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-mock</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <!-- JQuery -->
        <dependency>
            <groupId>org.webjars</groupId>
            <artifactId>jquery</artifactId>
            <version>1.9.1</version>
        </dependency>
    </dependencies>
    <build>
        <finalName>edited</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <encoding>ISO-8859-1</encoding>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-05-12T09:13:16.563

我有同样的问题。在我的 Maven 项目中添加速度依赖项后，我在标记选项卡中遇到了同样的错误。然后我注意到 maven 项目创建的 web.xml 文件具有 servlet2.3 架构。当我将其更改为 servlet 3.0 架构并保存项目时，此错误就消失了。这是 maven 创建的 web.xml 文件

```
<!DOCTYPE web-app PUBLIC
"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
    <display-name>Archetype Created Web Application</display-name>
</web-app> 
```

将其更改为

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
                        http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
                        version="3.0">
    <display-name>Archetype Created Web Application</display-name>

</web-app> 
```

保存项目，您的错误就会消失。

之后，如果标记选项卡仍显示消息，则选择项目。做鼠标右键。选择 Maven --> 更新项目。

希望那时错误会消失。

谢谢

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-10-15T17:44:09.423

我也有同样的问题。

我的解决方案是按照[此处](http://micharg.blogspot.in/2011/11/eclipsemaven-error-dynamic-web-module.html)的建议在[pom.xml](http://maven.apache.org/pom.html#What_is_the_POM)中添加以下内容。

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-12-05T21:16:57.990

我有一个类似的问题。我正在处理一个无法控制 web.xml 配置文件的项目，因此我无法使用有关更改版本的建议。当然，该项目没有使用 JSF，所以这对我来说特别烦人。

我发现有一个***非常简单的修复***方法。转到 Preferences > Maven > Java EE Itegration 并取消选中“JSF Configurator”框。

在再次导入项目之前，我在一个新的工作区中执行了此操作，但它可能在现有项目上同样有效……不确定。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-01-15T19:06:37.747

我在 Maven 项目中也遇到过这种情况。为了解决这个问题，我必须这样做：

首先更新你的 web.xml

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
                    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
                    version="3.0">
<display-name>Servlet 3.0 Web Application</display-name> 
```

然后右键单击您的项目并选择 Properties -> Project Facets 在那里您将看到您的 Dynamic Web Module 的版本。这需要从 2.3 或其他版本更改为 2.5 或更高版本（我选择了 3.0）。

但是要做到这一点，我必须取消选中 Dynamic Web Module -> Apply 的复选框，然后对项目进行 Maven 更新。返回到 Project Facets 窗口，它应该已经与您的 web.xml 配置匹配——在我的例子中是 3.0。如果没有，您应该可以更改它。

如果这对您不起作用，请尝试右键单击 Dynamic Web Module Facet 并选择更改版本（并确保它没有被锁定）。

或者您可以按照以下步骤操作：

1.  窗口 > 显示视图 > 其他 > 常规 > 导航器
2.  您的项目目录下有一个 .settings 文件夹
3.  将此行中的动态 web 模块版本更改为 3.0
4.  将此行中的 Java 版本更改为 1.5 或更高版本

不要忘记更新您的项目

希望有效！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-03-27T17:28:57.030

在我的 POM 中更改了很多内容并更新了我的 JDK 之后，我得到了与 Google App Engine 相关的“一个或多个约束没有得到满足”。解决方案是*删除 Eclipse 项目设置并重新导入它*。

在 OS X 上，我在终端中通过切换到项目目录和

```
rm -rf .project
rm -rf .settings 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-28T09:46:09.397

您应该在项目配置中检查项目方面。您可以在此处取消选中 JSF 依赖项。

![在此处输入图像描述](../Images/0eef6253ecbffacbc71fdd755f6798e9.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-10T14:51:46.720

每次更新项目时，m2e 插件都会生成项目配置（Maven->Update Project ...该操作会覆盖在 Eclipse 中手动配置的构面设置。因此，您必须在 pom 级别对其进行配置。通过在 pom 文件中设置属性，您可以知道m2e插件做什么。

在 pom.xml 级别启用/禁用 JAX-RS/JPA/JSF 配置器 可以在工作区级别从 Window > Preferences > Maven > Java EE Integration 启用或禁用可选的 JAX-RS、JPA 和 JSF 配置器。现在，您可以直接从 pom.xml 属性对这些配置器进行更精细的控制：

在 pom 属性部分添加 false 将禁用 JAX-RS 配置器 在 pom 属性部分添加 false 将禁用 JPA 配置器 在 pom 属性部分添加 false 将禁用 JSF 配置器 pom 设置始终覆盖工作区首选项。因此，例如，如果您在工作区级别禁用了 JPA 配置器，则使用 true 无论如何都会在您的项目中启用它。（[http://wiki.eclipse.org/M2E-WTP/New_and_Noteworthy/1.0.0](http://wiki.eclipse.org/M2E-WTP/New_and_Noteworthy/1.0.0)）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-05-20T09:44:33.487

Eclipse 在事实屏幕上有错误，有时不会更新工作区中的配置文件。有两种选择可以尝试：

1.  转到位于 Eclipse 项目的 .settings 文件夹内的 org.eclipse.wst.common.project.facet.core.xml 文件。去手动删除 JSF 方面条目。您还可以更新其他方面。

2.  右键单击项目并转到属性-> Maven-> Java EE 集成。选择选项：启用项目特定设置，启用 Java EE 配置，Maven 归档器在构建目录下生成文件

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-18T22:48:52.530

[与Basit](https://stackoverflow.com/users/1000510/basit)相同的解决方案.. 但**3.0 版对我不起作用** 试试这个 ..**它对我来说可以集成 struts 2.x**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>blabla</display-name>
...
</web-app> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-16T01:40:08.267

这是一个较旧的线程，但我会为其他人发布我的答案。[如JavaServer Faces 2.2需要动态Web模块2.5或更高版本](https://stackoverflow.com/questions/22361005/javaserver-faces-2-2-can-not-be-installed)中所述，我必须在更改后在不同的工作区重新创建项目以使其工作

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-04-16T02:15:55.027

以下步骤应该是解决您问题的简单方法

> 1.  Project->Properties->ProjectFacet-->取消选中 jsf apply 并确定。
> 2.  Project->Maven->UpdateProject-->这将解决问题。

在更新项目时，Maven 将自动选择动态 web 模块

# android - 用于检测三星 Galaxy 相机变焦按钮的 Android API

> ID：15115012
> 
> 赞同：0
> 
> 时间：2013-02-27T14:48:27.967
> 
> 标签：android, zooming

在Android中，是否有任何API可以检测何时按下“Samsung Galaxy Camera”等设备的“缩放硬件按钮”？如果是按键，那会是哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T16:44:11.113

确实是按键，键码 KeyEvent.KEYCODE_ZOOM_IN 和 KeyEvent.KEYCODE_ZOOM_OUT。

# linux - Vim - CtrlP（或病原体）仅加载帮助页面？

> ID：15115013
> 
> 赞同：2
> 
> 时间：2013-02-27T14:48:32.303
> 
> 标签：linux, ubuntu, vim, pathogen, ctrlp

我是 Vim 的新手，现在我遇到了问题：

我在我的 vim 上安装了**Pathogen**和**CtrlP**脚本。但是 CtrlP 不能正确加载任何 CtrlP 的命令或快捷方式都不起作用，只有帮助页面起作用。它说 :CtrlP 不是编辑器命令，并且 CtrlP 的快捷方式没有任何作用。

Pathogen.vim 在*~/.vim/autoload/*下，CtrlP 在*~/.vim/bundle/ctrlp.vim/*

这是我的.gvimrc：

```
" Enable pathogen
call pathogen#infect()
call pathogen#helptags()

" Remove toolbars and scrollbars
set guioptions-=r " Scrollbars
set guioptions-=T " Toolbar
set guioptions-=m " Menubar

" Enable line numbers, curosorline and set colorscheme
set number
set cursorline
colo wombat

" Reload .gvimrc when saved it
au BufWritePost .gvimrc so %

" Ctrl-S file saving shortcut
nmap <C-S> :w<CR> 
```

这是我安装脚本的方式：

```
$ cd
$ mkdir -p .vim .vim/autoload .vim/bundle
$ curl -Sso ~/.vim/autoload/pathogen.vim \
    https://raw.github.com/tpope/vim-pathogen/master/autoload/pathogen.vim
$ cd .vim
$ git clone https://github.com/kien/ctrlp.vim.git bundle/ctrlp.vim
$ gvim ~/.gvimrc 
```

然后我写了那个 .gvimcr 文件，然后用谷歌搜索，然后来这里问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:08:39.353

是的，我终于解决了！

将你的`execute pathogen#infect()`and`filetype plugin indent on`移到你的`~/.vimrc`，我不知道，但如果这些行在`~/.gvimrc`.

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:41:28.287

看来您在克隆 CtrlP 存储库时采取了错误的步骤。@romainl 已经指出了这一点，但您的修复可能不正确。

这是修改后的步骤

```
$ cd
$ mkdir -p .vim/autoload .vim/bundle
$ curl -Sso ~/.vim/autoload/pathogen.vim \
    https://raw.github.com/tpope/vim-pathogen/master/autoload/pathogen.vim
$ cd .vim/bundle
# Different git command! Do it in root of /bundle!
$ git clone https://github.com/kien/ctrlp.vim.git 
```

现在转到 vim，运行`:Help`以重建 Pathogen 的帮助文件。

现在应该没事了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-10T06:24:45.943

您可能创建了错误的树目录。确保 ctrlp.vim 目录位于 bundle 目录中。我也遇到了同样的情况，因为我在 bundle 存储库中做了 ctrlp 插件存储库的 git clone。

# msbuild - TFS 2010 为某些项目构建具有不同路径的解决方案

> ID：15115023
> 
> 赞同：1
> 
> 时间：2013-02-27T14:48:54.837
> 
> 标签：msbuild, tfsbuild

我有一个用于 TFS 2010（构建服务器）构建任务的解决方案。

大多数项目都可以在同一个位置结束，唯一的区别是一些动态加载的插件，它们应该在 /Plugins 相对于其他程序集的子文件夹中。

1）我已经尝试了一些东西，比如修改我的 DefaultTemplate.xaml，只是发现（因为我只指定了 .sln 文件）我无法区分每个项目级别的输出路径。（在工作流程中，有一个带有 serverBuildProjectItem 变量的“对于 BuildSettings.ProjectsToBuild 中的每个项目” - 尽管将 .sln 文件作为我的项目，但这仅被调用一次。）因此这无法区分每个项目基础。

![在此处输入图像描述](../Images/29a9716e6c147eff55205bb93b2ca2b6.png)

2）我尝试的另一件事是指定在某处找到的 OutputPath 作为解决方案。

```
<OutputPath Condition=" '$(CommonOutputPath)'=='' ">../myOutDir/Plugins/</OutputPath>
<OutputPath Condition=" '$(CommonOutputPath)'!='' ">$(CommonOutputPath)Plugins\</OutputPath> 
```

这也将所有程序集留在服务器构建的同一文件夹中，因此不起作用。

3）我开始创建一个构建后事件以手动将文件复制到正确的位置，但到目前为止未能区分服务器案例和本地案例。（这在这里不起作用。）

```
<PropertyGroup Condition=" ' $(TeamBuildConstants) ' == ' '>
<PostBuildEvent>mkdir $(SolutionDir)..\out\$(OutDir)plugins
copy $(TargetPath) $(SolutionDir)..\out\$(OutDir)plugins
</PropertyGroup>
<PropertyGroup Condition=" ' $(TeamBuildConstants) ' == '_TEAM_BUILD_ '>
echo figure out some copying for this once the condition gets hit..
<PostBuildEvent></PostBuildEvent>
</PropertyGroup> 
```

如何更改项目文件或配置构建工作流程以进行此工作？（然后应该在本地以及服务器构建中工作。）

我想要什么：所有标准程序集都在同一个文件夹中，所有插件项目都在 ./Plugins/ 子文件夹中吗？（本地，相对于项目文件（默认？），tfs-build 相对于指定的放置位置）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:55:54.823

从 2010 年开始，随着基于工作流的 tfs 构建的引入，它们与 msbuild 之间有很大的区别 - 使用 msbuild 编译您的项目及其内容，使用工作流组装部署包。

由于您声明这应该在本地运行，这意味着您的编译需要插件才能成功/项目才能工作，因此应该在解决方案级别处理它们。

您可以使用几种方法

*   为每个项目发布构建事件 - 您可能会提供 2 组操作，一组用于在 tfs 上的本地构建其他人 - 您的方法 3，以区分您可以使用的模式（有不同的方式和在哪里可以做到这一点有优势可从项目属性编辑）

内置 tfs（在 VS 之外）

`<PostBuildEvent> IF NOT "$(BuildingInsideVisualStudio)" == "true" ( YourActions ) </PostBuildEvent>`

关于它的讨论：[BuildingInsideVisualStudio Property Value Not Working With File Reference 和 Project Reference Conditional](https://stackoverflow.com/questions/10738246/buildinginsidevisualstudio-property-value-not-working-with-file-reference-and-pr)

*   添加或添加链接插件文件作为项目从源代码控制中的相对中心位置到每个项目的插件文件夹，定义项目构建操作可能为 copyifnewer/always 内容

# php - Drupal 从单个页面中删除全局块

> ID：15115032
> 
> 赞同：0
> 
> 时间：2013-02-27T14:49:27.067
> 
> 标签：php, drupal, drupal-7, drupal-blocks

我有一个 Drupal 站点，每个页面底部都有一个块。有一页我不想要这个块。如何从该页面中删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T18:14:25.243

从块配置页面，转到最底部。`Visibility settings`部分。

打开`Pages`选项卡。检查`All pages except those listed`并键入您不想在文本区域内显示块的页面。

希望这有帮助。

# github - github api v3 从 master 以外的特定分支获取文件的内容

> ID：15115035
> 
> 赞同：6
> 
> 时间：2013-02-27T14:49:33.243
> 
> 标签：github

如何使用 github v3 内容 api 从特定分支获取文件内容 [http://developer.github.com/v3/repos/contents/](http://developer.github.com/v3/repos/contents/) 我尝试了这些选项 [https://api.github.com/repos/](https://api.github.com/repos/) 'org_name '/'repo_name'/contents/'file_path' [https://api.github.com/repos/](https://api.github.com/repos/) 'org_name'/'repo_name'/contents/'file_path'/?ref=branch_name 或相当多的选项，但它获取仅来自 master 分支的文件内容。

但我需要从 master 以外的分支获取内容。我知道我错过了一些非常基本的东西，但不知道是什么。提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T16:15:58.740

这很奇怪，因为它似乎对我有用。这是从 Google 的 GitHub 组织的 tracking-framework 存储库中获取 gh-pages 分支中 index.html 文件的 URL：

[https://api.github.com/repos/google/tracing-framework/contents/index.html?ref=gh-pages](https://api.github.com/repos/google/tracing-framework/contents/index.html?ref=gh-pages)

master 中不存在 index.html 文件。

你能给出你正在尝试的确切网址吗？

# javascript - 带有页面 ID 的 javascript 弹出链接

> ID：15115041
> 
> 赞同：-2
> 
> 时间：2013-02-27T14:49:50.307
> 
> 标签：javascript, html

```
<a class = 'printrequest' href="printrequest.php" onclick="javascript:void window.open('printrequest.php?id=$studid','1361194834275','width=800,height=700, toolbar=0,menubar=1,location=0,status=1,scrollbars=1,resizable=0,left=0,top=0');return false;">PRINT</a> 
```

这是重定向我的链接以打印页面内容的链接。这可能吗？如何附加 id 以将链接重定向到所需的页面 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:13:27.500

有多种方法可以做到这一点，我通常会在后端获取 url 参数并将其传递给页面。

但是如果你想使用 javascript 你可以使用一个 gup 函数，比如

```
function gup( name ){
name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");  
var regexS = "[\\?&]"+name+"=([^&#]*)";  
var regex = new RegExp( regexS );  
var results = regex.exec( window.location.href ); 
 if( results == null )    return "";  
else    return results[1];} 
```

然后

```
<a class = 'printrequest' href="printrequest.php" onclick="javascript:void window.open('printrequest.php?id='+gup('id')+'','1361194834275','width=800,height=700, toolbar=0,menubar=1,location=0,status=1,scrollbars=1,resizable=0,left=0,top=0');return false;">PRINT</a> 
```

# java - 为什么java中会出现这个错误

> ID：15115042
> 
> 赞同：-3
> 
> 时间：2013-02-27T14:49:50.807
> 
> 标签：java, swing, jframe

为什么这个语句在 java (NetBeans IDE 7.2.1)

```
com.sun.awt.AWTUtilities.setWindowOpacity(this, 0.3f); 
```

出现以下错误：

```
Exception in thread "AWT-EventQueue-0" java.awt.IllegalComponentStateException: The frame is decorated
    at java.awt.Frame.setOpacity(Frame.java:960) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:55:24.273

来自 java 文档

> 不透明度值在 [0..1] 范围内。请注意，将不透明度级别设置为 0 可能会或可能不会禁用此窗口上的鼠标事件处理。这是依赖于平台的行为。
> 
> 必须满足以下条件才能将不透明度值设置为小于 1.0f：
> 
> *   TRANSLUCENT 半透明必须得到底层系统的支持
> *   窗口必须是未装饰的（参见 setUndecorated(boolean) 和 > Dialog.setUndecorated(boolean)）
> *   窗口不得处于全屏模式（请参阅 > GraphicsDevice.setFullScreenWindow(Window)）
> 
> 如果请求的 opacity 值小于 1.0f，并且不满足以上任一条件，则窗口不透明度不会改变，并且会抛出 IllegalComponentStateException。

你显然没有满足其中一个条件，最有可能是第二个

# jmx - snmp 表可能性的问题

> ID：15115045
> 
> 赞同：0
> 
> 时间：2013-02-27T14:49:55.010
> 
> 标签：jmx, snmp

我很好奇 SNMP 中的表的可能性。

我使用表来映射 MBean。MBean 可以多次创建，每次都使用相同的类型，但名称不同，请考虑以下 ObjectName： `com.example.test:type=Test,name=Test1`并且`com.example.test:type=Test,name=Test2`）这些 MBean 具有可以设置和获取的属性。但是，为了设置值，我需要 OID，并且在表中我事先不知道 OID。

因此，我想知道：（1）是否可以在表中设置值？如果是，（2）如何实现？（有一个基本的 snmp 命令，没有 Java）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:16:46.790

是的，如果 MIB 和 SNMP 代理是这样设计的，通常可以在表中设置值。SNMP set 命令的使用方式与设置标量值相同。

[具有可变行数的 SNMP 表应具有RFC 2579](https://www.rfc-editor.org/rfc/rfc2579#page-6 "RFC 2579")中定义的 rowStatus 列。您的描述没有提供足够的详细信息，因此很难判断这是否是您的情况。在 SO 上也提供了一些对 rowStatus 的解释：[如何使用 RowStatus？](https://stackoverflow.com/questions/4891988/how-to-use-rowstatus)

# opencv - 典型的 .yml 或 .xml 矩阵应如何查找 OpenCV 使用

> ID：15115046
> 
> 赞同：0
> 
> 时间：2013-02-27T14:49:54.990
> 
> 标签：opencv

我需要在文件中指定一个矩阵，然后将其加载到 OpenCV 作为`Mat`进一步处理。如何指定列和行以及元素在*.xml*或*.yml*文件中的位置？（例如`A(i,j)`，i 的元素从 1 到 m 行，j 的元素从 1 到 n 列。例如，在 Matlab 中，这是通过加载仅包含数字的*.dat*文件来完成。OpenCV 令人困惑的是*.yml*或*.xml*有一些其他脚本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T09:22:40.743

*从.xml* / *.yaml*文件读取/写入任何 OpenCV 数据结构非常简单。

在将任何内容写入此类文件之前，您需要打开它并在最后关闭它。OpenCV 中的 XML/YAML 数据结构是`FileStorage`.

```
string filename = "I.xml";
FileStorage fs(filename, FileStorage::WRITE);

Mat R = Mat_<uchar >::eye (3, 3),

fs << "R" << R; // Write entire cv::Mat
fs["R"] >> R;   // Read entire cv::Mat 
```

查看此链接[File Input and Output using XML and YAML files](http://docs.opencv.org/doc/tutorials/core/file_input_output_with_xml_yml/file_input_output_with_xml_yml.html)

# f# - 枚举上的 F# 类型约束

> ID：15115050
> 
> 赞同：8
> 
> 时间：2013-02-27T14:50:06.867
> 
> 标签：f#, enums

我正在尝试定义从字符串到枚举的通用转换运算符，我想像这样使用它：

```
let day = asEnum<DayOfWeek>("Monday") 
```

但是有了这个实现：

```
let asEnum<'a, 'b when 'a: (new : unit -> 'a) and 'a : struct and 'a :> ValueType and 'a : enum<'b>> text = 
    match Enum.TryParse<'a>(text)  with
    | true, value -> Some value
    | false, _ -> None 
```

我只能这样使用它：

```
 let day = asEnum<DayOfWeek,_>("Monday") 
```

或这个：

```
 let day:DayOfWeek option = asEnum("Monday") 
```

如果我从类型约束中完全省略了`'a : enum<'b>`，我可以随意使用它，但是如果有人没有指定类型，它将默认为`int`，我真的不喜欢，我希望它给出一个编译时间错误，就像我指定约束时一样

也许只指定一个类型参数并推断另一个类型参数有什么技巧？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:02:08.747

~~不幸的是，为了增加约束，您似乎必须将其全部拼写出来：（~~正如 kvb 指出的那样，您可以通过在尖括号外`TryParse`添加约束来避免重复约束）`'T : enum<int>`

这也有效：

```
let asEnum<'T 
  when 'T : enum<int>
  and 'T : struct
  and 'T :> ValueType
  and 'T : (new : unit -> 'T)> text =
  match Enum.TryParse<'T>(text) with
  | true, value -> Some value
  | _ -> None 
```

如果基础类型不是，这会产生编译时错误`int`：

```
type ByteEnum =
  | None = 0uy

asEnum<ByteEnum> "None" //ERROR: The type 'int' does not match the type 'byte' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T15:49:28.520

这个怎么样？

```
let asEnum s :'a option when 'a:enum<'b> =
    match System.Enum.TryParse s with
    | true, v -> Some v
    | _ -> None

// works, but warns that type params shouldn't be given explicitly
asEnum<System.Reflection.BindingFlags,_> "DeclaredOnly"    
// also okay
(asEnum "DeclaredOnly" : System.Reflection.BindingFlags option) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-27T07:40:46.930

3年后的小更新^_^

使用此字符串扩展名将字符串转换为枚举

```
type System.String with
        /// Strongly-typed shortcut for Enum.TryParse(). 
        member this.ToEnum<'a when 'a :> System.Enum and 'a : struct and 'a : (new: unit -> 'a)> () =
            let ok, v = System.Enum.TryParse<'a>(this, true)
            if ok then Some v else None 
```

小心你的枚举声明。

```
type failingEnum =
            | FirstValue
            | SecondValue
            | AnotherValue

type compliantEnum =
            | FirstValue = 0
            | SecondValue = 1
            | AnotherValue = 2 
```

然后

```
let x = "whatever".ToEnum<failingEnum>(); 
//- will give error failingEnum is not compatible with the type System.Enum

let x = "whatever".ToEnum<compliantEnum>(); 
//- will succeed ! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T16:28:48.503

我尝试的另一件事是：

```
type AsEnum = 

    static member Get<'a, 'b when 'a: (new : unit -> 'a) and 'a : struct and 'a :> ValueType and 'a : enum<int>> (text:string) =

        match Enum.TryParse<'a>(text) with
        | true, value -> Some value
        | _ -> None

    static member Get<'a, 'b when 'a: (new : unit -> 'a) and 'a : struct and 'a :> ValueType and 'a : enum<int64>> (text:string) =

        match Enum.TryParse<'a>(text) with
        | true, value -> Some value
        | _ -> None

let a = AsEnum.Get<BindingFlags>.Get "DeclaredOnly" 
```

尝试查看是否可以让编译器推断要调用哪个重载，但如果失败并出现歧义错误

# css - 如何设置固定宽度？

> ID：15115052
> 
> 赞同：602
> 
> 时间：2013-02-27T14:50:11.010
> 
> 标签：css, twitter-bootstrap, width, html-table

简单的方案：

```
 <tr class="something">
    <td>A</td>
    <td>B</td>
    <td>C</td>
    <td>D</td>
  </tr> 
```

我需要为`<td>`. 我试过了：

```
tr.something {
  td {
    width: 90px;
  }
} 
```

还

```
td.something {
  width: 90px;
} 
```

为了

```
<td class="something">B</td> 
```

乃至

```
<td style="width: 90px;">B</td> 
```

但是宽度`<td>`还是一样的。

* * *

## 回答 #1

> 赞同：1235
> 
> 时间：2013-08-28T20:58:46.523

## 对于引导 4.0：

在 Bootstrap 4.0.0 中，您不能`col-*`可靠地使用这些类（在 Firefox 中有效，但在 Chrome 中无效）。您需要使用[OhadR 的答案](https://stackoverflow.com/a/34987484/2256700)：

```
<tr>
  <th style="width: 16.66%">Col 1</th>
  <th style="width: 25%">Col 2</th>
  <th style="width: 50%">Col 4</th>
  <th style="width:  8.33%">Col 5</th>
</tr> 
```

## 对于引导 3.0：

使用 twitter bootstrap 3 使用：`class="col-md-*"`其中 * 是宽度的列数。

```
<tr class="something">
    <td class="col-md-2">A</td>
    <td class="col-md-3">B</td>
    <td class="col-md-6">C</td>
    <td class="col-md-1">D</td>
</tr> 
```

## 对于引导 2.0：

使用 twitter bootstrap 2 使用：`class="span*"`其中 * 是宽度的列数。

```
<tr class="something">
    <td class="span2">A</td>
    <td class="span3">B</td>
    <td class="span6">C</td>
    <td class="span1">D</td>
</tr> 
```

** 如果您有`<th>`元素设置宽度，而不是`<td>`元素。

* * *

## 回答 #2

> 赞同：157
> 
> 时间：2013-09-30T20:29:12.880

我遇到了同样的问题，我修复了表格，然后指定了我的 td 宽度。如果你有，你也可以这样做。

```
table {
    table-layout: fixed;
    word-wrap: break-word;
} 
```

模板：

```
<td style="width:10%">content</td> 
```

请使用 CSS 来构建任何布局。

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2015-01-30T03:17:50.303

您可以创建一个并将类应用于标签，而不是将`col-md-*`类应用于行中的每个。`td``colgroup``col`

```
 <table class="table table-striped">
        <colgroup>
            <col class="col-md-4">
            <col class="col-md-7">
        </colgroup>
        <tbody>
        <tr>
            <td>Title</td>
            <td>Long Value</td>
        </tr>
        </tbody>
    </table> 
```

演示[在这里](http://www.bootply.com/rNvsMxe7d8)

* * *

## 回答 #4

> 赞同：75
> 
> 时间：2016-01-25T07:48:01.087

希望这个可以帮助某人：

```
<table class="table">
  <thead>
    <tr>
      <th style="width: 30%">Col 1</th>
      <th style="width: 20%">Col 2</th>
      <th style="width: 10%">Col 3</th>
      <th style="width: 30%">Col 4</th>
      <th style="width: 10%">Col 5</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Val 1</td>
      <td>Val 2</td>
      <td>Val 3</td>
      <td>Val 4</td>
      <td>Val 5</td>
    </tr>
  </tbody>
</table> 
```

[https://github.com/twbs/bootstrap/issues/863](https://github.com/twbs/bootstrap/issues/863)

* * *

## 回答 #5

> 赞同：63
> 
> 时间：2013-02-27T15:08:52.930

如果您在`<table class="table">`桌子上使用，Bootstrap 的表格类会为表格添加 100% 的宽度。您需要将宽度更改为自动。

此外，如果表格的第一行是标题行，您可能需要将宽度添加到 th 而不是 td。

* * *

## 回答 #6

> 赞同：56
> 
> 时间：2014-05-07T05:48:33.053

在我的情况下，我能够通过使用`min-width: 100px`代替`width: 100px`单元格`th`或`td`.

```
.table td, .table th {
    min-width: 100px;
} 
```

* * *

## 回答 #7

> 赞同：51
> 
> 时间：2018-06-07T10:23:15.493

对于 Bootstrap 4，您可以简单地使用类助手：

```
<table class="table">
  <thead>
    <tr>
      <td class="w-25">Col 1</td>
      <td class="w-25">Col 2</td>
      <td class="w-25">Col 3</td>
      <td class="w-25">Col 4</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      ... 
```

* * *

## 回答 #8

> 赞同：37
> 
> 时间：2018-05-20T08:28:45.217

# 引导程序 4.0

在 Bootstrap 4.0 上，我们必须通过添加类 d-flex 将表行声明为 flex-boxes，并删除 xs、md、后缀以允许 Bootstrap 自动从视口派生它。

所以它看起来如下：

```
<table class="table">
    <thead>
        <tr class="d-flex">
            <th class="col-2"> Student No. </th>
            <th class="col-7"> Description </th>
            <th class="col-3"> Amount </th>
        </tr>
    </thead>

    <tbody>
        <tr class="d-flex">
            <td class="col-2">test</td>
            <td class="col-7">Name here</td>
            <td class="col-3">Amount Here </td>
        </tr>
    </tbody>
</table> 
```

希望这对其他人有帮助！

干杯!

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2014-07-30T06:24:17.967

试试这个 -

```
<style>
 table { table-layout: fixed; }
 table th, table td { overflow: hidden; }
</style> 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2017-03-06T13:06:36.983

这个组合解决方案对我有用，我想要等宽的列

```
<style type="text/css">

    table {
        table-layout: fixed;
        word-wrap: break-word;
    }

        table th, table td {
            overflow: hidden;
        }

</style> 
```

结果 ：-

[![在此处输入图像描述](../Images/a8383ffc5948750ec056e801fe938244.png)](https://i.stack.imgur.com/L03Sy.png)

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2021-03-05T03:04:04.777

Bootstrap 4 和 5 有一个宽度实用程序，用于调整 html 元素宽度示例：

```
<tr class="w-50">
    <td class="w-25">A</td>
    ...
</tr> 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-02-27T15:06:04.460

好的，我刚刚发现问题出在哪里 - 在 Bootstrap 中设置`width`为`select`元素的默认值，因此，解决方案是：

```
tr. something {
  td {
    select {
      width: 90px;
    }
  }
} 
```

其他任何事情都对我不起作用。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-01-17T10:07:28.693

这就是我不用处理 IE 时经常做的事情

```
 <tr>
      <th scope="col" style="width: calc(1 * 100% / 12)">#</th>
      <th scope="col" style="width: calc(4 * 100% / 12)">Website</th>
      <th scope="col" style="width: calc(3 * 100% / 12)">Username</th>
      <th scope="col" style="width: calc(3 * 100% / 12)">Password</th>
      <th scope="col" style="width: calc(1 * 100% / 12)">Action</th>
    </tr> 
```

这样你就可以有一个熟悉的 12 列网格。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-02-27T14:56:54.360

如果没有页面 html 或 CSS 的其余部分的上下文，很难判断。您的 CSS 规则不影响 td 元素的原因可能有很多。

您是否尝试过更具体的 CSS 选择器，例如

```
tr.somethingontrlevel td.something {
  width: 90px;
} 
```

这是为了避免您的 CSS 被引导 css 中更具体的规则覆盖。

（顺便说一句，在您的带有样式属性的内联 CSS 示例中，您拼错了宽度 - 这可以解释为什么尝试失败了！）

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-12-21T11:39:34.623

我已经为这个问题苦苦挣扎了一段时间，所以以防万一有人犯了和我一样的愚蠢错误……在里面我已经应用了样式`<td>`的元素。`white-space:pre`这使得我所有的 table/tr/td 技巧都被丢弃了。当我删除该样式时，突然间我所有的文本都在`td`.

因此，请始终检查主容器（例如`table`or `td`），但也要始终检查您是否没有在更深的地方取消漂亮的代码:)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-07-20T14:34:04.383

**在 Bootstrap 4 中使用 d-flex 而不是 row 作为“tr”**

问题是“行”类比父容器占用更多宽度，这会引入问题。

```
<table class="table">
  <tbody>
    <tr class="d-flex">
      <td class="col-sm-8">Hello</td>
      <td class="col-sm-4">World</td>
    </tr>
    <tr class="d-flex">
      <td class="col-sm-8">8 columns</td>
      <td class="col-sm-4">4 columns</td>
    </tr>
  </tbody>
</table>
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-08-05T05:33:53.887

在表格中使用固定表格布局 css，并设置 td 的百分比。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-11-13T13:58:45.100

在 bootstarp 4 中你可以使用`row`，`col-*`在表中，我使用它如下

```
<table class="table">
    <thead>
        <tr class="row">
            <th class="col-sm-3">3 row</th>
            <th class="col-sm-4">4 row</th>
            <th class="col-sm-5">5 row</th>
        </tr>
    </thead>
    <tbody>
        <tr class="row">
            <td class="col-sm-3">some text</td>
            <td class="col-sm-4">some text</td>
            <td class="col-sm-5">some text</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-09-05T02:49:44.663

这些都不适合我，并且在数据表上有很多列可以使 % 或 sm 类等于引导程序上的 12 个元素布局。

我正在使用数据表 Angular 5 和 Bootstrap 4，并且表中有很多列。我的解决方案是`TH`添加`DIV`具有特定宽度的元素。例如对于 cols “Person Name” 和 “Event date” 我需要一个特定的宽度，然后`div`在 col 标题中放一个，然后整个 col 宽度调整为从 div 上指定的宽度`TH`：

```
<table datatable [dtOptions]="dtOptions" *ngIf="listData" class="table table-hover table-sm table-bordered text-center display" width="100%">
    <thead class="thead-dark">
        <tr>
            <th scope="col">ID </th>
            <th scope="col">Value</th>
            <th scope="col"><div style="width: 600px;">Person Name</div></th>
            <th scope="col"><div style="width: 800px;">Event date</div></th> ... 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2022-02-13T13:52:49.313

对我来说，将表格的布局设置为自动并以特定列为目标`<th>`就可以了。我发现`<td>`任何行中的定位都可以。`!important`如果需要，请随意投入。

```
.table {
  table-layout: auto;
}

th {
 width: 10%;
} 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2018-02-15T01:55:18.487

使用**.something**没有**td**或**th**

```
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title> 
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">  
  <style>
    .something {
      width: 90px;
      background: red;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>Fixed width column</h2>            
  <table class="table table-bordered">
    <thead>
      <tr>
        <th class="something">Firstname</th>
        <th>Lastname</th>
        <th>Email</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>John</td>
        <td>Doe</td>
        <td>john@example.com</td>
      </tr>
      <tr>
        <td>Mary</td>
        <td>Moe</td>
        <td>mary@example.com</td>
      </tr>
      <tr>
        <td>July</td>
        <td>Dooley</td>
        <td>july@example.com</td>
      </tr>
    </tbody>
  </table>
</div>

</body>
</html>
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2020-07-03T04:32:04.860

在引导表 4.x 中

如果您在 init 参数中创建表而不是使用 HTML。

您可以在 columns 属性中指定宽度参数：

```
$("table").bootstrapTable({
    columns: [
        { field: "title", title: "title", width: "100px" }
    ]
}); 
```

* * *

## 回答 #23

> 赞同：-3
> 
> 时间：2019-01-03T07:06:09.880

```
<div class="row" id="divcashgap" style="display:none">
                <div class="col-md-12">
                    <div class="table-responsive">
                        <table class="table table-default" id="gvcashgapp">
                            <thead>
                                <tr>
                                    <th class="1">BranchCode</th>
                                    <th class="2"><a>TC</a></th>
                                    <th class="3">VourNo</th>
                                    <th class="4"  style="min-width:120px;">VourDate</th>
                                    <th class="5" style="min-width:120px;">RCPT Date</th>
                                    <th class="6">RCPT No</th>
                                    <th class="7"><a>PIS No</a></th>
                                    <th class="8" style="min-width:160px;">RCPT Ammount</th>
                                    <th class="9">Agging</th>
                                    <th class="10" style="min-width:160px;">DesPosition Days</th>
                                    <th class="11" style="min-width:150px;">Bank Credit Date</th>
                                    <th class="12">Comments</th>
                                    <th class="13" style="min-width:150px;">BAC Comment</th>
                                    <th class="14">BAC Ramark</th>
                                    <th class="15" style="min-width:150px;">RAC Comment</th>
                                    <th class="16">RAC Ramark</th>
                                    <th class="17" style="min-width:120px;">Update Status</th>
                                </tr>
                            </thead>
                            <tbody id="tbdCashGapp"></tbody>
                        </table>
                    </div>
                </div>
            </div>
```

# javascript - 以编程方式触发 typeahead.js 结果显示

> ID：15115059
> 
> 赞同：38
> 
> 时间：2013-02-27T14:50:32.013
> 
> 标签：javascript, typeahead.js

我在从查询字符串预填充的输入字段上使用 Twitter 的 typeahead.js ( [https://github.com/twitter/typeahead.js/ )。](https://github.com/twitter/typeahead.js/)加载页面后，我想以编程方式触发预输入结果的显示，而用户无需在表单字段中输入任何内容。

开箱即用，仅当用户在输入字段中手动输入内容时才会触发 typeahead.js，并且我在 typeahead.js 中找不到任何可以调用来触发结果显示的方法。

任何指针将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-27T15:18:35.670

触发输入似乎可以做到。

```
$(".typeahead").eq(0).val("Uni").trigger("input"); 
```

[在示例页面](http://twitter.github.com/typeahead.js/examples/)上对此进行了测试。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-05-13T17:46:46.240

根据我的测试（见[fiddle](http://jsfiddle.net/Sam_Butler/df88n/2/)），focus() 方法是显示下拉菜单所必需的。所以：

```
theVal = $('.typeahead').val();
$(".typeahead").typeahead('val', '')
$(".typeahead").focus().typeahead('val',theVal).focus(); 
```

*   在第 1 行，我们将 Typeahead 输入的当前值分配给变量**theVal**；
*   在第 2 行，我们简单地重置 typeahead 的计算值；和
*   在第 3 行，我们将原始值*和*焦点放回原处，这导致建议下拉菜单显示为好像用户输入了某些内容一样。

我实际上需要这个来强烈鼓励用户从来自地理编码 API 调用的 Bloodhound 建议中进行选择，这样我就可以确保在提交表单之前由客户端获取坐标。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-05T14:35:49.130

```
$(".typeahead").typeahead('lookup').focus(); 
```

使用现有输入值触发。您当然可以提前更改值

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-07-17T16:04:57.407

对于任何在 0.11.1 版本之后发现 twitter 的 typeahead 问题的人，以下是我如何用一行来解决它：

```
$(".typeahead-input").typeahead('val', "cookie")
                     .trigger("input")
                     .typeahead('open'); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-03-03T08:39:45.910

从 Typeahead v0.10.1 开始，更改 typeahead 的值将触发另一个查询并打开下拉列表：

```
var val = $(".typeahead").typeahead('val');
$(".typeahead").typeahead('val', '');
$(".typeahead").typeahead('val', val); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-11-19T09:52:49.663

我使用了 twitter bootstrap typeahead，并希望它在焦点上，建议列表将打开。这里的答案对我来说不太有效，所以我写了这个简单的指令（需要 jquery）：

```
.directive('typeaheadFocusTrigger', function() {
        return {
            limit: 'A',
            link: function(scope, element, attrs) {
                $(element).on('focus', function(e) {
                    var $target = $(e.target);
                    var origVal = $target.eq(0).val();
                    $target.eq(0).val('').trigger('input')
                    .eq(0).val(origVal).trigger('input');
                });
            }
        }
    }); 
```

现在只需添加此属性，它将触发焦点

```
<input typeahead-focus-trigger typeahead=""> 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-03-11T20:31:43.890

使用：*Typeahead v0.10.5*

**不要使用：** `$('.typeahead').typeahead('open');`

这目前不起作用。来源：[https](https://github.com/twitter/typeahead.js/issues/798) ://github.com/twitter/typeahead.js/issues/798 。作为临时修复，使用自定义 jQuery keydown 事件（在您实例化预输入之后）：

```
var ttInstance = $('.typeahead').typeahead( config ); // Create Typeahead
ttInstance.typeahead('val', 'pancakes'); // Set an initial value

var evt = jQuery.Event('keydown');
evt.keyCode = evt.which = 40;
ttInstance.trigger(evt); // Opens the dropdown 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-02-27T15:06:33.257

查看源代码，它似乎`TypeaheadView`在 key 下的元素数据中存储了一个对象`typeahead`。该`TypeaheadView`对象有一个内部方法 ，`_showDropdown`它在内部绑定到焦点事件（以及其他一些事件）。

我不建议这样做，但您应该能够手动调用该内部方法：

```
$('#yourTypeaheadElement').data('typeahead')._showDropdown(); 
```

或者，您是否只是尝试在页面加载时简单地聚焦您的 typeahead 元素（当然，在将其初始化为 typeahead 元素之后）：

```
// after page loads and yourTypeaheadElement is initialized as a typeahead
$('#yourTypeaheadElement').focus(); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-04-01T15:44:00.970

除非您故意将“typeahead”放入输入标签的类中，否则这些都不起作用。如果你觉得不需要这样做（它没有必要工作），你最好使用 typeahead.js 写入输入标签的类。它是“.tt 输入”。这是我从 Sam_Butler 抄录的示例，为新的 CSS 类重新编码。这在最新的 typeahead 0.10.5 中对我有用：

```
var theVal = jQuery('.tt-input').val();
jQuery(".tt-input").typeahead('val', 're')
jQuery(".tt-input").focus().typeahead('val',theVal).focus(); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-02-27T15:05:45.233

我查看了源代码，发现了这种未记录的方式：

```
var $myinput = $('#myinput');
$myinput.data('typeahead')._showDropdown() 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-11-07T16:15:12.110

这应该与“旧”引导预输入插件一起使用：

```
$(".typeahead").eq(0).trigger("keyup"); 
```

不幸的是，没有用 IE 测试过......不知道新的 typeahead 插件......

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-06-13T03:51:33.177

这是@Sam_Butler 作品的简化版本：http: [//jsfiddle.net/rimian/hrnf9](http://jsfiddle.net/rimian/hrnf9)

```
<button type="button" id="button">Crick</button>
<input type="text" id="text" class="typeahead"> 
```

Javascript：

```
$('#button').click(function() {
  $("#text").focus().typeahead('val', 'London');
});

// instantiate the bloodhound suggestion engine
var locations = new Bloodhound({
    datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
    queryTokenizer: Bloodhound.tokenizers.whitespace,
    remote: {
        url: 'https://maps.googleapis.com/maps/api/geocode/json?address=%QUERY&components=country:GB&sensor=false&region=uk', //add key
        filter: function (locations) {
            return $.map(locations.results, function (location) {
                return {
                    value: location.formatted_address
                };
            });
        }
    }
});

locations.initialize();

$('#text').typeahead(null, {
    name: 'value',
    displayKey: 'value',
    source: locations.ttAdapter()
}); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-07-11T00:07:19.903

## 小心这个！

对于那些正在考虑手动触发 typeahead 行为的人（例如单击按钮），我强烈建议您不要这样做。

我是为这个解决方案而来的，但我几乎浪费了一整天的时间来使其正常工作（在我的情况下是单击按钮）。

对于那些真正想走这种黑暗方式的人，我与您分享我的丑陋代码，使其工作：

```
//Removes default features of typeahead
//This means that typeahead will not work like an "autocomplete", it only will be trigged when the user Click in #btnSearch button!
var txt = $("#typeahead");
//Save input events in variables (we'll need them)
eventInput = $._data(txt[0], "events").input[0];
eventBlur = $._data(txt[0], "events").blur[1];
//Remove input events
txt.unbind("blur");
txt.unbind("input");

//Set click event that triggers typeahead features manually
$("#btnSearch").click(function () {
    //Clears the cache of engine for it call ajax again, without it when the term was already searched the ajax is not called!
    engine.clearRemoteCache();

    txt.focus(); //When we click in a button, the focus from input is lost, so we set it again to not lose the behaviors of keyboard keys (up, down, tab, etc)
    txt.bind("input", eventInput); //Bind the event that we had saved
    txt.trigger("input"); //Trigger input (like the answer from @epascarello)
    txt.unbind("input"); //Removes it again 
});

//Set event on parent of the suggestion's div, this makes the sugestion div close when user click outside it
$("body").click(function () {            
    if (eventBlur != undefined) {
        if ($(".tt-dropdown-menu:visible").length > 0) {
            eventBlur.handler(); //This event closes the suggestion menu
        }
    }
}); 
```

我做的另一件事是在 typeahead.js 上更改事件**“_checkInputValue”**的代码。我改变这个：

```
areEquivalent = areQueriesEquivalent(inputValue, this.query); 
```

对此：

```
areEquivalent = false;//areQueriesEquivalent(inputValue, this.query); 
```

我将其设置为 false 因为 typeahead**不会向 server 发送两个相同的请求**。当用户在搜索按钮中单击两次时会发生这种情况（我的意思是，当他多次搜索他已经搜索过的相同文本时）。无论如何，如果您使用的是本地数据，则不需要这样做。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-09-03T00:25:31.247

这对我有用。

```
$( document ).ready(function() {
    $('#the-basics .typeahead').typeahead({
      hint: false,
      highlight: true,
      minLength: 0
    },
    {
      name: 'states',
      displayKey: 'value',
      source: substringMatcher(states)
    });

    //set a value to input to trigger opening
    $(".typeahead").eq(0).val("a").trigger("input");
    //remove value for end user
    $(".typeahead").eq(0).val("");

}); 
```

例如，请参见此处：http: [//joshuamaynard.com/sandbox/autocomplete](http://joshuamaynard.com/sandbox/autocomplete)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-10-09T04:03:36.210

其他答案很有帮助，但没有解决我的问题。此解决方案不涉及自定义任何 angular-ui 代码本身，并且仅用于触发 typeahead 以在显式按钮单击时获取结果。

为此，我必须将一个文本字段覆盖在另一个（禁用）文本字段的顶部，该文本字段是带有预输入的实际文本字段。没有人会知道另一个在那里，但它需要在那里 angular-ui 才能在正确的位置启动菜单。您不能将其设为隐藏字段，因为它将无法在正确的位置显示菜单。

当按钮触发时（通过将触发器设置为 true） ，下面的指令将监视`typeaheadText`和`typeaheadTrigger`变量以填充禁用字段。该指令具有隔离范围，因此它不依赖于传入之外的任何内容。

```
directive('typeaheadTrigger', function() {
  return {
    require: ["ngModel"],
    scope: {
      typeaheadText: '=',
      triggerFlag: '='
    },
    link: function(scope, element, attr, ctrls) {
      scope.$watch('triggerFlag', function(value) {
        if (scope.triggerFlag) {
          ctrls[0].$setViewValue(scope.typeaheadText);
          scope.typeaheadText = '';
          scope.triggerFlag = false;
        }
      });
    }
  };
}) 
```

控制器为此设置了一些东西 - 对象内的触发器和文本范围变量。这演示了如何做到这一点 - 理想情况下，您会将整个内容包装在另一个指令中，以便可以在您的应用程序中使用它，同时隐藏细节。

这是plunk：[http ://plnkr.co/edit/UYjz6F5ydkMQznkZAlfx?p=preview](http://plnkr.co/edit/UYjz6F5ydkMQznkZAlfx?p=preview)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-01-09T00:51:37.637

当 tt-dataset 中有 1 个项目时，我使用它来手动触发选择。添加这个很有意义。

```
$("#mytypeahead").keyup(function (e) {
                var charCode = (typeof e.which === "number") ? e.which : e.keyCode;
                if (charCode == 13) {
                    if ($(this).parent().find(".tt-dataset").children().length == 1) {
                        //This is how we are submitting a single selection on enter key
                        $(this).parent().find(".tt-dataset").children(0).addClass("tt-cursor");
                        var kde = jQuery.Event("keydown");
                        kde.which = 13;
                        $(this).trigger(kde);                           
                    }    
                }                    
            }); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-12-19T13:50:33.073

我在这里尝试了所有方法，但它不起作用，只能使用

```
$(".typeahead").val('hi').trigger('keyup');
$(".typeahead").val('hi').trigger('keydown'); 
```

上面的代码对我有用。不知道到底发生了什么，但使用两者都没有起作用，只有同时使用它才起作用。

# java - 手动排序不起作用？

> ID：15115063
> 
> 赞同：0
> 
> 时间：2013-02-27T14:50:43.347
> 
> 标签：java

```
String temp ="";
int Count =0;
String[] names = new String[10];   
for(int a = 0; a<=9; a++)
{

    String name = JOptionPane.showInputDialog("enter name");
    names[a]=name;
    Count++;

}
System.out.println("Unchanged: "+Arrays.toString(names));

for(int i=0;i<(Count-1);i++)
{
for(int j=(i+1); j<Count;j++)
{
    if((names[j].compareTo(names[i]))>0)
    {
        temp = names[i];
        names[i] =names[j];
        names[i]=temp;

    }

} 
```

}

嗨，我正试图让这个手动排序工作（我知道有一个快速排序选项，但我必须这样做），我看不出问题是什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:53:08.860

如果你想交换 names[i] 和 names[j]，你最好这样写：

```
 temp = names[i];
    names[i] = names[j];
    names[j] = temp;      // <--- replaced i with j 
```

# c++ - 超出范围时自动恢复字符串

> ID：15115065
> 
> 赞同：-2
> 
> 时间：2013-02-27T14:50:46.670
> 
> 标签：c++

这是别人的代码！！！并且当它获得超出范围的字符串值时它会自动恢复......我想知道这怎么可能？不检查 str.length() ！好的。

超出范围时如何自动恢复？我试图理解其他人的代码，因为这就是它在 start/n=134 和 str.length() 也是 134(0-133) 时所做的事情。

```
FindEndOfToken(string &str, int start)
{
    UINT n = start;

    if( str[n] == '"' )
        doStuffOne();
    else
        doStuffTwo();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:52:41.503

将参数与字符串长度进行比较怎么样？

```
if (start >= str.length())
    return; 
```

* * *

如果您在谈论异常，则必须捕获异常。但是，如果您使用数组索引方法，这将不起作用，因为这实际上不会引发适当的异常，而是会导致*可能*导致崩溃的未定义行为。

要么使用上面的检查，要么改用*函数*来[`std::string::at`](http://en.cppreference.com/w/cpp/string/basic_string/at)获取字符并使用[`try`并`catch`](http://en.cppreference.com/w/cpp/language/try_catch)捕获异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:29:10.453

超出`std::string`with范围的访问`operator[]`是未定义的行为。事实上，在他们的代码中它碰巧没有崩溃，而在你的代码中它崩溃只是巧合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:16:02.060

弄清楚发生了什么....似乎是这一点代码...在win32应用程序中，它将错误发送到文件并依赖std :: string来“恢复”/忽略lol

```
// Turn on memory tracking
_CrtSetDbgFlag(_CRTDBG_LEAK_CHECK_DF|_CRTDBG_ALLOC_MEM_DF);
_CrtSetReportMode(_CRT_ASSERT,_CRTDBG_MODE_FILE);
_CrtSetReportFile(_CRT_ASSERT,_CRTDBG_FILE_STDERR); 
```

# objective-c - 在继续之前等待布尔值更改

> ID：15115068
> 
> 赞同：4
> 
> 时间：2013-02-27T14:50:50.960
> 
> 标签：objective-c, asynchronous

我有一个方法（我们称之为`method1`）向服务器（POST）发出异步请求，以创建具有给定 ID 的 CommunicationLink 对象。在发送请求之前，该方法会检查服务器上是否已存在 CommunicationLink。

我有第二种方法（我们称之为 method2），它获取与给定 CommunicationLink ID 关联的“主题”对象列表。就像`method1`，`method2`检查服务器上是否已经存在 CommunicationLink，如果不存在，则创建它（同样，通过向服务器发送异步请求）。

我遇到的问题是，当我启动我的应用程序时，一个接一个`method1`地`method2`被调用，所以我最终得到了这样的结果：

```
method1 checks if CommunicationLink exists ---> NO
  method1 sends a request to create CommunicationLink (async call)

method2 checks if CommunicationLink exist ---> NO because the previous call is not done yet
  method2 sends a request to create CommunicationLink

  method1 done
  method2 done 
```

所以在服务器上，我最终得到了相同 ID 的 2 个 CommunicationLinks（我无法控制服务器端发生的事情）

`method2`如果`method1`已经向服务器发送了请求，那么“暂停”的最佳方式是什么？我可以`true`在调用之前将布尔值设置为，并在请求完成后将其`method1`设置回in ，但我觉得有更好的方法可以做到这一点。`false``while (!myValue);``method2`

**编辑**

如果我正在处理推送通知的静态库的一部分，则此代码。我也在开发一个使用该库的测试应用程序。在我的根视图中`method1`调用`- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken;`并调用`method2``viewDidLoad`

**方法1**

```
- (void)sendProviderDeviceToken:(NSData *)deviceToken contextUUID:(NSString *)contextUUID sourceUUID:(NSString *)sourceUUID topicUUID:(NSString *)topicUUID language:(NSString *)language; 
```

**创建 CommLink 的方法**

```
- (void)createCommunicationLinkWithSuccessHandler:(void (^)(NSNumber *))successHandler errorHandler:(void (^)(NSError *))errorHandler; 
```

**方法2**

```
- (void)retrieveSubscriptionForContext:(NSString *)contextUUID notificationTopic:(NSString *)notificationTopic completion:(void (^)(NSDictionary *))completion; 
```

我希望能够直接在我的库中处理这种情况，而不必修改我的测试应用程序。`method1`并`method2`在同一个线程上调用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:13:28.453

这里的重点是您的处理方式：

“method1 发送创建 CommunicationLink 的请求（异步调用）”

你应该在那里提供某种回调。然后回调将执行/触发第二步。

如果您使用 NSURLResponse/Connection 或其他网络框架（AFNetworking 等），您将可以使用此类回调机制（这将采用某种委托方法的形式，或者您传递给网络请求的某些完成块） . 请提供更多详细信息以获取更多信息。

另一种方法是让您在单独的线程上管理工作流方法 1/方法 2，因此您可以等待而不阻塞 UI，但这会复杂得多。

编辑：

您可以使用您的

```
(^)(NSNumber *))successHandler 
```

方法 1 的参数以链接方法 2 的执行。

或者，您可以执行以下操作：

1.  运行时`method1`，设置一个标志，表示您的应用正在等待响应；

2.  当收到响应时（即，在`successHandler`或中`errorHandler`），重置标志；

3.  在`viewDidLoad`，在运行之前`method2`，检查标志的状态并`method2`仅在您不等待响应时执行。

您需要创建某种可从委托和视图控制器访问的状态信息。

希望能帮助到你。

编辑2：

为了考虑到您可以在第一个网络请求完成*之前*加载视图控制器这一事实，我建议这样做：

1.  排除网络请求及其进一步处理（因此您可以从其内部和外部调用它们`viewDidLoad`）；`method2``viewDidLoad`

2.  将上面定义的方法注册为`NSNotificationCenter`通知的观察者；

3.  中`viewDidLoad`，如果method1网络请求仍在进行中，则不要调用第1步定义的方法；

4.  当您`method1`从您的应用程序代表处致电时，请在`successHandler`帖子中发出通知，以便任何相关方都知道已建立第一个连接；

    4b。感谢在第 2 步注册的通知观察者，您的视图控制器将能够更新其状态（并最终调用`method2`）。

这将需要对您的应用进行一些更改；即，您的视图控制器将需要支持“离线”模式，在这种模式下，它无法执行`method2`并向用户显示一些信息，具体取决于整体状态：无网络、等待响应、无响应等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:57:51.657

如果您真的不需要等待第二种方法，那么 KVO 是一种方便的方法。让您的对象等待其上的属性或另一个对象更改为`observeValueForKeyPath:ofObject:change:context:`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:54:26.870

当然最好的方法是使用互斥锁：这是解决这类问题的标准方法。

您可以使用[pthread 互斥锁](https://computing.llnl.gov/tutorials/pthreads/)或`@synchronized`指令（查看苹果的[线程编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)）。

# java - HTTP 分块传输

> ID：15115069
> 
> 赞同：0
> 
> 时间：2013-02-27T14:50:52.650
> 
> 标签：java, http, tomcat, chunked-encoding

我正在编写一个使用分块传输编码连接到服务的客户端应用程序。该服务偶尔会断开连接，我被告知这是因为我们在请求中发送了一个零块，因此`Tomcat`关闭了连接。

我正在使用`Java` `HttpUrlConnection`该类建立连接，但我不知道为什么它会发送零块以及如何防止它这样做。

这是代码。

```
URL m5url = new URL("https://hostedconnect.m5net.com/bobl/bobl?name=org.m5.apps.v1.cti.ClickToDial.subscribe");
StringBuffer sb = new StringBuffer("<?xml version=\"1.0\" encoding=\"UTF-8\"standalone=\"yes\"?>" 
                                   + "<Command>" 
                                   + "<Name>org.m5.apps.v1.cti.ClickToDial.subscribe</Name>"
                                   + "<Id>1</Id>" 
                                   + "<User>" + m5username + "</User>" 
                                   + "<Password>" + m5password + "</Password>" 
                                   + "<FormattedXml>true</FormattedXml>" 
                                   + "<ShallowResponse>FULL</ShallowResponse>" 
                                   + "</Command>");

conn = (HttpURLConnection) m5url.openConnection();
conn.setRequestMethod("POST");
conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
conn.setReadTimeout(SESSION_TIMEOUT);
conn.setChunkedStreamingMode(0);
conn.setDoOutput(true);
conn.setDoInput(true);
conn.setUseCaches(false);

out = new DataOutputStream(conn.getOutputStream());
conn.connect();
out.writeBytes(sb.toString());
out.flush(); 
```

当我这样做`inputstream.readline`时`null`，但有时它会起作用，有时它不会。

![在此处输入图像描述](../Images/76adef1a9583b349f4410e8ff010775e.png) 好的，所以我很困惑。我放弃了使用 HttpURLConnection 并开始使用 Socket 类并手动编写所有标头和数据。如果不发送零块，它似乎一直在工作。对于零块，它似乎一直在工作，除非我在调试器中运行它，它得到与上面相同的错误。因此，我在发送标头之后和发送数据之前放置了一个 sleep(100) 并在没有调试器的情况下运行它，并且始终出现错误。所以我假设在 HttpURLConnection 类中发送标头后会有延迟，这就是为什么它有时有效而其他时候无效的原因。我不能发送零块，但我真的很想知道为什么会导致错误。有任何想法吗？我认为Tomcat中存在错误。

这是代码。

```
public class M5Connection
{
    public static final String urlBase = "/bobl/bobl";
    public static final String ENCODING = "ISO-8859-1";
    public static final String DELIMITER = "\r\n";
    protected URL url;
    private InputStream inputStream;
    protected OutputStream outputStream;
    protected Socket socket;
    protected BufferedReader reader;
    private boolean bProcessedHeaders;

    protected String resp = null;
    protected String errorMessage = null;

    /**
     * Start a new connection to the BOBL server.
     * @param server server name:port to connect to
     * @throws IOException
     */
    protected void initConnection(String server, int timeout) throws IOException
    {
        url = new URL(server + urlBase);
        int port = url.getPort();
        if (server.startsWith("https"))
        {
            if (port == -1) port = 443;
            else
                if (port == 80 || port == -1)port = 8080;
        }

        if (server.startsWith("https") == false)
        {
            socket = new Socket(url.getHost(), port);
        }
        else
        {           
            SocketFactory socketFactory = SSLSocketFactory.getDefault();
            socket = socketFactory.createSocket(url.getHost(), port);
        }

        socket.setSoTimeout(timeout);
        socket.setKeepAlive(true);
        socket.setSoLinger(false, 0);
        inputStream = socket.getInputStream();
        outputStream = socket.getOutputStream();
        reader = new BufferedReader(new InputStreamReader(inputStream));
    }

    public void initHttpsConnection(String server, int timeout) throws IOException
    {
        initConnection(server,timeout);
        sendHeaders();
        bProcessedHeaders = false;
    }

    private void sendHeaders() throws IOException {
        String path = url.getPath();
        StringBuffer outputBuffer = new StringBuffer();
        outputBuffer.append("POST " + path + " HTTP/1.1" + DELIMITER);
        outputBuffer.append("Host: " + url.getHost() + DELIMITER);
        outputBuffer.append("User-Agent: CometTest" + DELIMITER);
        outputBuffer.append("Connection: keep-alive" + DELIMITER);
        outputBuffer.append("Content-Type: text/plain" + DELIMITER);
        outputBuffer.append("Transfer-Encoding: chunked" + DELIMITER);
        outputBuffer.append(DELIMITER);
        byte[] outputBytes = outputBuffer.toString().getBytes(ENCODING);
        outputStream.write(outputBytes);
        outputStream.flush();
    }

    /** Send some data to the server, HTTP/1.1 chunked style. */
    public void send(String chunkData) throws IOException {
        byte[] chunkBytes = chunkData.getBytes(ENCODING);
        String hexChunkLength = Integer.toHexString(chunkBytes.length);
        StringBuffer outputBuffer = new StringBuffer();
        outputBuffer.append(hexChunkLength);
        outputBuffer.append(DELIMITER);
        outputBuffer.append(chunkData);
        outputBuffer.append(DELIMITER);
        byte[] outputBytes = outputBuffer.toString().getBytes(ENCODING);
        outputStream.write(outputBytes);
        outputStream.flush();

        outputBuffer = new StringBuffer();
        outputBuffer.append("0");
        outputBuffer.append(DELIMITER);
        outputBuffer.append(DELIMITER);
        outputBytes = outputBuffer.toString().getBytes(ENCODING);
        outputStream.write(outputBytes);
        outputStream.flush();
    }

    /**
     * Wait for a response from the server.
     * @return the string that the server returned.
     * @throws IOException
     */
    public String getRawResponse() throws IOException
    {
        String s;

        // just after we connect we expect to see the HTTP headers. Read and discard
        if (!bProcessedHeaders) {
            while (true){
                String line = reader.readLine();
                System.out.println("HEADER: " + line);

                if (line == null || line.equals("\r\n") || line.equals(""))
                    break;
            }
            bProcessedHeaders = true;
        }

        while (true)
        {       
            s = getChunk();     

            if (s == null)
                return null;

            if (s.equals("")) {
                continue;
            }

            // server will not emit XML if it is having real troubles
            if (s.charAt(0) != '<' || s.startsWith("<html>")) {
                System.out.println("Server says: " + s);
                continue;
            }
            return s;
        }
    }   

    /**
     * Expect chunked excoding back from the server. Read and return a chunk.
     * @return a string containing the HTTP chunk
     * @throws IOException
     */
    private String getChunk() throws IOException
    {
        StringBuffer buf = new StringBuffer();
        while (true)
        {
        // HTTP chunked mode, expect to see a line with the length in hex of the chunk that follows
            String s = reader.readLine();           

            if (s == null)
                throw new IOException();
            if (s.length() == 0)
                continue;

            int toread;
            try {
                toread = Integer.parseInt(s, 16);
            } catch (NumberFormatException e) {
                System.out.println("Number format error: " + s);
                return "";
            }

            if (toread == 0)
            {
                return null;
            }

            // read the chunk
            char[] data = new char[toread];
            int read = 0;
            while (read != toread)
            {
                read += reader.read(data, read, toread - read);
            }
            buf.append(data, 0, read);

            // for some reason tomcat only sends data in up to 8192 byte chunks
            if (toread != 8192)
                break;
        }
        return buf.toString();
    }   

    public void close()
    {
        try { socket.close(); } catch (IOException e) {}
    }

    public static void main(String[] args) throws Exception
    {
        M5Connection cnx = new M5Connection();
        cnx.initHttpsConnection("https://hostedconnect.m5net.com/bobl/bobl?name=org.m5.apps.v1.cti.ClickToDial.subscribe", 0);

        Thread.sleep(100);
        //
        // Create and send an XML command to listen for call state changes on our TN
        //
        String format = "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>" +
        "<Command>" +
        "    <Name>org.m5.apps.v1.cti.ClickToDial.subscribe</Name>" +
        "    <Id>1</Id>" +
        "    <User></User>" +
        "    <Password></Password>" +
        "    <FormattedXml>true</FormattedXml>" +
        "    <ShallowResponse>FULL</ShallowResponse>" +
        "</Command>";
        String command = format;
        System.out.println("SENDING " + command + "\n ------------ ");
        cnx.send(command);

        //
        // Now just wait for the responses
        //
        while (true)
        {
            String resp = cnx.getRawResponse();
            System.out.println(resp);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:24:24.663

> 有人告诉我这是因为我们在请求中发送了一个零块

你被误导了。最后一个零块是正确的，表示传输结束。请参阅[RFC 2616 #3.6.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html)。发送一个并没有错，并且 Tomcat 不应该（而且几乎可以肯定不会）通过关闭连接来做出反应。

# java - 如何使用属性名称识别 setter 方法？

> ID：15115072
> 
> 赞同：9
> 
> 时间：2013-02-27T14:51:09.320
> 
> 标签：java, reflection, setter

我们可以使用属性名称找到 setter 方法名称吗？

我有一个动态生成的`map<propertyName,propertyValue>`

通过使用映射中的键（即propertyName），我需要为对象调用适当的setter 方法并从映射中传递值（即propertyValue）。

```
class A {
    String name;
    String age;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getCompany() {
        return company;
    }
    public void setCompany(String company) {
        this.company = company;
    }
} 
```

我的地图包含两个项目：

```
map<"name","jack">
map<"company","inteld"> 
```

现在我正在迭代地图，当我根据键（名称或公司）处理地图中的每个项目时，我需要调用 A 类的适当 setter 方法，例如，对于第一个项目，我将名称作为键，因此需要调用 new A ().setName。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-27T14:58:56.727

尽管使用反射可以做到这一点，但使用[commons-beanutils](http://commons.apache.org/proper/commons-beanutils/)可能会更好。您可以像这样轻松地使用该[`setSimpleProperty()`](http://commons.apache.org/proper/commons-beanutils/apidocs/org/apache/commons/beanutils/PropertyUtils.html#setSimpleProperty%28java.lang.Object,%20java.lang.String,%20java.lang.Object%29)方法：

```
PropertyUtils.setSimpleProperty(a, entry.getKey(), entry.getValue()); 
```

假设`a`是类型`A`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-27T15:18:09.477

如果您使用[Spring](http://www.springsource.org/spring-framework)，那么您可能希望使用`BeanWrapper`. （如果没有，您可以考虑使用它。）

```
Map map = new HashMap();
map.put("name","jack");
map.put("company","inteld");

BeanWrapper wrapper = new BeanWrapperImpl(A.class);
wrapper.setPropertyValues(map);
A instance = wrapper.getWrappedInstance(); 
```

这比直接使用反射更容易，因为 Spring 会为您进行常见的类型转换。（它还将支持 Java 属性编辑器，因此您可以为它不处理的那些注册自定义类型转换器。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-27T15:03:07.377

`Reflection API`是你需要的。假设您知道属性名称并且您有一个`a`类型为的对象`A`：

```
 String propertyName = "name";
 String methodName = "set" + StringUtils.capitalize(propertyName);
 a.getClass().getMethod(methodName, newObject.getClass()).invoke(a, newObject); 
```

当然，您将被要求处理一些异常。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-08T07:03:03.540

使用 Map 放置字段名称及其 Setter 方法名称，或使用字符串连接来“设置”首字母大写的 propertyName 似乎是调用 Setter 方法的一种非常弱的方法。

您知道类名称并且可以遍历其属性并获取每个属性的 Setter/GetterMethod 名称的场景可以像下面的代码片段一样解决。

您可以从 java.beans.* 获取 Introspector / Property Descriptor；

```
try {
        Animal animal = new Animal();
        BeanInfo beaninfo = Introspector.getBeanInfo(Animal.class);
        PropertyDescriptor pds[] = beaninfo.getPropertyDescriptors();
        Method setterMethod=null;
        for(PropertyDescriptor pd : pds) { 
            setterMethod = pd.getWriteMethod(); // For Setter Method

       /*
           You can get Various property of Classes you want. 
       */

            System.out.println(pd.getName().toString()+ "--> "+pd.getPropertyType().toString()+"--Setter Method:->"+pd.getWriteMethod().toString());

            if(setterMethod == null) continue;
            else
                setterMethod.invoke(animal, "<value>");
        }
    }catch(Exception e) {e.printStackTrace();} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-15T17:31:16.693

你可以像这样得到setter方法：

```
A a = new A();
String name = entry.getKey();
Field field = A.class.getField(name);
String methodName = "set" + name.substring(0, 1).toUpperCase() + name.substring(1);
Method setter = bw.getBeanClass().getMethod(methodName, (Class<?>) field.getType());
setter.invoke(a, entry.getValue()); 
```

但它只适用于你的 A 类。如果您有一个扩展基类的类，那么 class.getField(name) 将无法工作。

你应该看看[Juffrou-reflect](http://juffrou.sourceforge.net/)中的 BeanWrapper 。它比 Springframework 的性能更高，并且允许您进行 map-bean 转换等等。

免责声明：我是开发 Juffrou-reflect 的人。如果您对如何使用它有任何疑问，我将非常乐意回复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-28T10:43:21.250

这实际上是不平凡的，因为有关于camelCase 字段名称大写的特殊规则。根据 JavaBeans API（第 8.8 节），如果字段名称的前两个字符中的任何一个是大写字母，则该字段不大写。

因此

*   `index`变成`Index`->`setIndex()`
*   `xIndex`保持为`xIndex`->`setxIndex()`
*   `URL`保持为`URL`->`setURL()`

执行此转换的代码如下：

```
/**
 * Capitalizes the field name unless one of the first two characters are uppercase. This is in accordance with java
 * bean naming conventions in JavaBeans API spec section 8.8.
 *
 * @param fieldName
 * @return the capitalised field name
 * @see Introspector#decapitalize(String)
 */
public static String capatalizeFieldName(String fieldName) {
    final String result;
    if (fieldName != null && !fieldName.isEmpty()
            && Character.isLowerCase(fieldName.charAt(0))
            && (fieldName.length() == 1 || Character.isLowerCase(fieldName.charAt(1)))) {
        result = StringUtils.capitalize(fieldName);
    } else {
        result = fieldName;
    }
    return result;
} 
```

然后可以通过在其前面添加“set”来找到 setter 的名称：`"set" + capatalizeFieldName(field.getName())`

这同样适用于 getter，除了布尔类型使用“is”而不是“get”作为前缀。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-27T14:55:33.370

我认为您可以通过反射来做到这一点，一个更简单的解决方案是对键进行字符串比较并调用适当的方法：

```
 String key = entry.getKey();
 if ("name".equalsIgnoreCase(key))
   //key
 else
   // company 
```

# cmake - 使用 cmake 构建我的项目后如何运行 ctest

> ID：15115075
> 
> 赞同：29
> 
> 时间：2013-02-27T14:51:21.273
> 
> 标签：cmake, ctest

我希望每次成功构建我的项目时启动我的测试。如果某些测试被破坏，我希望我的构建也被破坏。默认情况下，我需要通过运行`ctest`命令手动运行测试。CTest 实际上可以构建项目，但我使用调用`make`来构建源的 IDE。并且`make`不运行测试。

我将此命令添加到我的根 CMakeLists.txt 文件中，但它不起作用。

```
add_custom_command(OUTPUT tests.txt 
                   POST_BUILD
                   COMMAND ctest --output-on-failure) 
```

CMake 不返回任何错误，一切正常，但我的自定义命令没有调用。每次在 CMake 中成功构建后，如何运行某些东西？

**更新：**

我的最终解决方案是创建这个宏：

```
macro(add_unit_test target target_test)
    set(UNIT_TEST_TARGETS ${UNIT_TEST_TARGETS} ${target_test} PARENT_SCOPE)
    add_test(target ${CMAKE_CURRENT_BINARY_DIR}/${target_test})
endmacro(add_unit_test) 
```

它调用`add_test`并记住列表中的测试目标。此宏添加的项目中的每个测试。在根 CMakeLists.txt 我有这个代码：

```
add_custom_target( all_tests ALL
                   DEPENDS ${UNIT_TEST_TARGETS}
)
add_custom_command(TARGET all_tests
                   COMMENT "Run tests"
                   POST_BUILD COMMAND ctest ARGS --output-on-failure
                   WORKING_DIRECTORY ${CMAKE_BINARY_DIR}
) 
```

它创建依赖于项目中所有单元测试的自定义目标。自定义命令在`all_tests`构建目标后运行。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-27T23:33:47.633

只有当另一个 CMake 目标依赖于“tests.txt”时，这种形式[`add_custom_command`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_custom_command)才会执行。我假设没有其他目标将“tests.txt”作为输入文件，因此自定义命令永远不会运行。

我认为您可以使用第二种形式`add_custom_command`来实现您的目标；就像是：

```
add_custom_command(TARGET MainTest
                   POST_BUILD
                   COMMAND ctest -C $<CONFIGURATION> --output-on-failure) 
```

# java - Java 7 异步安全套接字？

> ID：15115076
> 
> 赞同：3
> 
> 时间：2013-02-27T14:51:22.613
> 
> 标签：java, ssl, asynchronous, io

Java 7 附带异步 I/O。这里有谁知道我是否可以使用它对 a 进行异步调用`SecureSocket`？

改写：如果我正在使用`sslContext.getSocketFactory().createSocket("127.0.0.1", 42)`，则使用`socket.getOutputStream()`和`socket.getInputStream()`以阻塞方式进行通信；我需要进行哪些更改才能访问异步函数，这将允许我重写我的代码以异步工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:36:31.220

具有非阻塞 I/O 的 Java 中的 SSL/TLS 在 Java 7 中并不是新事物，而是在 Java SE 5 中引入的。这可以使用[`SSLEngine`](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#SSLENG)而不是套接字来完成。

众所周知，`SSLEngine`它很难使用。原则上，您可以使用类在通道和`InputStream`/之间进行转换，但在使用自身方面也有很多工作要做。这里有几个指针：`OutputStream`[`Channels`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/Channels.html)`SSLEngine`

*   [JSSE 参考指南中的官方示例](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#SSLEngineSample)。
*   [Nuno Santos 将 SSL 与非阻塞 IO 结合使用](http://onjava.com/pub/a/onjava/2004/11/03/ssl-nio.html)。
*   您可以查看使用它的现有开源框架，例如[Grizzly](http://grizzly.java.net/)或[Simple](http://www.simpleframework.org/)。
*   [*Java 基础网络的*](http://www.springer.com/computer/swe/book/978-1-84628-030-6)第 8 章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-20T20:13:26.777

正如布鲁诺正确提到的那样，SSLEngine 是执行异步 SSL 的标准方式。但是那个类*很难*使用。

前段时间我遇到了同样的问题，最终编写了自己的库。那里有一些示例，当然还有像 Netty 等项目中的代码。但是这两个选项都不是健壮的或易于重用的。

[TLS 通道](https://github.com/marianobarrios/tls-channel)将 SSLEngine 包装在 ByteBuffer 中，并允许像普通的 SocketChannel 一样使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T15:02:02.510

异步 IO（Java NIO 的一部分）不使用流，而是使用通道、缓冲区和选择器。不过，您绝对仍然可以连接到安全服务器。但是，您当前的代码将需要进行大量更改，因此除非您有充分的理由，否则您可能不想更新到异步 IO。

我推荐[本教程](http://tutorials.jenkov.com/java-nio/index.html)作为起点。

# ios - 使用 GPU Image 将捆绑中的图像添加到 UIImageView？

> ID：15115077
> 
> 赞同：1
> 
> 时间：2013-02-27T14:51:24.557
> 
> 标签：ios, gpuimage

我对 GPU Image Framework 的用户非常陌生。在我的应用程序中，我使用以下代码来获取图像的滤镜效果 bundle(knee.png) ，但我只得到 Black ImageView 。我从这个[链接得到代码](https://stackoverflow.com/questions/12935166/gpuimage-imagebyfilteringimage-and-imagefromcurrentlyprocessedoutputwithorienta)

告诉我哪里出错了  

```
UIImage *inputImage = [UIImage imageNamed:@"knee.png"];        
    GPUImagePicture *stillImageSource = [[GPUImagePicture alloc] initWithImage:inputImage];
    GPUImageSepiaFilter *stillImageFilter = [[GPUImageSepiaFilter alloc] init];    
    [stillImageSource addTarget:stillImageFilter];
    [stillImageSource processImage];  
    UIImage *quickFilteredImage = [stillImageFilter imageByFilteringImage:inputImage];
    [self.imgView setImage:quickFilteredImage]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:41:54.290

您在代码示例中混合了两种完成同一件事的方法。试试这个作为过滤图像的最简单方法：

```
UIImage *inputImage = [UIImage imageNamed:@"knee.png"];        
GPUImageSepiaFilter *stillImageFilter = [[GPUImageSepiaFilter alloc] init];    
UIImage *quickFilteredImage = [stillImageFilter imageByFilteringImage:inputImage];
[self.imgView setImage:quickFilteredImage]; 
```

或者更长、更灵活的流程，它可以更轻松地链接多个过滤器：

```
UIImage *inputImage = [UIImage imageNamed:@"knee.png"];        
GPUImagePicture *stillImageSource = [[GPUImagePicture alloc] initWithImage:inputImage];
GPUImageSepiaFilter *stillImageFilter = [[GPUImageSepiaFilter alloc] init];    
[stillImageSource addTarget:stillImageFilter];
[stillImageSource processImage];  
UIImage *quickFilteredImage = [stillImageFilter imageFromCurrentlyProcessedOutput];
[self.imgView setImage:quickFilteredImage]; 
```

看起来您的原始代码确实应该生成图像。要调试，我会检查输入图像（并将其添加到您的问题中），在过滤之前将其显示在另一个视图中，查看 GPUImageView 以显示 StillImageSource，并在写入另一个 UIImage 之前作为过滤器的目标。

# ruby - 如何格式化数组以在 ruby 中将每五个元素分成新行？

> ID：15115081
> 
> 赞同：4
> 
> 时间：2013-02-27T14:51:31.433
> 
> 标签：ruby, arrays

所以我有一个数组。我想采用第一个元素并将它们分成新行。所以我的数组是=

```
a = [0, 0, 0, 0, 0, 0, 0, 0 , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

我如何将其打印为

```
00000
00000
00000
00000
00000 
```

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T15:13:14.633

只需使用[`each_slice`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-each_slice)Enumerator 类的方法将原始数组拆分为每个包含五个元素的数组，然后[`join`](http://ruby-doc.org/core-2.0/Array.html#method-i-join)使用 Array 类的方法将五个元素数组转换为字符串：

```
a.each_slice(5) { |x|
  puts x.join
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:55:16.250

```
a.each_index do |i|
  puts if i%5 == 0
  print a[i]
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T15:07:44.803

```
a = (1..25).to_a    
(a.size / 5).times {|i| puts a.slice(i*5, 5).join} 
```

> 12345
> 678910
> 1112131215
> 1617181920
> 2122232425

[`Array#slice`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-slice)需要一个索引和一个长度。在这种情况下，每 5 个元素，切出一块 5 个元素。[`Array#join`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-join)然后获取这些元素并将它们组合成一个字符串。

# objective-c - 缺少属性实现声明的上下文

> ID：15115085
> 
> 赞同：2
> 
> 时间：2013-02-27T14:51:33.990
> 
> 标签：objective-c, xcode4, ios6

我已经开发了项目`xcode 4.3`，它工作正常。但是当我打开那个项目时`xcode 4.6`，`xcode`抛出多个错误说 -

> “缺少属性实现声明的上下文。”

请建议我做错了什么。

# ios - 调查应用程序的核心数据结构

> ID：15115086
> 
> 赞同：0
> 
> 时间：2013-02-27T14:51:33.823
> 
> 标签：ios, core-data

我在绘制调查应用程序的模型对象时遇到了一些麻烦。该应用程序应使用户能够创建带有建议的多项选择答案的问题的调查对象，然后允许用户使用答案填充此调查的多个副本。

创建调查需要：

实体：调查模板 // 有很多问题 // 有 TextField Question // 或 Multiple-Choice Question

其中的每一个都可以填充问题的相关信息、建议的答案等。

当我想创建一个调查答案对象时，我该怎么办？另一个名为 Completed Surveys 的表格以某种方式复制问题并为答案提供空间？

我敢肯定它很简单，只是让我有点头疼，任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:30:36.927

实际上，这绝不是直截了当的。这是我要做的：

```
Template <----->> Question   
Template <----->> Survey   
Survey   <----->> Answer    
Question <----->> Answer 
```

为了区分类型，您可以使用`type`描述问题类型的属性（NSNumber，枚举）。答案实体将同时具有数字属性（用于选择）和字符串属性（用于答案），根据答案所指的问题类型，它们可以保持未使用状态。

# wcf - 在没有 WCF 的 MSMQ 中创建重试机制

> ID：15115089
> 
> 赞同：6
> 
> 时间：2013-02-27T14:51:47.830
> 
> 标签：wcf, msmq, message-queue, messaging

我有多个现有应用程序通过 System.Messaging API 使用 MSMQ 发送和接收消息。队列通常是非事务性的，是 MSMQ 3 和 4 的混合。

接收应用程序现在处理有害消息，以至于在第一次出现任何异常时，消息被放入错误队列以进行人工干预。但事实证明，绝大多数手动干预只是将消息移回主队列以进行另一次尝试，此时它会成功。因此，为了使该过程自动化，我想向接收器添加一个重试功能，以便将消息移回主队列给定的次数，每次之间有给定的延迟。

我不想重新发明轮子，而是想利用 MSMQ 开箱即用的任何东西以及任何流行的或最佳实践模式。为此，有很多关于 MSMQ 4 中对有害消息的额外支持。但它们似乎不能通过 .Net 轻松访问。此外，我可以找到使用它们的唯一参考是通过带有 MSMQ 绑定的 WCF。

如果不使用 WCF，任何人都可以提出任何模式或指向任何实现重试的示例吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T15:28:36.327

我找不到一个单一的、流行的模式来做到这一点。但是在 System.Messaging 中探索了一下之后，我能够利用 Message 属性和 MSMQ 行为，我认为这是用最少的移动部件完成工作的合适方式。

这是我实施的。结果证明它相当简单和轻量级 - 代码不多且易于维护：

我创建了一个名为 RetryLevel 的对象，它具有三个属性：

int Order, int NumberOfRetries, TimeSpan 延迟

接收应用程序的配置现在有一个 RetryLevel 列表。所以新特性基本支持n级重试。

然后我创建了一个名为 RetryInfo 的对象。这个对象有两个属性：

int 尝试，字符串 SourceQueuePath

RetryInfo 对象的一个​​实例被序列化并存储在每个最终被重试的消息的 Extension 属性中。这使我可以跟踪消息本身的当前重试状态，从而无需维护单独的重试元数据存储以及协调消息 Id、保持数据同步等的所有开销。

最后，我在接收器的配置中添加了一个等待队列路径。此队列是消息在“超时”时将被丢弃的地方。

因此，现在，当消息处理程序拒绝一条消息时，接收者会反序列化它的 RetryInfo（如果有），并查看（先前）尝试的数量以确定它已达到哪个配置的 RetryLevels。

然后接收者将消息的 TimeToBeRecieved (TTBR) 属性设置为 DateTime.Now 加上相应 RetryLevel 的延迟值。然后它将 AdministrativeQueue 属性设置为从 RetryInfo 的 SourceQueuePath 属性创建的队列，并将 Message 的 AcknowledgeType 设置为 AcknowledgeTypes.NegativeReceive。最后，它将消息放入等待队列。

从这里，MSMQ 监视消息的 TTBR。当超时时，MSMQ 将消息放回其管理队列属性中的队列中，该属性是消息最初来自的队列。如果消息继续被处理程序拒绝，它只会向上移动到 RetryLevels。

如果消息的尝试次数超过配置的 RetryLevels 上的所有 NumberOfRetries，则消息的 TTBR 属性设置为 TimeSpan.Zero，UseDeadLetterQueue 属性设置为 true，并且消息像任何其他重试一样被放入等待队列。然而，这一次，它立即超时，MSMQ 将它发送到等待队列的主机的系统死信队列 (DLQ)，在那里可以手动处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:23:20.330

正如您所说，您不想重新发明轮子，我建议使用许多可用框架中的一种，例如[MassTransit](http://masstransit-project.com/)或其他框架。

就个人而言，我对位于 MSMQ 之上的[NServiceBus获得了积极的体验。](http://www.nservicebus.com/)

它使配置错误处理变得非常容易。您可以为您的应用程序定义实际的工作队列，并且您可以另外定义一个专用的错误队列。此外，您还可以配置应用程序将尝试多少次（对您的代码自动且完全透明），直到它将有害消息移动到您选择的队列中。

这使您可以轻松配置如下内容：“*如果我无法在 5 次重试内正确处理此消息，则将其移入我的错误队列。* ”

这是一个开箱即用的功能。

示例配置（来自官方文档），注意**Publisher**`app.config`部分：

 **[来自官方文档 http://images.nservicebus.com/basic_pubsub.png 的基本发布者/订阅者配置](http://images.nservicebus.com/basic_pubsub.png)

至于非 WCF 部分，NServiceBus 也适用于任何 .NET 应用程序。您可以选择简单地引用 DLL，或者您可以使用 NServiceBus 作为容器将您的应用程序作为本地服务托管，或者您可以将其永久注册为 Windows 服务。最后，如果您有一天会改变主意，转而使用同样受支持的 WCF。:-)**

# c# - Kendo Grid DataSourceRequest ArgumentException 试图排序

> ID：15115090
> 
> 赞同：2
> 
> 时间：2013-02-27T14:51:50.127
> 
> 标签：c#, asp.net-mvc-4, kendo-ui, kendo-grid

我正在使用此代码获取我的数据并将其推送到 Kendo Grid

```
public ActionResult Read([DataSourceRequest] DataSourceRequest request)
{
    return Json(GetData(request), JsonRequestBehavior.AllowGet);
}

private DataSourceResult GetData(DataSourceRequest request)
{
    var Items = _db.Item.Local.ToDataSourceResult(request, x => new
    {
        ID = x.ID,
        Title = x.Title,
        LastEdited = x.User.LoginName,
        Category = x.CategoryItem.Title,
        DateEdited = x.DateEdited
    });
    return Items;
} 
```

在 Grid 的视图中不使用任何模型，让 Grid 解决所有问题。这一切都有效，我也可以浏览页面。但是，当我添加排序方法时，它会抛出这个异常，例如：

```
Invalid property or field - 'Category' for type: Item 
```

并且每个后续请求都会失败，因为它在 DataSourceRequest 中具有排序，直到我重新加载页面以清除请求。在我需要添加到此代码中的配置方面，我是否遗漏了一些东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T15:28:21.303

是的，因为您的 Grid 告诉 DataSourceResult `"I'll sort by Category "`。

但是在您`DataSource (_db.Item.Local)`的 'Category' 中，它没有任何字段。

（您的 x => new{Category = x.CategoryItem.Title,} 只需在“排序”完成后选择类别）。

因此，您可以尝试以下操作：

```
_db.Item.Local.Select(x=> new {
    Category = x.CategoryItem.Title
    }).ToDataSourceResult(request) 
```

# android - R 无法解析为变量 - Eclipse 查找错误的技巧？

> ID：15115092
> 
> 赞同：0
> 
> 时间：2013-02-27T14:51:53.173
> 
> 标签：android, eclipse

我有一个很多人遇到的问题，查看主题中描述的众多问题：有时，R.java 消失了，并且在改变我所做的一些（太长）分钟后，R.java 又回来了。当未生成 R.java 时，调用 R 的行会显示错误：“R 无法解析为变量”。

我知道 R 不是真正的问题，而且我的代码中某处存在一个或多个错误。

我的问题是：如果 Eclipse 没有显示它们，如何本地化这些错误？

如果你和我有同样的问题，先看[“R不能解析为变量”？](https://stackoverflow.com/questions/7824730/r-cannot-be-resolved-to-a-variable)这可以帮助你摆脱那个无情的错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:57:54.637

如果您试图查明此错误的根源，请尝试以下操作：

1.  去`Project -> Clean`。这将确保您的错误不是因为构建错误。如果仍然找不到 R，请转到步骤 2。
2.  您应该`Problems`在 Eclipse 中有一个选项卡，它将列出打开项目中的所有错误和警告，如下面的屏幕截图所示。如果您看不到“问题”选项卡，请转到`Window -> Show View -> Problems`
3.  展开该`Errors`部分以查看存在哪些问题。在大多数情况下，您会被告知问题、项目、文件和行号。

![在此处输入图像描述](../Images/ce9454054fa0cd51195e38a766fb68b6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T14:53:46.487

> 如果 Eclipse 没有显示它们，如何本地化这些错误？

通常，Eclipse*会*显示它们。错误将出现在资源或清单中，通常由包管理器中文件图标上方的红色 X 标志指示。通常，控制台也会包含有关错误的日志消息。

迫不得已，您可以进行命令行构建并查看报告的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T14:55:52.683

如果您的文件夹或其他 XML 文件`R.java`中有错误，Eclipse 将不会构建该文件。`/res`

我建议您检查该文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T15:19:39.843

如果 clean 不起作用并且除了缺少 R.java 之外没有错误，请重新启动 Eclipse。

`File Menu->restart`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T16:12:14.073

找到了问题，但无法弄清楚如何简单地找到它。`< string name="action_settings">Settings< /string>`我在复制另一行时意外删除了这一行。

不知道它的用途，但 Eclipse 没有在错误日志中显示它，也没有在我寻找的任何地方显示。

无论如何，谢谢大家的帮助，希望我不会再遇到类似的问题！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-24T16:26:02.657

1）查看Package Explorer树中的xml文件是否有错误图标，如果有，修复错误并生成R类。

示例提示：FILL_PARENT 在 API 级别 8 中更名为 MATCH_PARENT；因此，如果您的目标是平台 2.1 (api 7)，请将所有出现的事件更改回“fill_parent”

2) 如果您添加了“import android.R;” 试图做一个快速修复，删除该行

3）检查你的AndroidManifest.xml文件，看看包名是否正确。如果您复制了一个示例，这可能是错误的，并且您的问题的根源

4）我有同样的问题。我没有任何文字说明“import something.R”。清理和重建也没有解决问题。

原来是因为布局 xml 文件的名称。这些文件只能包含小写字母、数字或下划线。当我将文件名（以及引用它的所有内容）从 myLayout.xml 更改为 my_layout.xml 时，一切正常。

5）我刚遇到这个问题。这是因为我有一个冗余的菜单资源引用了一个不存在的字符串。删除菜单 XML 并返回 R。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-04T16:35:32.650

正如这个链接中所说的 [“R不能解析为变量”？](https://stackoverflow.com/questions/7824730/r-cannot-be-resolved-to-a-variable) 而这个其他 [R 无法解决 - Android 错误](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error) 有几种解决方案。

在我的情况下，我在 SDK 管理器中配置了代理服务器：工具 > 选项

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-06T14:36:27.170

在我更新了 sdk 工具和软件包后，我收到了这个错误。我认为更新没有正常工作，经过很多挠头后，我只是尝试使用 sdk 管理器工具再次更新 sdk 包，之后一切正常。

# java - 在 XmlObject 中添加数据

> ID：15115097
> 
> 赞同：1
> 
> 时间：2013-02-27T14:52:08.610
> 
> 标签：java, xml, web-services, cdata, xmlbeans

我必须编写一个符合`Axis2 1.5.4`. 给出问题的部分代码如下：

```
String my_var = "some value";
MetaDataEntry metaDataEntry = MetaDataEntry.Factory.newInstance();
metaDataEntry.setKey(MetaDataKey.Enum.forInt(key));
metaDataEntry.setValue(my_var); 
```

现在基本上炒锅`setKey`很好，但根据我得到的示例响应文档，结构应该是这样的：`setValue``XmlObject``xml`

```
....
    <MetaDataEntry>
        <key>some_key_enum</key>
        <value>some _value</value>
    </MetaDataEntry>
.... 
```

我试过使用：

```
MetaDataEntry.setValue(XmlObject.Factory.parse("<value>"+my_var+"</value>")); 
```

但它将值标签格式化为`<value><value>some_value</value></value>`. 我也试过：

```
metaDataEntry.setValue(XmlObject.Factory.parse(my_var)); 
```

但它给出了例外：*Unexpected Element: CDATA*。有人可以帮我写正确的陈述吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:20:02.480

尝试使用 XmlString 值：

```
metaDataEntry.setValue(XmlString.Factory.newValue(my_var)); 
```

# windows-8 - Windows 8 Store 应用程序：重新执行之间的后台任务间隔

> ID：15115099
> 
> 赞同：0
> 
> 时间：2013-02-27T14:52:10.653
> 
> 标签：windows-8, windows-runtime, windows-store-apps, windows-store

当我阅读有关 Windows 8 商店应用程序的信息时，我在 MSDN 上发现：

[通过后台任务支持您的应用](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh977056.aspx)

CPU使用限制如下：

如果应用不在锁屏上：CPU 使用配额（1 秒）和
刷新时间（2 小时）

如果App在锁屏：CPU使用配额（2小时）&
刷新时间（15分钟）

这是否意味着我不能每 (10) 分钟运行一次后台任务？只有我会受到最少 (15) 分钟的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:56:24.290

这是正确的。请参阅[TimeTrigger 类文档](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.background.timetrigger.timetrigger.aspx)...

> 注意 如果 FreshnessTime 设置为小于 15 分钟，则在尝试注册后台任务时会引发异常。

[后台任务简介白皮书](http://www.microsoft.com/en-us/download/details.aspx?id=27411)中对此进行了详细讨论。

# java - 关闭特定 java 线程的 outputLOG 中的日志记录语句

> ID：15115100
> 
> 赞同：0
> 
> 时间：2013-02-27T14:52:10.833
> 
> 标签：java, multithreading, log4j, slf4j

我正在运行一个繁重的 java 应用程序。有一个线程进行轮询并记录所有调试语句。我无法更改日志记录级别，因为此更改会影响其他线程。

是否有任何可能的方法来关闭 java 中特定线程的调试语句？这将有助于在客户站点中获得非常具体的“outputLOG”文件。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:36:07.297

我看到两个简单的解决方案：

*   为日志记录传递一个`Runnable`带有 true 或 false的实例
*   或者它们可能是一种内部方式来检测您是否处于特定情况，具体取决于您传递给 Runnable 的其他数据

# c# - 将 GridView 绑定到列表

> ID：15115106
> 
> 赞同：0
> 
> 时间：2013-02-27T14:52:28.383
> 
> 标签：c#, wpf, xaml, data-binding, mvvm

我正在最糟糕的时候弄清楚这一点。我必须使用我还不完全理解的 MVVM，并将一个填充了 SQL 数据的列表绑定到 radGridView。听起来很容易......但我无法弄清楚。数据未显示，我认为这是因为我绑定错误。下面是我的相关代码。任何帮助，将不胜感激！

C# (HistoryAuditLogViewModel.cs):

```
 #region Private Fields

        private DatabaseConnectionSetting dbSetting;
        private string tableName = "Manufacturers";
        private int primaryKeyID = 1;
        private string entryID;
        private string manufacturerID;
        private string manufacturerName;
        private string auditDate;
        private string sqlLogin;
        private string application;

        private string dbConnectionKey = Alliance.Infrastructure.Common.DatabaseConnectionSetting.BACKFLOW_SCOPE_KEY;

        #endregion

 public void Load_Audit()
        {
            string strSQLconnection = (dbSetting.SqlConnectionString + "; User Id = " + dbSetting.SqlUserName + "; Password = " + dbSetting.SqlPassword + ";");
            SqlConnection sqlConnection = new SqlConnection(strSQLconnection); 

            sqlConnection.Open();
            SqlCommand sqlCommand = new SqlCommand("SELECT [EntryID], [AuditValue].value('(row/@ManufacturerID)[1]', 'int') as ManufacturerID, [AuditValue] .value('(row/@ManufacturerName)[1]', 'nvarchar(50)') as ManufacturerName, [AuditDate], [SqlLogin], [Application] from [Backflow].[dbo].[AuditLog] where (TableName = @tableName AND [EntryID] = @primarykey)", sqlConnection);
            sqlCommand.Parameters.AddWithValue("@tablename", tableName);
            sqlCommand.Parameters.AddWithValue("@primarykey", primaryKeyID);

            SqlDataReader reader = sqlCommand.ExecuteReader();

            List<String> dataList = new List<String>();

            while (reader.Read())
                for (int i = 0; i < reader.FieldCount; i++)
                {
                    string rdr = reader[i].ToString();

                    dataList.Add(rdr);
                }
        } 
```

XAML (HistoryAuditLogView.xaml)：

```
 <telerik:RadGridView Name="AuditGrid" ItemsSource="{Binding dataList}">

        </telerik:RadGridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:54:33.980

```
List<String> dataList = new List<String>(); 
```

它只是一个局部变量，仅在该方法中可访问且有效。您必须将其移动到属性或字段中：

```
public List<String> DataList { get; set; } 
```

并在方法内：

```
DataList= new List<String>();

while (reader.Read())
    for (int i = 0; i < reader.FieldCount; i++)
    {
        string rdr = reader[i].ToString();
        DataList.Add(rdr);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:10:04.270

完整的公共财产可能会对您有所帮助，请将其添加到您的根级别`ViewModel`：

```
#region Private Fields
...
#region
#region Public Props

private List<String> _dataList;
public List<String> dataList 
{
get{ return _datalist;}
set{_datalist = value;}
}

#region

public void Load_Audit()
        {
dataList = new List<String>(); //then your code
//.... 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T15:14:34.353

MVVM 绑定与 ViewModel 中的公共属性一起使用...

此外，如果可能的话，最好绑定到 Observable Collections。

For this, you would need to use the following code;

```
private ObservableCollection<String> _DataList;
public ObservableCollection<String> DataList {
    get { return _DataList; }
    set {
        if (value.Equals(_Details) == false) {
                 _DataList= value;
                  OnPropertyChanged("DataList");
        }
    }
} 
```

The `OnPropertyChanged` Sub raises the `INotifiyPropertyChanged` event, so that any changes to the Collection are automatically reflected in your GridView.

You would need to create this sub, however if you wanted to, you could raise this event directly in the Setter.

Your Code would then be;

```
_Details = new ObserservableCollection<string>();

while (reader.Read())
   for (int i = 0; i < reader.FieldCount; i++)
   {
       string rdr = reader[i].ToString();
       dataList.Add(rdr);
   } 
```

Your XAML would remain the same as you have above.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T15:30:25.897

Try to set the DataContext when you Initialize the View an the viewModel

```
MyView view = new MyView();
MyViewModel viewModelodel = new MyViewModel();

view.DataContext = viewModel; 
```

An other solution would be to set the DataContex in your View. But you have to tell your View the ViewModels location.

```
<Window x:Class="MyNamespace.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:MyNamespace"
    Title="MainWindow" Height="Auto" Width="Auto" >
<Window.DataContext>
    <local:MyViewModel/>
</Window.DataContext>
</Window> 
```

Of course you have to add a public Property which represents your list in your ViewModel.

# c++ - 如何将模板化函数重载转换为部分专用的模板化类静态方法？

> ID：15115109
> 
> 赞同：1
> 
> 时间：2013-02-27T14:52:33.580
> 
> 标签：c++, templates, static-methods, sfinae, partial-specialization

我有几个想要基于类型质量专门化的函数，例如“字符、有符号整数、无符号整数、浮点数、指针”；使用 type_traits 似乎是*这样*做的方法，并且具有类似于以下的代码：

```
#include <tr1/type_traits>
#include <iostream>

template<bool, typename _Tp = void>
struct enable_if 
{ };

template<typename _Tp>
struct enable_if<true, _Tp>
{
    typedef _Tp type;
};

template< typename T >
inline void
foo_impl( typename enable_if< std::tr1::is_integral< T >::value, T >::type const& )
{
    std::cout << "This is the function-overloaded integral implementation.\n";
}

template< typename T >
inline void
foo_impl( typename enable_if< std::tr1::is_floating_point< T >::value, T >::type const& )
{
    std::cout << "This is the function-overloaded floating-point implementation.\n";
}

template< typename T >
inline void
function_overloads_foo( T const& arg )
{
    foo_impl< T >( arg ); // vital to specify the template-type
}

void function_overloads_example()
{
    function_overloads_foo( int() );
    function_overloads_foo( float() );
} 
```

除了在我的真实代码中，我还有`bar`,`baz`等，以及`foo`.

但是，我想将所有这些功能按质量分组到一个模板类中作为`static`方法。这怎么做最好？这是我使用标签、SFINAE 和部分专业化的天真和失败的尝试：

```
struct IntegralTypeTag;
struct FloatingPointTypeTag;

template< typename T, typename U = void >
class Foo
{
};

template< typename T >
class Foo< T, typename enable_if< std::tr1::is_integral< T >::value, IntegralTypeTag >::type >
{
    static void foo( T const& )
    {
        std::cout << "This is the integral partial-specialization class implementation.\n";
    }
};

template< typename T >
class Foo< T, typename enable_if< std::tr1::is_floating_point< T >::value, FloatingPointTypeTag >::type >
{
    static void foo( T const& )
    {
        std::cout << "This is the floating-point partial-specialization class implementation.\n";
    }
};

template< typename T >
inline void
partial_specialization_class_foo( T const& arg )
{
    Foo< T >::foo( arg );
}

void partial_specialization_class_example()
{
    partial_specialization_class_foo( int() );
    partial_specialization_class_foo( float() );
} 
```

*注意*：在我的真实代码中，我有`bar`,`baz`等，以及`foo`静态方法。

仅供参考，这是 C++03。

顺便说一句，我是否以传统方式进行模板化函数重载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:20:55.490

这是一种方法：

```
#include <tr1/type_traits>
#include <iostream>

struct IntegralTypeTag;
struct FloatingPointTypeTag;

template <
  typename T,
  bool is_integral = std::tr1::is_integral<T>::value,
  bool is_floating_point = std::tr1::is_floating_point<T>::value
> struct TypeTag;

template <typename T>
struct TypeTag<T,true,false> {
  typedef IntegralTypeTag Type;
};

template <typename T>
struct TypeTag<T,false,true> {
  typedef FloatingPointTypeTag Type;
};

template <typename T,typename TypeTag = typename TypeTag<T>::Type> struct Foo;

template <typename T>
struct Foo<T,IntegralTypeTag> {
  static void foo( T const& )
  {
    std::cout << "This is the integral partial-specialization class implementation.\n";
  }
};

template <typename T>
struct Foo<T,FloatingPointTypeTag> {
  static void foo( T const& )
  {
    std::cout << "This is the floating-point partial-specialization class implementation.\n";
  }
};

template< typename T >
inline void
partial_specialization_class_foo( T const& arg )
{
      Foo< T >::foo( arg );
}

int main(int,char**)
{
  partial_specialization_class_foo(int());
  partial_specialization_class_foo(float());
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:30:30.750

在观察了沃恩的正确答案之后，我想进一步简化它。我能够删除标签和额外的特征类的使用来提出以下结构：

```
template< typename T, typename U = T >
struct Foo
{
};

template< typename T >
struct Foo< T, typename enable_if< std::tr1::is_integral< T >::value, T >::type >
{
    static void foo( T const& )
    {
        std::cout << "This is the integral partial-specialization class implementation.\n";
    }
};

template< typename T >
struct Foo< T, typename enable_if< std::tr1::is_floating_point< T >::value, T >::type >
{
    static void foo( T const& )
    {
        std::cout << "This is the floating-point partial-specialization class implementation.\n";
    }
};

template< typename T >
inline void
partial_specialization_class_foo( T const& arg )
{
    Foo< T >::foo( arg );
}

void partial_specialization_class_example()
{
    partial_specialization_class_foo( int() );
    partial_specialization_class_foo( float() );
} 
```

我认为这是通过向类提供两个模板类型参数来实现的，其中第二个是编译时条件的：

*   这默认与第一个参数相同，因此调用者只关注第一个参数。
*   只有具有与第一个模板参数相同的第二个模板参数的部分特化才能匹配。
*   失败时`enable_if`，整个部分专业化无法匹配。

相对而言，我觉得理解起来不那么麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:18:44.047

`IntegralTypeTag`会`enable_if`碍事。的第二个参数的默认值`Foo`是`void`，与 的不同`IntegralTypeTag`，所以特化 的`Foo`会匹配失败。

即，`Foo< int, void >`（这是你做的时候得到的`Foo<int>`）不匹配`Foo< int, IntegralTypeTag >`，你想要的`int`专业化是（在`enable_if`逻辑之后）。

标记是`type_traits`类的结果，然后您可以使用它来简化其他`type_traits`类。

# performance - /csp G-WAN 中的默认目录

> ID：15115112
> 
> 赞同：0
> 
> 时间：2013-02-27T14:52:43.393
> 
> 标签：performance, url-rewriting, g-wan

我正在寻找最好的方法（最快），以便我的 domain.com 直接指向我的 /csp 目录。main.c 文件中的什么指令，我猜是在headlers 目录中，你会建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:36:09.887

如果您的目标是`http://domain.com/`执行`script`而不是加载静态页面，则使用 URI 重写：

```
int main(int argc, char *argv[])
{
   const long state = (long)argv[0];
   if(state == HDL_AFTER_READ)
   {
      xbuf_t *read_xbuf = (xbuf_t*)get_env(argv, READ_XBUF);
      xbuf_replfrto(read_xbuf, read_xbuf->ptr, read_xbuf->ptr + 16, "/index.html", "/?index_1.c");

      // Note: you may have to look for the ending double-CRLF to check
      //       if there are other pipelined requests to rewrite
   }
   return 255; // execute next connection step
} 
```

该名称`"/?index_1.c"`旨在使用相同的长度，`"/index.html"`以避免在重写期间使用 memmove()（具有相同的长度允许就地重写）。

# c# - 将多个数据网格传递给 c#.net 中的函数

> ID：15115113
> 
> 赞同：0
> 
> 时间：2013-02-27T14:52:45.577
> 
> 标签：c#, asp.net, .net

我有 2 个或更多`GridView`s 绑定到不同的表作为数据源。

每个`GridView`. 选中该复选框后，该特定`GridView`行的数据将保存在数据库中。

我想要一个保存按钮来保存来自不同`GridView`s 的所有选中的复选框行值。

如果我碰巧从第一个网格中选中了一个复选框，然后从第二个网格中选择了另一个复选框，则单击一个保存按钮后，我必须能够将这些值保存到数据库中。

但是，创建的新表具有从用作这两个不同`GridView`s 的数据源的表中的列。

所以我想如果有办法`GridView`从选定的对象中传递 ID 和选中的复选框 ID，`GridView`我可以避免再次复制相同的保存代码。

但是，两个 gridViews 具有相同数量的具有相同数据类型的列。

有没有办法让我将选定的`GridView`ID 及其选中的复选框 ID 传递给单个保存按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:17:11.333

您可以尝试制作一个函数，其中一个参数将是 Windows.Forms.DataGridView，或者更好的是，发送数据源。

```
GetGrid(dtgName.DataSource);

Public void GetGrid(SqlDataSource Data){

} 
```

# php - 将 PHP 变量值带到另一个页面并设置为另一个 PHP 变量的值

> ID：15115114
> 
> 赞同：1
> 
> 时间：2013-02-27T14:52:47.750
> 
> 标签：php, session-variables

我会尽力解释这一点。我以前从未使用过会话或 cookie，但据我了解，会话是首选。

1.  第 1 页 - 包含文本 ($title) 的 PHP 变量。它的值是当前页面标题。
2.  第 2 页 - 联系表单（domain.com/email），其中主题字段值（$subject）为空，但是，我想将 $title 的值从它起源到 /email 的任何页面中携带，并将该值设置为 $subject .

我想要得到的是让用户通过一个动作或超链接来执行这个携带。

我所知道的只是启动会话 session_start()，并在每个适用页面上为会话建立值。

根据我的阅读，这就是我要做的：

```
session_start()

// PAGE 1
$_SESSION['carrythis'] = $title;

// PAGE 2
$subject = $_SESSION['carrythis']; 
```

但是，在用户选择携带变量的地方，什么会真正“执行”操作呢？我的意思是，在正常情况下，我希望 $subject 变量保持不变，除非用户决定使用按钮/链接将值带到新页面。我怎样才能做到这一点？

如果我的任何术语不正确，我深表歉意。

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:58:58.787

您是说如果用户选择，您只想将变量带到下一页？

这是我这样做的倒退方式（并且可能有其他人可以推荐的更清洁的方式）：

您可以让用户选中一个框，说明他们愿意或不想携带该变量，无论如何都要携带该变量......但是在第 2 页上，检查他们是否选中了表单上的框（获取），然后仅在他们选中该框时将 $subject 设置为会话变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:59:45.383

您将无法通过没有 JS 的链接来执行此操作，因为链接是在用户输入之前生成的。

您可以做的是在第一页上使用表单，该表单将使用文本输入元素将结果提交到第二页，该元素将保存用户的标题。在第二页上，您只需要检查提交数据是否包含标题，如果没有 - 您将使用默认值。

或者还有第二件事——如果我没有正确理解你并且标题没有改变。然后只需将其添加为用户点击的链接的一部分，如下所示：

```
<a href="page2.php?title=<?php echo $title; ?>">click here</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:59:58.640

您可以从第 1 页创建联系表格的链接，如下所示：

```
<a href="page2.php?title=current_page_title">Contact Form</a> 
```

在第 2 页，您可以使用 $_GET 从 URL 中检索标题：

```
$subject = $_GET['title']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T15:04:21.137

你似乎想要做的是一个 POST，不需要为此使用会话。

只需创建一个内部带有输入字段的表单。为该输入字段命名，让用户编写该字段的内容或自己编写。

关键思想是让用户访问包含要传递给 PHP 脚本的数据的表单。

```
// On page 1
<form method="post" action="page2.php">
  <input type="text" name="title" value=""/>
  <input type="submit" value="Submit"/>
</form>

// On page 2
$title = $_POST["title"] 
```

我建议您开始阅读 Web 开发基础知识，例如 HTTP 方法（POST 和 GET 是必须的，PUT 和 DELETE 很有趣）。也许阅读一些基本的 PHP 教程和一些 javascript 来增加交易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T15:00:15.710

将此添加到您的 HTML 表单中

```
<input type="checkbox" name="carry" value="1">Carry or whatever<br> 
```

在你的 PHP 代码中

```
if(isset($_POST['carry']) && $_POST['carry'] ==1){
//Do what you will do when the Stored subject
}else{
//get the subject filed Post Data
} 
```

# python - 是否可以将用户定义的函数应用于熊猫系列？

> ID：15115116
> 
> 赞同：0
> 
> 时间：2013-02-27T14:52:50.910
> 
> 标签：python, pandas, series, operations

如果我们有两个系列`s1`，`s2`我们可以对它们应用算术运算：`s1 + s2`或`s1*s2`. 算术运算将成对应用（假设两个系列具有相同的长度），结果我们得到一个新系列。此功能使很多事情变得更加容易。

现在，我尝试定义自己的运算符并将其应用于两个系列：

```
def f(x1, x2):
   if x2 > 0:
      return x1/x2
   else:
      return 1000.0 
```

我尝试将其应用于两个系列：`f(s1,s2)`. 这没用。在某种程度上，这是可以预料的，因为用户定义的函数不知道如何处理序列。所以，我的问题是，是否有一种优雅的方式来做我想做的事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:47:08.143

```
In [12]: s1 = pd.Series(np.random.randint(-10, 10, 5))

In [13]: s2 = pd.Series(np.random.randint(-10, 10, 5))

In [14]: s1.combine(s2, f)
Out[14]:
0    1000
1    1000
2      -2
3    1000
4    1000
Dtype: int64 
```

# android-fragments - 如何在 Sherlock Tab 中附加活动？

> ID：15115118
> 
> 赞同：1
> 
> 时间：2013-02-27T14:52:56.050
> 
> 标签：android-fragments, actionbarsherlock, android-tabhost, android-tabactivity

我有一个包含 3 个片段的活动。我想将此活动添加到 sherlock 选项卡中。实际上我将有 3 个选项卡，每个选项卡将有 3 个片段。所以我想将活动添加到选项卡中，该活动将包含 3 个片段。在 sherlock 示例代码中，我发现了如何将 1 个片段附加到选项卡中。但在这里我试图在每个选项卡中添加 3 个片段。我做错了设计。有没有办法使用 Sherlock 库来实现这一点？

# spring - Spring Security filterChainProxy ?!?! 声明所有过滤器只使用一个自定义过滤器？

> ID：15115119
> 
> 赞同：1
> 
> 时间：2013-02-27T14:52:57.367
> 
> 标签：spring, security

我不确定filterChainProxy，我的应用程序中的spring security工作正常，但我需要从属性文件加载ConfigAttributes ..

我知道我需要创建实现FilterInvocationSecurityMetadataSource的类..然后我做到了..在那之后

当我阅读这个时..我在文档中看到我必须在应用程序上下文 xml 上声明 filterchaeinProxy .. 像这样..

```
<bean id="filterChainProxy" class="org.springframework.security.web.FilterChainProxy">
  <constructor-arg>
    <list>
       <sec:filter-chain pattern="/**" filters="
           securityContextPersistenceFilterWithASCTrue,
           formLoginFilter,
           exceptionTranslationFilter,
           filterSecurityInterceptor" />
    </list>
  </constructor-arg>
</bean> 
```

我真的需要声明所有这些过滤器以仅使用一个自定义过滤器吗？

我只想从属性文件中提取我的网址和相应的角色..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:23:52.217

引用文档部分[“添加您自己的过滤器”](http://static.springsource.org/spring-security/site/docs/current/reference/ns-config.html#ns-custom-filters)：

> 请注意，您不能替换使用`<http>`元素本身创建的过滤器`SecurityContextPersistenceFilter`-`ExceptionTranslationFilter`或`FilterSecurityInterceptor`.

这就是为什么如果您想自定义这三个过滤器之一，您必须自己定义整个链。

* * *

可能对您来说为时已晚，但就像对这个问题的后续行动一样：您可以应用以下不太漂亮的技巧来自定义`FilterSecurityInterceptor`命名空间配置创建的内容，以避免必须手动创建整个过滤器链。

`CustomSecurityMetadataSource`创建一个除了设置它在`FilterSecurityInterceptor`其构造函数中接收的对象之外什么都不做的类。

```
public class FilterSecurityInterceptorInitializer {
    @Autowired
    public FilterSecurityInterceptorInitializer(
            FilterSecurityInterceptor filterSecurityInterceptor,
            CustomSecurityMetadataSource securityMetadataSource) {
        filterSecurityInterceptor
            .setSecurityMetadataSource(securityMetadataSource);
    }
} 
```

然后在你的上下文中包含这个初始化类：

```
<bean class="FilterSecurityInterceptorInitializer" autowire="constructor"/>
<bean class="CustomSecurityMetadataSource"/> 
```

# apache - 如何在tomcat上部署现有的apache sling存储库？

> ID：15115120
> 
> 赞同：1
> 
> 时间：2013-02-27T14:52:57.830
> 
> 标签：apache, tomcat, jackrabbit, jcr, sling

我有一个 sling 存储库，我正在使用 sling luanchpad 6.0 jar 来启动 sling 实例。如何在 apache tomcat 上部署这个包含应用程序、内容和捆绑包的 sling 实例？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:03:40.137

使用 Sling 启动板 war 文件而不是 jar 文件。

# html - CSS 清理定位

> ID：15115124
> 
> 赞同：0
> 
> 时间：2013-02-27T14:53:06.063
> 
> 标签：html, css, positioning

我在完成我的网站主页时遇到了一些麻烦。

网站：[www.crookdnosebeer.com](http://www.crookednosebeer.com)

如果您转到主页，它看起来应该是正确的，但是当您向下滚动到页脚时，主要背景随之而来，啤酒瓶也是如此。我只是希望这些东西留在原处，并且啤酒瓶就在被切断的页脚顶部。

CSS：

```
body{
height: 100%; 
width: 100%;
background-color: #b2b2b2;
background: url(../images/trial3.gif) no-repeat center center fixed;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}

/*HERE iS BOTTLE IMAGE */
.smoke {
position: fixed;
bottom: 0;
right: 0;
}

#footer{
height: 125px;
background: #333333;
width: 100%;
overflow:auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:55:24.943

只需`fixed`从您的身体`background`财产和`.smoke`班级中删除该词即可。

## 编辑

我想我想通了。我正在运行 Chrome，并在 Firefox 15 和 IE8 中进行了尝试。`position:absolute`当您添加到`.smoke`类和div时`position:relative`，它们似乎都按照您要求的方式工作。`#footer`

你可以在这里玩我的[jsFiddle](http://jsfiddle.net/amullins/WXxnk/3/)，[结果如下](http://jsfiddle.net/amullins/WXxnk/3/show/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:50:22.560

如果您戴上`position:relative`并`#main DIV`更改`width:1350px`为`width:100%`，那也将解决您的垂直滚动条问题！

# jquery - 来自正则表达式匹配的 jQuery addClass

> ID：15115129
> 
> 赞同：0
> 
> 时间：2013-02-27T14:53:26.417
> 
> 标签：jquery, regex

我想改变一个输出块：

`<div>Lorem ipsum dolor sit amet (consectetuer adipiscing elit sed diam nonummy nibh euismod tincidunt)</div>`

对此：

`<div>Lorem ipsum dolor sit amet <span class="italics">(consectetuer adipiscing elit sed diam nonummy nibh euismod tincidunt)</span></div>`

JavaScript：

```
var div = $('div');
var matches = div.match(/\((.*?)\)/);

if (matches) {
  matches.css('color', 'red');
} 
```

基本上，使用正则表达式用 addClass 将所有内容包装在（here）中。有任何想法吗？

我觉得这很接近：http: [//jsfiddle.net/saltcod/DjHUt/](http://jsfiddle.net/saltcod/DjHUt/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:00:31.713

您可以使用`html`方法：

```
$('div').html(function(i, h){
   return h.replace(/\((.*?)\)/, '<span class="italics">$&</span>');
}) 
```

[http://jsfiddle.net/WmCLz/](http://jsfiddle.net/WmCLz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:09:40.477

尝试这个：

```
div = $('div');
div.html(div.text().replace(/\([^)]+\)/g, '<span class="italics">$&</span>')); 
```

**现场演示：**

[http://jsfiddle.net/oscarj24/weJWL/](http://jsfiddle.net/oscarj24/weJWL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:29:46.133

这应该可以完成工作：http: [//jsfiddle.net/cqTq7/2/](http://jsfiddle.net/cqTq7/2/)

这是我的代码：

```
var div = $('div'),
    divHTML = div.html();
var match = divHTML.match(/\((.*?)\)/);

divHTML = divHTML.replace(match[0], '<span class="italics">$&</span>');

div.html(divHTML); 
```

请注意，该`match`函数是 JavaScript 中的函数，而不是 jQuery。这里我也使用了 JavaScript`replace`函数。

# embedded - STM32f107的ARM USART程序

> ID：15115130
> 
> 赞同：-4
> 
> 时间：2013-02-27T14:53:29.973
> 
> 标签：embedded, arm, usart

我已经配置了usart，但是在以下代码行中出现错误，并且我正在使用eclipse OCD进行编译，因此请建议配置时钟的正确方法。

```
void RCC_Configuration(void)
{
    /* error status */
    ErrorStatus HSEStartUpStatus;

    RCC_DeInit();

    RCC_HSEConfig(RCC_HSE_ON);
    HSEStartUpStatus = RCC_WaitForHSEStartUp();

    if (HSEStartUpStatus == SUCCESS) {
        FLASH_PrefetchBufferCmd(FLASH_PrefetchBuffer_Enable);
        FLASH_SetLatency(FLASH_Latency_2);

        RCC_HCLKConfig(RCC_SYSCLK_Div1); 
        RCC_PCLK2Config(RCC_HCLK_Div1); 
        RCC_PCLK1Config(RCC_HCLK_Div2);

        RCC_PLLConfig(RCC_PLLSource_HSE_Div1, RCC_PLLMul_9);
        RCC_PLLCmd(ENABLE);
        while (RCC_GetFlagStatus(RCC_FLAG_PLLRDY) == RESET);

        RCC_SYSCLKConfig(RCC_SYSCLKSource_PLLCLK);
        while (RCC_GetSYSCLKSource() != 0x08);
    }

    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);
} 
```

所以请提出答案并提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:30:36.437

您发布的代码与 USART 没有直接关系，而是整个芯片的系统 PLL 配置。

除了这个特定问题可能是什么之外，您最好使用 system_stm32f10x.c 中的标准 STM32F1xx CMSIS 启动代码，它在任何情况下都设置 PLL。startup_stm32f10x_cl.s（STM32F1xx 连接线器件的启动代码）。您只需要修改 system_stm32f10x.c 以匹配您板子的晶振频率，它会在调用 main() 之前设置时钟和其他必要的初始化。

CMSIS 可以从 STM 的网站获得，但我相信它包含在您似乎在任何情况下都在使用的标准外围库中。

# python - 指定 Content-Length 后如何处理上传大小变化？

> ID：15115131
> 
> 赞同：0
> 
> 时间：2013-02-27T14:53:30.510
> 
> 标签：python, content-length

我今天遇到了一个问题，我正在使用[海报](http://atlee.ca/software/poster/)模块上传一个带有 http POST 的多部分表单。

表格的一部分是一个文件，海报流出来 - 这很棒。

我遇到的问题是`Content-Length`在上传开始之前预先计算出来，但是因为表单数据是动态生成的，所以上传的数据量完全有可能最终会有所不同（如果文件在表单在上传过程中被外部东西修改）。

如果文件变长，则服务器将在我完成之前收到内容长度中指定的数据量时关闭连接，并且出现`Connection reset by peer`错误。如果文件变短，则上传挂起，服务器正在等待我承诺的其余字节。

在后一种情况下，当我中断挂起的上传时，我会得到这个堆栈跟踪：

```
Traceback (most recent call last):
  File "/Users/paul/Source/Python/test_uploader.py", line 35, in <module>
    gUpload(target_file, size, result.signed, callback, md5=md5)
  File "/Users/paul/Source/Python/PythonApp/upload.py", line 597, in handlingHttpError
    return func(*args, **kwargs)
  File "/Users/paul/Source/Python/PythonApp/upload.py", line 663, in gUpload
    urllib2.urlopen(request)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 418, in _open
    '_open', req)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/poster-0.8.1-py2.7.egg/poster/streaminghttp.py", line 142, in http_open
    return self.do_open(StreamingHTTPConnection, req)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 1180, in do_open
    r = h.getresponse(buffering=True)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 1030, in getresponse
    response.begin()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 407, in begin
    version, status, reason = self._read_status()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 365, in _read_status
    line = self.fp.readline()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 447, in readline
    data = self._sock.recv(self._rbufsize)
KeyboardInterrupt 
```

我该如何处理这种情况？我不介意它抛出一个错误，但这个挂起正在杀死我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:43:01.117

感谢您的建议，但是我无法锁定任何文件，因为我的进程几乎总是比可能正在编辑我正在上传的文件的进程的优先级低。

这就是我最终所追求的，它似乎运作良好！

```
class SizeCheckFile(file):
    def __init__(self, size, *args, **kwargs):
        file.__init__(self, *args, **kwargs)
        self.size = size
        self.data_read = 0

    def read(self, *args, **kwargs):
        data = file.read(self, *args, **kwargs)
        self.data_read += len(data)
        if self.data_read > self.size:
            raise UploadSizeMismatchError("File has grown!")
        elif not data and self.data_read != self.size:
            raise UploadSizeMismatchError("File has shrunk!")
        return data

    def seek(self, *args, **kwargs):
        current_pos = self.tell()
        file.seek(self, *args, **kwargs)
        if current_pos != self.tell():
            raise NotImplementedError("%s currently assumes the file is being read from start to finish!" % self.__class__.__name__) 
```

我传递给构造函数的大小与我传递给海报的`MultipartParam` `filesize`参数大小相同。

当然，这假设没有进行搜索，否则我将不得不覆盖`seek`并准确跟踪正在读取的内容，但对于我的用例，我不必担心文件正在流出。

# wpf - 显示工具提示时 DataGridCell 内容消失

> ID：15115135
> 
> 赞同：3
> 
> 时间：2013-02-27T14:53:42.120
> 
> 标签：wpf

如果单元格中的内容消失，我似乎无法将工具提示绑定到 DataGridCell 的内容。换句话说，当我将鼠标悬停在单元格上时，工具提示会按预期显示，但单元格内容不再可见（永久不可见，除非我向下滚动列表并向上滚动）。Bellow是我遇到问题的WPF：

```
<DataGrid.CellStyle>
    <Style TargetType="DataGridCell">
        <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Content, Mode=OneWay}"> 
        </Setter>
    </Style>
</DataGrid.CellStyle> 
```

当 ToolTip 显示时，我可以做些什么来阻止 DataGridCell 的内容消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:23:32.523

你绑定到`Content`属性，它可以是很多东西，但主要是一些控制：`TextBlock`文本，`CheckBox`布尔数据等等。此控件已经是其他视觉元素的子元素，因此它们的消失可能是因为它们已从单元格中删除并添加到`ToolTip`. 如果是这种情况，那么我猜它是在你的代码中某处完成的，你必须处理这个问题，但这不是一个好的解决方案。

或者，您可以将转换器添加到将解析`Content`和提取值的绑定，但该解决方案也不是很好。

处理这个问题的更好方法是绑定到实际源，而不是它的视觉表示。如果您不自动创建列，那么您可以为每一列定义工具提示样式：

```
 <DataGrid.Columns>
      <DataGridTextColumn Binding="{Binding Name}">
          <DataGridTextColumn.CellStyle>
              <Style>
                  <Setter Property="ToolTipService.ToolTip" Value="{Binding Name}" />
              </Style>
           </DataGridTextColumn.CellStyle>
       </DataGridTextColumn>
 </DataGrid.Columns> 
```

# visual-studio - 我找不到项目类型 Netduino

> ID：15115136
> 
> 赞同：1
> 
> 时间：2013-02-27T14:53:45.140
> 
> 标签：visual-studio, visual-studio-2012, netduino

我刚刚在邮件中收到了我的 netduino 并安装了微框架和 netduino sdk。在 Visual Studio 中，我有 C# 分支 Micro Framework，但项目类型“Netduino”在哪里出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:15:13.423

（尚）不支持 Visual Studio 2012。

[http://forums.netduino.com/index.php?/topic/5361-visual-studio-2012-and-netduino-plus/](http://forums.netduino.com/index.php?/topic/5361-visual-studio-2012-and-netduino-plus/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-08T12:41:07.733

这篇文章帮助了我 VS 2012 [http://blog.one75.be/post/Getting-started-with-Netduino-Plus-2-and-Visual-Studio-2012.aspx](http://blog.one75.be/post/Getting-started-with-Netduino-Plus-2-and-Visual-Studio-2012.aspx)

# database - 如何从 C# 代码将 SQL Server CE 迁移到 SQL Server 2012 Express

> ID：15115138
> 
> 赞同：1
> 
> 时间：2013-02-27T14:53:48.440
> 
> 标签：database, migration, sql-server-ce, sql-server-express

目前，我们的应用程序使用 SQL Server CE 作为我们的数据库。出于规模和性能的原因，我们决定继续使用 SQL Server 2012 Express（如果我错了，请纠正我）。

我的问题：我们需要将数据库从 SQL Server CE 迁移到具有所有 SB 属性（架构、索引、外键、数据 ...）的 2012 Express

此迁移应在 C# 代码中处理的升级过程中执行。

我们该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:20:14.167

您可以使用我的脚本 api 将 SQL CE 数据库脚本写入文件，然后针对 SQL Server 数据库运行脚本（示例需要一个空的服务器数据库，并且所需的 SQL Server 安全性已到位）

```
using ErikEJ.SqlCeScripting;
using System;    
using System.IO;

class Program
{
  static void Main(string[] args)
  {
    try
    {

        using (IRepository ceRepository = new DB4Repository(@"Data Source=C:\Data\SQLCE\Test\nw40.sdf"))
        {
            string fileName = Path.GetTempFileName();
            var generator = new Generator4(ceRepository, fileName);
            generator.ScriptDatabaseToFile(Scope.SchemaData);
            using (IRepository serverRepository = new ServerDBRepository4("Data Source=.;Trusted_Connection=true;Initial Catalog=Test"))
            {
                serverRepository.ExecuteSqlFile(fileName);
                Console.WriteLine("Database exported");
            }
        }
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex);
    }
    Console.ReadKey();
  }
} 
```

# java - 实现 Spring IOC 时如何避免使用 ApplicationContext.getBean()

> ID：15115141
> 
> 赞同：12
> 
> 时间：2013-02-27T14:53:53.407
> 
> 标签：java, spring, jakarta-ee, inversion-of-control, spring-ioc

我刚刚开始使用 Spring IOC 概念。我经常看到在互联网上找到的大多数示例都使用代码来获取对象。

```
ApplicationContext appContext = new ClassPathXmlApplicationContext("applicationContext.xml");
Hello hello = (Hello) appContext.getBean("hello"); 
```

作为stackoverflow中这些问题[1](https://stackoverflow.com/questions/812415/why-is-springs-applicationcontext-getbean-considered-bad)和[2的参考。](https://stackoverflow.com/questions/9675130/using-spring-in-standalone-apps)我推断，没有必要在代码中使用 appContext.getBean("hello") ，这被认为是不好的做法。另外，不推荐了。在这里纠正我，如果我的推断是错误的。

考虑到这一点，我对我的项目进行了相应的更改。这是我的 applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">
<bean id="utilClassRef" class="org.hd.derbyops.DUtils" lazy-init="false" />
<bean id="appContext" class="org.hd.derbyops.ContextProvider" lazy-init="false">
   <property name="utils" ref="utilClassRef" />
</bean>
</beans> 
```

我的 contextProvider 类代码

```
public class ContextProvider implements ApplicationContextAware {

    private static ApplicationContext ctx;

    /**
     * Objects as properties
     */
    private static DUtils utils;

    public void setApplicationContext(ApplicationContext appContext)
            throws BeansException {
        ctx = appContext;

    }

    public static ApplicationContext getApplicationContext() {
        return ctx;
    }

    public static DUtils getUtils() {
        return utils;
    }

    public void setUtils(DUtils dUtilsRef) {
        utils = dUtilsRef;
    }

} 
```

例如，考虑一个依赖于 org.hd.derbyops.DUtils 的 A 类。我正在使用以下代码行

```
ContextProvider.getUtils(); 
```

为了在 A 类中获取 DUtils 对象，从而避免 `ApplicationContext.getBean()`在我的代码中使用任何地方。

假设，如果我有 10 个类，并且我的类 A 依赖于所有这些类，则无需使用`ApplicationContext.getBean()`. 在那种情况下，如上所述，我想创建 ContextProvider 类的属性，然后是该属性的 setter 和 getter，其中 in`get<PropertyName>`是静态的。这样，我可以在需要对象的任何地方使用它，就像这样

```
ContextProvider.get<PropertyName>; 
```

这是我的简短问题。首先，我的方法对吗？如果是对的，在启动的时候加载所有的bean，会不会是性能杀手？如果不至少多次调用 getBean，您将如何在应用程序中做到这一点？

如果您要设计一个 Web 应用程序并且您要实现 Spring IOC，而不使用`ApplicationContext.getBean()`任何代码。你会怎么做？

**注意：**参考上面标记的其他问题

> 调用 ApplicationContext.getBean() 不是控制反转！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T15:10:39.773

简单的答案是“是”和“不是”，“不是”和“不是”。最后，在线搜索 spring MVC，因为这可能是你想要的。

所以，你的方法。是的，你大部分都做对了。但是，对所有事情都使用静态方法被认为是非常糟糕的做法。而且，你不需要。Spring 的理念是您可以简单地创建普通的 pojo，并且 spring 会将它们用作单例，并将它们相互注入（它也可以动态创建对象，但我在这里讨论常见的情况）。如果您使用静态类和方法，那么：

*   您不能模拟它们进行单元测试（您使用的是 JUnit 对吗？）
*   您不能将它们与继承一起使用
*   静态初始化器是释放异常的好方法
*   等等等等

所以，是的注入，而不是静态的东西。

其次，性能。你是对的，使用弹簧要慢得多，但是，如果你在启动时进行所有注入，它只会发生一次。Spring 适用于可能有许多单例类传递数据的服务器端应用程序。所以，可能有一个类从数据库中获取东西，一个处理它，一个显示它，而 spring 用于将它们连接在一起。

如果您在反复启动的应用程序中使用 spring，例如命令行应用程序，那么您将它用于错误类型的应用程序，并且您可能想要使用构建器或其他东西。Spring 适用于不经常重启的大型企业应用程序。

最后，如果您只是在启动时将类的所有依赖项注入到其中，并且对所有类执行此操作，那么您根本不需要执行任何 getBean 操作。此外，在 bean 上使用`init-method`and`destroy-method`属性意味着您可以在 spring 完成注入依赖项后启动进程。您只需要加载上下文，您的应用程序就会出现（双关语）。

对于 Web 项目，Spring MVC 基本上将控制模式的整个反转，并将其应用到 Web 应用程序中。spring 的东西由容器加载，您可以定义 URL 以使用 bean 名称来响应。而且您的大部分代码都可以保留为 pojos。如果你有一些非常复杂的东西，你可能想看看 spring web flow，但我建议你在尝试之前确保你的 spring foo 非常强大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T15:57:25.263

`getBean()`这是我在没有实际调用的情况下获取第一个实例的示例`ApplicationContext`。

```
public class Test{
  // Declare private static variable so that we can access it in main()
  private static Triangle triangle;

  // Use constructor injection to set the triangle
  public Test(Triangle triangle) {
      Test.triangle = triangle;
  }

  public static void main(String[] args) {
      // Specify the context file containing the bean definitions
      // Spring automatically creates instances of all the beans defined
      // in this XML file. This process is performed before you actually make
      // a getBean("beanName") call.
      ApplicationContext context = new ClassPathXmlApplicationContext("spring.xml");

      // Use instance methods of triangle 
      Test.triangle.draw();
  }
} 
```

您可以使用另一种方式：

在`spring.xml`（您的 bean 配置 XML 文件）

```
<bean class="com.example.Test" init-method="myMethod">
    <constructor-args ref="triangle"/>
</bean> 
```

现在为您的主要课程

```
public class Test {
  private final Triangle triangle;

  public Test (Triangle triangle) {
     this.triangle = triangle;
  }

  public static void main (String[] args) {
     ApplicationContext context = new ClassPathXmlApplicationContext("spring.xml");
  }

  // Called by Spring immediately after the Triangle Bean has been created and
  // all the properties for the bean have been set. This method name must match
  // the one specified with destroy-method attribute in spring.xml
  public void myMethod () {
     triangle.draw();
  }
} 
```

# iphone - iPhone 中的 \Windows\System32\Drivers\etc\hosts 文件是什么？

> ID：15115143
> 
> 赞同：0
> 
> 时间：2013-02-27T14:53:55.883
> 
> 标签：iphone

我正在开发一个 Web 应用程序，需要调试仅在 iPhone 上发生的问题。

我可以通过在 Safari（在我的手机上）中输入它的 ip 地址来访问我的开发盒上的站点，但是该域对应用程序很重要，所以每次我的 IP 更改时，我都必须在多个地方更新我的配置.

理想的情况是，如果我可以将 iPhone 配置为在我进入特定域时始终指向特定 IP，就像 C:\Windows\System32\Drivers\etc\hosts 文件一样。

有没有办法在不越狱手机的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:55:42.020

你必须越狱你的 iPhone，另一种方法是使用代理。希望我能帮忙:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:57:38.713

如果您越狱了，我认为它是`/etc/hosts`（与 Mac OS X 设置相同）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:27:47.880

我将 .local 附加到我的计算机名称的末尾，它能够解决它。

这不是一个完美的解决方案，因为我仍然需要调整应用程序中的设置，但至少当我的 IP 更改时我不必继续更改它。

根据另一个 SE 网站上的[这个答案，它是 Bonjour 功能。](https://apple.stackexchange.com/a/1184)

# java - 在 CVS (Eclipse) 中将过时的分支与 HEAD 合并

> ID：15115148
> 
> 赞同：0
> 
> 时间：2013-02-27T14:54:12.097
> 
> 标签：java, merge, cvs, branching-and-merging

基本上，我们有一个需要与 HEAD 合并的分支（称为 B，它包含一些特定于分支的代码）。我们遇到的问题是该分支是很久以前创建的。从那时起，HEAD 进行了多次更新，提供了许多新功能，并修复了许多错误。B 分支仍然具有 HEAD 中已经修复的大部分错误，并且缺少一些功能。所以，需要做的是获取分支 B 的一些特性（可能有大约 50 个文件包含新功能 - 我不知道这些文件到底是什么），同时保持 HEAD 的其余部分完好无损。

目前，Eclipse 中的合并工具报告了 1700 多个更改，自动合并会用分支中的代码覆盖 HEAD 中的代码（因此，引入了已经修复的错误）。有没有更好的方法来解决这个问题，而不是经历所有 1700 次更改并手动合并它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:27:37.883

如果我了解您的问题，您想找出特定分支上的更改，并将这些更改应用于主干。我认为最简单的方法是创建一个补丁文件。

首先将分支的基部和尖端检出到单独的目录中。你说你有一个基本标签，它让你领先于 99% 的 CVS 用户。如果不是这种情况，那么您可以进行基于日期的结帐。找到正确的日期会很痛苦；最简单的方法是查看日志以查找您知道在分支上没有更改的文件，并跟踪该分支在修订历史中出现的位置。

第二步是创建一个补丁文件，描述对分支所做的所有更改。[这里](http://linux.byexamples.com/archives/163/how-to-create-patch-file-using-patch-and-diff/)的说明似乎很完整（我在 Google 上搜索了“创建补丁”并查看了最上面的结果）。

你接下来要做什么取决于补丁有多大，以及自从树枝被砍断后树干发生了多少变化。如果您感到幸运，最简单的方法是检查主干并按照链接文档中的说明应用补丁。您可能至少会遇到一些故障，并且无论如何您都需要检查每个更改以验证它是否仍然有意义。

另一种方法是打开三个窗口： 窗口#1 是补丁文件，它将告诉您更改的文件以及其中的更改内容。窗口 #2 是分支（尖端）上的文件，因此您可以看到它当前在做什么。Window #3 是您的行李箱上的文件。在这种方法中，您将代码从 #2 复制到 #3 有意义的地方，而 #1 仅用作复制内容的指南。

值得一提的是，虽然 CVS 在分支和合并方面特别痛苦，但没有 VCS 擅长合并高度分散的分支（不管 Joel 怎么说）。

# asp.net-mvc - MVC.NET 跟踪部分和模板

> ID：15115150
> 
> 赞同：0
> 
> 时间：2013-02-27T14:54:22.850
> 
> 标签：asp.net-mvc, partial-views, trace, razor-2

有没有办法跟踪正在使用哪些 cshtml 文件来构建特定的页面加载？例如：

*   /Views/Shared/_LayoutUser.cshtml
    *   /Views/Shared/_UserNavigation.cshtml
    *   /Views/Shared/_BannerSelector.cshtml
    *   RenderBody - /Views/Users/Index.cshtml
        *   /Views/Users/DisplayTemplate/User.cshtml
        *   用于构造视图的任何其他内容
    *   /Views/Shared/_UserFooter.cshtml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:56:51.980

尝试[一瞥](http://getglimpse.com/)。除了 MVC 之外，它的工作方式与 Firebug 非常相似。它显示了您的视图/部分/布局的执行树，看起来与您描述的几乎相同，包括它们的执行时间。它也非常可扩展，并且有跟踪实体框架和 JavaScript 等的插件。

# ruby - Ruby / CSV - 将 Dos 转换为 Unix

> ID：15115151
> 
> 赞同：0
> 
> 时间：2013-02-27T14:54:24.483
> 
> 标签：ruby, csv

我目前使用：[http](http://emacswiki.org/emacs/DosToUnix) ://emacswiki.org/emacs/DosToUnix手动将 DOS CSV 转换为 UNIX。只是想知道我缺少的 CSV 库是否有 ruby​​ 函数？和/或如果有可能构建一个快速脚本/猴子补丁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:03:35.427

是的。CSV 文档说：

> 附加到每行末尾的字符串。这可以设置为特殊的 :auto 设置，它要求 CSV 自动从数据中发现这一点。自动发现会提前读取数据以寻找下一个“\r\n”、“\n”或“\r”序列。

`:auto`是默认设置，因此您应该能够将您的 DOS CSV 提供给未修改的 Ruby。

但是，如果要转换为 UNIX 行尾：

```
str.gsub(/\r\n/, "\n") 
```

# javascript - 将渲染函数与参数绑定。骨干网.js

> ID：15115153
> 
> 赞同：1
> 
> 时间：2013-02-27T14:54:27.393
> 
> 标签：javascript, jquery, backbone.js

通常一个绑定`model change`事件是`render function`这样的：

```
initialize: function() {
    this.model.bind('change', this.render, this);
} 
```

如何将`model change`事件绑定到`render function with parameter`：

```
render: function(templ) {
    this.$el.html(templ);
}

initialize: function() {
    // ?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:55:54.977

像这样的东西？

```
this.model.bind('change', function() {
    return this.render(templ);
}, this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:10:39.433

您可以将[下划线绑定](http://underscorejs.org/#bind)用于部分应用程序（这是您想要做的术语）。

```
this.model.bind('change', _.bind(this.render, this, 'foo', 'bar')); 
```

所以 render 接收 'foo' 和 'bar' 作为 aguments

# java - Eclipse 插件 - 访问编辑器

> ID：15115154
> 
> 赞同：3
> 
> 时间：2013-02-27T14:54:30.460
> 
> 标签：java, eclipse-plugin, editor

所以，我目前正在为 Eclipse IDE 开发一个插件。简而言之，该插件是一个协作式实时代码编辑器，其中编辑器是 eclipse（类似于 Google 文档，但带有代码并在 eclipse 上）。这意味着当我安装插件时，我可以使用我的 Gmail 帐户连接 eclipse 到合作伙伴的 eclipse。当我开始在我的机器上编码时，我的搭档会看到我写的东西，反之亦然。

我目前面临的问题是访问 eclipse 的编辑器。例如，我必须监视活动文档中的所有更改，以便每次发生更改时，其他合作伙伴的 IDE 都会收到此更改的通知。

我找到并阅读了**IDcoumentProvider**、**IDocument**和**IEditorInput**类，它们以某种方式连接，但我无法理解这种连接或如何使用它。因此，如果有人可以解释这种联系，我将不胜感激。另外，是否还有其他方法可以实现我的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:20:13.230

您可以`IEditorPart`通过`IWorkbenchPage`.

```
IEditorPart editor =  ((IWorkbenchPage) PlatformUI.getWorkbench()
        .getActiveWorkbenchWindow().getActivePage()).getActiveEditor(); 
```

从那里，您可以访问各种其他类，包括编辑器的`IEditorInput`、`File`由该编辑器加载的类或底层的 GUI`Control`元素。（请注意，根据编辑器的类型（文本文件、图表等），您可能需要转换为不同的类。）

```
FileEditorInput input = (FileEditorInput) editor.getEditorInput();
StyledText editorControl = ((StyledText) editor.getAdapter(Control.class));
String path = input.getFile().getRawLocationURI().getRawPath(); 
```

现在，您可以向 中添加一个监听器`Control`，例如`KeyAdapter`用于监视在相应编辑器中发生的所有击键。

```
editorControl.addKeyListener(new KeyAdapter() {
    @Override
    public void keyPressed(KeyEvent e) {
        System.out.println("Editing in file " + path);
    }
}); 
```

或者，如果监控所有击键过多，您可以`IPropertyListener`向编辑器注册一个。例如，每当编辑器“脏”或保存时，都会通知此侦听器。的含义`propId`可以在 中找到`IWorkbenchPartConstants`。

```
editor.addPropertyListener(new IPropertyListener() {
    @Override
    public void propertyChanged(Object source, int propId) {
        if (propId == IWorkbenchPartConstants.PROP_DIRTY) {
            System.out.println("'Dirty' Property Changed");
        }
    }
}); 
```

# ios - 如何在 Xcode 上管理登录和注销过程

> ID：15115155
> 
> 赞同：0
> 
> 时间：2013-02-27T14:54:31.833
> 
> 标签：ios, xcode, layout, hierarchy, loginview

我已经为此苦苦挣扎了很长时间，所以我最终放弃了尝试寻找答案并决定立即问它。

在我的应用程序上，我有一个用户登录页面。该应用程序有一个 TabBarViewController，它的项目中有一些 NavigationControllers。

我最后的努力是将登录屏幕嵌入到 NavigationBarController 并使其成为初始视图控制器，如下图所示。

![在此处输入图像描述](../Images/c1be0ba2e0218ba5ee8a2e538483e80a.png)

当应用程序启动时，如果用户登录 LogInViewController 'segues' 到 TabBarController 并且一切都很好。当用户在 ProfileViewController 中注销时，此 ViewController 中有一个 segue “segueing”到初始视图控制器。

另一方面，如果没有用户登录，LogInViewController 会显示一个视图，以便用户可以插入用户名和密码。如果凭据正确，则 LogInViewController 'segues' 到 TabBarController。问题是，在这一点上，即使应用程序仍然运行良好，我也会收到以下警告：

> 警告：在演示过程中尝试在 UINavigationController: 0xa526370 上呈现 TabBarViewController: 0xa19a670！

所以我认为这不是处理所有这些 LogIn/LogOut 过程的最佳方式。

我的问题是，我应该将 LogInScreen 放在层次结构中的哪个位置？如果我的布局/层次结构是正确的，如何让警告消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:58:29.407

您应该将您的主屏幕设置为您的`rootViewController`，并且一旦您的应用程序启动或激活，您可以检查用户是否已登录，如果没有，则以模式显示 LoginScreen，这将避免与其他`NavigationController`或`TabBarController`

另一种可能是把所有的都`ViewControllers`放在一个中并根据你想显示的视图`MutbaleArray`设置当前的索引？`TabBarController`如果您不想在用户登录后显示 LoginScreen，只需将其从您的 中删除，[在此处](https://stackoverflow.com/questions/14739461/how-do-you-transition-in-a-new-non-model-view-controller-without-using-uinavigat/14739535#14739535)`MutableArray`查看我的答案，这可能有助于您的事业

# sql - 如果加入返回 NULL 则执行以下操作

> ID：15115162
> 
> 赞同：4
> 
> 时间：2013-02-27T14:54:47.613
> 
> 标签：sql, oracle, oracle10g

我有 3 张桌子

**表格1**

```
ID NAMEID OTHER
--------------------------------------
1  12345  BLAH
2  23456  BLAH
3  25896  BLAH
4  74896  BLAH
5  95124  BLAH
6  63258  BLAH
7  99999  BLAH 
```

**表2**

```
TID    Name
-------------------------------------
12345  Apple
23456  Orange
25896  Banana
74896  Grape
95124  Lime
63258  Berry 
```

**表3**

```
ID    Start_Date  End_Date Alt_Name
-------------------------------------
9999     BLAH       BLAH       Pears
12345    BLAH       BLAH             
23456    BLAH       BLAH       Orange 
```

**关系**

```
 Table1.NAMEID = Table2.TID
 Table1.ID     = Table3.ID 
```

有时在 Table2.TID 中找不到 NameID，因此如果在 table2 中找不到，则查找 table3。

**这是查询和当前结果**

```
Select 
      Table1.ID
      Table2.Name
      Table3.Start_Date
      Table3.End_Date
      Table1.Other
from Table1 Table1
left outer join Table3 Table3 ON Table1.ID     = Table3.ID
left outer join Table2 Table2 On Table1.NAMEID = Table2.TID 
```

**电流 - 输出**

```
ID    Name    Start_Date  End_Date    Other
-------------------------------------------
1     Apple      Blah       Blah       Blah
2     Orange     Blah       Blah       Blah
3     Banana     Blah       Blah       Blah
4     Grape      Blah       Blah       Blah
5     Lime       Blah       Blah       Blah
6     Berry      Blah       Blah       Blah
7      NULL      Blah       Blah       Blah 
```

**我想要的输出**

```
ID    Name    Start_Date  End_Date    Other
-------------------------------------------
1     Apple      Blah       Blah       Blah
2     Orange     Blah       Blah       Blah
3     Banana     Blah       Blah       Blah
4     Grape      Blah       Blah       Blah
5     Lime       Blah       Blah       Blah
6     Berry      Blah       Blah       Blah
7     Pears      Blah       Blah       Blah 
```

在表 3 中，对于每个 ID，Alt_Name 并不总是存在，有时它也为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:59:19.157

```
SELECT  a.ID,
        COALESCE(b.Name, c.AltName, '-no name-') as `Name`
        c.Start_DATE,
        c.End_DATE,
        a.Other
FROM    table1 a
        LEFT JOIN table2 b
            ON a.nameID = b.tid
        LEFT JOIN table3 c
            ON a.NameID = c.ID 
```

# facebook - 不使用 https 时，target="_blank" 被附加到我的 Facebook 应用程序中的链接

> ID：15115164
> 
> 赞同：0
> 
> 时间：2013-02-27T14:54:51.573
> 
> 标签：facebook, https

如果用户使用 https，我的应用程序可以正常工作。但如果用户不使用 https，facebook 会插入`target="_blank"`所有超链接，这会导致它在 facebook 之外打开一个新标签。为什么要这样做，我需要做什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:59:53.277

您的页面[https://secure.rvwholesalers.com/rvwholesalers/facebook/apps/inventory/](https://secure.rvwholesalers.com/rvwholesalers/facebook/apps/inventory/)已经附加了 target="_blank"

```
<tr>
<td><a style="font-size: 16px;" target="_blank" href="http://www.rvwholesalers.com/rvs/sierra-376bhok-vs-sandpiper-376bhok.html">Compare our Sandpiper 376BHOK to their Sierra 376BHOK.</a></td>
</tr> 
```

# c++ - 全局友元函数的前向声明

> ID：15115165
> 
> 赞同：2
> 
> 时间：2013-02-27T14:54:55.480
> 
> 标签：c++, qt, friend, forward-declaration

我有以下命名空间和类层次结构：

```
namespace Ns1 {
    class Outer {
    private:
           class Inner {
           };
           QSet<Inner> set;
    };
} 
```

现在我需要声明一个全局函数：

```
uint qHash(Ns1::Outer::Inner const& el);
bool operator==(Ns1::Outer::Inner const& el1,
                Ns1::Outer::Inner const& el); 
```

所以函数必须是 Outer 和 Inner 的朋友。问题并表明该函数在全局范围内：

```
friend uint qHash(Ns1::Outer::Inner const& el);
friend operator==(Ns1::Outer::Inner const& el1,
                Ns1::Outer::Inner const& el); 
```

我无法处理这种情况下的前向声明。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:18:30.533

编辑：

你是对的！您发现了该语言无法处理的极端情况（因为`friend`船舶声明仅适用于先前声明的函数或最里面的命名空间）。不幸的是，这意味着您将不得不稍微重组您的代码，因为您想要做的事情不能完全以这种方式完成。

最简单的方法是在命名空间中定义这两个函数，`Ns1`然后将`using`它们放入全局命名空间中。除了嵌套命名空间中有两个额外的函数外，这与您想要的效果基本相同。

您的另一组选项涉及从根本上解决问题：为什么您的类对象的公共接口没有提供足够的能力，以至于需要友谊？例如，如果您打算能够在全局范围内传递对象，为什么是`Inner`私有的？`Outer``Inner`

为什么哈希和比较函数需要访问`Inner`的内部状态？为什么不`Inner`提供一个公共的比较接口，然后由运营商使用？

# c# - 为什么这个 Linq 查询为 Count() 返回 0？

> ID：15115168
> 
> 赞同：2
> 
> 时间：2013-02-27T14:55:02.170
> 
> 标签：c#, linq, linq-to-sql

这似乎是一个不一致的地方，但我可能只是错过了一些明显的东西。基本查询是：

```
var events = db.tbl_special_events.Where(x => x.TimeStamp >= startDate); 
```

当我运行以下代码块时，就会出现明显的不一致：

```
int c1 = 0;
foreach (var e in events)
{
    if (e.TimeStamp.DayOfWeek.ToString() == "Tuesday") c1++;
}

int c2 = events.Where(e => e.TimeStamp.DayOfWeek.ToString() == "Tuesday").Count(); 
```

运行后，c1 为 1832，但 c2 为 0。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:53:21.610

我重新创建了这个测试，发现它可能与 DateTime 函数直接相关。

生成的查询：

```
exec sp_executesql N'SELECT [t0].[User_ID], [t0].[Email], [t0].[Password], [t0].[BrandID], [t0].[CustomerID], [t0].[Created], [t0].[EndDate], [t0].[AccountStatusID], [t0].[Verified], [t0].[ResetPasswordFailCount], [t0].[ResetPasswordLocked]
FROM [dbo].[User] AS [t0]
WHERE ((CONVERT(NVarChar,CONVERT(Int,(DATEPART(dw, [t0].[Created]) + (@@DATEFIRST) + 6) % 7))) = @p0) AND ([t0].[BrandID] = @p1)',N'@p0 nvarchar(4000),@p1 int',@p0=N'Tuesday',@p1=3 
```

注意@p0=N'Tuesday'

请记住，IQueryable 和 IEnumerable 的不同之处在于 IEnumerable 表示实际的 .net 对象，IQueryable 将您的表达式转换为用于查询数据库的实际 SQL 语句。因此，您在该表达式中提供的任何值实际上都会发送到数据库。

它返回 0 个结果，因为没有匹配项。原因是，SQL 中的日期转换返回 2 而不是“星期二”。如果在 LINQ WHERE 子句中将 Tuesday 替换为 2，则可以对此进行测试，它实际上会起作用。这将在枚举后起作用，因为结果将成功映射到可用的 .net 对象中，其中 DateTime.DayOfWeek 转换为“星期二”将正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:11:50.977

您的计数作用于一段`IQueryable<Event>`时间`e`是一个枚举实例。因此，某些操作可能无法工作，因为它们无法翻译成 SQL [**编辑**：或将翻译成无意义的 SQL]。

为确保您的`Where`条款有效，请`AsEnumerable()`在它之前添加一个。这会将 转换`IQueryable<Event>`为 an`IEnumerable<Event>`并告诉 linq 提供程序此时它应该停止生成 SQL。

因此，此语句应提供正确的结果：

```
int c2 = events.AsEnumerable()
    .Where(e => e.TimeStamp.DayOfWeek.ToString() == "Tuesday")
    .Count(); 
```

~~无法转换~~的实际代码导致 SQL 中的问题是`e.TimeStamp.DayOfWeek.ToString()`.

或者，您可以使用`System.Data.Objects.SqlClient.SqlFunctions`( [doc here](http://msdn.microsoft.com/en-us/library/dd466169.aspx) ) 类来提示 linq 提供程序它应该在 SQL 中做什么。

**编辑**

~~正如@Servy 指出的，这是一个 Linq to SQL 问题。但是，这个问题很常见，所以我留下答案并且不删除它。~~

再次查看 OP，整个游戏可能还有另一个变量……延迟加载。

在 foreach 循环中，TimeStamp 是延迟加载的。在计数查询中，提供者尝试构建一个 SQL 查询，在此构建过程中它可能无法使用`ToString`（已知这是有问题的）并评估`e.TimeStamp.DayOfWeek.ToString()`为不同于`"Tuesday"`.

`AsEnumerable()`强制提供程序停止生成 SQL，因此再次`e.TimeStamp`延迟加载。

准确了解正在发生的事情的唯一方法是使用数据库上的跟踪工具（例如 SQL Server Profiler）来实际查看在服务器上执行的查询（或查询）。

**编辑 2**

基于[@Sinaesthetic 的回答](https://stackoverflow.com/a/15122183/266919)，返回 0 的原因是 Query 尝试比较`"4"`返回`"Tuesday"`false 的结果，因此正确的结果是`false`.

可以通过执行来测试

```
select ((CONVERT(NVarChar,CONVERT(Int,(DATEPART(dw, getdate()) + (@@DATEFIRST) + 6) % 7)))) 
```

针对数据库。

但是，这也表明由提供者决定它生成什么 SQL。此外，由提供者决定它支持哪些语句以及不支持哪些语句。

它还表明，***使用`AsEnumerable`停止 SQL 生成过程会对查询的语义评估产生影响***。

# java - 如何从其他程序实例更新 Swing GUI

> ID：15115170
> 
> 赞同：1
> 
> 时间：2013-02-27T14:55:09.323
> 
> 标签：java, swing

我正在做一个棋盘策略游戏。问题是我之前进行了一次房间聊天，连接的玩家可以使用组合框选择他的颜色（类似于帝国时代 2）并一直交谈直到主机开始游戏。

问题是我不知道如何更新其他玩家的 GUI 以显示玩家 X 选择了红色。

我已经将游戏（主机）的创建者与客户端连接起来，我可以通过控制台相互发送消息。但我真的不知道如何从一个简单的组合框更改后更新两个 GUI。

如果玩家 2 将他的颜色设置为绿色

然后它必须在其他播放器 GUI 中显示为绿色，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:01:26.847

您可以尝试实现[观察者设计模式](http://en.wikipedia.org/wiki/Observer_pattern)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:00:38.907

您必须向组合框添加一个侦听器。侦听器应将特殊消息（命令）与颜色（类似于“playerColorChanged #00ff00”）一起发送到主机，并且主机必须将其分发给所有其他客户端（另外附加源玩家名称/ID）。然后客户端必须相应地更新他们的 GUI。

我不知道您的代码，但可能必须更新客户端和主机之间的当前通信协议才能发送此类“系统消息”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:06:11.713

根据您的客户端/服务器协议的编写方式，您应该有一些发送不同消息类型的方法。让每个客户端向服务器发送特定的消息类型，通知玩家何时选择一种颜色，然后将其转发给所有其他客户端。这些客户端中的每一个在收到该消息后都会更改相关的 UI 指示器。

（该方法可以与对等协议类似。）

# oracle - 表空间大文件是否来自 sqlplus

> ID：15115177
> 
> 赞同：0
> 
> 时间：2013-02-27T14:55:21.643
> 
> 标签：oracle, sqlplus

从 sqlplus 我试图找出是否使用大文件表空间创建了模式。我希望它存储在 dba_segments 或 dba_data_files 中，但我也找不到。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:07:32.493

模式和表空间是不同的。模式可以将对象存储在许多表空间中（权限允许）。

如果您想查看给定的 TS 是否为大文件，请使用：

```
SELECT tablespace_name, bigfile FROM dba_tablespaces; 
```

# python - 阿帕奇，姜戈。Forbidden 您无权访问此服务器上的 /

> ID：15115180
> 
> 赞同：2
> 
> 时间：2013-02-27T14:55:24.960
> 
> 标签：python, django, apache

我正在使用 Ubuntu 12.04 LTS。

我在 /home/server/ 下创建了一个 django 项目

这是我添加到我的 httpd.conf 中的内容：

```
WSGIScriptAlias / /home/server/my_server/wsgi.py
WSGIPythonPath /home/server/
<Directory /home/server/>
   <Files wsgi.py>
       Order deny,allow
       Allow from all
   </Files>
</Directory> 
```

问题是，当我访问本地主机时，它说

```
Forbidden
You don't have permission to access / on this server. 
```

非常感谢。

# c# - 将 java 字节转换为 c# 字节（序列化问题）

> ID：15115188
> 
> 赞同：1
> 
> 时间：2013-02-27T14:55:43.960
> 
> 标签：c#, java, android, .net, serialization

在下文中，我尝试在存储在亚马逊中的 Java 序列化文本文件与 c# 反序列化对象之间进行某种魔术。我的想法是将 Java 中的有符号字节转换为 .net 中的无符号字节！但不幸的是它不起作用！这是有效的想法吗？我怎么能解决这个问题？

```
using (Stream amazonStream = getObjRespone.ResponseStream)
{   
    List<sbyte> buffer = new List<sbyte>();
    int onebyte = 0;
    while (onebyte != -1)
    {
        onebyte = amazonStream.ReadByte();
        if (onebyte != -1)
            buffer.Add((sbyte)onebyte);
    }
    byte[] dest = Array.ConvertAll(buffer.ToArray(), item => (byte)item);
    Stream stream = new MemoryStream(dest);
     object obj=  binaryFormatter.Deserialize(stream);
    //byte[] b=  (byte[]) buf.ToArray();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:59:40.780

用于`protobuf`此目的，或其他一些跨平台序列化（xml、json）

# css - twitter bootstrap 下拉菜单的对齐方式

> ID：15115204
> 
> 赞同：8
> 
> 时间：2013-02-27T14:56:29.630
> 
> 标签：css, drop-down-menu, twitter-bootstrap

我设计了一个带有下拉菜单的引导导航栏

[http://jsfiddle.net/yabasha/fex8N/3/](http://jsfiddle.net/yabasha/fex8N/3/)

```
<nav class="navbar navbar-inverse">
<div class="navbar-inner">
    <ul class="nav">
        <li><a href="#">Home</a></li>
        <li><a href="#">Link</a></li>
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
        </ul>
        </li>
    </ul>
</div> 
```

```
ul.nav li.dropdown:hover > ul.dropdown-menu{
display: block;    
} 
```

有没有办法更改下拉菜单的默认对齐方式（从左到中/右），以便箭头显示在中/右？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T19:12:02.463

最好避免使用`px`for 定位，因为下拉菜单的宽度可能会改变。这将更适合于居中插入符号：

```
.navbar .nav > li > .dropdown-menu.pull-center:after {
  left: 50%;
  margin-left: -6px;
}
.navbar .nav > li > .dropdown-menu.pull-center:before {
  left: 50%;
  margin-left: -7px;
} 
```

对于右对齐，您只需要将类添加`pull-right`到下拉列表中：

```
<li class="dropdown">
  <a class="dropdown-toggle" href="#">Link</a>
  <ul class="dropdown-menu pull-right">
    <!-- your menu -->
  </ul>
</li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:06:36.483

JSfiddle 与您的示例[http://jsfiddle.net/shail/fex8N/5/](http://jsfiddle.net/shail/fex8N/5/)

根据您的喜好更改以下代码以使下拉插入符号居中：

```
.navbar .nav > li > .dropdown-menu:after {

left: 83px;  /change to your liking/

 }
 .navbar .nav > li > .dropdown-menu:before {

left: 83px;  /keep values in after and before same /

   } 
```

要将 li 元素与右侧对齐：

```
.dropdown-menu > li > a {
             text-align:right;
   } 
```

要将 li 元素与中心对齐：

```
.dropdown-menu > li > a {
             text-align:center;
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T09:38:54.013

我已经在我的项目中实现了这一点，并在下面的链接中做出了回答。

[https://stackoverflow.com/a/21849528/2026261](https://stackoverflow.com/a/21849528/2026261)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-02T17:38:13.510

```
<div class="dropdown" data-toggle="dropdown" style="width: 150px; text-align: right;">
     <ul class="dropdown-menu" role="menu">
        <li><a href="#">Write Post</a></li>
        <li><a href="#">Posts List</a></li>
        <li class="divider"></li>
        <li><a href="#">Logout</a></li>
     </ul>
     <label class="dropdown-toggle" data-toggle="dropdown">Welcome Hero</label>
     <span class="caret" data-toggle="dropdown"></span>
  </div> 
```

通过这种方式，您可以根据您的选择将菜单左对齐或右对齐。![在此处输入图像描述](../Images/0cb91da85c52bf9e7c5b8c6c2da0ba4f.png)

# c++ - 这是访问列表中对象的正确方法吗？

> ID：15115208
> 
> 赞同：0
> 
> 时间：2013-02-27T14:56:32.137
> 
> 标签：c++, list

编辑：**TLDR？**这是一个摘要：

要求是一个基本上无限（或任意）长的容器。所以 list 听起来是个好主意，因为它可以将对象放在任何可用的内存空间中。

但是，向量在访问时要快得多/高效，但是如果我们没有长的顺序条带，则可能无法放入内存中。

建议使用指针向量来减少内存使用，但是如果有 1 GB 的指针并且我有 4GB 的内存，问题仍然存在，它可能不适合！

解决方案：向量列表可能是要走的路。列表中的每个项目都可以是一个向量，其中包含 1000 个指向我们希望能够访问的项目的指针。一个类可以处理这个功能。

**原始问题：**

正如一位智者所说：“有了指针，如果它只工作一次，那并不能保证你做对了。”

我有一堂课：

```
class A; 
```

A 类在 std::list 中：

```
std::list<A> list_of_A; 
```

要访问其中的项目，我正在使用：

```
std::list<A>::iterator iter = list_of_A.begin();
std::advance(iter, <an_unsigned_int>);
return *iter; 
```

这似乎有效，但这样做是`return *iter`正确的吗？我应该提到最后 3 行是在一个函数中，它返回一个`const A&`。

我在 stackoverflow 上寻找答案，但找不到这个问题的副本，这让我感到惊讶。

列表>矢量，因为我将在列表中交换东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:58:44.200

是的; 如果您的函数返回，您将在列表中返回一个引用，如果您的函数返回`A&`，则返回`A const&`一个副本`A`。

但是，如果您经常这样做，为什么不使用`std::vector`? 它们具有随机访问迭代器，并且几乎总是比 a 更有效`std::list`，除非对象很大并且您拥有大量对象。`std::list`缓存效率很低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:24:21.803

只要您没有前进到（或过去）end()，这很好。

```
const A& stuff(std::list<A>& list_of_A, int index)
{
    assert(index <= list_of_A.size());              // Protect against UB
                                                    // of advancing past end.

    std::list<A>::iterator iter = list_of_A.begin();
    std::advance(iter, index);

    if (iter == list_of_A.end())
    {    throw std::runtime_error("Failed");       // Not allowed to de-reference end()
    }
    return *iter;
} 
```

# c# - 如何将字节数组（即 byte[]）保存到 Azure Blob 存储？

> ID：15115212
> 
> 赞同：21
> 
> 时间：2013-02-27T14:56:43.120
> 
> 标签：c#, azure, azure-blob-storage

我知道如何保存 Streams，但我想获取该流并创建缩略图和其他大小的图像，但我不知道如何将 byte[] 保存到 Azure Blob 存储。

这就是我现在为保存 Stream 所做的事情：

```
 // Retrieve reference to a blob named "myblob".
        CloudBlockBlob _blockBlob = container.GetBlockBlobReference("SampleImage.jpg");

        // upload from Stream object during file upload
        blockBlob.UploadFromStream(stream);

        // But what about pushing a byte[] array?  I want to thumbnail and do some image manipulation 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-27T15:14:41.403

这曾经在 Storage Client 库中（肯定是 1.7 版） - 但他们在 2.0 版中删除了它

> “所有上传和下载方法现在都是基于流的，FromFile、ByteArray、Text 重载已被删除。”

[http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/windows-azure-storage-client-library-2-0-break-changes-amp-migration-guide.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/windows-azure-storage-client-library-2-0-breaking-changes-amp-migration-guide.aspx)

但是，围绕字节数组创建只读内存流非常轻量：

```
byte[] data = new byte[] { 1, 2, 3 };
using(var stream = new MemoryStream(data, writable: false)) {
    blockBlob.UploadFromStream(stream);
} 
```

### 更新：UploadFromByteArray 回来了

[MSDN 文档](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.blob.cloudblockblob.uploadfrombytearray.aspx)- 从我在[源代码](https://github.com/Azure/azure-storage-net/blob/9f583bc35b8535bae01f1b3b10beb7edc3054756/Lib/ClassLibraryCommon/Blob/CloudBlockBlob.cs)中可以看出，这在 3.0 版中又回来了，在 4.0 版中仍然存在。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-02T01:36:42.590

更新：

UploadFromByteArray 回来了。

```
public void UploadFromByteArray (
    byte[] buffer,
    int index,
    int count,
    [OptionalAttribute] AccessCondition accessCondition,
    [OptionalAttribute] BlobRequestOptions options,
    [OptionalAttribute] OperationContext operationContext
) 
```

[http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.blob.cloudblockblob.uploadfrombytearray.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.blob.cloudblockblob.uploadfrombytearray.aspx)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-07-02T22:10:32.873

使用新的 SDK`azure.storage.blob`

```
var blobContainerClient = new BlobContainerClient(storageConnectionString, containerName);
BlobClient blob = blobContainerClient.GetBlobClient(blobName);

using(var ms = new MemoryStream(data, false))
{
     await blob.UploadAsync(ms);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-27T14:59:05.383

我对 Azure 也一无所知，但使用 Streams，您可以按如下方式处理它：

```
//byte[] data;

using(var ms = new MemoryStream(data, false))
{
    blockBlob.UploadFromStream(ms);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-27T19:48:42.980

这是我目前使用的功能：

```
//CREATE FILE FROM BYTE ARRAY
public static string createFileFromBytes(string containerName, string filePath, byte[] byteArray)
{

    try {

        CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConfigurationManager.ConnectionStrings("StorageConnectionString").ConnectionString);

        CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
        CloudBlobContainer container = blobClient.GetContainerReference(containerName);

        if (container.Exists == true) {
            CloudBlockBlob blockBlob = container.GetBlockBlobReference(filePath);

            try {
                using (memoryStream == new System.IO.MemoryStream(byteArray)) {
                    blockBlob.UploadFromStream(memoryStream);
                }
                return "";
            } catch (Exception ex) {
                return ex.Message.ToString();
            }
        } else {
            return "Container does not exist";
        }
    } catch (Exception ex) {
        return ex.Message.ToString();
    }
} 
```

# jquery - 动态更改 jQuery Mobile 列表视图中的图标

> ID：15115219
> 
> 赞同：5
> 
> 时间：2013-02-27T14:56:54.273
> 
> 标签：jquery, listview, jquery-mobile, icons

当我动态更改图标时，它不会反映页面上的更改，即使在标记中它已更改。

例子：

```
 <ul data-role="listview" data-autodividers="true" data-filter="true" data-inset="true">
        <li data-icon="check"><a href="#">Adam Kinkaid</a></li>
        <li data-icon="check"><a href="#">Alex Wickerham</a></li>
        <li data-icon="check"><a href="#">Avery Johnson</a></li>
        <li data-icon="check"><a href="#">Bob Cabot</a></li>
        <li data-icon="check"><a href="#">Caleb Booth</a></li>
        <li data-icon="check"><a href="#">Christopher Adams</a></li>
        <li data-icon="check"><a href="#">Culver James</a></li>
    </ul>

$("li").tap(function() {
    //Alert the old icon
    alert($(this).jqmData("icon"));

    //Toggle
    $(this).jqmData("icon") == "false" ? $(this).jqmData("icon", "check") :             $(this).jqmData("icon", "false");

    //Alert the new icon
    alert($(this).jqmData("icon"));
}); 
```

[http://jsfiddle.net/Mc97V/](http://jsfiddle.net/Mc97V/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T15:03:49.997

我给你做了一个工作示例：http: [//jsfiddle.net/Gajotres/qgE6L/](http://jsfiddle.net/Gajotres/qgE6L/)

```
$('#index').live('pagebeforeshow',function(e,data){    
    $("li").tap(function() {
        $(this).buttonMarkup({ icon: "edit" });
    });  
}); 
```

# node.js - 将 Mongoose 对象保存到两个集合中

> ID：15115223
> 
> 赞同：7
> 
> 时间：2013-02-27T14:57:11.313
> 
> 标签：node.js, mongodb, mongoose

目前我有一个节点应用程序，它使用猫鼬将对象保存到 MongoDB 中。我正在使用与此类似的模型：

```
var mongoose = require('mongoose')
    , Schema = mongoose.Schema;

var RegistrationSchema = new Schema({
        name:{ type: String, default: '', trim: false}
});

mongoose.model('Registration', RegistrationSchema); 
```

它将我的对象保存到称为注册的集合中。

我这样保存我的注册：

```
var registration = new Registration(data);

      registration.save(function(err) {
        if (err) {
          return callback({
            source: 'data_save',
            type: 'admin',
            errors: err
          });
        }
        else {
          return callback(null, data);
        }
      }); 
```

我还想在创建同一个对象时将其保存到另一个具有不同名称的集合中，例如 registrations_new 或类似的东西。我想将此条目复制到新集合中。我尝试在连接字符串中添加另一个集合，这完全破坏了 mongo 部分，我尝试创建一个名为 New_Registration 的新模型，加载该架构并尝试单独保存它，但我有另一个问题。似乎 Mongoose 将模式与集合配对，并且确实没有办法覆盖它正在保存的集合。

有人对此有任何解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T15:12:19.397

您可以在多个模型中使用相同的模式，所以这样的工作：

```
var RegistrationSchema = new Schema({
    name:{ type: String, default: '', trim: false}
});

var Registration = mongoose.model('Registration', RegistrationSchema);
var New_Registration = mongoose.model('New_Registration', RegistrationSchema);

var registration = new Registration(data);
registration.save();

var new_registration = new New_Registration(data);
new_registration.save(); 
```

# xaml - Listview 滚动条 - 垂直显示但不工作，水平不显示但工作

> ID：15115226
> 
> 赞同：0
> 
> 时间：2013-02-27T14:57:20.727
> 
> 标签：xaml, windows-runtime

我在 Grid win 中定义了以下 ListView`<RowDefinition Height="8">`以占用所有可见区域。Listview 在页面创建时被绑定、创建和填充。本质上，该列表将大于可视区域并高于可视区域，因此我希望能够上下滚动和从左到右滚动。

基本上，会出现垂直滚动条，但它不起作用。它显示了很多要滚动的区域，但它不能用鼠标移动。水平滚动似乎出现在列表底部，因为鼠标滚轮确实水平滚动，但看不到滚动条。

```
<ListView
x:Name="itemListViewHorizontal"
AutomationProperties.AutomationId="ItemListView"
AutomationProperties.Name="Grouped Items"
Grid.Row="1"
Visibility="Visible"
Margin="0,-10,0,0"
Padding="10,0,0,60"
ItemsSource="{Binding Source={StaticResource SearchItemsViewSource}}"
ItemTemplate="{StaticResource Standard80PersonTemplate}"
SelectionMode="None"
IsSwipeEnabled="false"
IsItemClickEnabled="True"
ItemClick="ItemView_ItemClick">

<ListView.ItemsPanel>
    <ItemsPanelTemplate>
        <VirtualizingStackPanel Orientation="Horizontal"/>
    </ItemsPanelTemplate>
</ListView.ItemsPanel>
<ListView.GroupStyle>
<GroupStyle>
    <GroupStyle.HeaderTemplate>
        <DataTemplate>
            <Grid Margin="7,7,0,0">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Title}" Margin="3,-7,10,10" Style="{StaticResource GroupHeaderTextStyle}" />
                    <TextBlock Text="{StaticResource ChevronGlyph}" FontFamily="Segoe UI Symbol" Margin="0,-7,0,10" Style="{StaticResource GroupHeaderTextStyle}"/>
                </StackPanel>
            </Grid>
        </DataTemplate>
    </GroupStyle.HeaderTemplate>
    <GroupStyle.Panel>
        <ItemsPanelTemplate>
            <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,80,0"/>
        </ItemsPanelTemplate>
    </GroupStyle.Panel>
</GroupStyle>
</ListView.GroupStyle>
</ListView> 
```

本质上，我想要的是让左侧和底部的滚动条可以左右滚动或从上到下滚动。但无论我尝试什么，除了摆脱构成一个长列表的 ItemsPanelTemplate 和 ItemsPanel 信息之外，它都不起作用。

有什么建议么？

在改变这一点时，我的垂直滚动条有效，但水平滚动条是吐司。

```
<ListView.ItemsPanel>
    <ItemsPanelTemplate>
        <StackPanel Orientation="Horizontal" ScrollViewer.HorizontalScrollBarVisibility="Visible" ScrollViewer.VerticalScrollBarVisibility="Visible"/>
    </ItemsPanelTemplate>
</ListView.ItemsPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:16:23.163

好吧，我一直在寻找一种更优雅的方式来做到这一点。显然，stackpanel 不能同时用于两个滚动条，尽管它没有明确说明这一点。所以，我用一个滚动查看器包围了我的列表视图，使用了一个名称，然后在快照视图上禁用。

问题解决了，但我一直在寻找一种没有太多嵌套的方法，但是，它就是这样。

# c# - 管理静态属性的最佳方法

> ID：15115228
> 
> 赞同：1
> 
> 时间：2013-02-27T14:57:21.850
> 
> 标签：c#, static, thread-safety

我有这个代码：

```
public static class ProcessClass()
{
     public static string MyProp {get;set;}

     public static void ProcessMethod(InputObject input)
     {
         if(String.IsNullOrEmpty(MyProp)
              MyProp = input.Name();

         //do stuff

         MyProp = null;

     }   

 } 
```

现在，除此之外的一切都`MyProp`已经到位。`input.Name`我需要一种方法来跟踪整个代码中的原始代码，因为它可以更改，而且由于业务规则`ProcessMethod`可能会在内部以不同的`input.Name`值再次调用，我需要说明第二次调用来自`input.Name`.

显然，这很糟糕，因为如果两个人同时执行此操作，他们将共享相同的`MyProp`值，并且最后简单地设置为 null 似乎很危险和 hacky。我真的没有选择将此方法更改为非静态的，因为这将涉及更改很多代码库，这不是一个真正的选择。

有什么方法可以使用静态属性，但仍然能够保持我的原始`input.Name`值而不会冒线程安全问题的风险？我在想的一个选择是让每个方法都接受一个`input.Name()`并且跟踪是这样的（并删除`MyProp`），但我可以想象它很快就会失控，而且非常混乱。

我不需要把它作为一个属性，但如果是的话，它显然需要在这个类中是静态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:01:07.407

由于它可能是一个多用户环境，因此将字符串替换为`ConcurrentDictionary`您存储`input.Name()`为 a 的位置`Value`以及`Key`用户的唯一标识符（id、名称等）。

# sql-server - 使用 T-SQL 查询 XML 字段

> ID：15115232
> 
> 赞同：3
> 
> 时间：2013-02-27T14:57:29.940
> 
> 标签：sql-server, xml, tsql

如何使用 T-SQL 查询 XML 数据中的多个节点并将结果输出到单个逗号分隔的字符串？

例如，我想在以下 XML 中获取所有目的地名称的列表，看起来像“德国、法国、英国、意大利、西班牙、葡萄牙”

```
 <Holidays>
      <Summer>
        <Regions>
        <Destinations>
          <Destination Name="Germany"  />
          <Destination Name="France"  />
          <Destination Name="UK"  />
          <Destination Name="Italy"  />
          <Destination Name="Spain"  />
          <Destination Name="Portugal"  />
        </Destinations>
        <Regions>
      </Summer>
    </Holidays> 
```

我正在尝试类似的东西：

```
Countries = [xmlstring].value('/Holidays/Summer/Regions/Destinations/@Name', 'varchar') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:43:30.257

首先，要从源 XML 表中获取记录列表，您需要使用`.nodes`函数 ( [**DEMO**](http://www.sqlfiddle.com/#!3/2e452/6) )：

```
select Destination.value('data(@Name)', 'varchar(50)') as name
from [xmlstring].nodes('/Holidays/Summer/Regions/Destinations/Destination')
    D(Destination) 
```

样本输出：

```
|      NAME |
-------------
|   Germany |
|    France |
|        UK |
|     Italy |
|     Spain |
|  Portugal | 
```

从这里，您希望将目标值连接到一个逗号分隔的列表中。不幸的是，T-SQL 不直接支持这一点，因此您必须使用某种解决方法。如果您正在处理使用多行的源表，那么最简单的方法就是[`FOR XML PATH('')`](https://stackoverflow.com/questions/12997884/sql-server-group-by-string-concatenation)诀窍。在这个查询中，我使用了一个名为 的源表`Data`，并将 XML 拆分为单独的记录，然后我`CROSS APPLY`使用这些记录`FOR XML PATH('')`生成逗号分隔的行。最后，`,`从结果中删除 final 以创建列表（[**DEMO**](http://www.sqlfiddle.com/#!3/2e452/7)）：

```
;with Destinations as (
    select id, name
    from Data
    cross apply (
        select Destination.value('data(@Name)', 'varchar(50)') as name
        from [xmlstring].nodes('/Holidays/Summer/Regions/Destinations/Destination') D(Destination)
    ) Destinations(Name)
)
select id, substring(NameList, 1, len(namelist) - 1)
from Destinations as parent
cross apply (
    select name + ','
    from Destinations as child
    where parent.id = child.id
    for xml path ('')
) DestList(NameList)
group by id, NameList 
```

示例输出（请注意，我在测试数据中添加了另一个 XML 片段以制作更复杂的示例）：

```
| ID |                               COLUMN_1 |
-----------------------------------------------
|  1 | Germany,France,UK,Italy,Spain,Portugal |
|  2 |                   USA,Australia,Brazil | 
```

# javascript - 更改事件输入字符

> ID：15115234
> 
> 赞同：2
> 
> 时间：2013-02-27T14:57:32.507
> 
> 标签：javascript, keypress, keyevent

是否可以通过更改某些`event`对象属性来简单地更改文本字段中写入的字符？例如，我想从命令中隐藏密码字符：
用户类型：

> 登录用户名密码

我想出现：

> 登录用户名`********`

并将密码保存到变量中。所以，我想将任何键重新映射`*`到`textbox.value`包含`/^login [a-zA-Z0-9]+ /`.

**编辑**- 尊敬的评论谈到误解我的问题：
因为以上所有都发生在一个小命令行客户端中，并且可能有多个命令，我可能想通过`*`混淆来保护，所以没有使用的想法`<input type="password" />`是可以接受的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:40:13.507

这个片段可以解决问题。它并不完美，但可以进一步发展。

```
window.onload = function () {
    var cmdfield = document.getElementById('cmdfield'),
        commandString = '',
        cmds = '(login|logout)',
        rex = new RegExp('^' + cmds + ' [a-zA-Z0-9]+ (\\w*)'),
        keyPress = function (e) {       
            if ((e.which > 64 && e.which < 123) || (e.which > 47 && e.which < 58) || e.which === 32) {
                commandString += String.fromCharCode(e.which);
                this.value = commandString.replace(rex, function (m, a, b) {
                    var command = m.split(' ')[0],
                        param = m.split(' ')[1],
                        len = b.length;
                    if (len > 0) {
                        return command + ' ' + param + ' ' + new Array(len + 1).join('*');
                    }
                    if (len === 0) {
                        return command + ' ' + param + ' ';
                    }
                });
            }
            e.preventDefault();
            return;
        },
        keyDown = function (e) {
            if (e.which === 8) {
                commandString = commandString.substring(0, commandString.length - 1);
                e.stopPropagation();
                return;
            }
            if (!((e.which > 64 && e.which < 122) || (e.which > 47 && e.which < 58) || e.which === 32)) {
                e.preventDefault();
            }
            return;
        };
    cmdfield.addEventListener('keydown', keyDown, false);
    cmdfield.addEventListener('keypress', keyPress, false);
} 
```

`cmds`是所有单词的管道分隔列表，它后面应该有一个可见参数，并且在该参数之后，文本字段上将有星号，直到下一个空格。如果该命令不在列表中，则不会混淆第三个参数。

如果您想在同一行中检测多个此类组合的出现，只需使用下面的正则表达式：

```
rex = new RegExp('\\b' + cmd + ' [a-zA-Z0-9]+ (\\w*)', 'g'), 
```

“命令文本”的实际值存储在`commandString`.

请注意，此实现不受鼠标或剪贴板文本编辑的保护。此外，在 Firefox 上运行时，`BACKSPACE`在用户再次开始写入之前不会清空该字段。

[jsFiddle](http://jsfiddle.net/3YkXm/1/)的现场演示。

* * *

**编辑**

实际上你的问题是关于覆盖`Event`对象属性。一般来说，这些属性是只读的，不能修改。但是，该规则似乎有一个例外：至少 IE9 允许修改 inside`window.event.keyCode`处理`onkeypress`程序。当调用 inline 时，下面的代码片段在 IE9 中确实有效`onkeypress=capitalize()`，但不适用于附加的处理程序`addEventListener()`。

```
function capitalize() {
    key = window.event.keyCode;
    if (key > 96 && key < 123) {
        window.event.keyCode = window.event.keyCode - 32;
    }
    return window.event.keyCode;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:02:16.097

您可以使用`input type=password`，但出于任何其他原因，以下脚本将为您完成这项工作。

```
var field = document.getElementById("password")
var val= "";
field.onkeydown = function(evt){
    val+= String.fromCharCode(evt.keyCode)      
    this.value = val.replace(/./g,"*");      
   document.getElementById("hiddenfieldPassword").value = val; // Hidden Field to store the password.
  return false;   
} 
```

# ruby-on-rails-3.2 - 如何将电子邮件地址传递给联系表格

> ID：15115238
> 
> 赞同：0
> 
> 时间：2013-02-27T14:57:42.430
> 
> 标签：ruby-on-rails-3.2

如何将某个值（电子邮件地址）从客户信息页面（我在其中查看所有客户信息）传递到“整体”联系表格，该表格可在“myhost.com/contact”下访问。

我想要这样的东西：

```
<%= link_to 'Send email to customer', contact_path %> 
```

与要传递的特定电子邮件地址。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:13:40.730

您可以将电子邮件地址作为参数传递，如以下伪代码所示：

```
<%= link_to "Send Email to Customer", contact_path(:email_address => customer.email) %> 
```

其中 customer 是您要通过电子邮件发送的客户对象。

您还可以发送客户 ID 并使用该 ID 在联系页面中获取客户的电子邮件。

```
<%= link_to "Send Email to Customer", contact_path(:customer => customer.id) %> 
```

# c# - 如何防止多次启动我的应用程序？

> ID：15115241
> 
> 赞同：36
> 
> 时间：2013-02-27T14:57:52.030
> 
> 标签：c#, deployment, clickonce

我使用 ClickOnce 安装部署了我的 C# WinForms 应用程序。一切正常（经过大量工作）:)，但现在我面临一个问题：

每当我单击“开始”菜单中的应用程序快捷方式时，都会启动一个新实例。我需要避免这种情况。

我能做些什么来防止多次启动？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-27T15:05:41.977

在程序启动时检查相同的进程是否已经在运行：

```
using System.Diagnostics;

static void Main(string[] args)
{
   String thisprocessname = Process.GetCurrentProcess().ProcessName;

   if (Process.GetProcesses().Count(p => p.ProcessName == thisprocessname) > 1)
      return;           
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-02-27T15:01:08.390

使用此代码：

```
[STAThread]
static void Main() 
{
   using(Mutex mutex = new Mutex(false, "Global\\" + appGuid))
   {
      if(!mutex.WaitOne(0, false))
      {
         MessageBox.Show("Instance already running");
         return;
      }

      Application.Run(new Form1());
   }
} 
```

来自[被误解的互斥锁](http://odetocode.com/blogs/scott/archive/2004/08/20/the-misunderstood-mutex.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-02T12:19:40.230

在 WPF 中，您可以在`App.xaml.cs`文件中使用此代码：

```
private static System.Threading.Mutex _mutex = null;

protected override void OnStartup(StartupEventArgs e)
{
    string mutexId = ((System.Runtime.InteropServices.GuidAttribute)System.Reflection.Assembly.GetExecutingAssembly().GetCustomAttributes(typeof(System.Runtime.InteropServices.GuidAttribute), false).GetValue(0)).Value.ToString();
    _mutex = new System.Threading.Mutex(true, mutexId, out bool createdNew);
    if (!createdNew) Current.Shutdown();
    else Exit += CloseMutexHandler;
    base.OnStartup(e);
}
protected virtual void CloseMutexHandler(object sender, EventArgs e)
{
    _mutex?.Close();
} 
```

* * *

*   [https://www.c-sharpcorner.com/UploadFile/f9f215/how-to-restrict-the-application-to-just-one-instance/](https://www.c-sharpcorner.com/UploadFile/f9f215/how-to-restrict-the-application-to-just-one-instance/)
*   [https://social.msdn.microsoft.com/Forums/vstudio/en-US/eced1b92-43c5-405d-84b1-780e774c9d3e/how-can-i-prevent-launching-my-app-multiple-times?forum= wpf](https://social.msdn.microsoft.com/Forums/vstudio/en-US/eced1b92-43c5-405d-84b1-780e774c9d3e/how-can-i-prevent-launching-my-app-multiple-times?forum=wpf)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T15:04:09.043

关于这个问题确实有很好的话题。你可以在这里找到它：[使用 Mutext](http://odetocode.com/blogs/scott/archive/2004/08/20/the-misunderstood-mutex.aspx)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T15:01:49.513

启动应用程序时，main 总是调用`Application.Run()`. 查看您的 STAThread-Main 方法并在`Application.Run`测试之前查看您的 .exe 是否正在运行。

```
Process p = Process.GetProcesses();
//check for your .exe 
```

在这里看到[这篇](https://stackoverflow.com/questions/51148/how-do-i-find-out-if-a-process-is-already-running-using-c)文章。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-23T07:07:34.497

有时`**Mutex**`在某些领域不工作。就像在控制台应用程序中使用一样。所以我尝试使用*WMI Query*。

试试这个，它会工作的。

```
 /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            if (!isStillRunning())
            {
               Application.Run(new Form1());
             }
             else {
                 MessageBox.Show("Previous process still running.",
                    "Application Halted", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);
                 Application.Exit();
             }      
        }

        //***Uses WMI Query
        static bool isStillRunning() {
            string processName = Process.GetCurrentProcess().MainModule.ModuleName;
            ManagementObjectSearcher mos = new ManagementObjectSearcher();
            mos.Query.QueryString = @"SELECT * FROM Win32_Process WHERE Name = '" + processName + @"'";
            if (mos.Get().Count > 1)
            {
               return true;
            }
            else
               return false;
        } 
```

希望能帮助到你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-11T11:36:40.077

我一直使用的是

```
bool checkSingleInstance()
    {
        string procName = Process.GetCurrentProcess().ProcessName;
        // get the list of all processes by that name

        Process[] processes = Process.GetProcessesByName(procName);

        if (processes.Length > 1)
        {

            return true;
        }
        else
        {
            return false;
        }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-17T06:14:17.990

Windows 窗体应用程序中的解决方案禁止再次运行应用程序（重新打开应用程序）。

1-首先添加类 RunAlready.cs

2-使用 Program.cs 中 RunAlready.cs 的名称 Process 调用方法 processIsRunning()

# 程序.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Tirage.MainStand
{
static class Program
{

    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        PublicClass.Class.RunAlready RunAPP = new PublicClass.Class.RunAlready();
        string outApp = RunAPP.processIsRunning("Tirage.MainStand");

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        MainStand_FrmLogin fLogin = new MainStand_FrmLogin();
        if (outApp.Length == 0)
        {

            if (fLogin.ShowDialog() == DialogResult.OK)
            {
                Application.Run(new MainStand_masterFrm());

            }
        }
        else MessageBox.Show( "Instance already running");

      }
    }
 } 
```

# 类RunAlready：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace PublicClass.Class
{
  public  class RunAlready
    {
      public  string processIsRunning(string process)
        {
        string xdescription = "";
        System.Diagnostics.Process[] processes =
            System.Diagnostics.Process.GetProcessesByName(process);
        foreach (System.Diagnostics.Process proc in processes)
        {
            var iddd = System.Diagnostics.Process.GetCurrentProcess().Id;
            if (proc.Id != System.Diagnostics.Process.GetCurrentProcess().Id)
            {
                xdescription = "Application Run At time:" + proc.StartTime.ToString() + System.Environment.NewLine;
                xdescription += "Current physical memory : " + proc.WorkingSet64.ToString() + System.Environment.NewLine;
                xdescription += "Total processor time : " + proc.TotalProcessorTime.ToString() + System.Environment.NewLine;
                xdescription += "Virtual memory size : " +         proc.VirtualMemorySize64.ToString() + System.Environment.NewLine;
            }
        }

        return xdescription;
    }
}
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-11T09:49:16.693

```
 if (Process.GetProcesses().Count(p => p.ProcessName == "exe name") > 1)
    {
        foreach (var process in 
 Process.GetProcessesByName("exe name"))
        {
            process.Kill();
        }
    } 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2014-01-15T00:38:40.733

使用`Mutex`是要走的路，因为猜测进程名称充满了缺陷和琐事。看看这个非常好的[插图](http://odetocode.com/blogs/scott/archive/2004/08/20/the-misunderstood-mutex.aspx)

# ruby-on-rails - 未初始化的常量 PurchasesController::UserMailer

> ID：15115247
> 
> 赞同：0
> 
> 时间：2013-02-27T14:57:58.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer

我已经为订单确认生成了一个邮件。我在 /purchases 处收到 NameError。错误内容如下：

```
uninitialized constant PurchasesController::UserMailer
  /controllers/purchases_controller.rb

 class PurchasesController < InheritedResources::Base
   before_filter :authenticate_admin_user!, :only => [:index, :edit, :update, :destroy]

   def create
     @purchase = Purchase.new(params[:purchase])
     if @purchase.save
       UserMailer.purchase_confirmation(@purchase).deliver
       redirect_to "/thankyou"
     else     
       render :action => "new"
     end 
```

我一直在挖掘并发现了类似的问题，但还没有解决我的问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T15:06:48.303

这可能是由两个问题引起的，以下只是一个想法......

`1)``rails server`添加后需要重启`Mailer`

（或者）

尝试在您的`production`服务器中运行并检查它。

`2)`检查的拼写`UserMailer`应该是`user_mailer.rb`

（或者）

确保您正在使用`UserMailer`. `UserMailer.rb`将打破，而`user_mailer.rb`这是预期的。

让我们知道一旦它没有解决上述两个选项

# angularjs - 插件 AngularJS 依赖于未知插件 JavaScript

> ID：15115248
> 
> 赞同：10
> 
> 时间：2013-02-27T14:57:59.783
> 
> 标签：angularjs, intellij-idea

我正在尝试安装[AngularJS 插件](http://plugins.jetbrains.com/plugin?pr=webide&pluginId=6971)，我转到设置中的插件页面并单击从磁盘安装，我`angular-js-plugin.jar`从我的文件系统中选择并收到此错误：

```
Plugin AngularJS depends on unknown plugin JavaScript 
```

JavaScript 的 JetBrains 存储库（如果[在这里](http://plugins.jetbrains.com/category/index?pr=&category_id=50)，但没有名为“JavaScript”的插件）。

*我从哪里获得正确的插头？*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-27T15:02:01.993

JavaScript 插件仅包含在[Ultimate 版本](http://www.jetbrains.com/idea/features/index.html)中。如果您使用的是社区版，它将无法正常工作。

# javascript - 如何通过 JSON 将 JavaScript 函数传递给另一个进程？

> ID：15115251
> 
> 赞同：0
> 
> 时间：2013-02-27T14:58:11.517
> 
> 标签：javascript, json, google-chrome-extension, function-pointers

我正在做一个 chrome 扩展——我如何将一个函数从后台传递给一个内容脚本实例，显然该函数需要被序列化？

执行 eval(function_string) 可以吗？

这是我第一次练习这种巫术，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:30:27.960

这是我用来实现此目的的代码：

包含要发送的函数的自定义脚本语言脚本：

```
// An example script
// Showing how dependent functions are defined later on
// With functions that have no dependencies grouped together in an associative array
// preceding, in the execution_context_loader's list, the functions that depend on them.

var collection_script.execution_context_loader = [
 {
      fa:function(a) { return a+1; },
      fb:function(b) { return b*2; },
      fc:function(c) { return c-3; }
 },
 {
      fabc:function(a,b,c) {
          return  window.qwontical.execution_context.fa(a)^
                   window.qwontical.execution_context.fb(b)^
                    window.qwontical.execution_context.fc(c);

      }
 }

];

var script_point = {
    name : 'alpha',
    source : '/root/space',
    data_args : [ '/j1', '/j2', '/j3' ],
    function_applied : 'fabc'
}; 
```

当在另一边执行时（例如通过调用某个函数`execute("alpha");`），会将函数 fabc（序列化和恢复）应用于在`/root/space/j1`、 和`.../j2`处找到的资源`.../j3`。

在功能发送端：

```
// Function to package a script's execution context for dispatch to a collection script

function package_script_for_dispatch( collection_script ) {
            console.log(collection_script);
            if ( !!collection_script.execution_context_loader ) {
                    for ( var i = 0; i < collection_script.execution_context_loader.length; i += 1) {
                            for ( var func_def in collection_script.execution_context_loader[i] ) {
                                    collection_script.execution_context_loader[i][func_def] = collection_script.execution_context_loader[i][func_def].toString();
                                    console.log("Packed : " + collection_script.execution_context_loader[i][func_def]);
                            }
                    }
            } else {
                    collection_script.execution_context_loader = {};
            }
    } 
```

在函数接收端：

```
 for( var i = 0; i < collectionscript.execution_context_loader.length; i+= 1) {
            for (var func_name in collectionscript.execution_context_loader[i] ) {
                    var func_def_string = collectionscript.execution_context_loader[i][func_name];
                    console.log("About to revivify " + func_name + " : " + func_def_string);
                    eval("window.qwontical.execution_context['"+func_name+"'] = "+func_def_string);
            }
    } 
```

这样一个函数的调用约定是

`window.qwontical.execution_context[func_name](args...);`

这使得函数可以在脚本中通过它们的名称定义，然后在脚本被序列化和“复活”之后使用

# label - Gnuplot，描述到轴的距离

> ID：15115255
> 
> 赞同：8
> 
> 时间：2013-02-27T14:58:17.033
> 
> 标签：label, gnuplot, axis

如何在 gnuplot 中获得从图形边界到描述的固定距离？当我使用

```
 set ylabel "{/Symbol s}[MPa]" font "Times Italic, 10" 
```

描述离轴有点太远了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T15:38:38.747

是的，and命令有`offset`标志：`xlabel``ylabel`

```
set ylabel "foo" offset x,y 
```

类型

```
help set xlabel 
```

对于所有轴标签选项。

# c - pthread 库未定义引用

> ID：15115260
> 
> 赞同：6
> 
> 时间：2013-02-27T14:58:33.717
> 
> 标签：c

我在 Fedora 17（使用 GCC）上使用 eclipse，并且我在 pthread_create（）上有一个未定义的引用，即使包含 pthread.h 并且如果我在 gcc 构建命令行上有 -lpthread ......

这是我的代码，以防万一

```
void* repair()
{
    int var;
    for ( var = 0; var < NB_ITER ; var += 2 )
    {
        printf( "PAIR : %d\n", var );
    }

return NULL;
} // pair

void exo03()
{
    pthread_t id1;
    pthread_create(&id1, NULL, &repair, NULL);
} 
```

谢谢你的帮忙 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T15:03:31.043

在 linux、FreeBSD（和其他一些 *nix 风格）上，您应该使用编译器选项`-pthread`，而不是尝试与 pthread 库链接。

对于[日食](http://blog.asteriosk.gr/2009/02/15/adding-pthread-to-eclipse-for-using-posix-threads/)：

> Eclipse 未配置为将 -pthread 参数放入 gcc 编译中。要解决此问题，请转到菜单：
> 
> 项目 -> 属性
> 
> c/c++ 构建 -> GCC C 编译器 -> 杂项
> 
> 将“-pthread”参数添加到“其他标志”的开头</p>
> 
> 也去：
> 
> c/c++ 构建 -> 设置 -> GCC C 链接器 -> 库
> 
> 并将“pthread”库包含到其他库中。单击应用并重建项目。Pthreads 现在必须工作。

来自[man gcc](http://linux.die.net/man/1/gcc)：

> -pthread ：使用 pthreads 库添加对多线程的支持。此选项为预处理器和链接器设置标志。

我在[这里找到了解释](http://us.generation-nt.com/answer/difference-between-lpthread-pthread-compilation-opts-help-200784191.html#200784201)：

> 在 GCC 中，**-pthread**（又名 -pthreads）选项管理编译器预处理器 / 和 / 链接器以启用使用 Posix 线程的编译。预处理器将定义/启用/使用某些宏的 Posix 线程版本（或执行条件编译以启用 Posix 线程逻辑），链接器将专门链接结果对象与 libpthread
> 
> 但是，**-lpthread**只是告诉链接器尝试解析针对 libpthread 库的任何外部引用，就像 -lm 告诉链接器尝试解析针对 libm 库的任何外部引用一样。对于 -lpthread，即使您编写了 Posix 线程代码，您的代码也可能不包含对 libpthread 的外部引用，因为尚未打开关键宏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T15:04:20.760

你有链接到 libpthread 吗？

```
$> gcc ... -lpthread 
```

# c# - 如何在 Asp.Net MVC 中使用 jTable 创建对话框上传文件？

> ID：15115261
> 
> 赞同：1
> 
> 时间：2013-02-27T14:58:34.370
> 
> 标签：c#, asp.net-mvc, jquery-jtable

我正在使用 jTable 进行 CRUD 操作。但现在我想使用 jTable 创建对话框表单上传文件

```
How do i upload file using jTable create dialog?

<div id="PersonTable" style="width: 580px; margin: auto;"></div>

<script type="text/javascript">

    $(document).ready(function () {

        //Prepare jtable plugin
        $('#PersonTable').jtable({
            title: 'The Campus List',
            actions: {
                listAction: '/Home/CampusList',
                deleteAction: '/Home/DeletePerson',
                updateAction: '/Home/UpdatePerson',
                createAction: '/Home/CreatePerson'
            },
            paging: true,
            fields: {
                CampusId: {
                    key: true,
                    create: false,
                    edit: false,
                    list: true
                },
                CampusName: {
                    title: 'CampusName',
                    width: '15%'
                },
                CampusCode: {
                    title: 'CampusCode',
                    list: true
                },Image: { } // for uploading file
            }
        });

        //Load person list from server
        $('#PersonTable').jtable('load');
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T10:43:00.573

默认情况下 Jquery-JTable 没有文件上传字段，但您可以使用这种方式：

在 jtable 的字段范围内使用“ **input ”属性并返回“Div”或文件上传控件**

像这样：

```
 fields: {
           ,
            Attach: {
               input : function (data){
                return "<input type='file' ...  >"; // OR----->
                return "<asp:FileUpload ....    >" ;// or----->   
               }
          }, 
```

但是文件上传需要完整的回传和清理文件上传回传后页面上的所有文本区域，因此您需要 Jquery 和 Iframe 用于 Ajax 上传文件**或**jquery 插件来上传它们。你可以使用这个地址来完成它：

[如何在 jQuery UI 对话框中显示 IFRAME](https://stackoverflow.com/questions/5660263/how-to-display-an-iframe-inside-a-modal-dialog-using-jquery-ui-dialog)

[如何使用 iframe 进行异步（AJAX）文件上传？](https://stackoverflow.com/questions/2909442/how-to-make-asynchronousajax-file-upload-using-iframe)

[jQuery / iframe 文件上传解决方案的问题](https://stackoverflow.com/questions/5912347/issue-with-jquery-iframe-file-uploading-solution)

# apache-flex - Flex/BlazeDS 生产者消费者 - 停止生产客户端从消费者接收

> ID：15115263
> 
> 赞同：1
> 
> 时间：2013-02-27T14:58:38.207
> 
> 标签：apache-flex, air, blazeds, producer-consumer

我目前正在使用与 ColdFusion 集成的 Flex 4.9（移动应用程序）和 BlazeDS。我创建了一个简单的生产者/消费者应用程序，将对象发送到服务器，存储对象，然后将对象发送到所有连接的客户端。这工作得很好。

但是，我唯一的问题是发送对象的客户也立即收到了它。我宁愿这不会发生。无论如何在客户端，以区分您是否是发起者。

我知道来自消费者的事件有一个 originatorID，但我不知道返回时要匹配什么 ID。

消息处理程序：

```
protected function consumer_messageHandler(event:MessageEvent):void
        {//Need to check if client is the same HERE

            var t:Object = event.message.body.ticket;
            var i:ArrayCollection = event.message.body.TI;

            if (t != null && t.length > 0)
            {
                var v:views.delivery.HomeView = this.mainNav.activeView as views.delivery.HomeView;
                var dao:DTDAO = new DTDAO();

                var t:Object = t.getItemAt(0);

                dao.syncDeliveryT(ticket, items);
            }
        } 
```

# sql - 具有 2 个约束的 SQLite UPSERT

> ID：15115264
> 
> 赞同：1
> 
> 时间：2013-02-27T14:58:41.857
> 
> 标签：sql, sqlite

我有一个包含 3 列的 sql 表，其中没有一个是 UNIQUE （但名称+角色对是）：

```
 Name | Role | Votes 
```

我需要做的是，编写一个遵守以下规则的 sqllite 查询：

1.  如果已存在具有给定名称和角色的行，则投票数增加 1
2.  如果不是，则使用 Votes = 1 创建一个新行

我已经研究过 INSERT OR REPLACE 和[这篇](https://stackoverflow.com/questions/418898/sqlite-upsert-not-insert-or-replace)很棒的帖子，但它似乎对我没有太大帮助，我什至不确定 INSERT OR REPLACE 是一个可行的选择，因为类似

```
INSERT OR REPLACE INTO words (name,role,votes) 
VALUES ('foo','bar', coalesce((
    select votes from words where name = 'foo' and role='bar'),0)+1) 
```

总是插入并且从不替换

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:20:27.690

您只需在 2 列上创建唯一索引即可：

```
CREATE UNIQUE INDEX words_name_role_idx ON words (name,role) 
```

请注意，您不会为任何单个列创建唯一索引，而是为整个 2 的组合创建唯一索引。

之后，您的`REPLACE INTO`语句应该开始正常工作：

```
REPLACE INTO words (name,role,votes) VALUES ('foo','bar',
    coalesce((
        SELECT votes FROM words
        WHERE name = 'foo' AND role='bar'),0
    )+1
) 
```

（请注意，我已更改`counter`为`votes`上面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:45:11.197

此查询将使用 +1 更新您的记录。

```
update todo set text='raj',complete='raj',pk=((SELECT pk FROM todo where text='raj' and complete='raj')+1) where (SELECT pk FROM todo where text='raj' and complete='raj') 
```

**编辑你的查询**

```
update words set name='foo',role='bar', votes =((SELECT votes FROM words where name='foo' and role='bar')+1) where (SELECT votes FROM words where name='foo' and role='bar') 
```

如果此条件不成立，则进行插入查询。

# javascript - 父子div的可见性问题

> ID：15115265
> 
> 赞同：2
> 
> 时间：2013-02-27T14:58:42.287
> 
> 标签：javascript, html, css

我对实现以下事情感到有点困惑 1\. 禁用一个父 div 的可见性 2\. 但是另一个代码允许子 div 可见性

```
<div style="background-color:#999 ; height:80px;visibility:hidden">
    <div style="background-color:#550; height:30px;"></div>
    <div style="background-color:#900; height:30px;visibility:visible"></div>
</div> 
```

[http://jsfiddle.net/cbXxU/](http://jsfiddle.net/cbXxU/)

如果父 div 不可见或对此有任何建议，我想隐藏所有子 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:59:53.873

为父元素设置`display: none`。要使其可见，请使用`display: block`.

**演示：http:** [//jsfiddle.net/cbXxU/1/](http://jsfiddle.net/cbXxU/1/)

# python - 在等待按钮输入时检查键盘输入

> ID：15115270
> 
> 赞同：0
> 
> 时间：2013-02-27T14:58:54.073
> 
> 标签：python, string

我的脚本有问题。我想实现一种用字符串关闭脚本的方法。问题是，我不想等待键盘输入。相反，我想检查在脚本等待按下按钮时是否通过键盘输入了某些内容。我在玩 Raspberry Pi。我已经将一个 LED 连接到我的 GPIO 和一个用于点亮 LED 的开关。

这是工作代码：

```
import RPi.GPIO as GPIO
GPIO.setmode(GPIO.BOARD)
GPIO.setup(8, GPIO.IN)
GPIO.setup(10, GPIO.OUT)

while Truue:
    value = GPIO.input(8)

    if value == False:
        GPIO.output(10, GPIO.HIGH)
        print("Button pressed")

        while value == False:
            value = GPIO.input(8)
    else:
        GPIO.output(10, GPIO.LOW) 
```

按下按钮时 LED 亮起，松开按钮时 LED 熄灭。它处于等待按钮响应的无限循环中。我想要做的是当脚本等待按钮输入时，我从键盘输入“退出”，脚本停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T10:00:20.447

看起来你正在使用 Python 3，所以：

```
exit = False
while not exit:
    value = GPIO.input(8)
    entered = input('type exit to stop: ')
    if not value:
        print("Button Pressed")
        GPIO.output(10, GPIO.HIGH)
    if entered == 'exit':
        break 
```

对于条件句 - 它对我们来说`not exit`比`exit == False`

如果您使用的是 Python 2.x，您将使用内置函数`raw_input`而不是`input`.

# jquery - 如何在这个复杂的 JSON 对象中获取 ISBN_10 标识符

> ID：15115271
> 
> 赞同：1
> 
> 时间：2013-02-27T14:58:55.007
> 
> 标签：jquery, json

我正在使用 google book API 来显示一些书籍。

API 返回一个包含许多信息的 json 对象，包括每本书的信息。

```
"industryIdentifiers": [
   {
    "type": "ISBN_10",
    "identifier": "3640132114"
   },
   {
    "type": "ISBN_13",
    "identifier": "9783640132119"
   }
  ], 
```

如何获取 ISBN_10 标识符？

我使用以下代码来显示信息：

```
$.each(data.items, function(i,user){
var tblRow =
"<tr>"
+"<td><img src="+user.volumeInfo.imageLinks.smallThumbnail+"></td>"
..
+"</tr>"
$(tblRow).appendTo("#ergebnisse tbody");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:02:03.617

如果我假设`user.volumeInfo`（在您的`each`循环中）是有关特定书籍的信息，那么您可以通过执行以下操作找到 ISBN_10 值：

```
var isbn10;
$.each(user.volumeInfo.industryIdentifiers, function(index, entry) {
    if (entry.type === "ISBN_10") {
        isbn10 = entry.identifier;
        return false;
    }
}); 
```

基本上，`industryIdentifiers`是一个对象数组。我们可以使用 循环遍历数组[`$.each`](http://api.jquery.com/jQuery.each/)，它将传递给我们数组索引和（更重要的是）条目。我们查看每个条目，`type`直到找到`ISBN_10`. 当我们找到它时，我们获取它的值并打破`$.each`（通过返回`false`）。请注意，如果没有，`isbn10`将保留`undefined`。

因此，即使我的猜测`user.volumeInfo`是错误的，无论您`industryIdentifiers`来自哪里，以上内容都会帮助您找到 ISBN_10。

# html - 让覆盖立即出现在选定的表格行下方（没有 JS）

> ID：15115278
> 
> 赞同：0
> 
> 时间：2013-02-27T14:59:06.087
> 
> 标签：html, css, overlay, z-index, css-tables

在我开始之前——我知道我们可以通过 JS 定位来做到这一点。我想看看我们是否可以避免 JS 定位。

你可以在这里看到一个接近的近似值——我现在已经使用 top:nnn 值强制/模拟了覆盖定位（它在 jsfiddle 中有点偏离）。

我想要做的是将覆盖的顶部设置为与所选表格行的底部一致。再一次——我们现在用一个固定值的 top 来模拟它，但是应该有一个 CSS 方法来设置它？

我确实玩过 tr.isSelected:after {...} 类型的东西，但没有按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:01:26.333

尝试使用`tr.isSelected>td:first-child`，其中的属性包括`position:absolute`.

不过，我不确定重点是什么......类切换只能使用 JavaScript 完成，所以如果您已经在使用 JS，那么使用它来计算位置有什么危害？

# java - 使用 libgdx 进行触摸滚动

> ID：15115282
> 
> 赞同：3
> 
> 时间：2013-02-27T14:59:11.763
> 
> 标签：java, libgdx

我正在尝试在 libgdx 游戏中实现触摸滚动。我有一张宽幅图像，它是房间的全景图。我希望能够滚动图像，以便用户可以看到房间周围。我有它，以便我可以滚动一定距离，但是当注册一个新的 touchDragged 事件时，图像会移回原始位置。

这就是我实施它的方式

```
public class AttackGame implements ApplicationListener {

AttackInputProcessor inputProcessor;
Texture backgroundTexture; 
TextureRegion region;
OrthographicCamera cam;
SpriteBatch batch;
float width;
float height;
float posX;
float posY;

@Override
public void create() {
    posX = 0;
    posY = 0;
    width = Gdx.graphics.getWidth();
    height = Gdx.graphics.getHeight();  
    backgroundTexture = new Texture("data/pancellar.jpg");
    region = new TextureRegion(backgroundTexture, 0, 0, width, height);
    batch = new SpriteBatch();

}

@Override
public void resize(int width, int height) {
    cam = new OrthographicCamera();
    cam.setToOrtho(false, width, height);
    cam.translate(width / 2, height / 2, 0);
    inputProcessor = new AttackInputProcessor(width, height, cam);
    Gdx.input.setInputProcessor(inputProcessor);

}

@Override
public void render() {

    Gdx.gl.glClearColor(0,0,0,1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);    
    batch.setProjectionMatrix(cam.combined);
    batch.begin();
    batch.draw(backgroundTexture, 0, 0, 2400, 460);
    batch.end();

}

@Override
public void pause() {
    // TODO Auto-generated method stub

}

@Override
public void resume() {
    // TODO Auto-generated method stub

}

@Override
public void dispose() {
    backgroundTexture.dispose();

} 
```

}

在 InputProcessor 中

```
@Override
public boolean touchDragged(int screenX, int screenY, int pointer) {

    cam.position.set(screenX, posY / 2, 0);
    cam.update();
    return false;
} 
```

在这个问题[LibGdx How to Scroll using OrthographicCamera?](https://stackoverflow.com/questions/14509261/solved-libgdx-how-to-scroll-using-orthographiccamera) . 但是它并没有真正解决我的问题。

我认为问题在于 touchDragged corodinates 不是世界坐标，但我尝试不投影相机但没有任何效果。

我已经为此苦苦挣扎了几个星期，我非常感谢您对此的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T20:27:37.287

我最近做了一些你想要的。这是我用于移动地图的输入类，您只需为您的“cam”更改我的“stage.getCamera()”：

```
public class MapInputProcessor implements InputProcessor {
    Vector3 last_touch_down = new Vector3();

    ...

    public boolean touchDragged(int x, int y, int pointer) {
        moveCamera( x, y );     
        return false;
    }

    private void moveCamera( int touch_x, int touch_y ) {
        Vector3 new_position = getNewCameraPosition( touch_x, touch_y );

        if( !cameraOutOfLimit( new_position ) )
            stage.getCamera().translate( new_position.sub( stage.getCamera().position ) );

        last_touch_down.set( touch_x, touch_y, 0);
    }

    private Vector3 getNewCameraPosition( int x, int y ) {
        Vector3 new_position = last_touch_down;
        new_position.sub(x, y, 0);
        new_position.y = -new_position.y;
        new_position.add( stage.getCamera().position );

        return new_position;
    }

    private boolean cameraOutOfLimit( Vector3 position ) {
        int x_left_limit = WINDOW_WIDHT / 2;
        int x_right_limit = terrain.getWidth() - WINDOW_WIDTH / 2;
        int y_bottom_limit = WINDOW_HEIGHT / 2;
        int y_top_limit = terrain.getHeight() - WINDOW_HEIGHT / 2;

        if( position.x < x_left_limit || position.x > x_right_limit )
            return true;
        else if( position.y < y_bottom_limit || position.y > y_top_limit )
            return true;
        else
          return false;
}

    ...
} 
```

结果如下：[http ://www.youtube.com/watch?feature=player_embedded&v=g1od3YLZpww](http://www.youtube.com/watch?feature=player_embedded&v=g1od3YLZpww)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T20:24:55.510

你需要在回调中做更多的计算`touchDragged`，你不能只是将触摸到的任何屏幕坐标传递给相机。您需要弄清楚用户将手指拖了*多远*以及朝哪个方向。绝对坐标不是立即有用的。

考虑从右上角向下拖动或从左上角向下拖动。在这两种情况下，您都希望（我假设）将相机移动相同的距离，但是两种情况下屏幕坐标的绝对值会非常不同。

我认为最简单的事情就是跟踪`previousX`和`previousY`（在方法中初始化它们。然后在 期间使用 delta （例如）`touchDown`调用。并更新in 。`cam.translate()``deltaX = screenX - previousX``touchDragged``previous*``touchDragged`

或者，您可以查看`InputProcessor`libgdx 提供的一些更高级的包装器（请参阅[https://code.google.com/p/libgdx/wiki/InputGestureDetection](https://code.google.com/p/libgdx/wiki/InputGestureDetection)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-19T11:28:41.727

**简单的回答：**

声明 2 个字段来保存新旧拖动位置：

```
Vector2 dragOld, dragNew; 
```

刚触摸时，您将这两个设置为等于触摸的位置，否则您的凸轮会跳动。

```
if (Gdx.input.justTouched())
{
    dragNew = new Vector2(Gdx.input.getX(), Gdx.input.getY());
    dragOld = dragNew;
} 
```

每帧更新 dragNew 并简单地从彼此中减去向量以获得用于平移相机的 x 和 y。

```
if (Gdx.input.isTouched())
    {
        dragNew = new Vector2(Gdx.input.getX(), Gdx.input.getY());
        if (!dragNew.equals(dragOld))
        {
            cam.translate(dragOld.x - dragNew.x, dragNew.y - dragOld.y); //Translate by subtracting the vectors
            cam.update();
            dragOld = dragNew; //Drag old becomes drag new.
        }
    } 
```

这就是我用来拖动我的正射凸轮的全部，简单而有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-30T12:32:20.343

使用了 drinor 的答案，但在“touchDown”功能上添加了一行，因此每次您再次开始拖动时它都不会重置相机：

```
@Override
        public boolean touchDown(int screenX, int screenY, int pointer, int button) {
            last_touch_down.set( screenX, screenY, 0);
            return false;
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T15:03:17.983

我自己没有使用过它，但我会先查看以下代码：

你看过[http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/scenes/scene2d/ui/FlickScrollPane.html的代码了吗](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/scenes/scene2d/ui/FlickScrollPane.html)

看：`touchDragged`

# spring-mvc - Roo shell 不会为我的@RooConversionService 生成 ITD

> ID：15115285
> 
> 赞同：0
> 
> 时间：2013-02-27T14:59:20.450
> 
> 标签：spring-mvc, aspectj, spring-roo

我在 Roo 应用程序中添加了以下类：

```
/**
 * A central place to register application converters and formatters.
 */
@RooConversionService
public class ApplicationConversionServiceFactoryBean extends FormattingConversionServiceFactoryBean {

    @Override
    protected void installFormatters(FormatterRegistry registry) {
        super.installFormatters(registry);
    }
} 
```

**我在webmvc-config.xml**中注册了如下类：

```
<mvc:annotation-driven conversion-service="applicationConversionService"/> 
```

在**applicationContext.xml**中：

```
<bean class="com.bignibou.converter.ApplicationConversionServiceFactoryBean" id="applicationConversionService"/> 
```

请注意，我没有使用 JSP，而是使用 Thymeleaf，因此我根本没有运行“ `web mvc all`”命令，因此我没有网络脚手架。

**谁能告诉我为什么没有生成 RooConversionService 的 ITD？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-01T20:48:10.890

正如您可以在 Spring Roo Docs 中阅读的：

> “Roo 将为需要在视图中某处显示的每个关联实体自动维护一个带有转换器注册的 ITD”（第 97 页）

这在逻辑上意味着如果您没有脚手架视图，那么 Roo 不会管理转换服务，您需要手动创作和注册这些视图。

# azure - 将虚拟目录添加到现有网站

> ID：15115290
> 
> 赞同：7
> 
> 时间：2013-02-27T14:59:38.567
> 
> 标签：azure, azure-web-app-service, virtual-directory, azureportal, azure-appservice

是否可以将[虚拟目录（如在 IIS 中）添加到托管在](https://docs.microsoft.com/en-us/iis/configuration/system.applicationhost/sites/site/application/virtualdirectory)[Azure App Service](https://docs.microsoft.com/en-us/azure/app-service/overview)中的现有网站。如果是这样，这可以通过[Azure 门户](https://portal.azure.com/)完成吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T21:27:46.687

[](http://www.iis.net/configreference/system.applicationhost/sites/site/application/virtualdirectory)****Azure**网站*支持*[**虚拟**](http://www.iis.net/configreference/system.applicationhost/sites/site/application/virtualdirectory)目录。有关可以通过[Azure 管理门户](https://manage.windowsazure.com/)执行的操作，请参阅[配置 Azure 网站](http://azure.microsoft.com/en-us/documentation/articles/web-sites-configure/)。**

 ****从 Azure 门户：

1.  单击**网站**并转到**配置**。

2.  然后向下滚动到**虚拟应用程序和目录**（*最后一个配置部分*）。

3.  输入您的虚拟目录和相对于站点根目录的物理路径，然后单击**保存**。

![输入虚拟目录和物理路径](../Images/4b2b81e7e1f4c099cea7eb9245496315.png)

作为**Azure 网站**的替代方案，您可以使用[云服务 Web 角色](http://www.windowsazure.com/en-us/home/features/cloud-services/)或[虚拟机](http://www.windowsazure.com/en-us/home/features/virtual-machines/)功能。您还可以使用[Azure 存储](http://www.windowsazure.com/en-us/home/features/data-management/)链接到您的静态内容。****

# php - 使用本地网页管理数据库。如何设置？

> ID：15115293
> 
> 赞同：-1
> 
> 时间：2013-02-27T14:59:52.373
> 
> 标签：php, html, mysql, database, local

我想为该数据库中的每个人管理一个包含各种信息字段的数据库。我需要定期为每个人编辑其中一个字段。

我很擅长 HTML、CSS 和 Javascript，所以我决定创建一个本地网页来做这件事。

到目前为止，我已经获得了带有表格的网页作为最终版本的示例。

我需要做什么才能：

a）创建一个数据库（我假设使用 MySQL） b）让我的表在我加载网页时从数据库中获取数据 c）能够更改网页中的值，点击提交，然后在数据库，所以我实际上有一个数据库。（我假设php）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:07:26.407

这样做的第一步是拥有一个可以放置代码的环境。到目前为止，您使用的技术在本地运行时都很好，但是，如果您开始使用 PHP 和 MySQL 等技术，则需要服务器端处理。

如果您在 Windows 上运行，请尝试查看 WAMP 服务器。这应该可以帮助您入门[http://www.wampserver.com/en/](http://www.wampserver.com/en/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:03:29.340

首先，您需要在您的计算机上安装本地服务器（apache + php + mysql + phpmyadmin）：下载 MAMP（适用于 mac os）、XAMP 或 WAMP（适用于 windows）、LAMP（适用于 linux）。

# android - 旋转后的 ListFragment 和片段 NullPointerException

> ID：15115296
> 
> 赞同：0
> 
> 时间：2013-02-27T14:59:57.247
> 
> 标签：android, android-fragments

我有一个简单的 listFragment：

```
public class ListUtente extends ListFragment{
OnDetailUtenteSelezionato mCallback;
 private String[] utenti = {"Aldo","Giovanni","Giacomo"};
 ArrayAdapter<String> adapter;
public interface OnDetailUtenteSelezionato {
    public void ondetailUtenteSelezionato(int position);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setRetainInstance(true);
    // set adapter
    setListaUtenti();
    setHasOptionsMenu(true);

}

private void setListaUtenti(){

    if(getListAdapter()==null){
        // creo l'adapter
        adapter=new ArrayAdapter<String>(
                getActivity(),
                android.R.layout.simple_list_item_1,
                utenti);
        setListAdapter(adapter);  
    }
    else
    {
        adapter.notifyDataSetChanged();
    }                       
}

@Override
public void onDestroyView(){
    super.onDestroyView();
    setListAdapter(null);
}
@Override
public void onStart() {
    super.onStart();
    if (getFragmentManager().findFragmentById(R.id.detailutente_fragment) != null) {
        getListView().setChoiceMode(AbsListView.CHOICE_MODE_SINGLE);
    }
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    try {
        mCallback = (OnDetailUtenteSelezionato) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " devi implementare OnDetailUtenteSelezionato");
    }

}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {

        mCallback.ondetailUtenteSelezionato(position);

    // Set the item as checked to be highlighted when in two-pane layout
    //getListView().setItemChecked(position, true);
} 
```

}

片段细节：

```
public class DettUtente extends Fragment{
   final static String ARG_UTENTE = "utente";     
    int mUtenteCorrente = 0;
       // onCreateView
       @Override
       public View onCreateView(LayoutInflater inflater,ViewGroup container,Bundle savedInstanceState) {

            if (savedInstanceState != null) {
                mUtenteCorrente = savedInstanceState.getInt(ARG_UTENTE);
            }
           return inflater.inflate(R.layout.utente_detail,container,false);
       }
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
        }      

        @Override
        public void onStart() {
            super.onStart();

            Bundle args = getArguments();
            if (args != null) {
                // Set article based on argument passed in
                updateUtenteView(args.getInt(ARG_UTENTE));
            } 
                updateUtenteView(mUtenteCorrente);
        }
        public void updateUtenteView(int position) {
            TextView nome = (TextView) getActivity().findViewById(R.id.detailName);

            nome.setText("fabio");

            mUtenteCorrente = position;
        }
        @Override
        public void onSaveInstanceState(Bundle outState) {
            super.onSaveInstanceState(outState);
            outState.putInt(ARG_UTENTE, mUtenteCorrente);
        }
} 
```

我的活动：

```
public class ActivityUtente extends FragmentActivity implements   ListUtente.OnDetailUtenteSelezionato{
private boolean mDualFragments = false;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_utente);

    if(findViewById(R.id.framelayout2) != null){

        mDualFragments=true;
        ListUtente lu = new ListUtente();
        FragmentTransaction transaction = getSupportFragmentManager()
                .beginTransaction();
        transaction.add(R.id.framelayout1, lu);
        transaction.commit();
        //nella seconda schermata inserisco il dettaglio
        DettUtente du = new DettUtente();
        FragmentTransaction transaction1 = getSupportFragmentManager()
                .beginTransaction();
        transaction1.add(R.id.framelayout2, du);
        transaction1.commit();           
    }
    else
    {       
            ListUtente lu = new ListUtente();
            //lu.setArguments(0/*getIntent().getExtras()*/);
            getSupportFragmentManager().beginTransaction()
            .add(R.id.framelayout1, lu).commit();                       
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_utente, menu);
    return true;
}

@Override
public void ondetailUtenteSelezionato(int position) {
    DettUtente dettUtente;
    if (mDualFragments) {
        dettUtente = (DettUtente)
                getSupportFragmentManager().findFragmentById(R.id.detailutente_fragment);

        if (dettUtente != null && dettUtente.isVisible()) {
            dettUtente.updateUtenteView(position);
        } 

    }
    else{
        dettUtente = new DettUtente();
        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
        transaction.replace(R.id.framelayout1, dettUtente);
        transaction.addToBackStack(null);
        transaction.commit();       
    }       
} 
```

}

我的问题是当我旋转我的设备时。我想改变我的观点（从垂直到水平等）但是从水平到垂直我有这个错误：

```
 02-27 15:31:34.128: E/AndroidRuntime(10786): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.unipg.utente/com.unipg.utente.ActivityUtente}: java.lang.NullPointerException
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2187)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2212)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3640)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.app.ActivityThread.access$700(ActivityThread.java:144)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1216)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.os.Handler.dispatchMessage(Handler.java:99)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.os.Looper.loop(Looper.java:137)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.app.ActivityThread.main(ActivityThread.java:4966)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at java.lang.reflect.Method.invokeNative(Native Method)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at java.lang.reflect.Method.invoke(Method.java:511)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at dalvik.system.NativeStart.main(Native Method)
            02-27 15:31:34.128: E/AndroidRuntime(10786): Caused by: java.lang.NullPointerException
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at com.unipg.utente.DettUtente.updateUtenteView(DettUtente.java:50)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at com.unipg.utente.DettUtente.onStart(DettUtente.java:45)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.support.v4.app.Fragment.performStart(Fragment.java:1484)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:941)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.support.v4.app.FragmentManagerImpl.dispatchStart(FragmentManager.java:1866)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:568)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.app.Activity.performStart(Activity.java:5018)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2150)
            02-27 15:31:34.128: E/AndroidRuntime(10786):    ... 12 more
            02-27 15:31:34.148: W/ActivityManager(278):   Force finishing activity com.unipg.utente/.ActivityUtente 
```

# rhomobile - RhoMobile - 本地存储和 Rhom API

> ID：15115305
> 
> 赞同：0
> 
> 时间：2013-02-27T15:00:28.977
> 
> 标签：rhomobile

我对使用 Rhomobile 相当陌生，但是我并不完全了解本地存储的工作原理以及如何使用 Rhom API。

我已经设置了 RhoStudio 并运行了配置。我想要实现的基本上是有两个数据模型（默认使用属性包）：一个用于病房，一个用于患者，这样我就可以创建患者和病房对象。

最后，我想列出病房，以及分配给病房对象的患者。

有人可以解释我如何使用 Rhom API 来实现这一点吗？

我已经运行了一个模拟，所以一旦我有类似的东西： /app/Patient/{131199009368684.14}/show 在网络检查器中，所以我假设我需要创建某种关联..然后用过滤掉它组查询。

在我个人看来，使用 RhoMobile Doc 并没有足够的帮助。

如果有人能给我一个典型的例子，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T08:42:18.297

Rhodes 在创建模块时自动为模块的每个实例生成唯一的 ID。该属性称为“对象”。“131199009368684.14”你得到的是你创建的特定患者的“对象”。您可以将患者与病房联系起来的方法是：-

向 Patient Model 添加一个附加属性，该属性存储您希望将该特定患者链接到的 Ward 实例的“对象”。因此，您将能够通过在 Patient 表中存储病房对象的列上运行查找查询来列出特定病房中的所有患者，方法是向其提供特定病房的对象。

希望这是有用的。

# r - r中初始化的单元测试

> ID：15115307
> 
> 赞同：0
> 
> 时间：2013-02-27T15:00:32.987
> 
> 标签：r, unit-testing

假设我有一些内部对象，该对象构建在要为其编写测试的函数内部。例如，我在某个函数内部，我需要创建一个数据框，然后我只在函数内部使用它。即一旦函数完成运行，数据框就消失了。如何测试函数内部的此类数据框是否已正确初始化？

我无法从函数外部“获取”这个内部数据框，但我仍然想运行测试以确保它已正确初始化。本质上，我希望该函数处于调试模式，这样我就可以查看函数内部的工作区并在那里运行单元测试。

我是否应该单独为这个数据帧编写一个单独的构造函数类型函数（在这种情况下我可以轻松编写这样的测试）？或者有没有办法暂停函数完成并在函数返回之前使用函数内部的工作区？（就像处于函数调试模式的最后一步）

任何一般性建议将不胜感激！

# ios - 如何在 NSURLRequest 中附加 TLS/SSL 证书？

> ID：15115311
> 
> 赞同：1
> 
> 时间：2013-02-27T15:00:38.890
> 
> 标签：ios, objective-c, ssl, nsurlrequest

我需要与服务器通信，并且需要在每个`NSURLRequest`.

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:15:15.763

您的连接委托应实施`connection:canAuthenticateAgainstProtectionSpace:`并回答“是”。完成后，您的代表将收到`connection:didReceiveAuthenticationChallenge:`

要继续获得证书，该方法应该回答 NSURLCredential。使用您的证书创建其中一个

```
+ (NSURLCredential *)credentialWithIdentity:(SecIdentityRef)identity certificates:(NSArray *)certArray persistence:(NSURLCredentialPersistence)persistence 
```

# ios - Sencha Touch 未初始化

> ID：15115314
> 
> 赞同：5
> 
> 时间：2013-02-27T15:00:42.903
> 
> 标签：ios, ipad, sencha-touch, sencha-touch-2

我的 sencha touch 应用程序在所有浏览器中都可以正常工作，但是当我将 URL 保存到 iPad 主屏幕时。它不会加载，只显示一个空白屏幕。调试时我没有收到任何 JS 错误，并且日志中没有任何内容。这是应用程序的示例：

```
script type="text/javascript">
    var rootPanel;
    if (navigator.userAgent.match(/iPad/i)) {
        viewport = document.querySelector("meta[name=viewport]");
        viewport.setAttribute('content', 'width=980');
    }
    Ext.application({
        launch: function () {

            var contactForm = Ext.create('Ext.form.FormPanel', {
                standardSubmit: true,
                fullscreen: true,
                items: [{
                    xtype: 'titlebar',
                    title: 'My App',
                    docked: 'top'
                }, {
                    xtype: 'fieldset',
                    items: [{
                        xtype: 'textfield',
                        name: 'LoginName',
                        label: 'Login Name:'
                    }, {
                        xtype: 'passwordfield',
                        name: 'Password',
                        label: 'Password:'
                    },
                    {
                        xtype: 'hiddenfield',
                        name: 'ReturnUrl',
                        value: '/returnUser.html'
                    }] // items
                }, {
                    xtype: 'toolbar',
                    layout: {
                        pack: 'center'
                    }, // layout
                    ui: 'plain',
                    items: [{
                        xtype: 'button',
                        text: 'Reset',
                        ui: 'decline',
                        handler: function (btn, evt) {
                            Ext.Msg.confirm('', 'Are you sure you want to reset this form?', function (btn) {
                                if (btn === 'yes') {
                                    contactForm.setValues({
                                        LoginName: '',
                                        Password: ''
                                    }); // contactForm()
                                } // switch
                            }); // confirm()
                        }
                    }, {
                        xtype: 'button',
                        text: 'Submit',
                        ui: 'confirm',
                        handler: function (btn, evt) {
                            var values = contactForm.getValues();

                            contactForm.submit({
                                url: 'Login',
                                method: 'POST',
                                waitTitle: 'Connecting',
                                waitMsg: 'Sending data...',
                                success: function (form, result) {
                                    Ext.Msg.alert('Login succeeded!', result.response.reason);
                                },
                                failure: function (form, result) {
                                    Ext.Msg.alert('Login Failed!', result.response.reason);
                                }
                            });

                        } // handler
                    }] // items (toolbar)
                }] // items (formpanel)
            }); // create()
        } // launch
    }); // application()

    $(document).ready(function () {

    }); 
```

我在启动方法中放了一个警报，`Ext.Application`但它没有显示。`document.ready`当我在它确实显示的功能中放置警报时。我还应该注意它***确实***可以在 ipad 浏览器上工作，只是不能从主屏幕上的图标启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:09:32.023

我在android中遇到了类似的问题，实际上在我的情况下问题是因为未启用Ext.Loader 我看到你也没有包括它。在 Ext.application 之前包含此脚本并查看它是否有效

```
Ext.Loader.setConfig({
    enabled:true
});

Ext.application({...}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:57:51.043

它似乎是我使用的 sencha 版本，我相信它是 2.1.0，只要我更新到最新版本（2.1.1 Build Date 2013-02-05 12:25:50）我就可以正常工作。

# qt - 为 webview 设置代理

> ID：15115323
> 
> 赞同：0
> 
> 时间：2013-02-27T15:01:00.623
> 
> 标签：qt, qml, qwebview

我用qml的[webview](http://harmattan-dev.nokia.com/docs/library/html/qt4/qml-webview.html) 做了一个小浏览器，效果很好。

问题是，当有一个为其设置了代理的网络时，它会失败。

试试 1。

我从[这里](http://www.developer.nokia.com/Community/Wiki/Why_does_QML_require_QDeclarativeNetworkAccessManagerFactory)阅读了有关 QDeclarativeNetworkAccessManagerFactory 类的信息，并尝试仅为我的 qml 应用程序设置代理，但它不起作用。

试试 2。

我阅读并尝试使用以下代码设置应用程序范围的代理：

```
 QNetworkProxy proxy;
    proxy.setType(QNetworkProxy::HttpProxy);
    proxy.setHostName("proxy.foo.com");
    proxy.setPort(8080);
    proxy.setUser("itsme");
    proxy.setPassword("really");
    QNetworkProxy::setApplicationProxy(proxy); 
```

但它没有用。知道如何进行吗？

* * *

编辑：

我在输出中收到这条消息：

```
QNetworkAccessCache::addEntry: overriding active cache entry > 'auth:proxy-> > http://proxy.foo.com:8080' 
```

# python - Python 请求 - 无连接适配器

> ID：15115328
> 
> 赞同：293
> 
> 时间：2013-02-27T15:01:16.910
> 
> 标签：python, python-2.7, python-requests

我正在使用[Requests: HTTP for Humans](http://docs.python-requests.org/en/latest/)库，我收到了这个奇怪的错误，我不知道是什么意思。

```
No connection adapters were found for '192.168.1.61:8080/api/call' 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：532
> 
> 时间：2013-02-27T15:01:57.453

您需要包括协议方案：

```
'http://192.168.1.61:8080/api/call' 
```

没有这`http://`部分，`requests`不知道如何连接到远程服务器。

注意协议方案必须全部小写；例如，如果您的 URL 以`HTTP://`example 开头，它也不会找到`http://`连接适配器。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-08-07T03:26:07.910

还有一个原因，也许您的网址包含一些隐藏字符，例如“\n”。

如果您像下面这样定义您的网址，则会引发此异常：

```
url = '''
http://google.com
''' 
```

因为字符串中有 '\n' 隐藏。网址实际上变成了：

```
\nhttp://google.com\n 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2021-12-08T11:34:39.680

修复连接适配器匹配到最具体的优先，其他小的 Python 3 文本编码错误。，.netrc 不再覆盖显式身份验证。，可安装的连接适配器

要安装 Requests，只需：

$ pip 安装请求

# android - 无法拒绝蓝牙权限请求

> ID：15115339
> 
> 赞同：0
> 
> 时间：2013-02-27T15:01:40.650
> 
> 标签：android, bluetooth

好的，所以我正在开发一个使用蓝牙的应用程序。这是我检查是否启用蓝牙的代码：

```
public void checkBluetoothState() {
    //check if the Device supports bluetooth
    if(bluetoothAdapter == null) {
        textState.setText(getResources().getString(R.string.btNotSupported));
    } else {
        //check if bluetooth is enabled
        if(bluetoothAdapter.isEnabled()) {
            if(bluetoothAdapter.isDiscovering()) {
                textState.setText(getResources().getString(R.string.btDiscovering));
            } else {
                textState.setText(getResources().getString(R.string.btEnabled));                    
                buttonScanDevices.setEnabled(true);
            }               
        } else {
            textState.setText(getResources().getString(R.string.btDisabled));
            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivity(enableBtIntent);
        }
    }
} 
```

这在 onResume() 方法中调用。

但是当我拒绝激活蓝牙时，对话框会一次又一次地弹出，直到我授予访问权限或关闭应用程序。

这是为什么？

# jquery - jQuery Mobile - 多个弹出窗口问题

> ID：15115343
> 
> 赞同：2
> 
> 时间：2013-02-27T15:01:48.157
> 
> 标签：jquery, jquery-mobile, popup

我在我的 jQuery Mobile 网站中遇到问题，我有 3 个单独的页面（在一个 index.html 文件中），所有这些页面都在成功事件中加载自己的弹出窗口，然后我通过 jQuery 加载弹出窗口，例如：

```
$( "#myPopupDiv" ).popup( "open" ); 
```

这很好用，但是一旦用户访问了一个页面并打开了它的弹出窗口，当访问后续页面时，这些页面上的弹出窗口就不会触发（但是该页面上的弹出窗口在会话期间仍然有效），但是所有代码都可以在页面上运行，并且 Chrome 开发工具中没有控制台错误。

我没有任何重复的 ID，我尝试在 console.log 中放置代码应该触发以打开弹出窗口的位置，这可以正常工作，似乎绕过了打开弹出窗口的代码。

有没有人遇到过这个问题？

提前致谢。

**简化代码示例**

```
<!-- PAGE 1 -->
<div data-role="page" id="page-1">
    <div data-role="content">
        <!-- BUTTON: loadPopup-1 -->
        <div id="popup-1" data-role="popup">
        <!-- Popup contents -->
        </div><!-- /popup -->
    </div><!-- /content -->
</div><!-- /page -->

<!-- PAGE 2 -->
<div data-role="page" id="page-2">
    <div data-role="content">
        <!-- BUTTON: loadPopup-2 -->
        <div id="popup-2" data-role="popup">
        <!-- Popup contents -->
        </div><!-- /popup -->
    </div><!-- /content -->
</div><!-- /page -->

<!-- JS -->
function loadPopup-1() {
    $( "#popup-1" ).popup( "open" );
}

function loadPopup-2() {
    $( "#popup-2" ).popup( "open" );
} 
```

因此，如果用户选择第 1 页并打开其弹出窗口，该弹出窗口将继续工作，但第 2 页上的弹出窗口不会，反之亦然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:57:55.737

一次打开多个 JQM 弹出窗口似乎是不可能的。

来自文档：注意：不允许弹出窗口的链接该框架当前不支持弹出窗口的链接，因此无法嵌入从一个弹出窗口到另一个弹出窗口的链接。弹出窗口中所有带有 data-rel="popup" 的链接根本不会做任何事情。

这也意味着自定义选择菜单在弹出窗口中不起作用，因为它们本身是使用弹出窗口实现的。如果您在弹出窗口中放置一个选择菜单，即使您指定 data-native-menu="false"，它也会呈现为原生选择菜单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T15:06:41.990

您应该显示更多代码，以便我们理解问题......弹出功能的触发器是什么？在那之前，我建议你做点别的：

创建一个在活动页面上创建通用弹出窗口的函数，然后将其打开...

示例代码：

```
function ShowPopUp(PopupText){

   // check if popup element already exists
   if($("#PopUp").length > 0)
      $("#PopUp").remove();

   // get active (current) page ID
   var id = $.mobile.activePage.attr("id");

   // add popup element to the active page
   $("#" + id).append("<div data-role='popup' id='PopUp' class='ui-content' data-position-to='window' data-overlay-theme='a'></div>");

   // add your text to the popup
   $("#PopUp").html(PopupText);

   // "refresh" the page with new popup elements
   $("#" + id ).trigger('create');

   // open the popup
   $("#PopUp").popup("open");

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-24T19:03:36.750

试试[https://github.com/serbanghita/jQM-dynamic-popup](https://github.com/serbanghita/jQM-dynamic-popup) - 我从 2012 年开始就在生产中使用它。

封装`$.dynamic_popup(' ... HTML code ... ');`在你的函数中。您可以触发任意数量的 jQuery Mobile 弹出窗口。

# android - 如何从 SQLite 预先准备好的数据库中获取一个随机行

> ID：15115346
> 
> 赞同：0
> 
> 时间：2013-02-27T15:01:59.323
> 
> 标签：android, android-sqlite, sqliteopenhelper

我在资产中导入了一个试用数据库，它已预先填充。它有 6 列：_ID、QUESTION、ANSWER、OPTION1、OPTION2、OPTION3，我现在有 10 行。我正在做一些类似测验的事情。我想要的是当我打开测验活动以读取一个随机行，然后将 setText 设置为我创建的 4 个按钮，button1=ANSWER，button2=OPTION1，button3=OPTION2，button=OPTION3，再次随机。我知道如何将文本设置为按钮等等，我只想知道如何从数据库中读取所有内容。我有导入数据库的 DataBaseHelper 类：

```
package rs.androidaplikacijekvizopstekulture;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;
import rs.androidaplikacijekvizopstekulture.Pitanja;

public class DataBaseHelper extends SQLiteOpenHelper
{
private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window
//destination path (location) of our database on device
private static String DB_PATH = ""; 
private static String DB_NAME ="pitanja";// Database name
private static final int DATABASE_VERSION = 1;
private static SQLiteDatabase mDataBase; 
private final Context mContext;
private static final String KEY_ID = "_ID";
private static final String KEY_PITANJE = "PITANJE";
private static final String KEY_ODGOVOR = "ODGOVOR";
private static final String KEY_OPCIJA1 = "OPCIJA1";
private static final String KEY_OPCIJA2 = "OPCIJA2";
private static final String KEY_OPCIJA3 = "OPCIJA3";
private static final String TABLE_NAME = "tblPitanja";

public DataBaseHelper(Context mojContext) 
{
    super(mojContext, DB_NAME, null, 1);// 1? its Database Version
    DB_PATH = mojContext.getApplicationInfo().dataDir + "/databases/";
    this.mContext = mojContext;
}

public void createDataBase() throws IOException
{
    //If database not exists copy it from the assets

    boolean mDataBaseExist = checkDataBase();
    if(!mDataBaseExist)
    {
        this.getReadableDatabase();
        this.close();
        try 
        {
            //Copy the database from assests
            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        } 
        catch (IOException mIOException) 
        {
            throw new Error("ErrorCopyingDataBase");
        }
    }
}
    //Check that the database exists here: /data/data/your package/databases/Da Name
    private boolean checkDataBase()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        //Log.v("dbFile", dbFile + "   "+ dbFile.exists());
        return dbFile.exists();
    }

    //Copy the database from assets
    private void copyDataBase() throws IOException
    {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer))>0)
        {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    //Open the database, so we can query it
    public boolean openDataBase() throws SQLException
    {
        String mPath = DB_PATH + DB_NAME;
        //Log.v("mPath", mPath);
        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        return mDataBase != null;
    }

    @Override
    public synchronized void close() 
    {
        if(mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        }

    @Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
        Log.w("DataBaseHelper", "Upgrading database!!!!!");
          onCreate(arg0);

    }

} 
```

在遵循在线教程之一之后，我还制作了一个 TestAdapter 类。我实际上不知道我是否需要这门课。

```
package rs.androidaplikacijekvizopstekulture;

import java.io.IOException;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.util.Log;

public class TestAdapter 
{
    protected static final String TAG = "DataAdapter";

    private final Context mContext;
    private SQLiteDatabase mDb;
    private DataBaseHelper mDbHelper;

    public TestAdapter(Context context) 
    {
        this.mContext = context;
        mDbHelper = new DataBaseHelper(mContext);
    }

    public TestAdapter createDatabase() throws SQLException 
    {
        try 
        {
            mDbHelper.createDataBase();
        } 
        catch (IOException mIOException) 
        {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public TestAdapter open() throws SQLException 
    {
        try 
        {
            mDbHelper.openDataBase();
            mDbHelper.close();
            mDb = mDbHelper.getReadableDatabase();
        } 
        catch (SQLException mSQLException) 
        {
            Log.e(TAG, "open >>"+ mSQLException.toString());
            throw mSQLException;
        }
        return this;
    }

    public void close() 
    {
        mDbHelper.close();
    }

     public Cursor getTestData()
     {
         try
         {
             String sql ="SELECT * FROM tblPitanja";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T15:04:24.537

为此，您可以在 sql 函数 ex 中使用 RANDOM。

String sql = "select * from yourtable order BY RANDOM() LIMIT 1";

# android - Android - 保存用户权限请求（蓝牙）？

> ID：15115352
> 
> 赞同：0
> 
> 时间：2013-02-27T15:02:11.247
> 
> 标签：android, permissions, bluetooth

我有一个应用程序可以成功启用设备上的蓝牙。在创建时，它会询问用户启用蓝牙的权限。但是，它每次应用程序启动时都会询问。有没有办法保存用户的权限请求结果，以便蓝牙在创建时自动启用？

编辑：当我加载 BluetoothChat 示例时，它不会请求我的许可，它只是继续并启用蓝牙。我怎样才能让它做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:11:46.563

您需要使用[ApplicationPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)，

保存一个标志以获得用户的许可，并在每次应用程序启动时检查该标志。看看[这个教程](http://www.vogella.com/articles/AndroidFileBasedPersistence/article.html)来持久化存储的数据

# java - 在 hasRole 中使用 spring:eval

> ID：15115356
> 
> 赞同：2
> 
> 时间：2013-02-27T15:02:22.837
> 
> 标签：java, spring, spring-mvc, spring-security

我在 JSP 中显示属性文件中的某些属性，如下所示：

```
<spring:eval expression="@propertyConfigurer.getProperty('myproperty')"/> 
```

现在，我想在里面使用相同的属性`<sec:authorize access="hasRole()/>`

```
<sec:authorize access="hasRole('<spring:eval expression="@propertyConfigurer.getProperty('myproperty')"/>')"> 
```

这是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:18:27.513

试试这个：

```
<spring:eval expression="@propertyConfigurer.getProperty('myproperty')" var="myproperty"/>
<sec:authorize access="hasRole('${myproperty}')"> 
```

# c++ - 为什么在 const 指针中有非法的结构操作？

> ID：15115363
> 
> 赞同：0
> 
> 时间：2013-02-27T15:02:57.080
> 
> 标签：c++, pointers, constants

为什么我必须在使用指针时添加`&`in`cout`子句。`const`我在下面的代码中。如果我不添加`&`子句，它会说`illegal structure operation`。

```
int Marks [10]= {1, 2, 3, 4, 5, 6, 7, 8, 9, 0};
// Create a constant pointer to Marks array
const int* pMarks = Marks;
for (int i = 0, bytes = 0; i < 10; ++i, bytes += 4)
{
  cout <<  "Element " << i << ": " << pMarks <<" + ";
  cout <<  bytes << " bytes" << " = " << (pMarks + i) << endl; // that & is required before (pMarks + i)
} 
```

I want my **output** would be something like this: stdout:

**Element 0: 0x7fff1d26d6c0 + 0 bytes = 0x7fff1d26d6c0
Element 1: 0x7fff1d26d6c0 + 4 bytes = 0x7fff1d26d6c4
Element 2: 0x7fff1d26d6c0 + 8 bytes = 0x7fff1d26d6c8
Element 3: 0x7fff1d26d6c0 + 12 bytes = 0x7fff1d26d6cc
Element 4 : 0x7fff1d26d6c0 + 16 bytes = 0x7fff1d26d6d0
Element 5: 0x7fff1d26d6c0 + 20 bytes = 0x7fff1d26d6d4
Element 6: 0x7fff1d26d6c0 + 24 bytes = 0x7fff1d26d6d8
Element 7: 0x7fff1d26d6c0 + 28 bytes = 0x7fff1d26d6dc
Element 8: 0x7fff1d26d6c0 + 32 bytes = 0x7fff1d26d6e0** 

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:07:27.217

关于什么

```
cout <<  bytes << " bytes" << " = " <<*(pMarks + i) << endl; 
```

否则，您将传递来自 的地址`pMarks + i`。

# jquery - microsoft jscript 运行时错误：测试未定义

> ID：15115364
> 
> 赞同：0
> 
> 时间：2013-02-27T15:03:02.913
> 
> 标签：jquery, asp.net

我有 2 个母版页 1 个在管理员内部和 1 个在管理员外部

当我从该文件复制到 adminmaster 时，管理主页之外的 jquery 函数正在触发特定事件和相同的功能，我得到错误

microsoft jscript 运行时错误：'functionname'未定义

这里的区别是admin master的内容页面也具有jquery功能，并且只有这些功能在viewsource页面或firefox->firebug->script中可用

adminmasre 里面的功能根本不可用。

这是我的 admin.master 代码

```
<asp:ContentPlaceHolder ID="scriptadmin" runat="server"> 
    <script type="text/javascript">
        $(document).bind("mobileinit", function () {
            $.mobile.ajaxEnabled = false;
        });

        $("#Logout").click(function (e) {
            e.stopImmediatePropagation();
            e.preventDefault();
        });

        function test() {
            alert("Test");
        }

        function Dologout() {
            //     Sys.Services.AuthenticationService.logout(null, OnLogoutSuceeded, OnLoginFailed, null);
            // return false;
        }

        //         function OnLogoutSuceeded(result, userContext, methodName) {
        //             alert('You have been successfully logged out of the application...');
        //          //   window.location.href("Login.aspx");
        //         } 

</script>

</asp:ContentPlaceHolder>
</body>
</html> 
```

这里是 div 我把这个函数称为 Back Logout

内容页面是：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs"      Inherits="XYZ.Admin.Default" MasterPageFile="~/Admin/admin.Master"  %>
    <asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
        <h3 class="MainHeader">Upload Excel file to convert into database </h3>
        <asp:Label ID="lblmsg" runat="server" Text="" CssClass="message" ></asp:Label>
        <div class="file-upload-btn">
            <asp:FileUpload ID="FileUpload1" runat="server"  />
        </div>
        <div id ="ButtonWrapper" > 
            <asp:Button ID="btnUpload" runat="server" Text="Upload" data-role="none" onclick="btnUpload_Click"    />
        </div>
</asp:Content>

<asp:Content ID="script1" ContentPlaceHolderID="scriptadmin" runat="server">
    <script type="text/javascript">
         $(function () {
             $("#btnUpload").removeClass('ui-btn-hidden ui-btn-inner ui-submit ui-btn ui-shadow ui-btn-corner-all ui-btn-up-b');
             $("#FileUpload1").removeClass('ui-input-text ui-shadow-inset ui-corner-all ui-btn-shadow ui-body-c file-upload-btn');
         });
    </script>
</asp:Content> 
```

任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:44:48.627

您已经替换了 placeholder 中的代码`scriptadmin`，这就是这些功能消失的原因。

母版页内的工作方式`ContentPlaceHolder`是母版文件中的任何代码仅在它们继承的文件没有该 ContentPlaceHolder 时运行。它是默认内容，因此您要替换它。

您需要做的是更改 Admin.Master 并将其更改为 ContentPlaceHolder 不包含默认代码，而是始终添加它。

```
<script type="text/javascript">
    $(document).bind("mobileinit", function () {
        $.mobile.ajaxEnabled = false;
    });

    $("#Logout").click(function (e) {
        e.stopImmediatePropagation();
        e.preventDefault();
    });

    function test() {
        alert("Test");
    }

    function Dologout() {
        //     Sys.Services.AuthenticationService.logout(null, OnLogoutSuceeded, OnLoginFailed, null);
        // return false;
    }

    //         function OnLogoutSuceeded(result, userContext, methodName) {
    //             alert('You have been successfully logged out of the application...');
    //          //   window.location.href("Login.aspx");
    //         } 

</script>
<asp:ContentPlaceHolder ID="scriptadmin" runat="server" /> 
```

# django - Django 错误：一个或多个模型未验证：

> ID：15115372
> 
> 赞同：0
> 
> 时间：2013-02-27T15:03:27.750
> 
> 标签：django, validation, model, foreign-key-relationship, name-clash

我正在从 Netutus [http://net.tutsplus.com/tutorials/python-tutorials/building-ribbit-with-django/](http://net.tutsplus.com/tutorials/python-tutorials/building-ribbit-with-django/)制作一个应用程序，当我运行 syncdb 时出现此错误。我做了一些研究，发现我必须在 ForeignKey 中放置一个related_field，但我仍然有错误。

```
 Error : one or more models did not validate:
 forum.userprofile: Reverse query name for field 'user' clashes with related field 'User.userprofile'. Add a related_name argument to the definition for 'user'. 
```

我的模型.py

```
 from django.db import models
 from django.contrib.auth.models import User
 import hashlib

 class Ribbit(models.Model):
     content = models.CharField(max_length=140)# 
     user = models.ForeignKey(User, related_name="note")
     creation_date = models.DateTimeField(auto_now=True, blank=True)

 class UserProfile(models.Model):
     user = models.OneToOneField(User)
     follows = models.ManyToManyField('self', related_name='followed_by', symmetrical=False)

 User.profile = property(lambda u: UserProfile.objects.get_or_create(user=u)[0]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:07:53.093

您是否尝试在 UserProfile 模型中向用户字段添加相关名称参数？

```
user = models.OneToOneField(User, related_name='user_profile') 
```

至少那是错误消息所说的。

# android - 从 ADT 生成的 lint.xml 的问题

> ID：15115379
> 
> 赞同：0
> 
> 时间：2013-02-27T15:03:35.597
> 
> 标签：android, eclipse, adt, android-lint

我在一个具有多平台环境的团队中工作，我们在生成的 lint.xml 文件中遇到了一些问题。这个文件也被我们在 Mac OS X 上运行的 Jenkins 构建系统使用（它必须是 Mac，因为这个系统将用于构建 Android 和 iOS 应用程序）。

问题是，我们需要忽略对 libs 文件夹中特定文件的 Lint 检查。当我在 Windows 中执行此操作时，我得到了他的：`<ignore path="libs\FlurryAgent.jar" />`但是在 Mac 上使用 Jenkins 运行的 Lint 不理解反斜杠，它会忽略 lint.xml 文件。不好...

我们将反斜杠更改为正斜杠，现在它可以在 Mac 上运行。但后来它停止在我的 Windows 机器上工作，它不理解正斜杠。

有没有办法让正斜杠在两个系统中都工作而不会一直弄乱斜杠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:41:48.087

对不起。这是 lint 中的一个错误。我会解决这个问题，但我认为没有解决方法。（对于某些问题，您可以在相应的 XML 中插入 @SuppressLint 注释或 tools:ignore 属性，但这不适用于图标文件上的警告等。）

# css - 使用 CSS 的光标图像

> ID：15115382
> 
> 赞同：0
> 
> 时间：2013-02-27T15:03:39.153
> 
> 标签：css, image, cursor

当有人将鼠标悬停在地图图像上时，我想使用 195 x 29 的图像来替换手。我正在尝试执行此 css，但如果没有可用的 css 选项，我会考虑使用 javascript 选项。我尝试了几种不同的 css 选项，但无法获得我正在寻找的结果。目前我的css代码设置为：

```
#docmap {float:left;width:620px;height:225px;}
.click a:hover {cursor:url(images/click.png) no-repeat !important;} 
```

我的html是：

```
<div id="docmap" class="click"><a href="http://goo.gl/maps/R3TXp" target="_blank"><img src="http://whistlerworks.com/clients/918smile/site/wp-content/themes/Karma/images/map.png" alt="" /></a></div> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:06:25.290

```
.click a {cursor: url(images/click.png), pointer} 
```

[https://developer.mozilla.org/en-US/docs/CSS/cursor/url](https://developer.mozilla.org/en-US/docs/CSS/cursor/url)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:07:57.353

看看这个，可能有助于让我知道它是否有用

[http://www.htmlgoodies.com/beyond/css/create-custom-cursors-with-javascript-and-css3.html#fbid=2P5qQIHDj3T](http://www.htmlgoodies.com/beyond/css/create-custom-cursors-with-javascript-and-css3.html#fbid=2P5qQIHDj3T)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:55:43.977

最安全的图像格式是 32x32 8 位黑白`.ico`文件。

正如@isherwood 提到的，基本语法是：

```
.click a {
    cursor: url(my-icon.ico), auto;
} 
```

我认为 JavaScript 不会有帮助。任何可用的浏览器支持都可能仅通过 CSS。而且您必须愿意忍受一些根本不支持它的浏览器（即渐进增强）。

**在不同的浏览器中测试**

这是一个使用多种图像格式的[演示。](http://www.forestpath.org/test/misc/custom-cursor.html)将鼠标移到方块上以了解每个浏览器的工作原理。在每种情况下，如果它有效，您将看到一个蝴蝶光标。

例外：底行使用完全透明的图像，因此您应该看不到任何光标。在前两行的“帮助”列中，您应该会看到默认的帮助图标（这是所有其他方块的后备光标）。

# mysql - 为什么这个插入语句不起作用？

> ID：15115384
> 
> 赞同：1
> 
> 时间：2013-02-27T15:03:41.933
> 
> 标签：mysql, sql

我在 mysql 中尝试了这个插入语句（确切地说是 phpmyadmin，但我认为它是 mysql 语法错误）

```
 INSERT INTO rented_video 
    VALUES(NULL, 1, 2), 
    VALUES(NULL, 2, 1), 
    VALUES(NULL, 2, 2), 
    VALUES(NULL, 2, 3), 
    VALUES(NULL, 3, 4), 
    VALUES(NULL, 3, 5), 
    VALUES(NULL, 4, 6), 
    VALUES(NULL, 4, 7), 
    VALUES(NULL, 4, 8), 
    VALUES(NULL, 5, 9); 
```

错误是：

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'VALUES(NULL, 2, 1), VALUES(NULL, 2, 2), VALUES(NULL, 2, 3), VALUES(NULL, 3) 附近使用的正确语法' 在第 3 行

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T15:04:38.030

你应该只有一个关键字`VALUES`

```
INSERT INTO rented_video 
VALUES (NULL, 1, 2), 
       (NULL, 2, 1), 
       (NULL, 2, 2), 
       (NULL, 2, 3), 
       (NULL, 3, 4), 
       (NULL, 3, 5), 
       (NULL, 4, 6), 
       (NULL, 4, 7), 
       (NULL, 4, 8), 
       (NULL, 5, 9); 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2a21b/1)

# android - Android GCM：我们可以将数据作为完整的 JSON 结构获取吗？

> ID：15115385
> 
> 赞同：1
> 
> 时间：2013-02-27T15:03:44.100
> 
> 标签：android, google-cloud-messaging

我正在向 Google GCM 服务器发送一条消息 (POST)，`https://android.googleapis.com/gcm/send`以便向已注册的 android 设备发送推送通知。POST 正文如下所示：

```
{
    "registration_ids" : [android_registration_id],
    "data" : {
        "message" : "Hello World!",
        "update" : "You've got a new update",
        "info" : "You've got new information updates too!"
    }
} 
```

假设我不知道在“data”字段中发送给我的所有键值对（gcm 注册的 android 应用程序）并且我想枚举并打印它们，我可以将“data”中的字段提取为JSON结构？

例如，在上面的示例中，我需要以下内容作为 JSON 对象：

```
{
    "message" : "Hello World!",
    "update" : "You've got a new update",
    "info" : "You've got new information updates too!"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:47:55.983

```
Bundle data = intent.getExtras();
Iterator<String> it = data.keySet().iterator();
String key;
String value;
while(it.hasNext()) {
    key = it.next();
    value = data.getString(key);
} 
```

试试这个。使用键和值可以构造初始 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:14:20.997

```
JSONArray array = new JSONArray(jsonBodyOfTheResponse);

for (int i = 0; i < array.length(); i++) {
    JSONObject row = array.getJSONObject(i);
    .
    .
    . } 
```

# java - 由于java中的背景图像无法看到我的按钮

> ID：15115389
> 
> 赞同：0
> 
> 时间：2013-02-27T15:03:50.620
> 
> 标签：java, swing

当我设置背景时，我无法看到我的按钮，直到我将光标移过它们.. 我试图为按钮设置 setOpaque(true) 但它不起作用..

```
 final JFrame f1=new JFrame("Front Main");
    f1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel p1=new JPanel(new GridBagLayout()){
    private Image img = ImageIO.read(new File("C:\\Users\\DELL\\Desktop\\football.jpg"));
    public void paint( Graphics g ) { 
           super.paintComponents(g);

           g.drawImage(img, 0,0,1366,730, null);
           }
    };
    GridBagConstraints g1= new GridBagConstraints();
    JButton b1=new JButton("Admin");
    JButton b2=new JButton("User");
    JLabel l1=new JLabel("Login as:");
    g1.insets=new Insets(3,3,0,0);
    g1.weightx=1;
    g1.ipadx=200;
    g1.anchor=GridBagConstraints.NORTH;
    g1.gridwidth=GridBagConstraints.RELATIVE;
    p1.add(b1,g1);
    g1.anchor=GridBagConstraints.NORTH;
    g1.gridwidth=GridBagConstraints.REMAINDER;
    p1.add(b2,g1);
    g1.weightx=3;
    g1.ipadx=0;
    p1.add(l1,g1);
    f1.add(p1);
    p1.setOpaque(false);
    f1.setSize(1366,730);
    f1.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:29:14.720

由于`JFrame`管理其内容的方式，覆盖其`paint`方法通常不是一个好主意。使用 a`JPanel`代替：

```
JPanel panel = new JPanel() {
    private Image img = ImageIO.read(new File("C:\\Users\\DELL\\Desktop\\football.jpg"));
    @Override
    public void paintComponent(Graphics g) { 
        super.paintComponent(g);

        g.drawImage(img, 0,0,1366,730, this);
    }

    etc...
};

final JFrame f1 = new JFrame("Front Main");
f1.add(panel);
f1.setSize(1366,730);
f1.setVisible(true);
f1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:14:40.093

> 在我将光标移过它们之前，我无法看到我的按钮

那是因为您在框架可见之后将组件添加到框架中。

```
f1.setSize(1366,730);
f1.setVisible(true);
....
JButton b1=new JButton("Admin");
JButton b2=new JButton("User");
...
p1.add(b1,g1);
p1.add(b2,g1); 
```

代码应该是这样的：

```
....
JButton b1=new JButton("Admin");
JButton b2=new JButton("User");
...
p1.add(b1,g1);
p1.add(b2,g1);
...
f1.setSize(1366,730);
f1.setVisible(true); 
```

此外，关于paint() 方法的所有其他评论都是有效的。您不应该覆盖paint() 方法。自定义绘制是通过覆盖 JPanel 或 JComponent 的 paintComponent() 方法来完成的。然后将此组件添加到框架中。

# javascript - 在剑道网格中，如何在进行内联编辑时禁用拖动？

> ID：15115390
> 
> 赞同：3
> 
> 时间：2013-02-27T15:03:50.857
> 
> 标签：javascript, jquery, kendo-ui

我有一个带有可拖动对象的剑道网格，以允许重新排序网格行。

```
 grid.table.kendoDraggable({
            filter: "tbody > tr",
            group: "gridGroup",
            hint: function (e) {
                return $('<div class="k-grid k-widget"><table><tbody><tr>' + e.html() + '</tr></tbody></table></div>');
            }
        });

        grid.table.kendoDropTarget({
            group: "gridGroup",
            drop: function (e) {
                e.draggable.hint.hide();
                var target = dataSource.getByUid($(e.draggable.currentTarget).data("uid")),
                    dest = $(document.elementFromPoint(e.clientX, e.clientY));

                if (dest.is("th")) {
                    return;
                }

                dest = dataSource.getByUid(dest.parent().data("uid"));

                if (target.get("Id") !== dest.get("Id")) {
                    var tmp = target.Priority;
                    target.Priority = dest.Priority;
                    dest.Priority = tmp;

                    dataSource.sort({ field: "Priority", dir: "asc" });
                }
            }
        }); 
```

我还可以通过设置进行内联编辑

```
editable: "inline" 
```

和

```
{
    command: ["edit"]
} 
```

但是，当尝试单击可编辑字段时启用拖动时，Kendo 网格会做一些令人讨厌的事情。当我注释掉 kendoDraggable 代码时，编辑工作得很好。我正在寻找一种捕获 kendoGrid“编辑”命令并使用它来禁用可拖动性的方法。当然，我需要在用户离开内联编辑模式后重新启用拖动。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T18:17:57.120

您可以只使过滤器排除当前正在编辑的行。

```
grid.table.kendoDraggable({
  filter: "tbody > tr:not(.k-grid-edit-row)", 
```

[这是现场示例](http://jsbin.com/edamuj/487/edit)。

# javascript - 确定是否启用 javascript 的正确方法

> ID：15115392
> 
> 赞同：1
> 
> 时间：2013-02-27T15:03:51.500
> 
> 标签：javascript, html

我一直在这里（和其他地方）检查问题和答案，但没有得到明确的答案：如果禁用 javascript，以下 html 是否有任何缺点来显示备用图像？

```
<html>  
<head>  
    <script src="http://code.jquery.com/jquery-latest.js"></script>  
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js">  </script>  
    <script src="path to local js script here"></script>  
    <noscript><a href="URL here" target="_blank"><img src="path to alt image here" />  </a></noscript>  
    <link rel="stylesheet" type="text/css" href="path to css here">  
</head>  
<body>  
...
</body>  
</html> 
```

这似乎对我有用，但我看到了更复杂的解决方案；以这种方式制作替代图像有什么“错误”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:06:36.160

那是无效的 HTML；您不能将内容放入`<head>`.

把它移到`<body>`，它会没事的。

请注意，如果用户启用了 Javascript，但代理正在删除您的脚本，则不会显示。
相反，你可以`no-js`在你的 中放置一个类`<html>`，然后添加一些 Javascript 来`<head>`替换它`js`。
然后，您可以编写仅在 Javascript 实际工作时才适用的 CSS 规则。

# actionscript-3 - 在 flex 3 运行时更改应用程序描述符

> ID：15115395
> 
> 赞同：0
> 
> 时间：2013-02-27T15:04:00.290
> 
> 标签：actionscript-3, flash, apache-flex, flex3

我目前在使用 flex 3 时遇到了两个问题：

1.  是否可以在运行时更改字段或在初始化期间（或在运行时）通过操作脚本至少设置值？

2.  现在我不使用 flex sdk 或构建器，我应该如何访问本机应用程序，如果我导入 flash.desktop.nativeapplication 它在我编译时说找不到。

# playframework - 带游戏的 OpenXava

> ID：15115396
> 
> 赞同：0
> 
> 时间：2013-02-27T15:04:04.163
> 
> 标签：playframework, playframework-2.0, openxava

我想在 Play 中使用 OpenXava 脚手架系统！框架（1.2.5 或 2.x）。

这是因为我需要做一个原型，有些需求用play很容易做到，有些需求用OpenXava。

有人这样做吗？我该怎么做？说说我们的经历吧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:42:36.783

我认为这并不容易，因为 OpenXava 基于 Servlets，我假设 Sessions。Play 是无状态的，不要使用 servlet api。Play2 只能部署在 servlet3.0 上的 war-file 中，play 1.2 可以部署为 servlet 2.0-container 上的 war。目前尚不清楚您可以轻松地使用 openxava 做什么以及使用 play 做什么，但是一种方法可以运行 2 个应用程序。Play 是无状态的，因此您可以使用 url 轻松解决操作。所以至少从openxava切换到play应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:19:39.297

我对 Play 了解不多，但如果您可以以战争格式部署您的 play 应用程序，只需将您的 play 应用程序与 OpenXava 合并即可。

# liferay-6 - Liferay，ServiceBuilder，属性userId，companyId，userId的范围是什么

> ID：15115402
> 
> 赞同：0
> 
> 时间：2013-02-27T15:04:12.040
> 
> 标签：liferay-6, liferay-ide

虽然我已经使用 Liferay ServiceBuilder 开发了一些服务，但我不太确定我是否理解使用属性的意义：

1.  用户身份
2.  公司编号
3.  groupId 请注意，这些属性可通过 PortalRequest 获得。

按照基本[教程](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/service-build-2)，您将被指示为每个实体创建这些属性，并注意在“添加”功能上设置它们。但是考虑到这一点，我从未见过任何教程或参考代码将这些属性用于数据检索（Finder 方法、动态查询或自定义查询）

那么保留这些信息有什么意义呢？

1.  这些属性是否在某种约定或范围内以某种方式自动使用？比如，Liferay 的默认查找器在通过 PortalRequest 可用时使用它们？

2.  还是由开发人员在每个 Select 上使用它们，例如，所有单参数查找器在多实例门户上实际上是无用的（因为应该在每个查找器方法上使用 companyId 属性）？

3.  或者，为了数据库可扩展性、审计、索引或其他我完全缺少的东西而保留这种结构只是一个好习惯？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-09T09:17:33.680

当您在登台环境中使用实体时，这些属性是必需的。groupId 指定实体所属的环境。userId 的含义很明显，对于 companyId 它是站点标识符。因此，恕我直言，当您在一个门户上有多个站点时，当您有登台环境时，这些属性非常重要。启用等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:23:32.933

假设您有一个新表，并且您想在表中设置 UserId，那么这是必要的，否则我认为这些属性是不必要的。我创建了服务构建器

```
<entity name="FaoEsalesCustomer" local-service="true" remote-service="false" table="fao_esalecustomer">
    <!-- PK fields -->
    <column name="esaleCustomerId" type="long" primary="true" />
    <!-- Audit fields -->
    <column name="createdBy" type="long" />
    <column name="createdOn" type="Date" />
    <column name="modifiedBy" type="long" />
    <column name="modifiedOn" type="Date" />        
    <!-- Other fields -->
    <column name="customerName" type="String" />
    <column name="address" type="String" />
    <column name="ph" type="Integer" />
    <column name="categoryId" type="long" />
    <column name="categoryName" type="String" />
    <column name="quantity" type="Double" />
    <column name="price" type="Double" />
</entity> 
```

# android - 有没有办法禁用 ActionBar 的显示/隐藏动画？

> ID：15115404
> 
> 赞同：14
> 
> 时间：2013-02-27T15:04:16.547
> 
> 标签：android, android-actionbar

我看过这个问题：

[更改 ActionBar 隐藏动画？](https://stackoverflow.com/questions/6953743/changing-the-actionbar-hide-animation)

但它并没有说明是否可以完全禁用动画。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-07-07T22:10:09.107

你现在可以这样做，

```
getSupportActionBar().setShowHideAnimationEnabled(false); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-07-14T15:12:25.710

我使用以下方法修复：

```
public static void disableShowHideAnimation(ActionBar actionBar) {
    try
    {
        actionBar.getClass().getDeclaredMethod("setShowHideAnimationEnabled", boolean.class).invoke(actionBar, false);
    }
    catch (Exception exception)
    {
        try {
            Field mActionBarField = actionBar.getClass().getSuperclass().getDeclaredField("mActionBar");
            mActionBarField.setAccessible(true);
            Object icsActionBar = mActionBarField.get(actionBar);
            Field mShowHideAnimationEnabledField = icsActionBar.getClass().getDeclaredField("mShowHideAnimationEnabled");
            mShowHideAnimationEnabledField.setAccessible(true);
            mShowHideAnimationEnabledField.set(icsActionBar,false);
            Field mCurrentShowAnimField = icsActionBar.getClass().getDeclaredField("mCurrentShowAnim");
            mCurrentShowAnimField.setAccessible(true);
            mCurrentShowAnimField.set(icsActionBar,null);
        }catch (Exception e){
            //....
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-25T18:26:26.983

如果你使用 ActionBarSherlock 那么你就可以做到。参见 ActionBarImpl 类，它有 setShowHideAnimationEnabled(boolean enabled) 方法。

# android - onStartCommand 与意图操作与绑定服务

> ID：15115407
> 
> 赞同：3
> 
> 时间：2013-02-27T15:04:24.460
> 
> 标签：android, service

如果我与服务交互的方式是单向的（即只调用服务做某事而不询问结果）。这两种方法有什么**区别：**

1.  `startService(intent)` 并`onStartCommand`做任务取决于`intent.getAction`
2.  绑定服务并使用 . 向服务发送消息`Messenger`。以便该服务根据消息执行任务。

这是我能想到的一个区别（我不确定）：
对于方法1，我们每次调用都需要创建服务`startService`，所以重载是我们需要每次都创建服务，除非使用`START_STICKY`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:15:13.040

有几个不同之处，但最重要的是线程管理。

**IntentService** 如果您使用 Intent 服务，onHandleIntent 会在单个守护线程中调用。对 startService 的每个新调用都将显示为对 onHandleIntent 的有序、排队调用。结果是在该守护线程上简单、行为良好、按顺序执行调用。顺便说一句，在队列为空之前，服务不会自行停止：无需“重新创建”

**同一个 App** 中的绑定服务 实际上，绑定服务有两种情况。如果它在您的进程中运行，则该服务将在 UI 线程上运行。如果您需要*从*UI 线程运行的东西，您将必须构建自己的线程（可能是 Looper），因此，使用 Messenger 与它交谈。结果更灵活（线程数、排队顺序等由您决定）但与 IntentService 非常相似。

**另一个应用程序** 中的绑定服务 如果绑定服务属于不同的应用程序，您对它的调用将在多个 Binder 线程之一上运行。您不需要管理这些线程，它们由框架提供。但是，他们可以乱序执行您的调用。

# c# - 使封装 List<> 的对象可通过 [] 运算符访问？

> ID：15115409
> 
> 赞同：4
> 
> 时间：2013-02-27T15:04:25.177
> 
> 标签：c#, list, encapsulation

我有一个我制作的类，它基本上是`List<>`对某种类型的封装。如果它是一个数组，我可以使用`[]`like 访问列表项，但我不知道如何让我的新类从`List<>`. 我尝试搜索此内容，但我很确定我不知道如何正确表达我想要做的事情并且没有发现任何有用的东西。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T15:05:06.720

这称为[**索引器**](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)：

```
public SomeType this[int index] {
    get { }
    set { }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:06:10.747

这称为**[索引器](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)**。

> 索引器允许类或结构的实例像数组一样被索引。索引器类似于属性，只是它们的访问器带有参数。

*   索引器使对象能够以与数组类似的方式被索引。

*   `get`访问器返回一个值。`set`访问器分配一个值。

*   `this`关键字用于定义索引器。

*   `value`关键字用于定义设置索引器分配的值。

这是一个**[示例](http://ideone.com/fzgCY2)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T15:07:27.057

List 已经有 Indexer 的定义，因此无需更改该代码。它会默认工作。

```
 public class MyClass : List<int>
   {

   } 
```

我们可以在这里访问索引器。即使我们还没有实现任何东西

```
MyClass myclass = new MyClass();
myclass.Add(1);
int i = myclass[0]; //Fetching the first value in our list ( 1 ) 
```

*请注意，List 类不是为继承而设计的。你应该封装它，而不是扩展它。–**服务***

这看起来像

```
public class MyClass 
{
    private List<int> _InternalList = new List<int>();

    public int this[int i]
    {
        get { return _InternalList[i]; }
        set { _InternalList[i] = value; }
    }
} 
```

# javascript - 删除 DOM 元素后，jQuery UI datetimepicker 绑定到错误的输入

> ID：15115413
> 
> 赞同：1
> 
> 时间：2013-02-27T15:04:30.777
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-plugins

这是烤每个人的面条的东西。我在网站上有一个表格。你可以看看：[我的网站](http://claygarland.com/calendar). 点击book me，然后在右上角选择一定的天数。使用“-”按钮从表单中手动删除一些表单行。然后尝试使用第一行的第一个输入。它链接到错误的输入。所有输入都有唯一的 ID 属性，我在删除一行后重新绑定 datetimepicker 类。任何人都知道为什么 datetimepicker 指向错误的对象？具有讽刺意味的是，似乎不是来自 jQuery UI 的 timepicker 部分仍然指向正确的输入。似乎当您删除较低编号的行时，较高编号的行会被移动并重命名，但日期时间选择器的日期部分仍指向它最初绑定的行号，如果这有任何意义的话.

感谢您的帮助，因为这让我很困惑。在删除表单行之前，我尝试手动释放 datepicker 对象，但似乎没有任何帮助。

谢谢

编辑：有没有办法在我删除它们之前完全销毁绑定到输入元素的日期选择器实例？

编辑：好吧，我刚刚意识到。我正在删除要删除的行上的日期选择器，但不会破坏剩余的行，因此我将在此工作一分钟，看看在重建表单时是否完全销毁日期选择器有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:19:19.147

没有时间分析所有代码，但在重新绑定*之前*`$(elem).datetimepicker('destroy')`删除控件时可能有助于调用。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:24:25.323

在`setAlts()`

尝试删除`var fields = $('.date').get();`

只是在做：

```
$('.date').each(function() {

    $(this).datetimepicker('destroy'); // From Marcell
    $(this).datetimepicker({
            minDate: now,
            timeFormat: "h:mm tt",
            stepMinute: 15,
        });
}); 
```

如果你删除`dateCheck()`所有应该没问题。

我假设下面是你想要的`dateCheck()`。好的`dateCheck()`

改变：

`target.siblings('.date').datetimepicker('setDate', dateMin);`

到：

`target.next('.date').datetimepicker('minDate', dateMin);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:53:57.177

好吧，所以回答这个问题：回想起来似乎很明显，但是 datetimepicker 插件的编码方式略有不同，而且效率可能较低，这让我偏离了轨道。无论如何，我会尽量以清晰的方式解释发生了什么。

datepicker 对象在创建时绑定到元素的 id，并保留该 id 直到它被销毁。显然，如果已经存在一个 datepicker 对象，那么尝试绑定一个新的 datepicker 对象将无济于事。

为了解决这个问题，在 setAlts() 方法中，我简单地销毁了每个 datepicker 对象，然后重新创建了它。很简单，但这让我很困惑。

感谢您让我走上正确的道路。否则我可能会有一个黑猩猩并开始在墙上涂抹我的便便。*

# iis - 使用相同的端口访问托管在我的 IIS 服务器上的两个站点？

> ID：15115414
> 
> 赞同：1
> 
> 时间：2013-02-27T15:04:36.757
> 
> 标签：iis, iis-7, webserver, hosting, windows-server-2008

我目前在我的 IIS 7 服务器上托管了两个网站。每个网站都有自己的主机名，但共享相同的端口 (80)。

在本地访问这两个站点的一切都**很好：**

**站点 #1：** [http://localhost/](http://localhost/) -> [http://arcadiastudio.ch](http://arcadiastudio.ch)

**站点 #2：** [http ://webService.ch/](http://webService.ch/)

**但是从外部我无法**访问托管在同一端口上的第二个网站。我不知道在 URL 中输入什么：

**站点 #2：** [http](http://arcadiastudio.ch/) ://arcadiastudio.ch/ ??

这是我的主机文件中的内容：

```
127.0.0.1       localhost
127.0.0.1       webService.ch
::1             localhost 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:08:22.683

这应该很简单。您需要做的就是在您的主机文件中指定每个主机名。在您的情况下，您本地 PC 上的主机文件应如下所示：

```
127.0.0.1       localhost
127.0.0.1       webService.ch
::1             localhost
127.0.0.1       arcadiastudio.ch 
```

远程 PC 上的 hosts 文件应如下所示：

```
127.0.0.1       localhost
<remote_ip>     webService.ch
::1             localhost
<remote_ip>     arcadiastudio.ch 
```

显然，您需要更改`<remote_ip>`为您的网络服务器的 IP 地址。

此外，如果您想允许**任何**远程 PC 连接，您将需要为 DNS 注册您的域名 - 您无法编辑世界上的每个主机文件！

# python - 如何根据元组中的值删除列表中的元组？

> ID：15115416
> 
> 赞同：1
> 
> 时间：2013-02-27T15:04:45.393
> 
> 标签：python, list, tuples

我有一个元组列表。我想删除列表中元组中第 2 和第 3 项为`bananas`and的所有项`1`。for 循环不起作用，因为它在遍历列表时会从列表中删除项目。不知道该怎么做？

`my_table = [('apples', 'bananas', 1), ('pears', 'bananas', 1), ('grapes', 'apple', 2), ('apples,' 'pears', 2), ('apples', 'bananas', 2), ('grapes', 'bananas', 2)]`

```
>>> printTable(my_table)
('apples', 'bananas', 1)
('pears', 'bananas', 1)
('grapes', 'apple', 2)
('apples,pears', 2)
('apples', 'bananas', 2)
('grapes', 'bananas', 2)

>>> for item, row in enumerate(my_table):
    if row[1] == 'bananas' and row[2] == 1:
        print item, row

0 ('pears', 'bananas', 1)
5 ('apples', 'bananas', 1)
6 ('grapes', 'bananas', 1)

>>> for item, row in enumerate(my_table):
    if row[1] == 'bananas' and row[2] == 1:
        my_table.remove(row)

>>> printTable(my_table)
('pears', 'bananas', 1)
('grapes', 'apple', 2)
('apples,pears', 2)
('apples', 'bananas', 2) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T15:05:40.573

改用列表推导：

```
my_table = [elem for elem in my_table if elem[1:] != ('bananas', 1)] 
```

这将删除视为过滤作业；通过创建一个新列表来保留不应删除的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:21:01.957

你也可以这样做：

```
filterted_table=filter(lambda t: t[1:]!=('bananas', 1),my_table) 
```

# json - 如何引用 json 节点/子...我如何访问它的字符串值？

> ID：15115417
> 
> 赞同：0
> 
> 时间：2013-02-27T15:04:51.353
> 
> 标签：json, actionscript-3, apache-flex, flash-builder4.5

我使用 youtube api（通过 flash builder / AS3）并使用以下内容成功加载视频数据（标题、描述、id 等）：

```
thistitle = myJSONdata.feed.entry[thiscount].title.$t;
thisdesc = myJSONdata.feed.entry[thiscount].media$group.media$description.$t;
thislink = myJSONdata.feed.entry[thiscount].id.$t;
thisimg = myJSONdata.feed.entry[thiscount].id.$t; 
```

但是在加载缩略图时，它位于：

```
feed
 - entry
   - entry
     - media$group
        -media$thumbnail
          - 0
            -url 
```

我已经尝试了几乎所有我能想到的东西，并且搜索没有特别针对 json 产生任何结果......这是我最后尝试的内容：

```
thisimg = myJSONdata.feed.entry[thiscount].media$group.media$thumbnail.Object(0).url; 
```

如何使用 actionscript 和 flash builder 访问 json 数据的这个特定元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:28:38.370

thisimg = myJSONdata.feed.entry[thiscount].media$group.media$thumbnail[0].url;

# webgl - 让 WebGL 上下文对象成为全局/半全局变量是个坏主意吗？

> ID：15115422
> 
> 赞同：0
> 
> 时间：2013-02-27T15:05:00.590
> 
> 标签：webgl

所以，我的想法是做这样的事情（代码当然是简化的）：

```
var gl;

function Renderer(canvas) {
     gl = this.gl = canvas.getContext('experimental-webgl');
}

function Object() {
}

Object.prototype.render = function() {
    ...
    gl.drawElements(...);
} 
```

变量本身可以放置在`gl`命名空间中以获得更好的一致性，也可以通过将所有代码包装到匿名函数中来进行封装，以确保它不会与任何内容发生冲突。

我可以在这里看到一个明显的权衡：在同一页面上运行多个 WebGL 画布的问题。但我完全没问题。

为什么这样做？因为否则调用任何 WebGL 函数会更痛苦，你必须在这里和那里将渲染器作为参数传递。这实际上是我不喜欢 Three.js 的地方：所有的图形内容都在 Renderer 对象中处理，这使得整个 Renderer 对象变得庞大而复杂。

如果使用全局可见上下文，则不必担心 OpenGL 常量，不必担心渲染器对象的可见性等等。

所以，我的问题是：我应该期待这种方法有什么陷阱吗？当然，除了`gl`变量的潜在空虚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:38:33.123

定义**不好**

许多 WebGL 程序都这样做。OpenGL 默认执行此操作，因为函数在范围内是全局的。在普通的 OpenGL 中，你必须调用`eglMakeCurrent`（或等效的）来切换上下文，这实际上只是隐藏`gl = contextToMakeCurrent`在引擎盖下。

所以，基本上这取决于你。如果您认为有一天您将需要多个 WebGL 上下文，那么最好不要让您的上下文使用全局变量。但是你总是可以回退到`eglMakeCurrent`编码风格。两者都有其优点和缺点。

# jquery - CKEditor 中的可拖动图像

> ID：15115423
> 
> 赞同：2
> 
> 时间：2013-02-27T15:05:04.017
> 
> 标签：jquery, image, iframe, ckeditor, draggable

我有一个问题，我无法在**CKEditor**中制作可拖动的图像。我尝试了很多事情 `$('img').draggable();`，比如超时等等。我无法让图像可拖动。

我还尝试在 iframe 中注入带有文件的`<script>`标签，但控制台中没有错误，也没有工作系统。`.js``$('img').draggable();`

有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T18:36:05.273

您不能在 ckeditor 内的元素上调用 javascript，因为它位于 iframe 内。您必须为 ckeditor 创建或查找插件。

# php - PHP while 循环中的 MySQL Count 仅返回一个结果，然后返回 Null

> ID：15115428
> 
> 赞同：0
> 
> 时间：2013-02-27T15:05:26.300
> 
> 标签：php, mysql

好的，所以我有一些 MySQL 表如下：

```
Buildings
Building-ID    Building-Name
===========----=============
1              Building-1
2              Building-2
3              Building-3
4              Building-4

Building-1
Mroom    State
=====----======
1        Booked
2        Empty
3        Empty
4        Empty

Building-2
Mroom    State
=====----======
1        Booked
2        Empty
3        Empty
4        Empty 
```

PHP中的查询如下（忽略硬编码，我已经简化了代码）：

```
$sql = "select * from Buildings";
$result = mysql_query ($sql) or die(mysql_error());
while ($row = mysql_fetch_array($result)) 
{ 
$building[] = $row['ward_name'];
}    

$v1 = 0;
while ($v1 < 4)
{
$sql = "SELECT COUNT(*) FROM `$building[$v1]` WHERE state = 'Empty'";
$result = mysql_query($sql) or die(mysql_error());
$count = mysql_result($result, 00);

var_dump($count[$v1]);
$v1 = $v1 + 1;
} 
```

以我的想法，这应该创建一个包含在“建筑物”表中的建筑物数组，启动一个循环，从数组中加载建筑物名称并为表中包含多少行包含“空”的行数提供“空”状态栏。它实际上所做的是为第一个表提供计数，然后为其余表提供“NULL”。

我很感激你能给我的任何帮助。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:21:38.813

改变你的数据模型怎么样？

表格可以保持原样：

```
Buildings
Building-ID    Building-Name
===========----=============
1              Building-1
2              Building-2
3              Building-3
4              Building-4 
```

新表：

```
Rooms
Building-ID Mroom State
===========-=====-=====
1           1     1
1           2     0
2           1     0 
```

状态 0 = 空，状态 1 = 已预订

然后使用 group by 加入：

```
select count(*) from buildings b inner join rooms r on r.bid = b.id where r.state = 0 group by b.id; 
```

然后，您将获得每栋建筑物的空房间数。您不需要为每个建筑物提供一张桌子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:11:09.017

这没有意义：

```
$count = mysql_result($result, 00);

var_dump($count[$v1]); 
```

你的意思是写：

```
$count[$v1] = mysql_result($result, 00);

var_dump($count[$v1]); 
```

也不要使用名称与其他表的列匹配的多个表。您可以使用一个具有跨两列的主键的表，例如在 ($buildingid,$roomid) 上创建主键，以便该表具有 $buildingid、$roomid 和 $state 列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:13:54.837

mysql_result() 返回一个字符串，而不是一个数组。修改代码并检查它现在是否按预期工作。

```
var_dump($count); 
```

# ios - NSAttributedString 对自动调整异常无效

> ID：15115433
> 
> 赞同：0
> 
> 时间：2013-02-27T15:05:43.973
> 
> 标签：ios, xcode, ios6, xcode4.2

我正在尝试使用`NSAttributed`String 在 中显示`UILabel`，并且我使用自动换行作为换行模式。但是当我运行应用程序时，它会抛出异常“ `NSAttributedString invalid for autoresizing, it must have a single spanning paragraph style (or none) with a non-wrapping lineBreakMode.`”

有人可以建议我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-18T17:06:30.737

要修复，请设置：

```
[yourLabel setAdjustsFontSizeToFitWidth:NO]; 
```

只要确保您以后不要在代码中覆盖它；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-18T08:57:09.090

对于看到这个问题的其他人。帮助我的是禁用调整`UILabel`文本的大小。在我的代码中，我有这个：

```
[myLabel setAdjustsLetterSpacingToFitWidth:YES];
[myLabel setAdjustsFontSizeToFitWidth:YES];
[myLabel setMinimumScaleFactor:15.0/myLabel.font.pointSize]; 
```

删除它并开始工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:39:36.590

我假设您使用的`NSMutableAttributedString`方式错误，它应该如下使用，

```
NSMutableDictionary *a = [[NSMutableDictionary alloc] init];
[a setObject:[NSNumber numberWithInt:1] forKey:NSStrikethroughStyleAttributeName]; 
NSMutableAttributedString *b = [[NSMutableAttributedString alloc] initWithString:@"abcd" attributes:a]; 
self.label.attributedText = b; 
```

在尝试了上面的代码之后，你应该得到 UILabel 输出，就像我在图像中显示的那样![在此处输入图像描述](../Images/43320d9c3fc090f272eaa382e7a5b401.png)

但是如果你想单独设置属性，那么你应该这样做

```
[b addAttribute:ATTRIBUTENAME value:VALUE range:RANGE]; 
```

例如设置背景颜色的属性

```
[str addAttribute:NSBackgroundColorAttributeName value:[UIColor yellowColor] range:NSMakeRange(2,4)]; 
```

# php - set_time_limit 不起作用

> ID：15115435
> 
> 赞同：5
> 
> 时间：2013-02-27T15:05:55.533
> 
> 标签：php, performance, time-limiting

我`bigint`在 php 中有一个类，用于计算大数字。它运作良好，除了时间限制。

我设置了时间限制

```
set_time_limit(900); 
```

在我的 bigint.php 文件中，它在 localhost 中工作。但是在我的虚拟主机中，当我尝试计算 999^999 时，它会产生错误

> 致命错误：第 156 行 /home/vhosts/mysite.com/http/bigint/bigint.php 中的最大执行时间超过 10 秒

这是我的代码：

```
public function Multiply_Digit($digit){ //class function of bigint
if($digit==0){$this->str="0";}
else
{
$len=$this->length();
$Result = new bigint("0");
                $carry=0;
                $current;
/*line 156:*/   for ($i = 0; $i < $len; $i++)
                {
                    $current = $this->str[$len-$i-1] * $digit;                    
                    if ($i == 0) { $Result->str = ""+(($current + $carry) % 10); }
                    else{ $Result->str .= ""+(($current + $carry) % 10); }                                        
                    $carry = (($current+$carry) - ($current+$carry)%10)/10;
                }
                $Result->str .= ""+$carry;                
                $Result->str = strrev($Result->str);
                $Result->TrimLeadingZeros();                
                $this->str = $Result->str;//sacma oldu.
                }//else. digit not zero
}//Multiply_Digit() 
```

我尝试同时放入`set_time_limit(900);`php 文件的开头和类的构造函数，但都没有工作。

我以为是会话问题，关闭浏览器并重新打开页面，仍然需要 10 秒作为时间限制。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:08:26.337

“当PHP在安全模式下运行时，此功能无效。除了关闭安全模式或更改php.ini中的时间限制外，没有其他解决方法。” - [http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

核实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:08:14.350

可能您的 apache 配置为在 10 秒后停止执行，您的*php.ini*是否有以下行：

```
max_execution_time = 10 
```

如果是这样，禁用超时（**不推荐**）将其更改为：

```
max_execution_time = 0 
```

或您选择的任何整数限制：

```
set_time_limit(360); 
```

您可以在[php 手册](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)中阅读更多内容。通常，将其设置为 0 不是一个好主意，因为例如，如果等待不存在的资源，服务器进程可能会卡住。

**更新**

如果该站点是托管的，则取决于托管公司，请询问他们是否可能。

另一种解决方法是使用 ajax 调用，让客户端而不是服务器等待

# string - Lua: %b 带修饰符

> ID：15115438
> 
> 赞同：0
> 
> 时间：2013-02-27T15:06:07.610
> 
> 标签：string, lua, pattern-matching, string-parsing

我正在尝试匹配包含 Lua 代码的字符串。

```
a = [[workspace.Object["Child"]:remove()]] 
```

为此，我正在尝试创建一个选项，无论它们的顺序是什么或它们有多少，都可以匹配`.x`或匹配。`['x']`

我遇到了几个问题：

*   如何在括号之间匹配多个组合字符/模式？`[abc]`匹配`a`or`b`或`c`，但不匹配`abc`。
*   如何添加修饰符`%b[]`？前任。`%b[]+`匹配`['x']['x']['x']`
*   如果我可以匹配类似的东西`%[.-%] *`，那将是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:21:38.310

Lua 不完全支持正则表达式。
但是您可以使用中间字符串逐步完成任务。

```
local str0 = [[workspace.Object["Child"]['xx'][5].xxx:remove()]]
local str = str0
   :gsub('%b[]',
      function(s)
         return s:gsub('^%[%s*([\'"]?)(.*)%1%s*%]$','{%2}')
      end
   )
   :gsub('[%.:]%s*([%w_]+)','{%1}')

print(str0)
print(str)
print()
for w in str:gmatch'{(.-)}' do
   print(w)
end

---------------------------
-- output
---------------------------
workspace.Object["Child"]['xx'][5].xxx:remove()
workspace{Object}{Child}{xx}{5}{xxx}{remove}()

Object
Child
xx
5
xxx
remove 
```

* * *

**编辑 ：**

```
local str0 = [[workspace.Object["Child"]['xx'][5][ [=[xxx]=] ]:remove()]]
local str = str0
   :gsub('%b[]',
      function(s)
         return s:gsub('^%[%s*([\'"]?).*%1%s*%]$','{%0}')
      end
   )
   :gsub('%.%s*[%w_]+','{%0}')
   :gsub(':%s*[%w_]+%s*([\'"]).-%1','{%0}')
   :gsub(':%s*[%w_]+%s*%b()','{%0}')
   :gsub('{(:%s*remove%s*%(%s*%))}','%1')
   :gsub('}%s*{', '')
   :gsub('([%w_]+)%s*(%b{})%s*:%s*remove%s*%(%s*%)',
      function(s1, s2)
         return 'removefilter('..s1..s2:match'^{(.*)}$'..')'
      end
   )
   :gsub('([%w_]+)%s*:%s*remove%s*%(%s*%)','removefilter(%1)')
   :gsub('[{}]', '')

print(str0)
print(str)

---------------------------
-- output
---------------------------
workspace.Object["Child"]['xx'][5][ [=[xxx]=] ]:remove()
removefilter(workspace.Object["Child"]['xx'][5][ [=[xxx]=] ]) 
```

# java - 无法在日历类java中设置时间

> ID：15115439
> 
> 赞同：1
> 
> 时间：2013-02-27T15:06:10.250
> 
> 标签：java, calendar

嗨，下面是我的代码。

```
public class DateSample {

public static void main(String as[]){
    Calendar c = Calendar.getInstance();
    System.out.println("Curr : "+ c.getTime());
    c.add(Calendar.DATE, -1);
    c.set(Calendar.HOUR, 23);
    c.set(Calendar.MINUTE, 59);
    c.set(Calendar.SECOND, 59);
    c.set(Calendar.MILLISECOND, 0);
    System.out.println("aftr : "+c.getTime());
}
} 
```

输出是：

课程：2013 年 2 月 27 日星期三 15:02:44 CET

之后：2013 年 2 月 27 日星期三 11:59:59 CET

我想要的输出是 2013 年 2 月 26 日星期三 23:59:59 CET。但为什么会出现这种混乱？请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T15:07:13.377

使用[**Calendar.HOUR_OF_DAY**](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#HOUR_OF_DAY)

> get 和 set 的字段编号，指示一天中的小时。HOUR_OF_DAY 用于 24 小时制。例如，在晚上 10:04:15.250，HOUR_OF_DAY 是 22。

```
 c.set(Calendar.HOUR_OF_DAY, 23); 
```

# c# - IPv6 IP 地址的字节数组大小

> ID：15115463
> 
> 赞同：0
> 
> 时间：2013-02-27T15:07:17.547
> 
> 标签：c#, byte, ipv6

我正在编写一个应用程序来存储请求来自的 IP 地址。这些 IP 地址将作为 a 存储`varbinary(16)`在我的数据库中。很明显，a`varbinary(16)`的大小不合适。目前，我正在使用以下代码将请求的 IP 地址转换为 byte[];

```
HttpRequestMessage request = GetRequestMessage();

string ipAddress = string.Empty;
if (request.Properties.ContainsKey("MS_HttpContext"))
{
  ipAddress = ((HttpContextWrapper)request.Properties["MS_HttpContext"]).Request.UserHostAddress;
}
else if (request.Properties.ContainsKey(RemoteEndpointMessageProperty.Name))
{
  RemoteEndpointMessageProperty property = (RemoteEndpointMessageProperty)request.Properties[RemoteEndpointMessageProperty.Name];
  ipAddress = property.Address;
}

byte[] bytes = new byte[ipAddress.Length * sizeof(char)];
System.Buffer.BlockCopy(ipAddress.ToCharArray(), 0, bytes, 0, bytes.Length);

// What is the maximum size of bytes? 
```

我注意到字节的长度为 26。我的问题是，如果我需要支持 IPv6 地址，字节的最大大小是多少？我需要知道将我的大小更改为`varbinary(16)`适当的长度。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:11:31.270

IPv6 地址空间为 128 位。因此，任何 IPv6 地址都可以用 16 个字节表示。因此，varbinary(16) 是正确的。

但是，相对而言，您提取字节的方式很奇怪。

请参阅[IPAddress.GetAddressBytes()的文档](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.getaddressbytes.aspx)

（看起来您可能还需要[IPAddress.Parse()](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.parse.aspx)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T15:12:36.657

```
byte[] bytes = new byte[ipAddress.Length * sizeof(char)]; 
```

这看起来像是 C 程序员写的东西，你不需要做任何这些。

你所需要的只是`ipAddress.GetAddressBytes()`把它推到一个`binary(16)`

附带说明一下，您还可以使用 a`uniqueidentifier`来存储 IPv6 地址，因为它们的长度相同。这些比搜索快得多`varbinary`

# c++ - 如何绑定传递未指定调用包装器的成员函数模板

> ID：15115468
> 
> 赞同：7
> 
> 时间：2013-02-27T15:07:29.880
> 
> 标签：c++, c++11, stdbind

我尝试使用 VC11 和 g++ 4.7.2 编译以下示例：

```
#include <functional>

class X {
public:
  template <typename T>
  explicit X(T t)
  {
    std::bind(&X::invoke<T>, this, t)();
  }
private:
  template <typename T>
  void invoke(T t)
  {
    t();
  }
};

class Y {
  public:
    void foo() {
      //...
    }
};

int main() {
  Y y;
  X x(std::bind(&Y::foo, &y));
  return 0;
} 
```

但它以错误结束。我不确定粘贴整个编译器输出是否合理，但通常

vc11 说：

> 错误 C2664: 'void std::_Pmf_wrap::operator ()(_Farg0 &,_V0_t) const' : 无法将参数 3 从 'void' 转换为 'std::_Bind,Y *,std::_Nil,std::_Nil ,std::_Nil,std::_Nil,std::_Nil,std::_Nil>' c:\program files (x86)\microsoft visual studio 11.0\vc\include\functional 1152 1 ConsoleApplication1 (Microsoft Visual C++ Compiler Nov 2012 CTP)

和 g++：

> 编译完成但出现错误：
> source.cpp: In instance of 'X::X(T) [with T = std::_Bind(Y*)>]':
> source.cpp:28:33: required from here
> source.cpp :8:9: 错误：不匹配调用 '(std::_Bind_helper(Y*)>), X* const, std::_Bind(Y*)>&>::type {aka std::_Bind( Y*)>)>(X*, std::_Bind(Y*)>)>}) ()'

有没有办法解决这个问题。保存主要思想对我来说非常重要——一个可以用任何可调用对象（函数对象、函数指针或函数返回的调用包装器`std::bind()`）实例化的类。

如果有人帮助，我将不胜感激。

PS如果我创建一个实例`X`，传递函数对象或函数指针，它就会编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:30:11.473

`boost::bind`我认为他们在采用它时省略了一个重要的部分`std::bind`，即`boost::protect()`。您的代码可以固定如下：

```
#include <boost/bind/protect.hpp>
// ...
X x(boost::protect(std::bind(&Y::foo, &y))); 
```

或者，或者：

```
template <typename T>
explicit X(T t)
{
    auto tt = boost::protect(t);
    auto f = std::bind(&X::invoke<decltype(tt)>, this, tt);
    f();
} 
```

见[http://www.boost.org/doc/libs/1_53_0/libs/bind/bind.html](http://www.boost.org/doc/libs/1_53_0/libs/bind/bind.html)

> 尽管默认情况下第一个参数不被评估，但所有其他参数都是。有时不必计算第一个参数之后的参数，即使它们是嵌套的绑定子表达式。这可以借助另一个函数对象protect来实现，它掩盖了类型，使bind无法识别和评估它。调用时，protect 只是将参数列表转发给未修改的其他函数对象。
> 
> 头文件 boost/bind/protect.hpp 包含保护的实现。要保护绑定函数对象免于评估，请使用protect(bind(f, ...))。

* * *

Scott Meyers即将出版的[Effective C++11: Content and Status](http://scottmeyers.blogspot.co.uk/2013/01/effective-c11-content-and-status.html)将推荐*lambdas 优于 std::bind*。在 C++11 中，您可以简单地执行以下操作：

```
template <typename T>
explicit X(T t)
{
    auto f = [t, this]() { this->invoke(t); };
    f();
}
// ...

X x([&y](){ y.foo(); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:14:13.193

问题的根本原因似乎是由 执行其参数的内部复制`std::bind`，特别是对`t`.

您可能希望以这种方式解决它：

```
 template <typename T>
  explicit X(T t)
  {
      std::bind(&X::invoke<T>, this, std::placeholders::_1)(t);
      //                             ^^^^^^^^^^^^^^^^^^^^^  ^
  } 
```

这也可以，但是不允许您使参数的结果`bind`超过参数`t`（否则，您将传递对 的悬空引用`invoke<T>()`）：

```
 template <typename T>
  explicit X(T t)
  {
      std::bind(&X::invoke<T>, this, cref(t))();
      //                             ^^^^^^^
  } 
```

* * *

**更新：**

*上述解决方案是有助于实现您在示例中显示的内容的解决方法。但是，从评论中可以看出，您的用例可能完全不同（例如，传递结果以`bind`供以后评估）。*

[正如Maxim Yegorushkin](https://stackoverflow.com/users/412080/maxim-yegorushkin)在他的回答中正确指出的那样，概念上正确的解决方案包括使用诸如 Boost's 之类的构造`protect`。

如果您不想使用 Boost，`protect()`使用 C++11 的可变参数模板定义自己的函数非常容易：

```
// Imitates boost::protect, but with variadic templates and perfect forwarding
namespace detail
{
    template<typename F>
    struct protect
    {
    private:

        F _f;

    public:

        explicit protect(F f): _f(f)
        {
        }

        template<typename... Ts>
        auto operator () (Ts&&... args) -> 
            decltype(_f(std::forward<Ts>(args)...))
        {
            return _f(std::forward<Ts>(args)...);
        }
    };
}

template<typename F>
detail::protect<F> protect(F&& f)
{
    return detail::protect<F>(std::forward<F>(f));
} 
```

最终，这就是你可以在课堂上使用它的方式，正如 Maxim 建议的那样：

```
class X
{
public:
    template <typename T>
    explicit X(T t)
    {
        auto pt = protect(t);
        std::bind(&X::invoke<decltype(pt)>, this, pt)();
    }
private:
    template <typename T>
    void invoke(T t)
    {
        t();
    }
}; 
```

# mysql - MySQL从多个组标准中提取平均数据

> ID：15115475
> 
> 赞同：0
> 
> 时间：2013-02-27T15:07:48.217
> 
> 标签：mysql, mysql-workbench

为文字墙道歉，最后的例子解释了我的问题。任何帮助表示赞赏，谢谢！

我有一个表格，其中包含来自其他值电压和电流的几列数据。

当有电流流动时，每秒都会记录这些实例。我想从这些值计算一个近似值`kJ`和。`kW`

基本上我有一张表，**`instances`**其中包含：

*   `instanceID`,
*   `location`,
*   `current`,
*   `voltage`,
*   `time`.

另一个，**`sets`**，包含：

*   `instanceID`,
*   `setID`.

`instanceID`相同，`instanceID`in 实例是指向集合的 FK 。对于实例中的每个位置，大约有 23 行（变化）。有30个地点。所以我有 23 行，其中实例的位置 1，另外 23 行用于位置 2 的同一实例，依此类推。时间是采集测量数据的记录时间（因此，如果所有 23 个实例之间的差异为 1 秒，则第一次和最后一次之间的差异为 23 秒）。

我需要计算平均值`kW`和总数`kJ`（近似值）。

我所做的如下：

```
SELECT instances.instanceID, location, current, 
       voltage, current * voltage AS kW, 
       COUNT(IF(current > 0 AND voltage > 0, 
                instances.instanceID, 
                0)) AS InstancedTime
FROM instances
INNER JOIN sets ON instances.instanceID = sets.instanceID
WHERE sets.setID = arbitrary_number; 
```

问题出现了，我得到下表：

`instanceID, location, current, voltage, kW, InstancedTime`

这`kW`是来自 23 个集合之一的随机数，这很好，因为它无论如何都是一个近似值，但是当我只希望查询计算每个位置的实例时，它`COUNT(IF())`正在计算实例表中的*所有实例。*

我试过了`MAX(CAST(time AS SIGNED)) - MIN(CAST(time AS SIGNED))`，但这需要从*最后一个*位置减去第一个位置的最短时间*的*最大时间，我想一次将它隔离到一个位置。

我想要做的是得到总数量，`kJ`即它有功率的时间乘以那个时间的千瓦。由于我知道实例之间的时间始终为 1 秒，因此计算各个位置的实例数并将其乘以 就足够了`kW`，但是我想对一组中的所有实例执行此*操作*。可以通过对所有单个实例使用单个查询来替换该集合，但这需要很长时间。

我正在尝试一张看起来像的桌子

```
instanceID, location, current, voltage, kW, InstancedTime
1, 1, 500V, 2A, 1kW, 1s
1, 1, 500V, 2A, 1kw, 1s
1, 2, 400V, 3A, 1.2kW, 1s
1, 2, 400V, 3A, 1.2kW, 1s
2, 1, 700V, 2A, 1.4kW, 1s
2, 1, 700V, 2A, 1.4kw, 1s
2, 2, 300V, 3A, 0.9kW, 1s
2, 2, 300V, 3A, 0.9kW, 1s 
```

并添加`kJ`将总结 ID 1 已在位置 1 和位置 2 中的实例数，对 ID 2 执行相同操作并将所有这些都显示在一个表格中，如下所示：

```
instanceID, location, current, voltage, kW, SumInstancedTime, kJ
1, 1, 500V, 2A, 1kW, 2s, 2kJ
1, 2, 400V, 3A, 1.2kW, 2s, 2.4kJ
2, 1, 700V, 2A, 1.4kW, 2s, 2.8kJ
2, 2, 300V, 3A, 0.9kW, 2s, 1.8kJ 
```

感谢您的宝贵时间，感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:20:33.920

我现在无法测试我的答案，但听起来你需要的是一个 GROUP BY：

以下查询是一个示例，它对每组实例/位置的电流和电压进行平均，然后计算值

```
SELECT instances.instanceID, location, AVG(current) as avg_current, 
       AVG(voltage) as avg_voltage, AVG(current) * AVG(voltage) AS kW, 
       COUNT(IF(current > 0 AND voltage > 0, 
                instances.instanceID, 
                0)) AS InstancedTime
FROM instances
INNER JOIN sets ON instances.instanceID = sets.instanceID
WHERE sets.setID = arbitrary_number;
GROUP BY instances.instanceID, location 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:21:58.670

这是您尝试对表中的连续行进行分组的示例。在您的示例中，它们没有交错，但我假设它们可以。您需要将具有相同 instanceID 和位置的所有内容分配给同一组。

我的方法是找到下一个更高的实例/位置对，并将其分配为组标识符。我使用子查询来做到这一点。一旦我有了这个标识符，我就会总结每个组：

```
select i.instanceId, i.location, i.current, i.volate, i.kw, COUNT(*) as SumTime,
       SUM(kw) as KJ
from (select i.*,
             (select concat(i2.instanceId, ',', i2.location)
              from instances i2
              where i2.instanceId > i.instanceId or (i2.instanceId = i.instanceId and i2.location > i.location)
              order by i2.instanceId desc, i2.locationId desc
              limit 1
             ) as grouping
      from instances i
     ) i
group by grouping 
```

# c - 使用 getcontext/setcontext 向上/向下切换堆栈

> ID：15115480
> 
> 赞同：6
> 
> 时间：2013-02-27T15:08:12.547
> 
> 标签：c, ucontext

我试图了解 getcontext/setcontext 在特定情况下是否可以正常工作。

我可以看到如何使用 setcontext() 将堆栈展开回历史中的某个位置。

```
#include <stdio.h>
#include <ucontext.h>

int  rollback = 0;
ucontext_t context;

void func(void)
{
    setcontext(cp);
}

int main(void)
{
    getcontext(&context);
    if (rollback == 0)
    {
        printf("getcontext has been called\n");
        rollback++;
        func();
    }
    else
    {
        printf("setcontext has been called\n");
    }
} 
```

但我想知道放松后是否可以重新回到未来的某个地方？我想这取决于`getcontext()`调用捕获堆栈的副本，​​我在文档中找不到确切的详细信息。

```
#include <stdio.h>
#include <ucontext.h>

int  rollback     = 0;
int  backToFuture = 0;
ucontext_t context;
ucontext_t futureContext;

void func(void)
{
    // Some complex calc
    if (some-condition)
    {
        getcontext(&futureContext);  // After returning I want to come back
                                     // here to carry on with my work.
        if (backToFuture == 0)
        {
            setcontext(&context);  // rewind to get stuff-done
        }
    }
    // Finishe work
}

int main(void)
{
    getcontext(&context);
    if (rollback == 0)
    {
        printf("getcontext has been called\n");
        rollback++;
        func();

        // eventually always return here.
    }
    else
    {
        printf("setcontext has been called\n");
        // Do specialized work that needed to be done
        // May involve function calls.
        // 
        // I worry that anything the adds new stack frames
        // will disrupt the saved state of futureContext
        //
        // But without detailed information I can not be sure
        // if this is an allowed senario.
        backToFuture = 1;
        setcontext(&futureContext);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T02:48:01.343

`getcontext`不复制堆栈，它只转储寄存器（包括堆栈指针）和一些上下文数据，如信号掩码等。

当您跳下堆栈时，它会使顶部上下文无效。即使您不会进行任何函数调用，也要考虑可以在那里执行的信号处理程序。如果你想在两个堆栈之间跳转，你需要`makecontext`.

我添加了表明您的代码无效的变量：

```
void func(void)
{
    // Some complex calc
    if (1)
    {
        volatile int neverChange = 1;
        getcontext(&futureContext);  // After returning I want to come back
                                     // here to carry on with my work.
        printf("neverchange = %d\n", neverChange);
        if (backToFuture == 0)
        {
            setcontext(&context);  // rewind to get stuff-done
        }
    }
    // Finishe work
} 
```

在我的机器上，它导致：

```
getcontext has been called
neverchange = 1
setcontext has been called
neverchange = 32767 
```

# ruby-on-rails - Rails嵌套模型表单错误的html id

> ID：15115492
> 
> 赞同：1
> 
> 时间：2013-02-27T15:09:02.880
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, erb

我有一个有很多插槽的封面模型。我在[#196 Railcast](http://railscasts.com/episodes/196-nested-model-form-part-1)和[#197 Railcast](http://railscasts.com/episodes/197-nested-model-form-part-2)之后创建了一个表单。该表单可以很好地创建，但是当我想更新封面（特别是子插槽）时，它不会更新。问题似乎是插槽字段的 html name 属性不包含正确的 ID，相反，它们似乎总是从插槽的 0 开始并增加。以下是相关代码：

_form.html.erb：

```
<%= form_for(@cover) do |f| %>
    ...
    <%= f.fields_for :slots do |builder| %>
        <%= render "slot_fields", :f => builder %>
    <% end %>
    ...
<% end %> 
```

_slot_fields.html.erb：

```
<div class="fields">
<p>
  <div class="field">
    <%= f.label :width %>
    <%= f.number_field :width %>
  </div>
... 
```

输出html：

```
<p>
  <div class="field">
    <label for="cover_slots_attributes_0_width">Width</label>
    <input id="cover_slots_attributes_0_width" name="cover[slots_attributes][0][width]" type="number" value="50" />
  </div> 
```

但是插槽 ID 为 3

提前致谢

# android - 让用户裁剪图像

> ID：15115498
> 
> 赞同：7
> 
> 时间：2013-02-27T15:09:13.287
> 
> 标签：android, android-intent, crop

我很难弄清楚如何让用户裁剪图片。我想给带有加载位图的位图变量以在将图片设置为墙纸之前对其进行裁剪。但我没有这样做......这是我试过的。

第一个版本。= 按预期工作，但返回的图像分辨率很差。将输出更改为更高的值无济于事。正如我在一些帖子中看到的那样，不建议使用相机，因为并非所有设备都支持这一点。

```
Intent intent = new Intent("com.android.camera.action.CROP");  
String path = Images.Media.insertImage(context.getContentResolver(), loaded,null, null);
Uri uri = Uri.parse(path);              
intent.setData(uri);  
intent.putExtra("crop", "true");  
intent.putExtra("aspectX", 1);  
intent.putExtra("aspectY", 1);  
intent.putExtra("outputX", 300);  
intent.putExtra("outputY", 300);  
intent.putExtra("noFaceDetection", true);  
intent.putExtra("return-data", true);                                  
startActivityForResult(intent, 2); 
```

第二。加载图像选择器，然后裁剪。如何配置它以直接在我的图像上加载裁剪？就像在版本 1 中一样

```
Intent photoPickerIntent = new Intent(MediaStore.ACTION_PICK);
photoPickerIntent.setData(uri);
photoPickerIntent.putExtra("crop", "true");
photoPickerIntent.putExtra(MediaStore.EXTRA_OUTPUT, uri);
photoPickerIntent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
startActivityForResult(photoPickerIntent, 2); 
```

和 onActivity 结果

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode != RESULT_OK) { return; }
    if(requestCode == 2) {
        Bundle extras = data.getExtras();  
        if(extras != null ) {  
            Bitmap photo = extras.getParcelable("data");  
            loaded = photo;
        }
        WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplicationContext());

        try {
            myWallpaperManager.setBitmap(loaded);
        } catch (IOException e) {}
    }
} 
```

我不知道这些是完成这项工作的正确方法，但我希望有人能指出我正确的方向。哪个，为什么以及如何使用。

**更新：**我仍在等待有人指出如何正确地做到这一点，下面的答案是有效的，但返回的图像分辨率很差，所以它们不是使用的选项

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T05:12:15.917

好的，亲爱的，我把裁剪图像的整个代码放在 Android 中。这是全局变量。

```
 //This For Image Crop
        /**
         *  Uri for set image crop option .
         */
        private Uri mImageCaptureUri;
        /**
         *  int for set key and get key from result activity . 
         */
        public final int CROP_FROM_CAMERA = 0;

/**
     * Bitmap for apply Crop Operation Result.
     */
    private Bitmap _tempOpration;

    //This is Crop Method.

/**
     * Method for apply Crop .
     * @param filePath -  String path of file .
     */
    private void doCrop(String filePath){
        try{
            //New Flow
            mImageCaptureUri = Uri.fromFile(new File(filePath));

            final ArrayList<CropOption> cropOptions = new ArrayList<CropOption>();
            Intent intent = new Intent("com.android.camera.action.CROP");
            intent.setType("image/*");
            List<ResolveInfo> list = getPackageManager().queryIntentActivities( intent, 0 );

            int size = list.size();
            if (size == 0) 
            {           
                Toast.makeText(this, "Can not find image crop app", Toast.LENGTH_SHORT).show();
                return;
            }
            else 
            {
                intent.setData(mImageCaptureUri);
                intent.putExtra("outputX", 300);
                intent.putExtra("outputY", 300);
                intent.putExtra("aspectX", 1);
                intent.putExtra("aspectY", 1);
                intent.putExtra("scale", true);
                intent.putExtra("return-data", true);

                if (size == 1) 
                {
                    Intent i = new Intent(intent);
                    ResolveInfo res = list.get(0);
                    i.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
                    startActivityForResult(i, CROP_FROM_CAMERA);
                }

                else
                {
                    for (ResolveInfo res : list) 
                    {
                        final CropOption co = new CropOption();
                        co.title = getPackageManager().getApplicationLabel(res.activityInfo.applicationInfo);
                        co.icon = getPackageManager().getApplicationIcon(res.activityInfo.applicationInfo);
                        co.appIntent= new Intent(intent);
                        co.appIntent.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
                        cropOptions.add(co);
                    }

                    CropOptionAdapter adapter = new CropOptionAdapter(getApplicationContext(), cropOptions);
                    AlertDialog.Builder builder = new AlertDialog.Builder(this);
                    builder.setTitle("Choose Crop App");
                    builder.setAdapter( adapter, new DialogInterface.OnClickListener()
                    {
                        public void onClick( DialogInterface dialog, int item )
                        {
                            startActivityForResult( cropOptions.get(item).appIntent, CROP_FROM_CAMERA);
                        }
                    });

                    builder.setOnCancelListener( new DialogInterface.OnCancelListener() 
                    {
                        public void onCancel( DialogInterface dialog ) 
                        {
                            if (mImageCaptureUri != null ) 
                            {
                                getContentResolver().delete(mImageCaptureUri, null, null );
                                mImageCaptureUri = null;
                            }
                        }
                    } );
                    AlertDialog alert = builder.create();
                    alert.show();
                }
            }
        }
        catch (Exception ex) 
        {
            genHelper.showErrorLog("Error in Crop Function-->"+ex.toString());
        }
    } 
```

**这是另一个用于在应用程序中查找作物活动意图的类。**

**裁剪选项类。**

```
public class CropOption 
{
    public CharSequence title;
    public Drawable icon;
    public Intent appIntent;
} 
```

这是用于显示列表。

**裁剪选项适配器**

```
public class CropOptionAdapter extends ArrayAdapter<CropOption> 
{
    private ArrayList<CropOption> mOptions;
    private LayoutInflater mInflater;

    public CropOptionAdapter(Context context, ArrayList<CropOption> options) 
    {
        super(context, R.layout.crop_selector, options);

        mOptions    = options;

        mInflater   = LayoutInflater.from(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup group)
    {
        if (convertView == null)
            convertView = mInflater.inflate(R.layout.crop_selector, null);

        CropOption item = mOptions.get(position);

        if (item != null) {
            ((ImageView) convertView.findViewById(R.id.iv_icon)).setImageDrawable(item.icon);
            ((TextView) convertView.findViewById(R.id.tv_name)).setText(item.title);

            return convertView;
        }

        return null;
    }
} 
```

**CropOptionAdapter 的布局文件**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:gravity="center_vertical">

    <ImageView
        android:id="@+id/iv_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <TextView
        android:id="@+id/tv_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""/>
</LinearLayout> 
```

**这是 resultActivity.witch 给出的裁剪图像。**

```
/**
     * @see android.app.Activity#onActivityResult(int, int, android.content.Intent)
     */
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode != RESULT_OK) return;
        switch (requestCode)
        {
        case CROP_FROM_CAMERA:
            if (data == null) 
            {
                genHelper.showToast("No Crop Activity in This");
                return;
            }
            final Bundle extras = data.getExtras();
            if (extras != null) 
            {
                try 
                {

                    _tempOpration=extras.getParcelable("data");
                    imageLayout.setImageBitmap(_tempOpration);
                    _tempOpration=null;

                } 
                catch (Exception e) 
                {
                    e.printStackTrace();
                }
            }
            break;
        }

    } 
```

//做这个类型它在我的实时应用程序上工作。

**genHelper.showToast("这里没有作物活动");**

是我的通用类来帮助显示 toast 消息和错误日志。

最好的运气。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T19:44:27.020

一、变量：

```
final int PIC_CROP = 2;

Uri imageUri;
Bitmap thePic; 
```

在您从相机或图库中拍照之前，将您的图像放入 Uri (imageUri) 中，在 try/catch 中使用此处称为“performCrop()”的方法：

```
 private void performCrop(){
        try {
            Intent intent = new Intent("com.android.camera.action.CROP"); 
            intent.setType("image/*");

            List<ResolveInfo> list = getPackageManager().queryIntentActivities( intent, 0 );
            int size = list.size();

            if (size >= 0) {
                intent.setData(imageUri);        
                intent.putExtra("crop", "false");
                intent.putExtra("aspectX", 1);
                intent.putExtra("aspectY", 1);
                intent.putExtra("outputX", 256);
                intent.putExtra("outputY", 256);
                intent.putExtra("scale", true);  
                intent.putExtra("return-data", true);

                Intent i = new Intent(intent);
                ResolveInfo res = list.get(0);
                i.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));

                startActivityForResult(i, PIC_CROP);  
            } 

        }
        catch(ActivityNotFoundException anfe){
            String errorMessage = "Whoops - your device doesn't support the crop action!";
            Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
            toast.show();
        }
    } 
```

在 onActivityResult 方法上：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {

        if(requestCode == PIC_CROP){

        if (resultCode == RESULT_OK) {
            Bundle extras = intent.getExtras();
            thePic = extras.getParcelable("data");
            imageViewPhoto.setImageBitmap(thePic); //in my case, set the image on screen

        }else{
            //do something
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-24T19:46:39.873

如类似线程中所述，Android 没有官方裁剪意图（[https://commonsware.com/blog/2013/01/23/no-android-does-not-have-crop-intent.html](https://commonsware.com/blog/2013/01/23/no-android-does-not-have-crop-intent.html)），所以我会远离使用“com.android.camera.action.CROP”。

然而，自从这个问题最初发布以来，Android 已经在 Kitkat（19 级）中添加了一个新的 API，它允许用户召唤一个crop-this-image-and-set-as-wallpaper Activity。请参阅 WallpaperManager.getCropAndSetWallpaperIntent()，这可能会解决您最初的问题。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-27T16:09:39.423

我在使用相机时也遇到了问题`ACTION_PICK`，尽管通过的分辨率要大得多，但返回的图像非常小。我解决了这个问题，将生成的裁剪图像存储在一个临时文件中

```
// temporary storage location, preferably in your cache directory
private final String tempFilePath = "somePath";

// URI instantiated with your temporary storage location
private Uri tempuri = Uri.fromFile(new File(tempFilePath));

// code for startActivityForResult
private final static int ACTIVITY_CROP_IMAGE = 1; 
```

并像这样调用意图

```
Intent photoPickerIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
photoPickerIntent.setType("image/*");
photoPickerIntent.putExtra("crop", "true");
photoPickerIntent.putExtra("aspectX", wallpaperWidth);
photoPickerIntent.putExtra("aspectY", wallpaperHeight);
photoPickerIntent.putExtra(MediaStore.EXTRA_OUTPUT, tempuri);
photoPickerIntent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
startActivityForResult(photoPickerIntent, ACTIVITY_CROP_IMAGE); 
```

然后在`onActivityResult`

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    if (resultCode != RESULT_OK) 
        return;

    if(requestCode == ACTIVITY_CROP_IMAGE) 
    {
        try 
        {
            Bitmap bmp = BitmapFactory.decodeFile(tempFilePath);
            if(bmp != null)
            {
                WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplicationContext());
                myWallpaperManager.setBitmap(bmp);
            }
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }
        finally
        {
            if(tempFilePath != null)
            {
                File tempFile = new File(tempFilePath);
                if(tempFile.exists())
                {
                    tempFile.delete();
                }
            }
        }
    }
} 
```

我从头顶构造了上面的代码，实际上并没有编译任何一个。但是基础知识是正确的，您应该掌握窍门；-)

# php - 在使用 PDT 获取和呈现数据方面需要帮助

> ID：15115499
> 
> 赞同：0
> 
> 时间：2013-02-27T15:09:20.153
> 
> 标签：php, loops, foreach

我已经成功地使用 PayPal 和我自己的支付按钮设置了 Sandbo。现在在我的感谢页面上，用户在购买后被重定向，我想将详细信息打印给用户。使用 PDT，我可以发送数据，这正是我访问它以很好地呈现它的方式。

我在 $keyarray 中有数据，这是我 pdt 中的一些 PHP 代码： 截图：[http ://snag.gy/PdsQH.jpg](http://snag.gy/PdsQH.jpg)

```
$firstname = $keyarray['first_name'];
$lastname = $keyarray['last_name'];
$itemname = $keyarray['item_name'];
$amount = $keyarray['payment_gross'];
$id = $keyarray['item_number'];

echo ("<div id='welcomeText'>Thank you for your purchase!</div>");
echo ("<p><div id='bold'>Payment Details</div></p><br>\n");
echo ("<div class='abouttext'>Name: $firstname $lastname</div>\n");

$string1 = 'item_number';
$string2 = 'item_name';
$string3 = 'quantity';
$count = count($keyarray);
for($idx = 1; $idx < $count; $idx ++) {
if (isset($string2) && 'item_name' != null)
echo ("<div class='abouttext'>Item name: ".$keyarray[$string2.$idx]."</div>\n");
echo ("<div class='abouttext'>Item ID: ".$keyarray[$string1.$idx]."</div>\n");
echo ("<div class='abouttext'>Qty: ".$keyarray[$string3.$idx]."</div>\n");

} 
```

问题是它循环了 65 次，因为它太长了。我想改变 $count = count($keyarray); 而是计算 item_number 在 $keyarray 中的次数，例如 $count = count($keyarray['item_number'); - 那可能吗？我也可以硬编码 10 而不是 $count 并让它循环 10 次，结果不会那么糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:17:40.747

注意：如果您可以更改`$keyarray`源代码的内容，那就更好了。

您可以在循环中创建名称：

例如

```
$string = 'item_name';

$arr_val = array(
        'item_name1' => 'Kot1',
        'item_name2' => 'Kot2',
        'item_name3' => 'Kot3',
        'item_name4' => 'Kot4',
        'item_name5' => 'Kot5'
        );

for($idx =1; $idx < 6; $idx ++) {
    var_dump($arr_val[$string.$idx]);
} 
```

这将输出：

> 字符串“Kot1”（长度=4）
> 
> 字符串“Kot2”（长度=4）
> 
> 字符串“Kot3”（长度=4）
> 
> 字符串“Kot4”（长度=4）
> 
> 字符串“Kot5”（长度=4）

编辑：使用下面的代码在`$keyarray`.

```
$array_keys = array_keys($keyarray);
$count =0;
foreach($array_keys as $element) {
    if (!strncmp('item_number', $element, strlen('item_number')))
        $count++;
} 
```

# c - 尝试在 C 中动态分配多维数组会导致崩溃

> ID：15115502
> 
> 赞同：0
> 
> 时间：2013-02-27T15:09:24.010
> 
> 标签：c, arrays, multidimensional-array, dynamic-allocation, contiguous

出于多种原因，我想在连续的内存块中分配多维数组。我可以通过手动分配它们来做到这一点，例如：

```
t.versions=(char***)malloc(sizeof(char**)*4);
t.versions[0]=(char**)malloc(sizeof(char*)*t.size*4);
t.versions[0][0]=(char*)calloc(t.size*t.size*4,sizeof(char));
for (i=1; i<t.size*4; ++i) 
    t.versions[0][i]=t.versions[0][i-1]+t.size;
for (i=1; i<4; ++i) 
    t.versions[i]=t.versions[i-1]+t.size; 
```

除其他好处外，此解决方案还简化了分配内存的释放：

```
void contiguous_array_free(void** ptr, int depth)
{
    int *ptr_d;
    ptr_d=(int*)*ptr;
    if (depth>1)
        contiguous_array_free((void**)ptr_d, depth-1);
    free(ptr);
}
//(elsewhere in the code)
contiguous_array_free((void**)(*tile).versions, 3); 
```

现在，我在*分配*这些数组时遇到了一个小问题——虽然上面发布的方法确实有效，但理想情况下，我希望有一个通用的解决方案，允许我通过单个函数调用来分配这些数组。

但是，我为实现该目标所做的尝试会导致程序在每次使用数组内容时崩溃。

```
//dimension points to a 1-dimensional array of integers
//specifying the size in each array dimension
void* contiguous_array_alloc(int* dimension, int depth, int size)
{
    int i;
    char** ptr;
    if (depth==1)
    {
        ptr=(char**)malloc(*dimension*size);
        return ptr;
    }
    ptr=(char**)malloc(*dimension*sizeof(char*));
    *(dimension+1)*=*dimension;
    ptr[0]=(char*)contiguous_array_alloc(dimension+1, depth-1, size);
    *(dimension+1)/=(*dimension);
    for (i=1; i<*dimension; ++i)
        ptr[i]=ptr[i-1]+(*(dimension+1)*size);
    return (void*)ptr;
}

//(later in the code) (
int dimension[3];
dimension[0]=4;
dimension[1]=t.size;
dimension[2]=t.size;
t.versions=(char***)contiguous_array_alloc(&dimension[0], 3, sizeof(char)); 
```

在代码中添加一些调试消息似乎表明元素分配正确：

> 分配 [4][9][9] 大小为 1 元素的数组；malloc() 为 4 个指针分配 16 字节数组；在 003E29E8 处将指针数组分配到级别 2；
> 
> > 分配大小为 1 元素的 [36][9] 数组；malloc() 为 36 个指针分配 144 字节数组；在 003E5728 处将指针数组分配到级别 1；
> > 
> > > 分配大小为 1 元素的 [324] 数组；
> > 
> > 003E57C0 处的 324 字节数据数组；指向 003E57C0 处的数据；将每个指针增加 9；返回分配的数组；
> 
> 指向 003E5728 处的数据；将每个指针增加 9；返回分配的数组；
> 
> 在 003E29E8 处分配连续数组；

是什么导致了这种行为？我已经检查了几次代码，但不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:04:28.407

我认为`ptr[i]=ptr[i-1]+(*(dimension+1)*size);`这种指针操作使用没有意义的地方有问题。我修改了如下代码，通过了 4 维数组的测试。

```
//dimension points to a 1-dimensional array of integers
//specifying the size in each array dimension
void* contiguous_array_alloc(int* dimension, int depth, int size) {
  int i;
  if (depth==2) {
    char ** ptr=(char **)malloc(*dimension * sizeof(void*));
    ptr[0]=(char *)malloc(*dimension * dimension[1] * size);
    for (i=1; i<*dimension; ++i) {
      ptr[i]=ptr[i-1]+(*(dimension+1) * size);
    }
    return (void*)ptr;
  } else {
    void ***ptr=(void***)malloc(*dimension * sizeof(void*));
    *(dimension+1)*=(*dimension);
    ptr[0]=contiguous_array_alloc(dimension+1, depth-1, size);
    *(dimension+1)/=(*dimension);
    for (i=1; i<*dimension; ++i) {
      ptr[i]=ptr[i-1]+(*(dimension+1));
    }
    return (void*)ptr;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:12:01.667

对于*a* ⨉ *b* ⨉ *c* ⨉ *d*数组，您`int`只需要：

```
int (*p)[b][c][d] = calloc(a, sizeof *p); 
```

# php - Ajax php 登录仅适用于 alert();

> ID：15115505
> 
> 赞同：0
> 
> 时间：2013-02-27T15:09:34.270
> 
> 标签：php, javascript, jquery, ajax

我的ajax登录有一个非常奇怪的问题。下面我提供了登录代码。奇怪的是：

如果我删除警报（“？？？”）；当 checklogin.php 获得正确的登录参数时，我没有得到响应。

如果警报（“？？？”）；仍然在功能页面 checklogin.php 回复“成功”和 website.php 已加载！

基本上没有alert()的时候是不会进入ajax成功的。

我已经看了好几个小时了，我不知道警报触发了什么来使它工作。

它仍然获得所有正确的参数，但 php 在没有警报的情况下不会回复。我尝试使用'beforeSend'在ajax中休眠，它也没有工作。

提前致谢！

AJAX 功能：

```
 function checkSwipedCredentials(decryptedCredentials)
{   
    $.ajax({
        type: 'POST',
        url: 'checklogin.php',
        data: decryptedCredentials,
        success:function(response)
                {
                    if(response == 'success')
                    {
                        document.location='website.php';
                    } else {
                        showSwipeForm(); //onfailure
                    }
                }
    });
    alert("???");
    return false;
} 
```

PHP代码：

```
 $sql = "SELECT * FROM users WHERE username='$username' AND password='$password'";
$result = mysql_query($sql);

$count = mysql_num_rows($result);
if($count == 1)
{
    echo "success";
    $_SESSION['username']=$username; 
} else {
    echo "failed";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:18:20.713

删除`return false;`. 您没有理由需要这样做。警报正在抑制它的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:18:28.020

我可以告诉你警报的作用：它在函数返回 false 之前添加了一个暂停。只要您需要单击“确定”，此暂停时间就足以处理 AJAX 请求（请记住，这是异步发生的）。

PHP 的回复肯定与它应该的完全一样。只是响应不再被正确评估。

现在剩下的问题是：如何调用这个函数，使返回值具有这些副作用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:19:04.390

该警报正在阻止页面在其存在时进行进一步的操作。这告诉我存在由“return false”引起的问题；或者页面上的其他内容在调用后与 ajax 调用发生冲突。警报的存在允许 ajax 调用在其中断之前完成。我建议您隔离此功能并将其单独放在测试页面上，以确定此代码是否有问题。我怀疑它一旦被隔离就会起作用。

# xtk - 使用 Chrome 的交互器问题

> ID：15115507
> 
> 赞同：0
> 
> 时间：2013-02-27T15:09:50.213
> 
> 标签：xtk

我正在使用 Chrome 24.0.1312.56（便携版）和 25.0.1364.97 m（安装版）来显示一些 3D 内容。3D 场景中的交互不是最佳的。当我单击并缓慢移动时，场景中没有旋转。如果我移动得更快，互动就会开始。这意味着我必须以相对较快的速度进行交互来模拟 3D 场景。在 Firefox 18.0.2 上看不到此行为。看起来有一个最小的运动（或速度运动），在这个运动下，事件被抛弃了。

当移动在视口的 Y 轴上时，“错误”最严重。沿 X 轴移动更好，但不是“正常”。

chrome 是在捕捉还是不将某些动作传播到 xtk？最小移动或速度是否有阈值？

谢谢，劳伦特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:45:04.327

是的，如果我移动鼠标真的非常慢，我可以重现..

此处定义了一个阈值

[https://github.com/xtk/X/blob/master/io/interactor.js#L993](https://github.com/xtk/X/blob/master/io/interactor.js#L993)

门槛对我来说似乎是合理的。你的动作真的，真的很慢吗？我们可以通过 setter 暴露阈值。

# meteor - 为什么 Meteor 方法会放在 models.js 文件中？

> ID：15115510
> 
> 赞同：6
> 
> 时间：2013-02-27T15:09:59.747
> 
> 标签：meteor

根据[这个](http://meteor.com/authcast)视频，应该在客户端和服务器上可用的 models.js 文件中定义流星方法。

如果方法应该是客户端在服务器上调用的安全过程，为什么在 models.js 文件中定义它们？客户端使用 Meteor.call 调用方法，那么在服务器上而不是在 models.js 中定义我们的方法是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:38:14.077

您不必将方法放在“model.js”文件中，您可以将它们放在任何地方，它们只是在视频中将文件命名为 model.js。

`Meteor.methods`是一种“Anywhere”方法，这意味着它可以同时存在于服务器和客户端。如果您查看[文档](http://docs.meteor.com/#meteor_methods)，您会看到解释的差异：

> 服务器上的调用方法定义了客户端可以远程调用的函数。
> 
> [...]
> 
> 在客户端调用方法定义了与同名服务器方法关联的存根函数。

在视频中，他们向您展示了 Meteor 的方法和其他功能如何工作的演示，因此他们并不关心具体将方法放置在服务器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:38:47.447

您发布的视频只是 Meteor 可以做什么的预告片。这不是教程。该[文档](http://docs.meteor.com/#meteor_methods)解释了方法的工作原理。对于客户端，该方法只会被存根。

如果您使该方法仅在服务器上可用，则该方法将不会被存根。您还应该阅读 Meteor 的[概念](http://docs.meteor.com/#concepts)。

# python - 如何在没有模块名称的情况下记录类？

> ID：15115514
> 
> 赞同：18
> 
> 时间：2013-02-27T15:10:07.997
> 
> 标签：python, python-sphinx

我正在尝试记录一个 python 包`sphinx`并成功生成了 html 文件。我正在记录的包由一组文件组成`*.py`，其中大多数包含一个类，其中几个文件是定义了函数的真正模块。我不需要公开每个类都在一个模块中的事实，所以我`from`在文件中添加了合适的语句，`__init__.py`例如

```
from base import Base 
```

这样用户就可以使用该`import pkg`命令，而不必指定包含该类的模块：

```
import pkg
class MyBase(pkg.Base):  # instead of pkg.base.Base ...
... 
```

问题是 sphinx 坚持将类记录为`pkg.base.Base`. 我试图设置`add_module_names = False`in `conf.py`。然而，这会导致 sphinx 将类显示为简单`Base`而不是`pkg.Base`. *此外，这也破坏了作为*模块的几个`*.py`文件的文档。

 *我如何`sphinx`将课程显示为`pkg.Base`？以及如何`add_module_names`为每个`*.py`文件选择性地设置指令？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-07-23T17:43:10.320

这是完成OP要求的一种方法：

1.  在 中添加[`__all__`](https://docs.python.org/2/tutorial/modules.html#importing-from-a-package)列表`pkg/__init__.py`：

    ```
    from base import Base    # Or use 'from base import *'

    __all__ = ["Base"] 
    ```

2.  `.. automodule:: pkg`在 .rst 文件中使用。

Sphinx 现在将输出文档，其中类名显示为`pkg.Base`而不是`pkg.base.Base`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-08T02:22:54.097

我已经将我找到的答案合并到一个可扩展的外形尺寸中：

```
my_project/
    __init__.py
    mess.py 
```

*   `mess.py`：

```
class MyClass:
    pass

class MyOtherClass(MyClass):
    pass 
```

*   `__init__.py`：

```
from .mess import MyClass, MyOtherClass

__all_exports = [MyClass, MyOtherClass]

for e in __all_exports:
    e.__module__ = __name__

__all__ = [e.__name__ for e in __all_exports] 
```

这对我来说似乎效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-05T09:21:06.050

我想提供一个更通用的方法。

变量`__all__`基于 填充`dir()`。但子包名称（此处`mypackage`）和所有内置属性（以 开头`__`）被忽略。

```
from .mypackage import *

__all__ = []
for v in dir():
    if not v.startswith('__') and v != 'mypackage':
        __all__.append(v) 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2015-07-19T20:16:54.203

简短的回答：你不应该。只需将狮身人面像指向您的代码目录即可。Sphinx 记录代码并显示模块层次结构。最终如何导入模块完全取决于开发人员，而不是文档工具的责任。*

# c - 如何在 C 中使用换行符解析字符串？

> ID：15115522
> 
> 赞同：1
> 
> 时间：2013-02-27T15:10:41.587
> 
> 标签：c, token, tokenize, strtok

我正在编写一个 shell，我正在使用 getline() 和键盘上的标准输入来获取命令。我在标记输入时遇到了麻烦。我尝试在 strtok() 函数中使用 \n 作为分隔符，但它似乎不起作用。

例如，我包含了一个 if 语句来检查用户是否键入了“exit”，在这种情况下它将终止程序。它没有终止。

这是我正在使用的代码：

```
void main() {
int ShInUse = 1;
char *UserCommand;   // This holds the input
int combytes = 100;
UserCommand = (char *) malloc (combytes);
char *tok;

while (ShInUse == 1) {
   printf("GASh: ");   // print prompt
   getline(&UserCommand, &combytes, stdin);
   tok = strtok(UserCommand, "\n");
   printf("%s\n", tok);

   if(tok == "exit") {
      ShInUse = 0;
      printf("Exiting.\n");
      exit(0);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:17:42.410

```
if (tok == "exit") 
```

`tok`and`exit`是指针，所以你正在比较两个指针。这会导致未定义的行为，因为它们不属于同一个聚合。

这不是比较字符串的方法。使用宁`strcmp`。

```
 if (strcmp (tok, "exit") == 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:24:09.987

正如@Kirilenko 所说，您不能使用 == 运算符比较字符串。

但事实并非如此。如果您使用的是[getline()](http://www.kernel.org/doc/man-pages/online/pages/man3/getline.3.html)，则无论如何都不需要将输入拆分为行，因为 getline() 仅读取一行。如果您确实想将输入拆分为其他分隔符，您将在循环中调用 strtok() 直到它返回 NULL。

# php - xsl：包括不工作

> ID：15115524
> 
> 赞同：0
> 
> 时间：2013-02-27T15:10:48.707
> 
> 标签：php, xml, xslt, xml-parsing

我已经尝试了几个小时，但我就是无法让包含工作。我只剩下一个空白页。看一下代码：

东西.xsl

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" omit-xml-declaration="yes" />
    <xsl:output 
      doctype-public="-//WAPFORUM//DTD XHTML Mobile 1.0//EN" 
      doctype-system="http://www.wapforum.org/DTD/xhtml-mobile10.dtd"/>

    <xsl:template match="/">
        <xsl:element name="html">
            <xsl:element name="head">
                <xsl:element name="title">Something</xsl:element>
            </xsl:element>

            <xsl:element name="body"> 
                <xsl:attribute name="onload">
                    <xsl:text>initialize();</xsl:text>
                </xsl:attribute>

                <xsl:element name="div">
                    <xsl:attribute name="id">
                        <xsl:text>main</xsl:text>
                    </xsl:attribute>                                    
                </xsl:element>              

                <xsl:include href="blob.xsl" />

            </xsl:element>

        </xsl:element>

    </xsl:template> 

</xsl:stylesheet> 
```

斑点.xsl

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" omit-xml-declaration="yes" />
    <xsl:output 
      doctype-public="-//WAPFORUM//DTD XHTML Mobile 1.0//EN" 
      doctype-system="http://www.wapforum.org/DTD/xhtml-mobile10.dtd"/>

    <xsl:template match="*">
            <xsl:element name="div">
                <xsl:attribute name="id">
                    <xsl:text>navoptions</xsl:text>
                </xsl:attribute>
            </xsl:element>
    </xsl:template> 
</xsl:stylesheet> 
```

和php代码

```
<?php
    $xml = new DOMDocument();   
    $xml->load('file.xml');

    $xsl = new DOMDocument;
    $xsl->load('something.xsl');

    $proc = new XSLTProcessor();
    $proc->importStyleSheet($xsl);

    echo $proc->transformToXML($xml);
?> 
```

**更新：**这显然没有得到任何结果。就我的研究而言，使用 PHP 时不能导入多个 xsl 样式表。另一方面，有谁知道这是否可以使用 ColdFusion？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:52:09.820

xsl:include 必须是 xsl:stylesheet 的直接子级。

如果您的 XSLT 处理器没有为此提供错误消息，那么您需要一个更好的 XSLT 处理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-17T15:59:42.330

除了 Michael Kay 所说的，当我使用 php 并包含/导入 xslt 时，您可以通过为该元素设置 xml:base 属性来帮助它解析 uri。

即，如果 xslt 在 /var/www/html/views/ 中，则 xsl:include 看起来像：

<xsl:include href="blob.xsl" xml:base="/var/www/html/views/" />

见：[https ://www.w3.org/TR/xslt-30/#uri-references](https://www.w3.org/TR/xslt-30/#uri-references)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:15:16.247

XSLTProcessor 可能不知道如何解析该行。您必须手动包含它或提示 XSLTProcessor。

[http://php.net/manual/en/xsltprocessor.importstylesheet.php](http://php.net/manual/en/xsltprocessor.importstylesheet.php)

来自应该有效的评论的代码：

```
<?php 

# LOAD XML FILE 
$XML = new DOMDocument(); 
$XML->load( 'data.xml' ); 

# START XSLT 
$xslt = new XSLTProcessor(); 

# IMPORT STYLESHEET 1 
$XSL = new DOMDocument(); 
$XSL->load( 'template1.xsl' ); 
$xslt->importStylesheet( $XSL ); 

#IMPORT STYLESHEET 2 
$XSL = new DOMDocument(); 
$XSL->load( 'template2.xsl' ); 
$xslt->importStylesheet( $XSL ); 

#PRINT 
print $xslt->transformToXML( $XML ); 
?> 
```

# php - 包含基本上是 html 的 php 文件是不好的做法吗？

> ID：15115527
> 
> 赞同：3
> 
> 时间：2013-02-27T15:11:05.947
> 
> 标签：php, html

基本上，我有一些为网站构建的页面，并且都具有相同的布局。我认为在所有文件中包含所有相同的代码是一种浪费（浪费带宽、浪费时间等）。起初我考虑使用框架，但我不太喜欢它们......我不会放弃它们，我刚开始阅读它们，但无论如何我真正喜欢并觉得它适合我的解决方案是我编写了一个包含每个页面中存在的所有基本布局的 html 文件，然后我只是在主要区域中编写了一个 php 脚本（页面的不同部分）并取决于我 include_once 的 $_GET[] 值（“page.php”），其中该文件基本上具有 html 代码和一些与服务器上的数据库有关的动态内容的 php。所以看起来像这样

```
<html>
<head>
<!-- css and jquery file -->
</head>

<body>
<div id='title'>
</div>

<div id='navigation'>
</div>

<div id='content' style='float:left'>
    <?php 
         switch($_GET['id']) {
               case '1': include_once('./pages/1.php');
               case '2': include_once('./pages/2.php');
               .......
         }
    ?>
</div>

<div id='sidelinks'>
</div>

<div id='footer'>
</div>

<!-- various javascript files for events -->

</body>
</html> 
```

但是我才刚接触 php 几个月，虽然我读到了 include 我仍然不确定这是否是不好的做法，是否有任何问题或危险

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T15:12:34.087

没关系，也很正常。PHP 包含可以使跨页面管理公共内容成为一个简单的过程，从而使站点维护更容易。这是好事。

常见的例子包括：

*   标头
*   页脚
*   网站导航

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:26:11.380

正如[约翰康德](https://stackoverflow.com/users/250259/john-conde)所说，这完全没问题。我会稍微增强你的脚本：

```
// use an array that holds your pages
$pages = array();
$pages[] = array(
    'title' => 'Startpage',
    'metaDescription' => 'Meta Description',
    'include' => './pages/1.php',
    // etc.
);
$pages[404] = array(
    'title' => '404',
    'metaDescription' => 'Meta Description',
    'include' => './pages/1.php',
    // etc.
);

$request = 0; 
```

你可以检查：

```
if (isset($_GET['id']) {
    $request = ( count($pages) > intval($_GET['id']) ? intval($_GET['id']) : 404 );
}

if (404 == $request) {
    // send 404 headers
} 
```

之后您可以使用：`print $pages[$request]['title'];`显示单个页面标题，您可以使用`require $pages[$request]['include'];`等包含请求的文件。

这只是用心写的 - 未经测试，可以简单地改进。这只是一个更进一步的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:15:25.830

你走的路没问题。您唯一应该考虑的是如何处理 HTTP 404 错误，以防有人提供了错误的页面 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T15:32:42.443

1-您必须防止页面中出现任何错误。

2-在你的地方我不使用`switch`

```
<?php

$pageid   = $_GET['id'];
$errormsg = '';

if($pageid)
{
    $file_to_call = './pages/' . $pageid . '.php';
    if(is_file($file_to_call))
    {
        include_once($file_to_call);
    }
    else
    {
        $errormsg = "YOUR MESSAGE ERROR";
    }
}
else
{
    $errormsg = "YOUR ANOTHER MESSAGE ERROR";
}
echo $errormsg;

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T15:36:40.527

你这样做的方式（通过 ID 号而不是传递文件名）是可以的，更安全的是使用 file_get_contents，这样你就不会像导入一些代码一样导入文件。

# java - for循环中的前后增量

> ID：15115530
> 
> 赞同：0
> 
> 时间：2013-02-27T15:11:12.913
> 
> 标签：java, performance, for-loop, post-increment, pre-increment

在 java 的 for 循环中进行预增量与后增量相比是否更高效？

示例代码：

```
for (int i=0; i<10; i++) 
```

和

```
for (int i=0; i<10; ++i) 
```

我注意到，当我进行预增量时，执行时间比我进行后增量时要短。关于为什么会出现这种情况的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T15:16:13.177

我编译了一个最小的例子（Oracle jdk1.7.0_07）：

```
public void post() {
    for (int i=0; i<10; i++) {

    }
}

public void pre() {
    for (int i=0; i<10; ++i) {

    }
} 
```

两种方法都产生了完全相同的字节码：

```
 0 iconst_0
 1 istore_1
 2 goto 8 (+6)
 5 iinc 1 by 1
 8 iload_1
 9 bipush 10
11 if_icmplt 5 (-6)
14 return 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T15:14:51.253

除非您的循环体几乎什么都不做，否则这个问题没有实际意义：变量增量的开销为零。即使开销很突出，它的大小也是完全不可预测的，并且即使在完全相同的硬件上完全相同的 JVM 的不同实例之间也会有很大的不同。当然，“狂野”变化在 0..2 ns 范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:14:20.840

后增量和预增量（或减量）基本上意味着如果您使用诸如 ++i 之类的预增量，则在该代码行的其余部分之前对其进行评估。如果使用诸如 i++ 之类的后增量，则在代码行的其余部分之后对其进行评估。这也许就是您获得“更快执行时间”的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T17:49:41.410

基于此，不存在这样的性能问题。两者在性能方面完全相同。并且您无法声称应该使用 ++i 代替 i++，这取决于我们要处理的逻辑。++i 表示先递增然后开始工作，而 i++ 表示开始工作然后递增。看看以下问题。

[后自增 (i++) 和前自增 (++i) 运算符如何在 Java 中工作？](https://stackoverflow.com/questions/2371118/explain-working-of-post-and-pre-increment-operator-in-java)

语言无关示例：[循环中 i++ 和 ++i 之间的区别？](https://stackoverflow.com/questions/484462/difference-between-i-and-i-in-a-loop)

# jquery - 提取整个 xml 节点

> ID：15115532
> 
> 赞同：1
> 
> 时间：2013-02-27T15:11:26.283
> 
> 标签：jquery, xml

我正在使用 jquery/ajax（并且坚持使用 IE7。我知道，对吗？）并获取 xml 响应并遍历节点以提取数据我还需要提取整个“查询”节点并显示它，因为它是CAML 查询会因视图而异。（所有这些都将输出到用于文档的文本文件中，因此需要）。

我尝试使用 strQry = $(this).find("View").find("Query").xml 将节点转换为字符串，但我得到“未定义”

我什至尝试了以下但没有成功：

```
 var strQry = $(this).find("View").find("Query").text() ; // undefined
  var strQry = $(this).find("View").find("Query").innerHTML() ; // error
  var strQry = $(this).find("View").find("Query").outerHTML() ;// error
  var strQry = $(this).find("View").find("Query") ;// [object Object]
  var strQry = $('<div>').append($(this).find("View").find("Query").clone()).remove().html(); // blank 
```

任何指针将不胜感激！

我的 XML 看起来像：

```
<List Name="ListName" Title="Tasks" Description="" Url="Lists/Tasks" >
<MetaData>
  <Views>           
   <View Name="Tasks Due Today" DisplayName="Due Today" Url="Lists/Tasks/duetoday.aspx" >
    <ViewFields>
     <FieldRef Name="ID"/><FieldRef Name="Field1"/><FieldRef Name="Field2"/><FieldRef Name="Created"/><FieldRef Name="Field3"/><FieldRef Name="Field4"/><FieldRef Name="Field5"/><FieldRef Name="Date"/>
    </ViewFields>
    <Query>
     <GroupBy Collapse="FALSE" GroupLimit="100"><FieldRef Name="Field1"/></GroupBy><OrderBy><FieldRef Name="Field2"/></OrderBy><Where><Eq><FieldRef Name="Date"/><Value Type="DateTime"><Today/></Value></Eq></Where>
    </Query>
   </View>
  </Views>
</MetaData>
</List> 
```

蒂亚！

CG

# c# - 使用代理的 tcpClient 的 Http Post 请求

> ID：15115539
> 
> 赞同：0
> 
> 时间：2013-02-27T15:11:43.883
> 
> 标签：c#, post, proxy, tcpclient

II 必须将 http post 数据发送到网站抛出代理并接收服务器响应。比如我想发送请求

```
request=Encoding.ASCII.GetBytes("POST / HTTP/1.1\r\nHost: example.com\r\nConnection: Close\r\n\r\ntest_check=Hello"); 
```

在我的网站中，我检查帖子数据是否发送良好。在这种情况下，我返回“Ok”。首先，我写了这样的东西：

```
TcpClient client = new TcpClient(host, port);
NetworkStream stream = client.GetStream();
stream.Write(request, 0, request.Length);
stream.Flush();
while ((count = stream.Read(buffer, 0, buffer.Length)) > 0)
            response.Append(encoder.GetString(buffer, 0, count)); 
```

响应为空。怎么了？

之后，我想通过代理服务器的 TcpCLient 发送请求。是否可以？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:25:57.440

由于您使用的是 HTTP 协议，因此您应该使用支持使用 WebProxy 类设置代理的 HttpWebRequest 类。

# matlab - matlab向量加法，如乘法，没有for循环

> ID：15115543
> 
> 赞同：0
> 
> 时间：2013-02-27T15:11:54.237
> 
> 标签：matlab, for-loop, multiplication, addition

通常，当一个添加两个向量时，会发生这种情况

```
[1 4] + [2 5]  = [3 9] 
```

我希望它这样做：

```
[1 4] + [2 5]  =  3  6
                  6  9 
```

所以基本上加法就像乘法是如何发生的。但不使用 for 循环。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:56:11.683

这是使用[bsxfun的海报案例之一](http://www.mathworks.com/help/matlab/ref/bsxfun.html)

```
x = [1 4];
y = [2 5];
bsxfun(@plus,x,y') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:21:03.460

一种方法是使用[meshgrid](http://www.mathworks.com/help/matlab/ref/meshgrid.html)。

```
x = [1 4];
y = [2 5];
[a, b] = meshgrid(y,x);
a + b 
```

# regex - 什么是正则表达式来细化粗体数字

> ID：15115544
> 
> 赞同：-4
> 
> 时间：2013-02-27T15:12:03.520
> 
> 标签：regex

我试过`\b[0-9]{1,4}\.[0-9]{1,3}\.[0-9]{0,3}`了，但它错过了 34.89 和 23.89

我想要下面文本中的所有数字序列，除了 28.72%

```
34.89
0105.93.10  ghghghh
0105.93.20  ghghhh 
jjjjjhjj 0105.93.30 jsdfsd iksifsdjfk sdfsdk
0105.93.40ierfgg dfgkdfg dfgolgh 23.89
28.72% 
```

谢谢

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:20:55.427

您的正则表达式需要存在两个点。您需要使最后一个点数序列可选，并且您需要排除匹配的位置或`%`另一个数字（否则将匹配）：`28.7``28.72%`

```
\b[0-9]{1,4}\.[0-9]{1,3}(?:\.[0-9]{1,3})?(?![0-9%]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:25:19.330

使最后一部分可选

```
\b[0-9]{1,4}\.[0-9]{1,3}(?:\.[0-9]{0,3})? 
```

你原来的表达是需要句号。

你对匹配的规则不是很具体`%`，所以我做了这个：

```
\b[0-9]{1,4}\.[0-9]{1,3}(?:\.[0-9]{0,3})?(?=[^%\d]|$) 
```

最后一部分是对任何非 % 非数字字符或行尾的正向前瞻。它也必须是非数字的，否则`28.7`将匹配表达式的其余部分，最后一个`2`匹配非百分比字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:20:15.227

这将找到所有数字组，由单点分隔，后面没有`%`：

```
(?:\d+\.)+\d+(?!\%) 
```

它要求点的每一侧至少有一个数字。除此之外，它不关心每组中有多少位数。At 要求数字中至少有一个点。

这还需要每个组有 2 到 4 位数字：

```
(?:\d{2,4}\.)+\d{2,4}(?!\%) 
```

# python - 在 Pandas 中查找与给定时间最近的 DataFrame 行

> ID：15115547
> 
> 赞同：17
> 
> 时间：2013-02-27T15:12:11.433
> 
> 标签：python, datetime, pandas, time-series

我有一个由 DatetimeIndex 索引的 Pandas 数据框：

```
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 53732 entries, 1993-01-07 12:23:58 to 2012-12-02 20:06:23
Data columns:
Date(dd-mm-yy)_Time(hh-mm-ss)       53732  non-null values
Julian_Day                          53732  non-null values
AOT_870                             53732  non-null values
440-870Angstrom                     53732  non-null values
440-675Angstrom                     53732  non-null values
500-870Angstrom                     53732  non-null values
Last_Processing_Date(dd/mm/yyyy)    53732  non-null values
Solar_Zenith_Angle                  53732  non-null values
time                                53732  non-null values
dtypes: datetime64[ns](2), float64(6), object(1) 
```

我想找到最接近某个时间的行：

```
image_time = dateutil.parser.parse('2009-07-28 13:39:02') 
```

并找出它有多近。到目前为止，我已经尝试了各种基于从所有时间中减去我想要的时间并找到最小绝对值的想法，但似乎都没有奏效。

例如：

```
aeronet.index - image_time 
```

给出了一个错误，我认为这是由于日期时间索引上的 +/- 发生了变化，所以我尝试将索引放入另一列，然后进行处理：

```
aeronet['time'] = aeronet.index
aeronet.time - image_time 
```

这似乎可行，但要做我想做的事，我需要获得绝对时间差，而不是相对差。但是，只是运行`abs`或运行`np.abs`它会产生错误：

```
abs(aeronet.time - image_time)

C:\Python27\lib\site-packages\pandas\core\series.pyc in __repr__(self)
   1061         Yields Bytestring in Py2, Unicode String in py3.
   1062         """
-> 1063         return str(self)
   1064 
   1065     def _tidy_repr(self, max_vals=20):

C:\Python27\lib\site-packages\pandas\core\series.pyc in __str__(self)
   1021         if py3compat.PY3:
   1022             return self.__unicode__()
-> 1023         return self.__bytes__()
   1024 
   1025     def __bytes__(self):

C:\Python27\lib\site-packages\pandas\core\series.pyc in __bytes__(self)
   1031         """
   1032         encoding = com.get_option("display.encoding")
-> 1033         return self.__unicode__().encode(encoding, 'replace')
   1034 
   1035     def __unicode__(self):

C:\Python27\lib\site-packages\pandas\core\series.pyc in __unicode__(self)
   1044                     else get_option("display.max_rows"))
   1045         if len(self.index) > (max_rows or 1000):
-> 1046             result = self._tidy_repr(min(30, max_rows - 4))
   1047         elif len(self.index) > 0:
   1048             result = self._get_repr(print_header=True,

C:\Python27\lib\site-packages\pandas\core\series.pyc in _tidy_repr(self, max_vals)
   1069         """
   1070         num = max_vals // 2
-> 1071         head = self[:num]._get_repr(print_header=True, length=False,
   1072                                     name=False)
   1073         tail = self[-(max_vals - num):]._get_repr(print_header=False,

AttributeError: 'numpy.ndarray' object has no attribute '_get_repr' 
```

我以正确的方式接近这个吗？如果是这样，我应该如何`abs`开始工作，以便我可以选择最小绝对时间差，从而获得最接近的时间。如果不是，那么使用 Pandas 时间序列的最佳方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-11-14T09:54:50.967

这个简单的方法将返回最接近给定日期时间对象的 TimeSeriesIndex 条目的（整数索引）。无需将索引复制到常规列 - 只需使用该`.to_pydatetime`方法即可。

```
import numpy as np

i = np.argmin(np.abs(df.index.to_pydatetime() - image_time)) 
```

然后你只需使用 DataFrame 的`.iloc`索引器：

```
df.iloc[i] 
```

这是一个执行此操作的函数：

```
def fcl(df, dtObj):
    return df.iloc[np.argmin(np.abs(df.index.to_pydatetime() - dtObj))] 
```

然后，您可以进一步无缝过滤，例如

```
fcl(df, dtObj)['column'] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T15:46:20.140

我认为您可以尝试`DatetimeIndex.asof`查找包含输入的最新标签。然后使用返回的日期时间选择适当的行。如果您只需要特定列的值，`Series.asof`则存在并将上述两个步骤合并为一个。

这假设您想要最接近的日期时间。如果您不关心日期，只想每天都在同一时间，`at_time`请在 DataFrame 中使用。

### 跟进：

编辑：误报，我在本地有一个旧版本。master 上的最新版本应该与 np.abs 一起使用。

```
In [10]: np.abs(df.time - image_time)
Out[10]: 
0    27 days, 13:39:02
1    26 days, 13:39:02
2    25 days, 13:39:02
3    24 days, 13:39:02
4    23 days, 13:39:02
5    22 days, 13:39:02 
```

也只是为了澄清：

aeronet.index - image_time 不起作用，因为对 Index 的减法是一个设定的差异（回到过去，Index 曾经被限制为唯一）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-31T12:46:38.807

我今天面临同样的问题。我想要一个能够在给定时间戳之前给我最接近的值的函数。这是我得到的功能：

```
def get_nearest_past(data, timestamp):
    index = data.index.get_loc(timestamp,"ffill")
    return data.iloc[index] 
```

如果您需要全局最接近的（而不是像我之前最接近的），您可以使用：

```
def get_nearest(data, timestamp):
    index = data.index.get_loc(timestamp,"nearest")
    return data.iloc[index] 
```

[`get_loc`](https://pandas.pydata.org/pandas-docs/version/0.17.1/generated/pandas.Index.get_loc.html)您可以在文档中找到更多信息。

# unit-testing - 集成和单元测试之间的 Grails 污染

> ID：15115549
> 
> 赞同：1
> 
> 时间：2013-02-27T15:12:13.807
> 
> 标签：unit-testing, grails, integration-testing, grails-2.1

我知道关于这个特定主题有很多内容，但是我找不到任何偶然发现我的问题的人，希望有人可以向我解释这一点。

我有一个域，我在 equals 方法中使用注入的 grailsApplication 的动态方法“isDomainClass”：

```
@Override
public boolean equals(Object obj) {
    if(!grailsApplication.isDomainClass(obj.getClass())) { return false }
    ...
} 
```

这很好用，并且要对此进行单元测试：

```
@Mock([MyDomain])
...
def mockGApp
void setUp() {
    mockGApp = new Object()
    mockGApp.metaClass.isDomainClass = { obj -> true }
}
...
void testSomething() {
    def myDomain = new MyDomain()
    myDomain.grailsApplication = mockGApp
    ....
} 
```

当我使用 test-app -unit （在命令行或 STS 中）运行它时，它通过就好了。

然后我进行了一个使用该域的集成测试（这次没有模拟），并且在使用 test-app -integration 运行时再次运行良好（在命令行或在 STS 中）

但是，如果我运行“test-app”，那么它同时运行，我得到一个`MissingMethodException: no method signature isDomainClass exists with parameters (java.lang.Class) ...`和所有的爵士乐。

在我正在测试的服务中使用 's 进行调查时，`println`在测试的集成部分中，在调用我的域类的 equals 方法之前，我可以很高兴地调用`grailsApplication.isDomainClass()`并获得所需的效果。但是，当代码进入域的 equals 函数时，该`isDomainClass()`方法不再存在，尽管该`grailsApplication`对象引用了服务中引用的同一对象并且具有动态添加的方法。

看来，grails 添加到此类的动态方法在域的方法中调用时并未被注入，而是在服务中被注入。更奇怪的是，只有在集成测试遵循单元测试时才会发生这种情况。如果分开做，没问题...

这种污染从何而来？有什么办法可以解决吗？

PS 使用 Grails 2.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:11:43.933

您必须在 destroy 方法中从 metaClassRegistry 中删除您修改的类（即在测试用例运行之后）。见下文：

```
@After
void destroy() {
    GroovySystem.metaClassRegistry.removeMetaClass(MyDomain.class)
} 
```

# mysql - 计算 A 类和 B 类中的项目 (MySQL)

> ID：15115550
> 
> 赞同：3
> 
> 时间：2013-02-27T15:12:15.750
> 
> 标签：mysql, sql, count, relational-division

我正在尝试更改某些内容以使其对我有用。我认为对于了解 SQL 的人来说，我的问题很容易回答。我有下表（两列）：

```
entry_id | cat_id
5        | 3
6        | 3
7        | 3
7        | 5
7        | 6
8        | 5
9        | 3
9        | 5 
```

现在我想计算 cat_id 3 和 5 中的所有 entry_id（它们必须同时属于这两个类别）。我该怎么做才能得到“2”（条目 7 和 9 的总和为 2）。

希望有人可以提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T15:13:43.027

这个问题有时被称为`Relational Division`

```
SELECT  COUNT(*) totalCOunt
FROM
(
    SELECT  entry_id 
    FROM    tableName
    WHERE   cat_id IN (3, 5)
    GROUP   BY entry_id
    HAVING  COUNT(DISTINCT cat_id ) = 2
) s 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1e4c9/6)
*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

# android - ListFragment：突出显示选定的行

> ID：15115559
> 
> 赞同：0
> 
> 时间：2013-02-27T15:12:53.333
> 
> 标签：android, selector

我正在使用 ListFrament，我想突出显示选定的行。

我的选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item 
    android:state_pressed="true"
    android:drawable="@color/gold" />
  <item
    android:state_selected="true"
    android:drawable="@color/plum" />
  <item 
    android:drawable="@color/medium_green" />
</selector> 
```

我的 ListFragment 中的代码：在 onCreateActivity 中：

```
this.getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

点击：

```
@Override
public void onListItemClick(ListView list, View v, int position, long id) {
    super.onListItemClick(list, v, position, id);
    String tag = this.getTag();
    Log.d(TAG, "id, position " + id + " " + position);
    list.setSelection(position);
} 
```

不幸的是，这不起作用-单击该行时，它只会闪烁“金色”...我希望所选行保持突出显示...

提前感谢您的回答，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:34:04.097

尝试这个

设置行类型的全局变量。我正在使用 View，因为它是通用的

```
View previous; 
```

在 onCreateView 中初始化视图

```
previous=new View(getContext); 
```

当 onListItemClick 这样做时

```
public void onListItemClick(ListView list, View v, int position, long id) {
    super.onListItemClick(list, v, position, id);
    String tag = this.getTag();
    Log.d(TAG, "id, position " + id + " " + position);
   previous.setSelected(false);
   v.setSeleted(true);
   previous=v;
} 
```

试试这个，然后回到我在我的旧应用程序中使用过这个......我肯定会工作......我希望这会对你有所帮助。

# javascript - 列表末尾的 jquery 移动元素使容器消失，似乎是前置

> ID：15115560
> 
> 赞同：1
> 
> 时间：2013-02-27T15:12:58.327
> 
> 标签：javascript, jquery

我正在尝试制作一个非常简单的旋转横幅列表。

小提琴在这里：http: [//jsfiddle.net/a9dAm/](http://jsfiddle.net/a9dAm/)

```
if ($("#ads").length > 0) {
    var count_banners = $("#ads a").length;
    var delay_time = 1000;
    var i = 1;

    while (count_banners >= i) {
        $("#ads a:nth-child("+ i +")").delay(delay_time * i).show(1, function(){
            $(this).fadeOut("slow").prepend($("#ads"));
        });
        i++;
    }
} 
```

Prepend 破坏了一切，#ads 一起消失了，这是怎么回事？或者我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:14:55.033

我想你想要`.prependTo()`，不是`.prepend()`。

```
 $(this).fadeOut("slow").prependTo($("#ads")); 
```

要不就

```
 $(this).fadeOut("slow").prependTo("#ads"); 
```

该`.prepend()`函数将其参数添加到您从中调用它的元素中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:15:09.800

它正在消失，因为您使用的是`.prepend`而不是`.prependTo`. 基本上，您是在移动广告而不是单个广告。

更新小提琴：http: [//jsfiddle.net/klatzkaj/a9dAm/1/](http://jsfiddle.net/klatzkaj/a9dAm/1/)

这是相关的行：`$(this).fadeOut("slow").prependTo($("#ads"));`

# android - 检测 Android 输入 Widget 更改是否是由用户而不是由框架进行的

> ID：15115561
> 
> 赞同：1
> 
> 时间：2013-02-27T15:13:11.087
> 
> 标签：android

我有一个由一些`EditText`,`Spinner`和`DatePicker`小部件组成的表单。

我有一个确认和一个保存按钮。我希望最初隐藏“保存”按钮。当用户修改其中一个表单项时，我想隐藏“确认”按钮，然后显示“保存”按钮。

我试过了：

*   `setOnClickListener()`. 不调用侦听器。我相信小部件会捕获它以实现更高级别的功能。
*   特定于小部件的侦听器，例如`TextWatcher`和`OnItemSelectedListener`。但是当小部件作为小部件初始化的一部分时，它们会被调用。我想知道它们是否被用户活动调用。

我的目标是 Android 3.2/SDK 13。

# php - php/mysql 数据库搜索

> ID：15115569
> 
> 赞同：0
> 
> 时间：2013-02-27T15:13:36.707
> 
> 标签：php, mysql

谁能看到为什么下面的代码不起作用？是因为不推荐使用的 sql 语法吗？我被这个难住了。

```
<?php
mysql_connect("localhost",$username,$password);  
@mysql_select_db($database) or die( "Unable to select database");

$usersearch=$_POST['search'];
$query="SELECT * FROM tracks WHERE 'artist' LIKE '%$usersearch%'";  
$result=mysql_query($query);

$num=mysql_numrows($result); 

mysql_close();

while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {

echo $row["artist"]." | ".$row["name"];
echo "<br>";

}  

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:15:31.580

**首先，请不要使用 mysql_*。此扩展自 PHP 5.5.0 起已弃用。** [http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

您可以使用[mysqli_query()](http://www.php.net/manual/en/mysqli.query.php)或[PDO::query()](http://www.php.net/manual/en/pdo.query.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:43:13.270

可能是因为在选择表格时您有单引号（'）而不是 `。正如所指出的，不要使用 mysql_* 使用 PDO 或 mysqli，即使它只是一个学校项目（旧习惯很难改掉）。你也可以添加

```
mysql_query($query) or die($mysql_error()); 
```

这可能会指出什么是错的..

最后，请转义动态输入变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:17:12.980

添加到页面顶部：

```
 error_reporting(E_ALL);
 ini_set("display_errors", 1); 
```

并在浏览器中打开页面。有什么错误吗？

改变（这可以消除错误）

```
@mysql_select_db($database) or die( "Unable to select database"); 
```

至 ：

```
mysql_select_db($database) or die( "Unable to select database"); 
```

不过，建议您最好使用[MySQLi](http://php.net/manual/en/book.pdo.php)或 [PDO_MySQL][3]，`mysql_connect`因为它很快就会被弃用：

> **警告**
> 
> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> mysqli_connect()

[您可以在此答案](https://stackoverflow.com/questions/12329447/examples-of-small-php-and-my-sql-projects-to-learn-the-basics/12329478#12329478)中找到有关如何使用它们的更多信息。

**更新**

检查是否得到空结果，添加：

```
$num=mysql_numrows($result); 
if ($num === 0) echo "Empty result" 
```

并再次打开页面。如果页面仍然是空白，请更改：

```
echo $row["artist"]." | ".$row["name"];
echo "<br>"; 
```

至：

```
vardump($row); 
```

**更新 2**

如果你确实得到`Empty result`了，那么添加

```
echo $query; 
```

并尝试打开页面并手动运行查询

# c++ - 使用 QTextStream C++ 读取 txt 文件

> ID：15115571
> 
> 赞同：1
> 
> 时间：2013-02-27T15:13:42.587
> 
> 标签：c++, qt

我正在制作一个我以前在 Java 中做过的小程序，但是我想尝试在 C++ 中进行同样的工作。这个想法是合并两个文本文件

文件1：

```
a
b
c 
```

文件2：

```
1
2
3 
```

输出文件应为：

```
a1
b2
c3 
```

我查看了 QTextStream 文档，这是将文件逐行读取为字符串的建议代码

```
QFile file(input); // this is a name of a file text1.txt sent from main method
if (!file.open(QIODevice::ReadOnly | QIODevice::Text))
{
    return 1;
}
QTextStream in(&file);
QString line = in.readLine();
while (!line.isNull())
{
    line = in.readLine();
} 
```

然而由于某种原因，根本没有从文件中加载任何内容。我通过将“行”打印到控制台来证明这一点，但一无所获。

那么有什么想法吗？我想要的只是读取文件并得到这样的字符串

```
QString text1 = "a\n2\n3" 
```

我会为这两个文件执行此操作，将字符串拆分为 QStringList （很可能）以我想要的格式将它们连接在一起并将它们写入第三个 txt 文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T15:31:10.713

如果您想要整个文件，为什么要逐行阅读？

```
QString line = in.readAll(); 
```

另外，您的 while 循环是错误的，您需要`while (!in.atEnd())`为文本流而不是检查字符串是否为空。

`readLine`不会包含新行符号。

无论如何，同时打开两个文件并在旅途中构建您的字符串会更容易，而不是拆分和连接。

```
QFile f1("h:/1.txt");
QFile f2("h:/2.txt");

f1.open(QIODevice::ReadOnly | QIODevice::Text);
f2.open(QIODevice::ReadOnly | QIODevice::Text);

QString s;

QTextStream s1(&f1);
QTextStream s2(&f2);

for (int i = 0; i < 3; ++i) {
    s.append(s1.readLine());
    s.append(s2.readLine());
    if (i != 2)s.append("\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:50:55.097

如果文件名不包含完整路径，但您非常确定该文件与您的应用程序位于同一目录中，请使用如下应用程序路径：

```
QString filename = QCoreApplication::applicationDirPath() + "/" + input; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:31:24.147

试试这个块-：

```
while(!in.atEnd())
{
   QString line = in.readLine();   
   ....
} 
```

你使用这个while循环得到输出吗？

# ssis - 跨多个独立 dtsx 包共享一个公共远程数据库连接

> ID：15115577
> 
> 赞同：1
> 
> 时间：2013-02-27T15:13:56.740
> 
> 标签：ssis, global-variables, remote-access, synonym

**背景：** *Server1*有 4 个表的源数据库。*Server2*是具有 4 到 5 个表（以及一些额外字段）的目标数据库。在将数据从 Server1 移动到 Server2 之前，我们有一个字段映射和一些额外的处理（即截断、连接、..）。我们有 4 个独立的 dtsx 包 - 每个包一个，并且有一个 SQL 作业按顺序依次调用每个 dtsx 包。

*平台：SQL 2005 & SSIS 2005*

> 现在，您可能会猜到每个 dtsx 包都会在连接管理器中复制“源”和“目标”数据库连接。当我们更改远程目标数据库中的任何设置时，我们必须更改每个 dtsx 中的连接 - 将远程数据库连接信息保存在一个地方的选项有哪些？

这是我知道的一些-

1.  **创建一个父 dtsx**，它将依次调用 4 个 dtsx 中的每一个（与作业中所做的相同）并传递此（父）包中定义的连接变量（[示例](http://blogs.lessthandot.com/index.php/DataMgmt/DBAdmin/variables-ssis-dynamic-parent-to-child)）。但这意味着作业中的单个 dtsx 包步骤不会使将来易于调试（目前我们可以很容易地确定哪个步骤失败 - 所以哪个表/dtsx 有问题）

2.  有点传统但很有效 -**使用数据库同义词**。我们已经在数据比较 SP 中使用了一些远程表的同义词。如果我创建 4 个新的同义词 - 每个远程表一个。我可以通过它们的同义词直接在 dtsx 中引用这些表。稍后如果有任何更改 - 我需要更改并重新运行将删除并重新创建同义词的脚本（我也可以远程执行此操作！）

我做简单的 dtsx 设计和编程，所以请原谅我的知识，让我知道最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:21:14.973

您正在寻找的是[Package Configurations](http://msdn.microsoft.com/en-us/library/ms141682.aspx)。

基本上，配置值只是 SSIS 中某些属性的存储键/值对（例如，您的连接管理器的连接字符串。）

您可以将其存储为多种格式（请参阅链接） - 我个人使用 XML 文件，因为我有一个处理部署的支持团队并且他们“获取”文件。

然后每个包仅在其自己的配置中引用该 XML 文件。当包运行时，它将使用该连接的连接字符串的值，因此每个包将使用 XML 文件中的任何内容（或您选择的任何配置格式。）

基本步骤：

1.  在包中创建连接。
2.  在 SSIS -> Package Configurations 下，选择“Enable package configuration”，选择“Add ..”，选择你想要的格式，选择连接的连接字符串属性，保存配置。
3.  在其他 3 个包中，转到同一区域，选择“添加..”，这一次浏览到您创建的配置，它会要求您用包中的内容覆盖该配置中的值或重用现有（意思是保留您已经创建的值）- 选择重用现有的。命名，保存。

查看上面的链接以获取更多信息，这就是您想要的。

# java - 使用递归求和

> ID：15115579
> 
> 赞同：0
> 
> 时间：2013-02-27T15:14:04.670
> 
> 标签：java, recursion, sum

```
class fs {

    int lenArray;

    void check (int [ ] array) {

        lenArray = array.length;

        for (int i = 0; i < lenArray; i++)
        {
            if (search (array, i, 5, 0))
            {
                System.out.println ("We found it!!!");
                return;
            }                
        }
    }

    boolean search (int [ ] array, int i, int num, int count) {

        if (count == 2)
            if (num == 0)
                return true;
            else
                return false;

        int j = i;

        while (j < lenArray)
        {
           search (array, j++, num - array[i], count + 1);
        }
        return false;
    }
}

class findSum {
   public static void main (String [ ] args) {

       int A[ ]= {1, 2, 3, 4};

       fs obj = new fs ( );
       obj.check (A);
   }
} 
```

我想使用递归检查数组中是否有两个数字的总和为 5。

当我运行它时，没有结果。

任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:46:48.500

问题是您没有检查递归调用返回的内容。

代替

```
search (array, j++, num - array[i], count + 1); 
```

和

```
if (search (array, j++, num - array[i], count + 1))
  return true; 
```

它应该可以工作。

# ios - 适用于 iPad I（和 iOS 5.1.1）的 iOS 应用程序

> ID：15115581
> 
> 赞同：1
> 
> 时间：2013-02-27T15:14:07.457
> 
> 标签：ios

我们正在制作一个 iOS iPad 应用程序，它需要在 iPad 1 上运行，这意味着它必须在 iOS 5.1.1 上运行，因为这是它们支持的最新 iOS 版本。

1.  这是否意味着这个应用程序的目标需要是 5.1.1？
2.  有没有办法将 iOS 5.1.1 模拟器安装到 Xcode 中，到目前为止我只能添加 5.1。
3.  是否需要采取任何“技巧”来让 Xcode 4.5.2 准备 iOS 5.1.1 应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:23:09.917

1.  是的，但它可以尽可能低（针对所有 Xcode 关心的目标 iOS 4.3）。
2.  不，iOS 5.1.1 并未作为新模拟器发布（错误修复版本很少作为新模拟器发送给开发人员）。
3.  只需链接到可能的最高 SDK 并正确设置部署目标，就可以了。

# asp.net-mvc-3 - DropDownListFor 选择了错误的值

> ID：15115582
> 
> 赞同：1
> 
> 时间：2013-02-27T15:14:08.480
> 
> 标签：asp.net-mvc-3, dropdownlistfor

在 MVC 3 中，我有一个像这样的 EF 代码第一类：

```
 public class Client
{
    [Key]
    [MaxLength(4)]
    [Display(Name="labClientID", ResourceType=typeof(Resources.Translations.Client))]
    public string ClientID { get; set; }

    [MaxLength(50)]
    [Display(Name="labName", ResourceType=typeof(Resources.Translations.Client))]
    public string Name { get; set;}
} 
```

客户端用于例如以下 Person 类：

```
 public class Person
{

    [Key]
    [MaxLength(50)]
    public string UserID { get; set; }

    [MaxLength(50)]
    public string LastName { get; set; }

    [UIHint("ForeignKey")]
    [MaxLength(4)]

    public string ClientID { get; set; }

    public virtual Client Client { get; set; }
} 
```

客户的 ID 为 01,02,03 等

在编辑视图中，我对编辑人员视图有以下剃刀语句：

```
@Html.DropDownListFor(m => m.ClientID , new SelectList(ViewBag.Clients, "ClientID", "Name")) 
```

ViewBag.Clients 是在之前构建的：

```
ViewBag.Clients = (from x in Context.Client select new {x.ClientID, x.Name}); 
```

现在出现了奇怪的部分：独立于我为 person 类中的 ClientID 选择的值，当我打开包含 DropDownListFor 语句的编辑视图时，DropDownList 总是显示来自客户端表的第二个条目。

我调试了客户端 viewbag 并且它包含正确的值，我还使用了 editorfor 而不是 DropDownListFor 并且 person 实体中的 clientid 具有正确的值。

你知道问题出在哪里吗？

# c++ - 使用 C 单元测试框架测试嵌入式 C++ 代码的限制

> ID：15115584
> 
> 赞同：0
> 
> 时间：2013-02-27T15:14:17.333
> 
> 标签：c++, c, unit-testing, testing

我想尝试使用单元测试框架来测试我用 C、C++ 或有时 IEC 语言编写的代码。

所以我的问题是 -**使用 C 编写的单元测试框架来测试 C++ 代码是否有一些很大的限制**会限制我使用它？

* * *

*背景信息：* *我尝试了各种可用的开源框架——它们是用 C/C++ 编写的。最后我得出结论，用 C 编写的“嵌入式单元”和用 C++ 编写的“CppTest”是候选者（主要是因为测试必须在嵌入式平台上执行）。但在选择获胜者之前，我陷入了这个非常基本的问题。据我所知，我没有发现很大的限制。除了：在 C++ 单元测试框架中：我可以让 testClass 成为可测试类的朋友并测试它的私有属性/功能（这对我来说并不重要）。对不起，如果这是一个愚蠢的问题 - 我刚刚开始探索测试的世界。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:16:17.893

一个例子是，您将很难使用严格的 C 框架测试由您的被测代码生成的预期 C++ 异常。我确信这种方法还有其他漏洞，但这取决于您的 C++ 代码。

除非您有充分的理由，否则 CppTest 似乎是您的两位候选人的合乎逻辑的选择。我已在评论中链接到一个可能涵盖您错过的选项的问题。

# python - urllib.quote() 抛出 KeyError

> ID：15115588
> 
> 赞同：40
> 
> 时间：2013-02-27T15:14:25.447
> 
> 标签：python, unicode, urllib2, urlencode, urllib

为了对 URI 进行编码，我使用了`urllib.quote("schönefeld")`但是当字符串中存在一些非 ascii 字符时，它会

```
KeyError: u'\xe9'
Code: return ''.join(map(quoter, s)) 
```

我的输入字符串是`köln, brønshøj, schönefeld`等。

当我尝试在 Windows 中打印语句时（使用 python2.7，pyscripter IDE）。但是在linux中它会引发异常（我猜平台无关紧要）。

这就是我正在尝试的：

```
from commands import getstatusoutput
queryParams = "schönefeld";
cmdString = "http://baseurl" + quote(queryParams)
print getstatusoutput(cmdString) 
```

**探索问题原因：** 在`urllib.quote()`，实际上异常被抛出`return ''.join(map(quoter, s))`。

urllib 中的代码是：

```
def quote(s, safe='/'):
    if not s:
        if s is None:
            raise TypeError('None object cannot be quoted')
        return s
     cachekey = (safe, always_safe)
     try:
         (quoter, safe) = _safe_quoters[cachekey]
     except KeyError:
         safe_map = _safe_map.copy()
         safe_map.update([(c, c) for c in safe])
         quoter = safe_map.__getitem__
         safe = always_safe + safe
         _safe_quoters[cachekey] = (quoter, safe)
      if not s.rstrip(safe):
         return s
      return ''.join(map(quoter, s)) 
```

异常的原因是 in `''.join(map(quoter, s))`，对于 s 中的每个元素，都会调用 quoter 函数，最后将列表以 '' 连接并返回。

对于非 ascii char `è`，等效键将是变量`%E8`中出现的键。`_safe_map`但是当我调用 quote('è') 时，它会搜索 key `\xe8`。使键不存在并抛出异常。

所以，我只是在 try-except 块中`s = [el.upper().replace("\\X","%") for el in s]`调用之前进行了修改。`''.join(map(quoter, s))`现在它工作正常。

但是我很烦我所做的是正确的方法还是会产生任何其他问题？而且我确实有 200 多个 linux 实例，这很难在所有实例中部署此修复程序。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-27T15:19:23.247

您正在尝试引用 Unicode 数据，因此您需要决定如何将其转换为 URL 安全字节。

首先将字符串编码为字节。UTF-8 经常被使用：

```
>>> import urllib
>>> urllib.quote(u'sch\xe9nefeld')
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py:1268: UnicodeWarning: Unicode equal comparison failed to convert both arguments to Unicode - interpreting them as being unequal
  return ''.join(map(quoter, s))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py", line 1268, in quote
    return ''.join(map(quoter, s))
KeyError: u'\xe9'
>>> urllib.quote(u'sch\xe9nefeld'.encode('utf8'))
'sch%C3%A9nefeld' 
```

但是，编码*取决于服务器将接受的内容*。最好坚持发送原始表单的编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-17T11:42:26.807

通过将字符串转换为 unicode，我解决了这个问题。

这是片段：

```
try:
    unicode(mystring, "ascii")
except UnicodeError:
    mystring = unicode(mystring, "utf-8")
else:
    pass 
```

解决方案的详细描述可以在[http://effbot.org/pyfaq/what-does-unicodeerror-ascii-decoding-encoding-error-ordinal-not-in-range-128-mean.htm找到](http://effbot.org/pyfaq/what-does-unicodeerror-ascii-decoding-encoding-error-ordinal-not-in-range-128-mean.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-28T14:51:35.060

我有与@underscore 完全相同的错误，但在我的情况下，问题是 map(quoter,s) 试图查找`u'\xe9'`不在`_safe_map`. 但是，所以我通过`\xe9`替换in解决了这个问题。`u'\xe9'``\xe9``s`

此外，`return`语句不应该在`try/except`? 我还必须更改它以完全解决问题。

# go - sync/atomic.once.go 中的两个原子风格代码是否必要？

> ID：15115589
> 
> 赞同：3
> 
> 时间：2013-02-27T15:14:25.557
> 
> 标签：go

sync/atomic.once.go 中的代码是：

```
func (o *Once) Do(f func()) {
        if atomic.LoadUint32(&o.done) == 1 { //A
        //if o.done == 1 {
            return
        }
        // Slow-path.
        o.m.Lock()
        defer o.m.Unlock()
        if o.done == 0 {
            f()
            atomic.CompareAndSwapUint32(&o.done, 0, 1) //B
            //o.done = 1
        }
    } 
```

我不认为上面的两个“原子式”代码 A、B 是必要的或有用的。我认为锁就足够了，如果 A，B 不是原子风格，也可以。我必须错过一些东西，请告诉我代码 A，B 的用途。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:29:38.133

[原文](http://golang.org/src/pkg/sync/once.go?s=1040:1067#L32)是对的。原因是 Go[内存模型](http://golang.org/ref/mem)说，如果没有同步 ( `if o.done == 1`)，可能根本不会观察到对 o.done 的更改。

# css - Sass 中是否有替换函数/脚本来交换 CSS 属性？

> ID：15115594
> 
> 赞同：1
> 
> 时间：2013-02-27T15:14:50.447
> 
> 标签：css, function, sass, right-to-left

我正在研究 Sass 中从右到左的解决方案。

例如，如果原始样式是：

```
#foo {
  float: left;
  padding-left: 10px;
} 
```

...函数/脚本将通过查找浮点数和填充左侧运行并将样式替换为：

```
#foo {
  float: right;
  padding-right: 10px;
} 
```

我已经有了一个使用 mixins 的解决方案，如下所示：

```
@mixin float($origin: left) {
  @if $origin == left {
    @if $rtl { float: right; }
    @else    { float: left; }
  } @else {
    @if $rtl { float: left; }
    @else    { float: right; }
  }
}

@mixin padding-left($value) {
  padding-right: $value;
}

#foo {
  @include float(left);
  @include padding-left(10px);
} 
```

...但是有没有办法做到这一点而不必用包含替换所有可逆属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:58:57.057

你可以使用一个变量，这样你就可以在一个地方设置方向，但是 Sass 没有能力根据你设置的规则来改变现有的 CSS。

```
$direc: left; 

div {
  float: $direc;
  padding-#{$direc}: 10px;
} 
```

# css - 在 Codepen.io 上导入外部 CSS 文件时出现问题

> ID：15115596
> 
> 赞同：4
> 
> 时间：2013-02-27T15:14:51.823
> 
> 标签：css, pastebin

我喜欢使用[Codepen](http://codepen.io/)，我正在尝试从 Pastebin 导入一个 css[文件](http://pastebin.com/)。

这是我在 Pastebin 上托管的外部文件的链接：

[http://pastebin.com/raw.php?i=mj9dmzZw](http://pastebin.com/raw.php?i=mj9dmzZw)

在该文件中，我链接到我的实际字体文件。

我不确定我做错了什么。谁能指出我正确的方向，或者让我知道这是否可能。

这是实际的代码笔。[http://codepen.io/ryanjgill/pen/CLitH](http://codepen.io/ryanjgill/pen/CLitH)

在 CSS 部分中，我已经注释掉了我试图包含在外部 CSS 文件中的样式。如果您取消注释图标字体的样式，您将在“类型”列中看到图标。

我尝试在 codepen 内置的 css 部分的设置中链接苍蝇。并在 css 中使用“@include url(' [http://pastebin.com/raw.php?i=mj9dmzZw ')”。](http://pastebin.com/raw.php?i=mj9dmzZw)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:42:53.557

那么，在CodePen页面上，css输入框的右上角有一个小写字母'g'。我认为你可以在那里导入你的 .css。

如果您需要为您的文件添加一些**.css**扩展名以进行导入，只需创建一个新的 file.css 并从新的 file.css 中 @import 您的 Pastebin css

# android - 安卓应用开发软件

> ID：15115601
> 
> 赞同：-6
> 
> 时间：2013-02-27T15:15:12.807
> 
> 标签：android

什么是创建 Android 应用程序的最佳软件？该软件必须有可能与远程数据库进行字符串连接。此外，必须有可能创建或更改已创建的模板和屏幕。我认为该软件还需要为所有或仅选定的用户（选择某些特定类别的新闻或类似内容的用户）制作推送通知的可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:22:20.250

Eclipse [http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/) 或 IntelliJ [http://www.jetbrains.com/idea/](http://www.jetbrains.com/idea/)

Android SDK [http://developer.android.com/tools/index.html](http://developer.android.com/tools/index.html)

# asp.net-mvc - ASP.NET MVC 4 - ModelBinder 错误

> ID：15115604
> 
> 赞同：4
> 
> 时间：2013-02-27T15:15:18.650
> 
> 标签：asp.net-mvc, model-binding

所以我在玩我的 ASP.NET MVC 4 解决方案。每件事都运行良好，不断添加东西，但奇怪的事情开始发生。

我的模型属性之一为空，即使我在 Json 中有项目传递给它。

这是传递给它的 javascript 对象/json：

```
var obj = {
    "plc": "False",
    "al": ["386", "710"],
    "pl": ["9530", "211", "783"]
}; 
```

我正在使用自定义模型活页夹......认为这可能是问题，所以我将其关闭。

尝试使用 .NET 中的 JavaScriptSerializer 来查看它是否有效：

```
var reader = new StreamReader(Request.InputStream);
Request.InputStream.Position = 0;
var readToEnd = reader.ReadToEnd();

var javaScript = new JavaScriptSerializer();
var searchFarmOptions = javaScript.Deserialize<Test>(readToEnd); 
```

设置了所有属性... WOOT。

所以我尝试了一个干净的 ASP.NET MVC 4 解决方案。重现错误。

### 这是来自 Index.cshtml 视图

```
@{
    ViewBag.Title = "title";
}

<h1>Title</h1>
Testing ... 
<script src="/Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
<script>
$(function() {
    var obj = {
        "1pllort": "False",
        "1plc": "true",
        "al": ["386", "710"],
        "pl": ["9530", "211", "783"]
    };

    var options = {
        "contentType": "application/json; charset=UTF-8",
         "type": "POST",
         "data" : JSON.stringify(obj)
    };
    $.ajax("/Home/TestPost", options).done(function(data) {
        console.log(data);
    });
});
</script> 
```

### 这是我的家庭控制器

```
using System.Collections.Generic;
using System.Web.Mvc;

namespace MvcApplication3.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View("Index");
        }

        [HttpPost]
        public ActionResult TestPost(Test model)
        {
            return Json(model);
        }
    }

    public class Test
    {
        public List<int> PL { get; set; }
        public List<int> AL { get; set; }
        public bool PLC { get; set; }
        public bool ALC { get; set; }
    }
} 
```

是的，错误仍然存​​在。

每当我有一个以“pl”开头的属性时，因为我的列表名称是..“pl”列表为空。

此外，它可以是任何以“pl”开头的名称......比如“plchecked”

如果我将“plc”重命名为“cpl”它的工作。

那么这里发生了什么......模型绑定器中有任何命名限制吗？我在这里想念什么？

## 更新 1

### 工作

PL 服务器端现在有正确的值，等等。不是 null，而是数字列表。

```
var obj = {
    "pl": ["9530", "211", "783"],
    "1plc": "false",
    "pl-some-odd-value": "false",
    "al": ["386", "710"],
    "alc": "false"
}; 
```

### 不工作

PL 服务器端现在具有`null`价值。

```
var obj = {
    "pl": ["9530", "211", "783"],
    "al": ["386", "710"],
    "alc": "false",
    "pl-odd-value": "false"
}; 
```

### 工作

PL 在 json 对象字符串中具有 3 个值...

```
var obj = {
    "pl": ["9530", "211", "783"],
    "al": ["386", "710"],
    "alc": "false",
    "odd-value-pl": "false"
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T06:06:35.147

安装[ImranB.ModelBindingFix nuget 包](https://www.nuget.org/packages/ImranB.ModelBindingFix/1.0.0)。我认为您遇到了我在[此博客文章](http://weblogs.asp.net/imranbaloch/archive/2012/12/08/fixing-model-the-binding-issue-of-asp-net-mvc-and-asp-net-web-api.aspx)中讨论过的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T02:36:24.177

肯定有bug。我只是花了几个小时调试 MVC 4 源代码来解决同样的问题。主要原因是您有一个集合，其名称是另一个属性名称的开头。在您的示例中：pl 和 pl-odd-value。

如果您多玩一些，您可能会发现有时它可以正常工作。它看起来是随机的原因是模型绑定器执行二进制搜索来定位要绑定的值。二进制搜索使用“分而治之”的方法在已发布的属性的排序列表中查找属性。如果搜索在其分而治之的过程中测试 p1-odd-value，就会出现问题。如果搜索跳过这个值，没问题。

当您仅拥有具有 1 个元素的 pl 集合和对象中的 pl-odd-value 属性时，此问题最容易重复。

这是与此相关的更多信息。有一个返回的所有值的 sortedList。如果您的测试失败，排序列表如下所示：

```
alc, "false",
al[0], "386"
al[1], "710"
pl-odd-value, "false"
pl[0], "9530"
pl[1], "211"
pl[2], "783" 
```

请注意，排序顺序使用 StringComparer.OrdinalIgnoreCase，它将方括号项放置在纯文本项之后。当 MVC 对 al 或 pl 集合执行二分搜索时，它正在搜索 al 或 pl，而不是 al[ 或 pl[。通过搜索不带方括号的集合名称，al < alc，不大于 alc。问题是我们想要处理 alc 或 pl-odd-value 以获取集合。

解决方法是确保您的任何属性名称都不以您的任何集合属性名称的名称开头。将您的 al 集合重命名为 al_collection，将您的 pl 集合重命名为 pl_collection。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-21T18:48:15.680

很好的答案！

我今天遇到了同样的问题，我花了将近 3 个小时试图找出问题所在，突然我意识到具有相同前缀的属性有些奇怪

更多信息在这里：

*   [https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=mvc+4+model+binder+bug](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=mvc+4+model+binder+bug)
*   [ASP.NET MVC 4 - ModelBinder 错误](https://stackoverflow.com/questions/15115604/asp-net-mvc-4-modelbinder-bug)
*   [https://gist.github.com/adamchester/5606734](https://gist.github.com/adamchester/5606734)

# python - urllib2 python（传输编码：分块）

> ID：15115606
> 
> 赞同：5
> 
> 时间：2013-02-27T15:15:26.457
> 
> 标签：python, urllib2, chunked, transfer-encoding

我使用以下 python 代码下载了 html 页面：

```
response = urllib2.urlopen(current_URL)
msg = response.read()  
print msg 
```

对于像[这样](http://www.legifrance.gouv.fr/affichJuriJudi.do?oldAction=rechJuriJudi&idTexte=JURITEXT000024053954&fastReqId=660326373&fastPos=1)的页面，它打开 url 时不会出错，但随后只打印 html 页面的一部分！

在以下几行中，您可以找到 html 页面的 http 标头。我认为问题是由于“传输编码：分块”。

似乎 urllib2 只返回第一个块！我在阅读剩余的部分时遇到了困难。我如何读取剩余的块？

```
Server: nginx/1.0.5
Date: Wed, 27 Feb 2013 14:41:28 GMT
Content-Type: text/html;charset=UTF-8
Transfer-Encoding: chunked
Connection: close
Set-Cookie: route=c65b16937621878dd49065d7d58047b2; Path=/
Set-Cookie: JSESSIONID=EE18E813EE464664EA64086D5AE9A290.tpdjo13v_3; Path=/
Pragma: No-cache
Cache-Control: no-cache,no-store,max-age=0
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Vary: Accept-Encoding
Content-Language: fr 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T17:06:35.223

我发现如果我指定了 Accept-Language 标头，则服务器不会丢弃 TCP 连接，否则会。

```
curl -H "Accept-Language:uk,en-US;q=0.8,en;q=0.6,ru;q=0.4" -v 'http://www.legifrance.gouv.fr/affichJuriJudi.do?oldAction=rechJuriJudi&idTexte=JURITEXT000024053954&fastReqId=660326373&fastPos=1' 
```

# jsf-2 - 视图中复合组件的多个实例？

> ID：15115611
> 
> 赞同：2
> 
> 时间：2013-02-27T15:15:37.607
> 
> 标签：jsf-2, composite-component

我读了很多类似的问题，但我不知道如何解决我的问题：

我编写了一个复合组件，它由一个视图范围的、自包含的托管 bean 支持。
该组件由一个自动完成文本框和一个打开对话框的按钮组成。用户可以通过名称（自动完成）或在树中选择一个节点（对话框）来选择一个项目。
支持 bean 实现了所有需要的东西（数据访问、树逻辑等），并且应该公开选定的项目（作为 POJO）。

现在我有两个问题：

1.  由于树管理的复杂性，`selectedObj`属性由 getter 和 setter 访问，它们在 bean 中做一些事情：它们不仅仅是访问类字段。现在我将整个 bean 作为属性传递。我怎样才能使 bean`selectedObj`成为我的复合组件的“值”属性？

2.  如何在同一个视图中使用我的组件的多个实例？

这是组件的示例：

```
<cc:interface>
    <cc:attribute name="bean" type="com.yankee.OUTreeBean" required="true"/>
    <cc:attribute name="listener" method-signature="void listener()"/>
</cc:interface>
<cc:implementation>
    <p:dialog id="#{cc.id}_dialog" widgetVar="_dlg" header="Select OU" modal="true" dynamic="true" >
        <p:toolbar>
            <!-- some buttons to refresh, expand, collapse etc. -->
        </p:toolbar>
        <p:tree id="#{cc.id}_tree" value="#{cc.attrs.bean.root}" var="node"
                selectionMode="single"
                selection="#{cc.attrs.bean.selectedNode}">
            <p:ajax event="select" update="@form" listener="#{cc.attrs.listener}" oncomplete="if (!args.validationFailed) _dlg.hide()" />
            <p:treeNode>  
                <h:outputText value="#{node.OU_NAME}" />  
            </p:treeNode>  
        </p:tree>
    </p:dialog>

    <p:autoComplete id="#{cc.id}_inner" value="#{cc.attrs.bean.selectedObj}" completeMethod="#{cc.attrs.bean.completeObj}"  
                    var="obj" itemLabel="#{obj.OU_NAME}" itemValue="#{obj}" 
                    forceSelection="true" 
                    converter="ouConverter"
                    multiple="false" 
                    minQueryLength="2">
        <p:ajax event="itemSelect" listener="#{cc.attrs.listener}" update="@form"/>
    </p:autoComplete>
    <div style="float: right">
        <p:commandButton id="bSearch" icon="ui-icon-search" onclick="_dlg.show()"/>
    </div>
</cc:implementation> 
```

COMPONENT 的 backing bean：

```
@ManagedBean
@ViewScoped
public class OUTreeBean implements Serializable {
    private static final long serialVersionUID = 1L;

    private List<OU> data;  // Data as plain list
    protected TreeNode root;  // root node of data as a tree
    protected TreeNode selectedNode;

    @PostConstruct
    private void init() throws SQLException {
        refreshData();
    }

    public OU getSelectedObj() {
        if (selectedNode == null) {
            return null;
        }
        return ((OU) selectedNode.getData());

    }
    public void setSelectedObj(OU ou) {
        // Find the right tree node and do whatever needed
    }
    public TreeNode selectedNode getSelectedNode() {
        // Blah blah
    }
    public void setSelectedNode(TreeNode selectedNode) {
        // Blah blah
    }
    public List<OU> completeObj(String namePattern) {
        // Autocomplete handler
    }
    public void refreshData() {
        // Blah blah
    }
    // etc...

} 
```

使用页面摘录：

```
<ism:selectOUTree id="cbSelectOu" bean="#{myBean.ouFilterBean}" listener="#{myBean.onOUChange}"/> 
```

PAGE 的支持 bean：

```
@ManagedBean
@ViewScoped
public class MyBean implements Serializable {

    private static final long serialVersionUID = 1L;
    @ManagedProperty("#{oUTreeBean}")
    private OUTreeBean ouFilterBean;

    public void onOUChange() throws SQLException {
        // Blah blah
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:39:39.723

几天前我遇到了同样的问题。就像你一样，我用作`ManagedBean`应该完成这项工作的对象。一段时间后，我发现我应该只创建`FacesComponent`. 我是 JSF 的新手，所以找到解决方案并不容易，但它解决了我所有的问题。它是这样工作的：

视图.xhtml

```
<h:body>
    <cc:interface componentType="playerComponent">
        <cc:attribute name="playerId" required="true"/>
    </cc:interface>
    <cc:implementation>
        <c:set var="inplaceId" value="inplace-#{cc.attrs.playerId}" />
        <c:set var="outputId" value="output-#{cc.attrs.playerId}" />
        <h:form id="form-#{cc.attrs.playerId}">
            <p:inplace editor="false" widgetVar="#{inplaceId}">
                <h:inputText value="#{cc.player.name}" id="outputId"/>
                <p:commandButton onclick="#{inplaceId}.save()" action="#{cc.save}" update="#{outputId}" value="save" />
                <p:commandButton onclick="#{inplaceId}.cancel()" update="#{outputId}" value="cancel"  />
            </p:inplace>
        </h:form>
    </cc:implementation>
</h:body> 
```

播放器组件.java

```
@FacesComponent("playerComponent")
public class PlayerComponent extends UINamingContainer {

    private Player player;

    private void init() {
        Object idObj = getAttributes().get("playerId");
        if (idObj != null) {
            // create player object
        }
    }

    public void save() {
        // save player object
    }

    public Player getPlayer() {
        if (player == null) {
            init();
        }
        return player
    }
} 
```

Player.java（实体）

```
public class Player {
    private name;
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

正如我所写的，我是 JSF 中的新手，可能应该以不同的方式创建播放器对象（`@PostConstruct`在构造函数中使用 on？），但这项工作。

# c# - 找到多个与请求匹配的操作

> ID：15115613
> 
> 赞同：3
> 
> 时间：2013-02-27T15:15:43.270
> 
> 标签：c#, asp.net-web-api, asp.net-mvc-routing

我已经阅读了很多关于路由和控制器的问题，但我根本找不到我要找的东西。我有这个具有这种结构的控制器：

**更新：**包括完整的课程来源。

```
public class LocationsController : ApiController
{
    private readonly IUnitOfWork _unitOfWork;

    public LocationsController(IUnitOfWork unitOfWork)
    {
        _unitOfWork = unitOfWork;
    }

    // GET /api/locations/id
    public Location Get(Guid id)
    {
        return this.QueryById<Location>(id, _unitOfWork);
    }

    // GET /api/locations
    public IQueryable<Location> Get()
    {
        return this.Query<Location>(_unitOfWork);
    }

    // POST /api/locations
    public HttpResponseMessage Post(Location location)
    {
        var id = _unitOfWork.CurrentSession.Save(location);
        _unitOfWork.Commit();

        var response = Request.CreateResponse<Location>(HttpStatusCode.Created, location);
        response.Headers.Location = new Uri(Request.RequestUri, Url.Route(null, new { id }));

        return response;
    }

    // PUT /api/locations
    public Location Put(Location location)
    {
        var existingLocation = _unitOfWork.CurrentSession.Query<Location>().SingleOrDefault(x => x.Id == location.Id);

        //check to ensure update can occur
        if (existingLocation == null)
        {
            throw new HttpResponseException(HttpStatusCode.NotFound);
        }
        //merge detached entity into session
        _unitOfWork.CurrentSession.Merge(location);
        _unitOfWork.Commit();

        return location;
    }

    // DELETE /api/locations/5
    public HttpResponseMessage Delete(Guid id)
    {
        var existingLocation = _unitOfWork.CurrentSession.Query<Location>().SingleOrDefault(x => x.Id == id);

        //check to ensure delete can occur
        if (existingLocation != null)
        {
            _unitOfWork.CurrentSession.Delete(existingLocation);
            _unitOfWork.Commit();
        }

        return new HttpResponseMessage(HttpStatusCode.NoContent);
    }

    // rpc/locations
    public HttpResponseMessage Dummy()
    {
        // I use it to generate some random data to fill the database in a easy fashion
        Location location = new Location();
        location.Latitude = RandomData.Number.GetRandomDouble(-90, 90);
        location.Longitude = RandomData.Number.GetRandomDouble(-180, 180);
        location.Name = RandomData.LoremIpsum.GetSentence(4, false);

        var id = _unitOfWork.CurrentSession.Save(location);
        _unitOfWork.Commit();

        var response = Request.CreateResponse<Location>(HttpStatusCode.Created, location);
        response.Headers.Location = new Uri(Request.RequestUri, Url.Route(null, new { id }));

        return response;
    }
} 
```

我的路线定义（Global.asax）：

```
public static void RegisterRoutes(RouteCollection routes)
{
    // Default route
    routes.MapHttpRoute(
        name: "Default",
        routeTemplate: "{controller}/{id}",
        defaults: new { id =  RouteParameter.Optional }
    );

    // A route that enables RPC requests
    routes.MapHttpRoute(
        name: "RpcApi",
        routeTemplate: "rpc/{controller}/{action}",
        defaults: new { action = "Get" }
    );
} 
```

到目前为止，如果我点击浏览器：

*   `[baseaddress]/locations/s0m3-gu1d-g0e5-hee5eeeee`// 有用
*   `[baseaddress]/locations/` // 找到多个结果
*   `[baseaddress]/rpc/locations/dummy` // 有用

最奇怪的是，**这曾经可以工作**，直到我在执行一些更新时弄乱了我的 NuGet。我在这里想念什么？

以 GET、POST、PUT 或 delete 开头的动词将自动映射到第一条路线，我的虚拟测试方法将通过 rpc 调用，这将落入第二条路线。

抛出的错误是`InvalidOperationException`消息

> 找到与请求匹配的多个操作： System.Linq.IQueryable`1[Myproject.Domain.Location] Get() on type Myproject.Webservices.Controllers.LocationsController System.Net.Http.HttpResponseMessage Dummy() on type Myproject.Webservices .Controllers.LocationsController

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T15:29:43.363

问题在于路由的加载顺序。如果他们是这样的：

```
// A route that enables RPC requests
routes.MapHttpRoute(
    name: "RpcApi",
    routeTemplate: "rpc/{controller}/{action}",
    defaults: new { action = "Get" }
);

// Default route
routes.MapHttpRoute(
    name: "Default",
    routeTemplate: "{controller}/{id}",
   defaults: new { id =  RouteParameter.Optional }
); 
```

它会正常工作。首先，请求将映射到 RPC，然后映射到控制器（它们可能有也可能没有 Id）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T12:31:31.273

我们还可以为 Api 控制器创建自定义操作选择器，如下所示，以便可以使用传统的“GET、POST、PUT、DELETE”自由处理复杂类型：

```
 class ApiActionSelector : IHttpActionSelector
    {
        private readonly IHttpActionSelector defaultSelector;

        public ApiActionSelector(IHttpActionSelector defaultSelector)
        {
            this.defaultSelector = defaultSelector;
        }
        public ILookup<string, HttpActionDescriptor> GetActionMapping(HttpControllerDescriptor controllerDescriptor)
        {
            return defaultSelector.GetActionMapping(controllerDescriptor);
        }
        public HttpActionDescriptor SelectAction(HttpControllerContext controllerContext)
        {
            // Get HttpMethod from current context
            HttpMethod httpMethod = controllerContext.Request.Method;

            // Set route values for API
            controllerContext.RouteData.Values.Add("action", httpMethod.Method);

            // Invoke Action
            return defaultSelector.SelectAction(controllerContext);
        }
    } 
```

我们可以在 WebApiConfig 中将其注册为：

```
 config.Services.Replace(typeof(IHttpActionSelector), new
 ApiActionSelector(config.Services.GetActionSelector())); 
```

可以帮助正在运行此类问题的用户。

# mysql - 将 m2m 更改为 char 时，Django South 迁移失败

> ID：15115614
> 
> 赞同：1
> 
> 时间：2013-02-27T15:15:43.347
> 
> 标签：mysql, django, django-south

我有一个现有的 Django 项目，之前成功迁移了 25 次。

我将模型中的一些字段更改为不同的类型，例如将 m2m 字段更改为文本字段，我现在正在尝试迁移它。

我跑了：

`python manage.py schemamigration backend --auto`

进而

`python manage.py migrate`

我得到以下信息

> 后端：0026_auto__del_vehicle__del_assetproperty__del_liabilityproperty__del_banka 致命错误 - 以下 SQL 查询失败：ALTER TABLE `backend_userprofile`MODIFY `previous_address`longtext NULL;; 错误是：（1170，“在没有密钥长度的密钥规范中使用了 BLOB/TEXT 列 'previous_address'”）！在实际运行迁移过程中发现错误！中止。

```
 ! Since you have a database that does not support running
 ! schema-altering statements in transactions, we have had 
 ! to leave it in an interim state between migrations.

! You *might* be able to recover with:   = CREATE INDEX `backend_userprofile_a44d8d16` ON `backend_userprofile` (`employer_address_id`); []
   = CREATE INDEX `backend_userprofile_eb751626` ON `backend_userprofile` (`previous_address_id`); []
   = CREATE INDEX `backend_userprofile_174f2184` ON `backend_userprofile` (`employer_phone_id`); []
   = CREATE TABLE `backend_vehicle` (`make` varchar(30) NOT NULL, `financial_status` integer NOT NULL, `values` numeric(30, 2) NOT NULL, `year` date NOT NULL, `model` varchar(30) NOT NULL, `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY); []
   = CREATE TABLE `backend_assetproperty` (`registered_name` varchar(30) NOT NULL, `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `estimate_value` numeric(30, 2) NOT NULL, `purchase_price` numeric(30, 2) NOT NULL); []
   = CREATE TABLE `backend_liabilityproperty` (`taxes_included` bool NOT NULL, `insured` bool NOT NULL, `monthly_payment` numeric(30, 2) NOT NULL, `payment_type` integer NOT NULL, `landlord` varchar(30) NOT NULL, `property_taxes` numeric(30, 2) NOT NULL, `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `amount_owing` numeric(30, 2) NOT NULL); []
   = CREATE TABLE `backend_bankaccountasset` (`balance` numeric(30, 2) NOT NULL, `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `bank_name` varchar(30) NOT NULL); []
   = CREATE TABLE `backend_credit` (`paid_in_full` bool NOT NULL, `monthly_payment` numeric(30, 2) NOT NULL, `person_business` integer NOT NULL, `balance` numeric(30, 2) NOT NULL, `institution_name` varchar(30) NOT NULL, `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `credit_limit` numeric(30, 2) NOT NULL); []
   = DROP TABLE `backend_liability` CASCADE; []
   = DROP TABLE `backend_asset` CASCADE; []
   = DROP TABLE `backend_otherincome` CASCADE; []
   = ALTER TABLE `backend_userprofile` ADD COLUMN `bank_branch_number` integer NULL; []
   - no dry run output for alter_column() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` ADD COLUMN `address_id` integer NULL; []
   - no dry run output for alter_column() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` ADD COLUMN `gross_monthly_income` numeric(30, 2) NULL; []
   - no dry run output for alter_column() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` ADD COLUMN `other_income` numeric(30, 2) NULL; []
   - no dry run output for alter_column() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` ADD COLUMN `bank_phone_id` integer NULL; []
   - no dry run output for alter_column() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` ADD COLUMN `bank_contact_details_id` integer NULL; []
   - no dry run output for alter_column() due to dynamic DDL, sorry
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `current_address` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `current_unit_number` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `current_city` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `current_province` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `current_postal_code` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `current_time_at_residence` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `previous_unit_number` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `previous_city` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `previous_province` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `previous_postal_code` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `employment_position` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `employmer_manager_name` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `employment_duration_years` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `employment_duration_months` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `employer_unit_number` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `employer_city` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `employer_province` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `employer_postal_code` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `previous_employment_type` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `previous_employer_phone` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `previous_employer_address` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `previous_employer_unit_number` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `previous_employer_city` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `previous_employer_province` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `previous_employer_postal_code` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `employment_monthly_income` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `bank_contact_phone` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `bank_contact_fax` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `bank_institution_number` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `bank_transit_number` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `bank_address` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `bank_unit_number` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `bank_city` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `bank_province` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `bank_postal_code` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `residence_type` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `residence_value` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `residence_monthly_payment` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `claimed_bankruptcy` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `fraud_alerts` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `credit_consent` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `notes` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `signature` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `cobuyer_relationship` CASCADE; []
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   = ALTER TABLE `backend_userprofile` DROP COLUMN `cobuyer_other` CASCADE; []
   = CREATE TABLE `backend_userprofile_vehicles` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `userprofile_id` integer NOT NULL, `vehicle_id` integer NOT NULL); []
   = ALTER TABLE `backend_userprofile_vehicles` ADD CONSTRAINT `backend_userprofile_vehicl_userprofile_id_2118f7c8e02a7a01_uniq` UNIQUE (`userprofile_id`, `vehicle_id`) []
   = CREATE TABLE `backend_userprofile_bank_accounts_asset` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `userprofile_id` integer NOT NULL, `bankaccountasset_id` integer NOT NULL); []
   = ALTER TABLE `backend_userprofile_bank_accounts_asset` ADD CONSTRAINT `backend_userprofile_bank_a_userprofile_id_3780e7dea36fdd1b_uniq` UNIQUE (`userprofile_id`, `bankaccountasset_id`) []
   = CREATE TABLE `backend_userprofile_credit` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `userprofile_id` integer NOT NULL, `credit_id` integer NOT NULL); []
   = ALTER TABLE `backend_userprofile_credit` ADD CONSTRAINT `backend_userprofile_credit_userprofile_id_aa5c94a808f9fb7_uniq` UNIQUE (`userprofile_id`, `credit_id`) []
   = CREATE TABLE `backend_userprofile_property_asset` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `userprofile_id` integer NOT NULL, `assetproperty_id` integer NOT NULL); []
   = ALTER TABLE `backend_userprofile_property_asset` ADD CONSTRAINT `backend_userprofile_proper_userprofile_id_3397e38f7c83f4db_uniq` UNIQUE (`userprofile_id`, `assetproperty_id`) []
   = CREATE TABLE `backend_userprofile_liability_properties` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `userprofile_id` integer NOT NULL, `liabilityproperty_id` integer NOT NULL); []
   = ALTER TABLE `backend_userprofile_liability_properties` ADD CONSTRAINT `backend_userprofile_liabil_userprofile_id_21457cbf6edd1007_uniq` UNIQUE (`userprofile_id`, `liabilityproperty_id`) []
   = DROP TABLE `backend_userprofile_other_income` CASCADE; []
   = DROP TABLE `backend_userprofile_assets` CASCADE; []
   = DROP TABLE `backend_userprofile_liabilities` CASCADE; []
   = 
            SELECT kc.`constraint_name`, kc.`column_name`, kc.`table_name`,
                kc.`referenced_table_name`, kc.`referenced_column_name`
            FROM information_schema.key_column_usage AS kc
            WHERE
                kc.table_schema = %s
         ['pomelo_walker']
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   - no dry run output for alter_column() due to dynamic DDL, sorry
   = 
            SELECT kc.`constraint_name`, kc.`column_name`, kc.`table_name`,
                kc.`referenced_table_name`, kc.`referenced_column_name`
            FROM information_schema.key_column_usage AS kc
            WHERE
                kc.table_schema = %s
         ['pomelo_walker']
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   - no dry run output for alter_column() due to dynamic DDL, sorry
   = 
            SELECT kc.`constraint_name`, kc.`column_name`, kc.`table_name`,
                kc.`referenced_table_name`, kc.`referenced_column_name`
            FROM information_schema.key_column_usage AS kc
            WHERE
                kc.table_schema = %s
         ['pomelo_walker']
   - no dry run output for delete_foreign_key() due to dynamic DDL, sorry
   - no dry run output for alter_column() due to dynamic DDL, sorry

 ! The South developers regret this has happened, and would
 ! like to gently persuade you to consider a slightly
 ! easier-to-deal-with DBMS (one that supports DDL transactions)
 ! NOTE: The error which caused the migration to fail is further up.
Error in migration: backend:0026_auto__del_vehicle__del_assetproperty__del_liabilityproperty__del_banka
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/south/management/commands/migrate.py", line 108, in handle
    ignore_ghosts = ignore_ghosts,
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/south/migration/__init__.py", line 213, in migrate_app
    success = migrator.migrate_many(target, workplan, database)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/south/migration/migrators.py", line 235, in migrate_many
    result = migrator.__class__.migrate_many(migrator, target, migrations, database)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/south/migration/migrators.py", line 310, in migrate_many
    result = self.migrate(migration, database)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/south/migration/migrators.py", line 133, in migrate
    result = self.run(migration)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/south/migration/migrators.py", line 107, in run
    return self.run_migration(migration)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/south/migration/migrators.py", line 81, in run_migration
    migration_function()
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/south/migration/migrators.py", line 57, in <lambda>
    return (lambda: direction(orm))
  File "/Users/chungwu/Sites/pomelo/walkerfinancial/backend/migrations/0026_auto__del_vehicle__del_assetproperty__del_liabilityproperty__del_banka.py", line 347, in forwards
    db.alter_column('backend_userprofile', 'previous_address', self.gf('django.db.models.fields.TextField')(null=True))
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/south/db/generic.py", line 44, in _cache_clear
    return func(self, table, *args, **opts)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/south/db/generic.py", line 527, in alter_column
    self.execute("ALTER TABLE %s %s;" % (self.quote_name(table_name), sql), values)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/south/db/generic.py", line 273, in execute
    cursor.execute(sql, params)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/django/db/backends/util.py", line 40, in execute
    return self.cursor.execute(sql, params)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 114, in execute
    return self.cursor.execute(query, args)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/MySQLdb/cursors.py", line 201, in execute
    self.errorhandler(self, exc, value)
  File "/Users/chungwu/.virtualenvs/walkerfinancial/lib/python2.7/site-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
django.db.utils.DatabaseError: (1170, "BLOB/TEXT column 'previous_address' used in key specification without a key length") 
```

有什么想法可以解决这个问题吗？

我正在运行 Django 1.4.5 和 South 0.7.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:08:47.173

首先从您的应用程序的迁移文件夹中删除您的最后一次迁移。

然后我建议删除 m2m 字段，创建迁移，然后添加新的文本字段并创建另一个迁移。我认为，如果您分两步进行，South 应该能够处理此过程。

# php - 插入新记录时将一个表中的 ID 插入到另一个表中

> ID：15115619
> 
> 赞同：0
> 
> 时间：2013-02-27T15:15:59.523
> 
> 标签：php, mysql, insert

我有一个表格，其中包含员工的个人信息。我更新了表单，并将其插入到名为`employee_info`. 它使用详细信息更新表并插入一个 NEW ID( `employee_id`)。在我的数据库中，我有另一个名为 的表`department_info`，相关的字段是`department_id`。这是 php 标记，用于将数据插入数据库：

```
$sql_data_array = array('employee_firstname' => $employee_firstname); //other variables go here

if (ACCOUNT_DOB == 'true') $sql_data_array['driver_dob'] = tep_date_raw($driver_dob);

tep_db_perform(TABLE_EMPLOYEES, $sql_data_array);

$employee_id = tep_db_insert_id(); 
```

我需要做的是，当表单被更新并且数据被插入到`employee_info`表中时，我需要它来插入一个新的 id `employee_id`（这已经发生了），并将它插入`department_id`到`employee_info`表中。

`department_id`用于登录，我想显示属于该部门的员工列表。谁能告诉我我会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:18:06.353

当您使用 PHP 插入时，大多数实现都会返回所谓的最后插入 id。这是 AUTO_INCREMENT 列的值。

即使您的实现不支持它，也应该有一个返回它的函数。

**编辑：** 从您的更新来看，这似乎是 osCommerce。您的代码的问题在于方法 tep_db_perform 用于插入一个或多个元素。如果插入 2 行会发生什么？但在简单的情况下，使用 tep_db_insert_id()，它应该返回最后一个 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:24:59.580

php 函数 mysqli_insert_id 检索前一个查询（通常是 INSERT）为 AUTO_INCREMENT 列生成的 ID。获取此 id 并在其他表中使用它。

# jquery - Jquery：隐藏孩子 当用户在父级内部单击时

> ID：15115621
> 
> 赞同：4
> 
> 时间：2013-02-27T15:16:08.220
> 
> 标签：jquery

我有以下代码，并且希望在用户单击其父 DIV 内的任何位置时隐藏 DIV。如果用户在父 DIV 之外单击，则不会发生任何事情。

```
<div id="BodyField">
    <div class="video-field-new"></div>
</div> 
```

因此，当用户在#BodyField 内部单击时，我希望隐藏带有“video-field-new”的 DIV。

**背景**：当视频是新视频时，我有一个小横幅覆盖在角落的视频上，但我不希望它在用户播放视频时阻止视频播放器。所以理想情况下，当用户点击播放视频时，该视频位于#BodyField 内，然后横幅将隐藏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T15:18:22.833

```
$('#BodyField').on('click', function() {  
    $(this).children('.video-field-new').hide();
}); 
```

您还需要防止单击事件`.video-field-new`传播到其父级，否则单击要播放的视频将导致其自身被隐藏。

```
$('#BodyField .video-field-new').on('click', function(e) {  
    e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:20:32.933

```
$(".video-field-new:parent").click(function() {
    $(this).find(".video-field-new").hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:18:11.627

```
$("#BodyField").click(function(){ $(".video-field-new").hide(); }); 
```

# jquery - 在 jQuery 附加的元素上触发 Fancybox

> ID：15115623
> 
> 赞同：0
> 
> 时间：2013-02-27T15:16:12.530
> 
> 标签：jquery, fancybox, append

我试图在我附加 jQuery 的元素上触发 Fancybox，但没有成功。

这里是 Fancybox 触发代码：

```
jQuery(document).ready(function() {
    $("a#what_is_prehung").fancybox();
    $("a.prehungHelp").fancybox();
}); 
```

使用此代码，我将附加 html 标记：

```
jQuery(document).ready(function($) {
     $('.valueDoorSlabonly').append('<div id="prehungHelp"><a class="prehungHelp" href="/template/images/door-slab-only.jpg"></a></div>');
}); 
```

我需要在 class="prehungHelp" 的元素上触发 Fancybox。在我们的网站上，我们使用的是 jQuery v1.6.4，由于其他脚本仅使用此版本，因此无法对其进行更新。

[http://www.doorsandbeyond.com/avanti-modern-interior-door-black-apricot/](http://www.doorsandbeyond.com/avanti-modern-interior-door-black-apricot/) 这是它应该出现的页面，在“* 预挂：”单选按钮之后的部分中带有门选项的表格应该“ ？” 标记出现与描述此选项的模态窗口（fancybox）的链接。

我已经从几个资源中尝试了这个答案和其他一些答案，但没有成功： [如何将fancybox绑定到动态添加的元素？](https://stackoverflow.com/questions/9081571/how-to-bind-fancybox-to-dynamic-added-element) [使用 jQuery 附加动态生成的 html 不能很好地与 Fancybox 配合使用](https://stackoverflow.com/questions/3574100/appending-dynamically-generated-html-using-jquery-does-not-play-well-with-fancyb)

我会很感激任何帮助。谢谢谢里夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:25:19.630

* * *

**在使用 jQuery 附加“prehungHelp”**元素后尝试调用 fancybox

```
jQuery(document).ready(function($) {
    $('.valueDoorSlabonly').append('<div id="prehungHelp"><a class="prehungHelp" href="/template/images/door-slab-only.jpg"></a></div>');
    $("a.prehungHelp").fancybox();
}); 
```

# windows - 为什么有些程序在使用调试器时可以工作，但在运行正常的调试执行时却不行？

> ID：15115625
> 
> 赞同：3
> 
> 时间：2013-02-27T15:16:15.050
> 
> 标签：windows, visual-studio-2010, debugging, crash

我有好几次使用 Visual Studio 和其他东西编写程序，在换行符的某个地方。自然，我的第一个想法是在程序的早期设置一个断点，然后慢慢地逐行执行代码，直到出现错误。

但我经常发现，在调试器中缓慢单步执行代码时，一切正常。但是，当我只是尝试在没有断点的情况下运行程序时，出现了问题。

为什么会这样？逐行单步执行代码实际上与仅在 dubug 模式下运行程序不同吗？

*（我不是在谈论调试与发布，我是在谈论调试与逐行调试）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:24:14.837

一个原因可能是，当程序“全速”运行和在调试器中暂停线程时，多个执行线程之间会出现不同的时序问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:18:20.853

这可能是由于某些线程不安全的操作在单步执行代码时似乎正确发生，但在运行时却没有。编译器优化被排除在外，因为您确定您正在运行调试版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:22:10.923

在调试器中运行会大大改变运行时选项，例如。堆操作，以便可以检测到错误并将其呈现给用户。

见[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366705%28v=vs.85%29.aspx)。

> 当进程在任何调试器下运行时，会自动为进程中的所有堆启用某些堆调试选项。

这不确定您的问题，但可能是候选人。

# visual-studio - 我们可以通过命令行编译和签署 Windows 8 winjs 应用程序吗

> ID：15115630
> 
> 赞同：4
> 
> 时间：2013-02-27T15:16:26.653
> 
> 标签：visual-studio, windows-8, winjs

有没有办法使用命令行创建 Windows 8 winjs .appx 包文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T15:26:07.363

是的！在 .NET Framework 文件夹中查找 MSBuild.exe 可执行文件。你像这样运行它：

```
MSBuild.exe your/project.jsproj /p:Configuration=Release /t:Build /m 
```

您可以使用“调试”而不是“发布”，也可以使用“部署”而不是构建（如果以前没有安装，它将在本地安装应用程序）。

更多信息见[MSBuild 参考](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)。

[Rainbowdriver 项目中](https://github.com/rainbowdriver/rainbowdriver-node/blob/master/lib/builder.js)有一些使用示例，它使用 MSBuild 自动测试使用 Selenium 的 Windows 8 JS 应用程序。

# git - 跟踪子模块/子项目中的文件

> ID：15115631
> 
> 赞同：1
> 
> 时间：2013-02-27T15:16:29.913
> 
> 标签：git

我在主项目中有一个子项目。而且我想跟踪子项目中的文件，而不仅仅是更改。

文件/目录结构看起来像

主项目：

*   .git
*   测试.java
*   子项目
    *   .git
    *   子测试.java

因此，如果我推送 mainproj git 会忽略 subproj 中的文件。添加 Subtest.java 显式给出错误

```
git add subproj/Subtest.java

fatal: Path 'subproj/Subtest.java' is in submodule 'subproj' 
```

有没有一种简单的方法可以告诉 git 将子模块视为常规目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:05:15.213

我不这么认为。子模块是单独的 git 存储库，git 知道它们被不同的存储库跟踪并忽略它们。父存储库仅跟踪子模块的位置及其所在的提交位置。

要更新对子模块的更改，您需要转到该文件夹​​并创建一个分支（子模块最初是无头的）进行更改并将它们提交到子模块的存储库 - 根据需要推送。然后，回到主存储库，将需要进行提交以更新子模块现在正在进行的提交的知识。

使用子模块时，这是一个很好的参考： [Git Submodules:Adding, Using, Removing, Updating](http://chrisjean.com/2009/04/20/git-submodules-adding-using-removing-and-updating/)。

# c - 绑定驱动程序如何从从属接口获取 RX 数据包

> ID：15115636
> 
> 赞同：5
> 
> 时间：2013-02-27T15:16:38.837
> 
> 标签：c, linux-kernel, network-programming, linux-device-driver

我有一个关于如何绑定驱动程序从被奴役接口获取 RX 数据包的问题。我发现绑定`dev_add_pack()`用于为 LACPDU 和 ARP 数据包设置处理程序，但我没有找到其他处理程序（用于其他数据包类型）。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:57:09.403

绑定驱动程序注册自己的 Rx 处理程序，当从接口被绑定到绑定主机时，在 bond_enslave() 中您可以看到：

```
res = netdev_rx_handler_register(slave_dev, bond_handle_frame,
                                 new_slave); 
```

所以在bond_handle_frame()中，它会劫持slave接口接收到的数据包，让bond master代替接收数据包：

```
static rx_handler_result_t bond_handle_frame(struct sk_buff **pskb)
{
        struct sk_buff *skb = *pskb;
        struct slave *slave;
        struct bonding *bond;
        int (*recv_probe)(const struct sk_buff *, struct bonding *,
                          struct slave *);
        int ret = RX_HANDLER_ANOTHER;

        skb = skb_share_check(skb, GFP_ATOMIC);
        if (unlikely(!skb))
                return RX_HANDLER_CONSUMED;

        *pskb = skb;

        slave = bond_slave_get_rcu(skb->dev);
        bond = slave->bond;

        if (bond->params.arp_interval)
                slave->dev->last_rx = jiffies;

        recv_probe = ACCESS_ONCE(bond->recv_probe);
        if (recv_probe) {
                ret = recv_probe(skb, bond, slave);
                if (ret == RX_HANDLER_CONSUMED) {
                        consume_skb(skb);
                        return ret;
                }
        }

        if (bond_should_deliver_exact_match(skb, slave, bond)) {
                return RX_HANDLER_EXACT;
        }

        skb->dev = bond->dev;

        if (bond->params.mode == BOND_MODE_ALB &&
            bond->dev->priv_flags & IFF_BRIDGE_PORT &&
            skb->pkt_type == PACKET_HOST) {

                if (unlikely(skb_cow_head(skb,
                                          skb->data - skb_mac_header(skb)))) {
                        kfree_skb(skb);
                        return RX_HANDLER_CONSUMED;
                }
                memcpy(eth_hdr(skb)->h_dest, bond->dev->dev_addr, ETH_ALEN);
        }

        return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:09:41.717

我检查了绑定代码，发现当驱动程序在这些模式下工作时，驱动程序不会检查没有某些类型（LACPDU、ARP）的传入 RX 数据包。驱动程序使用 dev_add_pack() 函数为此数据包设置处理程序。

为了在实践中设置全局挂钩，您可以使用 nf_register_hook()，它为设置自己的网络过滤程序以拦截数据包提供接口。似乎 nf_register_hook() 比 dev_add_pack() 更强大，但我认为在工作 nf_register_hook() 时需要更加小心，因为如果钩子中的条件错误，它会丢弃很多数据包。

# objective-c - 使用 UITableView 向下钻取分层数据

> ID：15115637
> 
> 赞同：10
> 
> 时间：2013-02-27T15:16:39.157
> 
> 标签：objective-c, data-structures, uitableview, uistoryboard

我想构建一个应用程序来导航数据层次结构。此层次结构的结构类似于我在下图中显示的结构。结构的一个分支可能比其他分支具有更多级别。

![在此处输入图像描述](../Images/4ae4367f3e3b6b940388d9a0793cb2d7.png)

我想用这样的 TableViews 深入研究这个结构：

```
 A > AA > AAB > AABA 
```

或者

```
 A > AB > ABA 
```

我想知道的是，我的情节提要中是否只能有一个 TableViewController 并重用它来显示每个新级别的数据？我不想`tableviewcontrollers`在我的故事板中有一堆链接在一起，因为我不确定我是否会有 3、4 或 100 个级别的层次结构。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T15:57:34.963

要在 storyboard 中仅绘制一个 VC 递归到任意深度，请使用 storyboard 绘制顶层：一个导航​​控制器，其根部有一个表视图控制器。表 vc 应该是 UITableView 子类，并且在情节提要中具有情节提要标识符（例如“MyCustomTableVC”）。

给 MyCustomTableVC 一个公共属性（例如，ModelItem *node），它指示它应该在模型中显示哪个节点。

当表 vc 获取时，而不是故事板 segues，`didSelectRowAtIndexPath`让它创建另一个自身的实例......

```
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                         bundle: nil];
// Imagine it's called MyCustomTableVC
MyCustomTableVC *newVC = (MyCustomTableVC*)[mainStoryboard 
                    instantiateViewControllerWithIdentifier: @"MyCustomTableVC"]; 
```

将 newVC 模型节点设置为所选项目（模型中 indexPath.row 中的项目），然后推送到它...

```
// making up a lot of stuff about your model here, but hopefully you get the idea...
newVC.node = [self.model objectAtIndex:indexPath.row];
[self.navigationController pushViewController:newVC animated:YES]; 
```

这种方法具有获得所有导航控制器行为的好处：动画推送和弹出、后退按钮等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:30:54.240

当然，您可以重复使用`UITableView`. The`UITableView`有 2 个基本部分，the`UITableViewDelegate`和`UITableViewDataSource`.

[`UITableViewDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDelegate)控制很多表格交互和一些显示特性（`heightForRowAtIndexPath`等等）。当您选择一行时会发生什么。你甚至可以选择一行吗？

[`UITableViewDataSource`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDataSource)是井，数据的来源。表有几个部分？每个部分有多少行？第 X 节第 Y 行的单元格的内容是什么？

例如，您可以对层次结构中的每个表使用相同的`UITableView`和，但更改. 当您想更改数据源时，您可能会执行类似...`UITableViewDelegate``UITableViewDataSource`

```
if (isSingingBand) {
    self.tableview.dataSource = [TableABBADataSource alloc] init];
} else {
    self.tableview.dataSource = [TableAABDataSource alloc] init];
}
[self.tableview reloadData]; 
```

[Apple 的 Table Views 编程指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451)应该回答您可能遇到的很多问题。

# c - 使用 C 将整数转换为二进制表示？

> ID：15115646
> 
> 赞同：0
> 
> 时间：2013-02-27T15:17:07.450
> 
> 标签：c, binary

我仍然是编码的初学者所以我遇到了这个问题我正在尝试将整数转换为其二进制表示

```
 #include <stdio.h>
 int main () {
   int x;
   printf("input the number\n");
   scanf("%d",&x);

   while(x!=0) {
     if (x%2)
       printf("1");
     else
       printf("0");
   }
   return 0;
 } 
```

所以它输出像这样 12=0011 但 12=1100 有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T15:25:32.563

操作的程序逻辑错误，试试这个

```
#include <stdio.h>
int main()
{
    int n, c, k;

    printf("Enter an integer in decimal number system\n");
    scanf("%d", &n);
    printf("%d in binary number system is:\n", n);

    for (c = 31; c >= 0; c--)
    {
        k = n >> c;

        if (k & 1)
            printf("1");
        else
            printf("0");
        }

        printf("\n");
    } 
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:22:19.677

一个解决方案是使用递归。

```
void put_binary (unsigned int x)
{
    if (x <= 1) 
    {
        putchar('0' + x);
    }
    else
    {
        put_binary (x / 2u);
        putchar ('0' + x % 2u);
    }
} 
```

一种更有效的方法是使用按位运算符（它打印每个数字）。

```
#define GET_BIT(x, i) (((x) >> (i)) & 1)

void put_binary (unsigned int x)
{
    unsigned int max = sizeof x * CHAR_BIT;
    unsigned int i;

    for (i = 0u; i < max; i++)  
    {
        putchar ('0' + GET_BIT (x, max - i - 1u));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T15:25:29.907

```
bool seeOne = false;
for (int i = 0; i < sizeof(int); i++)
{
  int bit = (x >> sizeof(int) - 1 - i) & 1;
  if (bit)
  { 
    print("1");
    seeOne = true;
  }
  else
  {
    if (seeOne)
      print("0");
  }
} 
```

# jquery - 滑块示例中的 jquery 自定义滚动条

> ID：15115649
> 
> 赞同：1
> 
> 时间：2013-02-27T15:17:19.927
> 
> 标签：jquery, scrollbar, jquery-slider

我正在`jquery`从这里尝试一个示例：http: [//jqueryui.com/slider/#side-scroll](http://jqueryui.com/slider/#side-scroll) 我在“查看源代码”处复制了源代码，当我运行它时，它看起来几乎一样，但它是显示本机滚动条，而不是网站上显示的自定义滚动条。

谁能帮助我如何获得那些自定义滚动条？

为方便起见，我包含了源代码：

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Slider - Slider scrollbar</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <style>
  .scroll-pane { overflow: auto; width: 99%; float:left; }
  .scroll-content { width: 2440px; float: left; }
  .scroll-content-item { width: 100px; height: 100px; float: left; margin: 10px; font-size: 3em; line-height: 96px; text-align: center; }
  .scroll-bar-wrap { clear: left; padding: 0 4px 0 2px; margin: 0 -1px -1px -1px; }
  .scroll-bar-wrap .ui-slider { background: none; border:0; height: 2em; margin: 0 auto;  }
  .scroll-bar-wrap .ui-handle-helper-parent { position: relative; width: 100%; height: 100%; margin: 0 auto; }
  .scroll-bar-wrap .ui-slider-handle { top:.2em; height: 1.5em; }
  .scroll-bar-wrap .ui-slider-handle .ui-icon { margin: -8px auto 0; position: relative; top: 50%; }
  </style>
  <script>
  $(function() {
    //scrollpane parts
    var scrollPane = $( ".scroll-pane" ),
      scrollContent = $( ".scroll-content" );

    //build slider
    var scrollbar = $( ".scroll-bar" ).slider({
      slide: function( event, ui ) {
        if ( scrollContent.width() > scrollPane.width() ) {
          scrollContent.css( "margin-left", Math.round(
            ui.value / 100 * ( scrollPane.width() - scrollContent.width() )
          ) + "px" );
        } else {
          scrollContent.css( "margin-left", 0 );
        }
      }
    });

    //append icon to handle
    var handleHelper = scrollbar.find( ".ui-slider-handle" )
    .mousedown(function() {
      scrollbar.width( handleHelper.width() );
    })
    .mouseup(function() {
      scrollbar.width( "100%" );
    })
    .append( "<span class='ui-icon ui-icon-grip-dotted-vertical'></span>" )
    .wrap( "<div class='ui-handle-helper-parent'></div>" ).parent();

    //change overflow to hidden now that slider handles the scrolling
    scrollPane.css( "overflow", "hidden" );

    //size scrollbar and handle proportionally to scroll distance
    function sizeScrollbar() {
      var remainder = scrollContent.width() - scrollPane.width();
      var proportion = remainder / scrollContent.width();
      var handleSize = scrollPane.width() - ( proportion * scrollPane.width() );
      scrollbar.find( ".ui-slider-handle" ).css({
        width: handleSize,
        "margin-left": -handleSize / 2
      });
      handleHelper.width( "" ).width( scrollbar.width() - handleSize );
    }

    //reset slider value based on scroll content position
    function resetValue() {
      var remainder = scrollPane.width() - scrollContent.width();
      var leftVal = scrollContent.css( "margin-left" ) === "auto" ? 0 :
        parseInt( scrollContent.css( "margin-left" ) );
      var percentage = Math.round( leftVal / remainder * 100 );
      scrollbar.slider( "value", percentage );
    }

    //if the slider is 100% and window gets larger, reveal content
    function reflowContent() {
        var showing = scrollContent.width() + parseInt( scrollContent.css( "margin-left" ), 10 );
        var gap = scrollPane.width() - showing;
        if ( gap > 0 ) {
          scrollContent.css( "margin-left", parseInt( scrollContent.css( "margin-left" ), 10 ) + gap );
        }
    }

    //change handle position on window resize
    $( window ).resize(function() {
      resetValue();
      sizeScrollbar();
      reflowContent();
    });
    //init scrollbar size
    setTimeout( sizeScrollbar, 10 );//safari wants a timeout
  });
  </script>
</head>
<body>

<div class="scroll-pane ui-widget ui-widget-header ui-corner-all">
  <div class="scroll-content">
    <div class="scroll-content-item ui-widget-header">1</div>
    <div class="scroll-content-item ui-widget-header">2</div>
    <div class="scroll-content-item ui-widget-header">3</div>
    <div class="scroll-content-item ui-widget-header">4</div>
    <div class="scroll-content-item ui-widget-header">5</div>
    <div class="scroll-content-item ui-widget-header">6</div>
    <div class="scroll-content-item ui-widget-header">7</div>
    <div class="scroll-content-item ui-widget-header">8</div>
    <div class="scroll-content-item ui-widget-header">9</div>
    <div class="scroll-content-item ui-widget-header">10</div>
    <div class="scroll-content-item ui-widget-header">11</div>
    <div class="scroll-content-item ui-widget-header">12</div>
    <div class="scroll-content-item ui-widget-header">13</div>
    <div class="scroll-content-item ui-widget-header">14</div>
    <div class="scroll-content-item ui-widget-header">15</div>
    <div class="scroll-content-item ui-widget-header">16</div>
    <div class="scroll-content-item ui-widget-header">17</div>
    <div class="scroll-content-item ui-widget-header">18</div>
    <div class="scroll-content-item ui-widget-header">19</div>
    <div class="scroll-content-item ui-widget-header">20</div>
  </div>
  <div class="scroll-bar-wrap ui-widget-content ui-corner-bottom">
    <div class="scroll-bar"></div>
  </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:04:03.643

我发现了另一个非常轻量级的包含滚动条的插件：http: [//baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)

# php - 在 php 生成的电子邮件中包含链接

> ID：15115650
> 
> 赞同：1
> 
> 时间：2013-02-27T15:17:29.963
> 
> 标签：php, email

我正在尝试在由 php 生成的电子邮件中包含一个链接。我已经查看了此处可以找到的示例，但我仍然无法让我的工作并需要一些帮助。这是我所拥有的：

```
 //send email when pricing specs are done
$to = $email;
$subject = "Final Check In";
$headers = "From: Warehouse@bookcellaronline.com" . "\r\n" .
"CC: micahpartnerships@gmail.com,lreyes@bookcellaronline.com,jimd@bookcellaronline.com";
$body = "Greetings " .$name."!\nWe have completed checking in your latest shipment of books.\nCheck-In date was: " .$finaldate."\n
We checked in " .$count." books.\nA total of " .$notListed." books are not listed yet and have been set aside to be researched.\nComments: ".$comments. "\n
You will now be able to review your shipment details here : '<a href = http:www.bookcellaronline.com/bcos/advances/buyertotal.php>Check In Details</a>'.  Use the Check-In date from above.\n
This is an automated email - do not reply to this email. If you have any questions or concerns, please contact your Manager or Abbie.\n";
$body = wordwrap($body,70);
mail($to, $subject, $body, $headers); 
```

我显然错过了一些东西，但我不确定它是什么。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T15:21:07.197

首先将内容的标题设置为 HTML 示例：

```
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

然后像这样添加链接

```
<a href = "http://www.bookcellaronline.com/bcos/advances/buyertotal.php">Check In Details</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:20:44.397

首先：不要使用 mail() 函数。使用特定的类，如 PHPMailer()。真的。不要这样做。

此处缺少//：

```
<a href = http://www.bookcellaronline.com 
```

# c# - 如何使用带有 Chart 类的个性化属性网格？

> ID：15115651
> 
> 赞同：1
> 
> 时间：2013-02-27T15:17:33.063
> 
> 标签：c#, winforms, charts, customization, propertygrid

我正在开发一个绘图程序，我希望用户能够快速有效地自定义他们的图表。我创建了一个允许他们这样做的属性网格。我已经用图表的属性填充了它，但删除了我不希望用户访问的某些元素。例如，我不希望用户能够访问辅助功能选项。到目前为止我所拥有的是

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        magRadioBox.Checked = true;
        PropertyGrid propertyGrid1 = new PropertyGrid();
        propertyGrid1.CommandsVisibleIfAvailable = true;
        propertyGrid1.Text = "Graph and Plotting Options";
        propertyGrid1.PropertyValueChanged += propertyGrid1_PropertyValueChanged;

        this.Controls.Add(propertyGrid1);
    }
private void Form1_Load(object sender, EventArgs e)
{
this.Text = "MY Plot Program";
propertyGrid1.SelectedObject = chart1; 
}

private void button1_Click(object sender, EventArgs e)
 {//some code that is populating my chart(chart1) with data 
 .... //chart1 being filled with data 
 }

private void propertyGrid1_PropertyValueChanged(object s , PropertyValueChangedEventArgs e)
{
//Calling the method that will refresh my chart1 
myChart.Invalidate(); 
} 
```

上面的代码是我的表格。下面我的“MyChart”类代码设置了我的属性网格。我自动获取图表的所有属性，然后可以通过将其设置为“樱桃挑选”我不希望用户拥有的属性`[Browsable(false)]`

```
namespace FFT_Plotter
{ 
    [DefaultPropertyAttribute("Text")]
    public class MyChart : Chart 
    {
        public event EventHandler PropertyChanged;
private void OnPropertyChanged(object sender, EventArgs e)
{
EventHandler eh = propertyChanged;
if(eh !=null)
{
eh(sender, e);
}
        [BrowsableAttribute(false)]
        public new System.Drawing.Color BackColor
        {
            get { return BackColor; }//Here back color is just an example of a property, not necessarily one that I would make non-Browsable
            set { 
base.BackColor = value; 
OnPropertyChanged(this,EventArgs.Empty);
}
        }
    }
} 
```

上面的类让我有一个属性网格，它具有图表的所有属性，并允许我在我认为合适的时候隐藏这些属性。但是，现在我一直在理解如何将我连接`chart1`到我的属性网格。一个例子是我已经从网格中删除了 text 属性。它不再对用户可见。现在我想能够说`BackColor`网格中的变化，这意味着我的`chart1`背景颜色发生了变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:07:22.090

好的，我使用了您的代码并执行了以下操作，现在更改属性网格中的背景颜色会更改图表的背景颜色：

表格1 -

```
public partial class Form1 : Form
{
    private PropertyGrid propertyGrid1;

    public Form1()
    {
        InitializeComponent();
        //propertyGrid1 = new PropertyGrid();
        propertyGrid1.CommandsVisibleIfAvailable = true;
        propertyGrid1.Text = "Graph and Plotting Options";
        propertyGrid1.PropertyValueChanged += propertyGrid1_PropertyValueChanged;

        this.Controls.Add(propertyGrid1);
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        this.Text = "MY Plot Program";
        propertyGrid1.SelectedObject = chart1; 
    }
    private void propertyGrid1_PropertyValueChanged(object s, PropertyValueChangedEventArgs e)
    {
        //Calling the method that will refresh my chart1 
        chart1.Invalidate();
    }
}

[DefaultPropertyAttribute("Text")]
public class MyChart : Chart 
{

    public event EventHandler PropertyChanged;
    private void OnPropertyChanged(object sender, EventArgs e)
    {
        if(PropertyChanged !=null)
        {
            PropertyChanged(sender, e);
        }
    }

    [BrowsableAttribute(false)]
    public new string Text { get; set; }

    [BrowsableAttribute(true)]
    public new System.Drawing.Color BackColor
    {
        get { return base.BackColor; }//Here back color is just an example of a property, not necessarily one that I would make non-Browsable
        set 
        { 
            base.BackColor = value; 

            OnPropertyChanged(this,EventArgs.Empty);
        }    
    }     
} 
```

*   此外，在您的`Form1.Designer.cs`文件中，您已将`chart1`其定义为“System.Windows.Forms.DataVisualization.Charting.Chart”，您需要在新的部分将其更改为 MyChart（需要搜索 Charting.Chart）

# php - 如何使用jquery和php动态获取div值

> ID：15115653
> 
> 赞同：0
> 
> 时间：2013-02-27T15:17:33.747
> 
> 标签：php, jquery, html, ajax

当我按下手风琴 div 时，我必须获得某些东西的价值。这个 div="accordion" 有这样的结构：

```
<div class="accordion">
    <? if ($_SESSION[SITE]['user']['id'] == $message['yp_from']) { ?>                                                 <div class="row"><span class="bold">From: </span> <span>Me</span>    
     <span class="grey9"> <?= $this->tools_lib->date_format($message['yp_time']); ?></span>     
  <?  } else { if ($message['yp_state_from'] == 0) {?>
 <div class="row"><span class="bold">From: </span><span><?= $this->tools_lib->name_separate($message['yp_name']) ?></span> 
   <div id="idMens<?= $message['id'] ?>" style="display:none;" class="showNew"><?= $message['id'] ?></div></span>
  <h5 id="new"> New </h5>
        <?} else { ?> 
<div class="row"><span class="bold">From: </span><span><?= $this->tools_lib->name_separate($mensaje['yp_name']) ?></span>
    <? } 
         } ?>
</div>
   <p><?= $message['yp_message'] ?><p>
</div> 
```

我想从“div id="idMens"”中获得 · $mensaje['id'] · 值。我试图用jquery来做。但我无法获得正确的值，它总是取第一个项目的值，我的意思是最后一个输入的值。

我试图使用这个 jquery 代码。但我认为不是格式良好的代码..

```
<script>
     $(document).ready(function(){
            $('.accordion').find('div').click(function(){
                $(this).next().slideToggle();
                $('.showNew').on('click', function() {
                    var idm =this.id; 
                });
                var form_data = { 

                    to: $('#',idm).html()
                }

                $.ajax({
                    url: _baseurl+""+_lang+"/messages/updateState/",         // ruta del controlador y accion
                    type: 'POST',
                    data: form_data,
                    success: function(data){ 
                        $('#new').hide();
                    }    
                });
            }).next().hide();
        });
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:56:22.257

最后我做到了。我是傻瓜……这太容易了。我走错路了。

我这样做是为了创建其他功能：

```
 function changeState(id){

                var form_data = {
                    to: id
                }

                $.ajax({
                    url: _baseurl+""+_lang+"/messages/updateState/",         // ruta del controlador y accion
                    type: 'POST',
                    data: form_data,
                    success: function(data){ 
                        $('#new').hide();
                    }    
                });
            } 
```

并在第一个 div 中调用它。与点击。我将动态 id 作为参数传递，因此我可以很好地使用它。

谢谢

# mysql - 使用 TableGateway 在 ZF2 中进行 MySQL 全文搜索

> ID：15115654
> 
> 赞同：1
> 
> 时间：2013-02-27T15:17:34.270
> 
> 标签：mysql, zend-framework2

是否可以运行全文搜索 MySQL 查询？我如何使用 TableGateway 做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:33:17.853

```
$table = new \Zend\Db\TableGateway\TableGateway('table', $adapter);

$rowset = $table->select(function (\Zend\Db\Sql\Select $select) {
    $select->where(array(
        new \Zend\Db\Sql\Predicate\Expression("MATCH(column) AGAINST ('testing')")
    ));
}); 
```

# java - 按下 Java 返回按钮

> ID：15115658
> 
> 赞同：-1
> 
> 时间：2013-02-27T15:17:44.677
> 
> 标签：java, game-development

我正在用 Java 创建一个游戏，我有一个带有按钮的主菜单，我需要以某种方式返回按下的按钮，以便我可以在不同的类中使用它。我不知道该怎么做。有人有什么主意吗？

我在 actionPerformed 方法中获得了带有 e.getSource() 的按钮。我尝试返回按钮，但没有奏效。

非常感谢。

这是一些代码：

菜单类

```
public void actionPerformed(ActionEvent e) {
    Object button = e.getSource();
    return button
} 
```

其他类

```
public static void createGameScreen() {
    if(Menu.button == Menu.button1) {
         // do something here
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:24:25.527

您不会返回按下哪个按钮，而是将代码分配给该操作（或者至少这就是我解释您的问题的方式）。为那个按钮分配一个像这样的监听器。这就是我喜欢这样做的方式。可能有更好的方法。

```
button.addActionListener(new java.awt.event.ActionListener() {
    public void actionPerformed(java.awt.event.ActionEvent e) {
        buttonBoardActionPerformed(e);
    }
}); 
```

```
public void buttonActionPerformed(ActionEvent e) {
    // Do some stuff
} 
```

基本上，您将按钮直接链接到操作，而不是为整个事情分配一个单独的侦听器。更容易调试*IMO*。阅读[本教程](http://docs.oracle.com/javase/tutorial/uiswing/events/intro.html)，也。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:28:26.243

对于您键入的内容，我认为您写了如下内容：

```
buttonProcess = new JButton("Process");
buttonProcess.set//bounds,actionlistener,etc.
if (e.getSource().equals(buttonProcess)){
 //do some stuff
 return buttonProcess;
} 
```

您可以尝试在 UI 的类中使用在辅助类中定义的静态变量。

例如：

```
public class AuxClass{
 public static Object PROCESS_BUTTON; //YOu can replace Object by Component or JButton
}

//then in your first UI code
 if (e.getSource().equals(buttonProcess)){
     AuxClass.PROCESS_BUTTON = buttonProcess;
    }

//then in your other UI:
if (AuxClass.PROCESS_BUTTON !null && AuxClass.PROCESS_BUTTON instanceof JButton){
 //Do what you want here
} 
```

# javascript - 为什么复选框需要在 Backbone 中检查超时

> ID：15115662
> 
> 赞同：1
> 
> 时间：2013-02-27T15:17:58.570
> 
> 标签：javascript, jquery, backbone.js, coffeescript

```
@$el.html(@template())
@$('an_input').val('2')               # ---> this works
@$('selector').prop('checked', true) # ---> does not work  

@$el.html(@template())
@$('an_input').val('2')                  # ---> this works
setTimeout( ->
  @$('selector').prop('checked', true)  # ---> works!
  1000
) 
```

有谁知道为什么？

小提琴：http: [//jsfiddle.net/EC49U/](http://jsfiddle.net/EC49U/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:36:26.423

它在正常情况下确实有效。在您的情况下，选择器在 1 秒后才能找到您要定位的元素。这是一个没有超时的工作示例：http: [//jsfiddle.net/gouegd/zXGVD/](http://jsfiddle.net/gouegd/zXGVD/)

注意我使用checked="checked" 而不是true，我认为它更符合HTML。

```
$('#car').prop('checked', "checked") 
```

# mysql - Mysql ABS(AVG(field_name)) 作为总返回浮点数

> ID：15115670
> 
> 赞同：0
> 
> 时间：2013-02-27T15:18:20.760
> 
> 标签：mysql, math, floating-point, average

我正在尝试使用 MySQL 中的 ABS 和 AVG 函数获取整数值，但它仍然给我浮点值。

```
select ABS(AVG(quantity)) as average from stocks 
```

此查询应返回绝对整数值，但它返回浮点值，如`125.889`. 怎么了 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:20:43.063

`ABS()`代表绝对，它不一定返回整数。

您必须使用**[数学函数](http://dev.mysql.com/doc/refman/5.5/en/mathematical-functions.html)**之一，如`FLOOR()`、`CEILING()`、`ROUND()`，`TRUNCATE( ,0)`或将结果转换为`INTEGER`.

# c# - Crystal Report 查看器仅在 IE 中显示行；将数据导出为 PDF 格式

> ID：15115679
> 
> 赞同：1
> 
> 时间：2013-02-27T15:18:39.930
> 
> 标签：c#, asp.net, crystal-reports

我创建了一个非常简单的报告，只是为了测试使用 ASP.net 连接到它的方式。它似乎正在加载报告并从数据库中提取报告数据没有任何问题，但显示的只是一堆垂直线。但是，如果我选择通过工具栏导出为 PDF 等，那看起来很好。检查页面的源代码还可以发现数据存在于那里。

这是图像结果：http: [//i.imgur.com/gyUgNBt.png](http://i.imgur.com/gyUgNBt.png)

这是我的代码：

```
protected override void OnPreRender(EventArgs e)
{
  ReportDocument report = new ReportDocument();
  report.Load(@"C:\Users\en\Desktop\Crystal Reports\report1.rpt");
  report.SetDatabaseLogon("xxx", "xxx", @"xxx", "xxx");
  CrystalReportViewer1.ReportSource = report;
} 
```

在 aspx 中：

```
<table>
  <tr>
    <td>
      <CR:CrystalReportViewer ID="CrystalReportViewer1" runat="server" AutoDataBind="True" Height="1202px" ReportSourceID="CrystalReportSource1" ToolPanelWidth="200px" Width="903px" DisplayToolbar="False" EnableDatabaseLogonPrompt="False" EnableParameterPrompt="False" />
        <CR:CrystalReportSource ID="CrystalReportSource1" runat="server">
          <Report FileName="C:\Users\ben\Desktop\Crystal Reports\Report1.rpt">
           </Report>
         </CR:CrystalReportSource>
        </td>
      </tr>
    </table> 
```

我发现一些文档显示 IE 是问题所在，并通过检查并确认它在 Chrome 中运行良好来确认。它也适用于 IE 兼容模式。用户将在 IE 中；有人知道如何让 IE 从一开始就正确显示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:49:19.107

我最终打开了 IE7 仿真模式，如此处所述：[http ://forums.asp.net/t/1472369.aspx/1](http://forums.asp.net/t/1472369.aspx/1)

这感觉像是一个糟糕的修复，但似乎工作得很好。

# jpa - 如果 JPA 中不存在创建实体的最佳模式是什么

> ID：15115683
> 
> 赞同：3
> 
> 时间：2013-02-27T15:18:47.523
> 
> 标签：jpa, ejb, jpa-2.0, jboss7.x, ejb-3.1

这与这个[问题有关](https://stackoverflow.com/questions/3562105/jpa-create-if-not-exists-entity)，但非常具体地谈到了帕斯卡在[他的回答](https://stackoverflow.com/a/3563359/77779)中指出的问题。

如果实体不存在（它的主键不在数据库中），我需要持久化它，否则我需要重试新实体的生成并持久化它。

我们基本上有一个使用过的记录表，我在其中生成随机数，但我不能有重复（而且我不能使用 UUID 或类似的东西）。所以我们在一个表中跟踪使用的那些，以数字作为主键。

如何使用 JPA 确保仅在它存在时才创建它，从而避免竞争条件？我需要避免这样的情况：线程一个查询是否存在，然后线程两个查询，然后线程一个插入，然后线程两个插入 - 重复。

显而易见的选择是尝试捕获异常。问题是事务在 EntityExistsException 上回滚，但我想回滚并保留下一个随机数，而不是回滚事务。

丑陋的解决方案似乎是在单独的事务中调用新实体的持久性（所以让它回滚）。这里有更好的做法吗？

明确地知道原因是重复也是很好的，这样当潜在问题是其他问题时，该过程就不会继续重试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:40:30.777

`entityManager.merge()`会为你做的。有关更多信息，请参阅以下[链接](https://stackoverflow.com/questions/1069992/jpa-entitymanager-why-use-persist-over-merge)。

# wpf - 如何知道标准 WPF 选项卡控件中的选项卡开关

> ID：15115684
> 
> 赞同：1
> 
> 时间：2013-02-27T15:18:48.887
> 
> 标签：wpf, c#-4.0, tabcontrol

这个问题就像

我有标签控件

我只想在用户在现有打开的标签之间切换时设置一个标志。我只想在切换选项卡时执行操作。

而且我不想在用户添加新选项卡或打开现有选项卡时执行该操作。（即如果有 2 个选项卡打开 - 当我添加一个选项卡时 - 打开的总选项卡现在是 3 个，或者我打开一个现有选项卡 - 计数再次是 3）在这种情况下，我不想执行该操作。

我确实使用了 OnSelectionChanged() 但这一直被提出，即当我切换选项卡或添加选项卡时。

我想要一个只告诉我标签已切换的事件。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:46:34.480

我不确定我是否完全理解您要执行的操作，但您可能可以使用 TabIndex 属性。将它绑定到您的视图模型并有一个列表或其他东西跟踪选择了哪些索引以确定先前是否选择了选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:26:34.433

没有事件告诉您用户在现有选项卡之间切换。您可以将当前选项卡保存在列表（或字典）中，当触发 SelectionChanged 事件时，您可以检查当前选项卡是否存在于列表（或字典）中，这样您就可以知道用户是否在旧选项卡之间切换或添加了或创建一个新选项卡。之后，您可以将新选项卡添加到列表（或字典）中。

# spring - 未找到工厂 bean 'customConversions'

> ID：15115686
> 
> 赞同：0
> 
> 时间：2013-02-27T15:18:52.643
> 
> 标签：spring, spring-data-mongodb

我正在尝试将我的 MongoDB 库更新到最新版本，现在有几个错误，可能相关也可能不相关。第一个是在我的 applicationContext.xml 中，在此部分旁边出现错误“未找到工厂 bean 'customConversions'”：

```
<mongo:mapping-converter base-package="com.my.model">
    <mongo:custom-converters base-package="com.my.model.converters">
    </mongo:custom-converters>
</mongo:mapping-converter> 
```

我无法从文档中看到我可能遗漏的任何内容。什么可能导致这种情况，我可以做些什么来解决？

如果我尝试运行该应用程序，我现在得到：

```
org.springframework.data.mapping.model.MappingException: No mapping metadata found for java.util.Date
    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:206) ~[spring-data-mongodb-1.1.1.RELEASE.jar:na] 
```

我正在使用以下 Maven 依赖项：

org.springframework.data：spring-data-mongodb：1.1.1.RELEASE org.springframework：核心，spring-context等：3.2.1.RELEASE

这只是一个损坏的版本，还是我做错了什么？之前在我的模型类中使用 java.util.Date 没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:28:37.067

您是否将其添加到 MongoTemplate 中？[http://static.springsource.org/spring-data/data-mongo/docs/1.0.0.M5/reference/html/#d0e2718](http://static.springsource.org/spring-data/data-mongo/docs/1.0.0.M5/reference/html/#d0e2718)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T16:44:54.533

好的，这是一段时间后的事情，但它可能会使人们从旧版 MongoDB 版本升级代码和数据库受益。

我认为 Mongo 改变了一些数据在内部存储的方式。也可能是我们将数据导出为 JSON，然后再次导入。无论哪种方式，我们都会得到具有不正确 Date 和不正确 ObjectId 表示的数据。spring-data-mongo 曾经处理过这个问题，但无论出于何种原因，现在都不再处理了。我们的解决方法是在 Mongo shell 中运行以下类型的脚本：

```
db.entity.find().forEach(
  function(o){
    delete o._id;
    if (typeof(o.createdTs) !== 'undefined' && typeof(o.createdTs.sec) !== 'undefined'){
        o.createdTs = ISODate(o.createdTs.sec);
    }
    if (typeof(o.updatedTs) !== 'undefined' && typeof(o.updatedTs.sec) !== 'undefined'){
        o.updatedTs = ISODate(o.updatedTs.sec);
    }

    try{
        db.entity2.insert( o );
    } catch (err){
        print("Following node conversion failed.  Error is: " + err);
        printjson(o);
    }

  }
);

db.entity2.renameCollection('entity', true); 
```

现在这对我们有用，因为我们根本没有使用 Mongo 对象 ID - 我们一直在使用不同的、唯一索引的 UUID 字段作为 ID。如果您在其他任何地方都引用 objectId，则需要从旧字符串 id 创建一个 objectId 并使用它。

这使我们能够升级到 spring-data-1.1.0 及更高版本，并且意味着我们现在可以引入 spring-data-neo4j，由于这个问题，我们以前无法在这个项目中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-20T22:59:13.090

我有相同的映射异常（`org.springframework.data.mapping.model.MappingException`）。MongoDB 记录中的日期之一不知何故具有以下格式的日期，java.util.date 无法解码：

```
"createdTime": {
    "dateTime": ISODate("2016-09-15T02:01:00.560Z"),
    "offset": {
        "_id": "Z",
        "totalSeconds": 0
    },
    "zone": {
        "_class": "java.time.ZoneOffset",
        "_id": "Z",
        "totalSeconds": 0
    }
} 
```

删除该记录后一切正常。

# ios - 有没有办法在 iOs webview 上制作真正免费的滚动 div（任何方向）

> ID：15115687
> 
> 赞同：0
> 
> 时间：2013-02-27T15:18:54.637
> 
> 标签：ios, webview, scroll

我想要一个可以向任何方向拖动的 div，大约是屏幕的 4 倍宽和 4 倍高。

我设置了正文的高度和宽度，有时您可以沿对角线滚动它，但其他时候当您滚动时，它只会垂直或水平直线滚动。似乎是当您开始直接向上滚动时，它会保持这种状态。这对于在超大的 webview div 中滚动是正常的，还是有其他东西可以解释这一点？

这是在 iPad 上，body 设置为 width:4000px 和 height:3000px。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:23:40.750

iPhone 倾向于完全水平或完全垂直滚动是故意的，这通常是一个有用的功能：如果您正在阅读可以水平滚动的高文本列，*那么*能够向下滚动而不用担心意外移动视图是很好的一边走一边到另一边。据我所知，没有办法关闭这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T15:28:59.263

有一个属性名称 directionalLockEnabled 在 scrollView 类中得到一个布尔值。

这可以解决问题：

```
theWebView.scrollView.directionalLockEnabled = NO; 
```

# sql - 将 nvarchar 值转换为数据类型 int 时转换失败

> ID：15115688
> 
> 赞同：2
> 
> 时间：2013-02-27T15:18:56.150
> 
> 标签：sql, sql-server, sql-server-2005

我有一个查询，我正在尝试检查`scode`列中的代码范围。问题是该`scode`列包含一些 nvarchar 字符，并且在找到它们时会出错。

如何运行以下查询而不返回错误。

```
SELECT dtExpires, dtFirst
FROM Customers
WHERE (scode BETWEEN 10 AND 100) OR
      (scode BETWEEN 500 AND 600) 
```

我收到的错误：

> *将 nvarchar 值转换为数据类型 int 时转换失败*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T15:45:12.670

如果你不能修复你真正应该做的数据类型......

唯一可靠的短路方法是将过滤后的结果填充到#temp 表中。否则，您无法控制评估顺序。即使您使用子查询或 CTE 来筛选`ISNUMERIC() = 1`“first”的行，SQL Server 也可能首先评估`BETWEEN`条件，但仍然会失败并出现相同的错误。这可能并不*总是*发生，但这是保证您避免它的唯一方法：

```
SELECT dtExpires, dtFirst, scode
INTO #t
FROM dbo.Customers
WHERE scode NOT LIKE '%[^0-9]%'; -- this assumes no decimals allowed

SELECT dtExpires, dtFirst
FROM #t
WHERE (scode BETWEEN 10  AND 100) 
   OR (scode BETWEEN 500 AND 600);

DROP TABLE #t; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T15:45:42.600

您的最终问题是您将这些数值存储为`nvarchar`. 这是有问题的，首先是速度。那里有大量出色的文档和答案表明本[网站](https://stackoverflow.com/questions/3284297/sql-server-int-vs-nvarchar-comparison-on-performance)上的许多情况就是如此。

整数值比字符串小，每页可以容纳比您可以容纳的更多的字符串，`nvarchar`并且在整数上更容易完成数学运算。尝试一个小实验，转到[SQLFiddle](http://sqlfiddle.com/)并输入您的表并给它一些值并运行您的查询。然后尝试将该列更改为整数值并运行相同的查询，它不仅会运行得更快，而且您当前的`SELECT`语句将正常运行。如果您需要加入此信息和整数，我也会更快。

我不完全确定天气是否有能力这样做，但它肯定会解决你的问题并提高你的数据库性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T15:26:43.103

也许使用类似的东西

```
SELECT        dtExpires, dtFirst
FROM            Customers
WHERE        ( cast(fnRemoveNonNumericCharacters(scode) as int) BETWEEN 10 AND 100) OR
                     (cast(fnRemoveNonNumericCharacters(scode) as int)BETWEEN 500 AND 600) 
```

函数在哪里：

```
CREATE Function [fnRemoveNonNumericCharacters](@strText VARCHAR(1000))
RETURNS VARCHAR(1000)
AS
BEGIN
    WHILE PATINDEX('%[^0-9]%', @strText) > 0
    BEGIN
        SET @strText = STUFF(@strText, PATINDEX('%[^0-9]%', @strText), 1, '')
    END
    RETURN @strText
END 
```

或者，如果您想排除那些 scode 不是数字的条目，还可以创建一个 bool 返回函数，它会告诉您它是否具有非数字字符并将其放在 where 子句中。

解决这个问题的另一种方法可能是：（受到 Aron 的启发

```
SELECT        dtExpires, dtFirst
FROM            Customers
WHERE        (( case when scode LIKE '%[^0-9]%' then 0 else scode end BETWEEN 10 AND 100) OR
                     (case when scode LIKE '%[^0-9]%' then 0 else scode end BETWEEN 500 AND 600))
and scode not like '%[^0-9]%' 
```

# visual-studio-2012 - Visual Studio 2012 中不存在序列图上下文菜单，但在 VS2010 中存在

> ID：15115694
> 
> 赞同：2
> 
> 时间：2013-02-27T15:19:16.780
> 
> 标签：visual-studio-2012, sequence-diagram, contextmenu

我曾经能够在 Visual Studio 2010 中通过右键单击函数并选择适当的菜单选项来生成序列图。

我刚刚安装了 Visual Studio Premium 2012（11.0.51106.01 更新 1）并且该菜单选项不可用。我的项目在 C# 中。

我们的库中还有另一个 VS2012 补丁，我也安装了它，但这并没有产生预期的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:56:07.900

根据[这个](http://www.microsoft.com/visualstudio/eng/products/compare)比较页面，序列图（和一般的 UML）只能由 Visual Studio 2012 Ultimate 创建。高级版只能阅读它们。

# html - Webkit 选取框仅在必要时滚动

> ID：15115697
> 
> 赞同：5
> 
> 时间：2013-02-27T15:19:35.040
> 
> 标签：html, css, webkit, marquee

我有一个关于 webkit marquee 的问题。我有 2 个可变宽度的元素。（两个元素的宽度相同），并且两个元素都需要是选取框。

但是，当内容溢出（大于元素）时，我需要一个选取框，如果不是，则文本应保持原样（无滚动）。

我创建了一个 JSFiddle 作为示例： [http://jsfiddle.net/Vxwed/](http://jsfiddle.net/Vxwed/)：

long 和 short 都需要通过 CSS3 进行选取，而 long 应该滚动，而 short 则不需要。

```
<p class="long">Hi my name is John Doe</p>
<p class="short">Yeah!</p> 
```

请记住，元素的内容是可变的（用 javascript 填充），所以我不能对元素 marquee-behaviour 进行实际的硬编码。

这里有任何 CSS 专家可以帮助我吗？我一直在研究这个很多，但是关于这个主题的信息很少，因为它相对较新。

我现在能想到的唯一解决方案是使用 jQuery 来测量元素的宽度，然后计算它们是否需要额外的间距。如果他们需要应用选框，否则不需要。但这对我来说似乎不是很干净，我宁愿只在可能的情况下在 HTML/CSS 中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-09T16:22:03.137

这可能不完全符合您的要求，但这是一个很好的问题：http: [//jsfiddle.net/4hgd8ac1/](http://jsfiddle.net/4hgd8ac1/)

它使用 CSS 动画来为 transform: translateX 百分比设置动画，因为这是基于元素本身的宽度。这意味着我们可以向左滚动一个全宽的元素。然后给选框一个最小宽度，我们可以标准化较短的文本长度。然后我们使用 calc(100% + 100px) 将项目向左移动 100%，除了轮播的宽度 (100px)。

它没有完全滚动文本的传统选取框感觉，但使用动画关键帧可以在文本末尾暂停，让用户有时间阅读。

```
p {
  height: 30px;
  width: 100px;
  background-color: #CCC;
  white-space: nowrap;
}

.marquee {
  overflow: hidden;
  position: relative;
}

.marquee__content {
  padding: 5px 0;
  margin-right: 100px;
  position: absolute;
  height: 20px;
  animation: scroller 3s linear infinite;
  min-width: 100px; /* This needs to match the width of the parent */
}

@keyframes scroller {
 0% {
     transform: translateX(0%);
 }

 /* ‘pauses’ the scroller at the start for 20% of the time, adjust to edit timing */
 20% {
   transform: translateX(0%);
 }

  /* ‘pauses’ the scroller at the end for 20% of the time */
  80% {
    /* Translate will use the width of the element so 100% scrolls it’s full length. add the width of the marquee to stop smaller items scrolling */
   transform: translateX(calc(-100% + 100px)); 
  }

  100% {
   transform: translateX(calc(-100% + 100px));
  }
}

<p class="marquee"><span class="marquee__content">Hi my name is John Doe</span></p>
<p class="marquee"><span class="marquee__content">Yeah!</span></p> 
```

# google-maps-api-3 - 包含带有谷歌地图的jsp文件不显示地图

> ID：15115702
> 
> 赞同：0
> 
> 时间：2013-02-27T15:19:48.060
> 
> 标签：google-maps-api-3

我有一个 jsp 页面，其中包含另一个具有谷歌地图的 jsp 文件。但是当我访问父页面时，包含 jsp 文件的 div 正在获取 CSS 属性值“溢出：隐藏”，因此未显示地图。

父jsp的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" href="<%=request.getContextPath()%>/css/style.css"  />
<script src="<%=request.getContextPath()%>/scripts/jquery-1.7.1.js" type="text/javascript"></script>

<script type="text/javascript">
function showHeatMap(){
  $('#heatDiv').toggle(true);
  $('#exportToCSVHeatMap').removeAttr('disabled');
  $('#dummyFenceMap').style.overflow="visible";
}
</script>
</head>

<body>
      <div id="heatMapDiv" style="display:none">
  heat map
      <div class="div-inline">
        <div class="div-daily">From Date (MM/DD/YYYY)</div>
        <input type="text" name="fromDateHM" id="datepicker4" class="input-inline" />
      </div>
      <div class="div-inline">
        <div class="div-daily">To Date (MM/DD/YYYY)</div>
        <input type="text" name="toDateHM" id="datepicker5" class="input-inline" />
      </div>

      <div id="buttonDiv">
        <input type="button" value="Show Heat Map" onclick="showHeatMap()" />
        <input type="button" value="Export To CSV" id="exportToCSVHeatMap" onclick="exportToCSVHeatMap()" disabled="disabled"/>
      </div> <!-- buttonDiv -->

      <div id="heatDiv" class="heat-map">
        <div class="div-daily">Heat Map</div>
        <div id="heatMap" style="display= block; width= 800px; height= 800px; "><jsp:include page="../jsp/dummyheatmap.jsp?name=test&id=1001"></jsp:include></div>
      </div> <!-- footTraffic -->
  </div> <!-- heatMapDiv -->

</body>
</html> 
```

包含的jsp文件代码：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>dummy heat map</title>
<link rel="stylesheet" href="<%=request.getContextPath()%>/css/style.css"  />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #fenceMap { height: 50% }
</style>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
/* For Google Map.*/

function googleMapinitialize(){
var fenceAdd=new google.maps.LatLng(37.2146,121.5545);
var mapProp = {
        center:fenceAdd,
        zoom:30,
        mapTypeId:google.maps.MapTypeId.TERRAIN
};

var map = new google.maps.Map(document.getElementById("dummyFenceMap"),mapProp);

var geocoder = new google.maps.Geocoder();
var location = "2001 Gateway PI, San Jose, CA";

if(!geocoder) {
    geocoder = new google.maps.Geocoder();
}

var geocoderRequest = {
    address: location
};

var myCity = null;
var marker = null;
var infowindow = null;
geocoder.geocode(geocoderRequest, function(results, status) {
    if (status =="" || status == google.maps.GeocoderStatus.ZERO_RESULTS){
        alert("'" + location + "' not found!!!");
    } else if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        fenceAdd = new google.maps.LatLng(results[0].geometry.location.hb,results[0].geometry.location.ib);
        if (!marker) {
            marker = new google.maps.Marker({
                map: map,
                raiseOnDrag:false,
                draggable:true
            });
            marker.setPosition(results[0].geometry.location);
            google.maps.event.addListener(marker,'click',function(){
                if (!infowindow) {
                  infowindow = new google.maps.InfoWindow({
                      disableAutoPan:true,
                      maxWidth:100
                  });
                }
                var content = '<strong>' + results[0].formatted_address + '</strong>';
                infowindow.setContent(content);
                infowindow.setPosition(results[0].geometry.location);
                infowindow.open(map, marker);                   
            });

        }
    }
    myCity = new google.maps.Circle({
        center:fenceAdd,
        radius:125,
        strokeColor:"#0000ff",
        strokeOpacity:0.1,
        strokeWeight:0.1,
        fillColor:"#0000ff",
        fillOpacity:0.20,
        map:map
    });

    google.maps.event.addListener(map, 'click', function(){
        infowindow.close();
    });
    google.maps.event.addListener(map, 'dblclick', function(){
        window.open("<%=request.getContextPath() %>/jsp/googleMapPopup.jsp?fenceAddress="+$('#haddr').val(),'ADDRESSMAP','height=400,width=600');
    });
    google.maps.event.trigger(map,'resize');
});
}
google.maps.event.addDomListener(window, 'load', googleMapinitialize);
</script>
</head>
<body onload="googleMapinitialize()">
<h1>Name : <%=request.getParameter("name")%> & id : <%=request.getParameter("id")%></h1>
<div id="dummyFenceMap" style="height=80%;border:1px solid #ff0000;overflow:visible;">
</div><!-- new-div-tag2 -->
<h1>Map end</h1>
</body>
</html> 
```

#heatMap div 的高度为 2 / 11px 并且溢出：隐藏。当我将溢出属性编辑为可见时，我看到了谷歌徽标和地图类型

谁能帮我我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:53:56.500

我通过向包含的 JSP 文件的 'dummyFenceMap' div 添加以下样式解决了这个问题。

```
style="border:1px solid #ff0000;position:relative; left:150px; top:10px; width:500px; height:400px;padding-left:15px;padding-right:15px" 
```

添加上述样式后，地图将显示在嵌入的 JSP 文件中。

但是面临一个新的问题是——谷歌地图显示在 3/4 部分的 div 其余部分是空白的。但是当我调整浏览器窗口的大小时，谷歌地图会正确重绘。如何解决这个问题？

# c++ - 互斥锁未解锁

> ID：15115703
> 
> 赞同：3
> 
> 时间：2013-02-27T15:19:53.437
> 
> 标签：c++, mutex, cocos2d-x

当我在更新周期中不断地从主线程调用**getter**并从另一个线程调用**setter**时，我使用互斥锁来锁定和解锁变量。我在下面提供了 setter 和 getter 的代码

定义

```
bool _flag;
System::Mutex m_flag; 
```

来电

```
#define LOCK(MUTEX_VAR) MUTEX_VAR.Lock();
#define UNLOCK(MUTEX_VAR) MUTEX_VAR.Unlock();

void LoadingScreen::SetFlag(bool value)
{
    LOCK(m_flag);
    _flag = value;
    UNLOCK(m_flag);
}

bool LoadingScreen::GetFlag()
{
    LOCK(m_flag);
    bool value = _flag;
    UNLOCK(m_flag);

    return value;
} 
```

这在一半的时间里效果很好，但有时变量在调用**SetFlag**时被锁定，因此它永远不会被设置，从而扰乱了代码流。

谁能告诉我如何解决这个问题？

编辑：

这是我终于做到的解决方法。这只是一个临时解决方案。如果有人有更好的答案，请告诉我。

```
bool _flag;
bool accessingFlag = false;

void LoadingScreen::SetFlag(bool value)
{
    if(!accessingFlag)
    {
        _flag = value;
    }
}

bool LoadingScreen::GetFlag()
{
    accessingFlag = true;
    bool value = _flag;
    accessingFlag = false;

    return value;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:20:30.427

首先，您应该使用[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)进行互斥锁/解锁。其次，您要么不显示其他直接使用 _flag 的代码，要么您使用的互斥锁有问题（不太可能）。什么库提供 System::Mutex？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T21:35:43.177

您遇到的问题（[user1192878](https://stackoverflow.com/users/1192878/user1192878)暗示）是由于编译器加载/存储延迟造成的。您需要使用[内存屏障](http://en.wikipedia.org/wiki/Memory_barrier)来实现代码。您可以声明`volatile bool _flag;`. 但是 对于单个 CPU 系统，[编译器内存屏障不需要这样做。](http://en.wikipedia.org/wiki/Memory_ordering#Compiler_memory_barrier)多 CPU 解决方案需要硬件屏障（位于 Wikipedia 链接下方）；硬件屏障确保所有 CPU 都能看到本地处理器的内存/缓存。`mutex`在这种情况下不需要使用和其他联锁装置。他们究竟完成了什么？它们只是造成死锁并且不需要。

```
bool _flag;
#define memory_barrier __asm__ __volatile__ ("" ::: "memory") /* GCC */

void LoadingScreen::SetFlag(bool value)
{
    _flag = value;
    memory_barrier(); /* Ensure write happens immediately, even for in-lines */
}

bool LoadingScreen::GetFlag()
{
   bool value = _flag;
   memory_barrier(); /* Ensure read happens immediately, even for in-lines */
   return value;
} 
```

仅当同时设置多个值时才需要互斥锁。您也可以将`bool`类型更改为[sig_atomic_t](https://stackoverflow.com/questions/9606725/linux-why-is-sig-atomic-t-typedefed-to-int)或[LLVM atomics](http://llvm.org/docs/Atomics.html)。然而，这是相当迂腐的，因为它`bool`适用于大多数实际的 CPU 架构。[Cocoa 的并发页面](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)也有一些关于替代 API 的信息来做同样的事情。我相信*gcc 的内联汇编*器与 Apple 编译器使用的语法相同。但这可能是错误的。

API 有一些限制。实例`GetFlag()`返回，可以调用的东西`SetFlag()`。`GetFlag()`然后返回值是陈旧的。如果您有多个作家，那么您很容易错过一个`SetFlag()`。如果更高级别的逻辑容易出现[ABA 问题](http://en.wikipedia.org/wiki/ABA_problem)，这可能很重要。但是，所有这些问题都存在有/没有互斥锁。*内存屏障*只解决了编译器/CPU不会长时间*缓存*的问题，它会重新读取. 声明通常会导致相同的行为，但会产生额外的副作用并且不能解决多 CPU 问题。`SetFlag()``GetFlag()``volatile bool flag`

[`std::atomic<bool>`](http://en.cppreference.com/w/cpp/atomic/atomic)^(As per [stefan](https://stackoverflow.com/users/985296/stefan)) and `atomic_set(&accessing_flag, true);` will generally do the same thing as describe above in their implementations. You may wish to use them if they are available on your platforms.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T17:17:45.330

如果正确实现了 System::Mutex，则代码看起来正确。有一点要提：

1.  正如其他人指出的那样，RAII 比宏要好。

2.  将 accessFlag 和 _flag 定义为 volatile 可能会更好。

3.  如果您使用优化进行编译，我认为您得到的临时解决方案是不正确的。

    ```
    bool LoadingScreen::GetFlag()
    {
      访问标志 = 真；// 可能被重新排序或删除
      布尔值 = _flag; // 可能会被优化掉
      访问标志 = 假；// 可能在设置值之前重新排序
      返回值；// 可能会被优化为直接返回_flag或注册
    }

    ```

    在上面的代码中，优化器可能会做一些讨厌的事情。例如，没有什么可以阻止编译器消除对 accessFlag=true 的第一个赋值，或者它可以被重新排序、缓存。例如，从编译器的角度来看，如果是单线程的，那么第一次分配给 accessFlag 是没有用的，因为值 true 从未使用过。
4.  使用互斥锁来保护单个布尔变量是昂贵的，因为大部分时间都花在切换操作系统模式（从内核到用户来回）上。使用自旋锁可能还不错（详细代码取决于您的目标平台）。它应该是这样的：

    ```
    自旋锁锁（&锁）；_flag = 值；自旋锁解锁（&锁）；
    ```

5.  原子变量在这里也很好。它可能看起来像：

```
atomic_set(&accessing_flag, true);
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T17:29:54.443

您是否考虑过使用[CRITICAL_SECTION](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686908%28v=vs.85%29.aspx)？这仅在 Windows 上可用，因此您失去了一些可移植性，但它是一个有效的用户级互斥锁。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T16:17:41.613

您提供的第二个代码块可能会在读取标志时修改标志，即使在单处理器设置中也是如此。您发布的原始代码是正确的，并且在两个假设下不会导致死锁：

1.  m_flags 锁已正确初始化，并且未被任何其他代码修改。
2.  锁的实现是正确的。

如果你想要一个可移植的锁实现，我建议使用 OpenMP： [如何在 openMP 中使用锁？](https://stackoverflow.com/questions/2396430/how-to-use-lock-in-openmp)

根据您的描述，您似乎想忙于等待线程处理某些输入。在这种情况下，stefans 解决方案（声明标志 std::atomic）可能是最好的。在半健全的 x86 系统上，您还可以声明标志 volatile int。只是不要对未对齐的字段（打包结构）执行此操作。

您可以避免用两个锁忙等待。第一个锁在slave完成处理时解锁，并在等待slave完成时由主线程锁定。第二个锁在提供输入时由主线程解锁，在等待输入时由从属线程上锁。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-10T14:03:46.833

这是我在某处看到的一种技术，但再也找不到源了。如果我找到它，我将编辑答案。基本上，写者只会写，但读者会多次读取 set 变量的值，并且只有当所有副本都一致时，才会使用它。而且我已经更改了编写器，以便只要它与预期的值不匹配，它就会尝试继续写入该值。

```
bool _flag;

void LoadingScreen::SetFlag(bool value)
{
    do
    {
       _flag = value;
    } while (_flag != value);
}

bool LoadingScreen::GetFlag()
{
    bool value;

    do
    {
        value = _flag;
    } while (value != _flag);

    return value;
} 
```

# c# - ABCPDF拆分/分页表数据行中的表头

> ID：15115705
> 
> 赞同：1
> 
> 时间：2013-02-27T15:20:04.183
> 
> 标签：c#, html, abcpdf

正如标题所示，我有一个标题和数据出现在一个单独的页面上。数据行跨越一页以上，因此我认为它会自动出现在新页面上。

pdf 已转换为横向，但我认为这并不重要。

Col1 Col2 COl3
**纽约**
** 页面其余部分为空 **

** 新页面 **
1 2 3
4 5 6
1 2 4
1 2 5
....

我可以添加任何内容以允许数据在标题之后立即开始吗？Col1 Col2 COl3
**纽约**
1 2 3
4 5 6
1 2 4
1 2 5
....

代码：表格使用表格标题行和标题单元格作为标题，然后使用表格行和表格单元格作为数据。

我使用 abcPdfDocument.AddImageHtml(pdfDocumentProperties.ContentHtml, true, 0, true); 用于添加第一页和 abcPdfDocument.Page = abcPdfDocument.AddPage(); documentId = abcPdfDocument.AddImageToChain(documentId); 添加其余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:32:36.023

我最终通过 ABCPDF 支持解决了这个问题。由于复杂性，这个问题是我的报告特有的，下面有答案：

> 有太多垂直线/边框迫使 ABCpdf 尝试将表格保留在一个页面中，因为您使用的是累积内聚力。你需要使用最大的凝聚力。theDoc.HtmlOptions.BreakMethod = HtmlBreakMethodType.MaximumCohesion；

进行此更改后，我没有遇到任何奇怪的页面拆分问题。

# php - 具有同步消息的循环中的多个 AJAX 请求

> ID：15115706
> 
> 赞同：0
> 
> 时间：2013-02-27T15:20:07.757
> 
> 标签：php, jquery, ajax

使用 jQuery 通过循环添加 10 个客户需要 AJAX 请求。

添加第一个客户时，应显示“1 of 10 added”。添加第二个客户时，应显示“2 of 10 added”。等等。

但是，以下功能仅显示最后一条消息“添加了 10 个中的 10 个”，并且在添加这 10 个客户时浏览器保持忙碌状态。

```
function addCustomer(total) 
{
    var addedIndex = parseInt($("#added-index").val());

    $.ajaxSetup({cache : false});
    $.ajax({
        type: "POST",
        url: "add_customer.php",
        data: "added_no=" + document.getElementById("added-index").value,
        global: false,
        async: false,
        cache: false,
        success: function(html){
            $("#added-index").val(addedIndex + 1);
            addedIndex = parseInt($("#added-index").val());

            if (addedIndex < total) {
                addCustomer(total);
            }
            else {
                $("#cc-msg").html(html);
            }           
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:43:02.287

使用 .append()

```
$("#cc-msg").append(html + '<img src="img/ajax_loader.gif" width="35" hspace="150" height="35" vspace="7" align="middle" >'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:57:36.937

根据 *Anthony Grist*的评论，这个 AJAX 请求不应该有`async: false`参数。所以，答案是：

```
function addCustomer(total) 
{
    var addedIndex = parseInt($("#added-index").val());

    $.ajaxSetup({cache : false});
    $.ajax({
        type: "POST",
        url: "add_cc.php",
        data: "added_no=" + document.getElementById("added-index").value,
        global: false,
        cache: false,
        success: function(html){
            $("#added-index").val(addedIndex + 1);
            addedIndex = parseInt($("#added-index").val());

            if (addedIndex < total) {
                addCustomer(total);
            }
            else {
                $("#cc-msg").html(html);
            }    
        }
    });    
} 
```

# drools - Drools 中的 ILOG 变量集等效

> ID：15115707
> 
> 赞同：1
> 
> 时间：2013-02-27T15:20:14.027
> 
> 标签：drools, ilog, jrules

我正在尝试将现有的基于 ILOG JRules 的应用程序迁移到基于 Drools 的项目。在 ILOG 中，我们有[局部变量](http://pic.dhe.ibm.com/infocenter/brjrules/v7r0/index.jsp?topic=/ilog.rules.jrules.doc/Content/Business_Rules/Documentation/_pubskel/JRules/ps_JRules_Global1204.html)（和变量集），可用于计算和存储规则（公式）中的中间值。

Drools 中是否有等效的局部变量？我知道我们[在 Drools 中有全局变量，](http://docs.jboss.org/drools/release/5.2.0.Final/drools-expert-docs/html/ch05.html#d0e3313)但文档建议仅将全局变量用作只读常量，并将 Java 调用类之间的数据传递给规则：

> 强烈建议不要从规则内部设置或更改全局值。我们建议您始终使用工作内存接口从您的应用程序中设置值。

一种方法是编写一个自定义 java 类`Variable`并在其中声明所有变量并在 drools 规则中使用它。但这每次我们想要添加一个新变量时都需要更改 java 代码。

是否有任何可行的方法来定义和使用 Drools 中可以在规则内定义和更改的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:22:06.320

我认为使用全局变量在规则之间保持某种计算或状态没有任何问题。我认为 Drools 的文档试图表达的意思（以一种非常复杂和不清楚的方式）是你永远不应该在规则的 RHS 中使用全局变量，因为 Drools 不知道全局变量的值何时发生变化。如果您确实在约束中使用了全局变量，那么请确保您永远不会更改它们的值。话虽如此，我认为在规则的 RHS 中使用全局变量是无害的。如果您对这个想法不满意，那么您也可以在会话中插入“计算”对象作为事实。规则可以匹配这个事实，将一个变量绑定到它，然后在 RHS 中与之交互。

希望能帮助到你，

# php - 在 Joomla 之外创建复杂的主页

> ID：15115709
> 
> 赞同：0
> 
> 时间：2013-02-27T15:20:14.640
> 
> 标签：php, joomla

我的任务是为我们的 Joomla 网站创建一个非常具体、复杂的主页。我的第一次尝试是安装一个模块，让我在自定义 HTML 模块（它称为 Flexi 自定义代码）中包含 php 代码、CSS 样式和其他不允许的内容。它运作良好 - 正如设计的那样。

但是我运行它的基本事实是，所有模块都将嵌入到 Joomla 的 div 结构的几层中，直到我安装该自定义模块的部分（例如 mainbody-top）。

所以我在底部得到了丑陋的空白，在我不想要的侧面得到了边距。加上我发现我需要覆盖或归零的许多其他事情。

我的基本问题是：有没有办法创建一个 Joomla 无法控制的自定义主页，但主页上的所有链接都进入 Joomla，其他一切都由 Joomla 控制？

我必须替换根目录中的 index.php 吗？还是模板目录？还是有另一种方法是普遍接受的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:31:02.190

你可以用不同的方式来完成它。

1）您可以创建一个新模板并将其分配给主菜单项。

2) 在当前模板中，打开 index.php 文件并检查您是否在主页上。如果是，那么做你需要的，只需将它添加到你希望输出出现的位置

```
$app = JFactory::getApplication();
$menu = $app->getMenu();
if ($menu->getActive() == $menu->getDefault()) {
        echo 'Homepage';
} 
```

# java - 如何在java中对带有对象的链表进行排序

> ID：15115713
> 
> 赞同：3
> 
> 时间：2013-02-27T15:20:24.560
> 
> 标签：java, list, sorting, linked-list, compareto

我用 Java 中的对象创建了一个链表（通用容器）。我需要重新编写我的插入方法以使列表按字母顺序按键排序。到目前为止，这是我的代码：

容器：

```
class Sellbeholder<N extends Comparable<N>, V> implements INF1010samling<N,V> {

private Keeper første;
private int ant = 0;

private class Keeper {
    Keeper neste;
    N n;
    V v;

    Keeper(N n,V v) {
        this.n = n;
        this.v = v;
    }
} 
```

这是我的插入方法（我需要重写）：

```
public void PutIn(N n, V v) {
    Keeper kep = new Keeper(n,v);
    kep.neste = første;
    første = kep;
    ant++; 
```

这是我放入容器（链表）中的人员对象：

```
class Person {

    String name;

    Person(String n) {
        this.name = n;
    }
} 
```

这就是我创建人员并将它们放入容器中的方式：

```
Sellbeholder <String,Person> b1 = new Sellbeholder <String,Person>();
Person a = new Person("William");
b1.PutIn("William",a); 
```

任何帮助我都会非常感激。我知道我需要使用 CompareTo-method 来检查对象的放置位置，但我不确定应该如何设置链表的结构。我已经开始这样做了：

```
for(Keeper nn = første; nn!= null; nn = nn.neste) {

    if(nn.n.compareTo(kep.n) > 0) {
        //Do something here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:39:48.787

迭代列表，直到找到正确的位置：

```
public void PutIn(N n, V v) {
    Keeper kep = new Keeper(n,v);
    // you will insert between previous and current
    Keeper previous = null;
    Keeper current = første;

    // loop until you get the right place        
    while (current != null && ((current.n).compareTo(n) > 0)) {
        previous = current;
        current = current.neste;
    }

    // insert your stuff there (if there were no previous, then this is the first one)
    if (previous == null) {
        første = kep;
    } else {
        previous.neste = kep;
    }

    // Set the next Keeper
    kep.neste = current;

    ant++;
} 
```

这将使您的列表保持有序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:31:03.977

尝试使用[Collections.sort(List l)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List%29)或[Collections.sort(List l, Comparator c)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

# google-admin-audit-api - 管理员审核 API 配额限制问题

> ID：15115715
> 
> 赞同：0
> 
> 时间：2013-02-27T15:20:27.883
> 
> 标签：google-admin-audit-api

我们最近要求提高我们使用 Admin Audit API 的每日 API 访问限制，但该请求尚未得到解决。我们还为我们的 API 控制台项目启用了计费，希望我们不会受到礼貌限制。但是，我们继续达到我们的每日限制。

所以我的问题是：

*   对速率限制增加采取行动的预期周转时间是多少？
*   对于没有定价的 API，启用计费是否允许我们超出礼遇限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:12:52.553

问）对速率限制增加采取行动的预期周转时间是多少？A) 周转时间约为一周，具体取决于您申请的额外配额数量。

Q) 对于没有定价的 API，启用计费是否允许我们超出礼遇限制？A) 您仍然需要填写申请表。计费部分仅用于为具有定价的 api 购买额外的配额。

# mysql - 从 MySQL 员工示例数据库中查询所有数据

> ID：15115717
> 
> 赞同：1
> 
> 时间：2013-02-27T15:20:28.647
> 
> 标签：mysql, sql, database

我正在尝试从 MySQL 员工示例数据库中查询所有数据。（[结构](http://dev.mysql.com/doc/employee/en/sakila-structure.html)和[行数](http://dev.mysql.com/doc/employee/en/employees-validation.html)）

我试图以一种保留所有表之间关系的方式来做到这一点，但我从来没有最后一次查询数据库，老实说，我迷失在联接等方面。我真的很感激任何帮助。

谢谢！

* * *

编辑：SQL：

```
SELECT *
FROM
    `employees`
    LEFT JOIN `salaries`
      ON `employees`.`emp_no` = `salaries`.`emp_no`
    LEFT JOIN `dept_manager`
      ON `employees`.`emp_no` = `dept_manager`.`emp_no`
    LEFT JOIN `titles`
      ON `employees`.`emp_no` = `titles`.`emp_no`,
    JOIN
      `departments` on `departments`
        ON `departments`.`dept_no` = `dept_emp`.`dept_no`

LIMIT 50; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:34:27.117

我尝试尽可能简单地解释连接。

可以说，我们必须存储一些关系信息：人员（姓名，姓氏）和分配给人员的少量电子邮件。

首先 - 我们将人员信息保存在人员表中。我们需要唯一的行标识符`personId`，这将允许我们在人员数据库中指向确切的人。

```
table persons
personId, name, surname
       1, John, Foo
       2, Mike, Bar 
```

当我们有这样的表时，我们可以将人员电子邮件存储在其他表中。在这种情况下，不需要创建唯一的行标识符，但将这些行标识符存储在所有表中是一个很好的做法。PersonId 字段告诉我们谁拥有该电子邮件。

```
table emails
emailId, personId, address
      1,        1, john.foo@company.com
      2,        1, john.foo@goomail.com
      3,        2, mike.bar@company.com
      4,        2, mike.bar@yaaho.com 
```

现在我们可以通过连接选择数据。

```
SELECT persons.Name, persons.Surname, emails.address
FROM 
    persons 
    join
    emails
ON
    persons.personId = emails.personId 
```

该查询将返回数据（分配给他们地址的人）。

```
 John, Foo, john.foo@company.com
  John, Foo, john.foo@goomail.com
  Mike, Bar, mike.bar@company.com
  Mike, Bar, mike.bar@yaaho.com 
```

明白了吗？

如果您不清楚连接 - 也许访问 phpcademy.org 或 thenewboston.org - 他们有关于许多语言和技术的非常好的教程，包括 SQL。

* * *

后来补充：

您还可以连接多个表，如下所示：

```
SELECT primarykey, key1,key2, other, fields, detail_t_1.something
FROM
    master_t
JOIN
    detail_t_1 on detail_t_1 
    ON master_t.key1 = detail_t_1.key1,

    detail_t_2 on detail_t_2 
    ON master_t.key2 = detail_t_2.key2 
```

* * *

后来补充：

如果有多个“详细信息”行（例如我的示例中的 2 封电子邮件） - 返回的数据将多次包含一个人，每个电子邮件地址。

在 SQL 中返回的数据总是表的形式，而不是树的形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:34:03.113

试试这个：

```
SELECT * from -- you can specify fields instead of *
employees e
join salaries s on e.emp_no = s.emp_no,
join titles t on e.emp_no = t.emp_no, 
join dept_emp de on e.emp_no = de.emp_no,depts,
join departments d on d.emp_no = t.emp_no,
join dept_manager dm on d.dept_no = dm.dept_no,
join employees edm on dm.emp_no = edm.emp_no -- second instance of employees to join employee who is a dept manager 
```

# android - android：根据ViewPager中的每个Fragment更新ActionBar项目？

> ID：15115729
> 
> 赞同：17
> 
> 时间：2013-02-27T15:20:56.307
> 
> 标签：android, android-actionbar, android-viewpager

我在操作栏中有一个标志/书签按钮，我希望根据 ViewPager 视图中的 Fragment 打开或关闭它。

如果用户在 ViewPager 中标记了一个片段，它将被设置为启用。当用户滑动到下一个时，我希望操作栏按钮更新为未标记。现在，我可以通过拥有两个菜单项并隐藏一个，单击时显示一个来更改按钮的状态。

这是我的 Activity 中用于切换操作栏按钮的代码：

```
public boolean onOptionsItemSelected(MenuItem item) {
    int currentItem = mPager.getCurrentItem();
    switch (item.getItemId()) {
    case R.id.menu_flag:
        mFlagged = true;
        supportInvalidateOptionsMenu();
        return true;
    case R.id.menu_unflag:
        mFlagged = false;
        supportInvalidateOptionsMenu();
        return true;
    }
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuItem item_flag = menu.findItem(R.id.menu_flag);
    MenuItem item_unflag = menu.findItem(R.id.menu_unflag);
    if (mFlagged) {
        //If flagged
        //Show flagged item
        item_flag.setVisible(false).setEnabled(false);
        item_unflag.setVisible(true).setEnabled(true);
        item_flag.isVisible();
    } else {
        //If not flagged
        //Show unflagged icon
        item_flag.setVisible(true).setEnabled(true);
        item_unflag.setVisible(false).setEnabled(false);
    }

    return super.onPrepareOptionsMenu(menu);
} 
```

我遇到的问题是我无法访问菜单项、保存和恢复按钮的状态，即是否从片段或 FragmentPagerAdapter 标记了它。

我怎样才能做到这一点？我应该在哪个级别访问操作栏；Activity、PagerAdapter 还是 Fragments？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-28T11:54:40.377

注册一个`ViewPager.OnPageChangeListener`你`ViewPager`应该做的伎俩。然后，覆盖`onPageSelected(int pageNum)`以在页面更改时接收回调。

```
public void onPageSelected(int pageNum) {
     supportInvalidateOptionsMenu();
} 
```

# django - 将解码的临时图像保存到 Django Imagefield

> ID：15115730
> 
> 赞同：6
> 
> 时间：2013-02-27T15:20:57.690
> 
> 标签：django, django-1.3

我正在尝试将作为 Base64 编码文本传递给我的图像保存到 Django Imagefield 中。

但它似乎没有正确保存。数据库报告我的所有图像都存储为“”，当它应该将它们报告为文件名时，例如：

```
"template_images/template_folders/myImage.png" 
```

试图保存我的图像的代码如下：

```
elif model_field.get_internal_type() == "ImageField" or model_field.get_internal_type() == "FileField":  # Convert files from base64 back to a file.
    if field_elt.text is not None:
        setattr(instance, model_field.name, File(b64decode(field_elt.text))) 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-13T03:22:30.050

阅读[此答案](https://stackoverflow.com/questions/3330677/a-stringio-like-class-that-extends-django-core-files-file/3332232#3332232)后，我得到了这个工作：

```
from base64 import b64decode
from django.core.files.base import ContentFile

image_data = b64decode(b64_text)
my_model_instance.cool_image_field = ContentFile(image_data, 'whatup.png')
my_model_instance.save() 
```

因此，我建议您将代码更改为：

```
from django.core.files.base import ContentFile

# Your other code...

elif model_field.get_internal_type() == "ImageField" or model_field.get_internal_type() == "FileField":  # Convert files from base64 back to a file.
    if field_elt.text is not None:
        image_data = b64decode(field_elt.text)
        setattr(instance, model_field.name, ContentFile(image_data, 'myImage.png')) 
```

然后，假设你的参数设置`ImageField`为 定义，你应该看到文件保存到`upload_to``template_images/template_folders/``YOUR_MEDIA_URL/template_images/template_folders/myImage.png`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-20T01:17:26.700

基于此 SO 答案的另一种好方法：[https](https://stackoverflow.com/a/28036805/6143656) ://stackoverflow.com/a/28036805/6143656尝试并在 django 1.10 中进行了测试

我为解码的base64文件制作了一个函数。

```
def decode_base64_file(data):

    def get_file_extension(file_name, decoded_file):
        import imghdr

        extension = imghdr.what(file_name, decoded_file)
        extension = "jpg" if extension == "jpeg" else extension

        return extension

    from django.core.files.base import ContentFile
    import base64
    import six
    import uuid

    # Check if this is a base64 string
    if isinstance(data, six.string_types):
        # Check if the base64 string is in the "data:" format
        if 'data:' in data and ';base64,' in data:
            # Break out the header from the base64 content
            header, data = data.split(';base64,')

        # Try to decode the file. Return validation error if it fails.
        try:
            decoded_file = base64.b64decode(data)
        except TypeError:
            TypeError('invalid_image')

        # Generate file name:
        file_name = str(uuid.uuid4())[:12] # 12 characters are more than enough.
        # Get the file name extension:
        file_extension = get_file_extension(file_name, decoded_file)

        complete_file_name = "%s.%s" % (file_name, file_extension, )

        return ContentFile(decoded_file, name=complete_file_name) 
```

然后就可以调用函数了

```
import decode_base64_file

p = Post(content='My Picture', image=decode_based64_file(your_base64_file))
p.save() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-09T14:25:39.437

我想这是最干净和最短的方法。

这是在基于 Django（也称为 drf）的 API 端的发布请求中处理 Base64 编码图像文件的方法，该 API 将其保存为 ImageField。

假设您有一个模型，如下所示：

```
Class MyImageModel(models.Model):
      image = models.ImageField(upload_to = 'geo_entity_pic')
      data=model.CharField() 
```

所以对应的序列化器如下：

```
 from drf_extra_fields.fields import Base64ImageField

 Class MyImageModelSerializer(serializers.ModelSerializers):
      image=Base64ImageField()
      class meta:
         model=MyImageModel
         fields= ('data','image')
      def create(self, validated_data):
        image=validated_data.pop('image')
        data=validated_data.pop('data')
       return MyImageModel.objects.create(data=data,image=image) 
```

对应的View可以如下：

```
elif request.method == 'POST':
    serializer = MyImageModelSerializer(data=request.data)
    if serializer.is_valid():
        serializer.save()
        return Response(serializer.data, status=201)
    return Response(serializer.errors, status=400) 
```

注意在序列化器中，我使用了模块[django-extra-field中提供的 Base64ImageField 的实现](https://pypi.python.org/pypi/django-extra-fields%20%22Django-Extra-Fields)

要安装此模块，请运行命令

```
pip install pip install django-extra-fields 
```

导入相同的并完成！

发送（通过 post 方法）您的图像作为 JSON 对象中的 Base64 编码字符串以及您拥有的任何其他数据。

# cocos2d-iphone - runAction 不适用于来自 CCSpriteBatchNode 的精灵

> ID：15115736
> 
> 赞同：0
> 
> 时间：2013-02-27T15:21:20.043
> 
> 标签：cocos2d-iphone

我正在使用 Cocos2d 2.1rc0。

当我不使用 CCSpriteBatchNode 时，我有一个运行良好的项目。然后我决定使用批处理节点来减少绘图调用，我的问题就开始了。

很多东西都不好用。reorderChild 是一个。另一种是runAction，没有runAction Cocos 是没用的。

这是一个在没有 batchNodes 的情况下工作并且不使用它的方法的示例。

```
// move/rotate all objects

for (int i=0; i<[allObjects count]; i++) {

        Card *object = [allObjects objectAtIndex:i];
        [object stopAllActions];

        CGPoint center = object.position;
        center.x = center.x + 100;
        center.y = center.y - 200;

        CCMoveTo *moveAction = [CCMoveTo actionWithDuration:0.3f position:ccp(center.x, center.y)];
        CCRotateTo *rotateAction = [CCRotateTo actionWithDuration:0.3 angle:0.0f];

        CCSpawn *action = [CCSpawn actions:moveAction, rotateAction, nil];

        [object runAction:[CCSequence actions: action,
                             [CCDelayTime actionWithDuration:0.1f],
                             nil]];
} 
```

完全没有任何反应。

我试图消除 CCSpanw 并直接使用 runAction 只是移动并且没有任何效果。如果我使用常规精灵，它可以工作。

该数组中的对象派生自基于 CCSprite 的类。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:50:11.283

解决方案是将类转换为从数组中提取的对象...

代替

```
Card *object = [allObjects objectAtIndex:i]; 
```

这

```
Card *object = (Card *)[allObjects objectAtIndex:i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:14:27.517

在一个干净的项目中仔细检查这不是某种奇怪的副作用之后，我不得不说你的项目有些可疑。不过，很难说是什么。

我所做的：创建一个 sprite-batch，向其中添加一个 sprite，并将其存储在一个数组中。在预定的方法中，我从数组接收精灵（不是投射）并运行上面发布的动作序列。正如预期的那样，它工作正常。

**铸造不应该有任何区别。**批处理或非批处理精灵也不应该有任何区别。

如果确实如此，那么确实发生了一些非常奇怪的事情。毕竟无论有没有施法，卡片对象都是一样的。如果它实际上没有运行 runAction 方法，您将收到“无法识别的选择器发送到实例”错误。但事实并非如此。

在重新启动您的设备、您的机器、在 Xcode 中清理项目并重建后，再次尝试不进行投射。还要在调试和发布配置中进行测试。在完成上述其中一项之后，我遇到了最奇怪的问题，而且绝对是上述所有问题。如果这不能解决问题，您可以确定这是代码（内存泄漏是我一直最喜欢的）或项目设置（即不常见的编译器优化有时会产生副作用）的问题。

如果它真的没有运行动作，请进入 runAction 方法 - 我确信它会将动作添加到动作管理器中。尝试使用和不使用强制转换，看看是否真的采用了不同的代码路径。我对此表示怀疑。

# ajax - 为什么 Chrome 会取消 CORS OPTION 请求

> ID：15115746
> 
> 赞同：16
> 
> 时间：2013-02-27T15:21:42.970
> 
> 标签：ajax, google-chrome, cors

在我的应用程序中，我正在创建从 HTTP 到 HTTPS 的 AJAX 请求。这意味着我需要 CORS。因此，我向 jQuery.ajax 添加了一些标头和参数并对其进行了测试。在 Firefox 中一切正常，但在 Chrome 中却不行。Chrome“杀死”每个预请求的请求（选项）。

jQuery脚本：

```
$(document).on('click', 'a.ajax', function(e) {
    e.preventDefault();
    $.ajax(this.href, {
        type: 'GET',
        dataType: 'json',
        crossDomain: false,
        headers: {'X-Requested-With': 'XMLHttpRequest'},
        xhrFields: {
            withCredentials: true
        }
    });
    return false;
}); 
```

HTTP转储：

```
> OPTIONS /foo HTTP/1.1
> User-Agent: curl/7.29.0
> Host: local.bar.cz
> Accept: */*
> Access-Control-Request-Headers:accept, origin, x-requested-with
> Access-Control-Request-Method:GET
> Origin:http://local.bar.cz
> 
< HTTP/1.1 204
< Server: nginx/1.2.7
< Date: Wed, 27 Feb 2013 15:06:54 GMT
< Content-Type: text/html; charset=utf-8
< Connection: keep-alive
< X-Powered-By: Nette Framework
< X-Frame-Options: SAMEORIGIN
< Access-Control-Allow-Origin: http://local.bar.cz
< Access-Control-Allow-Credentials: true
< Access-Control-Allow-Headers: accept, origin, x-requested-with
< Access-Control-Allow-Methods: OPTIONS, GET, POST, HEAD
< 
```

任何人都知道为什么 chrome 会终止这个请求？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T08:59:49.610

也许您的 https 服务器有一个不受信任的证书。如果是这样，请先尝试使用浏览器访问 URL，并接受不受信任的连接。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-27T14:03:53.577

接受证书并不总能解决这个问题。如果您使用自签名证书，即使您先接受它，Chrome 在某些情况下仍会取消您的预检 OPTIONS 请求。自 2011 年以来一直如此：

*   [https://code.google.com/p/chromium/issues/detail?id=96007](https://code.google.com/p/chromium/issues/detail?id=96007)

该页面中提到的解决方法是将自签名证书添加到系统的受信任证书列表中。

在 Mac 上执行此操作的说明（对原始版本稍作修改，使其适用于 OS 10.8.5 [http://www.robpeck.com/2010/10/google-chrome-mac-os-x-and-self-signed -ssl 证书/](http://www.robpeck.com/2010/10/google-chrome-mac-os-x-and-self-signed-ssl-certificates/)）：

1.  在地址栏中，单击带有 X 的小锁。这将打开一个小信息屏幕。
2.  点击“证书信息”按钮。</li>
3.  单击并将证书图像拖动到~~您的桌面~~打开一个查找器窗口（它似乎不喜欢拖动到桌面。
4.  双击创建的文件。这将打开钥匙串访问实用程序。输入您的密码以解锁它。
5.  确保将证书添加到系统钥匙串，而不是登录钥匙串。单击“始终信任”，即使这似乎没有任何作用。
6.  添加后，双击它。您可能需要再次进行身份验证。
7.  展开“信任”部分。“使用此证书时”设置为“始终信任”</li>

您可能需要重新启动 Chrome 才能使证书完全受信任（网址栏中的图标变为快乐的绿色锁）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-12-21T22:55:10.503

值得一提的是，还有另一种情况会产生*完全相同的*结果：

如果您在等待请求返回（即通过承诺）时将浏览器重新定位到不同的 URL（window.location ..），则将提交 OPTIONS 请求但随后的响应（POST/GET/*）将被取消（自然..）

是的..当然..如果你这样做是一个错误..但它可能看起来一样并且在错误的地方花费数小时寻找。考虑这样的代码：

```
makeAjaxCallThatReturnsAPromise.then(
    function () { // doSomething },
    function () { // doSomethingElse }
);
location.replace('http://some.where/'); 
```

# scala - 如何在 Scala 中构建适当的命名空间？

> ID：15115748
> 
> 赞同：3
> 
> 时间：2013-02-27T15:21:47.790
> 
> 标签：scala, enums, namespaces, inner-classes, case-class

我是 Scala 的新手，现在我正在创建我的第一个枚举（使用要覆盖的案例类`toString`）。

```
package views.helper.button

abstract sealed class Size(identifier: Option[String])
{
    def this(identifier: String) = this( Some( identifier ) )

    override def toString: String = identifier match
    {
        case Some( identifier ) => "btn-" + identifier
        case _ => ""
    }

    case object Mini extends Size( "mini" )
    case object Small extends Size( "small" )
    case object Default extends Size( None )
    case object Large extends Size( "normal" )
} 
```

来自 Java 背景，这是我的第一次尝试。访问 case 对象`button.Size.Mini`对我来说似乎很自然。但看起来我无法访问该类的内部案例对象。将它们放在`Size`类下面可以正常工作，但会导致命名空间混乱。

这是为什么？您将如何建模这种行为？这可以通过扩展对象来更优雅地完成吗`Enumeration`（我认为`toString`这会成为一个问题..）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T15:32:58.717

如果要使用case类，需要把case对象放在Size的伴生对象中（相当于静态可见性）

```
package views.helper.button

abstract sealed class Size(identifier: Option[String])
{
    def this(identifier: String) = this( Some( identifier ) )

    override def toString: String = identifier match
    {
        case Some( identifier ) => "btn-" + identifier
        case _ => ""
    }
}

object Size {
    case object Mini extends Size( "mini" )
    case object Small extends Size( "small" )
    case object Default extends Size( None )
    case object Large extends Size( "normal" )
} 
```

# ruby-on-rails-3 - ajax .keyup 搜索功能

> ID：15115755
> 
> 赞同：0
> 
> 时间：2013-02-27T15:22:12.747
> 
> 标签：ruby-on-rails-3, jquery

我有一个在 rails 应用程序上使用 .keyup 方法的搜索功能。我知道这个电话正在工作，因为我输入的第一个字母是搜索并显示结果。如果我继续键入它不会继续搜索该方法。下面是我的 jquery 以及它正在调用的我的 rails 视图的一部分。

**jQuery**

```
 $("input#search").keyup(function (){
    $.get($("#verified_search").attr("action"), $("#verified_search").serialize(), null, "script");
    return false;
}); 
```

**index.js.erb**

```
$(".results").html("<%= escape_javascript(render("search")) %>"); 
```

**index.html.erb 视图**

```
 <%= form_tag admin_view_index_path, :method => 'get', :id => 'verified_search' do %>
            <%= text_field_tag :search, params[:search] %>
            <%= submit_tag "Search", :name => :nil %>
 <% end %>

 <%= render 'search' %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:49:49.157

利用`.live()`

```
$("input#search").live('keyup', function (){
  $.get($("#verified_search").attr("action"), $("#verified_search").serialize(), null, "script");
  return false;
}); 
```

当您替换`$('.results')`index.js.erb 中的内容时，与这些元素关联的所有侦听器都将消失。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

**编辑：正如链接中所说，该`.live()`方法自 jQuery 1.7 起已弃用。用于`.on()`附加事件处理程序。旧版本 jQuery 的用户应该`.delegate()`优先使用`.live()`.**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T19:04:34.193

尝试这个

```
$(document).on("keyup", "#verified_search", function(){
       $.get($("#verified_search").attr("action"), $("#verified_search").serialize(), null, "script");
       return false;
   }); 
```

# php - 没有在 PHP 中删除正确的文件

> ID：15115756
> 
> 赞同：0
> 
> 时间：2013-02-27T15:22:17.940
> 
> 标签：php, html, mysql, forms, unlink

我在删除正确的文件时遇到问题。我正在显示按上传时间排序的用户上传的文件列表（最后一次上传）。如果有3-4个文件的列表，无论我点击哪个文件删除，列表中的第一个文件都会被删除，最后上传的文件就是。这是我的页面，显示特定用户上传的文件。

```
<?php
$uid=$faculty_data['faculty_id']; //Assigns logged in id to a variable
$query="SELECT * FROM uploads ORDER BY datetime DESC"; //Sorts by date time
$result=mysql_query($query);
while($row=mysql_fetch_assoc($result))
{
if($uid==$row['faculty_id']) //Checks if the logged in id matches with id in DB
{
echo '<form action="delete.php" method="POST">';
echo "<strong>File: </strong>";
$url=$row['link'];  
$new="http://tofsis.com/fileshare/".$url; 
echo "<a href='$new'>$new</a><br/>";
echo "<strong>On: </strong>".$row['datetime'];
echo '<br><input type="submit" name="delete" class="btn btn" value="Delete File"/>';
echo '<hr>';
echo '</form>';
}
}
?> 
```

这是我的删除页面：

```
<?php
$uid=$faculty_data['faculty_id'];
$query="SELECT * FROM uploads ORDER BY datetime DESC";
$result=mysql_query($query);
if(isset($_POST['delete']))
{
 while($row=mysql_fetch_assoc($result))
{
if($uid==$row['faculty_id'])
{
 $url=$row['link'];
 $new="http://tofsis.com/fileshare/".$url; 
 $query="DELETE FROM uploads WHERE link = '$url'";
 $result=mysql_query($query);
 unlink($url);
}
}
 header('Location: my_uploads.php');
 exit();
 }
 else {
 echo '<script type="text/javascript">alert("Oops something went wrong!")</script>';
 header('Location: my_uploads.php');
 exit();
 }
?> 
```

谁能告诉我哪里出错了，以便我可以解决我的问题？

![我的数据库是什么样的](../Images/088be17b90a6d9de0bba449e58c1ab10.png)

![“我的上传”页面的屏幕截图，显示用户上传的文件](../Images/443a07a41e362026a86172bd35061258.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:38:19.270

应该进行一些更改：

```
 <?php
        $uid=$faculty_data['faculty_id']; //Assigns logged in id to a variable
        $query="SELECT * FROM uploads ORDER BY datetime DESC"; //Sorts by date time
        $result=mysql_query($query);
        while($row=mysql_fetch_assoc($result))
        {
        if($uid==$row['faculty_id']) //Checks if the logged in id matches with id in DB
        { 
        $file_id = $row['id'];
        echo '<form action="delete.php" method="POST">';
        echo "<strong>File: </strong>";
        $url=$row['link'];  
        $new="http://tofsis.com/fileshare/".$url; 
        echo "<a href='$new'>$new</a><br/>";
        echo "<input type='hidden' value='$url' id='file_path' name='file_path' />";
        echo "<input type='hidden' value='$file_id' id='id_file' name='id_file' />"; // new line
        echo "<strong>On: </strong>".$row['datetime'];
        echo '<br><input type="submit" name="delete" class="btn btn" value="Delete File"/>';
        echo '<hr>';
        echo '</form>';
        }
        }
?> 
```

在删除页面上，这是：

```
 <?php

         $file_id=$_POST['id_file'];
         $file_path = $_POST['file_path'];

         $query="DELETE FROM uploads WHERE id = $file_id";
         $result=mysql_query($query);
         unlink($file_path); //this should works on deleting the file

?> 
```

这应该够了吧 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:32:20.850

添加另一个隐藏的输入来存储文件 ID 并在您的删除脚本中获取并使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:42:43.753

您为每个可用文件创建一个单独的 POST 表单，但这些表单都不包含有关它们引用的文件的任何信息。我猜它只`$_POST`包含一个作为值的`delete`键。`Delete File`

在您的删除页面中，您从一个不存在的变量中读取数据：

```
$uid=$faculty_data['faculty_id'] 
```

...然后您从数据库中检索*所有*文件以将它们的 ID 与`$uid`. 我猜你在 ID 为零时删除了所有行。

去做：

1.  启用完整的错误报告。这是您在更进一步之前需要解决的问题；没有错误消息的帮助是不可能编码的。这是一个[简短的解释](https://stackoverflow.com/a/5680885/13508)。

2.  将隐藏字段添加到具有相应 ID 的表单中。

3.  从 中读取表单数据`$_POST`，而不是从任意变量中读取。

4.  学习一些基本的 SQL，例如`WHERE`从句，因此您可以执行以下操作：

    ```
    DELETE FROM uploads
    WHERE faculty_id=333 
    ```

5.  了解 SQL 注入。使用提供准备好的语句的库。

# sql - 使用 INNER JOIN 更新 SQL Server 中的多个表

> ID：15115759
> 
> 赞同：31
> 
> 时间：2013-02-27T15:22:24.183
> 
> 标签：sql, sql-server, tsql

我正在使用 SQL Server 并尝试使用 SQL 通过一个查询一次更新多个表：

以下查询：

```
update table1
set A.ORG_NAME =  @ORG_NAME, B.REF_NAME = @REF_NAME
from table1 A, table2 B
where B.ORG_ID = A.ORG_ID
and A.ORG_ID = @ORG_ID 
```

给出错误信息：

> *无法绑定多部分标识符“A.ORG_NAME”。*

错误信息是什么意思？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-27T15:36:38.993

您不能在单个语句中更新多个表，但是您收到的错误消息是由于别名，您可以试试这个：

```
BEGIN TRANSACTION

update A
set A.ORG_NAME =  @ORG_NAME
from table1 A inner join table2 B
on B.ORG_ID = A.ORG_ID
and A.ORG_ID = @ORG_ID

update B
set B.REF_NAME = @REF_NAME
from table2 B inner join table1 A
    on B.ORG_ID = A.ORG_ID
    and A.ORG_ID = @ORG_ID

COMMIT 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-27T15:40:57.017

**如果您只影响一个表，则可以使用联接进行更新，如下所示：**

```
UPDATE table1 
SET table1.name = table2.name 
FROM table1, table2 
WHERE table1.id = table2.id 
AND table2.foobar ='stuff' 
```

但是您正在尝试使用连接多个表的更新语句来影响多个表。这是不可能的。

但是，实际上可以在一个语句中更新两个表，但需要使用包含您要更新的两个表的 UNION 创建一个视图。然后，您可以更新视图，该视图随后将更新基础表。

但这是一个 hacky 客厅技巧，使用事务和多次更新，它更直观。

# python - 如何正确编辑.profile中的路径

> ID：15115760
> 
> 赞同：0
> 
> 时间：2013-02-27T15:22:25.693
> 
> 标签：python, profile, psql

每次我尝试在我的 mac 10.8 上运行 psql 时，都会收到错误消息：

```
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

根据[this post](https://stackoverflow.com/questions/6770649/repairing-postgresql-after-upgrading-to-osx-10-7-lion) on the question这是一个PATH问题。

我尝试通过打开我的 .profile 并添加以下行来编辑我的路径：`export PATH=/usr/local/bin:$PATH`

但是，当我这样做时，`which psql`它仍然显示`/usr/bin/psql`.

为什么它没有显示我想要的正确路径：`/usr/local/bin/psql`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:26:51.170

自从编辑你的之后，你有没有重新启动你的 shell `.profile`？

您确定它`/usr/local/bin/psql`存在并且具有正确的权限吗？

你确定你正在使用`bash`？（您可以`echo $0`在 shell 提示符下键入以查看。）如果您的 shell 是，`tcsh`那么您需要将此行添加到`~/.tcshrc`or`~/.cshrc`中。不过，更简单的方法是将其添加到您的`~/.login`:

```
setenv PATH=/usr/local/bin:$PATH 
```

这将确保无论您使用哪个 shell，更改都会生效。

# qt - QT Windows 7 helloworld 程序 -> 调试/main.o 错误 1

> ID：15115763
> 
> 赞同：1
> 
> 时间：2013-02-27T15:22:45.947
> 
> 标签：qt, debugging, windows-7

我正在尝试在我的 Windows 7 专业版 32 位机器上安装和使用 QT 框架。我下载了整个 QT 包（800+ mb）并运行安装程序。在我将两行添加到系统 PATH 之后：J:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin; J:\Qt\Qt5.0.1\Tools\MinGW\bin

之后，我用简单的程序在 QT 中创建了空项目，QT 为我自己创建了。Applications -> QT gui application, "Use as default project location", Next, Next, Next. 这是创建的代码：

```
mainwindow.h
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H

mainwindow.cpp
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
}

MainWindow::~MainWindow()
{
    delete ui;
}

main.cpp

#include "mainwindow.h"
#include <QApplication>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

之后我点击下面的运行按钮得到以下错误：

```
19:23:09: Running steps for project qldt...
19:23:09: Configuration unchanged, skipping qmake step.
19:23:09: Starting: "J:\Qt\Qt5.0.1\Tools\MinGW\bin\mingw32-make.exe" 
J:/Qt/Qt5.0.1/Tools/MinGW/bin/mingw32-make -f Makefile.Debug
mingw32-make[1]: Entering directory 'J:/Users/shidant2/Desktop/workspace/qldt/qldt-build-Desktop_Qt_5_0_1_MinGW_32bit-Debug'
g++ -c -pipe -fno-keep-inline-dllexport -g -frtti -Wall -Wextra -fexceptions -mthreads -DUNICODE -DQT_QML_DEBUG -DQT_DECLARATIVE_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -DQT_NEEDS_QMAIN -I..\qldt -I"..\..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\include" -I"..\..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtWidgets" -I"..\..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtGui" -I"..\..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtCore" -I"debug" -I"." -I"." -I"..\..\..\..\..\..\Qt\Qt5.0.1\5.0.1\mingw47_32\mkspecs\win32-g++" -o debug\main.o ..\qldt\main.cpp
Makefile.Debug:357: recipe for target 'debug/main.o' failed
mingw32-make[1]: *** [debug/main.o] Error 1
mingw32-make[1]: Leaving directory 'J:/Users/shidant2/Desktop/workspace/qldt/qldt-build-Desktop_Qt_5_0_1_MinGW_32bit-Debug'
makefile:34: recipe for target 'debug' failed
mingw32-make: *** [debug] Error 2
19:23:30: The process "J:\Qt\Qt5.0.1\Tools\MinGW\bin\mingw32-make.exe" exited with code 2.
Error while building/deploying project qldt (kit: Desktop Qt 5.0.1 MinGW 32bit)
When executing step 'Make' 
```

据我了解，代码没有问题，但编译器有问题。我试图寻找解决方案，但没有找到任何有用的东西。我想像 QT 这样严重的框架不能忍受这样的问题，尤其是当它影响初学者的体验时。所以，请让我们在这里和现在解决它）

我发现了一些有趣的东西。

我试图在没有 QT 的情况下构建一切：

我去 cmd 并去那里的文件夹： cd J:/Users/shidant2/Desktop/workspace/qldt/qldt-build-Desktop_Qt_5_0_1_MinGW_32bit-Debug

我在那里运行：

g++ -c -pipe -fno-keep-inline-dllexport -g -frtti -Wall -Wextra -fexceptions -mthreads -DUNICODE -DQT_QML_DEBUG -DQT_DECLARATIVE_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2Q_ANG我"............\Qt\Qt5.0.1\5.0.1\mingw47_32\include" -I"............\Qt\Qt5.0.1 \5.0.1\mingw47_32\include\QtWidgets" -I"............\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtGui" -I".... ........\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtCore"-I"调试"-I"。" -我”。” -I"............\Qt\Qt5.0.1\5.0.1\mingw47_32\mkspecs\win32-g++" -o debug\main.o ..\qldt\main.cpp

然后我得到我的 main.o ！

如果我尝试从 QT Creator 构建 main.o，它就无法构建这个 main.o。Creator 创建了空的 main.o，挂了一段时间而没有做任何事情，然后它给出了我在第一条消息中发布的错误。

我怀疑这可能与 Windows 7 中的 QT 权限有关。但仍然无法弄清楚问题所在。

有什么建议吗，伙计们？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:54:42.670

[http://www.qtforum.org/article/38999/error-compiling-wrong-slash-used-in-makefile-debug.html](http://www.qtforum.org/article/38999/error-compiling-wrong-slash-used-in-makefile-debug.html)

它使用的斜线有问题吗？

# c# - Web API 处理上传的文件以进行删除

> ID：15115764
> 
> 赞同：0
> 
> 时间：2013-02-27T15:22:48.380
> 
> 标签：c#, .net, asp.net-web-api

好的，我有这段代码可以处理通过简单的网络表单上传的文件

```
CustomMultipartFormDataStreamProvider provider = new CustomMultipartFormDataStreamProvider(@"C:\inetpub\wwwroot\myapp\Images");
//var provider = new MultipartFormDataStreamProvider(@"C:\inetpub\wwwroot\myapp\Images");
var Image = "";
var Dir = "";
var CurrentPath = "";
string UploadType = "";
string ImageName = "";
// Read the form data.
await Request.Content.ReadAsMultipartAsync(provider);

// Show all the key-value pairs.
foreach (var key in provider.FormData.AllKeys)
{
    foreach (var val in provider.FormData.GetValues(key))
   {
      if (key == "uploadType") UploadType = val;
      if (key == "imageName") ImageName = val;
      //Trace.WriteLine(string.Format("{0}: {1}", key, val));
   }
}

foreach (MultipartFileData file in provider.FileData)
{
   //Debug.WriteLine(file.Headers.ContentDisposition.FileName);
   //Debug.WriteLine("Server file path: " + file.LocalFileName);
   Image = Path.GetFileName(file.LocalFileName);
   Dir = Path.GetDirectoryName(file.LocalFileName);
   CurrentPath = file.LocalFileName;
}

if (UploadType == "update")
{
   File.Delete(Dir + "\\" + Image);
   File.Move(CurrentPath, Dir + "\\" + Image);
   Imagen = ImageName;
}

return Request.CreateResponse(HttpStatusCode.OK, Image); 
```

正如一些文档提到的那样，使用 await 会导致读取过程异步，我的问题是我需要知道文件何时保存到文件夹中，因为如果要更新`UploadType`表单字段，我想删除它`==`，但似乎就像尝试这条线一样

```
File.Delete(Dir + "\\" + Image); 
```

图像尚未保存，我收到图像不存在的错误，所以我的问题是，我如何判断或确保图像在目录中准备好？我怎么知道异步进程结束了，谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:24:40.437

`File.Exists`是您应该使用的方法。

*除了*您应该使用`Path.Combine`连接而不是构建路径。

# python - 如何访问稀疏矩阵元素？

> ID：15115765
> 
> 赞同：58
> 
> 时间：2013-02-27T15:22:51.420
> 
> 标签：python, scipy

```
type(A)
<class 'scipy.sparse.csc.csc_matrix'>
A.shape
(8529, 60877)
print A[0,:]
  (0, 25)   1.0
  (0, 7422) 1.0
  (0, 26062)    1.0
  (0, 31804)    1.0
  (0, 41602)    1.0
  (0, 43791)    1.0
print A[1,:]
  (0, 7044) 1.0
  (0, 31418)    1.0
  (0, 42341)    1.0
  (0, 47125)    1.0
  (0, 54376)    1.0
print A[:,0]
  #nothing returned 
```

现在我不明白的是`A[1,:]`应该从第二行中选择元素，但我通过`print A[1,:]`. 此外，`print A[:,0]`应该返回第一列，但我什么也没打印。为什么？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-27T15:34:16.277

`A[1,:]`本身是一个形状为 (1, 60877) 的稀疏矩阵。 *这*就是你要打印的，它只有一行，所以所有的行坐标都是 0。

例如：

```
In [41]: a = csc_matrix([[1, 0, 0, 0], [0, 0, 10, 11], [0, 0, 0, 99]])

In [42]: a.todense()
Out[42]: 
matrix([[ 1,  0,  0,  0],
        [ 0,  0, 10, 11],
        [ 0,  0,  0, 99]], dtype=int64)

In [43]: print(a[1, :])
  (0, 2)    10
  (0, 3)    11

In [44]: print(a)
  (0, 0)    1
  (1, 2)    10
  (1, 3)    11
  (2, 3)    99

In [45]: print(a[1, :].toarray())
[[ 0  0 10 11]] 
```

您可以选择列，但如果列中没有非零元素，则在输出时不显示任何内容`print`：

```
In [46]: a[:, 3].toarray()
Out[46]: 
array([[ 0],
       [11],
       [99]])

In [47]: print(a[:,3])
  (1, 0)    11
  (2, 0)    99

In [48]: a[:, 1].toarray()
Out[48]: 
array([[0],
       [0],
       [0]])

In [49]: print(a[:, 1])

In [50]: 
```

最后一次`print`调用没有显示输出，因为该列`a[:, 1]`没有非零元素。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2017-08-20T21:26:22.293

要使用与您的问题详细信息不同的技术来回答您的标题问题：

`csc_matrix`给你方法`.nonzero()`。

鉴于：

```
>>> import numpy as np
>>> from scipy.sparse.csc import csc_matrix
>>> 
>>> row = np.array( [0, 1, 3])
>>> col = np.array( [0, 2, 3])
>>> data = np.array([1, 4, 16])
>>> A = csc_matrix((data, (row, col)), shape=(4, 4)) 
```

您可以通过以下方式访问指向非零数据的索引：

```
>>> rows, cols = A.nonzero()
>>> rows
array([0, 1, 3], dtype=int32)
>>> cols
array([0, 2, 3], dtype=int32) 
```

然后您可以使用它来访问您的数据，而无需制作稀疏矩阵的密集版本：

```
>>> [((i, j), A[i,j]) for i, j in zip(*A.nonzero())]
[((0, 0), 1), ((1, 2), 4), ((3, 3), 16)] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-09T17:48:36.117

如果是用来计算 TFIDF 分数`TfidfTransformer`，yu 可以得到 IDF `tfidf.idf_`。然后是稀疏数组名，比如'a'，`a.toarray().`

`toarray`返回一个ndarray；`todense`返回一个矩阵。如果你想要一个矩阵，使用`todense`; 否则，使用`toarray`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-26T11:27:40.633

我完全承认所有其他给出的答案。这只是一种不同的方法。

为了演示这个例子，我正在创建一个新的稀疏矩阵：

```
from scipy.sparse.csc import csc_matrix
a = csc_matrix([[1, 0, 0, 0], [0, 0, 10, 11], [0, 0, 0, 99]])
print(a) 
```

输出：

```
(0, 0)  1
(1, 2)  10
(1, 3)  11
(2, 3)  99 
```

为了轻松访问它，就像我们访问列表的方式一样，我将其转换为列表。

```
temp_list = []
for i in a:
    temp_list.append(list(i.A[0]))

print(temp_list) 
```

输出：

```
[[1, 0, 0, 0], [0, 0, 10, 11], [0, 0, 0, 99]] 
```

这可能看起来很愚蠢，因为我正在创建一个稀疏矩阵并将其转换回来，但是有一些函数，如**[TfidfVectorizer](http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.TfidfVectorizer.html)**和其他函数，它们返回一个稀疏矩阵作为输出并且处理它们可能很棘手。这是从稀疏矩阵中提取数据的一种方法。

# c++ - 存储分配器 - 它是什么？

> ID：15115766
> 
> 赞同：6
> 
> 时间：2013-02-27T15:23:04.707
> 
> 标签：c++, memory

我知道 C 和 C++ 中的存储类（静态、外部、自动、寄存器，C++ 还添加了可变和一些特定于编译器的类），但我不知道**存储分配器**是什么。我不认为它是指可在 STL 上实现的内存分配器，简单来说它是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T15:28:31.967

它是后面的东西`operator new`和（不要与操作员和操作员`operator delete`混淆）。从空闲存储中分配内存，并释放之前分配的内存以供可能重用。当代码执行（运算符）时，编译器生成调用以获得正确的存储字节数的代码，然后调用构造函数。当代码执行（运算符）时，编译器调用析构函数 for ，然后调用以释放内存。`new``delete``operator new``operator delete``operator new``foo *ptr = new foo``new``operator new``foo``delete ptr``delete``foo``operator delete`

请注意，这是该术语在 C++03 标准中的使用方式。在 C++11 标准中，它**也**用于指代标准分配器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T15:32:45.707

在 C++ 标准中，该术语用于指代 STL 样式容器使用的分配器类 - 或者`std::allocator`满足 C++11 17.6.3.5 给出的要求的用户定义的自定义分配器。

但是，它不是一个正式定义的术语，也曾出现一次，指的是自由存储的实现——即由`new`.

[注意：我指的是当前的（2011）语言规范。如评论中所述，该规范的历史版本显然仅使用该术语（非正式地）来指代免费商店]

# javascript - 窗口失去焦点时设置超时不起作用

> ID：15115768
> 
> 赞同：6
> 
> 时间：2013-02-27T15:23:18.847
> 
> 标签：javascript, settimeout

我有一个简单的 JavaScript 计时码表，它显示在名为“d2”的表单字段上，它用于检查某人执行特定任务的时间：

```
var milisec=0 
var seconds=0
var complemento1=""
document.form1.d2.value='00:00:00' 

function display(){ 
    if (milisec>=9){ 
        milisec=0 
        seconds+=1 
    } 
    else{
        milisec+=1
    }
    complemento1=complemento2=complemento3="";
    if ((seconds%60)<10) complemento1="0";
    if ((Math.floor(seconds/60)%60)<10) complemento2="0";
    if ((Math.floor(seconds/3600))<10) complemento3="0";
    document.form1.d2.value=complemento3+Math.floor(seconds/3600)+":"+complemento2+(Math.floor(seconds/60)%60)+":"+complemento1+(seconds%60)
    setTimeout("display()",100) 
} 
```

问题是当这个人打开一个新标签/使用另一个程序时，计时器会停止，然后在窗口再次聚焦时恢复（使用 Chrome）。它有最奇怪的行为，因为有时它起作用，有时它不起作用。

我看到很多帖子需要脚本在不集中时停止，我想要完全相反，搜索了一个多小时没有运气。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-17T14:26:10.830

JavaScript 超时不保证在特定时间执行。例如，如果在定时器结束时线程正忙于其他事情，它将首先完成它正在做的事情，然后执行你的定时器。

此外，您的函数没有考虑在 display 函数中花费的时间，因此每毫秒都会增加一点延迟。

实现定时器的正确方法是使用系统时间。

所以像：

```
//Call at the beggining to save the start time
var start_time = new Date()

// Compute seconds (does not matter when/how often you call it.) 
var milliseconds_since_start = new Date().valueOf() - start_time 
```

Date 对象还可以将此期间格式化为您的时钟：

```
var m  = new Date(milliseconds_since_start)
m.getMinutes()+":"+m.getSeconds() 
```

# r - 如何使用apply函数以及apply-family的哪个函数？

> ID：15115771
> 
> 赞同：0
> 
> 时间：2013-02-27T15:23:21.750
> 
> 标签：r, apply

我仍在为不同的应用函数以及它们如何替换 for-next 循环而苦苦挣扎。我想要做的是根据值的排序顺序对带有字符串（值标签）的向量进行排序，在我的例子中是优势比。

我在“oo”对象中有优势比（无序），在 so 对象中有排序/有序优势值。此外，我有按与“oo”相同的顺序排序的值标签，现在应该重新排序以匹配“so”对象中的值：

```
# sort labels descending in order of
# odds ratio values
oo <- exp(coef(x))[-1]
so <- sort(exp(coef(x))[-1])
nlab <- NULL
for (k in 1:length(categoryLabels)) {
  nlab <- c(nlab, categoryLabels[which(so[k]==oo)])
}
categoryLabels <- nlab 
```

例如

*   "oo" 是 (0.3, 0.7, 0.5)
*   “所以”是 (0.3, 0.5, 0.7)
*   categoryLabels (of oo) 是 ("A", "B", "C") 并且应该根据 "so" 重新排序: ("A", "C", "B")

我想知道的是，是否可以用应用函数替换 for-next-loop，如果可以，如何？

在此先感谢，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:28:34.677

看起来您要做的只是`categoryLabels`基于的订单`oo`，这可以通过以下方式完成：

```
categoryLabels = categoryLabels[order(oo)] 
```

[order](http://stat.ethz.ch/R-manual/R-patched/library/base/html/order.html)为您提供一个索引向量，当用于索引向量时，会将其转换为排序顺序。在您的示例中：

```
oo = c(0.3, 0.7, 0.5)
order(oo)
# [1] 1 3 2 
```

虽然如果我们确实从`so`and开始，在这种情况下使用[match](http://stat.ethz.ch/R-manual/R-patched/library/base/html/match.html)`oo`比使用任何函数要容易得多：`apply`

```
categoryLabels = categoryLabels[match(oo, so)] 
```

`match`是一个函数，它在第二个向量中找到第一个向量的索引。在您的示例中：

```
oo = c(0.3, 0.7, 0.5)
so = c(0.3, 0.5, 0.7)
match(oo, so)
# [1] 1 3 2 
```

# java - 为什么整数不能解决空字符串

> ID：15115772
> 
> 赞同：8
> 
> 时间：2013-02-27T15:23:27.130
> 
> 标签：java

Integer 类包含一些将 String 转换为 Integer 的方法：

1.  `Integer.parseInt(null);`参数：字符串返回：int，所以我希望当参数为null时抛出NPE

2.  `Integer.valueOf(null);`参数：字符串返回：整数，所以我希望当参数为空时，这应该返回空。但是这个前提是错误的，我问为什么没有这样的方法可以处理这种情况？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T15:24:53.400

`null`不是整数的有效表示。`Integer.parseInt()`要求解析的字符串是整数的有效表示。

**[整数.parseInt()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Integer.java#Integer.parseInt%28java.lang.String%29)**

```
 public static int parseInt(String s, int radix)
440                 throws NumberFormatException
441     {
442         if (s == null) {
443             throw new NumberFormatException("null");
444         } 
```

[Integer.valueOf(str)]](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Integer.java#Integer.valueOf%28java.lang.String%29) // 它调用 Integer.parseInt(Str) 返回一个 Integer 实例。

```
 public static Integer valueOf(String s) throws NumberFormatException
569     {
570         return new Integer(parseInt(s, 10));
571     } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T15:40:07.797

Sun 中实现 Integer 的人（`long`不久前 :)）在编写该方法时可能没有考虑数据库。除非在处理数据库数据时，或者在极少数情况下您试图用 null 显式表示“未知”，否则 null 通常是出现严重错误的迹象。一般来说，一旦出现问题就提出异常是个好主意。（[快速失败](http://en.wikipedia.org/wiki/Fail-fast)设计）

如果您曾经花时间在 C 中寻找一个分段错误，该错误是由于字符串值比您为其提供的内存长（然后覆盖了某些程序代码或其他数据），您将非常了解它有多糟糕当出现问题时不要失败。

自 Java 1.0 以来，Java 中与数据库的交互变得非常普遍，因此您建议应该有一种方法来处理这种情况可能是正确的。Integer 是最终类，因此如果您构建自己的 Integer 类，您将失去自动装箱，因此这可能确实需要通过 oracle 更改语言。

基本上，您观察到的是目前的情况，有人将不得不付钱给您以围绕它进行编码:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T15:34:52.947

我可能是错的，@hudi，但这就是你要找的吗？

```
public Integer valueOf2( String inputString ) {
    return (inputString == null) ? null : Integer.parseInt(inputString);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T15:53:03.500

@hudi，这个呢？

[整数转换器](http://commons.apache.org/proper/commons-beanutils//api/org/apache/commons/beanutils/converters/IntegerConverter.html)

我从未使用过它，但是如果出现转换错误，您似乎可以指定默认值。我知道为此在您的项目中包含另一个 jar 是很痛苦的；如果有标准的东西就好了。

# php - PHP $_SESSION 数据返回空

> ID：15115774
> 
> 赞同：0
> 
> 时间：2013-02-27T15:23:29.020
> 
> 标签：php, mysql, session, session-variables

我有一个 login.php 文件：

```
<?php

session_start();

include('db.php');

            if(isset($_POST['email']) && !empty($_POST['email']) AND isset($_POST['password']) && !empty($_POST['password'])){
                $email = mysql_escape_string($_POST['email']);
                $password = mysql_escape_string($_POST['password']);

                $search = mysql_query("SELECT * FROM users WHERE email='".$email."' AND password='".$password."' AND active='1'") or die(mysql_error()); 
                $match  = mysql_num_rows($search);

                if($match > 0){
                    $row = mysql_fetch_assoc($search);
                    $user=$row['forename'].' '.$row['surname'];
                    $_SESSION['username']=$user;
                    //$msg = 'Login Complete! Thanks, '.$user.'!';
                    header( 'Location: page1.php' ) ;
                    die;
                }else{
                    $msg = 'Login Failed!<br /> Please make sure that you enter the correct details and that you have activated your account.';
                }
            }

?> 
```

现在，当我加载 page1.php 时，我遇到了问题。该文件包含此...

```
<?php

session_start();

include('db.php');

if(isset($_SESSION['username'])){
    echo 'Success, '.$_SESSION['username'].'!';
}else{
    echo 'No dice!';
    //header( 'Location: login.php' ) ;
}

?> 
```

如果没有存储用户名，我理想地希望它重定向到登录。如果有，我想让他们查看。但是，我得到“没有骰子！” 每次，所以看起来我没有正确检索（或存储）数据。我究竟做错了什么？

* * *

需要明确的是，`else`不应触发，因为它应该引用 index.php 中的会话数据集。重定向不是问题。

* * *

这个问题是特定于我的主机的，他的设置很奇怪。在与他们联系时，他们为我提供了我必须用来`session_save_path`设置的正确路径信息。在此基础上给出正确答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:27:12.317

重定向格式不正确。您必须指定完整的网址，如下所示：

```
header('Location: http://your.site.com/page1.php');
die; 
```

重定向后结束脚本很重要。

如果没有保留会话数据，可能是您有一些配置问题。验证您的 php 配置并检查存储会话数据的写入权限。

```
<?php phpinfo();?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:43:37.247

我会对此发表评论，但低于 50 的代表限制意味着我不能出于某种原因。尝试

```
$row = mysql_fetch_assoc($search);
$user=$row['forename'].' '.$row['surname'];
echo 'User: '.$user.'<br />';

$_SESSION['username']=$user;
echo 'Session: '.$_SESSION['username'];

//header( 'Location: page1.php' ) ; 
```

看看是否有任何东西实际存储在变量中。

编辑：试试这个

```
if($match > 0){
   $row = mysql_fetch_assoc($search);
   $user=$row['forename'].' '.$row['surname'];
   $_SESSION['username']=$user;
   $_SESSION['logintrue'] = true;
   //$msg = 'Login Complete! Thanks, '.$user.'!';
   header( 'Location: page1.php' ) ;
   die;
} 
```

会话.php

```
<?php
session_start();

if(!$_SESSION['logintrue'])
{
header( 'Location: login.php' ) ;
}

$SessionUsername = $_SESSION['username'];
?> 
```

page1.php

```
<?php

require_once 'session.php';
require_once 'db.php';

echo 'I work now maybe?<br />';
echo $SessionUsername;
?> 
```

还包括不是函数，所以写它们就像`include 'db.php';`我犯了那个错误一样。

# iphone - 将一个 imageView 拖入另一个

> ID：15115775
> 
> 赞同：1
> 
> 时间：2013-02-27T15:23:28.777
> 
> 标签：iphone, ios, objective-c

我一直忙于尝试开发一款游戏，并且我发现了其中一个困难的部分。我可能完全不知道如何做到这一点。

我的板上有几个图像视图。它们是我拖入其中的对象（瓷砖）的持有者。（同样，我不知道这是最好的还是正确的方法。）

例如，我制作了一张图片来显示我的意思：

在此图像中，我有一个图像 (A)，我想将其拖到顶部的 1 个图块上，我的代码必须自动检测 (A) 位于哪个图像视图上方并将其放置到该视图中。

![在此处输入图像描述](../Images/dfca417c9a57ff1610e2f1cd2dd31ad9.png)

我真的被困在这里，我想要一些关于如何以这种方式或另一种方式做这样的事情的信息。

A 已经可以拖动了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:21:44.570

您可以使用`bool CGRectIntersectsRect (CGRect rectA,CGRect rect1);`（rect1 或 rect2 或 3 或 4）检查“A”的框架与四个顶部图块中的任何一个的交叉点。

相交后，您可以检查每个图块的中心与“A”中心之间的最小距离，以检查哪个图块包含的 A 最多。（全部`UIView`具有`center`属性）

这是假设所有图块和 A 都是单独的视图。

或者再三考虑，您可以在检查之前检查中心之间的最小距离，保持最小距离，并完全避免第一步。

```
CGFloat xDist = (p2.x - p1.x);
CGFloat yDist = (p2.y - p1.y);
CGFloat distance = sqrt((xDist * xDist) + (yDist * yDist)); 
```

*   您可以使用上面的代码来计算两个 CGPoints（中心）之间的距离。从 [如何找到两个CG点之间的距离？](https://stackoverflow.com/questions/1906511/how-to-find-the-distance-between-two-cg-points)它是简单的勾股定理。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:51:38.723

为您的手势创建属性：

```
@property (nonatomic, strong) UILongPressGestureRecognizer *longPress; 
```

初始化它：

```
self.longPress = [UILongPressGestureRecognizer initWithTarget:self action:@selector(gestureRecognizedStateDidChanged:)];
self.longPress.minimumPressDuration = 0.03; 
```

你的视图控制器类应该实现`<UIGestureRecognizerDelegate>`协议：

```
self.longPress.delegate = self;

- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)sender {
return CGRectContainsPoint(self.targetImage.frame, [sender locationInView:self.view]);
}

- (void)gestureRecognizedStateDidChanged:(UILongPressGestureRecognizer *)sender {
switch (recognizer.state) {
        case UIGestureRecognizerStatePossible:
        case UIGestureRecognizerStateBegan: {
        // did started, you can pick up your view
        self.targerImageView.center = [sender locationInView:self.view];
        break;
    }
    case UIGestureRecognizerStateFailed:
    case UIGestureRecognizerStateCancelled:
    case UIGestureRecognizerStateEnded: {
        // drop callback, bring you view home or to target
        if (CGRectContainsPoint(self.toDropImageViews.frame, [sender locationInView:self.view]) {
            // do you drop code here
        }
        break;
    }
    case UIGestureRecognizerStateChanged: {
        self.targerImageView.center = [sender locationInView:self.view];
        // moving callback
        break;
        }
    } 
```

# asp.net - 将焦点设置到 ASP.Net LoginView 的用户名文本框字段

> ID：15115776
> 
> 赞同：0
> 
> 时间：2013-02-27T15:23:29.823
> 
> 标签：asp.net, vb.net, findcontrol, loginview

使用这个 ASP.Net LoginView，我们想在网页加载时将焦点设置在用户名文本框上：

```
<asp:LoginView 
    ID="loginViewMain" 
    runat="server">

    <LoggedInTemplate>
        <asp:LoginName 
            ID="loginName" 
            runat="server"
            FormatString="Hello, {0}!<br/><br/> You have successfully<br/> logged onto the staff site." />

        <br/>
        <br/>

        (<asp:LoginStatus ID="loginStatus" runat="server" />)

        <br/>
        <br/>

    </LoggedInTemplate>

    <AnonymousTemplate>
        <asp:LoginStatus 
            ID="loginStatus" 
            runat="server" />
    </AnonymousTemplate>
</asp:LoginView> 
```

这是我们试图用来关注用户名文本框的代码隐藏：

```
Private Sub loginViewMain_Load(sender As Object, e As EventArgs) Handles loginViewMain.Load

    Dim objContentPlaceHolder As ContentPlaceHolder
    Dim objLoginView As LoginView
    Dim objUserName As TextBox

    objContentPlaceHolder = CType(Me.FindControl("ContentPlaceHolderBody"), ContentPlaceHolder)

    If Not objContentPlaceHolder Is Nothing Then

        objLoginView = CType(objContentPlaceHolder.FindControl("loginViewMain"), LoginView)

        If Not objLoginView Is Nothing Then
            objUserName = objLoginView.FindControl("UserName")
            objUserName.Focus()
        End If
    End If
End Sub 
```

执行确实进入了这个 If 结构：

```
If Not objLoginView Is Nothing Then 
```

你能告诉我我还需要在这个编码的 If 结构中添加什么来获取用户名文本框吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:46:25.983

FindControl 只搜索一个树级别的深度。

尝试使用[递归](http://www.codinghorror.com/blog/2005/06/recursive-pagefindcontrol.html)函数

例如：

```
private Control FindControlRecursive(Control root, string id) 
{ 
    if (root.ID == id)
    { 
        return root; 
    } 

    foreach (Control c in root.Controls) 
    { 
        Control t = FindControlRecursive(c, id); 
        if (t != null) 
        { 
            return t; 
        } 
    } 

    return null; 
} 
```

然后电话将是

```
objLoginView = CType(FindControlRecursive(objContentPlaceHolder, "loginViewMain"), LoginView); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:47:23.877

您无需了解 LoginView 控件的详细信息即可执行此操作。而是使用 JavaScript 来查找第一个文本框并专注于它。

在您的代码隐藏文件中添加以下代码：

```
var script = string.Format(@"
    var inputs = document.getElementById('{0}').getElementsByTagName('input');
    for (var i = 0; i < inputs.length; i++) {{
        var inp = inputs[i];
        if (inp.type.toUpperCase() !== 'TEXT') continue;
        inp.focus();
        inp.select();
        break;
    }}", this.LoginView.ClientID);

// register the script
ScriptManager.RegisterStartupScript(this, this.GetType(), "login focus", script, true); 
```

或在 VB.NET 中：

```
Dim script = String.Format(
    "var inputs = document.getElementById('{0}').getElementsByTagName('input');" &
    "for (var i = 0; i < inputs.length; i++) {{" &
    "    var inp = inputs[i];" & 
    "    if (inp.type.toUpperCase() !== 'TEXT') continue;" & 
    "    inp.focus();" & 
    "    inp.select();" &
    "    break;" & 
    "}}", Me.LoginView.ClientID)

' register the script
ScriptManager.RegisterStartupScript(Me, TypeOf(this), "login focus", script, True) 
```

# python - 重新启动 Web 服务器后 Django/Apache 代码未重新加载

> ID：15115777
> 
> 赞同：2
> 
> 时间：2013-02-27T15:23:30.657
> 
> 标签：python, linux, django, ubuntu

我正在处理 Ubuntu 服务器上的遗留代码。我遇到了一些奇怪的事情：在 Apache 重新启动（整个服务器重新启动）之后，该站点仍在使用旧代码，即使 views.py 已被删除。

请给我一些建议/提示 - 什么可能导致此服务器行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T20:25:21.530

我有这个问题。就我而言，运行以下命令解决了它：

```
touch myproject/wsgi.py 
```

无需重启服务器或删除 .pyc 文件。这一切都在[mod_wsgi 文档](https://code.google.com/p/modwsgi/wiki/ReloadingSourceCode#Reloading_In_Daemon_Mode)中进行了解释。

# java - MapActivity ClassDefNotFoundException 在运行时

> ID：15115784
> 
> 赞同：1
> 
> 时间：2013-02-27T15:23:45.307
> 
> 标签：java, android, google-maps, noclassdeffounderror, mapactivity

我的活动从 MapActivity 扩展，我在清单中正确描述了它，我已将`<uses-library>`标签放在`<application>`我正在使用 goole apis 库构建的标签中，并且 maps.jar 只存在一次（没有重复）并且应用程序运行并工作在大多数设备上完美。但是，我收到了一个带有 ClassDefNotFoundException 的崩溃报告，它发生在带有 Android 2.1 的 ZTE Blade 设备上。我正在使用 google apis 2.1 进行构建，有人对此有什么建议吗？

我也提供堆栈跟踪：

```
java.lang.IllegalStateException: Could not execute method of the activity
at android.view.View$1.onClick(View.java:2165)
at android.view.View.performClick(View.java:2506)
at android.view.View$PerformClick.run(View.java:9112)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3835)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at android.view.View$1.onClick(View.java:2160)
... 11 more
Caused by: java.lang.NoClassDefFoundError: com.testing.asd.android.ui.InfoActivity
at com.testing.asd.android.ui.HomeScreen.onClick(HomeScreen.java:60)
... 14 more 
```

com.testing.asd.android.ui.InfoActivity 扩展了 MapActivity。到目前为止，问题仅在一台设备上。我在 Android 2.3 和 4.2 上对其进行了测试，那里没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:41:42.733

我不确定 ZTE Blade 是否属于这种情况，但有些设备（例如 Kindle Fire）没有 Google API。如果您的应用使用 MapView，我认为这些手机会显示 NoClassDefFoundError。

# javafx - 如何在javafx2中将场景与舞台绑定

> ID：15115785
> 
> 赞同：1
> 
> 时间：2013-02-27T15:23:52.530
> 
> 标签：javafx, scene

实际上，我想在特定事件中从一个场景切换到另一个场景。所以我可以通过设置舞台的场景而不绑定来做到这一点，但我想在标志改变时将我的舞台与场景绑定，我的场景将自动改变....请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T21:32:40.090

[JavaFX 演示和示例下载](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)包含一个名为 FXML-LoginDemo 的应用程序。它演示了如何在舞台中更改场景。重要的部分发生在方法中`replaceSceneContent`。至于在更新应用程序中的标志时自动更改阶段，有几种方法可以做到这一点。我建议使用[PropertyChangeListener](http://docs.oracle.com/javase/tutorial/uiswing/events/propertychangelistener.html)或将 JavaFX 与[CDI](http://java.dzone.com/articles/fxml-javafx-powered-cdi-jboss)一起使用，然后使用 CDI[事件](http://docs.oracle.com/javaee/6/tutorial/doc/gkhic.html)。我在我的应用程序中使用了后一种方法，效果非常好。

# c# - 从代码异常运行 perl 脚本

> ID：15115788
> 
> 赞同：0
> 
> 时间：2013-02-27T15:24:10.220
> 
> 标签：c#, perl

我使用了以下代码：

```
static void Main(string[] args)
    {
        ProcessStartInfo perlStartInfo = new ProcessStartInfo(@"C:\strawberry\perl\bin\perl.exe");
        perlStartInfo.Arguments = "c:\\ebm\\parse_ebm_log.pl";
        perlStartInfo.UseShellExecute = false;
        perlStartInfo.RedirectStandardOutput = true;
        perlStartInfo.RedirectStandardError = true;
        perlStartInfo.CreateNoWindow = false;

        Process perl = new Process();
        perl.StartInfo = perlStartInfo;
        perl.Start();
        perl.WaitForExit();
        string output = perl.StandardOutput.ReadToEnd();
    } 
```

现在当我查看 perl.MainModule 时出现此异常： MainModule = 'perl.MainModule' throw an exception of type

> 'System.ComponentModel.Win32Exception' base {System.SystemException} = {“只有部分 ReadProcessMemory 或 WriteProcessMemory 请求已完成”}

目标构建是 x64，因为之前在同一个 perl.MainModule 中出现异常，当它说不能在 x32 进程上运行 x64 时（类似的东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:41:05.987

尝试在 PATH Enviroment 中添加 perl（之后打开一个新的 Windows shell）以及以下更改

```
ProcessStartInfo perlStartInfo = new ProcessStartInfo()
perlStartInfo.FileName= "perl.exe"
perlStartInfo.UseShellExecute = true 
```

# c# - 使用 IJsonValue 在 Windows 8 C# 中创建 JSON：无法将类型“字符串”隐式转换为“Windows.Data.Json.IJsonValue”

> ID：15115791
> 
> 赞同：0
> 
> 时间：2013-02-27T15:24:13.537
> 
> 标签：c#, json, windows-8

我正在使用 Visual Studio 在 C# 中创建一个 Windows 8 应用程序。我正在尝试获取一堆数据输入并从该数据创建一个 JSON 对象。这是我的初步测试方法不起作用：

```
 IJsonValue name = "Alex"; 
        JsonObject Character = new JsonObject();
        Character.Add("Name", name); 
```

我得到的错误是

```
Cannot Implicitly convert type 'string' to 'Windows.Data.Json.IJsonValue' 
```

我查阅了 IJsonValue 的文档，但不知道如何创建包含字符串的 IJsonValue 实例。那么如何将数据存储在要添加到 JsonObject 的 IJsonValue 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-18T10:47:17.753

以下是您的操作方法：

```
JsonObject character = new JsonObject();
character.Add("Name",JsonValue.CreateStringValue("Alex")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T16:46:19.827

[JsonValue](http://msdn.microsoft.com/en-us/library/windows/apps/windows.data.json.jsonvalue.aspx)类实现了 IJsonValue 接口。您可以创建该类的实例并像这样使用它，例如...

```
JsonValue jsonValue = JsonValue.Parse("{\"Width\": 800, \"Height\": 600, \"Title\": \"View from 15th Floor\", \"IDs\": [116, 943, 234, 38793]}");
double width = jsonValue.GetObject().GetNamedNumber("Width");
double height = jsonValue.GetObject().GetNamedNumber("Height");
string title = jsonValue.GetObject().GetNamedString("Title");
JsonArray ids = jsonValue.GetObject().GetNamedArray("IDs"); 
```

[查看更多示例](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh770289.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)。

# android - 如何滚动到 WebView url 中的命名锚点？

> ID：15115798
> 
> 赞同：3
> 
> 时间：2013-02-27T15:24:31.093
> 
> 标签：android, android-webview, uri-fragment

我在 Android 的 WebView 中打开特定命名锚点上的本地存储页面时遇到兼容性问题。目前我正在简单地使用

```
webView.loadUrl("file:///android_asset/page.html#fragment"); 
```

这在我的 4.1 设备上运行良好，但其他设备的用户一直抱怨它不工作。

例如在**4.0.3**打开没有[url 片段](http://en.wikipedia.org/wiki/URL_fragment) `#fragment`部分的页面可以正常打开，但用户会收到“*网页不可用*”错误。

我还尝试通过对该`loadUrl(String)`方法的两次调用来打开片段，首先没有然后使用片段。还使用 JavaScript 来更改页面的位置。

我还能尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-30T18:27:40.313

首先，[RFC 1738](https://www.rfc-editor.org/rfc/rfc1738#section-3.10 "RFC 1738")没有为`file://`方案指定 URL 片段部分。文件 URI 由`file://`、主机名和路径组成——仅此而已。

**因此，不应支持**文件 URI 中的锚点。但出于某种原因，自 Jelly Bean 以来，Android 确实支持它们。如果你也想让他们在冰淇淋三明治上工作：

```
private static String BASE_URL = "file:///android_asset/";

mWebView.setWebViewClient(new WebViewClient() {
    @Override
    public WebResourceResponse shouldInterceptRequest(WebView view, String url) {
        try {
            if (url.startsWith(BASE_URL) && url.contains("#")) {
                url = url.replace(BASE_URL, "");
                InputStream is = getAssets().open(url.substring(0, url.indexOf("#")));
                return new WebResourceResponse("text/html", "utf-8", is);
            }
        } catch(IOException e) {
            Log.e("DKDK", "shouldInterceptRequest", e);
        }
        return null;
    }
}); 
```

# signalr - 没有 ASP.NET 的 SignalR Web 客户端？

> ID：15115799
> 
> 赞同：3
> 
> 时间：2013-02-27T15:24:33.123
> 
> 标签：signalr

是否可以编写 WebSocket (SignalR) 客户端，而不必将其嵌入托管在 IIS（或其他 ASP.NET Web 服务器）上的 ASP.NET 应用程序中？

例如，如果我有一个带有自定义集线器的自托管 SignalR 服务器，是否可以（如果可以，如何）从“纯”Javascript Web 客户端调用它？

在这种情况下，文件夹`<script src="~/signalr/hubs" type="text/javascript" />`中没有运行时生成的“魔术”脚本部分。`~/signalr/hubs/`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T19:52:04.683

SignalR 不需要有一个 asp.net 应用程序即可工作。您可以创建一个通用的 html 页面并仍然与 SignalR 服务器进行通信。您甚至可以使用 silverlight、windows phone 或其他客户端与 SignalR 服务器进行通信，目前支持的有很多，甚至更多的是第三方开发的（如 android、ios、node 等）。

当您说“纯”JavaScript 客户端时，我假设您的意思是没有像 JQuery 这样的第三方库，在这种情况下，SignalR 当前在没有 JQuery 的情况下无法工作，但不依赖 JQuery 的客户端正在筹备中（[https://github .com/SignalR/SignalR/issues/372](https://github.com/SignalR/SignalR/issues/372)）。

**您可以使用 ASP.NET Owin**创建一个自托管服务器下拉 SignalR 。

**编辑：** 为了使用自托管服务器，您必须在应用程序中启用跨域。查看答案：[SignalR：协商请求期间出错：未定义](https://stackoverflow.com/questions/14990789/signalr-error-during-negotiation-request-undefined/14994041)

# python - 如何获取 App Engine Datastore 中的 ID 字段？

> ID：15115803
> 
> 赞同：4
> 
> 时间：2013-02-27T15:24:53.353
> 
> 标签：python, google-app-engine

假设我在 Google AppEngine 上有一个博客，想通过 jinja2 打印出每篇文章的 id。

```
blog = db.GqlQuery('SELECT * FROM Blog')

self.render('blog.html', blog = blog) 
```

并在模板中：

```
{{% for b in blog %}}
{{b.id}}
{{% endfor %}} 
```

现在我还没有在我的数据库模型中添加一个“id”字段，我只想访问数据存储 ID 字段中的构建。我怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T15:42:05.417

看看 db 键类。当您拥有实体时，您可以执行以下操作：

```
entity.key().id_or_name() 
```

或在 NDB 中：

```
entity.key.id() 
```

# excel - 如何在 Excel 中围绕第一个数字拆分/解析字符串

> ID：15115816
> 
> 赞同：6
> 
> 时间：2013-02-27T15:25:40.070
> 
> 标签：excel, split, excel-formula

我在 A 列中有一个字符串，它是字母和数字的混合。我想在出现的第一个数字之前将字符串分成两半，这样“abc123”在 B 列中变为“abc”，在 C 列中变为“123”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T16:33:41.533

如果有任何类型的模式，例如总是 3 个字母.....或者只有 3 个或 4 个字母，那么您可以更轻松地实现，但是对于任意数量的字母（假设数字总是跟随字母），您可以使用这个公式在 B2 中（我认为这比 topcat3 链接中建议的公式更简单）

`=LEFT(A2,MIN(FIND({1,2,3,4,5,6,7,8,9,0},A2&1234567890))-1)`

然后C2中的这个公式

`=REPLACE(A2,1,LEN(B2),"")`

请注意，最后一个公式将数字部分作为文本值返回 - 如果您希望它是数字，请在公式末尾添加 +0（但您将丢失任何前导零）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T18:01:40.473

只是想对巴里的公式做出一点改变。在我看来更容易理解，但使用起来有点困难：

您可以使用此数组公式找到第一个数字的起始位置 + 1：

```
{=MIN(IFERROR(FIND({1,2,3,4,5,6,7,8,9,0},A2),""))} 
```

使用 ctrl+alt+enter 输入以使其成为数组公式。

然后您可以使用该数字将第一部分从字符串中拆分出来：

```
=LEFT(A2,B2-1) 
```

然后你可以使用 REPLACE() 去掉字符串的第一部分（字母）。

```
=REPLACE(A2,1,LEN(C2),"") 
```

您应该接受 Barry 的回答，而不是这个，因为他更容易使用和更简洁。但只是想在我的探索中添加一个变体，以了解巴里的公式是如何工作的。

# c# - 任务继续执行多个任务

> ID：15115818
> 
> 赞同：3
> 
> 时间：2013-02-27T15:25:46.957
> 
> 标签：c#, task-parallel-library, async-await

我有一种将一个文件上传到服务器的方法。除了方法上的任何错误编码之外，现在正在工作（我是任务库的新手）。

这是将文件上传到服务器的代码：

```
private async void UploadDocument()

{
    var someTask = await Task.Run<bool>(() =>
    {
        // open input stream
        using (System.IO.FileStream stream = new System.IO.FileStream(_cloudDocuments[0].FullName, System.IO.FileMode.Open, System.IO.FileAccess.Read))
        {
            using (StreamWithProgress uploadStreamWithProgress = new StreamWithProgress(stream))
            {
                uploadStreamWithProgress.ProgressChanged += uploadStreamWithProgress_ProgressChanged;

                // start service client
                SiiaSoft.Data.FieTransferWCF ws = new Data.FieTransferWCF();

                // upload file
                ws.UploadFile(_cloudDocuments[0].FileName, (long)_cloudDocuments[0].Size, uploadStreamWithProgress);

                // close service client
                ws.Close();
            }
        }

        return true;

    });

} 
```

然后我有一个 ListBox，我可以在其中拖放多个文件，所以我想做的是在 ListBox 文件中执行 FOR LOOP，然后调用`UploadDocument();`，但我想先在 listBox 中上传第一个文件，然后在完成后继续第二个文件等等...

关于最好的方法的任何线索？

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T15:28:57.773

你应该做你的`UploadDocument`回报`Task`。然后您可以循环等待任务。例如：

```
private async Task UploadAllDocuments()
{
    string[] documents = ...; // Fetch the document names

    foreach (string document in documents)
    {
        await UploadDocument(document);
    }
}

private async Task UploadDocument(string document)
{
    // Code as before, but use document instead of _cloudDocuments[0]
} 
```

事实上，`UploadDocument`无论如何你都可以变得更简单：

```
private Task UploadDocument()
{
    return Task.Run<bool>(() =>
    {
        // Code as before
    });
} 
```

将其包装在一个`async`方法中并不是特别有用。

（您可能很想将类型更改为 not `string`- 不清楚是什么`_cloudDocuments`。）

通常，您应该*始终*`async`返回方法`Task`，或者`Task<T>`除非您*必须*使其返回`void`以符合事件处理模式。

# c# - 将项目添加到集合属性后如何“无效”？

> ID：15115819
> 
> 赞同：1
> 
> 时间：2013-02-27T15:25:47.927
> 
> 标签：c#, winforms, collections, properties

我正在创建一个自定义控件，在其中创建“列表”类型的属性

Sections 是一个公共类，它有 4 个属性。

控件中的代码如下所示：

```
 public partial class genericGauge : Control
{
        public genericGauge()
        {
            InitializeComponent();
        }

// Stripped out code not needed for this issue question.

        private List<Sections> indicators = new List<Sections>();

        public List<Sections> Indicators
        {
            get
            { 
                return indicators;                
            }
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            base.OnPaint(e);
            // Stripped out code not needed for this issue question.
        }

} 
```

Sections类如下：

```
public class Sections
    {
        private string header = "Section1";        
        public string Header
        {
            get {return header;}
            set 
            {
                header = value;
            }
        }

        private float startvalue = 0.0f;        
        public float StartValue 
        {
            get { return startvalue; }
            set
            {
                startvalue = value;
            }
        }

        private float sweepvalue = 0.0f;       
        public float SweepValue
        {
            get { return sweepvalue; }
            set
            {
                sweepvalue = value;
            }
        }

        private Color sectioncolor = new Color();        
        public Color SectionColor
        {
            get {return sectioncolor;}
            set
            {
                sectioncolor = value;
            }
        }
    } 
```

一切似乎都工作正常，除了当我在设计时使用属性浏览器类型编辑器将项目添加到集合时，控件不会重新绘制以反映添加到集合中的内容。

当我在我的测试表单上单击控件外部时，它会被重新绘制。通常使用简单的属性我会使用 Invalidate，但这在这里似乎是不可能的。我还尝试了除 List<> 之外的其他集合类型，它允许有一个 set 访问器，但仍然不会调用 Invalidate。我认为这意味着 SET 永远不会被调用。

我知道如何让它与可扩展属性一起使用，但我没有找到如何使用集合进行此更新。

我希望有人可以帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:47:11.503

不使用 List 类，而是使用 ObservableCollection 类，并使用它在列表中添加或删除新部分时获得通知。

```
private ObservableCollection<Sections> indicators = new ObservableCollection<Sections>();

public IList<Sections> Indicators
{
    get
    { 
        return indicators;                
    }
}

public genericGauge()
{
    InitializeComponent();

    this.indicators.CollectionChanged += this.IndicatorsCollectionChanged;
}

private void IndicatorsCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    // possibly inspect the NotifyCollectionChangedEventArgs to see if it's a change that should cause a redraw.

    // or not.
    this.Invalidate();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:35:37.993

当完全按原样使用您的示例时，Indicators 属性无法在属性窗口中进行编辑。所以我对它做了一些改动。

我添加了一个新类：

```
// Added this class to deal with the Sections class
public class SectionObservable : ObservableCollection<Sections>
{
        // Added a few methods here for creating a designtime collection if I need to.
} 
```

然后我按照您的建议进行了更改

```
public genericGauge()
{
            InitializeComponent();
            this.indicators.CollectionChanged += this.IndicatorsCollectionChanged;  // your suggestion
} 
```

并改为这样的属性：

```
private SectionObservable indicators = new SectionObservable(); // using the SectionObservable class instead 

        public SectionObservable Indicators // using the SectionObservable class instead 
        {
            get
            { 
                return indicators;                
            }
        }

        private void IndicatorsCollectionChanged(object sender, NotifyCollectionChangedEventArgs e) // your suggestion
        {
            this.Invalidate();
        } 
```

现在作为一种魅力。非常感谢你。我很高兴看到有可能如此快速地获得帮助。我非常喜欢这个论坛。

# c# - 使用 XSLT 1.0 进行 XML 到 XAML 的转换 | 排除某些控件的特定转换

> ID：15115826
> 
> 赞同：0
> 
> 时间：2013-02-27T15:26:21.280
> 
> 标签：c#, xaml, xslt, xslt-1.0, xsl-stylesheet

假设我有以下 XML 代码

```
<PanelWrapper   id="RootPanel" 
                width="800" 
                height="600" 
                forecolor="Black">
    <ButtonWrapper  id="button" 
                    text="click!" 
                    forecolor="Black">
        <TabIndex>0</TabIndex>
        <TabStop>True</TabStop>
    </ButtonWrapper>
</PanelWrapper> 
```

应使用 XSLT 1.0 将此代码转换为 XAML 代码：

```
<WrapPanel Name="RootPanel" 
           Width="800" 
           Height="600">
    <Button Name="button" 
            Content="click!" 
            Foreground="Black"  
            TabIndex="0" 
            IsTabStop="True">
    </Button>
</WrapPanel> 
```

我目前正在使用这个样式表：（简化版）

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>

    <!-- Transform PanelWrapper to WrapPannel -->
    <xsl:template match="PanelWrapper">
        <WrapPanel>
            <xsl:apply-templates select="@*|*" />
        </WrapPanel>
    </xsl:template>

    <!-- Transform ButtonWrapper to Button -->
    <xsl:template match="ButtonWrapper">
        <Button>
            <xsl:apply-templates select="@*" />
        </Button>
    </xsl:template>

    <!-- some other mapping for id(name), height, weight, text -->

    <!-- Map forecolor to Foreground -->
    <xsl:template match="@forecolor">
        <xsl:attribute name="Foreground">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:template>

</xsl:stylesheet> 
```

我目前得到的结果如下所示：

```
<WrapPanel Name="RootPanel" 
           Width="800" 
           Height="600"
           Foreground="Black"> //unwanted, Problem 1
    <Button Name="button" 
            Content="click!" 
            Foreground="Black">
    </Button>
            0 //Problem 2
        True //Problem 2
</WrapPanel> 
```

问题 1：XAML 中的 WrapPanel 没有 Foreground 属性，但由于在我的 XML 源文件中定义了前景色，因此它也是为 WrapPanel 生成的。我该如何解决这个问题？

问题 2：如何解决 TabIndex 和 IsTabStop 的问题？

编辑：让我澄清问题 2。这是 xml 输入：

```
<ButtonWrapper  id="button" 
                text="click!" 
                forecolor="Black">
    <TabIndex>0</TabIndex>
    <TabStop>True</TabStop>
</ButtonWrapper> 
```

这是我试图实现的输出：

```
<Button Name="button" 
        Content="click!" 
        Foreground="Black"  
        TabIndex="0" 
        IsTabStop="True">
</Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:13:44.917

**问题 1**。您可以添加以下模板

```
<xsl:template match="PanelWrapper/@forecolor" /> 
```

这将为所有 PanelWrapper 元素排除名为 forecolor 的属性。

**问题 2**。要解决您的第二个问题，您必须分别使用以下 XPath 表达式匹配作为某个元素的子元素的所有 TabIndex 元素和 TabStop 元素：*/TabIndex、*/TabStop。然后您可以将该元素映射到一个属性。

以下转换实现了您想要的：

```
<!-- Transform element TabIndex to an attribute with the same
     name in its parent -->
<xsl:template match="*/TabIndex">
    <xsl:attribute name="TabIndex">
        <xsl:value-of select="." />
    </xsl:attribute>
</xsl:template>

<!-- Transform element TabStop to an attribute with the name
     IsTabStop in its parent -->
<xsl:template match="*/TabStop">
    <xsl:attribute name="IsTabStop">
        <xsl:value-of select="." />
    </xsl:attribute>
</xsl:template> 
```

* * *

更新。添加了完整 XML 的解决方案。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
    <!-- special thanks to: Pablo Pozo -->

    <xsl:variable name="attributeMap"
                  select="'|font-size,FontSize|font-name,FontFamily|enabled,isEnabled|forecolor,Foreground|id,name|TabStop,IsTabStop|TabIndex,isTabIndex|dock,DockPanel.Dock|width,Width|height,Height|'" />

    <!--                        -->
    <!-- Default processing     -->
    <!--                        -->

    <!-- Ignore attributes by default, so we can have more control
         about unhandled attributes -->
    <xsl:template match="@*|*" />
    <xsl:template match="node()|@*" mode="to-attr"/>

    <!-- Default attribute processing -->
    <xsl:template name="process-element">
        <xsl:param name="attr" />

        <!-- Process all attributes and elements which are going to be
             transformed to attributes -->
        <xsl:apply-templates select="@*|*" mode="to-attr" />
        <!-- Add extra attribute -->
        <xsl:if test="$attr">
            <xsl:attribute name="{substring-after($attr, '|')}">
                <xsl:value-of select="@*[local-name() = substring-before($attr, '|')]" />
            </xsl:attribute>
        </xsl:if>
        <!-- Process children elements -->
        <xsl:apply-templates select="*" />
    </xsl:template>

    <!--                        -->
    <!-- Control transformations-->
    <!--                        -->

    <!-- Transform PanelWrapper to WrapPannel -->
    <xsl:template match="PanelWrapper">
        <WrapPanel>
            <xsl:call-template name="process-element" />
        </WrapPanel>
    </xsl:template>

    <!-- Exclude attributes for PanelWrapper -->
    <xsl:template match="PanelWrapper/@forecolor|PanelWrapper/@font-name|PanelWrapper/@font-size|PanelWrapper/@font-style"
                  mode="to-attr" />
    <!-- TODO: Exclude doesn't work for the following attributes -->
    <xsl:template match="PanelWrapper/@border-left|PanelWrapper/@border-top|PanelWrapper/@border-right|PanelWrapper/@border-bottom"
                  mode="to-attr"  />

    <!-- Transform DropDownWrapper to ComboBox -->
    <xsl:template match="DropDownWrapper">
        <ComboBox>
            <xsl:call-template name="process-element">
                <xsl:with-param name="attr" select="'text|Text'" />
            </xsl:call-template>
        </ComboBox>
    </xsl:template>

    <!-- Exclude attributes for ComboBox -->
    <!-- Transform GroupBoxWrapper to GroupBox -->

    <!-- Map GroupBoxWrapper, LabelWrapper, TextBoxWrapper, ButtonWrapper into
         elements with their prefix as their name -->
    <xsl:template match="GroupBoxWrapper|LabelWrapper|TextBoxWrapper|ButtonWrapper">
        <xsl:element name="{substring-before(local-name(), 'Wrapper')}">
            <xsl:call-template name="process-element">
                <xsl:with-param name="attr" select="'text|Content'" />
            </xsl:call-template>
        </xsl:element>
    </xsl:template>

    <!-- Exclude attributes for GroupBox -->
    <!-- Exclude attributes for Label -->
    <!-- Exclude attributes for Text -->
    <!-- TODO: invalid value for Background attribute, eg: Background="window" -->
    <!-- Exclude attributes for Button -->
    <!-- TODO: invalid value for Background attribute, eg: Background="buttonface" -->

    <!-- Map RadioButtonViewWrapper, CheckBoxViewWrapper into elements
         with their prefix as their name -->
    <xsl:template match="RadioButtonViewWrapper|CheckBoxViewWrapper">
        <xsl:element name="{substring-before(local-name(), 'ViewWrapper')}">
            <xsl:call-template name="process-element">
                <xsl:with-param name="attr" select="'text|Content'" />
            </xsl:call-template>
        </xsl:element>
    </xsl:template>

    <!-- Exclude attributes for RadioButton -->
    <!-- Exclude attributes for CheckBox -->

    <!--                           -->
    <!-- Attributes transformations-->
    <!--                           -->

    <!-- Transform elements which just map the name of the attribute to a different name -->
    <xsl:template match="@font-size|@font-name|@enabled|@forecolor|@id|TabStop|TabIndex|@dock|@width|@height"
                  mode="to-attr">
        <!-- Look in map for the transformation -->
        <xsl:variable name="new-attribute"
                      select="substring-before(substring-after($attributeMap, concat('|', local-name(), ',')), '|')" />
        <xsl:attribute name="{$new-attribute}">
            <xsl:value-of select="." />
        </xsl:attribute>
    </xsl:template>

    <!-- OVERRIDE!! Back color: not sure of the logic here.-->
    <xsl:template match="@backcolor" mode="to-attr">
        <xsl:attribute name="Background">Grey</xsl:attribute>
    </xsl:template>

    <!-- Ignore TabIndex and TabStop within PanelWrapper -->
    <xsl:template match="PanelWrapper/TabIndex|PanelWrapper/TabStop" mode="to-attr" />

    <!-- Map @dock = 'Fill' to @dock = 'Left, Right...etc' -->
    <xsl:template match="@dock[. = 'Fill']"  mode="to-attr" >
        <xsl:attribute name="DockPanel.Dock">
            <xsl:value-of select="'Left, Right, Top, Bottom'" />
        </xsl:attribute>
    </xsl:template>

    <!-- Map visible attribute to Visibility -->
    <xsl:template match="@visible[. = 'True']"  mode="to-attr" >
        <xsl:attribute name="Visibility">visible</xsl:attribute>
    </xsl:template>

    <xsl:template match="@visible[. = 'False']"  mode="to-attr" >
        <xsl:attribute name="Visibility">hidden</xsl:attribute>
    </xsl:template>

    <!-- Build the border attribute -->
    <xsl:template match="@*[starts-with(local-name(), 'border-')][1]"  mode="to-attr">
        <xsl:attribute name="BorderThickness">
            <!-- Print the border-elements in a comma separated list (non-defined attributes default
                 to zero) -->
            <xsl:call-template name="border-print" />
        </xsl:attribute>
    </xsl:template>

    <!-- Recursive template to group borders in BorderThickness -->
    <xsl:template name="border-print">
        <!-- Do not remove spaces in the next line! -->
        <xsl:param name="string" select="'left  top   right bottom'" />
        <xsl:param name="parent" select=".." />
        <xsl:param name="not-first" select="false()" />

        <xsl:if test="$string != ''">
            <!-- Obtain next direction -->
            <xsl:variable name="direction" select="normalize-space(substring($string, 1, 6))" />
            <xsl:variable name="attr" select="$parent/@*[local-name() = concat('border-', $direction)]" />
            <!-- Print comma if not the first element -->
            <xsl:if test="$not-first"><xsl:text>,</xsl:text></xsl:if>
            <!-- Print zero if the attribute cannot be found -->
            <xsl:choose>
                <!-- Attribute found : print -->
                <xsl:when test="$attr">
                    <xsl:value-of select="$attr" />
                </xsl:when>
                <!-- Attribute not found: print 0 -->
                <xsl:otherwise>
                    <xsl:text>0</xsl:text>
                </xsl:otherwise>
            </xsl:choose>
            <!-- Recurse -->
            <xsl:call-template name="border-print">
                <xsl:with-param name="string" select="substring($string, 7)" />
                <xsl:with-param name="parent" select="$parent" />
                <xsl:with-param name="not-first" select="true()" />
            </xsl:call-template>
        </xsl:if>

    </xsl:template>

    <xsl:template match="@*" mode="print-border">
        <xsl:value-of select="concat(., ',')" />
    </xsl:template>

    <xsl:template match="@border-bottom" mode="print-border">
        <xsl:value-of select="." />
    </xsl:template>

    <!--
    <xsl:template match="@font-style[. = 'Regular']">
        <xsl:attribute name="FontStyle">Normal</xsl:attribute>
    </xsl:template>
    -->
    <!-- TODO: condition is invalid, chooses Italic for everything-->
    <xsl:template match="@font-style"  mode="to-attr">
        <xsl:choose>
            <xsl:when test="'Italic'">
                <xsl:attribute name="FontStyle">Italic</xsl:attribute>
            </xsl:when>
            <xsl:otherwise>
                <xsl:attribute name="FontStyle">Normal</xsl:attribute>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T11:39:29.893

问题 1：WrapPanels 仍然显示 BorderThickness [已解决]

解决方案：该模板仅适用于除 PanelWrapper 之外的所有元素。（看条件）

```
 <xsl:template match="@*[starts-with(local-name(), 'border-')][1]"  mode="to-attr">
    <xsl:if test="not(parent::PanelWrapper)">
        <xsl:attribute name="BorderThickness">
          <!--Print the border-elements in a comma separated list (non-defined attributes default
                 to zero)-->
          <xsl:call-template name="border-print" />
        </xsl:attribute>
      </xsl:if>
  </xsl:template> 
```

问题 2：由于 WPF 中的组框只接受一个控件，因此我必须首先将所有属性包装到一个网格控件中。我认为这没什么大不了的，但事实证明 groupbox 属性已添加到网格控件中。

这是（更新的）xsl 样式表：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
<!-- very special thanks to: Pablo Pozo -->
  <xsl:variable name="attributeMap"
                select="'|font-size,FontSize|font-name,FontFamily|enabled,isEnabled|forecolor,Foreground|id,Name|TabStop,IsTabStop|TabIndex,TabIndex|dock,DockPanel.Dock|width,Width|height,Height|'" />

  <!-- Ignore attributes by default, so we can have more control
         about unhandled attributes -->
  <xsl:template match="@*|*" />
  <xsl:template match="node()|@*" mode="to-attr"/>

  <!-- Default attribute processing -->
  <xsl:template name="process-element">
    <xsl:param name="attr" />

    <!-- Process all attributes and elements which are going to be
             transformed to attributes -->
    <xsl:apply-templates select="@*|*" mode="to-attr" />
    <!-- Add extra attribute -->
    <xsl:if test="$attr">
      <xsl:attribute name="{substring-after($attr, '|')}">
        <xsl:value-of select="@*[local-name() = substring-before($attr, '|')]" />
      </xsl:attribute>
    </xsl:if>
    <!-- Process children elements -->
    <xsl:apply-templates select="*" />
  </xsl:template>

  <!-- Transform PanelWrapper to WrapPannel -->
  <xsl:template match="PanelWrapper">
    <WrapPanel>
      <xsl:call-template name="process-element" />
    </WrapPanel>
  </xsl:template>

  <!-- Exclude attributes for PanelWrapper -->
  <xsl:template match="PanelWrapper/@forecolor|PanelWrapper/@font-name|PanelWrapper/@font-size|PanelWrapper/@font-style" 
                mode="to-attr" />
  <xsl:template match="PanelWrapper/@border-left|PanelWrapper/@border-top|PanelWrapper/@border-right|PanelWrapper/@border-bottom" 
                mode="to-attr"  />
  <xsl:template match="PanelWrapper/TabIndex|PanelWrapper/TabStop" 
                mode="to-attr" />

  <!-- Transform DropDownWrapper to ComboBox -->
  <xsl:template match="DropDownWrapper">
    <ComboBox>
      <xsl:call-template name="process-element">
        <xsl:with-param name="attr" select="'text|Text'" />
      </xsl:call-template>
    </ComboBox>
  </xsl:template>

  <!-- Map GroupBoxWrapper into
         elements with their prefix as their name -->
  <xsl:template match="GroupBoxWrapper">
    <xsl:element name="GroupBox">
      <Grid>
      <xsl:call-template name="process-element">
        <xsl:with-param name="attr"/>
      </xsl:call-template>
      </Grid>
    </xsl:element>
  </xsl:template>

  <!-- Map LabelWrapper, ButtonWrapper into
         elements with their prefix as their name -->
  <xsl:template match="LabelWrapper|ButtonWrapper">
    <xsl:element name="{substring-before(local-name(), 'Wrapper')}">
      <xsl:call-template name="process-element">
        <xsl:with-param name="attr" select="'text|Content'" />
      </xsl:call-template>
    </xsl:element>
  </xsl:template>

  <!-- Map TextBoxWrapper into
           elements with their prefix as their name -->
  <xsl:template match="TextBoxWrapper">
    <xsl:element name="{substring-before(local-name(), 'Wrapper')}">
      <xsl:call-template name="process-element">
        <xsl:with-param name="attr" select="'text|Text'" />
      </xsl:call-template>
    </xsl:element>
  </xsl:template>

  <!-- Map RadioButtonViewWrapper, CheckBoxViewWrapper into elements
         with their prefix as their name -->
  <xsl:template match="RadioButtonViewWrapper|CheckBoxViewWrapper">
    <xsl:element name="{substring-before(local-name(), 'ViewWrapper')}">
      <xsl:call-template name="process-element">
        <xsl:with-param name="attr" select="'text|Content'" />
      </xsl:call-template>
    </xsl:element>
  </xsl:template>

  <!--                           -->
  <!-- Attributes transformations-->
  <!--                           -->

  <!-- Transform elements which just map the name of the attribute to a different name -->
  <xsl:template match="@font-size|@font-name|@enabled|@forecolor|@id|TabStop|TabIndex|@width|@height"
                mode="to-attr">
    <!-- Look in map for the transformation -->
    <xsl:variable name="new-attribute"
                  select="substring-before(substring-after($attributeMap, concat('|', local-name(), ',')), '|')" />
    <xsl:attribute name="{$new-attribute}">
      <xsl:value-of select="." />
    </xsl:attribute>
  </xsl:template>

  <!-- Transform dock element  -->
  <xsl:template match="@dock" mode="to-attr">
    <xsl:choose>
      <xsl:when test=". = 'Fill'">
        <xsl:attribute name="DockPanel.Dock">
          <xsl:value-of select="'Left, Right, Top, Bottom'" />
        </xsl:attribute>
      </xsl:when>
      <xsl:otherwise>
        <xsl:if test=". != 'None'">
          <xsl:attribute name="DockPanel.Dock">
            <xsl:value-of select="." />
          </xsl:attribute>
        </xsl:if>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <!-- Transform Visual Web GUI Colors to XAML conform values.-->
  <xsl:template match="@backcolor" mode="to-attr">
    <xsl:choose>
      <xsl:when test=". = 'buttonface'">
        <xsl:attribute name="Background">Azure</xsl:attribute>
      </xsl:when>
      <xsl:when test=". = 'window'">
        <xsl:attribute name="Background">Azure</xsl:attribute>
      </xsl:when>
      <xsl:otherwise>
        <xsl:attribute name="Background">
          <xsl:value-of select="." />
        </xsl:attribute>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <!-- Map visible attribute to Visibility -->
  <xsl:template match="@visible[. = 'True']"  mode="to-attr" >
    <xsl:attribute name="Visibility">visible</xsl:attribute>
  </xsl:template>

  <xsl:template match="@visible[. = 'False']"  mode="to-attr" >
    <xsl:attribute name="Visibility">hidden</xsl:attribute>
  </xsl:template>

  <!-- Build the border attribute -->
  <xsl:template match="@*[starts-with(local-name(), 'border-')][1]"  mode="to-attr">
    <xsl:attribute name="BorderThickness">
      <!-- Print the border-elements in a comma separated list (non-defined attributes default
                 to zero) -->
      <xsl:call-template name="border-print" />
    </xsl:attribute>
  </xsl:template>

  <!-- Recursive template to group borders in BorderThickness -->
  <xsl:template name="border-print">
    <!-- Do not remove spaces in the next line! -->
    <xsl:param name="string" select="'left  top   right bottom'" />
    <xsl:param name="parent" select=".." />
    <xsl:param name="not-first" select="false()" />

    <xsl:if test="$string != ''">
      <!-- Obtain next direction -->
      <xsl:variable name="direction" select="normalize-space(substring($string, 1, 6))" />
      <xsl:variable name="attr" select="$parent/@*[local-name() = concat('border-', $direction)]" />
      <!-- Print comma if not the first element -->
      <xsl:if test="$not-first">
        <xsl:text>,</xsl:text>
      </xsl:if>
      <!-- Print zero if the attribute cannot be found -->
      <xsl:choose>
        <!-- Attribute found : print -->
        <xsl:when test="$attr">
          <xsl:value-of select="$attr" />
        </xsl:when>
        <!-- Attribute not found: print 0 -->
        <xsl:otherwise>
          <xsl:text>0</xsl:text>
        </xsl:otherwise>
      </xsl:choose>
      <!-- Recurse -->
      <xsl:call-template name="border-print">
        <xsl:with-param name="string" select="substring($string, 7)" />
        <xsl:with-param name="parent" select="$parent" />
        <xsl:with-param name="not-first" select="true()" />
      </xsl:call-template>
    </xsl:if>

  </xsl:template>

  <xsl:template match="@*" mode="print-border">
    <xsl:value-of select="concat(., ',')" />
  </xsl:template>

  <xsl:template match="@border-bottom" mode="print-border">
    <xsl:value-of select="." />
  </xsl:template>

  <!-- Mapping font-style to FontStyle -->
  <!-- Convert values to valid XAML values -->
  <xsl:template match="@font-style">
    <xsl:choose>
      <xsl:when test=". = 'Italic'">
        <xsl:attribute name="FontStyle">Italic</xsl:attribute>
      </xsl:when>
      <xsl:otherwise>
        <xsl:attribute name="FontStyle">Normal</xsl:attribute>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

这是应该转换成xaml代码的xml文件

```
<PanelWrapper id="RootPanel" dock="Fill" text="" theme="" width="1412" height="605" backcolor="Transparent" forecolor="Black" visible="True" mapNode="" border-left="0" border-top="0" border-right="0" border-bottom="0" font-name="Tahoma" font-size="8,25" font-style="Regular">
  <PanelWrapper id="panel1" dock="None" text="" theme="" width="800" height="400" backcolor="Transparent" forecolor="Black" visible="True" mapNode="" border-left="1" border-top="1" border-right="1" border-bottom="1" font-name="Tahoma" font-size="9" font-style="Regular">
    <GroupBoxWrapper id="groupbox1" dock="Bottom" text="" theme="" width="796" height="300" backcolor="Transparent" forecolor="#0046D5" visible="True" mapNode="" border-left="1" border-top="1" border-right="1" border-bottom="1" font-name="Tahoma" font-size="9" font-style="Regular">
      <RadioButtonViewWrapper id="radiobutton1" dock="Top" text="radiobox" theme="" width="484" height="100" backcolor="Transparent" forecolor="Black" visible="True" mapNode="" border-left="1" border-top="1" border-right="1" border-bottom="1" font-name="Tahoma" font-size="9" font-style="Regular">
        <TabIndex>1</TabIndex>
        <TabStop>True</TabStop>
      </RadioButtonViewWrapper>
      <CheckBoxViewWrapper id="checkbox1" dock="Left" text="checkbox" theme="" width="75" height="177" backcolor="Transparent" forecolor="Black" visible="True" mapNode="" border-left="1" border-top="1" border-right="1" border-bottom="1" font-name="Tahoma" font-size="9" font-style="Regular">
        <TabIndex>2</TabIndex>
        <TabStop>True</TabStop>
      </CheckBoxViewWrapper>
      <TabIndex>4</TabIndex>
      <TabStop>False</TabStop>
    </GroupBoxWrapper>
    <PanelWrapper id="panel5" dock="Top" text="Click!" theme="" width="796" height="25" backcolor="Transparent" forecolor="Black" visible="True" mapNode="" border-left="1" border-top="1" border-right="1" border-bottom="1" font-name="Tahoma" font-size="9" font-style="Regular">
      <ButtonWrapper id="button2" dock="Left" text="click!" theme="" width="100" height="21" backcolor="buttonface" forecolor="Black" visible="True" mapNode="" border-left="1" border-top="1" border-right="1" border-bottom="1" font-name="Tahoma" font-size="9" font-style="Regular">
        <TabIndex>0</TabIndex>
        <TabStop>True</TabStop>
      </ButtonWrapper>
      <TextBoxWrapper id="textbox2" dock="Left" text="textbox" theme="" width="100" height="21" backcolor="window" forecolor="Black" visible="True" mapNode="" border-left="1" border-top="1" border-right="1" border-bottom="1" font-name="Tahoma" font-size="9" font-style="Italic">
        <TabIndex>1</TabIndex>
        <TabStop>True</TabStop>
      </TextBoxWrapper>
      <LabelWrapper id="label2" dock="Left" text="label" theme="" width="100" height="21" backcolor="Transparent" forecolor="Black" visible="True" mapNode="" border-left="1" border-top="1" border-right="1" border-bottom="1" font-name="Tahoma" font-size="9" font-style="Regular">
        <TabIndex>2</TabIndex>
        <TabStop>False</TabStop>
      </LabelWrapper>
      <DropDownWrapper id="combobox2" dock="Left" text="combobox" theme="" width="100" height="21" backcolor="window" forecolor="Black" visible="True" mapNode="" border-left="1" border-top="1" border-right="1" border-bottom="1" font-name="Tahoma" font-size="9" font-style="Regular">
        <TabIndex>3</TabIndex>
        <TabStop>True</TabStop>
      </DropDownWrapper>
      <TabIndex>5</TabIndex>
      <TabStop>False</TabStop>
    </PanelWrapper>
    <TabIndex>0</TabIndex>
    <TabStop>False</TabStop>
  </PanelWrapper>
  <TabIndex>0</TabIndex>
  <TabStop>False</TabStop>
</PanelWrapper> 
```

XAML 结果如下所示：

```
<WrapPanel Name="RootPanel" DockPanel.Dock="Left, Right, Top, Bottom" Width="1412" Height="605" Background="Transparent" Visibility="visible" BorderThickness="0,0,0,0">
  <WrapPanel Name="panel1" Width="800" Height="400" Background="Transparent" Visibility="visible" BorderThickness="1,1,1,1">
    <GroupBox>
      <Grid Name="groupbox1" DockPanel.Dock="Bottom" Width="796" Height="300" Background="Transparent" Foreground="#0046D5" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="4" IsTabStop="False">
        <RadioButton Name="radiobutton1" DockPanel.Dock="Top" Width="484" Height="100" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="1" IsTabStop="True" Content="radiobox" />
        <CheckBox Name="checkbox1" DockPanel.Dock="Left" Width="75" Height="177" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="2" IsTabStop="True" Content="checkbox" />
      </Grid>
    </GroupBox>
    <WrapPanel Name="panel5" DockPanel.Dock="Top" Width="796" Height="25" Background="Transparent" Visibility="visible" BorderThickness="1,1,1,1">
      <Button Name="button2" DockPanel.Dock="Left" Width="100" Height="21" Background="Azure" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="0" IsTabStop="True" Content="click!" />
      <TextBox Name="textbox2" DockPanel.Dock="Left" Width="100" Height="21" Background="Azure" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="1" IsTabStop="True" Text="textbox" />
      <Label Name="label2" DockPanel.Dock="Left" Width="100" Height="21" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="2" IsTabStop="False" Content="label" />
      <ComboBox Name="combobox2" DockPanel.Dock="Left" Width="100" Height="21" Background="Azure" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="3" IsTabStop="True" Text="combobox" />
    </WrapPanel>
  </WrapPanel>
</WrapPanel> 
```

预期的 XAML 代码应如下所示：

```
<WrapPanel Name="RootPanel" DockPanel.Dock="Left, Right, Top, Bottom" Width="1412" Height="605" Background="Transparent" Visibility="visible" >
    <WrapPanel Name="panel1" Width="800" Height="400" Background="Transparent" Visibility="visible" >
        <GroupBox Name="groupbox1" DockPanel.Dock="Bottom" Width="796" Height="300" Background="Transparent" Foreground="#0046D5" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="4" IsTabStop="False">
            <Grid>
                <RadioButton Name="radiobutton1" DockPanel.Dock="Top" Width="484" Height="100" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="1" IsTabStop="True" Content="radiobox" />
                <CheckBox Name="checkbox1" DockPanel.Dock="Left" Width="75" Height="177" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="2" IsTabStop="True" Content="checkbox" />
            </Grid>
        </GroupBox>
        <WrapPanel Name="panel5" DockPanel.Dock="Top" Width="796" Height="25" Background="Transparent" Visibility="visible" >
            <Button Name="button2" DockPanel.Dock="Left" Width="100" Height="21" Background="Azure" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="0" IsTabStop="True" Content="click!" />
            <TextBox Name="textbox2" DockPanel.Dock="Left" Width="100" Height="21" Background="Azure" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="1" IsTabStop="True" Text="textbox" />
            <Label Name="label2" DockPanel.Dock="Left" Width="100" Height="21" Background="Transparent" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="2" IsTabStop="False" Content="label" />
            <ComboBox Name="combobox2" DockPanel.Dock="Left" Width="100" Height="21" Background="Azure" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" TabIndex="3" IsTabStop="True" Text="combobox" />
        </WrapPanel>
    </WrapPanel>
</WrapPanel> 
```

顺便说一句：Pablo Pozo，我至少欠你两杯啤酒

# css - 将两个子 div 定位在另一个 div 中，一个居中，另一个右上角/右下角

> ID：15115829
> 
> 赞同：0
> 
> 时间：2013-02-27T15:26:33.767
> 
> 标签：css, positioning

`div`我在一个容器中有两个s `div`，我试图将一个子 div 放置在中心（垂直和水平），另一个放置在容器的左上角/右下角。

两个孩子`div`都只包含文本。我尝试了一些东西，并且能够单独应用这两种样式，即如果只有两个`div`s 中的一个在那里，它将按要求工作。我无法弄清楚如何让两种样式同时应用。我尝试过使用位置和 z-index，但由于我的`CSS`知识有限，我无法取得突破。

**更新**：我希望文本以外部容器为中心。

## HTML

```
Top left works
<div class="container">
    <div class="topLeft">value</div>
</div>
Center Works
<div class="container">
    <div class="center">label</div>
</div>
Both don't work simulaneously
<div class="container">
    <div class="topLeft">value</div>
    <div class="center">label</div>
</div> 
```

## CSS

```
.container {
    border-width:1px;
    width:200px;
    border-style:solid;
    display:table;
    height:300px;
}
.center {
    text-align:center;
    display:table-cell;
    vertical-align:middle;
    z-index:5;
}
.topLeft {
    text-align:left;
    display:table-cell;
    vertical-align:top;
    z-index:10;
} 
```

## 演示

[http://jsfiddle.net/jugal/E5zGw/](http://jsfiddle.net/jugal/E5zGw/)

我主要针对 IE8+ 和 chrome，如果需要，可以灵活地更改 html 和 css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:39:49.290

只需给`.container`div`position: relative;`然后`position: absolute;`给子 div 以同时定位它们，使用`left`和`top`属性：

JsFiddle：http: [//jsfiddle.net/E5zGw/14](http://jsfiddle.net/E5zGw/14)

`display: table-cell`如果你走这条路，你只需要摆脱它就不需要了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:37:44.623

你的细胞表现得像`<TD>`一个`<TR>`.

只需将您的 DIVS 封装在 TableRow 之类的东西中

[http://jsfiddle.net/E5zGw/6/](http://jsfiddle.net/E5zGw/6/)

[带有背景颜色的 jsFiddle](http://jsfiddle.net/E5zGw/9/)

CSS 添加：

```
.table-row {
    display:table-row;
    clear:both;
} 
```

添加的HTML：

```
<div class="container">
    <div class="table-row">
        <div class="topLeft">value</div>
    </div>
    <div class="table-row">
        <div class="center">label</div>
    </div>
</div> 
```

女巫一模一样：

```
<table style="width:100%">
    <tr>
        <td valign="top" align="left">value</td>
    </tr>
    <tr>
        <td valign="middle" align="center">label</td>
    </tr>
</table> 
```

**现在**，让我尝试按照您认为自己想要的方式安装它：

[jsfiddle.net/E5zGw/15/](http://jsfiddle.net/E5zGw/15/)

```
<div class="container">
    <div class="topLeft">value</div>
    <div class="center">label</div>
</div>

.topLeft {
    background-color:blue;
    text-align:left;
    display:table-cell;
    vertical-align:top;
    z-index:999;
    position:absolute;
    width:200px;
} 
```

# winapi - 在 NASM 中调用 ExitWindowsEx

> ID：15115831
> 
> 赞同：0
> 
> 时间：2013-02-27T15:26:36.403
> 
> 标签：winapi, assembly, nasm

我有这个 NASM 代码

```
extern GetStdHandle 
extern WriteFile 
extern AllocConsole 
extern FreeConsole 
extern SetConsoleTitleA 
extern SetConsoleCursorPosition 
extern Sleep 
extern ExitProcess 
extern ExitWindowsEx

import GetStdHandle kernel32.dll 
import WriteFile kernel32.dll 
import AllocConsole kernel32.dll 
import FreeConsole kernel32.dll 
import SetConsoleTitleA kernel32.dll 
import SetConsoleCursorPosition kernel32.dll 
import Sleep kernel32.dll 
import ExitProcess kernel32.dll 
import ExitWindowsEx user32.dll

. 
section .text use32 

..start: 

call [ExitWindowsEx] 
```

当我执行它时，它不会执行关闭计算机的功能。我读到它需要参数，但是我们如何在 C# 中传递这样的参数

![在此处输入图像描述](../Images/febb1767ed56903e4bf38ba0e3867d52.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:30:14.583

我假设您使用的是 32 位 Intel 架构。在这种情况下，您必须在堆栈中传递参数。

```
mov eax, 1
mov ebx, 0
push eax
push ebx
call [ExitWindowsEx] 
```

# iphone - Magento 默认 iPhone 主题：如何编辑 CMS 页面或更一般的主页

> ID：15115834
> 
> 赞同：1
> 
> 时间：2013-02-27T15:26:44.400
> 
> 标签：iphone, magento, mobile, magento-1.7

使用默认的 Magento iPhone 主题，我试图简单地编辑主页内容，然后最终编辑布局本身。

我知道通过 CMS->Pages 更改 CMS 内容，但这似乎只与默认主题有关，而不是与移动主题有关。

例如，在下面的两个图像中，我们看到显示三个类别的移动版本的内容区域，其次是主页的 Pages->CMS 内容编辑器。两者显然不涉及相同的信息。

谁能帮我找出iphone主页内容是如何编辑的？

图 1 - iphone 主页（绿色圆圈区域为内容）：

![在此处输入图像描述](../Images/7b33bcb4ce285e04c1051dcb7147da8e.png)

图 2 - 页面->CMS 主页

![在此处输入图像描述](../Images/f8ff1ca6478c1d2d6244ce360474da41.png)

# c# - 在 Jquery Alert 中显示表行的所有值

> ID：15115836
> 
> 赞同：0
> 
> 时间：2013-02-27T15:26:50.203
> 
> 标签：c#, javascript, jquery, asp.net-mvc, html-helper

我有一张桌子，有 3 列。最后一列是一个链接，当我单击该链接时，我需要将特定行的值显示为警报。

```
<table border="1">
    <tr>
        <th>
            id
            </th>
        <th>
            name
        </th>
          <th> 
            Occupation
        </th>
        <th>
            click the link
        </th>
    </tr>

@foreach (var i in Model.allHuman)
{
    <tr>
        <td>
            @Html.DisplayFor(mo => i.id)
        </td>
        <td>
            @Html.DisplayFor(mo => i.name)
        </td>
         <td>
            @Html.DisplayFor(mo => i.occupation)
        </td>
        <td>
            <a href='' id='ppl' name='ppl' class='humanclass'> display </a>
        </td> 
```

当用户单击链接时，将显示一条警报，其中包含该特定行的内容。内容应具有`ID`后跟`NAME`and的格式`OCCUPATION`。

jQuery方法：

```
 $(function () {
        $('.humanclass').click(function () {
            alert( ?????????? );   // How to display ID, NAME and OCCUPATION of the ROW          
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:32:44.003

一种可能的解决方案：`data`向链接添加属性，如下所示：

```
<a href='' id='ppl' name='ppl' class='humanclass' data-id='@(i.id)' data-name='@(i.name)' data-occupation='@(i.occupation)' "> display </a> 
```

并在 jquery 函数中获取它

```
$(function () {
    $('.humanclass').click(function () {
        alert($(this).data("id"), $(this).data("name"), $(this).data("occupation"));  
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:40:47.090

可以使用[jQuery 父函数](http://api.jquery.com/parent/ "jQuery 父函数")来获取您单击的当前行的上下文。

```
$('.humanclass').click(function () {
    var rowContext = $(this).parent('tr');
    var id = $("td:nth-child(0)", rowContext).val();
    var name = $("td:nth-child(1)", rowContext).val();
    var occupation = $("td:nth-child(2)", rowContext).val();
    alert(id+' '+name+' '+occupation);
}); 
```

# jquery - jquery 两个选择连接

> ID：15115841
> 
> 赞同：0
> 
> 时间：2013-02-27T15:27:07.600
> 
> 标签：jquery

我正在尝试连接两个 HTML`select`元素。我想要的是当项目被`select1`选择禁用或删除时`select2`。我试过了

```
var selector = "#select2 option [value = '" + id_familia + "']";
$(selector).remove(); 
```

但可能会更新`#select2`？即选定的项目`#item1`和项目`#select2`删除但是当我再次选择任何项目`#select1`item1 时没有显示`#select2`。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:30:53.763

我认为你几乎是正确的。只需尝试删除 和 之间的`option`空格`[`。

尝试：

```
var selector = "#select2 option[value='" + id_familia + "']"; 
```

还要确保`id_familia`具有正确的值`#select1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:35:08.373

我不会删除它，如果用户再次更改选择怎么办？我的硬币：

```
var $select1 = $('#select1');
var $select2 = $('#select2');

$select1.on('change', function () {
    var selectedValue = $select1.val();
    $select2.find('option').prop('disabled', false).filter('[value="' + selectedValue + '"]').prop('disabled', true);
}); 
```

因此，在 select1 中的每次更改时，都会启用 select2 中的所有选项，但在 select1 中选择的选项除外。

# magento - Magento + Paypal - 订单状态停留在“付款审查”

> ID：15115845
> 
> 赞同：3
> 
> 时间：2013-02-27T15:27:17.950
> 
> 标签：magento, paypal, magento-1.7, paypal-sandbox

我目前正在测试 PayPal 功能。我添加了所有适当的配置信息，并且购买工作正常。

进入管理面板，所有订单都有**“付款审查”**状态（它们是今天或昨天下的）。

我的问题是——持续这么长时间正常吗？如果是，我应该如何正确测试。如果不是，谁能给我有关如何调试此问题的任何提示？

任何有关该过程如何从这一点开始的信息都将受到高度赞赏。期待感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T21:42:22.023

检查您进行购买的 PayPal 帐户。他们在那里显示已完成，还是说待定？如果它们显示已完成，您可能没有收到更新购物车的 IPN。如果它们在您的测试沙盒帐户中显示正在审核中，则您可能已打开付款审核。您可能需要在您的测试沙盒帐户中进入交易详情并手动接受付款。如果付款审核已打开，您也可以将其关闭。您只需在 developer.paypal.com 登录您的开发者帐户，点击测试帐户。然后，您应该会看到一个付款审核列。如果已启用，您只需从此处切换它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-18T08:25:05.647

由于这在 Google 中很受欢迎，我也将在这里添加我的解决方案：

我注意到即使在我的沙盒帐户中禁用付款审核后，许多付款仍会处于“付款审核”状态。

事实证明，如果以沙盒帐户默认货币以外的货币进行付款，则会自动进入“审核”状态。

[要关闭此功能，请在https://www.sandbox.paypal.com](https://www.sandbox.paypal.com)下登录您的沙盒帐户，然后转到*Profile -> More Options -> Payment Receiving Preferences*。您可以在此处更改“*允许以我不持有的货币发送给我的付款*”的设置以自动接受此类付款。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T07:12:01.303

我的问题是商家测试（沙盒）帐户中的交易状态为“已付款”，但我收到的 IPN 响应的付款状态为“待处理”。

对于像我这样的新用户，打开“付款审核”后，很难找到如何手动接受付款。我花了几个小时。

为了方便其他人，请转到交易详情 -> 点击“更多信息”链接。转到页面底部。在这里，您会在“返回我的帐户”按钮上方找到“接受”链接。点击“接受”链接，交易状态将变为“完成”。

之后，我收到了付款状态为“已完成”的 IPN 响应

我希望这可以帮助别人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-30T14:43:15.180

如果 Amazon Sandbox 订单留下未处理的交易，此查询为我解决了这个问题。这些在错误日志中弹出

> OrderReferenceId XYZ 无效

每次使用 Magento 的 cron 调度程序。与 Paypal 和所有其他具有沙盒模式的外部支付方式基本相同：

```
UPDATE `sales_payment_transaction`
SET `is_closed`=1
WHERE 'S02-XXXXXXX-XXXXXXX' IN (txn_id, parent_txn_id); 
```

# python - 如何使用 Tkinter.StringVar 获得用户的选择？

> ID：15115846
> 
> 赞同：0
> 
> 时间：2013-02-27T15:27:22.617
> 
> 标签：python, user-interface, python-2.7, tkinter

我正在 python 中使用 Tkinter 编写 GUI 代码：

```
var_alg_name = Tk.StringVar(board, 'Bilinear')
Tk.Label(board, text = 'Algorithm Name: ').pack(side = 'left')
ttk.Combobox(board, textvariable = var_alg_name, values=['Bilinear', 'Idw']).pack(side = 'left') 
```

当用户在列表中选择一个选项时，我想得到用户的选择。

通过搜索帮助命令，我发现.trace 调用了回调 foo，但是如何获取 foo 中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:35:25.873

您只需调用`var_alg_name.get()`，假设`var_alg_name`在您尝试获取值的范围内可以访问它。有关示例，请参阅[为 ttk 组合框设置默认值。](https://stackoverflow.com/q/6876518/7432)

# javascript - 滑动导航不起作用

> ID：15115849
> 
> 赞同：0
> 
> 时间：2013-02-27T15:27:27.113
> 
> 标签：javascript, html, ios, jquery-mobile

不确定它是否是我编写的方式，但是当我尝试在滑动时使用 jquery mobiles 更改页面功能时，它不允许我滑动到特定页面。我希望用户无论身在何处都能够滑动并进入主页。这就是我所拥有的。

```
<script>
 $( document ).bind( "swiperight", page, function() {
    $.mobile.changePage( "#home", { 
    transition: "slide", 
    reverse: true } );
    });

</script> 
```

Javascript 不是我最强的语言，但我知道这应该可以工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:38:04.110

也许你需要做

```
$(document).swiperight(function() {
    $.mobile.changePage("#home", { 
        transition: "slide", 
        reverse: true
    });
}); 
```

或者

```
$('body').swiperight(function() {
    $.mobile.changePage("#home", { 
        transition: "slide", 
        reverse: true
    });
}); 
```

这是您可以参考[的工作 jsFiddle （不是我的）。](http://jsfiddle.net/yxzZf/4/)

# javascript - 构造函数对象名称 - javascript

> ID：15115850
> 
> 赞同：0
> 
> 时间：2013-02-27T15:27:33.390
> 
> 标签：javascript, constructor

```
function Account(password, email)
{
    this.password=password;
    this.email=email;
}

function createAccount()
{
    var username="Moshiko22";
    var password="1112"
    var email="moshiko@walla.co.il";
    username=new Account(password, email);
} 
```

第一个函数是构造函数。假设“用户名”、“密码”是用户输入的，我想用用户输入的名称创建一个帐户对象。（因为在对象中将是用户输入的“用户名”）。我知道为什么我所做的事情不起作用，但我不知道如何真正完成它。提前致谢！

抱歉不清楚：用户输入用户名、密码和电子邮件。密码和电子邮件只是对象“帐户”中的两个属性。用户名是我想要的对象本身。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T15:31:34.050

听起来您想要一个键为用户名的对象？

```
var users = {};
function createAccount()
{
    var username="Moshiko22";
    var password="1112"
    var email="moshiko@walla.co.il";
    users[username] = new Account(password, email);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T15:31:41.657

像这样：

```
function Account(password, email)
{
    this.constructor = function (password, email) {
        this.password=password;
        this.email=email;
    }.apply(this, arguments);
} 
```

接着 ：

```
var account = new Account("mypwd", "myusername@mydomain.com"); 
```

# mysql - 找出达到累积总和值的日期

> ID：15115852
> 
> 赞同：0
> 
> 时间：2013-02-27T15:27:38.037
> 
> 标签：mysql, sql, database, sum, threshold

我有三张桌子。

**特性**

```
property_id 
```

**预订：**

```
reservation_id
reservation_property_id
reservation_date 
```

**付款**

```
payment_id
payment_reservation_id
payment_amount 
```

一个预订可以有很多与之相关的付款，一个房产可以有很多预订。

我想弄清楚如何做的是找出每处房产收入达到 500 英镑的预订日期。

因此，我需要计算出付款金额的累计总和，并找出每处房产达到 500 英镑门槛的日期。

希望这是有道理的。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:18:54.287

请试试这个：

```
SELECT reservation_property_id, MIN(reservation_date) 
FROM (SELECT IF(@prevProperty != q.reservation_property_id, 
                @runningtotal:=0, 
                @runningtotal:=@runningtotal + payment_amount) AS runningtotal,
             @prevProperty := q.reservation_property_id, q.*
      FROM (SELECT *
            FROM reservations r 
            INNER JOIN payments p 
                    ON p.payment_reservation_id = r.reservation_id 
                    /*not sure how your tables are linked*/
            , (SELECT @runningtotal:=0, @prevProperty:=0) vars
            ORDER BY r.reservation_property_id, reservation_date) q
      ) sq
WHERE runningtotal >= 500
GROUP BY reservation_property_id 
```

不过，出于方便，我没有加入 Properties 表 :)

这个想法基本上只是计算按属性和日期排序的表格上的总付款。在外部查询中，只需选择运行总计等于或大于阈值的最小日期。

# wordpress - 查询变量参数

> ID：15115854
> 
> 赞同：1
> 
> 时间：2013-02-27T15:27:43.920
> 
> 标签：wordpress, parameters

我有问题。我已经尝试了很多东西，但我找不到解决方案。我在这个页面中使用了 query_vars 参数，没有任何问题。但我不在不同的自定义页面（../videolar）中使用不同的参数或相同的参数。参数值始终为空。参数使用一次？函数.php：

```
function parameter($qvars){ 
 $qvars[] = 'kategori';
 $qvars[] = 'ara';
 $qvars[] = 'numara';
 $qvars[] = 'tur';
 return $qvars;
}
add_filter('query_vars', 'parameter'); 
```

videolar.php (../videolar?tur=test) ：

```
global $wp_query;
echo $wp_query->query_vars['tur'] // empty 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:33:10.823

问题已经解决了。

添加参数后重新保存永久链接设置。或者将.htaccess的文件权限改为777。

# vb.net - MS Access 报告中的换行符

> ID：15115857
> 
> 赞同：1
> 
> 时间：2013-02-27T15:27:48.987
> 
> 标签：vb.net, ms-access, report, line-breaks

我正在使用 VB.NET 和 MS ACCESS 2007。

我正在尝试为收据创建标题。

在我的程序中，我希望用户使用富文本框输入收据的标题。

我想将用户的输入存储到数据库中，并将其作为收据的标题。

例子：

富文本框中显示的用户输入为：

*胡安德拉克鲁兹*

*16*

*日本东京*

并且在存入数据库时​​显示为：

Juan Dela Cruz [there a symbol in here] 16 [symbol] 日本东京

MS Access 报告中也会显示相同的内容，这是我不希望 Access 显示给我的。

我希望 Access 给我的结果与用户在富文本框中的输入相同：

*胡安德拉克鲁兹*

*16*

*日本东京*

我将如何做到这一点？

单击按钮后执行的代码：

```
Try
        If receiptEdit = 0 Then
            Dim updateHeader = "UPDATE tbl_receiptdetails SET RHeader = '" & boxReceipt.Text & "'"
            ExecNonQuery(updateHeader)
            MsgBox("Receipt Header Updated")
        ElseIf receiptEdit = 1 Then
            Dim updateFooter = "UPDATE tbl_receiptdetails SET RFooter = '" & boxReceipt.Text & "'"
            ExecNonQuery(updateFooter)
            MsgBox("Receipt Footer Updated")
        End If
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:07:05.110

@GM-XileGM-Xile：

我的评论中的解决方案，作为答案：

代替

```
boxReceipt.Text 
```

和

```
boxReceipt.Text.Replace(vbCr, vbNewLine).Replace(vbLf, vbNewLine) 
```

# c++ - 初始化忽略构造函数模板

> ID：15115859
> 
> 赞同：3
> 
> 时间：2013-02-27T15:27:59.587
> 
> 标签：c++, templates, constructor, initialization

在追求一些错误时，我偶然发现了以下初始化行为，这对我来说似乎很奇怪：虽然对现有构造函数进行了初始化检查，但似乎有些情况是忽略了适合构造函数的模板。例如考虑以下程序：

```
#include <iostream>

template<class T>
struct A {
 A() {};
 template<class S>
 A(const A<S>& a) {std::cout << "constructor template used for A" << std::endl;};
};

template<class T>
struct B{
 B() {};
 B(const B<int>& b) {std::cout << "constructor used for B" << std::endl;};
};

int main() {
 A<int> a;
 B<int> b;
 A<int> aa = a;
 B<int> bb = b;
 A<double> aaa = a;
} 
```

对我来说，这会产生输出

```
constructor used for B
constructor template used for A 
```

这意味着它不使用 main 的第三行中的构造函数。为什么不？有原因吗？或者我的语法在某个地方？该模板似乎有效，因为它已在最后一行成功使用。

我知道这个例子看起来过于复杂，但各种简化让我想要展示的行为消失了。另外：初始化将使用模板特化，这是我目前防止这种导致错误的方式（它首先导致错误）。

如果我的问题有任何问题，我很抱歉，我不是程序员，我不是母语人士，这是我的第一个问题，请原谅我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:31:35.227

编译器提供了一个隐式声明的非模板复制构造函数，其签名等效于

```
A(const A& a); 
```

**因为**模板构造函数不被视为用户定义的复制构造函数，即复制构造函数必须是非模板。

隐式声明的复制构造函数在重载决议中比模板版本更匹配，并且是当您`A<T>`从 复制构造时调用的`A<T>`。这可以用一个简单的例子来说明，用户定义`A(const A&)`：

```
#include <iostream>

template<class T>
struct A 
{
 A() {};

 A(const A& a) {
   std::cout << "copy constructor used for A" << std::endl;
 }

 template<class S>
 A(const A<S>& a) {
   std::cout << "constructor template used for A" << std::endl;
 }
};

int main()
{
  A<int> ai;
  A<double> ad = ai; /  calls template conversion contructor
  A<int> ai2 = ai;   // calls copy constructor A(const A&);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T15:35:15.503

根据 C++11 标准的第 12.8/7 段：

> 如果类定义没有显式声明复制构造函数，则隐式声明。

此外，根据第 12.8/2 段：

> 类 X的**非模板**构造函数是复制构造函数，如果它的第一个参数是类型 X&、const X&、volatile X& 或 const volatile X&，并且没有其他参数，或者所有其他参数都有默认参数（8.3.6 ）。

因此，编译器将在此处生成一个隐式复制构造函数，该构造函数在执行此行期间被调用：

```
A<int> aa = a; 
```

这解释了为什么您看不到相应的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:31:25.147

这是因为模板化 ctor 不是复制 ctor。另请参阅[https://stackoverflow.com/a/1249848/341065](https://stackoverflow.com/a/1249848/341065)。

# asp.net - 单击链接时设置变量的值

> ID：15115864
> 
> 赞同：0
> 
> 时间：2013-02-27T15:28:19.083
> 
> 标签：asp.net, vb.net, variables, hyperlink

我目前`listview`在 ASP.NET 网页上有一个显示来自 Access 数据库的“山寨”记录。每个小屋的名称都显示为超链接，因此单击时会将您带到另一个网页：

```
<li style="">Name:
     <asp:Hyperlink ID="Cottage_NameLabel" NavigateURL="~/Cottage.aspx"
         runat="server" Text='<%# Eval("Cottage_Name") %>' />
     <br /> 
```

这在选择超链接时非常有效。我希望系统做的是将公开声明的变量（在模块中设置）的值设置为`Cottage_Name`所选超链接的值。所以假设我点击了一个超链接，上面写着“cottage1”，公共变量设置为“cottage1”，然后导航 URL 会打开下一个网页。

如果有人能帮我做到这一点，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:10:23.660

只需使用**[LinkBut​​ton](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)**而不是超链接...捕捉点击事件并做任何您想做的事...

例如：

```
<asp:LinkButton  ID="Cottage_NameLabel" runat="server"  Text="whatever" onclick="Cottage_NameLabel_Click" /> 
```

然后在 CodeBehind 中：

```
 protected void Cottage_NameLabel_Click(object sender, EventArgs e)
    {
        LinkButton btn = (LinkButton)sender;
        Session["MyCottageName"] = btn.Text;
        Response.Redirect("Cottage.aspx");
    } 
```

在您的 Cottage.Aspx 页面中，您可以检查 Session 变量的值，如下所示：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["MyCottageName"] != null)
        {
            string name = (String)Session["MyCottageName"];
            ... 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:28:00.893

您可以将名称作为查询字符串变量传递给页面。如果你走这条路，你需要确保你的 URL 编码了小屋名称：

```
<a href='/Cottage.aspx?name=<%# Server.UrlEncode(DataBinder.Eval(Container.DataItem, "Cottage_Name")) %>'><%# Eval("Cottage_Name") %></a> 
```

然后在山寨.aspx 上可以得到山寨名称：

```
Dim cottageName As String = Request.QueryString("name") 
```

这比按钮或其他回发解决方案更可取，因为它消除了对回发和重定向的需要。

# iphone - 带平底锅的移动球

> ID：15115868
> 
> 赞同：1
> 
> 时间：2013-02-27T15:28:26.977
> 
> 标签：iphone, ios, objective-c

我正在使用平移手势，在它移动后，我试图让它以触摸发生的角度移动。我想在平移发生时以及当用户抬起手指时得到触摸点。之后计算点的角度并使用它来移动。我不确定我在这里做错了什么。

```
 -(void) dragging:(UIPanGestureRecognizer *)p{
    UIView *v = p.view;
    CGPoint velocity;
    if(p.state == UIGestureRecognizerStateBegan){
        self.origC = v.center;
        self.pointIn = [p locationInView:[UIApplication sharedApplication].keyWindow];
        //NSLog(@"%f",self.pointIn.x);
        //pointInWindow = CGPointMake(pointIn.x, pointIn.y);
    }
    //NSLog(@"%f,%f orig %f, %f",pointInWindow.x, pointInWindow.y,self.origC.x,self.origC.y);
    //velocity = [p velocityInView:v.superview];
    //NSLog(@"x=%f",velocity.x);
    //NSLog(@"y=%f",velocity.y);
    [UIView animateWithDuration:1 delay:0 options:UIViewAnimationCurveEaseInOut animations:^{
        CGPoint delta = [p translationInView:v.superview];
        CGPoint c = self.origC;
        c.x += delta.x;
        c.y += delta.y;
        v.center = c;
    }completion:nil];
    if(p.state == UIGestureRecognizerStateEnded){
        CGPoint lastPoint = [p locationInView:[UIApplication sharedApplication].keyWindow];
        NSLog(@"orig %f , last %f",self.pointIn.x,lastPoint.x);
        self.lateC = v.center;
        CGFloat deltaX = self.pointIn.x - lastPoint.x;
        CGFloat deltaY = self.pointIn.y - lastPoint.y;
        double angle = atan(deltaX/deltaY) * 180/M_PI;
        if(angle < 0)
            angle += 360;
        //NSLog(@"%f",angle);
        self.addy = angle;
        self.addx = angle;
    }
} 
```

这是在我的 ViewController 中：

```
-(void) animateBalls:(NSTimer*) time{
    for(Ball *balls in self.view.subviews){
        [UIView beginAnimations:nil context:nil];
        //[UIView setAnimationRepeatAutoreverses:NO];
        CGFloat x;
        CGFloat y;
        for(Ball *subBalls in self.view.subviews){
            if(balls != subBalls)
                if((CGRectIntersectsRect([balls frame], [subBalls frame]))){
                    [subBalls changeDirectionX];
                    [subBalls changeDirectionY];
                }

        }
        CGPoint point = balls.center;
        if(point.x + 25 > self.view.bounds.size.width)
            [balls changeDirectionX];
        if(point.x - 25 < 0)
            [balls changeDirectionX];
        if(point.y + 25 > self.view.bounds.size.height)
            [balls changeDirectionY];
        if(point.y - 25 < 0)
            [balls changeDirectionY];
        if(balls.directionX == 1){
            x = point.x + (2 * cos(balls.addx));
        }
        else{
            x = point.x - (2 * cos(balls.addx));
            //balls.addx;
        }
        if(balls.directionY == 1){
            y = point.y + (2 * sin(balls.addx));
        }
        else
            y = point.y - (2 * sin(balls.addx));
        //balls.addy;
        //CGFloat x = (CGFloat) random()/(CGFloat) RAND_MAX * self.view.bounds.size.width;
        //CGFloat y = (CGFloat) random()/(CGFloat) RAND_MAX * self.view.bounds.size.height;

        CGPoint squarePostion = CGPointMake(x, y);
        balls.center = squarePostion;

        [UIView commitAnimations];
        //[self.view setNeedsDisplay];
    }
} 
```

# java - 在没有 Hibernate 映射的情况下获取类数据

> ID：15115876
> 
> 赞同：0
> 
> 时间：2013-02-27T15:28:40.103
> 
> 标签：java, hibernate

休眠映射：

我有以下两个课程：

```
class Employee{
    int empId;
    string name;
    float salary;
    Department dept;
    // ... getters and setters....
}

class Department{
    int deptId;
    string deptName;
    // ....and other details, getter and setters..
} 
```

现在我只有员工表

```
table Employee(EmpId number, Name varchar, salary number,deptId number) 
```

不需要保留表格，`Department`因为我只对使用部门 ID 存储员工数据感兴趣。

我正在寻找`hibernate mapping`多对一、一对一、一对多但都需要`dept data`单独存储`table`。

我的问题：有没有办法只保留简单的映射文件以及我可以`deptId`从哪里`Department class`访问`Employee mapping`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:36:09.777

`component`如果使用 xml 映射（[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/components.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/components.html)），则需要将 Department 定义为；`@Embedded/@Embeddable`如果使用注释，则需要将其定义为实体（§2.2 .2.4 在[http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-property](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-property)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:35:21.677

不要为字段***deptId 建立***任何关联，将***deptId***视为简单属性，就像您对***薪水***字段所做的那样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:35:22.583

我想如果你只需要 store deptId，你不需要创建一个 Departement 类。因为在 Hibernate 中，实体类是由数据库中的表表示的。

并且可能，你可以练习一下，你尝试`@Entity`从Department类中删除注释， `@Entity`类，是类的注释，成为数据库中的一个表。

对不起，我的英语不好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T15:41:01.150

```
Can I access dept Id from `Department` class in Employee mapping? 
```

想象一下，一旦你停止程序并重新开始，你有一个随身`department id`携带，你会向谁索要`data of that Class`？？

不，您必须这样做`mapping`，并且必须在`DB`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T15:44:32.520

只需将其映射为整数。您仍然可以将其映射到表`DEPT_ID`上的列`EMPLOYEE`：

```
class Employee {
    ...

    @Column(name = "DEPT_ID")
    Integer deptId;

    ... getters and setters....
} 
```

# android - Android Annotations @AfterViews 调用了 3 次

> ID：15115877
> 
> 赞同：1
> 
> 时间：2013-02-27T15:28:43.337
> 
> 标签：android, android-annotations

我正在使用 Android Annotations，我用 @AfterViews 注释的方法被调用了 3 次。我调试了生成的类，我认为这三个方法被调用了，但我不知道为什么。

```
@Override
public void setContentView(int layoutResID) {
    super.setContentView(layoutResID);
    afterSetContentView_();
}

@Override
public void setContentView(View view, LayoutParams params) {
    super.setContentView(view, params);
    afterSetContentView_();
}

@Override
public void setContentView(View view) {
    super.setContentView(view);
    afterSetContentView_();
} 
```

-- 编辑 1 -- 我的活动声明是我设置布局的唯一地方：

```
@EActivity(R.layout.real_estate_customer_leads_list)
public class RealEstateCustomerLeadsListActivity extends
    SlidingFragmentActivity implements FilterResponseHandler {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:12:10.790

那可能是因为一个超级正在呼叫另一个。像这样的东西：

```
 // super.setContentView(layoutResID); code is:
 View v = LayoutInflater.from(getContext()).inflate(layoutResId);
 setContentView(v);

// then super.setContentView(view); code is:
setContentView(view, null);

// then super.setContentView(view, params);
this one now actually do real work. Hence, 3 calls! 
```

# matlab - Emacs 中的 Octave 模式不会为 .m 文件自动加载

> ID：15115878
> 
> 赞同：0
> 
> 时间：2013-02-27T15:28:46.370
> 
> 标签：matlab, emacs, octave

我的 init.el 文件中有以下代码：

```
(autoload 'octave-mode "octave-mode" nil t)
(setq auto-mode-alist
      (cons '("\\.m$" . octave-mode) auto-mode-alist))

(add-hook 'octave-mode-hook
       (lambda ()
       (abbrev-mode 1)
       (auto-fill-mode 1)
       (if (eq window-system 'x)
       (font-lock-mode 1)))) 
```

我正在使用 24.1.1 版的 emacs，它内置了对 Octave 的支持。但是，当我打开一个扩展名为 .m 的文件时，它似乎进入了 Obj-C 模式。我最终不得不打开 .m 文件，然后执行 Mx-octave-mode 以启用它。为什么会这样，我该如何修复它以使其自动加载？

# ios - 使用 NSDateComponents/NSCalendar 破译一个月的几周

> ID：15115881
> 
> 赞同：1
> 
> 时间：2013-02-27T15:29:02.147
> 
> 标签：ios, objective-c, nsdate, nscalendar

我一直在玩`NSDates`，需要比较两个日期是否在同一周。到目前为止，我已经设法使用`[NSDateComponents week]`来检查它们是否在一周内。但是，我需要能够检查它们是否在一个月的同一周，例如`week 1 {monday-sunday}`。`week 2 {monday-sunday}`.

这在iOS中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:44:43.650

是的。

虽然这听起来很可疑，但它可能是一项家庭作业。我认为这就是您想要的，但是如果您只希望它成为第 3 周（或其他什么）的一部分，那么它在哪个月并不重要；您可以取出月份部分。

```
// Assume date1 and date2 are NSDates

NSCalendar *cal = [NSCalendar currentCalendar];

NSDateComponents *date1Components = [cal components:(NSMonthCalendarUnit | NSWeekCalendarUnit) fromDate:date1];
NSDateComponents *date2Components = [cal components:(NSMonthCalendarUnit | NSWeekCalendarUnit) fromDate:date2];

if (date1Components.week == date2Components.week &&
    date1Components.month == date2Components.month) {
    // same week of same month
} else {
    // either different week or different month (or both)
} 
```

有关这方面的更多信息，请查看 Apple 的[日期和时间编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendars.html#//apple_ref/doc/uid/TP40003470-SW1)

# symfony - 更改用户权限后强制重新认证

> ID：15115882
> 
> 赞同：9
> 
> 时间：2013-02-27T15:29:08.083
> 
> 标签：symfony, symfony-2.1, fosuserbundle

在我的应用程序中，我可以在后端更改用户权限和角色。

当用户登录并且我删除了用户的角​​色时，用户仍然可以访问他实际上不再被允许访问的内容，因为他缺少角色。仅当用户通过注销/登录重新验证自己时，更改才会生效。

所以我的问题是，我可以访问登录用户（不是我）的会话吗？我知道我可以访问我自己的会话并销毁它，这迫使我再次登录。但我想获得任何登录用户的会话。这可能吗？我找不到任何关于此的资源。

我将[**PdoSessionStorage**](http://symfony.com/doc/current/cookbook/configuration/pdo_session_storage.html)与 symfony2.1 和 fosuserbundle 一起使用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T17:50:10.193

让你的用户类实现`Symfony\Component\Security\Core\User\EquatableInterface`。

如果您`false`从该`isEqualTo()`方法返回，用户将被重新认证。使用该方法仅比较那些在更改时应强制重新身份验证的属性——在您的情况下为角色。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T17:03:37.083

您可以通过遵循类似于我所做的方法来解决此问题：

1.  当用户登录时，将所有权限连同这些权限的校验和一起存储在会话中。
2.  根据该用户 ID 在数据库或磁盘上存储相同的校验和
3.  每当用户发出请求时，验证磁盘上的校验和是否与该用户的会话中的校验和相匹配。如果不同，则将权限重新加载到用户的会话中
4.  当您更改权限时，请更新针对该用户存储的数据库（或磁盘上）中的校验和。这将触发他们下一个请求的重新同步。

# linux - 消息队列内容存储在哪里？

> ID：15115884
> 
> 赞同：6
> 
> 时间：2013-02-27T15:29:12.990
> 
> 标签：linux, message-queue, posix-api

在使用 POSIX 消息队列时，我注意到在文件系统上创建了一些文件，其名称与我创建队列的名称相同。我的问题：

Q1。消息队列是否在硬盘而不是 RAM 上排队消息？

Q2。如果是这样，由于涉及 HardDisk ，这不应该在实施中非常缓慢吗？

* * *

编辑：

[我在《Linux 编程接口](https://rads.stackoverflow.com/amzn/click/com/1593272200)》一书中读到了这一点：

> 在 Linux 上，POSIX 消息队列实现为虚拟文件系统中的 i 节点，消息队列描述符和打开消息队列描述分别实现为文件描述符和打开文件描述。但是，这些是 SUSv3 不需要的实现细节，并且在其他一些 UNIX 实现中不成立。

即使是VFS，它仍然是存储在硬盘上的，对吧？

考虑到这些信息，现在有人可以评论第二个问题吗？（和/或第一个，如果还有更多要添加的）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-29T08:48:11.327

下面的链接可能会在第一个问题 [http://man7.org/linux/man-pages/man7/mq_overview.7.html](http://man7.org/linux/man-pages/man7/mq_overview.7.html)

关于第二个问题，基于文件的队列当然会比基于内存的队列慢。但这可能不像一些随机文件访问操作那么慢，因为它是针对排队进行优化和实现的。

# haskell - 请解释一下 (forM_ [stdout, stderr] .flip hPutStrLn) :: String -> IO ()

> ID：15115886
> 
> 赞同：5
> 
> 时间：2013-02-27T15:29:19.937
> 
> 标签：haskell, pointfree

我无法理解这个 Haskell 表达式的工作原理：

```
import Control.Monad
import System.IO
(forM_ [stdout, stderr] . flip hPutStrLn) "hello world" 
```

该`. flip hPutStrLn`部分到底在做什么？类型签名看起来很复杂：

```
ghci> :type flip
flip :: (a -> b -> c) -> b -> a -> c
ghci> :type (.)
(.) :: (b -> c) -> (a -> b) -> a -> c
ghci> :type (. flip)
(. flip) :: ((b -> a -> c1) -> c) -> (a -> b -> c1) -> c
ghci> :type (. flip hPutStrLn)
(. flip hPutStrLn) :: ((Handle -> IO ()) -> c) -> String -> c 
```

`(.)`计算表达式时，运算符的左操作数和右操作数是什么？

提出我的问题的另一种方法是，顶部的表达式的左侧部分如何以这样的类型签名结束：

```
(forM_ [stdout, stderr] . flip hPutStrLn) :: String -> IO () 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T16:16:46.230

的左右操作数`(.)`是

```
forM_ [stdout, stderr] 
```

和

```
flip hPutStrLn 
```

分别。

的类型[`hPutStrLn`](http://hackage.haskell.org/packages/archive/base/4.3.1.0/doc/html/System-IO.html#v:hPutStrLn)是

```
hPutStrLn :: Handle -> String -> IO () 
```

`flip hPutStrLn`类型也是如此

```
flip hPutStrLn :: String -> Handle -> IO () 
```

正如类型系统告诉你的那样，`flip`它是一个交换另一个函数参数的顺序的组合子。在摘要中指定

```
flip       :: (a -> b -> c) -> b -> a -> c
flip f x y =  f y x 
```

从`ghci`你已经知道的类型`(. flip hPutStrLn)`是

```
ghci> :type (. flip hPutStrLn)
(. flip hPutStrLn) :: ((Handle -> IO ()) -> c) -> String -> c 
```

从另一个方向工作，左侧的类型是

```
ghci> :type forM_ [stdout, stderr]
forM_ [stdout, stderr] :: Monad m => (Handle -> m b) -> m () 
```

观察这些类型是如何组合在一起的。

```
(. flip hPutStrLn)     ::            ((Handle -> IO ()) -> c   ) -> String -> c
forM_ [stdout, stderr] :: Monad m =>  (Handle -> m  b ) -> m () 
```

结合两者（称第一个和第二个）给出

```
ghci> :type forM_ [stdout, stderr] . flip hPutStrLn
forM_ [stdout, stderr] . flip hPutStrLn :: String -> IO () 
```

在您的问题中，组合的结果应用于 a `String`，并产生一个产生的 I/O 操作`()`，*即*，我们主要对写入标准输出和错误流的副作用感兴趣。

使用[无点样式](http://www.haskell.org/haskellwiki/Pointfree)（例如您问题中的定义），程序员通过将它们组合成更小、更简单的函数来定义更复杂的函数`(.)`。组合器对于重新排序参数很有用，`flip`以便使重复的部分应用程序适合在一起。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T15:38:34.227

`flip`反转输入函数的参数，即：

```
flip hPutStrLn == \a b -> hPutStrLn b a 
```

这`.`是一个函数组合运算符（或中缀函数），它可以让你很好地将函数链接在一起。如果没有此运算符，您的表达式可以重写如下：

```
forM_ [stdout, stderr] ((flip hPutStrLn) "hello world") 
```

这与以下内容相同：

```
forM_ [stdout, stderr] (flip hPutStrLn "hello world") 
```

或者，使用应用程序运算符：

```
forM_ [stdout, stderr] $ flip hPutStrLn "hello world" 
```

* * *

关于`.`操作数问题。考虑 的类型签名`.`：

```
(.) :: (b -> c) -> (a -> b) -> a -> c 
```

您可以将其视为来自 3 个参数的函数：一个函数`b -> c`、一个函数`a -> b`和一个值`a`- 到一个结果值`c`，而且由于[Currying](http://en.wikipedia.org/wiki/Currying)，您可以将它视为一个来自两个参数的函数：`b -> c`和`a -> b`- 到一个类型的结果函数`a -> c`. 这就是您的示例中发生的情况：您将两个函数（`forM_ [stdout, stderr]`和`flip hPutStrLn`，它们本身是柯里化的结果）传递给`.`并得到一个类型的函数`String -> IO ()`作为结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T18:53:10.603

这是该类型的一个较短的推导（如 Nikita Volkov 的回答的第二部分所暗示的）。

知道`(.) :: (b -> c) -> (a -> b) -> a -> c`和`(f . g) x = f (g x)`，所以

```
(f . g) :: a -> c      where  g :: (a -> b)  and  f :: (b -> c) 
```

（`b`in`a -> b`和在执行[统一](http://en.wikipedia.org/wiki/Unification_%28computer_science%29)`b -> c`后消失，给出类型）并且因为`a -> c`

```
flip hPutStrLn         ::    String -> (Handle -> IO ())             -- g
forM_ [stdout, stderr] :: (Monad m) => (Handle -> m  b ) -> m ()     -- f 
```

[（我们在第一种类型中加上括号，使用类型是右结合`Handle -> IO ()`的事实`->`]），将第二种与第一种*组合*的结果类型（通过[*函数组合*](http://en.wikipedia.org/wiki/Function_composition)运算符）是

```
(Monad m) => String -> m ()     where  m ~ IO  and b ~ ()
                                (found by unification of
                                        Handle -> IO ()  and
                                        Handle -> m  b       ) 
```

即`String -> IO ()`。

参数的顺序`(.)`需要一点时间来适应；它首先启动它的第二个参数函数，然后使用结果调用它的第一个参数函数。如果我们导入`Control.Arrow`，我们就可以使用`>>>`运算符，就像`(.)`相反的那样，带有函数：`(f . g) x == (g >>> f) x`。

# c# - 我正在寻找更好的解决方案来读取服务器端 xslt 并转换为 xml

> ID：15115888
> 
> 赞同：1
> 
> 时间：2013-02-27T15:29:29.657
> 
> 标签：c#, xml, xslt

我正在寻找更好的解决方案来读取服务器端 xslt 并转换为 xml。它工作正常，但正在寻找更好的灵魂……谢谢您的提前帮助。

*   XML 内容作为字符串传递，
*   使用 HttpWebRequest 获取服务器端 XSLT
*   获取字符串作为输出。

    ```
     string xsltUrl = "http://aaa.bbb.com/ddd/eee/JY_test.xslt";
        string outputXML = Common.Display("en", xmlText, xsltUrl);
        Label1.Text = outputXML; 
    ```

* * *

私有静态 XElement rawMenu；

```
 public static string Display(string lang, string xml, string xsltUrl)
    {
        rawMenu = XElement.Parse(xml); 
        return rawMenu.TransformXSLT(xsltUrl, lang); 
    }

    public string TransformXSLT(XElement results, string xsltUrl, string Lang)
    {
        //variables
        var strm = new MemoryStream();
        var settings = new XmlWriterSettings();

        //tell the stream that it will be creating a xml fragment and not a full document.            
        settings.OmitXmlDeclaration = true;
        settings.ConformanceLevel = ConformanceLevel.Fragment;
        settings.Encoding = Encoding.UTF8;
        settings.CloseOutput = false;

        //pass in the lang of the page
        if (string.IsNullOrWhiteSpace(Lang)) //set a default just in case.
            Lang = "en";

        XsltArgumentList argsList = new XsltArgumentList();
        argsList.AddParam("CurrentLang", "", Lang);

        //// Load the style sheet.
        XslCompiledTransform xslt = new XslCompiledTransform();

        try
        {
            var stream = HttpWebRequest.Create(xsltUrl) as HttpWebRequest;
            stream.Method = "GET";
            stream.ContentType = "text/xml; encoding='utf-8'";

            using (HttpWebResponse response = stream.GetResponse() as HttpWebResponse)
            {
                Stream resStream = response.GetResponseStream();

                //Create the reader to load the stylesheet.
                using (XmlReader xmlReader = XmlReader.Create(resStream))
                {
                    xslt.Load(xmlReader);
                }

                using (MemoryStream ms = new MemoryStream())
                {
                    XmlTextWriter writer = new XmlTextWriter(ms, Encoding.UTF8);
                    xslt.Transform(results.CreateReader(), argsList, writer);
                    ms.Position = 0;

                    using (StreamReader rd = new StreamReader(ms))
                    {
                        var strHtml = rd.ReadToEnd();
                        return strHtml;
                    }
                }
            }
        }
        catch (WebException ex)
        {
            if (ex.Response is HttpWebResponse)
            {
                switch (((HttpWebResponse)ex.Response).StatusCode)
                {
                    case HttpStatusCode.NotFound:
                        throw new ApplicationException(((HttpWebResponse)ex.Response).StatusDescription);

                    default:
                        throw ex;
                }
            }
            throw;
        }
    } 
```

# three.js - 移动 THREE.Mesh 和 THREE.SceneUtils.createMultiMaterialObject

> ID：15115907
> 
> 赞同：0
> 
> 时间：2013-02-27T15:30:33.197
> 
> 标签：three.js

代码是webgl交互式可拖动立方体的小修改版本

`new THREE.Mesh`使用（红色）创建 5 个网格，使用`new THREE.SceneUtils.createMultiMaterialObject`（蓝色）创建 5 个网格

[对不起，示例已删除]

请尝试拖动它们，红色和蓝色方块的移动方式不同。

红色立方体移动与鼠标（屏幕）有关，如果我向左拖动一个立方体，立方体向左移动。蓝色立方体移动与旋转坐标系（或相机旋转）有关？，如果我向左拖动一个立方体，立方体可以向上或向下移动并且比鼠标更快。

我认为这是因为`createMultiMaterialObject`是一组具有相同几何形状和不同材料的 THREE.Mesh。反正我看不出原因。为什么他们的移动方式不同？

如何使红色和蓝色立方体表现相同`onDocumentMouseMove`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:52:13.457

您确实需要解释“以不同方式移动”部分。在 Firefox 和 Chrome 中，我看到它们按预期旋转、平移和缩放。

# r - 将新数据提供给 R 预测函数

> ID：15115909
> 
> 赞同：11
> 
> 时间：2013-02-27T15:06:31.137
> 
> 标签：r

R 的`predict`函数可以接受一个`newdata`参数，其文档内容如下：

> newdata 一个可选的数据框，用于查找用于预测的变量。如果省略，则使用拟合值。

但我发现这并不完全正确，具体取决于模型的拟合方式。例如，以下代码按预期工作：

```
x <- rnorm(200, sd=10)
y <- x + rnorm(200, sd=1)
data <- data.frame(x, y)
train = sample(1:length(x), size=length(x)/2, replace=F)
dataTrain <- data[train,]
dataTest <- data[-train,]
m <- lm(y ~ x, data=dataTrain)
head(predict(m,type="response"))
head(predict(m,newdata=dataTest,type="response")) 
```

但是，如果模型适合这样：

```
m2 <- lm(dataTrain$y ~ dataTrain$x)
head(predict(m2,type="response"))
head(predict(m2,newdata=dataTest,type="response")) 
```

最后两行将产生完全相同的结果。该`predict`函数以忽略`newdata`参数的方式工作，即它根本无法真正计算对新数据的预测。

罪魁祸首当然是`lm(y ~ x, data=dataTrain)`对战`lm(dataTrain$y ~ dataTrain$x)`。但是我没有找到任何提到这两者之间区别的文件。这是一个已知问题吗？

我正在使用 R 2.15.2。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T15:20:53.407

请参阅`?predict.lm`我在下面引用的注释部分：

```
Note:

     Variables are first looked for in ‘newdata’ and then searched for
     in the usual way (which will include the environment of the
     formula used in the fit).  A warning will be given if the
     variables found are not of the same length as those in ‘newdata’
     if it was supplied. 
```

虽然它没有说明“同名”等方面的行为，但就公式而言，您传递给它的术语是形式的，并且在其中或沿途`foo$var`不存在具有类似名称的此类变量`newdata`R 将遍历以查找它们的搜索路径。

在第二种情况下，您完全滥用了模型公式表示法；这个想法是简洁和象征性地描述模型。数据对象的简洁性和重复*令人作呕*是不兼容的。

您注意到的行为与记录的行为**完全**一致。简单来说，您用项拟合模型，然后尝试预测项`data$x`和。就 R 而言，它们是不同的名称，因此是不同的东西，不匹配它们是正确的。`data$y``x``y`

# r - 将 R read.csv 转换为 readLines 批处理？

> ID：15115911
> 
> 赞同：2
> 
> 时间：2013-02-27T15:30:40.103
> 
> 标签：r, io, modeling, readline, predict

我有一个拟合模型，我想应用它来对存储为 CSV 的新数据集进行评分。不幸的是，新数据集有点大，如果我一次完成所有预测，预测过程就会耗尽内存。因此，我想将适用于以下小型集合的过程转换为一次处理 500 行的批处理模式，然后为每个得分 500 输出一个文件。

我从这个答案（[What is a good way to read line-by-line in R?](https://stackoverflow.com/questions/4106764/what-is-a-good-way-to-read-line-by-line-in-r)）中了解到我可以使用 readLines 。所以，我将从：

```
trainingdata <- as.data.frame(read.csv('in.csv'), stringsAsFactors=F)
fit <- mymodel(Y~., data=trainingdata)

newdata <- as.data.frame(read.csv('newstuff.csv'), stringsAsFactors=F)
preds <- predict(fit,newdata)
write.csv(preds, file=filename) 
```

类似于：

```
trainingdata <- as.data.frame(read.csv('in.csv'), stringsAsFactors=F)
fit <- mymodel(Y~., data=trainingdata)

con  <- file("newstuff.csv", open = "r")
i = 0
while (length(mylines <- readLines(con, n = 500, warn = FALSE)) > 0) {
    i = i+1
        newdata <- as.data.frame(mylines, stringsAsFactors=F)
        preds <- predict(fit,newdata)
        write.csv(preds, file=paste(filename,i,'.csv',sep=''))
}
close(con) 
```

但是，当我在循环内打印 mylines 对象时，它不会像 read.csv 产生的东西一样正确地自动列 - 标题仍然是一团糟，无论模数列宽发生在引擎盖下将向量包装到 ncol 对象中并没有发生。

每当我发现自己写了一些野蛮的东西，比如剪切第一行、换行时，我通常怀疑 R 有更好的方法来做事。关于如何从 readLines csv 连接获得类似 read.csv 的输出的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:41:51.303

如果您想`read.csv`使用`skip`and`nrows`参数将数据分块读入内存。在伪代码中：

```
read_chunk = function(start, n) {
   read.csv(file, skip = start, nrows = n)
 }

start_indices = (0:no_chunks) * chunk_size + 1
lapply(start_indices, function(x) {
   dat = read_chunk(x, chunk_size)
   pred = predict(fit, dat)
   write.csv(pred)
  } 
```

或者，您可以将数据放入 sqlite 数据库，并使用`sqlite`包以块的形式查询数据。另请参阅[此答案](https://stackoverflow.com/questions/3094866/trimming-a-huge-3-5-gb-csv-file-to-read-into-r)，或`[r] large csv`在 SO 上进行一些挖掘。

# php - 从 PHP 向 node.js(socket.io) 发布请求

> ID：15115912
> 
> 赞同：1
> 
> 时间：2013-02-27T15:30:40.310
> 
> 标签：php, node.js, post, request, socket.io

是否可以从“php”向“node.js+socket.io”发出 POST 请求并调用适当的方法？

服务器代码：

```
var io = require('socket.io').listen(8080);

io.sockets.on('connection', function (socket) {

    socket.on('test', function (data) {
        console.log(data);
    });

    socket.on('disconnect', function () {
        console.log(socket.id);
    });

}); 
```

如何从php调用方法“test”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:44:16.903

可以使用 fsockopen 甚至可能使用带有 stream_context_create 的 file_get_contents。但大象.io 似乎是一个更好的解决方案：[http ://elephant.io/#usage](http://elephant.io/#usage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:34:40.413

您需要在 php 上创建一个套接字以连接到您的 node.js 服务器。请参阅[http://php.net/manual/de/function.fsockopen.php](http://php.net/manual/de/function.fsockopen.php)

# php - IE10默认跨子域共享cookie

> ID：15115917
> 
> 赞同：19
> 
> 时间：2013-02-27T15:30:54.310
> 
> 标签：php, internet-explorer, web-applications, cookies

IE10 处理 cookie 和子域的方式似乎与其他主流浏览器（IE8、IE9、Firefox、Chrome、Safari）不同。

我们将子域广泛用于测试环境，例如：

*   user1.devel.example.com
*   user2.devel.example.com
*   qa.example.com

我们的生产环境位于顶部，例如 example.com（技术上也位于 www.example.com）。

我们天真地使用 php`setcookie($name, $value, $expires)`函数（未指定显式路径或域）设置 cookie，然后通过将空字符串分配给该值来清除 cookie（当用户注销时）。这一直运行良好，每个独特的子域都使用自己的 cookie。

**IE10 现在与所有子域“共享”在 TLD 中设置的 cookie。** 我们观察到的最初症状是没有人可以退出子域。我们观察到一些事情：

*   即使它共享该值，也没有子域能够清除 cookie。
*   当 TLD 清除 cookie 时，它​​也会立即从所有子域中删除。

有没有其他人观察到与 IE10 如何存储/应用相对于子域的 cookie 类似的行为？除了在发送初始 Set-Cookie 标头时明确说明 cookie 适用于哪个域之外，是否有任何解决方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-28T18:48:12.590

我刚刚遇到这个问题。

这是一个探索此错误/问题的人的链接： [Cookies with and without the Domain Specified (browser inconsistency)](https://stackoverflow.com/questions/10751813/cookies-with-and-without-the-domain-specified-browser-inconsistency)

这也可能与： [为子域设置 Cookie，但 IE 开发人员工具在根域显示 cookie。我错过了什么？](https://stackoverflow.com/questions/16804278/cookie-set-for-subdomain-but-ie-developer-tools-show-cookie-at-root-domain-wha)

我的结论是，当从非 www 根域 ( [http://sites.com](http://sites.com) ) 设置 cookie 时，在 IE 中这被视为所有子域的通配符 cookie。Chrome 和 Firefox 不显示此行为 - 它们将来自非 www 根域的 cookie 集关联为仅与该根相关联。

我使用 .net webforms、IIS 和我的 hosts 文件编写了示例网站。我有 3 个站点：a.site.com、b.site.com 和 site.com。他们都提供完全相同名称的饼干。我们称之为“购物车”。

您可以在 cookie 上设置多个属性，包括 cookie 应关联的域。我将此属性留给 .net 定义/未定义。当 Chrome 从每个站点收到 cookie 时，它​​会将 cookie 的域显示为明确来自浏览器地址栏中列出的域。在 IE 中，情况并非如此。IE 将来自[http://sites.com](http://sites.com)的 cookie视为定义为“.sites.com”，根据 RFC 的 cookie 这意味着它可以从所有子域访问。

同样在 IE 中，如果设置了多个同名的 cookie，IE 会按照设置的顺序将它们返回给服务器。因此，如果我先访问[http://sites.com](http://sites.com)然后访问[http://a.sites.com](http://a.sites.com)然后刷新，IE 会将来自[http://sites.com](http://sites.com)的 cookie视为有效 cookie 发送到服务器它是对[http://a.sites.com](http://a.sites.com)的请求，它与[http://a.sites.com](http://a.sites.com)的 cookie 一起发送，但[http://sites.com](http://sites.com)的 cookie是列表中的第一个。

在.net 中，据我所知，cookie 通常是通过键名而不是索引来访问的。因此，当服务器端代码尝试访问名为“ShoppingCart”的键的值时，它将获取第一个设置 cookie 值的站点的值——此处为[http://sites.com](http://sites.com)。

总而言之 - 当您的子域都共享相同的 cookie 键名时，不要使用非 www 域，因为虽然 Chrome/Firefox 会按照您的预期处理域关联，但 IE 会导致错误行为。

编辑 -

只是为了澄清任何阅读本文的人，我正在使用 IE10 来探索这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-03T00:50:59.240

如果您在一个域上有多个 PHP 站点，那么解决此问题的超级简单方法。

例如 - 如果您在根 (example.com) 上有 Wordpress，并且在子域 (a.example.com) 上有自定义 PHP 应用程序，那么在您的应用程序或 Wordpress 中，您需要设置不同的 SessionName。

在 session_start() 之前添加 session_name() 应该为会话提供两个单独的名称，因此不会发生冲突。

```
session_name('AppSession');
session_start(); 
```

简单的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-15T07:01:27.310

是的，这似乎是一个已知问题，请在此处阅读：http: [//blogs.msdn.com/b/ieinternals/archive/2009/08/20/wininet-ie-cookie-internals-faq.aspx](http://blogs.msdn.com/b/ieinternals/archive/2009/08/20/wininet-ie-cookie-internals-faq.aspx)

他们参考了这个测试：[http](http://debugtheweb.com/test/cookieinherit.aspx) ://debugtheweb.com/test/cookieinherit.aspx和[http://www.debugtheweb.com/test/cookieinherit.aspx](http://www.debugtheweb.com/test/cookieinherit.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T07:55:19.700

对于 php 会话 cookie，我在 IE 11.0.9600 中遇到了同样的问题：Internet Explorer 正在向其所有子域发送根域 cookie。为了解决这个问题，我将域名存储在会话变量中：

```
$_SESSION['URL'] = str_replace('www.', '', $_SERVER['HTTP_HOST']); 
```

然后对于每个请求，我检查会话变量：

```
if ( str_replace('www.', '', $_SERVER['HTTP_HOST']) !=  $_SESSION['URL']) {
  session_regenerate_id(true);
  $_SESSION = array();
  $_SESSION['URL'] = str_replace('www.', '', $_SERVER['HTTP_HOST']);
} 
```

然后，当我们从根域移动到子域时，我们将不会“进入”同一个会话。

# c++ - Direct3D10 的奇怪渲染

> ID：15115918
> 
> 赞同：0
> 
> 时间：2013-02-27T15:30:55.657
> 
> 标签：c++, directx, shader, direct3d, hlsl

我正在编写一个在屏幕上呈现图形的应用程序。应用程序可以在 Direct3D9 和 Direct3D10 图形模块之间切换（我编写了包装 D3D9 和 D3D10 的 DLL）。在尝试渲染测试网格（D3DX9 和 DXUT 库中您可以在 DirectX10 示例中找到的库存网格中的圆环）时，Direct3D10 模块的行为相当奇怪。这就是我得到的。

D3D9： ![由 D3D9 模块渲染的圆环。](../Images/af9a4acd4d3506c849898fa719872481.png)

D3D10： ![由 D3D10 模块渲染的圆环](../Images/2d19c918eb3fba283f28b64898c2f345.png)

两种情况下的视图、投影和世界矩阵都是相同的。唯一不同的是设备初始化代码和 HLSL 效果文件（为简单起见，我只应用环境颜色，不使用高级照明、纹理等）。这可能是因为错误的设备初始化还是因为不良的着色器？我会很感激任何提示。我可以按要求发布任何代码。

Game Dev StackExchange 上的一个人建议这可能是因为转置投影矩阵。我尝试替换矩阵在着色器文件中相乘的顺序，我尝试了几乎所有我能得到的排列，但屏幕上没有正确的输出。

提前致谢。编辑：这是 .fx 文件。你可以忽略PS，那里没有什么有趣的事情发生。

```
//Basic ambient light shader with no textures
matrix World;
matrix View;
matrix Projection;
float4 AmbientColor : AMBIENT = float4(1.0, 1.0, 1.0, 1.0);
float AmbientIntensity = 1.0;

struct VS_OUTPUT
{
    float4 Position   : SV_POSITION; // vertex position 
    float4 Color    : COLOR0;    // vertex color    
};

RasterizerState rsWireframe { FillMode = WireFrame; };

VS_OUTPUT RenderSceneVS( float4 vPos : POSITION)
{
    VS_OUTPUT output;
    matrix WorldProjView = mul(World, mul(View, Projection));   
    vPos = mul(vPos, WorldProjView);        
    output.Position = vPos;
    output.Color.rgb = AmbientColor * AmbientIntensity;
    output.Color.a = AmbientColor.a;

    return output;
}

struct PS_OUTPUT
{
    float4 RGBColor : SV_Target;  // Pixel color
};

PS_OUTPUT RenderScenePS( VS_OUTPUT In ) 
{
    PS_OUTPUT output;
    output.RGBColor = In.Color;
    return output;
}

technique10 Ambient
{
    pass P0
    {
        SetRasterizerState( rsWireframe );  
        SetVertexShader( CompileShader( vs_4_0, RenderSceneVS( ) ) );
            SetGeometryShader( NULL );
            SetPixelShader( CompileShader( ps_4_0, RenderScenePS( ) ) );            
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:22:42.543

确保您的 vPos.w = 1.0f。如果不是这种情况，矩阵乘法将变得疯狂并产生奇怪的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:56:44.833

不确定是什么导致了问题，但您可以检查以下内容：

*   确保带有转换矩阵的常量缓冲区是“用某些东西初始化的”，而不是一些垃圾数据
*   如果您在顶点缓冲区中使用法线/切线，还请确保您没有在其中放置一些垃圾数据（每个顶点），但它会导致纹理问题
*   确保您的顶点布局描述与顶点着色器 (.hlsl) 中的输入相匹配，有时即使不匹配，它也会编译并运行，但会显示一些意外的网格。
*   我不知道它在 DX9 中如何，但也许还有一些坐标，将某些变换矩阵中的顶点缓冲区中的 z 乘以 -1 可能会有所帮助

编辑：将一些简单的网格放入缓冲区可能也是个好主意，例如立方体（甚至是三角形）并检查它是否正确绘制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:49:35.227

您需要先转置矩阵，然后再将它们设置为着色器常量。如果您使用 xnamath，请在每个世界上使用 XMMatrixTranspose() 函数，在将它们设置到常量缓冲区之前查看和投影矩阵。

# sha256 - 使用 SHA256 的内置密钥生成算法

> ID：15115925
> 
> 赞同：0
> 
> 时间：2013-02-27T15:31:12.493
> 
> 标签：sha256, encryption-symmetric, data-security

我正在 c# .Net 中开发一个需要加密数据的应用程序，并且由于数据隐私是我的最终动机，因此我使用 AES 加密并使用 PasswordDervieBytes 来确定密钥。现在由于它使用已损坏的 SHA1，我想知道是否有一个内置函数使用 SHA256 来获取我的密钥。我也知道可以使用 RFC2898，但它也使用 SHA1... 那么，是否有使用 SHA256 算法的内置函数？提前感谢您的宝贵答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:40:20.800

有一个[SHA256Managed](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha256managed.aspx)类将**散列**输入。它不会加密它...

# ruby-on-rails - 优化 Rails 中的急切加载

> ID：15115931
> 
> 赞同：2
> 
> 时间：2013-02-27T15:31:25.780
> 
> 标签：ruby-on-rails, activerecord, eager-loading

导轨 3.2。我有以下内容：

```
# city.rb
class City < ActiveRecord::Base
  has_many :zones, :dependent => :destroy
end

# zone.rb
class Zone < ActiveRecord::Base
  belongs_to :city
  has_many :zone_shops, :dependent => :destroy
  has_many :shops, :through => :zone_shops
end

# zone_shop.rb
class ZoneShop < ActiveRecord::Base
  belongs_to :zone
  belongs_to :shop
end

# shop.rb
class Shop < ActiveRecord::Base
end

# cities_controller.rb
def show
  @trip = City.find(params[:id], :include => [:user, :zones => [:shops]])
  @zones = @trip.zones.order("position")

  # List out all shops for the trip
  shops_list_array = []
  @zones.each do |zone, i|
    zone.shops.each do |shop|
      shops_list_array << shop.name
    end
  end
  @shops_list = shops_list_array.join(', ')
end

# development.log
  City Load (0.3ms)  SELECT `cities`.* FROM `cities` WHERE `cities`.`id` = 1 LIMIT 1
  Zone Load (0.3ms)  SELECT `zones`.* FROM `zones` WHERE `zones`.`trip_id` IN (1) ORDER BY position asc
  ZoneShop Load (0.3ms)  SELECT `zone_shops`.* FROM `zone_shops` WHERE `zone_shops`.`zone_id` IN (26, 23, 22) ORDER BY position asc
  Shop Load (0.5ms)  SELECT `shops`.* FROM `shops` WHERE `shops`.`id` IN (8, 7, 1, 9)
  Zone Load (0.5ms)  SELECT `zones`.* FROM `zones` WHERE `zones`.`trip_id` = 1 ORDER BY position asc, position
  Shop Load (0.5ms)  SELECT `shops`.* FROM `shops` INNER JOIN `zone_shops` ON `shops`.`id` = `zone_shops`.`spot_id` WHERE `zone_shops`.`zone_id` = 26
  Shop Load (0.6ms)  SELECT `shops`.* FROM `shops` INNER JOIN `zone_shops` ON `shops`.`id` = `zone_shops`.`spot_id` WHERE `zone_shops`.`zone_id` = 23
  Shop Load (0.4ms)  SELECT `shops`.* FROM `shops` INNER JOIN `zone_shops` ON `shops`.`id` = `zone_shops`.`spot_id` WHERE `zone_shops`.`zone_id` = 22 
```

请注意，在 my`log`中，ID 为 26、23、22 的商店的最后 3 行是多余的。我应该如何重写我`cities_controller.rb`的以减少对系统的查询？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:19:14.807

```
@zones = @trip.zones.includes(:shops).order("position") 
```

这会立即加载商店关联，并应消除由以下原因引起的 n+1 查询问题`zone.shops.each`

有关更多信息，请查看[Ruby on Rails 指南第 12 节关于 Eager Loading 关联](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)的内容，该链接也由 @Benjamin M 链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:45:30.293

我建议这个

```
zone.shops.each do |shop|
  shops_list_array << shop.name
end 
```

生成日志的最后 3 行。这意味着：您的数据库中目前只有一个`zone`。如果您在其中放置更多区域，您将在日志中获得更多`Zone Load`条目。

问题显然是 Rails 的`each`方法，它触发了延迟加载：

```
@zones.each do |zone, i|
  ... 
```

解决方案取决于您的需求，但我建议您阅读有关 Rails 急切加载功能的所有内容。（这正是你的问题：`each`事情）。在这里查找：http: [//guides.rubyonrails.org/active_record_querying.html#eager-loading-associations](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)

这很简单，简短而直接:)

# javascript - 未定义字段 javascript 循环

> ID：15115932
> 
> 赞同：0
> 
> 时间：2013-02-27T15:31:26.357
> 
> 标签：javascript, ajax, string, for-loop

我正在尝试将 ajax 与我正在处理的表单一起使用，为此我正在构建一个帖子字符串，如下所示： field_name=field_value&field_name=field_value 等等..

我无法弄清楚“未定义”的来源。看看这个截图

[![未定义的例子](../Images/c6abcfd2f296e744c0b2cb21f1f47106.png)](https://i.stack.imgur.com/bXG7y.png)

如果你仔细看，你会看到我正在使用的循环，输出“undefinedemail=Emailpassword=Password”而不是“email=Email&password=Password”

这是我正在使用的表单和 javascript 的剥离版本：

```
<form id="signup_form" enctype="multipart/form-data" action="register.php" method="post">
<input name="email" type="text" value="Email"/>
<input name="password" type="text" value="Password"/>
<input name="email_confirm" type="text"  value="Confirm Email"/>
<input name="password_confirm" type="text" value="Confirm Password"/>
<input name="first_name" type="text" value="First Name"/>
<input name="country" type="text" value="Country"/>
<input name="birthday" type="text" value="Birthday DD/MM/YYYY"/>
<input name="last_name" type="text" value="Last Name"/>
<input name="city" type="text" value="City"/>
<input name="profession" type="text" value="Profession"/>
<input type="radio" name="gender" value="Male"><span>Male</span>
<input type="radio" name="gender" value="Female"><span>Female</span>
<input type="checkbox" name="user_type" value="User type" /><span>Checkbox</span>
<button type="submit" name="submit" class="" id="submit">Sign up</button>
</form> 
```

javascript:

```
var post_string;
var input = document.forms["signup_form"].getElementsByTagName("input");
for(var i = 0; i < input.length; i++) { 

post_string += input[i].name + "=" + input[i].value;
if(i > 0 && i < input.length) { post_string += "&"; }

} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:35:05.653

你确实忘记用空字符串初始化你的累加器变量，所以你第一次将它评估的东西附加到`undefined`. 采用

```
var post_string = ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:35:13.377

看起来好像您要声明`post_string`为未定义的变量，而不是将其声明为空字符串，例如`var post_string = ""`.

这意味着，对于 的第一次查找`post_string`，它会返回未定义的变量。

# testing - 詹金斯：限制测试作业在与其测试的作业相同的奴隶上运行

> ID：15115933
> 
> 赞同：1
> 
> 时间：2013-02-27T15:31:26.840
> 
> 标签：testing, configuration, jenkins, label

我最近开始将我的 Jenkins 工作从仅限于某个从属更改为仅限于一个由标签标识的从属组。但是我有测试作业，我需要在与他们正在测试的作业相同的奴隶上运行。

我需要一种将两个作业联系在一起的方法，以便它们只能在同一个奴隶上运行，但是詹金斯仍然根据可用性等选择奴隶。

任何人都知道如何做到这一点，或者即使它是可能的？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:45:48.620

你不能使用 [https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin) 并传递节点名称 ${NODE_NAME} （请参阅[https://wiki.jenkins-ci.org/ display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables)）到下一个构建，应该使用 [https://wiki.jenkins-ci.org/display在节点标签（可以是节点名称）上参数化/JENKINS/NodeLabel+参数+插件](https://wiki.jenkins-ci.org/display/JENKINS/NodeLabel+Parameter+Plugin)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-19T14:36:58.700

> 我需要一种将两个作业联系在一起的方法，以便它们只能在同一个奴隶上运行，但是詹金斯仍然根据可用性等选择奴隶。

我有同样的问题，我找到了 Node Stalker Plugin 现在可以在以下 url 上找到该插件： [https ://wiki.jenkins-ci.org/display/JENKINS/Node+Stalker+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Node+Stalker+Plugin)

詹金斯将此插件称为

作业节点跟踪者

在插件管理页面上。它将成为詹金斯的一部分。

# coding-style - 代码异味报告/跟踪工具

> ID：15115934
> 
> 赞同：0
> 
> 时间：2013-02-27T15:31:27.797
> 
> 标签：coding-style

我想知道您是否知道任何有助于跟踪“[代码气味](http://c2.com/cgi/wiki?CodeSmell)”的工具。这样团队成员可以报告代码中的一些发现，然后可能对最有问题的问题进行投票（就未来的项目开发而言）。

有什么经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:33:14.357

您是否查看过[查找错误](http://findbugs.sourceforge.net/)或[检查样式](http://checkstyle.sourceforge.net/)？这两个都很好。

我也会推荐[pmd](http://pmd.sourceforge.net/)。这些可让您分析常见问题，例如未将方法参数设置为 final。

最后，我建议使用[Sonar](http://www.sonarsource.org/)，因为它会按优先级突出显示任何代码错误。例如有意通过 NPE 的代码，它会向您突出显示这一点，并且可以与 Jenkins 集成。

所有这些都可以真正帮助您走向“清洁代码”的口头禅。

# objective-c - 枚举的非整数基础类型

> ID：15115935
> 
> 赞同：4
> 
> 时间：2013-02-27T15:31:28.420
> 
> 标签：objective-c, c, clang

我正在努力将objective-git集成到我的项目中，但是当我在我的源代码中包含它们的标题时，我在他们的几个枚举声明中得到了这些错误：

> `objective-git/Classes/GTRepository.h:57:16: Non-integral type 'git_reset_t' is an invalid underlying type`

这是有问题的代码：

```
typedef enum : git_reset_t {
    GTRepositoryResetTypeSoft = GIT_RESET_SOFT,
    GTRepositoryResetTypeMixed = GIT_RESET_MIXED,
    GTRepositoryResetTypeHard = GIT_RESET_HARD
} GTRepositoryResetType; 
```

我改为`git_reset_t`（`NSUInteger`typedef'd to unsigned long），这让它可以编译，但当然我宁愿不必更改库文件。

Objective-git 在它自己的项目中编译得很好，我在该项目和我的项目之间的编译器设置中找不到任何显着差异。我会错过什么？

这是 Xcode 4.5，使用 Apple llvm 4.1 编译。

**更新：**我错过的线索是错误只发生在 .mm 文件上，而 .m 文件很好，所以底层枚举类型在 C++ 中不起作用（即使我启用了 C++11）。作为一种解决方法，我为我在该文件中使用的一个objective-git 类放置了一个虚假的最小@interface 声明，因此我不必包含标题，但我仍然想找到一个更干净的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:39:40.773

谷歌发现[这个文件](http://cpansearch.perl.org/src/ALEXBIO/Git-Raw-0.20/xs/libgit2/include/git2/reset.h)包含这个：

```
typedef enum {
    GIT_RESET_SOFT  = 1, /** Move the head to the given commit */
    GIT_RESET_MIXED = 2, /** SOFT plus reset index to the commit */
    GIT_RESET_HARD  = 3, /** MIXED plus changes in working tree discarded */
} git_reset_t; 
```

`int`这是一个作为底层类型的旧式枚举。但它不是一个`int`，它是一个独特的类型。而且它不是完整的，也不能成为新式枚举的基础类型。

解决方法是使用`typedef enum : int`，或者如果您可以使用 C++ 并且想要成为额外的说明性，

```
typedef enum : std::underlying_type< git_reset_t >::type 
```

我没试过，但你也可以在没有 C++ 的 ObjC 中尝试这个：

```
typedef enum : __underlying_type( git_reset_t ) 
```

# dependency-injection - Unity InjectionConstructor 传递对象数组

> ID：15115942
> 
> 赞同：2
> 
> 时间：2013-02-27T15:31:50.243
> 
> 标签：dependency-injection, unity-container

我正在尝试使用统一注册依赖项并将值传递给构造函数，使用下面的代码

```
container.RegisterType<IProviderContext, MockOrderServiceProviderContext>(new InjectionConstructor(new Pharmacy {SiteId = 2,DistrictCode = "2"})); 
```

但我得到

> “OrderService.Business.MockOrderServiceProviderContext 类型没有采用参数（药房）的构造函数。”

构造函数。

```
public MockOrderServiceProviderContext(params object[] objects)
     {
         _object = objects;
     } 
```

你如何传递对象数组的构造函数值？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T22:29:51.737

params 关键字是传递参数数组的语法糖。

以下方法：

```
public void MyMethod(params object[] args)
{
} 
```

可以通过以下两种方式调用，结果相同：

```
MyMethod(new object(), new object());
MyMethod(new []{ new object(), new object()); 
```

当 Unity 查找构造函数时，它会看到一个具有一个类型参数的构造函数`object[]`。所以Unity提供的值一定是数组。

还使用`InjectionConstructor`了 params 关键字，其中每个参数都是要转发给您自己的构造函数的值。如果您`InjectionConstructor`使用数组实例化 ，它将尝试使用数组的每个元素并将它们转发给您的类构造函数。

为了阻止这种情况，我们需要两个级别的包装，一个用于统一为您的类提供一个数组，另一个用于`InjectionConstructor`使用第一个数组作为第一个也是唯一的参数。

所以你应该使用以下内容：

```
container.RegisterType<IProviderContext, MockOrderServiceProviderContext>(
    new InjectionConstructor(new []
    {
       new []
       {
           new Pharmacy { SiteId = 2, DistrictCode = "2" }
       }
    })); 
```

如果您想传递其他项目，只需将它们添加到内部数组：

```
container.RegisterType<IProviderContext, MockOrderServiceProviderContext>(
    new InjectionConstructor(new []
    {
       new []
       {
           new Pharmacy { SiteId = 2, DistrictCode = "2" },
           new Hospital { SiteId = 5, DistrictCode="2" }
       }
    })); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T16:40:50.450

这就是我让它工作的方式。

您必须将对象添加到数组中，然后将它们添加到容器数组中，以便它与构造函数参数签名匹配

```
var objAr = new object[2];
objAr[0] = new Pharmacy { SiteId = 3, DistrictCode = "2" };
objAr[1] = new Facility { SiteID = 1, FacilityCode="Facility" };

//Add the object array to another container array so that Unity Injection constructor can match the constructor.
var containerArray = new object[1];
containerArray[0] = objAr;

container.RegisterType<IProviderContext, MockOrderServiceProviderContext>(new InjectionConstructor(containerArray)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T15:36:53.100

如果我错了，请纠正我，但你不是想给你`MockOrderServiceProviderContext`的不是数组的参数吗？

您`new InjectionConstructor(..)`改为作为参数给出，或者`object`如果您愿意这样说，而不是`object[]`.

# c++ - 在c ++中从文本文件中读取数百万行分隔的整数的最佳有效方法是什么

> ID：15115943
> 
> 赞同：5
> 
> 时间：2013-02-27T15:31:50.027
> 
> 标签：c++, performance, file-io, fstream

我的文本文件中有大约 2500 万个整数，由行分隔。我的第一个任务是获取这些整数并对其进行排序。我实际上已经实现了读取整数并将它们放入数组中（因为我的排序函数将未排序的数组作为参数）。但是，从文件中读取整数是一个非常漫长且昂贵的过程。我已经搜索了许多其他解决方案以获得更便宜和有效的方法，但我无法找到一种能够处理这种尺寸的解决方案。因此，您的建议是从巨大的（约 260MB）文本文件中读取整数。以及如何有效地获得相同问题的行数。

```
ifstream myFile("input.txt");

int currentNumber;
int nItems = 25000000;
int *arr = (int*) malloc(nItems*sizeof(*arr));
int i = 0;
while (myFile >> currentNumber)
{
    arr[i++] = currentNumber;
} 
```

这就是我从文本文件中获取整数的方式。这并不复杂。我假设行数是固定的（实际上是固定的）

顺便说一句，它当然不会太慢。在配备 2.2GHz i7 处理器的 OS X 中，它在大约 9 秒内完成读取。但我觉得它可能会好很多。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T15:41:34.937

最有可能的是，对此的任何优化都可能影响很小。在我的机器上，读取大文件的限制因素是磁盘传输速度。是的，提高读取速度可以稍微提高一点，但很可能，你不会从中得到太多。

我在之前的测试中发现 [我会看看是否可以在其中找到答案 - 我在“SO 的实验代码”目录中找不到源代码] 最快的方法是使用`mmap`. 但它只比使用`ifstream`.

编辑：我自制的以几种不同方式读取文件的基准。 [读取文件时获取行与读取整个文件然后根据换行符拆分](https://stackoverflow.com/questions/14463244/getline-while-reading-a-file-vs-reading-whole-file-and-then-splitting-based-on-n)

与往常一样，基准衡量基准衡量的内容，对环境或代码编写方式的微小更改有时会产生很大的不同。

编辑：以下是“从文件中读取数字并将其存储在向量中”的一些实现：

```
#include <iostream>
#include <fstream>
#include <vector>
#include <sys/time.h>
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <sys/mman.h>
#include <sys/types.h>
#include <fcntl.h>

using namespace std;

const char *file_name = "lots_of_numbers.txt";

void func1()
{
    vector<int> v;
    int num;
    ifstream fin(file_name);
    while( fin >> num )
    {
    v.push_back(num);
    }
    cout << "Number of values read " << v.size() << endl;
}

void func2()
{
    vector<int> v;
    v.reserve(42336000);
    int num;

    ifstream fin(file_name);
    while( fin >> num )
    {
    v.push_back(num);
    }
    cout << "Number of values read " << v.size() << endl;
}

void func3()
{
    int *v = new int[42336000];
    int num;

    ifstream fin(file_name);
    int i = 0;
    while( fin >> num )
    {
    v[i++] = num;
    }
    cout << "Number of values read " << i << endl;
    delete [] v;
}

void func4()
{
    int *v = new int[42336000];
    FILE *f = fopen(file_name, "r");
    int num;
    int i = 0;
    while(fscanf(f, "%d", &num) == 1)
    {
    v[i++] = num;
    }
    cout << "Number of values read " << i << endl;
    fclose(f);
    delete [] v;
}    

void func5()
{
    int *v = new int[42336000];
    int num = 0;

    ifstream fin(file_name);
    char buffer[8192];
    int i = 0;
    int bytes = 0;
    char *p;
    int hasnum = 0;
    int eof = 0;
    while(!eof)
    {
    fin.read(buffer, sizeof(buffer));
    p = buffer;
    bytes = 8192;
    while(bytes > 0)
    {
        if (*p == 26)   // End of file marker...
        {
        eof = 1;
        break;
        }
        if (*p == '\n' || *p == ' ')
        {
        if (hasnum)
            v[i++] = num;
        num = 0;
        p++;
        bytes--;
        hasnum = 0;
        }
        else if (*p >= '0' &&  *p <= '9')
        {
        hasnum = 1;
        num *= 10;
        num += *p-'0';
        p++;
        bytes--;
        }
        else 
        {
        cout << "Error..." << endl;
        exit(1);
        }
    }
    memset(buffer, 26, sizeof(buffer));  // To detect end of files. 
    }
    cout << "Number of values read " << i << endl;
    delete [] v;
}

void func6()
{
    int *v = new int[42336000];
    int num = 0;

    FILE *f = fopen(file_name, "r");
    char buffer[8192];
    int i = 0;
    int bytes = 0;
    char *p;
    int hasnum = 0;
    int eof = 0;
    while(!eof)
    {
    fread(buffer, 1, sizeof(buffer), f);
    p = buffer;
    bytes = 8192;
    while(bytes > 0)
    {
        if (*p == 26)   // End of file marker...
        {
        eof = 1;
        break;
        }
        if (*p == '\n' || *p == ' ')
        {
        if (hasnum)
            v[i++] = num;
        num = 0;
        p++;
        bytes--;
        hasnum = 0;
        }
        else if (*p >= '0' &&  *p <= '9')
        {
        hasnum = 1;
        num *= 10;
        num += *p-'0';
        p++;
        bytes--;
        }
        else 
        {
        cout << "Error..." << endl;
        exit(1);
        }
    }
    memset(buffer, 26, sizeof(buffer));  // To detect end of files. 
    }
    fclose(f);
    cout << "Number of values read " << i << endl;
    delete [] v;
}

void func7()
{
    int *v = new int[42336000];
    int num = 0;

    FILE *f = fopen(file_name, "r");
    int ch;
    int i = 0;
    int hasnum = 0;
    while((ch = fgetc(f)) != EOF)
    {
    if (ch == '\n' || ch == ' ')
    {
        if (hasnum)
        v[i++] = num;
        num = 0;
        hasnum = 0;
    }
    else if (ch >= '0' &&  ch <= '9')
    {
        hasnum = 1;
        num *= 10;
        num += ch-'0';
    }
    else 
    {
        cout << "Error..." << endl;
        exit(1);
    }
    }
    fclose(f);
    cout << "Number of values read " << i << endl;
    delete [] v;
}

void func8()
{
    int *v = new int[42336000];
    int num = 0;

    int f = open(file_name, O_RDONLY);

    off_t size = lseek(f, 0, SEEK_END);
    char *buffer = (char *)mmap(NULL, size, PROT_READ, MAP_PRIVATE, f, 0);

    int i = 0;
    int hasnum = 0;
    int bytes = size;
    char *p = buffer;
    while(bytes > 0)
    {
    if (*p == '\n' || *p == ' ')
    {
        if (hasnum)
        v[i++] = num;
        num = 0;
        p++;
        bytes--;
        hasnum = 0;
    }
    else if (*p >= '0' &&  *p <= '9')
    {
        hasnum = 1;
        num *= 10;
        num += *p-'0';
        p++;
        bytes--;
    }
    else 
    {
        cout << "Error..." << endl;
        exit(1);
    }
    }
    close(f);
    munmap(buffer, size);
    cout << "Number of values read " << i << endl;
    delete [] v;
}

struct bm
{
    void (*f)();
    const char *name;
};

#define BM(f) { f, #f }

bm b[] = 
{
    BM(func1),
    BM(func2),
    BM(func3),
    BM(func4),
    BM(func5),
    BM(func6),
    BM(func7),
    BM(func8),
};

double time_to_double(timeval *t)
{
    return (t->tv_sec + (t->tv_usec/1000000.0)) * 1000.0;
}

double time_diff(timeval *t1, timeval *t2)
{
    return time_to_double(t2) - time_to_double(t1);
}

int main()
{
    for(int i = 0; i < sizeof(b) / sizeof(b[0]); i++)
    {
    timeval t1, t2;
    gettimeofday(&t1, NULL);
    b[i].f();
    gettimeofday(&t2, NULL);
    cout << b[i].name << ": " << time_diff(&t1, &t2) << "ms" << endl;
    }
    for(int i = sizeof(b) / sizeof(b[0])-1; i >= 0; i--)
    {
    timeval t1, t2;
    gettimeofday(&t1, NULL);
    b[i].f();
    gettimeofday(&t2, NULL);
    cout << b[i].name << ": " << time_diff(&t1, &t2) << "ms" << endl;
    }
} 
```

结果（两次连续运行，向前和向后运行以避免文件缓存的好处）：

```
Number of values read 42336000
func1: 6068.53ms
Number of values read 42336000
func2: 6421.47ms
Number of values read 42336000
func3: 5756.63ms
Number of values read 42336000
func4: 6947.56ms
Number of values read 42336000
func5: 941.081ms
Number of values read 42336000
func6: 962.831ms
Number of values read 42336000
func7: 2572.4ms
Number of values read 42336000
func8: 816.59ms
Number of values read 42336000
func8: 815.528ms
Number of values read 42336000
func7: 2578.6ms
Number of values read 42336000
func6: 948.185ms
Number of values read 42336000
func5: 932.139ms
Number of values read 42336000
func4: 6988.8ms
Number of values read 42336000
func3: 5750.03ms
Number of values read 42336000
func2: 6380.36ms
Number of values read 42336000
func1: 6050.45ms 
```

总之，正如有人在评论中指出的那样，整数的实际解析占整个时间的相当大的一部分，因此读取文件并不像我最初所说的那么重要。即使是读取文件的一种非常幼稚的方式（使用`fgetc()`beats `ifstream operator>>`for integers。

可以看出，使用`mmap`to 加载文件比通过 读取文件稍快`fstream`，但只是稍微快一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T16:11:40.870

您可以使用[外部排序](http://en.wikipedia.org/wiki/External_sorting)对文件中的值进行排序，而无需将它们全部加载到内存中。排序速度将受到您的硬盘驱动器能力的限制，但您将能够处理非常大的文件。这是[实现](http://www.dailyfreecode.com/code/external-sorting-2856.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:38:29.670

尝试读取整数块并解析这些块，而不是逐行读取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T15:42:19.470

一种可能的解决方案是将大文件分成更小的块。分别对每个块进行排序，然后将所有已排序的块一一合并。

编辑：显然这是一种行之有效的方法。[请参阅http://en.wikipedia.org/wiki/External_sorting](http://en.wikipedia.org/wiki/External_sorting)上的“外部合并排序”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T15:42:46.520

260MB 不算大。您应该能够将整个内容加载到内存中，然后对其进行解析。进入后，您可以使用嵌套循环读取行尾之间的整数并使用常用函数进行转换。在您开始之前，我会尝试为您的整数数组预分配足够的内存。

哦，您可能会发现粗糙的旧 C 风格文件访问函数是此类事情的更快选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T15:49:40.253

你没有说你是如何阅读这些价值观的，所以很难说。尽管如此，实际上只有两个解决方案：`someIStream

> > anInt `and`fscanf( someFd, "%d", &anInt )` 从逻辑上讲，它们应该具有相似的性能，但实现方式有所不同；两者都值得尝试和衡量。

要检查的另一件事是您如何存储它们。如果你知道你有大约 2500 万，`reserve`那么在阅读它们之前做一个 3000 万`std::vector`可能会有所帮助。`vector`用 3000 万个元素构建 . 然后在看到结尾时修剪它也可能更便宜，而不是使用`push_back`.

最后，您可能会考虑编写一个`immapstreambuf`, 并将其用于`mmap`输入，然后直接从映射内存中读取它。甚至手动迭代它，调用 `strtol`（但这是更多的工作）；所有的流媒体解决方案可能最终都会调用`strtol`，或类似的东西，但首先要围绕调用做重要的工作。

## 编辑：

FWIW，我在我的家用机器（一个相当新的 LeNova，运行 Linux）上做了一些非常快速的测试，结果让我感到惊讶：

*   作为参考，我使用 `std::cin >> tmp`and进行了简单、幼稚的实现，`v.push_back( tmp );`没有尝试优化。在我的系统上，这运行了不到 10 秒。

*   简单的优化，例如`reserve`在向量上使用，或者最初创建大小为 25000000 的向量，并没有太大变化——时间仍然超过 9 秒。

*   使用一个非常简单`mmapstreambuf`的 ，时间下降到大约 3 秒 - 使用最简单的循环， no`reserve`​​等。

*   使用`fscanf`，时间下降到不到 3 秒。我怀疑 Linux 的实现`FILE*`也使用 `mmap`（并且`std::filebuf`不使用）。

*   最后，使用 a `mmapbuffer`，迭代 two `char*`，并使用 stdtol 进行转换，时间下降到不到一秒，

这些测试完成得非常快（编写和运行所有测试不到一个小时），而且远非严格（当然，不要告诉您有关其他环境的任何信息），但差异让我感到惊讶。我没想到会有这么大的差异。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T15:53:10.507

我会这样做：

```
#include <fstream>
#include <iostream>
#include <string>

using namespace std;

int main() {

    fstream file;
    string line;
    int intValue;
    int lineCount = 0;
    try {
        file.open("myFile.txt", ios_base::in); // Open to read
        while(getline(file, line)) {
            lineCount++;
            try {
                intValue = stoi(line);
                // Do something with your value
                cout << "Value for line " << lineCount << " : " << intValue << endl;

            } catch (const exception& e) {
                cerr << "Failed to convert line " << lineCount << " to an int : " << e.what() << endl;
            }
        }
    } catch (const exception& e) {
        cerr << e.what() << endl;
        if (file.is_open()) {
            file.close();
        }
    }

    cout << "Line count : " << lineCount << endl;

    system("PAUSE");
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-27T15:58:31.673

使用 Qt 将非常简单：

```
QFile file("h:/1.txt");
file.open(QIODevice::ReadOnly);
QDataStream in(&file);

QVector<int> ints;
ints.reserve(25000000);

while (!in.atEnd()) {
    int integer;
    qint8 line; 
    in >> integer >> line; // read an int into integer, a char into line
    ints.append(integer); // append the integer to the vector
} 
```

最后，您拥有`ints`可以轻松排序的 QVector。如果文件格式正确，行数与向量的大小相同。

在我的机器 i7 3770k @4.2 Ghz 上，读取 2500 万个整数并将它们放入向量中大约需要 490 毫秒。从普通机械硬盘读取，而不是 SSD。

将整个文件缓冲到内存中并没有太大帮助，时间下降到 420 毫秒。

# jquery - jQuery切换多个菜单项（关闭任何打开并打开一个新的）

> ID：15115946
> 
> 赞同：0
> 
> 时间：2013-02-27T15:31:53.117
> 
> 标签：jquery

对不起，如果标题听起来含糊不清，但我真的不知道如何措辞这个。

我有一个包含 6 个项目的菜单。我想分配每个菜单项以在菜单上方的某个位置打开它自己对应的 div 块。

我已经设法做到了，而且效果非常好，但是只有当我单击相同的菜单项来关闭它时，div 才会关闭。

如果我尝试打开一个 div，然后单击另一个菜单项，旧的菜单项保持打开状态，新的菜单项打开。

我可以将它们设置为一个组，以便如果我单击一个新菜单项，它会关闭任何当前打开的 div？

在过去的 20 分钟里，我一直在尝试粘贴我的代码，但是这个编辑器并不接受所有的代码，而且它绝对不是错误的。

我已经放在这里了...

[http://jsfiddle.net/AFpYc/](http://jsfiddle.net/AFpYc/)

```
$('.divs').hide();
$('.links').click(function(event){
    event.preventDefault();
    $($(this).attr('href')).toggle('fade');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:39:38.730

问题来自切换...切换是一个开/关开关。这意味着它打开关闭的东西并关闭打开的东西。

我建议你改变切换`.show()`和`.hide()`......这样你可以轻松地做你想做的事，如果点击需要打开一个div，那么`.show()`更适合。`.hide()`然后，您可以在打开它之前决定所有其他 div。我已经完成了小提琴的工作。

[http://jsfiddle.net/AFpYc/2/](http://jsfiddle.net/AFpYc/2/)

请注意我如何获取我们想要关闭的所有 div，但我们将打开并打开它。

```
$('.divs').hide();
$('.links').click(function(event){
    event.preventDefault();
    $('#popup_canvas').children('div').not($(this).attr('href')).hide();
    $($(this).attr('href')).show('fade');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:35:10.123

你可以试试

```
$('.divs').hide();
$('.links').click(function(event){
    event.preventDefault();
    $($(this).attr('href')).toggle('fade');
    $($(this).attr('href')).siblings().fadeOut()
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/AFpYc/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:37:51.673

也许是这样的？

```
$('.divs').hide();
$('.links').click(function(event){
    event.preventDefault();
    $('.divs').fadeOut('slow');
    $($(this).attr('href')+':hidden').fadeIn('slow');    
}); 
```

[示范](http://jsfiddle.net/6brww/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T15:40:16.167

您可以使用`.siblings()`. 该`.siblings()`方法允许我们在 DOM 树中搜索这些元素的兄弟姐妹，并从匹配的元素中构造一个新的 jQuery 对象。

CSS

```
.activeClass
{
    color:RED;
} 
```

JavaScript

```
$(document).ready(function()
{
    $('.divs').hide();
    $('.links').click(function(event){
        event.preventDefault();
        var targetDiv = $($(this).attr('href'));

        $('.links').removeClass("activeClass");
        if(targetDiv.css("display") == "none")
        {
            $(this).addClass("activeClass");
        }

        targetDiv.siblings().hide(); 
        // hide those elements immediately, you would change to fadeOut if you like
        targetDiv.toggle('fade');
    });

    $(document).click(function(e)
    {
        if($(e.target).hasClass("links") || $("#popup_canvas").find(e.target).length > 0)
        {
            // exclude the links and div that pops
        }
        else
        {
            $('.divs').hide();
            $('.links').removeClass("activeClass");
        }
    });
}) 
```

已更新，请在 jsfiddle [http://jsfiddle.net/AFpYc/8/找到代码示例](http://jsfiddle.net/AFpYc/8/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T15:45:43.127

这是一个更复杂的版本......活动元素会跟踪使用 css 类 active 并且任何活动元素都会在新元素淡入之前淡出。

[http://jsfiddle.net/TrRD9/](http://jsfiddle.net/TrRD9/)

```
$('.divs').hide();
$('.links').click(function(event){
    event.preventDefault();

    var $href = $($(this).attr('href')); // get target element

    if($href.is('.active')) // if its already active, ignore it
        return;

    // get any active sibling elements
    var $activeSiblings = $href.siblings('.active');
    if($activeSiblings.length > 0)
    {
        // fade out active siblings first
        $activeSiblings.removeClass('active').fadeOut(function(){
            $href.addClass('active').fadeIn();
        });
    } else {
        //  no siblings are active
        $href.addClass('active').fadeIn();
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T08:51:33.433

使用 .not 过滤当前项目中的所有项目

```
var $alldivs = $('.divs').hide();
$('.links').click(function(event){
    event.preventDefault();
    var href = $(this).attr('href');
    var $current = $(href);
    $current.show(500);
    $alldivs.not($current).hide(500);
}); 
```

[http://jsfiddle.net/AFpYc/6/](http://jsfiddle.net/AFpYc/6/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-30T20:14:36.180

如果您实际显示和隐藏菜单（而不是添加和删除类），这是一个非常简单但有效的版本。我使用“not(thismenu)”来确保在单击新菜单时仅隐藏其他菜单。

```
$(document).ready(function() {

<!--**************************************************************************************-->
<!--*** Bind menubar items
<!--**************************************************************************************-->

  $(".menubaritem").click(function(e){
    var thismenu = $(this).find('.menubaroptions');
    $('.menubaroptions').not(thismenu).slideUp("fast"); // hiding all other menus
    thismenu.slideDown("fast");
    e.stopPropagation();
  });

<!--**************************************************************************************-->
<!--*** Bind menubar menu options (to hide current menu when option is clicked)
<!--**************************************************************************************-->

  $(".menubaroption").click(function(e){
    $(this).closest(".menubaroptions").slideUp("fast");
    e.stopPropagation();
  });

<!--**************************************************************************************-->
<!--*** Bind slideup to all menus on body click
<!--**************************************************************************************-->

  $("body").click(function (e) { // binding onclick to body
    $(".menubaroptions").slideUp("fast"); // hiding all menus
    e.stopPropagation();
  });

}); 
```

每个菜单栏项的 HTML 看起来像这样：

```
 <td class='menubaritem clickable'>Menu Item<div class=menubararrow></div>
    <div style='position:absolute;right:1px'>
      <div class=menubaroptions>
        include("menu-blah.php");
      </div>
    </div>
  </td> 
```

只是为了完成，这里是css

```
.menubaritem{height:26px;color:white;font-weight:normal;padding:2px 20px 2px 10px;white-space:nowrap;text-align:right;position:relative}
.menubaritem:hover{background-color:#404040;color:yellow}
.menubararrow{position:absolute;display:inline;margin-left:10px;float:right;margin-top:4px;border-left: 5px solid transparent;border-right: 5px solid transparent;border-top: 5px solid ".$primarytextcolour.}
.menubaritem:hover div.menubararrow{border-top: 5px solid white;}

.menubaroptions{border:1px solid white;display:none;position:relative;top:4px;background-color:rgba(0,0,0,0.80);color:white;min-width: 160px;box-shadow: 2px 2px 8px #888888;border-radius:4px;z-index:100}
.menubaroptions td{background-color:transparent;color: white;padding: 4px 10px;border:none;border-top:1px solid transparent;border-bottom:1px solid transparent}
.menubaroptions td.menubaroption:hover{background-color:grey;color:white;opacity:1;border-top:1px solid transparent;border-bottom:1px solid transparent}
.clickable{cursor:hand;cursor:pointer;pointer:hand;} 
```

# codeigniter - CodeIgniter 多维对象 - ActiveRecord

> ID：15115952
> 
> 赞同：0
> 
> 时间：2013-02-27T15:32:13.273
> 
> 标签：codeigniter, activerecord, multidimensional-array, codeigniter-2

我有一个名为“事件”的对象，它是通过 $data['events'] = 函数创建的（该函数从事件表和其他使用活动记录的表中提取信息）。

事件对象如下所示：

```
Array
    (
        [0] => stdClass Object
            (
                [id] => 2
                [course_name] => Course 3
                [course_description] => Course
                [course_price] => 995
                [supplier_name] => Supplier 3
                [location_country_code] => GB
                [location_country] => United Kingdom
                [location_city] => London
                [venue_name] => Venue 2
                [venue_address] => 2 Street
                [venue_postcode] => EC2M 7PQ
                [venue_city] => London
                [venue_county] => 
                [venue_country] => United Kingdom
                [venue_locality] => 
                [event_type] => Materials Only
                [event_status] => Confirmed
                [course_id] => 2
                [event_duration] => 3
                [event_start_date] => 2013-09-12
                [event_date_added] => 2013-02-26 14:36:06
                [event_status_id] => 2
                [event_type_id] => 4
                [tutor_id] => 0
                [tutor_confirmed] => 0
                [event_featured] => 0
                [event_push] => 0
                [event_active] => 0
                [invigilator_id] => 0
                [event_discount] => 
                [event_max_delegates] => 16
                [location_id] => 1
                [venue_id] => 1
                [supplier_id] => 2
            )

        [1] => stdClass Object
            (
                [id] => 1
                [course_name] => Course Name
                [course_description] => Course Description
                [course_price] => 995
                [supplier_name] => Supplier 1
                [location_country_code] => GB
                [location_country] => United Kingdom
                [location_city] => London
                [venue_name] => Venue Name
                [venue_address] => Street
                [venue_postcode] => EC2M 7PQ
                [venue_city] => London
                [venue_county] => 
                [venue_country] => United Kingdom
                [venue_locality] => 
                [event_type] => Private Venue
                [event_status] => Provisional
                [course_id] => 1
                [event_duration] => 3
                [event_start_date] => 2013-11-13
                [event_date_added] => 2013-02-26 09:56:17
                [event_status_id] => 1
                [event_type_id] => 3
                [tutor_id] => 0
                [tutor_confirmed] => 0
                [event_featured] => 0
                [event_push] => 0
                [event_active] => 0
                [invigilator_id] => 0
                [event_discount] => 395
                [event_max_delegates] => 16
                [location_id] => 1
                [venue_id] => 1
                [supplier_id] => 1
            )

    ) 
```

我想使用 ActiveRecord 在每一行的键 'delegates' 下添加一个嵌套对象，通过比较该表中的 'event_id' 和 'delegate_id 列，使用桥接表 'events_delegates_bridge' 通过附加到事件的委托. 本质上，对象看起来像这样：

```
Array
    (
        [0] => stdClass Object
            (
                [id] => 2
                [course_name] => Course 3
                        [delegates] => Array
                                            (
                                                [0] => stdClass Object
                                                    (
                                                        [id] => 1
                                                        [name] => Joe Bloggs
                                                    )
                                                [1] => stdClass Object
                                                    (
                                                        [id] => 2
                                                        [name] => Joe Smith
                                                    )
                                                [3] => stdClass Object
                                                    (
                                                        [id] => 3
                                                        [name] => Jane Doe
                                                    )
                                            )
                [course_description] => Course
                [course_price] => 995
                [supplier_name] => Supplier 3
                [location_country_code] => GB
                [location_country] => United Kingdom
                [location_city] => London
                [venue_name] => Venue 2
                [venue_address] => 2 Street
                [venue_postcode] => EC2M 7PQ
                [venue_city] => London
                [venue_county] => 
                [venue_country] => United Kingdom
                [venue_locality] => 
                [event_type] => Materials Only
                [event_status] => Confirmed
                [course_id] => 2
                [event_duration] => 3
                [event_start_date] => 2013-09-12
                [event_date_added] => 2013-02-26 14:36:06
                [event_status_id] => 2
                [event_type_id] => 4
                [tutor_id] => 0
                [tutor_confirmed] => 0
                [event_featured] => 0
                [event_push] => 0
                [event_active] => 0
                [invigilator_id] => 0
                [event_discount] => 
                [event_max_delegates] => 16
                [location_id] => 1
                [venue_id] => 1
                [supplier_id] => 2
            )
                ) 
```

任何想法如何最好地实现这一目标？谢谢。

**事件模型** 类 Event_Model 扩展 CI_Model {

```
 public function get_events() {

        $this->db->select( '*' );
        $this->db->from( 'courses' );
        $this->db->from( 'suppliers' );
        $this->db->from( 'locations' );
        $this->db->from( 'venues' );
        $this->db->from( 'event_type' );
        $this->db->from( 'event_status' );
        $this->db->join( 'events', 'events.course_id = courses.id AND events.supplier_id = suppliers.id AND events.location_id = locations.id AND events.venue_id = venues.id AND events.event_type_id = event_type.id AND events.event_status_id = event_status.id', 'inner' );
        $this->db->order_by( 'events.event_start_date', 'asc' );
        $query = $this->db->get();

        return $query->result();

    }

} 
```

**仪表板控制器** $data['events'] = $this->event_model->get_events();

**我创建了这个**模型来获取委托数据。**您认为它可以用来将正确的委托添加到事件对象吗？**

 **```
class Delegate_Model extends CI_Model {

    public function get_delegates() {

        $this->db->select( '*' );
        $this->db->from( 'delegates' );
        $this->db->from( 'events_delegates_bridge' );
        $this->join( 'delegates', 'delegates.id = events_delegates_bridge.delegate_id', 'inner' );
        $query = $this->db->get();
        return $query->result();

    }

} 
```

**刚刚测试了这个，它显示一个空白页。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:43:49.290

您最好使用 2 个单独的查询来完成此操作。

```
$events = array();
$result = $this->db->query('SELECT * FROM events WHERE ...');
foreach($result->result_array() as $event) {
    $events[$event['id']] = $event;
}

$result = $this->db->query('
    SELECT * FROM events_delegates_bridge 
    JOIN delegates ON (delegate_id = delegates.id)
    WHERE ...
');
foreach($result->result_array() as $delegate) {
    if (!empty($events[$delegate['event_id']])) {
        $events[$delegate['event_id']]['delegates'][] = $delegate
    }
} 
```

这段代码只是查询事件并将它们放入由事件 id 索引的数组中。然后，运行一个单独的查询来提取委托，并将它们附加到适当的事件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T15:35:11.073

使用`$name=$variable->result_array();var_dump($name);`我认为这项工作**

# jquery - 将 XML 转换为 JSON，但 jQuery 插件的内容不正确

> ID：15115954
> 
> 赞同：0
> 
> 时间：2013-02-27T15:32:20.483
> 
> 标签：jquery, xml, json

我正在使用[jQuery 插件](http://www.fyneworks.com/jquery/xml-to-json/)将 XML 内容转换为 JSON，但我发现 JSON 内容的排序不正确：

XML:

```
<list>
    <row>
        <item>interest</item>
        <item>7</item>
        <item>10</item>
        <item>13</item>
        <item>15</item>
        <item>20</item>
        <item>25</item>
        <item>30</item>
    </row>
    <row>
        <item>1.000</item>
        <item>$8,631.87</item>
        <item>$6,132.29</item>
        <item>$4,787.03</item>
        <item>$4,189.46</item>
        <item>$3,219.26</item>
        <item>$2,638.11</item>
        <item>$2,251.48</item>
    </row>
    <row>
        <item>1.630</item>
        <item>$8,823.44</item>
        <item>$6,325.61</item>
        <item>$4,982.41</item>
        <item>$4,386.29</item>
        <item>$3,419.83</item>
        <item>$2,842.51</item>
        <item>$2,459.75</item>
    </row>
    <row>
        <itemb>2.150</itemb>
        <item>$8,983.59</item>
        <item>$6,488.07</item>
        <item>$5,147.43</item>
        <item>$4,553.07</item>
        <item>$3,591.13</item>
        <itemhl>$3,018.36</itemhl>
        <item>$2,640.16</item>
    </row>
</list> 
```

转换后的 JSON 对象：

```
{
  "list": {
    "row": [
      {
        "item": [
          "interest",
          "7",
          "10",
          "13",
          "15",
          "20",
          "25",
          "30"
        ]
      },
      {
        "item": [
          "1.000",
          "$8,631.87",
          "$6,132.29",
          "$4,787.03",
          "$4,189.46",
          "$3,219.26",
          "$2,638.11",
          "$2,251.48"
        ]
      },
      {
        "item": [
          "1.630",
          "$8,823.44",
          "$6,325.61",
          "$4,982.41",
          "$4,386.29",
          "$3,419.83",
          "$2,842.51",
          "$2,459.75"
        ]
      },
      {
        "itemb": "2.150",
        "item": [
          "$8,983.59",
          "$6,488.07",
          "$5,147.43",
          "$4,553.07",
          "$3,591.13",
          "$2,640.16"
        ],
        "itemhl": "$3,018.36"
      }
    ]
  }
} 
```

根据 XML 是`itemb`, `item`, `item`, `item`, `item`, `item`, `itemhl`, `item`, 但 JSON 是`itemb`, `item`, `item`, `item`, `item`, `item`, `item`, `itemhl`. 有人可以建议如何解决它，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:37:24.667

JSON 中不能有 2 个具有相同键的键值对。

我相信您想要的是以下内容，但据我所知，这在技术上是不可能的。

```
{
    "itemb": "2.150",
    "item": [
      "$8,983.59",
      "$6,488.07",
      "$5,147.43",
      "$4,553.07",
      "$3,591.13"
    ],
    "itemhl": "$3,018.36",
    "item": "$2,640.16"
  } 
```

# java - 无法将蓝牙键盘连接到安卓设备

> ID：15115956
> 
> 赞同：3
> 
> 时间：2013-02-27T15:32:21.927
> 
> 标签：java, android, bluetooth, hid, rfcomm

我正在尝试以编程方式将 Android 手机连接到蓝牙设备（已配对）。我在线程中使用**createRfcommSocketToServiceRecord(UUID)**方法。

我知道**蓝牙键盘是 HID 设备**，所以我使用 UUID 作为

> **00001124-0000-1000-8000-00805f9b34fb**

上述方法返回一个 BluetoothSocket 对象，但在调用 bluetoothSocket.connect() 时无法连接到 HID 设备。它给出**IOException：发现失败**

我对此进行了很多搜索，但不知道如何解决此问题。

**是否只能在 Android 中使用这种方法连接 Rfcomm 而不是 HID 设备？**如果是这样，那么我应该使用什么替代方法呢？我在此应用程序中使用带有 Android 4.1 的三星 Galaxy S3，配对后（从设置）我可以在一些内置应用程序（如短信、电子邮件等）中使用蓝牙键盘打字。在我看来，连接到它应该是可能的，但我不确定我是否使用了正确的方法。我想在我的应用程序中读取按键串行数据。

这是我正在使用的代码：

```
private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;

    public ConnectThread(BluetoothDevice device) {
        BluetoothSocket tmp = null;
        try {
            tmp = device.createRfcommSocketToServiceRecord(mUUID);
        } catch (IOException e) {
            e.printStackTrace();
        }
        mmSocket = tmp;
    }

    public void run() {
        try {
            mmSocket.connect();
        } catch (IOException connectException) {
            try {
                mmSocket.close();
            } catch (IOException closeException) { }
            return;
        }

        Log.d(TAG, "ConnectThread connection successful");
    }

    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) { }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:58:46.623

> 是否只能在 Android 中使用这种方法连接 Rfcomm 而不是 HID 设备？

是的，很不幸的。java 方法的命名清楚地表明只支持 rfcomm。HID 很可能在原始 l2cap 上运行。

尝试使用[InputDevice](http://developer.android.com/reference/android/view/InputDevice.html)或[takeKeyEvents](http://developer.android.com/reference/android/app/Activity.html#takeKeyEvents%28boolean%29)在您的应用中获取按键数据。

# android - Android 错误“/dev/block/dm-15: 无法写入扇区”

> ID：15115967
> 
> 赞同：0
> 
> 时间：2013-02-27T15:33:06.480
> 
> 标签：android, logcat, android-logcat

我在我的 logcat 中反复收到上述错误 - 它似乎阻止我在设备上启动我的应用程序。

![问题](../Images/59aa786793e49657a6fc209b97c0527b.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T07:56:18.340

你的 nand 似乎有问题。登录`adb shell`并输入`dmesg`您会看到内核抱怨硬件有缺陷。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T15:47:07.010

好的，所以我通过从我的设备中删除 \system\bin\toolbox 文件来解决这个问题，因为这应该只适用于模拟器。仍然无法将我的应用程序启动到设备上：/

# java - Mac OS X 上的 Java Runtime 在 PATH 中找不到程序

> ID：15115971
> 
> 赞同：4
> 
> 时间：2013-02-27T15:33:20.543
> 
> 标签：java, macos, path, imagemagick, identify

我`ImageMagick`在 Mac OS X (10.7) 上使用。我在`MacPorts`.

当我现在进入终端并写下：

```
identify image.jpg 
```

它工作得很好。

但是现在在 Java 中执行它时，会抛出以下异常：

```
org.im4java.core.CommandException: java.io.FileNotFoundException: identify 
```

我可以通过运行看到它在`PATH`运行：

```
which identify 
```

回应：

```
/opt/local/bin/identify 
```

现在在运行时：

```
echo $PATH 
```

我得到回应：

```
/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin 
```

`ImageMagick`相同的代码在也安装了的 Windows 上完美运行。

那么为什么 im4java 根本找不到`identify`呢`PATH`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T20:35:24.733

就像[这里针对 OS X 10.8](https://serverfault.com/questions/16355/how-to-set-global-path-on-os-x/277034#277034)和[这里针对 OS X 10.7](http://overwatering.org/blog/2012/08/setting-path-osx-mountain-lion/)所描述的一样，唯一完整的解决方案是将您`PATH`的`/etc/launchd.conf`.

默认情况下，应用程序的`PATH`应用程序设置为`/usr/bin:/bin:/usr/sbin:/sbin`，即使您根本*没有*a `/etc/launchd.conf`。

因此，您必须在终端中执行以下操作：

```
sudo vi /etc/launchd.conf 
```

并添加以下行或修改它，如果它已经存在：

```
setenv PATH /opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin 
```

**重要提示：**现在您**需要**重新启动 Mac！

`PATH`您可以使用以下代码在您的 Java 应用程序中重现您的：

```
public class Main {
    public static void main (String[] args) {
        System.out.println("PATH=" + System.getenv().get("PATH"));
    }
} 
```

还有第二种解决方案，如果您从 Eclipse 之类的 IDE 中启动程序，您也可以在那里设置 PATH。在 Eclipse 中，您可以通过`Run | Run Configurations | Environment`在`Java Application`.

我确实使用以下代码重现了它，并且`image.jpg`位于`${user.dir}`启动 Java 应用程序的当前目录中。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

public class Main {
    public static void main (String[] args) {
        System.out.println("PATH=" + System.getenv().get("PATH"));
        try {
            Process exec = Runtime.getRuntime().exec("identify image.jpg");
            InputStream is = exec.getInputStream();
            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);
            System.out.println(br.readLine());
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

运行上面的代码后，您应该会得到类似的输出：

```
PATH=/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin
image.jpg JPEG 690x518 690x518+0+0 8-bit sRGB 152KB 0.000u 0:00.000 
```

第一个输出行显示您`PATH`现在运行的 Java 应用程序。第二条输出线来自`identify image.jpg`.

注意：我正在运行 Mac OS X 10.8.2 和 MacPorts 2.1.3

* * *

注意：在 Mac OS X 10.8 之前有一种方法可以通过使用`~/.MacOSX/environment.plist`. 但从 Mountain Lion（又名 Mac OS X 10.8）开始，这不再有效。详情可以在这里查看：

*   [https://apple.stackexchange.com/questions/57385/where-are-system-environment-variables-set-in-mountain-lion](https://apple.stackexchange.com/questions/57385/where-are-system-environment-variables-set-in-mountain-lion)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T17:05:14.587

尝试将搜索路径设置为目标目录：

```
import org.im4java.process.ProcessStarter;
ProcessStarter.setGlobalSearchPath("/opt/local/bin"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T17:13:55.887

我假设 Java 程序不是从 shell 启动的，也不是作为另一个用户启动的（在后一种情况下，我的回答将无济于事）。MacOS 10.8 也是如此，正如 Uwe 指出的那样，这种方法在那里不起作用（详见评论）。

当程序从 shell 以外的地方启动时，shell 配置脚本中设置的环境变量就像`profile`或`bashrc`显然不可用。要为这些应用程序设置环境变量，请使用`.MacOSX/environment.plist`主目录中的文件。要创建文件，您需要使用 shell，然后使用 Xcode 附带的属性列表编辑器打开它，并将`PATH`变量设置为所需的值。有关详细信息，请查看 Apple 的文档：[Mac Developer Library: User Session Environment Variables](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPRuntimeConfig/Articles/EnvironmentVars.html)

以下是文件内容的示例`environment.plist`：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <dict>
        <key>LSCOLORS</key>
        <string>gxfxcxdxbxegedabagacad</string>
        <key>PATH</key>
        <string>/usr/local/bin:/usr/local/sbin:/usr/X11/bin:/usr/local/share/python</string>
   </dict>
</plist> 
```

# regex - 如何匹配标签内的数据，但不匹配其他类似标签

> ID：15115973
> 
> 赞同：0
> 
> 时间：2013-02-27T15:33:33.363
> 
> 标签：regex, html

懒人的正则表达式链接：[http ://regexr.com?33udv](http://regexr.com?33udv)

测试字符串：

```
<li><a href="#"><strong>Start</strong></a></li><li><a href="#">End</a></li> 
```

我想在搜索“开始”时进行匹配

```
<li><a href="#"><strong>Start</strong></a></li> 
```

我的模式是这样的：

```
<li>(?!<li>)*Start.*?</li> 
```

我的问题是它匹配两个列表子项，而我只想匹配包含“开始”的那个。

*注意：这是一个非常可预测的 html 字符串，看起来总是一样的。我知道 Regex 不应该解析 html，但问题更多是关于对 Negative Lookaheads 的理解。*

解决方案：

```
<li>((?!<li>).)*Start.*?</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:38:43.617

*您发布的表达式与链接中的表达式不同。我将专注于链接中的那个。*

`.*`是贪婪的，它会尝试找到最长的匹配。你想让它变得[**懒惰**](http://www.regular-expressions.info/repeat.html)：

```
<li>.*?Start.*?</li> 
```

# html - 是否可以通过 CSS 在 HTML 表格中创建子行？

> ID：15115974
> 
> 赞同：1
> 
> 时间：2013-02-27T15:33:35.283
> 
> 标签：html, css

我有许多列的 HTML 表格，为了获得良好的水平拟合，它的宽度远远超出了浏览器的可见宽度。减小列的大小也会使表格不可读。我想到的一种解决方案是构建子行来打破长行（在`thead`或中`tbody`）。例如

```
Parent thead row
<tr>
a Child row: <th>Col1</th><td>Col2</th><td>Col3</th><td>Col4</th><td>Col5</th>
next Child row: <th>Col6</th><td>Col7</th><td>Col8</th><td>Col9</th><td>Col10</th>
</tr>
End of Parent thead row

Parent tbody row1
<tr>
a Child row: <td>Content1</td><td>Content2</th><td>Content3</td><td>Content4</td><td>Content5</td>
next Child row: <td>Content6</td><td>Content7</td><td>Content8</td><td>Content9</td><td>Content10</td>
</tr>
End of Parent tbody row

Parent tbody row2
.
.
. 
```

可能吗？

或者有没有其他方法可以在不干扰单元格宽度的情况下垂直展开列？

# android - 使用 null 参数调用 super.onCreate()？

> ID：15115975
> 
> 赞同：3
> 
> 时间：2013-02-27T15:33:39.497
> 
> 标签：android, android-layout, android-activity, android-view

在`onCreate(Bundle bdl){}`中，我们必须调用它的超级构造函数`super.onCreate(bdl)`。

对于新创建的活动，我们在`onCreate(Bundle bdl){}`. 所以当我们调用时`super.onCreate(bdl)`，它和调用是一样的`super.onCreate(null)`。

对于重建的活动（如旋转后），我们得到了一个非空的 Bundle。但我注意到，即使我们调用`super.onCreate(null)`, 而不是`super.onCreate(bdl)`，它似乎也是一样的。布局修复工作在`super.onRestoreInstanceState(bdl)`.

那么，在所有情况下`super.onCreate(null)`调用都与调用相同，这真的是真的吗？`super.onCreate(bdl)`

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T15:54:55.527

根据 Android 源代码，该`Activity.onCreate()`方法将 saveInstanceState 包转发到活动的片段。更具体地说，它使用“android:fragments”键获取一个parcelable，并使用该`FragmentManager.restoreAllStates()`方法将这个parcelable转发给片段，该方法本身会恢复所有片段的状态。

该`Activity.onRestoreInstanceState()`方法将包转发到活动的窗口。它再次从保存的实例中获取“android:viewHierarchyState”包并使用该`Window.restoreHierarchyState()`方法将其转发到窗口。

所以回答你的问题，如果你的活动不使用片段，那么确实调用`super.onCreate(null)`不会改变任何东西。但作为最佳实践，我建议您始终转发确切的 savedInstance 包（除非您知道自己在做什么）。

**编辑：**这里是我谈到的示例源代码，取自 AOSP v17：

[活动.java](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/app/Activity.java)

```
protected void onCreate(Bundle savedInstanceState) {

    // [... some content ellipsed for readability purposes]

    if (savedInstanceState != null) {
        Parcelable p = savedInstanceState.getParcelable(FRAGMENTS_TAG);
        mFragments.restoreAllState(p, mLastNonConfigurationInstances != null
                ? mLastNonConfigurationInstances.fragments : null);
    }
    mFragments.dispatchCreate();
    getApplication().dispatchActivityCreated(this, savedInstanceState);
    mCalled = true;
}

// [...]

protected void onRestoreInstanceState(Bundle savedInstanceState) {
    if (mWindow != null) {
        Bundle windowState = savedInstanceState.getBundle(WINDOW_HIERARCHY_TAG);
        if (windowState != null) {
            mWindow.restoreHierarchyState(windowState);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:38:30.307

找出这一点的最简单方法是使用 Log() 实用程序。

虽然，请记住，您可以将东西放入捆绑包中

```
Bundle bdl = new Bundle(1);
bdl.putString("file_absolute_path", f.getAbsolutePath());
cf.setArguments(bdl); 
```

并用`getArguments()`.

简而言之 - 这取决于您是否在应用程序中使用捆绑参数。如果不是，那么它可能是相同的。

# c# - 以安全的方式发送电子邮件

> ID：15115976
> 
> 赞同：9
> 
> 时间：2013-02-27T15:33:40.270
> 
> 标签：c#, winforms, security, email, smtpclient

我正在尝试制作一个简单的应用程序来发送电子邮件。我使用`MailMessage`和`SmtpClient`类。`SmpClient`需要登录名和密码才能工作。

*   使用简单字符串中的登录名/密码编译应用程序是否安全？
*   这是否可以拆卸它并获取密码？
*   如何对潜在的攻击者隐藏它？
*   这可以使用登录名/密码发送电子邮件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T15:37:56.237

是的，将密码以纯文本形式存储在应用程序的任何位置都是不安全的。不要这样做！

相反，您应该将***加密***的密码存储在 App.config 文件中（或配置文件中的其他位置，例如 machine.config）：

[加密和解密 ApplicationConfigSection](http://www.davidgiard.com/2012/06/05/EncryptingAndDecryptingApplicationConfigSections.aspx)

或者，您可以在运行时向用户询问凭据。

如果您想避免显式提供密码，您可以通过当前登录用户的 Windows 身份验证进行身份验证。为此，您可以[`SmtpClient.UseDefaultCredentials`](http://msdn.microsoft.com/de-de/library/system.net.mail.smtpclient.usedefaultcredentials.aspx)用于发送邮件。当然，这仅在 SmtpServer 识别用户 Windows 凭据时才有效。

* * *

如果您想防止中间人攻击和数据包嗅探，您应该使用 SSL 来传输身份验证数据。您可以通过[在配置中启用 SSL](http://theoldsewingfactory.com/2011/01/06/enable-ssl-in-web-config-for-smtpclient/)或仅自己设置属性来做到这一点：[`SmtpClient.EnableSsl`](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.enablessl.aspx). （.NET >= 4.0）

# ruby-on-rails - 嵌套哈希中的 Form_tag 参数

> ID：15115977
> 
> 赞同：34
> 
> 时间：2013-02-27T15:33:41.100
> 
> 标签：ruby-on-rails

我有一个没有与之关联的模型的表单，所以我使用`form_tag`而不是`form_for`. 正如预期的那样，当用户提交表单时，每个字段都包含在 params 哈希中。但是表单会发生很大变化，我希望在 params 哈希中使用一个哈希来保存所有表单字段值，这样每次更改表单时我都不必更改控制器。

有没有办法像 form_for 一样将表单字段值放入嵌套哈希中？我希望能够通过执行类似的操作来获取所有表单字段并将它们转换为 json`params[:form_fields].to_json`

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-27T15:43:21.867

您可以[`fields_for`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)在 a`form_tag`中使用更正式的方式来表达命名空间。

```
fields_for :form_fields do |ff|
  ff.text_field :my_text_field
  ff.select :my_select_tag
end 
```

或者，只需命名所有表单输入，如下所示：

```
text_field_tag "form_fields[my_text_field]"
select_tag "form_fields[my_select_tag]" ... 
```

等然后你会得到`params[:form_fields] = {:my_text_field => "foo", :my_select_tag => "bar"}`，我认为这是你想要的。

# spring - 没有类级别对象的方法中的 Spring 注入

> ID：15115983
> 
> 赞同：3
> 
> 时间：2013-02-27T15:34:04.077
> 
> 标签：spring

在以下情况下如何通过 spring 注入。

```
Class A{

public void doSomeThing(){
 B builder=new B();
 //call other function.
}

} 
```

在这里，我不想将 B 作为类级别的对象。

```
Class A{
 B b;// dont want to bring b here
} 
```

我也不想使用 Spring context.getBean("B) 或 autowire；

所以 Spring 必须以以下方式注入 B：

```
Class A{

public void doSomeThing(){
 B builder=<injected by Spring>
 //call other function.
}

} 
```

所以 B 在 doSomeThing() 方法的范围内被创建和销毁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:37:33.037

你可以用它`ApplictionContext`来做到这一点

```
Class A{
    @Autowire
    private ApplicationContext appContext;

    public void doSomeThing(){
        B builder=appContext.getBean(B.class);
    }
} 
```

如果您希望`B`每次调用时都有不同的实例，`appContext.getBean(B.class)`那么您需要将 bean 定义`B`为`prototype scoped`bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:41:35.003

所以你可能想要这样的东西：

```
class A {
    B b;

    public void doSomething() {
        b.something();
    }

    public B getB() {
        return b;
    }

    public void setB(B b) {
        this.b = b;
    }
}

class B {
    public void something() {
        System.out.println("something");
    }
} 
```

然后您的 XML 配置将是：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
  <bean id="a"  class="A">
    <property name="b" ref="b"/>
  </bean>

  <bean id="b" class="B"/>

</beans> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-18T09:42:09.137

你可以在春天通过查找方法来做到这一点。创建一个抽象方法 createB(); 并且您已经使该类也抽象了，但不要担心 spring 会为您的抽象类创建一个具体的代理对象。

```
<bean id="objB" class="com.package.Prototype" scope="prototype" />

<bean id="yourobject" class="com.package.YourClass">
    <lookup-method name="createB" bean="objB" />
</bean> 
```

# vb.net - 从 .NET 应用程序运行带有 if 条件的 Powershell 脚本

> ID：15115986
> 
> 赞同：3
> 
> 时间：2013-02-27T15:34:13.343
> 
> 标签：vb.net, powershell, file-io, if-statement

我有一个 .net 应用程序，它成功运行从文本文件中提取的 Powershell 命令，直到我尝试执行一个更复杂且包含 if 条件的命令。该脚本可以在 PS 控制台上正常工作，但在 .NET 中，我只知道如何为脚本传递一个字符串，在读取文件后，它会添加额外的东西，例如 vblf，即使我把它拿出来，它也不会工作. 这甚至可能吗？

> .NET 运行时错误：服务器无法处理请求。---> 术语“False”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。

**.NET 代码：**

```
'Grab Powershell script from text (.ps1) file
strScript = File.ReadAllText(ScriptFileName)

'inject the arguments into the script
strScript = InsertArguments(strScript, Arguments)

'Open the runspace and create a pipeline if it's not already open
If psRunspace.RunspaceStateInfo.State = RunspaceState.BeforeOpen Then
  psRunspace.Open()
End If

Dim MyPipeline As Pipeline = psRunspace.CreatePipeline()
MyPipeline.Commands.AddScript(strScript)
Dim psResults As Collection(Of PSObject) = MyPipeline.Invoke() 
```

**Powershell 脚本**，存储在 ps1 文件中：

```
new-mailbox -name $argument1 -DisplayName $argument1 -UserPrincipalName $argument2 Room -DomainController $argument5
if ($argument4 -eq "False") {
   Set-CalendarProcessing $argument1 -BookingWindowInDays 400 -DeleteSubject $false -AutomateProcessing autoaccept -AllBookInPolicy $false -BookInPolicy $argument3 -DomainController $argument5        
} else {
   Set-CalendarProcessing $argument1 -BookingWindowInDays 400 -DeleteSubject $false -AutomateProcessing autoaccept -AllBookInPolicy $true -DomainController $argument5
} 
```

当这个脚本被读入时，这里是一个被拉入的子字符串`strScript`：

```
-Room -DomainController mcexdct1" & vbLf & "if (False -eq "False") {" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:29:30.417

Fixed it by changing the PowerShell script from this:

```
if ($argument4 -eq "False") { 
```

to this:

```
if ("$argument4" -eq "False") { 
```

It works with quotation marks around it. I guess the "junk" I was seeing in the script string (like vblf) is normal- I don't work with reading from text files that much.

# javascript - HTML5 画布精灵表随机图像

> ID：15115987
> 
> 赞同：0
> 
> 时间：2013-02-27T15:34:13.687
> 
> 标签：javascript, html, canvas

目前代码从精灵表中选择一个图像并将其显示在屏幕上，我想做的是在行中选择随机图像并在游戏中显示它们，例如我想要红色/粉色/绿色小行星显示，但目前它只显示绿色的。

这是当前代码，任何帮助都会很棒。

```
function Enemy() {
    this.srcX = 0;
    this.srcY = 0;
    this.width = 64;
    this.height = 64;
    this.previousSpeed = 0;
    this.speed = 2;
    this.acceleration = 0.005;
    this.drawX = Math.floor(Math.random() * 1000) + gameWidth;
    this.drawY = Math.floor(Math.random() * gameHeight);
    this.collisionPointX = this.drawX + this.width;
    this.collisionPointY = this.drawY + this.height;
}

Enemy.prototype.draw = function () {
    this.drawX -= this.speed;
    ctxEnemy.drawImage(imgSprite,this.srcX,this.srcY,this.width,this.height,this.drawX,this.drawY,this.width,this.height);
    this.checkEscaped();
};

Enemy.prototype.checkEscaped = function () {
    if (this.drawX + this.width <= 0) {
        this.recycleEnemy();
    }
};

Enemy.prototype.recycleEnemy = function () {
    this.drawX = Math.floor(Math.random() * 1000) + gameWidth;
    this.drawY = Math.floor(Math.random() * gameHeight);
};

function clearCtxEnemy() {
    ctxEnemy.clearRect(0, 0, gameWidth, gameHeight);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:56:16.570

添加一个变量来决定使用哪个图像

> `function Enemy() {
> ...
> this.imageNumber = Math.floor(Math.random()*3);
> ...
> }`

绘图时使用该变量来确定要使用的图像。

> `Enemy.prototype.draw = function () {
> ...
> ctxEnemy.drawImage(imgSprite,this.srcX+this.imageNumber* this.width,this.srcY,this.width,this.height,this.drawX,this.drawY,this.width,this.height);
> ...
> }`

# linux - 将 RGB PDF 转换为 CMYK 在 Linux 上保持 100% K（黑色）和 100% M（洋红色）

> ID：15115990
> 
> 赞同：1
> 
> 时间：2013-02-27T15:34:17.293
> 
> 标签：linux, pdf, postscript, cmyk

这与：

[将（任何）PDF 转换为仅黑色 (K) CMYK](https://stackoverflow.com/questions/6248563/converting-any-pdf-to-black-k-only-cmyk)

你好

首先请对不起我的英语。

这个相关链接有 50% 的解决方案可以解决我的问题。唯一剩下的就是我还需要洋红色是 100% 洋红色。

这里的场景：

我有一个这样的html：

```
<font color="magenta">Hello </font>
<font color="#000000"> World </font> 
```

1-我将其转换为：

/usr/bin/wkhtmltopdf file.html output1.pdf

2 - 将黑色文本转换为 100% k：

```
gs \
   -dNOPAUSE \
   -dBATCH \
   -sDEVICE=ps2write \
   -sOutputFile=output1.ps \
    output1.pdf

# PS to PDF using replacement function in HackRGB-cmyk-inv.ps
gs \
   -dNOPAUSE \
   -dBATCH \
   -sDEVICE=pdfwrite \
   -sOutputFile=output2.pdf \
    /HackRGB-cmyk-inv.ps \
    output1.ps 
```

现在我有一个 output2.pdf，其中黑色文本是 100% K 但洋红色不是 100% M...

以下是 HackRGB-cmyk-ink.ps(postscript) 的内容供参考：

```
%!
/oldsetrgbcolor /setrgbcolor load def
/setrgbcolor {
(in replacement setrgbcolor\n) print
                                %% R G B
  1 index 1 index       %% R G B G B
  eq {                  %%
     2 index 1 index    %% R G B R B
     eq {
                        %% Here if R = G = B
      pop pop           %% remove two values
      % setgray % "replace the 'setgray' with":
      0 0 0 4 -1 roll % setcmykcolor
      -1 mul          %% obtain -R on top of stack
      1 add           %% obtain 1-R on top of stack
      setcmykcolor    %% now set(cmykcolor) K (as 1-R)
     } {
       oldsetrgbcolor   %% set the RGB values
     } ifelse
  }{
    oldsetrgbcolor      %% Set the RGB values
  }ifelse

} bind def
/oldsetgray /setgray load def
/setgray {
(in replacement setgray\n) print
  % == % debug: pop last element and print it
  % here we're at a gray value;
  % http://www.tailrecursive.org/postscript/operators.html#setcymkcolor
  % setgray: "gray-value must be a number from 0 (black) to 1 (white)."
  % setcymkcolor: "The components must be between 0 (none) to 1 (full)."
  % so convert here again:
  0 0 0 4 -1 roll % push CMY:000 after Gray and roll down,
                  % so top of stack becomes
                  % ...:C:M:Y:Gray
  -1 mul          %% obtain -Gray on top of stack
  1 add           %% obtain 1-Gray on top of stack
  setcmykcolor    %% now set(cmykcolor) K (as 1-Gray)
} bind def

%~ # test: rgb2gray
%~ gs -dNOPAUSE -dBATCH -sDEVICE=ps2write -sOutputFile=./blah-slide-hackRGB-gray.ps ./HackRGB.ps ./blah-slide-gsps2w.ps
%~ # gray2cmyk
%~ gs -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -sOutputFile=./blah-slide-hackRGB-gray-ci.pdf ./HackRGB-cmyk-inv.ps ./blah-slide-hackRGB-gray.ps
%~ # check separations - looks OK
%~ gs -sDEVICE=tiffsep -dNOPAUSE -dBATCH -dSAFER -dFirstPage=1 -dLastPage=1 -sOutputFile=p%02d.tif blah-slide-hackRGB-gray-ci.pdf && eog p01.tif 2>/dev/null 
```

关于如何做的一些想法？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:24:38.003

这是黑客的快速破解。在 oldsetrgbcolor 之后，您可以检查 cmyk 颜色并对其进行修改。也许今晚我可以制作一个更通用的模块，剪掉它会检查 50% 的洋红色并将其更改为 100%。该`(cmyk-) print pstack`行将显示找到的 cmyk 颜色，如果计算出的颜色不完全是 0.5，则可能需要它，例如它可能是 0.49，因此一旦您看到这些值，请删除该行。

老的

```
 }{
    oldsetrgbcolor      %% Set the RGB values
  }ifelse 
```

新的

```
 }{
    oldsetrgbcolor      %% Set the RGB values
    currentcmykcolor    %puts 4 numbers on the stack
    (cmyk-) print pstack %display the colors (remove when things work correctly)
    3 -1 roll           %put magenta on top of stack
    dup                 %make copy of magenta value
    .5                  %put magenta test value on stack (then may not be exactly .5, see pstack)
    eq                  %see of magenta is equal to test value (.5)
    {pop 1}if           %if it is equal, pop off the .5 and put a 1 onto the stack
    3 1 roll            %put magenta back where it belongs in the stack
    setcmykcolor        %reset the cmyk to have new magenta value
  }ifelse 
```

# java - 循环遍历 hashmap 将相同键的值分组到一个 > 对

> ID：15115991
> 
> 赞同：6
> 
> 时间：2013-02-27T15:34:19.773
> 
> 标签：java, hashmap

我一直很难想出一种方法来创建一个 HashMap，它将具有相同键的值（到一个列表中）分组。这就是我的意思：

假设我有以下键和值：

```
Value     Key  *Sorry I got the columns swapped
1         10 
1         11 
1         12 
2         20 
3         30 
3         31 
```

我想将这些值放入

```
Hashmap <Integer, List<Integer>> 
```

这样它将值分组到具有相同键的 List Integer 中，如下所示：

(1, {10, 11, 12}),(2, {20}), (3, {30,31})

现在键和值存储在一个

```
Hashmap <Integer, Integer> 
```

而且我不知道如何遍历这个 Hashmap 以使用键创建新的 Hashmap：值对列表。有没有人有这个话题的好方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T15:41:04.340

假设您创建了一个`HashMap<Integer, List<Integer>>`，并且您想按照您要求的方式向它添加一个键值对，您可以使用以下方法：

```
public void addToMap(HashMap<Integer, List<Integer>> map, Integer key, Integer value){
  if(!map.containsKey(key)){
    map.put(key, new ArrayList<>());
  }
  map.get(key).add(value);
} 
```

将此方法与您的示例数据一起使用：

```
HashMap<Integer, List<Integer>> map = new HashMap<Integer, List<Integer>>();
addToMap(map, 1, 10); 
addToMap(map, 1, 11);
addToMap(map, 2, 20);
addToMap(map, 3, 30);
addToMap(map, 3, 31); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T15:37:14.183

而不是普通`Map`使用 Google Guava 的[`Multimap`](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multimap).

A`Multimap`是一个

> ...将键映射到值的集合，类似于 Map，但其中每个键可能与多个值相关联。

这个概念当然也已经在其他库中实现了，Guava 只是我个人的喜好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T15:46:28.423

HashMap 只会为每个 Integer 存储 1 个值。所以迭代它应该只给你以下值：

```
Key      Value 
1         12 
2         20 
3         31 
```

要遍历 Map 的内容，您可以使用**entrySet()**方法：

```
for(Map.Entry<Integer, Integer> entry : map.entrySet()) {
    System.out.println(entry.getKey() + " = " + entry.getValue());
} 
```

要构建列表地图，我建议这样做：

```
List<Integer> list = map.get(key);
if(list == null) {
    list = new ArrayList<Integer>();
    map.put(key, list);
}
list.add(value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T15:38:13.870

您的实际情况无法正常工作，因为 a`HashMap<Integer,Integer>`无法存储两对与 in 相同的 key`1,10`和`1,11`。

您可以轻松开发自己的多地图，但最好的办法是使用已经为此开发的类，[Apache Commons](http://commons.apache.org/proper/commons-collections/)框架[`MultiValueMap<K,V>`](http://commons.apache.org/proper/commons-collections//apidocs/org/apache/commons/collections/map/MultiValueMap.html)已经为您准备了一个类。

# cocoa-touch - NSCFTimer 支持ContentDimensionVariables 崩溃

> ID：15115992
> 
> 赞同：2
> 
> 时间：2013-02-27T15:34:26.043
> 
> 标签：cocoa-touch, uiviewcontroller, uikit

我在使用管理 Zbar 扫描仪的模态 UIViewController 时遇到了奇怪的崩溃。

我正在显示它：

```
UIViewController *viewController = [[self scannerManager] instantiateScannerViewController];
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade];
[self presentViewController:viewController animated:YES completion:NULL]; 
```

然后解雇它：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationFade];
[self dismissViewControllerAnimated:YES completion:NULL]; 
```

崩溃有时是：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFTimer _supportsContentDimensionVariables]：无法识别的选择器发送到实例 0xb2e3b40”

崩溃有时是：

> ***由于未捕获的异常“NSGenericException”而终止应用程序，原因：“无法在视图上安装约束。约束是否引用了视图子树之外的内容？那是违法的。

```
>  constraint:<NSAutoresizingMaskLayoutConstraint:0x15223c60
> h=--- v=--- UIView:0xb4257f0.midX == UITransitionView:0x1521ce50.midX>
> view:<UITransitionView: 0xb4603b0; frame = (0 0; 320 480);
> clipsToBounds = YES; autoresize = H; layer = <CALayer: 0xb4602d0>>' 
```

在追踪这一点时，它肯定与我在呈现的 UIViewController 上收到的自动布局消息有关：

> 所有依赖约束都应该从引擎中删除，也应该从视图的依赖约束列表中删除

# asp.net - 如何在一个视图中创建多个模型？最好使用部分视图和动态数量的模型

> ID：15115995
> 
> 赞同：0
> 
> 时间：2013-02-27T15:34:28.813
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我有我希望用户能够通过的“技能”列表，从列表中选择适当的级别。所以技能看起来像这样：

```
public class Skill
{
    public String SkillName { get; set; }
    public SkillLevel CurrentSkillLevel { get; set; }
    public Boolean IsRequired { get; set; }

    public Skill(String Name)
    {
        this.SkillName = Name;
        this.IsRequired = true;
        this.CurrentSkillLevel = SkillLevel.None;
    }
} 
```

可能有数百种技能——目前确切的数量是未知的，当然它需要是动态的，所以我不想让用户经历点击每个技能、填写表格的过程，并每次提交。我想在同一页面（每行）中显示所有技能，允许用户选择所有值，然后在最后单击一次提交。

不幸的是，除了单例创建之外，我没有任何使用 MVC 的经验。我通常会为捆绑在一起的几个模型使用单独的 ViewModel，但我看不出这将如何与动态列表一起使用，并且由于它们都是相同的类型（“技能”），我猜 ViewModel 看起来就像模型列表。

有没有人有合适的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:51:20.513

基于 DaveA 的回答，您可以使用 Skill 的编辑器模板。您需要将一个名为的文件夹添加`EditorTemplates`到您的`Views\Controller`文件夹中。现在在那个名为的文件夹中创建一个局部视图`Skill.cshtml`，看起来像这样

```
@model Skill

@Html.TextBoxFor(s => s.SkillName)
@Html.TextBoxFor(s => s.Skills[i].Title)
// etc... 
```

现在在您的主视图中

```
using (Html.BeginForm("UpdateCart", "Orders"))
{

    @Html.TextBoxFor(p=>p.Name)
    @Html.TextBoxFor(p=>p.Title)

    @Html.EditorFor(p => p.Skills)
} 
```

Razor 足够聪明，它可以`Skills`使用 Skill.cshtml 编辑器模板呈现每个技能。

# postgresql - 在 UPDATE 期间捕获 plpgsql 中的列

> ID：15115999
> 
> 赞同：2
> 
> 时间：2013-02-27T15:34:50.527
> 
> 标签：postgresql, triggers, plpgsql

我正在 plpgsql 中为 Postgres 9.1 编写触发器。我需要能够捕获在 UPDATE 的 SET 子句中发出的列名，以便我可以在审计表中记录指定的操作。Postgres 文档中的示例很简单，不足以满足我的需要。我已经在互联网上搜索了几天，但我找不到任何其他试图实现我想要在这里做的事情的例子。

我的时间很紧，要尽快解决这个问题。我不知道 Tcl 所以 pl/Tcl 在这一点上对我来说是不可能的。pl/Perl 可能有用，但我不知道从哪里开始。此外，如果可能的话，我想在 pl/pgsql 中找到一种方法来实现这一点，以实现可移植性和维护。如果有人可以为此推荐一个 pl/Perl 解决方案，我将不胜感激。

这是将被审计的目标表的表结构：

注意：记录表中还有许多其他列，但为了简单起见，我没有在这里列出它们。但是触发器应该能够记录对行中任何列的更改。

```
CREATE TABLE record (
   record_id    integer NOT NULL PRIMARY KEY,
   lastname     text,
   frstname     text,
   dob          date,
   created      timestamp default NOW(),
   created_by   integer,
   inactive     boolean default false
);
create sequence record_record_id_seq;
alter table record alter record_id set default nextval('record_record_id_seq'); 
```

这是我的审计表：

```
CREATE TABLE record_audit (
   id                integer NOT NULL PRIMARY KEY,
   operation         char(1) NOT NULL, -- U, I or D
   source_column     text,
   source_id         integer,
   old_value         text,
   new_value         text,
   created_date      timestamp default now(),
   created_by        integer
);
create sequence record_audit_id_seq;
alter table record_audit alter id set default nextval('record_audit_id_seq'); 
```

我的目标是将 INSERTS 和 UPDATES 记录到 record_audit 表中的记录表中​​，这不仅会详细说明更新的目标记录 ID（source_id）和更新的列（source_column），还会详细说明 old_value 和 new_value柱子。

我知道列值必须是 CAST() 类型的文本。我相信我可以通过访问 NEW 和 OLD 来访问 old_value 和 new_value，但是我很难弄清楚如何获取 UPDATE 查询的 SET 子句中使用的列名。我需要触发器为 SET 子句中指定的每一列向 record_audit 表添加一条新记录。请注意，没有 DELETE 操作，因为记录只是更新为 inactive = 't' （因此记录在审计表中）

到目前为止，这是我的触发器（显然不完整）。请原谅我，我正在学习 pl/pgsql。

```
-- Trigger function for record_audit table
CREATE OR REPLACE FUNCTION audit_record() RETURNS TRIGER AS $$
   DECLARE
      insert_table  text;
      ref_col       text; --how to get the referenced column name??

   BEGIN
      --
      -- Create a new row in record_audit depending on the operation (TG_OP)
      --
      IF (TG_OP = 'INSERT') THEN

         -- old_value and new_value are meaningless for INSERTs. Just record the new ID.
         INSERT INTO record_audit 
            (operation,source_id,created_by) 
         VALUES
            ('I', NEW.record_id, NEW.created_by);

      ELSIF (TG_OP = 'UPDATE') THEN

         FOR i in 1 .. TG_ARGV[0] LOOP
            ref_col := TG_ARGV[i].column; -- I know .column doesn't exist but what to use?

            INSERT INTO record_audit 
               (operation, source_column, source_id, old_value, new_value, created_by) 
            VALUES 
               ('U', ref_col, NEW.record_id, OLD.ref_col, NEW.ref_col, NEW.created_by); 
         END LOOP;

      END IF;
      RETURN NULL; -- result is ignored anyway since this is an AFTER trigger
   END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER record_audit_trig
AFTER INSERT OR UPDATE on record
   FOR EACH ROW EXECUTE PROCEDURE audit_record(); 
```

感谢您阅读这个冗长而曲折的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:09:20.073

您无法获得此信息-不在 PL 级别-可能在 C 中是可能的。

足够好的解决方案是基于记录 NEW 和 OLD 中更改的字段。您可以从系统表中获取字段列表〜与加入触发器的表相关。