# StackOverflow 问答 12608000-12608999

# regex - Jmeter 测试用例捕获负载均衡器服务器重定向？

> ID：12608000
> 
> 赞同：0
> 
> 时间：2012-09-26T18:20:16.357
> 
> 标签：regex, jmeter

我有一个我想测试的系统，它首先命中一个 Tomcat 应用程序，它本质上是一个负载平衡重定向。

所以请求的第一个 url 是

```
http://load.balance.server/redirector/ 
```

该 URL 将浏览器重定向到配置的下一个可用服务器，例如：

```
http://target.server.4/targetApp/ 
```

或者

```
http://target.server.5/targetApp/ 
```

ETC...

在我的 JMeter 测试用例中，在`http://load.balance.server/redirector/`请求之后，我创建了一个“正则表达式提取器”来从 URL 中提取 IP 地址。

然后下一个条目将是：

> http://target.server.[4,5,6]/targetApp/

但是当 RegEx 提取器运行时，它只`load.balance.server`从初始请求返回，而不是`target.server.[4,5,6]`像我想要的那样从重定向请求返回。

因此，http-requests 的后续`${HOST}`条目指向`load.balance.server`not，`target.server.[4,5,6]`因此测试失败。

有人可以帮我捕获目标重定向 IP 以进行测试，例如测试负载平衡集群吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:31:34.783

将正则表达式提取器作为具有重定向响应的 http 采样器的子级

*   在采样器中取消选中跟随重定向

*   检查正则表达式提取器中的标头

*   检查你的正则表达式，它是什么？

# windows - 在 vb 中使用 CryptCATAdminCalcHashFromFileHandle 计算文件的哈希

> ID：12608003
> 
> 赞同：0
> 
> 时间：2012-09-26T18:20:25.860
> 
> 标签：windows, vb.net, winapi, code-signing, sha1

我正在遵循[Sysinternals检查文件数字签名的代码](http://forum.sysinternals.com/discuss-howto-verify-digital-signature-of-a-file_topic19404_page2.html)

在那里我需要获取文件的哈希值。对于那部分，我正在使用以下代码。

```
 'Open file
        Dim fs As FileStream = New FileStream(filename, FileMode.Open, FileAccess.Read, FileShare.Read, 8)

        'Get the size we need for our hash.
        Dim fileHandle As IntPtr = fs.SafeFileHandle.DangerousGetHandle()
        Dim hashSize As Integer
        Dim hash As Byte() = New Byte(256) {}

        Dim b As Boolean = CryptCATAdminCalcHashFromFileHandle(fileHandle, hashSize, Nothing, 0)

        'check results
        System.Console.WriteLine(fileHandle)
        System.Console.WriteLine(hashSize)
        System.Console.WriteLine(hash)
        System.Console.WriteLine(b) 
```

使用 wintrust.dll 如下

```
 <DllImport("Wintrust.dll", PreserveSig:=True, SetLastError:=False)> _
    Private Shared Function CryptCATAdminCalcHashFromFileHandle(ByRef fileHandle As IntPtr, ByVal hash As IntPtr, ByVal hashSize As Byte(), ByVal dwFlags As Integer) As Boolean
    End Function 
```

文件句柄的输出在不同的执行中获得不同的值（这没关系）但是哈希大小和哈希始终为零。b 总是假的。

我在这里错过了什么吗？请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:34:49.517

声明应该是这样的：

```
<DllImport("Wintrust.dll", PreserveSig:=True, SetLastError:=False)> _
Private Shared Function CryptCATAdminCalcHashFromFileHandle(ByVal fileHandle As IntPtr, ByRef hashSize As Integer, ByVal hash As Byte(), ByVal dwFlags As Integer) As Boolean
End Function 
```

您需要初始化`hashSize`缓冲区的大小，并将缓冲区传递给函数：

```
hashSize = 256
Dim b As Boolean = CryptCATAdminCalcHashFromFileHandle(fileHandle, hashSize, hash, 0) 
```

`hashSize`当函数完成时，应该更新以包含实际的哈希大小。

（我的 VB 很生疏，如有错别字请见谅。）

# ios - IOS Facebook SDK 3.1 :: 使用 fb ios sdk 3.1 登录：只有 openActiveSession 进行应用内登录

> ID：12608008
> 
> 赞同：3
> 
> 时间：2012-09-26T18:20:39.987
> 
> 标签：ios, facebook, login

我正在测试新的 3.1 框架。如果我打电话`[FBSession openActiveSessionWithReadPermissions:allowLoginUI:completionHandler`，我可以看到 UIAlertView 是如何弹出的（因为我在 ios 中有 facebook 登录）。

但是，如果我自己创建会话并调用`openWithCompletionHandler`，我将被重定向到 facebook 应用程序或 webview（取决于我是否安装了 facebook 应用程序）。

这是坏了吗？我错过了什么吗？

我不想使用 activeSession 的原因是因为我需要设置**urlSchemeSuffix**，而我在 activeSession 中看不到任何这样做的方法（因为这些仅在 FBSession 的 init 方法中设置）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T00:29:19.610

查看他们的代码，看起来您需要设置一个特定的行为才能让它使用系统帐户（这来自 FB SDK）：

```
+ (BOOL)openActiveSessionWithPermissions:(NSArray*)permissions
                        allowLoginUI:(BOOL)allowLoginUI
                  allowSystemAccount:(BOOL)allowSystemAccount
                              isRead:(BOOL)isRead
                     defaultAudience:(FBSessionDefaultAudience)defaultAudience
                   completionHandler:(FBSessionStateHandler)handler {
    // is everything in good order?
    [FBSession validateRequestForPermissions:permissions
                         defaultAudience:defaultAudience
                      allowSystemAccount:allowSystemAccount
                                  isRead:isRead];
    BOOL result = NO;
    FBSession *session = [[[FBSession alloc] initWithAppID:nil
                                           permissions:permissions
                                       defaultAudience:defaultAudience
                                       urlSchemeSuffix:nil
                                    tokenCacheStrategy:nil]
                      autorelease];
    if (allowLoginUI || session.state == FBSessionStateCreatedTokenLoaded) {
        [FBSession setActiveSession:session];
        // we open after the fact, in order to avoid overlapping close
        // and open handler calls for blocks
        FBSessionLoginBehavior howToBehave = allowSystemAccount ?
                                               FBSessionLoginBehaviorUseSystemAccountIfPresent :
                                               FBSessionLoginBehaviorWithFallbackToWebView;
    [session openWithBehavior:howToBehave
            completionHandler:handler];
    result = session.isOpen;
    }
    return result;
} 
```

# html - 第一个孩子不在标签上工作

> ID：12608019
> 
> 赞同：0
> 
> 时间：2012-09-26T18:21:51.910
> 
> 标签：html, css, css-selectors

第一个子伪类选择器似乎没有任何效果。这是 CSS，然后是 HTML：

```
.social-block a:first-child {
     margin-bottom: 20px;
 }

 <div class="social-block">
      <a href="#" target="_blank"><img src="stylesheets/img/socialblock-facebook.png" alt="socialblock-facebook" width="300" height="125"></a>
      <a href="#" target="_blank"><img src="stylesheets/img/socialblock-twitter.png" alt="socialblock-twitter" width="300" height="125"></a>
 </div> 
```

不能告诉我哪里错了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:27:39.193

顶部和底部边距不适用于内联元素。请参阅类似问题：[内联元素中的边距顶部](https://stackoverflow.com/questions/10324527/margin-top-in-inline-element)。

要给出`<a>`底部边距，您可以尝试使用`display: block`. 但是，这会将第二个链接推到下一行，因此您可能需要结合其他技术（例如浮动）以使两个链接并排显示。

更多关于内联元素： http: [//www.maxdesign.com.au/articles/inline/](http://www.maxdesign.com.au/articles/inline/)

顺便说一句，`:first-child`IE 8.0 或更早版本不完全支持伪类。请参阅[CSS 内容和浏览器兼容性](http://www.quirksmode.org/css/contents.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:31:08.567

首先，旧版本的浏览器不支持伪选择器。**其次，您在内联**元素上使用 margin-bottom 。Margin-bottom 是块元素的属性。

```
a:first-child{display:block;margin-bottom:12px;} 
```

将工作。

# android - 如何按 ORDER 构造 SQLite 查询到 GROUP？

> ID：12608025
> 
> 赞同：18
> 
> 时间：2012-09-26T18:22:15.857
> 
> 标签：android, sql, sqlite, greatest-n-per-group

我有一个相当有趣的情况。我有一个充满地址和消息的 SQLite 数据库（地址不是唯一的；消息是）。每条消息还有一个与之关联的日期。我要做的是选择*第一*条消息的地址、消息、日期以及与该地址关联的*消息数量。*

所以，我想，“我可以按地址分组，每个地址只收到一条消息，然后按日期排序，并获取地址列的 COUNT。”

我做到了，它的工作原理......有点。它获取正确的计数，每个地址仅获取一条消息，并按日期对它们进行排序——但它不选择地址的*最新*消息。这似乎是任意的。

例如，我有来自地址 Y 的三条消息（从最早到最新）A、B、C，以及来自地址 Z 的三条消息 D、E、F。查询可能会获取消息 B 和 E，*然后*按日期对它们进行排序。它*应该*获取消息 C 和 F，并按日期对它们进行排序。

这是我到目前为止所拥有的：

```
// Expanded version:
Cursor cursor = db.query(
    /* FROM */ "messages_database",
    /* SELECT */ new String[]{ "*", "COUNT(address) AS count" },
    /* WHERE */ null,
    /* WHERE args */ null,
    /* GROUP BY */ "address",
    /* HAVING */ null,
    /* ORDER BY */ "date DESC"
);

// Or, same code on one line:
Cursor cursor = db.query("messages_database", new String[]{ "*", "COUNT(address) AS count" }, null, null, "address", null, "date DESC"); 
```

我觉得这可能与`HAVING`条款有关，但我真的不知道。我在 PHP 中经常使用 MySQL，但以前从未接触过`HAVING`。我尝试将我的`HAVING`子句设置为`"MAX(date)"`，但没有效果。如果我将我的`GROUP BY`子句设置为`"address, date"`，那么它们按日期排序，但当然它们都是单独的而不是分组的（因为日期不同）。

谷歌搜索被证明是徒劳的；像“ *android sqlite order before group* ”和“ *android sqlite group by order* ”这样的查询不会产生相关结果。

如何在不删除我的子句的情况下为每个地址选择*一条最新*消息（依赖于此）？我需要两个查询吗？`GROUP``COUNT()`

**编辑**：根据@Adrian 在评论中链接我[的答案](https://stackoverflow.com/a/7745635/570191)，我想出了两个查询，它们都产生了相同的结果；一行，其中计数为 7（这是地址的总数，而不是*每个*地址的消息），并且显示的地址不是最新消息的地址。

这两个查询是：

```
Cursor cursor = db.rawQuery(
      "SELECT t.*, COUNT(t.message_content) AS count "
    + "FROM messages_database t "
    + "INNER JOIN ("
    + "    SELECT address, MAX(date) AS maxdate "
    + "    FROM messages_database "
    + "    GROUP BY address "
    + ") ss ON t.address = ss.address AND t.date = ss.maxdate",
    null
);
Cursor cursor = db.rawQuery(
      "SELECT t1.*, COUNT(t1.message_content) AS count "
    + "FROM messages_database t1 "
    + "LEFT OUTER JOIN messages_database t2 "
    + "ON (t1.address = t2.address AND t1.date < t2.date) "
    + "WHERE t2.address IS NULL",
    null
); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T18:56:33.553

SQLite 有一个扩展，可以让[每个组的最大 n 个](/questions/tagged/greatest-n-per-group "显示标记为“每组最大数”的问题")问题变得更容易：
如果您使用`MAX()`or`MIN()`聚合函数，并且如果您同时选择其他列而不在聚合函数中使用它们或按它们分组，那么这些列的结果值保证来自具有最大值/最小值的同一记录。（这在其他 SQL 方言中是不允许的，并且在[SQLite 3.7.11](http://www.sqlite.org/releaselog/3_7_11.html)中引入。）

因此，对于您的问题，您可以使用如下查询：

```
SELECT *, COUNT(address) AS count, MAX(date)
FROM messages_database
GROUP BY address 
```

* * *

如果您没有 SQLite 3.7.11（可能在大多数 Android 版本上）或使用其他 SQL 引擎，则以下查询将起作用：

```
SELECT *,
       (SELECT COUNT(address) AS count
        FROM messages_database m2
        WHERE m1.address = m2.address)
FROM messages_database m1
WHERE date = (SELECT MAX(date)
              FROM messages_database m3
              WHERE m1.address = m3.address)
GROUP BY address 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T19:27:10.670

解决了！我最终使用了[@CL 的组合。](https://stackoverflow.com/users/11654/cl)的方法和我在编辑的帖子中概述的方法（在[这个答案](https://stackoverflow.com/a/7745635/570191)中澄清，由[@Adrian](https://stackoverflow.com/users/570191/adrian)发布）。

因为我不想使用 3 个`SELECT`语句（如@CL. 的回答所述），所以我使用了与`INNER JOIN`其他语句相同的概念，同时保留了他的方法。

结果是这样的：

```
Cursor cursor = db.rawQuery(
      "SELECT t.*, ss.count AS count "
    + "FROM messages_database t "
    + "INNER JOIN ("
    + "    SELECT address, MAX(date) AS maxdate, COUNT(address) AS count "
    + "    FROM messages_database "
    + "    GROUP BY address "
    + ") ss ON t.address = ss.address AND t.date = ss.maxdate "
    + "GROUP BY t.address "
    + "ORDER BY t.date DESC ",
    null
); 
```

它运行良好！

# c++ - c++ 2个构造函数和一个类中的析构函数

> ID：12608027
> 
> 赞同：0
> 
> 时间：2012-09-26T18:22:27.007
> 
> 标签：c++, class, constructor

这是教授吹嘘的同学的正确代码，我不明白为什么它需要一个双重构造函数

```
class Studentrecords
{
private:

    struct student
    {
        string name;
        string address;
        int ID;
        double gpa;
    };

    student *stackArray;
    int stackSize;
    int top;

public:
    Studentrecords();
    Studentrecords(int size);
    ~Studentrecords();
    void push(string name, string address, int id, double gpa);
    void pop();
    bool isFull() const;
    bool isEmpty() const;
    void display();
};

Studentrecords::Studentrecords(int size)
{
    stackArray = new student[size];
    top = 0;
}

Studentrecords::Studentrecords()
{
    stackSize = 25;
    stackArray = new student[stackSize];
    top = 0;
}

Studentrecords::~Studentrecords()
{
    delete [] stackArray;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T18:24:42.067

它*不需要*两个构造函数，这就是类的定义方式。这样，您可以通过两种方式创建对象：

```
Studentrecords s(15); 
```

这将创建一个`Studentrecords`大小为 15 的对象，或者

```
Studentrecords s; 
```

它将调用默认构造函数，并创建一个类型`Studentrecords`和大小为 25 的对象。

我必须注意，这是错误的代码：

*   可以将默认`Studentrecords()`构造函数替换为`Studentrecords(int size = 25)`以避免代码重复。
*   不使用初始化列表
*   你在类中管理内存，这意味着你需要一个复制构造函数和复制赋值运算符
*   最后，您使用的是 C 样式数组而不是`std::vector`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T18:24:55.483

第二个构造函数允许您将 a 初始化为`StudentRecords`给定的大小。这很方便，但不是绝对必要的。不幸的是，它还允许从 int 到 的隐式转换`StudentRecords`，您可以通过将其禁用`explicit`。

```
explicit Studentrecords(int size); 
```

这将防止诸如此类的废话

```
StudentRecords s = 4*5; 
```

一个更重要的事实是您的类处理动态分配的资源，因此您必须遵循[三个规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)并提供一个复制构造函数和一个复制赋值运算符，除了您已经提供的析构函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:26:43.297

该代码不需要两个构造函数。具有默认参数的单个构造函数更好。第一个构造函数被破坏了，因为它无法设置`stackSize`。

# java - 添加图像作为背景并将其他图像放在其上

> ID：12608029
> 
> 赞同：0
> 
> 时间：2012-09-26T18:22:35.367
> 
> 标签：java, android, image, background

我正在使用 Canvas- 和 Bitmap 类创建图像。我想将其设置为用户的背景。然后我想在它上面添加更多图像。

这是应该作为背景的图像的代码。

```
ImageView imgMap1 = (ImageView) findViewById(R.id.imgMap1);
imgMap1.setImageDrawable(new BitmapDrawable(Bitmap.createBitmap(bmp, 0, 0, 500, 500))); 
```

这是使其成为背景的代码：

```
LinearLayout ll = new LinearLayout(this);
ll.setBackgroundResource(R.drawable.nn);
this.setContentView(ll); 
```

这里的问题是：当我将它设置为背景时，我再也看不到另一张照片了。我怎样才能做到这一点？提前致谢。

其他图像被添加到布局中。它们可以通过手指触摸移动。用户可以用手指重新定位它们。

```
ImageView i1 = (ImageView) findViewById(R.id.Image1);
    ImageView i2 = (ImageView) findViewById(R.id.Image2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:41:07.143

布局是在您的 XML 文件中自上而下构建的，或者按照您在代码中添加元素的顺序构建。听起来您的其他图像首先被添加到布局中，或者作为 XML 文件中的更高层元素，或者在您的代码中更早的位置。您需要添加其他代码作为完整答案的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:17:46.453

刚刚注意到您可以使用[See the Android Reference](http://developer.android.com/reference/android/widget/ImageView.html#setImageBitmap%28android.graphics.Bitmap%29)`Bitmap`直接设置为您`ImageView`的内容`setImageBitmap(Bitmap bm)`

然后谈谈你的问题。

首先，创建自己的类扩展`View`; 二、使用Bitmap加载背景图和叠加图 三、调用`onTouch`事件，使该`onDraw`方法使用返回的坐标自动重绘叠加图`onTouch`

就像是：

```
public class dragndrop extends Activity {
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {

    // using this to load your background image
    BitmapFactory.Options opt = new BitmapFactory.Options();
    opt.inPreferredConfig = Bitmap.Config.RGB_565;  // this is not a must       
    bmBackground = BitmapFactory.decodeFile(filePath, opt);
    super.onCreate(savedInstanceState);
    DrawView dv = new DrawView(dragndrop.this);
    setContentView(dv);
}

public class DrawView extends View {

    Point coordinate;

    public DrawView(Context context) {
        super(context);
        setFocusable(true); //necessary for getting the touch events
    }

    @Override 
    protected void onDraw(Canvas canvas) {

        // assume you have already load your background image as bitmap
        canvas.drawBitmap(bmBackground, 0, 0, null);

    // assume bm is the overlay image you need to put on top,
        // the method here will draw the object with the coordinate you give
    canvas.drawBitmap(bm, coordinate.x, coordinate.y, null);
    }

   // events when touching the screen
    public boolean onTouchEvent(MotionEvent event) {
        int eventaction = event.getAction(); 

        int x = (int)event.getX(); 
        int y = (int)event.getY(); 

        switch (eventaction ) { 

        case MotionEvent.ACTION_DOWN: 
        // add code here to determine the point user touched is within the object or not

                    break;
                }
              }

             break; 

        case MotionEvent.ACTION_MOVE:   // touch 'n' drag 

            // pass the touch point to your object
            coordinate.x = x;
            coordinate.y = y;

            break; 

        case MotionEvent.ACTION_UP: 
            // touch drop - just do things here after dropping

             break; 
        } 
        // redraw the canvas
        invalidate(); 
        return true; 

    }

}

} 
```

这是我自己的片段，请在使用前编辑，当您的问题得到解决时请告诉我。

# azure - 如何配置 Quartz.net 以使用 Azure SQL 数据库存储 ADOJobStore 详细信息

> ID：12608032
> 
> 赞同：3
> 
> 时间：2012-09-26T18:22:42.683
> 
> 标签：azure, azure-sql-database, quartz.net, quartz.net-2.0

我在 Microsoft Azure Web 角色中使用quartz.net 作为调度程序。如果我使用 RamDataStore，我可以让 Quartz.net 正常工作。但是，我想将其分解为两个组件：第一个将允许通过 Web 界面调度作业，第二个将通过工作角色执行作业。要进行这种分布式处理，我需要使用 ADOJobStore。

RamDataStore 一切正常，但当我尝试切换到 ADOJobStore 时它会中断。所以这让我相信我的财产中有些东西我错过了。我正在使用 Azure SQL 数据库，虽然这与 SQL Server 类似，但有些问题有时会导致问题。

我在 VS2010 中使用 Quartz.net 2.0（来自 nuGet），数据库是 Azure SQL。

当我调用 .GetScheduler() 时，出现以下异常：

> {“无法配置 JobStore 类型 'Quartz.Impl.AdoJobStore.JobStoreTX' 道具。”}

详细信息：

> {“无法将属性 'default.connectionString' 解析为正确的数据类型：找不到可写属性 'Default.connectionString'”}

我的连接代码（包括以编程方式设置的属性）：

```
 NameValueCollection properties = new NameValueCollection();
        properties["quartz.scheduler.instanceName"] = "SchedulingServer";
        properties["quartz.threadPool.type"] = "Quartz.Simpl.ZeroSizeThreadPool, Quartz";

        properties["quartz.jobStore.type"] = "Quartz.Impl.AdoJobStore.JobStoreTX, Quartz";
        properties["quartz.jobStore.tablePrefix"] = "QRTZ_";
        properties["quartz.jobStore.clustered"] = "false";
        properties["quartz.jobStore.driverDelegateType"] = "Quartz.Impl.AdoJobStore.SqlServerDelegate, Quartz";

       properties["quartz.jobStore.dataSource"] = "default";
       properties["quartz.jobStore.default.connectionString"] = "Server=tcp:serverName.database.windows.net;Database=scheduler;User ID=scheduler@serverName;Password=***;Trusted_Connection=False;Encrypt=True;";
       properties["quartz.jobStore.default.provider"] = "SqlServer-20";
       properties["quartz.jobStore.useProperties"] = "true";

       ISchedulerFactory sf = new StdSchedulerFactory(properties);
       _scheduler = sf.GetScheduler(); 
```

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T05:59:50.990

您的数据源属性命名存在小而微妙的错误，它应为：

```
properties["quartz.dataSource.default.connectionString"] = "Server=tcp:serverName.database.windows.net;Database=scheduler;User ID=scheduler@serverName;Password=***;Trusted_Connection=False;Encrypt=True;"; 
```

如果要使用配置文件的连接字符串部分，还有一个属性**connectionStringName 。**

# jquery - 关于使用 css 和 jquery 定位 div 的问题

> ID：12608033
> 
> 赞同：0
> 
> 时间：2012-09-26T18:22:45.730
> 
> 标签：jquery, css

我有一个固定的 div 并使用 css 放置在页面上。我有另一个 div 动态生成并添加到页面中心的表单和位置。当单击文档时添加此 div。

问题是当我单击文档时，div 动态添加到页面并正确定位，但静态 div 位置发生变化。我只是不明白为什么会这样。 [这是我的代码](http://jsfiddle.net/5R4g2/)

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
        $(document).ready(function () {
            $(document).click(function (e) {
                // Check for left button click
                if (e.button == 0) {
                    $('form').append('<div id="dvfloat" class="float_div">Welcome</div>').center().fadeIn('slow');
                }
            });

            jQuery.fn.center = function () {
                this.css("position", "absolute");
                this.css("top", Math.max(0, (($(window).height() - this.outerHeight()) / 2) +
                                                $(window).scrollTop()) + "px");
                this.css("left", Math.max(0, (($(window).width() - this.outerWidth()) / 2) +
                                                $(window).scrollLeft()) + "px");
                return this;
            }
        });
    </script>
<style type="text/css">
.login_div {
    background-color: Yellow;
    margin-left: 50px;
    position: absolute;
    width: 100px;
}
.float_div {
    background-color: Green;
    width: 100px;
    height:50px;
}
</style>
</head>
<body>
<form id="form1" runat="server">
    <div id="static_dv" class="login_div"> hi how r u ? </div>
</form>
</body>
</html> 
```

请运行我的代码，看看效果。当我单击文档时，名为“static_dv”的静态 div 会重新定位，但我没有编写任何代码来这样做。我希望静态 div 应该改变它的位置。解决办法是什么。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:30:46.047

你的 div 在表单中，在你的 js 中你改变了 FORM 的位置，所以所有的内容也被改变了

试试这个

```
 var div = $('<div id="dvfloat" class="float_div">Welcome</div>');
 $('FORM').append(div)
 div.center().fadeIn('slow'); 
```

您需要设置 div 的位置，但 ($TAG).append($someTag) 的收缩 - 返回 $TAG，因此您将中心位置设置为 $TAG

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:34:54.010

您实际上并没有将新创建的 DIV 居中，而是将整个表单居中，尝试进行以下小改动：

```
$('form').append('<div id="dvfloat" class="float_div">Welcome</div>').fadeIn('slow');
$('#dvfloat').center(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:30:47.647

使用此代码您的“this”指的是表单，并且您正在更改表单的位置，因此无法正常工作。使用下面引用 div 的新代码

```
$(document).ready(function() {
    $(document).click(function(e) {
        // Check for left button click
        if (e.button == 0) {
            $('form').append('<div id="dvfloat" class="float_div">Welcome</div>').center().fadeIn('slow');
        }
    });

    jQuery.fn.center = function() {
        this.find('.float_div').css("position", "absolute");
        this.find('.float_div').css("top", Math.max(0, (($(window).height() - this.find('.float_div').outerHeight()) / 2) + $(window).scrollTop()) + "px");
        this.find('.float_div').css("left", Math.max(0, (($(window).width() - this.find('.float_div').outerWidth()) / 2) + $(window).scrollLeft()) + "px");
        return this;
    }
});​ 
```

# iphone - 用 iPhone 覆盖 @media CSS

> ID：12608035
> 
> 赞同：0
> 
> 时间：2012-09-26T18:23:05.013
> 
> 标签：iphone, html, css, html-email

我遇到的问题是 Android 上的这个 HTML 电子邮件中的文本被截断（4.0 和三星 Galaxy）。

我已经使用@media 查询来解决这个问题，但它们会对 iPhone 产生不利影响，将宽度缩小太多。我正试图取消`width: 300px !important;`只是为 iPhone 没有运气。

在此先感谢您的任何建议。

当前@媒体：

```
@media only screen and (-webkit-device-pixel-ratio: .75) {
  /* CSS for Low-density screens goes here *
   * Ex: HTC Evo, HTC Incredible, Nexus One */
   /* Styles */
      table[class="table"], td[class="cell"] {

width: 300px !important;
}
}

@media only screen and (-webkit-device-pixel-ratio: 1) and (max-device-width: 768px) {
  /* CSS for Medium-density screens goes here *
   * Ex: Samsung Ace, Kindle Fire, Macbook Pro *
   * max-device-width added so you don't target laptops and desktops */
   /* Styles */
      table[class="table"], td[class="cell"] {
width: 300px !important;

}
}

/* iPhone 4 ----------- */
    @media
    only screen and (-webkit-min-device-pixel-ratio : 1.5),
    only screen and (min-device-pixel-ratio : 1.5) {
      table[class="table"], td[class="cell"] {
          width:auto !important;
}

} 
```

如果没有媒体查询，Android 文本会被截断：

![没有媒体查询 Android 文本被截断](../Images/dd0c79b99967a867f2a3b15affa36ce4.png)

媒体查询还会在 iPhone 上将 td/table 的宽度缩小到 300 像素，从而对其显示产生不利影响

![使用媒体查询 iPhone 将 td/table 的宽度缩小到 300px](../Images/432f913219068d94c5a509749717ab4a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:28:07.570

确保您要应用的 CSS 定义更具体；

```
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
    .container table[class="table"], .table td[class="cell"] {
        width: auto !important;
    }
} 
```

`.container`假设的容器在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:29:59.633

尝试使用`max-width`and`min-width`来满足 androids 和 iphones 的需求。它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:19:42.403

作为“-webkit-min-device-pixel-ratio: 1.5”的替代方案，我怀疑你想要“-webkit-max-device-pixel-ratio: 1”。我不知道浏览器会如何处理既不是“min-”也不是“max-”的媒体查询（例如“-webkit-device-pixel-ratio: 1”）；我怀疑某些浏览器会将媒体查询解释为相等，但许多浏览器只会吐槽并总是说查询是错误的。

您的浏览器是否可能会将有关其无法理解的媒体查询的错误消息放入“错误控制台”？

有时会出现手持设备报告密度为 1 但宽度非常大（如 800）（“视口”宽度）的情况。您当前的代码似乎*没有*向此类设备发送 CSS，我怀疑这是您想要的。在 CSS 的某些部分而不是其他部分上具有特定的媒体查询（例如 max-device-width:) 通常暗示某些边缘情况没有被考虑。

# ms-word - Word 2010 可以为通过 QuickParts 添加的字段指定一个 ID，然后在 document.Fields 集合中引用

> ID：12608038
> 
> 赞同：1
> 
> 时间：2012-09-26T18:23:10.587
> 
> 标签：ms-word, custom-fields, fieldcodes

我需要向 Word 2010 DOTX 模板添加一些字段，当使用 Word 互操作服务在 C# 程序中打开文档时，这些字段将在“运行时”自动填充自定义内容。通过 QuickParts 功能区菜单选项将“询问”或“填写”字段添加到模板时，我看不到任何方法可以为它们分配唯一名称。

当我在 C# 程序中迭代 document.Fields 集合时，我必须知道我正在引用哪个字段，以便为它分配正确的值。

以前版本的 Word 和 Word 2010 之间的情况似乎发生了变化。因此，如果您回答，请确保您的回答适用于 2010 年。不要假设以前版本中的工作在 2010 年有效。非常感谢，因为我很少在 2010 年试图弄清楚功能区菜单时，使用 Word 并感觉像个傻瓜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:00:19.463

您是正确的，因为字段不一定具有将自己与其他字段实例唯一区分开来的内置方法（字段集合中的索引除外）。但是，您可以使用 Field.Type 属性来测试 wdFieldAsk 或 wdFieldFillIn 。如果这不足以识别 ID，那么您将需要从 Field.Code 解析您自己的唯一标识符。例如，您可以将 FILLIN 字段构造为：

`{ FILLIN "Hello, World!" MYIDENTIFER }`

当您遍历您的 document.Fields 集合时，只需对字符串中的标识符进行测试。编辑：示例：

```
For Each fld In ActiveDocument.Fields
    If InStr("CARMODEL", fld.Code) <> 0 Then
        ''this is the carmodel field
    End If
Next 
```

另一种选择 - 使用“^d MYIDENTIFIER”的 Find.Text 查找您的特定字段（其中 ^d 是“字段代码”的表达式）

让我知道这是否有帮助，如果有任何差距，请扩展您的问题。

# django - 如何防止在 InlineForm 验证中删除对象？

> ID：12608043
> 
> 赞同：0
> 
> 时间：2012-09-26T18:23:38.993
> 
> 标签：django, django-forms

我希望能够清除内联中对象的 ForeignKey 关联，但实际上不能删除该对象。如何使用 Django 的验证来防止对象被删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:25:40.927

```
class LocationInlineFormset(forms.models.BaseInlineFormSet):
    def clean(self):
        for form in self.forms:
            try:
                if form.cleaned_data:
                    loc = Location.objects.filter( /* filter to find the location being edited/added */ )
                    if loc:#This validation only matters if we're not adding a new location
                        loc = loc[0]
                        if form.cleaned_data['DELETE']:
                            # Clear the Foreign Key Association
                            loc.strain = None
                            loc.save()
                            # Prevent Deletion
                            form.data[form.add_prefix('DELETE')] = 'false'
            except AttributeError:
                # annoyingly, if a subform is invalid Django explicity 
                # raises an AttributeError for cleaned_data
                pass

class LocationInline(admin.TabularInline):
    formset = LocationInlineFormset
    model = Location
    extra = 3
    max_num = 3
    can_delete = True

class StrainAdmin(MyAdmin):
    inlines = [LocationInline] 
```

# database - microsoft access 是学习真正的数据库管理的一个很好的垫脚石吗？

> ID：12608051
> 
> 赞同：-2
> 
> 时间：2012-09-26T18:24:11.537
> 
> 标签：database, ms-access, relational-database

我姐姐将开始上课，试图学习如何成为一名网络开发人员。她给我发了几所候选学校的班级名单，让我帮助指导她的决定。

其中一所学校提到 Microsoft Access 作为数据库课程中使用的主要工具，包括关系代数、SQL、数据库管理等。

我想知道 - 如果您学习 Microsoft Access，您以后是否能够轻松掌握另一种更受社会认可的数据库技术，例如 MySQL、Postgres 等？我对 Access 的体验并不愉快，而且在我上学期间玩它时，我发现了很多不好的做法。

基本上：Microsoft Access 是否使用符合标准的 SQL？您是否通过了解 Microsoft Access 的工作原理来学习其他数据库的必要技能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:48:30.713

MS-Access 是一个很好的沙坑，用于构建数据库和学习数据库的基本（初级）设计和结构。

MS-Access 的 SQL 实现几乎等同于 SQL1.x 语法。Access 是一个很棒的应用程序，用于学习查询、表和视图之间的交互。

确保她不习惯 Access 中可用的宏，因为它们的结构不会转换为主流 RDBMS。最好的等价物是专业 RDBMS 中的存储过程 (SProcs)，但 SProcs 的实用性和功能性是任何 Access 宏所能提供的一千倍。

让她使用 MS-Access 来了解 DBMS 的外观和感觉，但是一旦她对数据库设计感到满意，就让她迁移到 MS-SQL Express 或 MySQL 或两者兼而有之。SQL-Express 与真实的东西一样接近，无需支付 MS-SQL Std 的费用。MySQL 适用于 LAMP Web 基础设施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:49:58.077

访问 我会说比“实际”数据库软件更多的特性。Access 可以很容易地用作 SQL 数据库的前端，这是程序的一部分。

假设该类正在使用 Access 中内置的数据库。然后让我们将其分解为数据库的各个部分：

表

Access 使用简化的变量模型。基本上，您可以拥有典型的数字、文本字段等。例如，您可以像使用 SQL 一样修复小数位数。不过，您不会看到像 varchar(x) 这样的变量。您只需选择一个文本字段并将字段大小设置为“8”等。但是，就像一个真实的数据库一样，它会强制执行您设置的限制。Access 将支持 OLE 对象，但它很快就会变得一团糟。Access 数据库只是像文件一样存储，并且可以变得非常大并且迅速膨胀。因此，将它用于存储地址簿、文本数据库或通过代码链接到外部资源之外……您必须小心存储了多少信息，因为文件太大而无法使用。

查询

Access 沿着 SQL 线实现了很多东西。我不知道它是否符合 SQL。我相信您可以将您的 Access 数据库导出到 SQL 可以使用的东西中。在代码中，您使用 DAO、ADO、ADODB 和 Jet 或 Ace 引擎与 SQL 数据库进行交互。（有些已经过时，但在较旧的数据库上工作）但是，一旦您开始进行查询，许多事情都是相似的。典型的命令——select、from、where、order、group、have 等都是正常的，并且可以像您在其他地方看到的那样工作。当您开始使用计算表达式、复杂的连接（访问没有实现某些类型的连接但您会看到可以说是最重要的——内部连接/联合）时，会发生特殊的事情。例如，在 Access 中 distinct 的行为与其他数据库体系结构不同。您使用聚合函数 (sum/max/min/avg) 的方式也受到限制。从本质上讲，Access 适用于很多任务，但它非常挑剔，您必须编写查询才能解决这些您不必在真实数据库中编写的问题。

表格/报告

我认为 Access 的关键特性是它对非计算机专家的用户来说更加平易近人。您可以轻松浏览表格并拖放以创建表单和报告。因此，即使它在我的书中不是正式的数据库，它也可能非常有用......特别是如果很少有人会使用数据库并且他们更喜欢易用性/轻型设置而不是更“企业级”的解决方案。您不需要水晶报表或某人编写大量代码以使 Access 数据库提供结果并允许用户根据需要添加数据。

为什么 Access 不是数据库

它并不意味着处理大量并发连接。一个人可以持有锁并且没有任何协商 - 如果一个人正在编辑数据库的某些部分，它将锁定所有其他用户或至少将他们限制为只读。此外，如果您尝试对大量用户使用 Access 或通过代码向其发送许多请求，它会在大约 10-20 个并发连接后中断。它只是不适用于 oracle 和 mySQL 的构建对象。如果您愿意，它适用于“普通”计算机用户，但程序员可以利用许多有用的东西来改善用户体验。

那么这对您了解更多信息有用吗？

我不明白这会是一件坏事。在这个环境中，您可以更轻松地查看关系代数并了解如何适当地组织数据。这与教授 Java、C++ 或 Python 的大学以及为什么每个都有其优点的大学类似。由于您可以立即从 Access 转移到作为访问 SQL 数据库的前端（加载表的链接）的 Access，我相信您可以用它教一门非常好的课程。

# javascript - jQuery UI 可拖动不能放在可排序的第一个位置

> ID：12608053
> 
> 赞同：1
> 
> 时间：2012-09-26T18:24:18.680
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

我有一个可拖动的元素，我想将它拖入可排序的元素中。但是，我不能直接将可拖动对象拖到可排序列表中的第一个位置。只有当我超出第一个元素然后向上返回到第一个元素之前的位置时才有可能。

看看这个小提琴：http: [//jsfiddle.net/Nh75P/53/](http://jsfiddle.net/Nh75P/53/)

请尝试将可拖动对象直接（一次）移动到“Sortable 1”上方的位置。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:27:42.157

这是可排序的问题。显然，在输入时，条目的偏移量没有被计算在内。[在此处](http://bugs.jqueryui.com/)提交有关此问题的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-18T16:43:01.033

[感谢https://forum.jquery.com/topic/jquery-ui-1-8rc1-sortable-list-doesn-t-allow-drop-at-first-and-last-position-depending-](https://forum.jquery.com/topic/jquery-ui-1-8rc1-sortable-list-doesn-t-allow-drop-at-first-and-last-position-depending-where-the-mouse-gets-clicked-to-drag-on)上的“Nick Melville” [where-the-mouse-gets-clicked-to-drag-on](https://forum.jquery.com/topic/jquery-ui-1-8rc1-sortable-list-doesn-t-allow-drop-at-first-and-last-position-depending-where-the-mouse-gets-clicked-to-drag-on)以获得他的答案：

> 由于这仍然是一个高搜索结果页面......将容差更改为“指针”应该可以为您解决此问题：
> 
> [http://api.jqueryui.com/sortable/#option-tolerance](http://api.jqueryui.com/sortable/#option-tolerance)

# windows-mobile - 如何在 ActiveSync 支架设备上启动/停止应用程序

> ID：12608056
> 
> 赞同：1
> 
> 时间：2012-09-26T18:24:32.160
> 
> 标签：windows-mobile, activesync

是否可以从桌面程序启动或停止应用程序或向通过 USB 底座连接到 PC 的底座 Windows Mobile 设备发送命令？

场景：我想自动化一个涉及关闭手持设备（设计不佳的应用程序）的过程，以便我可以备份和删除其运行时锁定的一些文件，更改一些内容，然后在自动重新创建一些文件的手持设备。

对此的任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:37:20.437

你可以使用 dll OpenNetCF.Desktop.Communication 来执行这个过程，但我不确定这个库是否有能力关闭应用程序，看看网站： [http ://rapi.codeplex.com/](http://rapi.codeplex.com/)

我快速检查，并没有找到完成函数的方法，但是 CreateProcess 方法有一个输出参数 ProcessInfo 并且这个结构有一个句柄，您可以验证使用此信息您可以通过 CloseHandle 终止应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:06:23.700

您可以使用[RAPI](http://msdn.microsoft.com/en-us/library/aa920177.aspx)从 Windows 桌面应用程序操作连接的设备。有一个可用于托管开发的[托管 C# 包装器。](http://rapi2.codeplex.com/)您可以使用[C API](http://msdn.microsoft.com/en-us/library/aa921197.aspx)或 COM 接口在原生世界中对 RAPI 进行编程。

要使用 C API 在设备上启动程序，您需要调用 CeCreateProcess。要从桌面终止进程，您有两种选择：1) 编写 RAPI dll，或 2) 编写一个简单的移动应用程序来关闭进程并通过 CeCreateProcess 调用该程序。有关更多信息，请参阅[此答案](https://stackoverflow.com/questions/3378509/killing-a-wince-device-process-from-a-desktop-app)。

# ruby-on-rails - 使用 RMagick 和 Carrierwave 为海报添加文本。未初始化的常量 PhotoUploader::Draw

> ID：12608057
> 
> 赞同：0
> 
> 时间：2012-09-26T18:24:37.773
> 
> 标签：ruby-on-rails, rubygems, carrierwave, rmagick

我正在尝试将图像处理作为向我的应用程序添加一些文本的过程。我正在寻找的效果是：保存后向图像添加文本。我在这里处理的问题是我收到错误：未初始化的常量 PhotoUploader::Draw。

# photo_uploader.rb

```
process :poster

def poster
 manipulate! do |source|
  txt = Draw.new
  txt.family
  txt.pointsize = 12
  txt.gravity = Magick::SouthGravity
  txt.stroke = "#000000"
  title = Demot.last.title
  source = source.resize_to_fill(400, 400).border(10, 10, "black")
  source.annotate(txt, 0, 0, 0, 40, title)

end 
```

结尾

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T04:29:59.937

改成

```
txt = Magick::Draw.new 
```

# linux - perl fork() exec() ，子进程变得狂野

> ID：12608058
> 
> 赞同：3
> 
> 时间：2012-09-26T18:24:39.567
> 
> 标签：linux, perl, process, exec, fork

我正在使用`Linux`并且`.sh`在`tcsh`.

我做了一个非常基本的[fork](http://perldoc.perl.org/functions/fork.html)和[exec](http://perldoc.perl.org/functions/exec.html)，但我需要帮助来实施安全措施。

`.sh`基本上我的 perl 脚本在子进程中调用一个脚本。但是当我`Ctrl+c`杀死父母时，信号被孩子忽略了。

1）我如何也捕获`SIGINT`子进程？

2) 运行.sh 脚本的子进程仍然STDOUT 到xterm 的屏幕。我怎样才能删除这个？我正在考虑在后台运行脚本

```
 exec("shell.sh args &"); 
```

但是还没有测试，因为我需要弄清楚如何让孩子先不发狂。

3) 父进程（perl 脚本）不等待子进程（.sh 脚本）。所以我读过很多关于孩子变成**僵尸**的故事？？？脚本完成后会发生吗？我将如何阻止它？

```
$pid = fork();
if($pid < 0){
    print "Failed to fork process... Exiting";
    exit(-1);
    }
elsif ($pid ==0) {
    #child process
    exec("shell.sh args");
    exit(1);
    }
else { #execute rest of parent} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T18:39:06.380

> 但是当我按 ctrl+c 杀死父母时，信号会被孩子忽略。

信号被发送给父母和孩子两个。

```
$ perl -E'
   if (my $pid = fork()) {
      local $SIG{INT} = sub { say "Parent got SIGINT" };
      sleep;
      waitpid($pid, 0);
   } else {
      local $SIG{INT} = sub { say "Child got SIGINT" };
      sleep;
   }
'
^CParent got SIGINT
Child got SIGINT 
```

如果那个孩子忽略它，那是因为它开始了一个新会话，或者因为它明确地忽略了它。

> 运行 .sh 脚本的子进程仍然 STDOUT 到 xterm 的屏幕。我怎样才能删除这个？

在调用之前在孩子中执行以下操作`exec`：

```
open(STDOUT, '>', '/dev/null');
open(STDERR, '>', '/dev/null'); 
```

实际上，我会用来[`open3`](http://search.cpan.org/perldoc?IPC::Open3)进行一些错误检查。

```
open(local *CHILD_STDIN,  '<', '/dev/null') or die $!;
open(local *CHILD_STDOUT, '>', '/dev/null') or die $!;
my $pid = open3(
   '<&CHILD_STDIN',
   '>&CHILD_STDOUT',
   '>&CHILD_STDOUT',
   'shell.sh', 'args',
); 
```

> 父进程（perl 脚本）不会等待子进程（.sh 脚本）。所以我读过很多关于孩子变成僵尸的故事？？？

当父母退出时，孩子会自动收割，或者如果他们在父母退出后退出。

```
$ perl -e'
   for (1..3) {
      exec(perl => (-e => 1)) if !fork;
   }
   sleep 1;
   system("ps");
' ; ps
  PID TTY          TIME CMD
26683 pts/13   00:00:00 bash
26775 pts/13   00:00:00 perl
26776 pts/13   00:00:00 perl <defunct>       <-- zombie
26777 pts/13   00:00:00 perl <defunct>       <-- zombie
26778 pts/13   00:00:00 perl <defunct>       <-- zombie
26779 pts/13   00:00:00 ps
  PID TTY          TIME CMD
26683 pts/13   00:00:00 bash
26780 pts/13   00:00:00 ps
                                             <-- all gone 
```

如果父母先于孩子退出，则没有问题。

如果父母在孩子离开后不久就退出了，那没有问题。

如果父母在孩子离开后很长时间才离开，你会想要收获他们。您可以使用`wait`or `waitpid`（可能来自`SIGCHLD`处理程序）来执行此操作，或者您可以使用`$SIG{CHLD} = 'IGNORE';`. 见[perlipc](http://perldoc.perl.org/perlipc.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:29:33.027

在父线程中使用 waitpid：http: [//perldoc.perl.org/functions/waitpid.html](http://perldoc.perl.org/functions/waitpid.html)

```
waitpid($pid, 0); 
```

您还可以将 exec 的标准输出重定向到 /dev/null：

```
exec("shell.sh args > /dev/null"); 
```

# ruby-on-rails - 不支持 Rails 和 HTML5 视频 MimeType

> ID：12608059
> 
> 赞同：1
> 
> 时间：2012-09-26T18:24:40.100
> 
> 标签：ruby-on-rails, html, video, mime

我正在开发一个简单的 Rails 应用程序，我想在其中播放上传到应用程序的视频。我上传的视频是 h264/MP4 视频，我已经验证了编解码器。它上传得很好，如果我转到 URL，我可以在浏览器中观看视频。

但是，当尝试使用 HTML5 显示视频时，在我得到的页面上

`Video format or MIME type is not supported`

在我的`config/initializers/mime_types.rb`文件中，我尝试了以下...

```
Mime::Type.register "video/mp4", :mp4
MIME::Types.add(MIME::Type.from_array("video/mp4", %(mp4))) 
```

取自这个问题：[Rails: MIME type issues with .m4v files](https://stackoverflow.com/questions/2414474/rails-mime-type-issues-with-m4v-files)

而且我也试过...

```
Rack::Mime::MIME_TYPES.merge!({
  ".ogg"     => "application/ogg",
  ".ogx"     => "application/ogg",
  ".ogv"     => "video/ogg",
  ".oga"     => "audio/ogg",
  ".mp4"     => "video/mp4",
  ".m4v"     => "video/mp4",
  ".mp3"     => "audio/mpeg",
  ".m4a"     => "audio/mpeg"
}) 
```

在尝试了那些不同的 MIME 初始化程序后，我记得重新启动我的服务器。

但似乎两者都不起作用。有任何想法吗？

编辑：我跑步时也应该注意

`curl -I http://localhost:3000/videos/SAMPLE.mp4 | grep Content-Type`

我回来了“内容类型：视频/mp4”。

编辑2：答案发布在下面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:55:49.833

事实证明，我在代码方面发布的所有内容都很好。这只是一个浏览器兼容性问题（Firefox 上的 MP4）......好吧，希望有人会发现我的不幸有用！

# jakarta-ee - 将页面重定向到带有参数的 struts 动作动作

> ID：12608061
> 
> 赞同：0
> 
> 时间：2012-09-26T18:24:45.683
> 
> 标签：jakarta-ee, struts

如何使用子路径将页面重定向到带有参数的 struts 1 操作？

示例：myserver.com/subpath 重定向 ti myserver.com/myaction.do?method=init

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:29:42.683

你可以试试这个。使用此短代码在子路径目录中创建 index.jsp 文件。

```
<jsp:forward page="myserver.com/myaction.do">
  <jsp:param name="method" value="init"/> 
</jsp:forward> 
```

或者

```
<% response.sendRedirect("myserver.com/myaction.do?method=init"); %> 
```

# http-status-code-403 - 我从来没有见过这样的事情？每次刷新后页面元素上的随机 403？

> ID：12608069
> 
> 赞同：0
> 
> 时间：2012-09-26T18:25:21.567
> 
> 标签：http-status-code-403

有谁知道是什么原因造成的？这会是服务器上的东西吗？

[http://www.theprovincecontests.com/](http://www.theprovincecontests.com/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:28:22.407

很可能在反向代理/负载平衡器后面有不止一台服务器，并且（至少）一个配置错误。

# wcf - 并发用户的 WCF 限制

> ID：12608083
> 
> 赞同：0
> 
> 时间：2012-09-26T18:26:08.783
> 
> 标签：wcf

我想知道是否有任何用户数量限制。我的意思是除了内存限制之外，可以同时使用 WCF 服务的用户是否有任何上限？我做了一些研究，但由于我不太了解术语，所以我找不到任何东西：/而且我不能确定这种限制不存在，只是因为我找不到它:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:35:18.903

为了防止服务过载，您可以指定可以进行多少次调用以及可以创建多少个会话或实例。您可以通过配置 ServiceThrottlingBehavior 设置来做到这一点。我们也可以通过在 app.config 中配置 serviceThrottling 元素来做到这一点。可以设置以下限制属性。

*   **MaxConcurrentCalls**：服务处理的最大调用数。
*   **MaxConcurrentInstances**：在服务上执行的服务实例对象的最大数量。
*   **MaxConcurrentSessions**：服务处理的最大会话数。

这是一个示例配置：

```
<behaviors>
      <serviceBehaviors>
        <behavior  name="Throttled">
          <serviceThrottling 
            maxConcurrentCalls="1" 
            maxConcurrentSessions="1" 
            maxConcurrentInstances="1"
          />
          <serviceMetadata 
            httpGetEnabled="true" 
            httpGetUrl=""
          />
        </behavior>
      </serviceBehaviors> 
```

根据您的框架版本，所有这些设置的默认值都不相同（[链接](http://blogs.msdn.com/b/wenlong/archive/2009/07/26/wcf-4-higher-default-throttling-settings-for-wcf-services.aspx)）。

# javascript - Instagram 获取个人资料数据

> ID：12608084
> 
> 赞同：1
> 
> 时间：2012-09-26T18:26:09.517
> 
> 标签：javascript, jquery, instagram

是否可以使用 jQuery 或 javascript 来获取用户在 instagram 上的关注者数量，然后在 div 元素中显示该数字？我找到了几个 PHP 答案，但我不能使用 PHP。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:41:17.830

Instagram 支持 RESTfull 网络服务。您为 PHP 找到的解决方案也可以在 jquery 中使用。您只需要`jsonp`调用服务器。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:36:51.100

[尝试使用 jQuery 访问 Instagram API](https://stackoverflow.com/questions/11712106/trying-to-access-instagram-api-using-jquery)

使用类似的东西。使用生成的 JSON 数据将关注者编号打印到 div 中。

```
$(document).ready(function(e) {
        $('#fetch_followers').click(function(e) {
            var $url = 'https://api.instagram.com/v1/users/{user-id}/?access_token={access-token}&count=100';
            var $access_token = '{access-token}';
                $.ajax({
                    method: "GET",
                    url: $url,
                    dataType: "jsonp",
                    jsonp : "callback",
                    success: function(data) {
                       $('#followers').append(data.counts.followed_by);
                    }
                });
        });
    }); 
```

代码很粗糙，未经测试，但沿着这些思路可以工作。

# css - 从许多 CSS 选择器中删除项目

> ID：12608085
> 
> 赞同：1
> 
> 时间：2012-09-26T18:26:11.850
> 
> 标签：css

我有一个模糊的记忆，但在上面找不到任何关于能够使用关键字“with”或“like”来执行类似以下操作的内容。

```
using .class1{
  #a1, #a4{color:#ffffff;}
  #a2{color:#dddddd;}
  #a3{color:#eeeeee;}
} 
```

而不必写：

```
.class1 #a1, .class #a4{color:#ffffff;}
.class2 #a2{color:#dddddd;}
.class3 #a3{color:#eeeeee;} 
```

问题是我在页面中包含了一些 html/css 并且 css 搞砸了页面的其余部分。所以，我想修改css，让它只影响一小部分，而不是整个页面。我在大量页面上以编程方式执行所有这些操作，因此将所有新 css 包装在“使用 .class1”之类的东西中而不是解析 css 并将 .class1 添加到开头会容易得多每个选择器的。

有任何想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:37:12.617

[除非您使用诸如SASS](http://sass-lang.com/)之类的CSS 预处理器，否则无法实现您想要的。以下是使用 SASS 完成后的外观：

```
.class1 {
  #a1, #a4 {
      color: #ffffff;
  }
  #a2 {
      color: #dddddd;
  }
  #a3 {
      color: #eeeeee;
   }
} 
```

参考：[小链接](http://sass-lang.com/tutorial.html#nesting)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:29:44.107

将包含的 HTML 块包装在其自己的 ID 中，例如`#overRideCSS`

然后，如果您需要覆盖特定样式，可以在选择器前面加上该 ID：

```
#overRideCSS <other selectors> {etc...} 
```

# cakephp - 使用 cakephp 路由器的动态 html 重定向

> ID：12608086
> 
> 赞同：0
> 
> 时间：2012-09-26T18:26:25.100
> 
> 标签：cakephp, redirect, routes

使用路由器的动态 html 重定向

一开始我没有分类，我所有的页面都是root

例子：

```
 http://domain/somepage 
```

这很棒，但是随着这些年来我的内容不断增长，我需要对我的内容进行分类

所以我添加了一些路线，见下文 //routes.php

```
Router::connect(

"/:category/:slug",
array('controller' => 'controllername', 'action' => 'view'),
       array( 

            'name'=>'[-A-Z0-9]+', 

           'pass' => array('category','slug')

          ) 

        ); 
```

//结束这很好，完成了我需要做的事情，但是搜索引擎有一个问题。我需要为我的所有链接写 301，我有超过 8K 的页面。

解决方案 cakesphp 的 Router::redirect

我现在遇到的问题是我无法弄清楚如何重定向我的旧链接。例如，我可以将所有链接重定向到一个类别，但这不会削减它。我需要将所有链接重定向到新位置。

我正在尝试使用 routes.php 路由器 :: 重定向

如果我这样做，我的代码会重定向到类别，而不是 slug

```
 Router::redirect(
'/:slug/*',
  array(
  'pass' => array('category/:slug')) 
```

结果

```
 http://domain/category/ 
```

我怎样才能让蛋糕重定向到

```
 http://domain/category/slug  ?

  instead of  http://domain/category/ 
```

我的所有链接都指向根目录
`http://domain/somepage http://domain/anotherpage http://domain/ect`

我需要添加类别

如

```
`
     http://domain.com/phones/samsung.php
     http://domain.com/books/cakephp.php 
```

`

我不想使用 .htaccees 文件，因为

我的软管提供将我限制为 100 次重定向

我有超过 8K 的链接需要重定向

我正在尝试在 routes.php 文件中使用 cakes 路由器 ::redirect 功能。

下面的代码仅适用于一个类别，它不会像我想要的那样动态地执行它。我尝试创建一个路由器类，可以按照您的建议为我执行此操作，但老实说，我不是 cakephp 专家。它易于学习并且是一个很棒的框架，我只是还不知道如何制作自己的类或组件。我只是还没有找到好的文档来做到这一点。

```
 //routes.php

  $move='category/'. stripslashes_deep ($_SERVER['REQUEST_URI']);             Router::redirect('/:slug/*',$move, array('status' => 302)); code 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:11:52.970

您最好的选择是使用自定义路由类。

自定义路由扩展了 CakeRoute 类，并允许您返回/添加/修改传递过来的参数。

[CakePHP 自定义路由类 - 如何传递参数？](https://stackoverflow.com/questions/8089273/cakephp-custom-route-classes-how-to-pass-arguments)

# php - 用标签内的一些单词大写单词

> ID：12608088
> 
> 赞同：0
> 
> 时间：2012-09-26T18:26:32.830
> 
> 标签：php

这是我尝试过的：

```
ucwords(strtolower('<span class="lsres">retro</span> VIRUS'));

```

我想得到：

```
复古病毒

```

我正进入（状态：

```
复古病毒

```

我不能做任何类似的事情：

```
sprintf(ucwords(strtolower('%s VIRUS')), ucwords(strtolower('retro')));

```

由于“复古”部分完全随机地发生在单词/句子的开头、中间或结尾。

当然，“复古”只是一个示例，在不同的情况下，它可以随机替换为其他词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:55:54.513

快速浏览一下 PHP 的文档[就提出了这一点](http://php.net/manual/de/function.mb-convert-case.php)。

经过简短的测试后，我可以确认，这条线对您的示例有用（不过，我不知道您可能遇到的任何其他具体情况）：

```
$str = '<span class="lsres">retro</span> VIRUS';
echo mb_convert_case($str, MB_CASE_TITLE, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:14:48.713

你得到`retro Virus`是因为在 retro( `>retro<`) 之前和之后没有空格。在 retro 之前添加一个空格或使用`ucfirst`功能或您在 retro 和 VIRUS 上单独使用过的相同功能。像这样做：

```
<span class="lsres"><?php echo ucfirst('retro');?></span> <?php echo ucfirst('VIRUS');?> 
```

或者

```
<span class="lsres"><?php echo ucwords(strtolower('retro'));?></span> <?php echo ucwords(strtolower('VIRUS'));?> 
```

# javascript - Ajax 成功 if 语句

> ID：12608089
> 
> 赞同：0
> 
> 时间：2012-09-26T18:26:33.813
> 
> 标签：javascript, jquery, ajax

当用户单击删除按钮时，代码会向服务器发送一个请求，首先将该用户从数据库中删除，然后从屏幕上的表列表中删除。

我的问题是，ajax 成功中的 if else 语句确实返回了我想要的。

我无法将此代码添加到提琴手，因为它链接到无法在线访问的数据库。

```
$(nTd).children('a').click(function(e) {
    e.preventDefault();
    var that = $(this);
    if(that.hasClass('icon-i-remove')){
       $.ajax({
          url: $(this).attr('href'),
          type: $(this).attr('method'),
          dataType: 'json',
          success: function (data) {
            //PROBLEM HERE **********
            if(data.success == 'true' ){
               alert('true');
            } else {
               alert('false')
            };
       ;}
   }); 
```

所以，2个主要问题。if 语句没有正确运行。即使它返回true，服务器也会跳转到else而不关心它。

第二个问题就是这个。当用户单击删除按钮时，代码应首先检查用户是否已在数据库中删除。如果我从数据库中获得了 ok，那么我可以在不刷新页面的情况下从表列表中删除该行，否则我应该显示错误消息（错误返回）

就我而言，当我单击删除时，代码会向服务器发送一个请求，而不关心结果是什么。

在执行客户端删除之前，我需要等待代码。我需要知道该用户是否已从数据库中删除。我发现很难管理 if 语句。似乎它没有从后端查看结果。

无论真假，它都会跳过任何一种方式。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:28:28.653

它真的回来了`'true'`吗？或者它正在回归`true`？两种不同的东西

**更新**

```
$(nTd).children('a').click(function(e) {
    e.preventDefault();
    var that = $(this);
    if(that.hasClass('icon-i-remove')){
       $.ajax({
          url: $(this).attr('href'),
          type: $(this).attr('method'),
          dataType: 'json',
          success: function (data) {
            //PROBLEM HERE **********
            if(data.success == true ){   <-- Change to true (remove quotes)
               alert('true');
            } else {
               alert('false')
            };
       ;}
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:30:29.933

如果您的 ajax 成功回调正在执行.. 这意味着服务器端操作已成功完成。

如果不是，则服务器不应发回 200 将被解释为成功

# java - 在外部阻止 Struts 操作，但使其内部可访问？

> ID：12608090
> 
> 赞同：1
> 
> 时间：2012-09-26T18:26:34.643
> 
> 标签：java, struts2, struts

我正在使用 struts 2 并且我有一个页面通过以下 URL 显示我的网站版本信息：

```
https://www.mysite.com/info 
```

有没有办法阻止这个 /info 页面对外公开并使其只能在我的办公室内部网络中访问？

如果是这样，如何实现？

注意：我使用的是 Tomcat 服务器。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:32:44.120

`emote Address Filter`根据文档，在tomcat中有一个称为R的过滤器

> 远程地址过滤器允许您将提交此请求的客户端的 IP 地址与一个或多个正则表达式进行比较，并允许请求继续或拒绝处理来自此客户端的请求。远程地址过滤器可以与任何 Catalina 容器（引擎、主机或上下文）相关联，并且必须接受提交给该容器进行处理的任何请求，然后才能将其传递。
> 
> 正则表达式的语法与“标准”通配符匹配的语法不同。Tomcat 使用 java.util.regex 包。有关支持的表达式的详细信息，请参阅 Java 文档。

有关更多信息，请阅读 tomcat 文档[Remote_Address_Filter](http://tomcat.apache.org/tomcat-6.0-doc/config/valve.html#Remote_Address_Filter)

# c - C Windows中的简单链表

> ID：12608095
> 
> 赞同：0
> 
> 时间：2012-09-26T18:26:48.990
> 
> 标签：c, windows, visual-studio, linked-list

自从我用 C 编码以来已经很久了，现在我什至无法创建链表 :(`NodeType`结构可能有什么问题？我什至尝试[了这个](http://www.macs.hw.ac.uk/~rjp/Coursewww/Cwww/linklist.html)例子，但我仍然得到与此类似的错误。

我需要创建可以在 linux 和 windows 上运行的链表（无需大量修改）。

我编译使用：`cl myFile.c`命令。

错误信息：

> Microsoft (R) 32 位 C/C++ 优化编译器版本 16.00.40219.01，适用于 80x86 版权所有 (C) Microsoft Corporation。版权所有。
> 
> unlock.c unlock.c(46) : error C2275: 'Node' : 非法使用这种类型作为表达式 unlock.c(17) : 见'Node'声明 unlock.c(46) : error C2146: 语法错误： 失踪 ';' 在标识符“a”之前 unlock.c(46)：错误 C2065：“a”：未声明的标识符

源代码：

```
#include <stdio.h>
#include <windows.h>
#include<stdlib.h>

typedef enum {STABLE, RPUSH, LPUSH} STATUS_TYPE;

typedef struct NodeType
{
    struct NodeType* _left;
    struct NodeType* _right;
    int _value;
}Node;

typedef struct AnchorType
{
    struct Node* _mostLeft;
    struct Node* _mostRight;
    STATUS_TYPE _status;
} Anchor;

Node CreateNode(int data)
{
    Node newNode;
    newNode._value = data;
    newNode._left = NULL;
    newNode._right = NULL;

    return newNode;
}

int main()
{
    Anchor anchor;
    anchor._mostLeft = NULL;
    anchor._mostRight = NULL;
    anchor._status = STABLE;

    Node a; //<-- What might be wrong ?

    return 0;
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:42:34.937

微软专注于 C++ 编译器，他们的 C 支持已经过时了几十年。

Microsoft 编译器不支持的较新 C 标准的功能之一是能够在函数中间声明变量。

将声明移到顶部，一切都会好的：

```
int main()
{
    Anchor anchor;
    Node a; // ok here
    anchor._mostLeft = NULL;
    anchor._mostRight = NULL;
    anchor._status = STABLE;

    //Node a; but not here

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:00:05.543

问题是您的`struct`ure 标签为`NodeType`，但`typedef`标签为`Node`。两者都应该指同一件事。如：

```
typedef struct Node
{ 
    struct Node* _left; 
    struct Node* _right; 
    int _value; 
} Node; 
```

这将创建一个`typedef`名为.`Node``struct Node`

在 Microsoft 编译器目标代码中，您通常会看到：

```
typedef struct Node
{ 
    struct Node* _left; 
    struct Node* _right; 
    int _value; 
} tagNode;

typedef struct Anchor
{ 
    struct Node* _mostLeft; 
    struct Node* _mostRight; 
    STATUS_TYPE _status; 
} tagAnchor; 
```

`tagNode`永远不会在 Microsoft 编译器代码中使用，只是`Node`. Microsoft 编译器会对此非常满意，阅读您的代码的人会知道您指的是结构。

有关更多详细信息，包括 C 和 C++ 命名类型定义和标签的历史，请参阅发布在以下位置的答案：[C++ 中“struct”和“typedef struct”的区别？](https://stackoverflow.com/questions/612328/difference-between-struct-and-typedef-struct-in-c)

# asp.net-mvc - 为 MVC3 @HtmlDropDownListFor 分配默认值

> ID：12608101
> 
> 赞同：1
> 
> 时间：2012-09-26T18:27:02.797
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html.dropdownlistfor

我有以下用户配置文件前缀代码：

```
@Html.DropDownListFor(model => model.UserProfile.Profile.Prefix.ID, Model.PrefixList.Select(x => new SelectListItem { Text = x.Name, Value = x.ID.Value.ToString()}).ToList() }) 
```

如果此人的姓名中有前缀，则此方法非常有用。然而，并不是每个人都这样做。

数据库通过这样的 IEnumerable 列表引入选定的前缀：

```
public class ProfileViewModel
    {
        public User UserProfile { get; set; }
        public IEnumerable<USStates> States { get; set; }
        public IEnumerable<Campus> CampusLocations { get; set; }
        public IEnumerable<Prefix> PrefixList { get; set; }
        public IEnumerable<Suffix> SuffixList { get; set; }
        public IEnumerable<MaritalStatus> MaritalStatusList { get; set; }
    } 
```

如何在不破坏预选列表功能的情况下设置默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:07:12.610

您需要使用重载 : `SelectList Constructor (IEnumerable, String, String, Object)`。

在你的情况下，那将是：

`@Html.DropDownListFor(model => model.UserProfile.Profile.Prefix.ID, Model.PrefixList.Select(x => new SelectListItem { Text = x.Name, Value = x.ID.Value.ToString()}).ToList(), "-default value-" })`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:34:35.037

我想你像下面这样绑定你的下拉列表

```
@Html.DropDownListFor(x => x.CountryId, new SelectList(Model.Countries, "ID", "Name"), "-Select Country-", new { @id = "ddlcountry" }) 
```

我想这会帮助你..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:22:35.277

使用[这个](http://msdn.microsoft.com/en-us/library/dd492553.aspx)重载：

```
public SelectList(IEnumerable items, string dataValueField, string dataTextField, object selectedValue); 
```

最后一个参数是选定值。您可以重写类似这样的方法：

```
@Html.DropDownListFor(model => model.UserProfile.Profile.Prefix.ID, Model.PrefixList.Select(x => new SelectListItem { Text = x.Name, Value = x.ID.Value.ToString()}).ToList(), "--- Default Value---" }) 
```

希望这个法案对你有所帮助。

# java - ArrayList 中的子类 方法调用问题

> ID：12608104
> 
> 赞同：0
> 
> 时间：2012-09-26T18:27:23.530
> 
> 标签：java

我有一个实体数组列表。实体类有

```
public void update(int delta, Level level, ArrayList<Entity> entities){
    //do stuff
} 
```

实体的子类 Player，具有覆盖它的函数

```
public void update(int delta, Level level, ArrayList<Entity> entities){
    //do player specific stuff
    super.update(delta, level, entities);
} 
```

当我从实体数组列表中调用播放器对象更新函数时，如下所示：

```
for(Entity entity : entities)            //contains an object of Player
    entity.update(delta, level, entities); 
```

它直接调用实体函数并且玩家特定的东西不会发生，但是如果我这样称呼它：

```
((Player)entities.get(0)).update(delta, level, entities); 
```

确实如此。我以为我理解了这个问题，但我尝试了以下代码

```
private static class Foo{
    public void print(){
        System.out.println("I AM FOO");
    }
}
private static class Bar extends Foo{
    public void print(){
        System.out.println("i am bar");
        super.print();
    }
}
public static void main(String[] args){
    ArrayList<Foo> foos = new ArrayList<Foo>();
    foos.add(new Foo());
    foos.add(new Bar());
    for(Foo leFoo: foos)
        leFoo.print();
} 
```

当对象是 bar 时，它实际上从 Bar 调用 print 函数。在这一点上我有点迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:09:16.627

由于您有多个 Level 类，因此您必须确保`Player.update()`方法签名引用正确的类（以便成功覆盖）：

```
public class Player {

  @Override
  public void update(int delta, game.level.Level level, ArrayList<Entity> entities) { ... }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:12:47.627

以下代码适用于我：

```
List<Entity> fooList = new ArrayList<Entity>();
fooList.add(new Entity());
fooList.add(new Player());
for (Entity entity : fooList) {
    entity.update(1, fooList);
}

private static class Entity {
    public void update(int delta, List<Entity> entities) {
        System.out.println("in Entity");
    }
}
private static class Player extends Entity {
    @Override
    public void update(int delta, List<Entity> entities) {
        System.out.println("in Player");
        super.update(delta, entities);
    }
} 
```

确保你需要一个`@Override`on`Player.update(...)`方法。可能是签名不匹配，因此您实际上并没有覆盖您认为的方法签名。

其他几条评论：

*   通常，当我们处理列表时，我们传递`List<?>`而不是实现`ArrayList<?>`。

*   如果您正在遍历实体列表*并将*其传递给方法调用，则需要确保更新方法*没有*更改列表，否则您将抛出`ConcurrentModificationException`.

# c# - 从类库注入设置？

> ID：12608109
> 
> 赞同：2
> 
> 时间：2012-09-26T18:27:49.270
> 
> 标签：c#, class-library

我正在构建一个类库，我想知道确保某些设置位于 app.config/webconfig 中的最佳方法是什么。

类库需要一个连接字符串和一个应用密钥。

我知道使用 nuget 您可以将设置注入到配置文件中，但我没有使用 nuget，所以想知道是否有人有任何想法，或者我是否必须尝试捕获并查看这些设置是否在配置文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:41:25.197

您可以选择不同类型的解决方案：

1.  你可以说，给你所需的信息，是用户的责任。所以您只需确保当用户创建您的对象的实例时，它会为您提供所需的信息。对于类库来说，这是一个不错的选择。你不想告诉谁会使用你的代码，如何管理他的设置。假设他有自己的方式来保存配置——为什么你必须绑定特定的配置类型（System.Configuration）。

2.  如果您坚持使用 app.config/web.config，您可以只使用一个用于您的程序集，而不使用应用程序主程序。你可以使用`ConfigurationManager.OpenExeConfiguration`. 要知道您的程序集从哪里运行，请使用`Assembly.GetExecutingAssembly().Location`. 这样，您可以打开自己的配置文件，并确保在文档中用户必须更新设置。

3.  您可以告诉他他必须在他的 app.config/web.config 中指定配置信息，如果您要查找的密钥不存在则抛出异常...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:34:24.010

试试这个

[http://ninjectconfigurer.codeplex.com/](http://ninjectconfigurer.codeplex.com/)

清楚阅读问题后，上面的链接将不起作用，但以下解决方案可能有效

无效或错误的设置实际上是编译时问题。您可以使用 msbuild 脚本来验证 app.config 文件是否具有强制设置。如果不是，则在编译时应引发错误。

要读取配置文件的内容，请使用 Xmlread msbuild 任务 - [在 MSBuild 任务中读取配置值](https://stackoverflow.com/questions/1983010/read-config-value-in-msbuild-task)

要在缺少设置时失败，请使用 Xmlread 任务的错误条件，如下所示（尽管对于不同的任务），并将此任务附加到您的项目文件中，如图所示 -

[缺少内容文件时如何使 MSBuild 失败](https://stackoverflow.com/questions/1027861/how-to-fail-an-msbuild-when-content-files-are-missing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:36:40.277

```
 //test settings...
        var a = System.Configuration.ConfigurationManager.AppSettings["myAppKey"];
        if (a == null)
        {
            Console.WriteLine("Application key does not exists!");
        }
        var b = System.Configuration.ConfigurationManager.ConnectionStrings["myConName"];
        if (b == null)
        {
            Console.WriteLine("Connection does not exists!");
        } 
```

# asp.net-mvc-4 - 何时在 MVC4 中设置 User.Identity.Name

> ID：12608110
> 
> 赞同：4
> 
> 时间：2012-09-26T18:27:49.660
> 
> 标签：asp.net-mvc-4

我正在尝试从使用 SimpleMembershipProvider 的 MVC4 中的 UserProfile 中获取自定义属性。我的表如下：

```
 public class UserProfile
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        public string UserName { get; set; }

        //Added to round out requirements for site user profile
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Site { get; set; }
    } 
```

当我尝试在登录时的会话变量中获取我感兴趣的用户配置文件项目 FirstName

```
public ActionResult Login(LoginModel model, string returnUrl)
        {
            if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
            {
                var context = new UsersContext();
                var curuser = context.UserProfiles.First(p => p.UserName == User.Identity.Name);
                Session["FName"] = curuser.FirstName;

                return RedirectToLocal(returnUrl);
            }

            // If we got this far, something failed, redisplay form
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
            return View(model);
        } 
```

我收到一个错误：序列不包含引用我的 var curuser 行的元素。如果我用 model.Username 替换 User.Identity.Name 它工作正常。我宁愿使用 User.Identity.Name 因为我可以在任何需要的地方使用它，或者我想。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T20:08:23.520

标题中有您问题的答案：

[什么时候设置 HttpContext.User.Identity？](https://stackoverflow.com/questions/6594734/when-is-httpcontext-user-identity-set)

希望这可以帮助

# javascript - 有没有办法使用 JavaScript 通过 Google Talk 发送消息？

> ID：12608112
> 
> 赞同：2
> 
> 时间：2012-09-26T18:27:51.487
> 
> 标签：javascript, html, google-api, google-talk

我有一个 HTML5/JS 应用程序，它将在仪表板车辆显示单元上运行。我遇到的问题是，当我在实际硬件上测试应用程序时，我无法访问 javascript 控制台。

为了解决这个问题，我开始在 PHP 中创建一个简单的远程日志服务器。这样我就可以修改我的应用程序中的日志功能以发布到这个站点并能够通过浏览器访问日志。

但后来我停下来想知道是否有更简单的解决方案……Google Talk！？

我想知道是否有人知道仅使用 javascript 通过 Google Talk 发送消息的简单方法？这对于我需要的东西来说已经绰绰有余了，而且能够看到日志直接进入我的手机会很棒。

我确实找到了这个页面： [https ://developers.google.com/talk/talk_developers_home](https://developers.google.com/talk/talk_developers_home)

但是，它似乎有点复杂，只提到了 Java 和 Python。我所需要的只是单向纯文本通信。真的，我希望有一些 API 可以将 HTTP 请求定向到。

有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:30:56.163

Gtalk 遵循 XMPP 标准，因此任何 XMPP JS 客户端都足以满足您的需求。

[这](http://zakhomuth.com/in-browser-pure-javascript-xmpp-client)是一个

[这](https://stackoverflow.com/questions/2495154/best-xmpp-client-php-javascript)是关于哪个最好的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:32:53.103

您的嵌入式应用程序是否在 Opera 上运行？如果是这样... [http://www.opera.com/dragonfly/documentation/remote/](http://www.opera.com/dragonfly/documentation/remote/)

# cxf - 如何使用蓝图配置 CXF JAX-WS 服务器

> ID：12608125
> 
> 赞同：2
> 
> 时间：2012-09-26T18:28:32.500
> 
> 标签：cxf, jax-ws, apache-karaf, apache-servicemix, blueprint-osgi

我想将一个简单的 CXF Jax-Ws 服务器部署到 ServiceMix。它只是一个同时具有服务接口和 impl 类的 OSGI 包。我需要将它部署到不同的 ServiceMix 服务器（版本 4.4.1），所以我需要更改每个服务器的 URL 地址。我想在 Karaf .cfg 文件中进行特定于服务器的配置，其余的在蓝图中进行。这不需要骆驼。我应该在蓝图中做什么？我找不到具体的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T13:23:48.473

我有一个[关于 Apache Karaf 中的 CXF 和蓝图的教程](http://liquid-reality.de/display/liquid/2011/12/22/Karaf+Tutorial+Part+4+-+CXF+Services+in+OSGi)。那应该为您提供一个完整的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:26:28.797

包括我用来在 Karaf 中使用 CXF 和 Blueprint 配置“一体式”JAX-WS Web 服务的蓝图配置。

我还包括了特定于服务器的属性（在 OSGi Config Admin 中定义）。Karaf`etc`目录中的 .cfg 文件将命名，并在带有符号`com.example.myservice.cfg`的蓝图文件中访问它们。`${}`我定义了一个名为的属性`schema-validation-enabled`（我们为生产环境切换此值）。

```
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jaxws="http://cxf.apache.org/blueprint/jaxws"
xmlns:cxf="http://cxf.apache.org/blueprint/core"
xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0"

xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
                    http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0 http://aries.apache.org/schemas/blueprint-cm/blueprint-cm-1.0.0.xsd
                    http://cxf.apache.org/blueprint/jaxws http://cxf.apache.org/schemas/blueprint/jaxws.xsd
                    http://cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd">

<cm:property-placeholder persistent-id="com.example.myservice">
    <cm:default-properties>
        <cm:property name="schema-validation-enabled" value="true"/>
    </cm:default-properties>
</cm:property-placeholder>

<!-- A normal CXF endpoint -->
<jaxws:endpoint id="sampleService" implementor="com.example.myservice.impl.MyServiceImpl"
    endpointName="s:MyServicePort" serviceName="s:MyService" address="/MyService"
    wsdlLocation="/wsdl/MyService.wsdl"
    xmlns:s="http://www.example.com/MyService/SVC/v1">
    <jaxws:properties>
        <entry key="schema-validation-enabled" value="${schema-validation-enabled}" />
    </jaxws:properties>
</jaxws:endpoint> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:10:57.060

我也遇到了同样的问题，这是因为服务*所属*的捆绑包的 OSGi 蓝图中缺少 bean 定义。我意识到即使 bean ref 定义存在于*使用*服务的捆绑包的 OSGi 蓝图中，也必须在它自己的捆绑蓝图中定义它。

# ruby-on-rails - 格式化 Rails 控制台输出

> ID：12608129
> 
> 赞同：2
> 
> 时间：2012-09-26T18:28:52.240
> 
> 标签：ruby-on-rails, ruby, console, formatting

我在 Rails 中使用控制台来检查一些对象，如下所示：

```
dc = DependencyCondition.new
# => #<DependencyCondition id: nil, dependency_id: nil, rule_key: nil, question_id: nil, operator: nil, answer_id: nil, datetime_value: nil, integer_value: nil, float_value: nil, unit: nil, text_value: nil, string_value: nil, response_other: nil, created_at: nil, updated_at: nil> 
```

我发现这个输出很难阅读和检查，尤其是对于多个对象。如果输出是这样的，我会很高兴：

```
# => #<DependencyCondition id: nil, 
       dependency_id: nil, rule_key: nil, 
       question_id: nil, 
       operator: nil, 
       answer_id: nil, 
       datetime_value: nil, 
       integer_value: nil, 
       float_value: nil, 
       unit: nil, 
       text_value: nil, 
       string_value: nil, 
       response_other: nil, 
       created_at: nil, 
       updated_at: nil> 
```

有没有一种简单的方法可以实现这一目标，或者我可能已经知道我不知道的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-11T07:59:38.253

安装名为`hirb`. 您可以通过以下命令安装此 gem：

`gem install 'hirb'`

然后启动`rails console`并输入以下命令，

`> require 'hirb'`

`> Hirb.enable`

完毕。您的输出将采用格式化的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:51:50.697

您可以使用[pry](http://pryrepl.org/)，它是 irb 的一个很好的替代品，它在下面列出的 RailsCast 中有很多很棒的功能。

[RailsCast #280: Pry with Rails](http://railscasts.com/episodes/280-pry-with-rails)：*Pry 是 IRB 的替代品，具有许多出色的功能。在这里，我将展示如何将它集成到 Rails 应用程序中，以及它如何帮助调试。*

输出不会完全符合您的要求，但我发现它比 irb 中的输出更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T18:40:39.687

尝试 yaml 输出：

`y dc = DependencyCondition.new`

`require 'yaml'`如果您收到 NoMethodError ，您可能还需要`y`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-21T09:11:50.860

如果使用 Pry（如已接受答案中的建议），[您还可以选择自己的输出格式](https://github.com/pry/pry/wiki/Customization-and-configuration#Config_output)。

> 永久（在 .pryrc 文件中）：
> 
> `Pry.config.print = proc { |output, value| output.puts "=> #{value.inspect}" }`
> 
> 暂时（在 repl 会话中）：
> 
> `_pry_.config.print = proc { |output,value| output.puts "=> #{value.inspect}" }`

# java - @Resource 未注入作为 CDI 托管 bean 的 JAX-WS SE

> ID：12608130
> 
> 赞同：2
> 
> 时间：2012-09-26T18:28:53.497
> 
> 标签：java, web-services, jax-ws, java-ee-6, cdi

在 JAX-WS SE 类中，我有一个字段，我在其中注入一个`@Resource`以最终获取客户端的 IP 地址。一切正常，直到我将此 SE 设为 CDI 托管 bean

```
@WebService
public class AImpl implements A {

    @Resource
    private WebServiceContext wsContext;

    @Inject
    private ADelegated delegated;

        ...
} 
```

我在 WebLogic 12c 中部署此应用程序并收到此错误

```
java.lang.IllegalArgumentException: Can not set javax.xml.ws.WebServiceContext field AImpl.wsContext to weblogic.jndi.internal.WLEventContextImpl 
```

我的代码中有什么不正确的地方？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:19:28.457

我找到了解决方案（在 Oracle 论坛人员的帮助下）。

通过在@Resource 注释中添加属性“名称”，问题得到了解决：

```
@WebService
public class AImpl implements A {

    @Resource(name="wsContext")
    private WebServiceContext wsContext;

    @Inject
    private ADelegated delegated;

        ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T22:43:45.293

据我所知，JAX-WS 没有任何 CDI 集成。看起来正在发生的事情是 CDI 正在创建您的 bean 而不是 JAX-WS，并且注入正在混淆。

# android - Android WebView：hdpi 屏幕上奇怪的 1px 线条渲染

> ID：12608132
> 
> 赞同：5
> 
> 时间：2012-09-26T18:28:59.790
> 
> 标签：android, android-webview

我有一个显示一些生成的 HTML 的 WebView。内容包括一个列表，并且列表项 CSS 包括`border-top: 1px`。

在 hdpi 设备上，WebView 尝试将此行缩放 1.5 倍。有时线条呈现为*1 个真实像素*，有时它们呈现为*2 个真实像素*。实际上，它似乎交替选择 1 或 2 个像素。

我正在专门寻找一个不涉及`<meta name="viewport" content="target-densitydpi=device-dpi" />`. 我*确实*希望 WebView 能够处理缩放，只要 1px 行一致呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:44:29.410

我认为唯一的解决方案是您不想听到的：不要缩放 WebView 内容，而是使用 CSS 修复它。在 CSS 中使用 em 而不是 px 可能会有一些运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T19:38:44.493

不要使用边框，而是使用 1px 的 box-shadow inset，如下所示：

```
 -webkit-box-shadow:inset 0 1px 0 0 #000000;
 box-shadow:inset 0 1px 0 0 #000000; 
```

# android - 从首选项运行主要活动的功能

> ID：12608134
> 
> 赞同：0
> 
> 时间：2012-09-26T18:29:12.210
> 
> 标签：android, preferences

我需要关于实现此目标的最佳方法的建议：我希望能够通过单击我的首选项中的一个选项来运行一个需要访问我的*sqlite 数据库的函数。*我已经能够创建一个*PreferenceFragment*来正确管理我的偏好。

我一直在尝试找到一种在我的主要活动中直接调用函数的方法，但没有找到任何简单的解决方案。

是否可以在不需要访问主要活动的情况下做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:40:51.980

如果主要活动意味着管理片段的活动，这很容易。您可以通过调用 getActivity() 访问管理片段的活动。因此，假设您的主要活动称为 MyActivity，使用以下代码在其上调用名为 myFunctionCall 的函数。

```
 MyActivity mainActivity = (MyActivity)getActivity();
    mainActivity.myFunctionCall(); 
```

# wpf - 如何禁止选择 ListBox 中的项目？

> ID：12608135
> 
> 赞同：2
> 
> 时间：2012-09-26T18:29:26.007
> 
> 标签：wpf, listbox, focus, selection

我们正在尝试创建一个 ListBox，其中包含一些用户无法选择的项目。考虑分组列表框中的组标题，除了这些是独立的项目（即没有缩进的子项）。我们只想在列表中显示一条消息。

如果有“Foo”项目，这是我们当前显示的模型......

```
Foo 1
Foo 2
Foo 3
--------------   <-- This is of type 'Separator' so it's styled as not-selectable by default.
Add new Foo...
Manage Foos... 
```

...如果没有任何 Foo 项目，我们会显示这个...

```
[No Foo Items]   <-- This one should not be selectable, the same as a separator
--------------   <-- This is of type 'Separator' so it's styled as not-selectable by default.
Add new Foo...
Manage Foos... 
```

现在，我们已经有了正确处理显示内容的代码（见下文）。我们想知道禁止选择该条目的正确方法是什么。

我们不知道如何设置 ListBoxItem 的样式，以便选择直接跳过它，用户也不能点击它。

## 代码

有人让我看看我的代码，所以就在这里。与问题无关，但应该向人们展示我是如何做到的。

`string.Empty`注意：我们在 XAML 中 模板化以显示本地化的“无 xxx 项”消息。`string.Empty`只是我们可以定位的占位符。

注意 2：FauxData 是一个用于测试的简单项目和集合库，因此我不必经常从头开始创建它们。例如，SimpleItemCollection 在构造函数中创建了十个 SimpleItem 对象，预先填充了 Name、Description、IsSelected 等内容，所有这些都完全支持 INotifyPropertyChanged 和集合更改通知。我对 HierarchicalItemsCollection 也有同样的看法，它添加了 Parent、Children 和 IsExpanded 等。它在测试代码和控件时节省了很多工作！

最后，这是来自一个简单的测试或“游乐场”应用程序。因此，它不应该代表最好的做事方式，只是为了展示一个概念。是的，它可以清理很多，但你明白了。

无论如何，进入代码......

```
using System.Collections.ObjectModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Input;
using FauxData;

namespace Playground.ListTest
{
    [LaunchEntry("List Test")]
    public partial class Main : Window
    {
        SimpleItemCollection itemsCollection = new SimpleItemCollection(); // Default constructor creates 10 items

        public Main()
        {
            InitializeComponent();
            MainListBox.ItemsSource = CreateCompositeCollection();
        }

        private CompositeCollection CreateCompositeCollection()
        {
            var EmptyHolder = new ObservableCollection<object>();

            itemsCollection.CollectionChanged += (s,e) => {

                if(itemsCollection.Count != 0)
                    EmptyHolder.Clear();
                else if(EmptyHolder.Count == 0)
                    EmptyHolder.Add(string.Empty);

            };

            var cc = new CompositeCollection();

            cc.Add(new CollectionContainer(){ Collection = itemsCollection });
            cc.Add(new CollectionContainer(){ Collection = EmptyHolder });
            cc.Add(new Separator());
            cc.Add(ApplicationCommands.New);   // <-- Pops a dialog to enter a new item
            cc.Add(ApplicationCommands.Open);  // <-- Shows an item management window

            return cc;

        }

        private void Test_Click(object sender, RoutedEventArgs e)
        {
            if(itemsCollection.Count != 0)
                itemsCollection.Clear();
            else
                itemsCollection.Add(new SimpleItem(){Name = "New item" });
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:27:45.093

由于`Focusable="false"`不涵盖所有选项（例如单击并拖动选择），我建议改为设置`IsEnabled`为`false`。

*（灰色的文本是`ListBoxItem`样式/模板的问题，所以如果你不喜欢它，你需要覆盖它）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:35:17.233

哇！那很简单！在`ListBoxItem`你想跳过的地方，你只需设置`Focusable`为`False`。

完成并完成！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:25:03.223

如果您不希望它变灰，那么 IsHitTestVisible 似乎可以实现这一点。

```
 <ListBox SelectionMode="Multiple">
        <ListBoxItem IsEnabled="False">HEsder</ListBoxItem>
        <ListBoxItem IsEnabled="True">1</ListBoxItem>
        <ListBoxItem IsHitTestVisible="False">-----</ListBoxItem>
        <ListBoxItem IsEnabled="True">2</ListBoxItem>
    </ListBox> 
```

如果要绑定，则需要使用触发器。

# c# - 该类型在未引用的程序集中定义

> ID：12608141
> 
> 赞同：0
> 
> 时间：2012-09-26T18:29:42.683
> 
> 标签：c#, winforms, .net-assembly

我刚刚开始将合作伙伴办公室解决方案中的一些项目整合到我们的解决方案中。该程序是一个 C# winform 应用程序。

程序已编译，一切正常，但昨天我又去构建，突然出现错误**“类型'Namespace.MainFrameDisplay'在未引用的程序集中定义。您必须添加对程序集的引用'OtherAssembly, Version=1.7.0.0, Culture=neutral, PublicKeyToken=52af1880d3cd7291"** （据我所知，OtherAssembly在原项目中没有作为参考。Assembly和OtherAssembly之间存在兼容性问题，添加OtherAssembly网大约 100 个错误。）

以及相关错误**“无法将类型 'Namespace.MainFrameDisplay' 隐式转换为 'Namespace.MainFrameDisplay' [c:\Dev\program\bin\debug\Assembly.dll]**

错误的伪代码片段是：

```
private MainFrameDisplay _MainFrame;  //definition
_MainFrame = this.Mainframe;  // error is thrown here
_MainFrame.Parent.Controls.Add(_NotifyBar); 
```

如果我删除定义，错误仍然存​​在。
如果我取出抛出错误的行，它编译得很好。即使调用 _MainFrame.Parent。

我已经删除/删除了这个麻烦的项目并解压缩/添加了原件的新副本，但问题仍然存在。有什么想法、建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:59:55.827

嗯............当然我在发布后就知道了。

( -_- )

所以让我们称之为后代的提示。

在上面的代码中，“this”引用了一个基类，这是我要引入我们的解决方案的其他项目之一。我将原始基类项目的引用与我的版本进行了比较，果然我不小心包含了对“OtherAssembly”而不是“Assembly”的引用。（他们的真名非常相似。）

不正确的引用并没有导致基类出现任何问题，而是导致派生类发生冲突。切换，修复，编译成功。

# php - 用外键连接两个记录集

> ID：12608142
> 
> 赞同：-1
> 
> 时间：2012-09-26T18:29:43.247
> 
> 标签：php, mysql

我有一个小型社交网站，允许用户对帖子发表评论。我可以根据用户使用 SQL 添加的朋友显示记录。但是，我希望对每个帖子的评论直接显示在帖子下方。

帖子表：

```
all_id(PK), name, comment, time, expand 
```

评论表：

```
post_id, name, comment, all_id(FK) 
```

我正在尝试复制 Facebook 的功能：评论帖子并查看帖子正下方的帖子。我尝试过使用复杂的 SQL 连接，但它没有显示任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:55:53.753

虽然您可以在单个查询中获取帖子和所有评论，但结果集可能会大得无法预见，在这种情况下，您可能会耗尽数据库、脚本或服务器的内存。但是，如果您想这样做，请告诉我，我可以发布一个示例。

或者，您可以使用两个单独的查询。第一个会抓取帖子，第二个会抓取与该帖子相关的所有评论。下面是一个使用 PHP 和 mySQL 的示例：

```
// Connect to MySQL Database
$db = mysql_connect('my_host', 'my_username', 'my_password');
mysql_select_database('my_database', $db);
// Query for Posts from a specific user.
$grabPost = mysq_query("SELECT all_id, name, comment, time, expand FROM posts WHERE name = 'some_user_name'", $db);
// Iterate over each post
while($post = mysql_fetch_assoc($grabPost)) {
    print '<b>' . htmlentities($post['name']) . '</b> - <i>' . $post['time'] . '</i><br />';
    print htmlentities($post['comment']);
    print '<br />';
    // Query for Comments relating to this Post
    $grabComments = mysql_query("SELECT post_id, name, comment FROM comments WHERE all_id = " . $post['all_id'], $db);
    // Iterate over each comment
    while($comment = mysql_fetch_assoc($grabComments)) {
        print '<p><b>' . htmlentities($comment['name']) . '</b> Says: ' . htmlentities($comment['comment']) . '</p>';
    }
    print '<hr />';
} 
```

# python - 使用'$'完成Python readline选项卡

> ID：12608146
> 
> 赞同：2
> 
> 时间：2012-09-26T18:29:45.307
> 
> 标签：python, console, readline

我正在使用 Cmd.py 创建一个自定义交互式控制台，并使用 readline 来完成制表符。这是在 Mac 上使用 python 2.7.1 进行测试的。

我使用 complete_[cmd_name] 定义我的完成候选，以便 cmd.py 可以使用它来获取可能的完成列表。正在完成的参数是一个字符串。我的候选完成是一个字符串列表。在正常情况下一切正常。问题是当参数以“$”开头时。Readline 显然正在剥离前导的“$”字符，并且在我构建候选列表时它弄乱了我的比较。

例如：

`completion_list = ['test', 'another_test', '$t_problem_case']`

输入： cmd te[tab] 这正确完成了单词“test”。

输入： cmd $t_[tab] 没有完成

输入： cmd $te[tab] 错误地完成到 $test

好的，所以问题一开始似乎很明显。我认为 readline 使用 '$' 作为分隔符。这很容易通过使用来解决：

`readline.set_completer_delims(readline.get_completer_delims().replace("$", ""))`

只有这样是行不通的。同样的事情仍然发生。

完成函数接受参数'text'和'line'，其中text是要完成的参数（缺少'$'的参数），line是完整的行。为了比 readline 更聪明，我检查参数是否真的有 $ 在行中，如果有，我将它附加到我正在检查的参数中，以便我可以正确过滤候选人。这几乎可以工作。

输入：$t[tab] 正确补全字符串……几乎。因为 readline 忽略了我的 '$' 它不会在替换时删除这个字符。结果实际上是“$$t_problem_case”。

作为最后的努力，我修改了 cmd.py 默认的完整函数，以返回前面去掉“$”的匹配项。这样 readline 实际上会替换为 't_problem_case' 并且一切看起来都是正确的。这是朝着正确方向迈出的一步，但问题是制表符完成建议现在不显示“$”。因此，在建议中，“$t_problem_case”将显示为“t_problem_case”。

有没有解决这个问题的正确方法？

# java - Java 在 ValueOf(double/float) 方法中不提供 DoubleCache 或 FloatCache

> ID：12608149
> 
> 赞同：1
> 
> 时间：2012-09-26T18:29:59.487
> 
> 标签：java, integer

我已经看到 java 提供了 IntegerCache、ShortCache、ByteCahce.. 但 Double/Float 类中没有缓存逻辑。是因为与 int 相比，double 值的使用不会那么频繁吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:43:03.633

[Double#valueOf](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#valueOf%28double%29)的 Java 文档表明存在缓存但没有

> 返回表示指定双精度值的 Double 实例。如果不需要新的 Double 实例，则通常应优先使用此方法而不是构造函数 Double(double)，**因为此方法可能会通过缓存频繁请求的值来显着提高空间和时间性能。**

从 -128 到 127 的值从您提到的所有三个缓存中，它们在自动装箱时使用。

# python - Python/正则表达式 - 匹配 .#,#。在字符串中

> ID：12608152
> 
> 赞同：10
> 
> 时间：2012-09-26T18:30:19.807
> 
> 标签：python, regex

我可以使用什么正则表达式来匹配“.#,#.” 在一个字符串内。它可能存在也可能不存在于字符串中。一些具有预期输出的示例可能是：

```
Test1.0,0.csv      -> ('Test1', '0,0', 'csv')         (Basic Example)
Test2.wma          -> ('Test2', 'wma')                (No Match)
Test3.1100,456.jpg -> ('Test3', '1100,456', 'jpg')    (Basic with Large Number)
T.E.S.T.4.5,6.png  -> ('T.E.S.T.4', '5,6', 'png')     (Doesn't strip all periods)
Test5,7,8.sss      -> ('Test5,7,8', 'sss')            (No Match)
Test6.2,3,4.png    -> ('Test6.2,3,4', 'png')          (No Match, to many commas)
Test7.5,6.7,8.test -> ('Test7', '5,6', '7,8', 'test') (Double Match?) 
```

最后一个不太重要，我只希望.#,#。会出现一次。我正在处理的大多数文件，我希望属于第一个到第四个示例，所以我对这些最感兴趣。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:41:34.600

您可以使用正则表达式`\.\d+,\d+\.`来查找该模式的所有匹配项，但您需要做一些额外的工作才能获得您期望的输出，特别是因为您想将`.5,6.7,8.`其视为两个匹配项。

这是一种潜在的解决方案：

```
def transform(s):
    s = re.sub(r'(\.\d+,\d+)+\.', lambda m: m.group(0).replace('.', '\n'), s)
    return tuple(s.split('\n')) 
```

例子：

```
>>> transform('Test1.0,0.csv')
('Test1', '0,0', 'csv')
>>> transform('Test2.wma')
('Test2.wma',)
>>> transform('Test3.1100,456.jpg')
('Test3', '1100,456', 'jpg')
>>> transform('T.E.S.T.4.5,6.png')
('T.E.S.T.4', '5,6', 'png')
>>> transform('Test5,7,8.sss')
('Test5,7,8.sss',)
>>> transform('Test6.2,3,4.png')
('Test6.2,3,4.png',)
>>> transform('Test7.5,6.7,8.test')
('Test7', '5,6', '7,8', 'test') 
```

要在没有匹配项时拆分文件扩展名，可以使用以下命令：

```
def transform(s):
    s = re.sub(r'(\.\d+,\d+)+\.', lambda m: m.group(0).replace('.', '\n'), s)
    groups = s.split('\n')
    groups[-1:] = groups[-1].rsplit('.', 1)
    return tuple(groups) 
```

这将是与上面相同的输出，除了`'Test2.wma'`变为，与和`('Test2', 'wma')`具有类似的行为。`'Test5,7,8.sss'``'Test5,7,8.sss'`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T18:45:41.283

要允许多个连续匹配，请使用前瞻/后视：

```
r'(?<=\.)\d+,\d+(?=\.)' 
```

例子：

```
>>> re.findall(r'(?<=\.)\d+,\d+(?=\.)', 'Test7.5,6.7,8.test')
['5,6', '7,8'] 
```

我们还可以根据需要使用前瞻来执行拆分：

```
import re
def split_it(s):
    pieces = re.split(r'\.(?=\d+,\d+\.)', s)
    pieces[-1:] = pieces[-1].rsplit('.', 1) # split off extension
    return pieces 
```

测试：

```
>>> print split_it('Test1.0,0.csv')
['Test1', '0,0', 'csv']
>>> print split_it('Test2.wma')
['Test2', 'wma']
>>> print split_it('Test3.1100,456.jpg')
['Test3', '1100,456', 'jpg']
>>> print split_it('T.E.S.T.4.5,6.png')
['T.E.S.T.4', '5,6', 'png']
>>> print split_it('Test5,7,8.sss')
['Test5,7,8', 'sss']
>>> print split_it('Test6.2,3,4.png')
['Test6.2,3,4', 'png']
>>> print split_it('Test7.5,6.7,8.test')
['Test7', '5,6', '7,8', 'test'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:38:53.120

使用正则表达式模式`^([^,]+)\.(\d+,\d+)\.([^,.]+)$`

检查[这个演示](http://ideone.com/vrgm6)>>

```
>>> print re.findall(r'^([^,]+)\.(\d+,\d+)\.([^,.]+)$', 'Test1.0,0.csv')
[('Test1', '0,0', 'csv')] 
```

* * *

```
>>> print re.findall(r'^([^,]+)\.(\d+,\d+)\.([^,.]+)$', 'Test2.wma')
[] 
```

* * *

```
>>> print re.findall(r'^([^,]+)\.(\d+,\d+)\.([^,.]+)$', 'Test3.1100,456.jpg')
[('Test3', '1100,456', 'jpg')] 
```

* * *

```
>>> print re.findall(r'^([^,]+)\.(\d+,\d+)\.([^,.]+)$', 'T.E.S.T.4.5,6.png')
[('T.E.S.T.4', '5,6', 'png')] 
```

* * *

```
>>> print re.findall(r'^([^,]+)\.(\d+,\d+)\.([^,.]+)$', 'Test5,7,8.sss')
[] 
```

* * *

```
>>> print re.findall(r'^([^,]+)\.(\d+,\d+)\.([^,.]+)$', 'Test6.2,3,4.png')
[] 
```

* * *

```
>>> print re.findall(r'^([^,]+)\.(\d+,\d+)\.([^,.]+)$', 'Test7.5,6.7,8.test') 
[] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:40:37.110

```
'/^(.+)\.((\d+,\d+)\.)?(.+)$/' 
```

第三个捕获组应该包含这对数字。如果你有多个这样的对，你应该得到多个匹配。第三次捕获将始终包含该对。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T18:41:14.443

```
^(.*?)\.(\d+,\d+)\.(.*?)$ 
```

这通过了您的测试，至少在模式中：

![在模式中通过测试](../Images/216965baf8cd9cb2ccd9d9462d3b071d.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T18:44:19.420

这非常接近，python 支持命名组吗？

```
^.*(?P<group1>\d+(?:,\d+)?)\.(?P<group2>\d+(?:,\d+)?).*\..+$ 
```

# php - 如何将 ini set session maxlife 设置为 10 分钟

> ID：12608153
> 
> 赞同：0
> 
> 时间：2012-09-26T18:30:22.233
> 
> 标签：php

要使会话寿命长达 10 分钟，以下代码是否正确，因为无法分辨：

```
ini_set('session.gc_maxlifetime',600); 
```

或者

```
ini_set('session.gc_maxlifetime',1*10*60); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:34:02.633

他们都是正确的，但第一个会跑得更快（一纳秒）

# mysql - MySQL：我的 MIN() 和 MAX() 查询可以/应该组合吗？

> ID：12608157
> 
> 赞同：0
> 
> 时间：2012-09-26T18:30:41.420
> 
> 标签：mysql, sql

这是我目前正在做的*简化版本。*

一个）

```
SELECT id, foreign_key_id, type, quantity, MAX(price) AS price // <--- Max
FROM quotes
WHERE type = 'tier 1'                                          // <--- Equal
AND prod_id_requested = 12345 
```

二）

```
SELECT id, foreign_key_id, type, quantity, MAX(price) AS price // <--- Max
FROM quotes
WHERE type != 'tier 1'                                         // <--- NOT equal
AND prod_id_requested = 12345 
```

C）

```
SELECT id, foreign_key_id, type, quantity, MIN(price) AS price // <--- Min
FROM quotes
WHERE type = 'tier 1'                                          // <--- Equal
AND prod_id_requested = 12345 
```

D)

```
SELECT id, foreign_key_id, type, quantity, MIN(price) AS price // <--- Min
FROM quotes
WHERE type != 'tier 1'                                         // <--- NOT equal
AND prod_id_requested = 12345 
```

有没有一种好方法可以让我节省一些资源并将这些资源组合成更少的查询？
或者这几乎就是这样做的方法？

[**更新**]
这里有一些示例数据可供使用：

```
CREATE TABLE IF NOT EXISTS `quote_item` (
  `id` int(2) unsigned NOT NULL AUTO_INCREMENT,
  `quote_id` int(2) unsigned NOT NULL,
  `product_id_quoted` int(3) unsigned NOT NULL,
  `product_id_requested` int(3) unsigned NOT NULL,
  `type` varchar(52) DEFAULT NULL,
  `price` float(10,4) NOT NULL,
  `quantity` int(9) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

INSERT INTO `quote_item` (`id`, `quote_id`, `product_id_quoted`, `product_id_requested`, `type`, `price`, `quantity`) VALUES
(1, 1, 12, 12, 'tier 1', 0.0100, 100),
(2, 2, 1, 12, 'tier 3', 0.0038, 8200),
(3, 2, 13, 12, 'tier 2', 0.0041, 10000),
(4, 3, 7, 14, 'tier 1', 0.0060, 25000),
(5, 3, 8, 12, NULL, 0.0180, 250),
(6, 3, 9, 15, NULL, 0.0019, 5000),
(7, 4, 12, 12, NULL, 0.0088, 7500),
(8, 4, 16, 12, 'tier 1', 0.0040, 10000),
(9, 5, 12, 9, 'tier 2', 0.0089, 1200),
(10, 5, 12, 12, 'tier 1', 0.0072, 6400); 
```

最终，我们希望将所有数据很好地打包到一个数组中。
目前，我们从每个查询（无分组）中获取一行，其中我们具有实际*ID*、*Qty*等...对于具有最小值的*单行*，以及具有最高价格的单行的相同信息，每个“类型”类别，然后构建数组。
例如：

```
$flash_report = array(
    'tier1' => array(
        'qty' => array(
            'min' => array(
                'id' => 1
                ,'quote_id' => 1
                ,'price' => 0.01
                ,'quantity' => 100
                )
            ,'max' => array(
                'id' => 8
                ,'quote_id' => 4
                ,'price' => 0.004
                ,'quantity' => 10000
                )
            ,'sum' => array(
                'value' => 16500
                ,'count' => 3
                )
        )
        ,'price' => array(
            'min' => array(
                'id' => 8
                ,'quote_id' => 4
                ,'price' => 0.004
                ,'quantity' => 10000
                )
            ,'max' => array(
                'id' => 1
                ,'quote_id' => 1
                ,'price' => 0.01
                ,'quantity' => 100
                )
        )
    )
    ,'other' => array(
        'qty' => array(
            'min' => array(
                'id' => 5
                ,'quote_id' => 3
                ,'price' => 0.018
                ,'quantity' => 250
                )
            ,'max' => array(
                'id' => 3
                ,'quote_id' => 2
                ,'price' => 0.0041
                ,'quantity' => 10000
                )
            ,'sum' => array(
                'value' => 25950
                ,'count' => 4
                )
        )
        ,'price' => array(
            'min' => array(
                'id' => 2
                ,'quote_id' => 2
                ,'price' => 0.0038
                ,'quantity' => 8200
                )
            ,'max' => array(
                'id' => 5
                ,'quote_id' => 3
                ,'price' => 0.018
                ,'quantity' => 250
                )
        )
    )
) 
```

[ **/更新**]

现在，我正在从我们各自的查询中获取所有数据，然后将它们全部组装成一个大数组。
我认为必须***有***更好的方法来做到这一点:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:45:26.113

您可以将它们全部组合起来：

```
SELECT "equal" as condition,
       MAX(price) AS max_price,
       MIN(price) AS min_price
  FROM quotes
 WHERE type = 'tier 1'
 GROUP BY 1
UNION
SELECT "not_equal" as condition,
       MAX(price) as max_price,
       MIN(price) as min_price
  FROM quotes
 WHERE type != "tier 1"
 GROUP BY 1 
```

与 CASE 解决方案相比，我更喜欢这个解决方案（尽管这些解决方案更简洁），因为它完全符合 SQL92。

我删除了 id、foreign_key 和 qty 字段，因为我不认为您打算将聚合按键分组，并且想知道为什么您也希望它们按 qty 分组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:34:46.023

```
SELECT id, foreign_key_id, type, quantity, 
    MIN(case when type != 'tier 1' then price end) as MinNotTier1Price,
    MIN(case when type == 'tier 1' then price end) as MinTier1Price,
    MAX(case when type != 'tier 1' then price end) as MaxNotTier1Price,
    MAX(case when type == 'tier 1' then price end) as MaxTier1Price
FROM quotes 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T18:34:55.443

```
SELECT id, 
       foreign_key_id, 
       type,
       quantity, 
       MAX(case when type = 'tier 1' then price else NULL end) AS price_max_eq,
       MIN(case when type = 'tier 1' then price else NULL end) AS price_min_eq,
       MAX(case when type <> 'tier 1' then price else NULL end) AS price_max_neq,
       MIN(case when type <> 'tier 1' then price else NULL end) AS price_min_neq,
FROM quotes 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:35:19.377

您至少可以像这样组合 A 和 C 以及 B 和 D

```
SELECT id, 
       foreign_key_id, 
       type, 
       quantity, 
       MAX(price) AS max_price, 
       MIN(price) AS min_price
FROM quotes
WHERE type = 'tier 1' 
GROUP BY id, foreign_key_id, type, quantity

SELECT id, 
       foreign_key_id, 
       type, 
       quantity, 
       MAX(price) AS max_price, 
       MIN(price) AS min_price
FROM quotes
WHERE type != 'tier 1' 
GROUP BY id, foreign_key_id, type, quantity 
```

# c - 乘以 5/8 并注意溢出

> ID：12608159
> 
> 赞同：0
> 
> 时间：2012-09-26T18:30:46.570
> 
> 标签：c, overflow, bit-manipulation

我真的很接近最终打破这个东西，但我仍然不知道如何注意这个溢出。

```
int multFiveEighths(int x) {

    int y=((x<<2)+x);
    int f=((y>>3)+1);
    int z=(y>>3);

    return f + ((~!(x>>31&1)+1) & (z+~f+1)); 
```

我乘以 5/8，并使用条件位表示：如果符号位为 1（数字为负数），则使用 f，否则使用 z。

其中一部分是包括像 C 表达式 (x*5/8) 这样的溢出行为

那么如何包含溢出行为呢？我只能使用这些操作：！~ & ^ | + << >> 没有循环，没有强制转换，没有函数声明。我离得太近了，这很痛苦。

编辑

我必须实现向零舍入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:51:58.927

```
int x = num >> 3; // divide by 8 (only defined for positive values)

x = x << 2 + x;   // multiply by 5; no overflow yet since 5/8 is less than one

int y = num & 7;  // the bits we shifted out

y = y << 2 + y;   // multiply by 5; no overflow

return (x + (y >> 3)); // the two pieces 
```

附录，向零舍入为负数：

```
int s = -((num >> 31) & 1); // sign bit as -1 or 0

int n = (num ^ s) - s; // twos complement if negative

int x = n >> 3; // divide by 8

x = (x << 2) + x;   // multiply by 5; no overflow yet since 5/8 is less than one

int y = n & 7;  // the bits we shifted out

y = (y << 2) + y;   // multiply by 5; no overflow

return (s ^ (x + (y >> 3))) - s; // the two pieces and complemented back 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:35:01.527

我希望这是您正在寻找的内容：

```
int multFiveEights(int x) {

  int isneg = (x>>31);

  // Negative x
  int nx = -x;

  int value = ( (~!!(isneg)+1) &  nx ) + ( (~!(isneg)+1) & x );

  /* Now its positive */
  value = (value<<2) + value;
  value = value & ((-1)>>1); // This mask should produce the desired overflow behavior
  value = (value>>3);

  value = ( (~!!(isneg)+1) & (-value)) + ( (~!(isneg)+1) & (value));

  return value;
} 
```

这个想法很简单：

1.  将参数转换为正数
2.  在乘法之后将最高有效位掩码为 0（这应该实现溢出行为）
3.  划分
4.  恢复正确的符号

当然，如果您超过了最小数量，您将从 -1 开始。顺便说一句，我可以随意使用`-`运算符，因为它的行为可以使用您允许的运算符来实现，但我发现它更易于阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:34:10.170

我相信这个片段应该涵盖溢出要求。

*请注意*，这样的代码在现实世界中没有任何用途。

```
#include <stdint.h>

uint32_t mult_five_eights (uint32_t num)
{
  num = (num << 2) + num; // multiply by 5
  return num >> 3;        // divide by 8
} 
```

**编辑**

带有溢出说明的演示程序。它从最大可能的 int 以下开始，然后继续超过溢出。请注意，整数溢出仅对*无符号*整数进行了明确定义。

```
#include <stdint.h>
#include <limits.h>
#include <stdio.h>

uint32_t mult_five_eights (uint32_t num)
{
  num = (num << 2) + num; // multiply by 5
  return num >> 3;        // divide by 8
}

int main()
{
  uint32_t i;

  for(i=UINT_MAX/5-10; i<UINT_MAX/5+10; i++)
  {
    uint32_t x = i*5/8;
    uint32_t y = mult_five_eights(i);

    printf("%u %u %u ", i, x, y);

    if(x != y)
    {
      printf("error this should never happen");
    }
    printf("\n");

  }

  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T20:18:49.250

```
int five_eights(int val)
{
int ret, car;

car = ((val&7)+((val&1) <<2)) & 5;
car = (car | (car >>2)) &1;

ret = ((val+1) >>1) + ((val+4) >>3) ;

return ret-car;
} 
```

显然，以上可以进一步压缩/减少；额外的变量是为了清楚起见。

请注意，避免了左移，因此不可能溢出。

# sql-server - 如何在自定义应用程序和 Microsoft Dynamics CRM 2011 之间同步数据？

> ID：12608161
> 
> 赞同：1
> 
> 时间：2012-09-26T18:30:49.910
> 
> 标签：sql-server, dynamics-crm, dynamics-crm-2011

我有一个自定义应用程序（带有 MSSQL 后端的 ASP.NET 4.5），我需要将此应用程序的数据库中的数据同步到 Microsoft Dynamics CRM 2011，反之亦然。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:56:39.203

在高层次上，这可以通过插件、工作流和 Web 服务来实现。

要将数据发送到 Crm，您可以使用 Web 服务调用来创建或更新记录，有几种不同的方法可以做到这一点，我建议从[MSDN](http://msdn.microsoft.com/en-us/library/gg334357.aspx)开始。因此，基本上在您的 Web 应用程序上的某个事件中，对 Crm 进行 Web 服务调用。

要将数据从 Crm 发送到您的 Web 应用程序，我建议使用自定义插件或工作流活动将数据添加到您的 Web 应用程序数据库（假设这里没有 Web 服务端点）。可以从各种事件中触发插件或工作流活动，例如某些数据更改、插件触发、添加到数据库的数据。您可以阅读有关[插件](http://msdn.microsoft.com/en-us/library/gg328490.aspx)和[自定义工作流活动](http://msdn.microsoft.com/en-us/library/gg309745.aspx)的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T19:54:04.113

有一个名为[Scribe](http://scribesoft.com/)的服务，该服务以两种方式同步来自不同数据库源的数据。

另一种方法是使用触发器，但 SDK 表示强烈建议不要将触发器与 CRM 2011 一起使用。因此，我建议您尝试 Scribe。

# css - CSS：为什么列表项显示没有项目符号？

> ID：12608163
> 
> 赞同：0
> 
> 时间：2012-09-26T18:30:58.677
> 
> 标签：css, html-lists

我有一个项目清单：

```
<ul>
    <li> item 1 </li>
    <li> item 2 </li>
</ul> 
```

这些显示没有项目符号。但为什么？以下是从 Chrome 的 Inspect 元素复制粘贴的所有计算样式。我需要改变什么？Display:list-item 和 list-style-type:disc 似乎没问题。

（我通过 javascript 注入 html。这意味着我可以创建自己的样式类来覆盖任何原本会被继承的样式，但我不能从父母那里“删除”任何样式。）

```
-webkit-background-clip: border-box;
-webkit-background-origin: padding-box;
-webkit-background-size: auto;
background-attachment: scroll;
background-clip: border-box;
background-color: transparent;
background-image: none;
background-origin: padding-box;
background-size: auto;
color: red;
display: list-item;
font-family: verdana, helvetica, arial, sans-serif;
font-size: 14px;
height: 17px;
list-style-type: disc;
margin-bottom: 0px;
margin-left: 0px;
margin-right: 0px;
margin-top: 0px;
padding-bottom: 0px;
padding-left: 0px;
padding-right: 0px;
padding-top: 0px;
text-align: left;
width: 1389px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:09:29.000

尝试提供其他样式`list-style-position:inside;`并检查[示例](http://jsbin.com/igeket/1/edit)代码。

无需更改填充或边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:43:43.383

它们存在，只是不可见。你打破了左边界。尝试

```
padding-left: 20px; 
```

或者

```
margin-left: 20px; 
```

# php - 如何使用 PHP 将单词替换为另一个单词

> ID：12608165
> 
> 赞同：-1
> 
> 时间：2012-09-26T18:31:08.833
> 
> 标签：php, string, replace

请问，我该如何替换`$example`为`%example%`使用PHP？我是新手。

例如，我有 -

```
<textarea>hi %myusername%</textarea>
<input submit> 
```

我希望，如果提交，`%myusername%`应该更改`$user`并保存到我的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:35:54.493

一个简单的字符串替换方法可以很好地解决这个问题。看看[`str_replace()`](http://php.net/manual/en/function.str-replace.php)——

> **str_replace** - 用替换字符串替换所有出现的搜索字符串

```
$user = "Lordcash Tugbaski";
$string = "Hi %myusername%";
$searchString = "%myusername%";
$replacement = $user;
$finalString = str_replace($searchString, $replacement, $string);
// Hi Lordcash Tugbaski 
```

关于将这些数据保存到数据库中，这实际上取决于您的实现。您真正需要做的就是将此值放入 sql`INSERT`查询中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:32:40.907

只需使用`str_replace($user, "%myusername%", "hi %myusername%");`

您可以在[文档中阅读所有相关信息](http://php.net/manual/en/function.str-replace.php)

# c++ - 英特尔 IPP 卷积已弃用——是否有不同的 IPP 2D 卷积方法？

> ID：12608166
> 
> 赞同：5
> 
> 时间：2012-09-26T18:31:29.537
> 
> 标签：c++, c, image-processing, intel-ipp

我正在试验 [Intel Integrated Performance Primitives (IPP)](http://software.intel.com/en-us/intel-ipp/)，我很好奇在 IPP 中进行 2D 卷积的“正确方法”。

根据英特尔 IPP 文档，不推荐使用`ippiConvFull`([文档](http://software.intel.com/sites/products/documentation/doclib/ipp_sa/71/ipp_manual/IPPI/ippi_ch9/functn_ConvFull.htm)) 和`ippiConvValid`([文档](http://software.intel.com/sites/products/documentation/doclib/ipp_sa/71/ipp_manual/IPPI/ippi_ch9/functn_ConvValid.htm))。但是我在 IPP 中看不到任何其他 2D 卷积例程。

我进行了一些搜索，但没有找到任何用于 2D 图像卷积的替代 IPP 函数。

*   IPP 中有替代品`ippiConvFull`吗？`ippiConvValid`
*   或者，英特尔只是从 IPP 中移除卷积？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T19:07:26.193

您可以改用[ippiFilter](http://software.intel.com/sites/products/documentation/doclib/ipp_sa/71/ipp_manual/IPPI/ippi_ch9/functn_Filter.htm)。它没有被标记为已弃用并在 2D 中运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-07T10:08:49.647

似乎它们已被弃用（至少在最新的 IPP v 8.1 中没有）：

[英特尔 IPP 卷积](https://software.intel.com/en-us/node/504168)。

然而，有一个新功能[`ippiConv`](https://software.intel.com/en-us/node/504170)可以同时使用 flag `algType`。

它应该适合你。

# dojo - 函数周围的括号

> ID：12608168
> 
> 赞同：0
> 
> 时间：2012-09-26T18:31:30.463
> 
> 标签：dojo

有人可以帮我理解这种语法是什么意思吗？

为什么function()前面有一个(，而function()前面有一个)()；功能结束后？

```
(function()
{

CKEDITOR.htmlParser.cdata = function( value )
{
    this.value = value;
};

CKEDITOR.htmlParser.cdata.prototype =
{
    type : CKEDITOR.NODE_TEXT,

    writeHtml : function( writer )
    {
        writer.write( this.value );
    }
};
})(); 
```

有人可以帮我理解这种语法是什么意思吗？为什么function()前面有一个$？

```
$ : function( rules )
{
    this._ =
    {
        elementNames : [],
        attributeNames : [],
        elements : { $length : 0 },
        attributes : { $length : 0 }
    };

    if ( rules )
        this.addRules( rules, 10 );
}, 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:32:56.520

接下来的一对括号用于执行这个匿名函数。这基本上用于引入范围。

# javascript - 如何创建一个“关闭”按钮来隐藏 Sencha T2 中的当前视图？

> ID：12608169
> 
> 赞同：0
> 
> 时间：2012-09-26T18:31:32.590
> 
> 标签：javascript, sencha-touch, sencha-touch-2

从我的`Main`视图开始，它使用 xytpe 'homepanel' 加载另一个视图。

```
Ext.define('MyApp.view.MainView', {
    extend: 'Ext.TabPanel',
    alias: 'widget.main',
    config: {
        tabBarPosition: 'bottom',

        items: [
            {
                xtype: 'homepanel', // loads view with xytpe 'homepanel'
            }
        ]
    }
}); 
```

从“主面板”我们可以转到左上角`Youtube`有一个`Close`按钮的视图

```
Ext.define('MyApp.view.YoutubeView', {
    extend: 'Ext.navigation.View',
    xtype: 'youtube',
    // id:    'youtube',
    config: {
        navigationBar: {
            items: [
                {
                    xtype:    'button',
                    iconMask: true,
                    text:     'Close',
                    align:    'left',
                    action:   'closeButton'
                }
            ]
        },
    }
}); 
```

单击`Close`按钮时，我想返回`Main`视图，如果可能，请重新加载它以防新帖子已放置。

不幸的是，这个控制器代码不起作用，因为它会引发`Object ext-viewport has no method 'hide'`错误。

```
Ext.define('MyApp.controller.PostStuffController', {
    extend: 'Ext.app.Controller',
    requires: [
        'Ext.navigation.View'
    ],
    config: {
        control: {
            'button[action=closeButton]': {
                tap: 'tapClose'
            }
        }
    },
    tapClose: function () {
        Ext.Viewport.getId().hide();
    }
}); 
```

关于如何关闭当前视图和加载的任何建议`Main`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:04:01.867

有几个问题。

1.  YoutubeView 扩展了一个导航视图。通常你会有一个扩展导航视图的主视图，然后从这个主视图推送和弹出视图。

2.  不要使用身份证。这是水龙头第二次不触发的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:42:50.960

可能这可以帮助你。

```
Ext.define('MyApp.controller.PostStuffController', {
extend: 'Ext.app.Controller',
requires: [
    'Ext.navigation.View'
],
config: {
    control: {
        'button[action=closeButton]': {
            tap: 'tapClose'
        }
    }
},

tapClose: function (button, e, options) {
   button.up('navigationview').push({
   xtype: 'main', // view which you want to push
 });
}

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T15:04:09.840

这成功了：

```
tapClose: function (cmp) {
    Ext.Viewport.remove(Ext.Viewport.getActiveItem(), true);
} 
```

# .htaccess - 在 URL 中隐藏子目录

> ID：12608172
> 
> 赞同：3
> 
> 时间：2012-09-26T18:31:46.567
> 
> 标签：.htaccess, url-rewriting, routes

在`public_html`目录里面我有一个文件夹`myfolder`，我`index.php`在那个文件夹里。

我所有的网站网址都是

```
http://example.com/myfolder/page-name 
```

我希望它重写为

```
http://example.com/page-name 
```

我应该写什么规则`.htaccess`来达到同样的效果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:36:38.000

在您的`public_html`目录`.htaccess`文件中，添加以下规则：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/myfolder
RewriteRule ^/?([^/]+)$ /myfolder/$1 [L] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-10T15:41:10.197

这是应该工作的：

```
RewriteEngine On
RewriteRule /?myfolder/(.*) $1 [QSA,L] 
```

以下示例执行此操作：如果我们尝试访问不以 开头的内容`/myfolder`，则添加`/myfolder`到 URL：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/myfolder
RewriteRule (.*) /myfolder/$1 [QSA,L] 
```

# javascript - 如何在文本框中仅粘贴 7 位数字

> ID：12608174
> 
> 赞同：0
> 
> 时间：2012-09-26T18:31:53.337
> 
> 标签：javascript

我在 android 的 web 应用程序中有一个 HTML 表单。其中一个字段是从设备位置获取自动编号的文本框。但问题是我只需要 7 个数字而且它粘贴的更多，我怎样才能用 js 限制这个字段，它只会粘贴前 7 个数字？我试图做最大长度和 js 有效代码，但没有任何效果，它仍然粘贴了很多数字。谢谢，乔丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:36:53.277

您可以粘贴 HTML 代码供您输入吗？maxlength 属性绝对应该有效。

它应该看起来像：

```
<input type="number" maxlength="7" size="7"> 
```

*注意 - 单独的 size 属性实际上不会限制您的输入可以接受的字符数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:35:41.383

您可以将 size 属性指定为 7。即使类型与“文本”不同，以下示例也有效。

```
<input type="text" size="7" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:40:11.533

实际上，您要查找的属性是[`maxlength`](https://developer.mozilla.org/en-US/docs/HTML/Element/Input).

```
<input type="text" maxlength="7" /> 
```

> **`maxlength`**[HTML5]
> 
> **如果 type 属性的值为 text、email、search、password、tel 或 url，则该属性指定用户可以输入的最大字符数（以 Unicode 代码点表示）**；对于其他控件类型，它被忽略。它可以超过 size 属性的值。如果未指定，用户可以输入不限数量的字符。指定负数会导致默认行为；也就是说，用户可以输入无限数量的字符。仅当属性的值已更改时才评估约束。

# sql-server - SQL Server，获取“for xml”值

> ID：12608175
> 
> 赞同：2
> 
> 时间：2012-09-26T18:31:57.160
> 
> 标签：sql-server, asp-classic, for-xml

我认为这很简单，但我似乎无法找到答案。

我在 SQL Server 2005 上运行查询，`for xml, elements`最后以 XML 形式返回结果。

```
select top 10 title, pubdate, description, link
from rssfeed item
for xml auto, elements 
```

我正在从经典的 ASP 页面运行查询。通常要从列中获取结果，我会使用`rs.Fields.Item("colName")`. 问题是，`for xml`列名是一个长字符串，如`XML_F52E2B61-...`.

我试过了`rs.Fields(0).value`。这奇怪地返回了查询中由问号分隔的列的名称，而不是 XML。我的输出是：

```
?title?pubdate?description?link?item?L??? 
```

我在 Management Studio 中测试了我的查询，XML 看起来没问题。有没有办法将此值读入经典 ASP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:18:14.527

[在 SQL Server 论坛中](http://www.sqlservercentral.com/Forums/Topic663872-21-1.aspx#bm663984)找到了答案。可能有一种更简洁的方法可以做到这一点，但帖子中的想法是将 XML 转换为 varchar(max)。

```
DECLARE @xmlout as varchar(max);
DECLARE @X as Xml;

set @X = (select top 10 title, pubdate, description, link
from rssfeed item
for xml auto, elements);

select @xmlout = cast(@X as varchar(max));
select @xmlout; 
```

运行查询后，我将使用`rs(0)`它来读取返回的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T11:37:20.507

@dangowans 的另一个答案非常好。我来到这里寻找类似问题的解决方案。

但是，我可以在不使用存储过程之类的东西的情况下进行管理，并使用这样的单个查询进行管理：

```
Select k=(select top 10 title, pubdate, description, link
from rssfeed item
for xml auto, elements) 
```

它返回给我的 XML 输出为`varchar`.

# javascript - 防止此共享点 javascript 在错误页面上无限运行

> ID：12608179
> 
> 赞同：0
> 
> 时间：2012-09-26T18:32:25.493
> 
> 标签：javascript, sharepoint

```
var $j = jQuery.noConflict();

$j(function() {
    //alert("testing");
    //alert($().SPServices.SPGetCurrentSite());
    var username = "";
    var username = $j().SPServices.SPGetCurrentUser();
    //alert (username);
    //alert (window.location.href);

if ((username="DOMAIN\username") && (window.location.href="http://godzilla/SitePages/Home.aspx"))
{
window.location = "http://godzilla/central/broadstreet/default.aspx";
}
return false;
else {
return false;
}
}); 
```

IF 语句应该只在两个条件都为真并且一旦完成就永远退出时触发。

在 Chrome 中进行测试给人的印象是它永远不会停止运行，因为 X 和重新加载按钮一直在闪烁，而且 if 语句似乎也在其他站点页面上触发——也就是说，它试图再次重定向......

我究竟做错了什么？？我最终需要多个 if 评估多个用户名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:39:40.617

`SyntaxError: malformed Unicode character escape sequence`您在处有语法错误`username = "Domain\username"`。如果你`\`通过制造它来逃避它`\\`，它应该摆脱它。另外，除非您想分配 `Domain\username`给`username`您，否则您可能应该使用`==`而不是分配运算符`=`

```
if ((username=="Domain\\username") && (window.location.href=="http://godzilla/SitePages/Home.aspx"))
{
    window.location = "http://godzilla/central/broadstreet/default.aspx";
}
else {
   return false;
} 
```

每当您试图找出错误出现在哪里时，请按 f12 以打开开发人员控制台以检查错误。

# java - 拆分字符串与另一个字符串不匹配

> ID：12608184
> 
> 赞同：1
> 
> 时间：2012-09-26T18:32:46.307
> 
> 标签：java, string

当我将字符串拆分为字符串数组时，然后尝试将其匹配为字符串。像这样：

```
String[] thisString = "hello my name is".split(" ");
if (thisString[1] == "my"){
    System.out.print("My!");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:33:22.827

Java 中的对象比较应该使用`.equals()`.

使用`.equals()`而不是 `==`

例子：

```
thisString[1].equals( "my") 
```

`==`比较检查参考相等。`equals()`比较检查内容是否相等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:33:40.690

请使用[`equals`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29) 而不是`==`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T18:33:53.867

在这种情况下，您应该使用`String.equals`来检查字符串内容：

```
if (thisString[1].equals("my")) { 
```

`String.split`将为`String`“my”创建不同的对象引用，因此`ìf`使用运算符的语句表达式将为 false `==`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T18:36:42.943

**== 比较，如果两者都引用同一个对象，** 其中 **.equals(string) 比较两个字符串是否具有相同的值**

所以，使用`if (thisString[1].equals("my"))`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T18:43:54.957

You are comparing object and in `java` for object comparison we have `.equals()`

so in your case

```
if (thisString[1].equals("my"))
{
 System.out.print("My!");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T18:36:56.147

您实际上无法使用`==`. 您需要使用`equals()`方法，方法如下：

`string1.equals(string2)`

# javascript - 我如何更改 extjs 网格的背景颜色

> ID：12608185
> 
> 赞同：0
> 
> 时间：2012-09-26T18:32:51.653
> 
> 标签：javascript, extjs4

我需要更改网格单元格的背景，使用我的代码更改文本颜色：

```
getRowClass: function(record, rowIndex, rowParams, store){
var grupo = record.get("tipo");
   if (grupo == 'G'){
   console.log('Grupo');
   return 'redUnderlinedText';
}

.redUnderlinedText {
    background-color: blue;// <= this code doesn't work
    color: red;
    text-decoration: underline;
    cursor: pointer;
} 
```

[带有我的代码的图像](http://aplicacoes.sankhya.com.br/temp/text.jpg)

但我想更改单元格的背景，如下所示。

[我需要这个](http://aplicacoes.sankhya.com.br/temp/background.jpg)

这可能吗？

谢谢，克劳迪奥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:07:37.947

奇怪的是，您在网格上看到的背景是每个单元格样式的结果。

所以这：

```
.x-grid-cell {
    background-color: red;
} 
```

应该适用于所有未选择的单元格。

在你的情况下，我会尝试：

```
.redUnderlinedText . x-grid-cell {
    background-color: blue !important;
    color: red;
    text-decoration: underline;
    cursor: pointer;
} 
```

# .net - 在绑定到字典的组合框中设置所选项目

> ID：12608189
> 
> 赞同：3
> 
> 时间：2012-09-26T18:33:02.137
> 
> 标签：.net, winforms, dictionary, combobox, selecteditem

我有一个绑定到这样的字典的组合框：

```
Dictionary<int, string> comboboxValues = new Dictionary<int, string>();
comboboxValues.Add(30000, "30 seconds");
comboboxValues.Add(45000, "45 seconds");
comboboxValues.Add(60000, "1 minute");
comboBox1.DataSource = new BindingSource(comboboxValues , null);
comboBox1.DisplayMember = "Value";
comboBox1.ValueMember = "Key"; 
```

我从 SelectedItem 中获取密钥，如下所示：

```
int selection = ((KeyValuePair<int, string>)comboBox1.SelectedItem).Key; 
```

因此，如果我的用户选择“45 秒”选项，我会返回 45000 并将该值保存到 XML 文件中。加载我的应用程序时，我需要读取该值，然后自动设置组合框以匹配。当我只有 45000 的密钥时可以这样做吗？还是我需要将值（“45 秒”）保存到文件而不是密钥？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T18:57:43.063

是的，您可以只使用 45000

```
comboBox1.SelectedItem = comboboxValues[45000]; 
```

如果您知道索引，那么您可以使用

```
comboBox1.SelectedIndex = i; 
```

i 从零开始，-1 表示没有选择。

或者设置 SelectedItem

```
comboBox1.SelectedItem = new KeyValuePair<int, string>(45000, "45 seconds");

private void Form1_Load(object sender, EventArgs e)
{
    Dictionary<int, string> comboboxValues = new Dictionary<int, string>();
    comboboxValues.Add(30000, "30 seconds");
    comboboxValues.Add(45000, "45 seconds");
    comboboxValues.Add(60000, "1 minute");
    comboBox1.DataSource = new BindingSource(comboboxValues, null);
    comboBox1.DisplayMember = "Value";
    comboBox1.ValueMember = "Key";
    comboBox1.SelectedItem = comboboxValues[45000];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-03T12:11:22.253

只需使用

```
comboBox1.SelectedValue=45000 
```

并且您的组合框将通过使用 Key 预先选择

# c# - Handle 不支持与 CreateFile 的同步操作

> ID：12608190
> 
> 赞同：3
> 
> 时间：2012-09-26T18:33:02.500
> 
> 标签：c#, .net, winapi, createfile

我需要以原始模式打开读取磁盘，因此为此我使用了 CreateFile API 函数。

```
private static FileStream OpenDisk(string drive)
{
    // Try to open hard disk drive in raw mode for reading
    SafeFileHandle safeHandle = Native.CreateFile(
        string.Format(@"\\.\{0}", drive),
        FileAccess.Read,
        FileShare.Read,
        IntPtr.Zero,
        FileMode.Open,
        FileAttributes.ReadOnly | FileAttributes.Device,
        IntPtr.Zero);

    // Check if the drive was successfully opened
    if (safeHandle.IsInvalid)
    {
        Marshal.ThrowExceptionForHR(Marshal.GetHRForLastWin32Error());
    }

    // Create file stream on the file for reading
    return new FileStream(safeHandle, FileAccess.Read);
} 
```

但是当我尝试从流中读取时，出现以下错误

`Handle does not support synchronous operations. The parameters to the FileStream constructor may need to be changed to indicate that the handle was opened asynchronously (that is, it was opened explicitly for overlapped I/O).`

这是重现此问题的示例代码

```
using (FileStream stream = OpenDisk("X:"))
{
    byte[] buffer = new byte[1000];
    while (stream.Read(buffer, 0, 1000) > 0) { }
} 
```

我真的不明白它想从我这里得到什么？当我使用更大的缓冲区（例如 4096）时，它可以工作。当我说它有效时，我的意思是它确实有效（总是），它工作了一段时间，直到我改变了缓冲区大小。我猜它在内部做了某种异步缓冲，当我指定更大的缓冲区然后默认缓冲大小时，它只是不使用，但是如何摆脱这个？

谢谢

**更新**

当我尝试使用 BufferedStream 读取它时，我遇到了同样的问题

```
using (BufferedStream stream = new BufferedStream(OpenDisk("X:"), 4096))
{
    byte[] buffer = new byte[1000];
    while (stream.Read(buffer, 0, 1000) > 0) { }
} 
```

我是否理解 BufferedStream 的错误用途？它不应该读取和缓存指定大小的块吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:47:26.033

简而言之，来自卷的读取是非缓冲的，并且必须是整个扇区。4096 的缓冲区大小实现了这一点。该错误消息具有误导性，因为异步 I/O 和非缓冲往往同时出现。一些细节：

从[CreateFile 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)：

卷句柄可以根据特定文件系统的判断以非缓存方式打开，即使在 CreateFile 中未指定非缓存选项也是如此。您应该假设所有 Microsoft 文件系统都以非缓存方式打开卷句柄。对文件的非缓存 I/O 的限制也适用于卷。

从[文件缓冲文档](http://msdn.microsoft.com/en-us/library/windows/desktop/cc644950%28v=vs.85%29.aspx)：

*   文件访问大小，包括 OVERLAPPED 结构中的可选文件偏移量（如果指定），必须是卷扇区大小的整数倍的字节数。例如，如果扇区大小为 512 字节，则应用程序可以请求读取和写入 512、1,024、1,536 或 2,048 字节，但不能请求 335、981 或 7,171 字节。
*   读写操作的文件访问缓冲区地址应该是物理扇区对齐的，这意味着在内存中的地址上对齐，该地址是卷物理扇区大小的整数倍。根据磁盘的不同，可能不会强制执行此要求。

# asp.net - asp.net sql查询 - 将参数的默认值绑定到代码后面的方法的返回值

> ID：12608193
> 
> 赞同：0
> 
> 时间：2012-09-26T18:33:10.143
> 
> 标签：asp.net, sqldatasource

```
 <asp:Parameter Name="Creator_Id" Type="Int32"  DefaultValue="<%=currentEmployeeId() %>"/> 
```

或者

```
INSERT INTO [PromotionSet] ([StartDate], [EndDate], [Bonus], [Text], [InfoImage], [RequiresPreregistration], [Code], [Creator_Id]) VALUES (@StartDate, @EndDate, @Bonus, @Text, @InfoImage, @RequiresPreregistration, @Code,<%=currentEmployeeId() %>" 
```

上述两种实现相同目标的方法都不起作用。currentEmployeeId 返回当前登录用户的 id。如果 currentEmployeeId 设置为简单地返回“1”（返回“1”）。它仍然不起作用。但是，如果我将 <%=currentEmployeeId() %> 替换为 1，它就可以工作。

内联代码在这种情况下不起作用吗？我应该如何做到这一点？

对象数据源无从谈起——我没时间自己写insert update和delete方法（这就是我使用SQLDataSource的原因）

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:20:28.877

你可以从代码隐藏中做到这一点

```
protected void Page_Load(object sender, EventArgs e)
{
     mySqlDataSourece.SelectParameters["Creator_Id"].DefaultValue = currentEmployeeId();

} 
```

# iphone - 无法将 ipa 上传到应用商店表示应用缺少所需的架构。必须至少存在以下架构之一

> ID：12608195
> 
> 赞同：0
> 
> 时间：2012-09-26T18:33:21.793
> 
> 标签：iphone, architecture, app-store, ipa

我刚刚制作了一个新应用，但无法将其上传到 iTunes 商店，我收到以下消息

**应用程序缺少所需的架构。必须至少存在以下架构之一**

使用 xcode 4.3.2

任何有关如何解决此问题的帮助都会很棒！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:57:14.147

在 XCode 中，单击您的项目（在左侧），然后转到您的目标。转到“构建设置”选项卡，在“架构”下，您应该拥有`armv6 armv7`. 如果没有，请单击此处显示的内容，然后从弹出的菜单中单击“其他”，然后使用弹出窗口左下方的加号 (+) 按钮手动添加`armv6`和分隔行。`armv7`

看下图的例子

![像这样](../Images/3fd02d3e5d35a64b97789ac900de9968.png)

# c++ - 如何从 C++ 引发将触发脚本异常处理程序的异常

> ID：12608197
> 
> 赞同：4
> 
> 时间：2012-09-26T18:33:39.223
> 
> 标签：c++, exception, com, atl, abi

我一直在网上找到这个答案的点点滴滴，但不是一个清晰的解决方案。

这就是我想要做的。1) 创建一个 ATL 简单对象。2) 向该对象添加一个返回 BOOL 而不是 HRESULT 的方法。调用者想要真/假返回值。3) 向将提供 e.description 和 e.number 数据的 jscript 或 vbscript 调用者抛出异常。

RE 2) 我发现我可以使用 STDMETHODIMP_(BOOL) 和 [local] 来允许返回 BOOL RE 3) 我发现我可以通过 SetErrorInfo() 传递 IErrorInfo 来填充 Error 对象

我的困境是我无法弄清楚如何构建 C++ 以在 ABI 边界上抛出一个不会使调用者崩溃的异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:26:29.430

当您为脚本客户端编写代码时，您必须使用称为自动化的 COM 子集。这表明：

*   所有接口都必须从 IDispatch 派生
*   一个组件类应该只实现一个源接口
*   所有方法都必须返回 HRESULT，只有 STDMETHODIMP 有效
*   参数类型必须限制为自动化允许的子集。

特别是这意味着不允许使用 BOOL，它必须是 VARIANT_BOOL。您可以通过在 IDL 中这样写来声明一个返回布尔值的方法：

```
 [id(42)] HRESULT Foo([out,retval] VARIANT_BOOL* retval); 
```

在代码中将 VARIANT_TRUE 或 VARIANT_FALSE 分配给 *retval。脚本语言使用自然语法，例如`var = Foo()`.

您通过返回失败 HRESULT 在脚本客户端中生成异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:41:04.240

您可以通过以下方式让客户端处理“异常”

1.  像你说的那样设置 IErrorInfo
2.  返回非 HRESULT hr != S_OK

因此，您需要 IDispatch/Interop 兼容接口，这需要 HRESULT 返回类型 (AFAIR)。

^(IDL 允许更多，但像脚本主机（VBS、JScript、VBA 和其他）这样的“动态”客户端不会原生使用这些客户端*，*因此互操作性不会是最佳的。)

# php - 来自 PHP 块响应的 HTML5 视频标签，可能吗？

> ID：12608198
> 
> 赞同：1
> 
> 时间：2012-09-26T18:33:39.560
> 
> 标签：php, javascript, html, html5-video

是否可以使用 PHP 服务块响应返回的 HTML5 视频标签读取视频？

我想要实现的是在一个响应中返回从 3 个不同的视频文件创建的响应。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:09:30.403

一种选择是使用视频元素的“结束”事件来加载第二个视频。像这样的东西应该工作。您可能需要使用 XMLHttpRequest 来获取新视频的 url 等。

```
var vid = document.getElementById("your-video-element");
vid.addEventListener("ended", function() {
   vid.src = "new video url";
   vid.play()
}); 
```

如果您需要立即开始播放，您可以提前在另一个不可见的视频元素上排队以将其缓存。这将在同时加载两个视频时使用更多带宽。

```
var vid = document.getElementById("your-video-element");
var nextVid = document.createElement("video");
nextVid.src = "second video url";
nextVid.preload = "auto";
vid.addEventListener("ended", function() {
    vid.src = nextVid.src;
    vid.play();
}); 
```

设置`preload = "auto"`并不能保证浏览器会预加载视频，而是由浏览器决定。

# sql - SQL：用引用另一个表列的新列替换原始列

> ID：12608200
> 
> 赞同：0
> 
> 时间：2012-09-26T18:33:42.463
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有两个表，都已经填充了数据，并且包含以下列：

**表**
1 jobType char
jobDesc varchar

**New_table jobID**
int
jobType char

我想`Table1.jobType`用一`jobID`列替换，这样 Table1 现在将引用`New_table`using `jobID`。中的任何现有数据都`Table1.jobType`必须“翻译”为适当的`jobID`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:14:22.197

The basic drill:

*   Start with the original job table

    ```
    create table dbo.job
    (
      id              int          not null identity(1,1) ,
      job_type        varchar(64)  not null ,
      job_description varchar(128) not null ,

      constraint job_PK primary key clustered (id) ,

    ) 
    ```

*   Create the new job type table (don't forget to populate it)

    ```
    create table dbo.job_type
    (
      id   int         not null identity(1,1) ,
      name varchar(64) not null ,

      constraint job_type_PK   primary key clustered ( id   ) ,
      constraint job_type_AK01 unique nonclustered   ( name ) ,

    ) 
    ```

*   Alter the table dbo.job to add a new job_type_id column

    ```
    alter table dbo.job
    add job_type_id int null 
    ```

*   Update the job table, mapping the value of job_type_id based on the [old] job_type column's value.

    ```
    update dbo.job
    set job_type_id = jt.id
    from dbo.job      j
    join dbo.job_type jt on jt.name = j.job_type 
    ```

*   Alter the new column to make it non-nullable. This will fail until you've ensured that all rows have a non-null value for job_type_id:

    ```
    alter table dbo.job
    alter column job_type_id int not null 
    ```

*   Add the new foreign key constraint needed

    ```
    alter table dbo.job
    add constraint job_AK01
    foreign key ( job_type_id )
    references dbo.job_type ( id ) 
    ```

*   The last and irrevocable step is to drop the old column. This will break any queries, stored procedures, etc. that reference this column...but you already did your homework in this department and have coordinated all necessary changes, right?

    ```
    alter table dbo.job drop column job_type 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:55:04.480

如果 Table1 中 JobType 列的数据都是以文本形式存储的 Integer 值，则运行以下命令：

```
ALTER TABLE Table1 ALTER COLUMN JobType INT 
```

如果列包含非整数值，例如 ABC1、ABC2，那么您首先需要更改列中的数据。使用我在这里使用的示例值，您将运行：

```
UPDATE Table1
SET JobType = SUBSTRING(JobType,4,1) 
```

然后你可以运行上面的 ALTER TABLE 语句

# python - Gimp 2.8 插件脚本 - 如何添加新的 GroupLayer？

> ID：12608210
> 
> 赞同：4
> 
> 时间：2012-09-26T18:34:21.273
> 
> 标签：python, gimp

如果您尝试在 gimp 中使用 python 做一些事情并且很难弄清楚，那么 PDB 的文档/命名约定是相当落后的。我最终找到`gimp.GroupLayer`了（PDB lists `gimp-layer-group-new`）来创建一个新的图层组。你如何将它插入到图像中并让它显示为一个图层组？

我一直在尝试这样的东西：

```
img = gimp.image_list()[0]
gl = gimp.GroupLayer(img, "Should be a folder", 1, 1, 0)
img.insert_layer(gl) 
```

真正让我感到困惑的第一件事是，它希望我为 GroupLayer 指定一个高度和宽度，即使它应该只是充当其他实际层的容器（它期望这是因为它继承自`Layer`，但这是另一回事）。

真正的问题是，当我插入新创建的 时`GroupLayer`，它显示为普通图层（图层图标中没有文件夹）。我已经通过制作两层来验证这一点，一层是普通层，一层是组层。我将图层组添加到图像中，然后尝试以组图层为父级将普通图层添加到图像中：

```
img = gimp.image_list()[0]
gl = gimp.GroupLayer(img, "Group Layer", 1, 1, 0)
l = gimp.Layer(img, "Real Layer", 1, 1, 0)
img.insert_layer(gl)
img.insert_layer(l, gl) # gl should be the parent 
```

我得到的只是错误：

```
Calling error for procedure 'gimp-image-insert-layer':
Item 'group layer #1' (34) cannot be used because it is not a group item` 
```

有没有其他人知道这一点？

**更新**

> 乔奥·苏·布埃诺

我刚刚在 gimp-git 中解决了这个问题。Frgom gimp 2.8.12 on，
调用 gimp.GroupLayer 与 `gimp.GroupLayer(img, [name="", opacity=100.0, mode=gimp.NORMAL_MODE])` 签名一起工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:31:08.897

似乎在创建 gimp.GroupLayer 时存在错误 - 它的行为类似于普通层，即使对象类型在 Python 中显示为组层。

可以通过 PDB 创建一个工作组层，但是，使用`pdb.gimp_layer_group_new(img)`- 这一次，tehre 是另一个错误，该对象在 Python 中显示为一个正常的 Layer 对象 - 但在将其插入图像后 `pdb.gimp_image_insert_layer(image, layer, <parent (use None for top level)>, <position>)`它可以正常工作（并且通过图像“层”属性检索对象将为您提供适当的 GroupLayer 对象）。

对此感到抱歉 - 大部分是我的错 - 我会看看我是否可以为下一个 GIMP 2.8 修复行为 - GIMP 2.8 几乎不支持 Python 的图层组。

**更新**：从 GIMP 2.8.12 开始，调用 gimp.GroupLayer(image, ...) 会创建一个适当的图层组。

# java - 添加 global-method-security 命名空间时 Spring 看不到 @Transactional

> ID：12608212
> 
> 赞同：4
> 
> 时间：2012-09-26T18:34:29.277
> 
> 标签：java, spring, hibernate, spring-mvc, spring-security

我创建了一个服务，负责通过 dao 与数据库联系。我使用`@Transactional`注释来处理事务。

```
@Service("aclService")
public class HibernateAclServiceImpl implements HibernateAclService{

private final Log logger = LogFactory.getLog(HibernateAclServiceImpl.class);
@Autowired
private AclObjectIdentityDao objectIdentityDao ;
private PermissionFactory permissionFactory = new DefaultPermissionFactory();
@Autowired
private AclCache aclCache;
@Autowired
private PermissionGrantingStrategy grantingStrategy;
@Autowired
private AclAuthorizationStrategy aclAuthorizationStrategy;

private final Field fieldAces = FieldUtils.getField(AclImpl.class, "aces");

@Override
@Transactional
public List<ObjectIdentity> findChildren(ObjectIdentity parentIdentity) {
    AclObjectIdentity aclObjectIdentity = objectIdentityDao
            .get((Long) parentIdentity.getIdentifier());
    List<ObjectIdentity> list = new ArrayList<ObjectIdentity>(
            aclObjectIdentity.getChildren().size());
    for (AclObjectIdentity aoid : aclObjectIdentity.getChildren()) {
        final ObjectIdentity oid = new ObjectIdentityImpl(aoid.getObjectClass().getClazz());
        list.add(oid);
    }
    return list;
}

@Override
@Transactional
public Acl readAclById(ObjectIdentity object) throws NotFoundException {
    final Map<ObjectIdentity, Acl> objects = readAclsById(Arrays.asList(object), null);
    return objects.get(object);
}

@Override
@Transactional
public Acl readAclById(ObjectIdentity object, List<Sid> sids)
        throws NotFoundException {
    Map<ObjectIdentity, Acl> objects = readAclsById(Arrays.asList(object), sids);
    return objects.get(object);
}

@Override
@Transactional
public Map<ObjectIdentity, Acl> readAclsById(List<ObjectIdentity> objects)
        throws NotFoundException {
    return readAclsById(objects, null);
}

@Override
public Map<ObjectIdentity, Acl> readAclsById(List<ObjectIdentity> objects,
        List<Sid> sids) throws NotFoundException {
    Map<ObjectIdentity, Acl> result = new HashMap<ObjectIdentity, Acl>();
    Set<Long> objectsToLoad = new HashSet<Long>();

    for (int i = 0; i < objects.size(); i++) {
        final ObjectIdentity oid = objects.get(i);
        boolean aclFound = false;

        if (result.containsKey(oid)) {
            aclFound = true;
        }

        if (!aclFound) {
            Acl acl = aclCache.getFromCache(oid);

            if (acl != null) {
                if (acl.isSidLoaded(sids)) {
                    result.put(acl.getObjectIdentity(), acl);
                    aclFound = true;
                } else {
                    throw new IllegalStateException(
                            "Error: SID-filtered element detected when implementation does not perform SID filtering "
                                    + "- have you added something to the cache manually?");
                }
            }
        }
        if (!aclFound) {
            objectsToLoad.add((Long) oid.getIdentifier());
        }
    }

    if (objectsToLoad.size() > 0) {
        lookupAcl(result, objectsToLoad);
    }
    return result;
}
public void lookupAcl(Map<ObjectIdentity, Acl> map, Set<Long> objects){
    final List<AclObjectIdentity> aoids = objectIdentityDao.getList(objects);
    final Map<Long, Long> parents = new HashMap<Long, Long>();
    for(AclObjectIdentity aoid : aoids){
        if(aoid.isEntriesInheriting()){
            parents.put(aoid.getId(), aoid.getParent().getId());
        }
    }
    if(parents.size() > 0){
        lookupAcl(map, (Set<Long>)parents.values());
    }
    for(AclObjectIdentity aoid : aoids){
        if(map.containsKey(aoid.getId()))
            continue;
        final Acl parentAcl = map.get(parents.get(aoid.getId()));
        final Acl acl = new AclImpl(new ObjectIdentityImpl(aoid.getObjectClass().getClazz(), aoid.getId()), aoid.getId(), aclAuthorizationStrategy, grantingStrategy, parentAcl, null, aoid.isEntriesInheriting(), new PrincipalSid(aoid.getOwnerSid().getSid()));

        List<AccessControlEntryImpl> aces = new ArrayList<AccessControlEntryImpl>(aoid.getAclEntries().size());
        for(AclEntry aclEntry : aoid.getAclEntries()){
            final Permission permission = permissionFactory.buildFromMask(aclEntry.getMask());
            aces.add(new AccessControlEntryImpl(aclEntry.getId(), acl, new PrincipalSid(aclEntry.getSid().getSid()), permission, aclEntry.isGranting(), aclEntry.isAuditSuccess(), aclEntry.isAuditFailure()));
        }
        setAces((AclImpl) acl, aces);
        aclCache.putInCache((AclImpl) acl);
    }
}

private void setAces(AclImpl acl, List<AccessControlEntryImpl> aces) {
    try {
        fieldAces.set(acl, aces);
    } catch (IllegalAccessException e) {
        throw new IllegalStateException("Could not set AclImpl entries", e);
    }
} 
```

}

这是我的“app-context.xml”文件的一部分

```
<security:global-method-security  pre-post-annotations="enabled">
    <security:expression-handler ref="expressionHandler" />
</security:global-method-security>
<bean id="expressionHandler"
    class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler">
    <property name="permissionEvaluator" ref="permissionEvaluator" />
    <property name="roleHierarchy" ref="roleHierarchy" />
</bean>

<bean class="org.springframework.security.acls.AclPermissionEvaluator"
    id="permissionEvaluator">
    <constructor-arg ref="aclService" />
</bean> 
```

现在当我调用服务的功能时，例如。从控制器它抛出一个错误 `org.hibernate.HibernateException: No Session found for current thread`。但是当我发表评论时，一切都很好（交易没有问题）

`<security:global-method-security pre-post-annotations="enabled"> <security:expression-handler ref="expressionHandler" /> </security:global-method-security>`

我检查了所有内容，并将有问题的代码缩小到上述部分。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T19:00:03.983

我不确定`global-method-security`是如何在幕后实现的，但是有一个鲜为人知的副作用`BeanPostProcessors`- 由 a 直接引用的任何 bean `BeanPostProcessor`，或由 BPP 引用的东西引用的任何 bean*都不符合 AOP 自动代理的条件*：

> BeanPostProcessors 和 AOP 自动代理
> 
> 实现 BeanPostProcessor 接口的类是特殊的并且被容器区别对待。它们直接引用的所有 BeanPostProcessor 和 bean 都在启动时实例化，作为 ApplicationContext 的特殊启动阶段的一部分。接下来，所有 BeanPostProcessor 都以排序方式注册并应用于容器中的所有其他 bean。因为 AOP 自动代理是作为 BeanPostProcessor 本身实现的，所以 BeanPostProcessor 和它们直接引用的 bean 都没有资格进行自动代理，因此没有将方面编织到其中。
> 
> 对于任何这样的 bean，您应该看到一条信息性日志消息：“Bean foo 不符合被所有 BeanPostProcessor 接口处理的条件（例如：不符合自动代理的条件）”。

[（资源）](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-extension-bpp)

这意味着，如果您有`@Transactional`一个引用 BeanPostProcessor 加载的 bean，则该注释将被有效地忽略。

解决方案通常是，如果您需要在必须引用 BeanPostProcessor 加载的 bean 中的事务行为，则需要使用非 AOP 事务定义 - 即使用 TransactionTemplate。

您可以打开日志记录`org.springframework`器`DEBUG`并验证此消息是否正在为您的`aclService`bean 输出。

# nsurlconnection - NSURLConnection 委托与单独的线程

> ID：12608214
> 
> 赞同：3
> 
> 时间：2012-09-26T18:34:37.063
> 
> 标签：nsurlconnection, nsurlconnectiondelegate

我使用[MBProgressHUD](https://github.com/jdg/MBProgressHUD)作为指标。你知道它在执行其他方法时使用了一个单独的线程。当我想使用`NSURLConnection`时，它的委托没有正确调用。

这是我所拥有的（@implementation 文件）：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [self hudShowWithLabel];
}

-(void)hudShowWithLabel {
    HUD = [[MBProgressHUD alloc] initWithView: self.view];
    [self.view addSubview:HUD];

    HUD.delegate = self;
    HUD.labelText = @"Loading";
    [HUD showWhileExecuting:@selector(myTask) onTarget:self withObject:nil animated:YES];
}

-(void)myTask {
    responseData = [NSMutableData data];
    NSLog(@"Is%@ main thread", ([NSThread isMainThread] ? @"" : @" NOT"));
    NSString *requestURL = @"http://someurl";

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:requestURL]];
    (void)[[NSURLConnection alloc] initWithRequest:request delegate: self];    
} 
```

运行时，我可以看到它`myTask`不在`MainThread`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T15:45:07.053

您可以在主线程中启动 NSURLConnection：

```
[self performSelectorOnMainThread:@selector(start) withObject:nil waitUntilDone:YES]; 
```

选择器开始是：

```
- (void)start
{
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:requestURL]];

    self.connection =[[NSURLConnection alloc] initWithRequest:request
                                                 delegate:self
                                         startImmediately:NO];
    [self.connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
    [self.connection start];
} 
```

[github](https://github.com/hrchen/ExamplesForBlog)上也有一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T14:04:40.727

NSURLConnection 在另一个应该有运行循环的线程中运行。您可以尝试在线程的 main 方法中添加这样的运行循环代码：

```
while (!finished)
{
  [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:1]];
} 
```

# java - 如何向 Eclipse Project Explorer 工具栏添加按钮？

> ID：12608226
> 
> 赞同：3
> 
> 时间：2012-09-26T18:35:24.757
> 
> 标签：java, eclipse, eclipse-plugin

我想在 Project Explorer 工具栏中添加一个切换按钮 - 包含“全部折叠”和“与编辑器链接”的按钮。

它似乎可能涉及为周围的某个地方添加一个扩展点，`org.eclipse.ui.navigator`但我找不到任何暗示如何做到这一点的东西。

我尝试模仿“Hello World Command”向导如何添加一个带有 locationURI 的工具栏，`toolbar:org.eclipse.ui.navigator?after=additions`但它既不工作也不给出错误。

我无法通过搜索引擎找到任何有用的东西。

插件需要与 Indigo 一起使用（其他版本将是一个奖励）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:48:34.580

显然，视图 ID 是 org.eclipse.ui.navigator.ProjectExplorer

这对我有用（我在 Eclipse 3.8 之上构建）：

```
<extension point="org.eclipse.ui.menus">
     <menuContribution
           allPopups="false"
           locationURI="toolbar:org.eclipse.ui.navigator.ProjectExplorer">
        <separator
              name="my.separator"
              visible="true">
        </separator>
        <command
              commandId="com.my.command.id"
              style="push">
        </command>
     </menuContribution>
</extension> 
```

# youtube-api - YoutubeAPI：从特定频道搜索视频。？

> ID：12608231
> 
> 赞同：0
> 
> 时间：2012-09-26T18:35:47.333
> 
> 标签：youtube-api

如何使用 json 提要创建 URL 以从特定频道搜索视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:54:22.410

使用***author***参数，在这种情况下，我正在寻找来自**addik2you**频道和关键字*Carmina Burana*的视频：

```
https://gdata.youtube.com/feeds/api/videos?author=addik2you&v=2&alt=jsonc&q=carmina+burana 
```

# weka - Weka stringtowordvector 错误

> ID：12608232
> 
> 赞同：1
> 
> 时间：2012-09-26T18:35:47.613
> 
> 标签：weka

尝试在 weka 3.6.8 上使用 stringtowordvector 过滤器。我选择了过滤器，保留了默认值，并指出了要转换的属性。我收到错误“问题过滤实例：33”

有没有人遇到过这个？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:53:37.210

user1038067 说：看来是要改参数DoNotOperateOnPerClassBasis了。默认值为 False，但将其设置为 True 可解决该错误

# python - 如何列出类中直接定义的方法（非继承）？

> ID：12608234
> 
> 赞同：0
> 
> 时间：2012-09-26T18:35:58.533
> 
> 标签：python

我正在寻找类似的东西`dir()`，但想过滤掉在超类/es中定义的非实例方法和属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:37:47.113

对于 python 2.x：

```
[name for name, method in Class.__dict__.iteritems() if callable(method)] 
```

对于 python 3.x：

```
[name for name, method in Class.__dict__.items() if hasattr(method,'__call__')] 
```

# jquery - 使用 jQuery 选择器进行复杂的元素选择

> ID：12608236
> 
> 赞同：3
> 
> 时间：2012-09-26T18:36:04.037
> 
> 标签：jquery, jquery-selectors

我有一组`span`元素。我也有一组`<div>`元素。当我点击一个跨度时，我认为它是“禁用的”。特别是，我将“禁用”属性存储在一个数组中（禁用为*false*，否则为*true ）；*所有 span 元素在开始时都启用。

每个跨度都有一个来自 DB 值的整数 id。我将此 id 存储在名为*data-code*的 HTML5 属性中。

每个 div 都有一个由空格分隔的整数列表。这些整数中的每一个都引用跨度的数据代码。它们存储在 div 属性*data-lst*中。

以下是可能的 HTML 代码示例：

```
<span data-code="1">A text</span>|<span data-code="2">Another txt</span>|<span data-code="3">Some text here</span>|<span data-code="4">bla bla</span>

<div data-lst="1 2 3 4">...</div>
<div data-lst="1 3 4">...</div>
<div data-lst="2 3">...</div>
<div data-lst="1 2 3">...</div>
<div data-lst="1">...</div> 
```

当我单击一个跨度时，它会变为“禁用”，我必须检查是否可以隐藏某些 div（通过使用`display:none`）。*当且仅当data-lst*中的每个整数对应于存储在“已禁用”的 span 的 data-code 中的 id时，才能隐藏 div 。一些必要的例子：

1.  如果我单击带有*data-code 1*的跨度，则最后一个 div 设置为`display:none`.
2.  然后，如果我点击带有*data-code 3*的 span ，什么也不会发生，因为没有 div 中的所有代码都被禁用（例如“1”、“3”或“1 3”）。
3.  最后，当我点击带有*data-code 2*的 span 时，第三个和第四个 span 设置为`display:none`.

我正在尝试使用选择器和**JQuery**将 display:none 设置为 div 以满足上述条件，但目前我没有找到解决方案。

代码的起始和平可能如下：

```
$(function(){
  var enabled = new Array();
  $('span').each(function(i){
    enabled[i] = true;
    $(this).click(function(){

      //Set display:none to all the divs that satisfy the above criteria 
      functionX();          

    });
  });
}); 
```

缺少的是`functionX()`，应该选择与条件相对应的所有 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:00:29.800

根据评论，这是[更新的 jsfiddle](http://jsfiddle.net/sahil_kapoor/Kpnda/3/)，这是更新的代码：

```
$(function(){
    var enabled = {};
  $('span').each(function(){
      var $this = $(this);
      var id = $this.attr('data-code');
      enabled[id] = true;
      $this.click(function(){
          enabled[id] = false; 
          //Set display:none to all the divs that satisfy the above criteria 
          functionX(enabled);
      });
  });
});

function functionX(enabled)
{
    $('div:visible').each(function() {
        var dataList = $(this).attr('data-lst').split(' ');
        var hide = true;
        for(var d=0;d<dataList.length;d++)
        {
            var index = dataList[d];
            if(enabled[index])
            {
                hide = false;
                break;
            }
        }
        if(hide)
        {
            $(this).hide();
        }
    });
} 
```

# javascript - 在表格中将动态内容注入 Google 地图的信息窗口

> ID：12608237
> 
> 赞同：2
> 
> 时间：2012-09-26T18:36:13.757
> 
> 标签：javascript, google-maps, google-maps-api-3

我很难让 Google Maps V3 中的信息窗口按照我想要的方式工作。

**- 场景：-**我正在旧金山的地铁系统和谷歌地图之间创建一个混搭。在一种功能中，当用户选择路线时，标记（代表车站）会覆盖在地图上。单击标记时，将打开一个信息窗口，其中将显示车站名称、路线名称（以该路线的颜色作为背景）和一个无边框表格，其中将包含该特定车站的列车运动的 ETD 时间（基本上，只是“分钟”，直到开往特定目的地的火车离开）。显然，当用户点击不同的标记时，该站的相应数据会反映在信息窗口上。

返回 JSON 格式 ETD 数据的服务器端脚本都可以正常工作，我正在接收我想要的数据。

**- 问题：-**我无法正确地将 ETD 数据“注入”到我的信息窗口中，我想以漂亮的表格格式显示它，但由于某种原因，所有 ETD 数据都没有注入到表中，而是溢出到桌子外面。

我真的很感激任何建议、帮助等。

谢谢，

-Soumya Roy

**代码：-**

```
function drawinfo(mark,abbr,name) {
var infowindow=new google.maps.InfoWindow();
var strContent="<div style=\"width:400px;height:240px;\">
        <div style=\"font-weight:bold;padding:0.5em;\"><p>Station:"+name+"</p></div><br/>
        <div style=\"margin-top:0.3em;background-color:"+Clr+";float:left;font-size:0.8em;
        font-weight:bold;\"><p>Route:"+Rt+"</p></div><div style=\"float:right;\">
        <table style=\"border:0;color:#666;\"><tr><td>Departures</td></tr>"; //Until here the infowindow shows properly.

$.getJSON("getetd.php",{abbr:abbr},function(result) {
    $.each(result,function(key,value) {
        $.each(this,function(k,v) {
            strContent+="<tr><td>|"+k+"</td>";  //The actual JSON data is being received properly.
            $.each(this,function(k2,v2) {
                $.each(this,function(k3,v3) {
                    strContent+="<td>"+v3+"</td>";  //Neither "k" nor "v3" get injected.
                });
            });
            strContent+="</tr>";
        });
    });
}); //getJSON() ends

strContent+="</table></div></div>";
google.maps.event.addListener(mark,'click',function(){
    infowindow.close();  // So as to close any other infowindow.
    infowindow.setContent(strContent);
    infowindow.open(map,mark);
}); //addListener() ends.

} //drawinfo() ends. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:30:18.233

您的 JSON 获取是异步的，您需要使用回调例程中返回的数据，现在您的关闭`</table></div></div>`在回调函数之外（我认为）。

我怀疑您想要的是在调用单击侦听器（单击标记）时获取该特定信息窗口的数据，而不是预先填充数据，因此在单击侦听器中调用 getJSON 函数，然后使用从服务器返回时的数据（在 getJSON 回调中）。

# jquery - Jquery 和 append 函数一直重复文本

> ID：12608240
> 
> 赞同：0
> 
> 时间：2012-09-26T18:36:18.223
> 
> 标签：jquery, append

我使用 jquery 的 append 函数来添加文本并显示 div 但是当我使用 show me the text 每次我越过链接时都会触发效果

```
<script>

$(document).ready(function() {

$(".wm_1").mouseover(function() {

$("#web_tooltip").show(2000).append("Hello how are you?");
});

$("#web_tooltip").mouseover(function() {
$("#web_tooltip").hide(2000).fadeIn('slow');

});

});

</script> 
```

当我浏览链接时，触发效果显示第一次“你好，你好吗.... ......

问候 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:43:27.067

Use `text()` instead:

```
 $("#web_tooltip").show(2000).text("Hello how are you?"); 
```

This will set the inner and not append a new text each time

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:42:37.660

```
$(".wm_1").mouseover(function() {
 $("#web_tooltip").empty();  
$("#web_tooltip").show(2000).append("Hello how are you?");

}); 
```

upd：如果您需要添加信息但不替换（或类似的东西），请尝试此操作

```
$(".wm_1").mouseover(function() {
$("#add_tooltip").remove();  
$("#web_tooltip").show(2000).append('<div id="add_tooltip">"Hello how are you?"');
}); 
```

# jquery - Google 的 CDN 上的最新 jQuery 版本

> ID：12608242
> 
> 赞同：103
> 
> 时间：2012-09-26T18:36:21.900
> 
> 标签：jquery, google-cdn

[我在 Google CDN 的官方文档](https://developers.google.com/speed/libraries/devguide#jquery)中读到这是`src`jQuery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```

`src`但是，每次版本更新都必须更改我的 jQuery 引用，这很烦人。

我发现如果我将版本设置为`1`然后谷歌返回最新版本的 jQuery。

```
http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js
/*! jQuery v1.8.2 jquery.com | jquery.org/license */ 
```

这是正确的做法吗？是否有任何官方 URL 可以引用托管在 Google CDN 上的最新版本的 jQuery？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-09-26T18:39:30.147

**2014 年 7 月 3 日更新：**截至目前，`jquery-latest.js`不再更新。来自[jQuery 博客](http://blog.jquery.com/2014/07/03/dont-use-jquery-latest-js/)：

> 我们知道[http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)被滥用，因为 CDN 统计显示它是最受欢迎的文件。如果开发人员仅使用它来制作本地副本，情况就不会如此。
> 
> 我们已决定停止更新此文件以及缩小副本，将这两个文件永久保留在 1.11.1 版本。
> 
> Google CDN 团队已加入我们的行列，以防止网络意外损坏，并且不再更新 [http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js](http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js)上的文件。该文件也将在 1.11.1 版本中保持锁定状态。

由于历史原因，以下现在没有实际意义的答案被保留在这里。

* * *

[不要这样做。说真的，不要。](http://webcache.googleusercontent.com/search?q=cache:http://www.impressivewebs.com/linking-to-jquery/)

链接到 jQuery 的主要版本确实有效，但这是一个坏主意——每次十进制更新都会添加和弃用全新的功能。如果您在没有完全测试代码的情况下自动更新 jQuery **，**如果某些关键方法的 API 发生了变化，您将面临意外的意外风险。

这是您应该做的：使用最新版本的 jQuery 编写代码。测试它，调试它，当它准备好用于生产时发布它。

然后，当新版本的 jQuery 推出时，问问自己：**我的代码中是否需要这个新版本？**例如，是否有一些以前不存在的关键浏览器兼容性，或者它会加速我在大多数浏览器中的代码？

如果答案是“否”，请不要费心将代码更新到最新的 jQuery 版本。[这样做甚至可能会在您的代码中添加以前不存在的新错误](http://jquery.com/upgrade-guide/1.9/)。任何负责任的开发人员都不会在没有彻底测试的情况下自动包含来自另一个站点的新代码。

根本没有充分的理由总是使用最新版本的 jQuery。旧版本仍然可以在 CDN 上使用，如果它们适合您的目的，那么为什么还要更换它们呢？

* * *

第二个但可能更重要的问题是缓存。许多人在 CDN 上链接到 jQuery，因为许多其他网站都这样做，并且您的用户很有可能已经缓存了该版本。

问题是，[缓存仅在您提供完整版本号时才有效](http://www.bucketsoft.com/blog/post/maximize-your-chances-of-caching-your)。如果您提供部分版本号，那么远期的缓存就不会发生——因为如果这样做了，一些用户会从同一个 URL 获得不同的次要版本的 jQuery。（假设 1.7 的链接指向前一天的 1.7.1 和后天的 1.7.2。浏览器如何确保它今天获得最新版本？答案：不缓存。）

> 事实上，这里有几个选项及其到期设置[的细分......](http://www.bucketsoft.com/blog/post/maximize-your-chances-of-caching-your)
> 
> [http://code.jquery.com/jquery-latest.min.js](http://code.jquery.com/jquery-latest.min.js) （无缓存）
> 
> [http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js（1](http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js) 小时）
> 
> [http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js（1](http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js) 小时）
> 
> [http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js（1](http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js) 年）

因此，通过这种方式链接到 jQuery，您实际上**消除**了首先使用 CDN 的主要原因之一。

* * *

[http://code.jquery.com/jquery-latest.min.js](http://code.jquery.com/jquery-latest.min.js)也可能并不总是为您提供您期望的版本。在撰写本文时，它链接到最新版本的 jQuery 1.x，尽管 jQuery 2.x 也已发布。这是因为 jQuery 1.x 兼容旧版浏览器，包括 IE 6/7/8，而[jQuery 2.x 不](http://blog.jquery.com/2013/04/18/jquery-2-0-released/)兼容. 如果您想要最新版本的 jQuery 2.x，那么（目前）您需要明确指定它。

两个版本的 API 相同，所以对于兼容的浏览器没有感知上的差异。然而，jQuery 1.x 的下载量比 2.x 大。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-26T18:38:30.653

我不知道它是否/在哪里发布，但您可以通过省略次要版本号和内部版本号来获得最新版本。

最新的 1.8.x：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script> 
```

最新的 1.x：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

但是，请记住，这些链接的缓存超时时间比完整版本号要短得多，因此您的用户下载它们的次数可能比您想要的多。有关更多信息，请参阅[Google CDN 中对 jQuery 1.x.0 的参考中的关键 .0](http://encosia.com/the-crucial-0-in-google-cdn-references-to-jquery-1-x-0/)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-26T18:42:44.367

如果您希望使用 Google 托管的 jQuery 库以外的 jQuery CDN，您可以考虑使用它并**确保**使用最新版本的 jQuery：

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-20T18:21:37.523

# 使用由 Google 托管的最新 jquery 版本

人类：

1.  [https://developers.google.com/speed/libraries/#jquery](https://developers.google.com/speed/libraries/#jquery)

2.  获取片段：

> `<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>`

3.  把它放在你的代码中。
4.  确保它有效。

机器人：

1.  等一个人去做。

# vb.net - 小型 VB 应用程序的内部数据库

> ID：12608248
> 
> 赞同：0
> 
> 时间：2012-09-26T18:36:34.943
> 
> 标签：vb.net

我正在编写 VB 实用程序，它将管理提醒并在需要的日期显示它们。内部数据库实施的推荐方法是什么？是否有用于此目的的 VB 内置机制？

先感谢您。

# php - 将数据添加到 CakePHP 2 的 debug.log 文件

> ID：12608250
> 
> 赞同：0
> 
> 时间：2012-09-26T18:36:37.950
> 
> 标签：php, cakephp, logging, cakephp-2.0

在我的 CakePHP 2.2 应用程序中，我在 debug.log 文件中得到一个“通知”。我几乎每天都会收到此警告，但我无法解决问题。所以我需要在 debug.log 中写一些额外的数据。但是我想在这个“通知”出现时写下那个数据。

例如，我收到此通知：

```
2012-09-26 19:53:01 Notice: Notice (8):
 Trying to get property of non-object in
  [/var/www/vhosts/example.com/app/View/Tools/index.ctp, line 42]
Trace:
include - APP/View/Tools/index.ctp, line 42
View::_evaluate() - CORE/Cake/View/View.php, line 920
View::_render() - CORE/Cake/View/View.php, line 883
View::render() - CORE/Cake/View/View.php, line 475
Controller::render() - CORE/Cake/Controller/Controller.php, line 957
Dispatcher::_invoke() - CORE/Cake/Routing/Dispatcher.php, line 193
Dispatcher::dispatch() - CORE/Cake/Routing/Dispatcher.php, line 161
[main] - APP/webroot/index.php, line 96 
```

发生此通知时，我想将所有会话变量添加到 debug.log 文件中。
我怎样才能做到这一点？
我可以改变`lib/Cake/Log/Cakelog.php`
我应该写什么以及在哪里写？

编辑：我粘贴相关的代码片段：

```
39       <?php if ($auth) { ?>
40        <form class="well" >
41
42            <?php if (isset($user->profile_url)) {
43            echo '<img src="'.$user->profile_url.'" width="48" height="48"/>';
44        } ?>
45
46            <strong><?php echo $user->screen_name; if (isset($user->name)) { echo " (" . $user->name . ")"; } ?></strong><br/>
47            <small><?php if (isset($user->description)) { echo $user->description; } ?> </small><br/>
48            <small><?php if (isset($user->url)) { echo $user->url; } ?> </small><br/>
49            <br/> 
```

# delphi - 如何创建具有任意 WSDL 的通用 Firemonkey SOAP 客户端？

> ID：12608255
> 
> 赞同：2
> 
> 时间：2012-09-26T18:36:50.623
> 
> 标签：delphi, delphi-xe2, soap-client, firemonkey

我想（对于 OSX）创建一个简单的 Firemonkey SOAP 客户端，使我能够指定端点和 SOAP 方法，然后在 SOAP 信封内传递任意 XML。我的工作是确保我的 XML 在另一端符合 WSDL；因为它是一个通用实用程序，所以没有一个 WSDL 模式可以连接到应用程序中。

我能够使用 THTTPReqResp 组件在 Delphi XE2 上的 VCL 应用程序中轻松地做到这一点 - 就像魅力一样。但是当我尝试为这个应用程序创建一个等效的 Firemonkey 时，似乎我被迫导入一个特定的 WSDL 并绑定到它。有没有办法做一些更通用的事情？各种 SOAP 组件的使用似乎要复杂得多，而且我找不到可以做我需要做的事情的好的文档或演示应用程序。

在此先感谢-E。

# gwt - GWT SyncProxy 测试

> ID：12608256
> 
> 赞同：1
> 
> 时间：2012-09-26T18:36:52.943
> 
> 标签：gwt, testing, junit, rpc

我使用标准 GWT 示例创建了一个新的 Web 应用程序项目。然后我想用下面的测试类测试greetingserviceimpl。我不知道问题出在哪里。我也上传了项目：[http ://ul.to/1pz1989y](http://ul.to/1pz1989y)

```
public class RPCTest extends GWTTestCase {

@Override
public String getModuleName() {
    // TODO Auto-generated method stub
    return "de.GreetingTest";
}

public void testGreetingAsync() {
    GreetingServiceAsync rpcService =  (GreetingServiceAsync) SyncProxy.newProxyInstance(GreetingServiceAsync.class,"http://127.0.0.1:8888/GreetingTest.html?gwt.codesvr=127.0.0.1:9997");
    rpcService.greetServer("GWT User", new AsyncCallback<String>() {
        public void onFailure(Throwable ex) {                
            ex.printStackTrace();
            fail(ex.getMessage());              
        }
        public void onSuccess(String result) {
            assertNotNull(result);               
            finishTest();//
        }
    });
    delayTestFinish(1000);
} 
```

}

验证新编译的单元在第一次通过时忽略了 1 个编译错误的单元。
编译时使用 -strict 或将 -logLevel 设置为 TRACE 或 DEBUG 以查看所有错误。
[错误] 第 17 行：com.gdevelop.gwt.syncrpc.SyncProxy 类型没有可用的源代码；你忘了继承一个必需的模块吗？
[错误] 找不到类型 'de.client.RPCTest'
[错误] 提示：以前的编译器错误可能使此类型不可用
[错误] 提示：检查模块的继承链；它可能没有继承所需的模块，或者模块可能没有正确添加其源路径条目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:35:24.537

您的 rpc 服务是异步的 - 在 testGreetingAsync 方法返回时它还没有完成。GWTTestCase（但您正在扩展 TestCase，您可能应该更改它）支持这一点 -`delayTestFinish`在方法结束时调用以指示测试是异步的。然后，`finishTest`一旦成功，就打电话。

```
public class RPCtest extends GWTTestCase {
    public void testGreetingAsync() {
        GreetingServiceAsync rpcService =  (GreetingServiceAsync) SyncProxy.newProxyInstance(GreetingServiceAsync.class,"http://127.0.0.1:8888/Tests.html?gwt.codesvr=127.0.0.1:9997");
        rpcService.greetServer("GWT User", new AsyncCallback() {
            public void onFailure(Throwable ex) {
                //indicate that a failure has occured
                ex.printStackTrace();
                fail(ex.getMessage());//something like this               
            }
            public void onSuccess(Object result) {
                //verify the value...
                assertNotNull(result);

                //Then, once sure the value is good, finish the test
                finishTest();//This tells GWTTestCase that the async part is done
            }
        });
        delayTestFinish(1000);//1000 means 'delay for 1 second, after that time out'
    }
} 
```

* * *

编辑更新的问题：

> 在模块“de.GreetingTest”中找不到测试类“de.RPCTest”；没有看到该类型的编译单元

就像您的常规 GWT 代码必须在一个`client`包中一样，您的 GWTTestCase 代码也必须如此——它也可以作为 JavaScript 运行，因此可以像在浏览器中一样对其进行正确测试。根据错误，我猜你的入口点等在`de.client`- 这个测试也应该在那里。

# php - 如何让 TinyMCE Advanced 在 Wordpress 中工作？

> ID：12608260
> 
> 赞同：2
> 
> 时间：2012-09-26T18:37:07.113
> 
> 标签：php, javascript, wordpress, tinymce

这是显示我正在处理的站点的图像：[链接到当前编辑器的外观](http://i.imgur.com/Vcg9Z.jpg)

我正在 wordpress 网站上进行一些维护和转换。我的客户不精通 HTML，希望能够以所见即所得的方式编辑页面。但是，当前编辑器中不存在此选项。（见图）

我已经按照说明安装了 TinyMCE Advanced，它出现在我的插件列表中（也在图像中），并激活了插件，但我没有看到任何变化。我需要先安装一个*基本的 TinyMCE 插件吗？*我的印象是 Wordpress 是预装的。

更多信息：

*   这是 WordPress 3.4.2
*   TinyMCE 插件（如果有的话）*没有*出现在插件列表中。
*   我不知道您选择哪个面板中是否有选项

是否也可以简单地将按钮添加到当前的 TinyMCE 配置中？任何援助将不胜感激。谢谢，

-汤姆

# ruby-on-rails - 急切加载 activerecord_reputation-system 投票

> ID：12608264
> 
> 赞同：0
> 
> 时间：2012-09-26T18:37:34.707
> 
> 标签：ruby-on-rails, activerecord, eager-loading

使用[Miniprofiler](http://miniprofiler.com/)，我看到我的博客索引页面正在为每篇博客文章调用 SQL 查询，以查找投票数。我怎样才能急切地加载投票，以便我可以合并这些查询？

对于每个条目，我看到的 SQL 类似于以下内容。

```
SELECT  "rs_reputations".* FROM "rs_reputations" WHERE "rs_reputations"."reputation_name" = 'votes' AND "rs_reputations"."target_id" = 8 AND "rs_reputations"."target_type" = 'Post' LIMIT 1 
```

在我的posts_controller 中，我目前急于加载作者（Writer has_many :posts）。

```
@posts = Post.includes(:writer).paginate(page: params[:page]), :per_page => 10) 
```

**我该如何添加 :votes 呢？**我努力了

```
@posts = Post.includes(:writer, :rs_reputation).paginate(page: params[:page]), :per_page => 10) 
```

和

```
@posts = Post.includes(:writer, :votes).paginate(page: params[:page]), :per_page => 10) 
```

两者都不起作用。

我的帖子模型如下

**post.rb**

```
belongs_to: :writer
has_reputation :votes, source: :writer, aggregated_by: sum 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:42:44.200

事实证明这很难做到，直到最新版本。在尝试之前确保您的 gem 是最新的，但是您现在可以通过使用以下方法轻松加载：

```
evaluated_by(reputation_name, source [, scope]) 
```

例如：

```
Post.evaluated_by(:votes, @writer) 
```

可以在 github 上找到讨论[线程](https://github.com/twitter/activerecord-reputation-system/issues/11)。

更新：仔细检查，这种方法对你不起作用。它急切地加载特定作者所做的所有评估，而不是每个帖子的声誉。我会对此进行更多研究，但您也可以考虑在 github 上发布您的问题。该 gem 的开发人员反应迅速，可能会在几天内为您提供解决方案。

工作解决方案：我在github上问过，得到了[这个答案](https://github.com/twitter/activerecord-reputation-system/issues/27)。它应该像这样工作。像这样查询您的帖子：

```
Post.find_with_reputation(:reputation_name, :all) 
```

然后得到这样的投票值：

```
post.votes 
```

# maven - Maven依赖找不到它的资源

> ID：12608266
> 
> 赞同：1
> 
> 时间：2012-09-26T18:37:42.757
> 
> 标签：maven, dependencies, classpath

我在 Netbeans 中有两个 Maven 项目，com.foo.bar 和 com.foo.baz。

com.foo.bar 是 com.foo.baz 的依赖项。

```
bar
+-src
| +-main
|   +-java
|   | +-com
|   |   +-foo
|   |     +-bar
|   |       +-App.java
|   +-resources
|     +-com
|       +-foo
|         +-bar
|           +-config.properties
+-target
| +-classes
|   +-com
|     +-foo
|       +-bar
|         +-App.class
|         +-config.properties
+-pom.xml 
```

当在 Netbeans 中单击以展开项目 baz->dependencies->bar->com.foo.bar 时，我看到的内容与 bar/target/classes/com/foo/bar 相同。一切都好，我想。

com.foo.bar 有线条

```
// print current directory
System.out.println(new File(".").getAbsolutePath());

// load config files
Properties conf = new Properties();
conf.load(new FileInputStream(config.properties)); 
```

com.foo.baz 类似，但`resources/`. 当我构建依赖关系 com.foo.bar 和 com.foo.baz 然后运行 ​​com.foo.baz 时，我得到

```
/home/user/NetBeansProjects/baz/.
java.io.FileNotFoundException: config.properties (No such file or directory) 
```

这是类路径的问题，还是什么？Maven不应该处理这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:57:36.283

如果你想`config.properties`从`App`类中加载，那么你可以这样做：

```
public class App {

    public void someMethod() {
        InputStream is = getClass().getResourceAsStream("config.properties");
        Properties properties = new Properties();
        try {
            properties.load(is);
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println("foo = " + properties.getProperty("foo"));
    }

    public static void main(String[] args) {
        App app = new App();
        app.someMethod();
    }
} 
```

`config.properties`相对于与 一起使用的类`getResourceAsStream()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:49:49.570

您需要将整个路径添加到文件中，就像这样

```
conf.load(new FileInputStream("com/foo/bar/config.properties")); 
```

如果您将文件放在资源内的根文件夹中，则它可以在没有路径的情况下工作。

```
bar
+-src
| +-main
|   +-java
|   | +-com
|   |   +-foo
|   |     +-bar
|   |       +-App.java
|   +-resources
|       +-config.properties
(...) 
```

# jquery - 如何使用 jquery Tiny Scrollbar 应用水平和垂直滚动条

> ID：12608268
> 
> 赞同：0
> 
> 时间：2012-09-26T18:37:50.030
> 
> 标签：jquery, css, jquery-plugins

有没有办法通过使用 jquery Tiny Scrollbar 插件来应用水平和垂直滚动条。

javascript代码是：

```
 $('#scrollbar1').tinyscrollbar(); 
```

教程链接：http: [//baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:41:59.060

这个插件不支持。

所有可用选项的列表和默认值

所有可用选项的列表和默认值

> axis: 'x' -- 垂直或水平滚动条？'x' 或 'y' 。
> 
> 滚轮：40 - 鼠标滚轮一次必须滚动多少像素。
> 
> scroll: true -- 启用或禁用鼠标滚轮。
> 
> lockscroll: true -- 如果没有更多内容，则将滚轮返回到浏览器。
> 
> size: 'auto' -- 将滚动条的大小设置为自动或固定数字。
> 
> sizethumb: 'auto' -- 将拇指的大小设置为自动或固定数字。
> 
> invertscroll: false -- 启用移动反转样式滚动。

**所以你不能同时设置 X 和 Y 轴**

我查看了代码，我可以说这个插件最小化了代码并且只实现了规范中声明的目标，并且只使用一个轴是硬编码的。为了实现使用两个轴的可能性，您需要重写此插件。这可能需要很长时间，这不是一件容易的事。

# titanium - Titanium Mobile 中的损坏导航组

> ID：12608272
> 
> 赞同：0
> 
> 时间：2012-09-26T18:38:18.500
> 
> 标签：titanium, titanium-mobile

在我的应用程序中，人们从 Window 1 到 Window 2 再到 Window 3 等等，所以导航是：Window 1 -> Window 2 -> Window 3

要从一个窗口转到下一个窗口，我使用导航组：

```
var main = Titanium.UI.createWindow({
    height:Ti.Platform.displayCaps.platformHeight,  
    width:Ti.Platform.displayCaps.platformWidth,  
    fullscreen:true, 
    navBarHidden : true,
});

var first = Ti.UI.createWindow({
    height:Ti.Platform.displayCaps.platformHeight,  
    width:Ti.Platform.displayCaps.platformWidth,  
    url:'main_windows/main.js',
    backButtonTitleImage : '../images/backb.gif',
    fullscreen:true, 
    navBarHidden : true,
});

var navGroup = Ti.UI.iPhone.createNavigationGroup({
    window:first
});

Ti.App.addEventListener('login', function(event)
{
    var lwin = Ti.UI.createWindow({
        height:Ti.Platform.displayCaps.platformHeight,  
        width:Ti.Platform.displayCaps.platformWidth,  
        url:'main_windows/login.js',
        barImage: 'images/lback.gif', 
        fullscreen:true, 
        backgroundColor: '#f7f7f7',
        navBarHidden : false,
        _parent : Titanium.UI.currentWindow,
        navGroup : navGroup,
        rootWindow : first 
    });

    navGroup.open(lwin);
});

first.navGroup = navGroup;

main.add(navGroup);

main.open(); 
```

~~~

然后在每个窗口中，我通过执行以下操作打开下一个窗口：

~~~

```
button1.addEventListener('click', function() {
    Ti.App.fireEvent('services', {
        zipcode : win.zipcode,
        user_id : win.user_id,
        user_uniqid : win.user_uniqid,
        user_name : win.user_name,
        user_email : win.user_email
    });
});

Ti.App.addEventListener('services', function(event) {
    var cwin = Titanium.UI.currentWindow;
    var swin = Titanium.UI.createWindow();

    swin.url = 'service.js';

    swin.zipcode = event.zipcode;
    swin.user_id = event.user_id;
    swin.user_uniqid = event.user_uniqid;
    swin.user_name = event.user_name;
    swin.user_email = event.user_email;

    swin.backgroundColor = '#f7f7f7';

    swin._parent = cwin;
    swin.navGroup = cwin.navGroup;
    swin.rootWindow = cwin.rootWindow;
    cwin.navGroup.open(swin);
}); 
```

~~~

当人们从 Window 1 -> Window 2 -> Window 3 开始时，这很有效，但当他们返回时则不行：

就像从窗口 1 -> 窗口 2 -> 窗口 3 -> 窗口 1 -> 窗口 2

发生这种情况时，我收到以下错误：

在意外状态下完成导航转换。导航栏子视图树可能会损坏。

我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:16:19.520

您正在使用 的`url`属性打开多个 javascript 上下文`createWindow`，这将很快杀死您的系统内存，尤其是在两个以上重量级窗口的情况下。将每个窗口放入一个 CommonJS 模块。

这可能无法解决您的问题，但这是不好的做法，其副作用可能是原因。

```
//Dont do this!!

var first = Ti.UI.createWindow({
    ...
    url:'main_windows/main.js', // Bad, opens a new context
    ...
}); 
```

而是将它放在自己的 CommonJS 模块文件中，如下所示：

```
// main_windows/main.js

function MainWindow() {
    var self = Ti.UI.createWindow();
    // Do all the initialization you were doing to this window in 'main_windows/main.js'
    return self;
}
module.exports = MainWindow; 
```

像这样实例化它：

```
var MainWindow = require('main_windows/main.js');
var first = new MainWindow(); 
```

这可以解决您的问题，或者至少将您的代码和资源分解为更易于管理的状态。

# mod-rewrite - 如何在传递其他路径时重写确切的url

> ID：12608274
> 
> 赞同：0
> 
> 时间：2012-09-26T18:38:19.873
> 
> 标签：mod-rewrite, url-rewriting, rewrite

我是 mod_rewrite 的新手，所以我知道这可能是一个简单的修复。我只想将 www.abc.com 重写为 www.xyz.com。我只想在 Firefox 中执行此操作。我不希望 www.abc.com/def 重定向到 www.xyz.com。目前，我有以下内容：

```
RewriteCond %{HTTP_HOST} ^www.abc.com$ [NC]
RewriteCond %{HTTP_USER_AGENT} "firefox" [NC]
RewriteRule ^(.*)$ https://www.xyz.com [L,R=302] 
```

我知道 ^(.*)$ 部分也允许重定向其他所有内容。我应该在那里输入什么只会重定向 www.abc.com？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:42:17.393

将规则更改为

```
RewriteRule ^/?$ https://www.xyz.com [L,R=302] 
```

# ruby-on-rails - 为什么 Rails 控制台以“n”退出？

> ID：12608277
> 
> 赞同：1
> 
> 时间：2012-09-26T18:38:41.787
> 
> 标签：ruby-on-rails, console

如果我在其中输入“n”并返回，Rails 3.2.7 控制台将退出。这不是 IRB 的功能。n 在那里被视为未声明的变量。用 Rails 控制台搜索“n”（不出所料）一无所获。

有人可以解释为什么 Rails 引入了这个别名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:40:40.317

Rails 3.1.3 不会发生这种情况。这是一个新的错误，还是有一些东西正在加载到你的 Rails 初始化程序中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:23:07.937

该方法由`debugger`gem 添加到主对象中。正如@weexpectedTHIS 所指出的，这不会发生在普通的 Rails 应用程序中。取消注释`gem 'debugger'`和`bundle install`, 并`n`作为退出。

* * *

只是为了好玩，我想我会投入一些我的侦探工作。irb 中可调用的方法似乎是`main`对象上的方法。您似乎无法按名称引用 main ：

```
1.9.3p194 :013 > main
  NameError: undefined local variable or method `main' for main:Object 
```

但您仍然可以获得主要对象：

```
1.9.3p194 :014 > self
 => main 
```

我在 IRB 控制台中为对象启用了选项卡补全，但由于某种原因，当我不在当前范围可用的命名变量上使用它时，它会获取额外的结果：

```
1.9.3p194 :001 > a = self
 => main
1.9.3p194 :002 > self.
Display all 6870 possibilities? (y or n)
1.9.3p194 :002 > a.
Display all 178 possibilities? (y or n) 
```

<200 个方法是可略读的，因此浏览那里，我可以看到这`n`确实是主要对象上的一个方法。只是为了验证，输入：

```
a.n 
```

杀死控制台。这意味着我现在可以找出它的定义位置：

```
1.9.3p194 :002 > a.method(:n).source_location
 => ["/Users/erichu/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/irb/extend-command.rb", 143] 
```

我被困在这里，因为该文件动态分配了许多方法，但我无法用命令“n”识别。

一位同事建议我在一个新的 Rails 应用程序中尝试这个，这让我尝试了不同的 gem。快速浏览列表后，`debugger`似乎是一个更有可能的选择。

对于读到这里的任何人，我很乐意重新接受另一个可以解释`debugger`gem 引入的位置和原因的答案`n`。

# java - 如何基于代码或基于 WSDL 生成 WSDD

> ID：12608282
> 
> 赞同：2
> 
> 时间：2012-09-26T18:39:07.340
> 
> 标签：java, web-services, axis

我可以访问远程服务器，它为我提供 wsdl 回复我的响应。

我为此准备了客户端，基于该 wsdl。

现在我想写一个假服务器（用于测试需要），我应该首先开始什么？我应该执行哪些步骤？只有通过此 WSDL 实现测试才有意义。是否可以使用空方法生成某种服务？

在我的应用程序中，我使用 Apache Axis 1.4

我的步骤，我的想法：

1.  我已经有：**InterfacePortType**类（据我所知，它代表远程服务器），它是基于 wsdl 为我的客户端生成的。所以我可以实现它，它将是**MyService**：

    **MyServer**类实现**InterfacePortType**

2.  然后以某种方式生成**WSDD**。我该怎么做？

[我发现这里](https://stackoverflow.com/questions/9805193/how-to-create-the-wsdd-file-for-this-webservice)没有回答类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:59:42.507

我找到了解决方案，我使用axistools-maven-plugin生成了WSDD，设置：serverSide参数为**true** - 然后它生成WSDD文件。

这是 Maven 插件部分：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>axistools-maven-plugin</artifactId>
    <executions>
        <execution>
            <id>wsdl2java-job</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>wsdl2java</goal>
            </goals>
            <configuration>
                <sourceDirectory>
                    src/main/config/wsdl2java/myfolder
                </sourceDirectory>
                <outputDirectory>
                    ${generatedSourcesDirectory}
                </outputDirectory>
                <testCases>false</testCases>
                <serverSide>true</serverSide>
                <subPackageByFileName>false</subPackageByFileName>
                <packageSpace>my.api</packageSpace>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:39:49.333

您需要客户端的**存根和服务器端的****骨架**。
谷歌这个以获得更多信息：轴从 wsdl 生成骨架

# sockets - Nodejs：如何在 net.createServer.on("data",...) 中捕获异常？

> ID：12608283
> 
> 赞同：1
> 
> 时间：2012-09-26T18:39:15.397
> 
> 标签：sockets, node.js, exception-handling

我有一个标准的套接字服务器（NO HTTP）设置如下（人为）：

```
var server = net.createServer(function(c) { //'connection' listener
  c.on('data', function(data) {
    //do stuff here
    //some stuff can result in an exception that isn't caught anywhere downstream, 
    //so it bubbles up. I try to catch it here. 
    //this is the same problem as just trying to catch this: 
    throw new Error("catch me if you can");
  });
}).listen(8124, function() { //'listening' listener
   console.log('socket server started on port 8124,');
}); 
```

现在问题是我有一些代码抛出错误，根本没有被捕获，导致服务器崩溃。作为最后一项措施，我想在这个级别上抓住他们，但我尝试过的任何事情都失败了。

*   `server.on("error",....)`
*   `c.on("error",...)`

也许我需要到达套接字而不是`c`（连接），尽管我不确定如何。

我在节点 0.6.9

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T23:16:46.963

```
process.on('uncaughtException',function(err){
   console.log('something terrible happened..')
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:49:07.567

您应该自己捕获异常。连接或服务器对象上没有任何事件可以让您按照您描述的方式处理异常。您应该在事件处理程序中添加异常处理逻辑，以避免像这样的服务器崩溃：

```
c.on('data', function(data) {
  try {
     // even handling code
  }
  catch(exception) {
    // exception handling code
  } 
```

# java - JasperReports 在 Netbeans 中完美运行，生成了我的 PDF，但编译后的 .jar 没有

> ID：12608284
> 
> 赞同：0
> 
> 时间：2012-09-26T18:39:22.477
> 
> 标签：java, jasper-reports, ireport, netbeans-7

我正在使用 JasperReport。它在 Netbeans 中运行完美，我的 PDF 是在 JRviewer 上生成的。

但是，当我尝试运行编译后的 .jar 文件时，整个 JasperReports 部分根本不起作用。（JRviewer 没有出现）

我在我的类路径中使用 jasperReport4.5.0 库：Commons-beanutils、Commons collections、commons digester、commons javaflow、commons logging、iText、com-jaspersoft-ireport-jasperserver、com-jaspersoft-ireport-components、com-jaspersoft- ireport，com-jaspersoft-jrx。

你能给我一些建议吗？多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:48:36.297

看起来你还没有把 spring-core jar 放在你的类路径中。也许您没有使用 spring，但 Jasper Reports 确实需要在类路径中使用 spring，正如您在[Jasper Reports POM](http://mvnrepository.com/artifact/net.sf.jasperreports/jasperreports/4.7.0)中看到的那样。所需工件的完整列表在那里。

# ios - UIButton 中的动画图像

> ID：12608286
> 
> 赞同：18
> 
> 时间：2012-09-26T18:39:36.940
> 
> 标签：ios, xcode, uibutton, uiviewanimation

动画按钮图像的最佳方法是什么？

假设我想循环 6 帧并且让用户仍然可以单击按钮？

我应该为图像制作动画并在界面生成器中只在其顶部添加一个不可见的按钮吗？

有没有办法在定义中为它们设置动画`UIButton`？

还是将图像制作成动画并找到用户接触点并采取行动更好？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-26T19:08:16.990

您可以使用`UIButton`. 这将允许按钮的行为与您的图像动画一样正常。这是一个例子：

```
NSMutableArray *imageArray = [NSMutableArray new];

for (int i = 1; i < 4; i ++) {
    [imageArray addObject:[UIImage imageNamed:[NSString stringWithFormat:@"%d.png",i]]];
}

[myButton setImage:[UIImage imageNamed:@"1.png"] forState:UIControlStateNormal];

[myButton.imageView setAnimationImages:[imageArray copy]];
[myButton.imageView setAnimationDuration:0.5];

[myButton.imageView startAnimating]; 
```

# python - 使用 try/except 与 psycopg2 或“关闭”？

> ID：12608288
> 
> 赞同：23
> 
> 时间：2012-09-26T18:39:40.967
> 
> 标签：python, postgresql, psycopg2

我在 Python 中使用 Psycopg2 来访问 PostgreSQL 数据库。我很好奇使用该`with closing()`模式创建和使用游标是否安全，或者我是否应该使用显式`try/except`包装查询。我的问题是关于插入或更新以及交易。

据我了解，所有 Psycopg2 查询都发生在事务中，由调用代码来提交或回滚事务。如果在一个`with closing(...`块内发生错误，是否发出回滚？在旧版本的 Psycopg2 中，明确发出了回滚，`close()`但现在不再是这种情况（请参阅[http://initd.org/psycopg/docs/connection.html#connection.close](http://initd.org/psycopg/docs/connection.html#connection.close)）。

举个例子，我的问题可能更有意义。这是一个使用示例`with closing(...`

```
with closing(db.cursor()) as cursor:
     cursor.execute("""UPDATE users                    
             SET password = %s, salt = %s
             WHERE user_id = %s""",
             (pw_tuple[0], pw_tuple[1], user_id))
     module.rase_unexpected_error()
     cursor.commit() 
```

当 module.raise_unexpected_error() 引发错误时会发生什么？事务是否回滚？据我了解事务，我需要提交它们或回滚它们。那么在这种情况下，会发生什么？

或者我可以这样写我的查询：

```
cursor = None
try:
    cursor = db.cursor()
    cursor.execute("""UPDATE users                    
            SET password = %s, salt = %s
            WHERE user_id = %s""",
            (pw_tuple[0], pw_tuple[1], user_id))
    module.rase_unexpected_error()
    cursor.commit()
except BaseException:
    if cursor is not None:
        cursor.rollback()
finally:
    if cursor is not None:
        cursor.close() 
```

另外我应该提一下，我不知道 Psycopg2 的连接类`cursor()`方法是否会引发错误（文档没有说）所以安全总比抱歉好，不是吗？

我应该使用哪种发出查询和管理事务的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T19:04:04.230

[您指向 Psycopg2 文档的链接](http://initd.org/psycopg/docs/connection.html#connection.close)本身就解释了它，不是吗？

> ...请注意，关闭连接而不首先提交更改将 **导致任何挂起的更改被丢弃，就好像执行了 ROLLBACK 一样**（除非选择了不同的隔离级别：请参阅 set_isolation_level()）。
> 
> 在 2.2 版更改: 以前 Psycopg 在 close() 上发出显式回滚。该命令可能在不适当的时间发送到后端，因此**Psycopg 当前依赖后端隐式丢弃未提交的更改**。尽管在事务期间关闭连接（当状态为 STATUS_IN_TRANSACTION 时），一些中间件已知行为不正确，例如 PgBouncer 报告不干净的服务器并丢弃连接。为避免此问题，您可以确保在关闭之前使用 commit()/rollback() 终止事务。

因此，除非您使用不同的隔离级别或使用 PgBouncer，否则您的第一个示例应该可以正常工作。但是，如果您希望对事务期间发生的事情进行更细粒度的控制，那么 try/except 方法可能是最好的，因为它与数据库事务状态本身平行。

# regex - 为什么命令行不打印 egrep 的结果？如何让它打印？

> ID：12608289
> 
> 赞同：0
> 
> 时间：2012-09-26T18:39:40.357
> 
> 标签：regex, windows, cmd, grep

我正在`egrep`命令行中进行测试，但我无法得到任何结果。这是我在命令行中的输入。我想在文件中找到一些模式：

```
egrep -i 'this is' C:\regExp\file.txt 
```

在我按 Enter 后，没有打印任何内容。为什么？如何让它打印结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:20:06.237

如果您的文件是 Unicode 格式，您的表达式将不匹配，因为文件中的字符占用 2 个字节而不是一个字节。这样的文件看起来像这样

```
FF FE 66 00 6F 00 6F 00    ÿþf.o.o. 
```

而不是这个

```
66 6F 6F                   foo 
```

在十六进制编辑器中。

在记事本中打开文件，然后单击`File > Save As...`并检查`Encoding`对话框底部的字段。如果文件是 Unicode 编码的，`Unicode`则将预先选择该值。

# objective-c - 在conformsToProtocol 检查后强制转换

> ID：12608290
> 
> 赞同：1
> 
> 时间：2012-09-26T18:39:51.467
> 
> 标签：objective-c, casting, protocols

我只是想更深入地了解Objective C。

为什么我必须在通话前进行投射以避免警告？这对编译器来说不是小菜一碟吗？我是否缺少任何动态方面？

```
if ([a.class conformsToProtocol:@protocol(P1)])
{
  [(id<P1>)a p1Message];
} 
```

我的意思是，我从 C/C++ 的角度理解它，但毕竟我使用的是 Objective C 编译器而且我不喜欢强制转换。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:29:36.750

如果`a`是在编译时将自己声明为实现的特定类型，`P1`那么您不需要强制转换。

如果`a`是类型，`id`那么只有当返回类型不明确并且您实际使用它，或者它有参数时，您才需要强制转换。这通常意味着方法名称有多个方法签名，`p1Message`因此编译器不知道期望哪个。

如果`a`是某种类型，它没有将自己声明为实现，`P1`那么——除非它单独（并重复地）声明`p1Message`——你会收到一个警告，因为你正在调用一个对象可能没有实现的方法。

如果我不得不猜测，可能`a`被声明为类型`id`而不是`id <P1>`（这对于代表来说更正常）并且您有多个`p1Message`s 飞来飞去。您也可以主动加入演员表，因为有一天您可能有多个具有相同名称的不同消息，并且可能实现的其他人`p1Message`不必知道项目中有人使用该方法名称的所有其他地方。

编译器不能从`conformsToProtocol:`检查中推断出调用是安全的，`p1Message`因为它是一个动态运行时。您可能`conformsToProtocol:`在编译时或运行时替换了不同的实现，这意味着假设编译器知道它的作用是不安全的。该调用将像任何其他调用一样被动态调度。

# java - 如何设置 SUDO_ASKPASS 环境变量？

> ID：12608293
> 
> 赞同：7
> 
> 时间：2012-09-26T18:40:04.523
> 
> 标签：java, shell, sudo

设置 SUDO_ASKPASS 环境变量是什么意思？你怎么做呢？我在哪里申报？

我正在尝试使用 shell 脚本在几分钟后关闭我的计算机并使用 java 启动此脚本。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-22T23:49:48.433

所以我不确定我会用`$SUDO_ASKPASS`这个。基本上， 的值`$SUDO_ASKPASS`是一个可执行文件，它会在调用时将您的密码吐出标准输出。所以，如果你的密码是 'foo'，你可以写一个 shell 脚本：

```
#!/bin/bash
echo 'foo' 
```

并将其放入`~/bin/pw.sh`. 然后，您将设置环境变量并按如下方式执行命令：

```
SUDO_ASKPASS=${HOME}/bin/pw.sh sudo shutdown -h now 
```

该示例假设您在达尔文；`shutdown`在不同的操作系统上表现不同。

一种更智能（也更安全）的方法是`NOPASSWD`使用`/etc/sudoers`. 我们将添加这样的一行：

```
jane ALL=NOPASSWD: /sbin/shutdown 
```

这再次假设您使用的是 Mac。你的名字是简。改变那个。这样 sudo 在您发出命令时不会要求输入密码`/sbin/shutdown`。（正确）[编辑 sudoers](http://www.sudo.ws/visudo.man.html)的命令是`visudo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-26T14:13:03.690

**特定于 Mac 的答案：**

如果您不希望在某个文件中使用明文密码，您还可以调用 GUI 提示来手动输入密码，无论何时`sudo -A ...`调用类似的东西。为此，请创建一个包含以下内容的二进制文件（取自[此答案](https://apple.stackexchange.com/a/23514)）：

```
#!/bin/bash    
pw="$(osascript -e 'Tell application "System Events" to display dialog "Password:" default answer "" with hidden answer' -e 'text returned of result' 2>/dev/null)" && echo "$pw" 
```

例如，您可以将其放在一个名为`~/bin/pw.sh`. 然后通过执行使其可执行`chmod +x ~/bin/pw.sh`。

最后设置环境变量指向这个文件。因此将以下内容放入`~/.bashrc`（或者`~/.zshrc`如果您使用 Z shell）：

```
SUDO_ASKPASS=${HOME}/bin/pw.sh 
```

最后通过执行`source ~/.bashrc`（或`source ~/.zshrc`）然后测试一切`sudo -A ls`。

# objective-c - 使用 ObjC 在 Mountain Lion 中显示捆绑内容

> ID：12608297
> 
> 赞同：0
> 
> 时间：2012-09-26T18:40:11.683
> 
> 标签：objective-c, bundle, nsworkspace

如何使用 Mountain Lion 显示捆绑包内容`[NSWorkspace selectFile:nil inFileViewerRootedAtPath:pathEndingWithDotBundle]`？我的意思是：`pathEndingWithDotBundle`是一个基本名称类似于“folder.bundle”的路径。如果我这样调用这个方法，终端会打开，我不知道为什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:02:58.147

它会打开终端，因为它认为您要启动捆绑包，这是默认应用程序。我会为此打开一个错误报告，因为文档没有说它将打开路径。它说它将在文件查看器中显示它。这是一个错误是合理的（因为包在*逻辑上*不是目录；它只是*物理*上的目录）。但是它做一些随机的事情，比如尝试启动另一个程序是没有意义的。

也就是说，它很容易解决。只需选择`Contents`文件夹，该文件夹必须包含在包中：

```
[[NSWorkspace sharedWorkspace] selectFile:[pathEndingWithDotBundle stringByAppendingPathComponent:@"Contents"] 
                 inFileViewerRootedAtPath:pathEndingWithDotBundle]; 
```

在 10.6+ 中，您可以使用`activateFileViewerSelectingURLs:`

```
NSURL *URL = [NSURL fileURLWithPath:[pathEndingWithDotBundle stringByAppendingPathComponent:@"Contents"]];
[[NSWorkspace sharedWorkspace] activateFileViewerSelectingURLs:@[URL]]; 
```

# c# - 从 FlowLayoutPanel 中选择 UserControl

> ID：12608300
> 
> 赞同：3
> 
> 时间：2012-09-26T18:40:25.740
> 
> 标签：c#, select, user-controls, flowlayoutpanel

在这个问题的帮助下，我在 FlowPanelLayout 中设置了 UserControls： [对于每个 DataTable，将 UserControl 添加到 FlowLayoutPanel](https://stackoverflow.com/questions/12589810/for-each-datatable-add-usercontrol-to-flowlayoutpanel)

我现在正在尝试实现一个单击事件，该事件允许我在已选择的 UserControl 周围放置一个边框。我已经这样做了：

```
 private void User_Load(object sender, EventArgs e)
    {
        flowlayoutpanelUsers.HorizontalScroll.Visible = false;

        // Load and Sort Users DataTable
        DataTable datatableUsers = UserMethods.GetUsers().Tables["Users"];
        datatableUsers.DefaultView.Sort = "Name";
        DataView dataviewUsers = datatableUsers.DefaultView;

        // Loop Through Rows and Add UsersGrid to FlowLayoutPael
        foreach (DataRowView datarowviewUsers in dataviewUsers)
        {
            var UsersGrid = new UsersGrid
            {
                Username = datarowviewUsers["Username"].ToString(),
                User = datarowviewUsers["Name"].ToString(),
                Admin = datarowviewUsers["Administrator"].ToString(),
            };
            flowlayoutpanelUsers.Controls.Add(UsersGrid);
            UsersGrid.MouseClick += new MouseEventHandler(user_click);
        }
    }

    private UsersGrid selectedUser;

    void user_click(object sender, EventArgs e)
    {
        if (selectedUser != null)
            selectedUser.BorderStyle = BorderStyle.None;
        selectedUser = (UsersGrid)sender;
        selectedUser.BorderStyle = BorderStyle.FixedSingle;
    } 
```

我的问题是，它仅在我单击 UserControl 中的空白区域时才有效，但在用户单击两个标签或图像时无效。我如何使它也适用于所有子对象？

另外，我怎样才能使用选定的 UserControl 来做其他事情，比如打开一个显示该选定用户的所有详细信息的表单？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T15:07:10.277

I have a few suggestions for you. At the bottom of my response I included code that demonstrates my suggestions.

**Suggestion 1: Fixing MouseClick in your UC**
When you register the MouseClick event for a UserControl (UC) you're doing so for the UserControl itself, not for any controls that you place on the UserControl such as your Labels, etc. If you click one of these child controls the click won't be 'seen' by the underlying UC.

To fix this register the MouseClick event for all your child controls; you can even register the same MouseClick event handler you have for the UserControl itself.

**Suggestion 2: Setting your UC's BorderStyle**
I'd move your code for setting the UC's `BorderStyle` into the UC itself. Create public property `IsSelected` that's set to true when the UC is selected. In the property's setter update the UC's `BorderStyle` property depending on the value of the property.

Exposing an `IsSelected` property for your UC can be handy: you can query a group of these UCs to see which ones are selected rather than trying to track this status outside of the control like through a Form-level variable.

*Edit in response to your comment:*
Here's an example of how you might query the UCs in a FlowLayoutPanel to see if any are selected and if one is found how you might take some action. In this case the action is to call an `EditUser` method that takes as parameters values you get from properties in the selected UC:

```
var selectedUC = flowLayoutPanel.Controls.Cast<UserControl1>().FirstOrDefault(uc => uc.IsSelected);
if (selectedUC != null) {
    // Use the properties of the UC found to be selected as parameters is method EditUser.
    EditUser(selectedUC.Name, selectedUC.Username, selectedUC.Administrator);
} 
```

**Suggestion 3: Managing selection in a group of your UCs**
If you want to unselect all UCs in a group except for the one that the user clicks (i.e. selects) you'll need to create an event in your UC that fires when a UC is clicked. The handler for this event explicitly sets `IsSelected` to false for all UCs in a set (such as in a container type control such as a Form, FlowLayoutPanel, etc.), the MouseClick handler in the UC that was clicked will then set the clicked UC's `IsSelected` to true.

It's worth considering creating *another* UserControl type that manages a group of your UCs. This new UserControl can encapsulate the code for the creation and state management of sets of your UC and would faciliate using your UCs in other projects as well as keeping the code of Forms hosting your UCs a bit cleaner.

* * *

I figured that rather than include a series of disjointed code snippets for each of my suggestions I'd include what I'm hoping is the minimum amount of code to allow you to reproduce what I'm talking about.

Create a new Visual Studio Winform project and use the following for class `Form1`:

```
public partial class Form1 : Form
{
    public Form1() {
        InitializeComponent();

        flowLayoutPanel = new FlowLayoutPanel {
            Dock = DockStyle.Fill,
        };
        this.Controls.Add(flowLayoutPanel);
        // Add several sample UCs.
        for (int i = 0; i < 10; i++) {
            var uc = new UserControl1();
            uc.WasClicked += UsersGrid_WasClicked;
            flowLayoutPanel.Controls.Add(uc);
        }
    }

    FlowLayoutPanel flowLayoutPanel;

    // Event handler for when MouseClick is raised in a UserControl.
    void UsersGrid_WasClicked(object sender, EventArgs e) {
        // Set IsSelected for all UCs in the FlowLayoutPanel to false. 
        foreach (Control c in flowLayoutPanel.Controls) {
            if (c is UserControl1) {
                ((UserControl1)c).IsSelected = false;
            }
        }
    }
} 
```

Next add a UserControl to the project. Keep the name `UserControl1` and add a couple Labels and a PictureBox. Use this code for class `UserControl1`:

```
public partial class UserControl1 : UserControl
{
    public UserControl1() {
        InitializeComponent();
        this.Load += UsersGrid_Load;
    }

    // Event fires when the MouseClick event fires for the UC or any of its child controls.
    public event EventHandler<EventArgs> WasClicked;

    private void UsersGrid_Load(object sender, EventArgs e) {
        // Register the MouseClick event with the UC's surface.
        this.MouseClick += Control_MouseClick;
        // Register MouseClick with all child controls.
        foreach (Control control in Controls) {
            control.MouseClick += Control_MouseClick;
        }
    }

    private void Control_MouseClick(object sender, MouseEventArgs e) {
        var wasClicked = WasClicked;
        if (wasClicked != null) {
            WasClicked(this, EventArgs.Empty);
        }
         // Select this UC on click.
         IsSelected = true;
    }

    private bool _isSelected;
    public bool IsSelected {
        get { return _isSelected; }
        set {
            _isSelected = value;
            this.BorderStyle = IsSelected ? BorderStyle.Fixed3D : BorderStyle.None;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-12T16:28:31.333

我知道这很旧，但我来到这里寻找有关如何在 Container 中进行 UC 选择的一些指示。杰伊的回答效果很好。

只有一个更新：UsersGrid_Load 方法将只参与顶级控件，容器的子项将不会参与 WasClicked 事件。

```
private void UsersGrid_Load(object sender, EventArgs e) {
    // Register the MouseClick event with the UC's surface.
    this.MouseClick += Control_MouseClick;
    // Register MouseClick with all child controls.
    RegisterMouseEvents(Controls);
} 
```

将递归方法 RegisterMouseEvents 添加到 UserControl

```
 private void RegisterMouseEvents(ControlCollection controls)
    {
        foreach (Control control in controls)
        {
            // Subscribe the control to the 
            control.Click += Control_MouseClick;
            if (control.HasChildren) RegisterMouseEvents(control.Controls);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:45:08.483

您可以尝试订阅`GotFocus`UserControl 上的事件。

警告：

> 由于此事件使用冒泡路由，因此接收焦点的元素可能是子元素，而不是实际附加事件处理程序的元素。检查事件数据中的 Source 以确定获得焦点的实际元素。

[UIElement.GotFocus 事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.gotfocus.aspx)

**更新**

这个问题可能是合适[的：.Net (Windows Forms) 用户控件的 Click event](https://stackoverflow.com/questions/5820490/click-event-for-net-windows-forms-user-control)

# javascript - 如何在内部显示“建议”用JavaScript？

> ID：12608302
> 
> 赞同：1
> 
> 时间：2012-09-26T18:40:30.840
> 
> 标签：javascript, styles

我正在建立一个注册页面。我想让它像 SO 那样：你在一个字段中看到文本“John Smith（可选）”，当你开始输入时，文本消失了。你如何在 JavaScript 中做到这一点？（不要怪我什么都没尝试，我是JS菜鸟）

可选：注意建议是灰色的，但输入的文本变成黑色。我也想要这样的效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:04:04.853

除了 HTML5 的`placeholder`东西和实现这一点的所有其他方法之外，我最喜欢使用 javascript（html5 之前）执行此操作的方法是以下博客文章：

[http://kyleschaeffer.com/best-practices/input-prompt-text/](http://kyleschaeffer.com/best-practices/input-prompt-text/)

让它如此出色的是使用现有`title`属性，如果您不使用，这也是一个很好的屏幕阅读器功能（纯文本浏览器、文本转语音、视障 ADA 合规性等）具有显式`for`和`id`属性匹配的标签。

然而，在我看来，HTML5 和 Modernizer 已经完全取代了对这个功能的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T19:02:26.150

[占位符演示](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_input_placeholder)

```
<input type="text" name="email" placeholder="E-mail" /> 
```

如果你愿意，你也可以用[css来设置你的占位符](http://davidwalsh.name/html5-placeholder-css)

# javascript - 警告未在 JavaScript 代码中触发

> ID：12608306
> 
> 赞同：0
> 
> 时间：2012-09-26T18:40:41.017
> 
> 标签：javascript, jquery

我有以下代码，第一个警报给了我一个 X，但是 if 块永远不会触发。我确定这很简单，我做错了...

```
$('.collectionofdates1>.datenumber').click(function(){
    alert($(this).html());
    if($(this).html() == "X"){
    alert('asdf');
    return false;
    }
else{
    $('.collectionofdates1 .datenumber').removeClass('selecteddate');
$(this).addClass('selecteddate');
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:42:59.767

2 条建议：

1）在你的选择器中放置空格：`$('.collectionofdates1 > .datenumber')`

2) 当你的意思是 text() 时使用 text()，而不是 html()。还使用 .trim() 确保您没有空格：`if($(this).text().trim() == 'X'){`

# wpf - 如何从 DataTemplate 绑定到 Selector.IsSelectionActive？

> ID：12608307
> 
> 赞同：1
> 
> 时间：2012-09-26T18:40:44.023
> 
> 标签：wpf

我为 ListBoxItem 定义了以下样式：

```
 <Style x:Key="detailListBoxItemStyle" TargetType="{x:Type ListBoxItem}">
    <Setter Property="AutomationProperties.AutomationId" Value="{Binding Path=StringTableKey}"/>
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
    <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
    <Setter Property="Padding" Value="2,0,0,0"/>
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListBoxItem}">
                <Border x:Name="Bd" Margin="4" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsSelected" Value="true">
                        <Setter Property="Background" TargetName="Bd" Value="{DynamicResource MenuItemSelectedBackgroundBrush}"/>
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                    </Trigger>
                    <Trigger Property="IsSelected" Value="false">
                        <Setter Property="Background" TargetName="Bd" Value="{DynamicResource MenuItemUnSelectedBackgroundBrush}"/>
                    </Trigger>
                    <!-- This is the case when a detail is selected (the master list loses focus). -->
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsSelected" Value="true"/>
                            <Condition Property="Selector.IsSelectionActive" Value="false"/>
                        </MultiTrigger.Conditions>
                        <!--<Setter Property="Opacity" TargetName="Bd" Value=".4"/>-->
                    </MultiTrigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

应用此样式的 ListBox 定义为：

```
<ListBox 
    x:Name="listBox"
    Margin="0,60,0,0"
    MaxHeight="600"
    Foreground="Transparent"
    Style="{StaticResource detailListBoxStyle}" 
    ItemContainerStyle="{StaticResource detailListBoxItemStyle}" 
    ItemsSource="{Binding Source={StaticResource detailCollectionViewSource}}" 
    ItemTemplateSelector="{StaticResource detailDataTemplateSelector}"
    TouchDown="ListBoxTouchDown"
    TouchMove="ListBoxTouchMove"
    TouchUp="ListBoxTouchUp"
    KeyDown="ListBoxKeyDown">
    <ListBox.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <TextBlock Margin="0,10,0,0" FontWeight="Bold" FontSize="20" Foreground="White" Text="{Binding Path=Name}"/>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
        </GroupStyle>
    </ListBox.GroupStyle>
</ListBox> 
```

我有一个 ListBoxItem 的 DataTemplate，它可以是：

```
<DataTemplate x:Key="detailOnOffTemplate">
    <Grid Height="50" Width="{StaticResource detailWidth}">
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <TextBlock x:Name="tb1" Margin="4,2,0,0" Grid.Row="0" Style="{StaticResource MenuTextStyle}" Text="{Binding DisplayName}" VerticalAlignment="Top" TextAlignment="Left">
         <TextBlock.Effect>
            <DropShadowEffect Color="White" ShadowDepth="0" BlurRadius="7"/>
        </TextBlock.Effect>
        </TextBlock>
    </Grid>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}, Mode=FindAncestor}}" Value="True">
            <Setter TargetName="tb1" Property="Foreground" Value="White"/>
            <Setter TargetName="tb1" Property="Effect" Value="{x:Null}"/>
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

我需要能够从我的 DataTemplate 中绑定到“Selector.IsSelectionActive”，但没有任何效果。我试过这些东西：

```
 <DataTrigger Binding="{Binding Selector.IsSelectionActive, RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}, Mode=FindAncestor}}" Value="True">

            <Trigger Binding="{Binding Selector.IsSelectionActive, RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}, Mode=FindAncestor}}" Value="True">

            <Trigger "Selector.IsSelectionActive" Value="True"> 
```

基本上，我想要 DataTemplate 的 ControlTemplate 中包含的相同触发器：

```
 <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsSelected" Value="true"/>
                            <Condition Property="Selector.IsSelectionActive" Value="false"/>
                        </MultiTrigger.Conditions>
                        <!--<Setter Property="Opacity" TargetName="Bd" Value=".4"/>-->
                    </MultiTrigger> 
```

或者，我怎么能知道“IsSelected”但没有键盘焦点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T21:34:31.433

您尝试的第一个选项是正确的异常，您没有确定这是一个附加属性，因此看起来您正在尝试绑定到一个名为 Selector 的属性，该属性返回一个具有属性名称 IsSelectionActive 的对象。所以我认为类似以下的方法会起作用：

```
<DataTrigger Binding="{Binding Path=(Selector.IsSelectionActive), RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}}" Value="True"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-09T18:56:20.983

以前的答案对我不起作用，但经过几个小时的播放后：

这里的关键（我认为）是 IsSelectionActive FALSE 首先出现。该触发器也是与 IsSelected 结合的多重触发器。在这种情况下，我不必使用括号。但这可能是因为我使用的是最新的 .net 框架、Wpf 和 Visual Studio，所以您可能需要上一个答案中提到的括号。

红色，黄色和白色仅用于此示例，请记住更改这些颜色。

```
<ControlTemplate.Triggers>
    <MultiTrigger>
        <!-- selected, but not focused -->
        <MultiTrigger.Conditions>
            <Condition Property="Selector.IsSelectionActive" Value="False" />
            <Condition Property="IsSelected" Value="True" />
        </MultiTrigger.Conditions>
        <Setter Property="Background" TargetName="Bd" Value="Yellow" />
    </MultiTrigger>
    <MultiTrigger>
        <!-- selected, and focused -->
        <MultiTrigger.Conditions>
            <Condition Property="Selector.IsSelectionActive" Value="True" />
            <Condition Property="IsSelected" Value="True" />
        </MultiTrigger.Conditions>
        <Setter Property="Background" TargetName="Bd" Value="Red" />
        <Setter Property="Foreground" Value="White" />
    </MultiTrigger>                    
</ControlTemplate.Triggers> 
```

# javascript - 在卸载前检测表单更改？

> ID：12608310
> 
> 赞同：2
> 
> 时间：2012-09-26T18:40:53.150
> 
> 标签：javascript, jquery

这已经被问过了，我知道，但我不明白为什么这对我不起作用。

[http://jsfiddle.net/M9tnP/16/](http://jsfiddle.net/M9tnP/16/)

尝试检测表单更改，如果用户尝试离开，我希望他们确认他们将丢失更改...

```
var dirty = false;
$("form#add_item :input").change(function() {
    dirty = true;
});

$("window").on('beforeunload', function() {
    if (dirty) {
        return 'You have unsaved changes! If you leave this page, your changes will be lost.';
    } 
```

});​</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T18:43:50.420

You need to set the event handler for `onbeforeunload` directly on the `window` object:

```
var dirty = false;
$("form#add_item :input").change(function() {
    //alert("form changed!")
    dirty = true;
});

window.onbeforeunload = function() {
    if (dirty) {
        return 'You have unsaved changes! If you leave this page, your changes will be lost.';
    }
};​ 
```

**Working example: [http://jsfiddle.net/M9tnP/20/](http://jsfiddle.net/M9tnP/20/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T21:12:06.217

你需要：

```
$(window).on('beforeunload', function() {...}) 
```

， 不是：

```
$("window").on('beforeunload', function() {...}) 
```

（周围没有引号`window`）。将javascript 变量`$(window)`包装在一个 jQuery 对象中，其中选择页面上的所有标签，其中正好有 0 个。`window``$("window")``<window>`

（大多数时候。事实上你可以这样做`$('body').append('<window></window>')`，然后`$("window")`匹配那个新标签——但不要那样做。）

# javascript - IE9 中的引导下拉菜单不起作用

> ID：12608311
> 
> 赞同：1
> 
> 时间：2012-09-26T18:40:54.747
> 
> 标签：javascript, ruby-on-rails-3, twitter-bootstrap, twitter, internet-explorer-9

我想使用 bootstrap twitter 在 rails 3.2.8 创建一个下拉菜单。该下拉菜单在 Firefox 中有效，但在 IE9 中无法打开。这是我到目前为止的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<title><%= full_title(yield(:title)) %></title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript" src="https://raw.github.com/twitter/bootstrap/master/js/bootstrap-
dropdown.js"></script>

<%= stylesheet_link_tag "application", media: "all"%>
<%= javascript_include_tag%>
<%= csrf_meta_tags %>
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>
<body>
<div class="navbar .navbar-fixed-top">
<div class="nav-collapse">
<div class="navbar-inner">
    <div class="container">
        <a class="brand" href="#">
            Home
        </a>
        <ul class="nav">
            <li class="dropdown" id="fat-menu">
                <a href="#fat-menu" class="dropdown-toggle" data-toggle="dropdown">
                    Drop-Down Menu
                    <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                    <li><a>SAve</a></li>
                    <li class="divider"></li>
                    <li><a>Print</a></li>
                </ul>
            </li>
        </ul>
    </div>
</div>
</div>
</div>
<script>$(function() {$('.dropdown-toggle').dropdown()});</script>       
<div class="container">
  <%= yield %>
</div>
</body>
</html> 
```

请问我需要做些什么来解决IE9上的问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:53:25.217

您不能使用[https://raw.github.com/twitter/bootstrap/master/js/bootstrap-dropdown.js](https://raw.github.com/twitter/bootstrap/master/js/bootstrap-dropdown.js)因为 MIMETYPE 是 text/plain 显然 IE9 会拒绝它。

只需下载资源并在本地提供或找到有效的 cdn。

* * *

例如：http: [//jsfiddle.net/2D7wD/1/](http://jsfiddle.net/2D7wD/1/)

使用：`<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/js/bootstrap.min.js"></script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:54:59.540

您不需要`data-toggle`属性*和*Javascript 调用，脚本将为`data-toggle`您查找并实例化插件。

尝试删除其中一个。

# ruby-on-rails - Ruby 需要 ::File 语法

> ID：12608312
> 
> 赞同：3
> 
> 时间：2012-09-26T18:40:57.063
> 
> 标签：ruby-on-rails, ruby

为什么在某些情况下，需要在 ruby​​ 中使用 File 类的文件前面带有一个空白命名空间，如**config.ru的以下代码**

```
require ::File.expand_path('../config/environment',  __FILE__) 
```

而在其他地方则没有：

```
require File.expand_path('../../config/boot',  __FILE__) 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:46:55.630

显式指定的范围解析运算符（如在第一步中）确保 File 类将从全局命名空间加载。

如果一个模块在其命名空间中重新定义了 File 类，则第二个版本将选择该类而不是全局类。

在大多数情况下，可以放心地忽略这一点，即使未定义范围解析运算符，您也可以假设您的类正在由全局命名空间加载

# javascript - 日文字符：使用 jquery 将小写转换为大写

> ID：12608325
> 
> 赞同：5
> 
> 时间：2012-09-26T18:41:52.227
> 
> 标签：javascript, jquery

我尝试使用 toUppercase() 方法将日文字符转换为大写，但它返回相同的字符串而不进行转换。

有没有其他方法可以使用 jquery 或 javascript 来做到这一点。

```
fieldValue = "ショウコ";              //japanese string.

function convertToUppercase(fieldValue)
{      
 convertedValue = fieldValue.toUpperCase();
 return convertedValue;
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T19:02:43.187

维基百科上有一个[所有“小”字母](http://ja.wikipedia.org/wiki/%E6%8D%A8%E3%81%A6%E4%BB%AE%E5%90%8D)（称为“youon”）的列表：

```
ぁぃぅぇぉっゃゅょゎァィゥェォヵㇰヶㇱㇲッㇳㇴㇵㇶㇷㇷ゚ㇸㇹㇺャュョㇻㇼㇽㇾㇿヮ 
```

您可以使用[switch 语句](http://www.w3schools.com/js/js_switch.asp)将它们转换为“大”等价物，为方便起见，我将在此处输入：

```
あいうえおつやゆよわアイウエオカクケシスツトヌハヒフプヘホムヤユヨラリルレロワ 
```

请注意，当辅音变“大”时，它们的读法不一定相同。例如，何ヶ月读作“なんかげつ(nankagetsu)”，而不是“なんけげつ(nankegetsu)”。っ，表示下一个音节的[声门停止](http://en.wikipedia.org/wiki/Glottal_stop)，当它变大时读作“tsu”。

“大”元音表示它们需要有自己的音节长度。（这也有一个术语，但我不是语言学家——对不起！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:46:54.380

我对日文字符的名称有点无知，但我知道[Sugar.js](http://sugarjs.com/api/String/hiragana)有很多方法可以操作和转换这些字符。它有`zenkaku`、`hankaku`、`hiragana`和等方法`katakana`。

这是[Sugarjs 的字符串 API的链接](http://sugarjs.com/api/String)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:52:16.610

感谢您的帮助并指导我正确的方式

最后我想出了这个解决方案。

```
 function convertBigKana(kanaVal){
        var smallKana = Array('ァ','ィ','ゥ','ェ','ォ','ヵ','ヶ','ㇱ','ㇲ','ッ','ㇳ','ㇴ','ㇵ','ㇶ','ㇷ','ㇸ','ㇹ','ㇺ','ャ','ュ','ョ','ㇻ','ㇼ','ㇽ','ㇾ','ㇿ','ヮ');
        var bigKana   = Array('ア','イ','ウ','エ','オ','カ','ケ','シ','ス','ツ','ト','ヌ','ハ','ヒ','フ','ヘ','ホ','ム','ヤ','ユ','ヨ','ラ','リ','ル','レ','ロ','ワ');
        var ckanaVal = '';
        for (var i = 0; i < kanaVal.length; i++){
            //var index = smallKana.indexOf(kanaVal.charAt(i)); //indexOf and stri[i] don't work on ie
            var index = jQuery.inArray(kanaVal.charAt(i), smallKana);
            if (index !== -1) {
                ckanaVal+= bigKana[index];
            }
            else
            {
                ckanaVal+= kanaVal.charAt(i);
            }
        }
        return ckanaVal;
    } 
```

# wcf - Service 实现了多个 ServiceContract 类型，然后 Restful Service 抛出 ServiceActivationException

> ID：12608329
> 
> 赞同：3
> 
> 时间：2012-09-26T18:42:23.867
> 
> 标签：wcf, rest, autofac

因此，出于一些顾虑，我将最初的单一接口契约拆分为两个独立的契约。现在，我只有一个类（部分）实现了这两个接口，我想通过 WCF 将它们全部作为 REST 服务提供。合同如下所列。

我正在将 Autofac 用于 WCF 服务主机。

下面是我的 .svc 文件代码

对于 WCF 服务：`Factory="Autofac.Integration.Wcf.AutofacServiceHostFactory, Autofac.Integration.Wcf"`

对于 RESTful 服务：`Factory="Autofac.Integration.Wcf.AutofacWebServiceHostFactory, Autofac.Integration.Wcf"`

**WCF 示例**：

对于 wcf 服务

```
public interface IEmployeeCommandService {}
public interface IEmployeeQueryService {}
public partial class EmployeeService : IEmployeeCommandService {}
public partial class EmployeeService : IEmployeeQueryService {}
public partial class EmployeeService {} 
```

我的 Web.config 文件如下所示

```
<service behaviorConfiguration="ServiceBehavior" name="Application.EmployeeService">
    <endpoint address="" binding="basicHttpBinding" contract="Application.IEmployeeCommandService" />
    <endpoint address="" binding="basicHttpBinding" contract="Application.IEmployeeQueryService" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
</service> 
```

我的**EmployeeService.svc**代码看起来像

```
<%@ ServiceHost Service="Application.EmployeeService, Application"
Factory="Autofac.Integration.Wcf.AutofacServiceHostFactory, Autofac.Integration.Wcf"%> 
```

使用这种方法，普通的 WCF 服务对我来说工作得很好。浏览**EmployeeService.svc**时，我可以看到命令和查询服务操作。

我正在尝试 RESTFul 服务的类似方法，如下所述。但是当我浏览我的 RESTFul 服务时出现错误。

**RESTFul 示例**：

```
public interface IEmployeeRESTfulQueryService {}
public interface IEmployeeRESTfulCommandService {}
public partial class EmployeeRESTfulService {}
public partial class EmployeeRESTfulService : IEmployeeRESTfulCommandService {}
public partial class EmployeeRESTfulService : IEmployeeRESTfulQueryService {} 
```

我的 web.confing 如下所示

```
 <service behaviorConfiguration="ServiceBehavior" name="Application.EmployeeRESTfulService">
    <endpoint name="Command" address="Command" behaviorConfiguration="webHttp" binding="webHttpBinding" contract="Application.IEmployeeRESTfulCommandService" />
    <endpoint name="Query" address="Query" behaviorConfiguration="webHttp" binding="webHttpBinding" contract="Application.IEmployeeRESTfulQueryService" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>

<behavior name="webHttp">
 <webHttp helpEnabled="true" automaticFormatSelectionEnabled ="true" />
</behavior> 
```

如果我浏览我的 .svc (RESTFul) 我最终会出现以下错误..

**错误**：

Service 'EmployeeRESTfulService' 实现了多种 ServiceContract 类型，并且在配置文件中没有定义端点。WebServiceHost 可以设置默认端点，但前提是服务仅实现单个 ServiceContract。要么将服务更改为仅实现单个 ServiceContract，要么在配置文件中明确定义服务的端点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:19:16.047

1.  你`Factory=System.ServiceModel.Activation.WebServiceHostFactory`在 .svc 文件上使用吗？如果是这样，请删除 Factory 属性，因为您在 config.xml 中定义端点。
2.  WCF 中的一个端点绑定到一个合约（接口）；如果您有两个不同的接口，则需要两个不同的端点。

*更新以下编辑*：`Factory`restful 服务`Autofac.Integration.Wcf.AutofacWebServiceHostFactory, Autofac.Integration.Wcf`使用的 , 正在使用`WebServiceHost`，这要求服务类只实现一个`[ServiceContract]`接口。您需要 Autofac 工厂吗？如果没有，只需删除该属性；否则，由于您已经通过配置定义了端点，我想它也应该与“普通”工厂（AutofacServiceHostFactory）一起使用（我从未使用过 Autofac，但您可以尝试）。

# sql - WHEN_VALIDATE 触发器中的 GO_BLOCK

> ID：12608330
> 
> 赞同：4
> 
> 时间：2012-09-26T18:42:24.610
> 
> 标签：sql, oracle, plsql, oracleforms

我正在使用 oracle 表单。每当修改特定字段的值时，我都必须运行一个程序。我必须执行的过程包含一个 go_block 指令，该指令不能在 when_validate_item 触发器中使用。反正有没有绕过这个？

编辑

我必须使用 when_validate_item，因为我必须运行的过程必须在修改字段时运行，但在执行验证之前。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T19:40:09.423

通常对使用`GO_BLOCK`或`GO_ITEM`有限制`WHEN-VALIDATE-ITEM`。然而，有几种方法可以克服这一点。一种方法是使用`WHEN-TIMER-EXPIRED`触发器。这是如何 -

`WHEN-TIMER-EXPIRED`

```
Begin    
if GET_APPLICATION_PROPERTY(TIMER_NAME) = 'NEW_TIMER' then    
   CALL_PROG_UNIT(); --This is your Procedure that calls the GO_BLOCK   
   /*Do rest of validation here*/
end if;
END; 
```

`WHEN-VALIDATE-ITEM`

```
DECLARE    
  timer_id TIMER;    
Begin        
  timer_id := CREATE_TIMER('NEW_TIMER',1,NO_REPEAT);    --set a short timer so that the WHEN-TIMER-EXPIRED trigger is fired immediately
End; 
```

发生的情况是 - 这将在`CREATE_TIMER`调用函数后立即创建和过期计时器，然后表单级别触发器`WHEN-TIMER-EXPIRED`将检查过期的计时器名称并调用具有`GO_BLOCK`. 希望这可以帮助。

* * *

**更新**

[Jeffery Kemp](https://stackoverflow.com/users/103295/jeffrey-kemp)先生希望看到该解决方案有效的证据。所以这里是——

`BLOCK1`一个带有两个块和`BLOCK2`文本项的 Oracle 表单

![在此处输入图像描述](../Images/e4f11268e4ef7641c4dd4497393c1abf.png)

WVI 触发器

![在此处输入图像描述](../Images/ef0262ffb3d53eabf371af18793d9d88.png)

WTE 表单触发器。`P_CALL_PROC`这首先调用带有函数调用的 PROGRAM UNIT ，`GO_BLOCK`然后对字段进行一些验证`Number 2`。

![在此处输入图像描述](../Images/44cbb32be6cc62fa71fea290afc9a176.png)

这是`P_CALL_PROC`

![在此处输入图像描述](../Images/f843a1800ba02ef401670f3b1e9e296f.png)

这是结果-

![在此处输入图像描述](../Images/34f6dbaa37e833257f2e5c302d875c47.png)

和

![在此处输入图像描述](../Images/d84336f31502bd9d866f2ba06abbd12b.png)

[这](http://www.youtube.com/watch?v=c8vcLCRp7EA)是一个 Youtube 链接，可以查看实际的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:22:23.813

当我遇到这类问题时，我通常能够通过重写和/或重新设计表单本身来解决问题。换句话说，为什么您需要在验证之前使用将焦点移动到另一个项目的过程？

为了能够解决此类问题，我建议您通读 Forms 帮助以了解哪些触发器存在受限内置问题。有了足够的知识，它是如何工作的，您应该能够解决大多数此类问题。在我无法解决问题的极少数情况下，我使用了计时器解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:40:18.487

您可以尝试使用 POST-CHANGE 触发器。

# django - 如何在 django 表单中使 ChoiceField 只读

> ID：12608339
> 
> 赞同：7
> 
> 时间：2012-09-26T18:42:45.200
> 
> 标签：django, django-forms, django-templates

```
class MyForm(forms.Form):
    CHOICES = (('1', 'one',), ('2', 'two',))
    one_or_two = forms.ChoiceField(widget=forms.RadioSelect, initial='1') 

def show(request):   
    form = MyForm()   
    # render form 
```

如何使字段**one_or_two**只读？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T18:59:34.683

您可以使用禁用属性。

```
one_or_two = forms.ChoiceField(widget=forms.RadioSelect(attrs={'disabled': 'disabled'}), initial='1') 
```

# cuda - 每个warp线程从共享内存中加载一个相同的32字节（ulong4）

> ID：12608342
> 
> 赞同：1
> 
> 时间：2012-09-26T18:43:00.700
> 
> 标签：cuda, gpu, gpgpu, nvidia

如果每个 warp 访问同一地址的共享内存，那将如何加载 32 字节的数据（ulong4）？会被“广播”吗？访问时间是否与每个线程加载 2 个字节的“无符号短整数”相同？

现在，如果我需要在每个扭曲中从共享内存中加载 32/64 相同的字节，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:40:57.533

在计算能力 3.0 之前的设备上，共享内存访问始终为 32 位/4 字节宽，并且如果一个 warp 的所有线程访问相同的地址，将被广播。更广泛的访问将编译为多个指令。

在计算能力 3.0 共享内存访问可以使用 cudaDeviceSetSharedMemConfig() 配置为 32 位宽或 64 位宽。不过，所选设置将应用于整个内核。

* * *

[由于我最初错过了问题中的“共享”这个小词，因此我对全局内存给出了一个完全跑题的答案。既然那个应该仍然是正确的，我就把它留在这里：]

这取决于：

*   计算能力 1.0 和 1.1 不广播并使用 64 个单独的 32 字节内存事务（两次 16 字节，扩展为每个线程的最小 32 字节事务大小）
*   计算能力 1.2 和 1.3 广播，因此两个 32 字节事务（两次 16 字节，扩展到最小 32 字节事务大小）足以满足 warp 的所有线程
*   计算能力 2.0 及更高版本只需读取 128 字节缓存行并满足来自那里的所有请求。

计算能力 1.x 的设备将浪费 50% 的传输数据，因为单个线程最多可以加载 16 字节，但最小事务大小为 32 字节。此外，32 字节事务比 128 字节事务慢得多。

由于最小事务大小，并且数据路径足够宽，可以在每个事务中向每个线程传输 8 或 16 个字节，时间将与每个线程仅读取 8 个字节相同。

在计算能力 1.x 上读取 2 倍或 4 倍的数据将花费 2 倍或 4 倍的时间，但如果数据落入同一缓存行，则在 2.0 和更高版本上只需要最少的时间，因此不需要进一步的内存事务。

因此，在计算能力 2.0 及更高版本上，您无需担心。在 1.x 上，如果数据是常量，则通过常量缓存或纹理读取数据，否则在共享内存中重新排序（假设您的内核受内存带宽限制）。

# vb.net - 在 vb.net 中反序列化嵌套的 json

> ID：12608345
> 
> 赞同：1
> 
> 时间：2012-09-26T18:43:08.507
> 
> 标签：vb.net, json, deserialization

我是 json 新手，正在努力将一些嵌套的 json 反序列化为一个对象。外部对象工作正常，但我没有得到内部对象的任何值。我尝试了几种解决方案，包括使用列表对象、集合、datacontractserializer，但似乎没有任何效果。我想我可能遗漏了一些明显的东西。这是我现在拥有的：

json 字符串如下所示： {"type":"lookup","message":"Success","version":0.1,"user":{"loginName":"username","vendor":null}}

我的代码如下：

```
<Serializable()> Public Class LookupReturn
    Private _Type As String = ""
    Private _Message As String = ""
    Private _Version As String = ""
    Private _user As New jsonUser

    Public Property Type() As String
        Get
            Return _Type
        End Get
        Set(ByVal value As String)
            _Type = value
        End Set
    End Property

    Public Property Message() As String
        Get
            Return _Message
        End Get
        Set(ByVal value As String)
            _Message = value
        End Set
    End Property

    Public Property Version() As String
        Get
            Return _Version
        End Get
        Set(ByVal value As String)
            _Version = value
        End Set
    End Property

    Public Property Userobj() As jsonUser
        Get
            Return _user
        End Get
        Set(ByVal value As jsonUser)
            _user = value
        End Set
    End Property

End Class

<Serializable()> Public Class jsonUser
    Private _loginName As String = ""
    Private _vendor As String = ""

    Public Property loginName() As String
        Get
            Return _loginName
        End Get
        Set(ByVal value As String)
            _loginName = value
        End Set
    End Property

    Public Property vendor() As String
        Get
            Return _vendor
        End Get
        Set(ByVal value As String)
            _vendor = value
        End Set
    End Property

End Class

Dim _Json As New JavaScriptSerializer()
Dim _Message as string = "{"type":"lookup","message":"Success","version":0.1,"user"{"loginName":"username","vendor":null}}"
Dim returnData As LookupReturn = _Json.Deserialize(Of LookupReturn)(_Message) 
```

我正在获取 LookupReturn 对象的类型、消息、版本值中的数据，并且它正在为用户项返回一个对象，但 loginName 的值是一个空字符串。

任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:08:53.307

在处理了更多之后，我意识到问题在于我的嵌套对象没有按照我的代码的 Get/Set 部分中的名称命名。因为我将它称为“Userobj”而不是在 json 中调用的“user”，所以反序列化器无法正常工作。我将名称更改为“用户”，一切正常！

# javascript - 如何在不注册的情况下仅在回发时执行一次 javascript 函数

> ID：12608346
> 
> 赞同：0
> 
> 时间：2012-09-26T18:43:13.930
> 
> 标签：javascript, vb.net, scriptmanager

我从 Visual Basic 运行以下行：

```
ScriptManager.RegisterStartupScript(Page, Page.GetType, "populatePayPlan", "populatePayPlan();", True) 
```

它将在每次回发时运行该 javascript。我只是想在一个复选框上运行它。CheckChanged 只是一次然后无论如何都不会再运行它。这必须是可能的，我只是错过了什么？

这很有帮助：[Execute javascript function after asp.net postback without Ajax](https://stackoverflow.com/questions/320999/execute-javascript-function-after-asp-net-postback-without-ajax)

但不完全是我需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:04:06.020

实现这一点的一个技巧是使用闭包来确保函数只执行一次：

```
var myFunction = (function () {
    var neverCalled = true;
    return function (arg, arg2, arg3) { //Any args for myFunction should be set here
        if(neverCalled) {
            neverCalled = false;
            //Put your function code here.

            return true; //or whatever
        } 
        return false; //or do nothing, or whatever
    };
}()); 
```

因此，当函数被“声明”时，它会立即评估外部函数并设置`neverCalled`为`true`，然后将内部函数（这将是您只想执行一次的函数）返回到`myFunction`变量中（或者在您的情况下，您想要它成为`populatePayPlan`我认为的变量）。

第一次调用`myFunction`时，它将运行，但设置`neverCalled`为`false`。该函数的任何后续执行都将跳过该块并且不执行任何操作。这是一个简单而漂亮的技巧，它利用了 JavaScript 的一流函数和闭包方面，应该满足您的需求。

**更新：**

这是它的运行方式（注意我修改了上面的示例代码）：

```
myFunction(); //is true;
myFunction(); //is false;
myFunction(); //is false; 
```

只要确保在您可以访问它的地方声明它，并且在您需要它之前不要调用它。希望有帮助！

# java - 我怎样才能使它更具可读性和更清洁？

> ID：12608347
> 
> 赞同：2
> 
> 时间：2012-09-26T18:43:14.227
> 
> 标签：java, code-readability

我想知道我能做些什么来使它更具可读性和清洁性。可读性是指其他开发人员更容易阅读。

我真的不想两次使用相同的代码。我在想我可以做一些方法来缩短它，但我不确定......

```
@Override
public void dispatchEvent(Event event) {
    checkNotNull(event);

    CancellableEvent cancellableEvent = null;
    boolean cancellable;
    if (cancellable = event instanceof CancellableEvent) {
        cancellableEvent = (CancellableEvent) event;
        checkArgument(cancellableEvent.isCancelled());
    }

    // Ignore-cancellation event handlers will run
    for (EventPriority priority : EventPriority.values()) {
        Map<Method, EventListener> internalMapping = getRegistry().getMethodMap(event.getClass(), priority, true);
        if (internalMapping != null) {
            for (Entry<Method, EventListener> entry : internalMapping.entrySet()) {
                try {
                    entry.getKey().invoke(entry.getValue(), event);
                } catch (IllegalAccessException e) {
                    e.printStackTrace();
                } catch (IllegalArgumentException e) {
                    e.printStackTrace();
                } catch (InvocationTargetException e) {
                    /*
                     * Delegate any exceptions that occur from
                     * the method to a runtime exception.
                     */
                    throw new RuntimeException(e);
                }
            }
        }
    }

    // Event handlers that consider cancellation will run
    for (EventPriority priority : EventPriority.values()) {
        Map<Method, EventListener> internalMapping = getRegistry().getMethodMap(event.getClass(), priority, false);
        if (internalMapping != null) {
            for (Entry<Method, EventListener> entry : internalMapping.entrySet()) {
                try {
                    entry.getKey().invoke(entry.getValue(), event);
                } catch (IllegalAccessException e) {
                    e.printStackTrace();
                } catch (IllegalArgumentException e) {
                    e.printStackTrace();
                } catch (InvocationTargetException e) {
                    /*
                     * Delegate any exceptions that occur from
                     * the method to a runtime exception.
                     */
                    throw new RuntimeException(e);
                }
                // Immediately return in the case of the event being cancelled.
                if (cancellable && cancellableEvent.isCancelled()) {
                    return;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:48:40.123

如果您在谈论异常，那么在 java 7 中您可以加入异常。

这是有关[使用 Java7 异常的文章](http://www.oracle.com/technetwork/articles/java/java7exceptions-486908.html)

```
} catch (ParseException | IOException exception) {
// handle I/O problems.
} 
```

关于迭代，您可以使用单独的方法来调用功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:58:21.083

关于使某些代码更具可读性的建议是什么？长期以来，代码整洁的衡量标准之一是众所周知的：类应该尽可能小，方法应该尽可能小。

假设你可以做一些“提取方法”重构和提取，例如：

processIgnoreCancellationEventHandlers(); processEventHandlersWithPossibleCancellation();

如果可能的话，我会更进一步，使用不同的输入参数制作一种方法，例如：

processEventHandlers(noCancellationEventHandlers); processEventHandlers(CancellationAwareEventHandlers);

这样，您将获得两项成就：

*   更简单、更短、更易读的代码，
*   没有重复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T18:58:40.677

没有更多上下文很难知道，但这里有一些想法。

*   两个循环的`for (Entry<Method, EventListener> entry : internalMapping.entrySet()) {`循环似乎相同。我会把它放在它自己的方法中。它会接受一个`Map`并且它将完成整个循环。那么你的两个for循环会小得多。

    ```
    private void runMap(Map<Method, EventListener> methodMap) {
        for (Entry<Method, EventListener> entry : methodMap.entrySet()) {
           ...
        }
    } 
    ```

    然后你可以做一个循环：

    ```
    for (EventPriority priority : EventPriority.values()) {
       runMap(getRegistry().getMethodMap(event.getClass(), priority, true));
       runMap(getRegistry().getMethodMap(event.getClass(), priority, false));
    } 
    ```

*   当你在一个包含整个循环的循环中做某事时，`if (internalMapping != null) {`我倾向于使用`if (internalMapper == null) continue;`. 这减少了缩进级别。

*   已经提到了异常处理。您也可以处理第`InvocationTargetException`一个，然后`catch (Exception e)`在它下面打印出所有其余部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T19:02:26.010

我假设您真正想要做的是消除这两个循环。我会暴力破解它并提取一个包含所有必要参数的方法，例如：

```
 @Override
  public void dispatchEvent(Event event) {
      checkNotNull(event);

      CancellableEvent cancellableEvent = null;
      boolean cancellable;
      if (cancellable = event instanceof CancellableEvent) {
          cancellableEvent = (CancellableEvent) event;
          checkArgument(cancellableEvent.isCancelled());
      }

     fireEvents(false, event, cancellableEvent, cancellable);
     fireEvents(true, event, cancellableEvent, cancellable);

  }

  private void fireEvents(boolean considerCancellation, Event event, CancellableEvent cancellableEvent, boolean cancellable)
  {
     // Event handlers that consider cancellation will run
     for (EventPriority priority : EventPriority.values()) {
         Map<Method, EventListener> internalMapping = getRegistry().getMethodMap(event.getClass(), priority, ! considerCancellation);
         if (internalMapping != null) {
             for (Map.Entry<Method, EventListener> entry : internalMapping.entrySet()) {
                 try {
                     entry.getKey().invoke(entry.getValue(), event);
                 } catch (IllegalAccessException e) {
                     e.printStackTrace();
                 } catch (IllegalArgumentException e) {
                     e.printStackTrace();
                 } catch (InvocationTargetException e) {
                     /*
                      * Delegate any exceptions that occur from
                      * the method to a runtime exception.
                      */
                     throw new RuntimeException(e);
                 }
                 // Immediately return in the case of the event being cancelled.
                 if ( considerCancellation && cancellable && cancellableEvent.isCancelled()) {
                     return;
                 }
             }
         }
     }
  } 
```

然后你可以重构新的 fireEvents 方法并清理它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T19:08:06.147

永远不要在 if 条件下进行赋值。这是容易出错的：

```
if (cancellable = event instanceof CancellableEvent) {
    ...
} 
```

只需这样做：

```
boolean cancellable = event instanceof CancellableEvent;
if (cancellable) {
    ...
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T18:59:23.920

您可以将条目的调用重构为另一个方法。

```
private final void invokeEntry(Entry<Method, EventListener> entry, Event event) {
    try {
        entry.getKey().invoke(entry.getValue(), event);
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        /*
         * Delegate any exceptions that occur from
         * the method to a runtime exception.
         */
        throw new RuntimeException(e);
    }
} 
```

然后你可以用这个替换你的*dispatchEvent*方法：

```
@Override
public void dispatchEvent(Event event) {
    checkNotNull(event);

    CancellableEvent cancellableEvent = null;
    boolean cancellable;
    if (cancellable = event instanceof CancellableEvent) {
        cancellableEvent = (CancellableEvent) event;
        checkArgument(cancellableEvent.isCancelled());
    }

    // Ignore-cancellation event handlers will run
    for (EventPriority priority : EventPriority.values()) {
        Map<Method, EventListener> internalMapping = getRegistry().getMethodMap(event.getClass(), priority, true);
        if (internalMapping != null) {
            for (Entry<Method, EventListener> entry : internalMapping.entrySet()) {
                invokeEntry(entry, event);
            }
        }
    }

    // Event handlers that consider cancellation will run
    for (EventPriority priority : EventPriority.values()) {
        Map<Method, EventListener> internalMapping = getRegistry().getMethodMap(event.getClass(), priority, false);
        if (internalMapping != null) {
            for (Entry<Method, EventListener> entry : internalMapping.entrySet()) {
                invokeEntry(entry, event);
                // Immediately return in the case of the event being cancelled.
                if (cancellable && cancellableEvent.isCancelled()) {
                    return;
                }
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-26T19:05:20.270

由于除了一个布尔值外，循环是相同的，所以我会先像这样拆分它们，然后在需要时进一步分解它们。

```
@Override
public void dispatchEvent(Event event) {
    checkNotNull(event);
    CancellableEvent cancellableEvent = null;
    boolean cancellable;
    if (cancellable = event instanceof CancellableEvent) {
        cancellableEvent = (CancellableEvent) event;
        checkArgument(cancellableEvent.isCancelled());
    }
    handleEvents(event, true);
    handleEvents(event, false, cancellableEvent);
}

public void handleEvents(Event event, boolean cancellable)
{
    handleEvents(event, cancellable, null);
}

public void handleEvents(Event event, boolean cancellable, CancellableEvent cancellableEvent)
{
    for (EventPriority priority : EventPriority.values()) {
        Map<Method, EventListener> internalMapping = getRegistry().getMethodMap(event.getClass(), priority, cancellable);
        if (internalMapping != null) {
            for (Entry<Method, EventListener> entry : internalMapping.entrySet()) {
                try {
                    entry.getKey().invoke(entry.getValue(), event);
                } catch (IllegalAccessException | IllegalArgumentException e) {
                    e.printStackTrace();
                } catch (InvocationTargetException e) {
                    /*
                    * Delegate any exceptions that occur from
                    * the method to a runtime exception.
                    */
                    throw new RuntimeException(e);
                }
                // Immediately return in the case of the event being cancelled.
                if (cancellableEvent != null && cancellable && cancellableEvent.isCancelled()) {
                    return;
                }
            }
        }
    }
} 
```

# networking - 如何在不更改代码的情况下破解隧道，或者有可能吗？

> ID：12608349
> 
> 赞同：-2
> 
> 时间：2012-09-26T18:43:15.957
> 
> 标签：networking, tcp, network-programming

如果一个进程执行“connect(addr_a)”

是否有可能让另一个进程（在同一台机器上）捕获它

并更改为“connect(addr_b)”，并透明地提供隧道服务？

谢谢你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:11:47.547

您可以使用`tsocks`linux 上的库和Windows上的[ProxifierPE来执行此操作。](http://www.proxifier.com/)两种解决方案都需要一个功能强大的[Socks 服务器](http://en.wikipedia.org/wiki/SOCKS_%28protocol%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:53:26.857

是的，这是可能的。

但是如何做到这一点取决于您的操作系统，并且需要机器的管理员权限。最明显的方法是为您最喜欢的操作系统使用高级防火墙功能。

# java - Light Java web stack using Guice-servlet/Jetty/Jersey - some questions

> ID：12608350
> 
> 赞同：5
> 
> 时间：2012-09-26T18:43:23.693
> 
> 标签：java, jersey, guice, web-frameworks, guice-servlet

I'm thinking about developing a new web application using "light" components and not a full stack framework.

[This article](http://blog.palominolabs.com/2011/08/15/a-simple-java-web-stack-with-guice-jetty-jersey-and-jackson/) is my main inspiration!

**Jetty** : The web server. I'll probably use an embedabble version for development but with an option to export the application as a .war and use an external Jetty server for the production environment.

**Guice/Guice-Servlet** : For Dependency injection and for the servlet mapping + filters.

**Jersey** : For the routing + request/response json (de)serialization when required.

An important note : I'm aware some people will use this kind of stack with Jersey as a *web services layer* only, and will use a Javascript framework (Backbone, AngularJS, etc.) to consume those services and do most of the presentation logic in Javascript. I'm not ready yet for this kind of client stuff. I still prefere to use JSPs and been able to send plain HTML to clients that have javascript disabled.

So, my questions :

*   What is the best way to manage *forms* using Jersey? With Spring MVC (that I used on other projects) there is this concept of "backing objects" where the submitted POST data is automatically binded to a backing object that is then easy to play with. Is there something similar with Jersey?

*   I like all my routes to be defined in *one specific routes file*, not everywhere as @Path annotations which are, in my opinion, harder to manage. I'm pretty sure Jersey requires the use of those hardcoded JAX-RS's @Path annotations and doesn't allow an external routes configuration system, is that correct? Do you see any way I could centralize all routes with Jersey then?

*   I like the concept of *reverse routing* (like Play framework provides, for instance). And, again, I don't think Jersey can provide that functionality, is that correct?

*   Considering my previous questions, maybe Jersey is not the right technology to use? Do you know of others libraries I could use for the routing part in my stack?

*   Any other suggestions/tips for this kind of light Java web stack?

**UPDATE :**

I'm currently looking at [UrlRewriteFilter](http://tuckey.org/urlrewrite/) for the routing part.

I'm also looking at the [ActiveWeb framework](http://code.google.com/p/activeweb/), which is a "full stack" framework, but seems light and also seems to provide some functionalities I'm looking for : centralized routing config and reverse-routing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T13:11:42.540

解释一些术语。Guice 和 Spring 解决相同的问题域，即依赖注入。因此，同时使用 Guice 和 SpringMVC 在某种程度上是不可能的，或者至少是相反的。

为了区分 Guice 和 Spring，说得好：

> 陡！更接近血腥的不可能。我认为 Guice 就像带一个女孩回家过夜。春天是一定的婚姻，一不小心，离婚就痛苦。– 蜘蛛 2011 年 10 月 7 日 16:25

Guice 确实是非常轻量级的 DI 框架。但是不支持路由和模板。您必须自己通过绑定 servlet 并自己使用模板引擎来完成。或者您可以使用[Sitebricks](http://sitebricks.org)。您可以将所有路由放入 SitebrickModule 配置方法中，如下所示：

```
public class MyAppConfig extends SitebricksModule {
@Override
protected void configureSitebricks() {
    at("/movies").show(MoviesPage.class); // basic page
    at("/actors").serve(ActorsPage.class); // service
    embed(SoundtrackPage.class).as("Soundtrack"); // brick
} 
```

}

Sitebricks 还支持几个诱人的系统：MVEL、Freemarker、...

此外，您可以轻松地构建 REST 服务以供 javascript 使用：

```
Reply<Product> view() {
  return Reply.with(new Product("Anti-ageing cure"))
              .as(Json.class);
} 
```

试试看。

# .htaccess - .htaccess - 为不存在的文件从子目录重定向到根目录

> ID：12608351
> 
> 赞同：1
> 
> 时间：2012-09-26T18:43:25.380
> 
> 标签：.htaccess, redirect

**当前目录结构：**

```
wwwpublic
|+ spanish(language)
|-- index.php
|-- contact.php
|
|- index.php
|- aboutus.php
|- products.php
|- contact.php 
```

在 wwwpublic 目录的根目录中，我有英文文件。由于网站也有西班牙语，我创建了名为“西班牙语”的单独目录。两个目录中的页面名称完全相同。

现在，西班牙语目录中的某些页面不存在，我需要将请求重定向到这些页面到根文件夹并保留请求的文件名。

示例：访问者转到西班牙语版本，在那里打开 index.php，然后他点击西班牙语目录中的 aboutus.php 页面（不存在），然后 .htaccess 将他重定向到 /root/aboutus.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:35:30.887

在您的目录中尝试这样的事情`wwwpublic`，最好在您可能拥有的任何路由规则之前：

```
RewriteEngine On

# conditions to check that current request doesn't point to a valid resource
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# condition to check that request is for the /spanish/ directory
RewriteCond %{REQUEST_URI} ^/spanish/(.+)$

# conditions to check if the /spanish/ is removed whether it would point to a valid resource
RewriteCond %{DOCUMENT_ROOT}/%1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/%1 -d

# all conditions match, rewrite
RewriteRule ^/?spanish/(.+)$ /$1 [L] 
```

# html - hash tag scroll and get data through URL, how can I make this two work together?

> ID：12608355
> 
> 赞同：0
> 
> 时间：2012-09-26T18:43:28.513
> 
> 标签：html

I need hastag link to work together with GET data in the url.

I tried this: `#comment-72?success=1`

But it doesn't work, what would be the correct way to do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:44:39.700

It should be this way

?success=1#comment-72

# javascript - How to build simple jQuery image slider with sliding or opacity effect?

> ID：12608356
> 
> 赞同：28
> 
> 时间：2012-09-26T18:43:32.930
> 
> 标签：javascript, jquery, css, animation, slideshow

Some of us might not want to use ready plugins because of their high sizes and possibilty of creating conflicts with current javascript.

I was using light slider plugins before but when customer gives modular revise, it became really hard to manipulate. Then I aim to build mine for customising it easily. I believe sliders shouldn't be that complex to build from beginning.

What is a simple and clean way to build jQuery image slider?

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-26T18:43:32.930

Before inspecting examples, you should know two jQuery functions which i used most.

[index()](http://api.jquery.com/index/) returns value is an integer indicating the position of the first element within the jQuery object relative to its sibling elements.

[eq()](http://api.jquery.com/eq/) selects of an element based on its position (index value).

Basicly i take selected trigger element's `index value` and match this value on images with `eq` method.

[- **FadeIn / FadeOut** effect.](http://jsfiddle.net/mjaA3/1662/)

[- **Sliding** effect.](http://jsfiddle.net/mjaA3/1672/)

[- alternate **Mousewheel** response.](http://jsfiddle.net/mjaA3/332/)

* * *

​<strong>html sample:

```
<ul class="images">
   <li>
      <img src="images/1.jpg" alt="1" />
   </li>
   <li>
      <img src="images/2.jpg" alt="2" />
   </li>
   ...
</ul>

<ul class="triggers">
   <li>1</li>
   <li>2</li>
   ...
</ul>
<span class="control prev">Prev</span>
<span class="control next">Next</span> 
```

* * *

## OPACITY EFFECT: [**jsFiddle.**](http://jsfiddle.net/mjaA3/1662/)

***css trick:*** *overlapping images with position:absolute*

```
ul.images { position:relative; }
  ul.images li { position:absolute; } 
```

**jQuery:**

```
var target;
var triggers = $('ul.triggers li');
var images = $('ul.images li');
var lastElem = triggers.length-1;

triggers.first().addClass('active');
images.hide().first().show();

function sliderResponse(target) {
    images.fadeOut(300).eq(target).fadeIn(300);
    triggers.removeClass('active').eq(target).addClass('active');
} 
```

* * *

## SLIDING EFFECT: [**jsFiddle.**](http://jsfiddle.net/etfgy1kx/)

***css trick:*** *with double wrapper and use child as mask*

```
.mask { float:left; margin:40px; width:270px; height:266px; overflow:hidden;  }
    ul.images { position:relative; top:0px;left:0px; }
    /* this width must be total of the images, it comes from jquery */
        ul.images li { float:left; } 
```

**jQuery:**

```
var target;
var triggers = $('ul.triggers li');
var images = $('ul.images li');
var lastElem = triggers.length-1;
var mask = $('.mask ul.images');
var imgWidth = images.width();

triggers.first().addClass('active');
mask.css('width', imgWidth*(lastElem+1) +'px');

function sliderResponse(target) {
    mask.stop(true,false).animate({'left':'-'+ imgWidth*target +'px'},300);
    triggers.removeClass('active').eq(target).addClass('active');
} 
```

* * *

## Common jQuery response for both slider:

*( **triggers + next/prev click and timing** )*

```
triggers.click(function() {
    if ( !$(this).hasClass('active') ) {
        target = $(this).index();
        sliderResponse(target);
        resetTiming();
    }
});

$('.next').click(function() {
    target = $('ul.triggers li.active').index();
    target === lastElem ? target = 0 : target = target+1;
    sliderResponse(target);
    resetTiming();
});
$('.prev').click(function() {
    target = $('ul.triggers li.active').index();
    lastElem = triggers.length-1;
    target === 0 ? target = lastElem : target = target-1;
    sliderResponse(target);
    resetTiming();
});

function sliderTiming() {
    target = $('ul.triggers li.active').index();
    target === lastElem ? target = 0 : target = target+1;
    sliderResponse(target);
}

var timingRun = setInterval(function() { sliderTiming(); },5000);
function resetTiming() {
    clearInterval(timingRun);
    timingRun = setInterval(function() { sliderTiming(); },5000);
} 
```

* * *

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-12-11T09:46:02.967

这是一个简单易懂的代码，用于在不使用 Jquery 的情况下使用 JavaScript 创建图像幻灯片。

```
<script language="JavaScript"> 
var i = 0; var path = new Array(); 

// LIST OF IMAGES 
path[0] = "image_1.gif"; 
path[1] = "image_2.gif"; 
path[2] = "image_3.gif"; 

function swapImage() { document.slide.src = path[i]; 
if(i < path.length - 1) i++; 
else i = 0; setTimeout("swapImage()",3000); 
} window.onload=swapImage;

</script> 

<img height="200" name="slide" src="image_1.gif" width="400" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-19T11:59:40.393

签出这整串代码来构建简单的 jquery 图像滑块。将此文件复制并保存到本地计算机并进行测试。您可以根据您的要求对其进行修改。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<script>
  var current_img = 1;
  var i;

  $(document).ready(function(){
    var imgs = $("#image").find("img");

    function show_img(){
      for (i = 1; i < imgs.length+1; i++) {
        if(i == current_img){
          $(imgs[i-1]).show();
        }else{
          $(imgs[i-1]).hide()
        }
      }
    }

    $("#prev").click(function(){
      if(current_img == 1){
        current_img = imgs.length;
      }else{
        current_img = current_img - 1
      }
      show_img();
    });

    $("#next").click(function(){
      if(current_img == imgs.length){
        current_img = 1;
      }else{
        current_img = current_img + 1
      }
      show_img();
    });

  });

</script>
</head>
<body>

<div style="margin-top: 100px;"></div>
<div class="container">
  <div class="col-sm-3">
    <button type="button" id="prev" class="btn">Previous</button>
  </div>

  <div class="col-sm-6">
    <div id="image">
      <img src="https://www.w3schools.com/html/pulpitrock.jpg" alt="image1">
      <img src="https://www.w3schools.com/cSS/img_forest.jpg" alt="image2" hidden="true" style="max-width: 500px;">
      <img src="https://www.w3schools.com/html/img_chania.jpg" alt="image3" hidden="true">
    </div>
  </div>

  <div class="col-sm-3">
    <button type="button" id="next" class="btn">Next</button>
  </div>
</div>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-16T09:17:50.933

我最近创建了一个解决方案，其中包含图像库和单击图像时出现的滑块。

看看这里的代码：[GitHub Code](https://github.com/quanton81/quanton-simple-jquery-gallery)

这里有一个活生生的例子：[代码示例](http://www.ciaomondo.it/blog/semplice-galleria-immagini-in-jquery.php)

```
var CreateGallery = function(parameters) {
	var self = this;
	this.galleryImages = [];
	this.galleryImagesSrcs = [];
	this.galleryImagesNum = 0;
	this.counter;
	this.galleryTitle = parameters.galleryTitle != undefined ? parameters.galleryTitle : 'Gallery image';
	this.maxMobileWidth = parameters.maxMobileWidth != undefined ? parameters.maxMobileWidth : 768;
	this.numMobileImg = parameters.numMobileImg != undefined ? parameters.numMobileImg : 2;
	this.maxTabletWidth = parameters.maxTabletWidth != undefined ? parameters.maxTabletWidth : 1024;
	this.numTabletImg = parameters.numTabletImg != undefined ? parameters.numTabletImg : 3;
	this.addModalGallery = function(gallerySelf = self){
		var $div = $(document.createElement('div')).attr({
			'id': 'modal-gallery'
		}).append($(document.createElement('div')).attr({
				'class': 'header'
			}).append($(document.createElement('button')).attr({
					'class': 'close-button',
					'type': 'button'
				}).html('&times;')
			).append($(document.createElement('h2')).text(gallerySelf.galleryTitle))
		).append($(document.createElement('div')).attr({
				'class': 'text-center'
			}).append($(document.createElement('img')).attr({
					'id': 'gallery-img'
				})
			).append($(document.createElement('button')).attr({
					'class': 'prev-button',
					'type': 'button'
				}).html('&#9668;')
			).append($(document.createElement('button')).attr({
					'class': 'next-button',
					'type': 'button'
				}).html('&#9658;')
			)
		);
		parameters.element.after($div);
	};
	$(document).on('click', 'button.prev-button', {self: self}, function() {
		var $currImg = self.counter >= 1 ? self.galleryImages[--self.counter] : self.galleryImages[self.counter];
		var $currHash = self.galleryImagesSrcs[self.counter];
		var $src = $currImg.src;
		window.location.hash = $currHash;
		$('img#gallery-img').attr('src', $src);
		$('div#modal-gallery h2').text(self.galleryTitle + ' ' + (self.counter + 1));
	});
	$(document).on('click', 'button.next-button', {self: self}, function() {
		var $currImg = self.counter < (self.galleryImagesNum - 1) ? self.galleryImages[++self.counter] : self.galleryImages[self.counter];
		var $currHash = self.galleryImagesSrcs[self.counter];
		var $src = $currImg.src;
		window.location.hash = $currHash;
		$('img#gallery-img').attr('src', $src);
		$('div#modal-gallery h2').text(self.galleryTitle + ' ' + (self.counter + 1));
	});
	$(document).on('click', 'div#modal-gallery button.close-button', function() {
		$('#modal-gallery').css('position', 'relative');
		$('#modal-gallery').hide();
		$('body').css('overflow', 'visible');
	});
	parameters.element.find('a').on('click', {self: self}, function(event) {
		event.preventDefault();
		$('#modal-gallery').css('position', 'fixed');
		$('#modal-gallery').show();
		$('body').css('overflow', 'hidden');
		var $currHash = this.hash.substr(1);
		self.counter = self.galleryImagesSrcs.indexOf($currHash); 
		var $src = $currHash;
		window.location.hash = $currHash;
		$('img#gallery-img').attr('src', $src);
		$('div#modal-gallery h2').text(self.galleryTitle + ' ' + (self.counter + 1));
	});
	this.sizeGallery = function(gallerySelf = self) {
		var $modalGallery = $(document).find("div#modal-gallery");
		if($modalGallery.length <= 0) {
			this.addModalGallery();
		}
		var $windowWidth = $(window).width();
		var $parentWidth = parameters.element.width();
		var $thumbnailHref = parameters.element.find('img:first').attr('src');
		if($windowWidth < gallerySelf.maxMobileWidth) {
			var percentMobile = Math.floor(100 / gallerySelf.numMobileImg); 
			var emMobile = 0;
			var pxMobile = 2;
//                        var emMobile = gallerySelf.numMobileImg * 0.4;
//                        var pxMobile = gallerySelf.numMobileImg * 2;
			parameters.element.find('img').css('width', 'calc('+percentMobile+'% - '+emMobile+'em - '+pxMobile+'px)');
		} else if($windowWidth < gallerySelf.maxTabletWidth) {
			var percentTablet = Math.floor(100 / gallerySelf.numTabletImg); 
			var emTablet = 0;
			var pxTablet = 2;
//                        var emTablet = gallerySelf.numMobileImg * 0.4;
//                        var pxTablet = gallerySelf.numMobileImg * 2;
			parameters.element.find('img').css('width', 'calc('+percentTablet+'% - '+emTablet+'em - '+pxTablet+'px)');
		} else {
			var $thumbImg = new Image();
			$thumbImg.src = $thumbnailHref;
			$thumbImg.onload = function() {
				var $thumbnailWidth = this.width;
				if($parentWidth > 0 && $thumbnailWidth > 0) {
					parameters.element.find('img').css('width', (Math.ceil($thumbnailWidth * 100 / $parentWidth))+'%');
				}
			};
		}
	};
	this.startGallery = function(gallerySelf = self) {
		parameters.element.find('a').each(function(index, el) {
			var $currHash = el.hash.substr(1);
			var $img = new Image();
			$img.src = $currHash;
			gallerySelf.galleryImages.push($img);
			gallerySelf.galleryImagesSrcs.push($currHash);
		});
		this.galleryImagesNum = this.galleryImages.length;
	};
	this.sizeGallery();
	this.startGallery();
};
var myGallery;
$(window).on('load', function() {
	myGallery = new CreateGallery({
		element: $('#div-gallery'),
		maxMobileWidth: 768,
		numMobileImg: 2,
		maxTabletWidth: 1024,
		numTabletImg: 3
	});
});
$(window).on('resize', function() {
	myGallery.sizeGallery();
});
```

```
#div-gallery {
	text-align: center;
}
#div-gallery img {
	margin-right: auto;
	margin-left: auto;
}
div#modal-gallery {
	top: 0;
	left: 0;
	width: 100%;
	max-width: none;
	height: 100vh;
	min-height: 100vh;
	margin-left: 0;
	border: 0;
	border-radius: 0;
	z-index: 1006;
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;
	display: none;
	background-color: #fefefe;
	position: relative;
	margin-right: auto;
	overflow-y: auto;
	padding: 0;
}
div#modal-gallery div.header {
	position: relative; 
}
div#modal-gallery div.header h2 {
	margin-left: 1rem; 
}
div#modal-gallery div.header button.close-button {
	position: absolute;
	top: calc(50% - 1em);
	right: 1rem;
}
div#modal-gallery img {
	display: block;
	max-width: 98%;
	max-height: calc(100vh - 5em);
	margin-right: auto;
	margin-left: auto;
}
div#modal-gallery div.text-center {
	position: relative;
}
button.close-button {
	display: inline-block;
	padding: 6px 12px;
	margin-bottom: 0;
	font-size: 20px;
	font-weight: 400;
	line-height: 1.42857143;
	text-align: center;
	white-space: nowrap;
	vertical-align: middle;
	-ms-touch-action: manipulation;
	touch-action: manipulation;
	cursor: pointer;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	background-image: none;
	border: 1px solid transparent;
	border-radius: 4px;
	color: #333;
	background-color: #fff;
	border-color: #ccc;
}
button.close-button:hover, button.close-button:focus {
	background-color: #ddd;
}
button.next-button:hover, button.prev-button:hover, button.next-button:focus, button.prev-button:focus {
	color: #fff;
	text-decoration: none;
	filter: alpha(opacity=90);
	outline: 0;
	opacity: .9;
}
button.next-button, button.prev-button {
	position: absolute;
	top: 0;
	bottom: 0;
	left: 0;
	width: 15%;
	font-size: 20px;
	color: #fff;
	text-align: center;
	text-shadow: 0 1px 2px rgba(0,0,0,.6);
	background-color: rgba(0,0,0,0);
	filter: alpha(opacity=50);
	opacity: .5;
	border: none;
}
button.next-button {
	right: 0;
	left: auto;
	background-image: -webkit-linear-gradient(left,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5) 100%);
	background-image: -o-linear-gradient(left,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5) 100%);
	background-image: -webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.0001)),to(rgba(0,0,0,.5)));
	background-image: linear-gradient(to right,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5) 100%);
	filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000', endColorstr='#80000000', GradientType=1);
	background-repeat: repeat-x;
}
button.prev-button {
	background-image: -webkit-linear-gradient(left,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001) 100%);
	background-image: -o-linear-gradient(left,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001) 100%);
	background-image: -webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.5)),to(rgba(0,0,0,.0001)));
	background-image: linear-gradient(to right,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001) 100%);
	filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#80000000', endColorstr='#00000000', GradientType=1);
	background-repeat: repeat-x;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div id="div-gallery">
	<a href="#http://placehold.it/1024x1024/ff0000/000000?text=Gallery+image+1"><img src="http://placehold.it/300x300/ff0000/000000?text=Gallery+image+1" alt=""></a>
	<a href="#http://placehold.it/1024x1024/ff4000/000000?text=Gallery+image+2"><img src="http://placehold.it/300x300/ff4000/000000?text=Gallery+image+2" alt=""></a>
	<a href="#http://placehold.it/1024x1024/ff8000/000000?text=Gallery+image+3"><img src="http://placehold.it/300x300/ff8000/000000?text=Gallery+image+3" alt=""></a>
	<a href="#http://placehold.it/1024x1024/ffbf00/000000?text=Gallery+image+4"><img src="http://placehold.it/300x300/ffbf00/000000?text=Gallery+image+4" alt=""></a>
	<a href="#http://placehold.it/1024x1024/ffff00/000000?text=Gallery+image+5"><img src="http://placehold.it/300x300/ffff00/000000?text=Gallery+image+5" alt=""></a>
	<a href="#http://placehold.it/1024x1024/bfff00/000000?text=Gallery+image+6"><img src="http://placehold.it/300x300/bfff00/000000?text=Gallery+image+6" alt=""></a>
	<a href="#http://placehold.it/1024x1024/80ff00/000000?text=Gallery+image+7"><img src="http://placehold.it/300x300/80ff00/000000?text=Gallery+image+7" alt=""></a>
	<a href="#http://placehold.it/1024x1024/40ff00/000000?text=Gallery+image+8"><img src="http://placehold.it/300x300/40ff00/000000?text=Gallery+image+8" alt=""></a>
	<a href="#http://placehold.it/1024x1024/00ff00/000000?text=Gallery+image+9"><img src="http://placehold.it/300x300/00ff00/000000?text=Gallery+image+9" alt=""></a>
	<a href="#http://placehold.it/1024x1024/00ff40/000000?text=Gallery+image+10"><img src="http://placehold.it/300x300/00ff40/000000?text=Gallery+image+10" alt=""></a>
	<a href="#http://placehold.it/1024x1024/00ff80/000000?text=Gallery+image+11"><img src="http://placehold.it/300x300/00ff80/000000?text=Gallery+image+11" alt=""></a>
	<a href="#http://placehold.it/1024x1024/00ffbf/000000?text=Gallery+image+12"><img src="http://placehold.it/300x300/00ffbf/000000?text=Gallery+image+12" alt=""></a>
	<a href="#http://placehold.it/1024x1024/00ffff/000000?text=Gallery+image+13"><img src="http://placehold.it/300x300/00ffff/000000?text=Gallery+image+13" alt=""></a>
	<a href="#http://placehold.it/1024x1024/00bfff/000000?text=Gallery+image+14"><img src="http://placehold.it/300x300/00bfff/000000?text=Gallery+image+14" alt=""></a>
	<a href="#http://placehold.it/1024x1024/0080ff/000000?text=Gallery+image+15"><img src="http://placehold.it/300x300/0080ff/000000?text=Gallery+image+15" alt=""></a>
	<a href="#http://placehold.it/1024x1024/0040ff/000000?text=Gallery+image+16"><img src="http://placehold.it/300x300/0040ff/000000?text=Gallery+image+16" alt=""></a>
</div>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-09T17:07:01.997

我已经写了一个关于创建幻灯片[的教程，教程页面](http://www.griffithswebdesign.com/Blog/Post/18) 如果链接失效，我在下面的答案中包含了代码。

的HTML：

```
<div id="slideShow">
 <div id="slideShowWindow">
 <div class="slide">
 <img src="”img1.png”/">
 <div class="slideText">
 <h2>The Slide Title</h2> 
 <p>This is the slide text</p>
 </div> <!-- </slideText> -->
 </div> <!-- </slide> repeat as many times as needed --> 
 </div> <!-- </slideShowWindow> -->
 </div> <!-- </slideshow> --> 
```

CSS：

```
img {
 display: block;
 width: 100%;
 height: auto;
}
p{
 background:none;
 color:#ffffff;
}
#slideShow #slideShowWindow {
 width: 650px;
 height: 450px;
 margin: 0;
 padding: 0;
 position: relative;
 overflow:hidden;
 margin-left: auto;
 margin-right:auto;
}

#slideShow #slideShowWindow .slide {
 margin: 0;
 padding: 0;
 width: 650px;
 height: 450px;
 float: left;
 position: relative;
 margin-left:auto;
 margin-right: auto;
 }

#slideshow #slideshowWindow .slide, .slideText {
    position:absolute;
    bottom:18px;
    left:0;
    width:100%;
    height:auto;
    margin:0;
    padding:0;
    color:#ffffff;
    font-family:Myriad Pro, Arial, Helvetica, sans-serif;
} 
.slideText {
 background: rgba(128, 128, 128, 0.49);
}

#slideshow #slideshowWindow .slide .slideText h2, 
#slideshow #slideshowWindow .slide .slideText p {
    margin:10px;
    padding:15px;
}

.slideNav {
 display: block;
 text-indent: -10000px;
 position: absolute;
 cursor: pointer;
}
#leftNav {
 left: 0;
 bottom: 0;
 width: 48px;
 height: 48px;
 background-image: url("../Images/plus_add_minus.png");
 background-repeat: no-repeat;
 z-index: 10;
}
#rightNav {
 right: 0;
 bottom: 0;
 width: 48px;
 height: 48px;
 background-image: url("../Images/plus_add_green.png");
 background-repeat: no-repeat;
 z-index: 10; } 
```

jQuery：

```
$(document).ready(function () {

 var currentPosition = 0;
 var slideWidth = 650;
 var slides = $('.slide');
 var numberOfSlides = slides.length;
 var slideShowInterval;
 var speed = 3000;

 //Assign a timer, so it will run periodically
 slideShowInterval = setInterval(changePosition, speed);

 slides.wrapAll('<div id="slidesHolder"></div>');

 slides.css({ 'float': 'left' });

 //set #slidesHolder width equal to the total width of all the slides
 $('#slidesHolder').css('width', slideWidth * numberOfSlides);

 $('#slideShowWindow')
 .prepend('<span class="slideNav" id="leftNav">Move Left</span>')
 .append('<span class="slideNav" id="rightNav">Move Right</span>');

 manageNav(currentPosition);

 //tell the buttons what to do when clicked
 $('.slideNav').bind('click', function () {

 //determine new position
 currentPosition = ($(this).attr('id') === 'rightNav')
 ? currentPosition + 1 : currentPosition - 1;

 //hide/show controls
 manageNav(currentPosition);
 clearInterval(slideShowInterval);
 slideShowInterval = setInterval(changePosition, speed);
 moveSlide();
 });

 function manageNav(position) {
 //hide left arrow if position is first slide
 if (position === 0) {
 $('#leftNav').hide();
 }
 else {
 $('#leftNav').show();
 }
 //hide right arrow is slide position is last slide
 if (position === numberOfSlides - 1) {
 $('#rightNav').hide();
 }
 else {
 $('#rightNav').show();
 }
 }

 //changePosition: this is called when the slide is moved by the timer and NOT when the next or previous buttons are clicked
 function changePosition() {
 if (currentPosition === numberOfSlides - 1) {
 currentPosition = 0;
 manageNav(currentPosition);
 } else {
 currentPosition++;
 manageNav(currentPosition);
 }
 moveSlide();
 }

 //moveSlide: this function moves the slide 
 function moveSlide() {
 $('#slidesHolder').animate({ 'marginLeft': slideWidth * (-currentPosition) });
 }

}); 
```

# c++ - 容器迭代器是否未定义常规覆盖复制模式？

> ID：12608360
> 
> 赞同：3
> 
> 时间：2012-09-26T18:43:44.040
> 
> 标签：c++, c++11, iterator, containers

以下代码编译得很好，`v2`用 from覆盖了值`v1`：

```
std::vector<int> v1 = {1, 2, 3, 4, 5};
std::vector<int> v2 = {6, 7, 8, 9, 10};

std::copy(v1.begin(), v1.end(), v2.begin()); 
```

的第三个参数`std::copy`是一个 OutputIterator。但是，Container 要求指定`a.begin()`，其中`a`Container 对象应具有`iterator`定义为的返回类型：

> 任何满足前向迭代器要求的迭代器类别。

前向迭代器要求不包括输出迭代器的要求，那么上面的例子是未定义的吗？我使用迭代器作为输出迭代器，即使没有明显的保证它会是一个。

但是，我相当确定上面的代码是有效的，所以我的猜测是，您可以从有关容器的详细信息中推断出，返回的前向迭代器`begin()`实际上也支持输出迭代器的要求。在那种情况下，什么时候`begin()` *不*返回输出迭代器？仅当容器存在`const`或存在其他情况时？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T19:00:56.650

如果前向迭代器是可变的，则它们可以符合输出迭代器的规范，具体取决于序列的类型。它没有明确说明（不像他们输入迭代器需求的事实），但是如果我们看一下需求表

![输出迭代器要求](../Images/2763e36879ddfc02a645a6135a531fb5.png)

我们可以去检查给定的前向迭代器是否符合它们：

> `*r = o`
> `(§24.2.5/1)`: if`X`是一个可变迭代器，`reference`是对`T`

可变引用是可赋值的（除非你有一个不可赋值的类型，显然）。

> `++r`, `r++`,`*r++ = o`
> `(§24.2.5 Table 109)` ![前向迭代器要求](../Images/ca7419416fa064c2f54eb63ce46376b9.png)

表 109 中的第一行与输出迭代器的要求相同，只是前向迭代器没有备注。第二行比输出迭代器更严格，因为它指定`reference`必须返回 a。

底线，**如果你有一个可变的前向迭代器到一系列可复制分配的类型，你就有一个有效的输出迭代器**。

（从技术上讲，具有 a`operator=(...) const`和可变成员的类型序列的常量迭代器也符合条件，但我们希望没有人会这样做。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T18:49:20.327

> 前向迭代器要求不包括输出迭代器的要求

这听起来倒退了。OutputIterators 需要满足的条件比 ForwardIterators*少。*（前向迭代器在递增后应该是可重用的，即将它们递增两次应该会产生相同的结果）。

因此，*只要*输出迭代器在算法完成之前*保持有效，就可以了。*爱荷华州：

```
auto outit = std::begin(v2);
std::advance(outit, v1.size()); // or: std::distance(std::begin(v1), std::end(v2))
// outit should still be valid here 
```

**编辑**评论：

> ### § 24.2.1
> 
> 进一步满足输出迭代器要求的迭代器称为`mutable` `iterators`。不可变迭代器称为`constant` `iterators`.

现在，让我找到将其联系在一起的一点，即`vector::begin()`返回*可变*随机访问迭代器。

信息

> ### § 24.2.5 前向迭代器 [forward.iterators]
> 
> ¹类或指针类型 X 满足前向迭代器的要求，如果
> 
> *   X 满足输入迭代器 (24.2.3) 的要求，
> *   X 满足 DefaultConstructible 要求 (17.6.3.1)，
> *   如果 X 是可变迭代器，则 reference 是对 T 的引用；如果 X 是一个 const 迭代器，reference 是对 const T 的引用，
> *   表 109 中的表达式是有效的并且具有指定的语义，并且
> *   X 类型的对象提供多次通过保证，如下所述。

# html - html 3 column layout

> ID：12608363
> 
> 赞同：-1
> 
> 时间：2012-09-26T18:43:54.257
> 
> 标签：html, css

I'm looking for a layout that has a 3 column [fluid][fixed][fluid] layout where [fixed] is centered in the middle of the page.

I've been looking around for a while now and cant seem to come up with a solution that doesn't require tables. Does anyone have a solution that only uses div's and css?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:58:13.600

你的意思是这样吗？

[http://www.css-lab.com/demos/3col-fluid/3col-fix-cntr.html](http://www.css-lab.com/demos/3col-fluid/3col-fix-cntr.html)

只需右键单击并查看源代码以查看它是如何完成的。

# php - Are PHP Variable Variable Variables possible. $$$a

> ID：12608366
> 
> 赞同：-2
> 
> 时间：2012-09-26T18:44:16.730
> 
> 标签：php, variables

Php uses variable variables. So

```
$a="hello";
$$a="oops";
echo($hello) 
```

this gives us output:oops My question is can Variable variables be used for more levels like is $$$a defined? will

```
$a="hello";
$$a="oops";
$$$a="she";
echo($oops); 
```

give us output?? If yes to what level are variable variables possible? If no why not????

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:47:24.443

是的，这很好，AFAIK 它们可以无限嵌套。

但是请不要使用这些，变量变量很少是一个好主意，更不用说变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:58:21.340

看来限制是相当高的。

```
<?php

$depth = 1;
while (true) {
    echo "// At depth {$depth}\n";

    $prefix    = str_pad('', $depth, '$');
    $statement = "{$prefix}varvar = 'var{$depth}';\n";

    echo $statement;

    eval($statement);
    $depth++;
} 
```

只进行了轻微测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:53:11.380

您可以将变量范围限定为堆栈的高度。它是半无限的。您可以在变量中声明变量，直到内存空间用完。然后疯狂的事情会开始发生，你的程序可能会崩溃（读起来很可能）。无论哪种方式，都不建议使用这种类型的范围。

# iphone - Moving Xcode Projects to different computer

> ID：12608368
> 
> 赞同：3
> 
> 时间：2012-09-26T18:44:20.910
> 
> 标签：iphone, xcode, ipad

I got a new computer and downloaded Xcode and transferred all my old projects to it. What all do I need to do with keychain to submit apps from new computer, or do I just need to transfer the provisioning profiles from old computer as well?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T18:51:42.307

您可以从“设备”管理器中导出您的个人资料。单击您的团队名称，然后单击导出（在底部）。然后，您可以设置在新计算机上导入配置文件所需的密码。它应该包含您需要的所有配置文件、证书和私钥。

以下是相关文档页面：[Exporting Your Code Signing Assets to Your File System](http://developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/export_signing_assets.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:57:13.657

是的，这很简单。

您确实需要转移您的开发者证书。

为此，请使用钥匙串访问工具，单击“我的证书”，找到您的 iPhone 开发人员证书，选择它，然后使用文件菜单中的“导出项目...”进行导出。

然后，将导出的证书传输到您的新机器。然后，您只需双击新机器上的文件即可自动将它们添加到本地钥匙串中。

您还可以使用 Xcode Organizer（在您的新机器上）将您的配置与您的 iOS 开发人员帐户同步。

Xcode 项目本身是完全独立的。因此，将其捆绑（压缩或其他）并将其传输过来，然后解压缩。

然后它应该一切正常。

如果您打算使用多台机器来开发同一个项目，那么使用 GIT 或 Subversion 来保存您的 Xcode 项目是一个好主意。我这样做并且效果很好。

祝你好运！

# excel - Copying of a cell value from one workbook to another

> ID：12608369
> 
> 赞同：0
> 
> 时间：2012-09-26T18:44:21.493
> 
> 标签：excel, vba

Team,

Am new to excel Macro and trying to copy a value of a Cell E15 from a workbook name september to D15 of another workbook name format and am unable to do that with the below coding. Please help me

I used the below coding to do so.

```
Sub COPYCELL()
Dim wbk As Workbook
strFirstFile = "c:\documents and Settings\msivas\Desktop\James\September.xls"
strSecondFile = "c:\documents and Settings\msivas\Desktop\James\Format.xls"
Set wbk = Workbooks.Open(strFirstFile)
With wbk.Sheets("Summary")
Range("E15").Copy
End With
Set wbk = Workbooks.Open(strSecondFile)
With wbk.Sheets("sheet1")
Range("D12").PasteSpecial Paste:=xlPasteAll
End With
End Sub 
```

Am receiving an error and unable to know.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:48:14.067

试试这个更新。通过不回收 wbk 变量，您将避免问题。

```
Sub COPYCELL()
Dim wbkOrg As Workbook, wbkDest as workbook
dim strFirstFile as string, strSecondFile as string

strFirstFile = "c:\documents and Settings\msivas\Desktop\James\September.xls"
strSecondFile = "c:\documents and Settings\msivas\Desktop\James\Format.xls"

Set wbkOrg = Workbooks.Open(strFirstFile)
Set wbkDest = Workbooks.Open(strSecondFile)

wbkOrg.Sheets("Summary").Range("E15").Copy wbkDest.Sheets("sheet1").Range("D12")

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:58:06.983

根据我的评论，这对我有用：

```
Option Explicit
Sub COPYCELL()
    Dim wbk1 As Workbook, wbk2 As Workbook
    Dim strFirstfile As String, strSecondFile As String

strFirstfile = "c:\documents and Settings\msivas\Desktop\James\September.xls"
strSecondFile = "c:\documents and Settings\msivas\Desktop\James\Format.xls"

    Set wbk1 = Workbooks.Open(strFirstfile)

    Set wbk2 = Workbooks.Open(strSecondFile)

    With wbk1.Sheets("Summary")
        .Range("E15").Copy
    End With

    With wbk2.Sheets("sheet1")
        .Range("D12").PasteSpecial Paste:=xlPasteAll
    End With
End Sub 
```

# bash - Sending POST via CURL error

> ID：12608373
> 
> 赞同：0
> 
> 时间：2012-09-26T18:44:50.883
> 
> 标签：bash, curl, terminal

I am trying to send a HTTP POST via CURL on the command line. I am doing something wrong. Could someone advise me on what's wrong with my command? I am doing the following:

```
curl -X POST -H "Content-Type:application/json" https://www.url-here.com -d {JSON OBJECT HERE} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:00:23.960

如果你添加 -v 你会得到一个详细的错误信息，可以帮助调试。

根据[手册](http://curl.haxx.se/docs/manpage.html)，您应该将选项放在 url 之前。

这是我目前用于测试的 curl 调用，效果很好：

```
curl -v -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{}' http://example.com 
```

# ruby-on-rails - Rails Cancel Confirmation Reason

> ID：12608374
> 
> 赞同：0
> 
> 时间：2012-09-26T18:44:53.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancellation

I have an application, which contains calls. I want to be able to cancel the call and supply a reason for the call cancellation. So far I have my cancel action working in the controller, but I'm trying to figure out how to expand it so before it posts "cancel" to the `call_status` field it will also populate a `cancel_reason` field based on a drop down.

Here's what I have so far:

> **view code:** *cancel button*

```
<%= link_to 'Cancel', 
    cancel_call_path(call), 
    confirm: 'Are you sure you want to cancel the call?', 
    :method => :post, 
    :class => 'btn btn-danger btn-mini' %> 
```

> **controller code:** cancel action

```
def cancel
        @call = Call.find(params[:id])

        attrs = {
          call_status: 'cancel', 
          incharge_id: @call.units.first.incharge_id, 
          attendant_id: @call.units.first.attendant_id
        }
        attrs.merge!({ incharge2_id: @call.units.second.incharge_id, attendant2_id: @call.units.second.attendant_id }) if @call.units.count == 2

        if @call.update_attributes(attrs)
          @call.units.each do |unit|
             CallMailer.cancel_call(unit.incharge, @call).deliver
             CallMailer.cancel_call(unit.attendant, @call).deliver
           end
         redirect_to calls_url, :notice => "Call was successfully cancelled"
        else 
          redirect_to calls_url, :error => "Whoops."
        end
      end 
```

I want either the confirmation pop-up shown, with the reason for cancellation, or the *cancel action* tied to a different view with a small form, that includes a reason.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:02:51.490

默认情况下，`confirm`in 属性`link_to`使用 JavaScript `window.confirm`，它是一个简单的是/否，返回 true/false。

如果您想在同一个页面上完成所有操作，您将需要使用 JavaScript 和 Ajax 来完成此操作。类似于在 Cancel 链接上添加事件处理程序的内容，它将显示带有下拉菜单的模式。然后，此模式的结果将向 Rails 应用程序发送一个 POST 请求。[有很多 jQuery 插件](https://stackoverflow.com/questions/1656086/modal-windows-plugin-to-rails)可以用来帮助你在 Rails 中完成这项工作。

第二个选项是您描述的选项，即在控制器中使用单独的操作。在用户体验方面，我认为第一个选择是一条更好的路线，并不像听起来那么可怕。

# c# - Make all cells in one row in DataGridView load bold during LoadDataRow?

> ID：12608377
> 
> 赞同：4
> 
> 时间：2012-09-26T18:45:07.560
> 
> 标签：c#, datagridview, formatting

Hey all: I'm trying to highlight a row in a datagridview when a value in that row changes. My code is abstracted below:

```
void fillTable(DataTable table, List<object> readings)
{
    foreach (object r in readings)
        LoadRow(table, r)
}

private void LoadRow(DataTable table, Object r)
{
    table.LoadDataRow(new Object[] { r.parameter1, r.parameter2, r.parameter3 }
    if (r.parameter3 == something)
        *make row bold*
} 
```

What I want to do is make the entire row bolded if r.parameter3 is a certain value. I don't know what to put in that statement to make the row bolded (or highlighted, or whatever). I know that once I have the datagridview populated, I can do something like

```
table.Rows[Index].DefaultCellStyle.Font = boldFont; 
```

but I don't know the index when im loading the row (because its being called in a loop) and I'd rather not go back through once Im done building the datagridview.

Any help is greatly appreciated. Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:52:49.917

那这个呢 ：-

```
table.Rows[Index].DefaultCellStyle.Font = new Font(Yourfont, FontStyle.Bold); 
```

希望这可以帮助。

# php - 通过jquery无意中的多个帖子

> ID：12608381
> 
> 赞同：0
> 
> 时间：2012-09-26T18:45:15.537
> 
> 标签：php, jquery, mysql

这是我的第一篇文章，所以我希望我没有违反任何规则。我已经进行了相当广泛的搜索，但可能没有找到我想要解决的正确术语。

无论如何，我的问题是这样的：我有一个带有项目列表的表格，最左边的列有一个按钮，单击时调用 ajax Post 和/或加载函数来查询项目的历史并将其列在下面桌子。这在其真正意义上的预期结果中起作用，但是，通过 FireBug 查看控制台，随后单击列表中的按钮会导致帖子翻倍。IE。第一次单击显示 1 个控制台事件，第二次单击显示 2 个控制台事件，第三次单击显示 4 个控制台事件，依此类推。这种情况一直持续到我选择不同的位置并且计数重置。

以下是我在控制台中看到的内容。这带来了时间问题，因为每个后续帖子都需要更长的时间。

> 点击 hist-tag 按钮 5365

```
>GET http://localhost/digipens/query.php?rec_id=5365 
```

> 点击 hist-tag 按钮 5365

```
>GET http://localhost/digipens/query.php?rec_id=5365 
```

> 点击 hist-tag 按钮 5365

```
>GET http://localhost/digipens/query.php?rec_id=5365 
```

> 点击 hist-tag 按钮 5365

```
>GET http://localhost/digipens/query.php?rec_id=5365 
```

代码：

```
$('.hist-tag').click(function(){

  var ID=$(this).closest('tr').attr('id')

  itemid  = $("#itemid_input_"+ID).val();
  dataString = '?rec_id='+ID;

  $('#item_hist').load('query.php' + dataString); 

}); 
```

任何实现相同目标的想法或不同方式都是极好的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:22:56.457

听起来好像您正在添加单击处理程序作为单击的结果。你`$('.hist-tag').click()`在表格更新后打电话吗？如果是这样，您每次都在添加新的点击处理程序，这意味着点击被处理两次，然后是 4 次，然后是 8 次，等等。

我只能猜测，因为我在这里没有看到相关代码。

如果是这样，正确的解决方案是只添加一次单击处理程序，然后通过`.on()`调用来完成。这样，就可以处理当前和未来元素的点击：

```
$('#mytable').on('click', '.hist-tag', function(){
    var ID=$(this).closest('tr').attr('id');
    itemid=$("#itemid_input_"+ID).val();
    dataString = '?rec_id='+ID;
    $('#item_hist').load('query.php' + dataString);
}); 
```

这会将处理程序附加到您知道将始终存在的元素`#mytable`，或者无论您的表的 ID 是什么，然后监视对传播到表的子项的点击，并在您提供的选择器上过滤它们，即`.hist-tag`.

我再次猜测，但这就是我所拥有的证据似乎正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:23:47.530

我怀疑您的点击事件在每次返回时都会以某种方式重新绑定。
加载调用的响应中可能包含相同的脚本？

尝试这个：

```
$('.hist-tag').off('click');
$('.hist-tag').on('click', function(){
    var ID=$(this).closest('tr').attr('id');
    itemid=$("#itemid_input_"+ID).val();
    dataString = '?rec_id='+ID;
    $('#item_hist').load('query.php' + dataString);
    return false;  // prevents bubbling the click to the container
}); 
```

# jquery - 谷歌地图 API 标记、Wordpress 和 jQuery

> ID：12608384
> 
> 赞同：0
> 
> 时间：2012-09-26T18:45:35.330
> 
> 标签：jquery, wordpress, google-maps

我设法实现了 Google Maps Api，并通过函数从 Wordpress 数据库中加载了标记。但我不知道如何将自定义图标添加到标记别针。问题是 Wordpress 不允许直接访问模板文件。

我的图片加载到了主题/主题名/img/bgi

脚本如下所示：

```
var myLatlng = new google.maps.LatLng(data[i].latitude,data[i].longitude);
                    marker = new google.maps.Marker({
                            position: myLatlng,
                            //icon: data[i].image,
                            map: map,
                            title: data[i].title
                    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:59:25.673

我将以下内容用于我的解决方案 - 主题目录中文件的绝对路径：

```
<?php bloginfo('template_directory'); ?>/img/marker.png
<?php bloginfo('template_directory'); ?>/img/marker-shadow.png 
```

所以你有了：

```
var image = new google.maps.MarkerImage('<?php bloginfo('template_directory'); ?>/img/marker.png',
    new google.maps.Size(60,78),
    new google.maps.Point(0,0),
    new google.maps.Point(30,78)
);
var shadow = new google.maps.MarkerImage('<?php bloginfo('template_directory'); ?>/img/marker-shadow.png',
    new google.maps.Size(105,78),
    new google.maps.Point(0,0),
    new google.maps.Point(30,78)
); 
```

# iphone - Phonegap 应用程序在 iOS 6 上显示空白屏幕

> ID：12608387
> 
> 赞同：5
> 
> 时间：2012-09-26T18:45:44.817
> 
> 标签：iphone, cordova, ios6

我使用 Phonegap 和 Sencha Touch 2 构建了应用程序，在 iOS 5.1 上一切正常，但在 iOS 6 上，应用程序打开并显示空白屏幕。为什么 ？我怎样才能检查它？您是否熟悉带有 Phonegap 的 iOS 6 上的这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T00:28:34.867

在 IOS 模拟器中重置内容和设置就可以了。如果您在日志中收到“错误：无法附加到进程 ID 0”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:21:53.473

从我使用 Phonegap 和/或 Sencha 看到的情况来看，通常一个空白屏幕意味着您在某处遇到了 javascript 错误。Javascript 在 PhoneGap 内静默失败，因此您最好的解决方案是在启用 Javascript 控制台的 Chrome、Safari 或 Firefox 内打开 index.html 文件。

这将允许您查看导致白屏的错误，一旦您知道问题所在并修复它，您就可以在设备上运行它，您应该不会再看到白屏了。

# javascript - 使用 jQuery 或 JavaScript 处理多个表单上的类

> ID：12608390
> 
> 赞同：2
> 
> 时间：2012-09-26T18:45:51.510
> 
> 标签：javascript, jquery, html, forms

我有一个包含多种表单的站点，我想针对特定表单循环并操作 div 和输入上的类。我可以通过 -

```
var thisForm = $(el).closest('form');
var myId = thisForm[0].id 
```

但后来我不确定如何遍历特定的类。

* * *

**例子：**

**对于带有“ class1** ”的每个输入，我想将其更改为“ **class2** ”

和

对于每个带有“ **class3** ”的div，我想添加“ **class4** ”

* * *

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:48:14.470

应该像这样简单

```
var thisForm = $(el).closest('form');
$('input.class1', thisForm).removeClass('class1').addClass('class2');
$('div.class3', thisForm).addClass('class4'); 
```

请参阅此示例[http://jsfiddle.net/dXrN8/2](http://jsfiddle.net/dXrN8/2)

它是 jQuery，所以你不需要循环来做这些事情，动作发生在你的选择器匹配的所有东西上。

我们正在做的是找到表单，并将其分配给`thisForm`.

然后在接下来的两行中使用它来确定我们的选择器。

然后选择所有`input.class1`元素并删除class1并添加class2。

然后选择我们所有的`div.class3`元素并添加class4。

# php - 如何使用 substr 从一行中提取文本？

> ID：12608393
> 
> 赞同：0
> 
> 时间：2012-09-26T18:46:08.347
> 
> 标签：php, string, function, substr

我想使用 PHP 中的 substr 方法从文本文件中提取 2 条信息。一些示例行如下

```
 CON8101 Residential Building/Estimating 6 hrs/w 
 CON8411 Construction Materials I 4 hrs/w
 CON8430 Computers and You 4 hrs/w 
```

我需要提取每门课程所需的小时数。我写的函数从行尾提取数字是否正确？我想出了这个功能：

```
 function GetCourseHours($couseList)
    {//using 7 character placements from the end, taking 1 value (number)
        $courseHours = substr(courseList, -7, 1);
    } 
```

接下来，提取除 hrs/w 之外的所有内容，例如*CON8101 Residential Building/Estimating*。我不确定如何在 substr 中表达以从行中提取**除**最后 7 个字符空格之外的所有内容。仅获取课程名称和 ID。

```
 function GetCourseName($courseList)
    {//how do I only emit the last 7 placements of the txt string?
        $courseName = substr(courseList, ..., ...)
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:50:02.510

[PHP 文档`substr`](http://us.php.net/manual/en/function.substr.php)涵盖了您需要了解的有关其行为的所有信息：

```
function GetCourseName($courseList)
{
    $courseName = substr($courseList, 0, -7);
} 
```

您的应用程序的该文档的相关部分是：

> 如果给定长度（第三个参数）并且为负数，则从字符串末尾省略许多字符（在开始位置为负数时计算开始位置之后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:54:05.620

首先是正确的，第二次使用这个 $courseName = substr($courseList, 0, strlen($courseList)-7); 见这里[http://us.php.net/manual/en/function.substr.php](http://us.php.net/manual/en/function.substr.php)

# nginx - 除了配置之外，使用相同的代码运行多个站点

> ID：12608394
> 
> 赞同：0
> 
> 时间：2012-09-26T18:46:13.027
> 
> 标签：nginx

我有将用于多个站点的相同代码。在 Nginx 配置中，我想让所有站点都指向同一个代码文件夹。

我认为这应该有效。唯一的问题是我希望每个站点使用不同的配置文件。

这样的事情怎么可能实现？当然，我不需要复制所有网站代码只是为了让每个网站都有不同的配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:59:23.223

你用什么语言编写脚本？大多数语言都有办法检查传入的请求。从中您可以从请求中提取域名，并使用 if 或 switch 语句根据名称加载您加载的 conf 文件。

您还可以使用 get 变量，例如 www.domain.com/index.html?conf=conf1.conf。然后在您的控制器中，您需要查看该 git 变量以确定要加载的 conf 文件。

这些解决方案中的任何一个都应该很容易在您的脚本语言文档中找到。

# ios - iOS 6 - “应用程序可执行文件缺少所需的架构：armv6”

> ID：12608395
> 
> 赞同：10
> 
> 时间：2012-09-26T18:46:30.340
> 
> 标签：ios, ios6

首先，我已经尝试了这个问题的所有答案 -[应用程序可执行文件缺少必需的架构 armv6](https://stackoverflow.com/questions/7053466/application-executable-is-missing-a-required-architecture-armv6)

这在我下载 iOS 6 之前的上周有效。现在在验证我的存档以进行分发时出现以下错误。

![在此处输入图像描述](../Images/be84dff0f0ec495f6c48de31118db7c5.png)

据我所知，唯一的变化是 iOS 6。所以我相信一定有一个*新*的步骤我错过了。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-26T19:04:30.293

确保*iOS 部署目标*设置为`iOS 4.3`.

尽管您的项目设置可能会`armv6`显示，但 Xcode 4.5 不再支持它，4.3 以下的部署目标也不支持。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-26T20:11:52.653

XCode 4.5 不再支持 armv6 编译。它可能仍然存在于架构设置中（来自旧项目），但不会再构建它们。如果您需要为旧的（如基于 armv6 的）iPhone 构建，则不能在同一构建中支持 6.0（因为您需要 Xcode 4.5）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T01:34:57.563

我对 Cocos2d 和 Xcode 4.5 的体验：

当我在 Xcode 4.5 中创建一个新的而不是 Cocos2d 项目时，可以构建它以进行归档，而不会警告丢失任何架构。

但是，当我创建一个新的 Cocos2d 项目时，Xcode 4.5 给出了缺少 armv6 的验证警告，并且 App Store 拒绝接受该应用程序。

检查后发现 Cocos2d 自动将 iOS Deployment Target 设置为 iOS 4.0。将值更改为iOS 4.3，它将解决问题。

# javascript - 检测图像何时滚动出视野

> ID：12608400
> 
> 赞同：4
> 
> 时间：2012-09-26T18:47:00.260
> 
> 标签：javascript, jquery, html, javascript-events

我有一个 div，里面会有一些图像。当用户滚动到图像的顶部或底部边缘即将被父 div 隐藏的点时，我希望图像消失。结构是这样的：

```
<div class="parent">
   <img/>
   <img/>
</div> 
```

我的目标是让图像在其顶部或底部边缘开始被父 div 隐藏时淡出，然后在其滚动到全视图时让它淡入。

我正在使用 jQuery 并监听`div`滚动事件来检查`img` `offset().top`，一旦它达到不在视图中的最高值，我就会隐藏图像。

但这似乎占用了大量的 cpu 时间，因为我必须在每个滚动事件中遍历图像。最重要的是，即使我调用`hide()`了`img`，它也根本没有隐藏它（放置一个断点只是为了确保它被调用，并且确实如此）。有没有准确的方法来做到这一点？

**编辑：** 感谢 mcpDESIGNS，我需要使用`position()`而不是`offset()`. 此外，`hide()`由于`display`设置为`none`. 所以我切换到`visibility:hidden`它并按预期工作。

**EDIT2：** 就像一个注释，这是我正在使用的 js，几乎是 mcpDesigns 所建议的

*老的*

```
var display = $("div");

display.scroll(function () {

    var avatars = $("div > img");
    console.log("************************");
    avatars.each(function (index) {
        console.log($(this).offset().top);

        if ($(this).offset().top < 40)
            $(this).hide();
        else {
            $(this).show();
        }
    });
}); 
```

*新的*

```
var display = $("div");

display.scroll(function () {

    var avatars = $("div > img");
    console.log("************************");
    avatars.each(function (index) {
        console.log($(this).position().top);

        if ($(this).position().top < 0)
            $(this).css("visibility", "hidden")//.hide();
        else {
            $(this).css("visibility", "")//.show();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:57:53.663

您需要根据每个图像以及它的位置是否为**负数（即父可滚动 div 的顶部）或与****可滚动 div 的高度**相同的 # 进行大量计算。

```
​$('.parent').scroll(function () {            
    console.log($('img').position().top);

    // if ( negative top position || same#asDivheight) { fadeIn / out, etc }
});​ 
```

玩弄它，但这基本上就是它的要点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:24:07.963

我想出了一个你可能会觉得合适的方法。

代码：

```
// initialize
var limit = 0;
var timeout;

var scrollCallback = function() {
    limit = 0;
    clearTimeout(timeout);

    // TODO: calculations and hide/show images
}

$(window).scroll(function(e) {
    limit++;
    if (limit > 50) {
        scrollCallback();
    }
    clearTimeout(timeout);
    timeout = setTimeout(scrollCallback, 500);
});​ 
```

在您获得 50 个滚动事件之前，此代码不会触发回调。此外，如果未达到 50，它将在 500 毫秒后触发。这可能会帮助您解决性能问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:32:06.477

这里有一个小 jsfiddle 供您欣赏：http: [//jsfiddle.net/BerkerYuceer/35P2e/](http://jsfiddle.net/BerkerYuceer/35P2e/)

```
$('.parent img').mousemove(function (e) {
    var y = e.pageY - this.offsetTop;
    if (y == $(this).position().top || y == $(this).height()-2)
    {
        alert($(this).position())
        $(this).hide();
    }else 
    {
        $(this).show();
    }
});​ 
```

-2 是捕捉元素真实高度的边框高度.. 祝你好运..

# html - 禁用 gpu 加速渲染

> ID：12608401
> 
> 赞同：0
> 
> 时间：2012-09-26T18:47:10.347
> 
> 标签：html, browser, web

我的网站在某些浏览器（例如 Windows 和 Mac 上的 Chrome，Mac 上的 Safari）下出现了一些与 gpu 加速相关的渲染问题，我想知道是否有办法为我的网站禁用它。`<meta>`我可以在我的页面中包含类似标签的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:54:54.427

不，那里没有。

您应该解释渲染问题是什么，看看我们是否可以帮助您解决这些问题。

# jquery - 如何将相同的 JQuery 代码应用于所有 Rails 集合项

> ID：12608402
> 
> 赞同：2
> 
> 时间：2012-09-26T18:47:19.073
> 
> 标签：jquery, ruby-on-rails-3

我正在尝试对帖子的每个回复应用启用 Javascript 的评级。单击链接后，某些元素会被隐藏，而其他元素会显示出来，并且评级会通过 Ajax 更新。我将部分计数添加到每个响应的 HTML 元素的 ID 中，因此每个响应都有不同的 ID。但是现在我如何才能确定点击了哪个响应的哪个链接，以便 JQuery 代码可以处理与相关响应关联的元素呢？有没有办法在点击链接时发送链接 ID？

编辑

## 切换功能

```
(function($) {
           return $.fn.clickToggle = function(func1, func2) {
           var funcs;
           funcs = [func1, func2];
           this.data("toggleclicked", 0);
           this.click(function() {
            var data, tc;
            data = $(this).data();
            tc = data.toggleclicked;
            $.proxy(funcs[tc], this)();
            return data.toggleclicked = (tc + 1) % 2;
   });
   return this;
   };
   })(jQuery); 
```

## 用法

```
$('#link1').clickToggle(function() {
    $('#link2').hide();
    $('link3').hide();
    $('#link4').show();
    $('link5').show();
}, function() {
    $('#link2').show();
    $('link3').show();
    $('#link4').hide();
    $('link5').hide();     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:56:29.807

看看[这个小提琴](http://jsfiddle.net/TT3Yn/)。

使用 jQuery 的`on()`方法，我正在侦听所有锚标记上的单击事件。在点击处理程序中，我抓住了目标并拉动了它的 ID 属性。

```
<a href="#" id="A">Test 1</a><br>
<a href="#" id="B">Test 2</a>​

$(document).ready(function() {
    $(document).on('click', 'a', function(event) {
        event.preventDefault();
        alert($(event.target).prop('id'));
    });        
});​ 
```

# shell - 通过shell更新文件中的值

> ID：12608406
> 
> 赞同：1
> 
> 时间：2012-09-26T18:47:27.640
> 
> 标签：shell

我遇到了 shell 脚本的问题。我有一个存储变量值的文件。我想通过脚本更新变量的值。你能建议最简单的方法吗？

`VAR.ENV`文件包含

```
FLAG=TRUE 
```

我想通过脚本更新如下值

```
FLAG=FALSE 
```

注意：此文件中存在很多变量。

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:49:01.473

```
sed -i -e 's/^FLAG=.*/FLAG=FALSE/' thefile 
```

前提是您的文件确实有这样的一行。如果格式不同，您可能需要做更多的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:03:56.937

```
awk -F= -v OFS='=' '{print $1, ENVIRON[$1]}' VAR.ENV > tmp && 
mv tmp VAR.ENV 
```

不（直接）使用临时文件：

```
perl -i -F= -lape '$_ = $F[0] . "=" . $ENV{$F[0]}' VAR.ENV 
```

# python - 多重登录选项 (Google/Facebook/Twitter)

> ID：12608407
> 
> 赞同：6
> 
> 时间：2012-09-26T18:47:41.153
> 
> 标签：python, google-app-engine, login, openid, oauth-2.0

我正在使用 python 在 Google App Engine 上编写一个 webapp，现在我正在使用带有 OpenID 的内置联合登录系统，它适用于 Google/Yahoo/AOL，但我想让 Facebook 和 Twitter 上的用户访问该网站好。在过去的一两年中出现过这样的问题，但没有一个问题得到完全回答或已经过时。

基本上我想要的只是让用户能够使用这三个服务中的任何一个登录，并且我希望能够对它们进行身份验证并与每个用户一起存储一个唯一的 user_id。我对在 Facebook 墙上发帖或从该网站发送推文更新并不是很感兴趣，我只是想为用户提供一种使用现有帐户登录的非常简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:24:14.503

您是否考虑过使用提供此功能的库？像simpleauth这样的东西：

*   [https://github.com/crhym3/simpleauth](https://github.com/crhym3/simpleauth)

大多数新项目的样板文件也内置了这些东西：

*   [http://green-algae.appspot.com/](http://green-algae.appspot.com/)
*   [https://github.com/coto/gae-boilerplate](https://github.com/coto/gae-boilerplate)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-15T07:21:40.440

即使唤醒了一个旧线程，但为了记录：

[Authomatic](https://peterhudec.github.io/authomatic/)是一个真正完整的 Python Web 应用程序（包括 Google AppEngine）的授权/身份验证客户端库。

开箱即用，它支持大约 29 个不同的提供商。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:25:16.480

另一个很棒的图书馆是[Velruse](https://velruse.readthedocs.org/en/latest/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T12:19:33.793

我找到了另一个 API [**HybridAuth**](http://hybridauth.sourceforge.net/)

它带有出色的 API 和 PHP 库，

使用它的主要优点是它带有几个第三方插件，例如[**CodeIgniter**](https://github.com/andacata/HybridIgniter)、[**Wordpress**](http://hybridauth.sourceforge.net/userguide/Plugin_WordPress_Social_Login.html)、[**Zend**](https://github.com/SocalNick/ScnSocialAuth)、[**CakePHP**](https://github.com/hybridauth/CakePHP-HybridAuth)、[**Joomla**](https://hs-shelf.com/item/UyLOnrdkO9sEg2S1hulA.html)、[**Drupal**](http://drupal.org/project/hybridauth)等。

试试看是最好的。

# c# - 更改背景颜色而不更改gridview的标题

> ID：12608414
> 
> 赞同：0
> 
> 时间：2012-09-26T18:48:10.447
> 
> 标签：c#, gridview

如果 endTimeStamp 行的项目等于“0001-01-01 00:00:00.0000000”，我已经创建了此代码来更改行的颜色，它会更改行但也会更改标题我想问我如何定位项目行没有标题

```
protected void gv_timesheet_RowDataBound(object sender, GridViewRowEventArgs e)
{
    //To check condition on date time 
    if (Convert.ToDateTime(DataBinder.Eval(e.Row.DataItem, "endTimeStamp")) == Convert.ToDateTime("0001-01-01 00:00:00.0000000"))
    {
        e.Row.BackColor = System.Drawing.Color.Red;
    }
} 
```

![在此处输入图像描述](../Images/e84e585e1262ca2e4c59547763c30b25.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:50:20.647

您可以添加条件 - 基于`DataControlRowType.DataRow`

```
 if(e.Row.RowType == DataControlRowType.DataRow)
 {
      //To check condition on date time 
     if (Convert.ToDateTime(DataBinder.Eval(e.Row.DataItem, "endTimeStamp")) == Convert.ToDateTime("0001-01-01 00:00:00.0000000"))
     {
        e.Row.BackColor = System.Drawing.Color.Red;
     }
  } 
```

# html - 在 Rails 中使用布局文件提供静态 HTML

> ID：12608424
> 
> 赞同：5
> 
> 时间：2012-09-26T18:48:50.617
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, layout, ruby-on-rails-3.2

在 Rails 中使用布局提供静态 HTML 文档的最佳方式是什么？显然我可以只将 HTML 文件保留在`public/`目录中，但是我将无法应用布局，或者我可以吗？否则，我可以将以下内容放入`config/routes.rb`：

```
match ':page' => 'static#display', :page => /.+\.html/ 
```

是否`.+\.html`有效，所以它以 结束`.html`？无论如何，假设确实如此，我想我会有一个控制器：

```
class StaticController < ApplicationController
  layout 'static_files'
  def display
    render params[:page]
  end
end 
```

假设工作正常，Ruby 是否会不必要地尝试将 HTML 文件解析为 ERB 文件？Rails 对此有更好的机制吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T18:59:58.087

本[教程](http://ruby.railstutorial.org/chapters/static-pages.html#sec-static_pages_with_rails)对 Rails 中的静态页面有很好的解释。

首先，您可以通过 rails 生成器生成静态页面：

```
rails generate controller StaticPages home help --no-test-framework 
```

然后你可以编辑你`config/routes.rb`的，如下所示：

```
SampleApp::Application.routes.draw do
  root to: 'static_pages#home'
  match '/help',    to: 'static_pages#help'
  .
  .
  .
end 
```

最后在您的`StaticPages`控制器中创建`home`and`help`方法。

```
class StaticPagesController < ApplicationController
  def home
  end

  def help
  end
end 
```

**更新**- [引用来源：Ruby on Rails 指南 - 第 2.1 节](http://guides.rubyonrails.org/layouts_and_rendering.html)

> 您听说过 Rails 提倡“约定优于配置”。默认渲染就是一个很好的例子。默认情况下，Rails 中的控制器会自动使用与有效路由对应的名称呈现视图。例如，如果您的 BooksController 类中有此代码：

```
class BooksController < ApplicationController 
  #empty controller
end 
```

以及您的路线文件中的以下内容：

```
resources :books 
```

如果你有一个视图文件`app/views/books/index.html.erb`，那么即使没有方法，Rails 也会渲染它。这应该适用于任何映射的路线/等效视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T19:00:37.977

您可以使用 Thoughtbot 的[**high_voltage gem**](https://github.com/thoughtbot/high_voltage)。它的目的是在 Rails 中包含静态页面，并且您可以使用任何您喜欢的模板语言。在内部，它的工作方式与此处提出的解决方案类似。

[您可以为high_voltage](https://github.com/thoughtbot/high_voltage#override)提供的每个页面自定义布局文件，如自述文件中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T05:02:55.200

创建一个控制器来处理静态页面

```
rails generate controller pages 
```

在 routes.rb 中将路由映射到这些操作

```
match '/home' => 'pages#home'
match '/help' => 'pages#help'
match '/contact' => 'pages#contact' 
```

在页面控制器中创建操作

```
def home
CODE
end

def contact
CODE
end

def help
CODE
end 
```

默认情况下，rails 将在视图文件夹中查找 ACTION.html.erb。创建视图，瞧。让我知道这是否适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-18T13:51:03.417

> 我不想在页面控制器中为我的 85 个静态 HTML 页面创建 85 个方法。

这可能看起来有点骇人听闻，但正是您想要的：

```
# File: app/controllers/static_controller.rb

class StaticController < ApplicationController
  def method_missing(m, *args, &block)
  end
end 
```

现在将一些东西放在正确的目录下，例如`app/views/static/example.html.erb`，然后路由到它：

```
get '/example', to: 'static#example' 
```

你并没有真正定义一个名为 的动作`method_missing`，而是用黑魔法定义的东西。有这方面的文档：[https ://ruby-doc.org/core-2.7.1/BasicObject.html#method-i-method_missing](https://ruby-doc.org/core-2.7.1/BasicObject.html#method-i-method_missing)

# javascript - 试图避免使用 settimeout 分离函数

> ID：12608425
> 
> 赞同：1
> 
> 时间：2012-09-26T18:48:53.520
> 
> 标签：javascript, onclick, settimeout, onclicklistener

此脚本在每个鼠标事件上对图像进行“翻转”，例如鼠标悬停并单击

img src 已更改，问题是我试图延迟 onClick 事件执行的函数的执行。

我试图将功能更改为 settimeout 但没有成功

```
setTimeOut('functionName(param1, param2)', 5000); 
```

不调用封装设置超时的函数

我究竟做错了什么 ？

```
 <a href="yourpage.htm">
    <img src="images/Button2_Normal.PNG" width="150" id="img2" 
onmouseover="mOver(this, image2)" onmouseout="mOut(this, image2)" onclick="mActive(this, image2)" />
                    </a> 

                    <a href="yourpage.htm">
          <img src="images/Button1_Normal.PNG"  width="150" id="img1" 
       onmouseover="mOver(this, image1)" onmouseout="mOut(this, image1)" onclick="mActive(this, image1)">
</a> 
```

*   javascript

    ```
    var image1 = new Array("images/Button1_Normal.PNG", "images/Button1_MouseClick.PNG", "images/Button1_MouseOver.PNG");
    var image2 = new Array("images/Button2_Normal.PNG", "images/Button2_MouseClick.PNG", "images/Button2_MouseOver.PNG");

    var preloadImages = new Array();  // preloads images
    function Loadimages(images) {

        for (i = 0; i < images.length; i++) {
            preloadImages[i] = new Image()
            preloadImages[i].src = images[i]
        }
    }
    Loadimages(image1);

    lastN = ""

    function mOver(obj, images) {
        if (lastN != obj.id) {
            document.images[obj.id].src = (images.length == 3 ? images[2] : images[1])
        }
    }

    function mOut(obj, images) {
        if (lastN != obj.id) {
            document.images[obj.id].src = images[0]
        }
    }

    function mActive(obj, images) {
        var ts1 = document.getElementById('img1');
        if (typeof obj != "string") { obj = obj.id }

        document.images[obj].src = images[1]
        if (lastN != "" && lastN != obj) {
            document.images[lastN].src = images[0]
        }
        lastN = obj
    }
    function timeout_init(obj,images) {
        setTimeout('mActive(obj, images)', 5500);
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:53:20.870

关闭应该工作：

```
function timeout_init(obj,images) {
  setTimeout(function() {
    mActive(obj, images);
  }, 5500);
} 
```

这是避免`eval`类似功能的另一个原因。在您当前的实现中，JavaScript 引擎将采用 " `'mActive(obj, images)'`" 字符串并尝试`eval()`在全局上下文中使用它。到那时，原始`obj`和`images`变量早已丢失。

使用闭包，您的匿名函数仍然可以访问`timeout_init()`参数，尽管该函数已完成。但是变量在被内部函数引用时幸存下来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:06:51.743

可以传入参数`setTimeout`。这将作为 `mActive`.

```
 setTimeout(mActive, 5500, obj, images); 
```

# ant - 是否可以从 javascript scriptdef 任务中调用 ant 任务？

> ID：12608430
> 
> 赞同：13
> 
> 时间：2012-09-26T18:49:19.140
> 
> 标签：ant

是否可以从 javascript scripdef 任务调用位于同一 ant 脚本中的 ant 任务？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T20:08:32.843

是的。如果您的意思是目标，而不是任务，以下是两者的示例：

```
<target name="test">
    <echo message="In test target" />
</target>

<scriptdef name="demo" language="javascript">
<![CDATA[
    self.project.executeTarget( "test" );

    var task = project.createTask( "echo" );
    task.setMessage( "In demo task" );
    task.perform( );
]]>
</scriptdef>

<demo /> 
```

运行时，产生：

```
test:
     [echo] In test target
     [echo] In demo task 
```

参考该[任务的](https://ant.apache.org/manual/Tasks/script.html)[Ant API](http://api.dpml.net/ant/1.6.4/org/apache/tools/ant/Project.html)和文档可能会很有用。[`script`](https://ant.apache.org/manual/Tasks/script.html)

# c# - 将 XML 写入网页

> ID：12608432
> 
> 赞同：2
> 
> 时间：2012-09-26T18:49:27.253
> 
> 标签：c#, xml, web-services

我有一个用 C# 生成的 XML 文件。该文件很棒，但是，我希望（在生成 xml 文件时）将其上传到我指定的 URL。

我对网络编码不熟悉，一直在无休止地搜索。这必须是可能的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:52:59.133

您需要在拥有您的 XML 文件的地方和您希望它去的地方之间打开一些通信线路。可能有很多方法可以做到这一点，优化您的搜索，因为有很多方法可以做到这一点。最后，您需要在两者之间打开一个流，或者您需要让接收器监听某种信号，然后写下消息。

向建议 WebClient 的绅士 +1（因为我还不能这样做）。一个非常好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:53:34.463

基本上，您要说的是，您想将文件（无论是 xml 还是任何其他类型的文件）上传到 Web 服务器。

通常，您使用 FTP 将文件上传到 Web 服务器。大多数共享虚拟主机都支持此协议，当然，如果您有自己的服务器 - 设置和配置 FTP 服务器真的很容易。

有很多关于在 C# 应用程序中使用 FTP 的文章。你可以试试[这个，](http://www.codeguru.com/csharp/csharp/cs_internet/desktopapplications/article.php/c13163/Simple-FTP-Demo-Application-Using-CNET-20.htm)或者只是谷歌 C# ftp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:51:40.880

查看[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)类以将数据发送到资源。有各种上传方法。

# c# - 使用反射循环遍历 IEnumerable<> 中的值

> ID：12608439
> 
> 赞同：30
> 
> 时间：2012-09-26T18:49:49.900
> 
> 标签：c#, generics, reflection

给定一个可能包含 的对象`IEnumerable<T>`，我将如何检查一个`IEnumerable<T>`属性是否存在，如果存在，则`IEnumerable<T>`使用反射循环遍历其中的所有值，对于任何`T`？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-26T19:04:28.397

```
foreach (var property in yourObject.GetType().GetProperties())
{
    if (property.PropertyType.GetInterfaces().Contains(typeof(IEnumerable)))
    {
        foreach (var item in (IEnumerable)property.GetValue(yourObject, null))
        {
             //do stuff
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T19:11:43.993

好吧，您可以像 Aghilas 所说的那样对其进行测试，一旦测试并确认为 IEnumerable，您就可以执行以下操作：

```
public static bool IsEnumerable( object myProperty )
{
    if( typeof(IEnumerable).IsAssignableFrom(myProperty .GetType())
        || typeof(IEnumerable<>).IsAssignableFrom(myProperty .GetType()))
        return true;

    return false;
}

public static string Iterate( object myProperty )
{
    var ie = myProperty as IEnumerable;
    string s = string.Empty;
    if (ie != null)
    {
        bool first = true;
        foreach( var p in ie )
        {
            if( !first )
                s += ", ";
            s += p.ToString();
            first = false;
        }
    }
    return s;
}

foreach( var p in myObject.GetType().GetProperties() )
{
    var myProperty = p.GetValue( myObject );
    if( IsEnumerable( myProperty ) )
    {
        Iterate( myProperty );
    }
} 
```

# mysql - 仅当它们之间的差异超过 15 分钟时如何获取 2 条记录

> ID：12608442
> 
> 赞同：1
> 
> 时间：2012-09-26T18:50:03.913
> 
> 标签：mysql, sql

仅当这两个记录之间的时间为 15 分钟或更长时间时，我才需要能够使用 sql 找到第一条和第二条记录。

让我举一个小例子，这样你就可以看到我需要什么：

```
ID| Time | Serial |   
 1| 10:45|   13   |  
 2| 11:00|   12   |  
 3| 11:17|   12   |  
 4| 11:00|   13   |  
 7| 11:05|   13   |  
 8| 11:07|   12   | 
```

我需要得到这些行：

```
ID| Time | Serial | 
```

**`1| 10:45| 13 |`**
**`2| 11:00| 12 |`**
**`3| 11:17| 12 |`**
**`4| 11:00| 13 |`**
`7| 11:05| 13 |`
`8| 11:07| 12 |`

并输出如下：

```
Time 1 | Time 2 | Serial | Usage  
 10:45 | 11:00  | 13     | 15min
 11:00 | 11:17  | 12     | 17min 
```

编辑：我只需要同时比较 2 条具有相同序列号的记录。当然还有所有的记录。我在时间列中有这种类型的数据：`2012-09-06 16:53:05.581`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:58:26.923

也许是这样的：

```
SELECT
    time1.time,
    time2.time,
    time1.serial,
    (time2.time - time1.time) / 60 AS usage
FROM
    mytable time1,
    mytable time2
WHERE
    time1.id != time2.id
    AND time1.serial = time2.serial
    AND time2.time - time1.time > 60 * 15 
```

我不熟悉 MySQL 中的时间处理——我假设它们可以被减去，并且差异以秒为单位。如果需要显式转换，请在此处使用函数。

附录：这应该可以很好地处理成对的记录条目。但是，如果三个之间有 15 分钟，那么这将产生 1-2、2-3 和 1-3，因此您可能需要稍微修改一下。

# asp.net - 绕过浏览器检查

> ID：12608443
> 
> 赞同：0
> 
> 时间：2012-09-26T18:50:11.387
> 
> 标签：asp.net, cross-browser, browser

我在我的大学博客上有一个帐户，它是一种学习管理系统，但该站点只允许我通过 Internet Explorer 访问它，而我的 Internet Explorer 已损坏，所以我想通过 Chrome 或 Firefox 访问它，做任何一个知道如何绕过它？他们在服务器端使用 ASP.Net。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:54:37.833

如果您使用的是 Firefox，有几个扩展可以让您“伪装”成不同的浏览器。用户代理切换扩展将执行此操作 ( [https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/](https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/) )。

请注意，如果网站确实需要只有 Internet Explorer 具有的特性，那么这将无济于事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:55:03.760

只是伪造用户代理（大多数情况下，您使用用户代理来了解您使用的浏览器）。这是 chrome 的插件：[https ://chrome.google.com/webstore/detail/djflhoibgkdhkhhcedjiklpkjnoahfmg](https://chrome.google.com/webstore/detail/djflhoibgkdhkhhcedjiklpkjnoahfmg)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T18:55:05.207

您需要的是用户代理字符串的恶搞。这是[Chrome Web Store 上的一个工具。](https://chrome.google.com/webstore/detail/djflhoibgkdhkhhcedjiklpkjnoahfmg). 将用户代理字符串更改为 Internet Explorer 的。

# android - 当未选择电子邮件意图或按下返回时调用完成（）

> ID：12608456
> 
> 赞同：1
> 
> 时间：2012-09-26T18:51:01.350
> 
> 标签：android

所以我有一个按钮可以显示一个意图：

```
case R.id.email:
        Intent send = new Intent(Intent.ACTION_SENDTO);
        String uriText;

        uriText = getResources().getString(R.string.mailto)
                + "?subject=Subject" + "&body=";
        uriText = uriText.replace(" ", "%20");
        Uri uri = Uri.parse(uriText);

        send.setData(uri);
        startActivity(Intent.createChooser(send,
                getResources().getString(R.string.send_mail)));
        break; 
```

因此显示了不同电子邮件应用程序的选项。当我取消这个意图时（即不选择任何东西），包含这个弹出窗口的活动就完成了。为什么是这样？

# javascript - 如何使用 Mixpanel 跟踪用户通过单击 Twitter 关注按钮关注我的 Twitter 帐户的事件？

> ID：12608457
> 
> 赞同：1
> 
> 时间：2012-09-26T18:51:07.493
> 
> 标签：javascript, twitter, dom-events, mixpanel

请多多包涵，我不是开发人员。

我想跟踪网站访问者点击我的 Twitter 关注按钮的事件`Mixpanel`。因此，我运行以下`Mixpanel`事件/名称：

```
<script> function clickTwitterFollowB() {
    mixpanel.track("Twitter button");       
        }</script> 
```

单击 Twitter 按钮时，我使用`onclick`加载函数：`Mixpanel`

```
onclick="clickTwitterFollowB()" 
```

这是我在其中插入上述内容的 Twitter Button 代码：

```
<a href="https://twitter.com/myAccount" onclick="clickTwitterFollowB()" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @myAccount</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

当我执行上述操作时，不会跟踪事件，但它确实会跟踪它在链接“a”“/a”和“button”“/button”上工作。

关于此事件跟踪代码可能有什么问题的任何想法/建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:31:45.757

点击链接会加载另一个页面，此时您页面上的 JS 不再相关。

您有几个选择：[当用户单击链接时，如何记录 MixPanel 事件？](https://stackoverflow.com/questions/8657118/how-do-i-log-a-mixpanel-event-when-a-user-clicks-a-link)

# javascript - 使用 SJCL 获取 sha256 哈希的十六进制表示

> ID：12608458
> 
> 赞同：9
> 
> 时间：2012-09-26T18:51:15.567
> 
> 标签：javascript, hex, sjcl

SJCL[文档](http://cryptojs.altervista.org/hash/doc/doc_hash_stanford.html)提供以下代码作为 sha256 的示例：

```
var bitArray = sjcl.hash.sha256.hash("message");  
var digest_sha256 = sjcl.codec.hex.fromBits(bitArray); 
```

该示例中的摘要等于 64 个字符的十六进制字符串，而我期望的是 16 个字符的十六进制字符串（256 位 = 16 个十六进制字符）。我错过了什么？如何获得 16 个字符的哈希摘要？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T19:35:50.113

你误会了什么。256 位不**等于**16 个十六进制数字。

可以这样想：256 位等于 32 字节（一个字节中有 8 位）。一个字节（8 位）可以编码 256 (2^8) 个不同的值。一个十六进制数字（base-16）可以编码 16 个不同的值。如果要将相同数量的值编码为一个字节，您需要多少个十六进制数字？**二**；两个十六进制数字可以编码 256 个不同的值 (16^2)。所以，如果我们每个字节需要两个十六进制数字，而 256 位等于 32 个字节，那么这意味着我们需要**64 个**十六进制数字来表示可以存储在 256 位中的信息。

十六进制摘要很好。它应该是 64 个字符。

# java - 从 JSONObject 获取 Vector 对象

> ID：12608472
> 
> 赞同：1
> 
> 时间：2012-09-26T18:52:47.237
> 
> 标签：java, json, vector, casting, add

我想知道是否有办法从 JSONObject 中获取 Vector。假设我有这个：

```
public class Foo
    private JSONObject json;
    public Foo(){
        try{ 
            json=new JSONObject();
            Vector<,F> v=new Vector<,F>(); // pretend like the comma isn't there please 
            json.put("blah", v); ...} catch (JSONException e){...}
    } 
    .
    .
    .
    public void addBlahs(,F goo){
         try{
            Object o=json.get("blah");
            // Since json.get("blah") should be a Vector of .F's, I thought I could do something like this...
            Vector<,F> v=(Vector <,F>) o;
            v.add(goo);} catch (JSONException{ ...}
    } 
```

Eclipse 给我一个警告说未经检查的类型转换。是否可以从 JSONObject 获取某种类型的对象，然后能够使用该对象？我想向该 Vector 添加“goo”，但不确定如何正确访问它并添加到它。

我是初学者，所以请放轻松:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:56:09.240

你不能把 a 放在 a`Vector`中`JSONObject`。根据以下文件[`JSONObject#put(String, Object)`](http://www.json.org/javadoc/org/json/JSONObject.html#put%28java.lang.String,%20java.lang.Object%29)：

> **key** - 一个密钥字符串。
> 
> **value** - 作为值的对象。它应该是以下类型之一：Boolean、Double、Integer、JSONArray、JSONObject、Long、String 或 JSONObject.NULL 对象。

但是，您可以使用 an[`JSONArray`](http://www.json.org/javadoc/org/json/JSONArray.html)来代替。

# jquery - 调用restful webservice时jquery getjson不起作用

> ID：12608473
> 
> 赞同：1
> 
> 时间：2012-09-26T18:52:51.313
> 
> 标签：jquery, jsp, rest

我正在尝试从我的 jsp 页面调用一个安静的 web 服务。

宁静的 Web 服务工作正常，它正在显示 json 数据。问题出在客户身上。
客户端无法获取 Web 服务数据。

我尝试了很多方法，但没有任何效果。

这是脚本：

```
function getEmployeeDetails() {
    alert("Hai");
    alert($("#empid").val());
    $empid = $("#empid");
    alert("eval-->" + $empid.val());
    $.getJSON("http://localhost:8080/RestfulWS/restful/employee/" + $empid.val(), displayResult);

}

function displayResult(data) {
    alert("data" + data);

    $("#fname").val(data.firstName);
    $("#lname").val(data.lastName);
}​ 
```

和 HTML

```
<form id="form1">
    <h2>Employee Details</h2>
    <table>
        <tr>
            <td>Employee ID : </td>
            <td><input type="text" id="empid" size="10"/> <input type="button"  value="Get Details" onclick="getEmployeeDetails()" /> </td>
        </tr>
        <tr>
            <td>FirstName : </td>
            <td><input type="text" id="fname" readonly size="30"/></td>
        </tr>
        <tr>
            <td>LastName :  </td>
            <td><input type="text" id="lname" readonly size="30"/></td>
        </tr>        
    </table>
</form>​ 
```

我正在使用端口 19090 的 tomcat 上运行上述代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:59:24.070

好的，读[HTTP访问控制](https://developer.mozilla.org/en-US/docs/HTTP_access_control)，[跨域资源共享](http://www.w3.org/TR/cors/)

和

[如何确定原产地](http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules)

要将控制器配置为允许跨域请求，

[此链接将有所帮助](http://thelab.athome-training.com/tutoriel/ajax-cross-domain-on-jersey-restfull-webservices)

# javascript - 如果在 android 下的 iframe 中，Javascript PostBack 不起作用

> ID：12608474
> 
> 赞同：2
> 
> 时间：2012-09-26T18:52:53.487
> 
> 标签：javascript, android, asp.net, html, xss

几个月前我开发了 Asp.NET 网站。我将它托管在某个服务器上，并使用免费别名作为网站地址。Alias 使用显示网站内容的 iframe。示例：我的站点原始地址 mysite.myhost.address.com，别名地址类似于 mysite.alias.com，下面是包含我的原始站点的别名页面的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pl">
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" />
    <meta name="robots" content="all" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="keywords" content="" />
    <link rel="Shortcut icon" href="" />
    <style type="text/css">
        html { margin: 0px; padding: 0px; overflow: hidden; width: 100%; height: 100%; }
    body { margin: 0px; padding: 0px; overflow: hidden; width: 100%; height: 100%; }
</style>
</head>
<body>
<iframe style="position:absolute; top:0px; left:0px;" src="mysite.myhost.address.com" width="100%" height="100%" frameborder="0" scrolling="auto" name=""></iframe>

<noframes>
    <div style="text-align: center;">
      no frames
   </div>
</noframes>

</body>
</html> 
```

问题在于从 aspx 页面生成的链接（它们使用 javascript 触发回发） - 在 android 设备上，如果页面显示在 iframe 中，则任何此类链接都不起作用。如果我直接在 android 浏览器中访问我的原始网站地址，一切正常。有什么解决办法吗？显然我无法更改 iframe 页面的任何属性。我只能更改我原来的网站...

**编辑**

不起作用的 javascript 示例（这是从 asp:Link 控件生成的普通 javascript）如下所示：

```
javascript:__doPostBack('ctl00$MainContent$NewsList$ctl00$lnkProgramTitle','') 
```

链接如下所示：

```
<a id="MainContent_NewsList_ctl02_lnkMore" href="javascript:__doPostBack(&#39; ctl00$MainContent$NewsList$ctl02$lnkMore&#39;,&#39;&#39;)">More</a> 
```

# php - 有没有办法让 GET/POST 数据只可用一次并在刷新时清除？

> ID：12608476
> 
> 赞同：2
> 
> 时间：2012-09-26T18:52:57.323
> 
> 标签：php, html

有没有办法让 GET/Post 数据在第一次实例中只可用一次？我正在使用 GET 数据来检查评论是否成功，并执行一些操作并显示某些消息。但我不希望在刷新浏览器时重复这些操作。我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:55:01.530

不，但您可以向数据添加唯一令牌，如果令牌已被使用，则在服务器端拒绝它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:48:58.367

由于您使用的是**GET**请求，

一种检查请求 uri 的方法，例如

```
$is_new_request = true;

if(isset($_SESSION['req_uri']) && ($_SESSION['req_uri'] == $_SERVER['REQUEST_URI'])){
    $is_new_request = false;
    //handle your duplicate requests
    //better to redirect
}

if($is_new_request){
    $_SESSION['req_uri'] = $_SERVER['REQUEST_URI'];
    //Handle your first and unique requests
} 
```

对于**POST**请求

更好的解决方案是[发布/重定向/获取](http://en.wikipedia.org/wiki/Post/Redirect/Get)

# objective-c - Cocoa [self invalidateShadow] 在向左移动的框架上不起作用，但在向右移动时起作用？

> ID：12608479
> 
> 赞同：2
> 
> 时间：2012-09-26T18:53:06.853
> 
> 标签：objective-c, xcode, cocoa, nswindow

我的窗口类中有一个函数，可以在移动滚轮时移动其框架

```
-(void)scrollWheel:(NSEvent *)theEvent{
    switch (theEvent.phase) {

        // Whilst Scrolling
        case NSEventPhaseChanged:
            float newPos = [theEvent.window.contentView frame].origin.x + [theEvent scrollingDeltaX];
            [theEvent.window.contentView setFrame: NSMakeRect(newPos, 0, 600, 600];
            [self invalidateShadow];
            [self display];
            break;
    }
} 
```

这具有预期的效果，框架左右移动完美。有两种意外行为我似乎无法确定。

1.  窗口设置为 [window setHasShadow:YES]，我希望窗口是透明的，所以我最初将窗口设置为

    [窗口 setBackgroundColor:[NSColor colorWithCalibratedWhite:0.75 alpha:0.00]];

但是在这种情况下，没有框架的屏幕部分上的手势没有注册——一旦我把 alpha 调到

```
[window setBackgroundColor:[NSColor colorWithCalibratedWhite:0.75 alpha:0.05]]; 
```

它确实收到了输入。但是，如果选择了这些选项中的任何一个，setHasShadow 默认设置为边框而不是实际窗口 - 这是预期的行为吗？

1.  虽然向左移动时边框与框架一起重新绘制，但向右移动时却不跟随它！？+ vs - scrollingDeltaX 到底有什么不同？

希望有人可以提供一些见解。

# java - JDK 7 中的 JnlpDownloadServlet 在哪里？

> ID：12608481
> 
> 赞同：5
> 
> 时间：2012-09-26T18:53:14.860
> 
> 标签：java, jnlp, java-7

根据 Oracle 的在线文档，JnlpDownloadServlet 仍然是 Java 7 的一部分：http: [//docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/downloadservletguide.html](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/downloadservletguide.html)

但是我刚刚安装了 JDK 1.7.0，并且 jnlp-servlet.jar 和 jardiff.jar 都没有出现在我的 Java 家中的任何地方，至少在 Windows 上是这样。我对目录中的每个 jar 进行了搜索（使用出色的 ack 命令行实用程序），它们都不包含 JnlpDownloadServlet。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T19:17:35.643

从 Java 7 Update 2 开始，“Demos and Samples”被单独下载。

您可以找到此处列出的最新“演示和示例”的下载链接： [http](http://www.oracle.com/technetwork/java/javase/downloads/index.html)
://www.oracle.com/technetwork/java/javase/downloads/index.html （在页面上搜索“示例”）。

你会在其中找到 jnlp-servlet.jar 等：

jdk-7u6-windows-i586-demos.zip:/jdk1.7.0_06/sample/jnlp/servlet/jnlp-servlet.jar

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-03T03:51:57.077

奇怪的是，Mac 版本没有它。必须下载 windows 示例。为什么不同的平台应该在一次写入随处运行的平台上有不同的样本，这超出了我的理解。

# ektron - Ektron 搜索未返回结果

> ID：12608485
> 
> 赞同：0
> 
> 时间：2012-09-26T18:53:30.523
> 
> 标签：ektron

我正在尝试使用 Ektron CMS UI 查询符合条件的文档（导航到包含文档的文件夹并单击操作 -> 搜索）。没有得到任何标准的任何结果。当我浏览整个文件夹内容并确认它们存在于 CMS 中时，文档将被列出。SearchConfigUI 已成功执行，并且 Indexing Service 已启动并正在运行。关于为什么索引没有得到传播的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:09:54.933

如果您使用的是 8.0 版，则最近的 Microsoft 自动更新会影响 Microsoft Index Server，这是 8.0 版中用于索引和查询的搜索技术。看看这个线程： [http ://dev.ektron.com/forum.aspx?g=posts&t=40811](http://dev.ektron.com/forum.aspx?g=posts&t=40811)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:47:53.517

当您在操作搜索下使用基本搜索时，它使用搜索系统。当您改用高级搜索时，它使用数据库查询。这可能是一个解决方案。

有关索引搜索的故障排除，请参阅 [http://documentation.ektron.com/cms400/v802/WebHelp/Navigating/Search/search_troubleshooting.htm](http://documentation.ektron.com/cms400/v802/WebHelp/Navigating/Search/search_troubleshooting.htm)

# php - PHP测试远程MySQL服务器是否可用

> ID：12608489
> 
> 赞同：4
> 
> 时间：2012-09-26T18:53:53.580
> 
> 标签：php, mysql

我有一些使用 MySQL 的网站。我不是SQL专家，所以我使用简单的连接，查询等。有时（很少但发生）只有数据库服务器挂起，或者我忘记打开我家测试mysql。直到它再次运行，服务器挂起尝试连接，最后发生超时错误。

我正在尝试添加一些以前的数据库服务器测试，比如这个“ping”函数：

```
function pingDomain($domain){
    $starttime = microtime(true);
    $file = fsockopen ($domain, 80, $errno, $errstr, 10);
    $stoptime = microtime(true);
    $status = 0;

    if (!$file) {
        $status = -1; // Site is down
    } else {
        fclose($file);
        $status = ($stoptime - $starttime) * 1000;
        $status = floor($status);
    }

    return $status;
} 
```

但也没有工作，php仍然挂起。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:34:25.927

简单使用mysql_ping：

```
 <?php
            set_time_limit(0);

            $conn = mysql_connect('localhost', 'mysqluser', 'mypass');
            $db   = mysql_select_db('mydb');

            /* Assuming this query will take a long time */
            $result = mysql_query($sql);
            if (!$result) {
                echo 'Query #1 failed, exiting.';
                exit;
            }

            /* Make sure the connection is still alive, if not, try to reconnect */
            if (!mysql_ping($conn)) {
                echo 'Lost connection, exiting after query #1';
                exit;
            }
            mysql_free_result($result);

            /* So the connection is still alive, let's run another query */
            $result2 = mysql_query($sql2);
            ?> 
```

你可能想看看这个：

[mysql_ping](http://php.net/manual/en/function.mysql-ping.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T23:01:50.817

在任何地方都找不到有关 mySQL 服务器的可靠和简单测试的文档。我现在正在使用以下技术：

```
@$this->Base = mysqli_init();
@$this->Base->options(MYSQLI_OPT_CONNECT_TIMEOUT, 1);
@$this->Base->real_connect($host, $usuario, $senha, $bd); 
```

比您使用 $this->Base->connect_error 或 $this->Base->connect_errno 捕获错误，由于“@”符号，它不会被写入。

您也可以使用程序形式：

```
$Link = mysqli_init();
mysqli_options($Link, MYSQLI_OPT_CONNECT_TIMEOUT, 1);
$res = @mysqli_real_connect($host, $usuario, $senha, $bd);
if($res) {
    $E->echop("Connected!!!");
} else {
    $E->echop("Huston, we got a problem...");
} 
```

欢迎评论和其他答案！

# php - 如何在新变量名中使用变量？

> ID：12608493
> 
> 赞同：0
> 
> 时间：2012-09-26T18:54:17.877
> 
> 标签：php

我正在使用 while 循环，我需要能够将变量的值分配给新变量的名称。这是循环（$slide_number 总是返回一个数字）：

```
$slide_number = theme_get_setting('slides_number');
$count = '1';

while ($count <= $slide_number) {
  $slide_path = theme_get_setting('slide_path_'.$count.'');
    if (file_uri_scheme($slide_path) == 'public') {
      $slide_path = file_uri_target($slide_path);
    }  
  $count++;  
} 
```

假设 $slide_number 为 2。我需要生成 $slide_path_1 和 $slide_path_2，那么如何将 $count 变量添加到 $slide_path 以创建 $slide_path_1 和 $slide_path_2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:56:27.543

虽然我不推荐变量变量，但应该这样做：

```
$slide_path = "slide_path_" . $slide_count;
echo $$slide_path; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T18:57:06.193

参考：

```
${'slide_path' . $count} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:03:00.317

你正在尝试做的是非常糟糕的做法......使用数组来代替。查看数组的工作原理，您可以将所有值一起附加到一个列表中，然后您可以根据需要查看它们。考虑以下：

```
$slide_number = theme_get_setting('slides_number');
$count = '1';
$array_of_slides = array();

while ($count <= $slide_number) {
   $slide_path = theme_get_setting('slide_path_'.$count.'');
   if (file_uri_scheme($slide_path) == 'public') {

     $slide_path = file_uri_target($slide_path);

     // this line appends your value to the end of the array
     $array_of_slides[] = file_uri_target($slide_path);
   }  
   $count++;  
}

// this will print out the array so that you can see it
var_dump($array_of_slides); 
```

旁注：您尝试这样做的原因是这种不良做法是因为如果您声明了 40 亿个变量，您的程序肯定会崩溃，并且可能会导致您的操作系统崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:57:13.190

```
$count=1;
$var1='$slide_path_'.$count;
$$var1="here you go"; 
```

这将按名称创建一个变量`$slide_path_1`并为其分配“here you go”

[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T18:58:22.970

我很困惑。如果您只需要上一次循环运行的信息，请在循环末尾有一个变量来保存该信息。或者将所有这些加载到一个声明的数组中，然后在加载它之后用它做你想做的事情。

# eclipse - Eclipse IDE 3.6.2：重新启动并且 Tomcat 不再为项目服务..？

> ID：12608497
> 
> 赞同：1
> 
> 时间：2012-09-26T18:54:25.940
> 
> 标签：eclipse, tomcat, spring-mvc, restart

我不知道还有什么可以帮助诊断这个问题：

*   在 Windows 7 上运行，64 位（6GB RAM，Q720 笔记本电脑）
*   JDK 1.6、SpringMVC、...
*   周一（以及之前的几个月）一切都在运行和工作
*   今天（星期三）回来并关闭 Eclipse IDE 以暂时释放 RAM
*   启动 Eclipse，等到 CPU 周期下降并从我的服务器选项卡启动 Tomcat 7.0

结果：Tomcat 在 1.9 秒内而不是大约 20 秒内启动，跳过了看起来像任何应用程序加载的过程。没有错误，没有比平时更多的警告。我尝试刷新一个公共页面的浏览器选项卡并得到 404。

我已经尝试对项目进行干净的构建，将项目干净且完整地发布到服务器，然后将项目删除并重新添加到 Tomcat（都在 Eclipse 中），结果相同。

然后我尝试在浏览器中进入项目根目录，但出现错误：

```
org.apache.jasper.JasperException: /index.jsp (line: 3, column: 0) The absolute uri: http://www.springframework.org/tags cannot be resolved in either web.xml or the jar files deployed with this application 
```

我们几乎所有的 JSP 都包括：

```
<%@ taglib prefix="spring"  uri="http://www.springframework.org/tags" %>
<%@ taglib prefix="form"        uri="http://www.springframework.org/tags/form" %> 
```

但是突然间 springframework.org -> springsource.org 出现了 404 的标签和表单。但这不可能是 Tomcat 似乎不再尝试启动我的项目的原因……是吗？

Eclipse 重新启动后，Tomcat 中的应用程序日志文件永远不会被写入。

项目中唯一需要改变的是，我在重启 Eclipse 后加载了一个新版本的 on JAR，但是如果出现问题，日志会抛出相关的错误，对吧？

感谢您提供任何诊断或解决此问题的想法！

# flash - 是否可以在 Adob e Flash CS6 和 ActionScript 3.0 中制作 3D 游戏？

> ID：12608498
> 
> 赞同：-2
> 
> 时间：2012-09-26T18:54:30.013
> 
> 标签：flash, 3d, adobe, game-engine, 3dsmax

我想知道我是否可以在3DS Max等外部软件中制作模型，然后导入并在flash中使用。

我想制作一个游戏，其中有一个运动员在运动场上奔跑的 3D 动画。我如何才能制作该动画并在我的 Flash 游戏中使用它。

我认为这一定是可能的，因为有像[http://www.agame.com/game/street-sesh.html](http://www.agame.com/game/street-sesh.html) 这样使用 3d 图形的游戏。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:43:35.163

选择的答案**不正确**- 自 Flash player 11 以来，我们可以访问 Stage3D API，它允许在 Flash Player 中使用硬件加速的 3d 图形。George Profenza 对您的问题的评论为您指明了正确的方向（我发誓 Away3D！），没有使用过 Flare3D，但这真的取决于您想要什么 - 在语言成熟度、API 和开发人员方面，Director 也远远落后于 Flash/社区支持。一定要检查一下，但如果没有很多充分的理由，我不会选择它而不是 Flash！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:03:37.413

不幸的是，不可能将模型带入闪存并以您所说的容量使用它们。但是，您可以从 3DS Max 中渲染出一系列图像并将它们放入闪存中。

其他选项与模拟 3D 环境的 Papervision 3d 等应用程序一起使用。

编辑：您链接的游戏是在 Shockwave 播放器而不是 Flash 中运行的，这意味着它很可能是用 Adob​​e Director 之类的东西制作的。

# android - 返回应用程序时出现“错误膨胀类”

> ID：12608500
> 
> 赞同：2
> 
> 时间：2012-09-26T18:54:36.357
> 
> 标签：android

我的 android 应用程序中有一个显示信息的活动，其中包括网站的 URL 链接。我可以毫无问题地打开它，但是当我单击返回按钮时，我收到“不幸的是应用程序已停止工作”消息，并且 logcat 给了我这个：

> 09-25 23:21:58.847：E/AndroidRuntime(3534)：java.lang.RuntimeException：无法恢复活动 {com.example.salefinder/com.example.salefinder.Sale}：android.view.InflateException：二进制 XML文件第 118 行：膨胀类时出错

关于如何解决这个问题的任何想法？

编辑：

这是整个错误堆栈：

> 09-25 23:50:32.367：E/AndroidRuntime(3573)：致命异常：主要 09-25 23:50:32.367：E/AndroidRuntime(3573)：java.lang.RuntimeException：无法恢复活动 {com.example .salefinder/com.example.salefinder.Sale}：android.view.InflateException：二进制 XML 文件第 118 行：膨胀类 09-25 23:50:32.367 时出错：E/AndroidRuntime(3573)：在 android.app.ActivityThread .performResumeActivity(ActivityThread.java:2444) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2472) 09-25 23:50:32.367: E /AndroidRuntime(3573): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1173) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.os.Handler.dispatchMessage(Handler. java:99) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.os。Looper.loop(Looper.java:137) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.app.ActivityThread.main(ActivityThread.java:4424) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 java.lang.reflect.Method.invokeNative(Native Method) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 java.lang.reflect.Method.invoke(Method. java:511) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 dalvik.system.NativeStart.main （本机方法）09-25 23:50:32.367：E/AndroidRuntime(3573)：由：android.view.InflateException：二进制 XML 文件行 #118：膨胀类 09-25 23:50:32 时出错。367: E/AndroidRuntime(3573): 在 android.view.LayoutInflater.createView(LayoutInflater.java:606) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater .java:680) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:739) 09-25 23:50:32.367: E/AndroidRuntime(3573 ): 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:742) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:489) 09- 25 23:50:32.367: E/AndroidRuntime(3573): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:396) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.view。 LayoutInflater.inflate(LayoutInflater.java:352) 09-25 23:50:32.367: E/AndroidRuntime(3573):在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.app.Activity.setContentView(Activity.java: 1835) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 com.example.salefinder.Sale.saleCreate(Sale.java:71) 09-25 23:50:32.367: E/AndroidRuntime(3573) : 在 com.example.salefinder.Sale.onRestart(Sale.java:67) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.app.Instrumentation.callActivityOnRestart(Instrumentation.java:1143) 09 -25 23:50:32.367: E/AndroidRuntime(3573): 在 android.app.Activity.performRestart(Activity.java:4520) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.app .Activity.performResume(Activity.java:4531) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.app.ActivityThread。performResumeActivity(ActivityThread.java:2434) 09-25 23:50:32.367: E/AndroidRuntime(3573): ... 10 更多 09-25 23:50:32.367: E/AndroidRuntime(3573): 引起：java。 lang.reflect.InvocationTargetException 09-25 23:50:32.367: E/AndroidRuntime(3573): at java.lang.reflect.Constructor.constructNative(Native Method) 09-25 23:50:32.367: E/AndroidRuntime(3573) : 在 java.lang.reflect.Constructor.newInstance(Constructor.java:417) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 android.view.LayoutInflater.createView(LayoutInflater.java:586) 09 -25 23:50:32.367: E/AndroidRuntime(3573): ... 24 更多 09-25 23:50:32.367: E/AndroidRuntime(3573): 由: java.lang.IllegalStateException: 你只能在 MapActivity 09-25 23:50:32.367: E/AndroidRuntime(3573): at com.google.android.maps 中有一个 MapView。MapActivity.setupMapView(MapActivity.java:397) 09-25 23:50:32.367: E/AndroidRuntime(3573): at com.google.android.maps.MapView.(MapView.java:289) 09-25 23:50 :32.367: E/AndroidRuntime(3573): 在 com.google.android.maps.MapView.(MapView.java:264) 09-25 23:50:32.367: E/AndroidRuntime(3573): 在 com.google.android .maps.MapView.(MapView.java:247) 09-25 23:50:32.367: E/AndroidRuntime(3573): ... 27 更多

编辑 2：在第 71 行，我有

```
setContentView(R.layout.activity_sale); 
```

这是activity_sale.xml：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/kontejner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#1d7080"
        android:orientation="vertical" >

        <ImageView
            android:layout_width="fill_parent"
            android:layout_height="58dp"
            android:paddingBottom="5dp"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:paddingTop="5dp"
            android:src="@drawable/header" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="3dp"
            android:background="@color/border"
            android:orientation="horizontal" />

        <LinearLayout
            android:id="@+id/top"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/blue"
            android:weightSum="1" >

            <ImageView
                android:id="@+id/logo"
                android:layout_width="0dp"
                android:layout_height="58dp"
                android:layout_weight="0.25"
                android:paddingBottom="5dp"
                android:paddingLeft="10dp"
                android:paddingRight="10dp"
                android:paddingTop="5dp" />

            <LinearLayout
                android:id="@+id/basicData"
                android:layout_width="0dp"
                android:layout_height="58dp"
                android:layout_weight="0.6"
                android:orientation="vertical"
                android:paddingBottom="5dp"
                android:paddingLeft="10dp"
                android:paddingRight="10dp"
                android:paddingTop="5dp" >

                <TextView
                    android:id="@+id/company"
                    android:layout_width="fill_parent"
                    android:layout_height="20dp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/website"
                    android:layout_width="fill_parent"
                    android:layout_height="12dp"
                    android:autoLink="web"
                    android:textSize="10dp" />

                <TextView
                    android:id="@+id/dates"
                    android:layout_width="fill_parent"
                    android:layout_height="26dp" />
            </LinearLayout>

            <TextView
                android:id="@+id/percentage"
                android:layout_width="0dp"
                android:layout_height="58dp"
                android:layout_weight="0.15"
                android:gravity="center"
                android:textSize="20dp"
                android:textStyle="bold" />
        </LinearLayout>

        <TextView
            android:id="@+id/description"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/blue"
            android:paddingBottom="5dp"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:paddingTop="5dp" />

        <Button
            android:id="@+id/showAddress"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/border"
            android:textColor="@color/blue" />

        <LinearLayout
            android:id="@+id/address"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/blue"
            android:orientation="vertical"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:paddingTop="10dp" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="3dp"
            android:background="@color/border"
            android:orientation="horizontal" />

        <com.google.android.maps.MapView
            android:id="@+id/mapView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:apiKey="0z_x3fer_iyOOuWjZ77ZhMt5cYcKovSONgxLeSg"
            android:background="@color/blue"
            android:clickable="true" />
    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:23:35.267

您正在夸大包含 Activity onResume() 方法中的一些 XML 错误的布局。

发布该 XML，我们将尝试进行更好的调查。

# ios - iOS UIImageView中逐帧播放动画的问题

> ID：12608502
> 
> 赞同：1
> 
> 时间：2012-09-26T18:54:46.870
> 
> 标签：ios, frame, nstimer, uiviewanimation

我正在尝试在我的 iOS 应用程序中显示动画，但由于某些原因，我不想使用默认的 iOS UIAnimation，例如：

`ImageView.animationImages = arrayOfImages;`

`[ImageView startAnimating];`

我安排了一个计时器，它每 0.015 秒调用一次 AnimationTick 方法，这是该方法的实现：

```
-(void)animationTick{
if ( self.frameNumber > 0 && self.frameNumber < 19 )
{
    self.c2cAnimation = [[UIImageView alloc] initWithFrame:CGRectMake(20, 20, 700, 1000)];
    self.c2cAnimation.image = [UIImage imageNamed:[NSString stringWithFormat:@"L6_anim_%d.png",self.frameNumber]];
    if ( self.frameNumber == 1 )
    {
        [self.OverPlayPaper addSubview:self.c2cAnimation];
    }
    self.frameNumber = self.frameNumber + 1 ;
}} 
```

但是当我构建并运行该应用程序时，屏幕上绝对没有出现任何内容......

我做错了什么吗？有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:37:29.567

首先不要多次分配任何对象。

您必须`self.c2cAnimation = [[UIImageView alloc] initWithFrame:CGRectMake(20, 20, 700, 1000)];`在开始计时器之前编写。

其次，确保你有初始化`self.frameNumber = 1;`。如果你还没有初始化它，那么`self.frameNumber = 1;`在你开始定时器之前写。

第三，确保你有正确的启动计时器或使用这个......

```
[NSTimer scheduledTimerWithTimeInterval:0.015 target:self selector:@selector(animationTick) userInfo:nil repeats:YES]; 
```

你会得到你想要的输出

概括：：

```
//START TIMER:

    self.c2cAnimation = [[UIImageView alloc] initWithFrame:CGRectMake(20, 20, 700, 1000)];
    self.frameNumber = 1;
    [NSTimer scheduledTimerWithTimeInterval:0.015 target:self selector:@selector(animationTick) userInfo:nil repeats:YES]; 
```

然后写

```
//FUNCTION FOR ANIMATION:

-(void)animationTick
{
     if ( self.frameNumber > 0 && self.frameNumber < 19 )
     {
          self.c2cAnimation.image = [UIImage imageNamed:[NSString stringWithFormat:@"L6_anim_%d.png",self.frameNumber]];
          if ( self.frameNumber == 1 )
          {
               [self.OverPlayPaper addSubview:self.c2cAnimation];
          }
          self.frameNumber = self.frameNumber + 1 ;
     }
} 
```

# c - 将字符数组写入C中的文件

> ID：12608506
> 
> 赞同：-2
> 
> 时间：2012-09-26T18:54:55.893
> 
> 标签：c, pointers, file-io, char

此代码是否适合将字符数组（由 char 指针引用）写入文件？

```
const char* charBuf;

FILE *outputFile = fopen("output", "a");
fprintf(outputFile, "%s\n", *charBuf);
fclose(outputFile); 
```

假设`buf`指向某个字符数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:03:26.600

文件模式需要报价：

```
File *outputFile = fopen("output", "a"); 
```

`a`除非您使用该模式定义了 c 字符串。

假设您已将一些值存储到`charBuf`中，则必须使用 fprintf 中的字符串。`*charBuf`指该字符串中的第一个字符。

```
fprintf(outputFile, "%s\n", charBuf); 
```

您需要显示更多代码以获得更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:03:32.250

它很接近，但是您在 中缺少逗号`fprintf(...)`，并且您使用了某种`charBuf`未在任何地方声明的变量。

我猜你的意思是为这个问题写一个“简短的完整示例”，我赞赏你做了很多，除了它有助于实际测试你的例子，将问题集中在你感兴趣的部分，而不是让很多人指出错别字等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T22:42:44.227

您应该确保文件打开成功。

```
FILE *outputFile = fopen("output", "a"); 
```

应该跟一个错误检查：

```
#include <errno.h>
#include <string.h>
if ( FILE == NULL )
{
   printf("ERROR: could not open output\n");
   printf("the error was: %s\n",strerror(errno));
   return;
} 
```

# namespaces - 在命名空间模型中设置表名

> ID：12608509
> 
> 赞同：2
> 
> 时间：2012-09-26T18:55:00.423
> 
> 标签：namespaces, ruby-on-rails-3.2, testunit, legacy-database

我有一些命名空间模型，我正在尝试为它们覆盖默认的 rails 表名，因为我正在连接到现有的旧数据库。

我的模型是：

/app/models/licenses.rb

```
 module Licenses
    def self.table_name_prefix
      ''
    end
  end 
```

/app/models/licenses/employee.rb

```
class Licenses::Employee < ActiveRecord::Base
  establish_connection YAML::load(File.open("#{Rails.root}/config/licenses_database.yml"))[Rails.env]
  self.table_name = 'EMPLOYEE'
  self.primary_key = 'EMPLOYEE_ID'
end 
```

/app/models/licenses/inspection.rb

```
class Licenses::Inspection < ActiveRecord::Base
  establish_connection YAML::load(File.open("#{Rails.root}/config/licenses_database.yml"))[Rails.env]
  self.table_name = 'INSPECTION'
  self.primary_key = 'INSPECTION_ID'
end 
```

当我运行测试时，会生成错误

> PG::Error: 错误：关系“licenses_employees”不存在

从命名空间模型中删除前缀是否缺少一些东西？

更新：我尝试将许可证模块中的表名前缀设置为“testing_”而不是“”，但我仍然收到相同的错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:45:52.820

手头的问题似乎是我使用 rails 生成器为现有数据库创建命名空间模型。生成器已将夹具文件创建为命名空间的夹具，即`/test/fixtures/licenses/employees.yml`. 当我尝试运行测试时，Rails 会尝试根据夹具名称/路径将夹具插入表中。我只需要移动现有数据库的夹具文件并重命名它们以匹配我在模型中设置的表名，即`/test/fixtures/licenses/employee.yml`.

# android - 无法在未调用 Looper.prepare() 的线程内创建处理程序

> ID：12608514
> 
> 赞同：-2
> 
> 时间：2012-09-26T18:55:12.373
> 
> 标签：android, android-layout, layout

当触发新的快速操作时，我试图调用新的警报对话框。但是我收到错误“无法在未调用 Looper.prepare() 的线程内创建处理程序”。你能告诉我如何解决这个问题吗？

```
quickAction.setOnActionItemClickListener(new QuickAction.OnActionItemClickListener() {          
                public void onItemClick(QuickAction source, int pos, int actionId) {                
                    ActionItem actionItem = quickAction.getActionItem(pos);

                    //here we can filter which action item was clicked with pos or actionId parameter
                    if (actionId == ID_PASSC) {

                    } else if (actionId == ID_PASS) {
                         final Thread t = new Thread() {
                                @Override
                                public void run() {
                                    try {
                                        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                                        final View layout = inflater.inflate(R.layout.password_dialog, (ViewGroup) findViewById(R.id.root));
                                        final EditText password1 = (EditText) layout.findViewById(R.id.EditText_Pwd1);
                                        final EditText password2 = (EditText) layout.findViewById(R.id.EditText_Pwd2);
                                        AlertDialog.Builder builder = new AlertDialog.Builder(getApplicationContext());

                                        builder.setTitle("Change password");
                                        builder.setView(layout);
                                        builder.show(); 
                                    } finally {

                                    }
                                }
                            };
                            t.start();
                    } else if (actionId == ID_HELP){

                    }else{

                    }
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:01:32.673

你总是需要在 UI 线程上做 UI 操作。我不知道你为什么要创建一个新线程来创建一个对话框。删除创建新线程并同步显示对话框，如下所示。

```
} else if (actionId == ID_PASS) {

         LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);                                      final View layout = inflater.inflate(R.layout.password_dialog, (ViewGroup) findViewById(R.id.root));
         final EditText password1 = (EditText) layout.findViewById(R.id.EditText_Pwd1);
         final EditText password2 = (EditText) layout.findViewById(R.id.EditText_Pwd2);
         AlertDialog.Builder builder = new AlertDialog.Builder([ActivityName].this);
         builder.setTitle("Change password");
         builder.setView(layout);
         builder.show(); 
   } 
```

# uml - UML 状态机：具有转换、触发器和事件的状态的类图

> ID：12608516
> 
> 赞同：2
> 
> 时间：2012-09-26T18:55:16.620
> 
> 标签：uml, transitions, class-diagram, object-diagram

TL;DR：我应该如何在 UML 对象图中表示 UML 转换（见下一行）？

> 事件(event_parameters) [guard_condition] / doStuff()

在我的 BSc 论文项目中，我正在使用 UML StateMachines（行为，无协议 SM）。除了状态机图表示之外，我还需要对象图。

然而，到目前为止，我还没有设法准确地表示转换。我希望能够显示具有触发器（事件）、守卫（约束）和/或行为的转换。

我已经搜索了相关问题（[这个](https://stackoverflow.com/questions/51464/how-do-you-show-events-in-uml-class-diagrams)问题很接近，但没有提供我正在寻找的确切信息），并阅读了 UML 上层结构的相关部分，但仍然无法弄清楚。

到目前为止，我已经根据下面状态机图中显示的状态 S1（和所有转换）创建了一个对象图。我应该注意我只添加了事件，因为警卫和行为给我带来了类似的问题（并且会使图表混乱）。

包含状态 S1 的状态机图

![包含状态 S1 的状态机图](../Images/2cac67f3ce113241e151cb58c5f964a2.png)

（不正确）S1 的对象图，包括所有转换（我假设至少 SignalEvent 实例（有些）不正确。）

![（不正确）S1 的对象图，包括所有转换（我假设至少 SignalEvent 实例（有些）不正确。）](../Images/a6becb80da0c2172b859f0b8be9fefab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:29:51.583

状态机显示系统如何对刺激做出反应，而对象图则表示系统在某个时间点的特定状态。由于对象图是静态的，因此您无法在其中表示状态机转换。您可以做的是创建两个对象图，并告诉第二个图是将指定的状态转换应用于第一个图的结果。但我认为没有正式的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:32:01.150

UML2 元模型相当复杂。如果你想让它符合 UML2，我建议如下： 使用带有 org.eclipse.uml 元模型的工具，它能够绘制状态图。一个开源的将是[Topcased](http://www.topcased.org/)。可以在[此处](http://wiki.eclipse.org/MDT-UML2-Tool-Compatibility)找到完整列表（但并非所有列表都支持状态图）。

绘制图表后，将其保存为 .uml 文件。该文件包含 XMI，并且非常易于阅读。如果您使用 EMF 查看器（安装在 Topcased 中）打开它会更容易一些，只需在其中使用“打开方式”）。

如果您不关心 UML2 合规性并且只想要类似于您上面的图表的东西，那么这个解决方案将导致比必要的更复杂的对象图表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-16T12:20:46.533

当前的 UML 规范（参见[https://www.omg.org/spec/UML/](https://www.omg.org/spec/UML/)）有答案。它有一个描述状态机抽象语法的图表。结合触发器的抽象语法，规范提供了足够的信息来创建对象图。

# ruby-on-rails - 多个 has_man 通过关系

> ID：12608518
> 
> 赞同：1
> 
> 时间：2012-09-26T18:55:27.403
> 
> 标签：ruby-on-rails, ruby, has-many-through, named-scope, nested-includes

我正在建立一个协作写作平台。用户可以拥有项目集，其中任何项目都可以在任何集中并属于任何用户。但这会导致一些问题。

这些是我的模型关系：

```
class Association < ActiveRecord::Base
  belongs_to :user
  belongs_to :set
  belongs_to :item
end  

class Set < ActiveRecord::Base
  has_many :associations
  has_many :users, through: :associations
  has_many :items, through: :associations 
end

class Item < ActiveRecord::Base
  has_many :associations
  has_many :users, through: :associations
  has_many :sets, through: :associations 
end 
```

我无法弄清楚正确处理此问题的“导轨方式”。

**问题1：**

创建新项目时，仅存储集合/项目关联，而不存储用户：

```
class ItemsController < ApplicationController
  def create
    @set = current_user.sets.find(params[:set_id])
    @set.where(title: params[:item][:title]).first_or_create!
  end
end 
```

****更新****

要解决问题 1，我能想到的最好办法是执行以下操作：

```
@set  = current_user.sets.find(params[:set_id])
@item = Item.where(name: params[:item][:title]).first_or_create!
Association.where(item_id: @item.id, set_id: @set.id, user_id: current_user.id).first_or_create! 
```

不过感觉很不对劲！

**问题2：**

假设从问题 1 中正确填充了关联表，以下控制器将返回该集合拥有的所有项目，但忽略用户所有权：

```
class SetsController < ApplicationController
  def index
    @sets = current_user.sets.includes(:items)
  end
end 
```

****更新****

仍然没有运气找到答案。为了更好地解释这个问题：

以下将仅返回属于当前用户的集合

```
@sets = current_user.sets.all 
```

但是，以下将仅返回用户的集合，但将包括集合的所有项目，即使它们不属于当前用户。换句话说，用户范围被删除了。

```
@sets = current_user.sets.includes(:items) 
```

我整天都在尝试解决这个问题，但似乎找不到线索

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:34:40.440

你是这个意思吗？一个用户可以拥有许多项目。一个用户可以有多个集合。

一个项目可以属于多个用户。一个项目可以属于多个集合。

如果是这种情况，您需要多个连接模型。

```
Class UserItemAssociation < ActiveRecord::Base
  belongs_to :user
  belongs_to :item
end

Class SetItemAssociation < ActiveRecord::Base
  belongs_to :set
  belongs_to :item
end

Class Item < ActiveRecord::Base
  has_many :user_item_associations
  has_many :users, through: :user_item_associations

  has_many :set_item_associations
  has_many :sets, through :set_item_associations
end

Class Set < ActiveRecord::Base
  belongs_to :user
end 
```

在控制器中：

```
@set = current_user.sets.find_or_create_by(params[:set_id])
@item = @set.items.where(title: params[:item][:title]).first_or_create!
current_user.items << @item 
```

但是，这里有另一种看待它的方式。

在用户模型中，添加此方法。

```
 def items
    self.sets.collect{|set| set.items}.flatten
  end 
```

这样，您只需要关联模型将用户加入集合，但您现在仍然可以访问 user.items。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:18:26.450

您的第一个问题是确保您的实例变量是相同的。一个是大写的。应该是这样的：

```
class ItemsController < ApplicationController
  def create
    @set = current_user.sets.find(params[:set_id])
    @set.where(title: params[:item][:title]).first_or_create!
  end
end 
```

# android - android如何在按下按钮时去以前访问过的活动

> ID：12608522
> 
> 赞同：0
> 
> 时间：2012-09-26T18:56:00.013
> 
> 标签：android

在像以前的活动一样进行之后如何进行以前的活动假设我去活动1->活动2活动2->活动3活动3->活动1那么工作怎么样？当我按下按钮 hwo 是回到活动 1 吗？我使用它，但它不起作用告诉我如何去以前访问过的活动？

```
 Intent intent = new Intent(Activity4.this, Activity1.class);

startActivity(intent);

   i also use this code is not work for me
  Intent i = getIntent();
    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(i);

   //finish();    finish just previous acitivity is not work for me 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:12:22.893

将 android:launchMode="singleTask" 属性添加到您的 AndroidManifest.xml 文件中：

```
    活动 android:name=".Activity1" android:launchMode="singleTask"

```

这个非常重要。如果您不添加该属性，您的活动将始终在每个意图上重新创建，并且其状态将重新初始化。这就是您收到错误消息并且您的应用程序崩溃的原因。

然后使用以下代码：

```
    意图 i = new Intent(Activity3.this, Activity1.class);
    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    开始活动（一）；

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:18:05.560

实际上，实现看起来是这样的：

```
Intent intent = new Intent(Activity3.this, Activity1.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

这将杀死所有`Activities`以上`Activity1`并将您扔回它。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:57:29.877

您可以将清单上的 true 设置为活动 2 上的 noHistory。不需要额外的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-18T05:57:04.050

谢谢它正在工作

```
 Intent i = new Intent(Activity3.this, Activity1.class);
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

# r - 从 Drupal 视图表中抓取 R 网页

> ID：12608529
> 
> 赞同：1
> 
> 时间：2012-09-26T18:56:34.010
> 
> 标签：r, drupal, web-scraping

其他网络抓取解决方案似乎都不适用于我从 Drupal 视图生成的表中抓取数据的任务。虽然显示的页面源肯定有一个显示当前代码的表，但我尝试使用的只是返回一个空表，而不是 15 行显示的表格信息的列表。

我显然做错了什么，并且是 R 编码技能中级的新手。任何帮助将不胜感激！

我的 R 代码：

```
library("RCurl")
library("XML")
projects <- getURL("http://www.mysite.com/projects", userpwd ="username:password")

# parse the document for R representation:
projects.doc <- htmlParse(projects)

# get  the table
projects.tabs <- readHTMLTable(projects.doc, stringsAsFactors = FALSE) 
```

# perl - Perl - 格式化输出数据

> ID：12608532
> 
> 赞同：1
> 
> 时间：2012-09-26T18:56:54.380
> 
> 标签：perl, formatting

我有以下格式的数据输出。我从控制台上的命令得到这个输出。

```
Number: 9
state: Online
Data:             W1F-9YN
Device: 41
Number: 10
state: Online
Inquiry Data:             W1-9YN                   
Device: 41
Number: 11
state: Online
Inquiry Data:             W1-9YN                   
Device: N/A
Number: 42
state: Online
Data:      WD-W WDZ-04J 
```

     但是，现在我想将其更改为以表格格式输出。如下图所示

```
Device   number  state    data
41        10     online   WY1-996
42        12     offline  WY2-996
.          .       .        .
.          .       .        .
.          .       .        . 
```

我尝试使用下面给出的代码，但我无法以正确的格式排列，有时所有数据都显示在一个列中。谁能帮帮我？

```
open WDLIST, "Command";

while (<WDLIST>) {

    if (m/Device\s*:\s*(\d+)/) {

        $enDevice = $1;
        print "$enDevice";
    }

    if (m/Number\s*:\s*(\d+)/) {

        $umber = $1;
        print "$Number";
        chomp;
    }

    if (m/state\s*:\s*(w+)/) {

        $State = $1;
        print"$State";
    }

    if (m/Data\s*:\s*(w+)(d+)(\-)(\s)/) {

        $Data = $1;
        print"$Data";
    }
} 
```

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:11:49.810

您可以使用 printf 来格式化输出。最简单的解决方案是将所有打印语句替换为

```
printf "%-10s", $variable; 
```

这将在 10 个字符宽的列中打印左对齐的变量。此外，您需要在每个数据块的开头或结尾打印一个换行符。

对于更完整的解决方案，我会在一行的哈希中收集所有数据，并在检测到数据块结束时打印它：

```
printf "%-10s %-10s %-10s %-10s\n", $info{device}, $info{number}, $info{state}, $info{data}; 
```

（或使用散列片来减少冗长的代码）

基于每个`Device`字段表示新设备开始的假设。我会将您的代码更改为这样工作：

```
open WDLIST, "Command";

my %device;

printf "%-10s %-10s %-10s %-10s\n", qw(Device number state data);
while (<WDLIST>) {
    if (m/Device\s*:\s*(\d+)/) {

        # Print previous device, if any.
        printf "%-10s %-10s %-10s %-10s\n", @data{ qw(id number state data) }
            if exists $device{id};

        # Reset the current device and set the id
        %device = ( id => $1 );
    }

    if (m/Number\s*:\s*(\d+)/) {
        $device{number} = $1;
    }

    if (m/state\s*:\s*(w+)/) {
        $device{state} = $1;
    }

    if (m/Data\s*:\s*(w+d+-\d+)/) {
        $device{data} = $1;
    }
}
# Print the last device (if any)
printf "%-10s %-10s %-10s %-10s\n", @data{ qw(id number state data) }
    if exists $device{id}; 
```

（我有点不确定 Data 的最后一个正则表达式`field`应该是什么。您的示例不一致。至少您需要解释示例输入的数据字段与示例输出之间的关系）

# android - 使用监听器从线程访问活动

> ID：12608544
> 
> 赞同：0
> 
> 时间：2012-09-26T18:57:37.393
> 
> 标签：android, android-view, android-handler

我有两个类：一个控制多个小部件的活动类，然后是一个实现线程的自定义 SurfaceView 类。（很常见）。我在 SurfaceView 类中实现了一个简单的自定义侦听器，只要我想在 Activity 类的各种小部件中更新线程中的某些值更改，我就可以触发该侦听器。

```
public class MyActivity extends Activity{

    CustomView myThreadView = (CustomView)findViewById(...);

    myThreadView.setListener(new OnStatChangeListener(){
        public void onChange(int change){
            //Change various widgets based on value fed in.
        }
    });

    // All of the other things (View setups, listeners, onCreate, etc.)
} 
```

线程类：

```
public class CustomView extends SurfaceView implements Runnable(){
    //.. The usual thread and View stuff.

    public sListener;

    public interface OnStatChangeListener {
        public onChange(int change);
    }

    public void setListener(OnStatChangeListener oscl){
        sListener = oscl;
    }

    public void externalAccessMethod(){
        // Some thing changes a stat that is reflected in the Activity's widgets.
        sListener.onChange(value);
    }

    public void methodRunByThread(){
        // Something else changes that I want to update.
        sListener.onChange(value);
    }

    // Everything else (not relevant).
} 
```

每当我从 Activity 的类调用的方法中调用 onChange 时，它​​都可以正常工作。但是，每当线程本身更新它的状态（在我的例子中是一个重绘方法）并且我调用 onChange 方法时，我都会得到一个 CalledFromWrongThread 异常。有人可以解释为什么一个有效而另一个无效，以及从单独的线程实际实现小部件更新的最佳实践是什么？Activity 中的单独处理程序线程似乎没有必要，因为无论如何我都知道何时更新值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:03:20.050

因为您只能从 UI 线程访问视图。每个应用程序有一个 UI 线程。现在您从另一个不正确的线程访问视图并导致异常。

你可以这样做：

在你的 Activity 的 onChange 中，将所有内容都包装在 runOnUiThread

或更好：

使用处理程序而不是您自己的听众（需要一些学习但要付费）

# paypal - PayPal IPN 信用卡号

> ID：12608545
> 
> 赞同：0
> 
> 时间：2012-09-26T18:57:38.687
> 
> 标签：paypal

我正在尝试在 StreamingVideoProvider.co.uk 上设置一个帐户并设置按次付费。他们要求连接我的贝宝的 ipn。

他们是否可以访问我们客户的敏感信息，例如信用卡号，或者贝宝会对其进行编码？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:01:59.823

信用卡号码永远不会通过 IPN 返回。尽管取决于您的帐户配置，它*可以*返回帐单地址或其他 PII 数据，例如名字/姓氏、电子邮件地址和送货地址。

话说回来; 如果他们要求您在他们的软件中指定您自己的 IPN URL，那么不，他们无法拦截它。
如果他们在其域上提供 IPN URL，那么是的，他们可以看到我上面提到的数据。
您需要确保他们以安全的方式处理这些数据。

# c++ - 是否可以从新的 int[] 中一次删除一项

> ID：12608547
> 
> 赞同：2
> 
> 时间：2012-09-26T18:57:49.477
> 
> 标签：c++, arrays, new-operator, delete-operator

```
int *ptr_Array;
ptr_Array = new int[5]; 
```

是否可以删除数组中的最后一个元素？我可以一次推一个整数。我可以删除整个数组。

```
delete []ptr_Array;
ptr_Array = NULL; 
```

我找不到弹出元素的方法。

我尝试了以下和其他尝试。

```
ptr_Array[i_IastItem] = NULL; 
```

我只是想不通，我一直在尝试一整天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:59:03.507

您可以使用 a`std::vector`代替。

```
std::vector<int> x;
x.push_back(42);
x.pop_back(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T19:07:47.697

如果您需要将数组的大小调整为大于或小于您已分配的大小，则必须重新分配它。没有太多选择：

1.  `malloc()`您可以使用、`realloc()`和来创建、调整大小和销毁数组`free()`。

2.  您创建数组`new[]`并填充它，然后创建另一个新大小的数组`new[]`并相应地填充它，最后`delete[]`是旧数组。

那么你当然可以使用`std::vector`，但你已经说过你不想这样做。

操作系统一次分配内存块。如果您需要更多内存，则不能保证相邻的内存位置可供使用，因此您必须重新分配整个东西+额外的空间。通常也不支持取消分配阵列的一部分。我不知道具体原因，但我认为这很可能是因为如果每个程序都可以分配比它需要的更多的内存，然后释放内存，那么它可能会变得更加困难。这里和那里。你最终会把你的记忆碎片化。释放的内存可能不会对其他程序有用，因为您正在零碎地释放内存——您不能将程序、数组或其他任何东西放在那个小洞里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:42:06.167

仅删除最后一个元素的简单代码：

```
int size = /* insert size of array here */;
int new_ptr* = new int[size-1];
int i;
for (i = 0; i < size-1; ++i) {
    new_ptr[i] = ptr_Array[i];
}
delete[] ptr_Array;
ptr_Array = new_ptr; 
```

在那里，你想要的已经完成了。现在`ptr_Array`是一个以相同顺序包含相同值的数组，除了最后一个元素被弹出并且数组的大小比以前少 1。

但老实说，我同意其他回答者的观点，并认为你应该`std::vector`在 C++ 中使用。数组可能会让人头疼，尤其是因为您总是需要在另一个变量中跟踪它的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:59:16.090

如果您想在任何地方随意弹出和推送项目，请阅读有关 std::vector 类的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T18:59:49.617

数组不能有任何东西被推入或弹出。C++ 中的数组具有固定的大小，虽然您可以给它们一种具有 push/pop 运算符的错觉，但数组本身没有这些。

# javascript - iOS 6 - Safari - 选择元素的 onchange 行为异常（更改 selectedIndex）

> ID：12608549
> 
> 赞同：4
> 
> 时间：2012-09-26T18:57:52.477
> 
> 标签：javascript, safari, mobile-safari, dom-events

这里是：

```
<select id="test" onchange="alert(this.selectedIndex); this.selectedIndex = 0">
    <option>test1</option>
    <option>test2</option>
    <option>test3</option>
</select> 
```

在所有浏览器中都可以正常工作。它在 iOS5 上运行良好。它在 iOS6 中不起作用。它确实显示了警报屏幕，但似乎忽略了重置索引的第二部分。奇怪的是，将 onchange 更改为 onblur 使其可以在 iOS6 Safari 上运行，但会破坏所有其他浏览器。

那么，这是iOS错误还是什么？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:42:13.027

添加一个`onblur`带有 iOS6 用户代理过滤器的过滤器，并在其中设置选定的索引。我确信有比这更好的方法，但它对我有用（这里有一些 jQuery）：

```
<select id="test" onchange="alert(this.selectedIndex); this.selectedIndex = 0" onblur="FixSelecteOniOS6(this);">
    <option>test1</option>
    <option>test2</option>
    <option>test3</option>
</select>
<script>
    FixSelectOniOS6: function (ref){
        alert(ref.selectedIndex)
        var res = navigator.userAgent.match(/; CPU.*OS (\d_\d)/);
        if (res) {
            var strVer = res[res.length - 1];
            strVer = strVer.replace("_", ".");
            version = strVer * 1;
        }
        var i = 0,
        iOS = false,
        iDevice = ['iPad', 'iPhone', 'iPod'];

        for (; i < iDevice.length; i++) {
            if (navigator.platform === iDevice[i]) { iOS = true; break; }
        }
        if (navigator.platform.indexOf("iPad") != -1 && version == 6) {
            $(ref).find("option").removeAttr("selected");
            $(ref).find("option:first").attr("selected", "selected");
        }
    }
</script> 
```

# java - 从单元格值获取单元格索引，Apache POI

> ID：12608551
> 
> 赞同：9
> 
> 时间：2012-09-26T18:58:05.497
> 
> 标签：java, excel, apache-poi

```
Environment    Status    Version    PatchNumber
Windows        Live      1.0        2
Unix           Live      2.0        4
Mac            Live      1.3        8 
```

如果我在 excel 中有上面显示的数据，如何使用文本访问 PatchNumber 的 cellNumber

`XSSFRow row = (XSSFRow) rows.next();`
我想访问`row.getCellNumber("PatchNumber");`//注意这个方法在 Apache POI 中不存在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T21:15:56.897

我想我明白你在追求什么——你想知道哪一列的第一行包含“补丁”这个词？如果是这样，您需要做的就是：

```
Sheet s = wb.getSheetAt(0);
Row r = s.getRow(0);

int patchColumn = -1;
for (int cn=0; cn<r.getLastCellNum(); cn++) {
   Cell c = r.getCell(cn);
   if (c == null || c.getCellType() == Cell.CELL_TYPE_BLANK) {
       // Can't be this cell - it's empty
       continue;
   }
   if (c.getCellType() == Cell.CELL_TYPE_STRING) {
      String text = c.getStringCellValue();
      if ("Patch".equals(text)) {
         patchColumn = cn;
         break;
      }
   }
}
if (patchColumn == -1) {
   throw new Exception("None of the cells in the first row were Patch");
} 
```

只需遍历第一行（标题）中的单元格，检查它们的值，并在找到文本时记下您所在的列！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T19:13:31.320

这不是你想要的吗？

```
row.getCell(3) 
```

> public XSSFCell getCell(int cellnum) 返回给定（基于 0）索引处的单元格，以及来自父工作簿的 Row.MissingCellPolicy。

如果您想完全按名称访问 - “PatchNumber”，您可以读取标题行并保存 PatchNumber 的索引。我认为表模型只定义了对单元格的访问，但不提供按列名的关联访问。我认为模型中的所有行都是平等的:-)

获取列索引。我会遍历标题行并建立一个列名列表，`columns`然后你可以使用`columns.indexOf("PatchNumber")`

[http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFRow.html#getCell(int](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFRow.html#getCell(int) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T09:37:16.793

```
public CellAddress searchStringInXslx(String string) throws IOException{
            FileInputStream inputStream = new FileInputStream("Books.xlsx");
            Workbook workbook = new XSSFWorkbook(inputStream);
            Sheet firstSheet = workbook.getSheetAt(0);
            Iterator<Row> iterator = firstSheet.iterator();
            CellAddress columnNumber=null;

            while(iterator.hasNext()){
                 Row nextRow = iterator.next();
                 Iterator<Cell> cellIterator = nextRow.cellIterator();
                 while (cellIterator.hasNext()) {
                     Cell cell = cellIterator.next();
                     if(cell.getCellType()==Cell.CELL_TYPE_STRING){ 
                         String text = cell.getStringCellValue();
                          if (string.equals(text)) {
                             columnNumber=cell.getAddress();
                             break;
                          }
                        }
                     }
            }
            workbook.close();
            return columnNumber;
     } 
```

# php - Wordpress 从另一个数据库获取最新帖子

> ID：12608554
> 
> 赞同：1
> 
> 时间：2012-09-26T18:58:18.587
> 
> 标签：php, mysql, database, wordpress, content-management-system

我试图将另一个 Wordpress DB 的最新帖子放在我的 footer.php 文件中，但显然我不理解这个概念。我是 WP 和“循环”的新手，所以任何帮助都将不胜感激！

```
<!-- .entry-content -->
<?php
$originaldb = new wpdb('db_name', 'db_password', 'db_user', 'localhost'); //This has been replaced obviously.
$newestPost = $originaldb->query("SELECT * FROM wp_posts WHERE post_status = 'publish' ORDER BY post_date DESC LIMIT 0,1;");
$newestPost = mysql_fetch_array($newestPost);
        if ($newestPost) {
        foreach ($newestPost as $newPost) {
        ?>
            <header class="entry-header">
                <div class="entry-meta">
                    <?php echo '<span class="entry-day">'.get_the_date('j').'</span><br><span class="entry-month">'.get_the_date('M').'</span>'; ?>
                </div>
                <div class="title-box">
                    <h2 class="blog-title"><a href="<?php //the_permalink(); ?>"><?php the_title(); ?></a></h2>
                    <?php echo '<a href="'.get_author_posts_url( get_the_author_meta( 'ID' ) ).'">'.get_the_author().'</a>'; ?>
                </div>
                <div class="clear"></div>
            </header>
            <div class="entry-content">
                <?php the_excerpt(); ?>
            </div>
        <?php } //end foreach ?>
    <?php } //endif ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-16T10:41:47.223

下面的代码将给出最后的帖子记录。

```
<?php
$mydb = new wpdb('root','pass','dbname','localhost');
$lastpost = $mydb->get_results("SELECT wp_posts.* FROM wp_posts 
WHERE 1=1 
AND wp_posts.post_type = 'post' 
AND (wp_posts.post_status = 'publish')
ORDER BY wp_posts.post_date DESC LIMIT 0,1");

echo $lastpost[0]->post_title;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:24:59.027

如果我了解您要做什么...首先，您不需要 foreach 循环，因为您只打算使用一个结果行。其次，为什么不直接访问 $newestPost 的值作为关联数组呢？看看我在哪里添加了“$newestPost['theTitle']”来替换“the_title()”，我也为作者和内容做了类似的事情。

```
if ($newestPost)  {
       ?>
        <header class="entry-header">
            <div class="entry-meta">
                <?php echo '<span class="entry-day">'.get_the_date('j').'</span><br><span class="entry-month">'.get_the_date('M').'</span>'; ?>
            </div>
            <div class="title-box">
                <h2 class="blog-title"><a href="<?php //the_permalink(); ?>"><?php $newestPost['theTitle']; ?></a></h2>
                <?php echo '<a href="'.get_author_posts_url( get_the_author_meta( 'ID' ) ).'">'.$newestPost['theAuthor']).'</a>'; ?>
            </div>
            <div class="clear"></div>
        </header>
        <div class="entry-content">
            <?php echo $newestPost['theContent']; ?>
        </div>

    <?php
    } //endif ?> 
```

您需要将“theTitle”等替换为您的数据库架构中的任何内容。希望有所帮助，我对 WP 并不感兴趣，所以我可能会遗漏一些重要的东西，但这似乎普遍适用。

编辑：看起来[不再推荐](http://php.net/manual/en/function.mysql-fetch-array.php)使用 mysql_fetch_array 。

# javascript - jquery插件出错

> ID：12608555
> 
> 赞同：0
> 
> 时间：2012-09-26T18:58:20.200
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我用 jquery 为菜单编写了这个插件这个插件在 Chrome 中成功工作，但在 IE 或其他浏览器中不能正常工作......错误有这个：当我点击菜单时，菜单打开但是当悬停子菜单子菜单时不打开这个除 Chrome 外的所有浏览器都有错误...在 chrome 中，此菜单正常工作 悬停时打开子菜单

```
$(function () {
    $.fn.extend({
        hMenu: function (options) {

            var settings = {
                menuItem: '',
                subMenuSelector: 'div.sub-menu',
                subSubMenuSelector: 'div.sub-menu ul li',
                opp: 'a.outdoor',
                closeDuration: 150,
                openDuration: 350
            };
            var style = {
                "display": "block",
                clear: "both"
            }

            if (options != null) {
                $.extend(settings, options);
            }
            var _base = $(this);
            var _id = "";
            init();

            function init() {
                if (settings.menuItem == '' || settings.subMenuItem == '') { return; }
                $(settings.menuItem, _base).each(function () {
                    if ($(settings.subMenuSelector, $(this).parent()).length > 0) {
                        $(this).click(function () {
                            $(settings.subMenuSelector + ':visible', _base).fadeOut(settings.closeDuration);
                            if ($(settings.subMenuSelector, $(this).parent()).is(':visible')) {
                                $(settings.subMenuSelector, $(this).parent()).slideUp(settings.closeDuration);
                                $('html').unbind('click');
                            }
                            else {
                                //Show My Sub menu
                                $(settings.subMenuSelector, $(this).parent()).fadeIn(settings.openDuration);

                                $(settings.subMenuSelector, $(this).parent()).click(function () {
                                    cancelEvent();
                                });

                                // And Do not anything else !!!!!! (cancel event !)
                                cancelEvent();
                                //                                $(settings.subSubMenuSelector).click(function () {
                                //                                    $(settings.subMenuSelector).animate({ width: "700px", height: "700px" });
                                //                                   
                                //                                })
                                if (settings.subSubMenuSelector == "") { return; }
                                //                                $(settings.subSubMenuSelector).mouseover(function () { 
                                //                                      $(this).css("color","red"); 
                                //                                    }); 
                                $(settings.subSubMenuSelector).hover(function () {
                                    var id = $(this).attr("id");
                                    _id = id;
                                    $("a." + id + "").show(function () {
                                        $('a.' + id + '').css('display', 'block');
                                    }); //show callback
                                    //alert(id);

                                }, function () {
                                    $('a.' + _id + '').hide('slow');
                                }); //subsubmenuselector.hover
                                //If user clicke on html , close current sub-menu
                                $('html').bind('click', function () {
                                    $(settings.subMenuSelector, $(this).parent()).fadeOut(settings.closeDuration);
                                });
                            }
                        });
                    }
                });
            }
            function cancelEvent() {
                if (event && event.stopPropagation) {
                    event.stopPropagation();
                }
                else if (e && e.preventDefault) {
                    e.preventDefault(); // DOM style
                }
                else { // IE hack
                    window.event.cancelBubble = true;
                }
            }
        } //function
    }); //plugin definition
}); 
```

# grails - 无法为 Grails 创建加密的 H2 数据库

> ID：12608565
> 
> 赞同：2
> 
> 时间：2012-09-26T18:58:50.957
> 
> 标签：grails, encryption, passwords, h2

我有一个 grails 项目，我需要在其中创建一个加密的 H2 数据库，但我不确定如何使它工作。这是我在 DataSource.groovy 中的内容：

```
dataSource {
    pooled = true
    driverClassName = "org.h2.Driver"
    dialect = "org.hibernate.dialect.H2Dialect"
    dbCreate = "update" // one of 'create', 'create-drop','update'
    url = "jdbc:h2:/opt/viewpoint/data/h2/viewpoint;MODE=MYSQL;CIPHER=AES"
    user = "sa"
    pwds = "filepwd password"
} 
```

当我运行它时，我得到以下信息：

```
Caused by: org.h2.jdbc.JdbcSQLException: Wrong password format, must be: file password <space> user password [90050-117]
    at org.h2.message.Message.getSQLException(Message.java:105)
    at org.h2.message.Message.getSQLException(Message.java:116)
    at org.h2.message.Message.getSQLException(Message.java:75)
    at org.h2.message.Message.getSQLException(Message.java:151)
    at org.h2.engine.ConnectionInfo.convertPasswords(ConnectionInfo.java:264)
    at org.h2.engine.ConnectionInfo.<init>(ConnectionInfo.java:72)
    at org.h2.jdbc.JdbcConnection.<init>(JdbcConnection.java:94)
    at org.h2.Driver.connect(Driver.java:58)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:154)
    at $Proxy46.getMetaData(Unknown Source)
    ... 23 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T21:15:48.970

我不确定您从哪里获得数据源配置示例，但您需要使用`username`and`password`而不是`user`and `pwds`：

```
dataSource {
  pooled = true
  // ...
  username = "sa"
  password = "filepwd password"
} 
```

# java - 静态数据的短期与长期

> ID：12608566
> 
> 赞同：1
> 
> 时间：2012-09-26T18:58:58.120
> 
> 标签：java, garbage-collection

我了解 HotSpot JVM 使用的分代垃圾收集是如何工作的。我们有一个返回静态数据列表的方法，类似于

```
public List<String> getList() {
    List<String> ret = new ArrayList<String>();
    ret.add("foo");
    ret.add("bar");
    return ret;
} 
```

我正在考虑将其重写为

```
private static List<String> list = null;
...
public List<String> getList() {
    if (list == null) { .. initialize here .. }
    return list;
} 
```

这只会创建一次列表。这个单一的列表实例最终会进入终身代。由于这是一个相当大的应用程序，在许多地方使用这种设计模式意味着在老一代中有很多这些静态列表 - 增加了应用程序的内存使用量。

如果我们遵循每次都创建并返回一个新列表的模式，那么该列表在被垃圾收集之前永远不会离开伊甸园。会涉及更多的工作——必须创建和填充列表，以及进行垃圾收集——但我们会使用更少的内存，因为列表不会持续很长时间。

这个问题本质上更具学术性，因为任何一种模式都可以。存储静态列表只会增加少量的内存使用，而每次创建列表只会增加少量的工作量。使用哪种模式可能取决于许多因素 - 使用列表的频率、应用程序承受的内存压力等。你们会针对哪种模式，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:10:52.773

> 存储静态列表将增加内存使用量微不足道

当没有真正需要它时，它将使用更多空间。如果有一种用法，那将是相同的。但是如果你有多个副本，静态版本的效率更高。

通常，杀死你的不是最好的情况，而是最坏的情况。在最坏的情况下会有大量的？数百万？集合的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:53:14.297

正如 Peter Lawrey 指出的那样，在非静态情况下，有时您会在 GC 等待执行其操作时使用比必要更多的内存。

我会专注于更具可读性的内容。对我来说，番石榴`ImmutableList.of`在一个`static final`领域立即表示这些数据不会改变。

（或者`Collections.unmodifiableList(Arrays.asList(...))`如果你不想要番石榴）

# visual-c++ - 如何在 mfc 表单中保留大量控件？

> ID：12608569
> 
> 赞同：0
> 
> 时间：2012-09-26T18:59:06.163
> 
> 标签：visual-c++, mfc

我刚刚发现 mfc 对话框可以容纳的控件数量有限制，我有近 653 个控件，对话框仅容纳 332 个，我搜索了解决方案，一些建议的属性表和属性页，但我不想在某些选项卡中分发这些 653 个控件！我希望所有这些都在一个选项卡中，那么，除了使用选项卡控件或属性表之外，我还能做什么？有可能吗？

这是表格 ![在此处输入图像描述](../Images/32574cdeb661afc2914abbaf9896953d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:50:19.780

653控制？严重地？不管资源编辑器能不能搞定，这样的编程风格简直是被禁止了！此外，这也是对窗口把手的浪费。您应该考虑改用列表/树。

以编程方式创建您的控件！继承`CWnd`并创建您[自己的控件](http://www.codeproject.com/Articles/521/Creating-Custom-Controls)。然后添加一个控件数组并在`OnCreate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T09:06:49.293

似乎某种网格控制是您所追求的。它是包含许多单元格的表格形式的单个控件。表格和单元格都可以自定义。Code Project 有一整节专门用于[网格控件](http://www.codeproject.com/KB/miscctrl/#Grid+Control)。以下是该部分的前几个，免费：

[http://www.codeproject.com/Articles/3176/The-ALXGrid-Control-Library](http://www.codeproject.com/Articles/3176/The-ALXGrid-Control-Library)
[http://www.codeproject.com/Articles/8/MFC-Grid-control-2-27](http://www.codeproject.com/Articles/8/MFC-Grid-control-2-27)
[http://www. codeproject.com/Articles/2879/Virtual-Grid-Control-1-04](http://www.codeproject.com/Articles/2879/Virtual-Grid-Control-1-04)

# c# - 改变我的命名空间是好事还是必要？

> ID：12608572
> 
> 赞同：2
> 
> 时间：2012-09-26T18:59:11.043
> 
> 标签：c#, winforms, datagridview, custom-controls, resharper

我在我的项目中添加了两个自定义类，即“AutoSizeGrid”和“AutoSizeGridEditable”

两者都派生自 DataGridView，但这可能既不存在也不存在。

但他们在哪里似乎有些难题。

我的项目构建并运行良好；然而，当用 Resharper 检查它时，它给了我一个“约束违反”，说：“命名空间与文件位置不对应，应该是：''

我是否需要像这样更改它们，例如：

```
class AutoSizeGrid : DataGridView 
```

...到：

```
class <Name of my Solution>.AutoSizeGrid : DataGridView 
```

?

我宁愿不这样做，因为我不知道这是否会迫使我从我的表单中删除以前的 DGV 派生组件并用重新编译的版本替换它们；那将是驴的痛苦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:31:09.567

正如 ElVieejo 所说，如果代码编译，则无需更改它。ReSharper（和其他代码质量工具）建议您保持命名空间与文件路径同步，因为这是 Microsoft 的惯例。命名空间对于保持代码的组织非常有帮助，尤其是当项目/应用程序变得更大时，因此最好有一些明确的规则并遵循它们，但它们是为了可读性和关​​注点分离，而不是语法正确性。

# javascript - javascript css定位

> ID：12608573
> 
> 赞同：0
> 
> 时间：2012-09-26T18:59:11.630
> 
> 标签：javascript, css, positioning

大家好...
我的固定标题有问题。当我放大或调整浏览器大小时，我的标题中的某些菜单丢失/隐藏我不知道在哪里..

所以这是我的代码：

```
 <div id="header">
    <ul>
        <li>Menu 1</li>
        <li>Menu 2</li>
        <li>Menu 3</li>
        <li>Menu 4</li>
     </ul>
</div> 
```

CSS：

```
body{
     min-height:1000px;
}
#header{
     position: fixed;
     margin:30px;
}
#header ul{
     display:block;
}
#header ul li{
     float:left;
     list-style-type:none;
     width:110px;
     text-align:center;
     line-height:30px;
     padding-bottom:3px;
     background: #ccc;
} 
```

演示：http: [//jsfiddle.net/YgvND/1/](http://jsfiddle.net/YgvND/1/)

我需要 javascript 程序来控制 css 位置。我在放大、缩小或调整浏览器大小时的目的，以便 css 标题位置将变为“绝对”。

对不起我的语言。x)
任何人都可以帮助我....
thx..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:02:20.720

我建议你使用[jquery](http://jquery.com/)。[此处](https://stackoverflow.com/questions/8575772/how-to-detect-in-jquery-if-screen-resolution-changes)描述了检查结果更改的好方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:23:19.787

我不完全确定我是否理解你的问题，但我会试一试。在我看来，您希望在调整页面大小时将#header div 定位为绝对。因此，使用 jQuery 来查找窗口调整大小。

在您的情况下，这可能有点矫枉过正。一旦页面完成调整大小，这会将任何 css 更改绑定到#header div。

```
$(window).resize(function() {
  if (this.resizeTO) clearTimeout(this.resizeTO);
  this.resizeTO = setTimeout(function() {
      $(this).trigger('resizeEnd');
  }, 500);
});

$(window).bind('resizeEnd', function() {
  var header = $("#header");
  header.css({
      position: "absolute",
      top: "0px",
      left: "0px"
  });
}); 
```

这是一个[演示](http://jsfiddle.net/SeasonEnds/vvEVx/)。

# c#-4.0 - 维护继承层次结构的 RIA 服务

> ID：12608582
> 
> 赞同：1
> 
> 时间：2012-09-26T18:59:41.167
> 
> 标签：c#-4.0, silverlight-4.0, ria

我正在使用 Silverlight 4、Visual Studio 2010。我有一个启用 RIA 的类库，它具有以下层次结构：

实体 > SEntity > IncomeEntity > SellableItem

前3个是抽象的。SellableItem 的客户端生成类显示它继承自 Entity。如何维护客户端中的层次结构？

注意：我使用 NHibernate 作为我的 ORM，而不是 EF。

# pentaho - 在 Kettle 中对参数字段进行排序

> ID：12608583
> 
> 赞同：1
> 
> 时间：2012-09-26T18:59:44.327
> 
> 标签：pentaho, kettle

我想编写一个基于任意字段对流进行排序的子转换（我将需要在整个项目的过程中对多个流进行排序，并且我只想重新使用 1 个转换和更改我排序的字段的名称）。问题是无论我尝试什么，我都会收到一条错误消息，指出`"The field ${SORT_FIELD} specified in the "Sort Fields" step is not in the steps input stream."`(${SORT_FIELD} 是保存我要排序的字段名称的变量，而“排序字段”是实际“排序行”的名称步。

`${SORT_FIELD}`在映射输入规范中列为必填字段。我还将`${SORT_FIELD}`作为子转换的参数列出（除了让它从父转换继承所有变量）。

有没有办法将字段名称作为参数传递给排序行步骤，这样我就不必手动输入要排序的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:24:11.923

是的，您可以通过元数据注入来做到这一点。我很确定排序行步骤确实支持元数据注入。查看有关该主题的亚光脚轮博客。

# mysql - ActiveRecord::Base.transaction 对多个表的影响

> ID：12608592
> 
> 赞同：3
> 
> 时间：2012-09-26T19:00:28.493
> 
> 标签：mysql, ruby-on-rails, activerecord, database-performance

我很好奇带有 MySQL 数据库的 Rails 如何处理涉及多个表的事务的表/行锁定。

我有一种情况，我需要一次更新多条记录，但我还必须更新几条相关记录。我需要确保所有记录都已更新，如果任何更新失败，则将回滚更改。

我为此考虑了一个 ActiveRecord::Base.transaction 块，但一位同事询问了有关模型的表锁定问题。

这是我的代码的超级精简示例：

```
Change.transaction do
  Change.all.each do |change|
    new_item = Item.new
    new_trait = Trait.new
    new_trait_value = TraitValue.new
    new_trait.options << new_trait_value
    new_item.traits << new_trait
    new_trait.save
  end
end 
```

笔记：

1.  可能有超过 15,000 条变更记录
2.  目前大约有 24,000 个项目记录
3.  目前大约有 38,000 条 Trait 记录
4.  目前大约有 380,000 条 TraitValue 记录
5.  初步测试表明这是一个运行时间很长的任务——以分钟而不是秒为单位。

那么在这种情况下，四个表都被锁定了吗？还是只有更改表被锁定？

如果所有四个表都被锁定，并且该过程需要几分钟才能完成，那么使用事务可能不适合我的情况，因为我不想阻止其他用户添加/更新项目记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-25T07:39:41.607

我强烈建议您使用[activerecord-import](https://github.com/zdennis/activerecord-import) gem 或编写[原始 sql 查询](https://stackoverflow.com/questions/14824453/rails-raw-sql-example)

# java - 与时区无关的日期/时间

> ID：12608593
> 
> 赞同：0
> 
> 时间：2012-09-26T19:00:28.770
> 
> 标签：java, android, jodatime

我想做的是Android上的基本警报应用程序。当我通过 UI 设置日期和时间时（比如 2012 年 9 月 26 日 14:37），无论时区如何，我都希望闹钟在那个时候响起。该设置被序列化为两个单独的值 - 日期值和从一天开始的偏移量（以毫秒为单位）。

我在使用 Joda 库进行日期/时间操作时也犯了一个错误。该 API 看起来与 .NET 的 DateTime API 非常相似，让我感到困惑，但仍然遇到与默认 Java 框架 API 相同的二元性问题，其中对象值是 UTC，但它的属性是本地时间（顺便说一句，这个概念让我大吃一惊） ）。它似乎也无法自动获取 Android 的时区更改。

这是我所拥有的摘要：

```
// part of reminder class
public DateTime getNextAlarm()
{
    DateTime now = DateTime.now();
    DateTime next = date.withMillisOfDay(time);
    while (next.compareTo(now) <= 0)
        next = next.plusDays(repeat);
    return next;
}

// inside worker thread
workerEnabled = true;
while (workerEnabled)
{
    try
    {
        Thread.sleep(10000);
    }
    catch (InterruptedException e)
    {
        workerEnabled = false;
        return;
    }

    DateTimeZone tz = DateTimeZone.forTimeZone(TimeZone.getDefault());
    if (nextAlarm != null && nextAlarm.withZoneRetainFields(tz).compareTo(new DateTime(tz)) < 0)
    {
        nextAlarm = reminder.getNextAlarm();

        // perform alarm action
    }
} 
```

一切都很好，直到我尝试在应用程序运行时切换时区（在设置完成之后）。这就是奇怪的事情开始的地方。我什至无法描述究竟是什么错误，除了那不管我做什么它都不能正常工作。

我想我正在寻找的是关于如何在 Java/Android 中使用 Joda 或标准 API 进行与时区无关的数学的一般方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:23:24.680

我`AlarmManager`习惯在一天中的特定时间下载文件。我有一个助手类的示例代码......

```
public void createDownloadAlarm() {
    Intent i = new Intent(MyApp.ACTION_DOWNLOAD_FILES);
    PendingIntent operation = PendingIntent.getService(context, 0, i, PendingIntent.FLAG_UPDATE_CURRENT);

    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.HOUR_OF_DAY, 1);
    cal.set(Calendar.MINUTE, 30);
    cal.set(Calendar.SECOND, 0);

    AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), AlarmManager.INTERVAL_DAY, operation);
} 
```

使用`Calendar.getInstance()`然后使用该`set(...)`方法会创建一个警报，该警报将在任何时区的确切时间触发。

要按照您的描述进行操作，我会将上面的代码与`BroadcastReceiver`侦听的代码结合起来`ACTION_TIMEZONE_CHANGED`- 在清单中将其注册为`android.intent.action.TIMEZONE_CHANGED`.

在`BroadcastReceiver`我让它调用我上面显示的方法中，它应该（理论上）取消上一个警报并在时区更改时为当地时间设置一个新警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:18:00.550

事实证明，Jodatime 不处理 Android 上的时区更改。重新启动应用程序会有所帮助，但该解决方案不适用于一直运行的后台服务。我最终使用 Calendar/Date API 重写了代码，尽管它丑陋而痛苦。

# google-drive-api - Google Drive SDK 共享权限

> ID：12608595
> 
> 赞同：0
> 
> 时间：2012-09-26T19:00:38.117
> 
> 标签：google-drive-api

我有一个关于 google drive sdk php 的问题

google drvie sdk可以用php更改许多文件的共享权限吗？

我已经阅读了该文档，但只是找到了使用 javascript 更改一个文件的共享权限的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:48:00.567

Google Drive SDK 文档包括所有方法的 PHP 示例，包括管理共享的方法，例如[https://developers.google.com/drive/v2/reference/permissions/insert](https://developers.google.com/drive/v2/reference/permissions/insert)

# yahoo-pipes - 使用单个 yahoo 管道作为我所有 rss 提要的过滤器

> ID：12608596
> 
> 赞同：2
> 
> 时间：2012-09-26T19:00:42.617
> 
> 标签：yahoo-pipes

我想使用 Yahoo Pipes 创建一堆 RSS 提要，这些提要都以相同的方式过滤（块是在昨天之前，限制为 25 个项目）。这样，如果我想更改我的过滤器，我可以更改我的过滤器管道，我的所有 RSS 提要都会自动获取更改。我整理了一张图片，准确地显示了我正在尝试做的事情：

[![来自雅虎管道的屏幕截图](../Images/963aff985bcf6da73e8dc65df5439d8b.png)](https://i.stack.imgur.com/43a93.jpg)

我已经检查了许多 stackoverflow 主题，如果这个问题已经解决，似乎没有得到回答。我还看到了[stackexchange 问题](https://webapps.stackexchange.com/questions/20324/use-same-filter-for-several-pipes-on-yahoo-pipes)，它似乎在问这个问题，但并没有以同样的方式得到解决。

能够做到这一点将真正改善我的新闻阅读体验，任何帮助将不胜感激。

谢谢，大卫

# version - Raven.Client.Authorization 1.0.960 包是否与 Raven.Client 1.0.972 兼容？

> ID：12608598
> 
> 赞同：2
> 
> 时间：2012-09-26T19:00:44.777
> 
> 标签：version, ravendb

Raven.Client.Authorization 的当前版本是来自 Raven.Client 的版本。新的 Raven.Clients 允许您使用最新的 Json.Net 包，因此可以使用 RestSharp、ETC。

我希望节省一些时间/避免在这里陷入深深的挫败感。1.0.972能支持1.0.960授权吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:03:39.633

我不确定是否开箱即用。尝试使用程序集重定向。如果这不起作用，您可以从[该分支](https://github.com/fitzchak/ravendb/tree/v1-json.net)获取构建 972 的源代码，而不是`Raven.Client.Authorization`在您更新 json.net 参考后自行编译。

PS 如果您的应用程序正在开发中并且将在接下来的 2 个月内完成，我强烈建议您尝试[v1.2](https://github.com/ayende/ravendb/tree/1.2)，它已经开始了稳定过程。

# heroku - 所有 Heroku 命令行都开始失败

> ID：12608602
> 
> 赞同：2
> 
> 时间：2012-09-26T19:01:08.103
> 
> 标签：heroku

它曾经工作得很好。不知道发生了什么变化，我收到此错误：

```
<internal:lib/rubygems/custom_require>:29:in `require': no such file to load -- netrc (LoadError)
        from <internal:lib/rubygems/custom_require>:29:in `require'
        from C:/Users/ilan kasan/.heroku/client/lib/heroku/auth.rb:6:in `<top (required)>'
        from <internal:lib/rubygems/custom_require>:29:in `require'
        from <internal:lib/rubygems/custom_require>:29:in `require'
        from C:/Users/ilan kasan/.heroku/client/lib/heroku/client.rb:4:in `<top (required)>'
        from <internal:lib/rubygems/custom_require>:29:in `require'
        from <internal:lib/rubygems/custom_require>:29:in `require'
        from c:/Ruby192/lib/ruby/gems/1.9.1/gems/heroku-2.8.0/lib/heroku.rb:6:in `<top (required)>'
        from <internal:lib/rubygems/custom_require>:29:in `require'
        from <internal:lib/rubygems/custom_require>:29:in `require'
        from c:/Ruby192/lib/ruby/gems/1.9.1/gems/heroku-2.8.0/bin/heroku:6:in `<top (required)>'
        from c:/Ruby192/bin/heroku:19:in `load'
        from c:/Ruby192/bin/heroku:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:36:08.600

该问题似乎出现在最新的 Windows7 更新之后。我在 Heroku 的问题列表中找到了一个建议的解决方案：[https ://github.com/heroku/heroku/issues/298](https://github.com/heroku/heroku/issues/298)

> [我通过从https://toolbelt.heroku.com/](https://toolbelt.heroku.com/)删除`/users/me/.heroku/client`并重新安装再次修复它

所以删除`~/.heroku/client`文件夹并重新安装 Heroku Toolbelt。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:54:40.140

通过更新 heroku gem 解决了问题

宝石更新heroku

# zend-framework - 如何在不刷新此页脚的情况下在页脚布局 Zend 中插入 iframe？

> ID：12608605
> 
> 赞同：0
> 
> 时间：2012-09-26T19:01:18.370
> 
> 标签：zend-framework, footer

我正在使用 Zend Framework 构建一个应用程序，我需要在此应用程序的页脚中插入一个 iframe，但是当我按 F5 或单击链接或按钮时，所有页面都会刷新，甚至是 iframe。每当我将事件调度到服务器时，都会调用布局 zend，准备好 iframe 也是如此。（我的iframe在footer.phtml中，准备好了，就叫它一起布局）。

有人知道如何解决这个问题吗？

tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:10:22.363

您不能刷新整个页面，除了页面`iframe`上的一个。当您要求浏览器刷新页面时，它会刷新整个页面，没有什么不同的方法。

要执行您似乎想做的事情，而不使用 Javascript/AJAX，您必须使用两个框架。一个用于您网站的顶部，一个用于您的页脚。以下是对它们的介绍`frames`及其工作原理（`iframes`相似，它们只是“内部框架”）：[http ://www.w3.org/TR/html4/present/frames.html](http://www.w3.org/TR/html4/present/frames.html)

但是，请注意使用`frames`/`iframes`不是我个人鼓励的做法。你应该问问自己为什么要这样做。如果它只是重​​新加载页面的某个部分，那么您可能应该检查 Javascript/AJAX 替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:18:10.573

如果您想禁用某些操作的布局，您可以使用`$this->_helper->layout ()->disableLayout ();`. 将它放在 iframe 动作中，这将禁用布局并仅显示动作的视图。

# c# - 验证错误后如何保留文件上传？

> ID：12608609
> 
> 赞同：1
> 
> 时间：2012-09-26T19:01:24.967
> 
> 标签：c#, asp.net, file-upload

我有一个表单，需要上传文件以及附加数据（名称等），并在这些字段上进行验证。发生错误时，必须重新上传文件。发生验证错误后有没有办法保留文件？这是在 C# .NET 中构建的。

试图用谷歌搜索，但没有任何帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T19:25:32.660

由于安全性目的，您无法永久保留该文件。如果页面已发布并发生验证错误，请使用 .PostedFile 属性检查文件，如果存在，请将其保存到临时文件中。在 Session 中，存储对临时文件的引用。（使用JavaScript）

.PostedFile 是 FileUpload 控件的属性。

此外，在我的谷歌研究期间，我发现 AJAX RadControl 与您的问题相关..

[http://www.telerik.com/help/aspnet-ajax/asyncupload-persist-uploaded-files.html](http://www.telerik.com/help/aspnet-ajax/asyncupload-persist-uploaded-files.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:28:33.830

我在猜测你在做什么，因为你真的不能持久化一个文件......你只是使用一个文件上传对话框并从那里获取它吗？如果是这样，通常将从对话框中获得的文件/路径放在 txt 字段中，然后使用单独的按钮进行发布（上传）。

此方案假定您要保留路径/文件名，而不是实际文件。

# git - 您如何从 JGit RevCommit 中获取作者日期和提交日期？

> ID：12608610
> 
> 赞同：14
> 
> 时间：2012-09-26T19:01:26.803
> 
> 标签：git, jgit

`RevCommit`有一个`getCommitTime()`方法，但它返回一个`int`并且它没有作者时间。如何从 a 中获取作者和提交日期`RevCommit`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-26T20:30:53.453

像这样：

```
RevCommit commit = ...;

PersonIdent authorIdent = commit.getAuthorIdent();
Date authorDate = authorIdent.getWhen();
TimeZone authorTimeZone = authorIdent.getTimeZone();

PersonIdent committerIdent = commit.getCommitterIdent();
... 
```

另请参阅[API 文档](http://download.eclipse.org/jgit/docs/jgit-2.0.0.201206130900-r/apidocs/org/eclipse/jgit/revwalk/RevCommit.html#getAuthorIdent%28%29)。

# android - 如何使用 textView 倒计时到零？

> ID：12608614
> 
> 赞同：8
> 
> 时间：2012-09-26T19:01:58.010
> 
> 标签：android, android-widget

我想知道是否有任何方法使用计时器类分配给 textView 以便从 10 倒数到 0 并实时显示它？

我已经调查过了，发现了 Chronometer 功能，但我知道它只会计数？

我想学习如何做到这一点，那么有什么方法可以做到吗？如果是这样，如何？我完全不解。。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-26T19:12:44.517

如果需要倒计时，android.os 包中有一个叫 CountDownTimer 的谐音类。

在这里（[http://developer.android.com/reference/android/os/CountDownTimer.html](http://developer.android.com/reference/android/os/CountDownTimer.html)）你可以找到这个类的正确用法。这正是您所需要的。

此类从 API 级别 1 开始存在，因此您不会陷入兼容性问题。

示例（来自文档）

```
new CountDownTimer(30000, 1000) {

    public void onTick(long millisUntilFinished) {
       mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
    }

    public void onFinish() {
        mTextField.setText("done!");
     }
 }.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T23:23:24.053

试试[`CountDownAnimation`](https://github.com/IvanRF/CountDownAnimation/blob/master/src/com/ivanrf/countdownanimation/CountDownAnimation.java)。它完全符合您的需要。该[项目](https://github.com/IvanRF/CountDownAnimation)包括一个测试。

如果您`CountDownTimer`每 1 秒使用一次滴答声，您将不会得到最后一个滴答声。因此，我建议您尝试`CountDownAnimation`使用`Handler`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:24:28.793

我同意 Guglielmo Moretti 的观点，但如果您仍然想自己使用 TextView 来完成，而不是使用经典的观察者设计模式来实现。

您可以像下面的代码一样拥有自定义文本视图，

```
 package com.example.stackoverflow;

import java.util.Observable;
import java.util.Observer;

import android.content.Context;
import android.widget.TextView;

public class MyTextView extends TextView implements Observer{

    public MyTextView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void update(Observable observable, Object data) {
        // TODO Auto-generated method stub
        this.setText(""+((Integer)data).intValue());
    }

} 
```

另外，像这样用 observalble 实现模式，

```
package com.example.stackoverflow;

import java.util.Observable;

public class MyTextViewModel extends Observable {

    private int counter;

    public MyTextViewModel(int initnumber){
        this.counter = initnumber;
    }

    public void decrementCounter(){
        if(this.counter>0){
            this.counter--;
            setChanged();
            notifyObservers(this.counter);
        }
    }

} 
```

像这样的测试活动，

```
package com.example.stackoverflow;

import android.app.Activity;
import android.os.Bundle;

import android.widget.LinearLayout;
import android.widget.TextView;

public class MainActivity extends Activity {
TextView tv;

LinearLayout ll;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // tv = (TextView) findViewById(R.id.textView1);
    ll = (LinearLayout)findViewById(R.id.ll1);
    MyTextView mtv = new MyTextView(getApplicationContext());
    MyTextViewModel mm = new MyTextViewModel(10);
    mm.addObserver(mtv);
    mtv.setText("Not yet init");
    ll.addView(mtv);
    mm.decrementCounter(); // call this function in a thread and as many times as you want
}
} 
```

# r - 在ggplot2中调整y轴线位置

> ID：12608616
> 
> 赞同：2
> 
> 时间：2012-09-26T19:02:01.640
> 
> 标签：r, ggplot2

我正在尝试删除 y 轴线和绘图中第一个刻度线之间的空间。这是一个例子：

```
set.seed(201)
n <- 100
dat <- data.frame(xval = (1:n+rnorm(n,sd=5))/20, yval = 2*2^((1:n+rnorm(n,sd=5))/20))
dat[dat[,1] < 0,1] <- 0
dat[dat[,2] < 0,2] <- 0

ggplot(dat, aes(xval, yval)) + geom_point() 
```

此代码绘制了一个图形，其中 y 轴线和 x 轴上的零刻度线之间有一个空格。我怎样才能删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:04:01.813

您可以使用以下功能更改此“间隙” `scale_x_continuous`：

```
ggplot(dat, aes(xval, yval)) + geom_point() + 
  scale_x_continuous(expand=c(0,0)) 
```

从上的帮助文件中`scale_x_continuous`，

> expand：长度为 2 的数值向量，给出乘法和加法扩展常数。这些常数确保数据放置在远离轴的位置。

要更改 y 轴上的空间，请使用`scale_y_continuous`

# iframe - 使用 iframe 和 Greasemonkey/Scriptish 时“eval 不是函数”

> ID：12608620
> 
> 赞同：2
> 
> 时间：2012-09-26T19:02:17.413
> 
> 标签：iframe, greasemonkey, scriptish

有什么方法可以让这段代码在 Greasemonkey/Scriptish 中工作，还是我必须将它注入网页本身？

```
body = document.getElementsByTagName("body")[0];
fakeConsole = 'window.top._console';
injected = document.getElementById("sandbox") ? true : false;
sandboxframe = injected ? document.getElementsById("sandbox") : document.createElement('iframe');
sandbox = null;

if (!injected) {
   body.appendChild(sandboxframe);
   sandboxframe.setAttribute('id', 'sandbox');
   sandboxframe.setAttribute('style', "display:none")
}

var p = sandboxframe.contentWindow.eval('1 + 1');
console.log(p); 
```

使用源代码时，此代码确实有效：

```
 <script type="text/javascript" src="test.js"></script> 
```

但不是在 Greasemonkey 脚本中使用时，我观察到存在某种我不太熟悉的安全屏障，并试图使用 unsafeWindow 绕过 XPCNativeWrapper。

请对此有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T02:16:11.217

几件事：

1.  代码有错误；`getElementsById`不是函数。
2.  如果该指令适用，那么该代码在 Greasemonkey 1.0 或更高版本中***确实有效。***`@grant none`更多关于这下面。
3.  对于 Scriptish、所有其他浏览器和 Greasemonkey 场景`@grant none`是不可能的；您将不得不***“注入”***代码。更多关于这下面。
4.  正如 Jeremy J Starcher 所说，`eval()`应尽可能避免。 `eval()`使性能、维护、调试和安全性变得更加困难。

# 对于 Greasemonkey 1.0 及更高版本：

在*某些*情况下，Greasemonkey 不再使用`XPCNativeWrapper`. 请参阅[该`@grant`指令](http://wiki.greasespot.net/@grant)的文档。

所以这意味着 (1) 如果您的脚本不使用任何`GM_`函数并且 (2) 脚本指定`@grant none`，那么您的代码将按原样运行（`getElementsById`拼写错误除外）。

请注意，没有其他脚本引擎会这样做。（出于很好的理由。Greasemonkey 的新行为与`@grant`沙盒有关，充其量是有争议的。）

如果你想使用`GM_`函数，那么你必须注入 iframe 代码。请参阅下一节。

# 对于 Scriptish、Privileged Greasemonkey、Chrome 等：

Scriptish、Sandboxed Greasemonkey、Chrome 等都不能在各自的沙箱中很好地处理 iframe。（例如，请参阅[这些 Q。](https://stackoverflow.com/questions/tagged/greasemonkey+iframe)）

从 GM/用户脚本运行此类代码的唯一可靠方法是*注入*它。像这样：

```
function gmMain () {
    body = document.getElementsByTagName("body")[0];
    fakeConsole = 'window.top._console';
    injected = document.getElementById("sandbox") ? true : false;
    sandboxframe = injected ? document.getElementById("sandbox") : document.createElement('iframe');
    sandbox = null;

    if (!injected) {
       body.appendChild(sandboxframe);
       sandboxframe.setAttribute('id', 'sandbox');
       sandboxframe.setAttribute('style', "display:none")
    }

    var p = sandboxframe.contentWindow.eval('1 + 1');
    console.log(p);
}

addJS_Node (null, null, gmMain);

function addJS_Node (text, s_URL, funcToRun, runOnLoad) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    if (runOnLoad) {
        scriptNode.addEventListener ("load", runOnLoad, false);
    }
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    targ.appendChild (scriptNode);
} 
```

# php - 如何将动态 (PHP) 网站存档为静态 HTML？

> ID：12608622
> 
> 赞同：8
> 
> 时间：2012-09-26T19:02:19.037
> 
> 标签：php, caching, web-scraping, render, static-html

我们正在关闭[对话网络](http://conversationsnetwork.org/)（包括[IT 对话](http://itc.conversationsnetwork.org/)播客）。计划是呈现我们网站的静态 HTML 版本，以便永久托管在[Internet Archive](http://archive.org/index.php)中。

从目前从 PHP 动态生成的大约 5,000 个动态页面生成静态 HTML 的最简单方法是什么？

我知道我们可以调整代码以缓存 PHP 输出，将其写入文件，然后遍历站点地图以生成每个页面。但我想知道是否有任何我们应该考虑的选择。有什么工具可以做到这一点并按原样抓取 HTML？（Acrobat Pro 以外的其他软件？）

不幸的是，我们还有相当多的 Ajax 调用，这将使这变得更加困难。我想我们必须先取消 Ajax。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T20:41:57.997

它可能不是您想要的；但[HTTrack](http://www.httrack.com/)会浏览您的网站以获取链接并保存它的 HTML 版本。此镜像将包含所有链接的静态内容，例如图像、css 和 javascript。

我能想到的唯一问题是您的 AJAX 脚本是否从服务器中提取重要数据，但也许 HTTrack 有一个设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T19:53:47.120

有一个很棒的软件叫做“ [Teleport Pro](http://www.tenmax.com/teleport/pro/home.htm) ”（不幸的是付费软件），它可以创建网站的可浏览/复制副本。哪个，一旦上传到服务器，应该与原始站点完全相同。

从动态页面创建静态 html 时要记住的事情是：

*   您当前的 ajax 调用需要取消 ajaxed（正如您自己所说）
*   .htaccess 设置，例如 mod_rewrite 可以使您的静态文件一文不值。因为链接可能不起作用。

但是“Teleport pro”是一个真正可靠的程序，已经存在了很长一段时间。我过去使用过它，并且可能会再次使用它。

* * *

另一种方法可能是创建缓存的 php 模块“php-apc”。在这种情况下，您需要在创建完整的缓存之前抓取整个站点。我不太熟悉它，但是安装很容易，您可以查看生成的文件是否有用。

# c - 请解释为什么输出不会改变 i 的值

> ID：12608624
> 
> 赞同：-1
> 
> 时间：2012-09-26T19:02:21.100
> 
> 标签：c

```
#include<stdio.h>
void main()
{
 int i = 10;
 i=!i>14;
 printf("i=%d",i);
} 
```

我得到输出： i=0
即使将**i**的值更改为任何其他整数，我也会得到相同的输出。
这段代码有什么作用？请解释

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T19:03:54.450

这条线

```
i=!i>14; 
```

带括号（隐式）

```
i= (!i) > 14; 
```

因为 a 的结果`!`总是 0 (if `i != 0`) 或 1 (if `i == 0`)，所以结果总是小于 14。

您的`printf`来电

```
printf("i=%d"); 
```

错过了它的第二个参数（感谢@DSM 发现它），这会调用未定义的行为，因为每个转换说明符都必须具有正确类型的相应参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T19:04:01.813

此语句：将表达式的结果`i = !i > 14`赋给变量： 。`i``!i > 14`

`(!i) > 14`是*假*的，因为`!i`对于任何非零数都为零，即`0 > 14`. 由于*false*在 C 中由 表示`0`，`i`因此获取值`0`。

此外，您的调用在格式字符串`printf`中没有匹配的参数。应该是`%d`：`printf``printf(i=%d\n", i);`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T19:06:38.857

此外，您的`printf`调用仅指定了一种格式，但缺少`i`作为参数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T19:07:40.567

只是为了补充其他答案：

这一行有一个错误：

```
printf("i=%d"); 
```

它应该是：

```
printf("i=%d",i); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T19:08:52.060

我想你想要这个 i=!(i>14); 您编写的逻辑完全从左到右解析，首先不是（i），然后它的结果针对 14 进行了大于测试。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T19:05:44.200

由于优先规则，该行内容如下：

```
i = (!i)>14; 
```

所以，`i`是 10，这对于`!`操作员来说是正确的；`!`否定这一点，给出假，即0，所以你得到的是`0>14`，这显然是假的，即0。

# jqgrid - Jqgrid - 具有子网格的分组功能

> ID：12608627
> 
> 赞同：1
> 
> 时间：2012-09-26T19:02:33.187
> 
> 标签：jqgrid

打开分组时，子网格功能会自动禁用。如果打开分组，有没有办法实现子网格功能？知道最新版本的 jqgrid 是否支持这两个功能？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:42:41.493

Jqgrid 4.3 版本现在提供了带有子网格的分组功能。请[在此处查看](http://www.trirand.com/blog/?page_id=393/feature-request/grouping-with-subgrid-feature/)。我已经下载了 4.4.1 并且工作正常...

# windows-phone-7 - WP7 Mango 中的列表框是否默认虚拟化？

> ID：12608628
> 
> 赞同：4
> 
> 时间：2012-09-26T19:02:41.673
> 
> 标签：windows-phone-7, windows-phone-7.1

2012 年 8 月，这篇文章发表于[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286406%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286406%28v=vs.92%29.aspx)，其中讨论了数据库最佳实践。

在本文中，提到必须启用列表框中的数据虚拟化，并建议遵循 2010 年 8 月的一篇文章。

> " 有关在数据绑定 ListBox 控件上启用数据虚拟化的更多信息，请参阅[提高 Silverlight for Windows Phone 7 中的 ListBox 性能：数据虚拟化](http://shawnoster.com/blog/post/Improving-ListBox-Performance-in-Silverlight-for-Windows-Phone-7-Data-Virtualization.aspx)"

但是我认为默认情况下会启用列表框虚拟化，并在 Mango 版本中发布。那是对的吗？默认情况下，列表框数据是否绑定到虚拟化的可观察集合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:12:33.157

默认情况下 Ui 是虚拟化的 - 因此列表框为列表项重用数据模板，并且仅呈现那些实际滚动到视图中的列表项。

但是，如果您使用 observablecollection，则数据不会被虚拟化。

因此，如果您有一个包含 1,000,000 个项目的列表，那么所有项目都将在内存中，但只会创建和绘制其中少数项目的 ui。

要同时虚拟化数据，您需要实现自定义 ilist，可能还支持 inotifycollectionchanged。例如，此实现可能使用 SQLite 仅在滚动需要时加载数据项。

# user-interface - 有没有办法为某些 UI 元素指定使用哪个主题？

> ID：12608630
> 
> 赞同：1
> 
> 时间：2012-09-26T19:02:45.977
> 
> 标签：user-interface, windows-8, themes

例如，使用 Light Theme 意味着 back 和 appbar 按钮是黑色的。但是，当使用较暗的应用栏颜色时，按钮的对比度会很明显。这是一个屏幕抓取，忽略白色的质量。[http://i.imgur.com/2EzSd.png](http://i.imgur.com/2EzSd.png)

有没有办法直接访问导致一个主题图标与另一个主题图标的样式？

注意：我正在构建一个 C# + XAML 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T20:33:30.813

作为开始，按钮看起来有点像这样：

![开始](../Images/25b63e8ae182b0a6fee0e8f84b59836f.png)

在 StandartStyles.xml 下，您必须先查找样式`AppBarButtonStyle`以更改图标颜色查找`<Setter Property="Foreground" Value="{StaticResource AppBarItemForegroundThemeBrush}"/>`

现在你用`{StaticResource AppBarItemForegroundThemeBrush}`你想要的颜色替换你可以同时使用`white`和`#FFFFFFFF`。现在你已经改变了你的图标的视觉效果，你应该有这样的东西

![在此处输入图像描述](../Images/f020552b51b4fad762df4c352f28eb88.png)

现在您需要设置下面的文本样式，方法是在下面`</TextBlock`几行找到标记并在那里更改 forground 属性

![第二步](../Images/1bdc0b4036a3d9189d3cb1541334fdc2.png)

现在您有了一个漂亮的图标，但是一旦您将鼠标悬停在它上面，它就会变得安静而丑陋。为了改变不同的状态，向下移动到`<VisualStateGroup x:Name="CommonStates">`标签这里你会发现一个标签`<VisualState x:Name="PointerOver">`，因为当你将鼠标悬停在它上面时，你可能会怀疑这会改变按钮的属性。

```
 <VisualState x:Name="PointerOver">
        <Storyboard>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGlyph" Storyboard.TargetProperty="Foreground">
    <!-- the background of the actionbar-> !--><DiscreteObjectKeyFrame KeyTime="0" Value="yourBackgroundColor"/> 
                                    </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Content" Storyboard.TargetProperty="Foreground">
    <!-- the icon of the actionbar-> --><DiscreteObjectKeyFrame KeyTime="0" Value="yourActionBarIconColor"/> 
                                    </ObjectAnimationUsingKeyFrames>
        </Storyboard>
    </VisualState> 
```

如果你继续向下滚动，你会发现`<VisualState x:Name="Pressed">`等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:25:52.883

您可以通过在 Visual Studio 中展开项目下的 References 节点，然后展开`Windows Library for JavasScript 1.0`节点和`css`文件夹来查看每个主题使用的 CSS。

AppBar 颜色的相关行似乎从我`ui-dark.css`文件的第 2621 行开始。此外，第 2448 行指定了`.win-commandimage`项目的颜色，这是大多数 appbar 命令的图标。您应该能够在项目的样式表中覆盖这些设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T01:09:39.510

每个主题的应用栏按钮的颜色被定义为您可以覆盖的资源。我在[Windows 8 – Overriding Metro app resources](http://www.markermetro.com/2012/07/technical/windows-8-overriding-metro-app-resources/)中描述了该过程。

因为您的方法应该足够简单，以获取 Light App Bar 按钮资源并使用它们覆盖 Dark 资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T21:52:40.670

事实证明，Windows 8 只使用了前景色（它继承自选定的主题样式）。

这意味着您需要做的就是设置前景以更改图标颜色，赢家！

# symfony - 如何在 Symfony2 中使用 yml 验证实体表单字段？

> ID：12608632
> 
> 赞同：0
> 
> 时间：2012-09-26T19:02:50.770
> 
> 标签：symfony

当我尝试验证使用 validation.yml 文件提交的实体类型表单时收到以下错误消息

可捕获的致命错误：传递给 Frontend\EntityBundle\Entity\StudentRegistration::setIdState() 的参数 1 必须是 Frontend\EntityBundle\Entity\MasterState 的实例，给定 null，在 C:\wamp\www\careerguide\vendor\symfony 中调用\src\Symfony\Component\Form\Util\PropertyPath.php 在第 347 行并在 C:\wamp\www\careerguide\src\Frontend\EntityBundle\Entity\StudentRegistration.php 第 1099 行中定义

通知，

->add('idState', 'entity', array('class' => 'Frontend\EntityBundle\Entity\MasterState', 'property' => 'stateName', 'empty_value' => '选择状态', 'label ' => 'State :', 'attr' => array('class' => 'width275'), 'required' => false))

在实体中，

```
 <?php 
```

命名空间前端\EntityBundle\Entity；

使用 Doctrine\ORM\Mapping 作为 ORM；

/** * Frontend\EntityBundle\Entity\StudentRegistration * * @ORM\Table(name="student_registration") * @ORM\Entity */ class StudentRegistration { /* * * @var integer $id * * @ORM\Column(name= "id", type="integer", nullable=false) * @ORM\Id * @ORM\GeneratedValue(strategy="IDENTITY") */ private $id;

```
/**
 * @var string $idStudentRegistration
 *
 * @ORM\Column(name="id_student_registration", type="string", length=128, nullable=false)
 */
private $idStudentRegistration;

/**
 * @var integer $idAttempt
 *
 * @ORM\Column(name="id_attempt", type="integer", nullable=true)
 */
private $idAttempt;

/**
 * @var string $firstName
 *
 * @ORM\Column(name="first_name", type="string", length=128, nullable=false)
 */
private $firstName;

/**
 * @var string $lastName
 *
 * @ORM\Column(name="last_name", type="string", length=128, nullable=true)
 */
private $lastName;

/**
 * @var datetime $dateOfBirth
 *
 * @ORM\Column(name="date_of_birth", type="datetime", nullable=true)
 */
private $dateOfBirth;

/**
 * @var string $gender
 *
 * @ORM\Column(name="gender", type="string", length=16, nullable=true)
 */
private $gender;

/**
 * @var string $email
 *
 * @ORM\Column(name="email", type="string", length=128, nullable=true)
 */
private $email;

/**
 * @var string $password
 *
 * @ORM\Column(name="password", type="string", length=128, nullable=true)
 */
private $password;

/**
 * @var string $mobileNumber
 *
 * @ORM\Column(name="mobile_number", type="string", length=16, nullable=true)
 */
private $mobileNumber;

/**
 * @var string $stdCode
 *
 * @ORM\Column(name="std_code", type="string", length=16, nullable=true)
 */
private $stdCode;

/**
 * @var integer $landlineNumber
 *
 * @ORM\Column(name="landline_number", type="integer", nullable=true)
 */
private $landlineNumber;

/**
 * @var text $address
 *
 * @ORM\Column(name="address", type="text", nullable=true)
 */
private $address;

/**
 * @var integer $pincode
 *
 * @ORM\Column(name="pincode", type="integer", nullable=true)
 */
private $pincode;

/**
 * @var string $disabilityPercentage
 *
 * @ORM\Column(name="disability_percentage", type="string", length=16, nullable=true)
 */
private $disabilityPercentage;

/**
 * @var string $schoolName
 *
 * @ORM\Column(name="school_name", type="string", length=256, nullable=true)
 */
private $schoolName;

/**
 * @var string $collegeName
 *
 * @ORM\Column(name="college_name", type="string", length=256, nullable=true)
 */
private $collegeName;

/**
 * @var string $qualificationStatus
 *
 * @ORM\Column(name="qualification_status", type="string", length=128, nullable=true)
 */
private $qualificationStatus;

/**
 * @var string $courseDuration
 *
 * @ORM\Column(name="course_duration", type="string", length=16, nullable=true)
 */
private $courseDuration;

/**
 * @var string $workExposure
 *
 * @ORM\Column(name="work_exposure", type="string", length=16, nullable=true)
 */
private $workExposure;

/**
 * @var string $userStudyDuration
 *
 * @ORM\Column(name="user_study_duration", type="string", length=16, nullable=true)
 */
private $userStudyDuration;

/**
 * @var text $achievements
 *
 * @ORM\Column(name="achievements", type="text", nullable=true)
 */
private $achievements;

/**
 * @var datetime $createdAt
 *
 * @ORM\Column(name="created_at", type="datetime", nullable=true)
 */
private $createdAt;

/**
 * @var datetime $updatedAt
 *
 * @ORM\Column(name="updated_at", type="datetime", nullable=true)
 */
private $updatedAt;

/**
 * @var integer $version
 *
 * @ORM\Column(name="version", type="integer", nullable=true)
 */
private $version;

/**
 * @var MasterCity
 *
 * @ORM\ManyToOne(targetEntity="MasterCity")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_city", referencedColumnName="id")
 * })
 */
private $idCity;

/**
 * @var MasterStreamgroup
 *
 * @ORM\ManyToOne(targetEntity="MasterStreamgroup")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_streamgroup", referencedColumnName="id")
 * })
 */
private $idStreamgroup;

/**
 * @var MasterQualification
 *
 * @ORM\ManyToOne(targetEntity="MasterQualification")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_qualification_father", referencedColumnName="id")
 * })
 */
private $idQualificationFather;

/**
 * @var MasterOccupation
 *
 * @ORM\ManyToOne(targetEntity="MasterOccupation")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_occupation_father", referencedColumnName="id")
 * })
 */
private $idOccupationFather;

/**
 * @var MasterQualification
 *
 * @ORM\ManyToOne(targetEntity="MasterQualification")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_qualification_mother", referencedColumnName="id")
 * })
 */
private $idQualificationMother;

/**
 * @var MasterOccupation
 *
 * @ORM\ManyToOne(targetEntity="MasterOccupation")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_occupation_mother", referencedColumnName="id")
 * })
 */
private $idOccupationMother;

/**
 * @var MasterCity
 *
 * @ORM\ManyToOne(targetEntity="MasterCity")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_preferred_city1", referencedColumnName="id")
 * })
 */
private $idPreferredCity1;

/**
 * @var MasterCity
 *
 * @ORM\ManyToOne(targetEntity="MasterCity")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_preferred_city2", referencedColumnName="id")
 * })
 */
private $idPreferredCity2;

/**
 * @var MasterCity
 *
 * @ORM\ManyToOne(targetEntity="MasterCity")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_preferred_city3", referencedColumnName="id")
 * })
 */
private $idPreferredCity3;

/**
 * @var MasterBudget
 *
 * @ORM\ManyToOne(targetEntity="MasterBudget")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_budget", referencedColumnName="id")
 * })
 */
private $idBudget;

/**
 * @var MasterMode
 *
 * @ORM\ManyToOne(targetEntity="MasterMode")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_mode", referencedColumnName="id")
 * })
 */
private $idMode;

/**
 * @var MasterState
 *
 * @ORM\ManyToOne(targetEntity="MasterState")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_state", referencedColumnName="id")
 * })
 */
private $idState;

/**
 * @var MasterCountry
 *
 * @ORM\ManyToOne(targetEntity="MasterCountry")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_country", referencedColumnName="id")
 * })
 */
private $idCountry;

/**
 * @var MasterHealth
 *
 * @ORM\ManyToOne(targetEntity="MasterHealth")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_health", referencedColumnName="id")
 * })
 */
private $idHealth;

/**
 * @var MasterQualification
 *
 * @ORM\ManyToOne(targetEntity="MasterQualification")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_qualification", referencedColumnName="id")
 * })
 */
private $idQualification;

/**
 * @var MasterMedium
 *
 * @ORM\ManyToOne(targetEntity="MasterMedium")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_medium", referencedColumnName="id")
 * })
 */
private $idMedium;

/**
 * @var MasterBoard
 *
 * @ORM\ManyToOne(targetEntity="MasterBoard")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_board", referencedColumnName="id")
 * })
 */
private $idBoard;

/**
 * @var MasterUniversity
 *
 * @ORM\ManyToOne(targetEntity="MasterUniversity")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_university", referencedColumnName="id")
 * })
 */
private $idUniversity;

/**
 * @var MasterStream
 *
 * @ORM\ManyToOne(targetEntity="MasterStream")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id_stream", referencedColumnName="id")
 * })
 */
private $idStream;

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}

/**
 * Set idStudentRegistration
 *
 * @param string $idStudentRegistration
 */
public function setIdStudentRegistration($idStudentRegistration)
{
    $this->idStudentRegistration = $idStudentRegistration;
}

/**
 * Get idStudentRegistration
 *
 * @return string
 */
public function getIdStudentRegistration()
{
    return $this->idStudentRegistration;
}

/**
 * Set idAttempt
 *
 * @param integer $idAttempt
 */
public function setIdAttempt($idAttempt)
{
    $this->idAttempt = $idAttempt;
}

/**
 * Get idAttempt
 *
 * @return integer
 */
public function getIdAttempt()
{
    return $this->idAttempt;
}

/**
 * Set firstName
 *
 * @param string $firstName
 */
public function setFirstName($firstName)
{
    $this->firstName = $firstName;
}

/**
 * Get firstName
 *
 * @return string
 */
public function getFirstName()
{
    return $this->firstName;
}

/**
 * Set lastName
 *
 * @param string $lastName
 */
public function setLastName($lastName)
{
    $this->lastName = $lastName;
}

/**
 * Get lastName
 *
 * @return string
 */
public function getLastName()
{
    return $this->lastName;
}

/**
 * Set dateOfBirth
 *
 * @param datetime $dateOfBirth
 */
public function setDateOfBirth($dateOfBirth)
{
    $this->dateOfBirth = $dateOfBirth;
}

/**
 * Get dateOfBirth
 *
 * @return datetime
 */
public function getDateOfBirth()
{
    return $this->dateOfBirth;
}

/**
 * Set gender
 *
 * @param string $gender
 */
public function setGender($gender)
{
    $this->gender = $gender;
}

/**
 * Get gender
 *
 * @return string
 */
public function getGender()
{
    return $this->gender;
}

/**
 * Set email
 *
 * @param string $email
 */
public function setEmail($email)
{
    $this->email = $email;
}

/**
 * Get email
 *
 * @return string
 */
public function getEmail()
{
    return $this->email;
}

/**
 * Set password
 *
 * @param string $password
 */
public function setPassword($password)
{
    $this->password = $password;
}

/**
 * Get password
 *
 * @return string
 */
public function getPassword()
{
    return $this->password;
}

/**
 * Set mobileNumber
 *
 * @param string $mobileNumber
 */
public function setMobileNumber($mobileNumber)
{
    $this->mobileNumber = $mobileNumber;
}

/**
 * Get mobileNumber
 *
 * @return string
 */
public function getMobileNumber()
{
    return $this->mobileNumber;
}

/**
 * Set stdCode
 *
 * @param string $stdCode
 */
public function setStdCode($stdCode)
{
    $this->stdCode = $stdCode;
}

/**
 * Get stdCode
 *
 * @return string
 */
public function getStdCode()
{
    return $this->stdCode;
}

/**
 * Set landlineNumber
 *
 * @param integer $landlineNumber
 */
public function setLandlineNumber($landlineNumber)
{
    $this->landlineNumber = $landlineNumber;
}

/**
 * Get landlineNumber
 *
 * @return integer
 */
public function getLandlineNumber()
{
    return $this->landlineNumber;
}

/**
 * Set address
 *
 * @param text $address
 */
public function setAddress($address)
{
    $this->address = $address;
}

/**
 * Get address
 *
 * @return text
 */
public function getAddress()
{
    return $this->address;
}

/**
 * Set pincode
 *
 * @param integer $pincode
 */
public function setPincode($pincode)
{
    $this->pincode = $pincode;
}

/**
 * Get pincode
 *
 * @return integer
 */
public function getPincode()
{
    return $this->pincode;
}

/**
 * Set disabilityPercentage
 *
 * @param string $disabilityPercentage
 */
public function setDisabilityPercentage($disabilityPercentage)
{
    $this->disabilityPercentage = $disabilityPercentage;
}

/**
 * Get disabilityPercentage
 *
 * @return string
 */
public function getDisabilityPercentage()
{
    return $this->disabilityPercentage;
}

/**
 * Set schoolName
 *
 * @param string $schoolName
 */
public function setSchoolName($schoolName)
{
    $this->schoolName = $schoolName;
}

/**
 * Get schoolName
 *
 * @return string
 */
public function getSchoolName()
{
    return $this->schoolName;
}

/**
 * Set collegeName
 *
 * @param string $collegeName
 */
public function setCollegeName($collegeName)
{
    $this->collegeName = $collegeName;
}

/**
 * Get collegeName
 *
 * @return string
 */
public function getCollegeName()
{
    return $this->collegeName;
}

/**
 * Set qualificationStatus
 *
 * @param string $qualificationStatus
 */
public function setQualificationStatus($qualificationStatus)
{
    $this->qualificationStatus = $qualificationStatus;
}

/**
 * Get qualificationStatus
 *
 * @return string
 */
public function getQualificationStatus()
{
    return $this->qualificationStatus;
}

/**
 * Set courseDuration
 *
 * @param string $courseDuration
 */
public function setCourseDuration($courseDuration)
{
    $this->courseDuration = $courseDuration;
}

/**
 * Get courseDuration
 *
 * @return string
 */
public function getCourseDuration()
{
    return $this->courseDuration;
}

/**
 * Set workExposure
 *
 * @param string $workExposure
 */
public function setWorkExposure($workExposure)
{
    $this->workExposure = $workExposure;
}

/**
 * Get workExposure
 *
 * @return string
 */
public function getWorkExposure()
{
    return $this->workExposure;
}

/**
 * Set userStudyDuration
 *
 * @param string $userStudyDuration
 */
public function setUserStudyDuration($userStudyDuration)
{
    $this->userStudyDuration = $userStudyDuration;
}

/**
 * Get userStudyDuration
 *
 * @return string
 */
public function getUserStudyDuration()
{
    return $this->userStudyDuration;
}

/**
 * Set achievements
 *
 * @param text $achievements
 */
public function setAchievements($achievements)
{
    $this->achievements = $achievements;
}

/**
 * Get achievements
 *
 * @return text
 */
public function getAchievements()
{
    return $this->achievements;
}

/**
 * Set createdAt
 *
 * @param datetime $createdAt
 */
public function setCreatedAt($createdAt)
{
    $this->createdAt = $createdAt;
}

/**
 * Get createdAt
 *
 * @return datetime
 */
public function getCreatedAt()
{
    return $this->createdAt;
}

/**
 * Set updatedAt
 *
 * @param datetime $updatedAt
 */
public function setUpdatedAt($updatedAt)
{
    $this->updatedAt = $updatedAt;
}

/**
 * Get updatedAt
 *
 * @return datetime
 */
public function getUpdatedAt()
{
    return $this->updatedAt;
}

/**
 * Set version
 *
 * @param integer $version
 */
public function setVersion($version)
{
    $this->version = $version;
}

/**
 * Get version
 *
 * @return integer
 */
public function getVersion()
{
    return $this->version;
}

/**
 * Set idCity
 *
 * @param Frontend\EntityBundle\Entity\MasterCity $idCity
 */
public function setIdCity(\Frontend\EntityBundle\Entity\MasterCity $idCity)
{
    $this->idCity = $idCity;
}

/**
 * Get idCity
 *
 * @return Frontend\EntityBundle\Entity\MasterCity
 */
public function getIdCity()
{
    return $this->idCity;
}

/**
 * Set idStreamgroup
 *
 * @param Frontend\EntityBundle\Entity\MasterStreamgroup $idStreamgroup
 */
public function setIdStreamgroup(\Frontend\EntityBundle\Entity\MasterStreamgroup $idStreamgroup)
{
    $this->idStreamgroup = $idStreamgroup;
}

/**
 * Get idStreamgroup
 *
 * @return Frontend\EntityBundle\Entity\MasterStreamgroup
 */
public function getIdStreamgroup()
{
    return $this->idStreamgroup;
}

/**
 * Set idQualificationFather
 *
 * @param Frontend\EntityBundle\Entity\MasterQualification $idQualificationFather
 */
public function setIdQualificationFather(\Frontend\EntityBundle\Entity\MasterQualification $idQualificationFather)
{
    $this->idQualificationFather = $idQualificationFather;
}

/**
 * Get idQualificationFather
 *
 * @return Frontend\EntityBundle\Entity\MasterQualification
 */
public function getIdQualificationFather()
{
    return $this->idQualificationFather;
}

/**
 * Set idOccupationFather
 *
 * @param Frontend\EntityBundle\Entity\MasterOccupation $idOccupationFather
 */
public function setIdOccupationFather(\Frontend\EntityBundle\Entity\MasterOccupation $idOccupationFather)
{
    $this->idOccupationFather = $idOccupationFather;
}

/**
 * Get idOccupationFather
 *
 * @return Frontend\EntityBundle\Entity\MasterOccupation
 */
public function getIdOccupationFather()
{
    return $this->idOccupationFather;
}

/**
 * Set idQualificationMother
 *
 * @param Frontend\EntityBundle\Entity\MasterQualification $idQualificationMother
 */
public function setIdQualificationMother(\Frontend\EntityBundle\Entity\MasterQualification $idQualificationMother)
{
    $this->idQualificationMother = $idQualificationMother;
}

/**
 * Get idQualificationMother
 *
 * @return Frontend\EntityBundle\Entity\MasterQualification
 */
public function getIdQualificationMother()
{
    return $this->idQualificationMother;
}

/**
 * Set idOccupationMother
 *
 * @param Frontend\EntityBundle\Entity\MasterOccupation $idOccupationMother
 */
public function setIdOccupationMother(\Frontend\EntityBundle\Entity\MasterOccupation $idOccupationMother)
{
    $this->idOccupationMother = $idOccupationMother;
}

/**
 * Get idOccupationMother
 *
 * @return Frontend\EntityBundle\Entity\MasterOccupation
 */
public function getIdOccupationMother()
{
    return $this->idOccupationMother;
}

/**
 * Set idPreferredCity1
 *
 * @param Frontend\EntityBundle\Entity\MasterCity $idPreferredCity1
 */
public function setIdPreferredCity1(\Frontend\EntityBundle\Entity\MasterCity $idPreferredCity1)
{
    $this->idPreferredCity1 = $idPreferredCity1;
}

/**
 * Get idPreferredCity1
 *
 * @return Frontend\EntityBundle\Entity\MasterCity
 */
public function getIdPreferredCity1()
{
    return $this->idPreferredCity1;
}

/**
 * Set idPreferredCity2
 *
 * @param Frontend\EntityBundle\Entity\MasterCity $idPreferredCity2
 */
public function setIdPreferredCity2(\Frontend\EntityBundle\Entity\MasterCity $idPreferredCity2)
{
    $this->idPreferredCity2 = $idPreferredCity2;
}

/**
 * Get idPreferredCity2
 *
 * @return Frontend\EntityBundle\Entity\MasterCity
 */
public function getIdPreferredCity2()
{
    return $this->idPreferredCity2;
}

/**
 * Set idPreferredCity3
 *
 * @param Frontend\EntityBundle\Entity\MasterCity $idPreferredCity3
 */
public function setIdPreferredCity3(\Frontend\EntityBundle\Entity\MasterCity $idPreferredCity3)
{
    $this->idPreferredCity3 = $idPreferredCity3;
}

/**
 * Get idPreferredCity3
 *
 * @return Frontend\EntityBundle\Entity\MasterCity
 */
public function getIdPreferredCity3()
{
    return $this->idPreferredCity3;
}

/**
 * Set idBudget
 *
 * @param Frontend\EntityBundle\Entity\MasterBudget $idBudget
 */
public function setIdBudget(\Frontend\EntityBundle\Entity\MasterBudget $idBudget)
{
    $this->idBudget = $idBudget;
}

/**
 * Get idBudget
 *
 * @return Frontend\EntityBundle\Entity\MasterBudget
 */
public function getIdBudget()
{
    return $this->idBudget;
}

/**
 * Set idMode
 *
 * @param Frontend\EntityBundle\Entity\MasterMode $idMode
 */
public function setIdMode(\Frontend\EntityBundle\Entity\MasterMode $idMode)
{
    $this->idMode = $idMode;
}

/**
 * Get idMode
 *
 * @return Frontend\EntityBundle\Entity\MasterMode
 */
public function getIdMode()
{
    return $this->idMode;
}

/**
 * Set idState
 *
 * @param Frontend\EntityBundle\Entity\MasterState $idState
 */
public function setIdState(\Frontend\EntityBundle\Entity\MasterState $idState)
{
    $this->idState = $idState;
}

/**
 * Get idState
 *
 * @return Frontend\EntityBundle\Entity\MasterState
 */
public function getIdState()
{
    return $this->idState;
}

/**
 * Set idCountry
 *
 * @param Frontend\EntityBundle\Entity\MasterCountry $idCountry
 */
public function setIdCountry(\Frontend\EntityBundle\Entity\MasterCountry $idCountry)
{
    $this->idCountry = $idCountry;
}

/**
 * Get idCountry
 *
 * @return Frontend\EntityBundle\Entity\MasterCountry
 */
public function getIdCountry()
{
    return $this->idCountry;
}

/**
 * Set idHealth
 *
 * @param Frontend\EntityBundle\Entity\MasterHealth $idHealth
 */
public function setIdHealth(\Frontend\EntityBundle\Entity\MasterHealth $idHealth)
{
    $this->idHealth = $idHealth;
}

/**
 * Get idHealth
 *
 * @return Frontend\EntityBundle\Entity\MasterHealth
 */
public function getIdHealth()
{
    return $this->idHealth;
}

/**
 * Set idQualification
 *
 * @param Frontend\EntityBundle\Entity\MasterQualification $idQualification
 */
public function setIdQualification(\Frontend\EntityBundle\Entity\MasterQualification $idQualification)
{
    $this->idQualification = $idQualification;
}

/**
 * Get idQualification
 *
 * @return Frontend\EntityBundle\Entity\MasterQualification
 */
public function getIdQualification()
{
    return $this->idQualification;
}

/**
 * Set idMedium
 *
 * @param Frontend\EntityBundle\Entity\MasterMedium $idMedium
 */
public function setIdMedium(\Frontend\EntityBundle\Entity\MasterMedium $idMedium)
{
    $this->idMedium = $idMedium;
}

/**
 * Get idMedium
 *
 * @return Frontend\EntityBundle\Entity\MasterMedium
 */
public function getIdMedium()
{
    return $this->idMedium;
}

/**
 * Set idBoard
 *
 * @param Frontend\EntityBundle\Entity\MasterBoard $idBoard
 */
public function setIdBoard(\Frontend\EntityBundle\Entity\MasterBoard $idBoard)
{
    $this->idBoard = $idBoard;
}

/**
 * Get idBoard
 *
 * @return Frontend\EntityBundle\Entity\MasterBoard
 */
public function getIdBoard()
{
    return $this->idBoard;
}

/**
 * Set idUniversity
 *
 * @param Frontend\EntityBundle\Entity\MasterUniversity $idUniversity
 */
public function setIdUniversity(\Frontend\EntityBundle\Entity\MasterUniversity $idUniversity)
{
    $this->idUniversity = $idUniversity;
}

/**
 * Get idUniversity
 *
 * @return Frontend\EntityBundle\Entity\MasterUniversity
 */
public function getIdUniversity()
{
    return $this->idUniversity;
}

/**
 * Set idStream
 *
 * @param Frontend\EntityBundle\Entity\MasterStream $idStream
 */
public function setIdStream(\Frontend\EntityBundle\Entity\MasterStream $idStream)
{
    $this->idStream = $idStream;
}

/**
 * Get idStream
 *
 * @return Frontend\EntityBundle\Entity\MasterStream
 */
public function getIdStream()
{
    return $this->idStream;
} 
```

}

在validation.yml

idState: - NotBlank: { message: "请选择状态。", groups: [personalDetails] }

# javascript - Jquery 事件列表器在 iOS6 和 iOS5 下的行为不同

> ID：12608634
> 
> 赞同：2
> 
> 时间：2012-09-26T19:02:54.433
> 
> 标签：javascript, jquery, html, css, ios

几天来我一直在研究这背后的代码，我注意到虽然它在 iOS5 上按预期工作，但在单击时，这些框在 iOS6 下不会[展开](http://tympanus.net/Development/FlipboardPageLayout/)。我尝试了一些不同的方法，我能找到在 iOS6 中展开框的唯一方法是向框添加一个`<a href="#">something</a>`链接，然后从完整页面视图中单击它。这扩展了盒子，但只是点击应该扩展它的空白，根本没有做任何事情。这可能是什么原因？

# c# - 将计数和数据作为 json 返回到 extjs 网格中

> ID：12608637
> 
> 赞同：1
> 
> 时间：2012-09-26T19:03:00.003
> 
> 标签：c#, sql, asp.net-mvc, count, json

如何返回两个`Json`对象？基本上我正在尝试从 sql db 发送一堆数据和 db 中的行数。

下面的代码发送`myData`成功，但现在我也想发送`count`.

```
string sqlquery = "SELECT Q1, Q2, Q3, Q4, Improvements, Comments FROM myTable";
conn.Open();
SqlDataAdapter cmd = new SqlDataAdapter(sqlquery, conn);
SqlCommand comd = new SqlCommand(sqlquery, conn);
DataSet myData = new DataSet();
cmd.Fill(myData, "myTable");

comd.CommandText = "SELECT COUNT(*) FROM myTable";
Int32 count = (Int32)comd.ExecuteScalar();

comd.ExecuteNonQuery();
conn.Close();

return JsonConvert.SerializeObject(myData, Formatting.Indented,
                        new JsonSerializerSettings
                        {
                            ReferenceLoopHandling = ReferenceLoopHandling.Ignore
                        }); 
```

这是我的网格

```
this.grid = Ext.create('Ext.grid.Panel', {
        title: 'GridView App',
        frame: true,
        trackMouseOver: true,
        disableSelection: true,
        autoHeight: true,
        store: store,
        loadMask: true,
        columns: [

        { header: 'Q1',
            sortable: true, dataIndex: 'Q1'
        },
        { header: 'Q2',
            sortable: true, dataIndex: 'Q2'
        },
        { header: 'Q3',
            sortable: true, dataIndex: 'Q3'
        },
        { header: 'Q4',
            sortable: true, dataIndex: 'Q4'
        },
        { header: 'Improvements', flex: 1,
            sortable: true, dataIndex: 'Improvements'
        },
        { header: 'Comments', flex: 1,
            sortable: true, dataIndex: 'Comments'
        }
    ], 
```

这是我的商店...

```
var store = Ext.create('Ext.data.JsonStore', {

        storeId: 'myData',
        scope: this,
        pagesize: itemsPerPage,
        remoteSort: true,
        fields: [
    { name: 'Q1', type: 'int' },
    { name: 'Q2', type: 'int' },
    { name: 'Q3', type: 'int' },
    { name: 'Q4', type: 'int' },
    { name: 'Q5', type: 'int' },
    { name: 'Improvements', type: 'string' },
    { name: 'Comments', type: 'string' }
    ],

        sorters: [
        {
            property: 'Q1',
            direct: 'ASC'
        }
     ],

        proxy: {
            type: 'ajax',
            scope: this,
            url: 'GridView/writeRecord',
            reader: {
                type: 'json',
                root: 'myTable',
                totalProperty: 'count'
            }
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:40:28.237

这就是我的做法，我将它用于我所有的 mvc 应用程序。我在互联网上找到了这个例子（我改变了一点），因为我在办公室并且只在这里使用网络表单（我知道......这很糟糕，当你去 mvc 时你永远不会回去）

```
public class Person
    {
        public string Name { get; set; }
        public string Surname { get; set; }
    }

public class HomeController : Controller
    {

        public List<Person> personList = new List<Person>{ 
                                                        new Person{ Name="Jpnh", Surname="Coco"},
                                                        new Person{ Name="Mike", Surname="Nile"}  
                                                      };

        public ActionResult Index()
        {
            return View();
        }

        public ActionResult GetData()
        {

            return Json(personList);
        }

}

 <script type="text/javascript" language="javascript">

        $(document).ready(function () {

            $('#button').click(GetValue);

        });

        function GetValue() {
            $.ajax({
                url: "/Home/GetData",
                success: function (data) {
                    alert(data[0].Name);
                }

            });

        };

    </script> 
```

代码本身非常易于理解，我假设您从数据库中填写通用列表没有问题

让我知道

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:45:33.837

这基本上是我在 ASP.NET 应用程序中的操作方式，我也在使用 JSON.NET：

```
string sqlquery = "SELECT Q1, Q2, Q3, Q4, Improvements, Comments FROM myTable";
conn.Open();
SqlDataAdapter cmd = new SqlDataAdapter(sqlquery, conn);
SqlCommand comd = new SqlCommand(sqlquery, conn);
DataSet myData = new DataSet();
cmd.Fill(myData, "myTable");

comd.CommandText = "SELECT COUNT(*) FROM pid_FluSurvey";
Int32 count = (Int32)comd.ExecuteScalar();

comd.ExecuteNonQuery();
conn.Close();

return JsonConvert.SerializeObject( new { myTable = myData.Tables[0], count = count }, Formatting.Indented,
    new JsonSerializerSettings
    {
        ReferenceLoopHandling = ReferenceLoopHandling.Ignore
    }); 
```

这里重要的是您可以调用`SerializeObject`任何匿名类型并在那里放置您想要/需要的任意数量的属性。

# ios - 在 iOS 6.0 中调整 AdBannerView 的大小

> ID：12608638
> 
> 赞同：2
> 
> 时间：2012-09-26T19:03:04.137
> 
> 标签：ios, ios6, iad, adbannerview

使用 AdBannerView，我对如何在 iOS 6.0 下响应设备方向变化感到困惑。我以前没有使用过 iAd，但似乎早期版本中使用的相关属性和方法现在已弃用。（这些是`currentContentSizeIdentifier`和`sizeFromBannerContentSizeIdentifier:`，加上少数其他人。）

此外，两个 NSString 内容大小标识符常量已被弃用并被另外两个替代。但是没有方法的属性我可以看到它们在 iOS 6.0 中的使用位置。

有人可以提供一个简短的教程或链接来解释它在 iOS 6.0 中的工作原理吗？据我所知，不是为 iOS 6.0 编写的现有教程没有涵盖这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:11:59.060

我一直在尝试用广告更新应用程序，我自己也注意到一些非常不直观的行为。查看 4 英寸外形尺寸的横向 XIB 显示广告仅部分穿过页面，但在模拟器或设备上运行时，它的工作方式与预期相同。

至于问题，我仍在使用`currentContentSizeIdentifier`（已弃用）并将其设置为要么`ADBannerContentSizeIdentifierPortrait`或`ADBannerContentSizeIdentifierLandscape`（未弃用）。

我已经搜索了 API，但没有看到任何其他设置方法。`NSURLConnection`是另一个我使用已弃用 API 的地方，因为不存在替代 API。

# django - 模型和管理员中的 Django 字段验证？

> ID：12608639
> 
> 赞同：10
> 
> 时间：2012-09-26T19:03:03.890
> 
> 标签：django, django-models, django-admin, django-validation

我想为 Django 模型的特定字段定义自己的验证例程。我希望在管理表单中显示错误消息，但如果实体由自己的 python 代码保存，我也希望进行相同的验证。有没有办法在不违反 DRY 原则的情况下做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T22:50:55.137

如果要验证单个字段，可以[编写验证器](https://docs.djangoproject.com/en/dev/ref/validators/#writing-validators)并将其添加到模型字段中。

[`full_clean`](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.full_clean)每当调用模型的方法时，将为该字段运行验证器。它会在模型​​表单被验证时运行（包括在 Django 管理中），但它不会在模型实例被保存时自动运行——您必须`full_clean`在 python 代码中手动调用。

```
m = MyModel(x=20)
m.full_clean() # may raise ValidationError
m.save() 
```

如果您想在保存模型时强制验证器运行，那么您可以覆盖 save 方法并`full_clean`在那里调用。请注意，当使用模型表单和 django 管理员时，这将导致验证运行两次。

# c# - Listview 内的 TextBox - 在 TextBox TextChanged 上获取 ListViewItem

> ID：12608641
> 
> 赞同：1
> 
> 时间：2012-09-26T19:03:18.507
> 
> 标签：c#, wpf, xaml

我有一个`ListView`显示几个`TextBoxes`. 对于每一个`TextBox`，我都在捕捉一个`SelectionChanged`事件。

我的 XAML 文件如下所示：

```
<ListView>
    <GridView>
        ...
        <DataTemplate>
            <TextBox SelectionChanged="Box_SelectionChanged" />
        </DataTemplate>
        ...
    </GridView>
</ListView> 
```

我的 Xaml CS 文件如下所示：

```
private void Box_SelectionChanged(object sender, TextChangedEventArgs e) {} 
```

在我的`Box_SelectionChanged`函数中，我想获取`ListViewItem`更新文本框的位置。

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T19:30:16.167

你可以试试这个：

将此方法添加到您的类中：

```
public static T FindVisualParent<T>(UIElement element) where T : UIElement
        {
            UIElement parent = element; while (parent != null)
            {
                T correctlyTyped = parent as T; if (correctlyTyped != null)
                {
                    return correctlyTyped;
                }
                parent = VisualTreeHelper.GetParent(parent) as UIElement;
            } return null;
        } 
```

并在 Box_SelectionChanged 事件处理程序中调用此方法：

```
 private void Box_SelectionChanged(object sender, RoutedEventArgs e)
        {          
            var tmp = FindVisualParent<ListViewItem>(sender as TextBox);
        } 
```

# c# - 尝试使用 arraylist 时需要对象引用来访问非静态成员

> ID：12608644
> 
> 赞同：0
> 
> 时间：2012-09-26T19:03:20.863
> 
> 标签：c#

可能是什么问题呢？我收到此消息：访问非静态成员 labb3.linkClass.getLinks() 需要对象引用

```
 namespace labb3
{
    public partial class visalinks : System.Web.UI.Page
    {
        protected void Page_Load (object sender, EventArgs e)
        {
            userClass newUser = (userClass)Session["userClass"];
            ArrayList Poster = linkClass.getLinks();

            foreach (object o in Poster) {
                linkClass lnks = (linkClass)o;
                Response.Write(lnks.webbadress);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:05:22.810

您正在调用`getLinks`未声明或未初始化的变量的实例方法。该消息非常具有描述性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:05:48.957

linklClass 是您的类的名称，而 getLinks 是此类中的一个方法 - 但 getLinks 不是静态的，因此为了使用它 - 您必须创建该类的实例：

```
linkClass inst = new linkClass();
inst.getLinks() 
```

或者......如果可能的话，只需将 getLinks 设为静态即可。

# ms-access - 在 VBA 中，如何从记录集中创建表格

> ID：12608646
> 
> 赞同：1
> 
> 时间：2012-09-26T19:03:26.697
> 
> 标签：ms-access, vba

我有一个要导出为 Excel 2000 格式 (acSpreadsheetTypeExcel9) 的记录集。我相信我需要先将其放入表中，然后执行 DoCmd.TransferSpreadsheet（保持简单并且有效）。用户在表单中只设置了几个参数，因此就是**Me。**你会看到语法。

到目前为止，这是工作代码：

```
Select Case Me.Controls("frame_ChooseReport").Value
    Case 1
        sExecuteQuery = "qry_PDSR w/ Destruct Dates"
        bHasProgramCode = True
        sFileName = "Project_Doc_Submittal_Request_better"
    Case 2
        sExecuteQuery = "qry_PDSR w/Destruct Dates BE"
        bHasProgramCode = False  'This is the only query here that doesn't have a Program Code parameter
        sFileName = "Project_Doc_Submittal_Request_better_BE"
    Case 3
        sExecuteQuery = "qry_Project Documentation Submittal Request w/ Destruct Dates"
        bHasProgramCode = True
        sFileName = "Project_Doc_Submittal_Request_ENH"
    Case 4
        sExecuteQuery = "qry_Project_Doc_Submittal_Request_w_Destruct_Dates_HES_Installer"
        bHasProgramCode = True
        sFileName = "Project_Doc_Submittal_Request_Installer"
    Case Else
        Stop  'Error!  This should never be reached!
End Select
'Execute query & save output to Excel
Set qdf = CurrentDb.QueryDefs(sExecuteQuery)  'Open the query

'Assign values to the query using the parameters option
If bHasProgramCode = True Then
    qdf.Parameters(0) = Me.lbl_ProgramCodes.Section
    qdf.Parameters(1) = Me.txt_StartDate
    qdf.Parameters(2) = Me.txt_EndDate
Else
    qdf.Parameters(0) = Me.txt_StartDate
    qdf.Parameters(1) = Me.txt_EndDate
End If

sFullPath = Me.lbl_SaveTo.Caption & "\" & sFileName
Set rst = qdf.OpenRecordset  'Convert the querydef to a recordset and run it
If rst.BOF = True And rst.EOF = True Then
    MsgBox "No records were found.", vbExclamation, "Empty recordset"
    Exit Sub
End If
'Dump recordset into a table, export it to Excel, then delete it.

'Here is where the recordset needs to become a table.

DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel9, "qry_PDSR w/ Destruct Dates", sFullPath, True  'Export table to an Excel format

'Clean up!
DoCmd.DeleteObject acTable, gTEMP_TBL  'Done with the temporary table so delete it
rst.Close
qdf.Close
Set rst = Nothing
Set qdf = Nothing 
```

帮助/建议？谢谢你。

在 Windows 7 中访问 2010

**- - - - - 跟进 - - - - -**

这是我添加的查询，它将根据 Remou 的建议使用打开的表单的引用：

```
SELECT dbo_PROJECT.PROJECTID, dbo_PROJECT.TITLE, dbo_PROJECT.PROGRAMCODE, dbo_PROJECT.PROJECTTYPE, dbo_PROJECT.REFERENCE, dbo_PROJECT.STATUS, dbo_PROJECT.PMC, dbo_TRANSACTION_SUM.STATUS, dbo_TRANSACTION_SUM.IMPORTEDDT, dbo_TRANSACTION_SUM.CHECKDT, dbo_PROJECT.NOTES, dbo_TRANSACTION_SUM.TRANSACTIONID, dbo_TRANSACTION_SUM.GL_ACCT, dbo_PROJECT_SUM.PAID_INCENT_TOTAL, dbo_TRANSACTION_SUM.AMOUNT
FROM ((dbo_INCENTIVE RIGHT JOIN dbo_PROJECT ON dbo_INCENTIVE.PROJECTID = dbo_PROJECT.PROJECTID) LEFT JOIN dbo_TRANSACTION_SUM ON dbo_INCENTIVE.INCENTIVEID = dbo_TRANSACTION_SUM.INCENTIVEID) LEFT JOIN dbo_PROJECT_SUM ON dbo_PROJECT.PROJECTID = dbo_PROJECT_SUM.PROJECTID
WHERE (((dbo_PROJECT.PROGRAMCODE) In ([Forms]![Submittal_Request_Report]![txt_ListProgramCodeSelections])) AND ((dbo_TRANSACTION_SUM.CHECKDT) Between [Forms]![Submittal_Request_Report]![txt_StartDate] And [Forms]![Submittal_Request_Report]![txt_EndDate])); 
```

这是列表框的 On_Exit 事件中的例程：

```
Private Sub list_ProgramCodes_Exit(Cancel As Integer)
'Get selection from Program Code listbox and store it in a hidden textbox for the query.
Dim x As Long, sValue As String, ctlSource As Control

sValue = ""
Set ctlSource = Me!list_ProgramCodes
For x = 0 To ctlSource.ListCount - 1
    If ctlSource.Selected(x) Then
        sValue = sValue & ctlSource.Column(0, x) & ","
    End If
Next
Me.txt_ListProgramCodeSelections.Value = Left(sValue, Len(sValue) - 1)  'Drop the last comma
Set ctlSource = Nothing
End Sub 
```

效果很好！SQL 行**In ([Forms]![Submittal_Request_Report]![txt_ListProgramCodeSelections])**拉取隐藏文本框中的项目列表（使用标签不起作用），该文本框由表单上列表框中的选择填充。

现在是导出查询的代码：

```
Private Sub btn_RunReport_Click()
Dim sExecuteQuery As String, sFullPath As String, sFileName As String

On Error GoTo Err_btn_RunReport_Click
If Left(Me.lbl_SaveTo.Caption, 4) = "save" Then
    MsgBox "Please select a folder to save the results to.", vbInformation, "No folder selected"
    Exit Sub
End If

Select Case Me.Controls("frame_ChooseReport").Value
    Case 1
        sExecuteQuery = "qry_PDSR_Destruct_Dates_form"
        sFileName = "Project_Doc_Submittal_Request.xls"
    Case 2
        sExecuteQuery = "qry_Project_Doc_Submittal Request w/ Destruct Dates_form"
        sFileName = "Project_Doc_Submittal_Request_ENH.xls"
    Case 3
        sExecuteQuery = "qry_PDSR_w_Destruct_Dates_HES_Installer_form"
        sFileName = "Project_Doc_Submittal_Request_Installer.xls"
    Case Else
        Stop  'Error!  This should never be reached!
End Select
sFullPath = Me.lbl_SaveTo.Caption & "\" & sFileName
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel9, sExecuteQuery, sFullPath, True  'Export table to an Excel format

Exit_btn_RunReport_Click:
    Exit Sub

Err_btn_RunReport_Click:
    MsgBox Err.Description
    Resume Exit_btn_RunReport_Click

End Sub 
```

谢谢雷穆！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:06:20.193

我建议您只需将查询的 sql 设置为合适的字符串，然后导出查询：

```
sSQL="SELECT * FROM Table WHERE Field=" & me.MyText
If IsNull(DLookup("name", "msysobjects", "name='query1'")) Then
    CurrentDb.CreateQueryDef "Query1", sSQL
Else
    CurrentDB.QueryDefs("Query1").SQL = sSQL
End If     

DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel9, "Query1", sFullPath 
```

您可以创建引用打开表单的查询：

```
SELECT Test.ID, Test.Data
FROM Test
WHERE Test.AField=[forms]![test]![pickone] 
```

# security - REST 的 HMAC 身份验证

> ID：12608649
> 
> 赞同：2
> 
> 时间：2012-09-26T19:03:44.790
> 
> 标签：security, rest, hmac

我正在寻找基于我的 REST API 实现 HMAC

[http://www.smartjava.org/content/protect-rest-service-using-hmac-play-20](http://www.smartjava.org/content/protect-rest-service-using-hmac-play-20)

我仍然困惑的一件事是如何将秘密传递给客户。客户端将是 iphone、android 并从市场上下载

我在想的是使用用户输入的密码作为密码，服务器将通过

1) 客户端从服务器获取公钥 2) 使用公钥加密 pin 3) 服务器将 pin 存储在 db 4) 从那时起将 PIN 用作 SECRET

这有什么坑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:34:20.607

这原则上是可以的。但是，一个密码通常只有 4 位数字。攻击者获取公钥并加密所有 9999 个组合并不难。然后，他可以将他的加密密钥与来自客户端的加密数据进行比较并找到秘密。您可以通过使用 50 个随机字符填充 pin 来避免此问题。服务器必须解密填充的数据并简单地丢弃最后 50 个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T21:12:02.557

有一个洞。

在第 3 步，将 PIN 存储在数据库中。服务器无法知道保存 PIN 的请求来自合法用户。

为此，您必须保存 PIN 码：

*   创建帐户时
*   提供旧 PIN 时

话虽如此，PIN 仍然非常脆弱且容易破解。平均而言，大约 5000 次尝试会猜出一个 4 位数的密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:06:53.997

我不是安全专家，但如果客户端随每个请求发送随机种子怎么办？客户端和服务器都将使用此种子生成基于共享算法的密钥。但是，我不确定给定种子和返回的哈希之间的关系有多容易受到攻击。

# asp.net - 将文件附加到 System.Net.Mail.MailMessage 时出现 System.InvalidOperationException 错误

> ID：12608650
> 
> 赞同：0
> 
> 时间：2012-09-26T19:03:48.053
> 
> 标签：asp.net, email

将一个或多个文件`System.Net.Mail.MailMessage`从 ASP.NET 页面附加到对象时出现奇怪的错误。

我为用户请求的每个附加文件创建`List(Of Attachment)`并添加新对象。`Attachment`这些是驻留在 Web 服务器文件系统上的文件。例如，代码看起来类似于下面的代码，但它没有硬编码文件路径，而是从数据库中获取它们。但是在调试时，我看到文件路径是有效的，指向我可以从资源管理器中查看的现有文件，给定完整的文件路径或使用虚拟地址（例如~/Documents/resume.pdf）的网站。

```
Dim attachments As New List(Of Attachment)
attachments.Add(New Attachment("C:\Websites\Documents\resume.pdf"))
attachments.Add(New Attachment("C:\Websites\Documents\map.png"))
... 
```

构建附件集合后，我发送电子邮件，将每个`Attachment`对象添加到`Attachments`集合中，如下所示：

```
Dim message As MailMessage = New MailMessage(from, toAddress, subject, body)

If attachments IsNot Nothing Then
    For Each att As Attachment In attachments
        message.Attachments.Add(att)
    Next
End If

Dim mailClient As SmtpClient = New SmtpClient
mailClient.Send(message) 
```

但是，当我运行代码时，出现以下错误：

### System.InvalidOperationException：其中一个流已被使用，无法重置为原点。

```
System.Web.HttpUnhandledException: Exception of type 'System.Web.HttpUnhandledException' was thrown. ---> System.Net.Mail.SmtpException: Failure sending mail. ---> System.InvalidOperationException: One of the streams has already been used and can't be reset to the origin.
   at System.Net.Mime.MimePart.ResetStream()
   at System.Net.Mail.Attachment.PrepareForSending()
   at System.Net.Mail.MailMessage.SetContent()
   at System.Net.Mail.MailMessage.Send(BaseWriter writer, Boolean sendEnvelope)
   at System.Net.Mail.SmtpClient.Send(MailMessage message)
   --- End of inner exception stack trace ---
   ... 
```

我尝试将基于数据库查询添加附件的逻辑替换为添加具有硬编码文件路径的单个文件的逻辑。我尝试过使用不同的 SMTP 客户端（我的网络主机提供商的 SMTP 服务器和 GMail）。无论如何，我都会遇到同样的错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:58:18.230

找到了答案......问题是因为我试图使用相同的附件集合发送两封单独的电子邮件。

电子邮件发送逻辑在一个函数中，调用如下：

```
SendEmail(from, to, subject, body, attachments)

If SomethingOrOther Then
   SendEmail(from, someoneElse, subject, body, attachments)
End If 
```

我的（俗气的）解决方法是只创建两个附件列表，一个用于第一次调用 SendEmail，另一个用于第二次调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T22:10:14.940

我认为更好的解决方案是将您的消息对象设置为空，并将您的客户端选项设置为空，然后再循环返回第二条消息。祝你好运！

# javascript - 是否可以通过检索 iframe 的源参数来更新隐藏表单字段的值？

> ID：12608652
> 
> 赞同：0
> 
> 时间：2012-09-26T19:03:55.180
> 
> 标签：javascript, jquery, forms

```
<script>
            /* source parameters */
                    function GetURLParameter(sParam)
                    {
                        var sPageURL = window.location.search.substring(1);
                        var sURLVariables = sPageURL.split('&');
                        for (var i = 0; i < sURLVariables.length; i++)
                        {
                            var sParameterName = sURLVariables[i].split('=');
                            if (sParameterName[0] == sParam)
                            {
                                return sParameterName[1];
                            }
                        }
                    }
                    var mysrc = GetURLParameter("externalsrc");
                    if(mysrc == null) {
                        mysrc='another_site';
                        }
                    var objHidden = document.getElementById("externalsrc");
                    objHidden.value = mysrc;
</script> 
```

以前，当我直接在我的站点的 HTML 页面中硬编码表单代码时，我曾经使用上面的代码。上面的代码很容易从地址栏中检查 url 参数，并将 externalsrc 的值赋予表单字段的值。现在，我创建了一个可在外部其他地方使用的便携式 iframe 小部件。我想更新`<input type="hidden" externalsrc="" value"" />`iframe 的 extsrc 参数的值。

这是 iframe 代码的示例：

```
<iframe src="http://www.example.com/joinuswidget.html?externalsrc=mywidget" marginheight="0" marginwidth="0" frameborder="0" height="350" scrolling="no" width="190"></iframe> 
```

我希望我的表单的 externalsrc 值是直接取自 iframe 源的“mywidget”。可能吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:44:39.713

有关如何将字符串转换为位置的信息，请参阅此问题：[Creating a new Location object in javascript](https://stackoverflow.com/questions/3213531/creating-a-new-location-object-in-javascript)

```
function convertStringToLocation(str) {
  var url = document.createElement('a');
  url.href = str;

  return url;
} 
```

然后更新您的 GetURLParameter 函数以接受任何 url：

```
function GetURLParameter(url, sParam) {
  var sPageURL = url.search.substring(1);
  // Everything past here is the same
} 
```

最后从 iframe 中获取 src：

```
var iframe = document.getElementById('myiframe');
var input = document.getElementById('externalsrc');
var url = convertStringToURL(iframe.src);
input.value = GetURLParameter(url, "externalsrc"); 
```

# python - 如何重复获取用户输入直到我想退出？

> ID：12608654
> 
> 赞同：-1
> 
> 时间：2012-09-26T19:04:00.517
> 
> 标签：python, user-input

我想多次获取用户输入并将输入数据一起存储在一个字符串中，直到输入“quit”退出输入。我认为 for 循环可以工作，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T19:06:00.403

```
while True:
    user_input = raw_input("Enter something:")
    if user_input == "quit":
        break 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T19:08:02.950

尝试这个：

```
input_string = ''
while 1:
    input = raw_input('Add to string: ')
    if input == 'quit': break
    input_string += input 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:10:03.683

```
while True:
    input = raw_input('Prompt')
    print input
    if (input == 'quit'):
        break; 
```

# wpf - DataGrid 列宽同步

> ID：12608657
> 
> 赞同：0
> 
> 时间：2012-09-26T19:04:01.697
> 
> 标签：wpf

我有一个列表框，其中项目是水平构建的。

我还有一个 DataGrid，它的列是动态构建的。

每个 ListBoxItem 对应一个 DataGrid 列

我想在 DataGrid Column 和正确的 ListBoxItem 之间进行同步，因此每个 ListBoxItem 都将与一个列平行。此外，在调整列大小时，它会更改 ListBoxItem 的大小。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:28:07.160

您可以将项目宽度与数据网格列实际宽度绑定

```
 <StackPanel Grid.Column="1" Orientation="Vertical">
            <DataGrid Grid.IsSharedSizeScope="True">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Some col 1" x:Name="first"  />
                    <DataGridTextColumn Header="Some col 2" x:Name="second" />
                    <DataGridTextColumn Header="Some col 3" />
                </DataGrid.Columns>

            </DataGrid>

            <ListBox>
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel IsItemsHost="True" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <Button Content="button 1" Width="{Binding Path=ActualWidth, ElementName=first}"></Button>
                <Button Content="button 2" Width="{Binding Path=ActualWidth, ElementName=second}"></Button>
            </ListBox>
        </StackPanel> 
```

如果您动态创建它们，请在代码中设置绑定。

# oracle - 尝试提交 jms 事务时 xa_commit 失败

> ID：12608664
> 
> 赞同：1
> 
> 时间：2012-09-26T19:04:27.770
> 
> 标签：oracle, jms, websphere, ibm-mq, xa

我们正在尝试将消息写入代理队列。但是，当它尝试提交 JMS 事务时，整个请求都失败了，然后它每次都尝试回滚。我们使用 oracle XA 驱动程序。不确定在哪里发布此问题：MQ 论坛或 Oracle 论坛。所以想在这里试一试。有人可以帮助解决这个问题。

错误：

```
[9/25/12 17:10:06:871 EDT] 0000003e XATransaction E   J2CA0027E: An exception occurred while invoking commit on an XA Resource Adapter from dataSource JMS$QCF$JMSManagedConnection@23, within transaction ID {XidImpl: formatId(57415344), gtrid_length(36), bqual_length(54), data(00000139ff43ef2500000001000043106c82332ef6bc723402e84f341fb357080ddd4d1b00000139ff43ef2500000001000043106c82332ef6bc723402e84f341fb357080ddd4d1b000000010000000000000000000000000001)}: javax.transaction.xa.XAException: The method 'xa_commit' has failed with errorCode '-7'.
    at com.ibm.mq.jmqi.JmqiXAResource.commit(JmqiXAResource.java:407)
    at com.ibm.ejs.jms.JMSManagedSession$JMSXAResource.commit(JMSManagedSession.java:1702)
    at com.ibm.ejs.j2c.XATransactionWrapper.commit(XATransactionWrapper.java:463)
    at com.ibm.ws.Transaction.JTA.JTAXAResourceImpl.commit_one_phase(JTAXAResourceImpl.java:305)
    at com.ibm.ws.Transaction.JTA.RegisteredResources.flowCommitOnePhase(RegisteredResources.java:2916)
    at com.ibm.ws.Transaction.JTA.TransactionImpl.commitXAResources(TransactionImpl.java:2533)
    at com.ibm.ws.Transaction.JTA.TransactionImpl.stage1CommitProcessing(TransactionImpl.java:1687)
    at com.ibm.ws.Transaction.JTA.TransactionImpl.processCommit(TransactionImpl.java:1647)
    at com.ibm.ws.Transaction.JTA.TransactionImpl.commit(TransactionImpl.java:1582)
    at com.ibm.ws.Transaction.JTA.TranManagerImpl.commit(TranManagerImpl.java:247)
    at com.ibm.ws.Transaction.JTA.TranManagerSet.commit(TranManagerSet.java:168)
    at com.ibm.ws.Transaction.JTA.UserTransactionImpl.commit(UserTransactionImpl.java:293)
    at org.springframework.transaction.jta.JtaTransactionManager.doCommit(JtaTransactionManager.java:1009)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:255)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1002)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:901)
    at org.springframework.scheduling.commonj.DelegatingWork.run(DelegatingWork.java:61)
    at com.ibm.ws.asynchbeans.J2EEContext$RunProxy.run(J2EEContext.java:264)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.ibm.ws.asynchbeans.J2EEContext.run(J2EEContext.java:1137)
    at com.ibm.ws.asynchbeans.WorkWithExecutionContextImpl.go(WorkWithExecutionContextImpl.java:195)
    at com.ibm.ws.asynchbeans.CJWorkItemImpl.run(CJWorkItemImpl.java:187)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1560)
.
[9/25/12 17:10:06:880 EDT] 0000003e RegisteredRes W   WTRN0052E: An attempt by the transaction manager to call one phase commit on a transactional resource has resulted in an XAER_RMFAIL error. The resource was com.ibm.ws.Transaction.JTA.JTAXAResourceImpl@1d07bf1#{XidImpl: formatId(57415344), gtrid_length(36), bqual_length(54), data(00000139ff43ef2500000001000043106c82332ef6bc723402e84f341fb357080ddd4d1b00000139ff43ef2500000001000043106c82332ef6bc723402e84f341fb357080ddd4d1b000000010000000000000000000000000001)}
[9/25/12 17:10:06:887 EDT] 0000003e DefaultMessag W org.springframework.jms.listener.DefaultMessageListenerContainer handleListenerSetupFailure Setup of JMS message listener invoker failed for destination 'queue:///RANDOM QUEUE?targetClient=1' - trying to recover. Cause: Heuristic completion: outcome state is mixed; nested exception is javax.transaction.HeuristicMixedException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:29:46.887

[这](http://www-01.ibm.com/support/docview.wss?uid=swg21508472)是原因和解决方法

引用-

> 这些错误的原因通常是 WebSphere MQ 消息传递提供程序 JMS 连接被 WebSphere Application Server 关闭的结果，因为连接的过期超时已过期。

解析度-

> 要解决此问题，请确保应用程序使用的 JMS 连接工厂将连接池属性**老化超时** 设置为零。这将防止 JMS 连接在返回到空闲池时被关闭，从而确保可以完成任何未完成的事务工作

它有时也是由有故障的 DataDirect 驱动程序引起的，由 IBM 报告并修复，请参阅[此](http://www-01.ibm.com/support/docview.wss?uid=swg1IC70069)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:18:23.570

之前我们有多个 JMS 会话。这可能是其中一种环境中出现问题的原因。所以我们不得不更改为 2 diff。会议和现在它的作品！

朱利安：

我的场景与你的略有不同。早些时候我们有：

A request message was put on the queue. This queue was picked up & processed. Then we saved to the DB & then generated another message & put it on another broker queue & then sent a response to the first message. All this was 1 flow.

Now we changed that to 2 diff. flows : Request --> Process --> Save to DB --> Reply and then another flow to put on Broker queue.

Hope this helps

# c# - 使用 xmlserializer 反序列化子元素

> ID：12608671
> 
> 赞同：0
> 
> 时间：2012-09-26T19:04:51.390
> 
> 标签：c#, xmlserializer

我正在尝试反序列化此结构的 xml 文件，但是当我调用此方法时

`XmlSerializer(responseType).Deserialize(new MemoryStream(responseData))`

没有一个 PricingQuote 子元素通过

```
<Pricing>
 <Code>Success</Code>
 <PricingQuotes> 
  <PricingQuote>
    <ProductName>Conforming 30 Year Fixed</ProductName>
  </PricingQuote>
  <PricingQuote>
    <ProductName>Conforming 20 Year Fixed</ProductName>
  </PricingQuote>
 </PricingQuotes> 
</Pricing> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:11:12.800

您需要确保您的类定义与传入的 XML 匹配。下面的那些这样做，反序列化按预期工作。

```
public class StackOverflow_12608671
{
    const string XML = @"<Pricing> 
                            <Code>Success</Code> 
                            <PricingQuotes>  
                                <PricingQuote> 
                                    <ProductName>Conforming 30 Year Fixed</ProductName> 
                                </PricingQuote> 
                                <PricingQuote> 
                                    <ProductName>Conforming 20 Year Fixed</ProductName> 
                                </PricingQuote> 
                            </PricingQuotes>  
                        </Pricing> ";

    public class Pricing
    {
        public string Code { get; set; }
        public List<PricingQuote> PricingQuotes { get; set; }
    }
    public class PricingQuote
    {
        public string ProductName { get; set; }
    }
    public static void Test()
    {
        MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(XML));
        XmlSerializer xs = new XmlSerializer(typeof(Pricing));
        Pricing p = (Pricing)xs.Deserialize(ms);
        foreach (var q in p.PricingQuotes)
        {
            Console.WriteLine(q.ProductName);
        }
    }
} 
```

# objective-c - Objective-C：自定义设置器中的 if 语句

> ID：12608672
> 
> 赞同：2
> 
> 时间：2012-09-26T19:05:07.220
> 
> 标签：objective-c, getter-setter

自定义设置器中 if 语句的目的是什么？我在示例代码中经常看到这个例程。提供使用 ARC，为什么还要检查相等性？

```
- (void)setPhotoDatabase:(UIManagedDocument *)photoDatabase
{
    if (_photoDatabase != photoDatabase) {
        _photoDatabase = photoDatabase;
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:11:14.670

重要的部分通常是更改之后的内容（中的内容`...`）：分配新值后的副作用，这可能非常昂贵。

限制这些更改以避免触发不必要且可能非常昂贵的副作用是一个好主意。假设您更改了一个文档，那么您可能需要更改与该文档相关的大部分用户界面，以及模型更改。

检查条件后，大量不必要的/更改工作可能会短路，最终可能会避免进行不必要的更改。

这种不必要的副作用很容易使您的应用程序在 CPU、绘图、对象创建、写入磁盘方面的实际工作黯然失色——几乎任何事情。

信不信由你，许多应用程序确实执行了大量不必要的工作，即使它们设计得非常好。基于视图的渲染系统中的绘图和 ui 更新可能是我能想到的最好的例子。在该领域中，*可以*实施大量细节来最大程度地减少冗余绘图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:08:26.613

覆盖和实现自定义设置器的主要原因之一是执行附加代码以响应属性的更改。如果属性实际上没有改变，为什么要执行该代码？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:12:49.903

答案通常在`...`您注释掉的部分中：当那里什么都没有时，代码没有意义。然而，在那个地方有一个典型的事情是你自己的代表的某种通知，像这样：

```
[myDelegate photoDatabaseDidChanged:photoDatabase]; 
```

`photoDatabase`除非确实发生了变化，否则不应调用此方法。调用可能很昂贵，从“昂贵”到“非常昂贵”，取决于代表的实际工作。它可以使用新库中的图像更新屏幕，也可以将新图像保存到云中。如果不需要报告更改，您可能会浪费 CPU 周期以及电池和网络带宽。您的代码无法知道委托将要做什么，因此您需要避免回调，除非确实发生了更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T19:09:10.140

如果检查相等性，则可以防止传递给方法的参数的冗余分配。

这样，如果您的示例方法中的 photoDatabase 没有更改，您就可以避免在括号内执行所有代码的成本（即使它很小）。

Ex（扩展您的示例）：

```
- (void)setPhotoDatabase:(UIManagedDocument *)photoDatabase
{
    if (_photoDatabase != photoDatabase) 
    {
        _photoDatabase = photoDatabase;

        // do stuff
        // do more stuff
        // do even more stuff
        // do something really expensive
    }
} 
```

从示例中可以看出，如果您首先检查 photoDatabase 是否不等于传入的内容，您可以退出该方法而不运行不必要的其他代码。

# c++ - Char 分配给整数指针地址的指针地址

> ID：12608676
> 
> 赞同：0
> 
> 时间：2012-09-26T19:05:23.810
> 
> 标签：c++, c, pointers

至少我认为，我正在尝试做一些非常简单的事情，但没有成功。我想将整数指针指向的地址分配给 char 指针指向的地址。例子

```
//C++

int *pointerint;
char *pointerchar;
pointerchar = pointerint;

// 
```

我试图以几种不同的方式来做这件事，但没有成功。

例子：

```
pointerchar = (char *) &pointerint; 
```

编译器将其排除在外，但分配给指针的地址为零。那不可能是正确的。谁能告诉我如何正确执行此操作以及我做错了什么。提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:08:31.387

现在您有了 C 答案，下面是 C++ 答案：

```
int *pointerint;  
char *pointerchar;
//initialize pointerint
pointerchar = reinterpret_cast<char*>(pointerint); 
```

请注意，如果您不初始化`pointerint`，您将遇到未定义的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T19:06:14.773

尝试（如果 C）：

```
pointerchar = (char *) pointerint; 
```

# ios - 为什么我无法重建 zendesk_ios_sdk？

> ID：12608677
> 
> 赞同：1
> 
> 时间：2012-09-26T19:05:23.967
> 
> 标签：ios, static-libraries, armv7, zendesk

我将 XCode 更新到最新版本（4.5）。当我尝试编译我的项目时，控制台给了我这个错误：

> ld：文件是通用的（2 个切片）但不包含 a(n) armv7s 切片：/Users/myuser/Documents/MyProjectDirectory/libZendeskDropbox.a 用于架构 armv7s

所以我[从 githu](https://github.com/zendesk/zendesk_ios_sdk) b 下载了 zendesk_ios_sdk 源代码，并按照自述文件中的说明进行操作，在第三步我得到了这个错误：

> 无法打开输入文件：/Users/myuser/Library/Developer/Xcode/DerivedData/ZendeskDropboxIOS-cnginhrdnonxxrantdlwohdmmdot/Build/Products/Debug-iphoneos/../Release-iphonesimulator/libZendeskiPhoneSimulator.a（没有这样的文件或目录）

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:17:42.660

我刚刚从 Github 下载了源代码，似乎用于组合库的脚本需要发布版本，但该项目设置为为 ZendeskiPhone 和 ZendeskiPhoneSimulator 方案进行调试构建

编辑 ZendeskiPhone 和 ZendeskiPhoneSimulator 方案的方案，使构建配置为 Release，然后再次按照说明操作（下面的屏幕截图）

![编辑方案](../Images/f70525b8ccfe4a5246d9d3384da9e830.png)

![选择项目](../Images/01f827a221c128a2624ba285e2bf6d0d.png)

![更改为发布](../Images/616ca0d3f7797094857a7b39a911d9fa.png)

# javascript - 一个简单的 GetElementById 问题真的很简单

> ID：12608679
> 
> 赞同：2
> 
> 时间：2012-09-26T19:05:33.960
> 
> 标签：javascript

真的很简单，但我从 javascript 开始，所以应该很快解决

我有这个html：

```
<body>
<div id="content">
        <div id="logo">
            <noscript>
            <img src="fin_palais.png"/>
            </noscript>
        </div>
</div>
</body> 
```

我想用javascript选择id为“logo”的div，然后`<noscript>`用适当的文件覆盖（一个简单的浏览器测试，看看你是否可以支持SVG）这个innerHTML看起来像这样：

```
document.getElementById('logo').innerHTML='<content to be added>'; 
```

Firebug 向我发送此错误：*TypeError: document.getElementById("logo") is null* 但它就在那里！谢谢

好的，这是完整的 HTML：

```
<html>
<head>
    <META CHARSET="UTF-8">
    <title>Bienvenu au Fin Palais</title>
    <script type="text/javascript" src="svg_support.js"></script>
    <script type="text/javascript">getSvgSupport("fin_palais")</script>
</head>
<body>
<div id="content">
        <div id="logo">

            <noscript>
            <img src="fin_palais.png"/>
            </noscript>
        </div>
</div>
</body>
</html> 
```

这是我制作的完整的 svg_support.js；

```
function getSvgSupport(file)
            {

                var ua = navigator.userAgent;
        if( ua.indexOf("Android") >= 0 )
            {
          var androidversion = parseFloat(ua.slice(ua.indexOf("Android")+8)); 
          if (androidversion <= 2.3)
                {
                document.getElementById('logo').innerHTML='<img src="',file,'.png"/>';

                }

            } else {
                document.getElementById('logo').innerHTML='<!--[if lt IE 9]><img src="',file,'.png"/><![endif]--><!--[if gte IE 9]><!--><embed src="',file,'.svg" type="image/svg+xml" /><!--<![endif]-->';
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:12:27.907

是的，这是唯一的原因，而且由于您似乎对 javascript 很陌生，我想这对您来说更有意义

```
window.onload=function(){
document.getElementById('logo').innerHTML='<content to be added>';
} 
```

您会看到脚本运行时您的页面尚未加载。所以你必须使用window.onload。

或者，如果您的代码在 file.js 中，您也可以使用它：

```
<script defer src="file.js"> </script> 
```

这确保您的代码不会运行，除非文档被解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:07:39.907

您可能正在尝试在 DOM 完成加载之前运行 javascript。试试这个：

```
$(document).ready(function(){document.getElementById('logo').innerHTML='<content to be added>';}); 
```

这假设您已经包含了 jQuery。

正如@Thristhart 所说，您也可以使用`window.onload`. 这是一个内置的 javascript 事件，发生在之后`$(document).ready()`，所以你也应该安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:10:42.103

如果使用 JQuery：

```
$(document).ready(function(){
    $('div#logo').html('<content to be added>');
}); 
```

或者

```
$(function(){
    $('div#logo').html('<content to be added>');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T19:13:24.037

如果您不想加载 jQuery，您不必加载 jQuery，这似乎与 javascript 的链接有关。当我把它拆开时，它工作得很好。

小提琴：http: [//jsfiddle.net/DamianHall/GxghG/](http://jsfiddle.net/DamianHall/GxghG/)

```
var ele = document.getElementById('logo');

ele.innerHTML = 'content to be added'; 
```

查看其他帖子，这是一个加载问题。JS fiddle 为我做了 onload，所以我没有注意到。​</p>

# ruby-on-rails - 如何通过 Rails 中的另一个模型访问关联模型？

> ID：12608683
> 
> 赞同：2
> 
> 时间：2012-09-26T19:05:46.007
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

更新（具体和更详细的先前版本如下）：

我正在开发一个电视台网站。以下是我的程序部分的要求：

1.  每个`Program`都有一个`Category`。
2.  每个`Program`都有一个`Subcategory`。
3.  每个`Category`都有很多`Subcategories`
4.  每个`Category`都有很多`Programs`。
5.  每个`Subcategory`都有一个`Category`
6.  每个`Subcategory`都有很多`Program`。

我想检索所有这三个要关联的模型。例如，我应该能够从我的视图中检索以下数据：

尽管：

```
p = Program.find(1)
p_cat = ProgramCategory.find(1)
p_subcat = ProgramSubcategory.find(1) 
```

我应该能够检索并编辑这些：

```
p.program_category
p.program_subcategory 
```

或者

```
program_category.programs
program_subcategory.programs 
```

您可以在下面看到我为实现这些要求所做的尝试。您可能会向我推荐一种完全不同的方式或纠正我的错误。

谢谢

==================================================== ==========

我有 3 个模型。它们应该嵌套在彼此中。

> 程序类别 > 程序子类别 > 程序

这是我的代码：

程序类别模型：

```
 has_many :programs
 has_many :program_subcategories 
```

程序子类别模型：

```
belongs_to :program_category
has_many :programs 
```

程序模型：

```
belongs_to :program_category
belongs_to :program_subcategory 
```

当我创建一个新程序时，我可以设置它的类别，一切都很好。我可以从两侧访问它们。例如，

```
program.program_category 
```

给了我我所期望的。并且

```
program_category.programs 
```

也给了我想要的东西。

但是，-*问题来了*-

当我尝试访问`program.program_subcategory`时，我只收到零。

即使设置了我的子类别的类别，也设置了我的程序类别，为什么我不能`program.program_subcategory`直接访问？

当我输入 时`program_category.program_subcategories`，我会收到该类别拥有的所有子类别。但我不能直接从`Program`对象中获取子类别。

我的方案如下。任何帮助都会得到帮助。

```
ActiveRecord::Schema.define(:version => 20120926181819) do

  create_table "program_categories", :force => true do |t|
    t.string   "title"
    t.text     "content"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "program_subcategories", :force => true do |t|
    t.integer  "program_category_id"
    t.string   "title"
    t.text     "content"
    t.datetime "created_at",          :null => false
    t.datetime "updated_at",          :null => false
  end

  add_index "program_subcategories", ["program_category_id"], :name => "index_program_subcategories_on_program_category_id"

  create_table "programs", :force => true do |t|
    t.integer  "program_category_id"
    t.integer  "program_subcategory_id"
    t.string   "title"
    t.text     "content"
    t.datetime "created_at",             :null => false
    t.datetime "updated_at",             :null => false
  end

  add_index "programs", ["program_category_id", "program_subcategory_id"], :name => "my_join1", :unique => true

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:08:39.113

设计有点奇怪。如果您需要嵌套

```
ProgramCategory > ProgramSubcategory > Program 
```

那么你需要

```
class Program < ActiveRecord::Base
  belongs_to :program_subcategory
end

class ProgramSubcategory < ActiveRecord::Base
  belongs_to :program_category
  has_many :programs
end

class ProgramCategory < ActiveRecord::Base
 has_many :programs, :through => :program_subcategories
 has_many :program_subcategories
end 
```

这样，当您创建程序时，您可以为其分配子类别。并且这个子类别已经分配给类别，所以你可以通过`program.program_subcategory.program_category`

而且您不需要`program_category_id`外键，`programs`因为程序不是*直接*连接到类别，而是通过子类别。

* * *

**更新**

> 1.  每个程序都有一个类别。
> 2.  每个程序都有一个子类别。
> 3.  每个类别都有许多子类别
> 4.  每个类别都有许多程序。
> 5.  每个子类别都有一个类别
> 6.  每个子类别都有许多程序。

那么我相信我的回答仍然有效。你看，我的结构和你的描述一样，除了`Each Program has ONE Category`（因为 rails 没有`belongs_to through`）。你`has one`实际上是`belongs_to`（因为它只能属于一个）。

但是一旦`Each Program has ONE Subcategory`和`Each Subcategory has ONE Category`节目的子类别的类别将是唯一节目的类别。您可以`p.program_category`通过在 Program 类上定义方法来获得：

```
def program_category
  program_subcategory.program_category
end 
```

* * *

现在对于

> 我应该能够检索并编辑这些：
> 
> p.program_category

想象一下，您有一个属于电影类别的喜剧子类别的节目。

您说您希望能够直接编辑程序类别（如果我理解正确的话），如下所示：

```
p.program_category = ProgramCategory.find_by_name("Sports") 
```

但是你期望成为程序的子类别呢？体育有很多子类别吗？你希望它是空白的吗？

所以在这个设计中，改变程序类别的唯一方法是改变程序的子类别：

```
p.program_subcategory = ProgramSubcategory.find_by_name("Tennis") 
```

而这将manke节目的类别==体育，因为网球属于体育。

**注意：**如果您有时真的想直接更改程序的类别，将其子类别留空当然需要另一种设计。我不认为这很困难，但它需要更多的工作，而 Rails AR Associations 的魔法帮助更少。

# c - 输入带度数的数字

> ID：12608688
> 
> 赞同：0
> 
> 时间：2012-09-26T19:05:53.387
> 
> 标签：c, input, numbers

帮助解决问题：我需要编写 C++ 程序，该程序使用运算符`printf`和. 输入和显示数字变量`scanf`。这些值为：

```
E = 10 ^ 3
 F = -450
 H = 0,005 * 10 ^ 2
 X = -43,562 * 10 ^ (-3)
 I = 75600
 Y = -0,00036 
```

但我不明白我必须如何输入`10 ^ 3`和其他......目前我的代码是......

```
#include <stdio.h>
#include <conio.h>
main()
{
    int E;
    int F;
    puts("Введите значения E и F");
    scanf("%d,%d", &E,&F);
    printf("Значение E=%2d\n",E);
    printf("Значение F=%4d\n",F);
    puts("-----------------------------");
    float H;
    float X;
    int I;
    float y;
    puts("Введите значение  I");
    puts("Введите значение H, X, Y");

    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:14:13.837

If I understood your question correctly, the answer is: use scientific notation

`10 ^ 3` becomes `1e3`, `0.005 * 10 ^ 2` becomes `0.005e-2` and so on

# c# - LINQ 查询中的三元运算符

> ID：12608690
> 
> 赞同：2
> 
> 时间：2012-09-26T19:05:57.223
> 
> 标签：c#, linq, dynamics-crm-2011

我有一个 LINQ 查询，我需要在其上使用三元运算符，以便根据某些条件使用某些连接。所以这是我的查询。

```
var lData = (from r in gServiceContext.CreateQuery("campaignresponse")
             join a in gServiceContext.CreateQuery("activityparty") on ((EntityReference)r["activityid"]).Id equals ((EntityReference)a["activityid"]).Id

             //tenary statement here 
             join c in gServiceContext.CreateQuery("contact") on ((EntityReference)a["partyid"]).Id equals c["contactid"]

              where ((EntityReference)r["new_distributorid"]).Id.Equals(lProfileProperty.PropertyValue)
              select new
          {
              }); 
```

这就是我想做的。

**如果 r["new_distributorid"] == 1 我需要使用：**

```
join c in gServiceContext.CreateQuery("contact") on ((EntityReference)a["partyid"]).Id equals c["contactid"] 
```

**如果 r["new_distributorid"] == 2 那么我需要使用：**

```
join c in gServiceContext.CreateQuery("account") on ((EntityReference)a["partyid"]).Id equals c["accountid"] 
```

**如果 r["new_distributorid"] == 3 那么我需要使用：**

```
join c in gServiceContext.CreateQuery("lead") on ((EntityReference)a["partyid"]).Id equals c["leadid"] 
```

所以基本上是 new_distributor == 1 我需要使用某个连接，如果它是 2 我需要另一个连接，如果它是 3 我需要另一个连接。

这可能吗？如果是，我将如何设置它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:37:02.047

改变的只是一个字符串值，所以在开始定义查询之前确定该字符串值：

```
string tableName = "";

switch(r["new_distributorid"])
{
  case(1): 
    tableName = "contact";
  case(2): 
    tableName = "account";
  case(3): 
    tableName = "lead";
}

string tableID = tableName + "id";

//...
join c in gServiceContext.CreateQuery(tableName) 
on ((EntityReference)a["partyid"]).Id equals c[tableID] 
```

# objective-c - NSURLConnection，跟踪哪个连接正在返回数据

> ID：12608694
> 
> 赞同：0
> 
> 时间：2012-09-26T19:06:16.320
> 
> 标签：objective-c, ios, design-patterns, nsurlconnection, nsmutabledictionary

对于我正在开发的 iOS 应用程序，我目前正在编写一个单例类来处理对服务器的异步请求。这是其中一种方法的示例-

```
- (void)registerUser:(CBCUserRegistration *)userRegistration delegate:(id)<CBCUserRegistrationDelegate>delegate; 
```

在这个方法中，一个 NSURLConnection 被创建并发送一个异步请求。此时，我需要一种将委托对象绑定到 NSURLConnection 的方法，所以当

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data; 
```

被调用，我知道要通知哪个代表。因为请求是异步的，所以任何时候都可能有多个请求。我最初的想法是使用 NSMutableDictionary，将 NSURLConnection 设置为键，将委托设置为值，但是键被复制了，所以这是不行的。谁能建议另一种方法来跟踪这个？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:20:45.690

避免为此使用 NSDictionary。而是采用面向对象的方法：

编写一个`MyConnection`实现所需`NSURLConnectionDelegate`回调并具有该类型的属性/ivar 的`id<CBCUserRegistrationDelegate>`类。添加一个`start`方法来`MyConnection`创建一个`NSURLConnection`，为自己分配该连接的委托，然后启动它。`MyConnection`现在您可以为您执行的每个 URL 请求创建一个实例。`MyConnection`保持`CBCUserRegistrationDelegate`并转发它从 . 收到的结果`NSURLConnection`。

但是，在这里使用委托有点过时。改用块，特别是如果您的项目使用 ARC。`NSURLConnection`提供了一种方便的方法来执行异步请求：`[NSURLConnection sendAsynchronousRequest:queue:completionHandler:]`.

例如：

```
- (void)registerUser:(CBCUserRegistration *)userRegistration delegate:(id<CBCUserRegistrationDelegate>)delegate
{
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://mysite.com/register"]];
    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue]
                           completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        [delegate processRegistrationResponseData:data];
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:19:06.467

使用设置为 NSURLConnection 的地址的 NSNumber 作为键，然后您可以设置另一个字典作为键的对象。你可以给它起一个名字等，记录要通知的对象等。只要记住在释放 NSURLConnection 时删除它。

# c# - 如何管理 ado.net 事务

> ID：12608696
> 
> 赞同：1
> 
> 时间：2012-09-26T19:06:25.493
> 
> 标签：c#, ado.net, transactions

我不确定在代码中管理此事务的好方法是什么。

说我有以下

服务层（非静态类） 存储层（静态类）

**// 服务层类**

```
/// <summary>
/// Accept offer to stay
/// </summary>
public bool TxnTest()
{
    using (SqlConnection conn = new SqlConnection(ConnectionString))
    {
        conn.Open();
        SqlTransaction txn = conn.BeginTransaction();

        using (SqlCommand cmd = conn.CreateCommand())
        {
            cmd.Transaction = txn;

            try
            {
                DoThis(cmd);
                DoThat(cmd);

                txn.Commit();
            }
            catch (SqlException sqlError)
            {
                txn.Rollback();
            }
        }
    }
} 
```

**// 回购类**

```
 /// <summary>
    /// Update Rebill Date
    /// </summary>
    public static void DoThis(SqlCommand cmd)
    {
        cmd.Parameters.Clear();
        cmd.Parameters.AddWithValue("@SomeParam", 1);

        cmd.CommandText = "Select * from sometable1";
        cmd.CommandType = CommandType.Text;
        cmd.ExecuteNonQuery();
    }

 /// <summary>
        /// Update Rebill Date
        /// </summary>
        public static void DoThat(SqlCommand cmd)
        {
            cmd.Parameters.Clear();
            cmd.Parameters.AddWithValue("@SomeParam", 2);

            cmd.CommandText = "Select * from sometable2";
            cmd.CommandType = CommandType.Text;
            cmd.ExecuteNonQuery();
        } 
```

1.  上述方法有什么好处吗？为存储库使用静态类是明智的还是会产生问题？
2.  有没有办法做到这一点而不必传递命令（cmd）对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:26:19.477

您可能想看一下[工作单元模式](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)。

工作单元模式准确地定义了它所建议的内容，即一次全部提交或根本不提交的工作单元。

这是通过定义一个包含两部分的接口来实现的：

*   处理插入、更新、删除操作的方法（注意，您不必公开所有这些操作，并且您不限于一种实体类型）
*   提交的方法（如果您回滚，则根本不调用提交）。这是您处理事务以及插入、更新和/或删除所有注册更改的实体的地方。

然后，您将传递此接口的实现，并在所有操作完成后在外部边界（您的服务）提交更改。

请注意，LINQ-to-Entities 中的[`ObjectContext`类和 LINQ-to-SQL 中的](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)[`DataContext`类](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)都是工作单元的示例（您执行操作，然后将它们保存在批处理中）。

# c# - 触发器返回结果集和/或在 SET NOCOUNT OFF 的情况下运行是什么意思

> ID：12608697
> 
> 赞同：1
> 
> 时间：2012-09-26T19:06:30.237
> 
> 标签：c#, visual-studio-2010, sql-server-2008

我得到了这个例外：

> 触发器返回了一个结果集和/或在另一个未完成的结果集处于活动状态时以 SET NOCOUNT OFF 运行

我想知道这是什么意思，举个例子以及如何避免它（没有`SET NOCOUNT ON`- 因为我需要知道受影响的行数）。

这里有更多关于我在做什么的解释？

假设我的 SQL Server DB 中有一个名为**AccNodesBal**的表，并且该表上有 3 个触发器：

*   `FOR UPDATE`
*   `INSERT`
*   `DELETE`

我使用 ADO.net 作为数据层。如您所知，`FOR UPDATE`、`INSERT`和`DELETE`语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受**两者影响的行数**

*   插入或更新操作
*   **以及**受触发器影响的行数。

对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。

在我的应用程序（代码）中，我正在使用`ExcecuteNonQuery`并获取`int`变量中受影响的行数，并验证它是否为**2**，以确保触发触发器并记录所有内容。

但我收到此错误：

```
A trigger returned a resultset and/or was running with SET NOCOUNT OFF
while another outstanding result set was active. 
```

搜索后我发现我必须`SET NOCOUNT ON`在触发器中使用关键字。不幸的是，这不适用于我的应用程序，因为触发器现在不会返回受影响行的任何值。有谁知道另一种方法来获取受更新语句影响的行数并在不使用的情况下触发`SET NOCOUNT ON`？

这是我的代码

```
int recCount = adpt.cmdMovementUpdate(
      amtType == EFG.Acc.AccNodeService.Contracts.Entities.AmountType.Debit ? 0 : Amount, 
      amtType == EFG.Acc.AccNodeService.Contracts.Entities.AmountType.Debit ? Amount : 0, 
      NodeID, PeriodID, Convert.ToInt16(CurrCode), Convert.ToByte(BalCurrType)); 
```

其中**TableAdapter**`adpt`包含我的sql**更新**命令查询，它在 WCF 服务中实现，由 Web 服务使用，应用程序使用此 Web 服务。

 ****搜索后，我看到建议使用`SET NOCOUNT ON`，但这对我不起作用，因为我在 WCF 服务中进行了验证，这取决于受影响的行的结果`ExecuteNonQuery`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:52:13.473

您能否尝试将 SET NOCOUNT OFF 放在触发器末尾，看看它是否解决了您的问题。另请查看以下 [http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/5ee185e6-1980-4209-87f6-abeb9c5933fa/](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/5ee185e6-1980-4209-87f6-abeb9c5933fa/)****

# android - 在 Android 应用程序中录制媒体时崩溃

> ID：12608698
> 
> 赞同：2
> 
> 时间：2012-09-26T19:06:33.230
> 
> 标签：android, recording

我刚刚开始，我正在使用开发人员教程。我已将录制代码修改如下，但出现错误，我不确定。我没有深入的 Java 水平，而且我只有大约 3 周的时间来学习对象和类。此应用程序适用于我们没有规范的项目。

```
private static final String LOG_TAG = "Recording";

//start recording stuff

private RecordButton mRecordButton = null;
private MediaRecorder mRecorder = null;

private void onRecord(boolean start)
{
    if (start)
        startRecording();
    else
        stopRecording();

}

private void startRecording()
{
    mRecorder = new MediaRecorder();
    mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    mRecorder.setOutputFile("/sdCard0/panic_record/" + System.currentTimeMillis()+ ".3gp");
    mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    try {
        mRecorder.prepare();
    } catch (IOException e) {
        Log.e(LOG_TAG, "prepare() failed");
    }

    mRecorder.start();
}

private void stopRecording()
{
    mRecorder.stop();
    mRecorder.release();
    mRecorder = null;
}

class RecordButton extends Button {
    boolean mStartRecording = true;

    OnClickListener clicker = new OnClickListener() {
        public void onClick(View v) {
            onRecord(mStartRecording);
            if (mStartRecording) {
                setText("Stop recording");
            } else {
                setText("Start recording");
            }
            mStartRecording = !mStartRecording;
        }
    };

    public RecordButton(Context ctx) {
        super(ctx);
        setText("Start recording");
        setOnClickListener(clicker);
    }

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_record);
    getActionBar().setDisplayHomeAsUpEnabled(true);

    LinearLayout ll = new LinearLayout(this);
    mRecordButton = new RecordButton(this);
    ll.addView(mRecordButton,
        new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT,
            0));

    setContentView(ll);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_record, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

LogCat 输出为

```
09-26 20:05:37.620：电子/录音（1152）：准备（）失败
09-26 20:05:37.620：E/MediaRecorder(1152)：在无效状态下开始调用：4
09-26 20:05:37.620: D/AndroidRuntime(1152): 关闭 VM
09-26 20:05:37.620: W/dalvikvm(1152): threadid=1: 线程以未捕获的异常退出 (group=0x41c18300)
09-26 20:05:37.630: E/AndroidRuntime(1152): 致命异常: main
09-26 20:05:37.630: E/AndroidRuntime(1152): java.lang.IllegalStateException
09-26 20:05:37.630: E/AndroidRuntime(1152): at android.media.MediaRecorder.start(Native Method)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 cs4084.panic.button.Record.startRecording(Record.java:55)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 cs4084.panic.button.Record.onRecord(Record.java:34)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 cs4084.panic.button.Record.access$0(Record.java:31)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 cs4084.panic.button.Record$RecordButton$1.onClick(Record.java:71)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 android.view.View.performClick(View.java:4211)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 android.view.View$PerformClick.run(View.java:17267)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 android.os.Handler.handleCallback(Handler.java:615)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 android.os.Handler.dispatchMessage(Handler.java:92)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 android.os.Looper.loop(Looper.java:137)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 android.app.ActivityThread.main(ActivityThread.java:4898)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 java.lang.reflect.Method.invokeNative(Native Method)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 java.lang.reflect.Method.invoke(Method.java:511)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
09-26 20:05:37.630: E/AndroidRuntime(1152): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
09-26 20:05:37.630: E/AndroidRuntime(1152): at dalvik.system.NativeStart.main(Native Method)

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T19:37:32.973

在您的情况下，准备失败。而且由于您正在捕获 IO 异常，我想这可能是由于文件夹 /sdCard0/panic_record/ 无法进行写访问。

通常 sdcard 文件夹是 /sdcard 而不是 /sdCard0（注意 C 的大写）。更好的方法是

```
String path = Environment.getExternalStorageDirectory().getAbsolutePath()
 + "/panic_record/" +  System.currentTimeMillis()+ ".3gp";

mRecorder.setOutputFile(path); 
```

不要忘记添加 WRITE_EXTERNAL_STORAGE 权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T19:12:07.907

这是您的例外的相关位：

```
09-26 20:05:37.630: E/AndroidRuntime(1152): FATAL EXCEPTION: main 
09-26 20:05:37.630: E/AndroidRuntime(1152): java.lang.IllegalStateException 
09-26 20:05:37.630: E/AndroidRuntime(1152): at android.media.MediaRecorder.start(Native Method) 
09-26 20:05:37.630: E/AndroidRuntime(1152): at cs4084.panic.button.Record.startRecording(Record.java:55)
... 
```

`start`在此处阅读方法文档的“抛出”部分：http: [//developer.android.com/reference/android/media/MediaRecorder.html#start](http://developer.android.com/reference/android/media/MediaRecorder.html#start) ()

# iphone - 检查与 NSURLConnection 连接的有效 IP

> ID：12608701
> 
> 赞同：3
> 
> 时间：2012-09-26T19:06:37.193
> 
> 标签：iphone, objective-c, ios, xcode

我目前有一个应用程序，它试图根据我正在与之通信的某些服务器打开一个 web 视图。

但是，我允许用户输入他们自己的服务器 IP，以防 iphone/ipad 和服务器（或其他设备）不在同一个网络上。但是，我正在尝试使用 NSURLConnection 来检测是否可以打开与给定 IP 的连接，但是 NSURLConnection 永远不会返回错误，即使服务器地址（甚至是随机网址）完全是伪造的。

.h

```
 @interface DetailViewController : UIViewController <UIPopoverControllerDelegate, UISplitViewControllerDelegate, UITableViewDataSource, UITableViewDelegate,UIWebViewDelegate, NSURLConnectionDataDelegate> { 
```

.m 中的相关代码

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:
         (NSIndexPath *)indexPath
       {
        dev_ip = @"http://www.asdfasfdfa.com/";
        //dev_ip = (random ip)
        NSMutableURLRequest* request = [NSURLRequest requestWithURL:[NSURL URLWithString:dev_ip]];

        NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
        if (conn) {
            NSLog(@"Connection established");    

        }
        else{
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[NSString stringWithFormat:@"No Device at designated IP"]

                                                           delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [alert show];
        }
      } 
```

此 if/else 始终输出“已建立连接”。这是不应该使用 NSURLConnection 的东西吗？如果是这样，我可以使用什么来检测给定 IP 上的设备以进行连接。我需要阻止用户尝试连接到错误的 IP，那么这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:24:49.407

NSURLConnection 与委托一起使用时，会在连接时调用委托方法，连接失败并接收数据。您应该查看 NSURLConnectionDelegate。

这是一个简单的例子：

```
 // In your .h

    @interface MyClass : NSObject <NSURLConnectionDelegate, NSURLConnectionDataDelegate>

    @end 
```

*编辑*您实际上需要两个代表。

* * *

```
 // In your .m

    @implementation MyClass

    - (void)myMethodToConnect {

         NSString *dev_ip = @"http://74.125.137.101"; // Google.com

         NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:dev_ip]];

         NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    }

    - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

        switch ([(NSHTTPURLResponse *)response statusCode]) { // Edited this!
            case 200: {
                NSLog(@"Received connection response!");
                break;
            }
            default: {
                NSLog(@"Something bad happened!");
                break;
            }
        }

    }

    - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
        NSLog(@"Error connecting. Error: %@", error);
    }
    @end 
```

此外，只需将其也扔在那里，您不一定必须使用异步调用。您可以发送不需要您实现委托的同步调用。就是这样：

```
 NSString *dev_ip = @"http://www.asdfasdfasdf.com/";
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:dev_ip]];
    NSURLResponse *response = nil;
    NSError *error = nil;

    NSData *connectionData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]; 
```

您可以检查响应值和错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T21:07:21.077

有更好的方法来测试服务器是否有效。[Reachability](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)类为此提供了良好的 API 。

# javascript - DISQUS 标识符仅在某些情况下更改线程

> ID：12608710
> 
> 赞同：0
> 
> 时间：2012-09-26T19:07:43.523
> 
> 标签：javascript, html, disqus

我有这个从博客文章中获取的代码：

[http://pastebin.com/fidyNMtX](http://pastebin.com/fidyNMtX)

它的基本作用是创建两个链接，单击它们时会在它们下方加载一个 DISQUS 框。每页有多个DISQUS，这是一种方法。

现在，这行得通。每个链接都显示一个不同的线程，因为一个链接具有“luka”作为 ID，而另一个链接具有 jakoduginizznakova2。但是，如果我例如使用“luka1”和“luka2”，它会加载相同的线程。这在我的情况下是不可接受的，因为我想使用帖子 ID 作为标识符，并且这些数字非常接近。

我做错了什么还是有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:44:58.060

两个标识符都分配给同一个 URL。为了创建一个独特的线程，您还需要设置一个不同的 disqus_url 变量。

有关 Disqus 嵌入变量的其他信息：http: [//help.disqus.com/customer/portal/articles/472098-javascript-configuration-variables](http://help.disqus.com/customer/portal/articles/472098-javascript-configuration-variables)

DISQUS.reset 代码示例：[https ://github.com/disqus/DISQUS-API-Recipes/blob/master/html/disqus_reset.html](https://github.com/disqus/DISQUS-API-Recipes/blob/master/html/disqus_reset.html)

# svn - 结帐失败并显示“格式错误的网络数据”消息

> ID：12608712
> 
> 赞同：1
> 
> 时间：2012-09-26T19:07:45.763
> 
> 标签：svn

我正在尝试通过命令行进行结帐：

```
svn co svn://dev.mycompany.com/backend/trunk 
```

但服务器说::

```
svn: E210004: Unable to connect to a repository at URL 'svn://dev.mycompany.com/backend/trunk'
svn: E210004: Malformed network data 
```

我以前通过eclipse检查过这个。可能是版本问题，我的客户端是1.7.6。而svn版本是1.6.3。

# iphone - iOS 上 iAP 的意外行为

> ID：12608714
> 
> 赞同：0
> 
> 时间：2012-09-26T19:08:00.623
> 
> 标签：iphone, ios, storekit, in-app-purchase

我在我的 iOS 设备上重新安装了我的应用程序。（我已将其删除，并从 GC 帐户注销）。

应用程序启动后，“ `paymentQueue: updatedTransactions:`”被调用。它与 有一笔交易`transactionState' == SKPaymentTransactionStatePurchased`。（事实上​​，这是我的应用程序拥有的唯一 iAP）。

然后出现 GC Sandbox Login ViewController。

如果我没有使用 iTunes 帐户或 GC 帐户登录，为什么 iAP 对象会获得已购买状态？

我没有登录游戏中心，这是肯定的。但我不太确定是否使用 iTunes Store Sandbox 帐户登录。（这甚至存在吗？）如果是，我该如何注销？

我希望能够测试我的应用程序的“恢复”按钮，但是由于该函数已经被调用，并且该项目显示为已购买，我不能......为什么当我将观察者添加到时甚至调用函数`SKPaymentQueue`？_ 检查未完成的交易？但它不应该这样做，因为我不应该登录到 iTunes 帐户......

请告诉我你有什么想法，这让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:53:13.813

听起来您可能无法`[SKPaymentQueue finishTransaction:]`在处理完交易后调用 - IAP 系统将在每次启动时继续尝试交付交易，直到您这样做。因此，只需在您处理完事务后添加该调用，您就应该准备就绪。

# python - 设置 python 日志记录时遇到问题

> ID：12608716
> 
> 赞同：3
> 
> 时间：2012-09-26T19:08:05.493
> 
> 标签：python, logging

我正在使用 python 的标准日志记录系统来记录我的应用程序。我想将所有类型的消息（通过关键调试）打印到控制台，但如果消息级别为错误或更高，我也想发送一封电子邮件。我一直在阅读有关日志记录的文档，但这有点令人困惑。我设置了以下测试，但它似乎无法正常工作：

```
 import logging

 log = logging.getLogger('my_test_log')
 sublog = logging.getLogger('my_test_log.sublog')

 log.setLevel(logging.ERROR)
 log.addHandler(logging.StreamHandler())

 sublog.addHandler(logging.StreamHandler())
 sublog.setLevel(logging.DEBUG)     

 sublog.debug('This is a debug message')
 sublog.info('This is an info message')
 sublog.warn('This is a warn message')
 sublog.error('This is an error message')
 sublog.critical('This is a critical message') 
```

注意：我现在将两个日志都设置到 StreamHandler，因为我还不想发送垃圾邮件，但从技术上讲，它应该只打印两次错误和关键消息，而不是在这种情况下将其发送到电子邮件。我将在此工作后将其更改为 SMTP 以通过电子邮件发送

这是我运行此代码时的输出：

```
This is a debug message
This is a debug message
This is an info message
This is an info message
This is a warn message
This is a warn message
This is an error message
This is an error message
This is a critical message
This is a critical message 
```

基本上所有内容都会打印两次，而不仅仅是错误和关键消息。我在这里做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:21:53.490

经过一些快速研究，似乎 Handler 对象不会自动使用其父 Logger 的日志级别。您必须自己[设置级别](http://docs.python.org/library/logging.html#logging.Handler.setLevel)。

```
import logging

log = logging.getLogger('my_test_log')
sublog = logging.getLogger('my_test_log.sublog')

log.setLevel(logging.ERROR)
handler = logging.StreamHandler()
handler.setLevel(logging.ERROR)
log.addHandler(handler)

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:11:54.803

您的问题是您在子日志上将级别设置为 DEBUG。因此，您将收到所有消息（只需更改为 ERROR）。此外，logger.propagate 为 True 存在问题。

这应该解决它：

```
sublog.propagate = False 
```

这将停止重复的消息。

在此处查看有关[日志记录](http://docs.python.org/library/logging.html)的文档。

# python - 调用函数'df.apply'时python pandas未绑定本地错误

> ID：12608718
> 
> 赞同：1
> 
> 时间：2012-09-26T19:08:06.620
> 
> 标签：python, pandas, apply

我正在尝试在 pandas 中使用 df.apply() 函数，但出现以下错误。如果小于“阈值”，该函数会尝试将每个条目转换为 0

```
from pandas import * 
import numpy as np
def discardValueLessThan(x, threshold):
    if x < threshold : return 0
    else: return x

df = DataFrame(np.random.randn(8, 3), columns=['A', 'B', 'C'])

>>> df
          A         B         C
0 -1.389871  1.362458  1.531723
1 -1.200067 -1.114360 -0.020958
2 -0.064653  0.426051  1.856164
3  1.103067  0.194196  0.077709
4  2.675069 -0.848347  0.152521
5 -0.773200 -0.712175 -0.022908
6 -0.796237  0.016256  0.390068
7 -0.413894  0.190118 -0.521194

df.apply(discardValueLessThan, 0.1)

>>> df.apply(discardValueLessThan, 0.1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas-0.8.1-py2.7-macosx-10.5-x86_64.egg/pandas/core/frame.py", line 3576, in apply
    return self._apply_standard(f, axis)
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/pandas-0.8.1-py2.7-macosx-10.5-x86_64.egg/pandas/core/frame.py", line 3637, in _apply_standard
    e.args = e.args + ('occurred at index %s' % str(k),)
UnboundLocalError: local variable 'k' referenced before assignment 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:24:56.187

错误消息对我来说似乎是一个`pandas`错误，但我认为还有另外两个问题。

首先，我认为您必须指定命名参数或使用`args`将其他参数传递给`apply`. 您的第二个论点可能被解释为轴。但是如果你使用

```
df.apply(discardValueLessThan, args=(0.1,)) 
```

或者

```
df.apply(discardValueLessThan, threshold=0.1) 
```

那么你会得到

```
ValueError: ('The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()', 'occurred at index A') 
```

因为`apply`不按元素进行操作，所以它作用于整个 Series 对象。其他方法包括使用`applymap`或布尔索引，即

```
In [47]: df = DataFrame(np.random.randn(3, 3), columns=['A', 'B', 'C'])

In [48]: df
Out[48]: 
          A         B         C
0 -0.135336 -0.274687  1.480949
1 -1.079800 -0.618610 -0.321235
2 -0.610420 -0.422112  0.102703

In [49]: df1 = df.applymap(lambda x: discardValueLessThan(x, 0.1))

In [50]: df1
Out[50]: 
   A  B         C
0  0  0  1.480949
1  0  0  0.000000
2  0  0  0.102703 
```

或者干脆

```
In [51]: df[df < 0.1] = 0

In [52]: df
Out[52]: 
   A  B         C
0  0  0  1.480949
1  0  0  0.000000
2  0  0  0.102703 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:19:38.683

你需要这样称呼它：

`df.apply(discardValueLessThan, args=(0.1,))`

你这样做的方式 0.1 没有作为参数传递给discardValueLessThan。

# jquery - JQuery JSON 未定义

> ID：12608719
> 
> 赞同：-1
> 
> 时间：2012-09-26T19:08:08.253
> 
> 标签：jquery, html, json, mask, jsfiddle

我正在使用在[此处](http://zendold.lojcomm.com.br/imask/#selflink_usage)找到的 jquery iMask 插件。这是我的代码：[小提琴](http://jsfiddle.net/GtQKh/1/)

当我运行它时
1) 它不能正常工作。电话的输入没有像我设置的那样被屏蔽
2) 控制台显示错误：

```
Uncaught ReferenceError: Json is not defined fiddle.jshell.net:1 
```

这是什么错误，我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:17:11.540

它不是一个`jQuery`插件，它是一个 mootools 插件。

改用`jQuery`端口[https://github.com/cwolves/jQuery-iMask](https://github.com/cwolves/jQuery-iMask)

[http://jsfiddle.net/GtQKh/9/](http://jsfiddle.net/GtQKh/9/)

```
$(document).ready(function(e) {
   $('#phone').iMask({  
     type:'fixed',  
     mask:'(999) 999-9999',  
     stripMask: false
   });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:23:45.597

为了消除混淆，iMask 最初是为 MooTools 创建的，然后有人还创建了一个 jQuery 插件。看来您想使用 jQuery 事件处理程序，所以我建议您改用[jQuery iMask](https://github.com/cwolves/jQuery-iMask)插件。当然，一旦你这样做了，你将需要更新你的源代码。这是一个使用 jQuery iMask 代替的基本[工作小提琴。](http://jsfiddle.net/YjTgD/)

请注意，我使用 GitHub 源代码仅用于演示目的。

# ios - 如何将 TabBarController 与导航控制器结合使用？

> ID：12608726
> 
> 赞同：2
> 
> 时间：2012-09-26T19:08:30.780
> 
> 标签：ios, uitabbarcontroller

我正在开发一个嵌入导航控制器的应用程序。现在我想向它添加标签栏控制器。也就是说，第一页上有几个按钮，点击它们后，它们会导致不同的标签栏控制器（比如说，每个 TabBarController 有两个视图控制器）。

我所做的是：我从对象库中拖动 TabBarController，按 ctrl+拖动将按钮从第一页连接到 TabBarController。我创建了两个名为 System1 和 System2 的 UIViewController，并将两个选项卡栏视图控制器设置为它们。

然后我尝试在模拟器上运行。当我按下按钮时，应用程序被终止：

由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类与键 requestInfo 的键值编码不兼容。”

谁能告诉我我做错了什么以及如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:17:05.313

If you use a Tabbar controller, that has to be the window's root view controller, and then you can have one or more navigation controllers as the view controllers in the tabs. [This is explained](https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/CombiningViewControllers.html#//apple_ref/doc/uid/TP40011313-CH6-SW2) in Apple's View Controller Programming Guide. Its the only way to make it work.

# .net - 模拟 ReadAsync

> ID：12608728
> 
> 赞同：2
> 
> 时间：2012-09-26T19:08:43.747
> 
> 标签：.net, asynchronous, f#

在 .Net 4.5 中有一个 Stream 类的方法，它在监视取消令牌的同时从流中异步读取。

```
ReadAsync : 
       buffer:byte[] * 
       offset:int * 
       count:int * 
       cancellationToken:CancellationToken -> Task<int> 
```

如果另一个线程应该首先触发取消令牌然后关闭流，那么是否保证在ReadAsync抛出异常之前将取消读取线程？

我可以使用 .Net 4.0 框架和没有 ReadAsync 的 F# 异步工作流以某种方式实现此保证吗（它没有接受要监视的取消令牌的重载）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:51:38.793

除非您将多个任务链接在一起，否则这种特殊的重载基本上是无用的——`cancellationToken`仅在进入`ReadAsync`方法调用时检查，而不是在底层`Stream.BeginRead`调用执行时检查。

从 ILSpy 转储的代码：

```
public virtual Task<int> ReadAsync(byte[] buffer,
                                   int offset,
                                   int count,
                                   CancellationToken cancellationToken)
{
    if (!cancellationToken.IsCancellationRequested)
        return this.BeginEndReadAsync(buffer, offset, count);
    return Task.FromCancellation<int>(cancellationToken);
} 
```

如您所见，`cancellationToken`不会转发到`BeginEndReadAsync`呼叫中，而`BeginEndReadAsync`只是按照以下方式实现`Stream.BeginRead`：

```
private Task<int> BeginEndReadAsync(byte[] buffer, int offset, int count)
{
    return TaskFactory<int>.FromAsyncTrim<Stream, Stream.ReadWriteParameters>(
        this,
        new Stream.ReadWriteParameters
        {
            Buffer = buffer,
            Offset = offset,
            Count = count
        },
        (Stream stream, Stream.ReadWriteParameters args, AsyncCallback callback, object state) =>
            stream.BeginRead(args.Buffer, args.Offset, args.Count, callback, state),
        (Stream stream, IAsyncResult asyncResult) =>
            stream.EndRead(asyncResult)
    );
} 
```

此时，您拥有的唯一保证是派生流类型所做出的保证，这些类型因类型而异。

^(请注意，这是基于当前的 .Net 4.5 位，并且实现当然会在未来发生变化。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:51:46.390

您可以在使用/[`Task.IsCanceled`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.iscanceled.aspx)运行任务之前进行检查。`Result``RunSynchronously`

这是一些示例代码：

```
use stream = new MemoryStream(Array.init 1000 (fun i -> byte (i % int Byte.MaxValue)))
use waitHandle = new EventWaitHandle(false, EventResetMode.ManualReset)
use cts = new CancellationTokenSource()
let thread = Thread(fun () -> 
  Thread.Sleep(1000)
  let buf = Array.zeroCreate 100
  let task = stream.ReadAsync(buf, 0, buf.Length, cts.Token)
  if not task.IsCanceled then task.RunSynchronously()
  waitHandle.Set() |> ignore)
thread.Start()
cts.Cancel()
waitHandle.WaitOne() |> ignore 
```

但是一旦`ReadAsync`开始，它*会*抛出一个`AggregateException`声明任务已被取消。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:32:59.560

AFAIK，您必须同时使用互斥锁来保护流并使用取消令牌来检查线程是否有待取消。没有异步原语`Stream`可以为您处理这个问题。

# html - 光标：悬停在 html5 画布元素上的指针

> ID：12608729
> 
> 赞同：10
> 
> 时间：2012-09-26T19:08:49.583
> 
> 标签：html, canvas, easeljs, mouse-cursor

有没有办法让用户知道该元素是可点击的？

我一直在使用easeljs，但没有找到任何相关的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T19:13:18.560

您可以使用这个：[如何在 html5 画布中制作可点击点？](https://stackoverflow.com/questions/10665862/how-to-make-clickable-points-in-html5-canvas)

当鼠标在那个区域时，你可以设置：`$('#canvasID').css('cursor','pointer')`当`$('#canvasID').css('cursor','auto')`它不在它上面时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-24T22:36:03.663

我正在使用 Easeljs 并获取我使用的指针光标`myObject.cursor = 'pointer'`和 `stage.enableMouseOver(20);`（来自 DragAndDrop.html 示例代码）

# c# - 使用 kinect 的身体关节角度（检查时间间隔）

> ID：12608734
> 
> 赞同：4
> 
> 时间：2012-09-26T19:09:23.917
> 
> 标签：c#, kinect

正如您在图像中看到的（链接如下），当左手举起时，它会显示我想要的角度。一个人应该握住他的手臂 5 秒（在图像所示的位置），如果这个人在 5 秒内改变了手臂的位置（这意味着如果角度低于 70 度或高于 80 度），则应该显示一些信息来放置手臂回到原来的位置，计时器重新开始！

[http://postimage.org/image/hpfl41nzp/](http://postimage.org/image/hpfl41nzp/)

* * *

Mainwindow.xaml 文件

```
 <Window x:Class="shoulder_joint.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="511" Width="525" Loaded="Window_Loaded"    
     Closing="Window_Closing" >
     <Grid Height="479" Width="510">
     <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="6*" />
        <ColumnDefinition Width="497*" />
    </Grid.ColumnDefinitions>
    <Image Height="479" HorizontalAlignment="Left" Name="frame_image" Stretch="Fill"   
    VerticalAlignment="Top" Width="503" Grid.Column="1" Grid.ColumnSpan="2" />

   <Image Height="131" Margin="14,14,319,0" Name="Color_image" Stretch="Fill" 
   VerticalAlignment="Top" Grid.Column="2" />
</Grid>
</Window> 
```

* * *

主窗口.xaml.cs

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text;
 using System.Windows;
 using System.Windows.Controls;
 using System.Windows.Data;
 using Microsoft.Xna.Framework;
 using System.Windows.Documents;
 using System.Windows.Input;
 using System.Windows.Media;
 using System.Windows.Media.Imaging;
 using System.Windows.Navigation; 
 using System.Windows.Shapes;
 using Microsoft.Kinect;

 namespace shoulder_joint
 {

/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    bool flag = false;
    angle angle1 = new angle();
    Draw_joint draw = new Draw_joint();

    int joint_thick =10;
    private readonly Brush detect_brush = Brushes.GreenYellow;
    private readonly Brush inferred_brush = Brushes.Indigo;
    private readonly Pen detect_pen = new Pen( Brushes.Black,6);
    private readonly Pen inferred_pen = new Pen (Brushes.DarkOliveGreen,2);

    KinectSensor sensor;
    Skeleton[] skelton;
    int width =491;
    int height =470;
    DrawingGroup drawing_group;
    DrawingImage draw_image;
    byte[] color_pixel;
    WriteableBitmap bitmap;
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {

        foreach (var potential_sensor in KinectSensor.KinectSensors)
        {
            if (potential_sensor.Status == KinectStatus.Connected)
            {
                sensor = potential_sensor;
                break;

            }
        }

        sensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30);
        sensor.SkeletonStream.Enable();
        color_pixel = new byte [sensor.ColorStream.FramePixelDataLength];
        bitmap = new  WriteableBitmap(sensor.ColorStream.FrameWidth,
        sensor.ColorStream.FrameHeight,96,96,PixelFormats.Bgr32,null);
        Color_image.Source = bitmap;

        drawing_group = new DrawingGroup();
        draw_image = new DrawingImage(drawing_group);
        frame_image.Source = draw_image;

        sensor.SkeletonFrameReady += SensorSkeltonFrameReady;
        sensor.ColorFrameReady += SensorColorFrameReady;
        sensor.Start();

       }

   private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        if (sensor != null)
        {
            sensor.Stop();
        }
    }

    private void SensorColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
    {
        ColorImageFrame color_frame;
        using (color_frame = e.OpenColorImageFrame())
        {
            if (color_frame != null)
            {
                color_frame.CopyPixelDataTo(color_pixel);

                bitmap.WritePixels(new Int32Rect(0, 
                 0,bitmap.PixelWidth,bitmap.PixelHeight),
                   this.color_pixel, 
                    this.bitmap.PixelWidth* sizeof(int), 
                    0);

            }
        }
    }

    private void SensorSkeltonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
    {

        SkeletonFrame skelton_frame;

        using (skelton_frame = e.OpenSkeletonFrame())
        {
            if (skelton_frame != null)
            {

            skelton = new Skeleton[skelton_frame.SkeletonArrayLength];
           skelton_frame.CopySkeletonDataTo(skelton);

                using (DrawingContext dc = drawing_group.Open())
                {
                    dc.DrawRectangle(Brushes.Gray, null, new Rect(0, 0, width, 
                     height));
                    if (skelton != null)
                    {
                        foreach (Skeleton skel in skelton)
                        {
                            if (skel.TrackingState == SkeletonTrackingState.Tracked)
                            {
                                this.find_pos_joints(skel, dc);
                               // this.angle_between(dc);
                            }
                        }
                    }

                    drawing_group.ClipGeometry = new RectangleGeometry(new 
                     Rect(0,0,width,height));

                }
            }
        }

    }

    private void find_pos_joints(Skeleton sk, DrawingContext draw_contex)
    {
       draw.Draw_joint1(sk, draw_contex, JointType.ShoulderCenter, 
       JointType.ShoulderRight, 

       JointType.ElbowRight,JointType.WristRight,
       JointType.ShoulderLeft,JointType.ElbowLeft,JointType.WristLeft,
       JointType.Head,JointType.HipCenter,JointType.HipLeft,
       JointType.KneeLeft,JointType.AnkleLeft,
        detect_brush,inferred_brush,joint_thick,inferred_pen,detect_pen,sensor);

        angle1.angle_between_right_shoulder(sk,  
        draw_contex,JointType.Head,JointType.Spine ,JointType.ShoulderCenter,
        JointType.ShoulderRight,JointType.ElbowRight,sensor);

        angle1.angle_between_left_shoulder(sk, draw_contex,  JointType.ShoulderCenter, 
        JointType.ShoulderLeft, JointType.ElbowLeft, sensor);
        angle1.angle_between_left_leg(sk,    
        draw_contex,JointType.HipLeft,JointType.KneeLeft,JointType.AnkleLeft,sensor);
    }

   }
   } 
```

* * *

绘制联合类

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Kinect;
using System.Windows.Media;

namespace shoulder_joint
{
class Draw_joint
{
    angle angle1 = new angle();

    public void Draw_joint1(Skeleton sk1, DrawingContext dc1, JointType joint1,    
    JointType joint2,
        JointType joint3, JointType joint4, JointType joint5, JointType joint6, 
        JointType joint7,
        JointType joint8 ,JointType joint9,JointType joint100,JointType joint101, 
        JointType joint102
        ,Brush det_brush,
        Brush infer_brush,int thick, Pen det_pen,Pen infer_pen,KinectSensor sensor)
    {
        Joint joint11 = sk1.Joints[joint1];
        Joint joint22 = sk1.Joints[joint2];
        Joint joint33 = sk1.Joints[joint3];
        Joint joint44 = sk1.Joints[joint4];
        Joint joint55 = sk1.Joints[joint5];
        Joint joint66 = sk1.Joints[joint6];
        Joint joint77 = sk1.Joints[joint7];
        Joint joint88 = sk1.Joints[joint8];
        Joint joint99 = sk1.Joints[joint9];
        Joint joint10 = sk1.Joints[joint100];
        Joint joint1011 = sk1.Joints[joint101];
        Joint joint1022 = sk1.Joints[joint102];

        if (joint11.TrackingState == JointTrackingState.Tracked &&
            joint22.TrackingState == JointTrackingState.Tracked &&
            joint33.TrackingState == JointTrackingState.Tracked &&
            joint44.TrackingState == JointTrackingState.Tracked &&
            joint55.TrackingState == JointTrackingState.Tracked &&
            joint66.TrackingState == JointTrackingState.Tracked &&
            joint77.TrackingState == JointTrackingState.Tracked &&
            joint88.TrackingState == JointTrackingState.Tracked &&
            joint99.TrackingState == JointTrackingState.Tracked &&
            joint10.TrackingState == JointTrackingState.Tracked &&
            joint1011.TrackingState == JointTrackingState.Tracked &&
            joint1022.TrackingState == JointTrackingState.Tracked 
            )
        {

            dc1.DrawEllipse(det_brush, det_pen, angle1.point_toScreen(joint11.Position,  
            sensor), thick, thick);

            dc1.DrawEllipse(det_brush, det_pen, angle1.point_toScreen(joint22.Position, 
            sensor), thick, thick);

            dc1.DrawEllipse(det_brush, det_pen, angle1.point_toScreen(joint33.Position, 
            sensor), thick, thick);

            dc1.DrawEllipse(det_brush, det_pen, angle1.point_toScreen(joint44.Position,              
            sensor), thick, thick);

            dc1.DrawEllipse(det_brush, det_pen, angle1.point_toScreen(joint55.Position, 
            sensor), thick, thick);

            dc1.DrawEllipse(det_brush, det_pen, angle1.point_toScreen(joint66.Position,  
            sensor), thick, thick);

           dc1.DrawEllipse(det_brush, det_pen, angle1.point_toScreen(joint77.Position, 
            sensor), thick, thick);

            dc1.DrawEllipse(det_brush, det_pen, angle1.point_toScreen(joint88.Position,               
            sensor), thick, thick);

            dc1.DrawEllipse(det_brush, det_pen, angle1.point_toScreen(joint99.Position, 
            sensor), thick, thick);

            dc1.DrawEllipse(det_brush, det_pen, angle1.point_toScreen(joint10.Position, 
            sensor), thick, thick);

            dc1.DrawEllipse(det_brush, det_pen,   
            angle1.point_toScreen(joint1011.Position, sensor), thick, thick);

            dc1.DrawEllipse(det_brush, det_pen, 
            angle1.point_toScreen(joint1022.Position, sensor), thick, thick);

            dc1.DrawLine(infer_pen, angle1.point_toScreen(joint11.Position, sensor),          
            angle1.point_toScreen(joint22.Position, sensor));

            dc1.DrawLine(infer_pen, angle1.point_toScreen(joint11.Position, sensor), 
            angle1.point_toScreen(joint88.Position, sensor));

             dc1.DrawLine(infer_pen, angle1.point_toScreen(joint11.Position, sensor),  
              angle1.point_toScreen(joint99.Position, sensor));

          dc1.DrawLine(infer_pen, angle1.point_toScreen(joint22.Position, sensor), 
           angle1.point_toScreen(joint33.Position, sensor));

            dc1.DrawLine(infer_pen, angle1.point_toScreen(joint33.Position, sensor), 
              angle1.point_toScreen(joint44.Position, sensor));

            dc1.DrawLine(infer_pen, angle1.point_toScreen(joint11.Position, sensor), 
            angle1.point_toScreen(joint55.Position, sensor));

            dc1.DrawLine(infer_pen, angle1.point_toScreen(joint55.Position, sensor), 
            angle1.point_toScreen(joint66.Position, sensor));

          dc1.DrawLine(infer_pen, angle1.point_toScreen(joint66.Position, sensor), 
            angle1.point_toScreen(joint77.Position, sensor));

            dc1.DrawLine(infer_pen, angle1.point_toScreen(joint99.Position, sensor), 
            angle1.point_toScreen(joint10.Position, sensor));

            dc1.DrawLine(infer_pen, angle1.point_toScreen(joint10.Position, sensor),  
            angle1.point_toScreen(joint1011.Position, sensor));

            dc1.DrawLine(infer_pen, angle1.point_toScreen(joint1011.Position, sensor), 
            angle1.point_toScreen(joint1022.Position, sensor));

        }
      }

    }
  } 
```

* * *

角度.cs 类

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text;
 using Microsoft.Kinect;
 using System.Windows.Media;
 using Microsoft.Xna.Framework;
 using System.Windows;

 namespace shoulder_joint
 {
 class angle
 {

    public void angle_between_left_shoulder(Skeleton sk1, DrawingContext draw, 
    JointType Shoulder_cntre, 

    JointType Shoulder_left, JointType Elbow_left, KinectSensor sen)
    {
        Joint sh_cntr = sk1.Joints[Shoulder_cntre];
        Joint sh_left = sk1.Joints[Shoulder_left];
        Joint elb_left = sk1.Joints[Elbow_left];

        Vector3 v_shoulder = new Vector3(sh_cntr.Position.X, sh_cntr.Position.Y, 
        sh_cntr.Position.Z);

        Vector3 v_should_l = new Vector3(sh_left.Position.X, sh_left.Position.Y, 
         sh_left.Position.Z);

       Vector3 v_elbow_l = new Vector3(elb_left.Position.X, elb_left.Position.Y,    
       elb_left.Position.Z);

        Vector3 va = v_shoulder - v_should_l;
        Vector3 vb = v_elbow_l - v_should_l;

        va = Vector3.Normalize(va);
        vb = Vector3.Normalize(vb);

        float len_prod = va.Length() * va.Length();
        float dot_pro = Vector3.Dot(va, vb);
        double angle = Math.Acos(dot_pro);

        angle = angle * 180 / Math.PI;
        angle = 180 - angle;

        System.Windows.Point shoul_l = this.point_toScreen(sh_left.Position, sen);
        draw.DrawText(new FormattedText(angle.ToString("0"), new 
         System.Globalization.CultureInfo("en-us"),
         FlowDirection.LeftToRight,
         new Typeface("Verdana"), 16, Brushes.WhiteSmoke),
         new System.Windows.Point(shoul_l.X+10, shoul_l.Y +20));
    }

    public void angle_between_right_shoulder(Skeleton sk1, DrawingContext draw, 
     JointType head, JointType spine, 

     JointType Shoulder_cntre, JointType Shoulder_right, JointType 
      Elbow_right,KinectSensor sen)
    {
        Joint sh_cntr = sk1.Joints[Shoulder_cntre];
        Joint sh_right = sk1.Joints[Shoulder_right];
        Joint elb_right = sk1.Joints[Elbow_right];

        Vector3 v_shoulder = new Vector3(sh_cntr.Position.X, sh_cntr.Position.Y, 
        sh_cntr.Position.Z);

         Vector3 v_should_r = new Vector3(sh_right.Position.X, sh_right.Position.Y,  
         sh_right.Position.Z);

          Vector3 v_elbow_r = new Vector3(elb_right.Position.X, elb_right.Position.Y, 
          elb_right.Position.Z);

        Vector3 newv1 =v_shoulder - v_should_r ;
        Vector3 newv2 = v_elbow_r - v_should_r;

        newv1 = Vector3.Normalize(newv1);
        newv2 = Vector3.Normalize(newv2);

        float len_prod = newv1.Length() * newv2.Length();
        float dot_pro = Vector3.Dot(newv1, newv2);
        double angle = Math.Acos(dot_pro);

        angle = angle * 180 / Math.PI;
        angle = 180 - angle;

        System.Windows.Point shoul_r = this.point_toScreen(sh_right.Position, sen);
        draw.DrawText(new FormattedText(angle.ToString("0"), new
          System.Globalization.CultureInfo("en-us"),
         FlowDirection.LeftToRight,
         new Typeface("Verdana"), 16, Brushes.WhiteSmoke),
         new System.Windows.Point(shoul_r.X-15, shoul_r.Y+20));

    }

    public System.Windows.Point point_toScreen(SkeletonPoint point,KinectSensor sensor)
    {

       DepthImagePoint depth_point = sensor.MapSkeletonPointToDepth(point,    
        DepthImageFormat.Resolution640x480Fps30);
        return new System.Windows.Point(depth_point.X, depth_point.Y);
    }

   public void angle_between_left_leg(Skeleton sk, DrawingContext draw_contex, 
     JointType hip_l, JointType knee_l,

     JointType ankle_l,KinectSensor sen)
     {
       Joint Hl = sk.Joints[hip_l];
       Joint kl = sk.Joints[knee_l];
       Joint Al = sk.Joints[ankle_l];

        Vector3 hip_left = new Vector3(Hl.Position.X,Hl.Position.Y,Hl.Position.Z);
        Vector3 knee_left = new Vector3(kl.Position.X, kl.Position.Y, kl.Position.Z);
        Vector3 ankle_left = new Vector3(Al.Position.X, Al.Position.Y, Al.Position.Z);

        Vector3 va = hip_left - knee_left;
        Vector3 vb = ankle_left - knee_left;

        float len_prod = va.Length() * vb.Length();
        float dot_pro = Vector3.Dot(va, vb);
        double angle = Math.Acos(dot_pro/len_prod);

        angle = angle * 180 / Math.PI;
        angle = 180 - angle;

        System.Windows.Point shoul_r = this.point_toScreen(kl.Position, sen);
        draw_contex.DrawText(new FormattedText(angle.ToString("0"), new 
         System.Globalization.CultureInfo("en-us"),
         FlowDirection.LeftToRight,
         new Typeface("Verdana"), 16, Brushes.WhiteSmoke),
         new System.Windows.Point(shoul_r.X - 15, shoul_r.Y + 20));
   }

} 
```

}

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T21:29:13.337

只需使用 DispatchTimer 进行倒计时就可以完成您想要做的事情吗？

伪代码如下：

```
private int isArmUpCounter = 5;
private bool isArmUp = false;

private void OnSkeletonReady() {
  if (myArm.Angle > 70 && myArm.Angle < 80)
  {
    if (isArmUp == false)
    {
      isArmUp = true;
      isArmUpCounter = 5;
      armUpTimer.Start();
    }
  }
  else
  {
    if (isArmUp == true && isArmUpCounter > 0)
    {
      Console.WriteLine("You dropped your arm too soon!");
    }

    isArmUp = false;
    armUpTimer.Stop();
  }
}

private void OnArmUpTimerTick() {
    // one a 1 second tick
    isArmUpCounter--;
} 
```

当然需要对代码进行一些调整。但是这个概念是否实现了您正在寻找的东西？

# java - 我的 android 应用程序中的多个 http 请求。穿线

> ID：12608735
> 
> 赞同：1
> 
> 时间：2012-09-26T19:09:27.643
> 
> 标签：java, android, multithreading, android-asynctask

我的 Android 应用程序中将有大约 10 个甚至更多的 http post 请求，**其中大多数都是很短的时间。**

据我了解，我无法在我的 UI 线程上执行任何网络操作。

解决方案是使用 AsyncTask 或使用 Thread。

如果我将使用 AsyncTask，我将不得不为该请求创建一个自定义类。

如果我将使用 Thread，我将不必为网络操作实现一个新类。

所以，我的问题是，什么时候应该使用 Thread 以及什么时候应该使用 AsyncTask 选项？为短时间请求创建一个线程并创建一个在较长寿命的网络操作上扩展 AsyncTask 的类是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:14:58.453

即使您使用`Thread.start()`，您仍然需要创建 的子类`Runnable`（或 的子类`Thread`）来完成工作。您正在以任何一种方式创建新类 - 也许唯一的区别是您创建匿名类与顶级命名班级。

您不应该根据是否需要创建一个新类来决定，因为成本很小 - 您创建一个新文件，它具有不同的结构等。这是一个简单的一次性成本。

在我看来，决定应该基于您是否想要AsyncTask提供[的所有额外逻辑和功能。](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:17:55.467

> 什么时候应该使用 Thread 以及什么时候应该使用 AsyncTask 选项？

根据以下[文档`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)：

> AsyncTask 被设计为围绕 Thread 和 Handler 的辅助类，并不构成通用线程框架。AsyncTasks 最好用于短时间的操作（最多几秒钟）。如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如Executor、ThreadPoolExecutor 和 FutureTask。

所以听起来如果你有一个长时间运行的任务，你应该分叉你自己的`Thread`或使用`ExecutorService`. 如果你只是在做一个简短的后台任务，`AsyncTask`那是要走的路。

> 为短时间请求创建一个线程并创建一个在较长寿命的网络操作上扩展 AsyncTask 的类是正确的方法吗？

不，根据上面的文档，你把它弄反了。

> 如果我将使用 Thread，我将不必为网络操作实现一个新类。

你需要声明一个新类`AsyncTask`：`Thread`

```
 private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
    protected Long doInBackground(URL... urls) {
       ...
    }
 }
 ...
 // to start it
 new DownloadFilesTask().execute(url1, url2, url3); 
```

以下是如何使用线程：

```
 private class DownloadFilesTask implements Runnable {
      // if you need to pass in args via the constructor
      public DownloadFilesTask(URL... urls) {
          ...
      }
      public void run() {
          // do stuff in the background
      }
 }
 ...
 // to start it
 new Thread(new DownloadFilesTask(url1, url2, url3)).start(); 
```

如果您需要从后台任务中获取结果，那么您也可以使用 a`Callable`和`ExecutorService`类来代替：

> [如何让 Callable 等到执行？](https://stackoverflow.com/questions/12621041/how-to-make-callable-wait-till-execution/12621085#12621085)

`AsyncTask`也支持`get()`。

# c# - 检查 Windows CE 设备中的电池电量

> ID：12608739
> 
> 赞同：0
> 
> 时间：2012-09-26T19:09:34.463
> 
> 标签：c#, windows-ce, battery

> **可能重复：**
> [获取 Windows CE 5.0 设备的电池信息](https://stackoverflow.com/questions/5415622/getting-battery-information-of-a-windows-ce-5-0-device)

我需要使用 c# 检查 Windows CE 设备中的电池电量。我需要类似 Win32_Battery 类的东西，但适用于移动设备。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:15:03.360

您可以调用/调用`GetSystemPowerStatusEx`API 以获取电池状态，有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/aa453172.aspx](http://msdn.microsoft.com/en-us/library/aa453172.aspx)。

一个快速的谷歌搜索也产生了一个样本：

[http://www.microsoft.com/en-us/download/details.aspx?id=11736](http://www.microsoft.com/en-us/download/details.aspx?id=11736)

和一个教程：

[http://msdn.microsoft.com/en-us/library/aa446550.aspx](http://msdn.microsoft.com/en-us/library/aa446550.aspx)

# xcode4 - Mac OS X 沙盒应用程序混乱

> ID：12608740
> 
> 赞同：0
> 
> 时间：2012-09-26T19:09:37.203
> 
> 标签：xcode4, sandbox

我正在使用 xcode/cocoa 为 Mac OS X 应用商店制作一个小应用程序，该应用程序需要对用户系统上的文件夹进行只读访问。用户将选择文件夹。

根据 Apple 的规范，沙盒仅允许用户选择访问应用程序沙盒之外的文件。

这是否意味着，如果我通过打开的对话框向用户展示一个文件夹，那么该应用程序将拥有对该文件夹和所有子文件夹的读取权限？或者仅对单个文件进行沙盒处理。

另外，每次重新启动应用程序时，用户是否都必须重复该过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:38:52.397

1.  该应用程序将有权访问用户选择的文件夹的所有子文件夹。

2.  您可以使用[安全范围的书签](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html)。

# vb.net - Perl 或 VB 脚本能否访问 Outlook 中的电子邮件文件夹，在每封电子邮件中查找并打开超链接（在 IE 中）并将链接的文档保存到文件夹中？

> ID：12608741
> 
> 赞同：0
> 
> 时间：2012-09-26T19:09:44.940
> 
> 标签：vb.net, perl, outlook

我不精通开发/使用脚本，想知道是否已经存在可以使用 MS Outlook 插入规则的内容。我将所有带有特定主题的电子邮件都保存到 Outlook 文件夹中，并且有一个选项（在高级规则设置中）可以在电子邮件到达时对其运行脚本？Perl、VB 或类似程序能否将电子邮件内容扫描到超链接，在 IE 中打开链接并将文档 (pdf) 保存到我计算机上的文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:13:48.800

如果您想要一个简单的答案，那么答案将是“是”。

使用 Perl，您可以使用[`Win32::OLE`](http://search.cpan.org/~jdb/Win32-OLE-0.1709/lib/Win32/OLE.pm)、 和等模块[`LWP::UserAgent`](http://search.cpan.org/~gaas/libwww-perl-6.04/lib/LWP/UserAgent.pm)。如何？您将使用`Win32::OLE`扫描特定 Outlook 文件夹中的电子邮件，读取其内容并将其保存为文本文件，然后您可以读取文本文件并从中获取`PDF`url 并用于`LWP::UserAgent`获取和下载`PDF`文档，完成后删除文本文件。

您可以使用`cpan`提示符安装这些模块（如果您安装了 perl，则使用 Windows 命令提示符），或者您也可以使用`PPM`（Perl 包管理器）安装这些模块。

我还认为它可以通过 a 轻松实现`VBScript`并且更有意义，因为它是 Microsoft 产品，它可能也不需要您安装任何第三方库，但我不是`VBScript`专家，对此无能为力看待。

# javascript - Plupload - 上传功能完成？

> ID：12608744
> 
> 赞同：6
> 
> 时间：2012-09-26T19:10:16.450
> 
> 标签：javascript, plupload

我一直在浏览一些“类似”的问题，但没有一个可以解决我遇到的特定问题。

我正在使用 Plupload (http://www.plupload.com) 将图像上传到 Amazon S3。这很好用，但是一旦上传完成，我想更新页面上的另一个 div 以显示上传文件的缩略图。我的意图是使用 jQuery.load 来执行此操作（因为我需要先运行数据库查询才能输出它们）。但是，现在我正在尝试使基础知识正常工作并简单地用文本更新 div。

我当前的代码（如下）没有返回任何错误，但是一旦上传了文件，它就不会更新 div。查看各种答案/建议，似乎有多种方法可以实现我正在寻找的东西 - 但我无法得到任何工作。

这是我现在的代码...

```
<script>
$(document).ready(function(upload) {
$("#uploader").pluploadQueue({
    runtimes : 'html5,html4',
    url : '/gallery/upload.cfm',
    max_file_size : '5000kb',
    multiple_queues : true,
    unique_names : true,
    filters : [
        {title : "Image files", extensions : "jpg,gif,png,jpeg"}
    ]
});
$("#uploader").bind('FileUploaded', function() {
$(".outputimages").html('The output goes here');
});
});
</script>

<div id="uploader">You browser doesn't have HTML 4 support.</div> 

<div class="outputimages"></div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T19:52:20.053

这是我的代码，它在我身边工作：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="plupload/jquery.plupload.queue.js"></script>
<script src="plupload/plupload.full.js"></script>
<script>
    $(function() {
        $("#uploader").pluploadQueue({
            runtimes : 'html5,html4',
            max_file_size : '10mb',
            url : 'upload.php',
            max_file_size : '5000kb',
            multiple_queues : true,
            unique_names : true,
            filters : [
                {title : "Image files", extensions : "jpg,gif,png,jpeg"}
            ]
        });

        var uploader = $('#uploader').pluploadQueue();

        uploader.bind('FileUploaded', function() {
            if (uploader.files.length == (uploader.total.uploaded + uploader.total.failed)) {
                $(".outputimages").html('The output goes here');
            }
        });
    });
</script>

<div id="uploader">You browser doesn't have HTML 4 support.</div> 

<div class="outputimages"></div> 
```

这个例子，在队列中的每个文件都被上传后触发 FileUploaded 函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T21:09:43.090

使用 UploadComplete 而不是 FileUploaded 效果更好

# java - 可以将 Jersey-Json/Jackson 配置为生成 json-rpc-1.0 吗？

> ID：12608746
> 
> 赞同：4
> 
> 时间：2012-09-26T19:10:25.773
> 
> 标签：java, jersey, jackson, json-rpc

我有一个需要调用的 api，它使用 json-rpc-1.0（我无法控制实现）。我希望能够操作 jaxb 对象并将它们编组为 json-rpc-1.0 格式。这是 jackson/jersey-json 可以完成的事情，还是有不同的库可以实现这个目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:59:56.683

不，Jersey 无法配置为支持 JSON-RPC，但 Jersey 可用于实现 JSON-RPC。JSON-RPC 指定了一个带有请求和响应的协议，并且可以通过 HTTP 实现。Jersey（以及所有 JAX-RPC 实现）可用于实现任何基于 HTTP 的协议。

然而，由于最新的 JSON-RPC 规范（2.0 - [http://www.jsonrpc.org/specification](http://www.jsonrpc.org/specification)）没有指定如何将请求和响应映射到 HTTP 动词（POST、GET 等）和状态码，因此可以JSON-RPC 实现之间存在一些不兼容性。

与其使用 Jersey 来实现 JSON-RPC，不如使用现有的 JSON-RPC 实现更好，另请参见[http://en.wikipedia.org/wiki/JSON-RPC#Implementations](http://en.wikipedia.org/wiki/JSON-RPC#Implementations)

# python - 将对象与 python 字典/哈希表中的键进行比较

> ID：12608747
> 
> 赞同：0
> 
> 时间：2012-09-26T19:10:40.933
> 
> 标签：python, dictionary, hashtable

也许我的标题可能会产生误导，但让我澄清一下我的问题：

这是一个列表：

```
chr1:100-200 100 100
chr1:350-500 150 250
chr1:780-880 100 350
chr1:900-950 50  400 
```

所以基本上第一列是坐标范围，第二列是区间长度（第一列两个坐标之间的减法），第三列是区间长度的累加。

现在我有一个数字，比如说 120。我需要做的是：因为 100 < 120 < 250（将我的对象与键进行比较），并且键应该指向值“chr1:350-500”；同样，如果我的号码是 360，因为 350 < 360 < 400，所以值应该是："chr1:900-950"

希望我已经说清楚了。我想我应该使用字典或哈希表来解决问题，但这里涉及将我的对象与键进行比较；我不知道该怎么做。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:16:14.547

Actually, no.

```
>>> ranges = ['chr1:100-200', 'chr1:350-500', 'chr1:780-880', 'chr1:900-950']
>>> accums = [100, 250, 350, 400]
>>> ranges[bisect.bisect_left(accums, 120)]
'chr1:350-500'
>>> ranges[bisect.bisect_left(accums, 360)]
'chr1:900-950' 
```

# java - 你如何在java中初始化一个字符串？

> ID：12608752
> 
> 赞同：6
> 
> 时间：2012-09-26T19:10:55.460
> 
> 标签：java, string

我已经开始使用 setter 而不是将参数放入默认构造函数中，因为它可以帮助我更好地组织代码

问题是我正在做的项目中唯一的变量是一个字符串，我不确定是否应该在声明中初始化它（作为全局变量？），在 setter 实例方法中还是是否在类构造函数。

我想知道这个设置是否存在任何问题，是否在使用它的设置器之前实例没有初始化：

```
class MyClass{

  private String myString; 

  public MyClass(){

  }
  public void setStuff(String s){ 

    this.myString=s;
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T19:12:58.360

为什么不直接初始化为：

```
private String myString = "My string"; 
```

可能的最简单的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T19:14:53.837

好吧，这实际上取决于该变量是什么以及它将做什么。

它是一个常数吗？如果是这样，您可以像这样初始化它：

```
private final String myString = "foo"; 
```

Is it meant to be an instance variable? If so, you should go for something like this:

```
public MyClass(string myString)
{
    this.myString = myString;
} 
```

If it's some kind of optional property, the way you have now might be fine as well. In the end, it really all depends on what you're going to be doing with that variable.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T19:14:54.627

Not sure what you mean by global variable? Is it truely a variable that is the same inrespective of the object that is created? If so it should be static

```
private static String myString = "str"; 
```

If it never changes then it should be final and is then a global constant

```
public static final String MY_STRING = "str"; 
```

This can then be public and accessed via

```
MyClass.MY_STRING 
```

If it is only applicable for each object of the class that is created then either initialise it in the constructor or in the declaration

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T19:15:29.480

Just like you have it looks good to me. BTW, "global varible" can be misleading cause it may imply that the var is public whereas it is private but accessible outside via a public getter/setter.

But to initialize a String, the simplest way is:

```
private String foo = "some string"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T19:14:58.463

It really depends on what `MyClass` will be doing. Most of the time, it's best to have a constructor that will initialize private variable and to also have a getter and setter for it.

One reason is what if `MyClass` has a method `foo` which needs `myString` to be initialized and you forgot to call `setStuff`?

# ruby-on-rails - 在 ActiveAdmin 的非表单页面中添加表单

> ID：12608753
> 
> 赞同：0
> 
> 时间：2012-09-26T19:11:03.150
> 
> 标签：ruby-on-rails, activeadmin

我正在尝试添加一个简单的选择框并将按钮提交到 ActiveAdmin 中的“显示”页面。基本上，客户想要一种简单的方法来将当前未分配的小部件分配给当前正在查看的项目。这并不重要。

我看到的是，虽然我可以添加一个表单和一个选择框，但如果我尝试在选择后添加任何内容，则不会显示选择。不是它被 CSS 隐藏，而是它只是不渲染。

以下是相关代码：

```
column do
  panel "Devices without locations" do
    devices = Device.without_location
    form_tag add_device_admin_location_path do 
      select_tag(:device_id, options_from_collection_for_select(devices, :id, :name))
      submit_tag
    end
  end
end 
```

将显示提交标签，但不会显示选择。如果我把“foo”放在那里，只有“foo”会出现。只有在块中没有其他内容时才会显示选择。

**更新：** 好的，所以我已经能够通过将输出连接在一起来解决这个问题。这并不理想，我肯定觉得很脏，但它确实有效。

我尝试对此使用formtastic，但它似乎只接受模型的属性，这不起作用：我正在更新设备，而不是位置。

这行得通，但如果有人有更好的方法来做到这一点，我很想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T08:24:57.543

我遇到了同样的问题，将表单移动到 app/views/admin/#{model_name}s/_#{partial_name}.html.erb 对我来说很好

# c - 用管道分隔数组

> ID：12608754
> 
> 赞同：0
> 
> 时间：2012-09-26T19:11:08.793
> 
> 标签：c

自从我上一个问题以来，我已经做了很多工作，所以我认为开始一个新问题来重新开始是合适的。如果这是错误的方法，请告诉我。（我是新来的！）

这是我的代码：

```
int do_command(char **args){

    // In the end, this function should take an array of args
    // and separate them into UNIX commands that lie before and after
    // pipes that are entered and put them into an array called
    // arrayOfCommands.
    // For example, if the char array args comes in 
    // with {"ls", "-1", "|", "wc"}, there would be two commands
    // which would be "ls -l" and "wc"

    // The following number is in my real program, 
    // but using the contents of args above, there will be two
    // commands ("ls -l" and "wc" separated by a pipe)
    // The number is found dynamically by looking for the number
    // of pipes earlier (in our examples so far, just one) and 
    // simply adding one since there has to be a command on either
    // side of the pipe or an error is thrown.
    const int commands = 2;

    // I want to create an array that is 2 wide (int commands)
    // and 5 tall (just a constant number because I don't know
    // how many flags a user will enter after each UNIX command
    //
    //  0 1 
    // 0[][]
    // 1[][]
    // 2[][]
    // 3[][]
    // 4[][]
    //
    // Each column holds a UNIX command (Ex: "ls -s")
    // In this example, "ls" would be stored in arrayOfCommands[0][0];
    // And "-l" would be stored in arrayOfCommands[0][1];
    //
    // If there are more than one command (Ex: "ls -s | wc")
    // They would be stored like this:
    // "ls" in arrayOfCommands[0][0];
    // "-l" in arrayOfCommands[0][1];
    // "wc" in arrayOfCommands[1][0];

    char arrayOfCommands[commands][5]; //!!! (Declaration)

    //counts which column in arrayOfCommands we are on
    int commandNum = 0;

    //Counts which part of a command we are on
    int count = 0;

    //Array Counters
    int i = 0;
    int j;

    //Go through args until we reach the end
    while (args[i] != NULL){
        //if we find something that's not a pipe...
        if(strcmp(args[i], "|")){
            //put it into the array of commands
            arrayOfCommands[commandNum][count] = args[i]; \\!!! (Copying)
            count++;
        }
        //otherwise if we find a pipe...
        else if (!strcmp(args[i], "|")) {
            //we know we are done with that command
            count = 0;
            commandNum++;
        }
        //Looking at the next value in args
        i++;
    }

    //Print the new arrayOfCommands
    int col=0;
    int row=0;
    for (col=0;col<commands;col++){
        printf("Command #%d: ",col);
        for (row=0;row<10;row++){
            printf("%c ",arrayOfCommands[col][row]); \\!!! (Printing)
        }
        printf("\n");
    }
} 
```

我已经疯狂地评论了代码，以帮助每个人理解我的代码。为了进一步解释，我正在用 C 创建一个 UNIX Shell。我的程序以用户输入的形式接收 UNIX 命令，并将它们放入一个名为“args”的数组中，用空格分隔。

上面的代码专门用于管道，并试图将代码进一步分离为位于管道（“|”）之前和之后的命令。继续提问，我会尽力帮助解释我的思考过程。

我认为我的编码部分有些正确，但是当我尝试打印 arrayOfCommands 时，我得到如下信息：

命令 0：% # ！##$
命令 1：* ^@ @!
（当然，这些是实际的符号）

我放了“//!!!” 在我认为导致问题的线后面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:25:12.320

如果你看：

```
char arrayOfCommands[commands][5]; //!!! (Declaration)
...
arrayOfCommands[commandNum][count] = args[i]; \\!!! (Copying) 
```

您正在将 a 分配`char*`到 a`char`中。

C 字符串是字符数组。这意味着您有一个指向一系列`char`以字符结尾的 s的指针`NUL`。`args[i]`将返回的是该起始字符的*内存地址*。因此，您的“副本”只是将`unsigned int` *内存地址分配给指定为**字符*的数组中的元素。`unsigned int`它会将那个（32 位）截断为一个“字符”（8 位）。这可能就是您看到奇怪值的原因。

如果要按照指示存储命令，则必须将`arrayOfCommands`二维`char`数组更改为二维`char *`数组。此外，如果您想实际*复制*字符串，而不仅仅是为`args[]`数组中的每个字符串创建指针别名，您将不得不使用分配二维数组的每个元素`malloc()`（然后在完成后释放内存, 使用`free()`) 或选择一个固定的最大大小并将其分配到堆栈上。为了简单起见，我可能会在这样的程序中使用后者：

```
char arrayOfCommands[2][5][256];  // 5 rows, 2 columns, maximum command length of 255 characters + NUL character 
```

然后，当您进行复制时，您将不得不使用字符串复制功能：

```
strcpy(arrayOfCommands[row][column], args[i]); // Copy string at args[i] into arrayOfCommands[row][column] 
```

这应该可以解决您遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T05:27:02.113

弄清楚了。我决定采用 1D 阵列路线而不是 2D 方式。代码现在采用 args，之前被拆分为 "ls" "-l" "|" “wc”并根据是否有管道将它们分隔到一个名为“arrayOfCommands”的新数组中。一旦完成，arrayOfCommands 的内容就是“ls -l”和“wc”。这是代码：

```
int do_command(char **args,) {
const int commands = 2;
int i = 0;

int commandNum = 0;
int firstCommand = 1;

char *arrayOfCommands[commands];

//Go through args until we reach the end
while (args[i] != NULL){
    //First case            
    if(firstCommand){
        arrayOfCommands[commandNum] = args[i];
        firstCommand = 0;
    }
    //Rest of the cases
    else{
        //if we find something that's not a pipe...
        if(strcmp(args[i], "|")){
            //Add a space to what was a previous part of the same command
            arrayOfCommands[commandNum] = strcat(arrayOfCommands[commandNum]," ");
            arrayOfCommands[commandNum] = strcat(arrayOfCommands[commandNum],args[i]);
        }
        //But if we do find a pipe...
        else if (!strcmp(args[i], "|")) {
            //We know it's time for a new command
            commandNum++;
            firstCommand = 1;
        }               
    }
    //Looking at the next value in args
    i++;
}

for(i = 0; i < commands; i++)
    printf("Command #[%d]: %s\n", i, arrayOfCommands[i]);
} 
```

# python - ffmpeg 结果到临时文件

> ID：12608755
> 
> 赞同：0
> 
> 时间：2012-09-26T19:11:11.477
> 
> 标签：python, ffmpeg

我是 python 和 ffmpeg 的新手。我有以下问题要问。

如果我从命令行运行以下命令并且它可以工作。

```
ffmpeg -i  1.flv  temp_filename 
```

如果我把它放在一个程序中

```
 temp_file_handle, temp_filename = tempfile.mkstemp('.flv')

   command = "ffmpeg -i " + newvideo.location + " "+ temp_filename

   out = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True)
   res = out.communicate() 
```

生成的视频没有写入 tem_filename。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:36:20.247

您最好创建一个临时*目录*，以便为`ffmpeg`您*创建*输出文件。它可能无法操作，因为`mkstemp`创建了文件，而不仅仅是文件名。

使用以下上下文管理器，它会在你完成后清理：

```
import os
import shutil
import tempfile
from contextlib import contextmanager

@contextmanager
def tempfilename(extension):
    dir = tempfile.mkdtemp()
    yield os.path.join(dir, 'tempoutput' + extension)
    shutil.rmtree(dir) 
```

此外，您可以更容易地在*没有*开关的情况下将参数`shell=True`和命令作为列表传递。这是上面的上下文管理器，命令拆分为列表：

```
with tempfilename('.flv') as temp_filename:
    command = ["ffmpeg", "-i", newvideo.location, temp_filename]
    out = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.PIPE) 
```

这样，shell 就不会误解`location`and`temp_filename`参数中的特殊字符。上下文管理器提供文件名而不创建它，但仍会自行清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:28:54.923

[`mkstemp`](http://docs.python.org/library/tempfile.html#tempfile.mkstemp)创建文件本身，而不仅仅是文件名。`ffmpeg`因此，当尝试写入该文件时，该文件将已经存在。因此它将询问您是否要覆盖文件，或产生错误消息，除非`ffmpeg -y`使用该选项。

# c++ - 如何在给定设备实例 ID 的情况下可靠快速地获取网卡的 MAC 地址

> ID：12608757
> 
> 赞同：11
> 
> 时间：2012-09-26T19:11:12.633
> 
> 标签：c++, windows, networking, wmi, device-instance-id

给定网卡的[设备实例 ID](http://msdn.microsoft.com/en-us/library/windows/hardware/ff541327%28v=vs.85%29.aspx)，我想知道它的 MAC 地址。我的系统上用于集成英特尔千兆位卡的示例设备实例 ID：

```
PCI\VEN_8086&DEV_10CC&SUBSYS_00008086&REV_00\3&33FD14CA&0&C8 
```

到目前为止，我使用的算法如下：

1.  [`SetupDiGetClassDevs`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551069%28v=vs.85%29.aspx)用调用`DIGCF_DEVICEINTERFACE`。
2.  调用[`SetupDiEnumDeviceInfo`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551010%28v=vs.85%29.aspx)以获取返回的设备[`SP_DEVINFO_DATA`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff552344%28v=vs.85%29.aspx)。
3.  调用[`SetupDiEnumDeviceInterfaces`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551015%28v=vs.85%29.aspx)with`GUID_NDIS_LAN_CLASS`以获取设备接口。
4.  调用[`SetupDiGetDeviceInterfaceDetail`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551120%28v=vs.85%29.aspx)此返回的设备接口。这将设备路径作为字符串获取： `\\?\pci#ven_8086&dev_10cc&subsys_00008086&rev_00#3&33fd14ca&0&c8#{ad498944-762f-11d0-8dcb-00c04fc3358c}\{28fd5409-15bd-4c06-b62f-004d3a06f852}`
5.  至此，我们有了网卡驱动程序接口的地址。[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)使用#4 的结果打开它。
6.  调用[`DeviceIoControl`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363216%28v=vs.85%29.aspx)和[`IOCTL_NDIS_QUERY_GLOBAL_STATS`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff548975%28v=vs.85%29.aspx)OID[`OID_802_3_PERMANENT_ADDRESS`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff569074%28v=vs.85%29.aspx)以获取 MAC 地址。

这通常有效，并且已在相当多的机器上成功使用。但是，似乎极少数机器的网络驱动程序无法正确响应`DeviceIoControl`步骤#6 中的请求；即使将网卡驱动程序更新到最新版本，问题仍然存在。这些是较新的基于 Windows 7 的计算机。具体来说，`DeviceIoControl`成功完成，但返回零字节而不是包含 MAC 地址的预期六个字节。

MSDN页面上似乎有一条线索[`IOCTL_NDIS_QUERY_GLOBAL_STATS`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff548975%28v=vs.85%29.aspx)：

> 此 IOCTL 将在以后的操作系统版本中弃用。您应该使用 WMI 接口来查询微型端口驱动程序信息。有关详细信息，请参阅 NDIS 对 WMI 的支持。

——也许更新的网卡驱动不再实现这个 IOCTL？

那么，我应该如何让这个工作？我的方法是否可能存在疏忽，我做错了什么？还是我需要采取更不同的方法？一些替代方法似乎包括：

*   查询[`Win32_NetworkAdapter`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394216%28v=vs.85%29.aspx)WMI 类：提供所需信息，但由于性能糟糕而被拒绝。请参阅[快速替换 Win32_NetworkAdapter WMI 类以获取本地计算机的 MAC 地址](https://stackoverflow.com/questions/7322253/fast-replacement-for-win32-networkadapter-wmi-class-for-getting-mac-address-of-l)
*   查询`MSNdis_EthernetPermanentAddress`WMI 类：似乎是`IOCTL_NDIS_QUERY_GLOBAL_STATS`直接从驱动程序中查询 OID 的 WMI 替代品 - 这个适用于麻烦的网络驱动程序。不幸的是，返回的类实例只提供 MAC 地址和`InstanceName`，这是一个本地化字符串，如`Intel(R) 82567LM-2 Gigabit Network Connection`. 查询`MSNdis_EnumerateAdapter`产生一个与 a 相关的列表`InstanceName`，`DeviceName`比如`\DEVICE\{28FD5409-15BD-4C06-B62F-004D3A06F852}`。我不确定如何从`DeviceName`即插即用设备实例 ID ( `PCI\VEN_8086......`) 转到。
*   调用[`GetAdaptersAddresses`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365915%28v=vs.85%29.aspx)或[`GetAdaptersInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365917%28v=vs.85%29.aspx)（已弃用）。我可以在返回值中找到的唯一非本地化标识符是适配器名称，它是一个类似于 - 的字符串，与 WMI NDIS 类返回的`{28FD5409-15BD-4C06-B62F-004D3A06F852}`相同。`DeviceName`再说一次，我不知道如何将它与设备实例 ID 关联起来。我不确定它是否会在 100% 的时间内工作——例如，对于没有配置 TCP/IP 协议的适配器。
*   NetBIOS 方法：需要在卡上设置特定协议，因此无法 100% 工作。通常看起来像hack-ish，而不是我所知道的与设备实例ID相关的方法。我会拒绝这种方法。
*   UUID 生成方法：拒绝，原因我这里不再详述。

似乎如果我能找到一种方法从设备实例 ID 中获取卡的“GUID”，那么剩下的两种做事方式中的一种我就可以顺利完成。但我还没弄清楚怎么做。否则，WMI NDIS 方法似乎最有前途。

获取网卡和 MAC 地址列表很容易，并且有几种方法可以做到。以一种让我将其与设备实例 ID 关联起来的快速方式进行操作显然很难......

**编辑：** IOCTL 调用的示例代码，如果它可以帮助任何人（忽略泄露的 hFile 句柄）：

```
HANDLE hFile = CreateFile(dosDevice.c_str(), 0, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, OPEN_EXISTING, 0, NULL);
if (hFile == INVALID_HANDLE_VALUE) {
    DWORD err = GetLastError();
    wcout << "GetMACAddress: CreateFile on " << dosDevice << " failed." << endl;
    return MACAddress();
}
BYTE address[6];
DWORD oid = OID_802_3_PERMANENT_ADDRESS, returned = 0;
//this fails too: DWORD oid = OID_802_3_CURRENT_ADDRESS, returned = 0;
if (!DeviceIoControl(hFile, IOCTL_NDIS_QUERY_GLOBAL_STATS, &oid, sizeof(oid), address, 6, &returned, NULL)) {
    DWORD err = GetLastError();
    wcout << "GetMACAddress: DeviceIoControl on " << dosDevice << " failed." << endl;
    return MACAddress();
}
if (returned != 6) {
    wcout << "GetMACAddress: invalid address length of " << returned << "." << endl;
    return MACAddress();
} 
```

代码失败，打印：

```
GetMACAddress: invalid address length of 0. 
```

因此，DeviceIoControl 返回非零表示成功，但随后返回零字节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T17:26:36.463

这是一种方法：

1.  调用[`GetAdaptersAddresses`](http://msdn.microsoft.com/en-us/library/aa365915%28VS.85%29.aspx)以获取[`IP_ADAPTER_ADDRESSES`](http://msdn.microsoft.com/en-us/library/aa366058%28v=vs.85%29.aspx)结构列表
2.  遍历每个适配器并从`AdapterName`字段中获取其 GUID（我不确定这种行为是否得到保证，但我系统中的所有适配器在此处都有一个 GUID，并且文档说这`AdapterName`是永久性的）
3.  `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Network\{4D36E972-E325-11CE-BFC1-08002BE10318}\<the adapter GUID>\Connection\PnPInstanceID`对于每个适配器，从（如果存在）读取注册表项（从[这里](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/630d7583-a003-471b-8a41-6b8e4cc06c75)得到这个想法；在 Google 上搜索该密钥似乎有据可查，因此不太可能改变）
4.  从此密钥中，您可以获得适配器的设备 ID（类似于`PCI\VEN_14E4&DEV_16B1&SUBSYS_96B11849&REV_10\4&2B8260C3&0&00E4`：）
5.  对每个适配器执行此操作，直到找到匹配项。当你拿到你的比赛时，回到球场`IP_ADAPTER_ADDRESSES`看看`PhysicalAddress`
6.  喝啤酒（可选）

如果没有一百万种方法来做某事，就不会是 Windows！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T15:37:17.410

我最终使用`SetupDiGetDeviceRegistryProperty`to read `SPDRP_FRIENDLYNAME`。如果没有找到，那么我改为阅读`SPDRP_DEVICEDESC`。最终，这给了我一个像“VirtualBox Host-Only Ethernet Adapter #2”这样的字符串。`MSNdis_EthernetPermanentAddress`然后，我将其与 WMI NDIS 类（ WMI 类）中的 InstanceName 属性进行匹配。如果有多个适配器共享同一个驱动程序（即“#2”、“#3”等），则必须读取这两个属性 - 如果只有一个适配器`SPDRP_FRIENDLYNAME`，则不可用，但如果有多个适配器，则`SPDRP_FRIENDLYNAME`需要区分它们。

该方法让我有点紧张，因为我正在比较看起来像本地化字符串的内容，并且我发现没有任何文档可以保证我正在做的事情总是有效的。不幸的是，我也没有找到任何更好的方法来记录工作。

其他几种替代方法涉及在未记录的注册表位置中卑躬屈膝。一种方法是 spencercw 的方法，另一种是 read `SPDRP_DRIVER`，它是 下的子键的名称`HKLM\SYSTEM\CurrentControlSet\Control\Class`。在驱动程序键下方，查找`Linkage\Export`似乎可以与类的`DeviceName`属性匹配的值`MSNdis_EnumerateAdapter`。但是我找不到任何文件表明这些值可以合法匹配。此外，我发现的唯一文档`Linkage\Export`来自 Win2000 注册表参考，并明确指出应用程序不应依赖它。

另一种方法是查看我最初的问题，第 4 步：“`SetupDiGetDeviceInterfaceDetail`对于这个返回的设备接口”。设备接口路径实际上可以用来重构设备路径。从设备接口路径开始：`\\?\pci#ven_8086&dev_10cc&subsys_00008086&rev_00#3&33fd14ca&0&c8#{ad498944-762f-11d0-8dcb-00c04fc3358c}\{28fd5409-15bd-4c06-b62f-004d3a06f852}`. 然后，删除最后一个斜线之前的所有内容，留下：`{28fd5409-15bd-4c06-b62f-004d3a06f852}`. 最后，添加到该字符串的前面`\Device\`并将其与 WMI NDIS 类进行匹配。然而，这似乎没有记录，并且依赖于设备接口路径的实现细节。

最后，我调查的其他方法都有自己未记录的并发症，听起来至少与匹配`SPDRP_FRIENDLYNAME`/`SPDRP_DEVICEDESC`字符串一样严重。所以我选择了更简单的方法，即仅将这些字符串与 WMI NDIS 类进行匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-11T12:20:31.723

我猜您想获取 MAC 地址以实施某种 DRM、库存或分类系统，因为您尝试获取*永久*MAC 地址而不是当前 MAC 地址。

您似乎忘记了，甚至还有一个*管理上强加的 MAC 地址*（换句话说：“强制”MAC 地址）。
一些驱动程序允许您从“设备属性”页面的“高级”选项卡下执行此操作（例如：我的 Marvell 网络适配器让我执行此操作），而其他一些驱动程序不允许您执行此操作（阅读：它们不支持该属性）。

但是，这一切都以 Registry value: 结尾`HKLM\SYSTEM\CurrentControlSet\Control\Class\{4D36E972-E325-11CE-BFC1-08002BE10318}\xxxx\NetworkAddress`，带有一个`REG_SZ`类型。您可以在此处设置与原始 MAC 地址不同的 MAC 地址，格式为“01020304abcd”（6 字节，纯十六进制，无`:`分隔符或`0x`前缀）。设置好后，重启机器，上电后新的MAC地址生效。

我碰巧有一块带有两个 Marvell 集成 NIC 和一个 NETGEAR USB WiFi NIC 的主板。Marvell 支持更改 MAC 地址：如果`NetworkAddress`在 Registry 中设置了值，在驱动属性页面也可以看到新的值，并且立即生效，无需重新启动（如果从 device 属性中更改）页）。下面是不同方法读取MAC地址的结果：

*   `GetAdaptersInfo`: 新的 MAC 地址
*   `IOCTL_NDIS_QUERY_GLOBAL_STATS`：原始MAC地址
*   `MSNdis_EthernetPermanentAddress`：原始MAC地址

我尝试`NetworkAddress`在 NETGEAR USB WiFi NIC 的注册表中添加值，结果是：

*   `GetAdaptersInfo`: 新的 MAC 地址
*   `IOCTL_NDIS_QUERY_GLOBAL_STATS`: 新的 MAC 地址
*   `MSNdis_EthernetPermanentAddress`: 新的 MAC 地址

**原来的MAC地址不见了。**

因此，为了不被“恶意”用户愚弄，您始终需要检查`HKLM\SYSTEM\CurrentControlSet\Control\Class\{4D36E972-E325-11CE-BFC1-08002BE10318}\xxxx\NetworkAddress`注册表值。如果已设置，我想最好*根本不信任该网络适配器*，因为由驱动程序实现决定使用不同方法呈现给您的内容。

获取该注册表项的一些背景：

[有关 HKLM\SYSTEM\CurrentControlSet\Class 键](https://docs.microsoft.com/windows-hardware/drivers/install/hklm-system-currentcontrolset-control-registry-tree)
的 Microsoft 文档根据该页面上的 Microsoft 文档，

> 每个类都有一个使用安装程序类的 GUID 命名的子项

所以我们选择`{4D36E972-E325-11CE-BFC1-08002BE10318}`子键（又名`GUID_DEVCLASS_NET`，在 中定义，并[在此处](https://docs.microsoft.com/windows-hardware/drivers/install/system-defined-device-setup-classes-available-to-vendors#network-adapter-)`<devguid.h>`进一步记录）

同样，根据 Microsoft 文档，

> 每个类子项包含其他子项，称为软件密钥（或驱动程序密钥），用于系统中安装的该类的每个设备实例。这些软件密钥中的每一个都使用设备实例 ID 命名，该 ID 是一个以 10 为底的四位序数值*xxxx*部分是正整数的 4 字符文本表示，从 0 开始

因此，您可以遍历从 0000、0001、0002 到系统中网络适配器数量的子键。
文档到此为止：我没有找到有关不同注册表值等的任何其他文档。

但是，在每个子项中，您都可以找到 REG_SZ 值，这些值可以帮助您链接`GetAdaptersInfo()`、`MSNdis_EthernetPermanentAddress`、`Win32_NetworkAdapter`和 Device Instance ID 世界（这回答了您的问题）。

注册表值是：

*   `DeviceInstanceID`：毫无疑问，它的值是设备实例 ID
*   `NetCfgInstanceId`: 它的值是结构的`AdapterName`成员`IP_ADAPTER_INFO`，由 . 返回`GetAdaptersInfo()`。它也是WMI 类的`GUID`成员。`Win32_NetworkAdapter`
*   不要忘记`NetworkAddress`：如果此处存在有效的 MAC 地址，驱动程序*可能会将*`GetAdaptersInfo()`其报告为、`MSNdis_EthernetPermanentAddress`和`IOCTL_NDIS_QUERY_GLOBAL_STATS`!正在使用的 MAC 地址。

`MSNdis_EthernetPermanentAddress`然后，正如您已经说过的， WMI 类与“世界”其他部分之间的唯一联系是它的`InstanceName`成员。您可以将其与结构的`Description`成员相关联`IP_ADAPTER_INFO`，由`GetAdaptersInfo()`. 虽然它可能是一个本地化名称，但对于系统来说似乎是唯一的（对于我的两个集成 Marvell NIC，第二个在其名称后附加了“#2”）。

## 最后说明：

综上所述，[用户可以选择禁用 WMI ...](https://superuser.com/q/1265954/739197)

# c# - 使用位图时“无法访问已关闭的流”

> ID：12608763
> 
> 赞同：1
> 
> 时间：2012-09-26T19:11:45.457
> 
> 标签：c#, smartinspect

我的代码在小型演示应用程序中运行良好，但是，当我在大型生产系统中运行它时，它会引发以下异常：

```
Unhandled Exception: System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.get_Length()
   at Gurock.SmartInspect.LogEntry.get_Size()
   at Gurock.SmartInspect.SchedulerCommand.get_Size()
   at Gurock.SmartInspect.SchedulerQueue.Remove(SchedulerQueueItem item)
   at Gurock.SmartInspect.SchedulerQueue.Dequeue()
   at Gurock.SmartInspect.Scheduler.Dequeue()
   at Gurock.SmartInspect.Scheduler.Run()
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext,
     ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext,
     ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

这是导致错误的 C# 代码：

```
// This grabs a bitmap from Mathematica. It works 95% of the time.
Bitmap bitmap = new Bitmap(Globals.State.Mathematica.EvaluateToImage(cmdGraph, 0, 0));

// Log to SmartInspect.
SiAuto.Main.LogBitmap("test", bitmap); // Errors disappear if this line is removed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:02:05.747

修复了问题。

如果 SmartInspect v3.3.2.48 在异步模式下运行，处理位图时有时会抛出此错误。解决方案是删除连接字符串中的所有“异步”标签。

我之前的价值`SiAuto.Si.Connections`是：

```
pipe(reconnect="true", reconnect.interval="30", backlog.enabled="true", backlog.flushon="debug", backlog.keepopen="true", async.enabled="true") 
```

如果我将其更改为此，它将起作用：

```
pipe(reconnect="true", reconnect.interval="30", backlog.enabled="true", backlog.flushon="debug", backlog.keepopen="true") 
```

顺便说一句，SmartInspect 非常出色，我没有任何抱怨。这是我在 2 年内发现的第一个问题，而且由于我使用的是一个已有一年的版本，所以这个问题可能已经在最新版本中得到了修复。

# c# - 从字节数组中读取位范围

> ID：12608768
> 
> 赞同：7
> 
> 时间：2012-09-26T19:11:53.210
> 
> 标签：c#, byte, bit-manipulation, bit

我正在寻找一种能够让我获得一系列位的方法。例如，如果我有二进制数据

**`0 1 0 1 1 0 1 1 1 1 0 1 0 1 1 1`** （2 个字节）

我可能需要从位 3 到 9 获取数据。换句话说，我会感兴趣：

**0 1 0 1 1 0 `1 1 1 1 0 1 0`1 1 1**

所以简而言之，我想构造方法：

```
 byte[] Read(byte[] data, int left, int right){ 

     // implementation
 } 
```

因此，如果我传递数据，`new byte[]{91,215}, 3, 9` 我将得到`byte[]{122}` （注意字节 91 和 215 =`0 1 0 1 1 0 1 1 1 1 0 1 0 1 1 1`字节 122 =`1 1 1 1 0 1 0`与示例相同的二进制数据。

如果我可以`<<`在字节数组上使用运算符，例如执行以下操作，那就太好了：

```
 byte[] myArray = new byte[] { 1, 2, 3 };
  var shift = myArray << 2; 
```

**如果你有兴趣知道我为什么需要这个功能：**

我正在板上创建一个项目，并且经常需要在内存中读取和写入值。cdf、sfr 或 ddf（称为芯片定义文件）包含有关特定芯片的信息。该文件可能如下所示：

```
;     Name                            Zone      Address     Bytesize  Displaybase Bitrange
;     ----                            ----      -------     --------  ----------- --------

sfr = "SPI0_CONTROL"              , "Memory", 0x40001000,        4, base=16
sfr = "SPI0_CONTROL.SPH"          , "Memory", 0x40001000,        4, base=16,    bitRange=25-25
sfr = "SPI0_CONTROL.SPO"          , "Memory", 0x40001000,        4, base=16,    bitRange=24-24
sfr = "SPI0_CONTROL.TXRXDFCOUNT"  , "Memory", 0x40001000,        4, base=16,    bitRange=8-23
sfr = "SPI0_CONTROL.INT_TXUR"     , "Memory", 0x40001000,        4, base=16,    bitRange=7-7
sfr = "SPI0_CONTROL.INT_RXOVF"    , "Memory", 0x40001000,        4, base=16,    bitRange=6-6 
```

由于我正在读取很多变量（有时每秒 80 次），我希望有一个有效的算法。我想我的方法是，如果字节大小是 8，那么我将从这 8 个字节创建一个 long，然后使用`<<`and`>>`运算符来获得我需要的东西。如果字节大小为 4，那么我将创建一个 int 并使用`<<`and`>>`运算符，但是如果我需要读取 16 个字节，我该怎么做呢？**我想我的问题应该是如何在自定义结构类型上实现`<<`and运算符。`>>`**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T19:31:53.570

您需要*System.Collections中的*[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray%28v=vs.100%29.aspx)类。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T19:27:00.977

看起来你可以帮助“比特流”。[这里](http://www.codeproject.com/Articles/12261/A-BitStream-Class-for-the-NET-Framework)有这样一个概念的实现。看一下，也许它符合您的需求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T19:36:40.403

[`BigInteger`](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger%28v=vs.100%29.aspx).NET 4+ 中的类`Byte[]`在其构造函数中采用 a 并具有左右移位运算符。*

# sql - SQLite Select 查询性能调优

> ID：12608770
> 
> 赞同：6
> 
> 时间：2012-09-26T19:12:00.620
> 
> 标签：sql, sqlite

我有以下查询，它只从一个表中获取数据。

**编辑：** 这是一个应该为自动完成功能返回数据的查询。

1.  自动完成数据可以在`text1`或中`text2`。
2.  确切的匹配应该在顶部。`int3`是一个整数权重值，其中结果的顺序以此为基础。前两个查询用于识别完全匹配。
3.  接下来的两个查询用于识别近似匹配。`WHERE text1 > 'foo' AND text1 < 'fop'`短语实际上等于`WHERE text1 LIKE 'foo%'`。我这样写是为了从索引中受益。

希望这可以帮助。

```
SELECT DISTINCT text1 as Key, 'text1' as Source, int1 as Count, 1000 as int3 
   FROM mytable 
   WHERE text1 = 'foo' 

UNION SELECT DISTINCT text2 as Key, 'text2' as Source, int2 as Count, 1000 as int3 
   FROM mytable 
   WHERE text2 = 'foo' 

UNION SELECT text1 as Key, 'text1' as Source, int1 as Count, MAX(int3) as int3 
   FROM mytable 
   WHERE text1 > 'foo' AND text1 < 'fop' AND Count < 4 
   GROUP BY Key 

UNION SELECT text2 as Key, 'text2' as Source, int2 as Count, MAX(int3) as int3 
   FROM mytable 
   WHERE text2 > 'foo' AND text2 < 'fop' AND Count < 4 
   GROUP BY Key 

ORDER BY int3 DESC, Count, Key LIMIT 0, 15; 
```

表结构为：

```
CREATE TABLE mytable (text1 TEXT, text2 TEXT, 
                      int1 NUMERIC, int2 NUMERIC, int3 NUMERIC); 
```

它工作正常，但我需要微调性能。我尝试了不同的索引选项并使用内置计时器检查了性能结果。

我发现的最佳索引选项是：

```
CREATE INDEX cmp1 ON mytable (text1 ASC, int1 ASC, int3 DESC);
CREATE INDEX cmp2 ON mytable (text2 ASC, int2 ASC, int3 DESC); 
```

如果您能向我展示任何更好的索引选项或性能更好的 SQL 查询，我会很高兴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:30:33.550

`UNION`删除出现在两个子查询中的重复行，因此必须为结果创建一个临时表。

如果您可以保证子查询是不同的，或者您不关心这些重复项，请`UNION ALL`改用。

（在您的情况下，按非索引值排序`int3`无论如何都需要一个临时表。）

* * *

要优化子查询，请运行它们[`EXPLAIN QUERY PLAN`](http://www.sqlite.org/lang_explain.html)以检查它们是否使用索引。

`LIKE`如果您确保正确声明索引，则可以使用；见[`LIKE`优化](http://www.sqlite.org/optoverview.html#like_opt)。

有关如何构建索引的说明，请参阅[查询计划。](http://www.sqlite.org/queryplanner.html)您的两个索引似乎是最佳的。

# c# - 我可以实现一个适用于我的抽象基类的所有扩展的基本 GetHashCode() 吗？

> ID：12608776
> 
> 赞同：0
> 
> 时间：2012-09-26T19:12:13.117
> 
> 标签：c#, abstract, gethashcode

我在[这里阅读了这个问题，](https://stackoverflow.com/questions/371328/why-is-it-important-to-override-gethashcode-when-equals-method-is-overriden-in-c)这使我在[这里找到了这篇文章](http://msdn.microsoft.com/en-us/library/ms173147.aspx)。

我有一个抽象基类，它允许我限制方法只接受扩展我的抽象基类（基本多态性）的类。我的问题是：我可以`GetHashCode()`在我的抽象基类中实现为任何具体实现提供合适的覆盖吗？（即避免`GetHashCode()`在每个具体类中覆盖。）

我在我的抽象基类中想象一个方法是这样的：

```
public abstract class FooBase
{
    private static readonly int prime_seed = 13;
    private static readonly int prime_factor = 7;

    public override int GetHashCode()
    {
        // Seed using the hashcode for this concrete class' Type so
        // two classes with the same properties return different hashes.
        int hash = prime_seed * this.GetType().GetHashCode();
        // Get this concrete class' public properties.
        var props = this.GetType().GetProperties(BindingFlags.Public);
        foreach (var prop in props)
        {
            // Factor in each of this concrete class' public properties' hashcodes.
            hash = (hash * prime_factor) + prop.GetHashCode();
        }
        return hash;
    }
} 
```

这似乎适用于一些基本的平等单元测试，但我觉得我忽略了一些东西。我仍然必须在每个具体类中提供覆盖以避免编译器警告不要覆盖 GetHashCode()，但至少这样我不必为每个类手动编写实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:25:30.680

这是否比以下表现更好：

```
public override int GetHashCode()
{
    return 1;
} 
```

哈希函数的一个关键是它必须快速计算。通过反射，您可能会失去从哈希中获得的所有好处。

进行基准测试是值得的。

此外，当 Equals 返回 true 时，哈希码必须相等，所以所有子类在其 Equals 方法中只使用公共属性吗？如果没有，您可能会考虑遍历所有属性，而不仅仅是公共属性。

编辑添加：此外，考虑在您的属性循环周围添加[未经检查](http://msdn.microsoft.com/en-us/library/a569z7k8%28v=vs.71%29.aspx)的内容，以防止在哈希大于 Int.MaxValue 时出现异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:22:57.487

您错过了一条基本规则 - GetHashCode() 结果必须在对象的整个生命周期内保持不变。在您的 GetHashCode 实现中，不能保证（因为您正在迭代的属性可能是可变的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:18:32.333

使用反射相当慢，但在某些情况下它是可以接受的。当类的实例是哈希表或字典中的键时，使用 GetHashCode 函数。在大多数情况下，您知道何时需要它。有一些工具，例如[Resharper](http://www.jetbrains.com/resharper/) ( [example](http://www.jetbrains.com/resharper/documentation/help20/AdvEditing/generateEquals.html) )，可以为您生成 GetHashCode 和 Equals 函数，而不是手动编写它们。

# c# - c#程序无响应，我如何找出它在哪里

> ID：12608778
> 
> 赞同：-6
> 
> 时间：2012-09-26T19:12:18.797
> 
> 标签：c#

我是一位经验丰富的 C/C++ 开发人员，负责接管 ac# 程序。有问题的程序运行了一段时间，然后变得无响应。我如何去找出它被锁定在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:13:55.037

If you can run it under a debugger, just break it, then look at the stack traces for all threads - especially the main thread. That should tell you where it's hanging.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:14:13.490

Run the program while debugging then when it starts to hang up click pause on your IDE and see what is taking so long. Depending on the type UI of app you might want to add some threading to your application

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:18:40.820

如果它是一个正在运行的程序，您可以将调试器*附加*到它，并使用它来中断其执行，以通过查看调用堆栈来找出程序当前的位置。

如果您可以自己启动程序，则在调试器下运行程序。您可以随时中断其执行，检查其状态（特别是通过查看调用堆栈），然后继续执行。

如果您无权访问运行程序的调试器，请使用任务管理器创建程序的转储，然后通过加载转储检查 WinDbg.exe 中的转储。您可以使用 WinDbg.exe 为您提供程序当前所在位置的调用堆栈`!analyze -v`。

# sql-server - 了解 SELECT 查询上的 SQL Server LOCKS

> ID：12608780
> 
> 赞同：89
> 
> 时间：2012-09-26T19:12:30.140
> 
> 标签：sql-server, tsql, linq-to-sql

我想知道`SELECT WITH (NOLOCK)`如果影响该表的唯一其他查询是`SELECT`查询，那么在表上使用有什么好处。

SQL Server 是如何处理的？一个`SELECT`查询会阻塞另一个`SELECT`查询吗？

我正在使用 SQL Server 2012 和 Linq-to-SQL `DataContext`。

（编辑）

关于性能：

*   如果使用lock ，第二个`SELECT`是否必须等待第一个`SELECT`完成`SELECT`？
*   与`SELECT WITH (NOLOCK)`?

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-09-26T21:02:12.873

`SELECT`SQL Server 中的 A将在表行上放置一个*共享锁*`SELECT`- 第二个也需要一个共享锁，并且它们彼此兼容。

所以没有人`SELECT`不能阻止另一个人`SELECT`。

查询提示的`WITH (NOLOCK)`用途是能够读取正在插入（通过另一个连接）并且尚未提交的数据。

如果没有该查询提示，a`SELECT`可能会被正在进行的`INSERT`（或`UPDATE`）语句阻止读取表，该语句将*排他*锁放置在行（或可能是整个表）上，直到该操作的事务已提交（或回滚）。

提示的问题`WITH (NOLOCK)`是：您最终可能正在读取根本不会插入的数据行（如果`INSERT`事务回滚） - 因此您的例如报告可能会显示从未真正提交到数据库的数据.

还有另一个可能有用的查询提示 - `WITH (READPAST)`。这指示该`SELECT`命令仅跳过它尝试读取且被独占锁定的任何行。`SELECT`不会阻塞，也不会读取任何“脏”未提交的数据——但它可能会跳过一些行，例如不显示表中的所有行。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-26T22:31:46.157

在性能方面，您始终专注于选择。
Shared 不会阻止读取。
共享锁块更新。
如果您有数百个共享锁，则更新需要一段时间才能获得独占锁，因为它必须等待共享锁清除。

默认情况下，选择（读取）采用共享锁。
共享 (S) 锁允许并发事务读取 (SELECT) 资源。
共享锁对其他选择（1 或 1000）没有影响。

区别在于 nolock 与 shared lock 效果如何更新或插入操作。

当资源上存在共享 (S) 锁时，没有其他事务可以修改数据。

共享锁会阻止更新！
但是 nolock 不会阻止更新。

这会对更新的性能产生巨大影响。它也会影响刀片。

脏读（nolock）听起来很脏。你永远不会得到部分数据。如果更新将 John 更改为 Sally，您将永远无法获得 Jolly。

我经常使用共享锁来实现并发性。数据一读就过时了。下一毫秒更改为 Sally 的 John 的读取是陈旧数据。在下一毫秒回滚 John 的 Sally 读取是陈旧数据。那是在毫秒级别。如果用户使用共享锁，我有一个数据加载器需要 20 小时才能运行，而如果用户没有使用锁，则需要 4 小时才能运行。在这种情况下，共享锁会导致数据过期 16 小时。

不要错误地使用 nolocks。但他们确实有一席之地。如果您要在一个字节设置为 1 时取消检查，然后在检查被取消时将其设置为 2 - 不是不锁定的时间。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-03-04T08:59:52.990

我必须添加一条重要的评论。每个人都在提到`NOLOCK`只读取脏数据。这并不精确。您也可能会两次获得同一行，或者在阅读期间跳过整行。原因是当 SQL Server 重新平衡 b-tree 时，您可能会同时请求一些数据。

检查其他线程

[https://stackoverflow.com/a/5469238/2108874](https://stackoverflow.com/a/5469238/2108874)

[http://www.sqlmag.com/article/sql-server/quaere-verum-clustered-index-scans-part-iii.aspx](http://www.sqlmag.com/article/sql-server/quaere-verum-clustered-index-scans-part-iii.aspx) )

> 使用 NOLOCK 提示（或将会话的隔离级别设置为 READ UNCOMMITTED），您告诉 SQL Server 您不期望一致性，因此无法保证。请记住，“不一致的数据”不仅意味着您可能会看到后来回滚的未提交更改，或者事务的中间状态中的数据更改。**这也意味着在扫描所有表/索引数据的简单查询中，SQL Server 可能会丢失扫描位置，或者您最终可能会两次获得同一行。**

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-09-26T19:34:02.033

在我的工作中，我们有一个非常大的系统，它同时在多台 PC 上运行，有非常大的表，有数十万行，有时甚至数百万行。

当你在一个非常大的表上做一个 SELECT 时，假设你想知道一个用户在过去 10 年中所做的每一笔交易，并且表的主键没有以有效的方式构建，查询可能需要几分钟跑步。

然后，我们的应用程序可能同时在许多用户的 PC 上运行，访问同一个数据库。因此，如果有人试图插入另一个 SELECT 正在读取的表中（在 SQL 试图读取的页面中），则可能会发生 LOCK 并且两个事务相互阻塞。

我们必须在我们的 SELECT 语句中添加一个“NO LOCK”，因为它是一个巨大的 SELECT 表，同时被很多用户大量使用，而且我们一直都有 LOCKS。

不知道我的例子够不够清楚？这是一个现实生活中的例子。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-05T08:42:29.327

允许读取未提交的`SELECT WITH (NOLOCK)`数据，这相当于`READ UNCOMMITTED`在您的数据库上设置了隔离级别。与在整个数据库上设置隔离级别相比，`NOLOCK`关键字允许更细粒度的控制。

维基百科有一篇有用的文章：[维基百科：隔离（数据库系统）](http://en.wikipedia.org/wiki/Isolation_(database_systems))

它还在其他 stackoverflow 文章中详细讨论。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T19:15:23.193

select with no lock - 将选择可能/可能不会插入的记录。您将读取脏数据。

例如 - 假设一个事务插入 1000 行然后失败。

当您选择时 - 您将获得 1000 行。

# asp.net-mvc-3 - 使用 MVC 3，建议创建菜单、HTML5、JQuery 或 3rd 方组件？

> ID：12608782
> 
> 赞同：0
> 
> 时间：2012-09-26T19:12:34.957
> 
> 标签：asp.net-mvc-3, razor

我只是想简化我的 MVC3 开发方法。我在视图中使用 Razor，并且想知道对于轻松创建更多花哨的 UI 小部件（例如菜单）的建议是什么。我希望我可以利用一些好的开源组件并将它们插入。我确实订阅了一个好的 3rd 方组件库，但想知道这种类型的功能最好通过 JQuery UI 还是旧式 HTML/CSS 实现？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:21:28.370

我不会在这个上重新创建轮子，因为很多网站已经这样做了。如果你想简化你的开发，我会说使用你的 3rd 方库或找到一个好的 jQuery 插件。您可能可以轻松地在 HTML/CSS/Jquery 中创建自己的，但稍后会添加到您的测试中。现有的 3rd 方/jQuery 类型的组件将花费更少的时间，并且已经内置了许多您想要的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:19:00.387

一般来说，Stack Overflow 不会在这里为您推荐工具。但是，我会说，是选择javascript工具还是直接html/css取决于需要。

最好使用最简单的解决方案来解决您的问题。CSS 可以很好地做菜单，直接的 CSS 菜单通常是最好的选择。但是，如果您需要直接 css 无法做到的事情，那么您需要添加 javascript。例如，CSS 菜单的一个问题是很容易“滚出”菜单并使其从您的指针下消失。大多数 javascript 菜单都会添加一个延迟，允许您滚动一秒钟并在菜单消失之前返回。这提高了可用性。

甚至很多花哨的效果都可以严格地在 CSS 中完成，但与许多这样的事情一样......它不会在所有浏览器中兼容，这又是 javascript 发挥作用的地方。有时，全面兼容的唯一方法是使用 js（至少不会丢失功能）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T00:11:50.730

我建议在 conjecuyion 中使用[MVC SiteMap Provider](https://github.com/maartenba/MvcSiteMapProvider)和选择的 JavaScript 菜单，例如 SuperFish [http://users.tpg.com.au/j_birch/plugins/superfish/](http://users.tpg.com.au/j_birch/plugins/superfish/)。菜单花哨的 JS 部分是最不重要的。

从 MVC 的角度来看，我认为真正重要的是如何管理和维护菜单。MVC SiteMap Provider 使得构建维护菜单变得非常容易（甚至可以使用 Attributes 使 Actions 出现在菜单上）。它还可以执行诸如安全修剪之类的操作，因此如果用户无权执行操作等，则它不会显示在菜单上。

我会检查一下。

# python - 在 matplotlib 中更改 x 或 y 轴上的“滴答频率”

> ID：12608788
> 
> 赞同：650
> 
> 时间：2012-09-26T19:12:53.957
> 
> 标签：python, matplotlib, plot, axes, xticks

我正在尝试修复 python 如何绘制我的数据。

说

```
x = [0,5,9,10,15] 
```

和

```
y = [0,1,2,3,4] 
```

然后我会这样做：

```
matplotlib.pyplot.plot(x,y)
matplotlib.pyplot.show() 
```

并且 x 轴的刻度以 5 的间隔绘制。有没有办法让它显示 1 的间隔？

* * *

## 回答 #1

> 赞同：778
> 
> 时间：2012-09-26T19:24:08.597

您可以使用以下命令明确设置要打勾的位置`plt.xticks`：

```
plt.xticks(np.arange(min(x), max(x)+1, 1.0)) 
```

* * *

例如，

```
import numpy as np
import matplotlib.pyplot as plt

x = [0,5,9,10,15]
y = [0,1,2,3,4]
plt.plot(x,y)
plt.xticks(np.arange(min(x), max(x)+1, 1.0))
plt.show() 
```

* * *

（为了以防万一，`np.arange`使用了而不是 Python 的函数，并且是浮点数而不是整数。）`range``min(x)``max(x)`

* * *

（`plt.plot`或`ax.plot`）函数将自动设置默认值`x`和`y`限制。如果您希望保持这些限制，并且只需更改刻度线的步长，那么您可以使用`ax.get_xlim()`来发现 Matplotlib 已经设置的限制。

```
start, end = ax.get_xlim()
ax.xaxis.set_ticks(np.arange(start, end, stepsize)) 
```

默认的刻度格式化程序应该可以将刻度值四舍五入到合理的有效数字位数。但是，如果您希望对格式有更多的控制，您可以定义自己的格式化程序。例如，

```
ax.xaxis.set_major_formatter(ticker.FormatStrFormatter('%0.1f')) 
```

这是一个可运行的示例：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.ticker as ticker

x = [0,5,9,10,15]
y = [0,1,2,3,4]
fig, ax = plt.subplots()
ax.plot(x,y)
start, end = ax.get_xlim()
ax.xaxis.set_ticks(np.arange(start, end, 0.712123))
ax.xaxis.set_major_formatter(ticker.FormatStrFormatter('%0.1f'))
plt.show() 
```

* * *

## 回答 #2

> 赞同：256
> 
> 时间：2013-11-14T08:38:42.450

另一种方法是设置轴定位器：

```
import matplotlib.ticker as plticker

loc = plticker.MultipleLocator(base=1.0) # this locator puts ticks at regular intervals
ax.xaxis.set_major_locator(loc) 
```

根据您的需要，有几种不同类型的定位器。

这是一个完整的例子：

```
import matplotlib.pyplot as plt
import matplotlib.ticker as plticker

x = [0,5,9,10,15]
y = [0,1,2,3,4]
fig, ax = plt.subplots()
ax.plot(x,y)
loc = plticker.MultipleLocator(base=1.0) # this locator puts ticks at regular intervals
ax.xaxis.set_major_locator(loc)
plt.show() 
```

* * *

## 回答 #3

> 赞同：170
> 
> 时间：2016-03-25T23:24:37.790

我喜欢这个解决方案（来自[Matplotlib Plotting Cookbook](https://www.safaribooksonline.com/library/view/matplotlib-plotting-cookbook/9781849513265/ch03s11.html)）：

```
import matplotlib.pyplot as plt
import matplotlib.ticker as ticker

x = [0,5,9,10,15]
y = [0,1,2,3,4]

tick_spacing = 1

fig, ax = plt.subplots(1,1)
ax.plot(x,y)
ax.xaxis.set_major_locator(ticker.MultipleLocator(tick_spacing))
plt.show() 
```

该解决方案通过给定的数字为您提供对刻度间距的显式控制`ticker.MultipleLocater()`，允许自动确定限制，并且以后易于阅读。

* * *

## 回答 #4

> 赞同：132
> 
> 时间：2016-04-15T11:46:09.783

如果有人对通用单线感兴趣，只需获取当前刻度并使用它通过每隔一个刻度采样来设置新刻度。

```
ax.set_xticks(ax.get_xticks()[::2]) 
```

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2015-08-13T20:15:58.687

这有点老套，但到目前为止，我发现这样做是最干净/最容易理解的示例。这是来自这里的答案：

[在matplotlib颜色栏中隐藏每个第n个刻度标签的最干净方法？](https://stackoverflow.com/questions/20337664/cleanest-way-to-hide-every-nth-tick-label-in-matplotlib-colorbar)

```
for label in ax.get_xticklabels()[::2]:
    label.set_visible(False) 
```

然后，您可以根据您想要的密度遍历标签，将它们设置为可见或不可见。

编辑：请注意，有时 matplotlib 设置标签 == `''`，所以它可能看起来像一个标签不存在，而实际上它是并且只是没有显示任何东西。为确保您循环浏览实际可见的标签，您可以尝试：

```
visible_labels = [lab for lab in ax.get_xticklabels() if lab.get_visible() is True and lab.get_text() != '']
plt.setp(visible_labels[::2], visible=False) 
```

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2019-11-02T21:21:01.103

如果您只想将间距设置为具有最少样板的简单单行：

```
plt.gca().xaxis.set_major_locator(plt.MultipleLocator(1)) 
```

也适用于小蜱：

```
plt.gca().xaxis.set_minor_locator(plt.MultipleLocator(1)) 
```

有点满口，但非常紧凑

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2014-12-17T19:18:45.353

这是一个古老的话题，但我时不时地偶然发现这个并制作了这个功能。非常方便：

```
import matplotlib.pyplot as pp
import numpy as np

def resadjust(ax, xres=None, yres=None):
    """
    Send in an axis and I fix the resolution as desired.
    """

    if xres:
        start, stop = ax.get_xlim()
        ticks = np.arange(start, stop + xres, xres)
        ax.set_xticks(ticks)
    if yres:
        start, stop = ax.get_ylim()
        ticks = np.arange(start, stop + yres, yres)
        ax.set_yticks(ticks) 
```

像这样控制刻度的一个警告是，在添加一行后，人们不再享受最大比例的交互式自动更新。然后做

```
gca().set_ylim(top=new_top) # for example 
```

并再次运行 resadjust 功能。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2015-03-11T13:26:52.810

我开发了一个不优雅的解决方案。考虑我们有 X 轴以及 X 中每个点的标签列表。

例子：

```
import matplotlib.pyplot as plt

x = [0,1,2,3,4,5]
y = [10,20,15,18,7,19]
xlabels = ['jan','feb','mar','apr','may','jun'] 
```

假设我只想显示 'feb' 和 'jun' 的刻度标签

```
xlabelsnew = []
for i in xlabels:
    if i not in ['feb','jun']:
        i = ' '
        xlabelsnew.append(i)
    else:
        xlabelsnew.append(i) 
```

很好，现在我们有一个虚假的标签列表。首先，我们绘制了原始版本。

```
plt.plot(x,y)
plt.xticks(range(0,len(x)),xlabels,rotation=45)
plt.show() 
```

现在，修改后的版本。

```
plt.plot(x,y)
plt.xticks(range(0,len(x)),xlabelsnew,rotation=45)
plt.show() 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2017-07-28T20:55:08.483

# 纯 Python 实现

下面是所需功能的纯 python 实现，它处理具有正、负或混合值的任何数字系列（int 或 float），并允许用户指定所需的步长：

```
import math

def computeTicks (x, step = 5):
    """
    Computes domain with given step encompassing series x
    @ params
    x    - Required - A list-like object of integers or floats
    step - Optional - Tick frequency
    """
    xMax, xMin = math.ceil(max(x)), math.floor(min(x))
    dMax, dMin = xMax + abs((xMax % step) - step) + (step if (xMax % step != 0) else 0), xMin - abs((xMin % step))
    return range(dMin, dMax, step) 
```

# 样本输出

```
# Negative to Positive
series = [-2, 18, 24, 29, 43]
print(list(computeTicks(series)))

[-5, 0, 5, 10, 15, 20, 25, 30, 35, 40, 45]

# Negative to 0
series = [-30, -14, -10, -9, -3, 0]
print(list(computeTicks(series)))

[-30, -25, -20, -15, -10, -5, 0]

# 0 to Positive
series = [19, 23, 24, 27]
print(list(computeTicks(series)))

[15, 20, 25, 30]

# Floats
series = [1.8, 12.0, 21.2]
print(list(computeTicks(series)))

[0, 5, 10, 15, 20, 25]

# Step – 100
series = [118.3, 293.2, 768.1]
print(list(computeTicks(series, step = 100)))

[100, 200, 300, 400, 500, 600, 700, 800] 
```

# 示例使用

```
import matplotlib.pyplot as plt

x = [0,5,9,10,15]
y = [0,1,2,3,4]
plt.plot(x,y)
plt.xticks(computeTicks(x))
plt.show() 
```

[![样本使用情况图](../Images/b6fd85c6baaede6a5ab8f618e6add84e.png)](https://i.stack.imgur.com/imxIG.png)

请注意，x 轴的整数值均以 5 为间隔均匀分布，而 y 轴的间隔不同（`matplotlib`默认行为，因为未指定刻度）。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-06-30T07:33:23.257

```
xmarks=[i for i in range(1,length+1,1)]

plt.xticks(xmarks) 
```

这对我有用

如果您想要 [1,5]（包括 1 和 5）之间的刻度，则替换

```
length = 5 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2020-07-06T12:43:31.803

由于上述解决方案都不适用于我的用例，因此我在这里提供了一个使用（双关语！）的解决方案**，**`None`它可以适应各种场景。

这是一段代码示例，它在轴`X`和`Y`轴上产生杂乱的刻度。

```
# Note the super cluttered ticks on both X and Y axis.

# inputs
x = np.arange(1, 101)
y = x * np.log(x) 

fig = plt.figure()     # create figure
ax = fig.add_subplot(111)
ax.plot(x, y)
ax.set_xticks(x)        # set xtick values
ax.set_yticks(y)        # set ytick values

plt.show() 
```

现在，我们用一个新图来清理混乱，该图仅将 x 和 y 轴上的一组稀疏值显示为刻度。

```
# inputs
x = np.arange(1, 101)
y = x * np.log(x)

fig = plt.figure()       # create figure
ax = fig.add_subplot(111)
ax.plot(x, y)

ax.set_xticks(x)
ax.set_yticks(y)

# which values need to be shown?
# here, we show every third value from `x` and `y`
show_every = 3

sparse_xticks = [None] * x.shape[0]
sparse_xticks[::show_every] = x[::show_every]

sparse_yticks = [None] * y.shape[0]
sparse_yticks[::show_every] = y[::show_every]

ax.set_xticklabels(sparse_xticks, fontsize=6)   # set sparse xtick values
ax.set_yticklabels(sparse_yticks, fontsize=6)   # set sparse ytick values

plt.show() 
```

根据用例，可以简单地通过更改`show_every`和使用用于对 X 或 Y 或两个轴的刻度值进行采样的代码来调整上述代码。

如果这个基于步长的解决方案不适合，那么如果需要的话，也可以不规则的间隔填充`sparse_xticks`或的值。`sparse_yticks`

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-06-11T09:46:28.480

通用的一个班轮，仅进口 Numpy：

```
ax.set_xticks(np.arange(min(x),max(x),1)) 
```

在问题的上下文中设置：

```
import numpy as np
import matplotlib.pyplot as plt 
fig, ax = plt.subplots()
x = [0,5,9,10,15]
y = [0,1,2,3,4]
ax.plot(x,y)
ax.set_xticks(np.arange(min(x),max(x),1))
plt.show() 
```

这个怎么运作：

1.  `fig, ax = plt.subplots()`给出包含坐标区的 ax 对象.
2.  `np.arange(min(x),max(x),1)`给出从 x 的最小值到 x 的最大值的区间为 1 的数组. 这是我们想要的新的 x 刻度。
3.  `ax.set_xticks()`更改 ax 对象上的刻度。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2022-03-03T11:19:21.433

您可以遍历标签并显示或隐藏您想要的标签：

```
 for i, label in enumerate(ax.get_xticklabels()):
        if i % interval != 0:
            label.set_visible(False) 
```

# ajax - 如何在锚标记上触发 javascript Facebook 身份验证对话框？

> ID：12608790
> 
> 赞同：0
> 
> 时间：2012-09-26T19:13:10.653
> 
> 标签：ajax, facebook, facebook-javascript-sdk

我有一个简单的评级系统，登录用户只需点击它就可以异步更新。

但是，我仍然希望未登录的用户看到评级机制（假设是一个简单的“向上”箭头），但在他们单击链接时触发 Facebook 身份验证弹出窗口。

你能帮我吗？我有常规的 fb:login 按钮工作得很好。但是如何在常规锚标记上触发此操作（除了 fb:login 按钮）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:35:41.530

您需要调用 FB.login 方法 [https://developers.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)

您可以将此绑定到未登录用户的按钮单击，在回调中您可以注册原始评分操作或刷新页面。

# c++ - implementing a bignum library for rsa encryption

> ID：12608799
> 
> 赞同：1
> 
> 时间：2012-09-26T19:13:50.370
> 
> 标签：c++, rsa, division, arbitrary-precision

So of course I know there are simple solutions to this such as using the GMP library or numerous other arbitrary-precision libraries. This is for class work so I am not allowed to take any of these routes. After we build up all our operations we are leading up to be able to do a RSA encryption scheme.

I am using vectors to store n-bit numbers represented in binary. I have conversions to decimal later but I must operate on the binary and only convert for display.

I have successfully implemented addition, subtraction, and multiplication. I am stuck on division and modular operations... specifically modular exponentiation. I understand the algorithms at least at a basic level but cant seem to translate it into code that will work on arbitrary length numbers. I cant seem to find any examples of this type of work done in c++ without external libraries.

Some specific questions:

is there a better way to do modulus on a n-bit number besides just calling the division function I am writing and using the remainder returned?

I really would love to see some good c++ examples as I cant follow the GMP source code well at all.

Any good resources to study or some help would be greatly appreciated. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:31:40.843

您可以使用除法来伪造模数运算。您的模数运算相当于：

```
v = n - (n / m) * m 
```

其中 n 是除数，m 是模数，v 是输出值（所有任意精度数）

如果你被困在除法上，你可以像手动执行长除法一样实现它。（你应该在中学通过乘法和减法学会如何做到这一点。将过程转换为基数 2 很容易。如果你遇到困难，请在纸上做一些。如果你想要一个更有效的算法，你可能可以通过在谷歌上搜索“任意精度除法算法”之类的东西来找到一个）

一旦你有了模数，你就可以用重复平方计算模幂。观察我们计算一些大整数 X 的 67 次方，mod N：

```
v1  = X mod N         // X^1 mod N
v2  = v1  * v1  mod N // X^2 mod N
v4  = v2  * v2  mod N // X^4 mod N
v8  = v4  * v4  mod N
v16 = v8  * v8  mod N
v32 = v16 * v16 mod N
v64 = v32 * v32 mod N // X^64 mod N

v66 = v64 * v2  mod N // X^66 mod N
v67 = v66 * v1  mod N // X^67 mod N 
```

从数学上讲，您可以看到为什么这是有道理的。该算法是计算模幂的常用算法，并且在时间和空间上运行，与指数的大小成对数，与底数的大小成对数（即，即使对于巨大的数字，它也很快）

PS 确保你告诉你的教授他不让你使用外部库是愚蠢的。程序员可以学习的最重要的事情之一是何时变得懒惰（即何时找到并使用库来做某事，而不是自制自己的解决方案）

# html - 创建一个带有标签的垂直分隔符

> ID：12608801
> 
> 赞同：-1
> 
> 时间：2012-09-26T19:13:54.413
> 
> 标签：html, css, forms, alignment

我以前在某个地方看到过这个，它工作得非常好。但我不记得在哪里。

无论如何，这是我想要的形式。

```
Enter a message:
+--------------------------------------------+
|                                            |
|                                            |
+--------------------------------------------+
                      |
                      |  Enter recipients:
                      |  +------------------+
 [Send to everyone]  OR  |                  |
                      |  +------------------+
                      |
                      |  [Send to these users] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:20:32.007

你的意思是在 StackOverflow 上？

只需检查 DOM 就会告诉您需要知道的内容：线条是具有左边框的绝对定位元素，并且“或”具有与主体相同的背景颜色以掩盖它周围的线条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:32:51.320

[有关示例，请参见此 jsfiddle](http://jsfiddle.net/q3qtn/)。这个想法是您在 HTML 中为用户提供两个选项......

```
<span class="screen-reader-text">Choose one of the following options:</span>
<ul>
    <li id="send-to-everyone">
        <!-- omitted -->
    </li>
    <li id="enter-recipients">
        <!-- omitted -->
    </li>
</ul> 
```

...然后设置第一个样式，`<li>`使其`float:left`具有`border-right`. 添加一些`:after`内容来创建“或”。

# ipad - Can you use 'webkit-overflow-scrolling: touch' for a tbody element on an ipad?

> ID：12608802
> 
> 赞同：0
> 
> 时间：2012-09-26T19:13:56.050
> 
> 标签：ipad

Does anyone know if it's possible to get the tbody to scroll with the '-webkit-overflow-scrolling: touch' property on an ipad?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T23:10:11.143

我不认为 webkit 允许溢出的 tbodys 没有设置标题和正文来显示：块，并且还设置单个表格单元格的宽度。这是关于该主题的一个很好的[链接](http://tjvantoll.com/2012/11/10/creating-cross-browser-scrollable-tbody/)。

也就是说 -webkit-overflow-scrolling:touch 将适用于任何设置为溢出的东西。我也有一个关于 tbody 的工作示例。

# xcode - 如何将 Xcode 与克隆的 git 存储库一起使用

> ID：12608803
> 
> 赞同：5
> 
> 时间：2012-09-26T19:14:01.040
> 
> 标签：xcode, github

我是 gitHub 的新手，并被邀请从事一个私人项目。我熟悉 XCode，并希望使用它来处理项目，因为它具有我习惯的自动完成功能。我的问题是我不知道如何设置它，以便我可以拉 git 存储库，在 XCode 中编辑和测试，然后推送。我已经阅读了一些关于在 XCode 中设置 git 的教程，并且我成功地能够连接到我拉取的存储库，但是一旦我这样做了，不知道如何将其用作 XCode 项目。

以下是一些细节：

我为我的计算机制作了一个 SSH 密钥，并通过终端克隆了存储库。显然我可以在这里更新文件，然后使用 git commit 和 git push，但是我想使用 XCode 来编辑代码完成。

这个项目有一个make文件，虽然我不知道如何使用这些文件，除了在终端中输入“make all”。我假设我可以使用 Xcode 进行设置，以便在构建时使用 make 文件，但是阅读有关此文档的文档让我意识到我对设置的了解不够。

我曾尝试制作一个 Xcode 项目，然后导入我的文件，但问题是 Xcode 坚持在项目文件夹中创建一个与存储所有文件的项目同名的目录。因此，我的头文件的所有地址都出错了。

我认为克隆一个 git 项目然后在 Xcode 中编辑是非常标准的。有没有人可以去寻求帮助的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:20:45.627

从应用商店下载 SourceTree。它是免费的，而且很有趣。你可以在终端窗口中使用 'git clone WhatOneYouWant -b WhicheverBranch' 克隆它。然后只需将项目从 finder 拖到主 sourceTree 窗口中。

或者，您可以直接从 xcode 的主打开页面上的 gitHub 获取它。如果当前没有打开的项目，在打开窗口的左侧，您会看到一行显示“连接到存储库”。

如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:04:22.413

这不是您问题的确切答案，但确实有效。

如果你单独安装 git 并从命令行克隆，你可以：

使用 Spotlight*找到您克隆的项目文件夹*

双击相应的 .xcodeproj 文件并开始编辑。

# javascript - 对javascript中的“this”关键字感到困惑

> ID：12608807
> 
> 赞同：4
> 
> 时间：2012-09-26T19:14:26.267
> 
> 标签：javascript, jquery, this

我很长时间没有使用 Javascript，今天一直在刷新自己。一直让我感动的一件事是`this`关键字。我知道在 jQuery 事件处理程序中，例如 click 事件，`this`是指触发事件的元素。即使我的函数没有参数，如何`this`传递给我作为回调的函数？

给定以下代码：

```
$("tr.SummaryTbRow").data("Animating", false);
$("tr.SummaryTbAltRow").data("Animating", false);

$("tr.SummaryTbRow").click(function () {
    if ($(this).data("Animating") == false) {
        if ($(this).next(".Graph").css("display") == "none") {
            $(this).data("Animating", true);

            //Part I am questioning.
            setTimeout(function () {
                $(this).data("Animating", false);
            }(this), 550);

            $(this).next(".Graph").slideRow('down', 500);
        }
        else {
            $(this).data("Animating", true);
            $(this).next(".Graph").slideRow('up', 500);
        }
    }
}); 
```

我试图弄清楚如何将带有类的元素表行传递`SummaryTbRow`给我的 setTimeout 回调函数。jQuery 传递`this`的方式与我使用匿名回调函数所做的事情相似吗？我的`this`内部函数是指`this`我传入的吗？

我知道我可以这样做：

```
setTimeout(function (element) {
    $(element).data("Animating", false);
}(this), 550); 
```

但我想弄清楚 jQuery 如何能够传递`this`给我的回调函数，即使我的函数需要 0 个参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:16:18.887

要回答您最后一个问题，您可以将您选择的接收器传递给 javascript 中的函数，例如[调用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)：

```
someFunction.call(someObject); 
```

里面`someFunction`，`this`会`someObject`。

在你的情况下，你似乎想要的是

```
setTimeout(function (element) {
    $(element).data("Animating", false);
}, 550, this); // this will be passed as element to the callback 
```

或（[更兼容](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)）

```
var _this = this;
setTimeout(function () {
    $(_this).data("Animating", false);
}, 550); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T19:16:45.423

简短的回答：

您可以`this`使用函数`.call()`和`.apply()`方法设置函数。

长答案：

任何函数上的变量`this`都类似于`arguments`变量（这可能是你不知道的）。它是在调用函数时设置的，是函数调用方式的产物。为了解释，让我从一个演示开始`arguments`。考虑：

```
myFunction = function () {
    return arguments.length;
}; 
```

现在让我们看几个调用`myFunction`：

```
myFunction(); //is 0
myFunction(null); //is 1
myFunction(undefined); //is 1
myFunction(0, 0, 0, 0, 0); //is 5 
```

如您所见， 的值`arguments.length`不取决于我们编写函数的方式或位置，而是取决于我们*调用*函数的方式。`this`变量（也称为“调用对象”）也是如此。设置调用对象的方法只有 3 种（在 ES5 中有第 4 种方法，但我们将忽略它）：

1.  您可以通过使用点表示法调用函数来设置它（例如`something.myFunction()`）
2.  您可以使用函数`.call()`或`.apply()`方法来设置它（例如`myFunction.call(someObject)`）
3.  如果没有使用方法 #1 或 #2 设置，它将默认为全局对象（例如`window`）

所以大多数人习惯于方法#1。如果将函数分配为对象的属性，然后使用对象和点符号调用函数，则对象将设置为`this`. 像这样：

```
var myFn = (function () { return this.x });

var myObj = {
    x: 1,
    y: myFn
};

myObj.myFn(); //is 1 
```

但是我们也可以使用方法 2，如果`myFn`它不是我们想要调用它的对象的属性，但是对象遵循正确的形式以便`myFn`能够对其进行操作（请参阅：duck typing）：

```
var myOtherObj = {
    x: 2
}

myFn.call(myOtherObj); //is 2
myFn.apply(myOtherObj); //is 2
myFn.apply({ x : 3}); //is 3 
```

很酷，嗯？这就是 jQuery 的做法。当他们执行您的回调时，他们会使用`.apply(event.target)`（设置`this`为事件的目标对象）来执行此操作。由于他们的`callbacks`框架，他们以更复杂的方式来做这件事，[但想法就在那里](https://github.com/jquery/jquery/blob/master/src/callbacks.js#L68)。

无论如何，如果我不解释方法#3，我不会提供一个长答案，这会让一些人完全发疯：如果你不设置调用对象会发生什么？

因为所有全局变量都是全局对象的隐式属性，所以您可以从方法 #3 中获得一些有趣的效果。如：

```
var x = 4;
myFn(); //is 4 
```

但大多数时候，你没有足够的运气让你的全局对象满足函数对其调用对象的要求，所以通常它只会导致错误和很多挫败感。

可能比您所寻找的要多，但希望您现在对调用对象及其狡猾的方式有了更多的了解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:16:34.673

您可以使用[`fn.call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)或[`fn.apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)两者都使用用于 的上下文参数来调用函数`this`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T19:18:42.903

[Apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)，[call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call) 和[bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)方法用于此目的。在您的情况下，您只需编写：

```
setTimeout(function() {
  $(this).data("Animating", false);
}.bind(this), 550); 
```

# php - 使用javascript函数添加另一个文件上传字段输入消失

> ID：12608809
> 
> 赞同：1
> 
> 时间：2012-09-26T19:14:28.843
> 
> 标签：php, javascript, file-upload

首先，我向用户显示一个文件输入字段，他们可以单击“添加一个”以添加一个输入字段，但是当他们已经选择了一个文件，然后单击“添加输入字段”为所有先前输入字段选择的文件消失。有没有办法纠正这个问题？

这是我的javascript函数：

```
 function _add_more() {
    var txt = "<br><input type=\"file\" name=\"item_file[]\">";
    document.getElementById("files").innerHTML += txt;
  } 
```

这是我的html表单：

```
<div id="form">

<h4>BOWMAN - Add an album <a href="index.php"> back</a></h4>
<form method="post" action="procesblogpost.php" enctype="multipart/form-data">
  <label for="title">Give the album it's name</label><br/>
  <input type="text" id="title" name="title" /><br/><br/>

  <label for="info">some info about the album?</label><br/>
  <textarea id="info" name="info"></textarea><br/><br/>
  <div id="uploadpic">
      <label for="picturelink">now choose some pictures</label><br/>
      <div id="files">
          <input type="file" name="item_file[]">
      </div>
      <a href="javascript:_add_more();" title="Add more">+</a>
  </div>
  <br/><br/>
  <input type="submit" id="submit" name="submit" value="send it of to the www" />
</form>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:26:13.507

你可以试试这个

```
function _add_more() {
    var txt = document.createElement('input');
    txt.type="file";
    txt.name="item_file[]";
    document.getElementById("files").appendChild(txt);
} 
```

[**演示**](http://jsbin.com/olunek/1/)。

# javascript - Ember.js Appropriately reference property of unrelated item

> ID：12608810
> 
> 赞同：1
> 
> 时间：2012-09-26T19:14:32.533
> 
> 标签：javascript, ember.js

Assuming an ember.js router application with an application controller, application view, a view type that I plug and play with, and an unrelated controller that handles external data. How can that third view have a computed property from the unrelated controller, what do I put into the `.property()` elipses so that it gets notified of changes?

e.g.

```
App.ExternalDataController = Em.Controller.extend
    stellarProperty: 'super value' #I want OtherView to have a computer property referencing this

App.ApplicationController = Em.ArrayController.extend
    content: [] #Assume a bunch of values of some kind here

App.ApplicationView = Em.View.extend
    templateName: 'app-view'

App.OtherView = Em.View.extend
    templateName: 'other-view'
    someComputedProperty: (->
        App.router.externalDataController.get('stellarProperty') + ' flying pigs'
    ).property() #What do I put in that property elipses? 
```

templates

```
<script type="text/x-handlebars" data-template-name="application">
   <div>
       {{#each content}}
           {{name}} -- {{view App.OtherView}}
       {{/each}}
   </div>
</script>
<script type="text/x-handlebars" data-template-name="other-view">
   <span>Irate goats and {{view.someComputedProperty}}</span>
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T02:39:01.373

简短的回答是您应该通过视图的控制器使您需要的属性可用。

在您的示例中，因为`OtherView`嵌套在`ApplicationView`的模板中，所以它将具有`controller`设置为 的属性`ApplicationController`。在您的路由器中，您可以调用`router.applicationController.connectControllers('externalData')`. 这将`externalDataController`在`applicationController`. 然后你可以公开你需要的属性：

```
App.ApplicationController = Em.ArrayController.extend
  content: [] #Assume a bunch of values of some kind here
  externalDataController: null # set via connectControllers call in router
  stellarPropertyBinding: Em.Binding.oneWay('externalDataController.stellarProperty') 
```

并`OtherView`变成：

```
App.OtherView = Em.View.extend
  templateName: 'other-view'
  someComputedProperty: (->
    @get('controller.stellarProperty') + ' flying pigs'
  ).property('controller.stellarProperty') 
```

希望有帮助！

# shell - Concurrency control in shell

> ID：12608811
> 
> 赞同：0
> 
> 时间：2012-09-26T19:14:36.623
> 
> 标签：shell

I have two process P1 and P2\. Second process P2 is running infinity. When first process is going to run then second process should going to waiting state until first is not completed.

Can you provide the easiest way to handle this situation.

Thanks !!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:22:18.107

你的问题不是很清楚。但无论如何，这里是选项：

```
 kill -s SIGSTOP $P2    #P2 - process id of P2 
```

这将暂停您可以在 P1 运行时使用的 P2，然后继续：

```
 kill -s SIGCONT $P2 
```

或者`wait`在进程 P2 中使用：

```
wait $P1 
```

这将等到 P1 结束。

# actionscript-3 - Trouble accessing Array Elements

> ID：12608815
> 
> 赞同：0
> 
> 时间：2012-09-26T19:14:49.887
> 
> 标签：actionscript-3, flash

I'm creating this array.

```
var GPA_Array:Array=new Array();

var dg:DataGrid= new DataGrid();

gpaBuild();

            function gpaBuild()
            {

                dg.columns=["Num","Course","Grade","Credits"];

                GPA_Array.push({Num:"1",Course:"ADS",Grade:"A+",Credits:"4"});
                GPA_Array.push({Num:"1",Course:"ADD",Grade:"A+",Credits:"4"});
                dg.dataProvider=new DataProvider(GPA_Array);    

            } 
```

after pushing data in the array ,i need to accees Grade and credits. I have tried this method,

```
GPA_Array[0][1],GPA_array[0][2] , 
```

but it didn't work. If i try to trace it

```
 trace(GPA_Array[0][1]) 
```

it gives me undefined . also ,when i use trace(GPA_array.toString), it gives me error.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:38:06.897

您的 push() 方法似乎将一个对象推送到您的数组中，因此 GPA_Array[0][1] 可能会引发异常。将数组中的每个项目视为一个对象并使用对象表示法，您应该能够通过以下方式访问它：

```
Object gpaEntry = GPA_Array[0];
trace("gpaEntry {Num:" + gpaEntry.Num + ",Course:" + gpaEntry.Course + ",Grade:" + gpaEntry.Grade + ",Credits:" + gpaEntry.Credits + "}); 
```

# jquery - JQuery’s $(document).ready is not always being called, is it a known issue?

> ID：12608820
> 
> 赞同：0
> 
> 时间：2012-09-26T19:15:01.743
> 
> 标签：jquery

I am testing my script in IE9\. I noticed that $(document).ready is not always being called. That means 1 out of 8 times the function referred by $(document).ready is not being called.

As soon as I move the $(document).ready call to the end of the document, it works perfectly. The problem arises only if I move the $(document).ready call to the section.

I read through the blog post that confirms this problem in IE6: [http://webbugtrack.blogspot.ca/2007/08/bug-153-self-closing-script-tag-issues.html](http://webbugtrack.blogspot.ca/2007/08/bug-153-self-closing-script-tag-issues.html)

Considering the reputation of JQuery, I am surprised by the issue. Is this a known issue/bug and workaround for JQuery? Or am I missing anything?

Thank you,

UPDATE:

I just wanted to update with regards to this issue:

The script was working fine on the other browsers (Chrome and FF), only my dev machine's IE was problematic. Once I reset IE (reset and restore on the IS settings’ advanced tab) $(document).ready started to work as expected. So I know the solution, but I like to know the root cause.

While I am disappointed on IE’s shaky behavior, this case is left with an unanswered question: One of IE’s setting changes the way that $(document).ready behaves, and it causes the problem I explained in this post. Does anybody know which setting cased this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T17:57:17.430

我已经能够重现这个问题。这个问题是零星的。我正在使用数据表和 jquery 版本 jquery-1.10.2。我已经确认没有触发 ready 事件。为了重现，IE 页面通过链接打开目标窗口名称。
例如转到第 2 页

单击该链接会打开一个新选项卡，其中包含一个带有数据表的页面。我将把这个新页面称为page#2，将它称为page#1。我没有关闭第 2 页。我返回第 1 页并再次单击该链接。如果我在选项卡（page#1 和 page#2）之间切换，我可以看到每 4 次尝试中大约有 1 次 page#2 没有与数据表（仅表）一起呈现。此外，浏览器窗口的左下角显示黄色感叹号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:30:29.133

听起来您可能正在使用 jQuery 1.8.0。

jQuery 1.8.0 引入了一个错误，导致 ready 方法在 IE9 中过早触发。

该错误已在 1.8.1 中修复，并且仍然在 1.8.2 中修复。如果您当前使用的是 1.8.0，升级到这两个版本中的任何一个都应该可以解决该问题。

1.8.1 的发行说明中提到了该错误[http://blog.jquery.com/2012/08/30/jquery-1-8-1-released/](http://blog.jquery.com/2012/08/30/jquery-1-8-1-released/)

这是票：[http ://bugs.jquery.com/ticket/12282](http://bugs.jquery.com/ticket/12282)

# java - Java Exception Handling?

> ID：12608828
> 
> 赞同：3
> 
> 时间：2012-09-26T19:15:52.830
> 
> 标签：java, exception, exception-handling, try-catch

The following code calculates the average of numbers that are stored in a text file. I have added some exception handling for "file not found" errors. I need to know how to add another exception for when the data in the text file is not numeric (or not int). I thought about adding multiple catches. Not sure how though?

```
import java.util.*;
import java.io.*;

public class NumAvg2 {

    public static void main(String[] args)
    {
    int c = 1;  
    long sum = 0;
    String strFileName;

    strFileName = args[0];

    Scanner scFileData;
    try{
        scFileData = new Scanner (new File(strFileName));

        while (scFileData.hasNext())
        {
            sum = sum + scFileData.nextInt();
            c++;
        }

    scFileData.close();
    System.out.println("Number of integers: " + (c - 1)); 
    System.out.println( "Average = " + (float)sum/(c - 1));

    } catch (FileNotFoundException e) {
        System.out.println("File not found!");
        System.exit(1);
    }

  } 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T19:20:52.410

如果需要，可以使用 Java 7 的[multi catch](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html)

```
try {
...
}
catch (FileNotFoundException|InputMismatchException ex) {
//deal with exception
} 
```

这比多次捕获要干净一些。如果抛出这些异常中的任何一个，它将被捕获在单个 catch 块中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T19:19:46.740

```
...
} catch (FileNotFoundException e) {
    System.out.println("File not found!");
    System.exit(1);
} catch (InputMismatchException e) {
    // Add stuff into your new exception handling block
}
... 
```

您的 IDE 可能没有对此抱怨，因为 InputMismatchException 是一个 RuntimeException（未经检查的异常），而 FileNotFoundException 是一个常规的检查异常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T19:20:52.537

```
} catch (InputMismatchException e) {
    System.out.println("Not integer!");
    System.exit(1);
} catch (FileNotFoundException e) {
    System.out.println("File not found!");
    System.exit(1);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-26T19:18:01.083

请注意，如果下一个标记不是整数，`Scanner.nextInt`也会抛出一个。`InputMismatchException`

从[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextInt%28%29)：

> 抛出： InputMismatchException - 如果下一个标记与 Integer 正则表达式不匹配，或者超出范围

`InputMismatchException`是 a `RuntimeException`，因此可以在`try/catch`块中忽略，但您也可以显式处理它：

```
try
{
    // ... Scanner.nextInt
}
catch (FileNotFoundException e)
{
    System.out.println("File not found!");
    System.exit(1);
}
catch (InputMismatchException e)
{
    // ... not an int
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T19:19:17.553

要捕获多个异常，您可以像这样链接它们：

```
public class NumAvg2 {

public static void main(String[] args)
{
int c = 1;  
long sum = 0;
String strFileName;

strFileName = args[0];

Scanner scFileData;
try{
    scFileData = new Scanner (new File(strFileName));

    while (scFileData.hasNext())
    {
        sum = sum + scFileData.nextInt();
        c++;
    }

scFileData.close();
System.out.println("Number of integers: " + (c - 1)); 
System.out.println( "Average = " + (float)sum/(c - 1));

} catch (FileNotFoundException e) {
    System.out.println("File not found!");
    System.exit(1);
} catch(InputMismatchException e){
    //handle it
}
} 
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T19:20:44.920

```
} catch (FileNotFoundException | InputMismatchException e) {
    e.printStackTrace();
    System.exit(1);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-26T19:18:13.663

您在哪里将数据从文件转换为整数？你应该在那里添加一个 try-catch ..

而不是使用下面的 while 循环，您必须在其中捕获 TypeMismatch 的异常：-

```
 while (scFileData.hasNext()) {
        try {
            sum = sum + scFileData.nextInt();
            c++;
        } catch (InputMismatchException e) {
            System.out.println("Invalid Input");
        }
    } 
```

您可以使用如下变体：-

```
 while (scFileData.hasNextInt())
    {
        sum = sum + scFileData.nextInt();
         c++;
    } 
```

`scanner.hasNextInt()`将自动检查是否输入整数..

另外，当您在 try-catch 块之外声明变量时。我建议不要使用大的 try-catch 块。

相反，您可以将`file reading`语句包围在 try-catch 周围（这将是一个语句）。然后在几个语句之后，您可以再次将您的语句包围`scanner.nextInt()`在另一个 try-catch 周围。

所以，我会像这样修改你的代码： -

```
public class NumAvg2 {

public static void main(String[] args)
{
    int c = 1;  
    long sum = 0;
    String strFileName;

    strFileName = args[0];

    Scanner scFileData;

    try{
        scFileData = new Scanner (new File(strFileName));

    } catch (FileNotFoundException e) {
        System.out.println("File not found!");
        System.exit(1);
    }
    while (true) {
        if (scFileData.hasNextInt())
        {
            sum = sum + scFileData.nextInt();
            c++;
            break;
        } else {
            System.out.println("Enter an integr");
        }
    }

    scFileData.close();
    System.out.println("Number of integers: " + (c - 1)); 
    System.out.println( "Average = " + (float)sum/(c - 1));

}
} 
```

这样你的代码变得更干净.. ***只是一个建议..

# clojure - Improve this clojure code: depth-first search algorithm

> ID：12608829
> 
> 赞同：2
> 
> 时间：2012-09-26T19:16:06.003
> 
> 标签：clojure, artificial-intelligence, depth-first-search

## Context

As an exercise for myself (I'm learning clojure). I wanted to implement the `Depth-first search` algorithm.

## How I did it

Using recursion

```
(def graph 
  {:s {:a 3 :d 4}
   :a {:s 3 :d 5 :b 4}
   :b {:a 4 :e 5 :c 4} 
   :c {:b 4} 
   :d {:s 4 :a 5 :e 2} 
   :e {:d 2 :b 5 :f 4} 
   :f {:e 4 :g 1}})

(def stack [[:s]])

(def goal :g)

(defn cost [Graph start goal]
  (goal (start Graph)))

(defn hasloop? [path]
  (not (= (count path) (count (set path)))))

(defn atgoal? [path]
  (= goal (last path)))

(defn solved? [stack]
  (some true? (map atgoal? stack)))

(defn addtopath [path node]
    (conj path node))

(defn pop* [stack]
    (last stack))

(defn findpath [stack]
    (if (not (solved? stack))
        (let [first* (pop* stack) l (last first*) ] 
                (findpath (drop-last 
                    (remove hasloop?  (lazy-cat
                                            (map #(addtopath first* %) 
                                            (keys (l graph))) stack)))))
        [(first stack)])) 
```

How to use

(findpath stack)

## Question

I'm really really interested in how this code can be improved. Both in readability, efficiency and performance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T19:32:30.470

不要使用lazy-cat，如果你这样做，你的seq就会实现`drop-last`。

Clojure 中的递归应该使用`loop`/`recur`来避免堆栈溢出。

不要`let`在一行中放置多个 s：

```
(let [first* (pop* stack)
      l      (last first*)] 
```

使用`(if-not`而不是`(if (not`. 相同的`(not=`

使用小写的 var 名称（`graph`, not `Graph`）。保持类、记录和协议的大小写。

# silverlight-5.0 - IsolatedStorge with Firefox

> ID：12608832
> 
> 赞同：1
> 
> 时间：2012-09-26T19:16:27.087
> 
> 标签：silverlight-5.0

I have following code to use IsolatedStorageFile:

```
IsolatedStorageFile iso = IsolatedStorageFile.GetUserStoreForApplication() 
```

It is fine with IE, but when I run the app with FF, I got the error for this code:

Operation not permitted.

How to resolve it?

# css - Setting background-image with knockout: Works in chrome but not other browsers

> ID：12608833
> 
> 赞同：2
> 
> 时间：2012-09-26T19:16:27.620
> 
> 标签：css, google-chrome, knockout.js

I'm using knockout to set the background image on some divs:

```
<div class="values" data-bind="foreach: values" >
  <div class="cvsection" data-bind="style: {'background-image': backgroundimg}" style="background-repeat: no-repeat; background-size:100%;background-repeat: no-repeat; background-position: center bottom;">

    <!-- Stuff inside the div -->   
  </div>
</div> 
```

Where in my viewmodel, each value() has a property like:

```
backgroundimg: 'url(i/img.jpg)' 
```

The background images show up as expected in Chrome and IE9, but not Firefox 15 or IE8\. I don't see any javascript errors in the console or anything.

Do you think this is a problem with knockout, or some other CSS issue? Any help would be appreciated!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T19:35:24.167

我想你的片段应该是

```
<div class="values" data-bind="foreach: values" >
  <div class="cvsection" data-bind="style: {backgroundImage: backgroundimg}" style="background-repeat: no-repeat; background-size:100%;background-repeat: no-repeat; background-position: center bottom;">

    <!-- Stuff inside the div -->   
  </div>
</div> 
```

*“背景图像”*已更改为*背景图像*

根据[文件](http://knockoutjs.com/documentation/style-binding.html)：

> 如果要应用字体粗细或文本装饰样式，或名称不是合法 JavaScript 标识符的任何其他样式（例如，因为它包含连字符），则必须使用该样式的 JavaScript 名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T10:00:05.283

看看[这里](http://knockoutjs.com/documentation/style-binding.html)，当它说：

> 注意：应用名称不是合法 JavaScript 变量名称的样式
> 
> 如果要应用字体粗细或文本装饰样式，或名称不是合法 JavaScript 标识符的任何其他样式（例如，因为它包含连字符），则必须使用该样式的 JavaScript 名称。例如，
> 
> 不要写 { font-weight: someValue }; 写 { fontWeight: someValue }
> 
> 不要写 { text-decoration: someValue }; 写 { textDecoration: someValue }

因此，如果要应用 css 规则“背景图像”，则必须在淘汰赛的*样式绑定*中写入“背景图像” 。

文档总是能解决问题；）

# python - writing a QTableWidget to a .csv or .xls

> ID：12608835
> 
> 赞同：3
> 
> 时间：2012-09-26T19:16:39.433
> 
> 标签：python, pyqt, qtablewidget, xlwt

Is it possible to write the contents of a QTableWidget to a csv? I found a question about writing to an .xls using xlwt, but can't seem to get it to work using my code.

```
def saveFile(self):
    filename = unicode(QtGui.QFileDialog.getSaveFileName(self, 'Save File', '', ".xls(*.xls)"))    
    wbk = xlwt.Workbook()
    self.sheet = wbk.add_sheet("sheet")
    self.write()
    wbk.save(filename)    

def write(self):
    for col in range (self.coordinates.columnCount()):
        for row in range(self.coordinates.rowCount()):
            text=str(self.coordinates.item(row,col).text())
            self.sheet.write(row,col,text) 
```

I get the following error:

```
 File "C:\Users\Tory\Desktop\DIDSON.py", line 186, in saveFile
    self.write()
  File "C:\Users\Tory\Desktop\DIDSON.py", line 192, in write
    text=str(self.coordinates.item(row,col).text())
AttributeError: 'NoneType' object has no attribute 'text' 
```

Why is this? self.coordinates is a QTableWidget. I was able to get the items themselves to save successfully to a worksheet, although I'd still like to save as a .csv...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T23:59:13.790

回答关于`AttributeError`: 的问题可能是因为表中有一些空行或空列。

一个空单元格没有`QTableWidgetItem`分配给它，所以`table.item()`会返回`None`（显然没有`'text'`属性）。

要将表格保存为 csv，请尝试以下示例（它也可以*打开*csv 文件，并希望处理任何潜在的 unicode 问题）：

```
import sys, csv
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self, rows, columns):
        QtGui.QWidget.__init__(self)
        self.table = QtGui.QTableWidget(rows, columns, self)
        for column in range(columns - 1):
            for row in range(rows - 1):
                item = QtGui.QTableWidgetItem('Text%d' % row)
                self.table.setItem(row, column, item)
        self.buttonOpen = QtGui.QPushButton('Open', self)
        self.buttonSave = QtGui.QPushButton('Save', self)
        self.buttonOpen.clicked.connect(self.handleOpen)
        self.buttonSave.clicked.connect(self.handleSave)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.table)
        layout.addWidget(self.buttonOpen)
        layout.addWidget(self.buttonSave)

    def handleSave(self):
        path = QtGui.QFileDialog.getSaveFileName(
                self, 'Save File', '', 'CSV(*.csv)')
        if not path.isEmpty():
            with open(unicode(path), 'wb') as stream:
                writer = csv.writer(stream)
                for row in range(self.table.rowCount()):
                    rowdata = []
                    for column in range(self.table.columnCount()):
                        item = self.table.item(row, column)
                        if item is not None:
                            rowdata.append(
                                unicode(item.text()).encode('utf8'))
                        else:
                            rowdata.append('')
                    writer.writerow(rowdata)

    def handleOpen(self):
        path = QtGui.QFileDialog.getOpenFileName(
                self, 'Open File', '', 'CSV(*.csv)')
        if not path.isEmpty():
            with open(unicode(path), 'rb') as stream:
                self.table.setRowCount(0)
                self.table.setColumnCount(0)
                for rowdata in csv.reader(stream):
                    row = self.table.rowCount()
                    self.table.insertRow(row)
                    self.table.setColumnCount(len(rowdata))
                    for column, data in enumerate(rowdata):
                        item = QtGui.QTableWidgetItem(data.decode('utf8'))
                        self.table.setItem(row, column, item)

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)
    window = Window(10, 5)
    window.resize(640, 480)
    window.show()
    sys.exit(app.exec_()) 
```

# php - Please help debug a PHP script that hangs with no error

> ID：12608836
> 
> 赞同：1
> 
> 时间：2012-09-26T19:16:39.387
> 
> 标签：php, magento

I created a product import script for Magento around a year ago and it's been running successfully since then, downloading several XML files containing the product catalogue, stock quantities and discontinued product list, as well as the images files associated with each product.

Suddenly this week the script no longer runs to completion. It appears to just end abruptly but with no error message being shown either on screen or on the server's error.log file in the directory containing the script.

I have the following at the head of my script so I ought to be seeing errors if they are actually occurring:

```
error_reporting(E_ERROR | E_WARNING | E_PARSE);
ini_set('display_errors', 'On'); 
```

The only thing I've seen that might be related, but I'm not convinced because I don't see it at all when I run the script from my browser - it only occurs if the script is run from crontab (php .../public_html/import/ss365products.php >/dev/null 2>&1), is the following in the error.log file:

```
[26-Sep-2012 12:00:01] PHP Warning:  require_once(/app/Mage.php) [<a href='function.require-once'>function.require-once</a>]: failed to open stream: No such file or directory in .../public_html/import/TempProducts.php on line 5 
```

I'm not really sure why I'm getting that at all being that Mage.php hasn't gone anywhere!

So... I'm really not sure where to look now to debug this issue. Any advice greatly recieved!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:02:19.793

对于 cron，只需提供 Mage.php 的完整文件夹路径，您的脚本就会运行良好。在 apache 上运行时，它`/app`是相对于 webroot 文件夹的，但在作为 cron 运行时，它会尝试查找相对于文件系统的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:21:14.643

```
[26-Sep-2012 12:00:01] PHP Warning:  require_once(/app/Mage.php) 
```

这看起来不像是相对路径。也许它正在根目录中寻找 Mage.php ？

试试这个：require_once "/full/path/to/app/Mage.php"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:21:43.723

利用`require_once(__DIR__ . '/app/Mage.php');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T09:17:16.370

在命令行中没有 $_SERVER['DOCUMENT_ROOT']，所以它会在错误的路径中搜索 Mage.php。由于某些可能未应用的 php.ini 设置（即设置了时间限制），该脚本可能会中止。

也许您应该使用以下命令将 cron 作业作为网页访问：

`wget http://yourdomain/cron.php`

# batch-file - Naming a Drive with a Batch File

> ID：12608840
> 
> 赞同：6
> 
> 时间：2012-09-26T19:16:55.910
> 
> 标签：batch-file

I am looking for a command to rename a few drives that I map every start-up in WinXP. I've got the mapping part down, I'm now interested in naming them programmatically with custom names, so I can keep them straight.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T16:42:17.760

我放弃了 DOS，转而学习了 PowerShell。最终结果是这样的：

```
$Net = New-Object -ComObject WScript.Network  
$Rename = New-Object -ComObject Shell.Application  

#### # Map the local drives  
Subst Q: 'C:\File Path\Uno'    
Subst U: 'C:\File Path\Dos' 

#### # Map the network drives  
$Net.MapNetworkDrive("X:", '\\Server\File Path\Uno')  
$Net.MapNetworkDrive("Y:", '\\Different Server\File Path\Dos')

#### # Rename everything  
$rename.NameSpace("Q:\").Self.Name = 'Network -> FOO'  
$rename.NameSpace("U:\").Self.Name = 'Network -> BAR'  
$rename.NameSpace("X:\").Self.Name = 'Local -> FOO'  
$rename.NameSpace("Y:\").Self.Name = 'Local -> BAR' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T19:47:55.970

在命令提示符下，输入：

```
LABEL x: yourlabel 
```

`x:`您的驱动器号在哪里，以及`yourlabel`您希望它具有的名称。

来自`LABEL /?`：

```
Creates, changes, or deletes the volume label of a disk.

LABEL [drive:][label]
LABEL [/MP] [volume] [label]

  drive:          Specifies the drive letter of a drive.
  label           Specifies the label of the volume.
  /MP             Specifies that the volume should be treated as a
                  mount point or volume name.
  volume          Specifies the drive letter (followed by a colon),
                  mount point, or volume name.  If volume name is specified,
                  the /MP flag is unnecessary. 
```

* * *

编辑：正如@mark 所指出的，这不适用于映射驱动器。这似乎是一个常见问题，并且可能有一种方法可以通过[注册表](https://superuser.com/questions/198499/change-network-drive-label-by-command-line)来实现，或者使用一个小的[vbs 脚本](http://oreilly.com/pub/h/1105)更容易一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-27T20:10:33.493

```
 REM  ad label to any drive
 set SETl=TEMP
 set SETD=B
 echo strComputer = "." > LTEMP.vbs && echo Set objWMIService = GetObject("winmgmts:" _ >> LTEMP.vbs && echo     + "{impersonationLevel=impersonate}!\\" + strComputer + "\root\cimv2") >> LTEMP.vbs && echo.  >> LTEMP.vbs && echo Set colDrives = objWMIService.ExecQuery _ >> LTEMP.vbs && echo     ("Select * from Win32_LogicalDisk where DeviceID = '%SETD%:'") >> LTEMP.vbs && echo.  >> LTEMP.vbs && echo For Each objDrive in colDrives >> LTEMP.vbs && echo     objDrive.VolumeName = "%SETl%" >> LTEMP.vbs && echo     objDrive.Put_ >> LTEMP.vbs && echo Next >> LTEMP.vbs && cscript LTEMP.vbs && del LTEMP.vbs 
```

# javascript - Websql 排队执行 - iOS6 Mobile Safari

> ID：12608846
> 
> 赞同：1
> 
> 时间：2012-09-26T19:17:49.200
> 
> 标签：javascript, ios, html, mobile, web-sql

自 iOS6 发布以来，我的 web 应用程序遇到了一系列错误，其中最糟糕的是我几乎 100% 肯定的问题是 websql 事务正在排队。当我第一次在移动 safari（ipad）中加载应用程序时，交易工作正常。然后，如果我关闭 safari 并再次打开它，事务似乎已排队并且永远不会执行。

如果我打开开发工具并运行一个简单`alert`的，方法将触发，如果我只是点击重新加载事务也可以正常工作，或者如果我将 db 事务的运行延迟 1 秒或者它也可以正常工作。

我不想运行 setTimeout 来运行事务。

这是 Safari 现在实施后的缓存问题吗？

如果有人对如何解决此问题有任何好主意，请在下面回答。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:47:47.120

它可能不是错误。您可能会不必要地使用一系列事务。您可以在每个事务中使用多个请求。 `onsuccess`回调，您可以重用事务。它应该工作。同时，限制每个事务的请求数。`setTimeout`永远不需要。

以下是如何使用单个事务插入多个对象

```
/**
* @param {goog.async.Deferred} df
* @param {string} store_name table name.
* @param {!Array.<!Object>} objects object to put.
 * @param {!Array.<(Array|string|number)>=} opt_keys
*/
ydn.db.req.WebSql.prototype.putObjects = function (df, store_name, objects, opt_keys) {

  var table = this.schema.getStore(store_name);
  if (!table) {
    throw new ydn.db.NotFoundError(store_name);
  }

  var me = this;
  var result_keys = [];
  var result_count = 0;

  /**
   * Put and item at i. This ydn.db.core.Storage will invoke callback to df if all objects
   * have been put, otherwise recursive call to itself at next i+1 item.
   * @param {number} i
   * @param {SQLTransaction} tx
   */
  var put = function (i, tx) {

    // todo: handle undefined or null object

    var out;
    if (goog.isDef(opt_keys)) {
      out = table.getIndexedValues(objects[i], opt_keys[i]);
    } else {
      out = table.getIndexedValues(objects[i]);
    }
    //console.log([obj, JSON.stringify(obj)]);

    var sql = 'INSERT OR REPLACE INTO ' + table.getQuotedName() +
        ' (' + out.columns.join(', ') + ') ' +
        'VALUES (' + out.slots.join(', ') + ');';

    /**
     * @param {SQLTransaction} transaction transaction.
     * @param {SQLResultSet} results results.
     */
    var success_callback = function (transaction, results) {
      result_count++;
      result_keys[i] = goog.isDef(out.key) ? out.key : results.insertId;
      if (result_count == objects.length) {
        df.callback(result_keys);
      } else {
        var next = i + ydn.db.req.WebSql.RW_REQ_PER_TX;
        if (next < objects.length) {
          put(next, transaction);
        }
      }
    };

    /**
     * @param {SQLTransaction} tr transaction.
     * @param {SQLError} error error.
     */
    var error_callback = function (tr, error) {
      if (ydn.db.req.WebSql.DEBUG) {
        window.console.log([sql, out, tr, error]);
      }
      df.errback(error);
      return true; // roll back
    };

    //console.log([sql, out.values]);
    tx.executeSql(sql, out.values, success_callback, error_callback);
  };

  if (objects.length > 0) {
    // send parallel requests
    for (var i = 0; i < ydn.db.req.WebSql.RW_REQ_PER_TX && i < objects.length; i++) {
      put(i, this.getTx());
    }
  } else {
    df.callback([]);
  }
}; 
```

关于事务队列，为了健壮性，最好由应用程序处理而不是由 SQLite 处理。基本上我们可以`complete`在开始新交易之前观察交易事件。只要它们受到控制，运行多个事务也可以。失控将在循环下打开交易。一般来说，我只会打开几笔交易。

以下是事务的排队方式：

```
/**
 * Create a new isolated transaction. After creating a transaction, use
 * {@link #getTx} to received an active transaction. If transaction is not
 * active, it return null. In this case a new transaction must re-create.
 * @export
 * @param {Function} trFn function that invoke in the transaction.
 * @param {!Array.<string>} store_names list of keys or
 * store name involved in the transaction.
 * @param {ydn.db.TransactionMode=} opt_mode mode, default to 'readonly'.
 * @param {function(ydn.db.TransactionEventTypes, *)=} oncompleted
 * @param {...} opt_args
 * @override
 */
ydn.db.tr.TxStorage.prototype.transaction = function (trFn, store_names, opt_mode, oncompleted, opt_args) {

  //console.log('tr starting ' + trFn.name);
  var scope_name = trFn.name || '';

  var names = store_names;
  if (goog.isString(store_names)) {
    names = [store_names];
  } else if (!goog.isArray(store_names) ||
    (store_names.length > 0 && !goog.isString(store_names[0]))) {
    throw new ydn.error.ArgumentException("storeNames");
  }
  var mode = goog.isDef(opt_mode) ? opt_mode : ydn.db.TransactionMode.READ_ONLY;
  var outFn = trFn;
  if (arguments.length > 4) { // handle optional parameters
    var args = Array.prototype.slice.call(arguments, 4);
    outFn = function () {
      // Prepend the bound arguments to the current arguments.
      var newArgs = Array.prototype.slice.call(arguments);
       //newArgs.unshift.apply(newArgs, args); // pre-apply
      newArgs = newArgs.concat(args); // post-apply
      return trFn.apply(this, newArgs);
    }
  }
  outFn.name = scope_name;

  var me = this;

  if (this.mu_tx_.isActive()) {
    //console.log(this + ' active')
    this.pushTxQueue(outFn, store_names, mode, oncompleted);
  } else {
    //console.log(this + ' not active')
    var transaction_process = function (tx) {

      me.mu_tx_.up(tx, scope_name);

      // now execute transaction process
      outFn(me);

      me.mu_tx_.out(); // flag transaction callback scope is over.
      // transaction is still active and use in followup request handlers
    };

    var completed_handler = function (type, event) {
      me.mu_tx_.down(type, event);
      /**
       * @preserve_try
       */
      try {
        if (goog.isFunction(oncompleted)) {
          oncompleted(type, event);
        }
      } catch (e) {
        // swallow error. document it publicly.
        // this is necessary to continue transaction queue
        if (goog.DEBUG) {
          throw e;
        }
      } finally {
        me.popTxQueue_();
      }
    };

    if (ydn.db.tr.TxStorage.DEBUG) {
      window.console.log(this + ' transaction ' + mode + ' open for ' + JSON.stringify(names) + ' in ' + scope_name);
    }
    this.storage_.newTransaction(transaction_process, names, mode, completed_handler);
  }

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:07:43.330

事实证明，在 websql 之前初始化 Facebook 会导致问题。注释掉 FB 后，应用程序运行正常，这也是 setTimeout 解决问题的原因；fb api 准备好了。我不知道执行线程是如何被阻塞的。

所以，对于任何使用 FB 然后尝试执行 websql 事务的人......延迟 FB！

虽然，websql 在 safari 负载上运行仍然有点慢......

# javascript - 将选择转换为输入而不是跨浏览器

> ID：12608847
> 
> 赞同：1
> 
> 时间：2012-09-26T19:17:58.977
> 
> 标签：javascript, jquery, select, input, cross-browser

我有这个标记

```
<select id="helpamount" name="helpamount"><?= get_texto_clave('amount')?>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="-1" class="convertoinput">more</option>
</select> 
```

这段代码尝试将其转换为输入

```
$('body').on('click','.convertoinput',function(){
    $(this).parent().after('<input type="number" id="'+$(this).parent().attr('id')+'" name="'+$(this).parent().attr('id')+'" value="" placeholder="Especifica un valor numerico" /> ');
    $(this).parent().remove();
}); 
```

知道为什么这仅在 Firefox 中有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:23:09.883

跨浏览器->

```
$('body').on('change','#helpamount',function(){
    if($(this).val() == -1){
        $(this).after('<input type="number" id="'+$(this).prop('id')+'" name="'+$(this).prop('id')+'" value="" placeholder="Especifica un valor numerico" /> ');
        $(this).remove();
    }
    $('body').off('change', '#helpamount');
});​ 
```

[jsFiddle 示例。](http://jsfiddle.net/J4FEp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:25:39.510

工作代码：

```
$('body').on('change','#helpamount',function(){
    var
        e = $(this),
        eid = e.attr('id');

    if (e.val() == e.find('option.convertoinput').val()) {
        e.after('<input type="number" id="'+eid+'" name="'+eid+'" value="" placeholder="Especifica un valor numerico" />').remove();
        $('body').off('change', '#helpamount');
    }
});​ 
```

jsFiddle：http: [//jsfiddle.net/zSbUA/1/](http://jsfiddle.net/zSbUA/1/)

# spring - import javax.persistence.column, javax.persistence.entity, javax.persistence.Id - 等等 - 无法解析

> ID：12608853
> 
> 赞同：11
> 
> 时间：2012-09-26T19:18:25.470
> 
> 标签：spring, hibernate, maven, jpa, annotations

我正在尝试遵循[本教程](http://viralpatel.net/blogs/spring3-mvc-hibernate-maven-tutorial-eclipse-example/)。我没有从使用可下载项目开始，而是从我之前做过的一个简单的“spring MVC - Maven - eclipse”项目开始。这个项目运行良好。

因此，如该教程中所述，我开始创建包。然后，我创建了我的第一个类`Contact.java`，其中包含各种注释。请参阅下面的课程。

```
package sphbmveclp.contact.form;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="CONTACTS")
public class Contact {

    @Id
    @Column(name="ID")
    @GeneratedValue
    private Integer id;

    @Column(name="FIRSTNAME")
    private String firstname;

    @Column(name="LASTNAME")
    private String lastname;

    @Column(name="EMAIL")
    private String email;

    @Column(name="TELEPHONE")
    private String telephone;

    public String getEmail() {
        return email;
    }
    public String getTelephone() {
        return telephone;
    }
    public void setEmail(String email) {
        this.email = email;
    }
    public void setTelephone(String telephone) {
        this.telephone = telephone;
    }
    public String getFirstname() {
        return firstname;
    }
    public String getLastname() {
        return lastname;
    }
    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }
    public void setLastname(String lastname) {
        this.lastname = lastname;
    }
    public Integer getId() {
        return id;
    }
    public void setId(Integer id) {
        this.id = id;
    }
} 
```

我添加了以下依赖项，认为它可以完成这项工作，因为这些注释是“标准 JPA 注释”

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
</dependency> 
```

然而，日食说

```
The import javax.persistence.Column cannot be resolved" for the first import.
The import javax.persistence.Entity cannot be resolved" for the second import. 
```

等等。

这是我定义的依赖项列表`pom.xml`：

```
 <properties>
        <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
        <javax.servlet.jstl.version>1.2</javax.servlet.jstl.version>
    </properties>

  <dependencies>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

       <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework.version}</version>
       </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${org.springframework.version}</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>${javax.servlet.jstl.version}</version>
        </dependency>

       <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>

       <dependency>
         <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
       </dependency>
  </dependencies> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-26T19:35:08.137

这解决了我的问题：

```
 <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
    </dependency> 
```

不完全确定我为什么需要它，而教程中根本没有提到它。

# python - 如何在 Python 中创建 shopify 脚本标签

> ID：12608858
> 
> 赞同：2
> 
> 时间：2012-09-26T19:18:34.147
> 
> 标签：python, shopify

我正在尝试使用 shopify API 包装器从 Python 创建一个简单的脚本标签： `shopify.ScriptTag('onload', 'http://test.com').save()` 这不起作用，因为没有创建标签，并且上面的代码返回`False`

我在任何地方都找不到包装器的参考文档，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:44:33.503

有关于[使用 shopify_python_api 包](http://wiki.shopify.com/Using_the_shopify_python_api)的文档，其中包括[处理错误](http://wiki.shopify.com/Using_the_shopify_python_api#Handling_Errors)的部分。

具体来说，`save()`是因为验证错误而返回 false，并且响应将包含错误消息以帮助您解决问题，可以通过调用`.errors.full_messages()`您调用的脚本标记对象来检索该错误消息`.save()`。

# ios6 - xCode 4.5 和 iOS 6 上的 NSLocalization

> ID：12608859
> 
> 赞同：4
> 
> 时间：2012-09-26T19:18:37.370
> 
> 标签：ios6, xcode4.5, nslocalizedstring

有什么方法可以在 xCode 4.5 for iOS6 中将 Localizable.strings 与 NSLocalizedString(@"KEY", @"") 一起使用，就像在旧版 iOS5 中一样？

这是我的示例代码：

In Localizable.strings
**"KEY" = "Hello World!";**

在 .m 脚本
中 NSString *tempString = NSLocalizedString(@"KEY", NULL);
NSLog(@"我的字符串是：%@", tempString);

iOS5.1 的日志是：“我的字符串是：Hello World！”
**iOS6 的日志是：“My String is: KEY”**

……我真的要疯了！我的错误在哪里？非常感谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T07:22:21.843

他们不需要创建一个新项目并复制，只需删除可本地化的文件，再次创建它就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T23:17:41.163

查看帖子的答案：[添加额外本地化时 IOS 字符串本地化停止工作](https://stackoverflow.com/questions/11828766/ios-string-localization-stops-working-when-adding-additional-localization)

这个对我有用。从模拟器（或手机）中清理构建 + 删除修复错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T20:02:07.493

我当前应用程序中的本地化字符串在 iO6 中仍然有效。我通常只使用 NSLocalizedString(@"KEY", NULL); 你确定你的 5.1 可以正常工作吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:45:59.460

我在我的一个字符串文件中的一行末尾缺少一个分号。即使我在再次构建项目时清理了项目，编译器也没有报告它。首先在重新启动 XCode 后报告错误，我可以找到它并修复它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T21:12:27.403

我找到的唯一解决方案是：

1.  从 xCode 模板重新启动一个新项目
2.  启用至少 2 种语言的本地化
3.  从损坏的项目中拖入所有旧文件
4.  将旧故事板的竞争复制到新故事板中
5.  仅在必要时进行频繁的快照

我真的不知道问题出在哪里，但现在一切都像往常一样正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T07:38:24.480

更改模拟器的语言设置。

# ruby-on-rails - 如何在 Rails 中的非保存/模拟对象上使用 dom_id？

> ID：12608862
> 
> 赞同：0
> 
> 时间：2012-09-26T19:18:42.280
> 
> 标签：ruby-on-rails, unit-testing, testing, functional-testing

**注意：我只是发布这个问题，以便其他人在需要时可以找到它，因为我找到了一个很好的解决方案。**

在我的控制器测试中，我不想提交到数据库，但我仍然希望控制器使用 finder 方法来获取模拟对象（通过模拟`find`方法），但是我想`dom_id`在这些模拟上使用`assert_select`，来验证他们正在被展示。

但是，由于它们是未保存的对象，因此`dom_id`会不断返回`new_object`而不是`object_1`,`object_2`等。

有什么快速的方法让它工作吗？我真的不想在测试中保留真实记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:18:42.280

假设您正在使用`ActiveSupport::TestCase`和`FactoryGirl`构建模型对象，您可以将其添加到您的`test/test_helper.rb`文件中：

```
# Generate model with id - useful for assert_select with dom_id
def model(name, options = {})
  @next_id = {} if @next_id.nil?
  @next_id[name] = 1 unless @next_id.has_key(name)

  m = build(name, options)
  m.id = @next_id[name]
  @next_id[name] += 1
  m
end 
```

然后，假设您将`RR`其用作模拟库，您可以执行以下操作：

```
test 'something' do
  posts = [model(:post), model(:post)]
  mock(Post).all { posts }
  get :index
  assert_select "##{dom_id(posts.first)}", posts.first.title
end 
```

# php - 用 PHP 和 Jquery 替换 Span 数据

> ID：12608864
> 
> 赞同：0
> 
> 时间：2012-09-26T19:18:45.830
> 
> 标签：php, jquery, html, sql

我尝试使用 Jquery、php 和 SQL 进行简单的跨度替换。我认为我对此进行了正确编码，但没有显示任何内容。我使用 jQuery 而不是 $ 来注意代码不会与正在使用的另一个脚本发生冲突。我怎样才能解决这个问题：

jQuery：

```
jQuery.ajax({
    type: "POST",
    url: "http://www.mysite.com/report/reportScripts/getData.php",
    data: "&id=<?php echo $_GET['repId']; ?>",
    dataType: 'html';
    success: function(data){
        jQuery('.msgbox').html(response);
    }
}); 
```

PHP：

```
$con = mysql_connect('localhost', '****', '****');

if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("*****", $con);

$sql="SELECT * FROM report_ordered WHERE referenceNum = '".$repId."'";

$result = mysql_query($sql);
$row = mysql_fetch_array($result);

echo $row['name']; 
```

HTML 跨度：

```
<span id="msgbox"></span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:20:46.897

您的 span 有一个 id，而不是一个类 - 将其称为：

```
jQuery('#msgbox').html(response); 
```

编辑 - 正如约翰在上面的评论中指出的那样，如果您将成功回调定义为`function(data){ ... }`，您当然必须参考`data`而不是参考`response`。

检查您的[开发人员工具](https://developers.google.com/chrome-developer-tools/docs/console)是否存在此类错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:21:57.990

## 1、成功返回数据中的html，但是你用response？

```
success: function(data){
    jQuery('.msgbox').html(data); # you used response 
} 
```

## 2.你用className找msgbox，但是msgbox有id

```
success: function(data){
    jQuery('#msgbox').html(data); # you used .msgbox
} 
```

## 3\. 使用对象作为数据：在 ajax 中输入

```
data: { id: <?php echo $_GET['repId']; ?> }, 
```

## 4\. 你如何获取 $repId？我希望你有一些验证？

```
$sql="SELECT * FROM report_ordered WHERE referenceNum = '".$repId."'"; 
```

# mysql - 概念类型中的成员数不匹配

> ID：12608868
> 
> 赞同：1
> 
> 时间：2012-09-26T19:19:10.120
> 
> 标签：mysql, entity-framework, devart, dotconnect

我首先在 dotConnect for MySQL 中使用实体框架代码，由于某种原因，我收到关于我的一个模型映射的错误。

我已经搜索过这个错误，它通常是由错误的 xml 文件或实体框架特定文件引起的。我没有使用任何这些，只有一个带有模型的 .cs 代码文件。

异常详情：

> System.Data.MappingException：概念类型“SiteModels.TournamentTable”中的成员数量与对象端类型“SiteModels.TournamentTable”中的成员数量不匹配。确保成员数量相同。

我不知道为什么会出现此错误，因为我没有任何设计器，只有一个包含代码的文件。

**这是有问题的类：**

```
public class TournamentTable
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

public List<TournamentColumn> Columns { get; set; }

public TournamentTable()
{
    Columns = new List<TournamentColumn>();
}

public void AddColumn(int index, TournamentColumn column)
{
    Columns.Insert(index, column);
}

public void RemoveColumn(int index)
{
    Columns.RemoveAt(index);
}

/// <summary>
/// Add a tournament cell at the top of the column.
/// </summary>
/// <param name="column"></param>
public void AddColumn(TournamentColumn column)
{
    Columns.Add(column);
}

/// <summary>
/// Returns the tournament column at the index specified.
/// </summary>
/// <param name="index"></param>
/// <returns></returns>
public TournamentColumn this[int index]
{
    get { return Columns[index]; }
}

/// <summary>
/// Returns the tournament cell at the index specified.
/// </summary>
/// <param name="columnIndex"></param>
/// <param name="cellIndex"></param>
/// <returns></returns>
public TournamentCell this[int columnIndex, int cellIndex]
{
    get { return Columns[columnIndex][cellIndex]; }
    set
    {

        Columns[columnIndex][cellIndex] = value;
    }
} 
```

}

上下文配置：

```
public class EntitiesContext : DbContext
{

    public EntitiesContext()
        : base()
    {
        System.Data.Entity.Database.SetInitializer<EntitiesContext>(new DropCreateDatabaseIfModelChanges<EntitiesContext>());
    }

public EntitiesContext(DbConnection connection)
    : base(connection, true)
{
}

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Conventions
      .Remove<System.Data.Entity.ModelConfiguration.Conventions
        .ColumnTypeCasingConvention>();
}

public DbSet<User> Users { get; set; }
public DbSet<Player> Players { get; set; }
public DbSet<Game> Games { get; set; }
public DbSet<TournamentTable> TournamentTables { get; set; } 
```

}

谢谢你的帮助，我没有任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:59:02.647

尝试注释掉索引器，看看是否有帮助。如果是这样，您可能需要在它们上放置 NotMapped 属性或将它们重新实现为方法。

# matlab - 如何在matlab中检查一系列数字

> ID：12608869
> 
> 赞同：0
> 
> 时间：2012-09-26T19:19:10.270
> 
> 标签：matlab, if-statement, numbers, switch-statement, range

我正在为一个问题编写一个 matlab 代码，并且我正在使用一个 switch case 来检查一系列数字。使用 switch case 是分配的要求。

```
switch score    
case {90,91,92,93,94,95,96,97,98,99,100}    
  disp('Your grade is an A');   
case {80,81,82,83,84,85,86,87,88,89}
  disp('Your grade is an B');
case {70,71,72,73,74,75,76,77,78,79}
  disp('Your grade is an C');
case {60,61,62,63,64,65,66,67,68,69}
 disp('Your grade is an D');
otherwise
 disp('Your grade is an F');
end 
```

无论如何，有没有使范围更容易键入`score < 60`等？

如果这种原始方法是唯一方法，如何检查小数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:40:24.523

如果你知道你总是这样得分，你可以使用

```
switch floor(score/10)
case {9 10}
case 8
case 7
[...]
end 
```

但是，如果您认为评分函数可能会发生变化，那么在调用`switch`语句之前将分数转换为类索引会很有用。

例如

```
%# calculate score index
nextClass = [60 70 80 90];
scoreIdx = sum(score>=nextClass);

%# assign output
switch scoreIdx
case 5
%# A
case 4
%# B
[...]

end 
```

当然，您可以将 switch 命令完全替换为`scoreIdx`上面的变量。

```
grades = 'FDCBA';
fprintf('Your grade is an %s',grades(scoreIdx+1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:28:39.903

您想将 num2cell 与`:`

```
case num2cell(60:69) 
```

在您的情况下，您将拥有：

```
 switch score 

case num2cell(90:100)

 disp('Your grade is an A');

 case num2cell(80:89)

 disp('Your grade is an B');

 case num2cell(70:79)

 disp('Your grade is an C');

 case num2cell(60:69)

 disp('Your grade is an D');

otherwise

 disp('Your grade is an F');

end 
```

但考虑到你的问题，我认为 if-elseif-elseif-else 与数字比较`>`更`<`合适，因为可能会有半分。现在使用你的 switch 语句，99.5 会得到和'F'。

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:38:00.473

我认为编写 if 语句会使代码更容易一些。有了这个，您不需要显式测试每个案例，只需让第一个触发设置等级的“事件”：

```
score = 75;

if score >= 90
    disp('Your grade is an A');
elseif score >= 80
    disp('Your grade is an B');
elseif score >= 70
    disp('Your grade is an C');
elseif score >= 60
    disp('Your grade is an D');
else
    disp('Your grade is an F');
end 
```

输出：

```
Your grade is an C 
```

# javascript - SignalR 异常记录？

> ID：12608874
> 
> 赞同：18
> 
> 时间：2012-09-26T19:19:38.933
> 
> 标签：javascript, signalr, signalr-hub

这更多是两个问题，但是：

1.  为我的 Hub 提供顶级异常处理程序的最佳方式是什么？当前版本的 SignalR 似乎不可能

2.  当我在集线器中抛出错误时，为什么这实际上对客户端没有任何作用？

    $.connection.hub.error(function() { return alert("test"); });

当我调试时，我可以看到我的错误方法正在连接，但是当我在集线器上抛出异常时，我可以看到从来没有尝试调用我在上面设置的方法。唯一发生的事情是 SignalR 将错误发送到控制台。

作为记录，我可以很好地连接其他事件

```
//Called during exceptions just fine 
$.connection.hub.received(function() {
  return alert("Received Data");
});

//Seems to do nothing?
$.connection.hub.error(function() {
  return alert("Received Exception");
}); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-27T02:39:55.087

`$.connection.hub.error`用于处理集线器连接故障。您可以使用 jQuery 的 deferred.fail() 来处理从特定集线器调用 ( `$.connection.hub.methodThatThrows().fail(function() { ... }`) 引发的异常，但这显然不能处理从*任何*调用引发的异常。

SignalR v1.0.0 将添加对`IHubPipelineModules`. 然后您将能够覆盖`HubPipelineModule.BuildIncoming`或`HubPipelineModule.OnIncomingError`然后可以将其添加到`HubPipeline`via `GlobalHost.HubPipeline.AddModule(myHubPipelineModule)`。

[https://github.com/SignalR/SignalR/issues/548](https://github.com/SignalR/SignalR/issues/548)

[https://github.com/SignalR/SignalR/commit/83fdbfd9baa1f1cc3399d7f210cb062597c8084c](https://github.com/SignalR/SignalR/commit/83fdbfd9baa1f1cc3399d7f210cb062597c8084c)

示例实现：

```
using Microsoft.AspNet.SignalR.Hubs;

public class MyHubPipelineModule : HubPipelineModule
{
    protected override void OnIncomingError(ExceptionContext exceptionContext,
                                            IHubIncomingInvokerContext invokerContext)
    {
        dynamic caller = invokerContext.Hub.Clients.Caller;
        caller.ExceptionHandler(exceptionContext.Error.Message);
    }
}

protected void Application_Start()
{
    GlobalHost.HubPipeline.AddModule(new MyHubPipelineModule());
}

// JS
// hub.client is also introduced in SignalR v1.0.0
$.connection.myHub.client.exceptionHandler = function (message) {
    alert(message);
}; 
```

# jquery - 带有嵌入式表单的 Jquery UI 对话框

> ID：12608875
> 
> 赞同：1
> 
> 时间：2012-09-26T19:19:45.970
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

我的 ASP.Net MVC3 应用程序中有“用户设置”页面。此页面包含许多用于动画的精美 Javascript 和 CSS。此页面允许用户更改他们的网站设置，并通过其自身的帖子进行此操作。

我现在的任务是在 Jquery UI 对话框中显示此页面。我已经能够使用以下 Javascript 代码成功完成此操作

```
$(document).ready(function () { 
        $('#settings-link').click(function () {
            var tag = $("<div></div>");
            $.ajax({
                url: "MyWebsite/MySettings",
                success: function (data) {
                    tag.html(data).dialog({ modal: true }).dialog('open');
                }
            });
        });
    }); 
```

我遇到的麻烦如下

当用户对其设置进行更改并单击“提交”按钮时，jquery 对话框消失，并且在后台页面中显示回发页面。理想情况下，我希望允许用户进行更改并回发以显示在 jquery 对话框本身中。关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:41:23.900

您必须使用 AJAX 在对话框发布数据中形成吗？你使用不显眼的 AJAX 吗？另请检查是否创建了 jQuery UI 对话框`iframe`（为此使用开发人员工具 (F12)）。

**编辑：**

要在对话框中显示发布结果，您可以使用以下方式：

1.  将您的表单声明为 AJAX 表单：使用 @Ajax.BeginForm() 并将指向 jquery.ajax-unobtrusive.js 的链接添加到您的页面（如果尚未完成）。
2.  在显示对话框的 javascript 中，为 div 提供一个 ID 包含包装器 div `var tag = $("<div id='form-wrapper-div'></div>");`

3.  在 AJAX 选项中将 UpdateTargetId 设置为“form-wrapper-div”

现在 POST 结果将显示在对话框中。

# sql-server - SQL Server 合并功能 - 删除和输出已删除无法正常工作

> ID：12608879
> 
> 赞同：3
> 
> 时间：2012-09-26T19:20:05.570
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个非常标准的脚本，它使用合并功能来插入、更新和删除记录。但是，我在将已删除的结果输出到审计类型表时遇到了很多麻烦。当我对一个干净的目标表运行该过程时，我不知何故最终在审计表中得到了所有空值，尽管事实上没有任何内容被删除（此时只插入到非审计表中，这确实发生了）。在相同的条件下并针对相同的干净目标表，如果我删除：

```
OUTPUT deleted.Column1, deleted.Column2 INTO Table_Audit (Column1, Column2) 
```

并将其替换为：

```
OUTPUT $action, Inserted.*, Deleted.* 
```

我看到实际上并没有删除任何内容，考虑到源表和目标表在两次运行中都相同并且合并谓词保持不变，这很奇怪。如我们所料，第二条语句的 action 列中的所有记录都是插入的。从字面上看，唯一不同的是我刚才提到的。关于可能发生什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:51:03.007

看一下[示例 K](http://msdn.microsoft.com/en-us/library/ms177564.aspx)。

将您的合并语句放在针对您的审计表的插入语句的子查询中。确保其中一列是`$action`并过滤要在外部 where 子句中插入的值以仅插入已删除的行。

# wordpress - Wordpress 重定向问题，标头已发送

> ID：12608881
> 
> 赞同：2
> 
> 时间：2012-09-26T19:20:15.627
> 
> 标签：wordpress, wordpress-theming, updates

我想知道，根据下面的代码，我想把我的 wp_redirect 函数放在哪里，因为它当前所在的位置除了喷发和 sais 什么都不做：

```
 Warning: Cannot modify header information - headers already sent by (output started at /***/***/WordPress/WordPressDev/wp-includes/script-loader.php:664) in /***/***/WordPress/WordPressDev/wp-includes/pluggable.php on line 881 
```

我得到是因为页面已经加载。但我不确定在哪里调用这个函数。

我已经用星星和 example.com 替换了我的网站和任何“个人数据”。这段代码如何工作，它只是不会重定向我。

想法？

```
function get_latest_version_zip(){
             global $wp_filesystem;

             if(current_user_can('update_themes')){
                $aisis_file_system_structure = WP_Filesystem();
                $aisis_cred_url = 'admin.php?page=aisis-core-update';
                if($aisis_file_system_structure == false){
                    request_filesystem_credentials($aisis_cred_url);
                    $this->credential_check = true;
                }

                $aisis_temp_file_download = download_url( 'http://example.com/aisis/aisis_update/Aisis2.zip' );

                if(is_wp_error($aisis_temp_file_download)){
                    $error = $aisis_temp_file_download->get_error_code();
                    if($error == 'http_no_url') {
                        add_action( 'admin_notices', 'aisis_framework_download_update_erors' );
                    }
                }

                $aisis_unzip_to = $wp_filesystem->wp_content_dir() . "/themes/" . get_option('template');

                $this->delete_contents_check(); //Check if we need to delete the aisis core folder.

                $aisis_do_unzip = unzip_file($aisis_temp_file_download, $aisis_unzip_to);

                unlink($aisis_temp_file_download); //delete temp jazz

                if(is_wp_error($aisis_do_unzip)){
                    $error = $aisis_do_unzip->get_error_code();
                    if($error == 'incompatible_archive') {
                        $this->aisis_incompatible_archive_errors();
                    }
                    if($error == 'empty_archive') {
                        $this->aisis_empty_archive_errors();
                    }
                    if($error == 'mkdir_failed') {
                        $this->aisis_mkdir_failed_errors();
                    }
                    if($error == 'copy_failed') {
                        $this->aisis_copy_failed_errors();
                    }
                    return;
                }
                //throwing errors
                wp_redirect(admin_url('admin.php?page=aisis-core-options'));
                exit;

             }
         } 
```

在我的functions.php文件中，我放置了以下代码：

```
 function callback($buffer){
     return $buffer;
 }

 function add_ob_start(){
     ob_start("callback");
 }

 function flush_ob_end(){
     ob_end_flush();
 }

 add_action('wp_head', 'add_ob_start');
 add_action('wp_footer', 'flush_ob_end'); 
```

有了这个我仍然得到错误，我想我误解了一些东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:47:25.057

只需替换以下行

```
add_action('wp_head', 'add_ob_start'); 
```

和

```
add_action('init', 'add_ob_start'); 
```

输出缓冲应该在任何发送/回显到浏览器之前开始，并且`wp_head`钩子发生的时间比钩子稍晚，直到那时标头已经发送，并且在任何内容回显/发送到浏览器之前`init`将其保留/放置在您的顶部。`functions.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T14:28:33.077

另一种可能性是添加优先级：

```
add_action('wp_head', 'add_ob_start', 1); 
```

第三个参数是 $priority。

此外，如果您要挂接多个函数，它可以让您完全控制执行链。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:26:42.470

问题是在 wordpress 的某个地方调用了该`header()`函数，并且在关闭时已经将一些输出发送到客户端`output buffering`。

必须在任何输出之前发送标头，否则您会收到您描述的错误。

```
wp_redirect(admin_url('admin.php?page=aisis-core-options')); 
```

上面的行设置了这样的标题：`header('Location: admin.php......');`

通过 php.ini、wordpress 的 index.php 或只是在任何内容回显到客户端之前打开输出缓冲应该处理该错误。

详细信息/文档可以在这里找到：http: [//php.net/manual/en/book.outcontrol.php](http://php.net/manual/en/book.outcontrol.php)

我能想到的最简单的方法是让你的 wordpress index.php 看起来像这样：

```
ob_start();
// content of your index.php here
ob_flush(); 
```

# java - 在 Java GUI 中同时从鼠标和键盘获取输入

> ID：12608882
> 
> 赞同：0
> 
> 时间：2012-09-26T19:20:26.360
> 
> 标签：java, user-interface, mouseevent, actionlistener, keyboard-events

我需要让java中的GUI同时响应鼠标和键盘输入。我知道我应该在动作监听器的循环中添加一些东西..但没有找到正确的想法..有什么建议吗？

我需要让我的 GUI 响应鼠标运动和点击，同时响应按下的键盘按钮，如果鼠标悬停在按钮上并按下 enter .. GUI 将响应键盘并且鼠标运动动作将正常继续！！..希望问题得到解决！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:23:38.780

您不必“在循环中添加一些东西”。您只需添加`MouseListener`和`KeyListener`到您的 GUI 元素（例如 Frame）并根据需要实现回调方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T20:01:29.043

看看[Toolkit.addAWTEventLsener](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#addAWTEventListener%28java.awt.event.AWTEventListener,%20long%29)

这将允许您监视流经事件队列的所有事件。

您将遇到的问题是识别影响区域中的组件并克服组件的默认行为（在文本字段具有焦点时按 Enter 将触发其上的操作事件，但现在您想做其他事情)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:50:38.183

要获得响应鼠标悬停在按钮上*并*按下输入的行为，我会：

*   使用附加到 JButton 的键绑定以允许它响应回车键。
*   确保在执行上述操作时使用与`JComponent.WHEN_IN_FOCUSED_WINDOW`常量关联的 InputMap，以便按钮实际上不必具有焦点来响应，但需要位于焦点窗口中。
*   当然绑定到与 KeyEvent.VK_ENTER 关联的 KeyStroke。
*   在键绑定操作中，通过调用模型检查按钮的模型是否处于翻转状态`isRollOver()`。
*   如果是，请回复。
*   请注意，以上这些都不需要 MouseListener，因为我使用的是 ButtonModel 的 isRollOver 来代替它。

例如，我的 SSCCE：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;

import javax.swing.*;

public class MouseKeyResponse extends JPanel {
   private JButton button = new JButton("Button");

   public MouseKeyResponse() {
      button.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent e) {
            System.out.println("button clicked");
         }
      });
      add(button);

      setUpKeyBindings(button);
   }

   private void setUpKeyBindings(JComponent component) {
      int condition = JComponent.WHEN_IN_FOCUSED_WINDOW;
      InputMap inputMap = component.getInputMap(condition);
      ActionMap actionMap = component.getActionMap();

      String enter = "enter";
      inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), enter);
      actionMap.put(enter, new EnterAction());
   }

   private class EnterAction extends AbstractAction {
      @Override
      public void actionPerformed(ActionEvent evt) {
         if (button.isEnabled() && button.getModel().isRollover()) {
            System.out.println("Enter pressed while button rolled over");
            button.doClick();
         }
      }
   }

   private static void createAndShowGui() {
      MouseKeyResponse mainPanel = new MouseKeyResponse();

      JFrame frame = new JFrame("MouseKeyResponse");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# jquery - 无法获取 ajax jsonp 结果

> ID：12608883
> 
> 赞同：0
> 
> 时间：2012-09-26T19:20:29.407
> 
> 标签：jquery, ajax, cross-domain, jsonp, zepto

我正在远程服务器上执行 Ajax jsonp 调用（跨域请求）（使用 Zepto，基于 jQuery）。
这是我用来执行它的代码的一部分：

```
$.ajaxJSONP
        ({
            url : "http://www.aramisclub.be/adminzone/swf/boxes_application/ap/userBoxe.php?callback=?",
            success: function(data){
                $("#p2").html("SUCCESS");
            },
            error: function(){
                $("#p3").html("ERROR");
            },
            complete: function(){
                $("#p4").html("COMPLETE");
            }
        }); 
```

当我查看网络日志（在歌剧蜻蜓中）时，我可以清楚地看到从远程服务器返回的调用。页面的内容也在那里。但是请求不会触发任何情况（成功、错误、完成）。

当查看 javascript 控制台时，这就是我得到的：

```
Syntax error at line 1 while loading: expected expression, got '<'
<link href="lib/css/
^ 
```

有谁知道为什么我无法从 ajax 调用（返回）中得到任何东西，而 HTTP 请求确实以 200 状态码结束。

# magento - 产品目录中的 Magento 小部件

> ID：12608884
> 
> 赞同：0
> 
> 时间：2012-09-26T19:20:31.100
> 
> 标签：magento

我用所见即所得的编辑器创建了一个插入表单的小部件。

但是目录部分中的 WYSIWYG 编辑器没有在其编辑器上提供 Widget 按钮。

我尝试将小部件代码粘贴`{{widget type="module/widget_name"}}`到描述区域，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:12:48.980

我写了一篇关于如何启用上述功能的简短说明：

[Magento：在目录产品中启用小部件/块代码](http://jmpmaniacs.wordpress.com/2012/10/03/magento-enable-widgetblock-codes-in-catalog-product/)

# java - 以编程方式将文件从 android 设备保存到 windows

> ID：12608893
> 
> 赞同：1
> 
> 时间：2012-09-26T19:20:52.257
> 
> 标签：java, android, file-transfer

有没有办法以编程方式将从 android 应用程序创建的文本文件保存到 USB 连接的 Windows PC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:30:14.450

不，对不起。Android 设备无法通过 USB 电缆访问其主机 PC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:38:36.110

简短的回答 - 不是我所知道的。

一般来说，对于“文件传输”，我肯定会同时查看[Dropbox](https://www.dropbox.com/)（将任何内容保存/同步到任何地方）和[ESFileExplorer](https://play.google.com/store/apps/details?id=com.estrongs.android.pop&hl=en)。两者都是面向用户的，但 Dropbox 有一个 API，你*应该*可以在 Android 上使用它（我还没有尝试过）。ESFileExplorer 适用于 USB 和 Windows 共享。

如果您有 Android SDK，您可以使用“adb pull”从命令行复制文件。当然，您可以使用“Runtime.exec()”从 Java 调用“adb pull”。丑陋...但可行:)

Windows 共享的另一种可能性可能是：

a) 获取 SMB 客户端（例如[Samba Filesharing](https://play.google.com/store/apps/details?id=com.funkyfresh.samba&hl=en)），然后

b) 使用标准 Java IO 读写共享

同样，我还没有尝试过这个......我不知道它是否会工作......但它*可能*值得一试。我在 Android File I/O 中看不到任何与 Samba 文件共享根本不兼容的内容：

*   [http://developer.android.com/reference/java/io/File.html](http://developer.android.com/reference/java/io/File.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T19:19:57.527

尝试使用`adb pull`PC 中的命令从 Android 获取文件。您将需要安装 Android SDK 并拥有一根 USB 电缆（尽管有无线方式）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-26T14:00:18.293

您无法通过 Android 编程将文件从 Android 设备写入 PC。但是，您可以通过 Windows 编程 (C#) 从 Android 设备复制文件。您可以从 Windows 设备便携库获得帮助：[https ://github.com/notpod/wpd-lib](https://github.com/notpod/wpd-lib)

# ios - 每个新的 NSMutableArray 都会使 UITableView 变慢

> ID：12608895
> 
> 赞同：0
> 
> 时间：2012-09-26T19:21:05.813
> 
> 标签：ios, xcode, uitableview, nsmutablearray

我有一个 UITableView 填充用户查找的搜索结果。为了做到这一点，我使用了一个 NSMutableArray 的字典，其中为前 10 个添加对象，然后当用户滚动到底部时，它会填充下一个 10，直到没有结果可显示。

这一切都很好，但我开始注意到完成的搜索越多，表格越慢。这是一些代码：

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    [self.objectsArray removeAllObjects];
    [self.objectsArray setArray:nil];
    [itemsTable reloadData];
    [itemsTable scrollRectToVisible:CGRectMake(0, 0, 0, 0) animated:false];

    [self loadItemsFromURL:searchURL withItemDescription:encodedString atStartRow:start andEndRow:end];
} 
```

以上是执行新搜索时。然后它执行一个 NSURLConnection 并用这个来响应：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    if (self.objectsArray == nil)
        self.objectsArray = [NSMutableArray array]; 
        // self.objectsArray = [[NSMutableArray alloc] init];
    NSError *error;
    NSDictionary *returnArray = [[NSJSONSerialization JSONObjectWithData:itemsData options:kNilOptions error:&error] valueForKey:@"items"];
    for (id key in returnArray)
    {
        [self.objectsArray addObject:[returnArray objectForKey:key]];
    }
    counter += 10;
    [itemsTable reloadData];
} 
```

如您所见，如果用户进行新搜索，所有对象都将被删除，`[self.objectsArray removeAllObjects]`我什至尝试将数组设置为`nil`. 如果我执行多次搜索，`UITableView`每次滚动都会变得越来越慢。几乎就像控制器看到数组随着每次搜索而变得越来越大，即使我在搜索之前从中删除了所有对象。有什么想法，或者我是否以错误的方式解决这个问题？

**编辑：** 这是`cellForRowAtIndexPath:`方法。`cell`是一个子类`UITableViewCell`。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Product Cell";
    static NSString *LoadCellIdentifier = @"Loading Cell";
    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if ([self.objectsArray count] <= 0 )
    {
        cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        cell.itemName.text = @"No items found.";
        cell.itemPrice.text = @"";
        cell.itemLocation.text = @"";
        cell.addButton.hidden = YES;
    }
    else
    {
        if ([indexPath row] == [self.objectsArray count])
        {
            if ( [self.objectsArray count] >= 10 )
            {
                if ( [self.objectsArray count] < counter)
                {
                    cell = [tableView dequeueReusableCellWithIdentifier:LoadCellIdentifier];
                    [cell.loadingSpinner stopAnimating];
                    cell.itemName.text = @"No more items found.";
                }
                else
                {
                    if (!running)
                    {
                        [self loadItemsFromURL:searchURL withItemDescription:encodedString atStartRow:[self.objectsArray count] + 1 andEndRow:[self.objectsArray count] + 10];
                        cell = [tableView dequeueReusableCellWithIdentifier:LoadCellIdentifier];
                        cell.itemName.text = @"Loading more items...";
                        [cell.loadingSpinner startAnimating];
                        running = true;
                    }
                    else
                    {
                        cell = [tableView dequeueReusableCellWithIdentifier:LoadCellIdentifier];
                        [cell.loadingSpinner startAnimating];
                    }
                }
            }
        }
        else
        {
            cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
            NSArray *match = [self.objectsArray objectAtIndex:[indexPath row]];
            cell.addButton.hidden = NO;
            if ([match valueForKey:@"DESCRIPTION"] == [NSNull null] )
            {
                cell.itemName.text = @"Description not available.";
            }
            else
            {
                cell.itemName.text = [match valueForKey:@"DESCRIPTION"];
            }
            if ([match valueForKey:@"AD"] != [NSNull null])
            {
                NSMutableString *adString = [NSMutableString stringWithString:[match valueForKey:@"AD"]];
                NSRange textRange;
                textRange = [adString rangeOfString:@"1/"];
                if (textRange.location != NSNotFound)
                {
                    [adString replaceCharactersInRange:[adString rangeOfString:@"1/"] withString:@"$"];
                }
                else
                {
                    [adString replaceCharactersInRange:[adString rangeOfString:@"/"] withString:@"/$"];
                }
                cell.itemPrice.text = adString;
            }
            else if ([match valueForKey:@"REGULAR"] == [NSNull null])
            {
                cell.itemPrice.text = @"$ N/A";
            }
            else
            {
                NSNumberFormatter *currencyStyle = [[NSNumberFormatter alloc] init];
                [currencyStyle setFormatterBehavior:NSNumberFormatterBehavior10_4];
                [currencyStyle setNumberStyle:NSNumberFormatterCurrencyStyle];
                NSNumber *price = [NSNumber numberWithDouble:[[match valueForKey:@"REGULAR"] doubleValue]];
                NSString *stringPrice = [currencyStyle stringFromNumber:price];
                cell.itemPrice.text = [NSString stringWithFormat:@"%@", stringPrice];
            }
            if ([match valueForKey:@"AISLE"] == [NSNull null])
            {
                cell.itemLocation.text = @"Item location: N/A";
            }
            else
            {
                cell.itemLocation.text = [NSString stringWithFormat:@"Item Location: %@", [match valueForKey:@"AISLE"]];
            }
            match = nil;
        }
    }
    return cell;
} 
```

**编辑 2：** 这是 JSON 的一个片段：

```
{
    items =     {
        263149 =         {
            AD = "###";
            AISLE = 6A;
            DESCRIPTION = "Cinnamon Toasters";
            R = 9;
            REGULAR = "#.##";
        };
        26599 =         {
            AD = "####";
            AISLE = 6A;
            DESCRIPTION = "Quaker Life Cereal";
            R = 2;
            REGULAR = "#.##";
        };
        40517 =         {
            AD = "###";
            AISLE = 6A;
            DESCRIPTION = "Toasted Oats";
            R = 1;
            REGULAR = "#.##";
        };
    };
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:03:12.313

好的，我认为您的问题是过度创建 Array 对象。因此，请执行以下操作，而不是创建数组：

```
NSDictionary *returnArray = [[NSJSONSerialization JSONObjectWithData:itemsData options:kNilOptions error:&error] valueForKey:@"items"];
for (NSDictionary *dict in returnArray in returnArray)
{
    [self.objectsArray addObject:dict];
}
counter += 10;
[itemsTable reloadData]; 
```

如您所见，您将得到一个`NSDictionary`对象数组，您的返回数组已经是一个`NSDictionary`字典对象。另外，稍微观察一下，你在哪里重置你的计数器？

**编辑：**创建`NSDictionary`from `NSData`：

```
[NSJSONSerialization JSONObjectWithData:self.requestData options:NSJSONReadingMutableContainers | NSJSONReadingMutableLeaves error:&error] 
```

requestData 是使用这些委托方法生成的：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
  NSLog(@"In didReceiveResponse");
  [self.requestData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
  NSLog(@"In didReceiveData");
  [self.requestData appendData:data];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:58:12.250

我能够在`cellForRowAtIndexPath:`. 我注释掉：`cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];`在顶部并确保它只被调用一次。我也按照 8vius 的建议做了一些清理工作，现在只有一次 NSString 在该方法调用中被分配。一旦我做了这两件事，它就很好而且反应灵敏，没有任何口吃。

# objective-c - UICollectionViewCell 上的按钮

> ID：12608896
> 
> 赞同：1
> 
> 时间：2012-09-26T19:21:14.190
> 
> 标签：ios6, uicollectionview, objective-c, ios6, uicollectionview

新的[ios6](/questions/tagged/ios6 "显示标记为“ios6”的问题")类之一是[uicollectionview](/questions/tagged/uicollectionview "显示标记为“uicollectionview”的问题")，它允许以类似于 Homescreen / iBooks / Pages 布局的网格格式显示项目。

有没有办法在 UICollectionViewCell 上的按钮上接收触摸事件？目前，我的单元格是通过 XIB 文件创建的，并以编程方式添加到 UICollectionView。我正在寻找类似于 UITableView 上的 Detail Disclosure Indicator 的东西。

在这里查看 Apple 的文档后，我没有看到任何允许这样的方法，但我很肯定有办法做到这一点。

**如何在 UICollectionViewCell 中添加一个按钮并在点击按钮时获取单元格的 indexPath？**

是否有任何可能有用的教程或链接？iOS 6 相当新，所以我没有找到太多。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-07T22:46:34.293

一种方法是向`NSIndexPath`单元格添加一个属性，并在单元格出列时设置它。然后，您的单元格的操作处理程序将有权访问当前索引。

您的片段`UICollectionViewCell`：

```
@interface MyCustomCell : UICollectionViewCell
@property (weak, nonatomic) NSIndexPath *indexPath;
- (IBAction)testClicked:(id)sender; // TODO: wire up your button to this handler
@end 
```

实现 UICollectionViewDataSource 的视图控制器的片段：

```
-(UICollectionViewCell*) collectionView:(UICollectionView *)collectionView
                 cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    MyCustomCell *cell = 
        [collectionView dequeueReusableCellWithReuseIdentifier:@"myCustomCell"
                                                  forIndexPath:indexPath];
    cell.indexPath = indexPath;
    // TODO: other initialization for the cell
    return cell;
} 
```

# html - chrome在html中添加引号

> ID：12608899
> 
> 赞同：2
> 
> 时间：2012-09-26T19:21:36.537
> 
> 标签：html, google-chrome, cross-browser

我有一个非常奇怪的问题，我有一个标记，它正在被 chrome（在 mac、windows 和 ubuntu-chromium 上测试）以奇怪的方式处理..

我已经创建了一个简单版本的情况..

```
<h3>First Part<span>Content in Span</span></h3>​ 
```

Chrome 正在添加额外的引号`First Part`，而它在任何其他浏览器中都不存在（在 Firefox 和 ie 上测试。）

我在[这里在 JsFiddle 上创建的简单演示..](http://jsfiddle.net/wr4BV/1/)

在 Chrome 中： ![铬合金](../Images/a74952c072949ac6b8a164e1b4afe8ae.png)

在火狐中： ![在此处输入图像描述](../Images/54b40ff522e7394ea987e0e690ffd03e.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T19:25:24.597

这正是 chrome 在元素检查器中呈现文本节点内容的方式。您可以通过这种方式更好地查看空白。报价纯属虚拟。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T19:25:37.390

您的 HTML 文档中不存在引号。它们只是出现在 Chrome 中，以表明您正在查看元素的文本内容。

你根本不应该担心他们。如果您检查源代码（右键单击，查看页面源代码），您将看到它们不存在。

# ios - 如何使用 SDK 3.1 在 iOS 上获取本机 Facebook 登录？

> ID：12608900
> 
> 赞同：4
> 
> 时间：2012-09-26T19:21:41.600
> 
> 标签：ios, facebook, ios6

我下载了新的[Facebook iOS SDK 3.1](https://developers.facebook.com/ios/)，它承诺有一个[本地登录提示](https://fbcdn-dragon-a.akamaihd.net/cfs-ak-ash4/85001/862/488167911203083-/screen-b.png)。我在我的 iOS 6 设备上运行了他们的示例登录应用程序。当我尝试连接 Facebook 时，我没有获得本地登录。相反，Facebook 应用程序启动 - 与旧 SDK 相同。他们的 Facebook 登录按钮基本上是这样做的：

```
[appDelegate.session 
    openWithCompletionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        [self updateView];
    }
]; 
```

我想也许示例代码没有调用正确的函数。所以我尝试[了 FBSession](https://developers.facebook.com/docs/sdk-reference/iossdk/3.0/class/FBSession/#openWithBehavior%3acompletionHandler%3a)的其他登录功能。

```
[appDelegate.session 
    openWithBehavior:FBSessionLoginBehaviorWithNoFallbackToWebView 
    completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        [self updateView];
    }
]; 
```

我尝试了所有可能的行为，但没有一个会弹出本机登录提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:49:16.877

您是否先从 iOS 设置登录 Facebook？

一旦你这样做了，他们的示例项目 Scrumptious 将在你尝试连接时使用本机登录提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:50:57.293

阅读：[https ://developers.facebook.com/docs/howtos/ios-6/#nativeauthdialog](https://developers.facebook.com/docs/howtos/ios-6/#nativeauthdialog)

基本上你必须先申请基本权限和读取权限，然后分别申请发布权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T07:16:28.930

这是设计使然，并在[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/upgrading-from-3.0/的第二部分中进行了描述](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/upgrading-from-3.0/)

基本上，您无法通过 iOS6 对话框同时请求读取和发布权限。因此，您或多或少需要以交错的方式询问它们（例如，在首次登录时阅读，然后在您的应用实际需要发布时发布）。

如果您坚持使用已弃用的方法尝试同时读取和发布，SDK 只能返回 Web 或应用切换技术。

# xcode - childbrowser 不工作 ios6 phonegap 2.0

> ID：12608905
> 
> 赞同：0
> 
> 时间：2012-09-26T19:22:01.063
> 
> 标签：xcode, ios6, phonegap-plugins

我在 ios phonegap 中使用 ChildBrowser 插件看到以下问题。我的映射文件用 ChildBrowserCommand 更新，我允许外部主机 * 我的环境 Xcode 4.5 ios 6 Phonegap 2.0

2012-09-26 12:36:07.419 HelloWorld2[2566:c07] 错误：找不到插件“ChildBrowserCommand”，或者不是 CDVP 插件。检查 Cordova.plist 中的插件映射。2012-09-26 12:36:07.420 HelloWorld2[2566:c07] FAILED pluginJSON = [null,"ChildBrowserCommand","showWebPage","["http://google.com"]]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:48:45.513

他们最近发布了 v2.1，我建议你试一试，因为现在他们应该正式支持 ChildBrowser 插件

# c# - 比较两个下拉列表值，如果在一个中进行了选择，但在另一个中没有进行选择，则会引发错误

> ID：12608907
> 
> 赞同：0
> 
> 时间：2012-09-26T19:22:07.513
> 
> 标签：c#, asp.net

我有两个下拉列表。如果第一个有选择，我需要在第二个中进行选择。

```
if((ddl1.SelectedIndex > -1 ) != (ddl2.SelectedIndex > -1))
{
    this.lblError.Visible = true;
} 
```

所以基本上，如果第一个有选择但第二个没有选择，那么就会出错。

会是它自己的下拉吗？

```
 <asp:DropDownList ID="ddlRate1" runat="server">
                   <asp:ListItem Value="">(Select)</asp:ListItem>
                   <asp:ListItem>Initial</asp:ListItem>
                   <asp:ListItem>Moderate</asp:ListItem>
                     </asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:24:38.887

从您的评论中更新，再次更新..

这就是为什么我最初用 2 个 if 语句编写它的原因，

```
if((ddl1.SelectedIndex > 0  ) {   

     //code to read value from ddl1

             if (ddl2.SelectedIndex == 0))
            {
                this.lblError.Visible = true;
                // or maybe a bool 'IsValid'  maybe..
            }
} 
```

然后假设您在整个表单中都有这样的代码，最后您可以这样做

```
if ( this.lblError.Visible == true) {  // code to handle invalid form } 
```

或者..

```
if ((ddl1.SelectedIndex > 0 )  && (ddl2.SelectedIndex == 0)) {
     this.lblError.Visible = true;
} 
```

试试这个进行故障排除 - 在 if 语句之前

```
 this.lblError.Visible = true;
 this.lblError.Text = "ddl1 : " + ddl1.SelectedIndex.ToString() + " ddl2 : " + ddl2.SelectedIndex.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:27:30.227

```
if((ddl1.SelectedIndex > -1 ) && !(ddl2.SelectedIndex > -1))
{
    this.lblError.Visible = true;
} 
```

这几乎只是对您所说的内容的翻译，“是第一个中的选择，而不是第二个中的选择”其中第一个具有值（大于-1）**而**第二个**没有**一个值。

您可以通过多种方式对其进行重构，例如使用`ddl2.SelectedIndex == -1`第二个值，但是这段代码的读取方式与您描述的它应该如何工作完全一样，而且它确实没有任何*问题*，所以这很值得我的眼睛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:36:30.217

你可以这样做

```
 <asp:DropDownList ID="ddl1" runat="server">
               <asp:ListItem Value="">(Select)</asp:ListItem>
               <asp:ListItem Value="Initial">Initial</asp:ListItem>
               <asp:ListItem Value="Moderate">Moderate</asp:ListItem>
                 </asp:DropDownList> 
```

C＃

```
if((ddl1.SelectedValue.Length > 0 ) && (ddl2.SelectedValue.Length == 0))
{
    this.lblError.Visible = true;
} 
```

# spring - Spring MVC Rest：如何在 Json 和 XML 中实现部分响应？

> ID：12608908
> 
> 赞同：2
> 
> 时间：2012-09-26T19:22:09.807
> 
> 标签：spring, rest, spring-mvc, jackson, xstream

我需要根据用户输入/或 Spring 安全角色忽略我的对象响应中某些属性的序列化（JSon/Jackson 和 XML/XStream）（就像您无权查看该字段的内容，但所有其他都可以等）。在 Spring MVC Rest 中执行此操作的最佳方法是什么？其他方法是仅显示与 api 用户相关的属性，如此处所述[http://googlecode.blogspot.com.br/2010/03/making-apis-faster-introducing-partial.html](http://googlecode.blogspot.com.br/2010/03/making-apis-faster-introducing-partial.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:13:16.450

如果您使用的是 Jackson，这里有一些可能的选项来修改 Json 序列化：

1.  使用[@JsonIgnore](http://jackson.codehaus.org/1.0.0/javadoc/org/codehaus/jackson/annotate/JsonIgnore.html)注释 - 但是，这是静态过滤，不允许您根据需要实施基于规则的过滤

2.  使用[@JsonFilter](http://wiki.fasterxml.com/JacksonFeatureJsonFilter) - 这将允许您实现一个接口，您可以在其中提供您的序列化过滤逻辑。您可能会发现这是一个过于重量级的解决方案。

3.  我经常解决这个问题的方法是从我的 Controller 方法而不是底层对象返回一个 Map。您可以编写将对象中的相关字段放入 Map 的处理代码，从而使您可以完全控制序列化的内容。您可以在 Object 上包含一个方法来进行转换。该方法可能如下所示：

    ```
    // RequestObj is whatever 'input' object that indicates what should be filtered
    public Map<String,Object> convertToMapForRequest(RequestObj request){
        // Build return map based on 'this' and request
    } 
    ```

# python - 在 jinja2 中使用 django 过滤器

> ID：12608919
> 
> 赞同：3
> 
> 时间：2012-09-26T19:23:07.123
> 
> 标签：python, django, google-app-engine, jinja2, django-templates

我正在 appengine 上开发一个应用程序，并想使用很棒的`timesince`django 模板标签。由于我使用的是 jinja2，因此我没有可用的时间过滤器。如何从 django 导入它并在 jinja 模板中使用。

我看到了[这个问题](https://stackoverflow.com/questions/4799715/jinja2-templates-using-django-template-tags)，但它不符合需要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T19:27:32.477

Django过滤器使用的`timesince`功能可以在这里找到：[https ://github.com/django/django/blob/master/django/utils/timesince.py](https://github.com/django/django/blob/master/django/utils/timesince.py)

可以在此处找到有关编写自定义 jinja 过滤器的文档：http: [//jinja.pocoo.org/docs/api/#custom-filters](http://jinja.pocoo.org/docs/api/#custom-filters)

# javascript - 用下拉菜单更改窗口 URL？

> ID：12608921
> 
> 赞同：0
> 
> 时间：2012-09-26T19:23:11.287
> 
> 标签：javascript, html

```
<form name="roomForm">
    <select name="roomMenu"
    onChange="window.location = this.roomForm.roomMenu.options[this.roomForm.roomMenu.selectedIndex].value">
        <option value="">Choose ICU</option>
        <option value="All">All</option>
        <option value="/base/ICU5/example">ICU5</option>
        <option value="/base/ICU6/example">ICU6</option>
        <option value="/base/ICU7/example">ICU7</option>
    </select>
</form> 
```

有人能指出为什么这段代码不起作用吗？当下拉菜单更改时，它应该重定向到另一个页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:26:48.527

您的代码有额外的“）”，这本身就是选择框。[jsfiddle](http://jsfiddle.net/tZ6ju/)

```
<form name="roomForm">
    <select name="roomMenu"
    onChange="window.location = this.options[this.selectedIndex].value;">
        <option value="">Choose ICU</option>
        <option value="All">All</option>
        <option value="/base/ICU5/example">ICU5</option>
        <option value="/base/ICU6/example">ICU6</option>
        <option value="/base/ICU7/example">ICU7</option>
    </select>
</form>​ 
```

# php - php测试字符串是否以_text + number结尾

> ID：12608924
> 
> 赞同：2
> 
> 时间：2012-09-26T19:23:33.583
> 
> 标签：php

我对这个 if 语句有几个问题，它检查字符串是否以“地址”结尾。

例如，这匹配`user_address`, `user_address1`,`user_address99`等。这是正确的。

问题是它也匹配`user_address_location`不正确。

我只希望在以下情况下匹配：

1.  以 _address 结尾
2.  另外，如果它最后有一个数字，例如_address2

```
/* Only establish an address field as ADDRESS if follows "user_address1" format */
if((stristr($column,"address") !== false)) {
    $parts = explode("_", $column);
    if (!empty($parts)) {
        // address code
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:28:12.143

这可能是使用正则表达式的好地方

```
if(preg_match('/^user_addesss\d*$/', $column) === 1){
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:30:03.657

使用正则表达式：

```
if(preg_match('/_address(\d+)?$/', $column))
{

} 
```

如果您正在进行大量字符串比较和操作，此 Web 应用程序将对您非常有用：http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

它允许您针对内容开发正则表达式，并提供有关匹配和替换的实时反馈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:30:31.723

您可以`$`在此处使用正则表达式。使用正则表达式时`$`指定字符串的结尾

所以，你可以搜索这个正则表达式：

```
$regexp = "^.*_address\d+$"; 
```

`^`是开头，`.*`表示任意数量的任意字符`_address`是您要搜索的内容，`\d+`表示地址后面可以有数字，并`$`表示字符串的结尾。

`preg_match`您可以在 php.net 上阅读更多关于正则表达式的信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T19:27:17.683

更改`if((stristr($column,"address") !== false)) {`为`if(preg_match("/^user_address[0-9]*/", $column) == 1) {`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T20:42:49.533

我想找到一种不用正则表达式的方法，对不起，我应该在问题中说清楚。

但是我想我找到了一种方法，不确定它是否可以与正则表达式相比有所改进或性能。

```
/* First establish it could be an address field e.g "user_address1" format */
$column_address = strpos($column, "_address");
if($column_address !== false) {

    // remove everything before "_address"
    $last = substr($column, $column_address);

    // Check if "_address" OR remove "_address" and check if int
    if($last == "_address" || intval(substr($last, 8))){ 
```

# android - 在 Cordova 1.8.1 中 - Android history.back() 不工作

> ID：12608926
> 
> 赞同：0
> 
> 时间：2012-09-26T19:23:37.687
> 
> 标签：android, cordova, jqmobi

我正在开发一个 phonegap 应用程序，该应用程序将外部 url(http://example.com) 加载到 webview 中。当我使用 window.location.href 浏览屏幕时。我无法使用 webview 本身中的软后退按钮返回上一个屏幕。android硬后退按钮关闭后退（现在很好）。

谁能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:26:38.403

这是同样的问题：如果 jquery mobile 不创建历史记录条目，则 android 手机的后退按钮将终止应用程序，因为没有 Activity 可以返回。

如果您继续浏览您的应用程序，请创建一个 pushState：[https ://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

如果您有历史记录条目，您的应用程序将不会关闭，希望软后退按钮能够正常工作。

# unit-testing - 仅在测试环境中运行迁移脚本

> ID：12608928
> 
> 赞同：2
> 
> 时间：2012-09-26T19:23:40.450
> 
> 标签：unit-testing, testing, ruby-on-rails-3.2, rails-migrations, test-environments

有没有办法只在测试环境中运行迁移？

由于登台和生产数据库已经存在，我想仅在测试环境中创建表和种子数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T17:48:29.570

我根据[这里](http://libryder.com/2012/rails-3-create-migration-from-an-existing-database)的帖子找到了解决方案。这允许我只对测试环境应用迁移。

```
class CreateLicenseDatabase < ActiveRecord::Migration
  def change
    if Rails.env.test?

      create_table.....

    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:23:21.993

你不能这样做：

```
RAILS_ENV=test rake db:create
RAILS_ENV=test rake db:migrate 
```

?

# ruby-on-rails - 是否可以将 Rails 应用程序通过 FTP 传输到 linux 服务器

> ID：12608933
> 
> 赞同：0
> 
> 时间：2012-09-26T19:23:48.183
> 
> 标签：ruby-on-rails, ruby, linux, hosting, vps

我有一个 1and1 Linux VPS 服务器，我们不允许使用 Github 等第三方应用程序将我们的代码推送到服务器。我意识到这很愚蠢，但尽管如此。

是否真的可以通过将 Rails 应用程序通过 FTP 传输到 Linux 服务器来运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:31:00.260

当然，这是可能的。您将复制所有文件。只有几个棘手的点：

*   设置环境变量可能很困难
*   取决于应用程序服务器 1&1 为您提供什么。Apache 本身还不够好，你需要一些东西来运行 Ruby 代码，比如Passenger、Mongrel（旧但可能可用）或Unicorn（不太可能）。

另外 --- 你有一个 VPS 服务器，所以你可能有 SSH 访问权限并且可以使用 ssh 来复制文件，而不是 FTP。

Capistratno 设置：

```
set :repository, "."
set :scm, :none
set :deploy_via, :copy 
```

# tsql - 或在 Case 语句中

> ID：12608935
> 
> 赞同：2
> 
> 时间：2012-09-26T19:23:56.610
> 
> 标签：tsql

试图弄清楚如何在 T-SQL 的 case 语句中合并 OR

我本质上是在检查两件事，如果其中任何一个是真的，就将它们视为 0 进行计数。

```
COUNT(Case When (car[Weight] IS null) then 0 else car.CarKey 
           OR When (car.BinNumber is null) then 0 else car.CarKey 
      End) as Carkey 
```

也试过了，但语法错误

```
COUNT(Case When (car[Weight] IS null) then 0 
         else When (car.BinNumber is null) then 0 
         else car.CarKey 
      End) as Carkey 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:26:45.287

您可以使用`OR`这种方式：

```
COUNT(Case 
        When (car.[Weight] IS null) or (car.BinNumber is null)
        then 0 
        else car.CarKey End) as Carkey 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:32:09.457

您的第二次尝试很接近，只需删除一次`else`

```
COUNT(Case When (car[Weight] IS null) then 0 
     When (car.BinNumber is null) then 0 
     else car.CarKey 
  End) as Carkey 
```

注意：如果您想计算没有空值的项目，那将不会这样做。零值仍然是一个值，因此它也会被计算在内。用于`null`您不想计算的项目：

```
COUNT(Case When (car[Weight] IS null) then null 
     When (car.BinNumber is null) then null 
     else car.CarKey 
  End) as Carkey 
```

或`sum`改用：

```
SUM(Case When (car[Weight] IS null) then 0 
     When (car.BinNumber is null) then 0 
     else 1
  End) as Carkey 
```

# vb6 - VB6 应用程序的依赖项

> ID：12608941
> 
> 赞同：3
> 
> 时间：2012-09-26T19:24:37.113
> 
> 标签：vb6, dependencies

> **可能重复：**
> [如何部署 VB6 应用程序？](https://stackoverflow.com/questions/1086370/how-to-deploy-vb6-applications)

我工作的公司有这个去年用 VB6 编写的应用程序。我很高兴在这里和那里完成了一些小事情。然而，现在我有一点绊脚石。在最新的 Visual Studio 中，无论何时构建应用程序，都可以在 bin/Debug（或 Release）文件夹中找到任何引用的 .dll 依赖项。

我的问题是，在 VB6 Enterprise IDE 中，当您制作 .exe 时，依赖项放在哪里？我假设它们与 .exe 位于同一位置；但是，当我将整个文件夹复制到另一台计算机和 regsver32（当然是在管理员模式下）并尝试运行该程序时，我被告知我缺少一个依赖项。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T19:34:32.360

自从我在 VB 工作以来已经有一段时间了，但我似乎记得您不会复制可执行文件，而是会创建一个安装包来管理所有 DLL、OCX 等，并为您在注册表中注册必要的东西。

# c# - 跨控件和页面的类共享

> ID：12608944
> 
> 赞同：0
> 
> 时间：2012-09-26T19:24:54.097
> 
> 标签：c#, asp.net, vb.net

这基本上是设计问题，就像在我的 web asp.net 4.0 web 表单应用程序中构建我的代码的最佳方式一样。我的一般设计是这样的......

```
Master Page
     Has few User Controls
     Content Pages
         Inherit from Base Class
     User Controls within Content Pages 
```

我需要在一次调用中从数据库中获取一些设置内容并将结果存储到一个类中。然后这个类将在整个页面中共享（在母版页、基类、内容页面和用户控件中）。

初始化此类并在整个页面生命周期中轻松访问它的最佳位置是什么。

我应该点击数据库并初始化 BASE PAGE 中的类，然后从 BASE 类中更新母版页..像这样

```
Page.master.findControl("label").Text = myClass.Setting1 
```

然后内容页面及其用户控件也需要访问此类。

请告知最佳做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:10:03.003

如果这是应用程序的所有用户共享的完全共享数据，请将其放入作为类的静态属性公开的数据容器中，并在该类的静态构造函数中用数据库中的数据填充此容器。

```
public class SettingsData
{
  public string Setting1;
  public string Setting2;
}

public static class DataHolder
{
  public static SettingsData Settings = new SettingsData();
  static DataHolder() 
  {
    // open connection to db and query for values
    Settings.Setting1 = <value from db>;
    Settings.Setting2 = <value from db>;
  }
} 
```

然后在代码中

```
 Label1.Text = DataHolder.Settings.Setting1; 
```

# html - 在 IE 中使用自动对焦

> ID：12608948
> 
> 赞同：0
> 
> 时间：2012-09-26T19:24:57.560
> 
> 标签：html, autofocus

我是 html 的新手，我正在尝试在输入文本字段上设置自动对焦...

但这在 IE 中不受支持...是否可以使用 JS 来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:28:01.600

Javascript：

```
document.getElementById('elemID').focus(); 
```

jQuery：

```
$('selector').focus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:29:36.720

```
<input type="text" id="aaa">
<script> 
    window.onload=function(){
        document.getElementById('aaa').focus();
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T19:30:12.943

是的，你可以用 javascript 做到这一点

例如

```
<script type="text/javascript">
   function formfocus() {
      document.getElementById('element').focus();
   }
   window.onload = formfocus;
</script> 
```

其中“元素”是您的 html 输入的 id。

# php - 这是用别名获取网址的防弹吗

> ID：12608952
> 
> 赞同：1
> 
> 时间：2012-09-26T19:25:10.733
> 
> 标签：php, apache, http

我正在使用 apache mod_alias 所以使用`HTTP_POST`不会给我别名加上 HTTPS 它不存在。下面的行似乎有效，但它会失败吗？我知道`SERVER_NAME`需要在服务器上进行配置，但前提是这样可以吗？

```
$site_url = $_SERVER["REQUEST_SCHEME"] . "://" . $_SERVER["SERVER_NAME"] . $_SERVER["CONTEXT_PREFIX"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-12T00:51:47.137

我用：

```
$_SERVER['REQUEST_SCHEME'].'://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'] 
```

示例输出：

```
https://example.com/alias-no-extension?query=1 
```

# asp.net-mvc - Html.RouteLink 在部署到 Azure 后停止生成链接

> ID：12608966
> 
> 赞同：2
> 
> 时间：2012-09-26T19:25:54.400
> 
> 标签：asp.net-mvc, deployment, azure, asp.net-mvc-4, azure-web-app-service

我正在开发一个要部署到 Azure 的 MVC 4 项目。

我有以下路线配置：

```
routes.MapRoute(
    name: "BrowseBusinessByType", 
    url: "Browse/Business/ByType/{industry}/{region}/{city}/{page}",
    defaults: new
                  {
                      controller = "Browse",
                      action = "Business",
                      region = UrlParameter.Optional,
                      city = UrlParameter.Optional,
                      page = UrlParameter.Optional
                  }
    );

routes.MapRoute(
    name: "BrowseBusinessByCity",
    url: "Browse/Business/ByCity/{region}/{city}/{industry}/{page}",
    defaults: new
    {
        controller = "Browse",
        action = "Business",
        industry = UrlParameter.Optional,
        city = UrlParameter.Optional,
        page = UrlParameter.Optional
    }
    ); 
```

还有更多的路线，但我发誓这个顺序是针对通用的，而不是其他的。

在本地主机上，我使用：

```
@Html.RouteLink(@String.Format("{0} ({1})", industryCount.Industry.Name,
industryCount.Count), new {
    Controller = "Browse",
    Action = "Business",
    industry = industryCount.Industry.Slug
}) 
```

获取类似的 URL

```
http://localhost:49311/Browse/Business/ByType/offices. 
```

但是，当部署到 Azure 共享网站时，路由变为

```
http://www.zzzz.dd/Browse/Business?industry=offices 
```

由于路线被命名，我尝试使用

```
@Html.RouteLink(
    @String.Format("{0} ({1})", cityCount.City.Name, cityCount.Count),
    "BrowseBusinessByCity",
    new
    {
        region = cityCount.City.Region.Slug,
        city = cityCount.City.Slug,
    }) 
```

这给了我

```
http://localhost:49311/Browse/Business/ByCity/eu/helsinki 
```

在 localhost 和部署链接的 html 代码是：

```
<a href="">London (8)</a> 
```

更具挑战性的是，我的路线完全在 URL 上运行（在 Azure 中）

```
http://xxxx.dd/Browse/Business/ByCity/eu/helsinki 
```

Phil Haack 的 routedebug2 输出，Azure：

[http://i.stack.imgur.com/Fzbgb.png](http://i.stack.imgur.com/Fzbgb.png)

路由调试2，本地主机：

[http://i.stack.imgur.com/4kp3z.png](http://i.stack.imgur.com/4kp3z.png)

预先感谢您的所有帮助！

**上**：

我决定发布 web.configs 以消除任何疑问。

调试：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework"
             type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
             requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="BusinessDBEntities"
         connectionString="data source=ANDREW-PC\;initial catalog=BusinessCityEntities;integrated security=True;multipleactiveresultsets=True;application name=EntityFramework"
         providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>

    <add key="azureStorageConnectionString"
         value="***" />

    <add key="azureContainer" value="thumbnails"/>

    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="RouteDebugger:Enabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS"
           modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll"
           preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS"
           modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll"
           preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS"
           type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

释放：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="BusinessDBEntities" connectionString="***" providerName="System.Data.SqlClient" />
    <add name="DefaultConnection" connectionString="DefaultConnection_ConnectionString" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>
    <add key="azureStorageConnectionString" value="***" />
    <add key="azureContainer" value="thumbnails" />
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="RouteDebugger:Enabled" value="true" />
  </appSettings>
  <system.web>
    <compilation targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <customErrors mode="Off" />
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:11:22.880

这不起作用的原因是因为您有太多`UrlParameter.Optional`细分。有关更多信息，请参阅[此](https://stackoverflow.com/questions/8721994/asp-net-mvc-3-optional-parameter-routing-issue)内容。

# c# - UserPrincipal.FindByIdentity (System.DirectoryServices.AccountManagement) 中的 .NET 4.5 错误

> ID：12608971
> 
> 赞同：30
> 
> 时间：2012-09-26T19:26:20.183
> 
> 标签：c#, .net, authentication, active-directory, .net-4.5

在 .NET 4.5 下测试我们的 .NET 4.0 应用程序时，我们遇到了用于 .NET 的`FindByIdentity`方法的问题`UserPrincipal`。以下代码在 .NET 4.0 运行时运行时有效，但在 .NET 4.5 下失败：

```
[Test]
public void TestIsAccountLockedOut()
{
    const string activeDirectoryServer = "MyActiveDirectoryServer";
    const string activeDirectoryLogin = "MyADAccount@MyDomain";
    const string activeDirectoryPassword = "MyADAccountPassword";
    const string userAccountToTest = "TestUser@MyDomain";
    const string userPasswordToTest = "WRONGPASSWORD";

    var principalContext = new PrincipalContext(ContextType.Domain, activeDirectoryServer, activeDirectoryLogin, activeDirectoryPassword);

    var isAccountLockedOut = false;
    var isAuthenticated = principalContext.ValidateCredentials(userAccountToTest, userPasswordToTest, principalContext.Options);
    if (!isAuthenticated)
    {
        // System.DirectoryServices.AccountManagement.PrincipalOperationException : Information about the domain could not be retrieved (1355).
        using (var user = UserPrincipal.FindByIdentity(principalContext, IdentityType.UserPrincipalName, userAccountToTest))
        {
            isAccountLockedOut = (user != null) && user.IsAccountLockedOut();
        }
    }
    Assert.False(isAuthenticated);
    Assert.False(isAccountLockedOut);
} 
```

这是异常堆栈跟踪：

```
System.DirectoryServices.AccountManagement.PrincipalOperationException : Information about the domain could not be retrieved (1355).
at System.DirectoryServices.AccountManagement.Utils.GetDcName(String computerName, String domainName, String siteName, Int32 flags)   at System.DirectoryServices.AccountManagement.ADStoreCtx.LoadDomainInfo()   at 
System.DirectoryServices.AccountManagement.ADStoreCtx.get_DnsDomainName()   at System.DirectoryServices.AccountManagement.ADStoreCtx.GetAsPrincipal(Object storeObject, Object discriminant)   at 
System.DirectoryServices.AccountManagement.ADStoreCtx.FindPrincipalByIdentRefHelper(Type principalType, String urnScheme, String urnValue, DateTime referenceDate, Boolean useSidHistory)   at 
System.DirectoryServices.AccountManagement.ADStoreCtx.FindPrincipalByIdentRef(Type principalType, String urnScheme, String urnValue, DateTime referenceDate)   at 
System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithTypeHelper(PrincipalContext context, Type principalType, Nullable`1 identityType, String identityValue, DateTime refDate)   at 
System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithType(PrincipalContext context, Type principalType, IdentityType identityType, String identityValue)   at 
System.DirectoryServices.AccountManagement.UserPrincipal.FindByIdentity(PrincipalContext context, IdentityType identityType, String identityValue) 
```

有没有其他人看到并解决了这个问题？如果没有，我们是否有更好的方法来检查`IsAccountLockedOut`Active Directory 帐户的状态？

作为参考，我们所有的测试机器都在同一个子网中。有不同的 ActiveDirectory 服务器运行 Windows Server 2003、2008 和 2012，在各种域功能模式下（见下文）。该代码在运行 .NET 4.0 的机器上运行，但在运行 .NET 4.5 的机器上运行失败。

我们运行代码的三台 .NET 机器是：
- 运行 .NET 4.0 的 Windows 7
- 运行 .NET 4.5 的 Windows Vista - 运行 .NET 4.5
的 Windows Server 2012

我们尝试过的 Active Directory 服务器是：
- 将 AD 域功能模式设置为 Windows 2000 本机的
Windows 2003 - 将 AD 域功能模式设置为 Windows Server 2003 的 Windows 2003
- 将 AD 域功能模式设置为 Windows 2000 本机的 Windows 2008
-将 AD 域功能模式设置为 Windows Server 2003
的 Windows 2008 - 将 AD 域功能模式设置为 Windows Server 2008 的 Windows 2008
- 将 AD 域功能模式设置为 Windows 2012 的 Windows 2012

所有这些 Active Directory 服务器都配置为一个简单的单一林，并且客户端计算机不是域的一部分。除了测试此行为之外，它们不用于任何其他功能，并且除了 Active Directory 之外不运行任何其他功能。

* * *

编辑 - 2012 年 10 月 9 日

感谢所有回复的人。下面是一个演示该问题的 C# 命令行客户端，以及一个我们确定的短期解决方法，它不需要我们更改任何有关 Active Directory 和 DNS 配置的内容。似乎该异常仅在 PrincipalContext 的实例中引发一次。我们包括了 .NET 4.0 机器 (Windows 7) 和 .NET 4.5 机器 (Windows Vista) 的输出。

```
using System;
using System.DirectoryServices.AccountManagement;

namespace ADBug
{
    class Program
    {
        static void Main(string[] args)
        {
            const string activeDirectoryServer = "MyActiveDirectoryServer";
            const string activeDirectoryLogin = "MyADAccount";
            const string activeDirectoryPassword = "MyADAccountPassword";
            const string validUserAccount = "TestUser@MyDomain.com";
            const string unknownUserAccount = "UnknownUser@MyDomain.com";

            var principalContext = new PrincipalContext(ContextType.Domain, activeDirectoryServer, activeDirectoryLogin, activeDirectoryPassword);

            // .NET 4.0 - First attempt with a valid account finds the user
            // .NET 4.5 - First attempt with a valid account fails with a PrincipalOperationException
            TestFindByIdentity(principalContext, validUserAccount, "Valid Account - First Attempt");
            // Second attempt with a valid account finds the user
            TestFindByIdentity(principalContext, validUserAccount, "Valid Account - Second Attempt");
            // First attempt with an unknown account does not find the user
            TestFindByIdentity(principalContext, unknownUserAccount, "Unknown Account - First Attempt");
            // Second attempt with an unknown account does not find the user (testing false positive)
            TestFindByIdentity(principalContext, unknownUserAccount, "Unknown Account - Second Attempt");
            // Subsequent attempt with a valid account still finds the user
            TestFindByIdentity(principalContext, validUserAccount, "Valid Account - Third Attempt");
        }

        private static void TestFindByIdentity(PrincipalContext principalContext, string userAccountToTest, string message)
        {
            var exceptionThrown = false;
            var userFound = false;
            try
            {
                using (var user = UserPrincipal.FindByIdentity(principalContext, IdentityType.UserPrincipalName, userAccountToTest))
                {
                    userFound = (user != null);
                }
            }
            catch (PrincipalOperationException)
            {
                exceptionThrown = true;
            }
            Console.Out.WriteLine(message + " - Exception Thrown  = {0}", exceptionThrown);
            Console.Out.WriteLine(message + " - User Found = {1}", userAccountToTest, userFound);
        }
    }
} 
```

.NET 4.0 输出

```
Valid Account - First Attempt - Exception Thrown  = False
Valid Account - First Attempt - User Found = True
Valid Account - Second Attempt - Exception Thrown  = False
Valid Account - Second Attempt - User Found = True
Unknown Account - First Attempt - Exception Thrown  = False
Unknown Account - First Attempt - User Found = False
Unknown Account - Second Attempt - Exception Thrown  = False
Unknown Account - Second Attempt - User Found = False
Valid Account - Third Attempt - Exception Thrown  = False
Valid Account - Third Attempt - User Found = True 
```

.NET 4.5 输出

```
Valid Account - First Attempt - Exception Thrown  = True
Valid Account - First Attempt - User Found = False
Valid Account - Second Attempt - Exception Thrown  = False
Valid Account - Second Attempt - User Found = True
Unknown Account - First Attempt - Exception Thrown  = False
Unknown Account - First Attempt - User Found = False
Unknown Account - Second Attempt - Exception Thrown  = False
Unknown Account - Second Attempt - User Found = False
Valid Account - Third Attempt - Exception Thrown  = False
Valid Account - Third Attempt - User Found = True 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T20:42:13.720

我们遇到了完全相同的问题（跨域查询在更新到 4.5 时失败）——我认为这是一个错误，因为它破坏了现有的（4.0）代码。

但是，为了使其正常工作 - 查看其中一个（现在）失败的客户端，我注意到有一堆失败的 SRV 记录的 DNS 请求，形式如下：

```
_ldap._tcp.MYSERVER1.mydomain.com,INet,Srv
_ldap._tcp.dc._msdcs.mydomain.com,INet,Srv 
```

修改我们的 DNS 服务器（故障客户端使用的 DNS）为所有 mydomain.com 流量到域中的一个 DC 的转发区域确实解决了这个问题。

使用 nslookup，从之前（失败时）到现在（工作）的行为是，在这些查询将返回“不存在的域”之前，而现在它们返回“ *** No Service location (SRV) records available for ...” . 故障点似乎是域的感知不存在，而不是缺少 SRV 记录。希望 MS 恢复这种行为，但与此同时，如果您可以控制故障客户端的 DNS，您可能会幸运地创建 DNS 转发区域。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T20:36:53.227

对于 OP（以及任何其他帮助回复的人），我们有（有）同样的问题。在我们的开发环境中，安装了 VS2012 并且我们的应用在登录期间在运行时中断（如上所述的 AD 问题）。所以我清理了我的系统并继续使用 2010 年，每次我读到一篇关于 2012 年有多棒的新博客文章时，我都会流泪。

多亏了 Scott Hanselman，我才找到了这个帖子。我在我的开发盒上安装了一个VM，上面安装了Windows 8 developer 90day preview，还有VS2012。让我们的应用程序启动并运行，并立即遇到登录 AD 障碍。简单地将我们的 FindByIdentity 包装在一个 try catch 中，并在第一次 catch 后强制它再次尝试 - 中提琴它起作用了！所以感谢那些想出这个小技巧的人！！

因此，它是一个小修复，是一个适用于本地开发的“hack”，并且不应该影响生产，因为我们不会很快将 4.5 投入生产。

但不利的一面是，当我们在 2010 年以下运行时，现在在本地登录需要 2 分钟而不是几秒钟 :(

我真的不知道我还能提供什么来实际尝试帮助解决这种情况，但我认为无论如何我都会分享我的 2 美分，因为这似乎仍然是一个主要问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-14T10:01:23.683

将 .net 框架从 4.0 升级到 4.5 后遇到了同样的问题，我将框架升级到 .net 4.5.1 并且它工作正常。

# jquery - JQuery 如果一个元素的 href 属性等于另一个元素的 href 属性，则

> ID：12608974
> 
> 赞同：1
> 
> 时间：2012-09-26T19:26:33.927
> 
> 标签：jquery, attributes

我有两个元素，一个右键菜单和一个分页菜单。两个菜单都包含相同的 href 链接。

右菜单

```
<ul class="right-menu">
<li class="menu-item">
<a href="#p1">anchor link one</a>
</li>
<li class="menu-item">
<a href="#p2">anchor link two</a>
</li>
</ul> 
```

分页菜单

```
<div class="page_nav">
<a class="page_link" href="#p1">1</a>
<a class="page_link active_page" href="#p2">2</a>
</div> 
```

我想知道在单击分页导航中的等效链接/href 时如何向“右侧菜单”添加一类“活动”。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:30:32.180

```
$(".page_nav a").click(function() {
    $(".right-menu a")
        .removeClass("active")
        .filter("[href=" + $(this).attr("href") + "]")
        .addClass("active");
}); 
```

[演示在这里](http://jsfiddle.net/JYYPT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:30:25.403

就像是：

```
$('.page_link').click(function(){

    var href = $(this).attr('href');
    $('.right-menu a').removeClass('active');
    $('.right-menu a[href='+href+']').addClass('active');

}); 
```

**注：未测试**

# ruby-on-rails-3.2 - save_and_open_page (capybara / launchy) 在项目中停止工作 - 错误

> ID：12608976
> 
> 赞同：3
> 
> 时间：2012-09-26T19:26:35.033
> 
> 标签：ruby-on-rails-3.2, capybara, rspec-rails

尝试调试在合并 Rails 两个项目时我无法工作的规范部分。

我已经删除了我的 Gemfile.lock 并从头开始重新安装，我已经在特定的 gem 上运行了 bundle update，但是当我尝试在我的请求规范中使用时出现错误

save_and_open_page

```
railsdev$ bin/rspec spec/requests/authentication_pages_spec.rb 
No DRb server is running. Running in local process instead ...
/Users/rb/Repos/Genie/spec/requests/authentication_pages_spec.rb:33:in `block (3 levels) in <top (required)>': undefined local variable or method `save_and_open_page' for #<Class:0x007f981d139608> (NameError)
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/example_group.rb:201:in `module_eval'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/example_group.rb:201:in `subclass'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/example_group.rb:187:in `describe'
    from /Users/rb/Repos/Genie/spec/requests/authentication_pages_spec.rb:27:in `block (2 levels) in <top (required)>'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/example_group.rb:201:in `module_eval'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/example_group.rb:201:in `subclass'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/example_group.rb:187:in `describe'
    from /Users/rb/Repos/Genie/spec/requests/authentication_pages_spec.rb:24:in `block in <top (required)>'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/example_group.rb:201:in `module_eval'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/example_group.rb:201:in `subclass'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/example_group.rb:187:in `describe'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/dsl.rb:18:in `describe'
    from /Users/rb/Repos/Genie/spec/requests/authentication_pages_spec.rb:13:in `<top (required)>'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `map'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load_spec_files'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22:in `run'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:66:in `rescue in run'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:62:in `run'
    from /Users/rb/.rvm/gems/ruby-1.9.3-p125@genie/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

谁能提出它失败的原因以及我需要做些什么来纠正这个问题？

我让它在一个测试项目中运行，但在核心项目的主副本中，我不想把它搞砸。

编辑#1

要求的代码：

```
require 'spec_helper'

# describe "AuthenticationPages" do
#   describe "GET /authentication_pages" do
#     it "works! (now write some real specs)" do
#       # Run the generator again with the --webrat flag if you want to use webrat methods/matchers
#       get authentication_pages_index_path
#       response.status.should be(200)
#     end
#   end
# end

describe "Authentication" do

  subject { page }

  describe "login page" do
    before { visit login_path }

    it { should have_selector('h1',    text: 'Login') }
    it { should have_selector('title', text: 'Login') }
  end

  describe "login" do
    before { visit login_path }

    describe "with invalid information" do
      before { click_button "Login" }

      it { should have_selector('title', text: 'Login') }
      it { should have_error_message('Invalid') }

      save_and_open_page

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
      end
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { valid_login(user) }

      it { should have_selector('title', text: user.name) }
      #it { should have_link('Profile', href: user_path(user)) }
      it { should have_link('Logout', href: logout_path) }
      it { should_not have_link('Login', href: login_path) }

      describe "followed by logout" do
        before { click_link "Logout" }
        it { should have_link('Login') }
      end
    end
  end

  describe "authorization" do

    describe "for non-logged-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "when attempting to visit a protected page" do
        before do
          visit edit_user_path(user)
          fill_in "Name",    with: user.name
          fill_in "Password", with: user.password
          click_button "Login"
        end

        describe "after logging in" do

          it "should render the desired protected page" do
            page.should have_selector('title', text: 'Edit user')
          end
        end
      end

      describe "in the Users controller" do

        describe "visting the user index" do
            before { visit users_path }
            it { should have_selector('title', text: 'Login') }
        end

        describe "visiting the edit page" do
          before { visit edit_user_path(user) }
          it { should have_selector('title', text: 'Login') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(login_path) }
        end
      end
    end

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, name: "WrongName") }
      before { login user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should_not have_selector('title', text: full_title('Edit user')) }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path) }
      end
    end
  end
end 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.5'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem "rspec-rails", "~> 2.10.1"
  gem 'guard-rspec', '0.5.5'
  gem 'annotate', '~> 2.4.1.beta'
  gem 'pickle'
  gem 'simplecov'
  gem 'pg', '0.12.2'
  gem 'capybara', '1.1.2'
  gem 'launchy'   
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.4'
  gem 'coffee-rails', '~> 3.2.2'
  gem 'uglifier', '>= 1.2.3'
  gem 'bootstrap-sass', '~> 2.0.3.1'
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby    
end

gem 'jquery-rails', '2.0.2'
gem 'bootstrap-will_paginate', '0.0.5'
gem 'bootstrap-datepicker-rails'
gem 'will_paginate', '3.0.3'
gem 'faker', '1.0.1'
gem 'wicked_pdf'

# To use ActiveModel has_secure_password
gem 'bcrypt-ruby', '3.0.1'

#gem 'ransack'
gem 'cancan'

# Test gems on Macintosh OS X
group :test do    
  gem 'rb-fsevent', :git => 'git://github.com/ttilley/rb-fsevent.git', :branch => 'pre-compiled-gem-one-off'
  gem 'growl', '1.0.3'
  gem 'guard-spork', '0.3.2'
  gem 'spork', '0.9.0'
  gem 'factory_girl_rails', '4.1.0'
  gem 'cucumber-rails', '1.2.1', :require => false
  gem 'database_cleaner', '0.7.0'
end 

group :production do
    gem 'pg', '0.12.2'
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T06:45:37.413

尝试从**it**块`save_and_open_page`内部调用：

 **所以而不是：

```
it { should have_error_message('Invalid') }

save_and_open_page 
```

尝试这个：

```
it { should have_error_message('Invalid'); save_and_open_page } 
```

今晚帮我修好了**

# javascript - Google Maps Api - 如何获取“搜索的地点/区域”的坐标？

> ID：12608977
> 
> 赞同：0
> 
> 时间：2012-09-26T19:26:35.690
> 
> 标签：javascript, google-maps, google-maps-api-3

因此，我对 Google Maps API 有一些经验，并且在这里阅读了一些类似于我的问题，即。[Google Maps API - 获取街道坐标](https://stackoverflow.com/questions/11835623/google-maps-api-getting-street-coordinates)

现在，我需要做的是，要使用**Zone**参数查询 Google Maps API，并获取其坐标作为响应（最好是 JSON 格式），*查询应该只在一个城市内执行*。假设该城市是哥伦比亚麦德林**（坐标：纬度：6.236165；长：-75.575262）**，并且**我的查询（区域）是**：*“Poblado”*（麦德林内的一个地区），**由于这样的查询，我会喜欢返回它的坐标**。

我怎样才能完成这项任务？

请帮我，

一如既往地提前感谢您，

真挚地，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:34:29.420

您可以使用Google Geolocation API 的[组件过滤](https://developers.google.com/maps/documentation/geocoding/#ComponentFiltering)。

# jekyll - Octopress 和 jsMath 一起使用

> ID：12608984
> 
> 赞同：0
> 
> 时间：2012-09-26T19:27:10.447
> 
> 标签：jekyll, mathjax, octopress

我正在将我的博客移至 Octopress。我对 Octopress 和 MathJax 之间的交互有一个小问题，因为 Octopress 中的降价解析首先发生，它践踏了整个 MathJax 代码。

例如，您可以在此处查看我的原始 .md 文件以及在[此处](https://raw.github.com/gist/544226d71624f7fa8e87/4010fc2ae841e50d9ae06f99621fc7796e86515b/post.md)处理后的[结果](http://chris-taylor.github.com/blog/2012/09/25/test/)。

我需要某种方式告诉 Octopress 忽略一段文本，以便它通过处理原样传递，并且 MathJax 脚本可以正确地将其呈现为数学。

我试过用`<pre>`和`<span>`标签包围数学，并用反引号包围它，但这些都没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:30:28.580

事实证明，如果您在 Google 上搜索得足够努力，这是一个已知且已解决的问题。[chico 的博客](http://oblita.com/blog/2012/07/06/octopress-with-mathjax-by-kramdown/)中详细介绍了一种方法，其中涉及将 markdown 解析器切换到 kramdown。

可以在[Gregory Lussier 的博客](http://greglus.com/blog/2011/11/29/integrate-MathJax-LaTeX-and-MathML-Markup-in-Octopress/)上找到一个更简单的解决方案，它只允许显示数学（没有内联数学） ，并且涉及使用 a ，它会停止降价处理。

我决定采用的解决方案在[Luikore 的博客](http://luikore.github.com/2011/09/good-things-learned-from-octopress/)中有详细说明，并且涉及一个自定义降价处理器，它是 rdiscount 的一个分支。它还同时解决了其他几个琐碎的问题。

# objective-c - 隐藏来自预编译库的 NSLog 输出

> ID：12608988
> 
> 赞同：5
> 
> 时间：2012-09-26T19:27:18.977
> 
> 标签：objective-c, ios, nslog

我正在使用一个我没有源代码的预编译库，它正在打印很多调试日志。是否可以仅隐藏特定库的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T22:57:49.187

No.`NSLog`将其输出直接写入标准错误，而不检查它是否应该。调用函数后，将写入输出。

也许您正在使用该库的调试版本。与创建它的人核实，看看是否有，或者他们愿意创建一个无日志版本。

如果没有记录就无法获得库的版本，则可以将标准错误重定向到`/dev/null`，这将导致`NSLog`输出被系统丢弃。请注意，这需要您处理低级文件描述符，并且您将丢弃*所有*日志记录的输出，而不仅仅是该库。您可以通过仅在调用库函数时重定向来最小化丢失的输出，但是库调用的任何函数或方法也将忽略其日志。您也可以随时重定向它，除非您正在记录，这意味着所有其他库都将丢弃它们的日志。由于无法确保不丢弃有用的日志（如异常消息），因此我不建议对应用程序的调试版本进行任何重定向。

这是重定向和取消重定向将起作用（请注意，这些也可以用作objective-c方法）：

```
int discardLogging() {
    static int discardedOutputFD = -1;
    if(discardedOutputFD == -1) discardedOutputFD = open("/dev/null", O_WRONLY);
    int copy = dup(2); // Duplicate the old file descriptor, so it can be restored
    dup2(discardedOutputFD, 2); // Redirect
    return copy;
}

void restartLogging(int copy) {
    dup2(copy, 2); // Redirect back
    close(copy); // Not needed anymore
} 
```

第一个函数将标准错误重定向到`/dev/null`并返回旧文件描述符的副本。第二个将其重定向到复制的描述符并关闭额外的副本。警告：您应该检查每个调用的函数的返回值，因为它们映射到系统调用。

# android - Ormlite Android 批量插入

> ID：12608989
> 
> 赞同：9
> 
> 时间：2012-09-26T19:27:21.163
> 
> 标签：android, sqlite, transactions, ormlite

谁能解释为什么我的插入在 Ormlite 中需要这么长时间？在桌面上的一个 sqlite 事务中执行 1,700 次插入只需不到一秒钟。但是，当使用 Ormlite for Android 时，大约需要 70 秒，我可以在调试消息中看到每个插入。

当我尝试将插入包装到一个事务中时，它的速度完全相同。我知道 Android 和 Ormlite 都有开销，但是，我不认为它会那么好。我的代码如下：

```
 this.db = new DatabaseHelper(getApplicationContext());
    dao = db.getAddressDao();
final BufferedReader reader = new BufferedReader(new InputStreamReader(getResources().openRawResource(R.raw.poi)));
    try {
        dao.callBatchTasks(new Callable<Void>() {
            public Void call() throws Exception {
                String line;
                while ((line = reader.readLine()) != null) {
                    String[] columns = line.split(",");
                    Address address = new Address();
                    // setup Address
                    dao.create(address);
                } 
            return null;
         }
        });
    } catch (SQLException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-12-05T11:50:44.457

我遇到了同样的问题，并找到了合理的解决方法。这需要从 2 秒到 150 毫秒的插入时间：

```
final OrmLiteSqliteOpenHelper myDbHelper = ...;
final SQLiteDatabase db = myDbHelper.getWritableDatabase();
db.beginTransaction();
try{
    // do ormlite stuff as usual, no callBatchTasks() needed

    db.setTransactionSuccessful();
}
finally {
    db.endTransaction();
} 
```

**更新：**

刚刚在 Xperia M2 Aqua (Android4.4/ARM) 上进行了测试，`callBatchTasks()`实际上*速度更快*。90 毫秒与 120 毫秒。所以我认为更多的细节是有序的。

我们有 3 个表/类/DAO：Parent、ChildWrapper、Child。
关系： Parent 到 ChildWrapper - 1 到 n，ChildWrapper 到 Child - n 到 1。
代码如下：

```
void saveData(xml){
    for (parents in xml){
        parentDao.createOrUpdate(parent);
        for (children in parentXml){
            childDao.createOrUpdate(child);
            childWrapperDao.createOrUpdate(generateWrapper(parent, child));
        }
    }
} 
```

我在特定的 Android4.2/MIPS 机顶盒 (STB) 上获得了原始加速。 `callBatchTasks`是第一个选项，因为这就是我们在所有代码中使用的方法，并且效果很好。

```
parentDao.callBatchTasks(
    // ...
    saveData();
    // ...
); 
```

但是插入速度很慢，所以我们尝试`callBatchTasks`为每个使用过的 DAO 进行嵌套，设置自动提交关闭，startThreadConnection 可能还有其他东西——暂时不记得了。无济于事。

根据我自己的经验和其他类似的帖子，当涉及多个表/DAO 时似乎会出现问题，并且它与具体设备的 Android（或 SQLite）的实现细节有关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T16:33:36.473

不幸的是，这可能是“预期的”。当我在我的模拟器下执行该数量的插入时，我也会获得类似的性能。批处理任务和关闭自动提交似乎没有帮助。

如果您希望将大量数据加载到数据库中，则可以考虑重播数据库转储。看这里：

> [Android OrmLite 预填充数据库](https://stackoverflow.com/questions/5054974/android-ormlite-pre-populate-database)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:52:17.950

我的猜测是你的速度有点慢，因为你一次做两个 IO 任务（至少在上面显示的代码中）。您正在读取文件并写入数据库（这是一个文件）。另外，据我了解，交易的规模应该是合理的。1600 似乎是一个非常高的数字。我会从 100 开始，但会考虑大小。

所以基本上我建议你“分块”你的阅读和插入。

将 100 行读取到临时数组，然后插入 100。然后读取下一个 100，然后插入，等等。

# mysql - 创建第一个 gem，取决于 activerecord，我的测试应该命中数据库吗？

> ID：12608998
> 
> 赞同：1
> 
> 时间：2012-09-26T19:28:04.317
> 
> 标签：mysql, ruby, activerecord

我正在创建一个 gem，我的类初始化方法将 ActiveRecord 模型作为参数。

这不是与 Rails 相关的宝石。

在我的单元测试（rspec）中，我应该如何创建一个连接到 mysql 的单元测试？

我觉得很奇怪我必须创建一个 database.yml 文件，然后将我的凭据等用于单元测试。

我应该改用 sqlite 吗？

如果有人可以提供一个我应该如何做到这一点的例子，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:42:34.190

我认为您不需要 ActiveRecord 对象，甚至中继您收到的对象继承自 ActiveRecord::Base。

相反，IMO 会更好的是使用模拟的 ActiveRecord::Base 对象。通过使用模拟对象而不是所需的原始对象，您可以模拟 active_record 对象的任何行为和状态，并且您的测试不需要数据库连接，这将使它们运行得更快。

您可以在这里阅读更多关于模拟（理论）的信息： [http ://en.wikipedia.org/wiki/Mock_object](http://en.wikipedia.org/wiki/Mock_object)

在此处练习（使用 rspec）： [http ://rubydoc.info/gems/rspec-mocks/frames](http://rubydoc.info/gems/rspec-mocks/frames)

希望能帮助到你！