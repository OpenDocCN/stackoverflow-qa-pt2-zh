# StackOverflow 问答 13775000-13775999

# ruby-on-rails - Rails `require'：尝试在本地运行应用程序时无法加载此类文件 - mysql2/mysql2 (LoadError)

> ID：13775005
> 
> 赞同：0
> 
> 时间：2012-12-08T06:03:48.017
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试为本地计算机上的现有 Rails 项目启动服务器，但出现以下错误。谁能解释我为什么会收到此错误以及如何解决？

```
 $ rails s
    /Users/tomcaflisch/Sites/mysite/refinerycms/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2.rb:9:in `require': cannot load such file -- mysql2/mysql2 (LoadError)
        from /Users/tomcaflisch/Sites/mysite/refinerycms/ruby/1.9.1/gems/mysql2-0.3.11/lib/mysql2.rb:9:in `<top (required)>'
        from /Users/tomcaflisch/.rvm/gems/ruby-1.9.3-p0@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
    ... 
```

这里有一些可能相关的输出来帮助找出问题：

```
$ which ruby
/Users/tomcaflisch/.rvm/rubies/ruby-1.9.3-p0/bin/ruby

$ ruby -v
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.3.0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:15:19.910

这可能是另一回事，但安全的是您的 Rails 应用程序找不到 mysql gem。

第一个建议是使用 ruby​​ 1.9.3 而不是 ruby​​ 1.9.1

但最快的解决方案应该是再次为项目安装所有 gem。

所以去你的网站，删除**/Users/tomcaflisch/Sites/mysite/refinerycms/ruby/**下的所有文件（这将删除包 Gems），删除**Gemfile.lock**，然后运行：**bundle install**

那应该可以解决问题；）

在此之前，您也可以尝试运行**捆绑更新**，这也可以解决问题。

# c# - 如何浏览和保存文件夹中的图像？

> ID：13775006
> 
> 赞同：0
> 
> 时间：2012-12-08T06:03:49.307
> 
> 标签：c#

我想浏览图片并显示在图片框中，图片应该保存在一个文件夹中，可能在C：或D：驱动器中，我使用以下编码在图片框中浏览和显示

```
OpenFileDialog open = new OpenFileDialog();
        open.Filter = "Image Files(*.jpg; *.jpeg; *.gif; *.bmp)|*.jpg; *.jpeg; *.gif; *.bmp";
        if (open.ShowDialog() == DialogResult.OK)
        {
            Image img = new Bitmap(open.FileName);
            string imagename = open.SafeFileName;
            Txt_countrylogo.Text = imagename;
            pictureBox2.Image = img.GetThumbnailImage(340, 165, null, new IntPtr());
            open.RestoreDirectory = true;
        } 
```

现在我需要帮助将图像保存在文件夹中，请提出一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T06:06:14.263

您可以使用[`Image.Save`](http://msdn.microsoft.com/en-us/library/9t4syfhh.aspx)Image 类的方法来保存图像。

```
img.Save(@"d:\temp\" + imagename); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T06:19:45.223

您可以使用`SaveFileDialog`

```
 var fd = new SaveFileDialog();
  fd.Filter = "Bmp(*.BMP;)|*.BMP;| Jpg(*Jpg)|*.jpg";
  fd.AddExtension = true;
  if (fd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
  {
      switch (Path.GetExtension(fd.FileName).ToUpper())
      {
          case ".BMP":
               pictureBox2.Image.Save(fd.FileName, System.Drawing.Imaging.ImageFormat.Bmp);
               break;
          case ".JPG":
               pictureBox2.Image.Save(fd.FileName, System.Drawing.Imaging.ImageFormat.Jpeg);
               break;
          case ".PNG":
               pictureBox2.Image.Save(fd.FileName, System.Drawing.Imaging.ImageFormat.Png);
               break;
          default:
               break;
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T06:28:09.827

```
OpenFileDialog open = new OpenFileDialog();
open.Filter = "Image Files(*.jpg; *.jpeg; *.gif; *.bmp)|*.jpg; *.jpeg; *.gif; *.bmp";
if (open.ShowDialog() == DialogResult.OK)
{
    Image img = new Bitmap(open.FileName);
    System.IO.File.Copy(open.FileName, open.FileName.Split('.')[0]+"_Copy."+open.FileName.Split('.')[1]);
    //this is an example, you give it the name you want
    string imagename = open.SafeFileName;
    Txt_countrylogo.Text = imagename;
    pictureBox2.Image = img.GetThumbnailImage(340, 165, null, new IntPtr());
    open.RestoreDirectory = true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T06:28:20.827

您可以使用此代码：

```
Image bitmap = Image.FromFile("C:\\MyFile.bmp");
bitmap.Save("C:\\MyFile2.bmp"); 
```

# python - 在我的浏览器中看不到 view.py。姜戈

> ID：13775007
> 
> 赞同：1
> 
> 时间：2012-12-08T06:03:50.117
> 
> 标签：python, django

我刚刚安装了 Django，并在我的 views.py 文件中创建了一个简单的 HTML 页面。当我尝试为 HTML 页面创建主页 URL 时，我无法显示它。

这是我在 urls.py 文件中使用的代码：

```
from django.conf.urls.defaults import *
from bookmarks.views import *
urlpatterns = patterns('',
  (r'^$', main_page),
) 
```

我错过了什么？浏览器调试器说第 2 行有语法错误，但我直接从书中复制了它。

编辑：

这是我现在的语法错误（views.py）：

```
from django.http import HttpResponse
def main_page(request):
    output = '''
        <html>
            <head><title>%s</title></head>
            <body>
                <h1>%s</h1><p>%s</p>
            </body>
        </html>
''' % (
    'Django Bookmarks',
    'Welcome to Django Bookmarks',
    'Where you can store and share bookmarks!'
)
return HttpResponse(output) 
```

我也从书中复制了这个......所以我很困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T06:15:25.747

您的缩进已关闭：

```
from django.http import HttpResponse

def main_page(request):
    output = '''
        <html>
            <head><title>%s</title></head>
            <body>
                <h1>%s</h1><p>%s</p>
            </body>
        </html>
    ''' % (
        'Django Bookmarks',
        'Welcome to Django Bookmarks',
        'Where you can store and share bookmarks!'
    )

    return HttpResponse(output) 
```

Python 使用缩进来表示块，所以如果你的代码没有正确缩进，它就不会像你想要的那样运行。

# asp.net - 如何处理我的应用程序异常使用内存？

> ID：13775009
> 
> 赞同：2
> 
> 时间：2012-12-08T06:04:52.647
> 
> 标签：asp.net, asp.net-mvc-3, memory-management, memory-leaks, application-pool

我有一个托管在共享服务器上的 ASP.NET MVC 3 应用程序，但有以下限制：

1.  100 MB 内存
2.  15% 的 CPU

主机管理员说，如果应用程序达到这些限制，应用程序池将重新启动。

部署后，我注意到应用程序池重启太快（几分钟后）。我使用[MonitorAspNetApplication](http://nugetmusthaves.com/Package/MonitorAspNetApplication)检查内存使用情况。

首次加载时，分配的内存约为 8 或 9 MB，使用的内存约为 500 或 600 KB。

但是当我开始使用应用程序（CRUD 操作，...）时，使用的内存会上下波动，但不会超过几（6-10）兆字节。但是分配的内存会逐渐增加，直到达到 100 MB，然后应用程序池会重置。

我无法弄清楚为什么会这样。应用程序不大，不做复杂的操作或繁重的查询。

我在这个项目中首先使用 EF 代码、StructureMap、AutoMapper 和 ELMAH。

1.  这个问题的可能原因是什么？我怎样才能检测和解决它们？
2.  这些工具（EF、StructureMap 等）会导致这种内存使用吗？
3.  这是内存泄漏吗？或者它被称为别的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:54:28.823

这是由于公共语言运行时的性质。垃圾收集器在内存不足时收集高阶生成，但是当您的应用程序获得 100 MB 内存时，系统中有很多可用内存。您应该自己监控内存使用情况，并在使用量接近 100 MB 时调用 GC.Collect。

# php - 在链接中实现斜线，例如：example.com/parameter

> ID：13775013
> 
> 赞同：1
> 
> 时间：2012-12-08T06:06:14.443
> 
> 标签：php, hyperlink

我正在尝试创建`example.com/parameter`指向`example.com?id=parameter`或`example.com/index.php?id=parameter`使用的链接，我对此进行了`php`
很多搜索，但找不到参考。我所需要的只是这种技术的名称，以便我可以搜索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:11:06.410

查看[mod_rewrite](http://wettone.com/code/clean-urls)示例。这称为 URL 重写或清理 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T06:13:34.397

您使用类似 mod_rewrite 的**URL 重写**，但设计模式称为`front controller`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T06:14:50.153

你需要创建一个`.htaccess`文件来重写你的 URL，那里有很多教程，看看这篇[文章](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T06:09:14.000

这种技术称为**URL 重写**。最常见的方法是使用 Apache 的`mod_rewrite`模块（你可以谷歌一下）。

# ruby - javascript和css响应在merb应用程序中返回404

> ID：13775014
> 
> 赞同：1
> 
> 时间：2012-12-08T06:06:15.237
> 
> 标签：ruby, thin, unicorn, merb, rackup

我正在尝试设置一个merb应用程序，现在尝试将merb作为普通机架启动

应用程序使用瘦、独角兽或直接使用 rackup 的 html 内容是

返回但 javascript 和 css 响应返回 404

```
~ No routes match the request: /javascripts/jquery.highlight.js - (Merb::ControllerExceptions::NotFound) 
```

这是它为每个资产尝试访问的状态

现在使用 ./bin/merb 启动 merb 就像所有 javascript 和 css 都使用

200，但我希望使用 unicorn 部署应用程序，因此希望避免 404 错误

# visual-studio - 类型'System.Threading.Tasks.Task ' 存在于两个 dll 中

> ID：13775015
> 
> 赞同：2
> 
> 时间：2012-12-08T06:06:54.630
> 
> 标签：visual-studio, windows-phone-7, asynchronous, async-await, async-ctp

编译代码时出现以下错误。

“System.Threading.Tasks.Task”类型存在于“c:\Go\WP7CodeSamples\Pradna\packages\AsyncAwaitCTP.1.0\lib\sl4-wp71\AsyncCtpLibrary_Phone.dll”和“c:\Go\WP7CodeSamples\Pradna”中\packages\System.Threading.Tasks.3.0.2-beta2\lib\sl4-wp71\System.Threading.Tasks.WP71.dll'

不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:03:34.837

您使用的是旧版本的 Async CTP。如果您仍在使用 Visual Studio 2010，请下载[Visual Studio Async CTP (Version 3)](http://www.microsoft.com/en-us/download/details.aspx?id=9983)。如果您使用的是 Visual Studio 2012，请从 NuGet 获取目标包：http: [//nuget.org/packages/Microsoft.Bcl.Async](http://nuget.org/packages/Microsoft.Bcl.Async)。

# facebook - 应用程序配置不允许给定 URL。-- PC 名称？

> ID：13775019
> 
> 赞同：1
> 
> 时间：2012-12-08T06:07:52.393
> 
> 标签：facebook, oauth

我有几个问题。我在“欺骗”系统以访问 PC 主机时遇到问题。

简而言之：

我有一个客户聘请我制作将 Facebook 整合到其中的软件。我在 ASP.Net 中对此进行编码。

现在，我知道 facebooks 回调支持 localhost，但是，我希望它重定向到：http:(slash slash)pcname-pc/Default.aspx

有没有一种简单的方法可以做到这一点？

我想我必须从基于 php 的 web 授权它，然后将信息转发到本地主机以上传图像。但是，facebook 的 API 是否允许我使用不在授权回调列表中的来源的令牌？

# dns - 为什么根 DNS 服务器不需要指向权威服务器？

> ID：13775021
> 
> 赞同：0
> 
> 时间：2012-12-08T06:07:57.493
> 
> 标签：dns

因此，据我所知，如果根服务器不包含该信息，则根 DNS 服务器会将 url/IP 匹配查询定向到权威服务器。为什么 DNS 根服务器不能保存所有信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:34:46.743

根 DNS 服务器不会真正“指导查询”。它会发送推荐信。接收该推荐的递归解析器应遵循它。此外，没有查询“url/IP”。在 DNS 中找不到 URL（尽管有`NAPTR`记录）。

DNS 是一个分层的分布式数据库，专门设计用于缓解包含所有内容的集中式数据库中固有的扩展问题，这是我们在 DNS（旧`HOSTS.TXT`文件）之前所拥有的。

要求根服务器“只保留所有信息会消除 DNS 数据库的分层和分布式性质，这使我们回到了我们开始时遇到的问题、不可扩展的情况。更不用说它了由于 DNS 中的信息量巨大且更改频率很高，因此此时无法执行此操作。

# android - 关于在an droid中调用native方法

> ID：13775022
> 
> 赞同：4
> 
> 时间：2012-12-08T06:08:15.550
> 
> 标签：android, android-ndk, java-native-interface, native

真的需要帮助。我被困在这里。谢谢你在这里的任何建议。

我正在使用 NDK 构建一个 so 库，然后在 java 中调用它。但是我只能在作为启动活动的 mainactivity 中调用它，如果我尝试在由 mainactivity 启动的另一个活动中调用它，它将失败。我在`OnCreate`每个activity的方法中调用方法，代码很简单如下：

```
System.loadLibrary("svm-predict");           
double dd = predictbattery("fsdfsdf", "sdfsdf", 0); 
```

错误的堆栈是：

```
12-08 00:47:08.153: E/AndroidRuntime(13370): FATAL EXCEPTION: main
12-08 00:47:08.153: E/AndroidRuntime(13370): java.lang.UnsatisfiedLinkError: predictbattery
12-08 00:47:08.153: E/AndroidRuntime(13370):    at com.dash.RunningLogActivity.predictbattery(Native Method)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at com.dash.RunningLogActivity.onCreate(RunningLogActivity.java:58)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at android.os.Looper.loop(Looper.java:123)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at android.app.ActivityThread.main(ActivityThread.java:3683)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at java.lang.reflect.Method.invokeNative(Native Method)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at java.lang.reflect.Method.invoke(Method.java:507)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-08 00:47:08.153: E/AndroidRuntime(13370):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:54:22.673

JNI C 文件中的方法签名也包含包名和类名。所以你不能从不同的活动/类中调用相同的函数。

例如。

```
JNIEXPORT float JNICALL
Java_com_artifex_mupdf_MuPDFCore_getPageWidth(JNIEnv *env, jobject thiz)
{ } 
```

这个 JNI 方法“getPageWidth()”只能从

```
com.artifex.mupdf.MuPDFCore 
```

班级。因此，您只能从您的主要活动中调用它。

# iphone - 苹果手机 | 通过简单的短信发送电子名片

> ID：13775024
> 
> 赞同：11
> 
> 时间：2012-12-08T06:08:56.533
> 
> 标签：iphone, objective-c, ios, ios4, vcf-vcard

我想通过简单的短信发送电子名片。***我不打算用电子邮件的 iMessage 发送 vCard。***

我创建了一个格式如下的 vCard。

```
BEGIN:VCARD
VERSION:3.0
N:;Sahil;;;
FN:Sahil
EMAIL;type=INTERNET;type=HOME:s.k@yahoo.com
TEL;type=CELL:98-76-543210
END:VCARD 
```

我正在尝试将上述内容发送到`MFMessageComposeViewController`. 当我发送消息时，另一台设备将其作为简单的 SMS 接收。

我想知道是否可以通过 iPhone 中的普通 SMS 发送 vCard？如果是，我需要遵循一些编码吗？

**注意：**只是有关如何从 BlackBerry 设备发送 vCard 的信息

```
sms.setPayloadData(card.getBytes("ISO-8859-1")); 
```

![短信应用截图](../Images/a783764c5fe0c8276c1943ff55e0ef4d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T18:27:33.723

你试图做的事情是不可能的。您只能通过 MFMessageComposeViewController 的公共 API 发送纯文本。当前不支持任何附件或替代内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:32:09.980

在此处检查您的问题的可能答案：

[在 iPhone 上通过 SMS 发送位置信息或 vCard](https://stackoverflow.com/questions/7381938/send-location-information-or-vcard-through-sms-on-iphone)

[在 iPhone 中创建电子名片](https://stackoverflow.com/questions/7344267/creating-a-vcard-in-iphone)

[如何通过代码中的短信发送 vCard？](https://stackoverflow.com/questions/6339768/how-can-i-send-vcard-through-sms-message-in-code)

[https://github.com/aussiegeek/AddressBookVcardImport](https://github.com/aussiegeek/AddressBookVcardImport)

[http://www.developerfeed.com/objectivec/howto/how-generated-vcard-using-objectivec-iphone](http://www.developerfeed.com/objectivec/howto/how-generated-vcard-using-objectivec-iphone)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T03:20:58.037

我要回答。

不太可能......但它仍然不确定，因为缺乏你的整个端到端期望的更多细节，即设备接收 vcard。您提到了 BlackBerry API 中的 BinaryMessage setPayload() 方法。

Sahil，在阅读了您非常好的评论和大家的来回反馈后，我现在明白您打算通过 SMS 而不是 MMS 专门接收消息。

您期望发送设备使用 SMS，因此隐含地期望接收设备接收一串文本，并且不想将其与多部分消息中的其他部分分开。具有特殊内容的传入 SMS 消息可以由侦听传入数据的消息传递应用程序解析，在 iOS 的情况下，它可以将 SMS 文本中的 Web 链接和电话号码呈现为活动链接。但是我不知道有没有手机平台在板载消息应用中支持这种方式的vcard。当然不是iOS。也许黑莓操作系统。

我将要求进一步澄清一点（如果您回答，请编辑我的答案）：您是否已经开发了一个 BlackBerry 应用程序来将带有有效负载的 SMS 发送到另一部黑莓手机，并且知道它可以被解析为 vcard在那个平台上，只是想知道这是否可以在黑莓之外实现？

**编辑 -** 从逻辑上思考，iPhone 设备缺少一些关键的东西，或者添加了一些东西。第二点，黑莓代码要么提交所需的东西，要么不包括任何 iPhone 添加的停止检测 vcard 的内容。

我建议的解决方案是，临时订阅 SMS 网关，发送受控测试，并尽可能捕获通过网关的所有流量。

查看[http://www.redoxygen.com/](http://www.redoxygen.com/)

# android-intent - 从与意图相关的布局中删除或禁用按钮

> ID：13775027
> 
> 赞同：0
> 
> 时间：2012-12-08T06:09:31.773
> 
> 标签：android-intent, android-activity

我有一个意图：

```
 Intent myIntent = new Intent(this, MyActivity.class); 
```

有一个与 MyActivity 相关的布局（带有按钮）。

如何删除或禁用 myIntent 中的按钮？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:26:16.293

我大多是这样做的

```
Intent intent = new Intent(this, MyActivity.class);
Bundle msges = new Bundle();
msges.putString("disableTheBtn", "yes");
intent.putExtras(msges);
startActivity(intent); 
```

在**MyActivity 类里面**

```
 public void onCreate(Bundle savedInstanceState) {
        ---------Do some thing , Button and GUI initialization-------
        try{ 
            String  disableTheBtn = getIntent().getExtras().getString("disableTheBtn"));
           if (disableTheBtn != null && !disableTheBtn.isEmpty(){
              yourBtn.setVisibilty(View.GONE);//hide that button
           } 
       }catch(Exception e){
           e.printStack();
       } 
   } 
```

# ruby-on-rails - 如何使用远程 JSON 数据每 30 秒更新一次 MongoDB？

> ID：13775031
> 
> 赞同：0
> 
> 时间：2012-12-08T06:10:55.723
> 
> 标签：ruby-on-rails, json, mongodb, ruby-on-rails-3.2

我正在将远程 JSON 数据解析到 MongoDB，实际上我正在解析动态 JSON 数据，但我想每 30 秒用动态数据更新 MongoDB。

像这样解析 JSON 数据

```
require 'open-uri'

require 'json'

result = JSON.parse(open("url_of_json_service").read) 
```

我如何每 30 秒更新一次 MongoDB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:35:00.617

Cron 非常适合处理重复性任务，意味着处理在特定日期和时间执行命令的长时间运行的进程。正如您已经提到的，数据库将每 30 秒更新一次。

Ryan Bates 有一篇很棒的文章关于crob job [http://railscasts.com/episodes/164-cron-in-ruby](http://railscasts.com/episodes/164-cron-in-ruby)。我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:33:40.030

[您可以按照此](https://stackoverflow.com/questions/6474215/create-a-reminder-function-in-ruby-on-rails)SO 帖子中的建议使用 rufus-schedular 。您不需要为它运行任何后台作业。

# javascript - how to isolate firefox 17 rendering bug

> ID：13775035
> 
> 赞同：14
> 
> 时间：2012-12-08T06:11:23.990
> 
> 标签：javascript, html, css, firefox

I have a curious little bug in some HTML that only show up in Firefox 17 (OSX 10.8.2, no other OS tested yet). I have a 'sidebar' css class that encloses some text which is a repeating element on a number of pages. On one page (only) this text renders as if it has its css visiblility property set to 'hidden' (it does not display, but leaves the correct space around itself).

![enter image description here](../Images/dc3b6bfef64ebaf6b6037514aaac6923.png) ^(**left** Firefox 16.0.2; **right** Firefox 17.0.1)

Here is the css class:

```
.sidebar {
      position:fixed; 
      top: 2px;
      left:4px;
      display:table-cell; 
      vertical-align:bottom;
      z-index: 2;
      width: 700px;
      height: 64px;
      -webkit-transform: rotate(90deg) translateX(320px) translateY(340px) scale(1);
      -moz-transform:    rotate(90deg) translateX(320px) translateY(340px) scale(1);
      -o-transform:      rotate(90deg) translateX(320px) translateY(340px) scale(1);
      -ms-transform:     rotate(90deg) translateX(320px) translateY(340px) scale(1);
      transform:         rotate(90deg) translateX(320px) translateY(340px) scale(1);      
} 
```

The affected HTML:

```
<div class="sidebar" >
    <span class="TMUP1">
        <a href="/">Section_Header</a>
    </span> 
    <span class="sidebarcontents" style="vertical-align: 50%">
        Subsection_Header
    </span>
</div> 
```

All pages on the site contain an identical piece of google analytics asynchronous tracking javascript. If I remove this code, the bug disappears. I have checked the code and it is correct. It is used on every page in the site, and all other pages, with the SAME html (it's a repeating header) render fine

The google js code:

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-000000-0']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

The bug disappears under any of the following conditions
- viewed in firefox 16 (same user settings and plugins), or any other browser.
- viewed in firefox 17 / safe mode
- remove the google analytics code
- replace the following line from the 'sidebar' class css

```
 -moz-transform:    rotate(90deg) translateX(320px) translateY(340px) scale(1); 
```

with

```
 -moz-transform:    translateX(320px) translateY(340px) scale(1); 
```

(i.e remove the rotation)

It has nothing to do with plugins and addons, as if I manually disable all of these the bug is still evident.

Other pages with the same HTML, same css and the same google analytics code render fine.

The problem page is the largest on the site (~10KB of optimised/gzipped html with around 160 small images / 880KB to load), all other pages are smaller.

The body is almost entirely made up of 160 repeats of this element

```
<div class= "outerDiv" style="background-color:transparent">
<div class="innerDiv">
    <a href='/artists/artist_name/'>
    <img src="/artists/artist_name/_portrait/artist_portrait.jpg" alt="" width="150" />
    </a>
<div class="short_caption">
    <a href='/artists/artist_name/' style="color:white">artist_name</a>
<br />artist_location
</div></div></div> 
```

If I drastically cut the number of these elements down this also fixes the bug.

Any ideas how to further isolate/fix the bug? At the moment it seems like i'd have to either sacrifice analytics or redesign the site, both of which seem a little excessive.

**update**

I've done a lot more investigating, and got it down to this.

*   it's nothing to do with the google javascript. ANY script, even an empty `<script></script>` will invoke the bug.
*   I am using custom fonts with @font-face pulled in from a linked stylesheet.
    *   If i only use system fonts, the bug disappears.
    *   if I move the @font-face rules from a linked stylesheet into the page header the bug becomes more resilient: it shows up regardless of the presence of script tags
*   turn off hardware acceleration, the bug disappears.
*   remove rotation from the transform, the bug disappears.
*   reduce the page size (from 160 images to around 10) and the bug disappears.
*   Firefox nightly (v20) does not show the bug so whatever is causing it is fixed in some future version after v17.0.1

Here are some sample pages showing the issue (I'd avoided them in the original question as I guess that linking is a little frowned upon here). Browser cache needs to be emptied between each page view to gauge the bug effect accurately

*   [original page](http://www.tweet-me-up.com/artists/) bug present
*   [test page](http://www.tweet-me-up.com/artists/_test.html) bug present
    *   simplified html and minimised css to isolate the bug
    *   no javascript but one empty `<script></script>` tag

These samples are all derived from the test page:

*   [`<script></script>` tag removed](http://www.tweet-me-up.com/artists/_test_no_javascript_tag.html) bug absent
*   [rotation removed from transform](http://www.tweet-me-up.com/artists/_test_no_rotation.html) bug absent
*   [page size reduced from 160 to 18 images](http://www.tweet-me-up.com/artists/_test_shortened.html) bug absent
*   [no custom fonts](http://www.tweet-me-up.com/artists/_test_system_fonts.html) bug absent
*   [internal stylesheet for custom fonts](http://www.tweet-me-up.com/artists/_test_internal_font_styles.html) bug present
    *   this is a weird one. If the @font_face stylesheet is external, the bug only shows if a `<script></script>` tag is present. If the @font_face rules are moved to an internal stylesheet, the bug is also evident in the absence of `<script></script>` tags.

I can't seem to eliminate the bug without changing the design of the page to such a degree I'd have to redesign the site which seems a little OTT for one version of one browser. I am hoping for a more practical workaround. I tried using jQuery browser sniffing but as javascript seems to introduce the bug that's a non-starter.

**update 2**

Now I have had a chance to test on a different machine, and find the bug is manifest very rarely. Testing as a new user on the original machine doesn't display the bug at all. So it is clearly something to do with user settings and - hopefully then - fairly rare.

**update 3**

Following a suggestion by @Boris, I have tried incremental rotation to see where and how the page is breaking up. It is fine from rotate(0deg) until about 80deg, after which it starts to fall apart. I've added 1px borders to all elements to help isolate the issue...

*   [sample pages](http://www.tweet-me-up.com/artists/_test_rotations.html) showing 0-90deg (they should bounce from one to the next on auto refresh).
    This is using `-moz-transform` so only worth looking at in Firefox.
*   [animation](http://www.screencast.com/users/washe/folders/Jing/media/c21d81b1-f15e-46fa-93f6-75da9e72932e): this is the result I am getting in firefox 17.0.1

**update 4**

answering some suggestions from @arttronics - here is a [3d firefox view](http://screencast.com/t/FsvVZEm5G3Dp) showing how it should stack up (when I switch to 3d view, the bug disappears, as if Firefox is trying just that little bit harder to do the right thing).

*   the protuding content seen in the 3D view is for text alignment, it does not affect the bug - [see this cut-down version](http://www.screencast.com/t/6ac6yoYp);
*   zoom is reset, no change;
*   a new user profile exhibits same behaviour.

**update 5 – reset Firefox**

After performing a Firefox reset (as per @arttronics' answer) the bug is still here, albeit perhaps a little less resilient.

Prior to reset this would invoke the bug
- clear the cache
- refresh the page

Post-reset, clearing the cache and refreshing brings up the bug about 50% of the time. If I clear the cache, restart firefox, return to the page - it is still there, every time.

* * *

Ok I'm going to answer my own question ... I have not found a solution, but thanks to the interest and amazing efforts of the stack overflow community it seems fairly clear to me that...

*   this may be an issue that is very hard to replicate beyond the peculiarities of my user setup
*   it's an obscure bug only manifest in Firefox 17.0.1 and apparently fixed in Firefox 18
*   there is no workaround that doesn't involve a site redesign

Therefore, in the interests of moving on with other issues, I suggest we put this question to rest! Thanks to everyone who made comments and suggestions, it's been a very educational process.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T07:49:25.127

**Reset Firefox**

Based on your detailed question and the resulting comments, this particular bug is only unique to you, and under certain conditions (new OS User Profile has no issues while new Firefox User Profile has issues).

It's then time to **Reset** Firefox. Just [**follow these simple steps**](http://support.mozilla.org/en-US/kb/reset-preferences-fix-problems) and your v17.0.1 should be back to normal. If you have multiple profiles for your Firefox installation, then [**follow these other steps**](http://support.mozilla.org/en-US/questions/933275?esab=a&s=reset+button+missing&r=2&as=s) instead.

***NOTE: When using the reset feature, your bookmarks, browsing history, passwords, cookies and web form auto-fill information will be saved. However, your extensions and themes will be removed; open tabs, windows and tab groups will not be saved; and your preferences will be reset.***

* * *

**EDIT: Per my comments written the other day:**

> As of yet I did not see anybody reply that they too see this logo sinkhole issue, but at lease Firefox 18 ETA is in 3 weeks as of this comment.

Having said that, the solution may be just to wait until **Firefox 18** is released.

# asp.net-mvc - 使用 MVC 禁用 HTML 渲染

> ID：13775036
> 
> 赞同：2
> 
> 时间：2012-12-08T06:11:33.423
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

嗨，我是 MVC 的新手，我正在尝试制作一个显示交替颜色行的表格。像这样的东西：

```
@foreach (var item in Model) {

var result = "";
var styleWhite = @"style=""background-color:white""";
var styleBlue = @"style=""background-color:blue""";

if ( (item.ID % 1) == 0 )
{ result = styleBlue; }
else
{ result = styleWhite; }

<tr @result  >
    <td>
        @Html.DisplayFor(modelItem => item.CALLTYPE)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.DESCRIPTION)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
        @Html.ActionLink("Details", "Details", new { id=item.ID }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.ID })
    </td>
</tr>
} 
```

然而，双引号一直呈现为“"e”，如下所示：

```
<tr style=&quot;background-color:blue&quot;  > 
```

有没有办法抑制渲染并在标签内获取双引号（或单引号）？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T06:20:40.190

Razor 引擎默认总是 HtmlEncodes 任何字符串。如果您需要覆盖此使用

```
@Html.Raw(result) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:23:07.500

找到了答案：

```
<tr @Html.Raw(result)  > 
```

也应该是 mod 2 而不是 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T06:23:29.357

请改用单引号：

```
@foreach (var item in Model) {

var result = string.Empty;
var styleWhite = @"style='background-color:white'";
var styleBlue = @"style='background-color:blue'";

if ( (item.ID % 1) == 0 )
{ result = styleBlue; }
else
{ result = styleWhite; }

<tr @result  >
    <td>
        @Html.DisplayFor(modelItem => item.CALLTYPE)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.DESCRIPTION)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
        @Html.ActionLink("Details", "Details", new { id=item.ID }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.ID })
    </td>
</tr>
} 
```

# c# - 来自字符串的 Mac 地址格式

> ID：13775037
> 
> 赞同：6
> 
> 时间：2012-12-08T06:12:05.453
> 
> 标签：c#

```
 NetworkInterface[] arr = NetworkInterface.GetAllNetworkInterfaces();

    foreach (NetworkInterface item in arr)
    {
        PhysicalAddress mac = item.GetPhysicalAddress();
    } 
```

它返回 00E0EE00EE00 的值，而我希望它显示类似 00:E0:EE:00:EE:00 但我需要使用.Net 4

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T06:17:14.413

您可以使用字符串类的[**String.Insert**](http://msdn.microsoft.com/en-us/library/system.string.insert.aspx)方法添加`:`

```
string macAddStr = "00E0EE00EE00";
string macAddStrNew = macAddStr;
int insertedCount = 0;
for(int i = 2; i < macAddStr.Length; i=i+2)  
   macAddStrNew = macAddStrNew.Insert(i+insertedCount++, ":");

//macAddStrNew will have address 00:E0:EE:00:EE:00 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-20T15:16:51.883

我知道这已在不久前得到回答，但我只是想澄清一下，首选的解决方案通常是为 PhysicalAddress 类创建一个可重用的扩展方法。由于它是一个简单的数据类，并且很可能不会更改，因此出于可重用性的原因，这样做会更好。我将使用 Lorenzo 的示例，因为我最喜欢它，但是您可以使用任何适合您的例程。

```
public static class PhysicalAddressExtensions
{
    public static string ToString(this PhysicalAddress address, string separator)
    {
        return string.Join(separator, address.GetAddressBytes()
                                             .Select(x => x.ToString("X2")))
    }
} 
```

现在你可以像这样使用扩展方法：

```
NetworkInterface[] arr = NetworkInterface.GetAllNetworkInterfaces();

foreach (NetworkInterface item in arr)
{
    PhysicalAddress mac = item.GetPhysicalAddress();
    string stringFormatMac = mac.ToString(":");
} 
```

请记住，[PhysicalAddress.Parse](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.physicaladdress.parse(v=vs.100).aspx)仅接受 RAW 十六进制或破折号分隔值，以防您想将其解析回对象。因此，在解析之前剥离分隔符很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-13T08:32:29.660

你可以这样做：

```
 string macAddr = "AAEEBBCCDDFF";
    var splitMac = SplitStringInChunks(macAddr);

    static string SplitStringInChunks(string str)
    {
        for (int i = 2; i < str.Length; i += 3)
             str =  str.Insert(i, ":");
        return str;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T08:17:13.487

如果需要，可以使用 string.Join 和 Linq .Select()：

```
NetworkInterface[] arr = NetworkInterface.GetAllNetworkInterfaces();

foreach (NetworkInterface item in arr)
{
    PhysicalAddress mac = item.GetPhysicalAddress();
    string stringFormatMac = string.Join(":", mac.GetAddressBytes().Select(varByte => varByte.ToString("X2")));
} 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-30T07:39:44.560

验证和格式化 mac 以`XX:XX:XX:XX:XX:XX`格式化的方法。

`null`如果无效则返回。

```
public string FormatMACAddress(string MacAddress)
{
    if (string.IsNullOrEmpty(MacAddress)) return null;

    MacAddress = MacAddress.ToUpper()
                           .Replace(" ","")
                           .Replace("-", ":") //'AA-BB-CC-11-22-33', 'AA:BB:CC:11:22:33' [17 Chars]
                           .Trim();

    if (!MacAddress.Contains(':') && MacAddress.Length == 12) //'AABBCC112233' [12 Chars]
    {
        for (int i = 2; i < MacAddress.Length; i += 3) MacAddress = MacAddress.Insert(i, ":");
    }

    if (MacAddress.Length != 17) return null; //'AA:BB:CC:11:22:33' [17 Chars]
    if (MacAddress.Count(c => c == ':') != 5) return null;

    //Hex check here, '0-9A-F' and ':'

    return MacAddress;
} 
```

我还没有对此进行测试，但应该可以。另一个要添加的检查是检查所有字符是否都是十六进制值`0-9A-F`和`:`

# javascript - Javascript 原型，通过不同函数调用时使用 this

> ID：13775040
> 
> 赞同：1
> 
> 时间：2012-12-08T06:12:25.540
> 
> 标签：javascript, function, this, prototype

我正在使用多个原型来管理一些复杂的情况，并且在使用“this”时遇到了麻烦。我不是 100% 确定如何描述，因为我不熟悉正确的术语，但我会试一试。

函数 X 有一个变量指向函数 Y 中的函数。函数 Y 中的这个方法希望访问函数 Y 范围内的变量，但是当我使用 this 时，它指的是函数 X。

我创建了一个带有示例的[JSFiddle](http://jsfiddle.net/metalskin/qkp2x/)，使用原型等（因为这是我发现自己所处的场景）。但是代码很短，所以我将它包含在下面：

```
var Abc = function(options) {
    alert('2');
    options = options || {};
    this.myVar = options.myVar || 'Abc.myVar';
};
Abc.prototype = {
    onEvent: function() {
        alert('myVar: ' + this.myVar);
    }
};
var Xyz = function(options) {
    alert('3');
    options = options || {};
    this.listenFn = options.listenFn || function() {
        alert('x');
    };
    this.myVar = options.myVar || 'Xyz.myVar';
};
Xyz.prototype = {
    execute: function() {
        alert('4');
        this.listenFn();
    }
};
$(document).ready(function(){
    alert('1');
    var a = new Abc();
    var x = new Xyz({listenFn: a.onEvent});

    x.execute();
}); 
```

我已经按代码执行的顺序发出警报。所以：

1.  是文件的开始准备好了。
2.  是 Abc 实例的创建。
3.  是 Xyz 实例的创建，其中 Abc 实例的 onEvent 函数被分配给 Xyz 的 listenFn。
4.  在 Zyz 上执行被调用的点内，该点又调用 Xyz 的 onEvent 并显示 this.myVar 的值。

我遇到的问题是，当在 Abc 的方法中时，“this”指的是 Xyz 实例。我需要能够为 Xyz 的实例设置/获取 myVar 的值。我怀疑我可以通过创建一个传递给新 Xyz 语句的函数来做一些混乱的事情，从而将 Abc 的实例传递回自身，但不幸的是，这对于我正在使用的东西是不可能的（也不是很优雅）。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T06:16:14.993

**编辑**

这是您问题的答案

```
$(document).ready(function(){
    alert('1');
    var a = new Abc();
    var x = new Xyz({listenFn: a.onEvent.bind(a) }); // <------- bind

    x.execute();
}); 
```

`this`像这样使用 bind 会将a.onEvent 内部的值预先设置为`a`。请注意，IE8 不支持，但您可以[从此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)`bind`轻松添加 shim 。

另一种方法是说：

```
$(document).ready(function(){
    alert('1');
    var a = new Abc();
    var x = new Xyz({listenFn: function() { a.onEvent() }); 

    x.execute();
}); 
```

* * *

无需深入研究您的代码，我只想说：找出`this`JavaScript 中的值很容易；这完全取决于**调用**函数的方式。

*   如果你有`x.foo()`，那么，无论如何*，`this`都将等于`x`foo 的内部。

*   如果你有`foo()`，那么，无论如何*，`this`都将是全局对象，或者在 foo 内部的严格模式下未定义。

*   如果你说`new foo()`then`this`将是一个新对象，其原型将设置为`foo.prototype`

*   如果你说`foo.call(a)`， foo 里面`this`会有`a`* ，但这并不适用于此。

*一个例外是，如果您将 foo 声明为

```
var foo = function() { }.bind(obj); 
```

那么你已经预先绑定`this`了`obj`foo 的所有调用，并且会覆盖上面的规则。

# c++ - 静态控制滚动条不起作用 Win32

> ID：13775046
> 
> 赞同：2
> 
> 时间：2012-12-08T06:13:32.947
> 
> 标签：c++, c, winapi, scrollbar

```
 case WM_VSCROLL: //in switch(message) in WinProc
            wmId = GetWindowLong((HWND) lParam, GWL_ID);
                        //only one scroll bar so don't check it
            switch(LOWORD(wParam))
            {
            case SB_THUMBPOSITION:
            case SB_THUMBTRACK:
                nScrollPos = HIWORD(wParam);
                break;
            default:
                break;
            }
            SetScrollPos (hDirectives, SB_CTL, nScrollPos, TRUE);
            break;
    //where 
    hDirectives = CreateWindow(TEXT("static"), NULL, 
WS_CHILD | WS_BORDER | WS_VISIBLE | SS_RIGHT | SS_SUNKEN | WS_VSCROLL, 
                20, 20, 300, 300, hWnd, 
(HMENU) ID_DIRECTIVE, ((LPCREATESTRUCT) lParam) ->hInstance, NULL); 
```

窗口显示，我可以输入文本，但滚动条没有响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:45:39.423

当窗口具有`WS_VSCROLL`/`WS_HSCROLL`样式时，滚动条消息将发送到**该**窗口，而不是其父窗口。在上面的示例中，您需要对静态控件进行子类化以处理滚动消息。

# php - PHP + MySQL - 多次获取数组循环

> ID：13775055
> 
> 赞同：0
> 
> 时间：2012-12-08T06:14:55.210
> 
> 标签：php, mysql

我的代码有问题。mysql_fetch_array 输出重复相同的值。这是我的代码：

```
$sql= "SELECT client.resID AS resID, client.resName AS resName, menu.id AS mid, menu.name AS mname, facilities.name AS fname, facilities.id AS fid FROM client INNER JOIN menu ON client.resID = menu.resID INNER JOIN facilities ON client.resID = facilities.resID WHERE client.resID =".$_GET["resID"];
$rs = mysql_query($sql) or die($sql."<br/><br/>".mysql_error());

while ($f = mysql_fetch_array($rs)) { // loop as long as there are more results
    $names[] = $f['mname'];  // push to the array

print_r($names)

} 
```

假设一家餐馆有米饭和土豆。print_r($names) 正在返回：

```
Array ( [0] => rice [1] => potato [2] => rice [3] => potato [4] => rice [5] => potato [6] => rice [7] => potato [8] => rice [9] => potato ) 
```

我该如何解决这个问题？非常感谢您的帮助：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:17:42.510

使用分组

```
$sql= "SELECT client.resID AS resID, client.resName AS resName, menu.id AS mid, 
       menu.name AS mname, facilities.name AS fname, facilities.id AS fid 
    FROM client 
    INNER JOIN menu ON client.resID = menu.resID 
    INNER JOIN facilities ON client.resID = facilities.resID 
    WHERE client.resID =".$_GET["resID"]." 
    group by mname "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T06:35:18.663

您的查询

```
SELECT client.resID AS resID, client.resName AS resName,
       menu.id AS mid, menu.name AS mname,
       facilities.name AS fname, facilities.id AS fid 
FROM client
INNER JOIN menu ON client.resID = menu.resID
INNER JOIN facilities ON client.resID = facilities.resID
WHERE client.resID =".$_GET["resID"] 
```

返回与其他两个表匹配的次数一样多的“大米”。由于您要连接由 设置的列`WHERE`，因此您的查询实际上是三个连接表的笛卡尔积（在过滤后`resID`）。

前任。：

```
john rice fac1
john meat fac1
john rice fac2
john meat fac2
... 
```

也许您想进行三个单独的查询，每个表一个

```
SELECT mid, mname FROM menu WHERE resID = $resID 
```

或者，也许您想加入其他列（例如，在所有三个表中唯一的列）？

```
SELECT ...
FROM client
INNER JOIN menu ON client.resID = menu.id
INNER JOIN facilities ON client.resID = facilities.id 
```

另请注意，在查询字符串中包含未转义的 get 参数是危险的，即使您*期望*数字也是如此。使用[mysqli 准备好的语句](http://php.net/manual/en/mysqli.prepare.php)或（至少）[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T06:27:58.610

正如 Man Programmer 所说，您可以使用`Group By`：

```
$sql= "SELECT client.resID AS resID, client.resName AS resName, menu.id AS mid, menu.name AS mname, facilities.name AS fname, facilities.id AS fid FROM client INNER JOIN menu ON client.resID = menu.resID INNER JOIN facilities ON client.resID = facilities.resID WHERE client.resID =".$_GET["resID"]." group by mname "; 
```

或者，如果您不想要 Group By，您可以使用这种代码。

```
 $items = array();
    $sql= "SELECT client.resID AS resID, client.resName AS resName, menu.id AS mid, menu.name AS mname, facilities.name AS fname, facilities.id AS fid FROM client INNER JOIN menu ON client.resID = menu.resID INNER JOIN facilities ON client.resID = facilities.resID WHERE client.resID =".$_GET["resID"];
    $q = mysql_query ( $sql ) or die( mysql_error() );
    while( $row = mysql_fetch_assoc( $q ) ) {
     if( !in_array( $row['mname'],$items ) ) {
        $items[] = $row['mname'];
     }
    }

print_r( $items ) 
```

如果它检测到它已经具有那种值，它将跳过在数组中存储值。

# php - 使用 PHP 添加 XML 节点

> ID：13775057
> 
> 赞同：2
> 
> 时间：2012-12-08T06:15:03.603
> 
> 标签：php, xml, nodes

我的 XML 开始看起来像这样：

```
<user>
 <entry>
  <date>December 8, 2012, 6:27 am</date>
  <height>73</height>
  <weight>201</weight>
 </entry>
</user> 
```

我想向它添加“条目”，使其看起来像这样

```
<user>
 <entry>
  <date>December 8, 2012, 6:27 am</date>
  <height>73</height>
  <weight>201</weight>
 </entry>
 <entry>
  <date>December 9, 2012, 6:27 am</date>
  <height>73</height>
  <weight>200</weight>
 </entry>
</user> 
```

我正在使用的代码将所有内容都包含在第一个`<entry>...</entry>`标签中。这是我的PHP代码。

```
 $file = 'users/'.$uID.'data.xml';

  $fp = fopen($file, "rb") or die("cannot open file");
  $str = fread($fp, filesize($file));

  $xml = new DOMDocument();
  $xml->formatOutput = true;
  $xml->preserveWhiteSpace = false;
  $xml->loadXML($str) or die("Error");

  // original
  echo "<xmp>OLD:\n". $xml->saveXML() ."</xmp>";

  // get document element
  $root   = $xml->documentElement;
  $fnode  = $root->firstChild;

  //add a node
  $ori    = $fnode->childNodes->item(3);

  $today = date("F j, Y, g:i a");

  $ydate     = $xml->createElement("date");
  $ydateText = $xml->createTextNode($today);
  $ydate->appendChild($ydateText);

  $height     = $xml->createElement("height");
  $heightText = $xml->createTextNode($_POST['height']);
  $height->appendChild($heightText);

  $weight     = $xml->createElement("weight");
  $weightText = $xml->createTextNode($_POST['weight']);
  $weight->appendChild($weightText);

  $book   = $xml->createElement("entry");
  $book->appendChild($ydate);
  $book->appendChild($height);
  $book->appendChild($weight);

  $fnode->insertBefore($book,$ori);
  $xml->save('users/'.$uID.'data.xml') or die("Error"); 
```

如何调整我的代码，以便将我的条目放在正确的位置？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T06:27:58.627

您需要将条目附加到根元素用户：

```
<?php
$file = 'users/'.$uID.'data.xml';

$fp = fopen($file, "rb") or die("cannot open file");
$str = fread($fp, filesize($file));

$xml = new DOMDocument();
$xml->formatOutput = true;
$xml->preserveWhiteSpace = false;
$xml->loadXML($str) or die("Error");

// original
echo "<xmp>OLD:\n". $xml->saveXML() ."</xmp>";

// get document element
$root   = $xml->documentElement;

//add a node
$today = date("F j, Y, g:i a");

$ydate     = $xml->createElement("date");
$ydateText = $xml->createTextNode($today);
$ydate->appendChild($ydateText);

$height     = $xml->createElement("height");
$heightText = $xml->createTextNode($_POST['height']);
$height->appendChild($heightText);

$weight     = $xml->createElement("weight");
$weightText = $xml->createTextNode($_POST['weight']);
$weight->appendChild($weightText);

$book   = $xml->createElement("entry");
$book->appendChild($ydate);
$book->appendChild($height);
$book->appendChild($weight);

$root->appendChild($book);
$xml->save('users/'.$uID.'data.xml') or die("Error");
?> 
```

# python - 在 Python 中处理大量数字时遇到问题

> ID：13775059
> 
> 赞同：1
> 
> 时间：2012-12-08T06:15:16.790
> 
> 标签：python, largenumber, birthday-paradox

遇到以下问题：

```
from pylab import *
x=arange(0,365,1)
y = []
for j in x:
    y.append(1-((math.factorial(365)/math.factorial(365-j))/(365**j)))

plot(x,y)
show() 
```

有什么想法吗？我正在运行 python 2.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T06:25:22.130

将其更改为：

```
(math.factorial(365)/math.factorial(365-j))/long(365**j) 
```

问题是`numpy`在进行除法之前尝试将 long 转换为 numpy 类型——但是 numpy 不能这样做，因为它会导致溢出，所以 numpy 会引发错误。如果您转换为`long`第一个，则除法全部在外部完成`numpy`。

# android - Canvas.drawText 导致文本重叠

> ID：13775062
> 
> 赞同：0
> 
> 时间：2012-12-08T06:15:44.403
> 
> 标签：android, android-canvas, drawtext

我正在尝试在同一位置绘制不同的文本。我正在以下代码中创建字体和绘制对象并绘制文本。它工作正常直到这里。它使用我指定的字体绘制文本。但是当我绘制文本时另一次在同一位置它与较早的文本重叠。

```
 mFace = Typeface.createFromAsset(getContext().getAssets(),"digital.ttf");
    text_paint= new Paint();
    text_paint.setColor(Color.BLUE);
    text_paint.setStyle(Paint.Style.FILL);
    text_paint.setTypeface(mFace);
    text_paint.setTextSize((float) (height*0.05076));
    text_paint.setAntiAlias(true);

    canvas.drawText("ABC",(float)(width*0.5) ,(float)(height*0.55), text_paint);
    canvas.drawText("PQRSTUV",(float)(width*0.5) ,(float)(height*0.55), text_paint); 
```

知道如何删除较早的文本并将新文本添加到相同的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:08:15.357

检查以下链接以获取有关您的问题的详细说明：

[画布文本绘制问题](https://stackoverflow.com/a/4423456/556975%5D)

# c - Apache模块开发，存储请求变量的正确方法

> ID：13775064
> 
> 赞同：0
> 
> 时间：2012-12-08T06:16:19.937
> 
> 标签：c, apache, apache-modules

目前我将它们存储在全球。那是正确的方法吗？我希望变量与当前请求保持一致，并在请求完成后消失。

例如：

```
int data1;
int data2;

apr_status_t my_input_filter (ap_filter_t *f, apr_bucket_brigade *bb,
    ap_input_mode_t mode, apr_read_type_e block, apr_off_t readbytes) {
    if (somecond1) data1 = xyz;
    if (somecond2 & data1 == xya) data2 = abc;

    if (somecond3 && data2 == abc) dosomething();
} 
```

请注意，过滤时可能不会一次性发生3个条件，它们可能出现在不同的时刻，但具有相同的请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:19:58.397

如果您的模块与事件或多线程包一起运行，则存储在全局变量中是一个坏主意。

Apache 在请求结构中提供了一个注释字典。使用它来存储您的私人数据。

# asp.net - 从“Guid”类型到“String”类型的转换无效

> ID：13775069
> 
> 赞同：1
> 
> 时间：2012-12-08T06:17:05.957
> 
> 标签：asp.net, vb.net

我有这段代码，它应该检查值是否为空

```
_Attendee.TransactionID = If((a.tGatewayTrxID Is Nothing), Guid.NewGuid(), a.tGatewayTrxID.ToString) 
```

这段代码的最后一部分是抛出异常“从类型'Guid'到类型'String'的转换无效。” 我知道`IIF`评估语句的每个部分，`If`不应该这样做。我在所有地方都使用相同的代码，它总是捕获 null 或 Nothing 值 - 为什么它在这种情况下不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T06:20:50.467

如果 TransactionID 是一个字符串，我相信您只需将 Guid.NewGuid() 更改为 Guid.NewGuid().ToString()。

# linux - 从数组中提取元素（bash）

> ID：13775072
> 
> 赞同：1
> 
> 时间：2012-12-08T06:17:42.683
> 
> 标签：linux, arrays, bash

我无法从数组中提取特定元素。基本上我使用命令的输出并将其放入数组中。我想打印出一个元素。

到目前为止，这是我的代码。

```
one=`w | tr -s " " | cut -d" " -f1 | tail -n+3`
two=`w | tr -s " " | cut -d" " -f5 | tail -n+3`
echo ${one[@]:3:2} 
```

这只会打印出从名称中的第三个字母开始的两个字母。我想从第三个名字开始打印出两个名字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:55:36.640

如果要将它们用作数组，则必须将它们`one`创建为数组。`two`

```
one=($(w | tr -s " " | cut -d" " -f1 | tail -n+3)) 
```

此外，bash 数组的索引从 0 开始。因此，要打印从 name 开始的两个名称`third`，您将使用

```
echo ${one[@]:2:2} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:38:27.580

有两个问题：

*   数组的初始化应该如下：

    `one=($(w | tr -s " " | cut -d" " -f1 | tail -n+3))`

*   然后打印你应该做的元素：

    `echo ${one[1]} ${one[2]}`

# perl - Perl GET 页面内容似乎返回了 HTML 的最后一行？

> ID：13775074
> 
> 赞同：0
> 
> 时间：2012-12-08T06:18:13.180
> 
> 标签：perl, get

我有以下代码：

```
use strict;
use warnings;
use LWP::Simple qw(get);

my $content = get('http://www.w3schools.com/');
print $content; 
```

我的问题是，应该打印整个页面内容的最后一行只显示“”。所以我假设它是文件的最后一行？你们觉得怎么样？那么我怎样才能获得整个页面内容呢？我读过的参考资料表明上面的代码应该返回整个，但显然它没有。:-(

提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T08:35:31.520

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

你好，我想我现在知道我的问题是什么了。我实际上是从我的 PHP 文件中调用 Perl 脚本。而且我认为，PHP 正在“呼应” html 文件的最后一行。天哪！这几天我一直在弄清楚这一点！哇！感谢 Spazm 抽出时间回复。:-) – RobEarth 软件

# ios - iOS 构建失败

> ID：13775079
> 
> 赞同：0
> 
> 时间：2012-12-08T06:19:49.610
> 
> 标签：ios, xcode4.5

这个问题让我发疯，我按照[本教程的说明进行操作](http://mobile.tutsplus.com/tutorials/iphone/how-to-test-your-apps-on-physical-ios-devices/)

尽管我的模拟器正常工作，但在我的真实设备上我收到了这个错误

`Code Sign error: The identity 'com.apple.ubiquity.peer-uuid.F300F182-DEBA-49E2-XXXX-844DCBE14D85' doesn't match any valid, non-expired certificate/private key pair in your keychains`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:25:44.093

tutplus 提供的应用程序中安装的证书与您设备的临时配置文件不匹配，因此请将证书更改为您自己的证书，该证书已签署到您设备的临时证书，然后错误将被删除

# android - Android Asynctask Not Work Prorperly 不提供数据或有时失败

> ID：13775080
> 
> 赞同：0
> 
> 时间：2012-12-08T06:19:58.187
> 
> 标签：android, json, android-asynctask

我正在尝试在 asynctask 中使用 json 解析加载数据，但加载不正确，有时无法获得完整的数据，有时说 android.os.main 线程我尝试了很多次但我仍然遇到问题我把我的代码和 logcat 放在这里

这是我的主要课程

HomeActivity.java

```
class HomeACtivity extends Activity 
 {
  @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
 {
            new FlightListBack.execute("");
   }
 }

 public class FlightListBack extends AsyncTask<String, Integer, ArrayList<HashMap<String,String>>>

{

ArrayList<String> airportList = new ArrayList<String>();
final  JsonParser jparser= new JsonParser();
final  ArrayList<HashMap<String, String>> spinnerAirportList = new ArrayList<HashMap<String, String>>();

String airporturl="http://api.flightstats.com/flex/airports/rest/v1/json/withinRadius/-74.0063/40.7141/100?appId=4dde11f5&appKey=6b80a6ed5d82c8f0b28dadb14e81bfcd";
String spinnerstringfunction;

List<String> spinnercityList= new ArrayList<String>();
final List<String> spinnerAirportNameList= new ArrayList<String>();
JSONArray  sjairport;

@Override
protected ArrayList<HashMap<String,String>> doInBackground(
        String... params) {

    spinnerstringfunction=jparser.getJSONFromUrl(airporturl);

    Log.e("SpinnerstringFunction", "size"+spinnerstringfunction);

    try
    {
    // Getting Array of Contacts
    JSONObject jobject= new JSONObject(spinnerstringfunction);          //  Log.e("JOBJECT ","ACTIVITY-->"+jobject.length());

    // Airlines Array For Getting Airlines Name
    sjairport=jobject.getJSONArray(TAG_AIRPORT);            //  Log.e("JSONARRAY","AIRLINES"+jairlines.length());

    for(int a=0;a<sjairport.length()-30;a++)
    {

        HashMap<String, String> spinnermap = new HashMap<String, String>();

        String spinnerfs=sjairport.getJSONObject(a).get(TAG_SPINNERFS).toString(); 
        String spinnername=sjairport.getJSONObject(a).get(TAG_SPINNERNAME).toString();
        String  spinnercity=sjairport.getJSONObject(a).get(TAG_SPINNERCITY).toString();

        spinnermap.put(TAG_SPINNERFS, spinnerfs);
        spinnermap.put(TAG_SPINNERNAME,spinnername);
        spinnermap.put(TAG_SPINNERCITY,spinnercity);

        if(!spinnercityList.contains(spinnercity))
        {
            spinnercityList.add(spinnercity);  // spinner city list
        }

        spinnerAirportList.add(spinnermap); // Array List For all hash map list 
    }
    Log.e("Spinner Airport List","Complete"+spinnercityList.size()); //
//  Log.e("Airport List","Complete"+spinnerAirportList); //

    Log.e("Spinner Airport List","Complete"+spinnercityList);

    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    return spinnerAirportList;
}

protected void onPostExecute(String...result)
{

    try
    {

    cityspinner=(Spinner)findViewById(R.id.spinnercity);
    namespinner=(Spinner)findViewById(R.id.spinnername);
    timespinner=(Spinner)findViewById(R.id.spinnertime);
    buttontime=(Button)findViewById(R.id.buttontime);

        ArrayAdapter<String> spinneradapter= new ArrayAdapter<String>(HomeActivity.this, android.R.layout.simple_spinner_item,spinnercityList);
        spinneradapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        cityspinner.setAdapter(spinneradapter);

        // country spinner onclick start

        cityspinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {

                String cityselected=cityspinner.getSelectedItem().toString();
                Log.e("city, selected", "Work"+cityselected);
                spinnerAirportNameList.clear();
                for(int b=0;b<spinnerAirportList.size();b++)
                {

                    if(cityselected.equals(spinnerAirportList.get(b).get(TAG_SPINNERCITY).toString()))
                    {
                        clear();
                        String airportname=spinnerAirportList.get(b).get(TAG_SPINNERNAME).toString();
                        Log.e("country, selected", "Work"+cityselected);
                        Log.e("country Selected Airport","work"+airportname);
                        spinnerAirportNameList.add(airportname);
                    }
                }
                Log.e("Spinner Airport NAme list","Work"+spinnerAirportNameList);

                ArrayAdapter<String> spinnerairportnameadapter= new ArrayAdapter<String>(HomeActivity.this, android.R.layout.simple_spinner_item,spinnerAirportNameList);
                spinnerairportnameadapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                namespinner.setAdapter(spinnerairportnameadapter);

            }

            public void onNothingSelected(AdapterView<?> arg0) {

            }

        });

        // country spinner onclick finish

        // name spinner onclick start

        namespinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {

                String nameselected=namespinner.getSelectedItem().toString();

                Log.e("Name, selected", "Work"+nameselected);

                for(int c=0;c<spinnerAirportList.size();c++)
                {   
                    if(nameselected.equals(spinnerAirportList.get(c).get(TAG_SPINNERNAME).toString()))
                    {
                        spinnerairportfs=spinnerAirportList.get(c).get(TAG_SPINNERFS).toString();
                        Log.e("Name, selected", "Work"+nameselected);
                        Log.e("fs Selected Airport","work"+spinnerairportfs);

                    }
                }

            }
            public void onNothingSelected(AdapterView<?> arg0) {

            }
        });

        //name spinner onclick finish

        // time spinner
     String[] flighttime={"12:00AM To 1:00AM"   ,   "1:00AM To 2:00AM"   ,  "2:00AM To 3:00AM",
                          "3:00AM To 4:00AM"    ,   "4:00AM To 5:00AM"   ,  "5:00AM To 6:00AM",
                          "6:00AM To 7:00AM"    ,   "7:00PM To 8:00AM"   ,  "8:00AM To 9:00AM",
                          "9:00AM To 10:00AM"   ,   "10:00PM To 11:00AM" ,  "11:00AM To 12:00PM",
                          "12:00PM To 1:00PM"   ,   "1:00PM To 2:00PM"   ,  "2:00PM To 3:00PM",
                          "3:00PM To 4:00PM"    ,   "4:00PM To 5:00PM"   ,  "5:00PM To 6:00PM",
                          "6:00PM To 7:00PM"    ,   "7:00PM To 8:00PM"   ,  "8:00PM To 9:00PM",
                          "9:00PM To 10:00PM"   ,   "10:00PM To 11:00PM" ,  "11:00PM To 12:00PM"};

        ArrayAdapter<String>spinnertimeadapter= new ArrayAdapter<String>(HomeActivity.this, android.R.layout.simple_spinner_item,flighttime);
        spinnertimeadapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        timespinner.setAdapter(spinnertimeadapter);

        timespinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {

                String timeselected=timespinner.getSelectedItem().toString();

                if(timeselected.equals("12:00AM To 1:00AM"))
                {

                    time="0";
                }
                else if(timeselected.equals("1:00AM To 2:00AM"))
                {
                    time="1";
                }
                else if(timeselected.equals("2:00AM To 3:00AM"))
                {
                    time="2";
                }
                else if(timeselected.equals("3:00AM To 4:00AM"))
                {
                    time="3";
                }
                else if(timeselected.equals("4:00AM To 5:00AM"))
                {
                    time="4";
                }
                else if(timeselected.equals("5:00AM To 6:00AM"))
                {
                    time="5";
                }
                else if(timeselected.equals("6:00AM To 7:00AM"))
                {
                    time="6";
                }
                else if(timeselected.equals("7:00AM To 8:00AM"))
                {
                    time="7";
                }
                else if(timeselected.equals("8:00AM To 9:00AM"))
                {
                    time="8";
                }
                else if(timeselected.equals("9:00AM To 10:00AM"))
                {
                    time="9";
                }
                else if(timeselected.equals("10:00AM To 11:00AM"))
                {
                    time="10";
                }
                else if(timeselected.equals("11:00AM To 12:00PM"))
                {
                    time="11";
                }
                else if(timeselected.equals("12:00PM To 1:00PM"))
                {
                    time="12";
                }
                else if(timeselected.equals("1:00PM To 2:00PM"))
                {
                    time="13";
                }
                else if(timeselected.equals("2:00PM To 3:00PM"))
                {
                    time="14";
                }
                else if(timeselected.equals("3:00PM To 4:00PM"))
                {
                    time="15";
                }
                else if(timeselected.equals("4:00PM To 5:00PM"))
                {
                    time="16";
                }
                else if(timeselected.equals("5:00PM To 6:00PM"))
                {
                    time="17";
                }
                else if(timeselected.equals("6:00PM To 7:00PM"))
                {
                    time="18";
                }
                else if(timeselected.equals("7:00PM To 8:00PM"))
                {
                    time="19";
                }
                else if(timeselected.equals("8:00PM To 9:00PM"))
                {
                    time="20";
                }
                else if(timeselected.equals("9:00PM To 10:00PM"))
                {
                    time="21";
                }
                else if(timeselected.equals("10:00PM To 11:00PM"))
                {
                    time="22";
                }
                else if(timeselected.equals("11:00PM To 12:00PM"))
                {
                    time="23";
                }
            }
            public void onNothingSelected(AdapterView<?> arg0) {

            }
        });

    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    buttontime.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

             ArrayList<HashMap<String, String>> flightList = new ArrayList<HashMap<String, String>>();

              Calendar now = Calendar.getInstance();
              int year = now.get(Calendar.YEAR);
              Log.e("Year","ss"+year);
              int month = now.get(Calendar.MONTH); // Note: zero based!
              Log.e("Month","ss"+month);

              int day = now.get(Calendar.DAY_OF_MONTH);
              Log.e("day","ss"+day);

              Log.e("Time is Selected","time"+time);

                Log.e("Spinner airoort fs","fs"+spinnerairportfs);
                String flighturl = "http://api.flightstats.com/flex/flightstatus/rest/v2/json/airport/status/"+spinnerairportfs+"/dep/"+year+"/"+month+"/"+day+"/"+time+"?appId=4dde11f5&appKey=6b80a6ed5d82c8f0b28dadb14e81bfcd&utc=false&numHours=1";

                Log.e("Flight url","Work"+flighturl);
                String jsonstringfunction=jparser.getJSONFromUrl(flighturl);

                try
                {

                        JSONObject jobject= new JSONObject(jsonstringfunction); 
                        JSONObject appendix = jobject.getJSONObject(TAG_APPENDIX);              Log.e("JOBJECT ","APPENDIX-->"+appendix.length());

                        // Airlines Array For Getting Airlines Name
                        JSONArray  jairlines=appendix.getJSONArray(TAG_AIRLINES);               Log.e("JSONARRAY","AIRLINES"+jairlines.length());

                        // Airport Array For Getting Airport Name
                        JSONArray  jairport=appendix.getJSONArray(TAG_AIRPORT);                 Log.e("JSONARRAY","AIRPORT"+jairport.length());

                        // Flightstatuses Array For Getting INFO
                        JSONArray jflightstatuses=jobject.getJSONArray(TAG_FLIGHTSTATUSES);     Log.e("JSONARRAY","FLIGHTSTATUSES"+jflightstatuses.length());

                        int i;
                        int j;
                        int k;
                        int m;
                        int n;

                        //****************************** Flightstatuses Array *****************************
                        for(i=0;i<jflightstatuses.length();i++)
                        {
                            clear();
                            // creating new HashMap
                            HashMap<String, String> map = new HashMap<String, String>();

                            arrivalairportfscode=jflightstatuses.getJSONObject(i).get(TAG_ARRIVALAIRPORTFSCODE).toString();     //  Log.e("ArrivalAirportFsCode","AirportFSCode"+arrivalairportfscode);
                            carrierfscode=jflightstatuses.getJSONObject(i).get(TAG_CARRIERFSCODE).toString(); 
                            flightnumber=jflightstatuses.getJSONObject(i).get(TAG_FLIGHTNUMBER).toString();

                            //****************************** Airport Array *****************************
                            // Comparing ArrivalAirportFsCode For Finding The City Name
                            for(j=0;j<jairport.length();j++)
                            {
                                // Airport Fs Code from AirportArray
                                airportfs=jairport.getJSONObject(j).get(TAG_AIRPORTFS).toString(); //   Log.e("AIRPORT","FS"+airportfs);

                                // Compare ArrivalAirport FsCode and Airport Fs Code For Finding City Name
                                if(arrivalairportfscode.equalsIgnoreCase(airportfs))
                                {   
                                    // City Name From Airport Array
                                    city=jairport.getJSONObject(j).get(TAG_AIRPORTCITY).toString();     //Log.e("Airport City","City-->"+city);
                                    destination="( "+arrivalairportfscode+" ) "+city;       //Log.e("Destination City","city"+destination);
                                    flight=carrierfscode+" "+flightnumber;

                                }
                            }   // airport for loop complete

                            map.put(TAG_MDESTINATION, destination);
                            map.put(TAG_MFLIGHT,flight);

                            for(k=0;k<jairlines.length();k++)
                            {

                                // Airport Fs Code from AirportArray
                                airlinesfs=jairlines.getJSONObject(k).get(TAG_AIRLINESFS).toString();   //Log.e("AIRLINES","FS"+airlinesfs);

                                // Compare ArrivalAirport FsCode and Airport Fs Code For Finding City Name
                                if(carrierfscode.equalsIgnoreCase(airlinesfs))
                                {   
                                    // Airlines Name From Airlines Array
                                    airlinesname=jairlines.getJSONObject(k).get(TAG_AIRLINENAME).toString();        //Log.e("AIRLINES NAME","NAME"+airlinesname);
                                    Log.e("--"+flight,"--"+airlinesname);

                                }

                            } // airlines for loop complete
                            map.put(TAG_MAIRLINE,airlinesname);

                            JSONObject joperationaltimes=jflightstatuses.getJSONObject(i).getJSONObject(TAG_OPERATIONALTIMES);
                            Log.e("Operational times","-->"+joperationaltimes);

                            // Schedule Time 

                            JSONObject jschedulegatedeparture =new JSONObject();
                            JSONObject jestimateddeparture =new JSONObject();

                            for(m=0;m<joperationaltimes.length();m++)
                            {   
                                if(joperationaltimes.has(TAG_SCHEDULEDGATEDEPARTURE))
                                {   

                                       jschedulegatedeparture=joperationaltimes.getJSONObject(TAG_SCHEDULEDGATEDEPARTURE);
                                       schedule=jschedulegatedeparture.getString(TAG_SCHEDULEDATELOCAL).toString();
                                       schedule=schedule.substring(11);

                                       Log.e("Before convert","Time"+schedule);

                                       DateFormat f1 = new SimpleDateFormat("hh:mm:ss");
                                       Date d = f1.parse(schedule);
                                       DateFormat f2 = new SimpleDateFormat("h:mm a");
                                       schedule=f2.format(d).toLowerCase(); // "12:18am"

                                       Log.e("After convert","Time"+schedule);
                                     //  jestimateddeparture=joperationaltimes.getJSONObject(TAG_ACTUALGATEDEPARTURE);
                                     //  actual=jestimateddeparture.getString(TAG_ACTUALDATELOCAL).toString();
                                     //  actual=actual.substring(11);
                                }
                                else
                                {
                                     schedule="Not Available";
                                }

                            }
                            map.put(TAG_MSCHEDULE, schedule);

                            //Log.e("ScheduleGatedtime",""+jschedulegatedeparture);
                            //Log.e("Schedule Time","Work"+schedule);
                            //Log.e("ActualGatedtime",""+jestimateddeparture);
                            //Log.e("Actual Time","Work"+actual);

                            //------------------------------------------------------------------------------------

                            // AIRPORT RESOURCES OBJECT fOR getting departure terminal and departure gate

                            if(jflightstatuses.getJSONObject(i).has(TAG_AIRPORTRESOURCES))
                            {   

                            JSONObject airportresources=jflightstatuses.getJSONObject(i).getJSONObject(TAG_AIRPORTRESOURCES);
                            Log.e("airportresources","--->"+airportresources);

                                if(airportresources.has(TAG_DEPARTURETERMINAL))
                                {
                                    departureterminal=airportresources.get(TAG_DEPARTURETERMINAL).toString();
                                }
                                else
                                {
                                    departureterminal=""; 

                                }

                                if(airportresources.has(TAG_DEPARTUREGATE))
                                {
                                    departuregate=airportresources.get(TAG_DEPARTUREGATE).toString();

                                }
                                else
                                {
                                    departuregate="";
                                }
                                terminal="T-"+departureterminal+" ";
                                gate=departuregate;
                                terminalgate=terminal+gate;
                                Log.e("Terminal Gate","-->"+terminal+gate);

                                map.put(TAG_MTERMINALGATE,terminalgate);
                            }
                            else
                            {
                                terminalgate="Not Available";
                                map.put(TAG_MTERMINALGATE,terminalgate);
                            }
                            //--------------------------------Aiport Resources Complete---------------------------------------------------

                            //--------------------------------Aiport Flight Status Start--------------------------------------------------- 

                                status=jflightstatuses.getJSONObject(i).getString(TAG_STATUS).toString();
                                if(status.equalsIgnoreCase("S"))
                                {
                                    status="Scheduled";
                                }
                                if(status.equalsIgnoreCase("L"))
                                {
                                    status="Landed";
                                }
                                map.put(TAG_MFSTATUS, status);
                                Log.e("Status","--"+status);
                            //--------------------------------Aiport Flight Status Complete---------------------------------------------------  

                        flightList.add(map);

                        Log.e("FlightList","work"+flightList);

                        int displaymode=getResources().getConfiguration().orientation;
                        if(displaymode==1)
                        {

                                ListAdapter adapter = new SimpleAdapter(HomeActivity.this, flightList,
                                        R.layout.listportrait,
                                        new String[] { TAG_MDESTINATION, TAG_MFLIGHT, TAG_MAIRLINE,TAG_MSCHEDULE,TAG_MTERMINALGATE,TAG_MFSTATUS  }, new int[] {
                                                R.id.textdestination, R.id.textflight, R.id.textairline,R.id.textschedule,R.id.texttermgate,R.id.textstatus });
                                setListAdapter(adapter);
                        }
                        else
                        {
                            ListAdapter adapter = new SimpleAdapter(HomeActivity.this, flightList,
                                    R.layout.list,
                                    new String[] { TAG_MDESTINATION, TAG_MFLIGHT, TAG_MAIRLINE,TAG_MSCHEDULE,TAG_MTERMINALGATE,TAG_MFSTATUS  }, new int[] {
                                            R.id.textdestination, R.id.textflight, R.id.textairline,R.id.textschedule,R.id.texttermgate,R.id.textstatus });
                            setListAdapter(adapter);

                        }

                        }   

                }           
                catch (Exception e)
                {
                    e.printStackTrace();
                }

        }
    });

    }

} 
```

JsonParser.java

```
public class JsonParser {

    static InputStream is = null;
    //static JSONObject jObj = null;
    static String json;
    StringBuilder sb;

    public String getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            is = null;
            //static JSONObject jObj = null;
            json="";
            sb=null;

            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            Log.e("HTTPPOST","WORK-->"+httpPost);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            Log.e("HTTPRESPONSE","WORK-->"+httpResponse);

            StatusLine statusLine=httpResponse.getStatusLine();
            int statusCode= statusLine.getStatusCode();
            Log.e("status", "code"+statusCode);

            HttpEntity httpEntity = httpResponse.getEntity();
            Log.e("HTTPENTITY","WORK-->"+httpEntity);
            is = httpEntity.getContent();   
        }   
            catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            try{
        //  Log.e("HTTENTITY is","WORK"+is);

            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            Log.e("BUFFER READER","WORK-->"+reader);

            sb = new StringBuilder();
            Log.e("STRINGBUILDER","WORK");

            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line);
            }
            //is.close();
            json = sb.toString();
            Log.e("STRINGBUILDER","WORK"+sb.toString());
        //  Log.e("HTTPPOST SB TO STRING","WORK-->"+sb.toString());
        //  Log.e("JSON STRING HTTPPOST","WORK-->"+json);

        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // return JSON String
        //return json;

        return sb.toString();

    }

} 
```

> I/Process(1873)：发送信号。PID：1873 SIG：9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:16:16.513

您从 FlightListBack$4.onClick 调用 JsonParser.getJSONFromUrl （您在此处添加的匿名点击监听器：buttontime.setOnClickListener(new OnClickListener(){..})

在这个 JsonParser.getJSONFromUrl 中，您执行一个 http 请求，然后在主线程（或 UI 线程）上运行，因为它是从 onClick() 启动的。您应该重组代码以在工作线程（例如，使用 AsyncTask）上执行 http 请求，就像您在调用 JsonParser.getJSONFromUrl 的另一种情况下所做的那样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T10:34:59.780

在 onCreate() 中添加此代码；执行 AsynckTask 之前的方法

```
StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
                 .detectDiskReads()
                 .detectDiskWrites()
                 .detectNetwork()   // or .detectAll() for all detectable problems
                 .penaltyLog()
                 .build());
         StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
                 .detectLeakedSqlLiteObjects()
                 .detectLeakedClosableObjects()
                 .penaltyLog()
                 .penaltyDeath()
                 .build()); 
```

但请记住，此代码对开发阶段很有帮助，您必须将其删除，并且不要在生产阶段使用任何网络操作。

# asp.net-mvc - 在使用 ajax 更新目标 ID 时，登录页面在超时身份验证后呈现在 div 标记内。MVC2

> ID：13775081
> 
> 赞同：1
> 
> 时间：2012-12-08T06:20:02.950
> 
> 标签：asp.net-mvc

由于表单身份验证而超时。由于 ajax 更新了目标 id 属性，我的整个登录页面都在 div 内呈现。是否有任何解决方案在超时验证后我的登录页面在新窗口中打开而不是在 div 标签中呈现。

如果需要，我可以提供我的整个代码。帮助我的人。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:59:08.570

我正在开发的 Web 应用程序遇到了同样的问题。您需要设置一个登录控制器，其部分视图仅包括您需要的登录字段。当应用程序超时时，您将被重定向到登录控制器，该控制器将返回部分视图，其中仅包含您想要的字段。此外，您可以使用 JQuery 或 JS 隐藏在此页面中您不感兴趣的所有元素。

不要忘记在 web config 中设置登录控制器的超时时间

```
<authentication mode="Forms">
<forms loginUrl="~/Login" timeout="9000" />
</authentication> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T07:17:30.320

终于我有了另一种方式

在您的登录操作中，您可以附加一个自定义响应 HTTP 标头：

```
public ActionResult LogOn(){
{
    var model = ...
    Response.AppendHeader("X-LOGON", "Checked");
    return View(model);
} 
```

然后订阅完整事件并测试此标头的存在并采取相应措施：

```
$.ajax({
    url: '/home/some_protected_action',
    success: function (data, textStatus, XMLHttpRequest) {
        if (XMLHttpRequest.getResponseHeader('X-LOGON') === 'Checked') {
            // the LogOn page was displayed as a result of this request 
            // probably timeout => act accordingly
             window.location = '<%=Url.Content("~/Account/LogOn") %>';
             window.location.reload();
        }
    }
}); 
```

# internationalization - 如何最大化国际化网站的SEO？

> ID：13775082
> 
> 赞同：3
> 
> 时间：2012-12-08T06:20:33.120
> 
> 标签：internationalization, seo

我正在开发一个应该是多语言的网站。

考虑到尽可能多的搜索引擎优化，我想听听您对最佳方法的看法。

我有这些选择：

**替代方案 1：**单独的域

```
http://www.miweb.com -- English for default
http://www.miweb.com.fr
http://www.miweb.com.es
http://www.miweb.com.it 
```

**替代方案 2：**子域

```
http://www.miweb.com -- English for default
http://fr.miweb.com
http://es.miweb.com
http://it.miweb.com 
```

**替代方案 3：**子文件夹

```
http://www.miweb.com -- English for default
http://www.miweb.com/fr
http://www.miweb.com/es
http://www.miweb.com/it 
```

我想知道你的经历。我希望这个问题没问题。

欢迎任何建议、评论、反对或想法。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T08:25:24.837

SEO分析没有完美的秘诀。根据网站、市场、品牌、竞争对手和正在解决的问题以及所涉及的技术，这将永远是一种独特的体验，但在[Google Webmaster Central](http://googlewebmastercentral.blogspot.com/2010/03/working-with-multi-regional-websites.html)上有一篇关于这个主题的好帖子，但**这里有一些可能的 URL 结构，各有利弊**

### 单独的域（example.de、example.fr 等）

**优点：**明确的地理定位，服务器位置无关紧要，站点易于分离，法律要求（有时）

**缺点：**昂贵（+ 可用性）、更多基础设施、ccTLD 要求（有时）

* * *

### 子域（de.site.com、fr.site.com 等）

**优点：**易于设置，可以使用网站管理员工具地理定位，允许不同的服务器位置，轻松分离站点

**缺点：：**用户可能无法仅从 URL 识别地理定位（“de”是语言还是国家？）

* * *

### 子文件夹（site.com/de/、site.com/fr/ 等）

**优点:** : 易于设置，可以使用网站管理员工具地理定位，维护成本低（同一主机）

**缺点:** : 用户可能无法仅从 URL 识别地理定位、单一服务器位置、更难分离站点

# vb.net - 如何设置 DatagridView 值

> ID：13775087
> 
> 赞同：0
> 
> 时间：2012-12-08T06:21:37.163
> 
> 标签：vb.net

我有一个从生物识别设备中提取日期时间信息的 winform，并以以下格式在未绑定的 datagridview 上显示信息。

```
S/N        Type    Veri       Name     Datetime
====       ====    ====       ====     ========
1           1       2          emp     2012/12/01 13:00

How can I replace the Type=1 to "In", and Veri=2 to "FP"?? 
```

这是我当前的代码。而且，我合并年/月/日时间的方式是否正确完成？

```
vRet = Form1.SBXPC1.GetAllGLogData(mMachineNumber, vTMachineNumber, vSEnrollNumber,     vSMachineNumber, vVerifyMode, vYear, vMonth, vDay, vHour, vMinute, vSecond)
            If vRet = False Then Exit Do
            vRet = Form1.SBXPC1.GetUserName1(mMachineNumber, vSEnrollNumber, vName)
            If vRet = True And i <> 1 Then
                DataGridView2.ColumnCount = 7
                DataGridView2.Columns(0).Name = "S/N"
                DataGridView2.Columns(1).Name = "DeviceID"
                DataGridView2.Columns(2).Name = "Enroll"
                DataGridView2.Columns(3).Name = "Name"
                DataGridView2.Columns(4).Name = "DN"
                DataGridView2.Columns(5).Name = "Veri"
                DataGridView2.Columns(6).Name = "Datetime"
            End If
            Dim row As String() = New String() {i, vTMachineNumber, vSEnrollNumber, vName, vSMachineNumber, vVerifyMode, CStr(vYear) & "/" & (vMonth) & "/" & (vDay) & " " & (vHour) & ":" & (vMinute)}
            DataGridView2.Rows.Add(row) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:20:50.957

如果出现以下情况，我会立即使用：

```
Dim row As String() = New String() {i, vTMachineNumber, vSEnrollNumber, vName, vSMachineNumber, If(vVerifyMode = 2, "FP", ""), CStr(vYear) & "/" & (vMonth) & "/" & (vDay) & " " & (vHour) & ":" & (vMinute)} 
```

# jsf - 基于模型的 JSF 自动文本字段大小

> ID：13775092
> 
> 赞同：1
> 
> 时间：2012-12-08T06:22:02.747
> 
> 标签：jsf, jsf-2, mojarra

Mojarra JSF 有没有办法根据支持模型限制文本字段的大小？

例如，通常：

```
<p:inputText required="true" id="firstname" maxlength="50" value="#{user.firstName}"></p:inputText>

class User {
  @Size(max=50)
  String firstName;
} 
```

虽然我可以为每个字段添加一个 maxlength 属性，但我认为最终我会遇到维护问题，特别是当我有多个使用相同字段的表单时。如果我改变了字段的长度呢？

如果我没记错的话，apache myfaces 在其扩展库的 1 中具有此功能，mojarra 有什么等价物吗？

我记得现在我正在使用 myfaces 的 myfaces-extval-property-validation 库。 [http://myfaces.apache.org/extensions/validator12/validation-modules-project/myfaces-extval-property-validation/index.html](http://myfaces.apache.org/extensions/validator12/validation-modules-project/myfaces-extval-property-validation/index.html)

有没有来自 mojarra 的等价物？

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:14:53.343

你可以有一个定义最大长度的bean属性。然后，您至少可以在一处更改此类型的所有文本字段的长度。

```
@ManagedBean
@ApplicationScoped
public class MyBean {

    public int getType1MaxLength() {
        return 50;
    }
} 
```

和xhtml：

```
<p:inputText ... maxlength="#{myBean.type1MaxLength}" value="#{user.firstName}"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T18:36:34.980

[通过在JSF 资源包](http://www.mkyong.com/jsf2/jsf-2-0-and-resource-bundles-example/)中指定约束可以更好地处理您的要求，您可以在其中配置所有此类属性（例如错误/验证消息）和用户字段约束（例如字段最大长度和转换模式）。

将所有此类信息存储在支持 bean 中的问题在于，这些约束/属性将仅可用于由特定 bean 支持的视图，而不是可用于整个 JSF Webapp 的单个资源包文件。部署最佳实践还将建议您将此类内容放在代码库之外。对于您的特定用例

1.  在您的项目中创建一个 java 样式的包。比方说`com.you.jsf.resources`。在这个包中，您将存储一个`.properties`包含您的字段设置的文件。

    ```
     field.maxlength = 50 
    ```

2.  在您的文件中配置 1) 中的资源包包`faces_config.xml`，其中`<var>`指定要在应用程序中访问资源文件的变量名称

    ```
     <application>
     <resource-bundle>
    <base-name>com.you.jsf.resources</base-name>
    <var>conf</var>
     </resource-bundle>
       </application> 
    ```

3.  资源文件（及其内容）现在将在 JSF 上下文中以`#{conf['field.maxlength']}`. 您现在可以在视图中将其用作

    ```
     <p:inputText required="true" id="firstname" maxlength="#{conf['field.maxlength']}" value="#{user.firstName}"/> 
    ```

# php - 插入编码查询

> ID：13775096
> 
> 赞同：0
> 
> 时间：2012-12-08T06:22:48.933
> 
> 标签：php, mysql, yii

我需要将下一个自动插入到数据库中`orders_id`的`Orders`表中。`orders_id`不是主键，也不会自动递增

我需要查询数据库，找到最后（最高）的 id 值，递增 1，并将其插入数据库的 Orders 表中。实际上，我有一个发货操作，它将提供订单发货地址。因此，一旦用户填写地址表格并转到付款页面，我想同时填写我的`Orders`表格`max(orders_id)+1`。

`Address`我已经在表格和表格之间建立了关系，`Orders`但我的`orders`表格没有被填充。请详细说明我在 Yii 的控制器中实现它的正确代码。

我的运输行动控制器是这样的：

```
public function actionCheckout_shipping()
    {
            $address_id = Yii::app()->session->get('address_id');
            if(!empty($address_id))
                $address = Address::model()->findByPk($address_id);
            else
                $address = new Address;

             $orders=new Orders;
             $orders_id = Yii::app()->db->createCommand("SELECT MAX('orders_id') FROM orders_temp")->queryScalar();
             $orders->orders_id=$orders_id+1;
             $orders->customer_id = 1;
             $orders->billing_address_id = Address::model()->address_id;
             $orders->shipping_address_id = Address::model()->address_id;
             $orders->payment_details_id = 1;
             $orders->order_date = date('d-m-y');
             $orders->shipping_amount= NULL;
             $orders->total_amount = 100;
             $orders->created_date = date('d-m-y');
             $orders->save();

            $this->render('checkout_shipping', array('address'=>$address,'selected_address'=>$selected_address),false,true); 
```

在用户完成填写送货地址表格后，我已插入 ORDERS 表的代码以填写它。

好的，我在我的 ORDERS 模型中使用了这样的关系：

```
public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
            'billingAddress' => array(self::BELONGS_TO, 'Address', 'billing_address_id'),
            'shippingAddress' => array(self::BELONGS_TO, 'Address', 'shipping_address_id'),
        );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:01:33.857

放入你的控制器。

```
//$address_id = Yii::app()->session->get('address_id');// Temporary I set
$address_id = 1; // Remove this

        if(!empty($address_id))
    {
           $address = Address::model()->findByPk($address_id);
    }
        else
    {
        echo "error address id should be there";                
    }

  $order_id = Yii::app()->db->createCommand("SELECT MAX(orders_id) FROM orders")->queryScalar();
 $order_id = ($order_id)?($order_id+1):1;
      $orders=new OrdersTemp;
 $orders->orders_id = $order_id;
 $orders->customer_id = 1;
     $orders->billing_address_id = $address_id;
     $orders->shipping_address_id = $address_id;
     $orders->payment_details_id = 1;
     $orders->order_date = date('Y-m-d G:i:s');
     $orders->shipping_amount= '44';
     $orders->total_amount = '10';
 $orders->shipping_address_id = 1;           
     $orders->created_date = date('Y-m-d G:i:s');
 $orders->modified_date = date('Y-m-d G:i:s');
     $orders->save();
 echo $address->address_id;
 echo "<br />";
 echo $address->addressOrders->orders_id;
 echo "<br />";             
 echo $address->addressOrders->total_amount;
     $this->render('checkout_shipping', array('address'=>$address),false,true); 
```

将此函数替换为 CartController n 检查视图文件中的回显，例如 echo $address->addressOrders->orders_id; 等等

模型“OrdersTemp”的变化是

```
 public function tableName()
{
    return 'orders';
} 
```

存在基本错误，例如您使用的表名 1\. orders_temp 和表名是“orders” 2\. 不要插入 NULL，因为您在表结构中设置了 NOT NULL。3\. 您没有在订单表 b 中获得值，因为没有值插入到表中。

希望你觉得这个有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:38:11.983

`insert into orders (orders_id) values (select max(orders_id)+1 from orders);`

# jquery - RailsTutorial 11.2.5 Ajax 调用不返回成功

> ID：13775097
> 
> 赞同：2
> 
> 时间：2012-12-08T06:23:01.773
> 
> 标签：jquery, ajax, rspec, ruby-on-rails-3.2, railstutorial.org

在 Railstutorial(.org) 的 Rails 3.2 版本的第[11.2.5](http://ruby.railstutorial.org/chapters/following-users#sec-a_working_follow_button_with_ajax)节中，我无法通过所有的关系控制器规范 rb 测试，即用于创建和破坏关系的“应该成功响应”方法。尽管使用了所提供代码的精确副本（复制和粘贴），但仍然如此。收到的消息是`expected success? to return true, got false`

如果它在某种程度上相关，我的关注/取消关注按钮没有在网络浏览器中更新，但我能够通过`= require jquery`在 app/assets/javascripts/application.js 中激活来解决这个问题（尽管这一步似乎不是教程文本中的任何地方都提到过）。在此修复之前，未呈现关联的 create.js.erb 和 destroy.js.erb 操作。

现在应用程序*似乎*正在运行，包括 ajaxified 的关注/取消关注按钮（它们都在屏幕上更新并按预期修改关系）。尽管如此，提到的两个 rspec 测试仍然失败。我已经分析了服务器日志，但到目前为止还没有给我任何线索。

关系控制器规范.rb

```
require 'spec_helper'

describe RelationshipsController do

  let(:user) { FactoryGirl.create(:user) }
  let(:other_user) { FactoryGirl.create(:user) }

  before { sign_in user }

  describe "creating a relationship with Ajax" do

    it "should increment the Relationship count" do
      expect do
        xhr :post, :create, relationship: { followed_id: other_user.id }
      end.to change(Relationship, :count).by(1)
    end

    it "should respond with success" do
      xhr :post, :create, relationship: { followed_id: other_user.id }
      response.should be_success
    end
  end

  describe "destroying a relationship with Ajax" do

    before { user.follow!(other_user) }
    let(:relationship) { user.relationships.find_by_followed_id(other_user) }

    it "should decrement the Relationship count" do
      expect do
        xhr :delete, :destroy, id: relationship.id
      end.to change(Relationship, :count).by(-1)
    end

    it "should respond with success" do
      xhr :delete, :destroy, id: relationship.id
      response.should be_success
    end
  end
end 
```

关系控制器.rb

```
class RelationshipsController < ApplicationController
  before_filter :signed_in_user

  def create
    @user = User.find(params[:relationship][:followed_id])
    current_user.follow!(@user)
    respond_to do |format|
      format.html { redirect_to @user }
      format.js
    end
  end

  def destroy
    @user = Relationship.find(params[:id]).followed
    current_user.unfollow!(@user)
    respond_to do |format|
      format.html { redirect_to @user }
      format.js
    end
  end
end 
```

可以在[https://github.com/spinnn/testapp找到应用程序仓库](https://github.com/spinnn/testapp)

我已经注意到

[按钮在 Ajax - Rails 教程 3 中未更新，第 12.2.5 节](https://stackoverflow.com/questions/6156815/button-doesnt-update-in-ajax-rails-tutorial-3-at-12-2-5)

但是这个讨论似乎不适用于这种情况（它也与教程的 Rails 3.0 而不是 Rails 3.2 版本有关）。

我已经采取了多次重新启动 Web 服务器以及重置、重新填充和重新准备数据库的步骤，但问题没有得到任何解决。

我在 OS X 上使用 ruby​​ 1.9.3p286 和 Rails 3.2.8。任何有关解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-31T06:08:46.977

好吧，是时候害羞了。克隆 railstutorial/sample_app_2nd_ed.git 之后，我找到了一个非常直接的解决方案来解决这个问题。relationship_controller.rb 已复制，在 app/controllers/ 中有一个副本，在 spec/controllers/ 中也有一个（冗余）副本 不幸的是，我一直在尝试调试的版本是冗余版本，而实际版本不完整。掌心。也许是警示故事。

# java - 我如何知道我是否已成功连接到打开连接的 URL？

> ID：13775103
> 
> 赞同：1
> 
> 时间：2012-12-08T06:23:27.890
> 
> 标签：java, url, jakarta-ee, networking, connection

要检查我是否可以连接到名为*服务*的 Web 应用程序，我打开了与其地址的连接。如何检查是否已连接到此*URL/服务*？我正在考虑发送某种状态方法（当客户端尝试打开与此 URL 的连接时），以确定客户端是否能够成功建立与*服务*的连接。但我该怎么做呢？

我正在尝试这样的事情：

```
 final URL url = new URL("http://localhost:8084/service/index.jsp");
          final URLConnection urlc = url.openConnection();
          InputStream response = urlc.getInputStream();
          // Now call a method in the service app that sends a status method...
          // .....or can I get away with this ? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T07:39:20.720

我建议

```
 URL url = new URL("http://stackoverflow.com/questions/13775103/how-do-i-know-if-i-have-successfully-connected-to-the-url-i-opened-a-connection");
    HttpURLConnection conn = (HttpURLConnection)url.openConnection();
    System.out.println(conn.getResponseCode()); 
```

它打印`200`（确定）

# iphone - 自定义 UIPickerView 元素以在 xcode 中从顶部开始？

> ID：13775106
> 
> 赞同：0
> 
> 时间：2012-12-08T06:24:01.320
> 
> 标签：iphone, ios, xcode, uipickerview

1.-->我需要自定义一个UIPickerview元素从顶部开始。截至目前我们可以看到选择器元素从中间开始，如图所示（苹果从选择器中间开始）但不是从顶部...有没有办法做到这一点？我该怎么做？

![在此处输入图像描述](../Images/55a09fec0c28bdd2f0a5b861fcbb2df4.png)

2.--> 如何让 PickerView 在首次显示时从某行开始我知道这段代码：

```
 [self.view addSubview:aPicker];
  [aPicker selectRow:14 inComponent:0 animated:NO]; 
```

但是我有一个文本字段，我想要文本字段文本（例如：加利福尼亚），这也是 pickerView 的元素之一，但它的行位置不知道显示为 UIPickerView 的默认值。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:01:23.677

1）不确定你在这里的意思。您是否希望选择指示器位于顶部，并且当您旋转它时选择器停止在该位置？如果是这样，我认为这将是一件很难的事情。

2）要让选择器从特定行开始，只需获取数据源数组中该项目的索引，然后根据该索引选择选择器行。像这样的东西可以用作文本字段的操作方法：

```
-(IBAction)startPickerAtText:(UITextField *) sender {
    NSInteger indx = [self.theData indexOfObjectIdenticalTo:sender.text];
    if (indx != NSNotFound) {
        [self.picker selectRow:indx inComponent:0 animated:YES];
    }
} 
```

# php - 在打印的 php 变量周围环绕文本

> ID：13775108
> 
> 赞同：1
> 
> 时间：2012-12-08T06:24:28.183
> 
> 标签：php, drupal

我正在努力寻找关于如何在我的 Drupal 站点中与打印的 php 变量在同一行添加文本的答案。它必须非常容易，但我正在学习。当我输入

```
Time:<?php print render($content['field_duration']); ?>minutes 
```

我得到：

```
Time:
5
minutes 
```

无论如何让它成为“时间：5分钟”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T06:57:47.213

将常量字符串放在 PHP 中怎么样？

```
<?php print render($dur = 'Time: ' . implode($content['field_duration']) . ' minutes'); ?> 
```

渲染函数通过引用获取参数，因此字符串必须存储在变量中。implode 函数使数组成为一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:00:50.350

一种更“ Drupal”的方法：

```
$field_items = field_get_items('node', $node, 'field_duration');

echo 'Time: ' . $field_items[0]['value'] . ' minutes'; 
```

你最好把它放在一个预处理函数中并将变量传递给模板文件，而不是直接在那里做，但无论你把它放在哪里，逻辑都应该起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T14:15:45.090

我想用css或不用render()解决这个问题会更容易。

使用 CSS 是这样的：

```
<style>
  #text, #time {
   float: left;
  }
</style>
<div>
  <div id="text">Time: </div>
  <div id="time">
    <?php print render($content['field_duration']); ?>
  </div>
</div> 
```

并且没有 render() - 只是为了`$content['your_field']`自己输出。`var_dump()`这个变量来确定它包含什么数据，然后`echo`直接这个数据（`foreach`如果它是一个数组）。我希望它应该工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T07:04:10.473

尝试

<?php print render("时间:{$content['field_duration']}分钟"); ?>

希望这可以帮助。

# java - grails域类公开java类的id

> ID：13775109
> 
> 赞同：-1
> 
> 时间：2012-12-08T06:24:29.603
> 
> 标签：java, hibernate, grails, groovy

我有一个关于 grails 域类的相当简单的问题。我不确定我知道如何正确表达它，因为我似乎无法在谷歌上找到答案。

我有一个 groovy 域类

```
class DomainObject {
    String name
    String email
} 
```

和一个使用此域对象的 java 类。

```
public class DomainUser {
    public void method() {
        DomainObject object = new DomainObject();
        object.getId();
    }
} 
```

但是我在线上遇到错误

`object.getId();`

**留言**：

 **该类型的方法`getId()`未定义

我如何将 id 公开给 java 类，因为它是由 grails 应用程序/休眠自动生成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:33:58.970

id 字段是在运行时生成的，java 对动态引用一无所知。从服务层访问该域。 [http://grails.org/doc/latest/guide/services.html#usingServicesFromJava](http://grails.org/doc/latest/guide/services.html#usingServicesFromJava)

也谷歌：“grails访问服务java”

第一个结果是[http://grails.1312388.n4.nabble.com/Question-How-do-I-reference-a-Grails-service-from-within-Java-class-td1462056.html](http://grails.1312388.n4.nabble.com/Question-How-do-I-reference-a-Grails-service-from-within-Java-class-td1462056.html)

你可以在你的 DomainService.groovy 中写一些这样的东西

```
class DomainService(){
    def persistAndGetNewDomain(){
       new Domain().save(flush:true)    
    }
} 
```

此外，您必须将 id 字段添加到您的域类

```
class DomainObject {
    Long id
    String name
    String email
} 
```**

# symfony - Symfony 2.1 FOSOAuthServerBundle 网络服务认证

> ID：13775110
> 
> 赞同：2
> 
> 时间：2012-12-08T06:24:39.660
> 
> 标签：symfony

我正在尝试从远程 Web 服务加载用户以进行 OAuth 授权。Webservice 需要登录名和密码才能获取有关用户的信息。这篇[文章](http://blog.vandenbrand.org/2012/06/19/symfony2-authentication-provider-authenticate-against-webservice/)说，我需要创建新的 UserProvider。但我不明白如何仅通过用户名加载用户而没有密码：

```
// Try service
    if ($record = $this->service->getUser($username)) {
        // Set some fields
        $user = new User();
        $user->setUsername($username);
        return $user;
    } 
```

我需要类似代理身份验证的东西来远程服务。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T22:06:06.420

进入 Symfony 安全组件的最好方法是阅读以下文档：[http](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html) ://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html 。通过示例工作并尝试从小处着手。

您的下一步可能是实施自定义`AuthenticationListener`. 看看 中的类`Symfony\Component\Security\Http\Firewall`，这应该会给你一个良好的开端。[另外，在Packagist](http://packagist.com/)上寻找类似的包并查看他们的代码。

祝你好运！

# bash - bash 正在用空格替换冒号，如何保留冒号？

> ID：13775112
> 
> 赞同：1
> 
> 时间：2012-12-08T06:24:51.507
> 
> 标签：bash, shell

我正在尝试用 bash 回显兼容的 MySQL 日期时间，并且它不断用空格替换冒号。

关于如何防止它们被替换的任何想法？

另外，我试图用 sed 将空格替换为冒号，但它们仍然以空格的形式出现，这是怎么回事？

```
#!/bin/bash
now=$(date +"%Y-%m-%d %H:%M:%S") 
EXECUTED=$(php evaluate.php $now) 
```

预期结果：2012-12-08 06:34:00

评估.php

```
var_dump($argv) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:41:40.937

您需要在 PHP 脚本的参数周围加上双引号，以在单个参数中保留空格：

```
#!/bin/bash
now=$(date +"%Y-%m-%d %H:%M:%S") 
EXECUTED=$(php evaluate.php "$now") 
```

这是否足够是另一回事。您的 PHP 脚本似乎缺少 PHP 标记。

```
$ php evaluate.php "$now"
array(2) {
  [0]=>
  string(12) "evaluate.php"
  [1]=>
  string(19) "2012-12-07 22:39:46"
}
$ 
```

### 评估.php

```
<?php
var_dump($argv)
?> 
```

# python - 如何将字符串添加到命名函数路径的末尾？

> ID：13775113
> 
> 赞同：1
> 
> 时间：2012-12-08T06:25:08.520
> 
> 标签：python

我正在尝试将当前日期和时间添加到 3D 软件中文件命名路径的末尾，到目前为止我有这个：

```
#python
import datetime
now = datetime.datetime.now()
lx.out(now)
lx.eval("render /Users/me/Desktop/images/") 
```

试过这个（但没有用）

```
lx.eval("render /Users/me/Desktop/images/%s" %(now)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:34:34.440

您可以通过以下方式获取包含当前日期和时间的字符串：

```
import datetime
now = datetime.datetime.now()
nowString = str(now).replace(" ", "-") 
```

然后，您可以将该字符串添加到路径的其余部分。例如，使用上面的路径：

```
lx.eval("render /Users/me/Desktop/images/" + nowString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:39:35.573

我认为您正在寻找的是 strftime 函数来正确格式化没有空格的日期。我通常像这样格式化日期，因为它在您的文件系统中显示为排序：

```
import datetime

now = datetime.datetime.now()
print("render mypath/%s" % now.strftime("%Y%m%d_%H%M%S")) 
```

输出：

```
render mypath/20121208_113754 
```

# iphone - 在 Xcode 中移动图像

> ID：13775115
> 
> 赞同：0
> 
> 时间：2012-12-08T06:25:25.463
> 
> 标签：iphone, ios, xcode, image, gesture

我在我的 iPhone 应用程序中使用滑动手势识别器来执行 IBAction。我在视图中间有一个图像，当我向左滑动时，我希望图像向左移动一点，然后弹回原来的位置，就像用橡皮筋强迫它一样. 谁能帮我这个？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:41:22.507

我用过[UIView animateWithDuration](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3a)。我必须嵌套它们才能有弹跳，并为每个提供一个开始和结束帧。

这是一些丑陋的代码，这可能是最好的方法，但我不确定：

```
CGRect bounceUpFrameFirst = [[UIScreen mainScreen] bounds];
bounceUpFrameFirst.origin.y = bounceUpFrameFirst.origin.y - 30.0;
CGRect bounceUpFrameSecond = [[UIScreen mainScreen] bounds];
bounceUpFrameSecond.origin.y = bounceUpFrameFirst.origin.y - 15.0;
CGRect bounceUpFrameThird = [[UIScreen mainScreen] bounds];
bounceUpFrameThird.origin.y = bounceUpFrameFirst.origin.y - 10.0;
CGRect bounceDownFrame = [[UIScreen mainScreen] bounds];

[UIView animateWithDuration:0.1 animations:^{[wakeView setFrame:bounceUpFrameFirst]; [sleepView setFrame:bounceUpFrameFirst];} completion:^(BOOL finished){[UIView animateWithDuration:0.1 animations:^{[wakeView setFrame:bounceDownFrame]; [sleepView setFrame:bounceDownFrame];} completion:^(BOOL finished){[UIView animateWithDuration:0.1 animations:^{[wakeView setFrame:bounceUpFrameSecond]; [sleepView setFrame:bounceUpFrameSecond];} completion:^(BOOL finished){[UIView animateWithDuration:0.1 animations:^{[wakeView setFrame:bounceDownFrame]; [sleepView setFrame:bounceDownFrame];} completion:^(BOOL finished){[UIView animateWithDuration:0.1 animations:^{[wakeView setFrame:bounceUpFrameThird]; [sleepView setFrame:bounceUpFrameThird];} completion:^(BOOL finished){[UIView animateWithDuration:0.1 animations:^{[wakeView setFrame:bounceDownFrame]; [sleepView setFrame:bounceDownFrame];}];}];}];}];}];}]; 
```

# c# - 如何使用随时间变化的数据更新动态磁贴？

> ID：13775119
> 
> 赞同：0
> 
> 时间：2012-12-08T06:25:59.713
> 
> 标签：c#, .net-4.0, windows-8, windows-runtime, winrt-xaml

我的 Live Tile 正在跟踪自 3 种类型的事件以来的时间：Event1、Event2、Event3。我希望实时磁贴显示事件发生后的时间。

我在后台任务中实现了它，如下面的代码，我想知道它是否是正确的方法？

我看到的所有示例都调用了一次 Run，因此 AddTileNotification 只调用了一次。我将其修改为在 While(true) 循环中，不确定吗？！

```
using System;
using System.Threading.Tasks;
using Windows.ApplicationModel.Background;
using Windows.Data.Xml.Dom;
using Windows.Storage;
using Windows.UI.Notifications;

namespace BackgroundTasks
    {    
    public sealed class TileUpdaterClass : IBackgroundTask
        {
        TileUpdater tileUpdater;

        public void Run( IBackgroundTaskInstance taskInstance )
            {
            while ( true )
                {
                BackgroundTaskDeferral deferral = taskInstance.GetDeferral();

                tileUpdater = TileUpdateManager.CreateTileUpdaterForApplication();
                tileUpdater.EnableNotificationQueue( true );

                AddTileNotification( "Since Event1: " + TimeSince( "Event1" ), "tag1", "ms-appx:///Resources/Images/Event1.jpg" );
                AddTileNotification( "Since Event2: " + TimeSince( "Event2" ), "tag2", "ms-appx:///Resources/Images/Event2.jpg" );
                AddTileNotification( "Since Event3: " + TimeSince( "Event3" ), "tag3", "ms-appx:///Resources/Images/Event3.jpg" );

                deferral.Complete();

                Task.Delay( 5000 ); 
                }
            }

        private static string TimeSince( string key )
            {
            TimeSpan since;
            if ( ApplicationData.Current.LocalSettings.Values.ContainsKey( key ) )
                {
                since = new TimeSpan( DateTime.Now.Ticks - ( new DateTime( (long)ApplicationData.Current.LocalSettings.Values[ key ] ) ).Ticks );
                }
            return ( since.Hours.ToString( "D2" ) + ":" + since.Minutes.ToString( "D2" ) + ":" + since.Seconds.ToString( "D2" ) );
            }

        private void AddTileNotification( string content, string tag, string image )
            {
            var templateType = TileTemplateType.TileWideSmallImageAndText04;
            var xml = TileUpdateManager.GetTemplateContent( templateType );

            var textNodes = xml.GetElementsByTagName( "text" );
            textNodes[ 0 ].AppendChild( xml.CreateTextNode( "myApp" ) );
            textNodes[ 1 ].AppendChild( xml.CreateTextNode( content ) );

            var imageNodes = xml.GetElementsByTagName( "image" );
            var elt = (XmlElement)imageNodes[ 0 ];
            elt.SetAttribute( "src", image );

            var tile = new TileNotification( xml );
            tile.Tag = tag;

            tileUpdater.Update( tile );
            }
        }
    } 
```

我还注意到磁贴没有按顺序显示 3 个事件。时间保持正确，但顺序不正确。正常吗？

谢谢， EitanB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T21:04:48.130

是的，这是意料之中的。从[使用通知队列：](http://msdn.microsoft.com/en-us/library/windows/apps/Hh781199.aspx)

> 显示队列中每个通知的时间量以及它们在磁贴上的显示顺序取决于多个内部因素，并且无法由应用程序控制。

# iphone - 如何在 ios6 中创建多页 PDF？

> ID：13775124
> 
> 赞同：2
> 
> 时间：2012-12-08T06:26:28.727
> 
> 标签：iphone, objective-c, ios, ipad

在[“以编程方式创建 pdf 的示例代码”](https://stackoverflow.com/questions/12776930/sample-code-to-create-pdf-programmatically/12776991#12776991)中有用于生成具有多个页面的 PDF 的代码，但我不明白我必须在哪里放置或实现该代码。

第一个答案：生成我在项目中已经完成的 PDF。

第二个答案：对于多页，我很困惑。谁能告诉我我把这段代码放在哪里来生成一个多页的PDF？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T05:38:57.340

用于创建多个页面

定义**NSInteger currentPage = 0;** 在 .m 文件的顶部

并在 generatePdfWithFilePath 方法中写入

```
-(void) generatePdfWithFilePath: (NSString *)thefilePath
{
    NSLog(@"\n==========\n \t the file path==  %@",thefilePath);

    UIGraphicsBeginPDFContextToFile(thefilePath, CGRectZero, nil);

    do
    {        
           currentPage++;

           if(currentPage == 1) 
              pageSize= CGSizeMake(612,2350);
           else
              pageSize = CGSizeMake(612, 2000);

           [self drawBorder];

           //Draw text fo our header.
           [self drawHeader];

           //Draw a line below the header.
           [self drawLine];

           //Draw some text for the page.
           [self drawText];

           //Draw an image
           [self drawImage];

    }while (currentPage !=2); //You can write required page number here

    currentPage=0;

    UIGraphicsEndPDFContext();
} 
```

# ms-access-2007 - 打开 Access 数据库时从用户那里获取输入

> ID：13775125
> 
> 赞同：1
> 
> 时间：2012-12-08T06:26:32.457
> 
> 标签：ms-access-2007

在我的数据库中有日期/时间类型的字段，它们的默认值设置为 now()。但问题是这些字段是由英文系统日期自动填充的。我想要我自己国家的日期格式，而不更改我的系统日期格式。所以我决定，无论何时打开数据库，它都应该要求一个日期，这样用户就会给出今天的日期，并且该日期将自动用于这些字段。

但我不知道该怎么做，请帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:55:41.447

创建一个表单以在数据库打开时显示，该表单将收集日期。

单击 Access 左上角的大菜单按钮。

从菜单中选择底部的访问选项。

从访问选项中，选择左侧菜单上的当前数据库。

查找“显示表格：”下方的第四行

选择您刚刚创建的表单。

当您打开数据库时，此表单将始终打开，用户可以输入当前日期。

# javascript - Javascript中的多维数组分隔符

> ID：13775129
> 
> 赞同：4
> 
> 时间：2012-12-08T06:27:29.847
> 
> 标签：javascript

我一直在寻找一种更简洁的方式来表示 Javascript 中的多维数组，所以我想找到一种使用多个分隔符来分隔数组的方法，以及 Javascript 的内置`string.split(separator)`方法。

例如，字符串`"what, am, I; doing, here, now"`将变为`[["what", "am", "I"],["doing", "here", "now"]]`.

是否有任何简洁的方法来实现执行此操作的功能？

```
var theString = "what, am, I; doing, here, now";
var theArray = getArray(theString, [",", ";"]); //this should return [["what", "am", "I"],["doing", "here", "now"]].

function getArray(theString, separators){
    //convert a string to a multidimensional array, given a list of separators
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T06:30:16.013

最后编辑

正如@Tom 指出的那样，我在单词中留下了一些逗号。这是最终的代码：

```
var str = "what, am, I; doing, here, now";

var arr = str.split(/\;\s*/g);
for (var i = 0; i < arr.length; i++){
    arr[i] = arr[i].split(/\,\s*/g);
}
console.log(arr); 
```

[和小提琴](http://jsfiddle.net/CuaNH/4/)

* * *

首先在第二个分隔符上拆分，然后在另一个分隔符上拆分其中的每个成员。

```
var str = "what, am, I; doing, here, now";

var arr = str.split(';');
for (var i = 0; i < arr.length; i++){
    arr[i] = arr[i].split(' ');
} 
```

[现场演示](http://jsfiddle.net/CuaNH/)

请注意，您必须进行一些清理以删除第二个数组中的空白空间，但这应该很简单。

* * *

编辑——我感觉精力充沛——这就是你如何杀死那个烦人的领先空间

```
var str = "what, am, I; doing, here, now";

var arr = str.split(';');
for (var i = 0; i < arr.length; i++){
    arr[i] = arr[i].replace(/^\s*/, '').split(' ');
} 
```

[更新的小提琴](http://jsfiddle.net/CuaNH/1/)

* * *

编辑——这就是我如此爱的原因。根据@Nathan，您可以拆分正则表达式并省去一些麻烦

```
var str = "what, am, I; doing, here, now";

var arr = str.split(/\;\s*/g);
for (var i = 0; i < arr.length; i++){
    arr[i] = arr[i].split(' ');
}
console.log(arr); 
```

[更新的小提琴](http://jsfiddle.net/CuaNH/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T06:46:59.443

这应该有效：

```
var theString = "what, am, I; another, string; doing, here, now";
 //this should return [["what", "am", "I"],["doing", "here", "now"]].

function getArray(theString, separators){
    //Firs split
    var strings = theString.replace(/\s+/g, '').split(separators.pop());
    //Second split
        var sep = separators.pop();
        for (var i = 0; i < strings.length; i++) {
            strings[i] = strings[i].split(sep);
        };
    console.log(strings);
    return strings;
}

var theArray = getArray(theString,["," ,";" ]); 
```

### 更新：

现在代码应该可以工作了：http: [//jsfiddle.net/beTEq/1/](http://jsfiddle.net/beTEq/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-12T04:20:46.770

根据[这里的答案](https://stackoverflow.com/a/16503849/975097)，我想出了[一个可以处理任意数量的分隔符的解决方案](http://jsfiddle.net/mu2gU/)。

```
function getArray(theString, separators) {
    separators = separators.reverse();
    var theArray = theString.split(separators[0]);
    for (var j = 1; j < separators.length; j++) {
        theArray = theArray.map(function mapper(v, i, a) {
            if (typeof v == "string") {
                return v.split(separators[j]);
            } else {
                return v.map(mapper);
            }
        });
    }
    return theArray;
}

console.log(JSON.stringify(getArray("A, b, c; d, e, f;g,h,i'a, b, c;d,e,f", [",", ";", "'"])));
//this will write [[["A"," b"," c"],[" d"," e"," f"],["g","h","i"]],[["a"," b"," c"],["d","e","f"]]] to the console. 
```

# c# - 如何在 GridView 中不显示 ID 但仍从客户端获取值？

> ID：13775130
> 
> 赞同：0
> 
> 时间：2012-12-08T06:27:52.820
> 
> 标签：c#, asp.net, gridview

我现在有一个 GridView，它几乎反映了数据库中的一个表，并且我启用了选择。因此，当用户为特定行点击“选择”时，它会查看该行的第一个单元格，这是表中该条目的 ID，然后转到我的 SQL 表并获取该数据并将其显示在不同的页。有没有办法我可以做类似的事情而不必向用户显示每行的 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:43:23.933

您是正确的，`Gridview1.Columns[0].Visible = false;`您将无法在客户端提取数据。您想要做的仍然是将该列传递给客户端，但对用户不可见。

这可以很容易地将以下 CSS 样式添加到您的 aspx 页面：

```
<style type="text/css">
    .invisible
    {
       display:none;
    }
</style> 
```

并将 设置`CssStyle`为您的列，如下所示：

```
 <asp:BoundField DataField="productID" .... ItemStyle-CssClass="invisible"/> 
```

# php - $user = $facebook->getUser() 使用 SDK 3.2.2 返回 0

> ID：13775141
> 
> 赞同：0
> 
> 时间：2012-12-08T06:29:53.807
> 
> 标签：php, facebook, facebook-graph-api

我正在使用 sdk 附带的 facebook 示例 javascript 代码，但没有运气我使用的是最新的 3.2.2 SDK

```
require 'facebook.php';

$facebook = new Facebook(array(
  'appId'  => '---------',
  'secret' => '----------',
));

// See if there is a user from a cookie
echo $user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
    $user = null;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:38:27.070

使用此代码：

```
header('P3P: CP="CURa ADMa DEVa PSAo PSDo OUR BUS UNI PUR INT DEM STA PRE COM NAV OTC NOI DSP COR"');
require 'facebook.php';

$facebook = new Facebook(array(
  'appId'  => '---------',
  'secret' => '----------',
));
$querystr=http_build_query($_REQUEST);
// See if there is a user from a cookie
$user = $facebook->getUser();

if(isset($_REQUEST['code'])) {

            if(!empty($_REQUEST['code'])) {
setcookie("access_token", $_REQUEST['code'], time()+120);
            } 
            echo ("<script> top.location.href='<YOUR APP URL>'</script>");
            exit;
}

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
    $user = null;
  }
}else {
$scope='email';

    $params = array(
            'redirect_uri' => 'YOUR SITE URL(WHere app is hosted)',
            'display' => 'page',
            'scope' => $scope
        );
    $loginurl = $facebook->getLoginUrl($params);

     echo ("<script> top.location.href='".$loginurl."'</script>");
     exit;
} 
```

# objective-c - 无论滚动位置如何，都将 UIPickerView 设置为 UITableview 的底部

> ID：13775143
> 
> 赞同：0
> 
> 时间：2012-12-08T06:30:03.907
> 
> 标签：objective-c, ios, uitableview, uiscrollview, uipickerview

无论滚动到哪里，我都想将一个`UIPickerView`对齐的底部呈现出来。`UITableView`

目前我有一个`UIPickerView`添加到`UITableView`我按下按钮时呈现的一个，但是当我滚动表格时，它`UIPickerView`会消失，如果我滚动到我呈现它的范围之外，`UIPickerView`似乎从来没有被调用。

有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:34:24.360

`UITableViewController`除非您需要添加不随表格视图滚动的子视图，否则使用非常好。真的做不到。解决方案是改用 a`UIViewController`并添加您自己的表视图，设置表视图数据源和委托协议，并复制基本的表视图控制器管道。

一旦您的视图控制器再次像普通的表格视图控制器一样工作，您现在可以将子视图添加到不会随表格滚动的视图控制器的视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:51:18.013

如果你以编程方式添加 tableview

```
 SearchtableView.frame = CGRectMake(450, 90, 318, 600);
            SearchtableView  =  [[UITableView alloc] initWithFrame:CGRectMake(623, 90, 400, 400)style:UITableViewStyleGrouped];
            [self.view addSubview:SearchtableView];
//belove the tableview//
//Add UIPickerView to the self.view]// 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T03:39:15.247

有人告诉我，必须有一个更简单的替代方案来代替我得到的答案，我找到了解决方案。

我决定使用`scrollViewDidScroll:`UIPickerView 找到滚动点的 y 坐标，然后将其动画到所需位置。

```
 ...
    [UIView beginAnimations:nil context:NULL];
     CGFloat pointY = self.scrollPoint.y;
    [self.sortPicker setFrame:CGRectMake(0, pointY + 200, 320, 216)];
    [UIView commitAnimations];
    ... 
```

UIPickerView 只会在滚动停止时出现，因此有必要实现一个方法来停止触摸滚动：

```
- (void)stopScroll:(UITableView *)tableview
{
    CGPoint offset = tableview.contentOffset;
    [tableview setContentOffset:offset animated:NO];
} 
```

这将允许您在任何给定目的地随时显示和关闭 UIPickerView。

# haskell - 如何在 Language.Haskell.Interpreter 中使用解释？

> ID：13775144
> 
> 赞同：2
> 
> 时间：2012-12-08T06:30:09.460
> 
> 标签：haskell

解释是否用于评估 haskell 表达式？如果是这样，我该如何使用它？

```
Language.Haskell.Interpreter> :t interpret 
interpret :: (Data.Typeable.Internal.Typeable a, MonadInterpreter m) =>
String -> a -> m a

>interpret "1+1"
<interactive>:20:1:
Ambiguous type variable `m0' in the constraint:
  (MonadInterpreter m0) arising from a use of `interpret'
Probable fix: add a type signature that fixes these type variable(s)
In the expression: interpret "1+1"
In an equation for `it': it = interpret "1+1" 
```

问候！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T08:36:32.263

这里有[一些例子](http://hackage.haskell.org/packages/archive/hint/0.3.1.0/doc/html/Language-Haskell-Interpreter.html#v%3ainterpret)：

```
interpret "head [True,False]" (as :: Bool)
interpret "head $ map show [True,False]" infer >>= flip interpret (as :: Bool) 
```

其中“与解释一起使用以提供证人的便利功能”：

```
as :: Typeable a => a   
infer :: Typeable a => a 
```

PS API 的`Language.Haskell.Interpreter`用户界面不是很友好。如果不检查它的示例文件，它的使用对我来说将是一个难题（不是高级 Haskeller）。

但是借助此处的示例，我们可以：

```
Prelude> import Language.Haskell.Interpreter as I
Prelude I> runInterpreter $ setImports ["Prelude"] >> interpret "map (*2) [1,2,3]" (as :: [Int])
Right [2,4,6] 
```

有用的示例文件可以在`~/.cabal/packages/hackage.haskell.org/hint/0.3.3.5/hint-0.3.3.5.tar.gz`.

看起来`interpret`必须在受以下限制的 monad 中运行`MonadInterpreter m`：

```
Prelude I> :t runInterpreter 
  runInterpreter
  :: (Functor m, Control.Monad.CatchIO.MonadCatchIO m) => 
     InterpreterT m a -> m (Either InterpreterError a)
Prelude I> :t interpret 
  interpret
  :: (Data.Typeable.Internal.Typeable a, MonadInterpreter m) => String -> a -> m a 
```

IO 显然没有`MonadInterpreter`类的实例，因此出现错误。这是一种预期的行为，因为`IO`GHCI 的 monad 没有关于解释器会话的必需信息。必须设置正确的 monad 类型`runInterpreter`。

# django - 处理 wiki 标记

> ID：13775147
> 
> 赞同：-1
> 
> 时间：2012-12-08T06:30:32.207
> 
> 标签：django, django-templates

如何在 Django 模板中处理 wiki 标记？

我的 CharFields 内容如下`([email:bob@bob.com email], [http://bob.com website])`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:38:13.403

您需要使用解析 wiki 标记的东西。看看[标记模块](http://freewisdom.org/projects/python-markdown/Django)。

它看起来非常简单 - 包含`django.contrib.markup`在 settings.py 的 INSTALLED_APPS 部分中，然后将标记加载到模板中`{% load markup %}`。之后，您可以使用标记标签和过滤器。

看起来还有很多其他的选择。尝试搜索“解析 wiki 标记”而不是“处理 wiki 标记”。我遇到了这个[SO Question](https://stackoverflow.com/questions/154592/python-module-for-wiki-markup)你可能会觉得有帮助。

# ruby-on-rails - 在 ruby rake db:migrate 中显示密码失败

> ID：13775149
> 
> 赞同：1
> 
> 时间：2012-12-08T06:31:11.457
> 
> 标签：ruby-on-rails, ruby, postgresql

我在远程机器上使用带有 postgresql 的 rails。我已经根据要求编辑了 database.yml 文件。但是当我运行 rake db:migrate 时，它​​显示密码失败.. 但是相同的密码适用于 psql 命令.. 运行 rake db:migrate 时的错误是：

```
root@vdimc04 My_Postgres]# rake db:migrate --trace
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:migrate
rake aborted!
fe_sendauth: no password supplied
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `initialize'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `new'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `connect'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:326:in `initialize'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `checkout_new_connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:247:in `block (2 levels) in checkout'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block in connection'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/migration.rb:662:in `initialize'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/migration.rb:570:in `new'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/migration.rb:570:in `up'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/migration.rb:551:in `migrate'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:179:in `block (2 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:227:in `call'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:227:in `block in execute'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:222:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:222:in `execute'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:159:in `invoke_with_call_chain'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/task.rb:152:in `invoke'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:141:in `invoke_task'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:99:in `block (2 levels) in top_level'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:99:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:99:in `block in top_level'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:108:in `run_with_threads'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:93:in `top_level'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:71:in `block in run'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:158:in `standard_exception_handling'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/lib/rake/application.rb:68:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/gems/rake-10.0.2/bin/rake:37:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/bin/rake:19:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p327@global/bin/rake:19:in `<main>'
/usr/local/rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:migrate
** my database.yml file**

development:
  adapter: postgresql
  encoding: unicode
  database: db_pchamara
  pool: 5
  username: db_test_user
  password: password
  host: 192.168.1.101
  port: 5432
test:
  adapter: postgresql
  encoding: unicode
  database: db_pchamara_test
  pool: 5
  username: db_test_user
  password: password

production:
  adapter: postgresql
  encoding: unicode
  database: db_pchamara_production
  pool: 5
  username: db_test_user
  password: password 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:47:22.840

伙计们，我的问题得到了答案...

当我们使用“rails new demo”之类的 rails 命令启动新项目时，我们必须包含“--database=postgresql”。然后只有 pg gem 会进入 bundle.. 如果没有声明 pg gem 将不会进入 bundle..

我在 database.yml 文件中所做的也是正确的。那里一切都很好......当我们使用postgresql的数据库到rails时，我们必须对位于lib目录中的pg_hba.conf进行一些修改......

我在我的 ip 上对 TRUST 做了一些修改，在它之前是 md5..

我们可以同时使用 TRUST 和 md5。

```
md5- requires a passowrd to connect to database
trust- not requires a password 
```

就是这样..通常包括database.yml文件的密码。现在服务器运行没有任何错误......

**感谢所有帮助我解决这个问题的人**

# r - ggplot2 0.9.3 的异常行为

> ID：13775150
> 
> 赞同：2
> 
> 时间：2012-12-08T06:31:43.490
> 
> 标签：r, ggplot2

此代码无法按预期工作`ggplot2 0.9.3`（适用于早期版本的 ggplot2，请参见[此处](https://stackoverflow.com/a/7324644/707145)）。这个问题有解决方法吗？

```
library(ggplot2)
p <- qplot(as.factor(dose), len, data=ToothGrowth, geom = "boxplot", color = supp) + theme_bw()
p <- p + labs(x="Dose", y="Response")
p <- p + stat_summary(fun.y = mean, geom = "point", color = "blue", aes(group=supp))
p <- p + stat_summary(fun.y = mean, geom = "line", aes(group = supp))
p <- p  + theme(axis.title.x = element_text(size = 12, hjust = 0.54, vjust = 0))
p <- p  + theme(axis.title.y = element_text(size = 12, angle = 90,  vjust = 0.25))
print(p) 
```

## 编辑

这条线

```
p <- p + stat_summary(fun.y = mean, geom = "line", aes(group = supp)) 
```

产生以下警告

> geom_path：每个组仅包含一个观察值。需要调整群体审美吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:43:26.160

这种行为是 ggplot2 0.9.3 中的一个错误：[https ://github.com/hadley/ggplot2/issues/739](https://github.com/hadley/ggplot2/issues/739)

您可以通过使用 ddply 计算摘要来解决它：

```
library(plyr)
tg <- ddply(ToothGrowth, c("dose", "supp"), summarise, len = mean(len))

library(ggplot2)
ggplot(ToothGrowth, aes(x=as.factor(dose), y=len, colour=supp)) +
    geom_boxplot() +
    geom_line(data=tg, aes(group=supp)) 
```

# php - php IMAP 连接到hotmail

> ID：13775156
> 
> 赞同：0
> 
> 时间：2012-12-08T06:32:26.720
> 
> 标签：php, imap, pop3

我正在使用 imap_open 连接到我的 hotmail 帐户。现在我想像这样使用 imap_list() 检查所有文件夹的列表，如收件箱、垃圾邮件、已发送等。

```
<?php
   $mbox = imap_open("{pop3.live.com:995/pop3/ssl}", "username", "password")
     or die("can't connect: " . imap_last_error());

    $boxes = imap_list($mbox, '{pop3.live.com:995/pop3/ssl}', '*');

    print_r($boxes);
    imap_close($mbox);
 ?> 
```

但它只显示收件箱。其实我想检查垃圾文件夹中的邮件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-02T06:28:28.333

尝试

```
$username = 'username';
$password = 'password';
$server = '{imap-mail.outlook.com:993/ssl}';
$connection = imap_open($server, $username, $password);
$mailboxes = imap_list($connection, $server,'*');
print_r(imap_errors());
print_r($mailboxes);
imap_close($connection); 
```

它对我有用，希望它能帮助某人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T15:28:09.627

更改`imap_list($mbox, '{pop3.live.com:995/pop3/ssl}', '*');`为 `imap_list($mbox, '{pop3.live.com}', '*');`

不需要端口或连接协议...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T07:03:55.003

这段代码不是我自己的，因为我是从 php.net 中提取的。但我可以说它会起作用。

```
<?php

     //check for new messages 

     $mailbox = imap_open("{localhost/pop3:110}INBOX", 
             "#username#","#password#"); 

     // Check messages 
     $check = imap_check($mailbox); 
     print("<PRE>"); 
     print("Date most recent message : " . $check->Date); 
     print("<BR>"); 
     print("Connection type : " . $check->Driver); 
     print("<BR>"); 
     print("Name of the mailbox : " . $check->Mailbox); 
     print("<BR>"); 
     print("Number of messages : " . $check->Nmsgs); 
     print("<BR>"); 
     print("Number of recent messages : " . $check->Recent); 
     print("<BR>"); 
     print("</PRE>"); 

     // show headers for messages 

     $index=1; 

     $header = imap_header($mailbox, $index); 
     print("<PRE>"); 
     print("Header Date : " . $header->Date . "<BR>"); 
     print("Header To : " . $header->to) . "<BR>"; 
     print("Header From : " . $header->From . "<BR>"); 
     print("Header cc : " . $header->cc . "<BR>"); 
     print("Header ReplyTo : " . $header->ReplyTo . "<BR>"); 
     print("Header Subject : " . $header->Subject . "<BR></PRE>"); 

     print("<PRE>"); 
     print(imap_body($mailbox,$index)); 
     print("</PRE><HR>"); 

     imap_close($mailbox); 

?> 
```

希望那些对你有帮助。

# php - 非条件下的 URL 路由

> ID：13775157
> 
> 赞同：0
> 
> 时间：2012-12-08T06:32:50.733
> 
> 标签：php, routes, pyrocms

当 url 不包含某些单词时，我想调用特定模块。例如：如果 url 是`www.abc.com/articles/a`，我想正常路由它。如果 url 是`www.abc.com`，它应该调用默认模块。但是如果 url 是`www.abc.com/qw/asw`，它应该调用博客模块（控制器）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:49:17.650

您可以通过以下方式剪切并检查网址：

```
$subdir  = substr(realpath(dirname(__FILE__)), strlen(realpath($_SERVER['DOCUMENT_ROOT'])));
$tmp_array = explode('?', trim($_SERVER['REQUEST_URI']));
$uri = str_replace($subdir, '', $tmp_array[0]);
$uri = ltrim($uri, '/');
$URIParts = explode("/", $uri);

$URIPartsCount = count($URIParts);

if( $URIPartsCount>0 && in_array($URIParts[0],$pages) )
{
    $uripart = $URIParts[0];
    if( in_array($uripart,$somearray) )
    {
        $page = $uripart;
    }
    ...
    else
    {
        $page = "index";
    }
}
else
{
    $page = "index";
}

if( $URIPartsCount>1  )
{
    $todo =  $URIParts[1];
}
else
{
    $todo = "";
} 
```

**.htaccess**

```
RewriteEngine on  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule ^(.*)$ index.php?q=$1 [QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:22:21.867

我认为你这样做是倒退的。为什么不将特定的 URL 模式路由到您希望它们访问的模块？容易得多。

# php - 数据库同步或迁移工具

> ID：13775160
> 
> 赞同：11
> 
> 时间：2012-12-08T06:33:11.933
> 
> 标签：php, database, migration, sync

手动保持生产和开发数据库同步真的很痛苦。

是否有任何工具可以使两个数据库保持同步？类似于令人惊叹的[Laravel 框架迁移](http://laravel.com/docs/database/migrations)的东西？

我正在使用 MySQL 和 PHP。我到处搜索，但找不到适合这项工作的工具。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-24T11:59:29.507

你绝对应该看看[phinx](http://phinx.org/)。这是我使用 MySQL 和 PHP 执行的复杂数据库迁移步骤的示例：[https ://coderwall.com/p/v3qg2q](https://coderwall.com/p/v3qg2q)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-30T22:37:29.007

如果我没记错的话，您需要一个工具来创建数据库版本控制以跟踪架构更改。您可以使用 Cygnite 迁移命令。它使用简单，让您的工作更轻松。

供你参考-

[迁移和播种视频教程](https://www.youtube.com/watch?v=By4Sr1Ecr-U)

[数据库迁移工具](http://www.cygniteframework.com/2013/11/migrations.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-05T10:50:25.343

查看 Schematic，它旨在与 YAML 或 JSON 中的模式文件一起使用，并且可以全局安装：

[http://andrefigueira.github.io/Schematic/](http://andrefigueira.github.io/Schematic/)

它被设计为与您的 VCS 一起提交，因此您的数据库版本与您的项目提交一起存储。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T06:43:01.743

目前还不清楚你想要什么......

*   从产品到开发的一种方式？
*   数据或ddl或两者兼而有之？

看看这个线程： [如何同步开发和生产数据库](https://stackoverflow.com/questions/255905/how-to-synchronize-development-and-production-database)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T18:24:20.763

尝试使用 ruby​​rep [http://www.rubyrep.org/](http://www.rubyrep.org/)。它可以在两个数据库之间连续复制。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-11-24T02:02:37.737

**1\.** 使您的远程或生产数据库接受使用通配符或特殊 IP 地址的远程连接！通过某种 cpanel 或配置文件！

**2\.** 您可以扩展 db artisan 命令，例如“db:sync”。

**3\.** 命令代码（尚未测试）：

```
$db_local = Config::get('database.'.env('DB_CONNECTION', 'db_local')); 
$dump = "tmp.db";
exec("mysqldump --user={$db_local['username']} --password='{$db_local['password']}' --host={$db_local['host']} {$db_local['database']} --ignore-table={$db['database']}.some_table > $dump");
$db_remote = Config::get('database.'.env('DB_CONNECTION', 'db_remote')); 
exec("mysql --user={$db_remote['username']} --password='{$db_remote['password']}' --host={$db_remote['host']} {$db_remote['database']} < $dump"); 
```

我没有像通常那样添加任何功能检查。

> 例如，您可以代替命令，使用事件、cron 作业、侦听器添加一些自动化......有很多选项，但主要的逻辑部分技巧是：为您的 2 个数据库连接定义环境变量名称，并在应用程序配置数据库中.php，定义您的连接凭据等，最后使用 exec、mysqldump 和 mysql。

祝你好运

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-12-08T06:36:23.097

如果您只是希望两个数据库相同，为什么不使用 MySQL 复制，将您的生产服务器作为主服务器，将开发服务器作为从服务器。

[MySQL 复制文档](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

# actionscript-3 - 增加 Flex 3 中 Alert Box 按钮之间的间距

> ID：13775163
> 
> 赞同：1
> 
> 时间：2012-12-08T06:33:40.460
> 
> 标签：actionscript-3, apache-flex, flex3

我试图在警报框按钮（是和否）之间放置 20-30px 的间隙。但无法在 flex 中找到这样的样式点。我尝试过水平间隙和填充，但徒劳无功。

下面是我正在尝试的示例代码，这是我在浏览网站时发现的。

```
 <?xml version="1.0" encoding="utf-8"?>

<mx:Application name="Alert_style_test"
    xmlns:mx="http://www.adobe.com/2006/mxml"
    layout="vertical"
    verticalAlign="middle"
    backgroundColor="white"
    creationComplete="showAlert()">

 <!-- Used by the Alert control. -->
 <mx:String id="message">The quick brown fox jumped over the lazy dog.

  The quick brown fox jumped over the lazy dog.</mx:String>
 <mx:String id="title">The quick brown fox jumped over the lazy dog?</mx:String>

 <mx:Script>
    <![CDATA[
        import mx.controls.Alert;

        private var a:Alert;

        private function showAlert():void {
            Alert.yesLabel = "Yes";
            Alert.noLabel = "No";
            Alert.buttonWidth = 50;

            a = Alert.show(
                    message,
                    title,
                    Alert.NO | Alert.YES
                );
            /* Make the Alert form's text non-selectable. */
            a.mx_internal::alertForm.mx_internal::textField.selectable = false;
        }
    ]]>
  </mx:Script>

 <mx:Style>

    Alert{
            color : #124332;
            background-color: #ffffff;
            header-colors : #243322, #243322;
            header-height:19;
            drop-shadow-enabled: true;
            drop-shadow-color :#243322;
            corner-radius :6;
            border-style :solid;
            border-thickness: 1;
            border-color : #243322;
            footer-colors : #243322, #ffffff;
            title-style-name : "title";
            horizontal-gap:500;
            horizontal-separator-skin:white;
            }

            .title{
            font-family :Verdana;
            font-size :10;
            font-weight :bold;
            color :#ffffff;
            }

            .alertButton {
                        letterSpacing: 0;
                        fontSize: 11;
                        cornerRadius: 10;
                        fontWeight: normal;
                        textRollOverColor: white;
                        color: red;

                        horizontal-gap:-500;
                    }
 </mx:Style>

   <!-- Click to launch Alert control. -->
 <mx:Button label="Launch Alert" click="showAlert();" />

</mx:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:40:12.833

我唯一的想法是实现一个新类作为 TitleWindow 或 Panel 的子类，并添加您想要的所有功能。我知道这不是最好的解决方案，但您可以尝试一下。

![新的警报窗口](../Images/e0c8f945b74ffdfdce701e561e1c28b2.png)

以下是我的建议：

* * *

//应用

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600">

<fx:Script>
    <![CDATA[
        import mx.events.CloseEvent;

        private function onBtnClick():void
        {
            var title:String = "The quick brown fox jumped over the lazy dog?";
            var message:String = "The quick brown fox jumped over the lazy dog. The quick brown fox jumped over the lazy dog.";

            AdvancedAlert.buttonWidth = 70;
            AdvancedAlert.buttonGap = 50;
            AdvancedAlert.commonWidth = 400;

            AdvancedAlert.show(message, title, AdvancedAlert.YES | AdvancedAlert.NO | AdvancedAlert.CANCEL, this._closeHandler);
        }

        private function _closeHandler(evt:CloseEvent):void
        {
            switch (evt.detail)
            {
                case AdvancedAlert.YES:
                    trace("yes");
                    break;
                case AdvancedAlert.NO:
                    trace("no");
                    break;
                case AdvancedAlert.OK:
                    trace("ok");
                    break;
                case AdvancedAlert.CANCEL:
                    trace("cancel");
                    break;
            }
        }
    ]]>
</fx:Script>

<mx:Button click="onBtnClick()" label="Alert"/>

</mx:Application> 
```

* * *

//警报实现

```
<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
            xmlns:mx="library://ns.adobe.com/flex/mx" 
            layout="absolute" 
            width="{commonWidth}" 
            height="110" 
            styleName="titleWindow" 
            verticalScrollPolicy="off" 
            horizontalScrollPolicy="off" 
            creationComplete="onCreationComplete()" >

<fx:Style>
    @namespace mx "library://ns.adobe.com/flex/mx";

    .windowStyles {
        color: #ffffff;
    }

    .titleWindow {
        borderAlpha: 1.0;
        borderColor: #8a9faa;
        backgroundColor: #8a9faa;
        cornerRadius: 5;
    }

</fx:Style>

<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.controls.Button;
        import mx.core.FlexGlobals;
        import mx.events.CloseEvent;
        import mx.managers.PopUpManager;

        public static const YES:uint = 0x0001;
        public static const NO:uint = 0x0002;
        public static const OK:uint = 0x0004;
        public static const CANCEL:uint= 0x0008;

        [Bindable]private var message:String;

        [Bindable]public static var buttonGap:int = 20;
        public static var buttonWidth:int = 80;
        [Bindable]public static var commonWidth:int = 80;
        [Bindable]private var buttonHeight:int = 25;

        private var buttons:uint;
        private var buttonNames:ArrayCollection = new ArrayCollection();

        private function onCreationComplete():void
        {
            addButtons();
        }

        private function addButtons():void
        {
            buttonNames.removeAll();
            hbButtons.removeAllChildren();

            if ((YES & buttons) != 0)
                buttonNames.addItem("Yes");
            if ((NO & buttons) != 0)
                buttonNames.addItem("No");
            if ((OK & buttons) != 0)
                buttonNames.addItem("Ok");
            if ((CANCEL & buttons) != 0)
                buttonNames.addItem("Cancel");

            for each (var bn:String in buttonNames)
            {
                var btn:Button = new Button();
                btn.width = buttonWidth;
                btn.height = buttonHeight;
                btn.label = bn;
                btn.name = bn;

                btn.addEventListener(MouseEvent.CLICK, onBtnClick);

                hbButtons.addChild(btn);
            }
        }

        private function onBtnClick(evt:Event):void
        {
            var currentButtonName:String = (evt.currentTarget as Button).name;

            var closeEvent:CloseEvent = new CloseEvent(CloseEvent.CLOSE);

            switch (currentButtonName)
            {
                case "Yes":
                    closeEvent.detail = YES;
                    break;
                case "No":
                    closeEvent.detail = NO;
                    break;
                case "Ok":
                    closeEvent.detail = OK;
                    break;
                case "Cancel":
                    closeEvent.detail = CANCEL;
                    break;
            }

            this.dispatchEvent(closeEvent);

            PopUpManager.removePopUp(this);
        }

        public static function show(message:String = "", title:String = "", buttons:uint = 0x4, closeHandler:Function = null):void
        {
            var advancedAlert:AdvancedAlert = new AdvancedAlert();

            advancedAlert.message = message;
            advancedAlert.title = title;
            advancedAlert.buttons = buttons;

            if (closeHandler != null)
                advancedAlert.addEventListener(CloseEvent.CLOSE, closeHandler);

            PopUpManager.addPopUp(advancedAlert, Sprite(FlexGlobals.topLevelApplication), true); 
            PopUpManager.centerPopUp(advancedAlert);
        }
    ]]>
</fx:Script>

<mx:VBox id="vbMain" width="100%" height="100%">
    <mx:Text id="txtMessage" text="{message}" width="100%" height="35" color="0xffffff" selectable="false"/>
    <mx:HBox id="hbButtons" height="{buttonHeight}" width="100%" horizontalGap="{buttonGap}" horizontalAlign="center"/>
</mx:VBox>
</mx:TitleWindow> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:50:59.717

尝试这样的事情：

在警报中添加`FlexEvent.UPDATE_COMPLETE`到 alertForm：

```
a.mx_internal::alertForm.addEventListener(FlexEvent.UPDATE_COMPLETE, alertForm_updateHandler); 
```

在这个处理程序中，从原始的 alertForm`updateDisplayList`方法中复制一些东西：

```
private function alertForm_updateHandler(event:FlexEvent):void
{
    var form:UIComponent = a.mx_internal::alertForm;
    var buttons:Array = a.mx_internal::alertForm.mx_internal::buttons;
    var newX:Number;
    var newY:Number;
    var newWidth:Number;

    newWidth = buttons.length * (buttons[0].width + 120) - 120;

    newX = Math.round((form.width - newWidth) / 2);
    for (var i:int = 0; i < buttons.length; i++)
    {
        buttons[i].x = newX
        buttons[i].tabIndex = i + 1;
        newX += buttons[i].width + 120;
    }
} 
```

其中 120 是您的新差距。

希望这会很有用。

# php - json 对象中的数据如何在 ajax 帖子中传递？

> ID：13775166
> 
> 赞同：0
> 
> 时间：2012-12-08T06:34:19.980
> 
> 标签：php, jquery, ajax, json

这就是ajax调用的样子

```
 $.ajax({
      url: 'http://localhost/placeadd.php',
      dataType: "json",
      type: "POST",
  data: {
      "location": {
      "lat": -33.8669710,
      "lng": 151.1958750
      },
      "accuracy": 50,
      "name": "Daves Test!",
      "types": ["shoe_store"],
      "language": "en-AU"
      },
      success: function( data){
    console.log(data.status+"<BR>");
      },
      error: function(request, status, error){
        console.log(status+"<BR>");
      }
      })
      }) 
```

我将如何访问 php 文件中的每个元素？例如访问“lat”是否只是 $_POST."location"."lat"？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:44:50.143

```
$.ajax({
    url: 'http://localhost/placeadd.php',
    dataType: "json",
    type: "POST",
    data: {
        "location": {"lat": -33.8669710,"lng": 151.1958750},
        "accuracy": 50,
        "name": "Daves Test!",
        "types": ["shoe_store"],
        "language": "en-AU"
    },
    success: function( data){
        console.log(data.status+"<BR>");
    },
    error: function(request, status, error){
        console.log(status+"<BR>");
    }
}); 
```

在 PHP 中：

```
<?php
    $post = json_decode($_POST);
    $lat = $post['location']['lat'];
    echo $lat;
?> 
```

# c++ - pthread_create 混淆

> ID：13775169
> 
> 赞同：0
> 
> 时间：2012-12-08T06:34:36.027
> 
> 标签：c++, pthreads

在很多场合我都看到过这种情况

```
class Foo
{
    static void* ThreadFun(void* p)
    {
        Derived* args = (Derived*)p;

        //do something with args.
        //example 
        //cout << args->getname();
    }

    void function()
    {
        Base* args = new Derived();
        args->setname("test");

        pthread_t id;
        int ret = pthread_create(&id, NULL, ThreadFun, (void*) args);    
    }
} 
```

首先，那是正确的 C++ 代码吗？还是我错过了什么？我做了一些阅读，显然将指向类的指针转换为 void* 会导致信息丢失，并且在派生类上调用 getname() 可能是非法的。

如果我理解正确，他们的建议是这样的：

```
void function()
{
    Base* args = new Derived();
    args->setname("test");

    void* pargs = (Base*)malloc(sizeof(*args)); // to be freed in ThreadFun
    pargs = args;
    pthread_t id;
    int ret = pthread_create(&id, NULL, ThreadFun, pargs );    
} 
```

我真的不明白，我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T06:53:39.640

哦，哇...不，您的第二个示例泄漏了 malloc() 分配的内存，并且从评论中，如果您遵循该建议，那么`new Derived()`当您认为自己是时，您将可以在 ThreadFun 中进行分配释放 malloc() 分配。

关于将指向类的指针转换为 void* 导致信息丢失......它没有。简单明了。它失去的是编译器对该指针含义的理解。如果*您*知道它的含义，您总是可以将其转换回正确的类型并恢复其全部功能，这正是第一个示例所做的。当 ThreadFun() 函数在新线程中启动时，它将 void* 转换回其原始类型，即 Derived*。

我注意到，当您最初调用`new Derived()`分配时，您将返回指针分配给 type 的指针`Base*`。我假设`class Derived`继承自`class Base`，所以从这个角度来看，那里的赋值实际上会导致“信息丢失”，虽然它是一个类型的指针，但`Base*`你会丢失类的任何非多态行为`Derived`。但是当您在 ThreadFun() 中将其转换回其真实类型时，它会恢复其全部功能。请注意，如果您分配了一个`new Base`对象并使用它启动了新线程，并且在 ThreadFun() 中将其转换为`Derived*`，编译器会让你这样做，但你会有未定义的行为......可能会崩溃。因为（由于 pthreads 接口）您必须通过 void*，所以即使使用 C++ 样式转换，也没有类型检查安全性。因此，您可以将该 void* 转换为您想要的任何内容，编译器会允许您这样做。但当然，唯一真正有效的转换是`(Base*)`or `(Derived*)`，或者继承层次结构中它们之间的任何东西。

我还应该提到，作为 void*，您不能删除对象并运行其析构函数。要删除该对象，您需要将该指针转换回它的任何类型，以便编译器知道要调用什么析构函数。还有另一种棘手的棘手情况，您可以使用指向`Derived`类型为`Base*`... 的类的指针。如果`Base::~Base()`析构函数不是`virtual`，如果您`Derived`通过调用`delete`该`Base*`对象来删除对象，则分配将被完全解除分配，但只有`Base`部分对象的析构函数将运行.....除非析构函数是用关键字定义的，否则即使只有一个对象`virtual`，您也可以删除它。我让自己完全不清楚了吗？`Derived``Base*`

# python - Python Tkinker - 将 jpg 显示为类方法不起作用

> ID：13775175
> 
> 赞同：1
> 
> 时间：2012-12-08T06:35:49.310
> 
> 标签：python, tkinter

我正在尝试将 jpg 图像显示为我正在构建的 GUI 事物的背景。

我可以用一种方法让它工作：

```
from Tkinter import *
from PIL import Image, ImageTk

class MakeGUI(object):
    master = None
    w = None

    def __init__(self):
        self.canvasSizeY = 400 #height
        self.canvasSizeX = 640 #width

    def setupCanvas(self):
        """
        preps the canvas for drawing.
        """
        self.master = Tk()
        self.w = Canvas(self.master, width=self.canvasSizeX, height=self.canvasSizeY)
        self.w.config(bg='white')
        image = Image.open("background.jpg")
        photo = ImageTk.PhotoImage(image)
        self.w.create_image(0,0, image=photo, anchor=NW)
        self.w.pack()
        mainloop()

def main():
    makeGUI = MakeGUI()
    makeGUI.setupCanvas()

if __name__ == '__main__':
    main() 
```

但是当我尝试用一​​种方法制作画布，并在另一种方法中显示画布时，它不会显示 jpg（当我一直在测试时，我已经使用这种方法创建并显示了文本和矩形）：

```
from Tkinter import *
from PIL import Image, ImageTk

class MakeGUI(object):
    master = None
    w = None

    def __init__(self):
        self.canvasSizeY = 400 #height
        self.canvasSizeX = 640 #width

    def setupCanvas(self):
        """
        preps the canvas for drawing.
        """
        self.master = Tk()
        self.w = Canvas(self.master, width=self.canvasSizeX, height=self.canvasSizeY)
        self.w.config(bg='white')
        image = Image.open("background.jpg")
        photo = ImageTk.PhotoImage(image)
        self.w.create_image(0,0, image=photo, anchor=NW)

    def showImage(self):
        """
       pushes the image to the screen
       """
        self.w.pack()
        self.w.mainloop()

def main():
    makeGUI = MakeGUI()
    makeGUI.setupCanvas()

if __name__ == '__main__':
    main() 
```

我想在我进行一些编辑时动态地使用 GUI 来显示一些文本，所以我有兴趣在我深入构建之前了解我做错了什么，以防它成为一个阻碍......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:47:22.230

最明显的问题是，在第二种情况下，您永远不会调用`showImage`. 即使您确实调用了该函数，您的图像也可能不会出现。如果没有对它们的引用，图像将被垃圾收集。似乎有一个参考，因为您将它添加到画布，但这还不够。

您需要执行以下操作：

```
self.photo = ImageTk.PhotoImage(image) 
```

最后，我建议您拨打电话`mainloop`out of `showImage`。`mainloop`必须始终只调用一次，因此最常见的是程序中的最后一行代码，或者主函数中的最后一行代码。

制作 Tkinter 应用程序的一种更常见的方法是子类化`Tk`对象或`Frame`对象，而不是让您的主应用程序成为通用对象。例如：

```
class MyApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        ...
        self.setupCanvas(...)
        ...
if __name__ == "__main__":
    app = MyApp()
    app.mainloop() 
```

# php - jQuery：跨域问题

> ID：13775178
> 
> 赞同：0
> 
> 时间：2012-12-08T06:36:18.990
> 
> 标签：php, jquery, ajax

我正在使用**jsonp**，除了某些功能外，一切都可以完美地跨域运行。例如：

```
beforeSend:function(){
     errobj.show();
    errobj.html('<b>Loading...<\/b>');
  }, 
```

如果我跨域（子域）使用它，它永远不会显示加载..还有一些动画和显示和隐藏的东西永远不会起作用。

有人对跨域 ajax/jquery 问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:02:36.333

出于安全原因，浏览器倾向于单方面阻止对服务于当前页面的域之外的 URL 进行的任何调用。使用[JSONP](http://json-p.org/)，可以跨域请求内容的就是`<script>`标签。也检查这些链接
[处理跨域 Ajax 调用的方法](http://www.devproconnections.com/article/aspnet2/ajax-cross-domain-142169)
[JQuery ajax 跨域](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)

**[编辑]**

`beforesend()`in `$(ajax)`for datatype也存在问题`jsonp`。跨域 JSONP 请求不使用 XMLHTTPRequest，因此事件流不同。[beforesend() 未在 JSONP 中触发](https://stackoverflow.com/questions/4663406/jquery-how-to-enable-beforesend-for-ajaxdatatypejsonp-is-there-a)

# java - 在jsf项目中使用spring security taglibs需要什么配置和lib？

> ID：13775181
> 
> 赞同：2
> 
> 时间：2012-12-08T06:36:40.487
> 
> 标签：java, spring, jsf, spring-security, facelets

我想在我的jsf项目中使用spring security taglibs，所以我对项目进行了以下更改，但我得到了这个异常：

> ```
> Error occurred during deployment: Exception while loading the app : 
> ```
> 
> java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: 源文档: jar:file:/C:/Users/omid4 /Desktop/omidircs/final/omidircs/omidircs/build/web/WEB-iNF/lib/org.springframework.faces-2.3.1.RELEASE.jar!/META-INF/faces-config.xml 原因：无法创建>'org.springframework.faces.webflow.FlowActionListener'的新实例：java.lang.reflect.InvocationTargetException。

我在这里做错了什么？我有其他配置吗？我用 ：

> netbeans 7.1.2 --spring mvc 3.0.6--spring security 3.1.1--glassfish 3.1.2 和 jsf 2.1

**springsecurity.taglib.xml：**

```
 <!DOCTYPE facelet-taglib PUBLIC
  "-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
  "http://java.sun.com/dtd/facelet-taglib_1_0.dtd">
<facelet-taglib>
    <namespace>http://www.springframework.org/security/tags</namespace>
    <tag>
        <tag-name>authorize</tag-name>
        <handler-class>org.springframework.faces.security.FaceletsAuthorizeTagHandler</handler-class>
    </tag>
    <function>
        <function-name>areAllGranted</function-name>
        <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>
        <function-signature>boolean areAllGranted(java.lang.String)</function-signature>
    </function>
    <function>
        <function-name>areAnyGranted</function-name>
        <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>
        <function-signature>boolean areAnyGranted(java.lang.String)</function-signature>
    </function>
    <function>
        <function-name>areNotGranted</function-name>
        <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>
        <function-signature>boolean areNotGranted(java.lang.String)</function-signature>
    </function>
    <function>
        <function-name>isAllowed</function-name>
        <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>
        <function-signature>boolean isAllowed(java.lang.String, java.lang.String)</function-signature>
    </function>
</facelet-taglib> 
```

**网页.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<!--  /========================jsf config=============================/-->

  <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>#{sessionManager.theme}</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
     <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>/index.xhtml</welcome-file>
    </welcome-file-list>

  <!--  /========================spring config=============================/-->  

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext.xml
            /WEB-INF/spring-security.xml
        </param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
        <param-value>/WEB-INF/springsecurity.taglib.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
    <listener-class>
      org.springframework.security.web.session.HttpSessionEventPublisher
    </listener-class>
  </listener>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>
            org.springframework.web.filter.DelegatingFilterProxy
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>

</web-app> 
```

**我的页面.xhtml：**

```
xmlns:sec="http://www.springframework.org/security/tags"
.
.
.
<sec:authorize access="ROLE_SUPERADMIN">
      <h:outputText value="test" />                          
</sec:authorize> 
```

**我的库：**

```
 org.springframework.cglib-2.2   3.0.6.RELEASE
    org.springframework.aop 3.0.6.RELEASE
    org.springframework.asm 3.0.6.RELEASE
    org.springframework.aspects 3.0.6.RELEASE
    org.springframework.beans   3.0.6.RELEASE
    org.springframework.context 3.0.6.RELEASE
    org.springframework.context.support 3.0.6.RELEASE
    org.springframework.core    3.0.6.RELEASE
    org.springframework.expression  3.0.6.RELEASE
    org.springframework.instrument 3.0.6.RELEASE
    org.springframework.expression  3.0.6.RELEASE
    org.springframework.jdbc    3.0.6.RELEASE
    org.springframework.jms 3.0.6.RELEASE
    org.springframework.orm 3.0.6.RELEASE
    org.springframework.oxm 3.0.6.RELEASE
    org.springframework.test    3.0.6.RELEASE
    org.springframework.tx  3.0.6.RELEASE
    org.springframework.web 3.0.6.RELEASE
    org.springframework.webmvc-portlet  3.0.6.RELEASE
    org.springframework.webmvc  3.0.6.RELEASE
    org.springframework.struts  3.0.6.RELEASE
    commons-logging-1.1.1
    jsf 2.1-jsf-api
    jsf 2.1 -jsf-impl
    jstl 1.1-standard
    jstl 1.1-jstl
    spring-security-ldap-3.1.1.RELEASE.jar
    spring-security-config-3.1.1.RELEASE.jar
    spring-security-core-3.1.1.RELEASE.jar
    spring-security-taglibs-3.1.1.RELEASE.jar
    spring-security-web-3.1.1.RELEASE.jar
    org.springframework.webflow-2.0.3.jar
    org.springframework.binding-2.0.3.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:45:59.177

我通过删除库解决了这个问题：org.springframework.webflow-2.0.3.jar org.springframework.binding-2.0.3.jar

[并从http://www.springsource.org/download/community?project=Spring%2520Web%2520Flow](http://www.springsource.org/download/community?project=Spring%2520Web%2520Flow)下载 org.springframework.webflow-2.3.1 和依赖项 并解决异常

# javascript - 如何在页面加载后添加的脚本中处理 document.write？

> ID：13775185
> 
> 赞同：10
> 
> 时间：2012-12-08T06:37:14.163
> 
> 标签：javascript, html, dom

我处于需要动态添加广告脚本标签的情况。

广告本身只是一个简单的脚本标签，其 src 属性指向广告服务器。然后运行的实际代码是一个两步的考验：

首先，有一个 document.write()，像这样：

```
document.write("<iframe id='lctopti2017041855' src='about:blank' style='visibility: hidden;' onload=\"this.style.visibility='visible';\" style='border: 0px; overflow-x: hidden;overflow-y: hidden; width: 100px; height: 400px;' width='100' height='400' scrolling='no' frameborder='0' allowtransparency='true'></iframe>"); 
```

接下来，有一个：

```
document.getElementById('lctopti2017041855').src = 'http://www.reallylongurl.com/blah.php?whatever=whatever' 
```

现在，似乎在页面加载时运行 document.write() 很好；但我发现，如果我采用相同的初始标记并将其弹出到 $('#somediv').prepend() 中，例如，它将覆盖整个页面。

有什么办法可以解决这个问题吗？iframe id 和后续的广告 url 始终是动态的，并且在初始脚本标记从广告服务器请求 javascript 时生成。如果初始脚本标签包含我需要的所有信息，我可以简单地用 $('#anywhere').prepend() 或其他东西切换 document.write。我该如何解决这个问题，而不是从字面上刮掉初始脚本加载的结果然后处理结果？

有没有办法阻止 document.write() 覆盖页面，而只写它被调用的地方？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-08T07:03:02.363

这是我之前成功完成的事情

```
var oldWrite = document.write;
var wHtml="";
document.write=function(str) {
  wHtml+=str;
}
// load adcode
$('#somediv').prepend(wHtml);
// optionally reset
document.write = oldWrite; 
```

如果广告代码也使用 document.write 加载脚本，这可能会失败。在这种情况下，请使用 iFrame，因为它将包含他们可以做的所有废话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:23:43.493

如果文档被加载，`document.write`将刷新整个页面。所以它不应该放在一个将在文档加载后调用的函数中。

如果您想要更多操作，我认为您可以更改为其他方法。

[http://javascript.info/tutorial/document-write](http://javascript.info/tutorial/document-write)一些关于`document.write`这里的信息。希望它会有所帮助。

# android - 安卓：横向布局

> ID：13775187
> 
> 赞同：0
> 
> 时间：2012-12-08T06:37:20.903
> 
> 标签：android, layout, landscape, interstitial

我对以下布局有一些问题。布局非常简单，只需使用连续 3 个按钮的表格布局（视图 = 横向）。但是，预览屏幕中有一个“java.lang.NullPointerException”。我已经测试并发现它是由广告部分引起的，即。如果我删除广告部分，这个 java.lang.NullPointerException 将消失。

我的问题是：

1.  广告不支持横向吗？或者如何修改下面的代码？

2.  我也会采用插页式广告。interstitialAd 也支持横向吗？

## 编码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"  
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:stretchColumns="*" 
    android:background="@drawable/bgd2" >

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_weight="0.5"        
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/buttonA"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_margin="2dp"
            android:layout_span="4"
            android:background="@drawable/green_btn"
            android:onClick="buttonA_click"
            android:text="1,2,3"
            android:textSize="20dp" />

            <Button
                android:id="@+id/buttonB"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:layout_margin="2dp"
                android:layout_span="4"
                android:background="@drawable/blue_btn"
                android:onClick="button_Email_click"
                android:text="abc!"
                android:textSize="20dp" />        

        <Button
            android:id="@+id/buttonC"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_margin="2dp"
            android:layout_span="4"
            android:background="@drawable/orange_btn"
            android:onClick="buttonC_click"
            android:padding="2dp"
            android:text="Pictures!"
            android:textSize="20dp" />                                   

    </TableRow>

<com.google.ads.AdView 
      android:id="@+id/adView"                         
      android:layout_width="wrap_content"                         
      android:layout_height="50dp"  
      android:background="@android:color/black"
      android:text="Ads Unavailable"
      android:textStyle="bold|italic"                          
      ads:adUnitId="abc123"                        
      ads:adSize="BANNER"     
      ads:refreshInterval="15000"                                                 
      ads:loadAdOnCreate="true"/>    

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:06:54.087

## 只使用

安卓：screenOrientation="风景"

# windows-7 - Windows 7中的自定义凭据提供程序？

> ID：13775188
> 
> 赞同：0
> 
> 时间：2012-12-08T06:37:25.510
> 
> 标签：windows-7

我完成了在 windows xp 中开发 msgina。

现在我想在 Windows 7 中进行更改。但是那里没有 gina.dll。

凭据提供程序在 win7 中完成这项工作。

那么什么是凭证提供者。它的 adll 或 api。

建议一些链接来解决我的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:07:20.600

Winlogon 和凭据提供程序 [http://msdn.microsoft.com/en-us/library/windows/desktop/bb648647(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb648647(v=vs.85).aspx)

# java - 使用 ImageIO 发送图像流？

> ID：13775189
> 
> 赞同：5
> 
> 时间：2012-12-08T06:37:32.720
> 
> 标签：java, image, networking, streaming

我设置了一个 ServerSocket 和一个 Socket，因此 ServerSocket 使用 ImageIO.write(....) 发送图像流，并且 Socket 尝试读取它们并用它们更新 JFrame。所以我想知道 ImageIO 是否可以检测到图像的结尾。（我完全不知道JPEG格式，所以我测试了它）

显然不是。

在服务器端，我通过在循环中使用 ImageIO.write(...) 连续发送图像，中间有一些睡眠。在客户端，ImageIO 读取第一个图像没有问题，但在下一个它返回 null。这令人困惑。我期待它要么阻止读取第一张图像（因为它认为下一张图像仍然是同一图像的一部分），要么成功读取所有图像（因为它有效）。到底是怎么回事？看起来 ImageIO 检测到了第一个图像的结尾，但没有检测到第二个图像的结尾。（顺便说一下，图像彼此大致相似）有没有一种简单的方法可以像这样流式传输图像，还是我必须制作自己的机制，将字节读入缓冲区，直到它达到指定的字节或序列字节，此时它从缓冲区中读取图像？

这是我的服务器代码的有用部分：

```
 while(true){
            Socket sock=s.accept();
            System.out.println("Connection");
            OutputStream out=sock.getOutputStream();
            while(!socket.isClosed()){
                BufferedImage img=//get image
                ImageIO.write(img, "jpg", out);
                Thread.sleep(100);
            }
            System.out.println("Closed");
        } 
```

我的客户代码：

```
 Socket s=new Socket(InetAddress.getByName("localhost"), 1998);
        InputStream in=s.getInputStream();
        while(!s.isClosed()){
            BufferedImage img=ImageIO.read(in);
            if(img==null)//this is what happens on the SECOND image
            else // do something useful with the image
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T12:18:59.537

`ImageIO.read(InputStream)`在内部创建一个`ImageInputStream`和调用`read(ImageInputStream)`。后一种方法被记录为在读取图像完成后关闭流。

因此，理论上，您可以只获取`ImageReader`，创建`ImageInputStream`自己，然后反复`ImageReader`阅读。`ImageInputStream`

除了，它似乎`ImageInputStream`被设计为只处理一个图像（可能包含也可能不包含多个帧）。如果您`ImageReader.read(0)`多次调用，它每次都会倒回到（缓存的）流数据的开头，一遍又一遍地为您提供相同的图像。 `ImageReader.read(1)`将在多帧图像中寻找第二帧，这对于 JPEG 当然没有意义。

所以，也许我们可以创建一个 ImageInputStream，让 ImageReader 从中读取，然后创建一个新的 ImageInputStream 来处理流中的后续图像数据，对吧？除此之外，它似乎`ImageInputStream`进行了各种缓存、预读和回送，这使得知道包装的 InputStream 的读取位置非常困难。下一个 ImageInputStream 将从某处开始读取数据，但它不像我们预期的那样位于第一个图像数据的末尾。

确定基础流位置的唯一方法是使用`mark`and `reset`。由于图像可能很大，您可能需要 a`BufferedInputStream`来允许较大的`readLimit`.

这对我有用：

```
private static final int MAX_IMAGE_SIZE = 50 * 1024 * 1024;

static void readImages(InputStream stream)
throws IOException {
    stream = new BufferedInputStream(stream);

    while (true) {
        stream.mark(MAX_IMAGE_SIZE);

        ImageInputStream imgStream =
            ImageIO.createImageInputStream(stream);

        Iterator<ImageReader> i = 
            ImageIO.getImageReaders(imgStream);
        if (!i.hasNext()) {
            logger.log(Level.FINE, "No ImageReaders found, exiting.");
            break;
        }

        ImageReader reader = i.next();
        reader.setInput(imgStream);

        BufferedImage image = reader.read(0);
        if (image == null) {
            logger.log(Level.FINE, "No more images to read, exiting.");
            break;
        }

        logger.log(Level.INFO,
            "Read {0,number}\u00d7{1,number} image",
            new Object[] { image.getWidth(), image.getHeight() });

        long bytesRead = imgStream.getStreamPosition();

        stream.reset();
        stream.skip(bytesRead);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T19:08:33.430

我遇到了同样的问题并找到了这篇文章。@VGR 的评论启发了我深入研究这个问题，最终我意识到 ImageIO 无法处理同一流中的一组图像。所以我创建了解决方案（在 Scala 中，抱歉）并写了一些详细信息和内部信息的博客文章。

[http://blog.animatron.com/post/80779366767/a-fix-for-imageio-making-animated-gifs-from-streaming](http://blog.animatron.com/post/80779366767/a-fix-for-imageio-making-animated-gifs-from-streaming)

也许它也会帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:19:55.110

虽然可能不是执行此操作的最佳方法，但以下代码可以帮助您解决遇到的问题。正如先前的回答所指出的，ImageIO 不会在图像末尾离开流，这将找到通往下一个图像的方式。

```
int imageCount = in.read();
for (int i = 0; i < imageCount; i ++){
    BufferedImage img = ImageIO.read(in);
    while (img == null){img = ImageIO.read(in);}
    //Do what ever with img
} 
```

# sql - 如何在我的数据库设计中包含这些要求？

> ID：13775196
> 
> 赞同：0
> 
> 时间：2012-12-08T06:38:34.393
> 
> 标签：sql, database-design

我正在为我的公司开发一个 Intranet 应用程序。公司结构复杂，业务条线多、部门多、事业部多、单位多、集团多。我必须照顾所有这些事情。有些员工在部门级别工作，有些员工在单位级别工作，等等。现在的问题在于数据库设计。我对如何设计数据库感到困惑。一开始，我决定设计如下：

```
Employees: Username, Name, Title, OrgCode
Departments: OrgCode, Name
Divisions: OrgCode, Name
Units: OrgCode, Name 
```

但问题正如我之前所说，一些员工在部门下工作，那么如何在所有这些表之间建立关系。是否可以将员工表中的 OrgCode 作为 Departments、Divisions 和 Units 表中 OrgCode 的外键？

**你能推荐我如何设计它吗？**

**更新：** @wizzardz 提供了一个不错的数据库设计。我现在需要的是有一个适合这个数据库设计的数据示例 这是我在数据库中使用的一组数据：让我们假设我们有 Employee 具有以下信息： 用户名：JohnA 姓名：John 职务：工程师组织代码：AA

假设我们有部门 AA，我将如何将这些数据分配到数据库设计中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T07:23:06.567

你可以做这样的设计

与其为 Departments、Divisions 等使用单独的表，不如尝试将它们存储在一个带有 TypeId 的表中以区分 Departments、Divisions 等。

你能试试这样的设计吗

![在此处输入图像描述](../Images/8b32a1671b6ad69bc6636b4edb0d58f7.png)

在级别表中，您需要输入“部门、部门”、组等值（通过将其保存在单独的表中，您可以处理组织未来添加的任何新级别。）

在 OrganisationLevels 表中，您需要存储部门名称、部门名称、组名等。

Employee 表具有与表组织级别的外部键引用，它将存储员工在组织中工作的级别。

如果您想存储特定员工的工作历史/有可能员工可以从一个级别移动到另一个级别，我建议您采用这种设计

![在此处输入图像描述](../Images/88e151c5e233db1096fc278bf0cd10d6.png)

设计样本数据

**等级**

```
 Id  LevelType  
 1    Department
 2    Division
 3    Group 
```

**组织级别**

```
Id Name LevelId Parent*(Give a proper name to this column)*
13  AA    1       NULL
.
.
21  B     2        13 (This column refer to the Id of department it belongs to.) 
```

**雇员**

```
Id UserName Name   Title 
 110  JohnA    John   Engineer 
```

**员工工作详情**

```
Id  EmployeeId OrganisationLevelId StartDate  EndDate IsActive
271    110           13            20/09/2011   NULL     true 
```

***员工表中的 OrgCode 可以删除，因为我认为这是该组织员工的员工代码。***

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:52:43.727

```
Employees: Username, Name, Title, OrgCode
Departments: OrgCode, Name
Divisions: OrgCode, Name
Units: OrgCode, Name 
```

对于上面提到的数据库设计，还有一个名为 Org 的表，其中包含 OrgCode 和另一列作为类型​​（我们提供关于它是哪种类型的 org 的见解，即 Departments、Divisions 和 Units）

那么您可以让员工表的 OrgCode 引用 Org 表的 OrgCode（父子关系）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T14:25:25.573

我建议你学习分析和设计之间的区别。当您设计数据库时，您正在发明将影响数据存储和检索方式的表、列和约束。您关心更新和查询的难易程度，包括您稍后将了解的操作。

When you analyze the data requirements, you aren't engaged in inventing things, you are engaged in discovering things. And the things you are discovering are things about the "real world" the subject matter is supposed to represent. You break the subject matter down into "entities" and relationships among those entities. Then you relate every value stored in the database to an instance of an attribute, and every attribute to some aspect of either an entity or a relationship. This results in a conceptual model.

In your case, the relationships between employees, departments, units, etc. sound quite complex. It's worth quite a bit of effort to come up with a model that reflects this complex reality accurately.

一旦你有了一个好的概念模型，你就可以创建充分代表概念模型的 SQL 表、列和约束。这涉及可以学习的设计技能。但是，如果你有一个糟糕的概念模型，那么无论你在设计方面多么出色，你都注定要失败。

# sql-server - 如何使用 NEW QUERY 忽略 SQL Server 中的空列

> ID：13775198
> 
> 赞同：1
> 
> 时间：2012-12-08T06:38:44.370
> 
> 标签：sql-server

如何使用 NEW QUERY 忽略 SQL Server 中的空列

样品表：

表名：**项目**

```
Name     item1     item2     item3     item4     item5
------------------------------------------------------
Adan     pen       ball      eraser    paper     bag
Bea      pen                                                       
Cathy              ball      eraser                      
Dan                                    paper            
Eva      pen                 eraser 
```

设想：

我想选择`Name`并忽略空列。

SAMPLE1：我选择`Name=Dan`

结果：

```
Name   item4
------------
Dan    paper 
```

SAMPLE2：我要选择`Name=Eva`

结果：

```
Name   item1   item3
--------------------
Eva    pen     eraser 
```

SAMPLE3：我要选择`Name=Cathy`

结果：

```
Name   item2   item3
------------------------
Cathy  ball    eraser 
```

SAMPLE4：我要选择`Name=Adan`

结果：

```
Name     item1     item2     item3     item4     item5
------------------------------------------------------
Adan     pen       ball      eraser    paper     bag 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:24:21.877

正如评论中所提到的，根据您将来需要用它做什么，以不同的方式设计您的数据库可能会更好。

但是，您可以动态创建一个 sql 查询来获取您正在寻找的输出。我正在创建一个临时表 #T 来模拟您的示例表。

```
-- create sample table
create table #T (Name varchar(50), Item1 varchar(50), Item2 varchar(50), Item3 varchar(50), Item4 varchar(50), Item5 varchar(50));
insert #T values('Adan',  'pen', 'ball', 'eraser', 'paper', 'bag');
insert #T values('Bea',   'pen', '',     '',       '',      '');                                                      
insert #T values('Cathy', '',    'ball', 'eraser', '',      '');                      
insert #T values('Dan',   '',    '',     '',       'paper', '');           
insert #T values('Eva',   'pen', '',     'eraser', '',      '');

-- query parameter
declare @Name varchar(50);
set @Name = 'dan';

-- create dynamic query
declare @sql varchar(MAX);
set @sql = 'select Name, '; 
select
    @sql = @sql +
        (case when isnull(Item1, '') <> '' then 'Item1, ' else '' end) + 
        (case when isnull(Item2, '') <> '' then 'Item2, ' else '' end) + 
        (case when isnull(Item3, '') <> '' then 'Item3, ' else '' end) + 
        (case when isnull(Item4, '') <> '' then 'Item4, ' else '' end) + 
        (case when isnull(Item5, '') <> '' then 'Item5, ' else '' end) 
from #T 
where Name = @Name;

set @sql = left(@sql, len(@sql)-1) + ' from #T where Name = ''' + @Name + ''';';

-- run dynamic query
exec (@sql) 
```

# jakarta-ee - Maven项目的Tomcat Netbeans启动失败

> ID：13775201
> 
> 赞同：0
> 
> 时间：2012-12-08T06:39:31.220
> 
> 标签：jakarta-ee, maven, netbeans

当我第一次部署该项目时，它运行良好。但是在重新部署项目后，tomcat 服务器出现故障。我们的项目是一个带有 Hibernate ORM 和 Maven 构建管理器的 struts2 项目。

在 /usr/bin/mvn 中添加了以下几行，但没有奏效

```
export MAVEN_OPTS=-Xmx512M -XX:MaxPermSize=512M 
```

Servers -> Tomcat7.0 中的 VM 选项是

```
-Xms512m -Xmx1024m -XX:NewSize=256m -XX:MaxNewSize=512m -XX:PermSize=256m -XX:MaxPermSize=512m 
```

以下是在日志中观察到的错误消息。

```
[war:war] 
Packaging webapp 
Assembling webapp [webapps-main] in [/home/anand/test_gs_code/generalsentiment-webapps/webapps-main/target/webapps-main-SNAPSHOT] 
Processing war project 
Copying webapp resources [/home/anand/test_gs_code/generalsentiment-webapps/webapps-main/src/main/webapp] 
Webapp assembled in [11706 msecs] 
Building war: /home/anand/test_gs_code/generalsentiment-webapps/webapps-main/target/webapps-main-SNAPSHOT.war 
WEB-INF/web.xml already added, skipping 
------------------------------------------------------------------------ 
BUILD SUCCESS 
------------------------------------------------------------------------ 
Total time: 39.674s 
Finished at: Fri Dec 07 20:01:00 IST 2012 
Final Memory: 32M/175M 
------------------------------------------------------------------------ 
NetBeans: Deploying on Apache Tomcat 7.0.22.0 
profile mode: false 
debug mode: true 
force redeploy: true 
Starting Tomcat process... 
Waiting for Tomcat... 
Starting of Tomcat failed. 
Deployment error: Starting of Tomcat failed. 
See the server log for details. 
at org.netbeans.modules.j2ee.deployment.devmodules.api.Deployment.deploy(Deployment.java:230) 
at org.netbeans.modules.maven.j2ee.ExecutionChecker.performDeploy(ExecutionChecker.java:179) 
at org.netbeans.modules.maven.j2ee.ExecutionChecker.executionResult(ExecutionChecker.java:131) 
at org.netbeans.modules.maven.execute.MavenCommandLineExecutor.run(MavenCommandLineExecutor.java:211) 
at org.netbeans.core.execution.RunClassThread.run(RunClassThread.java:153) 
```

卡特琳娜原木 -

```
Dec 09, 2012 9:59:58 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
Dec 09, 2012 9:59:59 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8088"]
Dec 09, 2012 9:59:59 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Dec 09, 2012 9:59:59 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 759 ms
Dec 09, 2012 9:59:59 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Dec 09, 2012 9:59:59 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.22
Dec 09, 2012 9:59:59 AM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor manager.xml from /home/anand/.netbeans/7.1.2/apache-tomcat-7.0.22.0_base/conf/Catalina/localhost
Dec 09, 2012 9:59:59 AM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor ROOT.xml from /home/anand/.netbeans/7.1.2/apache-tomcat-7.0.22.0_base/conf/Catalina/localhost
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core_rt is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/core is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt_rt is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/fmt is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/functions is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/permittedTaglibs is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/scriptfree is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/sql_rt is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/sql is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/sql is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/xml_rt is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/xml is already defined
Dec 09, 2012 10:00:00 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jsp/jstl/xml is already defined
Dec 09, 2012 10:00:00 AM com.generalsentiment.management.listeners.HibernateSessionListener contextInitialized
INFO: Initiating: Hibernate session listener.
Dec 09, 2012 10:00:00 AM com.generalsentiment.util.HibernateUtil getSessionFactory
INFO: Initiating: Hibernate session factory creator.
Dec 09, 2012 10:00:04 AM com.generalsentiment.management.listeners.QuartzServlet contextInitialized
INFO: THE APPLICATION STARTED
Dec 09, 2012 10:00:05 AM com.generalsentiment.management.listeners.QuartzServlet contextInitialized
INFO: ------- Initialization Complete --------
Dec 09, 2012 10:00:05 AM com.generalsentiment.management.listeners.QuartzServlet contextInitialized
INFO: ------- Scheduling Jobs ----------------
Dec 09, 2012 10:00:05 AM com.generalsentiment.management.listeners.QuartzServlet contextInitialized
INFO: ------- Starting Scheduler ----------------
Dec 09, 2012 10:00:05 AM com.generalsentiment.management.listeners.QuartzServlet contextInitialized
INFO: ------- Started Scheduler -----------------
Dec 09, 2012 10:00:05 AM com.generalsentiment.management.listeners.QuartzServlet contextInitialized
INFO: Executed 0 jobs.
Dec 09, 2012 10:00:07 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8088"]
Dec 09, 2012 10:00:07 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Dec 09, 2012 10:00:07 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 8145 ms 
```

服务器日志

```
Dec 09, 2012 10:00:08 AM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
    at org.apache.catalina.core.DefaultInstanceManager.processAnnotations(DefaultInstanceManager.java:458)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:146)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:139)
    at org.apache.jasper.runtime.TagHandlerPool.get(TagHandlerPool.java:120)
    at org.apache.jsp.jsp.base.static_.mvr.index_jsp._jspx_meth_gs_005ftext_005f0(index_jsp.java:444)
    at org.apache.jsp.jsp.base.static_.mvr.index_jsp._jspService(index_jsp.java:109)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:88)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.apache.struts2.dispatcher.ServletDispatcherResult.doExecute(ServletDispatcherResult.java:157)
    at org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:373)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:277)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.generalsentiment.management.filters.PersistenceSessionFilter.doFilter(PersistenceSessionFilter.java:44)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.generalsentiment.management.filters.DisableUrlSessionFilter.doFilter(DisableUrlSessionFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Dec 09, 2012 10:00:08 AM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
    at org.apache.catalina.core.DefaultInstanceManager.processAnnotations(DefaultInstanceManager.java:458)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:146)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:139)
    at org.apache.jasper.runtime.TagHandlerPool.get(TagHandlerPool.java:120)
    at org.apache.jsp.jsp.base.static_.mvr.index_jsp._jspx_meth_c_005fimport_005f2(index_jsp.java:927)
    at org.apache.jsp.jsp.base.static_.mvr.index_jsp._jspx_meth_gs_005felse_005f0(index_jsp.java:881)
    at org.apache.jsp.jsp.base.static_.mvr.index_jsp._jspService(index_jsp.java:221)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:88)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.apache.struts2.dispatcher.ServletDispatcherResult.doExecute(ServletDispatcherResult.java:157)
    at org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:373)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:277)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.generalsentiment.management.filters.PersistenceSessionFilter.doFilter(PersistenceSessionFilter.java:44)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.generalsentiment.management.filters.DisableUrlSessionFilter.doFilter(DisableUrlSessionFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

# ruby - heroku 收到应用程序错误。没有网络进程

> ID：13775202
> 
> 赞同：1
> 
> 时间：2012-12-08T06:39:45.693
> 
> 标签：ruby, git, heroku

**我在我的heroku服务器上遇到了这个问题**

at=error code=H14 desc="没有运行 Web 进程"

**我试图跑**

heroku ps：规模网络= 1

**但收到此错误**

扩展 Web 进程...失败！没有网络这样的类型

heroku ps:restart web.1 --app dashboardaudi88 正在重新启动 web.1 进程...完成

**这是heroku日志**

```
heroku logs
2012-12-08T21:14:46+00:00 app[web.1]:   -d, [--database=DATABASE]      # Preconfigure for selected database (options:                     mysql/oracle/postgresql/sqlite3/frontbase/ibm_db/sqlserver/jdbcmysql/jdbcsqlite3/jdbcpostgresql/jdbc)
2012-12-08T21:14:46+00:00 app[web.1]:       [--dev]                    # Setup the application with Gemfile pointing to your Rails checkout
2012-12-08T21:14:46+00:00 app[web.1]:   rails new APP_PATH [options]
2012-12-08T21:14:46+00:00 app[web.1]:                                  # Default: /usr/local/bin/ruby
2012-12-08T21:14:46+00:00 app[web.1]:   -m, [--template=TEMPLATE]      # Path to an application template (can be a filesystem path or URL)
2012-12-08T21:14:46+00:00 app[web.1]:   -f, [--force]    # Overwrite files that already exist
2012-12-08T21:14:46+00:00 app[web.1]:   -v, [--version]  # Show Rails version number and quit
2012-12-08T21:14:46+00:00 app[web.1]:   -j, [--javascript=JAVASCRIPT]  # Preconfigure for selected JavaScript library
2012-12-08T21:14:46+00:00 app[web.1]:       [--old-style-hash]         # Force using old style hash (:foo => 'bar') on Ruby >= 1.9
2012-12-08T21:14:46+00:00 app[web.1]: 
2012-12-08T21:14:46+00:00 app[web.1]: Description:
2012-12-08T21:14:46+00:00 app[web.1]:   -b, [--builder=BUILDER]        # Path to a application builder (can be a filesystem path or URL)
2012-12-08T21:14:46+00:00 app[web.1]:                                  # Default: sqlite3
2012-12-08T21:14:46+00:00 app[web.1]:       [--edge]                   # Setup the application with Gemfile pointing to Rails repository
2012-12-08T21:14:46+00:00 app[web.1]:   -q, [--quiet]    # Suppress status output
2012-12-08T21:14:46+00:00 app[web.1]:   -h, [--help]     # Show this help message and quit
2012-12-08T21:14:46+00:00 app[web.1]: 
2012-12-08T21:14:46+00:00 app[web.1
]: Options:
2012-12-08T21:14:46+00:00 app[web.1]:   -r, [--ruby=PATH]              # Path to the Ruby binary of your choice
2012-12-08T21:14:46+00:00 app[web.1]:       [--skip-gemfile]           # Don't create a Gemfile
2012-12-08T21:14:46+00:00 app[web.1]:       [--skip-bundle]            # Don't run bundle install
2012-12-08T21:14:46+00:00 app[web.1]:   -G, [--skip-git]               # Skip Git ignores and keeps
2012-12-08T21:14:46+00:00 app[web.1]:   -O, [--skip-active-record]     # Skip Active Record files
2012-12-08T21:14:46+00:00 app[web.1]:     'rails new' runs in the .railsrc configuration file in your home directory.
2012-12-08T21:14:46+00:00 app[web.1]:   -J, [--skip-javascript]        # Skip JavaScript files
2012-12-08T21:14:46+00:00 app[web.1]:   -p, [--pretend]  # Run but do not make any changes
2012-12-08T21:14:46+00:00 app[web.1]: 
2012-12-08T21:14:46+00:00 app[web.1]:   -s, [--skip]     # Skip files that already exist
2012-12-08T21:14:46+00:00 app[web.1]:                                  # Default: jquery
2012-12-08T21:14:46+00:00 app[web.1]:   -T, [--skip-test-unit]         # Skip Test::Unit files
2012-12-08T21:14:46+00:00 app[web.1]: 
2012-12-08T21:14:46+00:00 app[web.1]: Runtime options:
2012-12-08T21:14:46+00:00 app[web.1]: Example:
2012-12-08T21:14:46+00:00 app[web.1]: 
2012-12-08T21:14:46+00:00 app[web.1]:     rails new ~/Code/Ruby/weblog
2012-12-08T21:14:46+00:00 app[web.1]: 
2012-12-08T21:14:46+00:00 app[web.1]:     See the README in the newly created application to get going.
2012-12-08T21:14:46+00:00 app[web.1]:     This generates a skeletal Rails installation in ~/Code/Ruby/weblog.
2012-12-08T21:14:46+00:00 app[web.1]:     The 'rails new' command creates a new Rails application with a default
2012-12-08T21:14:46+00:00 app[web.1]: 
2012-12-08T21:14:46+00:00 app[web.1]: Rails options:
2012-12-08T21:14:46+00:00 app[web.1]:     directory structure and configuration at the path you specify.
2012-12-08T21:14:46+00:00 app[web.1]: 
2012-12-08T21:14:46+00:00 app[web.1]:     You can specify extra command-line arguments to be used every time
2012-12-08T21:14:46+00:00 app[web.1]:     Note that the arguments specified in the .railsrc file don't affect the
2012-12-08T21:14:46+00:00 app[web.1]:     defaults values shown above in this help message.
2012-12-08T21:14:47+00:00 heroku[web.1]: State changed from starting to crashed
2012-12-08T21:14:47+00:00 heroku[web.1]: Process exited with status 0
2012-12-08T21:23:59+00:00 heroku[web.1]: State changed from crashed to starting
2012-12-08T21:24:02+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 37045`
2012-12-08T21:24:06+00:00 app[web.1]:   -r, [--ruby=PATH]              # Path to the Ruby binary of your choice
2012-12-08T21:24:06+00:00 app[web.1]:       [--skip-bundle]            # Don't run bundle install
2012-12-08T21:24:06+00:00 app[web.1]: 
2012-12-08T21:24:06+00:00 app[web.1]:   -m, [--template=TEMPLATE]      # Path to an application template (can be a filesystem path or URL)
2012-12-08T21:24:06+00:00 app[web.1]:                                  # Default: /usr/local/bin/ruby
2012-12-08T21:24:06+00:00 app[web.1]:   -G, [--skip-git]               # Skip Git ignores and keeps
2012-12-08T21:24:06+00:00 app[web.1]:                                  # Default: sqlite3
2012-12-08T21:24:06+00:00 app[web.1]:   -d, [--database=DATABASE]      # Preconfigure for selected database (options:         mysql/oracle/postgresql/sqlite3/frontbase/ibm_db/sqlserver/jdbcmysql/jdbcsqlite3/jdbcpostgresql/jdbc)
2012-12-08T21:24:06+00:00 app[web.1]:   -O, [--skip-active-record]     # Skip Active Record files
2012-12-08T21:24:06+00:00 app[web.1]: Options:
2012-12-08T21:24:06+00:00 app[web.1]:   -j, [--javascript=JAVASCRIPT]  # Preconfigure for selected JavaScript library
2012-12-08T21:24:06+00:00 app[web.1]:       [--edge]                   # Setup the application with Gemfile pointing to Rails repository
2012-12-08T21:24:06+00:00 app[web.1]: Usage:
2012-12-08T21:24:06+00:00 app[web.1]:   -b, [--builder=BUILDER]        # Path to a application builder (can be a filesystem path or URL)
2012-12-08T21:24:06+00:00 app[web.1]:   -S, [--skip-sprockets]         # Skip Sprockets files
2012-12-08T21:24:06+00:00 app[web.1]:       [--old-style-hash]         # Force using old style hash (:foo => 'bar') on Ruby >= 1.9
2012-12-08T21:24:06+00:00 app[web.1]:   -f, [--force]    # Overwrite files that already exist
2012-12-08T21:24:06+00:00 app[web.1]:       [--dev]                    # Setup the application with Gemfile pointing to your Rails checkout
2012-12-08T21:24:06+00:00 app[web.1]:                                  # Default: jquery
2012-12-08T21:24:06+00:00 app[web.1]:   -p, [--pretend]  # Run but do not make any changes
2012-12-08T21:24:06+00:00 app[web.1]:   -v, [--version]  # Show Rails version number and quit
2012-12-08T21:24:06+00:00 app[web.1]:   -J, [--skip-javascript]        # Skip JavaScript files
2012-12-08T21:24:06+00:00 app[web.1]:   -q, [--quiet]    # Suppress status output
2012-12-08T21:24:06+00:00 app[web.1]:   -h, [--help]     # Show this help message and quit
2012-12-08T21:24:06+00:00 app[web.1]:   -T, [--skip-test-unit]         # Skip Test::Unit files
2012-12-08T21:24:06+00:00 app[web.1]: 
2012-12-08T21:24:06+00:00 app[web.1]: 
2012-12-08T21:24:06+00:00 app[web.1]: 
2012-12-08T21:24:06+00:00 app[web.1]:   -s, [--skip]     # Skip files that already exist
2012-12-08T21:24:06+00:00 app[web.1]: Description:
2012-12-08T21:24:06+00:00 app[web.1]:   rails new APP_PATH [options]
2012-12-08T21:24:06+00:00 app[web.1]:     The 'rails new' command creates a new Rails application with a default
2012-12
-08T21:24:06+00:00 app[web.1]:     defaults values shown above in this help message.
2012-12-08T21:24:06+00:00 app[web.1]:     directory structure and configuration at the path you specify.
2012-12-08T21:24:06+00:00 app[web.1]:     You can specify extra command-line arguments to be used every time
2012-12-08T21:24:06+00:00 app[web.1]:     'rails new' runs in the .railsrc configuration file in your home directory.
2012-12-08T21:24:06+00:00 app[web.1]: 
2012-12-08T21:24:06+00:00 app[web.1]:     Note that the arguments specified in the .railsrc file don't affect the
2012-12-08T21:24:06+00:00 app[web.1]: 
2012-12-08T21:24:06+00:00 app[web.1]: 
2012-12-08T21:24:06+00:00 app[web.1]: Example:
2012-12-08T21:24:06+00:00 app[web.1]:       [--skip-gemfile]           # Don't create a Gemfile
2012-12-08T21:24:06+00:00 app[web.1]:     This generates a skeletal Rails installation in ~/Code/Ruby/weblog.
2012-12-08T21:24:06+00:00 app[web.1]: 
2012-12-08T21:24:06+00:00 app[web.1]:     See the README in the newly created application to get going.
2012-12-08T21:24:06+00:00 app[web.1]:     rails new ~/Code/Ruby/weblog
2012-12-08T21:24:06+00:00 app[web.1]: Runtime options:
2012-12-08T21:24:06+00:00 app[web.1]: Rails options:
2012-12-08T21:24:07+00:00 heroku[web.1]: State changed from starting to crashed
2012-12-08T21:24:07+00:00 heroku[web.1]: Process exited with status 0
2012-12-08T21:24:54+00:00 heroku[web.1]: State changed from crashed to starting 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T13:39:59.413

确保 Procfile 没有任何扩展名！例如，如果您使用 Procfile.txt，它将返回“Scaling web processes... failed ! No such type as web”。删除您的 Procfile 的扩展名，它会工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-08T18:17:19.710

查看[https://devcenter.heroku.com/articles/error-codes#h14-no-web-dynos-running](https://devcenter.heroku.com/articles/error-codes#h14-no-web-dynos-running)，您应该运行: `heroku ps:scale web=1`，它为我修复了错误

# chaining - 单独的链接与线性探测

> ID：13775205
> 
> 赞同：1
> 
> 时间：2012-12-08T06:40:29.380
> 
> 标签：chaining

一组具有键的对象：12、44、13、88、23、94、11、39、20、16、5
编写哈希表，其中 M=N=11，并且使用单独的链接处理冲突。

h(x) = | 2x + 5 | 模式 M

所以我用线性探测做了它并得到了

11 39 20 5 16 44 88 12 23 13 94

我很确定这是对的，但是您如何使用单独的链接来做到这一点？我意识到单独的链接使用链表，但是哈希表会是什么样子？

# ruby - 如果 n 属于集合 a 并且 m 属于集合 b 重复一些步骤，在 Ruby 中如何做到这一点？

> ID：13775207
> 
> 赞同：0
> 
> 时间：2012-12-08T06:41:11.587
> 
> 标签：ruby, conditional-statements

我们可以用 Java 和类似的语言做到这一点：

```
for (int i=0, int j=3; i<=2 && j<=5;i++,j++){
    do some repetive task until the condition becomes false...
} 
```

在条件块中如何根据两个不同的集合（假设两个数组的索引可以用作 i 和 j）来保持这两个条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:20:13.780

显式迭代在 ruby​​ 中被视为糟糕的思想表达方式。通常有更好的方法来实现预期的目标。

也就是说，这是我所知道的迭代许多变量的最佳方法：

```
i, j, k = 0, 3, 7
while i <= 2 && j <= 5 && k <= 100

  # code here

  i, j, k = [i, j, k].map(&:next)
end 
```

你也可以做得更乱一些

```
i, j = -1, 2
while( (i += 1) <= 2 && (j += 1) <= 5 )

  # code here

end 
```

**编辑：**如果你想从 0 到 2，从 3 到 5，这可行：

```
(3..5).each_with_index do |j, i|
  # code
end 
```

# android - 在Android中将数据加载到webview之前显示加载

> ID：13775212
> 
> 赞同：2
> 
> 时间：2012-12-08T06:42:02.340
> 
> 标签：android, webview, progress-bar

运行此代码时如何显示加载图像？

```
HttpClient client = new DefaultHttpClient();
      HttpGet request = new HttpGet("http://www.google.com");
      try
      {
          HttpResponse response = client.execute(request);
          BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
          String line;
          StringBuilder str = new StringBuilder();
          while((line = reader.readLine()) != null) {
              str.append(line);
      }
          objwebview.loadData(str.toString(), "text/html", "UTF-8");
  }
  catch(Exception e)
  {
      e.printStackTrace();
      objwebview.loadData(e.toString(), "text/html", "UTF-8");
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T06:51:33.447

[使用AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)更改代码以显示加载栏

```
private class Getdataasynktask extends AsyncTask<String, Void, String> {

ProgressDialog progressDialog = new ProgressDialog(context);

      @Override
      protected void onPostExecute(String result) {     
      // show loaging bar here

    progressDialog.setMessage("Loading...");
    progressDialog.setCancelable(false);
    progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    progressDialog.setProgress(0); // set percentage completed to 0%
    progressDialog.show();

      }

      @Override
      protected String doInBackground(String... params) {
          String strdata= getdatafromserver();
            return strdata;
      }      

      @Override
      protected void onPreExecute(String result) {

       objwebview.loadData(result.toString(), "text/html", "UTF-8");
       // dismiss progress bar here
       progressDialog.dismiss();
      }
 public String getdatafromserver(){
     String line;
      objwebview.loadData(str.toString(), "text/html", "UTF-8");
      HttpClient client = new DefaultHttpClient();
      HttpGet request = new HttpGet("http://www.google.com");
      try
      {
          HttpResponse response = client.execute(request);
          BufferedReader reader = new BufferedReader(new 
                    InputStreamReader(response.getEntity().getContent()));

          StringBuilder str = new StringBuilder();
          while((line = reader.readLine()) != null) {
              str.append(line);
      }

  }
  catch(Exception e)
  {
      e.printStackTrace();
      line=e.toString();

  }
return line;
}
} 
```

用于从 UI 线程执行此 AsyncTask 使用

```
new Getdataasynktask().execute(""); 
```

并且您还可以使用`onProgressUpdate`and`publishProgress`来显示加载栏，使用`AsyncTask`并将结果发布到 Ui 线程。欲了解更多信息，请参阅

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# postgresql - Ubuntu 上的 Postgres 命令行工具

> ID：13775221
> 
> 赞同：-2
> 
> 时间：2012-12-08T06:43:34.867
> 
> 标签：postgresql

我在 postgres 官方网站上关注 Postgres 9.2 的教程。他们讲述`postgres`命令，`createdb`命令等等。但我没有它们！`sudo apt-get install postgres`我在 Ubuntu 12.04 上安装了 postgres 。相反，我有全新的`psql`命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:46:40.520

当您在 Ubuntu 上缺少命令并且不知道要安装什么软件包时，您可以转到[http://packages.ubuntu.com/并在](http://packages.ubuntu.com/)**搜索软件包的内容**部分中键入命令名称。

在 的情况下`createdb`，它附带用于安装在中的软链接的**postgresql-client-common**`/usr/bin/createdb`，以及用于安装在中的实际二进制文件的**postgresql-client-9.1**`/usr/lib/postgresql/9.1/bin/createdb`

你需要两个包。

但是，如果您已经有一个 working `psql`，这通常意味着您已经安装了它们，因为它位于相同的包中。

# regex - 如何使用 Perl 在正则表达式中进行可选匹配？

> ID：13775222
> 
> 赞同：0
> 
> 时间：2012-12-08T06:43:41.810
> 
> 标签：regex, perl

我想从字符串中提取大小值。可以通过以下两种方式之一来格式化字符串：

> 数据大小：（2000 字节）

或者

> 文件数据大小：（2082 字节）

如果字符串存在于文件中，它只会出现一次。

到目前为止，我有：

```
#!/usr/bin/perl

use strict;
use warnings;

open FILE, "</tmp/test";
my $input = do { local $/; <FILE> };

my ($length) = $input =~ /(file)?\s*Data-Size: \((\d+) bytes\)/m;                   

$length or die "could not get data length\n";
print "length: $length\n"; 
```

问题似乎在于将 word 文件设为可选。我想我可以这样做：

> （文件）？

但是，当 word 文件不存在时，这似乎会停止匹配。此外，当单词文件存在时，它会将 $length 设置为字符串“file”。我认为这是因为文件周围的括号也意味着提取。

那么如何匹配两个字符串中的任何一个并提取大小值呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T06:47:24.100

您想要在`$length`. 为此，您可以使用

```
my (undef, $length) = $input =~ /(file)?\s*Data-Size: \((\d+) bytes\)/; 
```

或者

```
my $length = ( $input =~ /(file)?\s*Data-Size: \((\d+) bytes\)/ )[1]; 
```

But a much better approach would be to avoid capturing something you're not interested in capturing.

```
my ($length) = $input =~ /(?:file)?\s*Data-Size: \((\d+) bytes\)/; 
```

Of course, you'd get the same result from

```
my ($length) = $input =~ /Data-Size: \((\d+) bytes\)/; 
```

* * *

By the way, I removed the needless `/m`. `/m` changes the meaning of `^` and `$`, yet neither are present in the pattern.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:42:44.423

Just my 2 cents, you can make optional matching other way:

/(file|)\s*Data-Size: ((\d+) bytes)/

# ruby-on-rails - 来自 Rails 控制器操作的并行请求

> ID：13775224
> 
> 赞同：3
> 
> 时间：2012-12-08T06:44:10.657
> 
> 标签：ruby-on-rails, api, http, response

我有一个用例，当调用控制器的操作时，它会触发 3 个对其他 url 的 http 请求。我需要解析这些请求的响应，将它们组合起来，然后渲染视图。如何并行而不是顺序触发 3 个请求以节省时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-03T14:25:27.037

我使用[Typhoes](https://github.com/typhoeus)来处理并行调用。

跳转到[进行并行调用](https://github.com/typhoeus/typhoeus#making-parallel-requests)部分，了解如何进行并行调用。

例子

```
 # Assume these were your two HTTP calls
 first_request = Typhoes::Request.new('http://jsonplaceholder.typicode.com/posts?userId=2')
 second_request = Typhoes::Request.new('http://jsonplaceholder.typicode.com/posts?userId=3')

 # Initialize a Hydra queue (this holds typhoes requests)
 hydra = Typhoeus::Hydra.hydra
 hydra.queue [first_request, second_request]
 hydra.run # this triggers the calls

 # Getting response, once the run is complete

 first_request.response 
 second_request.response 
```

# sql - 根据前一个值拉出排序的下一行

> ID：13775225
> 
> 赞同：1
> 
> 时间：2012-12-08T06:44:14.210
> 
> 标签：sql, db2

我有一个列出依赖项的表，但我不知道如何按照图表显示的实际顺序对其进行排序（使用 DB2 SQL）

图（列出组）34 -> 23 -> 65 ->....

目标是按图表的顺序排序

该表有两个字段 GROUP 和 DEPEND。理想的第一列是 34,0（0，因为它不依赖于任何内容），然后是 23,34（依赖于 GROUP 34），然后是 65,23（依赖于 GROUP 23）。遵循 GROUP 的模式，DEPEND。

所以结果如下：

```
1\. 组依赖
 2\. 34 0
 3\. 23 34
 4\. 65 23

```

是否可以使用变量或其他东西来查看上一条记录的 GROUP 以确定下一行？

非常感谢任何帮助或想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:00:17.017

当前版本的 DB2 支持递归查询，因此以下内容应该可以工作（至少它适用于我在 Windows 上的 DB2 9.7 Express-C）：

```
with dep_tree  (groupno, depend, group_order) as (
   select groupno, depend, 1 as group_order
   from group_list
   where depend = 0

   union all 

   select c.groupno, c.depend, p.group_order + 1
   from group_list c, 
        dep_tree p 
   where p.groupno = c.depend
)
select group_order, groupno, depend
from dep_tree
order by group_order; 
```

请注意，我使用`groupno`而不是`GROUP`作为列名，因为`GROUP`是保留字，不应用作列名。

# oop - 类和对象实例有什么区别？

> ID：13775226
> 
> 赞同：9
> 
> 时间：2012-12-08T06:44:23.227
> 
> 标签：oop, language-agnostic

> 类是单个单元中方法和变量的绑定。
> 对象是类的一个实例。

这些是编程书籍中类和对象的定义。我的朋友说，一个类是一个对象的蓝图。对象是蓝图的真实“事物”。他举了一个例子：如果*Company*是一个类，INFOSYS、CTS、TCS等都是对象。每当我想到类和对象时，这些定义都会让我感到困惑。如果通道是一个类，那么该类的对象是什么？如果水是一个类，那么什么是类的对象？你能澄清一下吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-08T06:51:17.987

如果 channel 是一个类，则 Start Sports、BBC 和 ESPN 是它的对象。如果水是一个类，那么“新鲜石灰水”和“汤”就是它的对象。

尽管您可能会发现此解释含糊不清，但这是我能想到的答案。

以下是您可以了解和区分类别的方法：

假设你有一个类“CAR”

它的对象是现代、福特、铃木。它将具有相同的方法但不同的设计 -> 这就是您可以将对象和类与现实世界联系起来的方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T18:54:18.517

一个类指定其实例的行为。

类也是类的实例（类的类称为“元类”）。

类是一种抽象。您可以通过查找应用于一组对象的通用属性来找到一个类。

那么类是一个模板，它定义了要包含在特定类型对象中的方法（行为）和变量（状态）

认可课程（课外）需要经验。

阅读 Alan Kay 的任何内容，他是对象技术的发明者，也是 Smalltalk 的发明者之一，Smalltalk 是迄今为止唯一的纯对象环境。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-22T09:19:32.207

我没有太多的编程经验，但是我的一个朋友做了一个很好的例子来定义一个类和一个对象。我会尽量使用人类语言。

取一匹马。是什么让你知道这种动物是马而不是……狗？因为它有四只脚，是个大动物，很强壮，能跑。好吧，您刚刚在脑海中定义了一个“马”类！现在，您将看到一匹名为“Pollyanna”的白色母马和一匹名为“Demon”的黑色公马。你一看到它们就知道它们是马，所以它们属于“马”类。是什么让他们与众不同？性别和颜色......这些是“马”类的属性。'Pollyanna' 和'Demon' 是两个物体，它们是真实的东西，你可以实际触摸和骑乘的东西。它们的性质、性别和颜色也不同。波莉安娜是白人女性。恶魔是黑色和男性。这些定义的属性是一个对象与另一个对象的区别。一匹马从另一匹马。但它们仍然属于同一类：它们总是马！

现在更具技术性...类是对某事物的更抽象定义。一张蓝图。对象是属于该类的真实事物。当你从一个类创建一个新对象时，你正在实例化一个对象（也就是创建一个实例）。

希望这会有所帮助，如果不抱歉......正如我之前所说，我没有太多编程经验:)

詹卢卡

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-08T06:52:46.173

我会给你一个经典的解释，你可以到处找到不同的版本。

一个类就像一个蓝图。假设你想造一辆汽车，你首先需要的是一个计划，这就是类。该计划将描述“方法”，例如`brake`和`hoot`。它还将描述汽车的各种组件。这些是变量。

汽车对象是汽车类的实例。你可以在一个车类中拥有很多这样的东西。

例如：

```
class Car:
    def __init__(self,color):
        self.color = color

    def hoot(self):
        "do stuff"

red_car = Car('red')
red_car.hoot()
blue_car = Car('blue')
blue_car.hoot() 
```

现在，根据您使用的语言，类本身可以是对象（在 Python 中就是这种情况）。可以这样想：所有蓝图都有一些共同点。蓝图的类（本身就是蓝图）中描述了常见的东西。

然后在“水”这一类的观点上，您可以根据您想要做的事情以几种方式接近它：

方式1：

而是有一个名为 Liquid 的类，其中包含描述粘度、气味、密度、体积等内容的变量。水就是一个例子。橙汁也一样

方式2：

假设你正在用一堆由不同地形组成的块组成一个游戏。然后你可以有诸如草、水、岩石等类（想想我的世界）。然后你可以让一个水类实例（一个水对象）占据地图上的特定位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-28T16:07:32.530

一个对象的生命周期是有限的，对象被创建并最终被销毁。同样在该生命周期内，对象可能会发生重大变化

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T09:20:14.870

在现实世界中，您经常会发现许多同类对象。可能存在数千个其他频道，所有频道的品牌和型号都相同。每个通道都是从同一组蓝图构建的，因此包含相同的组件。在面向对象的术语中，我们说您的通道是称为通道的对象类的一个实例。类是创建单个对象的蓝图。

```
class Channel {

    ChannelType type = 0;
    int employeeCount = 0;

    void setType(ChannelType newType) {
         type = newValue;
    }

    void addEmployer(int increment) {
         employeeCount= employeeCount+ increment;   
    }

    void removeEmployer(int decrement) {
         employeeCount= employeeCount- decrement;
    }

    void printStates() {
         System.out.println("type :" +
             type + " employee count:" + employeeCount);
    }
} 
```

这个类的设计基于前面对 Channel 对象的讨论。typr、employeeCount 字段表示对象的状态，方法（setType、addEmployer、removeEmployer 等）定义了它与外界的交互。

您可能已经注意到 Channel 类不包含 main 方法。那是因为它不是一个完整的应用程序。它只是可能在应用程序中使用的通道的蓝图。创建和使用新的 Chennel 对象的责任属于应用程序中的某个其他类。

```
class Channel Demo {

    public static void main(String[] args) {

        // Create two different 
        // Channel objects
        Channel BBC= new Channel ();
        Channel NTV = new Channel ();

        // Invoke methods on 
        // those objects
         BBC.setType(channeltype.NEWS);
         BBC.addEmployer(500);
         BBC.printStates();

         BBC.setType(channeltype.SPORT);
         BBC.addEmployer(300);
         BBC.printStates();

    }
} 
```

此测试的输出打印两个通道：

类型：新闻员工人数：500

类型：SPORT 员工人数：300

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-20T06:19:32.347

在语法中，普通名词是类，专有名词是宾语。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-26T15:23:40.823

**班级**

1.  一种将数据和相关函数绑定在一起的方法。
2.  类有很多对象。
3.  类是创建对象的模板。
4.  这是合乎逻辑的存在。
5.  内存空间在创建时未分配。
6.  定义（声明）创建一次。
7.  使用“class”关键字声明类。

**目的**

1.  面向对象环境中的基本运行时实体。
2.  对象只属于类。
3.  对象是类的实现。
4.  它是物质存在。
5.  内存空间在创建时分配。
6.  它会根据您的需要创建多次。
7.  Object 是类的实例或变量。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-15T10:02:37.843

现在对象可以是任何东西，如公共汽车、汽车、移动或人等。

以三星智能手机为例。现在三星智能手机是我们所知道的对象。要创建三星智能手机，我们需要一个蓝图（类）。现在将有成千上万的三星智能手机，它们可以有不同的颜色，如蓝色或黑色，也可以有不同的内存或存储空间。现在三星智能手机，蓝色，4gb 内存，256gb 存储，这是该对象的一个​​实例。

所以，

*   类-三星智能手机的蓝图
*   对象 - 三星智能手机
*   实例 - 具有特定功能的三星智能手机

类是对象的蓝图，实例可以视为对象的单个出现。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-03-16T07:16:07.560

术语类和对象明确地相互关联，但每个术语都有其不同的含义。让我们从解释术语类的含义开始。类是指实际编写的代码段，用于定义任何给定类的行为。因此，类是一段静态代码，其中包含在 orogram 执行期间不改变的属性。而对象指的是类的实际实例实例。每个 ibhect 都必须属于一个类

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-09-21T04:01:02.410

对象是具有某些特征和行为的可识别实体。它表示可以存储数据及其相关功能的实体。

类是一组具有共同属性和关系的对象。它代表一组相似的对象。

# linux - Clojure + Linux + Ext4 + 将字符串编码为文件名

> ID：13775228
> 
> 赞同：1
> 
> 时间：2012-12-08T06:44:28.890
> 
> 标签：linux, clojure

背景：

我在 Ubuntu Linux 12.10 上的 Java 7.0 上使用 Clojure，带有 Ext4 文件系统。

问题：

我有一个任意的 Clojure 字符串。我想将其编码为有效的文件名。

问题：

什么是最佳方式/什么是这样做的好内置？

笔记：

编码的文件名不必是人类可读的。我只需要能够从文件名中恢复原始字符串。

编辑：

虽然如果有效名称的字符串被映射到人类可读的东西（并且接近它的原始值，那也很好。）

谢谢！

编辑：

编码：将任意字符串作为输入；创建有效的文件名作为输出

解码：从编码中获取文件名，恢复原始字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:51:54.160

如果不需要人类可读，只需 base64 编码即可。这将从字符串中删除任何文件名无效字符。

[http://richhickey.github.com/clojure-contrib/base64-api.html](http://richhickey.github.com/clojure-contrib/base64-api.html)

如果他们仍然没有原生 clojure 中的解码器，请使用 Java base64 解码函数。

# ruby-on-rails-3 - 如何传递控制器的ID

> ID：13775233
> 
> 赞同：0
> 
> 时间：2012-12-08T06:45:33.820
> 
> 标签：ruby-on-rails-3, rspec-rails

怎么传身份证。我的控制器是：

```
class AttachementsController < ApplicationController
  def index
    @pdf = Attachement.find(params[:resume_id])
    # send_file(@pdf.file.url, :type => 'application/pdf', :disposition => 'inline',:stream => false)
    redirect_to @pdf.file.url
  end
end 
```

我的控制器测试用例是：

```
require 'spec_helper'

describe AttachementsController do

  describe "GET 'index'" do
    it "should be successful" do
      get 'index', :id => "@attachements.id"
      response.should be_success
    end
  end

end 
```

我的错误是：

```
 AttachementsController GET 'index' should be successful
     Failure/Error: get 'index', :id => "@attachements.id"
     ActiveRecord::RecordNotFound:
       Couldn't find Attachement without an ID
     # ./app/controllers/attachements_controller.rb:3:in `index'
     # ./spec/controllers/attachements_controller_spec.rb:7:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:33:45.563

您不需要 @attachements.id 周围的引号。

```
get 'index', :id => @attachements.id 
```

# iphone - 为什么 Objective C 中的以下代码无法模拟“发送到已释放实例的消息”

> ID：13775235
> 
> 赞同：1
> 
> 时间：2012-12-08T06:45:41.763
> 
> 标签：iphone, objective-c, ios, xcode

```
char bytes[] = { 1, 2, 3, 4};
NSString * f = [[NSString alloc] initWithBytes:bytes length:4 encoding:NSASCIIStringEncoding];

[f release];

NSLog(@"%@", [f description]); // Why no 'message sent to deallocated instance "?

[f release]; 
```

它只给我警告，没有崩溃..

```
Test1(26194,0xacf302c0) malloc: *** error for object 0x757c2f0: double free 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:59:16.013

因为`NSString`很奇怪。（这是一个类集群，它是免费桥接的`CFString`。）

用一个更普通的对象尝试同样的事情（比如`NSObject`，对于最简单的情况），你会看到事情的表现更符合预期。（但请注意，除非您启用保护 malloc 或类似的调试选项，否则您可能根本不会收到“发送到已释放实例的消息”错误。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:51:17.143

您正在释放对象然后获取其值，如何向不存在的对象发送消息；使用此

```
char bytes[] = { 1, 2, 3, 4};
 NSString * f = [[NSString alloc] initWithBytes:bytes length:4 encoding:NSASCIIStringEncoding];

NSLog(@"%@", [f description]); // Why no 'message sent to deallocated instance "?

[f release]; 
```

# php - 如何将javascript变量传递给smarty中的url

> ID：13775237
> 
> 赞同：2
> 
> 时间：2012-12-08T06:45:49.943
> 
> 标签：php, javascript, smarty

我是smarty的新手，我想知道类似...

我在 .tpl 文件中有 javasript 代码

```
var dispDate = myJsDate.getDate()+'/'+ (myJsDate.getMonth()+1) + '/' + myJsDate.getFullYear();
above code return : 08/12/2012 
```

并在该 .tpl 文件中有 html 代码

```
<a href="eventPost.php">Create A New Event</a>
<a href="commitment.php">Create A New Commitment.</a>
<a href="areaPost.php">Create A New Visiting Area.</a> 
```

我的查询是我想在 url 中传递那个 javascript 变量“dispDate”

喜欢代码：

```
eventPost.php?ed=08/12/2012
commitment.php?ed=08/12/2012
areaPost.php?ed=08/12/2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:00:17.810

尝试使用 jQuery：

```
$("#eventPost").click(function() {
  var dispDate = myJsDate.getDate()+'/'+ (myJsDate.getMonth()+1) + '/' + myJsDate.getFullYear();
  $.get("eventPost.php", { date: dispDate} );
});

<a href="#" id="eventPost">Create A New Event</a> 
```

这不是完整的答案，但您可以开始。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:03:12.527

没有 jquery 的第二个选项是：根本不使用 href 属性，而是使用 onclick。

然后你会有例如：

```
 <a href="areapost.php"
     onclick="location.href='areapost.php?ed=' + dispDate; return false;">
     .... 
  </a> 
```

# android - 查找具有方向android的两个地理点之间的距离

> ID：13775240
> 
> 赞同：5
> 
> 时间：2012-12-08T06:46:37.660
> 
> 标签：android, gps

我能够通过两个 Location 对象找到两个地理位置之间的距离

下面是

```
 mLoc.distanceTo(mLocTarget) 
```

**mLoc**是当前用户位置，**mLocTarget**是 android 的目标位置

现在我想找到方向也意味着像

16米。西或16m。北方有可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T06:58:11.877

getBearing() 返回瞬时方位，但对于点之间使用：

[公共浮动轴承To (Location dest)](http://developer.android.com/reference/android/location/Location.html#bearingTo%28android.location.Location%29)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T06:53:04.053

您可以通过轴承找到两个位置之间的方向。

[公共浮动轴承To (Location dest)](http://developer.android.com/reference/android/location/Location.html#bearingTo%28android.location.Location%29)

# xcode - 如何使用 bash 查找文本字符串 like--> "PROVISIONING_PROFILE[sdk=iphoneos*]" <--这个字符串有很多特殊字符

> ID：13775247
> 
> 赞同：1
> 
> 时间：2012-12-08T06:47:35.447
> 
> 标签：xcode, linux, bash, shell, sed

正如标题所说，我想在文本中找到一个字符串，但这个字符串很特殊。文字可能是这样的：

```
{
PREBINDING = NO;
"PROVISIONING_PROFILE[sdk=iphoneos*]" = "22B333C5-6D7A-4A76-81F2-12A045DAE44C";
SDKROOT = iphoneos;
TARGETED_DEVICE_FAMILY = 2;
} 
```

（另外，如果你是 ios 开发者，你可能知道文本示例来自 XXX.xcodeproj/project.pbxproj）

我需要找到并删除这行文本：

```
"PROVISIONING_PROFILE[sdk=iphoneos*]" = "22B333C5-6D7A-4A76-81F2-12A045DAE44C"; 
```

在这一行中，它有引号（“），有括号（[]），有星号（*），还有空格（）。当我尝试使用下面的代码找到这一行时：

```
provisionStr="22B333C5-6D7A-4A76-81F2-12A045DAE44C"
fileDir=project.pbxproj

totalLineStr=`grep $provisionStr  $fileDir`
sed -i "" "s@$provisionStr@@" $fileDir 
```

此 bash 代码不起作用。请帮助我，我刚刚开始学习使用 bash。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:08:09.777

sed 什么都没有的替代品：

`s(for substitute)/string_to_match/new_string_or_empty_to_remove/g(for global/all document)`

`sed 's/\"PROVISIONING_PROFILE\[sdk=iphoneos\*\]" = \"22B333C5-6D7A-4A76-81F2-12A045DAE44C\";//g'`

使用转义双引号、星号和方括号`\`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T08:17:02.323

听起来你想做的就是：

```
grep -v '"22B333C5-6D7A-4A76-81F2-12A045DAE44C"' file 
```

如果您确实想在文件中搜索字符串而不是在文件中搜索与 RE 的匹配项，那么您只需这样做，例如：

```
$ awk -v str='"PROVISIONING_PROFILE[sdk=iphoneos*]"' 'index($0,str)' file
"PROVISIONING_PROFILE[sdk=iphoneos*]" = "22B333C5-6D7A-4A76-81F2-12A045DAE44C";

$ awk -v str='"PROVISIONING_PROFILE[sdk=iphoneos*]"' '!index($0,str)' file
{
PREBINDING = NO;
SDKROOT = iphoneos;
TARGETED_DEVICE_FAMILY = 2;
} 
```

不要尝试转义所有 RE 元字符，然后进行 RE 比较，因为这没有任何意义。如果要查找 RE，则进行 RE 比较，但如果要查找字符串，请进行字符串比较，就这么简单。

# css - 网格内的 CSS 网格

> ID：13775249
> 
> 赞同：0
> 
> 时间：2012-12-08T06:47:48.600
> 
> 标签：css, grid, 960.gs

我正在使用 960 网格系统，我正在尝试实现以下目标 -

```
|-----| |-------------------|
|     | |  |--|  |-----|    |
|     | |  |  |  |     |    |
|     | |  |--|  |-----|    |
|     | |                   | 
|     | |  |------|  |--|   |
|     | |  |      |  |  |   |
|     | |  |------|  |--|   |
|-----| |-------------------| 
```

有没有办法这样做？我在右列中需要第二组 div 的唯一原因是左列很长，我不想要第二组列之间的空间。

如果有更好的方法来实现这一点，我将非常感谢任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T06:57:36.870

此功能内置于 Grid 960 系统中。您只需分别给左右嵌套网格项“alpha”和“omega”类。

这是一个例子：

```
<div class="container_12">

  <div class="grid_3">
  </div>

  <div class="grid_9">

    <div class="grid_4 alpha">
    </div>

    <div class="grid_5 omega">
    </div>

    <div class="grid_5 alpha">
    </div>

    <div class="grid_4 omega">
    </div>

  </div>

</div><!-- end .container_12 --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T19:42:19.527

如果您愿意考虑其他框架，以下是使用[**Cascade Framework**](http://jslegers.github.io/cascadeframework/)实现所需结果的方法：

```
<div class="site-center"> <!-- Center all content in a responsive container -->
    <div class="col width-1of4"> <!-- Your left column goes here -->

    </div>
    <div class="col width-fill"> <!-- Your main content goes here -->
        <div class="col"> <!-- First row -->
            <div class="col width-1of3"> <!-- First element of first row -->

            </div>
            <div class="col width-fill"> <!-- Second element of first row -->

            </div>
        </div>
        <div class="col"> <!-- Second row -->
            <div class="col width-2of3"> <!-- First element of second row -->

            </div>
            <div class="col width-fill"> <!-- Second element of second row -->

            </div>
        </div>
    </div>
</div> 
```

Cascade 框架中的网格元素是

*   以下 HTML 元素之一：section、main、article、header、footer、aside 或 nav（这些元素用旧 IE 的 HTMLshiv 填充，以备不时之需）。

*   具有“col”类的 div 元素（可以在没有 polyfill 的旧 IE 中使用）。

要为网格元素添加宽度，请添加格式为“width-XofY”的类，其中 Y 可以是 2、3、4、5、6、7、8、9、10、12、16 或 24，并且X 可以是任何低于 X 的值。

更具体地说，这里有一些可以在 Cascade Framework 中使用的有效类的示例：'width-1of2'（宽度：50%）、'width-3of4'（宽度：25%）、'width-2of5'（宽度：40 %)、'width-2of5'（宽度：40%）、'width-2of7'（宽度：28.5714286%）和'width-13of16'（宽度：81.25%）

除了这些类之外，您还可以使用分别适合内容并填充 100% 宽度的任何剩余部分的“width-fit”和“width-fill”类。或者，您可以定义自己的类和 ID，并为这些类添加自定义宽度，以“语义”方式执行操作。

如果您的构建包含响应模块（推荐构建就是这种情况），所有网格元素的宽度会在移动设备上自动重置为 100%。您可以使用“mobile-width-3of16”、“phone-width-3of7”或“tablet-width-2of4”等类来自定义不同宽度范围的布局以及“desktop-hidden”、“mobile-hidden”类, 'phone-hidden' 或 'tablet-hidden' 隐藏特定屏幕的内容和范围。

# sql - sql查询以获取排除所选ID的结果

> ID：13775250
> 
> 赞同：1
> 
> 时间：2012-12-08T06:48:06.877
> 
> 标签：sql

我被 sql 查询困住了。我想从单个表中选择产品，但排除选定的产品。我有 wp_product 表作为

```
product_id   prod_name   prod_price   prod_rate
   1           xyz         100           5
   2           pqr         200           6 
   3           lmn         300           6 
```

我正在尝试执行此查询

```
select * 
from wp_products 
where product_id <>'1' AND prod_price <=200 OR prod_rate='6'  OR 
          order by product_id DESC 
          LIMIT 4" 
```

使用这个`select * from wp_products where product_id <>'1';`我得到结果

```
product_id    prod_name    prod_price  prod_rate
   2            pqr         200          6 
   3            lmn         300          6 
```

从上面的结果中，我想为我在尝试过的查询中使用的所有“OR”条件选择（检查）。

建议我怎样才能得到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:53:12.447

如果我理解正确 - 只需使用括号：

```
select * 
from wp_products 
where product_id <>'1' AND 
  (price<=200 OR wheel_size='6'  OR  studs='$studs') 
order by product_id DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:59:11.460

试试下面的sql..

```
select * from wp_products
where (product_id <>'1') AND (price<=200 OR wheel_size='6' OR studs='$studs') 
order by product_id DESC LIMIT 4 
```

# c# - Windows 应用商店应用程序中的 PropertyPath 和绑定

> ID：13775251
> 
> 赞同：1
> 
> 时间：2012-12-08T06:48:47.517
> 
> 标签：c#, xaml, windows-8

我试图了解 Windows 商店示例中的示例游戏之一是如何工作的。特别是这个

[http://code.msdn.microsoft.com/windowsapps/Reversi-XAMLC-sample-board-816140fa](http://code.msdn.microsoft.com/windowsapps/Reversi-XAMLC-sample-board-816140fa)

我了解大部分情况（我认为），但我真的不知道这里发生了什么：

```
boardSpace.SetBinding(BoardSpace.SpaceStateProperty,
new Binding { Path = new PropertyPath(String.Format("[{0},{1}]", row, column)) }); 
```

我不明白 PropertyPath 到底绑定了什么。它似乎正在形成一些 2D 数组，因此它将 SpaceStateProperty 从游戏模型视图绑定到此 PropertyPath 但是如何将 [0,1] 或 [2, 2] 转换为某些特定实例或路径？

下一行更有意义： boardSpace.SetBinding(BoardSpace.CommandProperty, new Binding { Path = new PropertyPath("MoveCommand") });

这些将 BoardSpacebutton CommandProperty 绑定到在 GameViewModel 中公开的 MoveCommand 委托

现在我发现了一个像这样暴露的函数

```
public BoardSpaceState this[String index] 
```

属性路径是否会绑定到 this 函数，因为它需要一个字符串，而 PropertyPath 只是一个字符串 [x,y]？它是怎么知道的？

我觉得我错过了关于 PropertyPath 工作方式的一个微妙部分，但阅读文档并没有多大意义。

我很感激任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:12:03.490

是的，这个绑定是到“this”属性，也称为索引器，它提供了一种直接索引到定义类的方法，就好像它是一个集合一样。因此，索引器是一种在指定索引但没有特定属性名称时使用的默认属性。

文档中的相关主题是[Indexers (C# Programming Guide)](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)，其中包括以下代码片段（此处缩写）：

```
class SampleCollection<T>
{
    // Define the indexer, which will allow client code 
    // to use [] notation on the class instance itself. 
    public T this[int i] { /* ... */ }
}

// Usage:
SampleCollection<string> stringCollection = new SampleCollection<string>();
stringCollection[0] = "Hello, World"; 
```

这不是绑定示例，但绑定中的概念是相同的。“[ *index* ]”的属性路径是对当前数据上下文的索引器属性的特定索引值的绑定（示例中的 GameViewModel 对象）。

# mod-rewrite - 带有可选斜杠的 RewriteRule 问题

> ID：13775252
> 
> 赞同：0
> 
> 时间：2012-12-08T06:49:05.463
> 
> 标签：mod-rewrite

我正在尝试使用以下 RewriteRule 将诸如[http://mysite.com/calendar/](http://mysite.com/calendar/)之类的 URL 定向到特定页面，例如 /calendar.php

```
RewriteRule ^calendar/?$ /calendar.php [NC,L] 
```

没有尾部斜杠（http://mysite.com/calendar），这可以正常工作，但如果我包含最后一个斜杠（例如[http://mysite.com/calendar/](http://mysite.com/calendar/)），我的 javascript 和样式表不会被包括在内。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:30:43.513

浏览器在（虚拟）`/calandar`文件夹中查找资产。

不要使用相对 url，而是使用根相对 url。

```
e.g.
<link href="main.css" ...>
would become 
<link href="/main.css" ...>
and 
<script src="folder/file.js" ...>
would become
<script src="/folder/file.js" ...> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:17:44.647

不确定您需要什么。但似乎一个简单的 preg_replace 就可以了。例如：

```
$url = "http://mysite.com/calendar/";

preg_replace('/calendar/', '/news/', $url);

//$url now =  http://mysite.com/news/
//OR
$url = "http://mysite.com/calendar/calendar.php";

preg_replace('/calendar/', '/news/', $url);

//$url now = http://mysite.com/news/news.php 
```

# jquery - 带有 jMediaelement 的垂直音量滑块

> ID：13775254
> 
> 赞同：0
> 
> 时间：2012-12-08T06:49:33.423
> 
> 标签：jquery, html, html5-audio

我将 jMediaelement 用于定制的 HTML5 音频播放器。不幸的是，客户端现在需要一个垂直音量滑块。

在调用 jMediaelement API 时，我只能使用这个标记：

```
 <div class="volume-slider" title="volume slider"></div> 
```

...它将被水平音量滑块取代。如何将音量手柄调整为垂直（从底部=静音到顶部=响亮）？

![我的播放器截图](../Images/501db15a6a4d97e7357b02b38f1c012f.png)

PS：我已经[在 Sourceforge 打开了一个问题](https://github.com/aFarkas/jMediaelement/issues/26)，但是还没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:02:02.757

我不熟悉 jMediaelement API，但您可以使用 css 将音量逆时针旋转 90 度。您可能不得不弄乱事件处理程序以使音量句柄跟踪垂直移动而不是水平移动，但这应该不难。

这是一篇关于使用 CSS 旋转的文章

[http://davidwalsh.name/css-transform-rotate](http://davidwalsh.name/css-transform-rotate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:55:15.230

幸运的是，亚历山大自己[回答](https://github.com/aFarkas/jMediaelement/issues/26#issuecomment-11157593)了这个问题。这是他的工作解决方案：

> 这很简单。JME 使用 jQuery-UI 滑块，jQuery-UI 通过 CSS**自动检测您是否需要垂直或水平滑块。**您唯一需要做的就是让滑块的高度大于宽度。
> 
> 以下 css 将创建一个垂直滑块：
> 
> ```
> .volume-slider {
>     height: 300px;
>     width: 20px;
> } 
> ```
> 
> 如果这没有帮助，您可以将垂直选项传递给滑块。

# android - Adapter.notifyDataSetChanged() 不工作

> ID：13775255
> 
> 赞同：1
> 
> 时间：2012-12-08T06:49:36.560
> 
> 标签：android, adapter

有一个antivity extends Activity，这个activity中有一个listview来显示从SQlite数据库查询的数据。当我长按列表视图的一个项目时，会出现一个警报对话框，以确保我真的想删除它。但是当我删除其中一个数据时，我再次从数据库中查询数据并用于`notifyDataSetChanged()`刷新列表视图，但它不起作用。onCreate() 中有一些代码

```
serviceListView.setOnItemLongClickListener(new OnItemLongClickListener()
    {
        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1,final int arg2, long arg3)
        {
            Map<String, String> map = new HashMap<String, String>();
            if (data!=null)
            {
                String[] options = new String[]{ "edit", "delete" };
                map = data.get(arg2);
                final String companyname= map.get("companyname");
                final String serviceaddress = map.get("serveraddress");
                final String id = map.get("id");
                new AlertDialog.Builder(ServiceListActivity.this)
                        .setTitle("options")
                        .setIcon(android.R.drawable.ic_dialog_info)
                        .setSingleChoiceItems(options,-1,
                                new DialogInterface.OnClickListener()
                                {
                                    public void onClick(DialogInterface dialog,int which)
                                    {
                                        if (which == 0)
                                        {
                                            dialog.dismiss();
                                            Toast.makeText(ServiceListActivity.this, id+companyname+serviceaddress+"edit", Toast.LENGTH_SHORT).show();
                                        }
                                        else
                                        {       
                                            dialog.dismiss();
                                            AlertDialog.Builder builder = new Builder(ServiceListActivity.this);
                                            builder.setMessage("delete?");
                                            builder.setTitle("Notice");
                                            builder.setPositiveButton("yes", new DialogInterface.OnClickListener()
                                            {
                                                @Override
                                                public void onClick(DialogInterface dialog, int which)
                                                {
                                                    // TODO Auto-generated method stub
                                                    Log.i("ServiceListActivity data1 = ", data.size()+"");
                                                    dialog.dismiss();
                                                    Message message = Message.obtain();
                                                    message.what = 1;
                                                    message.obj = id;
                                                    messageHandler.sendMessage(message);                                                    
                                                }
                                            });
                                            builder.setNegativeButton("no", new DialogInterface.OnClickListener() {
                                                @Override
                                                public void onClick(DialogInterface dialog,int which)
                                                {
                                                    // TODO Auto-generated method stub
                                                    dialog.dismiss();
                                                }
                                            });
                                            builder.create().show();
                                        }
                                    }
                                }).setNegativeButton("no", new DialogInterface.OnClickListener()
                                {       
                                    @Override
                                    public void onClick(DialogInterface dialog, int which)
                                    {
                                        // TODO Auto-generated method stub
                                        dialog.dismiss();
                                    }
                                })
                        .show(); 
```

有一个实习班：

```
class MessageHandler extends Handler
 {
        public MessageHandler(Looper looper) 
        {
            super(looper);
        }

        @Override
        public void handleMessage(Message msg)
        {
            switch (msg.what) 
            {
            case 1:         
                String id = msg.obj.toString();
                int i = DatabaseTools.DeleteServer(database, Integer.parseInt(id));
                if (i==1)
                {
                    data = DatabaseTools.queryDataFromDatabase(database,cursor);
                    Log.i("ServiceListActivity data2 = ", data.size()+"");
                    myListAdapter.notifyDataSetChanged();
                    Toast.makeText(ServiceListActivity.this, "finished", Toast.LENGTH_SHORT).show();
                }   
                break;
            }
        } 
```

我无法解决这个问题，所以请有人帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T07:25:34.753

尝试这样调用：

```
runOnUiThread(new Runnable() {
     public void run() {
         myListAdapter.notifyDataSetChanged();
     }
}); 
```

更新 ：

在 Handler 之外的某个地方声明这个 Runnable。

```
Runnable run = new Runnable(){
     public void run(){
         myListAdapter.notifyDataSetChanged();
     }
}; 
```

然后从您的处理程序中调用它。

```
yourActivity.runOnUiThread(run); 
```

我认为您从 Handler 拨打电话正在制造问题。

希望这能解决您的问题。

谢谢。

# c++ - 在 FTP 服务器中正确实施 LIST 命令

> ID：13775257
> 
> 赞同：1
> 
> 时间：2012-12-08T06:49:51.487
> 
> 标签：c++, linux, qt, ftp, ftp-server

我正在尝试使用 Qt 构建一个简单的 FTP 服务器，但是当我连接到它并使用 Linux 命令行 ftp 客户端键入“ls”时，我得到了目录列表，但最后有一个警告：

```
WARNING! 30 bare linefeeds received in ASCII mode 
```

这个警告是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T06:54:22.177

来自[RFC959](http://www.faqs.org/rfcs/rfc959.html)：

> ```
> 行结束
> 
>   行尾顺序定义了打印的分隔
>   线。顺序是回车，然后是换行。
> 
> ```

您使用 FTP 发送的所有文本都应该有换行符 as `"\r\n"`，显然您没有。您必须修改发送给客户端的文本，确保它具有正确的行尾。

# java - 如何使用“where”参数在数组末尾添加图片？

> ID：13775258
> 
> 赞同：0
> 
> 时间：2012-12-08T06:50:05.843
> 
> 标签：java

该方法应该是在`where`参数值给定的位置插入图片。

我对如何使用`where`参数感到困惑。

这是我到目前为止所拥有的：

```
public boolean addPicture( Picture thePicture, int where )
{
    int index = where; 
    while( index < pictArray.length )
    {
        pictArray[pictArray.length - 1] = thePicture;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:01:29.483

如果您已经知道在哪里添加图片，只需将其添加到图片数组索引 1 位置上的那个位置。这是因为 java 中的索引是从 0 开始的，但我们人类是从 1 开始的。

就像根据用户将其添加到第三个位置一样。他在 Where 变量中输入 3。Java 必须将它存储在数组的索引 2 上。

```
PicArray[index-1]=picture; 
```

# python - Django - 使用表单集在不通过表的情况下建立 2 个模型之间的多对多关系

> ID：13775261
> 
> 赞同：4
> 
> 时间：2012-12-08T06:50:27.933
> 
> 标签：python, django, forms

我有一个模型属性和产品，声明如下：

```
class Attribute(models.Model):
    value = models.TextField()
    owner = models.ForeignKey(User)
    type = models.ForeignKey(AttributeType)     
    image = ImageField(upload_to='attributes', null=True, blank=True)     
    related_attribute = models.ManyToManyField('self', blank = True, null = True) 

class BaseWorkspace(models.Model):
    name = models.CharField(max_length=255)
    owner = models.ForeignKey(User)
    attributes = models.ManyToManyField('Attribute', blank = True, null = True)
    created = CreationDateTimeField()
    modified = ModificationDateTimeField()
    comments = models.ManyToManyField('Comment', blank = True, null = True )
    sort_order = models.IntegerField(blank = True)

class Product(BaseWorkspace):
    project = models.ForeignKey('Project', related_name='products') 
```

如何使用表单集建立 mm 关系？我尝试过这样的模型表单集工厂：

```
AttributeFormset = modelformset_factory(Attribute, form=AttributeForm) 
```

在通用视图中使用此功能：

```
def form_valid(self, form):
        f = form.instance
        f.sort_order = Product.default_sort_order()
        f.owner = self.request.user
        f.project = get_object_or_404(Project, pk=self.kwargs['pk'])
        context = self.get_context_data()
        attribute_form = context['attribute_form']
        if attribute_form.is_valid():
            self.object = form.save()
            attribute_form.instance = self.object
            attribute_form.save()
            return HttpResponseRedirect(reverse(self.get_success_url()))
        else:
            return self.render_to_response(self.get_context_data(form=form)) 
```

但我无法让它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:09:00.900

尝试这样的事情：

```
from django.forms.models import modelformset_factory
def my_view_function(request) :

    # not sure where the product whose formset we are working on comes from
    product = <whatever>

    AttributeFormSet = modelformset_factory(Attribute)

    if request.method == "POST" :
        # POST bound formset
        formset = AttributeFormSet(request.POST, queryset=Attribute.objects.filter(product=product))
        # If the entire formset is valid
        if formset.is_valid() :
            for form in formset:
                # Save each form in the set
                b = form.save()
        else : 
            #There was an error (add a message using the messages framework?)
            pass
    else :
        # initial formset w/o post
        formset = AttributeFormSet(queryset=Attribute.objects.filter(product=product))

    ... 
```

很难给您更具体的答案，我认为如果您使用基于类的视图，我们将需要整个视图函数或视图类。

在您的模板中，像这样简单的事情（来自文档）应该可以做到。

```
<form method="post" action="">
    {{ formset.management_form }}
    <table>
        {% for form in formset %}
        {{ form }}
        {% endfor %}
    </table>
</form> 
```

如果您需要能够在运行时使用 javascript 将表单添加到表单集，请查看：[http](http://code.google.com/p/django-dynamic-formset/) ://code.google.com/p/django-dynamic-formset/ 。我从未使用过它，但至少它看起来像是朝着正确方向迈出的一步。

# 编辑

首先从表单集中排除产品

```
AttributeFormSet = modelformset_factory(Attribute, exclude=('product',)) 
```

然后将表单处理块更改为在保存时不提交，并手动附加产品。

```
 if formset.is_valid() :
            for form in formset:
                # get this form's instance
                b = form.save(commit=False)
                # attach product
                b.product = product
                # save the instance
                b.save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:19:23.727

通过使用`f = form.instance`您可以访问原始实例。如果attribute_form 是有效的，你调用save 方法`form`，而不是`f`。您所做的所有更改`f`都将丢失。

看看[save-objects-in-the-formset](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#saving-objects-in-the-formset)如何在保存表单集的实例之前更新它们。

# wolfram-mathematica - 为什么当我访问我的链表时，mathematica 内核会崩溃？

> ID：13775274
> 
> 赞同：3
> 
> 时间：2012-12-08T06:52:00.327
> 
> 标签：wolfram-mathematica

我正在使用mathematica 7，并且正在尝试使用单链表（~50,000 个元素）来避免在动态列表中使用 AppendTo 来提高速度。在这个测试中，我可以创建一个包含 10 个元素的列表，如下所示

```
list1 = Fold[{#1, #2} &, {}, RandomInteger[10^5, 10]] 
```

我尝试`Part`像这样访问它（访问一个随机元素 100 次）

```
Timing[list1[[Sequence @@ ConstantArray[1, #], 2]] & /@RandomInteger[{1,10}, 100]] 
```

这适用于小列表（如上的 10 个）。由于我不明白的原因，当列表有更多元素（如 10^4）时，这会杀死内核。我试过在这个网站和其他地方四处寻找，但就是不知道我应该如何使用链接列表。我什至尝试过使用不同的实现，`f[e1,f[e2,f[e3,...f[]...]]]`但我不知道在使用此方案时访问和操作元素的好方法。我想这个问题必须解决，`$RecursionLimit`但我不知道如何解决它。

特别是我希望能够使用

```
list1[[Sequence @@ ConstantArray[1, index], 2]] = new value 
```

在我的代码中。同样，这在列表很小但最终会导致较大列表崩溃的情况下有效。奇怪的是内核并不总是崩溃，而只是随机地用于大型列表。这听起来类似于[在 SE 上](https://stackoverflow.com/questions/5095505/mathematica-linked-lists-and-performance)描述的内容，但我不知道该讨论是否相关。真的，我只需要帮助修改 LL 元素并在mathematica 中正确使用 LL。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T12:14:30.273

我可以确认崩溃，但只有更深入的`Part`规范：

```
n = 5000000;

list1 = Fold[List, {}, RandomInteger[10^5, n]];

Do[
 list1[[Sequence @@ ConstantArray[1, i], 2]] = "token"; Print[i],
 {i, 100000, 200000, 10000}
] 
```

> 100000 110000 120000 130000 140000 150000 160000 170000

所以在我的系统上，崩溃发生的深度超过 170,000。它也会发生，至少在这个深度，只有在分配一个部分而不是仅仅提取一个时：

```
Timing[
 list1[[##, 2]] & @@ ConstantArray[1, #] & /@ RandomInteger[{1, n - 1}, 10]
] 
```

> ```
> {1.03, {77041, 74008, 29990, 13286, 12762, 48702, 76027, 25009, 31267, 1887}} 
> ```

* * *

# 推荐

作为替代方案，我建议使用[`Internal`` `*Bag*`函数](https://stackoverflow.com/a/6795762/618728)。

```
n = 5000000;

list2 = Internal`Bag @ RandomInteger[10^5, n];  (* fill our Bag *)

Internal`StuffBag[list2, 27182];  (* add an element to the Bag *)

Internal`BagLength @ list2  (* check the length of our Bag *) 
```

> ```
> 5000001 
> ```

```
pos = RandomInteger[{1, n}, 10];  (* pick ten random positions *)

(* assign to those positions values 1 through 10 *)
MapIndexed[
  (Internal`BagPart[list2, #] = #2[[1]]) &,
  pos
];

Internal`BagPart[list2, pos]  (* check the contents of those positions *) 
```

> ```
> {1, 2, 3, 4, 5, 6, 7, 8, 9, 10} 
> ```

```
(* convert our Bag into a standard list *)
flat = Internal`BagPart[list2, All];

flat[[pos]]  (* check the contents again *) 
```

> ```
> {1, 2, 3, 4, 5, 6, 7, 8, 9, 10} 
> ```

```
Last @ flat  (* check that the element we appended is still there *) 
```

> ```
> 27182 
> ```

# c# - 如何从facebook刷新访问令牌？

> ID：13775276
> 
> 赞同：1
> 
> 时间：2012-12-08T06:52:20.167
> 
> 标签：c#

由于我是 .Net 的新手，我现在正在使用的 facebook 遇到一些问题。大家好，我正在使用此代码访问 Facebook 朋友信息。在这里，我手动从 facebook 获取访问令牌。为此，我每次都需要登录我不想要的 facebook。我希望在运行我的应用程序时刷新我的访问令牌。有什么办法可以做到这一点。请帮帮我

```
enter code here
private void button1_Click(object sender, EventArgs e)
{
   String strAccessToken ="";
   var client = new FacebookClient(strAccessToken);
   var result = client.Get("me/friends");

} 
```

# javascript - 使用正则表达式搜索 div 类

> ID：13775282
> 
> 赞同：9
> 
> 时间：2012-12-08T06:53:11.147
> 
> 标签：javascript, regex, class, html

听起来很简单，嗯。我找到了很多答案，但都使用 jQuery 或 ProtoType。我想要纯 JavaScript。应该没那么难，但 JavaScript 不是我的菜；没有中央文档意味着搜索年龄而不是找到我想要的东西。

考虑以下 HTML 代码片段：

```
<div class="central_0"> .. </div>
<div class="central_1"> .. </div>
<div class="central_2"> .. </div> 
```

现在我想使用 JavaScript 来处理这些 DIV。

```
function processDivElements()
{
 // search for relevant DIV classes
 var divArray = document.getElementsByClass.regex('/^central_.*$/');

 // do stuff with the DIV elements found
 foreach (divArray as divElement)
 {
   divElement.style.background = '#f00';
 };
} 
```

谁能帮我把它翻译成正确的**纯**JavaScript？我使用类，而不是 ID。我更喜欢使用正则表达式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-08T07:00:09.777

jQuery 解决方案非常好：

```
var $divs = $('div[class^="central_"]'); 
```

如果您只想支持较新的浏览器，您可以使用[`document.querySelectorAll()`](https://developer.mozilla.org/en-US/docs/DOM/document.querySelectorAll)做基本相同的事情：

```
var divs = document.querySelectorAll('div[class^="central_"]'); 
```

如果你想支持旧版浏览器，代码会变得很糟糕：

```
var all_divs = document.getElementsByTagName('div');
var divs = [];

for (var i = 0; i < all_divs.length; i++) {
    var div = all_divs[i];

    if (div.className.match(/^central_\d+$/) {
        divs.push(div);
    }
} 
```

还：

> 我使用类，而不是 ID。我更喜欢使用正则表达式。

您的类是独一无二的，并且确实像 ID 一样运作，这并不是类的真正预期用途。像这样构建您的 HTML：

```
<div id="central_0" class="central">...</div>
<div id="central_1" class="central">...</div>
<div id="central_2" class="central">...</div> 
```

现在，JavaScript 变得更简单了：

```
var $divs = $('.central');                               // jQuery
var divs =  document.querySelectorAll('.central');       // Newer browsers
var divs =  document.getElementsByClassName('central');  // Older browsers 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T07:08:35.267

正如其他人所提到的，您不能直接支持`getElementsByClassName`方法调用上的正则表达式选择。

但我会指出您的代码的这些其他问题，因为您是 javascript 新手。

使用类很好，但是通过像这样编写 html 来为自己做更多的工作。

`central_0....central_2`如果它们基本上都在相同的 css 规则上运行，您应该像这样编写它们，`central zero....central two`然后您的`central`类可以具有相同的规则，而您可以将任何差异分配给类，而不是它们基本上都在相同的 css 规则上运行`#`。这样你也秉承了[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

此外，您应该真正考虑坚持该语言的最佳实践。如果您没有为这些类的元素分配 css 规则，那么您应该使用`id's`，而且它使您的生活更轻松。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T07:01:47.783

没有办法直接通过正则表达式获取匹配的元素，您唯一可以做的就是通过某些东西（例如：TagName、Name 等）获取所有元素，然后通过正则表达式过滤元素。

使用您的 html 示例，您只能通过 TagName 获取所有元素，并使用 regex 来检查`className`by regex。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-20T18:22:23.587

一种更快的方法是创建一个简单`<style>`的如下：

```
<style>
    div[class^="central_"] {
        background-color: #f00;
    }
</style> 
```

因此，当您寻找**普通的 javascript**时，不用说您可以`<style>`使用 javascript 随意添加标签。一个完整的 HTML 示例如下：

```
<html>
<head>
</head>
<body>
    <div class= "central_1">
        central 1
    </div>

    <script>
        var css = "<style>div[class^=\"central_\"] {background-color: #f00;}</style>";
        var list = document.querySelector("head"); list.innerHTML += css;
    </script>

</body>
</html> 
```

# azure - 枚举 azure rest 调用响应时出现 Mime-Type 异常

> ID：13775287
> 
> 赞同：1
> 
> 时间：2012-12-08T06:53:52.413
> 
> 标签：azure, odata, azure-storage, azure-table-storage

我正在使用 Azure SDK 2012 年 10 月。.NET 的存储客户端库中的 ODataLib 依赖项是通过 ODataLib（版本 5.0.2）解决的。当我对 azure 表发起查询时，出现以下异常：

```
A supported MIME type could not be found that matches the content type 
    of the response. None of the supported type(s) 'application/atom+xml;type=feed,
    application/atom+xml, application/json;odata=verbose' matches the content type
   'text/xml;charset=utf-8'. 
```

当我使用**Fiddler**跟踪 HTTP 的标头值时，

对于请求它是

```
Accept: application/atom+xml,application/xml 
```

对于响应它是

```
Content-Type: text/xml;charset=utf-8 
```

我确信这是因为我的组织中的代理而发生的。（bcs 相同的代码在没有代理的情况下工作正常）。那么谁能帮我解决这个问题？

1) 有没有办法在触发查询时设置 Content-Type？

2) 还是 ODataLib 不处理 Content-Type: text/xml;charset=utf-8 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T22:02:17.277

ODataLib 使用 Content-Type 标头来确定应将响应解析为哪种格式。“text/xml”MIME 类型不是每个 OData 的有效内容类型，这就是您收到错误的原因。

如果您有一个将“application/xml”转换为“text/xml”的代理，那么您需要在将它传递给 ODataLib 之前在某个层撤消它。我对 .Net 的存储客户端库没有任何经验，因此我不确定在 ODataLib 解析有效负载之前您对修改响应标头有什么级别的控制，但是如果您可以覆盖响应的 Content-直接键入标题，您可以将“text/xml”改回“application/xml”（或“application/atom+xml”）。

如果您直接使用 ODataLib（或者如果您在其之上使用的库公开了 IODataResponseMessage 实现），您可以修改 IODataResponseMessage.GetHeader() 的实现以在任何尝试返回时返回“application/xml”当方法的输入为“Content-Type”时为“text/xml”。

此外，要回答您的第一个问题，在请求时设置内容类型的方法是通过 Accept 标头，这在您的情况下已经是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:00:46.723

我们解决了如下问题。

借助**Fidler的“** **Rules** ”菜单下的**“Costomize Rules”**选项，打开“ **CustomRules.js** ”文件。存在一个名为“ **OnBeforeResponse** ”的函数。在此函数中添加以下代码以在将数据提供给应用程序 (API) 之前更改响应 Content-Type。

 ******```
if (oSession.oResponse.headers.ExistsAndContains("Content-Type", "text/xml")){
    // Remove the content-type header (text/xml)
    oSession.oResponse.headers.Remove("Content-Type");

    // Replace Content-Type with the new type
    oSession.oResponse["Content-Type"] = "application/atom+xml";        

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:56:00.317

虽然提出的解决方案可能有效，但更简单的解决方案是使用 HTTPS 来避免让代理替换标头。如果您的要求仍是使用 HTTP，则可以修改存储客户端代码以在 OData 库解析之前手动替换此标头（请参阅 HttpResponseAdapterMessage.cs GetHeader 函数）。

乔******

# nsis - 安装程序将文件添加到已安装包的目录

> ID：13775288
> 
> 赞同：0
> 
> 时间：2012-12-08T06:53:57.687
> 
> 标签：nsis

我是 NSIS 的新手，我计划`A`使用 NSIS 分发一个程序。现在我想提供一个附加组件`A1`（不能作为`A`其自身的一部分分发），它必须将其文件放入目录中`A`，如果`A`根本没有安装则失败。我还希望能够安装更新版本而`A`无需重新安装`A1`.

NSIS有可能吗？您能否提供此类部署的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:50:39.167

对于**一个**，您只需使用`InstallDirRegKey`并将其指向您的卸载注册表项，以便新版本安装在旧版本之上。

对于**A1**，您应该使用`InstallDirRegKey`读取**A**的密钥，然后使用[`.onVerifyInstdir`回调](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#onverifyinstdir)验证此位置，如果未选择正确的目的地，这将阻止用户单击目录页面上的下一步...

# ruby-on-rails - 注册表单的进度指示器

> ID：13775290
> 
> 赞同：1
> 
> 时间：2012-12-08T06:54:15.827
> 
> 标签：ruby-on-rails, jquery-ui, events, raphael, justgage

由于我主要专注于开发主页，因此我无法开始解决这个问题。

希望有一个注册表单的进度指示器，当表单接近完成时明显显示进度，但它是一个单页表单，只有 6 个输入字段。

[这是](http://justgage.com/)用于指标的库，我被告知使用 jQuery 库。这是`js`指标 -

```
<script>
  var front_index_gage = new JustGage({
    id: "front_gage", 
    value: 3, 
    min: 0,
    max: 100,
    title: "Signup Progress",
    startAnimationType: "bounce",
    refreshAnimationType: "bounce",
    refreshAnimationTime: 1500,
    startAnimationTime: 1500

  }); 
</script> 
```

显然，我需要为 value 字段编写一些动态的东西，但是我会使用 .keypress() 或 .focus() 之类的东西来进行事件调用吗？

我的实施方法应该是什么？感谢您的关注和查看。

===========更新=========

我改变了使用模糊处理的进度指示器 div 的背景颜色，我认为这是解决方案。我已经根据他们的 api 来操纵实际进度条，我应该能够在进度指示器上调用刷新并更新值，对吗？在这种情况下从`3`到`16`

咖啡-

```
jQuery ->
 $("#user_first_name").blur (event) ->
  $("#front_gage").refresh "value", 16 
```

还没有条件（如果没有输入），但我相信这个简单的 hello world 实现应该可以工作，但事实并非如此。

![6输入表格](../Images/17da31b7ba64d6bbe83d2dbb0b358748.png)

# jquery - 在子框架的父窗口中使用加载的 Jquery

> ID：13775296
> 
> 赞同：0
> 
> 时间：2012-12-08T06:54:36.070
> 
> 标签：jquery, frame

我是否可以在该窗口内的子 iframe 中使用我在窗口中加载的 JQuery。我不想在帧中多次加载 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:04:21.820

有可能，但它需要一些工作：[inherit.js - 父母和 iFrames 之间的 jQuery 共享](http://snipplr.com/view/15393/inheritjs--jquery-sharing-between-parents-and-iframes/)

需要考虑的一件事是，浏览器会缓存像 jQuery 这样的资源（假设它按照通常的方式提供，标头说它可以被缓存）。在主窗口和 iframe(s) 中引用相同的 jQuery 源将使用缓存文件。因此，除非您出于其他原因需要它，否则复杂的解决方法似乎并不是特别有用。

# c# - asp.net中的确认对话框？

> ID：13775303
> 
> 赞同：2
> 
> 时间：2012-12-08T06:57:03.980
> 
> 标签：c#, javascript, asp.net, .net

在网络应用程序中，我正在尝试编写这样的代码。

```
protected void Button1_Click(object sender, EventArgs e)
{
    Button1.Attributes.Add("onclick", "if(confirm('Are you sure to delete?')){}else{return false}");

    Response.Write("hi");
} 
```

但是当我第一次点击按钮时它显示“hi”而没有确认，第二次 onwords 它显示确认。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:01:17.957

您当前正在做的是在第一次单击按钮时在 javascript 中添加一个 onclick 属性。然后每次单击按钮时都会输出“hi”。

您需要在[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)的早期添加 onclick 属性，可能在 Page_Load 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T07:08:15.263

将您的 JavaScript 放入标记中：

```
<asp:Button runat="server" OnClick="Button1_Click" OnClientClick="return confirm(...)" /> 
```

# xml - 新的 DOMDocument 参数

> ID：13775305
> 
> 赞同：1
> 
> 时间：2012-12-08T06:57:08.867
> 
> 标签：xml, dom

PHP：5.2.4

```
$xml=new DOMDocument('1.0','utf-8');  
$root=$xml->createElement('root');   
$xml->appendChild($root);  
$book=$xml->createElement('book');  
$root->appendChild($book);  
$node=$xml->createTextNode('who move my apple');  
$book->appendChild($node);  
echo $xml->save('./xml.xml')?'ok':'error';  
Warning: domdocument::domdocument() expects parameter 2 to be long, string given in C:\wamp\www\xu\index.php on line 2

Fatal error: Call to undefined method domdocument::createElement() in C:\wamp\www\xu\index.php on line 3 
```

为什么会出现警告，并且参数正确写入应该是什么。

# ruby - 以下模式的正则表达式

> ID：13775310
> 
> 赞同：0
> 
> 时间：2012-12-08T06:58:09.177
> 
> 标签：ruby

我需要一个匹配此文本的正则表达式：

```
894975||0||Lever 2000 Anti-Bacterial Bar Soap ||Health & Spa/Personal Care/Body Care/Soap 
```

我想搜索文本，并在两组管道后匹配“Bar Soap”。

如果单词不按顺序排列，则不匹配。我的正则表达式是：

```
/^(?:\d+\|\|).?\|\|[^|]*?(Bar[^|]*? Soap)/i 
```

当“soap”排在第一位，“bar”排在第二位时，这不匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:14:35.957

首先，将行拆分为元素：

```
product = str.split(/\|\|/)[2] 
```

然后，尝试检查它是否包含“bar”和“soap”：

```
puts "match" if product =~ /bar/i and product =~ /soap/i
puts "match" if product =~ /bar.*soap|soap.*bar/i
puts "match" if product =~ /(?=.*bar)(?=.*soap)/i 
```

[添加]

如果你想使用变量 match_terms，试试这个：

```
re = match_terms.split(/,/).map { |t| "(?=.*#{Regexp::quote t})" }.join ""
puts "match" if product =~ /#{re}/i 
```

或者

```
terms = match_terms.upcase.split(/,/)
puts "match" if terms.select { |t| product.upcase.include? t }.size == terms.size 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T22:14:00.277

示例数据看起来像`'|'`您从数据库提取中看到的标准管道分隔 ( ) 文件。通常会在输出中看到具有空值的字段`||`。

与其尝试使用正则表达式对其进行解析，不如通过拆分管道来处理它，或者将其视为 CSV 记录，使用管道而不是逗号作为列分隔符。`||`如果您获得字段实际包含内容的记录，则在双管道 ( ) 上拆分将失败。

这是两个不同的示例，展示了我是如何做到的。第一个是拆分`|`成字段。

```
text = '894975||0||Lever 2000 Anti-Bacterial Bar Soap ||Health & Spa/Personal Care/Body Care/Soap'
fields = text.split('|') 
```

`fields`此时看起来像：

```
[
    [0] "894975",
    [1] "",
    [2] "0",
    [3] "",
    [4] "Lever 2000 Anti-Bacterial Bar Soap ",
    [5] "",
    [6] "Health & Spa/Personal Care/Body Care/Soap"
] 
```

抓取第五个字段检索产品：

```
product = fields[4]
=> "Lever 2000 Anti-Bacterial Bar Soap" 
```

第二种方法是将内容视为带有`|`分隔符的 CSV 文件：

```
require 'csv'

text = <<EOT
894975||0||Lever 2000 Anti-Bacterial Bar Soap ||Health & Spa/Personal Care/Body Care/Soap
EOT

CSV.parse(text, :col_sep => '|') do |row|
  puts row[4]
end

=> "Lever 2000 Anti-Bacterial Bar Soap" 
```

使用 CSV 执行此操作的优点是可以`|`在文本中找到一个字符，并且 CSV 将正确处理解码嵌入式管道。

因为只有一个样本输入行，所以这个解决方案再彻底不过了。

# c# - 如何在窗口应用程序c#中更改app.config文件

> ID：13775313
> 
> 赞同：0
> 
> 时间：2012-12-08T06:58:34.690
> 
> 标签：c#, .net, windows-applications

我有一个窗口应用程序，并且我在其中使用了电子邮件功能，并且电子邮件设置位于 app.config 文件中。如下所示

```
<system.net>
<mailSettings>
  <smtp from="email@gmail.com">
    <network host="smtp.gmail.com" port="587" userName="username" password="password" enableSsl="true" />

  </smtp>
</mailSettings>
</system.net> 
```

我想使用上述部分的编码进行更改..我必须通过 smtp 中的编码和配置文件中的网络部分进行更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:03:19.517

我找到了解决方案....

```
 FileInfo objFileInfo = new FileInfo(Assembly.GetExecutingAssembly().Location + ".config");
            XmlDocument objXmlDoc = new XmlDocument();
            objXmlDoc.Load(objFileInfo.FullName);
            XmlElement objElement = objXmlDoc.DocumentElement;
            XmlNode objAppSettingNode = objElement.SelectSingleNode("appSettings");

            foreach (XmlNode appSetting in objAppSettingNode)
            {
                if (appSetting.Name.Equals("add"))
                {
                    appSetting.Attributes["value"].Value = txtEmailAddress.Text.Trim();
                }

            }

            XmlNode objMailSettingNode = objXmlDoc.DocumentElement.SelectSingleNode("system.net/mailSettings");
            if (objMailSettingNode != null)
            {
                foreach (XmlNode childNode in objMailSettingNode)
                {
                    if (childNode.Name.ToLower().Equals("smtp"))
                    {
                        childNode.Attributes["from"].Value = txtEmailAddress.Text.Trim();
                        foreach (XmlNode networkNode in childNode)
                        {
                            if (networkNode.Name.ToLower().Equals("network"))
                            {
                                networkNode.Attributes["host"].Value = txtSmtp.Text.Trim();
                                networkNode.Attributes["userName"].Value = txtEmailAddress.Text.Split('@')[0].Trim();
                                networkNode.Attributes["password"].Value = txtPassword.Text.Trim();
                                networkNode.Attributes["port"].Value = txtPort.Text.Trim();
                            }
                        }
                    }
                }
            }

            objXmlDoc.Save(objFileInfo.FullName);
            lblErrormsg.Text = string.Empty;
            this.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:08:37.557

我想您是在问如何以编程方式执行此操作？

这里有一个答案：

[使用 C# 通过 Gmail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/704636/sending-email-through-gmail-smtp-server-with-c-sharp)

另外，msdn 网站上的一个很好的例子：

[http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)

如果这不是你要问的，请告诉我..

**编辑：一旦问题明确就显示答案：**

[如何在不使用用户设置的情况下在运行时读取/写入 app.config 设置？](https://stackoverflow.com/questions/3638754/how-can-i-read-write-app-config-settings-at-runtime-without-using-user-settings)

祝你好运

# c++ - RVO 与 std::unique_ptr<> 清理

> ID：13775315
> 
> 赞同：1
> 
> 时间：2012-12-08T06:58:36.950
> 
> 标签：c++, c++11, return-value-optimization, object-destruction

这是关于对象销毁与返回值优化的 C++ 规范的问题。

我可以期望 RVO 在`std::unique_ptr<>`清理之前返回正确的值吗？

```
Foo
Bar()
{
  std::unique_ptr<Foo> ptr = new Foo;
  return *ptr;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T07:05:28.057

无论有没有 RVO，它都会返回正确的值（在这种情况下没有 RVO）。该函数返回一个具体的`Foo`，因此`*ptr`将在指针销毁之前*复制*到返回值中。

这意味着，

```
Foo foo;
foo = Bar(); 
```

类似于（将 unique_ptr 展开更明确）

```
 Foo foo;
  Foo* ptr = new Foo;
  foo = *ptr;
finally:
  delete ptr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T07:21:31.750

当函数返回类类型对象时，仅在两种情况下允许使用 RVO：

*   返回的表达式是非易失性自动对象的名称，或者
*   返回的表达式引用了一个尚未绑定到引用的临时对象。

所以你的代码不会触发 RVO。

如果`Foo`对象声明为自动存储，则允许编译器执行 RVO：

```
Foo bar()
{
    Foo foo;
    return foo;    // foo can be constructed directly as the returned object
} 
```

如果由于某种原因您必须使用创建对象`new`并希望消除复制操作，您可以使用`std::move`，它将表达式更改为右值：

```
Foo bar()
{
    std::unique_ptr<Foo> ptr(new Foo);
    return std::move(*ptr);    // No deep copy if Foo implements
                               // its own move constructor
} 
```

# objective-c - 有没有一种优雅的方法可以在 Objective-C 中的对象的生命周期中执行一次代码？

> ID：13775317
> 
> 赞同：0
> 
> 时间：2012-12-08T06:58:50.897
> 
> 标签：objective-c, c, cocoa

有时我想在对象的生命周期中执行一次代码。过去我设置了一个`BOOL`可以检查的属性，但这有点尴尬。Objective-C 中是否有一些内置的东西可以优雅地完成这个任务？有点像`dispatch_once`，但与对象相关，而不是应用程序的生命周期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T10:45:53.637

根据[苹果文档](http://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/c/func/dispatch_once) `dispatch_once`，在这种情况下不应该使用！

> 谓词必须指向存储在全局或静态范围内的变量。**使用带有自动或动态存储的谓词的结果是未定义的。**

另一种方法是使用[原子操作](https://developer.apple.com/library/mac/#documentation/System/Reference/OSAtomic_header_reference/Reference/reference.html)。这样，还可以确保代码在对象的生命周期内只执行一次。

```
@implementation MyClass {
    // int32_t initialized;
    BOOL initialized;
}

- (void)myMethod {
    dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // if (OSAtomicTestAndSetBarrier(1, &initialized) == NO) {
        if (!initialized) {
           // do stuff once

           initialized = YES;
        }
    });
};

@end 
```

编辑：`initialized`一直是 BOOL 类型，由于 Chris Devereux 和 Stephen Canon 的评论，该类型已得到纠正。

编辑：正如 Catfish_Man 指出的那样，使用原子操作可能会导致问题。因此，您必须使用 dispatch_sync 或类似的东西来包装整个东西，这使得使用原子操作变得毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T07:04:29.960

您可以使用 dispatch_once_t 实例变量来执行此操作。如果您要在多个线程上使用此对象，请注意微妙的线程问题（并非特定于 dispatch_once）。您需要在 init 结束时设置内存屏障，以确保 ivar 的初始化在对象对多个线程可见之前已完成。

# javascript - Javascript 界面不适用于 android 4.2

> ID：13775320
> 
> 赞同：22
> 
> 时间：2012-12-08T06:59:11.660
> 
> 标签：javascript, android, css, webview

我正面临一个严重的 android OS Jelly Bean 4.2 错误，在我的程序中，我使用 JavaScript 来获取网页的高度，它在 android 2.2 到 4.1 中完美运行，但是当我尝试在 android 4.2 中使用相同的代码时JavaScript 界面不工作。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-18T20:50:42.030

来自 Android 4.2 文档：

> 注意：如果您将 targetSdkVersion 设置为 17 或更高，则必须将 @JavascriptInterface 注释添加到您希望网页代码可用的任何方法（该方法也必须是公共的）。如果您不提供注释，则在 Android 4.2 或更高版本上运行时，您的网页将无法访问该方法。

来源：[Android WebView 文档](http://developer.android.com/guide/webapps/webview.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-11-15T06:30:32.350

而且，如果你使用 Proguard，记得添加这个

```
-keepclassmembers class * {
    @android.webkit.JavascriptInterface <methods>;
}

-keepattributes JavascriptInterface
-keep public class com.mypackage.MyClass$MyJavaScriptInterface
-keep public class * implements com.mypackage.MyClass$MyJavaScriptInterface
-keepclassmembers class com.mypackage.MyClass$MyJavaScriptInterface { 
    <methods>; 
} 
```

如果还是不行就加这个

```
-keepattributes *Annotation* 
```

注意：您的 MyJavaScriptInterface 必须是 Public 类

Ref#: [Android Proguard Javascript 接口失败](https://stackoverflow.com/questions/6271485/android-proguard-javascript-interface-fail?rq=1)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-17T10:23:52.163

根据文档：[Android doc](http://developer.android.com/reference/android/webkit/WebView.html) 从 Android 4.2 开始，您必须使用 @JavascriptInterface 注释您的方法（并且您的方法必须是公开的）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-08-04T22:07:17.493

适用于我的目标 API 17+ 的 Proguard 配置：

```
-keep @interface android.webkit.JavascriptInterface
-keepclassmembers class * {
    @android.webkit.JavascriptInterface <methods>;
} 
```

# python - Python 即时通讯程序

> ID：13775322
> 
> 赞同：-3
> 
> 时间：2012-12-08T06:59:19.990
> 
> 标签：python, sockets

我想使用 python 套接字创建一个服务器，多个客户端可以连接到并回显文本输入。有没有我可以用几行代码设置的基本服务器？我已经准备好客户端连接我只需要知道这些客户端连接的基本 python 套接字服务器是什么样的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T09:39:16.000

如果您想要两个以上的用户，我建议您检查是否最好安装 xmmp/jabber 服务器。

# Python 套接字

Python 的套接字文档也有一些简单的例子，展示了简单的聊天功能。请参阅：[http](http://docs.python.org/2/library/socket.html#example) ://docs.python.org/2/library/socket.html#example 。

这是一个应该可以解决问题的小片段。它不会产生很好的输出，但它应该可以工作。它使用两个线程来避免启动两个不同的脚本。

```
# Echo server program
import socket
import thread

TARGET = None
DEFAULT_PORT = 45000

def reciever():
    """ Recive messages... """

    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
    s.bind(('', DEFAULT_PORT)) # Listens on all interfaces... 
    s.listen(True) # Listen on the newly created socket... 
    conn, addr = s.accept()
    while True:
        data = conn.recv(1024)
        print "\nMessage> %s\n" % data

def sender():
    """ The 'client' which sends the messages """

    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((TARGET, DEFAULT_PORT)) # Connect... 

    while True: 
        msg = raw_input("\nMe> ")
        s.sendall(msg)
    s.close()

while not TARGET:
    TARGET = raw_input("Please specify the other client to connect to: ")

thread.start_new_thread(reciever, ())
thread.start_new_thread(sender, ())

while True:
   pass 
```

# XMLRPC

如果您需要两个以上的用户，您还可以查看 Python 的 XMLRPC 功能。例如...

## 服务器：

这个迷你服务器允许用户为用户发送消息。然后服务器将它们保存到一个小的 json 文件中。然后，客户端可以为给定用户请求新消息。

```
import json
import os.path

from SimpleXMLRPCServer import SimpleXMLRPCServer

""" 
Saves messages as structure: 

{
    'client1':['message1', 'message2'], 
    'client2':['message1', 'message2']
}
"""

STORAGE_FILE = 'messages.json'

def save(messages):
    msg_file = open(STORAGE_FILE, 'w+')
    json.dump(messages, msg_file)

def get():
    if os.path.exists(STORAGE_FILE):
        msg_file = open(STORAGE_FILE, 'r')
        return json.load(msg_file)
    else: 
        return {}

def deliver(client, message):
    """ Deliver the message to the server and persist it in a JSON file..."""

    print "Delivering message to %s" % client

    messages = get()
    if client not in messages:
        messages[client] = [message]
    else: 
        messages[client].append(message)
    save(messages)

    return True

def get_messages(client):
    """ Get the undelivered messags for the given client. Remove them from
    messages queue. """
    messages = get()
    if client in messages:
        user_messages = messages[client]
        messages[client] = []
        save(messages)
        return user_messages
    else: 
        return []

server = SimpleXMLRPCServer(("localhost", 8000))
print "Listening on port 8000..."
server.register_function(deliver, 'deliver')
server.register_function(get_messages, 'get_messages')
server.serve_forever() 
```

## “客户”

为用户发送消息和获取消息的示例用法。

```
import xmlrpclib

# Connect to the 'Server'...
proxy = xmlrpclib.ServerProxy("http://localhost:8000/")

# Send a message...
proxy.deliver('username', 'The message to send')

# Recieve all messages for user..
for msg in proxy.get_messages('username'):
    print "Message> %s" % msg 
```

**请注意：**这些只是简单的示例。两者都不是真正安全的，因为没有完成发件人/收件人验证。此外，没有运输安全性，因此消息可能会丢失。

对于很多用户来说，最好使用[DBMS](http://en.wikipedia.org/wiki/Database_management_system)系统而不是简单的 JSON 文件。

正如尼克 ODell 所说，如果你想要一个简单的 shell 脚本，我也建议你使用 netcat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T01:18:20.063

不完全符合您的要求，但以下程序和文件提供了您可能想要使用的 GUI 客户端和一些服务器。您将需要 Python 3.x 来运行此处显示的代码：

* * *

**MultichatClient.py**

```
#! /usr/bin/env python3
from safetkinter import *
from tkinter.constants import *
import socket
import sys

class MultichatClient(Frame):

    after_handle = None

    def __init__(self, master, remote_host):
        super().__init__(master)
        self.message_area = ScrolledText(self, width=81, height=21,
                                         wrap=WORD, state=DISABLED)
        self.message_area.grid(sticky=NSEW, columnspan=2)
        self.send_area = Entry(self)
        self.send_area.bind('<Return>', self.keyPressed)
        self.send_area.grid(sticky=EW)
        b = Button(self, text='Send', command=self.mouseClicked)
        b.grid(row=1, column=1)
        self.send_area.focus_set()
        try:
            self.remote = socket.create_connection((remote_host, 8989))
        except socket.gaierror:
            print('Could not find host {}.'.format(remote_host))
        except socket.error:
            print('Could not connect to host {}.'.format(remote_host))
        else:
            self.remote.setblocking(False)
            self.after_handle = self.after_idle(self.dataready)
        self.grid_rowconfigure(0, weight=1)
        self.grid_columnconfigure(0, weight=1)

    @classmethod
    def main(cls, args):
        root = Tk()
        root.title('MultichatClient version 1.0')
        m = cls(root, args[0])
        m.grid(sticky=NSEW)
        root.grid_rowconfigure(0, weight=1)
        root.grid_columnconfigure(0, weight=1)
        root.mainloop()
        return 1

    def dataready(self):
        try:
            s = self.remote.recv(1 << 12).decode()
        except socket.error:
            pass
        else:
            self.message_area['state'] = NORMAL
            self.message_area.insert(END, s)
            self.message_area['state'] = DISABLED
            self.message_area.see(END)
        self.after_handle = self.after(100, self.dataready)

    def destroy(self):
        if self.after_handle:
            self.after_cancel(self.after_handle)
        super().destroy()

    def mouseClicked(self, e=None):
        self.remote.sendall(self.send_area.get().encode() + b'\r\n')
        self.send_area.delete(0, END)

    keyPressed = mouseClicked

if __name__ == '__main__':
    sys.exit(MultichatClient.main(sys.argv[1:])) 
```

* * *

**Simple_Client.pyw**

```
#! /usr/bin/env python3

"""Provide a GUI for easy interactions with Multichat servers.

This program is an example of a first attempt at implementing a client
for interacting with a Multichat server through purely graphical means."""

__author__ = 'Stephen "Zero" Chappell <Noctis.Skytower@gmail.com>'
__date__ = '11 October 2012'
__version__ = 1, 0, 0

################################################################################

from tkinter.messagebox import *
from tkinter.constants import *
from safetkinter import *
import logging
import traceback
import _thread
import socket
import os
import traceback
import sys
import threadbox

################################################################################

class SimpleClient(Frame):

    "SimpleClient(master, **kw) -> SimpleClient instance"

    @classmethod
    def main(cls):
        "Create a GUI root and demonstrate the SimpleClient widget."
        root = Tk()
        root.title('Chat Client')
        root.minsize(675, 450)
        root.grid_rowconfigure(0, weight=1)
        root.grid_columnconfigure(0, weight=1)
        root.bind_all('<Control-Key-a>', cls.handle_control_a)
        frame = cls(root)
        frame.grid(sticky=NSEW)
        root.mainloop()

    @staticmethod
    def handle_control_a(event):
        "Process Ctrl-A commands by widget type."
        widget = event.widget
        if isinstance(widget, Text):
            widget.tag_add(SEL, 1.0, END + '-1c')
            return 'break'
        if isinstance(widget, Entry):
            widget.selection_range(0, END)
            return 'break'

    def __init__(self, master, **kw):
        "Initialize the SimpleClient instance with the widgets it contains."
        super().__init__(master, **kw)
        self.grid_rowconfigure(0, weight=1)
        self.grid_columnconfigure(0, weight=1)
        # Build Widgets
        self.output_area = ScrolledText(self, width=25, height=4, wrap=WORD)
        self.input_area = Entry(self)
        self.corner = Sizegrip(self)
        # Place Widgets
        self.output_area.grid(row=0, column=0, columnspan=2, sticky=NSEW)
        self.input_area.grid(row=1, column=0, sticky=EW)
        self.corner.grid(row=1, column=1, sticky=SE)
        # Setup Widgets
        self.output_area['state'] = DISABLED
        self.input_area.bind('<Return>', self.send)
        self.after_idle(self.connect)

    def connect(self):
        "Try connecting to a server to begin chatting."
        self.connection = Connector(self, 'Chat Client').connection
        if self.connection is None:
            self._root().destroy()
        else:
            self.connection.setblocking(False)
            self.after_idle(self.update)

    def send(self, event):
        "Send a message across the connection from the given widget."
        self.connection.sendall(event.widget.get().encode() + b'\r\n')
        event.widget.delete(0, END)

    def update(self):
        "Update the output area with any incoming messages."
        self.output_area['state'] = NORMAL
        try:
            self.output_area.insert(END, self.connection.recv(1 << 12).decode())
        except socket.error:
            pass
        else:
            self.output_area.see(END)
        finally:
            self.output_area['state'] = DISABLED
        self.after(100, self.update)

################################################################################

def start_thread(function, *args, **kwargs):
    "Start a new thread of execution while logging any errors."
    _thread.start_new_thread(log_errors, (function, args, kwargs))

def log_errors(function, args=(), kwargs={}):
    "Execute a function with its arguments and log any exceptions."
    try:
        function(*args, **kwargs)
    except SystemExit:
        pass
    except:
        basename = os.path.basename(sys.argv[0])
        filename = os.path.splitext(basename)[0] + '.log'
        logging.basicConfig(filename=filename)
        logging.error(traceback.format_exc())

################################################################################

class Dialog(Toplevel): # Copies tkinter.simpledialog.Dialog

    "Dialog(parent, title=None) -> Dialog instance"

    def __init__(self, parent, title=None):
        "Initialize a Dialog window that takes focus away from the parent."
        super().__init__(parent)
        self.withdraw()
        if parent.winfo_viewable():
            self.transient(parent)
        if title:
            self.title(title)
        self.parent = parent
        self.result = None
        body = Frame(self)
        self.initial_focus = self.body(body)
        body.grid(sticky=NSEW, padx=5, pady=5)
        self.buttonbox()
        if not self.initial_focus:
            self.initial_focus = self
        self.protocol('WM_DELETE_WINDOW', self.cancel)
        if self.parent is not None:
            self.geometry('+{}+{}'.format(parent.winfo_rootx() + 50,
                                          parent.winfo_rooty() + 50))
        self.deiconify()
        self.initial_focus.focus_set()
        try:
            self.wait_visibility()
        except tkinter.TclError:
            pass
        else:
            self.grab_set()
            self.wait_window(self)

    def destroy(self):
        "Destruct the Dialog window."
        self.initial_focus = None
        super().destroy()

    def body(self, master):
        "Create the body of this Dialog window."
        pass

    def buttonbox(self):
        "Create the standard buttons and Dialog bindings."
        box = Frame(self)
        w = Button(box, text='OK', width=10, command=self.ok, default=ACTIVE)
        w.grid(row=0, column=0, padx=5, pady=5)
        w = Button(box, text='Cancel', width=10, command=self.cancel)
        w.grid(row=0, column=1, padx=5, pady=5)
        self.bind('<Return>', self.ok)
        self.bind('<Escape>', self.cancel)
        box.grid()

    def ok(self, event=None):
        "Validate and apply the changes made by this Dialog."
        if not self.validate():
            self.initial_focus.focus_set()
            return
        self.withdraw()
        self.update_idletasks()
        try:
            self.apply()
        finally:
            self.cancel()

    def cancel(self, event=None):
        "Close the Dialong window and return to its parent."
        if self.parent is not None:
            self.parent.focus_set()
        self.destroy()

    def validate(self):
        "Verify that the Dialog is in a valid state."
        return True

    def apply(self):
        "Make any changes the Dialog wishes to accomplish."
        pass

################################################################################

class Connector(Dialog):

    "Connector(parent, title=None) -> Connector instance"

    def body(self, master):
        "Customize the Dialog window with some custom widgets."
        self.connection = None
        self.resizable(False, False)
        # Build Widgets
        self.prompt = Label(master, text='Enter server IP address:')
        self.address = Entry(master)
        # Place Widgets
        self.prompt.grid(sticky=W, padx=30, pady=2)
        self.address.grid(sticky=W, padx=30)

    def buttonbox(self):
        "Redefine the buttons at the bottom of the window."
        w = Button(self, text='Connect', width=10, command=self.ok,
                   default=ACTIVE)
        w.grid(sticky=E, padx=5, pady=5)
        self.bind('<Return>', self.ok)
        self.bind('<Escape>', self.cancel)

    def validate(self):
        "Ask a Consumator to make a connection with the given address."
        c = Consumator(self, 'Chat Client', (self.address.get(), 8989))
        if c.connection is None:
            Message(self, icon=WARNING, type=OK, title='Warning',
                    message='Could not connect to address!').show()
            return False
        self.connection = c.connection
        return True

################################################################################

class Consumator(Dialog):

    "Consumator(parent, title, address) -> Consumator instance"

    def __init__(self, parent, title, address):
        "Initialize the Consumator with the server's address."
        self.server_address = address
        super().__init__(parent, title)

    def body(self, master):
        "Create the widgets for this Dialog and start the connection process."
        self.connection = None
        self.resizable(False, False)
        # Build Widgets
        self.message = Label(master, text='Trying to connect to address ...')
        self.progress = Progressbar(master, orient=HORIZONTAL)
        # Place Widgets
        self.message.grid(sticky=W, padx=10, pady=2)
        self.progress.grid(sticky=EW, padx=10, pady=2)
        # Setup Widgets
        self.progress.configure(mode='indeterminate', maximum=30)
        self.progress.start()
        result = []
        start_thread(self.connect, result)
        self.after_idle(self.poll, result)

    def buttonbox(self):
        "Cancel the creation of the buttons at the bottom of this Dialog."
        pass

    @threadbox.MetaBox.thread
    def connect(self, result):
        "Try connecting to the server address that was given."
        try:
            result.append(socket.create_connection(self.server_address, 10))
        except socket.timeout:
            result.append(None)

    def poll(self, result):
        "Find out if the any connection information is available yet."
        if result:
            self.connection = result[0]
            self.cancel()
        else:
            self.after(100, self.poll, result)

################################################################################

if __name__ == '__main__':
    log_errors(SimpleClient.main) 
```

* * *

**亲和力.py**

```
"""Allow a simple way to ensure execution is confined to one thread.

This module defines the Affinity data type that runs code on a single thread.
An instance of the class will execute functions only on the thread that made
the object in the first place. The class is useful in a GUI's main loop."""

__author__ = 'Stephen "Zero" Chappell <Noctis.Skytower@gmail.com>'
__date__ = '4 June 2012'
__version__ = 1, 0, 0

################################################################################

import sys
import _thread
import queue

################################################################################

def slots(names=''):
    "Sets the __slots__ variable in the calling context with private names."
    sys._getframe(1).f_locals['__slots__'] = \
        tuple('__' + name for name in names.replace(',', ' ').split())

################################################################################

class Affinity:

    "Affinity() -> Affinity instance"

    slots('thread, action')

    def __init__(self):
        "Initializes instance with thread identity and job queue."
        self.__thread = _thread.get_ident()
        self.__action = queue.Queue()

    def __call__(self, func, *args, **kwargs):
        "Executes function on creating thread and returns result."
        if _thread.get_ident() == self.__thread:
            while not self.__action.empty():
                self.__action.get_nowait()()
            return func(*args, **kwargs)
        delegate = _Delegate(func, args, kwargs)
        self.__action.put_nowait(delegate)
        return delegate.value

################################################################################

class _Delegate:

    "_Delegate(func, args, kwargs) -> _Delegate instance"

    slots('func, args, kwargs, mutex, value, error')

    def __init__(self, func, args, kwargs):
        "Initializes instance from arguments and prepares to run."
        self.__func = func
        self.__args = args
        self.__kwargs = kwargs
        self.__mutex = _thread.allocate_lock()
        self.__mutex.acquire()

    def __call__(self):
        "Executes code with arguments and allows value retrieval."
        try:
            self.__value = self.__func(*self.__args, **self.__kwargs)
            self.__error = False
        except:
            self.__value = sys.exc_info()[1]
            self.__error = True
        self.__mutex.release()

    @property
    def value(self):
        "Waits for value availability and raises or returns data."
        self.__mutex.acquire()
        if self.__error:
            raise self.__value
        return self.__value 
```

* * *

**线程盒.py**

```
"""Provide a way to run instance methods on a single thread.

This module allows hierarchical classes to be cloned so that their instances
run on one thread. Method calls are automatically routed through a special
execution engine. This is helpful when building thread-safe GUI code."""

__author__ = 'Stephen "Zero" Chappell <Noctis.Skytower@gmail.com>'
__date__ = '9 October 2012'
__version__ = 1, 0, 1

################################################################################

import functools
import affinity

################################################################################

class _object: __slots__ = '_MetaBox__exec', '__dict__'

################################################################################

class MetaBox(type):

    "MetaBox(name, bases, classdict, old=None) -> MetaBox instance"

    __REGISTRY = {object: _object}
    __SENTINEL = object()

    @classmethod
    def clone(cls, old, update=()):
        "Creates a class preferring thread affinity after update."
        classdict = dict(old.__dict__)
        classdict.update(update)
        return cls(old.__name__, old.__bases__, classdict, old)

    @classmethod
    def thread(cls, func):
        "Marks a function to be completely threaded when running."
        func.__thread = cls.__SENTINEL
        return func

    def __new__(cls, name, bases, classdict, old=None):
        "Allocates space for a new class after altering its data."
        assert '__new__' not in classdict, '__new__ must not be defined!'
        assert '__slots__' not in classdict, '__slots__ must not be defined!'
        assert '__module__' in classdict, '__module__ must be defined!'
        valid = []
        for base in bases:
            if base in cls.__REGISTRY:
                valid.append(cls.__REGISTRY[base])
            elif base in cls.__REGISTRY.values():
                valid.append(base)
            else:
                valid.append(cls.clone(base))
        for key, value in classdict.items():
            if callable(value) and (not hasattr(value, '_MetaBox__thread') or
                                    value.__thread is not cls.__SENTINEL):
                classdict[key] = cls.__wrap(value)
        classdict.update({'__new__': cls.__new, '__slots__': (), '__module__':
                          '{}.{}'.format(__name__, classdict['__module__'])})
        cls.__REGISTRY[object() if old is None else old] = new = \
            super().__new__(cls, name, tuple(valid), classdict)
        return new

    def __init__(self, name, bases, classdict, old=None):
        "Initializes class instance while ignoring the old class."
        return super().__init__(name, bases, classdict)

    @staticmethod
    def __wrap(func):
        "Wraps a method so execution runs via an affinity engine."
        @functools.wraps(func)
        def box(self, *args, **kwargs):
            return self.__exec(func, self, *args, **kwargs)
        return box

    @classmethod
    def __new(meta, cls, *args, **kwargs):
        "Allocates space for instance and finds __exec attribute."
        self = object.__new__(cls)
        if 'master' in kwargs:
            self.__exec = kwargs['master'].__exec
        else:
            valid = tuple(meta.__REGISTRY.values())
            for value in args:
                if isinstance(value, valid):
                    self.__exec = value.__exec
                    break
            else:
                self.__exec = affinity.Affinity()
        return self 
```

* * *

**safetkinter.py**

```
"""Register tkinter classes with threadbox for immediate usage.

This module clones several classes from the tkinter library for use with
threads. Instances from these new classes should run on whatever thread
the root was created on. Child classes inherit the parent's safety."""

__author__ = 'Stephen "Zero" Chappell <Noctis.Skytower@gmail.com>'
__date__ = '4 June 2012'
__version__ = 1, 0, 0

################################################################################

import time
import tkinter.filedialog
import tkinter.font
import tkinter.messagebox
import tkinter.scrolledtext
import tkinter.ttk
import threadbox

################################################################################

tkinter.NoDefaultRoot()

@threadbox.MetaBox.thread
def mainloop(self):
    "Creates a synthetic main loop so that threads can still run."
    while True:
        try:
            self.update()
        except tkinter.TclError:
            break
        else:
            time.sleep(tkinter._tkinter.getbusywaitinterval() / 1000)

threadbox.MetaBox.clone(tkinter.Misc, {'mainloop': mainloop})

################################################################################

OldButton = threadbox.MetaBox.clone(tkinter.Button)
Canvas = threadbox.MetaBox.clone(tkinter.Canvas)
OldFrame = threadbox.MetaBox.clone(tkinter.Frame)
Menu = threadbox.MetaBox.clone(tkinter.Menu)
PhotoImage = threadbox.MetaBox.clone(tkinter.PhotoImage)
Spinbox = threadbox.MetaBox.clone(tkinter.Spinbox)
StringVar = threadbox.MetaBox.clone(tkinter.StringVar)
Text = threadbox.MetaBox.clone(tkinter.Text)
Tk = threadbox.MetaBox.clone(tkinter.Tk)
Toplevel = threadbox.MetaBox.clone(tkinter.Toplevel)

################################################################################

Button = threadbox.MetaBox.clone(tkinter.ttk.Button)
Checkbutton = threadbox.MetaBox.clone(tkinter.ttk.Checkbutton)
Entry = threadbox.MetaBox.clone(tkinter.ttk.Entry)
Frame = threadbox.MetaBox.clone(tkinter.ttk.Frame)
Label = threadbox.MetaBox.clone(tkinter.ttk.Label)
Labelframe = threadbox.MetaBox.clone(tkinter.ttk.Labelframe)
Progressbar = threadbox.MetaBox.clone(tkinter.ttk.Progressbar)
Radiobutton = threadbox.MetaBox.clone(tkinter.ttk.Radiobutton)
Scale = threadbox.MetaBox.clone(tkinter.ttk.Scale)
Scrollbar = threadbox.MetaBox.clone(tkinter.ttk.Scrollbar)
Sizegrip = threadbox.MetaBox.clone(tkinter.ttk.Sizegrip)
Treeview = threadbox.MetaBox.clone(tkinter.ttk.Treeview)

################################################################################

Directory = threadbox.MetaBox.clone(tkinter.filedialog.Directory)
Font = threadbox.MetaBox.clone(tkinter.font.Font)
Message = threadbox.MetaBox.clone(tkinter.messagebox.Message)
ScrolledText = threadbox.MetaBox.clone(tkinter.scrolledtext.ScrolledText) 
```

* * *

**Simple_Server.py**

```
#! /usr/bin/env python3
import socket, select

def main():
    a = [socket.socket(socket.AF_INET, socket.SOCK_STREAM)]     # socket array
    a[0].bind(('', 8989))
    a[0].listen(5)
    while True:
        for b in select.select(a, [], [])[0]:                   # ready socket
            if b is a[0]:
                a.append(b.accept()[0])
            else:
                try:
                    c = b.recv(1 << 12)                         # sent message
                except socket.error:
                    b.shutdown(socket.SHUT_RDWR)
                    b.close()
                    a.remove(b)
                else:
                    for d in (d for d in a[1:] if d is not b):  # message sink
                        d.sendall(c)

if __name__ == '__main__':
    main() 
```

# c# - 如何在单个页面上的按钮上应用面板

> ID：13775323
> 
> 赞同：0
> 
> 时间：2012-12-08T06:59:24.853
> 
> 标签：c#, asp.net

有三个按钮，现在有三个面板，如果我点击按钮一然后显示面板一，如果在第二个然后第二个和第三个相同，那么可能是什么条件。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:13:18.033

使用javascripts可能很容易。asp.net的方式可以是：

将按钮保留在面板之外。

`EnableViewState`将属性标记`true`为 aspx 上的所有面板，例如：

```
<asp:Panel id="panel1" EnableViewstate = "true" runat="server">
...
</asp:Panel> 
```

在`Page_Load`方法上，添加：

```
if(!IsPostBack)
{
   panel1.Visible = false;
   panel2.Visible = false;
   panel3.Visible = false;
} 
```

现在在按钮处理程序中，只需将相关面板的`Visible`属性更改为`true`和其他人`false`喜欢：

```
protected void btn1_click(object sender, EventArgs e)
{
   panel1.Visible = true;
   panel2.Visible = false;
   panel3.Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:13:11.693

有很多方法可以做到这一点。例如，下面的代码将在单击按钮 1 时显示面板 1，如果单击按钮 2 则显示面板 2 等等。这只是完成您所要求的快速而肮脏的方法。

```
 <asp:Button ID="Button1" runat="server" AssociatedPanelClass="Panel1" Text="Button 1" class="btn" />
    <asp:Button ID="Button2" runat="server" AssociatedPanelClass="Panel2" Text="Button 2" class="btn" />
    <asp:Button ID="Button3" runat="server" AssociatedPanelClass="Panel3" Text="Button 3" class="btn" />

    <asp:Panel ID="Panel1" runat="server" class="panel panel1 selected">
        <asp:Label ID="Label1" runat="server" Text="Label" >Panel 1</asp:Label>
    </asp:Panel>
    <asp:Panel ID="Panel2" runat="server" class="panel panel2">
        <asp:Label ID="Label2" runat="server" Text="Label" >Panel 2</asp:Label>
    </asp:Panel>
    <asp:Panel ID="Panel3" runat="server" class="panel panel3">
        <asp:Label ID="Label3" runat="server" Text="Label" >Panel 3</asp:Label>
    </asp:Panel>

    <script type="text/javascript">
        function showHide() {
            $(".panel").hide();//hide all panels
            $(".selected").show();//show the selected panel
        }
        $(document).ready(function () {
            showHide();//show the default panel
            $(".btn").click(function () {//assign a click handler to the buttons
                $(".selected").removeClass("selected");//remove class from previously selected panel
                switch ($(this).attr("AssociatedPanelClass")) {//assign new panel the selected class
                    case "Panel1":
                        $(".panel1").addClass("selected");
                        break;
                    case "Panel2":
                        $(".panel2").addClass("selected");
                        break;
                    case "Panel3":
                        $(".panel3").addClass("selected");
                        break;
                }
                showHide();//hide and display selected
                return false;//return false to avoid a postback
            });
        });
    </script> 
```

# c# - 绑定数据后gridview表设置宽度

> ID：13775326
> 
> 赞同：0
> 
> 时间：2012-12-08T06:59:46.667
> 
> 标签：c#, asp.net, gridview

![在此处输入图像描述](../Images/141822206a6b9d35b0a1d82db9ab9caa.png)

当用户从下拉列表中选择时，我使用“GridView”绑定数据，我的问题是当用户在“评论”中输入太多单词时，“评论”列超出表格范围，谁能帮我解决它?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:33:18.110

您可以创建一个 css 类以在固定长度后换行。

```
 <style type="text/css">
    .DisplayDesc { width:250px;word-break : break-all }

 </style> 
```

在gridview中应用这个类

```
 <asp:Label CssClass="DisplayDesc" ID="Label1" runat="server" Text='<%# Bind("TransText") %>'></asp:Label> 
```

未经测试，但可能这可以帮助你。

# javascript - 如何使用 jquery 淡入文本装饰 css？

> ID：13775327
> 
> 赞同：6
> 
> 时间：2012-12-08T06:59:47.293
> 
> 标签：javascript, jquery, html, css

我有以下代码：

```
This is a <span id="sentence">sentence</span>. 
```

当用户将鼠标悬停在 上时`sentence`，我希望下划线在单词下方淡入。

这似乎是一个如此简单的问题，但我一直无法弄清楚如何最好地做到这一点。为了清楚起见，我不能只使用`css:hover`. 我需要使用 JQuery 来执行此操作，因为实际问题比此处说明的更复杂并且需要更多控制。非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T07:24:31.240

这可能不符合您的需求，我意识到您特别不想使用 CSS。但以防万一...

### HTML

```
This is a <span id="sentence">sentence.</span>​ 
```

### CSS

```
span {
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
    transition: all 0.5s;
    border-bottom: 1px solid transparent;
}

span.clicked {
    border-bottom: 1px solid black;
}​ 
```

### 脚本

```
$('span').click(function(){
  $(this).addClass('clicked');
}); 
```

[http://jsfiddle.net/as42u/4/](http://jsfiddle.net/as42u/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T07:10:08.507

带有 jQ​​uery插件的[动画下划线](http://cavaliere.org/sandbox/jquery_animated_underline_plugin)怎么样？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T07:54:02.823

**1\. 使用**Cymen 建议的**[下划线 jQuery 插件](http://cavaliere.org/sandbox/jquery_animated_underline_plugin)**

不要忘记将[所需的 CSS](http://jsfiddle.net/as42u/5/)添加到您的样式表中

**2.自己做**

```
$("#sentence").hover(function(){
    $(this).animate({
        borderBottomWidth: "1px"
    }, 500);
}); 
```

示例[小提琴](http://jsfiddle.net/as42u/6/)。您必须使用底部边框，因为 jQuery 不知道如何为 text-decoration 属性设置动画。

# php - 在 PHP 中使用单引号（转义）

> ID：13775330
> 
> 赞同：3
> 
> 时间：2012-12-08T07:00:05.997
> 
> 标签：php, javascript, jquery, html, escaping

我在 PHP 标记中编写 HTML 代码。已经为锚标记样式编写了，如果我更改某些部分会影响。所以我试图在 span onclick 事件中编写我的代码。这是我的代码

```
 <div>
    <span style='cursor:pointer;' onclick='window.location.href='www.google.com'>
       ".$array1[$i] ['name']."
    </span>
 </div> 
```

如果单击该数组[名称]，它应该转到 google.com。问题是我用来提及我的 URL 的单引号。如何在此事件中转义字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T07:48:41.693

我想你已经得到了代码。然而，更多的解释：

(i) 有两种类型的引号，即单引号（' ... '）和双引号（" ... "）。现在，当您使用一种引用样式作为外部引用时，您可以在其中使用另一种引用样式，并且您不需要转义任何引用。

例如 echo '他说“多么美好的一天”'; 输出：他说“多么美好的一天”

```
echo "She said 'that is true'"; 
```

输出：她说“那是真的”

（ii）但是在第二种情况下，如果您想输出-> 她说“那是真的”，您需要转义引号。在 php 中默认转义字符是 \

正如您已经注意到的，引号对 PHP 具有特殊意义。为了消除特殊含义，我们“转义”了字符。

所以你需要写： echo 'She said "that\'s true"';

或者

```
echo "She said \"that's true\""; 
```

这是转义背后的基本概念。但请注意，这两种引号在某些情况下具有不同的含义。双引号在它们内部的内容中执行，而单引号假定它们内部的内容不被评估。

IE

```
$i = 1;

echo "$i";

// output: 1

echo '$i';

// output: $i 
```

编写代码时请记住这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T07:14:21.727

```
 $strLocation = 'http://www.google.com';
    $strLink = "<span onclick='window.location.href=&#39;".$strLocation."&#39;'>HI there</span>";

(or)

$strLink = '<span onclick="window.location.href=\''.$strLocation.'\'">HI there</span>';

    print $strLink; 
```

Using`&#39;`是一个 HTML 特殊字符，在字符串操作期间不会被检测到，并且只会出现在浏览器中。

使用`\`只是转义字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T07:47:14.900

你为什么首先使用单引号？

```
<div>
    <span style="cursor:pointer;" onclick="window.location.href='www.google.com'">
        <?php echo $array1[$i]['name'] ?>
    </span>
</div> 
```

这就是你所需要的；没有必要让事情变得更复杂:)

* * *

根据您的评论，您在`echo`. 我认为这有点傻，但在这种情况下，使用[`heredoc`](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)语法

```
echo <<<EOD
    <div>
        <span style="cursor:pointer;" onclick="window.location.href='www.google.com'">
            <?php echo $array1[$i]['name'] ?>
        </span>
    </div>
EOD; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-14T16:54:22.773

使用`json_encode`它，它将可靠地为您管理逃逸。

```
<? $exampleA = "Escape this 's"; ?>
<? $exampleB = 'Escape this "s'; ?>
<script>
var a = <?= json_encode($exampleA) ?> // result: var a = "Escape this 's"
var b = <?= json_encode($exampleB) ?> // result: var b = "Escape this \"s"
</script> 
```

在这里找到：[https ://stackoverflow.com/a/6269254/922522](https://stackoverflow.com/a/6269254/922522)

# java - 如何在Java中读取和拆分txt文件的内容？

> ID：13775334
> 
> 赞同：0
> 
> 时间：2012-12-08T07:00:29.243
> 
> 标签：java, file, text, split

我想阅读文件的整个文本，然后根据特定的分隔符将其拆分。我怎么能在Java中这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:21:50.130

```
try{
  // Open the file
  FileInputStream fstream = new FileInputStream("textfile.txt");
  // Get the object of DataInputStream
  DataInputStream in = new DataInputStream(fstream);
  BufferedReader br = new BufferedReader(new InputStreamReader(in));
  String strLine;
  //Read File Line By Line
  while ((strLine = br.readLine()) != null)   {
  // split the line on your splitter(s)
     String[] splitted = strLine.split("-"); // here - is used as the delimiter
  }
  //Close the input stream
  in.close();
    }catch (Exception e){//Catch exception if any
  System.err.println("Error: " + e.getMessage());
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:09:59.363

阅读内容。选择要检查每个行/单词或短语以进行拆分的分隔符。有一个开关盒设置。无论您根据 switch case 找到什么内容，都可以执行操作。假设您可以在不同情况下写入不同的文本文件。

# c# - 表单问题中的多个表单构造函数

> ID：13775335
> 
> 赞同：0
> 
> 时间：2012-12-08T07:00:47.560
> 
> 标签：c#, .net, constructor

我有这个：

```
public partial class FrmUpload : Form
{
    public FrmUpload()
    {
        InitializeComponent();
    }

    public FrmUpload(Dictionary<string, string> ft) : base()
    {
        foreach (KeyValuePair<string, string> ctrl in ft)
        {
            Controls.Find(ctrl.Key, true)[0].Text = ctrl.Value;
        }
    }

    private void BtnCancelClick(object sender, EventArgs e)
    {
        DialogResult = DialogResult.Cancel;
        Close();
    }

    private void BtnExitClick(object sender, EventArgs e)
    {
        DialogResult = DialogResult.OK;
        Close();
    }
} 
```

尝试此操作时出现索引异常。如果我调试它，我会看到 InitializeComponent() 没有运行..

我的主应用程序中的代码：

```
var frmUpload = new FrmUpload(FormTextUpload);
if (frmUpload.ShowDialog() != DialogResult.OK) return; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:02:51.820

而不是调用基类构造函数：

```
public FrmUpload(Dictionary<string, string> ft) : base() 
```

调用您自己的无参数构造函数：

```
public FrmUpload(Dictionary<string, string> ft) : this() 
```

# url - URL 的供稿 URL 检测器

> ID：13775347
> 
> 赞同：1
> 
> 时间：2012-12-08T07:02:15.257
> 
> 标签：url, service, rss, atom-feed

我正在寻找可以自动检测网站的提要 URL（RSS 或 Atom）的代码或服务。

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:11:38.140

查看[Google Feed API](https://developers.google.com/feed/)，尤其是完全符合您要求的查找服务（如下示例）：

[http://ajax.googleapis.com/ajax/services/feed/lookup?v=1.0&q=http://googleblog.blogspot.com/](http://ajax.googleapis.com/ajax/services/feed/lookup?v=1.0&q=http://googleblog.blogspot.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T08:27:59.740

对于代码，请尝试[feedfinder](http://www.aaronsw.com/2002/feedfinder/)。

# android - 使用 OpenGL ES 2.0 的 X by Y 棋盘？

> ID：13775348
> 
> 赞同：0
> 
> 时间：2012-12-08T07:02:30.777
> 
> 标签：android, opengl-es-2.0

我正在尝试使用 OpenGL ES 2.0 创建 X by Y 棋盘格（我的意思是我可以为 X 和 Y 设置任何大小），但我想知道如何创建模式。

我已经让 MVP 矩阵运行良好（目前我只是使用一个纯色矩形），它正确地呈现适合屏幕、居中和全视图（并且每个框 [-created a couple test boxes] 是方形的，不管整体大小）。世界坐标是每个网格空间的简单 1x1 空间，视图和投影矩阵将其带入完美视图。

我无法解决的是应用该棋盘格图案。我考虑首先像现在一样使用单个矩形，并应用片段着色器，但鉴于网格可以是任一方向上的任意数量的空间（不再是世界坐标），我无法弄清楚如何进行这项工作到那时）。我还考虑过创建一个背景，然后每隔一个空间添加一个彩色方块，但这对于本应非常简单的工作来说似乎是资源密集型的。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:33:37.473

我会使用 mod 函数和剩余部分来选择白色或黑色并将其插入颜色。

[在著名的GLSL Sandbox](http://glslsandbox.com/)站点上查找一些示例。

另见图 1.2 [http://webstaff.itn.liu.se/~stegu/TNM084-2012/proceduraltextures.pdf](http://webstaff.itn.liu.se/~stegu/TNM084-2012/proceduraltextures.pdf)

> `mod(floor(10.0*s) + floor(10.0*t), 2.0)`

# python - PyQt：防止在 QDialog 中调整大小和最大化？

> ID：13775351
> 
> 赞同：24
> 
> 时间：2012-12-08T07:02:57.213
> 
> 标签：python, resize, pyqt, qdialog

如何防止 PyQt 中的 QDialog 可调整大小或最大化？我不想改变窗口的大小。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-08T07:24:52.057

使用[setFixedSize](http://qt-project.org/doc/qt-4.8/qwidget.html#setFixedSize-2)：

```
mydialog.setFixedSize(width, height) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-08-12T13:51:44.703

上面的答案很好，此外，您可以手动设置**最大**和**最小**宽度和高度，如下所示：

```
myDialog = QDialog()
myDialog.setMaximumWidth(myDialog.width())
myDialog.setMaximumHeight(myDialog.height()) 
```

或者简而言之，您可以将 maximumSize 用作：

```
myDialog.setMaximumSize() 
```

就像上面的代码一样......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-10T06:40:09.513

要设置**固定大小的** *窗口*或*对话框*（*通常为 QWidget*），您可以使用**[setFixedSize](https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtwidgets/qwidget.html#setFixedSize) ( [QSize](https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtcore/qsize.html) )**或**setFixedSize(int, int)**函数。

在 PyQt5 中，使用：-

```
custom_dialog.setFixedSize(QSize(width, height)) # setFixedSize(QSize) 
```

或者

```
custom_dialog.setFixedSize(width, height) # setFixedSize(int, int) 
```

您必须导入

```
from PyQt5.QtCore import  QSize 
```

你也可以使用

```
custom_dialog.setFixedSize(custom_dialog.size()) 
```

其他相关功能

[setFixedWidth](https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtwidgets/qwidget.html?#setFixedWidth) (int)

[setFixedHeight](https://www.riverbankcomputing.com/static/Docs/PyQt5/api/qtwidgets/qwidget.html?#setFixedWidth) (int)

# ios - 在全屏问题中播放 MPMoviePlayerController 中的视频

> ID：13775355
> 
> 赞同：0
> 
> 时间：2012-12-08T07:03:12.877
> 
> 标签：ios, xcode, uikit, mpmovieplayercontroller, fullscreen

我正在通过 LBYouTubeView 套件在我的应用程序中播放来自 youtube 的视频。我使用了两种播放视频的方式，一种是按下按钮，另一种是在应用程序启动后播放。当我按下按钮时，它会全屏运行，但是当我使用相同的代码时，当应用程序启动时它不会全屏播放。

请问我该如何解决这个问题？

从现在开始感谢。

```
-(void)viewDidLoad {
    [super viewDidLoad];

    self.controller = [[LBYouTubePlayerController alloc] initWithYouTubeURL:URL quality:LBYouTubeVideoQualityLarge];
    self.controller.delegate = self;
    self.controller.view.frame = CGRectMake(0.0f, 0.0f, 200.0f, 200.0f);
    self.controller.view.center = self.view.center;
    [self.view addSubview:self.controller.view];

    [self.controller setFullscreen:YES];
}

-(IBAction)play{
 //The same code above
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:17:17.400

我刚刚使用上述代码完成了一个示例应用程序。你是对的，当我在 viewDidLoad 中添加代码时，我没有得到全屏。

我将您的代码更改为`viewDidAppear`方法而不是`viewDidLoad`它，它运行良好。

```
-(void)viewDidAppear:(BOOL)animated
{
   self.controller = [[LBYouTubePlayerController alloc] initWithYouTubeURL:URL quality:LBYouTubeVideoQualityLarge];
   self.controller.delegate = self;
   self.controller.view.frame = CGRectMake(0.0f, 0.0f, 200.0f, 200.0f);
   self.controller.view.center = self.view.center;
   [self.view addSubview:self.controller.view];
   [self.controller setFullscreen:YES];
} 
```

我认为当您在`viewDidLoad`视图中调用它时正在加载，而不是完全加载我认为这会导致问题。

# curl - 如何动态获取多个 URL

> ID：13775356
> 
> 赞同：0
> 
> 时间：2012-12-08T07:03:18.343
> 
> 标签：curl

我想使用 cURL 和 PHP 动态获取多个 URL。当我使用单个 URL 尝试此操作时，它可以工作，但不适用于多个 URL。请帮忙。

我正在使用表单发送 URL：

```
$urls = $_POST["urls"];
require_once('simple_html_dom.php');
$useragent = 'Googlebot/2.1 (http://www.googlebot.com/bot.html)';

foreach ($urls as $url) 
{
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 20);
curl_setopt($curl, CURLOPT_USERAGENT, $useragent); 
$str = curl_exec($curl);
curl_close($curl);
}

$html= str_get_html($str);
foreach($html->find('span.price') as $e)
    echo  $e->innertext . '<br>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:43:17.737

问题是在您的表单中，您有同名的文本输入。当它被传递给 curl.php 时，它不会作为数组传递。您可以通过在表单中​​执行以下操作来解决此问题：

```
<form action="curl.php">
    <input type="text" name="urls[]" />
    <input type="text" name="urls[]" />
    ...
</form> 
```

现在，urls 将作为数组传入，foreach 调用将正常工作。

# php - 计算每列的值

> ID：13775357
> 
> 赞同：0
> 
> 时间：2012-12-08T07:03:31.010
> 
> 标签：php, mysql, sql

我有一个表，其中包含：

```
id datetime country productId 
```

假设有 50 种不同的产品，我如何计算每种产品的数量？

```
╔═══════╦═════════════════════╦═════════╦═══════════╗
║  id   ║      datetime       ║ country ║ productId ║
╠═══════╬═════════════════════╬═════════╬═══════════╣
║     1 ║ 2012-12-08 14:38:49 ║ us      ║         2 ║
║     2 ║ 2012-12-08 16:38:52 ║ us      ║         2 ║
║     6 ║ 2012-12-08 16:39:50 ║ ca      ║        33 ║
║     7 ║ 2012-12-08 16:54:58 ║ uk      ║         1 ║
╚═══════╩═════════════════════╩═════════╩═══════════╝ 
```

这应该导致

```
╔═════════╦════════════╗
║ COUNTRY ║ TOTALCOUNT ║
╠═════════╬════════════╣
║     US  ║          2 ║
║     CA  ║          1 ║
║     UK  ║          1 ║
╚═════════╩════════════╝ 
```

我怎样才能做到这一点？我试过在查询中计数，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:04:39.103

只需使用`COUNT`聚合函数并将它们分组`COUNTRY`。

```
SELECT COUNTRY, COUNT(*) totalCOUNT
FROM tableName
GROUP BY COUNTRY
ORDER BY totalCOUNT DESC 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/af0f48/1)

# objective-c - UILabel 上仅显示 2 个值中的 1 个

> ID：13775358
> 
> 赞同：0
> 
> 时间：2012-12-08T07:03:32.423
> 
> 标签：objective-c, ios, nsstring, uilabel

我希望我的应用程序上的 ServingSize UIlabel 显示部分和单位（如 1 fl. oz.）。但是，它只显示单位（所以我只看到 fl. oz.）。我看不出有什么问题。下面是相关代码。我在 .m 文件的顶部将部分和单元声明为 NSString*。当我分配它之后的 NSLog 部分时，我看到了正确的值。

```
for(NSDictionary *dict in self.team){
        portion = [dict objectForKey:@"portion"];
        unit = [dict objectForKey:@"unit"];
    }

    self.ServingSize.text = (@"%@ %@", portion, unit);
    self.Servings.backgroundColor = [UIColor whiteColor]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:34:12.787

使用下面的代码（我发布了这个答案，因为它可能对其他人有帮助）

```
or(NSDictionary *dict in self.team){
        portion = [dict objectForKey:@"portion"];
        unit = [dict objectForKey:@"unit"];
    }

    self.ServingSize.text =[NSString stringWithFormat:@"%@ %@", portion, unit];
    self.Servings.backgroundColor = [UIColor whiteColor]; 
```

# c# - 监听串口以了解调制解调器是否在 C# 中安装/删除？

> ID：13775359
> 
> 赞同：1
> 
> 时间：2012-12-08T07:03:38.690
> 
> 标签：c#

我将如何连续收听 COM 以检测调制解调器。如果添加或删除了调制解调器，它应该会通知您在 COM45 等处安装或删除了调制解调器。

我尝试使用线程并检查 com 计数，但我无法知道哪个 com 是调制解调器。

如果有任何特定的类，请尽快帮助我的代码？？？

# javascript - JavaScript 中的屏幕抓取

> ID：13775363
> 
> 赞同：2
> 
> 时间：2012-12-08T07:04:02.663
> 
> 标签：javascript, screen-scraping

我正在尝试构建客户端屏幕抓取。

我想允许浏览器浏览（使用框架），并让用户标记他想要抓取并保存在他的板上的区域。

对于这种要求，有没有好的 JavaScript 解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:06:07.403

您可以使用 Node.js 进行网页抓取。

这是一个[教程](http://net.tutsplus.com/tutorials/javascript-ajax/web-scraping-with-node-js/)，您可以在其中学习如何使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:21:03.370

如果您想截取当前页面的屏幕截图并将其绘制在 HTML 画布上，则可以使用[HTMLToCanvas](http://html2canvas.hertzen.com/)。但是，这不适用于外部站点：它只能截取当前加载的页面的屏幕截图。

# javascript - 通过ajax加载内容

> ID：13775366
> 
> 赞同：0
> 
> 时间：2012-12-08T07:04:12.790
> 
> 标签：javascript, jquery, ajax

我创建了这个用于加载数据的 ajax 脚本。

```
$("#submit").click(function(e){
    e.preventDefault()  
    var loading = "<img src='/images/loading.gif' alt='Loading...' />";
    var scrolltop=$('#scrollbox').attr('scrollTop');
    var scrollheight=$('#scrollbox').attr('scrollHeight');
    var windowheight=$('#scrollbox').attr('clientHeight');
//  var post = $(this).attr("name") + "=" + $(this).val();
    var form_data = $('#search_form').serialize();// + "&" + post ;

    var scrolloffset=20;
    $('#search').html(loading);
    $.post("dosearch.php",form_data,function(newitems) {
        $('#content').append(newitems);
            });
        if(scrolltop>=(scrollheight-(windowheight+scrolloffset))){
            $.post("dosearch.php",form_data,function(newitems) {
        $('#content').append(newitems);
            });
        }     
        });
}); 
```

该脚本将获取表单数据并将它们序列化并将它们发布到`dosearch.php`之后，dosearch 将发布我们搜索的数据**受限**于 0,6。当滚动条到达结果 div 的底部时，我想获取更多内容，因此我创建了这个函数，它将再次获取我们的表单数据和结果 div 中的 div 数量......然后使用这个 div 结果以防万一限制$数量，6。

```
function scroll_result(form_data){
    var loading = "<img src='/images/loading.gif' alt='Loading...' />";
    var scrolltop=$('#scrollbox').attr('scrollTop');
    var scrollheight=$('#scrollbox').attr('scrollHeight');
    var windowheight=$('#scrollbox').attr('clientHeight');
    var scrolloffset=20;
    var divnumber = $('#content').children().size();
    var form_data = form_data + "&size=" + divnumber;

    if(scrolltop>=(scrollheight-(windowheight+scrolloffset)))
    {
        //fetch new items
        $.post('dosearch.php', form_data, function(newitems){
        $('#content').append(newitems);
        });
    }
    setTimeout('scroll_result(form_data)', 1500);
} 
```

这个功能不起作用，我需要一些帮助

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:30:47.883

我只是在这里设置了一个示例滚动监听应用程序：

[http://jsfiddle.net/E2wj2/2/](http://jsfiddle.net/E2wj2/2/)

你需要听你的滚动事件`scrollbox`，

```
$('#scrollbox').scroll(function(){
  console.log('scrolling');
  scrolltop=$('#scrollbox').attr('scrollTop');
  if(scrolltop>=(scrollheight-(windowheight+scrolloffset))) {
    //do whatever you wish to do
  }
}); 
```

希望这可以帮助。

# javascript - 未触发主干事件

> ID：13775376
> 
> 赞同：0
> 
> 时间：2012-12-08T07:05:12.053
> 
> 标签：javascript, events, backbone.js

我正在尝试使用主干捕获事件我得到了这样的 html

```
<!DOCTYPE html>
<html>
<head id="head"> 
    <title>Con RequireJS</title>
    <script data-main="Scripts/main" src="Scripts/require.js"></script>
</head>
<body>
    <div class="container">
            <button class="btnAuthenticate">Login with FourSquare</button>
    </div>

</body>
</html> 
```

我正在尝试通过单击该按钮来捕获事件

```
events : {
'click .btnAuthenticate' : 'doAction' 
} 
```

但是当我创建视图时

```
view = new thatView( {model:aModel, tagName: 'div', className: 'container' } ) ; 
```

el 似乎在控制台中

```
console.log(view.el) 
```

得到我

```
<div class="container><div> 
```

但该事件不起作用！相反，如果我打电话

```
view = new thatView({el:'body'}); 
```

它做了它应该做的事情，但是我不能附加到我想要的 el 上！有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:41:17.980

如果您定义`tagName: 'div', className: 'container'`Backbone 将创建一个*新* `div.container`元素。但是，如果你想引用一个已经存在的 DOM 节点，那么你应该使用它`el`。我想这应该适合你：

```
view = new thatView({model:aModel, el: $('.container')}); 
```

只需确保在 DOM 加载后创建一个视图。

更多信息[http://backbonejs.org/#View-constructor](http://backbonejs.org/#View-constructor)

# playframework-2.0 - 包 org.json 不存在

> ID：13775379
> 
> 赞同：2
> 
> 时间：2012-12-08T07:05:39.370
> 
> 标签：playframework-2.0, org.json

我正在播放框架 2.0.2 中制作一个测试项目，我想在其中使用 Json。在 Eclipse 中，我可以导入包 org.json 的类。但是当我通过 play clean compile 从控制台编译项目时，play 给了我错误：

```
package org.json does not exist 
[error] import org.json.JSONArray 
```

json.jar 在项目的构建路径中，在本地和 play 的缓存存储库中。我尝试为 json 添加依赖项：

```
"org.json"%"json"%"20080701" 
```

和

```
"org.json"%%"json"%"20080701" 
```

但它尚未解决，我收到以下消息：

```
 http://repo1.maven.org/maven2/org/json/json_2.9.1/20080701/json_2.9.1-20080701.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.json#json_2.9.1;20080701: not found 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T07:23:58.010

将依赖项更改为 `"org.json"%"org.json"%"chargebee-1.0"`并使其正常工作。

注意：检查最新版本：[Maven org.json repo](http://mvnrepository.com/artifact/org.json)

# ruby-on-rails - oAuth 1/2 Ruby 库

> ID：13775380
> 
> 赞同：0
> 
> 时间：2012-12-08T07:05:47.037
> 
> 标签：ruby-on-rails, ruby, oauth, oauth-2.0

我正在为 Ruby 寻找最流行的 oAuth 1/2 库。我以为是signet，结果发现它的github页面已经被删除了。

你的意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:16:47.903

您可以使用[Ruby Toolbox](https://www.ruby-toolbox.com/)找到最流行的选项。事实证明，这是[intridea 的 omniauth](https://github.com/intridea/omniauth)。如果您想将您的应用程序变成 OAuth 提供者，[门卫](https://github.com/applicake/doorkeeper)可能会很有用。

# ruby - Sublime Monokai 语法突出显示：如何为方法调用着色并使插值字符串内部的颜色不同

> ID：13775385
> 
> 赞同：4
> 
> 时间：2012-12-08T07:06:24.783
> 
> 标签：ruby, syntax, colors, sublimetext2, highlighting

对于 Sublime 的 Monokai 主题与 Ruby，你如何

1）颜色方法调用

![在此处输入图像描述](../Images/a21e4c259f49cba101541c77fb0a87cc.png)

（即如何使“generate_key”具有不同的颜色。

2）使插值字符串内部的颜色不同。

![在此处输入图像描述](../Images/b4434910f3c044c59415030d5db88438.png)

即你怎么做'puts“这是在里面。Halp！” 不同的颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:15:39.150

对于您的第二个问题，请将其包含在您的颜色主题中（更多信息[在这里](http://i.justrealized.com/2013/add-ruby-string-interpolation-highlighting-sublime/)）：

```
<dict>
    <key>name</key>
    <string>Embedded Ruby Source</string>
    <key>scope</key>
    <string>string source.ruby.embedded.source</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <string>#D01F1E</string>
    </dict>
</dict> 
```

导致：

![在此处输入图像描述](../Images/87d6518701a4f97bafe062e2bc1c007b.png)

对于第一个问题，您可以尝试[这个](http://tmtheme-editor.herokuapp.com/#/Solarized%20%28dark%29)出色的工具来找出方法调用的关键字。

# codeigniter - CodeIgniter：下载完成后删除文件

> ID：13775386
> 
> 赞同：0
> 
> 时间：2012-12-08T07:06:42.803
> 
> 标签：codeigniter

我搜索了几个小时，但没有得到我想要的。我正在使用 CodeIgniter 开发一个网站。我可以使用 CodeIgniter 默认[ZIP 库](http://ellislab.com/codeigniter/user-guide/libraries/zip.html)压缩文件，但我不知道下载后如何删除。

我在互联网上搜索，我得到的大部分结果都与正常的删除功能有关，如取消链接。但我想在下载后这样做，它必须集成到 CodeIgniter 中。

请指导我解决这个问题。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:33:27.773

我使用以下代码提供下载：

```
header("Content-Type:$mimetype");
header("Content-Disposition: attachment; filename=$filename");
header("Cache-Control:must-revalidate,post-check=0,pre-check=0");
header("Content-Length:".filesize($temp_filename));
readfile_chunked($temp_filename); 
```

（readfile_chunked 来自 [http://nl2.php.net/manual/nl/function.readfile.php](http://nl2.php.net/manual/nl/function.readfile.php)）

我的问题：如何检查文件是否已下载并保存？我想在下载后自动删除。

当用户单击取消并且不下载文件时，该功能似乎退出，因此不会执行所有以下命令。那很完美。

但是，当文件小到可以放入一个块时，它就不会了。php 的 readfile 似乎具有相同的行为。因此，在这种情况下，所有以下命令都会执行，即使单击了取消（在我的应用程序中，文件随后会被删除，这当然不应该发生）。

检查发送的字节也无济于事。如果该函数存在，它总是返回适合单个块的小文件的完整文件大小，即使单击取消也是如此。

那么，是否有任何可行的方法来确定文件是否已下载并打开/保存，而不是在下载对话框中单击取消

# iphone - 如何为 iPhone 应用程序使用 WSDL？

> ID：13775388
> 
> 赞同：0
> 
> 时间：2012-12-08T07:07:01.957
> 
> 标签：iphone, web-services, wsdl

我正在尝试在我的 iPhone 应用程序中使用公共 Web 服务，但我不确定如何使用 WSDL。例如我有这个[WSDL](http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL)。现在我必须发送什么 XML 或 SOAP 才能使用此服务？

类似于我在演示 SOAP 消息中使用的内容：

```
<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n"
    "<soap:Envelope \n"
    "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" \n"
    "xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n" 
    "xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\" \n"
    "soap:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" \n"
    "xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"> \n"
    "<soap:Body> \n"
                       "<CelsiusToFahrenheit xmlns=\"http://tempuri.org/\">\n"
                       "<Celsius>23</Celsius>\n"
                       "</CelsiusToFahrenheit>\n"
    "</soap:Body> \n"
                       "</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T06:20:58.853

嗨，我创建了一个很棒的站点，它接收 wsdl 文件或服务并为您生成代理客户端代码

[http://www.wsdl2code.com](http://www.wsdl2code.com)

```
SampleServiceProxy *proxy = [[SampleServiceProxy alloc]initWithUrl:@"YOUR
            URL" AndDelegate:self];
    [proxy GetDouble];
    [proxy GetEnum];
    [proxy getEnum:kTestEnumTestEnum2];
    [proxy GetInt16];
    [proxy GetInt32];
    [proxy GetInt64];
    [proxy GetString];
    [proxy getListStrings]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:34:48.377

这可能会帮助你

[http://www.icodeblog.com/2008/11/03/iphone-programming-tutorial-intro-to-soap-web-services/](http://www.icodeblog.com/2008/11/03/iphone-programming-tutorial-intro-to-soap-web-services/)

在这里您可以找到制作信封以发出请求并将此信封发送到服务器的教程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T07:12:58.777

如果你能找到类似于 Apache Axis 的东西，它生成 C 代码而不是 Java 代码，你应该能够将生成的 C 代码用于 iOS 的 Objective-C 程序。

# php - 如何将图像名称上传控制器发送到电阻控制器

> ID：13775400
> 
> 赞同：1
> 
> 时间：2012-12-08T07:09:34.693
> 
> 标签：php, codeigniter

查看代码

```
<form id="form1" method="post" enctype="multipart/form-data" action='<?php echo base_url();?>index.php/setup_con/upload'>

<input type="file" name="userfile" id="userfile" required="required"/>
</form>

<form id="form2" method="post"  enctype="multipart/form-data" action='<?php echo base_url();?>index.php/setup_con/register'>
<input type="text" name="name" id="name"/> 
<input type="text" name="city" id="city"/> 
<input type="text" name="mobile" id="mobile"/> 
<input type="submit" value="Submit" />
</form> 
```

控制器代码

```
function upload()
{
    $config['upload_path'] = './uploads/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '800';
    $config['max_width']  = '1024';
    $config['max_height']  = '768';

    $this->load->library('upload', $config);

    if (!$this->upload->do_upload())
    {
        echo "File is Not valid/File does not select";
        $error = array('error' => $this->upload->display_errors());

    }
    else
    {

        $data = array('upload_data' => $this->upload->data());

        $img_name =  $data ['upload_data']['file_name'];

            echo "'<img src='".base_url()."uploads/".$img_name."' class='preview'>";

    }
}
    function register()
    {
        $this->form_validation->set_rules('name','Name', 'trim|required');
        $this->form_validation->set_rules('city','city', 'trim|required');
        $this->form_validation->set_rules('mobile','mobile', 'trim|required');
        if($this->form_validation->run() == FALSE)
    {
        }
        else
        {
           $data = $this->register_model->register();
        }
    } 
```

我已经在codeigniter中使用ajax从第一个表单上传图像，控制器正在上传，这里将只上传图像这个控制器，但我想图像名称发送寄存器控制器，我将在电阻表中插入图像名称、名称、城市和monbile。

请帮我，

我怎样才能成功地做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T11:48:05.730

我认为 ajaxform 提交无法正常上传文件。您必须使用 Formdata() 对象，请检查 [如何在 jQuery 中使用 Ajax 请求发送 FormData 对象？](https://stackoverflow.com/questions/6974684/how-to-send-formdata-objects-with-ajax-requests-in-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:34:39.050

只需从上传函数调用注册函数并发送图像名称。

```
function upload()
{
$config['upload_path'] = './uploads/';
$config['allowed_types'] = 'gif|jpg|png';
$config['max_size'] = '800';
$config['max_width']  = '1024';
$config['max_height']  = '768';

$this->load->library('upload', $config);

if (!$this->upload->do_upload())
{
    echo "File is Not valid/File does not select";
    $error = array('error' => $this->upload->display_errors());

}
else
{

    $data = array('upload_data' => $this->upload->data());

    $img_name =  $data ['upload_data']['file_name'];

        echo "'<img src='".base_url()."uploads/".$img_name."' class='preview'>";
        //Send image name to register function
        register($img_name);

}
}
function register($img_name)
{
    $this->form_validation->set_rules('name','Name', 'trim|required');
    $this->form_validation->set_rules('city','city', 'trim|required');
    $this->form_validation->set_rules('mobile','mobile', 'trim|required');
    if($this->form_validation->run() == FALSE)
{
    }
    else
    {
       // Send image name and form data to the model
       $data = $this->register_model->register($img_name,$form_data);
    }
} 
```

# android - 第 4 步 Facebook api 的“运行样本”

> ID：13775401
> 
> 赞同：0
> 
> 时间：2012-12-08T07:09:40.223
> 
> 标签：android, facebook, api, photos

我在 mac（版本 10.7.5）上使用 eclipse 在 android 上创建 Facebook 应用程序（api 8）

当我尝试按照 Facebook api 的说明开发 android 应用程序时。

我做了网站告诉我的所有事情，并且包和类似乎还可以，但是当我尝试运行任何 Facebook 应用程序（例如 ProfilePictureSample）时，它的喊叫声是我的问题

我试图构建一个名为 CTPuppy 的应用程序

控制台写道：

```
[2012-12-08 08:47:43 - CTPuppy] res/drawable-hdpi/furr-blitzen-trapper-cd-cover-art.jpg: Invalid file name: must contain only [a-z0-9_.]
[2012-12-08 08:47:43 - CTPuppy] res/drawable-hdpi/furr-blitzen-trapper-cd-cover-art.jpg: Invalid file name: must contain only [a-z0-9_.]
[2012-12-08 08:47:43 - CTPuppy] res/drawable-hdpi/furr-blitzen-trapper-cd-cover-art.jpg: Invalid file name: must contain only [a-z0-9_.]
[2012-12-08 08:47:43 - CTPuppy] res/drawable-hdpi/furr-blitzen-trapper-cd-cover-art.jpg: Invalid file name: must contain only [a-z0-9_.]
[2012-12-08 08:47:43 - CTPuppy] res/drawable-hdpi/furr-blitzen-trapper-cd-cover-art.jpg: Invalid file name: must contain only [a-z0-9_.]
[2012-12-08 08:47:43 - CTPuppy] /Users/itaiirdam/Documents/workspace1/CTPuppy/res/values-v11/styles.xml:7: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light'.
[2012-12-08 08:47:43 - CTPuppy] /Users/itaiirdam/Documents/workspace1/CTPuppy/res/values-v14/styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light.DarkActionBar'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:15:05.123

检查 furr-blitzen-trapper-cd-cover-art.jpg 是否存在于您的 res/drawable-hdpi 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:26:33.850

文件名

```
furr-blitzen-trapper-cd-cover-art.jpg 
```

由于“-”，是无效的文件名。更改文件名以将所有“-”替换为“_”。或者只是删除所有'-'。

# xsl-fo - 在 Apache FOP 中使用 AFP 渲染器的示例？

> ID：13775405
> 
> 赞同：1
> 
> 时间：2012-12-08T07:10:00.567
> 
> 标签：xsl-fo, apache-fop, afp

有人知道网上是否有一些示例 xsl-fo 文件显示如何使用 AFP 输出引擎添加到 Apache FOP 的标签？

这个页面[http://afp-renderer.sourceforge.net/afp-extensions.html](http://afp-renderer.sourceforge.net/afp-extensions.html)很好地列出了额外的扩展标签是什么，但我不知道它们在 xsl-fo 标签的现有模式中的位置.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:25:31.510

你提到的页面很旧。更好地查看已集成此功能的 Apache FOP 项目。[检查http://xmlgraphics.apache.org/fop/trunk/output.html](http://xmlgraphics.apache.org/fop/trunk/output.html)的 AFP 扩展部分

那里的示例几乎完整，但这里有一个小的 XSL:FO 输入：

```
<?xml version="1.0" encoding="UTF-8"?>
<fo:root
    xmlns:afp="http://xmlgraphics.apache.org/fop/extensions/afp"
    xmlns:fo="http://www.w3.org/1999/XSL/Format"
    >
<fo:layout-master-set>
    <fo:simple-page-master master-name="Front" page-height="297mm" page-width="210mm"
                           margin-top="1mm" margin-bottom="1mm" margin-right="1mm"
                           margin-left="1mm">
        <fo:region-body region-name="Body_front"/>
    </fo:simple-page-master>
</fo:layout-master-set>

<fo:declarations>
    <afp:include-form-map name="F1IDOCS1" src="file:src/test/data/afp/resources/F1IDOCS1.FDF"/>
</fo:declarations>

<fo:page-sequence master-reference="Front">
    <afp:invoke-medium-map name="DEFS"/>
    <fo:flow flow-name="Body_front">
<fo:block-container>
<fo:block font-family="Arial" font-size="12pt">Hello World !</fo:block>
</fo:block-container>
</fo:flow>
</fo:page-sequence>
</fo:root> 
```

# c++ - 使默认构造函数模板化以避免 Visual Studio 中的早期模板实例化错误

> ID：13775406
> 
> 赞同：2
> 
> 时间：2012-12-08T07:10:01.490
> 
> 标签：c++, visual-studio-2010, templates

我有一堂课，负责处理各种类型的有用任务，并像这种类型的行为一样。导入部分是该类如下所示：

```
template <typename Super>
class Wrapper : public Super
{
public:
    Wrapper ()
    :   Super ()
        { }

    template <typename Arg1>
    Wrapper ( Arg1 const & arg1 )
    :   Super ( arg1 )
        { }

    // More like that...
} ; 
```

这个想法是，如果您通常会调用：

```
MyClass1 * pObject1 = new MyClass1 ( "My String" ) ;
MyClass2 * pObject2 = new MyClass2 () ; 
```

您可以改为致电：

```
MyClass1 * pObject1 = new Wrapper<MyClass1> ( "My String" ) ;
MyClass2 * pObject2 = new Wrapper<MyClass2> () ; 
```

（注意：请不要质疑这样做的必要性。有必要。）

有时，Super 会有一个默认构造函数。有时它不会。但是 Wrapper 类总是一样的。

问题：Visual Studio 2010 似乎有一个早期模板实例化错误，并在实例化类时实例化默认构造函数（即使它没有被调用！）并导致权限错误或未找到方法-错误（取决于超级）。

模板化构造函数不会发生此问题，因为它们在使用之前肯定不会被实例化。所以，我想用它来修复默认构造函数。

请注意，所有这些代码在 GCC 4.2、GCC 4.1 和 LLVM 4.2.1 中都能完美运行。我什至让 cmake 从同一个 CMakeLists 文件生成 makefile、X-Code 项目文件和 VS2010 项目文件：两者都使用完全相同的代码（除了不使用这些类的次要低级抽象内容）。

我尝试过的一件事（不成功）：

```
template <typename Super>
class Wrapper : public Super
{
public:
    struct DummyStruct { } ;

    template <typename Arg1>
    Wrapper ( Arg1=int() , DummyStruct=DummyStruct() )
    :   Super ()
        { }

    template <typename Arg1>
    Wrapper ( Arg1 const & arg1 )
    :   Super ( arg1 )
        { }

    // More like that...
} ; 
```

VS2010 抱怨在 Wrapper 中找不到默认构造函数，尽管它没有告诉我在什么上下文中调用它。

任何有关如何强制 Wrapper 中的默认构造函数仅按需提供的建议（如，按照标准，它应该是）将不胜感激！谢谢！

更新/更多详情（2012 年 12 月 8 日 10.22 MST）：

VS抱怨的特殊情况是这样的：

```
class MyGenericSuper
{
public:
    MyGenericSuper ( std::string const & inOnlyArgument )
        { }
} ;

class MyClass : Wrapper<MyGenericSuper>
{
public:
    MyClass ( std::string const & inOnlyArgument )
    :   Wrapper<MyGenericSuper> ( inOnlyArgument )
        { }
} ; 
```

MyGenericSuper 的每个子类都具有完全相同的构造函数，并将其参数传递给 super。此外，它们只从抽象工厂实例化，所以我保证只使用一个参数创建它们（因为只有工厂创建它）。

此外，只有一个使用 Wrapper 的类（这似乎是错误的位置）并且它没有默认构造函数来调用其超级...

# android - 通过 USB 连接到 Android 设备以从 Eclipse 安装应用程序

> ID：13775408
> 
> 赞同：1
> 
> 时间：2012-12-08T07:10:07.633
> 
> 标签：android, ubuntu, usb

我有一个便宜的 Android 设备，我无法通过 USB 将它连接到我的 Ubuntu 11.10 笔记本电脑。当我连接 USB 数据线时，我在 Android 上看不到任何通知，并且来自`adb`.

```
$ ./adb devices
List of devices attached 

$ 
```

当我`lsusb`在连接设备之前和之后运行时，我看不到新的 USB 设备。

该设备运行 Android 4.0.3，我在设置下启用了 USB 调试：系统：开发人员选项。

我尝试按照下面的说明[配置 USB 规则](http://developer.android.com/tools/device.html)，`/etc/udev/rules.d/`但我不知道我的设备的供应商 ID。我写了一个小程序来显示`android.os.Build.MANUFACTURER`，但它是“未知的”。`android.os.Build.MODEL`是“P90”，所以我想我有一个来自 T&R 的 P90，正如[本论坛](http://www.slatedroid.com/topic/31562-eken-a90-advanced-97-ips-8000mah-battery/page__st__420)所讨论的，或者可能来自 Eken。我尝试按照[此处的建议](https://stackoverflow.com/a/9608812/4794)使用 Google 的供应商 ID ，但它没有改变任何东西。

我将尝试另一条电缆，但在我拿到新电缆之前，还有什么可以尝试的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:13:20.780

您是否在 Preferences > Developer options 中设置了 USB Debugging 选项？没有它，我认为您的设备不会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:17:26.007

从您的设备中遵循此操作：

```
Settings > Applications > Development > Enable USB debugging mode. 
```

或者您的设备上可能有一些不同的菜单，但您需要先启用 USB 调试模式。然后拔下您的设备并重新插入。您将在 lsusb 上看到您的设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T07:43:54.590

你必须在你的机器上安装usb驱动软件并重启eclipse，你的设备会在eclipse中检测到安装你的应用程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-28T14:06:34.237

很遗憾，但另一根电缆是唯一的解决方案。几分钟前我已经测试过了。1 台电脑、1 个 USB 端口、1 部电话和 2 条数据线。通过对手机端口附近的原始电缆进行一些操作，我可以在手机屏幕上获取它处于调试模式的信息。但是电脑上没有这样的信息。使用另一根电缆一切正常。

**注意**：几小时前，手机使用原装电缆。

# c# - clickonce 应用程序的已安装文件位置

> ID：13775412
> 
> 赞同：0
> 
> 时间：2012-12-08T07:12:32.100
> 
> 标签：c#, winforms, sql-server-ce

我在 VS -2010 中实现了一个 Windows 应用程序，我使用了本地数据库 database1.sdf。我已发布此应用程序并生成 exe 文件并在我的计算机中安装应用程序，我的应用程序工作正常，我可以将数据插入数据库，现在我需要 database1.sdf 但我在安装时找不到该数据库的位置，怎么能我找到存储与应用程序相关的所有文件的文件夹（通常当我们在计算机中安装任何程序时，它会在 Program Files 下生成文件夹，但我无法为我的应用程序找到这样的文件夹）？谢谢

# java - 用于 Java 集成测试的 Groovy 有什么更好的替代品吗？

> ID：13775420
> 
> 赞同：4
> 
> 时间：2012-12-08T07:13:25.130
> 
> 标签：java, testing, scripting, groovy, integration-testing

我计划使用其编程接口测试我的基于 Java 的 Web 应用程序。为此，我打算使用它们的 RMI/WebService 接口调用我的会话 bean，并检查它们支持的服务是否正确。为此，我需要一种脚本语言来：

*   调用我的 RMI/WebService 接口
*   执行 SQL 语句（例如首先清理数据库）
*   有一个简单的流控制（循环、条件等）
*   容易理解。我可能会要求我的非程序员人员编写测试脚本

我打算使用 Groovy 来实现这个目标。Groovy 有更好的建议或替代方案吗？

**编辑 1**

答案中提到的其他引入的 Groovy 替代方案是 JRuby 和 RSpec。网上有没有比较的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T19:00:26.327

我认为 Groovy 是您可以用于测试的最佳工具。Groovy 与 Java 的集成是无缝的，因此调用方法、库和类似的东西通常运行顺利。

此外，开始使用 Groovy 的公司通常会开始使用它进行测试，然后在生产代码中使用它。

正如@tim_yates 所说，[Spock](http://code.google.com/p/spock/)是一个用于测试的 Groovy 框架，而且是一个很棒的框架。您也可以毫无问题地使用[JUnit/EasyMock/TestNG/Whatever](http://groovy.codehaus.org/Testing+Guide)，并且 Groovy 本身带有完成工作的[GroovyTestCase](http://groovyguts.wordpress.com/tag/groovytestcase/)（基于 JUnit）。

Groovy 还使您能够编写[很酷的 DSL](http://www.slideshare.net/glaforge/going-to-mars-with-groovy-domainspecific-languages)，它可以帮助您为非程序员实现编程语言，正如您所说的那样。

Groovy 中的 SQL 支持也很简单。您可以使用[groovy.sql](http://groovy.codehaus.org/Tutorial+6+-+Groovy+SQL)包类并快速开始使用它，或者如果您愿意，也可以使用 JPA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T07:21:56.713

我会推荐[RSpec](http://rspec.info/)和[JRUby](http://jruby.org/)。

RSpec 非常清晰、描述性强且易于理解，即使是非程序员也可以使用它。使用 JRuby，您几乎可以完成使用 Java 可以做的所有事情。

因此，带有 JRuby 的 RSpec 听起来很适合您的要求。

有关示例，请参见[http://patshaughnessy.net/2009/6/25/taming-the-beast-using-jruby-and-rspec-to-test-a-j2ee-application](http://patshaughnessy.net/2009/6/25/taming-the-beast-using-jruby-and-rspec-to-test-a-j2ee-application)

# javascript - 单页 Rails 上的 CRUD

> ID：13775422
> 
> 赞同：0
> 
> 时间：2012-12-08T07:14:13.683
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, forms

我想在 Rails 上的单个页面上创建更新和删除。

我正在查看[https://github.com/codebrew/backbone-rails的主干导轨](https://github.com/codebrew/backbone-rails)

但我不确定我应该如何使用它来实现我想做的事情。

最终，我希望有一个文本字段来表示它是更新、删除还是创建，然后是一个包含以下字段的表单。对于创建，表单将为空。对于更新，应该在可以单击的一侧有链接，然后加载表单。

我希望它在没有页面重新加载的情况下发生。

我是网络编程的新手，任何关于我应该研究哪些技术的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:08:39.213

我不得不同意上面的评论。

在 ruby​​ on rails 之上，您将需要学习 javascript 和 jquery 的基础知识，并使用[backscore.js](http://backbonejs.org/)（它基于 jquery 和另一个名为[underscore.js](http://underscorejs.org/)的库构建）。

Dmitry 提到的 ToDo 列表就是一个很好的例子，它有注释源代码： [LiveApp](http://documentcloud.github.com/backbone/examples/todos/index.html)，[SourceCode](http://documentcloud.github.com/backbone/docs/todos.html)

我还发现这个[nettuts 主干教程](http://net.tutsplus.com/sessions/build-a-contacts-manager-using-backbone-js/)在学习主干时非常有用（如果你也想了解这些，他们也有一些关于 javascript 和 jquery 的很棒的教程）。一旦你让客户端的东西与骨干一起工作，那么将它与你的rails后端连接起来就很重要了（骨干rails gem可能会有所帮助，但我从未使用过它）

# android - Android 如何在 webview 上播放和浏览 youtube 视频

> ID：13775430
> 
> 赞同：2
> 
> 时间：2012-12-08T07:15:18.317
> 
> 标签：android, youtube, android-webview

我正在 Android 中开发一个应用程序，我应该能够在 webview 中传递一个 youtube url 并通过它播放和冲浪。到目前为止的进展是我可以看到初始屏幕，但播放按钮没有播放视频。在模拟器中它仍在播放声音，但在设备中也没有播放声音，尽管我可以浏览 youtube 视频并执行所有其他功能。我发布以下代码：

```
 public class YoutubePlayActivity extends Activity {
    String myUrl = "http://www.youtube.com/watch?v=wvwnjWcG250&feature=related";
     wv1 = (WebView) findViewById(R.id.web);
    wv1.setWebViewClient(new myClient());
    wv1.loadUrl("http://www.youtube.com/watch?v=wvwnjWcG250&feature=related");
    wv1.getSettings().setJavaScriptEnabled(true);
    wv1.getSettings().setSupportZoom(true); 

    wv1.getSettings().setBuiltInZoomControls(true);

    wv1.getSettings().setPluginState(WebSettings.PluginState.ON);
    wv1.setWebChromeClient(new MyWebChromeClient());
    // TODO Auto-generated method stub
}

class myClient extends WebViewClient {
    @Override
    public void onPageFinished(WebView view, String url) {
        // TODO Auto-generated method stub
        super.onPageFinished(view, url);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // TODO Auto-generated method stub

        view.loadUrl(url);
        return true;
    }

    @Override
    public void onReceivedError(WebView view, int errorCode,
            String description, String failingUrl) {
        // TODO Auto-generated method stub
        super.onReceivedError(view, errorCode, description, failingUrl);
    }

}
@Override
public void onPause() {
    super.onPause();

    try {
        Class.forName("android.webkit.WebView")
                .getMethod("onPause", (Class[]) null)
                            .invoke(wv1, (Object[]) null);

    } catch(ClassNotFoundException cnfe) {

    } catch(NoSuchMethodException nsme) {

    } catch(InvocationTargetException ite) {

    } catch (IllegalAccessException iae) {

    }
}
public class MyWebChromeClient extends WebChromeClient {

    @Override
    public void onShowCustomView(View view, CustomViewCallback callback) {
        // TODO Auto-generated method stub
        super.onShowCustomView(view, callback);
        if (view instanceof FrameLayout) {
            FrameLayout frame = (FrameLayout) view;
            if (frame.getFocusedChild() instanceof VideoView) {
                VideoView video = (VideoView) frame.getFocusedChild();
                frame.removeView(video);
                video.start();
            }
        }

    }
} 
```

}

# spring - Spring tile - 如何保留之前加载的jsp页面的状态？

> ID：13775433
> 
> 赞同：0
> 
> 时间：2012-12-08T07:16:14.940
> 
> 标签：spring

我正在使用 Spring 和磁贴来显示页面。我面临的问题是我在页面左侧有 3 个链接，每个链接指向一个 jsp 文件，我有三个 jsp 文件要加载。

1.  第一个 jsp 文件包含从 svg 文件加载的 SVG 图，支持缩放
2.  第二个 jsp 文件包含基于画布的图表
3.  另一个jsp文件有jqgrid

现在用户单击第一个链接，加载 SVG 图并用户缩放到某个级别，然后用户单击下一个链接加载基于画布的图表，现在问题是当用户再次单击第一个 jsp 文件再次加载的第一个链接并且用户缩放级别重置时到初始水平

如何保留之前加载的 JSP 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:57:14.990

将最后一个缩放级别存储在某处：

*   在服务器端，在 HTTP 会话中
*   在客户端，在 localStorage
*   在客户端，作为左侧三个链接的参数（即，每次用户缩放时，都会以新的缩放级别作为参数重新创建三个链接，这样当用户单击第一个链接时，缩放级别发送到服务器）

最适合您的解决方案取决于您的应用程序的架构。

另一种解决方案是在单个页面中加载所有内容，并使用 JavaScript 让三个链接显示一个部分并隐藏另外两个部分。

# php - How to validate that an inputted email address does not come from a free provder?

> ID：13775435
> 
> 赞同：0
> 
> 时间：2012-12-08T07:16:39.983
> 
> 标签：php, validation, email

I would like to be sure that the email address somebody enters into my form isn't from a free email provider such as gmail, hotmail/live, yahoo, etc.

How would I do that? I know the FILTER_VALIDATE_EMAIL option doesn't work for this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:24:23.907

Like this:

```
$email_address = 'test@hotmail.com';
$not_allowed = array('hotmail.com', 'gmail.com', 'msn.ca');
$email = explode('@', $email_address);

if(in_array($email[1], $not_allowed)){
    echo 'Email not allowed';
}else{
    echo 'Email is good';
} 
```

# c# - 切换到错误视图 OnException

> ID：13775436
> 
> 赞同：1
> 
> 时间：2012-12-08T07:16:40.670
> 
> 标签：c#, razor, asp.net-mvc-4

我想重定向到有关异常的其他视图。我有以下代码 OnException。但是我怎样才能改变视图呢？

```
 protected override void OnException(ExceptionContext filterContext)
     {    // Let other exceptions just go unhandled    
           if (filterContext.Exception is InvalidOperationException) 
           {        // Switch to an error view        ...    
           }
     } 
```

如何切换到错误视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:09:42.610

好的..设法使用以下代码做到这一点：

```
 var controllerName = (string)filterContext.RouteData.Values["controller"]; 
         var actionName = (string)filterContext.RouteData.Values["action"]; 
         var model = new HandleErrorInfo(filterContext.Exception, controllerName,actionName); 
         filterContext.Result = new ViewResult 
         {             
            ViewName = View,
            MasterName = Master,
            ViewData = new ViewDataDictionary<HandleErrorInfo>(model),  
            TempData = filterContext.Controller.TempData      
        }; 
```

# c# - 更新面板内的 DropDownList AutoPostBack 丢失 css 设计

> ID：13775437
> 
> 赞同：1
> 
> 时间：2012-12-08T07:16:57.763
> 
> 标签：c#, javascript, drop-down-menu, updatepanel, autopostback

我有这个页面结构

```
<MasterPage>
  <script type="text/javascript" src="../js/jquery.main.js"></script>
  <link rel="stylesheet" type="text/css" href="../css/all2.css" media="all" />
 <ContentPage>

  <updatePanel>
    <asp:DropDownList id="ddlCountry" runat="server" AutoPostBack="True"  CssClass="width_412" OnSelectedIndexChanged="ddlCountry_SelectedIndexChanged" ></asp:DropDownList>
  </updatePanel>

 </ContentPage>
</MasterPage> 
```

现在我需要`AutoPostBack="True"`选定国家的绑定状态。

问题是**“当我放置 AutoPostBack="True" 时丢失了 DropDownList 设计”**

***没有自动回发：***

![在此处输入图像描述](../Images/95bccea38ccc7b96a4a44a6a093b79ac.png)

***使用自动回发：***

![在此处输入图像描述](../Images/d00adc1f56e46008240ef574c92f28ef.png)

我进入 jquery.main.js 发现*select 的设计被动态替换*

```
function replaceSelects() {
for(var q = 0; q < selects.length; q++) {
if (!selects[q].replaced && selects[q].offsetWidth && selects[q].className.indexOf("default") == -1){
    selects[q]._number = q;
    //create and build div structure
    var selectArea = document.createElement("div");
    var left = document.createElement("span");
    left.className = "left";
    selectArea.appendChild(left);
    var disabled = document.createElement("span");
    disabled.className = "disabled";
    selectArea.appendChild(disabled);
    selects[q]._disabled = disabled;
    var center = document.createElement("span");
    var button = document.createElement("a");
    var text = document.createTextNode(selectText);
    center.id = "mySelectText"+q;
    var stWidth = selects[q].offsetWidth;
    selectArea.style.width = stWidth + "px";
    if (selects[q].parentNode.className.indexOf("type2") != -1){
        button.href = "javascript:showOptions("+q+",true)";
    }else{button.href = "javascript:showOptions("+q+",false)";}
    button.className = "selectButton";
    selectArea.className = "selectArea";
    selectArea.className += " " + selects[q].className;
    selectArea.id = "sarea"+q;
    center.className = "center";
    center.appendChild(text);
    selectArea.appendChild(center);
    selectArea.appendChild(button);
    //hide the select field
    selects[q].className += " outtaHere";
    //insert select div
    selects[q].parentNode.insertBefore(selectArea, selects[q]);
    //build & place options div
    var optionsDiv = document.createElement("div");
    var optionsListParent = document.createElement("div");
    optionsListParent.className = "select-center";
    var optionsListParent2 = document.createElement("div");
    optionsListParent2.className = "select-center-right";
    var optionsList = document.createElement("ul");
    optionsDiv.innerHTML += "<div class='select-top'><div class='select-top-left'></div><div class='select-top-right'></div></div>";
    optionsListParent.appendChild(optionsListParent2);
    optionsListParent.appendChild(optionsList);
    optionsDiv.appendChild(optionsListParent);
    selects[q]._options = optionsList;
    optionsDiv.style.width = stWidth + "px";
    optionsDiv._parent = selectArea;
    optionsDiv.className = "optionsDivInvisible";
    optionsDiv.id = "optionsDiv"+q;
    populateSelectOptions(selects[q]);
    optionsDiv.innerHTML += "<div class='select-bottom'><div class='select-bottom-left'></div><div class='select-bottom-right'></div></div>";
    document.getElementsByTagName("body")[0].appendChild(optionsDiv);
    selects[q].replaced = true;
    }
all_selects = true;
  }
  } 
```

我认为更新面板会在加载时回发，请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:19:39.420

> 我进入 jquery.main.js 发现 select 的设计被动态替换

恐怕 UpdatePanel 通过*替换*其中的所有内容来工作。这就是为什么你的造型被破坏的原因。

如果保持样式对您很重要，您有两种选择：

*   转向更原生的 AJAX 解决方案。即，捕捉 JavaScript 中的变化，然后对页面中的某些 Web 服务甚至静态方法进行 AJAX 调用，以执行您需要执行的操作。

*   看看是否有办法让 jQuery 在每次从 UpdatePanel 调用完成后重新设置下拉菜单的样式。

老实说，UpdatePanel 是微软对某种 Ajax 库的第一次尝试，这并不是他们的最大努力。摆脱这一点并不是最糟糕的主意。不过，我知道这不是您正在寻找的快速答案。

# java - 在java中创建url连接池

> ID：13775448
> 
> 赞同：1
> 
> 时间：2012-12-08T07:19:16.680
> 
> 标签：java, connection, pool

我在方法中有一些这样的代码：

```
 URL url = new URL(endPoint);
        String encoding = Base64.encodeBase64String(this.key.getBytes());

        connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("POST");
        connection.setDoOutput(true);
        connection.setRequestProperty  ("Authorization", "Basic " + encoding); 
```

从客户端多次调用此方法。我希望我可以创建一个连接池并根据需要重用它。

在Java中可以这样做吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:25:24.750

池化 HTTP 连接类似于其他池化对象。

基本上 ：

*   使用工厂获取 HTTP 连接的实例
*   不要忘记在不再使用时通过工厂将其释放到您的池中
*   在您的池管理中不要忘记检查并关闭您的连接。

我不建议您重新编码所有池管理，而是使用现有的库，如 Jakarta Commons-pool。

Jakarta Commons-pool 使您能够：

*   以“池耗尽​​异常”立即拒绝新 HTTP 连接的需求
*   尽管有他的限制，但要增加池的大小
*   等待 N 毫秒，期待一个免费的 HTTP 连接（延迟后的异常）。

# c# - 如何从 JS 中的 XMLHttpRequest 响应中获取列表（来自服务器端 c#）

> ID：13775449
> 
> 赞同：0
> 
> 时间：2012-12-08T07:19:27.503
> 
> 标签：c#, javascript, jquery, ajax, xmlhttprequest

我有一个带有聊天室的网站...当我有一个新房间时，我尝试获取它们的列表，但我不知道该怎么做...

我在 c# Service 中有一个函数，可以将信息插入到添加到 List 的属性中，然后我返回给客户端... List 是“Result”类的类型，每一行都包含我在 Result 中拥有的 Room Class 的 2 个属性也...

在我的客户端，我需要获取列表并在新的 var 属性中实现它。我从 XMLHttpRequest 中的服务器端获取内容，包含内容的属性名称是“响应”

当我写例子来看看我得到了什么：

```
var rooms = response;
alert(response); 
```

例如，如果我创建了 2 个房间，我会得到如下代码：

```
<ArrayOfResult xmlns:xsi="http://www.w3.org/2001/xmlScheme-.....>
<Result>
<roomName>nameofroom1</roomName>
<roomToken>123456</roomToken>
</Result>
<Result>
<roomName>nameofroom2</roomName>
<roomToken>246801</roomToken>
</Result>
</ArrayOfResult> 
```

“响应”是我在 $.ajax: 的“成功”选项中获得的属性，例如：

```
$ajax('functionInServer',{data:data,success:function(response){
var rooms = response;
alert(response);
}}); 
```

如何获取列表并将其实施到新的 var 以使用它？无论我做什么，我都会得到 undefind 或 null...（在我将执行“for”或“each”以获取列表的每一行之后）...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:31:08.490

您可以解析 XML 并遍历元素：

```
var $xml = $.parseXML(response);
var $rooms = $xml.find('result'); 
```

# sql - 水晶报表：自定义排序方式

> ID：13775453
> 
> 赞同：0
> 
> 时间：2012-12-08T07:20:14.293
> 
> 标签：sql, crystal-reports, sql-order-by

我有一个工作水晶报表，它是从 VB 应用程序调用的。我希望根据特定的列值对报告进行排序。考虑以下示例，

```
Model-Type     Model-Code     Quantity

A              xxx-123-xA1    1
A              xxx-123-xA2    1
B              xxx-123-xB1    1
B              xxx-123-xB2    1
C              xxx-123-xC1    1
C              xxx-123-xC2    1 
```

通过水晶报表，我可以按升序或降序对模型类型进行排序。有什么方法可以以自定义方式对它进行排序，例如首先是模型类型“B”，然后是“A”，然后是“C”（出于商业目的）？我可以通过 SQL 在 ORDER BY 子句中使用 CASE 来完成。但是如何在水晶报表中做到这一点。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:05:44.580

如果您在列上创建组，在组选项框中，在常用选项卡上，从下拉框中选择“按指定顺序”

或者创建一个公式，如：

```
if {table.value} = 'B' then 1
else if {table.value} = 'A' then 2
else if {table.value} = 'C' then 3 
```

等等...然后您可以对该公式字段进行排序

# apache-flex - Android res/layout 文件夹未包含在 APK 文件中

> ID：13775456
> 
> 赞同：1
> 
> 时间：2012-12-08T07:20:40.003
> 
> 标签：apache-flex, apk

我正在使用 android 本机扩展构建 flex 应用程序，但我的 apk 不包含布局文件夹，所以当我调用 android lib 的本机数学时，它通过[从 ANE 启动新活动来调用 android 的活动作为给定方向](http://www.leebrimelow.com/?p=3119#comment-773092)

然后在使用错误时出现`inte.putExtra(“layout”, adec.getResourceId(“layout.second”));` 错误说：`Resourse not found`

构建 ANE 或 apk 时是否出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:54:20.130

在构建 .ane 时，您应该确保包含“res”文件夹。看看这个：[Adobe AIR 3 native extensions - Android res 文件夹不包含在 .ane 文件中](https://stackoverflow.com/questions/8060041/adobe-air-3-native-extensions-android-res-folder-not-included-in-the-ane-file)

# php - 使用统计查询关联 3 个或更多表

> ID：13775458
> 
> 赞同：0
> 
> 时间：2012-12-08T07:21:25.147
> 
> 标签：php, mysql, phpmyadmin, yii

我正在尝试使用统计查询关联 Yii 中的 3 个表。我需要显示登录用户发布的每个请求的最低费率，条件是“通信”=hai 和“国家”= 中国，其中通信和国家/地区是 3 个不同表的属性。我该如何实施？有什么方法可以在统计查询的情况下添加AND/Or。我的代码如图所示..

```
 return array(                     
                         'serviceproposals' => array(self::HAS_MANY, 'Serviceproposal', 'ServiceRequestID'),
                         'user' => array(self::BELONGS_TO, 'Buyer', 'user_id'),
                         'postCount'=>array(self::STAT, 'serviceproposal', 'ServiceRequestID'),
                         'maxvalue'=>array(self::STAT, 'serviceproposal', 'ServiceRequestID','select'=>'MAX(proposal_amount)'),
                         'minvalue'=>array(self::STAT, 'serviceproposal', 'ServiceRequestID','select'=>'MIN(proposal_amount)', 'condition' => 'Communications ="hai"'),
                    ); 
```

数据库：

```
User[user_id,name,password,Country],
Provider[user_id,providercompany,providerdetails],
Buyer[user_id,contactinfo],
ServiceRequest[ServiceRequestID,Buyer.user_id,details,date],
ServiceProposal[ServiceProposalId,ServiceRequestID,Provider.user_id,services,propsal_rate,Communications] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:49:50.410

在 Yii 中，如果我们使用 STAT 查询，通常查询的性能会受到影响，因为 STAT 很慢。您可以在 CDBCriteria 选择选项中使用 COUNT 而不是添加关系，并且要使用它，我们需要将该属性声明到模型中 就像在 Serviceproposal 模型中一样，您需要添加属性 public $postCount; 因此，您可以使用输出中的计数值。

# jsf - jstl 中的 PrimeFaces 面板 我有一个网页，其中包含 jstl forEach 循环内的面板列表。所有面板在加载页面时都会折叠。在展开每个面板时，我将折叠状态 问问题 问问题 2012-12-08T07:22:00.937 3541 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个网页，其中包含 jstl forEach 循环内的面板列表。所有面板在加载页面时都会折叠。在展开每个面板时，我将折叠状态保存到 bean 以便以后参考。我从 ap:commandLink 更新面板，但面板显示为基于先前的 index 展开，而不是 bean 值。我的要求是面板的折叠属性应该根据之前设置的 bean 值更新，目前面板正在根据之前扩展面板的索引进行扩展，而不是根据它的 bean 属性值。 只需看一下代码片段。 <h:form id="form"><c:foreach items="#{items}" var="name"><p:panel header="#{name}" toggleable="true" toggletitle="#{bean.toggleStatus.get(name)}" collapsed="#{bean.toggleStatus.get(name)}" togglespeed="500" id="panel#{name}" widgetvar="panel#{name}"></p:panel></c:foreach><p:commandlink id="Search" style="margin-left :5px;" action="#{bean.search}" update="form" ajax="true"></p:commandlink></h:form>当我单击我的 firstview 中的按钮时，我想通过 segue 将 json 数据直接传递给我的 secondview 我从 url 获取 json 数据：http ://api.kivaws.org/v1/loans/search.json?status=fundraising我在我的屏幕上得到它，但我必须将数据直接发送到我的secondviewcontrollerthroughsegue无需firstviewcontroller通过单击firstviewcontroller. #import "ViewController.h" #define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) #define kLatestKivaLoansURL [NSURL URLWithString:@"http://api.kivaws.org/v1/loans/search.json?status=fundraising"] @implementation ViewController @synthesize textinput; - (IBAction)loadData { dispatch_async(kBgQueue, ^{ NSData* data = [NSData dataWithContentsOfURL: kLatestKivaLoansURL]; [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES]; }); } - (void)fetchedData:(NSData *)responseData { NSError* error; NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData //1 options:kNilOptions error:&error]; NSArray* latestLoans = [json objectForKey:@"loans"]; //2 NSLog(@"loans: %@", latestLoans); //3 [textinput resignFirstResponder]; if ([textinput.text isEqualToString:@""]) { display.text = @"Enter The Value"; }else{ if ([textinput.text isEqualToString:@"loans"]) { NSDictionary* loans = [latestLoans objectAtIndex:0]; NSDictionary* info = [NSDictionary dictionaryWithObjectsAndKeys: lblWHO.text = [loans objectForKey:@"name" ], lblActivtiy.text = [loans objectForKey:@"activity"],nil]; lblLoan.text = [(NSDictionary*)[loans objectForKey:@"location"] objectForKey:@"country"], nil; NSData* jsonData = [NSJSONSerialization dataWithJSONObject:info options:NSJSONWritingPrettyPrinted error:&error]; } } } 我将绑定在 my 中的数据传递firstviewcontroller给segue，secondviewcontroller如下所示： - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender { if ([[segue identifier] isEqualToString:@"ShowCustDetail"]) { self.showact = Activity.text; self.showname = Name1.text; self.showcount = Country.text; CustViewController *cv = [segue destinationViewController]; cv.showact = self.showact; cv.showname = self.showname; cv.showcount = self.showcount; } } 但是我必须将这些数据直接绑定到我的目标视图控制器中，而不是在我的第一个视图控制器中 #import "CustViewController.h" @interface CustViewController () @end @implementation CustViewController @synthesize Name1; @synthesize showname; @synthesize showact; @synthesize showcount; @synthesize Name2; @synthesize Name3; - (void)viewDidLoad { [super viewDidLoad]; Name1.text = self.showact; Name2.text = self.showname; Name3.text = self.showcount; Name4.text = self.showstat; Name5.text = self.showsect; } @end 感谢您将我与你们联系起来。如果我得到解决方案很有用。 jsfprimefacesjstl 4 1 回答 1 This answer is useful 0 from your code, it seems that #{bean.toggleStatus.get(name)} returns a String object. The <p:panel collapsed="">requires a boolean value. You have to post your backing bean code, to see the return value of that method. 于 2012-12-10T14:43:46.257 回答 Related 1 android - 带有图标和标题的 ActionBarSherlock 列表导航 2 eclipse - 如何更改 Eclipse 窗口图标 2 java - 识别字符数组的有效字符 1 windows - 如何修改win键盘快捷键？ 1 postgresql - 如何正确使用 dblink_build_sql_insert (postgreSQL) 1 php - 如何将特定 URL 处的 .txt 文件导入 PHP 数组？ 5 php - 如何获得 ISO 3166-1 兼容的国家代码？ 2 php - mysql查询计算评分总和 1 java - java-图像处理 1 ios - IAP 测试用户出现未知错误 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</p:panel>

> ID：13775464
> 
> 赞同：2
> 
> 时间：
> 
> 标签：jsf, primefaces, jstl

我有一个网页，其中包含 jstl forEach 循环内的面板列表。所有面板在加载页面时都会折叠。在展开每个面板时，我将折叠状态保存到 bean 以便以后参考。我从 ap:commandLink 更新面板，但面板显示为基于先前的 index 展开，而不是 bean 值。我的要求是面板的折叠属性应该根据之前设置的 bean 值更新，目前面板正在根据之前扩展面板的索引进行扩展，而不是根据它的 bean 属性值。

只需看一下代码片段。

```
<h:form id="form">
        <c:forEach items="#{items}" var="name">
            <p:panel header="#{name}" toggleable="true"
                toggleTitle="#{bean.toggleStatus.get(name)}"
                collapsed="#{bean.toggleStatus.get(name)}" toggleSpeed="500"
                id="panel#{name}" widgetVar="panel#{name}">
                <h:outputText value="#{name}"/>
            </p:panel>
        </c:forEach>
        <p:commandLink id="Search" style="margin-left :5px;"
            action="#{bean.search}" update="form" ajax="true"/>
    </h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:43:46.257

from your code, it seems that `#{bean.toggleStatus.get(name)}` returns a `String` object.

The `<p:panel collapsed="">` requires a boolean value.

You have to post your backing bean code, to see the return value of that method.

# java - JAXB 是否支持 xsd:restriction？

> ID：13775465
> 
> 赞同：21
> 
> 时间：2012-12-08T07:22:24.917
> 
> 标签：java, web-services, jakarta-ee, jaxb, xsd-validation

```
<xs:element name="age">
  <xs:simpleType>
    <xs:restriction base="xs:integer">
      <xs:minInclusive value="0"/>
      <xs:maxInclusive value="120"/>
    </xs:restriction>
  </xs:simpleType>
</xs:element> 
```

所以我希望它像这样转换为 Java 代码：

```
public void setAge(int age){
    if(age < 0 || age > 120){
         //throw some exception
    }
     //setting the age as it is a valid value
} 
```

在 JAXB 中可以吗？

已经看到一些 WebService Client 存根生成器这样做可能是axis2 webservice，但不确定。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-12T11:46:27.567

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)规范不包括在域模型中生成快速失败逻辑。现在的一种常见做法是以注释（或 XML）的形式表达验证规则并对其进行验证。 [**Bean Validation (JSR-303)**](http://jcp.org/en/jsr/detail?id=303)对此进行了标准化，并可在任何 Java EE 6 实现中使用。

**XJC 扩展**

我自己没有尝试过以下扩展，但它似乎会在 XML 模式的域模型表示验证规则上生成[**Bean Validation (JSR-303)注释。**](http://jcp.org/en/jsr/detail?id=303)由于 XJC 具有很强的可扩展性，因此可能还有其他可用的插件。

*   [https://github.com/krasa/krasa-jaxb-tools](https://github.com/krasa/krasa-jaxb-tools)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T09:07:13.747

在 JAXB 中执行此验证的建议方法是在编组器上打开模式验证。解组器：

```
SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI); 
Schema schema = schemaFactory.newSchema(...);

ValidationEventHandler valHandler = new ValidationEventHandler() {
  public boolean handleEvent(ValidationEvent event) {
      ...
  }
};

marshaller.setSchema(schema);
marshaller.setEventHandler(valHandler); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-27T09:26:54.860

您可以尝试[JAXB-Facets](https://github.com/whummer/jaxb-facets)。快速片段：

```
class MyClass {

    @MinOccurs(1) @MaxOccurs(10)
    @Facets(minInclusive=-100, maxInclusive=100)
    public List<Integer> value;

    @Facets(pattern="[a-z][a-z0-9]{0,4}")
    public String name;

} 
```

# ios - 当我单击我的 firstview 中的按钮时，我想通过 segue 将 json 数据直接传递给我的 secondview

> ID：13775466
> 
> 赞同：1
> 
> 时间：2012-12-08T07:22:41.543
> 
> 标签：ios, json, uiviewcontroller, segue

我从 url 获取 json 数据：[http](http://api.kivaws.org/v1/loans/search.json?status=fundraising) ://api.kivaws.org/v1/loans/search.json?status=fundraising我在我的屏幕上得到它，但我必须将数据直接发送到我的`secondviewcontroller`through`segue`无需`firstviewcontroller`通过单击`firstviewcontroller`.

```
#import "ViewController.h"

#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) 
#define kLatestKivaLoansURL [NSURL URLWithString:@"http://api.kivaws.org/v1/loans/search.json?status=fundraising"] 

@implementation ViewController
@synthesize textinput;

- (IBAction)loadData {
        dispatch_async(kBgQueue, ^{
           NSData* data = [NSData dataWithContentsOfURL:
                                kLatestKivaLoansURL];
           [self performSelectorOnMainThread:@selector(fetchedData:)
                                       withObject:data waitUntilDone:YES];
        });
 }

- (void)fetchedData:(NSData *)responseData {

    NSError* error;
    NSDictionary* json = [NSJSONSerialization
                          JSONObjectWithData:responseData //1
                          options:kNilOptions
                          error:&error];

    NSArray* latestLoans = [json objectForKey:@"loans"]; //2

    NSLog(@"loans: %@", latestLoans); //3
    [textinput resignFirstResponder];

   if ([textinput.text isEqualToString:@""])
   {
         display.text = @"Enter The Value";

   }else{
        if ([textinput.text isEqualToString:@"loans"])
          {

             NSDictionary* loans = [latestLoans objectAtIndex:0];

             NSDictionary* info = [NSDictionary dictionaryWithObjectsAndKeys:
                 lblWHO.text = [loans objectForKey:@"name" ],
                 lblActivtiy.text =  [loans objectForKey:@"activity"],nil];
                  lblLoan.text = [(NSDictionary*)[loans objectForKey:@"location"]
                   objectForKey:@"country"], nil;

             NSData* jsonData = [NSJSONSerialization dataWithJSONObject:info
                                               options:NSJSONWritingPrettyPrinted error:&error];
          }   
      }
 } 
```

我将绑定在 my 中的数据传递`firstviewcontroller`给`segue`，`secondviewcontroller`如下所示：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"ShowCustDetail"])
    {
          self.showact = Activity.text;
          self.showname = Name1.text;
          self.showcount = Country.text;

        CustViewController *cv = [segue destinationViewController];
     cv.showact = self.showact;
     cv.showname = self.showname;
     cv.showcount = self.showcount;
    }
} 
```

但是我必须将这些数据直接绑定到我的目标视图控制器中，而不是在我的第一个视图控制器中

```
 #import "CustViewController.h"

  @interface CustViewController ()
  @end

  @implementation CustViewController
  @synthesize Name1;
  @synthesize showname;
  @synthesize showact;
  @synthesize showcount;
  @synthesize Name2;
  @synthesize Name3;

  - (void)viewDidLoad
   {
     [super viewDidLoad];

      Name1.text = self.showact;
      Name2.text = self.showname;
      Name3.text = self.showcount;
      Name4.text = self.showstat;
      Name5.text = self.showsect;

   }

   @end 
```

感谢您将我与你们联系起来。如果我得到解决方案很有用。

# javascript - 为什么$（这个）。成功后将无法工作：

> ID：13775474
> 
> 赞同：2
> 
> 时间：2012-12-08T07:24:08.587
> 
> 标签：javascript, jquery

在我的代码中，我在这里使用了我以前的问题中的以下两行。

```
$(this).removeClass('page larger').addClass('current');
$(this).siblings().removeClass('current').addClass('page larger'); 
```

如果我将这些放在成功之外的任何地方：它工作正常。但是，如果我将它们放在成功中：它们将不起作用。我需要他们只为成功而努力：。我该如何解决这个问题？

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>PHP, jQuery search demo</title>
<style type="text/css">
.current{
padding:5px;
border:1px solid #000000;
background-color:white;
cursor:pointer;
}
.page{
padding:5px;
border:1px solid #000000;
background-color:red;
cursor:pointer;
}
</style>

<script type="text/javascript" src="http://localhost/jQuery1.8.3.js"></script>
<script type="text/javascript">
$(function() {

    $('.page').live('click', function() {

       var menus    =($(this).attr("menus"));
       var data            = menus;

        if(data) {

        //alert (data);
        //    // ajax call
            $.ajax({
                type: "GET",
                 url: "pages.php",
                data: data,
                dataType: "json",
               cache: false,
          beforeSend: function(html) {

                    $(".pageLoading").html("Fetching new posts...");

                },
               success: function(page_data){
                    $(".posts").empty();
                    $(".pageLoading").empty();
                    $(".posts").html(page_data['articles']);
                    console.log (page_data['articles']);

                               $(this).removeClass('page larger').addClass('current');
                              $(this).siblings().removeClass('current').addClass('page larger');

              },

          });    
        }
        return false;
    });
    /////////////////////////////////////////////////////////////////////////

});
</script>

</head>
<body>
    <div class="posts">These are the existing posts</div>
    <br />
        <div class="navigation clearfix">
            <div class="menusHolder">
                    <span  menus="in/consumer/p22" class="current">1</span>
                    <span  menus="in/consumer/p19" class="page larger">2</span>
                    <span  menus="in/consumer/p15" class="page larger">3</span>
                    <span  menus="in/consumer/p10" class="page larger">4</span>
            </div>
        </div>
        <br />
        <div class="pageLoading"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T07:28:06.153

的范围发生`this`了变化。如果要保留对原始元素的引用，请在`click`范围内创建一个变量，`success`处理程序会将其包含在其闭包中：

```
$(function() {

    $('.page').live('click', function() {

       var menus    =($(this).attr("menus"));
       var data            = menus;
       var $that = $(this); // <- add this

        if(data) {

        //alert (data);
        //    // ajax call
            $.ajax({
                type: "GET",
                 url: "pages.php",
                data: data,
                dataType: "json",
               cache: false,
          beforeSend: function(html) {

                    $(".pageLoading").html("Fetching new posts...");

                },
               success: function(page_data){
                    $(".posts").empty();
                    $(".pageLoading").empty();
                    $(".posts").html(page_data['articles']);
                    console.log (page_data['articles']);

                     // change $(this) to $that. success handler is a closure that will include $that
                     $that.removeClass('page larger').addClass('current');
                     $that.siblings().removeClass('current').addClass('page larger');

              },

          });    
        }
        return false;
    });
    /////////////////////////////////////////////////////////////////////////

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T07:28:46.427

采用，

```
$('.page').live('click', function() {
   var $that = $(this);
   // use that 
}); 
```

在 ajax 范围内，this 指的是 ajax 对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-08T07:31:35.663

上下文选项将起到作用，如此[处](http://api.jquery.com/jQuery.ajax/)所述。

只需将其添加到您的 ajax 调用中，如下所示：

```
$.ajax({
    type: "GET",
    context: this,
    url: "pages.php",
    data: data,
    ...
    success: function() {
        $(this).removeClass('page larger').addClass('current');
        $(this).siblings().removeClass('current').addClass('page larger');
    }
}); 
```

# javascript - 从 javascript 更改 asp:AutoCompleteExtender 的 css

> ID：13775479
> 
> 赞同：0
> 
> 时间：2012-12-08T07:25:08.360
> 
> 标签：javascript, asp.net

我想知道如何`CompletionListItemCssClass`在 javascript 中更改 asp:AutoCompleteExtender 因为我每次更改组合框的索引时都需要更改它这是我的代码：ajaxtoolki：

```
<asp:AutoCompleteExtender ID="autocom" ClientIDMode="Static"  runat="server" CompletionSetCount="10"   CompletionListItemCssClass="toolkitEnglish" 
        EnableCaching="true" MinimumPrefixLength="1" TargetControlID="txtBoxWord"   ServicePath="~/translator/AutoComplete.asmx" ServiceMethod="GetCompletionList"  ></asp:AutoCompleteExtender> 
```

我试过这个但它不起作用：

```
document.getElementById('autocom').CompletionListItemCssClass = "toolkitEnglish"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:30:15.840

`CompletionListItemCssClass`是服务器端属性名称；这在 JavaScript 中不起作用。

但是，如果自动完成扩展器呈现一个具有`autocom`您需要设置 css 类的 id 的元素，那么这应该可以工作

```
document.getElementById('autocom').className = "toolkitEnglish"; 
```

# wordpress - 在 wordpress 白屏死机中收到错误消息

> ID：13775485
> 
> 赞同：1
> 
> 时间：2012-12-08T07:25:43.980
> 
> 标签：wordpress

我得到了wordpress白屏死机。

我想显示错误消息。我试过`define('WP_DEBUG', true)`但是它没有显示任何错误消息。

有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-08T12:35:44.657

放入**ob_start();** 在顶部的 wp-config.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T23:42:16.237

修复它的一般方法。

1.  重命名您的 wp 内容
2.  激活/停用您的插件
3.  改变你的主题
4.  在 wp-config.php 中添加 define('WP_DEBUG', true)
5.  检查 php 文件。就我而言，php 文件缺少代码！

# mysql - 来自子查询的 MySQL IN 值

> ID：13775487
> 
> 赞同：2
> 
> 时间：2012-12-08T07:26:18.217
> 
> 标签：mysql, sql, subquery

我有一个像这样的查询

```
select prod_name 
from ct_products 
where id in ( (select prod_id 
               from ct_recommend 
               where cat_id=12) ) and status > 0 
```

但是，因为子查询返回一个看起来像 1,2,3 的字符串而不是结果行，所以查询不能按应有的方式工作。有什么方法可以格式化子查询结果，使其在 IN 子句中起作用？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T07:29:06.047

试试这个，

```
select prod_name 
from ct_products 
where FIND_IN_SET(ID,(select prod_id from ct_recommend where cat_id=12)) <> 0 
      and status > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:10:35.257

试试这个：

```
SELECT prod_name 
FROM ct_products cp 
WHERE STATUS > 0 AND 
      EXISTS (SELECT * FROM ct_recommend cr WHERE cp.id = cr.prod_id AND cat_id=12); 
```

# android - 如何在标准滑动+选项卡模型下的选项卡中使用布局 xml 文件

> ID：13775492
> 
> 赞同：1
> 
> 时间：2012-12-08T07:27:01.827
> 
> 标签：android, tabs, swipe

我使用带有 ADT 的 Eclipse Juno 创建了一个项目，为 ICS 版本选择了 swipe+tab 模型。我在生成的代码中看到有一个部分创建一个 textview 并将页面/选项卡编号放置在运行时显示的 textview 的中心。

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Create a new TextView and set its text to the fragment's section
        // number argument value.
        TextView textView = new TextView(getActivity());
        textView.setGravity(Gravity.CENTER);
        textView.setText(Integer.toString(getArguments().getInt(ARG_SECTION_NUMBER)));
        return textView; 
```

但是，我不想在每个选项卡上显示一个文本视图，而是从我的布局中显示一个 XML 文件......每个选项卡的唯一布局。我想我需要使用这样的东西：

```
setContentView(R.layout.tab1); 
```

或者

```
setContentView(R.layout.tab2); 
```

但我似乎无法弄清楚如何让它在我的标签中工作。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T00:58:18.983

弄清楚如何使用以下代码在其中一个选项卡中显示我的 XML 布局文件 (main.xml)：

```
 public DummySectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Create a new TextView and set its text to the fragment's section
        // number argument value.

        if ((getArguments().getInt(ARG_SECTION_NUMBER)==1)) {
            View view = inflater.inflate(R.layout.main, container, false);
            return view; 
            }
            else {
                TextView textView = new TextView(getActivity());
                textView.setGravity(Gravity.CENTER);
                textView.setText(Integer.toString(getArguments().getInt(ARG_SECTION_NUMBER)));
                return textView;
        }
    } 
```

希望这对你也有帮助！

# java - Java 使用 mimeutil 从内容获取文件类型未按预期工作

> ID：13775494
> 
> 赞同：4
> 
> 时间：2012-12-08T07:27:13.107
> 
> 标签：java, mime-types

在我的以下代码中：

```
MimeUtil.registerMimeDetector("eu.medsea.mimeutil.detector.MagicMimeMimeDetector");
File f = new File ("c:\\temp\\mime\\java.exe");
Collection<?> mimeTypes = MimeUtil.getMimeTypes("c:\\temp\\mime\\java.exe");
MimeType m = mimeTypes.toArray(new MimeType[mimeTypes.size()])[0];
System.out.println(m); 
```

无论选择什么文件类型，即 csv、xls、exe 等，输出始终是 application/octet-stream。

但根据以下网站：

[http://www.rgagnon.com/javadetails/java-0487.html](http://www.rgagnon.com/javadetails/java-0487.html)

它应该显示为 ms-word 或 ms-excel 等。

如何使这项工作？我想要的只是从文件内容中获取文件类型（而不是使用不太可靠的文件扩展名）。我正在阅读其他选项，例如 tika 需要太多文件（例如 20 个），这对于这个单一目的来说太多了，而 JMimeMagic 需要 apache-oro 这是一个死项目，因此我也不喜欢这个想法。所有其他解决方案似乎都依赖于文件扩展名，如上所述似乎不可靠。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T18:43:07.037

好的，我想我是为自己（和你）想出来的......我查看了作者的单元测试，特别是 MimeUtilTest.java 和你瞧，他在单元测试 setup() 中这样做了： `MimeUtil.registerMimeDetector("eu.medsea.mimeutil.detector.MagicMimeMimeDetector"); MimeUtil.registerMimeDetector("eu.medsea.mimeutil.detector.ExtensionMimeDetector"); MimeUtil.registerMimeDetector("eu.medsea.mimeutil.detector.OpendesktopMimeDetector");`

我和你也只注册了第一个，MagicMimeMimeDetector。一旦我添加了另外两个，它就开始正常工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-27T15:16:43.870

尊重操作系统，因此您可以尝试：

```
 MimeUtil
        .registerMimeDetector(System.getProperty("os.name").startsWith(
              "Windows") ? "eu.medsea.mimeutil.detector.WindowsRegistryMimeDetector"
              : "eu.medsea.mimeutil.detector.OpendesktopMimeDetector"); 
```

# html - html 页面上的一个居中图像

> ID：13775495
> 
> 赞同：1
> 
> 时间：2012-12-08T07:27:39.753
> 
> 标签：html

我正在尝试编写一个 html 页面，我可以将任何图像 url 放入其中，它以黑色背景显示该图像，在页面上垂直和水平居中。

我有这个：

```
<html>
<body style="background: black;">

<img src="http://i.imgur.com/n8o1E.png" style="display: block; margin: auto; max-height: 100%; max-width: 100%">

</body>
</html> 
```

对于比页面更高和更薄的图像，它的工作正确，但它不会垂直居中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:30:53.093

```
<html>
<head>
<style>
html, body, #wrapper {
       height:100%;
       width: 100%;
       margin: 0;
       padding: 0;
       border: 0;
    }
    #wrapper td {
       vertical-align: middle;
       text-align: center;
    }
</style>
</head>
<body>
   <table id="wrapper">
      <tr>
         <td><img src="logo.png" alt="" /></td>
      </tr>
   </table>
</body>
</html> 
```

# sql - 我的 JPA 原生查询中会发生什么？

> ID：13775496
> 
> 赞同：-1
> 
> 时间：2012-12-08T07:27:58.090
> 
> 标签：sql, jpa, join, entitymanager, nativequery

我在 mysql 上使用这个查询（tbl1 中的每条记录都有 tbl2 中的记录列表）：

```
select tbl1.id, tbl2.id from parenttable1 tbl1 join childtable2 tbl2 on tbl1.id = tbl2.tbl1Id 
```

结果是真的，但是当我在我的应用程序中将它用作本机查询（javax.persistence.EntityManager#createNativeQuery()）时，tbl2.id 会重复。问题是什么？

结果是这样的：

```
id   id
11   1
11   1
22   3
33   4
44   5
44   5
44   5 
```

但我希望：

```
id   id
11   1
11   2
22   3
33   4
44   5
44   6
44   7 
```

我的代码是这样的：

`List<MyDTO> foundList = (List<MyDTO>) entityManager.createNativeQuery("the query above", MyDTO.class).getResultList();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:51:28.063

如果您不知道应该如何映射这两列，我看不出 JPA 如何将返回具有相同名称的两列的查询结果映射到 DTO。而且你甚至没有展示 DTO 的样子。

执行以下代码，一切都应该没问题：

```
List<Object[]> list = (List<Object[]>) em.createNativeQuery(sql).getResultList();
List<MyDTO> result = new ArrayList<MyDTO>(list.size());
for (Object[] row : list) {
    result.add(new MyDTO((Long) row[0], (Long) row[1]));
} 
```

下次你被要求展示你的代码时，*不要*认为它是完美的或显而易见的，并且错误一定来自其他地方。99.999% 的情况下，错误都在*您的*代码中，而不是在数百万开发人员使用和测试的库的代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:11:59.673

非常感谢你的灵感。问题是 @Id 存在于父表的 id 字段而不是子表的 id 字段（在 DTO 内）！

# search - 使用 webservice 在 netsuite 中搜索 VendorBill

> ID：13775498
> 
> 赞同：0
> 
> 时间：2012-12-08T07:28:07.897
> 
> 标签：search, netsuite

我需要从 netsuite 中检索账单信息。如何使用网络服务搜索账单（VendorBill-complextype）。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:15:00.263

我写了[一篇博客文章](http://www.ozonesolutions.com/programming/2011/06/sample-search-code/)，其中有一个使用 2011 和更早版本的 API 进行 Netsuite API 搜索的示例。您应该能够只修改 VendorBill 复杂类型的代码。

# sql - Oracle SQL小程序实现

> ID：13775499
> 
> 赞同：1
> 
> 时间：2012-12-08T07:28:16.197
> 
> 标签：sql, database, stored-procedures, oracle10g

我被困在这里，如果可能的话需要一些指导！

我有这张桌子：

```
doctor_details (doctor_id, name, surname, date_of_birth) 
```

我只想创建一个程序，以下列形式添加 30 位医生：

```
doctor_id  name    surname    date_of_birth
-------------------------------------------
01         John-01 Surname-01 2001-01-01
02         John-02 Surname-02 2002-01-01
03         John-03 Surname-03 2003-01-01 
```

我显然知道如何做，但是我需要在这里进行一些迭代以某种方式将其放入程序中，因此当我调用它以立即增加这些行时！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:56:21.967

你可以用 1 条 sql 语句来做到这一点。

```
SQL> create table doctors(doctor_id number, name varchar2(100), surname varchar2(100), date_of_birth date);

Table created.

SQL> create sequence doctor_id_seq start with 1 cache 100;

Sequence created.

SQL> insert into doctors
  2              (doctor_id, name, surname, date_of_birth)
  3  select doctor_id_seq.nextval, 'John-' || doctor_id_seq.currval, 'Surname-' || doctor_id_seq.currval, to_date('01-jan-2001', 'dd-mon-yyyy') + dbms_random.value(1, 3000)
  4    from dual
  5   connect by level <= 30/*rows to gen*/;

30 rows created.

SQL> col name format a20
SQL> col surname format a20
SQL> select * from doctors;

 DOCTOR_ID NAME                 SURNAME              DATE_OF_B
---------- -------------------- -------------------- ---------
         2 John-2               Surname-2            09-JAN-01
         3 John-3               Surname-3            22-FEB-06
         4 John-4               Surname-4            09-SEP-01
         5 John-5               Surname-5            17-DEC-01
         6 John-6               Surname-6            28-JUN-05
         7 John-7               Surname-7            21-SEP-06
         8 John-8               Surname-8            16-SEP-02
         9 John-9               Surname-9            05-MAY-04
        10 John-10              Surname-10           06-OCT-07
        11 John-11              Surname-11           05-JUN-02
        12 John-12              Surname-12           16-NOV-06
        13 John-13              Surname-13           18-SEP-05
        14 John-14              Surname-14           16-MAY-06
        15 John-15              Surname-15           02-OCT-05
        16 John-16              Surname-16           11-JAN-04
        17 John-17              Surname-17           01-FEB-08
        18 John-18              Surname-18           15-FEB-06
        19 John-19              Surname-19           05-MAY-02
        20 John-20              Surname-20           15-SEP-02
        21 John-21              Surname-21           26-NOV-08
        22 John-22              Surname-22           18-MAR-01
        23 John-23              Surname-23           03-SEP-01 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:25:07.907

这是经过测试的代码::

```
 drop table doctor_details;
    create table doctor_details 
    (doctor_id varchar2(20),
     name varchar2(100), 
     surname varchar2(100), 
     date_of_birth date);

    drop sequence doctor_id_seq;
    create sequence doctor_id_seq 
    start with 1 
    maxvalue 99999999
    cache 100;

    alter session set nls_date_format='yyyy-mm-dd hh24:mi:ss';

        create procedure doctors_details_add as
    begin
              for x in 1..30 loop
              insert into doctor_details (doctor_id, name, surname, date_of_birth)
              values
              (lpad(doctor_id_seq.nextval,2,'0'),
               'John'||'-'||lpad(doctor_id_seq.currval,2,'0'),
               'Surname'||'-'||lpad(doctor_id_seq.currval,2,'0'),
                add_months(to_date('2001-01-01','YYYY-MM-DD'),12*doctor_id_seq.currval)
               );
              end loop;
    end doctors_details_add; 
```

# php - 如何从 twitter API 输出这个数组的内容？

> ID：13775500
> 
> 赞同：1
> 
> 时间：2012-12-08T07:28:21.273
> 
> 标签：php, twitter, twitter-oauth

好的，所以我调用了 Twitter API 来返回我朋友的状态，我做了一个 var_dump，它返回了一个信息数组.. 但是，我只想捕捉我朋友的 PROFILE IMAGEs .. 所以这就是我为抓住它所做的，它没有返回任何东西

```
$friends = $connection->get('statuses/friends_timeline'); //method that catches my friends'statuses on Twitter.
var_dump($friends); 
```

下面的循环应该显示我朋友的图像..循环下面是var_dump返回给我的示例..我哪里出错了？？？

```
if( is_array($friends))
{
    shuffle($friends);
}              

for($i=0; $i <=count($friends);$i++)
    if (is_array($friends))
    {
         foreach ($friends[$i] as $key => $value)
         {                                     
             if(array_key_exists("profile_image_url", $friends[$i]))
             {                                   
                 echo "<img src='". $value."' width='100' height='100'/>";
             }

         } 
    }

array(20) {
  [0]=>
  object(stdClass)#7 (19) {
    ["id_str"]=>
    string(18) "277310503989149697"
    ["user"]=>
    object(stdClass)#8 (37) {
      ["id"]=>
      int(48948037)
      ["default_profile"]=>
      bool(false)
      ["following"]=>
      bool(false)
      ["profile_background_tile"]=>
      bool(true)
      ["id_str"]=>
      string(8) "48948037"
      ["url"]=>
      NULL
      ["profile_sidebar_fill_color"]=>
      string(6) "CCD7DB"
      ["profile_image_url"]=>
      string(66) "http://a0.twimg.com/profile_images/1821098433/photo__1__normal.JPG"
      ["utc_offset"]=>
      int(-28800)
      ["contributors_enabled"]=>
      bool(false)
      ["time_zone"]=>
      string(26) "Pacific Time (US & Canada)"
      ["name"]=>
      string(16) "Semirindi Makala"
      ["listed_count"]=>
      int(1)
      ["profile_background_color"]=>
      string(3) "fff"
      ["screen_name"]=>
      string(7) "MASE_85"
      ["geo_enabled"]=>
      bool(false)
      ["protected"]=>
      bool(false)
      ["follow_request_sent"]=>
      bool(false)
      ["location"]=>
      string(13) "Teh internets"
      ["profile_background_image_url"]=>
      string(69) "http://a0.twimg.com/profile_background_images/422730827/photo__1_.JPG"
      ["friends_count"]=>
      int(15)
      ["verified"]=>
      bool(false)
      ["profile_link_color"]=>
      string(6) "0084B4"
      ["statuses_count"]=>
      int(59)
      ["notifications"]=>
      bool(false)
      ["default_profile_image"]=>
      bool(false)
      ["favourites_count"]=>
      int(0)
      ["lang"]=>
      string(2) "en"
      ["profile_background_image_url_https"]=>
      string(71) "https://si0.twimg.com/profile_background_images/422730827/photo__1_.JPG"
      ["profile_use_background_image"]=>
      bool(true)
      ["profile_image_url_https"]=>
      string(68) "https://si0.twimg.com/profile_images/1821098433/photo__1__normal.JPG"
      ["profile_text_color"]=>
      string(6) "333333"
      ["followers_count"]=>
      int(9)
      ["profile_sidebar_border_color"]=>
      string(6) "A8C7F7"
      ["is_translator"]=>
      bool(false)
      ["description"]=>
      string(0) ""
      ["created_at"]=>
      string(30) "Sat Jun 20 06:50:28 +0000 2009"
    }
    ["in_reply_to_user_id"]=>
    NULL
    ["in_reply_to_status_id"]=>
    NULL
    ["coordinates"]=>
    NULL
    ["geo"]=>
    NULL
    ["created_at"]=>
    string(30) "Sat Dec 08 07:15:50 +0000 2012"

    ["retweet_count"]=>
    int(0)
    ["favorited"]=>
    bool(false)
    ["created_at"]=>
    string(30) "Sat Dec 08 06:40:59 +0000 2012"
    ["truncated"]=>
    bool(false)
    ["in_reply_to_screen_name"]=>
    NULL
    ["retweeted"]=>
    bool(false)
    ["text"]=>
    string(29) "Sat, 08 Dec 12 06:40:59 +0000"
    ["place"]=>
    NULL
    ["source"]=>
    string(65) "<a href="http://www.europe-zone.com" rel="nofollow">Madscore1</a>"
    ["in_reply_to_status_id_str"]=>
    NULL
    ["id_str"]=>
    string(18) "277301732894179328"
    ["in_reply_to_user_id"]=>
    NULL
    ["in_reply_to_status_id"]=>
    NULL
    ["id"]=>
    float(2.7730173289418E+17)
  }
  [7]=>
  object(stdClass)#21 (19) {
    ["in_reply_to_status_id_str"]=>
    NULL
    ["user"]=>
    object(stdClass)#22 (37) {
      ["id"]=>
      int(48948037)
      ["followers_count"]=>
      int(9)
      ["following"]=>
      bool(false)
      ["url"]=>
      NULL
      ["profile_sidebar_border_color"]=>
      string(6) "A8C7F7"
      ["profile_image_url_https"]=>
      string(68) "https://si0.twimg.com/profile_images/1821098433/photo__1__normal.JPG"
      ["utc_offset"]=>
      int(-28800)
      ["default_profile"]=>
      bool(false)
      ["profile_background_tile"]=>
      bool(true)
      ["name"]=>
      string(16) "Semirindi Makala"
      ["id_str"]=>
      string(8) "48948037"
      ["profile_sidebar_fill_color"]=>
      string(6) "CCD7DB"
      ["screen_name"]=>
      string(7) "MASE_85"
      ["protected"]=>
      bool(false)
      ["profile_image_url"]=>
      string(66) "http://a0.twimg.com/profile_images/1821098433/photo__1__normal.JPG"
      ["location"]=>
      string(13) "Teh internets"
      ["contributors_enabled"]=>
      bool(false)
      ["listed_count"]=>
      int(1)
      ["time_zone"]=>
      string(26) "Pacific Time (US & Canada)"
      ["profile_background_color"]=>
      string(3) "fff"
      ["geo_enabled"]=>
      bool(false)
      ["notifications"]=>
      bool(false)
      ["follow_request_sent"]=>
      bool(false)
      ["lang"]=>
      string(2) "en"
      ["profile_background_image_url"]=>
      string(69) "http://a0.twimg.com/profile_background_images/422730827/photo__1_.JPG"
      ["friends_count"]=>
      int(15)
      ["statuses_count"]=>
      int(56)
      ["verified"]=>
      bool(false)
      ["profile_link_color"]=>
      string(6) "0084B4"
      ["default_profile_image"]=>
      bool(false)
      ["favourites_count"]=>
      int(0)
      ["profile_background_image_url_https"]=>
      string(71) "https://si0.twimg.com/profile_background_images/422730827/photo__1_.JPG"
      ["profile_use_background_image"]=>
      bool(true)
      ["is_translator"]=>
      bool(false)
      ["description"]=>
      string(0) ""
      ["profile_text_color"]=>
      string(6) "333333"
      ["created_at"]=>
      string(30) "Sat Jun 20 06:50:28 +0000 2009"
    }
    ["contributors"]=>
    NULL
    ["coordinates"]=>
    NULL
    ["geo"]=>
    NULL
    ["retweet_count"]=>
    int(0)
    ["favorited"]=>
    bool(false)
    ["created_at"]=>
    string(30) "Sat Dec 08 06:28:19 +0000 2012"
    ["in_reply_to_user_id_str"]=>
    NULL
    ["truncated"]=>
    bool(false)
    ["in_reply_to_screen_name"]=>
    NULL
    ["retweeted"]=>
    bool(false)
    ["text"]=>
    string(29) "Sat, 08 Dec 12 06:28:18 +0000"
    ["place"]=>
    NULL
    ["source"]=>
    string(65) "<a href="http://www.europe-zone.com" rel="nofollow">Madscore1</a>"
    ["id_str"]=>
    string(18) "277298543398617088"
    ["in_reply_to_user_id"]=>
    NULL
    ["in_reply_to_status_id"]=>
    NULL
    ["id"]=>
    float(2.7729854339862E+17)
  }
  [8]=>
  object(stdClass)#23 (19) {
    ["user"]=>
    object(stdClass)#24 (37) {
      ["id"]=>
      int(48948037)
      ["default_profile_image"]=>
      bool(false)
      ["followers_count"]=>
      int(9)
      ["following"]=>
      bool(false)
      ["url"]=>
      NULL
      ["favourites_count"]=>
      int(0)
      ["profile_background_image_url_https"]=>
      string(71) "https://si0.twimg.com/profile_background_images/422730827/photo__1_.JPG"
      ["profile_sidebar_border_color"]=>
      string(6) "A8C7F7"
      ["utc_offset"]=>
      int(-28800)
      ["profile_background_tile"]=>
      bool(true)
      ["name"]=>
      string(16) "Semirindi Makala"
      ["id_str"]=>
      string(8) "48948037"
      ["is_translator"]=>
      bool(false)
      ["profile_sidebar_fill_color"]=>
      string(6) "CCD7DB"
      ["screen_name"]=>
      string(7) "MASE_85"
      ["protected"]=>
      bool(false)
      ["profile_image_url"]=>
      string(66) "http://a0.twimg.com/profile_images/1821098433/photo__1__normal.JPG"
      ["location"]=>
      string(13) "Teh internets"
      ["contributors_enabled"]=>
      bool(false)
      ["default_profile"]=>
      bool(false)
      ["time_zone"]=>
      string(26) "Pacific Time (US & Canada)"
      ["profile_image_url_https"]=>
      string(68) "https://si0.twimg.com/profile_images/1821098433/photo__1__normal.JPG"
      ["profile_background_color"]=>
      string(3) "fff"
      ["geo_enabled"]=>
      bool(false)
      ["notifications"]=>
      bool(false)
      ["follow_request_sent"]=>
      bool(false)
      ["listed_count"]=>
      int(1)
      ["lang"]=>
      string(2) "en"
      ["profile_background_image_url"]=>
      string(69) "http://a0.twimg.com/profile_background_images/422730827/photo__1_.JPG"
      ["verified"]=>
      bool(false)
      ["profile_link_color"]=>
      string(6) "0084B4"
      ["profile_use_background_image"]=>
      bool(true)
      ["friends_count"]=>
      int(15)
      ["description"]=>
      string(0) ""
      ["statuses_count"]=>
      int(51)
      ["profile_text_color"]=>
      string(6) "333333"
      ["created_at"]=>
      string(30) "Sat Jun 20 06:50:28 +0000 2009"
    }
    ["contributors"]=>
    NULL
    ["coordinates"]=>
    NULL
    ["geo"]=>
    NULL
    ["retweet_count"]=>
    int(0)
    ["favorited"]=>
    bool(false)
    ["created_at"]=>
    string(30) "Sat Dec 08 06:27:07 +0000 2012"
    ["truncated"]=>
    bool(false)
    ["in_reply_to_screen_name"]=>
    NULL
    ["in_reply_to_status_id_str"]=>
    NULL
    ["in_reply_to_user_id_str"]=>
    NULL
    ["retweeted"]=>
    bool(false)
    ["text"]=>
    string(29) "Sat, 08 Dec 12 06:27:07 +0000"
    ["place"]=>
    NULL
    ["source"]=>
    string(65) "<a href="http://www.europe-zone.com" rel="nofollow">Madscore1</a>"
    ["id_str"]=>
    string(18) "277298243392643072"
    ["in_reply_to_user_id"]=>
    NULL
    ["in_reply_to_status_id"]=>
    NULL
    ["id"]=>
    float(2.7729824339264E+17)
  }
  [9]=>
  object(stdClass)#25 (19) {
    ["user"]=>
    object(stdClass)#26 (37) {
      ["id"]=>
      int(48948037)
      ["followers_count"]=>
      int(9)
      ["profile_image_url_https"]=>
      string(68) "https://si0.twimg.com/profile_images/1821098433/photo__1__normal.JPG"
      ["following"]=>
      bool(false)
      ["url"]=>
      NULL
      ["profile_sidebar_border_color"]=>
      string(6) "A8C7F7"
      ["utc_offset"]=>
      int(-28800)
      ["default_profile"]=>
      bool(false)
      ["profile_background_tile"]=>
      bool(true)
      ["name"]=>
      string(16) "Semirindi Makala"
      ["id_str"]=>
      string(8) "48948037"
      ["profile_sidebar_fill_color"]=>
      string(6) "CCD7DB"
      ["screen_name"]=>
      string(7) "MASE_85"
      ["protected"]=>
      bool(false)
      ["profile_image_url"]=>
      string(66) "http://a0.twimg.com/profile_images/1821098433/photo__1__normal.JPG"
      ["location"]=>
      string(13) "Teh internets"
      ["contributors_enabled"]=>
      bool(false)
      ["listed_count"]=>
      int(1)
      ["time_zone"]=>
      string(26) "Pacific Time (US & Canada)"
      ["is_translator"]=>
      bool(false)
      ["profile_background_color"]=>
      string(3) "fff"
      ["geo_enabled"]=>
      bool(false)
      ["notifications"]=>
      bool(false)
      ["follow_request_sent"]=>
      bool(false)
      ["lang"]=>
      string(2) "en"
      ["profile_background_image_url"]=>
      string(69) "http://a0.twimg.com/profile_background_images/422730827/photo__1_.JPG"
      ["friends_count"]=>
      int(15)
      ["statuses_count"]=>
      int(50)
      ["verified"]=>
      bool(false)
      ["profile_link_color"]=>
      string(6) "0084B4"
      ["default_profile_image"]=>
      bool(false) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-08T07:48:37.387

```
// ***********************************-={ 2012-12-08 - WB }=-***********************************
// COLLECT THE FREINDS ARRAY
// *********************************************************************************************
$friends = $connection->get('statuses/friends_timeline'); //method that catches my friends'statuses on Twitter.

// ***********************************-={ 2012-12-08 - WB }=-***********************************
// PRINTS THE ENTIRE ARRAY TO THE SCREEN
// *********************************************************************************************
// var_dump($friends); //STILL WORKS, BUT TRY THE METHOD BELOW

//This Is Just A Cleaner Way Of Dumping The Array
print "<PRE><FONT COLOR=ORANGE>"; print_r($friends); print "</FONT></PRE>";

// ***********************************-={ 2012-12-08 - WB }=-***********************************
// TO WORK WITH INDVIDUAL KEY / VALUE PAIRS FROM ARRAY
// AS YOU MENTIONED YOU WERE ATTEMPTING TO GET YOUR FRIENDS PIC
// *********************************************************************************************
print "<BR>".$friends[5];  
print "<BR>".$friends[6];
print "<BR>".$friends[7];
print "<BR>".$friends[8];// This One Should Be What You Are Looking For
print "<BR>".$friends[9];
print "<BR>".$friends[10];

// ***********************************-={ 2012-12-08 - WB }=-***********************************
// NOT NEEDED UNLESS YOUR LOOKING TO RANDOMIZE LATER ON
// *********************************************************************************************
//shuffle($friends);//THIS WILL PRINT THE ARRAY IN A RANDOM ORDER EACH TIME IT IS CALLED

// ***********************************-={ 2012-12-08 - WB }=-***********************************
// YOUR IF STATEMENT IS GOOD PRACTICE.
// SO IF WE DO NOT HAVE THE POPULATED ARRAY, LETS STOP HERE
// *********************************************************************************************
if( is_array($friends)){
    $counter = 0; //LETS ADD A COUNTER TO USE IN THE PRINT STATEMENT BELOW
    foreach ($friends as &$friend_data) {//WORK WITH EACH KEY. THERE ARE ALOT OF WAYS TO DO THIS LIKE WITH for(), or explode(), OR array_walk ETC...
        print "Key: ".$counter."<BR>".$friend_data;
        $counter++; //Just Adds 1 To The Counter For Each Loop

    }//CLOSE YOUR FOR EACH STATEMENT
}    //CLOSE YOUR IF ARRAY EXISTS STATEMENT

// ***********************************-={ 2012-12-08 - WB }=-***********************************
// FINALY I CLEARLY SEE IN YOUR CODE AS WELL AS YOUR STATEMENT YOU WANT ONE KEY VALUE PAIR.
// SO HERE IS WHAT YOU ASKED FOR IN YOUR POST.
// *********************************************************************************************
$friends = $connection->get('statuses/friends_timeline'); //COLLECT DATA. POPULATE YOUR ARRAY
//var_dump($friends);   //REMOVE COMMENT IF THE KEY/VALUE PAIR IS WRONG AND SELECT THE RIGHT ONE.
$value = $friends[8];   //stick the right key val pair together and load it into the variable $value
print "<img src='". $value."' width='100' height='100'/>"; //PRINT YOUR BUDDIES PIC TO THE PAGE. 
```

看起来像＃8，但我可能算错了。

请允许我解释。上面的代码将在 Var Dump 下的浏览器窗口中输出 6 个键。数组包含键值对，因此要查看您想要的类型 $arrayname[#];

所以 id_str 将是 $friends[5]。

将其打印到您的浏览器将使其清楚，但就像我说的那样。希望这可以帮助。

编辑。我这样打字，这正是我做事的方式。它也属于言论自由法。如果您无法清楚地阅读此内容，则此页面上可以选择发布您自己的答案。如果我花时间和精力输入任何内容。我希望它保持我输入的方式。我会根据需要继续修复它。

无所事事但批评他人做事方式的人需要获得生活。我和这个网站上的大多数其他人一样，是一名程序员，我会抽出时间来帮助其他人解决我多年前或今天遇到的问题。

我也花时间跟进这个对我来说似乎很难的人。我很快发现事实并非如此。他只是每个人的迪克。

所以，如果我这样输入。或者如果像这样输入。甚至像这样。我仍然明白我的意思。

另外，查尔斯，你是我见过的第一个对我的打字方式发表意见的人。除了我的 Shift 键受到打击，不是你。事实上，没有查尔斯在创建此消息时受到伤害。

有想要帮助的程序员。然后是那些在那儿工作了几年的人，他们认为他们什么都知道，并且想把所有他们认为比他们小的人都当作垃圾对待。请大家关注他的帖子，看看你得出什么结论。

# java - Java - 错误，treeSet 中的空字符串

> ID：13775501
> 
> 赞同：0
> 
> 时间：2012-12-08T07:28:31.647
> 
> 标签：java, string, treeset

我一整天都在检查这件事，一行一行，我不知道为什么我得到一个空字符串错误。该程序读取一个文本文件，第一部分的输出是正确的，但是，第二部分给了我空字符串错误。输出应该是这样的 -

商业的

农场

土地

住宅

101 600000.00

105 30000.00

106 200000.00

107 1040000.00

110 250000.00

我的看起来像这样-

商业的

农场

土地

住宅

```
java.lang.NumberFormatException: empty String
    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1011)
    at java.lang.Double.parseDouble(Double.java:540)
    at my.report.agentReport.agentValue(agentReport.java:84)
    at my.report.agentReport.main(agentReport.java:41) 
```

该错误块重复自身 7 次，恰好是文本文件中的行数。这是文本文件的样子 -

110001 商业 500000.00 101

110223 住宅 100000.00 101

110020 商业 1000000.00 107

110333 土地 30000.00 105

110442 农场 200000.00 106

110421 土地 40000.00 107

112352 住宅 250000.00 110

在过去的 2 天里，我尝试了更多的东西，但无济于事。我的选择已经不多了。我真的很感激任何人可以给我的任何帮助。

最后，这是代码...

```
 package my.report;

import java.io.*;
import java.util.*;

public class agentReport {

public static void main(String[] args)
        throws FileNotFoundException {

    // get input from user (file name)
    Scanner console = new Scanner(System.in);
    System.out.print("Name of file to process: ");
    String inputFile = console.next();
    BufferedWriter pwfo = null;
    try {
        pwfo = new BufferedWriter(new FileWriter("C:\\agentReport.txt", true));
    } catch (IOException e) {
        e.printStackTrace();
    }
    PrintWriter pwo = new PrintWriter(pwfo);

    //Construct treeSet (property type)
    Set<String> propertyType = pType(inputFile);

    // Print property types 
    for (String type : propertyType) {
        System.out.println(type);
        pwo.println(type);
    }

    //Construct treeSet (agent IDs and values) 
    Set<String> agentReport = agentValue(inputFile);

    // Print agent IDs and values 
    for (String tail : agentReport) {
        {
            System.out.println(tail);
            pwo.println(tail);
        }
    }
    pwo.flush();
    pwo.close();
}

// read input and alphabetized property types in uppercase
public static Set<String> pType(String inputFile) throws FileNotFoundException //Construct treeSet to return property types
{
    Set<String> type = new TreeSet<>();
    Scanner in = new Scanner(new File(inputFile));

    // use while loop and delimiter to select specific characters for set
    in.useDelimiter("[1234567890\. ]");

    while (in.hasNext()) {
        type.add(in.next().toUpperCase());
    }
    in.close();
    return type;
}

//  read file and print out agent ID's and property values
public static Set<String> agentValue(String inputFile)
        throws FileNotFoundException {

    TreeSet<String> tail = new TreeSet<>();
    SortedMap<String, Number> agentValue = new TreeMap<>();
    Scanner in = new Scanner(new File(inputFile));
    String line;

    while (in.hasNextLine()) {
        try {
            line = in.nextLine();
            String[] fields = line.split("[\\s+]");
            String agentId = (fields[3]);
            Double pValue = Double.parseDouble(fields[2]);

            if (agentValue.containsKey(agentId)) {
                pValue += agentValue.get(agentId).doubleValue();
            }
            agentValue.put(agentId, pValue);

            // Create keyMap with keys and values

        } catch (Exception e) {
            e.printStackTrace();
        }
        Set<String> keySet = agentValue.keySet();
        for (String key : keySet) {
            Number value = agentValue.get(key);
            System.out.println(key + ":" + value);
            tail.add(key + ":" + value);
        }
    }
    return tail;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:38:59.863

在您的`pType`方法中，您为扫描仪使用了某些定界符：-

```
in.useDelimiter("[1234567890\. ]"); 
```

现在，当您阅读此行时：-

```
110001 commercial 500000.00 101 
```

您将在每个数值之间得到一个空字符串。如果您不预先检查，这会给您带来一些问题。

请参阅此示例代码，例如：-

```
String str = "110001 commercial 500000.00 101";
Scanner scanner = new Scanner(str);
scanner.useDelimiter("[0-9\. ]");

while (scanner.hasNext()) {
    System.out.print("*" + scanner.next() + "*-");
} 
```

**输出： -**

```
**-**-**-**-**-**-*commercial*-**-**-**-**-**-**-**-**-**-**-**-**-**- 
```

正如您所看到的`**`，这对 表示在每个数值之间读取的空字符串。

您可以在循环内添加空字符串测试`while`，以避免添加它：-

```
String line = "";
while (in.hasNext()) {
    if (!(line = in.next()).isEmpty()) {
        type.add(line.toUpperCase());
    }
} 
```

# java - 日期和时间之间的时差

> ID：13775503
> 
> 赞同：0
> 
> 时间：2012-12-08T07:28:46.293
> 
> 标签：java, datetime

我正在开发一个 Java Swing 应用程序，它在一周的特定日期和时间发送报告，例如报告时间是星期三 09:00:00。我正在尝试使用报告时间计算当前日期与时间之间的时间差。例如：

DayTime1 =“周三 09:00:00”
DayTime2 =“周二 13:00:00”

如何计算这两个值之间的时间差？我自己尝试过，但我什至无法接近结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:36:06.173

您需要将 String 创建到 Date 对象中，然后计算两个实例之间的持续时间。

```
DateFormat dateformat = new SimpleDateFormat("EEE HH:mm:ss");
Date date1 = dateformat.parse(dayTime1);
Date date2 = dateformat.parse(dayTime2);
getDuration(date1, date2, Calendar.MINUTE);

public static long getDuration(Date returnTime, Date leaveTime, int scale) {
        long durationInMillis = returnTime.getTime() - leaveTime.getTime();
        switch (scale) {
            case Calendar.MINUTE:
                return durationInMillis / ONE_MINUTE_IN_MILLIS;
            case Calendar.MILLISECOND:
                return durationInMillis;
            case Calendar.SECOND:
                return durationInMillis / ONE_SECOND_IN_MILLIS;
            case Calendar.HOUR:
                return durationInMillis / ONE_HOUR_IN_MILLIS;
            case Calendar.DAY_OF_YEAR:
            case Calendar.DATE:
                return durationInMillis / ONE_DAY_IN_MILLIS;
        }
        throw new IllegalArgumentException("invalid scale specified");
    } 
```

# django - 如何在 Django 中进行过滤查询？

> ID：13775505
> 
> 赞同：0
> 
> 时间：2012-12-08T07:29:14.680
> 
> 标签：django, django-queryset, django-cms

我有以下*model.py*。我想在输入期间创建一个过滤器。SubCategory 自动从成员 Category 中提取。而子类别中的输入电流将显示全部内容而无需过滤。我想选择一位家长，然后只从家长的成员中选出。

```
> from django.db import models
> 
> > class Category(models.Model):
> >     name = models.CharField(max_length=100)
> >     
> >     def __unicode__(self):
> >         return self.name
> > 
> > class SubCategory(models.Model):
> >     name = models.CharField(max_length=50)
> >     category = models.ForeignKey(Category)
> >     
> >     def __unicode__(self):
> >         return self.name
> > 
> > class Input(models.Model):
> >     name = models.CharField(max_length=30)
> >     category = models.ForeignKey(Category)
> >     subcategory = models.ForeignKey(SubCategory)
> >     
> >     def __unicode__(self):
> >         return self.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:41:27.070

查看[过滤器文档](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#filter)。

要获取其类别字段由类别填充的一组子类别`my_cat`，您可以 -

```
sub_cats = SubCategory.objects.filter(category=my_cat) 
```

# yii - 使用 eajaxupload 上传图片时上传失败

> ID：13775507
> 
> 赞同：0
> 
> 时间：2012-12-08T07:29:39.787
> 
> 标签：yii

我正在使用 eajaxupload 扩展来上传文件，每次上传时，图像都会失败，例如 Tulips.jpg0.6MBFailed 任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:39:03.110

如果有人要适当地帮助您，您将需要发布一些代码。但无论如何，上传文件时要记住以下几点：

**确保路径正确**

确保要存储文件的目录的路径存在。接下来，确保您正确指向它。一个很好的使用方法是`getcwd()`，例如：

```
$path = getcwd()."/uploads"; 
```

**确保文件名有效**

通常，您最终会使用变量作为文件名。如果您遇到问题，请确保用于文件名的变量的值实际上具有值，例如：

```
$filename = $model->id.".".$model->image_type;
echo $filename; // myimage.jpg 
```

**确保您没有超过最大文件上传大小**

通常，您会遇到正在上传的文件大于最大文件上传大小的问题。您可以在 PHP ini 文件中设置最大文件上传大小：

```
; Maximum allowed size for uploaded files.
upload_max_filesize = 40M

; Must be greater than or equal to upload_max_filesize
post_max_size = 40M 
```

# css - CSS div 不可见

> ID：13775508
> 
> 赞同：0
> 
> 时间：2012-12-08T07:30:00.453
> 
> 标签：css, html, overflow

我正在设计一个我对 div 感到困惑的网站。

```
<div id="header_wrapper">
    <div class="header">
        <div class="logo">
            <img src="css/images/logo-dark.png" alt="Mint Bite" />
        </div>

    </div>    
</div>

<div id="menu_wrapper">
    <div class="menu">
        <ul>
            <li>
                <a href="">HOME</a>
            </li>

            <li>
                <a href="">HOME</a>
            </li>

            <li>
                <a href="">HOME</a>
            </li>

            <li>
                <a href="">HOME</a>
            </li>    
        </ul>    
    </div>
</div> 
```

和 CSS ：

```
body
{
    margin:0;
    padding:0;
}
html
{
    background:#d2d1d0;
    margin:0;
    padding:0;
}
#header_wrapper
{
    background:#232323;

}
.header
{
    width:950px;
    margin:0 auto;
}
.logo
{
    width:300px;
    float:left;
}
#menu_wrapper
{
    overflow:auto;
    background:#333333;
    margin:0;
    padding:0;

}
.menu
{
    width:950px;
    margin:0 auto;
}

.menu ul
{
    width:550px;
    margin-left:200px;
}
.menu li
{
    float:left;
    padding:4px;
}
.menu li a
{
    color:#FFFFFF;
} 
```

但不是在我得到结果`menu`后显示，如下图所示。`header`什么原因？![在此处输入图像描述](../Images/ea8b685ab897a7ff42da57c35f361d16.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:34:13.113

在标题包装器 div 之后添加一行。

```
<style>

.clearFix
{
clear:both;
}
</style> 
```

在标题包装器之后添加此 div

```
<div class="clearFix"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:42:55.727

```
<html>
<head>
    <style>
        #mainContainer
        {
            width:960px;
            margin:0 auto;
        }
        #header_wrapper
        {
            background: #232323;

        }
        .header
        {
            width: 950px;
            height:100px;

        }
        .logo
        {
            width: 300px;
            float: left;
        }
        #menu_wrapper
        {
            width:100%;
            background: #333333;
            margin: 0;
            padding: 0;
            overflow:auto;
        }
        .menu
        {
            width: 950px;
            margin: 0 auto;
        }

        .menu ul
        {
            width: 550px;
            margin-left: 200px;
        }
        .menu li
        {
            float: left;
            padding: 4px;
        }
        .menu li a
        {
            color: #FFFFFF;
        }
    </style>
</head>
<body>
    <div id="mainContainer">
        <div id="header_wrapper">
            <div class="header">
                <div class="logo">
                    <img src="css/images/logo-dark.png" alt="Mint Bite" />
                </div>
            </div>
        </div>
        <div id="menu_wrapper">
            <div class="menu">
                <ul>
                    <li><a href="">HOME</a> </li>
                    <li><a href="">HOME</a> </li>
                    <li><a href="">HOME</a> </li>
                    <li><a href="">HOME</a> </li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html> 
```

# c++ - 软阴影：球形区域光源

> ID：13775510
> 
> 赞同：4
> 
> 时间：2012-12-08T07:30:16.140
> 
> 标签：c++, graphics, geometry, raytracing

我正在尝试在我的光线追踪器中实现软阴影。为此，我计划从交点向区域光源拍摄多条阴影光线。我的目标是使用球形区域光——这意味着我需要在球体上为我的光线的方向矢量生成随机点（回想一下，光线是用原点和方向指定的）。

我一直在寻找在球体上生成均匀分布的随机点的方法，但它们似乎比我正在寻找的要复杂一些。有谁知道在球体上生成这些点的任何方法？我相信我的球面光源将简单地由它的 XYZ 世界坐标、RGB 颜色值和 r 半径来定义。

谢谢，我很感激帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T09:19:16.640

*图形宝石 III*，第 126 页：

```
void random_unit_vector(double v[3]) {    
    double theta = random_double(2.0 * PI);
    double x = random_double(2.0) - 1.0;
    double s = sqrt(1.0 - x * x);
    v[0] = x;
    v[1] = s * cos(theta);
    v[2] = s * sin(theta);
} 
```

（这是 MathWorld 的[Sphere Point Picking](http://mathworld.wolfram.com/SpherePointPicking.html)文章中给出的四种方法中的第二种。）

ETA：如果一个半径为*r*的球体以**O**为中心，并且**u**是一个随机单位向量，那么球体表面上的一个随机点由**O** + *r* **u**给出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:30:09.867

[在Global Illumination Compendium](http://people.cs.kuleuven.be/~philip.dutre/GI/TotalCompendium.pdf)中找到了许多用于随机分布的好的公式。第**4.B部分。**具有在（半）球体上生成点的公式。它是采样、集成等的一个很好的参考。

# c++ - boost lib，用 c++ 设置的无序集让我头疼

> ID：13775514
> 
> 赞同：0
> 
> 时间：2012-12-08T07:30:54.423
> 
> 标签：c++, boost, unordered-set

好的，我知道这可能会很容易，但我有这段代码实现了 boost 库（这是我第一次使用它），我似乎无法让它正常工作。这是代码。哈希.h

```
#include .....
#include "boost/unordered_set.hpp"
#ifndef HASH_H
#define HASH_H

class hash{
public:
    int toHash(string);
    void insertKey(string);
    bool lookupKey(string);
private:
    string hashTable[];
    vector<string> vfile;
    typedef boost::unordered_set<std::string, int> um;
struct hashkey{
    string state;
    int stateno;
};

};

#endif  /* HASH_H */ 
```

还有hash.cpp

```
#include <boost/unordered/unordered_set.hpp>
#include "hash.h"

int hash::toHash(string key){
    unsigned int x;
    std::stringstream ss;
    ss << std::hex << key;
    ss >> x;
    return x;
}

void hash::insertKey(string key){
    um.insert(key,toHash(key));
}

bool hash::lookupKey(string key){
    return um.find(key)==um.end();
} 
```

我收到“hash.cpp:18:7: error: expected unqualified-id before '.' 令牌”。我重申，我知道这可能很容易，我只是以前没有使用过 boost 库。我在互联网上查看了许多示例，但我似乎无法让这个“简单”的作品发挥作用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:35:20.323

你`um`不是一个成员变量，它是一个 typedef。摆脱`typedef`关键字。

现在关于你的第二个问题......

摆脱您的哈希计算成员方法和模板的第二个参数。摆脱 insert() 的第二个参数。boost unordered_set 已经为许多标准类型提供了哈希函数，包括 std::string。但是，如果要散列用户定义的类型，则需要提供散列函数，但不是以您在此处执行的方式。您将创建一个函数的重载，命名`hash_value()`如下：

```
std::size_t hash_value(yourUserDefinedType_probablyAClassName const &t) 
{
    std::size_t retValue;
    //...compute your hash however you want & store in retValue....
    return retValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:35:39.137

您使用 typedef 来声明一个类型。um 是一种类型，而不是变量。从你的代码中删除 typedef，或者声明一个 um 类型的变量。

# haskell - 类型变量的无限列表 - 类型推断

> ID：13775517
> 
> 赞同：-1
> 
> 时间：2012-12-08T07:31:14.203
> 
> 标签：haskell, type-inference

给定一个涉及类型变量的类型，有没有办法定义一个类型变量的无限列表，其中没有重复类型变量？

让我为我的问题提供更多背景信息。我正在用 Haskell 进行我自己的类型推断。我的数据类型如下所示：

```
data Ty = TyUnit
        | TyVar String
        | TyBool
        | TyInt
        | TyBoolList
        | TyIntList
        | Arrow Ty Ty 
```

我给出了上面类型的定义。我相信该函数应该生成一个无限的变量名列表。我只是对如何进行以及问题的实际实施感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:26:53.107

干得好。

```
allTys 0 = TyUnit : TyVar "?" : TyBool : TyInt : TyBoolList :  TyIntList : []
allTys n = [0..n-1] >>= (\i -> liftM2 Arrow (allTys i) (allTys (n-1-i))) 

allTypes = [0..] >>= allTys 
```

`allTys n`构造高度为 n 的类型树。这里的高度`Arrow x y`是 x 的高度 + y 的高度 + 1，其他一切的高度都是 0。构造是非常基本的。我不确定它是否可以更快地完成。如果需要更多解释，请在评论中询问。

此外，如果需要，这是获取字母表的所有字符串（比如`['a'..'z']`）的方法。

```
strings alphabet = (:) [] $ liftM2 (flip (:)) (strings alphabet) alphabet 
```

长字符串是`somechar:shortstring`. 请注意，其中包含空字符串。

# javascript - HTML：使用innerHTML绘制表格

> ID：13775519
> 
> 赞同：10
> 
> 时间：2012-12-08T07:31:39.773
> 
> 标签：javascript, html

```
document.getElementById("outputDiv").innerHTML = "";
document.getElementById("outputDiv").innerHTML += "<table border=1 width=100%><tr>";
for(j=1;j<=10;j++)
{
    document.getElementById("outputDiv").innerHTML += "<td align=center>"+String.fromCharCode(j+64)+"</td>";
}
document.getElementById("outputDiv").innerHTML += "</tr></table>"; 
```

我想使用 Javascript 绘制表格。所以我写了上面的代码。我认为它绘制了一行有 10 列，但它不起作用。有谁知道这个问题？？？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-08T07:40:50.187

几年前我也遇到过这个问题。

问题是当您使用该`innerHTML`属性添加 HTML 时，每次更新后，底层引擎都会为您关闭未关闭的标签（并修复其他不良 HTML）。所以在第二行之后，`<table>`and`<tr>`标签会自动关闭，之后的所有内容都将被写入表格之外。

* * *

**方法1** （简单的方法）

使用字符串存储整个表格的 HTML 并一次更新。

```
var HTML = "<table border=1 width=100%><tr>";
for(j=1;j<=10;j++)
{
    HTML += "<td align=center>"+String.fromCharCode(j+64)+"</td>";
}
HTML += "</tr></table>";
document.getElementById("outputDiv").innerHTML = HTML; 
```

[小提琴](http://jsfiddle.net/sfmeg/)

* * *

**方法2** （更好的方法）

使用 DOM 函数

```
var table = document.createElement('table');
table.setAttribute('border','1');
table.setAttribute('width','100%')
var row = table.insertRow(0);
for(j=1; j<=10; j++){
    var text = document.createTextNode(String.fromCharCode(j+64));
    var cell = row.insertCell(j-1);
    cell.setAttribute('align','center')
    cell.appendChild(text);
}
document.getElementById("outputDiv").appendChild(table); 
```

[小提琴](http://jsfiddle.net/sfmeg/1/)

* * *

**方法 2 增强** （更好的方法）

使用[CSS](http://en.wikipedia.org/wiki/CSS)而不是 HTML 属性。后者通常按最新规格折旧。

开始学习 CSS 的一个很好的资源是[Mozilla 开发者网络](https://developer.mozilla.org/en-US/learn/css)

[小提琴](http://jsfiddle.net/sfmeg/2/)

* * *

**方法3** （漫长的道路，但从长远来看是最好的）

使用[jQuery](http://jquery.com/)。

```
$('<table>').append('<tr>').appendTo('#outputDiv');
for(j=1; j<=10; j++)
    $('<td>').text(String.fromCharCode(j+64)).appendTo('tr'); 
```

[小提琴](http://jsfiddle.net/sfmeg/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T07:34:08.777

我认为主要问题是您的属性没有被引用。

但是在循环中重复更新 dom 元素的内容几乎总是一个坏主意——每次更新 dom 内容都会导致浏览器完成一些内部工作以确保页面布局是最新的。

我会在本地构建 html 字符串，然后在完成后进行最后一次更新。（当然要确保你的属性被引用）

```
document.getElementById("outputDiv").innerHTML = "";

var newTable = "<table border='1' width='100%'><tr>";
for(j = 1; j <= 10; j++) { //opening braces should always be on the same line in JS
    newTable += "<td align='center'>" + String.fromCharCode(j+64) + "</td>";
}
newTable += "</tr></table>";

document.getElementById("outputDiv").innerHTML = newTable; 
```

# ruby-on-rails - 在保存到 ruby 或 rails 中的数据库之前解析本地化的 DateTime

> ID：13775523
> 
> 赞同：2
> 
> 时间：2012-12-08T07:32:21.933
> 
> 标签：ruby-on-rails, ruby, datetime, internationalization

是否可以使用原生 Ruby 或 Rails 方法将本地化的 DateTime 字符串解析回正确的 DateTime？

我在 i18n 中查看了我期望的位置，因为它包含格式和语言环境，但我找不到它。

我有一个字符串：`"za 18 mei 18:05"`它是荷兰语（`:nl`），在英语中它会是`"Sa 18 May 6:15PM"`。日期格式是：`"%a %d %b %H:%M"`。我希望字符串解析回`2012-05-08T18:12:00+01:00`.

有没有可能从中获取 DateTime 的方法？我的荷兰语翻译有一个很大的语言环境文件，我无法想象我不能用它来将格式解析回 db 格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:54:52.667

您需要稍微操作一下日期字符串，因为它们不是英文的。

试试这个：

```
nl = "vri 18 mei 18:05"
dt = DateTime.strptime(nl.gsub(/vri|mei/, 'vri' => 'Fri', 'mei' => 'May'), "%a %d %b %H:%S") 
```

这是一个示例方法，说明如何在将字符串发送到`strptime`. 您可能需要想出一种更优雅的方法来替换原始字符串（例如编写帮助程序）。

**使用`delocalize`宝石**

或者，也许您可​​以尝试 gem `delocalize`：

```
I18n.locale = :nl
Delocalize::LocalizedDateTimeParser.parse("Vri 18 mei 18:02", DateTime) 
```

确保您的`config/locales`文件夹中有正确的“nl.yml”。您可以从这里获取：[https ://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/nl.yml](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/nl.yml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T15:02:14.737

您还可以查看[https://github.com/carlosantoniodasilva/i18n_alchemy](https://github.com/carlosantoniodasilva/i18n_alchemy)它以类似的方式进行离域化，但其范围仅限于模型，因此它不会与视图类混淆。

# mysql - 如何从表中获取最大分数完整记录？

> ID：13775524
> 
> 赞同：2
> 
> 时间：2012-12-08T07:32:28.167
> 
> 标签：mysql, sql, greatest-n-per-group

我的桌子是：

```
╔════╦════════╦════════════╦════════════╦════════╗
║ ID ║ TESTID ║ SESSIONID  ║ TOTALSCORE ║ USERID ║
╠════╬════════╬════════════╬════════════╬════════╣
║  1 ║     10 ║ 55cff3fbfs ║        250 ║    972 ║
║  2 ║     10 ║ 55cff3fbfs ║        440 ║    972 ║
║  3 ║     11 ║ 66fdf3fbfs ║        500 ║    972 ║
║  4 ║     11 ║ 66fdf3fbfs ║        700 ║    972 ║
║  5 ║     12 ║ 77ksfjskfs ║        800 ║    972 ║
║  6 ║     12 ║ 77ksfjskfs ║        700 ║    972 ║
║  7 ║     13 ║ 8fsfskffsf ║        900 ║    972 ║
║  8 ║     13 ║ 8fsfskffsf ║        750 ║    972 ║
╚════╩════════╩════════════╩════════════╩════════╝ 
```

我需要通过提供用户 ID 来获得 maxscore 完整行

结果将是：

```
id  TestId sessionId     TotalScore   UserId
---|-----|------------|------------|---------
2  | 10  | 55cff3fbfs |     440    | 972
4  | 11  | 66fdf3fbfs |     700    | 972
5  | 12  | 77ksfjskfs |     800    | 972
7  | 13  | 8fsfskffsf |     900    | 972 
```

所以请帮助我.......如何在MYSQL中编写查询/存储过程

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T07:34:16.937

拥有一个子查询的想法是它`totalScore`为每个`TestID`. 然后将其结果连接到表本身，前提是它在以下条件下匹配，即子查询中的`TestID`和最大`TotalScore`与原始表上的值匹配。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT TestID, MAX(TotalScore) maxScore
            FROM tableName
            GROUP BY TestID
        ) b ON  a.TestID = b.TestID AND
                a.TotalScore = b.maxScore 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/7d9bb/1)

输出

```
╔════╦════════╦════════════╦════════════╦════════╗
║ ID ║ TESTID ║ SESSIONID  ║ TOTALSCORE ║ USERID ║
╠════╬════════╬════════════╬════════════╬════════╣
║  2 ║     10 ║ 55cff3fbfs ║        440 ║    972 ║
║  4 ║     11 ║ 66fdf3fbfs ║        700 ║    972 ║
║  5 ║     12 ║ 77ksfjskfs ║        800 ║    972 ║
║  7 ║     13 ║ 8fsfskffsf ║        900 ║    972 ║
╚════╩════════╩════════════╩════════════╩════════╝ 
```

# java - 为什么Java内部类要求外部类的变量是最终的？

> ID：13775525
> 
> 赞同：0
> 
> 时间：2012-12-08T07:32:41.577
> 
> 标签：java, final

> **可能重复：**
> [Java - 内部类和局部变量](https://stackoverflow.com/questions/10338708/java-inner-class-and-local-variables)
> [如何将变量标记为最终允许内部类访问它们？](https://stackoverflow.com/questions/13025907/how-does-marking-a-variable-as-final-allow-inner-classes-to-access-them)

Local Inner 类不仅可以访问实例变量，还可以访问方法的局部变量（在其中定义它们），但是必须声明局部变量`final`。

为什么在这种情况下必须声明局部变量`final`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T07:46:37.670

原因是本地内部类的实例可能会从方法返回，并在方法返回后最后返回。在这种情况下，本地方法变量在您访问它们时将不存在。
一旦将它们定义为 final，它们实际上是恒定的，因此即使在之后也可以安全访问。签出[不能引用内部类中的非最终变量以](https://stackoverflow.com/questions/1299837/cannot-refer-to-a-non-final-variable-inside-an-inner-class-defined-in-a-differen)获取更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-08T07:53:09.797

您在谈论*匿名*课程。局部变量（仅）必须被`final`它们的实现引用，因为代码可能在未知的执行帧中执行，也可能在另一个线程中执行，所以编译器唯一希望使用一个值是它在匿名时是否是一个常量类被实例化（声明） - 即如果变量是`final`.

# javascript - Greasemonkey 脚本如何将一个链接拆分为三个相关链接？

> ID：13775527
> 
> 赞同：-2
> 
> 时间：2012-12-08T07:33:02.957
> 
> 标签：javascript, hyperlink, greasemonkey, redmine, cgit

我想使用 Greasemonkey 将显示在 cgit 提交消息中的*Redmine问题编号链接到他们的问题或项目。*

cgit Commit 消息的 HTML 源代码是这样的。

```
<a href='/editingmodule/commit/?id=49e4a33e0f8b306ded5'>refs #459 - create separate directory and repo for editingModule, lots of dif...</a> 
```

我想要做的是使#459 成为*Redmine*问题的单独href，但保持两边的cgit 链接不变。所以上面的 URL 变成了这样的：

```
<a href='/editingmodule/commit/?id=49e4a33e0f8b306ded5'>refs</a>
<a href='http://redmine.project.com/redmine/issues/459'>#459</a>
<a href='/editingmodule/commit/?id=49e4a33e0f8b306ded5'> - create separate directory and repo for editingModule, lots of dif...</a> 
```

可能很难阅读，但上面链接中的 #459 链接到*Redmine*项目。

*为了清楚起见，还可以将Redmine*问题的链接附加到 cgit 链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T08:48:27.793

使用 jQuery 查找链接，使用正则表达式提取关键文本部分。

这是**一个完整的工作脚本**；有关更多信息，请参阅内联评论：

```
// ==UserScript==
// @name     _Split Commit links and add Redmine links
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

//-- Fing matching links
$("a[href*='/editingmodule/commit/']").each ( function () {
    /*-- Parse each link for the expected format:
        refs #{number} {description text}
    */
    var jThis       = $(this);
    var parseText   = jThis.text ().match (/\s*(refs)\s+\#(\d+)\s+(.+)/i);
    if (parseText  &&  parseText.length >= 4) {
        //-- Truncate original link text.
        jThis.text (parseText[1]);

        //-- Add tailing link.
        jThis.after (
            ' <a href="' + jThis.attr ("href") + '">' + parseText[3] + '</a>'
        );

        //-- Add Redmine link. Note it is inserted just after the original link.
        var issueNumber = parseInt (parseText[2], 10);
        jThis.after (
            ' <a href="http://redmine.project.com/redmine/issues/'
            + issueNumber + '">#' + issueNumber + '</a>'
        );

        //-- Style the Redmine link, if desired.
        jThis.next ().css ("background", "yellow")
    }
} ); 
```

# c# - 更改图形设置调用`LoadContent`

> ID：13775534
> 
> 赞同：2
> 
> 时间：2012-12-08T07:34:04.190
> 
> 标签：c#, graphics, xna, xna-4.0

[这](https://stackoverflow.com/questions/3705579/xna-window-resize-invokes-loadcontent)可能是相关的。

我在`Update`方法中有这段代码：

```
 protected override void Update(GameTime gameTime)
    {
        graphics.PreferredBackBufferWidth = 1024;
        graphics.ApplyChanges();

        base.Update(gameTime);
    } 
```

奇怪的是，在这`ApplyChanges`行之后，我的`LoadContent`方法又被调用了。这种情况一遍又一遍地发生。

为什么会发生这种情况，我该如何预防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:05:43.520

通常 XNA 应该在您调用 时进行设备*重置*`ApplyChanges`，这会执行一系列 DirectX 魔法以确保您的所有纹理等保持加载。（它没有调用`LoadContent`。）

但是，由于一些不明原因，重置可能会失败。这可能是由于[您](https://stackoverflow.com/q/13695093/165500)在设备设置期间所做的恶作剧。或者它可能只是一个不稳定的驱动程序或其他东西。或两者。当重置失败时，XNA 会退回到从头开始重新创建设备。

从头开始重新创建设备后，您的所有纹理和其他资源都将完全消失。XNA 现在可以做的最好的事情就是调用你的`LoadContent`方法，并*希望*你的游戏编码足够健壮，可以重新加载所有内容并继续。（让你的游戏变得如此强大只是一个适度的努力——它可能不值得。）

没有明智的方法来防止这种行为的发生。我首先建议您`ApplyChanges` [整理](https://stackoverflow.com/a/13699229/165500)好使用- 这包括不要在每一帧都调用它！- 看看问题是否会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:19:39.073

您提供的链接实际上是相关的，假设为 0。您可以使用您提供的链接上提供[的答案](https://stackoverflow.com/a/3706052/1710831)`graphics.PreferredBackBufferHeight`来防止这种情况发生。此外，您应该确保在应用更改之前有一个大于零的值。`graphics.PreferredBackBufferHeight`

# sqlite - 使用 Qt 桌面应用程序高效创建 SQLite 数据库

> ID：13775540
> 
> 赞同：1
> 
> 时间：2012-12-08T07:34:37.547
> 
> 标签：sqlite, qt, resources

我有一个小型桌面应用程序，将其数据存储在 SQLite 数据库中。

目前，当应用程序首次运行（或用户想要创建新配置）时，我只需删除 db 文件并运行*QSqlQuery.exec("CREATE TABLE...")*语句的负载。

当我意识到我必须更改数据库结构时，这会导致我需要大量的工作来查找我使用过的所有 SQL 并更新它以使其正常工作。所以现在我正在尝试提出一种更模块化的方法来存储 SQL\创建表......

我的第一个想法是将用于创建数据库的 SQL 语句存储在文本文件中，作为 Qt 资源，但现在我已经实际实现了它，感觉“笨拙”（QFile->QTextStream->readLine() 上的循环）并且不允许我在文本文件中格式化我的 SQL 语句以提高可读性。

我可以做到的另一种方法是在编译时生成一个空数据库并将其存储为资源，但对我来说，我认为二进制文件的额外大小将超过创建新数据库的简单性收益。

我可以创建一个全局常量 QString 的负载，但我最不喜欢这个想法，如果可能的话，我更愿意将非 C++\Qt 与源代码分开。

那么，大师们有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:45:50.817

如果`;`在行尾搜索 a，则可以将 SQL 语句格式化为多行。

如果[压缩](http://doc.qt.digia.com/solutions/4/qtiocompressor/qtiocompressor.html)一个空的 DB 文件，它并不大。

# oracle - PL/SQL：语句被忽略

> ID：13775541
> 
> 赞同：0
> 
> 时间：2012-12-08T07:34:51.337
> 
> 标签：oracle, plsql

我正在尝试创建一个根据事务类型更新事务表的过程......但我无法更正错误：`PL/SQL: Statement ignored` 我的代码是：

```
create or replace procedure proc(acn transaction.acctno%TYPE, tt transaction.transtype%TYPE, amt transaction.amount%TYPE, bal transaction.balance%TYPE, dt transaction.dot%TYPE)
IS
ano transaction.acctno%TYPE;
ba transaction.balance%TYPE;
BEGIN
select acctno,balance into ano,bno from transaction where accctno=acn;
if tt='W' and bno>500 
then
update transaction set balance=balance-amt;
elsif tt='D'
then
update transaction set balance=balance+amt;
else
dbms_output.put_line('Insufficient balance');
end if;
END; 
```

完整错误：

```
ERROR at line 7: PL/SQL: Statement ignored

5\. BEGIN
6\. select acctno,balance into ano,bno from transaction where accctno=acn;
7\. if tt='W' and bno>500 
8\. then
9\. update transaction set balance=balance-amt; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:20:57.083

我首先认为错误是因为您的表名是`transaction`保留字：

```
select * from v$reserved_words where lower(keyword) = 'transaction'; 
```

然而，情况并非如此。但似乎`bno`没有声明要选择的变量。但是，您已经声明了另一个变量`ba transaction.balance%TYPE;`。很可能，您应该在声明或语句中更新变量名，以使两者相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:41:54.257

您的更新语句正在更新整个表。您可能想要“选择更新”，然后更新“当前位置”。

# ruby-on-rails - 如何更改rails中提交按钮的html

> ID：13775542
> 
> 赞同：0
> 
> 时间：2012-12-08T07:34:54.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如果我提交表单，那么我会写 <% f.submit %> 它就像 html`<input id="subscriptions" name="commit" type="submit" value="Save">`但我想要这个`<button class="btn submit" type="button">SUBMIT</button>`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:51:33.327

试试这个：

```
<%= f.submit id: nil, name: nil, value: nil, class: "btn submit" %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T08:16:27.897

参考[这个](https://stackoverflow.com/questions/2254720/is-there-a-way-with-rails-form-helper-to-produce-a-button-tag-for-submit)

```
<% content_tag :button :type => :submit, :class => "btn submit" do %>
<% end %> 
```

# jquery - 如何使用 emberJS 创建登录表单？

> ID：13775544
> 
> 赞同：4
> 
> 时间：2012-12-08T07:35:18.733
> 
> 标签：jquery, jquery-ui, ember.js

我想使用 emberjs 视图创建一个登录表单。我可以为此使用哪些控件的任何想法。

emberJS 是否支持表单控件和其他 UI 控件，例如网格、列表蚀刻。我知道它是开发框架，但是它支持的控件很少，例如 textField textArea 复选框。

也就是说，为什么它不支持面板等其他控件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T13:09:59.023

Davis 做对了，但是他的代码需要做一些改进。

1.  `Ember.Button`已弃用。相反，使用`button`标签。
2.  在您看来，定义一个`submit`事件。提交表单时会触发它。无需手动设置按钮上的操作。
3.  你的观点不应该做任何`$.ajax`事情。将其委托给控制器。

因此，重构之后，代码将如下所示：

```
App = Ember.Application.create({});

App.loginController = Ember.Object.create({
    login: function(username, password) {
      // $.ajax stuff goes here
    }
});

App.LoginFormView = Ember.View.extend({
    tagName: 'form',
    username: null,
    password: null,

    submit: function(event) {
        event.preventDefault();

        var username = this.get('username');
        var password = this.get('password');

        this.get('controller').login(username, password)
    },
}); 
```

还有你的模板：

```
<script type="text/x-handlebars" data-template-name="login">
    {{#view App.LoginFormView}}
        <label>
          Username:
          {{view Ember.TextField valueBinding="view.username"}} 
        </label>
        <label>
          Password:
          {{view Ember.TextField type="password" valueBinding="view.password"}}
        </label>
        <button>Login</button>
    {{/view}}
</script> 
```

**编辑：**经过一番思考，可能我放入控制器的所有逻辑实际上都应该进入路由器。控制器应该用于将模型连接到视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T09:10:54.720

我昨天构建了一个登录表单，我假设您想构建一个异步表单。

我从查看这个[gist](https://gist.github.com/1477225)开始，从那时起 API 发生了一些变化，但是现在看起来有点不同：

JavaScript：

```
App = Ember.Application.create({});

App.loginController = Ember.Object.create({
    // do login stuff
});

App.LoginFormView = Ember.View.extend({
    username: null,
    password: null,

    submitLogin: function() {
        var username = this.get('login');
        var password = this.get('password');
        console.log('Login: ' + login + ' Password: ' + password);

        // do the login, probably by $.post()ing to your login page
    },
}); 
```

车把：

```
<script type="text/x-handlebars" data-template-name="login">
    {{#view App.LoginFormView tagName="form"}}
        <label>Username:</label>
        {{view Ember.TextField valueBinding="view.username"}} 
        <label>Password:</label>
        {{view Ember.TextField type="password" valueBinding="view.password"}}
        {{#view Ember.Button target="parentView" action="submitLogin"}}Login{{/view}}
    {{/view}}
</script> 
```

至于你的其他问题，我无法完全回答（我对 Ember.js 比较陌生），但我认为 Ember.js 的核心理念主要是作为一个架构框架（但与Handlebars.js)，而不是像其前身[SproutCore那样的架构](http://sproutcore.com/)*和*UI 框架。

# c - 如何将宏的 2 个参数拆分并重新整理为 2 个单独的宏？

> ID：13775546
> 
> 赞同：0
> 
> 时间：2012-12-08T07:35:20.507
> 
> 标签：c, macros

我想定义一个宏，当这样使用时：

```
ADD_TO_OPS("abc", 3)
ADD_TO_OPS("cdef", 2)
ADD_TO_OPS("xx", 4) 
```

, 将产生如下内容：

```
#define OPS_NAMES      "abc", "cdef", "xx"
#define OPS_VALUES     3, 2, 4 
```

也就是说，我想做`ADD_TO_OPS(NAME, VALUE)`下面的事情（下面的代码是行不通的，只是让你看看我想要做什么）：

```
#ifdef OPS_NAMES
#   define OPS_NAMES2   OPS_NAMES, NAME
#   undef OPS_NAMES
#else
#   define OPS_NAMES2   NAME
#endif
#define OPS_NAMES   OPS_NAMES2
#undef OPS_NAMES2

#ifdef OPS_VALUES
#   define OPS_VALUES2  OPS_VALUES, VALUE
#   undef OPS_VALUES
#else
#   define OPS_VALUES2  VALUE
#endif
#define OPS_VALUES  OPS_VALUES2
#undef OPS_VALUES2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:09:52.120

我建议使用一种叫做 X 宏的东西。该方法有些不同，您仅限于拥有一组固定的已知值：

```
#define OPS X_OP("abc", 3) X_OP("cdef", 2) X_OP("xx, 4) 
```

当你使用它时，你临时定义 X_OP，选择你想要的任何东西。例如，以下内容将扩展为`"abc", "cdef", "xx",`（注意尾随逗号）。

```
#define X_OP(name, value) name,
... OPS ...
#undef X_OP 
```

以下将扩展为`3, 4, 5,`：

```
#define X_OP(name, value) value,
... OPS ...
#undef X_OP 
```

您还可以执行更高级的操作，例如：

```
#define X_OP(name, value) case value: return name;
char const * value_to_name(v)
{
  switch(v)
  {
    OPS
    default: return NULL;
  }
}
#undef X_OP 
```

# matlab - 创建每列的平均值并将其放入工作区

> ID：13775548
> 
> 赞同：0
> 
> 时间：2012-12-08T07:35:36.607
> 
> 标签：matlab, for-loop, matrix

下面是我的matlab代码：

```
 for t=1:5
    data=[1 3 5 7 9;2 4 6 8 10];
    k(t)=mean(data(:,t));
    end 
```

结果，k(1)=1.5,k(2)=3.5, ... ,k(5)=9.5。我想创建一个将所有这些组合在一起的结果，如下所示：

结果=[1.5;3.5;5.5;7.5;9.5]

有什么好主意吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:30:12.883

```
data=[1 3 5 7 9;2 4 6 8 10];
R = mean(data)'; 
```

修正：

如上所述，如果此解决方案不是您所期望的，我不确定您的要求是什么。从您的标题中您提到“放入工作区”？这是否意味着您需要为“R”中的每个值创建一个变量？如果是这样，请尝试：

```
for i = 1:5    
    kk = R(i);
    % eval(sprintf('k%d = kk', i)); % better to avoid eval use assignin instead
    assignin('base',['K' sprintf('%d',i)],kk);
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T08:32:18.983

你可以使用，

```
data = [1 3 5 7 9; 2 4 6 8 10];
k = mean( data );        % k = [1.5, 3.5, 5.5, 7.5, 9.5];
% To get a column vector use:
k = mean( data )';       % k = [1.5; 3.5; 5.5; 7.5; 9.5]; 
```

检查文档以[`mean`](http://www.mathworks.com/help/matlab/ref/mean.html)获取更多详细信息。

# java - 棕褐色 45 给我 0.9999

> ID：13775550
> 
> 赞同：9
> 
> 时间：2012-12-08T07:35:42.400
> 
> 标签：java, math, floating-point, precision, trigonometry

为什么`tan 45`(0.7853981633974483 in 弧度) 给我`0.9999`？以下代码有什么问题？

```
System.out.println(Math.tan(Math.toRadians(45.0)) ); 
```

我不认为这里有任何错字。

那么这里的解决方案是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-08T07:41:13.860

浮点计算经常会导致这样的不准确。问题是数字不能在固定位数内准确表示。

再举一个例子（十进制），我们都同意`3 * (1/3) = 1`. 但是，如果您的计算器只有 4 位小数，`1/3`则表示为`0.3333`. 当它乘以 时`3`，你会得到`0.9999`not `1`。

作为进一步的信息，大多数系统上的浮点*通常*使用 IEEE754 标准表示。您可以搜索它，或参考维基百科页面了解更多详细信息。[IEEE 浮点数](https://en.wikipedia.org/wiki/IEEE_floating_point)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-08T15:42:49.897

最接近`double`的`pi/4`是. **_** `0x1.921fb54442d18p-1`这个 double 的切线，比你需要的多，是`0x1.fffffffffffff72cece67p-1`. 四舍五入到最接近的`double`结果**正是** `0x1.fffffffffffffp-1`因为`0x1.fffffffffffff72cece67p-1`小于`0x1.fffffffffffff8p-1`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T07:41:00.100

用这个

```
double radians = Math.toRadians(45.0);

System.out.format("The tangent of 45.0 degrees is %.4f%n", Math.tan(radians)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T07:41:12.003

那可能是因为`tan(45)`是 1，其余的是舍入误差。由于浮点计算的工作方式，浮点计算不太可能为您提供准确的结果。

# ruby-on-rails - 使用 Nginx 将 Rails 应用程序部署到 VPS

> ID：13775553
> 
> 赞同：0
> 
> 时间：2012-12-08T07:35:58.900
> 
> 标签：ruby-on-rails, nginx, vps

所以我一直在努力让我的 VPS 设置有一段时间没有任何进展，所以我想我会放下我的骄傲并在这里问。

我遵循了以下教程：

[http://coding.smashingmagazine.com/2011/06/28/setup-a-ubuntu-vps-for-hosting-ruby-on-rails-applications-2/](http://coding.smashingmagazine.com/2011/06/28/setup-a-ubuntu-vps-for-hosting-ruby-on-rails-applications-2/)

到了教程的最后，只有 Welcome to nginx！展示

这真的很奇怪，因为到处都告诉我应该指向我新部署的 Rails 应用程序。这与我的 nginx 配置文件有关吗？

PS。我试图找到与我之前类似的问题，但如果这是重复的，我会道歉。

提前致谢

这是我的 nginx.conf 文件：我现在正在看它，我知道它一团糟

```
worker_processes 3;

events {
    worker_connections 1024;
}

http {
    passenger_root /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.18;
    passenger_ruby /bradbury/public;

    include mime.types;
    default_type application/octet-stream;

    sendfile    on;
    keepalive_timeout   65;

    server {
        listen  80;
        server_name localhost;
        root /rails_app/myapplication/public;

        passenger_enabled on;

        error_page  500 502 503 504 /50x.html;
        location = /50x.html {
            root html;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:51:09.000

您还可以查看有关部署到 VPS 的[Railscast 。](http://railscasts.com/episodes/335-deploying-to-a-vps)但是，正如你所说，你已经完成了一些事情。只需发布您的 nginx.conf 。我们必须从某个地方开始......

# c++ - STL 容器上的模板模板参数

> ID：13775557
> 
> 赞同：1
> 
> 时间：2012-12-08T07:37:21.090
> 
> 标签：c++, templates

我想实现一个包装类，它使用不同的键值容器，例如 map、unordered_map。

我希望用户可以这样使用代码：

```
MyWrapper<std::map> w1;
MyWrapper<std::tr1::unordered_map> w2; 
```

我使用**“模板模板参数”**来实现这一点，但是map和unordered_map的模板参数是**不同**的..

```
// but this Wrapper is for std::map only....
template< template<typename,typename,typename,typename> class CONTAINER>
class MyWrapper
{
     CONTAINER<string, string,
            std::less<string>,
            std::allocator<std::pair<const string, string> > > c_;
};

MyWrapper<std::map> w1;
MyWrapper<std::tr1::unordered_map> w1; // not compiled!!! 
```

有什么方法可以制作一个可以将 map 或 unordered_map 作为模板参数传递的类？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T19:54:26.897

您也许可以使用 c++11 和可变参数模板来做您想做的事情：

```
template< template<typename, typename...> class CONTAINER> 
```

# mysql - 如何优化 group by 中的数据函数查询

> ID：13775558
> 
> 赞同：3
> 
> 时间：2012-12-08T07:37:42.807
> 
> 标签：mysql, select, group-by, query-optimization

我有一个查询如下

```
SELECT MONTHNAME( f.receipt_date ) AS MONTH , 
SUM( CASE WHEN fm.fee_name =  'University Fees' THEN f.fee_amount END ) AS A
FROM fee_type_masters fm
INNER JOIN student_fee_collections f ON fm.id = f.fee_type
GROUP BY MONTH( f.receipt_date ) 
```

我的桌子就像

```
CREATE TABLE `fee_type_masters` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `fee_name` varchar(255) DEFAULT NULL,
 `fee_type` varchar(255) DEFAULT NULL,
 `year` varchar(255) DEFAULT NULL,
 `student_type` int(11) DEFAULT NULL,
 `due_date` varchar(255) DEFAULT NULL,
 `amount` float DEFAULT NULL,
 `accounts_master_id` varchar(255) DEFAULT NULL,
 `comments` varchar(255) DEFAULT NULL,
 `status` varchar(255) DEFAULT NULL,
 `sem` varchar(255) DEFAULT NULL,
 `degree_id` int(11) DEFAULT NULL,
 `approve_needed` varchar(255) DEFAULT NULL,
 `concession_allowed` varchar(255) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 `relation_id` int(11) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=latin1

CREATE TABLE `student_fee_collections` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `student_id` int(11) DEFAULT NULL,
 `fee_type` int(11) DEFAULT NULL,
 `fee_amount` int(11) DEFAULT '0',
 `due` int(11) DEFAULT '0',
 `received` int(11) DEFAULT '0',
 `concession` int(11) DEFAULT '0',
 `receipt_no` int(11) DEFAULT NULL,
 `receipt_date` date DEFAULT NULL,
 `received_by` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
 `amount` int(11) DEFAULT '0',
 `late_fee` int(11) DEFAULT '0',
 `pay_mode` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
 `comments` text COLLATE utf8_unicode_ci,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `student_id` (`fee_type`,`student_id`)
) ENGINE=InnoDB AUTO_INCREMENT=325 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

每个都有超过 20000 行

我的解释计划就像

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  fm  ALL PRIMARY NULL    NULL    NULL    7000    Using temporary; Using filesort
1   SIMPLE  f   ref student_id  student_id  5   emsnew.fm.id    28000   Using where 
```

任何人请告诉我如何优化查询或重写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:02:34.530

**在student_fee_collections中的****fee_type**列上创建索引并重新检查**Explain Query**的输出。并在您的问题中更新相同的内容。

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T12:44:22.517

**在student_fee_colle中的****fee_type**列上创建**索引**

 ****并运行以下查询

```
SELECT MONTHNAME( f.receipt_date ) AS MONTH , 
SUM( CASE WHEN fm.fee_name =  'University Fees' THEN f.fee_amount END ) AS A
FROM fee_type_masters fm
INNER JOIN student_fee_collections f USE index(fee_type_IDX) ON fm.id = f.fee_type
GROUP BY MONTH( f.receipt_date ) 
```********

# android - 当 Android 通过 WiFly 与 Arduino 通信时 HTTP 失败

> ID：13775559
> 
> 赞同：0
> 
> 时间：2012-12-08T07:37:57.817
> 
> 标签：android, http-post, arduino, httpresponse, http-get

我正在尝试使用[HTTP](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)将命令传递给我的 Arduino 设备。设备接收到命令，并按预期执行。但正如我在下面提到的那样，我遇到了一个错误`HttpClient.execute()`。如何更正代码？

```
protected String doInBackground(Void... params) {
    try {
        Log.i("CallArduino ","In doInBackground");
        final int TIMEOUT_MILLISEC = 1000;
        HttpParams httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
        HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
        HttpClient client = new DefaultHttpClient(httpParams);
        //    URL="http://www.google.co.in";
        HttpGet get = new HttpGet(URL);

        Log.i("CallArduino ","before get");
                        responseGet = client.execute(get);
        Log.i("CallArduino ","after get");
        resEntityGet = responseGet.getEntity();

        Log.i("CallArduino ","in PostExecute");
        if (resEntityGet != null) {
            InputStream is = resEntityGet.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);

            StringBuilder sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");
            String line="0";
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
        }
    }
    catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    finally{

    } 
```

输出：

```
 12-08 12:58:10.419: I/CallArduino(5652): before get
 12-08 12:58:11.589: W/System.err(5652): java.net.SocketTimeoutException
 12-08 12:58:11.589: W/System.err(5652): at java.net.PlainSocketImpl.read(PlainSocketImpl.java:491)
 12-08 12:58:11.589: W/System.err(5652): at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
 12-08 12:58:11.589: W/System.err(5652): at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
 12-08 12:58:11.599: W/System.err(5652): at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
 12-08 12:58:11.599: W/System.err(5652): at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:191)
 12-08 12:58:11.599: W/System.err(5652): at org.apache.http.impl.io.AbstractMessageParser.parseHeaders(AbstractMessageParser.java:122)
 12-08 12:58:11.599: W/System.err(5652): at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:178)
 12-08 12:58:11.599: W/System.err(5652): at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:180)
 12-08 12:58:11.599: W/System.err(5652): at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
 12-08 12:58:11.599: W/System.err(5652): at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
 12-08 12:58:11.609: W/System.err(5652): at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279)
 12-08 12:58:11.609: W/System.err(5652): at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)
 12-08 12:58:11.609: W/System.err(5652): at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
 12-08 12:58:11.609: W/System.err(5652): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:580)
 12-08 12:58:11.609: W/System.err(5652): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:512)
 12-08 12:58:11.609: W/System.err(5652): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:490)
 12-08 12:58:11.609: W/System.err(5652): at com.example.homeautomation.CallArduino$httpTask.doInBackground(CallArduino.java:87)
 12-08 12:58:11.609: W/System.err(5652): at com.example.homeautomation.CallArduino$httpTask.doInBackground(CallArduino.java:1)
 12-08 12:58:11.609: W/System.err(5652): at android.os.AsyncTask$2.call(AsyncTask.java:264)
 12-08 12:58:11.609: W/System.err(5652): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
 12-08 12:58:11.609: W/System.err(5652): at java.util.concurrent.FutureTask.run(FutureTask.java:137)
 12-08 12:58:11.609: W/System.err(5652): at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
 12-08 12:58:11.609: W/System.err(5652): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 12-08 12:58:11.609: W/System.err(5652): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
 12-08 12:58:11.619: W/System.err(5652): at java.lang.Thread.run(Thread.java:856)
 12-08 12:58:11.619: I/CallArduino(5652): result  :null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:12:05.557

您的 Internet 连接速度可能较弱。您可以使用以下方法增加超时间隔。

`HttpConnectionParams.setSoTimeout(params, 1000);`

# c++ - c ++：无法检测数组中数字的提升

> ID：13775564
> 
> 赞同：1
> 
> 时间：2012-12-08T07:39:01.423
> 
> 标签：c++

我是 C++ 编程的新手，目前正在上一门课程作为编程入门。我目前正在做一个家庭作业项目，我输入 10 个整数并确定这些数字是否按升序排列。

我遇到的问题是程序总是认为有提升，无论提供什么输入。我认为问题出在 IsInOrder() 函数的 for 循环中，但是我无法弄清楚它到底为什么不起作用或如何修复它。

另一个潜在问题是如何确定所有值的提升，例如，如果我的代码有效，我认为它会将 [1, 2, 3, 4, 5, 1, 2, 3, 4, 5] 视为提升，即使它不是。

我试过在网上搜索，发现了一些类似的作业问题，但没有答案。

这是我到目前为止的代码：

```
#include <iostream>

using namespace std;

bool IsInOrder (int numHold[]);

//This portion takes the numeral inputs and outputs the answer
int main()

{
int numHold[10];

bool status;

cout << "Welcome to the Ascension detector 5000" << endl;
cout << "This program will detect whether the numbers you input are in ascending   
order" << endl;
cout << "Isn't that neat?" << endl <<endl;

for (int i=0; i < 10;i++)
{
    cout << "Please enter a number: ";
    cin >> numHold[i];
}
cout << endl;

for(int i=0;i < 10;i++)
{
    cout << numHold[i] << endl;
}

status = IsInOrder(numHold);

if (status == true)
{
    cout << "The numbers are in ascending order" << endl;
}
else
{
     cout << "The numbers are not in ascending order" << endl;
}

system("PAUSE");
return 0;
}

//This function determines whether the inputs are in ascending order

 bool IsInOrder (int numHold[])
{
for (int i = 0; i < 10; i++)
{
        if (numHold[i] < numHold [i++])
        {
            return false;
        }
        else
        {
            return true;
        }
}
} 
```

提前感谢任何帮助，如果代码格式不正确，代码没有很好地复制/粘贴到代码示例中，我们深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:04:06.880

在`IsInOrder`函数中，运行 for 循环直到`i<9`并删除 else 部分并放在循环`return true`之外`for`。

为什么`return true`在for循环之外？

因为`true`仅在您检查了所有元素时才返回，而不是每次都返回。看看你的代码，你会得到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:02:46.330

首先，`true`and`false`分支是错误的。

其次（假设`true`/`false`已修复），一旦您看到两个有序的数字，您就会得出结论，整个序列是按升序排列的。`return true`这是不正确的：在检查完*每一对*之前，你不能这样做。

最后，循环的终止条件为 1。

```
bool IsInOrder(int numHold[]) {
    for (int i = 0; i < 9; i++) {
        if (numHold[i] >= numHold[i+1]) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T07:42:58.100

您的`IsInOrder`例程不会检查数组中的所有值，它会在遇到两个不同的数字后立即返回。

此外，如果它会遍历整个数组（即，当所有数字都相同时），它会在结束时检查 11 个元素而不是 10 个元素，并且它不会返回任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T07:46:06.527

```
bool IsInOrder(int numHold[])
{
    bool inOrder = true;
    for (int i = 0; i < 9; i++)
    {
        if (numHold[i] > numHold[i+1])
        {
            inOrder = false;
            break;
        }
    }
    return inOrder;
} 
```

# c - 如何在不使用 ncurses 的情况下在 linux 终端上设置终端背景颜色？

> ID：13775570
> 
> 赞同：5
> 
> 时间：2012-12-08T07:39:22.157
> 
> 标签：c, linux, colors, console

我用 C 语言编写了一个简单的控制台程序，它使用 ANSI 转义码为其文本着色。

有没有办法将整个终端的背景临时设置为黑色，默认字体颜色为浅灰色？程序结束后可以恢复吗？

我宁愿避免使用 ncurses。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T10:24:37.430

可能最简单的方法是使用 ANSI 设置文本的背景颜色：

例如使用：

```
echo -e "\e[37m\e[41m" 
```

会给你一个红色背景上的蓝色文本（你可以用它来测试戏剧性的效果，容易看到的颜色）。

然而

```
echo -e "\e[97m\e[40m" 
```

将在您的程序期间将前景设置为白色，将背景设置为黑色。

如果您发现背景颜色和终端之间出现了一种难看的过渡区域，只需打印足够数量的换行符即可擦除整个屏幕。

要在 C 中使用它，您显然需要`printf`代替`echo`.

[关于ANSI 转义码](https://en.wikipedia.org/wiki/ANSI_escape_code)的 wiki 页面有更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T11:15:45.590

如何执行此操作取决于用户使用的终端。它可能是 ANSI，可能是 VT100，可能是行式打印机。 *ncurses*为您抽象出这种恐惧。它使用一个关于如何与不同类型的终端对话的信息数据库（查看 $TERM 的内容以了解您**当前**使用的是哪一个）通常存储在`/lib/terminfo`or中`/usr/share/terminfo`。

查看这些文件后，您可能需要重新考虑不使用*ncurses*，除非您有避免使用它的特定要求（嵌入式系统没有足够的存储空间等）

# objective-c - 在 NSTextField 中定位文本

> ID：13775581
> 
> 赞同：5
> 
> 时间：2012-12-08T07:42:01.590
> 
> 标签：objective-c, macos, cocoa, nstextfield

可可菜鸟在这里。我正在使用`NSTextField`, 并且正在使用`CALayer`它来设置边框的样式。

它看起来像这样：

![截屏](../Images/21921fcd853edb1eef0d8871e4018705.png)

我的问题是：如何定位输入文本实际开始的位置？我希望能够将它从左侧和顶部推过去一点。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:03:22.777

你不能通过创建一个`NSView`容器来解决这个问题吗？所以它看起来有点像这样：`NSView`带`CALayer`边框和`NSTextField`内部。

你明白吗？

# jquery - Jquery 不适用于 html

> ID：13775582
> 
> 赞同：0
> 
> 时间：2012-12-08T07:42:34.010
> 
> 标签：jquery, insert, appendto

首先，我有这个代码

```
<ul id="unselected_list">
   <li class="clearfix" id="p1">
        <img src="img/pic1.jpg" alt="pic1">
        <p>name1</p>
    </li>
     <li class="clearfix" id="p2">
        <img src="img/pic2.jpg" alt="pic2">
        <p>name2</p>
    </li>
</ul>

<ul id="selected_list"></ul> 
```

我使用 jquery appendTo() 方法将`<li>`标签插入到`<ul id="selected_list"></ul>`这段代码中。有效。

```
$('#unselected_list li').click(function(){
    $(this).appendTo('#selected_list');
});
   <ul id="unselected_list">
         <li class="clearfix" id="p2">
            <img src="img/pic2.jpg" alt="pic2">
            <p>name2</p>
        </li>
    </ul>

   <ul id="selected_list">
       <li class="clearfix" id="p1">
            <img src="img/pic1.jpg" alt="pic1">
            <p>name1</p>
        </li>
    </ul> 
```

但是当我想点击`<li id="p1">`它返回`<ul id="unselected_list">`时，我使用了这个代码。它没有工作。

```
$('#selected_list li').click(function(){
        $(this).appendTo('#unselected_list');
    }); 
```

演示图片[http://tapchidesign.hostoi.com/help.jpg](http://tapchidesign.hostoi.com/help.jpg)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:44:45.613

当您附加的处理程序`#selected_list`没有后代`li`元素时，您应该从元素或文档对象的静态父对象之一委托事件。

```
$('#selected_list').on('click', 'li', function(){
    $(this).appendTo('#unselected_list');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:45:15.897

`$('#selected_list li')`在您调用它时返回与该选择器匹配的所有元素。click 事件不会绑定到调用选择器后创建的元素。

绑定 click 事件，以便将动态生成的元素考虑在内：

```
$('#selected_list').on('click', 'li', function() {
    $(this).appendTo('#unselected_list');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T07:46:55.230

我想这会对你有所帮助-

```
$('#selected_list li[id^="p"]').click(function(){
    $(this).appendTo('#unselected_list');
}); 
```

# css - 如何使用css显示与网页相同的打印预览？

> ID：13775583
> 
> 赞同：0
> 
> 时间：2012-12-08T07:42:41.407
> 
> 标签：css, printing

我创建了一个网页，该网页在带有页眉和页脚的表格中包含五行。如果字符超出表格，表格会拉长，但适合单个页面。我对每行有 250 个字符的限制。当行包含一些100 个字符，表格中的五行拉长并适合一页。但是当我看到打印预览时，表格拆分，第三行的一半显示在第一页和第二半，平衡两行显示在下一页。我主页使用单独的外部css，打印预览使用另一个外部css。如何解决？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:44:14.137

简短的回答是你**不能**触发`Print Preview`，因为它是本地操作系统窗口，你可以做的是在你的用户打印之前你可以创建一个单独的 HTML 文档并使用打印特定的样式表（你已经在使用）像这样的文件

```
<link rel="stylesheet" href="#" type="text/css" media="print" /> 
```

如果你想自己控制分页符，请使用这个

```
@media print {
    whatever {
       page-break-after:always
    }
} 
```

# hibernate - 使用休眠验证时，休眠会话被刷新

> ID：13775592
> 
> 赞同：1
> 
> 时间：2012-12-08T07:44:08.990
> 
> 标签：hibernate, bean-validation, spring-transactions

我在休眠中使用 JSR-303 验证。我创建了一个自定义验证器注释，它通过查询数据库来检查数据完整性。

**例如：**

```
public boolean isValid(Object value, ConstraintValidatorContext context) {
    if(value == null){
        return true;
    }
    //This method uses entityManager to fetch a list from database
    Map<String, String> pickList = pickListProvider.getPickList(picklistName);
    return pickList.contains(value);
} 
```

**用法：**

```
public class UserProfile extends Persistent {
    //Member fields come here

    @PicklistConstraint(name="languages")
    private String prefLanguage;
} 
```

这里的 UserProfile 是一个使用 Hibernate 持久化的实体。Hibernate 在预插入或预更新时调用此验证。但是，当验证器尝试从数据库中获取记录时，hibernate 正在刷新会话。由于运行验证的域对象没有完全烘焙（没有 Id 字段），我得到以下异常

```
org.hibernate.AssertionFailure: null id in <domain object here> entry (don't flush the Session after an exception occurs)
    at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:79)
    at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:194)
    at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:156)
    at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:225)
    at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:99)
    at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:58)
    at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1186)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1241)
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:257) 
```

经过调查，我发现 DefaultAutoFlushEventListener 的 flushMightBeNeeded 返回 true：

```
private boolean flushMightBeNeeded(final EventSource source) {
    return !source.getFlushMode().lessThan(FlushMode.AUTO) &&
            source.getDontFlushFromFind() == 0 &&
            ( source.getPersistenceContext().getEntityEntries().size() > 0 ||
                    source.getPersistenceContext().getCollectionEntries().size() > 0 );
} 
```

问题是 FlushMode 是 AUTO 并且 source.getPersistenceContext().getEntityEntries().size() 有一些条目。在这种情况下我应该采取什么方法？我应该将 FlushMode 从 AUTO 更改为 MANUAL 吗？是否可以获得与实际实体不同的新会话或持久上下文？我正在使用spring mvc和hibernate。

**编辑**

我发现 source.getPersistenceContext().getEntityEntries() 具有当前正在验证的实体。在插入之前应该出现在这里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:18:52.187

JPA 规范说：

> 通常，可移植应用程序的生命周期方法不应调用 EntityManager 或 Query 操作、访问其他实体实例或修改同一持久性上下文中的关系。

它还说：

> 使用这些约束的自动验证是通过在第 3.5.2 节中描述的 pre-persist、pre-update 和 pre-remove 实体生命周期事件时指定 Java Persistence 将验证委托给 Bean Validation 实现来实现的

因此，规范明确表示您不应该在生命周期事件中使用实体管理器，并且使用生命周期事件执行自动验证。因此，您不能在验证器中使用实体管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:39:39.020

如上一个答案中所指出的，在生命周期事件期间不应执行任何 EntityManager 操作。如果你真的想这样做，你应该打开一个 tmp 会话。另请参阅[https://community.jboss.org/wiki/AccessingTheHibernateSessionWithinAConstraintValidator](https://community.jboss.org/wiki/AccessingTheHibernateSessionWithinAConstraintValidator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T14:06:56.930

我在验证器中添加了以下代码，似乎工作正常：

```
public boolean isValid(Object value, ConstraintValidatorContext context) {
    if(value == null){
        return true;
    }
    //This method uses entityManager to fetch a list from database
    TransactionTemplate txTemplate = new TransactionTemplate(txManager);                
        txTemplate.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);
        Map<String, String> pickList = (Map<String, String>) txTemplate.execute(new TransactionCallback<Object>() {
            public Object doInTransaction(TransactionStatus status) {
                 return pickListProvider.getPickList(picklistName);
            }
    });
    return pickList.contains(value);
} 
```

我知道这似乎违反了 JPA 规范，但我确信这个验证器获取的数据是主数据的一部分，不会导致像幻读这样的隔离问题。

# sql-server-2008 - 优化的选择查询从数百万条记录中获取 10 x 10 条记录

> ID：13775596
> 
> 赞同：0
> 
> 时间：2012-12-08T07:44:31.330
> 
> 标签：sql-server-2008, select, gridview

**SQL Server 2008**

在我的表中，我有数百万条记录。现在，当我尝试在 Gridview 中绑定所有记录时，获取所有记录需要更多时间。

如果我想一次只选择 10-10 条记录意味着首先在 Gridview 中我在第一页并显示前 10 条记录，然后当我转到下一页时它同样显示第二条 10 条记录....

那么它怎么可能呢？并且我可以在该存储过程中获得该记录的总数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:50:00.800

在 ASP.NET 中，当为源访问 SQL 数据库时，分页和排序非常简单。

1.  只需在带有 gridview 的页面上拖放一个适当的 DataSource 控件（如 EntityDataSource，如果您使用的是 Entity Framework，或者 LinqDataSource 是您使用的是 LinqToSQL），然后对其进行配置（单击设计器中的小扩展器图标，然后单击“配置数据源” ' 关联。

2.  将该 DataSource 控件的 ID 设置为 GridView 的 DataSourceID 属性值。

3.  在 GridView 上设置 AllowPaging="true" 和 PageSize="10" （可以是任何你想要的每页行数）。

你完成了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:31:33.597

您可以创建动态分页来加载大数据，可以参考下面的链接寻求帮助。

[自定义分页](http://www.codeproject.com/Articles/410733/Custom-paging-with-ASP-NET-GridView)

或者

[自定义分页 2](http://dotnetslackers.com/articles/gridview/Optimized-Paging-and-Sorting-in-ASP-NET-GridView.aspx)

# .htaccess - 在 htaccess 中感到困惑

> ID：13775598
> 
> 赞同：0
> 
> 时间：2012-12-08T07:44:51.143
> 
> 标签：.htaccess, mod-rewrite

我有一个上传照片的目录，按日期排序，如下所示：

```
http://example.com/uploads/2012-12-08/abcd.png 
```

我`index.php`在我的`/uploads/`文件夹中创建了一个`.htaccess`

我可以使用`index.php`来控制图像`width`和`height`.

原始网址如下所示：`http://example.com/uploads/?url=2012-12-08/abcd.png&width=128`。

这是`.htaccess`代码：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*) /uploads/index.php?url=$1 [QSA]
</IfModule> 
```

如果我输入 URL:`http://example.com/uploads/2012-12-08/abcd.png&width=128`将出现调整大小的图像

但问题是浏览器将图像扩展名显示为`png&width=128`

图像 URL 也无法在某些论坛中显示，因为`&`符号。

我怎样才能改变`.png&width=128`成`.png?width=128`？

我尝试了很多规则，但没有一个有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:01:32.337

您可以尝试：

```
RewriteCond %{QUERY_STRING} (.+)
RewriteRule ^(.*)$ /uploads/index.php?url=$1&%1 [QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:28:21.793

尝试使用 URL 友好：

```
http://mysite.com/uploads/2012-12-08/abcd.png/128 
```

信息：http: [//zenverse.net/seo-friendly-urls-with-htaccess/](http://zenverse.net/seo-friendly-urls-with-htaccess/)

我希望它有所帮助。

问候。

# iphone - 如何使以编程方式创建的 leftBarButtonItem 可见并设置 backgroundimage

> ID：13775601
> 
> 赞同：0
> 
> 时间：2012-12-08T07:45:24.477
> 
> 标签：iphone, objective-c, uinavigationcontroller, uinavigationitem

下面的代码在我的应用程序中运行良好。但是那个 leftbarbuttonitem 是不可见的。而且我无法将背景图像设置为`leftBarButtonItem`. 我做错了什么，但我不知道是什么错误？是否可以使可见并设置背景图像？

```
UIImageView *NavigationBarImage =[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 44)];
NavigationBarImage.image=[UIImage imageNamed:@"mapbutton.png"];
[self.navigationController.navigationBar addSubview:NavigationBarImage];
self.navigationItem.hidesBackButton = YES;

UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonItemStyleBordered target:self action:@selector(goBack)];
self.navigationItem.leftBarButtonItem = backButton;

-(void)goBack
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T08:27:27.237

如果要向导航项添加 backgroundImage，则必须添加自定义按钮，如下所示：

```
UIButton *tempButton                            =       [UIButton buttonWithType:UIButtonTypeCustom];
tempButton.frame                                =       CGRectMake(0, 0, 50, 30);
tempButton.showsTouchWhenHighlighted            =       YES;
tempButton.backgroundColor                      =       [UIColor clearColor];
[tempButton setBackgroundImage:[UIImage imageNamed:@"back.png"] forState:UIControlStateNormal];
[tempButton setTitle:@"Back" forState:UIControlStateNormal];
[tempButton addTarget:self action:@selector(goBack) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *backBtn                        =         [[UIBarButtonItem alloc]initWithCustomView:tempButton];

self.navigationItem.leftBarButtonItem           =       backBtn; 
```

并将背景图像添加到导航栏，您可以使用以下代码

```
 [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"header.png"] forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:24:09.240

```
UIButton *home = [UIButton buttonWithType:UIButtonTypeCustom];  
UIImage *homeImage = [UIImage imageNamed:@"YOUR_IMAGE.png"];  
[home setBackgroundImage:homeImage forState:UIControlStateNormal];  
[home addTarget:self action:@selector(your_Action)  
forControlEvents:UIControlEventTouchUpInside];  
home.frame = CGRectMake(0, 0, 69, 26);  
UIBarButtonItem *button2 = [[UIBarButtonItem alloc] initWithCustomView:home];
[[self navigationItem] setLeftBarButtonItem:button2];
[button2 release];
button2 = nil; 
```

# matlab - Matlab内部收益率

> ID：13775609
> 
> 赞同：2
> 
> 时间：2012-12-08T07:47:16.933
> 
> 标签：matlab, financial, symbolic-math

你必须对我很轻松，我是 matlab 和 SO 的新手。我在使用 matlab 求解器计算内部收益率 (IRR) 时遇到问题。我看到 matlab 中的金融工具箱有一个功能，但是我不相信我已经安装它并且不想在他们的网站上获得试用版。

鉴于我的特定 IRR 计算的简单性质，我认为在 matlab 中简单地编写代码就足够容易了。这是相同的年度现金流，所以我在matlab中输入如下：

```
syms x k;
IRR = solve(investment == yrSavings* symsum((1+x)^-k,1, nYears)); 
```

它没有失败，实际上给出了一个数字。唯一的问题是结果不正确！我手动输入内部收益率，它永远不会等于投资。使用 wolframalpha 我找到了实际的解决方案，返回并手动输入了 wolframalpha 的答案，并且 symsum 函数返回了正确的结果。我不确定求解器是怎么回事！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:48:56.743

您编写公式的方式，符号假设是您使用 x 作为迭代器变量。我相信你想使用k。尝试这个：

```
syms x k;
IRR = solve(investment == yrSavings* symsum((1+x)^-k,k,1, nYears)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-24T16:57:40.887

另一种方法是使用 MATLAB 函数`roots`计算折扣因子，然后将其转换为 IRR。前几天碰巧写了这样一个函数，所以我想我不妨把它贴在这里以供参考。它被大量注释，但实际代码只有三行。

```
% Compute the IRR of a stream of cashflows represented as a vector. For example:
%   > irr([-123400, 36200, 54800, 48100])
%   ans = 0.059616
%
% If the provided stream of cashflows starts with a negative cashflow and all
% other cashflows are positive then `irr` will return a single scalar result.
%
% If multiple IRRs exist, all possible IRRs are returned as a column vector. For
% example:
%   > irr([-1.0, 1.0, 1.1, 1.3, 1.0, -3.7])
%   ans =
%      0.050699
%      0.824254
%
% If no IRRs exist, or if infinitely many IRRs exist, an empty array is
% returned. For example:
%   > irr([1.0, 2.0, 3.0])
%   ans = [](0x1)
%
%   > irr([0.0])
%   ans = [](0x1)
%
% Unlike Excel's IRR function no initial guess can be provided because all
% possible IRRs are returned anyway
%
% This function is not vectorized and will fail if called with a matrix argument

function irrs = irr(cashflows)
  %% Overview
  % The IRR is defined as the rate, r, such that:
  %
  %   c0 + c1 / (1 + r) + c2 / (1 + r) ^ 2 + ... + cn / (1 + r) ^ n = 0
  %
  % where c0, c1, c2, ..., cn are the cashflows
  %
  % We define discount factors, d = 1 / (1 + r), so that the above becomes a
  % polynomial in terms of the discount factors:
  %
  %   c0 + c1 * d + c2 * d^2 + ... + cn * d^n = 0
  %
  % Such a polynomial will have n complex roots but between 0 and n real roots.
  % In the important special case that c0 < 0 and c1, c2, ..., cn > 0 there
  % will be exactly one real root.

  %% Check that input is a vector, not a matrix
  assert(isvector(cashflows), 'Input to irr must be a vector of cashflows');

  %% Calculation of IRRs
  % We use the built-in functions `roots` to compute all roots of the
  % polynomial, which are the discount factors `d`. The user will provide a
  % vector as [c0, c1, c2, ..., cn] but roots expects something of the form
  % [cn, ..., c2, c2, c0] so we reverse the order of cashflows using (end:-1:1).
  % At this stage `d` has n elements, most of which are likely complex.
  d = roots(cashflows(end:-1:1));

  % The function `roots` provides all roots, including complex ones. We are only
  % interested in the real roots, so we filter out the complex roots here. There
  % many also be spurious real roots less or equal to 0, which we also filter
  % out. Now `rd` could have between 0 and n elements but is likely to have a
  % single element
  rd = d(imag(d) == 0.0 & real(d) > 0);

  % We have solved everything in terms of discount factors, so we convert to
  % rates by inverting the defining formula. Since the discount factors are
  % real and positive, the IRRs are real and greater than -100%.
  irrs = 1.0 ./ rd - 1.0;

end 
```

# android - (MDM) - Android 远程设备管理

> ID：13775611
> 
> 赞同：-1
> 
> 时间：2012-12-08T07:47:35.070
> 
> 标签：android

我的任务是实现远程设备管理，用例是管理员可以控制基于企业的移动设备，当设备被盗时，管理员可以远程删除所有设备数据（擦除/锁定设备）。我浏览了那个 Android 设备管理 API，但我需要有人详细说明这方面的实施过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:23:58.407

在 Android 中，您必须使用 Device Admin API 来锁定设备、远程擦除、设置密码、禁用摄像头等。 [http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

# javascript - 使用 extjs 异步加载 Javascript

> ID：13775613
> 
> 赞同：1
> 
> 时间：2012-12-08T07:48:14.593
> 
> 标签：javascript, asynchronous, extjs, dom-events

我正在为小部件使用 ExtJS 框架。我编写了一个 embedd.js 脚本，它异步加载 ext-all.js（与其他 javascript 结合）。最后，它附加了一个要为 Ext.onReady 调用的函数

但是，使用这种机制根本不会调用它。但是，如果我在页面元素中加载 all.js 和 css，保持所有内容相同，它就可以工作。

我该如何解决这个问题？

代码可见：

```
http://38.109.218.86/cw/works.php

http://38.109.218.86/cw/does_not_work.php 
```

（并不是说我想在这里异步加载 extjs 代码本身，所以它会在页面的其余部分之后加载）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:53:31.560

您在不工作的示例中抛出 JS 错误

```
Line 78: Ext.onReady() 
```

如果您正在异步加载 ExtJS，那么您只能在库加载`Ext.onReady()` *后执行类似操作。*

# linq - 在linq查询中将字符串转换为int

> ID：13775614
> 
> 赞同：0
> 
> 时间：2012-12-08T07:48:23.940
> 
> 标签：linq, linq-to-entities

这是查询

```
db.setupBrands.Where(x => 
    Convert.ToInt32(x.SortKey) <= id && 
    Convert.ToInt32(x.SortKey) >= desID)
.Select(x => x); 
```

这里 SortKey 是我想转换为 int 的字符串类型。在 Convert.ToInt32() 我收到以下错误。

> LINQ to Entities 无法识别方法“Int32 ToInt32(System.String)”方法，并且该方法无法转换为存储表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:52:53.837

EF 无法翻译转换和解析。我完全同意上述观点，但是，如果您的 SortKey 是，`nchar(4)`您可以试试这个：

```
string s_id = string.Format("{0:0000}", id);
string s_desID = string.Format("{0:0000}", desID );

db.setupBrands.Where(x => 
    x.SortKey <= s_id && 
    x.SortKey >= s_desID)
.Select(x => x); 
```

# mysql - 用于比较行然后执行进一步操作的存储过程

> ID：13775620
> 
> 赞同：1
> 
> 时间：2012-12-08T07:48:50.897
> 
> 标签：mysql, stored-procedures

我的应用程序允许用户随意添加或删除记录。要删除记录，用户只需清空该字段。由于这个约束，我必须删除特定表中用户的所有记录，然后插入（即使记录没有更改/仅添加）。

我想改变这种安排并设置一个存储过程，它将用户的数据与 db 中的数据进行比较，然后执行 insert/delete 或 update 。

这可以做到吗？我不太精通存储过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:22:35.117

简单地说……是的。
[存储过程](http://dev.mysql.com/doc/refman/5.6/en/create-procedure.html)允许您执行多个语句，这可以简单地解决您可能需要解决的任何问题。
您可以在此处查看教程[。](http://net.tutsplus.com/tutorials/an-introduction-to-stored-procedures/)

希望这可以帮助。

# grails - 请求结束时对象被销毁

> ID：13775621
> 
> 赞同：0
> 
> 时间：2012-12-08T07:48:55.970
> 
> 标签：grails, grails-orm

嗨，如果我在控制器中有以下代码，那么在提供网页后，人员对象会被销毁吗？

```
Person p = new Person();

for (int u =0 ...)
{
   p = new Person(); 
   p.save();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:05:01.403

是的，服务请求后对象实例全部销毁。在您的示例中，请求中仅存在数据库中的数据。

[在官方文档中](http://grails.org/doc/latest/guide/theWebLayer.html#controllers)阅读有关 Grails 控制器的更多信息。有关可以跨请求存储变量的不同范围，请参阅[*控制器和范围部分。*](http://grails.org/doc/latest/guide/theWebLayer.html#controllersAndScopes)

# css - 如何将div的高度自动调整为与浏览器窗口相同

> ID：13775622
> 
> 赞同：0
> 
> 时间：2012-12-08T07:48:56.273
> 
> 标签：css, html, height

如何根据浏览器的高度自动调整 div 标签的高度？
当我这样做时`height: 100%`，它只会根据里面有多少文本来调整大小。

这是网页，它是第一个 div，蓝色背景的那个是我试图让高度自动调整大小的那个：
[http ://rachelchaikof.com/awareness/](http://rachelchaikof.com/awareness/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:51:39.843

实际上，您必须`height: 100%;`为父元素设置一个，还要确保使用它来使您的 div 高度为 100%

```
html, body {
   height: 100%;
   width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:52:02.367

`height:100%`表示与父级相同的高度，即您`div`所在的元素。因此，如果要使其与浏览器的高度相同，则需要使其所有祖先都`100%`高，一直到`html`！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T07:53:11.013

```
100% height - resize window problem 
```

"height:100%" 表示浏览器窗口的 100%。如果页面超出浏览器窗口（即需要滚动才能访问），页面的这些位在设置为 height:100% 的元素之外。如果您有背景或其他效果（例如边框），则不会超出前 100%。

```
The correct way to handle things is
selector {min-height: 100%;} /* for proper browsers */
* html selector {height: 100%;} /* for IE */ 
```

如果您以这种方式使用 min-height，则必须确保所有前面的元素都具有 100% 的固定高度（即 html 和 body）。

或者你可以使用 Jquery。

```
$(window).resize(function() {
  $('body').prepend('<div>' + $(window).width() + '</div>');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T09:38:43.300

当谈到响应式设计时，有许多创造性的方法可以解决手头的问题。

您可以尝试使用百分比来使您的设计更具响应性。使用百分比是最大化用户视口的安全选择。

例如。

```
html, body { 
height: 100%; 
width: 100%; 
} 
```

从那里您可以使用您的站点容器并进行更具体的操作。

此外，HTML head 部分中的一些 JavaScript 可以帮助您检测屏幕尺寸并相应地调整不同的 CSS 规则：

```
<!-- hide script from old browsers
//<![CDATA[

var windowWidth=screen.availWidth;
var windowHeight=screen.availHeight

function sniffer() {
var el=document.getElementById("body"); 
if(screen.width<=600) {
           el.style.width='100%';
           el.style.height= windowHeight;
           el.style.margin="auto";               
 } 
}
onload=sniffer;
//]]>
// end hiding script from old browsers --> 
```

上面的 JavaScript 正在检查用户的屏幕是否小于或等于 600px；如果是这样，它会调整 body 元素的宽度、高度、边距规则。

希望这可以帮助！

# html - 在每个内容的底部放置按钮

> ID：13775627
> 
> 赞同：0
> 
> 时间：2012-12-08T07:50:11.353
> 
> 标签：html, css, css-float

我有这样的标记。

```
 <ul class="products">
    <li class="product pro first">
      <a href="#">
          <span class="onsale">Sale!</span>
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="http://web-vassets.ea.com/Assets/Resources/Image/FeaturedGame/battlefield-bad-company-2-thumb.png?cb=1340391602">
        <h3>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem</h3>
          <span class="price"><span class="strike-through"><span class="striked-text"><span class="amount">$&nbsp;67.00</span></span></span> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
      </a>
        <a class="add_to_cart_button button product_type_simple" data-product_id="185" rel="nofollow" href="#">Add to cart</a>
    </li>

    <li class="product pro first">
      <a href="#">
          <span class="onsale">Sale!</span>
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="http://web-vassets.ea.com/Assets/Resources/Image/FeaturedGame/battlefield-bad-company-2-thumb.png?cb=1340391602">
        <h3>Battle Field</h3>
          <span class="price"><span class="strike-through"><span class="striked-text"><span class="amount">$&nbsp;67.00</span></span></span> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
      </a>
        <a class="add_to_cart_button button product_type_simple" data-product_id="185" rel="nofollow" href="#">Add to cart</a>
    </li>

    <li class="product pro first">
      <a href="#">
          <span class="onsale">Sale!</span>
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="http://web-vassets.ea.com/Assets/Resources/Image/FeaturedGame/battlefield-bad-company-2-thumb.png?cb=1340391602">
        <h3>Battle Field</h3>
          <span class="price"><span class="strike-through"><span class="striked-text"><span class="amount">$&nbsp;67.00</span></span></span> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
      </a>
        <a class="add_to_cart_button button product_type_simple" data-product_id="185" rel="nofollow" href="#">Add to cart</a>
    </li>
  </ul> 
```

可以在此处查看现场演示示例[http://tinkerbin.com/7dnpFPL3](http://tinkerbin.com/7dnpFPL3)。您可以在一行中看到三列。在每一列的底部都有一个名为 的按钮`Add To Cart`。现在，正如您在每一列中看到的那样，内容的长度不同。此内容长度将按钮推到底部。最后两列的内容较少，这就是按钮位于内容中间的原因。现在我希望像第一个内容一样，最后两个内容的按钮位置应该位于每个内容 div 的底部。无论内容的长度如何，它都不会影响按钮的位置。该按钮应始终位于内容的底部。我不能给出任何固定的内容高度。因为每列内容的长度可能非常长。我无法将标记更改为使用表格而不是`ul and li`. 的标记`ul and li`是强制​​性的。在它们内部，我可以更改类名或标记。那么有人可以告诉我如何将按钮放在内容的底部吗？任何帮助和建议都将不胜感激。

**我想要这样的输出** ![在此处输入图像描述](../Images/9467a396b04026d8384ef5b2ae0bf41d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:05:25.650

我会使用 javascript 使包含项目标题的 h3 元素都与最长的标题一样高。

小提琴：http: [//jsfiddle.net/633nc/](http://jsfiddle.net/633nc/)

### Javascript

```
 function makeElementsSameHeight(element){
        $element = $(element);
        // check if element exists
        if (!$element.length){
            return false;
        }           
        // get number of elements
        numberElements = $element.length;
        lengthArray = [];
        for (i=0;i<numberElements;i++){
            //put height of each element into an array
            lengthArray.push( $element.eq(i).height() );
        }

        // calculate maximum height
        largestHeight = Math.max.apply(Math, lengthArray);
        // apply maximum height to all elements
        $element.css('min-height',largestHeight + 'px');;
    }

    makeElementsSameHeight('.product h3'); 
```

Alien 先生说你的标记是一团糟是对的。你应该在担心这种事情之前把它清理干净。

# android - 可用于与 android 通信的服务器和数据库有哪些？

> ID：13775628
> 
> 赞同：-3
> 
> 时间：2012-12-08T07:50:13.270
> 
> 标签：android, android-layout, android-emulator

我是 android 的初学者。我正在开发一个应用程序，在该应用程序中，我的应用程序会将一些数据发送到我的服务器，服务器将处理它并将结果发送到我的应用程序。请推荐任何与android通信的好的服务器，以及与服务器通信的示例代码。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:09:16.143

有很多选择，但您可以将 Google App Engine 与您的 android 应用程序一起使用。

观看来自 Google I/O 的视频：[http ://www.youtube.com/watch?v=NU_wNR_UUn4](http://www.youtube.com/watch?v=NU_wNR_UUn4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:53:48.297

一个非常广泛的问题。您必须了解您可以与 Android 设备进行通信，就像您可以与普通计算机进行通信一样，因此您有很多选择。也就是说，如果您想要一个简单的解决方案，我会指出您[解析](https://parse.com/)哪个具有适用于 Android 的 SDK 和一个 CMS 后端，它将处理来自用户和数据管理的所有内容。

# ios - RestKit 实体映射

> ID：13775630
> 
> 赞同：0
> 
> 时间：2012-12-08T07:50:24.333
> 
> 标签：ios, restkit

嗨，有人可以教我如何进行嵌套的 Restkit 实体映射吗？我在调试时不断收到错误消息，下面是我的错误消息和代码

> `[__NSSetM insertObject:atIndex:]`: 无法识别的选择器发送到实例 0x95269d0

![核心数据家族实体](../Images/d7335d80f05c0414263dcbde0716d304.png)

![核心数据子实体](../Images/5e6c37dc4ad0d612fd91ef7c49cd8f84.png)

json数据

```
Family =(
      {
        id = "1";
        parentName = "Mr John";
        Child =(
                {
                parentID = "1";
                childName = "James";
                age = "18";

            },
            {
                parentID = "1";
                childName = "ruby";
                age = "19";
                                },
                            {
                parentID = "1";
                childName = "ella";
                age = "20";
            }
        );
    }
); 
```

我的 AppDelegate.m

```
 RKEntityMapping *familyMapping = [RKEntityMapping mappingForEntityForName:@"Family" inManagedObjectStore:managedObjectStore];
debtorMapping.identificationAttributes = @[ @"id" ];

[familyMapping addAttributeMappingsFromDictionary:@{
 @"id": @"accNo",
 @"parentName": @"companyName"
 }];

RKEntityMapping *childMapping = [RKEntityMapping mappingForEntityForName:@"Child" inManagedObjectStore:managedObjectStore];

childMapping.identificationAttributes = @[ @"parentID"];

[childMapping addAttributeMappingsFromDictionary:@{
 @"parentID": @"parentID",
 @"childName": @"childName",
 @"age": @"age"
 }];

 [familyMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"Child" toKeyPath:@"Child" withMapping:childMapping]];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:familyMapping
                                                                                   pathPattern:nil
                                                                                       keyPath:@"Family"
                                                                                   statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

[objectManager addResponseDescriptor:responseDescriptor]; 
```

家庭 NSManagedObject

```
@class Child;
@interface Family : NSManagedObject
@property (nonatomic, retain) NSString * id;
@property (nonatomic, retain) NSString * parentName;
@property (nonatomic, retain) NSSet *child;
@end
@interface Family (CoreDataGeneratedAccessors)
- (void)addChildObject:(Child *)value;
- (void)removeChildObject:(Child *)value;
- (void)addChild:(NSSet *)values;
- (void)removeChild:(NSSet *)values;
@end 
```

子 NSManageObject

```
@class Family;
@interface Child : NSManagedObject
@property (nonatomic, retain) NSString * parentID;
@property (nonatomic, retain) NSString * childName;
@property (nonatomic, retain) NSString * age;
@property (nonatomic, retain) Family *family;
@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T15:39:57.593

我已经发现了我的错误。[familyMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"Child" toKeyPath:@"child" withMapping:childMapping]]; toKeyPath 字符串应该用小写字母分配。“关注核心数据关系字符串”。

# magento - 如何在magento中按类别在产品页面中显示特色产品？

> ID：13775631
> 
> 赞同：-1
> 
> 时间：2012-12-08T07:50:30.527
> 
> 标签：magento

我需要按类别在产品页面中显示特色产品，我创建了属性以在管理面板中设置特色产品，它在管理面板中工作正常，我需要在产品页面中按相应类别获取所有特色产品。我是 magento 的新手，所以请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:53:36.043

[您可以从Magento Wiki](http://www.magentocommerce.com/wiki/5_-_modules_and_development/catalog/how_to_create_a_featured_product)找到详细的教程来创建特色产品。

# java - 为什么我什至还没有部署 Web 应用程序时会看到 HttpResponseCode '200'？

> ID：13775633
> 
> 赞同：0
> 
> 时间：2012-12-08T07:51:08.703
> 
> 标签：java, http, jakarta-ee, http-response-codes

在我的 IDE 中，只打开了一个 web-project 并部署在*Tomcat Server*上。但是以下代码尝试连接到既未在 IDE 中打开也未由*Tomcat部署的**Web 应用程序*。但令我惊讶的是，我总是看到*if*语句运行并打印*200*表示*OK*。是不是tomcat自动部署了还没有部署的*web-app ？*如果不是，那可能是什么原因？

 ***```
 final URL url = new URL("http://localhost:8084/other service/index.jsp");
      final HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
      int responseCode = urlc.getResponseCode();
      if(responseCode == 200){
          connected = true;
          System.out.println("Response code : " + responseCode);
      } else {
          System.out.println("Response code : " + responseCode);
        } 
```

如果我篡改*URL*并将其更改为不存在的内容，它会给出*404 代码*。但是，当我没有部署*网络应用程序*时，它应该给出一个*404 代码*！

 ****笔记：***

*我正在使用 netbeans 作为 IDE。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:59:54.877

我建议`http://localhost:8084/other service/index.jsp`用网络浏览器打开，它会显示发生了什么。****

# php - 按日期排序

> ID：13775639
> 
> 赞同：1
> 
> 时间：2012-12-08T07:52:09.857
> 
> 标签：php, mysql

我正在使用 PHP 开发一个搜索工具，该工具正在从数据库中检索数据。它有效，但现在我想按最新日期对结果进行排序。`created`是存储数据库时间戳的列的名称。

这是我的代码：

```
$res = mysql_query("SELECT * FROM book WHERE MATCH
(title,cat_number,isbn,issn,created,subject) AGAINST ('$q' $mode) LIMIT 50", $db);

$list = array();
while($row = mysql_fetch_assoc($res))
{
    $list[] = $row;
}
mysql_free_result($res); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T07:58:08.823

添加`ORDER BY created DESC`到您的 SQL 语句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T08:00:40.160

您可以将查询更新为如下所示：

```
$res = mysql_query("SELECT * FROM book WHERE MATCH (title,cat_number,isbn,issn,created,subject) AGAINST ('$q' $mode) ORDER BY created DESC LIMIT 50", $db); 
```

另一方面，您应该在 mysql 命令上使用 mysqli 或 PDO，因为现在不推荐使用 mysql 命令。

# android - 局域网中笔记本电脑和安卓手机之间的通信

> ID：13775641
> 
> 赞同：-1
> 
> 时间：2012-12-08T07:52:38.000
> 
> 标签：android, networking

我正在开发一个 Android 应用程序，该应用程序将从移动设备收集的数据发送到笔记本电脑/台式机。但我不知道如何在局域网中发送？

避免使用网络服务，有没有办法将数据发送到局域网中的系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:10:59.070

是的，我们可以通过 TCP/IP 套接字发送数据。此应用程序可能有两个应用程序：(1) 桌面应用程序，(2) 移动应用程序

1.  创建桌面应用程序，在应用程序中创建一个ServerSocket，监听某个端口。
2.  创建移动应用程序。在这个app中创建一个Socket，到桌面和socket的ip，ServerSocket正在监听。
3.  通过移动应用程序将数据发送到套接字，通过从套接字写入输出流。
4.  在桌面应用程序中，读取输入流、解析流并保存数据。

# actionscript-3 - 影片剪辑 currentFrame

> ID：13775646
> 
> 赞同：0
> 
> 时间：2012-12-08T07:53:43.473
> 
> 标签：actionscript-3, flash, animation, frame, movieclip

我向我的职能部门发送了一个影片剪辑。它将另一个影片剪辑添加到具有动画的影片剪辑中。正如您在输出中看到的那样，我可以在函数内部看到`currentFrame`我添加的影片剪辑（即`"F_intro"`），但在函数外部，它显示错误。解决办法是什么？我需要获取 currentFrame 的`videoMC_intro`.

```
private function playIntro():void {
    addMovieFromLibrary("F_intro", videoMC_intro);
    trace(videoMC_intro.currentFrame + " <<  ");
}
public function addMovieFromLibrary(mcName:String, mc:MovieClip):void{
    var temp:Class = getDefinitionByName(mcName) as Class;
    mc = new temp() as MovieClip;
    trace(mc.currentFrame + " _A__ ");
} 
```

输出>>

> 1 *A* _
> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 src::GWP_FeatManager/playIntro() 在 src::GWP_FeatManager() 在 src::init00()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:49:33.597

videoMC_intro 可能未初始化。是否为 ActionScript 导出了影片剪辑？

更多关于错误[1009 的信息](http://active.tutsplus.com/tutorials/actionscript/quick-tip-how-to-debug-an-as3-error-1009/)：

# php - 从几个（文本输入）向数据库（Mysql）添加几个字符串

> ID：13775651
> 
> 赞同：0
> 
> 时间：2012-12-08T07:54:08.267
> 
> 标签：php, javascript, jquery, mysql

我无法将字符串添加到数据库中，我不知道为什么，但只添加了空字符串。我认为主要问题在于这部分代码（PHP）：

```
$word=$_POST[".$i."];
mysql_query("INSERT INTO words(word) VALUES('$word')",$connection); 
```

* * *

我需要添加几个字符串，我从（文本输入）s 到数据库

整个代码在这里：

```
 <html>
<head>
<title>Admin Panel (Second Page)</title>    
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body>

<?php
error_reporting(0);

$user="root";
$pass="";

$connection = mysql_connect("localhost",$user,$pass);

mysql_query("CREATE DATABASE IF NOT EXISTS quiz",$connection);
mysql_select_db("quiz",$connection);

mysql_query("CREATE TABLE IF NOT EXISTS words(id MEDIUMINT NOT NULL AUTO_INCREMENT,word TEXT,PRIMARY KEY(id))",$connection);

    $number = $_POST['numberOfWords'];

echo "<form action=SecondAdminPage.php method=POST ENCTYPE='multipart/form-data'>";

    for($i=1; $i<=$number; $i++)
    {
        echo "<input type='text' name='$i'>";

        $word=$_POST[$i];

        mysql_query("INSERT INTO words(word) VALUES('$word')",$connection);
    }

    echo "<input type='submit' value='Save'>";

?>

</form>

</body>

</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-08T08:00:29.180

删除该`error_reporting(0)`行以查看页面中的任何 PHP 错误。

连接可能未正确建立。

此外，`mysql`扩展名已被弃用。改为使用`mysqli`。

# python - 使用 Matlab 或 Python 将用户项目评分转换为矩阵市场输入格式

> ID：13775657
> 
> 赞同：1
> 
> 时间：2012-12-08T07:55:20.790
> 
> 标签：python, matlab

先生，我有一个数据集，其中条目的形式为

用户名|项目中|评分

我想使用 matlab 或 python 将此评级更改为矩阵市场输入格式

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:45:33.250

在 matlab 中是这样的（尚未检查代码，您可能还需要几个转置）：

```
fid = fopen('exp.txt');
A = fscanf(fid, '%d|%d|%g', [3 inf]);
S = sparse(A(1,:), A(2,:), A(3,:)) 
```

[阅读文件的参考。](http://www.mathworks.co.uk/help/matlab/ref/fscanf.html)
[稀疏矩阵的参考。](http://www.mathworks.co.uk/help/matlab/ref/sparse.html)

# asp.net-mvc - HttpApplication.User.Identity 在哪里更新？

> ID：13775660
> 
> 赞同：1
> 
> 时间：2012-12-08T07:55:54.460
> 
> 标签：asp.net-mvc, forms-authentication, security

看似重复的问题，但没有详细回答。好吧，至少我不相信它是。

[谁设置了 HttpContext.User.Identity 的 IsAuthenticated 属性](https://stackoverflow.com/questions/8660539/who-sets-the-isauthenticated-property-of-the-httpcontext-user-identity)

答案是

```
FormsAuthentication.SetAuthCookie 
```

但我反编译了 System.Web.Security FormsAuthenication 类。它调用 GetAuthCookie 并将其添加到响应中。

我期待它在下一个请求时找到会话 Cookie 而不是在 FormsAuthentication 中，如“正确答案”所述。我搜索了完整的反编译源，但没有找到对 IPrincipal 的引用。有人真的知道吗？我可以用和 Event. 触发这个过程吗？我注意到诸如

```
AuthenticateRequest 
```

和 `AuthorizeRequest`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T22:56:38.360

它被设置在 event 中`AuthenticateRequest`，看看`FormsAuthenticationModule.OnEnter`哪个绑定到`AuthenticateRequest`by `FormsAuthenticationModule.Init`。如果想覆盖这个身份，你可以简单地`HttpContext.User`自己设置。

# jquery - 从 dataURL 生成画布复制（jpg/img）

> ID：13775663
> 
> 赞同：1
> 
> 时间：2012-12-08T07:57:45.910
> 
> 标签：jquery, facebook, canvas, kineticjs, data-uri

我希望能够制作一个小页面，用户可以在其中使用拖放将对象放置在场景上，然后将其画布保存为图像，或将图像发布到 facebook/pinterest。

我使用基于海滩上的动物示例的 KineticJS 库创建了拖放和 dataURI 功能，并与拖放保存图像功能合并。

我真正想做的是将画布图像放入同一（或新）页面上的图像持有者（例如，[这里使用 Canvas2imageJS doc](http://hongru.github.com/proj/canvas2image/index.html)）。我已经能够使保存功能在新窗口中打开图像，并且还可以将 dataURI 的字符串作为文本框中的文本生成，如[jsfiddle 上](http://jsfiddle.net/fiddleerin/53RjG/)所示（或代码包括下面的空格持有人），其中单击保存按钮在新的（较小的）窗口中打开图像 (dataURI)，并为 dataURI 生成字符串。

> 身体{边距：0px；填充：0px；} 画布 { 边框：1px 实心 #9C9898; } #buttons { 位置：绝对；左：10px；顶部：0px；} 按钮 { 边距顶部：10px; 显示：块；
> 
> ```
>  }
>     #imgArea{ border: 2px solid red; min-width: 576px; min-height:200px; display: block;}
> </style>
> <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.3.js"></script>
> <script>
>   window.onload = function() {
>     var stage = new Kinetic.Stage({
>       container: 'container',
>       width: 578,
>       height: 200
>     });
>     var layer = new Kinetic.Layer();
>     var rectX = stage.getWidth() / 2 - 50;
>     var rectY = stage.getHeight() / 2 - 25;
> 
>     var box = new Kinetic.Rect({
>       x: rectX,
>       y: rectY,
>       width: 100,
>       height: 50,
>       fill: '#00D2FF',
>       stroke: 'black',
>       strokeWidth: 4,
>       draggable: true
>     });
> 
>     box.on('mouseover', function() {
>       document.body.style.cursor = 'pointer';
>     });
> 
>     box.on('mouseout', function() {
>       document.body.style.cursor = 'default';
>     });
> 
>     layer.add(box);
>     stage.add(layer);
> 
>     document.getElementById('save').addEventListener('click', function() {
>       stage.toDataURL({
>         callback: function(dataUrl) {
>     document.getElementById("textArea").value = dataUrl;
> 
>           window.open(dataUrl, "toDataURL() image", "width=600, height=200");
>         }
> 
>       });
>     }, false);
>   };
> 
> </script>   </head>   <body>
> <div id="container"></div>
> <div id="buttons">
>   <button id="save">
>     Save as image
>   </button>
> </div><div style="">
>   <textarea rows="10" cols="60" id="textArea"></textarea><br>
>   Your picture will appear here:
> 
>   <img id="imgArea"/></div>
> 
>      </body> </html> 
> ```

谁能帮我理解如何制作单击按钮的结果，以便生成的图像可以共享/发布到 facebook / pinterest 墙上？我正在进行的工作也在这里（拖放并仅在新窗口中生成 dataURI）：www.shugar.com.au/obar/Default4.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:09:23.967

好吧，不要这样做 window.open(dataURL);

获取 dataURL 并用它做其他事情，比如 AJAX 它到 Facebook。

我忘记了确切的语法，但它是这样的：

```
 $.ajax({
    url: facebook.com/myaccountUpload/somethingsomething, //here you need the url to upload it to Facebook
    data: dataURL,
    success: function(response){
       alert('uploaded to Facebook');
    },
    error: .... console.log(error);
 }); 
```

# blackberry - 如何通过 BlackBerry 中的 STMP/POP Connection 发送邮件和访问收件箱？

> ID：13775665
> 
> 赞同：1
> 
> 时间：2012-12-08T07:58:39.233
> 
> 标签：blackberry, sendmail

我需要使用 STMP/POP 连接在 Blackberry 中访问收件箱或已发送项目或发送邮件？是否可以通过编程方式在黑莓设备中配置电子邮件？

# c++ - c ++：multimap显示意外输出

> ID：13775667
> 
> 赞同：0
> 
> 时间：2012-12-08T07:58:56.347
> 
> 标签：c++, stl

multimap 显示意外输出。我的预期输出是 a b,c d

但它显示的是 c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c, c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c, c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c, c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c, d

```
 #include <iostream>
    #include <vector>
    #include <map>

    using namespace std;

    int main ()
    {
       multimap<char,vector<char> > mmap; //multimap 

       mmap.insert (pair<char,vector<char> >('a',vector<char>('b','c'))); //insert to multimap
       mmap.insert (pair<char,vector<char> >('d',vector<char>()));

       vector<char>::iterator veciter; 
       multimap<char,vector<char> >::iterator mapiter;

       for ( mapiter = mmap.begin(); mapiter != mmap.end(); ++mapiter) 
       {
          cout << mapiter->first << endl;

          for (veciter = mapiter->second.begin(); veciter != mapiter->second.end(); ++veciter)
          {
              cout << *veciter << ',';
          }
          cout<<endl;
        }

       return 0;
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:02:13.363

构造函数`vector<char>('b','c')`创建一个包含 98 个 'a' 值的向量，因为 'b' 的整数值是 98，并且您正在调用构造函数[`explicit vector( size_t size, const _Tp& initial ) ...`](http://www.cplusplus.com/reference/vector/vector/vector/)。如果您支持 C++ 标准，您可以使用[初始化器列表来更正您的代码。](http://www.cplusplus.com/reference/initializer_list/initializer_list/)代码如下所示：`mmap.insert (pair<char,vector<char> >('a',vector<char>{'b','c'}));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:32:31.207

![在此处输入图像描述](../Images/87415be75cfd6b9077dd053680ac5d88.png)

您可以查看 mmap 内存空间中存储的元素。

mmap.insert (pair >('a',vector('b','c'))) , 创建一个有 98 个 'a' 值的向量

你可以这样使用：

```
mmap.insert (pair<char,vector<char> >('a',vector<char>())); 

mmap.insert (pair<char,vector<char> >('b',vector<char>())); 

mmap.insert (pair<char,vector<char> >('c',vector<char>())); 

mmap.insert (pair<char,vector<char> >('d',vector<char>())); 
```

希望能帮到你。

# c++ - 堆上向量的初始化向量

> ID：13775669
> 
> 赞同：0
> 
> 时间：2012-12-08T07:59:16.647
> 
> 标签：c++, vector

我有一个函数，它接受行数和列数，并使用对象“单元”的默认值初始化向量向量，并返回指向该向量的指针。

```
//Cell class
class cell{
public:
    int cost, parent;
    cell(int cost = 0, int parent = 0) : cost(cost), parent(parent){}
}

//The initialisation function
vector<vector<cell> >*  init_table(int n_rows, int n_cols){
    //Error line
    vector<vector<cell> >* table = new vector<vector<cell>(n_cols)> (n_rows);

    //Some(very few) special cells need a different value so I do that here

    return table; //Return the pointer
} 
```

似乎编译器解析 (n_cols)> (n_rows) 就像 > 操作，而不是创建单元对象的 n_cols 副本和向量对象的 n_rows 副本。如何在不手动循环并推送向量中的默认值单元格的情况下初始化向量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:59:32.263

由于 C++ 编译器通常有[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)，你可以简单地做

```
vector<vector<cell> >  init_table(int n_rows, int n_cols)
{
    return vector<vector<cell> >(n_rows, vector<cell>(n_cols));
} 
```

和写作

```
vector<vector<cell> > my_table = init_table(int n_rows, int n_cols); 
```

将与“新”向量一样有效，但这更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:16:04.037

哦，我现在明白了。我应该通过它的构造函数用内部向量初始化外部向量

```
vector<vector<cell> >* table = new vector<vector<cell> > (n_rows, vector<cell>(n_cols)); 
```

而不是作为模板参数。它现在正在工作。

# javascript - 从活动菜单项 javascript 开始

> ID：13775673
> 
> 赞同：2
> 
> 时间：2012-12-08T08:00:08.637
> 
> 标签：javascript, css

嗨，我是新手，不确定我是否正确执行此操作。

我使用 Javascript 来装饰点击后的活动链接。问题是，如何加载已经激活的菜单项之一的页面？

示例： http: [//moschalkx.nl/](http://moschalkx.nl/)

Javascript代码：

```
function hlite_menu(obj){
    var lnk=document.getElementById('menu').getElementsByTagName('A');
    for(var i in lnk){
        lnk[i].className=(lnk[i]===obj)?'menu_active':'menu_idle';
    }
}

function set_menu(){
    var lnk=document.getElementById('menu').getElementsByTagName('A');
    for(var i in lnk){
        lnk[i].className='menu_idle';
        lnk[i].onclick=function(){
            hlite_menu(this);
        }
    }
}

window.onload=set_menu; 
```

CSS：

```
a.menu_idle {color:#333333; text-decoration:none;}
a.menu_active {color:#333333; text-decoration:underline;}
a:visited {color:#333333; text-decoration:none;}
a:hover {color:#333333; text-decoration:underline;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:04:21.950

您已经有了将`hlist_menu`特定链接设置为活动的函数，所以我会从您的`set_menu`函数中调用该函数，以获取应该开始活动的链接

```
function set_menu(){
    var lnk=document.getElementById('menu').getElementsByTagName('A');
    for(var i in lnk){
      lnk[i].className='menu_idle';lnk[i].onclick=function({hlite_menu(this);}}

      if (lnk[i] /* ??? how do you know whether this is the link to activeate up front? */ ) {
          hlist_menu(lnk[i]);
      }
    } 
```

* * *

还有，这

```
lnk[i].onclick=function({hlite_menu(this);}} 
```

可以简化为

```
lnk[i].onclick = hlite_menu; 
```

假设您将其更改为

```
function hlite_menu(){
    var lnk= document.getElementById('menu').getElementsByTagName('A');
    for(var i in lnk){
       lnk[i].className = (lnk[i] === this) ? 'menu_active':'menu_idle';
    }
} 
```

# ios - 仅在 iPad 上崩溃

> ID：13775682
> 
> 赞同：2
> 
> 时间：2012-12-08T08:02:18.173
> 
> 标签：ios, ipad

我的屏幕上有一些动画。我正在使用精灵表通过 CAlayers 为所有这些设置动画。我正在下载所有大小为 4 MB 的资产`viewDidAppear`。

我能够在模拟器和 iPhone 上显示动画。但在 iPad 上收到内存警告。

在我的设备崩溃报告中，它显示异常类型为

> EXC_BAD_ACCESS(SIGSEGV)

我正在使用以下代码制作动画：

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES); NSString *documentsDirectory = [paths objectAtIndex:0]; NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png", imageNameStr]]; UIImage *img = [UIImage imageWithContentsOfFile:getImagePath];

```
CGImageRef richterImgPl1 = [UIImage imageWithContentsOfFile:getImagePath].CGImage;

NSArray *arrayWithSprites = [img spritesWithSpriteSheetImage:img
                                                  spriteSize:CGSizeMake(230,350)];

CGSize fixedSize = CGSizeMake(230, 350);
MCSpriteLayer *richterPl1 = [MCSpriteLayer layerWithImage:richterImgPl1 sampleSize:fixedSize] ;

richterPl1.frame = imgView.frame;
richterPl1.position = imgView.layer.position;

CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"sampleIndex"];
anim.fromValue = [NSNumber numberWithInt:1];
anim.toValue = [NSNumber numberWithInt:arrayWithSprites.count];
anim.duration = sleepTime;//[imgView.animationImages count] * 0.0500;
anim.repeatCount = 1;

[richterPl1 addAnimation:anim forKey:nil];
[self.view.layer addSublayer:richterPl1]; 
```

摆脱这个问题的任何想法或线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:59:56.550

您必须响应 didReceiveMemory 警告并释放一些资源，否则您的应用程序将被操作系统杀死，这就是您得到的这个段错误

# php - jquery ajax 返回整页内容

> ID：13775691
> 
> 赞同：2
> 
> 时间：2012-12-08T08:04:21.297
> 
> 标签：php, jquery, ajax, ubuntu

首先，请原谅我的英语不好

我在 ubuntu 中为 jquery/ajax 系统工作

我的代码如下：

索引.html

```
...
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
</head>
<body>
<form name="stuSelForm" id="stuSelForm">
<table id="inputTable">
<tr><td colspan="3" align="center">Stu From</td></tr>
<tr>
<td>&nbsp;</td>
<td>St No : </td>
<td><input type="text" name="StNo" id="StNo" /></td>
</tr>
<tr>
<td></td>
<td>name : <br/> family : </td>
<td><input type="text" name="Fname" id="Fname" /><br/><input type="text" name="Lname" id="Lname" /></td>
</tr>
<tr>
<td colspan="3" align="right"><input type="submit" id="send" name="send" value="show" /></td>
</tr>
</table>
</form>
</body>
<script type="text/javascript" src="js/jscodes.js"></script>
... 
```

.js 文件：

```
$(document).ready(function()
{
$('#stuSelForm').submit(function(event)
{
    var form = $(this);
    inputs = form.find("input");
    serializedData = form.serialize();

    inputs.attr("disabled","disabled");

    $.ajax({
        url:'process.php',
        type:'POST',
        data: serializedData,
        dataType:'text',
        cache: false,
        success : function(data,textStatus,jqXHR){ alert(data); },
        error : function(jqXHR,textStatus,errorThrown) { alert(textStatus+jqXHR.status+jqXHR.responseText+"..."); },
        complete : function(jqXHR,textStatus)
                        {
inputs.removeattr("disabled");
                        }
        });
    event.preventDefault();
});
}); 
```

和 process.php ：

```
<?php
header("Content-Type: text/html");
$StNo = $_POST['StNo'];
echo $_POST['StNo'];
?> 
```

现在一切正常，但返回值不是 StNo 它是 process.php 的全部内容，这意味着

请帮助我为什么会发生这种情况，这是针对 php 扩展还是我的错误或...

tanx 寻求帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T18:50:21.900

听起来php没有运行。您是否正在运行通过 localhost / 服务器或直接从目录调用 php 文件的 HTML 文件？您需要 php 服务器来评估您的 php 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:24:36.053

标题中的问题：您在 jquery 中编写，`dataType: text`但在 php中编写`header("Content-Type: text/html");` 更改它以获得成功：像这样：

```
$.ajax({
    url:'process.php',
    type:'POST',
    data: serializedData,
    cache: false,
    success : function(data,textStatus,jqXHR){ alert(data); },
    error : function(jqXHR,textStatus,errorThrown) { alert(textStatus+jqXHR.status+jqXHR.responseText+"..."); },
    complete : function(jqXHR,textStatus){inputs.removeattr("disabled");}
    }); 
```

我删除了`dataType:`，因为 jquery 默认设置是，在这种情况下`dataType:'html'` 你不需要写`dataType`

# boost - Windows XP 中的 Firebreath 插件注册问题

> ID：13775693
> 
> 赞同：2
> 
> 时间：2012-12-08T08:04:29.717
> 
> 标签：boost, dll, windows-xp, firebreath, boost-signals

我正在使用 firebreath 在 windows xp 中使用 Visual Studio 2010 开发浏览器插件。该插件使用升压信号、文件系统和系统、libcurl 库。

该插件成功构建，但在使用 regsvr32 注册时出错：

```
LoadLibrary("np<plugin name>.dll") failed. The specified procedure could not be found. 
```

检查了一段时间后，我发现如果我删除升压信号模块，插件就会被注册。我检查了依赖walker中的插件dll，但没有丢失的dll。虽然它在 ADVAPI32.DLL 和 MPR.DLL 中显示了模块警告。谁能帮我解决这个问题，因为我无法从我的项目中删除信号模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:31:27.117

正如 FireBreath 邮件列表中所讨论的，这可能是 FireBreath 在包含其 boost 子集时无法正确执行的操作。我建议尝试自己构建和安装 boost，然后在 prep 脚本上使用外部 boost 标志。

您可以在 firebreath 网站的 Prep Scripts 页面上找到您需要的标志和其他用于[准备脚本的标志。](http://www.firebreath.org/display/documentation/Prep+Scripts#PrepScripts-ExternalBoost)

至少你需要使用 "-D WITH_SYSTEM_BOOST=1"; 你可能还需要其他一些。

```
-D BOOST_ROOT="/path/to/boost" - set to path to your Boost installation
-D Boost_ADDITIONAL_VERSIONS="<versions>" - set specific Boost version (e.g. "1.43;1.43.0")
-D Boost_USE_STATIC_LIBS=on
-D Boost_USE_STATIC_RUNTIME=on should be used in windows to force linking to the boost libraries built with /MT(d). 
```

# sql-server-2008 - 仅从 sql server 中的日期数据类型中获取日期

> ID：13775695
> 
> 赞同：1
> 
> 时间：2012-12-08T08:04:46.460
> 
> 标签：sql-server-2008, date

> **可能重复：**
> [如何仅从 SQL Server 日期时间数据类型返回日期部分](https://stackoverflow.com/questions/113045/how-to-return-the-date-part-only-from-a-sql-server-datetime-datatype)

即使我使用了日期数据类型，我也只需要从 sql server 获取日期。但在数据库`n_strat_date`列中只有日期值而不是时间值。

我的桌子：

![在此处输入图像描述](../Images/40942b055ea047885a217c8723e1570a.png)

我的输出：

![在此处输入图像描述](../Images/2fa66dce206d2c5319552eb5728c1162.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:09:45.387

试试看，它会起作用 select CONVERT(date,column_name) from table_name

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:19:10.500

无论您如何在 SQL 中存储日期，如果您在 C#`DateTime`值中加载此数据，它们将始终具有时间部分（即`12:00:00 AM`，除非另有说明）。

您这里的问题与 SQL 无关；这是您的应用程序中的格式问题。

具体来说，如果您在名为 的变量中有 DateTime 值`startDate`，而不是打印到表单`startDate`或`startDate.ToString()`，请使用显式格式，如下所示`startDate.ToString("M/d/yyyy")`：

这是一个[在线测试](http://ideone.com/fRUYe6)，看看它是如何工作的。

# javascript - Windows 商店 Directx 应用程序，它使用 javascript Api 之类的 facebook 图形 API 作为数据源

> ID：13775696
> 
> 赞同：1
> 
> 时间：2012-12-08T08:04:46.303
> 
> 标签：javascript, facebook, windows-8, directx

我想使用 directx 制作一个 Windows 商店 3D 应用程序，但我的大部分数据将来自 facebook 的 Graph API 和 twitter 的 REST API。它们在 javascript 中可用。我有哪些选项可以制作这个应用程序？我可以在单个应用程序中执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:43:07.690

您可以在 C++ 中使用 Facebook 和 Twitter API。例如，参见[卡萨布兰卡图书馆](http://msdn.microsoft.com/en-us/devlabs/casablanca.aspx)。这样，您就不必支付从 Javascript 调用 C++ 的性能损失，反之亦然。我假设您正在使用 DirectX 和 C++ 编写应用程序，因为它具有良好的性能和更好的图形。

# vim - Cscope 输出窗口只显示一行

> ID：13775699
> 
> 赞同：0
> 
> 时间：2012-12-08T08:05:14.230
> 
> 标签：vim, cscope

我通过 Vundle 安装了 Cscope，但没有进行任何配置。

我的问题是

用 搜索后`sccope find`，我在底部只有**一个行输出窗口，并自动移动第一个匹配项。**

```
(1 of 2): <<getFoo>> int XObjectName::getFoo() 
```

如何显示所有匹配列表？

# java - 在 JTable 中设置单元格边框

> ID：13775701
> 
> 赞同：1
> 
> 时间：2012-12-08T08:06:15.420
> 
> 标签：java, macos, swing, jtable

我有一个`JTable`，我只显示水平线来分隔每个表格行。在 Windows 8 中，这些行显示，但在 Mac OS X 中，它们没有。我正在`JLabel`为表格中的所有单元格使用自定义单元格渲染器，并在其中添加了一个哑光边框以`JLabel`纠正 Mac OS X 的此问题。但是，它看起来不正确，因为如果您仔细查看在下面的屏幕截图中，您可以看到一列结束而另一列开始的水平线断开（即不连续）。（仔细查看“英语”和“注释”列。）

![在此处输入图像描述](../Images/fb8b81cf14557c492430a8ad98099ec6.png)

如何为表格中的所有单元格添加边框，使其看起来像下面的 Windows 8 屏幕截图中的那样？

![在此处输入图像描述](../Images/4e6ea0b4023eba26cf8d798e7087eb5e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T17:09:01.660

Mac OS X 上的`TableUI`委托将`Table.background`和设置`Table.gridColor`为`Color.white`，使网格实际上是不可见的。您可以像这样更改网格颜色：

```
UIManager.put("Table.gridColor", new ColorUIResource(Color.gray));
EventQueue.invokeLater(new Runnable() {

    @Override
    public void run() {
        // construct your GUI
    }
}); 
```

# iphone - 来自 iphone sdk 中数据库的 URL 链接

> ID：13775702
> 
> 赞同：0
> 
> 时间：2012-12-08T08:06:16.367
> 
> 标签：iphone, ios5

如何获取存储在 iphone sdk 数据库中的 urllink 数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:12:14.347

使用以下代码可能会对您有所帮助。

```
 NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"Your URL"]]];

    // Perform request and get JSON as a NSData object

    NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

NSLog(@"Your Data=%@",response);

    id jsonObject = [NSJSONSerialization JSONObjectWithData:response options:NSJSONReadingAllowFragments error:nil]; 
```

# c - 在链表中添加多条记录

> ID：13775703
> 
> 赞同：1
> 
> 时间：2012-12-08T08:06:44.000
> 
> 标签：c

我基本上有两个疑问。首先，这段代码运行良好，我只想打印结果，其次，这个程序只输入一条记录。我想保存一个完整的通讯录，比如姓名联系人。为此，我必须为每个字段提供单独的结构指针？请帮帮我。

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>

struct node
{
   int data;
   struct node *link;
} *head=NULL;

void inserfirst();

int main()
{
    insertfirst();
    getch();
    return 0;
}

void insertfirst()
{
     int item;
     struct node *ptr;
     scanf("%d",&item);
     if (head==NULL) {
         head=(struct node*)malloc(sizeof(struct node));
         head->data=item;
         head->link=NULL;
     } else {
         ptr=head;
         head=(struct node*)malloc(sizeof(struct node));
         head->data=item;
         head->link=ptr;
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:23:46.157

要解决您的问题：

一般来说，保留多位信息（名称、数字、地址等）的方法是将它们包含在节点结构中，例如：

```
struct node
{
   int data;
   char name[50];
   char phone[20];
   struct node *link;
} *head=NULL; 
```

这是一个联系人列表，每个节点都有联系人详细信息，列表包含多个联系人。

要打印这样一个列表，需要遍历列表并打印每个节点，具体来说：

1.  从头开始
2.  如果当前节点为空，那么我们就在最后，所以退出
3.  打印当前节点的内容
4.  将当前节点设置为下一个节点（即current->link）
5.  返回第 2 步

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:16:11.363

你也可以用这个

```
   typedef 结构体联系方式
    {
     整数数据；
    字符名称[40]；
    字符添加[90]；
    }书;
    结构节点
    {
    b书；
    结构节点*链接；
    }*头=空；

```

# java - 在Android中检查密码

> ID：13775706
> 
> 赞同：3
> 
> 时间：2012-12-08T08:07:34.203
> 
> 标签：java, android, login, android-activity, passwords

我想检查密码，我在 Android 中有一个密码字段

```
 package com.example.berk4;

    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.app.Activity;
    import android.app.AlertDialog;
    import android.content.Intent;

    public class MainActivity extends Activity implements OnClickListener{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    EditText et = (EditText)findViewById(R.id.editText1);
    Button buttonEnter = (Button)findViewById(R.id.button1);
    buttonEnter.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    EditText et = (EditText)findViewById(R.id.editText1);
    String password = et.getText().toString();

    et.getEditableText().toString();
    if (password.equals("admin")) {
        Intent intent2 = new Intent("com.example.berk4.screen2");
    startActivity(intent2);

    }else{

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("you suck");
        builder.setMessage("try again");
        builder.setPositiveButton("ok", null);
        AlertDialog dialog = builder.show();
    }

}

} 
```

当我输入一个随机错误的密码时，它可以正常工作，但是当我输入正确的密码时，应用程序会关闭，为什么它对我不起作用？（顺便说一句。我还有另一堂课screen2。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T08:11:52.893

像密码正确一样开始新活动：

```
 if (password.equals("admin")) {
        Intent intent2 = new Intent(MainActivity.this,screen2.class);
        startActivity(intent2);

    }else{
    // your code here
  } 
```

并确保您已将您的下一个活动添加`AndroidManifest.xml`为：

```
.....
<activity android:name=".screen2"></activity>
</application>
..... 
```

# c# - 强事件和弱事件

> ID：13775710
> 
> 赞同：4
> 
> 时间：2012-12-08T08:08:06.810
> 
> 标签：c#, events

我对事件的理解是有一个指向委托处理程序的列表，并且每当触发发布时，聚合器循环遍历列表以调用指向处理程序的 ref 指针。

我也读过很多地方的强事件和弱事件，但我不完全理解它们是什么。什么是强事件和弱事件？它们有什么区别和用法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:13:44.680

基本上，弱事件是使用“弱引用”注册的“正常事件”......在构建/实现控件时使用大多数“弱事件”以避免潜在的内存泄漏，因为“强事件”（即强引用）对生命周期有影响...

有关示例源和参考的完整说明，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/aa970850.aspx)。

# jsp - IDE 或 JSP 中的 CRUD 实用程序

> ID：13775713
> 
> 赞同：2
> 
> 时间：2012-12-08T08:08:40.587
> 
> 标签：jsp, jakarta-ee, netbeans, javabeans, crud

我正在使用 Java Beans 在 JSP 中创建一个 CRUD 应用程序。我想问一下IDE中是否有任何内置功能或任何附加组件可以自动为数据库表生成CRUD功能？

像 setter 和 accessor 方法一样可以由 IDE 生成。我知道我们可以使用像 Spring 这样的许多框架来获得 CRUD，但是对于一个简单的应用程序来说，这可能只使用 JSP 和 java bean 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-14T10:21:17.900

**Telosys** ( [http://www.telosys.org/](http://www.telosys.org/) ) 专为这项工作而设计（作为 Eclipse 插件和 CLI 工具提供）

它使用现有数据库或“文本模型”来生成源代码（通常是 CRUD 屏幕）

如有必要，可以自定义模板

有一堆 Java Web 应用程序的模板，可以根据需要进行调整

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T09:34:00.103

为此目的有很多工具，我添加了其中 4 个我以前使用过的工具。

1- [MyEclipse for Spring (ME4S)](http://www.myeclipseide.com/me4s/)，这个IDE具有基于数据库的代码生成能力。

2- [Appfuse](http://appfuse.org/display/APF/Home)，用于在 JVM 上构建 Web 应用程序的全栈框架，您可以基于 Appfuse 提供的许多 Web 框架非常快速轻松地创建 CRUD 应用程序。你可以看到这些[演示和视频](http://demo.appfuse.org/demos.html)

3- [SpringFuse](http://www.springfuse.com/)，反转你的数据库结构，在几秒钟内生成一个完整的 J2EE Web 应用程序堆栈

4- [Spring Roo](http://www.springsource.org/spring-roo)，具有大量插件和功能的快速应用程序开发工具

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T21:49:43.957

看看[Spring Roo](http://www.springsource.org/spring-roo)。它是一个生成java代码的工具，可以搭建一个MVC JSP站点：[http ://static.springsource.org/spring-roo/reference/html/base-web.html](http://static.springsource.org/spring-roo/reference/html/base-web.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T14:40:25.883

通过简单的jsp是不可能的。您必须为 CRUD 编写 comman 方法并在整个应用程序中调用它。对于每个框架，我们都应该编写这些方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-29T14:44:22.760

您可以使用[Spring Roo](http://projects.spring.io/spring-roo/)，它为您构建所有内容并且不会创建运行时依赖项。

它对于 CRUD 应用程序非常简单且有用。它更像是一个 IDE 插件，而不是一个框架本身。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-23T10:23:53.973

[这是从数据库生成 JavaServer Faces 2.0 CRUD 应用程序](http://netbeans.org/kb/docs/web/jsf20-crud.html)的详细示例

[我已经使用Apache Derby - DB](http://db.apache.org/derby/)和 Tomcat 7处理了上述示例 。

希望这会帮助你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-30T06:58:30.937

Netbeans 实际上可以帮助您为任何受支持的数据库上的表生成 Swing CRUD 应用程序（受支持的意思是您拥有适当驱动程序的数据库）。只需单击新建项目 --> Java --> 数据库应用程序。按照向导设置您的数据库连接、您想要 CRUD 的表等，并观察 Netbeans 生成整个 CRUD 应用程序（然后您可以进一步自定义）。我使用它（与 MySQL 工作台一起）在黑客马拉松中不到 10 分钟的时间内创建了一个完整的联系人应用程序；Netbeans 社区在这方面做得很好。如果由于某些原因 Swing 可能不适合您的项目（您真的想做 Web 的东西），您可以考虑使用**Grails**框架（它是一个 Groovy 框架，有 YouTube 视频可以让您在不到 45 分钟内快速入门）。创建域模型（实体，类似于数据库表）后，框架有一个称为 UI 脚手架的东西，可用于为这些域模型生成 CRUD Web UI；它真的很酷。我希望这有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-14T06:24:13.453

[Spring Roo](http://projects.spring.io/spring-roo/) - CRUD 代码生成器，它接收数据库并输出 Java + AspectJ.
从本教程开始：[从 Roo 开始](http://docs.spring.io/spring-roo/reference/html/beginning.html)。

# iphone - ios6可以在iphone4s或更早的版本上运行吗？

> ID：13775717
> 
> 赞同：-1
> 
> 时间：2012-12-08T08:10:00.223
> 
> 标签：iphone, ios, ios6, storyboard

我是 iOS 开发的新手，我有两个问题。由于这些问题很短，我问的是同一个问题。

1.  我正在创建使用 iOS6 的 iOS 应用程序。该应用程序将在 iPhone 4s 或更早版本中运行，还是 iOS6 仅在 iPhone 5 中运行？

2.  Storyboard 也仅适用于 iPhone 4 和下一个版本的手机吗？那个故事板在 iPhone 3G 中不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:16:34.323

iOS 6 适用于 iPhone 3GS 或更高版本。故事板需要 iOS 5 或更高版本（这意味着那些运行 iOS5 或更高版本的 3GS 或更高版本的设备）。由于 iPhone 3G 仅升级到 iOS 4.2.1，因此您不能在其上使用情节提要。

而且，顺便说一句，Xcode 4.5 甚至不能再生产与 iPhone 3G 兼容的应用程序，因为它不能支持 4.3 之前的 iOS（也不再支持 iPhone 3G 处理器 armv6）。

# java - 为什么我使用 ?: 条件运算符不正确？

> ID：13775720
> 
> 赞同：2
> 
> 时间：2012-12-08T08:10:40.847
> 
> 标签：java

尝试编译时出现编译错误，“不是语句”，代码为：

```
(checkDatabaseExist())?connectToDB() : buildDB(); 
```

当函数是：

```
private boolean checkDatabaseExist() {...}
private void connectToDB(){...}
private void buildDB(){...} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T08:12:33.347

是的，你不能像那样使用[条件运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)。它旨在计算一个或另一个*表达式*作为结果。它并不是一种选择执行一个*语句*或另一个语句的方式。

只需使用：

```
if (checkDatabaseExist()) {
    connectToDB();
} else {
    buildDB();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T08:14:34.993

如[JLS - 第 15.25 节 - 条件运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)中所述： -

> 第二个或第三个操作数表达式调用 void 方法是编译时错误。

因此，您必须使用`if-else`构造在不同的条件下调用您的方法。

```
if (checkDatabaseExist()) {
    connectToDB();
} else {
    buildDB();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T08:17:08.077

三元运算符不能与返回**void**的方法/操作一起使用。

方法/表达式必须返回与引用类型兼容的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T08:13:55.557

除了@Jon Skeet 所说，三元运算符（您正在使用的）旨在以这种方式使用：

```
String s = someBoolean ? "someBoolean is true" : "someBoolean is false"; 
```

`(condition) ? (value if true) : (value if false)`

# python - 将几个不同长度的列表合并成一个矩阵

> ID：13775722
> 
> 赞同：1
> 
> 时间：2012-12-08T08:10:56.560
> 
> 标签：python, arrays, matrix, numpy, scipy

输入：

```
word_list = ["a", "b","c","d", "e"]
input1 = [("b",20),("a",10)}
input2 = [("c",9)]
input3 = [("d",70)]
result = merge_blabla(word_list, [input1, input2, input3]) 
```

如果可以每次添加一行，则此行会更好：

```
result = init_blabla(word_list)
result.append_blabla(input1)
result.append_blabla(input2)
result.append_blabla(input3) 
```

输出是这样的：

```
result   
>> matrix(array(10,20,0,0,0), array(0,0,9,0,0), array(0,0,0,70,0))
result.colnames   
>> ["a", "b", "c", "d", "e"] 
```

实际上`word_list`有 1M 个元素，结果是一个稀疏矩阵，所以效率可能很重要。

有没有人知道如何在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:48:37.437

```
class Matrix:
    def __init__ (self, columns):
        self.columns = columns
        self.rows = []

    def push (self, row):
        nRow = []
        row = dict (row)
        for key in self.columns:
            nRow.append (row [key] if key in row else 0)
        self.rows.append (nRow)

    def result (self): return self.rows

    def colNames (self): return self.columns

word_list = ["a", "b","c","d", "e"]
input1 = [("b",20),("a",10)]
input2 = [("c",9)]
input3 = [("d",70)]

m = Matrix (word_list)
m.push (input1)
m.push (input2)
m.push (input3)
print (m.result () )
print (m.colNames () ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T21:05:24.247

使用[`DataFrame`](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)：

```
>>> inputs
[('b', 20), ('a', 10), ('c', 9), ('d', 70)]
>>> data = {x[0]:[x[1]] for x in inputs}
>>> data
{'a': [10], 'c': [9], 'b': [20], 'd': [70]}
>>> results = pandas.DataFrame(data)
>>> results
    a   b  c   d
0  10  20  9  70
>>> results['e'] = [1]
>>> results
    a   b  c   d  e
0  10  20  9  70  1
>>> results.values
array([[10, 20,  9, 70,  1]], dtype=int64)
>>> results.columns
Index([a, b, c, d, e], dtype=object) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-08T09:53:30.003

```
class Matrix(object):
    def__init__(self, columns):
        self.columns = columns
        self.rows = []

    def insert_row(self, row):
        new_row = []
        for col in self.columns:
            for tup in row:
                if tup[0] == col:
                    new_row.append(tup[1])
                    break
            else:
                new_row.append(0)
        self.rows.append(new_row) 
```

# sql - oracle 存储过程 - 局部变量行为神秘

> ID：13775724
> 
> 赞同：0
> 
> 时间：2012-12-08T08:11:14.360
> 
> 标签：sql, oracle

这就是我定义局部变量的方式：

```
 team_counter number (38) := 0;
   username varchar2(50) := ''; 
```

这就是我在使用一些 select into 语句后尝试使用/查看它们的值的方式：

```
 dbms_output.put_line(team_counter||'.'||username);
    if  team_counter< 30 AND username  <>'' then
    begin
        dbms_output.put_line('yuhj');
    end;
    end if; 
```

第二个输出没有被打印！第一个输出被打印为我所期待的“1.tuser”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:45:41.220

这是因为您正在尝试使用不等式运算符将字符串与长度为 0 的字符串进行比较。

Oracle 假定长度为 0 的字符串等同于 NULL，并且不会评估不使用 NULL 特定条件的比较。[引用](http://docs.oracle.com/cd/B28359_01/server.111/b28286/sql_elements005.htm)：

> Oracle 数据库当前将长度为零的字符值视为空值。但是，在未来的版本中，这可能不会继续存在，Oracle 建议您不要将空字符串视为与 null 相同。

简单地说，这意味着您的 IF 语句应该是：

```
if team_counter < 30 and username is not null then
   ... 
```

作为附加说明，不需要`begin ... end`周围的`dbms_output.put_line`. 由于您没有捕获与此调用明确相关的任何异常或声明其他变量等，因此没有真正的需要。

# objective-c - 使用@autoreleasepool 并发送自动释放消息

> ID：13775725
> 
> 赞同：0
> 
> 时间：2012-12-08T08:11:15.453
> 
> 标签：objective-c

我正在学习objective-c并想澄清一件事：当我使用autoreleasepool时，我应该在使用测试对象后发送一条autorelease消息吗？

```
for (int i = 0; i < 10; ++i)
{
    @autoreleasepool {
        TestClass* tc1 = [[TestClass alloc] init];
        //....... do some stuff with tc1
        [tc1 autorelease];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:20:43.480

> 当我使用自动释放池时，我应该在使用测试对象后发送一条自动释放消息吗

它们没有*任何*相关性。

您应该做什么取决于您想要做什么以及您是否使用自动引用计数。

如果您使用的是 ARC（我认为并非如此，因为您发送了一条`autorelease`消息），那么您根本不必担心在简单的情况下释放对象。（如果你必须对更复杂的模型使用高级内存管理，那么 ARC 甚至比 MRC 更复杂，但无论如何......）

如果您不使用 ARC，则有两种选择。`autorelease`让一个对象在最内层自动释放池的末尾被释放。所以在你提供的例子中，这样做是可以的。

但是，自动释放的主要目的是在从方法/函数返回对象时处理所有权，并且通常，您希望在`release`不再需要时显式地向已分配初始化的对象发送消息。

# codeigniter - 使用发送网格发送组消息，给出 500 内部服务器错误

> ID：13775732
> 
> 赞同：8
> 
> 时间：2012-12-08T08:12:54.423
> 
> 标签：codeigniter, email, swiftmailer

我想使用发送网格发送群组消息。我的群组有 100 名成员。当我发送群组消息时，发送了 50 到 80 条消息，然后显示一个空白页面：

`NetworkError: 500 Internal Server Error`

我的代码是，

```
set_time_limit (0);
$usernames = 'username'; // Must be changed to your username
$passwords = 'password';  // Must be changed to your password
// Create new swift connection and authenticate
$transport = Swift_SmtpTransport::newInstance('smtp.sendgrid.net', 25);
$transport ->setUsername($usernames);
$transport ->setPassword($passwords);
$swift = Swift_Mailer::newInstance($transport);
// Create a message (subject)
$message = new Swift_Message($subject);
// add SMTPAPI header to the message
$headers = $message->getHeaders();
$headers->addTextHeader('X-SMTPAPI', $hdr->asJSON());
// attach the body of the email
$message->setFrom($from);
$message->setBody($html, 'text/html');
$message->setTo($to);
$message->addPart($text, 'text/plain');
if ($recipients = $swift->send($message,$failures)){
    $message= 'Message sent';
}else{
    $message= "Something went wrong -  message not sent, please try later";
} 
```

**asJSON：**

```
{
  "to": [
    ""
  ],
  "sub": {
    "-name-": [
      "anu"
    ],
    "-time-": [
      "12 PM"
    ]
  },
  "category": "initial",
  "filters": {
    "footer": {
      "settings": {
        "enable": 1,
        "text\/plain": "Thank you "
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-16T08:30:46.963

我建议你看看排队解决方案。检查github 中的[slm/queue](http://github.com/slm/queue)。对于长列表可能会导致服务器超过最大执行时间，使用队列服务将解决这个问题，所有消息将按顺序传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T05:40:04.537

看起来`to`参数是问题：

```
"to": [
    ""
] 
```

只需确保在输出中添加一封电子邮件，就可以了：

```
"to": [
    "some@email.com"
] 
```

这个答案归功于上面的@Swift。

# coldfusion - 如何仅使用coldfusion标签显示目录浏览器树状控件？

> ID：13775735
> 
> 赞同：2
> 
> 时间：2012-12-08T08:13:43.917
> 
> 标签：coldfusion, tree, directory-structure

几个月前，当我尝试 Coldfusion 的一些功能时，我发现我们可以使用非常简单的标签在网页上进行目录浏览器控制。但我现在不记得那个标签了。我记得那是一个小程序。我找到了 cftree 标签，但它需要绑定操作和几行代码来显示目录结构。我无法谷歌它。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:23:09.953

我在下面的链接中找到了我自己问题的答案：
[http ://www.tek-tips.com/viewthread.cfm?qid=691047](http://www.tek-tips.com/viewthread.cfm?qid=691047)

谢谢如果有人试图找到我的问题的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T06:39:36.387

我认为您一直在寻找它的 cfdirectory 标签或 cftree。

# sql - SQL如何从访问表中的单元格中获取值

> ID：13775738
> 
> 赞同：0
> 
> 时间：2012-12-08T08:14:44.833
> 
> 标签：sql, asp.net, database, ms-access

*我正在使用访问表*

我正在使用包含这些公共功能的 oleDBManager：

```
/// <summary>
/// Excecutes an SELECT query and returns the data.
/// </summary>
/// <param name="query">the query string</param>
/// <returns>returns an DataTable instance with the recived data from the selection query.</returns>
public DataTable ExcecuteRead(string query) {
    this.link.Open();
    // ---
    this.dataAdapter = new OleDbDataAdapter(query, this.link);
    // ---
    this.dataTable = new DataTable();
    this.dataAdapter.Fill(this.dataTable);
    // ---
    this.link.Close();
    // ---
    return this.dataTable;
}

/// <summary>
/// Returns an HTML table code, with all the rows and the values of the results.
/// </summary>
/// <param name="query">the query string</param>
/// <returns>returns an HTML code as a string</returns>
public string ExcecuteTableRead(string query)
{
    string output = "<table border=\"1\">";
    // ---
    this.dataTable = this.ExcecuteRead(query);
    // ---
    foreach (DataRow row in this.dataTable.Rows)
    {
        output += "<tr>";
        // ---
        foreach (object obj in row.ItemArray)
        {
            output += "<td>" + obj.ToString() + "</td>";
        }
        // ---
        output += "</tr>";
    }
    // ---
    output += "</table>";
    // ---
    return output;
}
/// <summary>
/// Returns an HTML table code, with all the rows and the values of the results.
/// </summary>
/// <param name="query">the query string</param>
/// <param name="max">the maximum number of rows to show</param>
/// <returns>returns an HTML code as a string</returns>
public string ExcecuteTableRead(string query, int max)
{
    int i = 0;
    string output = "<table border=\"1\">";
    // ---
    this.dataTable = this.ExcecuteRead(query);
    // ---
    foreach (DataRow row in this.dataTable.Rows)
    {
        if (i < max)
        {
            output += "<tr>";
            // ---
            foreach (object obj in row.ItemArray)
            {
                output += "<td>" + obj.ToString() + "</td>";
            }
            // ---
            output += "</tr>";
        }
        i++;
    }
    // ---
    output += "</table>";
    // ---
    return output;
} 
```

在我的“用户”表中，每个用户都有一个“用户 ID”、“用户名”、“密码”和“登录名”。我的问题是，当用户登录时（我有用户名和密码），我怎样才能得到他的“登录”列的值？如果我可以将它设置为一个 int 会更好（如果重要的话，我已经将“登录”列设置为从“文本”访问“数字”。

编辑：我想做的是更新用户登录的次数。如果有更好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:57:23.220

您可以使用返回对象的 ExecuteScalar() 函数， **或者** 您可以使用 ExecuteRead() 并将
其存储在这样的字符串中

```
string logins= dt.rows[0].itemarray[0].tostring() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:20:51.430

**回答：**

所以，虽然没有人回答我，但我自己已经学会了：

这是代码的全部部分（用户名是用户名，也是一个同名的字符串，登录是列，用户是表）

```
string logins = db.ExcecuteTableRead("SELECT logins FROM users WHERE username='" + username + "'");
logins = logins.Substring(21, 20);
logins = Regex.Match(logins, @"\d+").Value;
int loginsInt = Int32.Parse(logins) + 1;
int a = db.ExecuteQuery("UPDATE users SET logins='" + loginsInt.ToString() + "' WHERE username='" + username + "'"); 
```

# quartz-scheduler - 在 websphere 中设置 Quartz

> ID：13775741
> 
> 赞同：0
> 
> 时间：2012-12-08T08:15:14.670
> 
> 标签：quartz-scheduler

我需要在每天下午 4 点运行一项工作。为此，我通过参考石英示例编写了一个 cron 调度程序（独立类）。

现在我打算在 websphere 上进行部署。这样调度程序就可以在我部署应用程序时启动，并且可以成为项目的一部分。

我没有找到任何关于在应用服务器中设置石英的文档（逐步）。我有以下疑问： 1\. 属性文件中需要哪些所有属性？2.Properties 文件总是需要的？由于石英网站上的示例都没有使用属性文件。3\. 完成上述任务需要哪些配置文件以及放置在哪里？

任何文档或链接将不胜感激。

提前致谢。生命值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:09:22.980

在[quartz 的网站上](http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials)，您会找到配置它所需的一切。

基本上：

*   你需要quartz.properties
*   您需要以某种方式启动调度程序。您只需将[QuartzInitializerListener](http://quartz-scheduler.org/api/2.1.5/org/quartz/ee/servlet/QuartzInitializerListener.html)添加到您的`web.xml`. 您还可以将石英与弹簧集成：

    ```
    <!-- quartz scheduler -->
    <bean id="my-quartz-factory"
       class="org.springframework.scheduling.quartz.SchedulerFactoryBean" >
        <property name="configLocation" value="classpath:spring/quartz.properties" />
    </bean> 
    ```

*   所有这些文件都必须放在你的战争中。

HIH

# python - 抓取 Flipkart.com 的所有手机

> ID：13775742
> 
> 赞同：3
> 
> 时间：2012-12-08T08:15:15.507
> 
> 标签：python, web-scraping, beautifulsoup

我正在尝试从 www.flipkart.com 抓取所有手机。现在，我想做的是我可以从这里刮掉所有手机。

```
http://www.flipkart.com/mobiles/pr?p[]=sort%3Dprice_asc&sid=tyy%2C4io&layout=grid 
```

现在，问题是，在这个网站上，我必须按“**显示更多结果**”才能看到更多结果。但是，我怎样才能使用代码做到这一点？我在 python 中使用 BeautifulSoup 包。

到目前为止我的代码：

```
import bs4
import re
import urllib2
import sys

link = 'http://www.flipkart.com/mobiles/pr?p[]=sort%3Dprice_asc&sid=tyy%2C4io&layout=grid'
response = urllib2.urlopen(link)
thePage = response.read()
soup = bs4.BeautifulSoup(thePage)
allMobiles = soup.find('div', attrs={'id': 'products'}) 
```

我只得到输出的第一页？如何访问其他页面？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T12:19:43.657

您可以使用 get 参数。常规网址是：

http://www.flipkart.com/mobiles/pr?p[]=sort%3Dprice_asc&sid=tyy%2C4io&layout=grid

点击“更多结果”按钮（或向下滚动）后，将使用 AJAX 加载具有以下 url 的下一页：

[http://www.flipkart.com/mobiles/pr?p%5B%5D=sort%3Dprice_asc&sid=tyy%2C4io&layout=grid&start=41&ajax=true](http://www.flipkart.com/mobiles/pr?p%5B%5D=sort%3Dprice_asc&sid=tyy%2C4io&layout=grid&start=41&ajax=true)

网址由以下部分组成：

*   **路径**：[http ://www.flipkart.com/mobiles/pr](http://www.flipkart.com/mobiles/pr)
*   **查询字符串**：
    *   **p[]** : 排序=price_asc
    *   **sid** : tyy,4io
    *   **布局**：网格
    *   ***开始**：41*
    *   **阿贾克斯**：真

如果您想要所有电话，只需增加“开始”参数。像这样的东西：

```
item_count = 600
for i in range(0, item_count, 40):
    link = "http://www.flipkart.com/mobiles/pr?p%5B%5D=sort%3Dprice_asc&sid=tyy%2C4io&layout=grid&ajax=true&start=%d" % (i+1)

    // Do something with the link
    print link 
```

享受，Wout

# php - 如何格式化具有指定列数的表中的数组数据？

> ID：13775744
> 
> 赞同：-1
> 
> 时间：2012-12-08T08:15:44.857
> 
> 标签：php, arrays, html-table

我试图将复选框数组数据放入具有 3 列的表中。

我有一个名为的数组`$a`，其中包含从 A 到 Z 的 26 个数据。

然后我有另一个名为的数组`$b`，其中包含一些数据。

我想创建一个包含 26 个复选框的 3 列表，其中的数据位于 array 中`$a`。

如果数据包含在 中`$b`，则选中其复选框，否则不选中。

以下是我的代码。我不知道如何格式化循环，以便复选框和表格正确显示。请帮忙。

```
<html>
<body>
<table>
<?php

$a = array("A", "B", "C", "D", "E","F","G","H","I","J","K","L","M","N","O","P","Q","R","s","T","U","V","W","X","Y","Z");
$b = array("A","C","G","L","O","P","R","X","Z");
$a_size=count($a);

$tr=$a_size/3;
$reminder=$a_size%3;

if ($reminder!=0)
{
$tr+=1;
}

for($i=0;$i<$tr;$i++)
{
echo "<tr>";
foreach ($b AS $c)
{
    for($j=0;$j<3;$j++)
    {
        if(in_array($c,$b)) 
        {
            echo "<td><input name=\"system[]\" type=\"checkbox\" value=\"$c\" CHECKED> $c </td>";
        } 
        else
        {
            echo "<td><input name=\"system[]\" type=\"checkbox\" value=\"$c\"> $c </td>";
        }
    }
}   
echo "</tr>";
}
?>
</table>                                                
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:26:50.760

我认为你让它有点过于复杂了！以下是我将如何处理这种情况：

```
<?php
    $a = array("A", "B", "C", "D", "E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z");
    $b = array("A","C","G","L","O","P","R","X","Z");
?>
<table>
    <?php foreach ($a as $k => $v) : ?>
    <tr>
        <td><?php echo $v; ?></td>
        <td><input type="checkbox" name="system[]" value="<?php echo $v; ?>" <?php if (in_array($v, $b)) echo 'checked'; ?> /></td>
        <!-- add as many td's here as you like -->
    </tr>
    <?php endforeach; ?>
</table> 
```

这是“翻转”布局的另一种方法。

```
<?php
    $a = array("A", "B", "C", "D", "E","F","G","H","I","J","K","L","M","N","O","P","Q","R","s","T","U","V","W","X","Y","Z");
    $b = array("A","C","G","L","O","P","R","X","Z");
?>
<table>
    <?php for ($i = 0; $i < 3; $i++) : ?>
    <tr>
        <?php foreach($a as $k => $v) : ?>
        <td><?php echo $v; ?><input type="checkbox" name="system[]" value="<?php echo $v; ?>" <?php if (in_array($v, $b)) echo 'checked'; ?> /></td>
        <?php endforeach; ?>
    </tr>
    <?php endfor; ?>
</table> 
```

在我们在聊天中讨论后，我得到了您正在寻找的代码：

```
<table>
    <tr>
    <?php for($i = 1; $i < count($a); $i++) : $j = $i-1; ?>
        <td><?php echo $a[$j]; ?><input type="checkbox" name="system[]" value="<?php echo $a[$j]; ?>" <?php if (in_array($a[$j], $b)) echo 'checked'; ?> /></td>
        <?php if($i % 3 === 0) echo '</tr><tr>'; ?>
    <?php endfor; ?>
    </tr>
</table> 
```

# iphone - 如何根据选择完成选择视图控制器

> ID：13775745
> 
> 赞同：-1
> 
> 时间：2012-12-08T08:15:55.707
> 
> 标签：iphone, ios, ios6, tabbar

这个问题与[***此***](https://stackoverflow.com/questions/13743777/show-all-tabs-with-scrolling-option-on-screen-there-should-be-only-4-tabs)有关。

我正在使用[**KLHorizo​​ntalSelect**](http://www.cocoacontrols.com/platforms/ios/controls/klhorizontalselect)显示带有滚动选项的标签栏。我在情节提要上拖动了新的 7 View Controller。如果我选择流行，应该显示流行的视图控制器。

![KLHorizo​​ntalSelect](../Images/33267cd7a1eab7944dbffce1ed04726e.png)

关于如何完成这项工作的任何想法/建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:24:31.560

这是视图控制器包含的典型示例（您希望一个视图控制器呈现其他视图控制器）。导航控制器和标签栏控制器是内置容器控制器的示例。但是有效的 iOS 5，Apple 为我们其他人打开了遏制。

请参见：

*   在*UIViewController 类参考中*[实现一个容器视图控制器。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)
**   *View Controller Programming Guide*中的[创建自定义容器视图控制器。](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)**   [WWDC 2011 - 实现 UIViewController 包含](https://developer.apple.com/videos/wwdc/2011/?id=102)**

 **顺便说一句，在*View Controller Programming Guide*中隐藏了关于这四种包含方法的微妙说明：

*   `addChildViewController:`
*   `removeFromParentViewController`
*   `willMoveToParentViewController:`
*   `didMoveToParentViewController:`

这里有一些奇怪的相互作用。我原以为我们作为应用程序开发人员要么只做`add...`and/or`remove...`并且 iOS 会为我们处理所有的通知，或者我们必须自己处理`will...`和`did...`通知。但实际上是一半一半。因此，请仔细阅读[添加和删除子项。](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW13)**

# c++ - 这个派生类是如何抽象的？

> ID：13775749
> 
> 赞同：1
> 
> 时间：2012-12-08T08:16:47.690
> 
> 标签：c++, visual-studio-2010, virtual, abstract-class

所以我有一个抽象基类，Collection。我理解它是抽象的，因为它至少声明了一个纯虚函数。

我有一个 Collection 的子类，OrderedCollection，它完全在它自己的头文件中声明了这些函数。然后我在 OrderedCollection 的源文件中定义了那些完全相同的函数。

这是代码：

类 Collection.h

```
class Collection {

public:
virtual Collection& add(int i, int index) = 0;  //pure virtual
virtual Collection& remove(int i) = 0;  //pure virtual
virtual Collection& operator=(const Collection& other)=0;   //pure virtual
virtual int& operator[](int i) = 0; //pure virtual

Collection& iterate(void (*pFunc)());       //Function takes pointer to     function as argument
bool contains(int i);

virtual Collection& copy();

virtual ~Collection();

int size() { return size; }
int capacity() { return capacity; }

//virtual void swap(Collection& other);

protected:
Collection(){}

std::vector collectionVec;
int size;
int capacity;
}; 
```

派生类 OrderedCollection.h：

```
class OrderedCollection : public Collection
{
public:
OrderedCollection& add(int i, int index);
OrderedCollection& remove(int i);
OrderedCollection& operator=(const OrderedCollection& other);
int& operator[](int i);

OrderedCollection();
//OrderedCollection::OrderedCollection(int pFirst, int pLast, int pSize, int     pCapacity, std::vector<int> passedVec);

//OrderedCollection(const OrderedCollection& other);    //Copy constructor 

virtual ~OrderedCollection();

virtual OrderedCollection& copy(OrderedCollection& passedCollection);

protected:
//int* first;
//int* last;

int first;
int last;

OrderedCollection& grow();      //Utility Function
}; 
```

aaand OrderedCollection.cpp：

```
#include "OrderedCollection.h"

OrderedCollection& OrderedCollection::add(int i, int index){
if(size == capacity){       //If vector is full

}

return *this;
}

OrderedCollection& OrderedCollection::remove(int i){

if(first <= last){
    for(int j = first; j <= last; j++){
        if(collectionVec.at(j) == i){
            collectionVec.erase(j);
            last--;
        }
    }
}
/*for(int j = 0; j < collectionVec.size(); j++){
if(collectionVec.at(j) == i)

} */

return *this;
 }

OrderedCollection& OrderedCollection::operator=(const OrderedCollection& other){

if (this != &other) // protect against invalid self-assignment
{
    // 1: allocate new memory and copy the elements
    std::vector<int> *new_vector = new std::vector<int>(other.capacity);
    std::copy(other.collectionVec, other.collectionVec + other.capacity,     new_vector);

    // 2: deallocate old memory
    collectionVec.clear();

    // 3: assign the new memory to the object
    collectionVec = *new_vector;
    size = other.size;      //wtf
    capacity = other.capacity;      //wtf

    delete new_vector;
}
// by convention, always return *this
return *this;

}

int& OrderedCollection::operator[](int i){      //is return type correct? It makes     more sense to have a return type of int or int&, right?

int temp = 0;

if(first <= last){
    if(collectionVec.at(first + i) != NULL){    //Need to redo this
        return collectionVec.at(first + i);
    }
}
return temp;
}

OrderedCollection::OrderedCollection() : Collection()
{
//first = &collectionVec.at(2);
//last = &collectionVec.at(1);

//Crossed at construction
first = 2;
last = 1;
}

OrderedCollection::~OrderedCollection(void)
{
//first = NULL;
//last = NULL;
collectionVec.clear();
}

OrderedCollection& OrderedCollection::grow(){

    int newFirst = capacity / 2;
    std::vector<int> *new_vector = new std::vector<int>(2 * capacity);
    std::copy(collectionVec, collectionVec+size, new_vector->begin() + newFirst);       //Want to return iterator pointing to 
    collectionVec = new_vector;
    first = newFirst;
    last = first + size;
    capacity = collectionVec.size;

    delete new_vector;

    return *this;
}

OrderedCollection& OrderedCollection::copy(OrderedCollection& passedCollection){
OrderedCollection* temp =  new OrderedCollection()   //ERROR is here. VS highlights constructor method

return *this;
} 
```

现在，当我尝试在此处的最后一个 copy() 中创建 OrderedCollection 类型的值标识符时，问题就来了。据我了解，如果类是抽象的，我不应该被允许这样做（很明显它是抽象的，VS 也这样告诉我）。但是还有另一个问题；当我尝试创建一个新的 OrderedCollection 对象并将其分配给 temp 时，我得到了同样的错误。根据VS，上述初始化很好（IDE没有抱怨，尽管它对我没有任何帮助）。但我不明白为什么它把这个类视为抽象的。

如果我错了，请纠正我，但这应该涵盖确保这个派生类不是抽象的所有基础。

*   派生类中没有声明纯虚函数
*   基类中的所有纯虚函数都已在派生类中被覆盖。
*   所有被覆盖的函数都与最初在基类中声明的相关函数参数签名和返回类型相匹配。

确切的错误是，错误：不允许抽象类类型“OrderedCollection”的对象...这是当我尝试在底部的此 copy() 方法中将指针对象分配给 OrderedCollection 的新实例时。

让我在下面发布我的 Collection.cpp 文件：

```
#include "Collection.h"

Collection::Collection()
{
size = 0;
capacity = 4;
collectionVec.resize(capacity);
}

Collection::~Collection()
{

}

Collection& Collection::iterate(void (*pFunc)()){       

return *this;
}

bool contains(int i){

return true;
} 
```

编辑：添加了 Collection.cpp 文件并更新了我对函数参数不匹配所做的一些修复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T08:22:12.197

```
virtual Collection& operator=(const Collection& other)=0; 
```

在子类中没有被覆盖，因为：

```
OrderedCollection& operator=(OrderedCollection& other); 
```

有不同的签名。

不同之处不仅在于“const”，还在于实际类型。重写的类也必须采用 Collection，而不是派生的 OrderedCollection。

# mysql - 在 cakephp 中使用 AES_ENCRYPT 和 AES_DECRYPT

> ID：13775751
> 
> 赞同：0
> 
> 时间：2012-12-08T08:17:05.100
> 
> 标签：mysql, cakephp

不幸的是，我必须使用相当过时的 cake php 版本，即 1.1。我需要在其中使用 mysql AES_ENCRYPT 和 AES_DECRYPT，但我无法这样做。

我试图这样做

```
$this->data['xx']['password'] = `AES_ENCRYPT($this->data['xx']['password'],$this->pass)`; 
```

但是要知道是否有用，因为它不会对其进行加密，因此 AES_ENCRYPT 不会发挥作用。有人请给我一个提示。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:24:20.983

如上所述，您应该对密码进行哈希处理。

[http://book.cakephp.org/1.3/en/The-Manual/Core-Components/Authentication.html](http://book.cakephp.org/1.3/en/The-Manual/Core-Components/Authentication.html)

看看该功能是否可用，因为它对 cake 来说是不可或缺的，所以如果它在 1.1 中不存在，将会感到惊讶。否则使用存储在系统中的盐并手动散列它们。

# ios - 在数据源之前绘制的objective c table view cell

> ID：13775759
> 
> 赞同：0
> 
> 时间：2012-12-08T08:18:54.820
> 
> 标签：ios, uitableview, nsurlconnection

我的 UITableview 单元格的数据源位于：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)conn {

    // We are just checking to make sure we are getting the XML 
    NSString *xmlCheck = [[[NSString alloc] initWithData:xmlData encoding:NSWindowsCP1252StringEncoding] autorelease];
   // NSLog(@"xmlCheck2 = %@", xmlCheck);

    TFHpple *xpathParser = [[TFHpple alloc] initWithHTMLData:xmlData];
    for (int i=2; i<33; i++) {
        NSString *link=[NSString stringWithFormat:@"/html/body/table/tr[%d]/td",i];

        NSArray *elements = [xpathParser searchWithXPathQuery:link];

        NSString *date = [NSString stringWithFormat:@"%@, %@",[elements[5]text],[elements[1]text]];
        [times addObject:date];
        [names addObject:[elements[2]text]];
        [types addObject:[elements[3]text]];
        [places addObject:[elements[4]text]];

        NSLog(@"%@", elements);
        NSLog(@"%@", [elements[0] text]);
    }
} 
```

但是绘制单元格的方法在连接完成之前被调用，即使连接是在我绘制单元格之前启动的。如何延迟绘制单元格方法或确保在绘制单元格之前完成连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:49:06.380

提供单元格信息的方法只有在您告诉它有准备显示的行时才会被调用。如果你告诉它正确的东西`tableView:numberOfRowsInSection:`——如果连接没有完成，它可能是 0——不应该有任何不正确的调用`tableView:cellForRowAtIndexPath:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:41:24.253

只有在完成加载数据后，您才需要设置 tableview 的数据源和委托属性。如果您从 IB 或 Storyboard 设置了 tableview 的委托和数据源，请将其删除。完成加载数据后，设置 tableview 的委托和数据源属性。并重新加载表。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)conn {

    // We are just checking to make sure we are getting the XML 
    NSString *xmlCheck = [[[NSString alloc] initWithData:xmlData encoding:NSWindowsCP1252StringEncoding] autorelease];
   // NSLog(@"xmlCheck2 = %@", xmlCheck);

    TFHpple *xpathParser = [[TFHpple alloc] initWithHTMLData:xmlData];
    for (int i=2; i<33; i++) {
        NSString *link=[NSString stringWithFormat:@"/html/body/table/tr[%d]/td",i];

        NSArray *elements = [xpathParser searchWithXPathQuery:link];

        NSString *date = [NSString stringWithFormat:@"%@, %@",[elements[5]text],[elements[1]text]];
        [times addObject:date];
        [names addObject:[elements[2]text]];
        [types addObject:[elements[3]text]];
        [places addObject:[elements[4]text]];

        NSLog(@"%@", elements);
        NSLog(@"%@", [elements[0] text]);
    }

    [tableView setDelegate:self];// set delegate, datasource & reload data.
    [tableView setDatasource:self];
    [tableView reloadData];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T10:21:50.340

这就是 ASYNCHRONOUS 网络的重点 :) 您的主线程不会等待它完成！*同步在那里，但它很糟糕*

让您的 UI 处理数据尚不可用的情况。

a) 将 tableview 设置为隐藏，显示一个旋转的轮子，并在调用 connectionDidFinish 时显示并重新加载表格

模拟代码

```
-viewWillAppear {  
    table.hidden = YES;  
    spinningActivity.hidden = NO;  
    networkConnection start];
 }

-connectionDidFinish {
    spinningActivity.hidden = YES;
    [table reloadData];
    table.hidden = NO; 
} 
```

# synchronization - 条件变量信号

> ID：13775761
> 
> 赞同：0
> 
> 时间：2012-12-08T08:19:12.840
> 
> 标签：synchronization, pthreads, condition-variable

[在此处](http://docs.oracle.com/cd/E19963-01/html/821-1601/sync-21067.html)的此链接中，在增量函数中，条件变量在实际增加计数（从零开始）之前发出信号。增加计数后是否不应该调用信号？或者，直到在 increment_function 中释放互斥锁后，decrement_count 函数中的等待调用才会返回？

```
pthread_mutex_t count_lock;
pthread_cond_t count_nonzero;
unsigned count;

decrement_count()
{
    pthread_mutex_lock(&count_lock);
    while (count == 0)
        pthread_cond_wait(&count_nonzero, &count_lock);
    count = count - 1;
    pthread_mutex_unlock(&count_lock);
}

increment_count()
{
    pthread_mutex_lock(&count_lock);
    if (count == 0)
        pthread_cond_signal(&count_nonzero);
    count = count + 1;
    pthread_mutex_unlock(&count_lock);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:23:58.697

由于互斥锁，在信号之前或之后执行都没有关系，因为在互斥锁解锁之前无法读取变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T06:13:41.337

正如[Troy 所说](https://stackoverflow.com/a/13775785/134633)，在递增之前发出条件变量的信号`counter`很好，因为这些操作都是在持有互斥锁的情况下完成的。

但是，如果多个线程可以在`decrement_count()`. 考虑两个线程在 中挂起的情况`pthread_cond_wait()`，其中`count == 0`. 现在，`increment_count()`连续调用两次（可能由同一个线程） -`count`递增到`2`，因为它应该是，但条件变量只发出一次信号。这意味着只有*一个*等待的线程被唤醒，而另一个将无限期地等待，即使它`counter`是非零的。

可以通过多种方式修复此错误：

*   替换`pthread_cond_signal()`为`pthread_cond_broadcast()`in `increment_count()`; 或者
*   无条件呼唤`pthread_cond_signal()`；`increment_count()`或者
*   在 中递减后调用`pthread_cond_signal()`if`count`非零`decrement_count()`。

一般来说，请记住使用`pthread_cond_signal()`代替`pthread_cond_broadcast()`是一种优化，您应该仔细分析算法在使用时是否仍然正确。

# openerp - 离线保存数据openerp的位置

> ID：13775773
> 
> 赞同：0
> 
> 时间：2012-12-08T08:21:44.027
> 
> 标签：openerp

当浏览器在 openerp 中脱机时，限制是什么？数据存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:08:22.540

这并不完全正确。一般来说，OpenERP 不会离线存储任何数据。但是模块可以实现这种类型的功能。具体来说，销售点模块使用 HTML5 [LocalStorage](http://www.w3schools.com/html/html5_webstorage.asp)实现了这一点。

在`addons/point_of_sale/static/src/js/db.js`您可以阅读：

> PosLS 是基于 LocalStorage 的销售点数据库实现，它在少数产品上表现更好，但不能扩展到超过 500 种产品。

# security - 如何从 Internet Explorer 访问 Windows 证书存储区？

> ID：13775775
> 
> 赞同：1
> 
> 时间：2012-12-08T08:22:02.860
> 
> 标签：security

我有一个 Intranet Web 应用程序，我需要在其中签署位于服务器端的 PDF 文档。签名者必须是当前从给定网页发出签名命令的最终用户，并且他的数字签名/证书位于他的智能卡中。

根据我收集到的信息，当用户将他的智能卡插入读卡器时，信息会填充到 Windows Key Store。我对吗？所以我需要做的是从 Internet Explorer 以某种方式从 Windows 证书存储中读取该信息。我知道 javascript 无法获取该信息。我也知道 java 可以做到，但如果我可以避免使用 java applet，我会的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:07:55.180

### **它不可能这样做。**

如果要签署文档，浏览器必须向服务器发送包含私钥的证书。如果您可以通过浏览器访问 Windows 证书存储，那将是一个严重的安全问题，因为攻击者可以读取所有证书私钥。

**根据您所描述的基本思想，我建议的另一件事**

建立一个安全的身份验证系统，用户可以使用表单或 Windows 身份验证登录到 Intranet 应用程序。

在服务器端为每个用户持有一个证书。如果用户随后上传 PDF，则使用用户证书对其进行签名并提供下载。

**请考虑拥有一个本地应用程序**

如果用户在本地拥有智能卡，为什么不让本地应用程序签署 PDF？看到您在本地拥有所需和想要的一切。为什么要推送到服务器端？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:05:22.827

签名多久发生一次？也许考虑使用 Java Web 启动应用程序（某种妥协 - 取决于您的安全策略）来进行签名？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-13T13:17:41.997

您是否看过 ASSP 提供的可能性？值得一试。

# android - 切换到 Android 中的另一个选项卡后，选项卡的意图不会停止

> ID：13775777
> 
> 赞同：2
> 
> 时间：2012-12-08T08:22:31.050
> 
> 标签：android, android-intent, tabactivity, android-tabactivity

我有两个标签来显示两个不同的电视频道，但是当我在标签之间切换时，它们的活动（意图）会继续运行，并且它们会混淆。如何确保一个频道在新频道开始之前停止播放？

下面是 Activity 类的代码：

```
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.videoview);
    extras = getIntent().getExtras();
    progressDialog = ProgressDialog.show(TvMenuOne.this, "TV1",
            "Please Wait..", true, true);
    PlayVideo();
}

private void PlayVideo() {
    try {
        videoView = (VideoView) findViewById(R.id.surface_view);
        if(extras.getString("id").equals("one")){
            videoView.setVideoPath(pathL);
        }
        if(extras.getString("id").equals("two")){
            videoView.setVideoPath(pathM);
        }

        videoView.setVideoQuality(MediaPlayer.VIDEOQUALITY_HIGH);
        videoView.setMediaController(new MediaController(TvMenuOne.this));

        videoView.setOnPreparedListener(new OnPreparedListener() {

            public void onPrepared(MediaPlayer mp) {
                progressDialog.dismiss();
                videoView.start();
            }
        });

    } catch (Exception e) {
        progressDialog.dismiss();
        System.out.println("Video Play Error :" + e.toString());
        finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:26:13.700

**嘿，我想我得到了解决方案::**

在选项卡之间切换时执行此操作。

```
Intent intent= new Intent().setClass(this,SecondClass.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

**然后这样做...**

*`tabHost.addTab(tabHost.newTabSpec("ABCD") .setIndicator(tabIndicator(...).setContent(intent));`*

这意味着每当您从选项卡切换时，**Intent.FLAG_ACTIVITY_CLEAR_TOP**都会为您创建新视图...

干杯...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T08:53:39.423

我已经通过覆盖 onPause 方法解决了这个问题，看起来活动在显示新意图之前进入了暂停模式。

```
@Override
public void onPause() {
    super.onPause();
    videoView.stopPlayback();
    videoView.setVisibility(2);
} 
```

# ruby-on-rails - 使用 >（大于）查询返回记录 >=（大于或等于）

> ID：13775779
> 
> 赞同：0
> 
> 时间：2012-12-08T08:22:44.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有人可以解释为什么以下查询：

```
> modified_after = DateTime.parse "2012-12-06T17:40:36+00:00"
> Contact.unscoped.where("updated_at > :time OR deleted_at > :time", {:time => modified_after}) 
```

还返回`updated_at`等于 的记录`modified_after`：

```
Contact Load (0.4ms)  SELECT "contacts".* FROM "contacts" WHERE (updated_at > '2012-12-06 17:40:36' OR deleted_at > '2012-12-06 17:40:36') => [
#<Contact id: 28, first_name: "John", last_name: "A", deleted_at: nil, created_at: "2012-12-06 17:40:36", updated_at: "2012-12-06 17:40:36", email: nil, notes: nil>, 
#<Contact id: 29, first_name: "Mark", last_name: "B", deleted_at: nil, created_at: "2012-12-06 17:40:36", updated_at: "2012-12-06 17:40:36", email: nil, notes: nil>,
 #<Contact id: 30, first_name: "Michael", last_name: "C", deleted_at: nil, created_at: "2012-12-06 17:40:36", updated_at: "2012-12-06 17:40:36", email: nil, notes: nil>
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:41:32.613

这些时间可能比查询时间大几毫秒。你运行的是什么版本的 Rails？查看这个错误，看看它是否相关：[https ://github.com/rails/rails/issues/7385](https://github.com/rails/rails/issues/7385)

# python - Django 1.5b1：执行 django-admin.py 导致“No module named settings”错误

> ID：13775780
> 
> 赞同：19
> 
> 时间：2012-12-08T08:22:47.523
> 
> 标签：python, django, macos, django-1.5

我最近安装了 Django-1.5b1。我的系统配置：

*   操作系统 10.8
*   Python 2.7.1
*   虚拟环境 1.7.2

当我调用**django-admin.py**命令时，出现以下错误

```
(devel)ninja Django-1.5b1: django-admin.py 
Usage: django-admin.py subcommand [options] [args]

Options:
  -v VERBOSITY, --verbosity=VERBOSITY
                        Verbosity level; 0=minimal output, 1=normal output,
                        2=verbose output, 3=very verbose output
  --settings=SETTINGS   The Python path to a settings module, e.g.
                        "myproject.settings.main". If this isn't provided, the
                        DJANGO_SETTINGS_MODULE environment variable will be
                        used.
  --pythonpath=PYTHONPATH
                        A directory to add to the Python path, e.g.
                        "/home/djangoprojects/myproject".
  --traceback           Print traceback on exception
  --version             show program's version number and exit
  -h, --help            show this help message and exit
Traceback (most recent call last):
  File "/Users/sultan/.virtualenvs/devel/bin/django-admin.py", line 5, in <module>
    management.execute_from_command_line()
  File "/Users/sultan/.virtualenvs/devel/lib/python2.7/site-packages/django/core/management/__init__.py", line 452, in execute_from_command_line
    utility.execute()
  File "/Users/sultan/.virtualenvs/devel/lib/python2.7/site-packages/django/core/management/__init__.py", line 375, in execute
    sys.stdout.write(self.main_help_text() + '\n')
  File "/Users/sultan/.virtualenvs/devel/lib/python2.7/site-packages/django/core/management/__init__.py", line 241, in main_help_text
    for name, app in six.iteritems(get_commands()):
  File "/Users/sultan/.virtualenvs/devel/lib/python2.7/site-packages/django/core/management/__init__.py", line 108, in get_commands
    apps = settings.INSTALLED_APPS
  File "/Users/sultan/.virtualenvs/devel/lib/python2.7/site-packages/django/conf/__init__.py", line 52, in __getattr__
    self._setup(name)
  File "/Users/sultan/.virtualenvs/devel/lib/python2.7/site-packages/django/conf/__init__.py", line 47, in _setup
    self._wrapped = Settings(settings_module)
  File "/Users/sultan/.virtualenvs/devel/lib/python2.7/site-packages/django/conf/__init__.py", line 132, in __init__
    raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'settings' (Is it on sys.path?): No module named settings 
```

有没有人有同样的错误？任何人都可以提供建议或帮助吗？

谢谢，

苏丹

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-20T14:02:45.907

我在开始一个新项目时遇到了同样的问题。我通过在命令提示符下给出这个命令解决了这个问题：

```
export DJANGO_SETTINGS_MODULE= 
```

通过这种方式，我取消了指向“ `settings`”文件的变量（使用 发现`env | grep DJANGO_SETTINGS_MODULE`）我在开始使用*virtualenv之前设置*

取消设置变量后，`django-admin.py`脚本就像一个魅力！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-21T06:03:19.197

I've had the same issue as you, and I haven't come up with a good fix aside from prepending my project folder to the PYTHONPATH like this:

```
export PYTHONPATH="/absolute/path/to/django/project/folder:$PYTHONPATH" 
```

where my `<project>` is located at `/absolute/path/to/django/project/folder/<project>`. I add that `export` command to the end of my `env/bin/activate` script so it happens every time I initialize the virtualenv.

The only difference between our two situations is that I use multiple settings files instead of a single `settings.py` module.

You can also call `django-admin.py` from the folder containing your Django project like so:

```
python ~/.virtualenvs/devel/bin/django-admin.py <command> 
```

so that it recognizes your current working directory as part of the path.

Hope that makes sense. It's kind of clumsy to explain which makes it hard to search for an answer.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T03:53:40.683

也许您的问题与此有关： [Wrong python path in script header](https://stackoverflow.com/a/10756446/726230)

如果你想做除了在你的 venv 中创建一个新的 django 项目之外的任何事情，你应该调用`python manage.py`（当然，`whereis python`应该返回你的 venv 可执行文件）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T04:01:13.377

不要从 django 库的直接路径运行脚本；从任何其他路径运行它。您似乎`cd`进入了安装 django 的目录（或您下载并扩展它的目录），然后从那里运行命令。

所以试试这个：

```
(devel)ninja Django-1.5b1: cd 
(devel)ninja: django-admin.py startproject foo 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-08T09:52:59.070

你确定你是从 virtualenv django 安装启动 django-admin 吗？也许 path/to/virtualenv/bin/django-admin.py

# php - 共享内存（shmop）块系统ID（PHP）是否有任何限制

> ID：13775781
> 
> 赞同：2
> 
> 时间：2012-12-08T08:23:34.757
> 
> 标签：php

我正在创建一个必须检查（计数）用户（写入密集型）请求的应用程序。

'shmop_open(MY_INT_USER_ID, ... )' 返回共享访问的系统 ID，但我不确定，64 位操作系统上的 shmop 系统 ID 是否有任何限制？或者这是否会导致问题，例如碰撞？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T04:22:59.243

所以我最初写了一篇关于如何[在 Linux 中更改共享内存设置](http://rwitkop.com/VistA/ConfigureSysctl4Cache.html)的大文章，但后来我重新阅读了你的问题，发现你在询问传递给[`shmop_open`](http://php.net/shmop_open).

“系统 ID”只是一个 32 位整数，用作密钥。它没有魔法，唯一真正的限制是它不是零并且低于 32 位。是的，即使在运行 64 位 PHP 的 64 位系统上也是如此。这是一个 POSIX 的事情。

请注意，没有命名空间或有效的安全控制。假设您已相应地设置了权限，知道密钥的外部程序能够访问它。共享内存不适用于共享主机。

# c++ - 面试难题：用有限的内存对一百万个数字输入进行排序

> ID：13775784
> 
> 赞同：1
> 
> 时间：2012-12-08T08:23:57.070
> 
> 标签：c++, c, algorithm, sorting, data-structures

我尝试使用外部排序来回答这个问题，但面试官回答说复杂度很高 nn(log(n)) 即 n 平方 *logn。有没有更好的选择。

为简化问题：假设我们有 1000 个元素要排序，仅分配给 100 个元素的空间。什么是比外部排序花费更少时间的最佳算法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T08:31:13.877

我不知道你（或面试官）指的是哪种外部类型，但是

我的建议是 10 路（在您的情况下）合并：

*   将文件拆分为 MAX_MEM 大小的块（100 个元素）
    *   这是`O(1)`
*   对内存中的每个块进行排序并存储为单独的文件
    *   这是`O((n/max_mem) * (max_mem) log(max_mem)))`=`O(n log(max_mem))`
*   打开所有块作为元素流
*   通过在每个步骤中选择最低元素来合并所有流。
    *   这是`O(n log(n/max_mem))`使用 minHeap 或琐碎`O(n^2/max_mem)`（在实践中可能更快）
*   删除块

关于计算，这是`O(n (log(max_mem)+log(n/max_mem)))`=`O(n log(n))`

关于磁盘 I/O，如果所有的合并都是一次性完成的，那么这就是`2*n`reads only 和`2*n`writes *only*。更一般地说，它是`(1+[depth of the merge tree])*n`

所有写入都是顺序的。第一次读取是顺序的，第二次是顺序的，从 10 个文件交错。

如果有更多数据，则需要重复或递归合并（每个块 100 个，然后重复选择 N 个块）。此时，正如@amit 的回答中所述，将拆分+排序步骤替换为替换/选择是值得的，尤其是当数据已经几乎排序时（您可能会完全避开合并步骤）。

请注意，较高的 N 可能会增加计算量（非常轻微，如果您使用正确的结构），但会显着减少磁盘 I/O 的数量（最多达到一定数量；如果一次合并太多块，您可能会用完读取缓冲区的内存，导致不必要的读取）。磁盘 I/O 很昂贵，而 CPU 周期则不然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T09:05:33.687

也许面试官希望你问：这些号码是 J. Bentley （[Cracking the Oyster](http://www.cs.bell-labs.com/cm/cs/pearls/cto.html)）提到的唯一七位数电话号码吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-08T08:48:44.937

这样做的标准方法是[外部排序](http://en.wikipedia.org/wiki/External_sorting)。

在外部排序中 - 不仅具有`O(nlogn)`复杂性很重要 - 尽可能减少磁盘读取/写入，并使最多的读取和写入顺序（而不是随机）也很重要 - 因为磁盘访问效率更高当按顺序完成时。

这样做的标准方法确实是 k-way 合并排序，正如@JanDvorak 所建议的那样，但是我打算纠正的建议有一些错误和补充：

1.  首先，对输入进行[RS（替换选择）](http://web.eecs.utk.edu/~bvz/bvz/classes/cs302/notes/replacement_selection.html)会减少初始“运行”的次数（递增序列的数量），因此通常会减少后期合并排序所需的迭代总数。
2.  我们需要内存来缓冲（读取和写入输入） - 因此，对于内存大小 M 和文件大小 M*10，我们不能进行 10 路合并 - 这将导致大量读取磁盘（读取每个元素，而不是块）。 合并的“顺序”的
    标准公式是（其中 M 是您的内存大小，并且是每个“缓冲区”（通常是磁盘块）的大小。`k``M/(2b)``b`
3.  每个合并排序步骤都是通过`b`从先前迭代中生成的每个“运行”中读取条目来完成的 - 填充`M/2`内存。其余内存用于“预测”（允许以最少的 IO 等待进行连续工作）——从运行中请求更多元素，并用于输出缓冲区——以保证块中的顺序正确。
4.  `log_k(N/(2M))`使用这种方法的迭代总数`k`是运行次数（先前计算的），`M`是内存`N`的大小，是文件的大小。每次迭代需要对整个文件进行 1 次顺序读取和 1 次顺序写入。

* * *

也就是说 - file_size/memory_size 的比率通常远大于 10。如果您只对 10 的比率感兴趣，则可能会发生局部优化，但这不适用于更常见的情况`file_size/memory_size >> 10`

# oracle - 将日期与预定义格式 pl sql 进行比较

> ID：13775791
> 
> 赞同：0
> 
> 时间：2012-12-08T08:24:45.470
> 
> 标签：oracle, plsql

我有一个函数应该接受格式的日期`DD-MON-YY`并应该以格式显示`DD-MM-YYYY`。我创建的功能是：

```
create or replace function PRINT_IT(abc date)
RETURN DATE
IS
  v_date DATE;
BEGIN
  if regexp_like(abc,'^[0-9]{2}-[a-z]{3}-[0-9]{2}$')
  then
    v_date := TO_DATE(abc,'DD-MM-YYYY');
  else
    dbms_output.put_line('wrong format');
  end if;
  dbms_output.put_line('The date is ');
  return v_date;
END PRINT_IT; 
```

但返回的值总是错误的日期格式！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:38:04.780

不，这不对。您的日期以[NLS_DATE_FORMAT](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams145.htm#REFRN10119)指定的格式输出。如果您想以不同方式*显示*，然后为您的会话更改此参数：

```
alter session set nls_date_format = 'dd-mm-yyyy' 
```

注意*显示*字。这就是全部。这就是你应该考虑做的所有事情。日期的显示方式不会影响它的存储方式。

更通常的情况下，您可以使用带有适当格式模型的[TO_CHAR()](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions200.htm#SQLRF06129)`to_char(my_date, 'dd-mm-yyyy')`来显示日期，即. 它将不再是一个日期，而是一个角色。

正如您所说，您似乎不想显示日期。你从你的函数中返回值，在这种情况下，我会坚持你所拥有的。您只需将日期从数据库中取出时，将其转换为适当的格式以显示，始终将其作为日期存储在数据库中。这反过来意味着它存储在数据库中时的样子并不重要，它实际上是一个日期。

# ruby - Ruby 元编程中一个令人困惑的案例

> ID：13775794
> 
> 赞同：4
> 
> 时间：2012-12-08T08:25:50.693
> 
> 标签：ruby, class, metaprogramming

我是 Ruby 元编程的初学者。在 irb 中练习我的代码时，我遇到了这个问题。

```
class A; end
a = A.new
b = class << a; self; end

b.instance_eval { def foo; puts 'foo'; end }
# => works for b.foo

b.instance_eval { define_method :bar do; puts 'bar'; end }
# => WHY this one works for a.bar rather than b.bar 
```

最后一个代码片段让我很困惑。

* * *

感谢您的具体回答，但也许我没有清楚地解释我的困惑。我真正想了解的是为什么`define_method`在这些情况下表现如此不同，这里：

```
class A
  def foo1
    p 'foo1 from A'
  end 

  define_method :bar1 do
    p 'bar1 from A'
  end 
end

a = A.new
a.foo1 # => 'foo1 from A'
a.bar1 # => 'bar1 from A'

a.instance_eval { def foo2; p 'foo2 from a.metaclass'; end }
a.foo2 # => 'foo2 from a.metaclass'
a.instance_eval { define_method :bar2 do; p 'bar2 from a.metaclass'; end }
# => NoMethodError: undefined method `define_method' for #<A:0x000000016a2e70>

aa = class << a; self; end
aa.instance_eval { def foo3; p 'foo3 from a.metaclass.metaclass'; end }
aa.foo3 # => 'foo3 from a.metaclass.metaclass'
aa.instance_eval { define_method :bar3 do; p 'bar3 from a.metaclass.metaclss'; end }
aa.bar3 # => NoMethodError: undefined method `bar3' for #<Class:#<A:0x000000016a2e70>>
a.bar3 # => 'bar3 from a.metaclass.metaclss' 
```

我知道这不会出现在日常编码中，但我想让我的想法清晰。

* * *

做一个结论：

```
aa = class << a; self; end 

aa.instance_eval { def foo; puts 'foo..'; end }

# defines a singleton-method for aa
aa.foo # => 'foo...'

aa.instance_eval { define_method :bar do; puts 'bar..'; end }
# equals
aa.class_eval { def bar; puts 'bar..'; end }

# both define a singleton-method for a,
# as define_method and class_eval both define instance_method
a.bar # => 'bar...' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:36:55.673

除了所有其他评论：

[来自 Pickaxe] 方法 Object#instance_eval 允许您将 self 设置为任意对象，使用 [self] 评估块中的代码，然后重置 self。
并且 Module#define_method ：在接收器中定义一个实例方法[self，必须是（匿名）类或模块]。

```
singleton_class_of_object_a = aa = class << a; self; end
aa.instance_eval { def foo3; puts "foo3 from singleton class of a, self=#{self}"; end }
aa.foo3 # => foo3 from singleton class of a, self=#<Class:#<A:0x007fc2e4049e68>>
aa.instance_eval do
    puts "about to define_method :bar3 in self=#{self}"
    define_method :bar3 do; puts "bar3 from singleton class of a, self=#{self}"; end
end # => about to define_method :bar3 in self=#<Class:#<A:0x007fc2e4049e68>>
a.bar3 # => bar3 from singleton class of a, self=#<A:0x007fc2e4049e68> 
```

`define_method :bar3`在 singleton_class_of_object_a（匿名类，见下文）的上下文中执行，因此定义了该类的实例方法，因此 bar3 成为 a 的单例方法。正如我在之前的回答中已经说过的，它相当于直接在对象上定义：

```
def a.bar4; puts 'bar4 from singleton class of a' end
a.bar4 # => bar4 from singleton class of a

p a.singleton_methods.sort # => [:bar3, :bar4, :foo2]
p a.methods(false).sort # => [:bar3, :bar4, :foo2] 
```

之后`a = A.new`，实例**a**的字段类指向类**A。**
使用`class << a`or `def a.bar4`，Ruby 创建了一个匿名类，实例**a**的字段类现在指向这个**匿名类**，然后从那里指向**A。**
在此上下文中定义的方法使用`def`或`define_method`进入匿名类的方法表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T08:45:31.597

因为在你的情况下`def foo`充当`def self.foo`
和`define_method :bar`充当`def bar`。

发生这种情况的原因**`instance_eval`是创建了类方法**。

您的代码与以下内容相同：

```
class << a
  def self.foo
    puts 'foo'
  end

  def bar
    puts 'bar'
  end
end 
```

所以该`foo`方法是在`a`的 eigen 类中定义的
，并且该`bar`方法是在`a`其自身内部定义的。

如果您需要`a.foo`工作，请`class_eval`改用。

它将起作用，因为**`class_eval`创建实例方法**：

```
b.class_eval { def foo; puts 'foo'; end }
a.foo
# => foo 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T15:09:23.740

```
b.instance_eval { def foo; puts 'foo'; end }
b.instance_eval { puts "self in b.instance_eval block=#{self}" }
#=> self in b.instance_eval block=#<Class:#<A:0x007fe3c204d000>>
b.foo #=> foo 
```

您正在 A 的单个实例的单例类中定义一个方法。它看起来非常复杂。而是直接在实例上定义一个单例方法：

```
cat = String.new("cat")
def cat.speak
    'miaow'
end
cat.speak #=> "miaow" 
cat.singleton_methods #=> ["speak"] 
```

`class <<`符号如

```
singleton_class_of_A = eigenclass_of_A = class << A; self; end 
```

通常用于定义“类方法”（实际上是A的单例方法），或类的实例变量：

```
class B
    class << self
        def my_class_method_of_B
            puts "my_class_method_of_B"
        end
        @my_first_variable_of_class_B = 123
        attr_accessor :my_second_variable_of_class_B
    end
end

B.my_class_method_of_B
print 'singleton methods of B : '
p B.singleton_methods
print 'instance variables of B : '
p B.instance_variables
print 'class variables of B : '
p B.class_variables
print '"singleton variables" of B : '
class << B; p instance_variables end 
```

输出 ：

```
my_class_method_of_B
singleton methods of B : [:my_class_method_of_B, :my_second_variable_of_class_B, :my_second_variable_of_class_B=]
instance variables of B : []
class variables of B : []
"singleton variables" of B : [:@my_first_variable_of_class_B] 
```

如您所见，这件事并不容易，您不妨看看[http://pragprog.com/book/ppmetr/metaprogramming-ruby](http://pragprog.com/book/ppmetr/metaprogramming-ruby)

# java - 访问另一个类的数组变量

> ID：13775797
> 
> 赞同：0
> 
> 时间：2012-12-08T08:26:11.467
> 
> 标签：java, arrays, scope

可以说我有一个课程如下：

```
public class class1{

   private int[] array1;

   public class1(){
      array1 = new int[10];
      }

   public int[] getArray(){
      return array1;
      }
} 
```

如果我在另一个类或 main 中创建此类的实例并使用 getArray() 方法将数组分配给上层类中的另一个变量，然后在那里修改数组的值，那么原始数组值会在第一个类也被修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:28:06.673

> 第一类中的原始数组值也会被修改吗？

是的，它将被修改，因为您在调用者中获得的不是数组本身的副本，而是您获得对原始数组对象的引用的副本。

而且，如果您使用任何引用修改数组，则更改将反映在指向该数组的所有引用上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:29:05.753

是的，原始数组值也将被修改。

当您从方法返回数组的引用时。引用只不过是指向对象地址的指针。当你从方法中返回它时，它被分配给另一个引用。如果您使用该引用修改任何东西，您实际上是在修改相同的数组，即原始数组。

# objective-c - 离开视图后无法输入 UITextfield

> ID：13775798
> 
> 赞同：1
> 
> 时间：2012-12-08T08:26:15.400
> 
> 标签：objective-c, ios, uitextfield

我有一个`UIScrollView`包含许多`UITextField`控件的视图。如果在输入任何`UItextField`控件后，我单击其他位置然后导航到另一个视图，一旦我返回相同的视图，我就无法再输入`UITextField`.

我也为`UITextField`视图上的每个控件提供了此代码。

```
//self.QuestionAnswer = UITextField - This is the control with the issues.
[self.QuestionAnswer addTarget:self action:@selector(SaveQuestionAnswer:) forControlEvents:UIControlEventEditingDidEndOnExit];
[self.QuestionAnswer addTarget:self action:@selector(SaveQuestionAnswer:) forControlEvents:UIControlEventEditingDidEnd];

//sender = self.QuestionAnswer - This control is of type UITextField.
-(IBAction)SaveQuestionAnswer:(id)sender
//some code here
   [control resignFirstResponder];
//some code here
} 
```

我还验证了`[control resignFirstResponder]`当失去对`UITextField`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:38:58.017

我已经解决了我的问题。我所有的控制器都继承自一个基本控制器。在这个基本控制器中，我有一些方法可以处理我的应用程序的所有导航。

将这两种方法添加到我的基类中。如果您没有基类，则可以将其添加到您的控制器中。这将循环浏览视图上的所有控件并释放第一响应者。

```
-(void)StartReleaseAllFirstResponders
{
    for(UIView *Item in [self.view subviews]) {
        [self ReleaseAllFirstResponders:Item];
    }
}

-(void)ReleaseAllFirstResponders:(UIView*)OriginItem
{
    for(UIView *Item in [OriginItem subviews]) {
        [Item resignFirstResponder];
    }
    [OriginItem resignFirstResponder];
} 
```

这是实现的一个例子。

```
-(void)Navigate_Home
{
    [self StartReleaseAllFirstResponders]; //Making sure we release all first responders
    HomeController *GoToView= [self.storyboard instantiateViewControllerWithIdentifier:@"HomeController"];
    GoToView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentViewController:GoToView animated:YES completion:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

# javascript - 如何从 svg 中获取嵌入元素

> ID：13775801
> 
> 赞同：2
> 
> 时间：2012-12-08T08:27:03.367
> 
> 标签：javascript, html, dom, svg

使用 mySVGNode.parentNode 我得到一个嵌入式 svg 文件的 null 。理想情况下，我想引用 embed 标记及其 id 属性。

我可以成功地在 DOM 中搜索它，但我很惊讶 parentNode 返回 null。嵌入式对象不支持吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:29:28.953

您正在寻找的是`window.frameElement`. [请参阅html5 规范](http://dev.w3.org/html5/spec/single-page.html#dom-frameelement)中的定义。

这是一个[例子](http://xn--dahlstrm-t4a.net/svg/html/from-svg-get-embedding-element.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-28T10:53:11.767

`window.frameElement`正如@Eric 所说，这是要走的路，但不幸的是，它在 IE 或 Edge 中不起作用。

但是，有一种解决方法，即获取父文档，在其中找到`<object>`or`<embed>`标签（可能引用您的 SVG），然后检查每个标签是否`contentDocument`是我们的 SVG 文档。

与通过 ID 进行常规 DOM 搜索不同，这避免了为您的对象/嵌入标签分配唯一 ID 的需要。

例子：

```
var objectElt = window.frameElement;
if (!objectElt) { // IE/Edge case
    var objectElts = window.parent.document.getElementsByTagName("object");
    for (var i = 0; i < objectElts.length; i++) {
        if (objectElts[i].contentDocument == document) {
            objectElt = objectElts[i];
            break;
        }
    }
}
// objectElt now references the appropriate <object> tag 
```

# mysql - 使用聚合函数优化 MySQL 视图

> ID：13775806
> 
> 赞同：2
> 
> 时间：2012-12-08T08:27:59.327
> 
> 标签：mysql, optimization, view, aggregate

我有这样的看法：

```
CREATE VIEW invoicereport
SELECT i.ID, SUM(o.Amount * o.Price) AS Total
FROM invoice i
JOIN `order` o ON i.ID = o.InvoiceID
GROUP BY i.ID 
```

直接运行此查询需要 0.03 秒。但是运行视图需要 2 秒。即使我这样做`SELECT * FROM invoicereport WHERE ID=9000`仍然需要 2 秒。

所以我将视图重写为：

```
CREATE VIEW invoicereport
SELECT i.ID, (SELECT SUM(Amount * Price) FROM `order` WHERE InvoiceID=i.ID) AS Total
FROM invoice i 
```

以为子查询只会为 ID 9000 执行。然后当我这样做`SELECT * FROM invoicereport WHERE ID=9000`时更慢，需要 3 秒才能完成。

还有其他方法可以优化此查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:46:22.733

我认为没有必要加入这些表，只需分组`order`就足够了。（只是我的观点）。像这样：

```
CREATE VIEW INVOICEREPORT
SELECT O.INVOICEID as ID, SUM(O.AMOUNT * O.PRICE) AS TOTAL
FROM `ORDER` O
GROUP BY O.INVOICEID 
```

然后，您可以与其他人一起加入此视图。并在`order`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:27:47.173

我同意 Kuya John 的评论。在这样一个简单的总结中，甚至都不要试图将其作为一个视图来做。它的简单性是不需要进行连接的。几年前我提供了另一个类似的答案，其中有人正在使用现有视图，而他的查询是一些淫秽的时间。当我要求返回查询的原始表并直接编写时，查询仍然非常易于阅读且速度极快。不要使用视图，只需直接选择语句即可。

像子选择这样的视图通常是查询时间的杀手，我总是尽量避免它们。

由于您也在寻找其他发票数据，所以应该没有问题......但更大的确认......您的订单表是否在发票 ID 上有索引？

```
SELECT 
      I.ID, 
      I.Customer_Name,
      I.Tel,
      SUM(o.Amount * o.Price) AS Total
   FROM 
      invoice I
         JOIN `order` o ON I.ID = O.InvoiceID
   WHERE
      I.ID = 9000
   GROUP BY 
      I.ID 
```

# iphone - 启用分页的 UIScrollView？

> ID：13775809
> 
> 赞同：0
> 
> 时间：2012-12-08T08:28:47.127
> 
> 标签：iphone, ipad, ios5, uiscrollview, uibutton

我试过在这个事件中我需要滚动事件并且还需要按钮单击事件。我在这里使用了多个 uiview 并在其中放置了按钮（需要动作滚动和按钮动作） 任何人都可以提供解决方案吗？

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
   if ([self pointInside:point withEvent:event]) {
           return _scrollView;
   }
   return nil; 
```

}

在上面的代码中滚动动作发生但按钮动作没有发生。

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
   if ([self pointInside:point withEvent:event]) {
           return nil;
   }
   return nil; 
```

}

* * *

在上面的代码中，按钮动作正在发生，但滚动只发生在它的视图中，不能滚动其他滚动视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:45:54.997

简单的解决方案是在滚动视图中添加滚动视图应用分页并将您的 Uiview 添加到滚动视图中，假设您必须显示 5 个视图然后尝试跟随。

```
yourScroll = [[UIScrollView alloc]init];
yourScroll.frame = CGRectMake(45, 45, 230, 300);
yourScroll.backgroundColor =   [UIColor clearColor];
yourScroll.contentSize = CGSizeMake(yourScroll.frame.size.width * 5, yourScroll.frame.size.height);
[yourScroll setPagingEnabled : YES];
[yourScroll setDelegate:self];

int incX = 0 ;

for( int i = 0; i < 2; i++)
{
 UIView *myView = [[UIView alloc]initWithFrame:CGRectMake (incX,0,yourScroll.frame.size.width,yourScroll.frame.size.height)];
//Create a button and give it the tag like    
button.tag = i;
//Now add a selector to the button and add the button to your view;
[myView addSubview:button]
[yourScroll addSubview:myView];
    incX+= 230;
} 
```

现在这是您通过单击按钮进行滚动的选择器：

```
- (IBAction)changePage:(id)sender
{
int page = [sender tag];
NSLog(@"the page is = %i",page);
CGRect frame = yourScroll.frame;
frame.origin.x = frame.size.width * page;
frame.origin.y = 0;
[yourScroll scrollRectToVisible:frame animated:YES];
} 
```

# genetic-algorithm - 什么是利基方案？

> ID：13775810
> 
> 赞同：19
> 
> 时间：2012-12-08T08:28:56.453
> 
> 标签：genetic-algorithm, evolutionary-algorithm

我目前正在阅读一篇关于在约束优化问题中使用 GA 的论文。在某种程度上，它正在谈论对个人（或他们所做的帕累托前沿）应用**利基方案。**

这似乎是一个典型的选择方案，但当我搜索时，我找不到一个很好的解释。

有人可以尽可能简单地向我解释一下，什么是**利基计划**？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-10T11:42:41.233

简而言之，Niching 是一类试图在一次运行中收敛到多个解决方案的方法。

Niching 是将 GA 的总体分割成不相交的集合的想法，旨在使您在适应度函数的每个区域中至少有一个“有趣”的成员；通常，我们的意思是您涵盖了多个局部最优值。

想象一个像`f(x) = sin(x^2)`.

![在此处输入图像描述](../Images/10a17b840e0a919bceb047b9492b8760.png)

一个正常的 GA 最终会收敛到两个全局最小值之一。哪一个取决于初始种群和整个运行过程中发生的随机遗传漂移，但最终，您将`n`在一个或另一个山谷中获得一个个体的副本。例如，如果您在几乎收敛时查看这样的 GA，您可能会看到类似

![标准遗传算法](../Images/ae924e34a378c434aaad581a71865839.png)

Niching 是一类通用技术，旨在最终使大约一半的人口收敛于每个最小值（或者甚至可能包括一些不太适合最小值的成员`x=0`）。

![利基](../Images/f048e6cfc40f9f65c1b960a8cf348fda.png)

正如我刚才所说，小生境与其说是一种算法，不如说是一种通用算法。一种这样的方法是戈德堡的健身分享。在这种方法中，我们定义了一个小生境半径`sigma`。任何两个比这更接近的个体`sigma`都被认为是在同一个生态位中，因此必须共享他们的适应度值（认为这是一个降低生态位每个成员的适应度的函数，生态位人口越密集）。然后让 GA 对共享的适应度值而不是原始值进行操作。

这里的想法是你通过假装那里的资源有限来阻止收敛到适应度函数的单个区域。越多的人试图搬进来，他们的处境就越糟糕。结果是，当 GA 在某个地方收敛到单个局部最优值时，该最优值的适应度会因为生态位内竞争的增加而降低。最终，健身景观的另一个区域变得更具吸引力，并且个体迁移到那里。这个想法是要达到一个稳定状态——动态中的一个固定点——在这个状态下，每个利基都保持适当的表示。

由于需要手动设置小众半径，因此共享很困难，并且算法对这种选择非常敏感。另一种选择是拥挤。特别是，您可能会查找“Deterministic Crowding”，这是一段时间内流行的方法。在基于拥挤的方法中，我们不是处理明确的半径，而是通过将新后代可以替换的个体集合限制为一组类似的解决方案来工作，例如，一个后代可能只允许替换其父母中的一个。其效果是试图防止将一个独特的个体替换为与人口中其他十几个非常相似的个体，从而以这种方式保持多样性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:42:24.153

是的，deong 很好地解释了利基。所有这些技术都是为了保持人口的多样性。

这也是帕累托前沿所做的。寻找帕累托前沿的 GA 是多目标进化算法。他们不仅尝试优化一个标准，还尝试优化两个或更多。因此，帕累托阵线都是不由人口中的个人主导的帕累托个人。 [http://en.wikipedia.org/wiki/Pareto_efficiency](http://en.wikipedia.org/wiki/Pareto_efficiency)

简而言之：如果总体中没有个体 B 在每个标准上至少与 A 一样好并且在至少一个标准上优于 A，则个体 A 是帕累托前沿的成员。

# linux - 将 Magento 项目克隆到具有全新 Magento 安装的文件夹中

> ID：13775811
> 
> 赞同：1
> 
> 时间：2012-12-08T08:28:58.360
> 
> 标签：linux, git, magento, github, git-clone

我有一个包含我的 Magento 东西的 GitHub 存储库。但是我使用**.gitignore**来获取全新的安装文件，并且 repo 只包含**我的**文件。在另一台计算机上，我进行了全新安装，现在想从存储库中克隆我的自定义文件。

所以，我尝试了：

```
git clone git://github.com/username/reponame.git /opt/lampp/htdocs/Magento 
```

但我收到一个致命错误：

```
destination path '/opt/lampp/htdocs/Magento' already exists and is not an empty directory. 
```

如果我在没有第二个参数（文件夹路径）的情况下进行克隆，那么我可以在没有错误的情况下克隆 repo，但是它位于新的 Magento 重复文件夹 Magento/ **Magento** /app/... 中，这是错误的。

操作系统：Ubuntu 12.04

IDE：NetBeans 7.2.1

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:54:13.920

出于这些原因，我在一个单独的目录中克隆，并制作了一个脚本来将静态文件（应用程序、js、皮肤等取决于您想要更改的所有内容）复制到“实时”目录。

# php - 在 php 中提取特定字符串的多个部分所需的正则表达式模式

> ID：13775813
> 
> 赞同：0
> 
> 时间：2012-12-08T08:28:59.310
> 
> 标签：php, regex

我的 PHP 代码中有这样的字符串：

```
$string = "(A)[B]C/D/E:F?G"; 
```

如何使用正则表达式从字符串中提取`A`, `B`, `C`, `D`, `E`, `F`,部分？`G`

例如`some_function_do_some_regex`，我想要一个函数，它以 my`$string`作为参数并从中提取七个想要的部分

```
$parts = some_function_do_some_regex($string);
print_r($parts);

// OUTPUT
/*
Array
(
    [0] => A
    [1] => B
    [2] => C
    [3] => D
    [4] => E
    [5] => F
    [6] => G
)
*/ 
```

**更新：**
我不得不提到一件重要的事情，但我忘记了，对不起。请记住，字符串中的七个部分（A、B、C、D、E、F、G）用于样本，它们的值可以改变，

例如考虑这个：

```
$string = "(aaa)[bbb]ccc/ddd/eee:fff?ggg"; 
```

输出将是这样的

```
/*
Array
(
    [0] => aaa
    [1] => bbb
    [2] => ccc
    [3] => ddd
    [4] => eee
    [5] => fff
    [6] => ggg
)
*/ 
```

还有一个重要的注意事项：
在第 1 到第 6 部分中，没有符号字符，我们有`a-z`and`0-9`值，但是对于最后一部分（问号后面的部分），我们可以有任何字符，例如`[`and`/`和其他任何字符。

这意味着零件结构非常重要。

**以下是对每个部分的描述：**
**A**部分：介于两者之间的所有内容`(`B`)`
**部分**：介于两者之间的所有内容`[`C`]`
**部分**：第一部分`/`和之后的所有内容`]`
**D 部分**：第一和第二`/`
**部分之间的所有内容 E 部分**：第二部分`/`和之前的所有内容`:`
**F 部分**：之后`:`和之后的所有内容`?`
**G部分**之前：之后的一切`?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:36:50.763

正如 Rohit 所建议的，这是该模式的 PHP 实现。

```
$string = "(A)[B]C/D/E:F?G";
preg_match_all('/\w/', $string, $matches);
print_r($matches[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T03:31:12.277

感谢您的**`Rohit Jain`**帮助。我创建了这个答案：

```
<?php

$string = "(a)[b]c/d/e:f?g:part?with(non-alphabetical)[characters]!";
preg_match_all('/([a-zA-Z0-9]+)|\?([^?]*)$/', $string, $sixparts);
preg_match_all('/([a-zA-Z0-9]+)|.*?\?(.*)$/', $string, $sevenpart);

$part_a = $sixparts[0][0];
$part_b = $sixparts[0][1];
$part_c = $sixparts[0][2];
$part_d = $sixparts[0][3];
$part_e = $sixparts[0][4];
$part_f = $sixparts[0][5];
$part_g = $sevenpart[2][0];

echo $part_a; // a
echo $part_b; // b
echo $part_c; // c
echo $part_d; // d
echo $part_e; // e
echo $part_f; // f
echo $part_g; // g:part?with(non-alphabetical)[characters]! 
```

# haskell - 各种数据类型的 Haskell IO 函数

> ID：13775814
> 
> 赞同：2
> 
> 时间：2012-12-08T08:29:04.537
> 
> 标签：我对haskell, haskell, io

[我对haskell](/questions/tagged/haskell "显示标记为“haskell”的问题")几乎一无所知，我正在阅读大量教程和代码示例以了解**Haskell**的 IO，但我仍然不清楚。

所有的例子都是这样的：

```
main = do  
    putStrLn "Hello, what's your name?"  
    name <- getLine  
    putStrLn ("Hey " ++ name ++ ", welcome !") 
```

他们从 IO 读取字符串，还有许多其他示例对我不理解的输入进行了一些自定义。

我的问题很简单：如何在**C**中使用格式字符串读取`Int`,`Float`或like using `Double`？`Char``scanf`

 **任何人都可以帮助我清楚地解释 IO 自定义或技巧吗？

> 提示：如果代码带有一个很棒的 main 函数 - 它会使测试更容易。

我在`C`、`C++`、`Java`、`C#`和.`Matlab``PHP`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T08:48:12.610

最直接的方法是使用`read`（您通常必须提供显式类型），如

```
main = do  
    putStrLn "Hello, what's your age?"  
    age <- liftM read getLine :: IO Int
    putStrLn ("Hey " ++ (show age)  ++ ", welcome !") 
```

如果您知道字符串仅包含单个值（如果它无法将字符串解析为所需的数据类型，则会引发异常），则此方法效果很好。对于更复杂的解析，我通常直接跳到[Parsec](http://hackage.haskell.org/packages/archive/parsec/3.0.0/doc/html/Text-Parsec.html)解析器组合库（它可能是您在 Haskell 中需要的所有解析器，而且还能以最小的开销处理简单的工作）。如果这不适合您，快速搜索 Hackage 会发现一些候选库提供了更简单的类似 scanf 的功能：请参阅[Text.XFormat.Read](http://hackage.haskell.org/packages/archive/xformat/0.1/doc/html/Text-XFormat-Read.html)和[Text.PrintScan](http://hackage.haskell.org/packages/archive/liboleg/2010.1.2/doc/html/Text-PrintScan.html)等，尽管我个人不能保证两者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T20:11:12.327

isturdy 的答案是有效的，但如果你想要更简单的东西，最简单的方法是一步一步地做：

```
main = do
    i' <- getLine -- some integral input; it will be received as a String
    d' <- getLine -- some floating input; also will be received as a String
    let i = read i' :: Int -- i is an Int now
        d = read d' :: Double -- d is a Double now
    putStr "" -- so that GHC doesn't complain 
```

的类型`getLine`是`IO String`- 它将输入读取为`String`. `read`然后，您可以使用（并指示您想要的类型）更改此字符串的类型。至于类似`scanf`的体验，您可以尝试这样的事情：

```
main = do
    inp <- getLine -- the input is an Int, a String and a Double, like: 4 derp 2.7
    let list = words inp -- divide the input String into a list of Strings
        val = read (list !! 0) :: Int -- val equals 4, its type is Int
        str = list !! 1 -- str is a String ("derp"), no additional action required
        dbl = read (list !! 2) :: Double -- dbl equals 2.7 and is a Double
    putStr "" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T20:47:20.037

您应该深入研究 Read 类型类。它是可以从字符串中读取的值的标准类型，在不需要错误报告的受控环境中非常有用。如果您想阅读自己的数据类型，您可能必须使用`deriving Read`语句。

但是，如果要读取任意输入，则使用[parsec](http://book.realworldhaskell.org/read/using-parsec.html)库是标准的。Parsec 是具有几个预定义基本解析器的解析器组合库。一个[额外的包](http://hackage.haskell.org/package/parsec-numbers)提供了许多数字解析器。还存在特殊的高速解析器组合库和解析器生成器。**

# android - 在一行上布局两个文本视图的最佳实践

> ID：13775818
> 
> 赞同：3
> 
> 时间：2012-12-08T08:29:45.380
> 
> 标签：android, android-layout

我想在我的 xml 布局上有很多 textviews ，每两个在一行上，我把它做成这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Name: " />

        <TextView
            android:id="@+id/playertvName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/red"
            android:textSize="20dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Nationality: " />

        <TextView
            android:id="@+id/playertvNationality"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/red"
            android:textSize="20dp" />
    </LinearLayout>

</LinearLayout> 
```

但这似乎不是为每两个文本视图创建一个新的线性布局的好方法，请问还有其他方法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T08:34:46.663

试试`GridLayout`。这是[官方的 Google 文档](http://developer.android.com/reference/android/widget/GridLayout.html)，这是[示例](http://blog.stylingandroid.com/archives/669)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T08:38:13.330

我相信，出于您使用布局（可能是一种形式）的目的，您开发它的方式非常好。在这种情况下，我认为 a`GridView`或 any`AdapterView`不适合您的要求。

您可以使用`LinearLayout`适当的重量或`RelativeLayout`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T08:35:39.503

您可以使用 TableLayout 或 GridView，作为 LinearLayout 的替代。

1.  TableLayout 将允许您以表格格式排列文本视图，如果文本视图的数量非常小且固定，我会推荐 TableLayout。

2.  GridView 允许您在 Grid fasion 中布局组件，它是一个适配器视图，这意味着通过 GridView 我们可以重用视图。它在一定程度上增加了复杂性，所以当没有文本视图时它很有用，很大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T08:37:54.690

使用一种相对布局并使用 android:layout_toLeftOf="", android:layout_toRightOf="" android:layout_below="" android:layout_above=""

# java - 如何使用jsoup提交表单

> ID：13775820
> 
> 赞同：0
> 
> 时间：2012-12-08T08:30:00.903
> 
> 标签：java, javascript, screen-scraping, jsoup

我想从有多个表单的网页提交表单。我特别想在下面提交此表格。

```
<form action="realDisplay.asp" method="post" name="Search" onSubmit="return validate(this); return submitForm();" target="_blank">
               <table width="98%" align="center" cellspacing="0" cellpadding="0" border="1" bordercolor="#FFFFFF">
              <tr>
                 <td width="127" class="style62" align="right">Parcel ID</td>
                <td width="286">
                  <div align="center">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%%" align="center">
                      <tr>
                        <td align="left" class="style62">&nbsp;
                        <input name="rePID" size="15" maxlength="15" value="">
                         <br>
                          <font class="style65">( 12 123 12 123)</font></td>
                      </tr>
                    </table>
                  </div> 
                </td>
                </tr>
                <tr>
                 <td width="127" class="style62" align="right">Partial Parcel ID</td>
                <td width="286">
                  <div align="center">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%%" align="center">
                      <tr>
                        <td align="left" class="style62">&nbsp;
                        <input name="rePartialPID" size="15" maxlength="15" value="">
                         <br>
                          <font class="style65">( 12 123)</font></td>
                      </tr>
                    </table>
                  </div> 
                </td>
                </tr>
              <tr>
                <td class="style62" align="right">Address</td>
                <td class="style62" align="left">&nbsp;
                  <input name="Address" size="38" maxlength="50" value="">
                </td>
              </tr>
               <tr>
                <td class="style62" align="right" nowrap="nowrap">Partial Street Name</td>
                <td class="style62" align="left">&nbsp;
                  <input name="streetName" size="38" maxlength="50" value="">
                </td>
              </tr>
              <tr>
                <td class="style62" align="right" nowrap="nowrap">Owner Name</td>
                <td class="style62" align="left">&nbsp;
                  <input name="OwnerName" size="30" maxlength="50" value="">   
                </td>
              </tr>
              <tr>
                <td colspan="2"><br /><font class="style64">Insert</font>
                  <font class="style65"><u>Either</u></b></font><font class="style64">&nbsp;a</font>:<br>
                 <br>
                 <table align="center" border="1" cellspacing="0" cellpadding="3" bgcolor="#E8E8E8">
                    <tr>
                      <td align="left"><img src="Images/arrow_1.gif" width="9" height="7" vspace="0" hspace="8"></td>
                      <td class="style75" align="left">
                      <a class="nav4" href="GlossaryTermWin.htm#ParcelID" onClick="NewWindow(this.href,'PARCELID','635','635','yes');return false;">
                     Parcel ID</a> , or Partial Parcel ID</td>
                    </tr>
                    <tr>
                    </tr>
                    <tr>
                      <td>
                      <img src="Images/arrow_1.gif" width="9" height="7" vspace="0" hspace="8"></td>
                      <td class="style75" align="left">Address (eg. 123 main), or</td>
                    </tr>
                    <tr>
                      <td class="style75" align="left">
                      <img src="Images/arrow_1.gif" width="9" height="7" vspace="0" hspace="8"></b></font></td>
                      <td class="style75">Partial Street Name (eg. main), or</td>
                    </tr>
                    <tr>
                      <td class="style75">
                      <img src="Images/arrow_1.gif" width="9" height="7" vspace="0" hspace="8"></b></font></td>
                      <td class="style75" align="left">Owner Name <br />(eg. LastName,FirstName <br />or
                              Partial Owner Name)</td>
                    </tr>
                </table> </td>
              </tr>
              <tr>
                 <td colspan="2">&nbsp;</td>
                    </tr>
              <tr>
                <td height="26" colspan="2" align="center">
                <input type="image" valign="top" name="Submit" value="Search" src="images/search.jpg" align="top" alt="Search by either the Parcel ID or Address or Owner Name that is associated by the real estate information.">
                <a href="javascript:document.forms[0].reset()" border="0"><img src="images/reset.jpg" align="top" border="0" alt="Reset the values on this page." onClick="ResetForm()"></a></td>
              </tr>
  </table>
</form></td> 
```

我的 Java 代码如下所示：

```
Document doc = Jsoup.connect("http://web.somewebsite.asp")
                   .data("rePID", "15 197 14 007")
                   .post(); 
```

我希望能够查看提交此表单后出现的网页，并查看该页面的文本内容，并且还希望获取 url。

我必须在我的 Java 代码中做什么以确保提交请求已提交并在提交表单后查看下一页的内容。

我可以使用 Htmlunit 提交表单，您可以在网上搜索并下载包。

```
import com.gargoylesoftware.htmlunit.html.HtmlForm;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.html.HtmlSubmitInput;
import com.gargoylesoftware.htmlunit.html.HtmlImageInput;
import com.gargoylesoftware.htmlunit.html.HtmlTextInput;
import com.gargoylesoftware.htmlunit.BrowserVersion;
import com.gargoylesoftware.htmlunit.WebClient;

WebClient webClient = new WebClient(BrowserVersion.FIREFOX_10);
final HtmlPage searchPage = webClient.getPage("http://web.somewebsite.asp"); 

    final HtmlForm form = searchPage.getFormByName("Search"); 
    final HtmlTextInput textField = form.getInputByName("rePID");
    textField.setValueAttribute("15 197 14 007");
    final HtmlImageInput button = form.getInputByName("Submit"); 
    HtmlPage searchResultPage = (HtmlPage)button.click(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-09T11:55:19.777

首先，您需要调查页面本身。Chrome 有很好的内置功能来支持它。只需按 F12，您将看到很少的选项，您可以调查与特定 HTML 请求相关的几乎所有内容。较新版本的 IE 也有类似的东西。Firefox 有很棒的 firebug 扩展。

您可以看到服务器使用的 Cookie。也许你错过了他们。通常最重要的一个是 Set-Cookie。您需要将其添加到您将在 POST Html 请求中发送的 Cookie Post 请求中。

在您的情况下，您还需要检查 java Script 函数 SubmitForm。请记住，您的代码可能不会调用 JavaScript。您需要发送请求的页面将是“realDisplay.asp”。

有时，浏览器会在 URL 字符串中发送带有一些参数的 post 请求，例如 GET。请也检查一下。使您的 POST 请求与浏览器使用的完全相同。

请检查通过浏览器登录时的会话时长。要保持会话，您需要向应用程序发送一些请求。如果未发送，您将需要重新登录。

将 jsoup 与 cookie 一起使用还有另一个答案。

[jsoup 发布和 cookie](https://stackoverflow.com/questions/6432970/jsoup-posting-and-cookie)

```
Connection.Response res = Jsoup.connect("http://www.example.com/login.php")
.data("username", "myUsername", "password", "myPassword")
.method(Method.POST)
.execute();

Document doc = res.parse(); 
```

如果您需要更多信息，请告诉我。

# joomla - Google 新闻站点地图语法

> ID：13775821
> 
> 赞同：4
> 
> 时间：2012-12-08T08:30:01.603
> 
> 标签：joomla, sitemap, google-news

我已经使用 Joomla 的 Xmap 组件为我的网站提交了 Google 新闻站点地图，我今天收到如下通知

**您的站点地图位于不在 Google 新闻数据库中的站点上。Google 新闻只能接受来自我们抓取的网站的站点地图。如果您的网站被 Google 新闻抓取，请检查您的站点地图的网址是否与您的报道在 Google 新闻上显示的网址一致，包括任何前导的“www”。如果您想请求将您的网站收录到 Google 新闻中，请联系 Google 新闻支持团队。**

```
Here is my sitemap:
http://www.thepeshawar.com/index.php?option=com_xmap&view=xml&tmpl=component&news=1&id=1 
```

任何 Joomla 专家都可以告诉我，他们如何提交他们的谷歌新闻站点地图或我的站点地图有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:59:10.793

只有经过 Google 新闻小组审核并包含在 Google 新闻数据库中的网站才会接受新闻站点地图。既然您收到了该警告，我相信您的网站根本不在该数据库中。

如果您要发布新闻内容，即突发新闻或社论，您可以在 [http://support.google.com/news/publisher/bin/answer.py?hl=en&answer=40787建议您的网站加入](http://support.google.com/news/publisher/bin/answer.py?hl=en&answer=40787)

# ruby-on-rails - 在 Ubuntu 上使用正确的 Ruby 版本和 RVM

> ID：13775828
> 
> 赞同：0
> 
> 时间：2012-12-08T08:31:23.193
> 
> 标签：ruby-on-rails, ruby, version, rvm

我的 RVM 的 ruby​​ 版本与我的系统似乎使用的实际版本之间存在差异。

差异：

```
max@max-VirtualBox:~/ruby/app$ ruby -v
ruby 1.8.7 (2011-06-30 patchlevel 352) [i686-linux]
max@max-VirtualBox:~/ruby/app$ rvm list

rvm rubies

   ruby-1.9.3-p286 [ i686 ]
=* ruby-1.9.3-p327 [ i686 ] 
```

所以我尝试了，

```
max@max-VirtualBox:~/ruby/app$ rvm --default use 1.9.3

RVM is not a function, selecting rubies with 'rvm use ...' will not work. 
```

我`rvm info`将 ruby​​ 1.9.3 列为我的默认 ruby​​ 版本，并且 rvm 已更新。但是我的 rails 应用程序似乎仍然采用 ruby​​ 1.8.7 语法，正如它在`ruby -v`

如何让我的整个系统使用正确的 ruby​​ 版本？

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:11:46.277

RVM 应该警告您 - 您需要更改终端模拟器首选项：[https ://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:38:57.573

安装 RVM 后是否重新启动了 shell？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T08:41:47.967

看起来 RVM 没有正确集成到您的外壳中

a）尝试重新安装它`curl -L https://get.rvm.io | bash -s stable --ruby`

b）（或）尝试手动将以下行添加到`$HOME/.bashrc`OR`$HOME/.profile`文件的末尾

```
export rvm_prefix=$HOME
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" 
```

您必须重新启动 shell 才能重新加载这些变量

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-08T08:41:13.473

`[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function` 将此添加到您的环境配置文件（.bashrc 或其他）中，然后添加`source`它。

# lisp - 我的 Lisp 代码不会运行，但函数本身可以编译

> ID：13775831
> 
> 赞同：0
> 
> 时间：2012-12-08T08:31:44.240
> 
> 标签：lisp, common-lisp

```
(defun prefix (a y) (cond ((null y) nil)
    (t (cons (cons a (car y)) (prefix a (cdr y))))))
(setq result prefix(a (cons 1 2)))
(print result) 
```

这个函数 cdr's 通过列表 y，递归打印 (a(car y))。如果 P 是第一个参数，y 是列表 (1 2 3)，它应该返回 ((P1) (P2) (P3))。但是，当我尝试为其提供参数并执行它时，我无法让该函数工作。这里有什么不正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T09:08:09.480

> 这个函数 cdr's 通过列表 y，递归打印 (a(car y))。

它怎么能打印任何东西？函数中没有一条打印语句。

> 如果 P 是第一个参数，y 是列表 (1 2 3)，它应该返回 ((P1) (P2) (P3))。

通过查看您的代码，它会返回`((P . 1) (P . 2) (P . 3))`而不是`((P1) (P2) (P3))`.

> 但是，当我尝试为其提供参数并执行它时，我无法让该函数工作。这里有什么不正确的？

你的电话看起来不对。`prefix( ... )`有些东西看起来不像 Lisp。在 Lisp 中，调用函数的语法是`(prefix ... )`. 函数名称位于左括号之后。

```
(defun prefix (a y)
  (cond ((null y) nil)
        (t (cons (cons a (car y))
                 (prefix a (cdr y))))))

(setq result prefix(a (cons 1 2)))  ; this line has problems

(print result) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:50:59.280

在你做任何其他事情[之前](https://rads.stackoverflow.com/amzn/click/com/0262560992)，请先看看可用的[介绍性](http://www.gigamonkeys.com/book/)lisp[文本。](http://mitpress.mit.edu/sicp/full-text/book/book.html)

[dons code-review hat]

```
(defun prefix (a y) (cond ((null y) nil)
    (t (cons (cons a (car y)) (prefix a (cdr y))))))

(setq result prefix(a (cons 1 2)))

(print result) 
```

首先，这些定义并没有按照您的散文描述所说的那样做；作为递归函数的一部分，您没有任何打印。您 print `result`，但那是在`prefix`ed 列表全部放在一起之后。您的`prefix`函数也不会返回新符号，而是返回对。

* * *

无需设置中间值即可打印它们；Lisp 函数隐式返回，并且可以在没有的情况下组合`setq`

```
(defun prefix (a y) 
  (cond ((null y) nil)
         (t (cons (cons a (car y)) 
              (prefix a (cdr y))))))

(print prefix(a (cons 1 2))) 
```

* * *

Lisp 完全用前缀表示，函数名出现在调用括号内。

```
...

(print (prefix a (cons 1 2))) 
```

* * *

`a`在您的`prefix`通话中是一个未绑定的变量。我认为您要么打算使用“符号`a`”，即`'a`，要么使用“关键字`a`”，即`:a`. 如果您只是通过`a`，Lisp 将尝试将该名称评估为变量，如果您没有为其分配值，则会失败。

```
...

(print (prefix 'a (cons 1 2))) 
```

* * *

您的第二个论点`prefix`不是正确的列表；这是一对。为了看到区别，您需要查看两种构造的底层指针结构。

```
(cons 1 2) => [ 1 | 2 ]
(list 1 2) => [ 1 |   ]
                    \
                  [ 2 |  ]
                        \
                        NIL 
```

如果您尝试在函数期望正确列表的情况下使用对，则会收到错误`#<TYPE-ERROR expected-type: LIST datum: 2>`，因为对的尾部不是列表，而 a 的尾部`list` *是*.

* * *

```
(defun prefix (a y) 
  (cond ((null y) nil)
         (t (cons (cons a (car y)) 
              (prefix a (cdr y))))))

(print (prefix 'a (list 1 2))) 
```

至此，您已经有了一个可运行的程序。`(print (prefix 'a (list 1 2)))`在定义该函数后在 REPL 进行评估应该会给你

```
CL-USER> (print (prefix 'a (list 1 2)))

((A . 1) (A . 2)) 
((A . 1) (A . 2)) 
```

请注意，我们有重复的输出；这是因为 Lisp REPL 会自动打印您评估的任何表单的返回值，这意味着您实际上可以`print`完全删除。

```
CL-USER> (prefix 'a (list 1 2))
((A . 1) (A . 2)) 
```

* * *

为了执行您所说的操作（以第一个参数为前缀创建一个新的符号列表），您实际上需要使用一些字符串操作并`intern`创建符号。

```
(defun prefix (a y) 
  (cond ((null y) nil)
         (t (cons (intern (format nil "~a~a" a (car y)))
              (prefix a (cdr y)))))) 
```

`(prefix 'a (list 1 2))`现在应该返回`(A1 A2)`。请注意，Common Lisp 不区分大小写，会自动将小写符号转换为大写。

* * *

递归是一个很好的学习工具，尾递归是 Scheme 中的主要迭代结构，但如果可以的话，迭代地做事通常是个好主意。请注意，CL 不保证尾调用优化，因此这通常意味着使用`loop`或`mapcar`（或`dolist`在某些情况下）。

```
(defun iterative-prefix (a a-list)
  (loop for elem in a-list
        collect (intern (format nil "~a~a" a elem))))

(defun map-prefix (a a-list)
  (mapcar 
   (lambda (elem) (intern (format nil "~a~a" a elem)))
   a-list)) 
```

这些都将为您提供与递归版本相同的输出，但如果您为它们提供足够长的列表，则不会有耗尽堆栈空间的风险。

```
CL-USER> (prefix 'a (make-list 100000 :initial-element 1))
Control stack guard page temporarily disabled: proceed with caution
Control stack guard page temporarily disabled: proceed with caution
; Evaluation aborted on #<SB-KERNEL::CONTROL-STACK-EXHAUSTED {1004D674F3}>.

CL-USER> (iterative-prefix 'a (make-list 100000 :initial-element 1))
(A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 ...)

CL-USER> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:59:01.447

两条评论：

首先， cons 返回一个新的 cons 单元格，第一个参数在 cons 中，第二个参数在单元格的 cdr 中。因此 (cons 1 2) 创建了一个新的 cons 单元格 (1 . 2)，这就是您所看到的。

如果您希望结果是列表 (1 2)，则第二个参数必须是列表： (cons 1 '(2))

其次，您编写了一些相当难看的 C 风格的 Lisp 代码。考虑：

```
(defun prefix (a y)
  (if ((null y) nil)
    (cons (cons a (car y)) (prefix a (cdr y)))))
(print (prefix a '( 1 2)))) 
```

注意：不要创建仅在以下行中使用的变量。正确布局代码（人们在阅读 Lisp 时不会解析括号，他们依赖于常规布局）。如果只有一个测试加上一个默认值（即 if/then/else），则使用 if 而不是 cond。

您的代码仍然有错误（我还没有修复这些错误）。看起来您实际上并没有在 REPL 中编写此代码——如果您这样做了，您会发现编写 Lisp 代码要容易得多。这是 Lisp 相对于 Algol 语言的一大优势。

# android - Android - 使用具有多个可点击子项的父视图的 onTouch

> ID：13775832
> 
> 赞同：4
> 
> 时间：2012-12-08T08:31:51.107
> 
> 标签：android, touch, gesture, ontouchlistener

我有`ListView`一个`Activity`. 每`ListView`行都是`LinearLayout`s 并且包含两个孩子`View`s，两者都是`clickable`。结构是这样的——

```
 ______________________________
|      |                       |
|______|_______________________| 
```

现在，我想保留这两个项目`clickable`并检测父项上的滑动动作`View`，即`the LinearLayout`。

你能建议我什么是最好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T14:05:00.233

> 现在，我想保持这两个项目可点击并检测父视图上的滑动操作，即线性布局。

您可以创建自己的行`View`来扩展`LinearLayout`并包装这两个子视图。为此覆盖[`onInterceptTouchEvent`](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)和[`onTouch`](http://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)检测滑动的方法。如果您需要知道当前正在滑动哪一行，您可以让您的自定义视图记住它在列表中的位置并更新`getView`适配器方法中的位置。

我认为，另一种选择是在处理滑动的普通行视图之上有一个覆盖视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:16:08.277

在您的`BaseAdapter`override`getView`中，获取对每个孩子的引用并为每个孩子设置`onClickLister`，每次被`getView`调用时，样本：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if(convertView==null){
            convertView = inflater.inflate(R.layout.layout, parent,false);
        }

        final MyClass item = (MyClass)getItem(position);

        View child1 = convertView.findViewById(R.id.child1);
        child1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.d("tag", "child1 from item "+ position +" , is clicked.");

            }
        });

        View child2 = convertView.findViewById(R.id.child2);
        child2.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.d("tag", "child2 from item "+ position +" , is clicked.");

            }
        });

        return convertView;} 
```

对于 Swipe，扩展您的`LinearLayout`并覆盖`onInterceptTouchEvent`其中，并将其传递给`GestureDetector`并处理其上的滚动。有关`GestureDetector`和 Swipe 的更多信息，请查看 Google`GestureDetector`和`SimpleOnGestureListener`示例。

# java - ArrayList和HashMap默认初始容量不等

> ID：13775842
> 
> 赞同：-1
> 
> 时间：2012-12-08T08:33:46.087
> 
> 标签：java

> **可能重复：**
> [为什么ArrayList的默认容量是10？](https://stackoverflow.com/questions/10794890/why-is-the-default-capacity-of-arraylist-is-10)

为什么默认初始容量`ArrayList`和`HashMap`不相等？

*   默认初始容量`ArrayList`：10
*   默认初始容量`HashMap`：16

容量也是`HashMap`2 的幂，但不是`ArrayList`。这是根据JDK6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:45:08.930

HashMap 使用一个数组，该数组的大小必须是 2 的幂（根据文档）。所以我猜他们选择的初始容量是最低值，至少等于 ArrayList 的初始容量。

而这两个数字也可能是根据实际程序的统计数据选择的，以便在性能和内存消耗之间进行最佳权衡。

你只能猜测，除非 Josh Bloch 进来并解释为什么在设计集合框架时选择这些数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T08:45:36.727

根据 HashMap 源代码中的注释，它必须是 2 的幂。由于散列的工作方式，它在 HashMap 中是有意义的。

但是，没有理由说明 2 的幂在数组列表中有意义。如果选择这样一个数字背后有任何原因，那么来源本身就会提到它。

恕我直言，它只是一个任意数字，足够大以避免频繁调整大小（更好的性能），并且足够小不会在未使用的容量上浪费内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T08:45:19.923

ArrayList 的初始容量取决于JVM 的实现（即官方对这个值没有要求）。所以你可能有 10 个或 16 个，这取决于你使用的 JVM。

# r - 如何匹配R中的简单交替模式列表

> ID：13775844
> 
> 赞同：1
> 
> 时间：2012-12-08T08:34:11.200
> 
> 标签：r, pattern-matching

在 R 中，我有一个整数向量。

```
run <- sample.int(9, 1000, replace=T)
run[sample.int(1000, 100)] <- NA 
```

如果至少存在以下模式之一，`c(1, x, 1, y)`或者`c(x, 1, y, 1)`其中`x`和`y`是整数或 NA，我想打印出每个模式的起始索引并更新每个模式实例的计数变量。这样做最有效的方法是什么？

我正在考虑使用该`rle`函数并测试每 4 个长度为 1 的连续值，然后测试它们是否符合其中一种模式。但是，我在使用这种方法时遇到了 NA 问题，因为每个 NA 都是单独处理的。也许有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:05:38.300

将您的使用`sample.int`视为暗示您的向量仅包含来自`1:9`and的值`NA`，这是一种正则表达式方法：

```
run <- c(1, NA, 1, 3, 1, 1, NA, NA, NA, 1)
run[is.na(run)] <- 0
pat1 <- "(?=1[0-9]1[0-9])" # using a lookahead assertion around the pattern is a way to allow overlapping matches
pat1.idxs <- unlist(gregexpr(pat1, paste(run, collapse=''), perl=TRUE))
pat1.idxs
# match indexes
# [1] 1 3
length(pat1.idxs)
# counts
# [1] 2 
```

然后你会类似地做第二种模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T08:45:15.463

这种任务可以通过包中的`rollapply`函数来完成`zoo`。

```
set.seed(42)
run <- sample.int(9, 1000, replace=T)
run[sample.int(1000, 100)] <- NA

# a list of the patterns
pattern <- list(c(1, NA, 1, NA), c(NA, 1, NA, 1))

library(zoo)

colSums(rollapply(run, length(pattern[[1]]),
                  function(x) sapply(pattern, identical, x))) 
```

结果是一个包含`pattern`列表中模式计数的向量：

```
[1] 0 0 
```

*注意*。如果模式的长度不同，`rollapply`则必须执行多次。

# java - 使用java从数据库和文本文件中匹配内容

> ID：13775845
> 
> 赞同：-1
> 
> 时间：2012-12-08T08:34:19.807
> 
> 标签：java, sql, jdbc, text-files

我有一个数据库，其中有 3 列（id、name、info_link）。

我将**id**和**名称**存储在数据库中。

我有一个文本文件，其中所有信息链接都被刮掉了。

信息链接的形式为：`http://someURL/**Name**.htm`

现在我要做的是从数据库中取一个名称，从链接的文本文件中读取一行，查找链接（行）是否包含该药物名称，将该链接放在记录的 info_link 列中。

这就是我的代码

```
BufferedReader reader = new BufferedReader(new FileReader("./Links.txt"));
BufferedWriter writer = new BufferedWriter(new FileWriter("./AddedLinks.txt"));
int id = 1;
//Creates a connection to the Database
connection = DriverManager.getConnection(DB_URL,DB_USER,DB_PASS);

statement = connection.createStatement();
for(id=1;id<=1153;)
{   
   query = statement.executeQuery("SELECT name FROM drug_list WHERE id = '"+id+"';");
   query.next();
   String name = query.getString(1);
   String words[] = name.split(" ");
   String Myvalue = reader.readLine();
   boolean Found = false;
   while(!Found)
      if(Myvalue.toLowerCase().contains(words[0].toLowerCase()))
      {
         Boolean f = false;
         System.out.println("Found"+name);
         update = connection.prepareStatement("UPDATE drug_list SET info_link = ? WHERE id = ?;");
         update.setString(1, Myvalue);
         update.setInt(2, id);
         f = update.execute();
         if(!f)
         {
            System.out.println("QSE");
            id++;
            writer.write(Myvalue);
            Found = true;
         }

      }
      else
      {
         System.out.println("Could Not Find"+name+"\n");
         id++;
         Found = false;
      }
} 
```

我能够匹配必须在单字上处理的容器链接。但问题是

我有一个像这样的药物名称

*   沙丁胺醇（沙丁胺醇）
*   多佐胺/噻吗洛尔

ETC..

以及他们的相应链接，例如：

```
 - http://Somelink/**albuterol_salbutamol**.htm
 - http://Somelink/**dorzolamide_timolol**.htm 
```

数据库中还有一些名称在文本文件中没有相应的链接，我也想跳过这些。我的数据库中总共有 1153 个值。

我也有一些药物名称，例如

*   钙的东西
*   钙 东西 东西
*   钙不是什么

因此，如果我仅匹配我拆分的单词 [0]，则会产生问题。因为它只会更新 Calcium Something Field 的所有值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:16:49.373

您使用正则表达式来拆分单词。就像是

```
String words[] = a.split("[/()]"); 
```

并迭代并检查所有单词，而不仅仅是一个单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:03:26.853

好的，这就是我要做的：遍历您的姓名并使用带有空格的 split() 作为分隔符来获取数组中的每个单词。然后，对于每个链接，获取从最后一个破折号到“.htm”的子字符串（当然，取决于链接的设置方式。您也可以跳过此步骤）。然后，在该字符串上，检查名称数组中的每个项目是否包含在链接中。为每个匹配计算一个整数值，并将其与链接一起保存，例如在数组、HashMap 等中（或者仅将匹配最多的链接保留在变量中，如果您找到匹配更高的链接，则可以更新） . 最后，选择匹配最多的链接。

目前，如果我没看错，您已经在拆分，但您只使用该数组的第一个值。

当然，这不是万无一失的，但这是我能想到的最好的了。如果您想排除任何错误，您将不得不手动检查结果。

# java - Java 小程序的 PKI 标准

> ID：13775854
> 
> 赞同：0
> 
> 时间：2012-12-08T08:35:42.577
> 
> 标签：java, applet, pki

我正在开发一个 java 小程序来从他的数字证书中访问客户的私钥和公钥。目前我可以从数字证书中访问私钥和公钥，但我怀疑我是否违反了 PKI 标准。因此，我有以下问题，

1.  与通过 Java 小程序从证书访问私钥相关的 PKI 标准是什么？
2.  我们可以通过java小程序访问私钥并存储它吗？
3.  我们应该在小程序中编写密码学代码吗？如果不是，那么根据 PKI 标准从用户的数字证书访问用户的私钥和公钥的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:44:19.920

公钥密码学应该提供[不可否认性](http://en.wikipedia.org/wiki/Non-repudiation)，但是如果您将私钥“存储”在卡以外的某个地方，那么您就打破了一个重要的假设“私钥只有其持有者知道”。

使用此密钥在小程序中计算数字签名是另一回事，这就是它们的用途（私钥）。如果您不通过网络传输或传输私钥，或将私钥传输到卡以外的任何其他存储位置，则您不会放弃任何假设。您的小程序应仅将私钥用于计算数字签名。

# video - 如何从 http 响应中找出视频文件的持续时间

> ID：13775856
> 
> 赞同：0
> 
> 时间：2012-12-08T08:36:11.733
> 
> 标签：video, http-headers, httpresponse, duration

使用 IDM 下载视频文件时，有时会显示视频的持续时间而不是字节长度。这怎么可能？
我记得，在 http 响应标头中没有关于特定文件格式（例如视频文件）的特定信息（例如视频帧速率或长度）。

# javascript - 如何创建正则表达式以从 url 中提取主题 ID？

> ID：13775862
> 
> 赞同：0
> 
> 时间：2012-12-08T08:37:38.353
> 
> 标签：javascript, jquery, regex

我的页面上有带有文本`url`字段的表单。用户可以在那里输入任何值，例如：

*   [http://example.com/forum/viewtopic.php?t=557761&sid=daea20300c8eea4681fd1d87aa76c622](http://example.com/forum/viewtopic.php?t=557761&sid=daea20300c8eea4681fd1d87aa76c622)
*   [http://www.example.com/forum/viewtopic.php?t=557761&sid=daea20300c8eea4681fd1d87aa76c622](http://www.example.com/forum/viewtopic.php?t=557761&sid=daea20300c8eea4681fd1d87aa76c622)
*   www.example.com/forum/viewtopic.php?t=557761&z=123456
*   example.com/forum/viewtopic.php?t=557761&sid=daea20300c8eea4681fd1d87aa76c622
*   557761

如何验证是否给出了正确的域 ( `example.com`)，然后提取主题 ID ( `557761`)？

看起来我应该`jQuery.isNumeric`首先使用（以捕获最后一种情况），如果它不是数字，那么我可以提取像`/^.*t=(\d+)$/`. 但是我应该如何检查正则表达式中的域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:52:43.853

这将适用于所有情况，除了您说您已经有解决方案的最后一种情况。

```
var pattern = "^(?:http(?:s)?://)?(?:www\.)?example\.com/forum/viewtopic\.php\?t=(\d+)";
var regex = new RegExp(pattern, "i");
var match = regex.exec(string);
if (match) {
    alert(match[1]);
} 
```

如果您不介意可读性较差的正则表达式模式，那么以下内容将用于捕获您的所有案例（包括最后一个案例）。只需将`pattern`上面代码中的行替换为下面的行。

```
var pattern = "(?:(?:^(?:http(?:s)?://)?(?:www\.)?example\.com/forum/viewtopic\.php\?t=(\d+))|(^\d+$))"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:11:06.610

`(?<=example\.com/forum/viewtopic.php\?t=)\d+(?=\&)`

[http://regexr.com?33333](http://regexr.com?33333)

这应该适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T08:46:08.657

这应该做的工作：

```
var domain = "example.com"
var regex = "http://(www)?"+domain+"/.+?t=([0-9]+)";
var match = regex.exec(inputString);
var topicId = match[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T09:47:47.990

`<a>`您可以使用一个元素来利用浏览器的 URL 解析器：

```
var myhost = "example.com";

// Here url is the data given in the text input field
var hostname = $('<a>').prop('href', url).prop('hostname');
if (myhost == hostname) {
    alert('Host matched!');
}​ 
```

# javascript - iOS Web App：随着方向变化旋转身体

> ID：13775867
> 
> 赞同：0
> 
> 时间：2012-12-08T08:38:19.927
> 
> 标签：javascript, html, ios, css, orientation

我有一个我设计的像素完美的 iOS Web App 游戏，所以它只能在纵向模式下工作（在横向模式下，一半的游戏在屏幕下方）。我想这样做，如果用户旋转设备，网络应用程序也会旋转，迫使用户将其旋转回纵向模式。我知道我可以使用“window.onorientationchange”检测方向变化，并且可以使用 orient CSS 属性：body[orient="landscape"] 或 body[orient="portrait"] 根据方向更改样式。现在我只需要知道如何在保持布局的同时旋转整个身体。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:55:34.927

使用 css 对身体应用旋转变换。

```
 -webkit-transform:rotate(180deg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:27:42.857

经过更多的研究，这就是我想出的。这适用于我的第 5 代 iPod Touch 上的全屏 Web 应用程序（Safari 导航栏太笨重）

```
window.onorientationchange = function() {reorient();}

//finds the center of a 90 degree rotation based on the current and projected coordinates of a point, and if the rotation is clockwise or not
function findCenter(curr, next, clockwise) {
    midLenX = (next[0] - curr[0])/2;
    midLenY = (next[1] - curr[1])/2;
    centerX = curr[0] + midLenX + ((clockwise)? -midLenY : midLenY);
    centerY = curr[1] + midLenY + ((clockwise)? midLenX : -midLenX);
    return [centerX,centerY];
}

function reorient() {
    if (window.orientation %180 == 0) { //portrait mode, reset rotation
        document.body.style.webkitTransform = "";
    } else if (window.orientation == -90) { //clockwise rotation
        var center = findCenter([0,0], [960,0], true);
        document.body.style.webkitTransformOrigin = center[0] + "px " + (center[1]-10) + "px";
        document.body.style.webkitTransform = 'rotate(90deg)';
    } else { //counterclockwise rotation
        var center = findCenter([0,0], [0,640], false);
        document.body.style.webkitTransformOrigin = (center[0]-30) + "px " + (center[1]-20) + "px";
        document.body.style.webkitTransform = 'rotate(-90deg)';
    }
} 
```

请注意，webkitTransformOrigin 中修改后的中心坐标，例如“(center[0]-30)”，只是为了考虑状态栏而进行的粗略调整。相应地调整它

# sql - SQL 嵌套内部联接在大约日期

> ID：13775870
> 
> 赞同：0
> 
> 时间：2012-12-08T08:38:49.947
> 
> 标签：sql, date, join, nested

我希望有人可以帮助我解决这个问题。我目前正在运行这个 sql 命令来获取一些数据到我的 excel 工作表中，这让我发疯了。

我有 3 张桌子需要合并

*   sup = 每小时供应数据
*   审计 = 记录事情到达的时间（sup & Meters）
*   米 = 米的每日数据

在事情开始失控之前，我基本上到达了这里。我可以让 sup 和 aud 合并，我可以让 Meters 和 aud 合并。虽然我无法为有问题的供应选择顶部仪表。

```
SELECT      sup.*, aud.*, meters.*
FROM        SuppliesData AS sup
INNER JOIN  Audit As aud
ON          sup.AuditID = aud.AuditID 
    WHERE   sup.DeviceID = '14365' 
INNER JOIN  (
    SELECT TOP 1
    From    MeterAudit AS meters
    INNER JOIN aud
    ON aud.AuditID=meters.AuditID 
    WHERE meters.DeviceID='14365' AND sup.AuditDate > meters.AuditDate// << I am so confused now...
    ORDER by    aud.AuditDate ASC
    )
ORDER by    aud.AuditDate ASC 
```

我很抱歉尝试理解我的混乱。

本质上， sup 和 Meters 都没有 AuditDate 字段。我需要将 AuditDate 字段应用于耗材，然后为每个耗材抓取最近的仪表。正是嵌套（您可能会看到）正在让我...我看到的所有错误都是“FROM 周围的语法不正确”

任何帮助将不胜感激，

对于参考，以下代码可以正常工作

```
SELECT  sup.*, aud.*
// -  simply changing SuppliesData to MeterAudit changes everything perfectly.
FROM    SuppliesData AS sup 
INNER JOIN  Audit As aud
ON  sup.AuditID = aud.AuditID 
WHERE DeviceID = '14365' 
ORDER by    aud.AuditDate ASC 
```

jc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:44:10.603

试试这个：

```
SELECT      sup.*, aud.*, meters.*
FROM        SuppliesData AS sup
INNER JOIN  Audit As aud ON  sup.AuditID  = aud.AuditID 
                         AND sup.DeviceID = aud.DeviceID 
INNER JOIN  
(
    SELECT AuditID, MAX(AuditDate) MaxDate
    From    MeterAudit
    GROUP BY AuditID
) Maxa ON aud.AuditID = maxa.AuditID AND sup.AuditDate = maxa.AuditDate
WHERE   sup.DeviceID = '14365' 
```

# php - 将表单中的值插入数组，然后插入数据库

> ID：13775874
> 
> 赞同：1
> 
> 时间：2012-12-08T08:39:11.903
> 
> 标签：php, mysql, arrays, forms

我想将用户值从 HTML 表单获取到数组，然后将其插入 mysql 数据库。它将正确的值插入数据库，然后给出以下错误：

> 注意：未定义索引：第 153 行 C:\wamp\www\Capturing System\All_Topics_widget.php 中的 TopicNum

以下内容位于页面顶部：

```
<?php 
include 'scripts/functions/init.php';
Restrict(); 
```

?>

```
$userid = $_SESSION['userid'];
$KM_Number = $_SESSION['C_KM'];
$query = "SELECT * FROM knowledge_modules where km_number = "."'".$KM_Number."'";
$Knowledge = mysql_query($query) or die(mysql_error);
$row = mysql_fetch_assoc($Knowledge);
$Module_type = 'Knowledge Modules';
$Purpose_M = $_SESSION['Purpose_KM'];
$KM = 'KM';
$NUM = $_SESSION['KM'];
$KT = 'KT';

if (empty($_POST)=== false)
    {
        $R_fields = array('Topic_Num','Title','Weight');
        foreach($_POST as $key=>$value)
        {
            if (empty($value) && in_array($key,$R_fields)=== true)
                {
                    $errors[] = 'fields marked with (*) are required';
                    break 1;
                }
        }

        if(empty($errors)=== true)
            {
                if(topic_exists($_POST['TopicNum']))
                    {
                        $errors[] = 'Sorry, the Topic already exist!';
                    }

            }
    } 
```

?> 以下代码在 HTML 标签中：

```
<h2>Tools - </h2>

            <form action="All_Topics_widget.php" method="POST" enctype="multipart/form-data">
              <fieldset>
                <table border="0">
                    <tr>
                        <td><label for="TopicNum">Topic Number:*&nbsp<?php echo $KM.'-'.$NUM.'-'.$KT ?></label></td>
                        <td><input type="text" size="5" name="TopicNum" /></td>
                    </tr>
                    <tr>
                        <td><label for="Title">Title:*</label></td>
                        <td><input type="Text" size="35" name="Title"/></td>
                    </tr>
                    <tr>
                        <td><label for="Weight">Weight:*</label></td>
                        <td><input type="text" size="05" name="Weight" /></td>

                    </tr>

                </table>
            </fieldset>
              <fieldset>
                       <table border="0">
                            <tr>
                                <td><input id="Submit" type="submit" value="Capture" /></td>
                                <td><input id="Reset1" type="reset" value="reset" /></td>
                                 <td><a href="list_topics.php">Capture Topics</a></td>

                           </tr>
                        </table>
              </fieldset>
              <?php

                    $Topics = $KM.'-'.$NUM.'-'.$KT.$_POST['TopicNum'];//This is line 153
                    if(isset($_GET['success']) && empty($_GET['success']))
                        {
                            echo 'Succefully Captured';
                        }
                    else
                        {
                            if(empty($_POST) == false && empty($errors)== true)
                                {

                                    //Capture data from the fields to an array
                                    $capture_topic = array(
                                    'TopicNum' => $Topics,
                                    'Title'=>$_POST['Title'],
                                    'Weight'=>$_POST['Weight'],
                                    'Purpose_M'=>$Purpose_M,
                                    'userid'=>$userid);                                     

                                    //Submit the data into the database
                                    capture_topic($capture_topic);
                                    //redirect to the Modules widget page till the user press NEXT Page
                                    header('Location: All_Topics_widget.php?success');
                                    exit();

                                }

                            else if(empty($errors)== false)
                                {
                                    //Display errors

                                    echo output($errors);
                                }
                        }

              ?>
       </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:48:39.660

看这个

```
 header('Location: All_Topics_widget.php?success');
                            exit(); 
```

成功处理 POST 数据后，将脚本重定向到自身。在此重定向之后，POST 数据不存在。

改写

```
 $Topics = $KM.'-'.$NUM.'-'.$KT.$_POST['TopicNum'];//This is line 153
            if(isset($_GET['success']) && empty($_GET['success']))
                {
                    echo 'Succefully Captured';
                }
            else
                {
                    if(empty($_POST) == false && empty($errors)== true) 
```

作为

```
 if(isset($_GET['success']) && empty($_GET['success']))
                {
                    echo 'Succefully Captured';
                }
            else
                {
                    $Topics = $KM.'-'.$NUM.'-'.$KT.$_POST['TopicNum'];
                    if(empty($_POST) == false && empty($errors)== true) 
```

禁止通知。

请注意必填字段数组中的内容

```
$R_fields = array('Topic_Num','Title','Weight'); 
```

您希望看到一个名为 Topic_Num 的文件，但在您的表单中它的名称是 TopicNum

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T09:14:13.517

这`Notice`是因为您 `$_POST['TopicNum']`在第 153 行引用，此时`$_POST[]`不再设置此变量。

尝试在里面移动 153 行 `if(empty($_POST) == false && empty($errors)== true) {}`

```
 if(empty($_POST) == false && empty($errors)== true)
        {
        $Topics = $KM.'-'.$NUM.'-'.$KT.$_POST['TopicNum'];//This is line 153
         ...
         } 
```

这就是为什么它导致`Notice`-

1=>您提交/发布表单，因此`$_POST['TopicNum']`在第 153 行设置和使用。
2=>您在第 172 行将值输入数据库`capture_topic($capture_topic);`
3=>您重定向到 174 上的页面`header('Location: All_Topics_widget.php?success');`，从而清除`$_POST[]`全局变量，所以当它在 153 上再次调用它现在未定义。通过将其移动到您的支票中，`if(empty($_POST) == false && empty($errors)== true)`它只会在表单已提交/发布时作为参考

# java - Struts2-interceptor 文件校验

> ID：13775875
> 
> 赞同：0
> 
> 时间：2012-12-08T08:39:13.633
> 
> 标签：java, file-upload, struts2, interceptor

我正在使用 Struts2 和 Apache POI jar。在我的项目中，我必须上传一个 Excel 文件，而在我的操作中，我必须阅读这个 Excel 文件。对于预操作，我使用 Struts2 文件上传拦截器。除了一件事，一切都运行良好。如何使用 Struts2 拦截器检查 Excel 文件是否为空？是否可以检查上传文件是否为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:53:48.940

1，在拦截器本身中，您可以调用自定义类，您可以在其中进行检查。

2，在配置文件中提及大小时检查文件大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:15:05.280

您可以在上传文件的操作中执行此操作：

```
 public class UploadAction extends ActionSupport
   { 
       File upload;
       //Other properties

       public String execute(){
        if (!fileValid()){
           return INPUT;
        }
        //Your stuff...
        return SUCCESS;
       }

       private boolean fileValid(){
          return upload != null;
          //You can do other checks here...
        }

   } 
```

# json - Jersey 客户端无法反序列化 json 服务 - 异常（无法反序列化实例）

> ID：13775881
> 
> 赞同：1
> 
> 时间：2012-12-08T08:41:02.817
> 
> 标签：json, jersey, deserialization

**JSON响应：**

```
{
    "categories": [{
            "id": "1",
            "category": "category1"
        },
        {
            "id": "2",
            "category": "category2"
        }
    ]
} 
```

**JSON 泽西服务：**

```
@GET
@Produces("application/json")
public List<Categories> GetAllCategories() {
    return CategoriesDAO.getInstance().getAll();
} 
```

我使用 EJB 注释进行休眠映射，使用 jaxB 进行反序列化和序列化 JSON。

**模型：**

```
@Entity
@XmlRootElement
public class Categories {
    /** @pdOid f9032734-7d05-4867-8275-bf10813c3748 */
    @Id
    @GeneratedValue
    private Integer id;
    private String category;

    public Categories() {
        // TODO Add your own initialization code here.
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer newId) {
        this.id = newId;
    }

    public String getCategory() {
        return category;
    }

    public void setCategory(String newCategory) {
        this.category = newCategory;
    }
} 
```

**泽西客户端代码：**

```
ClientConfig clientConfig = new DefaultClientConfig();
clientConfig.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, Boolean.TRUE);
Client client = Client.create(clientConfig);
WebResource r = client.resource("http://tomcat.com/GetAllCategories");
List<Categories> output = r.get(new GenericType<List<Categories>>() {}); 
```

**例外：**

```
Exception in thread "main" com.sun.jersey.api.client.ClientHandlerException: org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.util.ArrayList out of START_OBJECT token
 at [Source: sun.net.www.protocol.http.HttpURLConnection$HttpInputStream@cc4364; line: 1, column: 1]
    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:564)
    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:524)
    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:696)
    at com.sun.jersey.api.client.WebResource.get(WebResource.java:196)
    at com.fit.test.Json.GetAllKategorijeJson.main(GetAllKategorijeJson.java:34)
Caused by: org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.util.ArrayList out of START_OBJECT token
 at [Source: sun.net.www.protocol.http.HttpURLConnection$HttpInputStream@cc4364; line: 1, column: 1]
    at org.codehaus.jackson.map.JsonMappingException.from(JsonMappingException.java:163)
    at org.codehaus.jackson.map.deser.StdDeserializationContext.mappingException(StdDeserializationContext.java:219)
    at org.codehaus.jackson.map.deser.StdDeserializationContext.mappingException(StdDeserializationContext.java:212)
    at org.codehaus.jackson.map.deser.std.CollectionDeserializer.handleNonArray(CollectionDeserializer.java:246)
    at org.codehaus.jackson.map.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:204)
    at org.codehaus.jackson.map.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:194)
    at org.codehaus.jackson.map.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:30)
    at org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:2695)
    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1308)
    at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:419)
    at com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy.readFrom(JacksonProviderProxy.java:139)
    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:554)
    ... 4 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:11:51.213

Brate，slusaj ......我有同样的问题。我正在构建一个简单的 Restful 服务，当 GET 方法执行得很好时，JAXB 从我的带有 JaxB 注释的 POJO 类返回 JSON。当我的方法是@Consuming JSON（POST、PUT 案例）时，我发现 JAXB 存在一些问题。

在构建 Jersey / JSON 服务时，最好使用 JACKSON 而不是 JaxB 注释（你会发现很多关于它的谷歌搜索）。问题是 JAXB 在从 JSON 到 POJO 对象的转换（反序列化）方面做得不好。带有 @XMLRootElement 的 JAXB 非常适合使用 XML，但不适用于 JSON。

这就是我在 web.xml 中启用 Jackson 对 JSON 的反序列化/序列化的内容：

```
<!--  JAXB works great with XML but with JSON it's much better to use Jackson. Jersey will use Jackson -->
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param> 
```

Google for .jar 文件需要包含在 Jersey 中才能使用 Jackson……祝你好运……

# image - 在 MATLAB 中裁剪直角三角形图像

> ID：13775886
> 
> 赞同：1
> 
> 时间：2012-12-08T08:41:44.927
> 
> 标签：image, matlab

我想提取图像的某个区域，特别是其中的三角形部分。我的图像大小`444x256x3`。下图说明了我要提取的部分：

![在此处输入图像描述](../Images/696699a194d8bb3d585faebf63551ee4.png)

我想提取由红色虚线（直角三角形）形成的三角形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:59:24.747

有一个很好的函数[roipoly](http://www.mathworks.nl/help/images/ref/roipoly.html)可以用来从一组顶点创建一个蒙版：

> `BW = roipoly(I, c, r)`返回由向量`c`和描述的多边形指定的 ROI `r`，它们分别指定每个顶点的列索引和行索引。`c`并且`r`必须是相同的大小。

所以到目前为止你所拥有的是：

```
imglena = imread('lena.png');
imshow(imglena)

siz = size(imglena);
c = [1 1      siz(2)/2];
r = [1 siz(1) siz(1)  ];
line([c c(1)],[r r(1)],'color','r','LineWidth',4); 
```

![在此处输入图像描述](../Images/adda9ef1c53e9118bc0c82cfe9d48935.png)

和三角形顶点的列和行`c`。`r`

前面提到的掩码现在可以用于提取原始图像的感兴趣区域：

```
mask = roipoly(imglena,c,r);
imglena_cropped=bsxfun(@times, imglena, cast(mask,class(imglena))); 
```

或者我更喜欢的方法，使用普通的逻辑索引而不是巨大的矩阵乘法：

```
mask = repmat(roipoly(imglena,c,r),[1 1 3]);
imglena_cropped = 255/2*ones(size(imglena),class(imglena));
imglena_cropped(mask) = imglena(mask); 
```

这样，您还可以更轻松地控制生成的背景颜色；例如，我将其设置为灰色。

最后，您可以使用以下方法修剪生成的图像：

```
imglena_cropped = imglena_cropped(min(r):max(r),min(c):max(c),:); 
```

![在此处输入图像描述](../Images/588f0441996f488098c78d7308572a16.png)

# c# - 使用通用键在节点结构中查找子节点？

> ID：13775890
> 
> 赞同：0
> 
> 时间：2012-12-08T08:42:39.967
> 
> 标签：c#, generics, .net-3.5

> **可能重复：**
> [不能将运算符 == 应用于 C# 中的泛型类型吗？](https://stackoverflow.com/questions/390900/cant-operator-be-applied-to-generic-types-in-c)

我有一个“GenericNode”-父/子结构，我正在尝试为其创建一个 Find 方法。

```
public class GenericNode<TKey, TName>
{
  private GenericNode<TKey, TName> parent;
  private readonly TKey key;
  private readonly TName name;
  private readonly ICollection<GenericNode<TKey, TName>> children;

  public GenericNode(TKey key, TName name) {
    this.key = key;
    this.name = name;
    children = new Collection<GenericNode<TKey, TName>>();
  }

  // AddChild etc...

  public GenericNode<TKey, TName> GetChildNodeById(TKey keyToFind)
  {
    return FindChild(node => node.key == keyToFind); // <--- THIS WON'T COMPILE
  }

  private GenericNode<TKey, TName> FindChild(Func<GenericNode<TKey, TName>, Boolean> matcher)
  {
    // Recursive search returning first matching node...
  }
} 
```

上面的（C# .NET 3.5）不起作用，因为它无法`node.key`与-method`keyToFind`进行比较。`GetChildNodeById`我一直在尝试不同的通用约束等，但没有运气。如何指定 TKey:s 是同一类型？

我可以创建一个带有 Guid 作为键的派生类，并将 GetChildNodeById 移动到该类，但如果可能的话，我想要一个通用的解决方案。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:54:30.080

有很多方法可以实现这一点：

1.  做一个约束，这样`TKey : IComprabale`你`GetNodeByKey`就可以调用`Compare`键了。

2.  做一个约束`TKey : IEquatable<TKey>`，这样你就可以调用`Equals`这个键了。

3.  不使用相等运算符，而是调用`Equals`键。请注意，您`NullReferenceException`这样做是有风险的，并且为了检查 key 是否为 null 您需要添加一个 constraint `TKey : class`。

4.  呼叫`Object.Equals`钥匙。请注意，如果您的键是值类型，这会影响性能，因为在调用`Object.Equals`它们时会被装箱。

5.  让树类的用户提供他的比较器。我建议采用标准 .NET 集合的模式。例如看看`Dictionary`可以带比较器的不同构造函数。

# python - 使用 pycurl 暂停和恢复下载

> ID：13775892
> 
> 赞同：2
> 
> 时间：2012-12-08T08:43:14.433
> 
> 标签：python, download, pycurl

我正在编写一个代码来使用`pycurl`. 所以我想知道是否有可能暂停我的下载，然后从暂停的地方恢复它？是否`pycurl`支持这些功能或者是否有任何其他支持暂停和恢复的库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-11T10:23:56.250

```
import os
import pycurl
import sys

def progress(total, existing, upload_t, upload_d):
    existing = existing + os.path.getsize(filename)
    try:
        frac = float(existing)/float(total)
    except:
        frac = 0
    sys.stdout.write("\r%s %3i%%" % ("File downloaded - ", frac*100))

url = raw_input('Enter URL to download folder/file: ')
filename = url.split("/")[-1].strip()

def test(debug_type, debug_msg):
    print "debug(%d): %s" % (debug_type, debug_msg)

c = pycurl.Curl()
c.setopt(pycurl.URL, url)
c.setopt(pycurl.FOLLOWLOCATION, 1)
c.setopt(pycurl.MAXREDIRS, 5)

# Setup writing
if os.path.exists(filename):
    f = open(filename, "ab")
    c.setopt(pycurl.RESUME_FROM, os.path.getsize(filename))
else:
    f = open(filename, "wb")

c.setopt(pycurl.WRITEDATA, f)

#c.setopt(pycurl.VERBOSE, 1) 
c.setopt(pycurl.DEBUGFUNCTION, test)
c.setopt(pycurl.NOPROGRESS, 0)
c.setopt(pycurl.PROGRESSFUNCTION, progress)
try:
    c.perform()
except:
    pass 
```

可以下载文件，例如 - *.tar、.dmg、.exe、jpg 等。

使用 pycurl 进行简历下载。

将此代码测试为：

*   在终端上运行此文件，如：

这是终端登录，

```
anupam@anupampc:~/Documents$ python resume_download.py 

Enter URL to download folder/file: http://nightly.openerp.com/6.0/6.0/openerp-allinone-setup-6.0-20110625-r3451.exe 

File downloaded - 199% 
```

如果您通过按 Ctrl + C 停止此下载并开始下载文件/文件夹的过程，它将从停止的位置开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:05:04.467

如果您停止线程并关闭连接，则可以使用 HTTP Content-Range 从中断的地方继续您的请求。只需找出您已经有多少字节，然后使用 RESUME_FROM 从那里开始：

```
import pycurl

starting_point = 999 # calculate this

url="http://test-url"
curl = pycurl.Curl()
curl.setopt(curl.URL, url)
curl.setopt(curl.RESUME_FROM, starting_point)
curl.perform()
curl.close() 
```

# c++ - 将结构转换为字节并返回结构

> ID：13775893
> 
> 赞同：25
> 
> 时间：2012-12-08T08:43:23.407
> 
> 标签：c++, struct, byte, arduino, xbee

我目前正在使用[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno) s、9DOFs 和[XBee](http://en.wikipedia.org/wiki/XBee) s，我正在尝试创建一个可以通过串行、逐字节发送的结构，然后重新构建成一个结构。

到目前为止，我有以下代码：

```
struct AMG_ANGLES {
    float yaw;
    float pitch;
    float roll;
};

int main() {
    AMG_ANGLES struct_data;

    struct_data.yaw = 87.96;
    struct_data.pitch = -114.58;
    struct_data.roll = 100.50;

    char* data = new char[sizeof(struct_data)];

    for(unsigned int i = 0; i<sizeof(struct_data); i++){
        // cout << (char*)(&struct_data+i) << endl;
        data[i] = (char*)(&struct_data+i); //Store the bytes of the struct to an array.
    }

    AMG_ANGLES* tmp = (AMG_ANGLES*)data; //Re-make the struct
    cout << tmp.yaw; //Display the yaw to see if it's correct.
} 
```

来源：[http ://codepad.org/xMgxGY9Q](http://codepad.org/xMgxGY9Q)

这段代码似乎不起作用，我不确定我做错了什么。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-08T08:56:52.963

看来我已经用下面的代码解决了我的问题。

```
struct AMG_ANGLES {
    float yaw;
    float pitch;
    float roll;
};

int main() {
    AMG_ANGLES struct_data;

    struct_data.yaw = 87.96;
    struct_data.pitch = -114.58;
    struct_data.roll = 100.50;

    //Sending Side
    char b[sizeof(struct_data)];
    memcpy(b, &struct_data, sizeof(struct_data));

    //Receiving Side
    AMG_ANGLES tmp; //Re-make the struct
    memcpy(&tmp, b, sizeof(tmp));
    cout << tmp.yaw; //Display the yaw to see if it's correct
} 
```

警告：此代码仅在发送和接收使用相同的[字节序](http://en.wikipedia.org/wiki/Endianness)架构时才有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-08T08:48:49.937

你做事的顺序不对，表达

```
&struct_data+i 
```

获取的地址`struct_data`并将其增加`i` *结构大小的倍数*。

试试这个：

```
*((char *) &struct_data + i) 
```

这会将地址转换`struct_data`为 a`char *`然后添加索引，然后使用解引用运算符（一元*）*`*`获取该地址处的“char”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-09T20:01:47.383

始终充分利用数据结构。

```
union AMG_ANGLES {
  struct {
    float yaw;
    float pitch;
    float roll;
  }data;
  char  size8[3*8];
  int   size32[3*4];
  float size64[3*1];
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T08:53:26.803

```
for(unsigned int i = 0; i<sizeof(struct_data); i++){
    // +i has to be outside of the parentheses in order to increment the address
    // by the size of a char. Otherwise you would increment by the size of
    // struct_data. You also have to dereference the whole thing, or you will
    // assign an address to data[i]
    data[i] = *((char*)(&struct_data) + i); 
}

AMG_ANGLES* tmp = (AMG_ANGLES*)data; //Re-Make the struct
//tmp is a pointer so you have to use -> which is shorthand for (*tmp).yaw
cout << tmp->yaw; 
} 
```

# python - 如何用 Python 重新组织 CSV 文件？

> ID：13775894
> 
> 赞同：-4
> 
> 时间：2012-12-08T08:43:26.793
> 
> 标签：python, csv, gephi

如何用 Python 重新组织 CSV 文件？我的看起来像这样：

```
.......................<BR>
1987
martin
2012-01-16
1976
roger<BR>
1987
martin
2012-01-17
1979
michael<BR>
1969
maria
2012-01-26
1979
michael<BR>
...................................... 
```

这些代表上面的出生年份和下面的名字。中间是他们建立联系的日期。块之间也有一些空行。

每个 5 行块代表两个人并且他们已经联系过其他人。所以基本上每个 5 行块是两个节点和它们之间的链接。

我想在 Gephi 中导入它，因此需要重新组织 CSV 文件。可能是 GEXF（图形交换 XML 格式）。否则，像这样简单的 CSV 就可以了：

```
................................<BR>
Source;Target;Label<BR>
1987 martin;1976 roger;"2012-01-16"<BR>
1987 martin;1979 michael;"2012-01-17"<BR> 
```

等等。如何处理 CSV 使其看起来像上面那样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:12:06.553

Python 带有一个[CSV 模块](http://docs.python.org/2/library/csv.html)，当使用正确的分隔符设置时，它会为您解析第一个文件。如果您想要问题中的第二种格式的输出，您可以再次使用 CSV 模块（当然使用不同的分隔符）来创建它。

如果您想要基于 XML 的格式，Python 附带了许多不同的 XML 模块 - 请参阅文档[中的标记模块列表](http://docs.python.org/2/library/markup.html)。您还可以通过网络搜索找到一些附加的 XML 模块。

[此外，对Python GEXF](https://www.google.co.nz/search?ie=UTF-8&q=Python+GEXF)进行简单的 Google 搜索会发现几个用于处理 GEXF 的模块。

现在您的基础研究已经为您完成，请尝试编写一些代码，然后返回您遇到的任何具体问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T20:53:47.680

在excel中打开你的文本文件。转换文本 -> 以空格作为分隔符的列。通过拖放重新组织列。另存为 CSV。

# php - jQuery 保留最后一次点击并发送更多数据

> ID：13775896
> 
> 赞同：0
> 
> 时间：2012-12-08T08:43:57.713
> 
> 标签：php, jquery

有人能告诉我为什么每次我点击一个有 jQuery 发布功能的按钮时，它会发送两次帖子，而下次我按下按钮时，它会发送两倍于上次的信息，依此类推？我在谷歌上搜索，我发现`unbind()`但它工作得不是很好，我不知道在谷歌上搜索什么来解决这个问题。

```
$(document).ready(function(){
  $("#button").click(function(){
    $.post("includes/document.php",
    function(data) {
      $("#body").html(data);
    });
  });
}); 
```

的HTML：

```
<div id="body">
    <div id="name">
        <p>Username </p>
        <input id="nameInput" type="text">
    </div>
    <div id="button">Press Me</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:18:30.400

为什么不使用直播。

```
$(function(){
  $("#button").live("click",function(){
    $.post("includes/document.php",
    function(data) {
      $("#body").html(data);
    });
  });
}); 
```

Jquery.live 处理事件委托并删除附加到先前呈现的元素的任何幽灵事件侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T10:48:47.587

好吧，很多时候我也面临同样的要求。

首先取消绑定事件，然后再次绑定。

您可以执行以下代码

```
$(document).ready(function(){

  $("#button").unbind("click").bind("click",function(){

    $.post("includes/document.php",
            function(data) {
              $("#body").html(data);
            });

    });

});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T09:12:00.963

试试这个：

```
$("#button").click(function(){
    // Your code...
    $.post();

    // just add return false here
    return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T09:07:49.247

如果您没有将多个`click`事件绑定到`div#button`，请仔细检查您没有在页面中多次包含您的 jQuery。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T11:43:00.480

检查在#body div之外放置按钮是否可以解决问题....

# java - 使用 Antlr 解析单行 C 风格的注释

> ID：13775901
> 
> 赞同：5
> 
> 时间：2012-12-08T08:44:37.803
> 
> 标签：java, antlr

我为一种理解 C 风格单行注释的小语言编写了一个语法，例如。

```
 // this is a comment 
```

这是我为这种语言编写的语法片段，使用 antlr v3.0.1

```
 SINGLELINE_COMMENT
:   '/' '/' (options {greedy=false;} : ~('\r' | '\n'))* ('\r' | '\n' )+ {$channel=HIDDEN;};

  WS      :      (' '|'\r'|'\t'|'\u000C'|'\n')+ {$channel=HIDDEN;}; 
```

这几乎是一种工作，除了当注释在脚本中最后并且没有终止 NL/CR 时，我从 antlr 收到一条烦人的消息（在运行时）：

```
 line 1:20 required (...)+ loop did not match anything at character '<EOF>' 
```

我怎样才能摆脱这个消息？我尝试将`EOF`令牌添加到`(..)+`表达式中，但这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T09:11:50.987

您不需要该`greedy=...`选项：当您拥有`.*`或`.+`在您的规则中时，您通常需要它。而且由于您已经在规则中的隐藏通道上放置了换行符`WS`，您可以将其从您的`SINGLELINE_COMMENT`:

```
SINGLELINE_COMMENT
 : '//' ~('\r' | '\n')* {$channel=HIDDEN;}
 ;

WS 
 : (' '|'\r'|'\t'|'\u000C'|'\n')+ {$channel=HIDDEN;}
 ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T03:18:59.753

一般来说，解决“没有终止的 NL”问题会涉及到很多曲折的语法更改以适应这种边缘条件。只在输入流的末尾添加一个 NL 总是更简单，这意味着您可以保证有一个终止的 NL 而不必担心语法中的它。UNIX 在这方面是正确的，而 Windows 则不然。

不是针对您的特定问题的解决方案，而是您最初编码规则的方式暴露了这个问题。

# java - Android 应用程序导致 SIGSEV，我该如何调试？

> ID：13775909
> 
> 赞同：0
> 
> 时间：2012-12-08T08:45:36.260
> 
> 标签：java, android

据我了解，除非使用本机代码，否则我们不应该看到这些，我绝对不会。我只是调用一堆获取 Web 数据并填充列表视图的 AsyncTask。

我该如何调试它？绝对没有任何迹象表明它是什么原因造成的，而且它非常一致，每 6 或 7 次我的操作中就有 1 次发生，它只发生在 GNex 上，而不是在模拟器中。将大量的 logcat 放在它周围是唯一的方法吗？

```
12-08 00:26:03.362: D/dalvikvm(10906): GC_CONCURRENT freed 651K, 12% free 10861K/12320K, paused 4ms+9ms, total 52ms
12-08 00:26:03.362: D/dalvikvm(10906): WAIT_FOR_CONCURRENT_GC blocked 18ms
12-08 00:26:03.362: D/dalvikvm(10906): WAIT_FOR_CONCURRENT_GC blocked 6ms
12-08 00:26:03.401: A/libc(10906): Fatal signal 11 (SIGSEGV), thread 10958 (pool-1-thread-9)
12-08 00:26:03.401: A/libc(10906): Fatal signal 11 (SIGSEGV) at 0x637f4008 (code=1), thread 10923 (pool-2-thread-1)
12-08 00:26:04.330: I/Choreographer(10906): Skipped 47 frames!  The application may be doing too much work on its main thread. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:16:48.870

> 我该如何调试它？

很可能，你不知道。你把它报告给别人修复。

首先，创建一个可以重现错误的示例项目。

然后：

*   如果您在 ROM mod 上遇到此问题，并且它在标准 Android 环境中正常工作，请针对 ROM mod 提交错误报告，提供您的示例项目和完整的 LogCat 输出（包括来自 SIGSEGV 的所有核心转储，如果可用)

*   如果您在特定制造商的设备而不是其他环境（例如仿真器）上遇到此问题，请尝试联系有问题的制造商。例如，HTC 倾向于`htc`在 StackOverflow 上监控标签。

*   如果您在模拟器、Nexus 设备（运行库存 ROM）或来自不同制造商的多个设备中遇到此问题，则问题可能出在 Android 本身，因此请在[http://b.android.com](http://b.android.com)上提交问题包含示例项目、LogCat 转储和重现错误的步骤

在记录和注释掉你的应用程序的某些部分（或者可能在调试器中运行它，如果你可以在那里重现错误）之间，你应该能够掌握你的代码的哪一段触发了 SIGSEGV。这可以为您提供数据，或许有助于解决问题，此外，它还可以让您了解在示例项目中放置什么来重现错误。

# .htaccess - 使用 .htaccess 更改样式表 url

> ID：13775911
> 
> 赞同：1
> 
> 时间：2012-12-08T08:45:47.837
> 
> 标签：.htaccess

我想要网址：

```
http://localhost/application/cms/css/style.css 
```

要去

```
/application/www/cms/css/style.css 
```

“应用程序”文件夹是我的根目录，我的 .htaccess 文件和 index.php 所在的位置。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:50:49.457

通过 httpd.conf 启用 mod_rewrite 和 .htaccess，然后将此代码放在 DOCUMENT_ROOT 目录下的 .htaccess 中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(application)/([^/]+/css/style\.css)$ /$1/www/$2 [R,L,NC] 
```

# ios - CMAttitudeReferenceFrameXArbitraryZVertical 中的 Z 轴到底是什么，X 轴是否会根据用户的运动而变化？

> ID：13775916
> 
> 赞同：4
> 
> 时间：2012-12-08T08:46:31.377
> 
> 标签：ios, core-motion

我正在使用核心运动来获取在 iPod touch 3 上运行项目的设备运动。我的方法中使用的 CMAttitudeReferenceFrame - (void)startDeviceMotionUpdatesUsingReferenceFrame:(CMAttitudeReferenceFrame)referenceFrame toQueue:(NSOperationQueue *)queue withHandler:(CMDeviceMotionHandler)handler 是 CMAttitudeReferenceFrameXArbitraryZVertical。根据文档，它描述了一个参考系，其中 Z 轴是垂直的，X 轴指向水平面中的任意方向。当设备静止在桌面上时，屏幕朝上，cmdevicemotion 的重力读数约为 -1，这是正确的。但是，当我将手机翻转 90 度以使垂直于屏幕的矢量指向我时，沿 Z 的重力值不会显示在 -1 左右。我认为 Z 轴将保持在指向地球的垂直方向上。还是Z轴沿着屏幕的法线固定？另外，如果我手持设备四处走动，使屏幕的法线沿着地球重力的方向，然后一段时间后，给设备一些偏航，比如 45 度，CMAttitudeReferenceFrameXArbitraryZVertical 的任意 X 轴仍然指向我的单向运动的方向（在我的参考框架中是 x）？

如果用户不走直线怎么办，例如，如果我在一个圆圈中移动，那么使用参考框架 CMAttitudeReferenceFrameXArbitraryZVertical（或 CMAttitudeReferenceFrameXArbitraryCorrectedZVertical）的任意 X 轴是否会与圆相切，就像我的圆周运动速度一样，分为两个情况： 1\. 如果我拿着设备，使屏幕的法线矢量与指向地球的重力方向重合，默认的 Y 轴沿着设备的平面，指向我的运动方向，是相切的当我沿着圆周移动时到圆 2。没有上述不改变我的参考框架中设备的空间方向的限制，我只是在玩弄设备，导致它处于不同的任意方向，而我沿着移动周长

# sql - SQL：合并具有相同 ReferenceID 的记录

> ID：13775920
> 
> 赞同：2
> 
> 时间：2012-12-08T08:47:26.057
> 
> 标签：sql, sql-server, tsql, select

我的表中有以下记录

```
ID   StudentID   Semester   Grade     
1    1           First      100
2    1           Second     90
3    2           First      90
4    1           Third      85 
```

我想将学生 ID 1 的所有记录合并到一个记录中

```
StudentID   First   Second   Third
1           100     90       85 
2           90      null     null 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T08:49:17.930

由于您没有提及您使用的是什么 RDBMS，请尝试一下。

```
SELECT  StudentID,
        MAX(CASE WHEN Semester = 'First' THEN Grade ELSE NULL END) AS First,
        MAX(CASE WHEN Semester = 'Second' THEN Grade ELSE NULL END) AS Second,
        MAX(CASE WHEN Semester = 'Third' THEN Grade ELSE NULL END) AS Third
FROM    tableName
GROUP BY StudentID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/32a6f/1)

# javascript - JS 代码加载样式表。如何修改 JS，并在 html 中引用样式表？

> ID：13775922
> 
> 赞同：1
> 
> 时间：2012-12-08T08:47:37.040
> 
> 标签：javascript, html, css

```
<script src="http://cdn.webrupee.com/js" type="text/javascript"></script> 
```

我正在本地化上面的[WebRupee](http://webrupee.com/)脚本，以便直接从我的服务器加载所有内容（JS、CSS、字体文件）。

JS文件中的美化代码如下：

```
var _wr_load = window.onload;
window.onload = function () {
    if (typeof (_wr_load) == "function") {
        _wr_load()
    }
    _wr_d = document;
    _wr_l(_wr_d);
    _wr_i(_wr_d.body);
    _wr_re(_wr_d.body)
};
_wr_l = function (f) {
    var d = f.createElement("link");
    d.type = "text/css";
    d.rel = "stylesheet";
    d.href = "http://cdn.webrupee.com/font";
    var e = f.getElementsByTagName("head")[0];
    e.appendChild(d)
};
_wr_i = function (g) {
    var c = g.childNodes;
    var f = c.length;
    for (var h = 0; h < f; h++) {
        if (c[h].nodeType == 3) {
            if (!c[h].nodeValue.match(/^[\s]*$/)) {
                r = c[h].nodeValue;
                r = r.replace(/\s(Rs|Rs\.)\s/gi, " Rs. ");
                r = r.replace(/^(Rs|Rs\.)\s/gi, " Rs. ");
                r = _we_reg(r, /\sRs\.[0-9]+\s/gi, /(Rs\.)/gi);
                r = _we_reg(r, /^Rs\.[0-9]+$/gi, /Rs\./gi);
                r = _we_reg(r, /^Rs\.[0-9,]+[0-9]$/gi, /Rs\./gi);
                r = _we_reg(r, /^Rs\.[0-9,]+[0-9]\s/gi, /Rs\./gi);
                r = _we_reg(r, /\sRs\.[0-9,]+[0-9]\s/gi, /Rs\./gi);
                r = _we_reg(r, /\sRs\.[0-9,]+[0-9]\./gi, /Rs\./gi);
                r = _we_reg(r, /^Rs\.[0-9,]+[0-9]\./gi, /Rs\./gi);
                r = _we_reg(r, /\sRs\.[0-9,]+[0-9]\//gi, /Rs\./gi);
                r = _we_reg(r, /^Rs\.[0-9,]+[0-9]\//gi, /Rs\./gi);
                r = _we_reg(r, /\sRs\.[0-9,]+[0-9]/gi, /Rs\./gi);
                c[h].nodeValue = r
            }
        } else {
            if (c[h].nodeName.toLowerCase() != "script") {
                _wr_i(c[h])
            }
        }
    }
};
_we_reg = function (f, a, b) {
    var c = new RegExp(a);
    var e = c.exec(f);
    while (e != null) {
        var d = String(e);
        d = d.replace(b, " Rs. ");
        f = f.replace(e, d);
        e = c.exec(f)
    }
    return f
};
_wr_re = function (k) {
    var c = 0;
    if (k.nodeType == 3) {
        var n = k.data.indexOf(" Rs. ");
        if (n >= 0) {
            var m = document.createElement("span");
            m.className = "WebRupee";
            var e = k.splitText(n);
            var o = e.splitText(5);
            var p = e.cloneNode(true);
            m.appendChild(p);
            e.parentNode.replaceChild(m, e);
            c = 1
        }
    } else {
        if (k.nodeType == 1 && k.childNodes && !/(script|style)/i.test(k.tagName)) {
            for (var l = 0; l < k.childNodes.length; ++l) {
                l += _wr_re(k.childNodes[l])
            }
        }
    }
    return c
}; 
```

JavaScript 代码做了一些事情，我最感兴趣的一件事是，它在 HTML 中动态添加：

```
<link type="text/css" rel="stylesheet" href="http://cdn.webrupee.com/font"> 
```

我想要做的是，`link`自己添加元素，然后从文件中删除不必要的相关 JavaScript 代码。

据我所知，这是一个：

```
_wr_l = function (f) {
    var d = f.createElement("link");
    d.type = "text/css";
    d.rel = "stylesheet";
    d.href = "http://cdn.webrupee.com/font";
    var e = f.getElementsByTagName("head")[0];
    e.appendChild(d)
}; 
```

但简单地从 JS 文件中删除代码段会破坏其功能（即用新的印度卢比符号替换“Rs.”）。那么，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:16:19.897

您已经删除了顶部调用该函数的行，对吗？

```
_wr_l(_wr_d); 
```

（如果您删除函数定义`_wr_l()`，那么任何调用该函数的尝试都将失败）。

# wpf - 不要更改 ChangePropertycallback 中的属性

> ID：13775923
> 
> 赞同：0
> 
> 时间：2012-12-08T08:47:38.787
> 
> 标签：wpf, listview, dependency-properties, icollectionview, itemsource

我有一个`ListView`和绑定`ItemSource`到一个`ICollectionView`属性，并将所选项目绑定到一个 dp 属性。

```
 public static readonly DependencyProperty SelectedProperty =
      DependencyProperty.Register("Selected",
                                  typeof(Myclass),
                                  typeof(MyControl), new PropertyMetadata(SelectedContactChange));

    static void SelectedContactChange(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        MyControlcontrol = d as MyControl;
        control.MYView = CollectionViewSource.GetDefaultView(((Myclass)e.NewValue).Numbers);
    } 
```

我有另一个列表视图并将 itemsource 绑定到 MYView 属性。

```
 ICollectionView _myView;
    public ICollectionView MYView
    {
        get { return _myView; }
        set
        {
            _myView= value;
        }
    } 
```

当更改 SelectedProperty 时，我为 MYView 设置了值，但不在与 MYView 绑定的列表视图中显示新值！！！

更改 SelectedProperty 时如何更改 MYView 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:21:49.507

不是 100% 确定，但我猜您的 ListView 的 ItemsSource 绑定到`MYView`您的 MyControl 类的属性，可能是这样的：

```
<MyControl x:Name="myControl" ... />
<ListView ItemsSource="{Binding MYView, ElementName=myControl}" /> 
```

当您现在更改`MYView`属性的值时，没有任何机制可以通知绑定更改。您应该实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/System.ComponentModel.INotifyPropertyChanged.aspx)并在更改时引发[PropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)事件`MYView`：

```
public class MyControl : UserControl, INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public ICollectionView MYView
    {
        get { return _myView; }
        set
        {
            _myView = value;
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs("MYView"));
            }
        }
    }
} 
```

或者，您可以定义`MYView`为另一个依赖属性。

# ajax - 如何根据 javascript 在成功函数中返回的内容动态显示 div 内容？

> ID：13775924
> 
> 赞同：0
> 
> 时间：2012-12-08T08:47:39.893
> 
> 标签：ajax, jquery, liferay, portlet, liferay-6

```
$.ajax({
        url :addToDo,            
          data: {"rest_name":camp_ID,
              "f_start_date":f_start_date,
              "f_end_date":f_end_date,
              "CMD":camp_ID},
          type: "GET",
          timeout: 20000,
          dataType: "text",
        success: function(data) {  
            $("#mydiv").load("<%=reportURL.toString()%>");
        }
    });
} 
```

以下是我的 portlet 渲染标记：

```
<portlet:renderURL var="reportURL">
    <portlet:param name="jspPage" value="/htmlreport/report.html" />
</portlet:renderURL> 
```

我有这个上面的 ajax 函数，并且在该函数成功后，我想用 html 页面的内容动态填充一个 div。它现在适用于一个静态页面。

所以任何人都可以指导我如何用成功功能填充 div。我的问题是，我怎样才能成功地用一个 html 页面填充 div。因为只有在 ajax 每次成功执行后才定义哪个 html 页面，每次函数都会生成不同的 html 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:51:41.653

我认为这应该有效：

```
success: function(data) {  
    $("#mydiv").load(data);
} 
```

这`data`是您从服务器写回的内容。它可以是[此评论](https://stackoverflow.com/questions/13775924/how-to-show-div-dynamicaly-based-on-what-java-script-reurn-in-success#comment18947231_13775924)中建议的 URL 。因此，这会根据您从服务器方法返回的内容而变得动态。

希望这可以帮助。

# javascript - Jade 文件中的 Uglify 和连接脚本

> ID：13775928
> 
> 赞同：0
> 
> 时间：2012-12-08T08:48:34.653
> 
> 标签：javascript, node.js, pug

我知道存在将在 node.js 中连接一组预定义脚本的解决方案。但是，是否有任何针对 Jade 量身定制的解决方案，可以自动连接从模板引用的脚本并相应地修改生成的 HTML？

如果没有，Jade 有没有暴露任何东西让我这样做？我可以在内容写入客户端之前遍历 dom 树后处理吗？

# javascript - 滚动到底部时通过ajax加载内容

> ID：13775932
> 
> 赞同：1
> 
> 时间：2012-12-08T08:48:49.343
> 
> 标签：javascript, ajax

我对此感到厌倦，直到现在我才找到解决方案。这是我的代码

```
$("#submit").click(function(e){
    e.preventDefault()  
    var loading = "<img src='/zojfa/images/loading.gif' alt='Loading...' />";
    var scrolltop=$('#scrollbox').attr('scrollTop');
    var scrollheight=$('#scrollbox').attr('scrollHeight');
    var windowheight=$('#scrollbox').attr('clientHeight');
    var post = $(this).attr("name") + "=" + $(this).val();
    var form_data = $('#search_form').serialize() + "&" + post;

    var scrolloffset=20;
    $('#search').html(loading);
    $.post("dosearch.php",form_data,function(newitems) {
        $('#content').append(newitems);
            });
    $('#scrollbox').scroll(function(){
    if(scrolltop>=(scrollheight-(windowheight+scrolloffset))){
        form_data = form_data + "&size=" + $("#content > div").size();
    setTimeout($.post("dosearch.php",form_data,function(newitems) {
        $('#content').append(newitems);
            }),5000);
    }
    });     
        });

}); 
```

当我发布表单数据时，此表单数据将序列化（）并发送到 dosearch.php。

当我单击提交按钮时，该函数运行良好，函数将执行并给我结果集，即该脚本的第 11 行。

然后我会听滚动事件，当滚动事件发生时，我会计算我的内容 div 中的 div 以知道到目前为止我已经加载了多少 div 并将这个数字发送到 dosearch 以获得更多结果

SELECT something FROM table WHERE someid=some another id LIMIT $number（我从计算 div 中得到 .. 还有其他解决方案吗？可能为 div 设置 id 吗？我使用的这个解决方案是否足够好？），6

现在我的问题在哪里。我检查了萤火虫发布的数据

当我到达这个div的底部时，许多ajax请求会启动。并在firebug控制台中显示许多具有不同值的发布大小

```
size=6
size=12
size=12 
```

我想过 settimeout 可能会修复我的脚本，但在这方面没有成功。

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:55:29.817

此链接可以帮助您获得结果。 [点击这里进行演示](http://demo.webdeveloperplus.com/dynamic-scrollbox/)

[这将如何工作](http://webdeveloperplus.com/jquery/create-a-dynamic-scrolling-content-box-using-ajax/)

# php - 有什么方法可以检查是否有人使用 Javascript/PHP 关闭了浏览器？

> ID：13775934
> 
> 赞同：8
> 
> 时间：2012-12-08T08:48:52.387
> 
> 标签：php, javascript, mysql

我正在开发基于 PHP/MySQL/Javascript 的在线国际象棋游戏。我遇到的一个问题是一方面用户可能只是关闭了他的浏览器。有什么方法可以可靠地检测是否有人空闲/关闭了页面？

更复杂的是，我们的学校服务器不支持 cron 作业 -_-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:26:45.570

正如其他评论者所建议的那样，唯一可靠的方法是对您的服务器使用 ping 技术。这样您就可以控制游戏，而不是浏览器。您必须“跟踪”用户的方式是触发 AJAX 调用......我认为每 5 秒通常就足够了......到服务器。所有这一切都是在“跟踪”表中插入某些内容或更新您在“游戏”表中创建的新列以跟踪用户上次进行服务器活动的时间（忽略游戏中的正常动作......你可以对正常移动执行相同的过程并重置 ping 间隔，以避免过度检查）。因此，每次用户进行移动（或其他需要服务器交互的操作）时，您都必须检查对手的时间' s 最后一次服务器活动 - 如果对手在当前时间的 7 秒内没有移动，那么对手的浏览器已经停止通信（无论出于何种原因）。我说 7 秒的原因是因为服务器/数据库通信和任何可能的网络滞后发生了额外的处理。由于网络滞后可能是瓶颈，您可能希望将此值增加到 10 左右。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T09:29:13.200

您无法确切知道客户是否已关闭。您可以做出一些合格的猜测，但它永远不会可靠。

也许您可以找到一个您对知道客户端会话是否处于活动状态感到满意的组成部分？

一个技术含量低的解决方案是将会话 ID（或自制的唯一标识字符串）与时间戳一起保存。每当客户端发出新请求（新页面加载和/或使用 AJAX）时，更新时间戳。

由于您无法访问 cronjobs，因此您需要做出另一个妥协 - 让其他访问者告诉您客户端是否仍然处于活动状态。每当访问者加载页面时，运行存储会话 id 和时间戳的表，查看是否有任何会话看起来比您认为处于活动状态的会话更旧。

这不是对您的确切问题的反对（因为它无法完成），而是一种低技术的妥协。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T09:53:05.843

您可以简单地在该页面上设置一个**“RECURSIVE”** ajax 脚本，并且该脚本会在一小段时间后静默地将更新的时间发送到服务器。在服务器上，您必须编写请求侦听器脚本来记录此详细信息。如果您看到用户的请求已停止或持续一段时间没有出现，那么他关闭了浏览器。

# android - Android 暂时禁用/冻结 UI 失效

> ID：13775944
> 
> 赞同：3
> 
> 时间：2012-12-08T08:50:36.497
> 
> 标签：android, android-layout, android-view

我正在从代码和 traceview 更新我的 UI，很明显大部分时间都花在了使用户界面无效上。我设置了大约 20 个文本视图的大小，每个 setTextSize 调用都会使布局无效。有没有办法在方法开始时禁用布局，进行更改，然后强制视图无效？

在 Windows 窗体中，我可以在某些控件上调用 BeginUpdate() 和 EndUpdate() - 这里有类似的功能吗？

# javascript - MVC3 启用禁用按钮剃刀

> ID：13775952
> 
> 赞同：1
> 
> 时间：2012-12-08T08:52:07.230
> 
> 标签：javascript, asp.net-mvc-3, razor

选中和取消选中复选框后如何启用或禁用按钮？如果用户同意条款和条件，然后他必须在该按钮后选中复选框，则必须向用户启用。

我使用以下代码

**例子.chtml**

```
<input id="termsandcondition" type="checkbox" value="false" onclick="if(this.value==true)this.btnsubmit.Enabled=true;else this.btnsubmit.Enabled=false;"/>

<input id="btnsubmit" type="submit" value="Register" class="cssLoginButton" disabled="disabled" /> 
```

但我无法启用或禁用按钮。我的代码有什么变化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T08:56:18.503

这应该可以解决问题：

```
document.getElementById('btnsubmit').disabled = !this.checked; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T08:58:50.997

您可以使用 jquery 执行此操作

```
$("#checkBoxID").click(function() {
 $("#buttonID").attr("disabled", !this.checked);
}); 
```

你的回答接受率不好，请往下看

# google-chrome - 为什么我的锚填充在 webkit 浏览器上不起作用？

> ID：13775953
> 
> 赞同：1
> 
> 时间：2012-12-08T08:52:16.270
> 
> 标签：google-chrome, safari, webkit, anchor, padding

我有一个使用锚标签的导航。

这是非常基本的，在每个部分之前，我使用

```
<a id="myid" class="anchor"></a> 
```

并将其链接到我的主导航。

在CSS中，我有：

```
.anchor {padding-top: 45px;} 
```

为了防止我的粘性导航与每个部分重叠（我的导航是 45px 高度）。

我的问题：虽然它在 FF 上运行良好，但 Chrome 和 Safari 似乎忽略了我设置的 padding-top。

抱歉，如果这是一个基本/新手问题，但我找不到答案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:59:12.933

添加`display:inline-block`到您的 .anchor CSS。

[演示](http://jsfiddle.net/ca9us/)

# matlab - 使用不同的 k 值找到分类率

> ID：13775955
> 
> 赞同：1
> 
> 时间：2012-12-08T08:52:49.143
> 
> 标签：matlab, knn

我使用 KNN 搜索对测试数据进行分类并找到分类率。

下面是matlab代码：例如：

```
load fisheriris
x = meas(:,3:4); % x =all training data
y = [5 1.45;6 2;2.75 .75]; % y =3 testing data for 'versicolor' species

[n,d] = knnsearch(x,y,'k',1);   % find the nearest neighbors to three testing data

predicted_class=species(n);

true_class=[cellstr('versicolor'); cellstr('versicolor'); cellstr('versicolor')];

Classification_rate=100*sum(strcmp(predicted_class,true_class))/length(predicted_class); 
```

但是，上面的 matlab 代码仅适用于 k=1，如果我尝试 k=2，则使用 strcmp 时出现错误“输入必须是相同的大小，或者任何一个都可以是标量。” 反正有修改代码吗？？

然后，如果我想测试另一个物种，例如“virginica”，我需要花时间将 true_class 从“versicolor”更改为“virginica”，有什么方法可以自动更改它吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:10:50.567

我不确定你问题的第一部分。但是对于第二部分，您可以为字符串“versicolor”和“virginica”定义一个变量，然后放置一个循环，以便它们随着每次迭代而改变：

```
Vars = {'versicolor','virginica'};
for i = 1:length(Vars);
    true_class = [cellstr(Vars{i}); cellstr(Vars{i}); cellstr(Vars{i})];
    Classification_rate{i} = 100*sum(strcmp(predicted_class,true_class))/length(predicted_class);
end 
```

# php - 想要在使用 PHP 获取的 MYSQL 数据的同一行中显示 x3 DIV

> ID：13775958
> 
> 赞同：0
> 
> 时间：2012-12-08T08:53:23.793
> 
> 标签：php, mysql, html, row, fetch

我的 PHP 从 MySQL 抓取数据并将其显示在我的 index.php 的容器 div 中，没有问题。但是，数据会一个接一个地显示（不同的行），而不是使用同一行中的可用空间。

这是在 body 标记中用作整体容器的 div 的 index.php 片段。第二个 div 用于无限滚动功能，当用户到达屏幕末尾时加载更多数据。

```
<div id="postedComments">

<?php require_once 'jquery-masterLoader.php' ;  ?>

</div>
<div id="loadMoreComments" style="display:none;" > <center>test for hidden field            </center>
</div> 
```

这是 PHP jquery-masterLoader.php，它是控制加载脚本的两个 PHP 文件之一。另一个对于 show 和 tell 来说不是必需的，因为它仅在用户到达屏幕末尾时才被调用。

```
<?php
if ( strpos(strtolower($_SERVER['SCRIPT_NAME']),strtolower(basename(__FILE__))) ) {
header("Location: index.php");
die("Denny access");
}
    error_reporting(0) ;
    set_exception_handler('exception_handler') ;
    $config = parse_ini_file("core/config/my.ini") ;
    $db=new mysqli($config['dbLocation'] , $config['dbUser'] , $config['dbPassword'] ,                 
    $config['dbName']);
    if(mysqli_connect_error()) {
     throw new Exception("<b>Could not connect to database</b>") ;
    }
    if (!$result = $db->query("SELECT * FROM world_country ORDER BY id ASC LIMIT          
    0,30")) {
throw new Exception("<b>Could not read data from the table </b>") ;
    }

    while ($data = $result->fetch_object()) {
    $id = $data->id;
    $name = $data->Name ;
    $continent = $data->Continent;
    $population = $data->Population ;
    echo "
    <div class='postedComment' style=\"width: 33%; \ list-style: ; \ float: left;\" id=\"$data-                 
    >id \">

    <b>Country : </b>$name <br /> 
    <b>Continent : </b>$continent<br/>
    <b>Population : </b>$population 
    <i style=\"font-size:small;color:blue\">Index : $id</i>
    <hr /> 

    </div> 
    " ;

    } 
    /* close connection */
    $db->close();
    function exception_handler($exception) {
      echo "Exception cached : " , $exception->getMessage(), "";
    } 
```

很抱歉将样式与 PHP 混合在一起，这是一项正在进行的工作。

Here's the CSS rules

```
#postedComments {
width: 100%;
display: ;

}

html, body { 
height: ; 
width: 100%; 
margin: 0; 
padding: 0;
}

#body {
width: 60%; 
margin: 1% auto;
}

 /* Resets */

ul {
padding:0;
margin:0 0 20px 0;
list-style:none;
}

h1, h2 {
padding:0;
margin:0 0 20px 0;
font-weight:normal;
}

p {
padding:0;
margin:0 0 20px 0;
}

a:link, a:visited {
text-decoration:underline;
color:#000;
}

a:hover {
text-decoration:none;
}

ul li {
padding:5px 0;
}

ul li input[type="text"], ul li input[type="password"] {
width:200px;
} 
```

Also here's the JavaScript calling upon the scripts.
(custom_jquery-debug.js)

```
 $(document).ready(function() { 
 $("#postedComments").append( "<p id='last'></p>" );
 //$("#postedComments").append( "<div id='last'></div>" );
console.log("Document Ready ------------------------");
if ($("#last").length){ 
position = $("#last").offset() ; 
console.log("Initialization of last_DIV succeeded and it's values are ....Top-value           
is :"+Math.floor(position.top) + " ---- Left-value is : "+ Math.floor(position.left ))      
;   

}
doMouseWheel = 1 ;   
$(window).scroll(function() {
if (!doMouseWheel)  {
return ;
} ;
 var distanceTop = $('#last').offset().top - $(window).height();
     console.log("Mouse scroll , and The DIV  last has an offset-top value of :"+      
Math.floor($("#last").offset().top)+"----Window height is     
:"+Math.floor($(window).height())+"---- Last's offset minus window height is :     
"+Math.floor(distanceTop)) ;  
if  ($(window).scrollTop() > distanceTop){
console.log("End of Window Reached >>>>>>>>>>>>>>>>>>>>>>>>>>") ;
console.log("Show Div loadMoreComments and Class .postedComments.last has the id of  :     
"+$(".postedComment:last").attr('id')); 
 doMouseWheel = 0 ; 
$('div#loadMoreComments').show();
$.ajax({
dataType : "html" ,
url: "jquery-loadMoreComments.php?lastComment="+     
$(".postedComment:last").attr('id') ,   
success: function(html) {
 doMouseWheel = 1 ; 
if(html){
$("#postedComments").append(html);
console.log("Append html , sumarize .... first id has nr : "     
+$(".postedComment:first").attr('id')+ " --- last id has nr :"     
+$(".postedComment:last").attr('id'));
position = $("#last").offset() ; 
console.log("New values of last_DIV  from IF_html are , Top 
:"+Math.floor(position.top )+" --- left :"+Math.floor(position.left)) ; 
$("#last").remove();
if ($("#last").length == 0 ){ console.log(">>>>>>>>>>>>>>>The last_DIV is removed     
from stage>>>>>>>>>>") ; }
$("#postedComments").append( "<p id='last'></p>" );
if ($("#last").length  ){ 
position = $("#last").offset() ; 
console.log(">>>>>>>>>>>>>>>A new last_DIV is appended and it's values are , Top :" 
+ Math.floor(position.top) +"  ---- Left :" + Math.floor(position.left )) ; 
}   
$('div#loadMoreComments').hide();
}else{  
console.log("LoadMoreComments is replaced with a custom message") ; 
$('div#loadMoreComments').replaceWith("<center><h1 style='color:red'>End of    
countries !!!!!!!</h1></center>");
}
}
});
}
});
}); 
```

Second JS script (custom_jquery.js)

```
 $(document).ready(function() { 
  $("#postedComments").append( "<p id='last'></p>" );
 //console.log("Document Ready");
doMouseWheel = 1 ;   
 $(window).scroll(function() {
 //console.log("Window Scroll ----");

 if (!doMouseWheel)  {
 return ;
 } ;
  var distanceTop = $('#last').offset().top - $(window).height();   
if  ($(window).scrollTop() > distanceTop){
 //console.log("Window distanceTop to scrollTop Start");
  doMouseWheel = 0 ; 
$('div#loadMoreComments').show();
    //console.log("Another window to the end !!!!       
 "+$(".postedComment:last").attr('id'));    
$.ajax({
dataType : "html" ,
url: "jquery-loadMoreComments.php?lastComment="+ 
 $(".postedComment:last").attr('id') ,  
success: function(html) {
 doMouseWheel = 1 ; 
if(html){
$("#postedComments").append(html);
//console.log("Append html--------- " +$(".postedComment:first").attr('id'));
//console.log("Append html--------- " +$(".postedComment:last").attr('id'));
$("#last").remove();
$("#postedComments").append( "<p id='last'></p>" );
$('div#loadMoreComments').hide();
}else{      
$('div#loadMoreComments').replaceWith("<center><h1 style='color:red'>End of      
 countries !!!!!!!</h1></center>");
 // Added on Ver.0.4  
 //Disable Ajax when result from PHP-script is empty (no more DB-results )
 doMouseWheel = 0 ; 
}
}
});
}
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:15:06.797

Ok, problem solved. I separated style from behavior (CSS from PHP) and float: left; kicked in and saved the day.

I usually would never mix content/style/behavior however, being code from Github I was lazy and left it as is. As a consequence, the float property wasn't being recognized.

I did this adjustment to my CSS and the problem was solved. DIV's are taking 33% width of the 100% available in the container that is in the body which takes up 60% of the screen.

```
 #postedComments {
            width: 100%;
            display: block;
            }

        .postedComment {
            width: 33%; 
            float: left;
            } 
```

For those who commented, the br tags will eventually be removed but, they weren't causing the problem. They just separated the data within the div.

Also #postedComments with an s only affects the master DIV.

Thank you for your time regardless. Time to tackle a load of other stuff now... :)

# windows - 如何在 Windows 8 上显示新样式的弹出窗口

> ID：13775960
> 
> 赞同：2
> 
> 时间：2012-12-08T08:53:31.797
> 
> 标签：windows, vbscript, windows-8, notifications, cmd

是否可以使用 VB 脚本或命令行显示新的 windows 8 弹出窗口？另外，我可以在显示弹出窗口时播放系统声音吗？

谢谢。

# scala - 为什么类型检查和类型转换在 Scala 中被认为是糟糕的风格？

> ID：13775964
> 
> 赞同：6
> 
> 时间：2012-12-08T08:53:59.597
> 
> 标签：scala, types, casting

*在《 Scala 编程*》一书中，第 2 版。，作者写道：“在 Scala 中编写类型测试和强制转换相当冗长。这是故意的，因为不鼓励实践。通常最好将模式匹配与类型化模式一起使用。” 在其他地方，他们重复使用这些结构是“糟糕的风格”。

我完全同意 Scala 的模式匹配语法要好得多，但它不是类型检查和类型转换的基本语法糖吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-08T09:26:54.353

它是糖，但它是非常有用的糖。您可能会遇到类型转换的真正麻烦

*   `isInstanceOf`打电话前不检查`asInstanceOf`
*   忘记泛型不知道他们的参数类型`isInstanceOf`
*   未涵盖所传递类型的所有情况

模式匹配正确地为您处理所有这些：如果确实有一个实例，您只会得到一个实例，它会警告泛型，如果您有不完整的匹配则会发出警告。因此，在类型测试和强制转换容易出错的情况下，模式匹配是健壮的并鼓励良好的设计。

# java - Java 嵌套类

> ID：13775971
> 
> 赞同：1
> 
> 时间：2012-12-08T08:55:22.967
> 
> 标签：java, class

我需要在java中实现一个红黑搜索树。我想过创建两个类：RBTree 和 RBNode，其中 RBNode 嵌套在 RBTree 内部（这是练习的需求）。

RBNode 应具有以下字段：

键、值、颜色 - 没问题。

parent、leftChild、rightChild - 它们也是 RBNode 类型。这我似乎无法实现，因为为了创建一个 RBNode 的实例，我需要一个 RBTree 的实例。

这是我的代码：

```
public class RBTree {

public RBNode createNode() {
    return this.new RBNode();
}

    class RBNode{

      private int key;
      private RBTree.RBNode rightChild = new RBTree.RBNode(); \//the problem is here

      public RBNode() {

        this.rightChild=null;
        this.key=-1;

      }  

}

    public static void main(String[] args) {

        RBTree t = new RBTree();
        RBNode rb = t.createNode();
        System.out.println(rb.key);
        System.out.println(rb.rightChild.key);
    }

} 
```

我将不胜感激任何想法如何解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:59:42.967

将 RBNode 作为嵌套类是没有意义的。使 RBNode 成为一个单独的类，并将对 RBNode 的引用存储在 RBTree 中。它应该可以解决您的问题。

如果您想创建一个嵌套类，请将其设为静态类，这样您就不必实例化父类来实例化 RBNode。

```
new RBTree.RBNode(); 
```

如果将 RBNode 的类声明更改为

```
static class RBNode{} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:59:36.363

您只需要使用 RBNode，而不是 RBTree.RBNode。此外，你真的需要父母吗？RBNode 可以是私有静态的。

# c++ - 如何在 Tab 控件中显示子对话框？

> ID：13775972
> 
> 赞同：-1
> 
> 时间：2012-12-08T08:55:24.840
> 
> 标签：c++, winapi

WM_INITDIALOG 和 WM_NOTIFY 代码段。

```
HWND hTabCtrl = nullptr;
HWND hCurrentTab = nullptr;
HWND hTab1 = nullptr;

LRESULT CALLBACK WINPROC(HWND hWnd,UINT uMsg,WPARAM wParam,LPARAM lParam)
{   

    hTabCtrl = GetDlgItem(hWnd, IDC_TAB1);

    g_hWnd = hWnd;
    ShowWindow(hTab1, SW_SHOW);
    switch(uMsg)
    {
        case WM_INITDIALOG:
            {
                //hInstance = 0; // Useless? 
                INITCOMMONCONTROLSEX ix;
                ix.dwSize = sizeof(INITCOMMONCONTROLSEX);
                ix.dwICC = ICC_TAB_CLASSES|ICC_UPDOWN_CLASS;
                InitCommonControlsEx(&ix);

                //ShowWindow(hTabCtrl, SW_SHOW);
                TCITEM ti;
                memset(&ti, 0, sizeof(ti));
                ti.mask = TCIF_TEXT; 
                ti.pszText = L"Basic Options";
                ti.cchTextMax = 255;
                TabCtrl_InsertItem(hTabCtrl,0,&ti); // 

                ti.pszText = L"Antis";
                TabCtrl_InsertItem(hTabCtrl,1,&ti);

                TabCtrl_SetCurSel(hTabCtrl,0);
                hTab1 = CreateDialog(GetModuleHandle(NULL), MAKEINTRESOURCE(IDD_DLG2), /*handle of the tab control*/ hTabCtrl, (DLGPROC)GeneralDlgPrc);

                break;
            }

        // Macro so you don't need the crazy styled cast.
        case WM_NOTIFY: 
            {
                switch( ( ( LPNMHDR ) lParam) -> code ) 
                {
                case TCN_SELCHANGE: 
                    {
                        if( TabCtrl_GetCurSel( ( ( LPNMHDR ) lParam) -> hwndFrom ) == 0 ) 
                        {
                            ShowWindow( hTab1, SW_SHOW );

                        } 
                        else 
                        {

                        }

                        break;
                    }
                }
            } 
```

我试过这样，它没有出现。它覆盖了选项卡边框之一，因此它应该存在，但它在表单控件上不可见。

这是屏幕截图： http: [//puu.sh/1yt1b](http://puu.sh/1yt1b)

编辑：它有效，但位置错误，我应该手动设置位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:27:59.607

我只需要使用 SetWindowPos() 来设置我的无模式对话框的当前位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T00:18:29.600

您应该在资源文件中定义控件的初始 x/y 偏移量，而不是使用`SetWindowPos`会让您支付运行时成本的 。您正在使用的资源编辑器应该允许这样做。

# backbone.js - Backbone - 一个模型的视图很少

> ID：13775973
> 
> 赞同：0
> 
> 时间：2012-12-08T08:55:28.010
> 
> 标签：backbone.js

请您帮我提供最佳实践吗？

我有一个从服务器返回的对象列表。都具有相同的属性。一些属性的值并不总是相同的（例如属性“isBig”可以是“true”/“false”）。根据属性值的组合，应用程序决定在页面上绘制“bigBox”还是“smallBox”。

页面视图应包含一组框。

我想应该有一个“bigBox”视图和一个“smallBox”视图，对吗？我还应该保留两个模型吗？它们完全相同（除了它们的值......）我可以从模型中选择视图吗？

请指导我？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:35:25.173

是的，我认为你在正确的轨道上。您的数据都是相同的，因此您只有 1 个模型和单独的视图，具体取决于您希望如何显示该数据

我会建议：

*   1个模型（盒）
*   1 个系列（盒）
*   3 个视图（1 个“包含”视图用于您的集合 (BoxesView)，1 个视图用于 bigBox (BigBoxView)，1 个视图用于 smallBox (SmallBoxView)）

在 BoxesView 的渲染函数中，当您遍历集合时，检查 IsBig，并相应地渲染每个视图。

```
//render function of BoxesView. Make sure to have a reference to 
//your Boxes collection
render: function() {
   var that = this;
   this.collection.each(function(model) {
       //depending on the isBig property render a different view
       if(model.get("isBig") === true) 
           var bigView = new BigView({
               model: model
           });
           that.$el.append(bigView.render().el); 
           // $el is the element you want to append all your boxes into 
        else {
           var smallView = new SmallView({
               model: model
           });
           that.$el.append(smallView.render().el);
        }
   }
} 
```

或者，根据 bigBox 和 smallBox 的**行为**相似程度（它们是否显示完全相同的信息并具有完全相同的操作），只有一个 BoxView 并在构建视图时传入不同的模板可能是有意义的.

# liferay - 如何动态更改 portlet:renderURL？

> ID：13775979
> 
> 赞同：1
> 
> 时间：2012-12-08T08:56:22.230
> 
> 标签：liferay, portlet, liferay-6

```
<portlet:renderURL var="reportURL">
    <portlet:param name="jspPage" value="/htmlreport/report.html" />
</portlet:renderURL> 
```

以上是我的渲染 portlet url。我的问题是如何动态更改 value="/htmlreport/report.html"？

有什么办法吗？

```
 createRenderURL() { alert("hiiii"); AUI().ready('liferay-portlet-url', function(A) { alert("hiiii"); var renderURL = Liferay.PortletURL.createRenderURL(); renderURL .setParameter("jspPage","/htmlreport/report.html"); renderURL .setPortletId("eMenuAdvertise_WAR_eMenuAdvertiseportlet"); alert(renderURL.toString()); $("#mydiv").load(renderURL.toString()); alert(""); }); } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:50:42.830

您可以使用 liferay javascript 函数生成 renderUrl，如下所示：

```
AUI().use("liferay-portlet-url", function(a) {
   var portletURL = Liferay.PortletURL.createRenderURL();
   var value = document.getElementById('page');
   portletURL.setParameter("jspPage", value);
}); 
```

# c# - 读/写问题 C#

> ID：13775984
> 
> 赞同：1
> 
> 时间：2012-12-08T08:56:54.983
> 
> 标签：c#, split, streamreader

我一直在花费数小时的研究试图找到适合我的项目但没有运气的解决方案。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace CustomerApplication
{
    public partial class ListAllCustomersForm : Form
    {   // default constructor method

    public ListAllCustomersForm()
    {
        InitializeComponent();
        /* Since this is the first method to be executed
         * call the displayCustomers method to populate
         * the list */

        displayCustomers();
    } // End of constructor

    // okButton Click method
    private void okBtn_Click(object sender, EventArgs e)
    {
        // retrieve hidden form's memory address
        Form myParentForm = CustomerAppStart.getParentForm();
        // now that we have the address use it to display the parent Form
        myParentForm.Show();
        //Finally close this form
        this.Close();
    } // end of okButton Click method
    //display the customers
    public void displayCustomers()
    {

        //format the header in the text box
        customerList.Text = ""; //Clear the textbox
        customerList.AppendText(
        "-------------------------------------------------- \r\n");
        customerList.AppendText(
        "Name Address Zip \r\n");
        customerList.AppendText(
        "-------------------------------------------------- \r\n");
        //local variables
        String name = "";
        String address = "";
        int zip = 0;
        //get all customers
        Customer[] myCustArray = Customer.getAllCustomers();
        //loop thru the array and display all the data

        for (int k = 0; k < myCustArray.Length; k++)
        {

            if (myCustArray[k] != null)
            {
               StreamWriter Writer = new StreamWriter(@"C:\Users\Jake\Documents\college\CIS340\data.csv", true);

                 Writer.Write(myCustArray[k].getCustomerName() + "," + myCustArray[k].getCustomerAddress() + "," + myCustArray[k].getCustomerZip() + ",");
                 Writer.Close();

                 StreamReader Reader = new StreamReader(@"C:\Users\Jake\Documents\college\CIS340\data.csv");
                 Reader.ReadToEnd();

                //get the customer attributes for this customer
                name = myCustArray[k].getCustomerName();
                address = myCustArray[k].getCustomerAddress();
                zip = myCustArray[k].getCustomerZip();
                //format the data
                name = name.PadRight(20, ' ');
                address = address.PadRight(23, ' ');
                //display it to the textBox
                this.customerList.AppendText(name + " " +
                address + " " + zip + "\r\n");
            }//end if not null

        }//end for loop
    }//end displayCustomers method

} // end of class definition
} // end of namespaces 
```

这段代码允许我格式化我的文本框并给出我创建的数组标题。它还允许我将“AddCustomerForm.cs”中的任何用户输入写入 .CSV 文件，我可以在本地检查该文件并查看是否添加了值。

我遇到的问题是从我的 .CSV 文件中读取并将文本显示到我的格式化文本框中。

无论我尝试什么，我能看到的唯一输出是空白格式的表单，除非我尝试在同一个调试会话期间添加新客户，在这种情况下，它会在“AddCustomerForm.txt”中正确显示用户的输入。 CS”。

再一次，如果这似乎是一个新手问题，我很抱歉，我向你保证我已经研究了一段时间，但没有明确的解决方案。我将非常感谢任何人可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:03:06.903

您没有使用 Reader.ReadToEnd() 调用的结果，只是阅读它然后摆脱它们。

尝试使用 StreamReader 的[ReadLine](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)方法读取行。

# php - 动态加载没有 dl() 函数的 php 扩展？

> ID：13775990
> 
> 赞同：3
> 
> 时间：2012-12-08T08:58:43.953
> 
> 标签：php, php-extension

那有可能吗？如果可以，该怎么做？我之所以问，`dl()`是因为我无法使用该功能，并且因为 PHP 团队正在从其他版本中放弃此功能。

请不要回答“改为使用扩展加载指令”——这正是我不明白的部分，我想/我正在询问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T08:59:56.567

[自PHP 5.3](http://php.net/function.dl)起，该[函数已从除 CLI 和 Embedded 之外的所有 SAPI 中*删除*](http://php.net/function.dl)。SAPI 是 PHP 和 Web 服务器 / CLI / 等之间的接口。

在某些情况下，不再可能在运行时加载扩展。如果您发现当前的 SAPI 不支持运行时扩展加载，则没有其他选项可供您使用。

如果您需要可靠地加载扩展，您应该在系统配置中的适当位置执行此操作。 **再多的说“那不是我想要的答案”也不会改变现实。**