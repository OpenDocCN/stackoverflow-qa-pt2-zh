# StackOverflow 问答 15067000-15067999

# java - 如何在一页上获取文本，然后将其用于另一页上的 assertEquals？

> ID：15067004
> 
> 赞同：0
> 
> 时间：2013-02-25T12:29:56.187
> 
> 标签：java, selenium, junit, selenium-webdriver

我有一个包含一些数据的表格，例如：

| **_*姓名*_** |****___***电子邮件****_* __ *_* _** |**

 **|网站|website@test.com|

单击名称网站后，将显示网站的设置页面。在顶部，有一个带有“网站”名称的标题。

我需要 JUnit 的解决方案来验证单击表中的“网站”名称后用户是否被重定向到“网站”设置页面。

我尝试了以下方法但没有帮助：

```
String firstNameInTheTable = driver.findElement(By.xpath(TestPage.FIRST_NAME_IN_THE_TABLE)).getText();
driver.findElement(By.xpath(TestPage.FIRST_NAME_IN_THE_TABLE)).click();
assertEquals(firstNameInTheTable, WebsitePage.WEBSITE_TITLE_TEXT); 
```

实际上，最好验证第一列中的文本（在我们的例子中是“名称”）与设置页面上的文本相同。因此，我们可能没有网站文本而是另一个名称。测试仍然应该通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:59:24.157

1.选择并获取网站名称。

```
WebElement element = driver.findElement(By.xpath("//xpath"))
String name = element.getText();
element.click(); 
```

2.等待加载，选择title和assertEquals。

```
sleep(3);
String title = driver.findElement(By.xpath("//xpath")).getText();
Assert.assertTrue(name.equals(title)); 
```

/!\ 如果第二步是打开一个新窗口，请看[这里](https://stackoverflow.com/questions/9588827/webdriver-switch-to-new-browser-opened-after-click-on-button)的教程（放在`sleep(3);`和之间`String title ...`）。

**其他 ：**

*睡眠法*

```
protected void sleep(int i) {
    driver.manage().timeouts().implicitlyWait(i, TimeUnit.SECONDS);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:29:25.797

这是示例，您可以参考它并相应地创建您的 TC

```
 WebDriver driver = new FirefoxDriver();
    driver.get("https://www.google.co.in/");

    String linkTitle = driver.findElement(By.xpath("//a[@href='/intl/en/about.html']")).getText();
    driver.findElement(By.xpath("//a[@href='/intl/en/about.html']")).click();
    System.out.println(driver.findElement(By.xpath("//div[@id='corp-crumb']/ol/li")).getText());
    Assert.assertTrue(linkTitle.equals(driver.findElement(By.xpath("//div[@id='corp-crumb']/ol/li")).getText())); 
```**

# java - 会话中的 ArrayList 附件

> ID：15067006
> 
> 赞同：0
> 
> 时间：2013-02-25T12:29:59.490
> 
> 标签：java, session, servlets

我已经将一个数组列表附加到会话中，`servlet`并且在附加之后，我正在清除它`arraylist`，`servlet`所以它也从会话中变得清晰。

请问可以给个理由吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:35:11.623

即使您的问题对于 Stack Overflow 来说不是很好，但我想我明白了您的意思。

所以你有一个

```
List<MyClass> myList = new ArrayList<MyClass>(); 
```

在你的代码某处，你

1.  把它放在会话中
2.  并在其他地方进行操作`.clear()`。

正确的？

问题是，与您的想法相反，您只有**一个** `ArrayList`实例。“在”会话中和“在您的 servlet 中”是一样的。只是你有一个不同的参考指向它......

您需要做的是将列表实例的*不同*实例附加到会话中：

```
//this creates a new list instance, with references to the same objects
List<MyClass> myNewList = new ArrayList<MyClass>(myList); 
```

并将其“附加”`myNewList`到会话中。这样，生成的两个列表可以被不同地处理，它们可以有不同的内容。如果你改变一个，另一个将保持不变。

但是我建议重新考虑您的结构，共享信息始终是一个需要仔细处理的问题，[Java Concurrency In Practice](http://jcip.net/)是处理此类问题时要阅读的关键书籍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:36:43.737

显然，从会话中也可以清楚地看到，因为您在会话中添加了对数组集合的引用。因此，数组列表对象，会话中的对象和代码中的对象（在将列表添加到会话之后）都指的是内存中的同一个对象。因此，如果您清除 ArrayList 对象，那么会话中包含的也引用同一对象的基础对象将变得清晰。

为了使您的代码正常工作，您可以做一件事。创建 ArrayList 的克隆并将该列表放入会话中。然后对你的对象做任何你想做的事情。它不会影响驻留在会话中的对象。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T04:01:57.437

显然，在 session 中设置 ArrayList 后，您将继续使用 ArrayList 并对其进行编辑。

但是您应该知道，您在会话中设置的只是对实际数组列表的内存引用。您所做的任何更改仍然会影响，因为两个变量都指向内存中的同一个列表。

为了避免你可以

1）在 session 中设置好数组列表后，给变量赋值为 null，以免在不知不觉中继续使用

```
ArrayList list = new ArrayList ();

session.setAttribute("list",list);

list = null ; // Assigning the variable to null 
```

# php - 仅在一个地方加载站点全局变量并在任何地方使用

> ID：15067009
> 
> 赞同：0
> 
> 时间：2013-02-25T12:30:05.590
> 
> 标签：php, codeigniter, global-variables

如何加载`application/config/site_globals.php`以获取变量并在每个控制器中使用它们（与钩子相同的位置）而不在每个控制器中启动它？我需要使用变量并且不喜欢将它们保留在会话中。

这就是我们通常启动它的方式：

```
$this->load->config('site_globals');
$my_globals = $this->config->item('site');
echo $my_globals['header_note']; //for example, there are many more 
```

上面的代码必须在每个控制器中复制，这很痛苦。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:27:57.120

application/config/constant.php 文件用于此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:37:13.383

创建一个扩展 CI_Controller 的 MY_Controller，在 MY_Controller 构造函数中加载您的全局变量，然后确保所有其他控制器都扩展 MY_Controller 而不是 CI_controller。

请参阅文档：[http ://ellislab.com/codeigniter/user-guide/general/core_classes.html](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)

作为记录，可以对所有核心类执行相同的操作，即 MY_Session、MY_Model 等。如果使用它们，重复代码会容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:41:33.253

```
 class Custom_Controller extends CI_Controller
{

  $this->load->config('site_globals');
  $my_globals = $this->config->item('site');
  echo $my_globals['header_note'];
} 
```

然后，在您需要使用这些全局变量的每个控制器中，您可以使用它，例如：

```
 class Example extends Custom_Controller
{

  //your code here
} 
```

# powershell - 在 powershell 中使用 Task 类

> ID：15067012
> 
> 赞同：9
> 
> 时间：2013-02-25T12:30:22.547
> 
> 标签：powershell, asynchronous, task, runspace

我正在尝试使用 Powershell 中的 Task 类来异步运行操作。但我得到以下异常：

```
Id                     : 1
Exception              : System.AggregateException: One or more errors occurred. ---> System.Management.Automation.PSInvalidOperationException: There is no Runspace available to
                         run scripts in this thread. You can provide one in the DefaultRunspace property of the System.Management.Automation.Runspaces.Runspace type. The script
                         block you attempted to invoke was:  Write-Host "hey!"
                            at System.Management.Automation.ScriptBlock.InvokeAsDelegateHelper(Object dollarUnder, Object dollarThis, Object[] args)
                            at System.Threading.Tasks.Task.Execute()
                            --- End of inner exception stack trace ---
                         ---> (Inner Exception #0) System.Management.Automation.PSInvalidOperationException: There is no Runspace available to run scripts in this thread. You can
                         provide one in the DefaultRunspace property of the System.Management.Automation.Runspaces.Runspace type. The script block you attempted to invoke was:
                         Write-Host "hey!"
                            at System.Management.Automation.ScriptBlock.InvokeAsDelegateHelper(Object dollarUnder, Object dollarThis, Object[] args)
                            at System.Threading.Tasks.Task.Execute()<---

Status                 : Faulted
IsCanceled             : False
IsCompleted            : True
CreationOptions        : DenyChildAttach
AsyncState             :
IsFaulted              : True
AsyncWaitHandle        : System.Threading.ManualResetEvent
CompletedSynchronously : False 
```

我的代码：

```
$delegate = [System.Action]{ Write-Host "Test" }
[System.Threading.Tasks.Task]::Run($delegate) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:33:39.810

让 PowerShell 与`Task`. `Task`对于 PowerShell 来说，它是一个太多的低级结构，无法直接使用它。

要异步执行 PowerShell 操作，请使用*[作业](http://technet.microsoft.com/en-us/library/hh847783.aspx)*。

# c# - c#检测tcp断开连接

> ID：15067014
> 
> 赞同：20
> 
> 时间：2013-02-25T12:30:24.793
> 
> 标签：c#, timeout, tcpclient, disconnect

我有两个简单的应用程序：

*   在特定 tcp 端口上等待客户端连接的服务器应用程序。然后听他说什么，发回一些反馈并断开该客户。

*   一个表单应用程序，它连接到服务器应用程序，然后说点什么，然后等待反馈并断开与服务器的连接，然后在表单中显示反馈。

尽管服务器应用程序似乎表现正确（我已经使用 Telnet 对其进行了测试，并且我看到了反馈，并且我看到在反馈之后直接发生了断开连接），但是表单应用程序**似乎没有注意到与服务器的断开连接**。（即使在服务器断开连接后，TcpClient.Connected 似乎仍然存在）

我的问题是：为什么 TcpClient.Connected 保持真实，我如何知道服务器是否/何时断开连接？

这是我的完整代码：

表格申请：

```
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Windows.Forms;
using System.Threading;

namespace Sender
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void sendButton_Click(object sender, EventArgs e)
        {
            TcpClient tcpClient = new TcpClient();
            tcpClient.Connect(IPAddress.Parse("127.0.0.1"), 81);
            responseLabel.Text = "waiting for response...";
            responseLabel.Invalidate();

            // write request
            NetworkStream networkStream = tcpClient.GetStream();
            byte[] buffer = (new ASCIIEncoding()).GetBytes("Hello World! ");
            networkStream.Write(buffer, 0, buffer.Length);
            networkStream.Flush();

            // read response
            Thread readThread = new Thread(new ParameterizedThreadStart(ReadResponse));
            readThread.Start(tcpClient);
        }

        void ReadResponse(object arg)
        {
            TcpClient tcpClient = (TcpClient)arg;
            StringBuilder stringBuilder = new StringBuilder();
            NetworkStream networkStream = tcpClient.GetStream();
            bool timeout = false;
            DateTime lastActivity = DateTime.Now;
            while (tcpClient.Connected && !timeout)
            {
                if (networkStream.DataAvailable)
                {
                    lastActivity = DateTime.Now;
                    while (networkStream.DataAvailable)
                    {
                        byte[] incomingBuffer = new byte[1024];
                        networkStream.Read(incomingBuffer, 0, 1024);
                        char[] receivedChars = new char[1024];
                        (new ASCIIEncoding()).GetDecoder().GetChars(incomingBuffer, 0, 1024, receivedChars, 0);
                        stringBuilder.Append(receivedChars);
                    }
                }
                else
                {
                    if (DateTime.Now > lastActivity.AddSeconds(60))
                        timeout = true;
                }
                System.Threading.Thread.Sleep(50);
            }
            Invoke((MethodInvoker)delegate
            {
                responseLabel.Text = "Response from Listener:\n" + stringBuilder.ToString();
                responseLabel.Invalidate();
            });

            if (timeout)
            {
                Console.Write("A timeout occured\n");
                networkStream.Close();
                tcpClient.Close();
            }
        }

    }
} 
```

服务器应用：

```
using System.Net;
using System.Net.Sockets;
using System.Text;
using System;
using System.Threading;

namespace Listener
{
    class Program
    {
        static void Main(string[] args)
        {
            var tcpListener = new TcpListener(IPAddress.Any, 81);
            tcpListener.Start();
            Thread clientThread = new Thread(new ParameterizedThreadStart(Listen));
            clientThread.Start(tcpListener);
        }

        static void Listen(object arg)
        {
            TcpListener tcpListener = (TcpListener)arg;
            while (true)
            {
                TcpClient tcpClient = tcpListener.AcceptTcpClient();
                Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClient));
                clientThread.Start(tcpClient);
            }
        }

        static void HandleClient(object arg)
        {
            TcpClient tcpClient = (TcpClient)arg;
            StringBuilder stringBuilder = new StringBuilder();
            ASCIIEncoding encoder = new ASCIIEncoding();
            DateTime lastActivity = DateTime.Now;

            // read request
            NetworkStream networkStream = tcpClient.GetStream();
            int timeout = 5; // gives client some time to send data after connecting
            while (DateTime.Now < lastActivity.AddSeconds(timeout) && stringBuilder.Length==0)
            {
                if (!networkStream.DataAvailable)
                {
                    System.Threading.Thread.Sleep(50);
                }
                else
                {
                    while (networkStream.DataAvailable)
                    {
                        lastActivity = DateTime.Now;
                        byte[] incomingBuffer = new byte[1024];
                        networkStream.Read(incomingBuffer, 0, 1024);
                        char[] receivedChars = new char[1024];
                        encoder.GetDecoder().GetChars(incomingBuffer, 0, 1024, receivedChars, 0);
                        stringBuilder.Append(receivedChars);
                    }
                }
            }
            string request = stringBuilder.ToString();

            // write response
            string response = "The listener just received: " + request;
            byte[] outgoingBuffer = encoder.GetBytes(response);
            networkStream.Write(outgoingBuffer, 0, outgoingBuffer.Length);
            networkStream.Flush();

            networkStream.Close();
            tcpClient.Close();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-25T12:39:29.663

当连接关闭时，TcpClient / NetworkStream 不会收到通知。您唯一可用的选项是在写入流时捕获异常。

几年前，我们开始使用套接字而不是 tcp 客户端。与 tcpclient 相比，socket 更有用。

您可以使用几种方法

民意调查就是其中之一

[http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.poll.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.poll.aspx)

您还可以检查 Write 本身的结果。它为您提供实际写入的字节数。

Connected 属性本身仅反映最后一次操作的状态。其文档指出“Connected 属性的值反映了最近一次操作时的连接状态。如果需要确定连接的当前状态，请进行非阻塞、零字节的发送调用。如果调用成功返回或抛出WAEWOULDBLOCK错误代码（10035），则套接字仍然连接；否则，套接字不再连接。”

[http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.connected.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.connected.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-01T20:39:54.693

如果您使用无限超时进行阻塞读取，即

```
 NetworkStream.ReadTimeout = -1 
```

那么在这种情况下，当连接丢失时，Read 方法将返回零

```
 // Reading everything from network to memory stream

                var s = new MemoryStream();

                var buf = new byte[client.ReceiveBufferSize];

                do
                {
                    var n = stream.Read(buf, 0, buf.Length);
                    if(n == 0)
                    {
                        return; // connection is lost
                    }
                    s.Write(buf, 0, n);
                }
                while(s.Length < packetsize); 
```

# java - 如何在 Java 中将毫秒转换为儒略日数？

> ID：15067022
> 
> 赞同：2
> 
> 时间：2013-02-25T12:30:50.970
> 
> 标签：java, julian-date

我需要一个 Java 方法，它可以将“自 Unix 纪元开始以来经过的毫秒数”转换为“自公元前 4713 年 1 月 1 日以来经过的天数”。这个功能是否已经实现是Java？

我尝试了几种选择。其中一些不编译。其中一些与在线可用的转换不一致 ( [http://www.onlineconversion.com/julian_date.htm](http://www.onlineconversion.com/julian_date.htm) )。因此，请仅发布您自己满意地使用的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:44:49.847

试试[Jodd](http://jodd.org/doc/jdatetime.html)的[JDateTime](http://jodd.org)。*这是一个日期时间类，它在Julian Date Numbers*上执行所有计算。**JdateTime**类具有友好的用户界面，您可以随时获取 Julian Date 的值。例如，您可以使用 epox 毫秒实例化该类，然后读取 Julian Date Number：

```
JDateTime jdt = new JDateTime(milliseconds);
JulianDateStamp jds = jdt.getJulianDate();
// or:
double jdn = jdt.getJulianDateDouble()
// or:
int jdn = jdt.getJulianDateNumber() 
```

如果您对具体计算感兴趣，请参阅[TimeUtil#toJulianDate](https://github.com/oblac/jodd/blob/master/jodd-core/src/main/java/jodd/datetime/TimeUtil.java#L181)方法。它基于经过验证的天文算法，但它也考虑到浮点数的计算错误。这就是结果是**JulianDateStamp**的原因，该类分别保存 JD 整数及其分数，以提供高达 1 毫秒的精度。这个类也写了很多测试用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:37:54.943

这里发布的方法基本上解决了我的需求：[http](http://www.rgagnon.com/javadetails/java-0506.html#comment-811614512) ://www.rgagnon.com/javadetails/java-0506.html#comment-811614512 你必须考虑到它返回中午的时间（12:00 UTC） ，比午夜 (0:00 UTC) 的日期晚一天。

要将毫秒转换为（年、月、日）——这是上述方法所期望的格式——你可以使用这些指令：

```
 Date date = new Date(longMillis);

  Calendar calendar = Calendar.getInstance();
  calendar.setTime(date);

  int year = calendar.get(Calendar.YEAR);
  int month = calendar.get(Calendar.MONTH) + 1; // El mes que devuelve Calendar va de 0 a 11.
  int day = calendar.get(Calendar.DAY_OF_MONTH);
  int[] ymd = new int[] {year, month, day}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:48:19.410

```
 GregorianCalendar cal = new GregorianCalendar();
    cal.setTimeInMillis(millis);        
    cal.setGregorianChange(new Date(Long.MAX_VALUE));
    int julianDay = cal.get(Calendar.DAY_OF_YEAR); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T03:52:45.473

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-05T09:08:02.933

```
 Time time = new Time();
    time.setToNow();
    long currentTime = Long.parseLong("1484903678788");
    int currentJulianDay = Time.getJulianDay(currentTime, time.gmtoff);
    System.out.print(currentJulianDay); // 2457774 
```

# ofbiz - 在 Apache OFBiz 中扩展视图实体

> ID：15067024
> 
> 赞同：0
> 
> 时间：2013-02-25T12:30:55.030
> 
> 标签：ofbiz

是否可以在 ofbiz 中扩展视图实体？特别是在一个单独的实体模型文件中，因为我试图隔离我的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:27:54.653

不，不可能这样做，我认为不应该这样做。ofbiz 中的视图只是创建查询的一种简单方法，因此您应该在需要时创建一个。

# android - 当调用 onPostExecute 时，AsyncTask 出现问题？

> ID：15067027
> 
> 赞同：1
> 
> 时间：2013-02-25T12:31:02.050
> 
> 标签：android, android-asynctask, push-notification, google-cloud-messaging

我在使用 AsyncTask 的 OnPOstExecute 时遇到问题，它运行良好，但如果应用程序停止运行，则会生成一个通知，该通知会打开运行 AsyncTask 的 Activity，但永远不会调用 OnPOstExecute。

我的疑问是：如果应用程序已关闭，当我尝试从通知中打开活动时，为什么 OnPOstExecute 不起作用。

代码：

```
 protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
        ...
        ...
               try{
                    loadListTask = new LoadListTask();
                    loadListTask.execute();
                }catch(Exception e){
                    Log.d(TAG,"ERRO: "+e.getMessage());
                 }
      }

public void loadListView() {
        messagesDb = useful.buscarMessagesDb(this);
        ArrayList<Message> messageListViews = new ArrayList<Message>();
        int messagesDbSize = messagesDb.size();
        for (int i = 0; i < messagesDbSize; i++) {
            if (((messagesDb.get(i).idFrom == myId) && (messagesDb.get(i).idTo == idContact)) || 
                    ((messagesDb.get(i).idFrom == idContact) && (messagesDb.get(i).idTo == myId))) {
                Message message = new Message(messagesDb.get(i).idFrom, messagesDb.get(i).idTo, 
                        messagesDb.get(i).dt, messagesDb.get(i).mensagem, messagesDb.get(i).confirm,
                        messagesDb.get(i).idWeb);           
                messageListViews.add(message);
            } else {
                //Log.d(TAG, "Essa mensagem não é pra esse contato!!!");
            }
        }
            listChat.setAdapter(null);
            pref.edit().putBoolean("isUpdate", false).commit();
            AdapterMessageListView adapterMessageListView = new AdapterMessageListView(myId, idContact, 
                    getApplicationContext(), messageListViews); 
            listChat.setAdapter(adapterMessageListView);
            listChat.setCacheColorHint(Color.TRANSPARENT);
            listChat.setSelection(listChat.getCount());
    }

private class LoadListTask extends AsyncTask<Void, Void, String> {

        @Override
        protected String doInBackground(Void... params) {
            try {
                Log.d(TAG,"doInBackground");
                Thread.sleep(100);
            } catch (InterruptedException e) {

            }
            return "list";
        }
            @Override
            public void onPreExecute() {
                Log.d(TAG,"PREEXECUTE");

            }

            @Override
            protected void onPostExecute(String result) {

                Log.d(TAG,"PostExecute");
                loadListView();
                loadListTask = new LoadListTask();
                loadListTask.execute();
                super.onPostExecute(result);
            }
        } 
```

信息：

```
02-25 14:05:42.396: D/Chat(20663): doInBackground
02-25 14:05:42.396: W/MessageQueue(20663): Handler{40532ad8} sending message to a Handler on a dead thread
02-25 14:05:42.396: W/MessageQueue(20663): java.lang.RuntimeException: Handler{40532ad8} sending message to a Handler on a dead thread 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:47:40.403

根据文档 [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

> onPostExecute(Result)，在后台计算完成后在 UI 线程上调用。>后台计算的结果作为参数传递给这一步。

一旦你的应用程序关闭，就不再有 UI 线程了。这就是日志显示“在死线程上”语句的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T18:00:59.877

这个解决方案对我有用：

```
// workaround for http://code.google.com/p/android/issues/detail?id=20915
try {
        Class.forName("android.os.AsyncTask");
} catch (ClassNotFoundException e) {
} 
```

[http://oldcodemonkey.blogspot.com.br/2012/06/android-sending-message-to-handler-on.html](http://oldcodemonkey.blogspot.com.br/2012/06/android-sending-message-to-handler-on.html) [https://code.google.com/p/android/issues/detail?id=20915](https://code.google.com/p/android/issues/detail?id=20915)

# ruby-on-rails - rails_admin 没有路由匹配 '/admin'

> ID：15067033
> 
> 赞同：3
> 
> 时间：2013-02-25T12:31:29.580
> 
> 标签：ruby-on-rails, rails-admin

我的路由文件中有这个（在顶部）：

```
mount RailsAdmin::Engine => '/admin', :as => 'rails_admin' 
```

Rails_admin**正在工作**，但现在 rake routes 显示：

```
Routes for RailsAdmin::Engine:
    dashboard GET         /                                      rails_admin/main#dashboard
        index GET|POST    /:model_name(.:format)                 rails_admin/main#index
          new GET|POST    /:model_name/new(.:format)             rails_admin/main#new
       export GET|POST    /:model_name/export(.:format)          rails_admin/main#export
  bulk_delete POST|DELETE /:model_name/bulk_delete(.:format)     rails_admin/main#bulk_delete
history_index GET         /:model_name/history(.:format)         rails_admin/main#history_index
  bulk_action POST        /:model_name/bulk_action(.:format)     rails_admin/main#bulk_action
         show GET         /:model_name/:id(.:format)             rails_admin/main#show
         edit GET|PUT     /:model_name/:id/edit(.:format)        rails_admin/main#edit
       delete GET|DELETE  /:model_name/:id/delete(.:format)      rails_admin/main#delete
 history_show GET         /:model_name/:id/history(.:format)     rails_admin/main#history_show
  show_in_app GET         /:model_name/:id/show_in_app(.:format) rails_admin/main#show_in_app 
```

重新启动服务器后我唯一做的就是添加一个自定义操作，我已经删除了它，但仍然收到这个非常奇怪的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T09:50:04.393

这个错误并不像你想象的那么奇怪。如果到 RailsAdmin 引擎的原始路径是 /admin，那么几乎可以肯定某处的某些代码使用该语法请求路径。像 admin_xxx_xxx_path 或 admin_xxx_xxx_url 之类的东西。Rails url 帮助程序会尝试将其解释为 /admin/xxx/xxx 并且路由错误将返回 'rails_admin no route matches '/admin'。

# html - 如何在电脑上测试html5手机网页

> ID：15067039
> 
> 赞同：0
> 
> 时间：2013-02-25T12:31:34.530
> 
> 标签：html, testing, mobile-website

我正在使用html5，css3和javascript开发一个html5移动网页。但是如何在pc中测试布局。我尝试添加一些插件来调整浏览器的大小以适应手机的分辨率，但成功了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:43:19.120

Opera 有一个移动设备模拟器，可以模拟许多设备，您可以创建自己的设备。

[http://www.opera.com/developer/tools/mobile/](http://www.opera.com/developer/tools/mobile/)

Chrome 有一项功能，可让您设置用户代理和设备指标以在移动设备上进行测试。您可以通过按 f12 打开开发人员工具并单击右下角的小齿轮来访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T23:08:52.057

您可以使用 Chrome 的检查器设置视口的硬宽度/高度以测试移动布局。为此，请按 打开检查器`ctl-shift-i`。然后点击右下角的小齿轮![设置齿轮](../Images/2a9c848b84d9e095021a6d51f32df6d8.png)。这将打开此页面：

![设置页面](../Images/df4fff60b92dd2d4b268ad14bfbac60a.png)

单击`Overrides`左侧边栏中的 。

然后使用此部分设置您的视口设置：

![视口设置](../Images/5088fcaf64fd0768f6252a21f4b71092.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:34:33.157

例如，存在[用于 Firefox 的用户代理切换器插件](https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/)

这应该模拟移动浏览器到您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:49:26.653

“Web 开发人员工具栏”扩展（适用于 Chrome 和 Firefox）在“调整大小”选项卡中具有一个名为“查看响应式布局”的功能。您还可以设置自己的首选尺寸设置并将浏览器调整为您想要的任何尺寸。

另一种选择是使用您家中的设备或您的朋友可以借给您的设备，并使用 xip.io 服务直接从这些设备访问您计算机上的文件。

[http://xip.io/](http://xip.io/)

你可以在这里找到一个简短的解释：http: [//xpressivecode.com/2012/9/20/xipio-why-you-should-care.aspx](http://xpressivecode.com/2012/9/20/xipio-why-you-should-care.aspx)

# c++ - 为什么当我只使用静态 .lib 时，Windows 会告诉我找不到 .dll 文件？

> ID：15067042
> 
> 赞同：2
> 
> 时间：2013-02-25T12:31:57.013
> 
> 标签：c++, visual-studio-2010, dll, linker, static-libraries

我想我有一个理解问题，如果有人最终向我解释它，我会很高兴......

我正在开发一个使用我自己的静态库 (.lib) 的 Win32 应用程序 (.exe)。该库依赖于另一个*静态*库（实际上是用于 Windows 的 libxml2）。

我做了什么：

*   我将 libxml 包含目录添加到我的 .lib 项目“VC++ 目录”->“包含目录”中。
*   我构建了我的库，构建成功，.lib 文件出现在我的输出文件夹中。
*   我创建了一个控制台应用程序项目并编写了一些使用 .lib 函数（又使用 libxml 函数）的代码。使用“框架和参考”->“添加新参考”将我的 lib 项目作为参考添加到应用项目中。
*   我尝试构建应用程序并得到链接器错误 - 这没关系，因为我忘记通过“链接器”->“输入”->“附加依赖项”将 libxml2.lib 添加到我的应用程序中。所以我将 libxml2.lib 添加到依赖项中，并将其路径添加到“VC++ 目录”->“库目录”。我重建了应用程序，构建成功。但是当我尝试启动我的 .exe 时，会出现错误。它说：“应用程序无法启动，因为 libxml2.dll。重新安装应用程序可能会修复等等”。

那么为什么我的 .exe 需要 libxml2.dll 呢？我只想将 libxml2 用作静态库。所有实验均使用调试配置设置完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:52:57.843

看来您的 DLL 版本的 lib 路径出现在静态 lib 版本之前。

# drupal - 哪个文件负责在 drupal 7 中查看自定义模块的功能

> ID：15067046
> 
> 赞同：-1
> 
> 时间：2013-02-25T12:32:10.053
> 
> 标签：drupal, drupal-7, drupal-modules

我是 drupal 的新手，急切地想了解更多。我正在创建一个自定义模块，它将显示员工类型的实体。谁能告诉我找出自定义模块的视图文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:56:08.593

Drupal 将用于呈现您的实体的页面

**[手册第一页 Drupal.org 关于主题自定义实体](http://drupal.org/node/1238606)**

> 自定义实体的输出主题需要三个部分，或更具体的函数：hook_menu()、Page Callback 和 MODULE_theme() Hook。

**[查看模式模板：模块](http://drupal.org/project/view_mode_templates)**

> 允许您将实体视图模式模板创建为 `ENTITY-TYPE--BUNDLE--VIEW-MODE.tpl.php`. 模板可用于自定义主题和模块。

[这篇](http://technify.me/cms/drupal/theming-custom-entities-in-drupal-7/)文章中的评论部分还讨论了一些特殊情况。

# asp.net - ASP.NET MVC - 在 RegisterGlobalFilters() 中使用 ActionFilterAttribute 时，Response.Filter 为空

> ID：15067049
> 
> 赞同：10
> 
> 时间：2013-02-25T12:32:17.257
> 
> 标签：asp.net, asp.net-mvc, gzip, action-filter

我想在我的网站上使用 G-ZIP，我用谷歌搜索了以下代码：

```
public class CompressAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var acceptEncoding = filterContext.HttpContext.Request.Headers["Accept-Encoding"];
        if (!string.IsNullOrEmpty(acceptEncoding))
        {
            acceptEncoding = acceptEncoding.ToLower();
            var response = filterContext.HttpContext.Response;
            if (acceptEncoding.Contains("gzip"))
            {
                response.AppendHeader("Content-encoding", "gzip");
                response.Filter = new GZipStream(response.Filter, CompressionMode.Compress);
            }
            else if (acceptEncoding.Contains("deflate"))
            {
                response.AppendHeader("Content-encoding", "deflate");
                response.Filter = new DeflateStream(response.Filter, CompressionMode.Compress);
            }
        }
    }
} 
```

当我将属性设置为控制器或动作时，它工作正常。

```
[Compress]
public class PostController : Controller 
```

我不想在每段代码上手动执行此操作，所以我在

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new CompressAttribute());
} 
```

但是当我运行应用程序时，这行代码出现了异常：

```
response.Filter = new GZipStream(response.Filter, CompressionMode.Compress); 
```

response.Filter 为空。

我想知道为什么会发生这种情况以及如何解决这个问题。谢谢！

**- 更新：**

**我发现只有当控制器包含子操作并且它被调用时才会发生异常。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-31T09:43:32.973

我的解决方案是过滤所有子动作。

```
if (filterContext.IsChildAction) return; 
```

在您的方法顶部使用此代码。

```
public class CompressAttribute : ActionFilterAttribute
{    
   public override void OnActionExecuting(ActionExecutingContext filterContext)
   {
       if (filterContext.IsChildAction) return;

       ...
    }
} 
```

# api - Google App Engine 删除 Post Put 操作

> ID：15067053
> 
> 赞同：2
> 
> 时间：2013-02-25T12:32:28.227
> 
> 标签：api, google-app-engine, restful-url

我正在尝试构建 REST API。（第一次尝试）

对于我的删除和放置

```
class DeletePost(webapp2.RequestHandler):
def delete(self):
    postKey = self.request.get('postKey')
    if(postKey != ""):
        db.delete(postKey)

    return 
```

上面的代码不起作用。为了让它工作，我必须把它改成**def get(self)：**

Html 是

```
<form action="/deletePost" method="delete" class="form-search">
   <div class="row-fluid">
   <legend>Title:</legend>
   <input type="text" name = "postKey" class="input-xxlarge span12" placeholder="briefly describle this event"><br>   
   <input type="submit" value="Post" class="btn btn-large btn-primary pull-right" type="button">

</form> 
```

我得到的错误是

```
405 Method Not Allowed
The method GET is not allowed for this resource. 
```

感谢您的澄清。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:44:57.583

表单方法属性中只允许使用 GET 和 POST 变量。

[http://www.w3.org/TR/html401/interact/forms.html](http://www.w3.org/TR/html401/interact/forms.html)

在您的情况下，浏览器看到 method="delete"，无法识别该值并默认为“get”。

# ios - NSFetchedResultsController 崩溃返回 NULL 错误

> ID：15067054
> 
> 赞同：0
> 
> 时间：2013-02-25T12:32:36.060
> 
> 标签：ios, objective-c, core-data, nsfetchedresultscontroller

我正在尝试设置一个基本`NSFetchedResultsController`的，它从下面的错误中向我抛出一个“null”错误。由于错误及其 userInfo 都为 null，我不知道我什至可以开始做些什么来找出问题所在。这是那些“让你的头撞到砖墙上却不被告知原因”的编程时刻之一。这是导致崩溃的部分，位于`viewDidLoad`：

```
NSError *error;
if (![_fetchedResultsController performFetch: &error]) {
    NSLog(@"Error! %@, %@", error, [error userInfo]);
    abort();
} 
```

这是设置控制器的方法：

```
- (NSFetchedResultsController *) fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName: @"Quote" inManagedObjectContext: [self managedObjectContext]];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:nil ascending: YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    [fetchRequest setFetchBatchSize: 50];

    NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest: fetchRequest managedObjectContext: [self managedObjectContext] sectionNameKeyPath: nil cacheName: @"Root"];
    self.fetchedResultsController = theFetchedResultsController;
    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:40:08.810

尝试更换

```
[_fetchedResultsController performFetch:&error] 
```

代替

```
[self.fetchedResultsController performFetch:&error] 
```

因为如果`_fetchedResultsController`没有分配，您将不会调度该`-fetchedResultsController`方法，只有您使用`self.fetchedResultsController`，才会调度 getter 方法。

# ruby-on-rails - 如何设置 Time.zone = GMT+05:30

> ID：15067056
> 
> 赞同：2
> 
> 时间：2013-02-25T12:32:39.573
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我正在使用 Rails 3.2。我想将时区设置为 GMT+05:30。但是以下命令给了我一个错误：

```
Time.zone = GMT+05:30

SyntaxError: (irb):5: syntax error, unexpected ':', expecting $end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:05:15.553

为了将这样的字符串转换为 TimeZone，您首先必须将其转换为偏移量，您可以使用一点正则表达式来完成。

```
time_zone_string = "GMT+5:30"
offset = time_zone_string.match(/GMT(\+|-)(\d+):(\d+)/) { "#{$1}1".to_i * ($2.to_i.hours + $3.to_i.minutes) }
time_zone = ActiveSupport::TimeZone.new(offset)
time_zone # (GMT+5:30) Chennai 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T12:34:59.843

获取时区的名称而不是偏移量。

```
>> Time.zone = 'New Delhi'
>> Time.now # Mon, 25 Feb 2013 18:04:43 IST +05:30 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T13:05:58.787

如果您知道偏移量，您可以这样做

```
Time.zone = 19600 
```

你也可以使用一些 rails helpers

```
Time.zone = 5.hours + 30.minutes 
```

我不确定这对夏令时有何影响

# internet-explorer - IE10 Metro 的 selenium webdriver 支持？

> ID：15067061
> 
> 赞同：4
> 
> 时间：2013-02-25T12:33:03.967
> 
> 标签：internet-explorer, selenium, webdriver, internet-explorer-10

selenium webdriver 是否支持 IE10 Metro？默认情况下，测试在桌面模式下运行。有什么方法可以在 Metro 模式下测试吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:01:59.420

不，在撰写本文时，不支持使用 Metro 界面进行自动化。对不起。但是，Selenium 是一个开源项目，我相信 IE 驱动程序的开发人员会很乐意查看您可能提出的任何补丁或解决方案。

# c# - 如何检查域是否存在

> ID：15067063
> 
> 赞同：1
> 
> 时间：2013-02-25T12:33:15.477
> 
> 标签：c#

我们希望通过检查输入的电子邮件地址的电子邮件域是否存在来验证我们网站注册表单中的用户电子邮件地址。有没有办法在 C# 中做到这一点。

更具体地说 - 有没有办法在 C# 中按其域检索网站 IP 地址

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T12:34:16.420

你的问题实际上是两个问题。

先回答后一个问题：

> 更具体地说 - 有没有办法在 C# 中按其域检索网站 IP 地址

是的，对域执行 DNS 查找。

例如：

```
public static void DoGetHostEntry(string hostname)
{
    IPHostEntry host;

    host = Dns.GetHostEntry(hostname);

    Console.WriteLine("GetHostEntry({0}) returns:", hostname);

    foreach (IPAddress ip in host.AddressList)
    {
        Console.WriteLine("    {0}", ip);
    }
} 
```

有关详细信息，请参阅 MSDN：http: [//msdn.microsoft.com/en-us/library/ms143998.aspx](http://msdn.microsoft.com/en-us/library/ms143998.aspx)

你的第二个问题有点复杂：

> 我们希望通过检查输入的电子邮件地址的电子邮件域是否存在来验证我们网站注册表单中的用户电子邮件地址。有没有办法在 C# 中做到这一点。

这取决于您所说的存在，@Jcl 的评论正确地指出，根据该域的 DNS 设置，它可能会更加细微。例如，完全有可能注册一个域并且没有其他记录，即使它什么也不做，它仍然存在。

# android - 使用android蓝牙打印文件内容

> ID：15067065
> 
> 赞同：3
> 
> 时间：2013-02-25T12:33:16.250
> 
> 标签：android, bluetooth, file-sharing

我想打印一些文件内容，或者说通过蓝牙打印机设备从我的移动设备生成账单。如何使用蓝牙生成账单？

# r - 在r中查找和替换数字序列

> ID：15067073
> 
> 赞同：12
> 
> 时间：2013-02-25T12:33:49.833
> 
> 标签：r, replace, sequence

我有一个数据框，其中包含类似于下面的数字序列：

```
data <- c(1,1,1,0,0,1,1,2,2,2,0,0,0,2,1,1,0,1,0,2) 
```

我需要的是找到 0 的 1、2 或 3 次重复的所有实例，其中前面的数字和后面的数字相同 - 即都是 1 或都 2（例如 1,0,1 或 2,0,0,2 但是不是 2,0,1)。

然后我只需要用周围的值填充零。

我设法找到并计算连续的零

```
consec <- (!data) * unlist(lapply(rle(data)$lengths, seq_len)) 
```

然后我找到了这些连续零开头的行：

```
consec <- as.matrix(consec)
first_na <- which(consec==1,arr.ind=TRUE) 
```

但我对更换过程感到困惑

非常感谢您对此的帮助！

卡尔

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T13:29:58.400

这是使用`rle()`and的无环解决方案`inverse.rle()`。

```
data <- c(1,1,1,0,0,1,1,2,2,2,0,0,0,2,1,1,0,1,0,2)

local({
  r <- rle(data)
  x <- r$values
  x0 <- which(x==0) # index positions of zeroes
  xt <- x[x0-1]==x[x0+1] # zeroes surrounded by same value
  r$values[x0[xt]] <- x[x0[xt]-1] # substitute with surrounding value
  inverse.rle(r)
})

[1] 1 1 1 1 1 1 1 2 2 2 2 2 2 2 1 1 1 1 0 2 
```

* * *

PS。我使用`local()`一种简单的机制来避免大量新的临时对象破坏工作空间。你可以创建一个`function`而不是使用`local`- 我只是发现我`local`现在经常使用这种类型的任务。

* * *

聚苯乙烯。您必须修改此代码以排除原始数据中的前导零或尾随零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:22:20.920

由于似乎对这个问题的答案很感兴趣，我想我会为后代写一个替代的正则表达式方法。

使用“gregexpr”函数，您可以搜索模式并使用生成的位置匹配和匹配长度来调用原始向量中要更改的值。使用正则表达式的优点是我们可以明确地知道我们想要匹配哪些模式，因此，我们不需要担心任何排除情况。

*注意：以下示例按书面形式工作，因为我们假设是个位数的值。我们可以轻松地将其调整为其他模式，但我们可以采用单个字符的小捷径。如果我们想对可能的多位值执行此操作，我们会希望添加一个分隔符作为第一个连接（“粘贴”）函数的一部分。*

* * *

**编码**

```
str.values <- paste(data, collapse="") # String representation of vector
str.matches <- gregexpr("1[0]{1,3}1", str.values) # Pattern 101/1001/10001
data[eval(parse(text=paste("c(",paste(str.matches[[1]] + 1, str.matches[[1]] - 2 + attr(str.matches[[1]], "match.length"), sep=":", collapse=","), ")")))] <- 1 # Replace zeros with ones
str.matches <- gregexpr("2[0]{1,3}2", str.values) # Pattern 202/2002/20002
data[eval(parse(text=paste("c(",paste(str.matches[[1]] + 1, str.matches[[1]] - 2 + attr(str.matches[[1]], "match.length"), sep=":", collapse=","), ")")))] <- 2 # Replace zeros with twos 
```

* * *

**第 1 步**：制作一个包含所有数据值的字符串。

```
str.values <- paste(data, collapse="")
# "11100112220002110102" 
```

这会将数据折叠成一个长字符串，因此我们可以在其上使用正则表达式。

**第 2 步**：应用正则表达式来查找字符串中任何匹配项的位置和长度。

```
str.matches <- gregexpr("1[0]{1,3}1", str.values)
# [[1]]
# [1]  3 16
# attr(,"match.length")
# [1] 4 3
# attr(,"useBytes")
# [1] TRUE 
```

在这种情况下，我们使用正则表达式来查找第一个模式，即一到三个零 ( `[0]{2,}`)，两边各有一个 ( `1[0]{1,3}1`)。我们必须匹配整个模式，以防止必须检查两端是否匹配。我们将在下一步中减去这些末端。

**第 3 步**：将 1 写入原始向量中的所有匹配位置。

```
data[eval(parse(text=paste("c(",paste(str.matches[[1]] + 1, str.matches[[1]] - 2 + attr(str.matches[[1]], "match.length"), sep=":", collapse=","), ")")))] <- 1
# 1 1 1 1 1 1 1 2 2 2 0 0 0 2 1 1 1 1 0 2 
```

我们在这里一次性完成几个步骤。首先，我们从正则表达式中匹配的数字创建一个数字序列列表。在这种情况下，有两个匹配项，它们从索引 3 和 16 开始，分别长 4 和 3 项。这意味着我们的零点位于索引 (3+1):(3-2+4) 或 4:5 以及 (16+1):(16-2+3) 或 17:17。我们再次使用“折叠”选项连接（“粘贴”）这些序列，以防有多个匹配项。然后，我们使用第二个连接将序列放入 combine ( `c()`) 函数中。使用 'eval' 和 'parse' 函数，我们将此文本转换为代码并将其作为索引值传递给 [data] 数组。我们将所有的都写入这些位置。

**步骤 x**：对每个模式重复。在这种情况下，我们需要进行第二次搜索，找到一到三个两边都有二的零，然后运行与步骤 3 相同的语句，但分配二，而不是一。

```
str.matches <- gregexpr("2[0]{1,3}2", str.values)
# [[1]]
# [1] 10
# attr(,"match.length")
# [1] 5
# attr(,"useBytes")
# [1] TRUE

data[eval(parse(text=paste("c(",paste(str.matches[[1]] + 1, str.matches[[1]] - 2 + attr(str.matches[[1]], "match.length"), sep=":", collapse=","), ")")))] <- 2
# 1 1 1 1 1 1 1 2 2 2 2 2 2 2 1 1 1 1 0 2 
```

* * *

**更新**：我意识到原来的问题是连续匹配一到三个零，而不是我写入原始代码的“两个或更多”。我已经更新了正则表达式和解释，尽管代码保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:44:39.857

可能有一个没有`for`循环的解决方案，但你可以试试这个：

```
tmp <- rle(data)
val <- tmp$values
for (i in 2:(length(val)-1)) {
  if (val[i]==0 & val[i-1]==val[i+1]) val[i] <- val[i-1]
}
tmp$values <- val
inverse.rle(tmp) 
```

这使 ：

```
[1] 1 1 1 1 1 1 1 2 2 2 2 2 2 2 1 1 1 1 0 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-25T14:11:25.277

对于那些在 2020 年研究此问题的人，我仅使用 gsub 进行了序列替换。

```
str.values <- paste(YOUR$COLUMN, collapse="") 
str.values2 <- gsub("ORIGINAL PATTERN","PATTERN TO REPLACE", str.values) 
```

# spring - Spring Batch 管理员进入现有的 Spring Batch 项目

> ID：15067077
> 
> 赞同：3
> 
> 时间：2013-02-25T12:34:02.127
> 
> 标签：spring, admin, spring-batch

我正在使用弹簧批处理来解析我的文件。我想使用 spring Batch Admin 进行作业检查、作业启动、作业执行。Spring Batch Admin 使用 HSQLDB 数据库，该数据库在启动时被初始化。我的 Spring Batch 项目使用自己的数据库，其中包括 Spring Batch 的相应表：

1.  BATCH_JOB_INSTANCE
2.  BATCH_JOB_PARAMS
3.  BATCH_JOB_EXECUTION
4.  BATCH_STEP_EXECUTION
5.  BATCH_JOB_EXECUTION_CONTEXT
6.  BATCH_STEP_EXECUTION_CONTEXT
7.  BATCH_STEP_EXECUTION_SEQ
8.  BATCH_JOB_EXECUTION_SEQ
9.  BATCH_JOB_SEQ

在我的数据库中还包括一些其他表，这些表在我的项目中使用。

我希望 Spring Batch Admin 使用我的数据库的上层表而不是它自己的数据库。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-06T14:55:18.877

看起来我迟到了，但仍然，以防有人仍在寻找答案。是的，要使 Spring Batch Admin 使用相同的数据库，请将数据源配置属性放在 src/main/resources/META-INF/default-properties 下。此外，要使其加载您的上下文，需要将上下文配置文件放在 src/main/resources/META-INF/spring/batch/servlet/override/ 下。放置文件以覆盖 Spring Batch Admin 默认提供的文件很重要，因为它会在特定层次结构中查找文件。也可以查看以下文章以获得一个工作示例。 [http://examples.javacodegeeks.com/enterprise-java/spring/spring-batch-admin-tutorial/](http://examples.javacodegeeks.com/enterprise-java/spring/spring-batch-admin-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T14:38:53.563

您需要阅读 spring-batch 文档的[repositoryTablePrefix](https://docs.spring.io/spring-batch/trunk/reference/htmlsingle/#repositoryTablePrefix)部分。

# java - sqlite android中的编码字符

> ID：15067078
> 
> 赞同：2
> 
> 时间：2013-02-25T12:34:14.077
> 
> 标签：java, android

您好，我正在从两个不同的文件中读取英语和南非荷兰语，并将其放入一个 sqlite 数据库中，例如南非荷兰语中的单词是正确的

南非荷兰语单词在下面

```
 'n slegte lot
     'n voël die wilde diere van die prooi
      'n trekvogel 
```

==================================================== ========

```
 public class MainActivity extends Activity {

DbAdapterSDCard db;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String array[] = { "afrikaans" };
    for (int j = 0; j < array.length; j++) {
        String filePath1 = "/sdcard/Dictionarys/english.txt";
        String filePath2 = "/sdcard/Dictionarys/" + array[j] + ".txt";
        String UTF8 = "utf8";
        int BUFFER_SIZE = 8192;
        int i = 0;
        System.out.println(array[j]);
        db = new DbAdapterSDCard(array[j]);
        try {
            db.open();
            File file = new File(filePath3);
            file.createNewFile();

            BufferedReader br1 = new BufferedReader(new InputStreamReader(
                    new FileInputStream(filePath1),UTF8), BUFFER_SIZE);

            BufferedReader br2 = new BufferedReader(new InputStreamReader(
                    new FileInputStream(filePath2), UTF8), BUFFER_SIZE);

            String sCurrentLine1, sCurrentLine2;

            while ((sCurrentLine1 = br1.readLine()) != null
                    && ((sCurrentLine2 = br2.readLine()) != null)) {
                db.insertTitle(sCurrentLine1, sCurrentLine2);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        try {

            db.close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

# }

但是在sqlite中它是这样插入的 ![在此处输入图像描述](../Images/6d8dd17c096936600cc57e822486a37b.png)

两者都有编码 UTF-8 字符集............

谁能建议我我已经尝试了很多但不能成功

txt文件中的编码如下

![在此处输入图像描述](../Images/67f3e5aacc33442cba81aadc1a667f6f.png)

现在如果我使用编码 utf-8 字符将无法正确显示:(

![在此处输入图像描述](../Images/b5958498ac4cf8327d7d10247ff06e64.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:40:39.137

Android sqlite 默认使用 UTF-8。所以看起来问题出在你从文件中读取时。

尝试将编码添加到 InputStreamReader

```
BufferedReader br2 = new BufferedReader(new InputStreamReader(
                    new FileInputStream(filePath2), "utf-8"), BUFFER_SIZE); 
```

或者你可以挖掘 db.open() 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:31:54.913

这是我的解决方案：首先，您必须清理您的应用程序，因为您在 apk 中进行的每个构建，您都重新创建数据库，有时更改代码中的编码不会显示给您效果。

首先，您必须通过使用 adb 重定向到您的包名称来清理您的应用程序，即

> ~/android-sdks/platform-tools/./adb shell pm clear com.example.my.project

或者如果您在 android sdk 平台工具文件夹中

> adb shell pm clear com.example.my.project

进而

> adb shell am start -a android.intent.action.DELETE -d package:com.example.my.project

每次要对数据库进行更改时，请使用此命令。在使用 adb 命令之前，我做了一些更改，但没有看到任何效果。

从 ie 文件中读取行时，第二次放置编码字符集（linux 示例）：

```
private class DatabaseHelper extends SQLiteOpenHelper {

    private static final String ENCODING = "UTF-8";
    private Context context;

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, 1);
        //DATABASE_NAME is just a name of database

        this.context = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL(COMMAND_CREATE_TABLE);
        //COMMAND_CREATE is just command to create table i.e.
        //CREATE TABLE myTable ( _id int...

        try {
            InputStream inputStream = this.context.getResources().openRawResource(R.raw.my_base_file);
            BufferedReader bufferReader;

            if (inputStream != null) {
                bufferReader = new BufferedReader(new InputStreamReader(inputStream, ENCODING));

                String line = "";

                while ((line = bufferReader.readLine()) != null) {
                    db.execSQL(COMMAND_INSERT_START + line + COMMAND_INSERT_END);
                }

            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS myTable");
        onCreate(db);
    }

}

public Cursor fetchAllRows() {
    SQLiteDatabase localSQLiteDatabase = this.sqlDatabase;
    return localSQLiteDatabase.query("myTable", ROWS_COLUMNS_NAME, null, null, null, null, null);
} 
```

在所有操作之前将带有数据的文件转换为 UTF-8 会很好。这是如何执行此操作的示例代码（linux版本）：

> iconv -f WINDOWS-1250 -t UTF-8 -o convertBase.csv originalBase.csv

如果您是 Windows 用户，您可以尝试使用 notepad++

# networkx - 如何在 Networkx 中将多边图转换为无向图？

> ID：15067079
> 
> 赞同：0
> 
> 时间：2013-02-25T12:34:15.797
> 
> 标签：networkx

我已经使用 read_graphml 加载了一个图，它看起来好像返回了一个 Multiedges 图对象，我无法在该对象上运行 PageRank 方法（返回图必须是非多边的异常）。有没有办法将我的图表转换为非多边类型（我认为我加载的图表中没有多条边......）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:16:37.653

如果 read_graphml() 函数返回一个 MultiGraph() 对象，它可能会在输入文件中找到平行（多条）边。但是您可以通过传入一个新的 Graph() 将其转换为没有平行边的图。例如

```
In [1]: import networkx as nx

In [2]: G = nx.MultiGraph([(1,2),(1,2)])

In [3]: G.edges()
Out[3]: [(1, 2), (1, 2)]

In [4]: H = nx.Graph(G)

In [5]: H.edges()
Out[5]: [(1, 2)] 
```

# sql-server - T-SQL 转换 null int 会吃掉周围的文本吗？

> ID：15067084
> 
> 赞同：0
> 
> 时间：2013-02-25T12:34:31.803
> 
> 标签：sql-server, tsql

```
declare @period_len int = 1
SELECT 'lalalalala' + CONVERT(varchar, @period_len) + 'lalalalala' 
```

输出：lalalalala1lalalalala

```
declare @period_len int = null
SELECT 'lalalalala' + CONVERT(varchar, @period_len) + 'lalalalala' 
```

输出：空

后者不应该是 lalalalalaNULLlalalalala 还是 lalalalalalalalalala ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:36:33.307

`null`[在 SQL 中](http://en.wikipedia.org/wiki/Null_%28SQL%29)是特殊的。如果你添加或连接任何东西到`null`，结果是`null`。

在您的输出中，`NULL`不是字符串`'NULL'`。这是您的客户对`null`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:38:14.163

Null 不作为文本打印。如果你想这样做。你必须完成它，如果有 NULL 作为

```
declare @period_len int = null
SELECT 'lalalalala' + Isnull(CONVERT(varchar, @period_len),'NULL') + 'lalalalala' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:40:06.350

如果您真的想在输出中使用 null ，请执行此操作

```
declare @period_len varchar(4) 
set @period_len='null'
SELECT 'lalalalala' +  @period_len + 'lalalalala' 
```

使用 null 作为字符串而不是 SQL 特殊关键字 NULL 表示未知

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:38:13.413

对于 SQL Server，[与 null 连接的字符串会](http://msdn.microsoft.com/en-us/library/ms176056.aspx)产生 null。

这在 SQL Server 2005 中是可配置的，但在 SQL Server 2008 中已删除配置选项。

# python - 如何将个人 SCM 存储库（不在 pypi 中）中的项目包含到 setup.py 中？

> ID：15067086
> 
> 赞同：1
> 
> 时间：2013-02-25T12:34:37.167
> 
> 标签：python, build, distutils, setup.py, pypi

构建依赖于其他源代码控制存储库中的项目（例如，不在 pypi 上的私有项目）的 python 项目的惯用方式是什么？

假设我有一个项目`foobar`托管在`https://example.com/foobar.git`，我想将它包含在`setup.py`另一个项目中。

是否有类似于 maven 的 scm 插件的东西，我可以在其中指定类似的东西`Extension('foobar', scm='scm:git:https://example.com/foobar.git')`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:51:24.847

您可以使用以下选项指定其他位置来安装依赖`dependency_links`项：

```
setup(
    ...
    dependency_links=[
        'git+https://example.com/spamneggs/foobar.git#egg=foobar-1.2.3'
    ]
    install_requires=[
        'foobar',
    ]
) 
```

该`dependency_links`条目用于查找包，对于 SCM 存储的包，`#egg=package-version`片段标识符让工具知道将在该链接上找到哪个包和哪个版本。

请参阅 setuptools 项目文档的[“不在 PyPI 中](http://pythonhosted.org/setuptools/setuptools.html#dependencies-that-aren-t-in-pypi)的依赖项”一章。

# android - Android：字节分配超过字节最大堆大小

> ID：15067087
> 
> 赞同：1
> 
> 时间：2013-02-25T12:34:49.047
> 
> 标签：android, byte, out-of-memory, allocation

我正在开发一个使用 AES 加密对媒体（图片、视频等）进行加密的 Android 应用程序，`java.lang.OutOfMemoryError`当我读取大文件（例如超过 90 MB）时，我有：

```
BufferedInputStream bis = new BufferedInputStream(new FileInputStream(fileToEncrypt));
ByteBuffer bb = ByteBuffer.allocate((int) fileToEncrypt.length());
bis.read(bb.array());
bis.close(); 
```

根据[this](https://stackoverflow.com/questions/11275650/how-to-increase-heap-size-of-an-android-application)或[this](https://stackoverflow.com/questions/6075276/largeheap-true-manifest-tag-not-working)主题或其他，我正在使用`android:largeHeap="true"`AndroidManifest.xml中的选项，但我不确定这是最好的解决方案。是吗 ？如果不是，那么操作大文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:37:36.767

android:largeHeap 标志有潜在危险，我不会向任何人推荐它。当您想尝试某些东西时这很好，但您不能依赖更大的堆作为最终解决方案。启用大堆可能会由于物理内存不足而导致意外崩溃，而不仅仅是此特定应用程序的 dalvik 内存不足。

对我来说有两种解决方案：

*   内存映射文件。互联网上有很多关于 MMF 的资料。请参阅：http: [//developer.android.com/reference/java/nio/channels/FileChannel.html](http://developer.android.com/reference/java/nio/channels/FileChannel.html)您可以使用一些标准 NIO 类逐块读取文件。它会产生一种错觉，即您在内存中拥有整个文件。
*   使用本机内存。请参阅：[http](http://code.google.com/p/native-buffer/) ://code.google.com/p/native-buffer/使用 NDK 您可以访问整个 RAM。问题是您必须以 C 风格管理内存。

# java - 查询休眠缓存

> ID：15067090
> 
> 赞同：7
> 
> 时间：2013-02-25T12:35:04.610
> 
> 标签：java, hibernate, hibernate-cache

我有以下代码：

```
Person a = new Person();
a.setName("John");

Session session = openHibernateSession();

session.beginTransaction();

session.saveOrUpdate(a);

Criteria critera = session.createCriteria(Person.class);
critera.add(Restrictions.eq("name","John"));
Person personFromCache = (Person) criteria.uniqueResult();

...

session.commit(); 
```

我想要的是能够从数据库和 Hibernate 的缓存中搜索对象。以下示例在调用时返回 null `uniqueResult`。有没有办法检索尚未提交到数据库的已保存对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:15:59.703

如果您搜索的不是 ID，那么 Hibernate 将不会使用一级缓存。Hibernate get 和 load 默认与一级缓存相关，但条件查询不相关。在您的情况下，我有两种解决方案

1.  通过刷新会话 = 只需像这样刷新会话，`session.flush();`同时会话中的数据将同步到数据库，因此将生成 Id，结果条件查询将在数据库中找到结果并将结果列表提供给您。

2.  启用休眠二级缓存 = 您可以通过 ehCache 等休眠缓存提供程序启用二级缓存并应用该技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:25:04.373

除了使用 TestNg 测试框架，我们做了一些类似的事情。一些答案讨论了 session.flush() 方法调用。这是对的。对刷新的调用告诉 Hibernate 做几件事，包括确保当前在队列中等待的所有数据库调用都被执行并从队列中清除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:58:06.223

您可以使用 StatelessSession 但请注意：这些实体未绑定到任何会话，如果您想解决关系或惰性字段，您将获得异常！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T01:46:04.357

```
session.beginTransaction();

session.saveOrUpdate(a);

session.flush();

Criteria critera = session.createCriteria(Person.class);
critera.add(Restrictions.eq("name","John"));
Person personFromCache = (Person) criteria.uniqueResult(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-31T20:25:46.077

即使您根据用户名进行选择，它也会返回数据。它不返回 null。

# eclipselink - EclipseLink INSERT..SELECT 等效项

> ID：15067095
> 
> 赞同：0
> 
> 时间：2013-02-25T12:35:15.067
> 
> 标签：eclipselink

是否有与本机 Oracle 功能等效的`INSERT INTO FROM SELECT`功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:40:28.910

不可以。使用本机 SQL 查询来执行此操作。

# codeigniter - 从控制器到模型的数组 [codeIgniter]

> ID：15067097
> 
> 赞同：0
> 
> 时间：2013-02-25T12:35:19.393
> 
> 标签：codeigniter

这是我的问题：

Codeigniter 的文档是这样说的：

```
<?php

    $array = array('name' => $name, 'title' => $title, 'status' => $status);

    $this->db->where($array);

    // Produces: WHERE name = 'Joe' AND title = 'boss' AND status = 'active'

?> 
```

我只想将条件从控制器传递给我的 where 子句到模型，所以：

**控制器**

```
<?php
    $condition = array('id' => $id_user)
    $data['info_user'] = $this->user_model->get_user($condition);
?> 
```

**模型**

```
public function get_user($condition)
{
    $q = $this
        ->db
        ->where($condition)
        ->get('users');

    if($q->num_rows > 0)
    {
        return $q->row();
    }
} 
```

这个返回：**SELECT * FROM ( `users`) WHERE `3`IS NULL**

但是当我将数组直接放入模型中时（$

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:43:31.210

无需传递数组，我什至不肯定它可以按照您尝试的方式完成。只需将值本身传递给模型，如下所示。答案已编辑以显示多个变量。

控制器：

```
 $data['info_user'] = $this->user_model->get_user($id_user,$user_login); 
```

模型：

```
public function get_user($id_user,$user_login)
{
    $q = $this
        ->db
        ->where('id_user',$id_user)
        ->or_where('user_login',$user_login);
        ->get('users');

    if($q->num_rows == 1)
    {
        return $q->row();
    }
} 
```

作为一个附带说明，当您想要从数据库中获取单个结果时，例如在检索用户时，始终检查单个结果而不是 > 0。您要确保只返回一个用户。

# android - 如何显示 pin 屏幕

> ID：15067098
> 
> 赞同：3
> 
> 时间：2013-02-25T12:35:19.527
> 
> 标签：android, login, screen

如何访问手机的 pin 屏幕以验证用户是手机的所有者？我不想编写自己的登录屏幕，所以如果我能解决这个问题并使用其中一部手机会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:49:40.997

在 Android 2.2+ 上，您可以使用[DevicePolicyManager](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html)以编程方式锁定屏幕：http: [//developer.android.com/reference/android/app/admin/DevicePolicyManager.html#lockNow%28%29](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#lockNow%28%29)

您的活动将在屏幕锁定时调用[onPause() ，并在解锁时调用](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)[onResume()](http://developer.android.com/reference/android/app/Activity.html#onResume%28%29)。如果用户成功解锁屏幕，他就是所有者。

但如果用户没有设置 PIN，这将不起作用，因此它可能不适合您的需求。

# python - 网络关闭或硬启动服务器时，与 postgres 的套接字连接未关闭

> ID：15067099
> 
> 赞同：0
> 
> 时间：2013-02-25T12:35:24.620
> 
> 标签：python, sockets, postgresql, sqlalchemy, psycopg2

我正在使用 sqlalchemy 创建与 postgresql 的连接并执行简单的命令。

```
>>> from sqlalchemy import create_engine
>>> c = create_engine('postgres://myuser@myremoteserver/mydb?keepalives_idle=4&keepalives_interval=1&keepalives_count=5')
>>> c.execute('select 1').scalar()
1 
```

它工作正常。

在执行查询时创建连接后，它将创建到 postgres 服务器的套接字，在此示例中，它将创建到`myremoteserver`. 我们可以使用 unix`ss`命令检查套接字。（您也可以使用`netstat`）。

```
[root@myclient ~]# ss -torp | grep python
ESTAB      0      0            192.168.1.15:43471       myremoteserver:postgres  timer:(keepalive,1.319ms,0) users:(("python",4074,3)) 
```

如果在创建连接后网络出现故障或 postgres 服务器机器崩溃。

```
>>> c = create_engine('postgres://myuser@myremoteserver/mydb?keepalives_idle=4&keepalives_interval=1&keepalives_count=5') 
```

（您可以`ifdown eth0`对`myremoteserver`网络关闭进行操作）

然后它将在 5 次尝试到服务器后关闭连接。

```
[root@myclient ~]# ss -torp | grep python
ESTAB      0      0            192.168.1.15:43471       myremoteserver:postgres  timer:(keepalive,1.319ms,0) users:(("python",4074,3))
[root@myclient ~]# ss -torp | grep python
ESTAB      0      0            192.168.1.15:43471       myremoteserver:postgres  timer:(keepalive,738ms,0) users:(("python",4074,3))
[root@myclient ~]# ss -torp | grep python
ESTAB      0      0            192.168.1.15:43471       myremoteserver:postgres  timer:(keepalive,2.720ms,0) users:(("python",4074,3))
[root@myclient ~]# ss -torp | grep python
ESTAB      0      0            192.168.1.15:43471       myremoteserver:postgres  timer:(keepalive,788ms,2) users:(("python",4074,3))
[root@myclient ~]# ss -torp | grep python
ESTAB      0      0            192.168.1.15:43471       myremoteserver:postgres  timer:(keepalive,191ms,4) users:(("python",4074,3))
[root@myclient ~]# ss -torp | grep python
[root@myclient ~]# ss -torp | grep python 
```

这是我们在连接字符串中设置的连接行为。

如果我们在套接字关闭和服务器关闭之前执行查询，就会出现问题。

```
# do ifdown eth0 on postgres server to break the network connection.
# execute query before socket close.
>>> c.execute('select 1').scalar() 
```

现在如果你检查套接字然后

```
[root@myclient ~]# ss -torp | grep python
ESTAB      0      74           192.168.1.15:43471       myremoteserver:postgres  timer:(on,1.602ms,3) users:(("python",3098,7))
[root@myclient ~]# ss -torp | grep python
ESTAB      0      74           192.168.1.15:43471       myremoteserver:postgres  timer:(on,585ms,3) users:(("python",3098,7))
[root@myclient ~]# ss -torp | grep python
ESTAB      0      74           192.168.1.15:43471       myremoteserver:postgres  timer:(on,2.833ms,4) users:(("python",3098,7))
[root@myclient ~]# ss -torp | grep python
ESTAB      0      74           192.168.1.15:43471       myremoteserver:postgres  timer:(on,1.851ms,4) users:(("python",3098,7))
[root@myclient ~]# ss -torp | grep python
ESTAB      0      74           192.168.1.15:43471       myremoteserver:postgres  timer:(on,808ms,4) users:(("python",3098,7))
[root@myclient ~]# ss -torp | grep python
ESTAB      0      74           192.168.1.15:43471       myremoteserver:postgres  timer:(on,5.393ms,5) users:(("python",3098,7))
[root@myclient ~]# ss -torp | grep python
ESTAB      0      74           192.168.1.15:43471       myremoteserver:postgres  timer:(on,3.846ms,5) users:(("python",3098,7))
.................
.................
.................
[root@myclient ~]# ss -torp | grep python
ESTAB      0      74           192.168.1.15:43471       myremoteserver:postgres  timer:(on,5.268ms,72) users:(("python",3098,7))
[root@myclient ~]# ss -torp | grep python
ESTAB      0      74           192.168.1.15:43471       myremoteserver:postgres  timer:(on,4.804ms,254) users:(("python",3098,7)) 
```

根据连接字符串套接字必须在 5 次尝试后关闭。但我不知道为什么它尝试了 5 次以上并达到 254 次尝试。

即使我们在服务器崩溃和客户端关闭套接字之间执行查询，我必须设置什么才能在 5 次尝试后关闭套接字。

**注意：keepalives_idle、keepalives_interval 和 keepalives_count 用于设置 TCP 连接中的 keepalive 参数。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T08:51:33.427

来自 PostgreSQL 文档：

> 控制在客户端与服务器的连接被认为死之前可能丢失的 TCP 保持连接的数量。零值使用系统默认值。对于通过 Unix 域套接字建立的连接，或者如果禁用了 keepalives，则忽略此参数。它仅在 TCP_KEEPCNT 套接字选项可用的系统上受支持；在其他系统上，它没有影响。

In other words. if your system doesn't support it, it has no effect and normal timeout rules will apply.

# php - codeigniter 变量未在视图页面上初始化

> ID：15067103
> 
> 赞同：0
> 
> 时间：2013-02-25T12:35:29.140
> 
> 标签：php, forms, codeigniter

我是codeigniter的新手，我正在尝试在网页上显示一些数据我有控制器和模型但是我的变量daunt似乎被传递到视图页面看看我的代码，如果你能告诉我什么是错的用它 tnx 为您提供帮助。

**控制器：**

```
class Survaycontroller extends CI_Controller{
    // 'QID, Question, qA, qB, qC'
    function index()
    {
        $arrData = array();
        $arrData["qA"] = $this->input->post("qA");
        $arrData["qB"] = $this->input->post("qB");
        $arrData["qC"] = $this->input->post("qC");
        $arrData["Question"] = $this->input->post("Question");

        $this->load->model('survay');

        $survay_data = $this->survay->dosurvay($arrData);

        $viewData['survay_data'] = $survay_data;

        $this->load->view('survay_view', $viewData);
    }
} 
```

**看法：**

```
<html>
  <body>
    <?php form_open('survay'); ?>
    <h1><?php echo $Question;?></h1>
    <?php echo $qA; ?><input type="checkbox" name="q" value="qA">
    <?php echo $qB; ?><input type="checkbox" name="q" value="qB">
    <?php echo $qC; ?><input type="checkbox" name="q" value="qC">
    <?php echo form_close(); ?>
  </body>
</html> 
```

**模型：**

```
 function dosurvay($arrData){

            $this->db->select('QID, Question, qA, qB, qC');
            $this->db->from('tblquestions');
            $this->db->where('Question', $arrData['Question']);
            $this->db->where('qA', $arrData['qA']);
            $this->db->where('qB', $arrData['qB']);
            $this->db->where('qC', $arrData['qC']);
            $this -> db -> limit(1);

       $query = $this -> db -> get();

       if($query -> num_rows() == 1)
       {
         return $query->result();
       }
       else
       {
         return false;
       }
     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:51:50.517

假设您的模型返回所有​​数据。你必须使用 foreach 因为数据存储在一个数组中，然后你可以像这样检索它。

```
<html>
  <body>
    <?php form_open('survay'); ?>
     <?foreach($survay_data as $survay):?>
    <h1><?php echo $survay->Question;?></h1>
    <?php echo $survay->qA; ?><input type="checkbox" name="q" value="qA">
    <?php echo $survay->qB; ?><input type="checkbox" name="q" value="qB">
    <?php echo $survay->qC; ?><input type="checkbox" name="q" value="qC">
     <?endofreach;?>
    <?php echo form_close(); ?>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:52:51.327

阅读您的代码，老实说，我不知道您要完成什么，但它存在明显的问题。

首先在你的控制器中分配 post 变量，在第一次加载时你不会有 post 变量，所以所有这些行都会立即失败。

然后您只将一个数据变量 survay_data 传递给视图，但随后您尝试在视图中使用 $qA 等，而这些变量不存在。

如果您希望从 survay_data 数组中获取它们，那么您需要通过该数组加载它们，如下所示：

```
<?php echo $survay_data[0]['qA']; ?><input type="checkbox" name="q" value="qA"> 
```

# selenium-webdriver - webdriver.Dispose()、.Close() 和 .Quit() 之间的区别

> ID：15067107
> 
> 赞同：318
> 
> 时间：2013-02-25T12:35:38.820
> 
> 标签：selenium-webdriver

这些有什么区别

1.  `Webdriver.Close()`
2.  `Webdriver.Quit()`
3.  `Webdriver.Dispose()`

使用哪一个以及何时使用？

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2013-06-24T00:05:15.350

这是一个很好的问题，我看到人们不应该使用 Close()。我查看了 Selenium Client & WebDriver C# Bindings 的源代码，发现了以下内容。

1.  `webDriver.Close()`- 关闭驱动程序关注的浏览器窗口
2.  `webDriver.Quit()`- 调用 Dispose()
3.  `webDriver.Dispose()`关闭所有浏览器窗口并安全结束会话

下面的代码将处理驱动程序对象，结束会话并关闭在测试期间打开的所有浏览器，无论测试失败还是通过。

```
public IWebDriver Driver;

[SetUp]
public void SetupTest()
{
    Driver = WebDriverFactory.GetDriver();
}

[TearDown]
public void TearDown()
{
    if (Driver != null)
      Driver.Quit();
} 
```

总之，请确保在退出程序之前调用 Quit() 或 Dispose()，除非您确定自己在做什么，否则不要使用 Close() 方法。

**注意**
当我试图找出一个相关的问题时，我发现了这个问题，为什么我的虚拟机的硬盘空间不足。结果发现异常导致每次运行都没有调用 Quit() 或 Dispose() ，从而导致 appData 文件夹填满硬盘驱动器。所以我们正确地使用了 Quit() 方法，但是代码无法访问。摘要确保所有代码路径都将通过使用异常安全模式或实现 IDisposable 来清理您的非托管对象

**此外**
，在 RemoteDriver 调用 Quit() 或 Dispose() 的情况下，也会关闭 Selenium 服务器上的会话。如果会话未关闭，则该会话的日志文件将保留在内存中。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-02-25T12:58:11.043

`Close()`- 用于关闭当前处于焦点的浏览器或页面。

`Quit()`- 用于关闭 Web 驱动实例或销毁 Web 驱动实例（关闭所有窗口）。

`Dispose()`- 我不知道这种方法。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-09-08T00:38:27.513

`driver.close`并且`driver.quit`是在 Selenium WebDriver 中关闭浏览器会话的两种不同方法。了解它们并知道何时使用每种方法在您的测试执行中很重要。因此，我试图阐明这两种方法。

`driver.close`- 此方法关闭设置焦点的浏览器窗口。尽管这个方法的名字很熟悉，`WebDriver`但它并*没有*实现[`AutoCloseable`接口](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/AutoCloseable.html)。

`driver.quit`– 这个方法基本上调用`driver.dispose`了一个现在内部的方法，该方法依次关闭所有浏览器窗口并优雅地结束 WebDriver 会话。

`driver.dispose`- 如前所述，是 WebDriver 的内部方法，已根据另一个答案静默删除 - 需要验证。这种方法在正常的测试工作流程中确实没有用例，因为前面的任何一种方法都应该适用于大多数用例。

说明用例：您应该`driver.quit`在想要结束程序时使用。它将关闭所有打开的浏览器窗口并终止 WebDriver 会话。如果您在程序结束时不使用`driver.quit`，WebDriver 会话将无法正常关闭，文件也不会从内存中清除。这可能会导致内存泄漏错误。

上面的解释应该解释了WebDriver中`driver.close`和方法的区别。`driver.quit`希望对你有帮助。

以下网站有一些关于硒测试的好技巧：[链接](http://www.testingdiaries.com/)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-05-18T14:08:32.610

`quit()`：退出此驱动程序，关闭所有打开的关联窗口。

`close()`：关闭当前窗口，如果它是当前打开的最后一个窗口，则退出浏览器。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-08-24T04:38:27.180

**close()**是一个 webdriver 命令，用于关闭当前焦点所在的浏览器窗口。尽管这个方法的名字很熟悉，`WebDriver`但它并*没有*实现[`AutoCloseable`接口](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/AutoCloseable.html)。

在自动化过程中，如果打开了多个浏览器窗口，则 close() 命令将仅关闭当时具有焦点的当前浏览器窗口。其余的浏览器窗口不会关闭。以下代码可用于关闭当前浏览器窗口：

**quit()**是一个调用 driver.dispose 方法的 webdriver 命令，该方法依次关闭所有浏览器窗口并终止 WebDriver 会话。如果我们在程序结束时不使用 quit()，WebDriver 会话将不会正确关闭，文件也不会从内存中清除。这可能会导致内存泄漏错误。

如果自动化进程仅打开一个浏览器窗口，则 close() 和 quit() 命令的工作方式相同。当自动化期间打开多个浏览器窗口时，两者的功能会有所不同。

以上参考：[点击这里](https://www.zyxware.com/articles/5552/what-is-close-and-quit-commands-in-selenium-webdriver)

**Dispose 命令** Dispose() 应该调用 Quit()，而且看起来确实如此。但是，它也有同样的问题，任何后续操作都会被阻止，直到手动关闭 PhantomJS。

参考[链接](https://github.com/detro/ghostdriver/issues/162)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-01-26T13:20:48.503

基于 PhantomJS 的 Github 上的一个问题，quit() 不会终止 PhantomJS 进程。你应该使用：

```
import signal
driver = webdriver.PhantomJS(service_args=service_args)
# Do your work here

driver.service.process.send_signal(signal.SIGTERM)
driver.quit() 
```

[关联](http://[https://github.com/seleniumhq/selenium/issues/767][1])

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-09-21T06:34:14.027

close():-假设你打开了多个具有相同驱动程序实例的浏览器窗口，现在在驱动程序实例上调用 close() 将关闭驱动程序实例指向的当前窗口。但驱动程序实例仍保留在内存中，可用于处理其他打开的浏览器窗口。

quit()：- 如果您在驱动程序实例上调用 quit() 并且打开了一个或多个浏览器窗口，它将关闭所有打开的浏览器窗口，并且驱动程序实例被垃圾收集，即从内存中删除。所以现在你不能在调用 quit() 后使用这个驱动实例做其他操作。如果你这样做，它会抛出一个异常。

dispose():- 我不认为 WebDriver 实例有 dispose 方法。

你可以去这个 selenium 官方 java doc[链接](http://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/WebDriver.html#close--)以供参考。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-05-31T11:28:11.460

Selenium 网络驱动程序

1.  `WebDriver.Close()`此方法用于关闭当前打开的窗口。它关闭驱动程序关注的当前打开的窗口。

2.  `WebDriver.Quit()`该方法用于销毁 WebDriver 的实例。它关闭与该驱动程序关联的所有浏览器窗口并安全地结束会话。WebDriver.Quit() 调用 Dispose。

3.  `WebDriver.Dispose()`此方法关闭所有浏览器窗口并安全地结束会话

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-05-28T07:25:57.407

**driver.close() 和 driver.quit() 之间的区别**

driver.close - 它关闭设置焦点的浏览器窗口。

driver.quit - 它基本上调用 driver.dispose 方法，该方法依次关闭所有浏览器窗口并优雅地结束 WebDriver 会话。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-06-09T15:39:56.933

退出和关闭有两个区别。

1.  由于 Quit() 关闭程序打开的所有窗口，而 Close() 将关闭焦点所在的正确窗口。
2.  Quit() - 考虑一下，WebDriver driver = new ChromeDriver(); 上面的语句将创建一个会话 ID。为整个会话维护相同的会话 ID。 [会话 ID - 73e6d7c2ae55d9f059ad1cce248adb75](https://i.stack.imgur.com/qZb28.png)

[输入网址后，相同的会话 ID - 73e6d7c2ae55d9f059ad1cce248adb75](https://i.stack.imgur.com/aOV06.png)

[currentUrl() 之后的会话 ID - 73e6d7c2ae55d9f059ad1cce248adb75](https://i.stack.imgur.com/uZVMq.png)

[退出（）后浏览器的会话 ID - null](https://i.stack.imgur.com/GguWO.png)

如果用户尝试执行任何语句，会话 ID null 将发送到服务器。看到这一点，服务器将发送异常 -**会话 ID 为空。调用 quit() 后使用 WebDriver？**

在 Close() 中，将为整个会话创建和维护随机会话 ID（只有一个）。执行 Close() 后，**会话将无效或过期**。 [例外](https://i.stack.imgur.com/bD8aC.png)

因此，在 quit() 中，会话为空，而在 close() 中，会话 id 无效。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-05-18T16:44:12.267

我的理解是`driver.close();`会关闭当前浏览器，并且`driver.quit();`会终止所有浏览器。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-06-05T14:21:09.617

**driver.close() 和 driver.quit() 在会话 ID 方面的区别。**

`driver.close`– 它关闭设置焦点的浏览器窗口，如果之后使用驱动程序实例，`driver.close`则 selenium throw **NoSuchSessionException: invalid session id**

`driver.quit`– 它基本上调用 driver.dispose 方法，该方法依次关闭所有浏览器窗口并优雅地结束 WebDriver 会话，如果之后使用驱动程序实例，`driver.quit`则 selenium throw **NoSuchSessionException: session id is null**

# c - 如何使用 SIMD 加速两个内存块的异或？

> ID：15067119
> 
> 赞同：8
> 
> 时间：2013-02-25T12:36:09.143
> 
> 标签：c, xor, simd

我想尽快对两块内存进行异或运算，如何使用 SIMD 来加速呢？

我的原始代码如下：

```
void region_xor_w64(   unsigned char *r1,         /* Region 1 */
                       unsigned char *r2,         /* Region 2 */
                       int nbytes)       /* Number of bytes in region */
{
    uint64_t *l1;
    uint64_t *l2;
    uint64_t *ltop;
    unsigned char *ctop;

    ctop = r1 + nbytes;
    ltop = (uint64_t *) ctop;
    l1 = (uint64_t *) r1;
    l2 = (uint64_t *) r2;

    while (l1 < ltop) {
        *l2 = ((*l1)  ^ (*l2));
        l1++;
        l2++;
    }
} 
```

我自己写了一个，但速度几乎没有提高。

```
void region_xor_sse(   unsigned char* dst,
                       unsigned char* src,
                       int block_size){
  const __m128i* wrd_ptr = (__m128i*)src;
  const __m128i* wrd_end = (__m128i*)(src+block_size);
  __m128i* dst_ptr = (__m128i*)dst;

  do{
    __m128i xmm1 = _mm_load_si128(wrd_ptr);
    __m128i xmm2 = _mm_load_si128(dst_ptr);

    xmm2 = _mm_xor_si128(xmm1, xmm2);
    _mm_store_si128(dst_ptr, xmm2);
    ++dst_ptr;
    ++wrd_ptr;
  }while(wrd_ptr < wrd_end);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T23:39:27.020

更重要的问题是您为什么要手动执行此操作。你有一个古老的编译器，你认为你可以超越它吗？那些不得不手动编写 SIMD 指令的美好时光已经结束。今天，在 99% 的情况下，编译器会为你完成这项工作，而且很有可能它会做得更好。此外，不要忘记每隔一段时间就会出现新的架构，并带有越来越多的扩展指令集。所以问自己一个问题——你想为每个平台维护 N 个实现的副本吗？您想不断测试您的实现以确保它值得维护吗？答案很可能是否定的。

您唯一需要做的就是编写尽可能简单的代码。编译器将完成其余的工作。例如，这是我编写函数的方式：

```
void region_xor_w64(unsigned char *r1, unsigned char *r2, unsigned int len)
{
    unsigned int i;
    for (i = 0; i < len; ++i)
        r2[i] = r1[i] ^ r2[i];
} 
```

简单一点，不是吗？[`MOVDQU`](http://www.rz.uni-karlsruhe.de/rz/docs/VTune/reference/vc184.htm)猜猜看，编译器正在生成使用and执行 128 位 XOR 的代码，[`PXOR`](http://www.rz.uni-karlsruhe.de/rz/docs/VTune/reference/vc269.htm)关键路径如下所示：

```
4008a0:       f3 0f 6f 04 06          movdqu xmm0,XMMWORD PTR [rsi+rax*1]
4008a5:       41 83 c0 01             add    r8d,0x1
4008a9:       f3 0f 6f 0c 07          movdqu xmm1,XMMWORD PTR [rdi+rax*1]
4008ae:       66 0f ef c1             pxor   xmm0,xmm1
4008b2:       f3 0f 7f 04 06          movdqu XMMWORD PTR [rsi+rax*1],xmm0
4008b7:       48 83 c0 10             add    rax,0x10
4008bb:       45 39 c1                cmp    r9d,r8d
4008be:       77 e0                   ja     4008a0 <region_xor_w64+0x40> 
```

正如@Mysticial 所指出的，上面的代码使用了支持非对齐访问的指令。那些比较慢。但是，如果程序员可以正确地假设对齐访问，那么就有可能让编译器知道它。例如：

```
void region_xor_w64(unsigned char * restrict r1,
                    unsigned char * restrict r2,
                    unsigned int len)
{
    unsigned char * restrict p1 = __builtin_assume_aligned(r1, 16);
    unsigned char * restrict p2 = __builtin_assume_aligned(r2, 16);

    unsigned int i;
    for (i = 0; i < len; ++i)
        p2[i] = p1[i] ^ p2[i];
} 
```

编译器为上述 C 代码生成以下内容（注意`movdqa`）：

```
400880:       66 0f 6f 04 06          movdqa xmm0,XMMWORD PTR [rsi+rax*1]
400885:       41 83 c0 01             add    r8d,0x1
400889:       66 0f ef 04 07          pxor   xmm0,XMMWORD PTR [rdi+rax*1]
40088e:       66 0f 7f 04 06          movdqa XMMWORD PTR [rsi+rax*1],xmm0
400893:       48 83 c0 10             add    rax,0x10
400897:       45 39 c1                cmp    r9d,r8d
40089a:       77 e4                   ja     400880 <region_xor_w64+0x20> 
```

明天，当我给自己买一台配备 Haswell CPU 的笔记本电脑时，编译器将为我生成一个使用 256 位指令而不是 128 位指令的代码，这给了我两倍的向量性能。即使我不知道 Haswell 有能力，它也会这样做。您不仅需要了解该功能，还需要编写另一个版本的代码并花一些时间对其进行测试。

顺便说一句，您的实现中似乎还有一个错误，代码可以跳过数据向量中最多 3 个剩余字节。

无论如何，我建议您相信您的编译器并学习如何验证生成的内容（即熟悉`objdump`. 下一个选择是更改编译器。然后才开始考虑手动编写向量处理指令。否则你会过得很糟糕！

希望能帮助到你。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-08T13:13:17.717

由于区域的大小是按值传递的，为什么代码不是：

```
void region_xor_w64(unsigned char *r1, unsigned char *r2, unsigned int i)
{
    while (i--)
        r2[i] = r1[i] ^ r2[i];
} 
```

甚至：

```
void region_xor_w64(unsigned char *r1, unsigned char *r2, unsigned int i)
{
    while (i--)
        r2[i] ^= r1[i];
} 
```

如果偏好向前（“向上内存”）和使用指针，那么：

```
void region_xor_w64(unsigned char *r1, unsigned char *r2, unsigned int i)
{
    while (i--)
        *r2++ ^= *r1++;
} 
```

# android - 是否还有其他适用于 Android 的 GIF 创建库？

> ID：15067123
> 
> 赞同：7
> 
> 时间：2013-02-25T12:36:28.403
> 
> 标签：android, android-ndk, gif

我真的很想知道是否有更好的用于 Android 开发的 GIF 文件创建库。我已经尝试过[这个](https://github.com/nbadal/android-gif-encoder/blob/master/GifEncoder.java)以及一个基于 NDK 的名为 gifflen 的（显然它真的很老了）。我发现两者都很慢，并且生成的 GIF 具有令人难以置信的大膨胀文件大小，质量设置似乎没有任何作用。最糟糕的是我可以自己写东西，但如果有人知道现有的东西，它会节省很多麻烦，提前谢谢。

# postgresql - 在postgresql中仅查找两个字符串数组之间不匹配元素的最佳方法是什么

> ID：15067128
> 
> 赞同：2
> 
> 时间：2013-02-25T12:36:43.300
> 
> 标签：postgresql, postgresql-9.2

到目前为止我发现的是

```
select ARRAY(
   select unnest(ARRAY[ 'a', 'b', 'c' ])
   except
   select unnest(ARRAY[ 'c', 'd', 'e' ])
) 
```

我们可以这样做以仅查找两个字符串数组之间的不匹配元素。

有没有其他最好的方法来做到这一点？

就像整数数组一样，我们可以这样做

```
SELECT int[1,2,3] - int[2,3] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:09:37.097

```
select array_agg(e order by e)
from (
    select e
    from
    (
        select unnest(array[ 'a', 'b', 'c' ])
        union all
        select unnest(array[ 'c', 'd', 'e' ])
    ) u (e)
    group by e
    having count(*) = 1
) s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:18:16.447

这是另一种选择：

```
select ARRAY
(
   (
     select unnest(ARRAY[ 'c', 'd', 'e' ])
     except
     select unnest(ARRAY[ 'a', 'b', 'c' ])
   )
   union 
   (
     select unnest(ARRAY[ 'a', 'b', 'c' ])
     except
     select unnest(ARRAY[ 'c', 'd', 'e' ])
   )
); 
```

或者（为了更清楚地说明涉及两个不同的数组）：

```
with array_one (e) as (
   select unnest(ARRAY[ 'a', 'b', 'c' ])
), array_two (e) as (
   select unnest(ARRAY[ 'c', 'd', 'e' ])
)
select array(
   ( 
      select e from array_one
      except 
      select e from array_two
   )
   union 
   (
     select e from array_two
     except 
     select e from array_one
   )
) t; 
```

如果元素的顺序很重要，那么 array_agg() 需要像 Clodoaldo Neto 一样使用（而不是使用`array(...)`构造函数）：

```
with array_one (e) as (
   select unnest(ARRAY[ 'a', 'b', 'c' ])
), array_two (e) as (
   select unnest(ARRAY[ 'c', 'd', 'e' ])
)
select array_agg(e order by e)
from (
   ( 
      select e from array_one
      except 
      select e from array_two
   )
   union 
   (
     select e from array_two
     except 
     select e from array_one
   )
) t; 
```

# c# - 如何在代码后面的某些条件下禁用整个页面？

> ID：15067131
> 
> 赞同：1
> 
> 时间：2013-02-25T12:36:49.410
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我有一个特定的页面，我想在按钮单击事件中并在某些情况下禁用所有控件和`grayout`整个页面，显示一条信息消息以说明确认已完成。

* * *

如何以一般方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:41:20.290

查看 Ajax Control Toolkit 中包含的模式弹出窗口：

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)

这将允许弹出一条消息，有效地阻止与页面其余部分的交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:01:41.017

```
$(document).ready(function() {
if(Conditions satisfy){
    $('#div_controls').attr('disabled', true);
    $('#div_status').attr('disabled', false);}
else{ $('#div_controls').attr('disabled', false);
    $('#div_status').attr('disabled', True)
}

});

In HTML 

<div id="div_status"> Your Message with your styles </div>
<div id="div_controls"> Your Controls inside this Div </div> 
```

没有任何回帖，WO丢失数据，状态可以完成..

或查看此演示

[http://www.zurb.com/playground/reveal-modal-plugin](http://www.zurb.com/playground/reveal-modal-plugin)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:40:36.890

你基本上想要一个面具。虽然不完全符合您的问题，但请查看这个基于 jQuery 的加载掩码插件，您应该能够对其进行调整以满足您的需求：

[https://code.google.com/p/jquery-loadmask/](https://code.google.com/p/jquery-loadmask/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:41:23.613

用户单击后，您可以使所有控件“不可见”

```
 foreach (Control c in Page.Controls)
        c.Visible = false; 
```

或者更好的方法是使用诸如[Modal-UpdateProgress之类的插件](http://blogs.visoftinc.com/2008/03/13/Modal-UpdateProgress-for-UpdatePanel-Revisited/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T12:47:38.843

在 HTML 中

```
<div id="layer"></div>
<div id="container">

   ----
   ----
   ----

</div> 
```

在 CSS 中

```
#layer{
    background: none repeat scroll 0 0 white;
    height: 100%;
    left: 0;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 100000;
} 
```

这将禁用页面（或者它会像禁用一样）。

# grails - 使用插件覆盖 Grails 服务 bean 定义

> ID：15067132
> 
> 赞同：3
> 
> 时间：2013-02-25T12:36:49.743
> 
> 标签：grails

我想通过仅安装插件来覆盖服务实现 - 安装插件时，我希望使用服务的插件版本，当卸载插件时，我希望使用服务的默认版本。

为了避免浪费时间，我将使用代码来解释我的问题。我有一个由我的主应用程序和我的“自定义插件”共享的“通用插件”，其中包含以下内容：

```
public interface SimpleService {
    void doProcessing();
} 
```

然后我有一个“主应用程序”，其中包含以下内容

服务接口的默认实现：

```
public DefaultSimpleService implements SimpleService {
    void doProcessing() {
        // ...
    } 
```

资源.groovy：

```
simpleService(DefaultSimpleService) { bean ->
    bean.autowire = 'byName'
} 
```

使用服务的控制器：

```
class SimpleController {
    def simpleService

    def index() {
        simpleService.doProcessing()
    }
} 
```

到目前为止，一切都很好。我现在要做的就是`SimpleService`通过安装一个插件来用一个新的接口替换实现。我不想更改我的应用程序中的任何配置。

我有一个带有新服务实现的插件：

```
public CustomSimpleService implements SimpleService {
    void doProcessing() {
        // ...
    }
} 
```

我的第一次尝试是在插件“doWithSpring”部分注册自定义服务 bean，但它总是被主应用程序覆盖。很公平，因为似乎插件总是在注册主应用程序 bean 之前加载（？）

我的第二次尝试是在我的 CustomServiceGrailsPlugin.groovy 中的“doWithApplicationContext”中注册自定义 bean：

```
def doWithApplicationContext = { applicationContext ->
    DefaultListableBeanFactory beanFactory = (DefaultListableBeanFactory) applicationContext.getBeanFactory()
    beanFactory.registerBeanDefinition("simpleService", BeanDefinitionBuilder.rootBeanDefinition(CustomSimpleService.class.getName()).getBeanDefinition())
} 
```

这实际上部分起作用 - 当插件被加载时，使用 SimpleService 的插件实现，如果插件被卸载，`SimpleService`则使用主应用程序实现。但是有一个附带问题：bean 的自动装配在“手动”注册的插件实现中不起作用......

然后我开始看，`BeanPostProcessors`但从我读到的内容看来它不能解决我的问题。

那么我该如何解决我的问题呢？

问候托比

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:18:06.617

我认为最好的办法是检查插件是否已安装，如果是，请不要在应用程序中声明服务。

您可以检查安装的插件：`org.codehaus.groovy.grails.plugins.PluginManagerHolder.pluginManager.allPlugins`

您可以在 resources.groovy 中使用它

```
boolean containsPlugin(String pluginName) {
    def names = org.codehaus.groovy.grails.plugins.PluginManagerHolder.pluginManager.allPlugins.collect { it -> return it.name }  
    return(pluginName in names) 
}

beans = {
  if(!containsPlugin("thePlugin")) {
    println "Installation not contains plugin, defining bean!"
    myService(...)
  }
} 
```

# vba - 导入带分隔符的文本

> ID：15067136
> 
> 赞同：7
> 
> 时间：2013-02-25T12:36:55.600
> 
> 标签：vba, ms-access

我正在尝试自动添加新的文本文件，这些文件都具有相同的（已知）布局。

使用制表符（TAB 按钮）分隔列。我的问题是，是否可以在 VBA 中执行此操作？比如，在用于导入文本文件的访问向导中？

我正在使用`DoCmd.TransferText`VBA 中的方法

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T14:27:39.617

您需要通过向导一次来制作您的规范文件。为此，请像往常一样导入您的文本文件，但在深入了解向导之前，请单击左下角的“高级...”按钮。这是您制作规范文件的地方。

![在此处输入图像描述](../Images/a5a6e142a4d5f371f882660e66881266.png)

使所有这些列与您的输入文件、数据类型和所有内容相匹配。`{tab}`如果您正在使用，请务必选择字段分隔符和适当的文本限定符。

![在此处输入图像描述](../Images/d611dc1a2a7832290b19931cbb3e236c.png)

保存您的规范（稍后可以通过返回同一屏幕并单击`Specs...`然后保存旧的来进行编辑）

现在你可以像这样在 VBA 中使用

```
DoCmd.TransferText acImportDelim, "your spec name", "destination table name", sourceFilePath 
```

有一个参数`HasFieldNames`，您必须决定它是`true`还是`false`基于您的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T03:05:04.917

使用导入向导的缺点是，即使文件格式发生最轻微的变化，您也必须再次单击所有这些步骤*才能*使导入工作。

查看 @Remou 在[ms Access import table from file in a query](https://stackoverflow.com/questions/3660377/ms-access-import-table-from-file-in-a-query)中的回答，了解在直接 SQL 中执行此操作的方法。我实际上在我的一个项目中使用相同的方法。我使用这样的东西（有关详细信息，请参阅我的链接）：

```
insert into MyTable (column-list...)
select (column-list...)
from [data-source-specifications].[file-name]
any-other-clauses...; 
```

只有一个警告。如果将此 SQL 语法放入普通的 Access 查询对象中，Access 很有可能会将其破坏到甚至无法打开查询对象的程度。因此，当您在 Access 中试用时，将查询编写并保存在文本文件中。一旦查询被测试并工作，将其保存在 VBA 子例程中，以便 Access 将完全按原样运行它，如下所示：

```
sub MyTableImport()
  sqlStr = "         insert into MyTable (column-list) " ' leave a space at the
  sqlStr = sqlStr & "select (column-list...) " ' end of each line of the string
  sqlStr = sqlStr & "from [data-source-specifications].[file-name] "
  sqlStr = sqlStr & "any-other-clauses... ;"

  DoCmd.RunSQL sqlStr
end sub 
```

# php - 当我在for循环中有复选框时如何对多个复选框应用验证

> ID：15067147
> 
> 赞同：0
> 
> 时间：2013-02-25T12:37:42.850
> 
> 标签：php, javascript, mysql

我想对多个复选框应用验证，但问题是如何做到这一点？

```
<?php
mysql_connect("localhost","root","thisis");
mysql_select_db("my_database");

if(isset($_GET["q"]))
{
$my_q = $_GET['q'];
$q="select * from subjects where subj_code='$my_q'";
$rs=mysql_query($q);

    for($i=0;$i<mysql_num_rows($rs);$i++)
    {
        $rd=mysql_fetch_object($rs);

?>

        <input type="checkbox" name="subj[]" value="<?php echo $rd->subj_name; ?>" /><?php echo $rd->subj_name; ?>
        <br />
<?php
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:42:23.923

试试下面的代码。

```
obj = document.form1.elements("subj[]");
for (i = 0; i < obj.length; i++) {
    if (obj[i].checked) {
        alert("Your text");
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T08:35:31.223

尝试这个：

```
if($('input[name="sub[]"]:checked').length == 0) {
   alert('No checkbox is checked');
   return false;
} 
```

# symfony - 来自 libreoffice 的 doc 文件不提供扩展信息？

> ID：15067149
> 
> 赞同：0
> 
> 时间：2013-02-25T12:37:48.080
> 
> 标签：symfony

我正在尝试通过以下方式获取上传文件的扩展名

```
$file->guessExtension(); 
```

并获取空值，但显示 mime 类型

```
application/vnd.ms-office 
```

文件是在名为**newFile.doc**的 linux 环境中的 libre office 中创建的。

**编辑 1**我只需要知道为什么 guessExtension 给出空值？通过调用扩展函数，我应该得到文档字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:51:16.517

我认为这个问题与 Symfony2 没有直接关系。这似乎是 PHP 和 Apache MIME 类型配置的问题。

看看这些答案：

[MSOFFICE MIME 类型验证](https://stackoverflow.com/questions/13214720/msoffice-mime-type-verification)

[PHP 的 MIME 类型不正确](https://stackoverflow.com/questions/4607120/incorrect-mime-type-from-php)

# php - 在 if... 语句中使用数组中的条件值

> ID：15067152
> 
> 赞同：1
> 
> 时间：2013-02-25T12:38:05.660
> 
> 标签：php, arrays

我有一系列条件：

```
$arrConditions = array ('>=2', '==1', '<=10'); 
```

...我希望能够在 if...语句中使用。

IE。

```
if (5 $arrConditions[0])
{
  ...do something
} 
```

...这将与：

```
if (5 >= 2)
{
  ...do something
} 
```

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:49:25.093

这样的要求是糟糕设计的明确标志。
您很可能可以通过另一种更常见的方式来做到这一点。

尽管如此，永远不要对此类事情使用 eval 。
至少成对存储每个运算符 - 运算符和操作数。

```
$arrConditions = array (
    array('>=',2),
    array('==',1),
    array('<=',10),
); 
```

然后使用开关：

```
list ($operator,$operand) = $arrConditions[0];
switch($operator) { 
    case '==': 
        $result = ($input == $operand); 
        break;
    case '>=': 
        $result = ($input >= $operand); 
        break;
    // and so on
} 
```

但同样——很可能你可以用另一种更简单的方法来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:19:34.127

那这个呢 ？

```
<?php

$arrConditions = array('==2', '==9', '==5', '==1', '==10', '==6', '==7');

$count = 0;
$myval = 0;
foreach ($arrConditions as $cond) {
  $str = "if(5 $cond) { return  $count;}";
  $evalval = eval($str);
  if (!empty($evalval)) {
    $myval = $count;
  }
  $count++;
}

switch ($myval) {
  case 0: echo '==2 satisfied';
    break;
  case 1: echo '==9 satisfied';
    break;
  case 2: echo '==5 satisfied';
    break;
  case 3: echo '==1 satisfied';
    break;
  case 4: echo '==10 satisfied';
    break;
  default : echo 'No condition satisfied';
}
?> 
```

# c++ - C++(11)：如果两者都很好，何时使用直接或复制初始化

> ID：15067158
> 
> 赞同：3
> 
> 时间：2013-02-25T12:38:15.723
> 
> 标签：c++, c++11, copy-initialization

在重复的呼喊开始之前：我知道以下问题（和其他一些问题）与这个问题非常相关：

[复制初始化和直接初始化在 C++ 中有区别吗？](https://stackoverflow.com/questions/1051379/is-there-a-difference-in-c-between-copy-initialization-and-direct-initializati)

这个问题的答案完美地解释了无法进行复制初始化的场景，并解释了两者的区别以及所有这些东西。但是，我的问题更微妙：

考虑代码：

```
A createA(){...}

A a1 = createA();
A a2(createA()); 
```

假设 A 可以隐式复制构造和所有这些东西，所以 和 的初始化`a1`都`a2`很好。的复制构造函数中没有副作用`A`，因此两个初始化在语义上也是等效的。`createA()`直接返回变量的类型，而不是必须首先转换的其他内容。我认为这种情况很常见。

那么，在这种情况下，如果两种替代方案同样适用且在语义上等价，我应该使用哪一种？规范中是否有建议或社区中的共识/最佳实践，还是由我和我的编码风格决定使用哪一种？与旧标准相比，C++11 有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:48:14.913

如果其他一切都相同（语义、性能……），那显然只是品味和/或风格惯例的问题。然而，现在许多作者提倡使用列表初始化器进行直接初始化：

```
A a3 {createA()}; 
```

但我想说，这取决于您（如果这是您的有趣项目）或您的同事来决定两（三）个替代方案之一。我*不*建议将两者互换使用，因为这会让读者想知道为什么您有时使用直接初始化，有时使用复制初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:49:11.020

没有“总是更好”的答案，这是风格问题。

从对象类型的简单表达式（例如`createA()`）初始化对象时，我经常使用 copy-init，可能只是因为熟悉`=`赋值形式。否则，当初始化器是不同类型或对象有多个初始化器（例如，多个构造函数参数或聚合初始化）时，我更喜欢使用 C++11 列表初始化（又名统一初始化语法），它可以用于更多的地方，例如初始化聚合以及具有用户定义构造函数的类，并且不能被解析为函数声明：

```
A a1{ createA() }; 
```

上面的 list-init 形式使用 direct-init，而这种形式使用 copy-init：

```
A a2 = { createA() }; 
```

使用 list-init 时，我更喜欢没有多余`=`符号的直接​​初始化形式。

There are a few cases where list-init isn't possible, e.g. when a type has an initializer-list constructor (i.e. one taking a parameter that is a specialization of `std::initializer_list`) and you want to call a different constructor, but the initializer-list constructor would get chosen, e.g. `std::vector<int> v{ 5u, 0 };` will not create a vector of five elements with value zero, but a vector with two elements with values five and zero

# c++ - std::map 线程安全

> ID：15067160
> 
> 赞同：38
> 
> 时间：2013-02-25T12:38:33.757
> 
> 标签：c++, multithreading, map, stdmap

对 std::map 中对象的引用是线程安全的吗？

```
std::map< std::string, Object >   _objects; 
```

map 可以从许多线程中更改，并且此访问是同步的，但对值（Object &）的引用只能从 1 个实例和线程访问。如果另一个线程将项目添加到地图，使用 Object & 进行写操作是否安全？它会重新分配吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-25T12:58:36.253

C++11 标准保证`const`对容器的方法访问对于不同线程是安全的（即，两者都使用`const`方法）。

此外，[container.requirements.dataraces] 状态

> 当包含对象的内容在同一序列中的不同元素中时，需要实现来避免数据竞争，除了`vector<bool>`

换句话说，除了`vector<bool>`修改不同的内容不是数据竞争。

现在，如果一个线程使另一个线程使用的迭代器无效，显然这是一场数据竞争（并导致未定义的行为）。如果一个线程不`const`访问容器，而另一个线程`const`访问，那就是数据竞争（和未定义的行为）。（注意：`const`出于多线程的目的，“考虑”了许多函数，包括`begin`,`end`和其他非`const`仅因为返回非`const`迭代器 的函数（和方法）。出于线程安全原因`[]`，包含在这组伪函数中`const`, 除了`map`等`unordered_set`-- 23.2.2.1)。

但是，如果您对容器中的某个元素有引用，并且在另一个线程中执行不会使该引用无效的操作，并且从未在另一个线程中写入该元素，则您可以安全地从该引用中读取。同样，如果其他线程甚至从未从元素中读取，那么写入该元素不应导致未定义的行为。

对于标准参考，17.6.5.9.5 似乎保证标准库中的函数不会跑掉并不必要地读/写元素。

所以简短的回答：你是安全的，只要另一个线程不直接与`map`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-25T12:43:53.550

地图中的元素是稳定的，除非元素从地图中删除，否则它们不会被移动或失效。如果只有一个线程正在写入给定对象，并且对映射本身的更改正确同步，那么**我相信**它会是安全的。我确信它在实践中是安全的，我认为它在理论上也是安全的。

该标准保证不同的元素可以被不同的线程修改，在 [container.requirements.dataraces]

> 尽管有（17.6.5.9），当同时`vector<bool>`修改同一序列中不同元素中包含的对象的内容时，需要实现来避免数据竞争，除了 。

这仅允许您修改元素，而不是在修改元素时将新元素插入到地图中。对于某些容器，例如`std::vector`，修改向量本身也可能通过重新分配和移动元素来修改元素，但 [associative.reqmts]/9 确保`std::map`不会使现有元素无效。

由于不需要成员函数 of`std::map`来访问其元素的第二个成员（即`mapped_type`），我认为 [res.on.data.races]/5 表示在修改映射时没有其他线程会与对该成员的写入发生冲突。（感谢 Yakk 的最后一块拼图）

# php - 如何使用json从php中的数字代码创建字符代码

> ID：15067162
> 
> 赞同：0
> 
> 时间：2013-02-25T12:38:37.777
> 
> 标签：php, arrays, json, unicode, character-encoding

这是我的代码：

```
<?php

error_reporting(E_ALL);
ini_set("display_errors", 1);

$form_num = $_GET['num'];

echo '<form name="creative" action = "'.htmlentities($_SERVER['PHP_SELF']).'?num='.$form_num.'" method="POST" >';

echo '<table>';

for ( $i=0; $i < $form_num ; $i++ ) {

    echo "<tr><td>Title: </td><td><input type='text' name='title$i' /></td></tr>";
    echo "<tr><td>Description: </td><td><input type='text' name='desc$i' /></td></tr>";

    echo "<tr><td>&nbsp;</td></tr>";
}

echo "<tr><td><input type='submit' name='submit' value='Update' /></td>
        <td><input type='reset' value='Reset' /></td></tr>";

echo '</table>';

echo '</form>';

if (isset($_REQUEST['submit'])) {

    require 'ad.php';

    $ad = new adnetwork( $hostname, $user, $password, $database );

    echo 'Status is active and set notifications are : <br /><br />';

    for ($i=0; $i< $form_num; $i++) {

        $params[] = array(
            'title' => $ad->utf8_to_unicode(html_entity_decode($_REQUEST["title$i"], ENT_COMPAT, "UTF-8")),
            'description' => $ad->utf8_to_unicode(html_entity_decode($_REQUEST["desc$i"], ENT_COMPAT, "UTF-8")),    

    }

    file_put_contents( dirname(__FILE__) . '/' . 'get_text_in_test.json', json_encode( $params ) );     
}

?> 
```

在这里，当我使用将输入数字代码解析为字符代码的函数提交表单时：

```
public function utf8_to_unicode( $str ) {

            $unicode = array();        
            $values = array();
            $lookingFor = 1;

            for ($i = 0; $i < strlen( $str ); $i++ ) {
                $thisValue = ord( $str[ $i ] );
                if ( $thisValue < ord('A') ) {
                // exclude 0-9
                    if ($thisValue >= ord('0') && $thisValue <= ord('9')) {
                    // number
                    $unicode[] = chr($thisValue);
                    }
                    else {
                        $unicode[] = ''.chr($thisValue);
                    }           
                } else {
                    if ( $thisValue < 128) 
                        $unicode[] = $str[ $i ];
                    else {
                        if ( count( $values ) == 0 ) $lookingFor = ( $thisValue < 224 ) ? 2 : 3;                
                            $values[] = $thisValue;                
                                if ( count( $values ) == $lookingFor ) {
                                    $number = ( $lookingFor == 3 ) ?
                                    ( ( $values[0] % 16 ) * 4096 ) + ( ( $values[1] % 64 ) * 64 ) + ( $values[2] % 64 ):
                                    ( ( $values[0] % 32 ) * 64 ) + ( $values[1] % 64 );

                                    $number = dechex($number);
                                    $unicode[] = (strlen($number)==3)?"\u0".$number:"\u".$number;
                                    $values = array();
                                    $lookingFor = 1;
                                } // if
                        } // if
                    }
            } // for

            return implode("",$unicode);

        } 
```

当我传递这样的字符串时**❤★♫Cute Pics**它应该给我这些符号的字符代码，为了实现这一点，我首先解码我的输入字符，然后在函数中抛出解码的字符串，这给了我这样的结果：**\u2764\u2605\u266b可爱的图片**，但是当我是 json_encode 时，这个以数组为界的字符串是：

```
$params[] = array(
                'title' => $ad->utf8_to_unicode(html_entity_decode($_REQUEST["title$i"], ENT_COMPAT, "UTF-8")),
                'description' => $ad->utf8_to_unicode(html_entity_decode($_REQUEST["desc$i"], ENT_COMPAT, "UTF-8")),    

        }

echo json_encode($params); 
```

它在我的 Android 手机无法解释的字符代码前添加了一个额外的斜杠。由于这些字符代码被斜线转义，但**json**再次放置了 android 手机无法读取的斜线。另外，我没有使用数据库，所以我将这些 json 放在一个 json 格式的文件中，然后我使用 php 函数**file_get_content**从 json 文件中获取所有数据，然后使用它。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:41:31.157

我认为您要么对正在传递的字符串进行双重解码。

运行此代码：

```
for ($i=0; $i< 2; $i++) {
    $params[] = array(
        'title' => "❤★♫Cute Pics",
        'description' => "This is some description",
    );
}

echo json_encode($params); 
```

输出：

```
[{"title":"\u2764\u2605\u266bCute Pics","description":"This is some description"},{"title":"\u2764\u2605\u266bCute Pics","description":"This is some description"}] 
```

哪个是有效的 JSON，应该在手机上很好地解释（除非它不支持 UTF8）。

我认为你应该只删除调用，`html_entity_decode`除非你确定你正在接收编码字符串（你几乎可以肯定不是因为网络服务器为你解码它们），并且还删除 utf8_to_unicode 因为`json_encode`直接从 UTF8 到正确编码的 JSON - 你不必自己做。

> 然后它显示带有单斜杠的json，但不适用于移动设备

那么这将是移动设备如何解码 JSON 的问题，您需要在那里解决这个问题。

# objective-c - 在 IOS 中查看控制器管理

> ID：15067163
> 
> 赞同：0
> 
> 时间：2013-02-25T12:38:45.940
> 
> 标签：objective-c, xcode

我需要有关 Xcode 中的控件查看器的帮助。在我的故事板中，我创建了一个导航视图控制器。我在其中创建了一个视图控制器作为我的根视图，并在其中添加了几个对象。

现在以一般方式，我正在尝试 Ctrl + 将 Element 拖到我的视图控制器上。它没有显示任何应有的蓝线。

另外我希望我能得到一些解释或教程，描述创建视图和控制器并链接它们的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:28:09.643

[这](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)是了解故事板（应用程序中所有视图的单一视图）和 Segues（视图之间的转换）的绝佳教程。通过这两个部分。

# android - Android：在不同的 Android 版本上使用 SAX 解析器的问题

> ID：15067164
> 
> 赞同：2
> 
> 时间：2013-02-25T12:38:54.583
> 
> 标签：android, compatibility, sax

我在使用 SAX 解析器解析不同 Android 版本上的非常简单的 XML 文件时遇到问题。

使用带有 Android 2.3.3 的 Motorola XT316 代码可以正常工作。我可以看到它进入了所有标签。但是当使用带有 Android 2.1 的 PanDigital 时，代码不起作用。它正确打开 XML 文件，但不输入任何标签。

解析器的代码：

```
 public MyParser(Context context ) {
    super();
    theContext=context;     
    getData();
}
//start of the XML document
@Override
public void startDocument () { 
    Log.d("DataHandler", "Start of XML document");  
}

//end of the XML document
@Override
public void endDocument () { Log.d("DataHandler", "End of XML document"); }

//opening element tag
@Override
public void startElement (String uri, String name, String qName, Attributes atts)
{
    if(qName.equals("ARQUIVO"))
    {
        Log.d("DataHandler", "Start of ARQUIVO");                           
    }   
}

//closing element tag
@Override
public void endElement (String uri, String name, String qName)
{       
    if(qName.equals("ARQUIVO"))
    {           
        Log.d("DataHandler", "End of ARQUIVO");
    }       
}

//element content
public void characters (char ch[], int start, int length)
{

}

public void getData()
{
    //take care of SAX, input and parsing errors
    try
    {           
        //set the parsing driver
        System.setProperty("org.xml.sax.driver","org.xmlpull.v1.sax2.Driver");

        //create a parser
        SAXParserFactory parseFactory = SAXParserFactory.newInstance();
        parseFactory.setNamespaceAware(true);           
        SAXParser xmlParser = parseFactory.newSAXParser();

        //get an XML reader
        XMLReader xmlIn = xmlParser.getXMLReader();

        //instruct the app to use this object as the handler
        xmlIn.setContentHandler(this);

        InputStreamReader xmlStream = new InputStreamReader(theContext.getResources().openRawResource(R.raw.arquivos));
        //build a buffered reader
        BufferedReader xmlBuff = new BufferedReader(xmlStream);   

        xmlIn.parse(new InputSource(xmlBuff));          
    }
    catch(SAXException se) { 
        Log.e("AndroidTestsActivity","SAX Error " + se.getMessage());           
        }
    catch(IOException ie) { 
        Log.e("AndroidTestsActivity","Input Error " + ie.getMessage());         
    }
    catch(Exception oe) { 
        Log.e("AndroidTestsActivity","Unspecified Error " + oe.getMessage());           
    }       
} 
```

}

XML 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <ARQUIVOS>
<ARQUIVO
    arquivo_caminho="http://192.168.0.60:8099/screen.xml"
    arquivo_nome="screen.xml" />
<ARQUIVO
    arquivo_caminho="http://192.168.0.60:8099/Images/T_0.png"
    arquivo_nome="T_0.png" />
<ARQUIVO
    arquivo_caminho="http://192.168.0.60:8099/Images/T_1.png"
    arquivo_nome="T_1.png" />
<ARQUIVO
    arquivo_caminho="http://192.168.0.60:8099/Images/T_2.png"
    arquivo_nome="T_2.png" />
<ARQUIVO
    arquivo_caminho="http://192.168.0.60:8099/Images/T_3.png"
    arquivo_nome="T_3.png" />
<ARQUIVO
    arquivo_caminho="http://192.168.0.60:8099/Images/T_4.png"
    arquivo_nome="T_4.png" />
  </ARQUIVOS> 
```

我可以看到它显示了消息“XML 文档开始”和“XML 文档结束”，但它们之间没有显示消息“ARQUIVO 开始”和“ARQUIVO 结束”。

我不知道为什么会发生这种情况并且无法修复它。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:59:07.843

此链接帮助我解决了问题 code.google.com/p/android/issues/detail?id=11223

显然，Android 2.1 和较新版本之间的 SAX 解析器的功能存在差异。它将元素的标签放在不同的参数上。我不知道这是否是一个错误，但它确实看起来像一个。

使其工作的方法是更改​​函数 startElement 和 endElement。下面实现。

```
public static String getCorrectName(String qName, String name) {//used to fix bug from the sax on version 2.1
    String _retValue = null;
    if (Build.VERSION.SDK_INT<=7) _retValue = localName;
    else _retValue = qName;

    return _retValue;
}
 //opening element tag
 @Override
 public void startElement (String uri, String name, String qName, Attributes atts)
{
String corretcName=getCorrectName(qName, name);
if(corretcName.equals("ARQUIVO"))
{
    Log.d("DataHandler", "Start of ARQUIVO");                           
}   
}
//closing element tag
 @Override
 public void endElement (String uri, String name, String qName)
{       
String corretcName=getCorrectName(qName, name);
if(corretcName.equals("ARQUIVO"))
{           
    Log.d("DataHandler", "End of ARQUIVO");
}       
} 
```

# objective-c - 检测应用程序重新打开？

> ID：15067177
> 
> 赞同：2
> 
> 时间：2013-02-25T12:39:26.797
> 
> 标签：objective-c, cocoa

如果它已经打开，是否可以检测到用户双击我的应用程序（在查找器中）？我需要检测到这一点，因为我的应用程序正在隐藏运行，并且只有当用户“重新打开”它才应该显示用户界面。

发生这种情况时，是否有某种事件/通知发布到应用程序？

编辑：我知道 Mac OS X 只允许一个实例。*如果用户尝试*再次启动应用程序，我需要在当前实例上调用一个方法。

**编辑：似乎 - (BOOL)applicationShouldHandleReopen:(NSApplication *)theApplication hasVisibleWindows:(BOOL)flag 应该可以解决问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:02:31.717

您可以使用`NSApplication`委托`- (BOOL)applicationShouldHandleReopen:(NSApplication *)theApplication hasVisibleWindows:(BOOL)flag`

> 在默认行为重新打开 (rapp) AppleEvents 之前由应用程序发送给委托人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T12:52:33.473

在您的应用程序委托中实现`applicationWillUnhide:`（来自 NSApplicationDelegate 协议）。如果用户试图取消隐藏应用程序，应该调用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T13:09:17.940

`-applicationDidBecomeActive:`在您的 App 委托中实现。

# java - Spring MVC 在一个请求中返回多个对象

> ID：15067179
> 
> 赞同：1
> 
> 时间：2013-02-25T12:39:27.623
> 
> 标签：java, spring, spring-mvc, web, request

在我的控制器中，我有这些 ff 方法

```
 @RequestMapping("/countryList.html")
  @ModelAttribute("countries")
  public Collection<Country> getCountries() {
    return worldService.getAllCountries();
  }

  @RequestMapping("/countryList.html")
  public String getName() {
    return viewers_name;
  } 
```

我试图做的是在 countryList.html 中，它将返回国家和当前查看它的用户的名称，但是在访问 countryList.html 时它返回了一个异常

```
Ambiguous handler methods mapped for HTTP path '/countryList.html': {public java.lang.String levelup.world.web.CountryController.getName(), public java.util.Collection levelup.world.web.CountryController.getCountries()}. 
```

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:42:22.000

因为您有相同的请求映射到不同的方法。异常消息很简单

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:44:04.093

**@RequestMapping("/countryList.html")**对于方法应该是唯一的。您如何将此请求映射到两种方法。

根据您的评论：-

```
 @RequestMapping(value = "/countryList.html")
public Collection<Country> getCountries(ModelMap model) {     
        model.addAttribute("countries", countryObject);
   return viewName;

     } 
```

**或者在 config 中定义 jsonView 以返回 json 对象进行 ajax 调用**

```
 @RequestMapping(value = "/countryList.html")
public Collection<Country> getCountries(ModelMap model) {     
        model.addAttribute("countries", countryObject);
   return jsonView;

     } 
```

# python - Gevent 使 python 崩溃。核心转储（引用计数太小）。怎么了？

> ID：15067181
> 
> 赞同：0
> 
> 时间：2013-02-25T12:39:39.757
> 
> 标签：python, urllib2, gevent

我正在尝试为一个位置自动完成 api 构建代理/缓存服务器。这是几乎在我尝试查询服务器时显示错误的简化代码：

```
#!/usr/bin/python
import gevent
from gevent import monkey
from gevent.wsgi import WSGIServer
monkey.patch_all()

import urllib2
import urlparse
import json

def requestHandler(env, start_response):
    start_response('200 OK', [('Content-Type', 'text')])
    parameters = urlparse.parse_qs(env['QUERY_STRING'])

    if 'search' in parameters:
        searchString = parameters['search'][0]

        # Query the auto-completion server
        json_results = urllib2.urlopen('http://autocomplete.wunderground.com/aq?query=' + searchString).read()
        results = json.loads(unicode(json_results, "ISO-8859-1"))

        finalResult = ''
        for result in results['RESULTS']:
                finalResult += result['name'] + ';' + result['c'] + ';' + result['zmw'] + ';' + result['tzs'] + ';'

        return [finalResult.encode('utf-16')]

    else:
        return ['ERROR']

server = WSGIServer(('', 8888), requestHandler)
print 'Server running on port 8888...'
server.serve_forever() 
```

有时它适用于第一个查询，但我第二次请求它时，它崩溃了。有时它第一次立即崩溃。这是我得到的错误：

```
Modules/gcmodule.c:348: visit_decref: Assertion "gc->gc.gc_refs != 0" failed.
refcount was too small
object  : <weakref at 0x9e0f194; to 'gevent.core.http_request' at 0x9e0a11c>
type    : weakref
refcount: 1
address : 0x9e0f194
Aborted (core dumped) 
```

我的系统是：CentOS 6.3，Python 2.6.6，Gevent 0.13.8

有人知道可能出了什么问题吗？似乎很基本的东西会导致这种问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:44:49.277

您可能应该将 Gevent 升级到 1.0 版本，因为已修复与垃圾收集相关的错误。

我还看到了在接受请求之前做一个小睡眠的建议。

# java - 传输端点错误

> ID：15067182
> 
> 赞同：3
> 
> 时间：2013-02-25T12:39:40.927
> 
> 标签：java, android, eclipse, bluetooth, arduino

我正在尝试通过蓝牙从我的 android 发送文本以显示在 arduino 的串行监视器中。我有一个按钮，当我点击它时应该发送文本，但我一直收到这个错误。有谁知道问题是什么？

```
 01-12 01:53:10.849: E/BluetoothSocket(25004): java.io.IOException: Transport endpoint is not connected
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at android.bluetooth.BluetoothSocket.writeNative(Native Method)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at android.bluetooth.BluetoothSocket.write(BluetoothSocket.java:372)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at android.bluetooth.BluetoothOutputStream.write(BluetoothOutputStream.java:89)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at java.io.OutputStream.write(OutputStream.java:80)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at com.example.BluetoothExample.Send.stream(Send.java:120)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at com.example.BluetoothExample.Send$2.onClick(Send.java:57)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at android.view.View.performClick(View.java:2579)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at android.view.View$PerformClick.run(View.java:9246)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at android.os.Handler.handleCallback(Handler.java:587)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at android.os.Handler.dispatchMessage(Handler.java:92)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at    android.os.Looper.loop(Looper.java:130)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at android.app.ActivityThread.main(ActivityThread.java:3735)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at java.lang.reflect.Method.invokeNative(Native Method)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at java.lang.reflect.Method.invoke(Method.java:507)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:904)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:662)
 01-12 01:53:10.849: E/BluetoothSocket(25004):  at dalvik.system.NativeStart.main(Native Method) 
```

我有一个非常简单的 arduino 代码。

```
 int incomingByte;
 char val;

 void setup() {
   pinMode(2, OUTPUT);
   Serial.begin(9600);
 }

 void loop() {

   if (Serial.available() > 0) {
     val = Serial.read();
     Serial.println(val);
     }
     delay(100);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-14T14:48:15.627

您是否尝试将 更改`println()`为`write()`？如下所示：

```
if (Serial.available() > 0) {
     val = Serial.read();
     Serial.write(val);
} 
```

# android - PopupWindow 上的视图可以显示 PopupMenu 吗？

> ID：15067184
> 
> 赞同：3
> 
> 时间：2013-02-25T12:39:43.240
> 
> 标签：android, popupwindow, popupmenu

在 Android API11+ 中，我在 PopupWindow 中显示一个按钮。我想在单击按钮时显示一个 PopupMenu，而不关闭 PopupWindow。这可能吗？我正在实例化和初始化 PopupMenu，但是当我调用 popupMenu.show() 时出现此错误（LogCat + 部分调用堆栈）：

02-25 13:31:38.281：W/WindowManager(528)：尝试添加带有子窗口令牌的窗口：android.os.BinderProxy@41316cc8。中止。02-25 13:31:51.257: D/AndroidRuntime(7643): 关闭 VM 02-25 13:31:51.257: W/dalvikvm(7643): threadid=1: 线程退出未捕获异常 (group=0x40a711f8) 02 -25 13:31:51.320: E/AndroidRuntime(7643): 致命异常: main 02-25 13:31:51.320: E/AndroidRuntime(7643): android.view.WindowManager$BadTokenException: Unable to add window -- token android.view.ViewRootImpl$W@419c3458 无效；您的活动正在运行吗？[堆栈的其余部分]

这是因为 PopupMenu 使用了另一个 PopupWindow 似乎不允许从 PopupWindow 中使用吗？当我将它连接到 Activity 内容视图中的按钮时，相同的代码运行正常。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T00:44:40.313

您不能从 PopupWindow 视图中锚定 PopupMenu 您可以做的是从行视图或顶级视图中的视图定义或锚定这是一个示例：

主.xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

        <ImageView
            android:id="@+id/IVoptionsMenuInvis"
            android:layout_width="match_parent"
            android:layout_height="52dp"
            android:layout_gravity="center_horizontal"
            android:layout_weight="25"            
            android:paddingBottom="6dp"
            android:paddingTop="6dp">

</FrameLayout> 
```

弹出窗口.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/settingseditback"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<ImageView
            android:id="@+id/IVoptionsMenu"
            android:layout_width="match_parent"
            android:layout_height="52dp"
            android:layout_gravity="center_horizontal"
            android:layout_weight="25"
            android:onClick="showSettingsPopup2"
            android:paddingBottom="6dp"
            android:paddingTop="6dp"
            android:src="@drawable/ic_actionbar_overflow_dark" />

</LinearLayout> 
```

最后是你的 MainActivity.java：

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
    }
.
.
.
    public void showSettingsPopup2(View v) {
        PopupMenu popup = new PopupMenu(MainActivity.this, findViewById(R.id.IVoptionsMenuInvis));
        popup.setOnMenuItemClickListener(this);
        popup.getMenuInflater().inflate(R.menu.main, popup.getMenu());
        popup.show();
    }
} 
```

# joomla2.5 - 在 Joomla 上的会话到期时更改重定向

> ID：15067185
> 
> 赞同：2
> 
> 时间：2013-02-25T12:39:45.357
> 
> 标签：joomla2.5

登录时，**当会话到期**并尝试访问需要用户登录的页面时，**Joomla 会自动重定向到登录表单**。

如何修改该重定向以建立我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:12:35.087

Create a custom redirect in Joomla! back-end Components->Redirects

# android - 如何在android中获取动态生成的图像名称

> ID：15067186
> 
> 赞同：6
> 
> 时间：2013-02-25T12:39:45.737
> 
> 标签：android

我想通过单击动态创建的图像来获取图像名称......

```
 for(int i=0;i<list.size();i++)
    {
        final ImageButton b=new ImageButton(this);
        LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(70, 70);
        layoutParams.setMargins(5, 5, 0, 0); // left, top, right, bottom
        b.setLayoutParams(layoutParams);
        Resources res = getResources();
        int resourceId = res.getIdentifier("_"+list.get(i).toString(), "drawable", getPackageName() );
        b.setImageResource( resourceId );
        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
              //at here i want to get the selected image name

            }
        });
        rowoptions.addView(b);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:59:59.573

将图像的名称设置为`ImageButton`标签。然后，您可以在`onClick()`. 使用`setTag()`和`getTag()`为此：

```
 String imageName = "_" + list.get(i).toString();
    int resourceId = res.getIdentifier(imageName, "drawable", getPackageName() );
    b.setTag(imageName);
    b.setImageResource(resourceId);
    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
          //at here i want to get the selected image name
          String clickedImageName = (String)v.getTag();

        }
    }); 
```

# android - 自定义菜单，android，透明活动？

> ID：15067187
> 
> 赞同：2
> 
> 时间：2013-02-25T12:39:51.323
> 
> 标签：android, android-activity, menu, transparent

我需要为android创建一个自定义菜单..但我不确定从哪里开始..我已经看到了很多不同的方法，我发现最好的方法是简单地创建一个具有透明背景的新活动..想法是菜单应该作为屏幕右侧的小列打开，但只是简单地“覆盖”其他布局/活动/视图。我不确定的是..如果我将此活动创建为菜单并将背景设置为透明，如果用户然后按下活动上的按钮会发生什么？消失并且活动触发点击事件？..

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:42:51.367

一个具有大部分透明背景和一些按钮的单独活动是一个选项。使用 调用该活动`startActivityForResult`。在您的按钮的处理程序中，`setResult`指示按下了哪个按钮并调用`finish()`以关闭“菜单”活动。然后在“触发”菜单的活动中，覆盖`onActivityResult`您将查看返回代码并执行相应操作的位置。

在主要活动中：

```
@Override
public void onCreate(Bundle bdl) {
    ...

    findViewById(R.id.button_menu).setOnClickListener(new OnClickListener() {
        public void click(View v) {
            Intent i = new Intent(MenuActivity.class);
            startActivityForResult(i, REQUEST_MENU);
        }
    }

    ...
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(requestCode == REQUEST_MENU) {
        switch(resultCode) {
            case MENU_ITEM_1:
                ...
                break;
            case MENU_ITEM_2:
                ...
                break;
            case MENU_ITEM_3:
                ...
                break;
            default:
                ...
    }
} 
```

在您的菜单活动中：

```
@Override
public void onCreate(Bundle bdl) {
    ...

    findViewById(R.id.menu_option_1).setOnClickListener(new OnClickListener() {
        public void click(View v) {
            setResult(MENU_ITEM_1);
            finish();
        }

    findViewById(R.id.menu_option_2).setOnClickListener(new OnClickListener() {
        public void click(View v) {
            setResult(MENU_ITEM_1);
            finish();
        }

    findViewById(R.id.menu_option_3).setOnClickListener(new OnClickListener() {
        public void click(View v) {
            setResult(MENU_ITEM_1);
            finish();
        }
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:36:17.117

为此，您可以使用 PopupWindow 或自定义对话框。通过设置 dialog.setCanceledOnTouchOutside(boolean) 来选择外部点击的行为。要布局菜单，您只需将布局参数设置为 PopupWindow 或自定义对话框。此类操作不需要启动活动。

# iphone - 一段时间后精灵消失

> ID：15067188
> 
> 赞同：1
> 
> 时间：2013-02-25T12:39:53.813
> 
> 标签：iphone, ios, cocos2d-iphone, sprite

这里有一些为敌人添加精灵的代码.....

```
_robbers = [[CCArray alloc] initWithCapacity:kNumAstroids];
    for (int i = 0; i < kNumAstroids; ++i) {
        CCSprite *asteroid = [CCSprite spriteWithSpriteFrameName:@"robber.png"];
        asteroid.visible = NO;
        [_batchNode addChild:asteroid];
        [_robbers addObject:asteroid];
   } 
```

在更新方法中......

```
 double curTime = CACurrentMediaTime();
if (curTime > _nextRunemanSpawn) {
    float randSecs = [self randomValueBetween:0.20 andValue:1.0];
    _nextRunemanSpawn = randSecs + curTime;

    float randY = [self randomValueBetween:80 andValue:80];
    float randDuration = [self randomValueBetween:4.5 andValue:4.5];
    float randDuration1 = [self randomValueBetween:1.0 andValue:1.0];

    CCSprite *asteroid = [_robbers objectAtIndex:_nextRobber];
    _nextRobber++;

    if (_nextRobber >= _robbers.count) {
        _nextRobber = 1;
    }
    [asteroid stopAllActions];
    asteroid.position = ccp(winSize.width +asteroid.contentSize.width / 2 , randY);
    asteroid.visible = YES;

    [asteroid runAction:[CCSequence actions:[CCMoveBy actionWithDuration:randDuration position:ccp(-winSize.width-asteroid.contentSize.width, 0)],
                         [CCCallFuncN actionWithTarget:self selector:@selector(setInvisible:)],nil]]; 
```

所有精灵在屏幕中从右到左移动
当精灵穿过屏幕中间时它会自动消失
这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:18:15.807

我同意 LearnCocos2D 前面提到的声明。您也有可能添加多个对象并达到行中容量的末尾

```
_robbers = [[CCArray alloc] initWithCapacity:kNumAstroids]; 
```

如果您尝试生成比您为 kNumAsteroids 指定的任何数量更多的对象，它将删除最旧的对象并使用新的对象代替它。即，如果 kNumAsteroids 为 5，则屏幕上有 5，然后添加第六个，1 将变为 6，其位置将是您设置的任何位置。

# sql-server - 验证您的 SQL Server DML 脚本

> ID：15067199
> 
> 赞同：1
> 
> 时间：2013-02-25T12:40:30.993
> 
> 标签：sql-server, tsql, dml

由于我没有数据库写入权限，我通过将我的 SQL 转发给高级成员来执行大量插入、更新、删除操作。

您能否建议我一些方法来根据表格验证这些脚本？

通常问题是列不匹配，因为我们的表有太多列

理想情况下，如果我可以将我的 DML T-SQL 放在另一个脚本中以 100% 确定它会执行。

谢谢

**更新：** 在我获得建议的环境之前，我已经获得了一个可以达到目的的工作。我使用 [select * into #temp from table] 并针对它测试我的所有脚本。如果需要，可以指定列，错误有助于编写/验证可执行 DMLscript

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:39:52.687

在您的开发（非生产）环境中运行它，该环境反映了您在生产中拥有的数据库结构，并具有代表生产环境的数据（正确清理）。

# asp.net - 将表中的用户添加到asp.net中的角色声明

> ID：15067202
> 
> 赞同：0
> 
> 时间：2013-02-25T12:40:33.020
> 
> 标签：asp.net, web-config, authorization, role

我在 asp.net 中创建了一个角色：

```
<configuration>

  <CustomUsersSection>

    <Roles>

      <add RoleName="Administrator"/>
    </Roles>

<Users>

      <add UserName="admin" Password="password" 
           Email="abot@home" Role="Administrator"/>
    </Users>
</CustomUsersSection>

</configuration> 
```

现在我想将添加到表中的所有管理员添加到`sql-server`上面的角色定义中。感谢您的任何帮助。

```
My Admin table structure is as follows:
AdminId
AdminName
EmailAddress
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:34:03.197

假设您使用的是 ASP.NET 成员资格，我会考虑实施您自己的成员资格提供程序。你可以相对容易地做到这一点，网上有很多关于如何做到这一点的资料。然后，您将能够实现自己的测试（例如数据库表中是否存在记录）以确定用户是否具有管理员角色。

不过，我建议您在执行此操作之前了解内置的成员资格提供程序和 ASP.NET 自动创建的成员资格数据库。这是因为这是一个相当不错的实现，并且可以为自己做一些劳动密集型的事情，例如加密存储的信息以防止其被轻易入侵。

# apache - LimitInternalRecursion 或 .htaccess

> ID：15067207
> 
> 赞同：0
> 
> 时间：2013-02-25T12:40:42.257
> 
> 标签：apache, .htaccess, mod-rewrite

我的任务是维护一个我不太了解的网站，每 20 分钟我就会在日志文件中遇到这个问题

```
Request exceeded the limit of 2000 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

我的 .htaccess 文件可在此处获得 - [http://pastebin.com/N4GQx73x](http://pastebin.com/N4GQx73x)

我什至尝试了一些我在网上找到的修复方法

```
RewriteCond %{REQUEST_URI} ^/(stats/|404.php|failed_auth.html|error/).* [NC]
RewriteRule .* - [L]

RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule .* - [L] 
```

无济于事。mod_rewrite 超出了我的范围。但是我认为可能是以下 3 行导致错误，但不太确定是哪种情况导致错误。

```
(5) strip matching prefix: /var/www2/blogs.*DELETED*.co.za/index.php -> index.php
(4) add subst prefix: index.php -> /index.php
(1) [perdir /var/www2/blogs.*DELETED*.co.za/] internal redirect with /index.php [INTERNAL REDIRECT] 
```

我已经浏览了尽可能多的文章，但我似乎无法缩小原因

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:50:20.017

只是关于我如何解决它的说明。我使用设置 wordpress MU 安装时提供给您的标准代码更新了现有的 .htaccess。没有更多的循环！

# wpf - WPF，当直接从控件继承时，如何在代码中设置默认属性，如“背景”？

> ID：15067208
> 
> 赞同：0
> 
> 时间：2013-02-25T12:40:44.970
> 
> 标签：wpf, controls

出于某种特殊原因，我试图避免在此控件中使用 XAML。

然后我创建了一个名为 MyControl 的新 C# 类

```
class MyControl: Control
{
    public MyControl()
    {
        this.BorderBrush = SystemColors.ActiveBorderBrush;
        this.Background = Brushes.Blue;
        this.BorderThickness = new Thickness(1);
    }
} 
```

我创建了一个 WPF 窗口并在 XAML 中添加

```
xmlns:local="clr-namespace:....."
<local:MyControl Height="186" HorizontalAlignment="Left" Margin="12,12,0,0" x:Name="mycontrol" VerticalAlignment="Top" Width="331" /> 
```

但背景属性不起作用。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:51:32.960

从[Control Class](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.aspx)的备注部分：

> 没有 ControlTemplate 的控件在您的应用程序中不可见，并且除非 ControlTemplate 明确引用它们，否则设置以下属性无效：
> 
> *   背景
> *   边框画笔
> *   边框厚度
> *   字体系列
> *   字体大小
> *   字体拉伸
> *   字体粗细
> *   前景
> *   水平内容对齐
> *   垂直内容对齐

# javascript - 使用 Javascript / jQuery 创建简单的甜甜圈图

> ID：15067213
> 
> 赞同：0
> 
> 时间：2013-02-25T12:41:00.527
> 
> 标签：javascript, jquery, charts, donut-chart

我知道这是堆栈溢出的不好做法，在我自己没有任何尝试代码的情况下提出问题，但我是一个 javascript 新手，不知道从哪里开始，但我正在寻找一个超级简单的甜甜圈图，看起来像这样：

![甜甜圈图](../Images/3c4c80cb0fb82b21d133663192700dcb.png)

仅显示 1 个扇区（百分比为 100）。

我搜索了堆栈溢出并遇到了一个关于甜甜圈图的问题，但给出的解决方案非常复杂（多个部门以及使用按钮动态更改图表的能力）：

[http://jsfiddle.net/philippkuehn/jDLux/](http://jsfiddle.net/philippkuehn/jDLux/)

```
<div class="wrapper">
<div class="donutchart">
    <div class="graph"></div>
    <div class="graph-center"></div>
</div>
<div class="buttons">
    <a class="button button-active" href="#" data-id="0">1</a>
    <a class="button" href="#" data-id="1">2</a>
    <a class="button" href="#" data-id="2">3</a>
</div> 
```

抱歉，我找不到我找到这个答案的问题，但我的工作不是很清楚。

谁能给我一个非常简单的解决方案，无论是小提琴还是教程（尽管我发现的所有解决方案都是针对非常复杂的圆环图或饼图，但我只需要一个非常简单的实现）。

再次抱歉，我没有自己尝试过这段代码，但就像我说我是一个 javascripting 的新手。

谢谢你的帮助

乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:25:08.507

尝试使用 CSS 中的饼图并使用 Javascript 进行调整。这里有一些很酷的：http: [//speckyboy.com/2010/11/04/10-awesome-pure-css-graph-and-chart-techniques/](http://speckyboy.com/2010/11/04/10-awesome-pure-css-graph-and-chart-techniques/)

# android - 系统的“下载”应用程序的意图

> ID：15067214
> 
> 赞同：0
> 
> 时间：2013-02-25T12:41:09.197
> 
> 标签：android, android-intent, android-activity, download, native

我如何调用一个意图来启动 Android 操作系统中的原生下载应用程序。我为此搜索了很多，这与我得到的一样接近：

```
 Intent i = new Intent();
 ComponentName comp = new ComponentName("com.sec.android.providers.downloads","com.sec.android.providers.downloads.DownloadActivity");
 i.setComponent(comp);
 i.setAction("android.intent.action.VIEW");
 self.startActivity(i); 
```

我也试过：

```
 Intent i = new Intent();
            PackageManager manager = getActivity().getPackageManager();
            i = manager.getLaunchIntentForPackage("com.sec.android.providers.downloads");
            i.addCategory(Intent.CATEGORY_LAUNCHER);
            startActivity(i); 
```

但它给了我一个JavaNullPointerException： i.addCategory(Intent.CATEGORY_LAUNCHER);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:49:52.223

```
Intent i = new Intent();  
i.setAction(Intent.ACTION_VIEW);
Uri uri= Uri.fromFile(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS));
i.setData(uri);   
startActivity(i); 
```

# android - ndk-gdb 错误：设备不支持应用程序的目标 CPU ABI

> ID：15067215
> 
> 赞同：8
> 
> 时间：2013-02-25T12:41:08.963
> 
> 标签：android, android-ndk, gdb, ndk-gdb

尝试运行 ndk-gdb 并收到此错误：

> Android NDK 安装路径：/Library/AndroidSDK/ndk/
> 使用特定 adb 命令：/Library/AndroidSDK/platform-tools/adb
> 找到 ADB 版本：Android Debug Bridge 版本 1.0.31
> 使用 ADB 标志：
> 使用自动检测的项目路径：.
> 找到包名：com.dev.project
> jni/Android.mk:18: *** Android NDK: Aborting。. 停止。
> 应用程序针对的 ABI：Android NDK：
> 设备 API 级别：17
> 设备 CPU ABI：armeabi-v7a armeabi
> 错误：设备不支持应用程序的目标 CPU ABI！
> 设备支持：armeabi-v7a armeabi
> 包支持：Android NDK：

jni/Android.mk 中的第 18 行是导入模块调用。

这是什么意思以及如何补救？

应用程序可根据 ndk 文档进行调试。我正在使用 Mac。我可以构建和运行应用程序，所以构建脚本应该没问题。

* * *

安卓.mk

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := libgl2jni
LOCAL_CFLAGS    := -Werror -Wall -g
LOCAL_CPPFLAGS  := -std=c++11
LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../src $(LOCAL_PATH)/../../include $(LOCAL_PATH)/../../../boost

NDK_MODULE_PATH := $(LOCAL_PATH)/../../lib/ndk
LOCAL_SRC_FILES := $(subst $(LOCAL_PATH)/,,$(wildcard $(LOCAL_PATH)/*.cpp) $(wildcard $(LOCAL_PATH)/../../src/*/*.cpp))
LOCAL_LDLIBS    := -llog -lGLESv2

LOCAL_STATIC_LIBRARIES := freetype

include $(BUILD_SHARED_LIBRARY)

$(call import-module,otherlib) #commenting this line launches the ndk-gdb, but ndk-build fails 
```

应用程序.mk

```
APP_STL := gnustl_static

#remove for release?
APP_ABI := armeabi armeabi-v7a 
APP_OPTIM := debug 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-06T18:45:43.177

我有同样的问题。我很确定这是`core/build-local.mk`脚本中的错误。至少错误消息没有意义。

我固定这样做：

```
export NDK_MODULE_PATH=path_to_look_for_modules 
```

Android.mk 中声明的模块的**父**`path_to_look_for_modules`目录应该在哪里。也就是说，如果你有导出路径**`/myproject/mylibs/otherlib``/myproject/mylibs`**

 **如果你有多个路径，像往常一样：

```
export NDK_MODULE_PATH=path1:path2:path3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:08:04.100

如果您正在构建一个 Android 应用程序并且有一些 ndk 代码，您可以通过使用以下行添加/修改 Application.mk（通常在 jni 目录中）来解决此问题：

```
# The ARMv7 is significanly faster due to the use of the hardware FPU
APP_ABI := armeabi armeabi-v7a x86 mips
#APP_ABI := armeabi
APP_PLATFORM := android-10 
```

我的意思是 APP_ABI 线。这是指定要为其编译 ndk 代码的目标处理器。我从错误消息中假设您正在测试的设备具有不同于您构建应用程序的 CPU 类型的设备。

[关于第三方库](https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/NxtijcZYMT0)的有用信息

[makefile 或环境](https://stackoverflow.com/questions/12020245/ndk-gdb-on-windows)可能存在问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-10T00:14:50.243

导出 NDK_PROJECT_PATH=[路径]

其中 [Path] 是“jni”目录的父目录，该目录又包含您的 NDK 代码。

如果您的 NDK 代码（jni 目录）与您的 Android java 代码分开放置，您“可能”会遇到此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-25T14:56:20.017

此问题的常见解决方案是将此行包含在 Application.mk 中。

```
APP_ABI := armeabi-v7a 
```

Replace armeabi-v7a by the appropriate API as per the `Device supports` line. This will ensure that your application is built for the correct platform, and that `ndk-gdb` can find it.**

# java - Webservice 运行时异常错误：java.lang.NoClassDefFoundError

> ID：15067217
> 
> 赞同：-1
> 
> 时间：2013-02-25T12:41:14.487
> 
> 标签：java, jakarta-ee, sap

为业务对象创建 Web 服务后，在运行时出现异常错误：

```
Exception: java.lang.NoClassDefFoundError: com/crystaldecisions/sdk/exception/SDKException; 
nested exception is: java.lang.NoClassDefFoundError: com/crystaldecisions/sdk/exception/SDKException
 Message: java.lang.NoClassDefFoundError: com/crystaldecisions/sdk/exception/SDKException; nested 
exception is: java.lang.NoClassDefFoundError: com/crystaldecisions/sdk/exception/SDKException 
```

我已将所有 JAR 文件都包含在 中`WEB-INF/lib`，并且我还在我的项目构建路径中引用了外部 JAR 文件。

谁能帮我解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:53:41.090

这个错误意味着那些文件没有被找到，但被你的代码引用，甚至被你引用的代码间接使用。您需要确保这些确切的类存在于您的 WEB-INF/lib 下的 JAR 中。我的猜测是您已经包含了 JAR 文件，但遗漏了其中几个，或者在 WEB-INF/lib 中有错误版本的 JAR 文件。例如，您针对较新版本进行编译，但使用某些较旧版本进行部署。

我用来验证的技巧是`find . -iname "*jar" -exec unzip -t {} | vim -`. 这条小线将显示文件列表，我可以搜索它抱怨的那些类是否真的存在。如果您想使用其他编辑器，只需将其传送到某个文件 `find . -iname "*jar" -exec 解压缩 -t {} > somefile.txt"。

# ruby - 列出没有命名空间的 Rake 任务

> ID：15067218
> 
> 赞同：0
> 
> 时间：2013-02-25T12:41:18.320
> 
> 标签：ruby, rake

我的 Rakefile 包含一些没有命名空间的任务。当我运行时`rake -T`，这些任务没有列出。我如何包括它们？我尝试编写自己的任务来列出所有这些并且它有点工作，但它只列出了名称而不是描述。

```
task :list do
  Rake.application.tasks.each do |task|
    print task.name() + ' ' + task.comment.to_s() + "\n"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:09:54.933

如果您的任务有前面`desc`的 s，则将*列*在`rake -T`：

```
desc "Lists all the tasks"
task :list do
  Rake.application.tasks.each do |task|
    puts "#{task.name} \# #{task.comment}"
  end
end 
```

没有前面的任务在输出中被设计`desc`省略。`rake -T`如果您仍想使用您的`:list`任务，只需添加

```
Rake::TaskManager.record_task_metadata = true 
```

到你的 main 的最顶端`Rakefile`。

# java - 在 Android 应用程序中将全局常量存储在哪里？

> ID：15067222
> 
> 赞同：21
> 
> 时间：2013-02-25T12:41:27.087
> 
> 标签：java, android, global-variables, constants

我会知道存储全局常量的最佳实践是什么，这些常量在编译时会随着环境（调试、预生产、生产、发布等）而改变。

在 iOS 中，我曾经将所有全局常量保存在头文件中，并使用预处理器宏对其进行更改，请参阅此答案：

[Where to store global constants in an iOS application？](https://stackoverflow.com/questions/7116177/where-to-store-global-constants-in-an-ios-application)

我应该为 Android 使用什么解决方案？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-25T12:42:37.013

在基本包文件夹中创建一个**类常量。**

*（或者创建一个**接口**而不是一个类，这样就不需要每次都引用该类，但是由于代码可读性，这是[不好的做法](https://stackoverflow.com/a/2659740/1173391)* ，但它会起作用）用值

填充它。 此外， the和 the也可以声明为。`public static final`

`class``interface``abstract`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T13:05:58.737

如果常量的值取决于环境（密度、语言环境等），那么您应该使用资源来存储它们（整数、字符串、维度等）。

在另一种情况下，您可以将全局常量放在一个文件中（最佳实践 - 为每组常量使用前缀）或将局部常量放在相关类中（例如，Intent 包含标志、附加组件、类别等）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T17:06:22.603

使用`public static final values.`它们并将它们保存在单独的 java 文件中，如下所示：

```
 static String QC    = "http:/************";
    static String DEV   = "http:/************";
    static String CLOUD = "http:/************";

    static String SERVICEURL = CLOUD ; //Use this SERVICEURL in your code at run time 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-12T17:29:33.640

另一种解决方案可能是使用资源文件（如果您满足于仅存储字符串值）。

这可用于存储常量，例如此应用程序管理的帐户：

前任。WelcomeActivity.java

```
AccountManager am = AccountManager.get(WelcomeActivity.this);
Account account = am.getAccountsByType(getResources().getString(R.string.ACCOUNT_TYPE))[0]; 
```

前任。res/values/strings.xml

```
<resources>
    <string name="ACCOUNT_NAME">com.acme.MyAccountSignature</string>
</resources> 
```

这也将允许您在无需重新编译的情况下对其进行修改（类似于您通常解耦翻译的方式，strings.xml 文件最适合使用）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-02T11:02:34.163

**非常简单的解决方案在这里**

```
public class Constants {
    /**
     * Object key prams when pass the json object from server.
     */
    public static final String KEY_EMAIL = "email";
    public static final String KEY_PASSWORD = "password";
    public static final String KEY_DEVICE_TOKEN = "device_token";
    public static final String KEY_DEVICE_TYPE = "device_type";
    public static final String KEY_NAME = "name";
    public static final String KEY_COUNTRY_CODE = "country_code";
    public static final String KEY_PHONE_CODE = "phone-code";
    public static final String KEY_GENDER = "gender";
    public static final String KEY_DATE_OF_BIRTH = "date_of_birth";
    public static final String KEY_USER_ID = "user_id";
    public static final String KEY_LIMIT = "limit";
    public static final String KEY_DRIVER_ID = "driver_id";
    public static final String KEY_LONGTITUDE = "logitude";
    public static final String KEY_LATTITUDE = "lattitude";
    public static final String KEY_RATING = "rating";
    public static final String KEY_DETAILS = "details";
    public static final String KEY_ACCESS_TOKEN= "access_token";
    /**
     * Fragments name
     */
    public static final String FRAG_ETA = "ETA";
    public static final String FRAG_ACCOUNT_FRAGMENT = "ACCOUNT_FRAGMENT";
    public static final String FRAG_SETTING_FRAGMENT = "SETTING_FRAGMENT";
    public static final String FRAG_MAP_FRAGMENT = "MAP_FRAGMENT";
    public static final String FRAG_FEEDBACK = "FEEDBACK";
    public static final String FRAG_RATE_FRAGMENT = "RATE_FRAGMENT";

    public static final String USA_CODE = "+1";

    public static final String DISTANCE_SEARCH = "DISTANCE_SEARCH";

} 
```

**快乐编码**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-10T18:23:11.367

**属性文件**

我们在下面存储一个属性文件`<project>/<package>/src/main/assets/config.properties`

**加载属性**

```
 private static final String PROPS_NAME = "config.properties";
   private static Properties configuration;

   ...
   public static void init(Context ctx) {

        configuration = new Properties();
        InputStream rawResource = resources.getAssets().open(PROPS_NAME);
        configuration.load(rawResource); 
```

# c - 如何防止密码屏蔽缓冲区溢出

> ID：15067223
> 
> 赞同：-2
> 
> 时间：2013-02-25T12:41:29.680
> 
> 标签：c, buffer, buffer-overflow, masking

```
#include <conio.h>
#include <windows.h>
#include <stdio.h>

int main ()
{
char input[255];
int i = 0;
for(;;i++) /* Infinite loop, exited when RETURN is pressed */
{
    char temp;
    temp = getch (); /* Get the current character of the password */
    if (GetAsyncKeyState (VK_RETURN)) /* If the user has pressed return */
    {
        input[i]='\0';
        break;
    }
    input[i] = temp;
    printf("*"); /* Print a star */
}
//printf("%s",input);
if(strcmp(input,"kamal")==0)
{
                     printf("ACCEPTED");
                     }
                     else
                     printf("not");
_getch();
return EXIT_SUCCESS; /* Program was executed successfully */
} 
```

这是我的代码。我怎样才能防止缓冲区溢出，如果我输入密码更多，那么我的程序就会崩溃。无论如何我可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:04:09.690

局部变量 char input[255] 存储在堆栈中。C 中没有对数组进行边界检查。问题是当我们添加超过 255 个字符时，存储在堆栈中的另一个变量的值可能会改变。这可能会导致崩溃。

一种解决方案是读取字符并仅在范围 (i) 小于 255 时分配给输入数组。

```
#include <conio.h>
#include <windows.h>
#include <stdio.h>

int main ()
{
    char input[255];
    int i = 0;
    int flag = 0;
   for(;;i++) /* Infinite loop, exited when RETURN is pressed */
   {
       char temp;
       temp = getch (); /* Get the current character of the password */
       if (GetAsyncKeyState (VK_RETURN)) /* If the user has pressed return */
       {
           input[i]='\0';
           break;
       }
       if ( i< 255)
       {
            input[i] = temp;
       }
       else     
       {
           flag = 1;
       }

       printf("*"); /* Print a star */
 }
//printf("%s",input);
if(strcmp(input,"kamal")==0 && flag == 0)
{
      printf("ACCEPTED");
 }
 else
       printf("not");
 getch();
 return EXIT_SUCCESS; /* Program was executed successfully */
} 
```

另一种解决方案是动态分配输入数组的 (realloc()) 大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:46:09.027

始终检查边界。始终根据缓冲区的长度检查 i 的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T13:16:31.623

在某些情况下，扩展缓冲区是可以接受的。这很少是理想的，因为无限扩展会导致其他问题。

在其他情况下，截断输入是可以接受的。这可能是这里的一个选项，但它也不理想。

在这种情况下，当您与不变的字符串进行比较时，您可以跳过“将输入存储在数组中”阶段，并将接收到的输入逐字节与密码进行比较。这样的代码应该看起来像这样，但要小心，因为这是未经测试的：

```
char password[] = "kamal";
size_t position = 0;
char c = getch();
while (password[position] != '\0' || strchr("\r\n", (unsigned char) c) == NULL) {
    if (c != password[position++] || position == sizeof password) {
        // Password mismatch. Discard the rest of the password, then tell the user...
        while (strchr("\r\n", (unsigned char) c) == NULL) {
            c = getch();
        }
        position = 0;
        puts("Invalid password. Please retry.");
    }
    c = getch();
} 
```

...如果没有缓冲区溢出，那你还担心什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:46:20.113

尝试包装类似的东西：

```
if(i<255) {
    ...
} 
```

...围绕您的角色收集过程。

- 编辑 -

```
#include <conio.h>
#include <windows.h>
#include <stdio.h>

int main ()
{
char input[255];
int i = 0;
for(;;i++) /* Infinite loop, exited when RETURN is pressed */
{
    if(i < 255) 
    {
        char temp;
        temp = getch (); /* Get the current character of the password */
        if (GetAsyncKeyState (VK_RETURN)) /* If the user has pressed return */
        {
            input[i]='\0';
            break;
        }
        input[i] = temp;
        printf("*"); /* Print a star */
    }
}
//printf("%s",input);
if(strcmp(input,"kamal")==0)
{
                     printf("ACCEPTED");
                     }
                     else
                     printf("not");
_getch();
return EXIT_SUCCESS; /* Program was executed successfully */
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T13:08:58.047

正如您所指出的，如果用户提供超过 255 个字符，您将程序崩溃。

所以，你应该检查已经提供的字符数量，如果它达到最大值（你的缓冲区），你应该停止获取更多的键（因为密码已经错了，这并不重要......）：

```
#define BUFFER_MAX 255

// +1 so we can always add the 0-terminator
char input[BUFFER_MAX + 1];
do {
    char temp;
    temp = getch (); /* Get the current character of the password */
    // Check if char does fit in the buffer
    if(i < BUFFER_MAX) {
        // add to buffer
        input[i] = temp;
        i++;
    }
    printf("*"); /* Print a star */
    // Check if the user pressed return
} while(GetAsyncKeyState (VK_RETURN) == false);
input[i]='\0'; 
```

注意：我还重新安排了你的循环，因为使用无限循环并打破它们是“丑陋的”（不好的做法，在这种情况下是不必要的）......

# c++ - QPushbutton 中可能存在的错误？

> ID：15067225
> 
> 赞同：1
> 
> 时间：2013-02-25T12:41:33.093
> 
> 标签：c++, qt

我想实现类似于*MS Office 2007*中的*Ribbon UI*的东西。我正在使用's 和. 当按下 a 时，显示对应的 from 。我想以这样的方式实现，当按下 a 时，我们不应该再次按下它，除非按下其他按钮。所以对于我来说，我称之为：在我的第一行。根据文档：*`QPushbutton``QStacked Widget``QPushbutton``widget``Stacked Widget``PushButton``QPushButton``clicked()` `SLOT``QPushButton``button->setDown(true);`*

 *> 如果此属性为 true，则按下按钮。如果将此属性设置为 true，则不会发出信号 press() 和 clicked()。

因此，当我在运行时单击它时，按钮显示为按下状态。那挺好的！然而`SIGNAL`'s 仍然被发射，即`pressed()`&`clicked()`被发射。`SIGNAL`我已经尝试使用's & 's 的不同组合来获得相同的属性`SLOT`。然而它是一样的。我正在使用 Qt 4.8.1。这里出了什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:56:20.660

如果要将按钮视觉外观设置为*按下*，可以使用该`setDown()`功能。文档不是很清楚，但是：

> 如果此属性为 true，则按下按钮。如果将此属性设置为 true，则不会发出信号 press() 和 clicked()。

这并不意味着在按下按钮时不会发出信号，**而是****在您调用时`setDown()`**不会发出信号（在启用所有按钮并且第二次单击可能只是切换其状态之后）。

你可以做的是检查按钮是否`isDown()`在你的处理程序中被按下（）`clicked()`。作为替代方案，您可以将按钮更改为可检查（使用`setCheckable()`））：第二次单击按钮将“关闭”它（如果这是您需要的行为）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:03:58.967

将所有按钮设置为可检查，然后继续阅读

[http://qt-project.org/doc/qt-4.8/qbuttongroup.html](http://qt-project.org/doc/qt-4.8/qbuttongroup.html)*

# bash - bash：在一个while循环内计数器（杀死并杀死-9）

> ID：15067229
> 
> 赞同：5
> 
> 时间：2013-02-25T12:41:56.250
> 
> 标签：bash, scripting, while-loop, kill, kill-process

所以我最近了解到[kill 不是同步](https://stackoverflow.com/questions/8762228/is-kill-function-synchronous)命令，所以我在 bash 中使用了这个 while 循环，这太棒了：

```
while kill PID_OF_THE_PROCESS 2>/dev/null; do sleep 1; done 
```

但是，在某些情况下（非常罕见，但仍然会发生）进程被卡住，并且不会对终止信号起作用。在这些情况下，杀死应用程序的唯一方法是使用“ **kill -9** ”。

所以我想知道，只有在循环达到第 10 次迭代时，如何在 bash 中修改上面的 while 循环以使用 -9 参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:58:20.783

正如其他用户所说....在使用这种残酷的方法之前，您必须解决阻塞的原因...无论如何...试试这个

```
#!/bin/bash

i=0

PID_OF_THE_PROCESS="your pid you can set as you like"

# send it just once
kill $PID_OF_THE_PROCESS 2>/dev/null;

while [ $i -lt 10 ];
do
    # still alive?
    [ -d /proc/$PID_OF_THE_PROCESS ] || exit;
    sleep 1;
    i=$((i+1))
done

# 10 iteration loop and still alive? be brutal
kill -9 $PID_OF_THE_PROCESS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:49:48.547

发送一次信号就足够了。

```
kill $PID 2>/dev/null
sleep 10;
if kill -0 $PID 2>/dev/null
  kill -9 $PID
fi 
```

对于您的反问：

```
c=0
while true; do
    echo $c;
    c=$((c+1));
    if [ $c -eq 10 ]; then break; fi;
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:45:57.087

当然，使用柜台，但这有点笨拙。

您可能真正想要做的是`0`用作您的信号，这对进程没有任何作用，但让您检查进程是否仍然存在。（`kill -0 $pid`如果进程不存在，将返回非零退出状态。）然后，你知道，不要只是`kill -9`它。进程不会无缘无故地卡住，它们卡住是因为它们无法释放资源，例如发生网络或文件系统阻塞时。解决块，然后进程可以自行清理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:03:24.713

有几种方法可以实现这一点，但您确实要求修改现有循环，因此：

```
count=0
while kill PID_OF_THE_PROCESS 2>/dev/null
do 
    sleep 1; 
    (( count++ ))
    if (( count > 9 ))
    then
        kill -9 PID_OF_THE_PROCESS 2>/dev/null
     fi
done 
```

# c# - 从存储库中检索实体导致空引用

> ID：15067232
> 
> 赞同：0
> 
> 时间：2013-02-25T12:41:57.370
> 
> 标签：c#, entity-framework, repository, dbcontext

我将某些内容存储在存储库中，并且需要在调用之前检索该值`SaveChanges`。结果是`null`，但在调试器中我可以看到存储库包含本地值。

```
var tenant = TenantRepository.Create(model.TenantName);

// a bit further in the stacktrace I retrieve the entity

var tenant = TenantRepository.GetTenantByName(tenantName);
// now tenant is null. 
```

* * *

中的相关方法`TenantRepository`：

`Create`方法：

```
 public Tenant Create(string tenantName)
    {
        var tenant = new Tenant
            {
                Name = tenantName,
                Guid = Guid.NewGuid().ToString()
            };

        if (Exists(tenant.Name))
        {
            throw new TenantAlreadyExistsException(tenant.Name);
        }

        _repository.Add(tenant);

        return tenant;
    } 
```

`GetTenantByName`方法：

```
 public Tenant GetTenantByName(string name)
    {
        if (string.IsNullOrEmpty(name))
        {
            throw new ArgumentException("name");
        }

        var foundTenant = GetTenants().SingleOrDefault(tenant => name.Equals(tenant.Name));

        return foundTenant;
    }

    private IQueryable<Tenant> GetTenants()
    {
        return _repository.GetAll().Include(tenant => tenant.Users);
    } 
```

正如您在这张图片中看到的，`Tenant`在`Repository`.

为什么我无法找回它？我是否忽略了明显的错误？

提前谢谢了！

![在此处输入图像描述](../Images/08622abdb8d58376adb37e88fa516320.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:25:44.523

可能 GetAll() 方法不包括 AdditionalState 中的实体。对象上下文中新添加的租户实体的状态将为“AddedState”

# google-apps-script - 在 Google Apps 上创建链接到 My Web App 的菜单项

> ID：15067235
> 
> 赞同：0
> 
> 时间：2013-02-25T12:42:05.393
> 
> 标签：google-apps-script, google-apps

我是 Google Apps 开发的新手，我正在试用 Google Apps 脚本。我创建了一个带有 UI 的简单 Web 应用程序，当我单击按钮时，它将列出我在“测试文件夹”文件夹下拥有的所有文件。当我发布并部署为 Web 应用程序时，Web 应用程序运行良好。你可以试试这个链接[https://script.google.com/a/macros/siteforged.com/s/AKfycbyt2QSo_lsIQqay_FvOv3PI8CgibJ4P5MEW4R-I1aI/dev](https://script.google.com/a/macros/siteforged.com/s/AKfycbyt2QSo_lsIQqay_FvOv3PI8CgibJ4P5MEW4R-I1aI/dev)看看。

但是，我真的很好奇如何在 Google Drive 的“更多”下拉菜单上创建一个菜单项，当我单击该菜单时，它会将我带到该应用程序。

有人可以指出我将如何做到这一点的文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:38:29.573

仅供参考，只有您可以看到从“测试您的最新代码”发布的脚本（以 /dev 结尾的脚本）。

（据我所知）您可以改变用户体验[http://drive.google.com](http://drive.google.com)的唯一方法是实现[Google Drive SDK](https://developers.google.com/drive/?hl=en)。Apps 脚本无法执行此操作。

# mysql - 我可以为 MySql 中表中的属性定义数据域吗

> ID：15067237
> 
> 赞同：0
> 
> 时间：2013-02-25T12:42:10.430
> 
> 标签：mysql, database, database-design

如何为 mysql 表中的属性定义数据域。例如，我想要学生表的性别属性中的“男性”或“女性”值，而不是这些。在mysql中可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:49:03.440

是的，有可能，使用**`ENUM`**数据类型。

An`ENUM`是一个字符串对象，其值选自创建表时列规范中明确枚举的允许值列表。

例如

```
CREATE TABLE shirts (
    name VARCHAR(40),
    size ENUM('x-small', 'small', 'medium', 'large', 'x-large')
); 
```

更多信息[请看这里。](https://dev.mysql.com/doc/refman/5.5/en/enum.html)

# macos - 在 Windows 上使用 Tycho 构建的 Eclipse RCP 应用程序的 Mac 分发无法启动

> ID：15067244
> 
> 赞同：5
> 
> 时间：2013-02-25T12:42:33.083
> 
> 标签：macos, eclipse-rcp, tycho, p2

我已经用 Tycho 构建了一个 Eclipse RCP 应用程序（Indigo）。该构建在 Win 7 64 位机器上运行。

父 POM 包括：

```
<plugin>
  <groupId>org.eclipse.tycho</groupId>
  <artifactId>target-platform-configuration</artifactId>
  <version>${tycho-version}</version>
  <configuration>
  <resolver>p2</resolver>

  <environment>
    <os>linux</os>
    <ws>gtk</ws>
    <arch>x86_64</arch>
  </environment>
  <environment>
    <os>win32</os>
    <ws>win32</ws>
    <arch>x86_64</arch>
  </environment>
  <environment>
    <os>macosx</os>
    <ws>cocoa</ws>
    <arch>x86_64</arch>
  </environment>

... 
```

产品配置如下所示（为了便于阅读，有一些遗漏和额外的换行符）：

```
<product name="My App" uid="myapp.product" id="myapp.core.product" application="myapp.core.application" version="0.1.4.qualifier" useFeatures="true" includeLaunchers="true">

   <configIni use="default">
   </configIni>

   <launcherArgs>
      <programArgs>-data @noDefault</programArgs>
      <vmArgsMac>-XstartOnFirstThread
                         -Dorg.eclipse.swt.internal.carbon.smallFonts</vmArgsMac>
   </launcherArgs>

   <launcher name="myapp_0_1_4">
      <solaris/>
      <win useIco="false">
         <bmp/>
      </win>
   </launcher>

   <vm>
      <macos include="false">org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6</macos>
   </vm>

   <plugins>
      <plugin id="com.ibm.icu"/>
      <plugin id="myapp.core"/>
      <plugin id="org.eclipse.core.runtime"/>
      <plugin id="org.eclipse.core.runtime.compatibility.registry" fragment="true"/>
      <plugin id="org.eclipse.equinox.app"/>
      <plugin id="org.eclipse.equinox.common"/>
      <plugin id="org.eclipse.osgi"/>
      <plugin id="org.eclipse.swt"/>
      <plugin id="org.eclipse.swt.win32.win32.x86_64" fragment="true"/>
      <plugin id="org.eclipse.ui"/>
      <plugin id="org.eclipse.ui.workbench"/>
   </plugins>

   <features>
      <feature id="org.eclipse.rcp" version="3.7.2.v20120120-1424-9DB5FmnFq5JCf1UA38R-kz0S0272"/>
      <feature id="myapp.platform_dependencies.feature" version="0.1.4.qualifier"/>
      <feature id="myapp.core.feature" version="0.1.4.qualifier"/>
      <feature id="myapp.ui.feature" version="0.1.4.qualifier"/>
      <feature id="myapp.model.feature" version="0.1.4.qualifier"/>
   </features>

   <configurations>
      <plugin id="org.eclipse.core.runtime" autoStart="true" startLevel="0" />
      <plugin id="org.eclipse.equinox.common" autoStart="true" startLevel="2" />
   </configurations>

</product> 
```

构建运行没有问题，并生成 zip 文件，这些文件在目标操作系统 Windows 和 Linux 上解压缩，包括工作启动器。（在 Linux 上，我必须先使启动器可执行，然后才能运行它。）

然而，在 Mac OS X (10.6.8) 上，启动器 (myapp.app) 什么都不做......

当我运行`java -jar -XstartOnFirstThread plugins/org.eclipse.equinox.launcher_[version]`时，应用程序会启动，尽管没有启动屏幕。

我想我的产品配置中的任何地方都有错误的设置，但我不介意哪个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:22:16.433

Windows for Mac 上的跨平台构建预计无法正常工作。原因是 Tycho/p2 需要模拟具有 Unix 权限的文件系统。Tycho 的问题跟踪器中有[此请求](https://bugs.eclipse.org/bugs/show_bug.cgi?id=355370)，但恕我直言，实施此操作不值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T22:13:31.767

我刚刚弄清楚如何从 Windows 制作 OSX 可执行 .app。

您可以将 Tycho 构建设置为为 Mac/Linux 生成 .tar.gz 文件，然后使用工具在 tar 文件中设置可执行文件的权限，因为 tar 支持 *nix 权限。

这是一个片段，展示了如何在 pom.xml 文件中设置它。（此片段还设置 Mac .app 文件夹并将版本添加到存档文件名）： [http ://snipt.org/Aggid3](http://snipt.org/Aggid3)

这是一个执行权限位的 Java 类。它需要 Guava 和 Apache Commons Compress： [http ://snipt.org/Aggic1](http://snipt.org/Aggic1)

这是一个包含所有依赖项的预构建 jar： [https ://mega.co.nz/#!WcNjyRjS!KE7tM1xYrt1l9JIguUAsrgpLe2V0NS1QIj_NvdAnm88](https://mega.co.nz/#!WcNjyRjS!KE7tM1xYrt1l9JIguUAsrgpLe2V0NS1QIj_NvdAnm88)

使用上述示例的用法示例如下： java -jar gztperms.jar “My Product-0.0.1.201309091838-macosx.cocoa.x86.tar.gz” “My Product-Executable-0.0.1.201309091838-macosx.cocoa.x86.tar .gz” “我的产品.app/Contents/MacOS/我的产品”</p>

我有一个相当简单的基于 Ant 的构建后脚本，我从 Jenkins 执行它找到 .gz 文件并在其上运行此脚本，现在一切都可以通过工件链接进行。

# django - 姜戈 1.5。用户配置文件创建

> ID：15067249
> 
> 赞同：3
> 
> 时间：2013-02-25T12:42:50.043
> 
> 标签：django, model, user-profile

我将 django 1.5 与自定义模型 MyUser 一起使用。我想制作用户个人资料页面，他只能修改一个字段 - “关于”。我尝试过这样的事情：

表格.py：

```
class UserSettingsForm(forms.ModelForm):
class Meta:
    model = get_user_model()
    fields = ('about') 
```

视图.py：

```
class UserSettings(UpdateView):
form_class = UserSettingsForm
template_name = "user/settings.html"
def get_object(self, queryset=None):
    return self.request.user
def get_success_url(self):
    return reverse('user_detail', args=[self.request.user.username]) 
```

网址：

```
url(r'^settings/$', UserSettings.as_view(), name='user_settings') 
```

模型：

```
 class MyUserManager(BaseUserManager):
def create_user(self, email, password=None):
    """
    Creates and saves a User with the given email, date of
    birth and password.
    """
    if not email:
        raise ValueError('Users must have an email address')

    user = self.model(
        email=MyUserManager.normalize_email(email),
       # date_of_birth=date_of_birth,
    )

    user.set_password(password)
    user.save(using=self._db)
    return user

def create_superuser(self, email, password):
    """
    Creates and saves a superuser with the given email, date of
    birth and password.
    """
    user = self.create_user(email,
        password=password,
        #date_of_birth=date_of_birth
    )
    user.is_admin = True
    user.save(using=self._db)
    return user

class MyUser(AbstractBaseUser):
email = models.EmailField(
    verbose_name='email address',
    max_length=255,
    unique=True,
    db_index=True,
)
last_name=models.CharField(max_length=30)
first_name=models.CharField(max_length=30)
about=models.TextField(blank=True)

objects = MyUserManager()

USERNAME_FIELD = 'email'
REQUIRED_FIELDS = ['last_name','first_name','about']

def get_full_name(self):
    # The user is identified by their email address
    return self.email

def get_short_name(self):
    # The user is identified by their email address
    return self.email

def __unicode__(self):
    return self.email

def has_perm(self, perm, obj=None):
    "Does the user have a specific permission?"
    # Simplest possible answer: Yes, always
    return True

def has_module_perms(self, app_label):
    "Does the user have permissions to view the app `app_label`?"
    # Simplest possible answer: Yes, always
    return True

@property
def is_staff(self):
    "Is the user a member of staff?"
    # Simplest possible answer: All admins are staff
    return self.is_admin 
```

但我收到错误：django.core.exceptions.ImproperlyConfigured: AUTH_USER_MODEL 指的是尚未安装的模型“app.MyUser”

如何在 django 1.5 中创建用户个人资料？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:14:44.427

`MyUser`类应该`'app'`在您的设置文件中命名的应用程序下，以便身份验证框架选择它。

# c++ - c++中空类的行为

> ID：15067251
> 
> 赞同：-2
> 
> 时间：2013-02-25T12:42:53.233
> 
> 标签：c++

我写了这个小程序：

```
#include <iostream>

using namespace std;

class a{
};

int main ()
{
a *obj=new a();
cout<<sizeof(obj)<<endl;
cout<<sizeof(*obj)<<endl;
delete obj;
} 
```

以下是我得到的输出：

```
> ./a.out
4
1
> 
```

我可以理解它使用 4 个字节来存储对象的地址。但我不明白的是 1 个字节。因为它是一个空类，所以我怀疑那个 1 字节（对象的大小）的目的是什么。

我的第二个问题是会调用默认构造函数吗？如果是的话，它基本上会做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:44:52.647

字节在那里是因为对象的大小不能`0`在 C++ 中。这是一个虚拟字节。考虑一个数组`a`- 如果大小为`a`，则`0`所有对象都将位于同一地址。

理论上，调用一个空的默认构造函数。在实践中，它被优化了，因为它没有可观察到的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:56:47.990

> 那 1 个字节的目的是什么（对象的大小）

在 C++ 中，所有不同的对象都必须有不同的地址。为了实现这一点，所有对象至少与最小的可寻址单元一样大——即一个字节。

> 我的第二个问题是会调用默认构造函数吗？

从技术上讲，是的。如果您不声明自己的默认构造函数，那么如果需要，将隐式生成一个。隐式构造函数将默认构造所有成员和基础子对象。然而...

> 如果是的话，它基本上会做什么？

由于该类没有需要初始化的成员或子对象，因此隐式构造函数是*微不足道*的：它什么也不做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:45:17.990

首先`sizeof`在 32 位系统中打印出 32 位指针的大小。第二个`sizeof`打印出`a`与 1 个字节对齐的内容大小，因为不同的对象必须在不同的地址中创建。

但是，即使使用**非虚拟方法**，您也可以拥有一个零大小的类：

```
class A
{
    A()
    {
       cout << "Hi" << endl;
    }
    char unused[];
    // Note: Putting at least a virtual method increases the size to 4 bytes.
}; 
```

和

```
cout << sizeof(A) << endl; // Prints out 0 
```

此外，此代码显示所有`A`对象都位于相同的内存地址：

```
A a1;
A a2;

cout << &a1 << endl;
cout << &a2 << endl; 
```

输出：

> 0x22ff00
> 
> 0x22ff00

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:45:50.647

每个对象必须有一个不同的地址，因此 C++ 中的对象的最小大小为 1。

默认构造函数什么都不做。

# php - 根据计算结果在指定列上显示结果

> ID：15067253
> 
> 赞同：0
> 
> 时间：2013-02-25T12:42:54.847
> 
> 标签：php, mysql, ms-access

我有**2 个**数据库表：客户信息和余额

**客户**：Customer_ID、姓名

**交易**：Customer_ID、Transaction_Name、Transaction_Amount... *（其他列，但我的问题不是必需的）*

**示例预期查询输出：**

```
Customer_ID | Debit_Balance | Credit_Balance
1           |         500.00|
2           |               | 300.00 
```

**解释：**客户 1 有 500.00 余额，客户 2 有 300.00 额外支付的金额*（这通常是 (-) 负数）*

**问题：**

如何仅在单个查询中执行此操作？我只是想生成报告*（如上面的示例输出）*以显示结果金额**，如果** `positive`这些余额的 Debit_Balance 和 Credit_Balance`negative`然后将使用 Php 处理结果。

**更新：** 我曾经对交易金额进行过这种处理：我总结了所有`Transaction_Amount`基于他们的`Transaction_Name`。

IE

> 余额 = (All Transaction_Name 'SALES')**减去 (-)** (All Transaction_Name 'PAYMENT')

*但这将迫使我创建虚拟表作为我的报告的存储库表和更多的 php 条件来比较和插入。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:23:59.210

您需要为每个客户提供单行输出，其中一列或另一列中的余额取决于它是正数还是负数。尝试（如果我们使用标准 SQL）：

```
select
  subqry.Customer_ID
, case
    when subqry.Balance >= 0 then subqry.Balance
  end as Debit_Balance
, case
    when subqry.Balance < 0 then subqry.Balance * -1
  end as Credit_Balance
from (
  select
    Customer_ID
  , sum(
      case Transaction_Name
        when 'SALES' then Transaction_Amount
        when 'PAYMENT' then Transaction_Amount * -1
        else null
      end
    ) as Balance
  from Transaction
  group by Customer_ID
) as subqry 
```

到目前为止，不需要加入 Customer 表，因为我们没有在任何地方使用 Customer Name。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:57:15.997

我会使用类似下面的东西：

```
SELECT C.customer_id, C.Name, 
IF(SUM(Transaction_Amount)>0, SUM(Transaction_Amount),'') as Debit_Balance,  
IF(SUM(Transaction_Amount)<=0, SUM(Transaction_Amount),'') as Credit_Balance
From Customer As C 
LEFT JOIN Transaction  As T ON C.customer_id = T.customer_id
GROUP BY T.customer_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:46:54.860

我想不出比这更容易的事情了：

```
SELECT c.customer_id, pos.amount debit_balance, neg.amount credit_balance
FROM customer c
LEFT JOIN (SELECT SUM(t.transaction_amount) amount, t.customer_id
           FROM   transaction t
           WHERE  t.transaction_amount > 0
           GROUP BY t.customer_id) pos ON pos.customer_id = c.customer_id
LEFT JOIN (SELECT SUM(t2.transaction_amount) amount, t2.customer_id
           FROM   transaction t2
           WHERE  t2.transaction_amount < 0
           GROUP BY t2.customer_id) neg ON neg.customer_id = c.customer_id 
```

第一个子查询汇总每个客户的所有正值，而第二个子查询汇总所有负值。然后您获取所有客户并将两个对应的值组合成一个结果。

# android - 如何创建（或添加）新布局并将其填充到片段中

> ID：15067255
> 
> 赞同：1
> 
> 时间：2013-02-25T12:42:56.170
> 
> 标签：android, android-layout

我使用片段，我想将数据检索到数据库中，并将这些数据显示到代码中创建的布局中。

有代码：

```
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.TextView;

public class DetailFragment extends Fragment {

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
      Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_rssitem_detail, container, false);

    return view;
  } 
```

有实际的布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_all"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <LinearLayout 
        android:id="@+id/layout_fiche"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" 
        android:background="@drawable/single_border">

       <TextView
            android:id="@+id/detailsText_fiche"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_gravity="center_horizontal|center_vertical"
            android:layout_marginTop="1dip"
            android:text="Zone de Fiche"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textSize="20dip" />
    </LinearLayout> 
</LinearLayout> 
```

我想在 TextView id:detailsText_fiche 下添加许多布局。我能怎么做？

提前谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:46:43.087

您需要以编程方式实现它，看看这个[问题](https://stackoverflow.com/questions/4203506/how-can-i-add-a-textview-to-a-linearlayout-dynamically-in-android)，看看如何去做。

# asp.net-mvc - ASP.NET MVC 实体框架关系绑定

> ID：15067256
> 
> 赞同：4
> 
> 时间：2013-02-25T12:42:58.687
> 
> 标签：asp.net-mvc, entity-framework, relationship

我正在为我的 MVC4 项目使用 Entity Framework 5.0。它有问题。当我将数据库模型提供给任何视图时，控制器会发送没有关系的模型

例子;

我有用户类和关系部门

当我在控制器中使用它时

```
using(context)
{
  var user = context.Find(id);
  string department = user.Department.Name;
} 
```

它在上下文中调用时起作用。但是当我这样做时

```
using(context)
{
  var user = context.Find(id);
  return View(user);
} 
```

并在视图中调用

```
Model.Department.Name 
```

我有错误。

这是我的答案，但它不好

```
using(context)
{
  var user = context.Find(id);
  string department = user.Department.Name;
  return View(user);
} 
```

当我尝试在视图中使用 Model.Department.Name 时，我没有收到任何错误，当我使用类作为模型时，我必须对每个关系都这样做。这个问题有更好的解决方案吗？我想在视图中使用所有关系而不在控制器中调用这些。

我希望你能理解我，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:06:10.367

在您的 DbContext 上，您可以使用该`.Include`方法急切地加载您需要的关系：

```
context.Users.Include(u => u.Department).FirstOrDefault(u => u.Id == id); 
```

或者如果您使用的是较旧版本的实体框架，则此方法的通用版本可能不可用：

```
context.Users.Include("Department").FirstOrDefault(u => u.Id == id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:12:15.387

原因是您没有在原始代码中“加载”部门。由于您的上下文包含在 using 语句中，因此在创建视图之前将其处理掉，因此您的用户对象缺少您想要的数据。

在您的第二个代码示例中，您专门调用了相关的 Department 对象，因此它现在存在于 User 对象中。

您需要使用类似的方式在原始行中急切地加载部门

```
context.User.Include(c => c.Department).Find(id); 
```

现在您的用户对象应该可以在视图中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T13:25:39.800

你想完成什么？为具有一个或多个部门的用户列出视图？

# ruby-on-rails - 在 Rails 3.2 中实现计数时出错

> ID：15067257
> 
> 赞同：1
> 
> 时间：2013-02-25T12:43:02.977
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, html, postgresql

我在数据库中创建了两个表，products 和 shopping_list。我已经为产品提供了一个外键参考 shopping_list，即 product.shopping_list_id。

我正在尝试在 ruby​​ on rails 中查找购物清单中存在的全部产品，但出现错误。

我给了一个文本框来输入值，该值作为总项目存储在数据库中。

但是当我在数据库中添加新产品时，数据库中的数量没有更新。

我的 shopping_list 表如下：-

```
CREATE TABLE shopping_lists
(
  id serial NOT NULL,
  shopping_list_name character varying(255),
  shopping_list_status character varying(255) DEFAULT 'OPEN'::character varying,
  total_items character varying(255) DEFAULT 0,
  created_at timestamp without time zone NOT NULL,
  updated_at timestamp without time zone NOT NULL,
  deleted integer NOT NULL DEFAULT 0,
  CONSTRAINT shopping_lists_pkey PRIMARY KEY (id)
) 
```

我的产品表如下：-

```
CREATE TABLE products
(
  id serial NOT NULL,
  shopping_list_id integer NOT NULL,
  product_name character varying(255) DEFAULT 'null'::character varying,
  product_category character varying(255),
  quantity integer,
  status character varying(255) DEFAULT 'OPEN'::character varying,
  deleted integer NOT NULL DEFAULT 0,
  CONSTRAINT products_pkey PRIMARY KEY (id)
) 
```

我的 Html 文档，即我在其中输入值的列表是这样的：-

```
<head>
  <%= javascript_include_tag :application %>
  <%= csrf_meta_tag %>
</head>
<% if @shopping_lists.blank? %>
  <p>There are no shopping_lists currently in the system.</p>
<% else %>
  <p>These are the shopping_lists in the system</p>
  <table border="1">
  <tr><td>shopping_list No.</td><td>shopping_list Name</td><td>status</td><td>quantity</td><td>Edit</td><td>Delete</td></tr>
  <% @shopping_lists.each do |c| %>
    <tr>
   <td><%= link_to c.id, {:action => 'get_product', :id => c.id} %> &nbsp;</td>
    <td><%= c.shopping_list_name %>&nbsp;</td>
    <td><%= c.shopping_list_status %>&nbsp;</td>
     <td><%= c.total_items %>&nbsp;</td>
    <td><%= link_to 'Edit', {:action => 'edit', :id => c.id} %> &nbsp;</td>
    <td><%= link_to 'Delete', {:action => 'delete', :id => c.id},
    :data => { :confirm => "Are you sure you want to delete this shopping_list?" } %></td>
    </tr>
  <% end %>
  </table>
<% end %>
<p><%= link_to "Add new shopping_list", {:action => 'new' }%></p> 
```

简而言之，我想实现以下查询：-

```
Select count(*) from products where shopping_list_id = ''; 
```

你能帮我么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:19:10.893

如果你真的想要这个：

```
Select count(*) from products where shopping_list_id = ''; 
```

你可以做：

```
Product.count(:conditions => "shopping_list_id is NULL") 
```

# iphone - 使用字符串中的对象运行方法

> ID：15067274
> 
> 赞同：1
> 
> 时间：2013-02-25T12:43:58.183
> 
> 标签：iphone, ios, ipad, cocoa-touch, cocoa

在我的代码的某一时刻，我将方法引用为字符串，并且我有它们的目标。例如，假设我有一个名为 myObject 的对象，并且我有一个名为“doSomething:”的方法，如下所示：

```
- (void)doSomething:(id)sender {
   // do something baby
} 
```

在我的代码的某一点上，我存储了对对象和方法的引用，这样做：

```
NSString *myMethod = @"doSomething:";
id myTarget = myObject; 
```

稍后，在代码的另一点我想这样做

```
[myObject doSomething:self]; 
```

但是如何从对象的引用 id 和表示该方法的 NSString 重构对该对象的方法调用，以及如何将 self 传递给该方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:47:07.357

要将字符串转换为选择器，请使用`NSSelectorFromString`. 相反，使用`NSStringFromSelector`.

转换选择器：

```
SEL selector = NSSelectorFromString(methodSelectorString); 
```

调用方法：

```
[myObject performSelector:selector withObject:self afterDelay:0.0]; 
```

* * *

来自[基金会参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html)；

```
NSSelectorFromString 
```

返回具有给定名称的选择器。

```
SEL NSSelectorFromString (
   NSString *aSelectorName
); 
```

参数

```
aSelectorName 
```

> 代表选择器名称的任意长度、任意字符的字符串。返回值 aSelectorName 命名的选择器。如果 aSelectorName 为 nil，或者无法转换为 UTF-8（这应该只是由于内存不足），则返回 (SEL)0。
> 
> 讨论 为了创建一个选择器，NSSelectorFromString 将 aSelectorName 的 UTF-8 编码字符表示传递给 sel_registerName 并返回该函数返回的值。因此，请注意，如果选择器不存在，它会被注册并返回新注册的选择器。
> 
> 回想一下，冒号（“:”）是方法名的一部分；setHeight 与 setHeight: 不同。有关方法名称的更多信息，请参阅《Objective-C 编程语言》中的“对象、类和消息传递”。

* * *

```
NSStringFromSelector 
```

返回给定选择器的字符串表示形式。

```
NSString *NSStringFromSelector (
   SEL aSelector
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:58:26.437

正如@Till 所说，您需要使用`NSSelectorFromString()`.

您可以使用以下代码：

```
SEL selector = NSSelectorFromString(myMethod);
if(selector)
{
   [myObject performSelector:selector withObject:self];
} 
```

# unit-testing - 单元测试和集成测试示例

> ID：15067276
> 
> 赞同：2
> 
> 时间：2013-02-25T12:44:16.593
> 
> 标签：unit-testing, integration-testing, database-testing

我在测试 CompanyService 的 findCompany() 方法的测试类中创建了以下四个测试。

```
@Test
public void findCompany_CompanyIdIsZero() {
    exception.expect(IllegalArgumentException.class);
    companyService.findCompany(0);
}
@Test
public void findCompany_CompanyIdIsNegative() {
    exception.expect(IllegalArgumentException.class);
    companyService.findCompany(-100);
}
@Test
public void findCompany_CompanyIdDoesntExistInDatabase() {
    Company storedCompany = companyService.findCompany(100000);
    assertNull(storedCompany1);
}

@Test
public void findCompany_CompanyIdExistsInDatabase() {
    Company company = new Company("FAL", "Falahaar");

    companyService.addCompany(company);

    Company storedCompany1 = companyService.findCompany(company.getId());
    assertNotNull(storedCompany1);
} 
```

我的理解是，前三个是单元测试。他们测试 findCompany() 方法的行为，检查该方法将如何响应不同的输入。第四个测试虽然放在同一个班级，但实际上对我来说似乎是一个集成测试。它要求首先将公司添加到数据库中，以便以后可以找到它。这引入了外部依赖项 - addCompany() 和数据库。

我走对了吗？如果是，那么我应该如何对现有对象进行单元测试？只是模拟服务来“找到”一个？我认为这会扼杀测试的意图。

我很感激这里的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:15:33.050

我是这样看的：你在这里测试的“单元”是`CompanyService`. 从这个意义上说，您的所有测试对我来说都像是单元测试。但是，在您的服务下方，可能还有另一个服务（您提到数据库），此测试也在执行？这可能会开始模糊集成测试的界限，但是您必须问自己是否重要。您*可以*删除任何此类基础服务，并且您可能希望：

1.  底层服务的设置或使用速度很慢，使您的单元测试速度太慢。
2.  您希望确保此测试的行为不受底层服务的影响 - 即此测试仅在`CompanyService`.

以我的经验，只要底层服务足够快，我就不会太担心我的单元测试依赖它。我不介意将一点集成泄漏到我​​的单元测试中，因为它有好处（更多的集成覆盖率）并且很少引起问题。如果它确实引起了问题，您可以随时返回并添加存根以改善隔离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:52:59.320

[1,2,3,4] 可以是基于单元的（模拟 | 不模拟）和基于集成的测试。这取决于你想测试什么。

*   为什么要使用模拟？正如[Jason Sankey](https://stackoverflow.com/users/2098224/jason-sankey)所说...*仅测试服务层而不是底层层*。
*   为什么要使用模拟？你的业务逻辑可以**有最多种形式**。因此，您可以为**一种服务方法**编写**多个测试**，例如。创建人员（无地址 - 异常，无银行账户 - 异常，人员未填写非空属性 - 异常）。

 **你能想象每个测试都请求数据库来测试所有可能的异常状态（没有地址、没有银行账户等）吗？为了测试所有异常状态，填充数据库的工作太多。为什么不使用模拟对象，例如。表现得像不包含预期值的“残缺”对象。每个测试构造自己的“残缺”模拟对象。

模拟各种状态 === 您的测试将尽可能简单，因为每种测试方法将只测试一个状态。这些测试将清晰且易于理解和维护。如果我写一个测试，这是我想要达到的目标之一。**

# c++ - 人脸检测中未处理的异常

> ID：15067280
> 
> 赞同：-3
> 
> 时间：2013-02-25T12:44:32.217
> 
> 标签：c++, opencv, face-detection

我正在使用代码[级联分类器进行人脸检测](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html) （有时也使用其他代码）。但是程序在以下行终止：

```
face_cascade.detectMultiScale(
    frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(30, 30) ); 
```

基本上在 `size(30,30);`. 它给出的错误是“未处理的异常”，更多的是“opencv_objdetectd.dll”。我在互联网上搜索过，但找不到类似的问题或解决方案。我会很感激任何帮助，因为我已经被困了很多天了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:30:02.567

“未处理的异常”永远不会来自 opencv 代码库。

问题可能不是代码，而是其他问题，例如在发布模式下使用调试 dll 或反之，错误的 32/64 位 dll 等等。

我只是不相信你，Size(30,30) 是问题所在。尝试 ：

`face_cascade.detectMultiScale( frame_gray, faces );`//其余的有默认参数

级联检测通常由于以下两个原因之一而失败：

1.  没有找到haar-cascade。检查一下。

    if( ! face_cascade.load("bla.xml") ) { // 错误 }

2.  你的图片无效

    if ( frame_gray.empty() ) { // 错误 }

# java - 遵循哪种设计模式来使代码结构化

> ID：15067281
> 
> 赞同：2
> 
> 时间：2013-02-25T12:44:33.847
> 
> 标签：java, design-patterns

我创建了一个名为“DownloadManagerWrapper”的类，它将根据运行时参数调用。我可以遵循以下代码的任何设计模式以使其干净和结构化。如果可能的话，我可以采用哪种设计模式？需要你的如果可能的话，建议和示例设计模式代码和简单的解释，因为我是设计模式的新手。

```
public class DownloadManagerWrapper {

    public static void main(String[] args) {
    String downloadId = args[0];
    String bankId =args[1];
    String serviceId =args[2];
    readInterfaceConfig(serviceId,bankId,downloadId);
    }

    public static void readInterfaceConfig(String intfCode,String bankId,String downloadId) {

    Connection conn = CRMConnection.getConnection();

    String statusOfDownload;
    DownloadManager dwlManager = new DownloadManager();

    ResultSet rs=null;

    if(downloadId.equals("A"))
    {
    if(intfCode.equals("-1")) //all download
    {
        String query = "select INTF_CODE from CRMUSER.TABLE1 where bank_id ="+"'"+bankId+"'"+"order by INTF_CODE";
        System.out.println("query>"+query);
        try
        {
        Statement st = conn.createStatement();
        rs = st.executeQuery(query);
                while(rs.next())
             {
                    String intfCodeFromDB = rs.getString("INTF_CODE");
                    statusOfDownload = new DownloadManager().downloadDataFromCore(intfCodeFromDB,bankId,downloadId);
             }
        }
        catch(SQLException e)
        {
        e.printStackTrace();
        }
        finally
        {
        try {
            rs.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        }
    }
    else  //specific download
    {
          statusOfDownload = dwlManager.downloadDataFromCore(intfCode,bankId,downloadId);
    }
    }
    else if(downloadId.equals("I"))
    {
           if(intfCode.equals("-1")) //all download
        {
            String query = "select INTF_CODE from CRMUSER.TABLE1 where bank_id ="+"'"+bankId+"'"+"order by INTF_CODE";
            System.out.println("query>"+query);
            try
            {
            Statement st = conn.createStatement();
            rs = st.executeQuery(query);
                    while(rs.next())
                 {
                        String intfCodeFromDB = rs.getString("INTF_CODE");
                        statusOfDownload = new DownloadManager().downloadDataFromCore(intfCodeFromDB,bankId,downloadId);
                 }
            }
            catch(SQLException e)
            {
            e.printStackTrace();
            }
            finally
            {
            try {
                rs.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
            }
        }
        else  //specific download
        {
              statusOfDownload = dwlManager.downloadDataFromCore(intfCode,bankId,downloadId);
        }
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:47:39.877

一些指示：

*   访问数据库应通过[数据访问对象](http://en.wikipedia.org/wiki/Data_access_object)(DAO) 模式

*   如果你有很多 if 语句，你应该看看 [Strategy Pattern](http://wiki.jetbrains.net/intellij/Replace_conditional_logic_with_strategy_pattern)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:39:15.920

如前所述，策略模式可能是一个不错的选择。我注意到你的班级只有一种方法。[这可能是实施命令模式](http://en.wikipedia.org/wiki/Command_pattern)的好机会。

命令模式允许您将功能与需要它的类分开。因此，如果您发现自己经常运行此函数，这确实有助于避免不需要的代码。

# json - HTTPBuilder 设置请求内容类型

> ID：15067284
> 
> 赞同：3
> 
> 时间：2013-02-25T12:44:43.260
> 
> 标签：json, grails, groovy, httpbuilder

我正在使用以下代码对外部系统执行 HTTP POST。问题是外部系统在使用下面的代码时总是得到一个“空”的内容类型。有没有办法在使用 HTTPBuilder 时设置内容类型。

我尝试了其他执行相同请求的工具，但是远程系统获得了一个好的 contentType（'application/json'）。

```
 def execute(String baseUrl, String path, Map requestHeaders=[:], Map query=[:], method = Method.POST) {
    try {
        def http = new HTTPBuilder(baseUrl)
        def result = null

        // perform a ${method} request, expecting TEXT response
        http.request(method, ContentType.JSON) {
            uri.path = path
            uri.query = query

            // add possible headers
            requestHeaders.each { key, value ->
                headers."${key}" = "${value}"
            }

            // response handler for a success response code
            response.success = { resp, reader ->
                result = reader.getText()
            }
        }
        return result
    } catch (groovyx.net.http.HttpResponseException ex) {
        ex.printStackTrace()
        return null
    } catch (java.net.ConnectException ex) {
        ex.printStackTrace()
        return null
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:00:22.307

在请求中添加特定的标头似乎可以解决我的问题。

```
def execute(String baseUrl, String path, Map requestHeaders=[:], Map query=[:], method = Method.POST) {
try {
    def http = new HTTPBuilder(baseUrl)
    def result = null

    // perform a ${method} request, expecting TEXT response
    http.request(method, ContentType.JSON) {
        uri.path = path
        uri.query = query
        headers.'Content-Type' = 'application/json'

        // add possible headers
        requestHeaders.each { key, value ->
            headers."${key}" = "${value}"
        }

        // response handler for a success response code
        response.success = { resp, reader ->
            result = reader.getText()
        }
    }
    return result
} catch (groovyx.net.http.HttpResponseException ex) {
    ex.printStackTrace()
    return null
} catch (java.net.ConnectException ex) {
    ex.printStackTrace()
    return null
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:54:40.307

尝试在请求块的正文中设置[requestContentType ...](http://groovy.codehaus.org/modules/http-builder/doc/post.html)

```
http.request(method, ContentType.JSON) {
            uri.path = path
            uri.query = query
            requestContentType = groovyx.net.http.ContentType.URLENC

     .......
} 
```

# tcp - golang TCPConn.SetWriteDeadline 似乎没有按预期工作

> ID：15067286
> 
> 赞同：5
> 
> 时间：2013-02-25T12:44:46.043
> 
> 标签：tcp, network-programming, go

我试图通过检查 golang [TCPConn.Write](http://golang.org/pkg/net/#TCPConn.Write)返回的错误来检测发送失败，但它为零。我也尝试使用[TCPConn.SetWriteDeadline](http://golang.org/pkg/net/#TCPConn.SetWriteDeadline)没有成功。

事情就是这样发生的：

1.  服务器启动
2.  客户端连接
3.  服务器发送一条消息，客户端接收它
4.  客户端*关闭*
5.  服务器再发送一条消息：没有错误
6.  服务器发送第三条消息：现在才出现错误

**问题**：为什么只有发给不存在客户端的第二条消息会导致错误？案件应如何妥善处理？

代码如下：

```
package main

import (
    "net"
    "os"
    "bufio"
    "fmt"
    "time"
)

func AcceptConnections(listener net.Listener, console <- chan string) {

    msg := ""

    for {

        conn, err := listener.Accept()

        if err != nil {
            panic(err)
        }

        fmt.Printf("client connected\n")

        for {

            if msg == "" {
                msg = <- console
                fmt.Printf("read from console: %s", msg)
            }

            err = conn.SetWriteDeadline(time.Now().Add(time.Second))

            if err != nil {
                fmt.Printf("SetWriteDeadline failed: %v\n", err)
            }

            _, err = conn.Write([]byte(msg))

            if err != nil {
                // expecting an error after sending a message
                // to a non-existing client endpoint
                fmt.Printf("failed sending a message to network: %v\n", err)
                break
            } else {
                fmt.Printf("msg sent: %s", msg)
                msg = ""
            }
        }
    }
}

func ReadConsole(network chan <- string) {

    console := bufio.NewReader(os.Stdin)

    for {

        line, err := console.ReadString('\n')

        if err != nil {

            panic(err)

        } else {

            network <- line
        }
    }
}

func main() {

    listener, err := net.Listen("tcp", "localhost:6666")

    if err != nil {
        panic(err)
    }

    println("listening on " + listener.Addr().String())

    consoleToNetwork := make(chan string)

    go AcceptConnections(listener, consoleToNetwork)

    ReadConsole(consoleToNetwork)
} 
```

服务器控制台如下所示：

```
listening on 127.0.0.1:6666
client connected
hi there!
read from console: hi there!
msg sent: hi there!
this one should fail
read from console: this one should fail
msg sent: this one should fail
this one actually fails
read from console: this one actually fails
failed sending a message to network: write tcp 127.0.0.1:51194: broken pipe 
```

客户端看起来像这样：

```
package main

import (
    "net"
    "os"
    "io"
    //"bufio"
    //"fmt"
)

func cp(dst io.Writer, src io.Reader, errc chan<- error) {

    // -reads from src and writes to dst
    // -blocks until EOF
    // -EOF is not an error
    _, err :=  io.Copy(dst, src)

    // push err to the channel when io.Copy returns
    errc <- err
}

func StartCommunication(conn net.Conn) {

    //create a channel for errors
    errc := make(chan error)

    //read connection and print to console
    go cp(os.Stdout, conn, errc)

    //read user input and write to connection
    go cp(conn, os.Stdin, errc)

    //wait until nil or an error arrives
    err := <- errc

    if err != nil {
        println("cp error: ", err.Error())
    }
}

func main() {

    servAddr := "localhost:6666"

    tcpAddr, err := net.ResolveTCPAddr("tcp", servAddr)

    if err != nil {
        println("ResolveTCPAddr failed:", err.Error())
        os.Exit(1)
    }

    conn, err := net.DialTCP("tcp", nil, tcpAddr)

    if err != nil {
        println("net.DialTCP failed:", err.Error())
        os.Exit(1)
    }

    defer conn.Close()

    StartCommunication(conn)

} 
```

**编辑**：按照 JimB 的建议，我想出了一个工作示例。消息不会再丢失，而是在新连接中重新发送。我不太确定在不同的 go 例程之间使用共享变量（connWrap.IsFaulted）有多安全。

```
package main

import (
    "net"
    "os"
    "bufio"
    "fmt"
)

type Connection struct {
    IsFaulted bool
    Conn net.Conn
}

func StartWritingToNetwork(connWrap * Connection, errChannel chan <- error, msgStack chan string) {

    for {

        msg := <- msgStack

        if connWrap.IsFaulted {

            //put it back for another connection
            msgStack <- msg

            return
        }

        _, err := connWrap.Conn.Write([]byte(msg))

        if err != nil {

            fmt.Printf("failed sending a message to network: %v\n", err)

            connWrap.IsFaulted = true

            msgStack <- msg

            errChannel <- err

            return

        } else {

            fmt.Printf("msg sent: %s", msg)
        }
    }
}

func StartReadingFromNetwork(connWrap * Connection, errChannel chan <- error){

    network := bufio.NewReader(connWrap.Conn)

    for (!connWrap.IsFaulted) {

        line, err := network.ReadString('\n')

        if err != nil {

            fmt.Printf("failed reading from network: %v\n", err)

            connWrap.IsFaulted = true

            errChannel <- err

        } else {

            fmt.Printf("%s", line)
        }
    }
}

func AcceptConnections(listener net.Listener, console chan string) {

    errChannel := make(chan error)

    for {

        conn, err := listener.Accept()

        if err != nil {
            panic(err)
        }

        fmt.Printf("client connected\n")

        connWrap := Connection{false, conn}

        go StartReadingFromNetwork(&connWrap, errChannel)

        go StartWritingToNetwork(&connWrap, errChannel, console)

        //block until an error occurs
        <- errChannel
    }
}

func ReadConsole(network chan <- string) {

    console := bufio.NewReader(os.Stdin)

    for {

        line, err := console.ReadString('\n')

        if err != nil {

            panic(err)

        } else {

            network <- line
        }
    }
}

func main() {

    listener, err := net.Listen("tcp", "localhost:6666")

    if err != nil {
        panic(err)
    }

    println("listening on " + listener.Addr().String())

    consoleToNetwork := make(chan string)

    go AcceptConnections(listener, consoleToNetwork)

    ReadConsole(consoleToNetwork)
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T16:26:12.907

这不是 Go 特定的，并且是底层 TCP 套接字显示出来的工件。

TCP 终止步骤的体面图在此页面的底部： [http ://www.tcpipguide.com/free/t_TCPConnectionTermination-2.htm](http://www.tcpipguide.com/free/t_TCPConnectionTermination-2.htm)

简单的版本是当客户端关闭其套接字时，它发送一个 FIN，并从服务器接收一个 ACK​​。然后它等待服务器做同样的事情。但是，您不是发送 FIN，而是发送更多数据，这些数据被丢弃，并且客户端套接字现在假定来自您的任何更多数据都是无效的，因此下次发送时您会得到一个 RST，这就是冒泡进入你看到的错误。

回到你的程序，你需要以某种方式处理这个问题。通常你可以想到谁负责发起发送，谁也负责发起终止，因此你的服务器应该假设它可以继续发送直到*它*关闭连接或遇到错误。如果您需要更可靠地检测客户端关闭，则需要在协议中有某种客户端响应。这样就可以在套接字上调用 recv 并返回 0，这会提醒您连接已关闭。

在 go 中，这将从连接的 Read 方法（或在您的情况下从 Copy 中）返回 EOF 错误。SetWriteDeadline 不起作用，因为一个小的写入会继续并被静默删除，或者客户端最终会以 RST 响应，给您一个错误。

# html - 使用 data-role="page"> 在同一页面上显示/替换现有 DIV 标记中的另一个 DIV

> ID：15067294
> 
> 赞同：0
> 
> 时间：2013-02-25T12:45:12.967
> 
> 标签：html, jquery-mobile, android-emulator

**需要：**使用 data-role="page"> 在同一页面上显示/替换现有 DIV 标记中的另一个 DIV

**问题**：使用隐藏/显示方法显示下一页 reg button(click)=>reg DIV content> 但 Reg DIV Content 仅显示 2 秒，然后应用程序退出并进入主模拟器中的菜单。

**Code_STRUCTURE**：（如下所述）

```
 <div id="page" data-role="page">
     <div id="header" data-role="header">
     </div>
     <div id="content" data-role="content">
        <div id="log_in"> <!-- 1st content <div> -->
        </div>
        <!-- need to replace -->
        <div id="reg"> <!-- 2nd content <div> -->
        </div>

        <!-- other <Div> with same procedure-->
     </div> <!-- content END -->
     <div id="footer" data-role="footer">
     </div>
  </div> <!-- page -->

 // in J query call
 // to show reg content then call
 $('#log_in').hide(); // or also tried as $('#log_in').css('display','none');
 $('#reg').show();   // or also tried as $('#reg').css('display','block'); 
```

**平台** ：Android **编译于**：Eclipse Emulator

如果有人有答案，请留言！如果您愿意提供更多建议并且知识渊博。感谢您访问这篇文章！

编辑：（我的旧代码）

```
 <div id="page" data-role="page">
 <div id="header" data-role="header">
 </div>
 <div id="content" data-role="content">
    <div id="log_in"> <!-- 1st content <div> -->
      <form>
         <input><!-- something goes here-->
         <button id="login">Login</button>
         <button id="reg">Register</button>
      **</form>**
    </div>
    <!-- need to replace -->
    <div id="reg"> <!-- 2nd content <div> -->
    </div>

    <!-- other <Div> with same procedure-->
 </div> <!-- content END -->
 <div id="footer" data-role="footer">
 </div> 
```

（更正的代码）：

```
 <div id="page" data-role="page">
 <div id="header" data-role="header">
 </div>
 <div id="content" data-role="content">
    <div id="log_in"> <!-- 1st content <div> -->
      <form>
         <input><!-- something goes here-->
      **</form>**

         <button id="login">Login</button>
         <button id="reg">Register</button>
              </div>
    <!-- need to replace -->
    <div id="reg"> <!-- 2nd content <div> -->
    </div>

    <!-- other <Div> with same procedure-->
 </div> <!-- content END -->
 <div id="footer" data-role="footer">
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:49:42.467

问题肯定出在您的 js 代码上。

您应该能够成功使用 jQuery `show()`/`hide()`和`display: none;`.

**[这是工作示例](http://jsfiddle.net/LwVzF/)**

# asp.net - 在控制器中调用私有方法返回空值

> ID：15067295
> 
> 赞同：1
> 
> 时间：2013-02-25T12:45:15.300
> 
> 标签：asp.net, asp.net-mvc-3

我正在尝试删除帖子，但是每当我删除帖子时，它的标签都不会被删除。我正在使用断点来查看事情是如何发生的，并且我注意到 GetPost 在调用时不包含该标记。在下面的代码中，您可以看到我正在尝试在 delete 方法中插入/调用标记，但似乎无法调用它。

**我在控制器中的删除**

```
 public ActionResult Delete(int id)
        {
            if (IsUser)
            {
                Post post = GetPost(id);
                var tagss = db.Tags.Where(tg => tg.ID == id); // this should call GetTag but i dunno how :(
                foreach (var t in tagss)
                {
                    db.Tags.DeleteObject(t);
                }

                db.DeleteObject(post);
                db.SaveChanges();                   
            }
            return Redirect(Request.UrlReferrer.ToString());
        } 
```

**获取邮政**

```
 private Post GetPost(int? id)
        {
            return id.HasValue ? db.Posts.Where(x => x.ID == id).First() : new Post() { ID = -1 };           
        } 
```

**获取标签**

```
private Tag GetTag(string tagName)
        {
            return db.Tags.Where(x => x.Name == tagName).FirstOrDefault() ?? new Tag() { Name = tagName };
        } 
```

**问题：**
我试图在删除功能中包含标签，这样每当我删除我的帖子时，它也会被删除，但我不知道如何调用它。请帮助我，谢谢，对不起，我不擅长查询。:(

**更新：**

```
public ActionResult Delete(int id)
        {
            if (IsUser)
            {
                Post post = GetPost(id);
                var tagss = var taggs = post.Tags;
                foreach (var t in tagss)
                {
                    db.Tags.DeleteObject(t);
                }

                db.DeleteObject(post);
                db.SaveChanges();                   
            }
            return Redirect(Request.UrlReferrer.ToString());
        } 
```

我现在可以调用标签列表，但仍然无法在我的帖子中删除它。这给了我一个错误**集合已修改；枚举操作可能无法执行。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:38:36.573

好的，我现在可以删除我刚刚添加的标签 .ToList 并且错误消失了。这是我的工作。

```
 public ActionResult Delete(int id)
        {
            if (IsUser)
            {
                Post post = GetPost(id);
                var taggs = post.Tags;
                foreach (var t in tagss.ToList())
                {
                    db.Tags.DeleteObject(t);
                }

                db.DeleteObject(post);
                db.SaveChanges();                   
            }
            return Redirect(Request.UrlReferrer.ToString());
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:56:19.790

如果我正确理解您的问题，您可以修改您的 Post 类以包含一个名为“Tags”的属性，它是您的 Tag 类的集合并包含该帖子的所有标签名称，那么您可以执行类似的操作来获取标签对于该帖子，然后将其删除。

```
Post post = GetPost(id);
var tagss = post.Tags; 
```

# c# - 在 IIS 上运行的 ASP 站点中执行 schtasks

> ID：15067300
> 
> 赞同：1
> 
> 时间：2013-02-25T12:45:30.993
> 
> 标签：c#, iis, windows-task-scheduler

我有一个在 IIS 上运行的站点。我需要从站点运行 schtasks.exe。我尝试了以下

```
Process proc = new Process();
ProcessStartInfo startInfo = new ProcessStartInfo();
proc.StartInfo.UseShellExecute = false;
proc.StartInfo.FileName = @"C:\Windows\System32\schtasks.exe";
proc.StartInfo.Arguments = "/create /tn mylbat /tr MYLExe.exe /s xxx /u xxx\xxx /p xxx /sc daily;
proc.StartInfo.RedirectStandardError = true;
proc.StartInfo.RedirectStandardOutput = true;
proc.StartInfo.CreateNoWindow = false;
proc.StartInfo.WindowStyle = ProcessWindowStyle.Maximized;
proc.Start();
proc.WaitForExit(); 
```

在 cmd 上执行的命令工作正常，但是当我尝试在 IIS 上运行的网站上执行它时，没有添加任何任务。并且它还可以在未托管在 IIS 上的站点上工作。

**编辑 I：**它在站点的应用程序池标识设置为 LocalSystem 时工作，但我需要它作为网络服务工作。

什么不见​​了！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:33:27.377

不是 /u 和 /p 将被使用。从远程机器访问时，它应该指定 /ru 和 /rp 并且它们应该属于具有管理员权限的用户。命令如下：

```
 startInfo.UseShellExecute = false;
            startInfo.WorkingDirectory = @"C:\Windows\System32";
            startInfo.FileName = @"C:\Windows\System32\schtasks.exe";
            startInfo.Arguments = "/create /tn <taskname> /tr <theEXE> /ru <user> /rp <password> /sc daily ";
            startInfo.RedirectStandardError = true;
            startInfo.RedirectStandardOutput = true;
            startInfo.CreateNoWindow = false;
            startInfo.WindowStyle = ProcessWindowStyle.Hidden;
            proc = Process.Start(startInfo); 
```

# android - 在错误的位置叠加绘图

> ID：15067305
> 
> 赞同：1
> 
> 时间：2013-02-25T12:45:56.223
> 
> 标签：android, android-mapview, itemizedoverlay

我以前也问过类似的问题，我知道。但这有点不同。

这是这张图片： ![截图](../Images/94540af4349dd8159c80ddbd4940ae02.png)

现在，您会看到自定义标记被绘制到原始地理点的右侧。我尝试尝试使用该位置，但无法修复它。

该图钉是在 Photoshop 中创建的自定义图像。是否有任何需要遵循的特定准则？我很困惑。它之前很远，所以我使用以下代码行（在`CustomOverlay`构造函数中）将它移近，但它仍然关闭：

```
defaultMarker.setBounds(0, -defaultMarker.getIntrinsicHeight(), defaultMarker.getIntrinsicWidth(), 0); 
```

# c++ - libstdc++ 在 ubuntu 64 位中崩溃

> ID：15067308
> 
> 赞同：0
> 
> 时间：2013-02-25T12:46:02.847
> 
> 标签：c++, linux

我有几个从 RHEL6.2 系统 64 位机器编译的 GUI 库。我的任务是在 Ubuntu 64 位机器上运行它.. 所以我在 Ubuntu 12.04.1 和 Ubuntu 11.04 中都尝试过它，我都面临着类似的问题..

> 分段错误（核心转储） ***分段错误
> 
> 回溯：/usr/lib/x86_64-linux-gnu/libstdc++.so.6(_ZNSsC1ERKSs+0xb)[0x7f14e2728f2b]

```
Program received signal SIGSEGV, Segmentation fault.
0x00007ffff5070f2b in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::string const&) ()
from /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (gdb) bt
#0  0x00007ffff5070f2b in std::basic_string<char, std::char_traits<char>, std::allocator<char> > >::basic_string(std::string const&) ()    from /usr/lib/x86_64-linux-gnu/libstdc++.so.6 
```

我无法将它编译到我的电脑上，因为我没有源代码。只有他们给我的图书馆..谁能帮我解决这个问题..

G++ 版本 **g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3**

请帮助我..提前谢谢//

* * *

谢谢回复 ..

是的，我交叉检查了两个 gcc 版本

这是我的主机电脑，我可以在其中运行我的应用程序

```
 gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
    Copyright (C) 2011 Free Software Foundation, Inc.
    This is free software; see the source for copying conditions.  There is NO
    warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

     ls -ld /usr/lib/x86_64-linux-gnu/libstdc++.so.6
    lrwxrwxrwx 1 root root 19 Apr 16  2012 /usr/lib/x86_64-linux-gnu/libstdc++.so.6 -> libstdc++.so.6.0.16 
```

和我试图运行但不工作的电脑是

```
gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

ls -ld  /usr/lib/x86_64-linux-gnu/libstdc++.so.6
lrwxrwxrwx 1 root root 19 Apr 16  2012 /usr/lib/x86_64-linux-gnu/libstdc++.so.6 -> libstdc++.so.6.0.16 
```

两者都是精确的 Ubuntu 12.04

我无法确定我的错在哪里。.

请帮忙 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:06:04.203

Ubuntu 12.04 和 11.04 都使用比 RHEL6.2 更新得多的库。检查标准库的版本。我敢打赌他们是不同的。

一般来说，您不能只拿起一个二进制文件（程序或库）并在另一个上运行它。如果你有一个 .rpm 或 .deb 包，你会看到应该有版本依赖关系。

您还可以使用 ldd 查看您的库所依赖的其他库。

# windows-8 - ListViewItem 不会拉伸到 ListView 的宽度

> ID：15067309
> 
> 赞同：85
> 
> 时间：2013-02-25T12:46:03.247
> 
> 标签：windows-8, winrt-xaml, listviewitem

我目前正在使用 XAML 设计一个 Windows 8 商店应用程序，但我有一个小问题。我有一个带有 DataTemple 的 ListView。

我的 ListView & DataTemplate 的代码如下：

```
<ListView x:Name="listPageItems"
          Grid.Row="1"
          SelectionMode="Extended"
          IsSwipeEnabled="False"
          ItemsSource="{Binding Mode=OneWay, Source={StaticResource items}}"
          ItemTemplate="{StaticResource NavigationItemTemplate}"
          ScrollViewer.VerticalScrollBarVisibility="Visible">

</ListView>

<DataTemplate x:Key="NavigationItemTemplate">    
        <Grid Height="75">
            <Grid.RowDefinitions>
                <RowDefinition Height="1.6*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Rectangle Fill="White" />
            <Rectangle Fill="{StaticResource SSEGreenBrush}"
                       Grid.Row="1" />
            <Border BorderThickness="2"
                    BorderBrush="{StaticResource SSEGreenBrush}"
                    Grid.RowSpan="2" />
            <TextBlock x:Name="textTitle"
                       Text="{Binding ClientName}"
                       Style="{StaticResource TitleTextStyle}"
                       Foreground="{StaticResource SSEBlueBrush}"
                       Margin="10,5,5,5" />
            <StackPanel Orientation="Horizontal"
                        Grid.Row="1"
                        HorizontalAlignment="Stretch">
                <TextBlock Text="Last Edit :"
                           Style="{StaticResource SubtitleTextStyle}"
                           Foreground="{StaticResource SSEBlueBrush}"
                           Margin="3,0,0,3"
                           VerticalAlignment="Center" />
                <TextBlock Text="SurveyDate"
                           Style="{StaticResource SubtitleTextStyle}"
                           Foreground="{StaticResource SSEBlueBrush}"
                           Margin="3,0,0,3"
                           VerticalAlignment="Center" />
            </StackPanel>
        </Grid>
    </DataTemplate> 
```

列表视图位于固定宽度为 240 的网格列中。

当视图显示时，ListViewItems 不会拉伸到 ListView 的宽度。我已经尝试设置许多属性，包括 Horizo​​ntalContentAlignment，但我似乎无法让 ListViewItem 伸展！

有人可以帮忙吗？

提前致谢。

我正在使用 Visual Studio 2012、C# 4.5 并开发 Windows 商店应用程序。

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2013-02-25T15:21:34.927

尝试将以下内容添加到您的 ListView 定义中

```
<ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    </Style>
</ListView.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-23T14:56:54.377

最简单的事情就是添加 `HorizontalContentAlignment="Stretch"`到 ListView。通常不需要更多的东西。

# google-chrome - 当用户单击图标时打开一个新选项卡

> ID：15067312
> 
> 赞同：1
> 
> 时间：2013-02-25T12:46:12.980
> 
> 标签：google-chrome, google-chrome-extension

我是谷歌扩展的新手..

我想要在我的扩展程序中做的是在页面的某处显示一个图标（不在地址部分或工具栏中，而是在页面的左侧中心）。

当用户点击图标时，新窗口应该打开特定的 url。

我已经通过在工具栏中放置图标来创建相同的功能，它工作正常。但我想将图标显示在页面的左侧中心。

然后我尝试通过向 document.body 添加元素来在页面的左侧中心显示一个图标。这有助于我显示图标但无法调用浏览器操作或在其上创建新选项卡..

有什么建议吗？？

谢谢，
马赫什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T19:07:26.133

我只是将评论作为答案...

在锚标签上使用`target="_blank"`对我有用

`<a href="http://www.google.com" target="_blank"><img src="icon.png" /></a>`

# facebook - 网站上使用的 Facebook 应用程序

> ID：15067313
> 
> 赞同：0
> 
> 时间：2013-02-25T12:46:13.597
> 
> 标签：facebook

我有一个 Facebook 应用程序。这个应用程序是一个“使用 Facebook 登录的网站”。但是，我需要在多个 URL 中使用它。一种用于开发，一种用于测试，一种用于生产。我的网址如下所示：

```
Dev - http://localhost:[dynamicPortNumber]
Test - http://mysite.azurewebsites.net
Prod - http://www.mysite.com 
```

不幸的是，我无法弄清楚如何允许多个 URL 与这个应用程序相关联，以便我可以进行端到端测试。有人可以向我解释如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:59:27.613

遗憾的是，没有办法使用一个 Facebook App ID 来处理用于开发、测试和生产的不同 URL 的问题，您必须为每个案例创建 3 个不同的 App ID 并在不同的地方使用它们。
您还可以查看[Heroku 上的 Facebook 应用程序入门，](https://devcenter.heroku.com/articles/facebook#working-locally)该应用程序具有相同的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:04:10.427

如果您使用多个顶级域，则处理此问题的唯一方法是为每个实例（开发/测试/产品）创建新的应用程序 ID。

但是，如果您有自由，在同一个顶级域中使用多个子域将获得您想要的结果。例如：

*   开发：dev.mysite.com
*   测试：test.mysite.com
*   产品：www.mysite.com

这将允许您在所有域中使用相同的 Facebook 应用程序 ID，只要您使用“mysite.com”作为应用程序域。

不要忘记在“使用 facebook 登录的网站”部分的“网站 URL”框中添加您网站的 URL！

注意：过去，我必须在应用程序的应用程序域框中添加每个单独的子域才能使其正常运行，但通常是因为我在其他地方犯了错误。

# c++ - 尝试打印向量时 lldb 断言失败

> ID：15067314
> 
> 赞同：0
> 
> 时间：2013-02-25T12:46:14.827
> 
> 标签：c++, clang, lldb

我得到错误

> > lldb: /home/hannes/.llvm/llvm/tools/clang/lib/AST/RecordLayoutBuilder.cpp:2271: uint64_t ::RecordLayoutBuilder::updateExternalFieldOffset(const clang::FieldDecl *, uint64_t): 断言`ExternalFieldOffsets.find( Field) != ExternalFieldOffsets.end() && "Field does not have an external offset"' 失败。中止（核心转储）

当我尝试打印`vector<string>`. 有谁知道为什么会发生这种情况，以及如何解决？等效的在 gdb 中工作得很好（有很多原因我宁愿使用/*必须*使用 lldb 而不是 gdb）。

我正在运行带有 llvm、clang 和 lldb 主干的 Ubuntu 12.10。

程序、构建指令和 lldb 命令序列：

```
#include <iostream>
#include <algorithm>
#include <vector>
#include <string>

using std::for_each;
using std::begin;
using std::end;

int main() {
    std::vector<std::string> vec{"Hello","World","!"};
    for_each(begin(vec),end(vec),[](const std::string& s) {
    std::cout << s << " ";
      });
    std::cout << std::endl;
    return 0;
} 
```

* * *

```
clang++ -g -c -std=c++11 main.cpp
clang++ -std=c++11 main.o -o test 
```

* * *

```
lldb test 
Current executable set to 'test' (x86_64).
(lldb) break -n main
invalid command 'breakpoint -n'
(lldb) breat set -n main
error: 'breat' is not a valid command.
(lldb) break set -n main
Breakpoint 1: where = test`main + 26 at main.cpp:5, address = 0x0000000000400aea
(lldb) run
Process 24489 launched: '/home/hannes/Documents/Programming/CXX/test/test' (x86_64)
Process 24489 stopped
* thread #1: tid = 0x5fa9, 0x0000000000400aea test`main + 26 at main.cpp:5, stop reason = breakpoint 1.1
    frame #0: 0x0000000000400aea test`main + 26 at main.cpp:5
   2    #include <string>
   3    
   4    int main() {
-> 5        std::vector<std::string> vec{"Hello","World","!"};
   6        return 0;
   7    }
n
Process 24489 stopped
* thread #1: tid = 0x5fa9, 0x0000000000400c72 test`main + 418 at main.cpp:6, stop reason = step over
    frame #0: 0x0000000000400c72 test`main + 418 at main.cpp:6
   3    
   4    int main() {
   5        std::vector<std::string> vec{"Hello","World","!"};
-> 6        return 0;
   7    }
frame variable
lldb: /home/hannes/.llvm/llvm/tools/clang/lib/AST/RecordLayoutBuilder.cpp:2271: uint64_t <anonymous namespace>::RecordLayoutBuilder::updateExternalFieldOffset(const clang::FieldDecl *, uint64_t): Assertion `ExternalFieldOffsets.find(Field) != ExternalFieldOffsets.end() && "Field does not have an external offset"' failed.
Aborted (core dumped) 
```

调试级别 10 的日志输出：

```
Logging from function (<frame object at 0x3172f20>, '/usr/lib/python2.7/dist-packages/lldb/formatters/cpp/gnu_libstdcpp.py', 141, '__init__', ['\t\tlogger = lldb.formatters.Logger.Logger()\n'], 0)
Providing synthetic children for a map named vec
Logging from function (<frame object at 0x3170d10>, '/usr/lib/python2.7/dist-packages/lldb/formatters/cpp/gnu_libstdcpp.py', 214, 'update', ['\t\tlogger = lldb.formatters.Logger.Logger()\n'], 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:55:29.043

如果你说帧变量--raw，会发生同样的事情吗？此命令旨在转储您的矢量禁用数据格式化程序。在特定情况下，您将获得（假设没有崩溃）向量的内存布局，而不是您存储在那里的字符串的打印输出。我主要是想弄清楚数据格式化程序是否参与了这个问题。

# php - 取消 PHP 脚本

> ID：15067321
> 
> 赞同：0
> 
> 时间：2013-02-25T12:46:40.513
> 
> 标签：php, android

从 Android 应用程序中，该应用程序将查询 php 脚本并在 MySQL 数据库中查找新消息。
为了防止对数据的无意义使用，我实现了一个'if'语句，以检查数据库中的消息是否为空。如果消息为空，则不应响应 Android 应用程序。

我的问题和 php 代码：
未检测到 if 语句，它不断返回数据：

```
 <?php
 if($_REQUEST['pass'] == null){
     die("You Are Not Logged In");
 }

 $q=mysql_query("SELECT * FROM $tbl_name WHERE pass='".$_REQUEST['pass']."'");
 while($e=mysql_fetch_assoc($q)){
    $result1=$e['message'];

    ////Here the Message = 'No Message' but the Scrpit Continue ...

    if($result1 == 'No Message'){
       exit(0);
       die("No Message");
    }
    $output[]=$e;

    print(json_encode($output));

 }   

 if($_REQUEST['status'] != null){
     $sq2="UPDATE $tbl_name SET status='".$_REQUEST['status']."' WHERE  pass='".$_REQUEST['pass']."'";
 $result=mysql_query($sq2);
 }
 mysql_close();

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:53:02.610

您的查询不会返回任何内容，并且会`mysql_fetch_assoc`立即返回 false，从而跳过整个块。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T12:58:32.310

谢谢大家，问题通过使用解决

```
 if($result1 == ' '){
  exit(0);
  die("No Message");} 
```

Logcat 说：message = null & 解析 Json 数据时出错，关于 SQL 注入，请注意...

# grails - Groovy 脚本 - Logback 配置意外行为

> ID：15067324
> 
> 赞同：1
> 
> 时间：2013-02-25T12:46:49.447
> 
> 标签：grails, groovy, logback

我想`Logback`在 Grails 中用作我的日志记录框架。因此，我将所有东西都设置好了，但我的实现在配置文件本身上失败了。正如我猜想的那样，原因是在 Groovy Script 的范围内，但我无法弄清楚......

如果我在没有任何标识符的情况下定义我的`String`属性，我会收到一个警告，说它可能无法访问。例如：

```
LOG_DIR = 'c:/temp/myproject/logs/'
BACKUP_DIR = LOG_DIR + 'backup/'

appender('F_MAIN', RollingFileAppender) {
  file = LOG_DIR + 'test.log'
  rollingPolicy(FixedWindowRollingPolicy) {
    fileNamePattern = BACKUP_DIR + 'test.%d{yyyy-MM-dd}.%i.log.zip'
    // .... and so on
  }
} 
```

我从 Logback 收到以下错误消息，我很确定这表明两者`LOG_DIR`都`BACKUP_DIR`无法访问：

```
13:33:32,036 |-ERROR in ch.qos.logback.classic.gaffer.AppenderDelegate@6fd00b - Appender [F_MAIN] of type [ch.qos.logback.core.rolling.RollingFileAppender] has no appplicable [LOG_DIR] property 
13:33:32,068 |-ERROR in ch.qos.logback.classic.gaffer.ComponentDelegate@788ac3 - Component  of type [ch.qos.logback.core.rolling.FixedWindowRollingPolicy] has no appplicable [BACKUP_DIR] property 
```

我还通过使用标签声明两个变量来尝试以下方法`@Field`，但它仍然不起作用：

```
@Field String LOG_DIR = 'c:/temp/myproject/logs/'
@Field String BACKUP_DIR = LOG_DIR + 'backup/'

appender('F_MAIN', RollingFileAppender) {
  file = LOG_DIR + 'test.log'
  rollingPolicy(FixedWindowRollingPolicy) {
    fileNamePattern = BACKUP_DIR + 'test.%d{yyyy-MM-dd}.%i.log.zip'
    // .... and so on
  }
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:11:04.433

天啊！经过搜索和大量试验/错误后，我找到了解决方案，它非常接近，现在看起来很明显：我必须用 声明这两个变量`def`，所以现在它们在整个脚本中都是可见的；）

例如，这是工作代码：

```
def LOG_DIR = 'c:/temp/myproject/logs/'
def BACKUP_DIR = LOG_DIR + 'backup/'

appender('F_MAIN', RollingFileAppender) {
  file = LOG_DIR + 'test.log'
  rollingPolicy(FixedWindowRollingPolicy) {
    fileNamePattern = BACKUP_DIR + 'test.%d{yyyy-MM-dd}.%i.log.zip'
    // .... and so on
  }
} 
```

现在，我还可以在我的脚本中使用这样的函数：

```
def createFilename(String directory, String name, boolean isBackupFile) {
  String filename = ''
  if(isBackupFile) {
    filename = "${directory}backup/MyProject-${name}.%d{yyyy-MM-dd}.%i.log.zip"
  } else {
    filename = "${directory}MyProject-${name}.log"
  }
  return filename
}

def fileAppenderLog = createFilename(LOG_DIR, 'output', false)
def fileAppenderLogBackup = createFilename(LOG_DIR, 'output', true)

appender('F_MAIN', RollingFileAppender) {
  file = fileAppenderLog
  rollingPoliciy(FixedWindowRollingPolicy) {
    fileNamePattern = fileAppenderLogBackup
    // .... and so on
  }
} 
```

我认为这非常有用:)，特别是如果你想声明一堆不同的日志文件，即使你想声明在 Logback 重新扫描这个文件时创建的临时日志文件......

# php - 使用 javascript 设置会话变量

> ID：15067335
> 
> 赞同：4
> 
> 时间：2013-02-25T12:47:34.943
> 
> 标签：php, javascript, session-variables

```
 <script type="text/javascript">
    function checkQuery()
    {
      var val = form1.proDown.options[form1.proDown.options.selectedIndex].value;
      var txt = form1.proDown.options[form1.proDown.options.selectedIndex].text;
      //alert(val+' | '+txt);
      <?php $_SESSION['value1']= ?> = txt; <?php ; ?>
     }
   </script> 
```

我有这个代码，但它不起作用？任何人都有将 javascript 变量访问到 $_SESSION[] 的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T06:54:08.847

我认为您应该使用 xhr(Ajax) 将数据存储到 php 会话中。以下是执行此操作的简单示例

```
 jQuery.ajax({
        url: 'storesession.php',
        type: 'POST',
        data: {
            txt: txt,
        },
        dataType : 'json',
        success: function(data, textStatus, xhr) {
            console.log(data); // do with data e.g success message
        },
        error: function(xhr, textStatus, errorThrown) {
            console.log(textStatus.reponseText);
        }
    }); 
```

storesession.php

```
$_SESSION['value1'] = $_POST['txt']; 
```

# multithreading - 如何 mmap() 一个队列？

> ID：15067339
> 
> 赞同：0
> 
> 时间：2013-02-25T12:47:50.480
> 
> 标签：multithreading, process, queue, malloc, mmap

我有以下问题：

我创建了一个队列。添加元素（malloc）由 main() 函数完成，我创建了一个线程，它将处理元素/数据并释放它们。这是一个持续的过程，它将一直持续到我终止该过程为止。

现在，如果我终止进程，队列中的数据将会丢失，所以我正在考虑在其上实现 mmap()。这样队列也存储在常规文件中，当我重新启动进程时，数据将重新加载到内存中以供线程进一步处理......

由于我正在 malloc'ing 和 free'ing 内存，我想 mmapped 文件大小会不断增加或减少。

现在这可以实施还是我应该考虑其他选择？？？

谢谢。

EDIT1：我可以使用 lseek 或 ftruncate() 来调整文件大小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:59:37.140

您当然可以将队列（或任何其他数据结构）放入`mmap()`ed 内存而不是堆内存，但您会遇到几个必须克服的问题：

*   `mmap()`您将必须自己在与 ed 文件对应的内存块中进行所有内存管理。除非您的队列数据结构是一个单一的内存块，否则它可能具有可以创建、删除和重定位的节点和指针。使用堆内存，您可以将分配和释放小块内存的任务委托给`malloc()`和`free()`，包括重用已释放的内存以供数据结构中的新节点使用。在您的`mmap()`ed 文件中，您必须自己完成所有这些操作。

*   您将无法在`mmap()`ed 内存块中使用指针，只能从块的开头偏移。这是因为如果块在另一个进程中被分离并重新附加，它可能不会位于相同的内存地址。由于数据结构访问是使用指针完成的，因此您将通过添加或减去`mmap()`块的基地址来不断地将偏移量转换为指针并返回。

*   如果您希望能够在第一个进程被杀死后通过在另一个进程中重新附加块来恢复，您必须为第一个进程在关键部分中间被杀死而一个或多个不变量的情况做好准备暂时违反了数据结构。换句话说，您可能正在重新附加损坏的不一致数据结构。为了完全正确地支持这一点，您必须非常小心在数据结构上执行的各种突变。

总而言之，我给你的建议是不值得。您应该使用基于堆内存的快速、高效且易于使用的数据结构，并偶尔将序列化的快照保存到常规文件中。如果您必须接收，请从上次已知的良好快照中恢复。

# c# - 即使我知道参数正在返回数据，c#adapter.fill 数据集也不能与存储过程一起使用？

> ID：15067342
> 
> 赞同：0
> 
> 时间：2013-02-25T12:47:58.977
> 
> 标签：c#, sql-server, stored-procedures, ado.net, sqlclient

我有一个最奇怪的问题。以下大部分时间都有效，但是“偶尔”它无法返回数据，即使我已经为 adapter.fill 语句设置了一个断点，检查了参数并通过 SQL Management Studio 执行它们，它肯定会返回数据： )

所以这是一个标准的 c# SQL 客户端调用：

```
SqlCommand command = new SqlCommand();
command.CommandType = CommandType.StoredProcedure;
command.Connection = connection; 
```

**连接**肯定可以正常打开并使用，因为它也正在通过另一个调用使用..实际上后续调用也可以工作..但是，在我的情况下，以下“有时”再次失败：

```
command.CommandText = "myprocname";
command.Parameters.AddWithValue("@param1", param1value);
command.Parameters.AddWithValue("@param2", param2value);
command.Parameters.AddWithValue("@param3", param3value);
command.Parameters.AddWithValue("@param4", param4value); 
```

然后填充数据集：

```
DataSet ds = new DataSet();
using (SqlDataAdapter adapter = new SqlDataAdapter(command))
{
    adapter.Fill(ds);
}
command.Dispose(); 
```

所以真的没有什么奇怪的事情发生，上面的方法大部分时间都有效..有时它没有返回我所期望的，并在adapter.fill语句之前放置一个断点，检查命令文本和每个参数/values正在传递..打开sql management studio，使用这些参数运行proc，果然返回了预期的数据。

过程非常简单，而且大部分时间再次返回数据......

无论如何我都不能对proc进行故障处理，但是这让我发疯了，因为我检查了连接超时、执行时间等等。我想最疯狂的是proc名称和参数都是正确的（没有额外的参数意外通过等）..并手动运行，它返回数据..但通过填充语句似乎不是（但只是偶尔！）。

非常感谢对这种疯狂的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:58:30.553

解决：好吧好吧..最奇怪的错误，一个真正让我失望的错误。

在发布这个问题时我没有提到，我正在使用 RDLC/Reportviewer 控件在一组仪表板图表中显示数据.. 即您可以选择一个图表段（例如饼图切片）来深入研究该数据..图表数据是“预先分组的”，即这些图表的过程不包含详细信息，以便快速显示仪表板..

无论如何，我离题了，因为我有一些“坏数据”.. 有空日期的好数据，而短篇故事版本是 reportview 图表中的分组以某种方式导致所选数据“有时”不正确.. 如传递的参数看起来/看起来不错，但有时它们不是..

所以最终结果是（无论如何我已经计划好了）是在我的过程中添加检查“日期不为空”等。但是用“使用”语句包装命令对象等也没有害处！非常感谢所有的回复！

# python - 这是 Python 继承中的错误吗？

> ID：15067343
> 
> 赞同：1
> 
> 时间：2013-02-25T12:48:07.890
> 
> 标签：python, inheritance, language-features

我不确定这段代码的输出是正确的还是错误的：

```
class F:
  """An abstract class"""
  list_of_secrets = []
  def __init__(self):
    pass

  def getSecret(self):
    return self.list_of_secrets

class F_None(F):
  pass

class F_Some(F):
  def __init__(self):
    self.list_of_secrets.append("secret value!")

x = F_Some()
print "x:",x.getSecret()

y = F_None()
print "y:",y.getSecret() 
```

使用 python 2.7.3 的输出：

`x: ['secret value!']`

`y: ['secret value!']`

我认为它应该输出：

`x: ['secret value!']`

`y: []`

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:50:00.697

`list_of_secrets`范围仅限于此处的类。你想把它附加`self`到`__init__`

```
 def __init__(self):
      self.list_of_secrets = [] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:50:10.463

你从不定义`self.list_of_secrets`. 您只定义`F.list_of_secrets`，这是完全不同的。改为这样做：

```
class F:
  """An abstract class"""
  def __init__(self):
    self.list_of_secrets = []

  def getSecret(self):
    return self.list_of_secrets 
```

# c++ - C++ 函数指针与子类

> ID：15067350
> 
> 赞同：4
> 
> 时间：2013-02-25T12:48:29.340
> 
> 标签：c++

我可以在函数指针和子类对象之间进行选择。为了清楚起见，假设我必须通知某个对象某些动作（例如计时器）；参考以下两个选择（演示目的的非常基本的代码）：

**版本 1**

```
typedef void TimerCallback(void *args);
class Timer{
public:
  Timer();
  ~Timer();
  void schedule(TimerCallback *callback, void *args, long timeout)=0;
  void cancel();
}; 
```

**版本 2**

```
class TimerTask{
  public:
    TimerTask();
    virtual ~TimerTask();
    void timedout()=0;
};
class Timer{
  public:
    Timer();
    virtual ~Timer();
    void schedule(TimerTask *callback, long timeout)=0;
    void cancel();
}; 
```

哪一种是标准的 C++ 方式，哪一种是高效的？如果您在这方面有任何其他建议，请告诉我。

如果我在这方面不清楚，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T12:53:55.223

我会说[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)和[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)。那么，如果你想使用继承类、独立函数、成员函数或[lambdas](http://en.cppreference.com/w/cpp/language/lambda)都没关系。

* * *

顺便说一句，如果有人好奇，我前段时间做了一个简单的计时器事件处理，作为另一个问题的答案。它展示了例如`std::function`和的使用`std::bind`：[https](https://stackoverflow.com/a/11866539/440558) ://stackoverflow.com/a/11866539/440558 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T12:53:06.857

我认为最好使用`boost(or std since C++11)::function`来保存回调并`boost::bind`绑定它的参数，或者使用`boost::signal`. 这将是更通用和更详细的解决方案，代价是非常小的惩罚。

[http://www.boost.org/doc/libs/1_53_0/doc/html/signals2.html](http://www.boost.org/doc/libs/1_53_0/doc/html/signals2.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T12:52:26.053

您正在使用面向对象的编程，并且应该遵循面向对象的编程范例。

在我看来，使用对象，而不是函数指针，是更干净且通常更好的方法。

您还可以尝试使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)来使代码更好、更灵活。

您还可以考虑[发布者/订阅者模式](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T12:57:26.877

函数指针有效地防止您使用闭包 - 为您的事件处理程序分配方法（这并不*完全*正确，但它会以这种方式限制您，这个解决方案没有多大用处）。

我会投票支持面向对象的方法。如果你使用 C++11，你可以大大简化你的代码：

```
#include <cstdio>
#include <functional>

class Emitter
{
private:
    std::function<void(int)> eventHandler;

public:
    void SetEventHandler(std::function<void(int)> newEventHandler)
    {
        eventHandler = newEventHandler;
    }

    void EmitEvent()
    {
        eventHandler(42); // + error-checking
    }
};

class Handler
{
private:
    void HandleEvent(int i)
    {
        printf("Event handled with i == %d\n", i);
    }

public:
    void AttachEmitter(Emitter & e)
    {
        e.SetEventHandler([this](int i) { HandleEvent(i); });
    }
};

int main(int argc, char * argv[])
{
    Emitter e;
    Handler h;

    h.AttachEmitter(e);
    e.EmitEvent();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T12:54:42.127

两者都有效。您的第一个是“C 风格”，需要在某处使用静态函数。第二个版本是“C++ 风格”，允许您使用 TimerTask 的实例。

一般来说，应该使用版本 2，因为它不需要静态函数。

# jquery - 收到错误缺少解析错误。缺少 ) 在参数列表之后

> ID：15067351
> 
> 赞同：-3
> 
> 时间：2013-02-25T12:48:32.290
> 
> 标签：jquery

我一直收到此错误解析错误。缺少 ) 在参数列表之后

我正在使用的代码是

```
setTimeout("$('#suggestions').hide('fast', function() {document.getElementById("Form1").submit();});", 200); 
```

无法弄清楚错误。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:50:49.570

您在引号中有引号 - 您需要转义它们。

更好的是，避免评估 JavaScript 并将您的代码作为回调传递给`setTimeout`.

```
setTimeout(function() {
    $('#suggestions').hide('fast', function() {
        document.getElementById("Form1").submit();
    });
}, 200); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:53:27.343

```
setTimeout(function() {
        $('#suggestions').hide('fast', function() {
        document.getElementById('Form1').submit();
    });
}, 200); 
```

# grails - 在 Grails 中向域对象添加动态字段

> ID：15067352
> 
> 赞同：1
> 
> 时间：2013-02-25T12:48:32.150
> 
> 标签：grails, grails-orm

我正在尝试找到一种将动态字段添加到 grails 域类的方法。我确实根据 Burt 的文章找到了动态域类插件，但这对我们的需求来说太过分了。

假设我们有一个域类 person：

```
class Person extends DynamicExtendableDomainObject {
    String firstName
    String lastName

    static constraints = {
        firstName(nullable: false, blank: false, maxSize: 50)
        lastName(nullable: false, blank: false)
    }
} 
```

现在客户**a**想在其中也有一个生日字段。通过使用某种管理工具，他在数据库中添加了这个额外的字段。

客户**b**还希望有一个字段中间名，因此他正在将字段中间名添加到此人。

现在我们实现了一个`DynamicExtendableDomainObject`类，Person 类继承自该类。这会为每个继承自此的 Domain 类添加一个自定义字段，以将动态属性存储`JSON`在其中（有点像 Perl 中的 KiokuDB 存储它们）。

现在当 Person 被实例化时，我们希望将这些动态属性添加到 Person 类中，以便能够使用标准 Grails getter 和 setter 以及用于这些的模板函数。

因此，在客户**a**上，我们可以使用脚手架，而人员将输出 firstName、lastName、birthDate，在客户 b 上，脚手架将输出 firstName、lastName、middleName。

属性的存储将通过使用`saveinterceptor`, 将这些属性序列化为 JSON 并将它们存储在特殊字段中来实现。

但是我们还没有找到在运行时将这些 JSON 属性动态添加到域类的方法。有没有好的方法来处理这个？如果是这样，如何最好地实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:56:43.323

您可以尝试通过在metaClass 中展开`DynamicExtendableDomainObject`getProperty()、setProperty()、setProperties() 来尝试将运行时的属性添加到类型的 DomainClass，然后使用 beforeUpdate()、beforeInsert() 和 afterLoad() 挂钩到 Persistence。

例如在 Bootstrap（或服务）中：

```
def yourDynamicFieldDefinitionService

for(GrailsClass c in grailsApplication.getDomainClasses()){
    if(DynamicExtendableDomainObject.isAssignableFrom(c.clazz)){
        Set extendedFields = yourDynamicFieldDefinitionService.getFieldsFor(c.clazz)

        //getProperty()
        c.clazz.metaClass.getProperty = { String propertyName ->
            def result
            if(extendedFields.contains(propertyName)){
                result = delegate.getExtendedField(propertyName)
            } else {
                def metaProperty = c.clazz.metaClass.getMetaProperty(propertyName)
                if(metaProperty) result = metaProperty.getProperty(delegate)
            }
            result
        }

        //setProperty()
        c.clazz.metaClass.setProperty = { propertyName , propertyValue ->
                    if(extendedFields.contains(propertyName)){
                        delegate.setExtendedField(propertyName, propertyValue)
                        delegate.blobVersionNumber += 1
                    } else {
                        def metaProperty = c.clazz.metaClass.getMetaProperty(propertyName)
                        if(metaProperty) metaProperty.setProperty(delegate, propertyValue)
                    }
                }

        //setProperties()
                def origSetProperties = c.clazz.metaClass.getMetaMethod('setProperties',List)
                c.clazz.metaClass.setProperties = { def properties ->
                    for(String fieldName in extendedFields){
                        if(properties."${fieldName}"){
                            delegate."${fieldName}" = properties."${fieldName}"
                        }
                    }
                    origSetProperties.invoke(delegate,properties)
                }
    }
} 
```

和

```
abstract DynamicExtendableDomainObject {
    String yourBlobField
    Long blobVersionNumber //field to signal hibernate that the instance is 'dirty'

    Object getExtendedField(String fieldName){
        ...
    }

    void setExtendedField(String fieldName, Object value){
        ...
    }

    def afterLoad(){
        //fill your transient storage to support getExtendedField + setExtendedField 
    }

    def beforeUpdate(){
        //serialize your transient storage to yourBlobField
    }

    def beforeInsert(){
        //serialize your transient storage to yourBlobField
    }
} 
```

# php - 下载时如何做excel文件名应该是日期时间戳？

> ID：15067355
> 
> 赞同：0
> 
> 时间：2013-02-25T12:48:51.053
> 
> 标签：php, cakephp, cakephp-2.0

我想下载excel文件导入数据，文件名是时间戳，下载时如何使用？这是我的代码，在此先感谢。

```
 $filename = "ersvp".date("Y-m-d").".csv";
    $csv_file = fopen('php://output', 'w');

    header('Content-Type: text/csv; charset=utf-8');
    header('Content-Disposition: attachment; filename="'.$filename.'"'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:51:24.257

[`time()`](http://www.php.net/manual/en/function.time.php)产生当前时间戳：

```
$filename = "ersvp".time().".csv"; 
```

**编辑**

对于像`Y-m-d H:i:s`使用这样的格式：

```
$filename = urlencode("ersvp".date("Y-m-d H:i:s").".csv"); 
```

确保你，[`urlencode()`](http://www.php.net/manual/en/function.urlencode.php)因为你的文件名中有空格。

# linux - 两个crons没有同时运行？

> ID：15067356
> 
> 赞同：0
> 
> 时间：2013-02-25T12:48:56.567
> 
> 标签：linux, shell, ubuntu, crontab

```
MAILTO=""
*/10 * * * *  /bin/bash /var/www/sym_monitor/sym_start.sh > /var/www/migrate/root_start.txt 2>&1
*/10 * * * *  /bin/bash /var/www/sym_monitor/stop.sh > /var/www/migrate/root_stop.txt 2>&1 
```

这两个都是 cron 内的作业，以 10 分钟间隔运行 @17:30 秒一个开始和 1735 第一个开始避免第一个作业在实际开始之前秒杀。

第一个脚本包含以下代码

```
#!/bin/bash
value=$(</var/www/sym_monitor/man.txt)

if [ "$value" == "true" ]; then

     ps -ef|grep sym |grep -v grep |awk '{ print $2 }'|sudo  xargs kill -9;

fi 
```

第二个脚本由以下代码组成。

```
#!/bin/bash
value=$(</var/www/sym_monitor/man.txt)

if [ "$value" == "true" ]; then

sleep 30;
cd /var/www/symmetric-ds-3.1.6/bin;
(sudo ./sym --port 8082 --server);

fi 
```

问题是当我运行这两个脚本时，不幸的是 sym_start.sh 没有执行。但是当我删除 stop.sh 并手动运行停止脚本时，cron 中唯一的脚本正在正确执行。为什么会这样？任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:13:57.760

你能试着改变吗

> (sudo ./sym --port 8082 --server);

到它的绝对路径

> （须藤/var/www/symmetric-ds-3.1.6/bin/sym --port 8082 --server）；

我认为shell中的路径没有改变

# visual-studio - 将所有图像添加到 Package.AppXManifest 会导致编译器警告

> ID：15067357
> 
> 赞同：4
> 
> 时间：2013-02-25T12:49:00.493
> 
> 标签：visual-studio, windows-8, microsoft-metro, compiler-warnings

我在我的 Windows 8 应用商店项目`win8_logo_small.png`的设置中指定了“小徽标” 。`Package.appxmanifest`当我创建商店包时，我收到以下警告：

```
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\AppxPackage\Microsoft.AppXPackage.Targets(1052,9):
warning APPX1621: A mixture of images matching logical name 'win8_logo_small.png' exists
in this project with and without the "scale" or "targetsize" qualifier specified.
For predictable runtime behavior, explicitly specify the scale or target size
in each image asset's file name. 
```

虽然这只是一个警告，但我想知道微软希望我对此做些什么，因为图像比例变体的名称是自动生成的：

```
win8_logo_small.scale-80.png
win8_logo_small.scale-100.png
...
win8_logo_small.targetsize-16.png
win8_logo_small.targetsize-32.png 
```

如果我将`xxx.targetsize`文件重命名为类似的名称`xxx.scale-###.png`并将其添加到项目中，Visual Studio 会自动将文件复制到`xxx.targetsize-##.png`!

这是可以解决的吗？它需要解决还是只是 Windows RT 包编译器中的一个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T02:39:52.083

scale 和 targetsize 图像应该是互斥的。从[如何使用限定符命名资源](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh965324%28v=win.10%29.aspx)

> targetsize 限定符可以指定特定大小（以像素为单位）的资源。它主要用于指定在桌面 Windows 资源管理器中显示的文件类型关联图标或协议图标。此限定符通常用于方形图像或图标，并且仅指定单个图像尺寸。请求资源 (ResourceContext.QualifierValues) 的系统或应用程序必须明确指定目标大小。没有默认值。**如果在资源上使用 targetsize 限定符，则不应使用 scale 限定符。**

同意，Visual Studio 可能对此更清楚一点，因为应用程序清单 UI 暗示您可以/应该提供所有这些。

# jquery - jquery手风琴有时不工作

> ID：15067361
> 
> 赞同：0
> 
> 时间：2013-02-25T12:49:12.820
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion

我的问题是当我这样声明时..有时不起作用..

```
 $("#accordion").accordion();
    $(function() {
      $( "#accordion").dialog({
            autoOpen: true,
            show: "blind",
            width: 350,
            minHeight:460,
            hide: "explode"
        });

     }); 
```

如果我删除了在函数中包装代码..它一直运行良好..

```
$(function(){

}); 
```

这是什么问题..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:51:40.890

它应该是

```
$(function() {
    $("#accordion").accordion();
    $( "#accordion").dialog({
        autoOpen: true,
        show: "blind",
        width: 350,
        minHeight:460,
        hide: "explode"
    });
}); 
```

`$(function() {`是 的快捷方式`$(document).ready(...)`，这意味着只有在 dom 准备好之后才应该执行包装的代码。所以它必须包装你的代码，它不应该在你的代码中使用。

# ruby-on-rails - Rails在html文件中呈现带有空格的字符串

> ID：15067362
> 
> 赞同：2
> 
> 时间：2013-02-25T12:49:12.847
> 
> 标签：ruby-on-rails, ruby

当我做类似的事情时：

```
<%= c.title %> 
```

Rails 渲染它是这样的：

```
"
        Title
    " 
```

如果我用标签包装字符串，这种行为就不一样了。有人可以解释一下为什么 Rails 会这样吗？

**更新**

[Github 的回购链接](https://github.com/waldyr/so_question)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:34:41.273

这与 ERB 而不是 Rails 有关。处理模板时，它将输出 ERB 标记`(<%= %>)`中的任何值输出到输出缓冲区并简单地执行任何其他代码。

其他一切都保持不变。ERB 标记前后的空格保持不变。您可以做的最多的事情是`-`在标签中使用它来去除一些空白。

```
<!-- -->
<% for i in 1..10 %>
  <%= i -%>
<% end %>
<!-- --> 
```

将输出

```
<!-- foo -->
  1  2  3  4  5  6  7  8  9  10<!-- foo --> 
```

注意每个数字前仍然出现的两个空格，去掉那个空格，它看起来就像一个长数字。

将此与

```
<% for i in 1..10 %>
  <%= i %>
<% end %> 
```

将输出

```
<!-- -->
  1
  2
  3
  4
  5
  6
  7
  8
  9
  10
<!-- --> 
```

* * *

这是从上下文菜单中选择查看源代码后测试页面的输出。

```
<!DOCTYPE html>
<html>
<head>
  <title>Testapp</title>
  <link href="/assets/application-1b13569e9620782f423d4cd3ce931750.css" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/application-9a717ea62eac3463d689b2ba0a4e85b4.js" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="/hfgtJZWzxaQ2d7txQMAt2b+21MWSTYcf6/2F7Pei1k=" name="csrf-token" />
</head>
<body>

<h1>Home#index</h1>
<p>Find me in app/views/home/index.html.erb</p>
What&#x27;s wrong with me?

<!-- -->What&#x27;s wrong with me surrounded by html commet<!-- -->

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:43:31.750

我没有看到问题。这是呈现的 HTML：

```
<!DOCTYPE html>
<html>
<head>
  <title>Testapp</title>
  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/home.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/home.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="cOfMPm5S/tCHCEHkeRTeQTITAiz800s+3Q4ZgNWCNlY=" name="csrf-token" />
</head>
<body>

<h1>Home#index</h1>
<p>Find me in app/views/home/index.html.erb</p>
What&#x27;s wrong with me?

</body>
</html> 
```

相关布局部分：

```
<body>

<%= yield %>

</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:17:24.997

您的布局文件或呈现此视图的其他文件中可能有一些缩进。

您的 application.html.erb 可能如下所示：

```
<html>
  <head>...</head>
  <body>
    <%= yield %> <!-- Some whitespaces at the beginning of this line -->
  </body>
</html> 
```

Rails 只是简单地将 <%= %> 标记替换为其中表达式的值，仅此而已。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-08T11:47:14.263

我和你有同样的问题！

我的解决方案是将文件编码从更改`UTF-8`为`UTF-8 without BOM`

我正在使用 sinatra，很高兴与您分享！

# iphone - UIWebView 无法识别 TapGesture（根本不会调用方法）

> ID：15067366
> 
> 赞同：2
> 
> 时间：2013-02-25T12:49:26.813
> 
> 标签：iphone, ios6, uiwebview, uigesturerecognizer

当我按照我在 StackOverflow 上找到的答案时，我所需要`UIWebView`的`touch`只是实现以下内容：

**WebVC.h**

```
#import <UIKit/UIKit.h>

@interface WebVC : UIViewController <UIWebViewDelegate, UIGestureRecognizerDelegate>

@property (nonatomic, copy) NSString *test;

@property (strong, nonatomic) IBOutlet UIWebView *webView;
@property (strong, nonatomic) IBOutlet UIActivityIndicatorView *activityIndicator;

@property (strong, nonatomic) UITapGestureRecognizer *tapGestureR;

- (void)handleTap:(id)sender;

@end 
```

**WebVC.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.webView.delegate = self;

    self.tapGestureR = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    self.tapGestureR.delegate = self;
    [self.webView addGestureRecognizer:self.tapGestureR];
}

- (void)handleTap:(id)sender
{
     NSLog(@"tapDetected");
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    return YES;
} 
```

你知道我为什么看不到`NSLog`吗？ `Method`根本不会被调用。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T13:20:13.263

```
self. webView.userInteractionEnabled = YES; 
```

使用 userInteractionEnabled 方法并设置为 YES。我想这会对你有所帮助。

**编辑：**

`-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer` 在您的 WebVC.m 类中使用方法。

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
     NSLog(@"shouldRecognizeSimultaneouslyWithGestureRecognizer");
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:43:25.563

```
 for(UIGestureRecognizer *gesture in [webview gestureRecognizers])){
       if([gesture isKindOfClass:[UITapGestureRecognizer class]){
         if (gesture.numberOfTapsRequired == 1) 
            [webview removeGestureRecognizer:gesture];
       }
    } 
```

然后添加你的手势。就像你以前做过的那样

# c# - ManualResetEventSlim：立即调用 .Set() 后跟 .Reset() 不会释放*任何*等待线程

> ID：15067369
> 
> 赞同：13
> 
> 时间：2013-02-25T12:49:34.567
> 
> 标签：c#, multithreading

**ManualResetEventSlim：立即调用 .Set() 后跟 .Reset() 不会释放*任何*等待线程**

（注意：这也发生在`ManualResetEvent`，而不仅仅是`ManualResetEventSlim`。）

我在发布和调试模式下都尝试了下面的代码。我在四核处理器上运行的 Windows 7 64 位上使用 .Net 4 将其作为 32 位版本运行。我从 Visual Studio 2012 编译它（所以安装了 .Net 4.5）。

当我在我的系统上运行它时的输出是：

```
Waiting for 20 threads to start
Thread 1 started.
Thread 2 started.
Thread 3 started.
Thread 4 started.
Thread 0 started.
Thread 7 started.
Thread 6 started.
Thread 5 started.
Thread 8 started.
Thread 9 started.
Thread 10 started.
Thread 11 started.
Thread 12 started.
Thread 13 started.
Thread 14 started.
Thread 15 started.
Thread 16 started.
Thread 17 started.
Thread 18 started.
Thread 19 started.
Threads all started. Setting signal now.

0/20 threads received the signal. 
```

所以设置然后立即重置事件并没有释放单个线程。如果取消注释 Thread.Sleep()，那么它们都会被释放。

这似乎有些出乎意料。

有人有解释吗？

```
using System;
using System.Threading;
using System.Threading.Tasks;

namespace Demo
{
    public static class Program
    {
        private static void Main(string[] args)
        {
            _startCounter = new CountdownEvent(NUM_THREADS); // Used to count #started threads.

            for (int i = 0; i < NUM_THREADS; ++i)
            {
                int id = i;
                Task.Factory.StartNew(() => test(id));
            }

            Console.WriteLine("Waiting for " + NUM_THREADS + " threads to start");
            _startCounter.Wait(); // Wait for all the threads to have called _startCounter.Signal() 
            Thread.Sleep(100); // Just a little extra delay. Not really needed.
            Console.WriteLine("Threads all started. Setting signal now.");
            _signal.Set();
            // Thread.Sleep(50); // With no sleep at all, NO threads receive the signal.
            _signal.Reset();
            Thread.Sleep(1000);
            Console.WriteLine("\n{0}/{1} threads received the signal.\n\n", _signalledCount, NUM_THREADS);
            Console.WriteLine("Press any key to exit.");
            Console.ReadKey();
        }

        private static void test(int id)
        {
            Console.WriteLine("Thread " + id + " started.");
            _startCounter.Signal();
            _signal.Wait();
            Interlocked.Increment(ref _signalledCount);
            Console.WriteLine("Task " + id + " received the signal.");
        }

        private const int NUM_THREADS = 20;

        private static readonly ManualResetEventSlim _signal = new ManualResetEventSlim();
        private static CountdownEvent _startCounter;
        private static int _signalledCount;
    }
} 
```

注意：这个问题提出了类似的问题，但似乎没有答案（除了确认是的，这可能会发生）。

[ManualResetEvent 的问题没有一致地释放所有等待的线程](https://stackoverflow.com/questions/11646590/issue-with-manualresetevent-not-releasing-all-waiting-threads-consistently)

* * *

[编辑]

正如 Ian Griffiths 在下面指出的那样，答案是使用的底层 Windows API 并非旨在支持这一点。

不幸的是[，ManualResetEventSlim.Set() 的 Microsoft 文档](http://msdn.microsoft.com/en-us/library/system.threading.manualreseteventslim.set.aspx)错误地指出它

> 将事件的状态设置为已发出信号，这允许一个或多个等待事件的线程继续进行。

显然“一个或多个”应该是“零个或多个”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T13:59:18.847

重置 a`ManualResetEvent`不像调用`Monitor.Pulse`- 它不能保证它会释放任何特定数量的线程。相反，文档（用于底层 Win32 同步原语）非常清楚，您不知道会发生什么：

> 任何数量的等待线程，或随后开始等待指定事件对象的线程，都可以在对象状态发出信号时被释放

这里的关键短语是“任何数字”，其中包括零。

Win32 确实提供了一个`PulseEvent`，但正如它所说的“此功能不可靠，不应使用”。[http://msdn.microsoft.com/en-us/library/windows/desktop/ms684914(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684914(v=vs.85).aspx)文档中的注释提供了一些关于为什么不能可靠地实现脉冲样式语义的见解一个事件对象。（基本上，内核有时会暂时将等待事件的线程从其等待列表中移除，因此线程总是有可能错过事件上的“脉冲”。无论您使用`PulseEvent`还是尝试自己做这件事都是如此设置和重置事件。）

的预期语义`ManualResetEvent`是它充当门。门在您设置时打开，在您重置时关闭。如果您打开一扇门，然后在任何人有机会通过大门之前迅速将其关闭，那么如果每个人仍然在大门的错误一侧，您不应该感到惊讶。只有那些在您打开大门时足够警觉通过大门的人才能通过。这就是它的工作方式，所以这就是为什么你看到你所看到的。

特别是语义`Set`非常**不是**“打开门，并确保所有等待线程都通过门”。（如果它是这个意思，那么内核应该如何处理多对象等待并不明显。）所以这不是一个“问题”，因为事件不应该以你的方式使用尝试使用它，所以它运行正常。但从某种意义上说，这是一个问题，您将无法使用它来获得您正在寻找的效果。（这是一个有用的原语，只是对你想要做的事情没有用。我倾向于`ManualResetEvent`专门用于最初关闭的门，并且只打开一次，并且永远不会再次关闭。）

因此，您可能需要考虑其他一些同步原语。

# python - 对系列设置操作

> ID：15067370
> 
> 赞同：1
> 
> 时间：2013-02-25T12:49:35.510
> 
> 标签：python, numpy, pandas

我想知道是否有人可以帮助我想出解决问题的方法；我基本上有一个 pandas 系列列表（空格分隔），我使用 pandas 在 series - 上的字符串操作创建了这些列表`str.split(' ')`。我需要创建另一系列列表，这些列表是每个列表与另一个列表的交集。

我相信 apply() 是这里缺少的部分，但我的用法一定是不正确的，因为我收到了一个错误。pandas 手册并未真正涵盖在 apply() 中使用集合操作，但我认为它应该可行吗？

基本上，我有一组事件（evector），并且想要设置一个向量，其中事件与给定事件（e2）共享用户。到目前为止，这些是我的方法：

**原始尝试：**

```
evector = attendframe.yes.str.split(' ') #creates the series of lists

e2 = [attendframe.yes[attendframe.event==686467261]] #just for testing - returns [0
  #  1975964455 252302513 4226086795 3805886383 142...
  #Name: yes]

sharedvector = evector.apply(lambda x: [n for n in [x] if n in e2]) # the important bit

print sharedvector 
```

**错误：** *数组长度不同：1 vs 7*

我将问题缩小到以下行： `evector = attendframe.yes.str.split(' ').apply(lambda x: set([x]))`

然后我又做了几次尝试让它正确。

**尝试 1**

```
evector = attendframe.yes.str.split(' ').apply(lambda x: set([x]))
#Unhashable type "list" 
```

**尝试 2**

```
evector = attendframe.yes.str.split(' ').apply(lambda x: set(x))
#TypeError: 'float' object is not iterable 
```

**尝试 3**（归功于安迪·海登）

```
evector = attendframe.yes.str.split(' ').apply(lambda x: x
                                                if isinstance(x, float)
                                                else set(x))

e2 = set([2394228942, 2686116898, 1056558062, 379294223])
sharedvector = evector.apply(lambda x: x if isinstance(x, float) else x.intersection(e2))
sharedvector.dropna())
#works, but returns empty arrays. 
```

这是导致问题的数据本身的示例：

```
print attendframe.yes.str.split(' ')

0     [1975964455, 252302513, 4226086795, 3805886383...
1     [2394228942, 2686116898, 1056558062, 379294223...
2                                                   NaN
3                                                   NaN 
```

如果它与最终解决方案有任何相关性，我最终想创建一个数据框，其边距包含事件，其单元格包含在任何两个给定事件之间共享的用户列表。生成列向量是其中的第一部分，然后我希望在函数中运行类似的 apply() 步骤以创建完整矩阵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:49:53.923

既然你问的是集合操作，为什么不使用[`set`](http://docs.python.org/2/library/stdtypes.html#set)对象：

```
evector = attendframe.yes.str.split(' ').apply(set)
e2 = set(attendframe[attendframe.event==686467261]]['yes']) 
```

并应用集合交集：

```
sharedvector = evector.apply(lambda x: x & e2) 
```

如果您的数据有`NaN`，您可以包装每个 set 调用以测试它是否为浮点数：

```
evector = df.yes.str.split(' ').apply(lambda x: x
                                                if isinstance(x, float)
                                                else set(x))
e2 = set(attendframe[attendframe.event==686467261]]['yes'])
sharedvector = evector.apply(lambda x: x if isinstance(x, float) else x & e2) 
```

# windows - 客户端证书存储在哪里？

> ID：15067373
> 
> 赞同：0
> 
> 时间：2013-02-25T12:49:40.877
> 
> 标签：windows, ssl, certificate, ssl-certificate

我想创建一个客户端证书，我在 Visual Studio 命令提示符下运行命令。

以下命令成功运行，但我不知道证书位置。它在哪里得到商店？

`makecert -r -pe -n "CN=XYZ Company" -b 01/01/2013 -e 01/01/2014 -sky exchange -ss my`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:37:56.470

使用`-ss my`您明确声明证书应保存到您的 Windows 帐户的个人证书存储中的参数。

打开`certmgr.msc`（通过在开始菜单上执行）并查看您的证书存储。

# android - 无法选择的操作项 Android Sherlock 操作栏

> ID：15067375
> 
> 赞同：0
> 
> 时间：2013-02-25T12:49:46.587
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在用项目实现操作栏。单击操作中的项目时，我看不到所选项目的效果（背景选择颜色）：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/menu_item_share_action_provider_action_bar"
        android:showAsAction="always"
        android:title="TTTTTTT"
        android:checkable="true"
         />

     <item android:id="@+id/menu_item_share_action_provider_action_bar"
        android:showAsAction="always"
        android:title="AAAAAA"
        android:checkable="true"

      />

</menu> 
```

在我的 SherlockActivity 上：

```
 @Override
        public boolean onOptionsItemSelected(MenuItem item) {

              return super.onOptionsItemSelected(item);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T09:49:56.510

也许在这两个项目上设置相同的 id 会导致问题。您是否尝试更改其中之一？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:54:35.637

**更新：**

您需要执行以下操作（切换图标 ID）：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            // app icon in action bar clicked; go home
            Intent intent = new Intent(this, HomeActivity.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

------------
你有没有做过这样的事情：

```
@Override
 public boolean onCreateOptionsMenu(Menu menu) {
  MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.menu.menu, menu);
        return super.onCreateOptionsMenu(menu);
 } 
```

这是扩充 XML 文件所必需的。

# c# - 无法加载文件或程序集“Newtonsoft.Json”

> ID：15067376
> 
> 赞同：2
> 
> 时间：2013-02-25T12:49:47.843
> 
> 标签：c#, .net, asp.net-mvc-3, nhibernate, json.net

我在我的 MVC3 站点中使用 Nhibernate。我在数据库中有 4 个表和一个服务，站点使用该服务从数据库中获取数据。现在我收到此错误：

> 无法加载文件或程序集 'Newtonsoft.Json, Version=3.5.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

我发现通过 NuGet 安装 Newtonsoft.Json 而不是添加对其 dll 的引用可以解决问题，所以我这样做了，它解决了问题。当我调试一切正常。但是当我在我的登台服务器上发布和上传时，它给出了我上面提到的错误。

另外，请注意我的服务中有 3 种方法，但只有一种给出错误，其余的都可以正常工作。甚至这种方法在本地也能正常工作。就是不能上台。

**编辑：**现在我通过 NuGet 卸载 Newtonsoft.Json，然后我添加了对保存在项目 Bin 文件夹中的 Newtonsoft.Json dll 的引用。它再次在本地工作，但不在服务器上。

为什么这样？

请回复。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:14:11.593

如果它在本地系统上工作，但在服务器上不起作用。我假设您的 PC 上安装了一些在您的服务器上不可用的库。

很难说可能缺少什么库，请尝试查看项目中的引用，看看您是否引用了可能正在使用本地安装的库的库。

# json - Grails - 使用 JSON 启动域类

> ID：15067379
> 
> 赞同：3
> 
> 时间：2013-02-25T12:49:49.363
> 
> 标签：json, grails, web, request, grails-domain-class

我有这个简单的域类：

```
class Settings {
static constraints = {
    uid(nullable: false, unique: true)
    person()
}

String uid
Map person
} 
```

以及使用 json 请求更新数据的 Web UI：

```
{"uid":1234 , person:{"first_name" : "jhon" , "last_name" : "doe"}} 
```

在控制器代码中：

```
def json = request.JSON;
def s = new Settings(json); 
```

似乎正在设置 s.uid 但是**s.person****地图**仍然为空。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:51:44.503

您可以在控制器中执行以下操作：

```
def json = request.JSON;
def s = new Settings(json);
s.person = json.person; 
```

它很难看，但数据绑定似乎无法处理嵌套的 json

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:22:59.507

如果你想让它工作，你需要将你的结构转换为：

```
{"uid":1234 , "person.first_name": "jhon" , "person.last_name": "doe"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T22:45:25.480

如果在实例化设置之前添加此行，它将递归绑定。

```
JSON.use('deep') 
```

# powershell - 使用 PowerShell 删除事件日志的旧条目？

> ID：15067386
> 
> 赞同：2
> 
> 时间：2013-02-25T12:50:04.830
> 
> 标签：powershell

我想使用 PowerShell 删除事件日志的旧条目（其中旧的意思是“早于 X 天”）。
我找到了[Clear-EventLog cmdlet](http://technet.microsoft.com/en-us/library/hh849789.aspx)，但是

> 从本地或远程计算机上的指定事件日志中删除所有条目。

我发现很多脚本使用这个 cmdlet 来删除所有条目 -
但是有没有办法只选择事件日志的一些 [旧] 条目并只删除那些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:52:14.377

正如詹姆斯所说，你不能。但是，如果您想在日志中保留日期范围的一部分，它并不干净，但这里有一个解决方法：

1.  [您使用“wevutil”实用程序（ http://technet.microsoft.com/fr-fr/library/cc732848%28v=ws.10%29.aspx](http://technet.microsoft.com/fr-fr/library/cc732848%28v=ws.10%29.aspx) ）备份要保留的消息，类似这样：

    $LogName="Application" $DateStart=(Get-Date).AddDays(-$Days) $DateEnd=Get-Date $EvtFile="$ComputerName" + "-EventLogExport-" + "$LogName" + ".evtx" function Get-Milliseconds ($EventsDate) { $EventsTimeSpan=New-TimeSpan -Start $EventsDate -End (Get-Date) [math]::Round($EventsTimeSpan.TotalMilliseconds) } # 结束函数 $EventsDateStart=Get-Milliseconds(Get -Date $DateStart) $EventsDateEnd=Get-Milliseconds(Get-Date $DateEnd)

    wevtutil epl $LogName $EvtFile /q:"*[System[TimeCreated[timediff(@SystemTime)>=$EventsDateEnd] 和 TimeCreated[timediff(@SystemTime) <= $EventsDateStart]]]"

2.  使用 Clear-EventLog cmdlet 清空事件日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T11:17:15.763

我找到了一个从所有事件日志中删除所有条目[的单行器，例如](http://kristofmattei.be/2011/06/14/clear-all-event-logs-on-windows-using-powershell/)

```
wevtutil el | Foreach-Object {Write-Host "Clearing $_"; wevtutil cl "$_"} 
```

就我个人而言，我要么设置事件日志大小的限制

```
limit-eventLog -logname Security -MaximumSize 64KB 
```

或每月导出并在导出后删除。

# c# - 在检索数据时查看 Loading.gif 图像 C#

> ID：15067390
> 
> 赞同：1
> 
> 时间：2013-02-25T12:50:15.503
> 
> 标签：c#, multithreading, winforms, loading, picturebox

在 WinForm 应用程序中，我有一个包含 GridView 的表单，我通过从数据库中收集数据来填充 GridView。我有一个包含 Loading.gif 图像的图片框。我想要的是在从数据库中检索数据期间查看 PictureBox。

我尝试了下面的代码，但它没有工作......

> ```
>  private void Generate_Button_Click(object sender, EventArgs e)
>  {              
>       pictureBox1.Visible = true;      
>       {    
>             Generate_Button.Text = "Done";
>             if (conn.State == ConnectionState.Closed)
>                 conn.Open();                
>             radGridView1.Columns.Add(new GridViewTextBoxColumn("Account No."));
>             radGridView1.Columns[0].Width = 85;
>             bool DataAvailable = false;
>             if (MainAccNo_TextBox.Text == "" && CurencyNo_TextBox.Text == "")
>             {
>                 if (SeparateBy_DropDownList.Text == "4")
>                 {
>                     for (int i = 1; i <= 9; i++)
>                     {
>                         for (int j = 0; j <= 9; j++)
>                         {
>                             for (int k = 0; k <= 9; k++)
>                             {
>                                 for (int l = 0; l <= 9; l++)
>                                 {
>                                     SqlCommand cmd_AccNo = new SqlCommand("Select distinct(AccNo) from JourTrans where AccNo like '" + i + "" + j + "" + k + "" + l + "%'", conn);
>                                     SqlDataReader reader_AccNo = cmd_AccNo.ExecuteReader();      
>                                     radGridView1.Rows.Add(i + "" + j + "" + k + "" + l);
>                                     while (reader_AccNo.Read())
>                                     {
>                                         Accounts.Add(reader_AccNo["AccNo"].ToString());
>                                         radGridView1.Rows.Add(reader_AccNo["AccNo"].ToString());
>                                         DataAvailable = true;
>                                     }
>                                     reader_AccNo.Close();
>                                     if (DataAvailable == true)
>                                     {
>                                         radGridView1.Rows.Add("");
>                                         DataAvailable = false;
>                                     }
>                                     else
>                                       radGridView1.Rows.RemoveAt(radGridView1.Rows.Count - 1);
>                                 }
>                             }
>                         }
>                     }
>                 }  
>             }
>         }                
>      pictureBox1.Visible = false;
>   } 
> ```

http://soundfrost.org/ >下载 youtube 视频

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:54:57.470

在另一个线程中检索并使用 Dispatcher 以便您可以从该线程访问您的控件：

```
pictureBox1.Visible = true;   
Dispatcher.BeginInvoke(new MethodInvoker(() => 
{    
    for (int i = 1; i <= 9; i++)
    {                                               
        //Here I am retrieving data from the database       
    } 
    pictureBox1.Visible = false; 
})); 
```

# iis - 网址重写模块不重定向

> ID：15067392
> 
> 赞同：-1
> 
> 时间：2013-02-25T12:50:21.360
> 
> 标签：iis, url-rewrite-module

我在 IIS URL 重写模块中设置了入站规则，但它不起作用。

这是我的设置。

![在此处输入图像描述](../Images/e25a2e8815b1191f4d5ab6d86a553cdc.png)

我想说的是，如果用户的浏览器导航到 abcom（第一个被删掉的部分 - 哦，当然它不是字面上的“abcom”，而是那种形式的其他东西），那么他应该被重定向到[http://www。 d.com/foo](http://www.d.com/foo)（第二个擦掉的部分）。

我已经使用了测试模式功能，它确实匹配正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T18:29:08.030

您可能必须设置一个条件才能使其工作。

它是通配符、完全匹配还是正则表达式模式？这也将确定您需要哪些东西才能使其工作

在您的情况下，您可以只使用通配符匹配，它应该可以工作。

# iphone - MPMoviePlayer 音频中断问题

> ID：15067394
> 
> 赞同：1
> 
> 时间：2013-02-25T12:50:31.357
> 
> 标签：iphone, ios, mpmovieplayercontroller, mpmovieplayer

我正在我的应用程序的 MPMoviePlayer 中播放视频，我正在从服务器获取视频。如果视频长度约为 25 秒或更长，则音频会中断。意味着在播放视频时，当视频播放到一半时，就听不到音频了。但是如果我寻找进度条，音频又来了。

任何人都可以帮助我吗？

```
moviePlayerController = [[MPMoviePlayerController alloc] init];
[moviePlayerController prepareToPlay];
moviePlayerController.shouldAutoplay = YES;
[moviePlayerController setScalingMode:MPMovieScalingModeAspectFit];
[[self.moviePlayerController view] setFrame:CGRectMake(0, 72, 320,180)];
[[self view] addSubview: [self.moviePlayerController view]];
self.moviePlayerController.useApplicationAudioSession = YES;

 NSString *strng = @"http://qdemo_videos.s3.amazonaws.com/1360582540.mp4";
 NSURL * adurl = [NSURL URLWithString:strng];
 moviePlayerController.contentURL = url;
 moviePlayerController.controlStyle = YES;
 self.moviePlayerController.useApplicationAudioSession = YES;
  [moviePlayerController play]; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T13:04:44.087

如果你是在 Xcode 4.6 或更高版本上构建并使用 iOS 6.0 或更高版本，

```
self.moviePlayerController.useApplicationAudioSession = YES; 
```

不会被称为已弃用。

如需进一步使用此链接：这是文档 [http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html)

这是解释[http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Configuration/Configuration.html](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Configuration/Configuration.html)

如果这还不够，这里是代码:) [http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Cookbook/Cookbook.html#//apple_ref/doc/uid/TP40007875- CH6-SW2](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Cookbook/Cookbook.html#//apple_ref/doc/uid/TP40007875-CH6-SW2)

在我的情况下，将类别设置为 AVAudioSessionCategoryAmbient 就可以了！

# php - AJAX PHP 回调函数中的参数

> ID：15067395
> 
> 赞同：2
> 
> 时间：2013-02-25T12:50:32.193
> 
> 标签：php, javascript, jquery, ajax

我正在使用下面的 AJAX 脚本来处理一些操作。

```
<script type="text/javascript">
function validLogin(){
  var uname=$('#uname').val();
  var password=$('#password').val();

  var dataString = 'uname='+ uname + '&password='+ password;
  $("#flash").show();
  $("#flash").fadeIn(400).html('<img src="http://www.91weblessons.com/demo/phpAjaxLoginValidation/image/loading.gif" />');
  $.ajax({
  type: "POST",
  url: "processed.php",
  data: dataString,
  cache: false,
  success: function(result){
           var result=trim(result);
           $("#flash").hide();
           if(result=='correct'){
                 window.location='update.php';
           }else{
                 $("#errorMessage").html(result);
           }
  }
  });
}

function trim(str){
 var str=str.replace(/^\s+|\s+$/,'');
 return str;
}
</script> 
```

这里我需要`update.php?name=somename`在成功后重定向到一个动态 URL。

请提出任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:07:17.227

如果需要模拟重定向，更好的方法是通过 window.location.replace(...)。如果它的基本协议和来源相同，您可以使用`window.location.replace(window.location.origin + '/update.php?name='+uname);`

参考：[如何在 JavaScript/jQuery 中重定向到另一个网页？](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)对于 window.location.replace() 和设置 window.location.href 之间的区别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:15:19.153

```
window.location = '/update.php?name=' + userName; 
```

# extjs - Extjs：如何在树图标上触发事件

> ID：15067396
> 
> 赞同：-1
> 
> 时间：2013-02-25T12:50:34.647
> 
> 标签：extjs

由于每个节点的 onclick 都在中心面板中创建了 tabpanel，我的树加载速度非常慢。现在，我想更改代码，例如在节点/图标上单击仅加载子节点。双击节点加载选项卡面板。即我想先加载我的树。

```
treePanel.on('expand',function(node){
    alert("Expand event")
    var iconClass=node.getUI().getIconEl().className;
    node.getUI().getIconEl().className="x-tree-node-icon loading_icon";
    var ajaxReq = ajaxRequest(node.attributes.url,0,"GET",true);

    ajaxReq.request({
        success: function(xhr) {
            var response=Ext.util.JSON.decode(xhr.responseText);
            appendChildNodes(response.nodes,node); //method to add child nodes
            node.expand();
            node.getUI().getIconEl().className=iconClass;

        },
        failure: function(xhr){
            Ext.MessageBox.alert( _("Failure") , xhr.statusText);
            node.getUI().getIconEl().className=iconClass;
        }
    });

});
rootNode.firstChild.fireEvent('expand',rootNode.firstChild); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:25:17.820

您可以在加载前捕获：

`tree.on( 'beforeload', function( oStore, oOperation, oOpts ) { }`

加载：

`tree.on( 'load', function( oStore, oNode, oNodes ) { }`

对于图标：

`tree.on( 'expand', function( oNode, arChildren ) { }`

然后获取一个节点并更改图标：

`oNode.set('icon', ... );`

# mongodb - Play Framework 中通过 SSL 的 MongoDB 连接

> ID：15067399
> 
> 赞同：3
> 
> 时间：2013-02-25T12:50:50.060
> 
> 标签：mongodb, ssl, playframework, playframework-1.x

我在我的应用程序中使用 Play 1.2.5、MongoDB 和 Morphia 模块 1.2.9。

为了创建与数据库的安全加密连接，我通过使用以下链接启用 SSL 来安装 MongoDB [http://docs.mongodb.org/manual/administration/ssl/](http://docs.mongodb.org/manual/administration/ssl/) [http://www.mongodb.org/about/tutorial /build-mongodb-on-linux/](http://www.mongodb.org/about/tutorial/build-mongodb-on-linux/)

[现在我可以使用 mongo --ssl 连接到 mongo shell，还可以使用https://mylocalhost.com:27017/](https://mylocalhost.com:27017/)验证 MongoDB 是否正在运行

但是在 MongoDB 中启用 SSL 后，我无法通过我的 play 应用程序连接到它。

以下是我在 application.conf 中用于连接数据库的行

```
morphia.db.host=localhost
morphia.db.port=27017
morphia.db.db=test 
```

是否有任何配置可用于通过 SSL 连接？

我做了一些谷歌搜索，但找不到任何解决方案。请帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:18:16.413

Morphia 模块暂时不支持 ssl 连接。而且我不确定 morphia 库是否支持它。请在 github 上创建一个问题以跟踪此要求：[https ://github.com/greenlaw110/play-morphia/issues?state=open](https://github.com/greenlaw110/play-morphia/issues?state=open)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:24:55.237

我使用 spring-data 并遇到了同样的问题。使用 spring-data 我能够自己构造一个 Mongo 对象并将其作为构造函数参数传递。Morphia 可能具有相同的机制。关键是：

```
options.socketFactory = SSLSocketFactory.getDefault(); 
```

之后，确保将 SSL 公钥安装到您的密钥库中，它应该可以工作。

```
public class MongoFactory {
    public Mongo buildMongo (String replicaSet, boolean slaveOk, int writeNumber , int connectionsPerHost, boolean useSSL) throws UnknownHostException{

        ServerAddress addr = new ServerAddress();
        List<ServerAddress> addresses = new ArrayList<ServerAddress>();
        int port =0;
        String host = new String();
        if ( replicaSet == null )
            throw new UnknownHostException("Please provide hostname");
        replicaSet = replicaSet.trim();
        if ( replicaSet.length() == 0 )
            throw new UnknownHostException("Please provide hostname");
        StringTokenizer tokens = new StringTokenizer(replicaSet, ",");
        while(tokens.hasMoreTokens()){
            String token = tokens.nextToken();
            int idx = token.indexOf( ":" );
            if ( idx > 0 ){               
                port = Integer.parseInt( token.substring( idx + 1 ) );
                host = token.substring( 0 , idx ).trim();
            }
            addr = new ServerAddress(host.trim(), port);
            addresses.add(addr);
        }

        MongoOptions options = new MongoOptions();
        options.autoConnectRetry = true; 
        if (useSSL){
            options.socketFactory = SSLSocketFactory.getDefault();
        }
        options.connectionsPerHost=connectionsPerHost;
        options.w=writeNumber;
        options.fsync=false;
        options.wtimeout=5000;
        options.connectTimeout=5000;
        options.autoConnectRetry=true;
        options.socketKeepAlive=true;

        Mongo m = new Mongo(addresses, options);
        if(slaveOk){
            m.setReadPreference(ReadPreference.SECONDARY);
        }
        return m;
    }
} 
```

# libgdx - 在游戏屏幕上放置特定时间间隔的纹理

> ID：15067400
> 
> 赞同：0
> 
> 时间：2013-02-25T12:51:04.893
> 
> 标签：libgdx

我正在 Libgdx 中制作游戏，我想在其中显示和隐藏特定时间间隔的纹理并重复此过程。我可以为此使用 Timer 类吗？也请给我一些例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:20:23.730

我不确定你想在这里做什么。你可以在你的渲染循环中有一个标志

```
Texture texture;
long lastFlip = 0;
long flipTime = 1000;
boolean display = false;

//..In your rendering loop
if(lastFlip+flipTime > System.currentTimeMillis()){
     display = !display;
     lastFlip = System.currentTimeMillis();
}
if(display){
      spriteBatch.draw(texture,0,0);
} 
```

如果您想使用 scene2d 中的内置动作系统，请参阅以下教程。 [教程](http://steigert.blogspot.ie/2012/02/3-libgdx-tutorial-scene2d.html "教程")。该博客非常好，可以让您很好地了解如何使用很多 scene2d 功能。由于对 scene2d 的更改，它可能会有点数据不足，但它会给你你需要的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T10:22:19.100

我相信您现在得到了解决方案，但您应该使用渲染方法中已有的 Gdx 图形增量时间，而不是使用系统特定时间。然后将其与要显示纹理的时间量进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T12:25:28.300

您绝对应该使用 libGDX 包装函数来读取时间，以避免最终在不同平台上不兼容。但是自己编写代码可以非常简单：

```
if (TimeUtils.millis()%(SHOW_TIME+HIDE_TIME) < SHOW_TIME){
 // render it
} 
```

其中 SHOW_TIME 是您希望显示纹理的毫秒数，而 HIDE_TIME 是您希望隐藏纹理的毫秒数。不需要额外的变量并使其比这更复杂。

# c# - 使用一种方法来简化键入命令是一种不好的做法吗？

> ID：15067402
> 
> 赞同：-2
> 
> 时间：2013-02-25T12:51:21.837
> 
> 标签：c#

例如，假设我懒得打字`Console.Write("text")`并决定这样做：

```
static void w(string text) {
    Console.Write(text);
} 
```

然后就这样称呼它：

```
w("This is a string."); 
```

为我制定一种方法是否被认为是一种不好的做法？有关系吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T12:53:05.710

对于这种微不足道的事情，它会**降低代码的可读性**。国际海事组织

请看一下：[Visual C# Code Snippets](http://msdn.microsoft.com/en-us/library/z41h7fat%28v=vs.110%29.aspx) ，您可以使用其中一个`cw`来代替调用您的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-25T12:53:49.480

我会说这是一种不好的做法，因为它使代码的可读性降低。

如果你真的太懒了，那么你总是可以使用代码片段。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T12:55:21.690

为了减少打字而降低代码的可读性当然是一种不好的做法。不要忘记，您的代码在完成后必须是可维护的，无论是由您还是其他人完成。

从签名中很难确定 w(string text) 方法打算做什么。**但是，如果您认为这会增加**可读性，请随意抽象出对方法的详细调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T12:54:33.723

这对代码的可读性不利。如果你只是引入一种调用一个函数的新方法，我会说这很糟糕。

为什么不想写 Console.Write(...)？就因为你懒？视觉工作室（或其他 ide）具有出色的自动完成功能。

# css - 在桌面、平板电脑和移动视图的响应式构建中使用 EM 单元，但仅限于某些元素

> ID：15067405
> 
> 赞同：-1
> 
> 时间：2013-02-25T12:51:24.900
> 
> 标签：css, mobile, responsive-design, font-size

我目前正在构建一个响应式站点，并已将 EM 单元用于字体大小、行高、填充等，以便在从桌面移动到平板电脑再到移动设备时使调整大小任务更顺畅。所以目前我的正文字体设置`100%`为桌面，然后我想我会`%`在平板电脑中删除它，然后在移动设备中再次删除。我的问题是，如果我不希望移动设备中的所有内容都调整大小`100% to 80%`怎么办？也许我只希望这发生在主体内容和标题上，调整某些内容的最佳方法是什么？例如，我尝试将移动断点内的主标题字体大小更改为 % ，但这似乎不正确。我只是想更好地理解为每个视图调整字体大小的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:15:02.350

只需针对使用的标签。

桌面

```
h1 { font-size:100%; } 
```

移动的

```
h1 { font-size:80%; } 
```

您只需要在媒体查询中包装 css 的每一部分。

如果您想要更具体，请尝试在标题的 p 标签中添加类（如果您想要调整某些标签的大小）。

桌面

```
h1, h1.alt { width:100%; } 
```

移动的

```
h1.alt { width: 70%; } 
```

以上只会改变 H1 的类 alt 应用于它们。

# php - 语法错误，意外 'Â Â Â ' (T_STRING)

> ID：15067407
> 
> 赞同：2
> 
> 时间：2013-02-25T12:51:36.890
> 
> 标签：php

为什么我的 PHP 邮件代码总是给出：

> 语法错误，第 4 行 C:\xampp\htdocs\GSP\members.php 中的意外 'Â Â Â ' (T_STRING)

```
<?php
if(!isset($_POST['email'])) {

    $email_to = 'kennydharmawan@gmail.com'; //this is line 4
    $email_subject = "GSP Rent Order";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['unit']) ||
        !isset($_POST['startdate']) ||
        !isset($_POST['enddate']) ||
        !isset($_POST['telephone']) ||
        !isset($_POST['rname']) ||
        !isset($_POST['city']) ||
        !isset($_POST['adress'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $name = $_POST['name'];
    $email_from = $_POST['email'];
    $unit = $_POST['unit'];
    $startdate = $_POST['startdate'];
    $enddate = $_POST['enddate'];
    $telephone = $_POST['telephone'];
    $rname = $_POST['rname'];
    $city = $_POST['city'];
    $adress = $_POST['adress'];

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
    $phone_exp = "/^[1-9][0-9]{0,15}$/";
  if(!preg_match($string_exp,$name)) {
    $error_message .= 'The Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$rname)) {
    $error_message .= 'The Recipient Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$city)) {
    $error_message .= 'The City you entered does not appear to be valid.<br />';
  }
  if(!preg_match($phone_exp,$telephone)) {
    $error_message .= 'The Phone Number you entered does not appear to be valid.<br />';
  }
  if(strlen($adress) < 2) {
    $error_message .= 'The Adress you entered do not appear to be valid.<br />';
  }
  list($dd,$mm,$yyyy) = explode('/',$startdate);
  if (!checkdate($mm,$dd,$yyyy)) {
        $error_message .= 'The Start Date you entered do not appear to be valid.<br />';
  }
  list($dd,$mm,$yyyy) = explode('/',$enddate);
  if (!checkdate($mm,$dd,$yyyy)) {
        $error_message .= 'The End Date you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "Name: ".clean_string($name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Unit: ".clean_string($unit)."\n";
    $email_message .= "Start Date: ".clean_string($startdate)."\n";
    $email_message .= "End Date: ".clean_string($enddate)."\n";
    $email_message .= "Telephone Number: ".clean_string($telephone)."\n";
    $email_message .= "Recipient Name: ".clean_string($rname)."\n";
    $email_message .= "Recipient City: ".clean_string($city)."\n";
    $email_message .= "Recipient Adress: ".clean_string($adress)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  

echo "Thank you for contacting us. We will be in touch with you very soon."
}
?> 
```

为什么老是说这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T14:46:08.980

您的问题是 PHP 文件已保存有奇异的空白字符 - 即不是标准空格，而是一些其他字符呈现为空格（甚至根本不显示），但 PHP 无法解析。

删除第 3 行和第 4 行的所有空白字符，重新键入它们，然后保存文件。（这*都是*空白，包括换行符和单词之间的空格）

这应该可以解决问题。

如果执行此操作后，您仍然收到错误，但在不同的行上，那么您也需要对该行重复该过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:03:05.747

我在您的代码中看到了一些错误：

尝试更换：

```
$email_to = 'kennydharmawan@gmail.com'; 
```

和：

```
$email_to = "kennydharmawan@gmail.com"; 
```

在这一行：

```
echo "Thank you for contacting us. We will be in touch with you very soon." 
```

你错过了一个“;”，所以修复它：

```
echo "Thank you for contacting us. We will be in touch with you very soon."; 
```

PS：尝试用双引号替换所有单引号（''用“”）我所有的字符串变量;）

萨卢多斯。

# html - -moz-transform: scale() 低图像质量

> ID：15067411
> 
> 赞同：0
> 
> 时间：2013-02-25T12:51:44.370
> 
> 标签：html, google-chrome, firefox, chromium

我想在点击时展开我的图片（[http://css-tricks.com/expanding-images-html5/](http://css-tricks.com/expanding-images-html5/)）。但我有一个问题。截图：

[http://img33.imageshack.us/img33/9841/030xu.png](http://img33.imageshack.us/img33/9841/030xu.png) - 在 Chrome

[http://storage2.static.itmages.com/i/13/0225/h_1361796223_3798534_0de4e000c5.png](http://storage2.static.itmages.com/i/13/0225/h_1361796223_3798534_0de4e000c5.png) - 在 Firefox 19 中。

如何在 Firefox 中修复低质量的图像？Ubuntu 12.10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:35:39.997

此问题已在 Firefox 20 中修复。

# ios - Cordova 2.3.0 在 iOS 上的 Safari 中打开链接

> ID：15067412
> 
> 赞同：1
> 
> 时间：2013-02-25T12:51:47.733
> 
> 标签：ios, cordova, jquery-mobile

我知道这已经被问了很多，但我几乎尝试了我能在这里找到的任何东西，但没有任何帮助。我想在本机 iOS 浏览器中打开带有“外部”类的链接，但我无法管理它。这是我尝试过的：

```
$('.external').live('click', function(event) {  
    event.preventDefault();                      
    var url = $(this).attr('href');             
    loadURL(url);                               
})   

function loadURL(url){
    var ref = window.open(url, '_system');
} 
```

在 phonegap 文档中，它现在应该在系统 webbrowser 中打开链接，但无论链接目标如何，它始终使用 InAppBrowser。我还在 config.xml 中将“OpenAllWhitelistURLsInWebView”设置为 false。没变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:06:49.053

你能仔细检查一下你的点击处理程序是否真的被调用了？如果您将附加事件处理程序的代码放在错误的位置（即在 onDeviceReady() 中，则不会调用单击处理程序）-> 链接将始终在应用程序内打开。我也在使用 jquery ".on"，因为 ".live" 在 jquery 1.9 中已被删除；我用于测试的。

我刚刚在 Cordova 2.4.0 上测试了以下代码，它可以工作。以下是一些重要的代码摘录：

HTML部分：

```
 <a class=".external" href="http://www.google.com">Go to external page</a> 
```

JAVASCRIPT部分：

```
 function loadURL(url){
        var ref = window.open(url, '_system');
    }

    $(function(){

      $('.external').on('click', function(event) {
         event.preventDefault();
         var url = $(this).attr('href');
         loadURL(url);
      });

    }); 
```

# php - 如何在 PHP 中创建显示更多帖子？

> ID：15067416
> 
> 赞同：2
> 
> 时间：2013-02-25T12:52:00.233
> 
> 标签：php, sql, database

如何创建仅在页面上显示数据库中的前几篇文章，在这些文章之后你有显示更多文章按钮，当你点击它时，它会在之前的文章之后显示另外几篇文章，然后你再次有显示更多帖子按钮显示接下来的几个帖子，直到没有更多帖子显示？像 Facebook 或 YouTube 这样的东西有他们的评论。

如果在表 all_posts_table 我有 2 列：id 和 post，这行代码将只显示前 5 个帖子：

```
$posts = mysql_query("SELECT * FROM all_posts_table ORDER BY id LIMIT 5");
while ($line_posts = mysql_fetch_assoc($posts)) {
$post = $line_posts['post'];
echo $post."<br>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:57:22.687

您必须使用`OFFSET`（或其缩写形式：）`LIMIT x,y`：

```
SELECT ... LIMIT 5 -- gives you the first 5 database entries

SELECT ... OFFSET 5 -- gives you all BUT the first 5 entries

SELECT ... LIMIT 5 OFFSET 10 -- gives you the 10 entries AFTER the first 5
SELECT ... LIMIT 5,10 -- that's the short form of LIMIT 5 OFFSET 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:03:19.157

您可以像这样`OFFSET`一起使用`LIMIT`：

```
$offset = isset ($_GET['offset']) ? $_GET['offset'] : 0;
$posts = mysql_query("SELECT * FROM all_posts_table ORDER BY id LIMIT 5 OFFSET $offset");
while ($line_posts = mysql_fetch_assoc($posts)) {
    $post = $line_posts['post'];
    echo $post."<br>";
}

echo "<a href='" . $_SERVER ['REQUEST_URI'] . "?offset=".($offset + 5)."'>Next</a>"; 
```

# javascript - KendoUI Grid 一次刷新即可更改过滤器和排序

> ID：15067417
> 
> 赞同：4
> 
> 时间：2013-02-25T12:52:07.437
> 
> 标签：javascript, jquery, kendo-ui, kendo-grid

我正在尝试设置过滤器和排序参数并一次更新我的网格，而不是两个单独的调用，例如：

```
grid.dataSource.filter({
    field: 'branchId',
    operator: 'eq',
    value: selectedBranchId
});
grid.dataSource.sort({
    field: 'id',
    dir: 'desc'
}); 
```

我试过了：

```
grid.dataSource.data({
    filter: {
      field: 'branchId',
      operator: 'eq',
      value: selectedBranchId
    },
    sort: {
      field: 'id',
      dir: 'desc'
    }
})
  grid.dataSource.read(); 
  grid.refresh(); 
```

这不起作用，并在控制台中给我以下错误：

```
Uncaught TypeError: Cannot read property 'slice' of null in kendo.all.min.js:13 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:30:16.880

要将多个操作合并为一个，请使用**[查询](http://docs.kendoui.com/api/framework/datasource#query)**方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-25T05:14:35.133

[查询](http://docs.telerik.com/KENDO-UI/api/javascript/data/datasource#methods-query)是您需要的。

另一种解决方法是间接设置过滤器和排序，然后在需要时调用 fetch 方法：

```
dataSource._filter = yourFilter;
dataSource._sort = yourSort;
dataSource.fetch(); 
```

当您的 dataSource 已经包含诸如 page、take、skip 之类的查询设置时，第二种情况可能很有用。它们将被查询方法覆盖，但通过间接设置过滤器/排序保持不变。

# objective-c - AFNetworking JSON 解析 - 未知原因失败

> ID：15067418
> 
> 赞同：-1
> 
> 时间：2013-02-25T12:52:09.000
> 
> 标签：objective-c, json, parsing, afnetworking

我试图解析一些 JSON。为简单起见，我将使用 github 上的默认示例进行解释：运行时：

```
NSURL *url = [NSURL URLWithString:@"http://httpbin.org/ip"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation
JSONRequestOperationWithRequest:request success:^(
    NSURLRequest *request, NSHTTPURLResponse     *response, id JSON) {
    NSLog(@"IP Address: %@", [JSON valueForKeyPath:@"origin"]);
    } failure:nil];

[operation start]; 
```

我得到了正确的输出记录。但是，当我将示例的内容（基本上是 1 个元素）复制到 txt 或 html 文件（因此 URLWithString 获取 @"http://my server address/file.txt"）时，将其放在我的测试服务器上并尝试从那里赞美，我没有输出。这有什么问题？谢谢你的时间！

（注意：如果我去 http:// 我的服务器地址 /file.txt 我可以清楚地看到那里的内容，所以这不是问题）

编辑：按照建议，内容是：“{“origin”：“10.44.119.100”}”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:32:49.163

您的问题可能与您将内容作为文本文件 ( `.txt`) 而不是 JSON ( `Content-Type: application.json`/`.json`扩展名) 提供的事实有关。AFNetworking 严格遵守 HTTP 标准，以防止出现意外行为。在您的服务器上设置正确的`Content-Type`标头，或者（作为黑客）`AFJSONRequestOperation +addAcceptableContentTypes:`添加`text/plain`.

作为元注释：在 Stack Overflow 上提问时，细节很重要。如果您发布了您在控制台中看到的错误，那么确定问题所在会容易得多。同样，*近似*代码不是*实际*代码；如果您有问题，请具体说明发生了什么。细节很重要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T13:51:05.567

您应该先对 json 数据进行编码，然后将其写入文本文件，当您从文件中读取数据时...首先解码数据...

**编辑：** 用简单的http替换JSON操作并检查你是否能够从那里获取数据......如果你是那么JSONOperation基本上是在寻找不在文本文件中的json响应......我猜

```
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:request];

[operation setUploadProgressBlock:^(NSInteger bytesWritten,long long totalBytesWritten,long long totalBytesExpectedToWrite)
 {

     NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);

 }];

[operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
{

    NSString *str = [[NSString alloc]initWithData:responseObject encoding:NSUTF8StringEncoding];
    NSLog(@" Success %@",str);
   // id response = AFJSONDecode(responseObject, nil);

    [self requestSucceed:response];
}
                                  failure:^(AFHTTPRequestOperation *operation, NSError *error)
{
    NSLog(@"error: %@",  operation.responseString);
}]; 
```

# cluster-analysis - 如何对分类变量进行聚类？

> ID：15067420
> 
> 赞同：1
> 
> 时间：2013-02-25T12:52:10.913
> 
> 标签：cluster-analysis, mahout

用于聚类分类数据的最合适的机器学习算法系列是什么？假设我们有以下数据集：

```
V1        V2        V3        V4
"v1a"     "v2b"     "v3b"     "v4c"
"v1b"     "v2f"     "v3a"     "v4c"
"v1a"     "v2e"     "v3b"     "v4c" 
```

有没有办法以某种方式将它们聚集在一起？我对通过 Apache Mahout 这样做特别感兴趣。任何提示\想法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:25:17.810

*您首先*需要回答的问题是：

**什么是集群？**

显然，许多现有的集群定义（通过小于 epsilon 的欧几里德距离的步长连接）等将没有用处。

有一些技巧可以对这些数据进行矢量化，以便您仍然可以在其上运行 k-means。

但更多时候，结果将*毫无用处*，因为人们没有*首先*考虑他们在做什么。

所以首先尝试找出你想做什么，然后寻找工具来做到这一点。

# python - 将带有 **kwargs 错误的值线程化并传递给 TypeError

> ID：15067421
> 
> 赞同：4
> 
> 时间：2013-02-25T12:52:11.690
> 
> 标签：python, multithreading, class, dictionary, keyword-argument

我对 Python 很陌生，并且正在研究通过这篇文章对某些代码使用线程： [Python - 使用线程或队列迭代调用函数的 for 循环](https://stackoverflow.com/questions/12868956/python-using-threads-or-a-queue-to-iterate-over-a-for-loop-that-calls-a-functi)

我想知道为什么这个简单的示例代码会出错

```
Error: line 1: TypeError: file <maya console> line 4: __init__() got
an unexpected keyword argument 'A' # 
```

我的代码：

```
import threading
class Test(threading.Thread):
    def __init__(self, **kwargs):
        super(Test, self).__init__( **kwargs)
        self.__dict__.update(**kwargs)

A = None
B = 1   
test = Test(A = A, B = B)
print test.A
print test.B 
```

我的假设是它与`super(Test, self).__init__( **kwargs)`通话有关，但我不确定如何解决它。我的目标是传递大量的论点，这就是我`**kwargs`开始使用的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:58:18.857

您将参数 A 和 B 传递给不需要它们的 Thread 构造函数。可能您应该只调用不带参数的超级构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:58:23.397

`threading.Thread.__init__`期望（最多）`group`, `target`, `name`, `args`,`kwargs`和`verbose`关键字参数。

由于您有大量额外的参数（可能超过`threading.Thread.__init__`预期的六个），那么显式提取这六个并处理其余的可能会更少

```
self.__dict__.update(**kwargs) 
```

* * *

```
import threading

class Test(threading.Thread):
    def __init__(self, **kwargs):
        super(Test, self).__init__(
            **{k: v for k in 'group target name args kwargs verbose'.split()
               if k in kwargs})
        self.__dict__.update(**kwargs)

A = None
B = 1
test = Test(A=A, B=B)
print test.A
print test.B 
```

* * *

请注意，如果您`__init__`不带参数调用：

```
super(Test, self).__init__() 
```

`threading.Thread`那么将不会设置by 使用的一大堆属性：

```
class Thread(_Verbose):    
    def __init__(self, group=None, target=None, name=None,
                 args=(), kwargs=None, verbose=None):
        assert group is None, "group argument must be None for now"
        _Verbose.__init__(self, verbose)
        if kwargs is None:
            kwargs = {}
        self.__target = target
        self.__name = str(name or _newname())
        self.__args = args
        self.__kwargs = kwargs
        self.__daemonic = self._set_daemon()
        self.__ident = None
        self.__started = Event()
        self.__stopped = False
        self.__block = Condition(Lock())
        self.__initialized = True
        # sys.stderr is not stored in the class like
        # sys.exc_info since it can be changed between instances
        self.__stderr = _sys.stderr 
```

我不认为这是你想要发生的...

# clojure - Clojure - 保存记录类型的注册表

> ID：15067423
> 
> 赞同：2
> 
> 时间：2013-02-25T12:52:14.337
> 
> 标签：clojure, record

我正在尝试实现记录构造函数之间的数据调度。调度是由一个名称（它是一个字符串，与数据一起接收）完成的。我希望每个新记录类型都能自动注册调度。例如，在 Scala 中，我会做这样的事情：

```
object Dispatcher {
  val dispatchMap = scala.collection.mutable.Map[String, Creator]()
  def += (crt: Creator) { dispatcherMap += (crt.name, crt) }
}

abstract class Creator[C <: Creation](val name: String) {
  Dispatcher += this

  def apply(consData: ConstructionData): C

} 
```

这样每次`Creator`创建类型的对象时，都会在 中注册，`Dispatcher`以后可以通过它的名称找到并通过`ConstructionData`来创建`Creation`。

Clojure 中的等价物是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T14:09:26.347

我会使用 map 和普通的旧函数方法，如下所示：

```
(ns creator)

(def dispatcher (atom {}))

(defn defcreator [name apply-fn]
  (swap! dispatcher assoc name apply-fn)
  apply-fn)

(defcreator :abc-creator (fn [cons-data] (do-something cons-data) )) 
```

# oauth-2.0 - XPages 社交商务工具包

> ID：15067425
> 
> 赞同：0
> 
> 时间：2013-02-25T12:52:20.307
> 
> 标签：oauth-2.0, xpages, xpages-extlib, ibm-sbt

我正在尝试在本地主机上实现 XPagesSBT。我已经关注了这篇文章 [http://heidloff.net/home.nsf/dx/12152011034545AMNHECAP.htm](http://heidloff.net/home.nsf/dx/12152011034545AMNHECAP.htm)和 Niklas 的 SBT 文档，并试图实现 dropbox oAuth。

我也放在`http://localhost/XPagesSBT.nsf/ and http://localhost/WebSecurityStore.nsf`根文件夹中

但我仍然收到此错误

```
Error while executing JavaScript action expression
Script interpreter error, line=1, col=26: Error calling method 'isAuthenticated()' on java class 'com.ibm.xsp.extlib.sbt.services.client.endpoints.DropboxEndpoint'
No application is registered with id XPagesSBT and provider Dropbox

 if(!@Endpoint("dropbox").isAuthenticated()) {@Endpoint("dropbox").authenticate(true);} 
```

我需要对 XPagesSBT db 进行任何其他配置/设置吗？或者它不适用于本地主机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:13:39.687

我不记得了，但阅读我的博客文章你链接它说你不应该使用匿名：

“此外，还有一些与安全相关的设置需要了解。首先，您需要将使用应用程序密钥的文档的访问权限分配给您签署两个 NSF 所用的 ID。在上面的屏幕截图中，我输入了OpenNTF 服务器和我自己的用户 ID。当您使用 Web UI 执行此操作时，这些名称将添加到文档的作者字段和读者字段中。

在最后一步中，您需要配置安全存储的 ACL。匿名用户不得访问此数据库。您希望能够使用 Social Enabler OAuth 功能的所有用户都需要具有作者访问权限。这样他们的用户密钥就可以存储在这个数据库中，这样他们只需执行一次 OAuth 舞蹈。"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:21:12.543

它应该在本地主机上工作。这看起来像是 SBT 无法从 websecuritystore.nsf 读取安全令牌的配置问题。您是否使用管理员 ID 创建了 Dropbox 应用程序密钥并使用正确的 ID 签署了 websecuritystore？

帕德莱克

# android - 在内部存储中保存持久文本文件

> ID：15067427
> 
> 赞同：1
> 
> 时间：2013-02-25T12:52:20.797
> 
> 标签：android

这个问题他也许更多的是寻求一些建议，如何以最好的方式保存一些数据。我正在做一个应用程序，通过将图像的文件路径与选定的联系人一起保存，我用设备中 ContactsContract 中的联系人标记设备中的图像，并且通过联系人，我想保存 ID 或名称就足够了那个联系方式？

我需要一些建议，我应该如何使用 FileOutputStream 来写入这些数据。我应该，我可以为文件中的每一行保存像“filepath，id”这样的字符串吗？或者最好的方法是什么？我还需要搜索文件路径和联系人是否已经在文件中，以及能够将多个联系人标记到图像中。首先，我认为我可以为每个图像使用一个文件并添加所有带有它标记的联系人，但这可能不是一个好方法吗？！

提一些建议！

编辑：

如果我使用共享首选项，那么我可以使用联系人 ID 作为键，使用图像路径作为值吗？那么我可以添加几个具有不同值的唯一 ID 键吗？但我想，我不能为一个键添加多个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:59:46.637

你需要某种结构化的数据系统。

你试过 SQLite 吗？- SQLite 似乎很适合这项工作。

```
CREATE TABLE `contact`('id' INT , 'contact_id' TEXT, 'image_file_path' TEXT, TEXT, PRIMARY KEY('id')) 
```

您的搜索功能很容易；

```
SELECT * FROM contact WHERE contact_id ='1' 
```

我会从[这里](http://developer.android.com/guide/topics/data/data-storage.html#db)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:12:15.123

编辑：

您可以通过将其转换为 jsonstring 并放入 sharedPreferences 来插入联系人详细信息。

例子：

```
 JSONObject obj=new JSONObject();
    obj.put("Contactid", 1);
    obj.put("ImagePath", "/sdcard/download/a.png");

String jsonstring=obj.toString(); 
```

如果您有多个联系人而不是使用 json Array 像这样

```
JSONArray array=new JSONArray("ContactDetails");
for(int i=0;i<noofcontacts;i++)
{
        JSONObject obj=new JSONObject();
        obj.put("Contactid", 1);
        obj.put("ImagePath", "/sdcard/download/a.png");
        array.put(obj);
}
jsonstring= array.toString(); 
```

像这样在 SharedPreferences 中保存联系方式

```
 SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putString("contactDetails", jsonstring);
    editor.commit(); 
```

现在获取 SharedPreference 值

```
 SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    String jsoncontactdetails= sharedPreferences.getString("contactDetails", null); 
```

我希望你知道 Json Parsing。

* * *

在这种情况下，使用数据库是最好的选择。因为很难维护内部存储中的每个文件，并且还需要一些处理时间。最好是联系人数据库中联系人的图片路径。

# javascript - RequireJS - skipDirOptimize: true 设置不会优化我的主模块

> ID：15067430
> 
> 赞同：3
> 
> 时间：2013-02-25T12:52:26.923
> 
> 标签：javascript, requirejs, uglifyjs

如果我使用 RequireJS 来优化我的整个项目，如果我使用设置 skipDirOptimize: true，我的主模块将不会得到优化/丑化。据我了解，除了非构建层 JS 文件外，所有内容都应该进行优化。这是一个错误还是我不理解这个参数的正确用法？

这是我的requirejs配置：

```
{
    appDir: '../project',
    mainConfigFile: '../project/assets/js/main.js',
    dir: '../httpdocs',
    optimize: "uglify",
    //Introduced in 2.1.2: If using "dir" for an output directory, normally the
    //optimize setting is used to optimize the build layers (the "modules"
    //section of the config) and any other JS file in the directory. However, if
    //the non-build layer JS files will not be loaded after a build, you can
    //skip the optimization of those files, to speed up builds. Set this value
    //to true if you want to skip optimizing those other non-build layer JS
    //files.
    skipDirOptimize: true,
    generateSourceMaps: false,
    normalizeDirDefines: "skip",
    uglify: {
        toplevel: true,
        ascii_only: true,
        beautify: false,
        max_line_length: 1000,
        defines: {
            DEBUG: ['name', 'false']
        },
        no_mangle: false
    },
    optimizeCss: "standard",
    removeCombined: true,
    modules: [
        {
            name: '../main'
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T13:10:08.720

在模块中使用相对路径可能会导致 r.js 在决定是否对其进行优化时无法将其识别为构建包。

我有一个类似的问题（构建包没有被优化），不是使用相对模块路径，而是使用路径配置来允许我的模块以与我的文件夹结构不同的方式命名：

```
({
    ...
    skipDirOptimize: true,
    paths: {
        'MyLibrary': ''
    },
    modules: [
       { name: 'MyLibrary/Main' }
    ],
    ...
}) 
```

这会导致 r.js (2.1.8) 中的模块名称变为`/Main`，因此当它构建其`_buildPathToModuleIndex`映射时，由于有两个斜杠（例如`C:\dev\project\output\\Main`），键将不正确。

优化循环决定一个模块是否是一个构建包（因此即使在 时也需要优化）的方式是通过使用它的文件名（例如）在映射中`skipDirOptimize: true`查找它。由于它在带有两个斜线的地图中，它不会找到它。因此，它不会被视为构建包，也不会被优化。`_buildPathToModuleIndex``C:\dev\project\output\Main`

尝试将一些`console.log`s 放入 r.js 中它构建和访问的地方，`_buildPathToModuleIndex`以查看它放入了什么以及它用于查找它的内容。

对于我的问题，解决方案是为`'MyLibrary/Main': 'Main'`（不幸的是重复）添加路径条目。我不确定你的项目结构是什么，但是如果你设置`baseUrl: '../`然后简单地调用你的模块`main`呢？

# php - $_POST 中的 PHP“使用未定义的常量”

> ID：15067436
> 
> 赞同：0
> 
> 时间：2013-02-25T12:52:55.033
> 
> 标签：php, mysql, variables, post, constants

对此是新的，但已经搜索但没有成功。我的脚本出现以下错误：

> “注意：使用未定义的常量 sStatus - 假定为 'sStatus'”...

和

> “警告：mysql_numrows() 期望参数 1 是资源，布尔值在”...

我希望后者是由于第一个问题。如果您需要更多代码，请告诉我，但它涉及的部分是：

第 31 行：

```
$sStatus = $_POST['sStatus']; 
```

第 43 至 53 行：

```
if (sStatus == "all")
{
    $query="SELECT * FROM tickets WHERE RequestBy='$sName'";
}
else
{
    $query="SELECT * FROM tickets WHERE RequestBy='$sName' AND Status='$sStatus";
}
//put query in result and count rows ready to loop for table display
$result=mysql_query($query);
$num=mysql_numrows($result); 
```

sStatus 从主页上的表单中提取，为“0”、“1”或“all”。相同的变量在脚本中进一步使用，if 将“0”或“1”更改为“open”或成功“关闭”。

非常感谢任何帮助。马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:55:01.770

更改`$sStatus = $_POST['sStatus'];`为：`$sStatus = isset($_POST['sStatus'])?$_POST['sStatus']:"";`

更改`if (sStatus == "all")`为`if ($sStatus == "all")`=> 缺失`$`

更改`$num=mysql_numrows($result);`为`$num=mysql_num_rows($result);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:55:35.433

**错误一：**

在第 43 行使用 of`sStatus`而不是。`$sStatus`

**错误2：**

该函数被调用`mysql_num_rows()`。

附带说明：请不要使用`mysql_*`函数。请改用[PDO](http://php.net/manual/en/ref.pdo-mysql.php)，尤其是对于准备好的语句，这也将提高应用程序的安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:55:39.873

您缺少一个“$”：

```
if ($sStatus == "all") 
```

那应该摆脱警告。此外，您在第二个查询中缺少单引号：

```
$query="SELECT * FROM tickets WHERE RequestBy='$sName' AND Status='$sStatus'"; 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:57:43.923

```
 if ($sStatus == "all")
 {
  $query="SELECT * FROM tickets WHERE RequestBy='$sName'";
 }
else
{
$query="SELECT * FROM tickets WHERE RequestBy='$sName' AND Status='$sStatus";
} 
```

你错过了 $sStatus "$"，这就是为什么它假设它是一个常数。我同意，您应该使用 PHP **PDO**对象进行数据库操作，它使查询非常容易使用..

# java - 解析日期将一天添加到格式化日期

> ID：15067443
> 
> 赞同：1
> 
> 时间：2013-02-25T12:53:06.317
> 
> 标签：java, date, gwt, smartgwt

这个简单的代码将`Date`字符串转换为我想要的格式。但是，在格式化日期时，会添加一个额外的日期。当 onChanged 事件在 SmartGWT 中的 RelativeDateItem 控件上触发时，解析完成。但是，我认为使用该组件不会影响日期解析。

```
private static String DATE_FORMAT = "dd.MMM.yyyy kk:mm";
...
private void changeDateFormat()
{      
     DateUtil.setShortDatetimeDisplayFormatter(new DateDisplayFormatter()
     {
        public String format(Date date)
        {
           System.out.println("setShortDatetimeDisplayFormatter = " + date.toString());
           if(date == null)
           {
              return null;
           }
           else
           {
              final DateTimeFormat dateFormatter = DateTimeFormat.getFormat(DATE_FORMAT);
              System.out.println("Formatted date = " + dateFormatter.format(date));
              return dateFormatter.format(date);
           }

        }
     });

     // It is a requirement that we implement a custom date parser or the onChanged event
     // will not fire.

     DateUtil.setDateParser(new DateParser()
     {
        public Date parse(String dateString)
        {           
           System.out.println("Entering parse = " + dateString);
           final DateTimeFormat format = DateTimeFormat.getFormat(DATE_FORMAT);

           System.out.println("Exiting parse = " + format.parse(dateString));
           return format.parse(dateString);

        }
     });
  } 
```

调试：

```
setShortDatetimeDisplayFormatter = Tue Feb 19 00:00:00 EST 2013
Formatted date = 19.Feb.2013 24:00
Entering parse = 19.Feb.2013 24:00
Exiting parse = Wed Feb 20 00:00:00 EST 2013
Entering parse = 19.Feb.2013 24:00
Exiting parse = Wed Feb 20 00:00:00 EST 2013
setShortDatetimeDisplayFormatter = Wed Feb 20 00:00:00 EST 2013
Formatted date = 20.Feb.2013 24:00 
```

它会触发两次，因为`RelativeDateItem`控件同时包含选取器文本和相邻的标签文本，因此必须对两者进行格式化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:12:25.683

使用这种格式：

```
dd.MMM.yyyy HH:mm 
```

看起来`kk`格式和解析是不对称的。我以前从未意识到这一点。

但是，Java 的日期处理不再让我感到惊讶了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:06:46.147

当 DateTimeForfat 解析字符串“19.Feb.2013 24:00”时，它会看到`24:00 which is equivalent to 1 day 0 hours 0 minutes and 0 seconds`.

因此，1 天被添加到日期，即 19 + 1 = 20。所以它显示日期为 2 月 20 日。

如果您输入字符串为“19.Feb.2013 23:59:59”，它只会给您 2 月 19 日。

# css - 与移动设备相关的背景图案效果

> ID：15067445
> 
> 赞同：0
> 
> 时间：2013-02-23T19:22:32.803
> 
> 标签：css, graphics, background-image

我昨晚想知道这个，找不到直接的答案，所以我会在这里问。在极端背景下，您不希望看到恒定但微妙的效果。对于移动设计，你如何适应这种情况，如果图案大于屏幕尺寸，背景会发生什么？我出于某些原因问这个，因为我不知道背景会发生什么。它不会显示、缩小或重复吗？您会为此在特殊背景下编写代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:55:05.077

取决于你的CSS....

由于您可以在 CSS 中设置 no-repeat、center、cover 和各种其他选项。因此，如果你使用 width:100%, height:100% 那么它会缩小，或者你可以使用 cover 来做同样的事情。如果您想要重复的模式，那么您可以使用重复等。您甚至可以为手机和平板电脑指定不同的升背景，例如：

```
@media only screen and (min-width:480px) and (max-width:767px){
html, body {background-image:url("image.jpg");}
} 
```

您会发现，使用 iPhone 和 iPad，它们会先放大再缩小，图像看起来很可怕，但是使用 css 封面元素可以解决这个问题。

# three.js - 如何使用 Three.js 挤压方法渲染建筑物？

> ID：15067455
> 
> 赞同：2
> 
> 时间：2013-02-25T12:53:54.003
> 
> 标签：three.js, procedural

我正在尝试使用 Three.js 以程序方式渲染 3D 建筑。完成此操作的方法之一是挤压正方形/矩形。请参见此处的图 19：[http ://www.gamesitb.com/SurveyProcedural.pdf](http://www.gamesitb.com/SurveyProcedural.pdf)

我查看了有关 ExtrudeGeometry API 的 Three.js 文档，但它的用法不是很清楚。已经在网络和这个论坛上搜索了可能的示例/代码片段 - 徒劳无功！对此的任何指示都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:10:11.557

首先要查看的是 THREE.js zip 中提供的这个示例。

示例/webgl_geometry_shapes.html

接下来的位用于示例目的。

关键点是您创建了一系列 Vector2（我提到的文件中的第 144-165 行）来定义建筑物的角落。

```
var californiaPts = [];
californiaPts.push( new THREE.Vector2 ( 610, 320 ) );
californiaPts.push( new THREE.Vector2 ( 450, 300 ) );
californiaPts.push( new THREE.Vector2 ( 392, 392 ) );
californiaPts.push( new THREE.Vector2 ( 266, 438 ) ); 
```

下一步是将这些线转换为 THREE.Shape（第 167 行）

```
var californiaShape = new THREE.Shape( californiaPts ); 
```

然后你想挤出形状。

```
var extrudeSettings = { amount: 20 }; // bevelSegments: 2, steps: 2 , bevelSegments: 5, bevelSize: 8, bevelThickness:5

var geometry = californiaShape.extrude(extrudeSettings); 
```

此时，您将拥有一个几何对象的形状，因此可以将其变成网格，您可以对其应用材质。

# c# - 从后面的代码访问 javascript 函数

> ID：15067458
> 
> 赞同：1
> 
> 时间：2013-02-25T12:53:56.343
> 
> 标签：c#, javascript

我在文档中准备了一个函数：

```
$(document).ready(function () {
    function test1() {
        alert('successful');
    }
}); 
```

现在在后面的代码（C#）中我有这个：

```
ScriptManager.RegisterStartupScript(this, typeof(Page),"Con121", "test1();", true); 
```

这不会弹出警报...但是如果我将其从就绪功能中取出，则可以正常工作。我需要这个准备工作。

我什至尝试过这样做但没有成功：

```
$(document).ready(function () {
    window.test1 function test1() {
        alert('successful');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:55:30.747

尝试：

```
var test1;

$(document).ready(function () {
    test1 = function () {
        alert('successful');
    }
}); 
```

这里的问题是范围界定。由于您是`test1`从另一个函数 ( `ready`) 中声明您的函数，因此您从代码隐藏创建的启动脚本将无法从`ready`函数外部访问它。

此外，您需要确保您的启动脚本被触发，`jQuery.ready`否则您可能会尝试调用未分配的变量。

最后，如果不需要从 withing 明确声明函数`ready`，只需将其完全移出，以便函数声明和赋值都存在于全局范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:00:22.793

（部分）您的问题是您的`ScriptManager.RegisterStartupScript`调用将`test1();`调用放在页面的 HTML 中的某个位置，它会立即执行，但是`$(document).ready(function () { ... });`包装*定义*意味着该函数直到页面（包括调用）*之后*`test1`才被调用已经加载。

 *没有理由等待文档准备好定义您的函数，那么为什么不直接定义它呢？

或者，为什么不删除并在定义之后立即`ScriptManager.RegisterStartupScript`调用呢？`test1();`这将在页面完成加载后立即调用它：

```
$(document).ready(function () {
    function test1() {
        alert('successful');
    }
    test1();
}); 
```*

# google-apps-script - UrlFetch 与自定义用户代理字符串？

> ID：15067462
> 
> 赞同：17
> 
> 时间：2013-02-25T12:54:14.960
> 
> 标签：google-apps-script, user-agent

是否可以更改用于 Google Apps 脚本`UrlFetchApp.fetch`请求的用户代理字符串？

[这个](http://productforums.google.com/d/topic/apps-script/ejLKdBKHK24/discussion)2010 年的讨论暗示 Google Apps 脚本中的 UrlFetch 模块支持将`User-Agent`标头添加到可选`headers`集合中，就像 Google App Engine 的 UrlFetch 模块一样。但是，[GAS 文档](https://developers.google.com/apps-script/class_urlfetchapp)对此没有任何说明。我制作的测试脚本也显示它不起作用。

测试脚本：

```
function testUserAgentString(){
  var page;
  try {
    page = UrlFetchApp.fetch('http://www.myuseragent.net/',
        {headers: {"User-Agent":
            "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"
        }}).getContentText();
    Logger.log(page);
  } catch(_) {}
} 
```

日志输出（减去无关的 HTML）是：

`Mozilla/5.0 (compatible; GoogleDocs; script; +http://docs.google.com)`

这是 GAS 执行 UrlFetch 请求时使用的默认用户代理字符串。

我错过了什么或做错了什么？

**编辑：**由于目前这是不可能的，我根据 Arun 的建议在问题跟踪器上提出了增强[请求。](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2544)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T23:45:39.880

这在今天是不可能的。请使用您的用例在[问题跟踪器](https://code.google.com/p/google-apps-script-issues/)上记录增强请求，以便对其进行审查和考虑。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-06-25T17:08:47.530

您可以通过 UrlFetchApp 以这种方式发送标头信息：

```
var url = "http://mymagentohost/api/rest/products?limit=2"

var params = { 
  headers: { 'Content-Type': "application/json", 'Accept': "application/json",
             'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36'},
  muteHttpExceptions: true,
  method: "GET",
  contentType: "application/json",
  validateHttpsCertificates: false,
};

var response = UrlFetchApp.fetch(url, params); 
```

只需在标题部分添加用户代理信息。希望能帮助到你！

归功于：[Aditya Advani](https://stackoverflow.com/a/43094020/1499769)

# java - 在Java中将向量写入和读取到序列化文件？

> ID：15067469
> 
> 赞同：1
> 
> 时间：2013-02-25T12:54:33.837
> 
> 标签：java, serialization

我正在尝试将向量转换为序列化文件。该向量由我创建的一个类组成。下面是课堂。

```
public class Product implements java.io.Serializable{
    public String description;
    public String code;
    public double price;
    public String unit;

    public Product(String w, String x, double y, String z){ //Constructor for Product
        description = w;
        code = x;
        price = y;
        unit = z;
    }
} 
```

我创建了一个向量：

```
BufferedReader in =new BufferedReader(new InputStreamReader(System.in));
        ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("file.ser"));
         Vector <Product> products=new Vector();//declare a vector of products
         for(int i=0;i<101;i++){//enter the values for the class
            System.out.print("Description: ");
            String w = in.readLine();
            char f = w.charAt(0);
            if(f=='#'){//Statement to break out of the loop when the user enters #                       
                System.out.println();
                break;
            }else{//Code to read input from user
                System.out.print("Code: ");
                String x = in.readLine().toUpperCase();
                boolean finished=false;
                while(!finished){
                    System.out.print("Price: ");
                    String a =in.readLine();   
                    try{//try catch statement 
                        double y= Double.parseDouble(a);
                        System.out.print("Unit: ");
                        String z = in.readLine();
                        Product temp = new Product(w, x, y, z);
                        products.insertElementAt(temp, i);//values are assigned to 
                        //the vector elements 
                        System.out.println();
                        finished=true;
                    }
                    catch(Exception e){
                        System.out.println("do not enter letters for the price");

                    }
                }
            }
         } 
```

所以我有一个产品向量。我需要知道的是如何将它写入序列化文件file.ser，然后如何从该文件读回Product的向量。我一整天都在试验这个，似乎无法正确或在互联网上找到任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:26:07.480

我添加了一个`toString()`方法 do 类`Product`来获得正确的调试输出：

```
public class Product implements Serializable {
  // ....

  @Override
  public String toString() {
    return description + "/" + code + "/" + price + "/" + unit;
  }
} 
```

您可以将整个向量实例放到`ObjectOutputStream`.

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.Vector;

public class Main {

  private static final String FILE_NAME = "file.ser";

  public static void main(String[] args) throws Exception {

    final Vector<Product> products = new Vector<Product>();

    products.add(new Product("1", "1", 1.0, "1"));
    products.add(new Product("2", "2", 2.0, "2"));
    products.add(new Product("3", "3", 3.0, "3"));
    products.add(new Product("4", "4", 4.0, "4"));

    System.out.println("Original products : " + products);

    final ObjectOutputStream out = new ObjectOutputStream(
        new BufferedOutputStream(new FileOutputStream(FILE_NAME)));

    try {
      out.writeObject(products);
    } finally {
      out.close();
    }

    final ObjectInputStream in = new ObjectInputStream(
        new BufferedInputStream(new FileInputStream(FILE_NAME)));

    final Vector<Product> productsFromFile = (Vector<Product>) in.readObject();

    System.out.println("Products from file: " + productsFromFile);

  }

} 
```

输出是：

```
Original products : [1/1/1.0/1, 2/2/2.0/2, 3/3/3.0/3, 4/4/4.0/4]
Products from file: [1/1/1.0/1, 2/2/2.0/2, 3/3/3.0/3, 4/4/4.0/4] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T13:13:26.620

尝试以下类似的方法来编写一个可序列化的对象：

```
Product product = new Product("Apples", "APP", 1.99, 200);
try{
  OutputStream file = new FileOutputStream( "output.ser" );
  OutputStream buffer = new BufferedOutputStream( file );
  ObjectOutput output = new ObjectOutputStream( buffer );
  try{
    output.writeObject(product);
  }
  finally{
    output.close();
  }
}  
catch(IOException ex){
  System.out.println("Output failed.");
} 
```

要阅读它，请执行相反的操作，将结果放入对象中，如下所示：

```
Product product = (Product)input.readObject(); 
```

哪里`input`是`ObjectInputStream`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:20:17.560

我认为您忘记将向量添加到类中。在您的代码中，您将 temp 分配给新产品，然后将值添加到向量中。Vector 填充了新值，但 Vector 不是 Product 类的一部分。因此，数据仍然在 Vector 中，但永远不会通过可序列化的方式保存。（如果这是您尝试完成的）这是一个小示例（用 Java 处理编写）：

```
import java.io.*;
GameChar Elf, Troll;
void setup() {
  Elf = new GameChar(50, new String[] { 
    "bow", "sword", "dust"
  }
  );
  Troll = new GameChar(200, new String[] { 
    "bare hands", "big axe"
  }
  );
  try {
    ObjectOutputStream os = new ObjectOutputStream(new FileOutputStream(sketchPath+"/data/game.txt"));
    os.writeObject(Elf); 
    os.writeObject(Troll); 
    os.close();
  }
  catch (Exception e) {
    println(e);
  }
  Elf = null;
  Troll = null;
  try {
    ObjectInputStream is = new ObjectInputStream(new FileInputStream(sketchPath+"/data/game.txt"));
    Elf = (GameChar) is.readObject();
    Troll = (GameChar) is.readObject();
    println("Elf has "+ Elf.getHealth()+" health, and fights with "+ Elf.getWeapons());
    println("Troll has "+ Troll.getHealth()+" health, and fights with "+ Troll.getWeapons());
  }
  catch (Exception e) {
    println(e);
  }
}
void draw() {
}
static class GameChar implements Serializable {
  int health;
  String[] weapons;
  GameChar(int h, String[] w) {
    health = h;
    weapons = w;
  }
  int getHealth() {
    return health;
  }
  String getWeapons() {
    String weaponList = "";
    for (String weapon : weapons) 
      weaponList += weapon + " ";
    return weaponList;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:11:36.357

我认为您可以使用此示例来写入和读取文件：

[http://www.java-samples.com/showtutorial.php?tutorialid=392](http://www.java-samples.com/showtutorial.php?tutorialid=392)

您可以在 google 中搜索：“java 文件阅读器示例”

问候

# php - 关于 PHP 中的正则表达式

> ID：15067471
> 
> 赞同：2
> 
> 时间：2013-02-25T12:54:36.400
> 
> 标签：php, regex, screen-scraping

我在 PHP 方面表现不错（远非专家），但在 regexp 和抓取方面却是一个纯粹的新手。我想做一些抓取来帮助进行一些研究和教育自己，但我遇到了一个问题。我想从页面的以下部分提取奖品：

```
<th valign="top"> Prize pool:
</th>
<td> $75,000
</td></tr> 
```

不用说，奖池价值会发生变化。我想获得奖品，并且只获得这部分的奖品（在此示例中，脚本应打印出 75,000 美元）。

这是我到目前为止所拥有的：

```
preg_match('/Prize pool:\n<\/th>\n<td>(.*)/i', $file_string, $prize); 
```

但是，这会打印出来：

```
Prize pool:
</th> 
<td> $75,000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:28:23.770

```
preg_match('/Prize pool:.+(\$\d+(?:\.|,)\d+)/is', $file_string, $prize);
echo '<pre>' . print_r($prize, 1) . '</pre>'; 
```

像这样。

一点解释

`.`- 搜索任何单个字符，但不搜索换行符“\n”

`+`- 表示一次或多次重复

所以，`.+`意味着“奖池：”之后必须多于一个任意字符

`(...)`它被称为口袋。正则表达式中的每个口袋都将位于数组 ( `$prize`)的每个元素中

`$`在模式中意味着作为行尾，因此我们需要通过这样的转义将其转换为单个字符`\$`

`\d`- 表示从 0 到 9 的一个数字。而 \d+ 一个或多个数字

`(?:...)`这也是口袋，但它不会保存在 $prize 中，因为我们使用`?:`了之后`(`

我们知道`.`是任何单个字符，因此要将其转换为点，我们需要将其转义为`\.`，`\.|,`意味着我们正在寻找`.`或`,`

`/here pattern/i`这里的修饰符`i`意味着，正则表达式不会不区分大小写

`/here pattern/s`修饰符`s`意味着元字符`.`将包含换行符的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:03:27.837

`Prize pool:\s*<\/th>\s*<td>\s+(.*)\s+<\/td>`

如果您只想解析 HTML 以获取此值，只需使用正则表达式；无需使用完整的 HTML 解析器从 html 字符串中捕获数字。

使用[Rubular](http://rubular.com/)来测试你的正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:06:38.553

```
$reg = '~Prize pool:.*?td>\s*(.*?)\s*<~'; 
```

[rubular 演示](http://www.rubular.com/r/Vn1QiHZ1jT)

# sql - 动态 SQL 查询搜索

> ID：15067472
> 
> 赞同：0
> 
> 时间：2013-02-25T12:54:38.427
> 
> 标签：sql, sql-server, dynamic-sql

我正在尝试使用给定的参数构建一个 SQL 查询，但我得到一个奇怪的错误并且无法理解为什么。这是我的 SP 和结果

```
ALTER PROCEDURE [dbo].[sp_Photographers_Select_Search]
    @Date varchar(100),
    @PriceMin int,
    @PriceMax int,
    @CityID int

AS
BEGIN
    SET DATEFORMAT DMY
    DECLARE @SQL as varchar(2000)
    SET @SQL = 'SELECT *,
     (SELECT TOP (1) Price FROM  Packages WHERE PhotographerID = Photographers.PhotographerID ORDER BY Price) as PriceMin,
     (SELECT TOP (1) Price FROM  Packages WHERE PhotographerID = Photographers.PhotographerID ORDER BY Price DESC) as PriceMax,
     (SELECT COUNT(GalleryID) FROM Galleries WHERE PhotographerID = Photographers.PhotographerID AND Status = 1) as GalleryCount,
     (SELECT COUNT(CommentID) FROM Comments WHERE ContentID = Photographers.PhotographerID AND Status = 1 AND TypeID = 1) as CommentCount
     FROM Photographers WHERE 1 = 1  '

    IF @PriceMin <> 0 OR @PriceMax <> 0 BEGIN
        SET @SQL = @SQL + ' AND PhotographerID IN(SELECT PhotographerID FROM Packages WHERE Price BETWEEN '+@PriceMin+' AND '+@PriceMax+') '
    END

    IF @CityID > 0
        SET @SQL += ' AND CityID = '+@CityID+'' 

    SET @SQL = @SQL + ' AND  PhotographerID NOT IN (SELECT PhotographerID FROM Appointments WHERE Date = '''+@Date+''')'    

    EXEC (@SQL)
END

EXEC    @return_value = [dbo].[sp_Photographers_Select_Search]
        @Date = N'23.05.2013',
        @PriceMin = 0,
        @PriceMax = 0,
        @CityID = 34 
```

错误是

```
Msg 245, Level 16, State 1, Procedure sp_Photographers_Select_Search, Line 23
Conversion failed when converting the varchar value 'SELECT *,
     (SELECT TOP (1) Price FROM  Packages WHERE PhotographerID = Photographers.PhotographerID ORDER BY Price) as PriceMin,
     (SELECT TOP (1) Price FROM  Packages WHERE PhotographerID = Photographers.PhotographerID ORDER BY Price DESC) as PriceMax,
     (SELECT COUNT(GalleryID) FROM Galleries WHERE PhotographerID = Photographers.PhotographerID AND Status = 1) as GalleryCount,
     (SELECT COUNT(CommentID) FROM Comments WHERE ContentID = Photographers.PhotographerID AND Status = 1 AND TypeID = 1) as CommentCount
     FROM Photographers WHERE 1 = 1  ' to data type int. 
```

你能描述一下错误吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:07:18.357

`Cast`在 sql 语句中连接之前的数值，即 @PriceMin 、 @PriceMax 和 @CityID。

修改后的sql语句如下：

```
IF @PriceMin <> 0 OR @PriceMax <> 0 
BEGIN
    SET @SQL = @SQL + ' AND PhotographerID IN(SELECT PhotographerID FROM Packages WHERE Price BETWEEN '+ cast(@PriceMin as varchar(10)) 
    +' AND '+ cast(@PriceMax as varchar(10)) +') '
END

IF @CityID > 0
   SET @SQL += ' AND CityID = '+ cast(@CityID as varchar(10) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:31:45.937

Romil 的回答解决了您提出的问题，但您应该问的是如何将此查询更改为非动态的。我不知道您的数据库结构，因此需要验证此查询，但我所做的 WHERE 子句更新将允许您的查询在没有动态的情况下运行。这将显着提高性能，减少注入风险，并且是处理这些类型查询的更好方法。

```
ALTER PROCEDURE [dbo].[sp_Photographers_Select_Search]
    @Date       AS VARCHAR(100),
    @PriceMin   AS INT,
    @PriceMax   AS INT,
    @CityID     AS INT

AS
BEGIN
    SET DATEFORMAT DMY
    SELECT  *,
            (SELECT TOP (1) Price FROM Packages WHERE PhotographerID = Photographers.PhotographerID ORDER BY Price) AS PriceMin,
            (SELECT TOP (1) Price FROM Packages WHERE PhotographerID = Photographers.PhotographerID ORDER BY Price DESC) AS PriceMax,
            (SELECT COUNT(GalleryID) FROM Galleries WHERE PhotographerID = Photographers.PhotographerID AND Status = 1) AS GalleryCount,
            (SELECT COUNT(CommentID) FROM Comments WHERE ContentID = Photographers.PhotographerID AND Status = 1 AND TypeID = 1) AS CommentCount
    FROM    Photographers
    WHERE   1 = 1
        AND PhotographerID NOT IN (SELECT PhotographerID FROM Appointments WHERE Date = @Date)
        AND 
        (
            (
                @PriceMin = 0
                AND @PriceMax = 0
            )
            OR  PhotographerID IN (SELECT PhotographerID FROM Packages WHERE Price BETWEEN @PriceMin AND @PriceMax)
        )
        AND 
        (
            @CityID = 0
            OR  CityID = @CityID
        )
END 
```

我将进一步改进将这些子查询移动到 JOIN 语句中并结合 GROUP BY 语句来提高性能，但这需要进一步的数据库知识。

# sql - 消息格式的 sql ORDER

> ID：15067473
> 
> 赞同：0
> 
> 时间：2013-02-25T12:54:39.873
> 
> 标签：sql, sql-server, tsql

我有一个 Messages 图标，点击它会打开一个类似 facebook 的消息`div`。会`div`自动滚动到底部。在此`div`，我收到了最后 25 条消息。问题是我希望消息从`div`. 我有两个订单列：***id***是自动增量，***dt***是日期时间。

我已经尝试了 ORDER BY 的所有组合，但我无法得到它。

```
SELECT TOP 25 
    rec, 
    sender, 
    message, 
    CONVERT(varchar(20),dt,120) AS date 
FROM dbo.messages 
WHERE (rec='$user[name]' OR sender='$user[name]') 
ORDER BY id DESC, dt ASC 
```

没有底部，但`SELECT BOTTOM 25 * ORDER BY id`理论上可以完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:22:19.740

得到`SELECT BOTTOM 25 * ORDER BY id` (ie; `TOP 25 ORDER BY id DESC`)

```
;with cte as (
  select top 25 
        id,
        rec, 
        sender, 
        message, 
        dt
  from dbo.messages 
  where (rec='$user[name]' OR sender='$user[name]') 
  order by id desc
)
select rec, sender, message, convert(varchar(20),dt,120) date
from cte
order by id,dt -- as required here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:04:59.600

您应该可以按日期时间列（降序）排序，然后拉到前 25 位。我已经修改了您的查询。

```
SELECT TOP 25 
rec, sender, message, CONVERT(varchar(20),dt,120) AS date 
FROM dbo.messages
WHERE (rec='$user[name]' OR sender='$user[name]') 
ORDER BY dt DESC 
```

# android - Google 的本机客户端是否可用于 Android 的 webview 和 Chrome？

> ID：15067477
> 
> 赞同：2
> 
> 时间：2013-02-25T12:54:51.423
> 
> 标签：android, google-nativeclient

NaCl 和它的 Pepper API 在 Chrome for Android 上可用吗？它可用于 Jelly Bean 的 WebView 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:03:38.927

根据 2 月 14 日的这篇帖子，它不可用：[https ://groups.google.com/forum/?fromgroups=#!searchin/native-client-discuss/android/native-client-discuss/u3YwbQlMKmY/1MjxER3KxoAJ](https://groups.google.com/forum/?fromgroups=#!searchin/native-client-discuss/android/native-client-discuss/u3YwbQlMKmY/1MjxER3KxoAJ)

# java - Android：我应该怎么做而不是使用不推荐使用的函数（getwidth（））？

> ID：15067482
> 
> 赞同：13
> 
> 时间：2013-02-25T12:55:18.237
> 
> 标签：java, android, deprecated

我想使用函数 activity.getWindowManager().getDefaultDisplay().getwidth() 但是有一个警告说这个函数已被弃用

我该怎么办 ？我应该使用这个功能吗？还是有其他一些功能可以做同样的事情？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-25T12:59:42.200

弃用意味着它不应该被使用，但出于兼容性原因它仍然存在。

您应该改用：

```
Point size = new Point();
activity.getWindowManager().getDefaultDisplay().getSize(size);
int width = size.x;
int height = size.y; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:58:06.957

从[`Display`](http://developer.android.com/reference/android/view/Display.html)API 参考：

> ```
> int getWidth()
> This method was deprecated in API level 13\. Use getSize(Point) instead. 
> ```

这意味着您将实例化 a `Point`，将其传递给`getSize()`并从中检索`x`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T12:58:29.517

> @Deprecated 注释的程序元素是不鼓励程序员使用的程序元素，通常是因为它很危险，或者因为存在更好的替代方案。当在非弃用代码中使用或覆盖弃用的程序元素时，编译器会发出警告。

**看到[这个](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Deprecated.html)[这个](http://en.wikipedia.org/wiki/Deprecation)[这个](http://www.techterms.com/definition/deprecated)还有[这个](http://answers.yahoo.com/question/index?qid=20080225205132AAsR2FI)[这个](https://stackoverflow.com/questions/8111774/deprecated-meaning)等等………… _ _**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T12:58:02.587

不推荐使用的功能是那些引入了新的更好替代品的功能，并且将来可能不会在新的 API 中得到支持。但是请随意使用它们，因为它们需要很长时间才能过期。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T12:59:48.900

将光标放在方法的名称上并按下`F2`以获取有关最新 API 的信息。（假设您使用的是 Eclipse）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-04T08:51:41.470

尝试：

```
WindowManager windowmanager = (WindowManager) this.getContext()
                              .getSystemService(Context.WINDOW_SERVICE); 
```

和：

```
Display display = windowmanager.getDefaultDisplay();

Point size = new Point();
try {
    display.getRealSize(size);
} catch (NoSuchMethodError err) {
    display.getSize(size);
}
int width = size.x;
int height = size.y; 
```

或与：

```
DisplayMetrics displayMetrics = new DisplayMetrics();
windowmanager.getDefaultDisplay().getMetrics(displayMetrics);
int deviceWidth = displayMetrics.widthPixels;
int deviceHeight = displayMetrics.heightPixels; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-25T12:59:45.843

正确的做法是检查 SDK 版本。根据这一点，您可以使用已弃用的功能或使用 Point. 请参阅以下内容：[即使已弃用，在 Display 上使用 .getWidth 是否安全](https://stackoverflow.com/questions/12780384/is-it-safe-to-use-getwidth-on-display-even-trough-its-deprecated)。

# android - 无法将 apk 上传到 google play

> ID：15067484
> 
> 赞同：0
> 
> 时间：2013-02-25T12:55:22.133
> 
> 标签：android, apk, google-play

尝试上传已发布应用程序的最新版本时，我刚刚收到以下错误报告：

```
 Upload failed

Your APK cannot be analysed using 'aapt dump badging'. Error output:

Failed to run aapt dump badging:
W/ResourceType(12572): Failure getting entry for 0x7f020095 (t=1 e=149) in package 0 (error -75)
W/ResourceType(12572): Failure getting entry for 0x7f020095 (t=1 e=149) in package 0 (error -75)
W/ResourceType(12572): Failure getting entry for 0x7f020095 (t=1 e=149) in package 0 (error -75)
ERROR getting 'android:icon' attribute: attribute is not a string value 
```

即使你不知道完整的解释，我仍然对任何可能的线索感兴趣。例如，什么是资源类型 12572？什么是“转储徽章”？未能进入意味着什么？

**编辑：**在回答一些评论...

我确实在这个最新版本中更改了图标文件的名称（这可能是一个线索）。清单现在包含（在大量其他内容中......）：

```
<application
    android:icon="@drawable/mygameapp_icon"
    android:screenOrientation="portrait" 
```

我的应用程序中也有英文和韩文的文本。这是通过在名为 res/values 的目录中的名为 strings.xml 的文件中的英文字符串和名为 res/values-ko 的目录中名为 strings.xml 的文件中的一组韩文字符串来安排的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:26:54.810

回答我自己的问题...

我只是注意到我在 drawable-xlarge、drawable-large、drawable-normal、drawable-small 中有不同大小的 mygameapp_icon.png 文件，但不是在普通的旧“drawable”中。在drawable中放置一个新图标使我的问题消失了。

虽然现在我很困惑，但什么时候可以使用纯“可绘制”的图标？如果它的尺寸完全不适合该设备怎么办？...或者我应该写一些不同的东西`android:icon="@drawable/mygameapp_icon"`？有点类似于`android:icon="@drawable/some_kind_of_wildcard/mygameapp_icon"`？？

# c++ - 在控制台上显示 C++ 中 .txt 文件的动态变化

> ID：15067488
> 
> 赞同：1
> 
> 时间：2013-02-25T12:55:34.247
> 
> 标签：c++, file, io

这是我的要求：“**我需要在控制台窗口上向用户显示 .txt 文件的输出，该文件将由第三方应用程序不断修改**”

我有来自[cplusplus.com](http://www.cplusplus.com/doc/tutorial/files/)的这段代码：

```
// reading a text file
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main () {
  string line;
  ifstream myfile ("test_results.txt");
  if (myfile.is_open())
  {
    while ( myfile.good() )
    {
      getline (myfile,line);
      cout << line << endl;
    }
    myfile.close();
  }

  else cout << "Unable to open file"; 

  return 0;
} 
```

我是否需要任何时间计数器来以特定的固定时间间隔读取该文件？指导一下，先谢谢了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:03:00.870

有两种方法。

*   平台相关

    使用 API，就像`inotify`在 Linux中一样

*   平台无关

    查询 fs 关于文件修改，例如使用`boost::filesystem` [http://www.boost.org/doc/libs/1_52_0/libs/filesystem/doc/reference.html#last_write_time](http://www.boost.org/doc/libs/1_52_0/libs/filesystem/doc/reference.html#last_write_time)

# javascript - 动态图像更新在 Mozilla 中不起作用

> ID：15067493
> 
> 赞同：0
> 
> 时间：2013-02-25T12:55:47.523
> 
> 标签：javascript, jquery, image, mozilla

我在jsp中设置了一个图像

```
 <img  id="captcha" src= "/app/img.servlet"  onclick="reloadImg();" /> 
```

这将调用适当的 servlet 并显示结果。单击此图像，将调用 servlet 并生成新图像。要在页面上显示，我使用以下方法

```
function reloadImg(){
$("#captcha").attr("src", "/app/img.servlet"); 
```

}

这似乎在 chrome 上运行良好，但在 mozilla 上不起作用。无法找出我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:39:44.870

在我的呼叫网址中添加时间解决了我的问题。

```
function reloadImg(){
var d = new Date();
$("#captcha").attr("src", "/app/img.servlet?"+d.getTime());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:57:22.657

你准备好了吗？

对于图像，它必须检查 DOM 是否准备就绪

```
$(function (){
       //your code goes here 
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-26T10:15:07.017

您可以编写完整的 jquery 函数，例如：

```
<script type="text/javascript">
$(document).ready(function() {
    $(document).on("click",".signup-info_class",function() {
        var d = new Date();
        $('#captcha_image').attr('src',"jcaptcha.jpg?"+d.getTime());
    });
});
</script> 
```

HTML 代码如下：

```
<img id="captcha_image" src="jcaptcha.jpg" height="40" width="122"/>
<img src="images/refresh_image.jpg" class="signup-info_class"
                                    alt="reload" width="40" height="40" /> 
```

# internet-explorer - 在 IE8 上使用 selenium webdriver 的屏幕截图

> ID：15067502
> 
> 赞同：-1
> 
> 时间：2013-02-25T12:56:09.093
> 
> 标签：internet-explorer, selenium, webdriver, screenshot

我正在运行 webdriver 测试以在 IE8/WinXP 机器上捕获屏幕截图。代码很简单——

```
WebDriver driver = new InternetExplorerDriver();
driver.get("http://www.google.com/");
File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
FileUtils.copyFile(scrFile, new File("c:\\tmp\\screenshot.png")); 
```

当我运行它时，会生成一个大小为 0KB 的 screenshot.png 文件。我可以轻松地为所有其他浏览器生成屏幕截图，也可以在 IE8 上为 Win7 生成屏幕截图。它仅适用于 WinXP 上的 IE8。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:15:19.533

没有用于拍摄屏幕截图的指针。我在我的机器上使用了相同的代码，它拍摄了屏幕截图。再试一次。如果它仍然不起作用，则升级到 IE9，其中 IE9 版本没有问题，因为 IE8 版本存在一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T13:18:46.567

试试这个，这对你有帮助吗

它有截屏的解决方案。

```
http://stackoverflow.com/questions/3422262/take-a-screenshot-with-selenium-webdriver 
```

# jaxb - 如何使用 JAXB 编组 X500Principal？

> ID：15067518
> 
> 赞同：1
> 
> 时间：2013-02-25T12:57:01.333
> 
> 标签：jaxb, marshalling

该类`javax.security.auth.x500.X500Principal`是最终的并且（当然）没有使用 JAXB 注释进行注释？那么如何将其编组为更大对象图的一部分呢？我想用它的`name`财产价值来代替它。

**编辑**

解决方案很简单：

```
final class X500PrincipalXmlAdapter
extends XmlAdapter<String, X500Principal> {
    @Override public X500Principal unmarshal(String name) {
        return new X500Principal(name);
    }

    @Override public String marshal(X500Principal principal) {
        return principal.getName();
    }
} 
```

实际上，我想知道为什么 JAXB 允许我使用非公共 XMLAdapter 类，但我当然更喜欢这种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:26:02.733

您可以将 an`XmlAdapter`用于此用例。`XmlAdapter`用于将不可映射的对象转换为可映射的对象。使用注释`XmlAdapter`在字段/属性上配置。`@XmlJavaTypeAdapter`

# angularjs - Angular：使用参数不起作用的 ng-click

> ID：15067528
> 
> 赞同：7
> 
> 时间：2013-02-25T12:57:32.030
> 
> 标签：angularjs

我有以下 HTML：

```
<i style="cursor:pointer" ng-click="addName()" class="icon-plus"></i>
<i style="cursor:pointer" ng-click="delName({{$index}})" class="icon-remove"></i> 
```

我的控制器中的以下功能`$scope`：

```
$scope.addName = function() {
    $scope.names.push($scope.newName);
    $scope.newName = '';
};
$scope.delName = function(i) {
    $scope.names.splice(i, 1);
}; 
```

工作正常，`addName()`但从`delName()`未被调用。是否不可能将 ng-clik 绑定到带有参数的函数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T13:09:40.903

错误出现在 html 中，不应事先评估 ng-repeat $index：

这是有效的 HTML：

```
<i style="cursor:pointer" ng-click="delName($index)" class="icon-remove"></i> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:59:05.063

代码对我来说似乎很好，你能在 jsFiddle 中隔离你的问题吗？

编辑：删除了关于拼接不修改为数组的错误答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T13:37:30.877

您可以执行以下操作

```
<i ng-click="delName($index)" class="icon-remove"></i> 
```

在 CSS 中

```
[ng-click],
[data-ng-click],
[x-ng-click] {
    cursor: pointer;
} 
```

# asp.net-mvc-3 - 显示来自控制器的特定用户数据以查看

> ID：15067533
> 
> 赞同：0
> 
> 时间：2013-02-25T12:57:43.333
> 
> 标签：asp.net-mvc-3, sql-server-2008

我在 asp.net mvc 中做一个项目。我想在视图中显示特定人的详细信息。我必须加入 2 个表才能显示数据。为此我做了：

控制器：

```
[HttpGet]
public ViewResult DisplayData()  
{  
    ViewBag.Designation1up = new SelectList(db.Designations, "Designation1up", "DesignationInternal", "DesignationExternal");  
    return View();  
}  

[HttpPost]  
public ActionResult DisplayData(Employee emp)  
{  
    try  
    {  
        object s = Session["EmployeeID"];  
        var sessval = s.ToString();  
        var data1 = (from e in db.Employees.Where(c => c.EmployeeID == sessval) join d in db.Designations on e.Designation1up equals d.Designation1up select e).SingleOrDefault();  
        return View(data1);  
    }  
    catch (Exception e)  
    {  
    }  
    ViewBag.Designation1up = new SelectList(db.Designations, "Designation1up", "DesignationInternal",emp.Designation1up);  
    return View(emp);     
} 
```

风景：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<ResourceTracking.ViewModel.AdminDetailsModel>" %> 
<!DOCTYPE html> 
<html> 
  <head runat="server"> 
    <title>DisplayData</title> 
  </head> 
  <body> 
    <fieldset> 
      <legend>AdminDetailsModel</legend> 
      <div class="display-label">EmployeeID</div> 
      <div class="display-field"> <%: Html.DisplayFor(model => model.EmployeeID) %> </div> 
      <!--...(same DIV 4 other fields)-->
   </fieldset>  
  </body> 
</html> 
```

我的问题是，当我调试代码时，编译器没有进入该`HttpPost`方法。它只是调试`HttpGet`方法并给出输出，但除非`HttpPost`运行，否则输出将不正确。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:37:13.017

我认为您对 ASP.NET MVC 的工作方式有些困惑。通常要在视图上显示数据，您将调用 HttpGet 操作 (DisplayData)，创建一个模型，用相关数据（员工）填充它并显示它。

像这样的东西（未经测试）

```
[HttpGet]
public ViewResult DisplayData()  
{  
    ViewBag.Designation1up = new SelectList(db.Designations, "Designation1up", "DesignationInternal", "DesignationExternal");  

    SomeModel model = new SomeModel();

    object s = Session["EmployeeID"];  
    if (s != null)
    {
        var employeeId = s.ToString();  

        model.EmployeeData = GetEmployeeData(employeeId);
    }

    return View(model);  
}  

private Employee GetEmployeeData(string employeeId)  
{  
    return (from e in db.Employees.Where(c => c.EmployeeID == employeeId) 
            join d in db.Designations 
                on e.Designation1up equals d.Designation1up 
            select e).SingleOrDefault();  
} 
```

# html - 自动网页转发

> ID：15067535
> 
> 赞同：1
> 
> 时间：2013-02-25T12:57:45.480
> 
> 标签：html, jsp, web-applications, https, meta-tags

我的注册页面 ( **empregistration.jsp** ) 自动转发到 ( **success.jsp** ) 如何停止这个我只想在按下提交按钮时转发它

> empregistration.jsp

```
<%@ page language ="java" contentType ="text/html; charset=ISO-8859-1" pageEncoding ="ISO-8859-1"%>
<%@ taglib uri="/struts-tags" prefix="s"%>
<%@ taglib uri="/struts-dojo-tags" prefix="sx" %> 
 <html>
    <head><meta http-equiv="Refresh" content="30;URL=emplogin.action">
       <sx:head/>
    <script type="text/javascript"  src ="script.js"></script>

    </head>  

      <body>
        <div align="center"> <h1 style="color: red">  ENPLOYEE REGISTRATION FORM</h1>
       <s:form  action="emplogin"  method="post" >

      <s:textfield name="firstname" label="Employee Firstname"/>
      <s:textfield name ="lastname" label ="Last name"/>  
      <s:textfield name ="id"  label="Id"/>
      <s:radio name ="gender"   list="{'male', 'female'}" label = "Gender"/>
    <sx:datetimepicker name="dob" displayFormat="dd-MMM-yyyy"  label="DOB"></sx:datetimepicker> 
      <s:radio  name ="maritalstatus" list="{'singale','married'}" label="Marital Status" />

      <s:textfield name ="email" label ="Email"/>
 <sx:datetimepicker name ="joiningdate" displayFormat="dd-MMM-yyyy" label="Joining Date"></sx:datetimepicker>

      <s:textfield name= "designation" label = "Designation"/>
      <s:textarea name ="address" label ="Address" />
      <s:textfield name = "country" label ="Country" />     
      <s:textfield name  ="state" label = "State" />
      <s:textfield name  ="city" label ="City"/> 
      <s:textfield name ="pincode" label ="Pincode"/>
      <s:textfield name ="mobileno" label="Mobile No"/>
      <s:select   name ="groups" list="{'group 1', 'group 2', 'group 3'}"  label ="Group"  cssStyle="{width:184px"/>
     <tr><td>&nbsp;</td></tr>
        <tr>
    <td>&nbsp;</td>
      <s:submit align="center"></s:submit>
      </s:form>
       </div>
    </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:51:27.297

`<meta http-equiv="Refresh" content="30;URL=emplogin.action">` 你的这个标签`empregistration.jsp`会刷新页面。

可能这是您的代码中的问题。在元标记中，您已将 URL 指定为`empLogin.action`。当页面刷新时，它会自动调用`emplogin.action`并将您重定向到`success.jsp`。从您的 jsp 中删除此标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:45:35.400

这是因为元标记

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
```

从您的页面中删除它会起作用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-26T06:19:32.420

在您的 empregistration.jsp 页面中有一个脚本，可能是您的问题

但是现在一天提交按钮不是以表格形式提交您的详细信息的正确方法。

您可以放置​​一个锚标记来代替提交按钮

这里的代码是：

```
 <a onclick="emplogin()">Login</a> 
```

并将javascript放在head部分::

```
 <script type="text/javascript">
         function emplogin()
         {
             document.getElementById('myform').submit();
          }
    </script> 
```

并将一个 id="myform" 设置为您的表单，例如：

```
 <form id="myform">
   </form> 
```

# jquery - 更改 iframe 元素的值

> ID：15067536
> 
> 赞同：7
> 
> 时间：2013-02-25T12:57:46.797
> 
> 标签：jquery, iframe, set

我有一个 iframe，用于将文件上传到我的服务器。我想将我想要的文件名称传递给 iframe，但我无法做到。

我在 iframe 中得到了这个内容：

```
<html>
<body>
<form action="upload_file.php" method="post" enctype="multipart/form-data">
<input type="file" name="file" id="file"><br>
<input type="hidden" name="idProductoFormUpload" id="idProductoFormUpload"    value="test">    
<input type="submit" name="submit" value="Enviar">
</form> 
```

iframe 元素的代码：

```
<iframe id="iframeUpload" name="iframeUpload" src="uploadForm.html" style="height:100px;"></iframe> 
```

我要做的就是设置“idProductoFormUpload”输入的值。

我试过这个没有成功：

```
$('#iframeUpload').contents().find('#idProductoFormUpload').val('myValue'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-30T00:01:09.313

你的代码很好。我也经常遇到这个问题。确保将 javascript 放在 iframe 之后。

# numpy - 为什么相反的结果不相等？

> ID：15067538
> 
> 赞同：2
> 
> 时间：2013-02-25T12:58:00.993
> 
> 标签：numpy, octave, inverse, matrix-inverse

我在求解矩阵的逆时遇到了一个问题。首先，我使用 python numpy 库来制作它，通过下面的编码：

```
import numpy as np
mtx_str = '1 0.05336904  1.03164031  0.05505765;1 0.05248641  3.0928260 0.16233134;1 2.16503202  1.03197617  2.23426146;1 0.05347855 -1.02633768 -0.05488705'
A = np.matrix(mtx_str)
np.rank(A) 
```

它返回 2；但如果我通过输入使用 octave 软件：

```
 A = [1 0.05336904 1.03164031 0.05505765; 1 0.05248641 3.09282607 0.16233134; 1 2.16503202 1.03197617 2.23426146; 1 0.05347855 -1.02633768 -0.05488705]
inv(A) 
```

它返回 4。

我想知道为什么相反的结果不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:51:21.140

在线 numpy 参考中没有很好地记录它，但来自 docstrings ：

```
>>> help(np.rank)
Help on function rank in module numpy.core.fromnumeric:

rank(a)
    Return the number of dimensions of an array.

>>> help(np.linalg.matrix_rank)
Help on function matrix_rank in module numpy.linalg.linalg:

matrix_rank(M, tol=None)
    Return matrix rank of array using SVD method 
```

当然，结果与 Octave 中的结果相同：

```
>>> np.linalg.matrix_rank(A)
4 
```

# java - GPS 坐标未正确存储在从 android 到 php 的数据库中 [关闭]

> ID：15067542
> 
> 赞同：0
> 
> 时间：2013-02-25T12:58:05.260
> 
> 标签：java, android, mysql, coordinates

你知道为什么我的坐标在我将它存储到我的数据库时会一直更改为 xxx.000000。以前，它工作正常，但是当我继续测试它时，它没有正确保存我的坐标。

例如，我想存储 120.993235 和 14.612364，然后当它在数据库中时转换为 120.000000 和 14.000000。你们能帮帮我吗？这些是我的代码。

**

```
public class LocationGetter extends MapActivity implements LocationListener { // <1>
    private static final String TAG = "LocationActivity";
    LocationManager locationManager; // <2>
    Geocoder geocoder; // <3>
    TextView locationText;
    MapView map;
    MapController mapController; // <4>
    // ** This declarations was for passing of data to web service
    // Progress Dialog
    private ProgressDialog pDialog;
    // JSONParser Object creation
    JSONParser jsonParser = new JSONParser();
    // url to pass location to web
    // private static String url_create_product =
    // "http://student-thesis.netii.net/location_adding.php";
    private static String url_create_product = "http://10.0.2.2/TheCalling/location_adding.php";
    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    //Latitude and Longitude
    public static double ILatitude;
    public static double ILongitude;
    // ** End
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maps);
        locationText = (TextView) this.findViewById(R.id.lblLocationInfo);
        map = (MapView) this.findViewById(R.id.mapview);
        map.setBuiltInZoomControls(true);
        mapController = map.getController(); // <4>
        mapController.setZoom(19);
        locationManager = (LocationManager) this
                .getSystemService(LOCATION_SERVICE); // <2>
        geocoder = new Geocoder(this); // <3>
        Location location = locationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER); // <5>
        if (location != null) {
            Log.d(TAG, location.toString());
            this.onLocationChanged(location); // <6>
        }
    }
    @Override
    protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                60000, 5, this); // <7>
    }
    @Override
    protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this); // <8>
    }
    @Override
    public void onLocationChanged(Location location) { // <9>
        Log.d(TAG, "onLocationChanged with location " + location.toString());
        String text = String.format(
                "Lat:\t %f\nLong:\t %f\nAlt:\t %f\nBearing:\t %f \n",
                location.getLatitude(), location.getLongitude(),
                location.getAltitude(), location.getBearing());
        this.locationText.setText(text);
        try {
            List<Address> addresses = geocoder.getFromLocation(
                    location.getLatitude(), location.getLongitude(), 10); // <10>
            for (Address address : addresses) {
                this.locationText.append(" " + address.getAddressLine(0));
            }
            int latitude = (int) (location.getLatitude());
            int longitude = (int) (location.getLongitude());

            int GLatitude = (int) (location.getLatitude() * 1000000);
            int GLongitude = (int)(location.getLongitude() * 1000000);

            GeoPoint point = new GeoPoint(GLatitude, GLongitude);
            mapController.animateTo(point); // <11>
            List<Overlay> mapOverlays = map.getOverlays();
            Drawable drawable = this.getResources().getDrawable(
                    R.drawable.reddot);
            AddItemizedOverlay itemizedOverlay = new AddItemizedOverlay(
                    drawable, this);
            OverlayItem overlayitem = new OverlayItem(point, "Hello",
                    "Sample Overlay item");
            itemizedOverlay.addOverlay(overlayitem);
            mapOverlays.add(itemizedOverlay);

            ILatitude = (double)latitude;
            ILongitude = (double)longitude;
            new phpconnect().execute();

        } catch (IOException e) {
            Log.e("LocateMe", "Could not get Geocoder data", e);
        }
    }
    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
    }
    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
    }
    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub
    }
    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
    class phpconnect extends AsyncTask<String, String, String> {
        @Override
        protected String doInBackground(String... args) {
            String strLatitude = Double.toString(ILatitude);
            String strLongitude = Double.toString(ILongitude);
            // Building parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("latitude", strLatitude));
            params.add(new BasicNameValuePair("longitude", strLongitude));
            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params);
            // check log cat fro response
            Log.d("Create Response", json.toString());
            try {
                int success = json.getInt(TAG_SUCCESS);
                if (success == 1) {
                    // successfully updated
                } else {
                    // failed to create product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
            return null;
        }
    }
} 
```

**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:03:34.417

在这里你设置所有的值之后。为零。

```
 int latitude = (int) (location.getLatitude());
    int longitude = (int) (location.getLongitude()); 
```

和这个：

```
 ILatitude = (double)latitude;
    ILongitude = (double)longitude; 
```

不会返回归零的值。您可以尝试：

```
 ILatitude = location.getLatitude();
    ILongitude = location.getLongitude(); 
```

# sql - 在 SQL Server 2008 中检查多列是否为空

> ID：15067544
> 
> 赞同：4
> 
> 时间：2013-02-25T12:58:07.250
> 
> 标签：sql, sql-server-2008, tsql

表 A：

```
Id  Name  DateCreated  DateModified
-----------------------------------
1    A     2013-1-12    2013-1-15
2    B     NULL         2013-2-1
3    C     NULL          NULL 
```

我必须将此表的数据迁移到另一个`DateCreated`不可为空列的表中，条件是是否`DateCreated`为空使用`DateModified`，如果两者均为空，则使用当前日期。

我无法使用

```
ISNull(DateCreated,DateModified) 
```

因为两者都可以为空。

我该怎么做？该表大约有 10000 行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T13:00:37.087

您可以使用`COALESCE(DateCreated, DateModified, GETDATE())`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T13:05:06.043

嵌套`Isnull`

```
Isnull(DateCreated,isnull(DateModified, getdate())) 
```

或使用`CASE`

```
case when DateCreated is null and DateModified is null then getdate()
     when DateCreated is null then DateModified 
     else DateCreated end 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-25T13:19:47.860

你在找这样的东西吗？

```
$result = mysql_query($query, $link);

if ($result) {
  while($row = mysql_fetch_array($result)) {

    if ($row['DateCreated'] == 'NULL'){

        if ($row['DateModified'] == 'NULL'){

                $today = date("Y-m-d");
                $id = $row['id'];
                $query = sprintf("SET DateCreated = $today WHERE id = $id");

            } else {
                $newDate = $row['DateModified'];
                $id = $row['id'];
                $query = sprintf("SET DateCreated = $newDate WHERE id = $id");}
        }
  }

}
else {
  echo mysql_error();
} 
```

# perl - 调试 Perl 分段错误

> ID：15067547
> 
> 赞同：6
> 
> 时间：2013-02-25T12:58:16.623
> 
> 标签：perl, debugging, segmentation-fault

我正在使用[AcePerl](https://github.com/WormBase/AcePerl)从 wormbase.org 数据库下载数据。当我下载某些数据库对象时（在一定数量的对象之后）出现分段错误。这种行为是可重现的。

我查看了核心转储并`where`打印了一大堆函数调用：

```
#0  0xb763c0ac in ?? () from /lib/i386-linux-gnu/libc.so.6
#1  0xb763eddc in malloc () from /lib/i386-linux-gnu/libc.so.6
#2  0x080c07ca in Perl_safesysmalloc ()
#3  0x080f3a02 in Perl_sv_grow ()
#4  0x080ebe38 in Perl_sv_setsv_flags ()
#5  0x080ecb76 in Perl_newSVsv ()
#6  0x0811516f in Perl_save_item ()
#7  0x080c7dd8 in Perl_get_db_sub ()
#8  0x080e7a4c in Perl_pp_entersub ()
#9  0x08075570 in Perl_call_sv ()
#10 0x080edd25 in Perl_sv_clear ()
#11 0x080ee3eb in Perl_sv_free2 ()
#12 0x080d79ec in Perl_hv_free_ent ()
#13 0x080d7c8c in ?? ()
#14 0x080db6ff in Perl_hv_undef_flags ()
#15 0x080edf72 in Perl_sv_clear ()
#16 0x080ee3eb in Perl_sv_free2 ()
#17 0x080d79ec in Perl_hv_free_ent ()
#18 0x080d7c8c in ?? ()
#19 0x080db6ff in Perl_hv_undef_flags ()
#20 0x080edf72 in Perl_sv_clear ()
#21 0x080ee3eb in Perl_sv_free2 ()
#22 0x080d79ec in Perl_hv_free_ent ()
#23 0x080d7c8c in ?? ()
#24 0x080db6ff in Perl_hv_undef_flags ()
#25 0x080edf72 in Perl_sv_clear ()
#26 0x080ee3eb in Perl_sv_free2 ()
#27 0x080d79ec in Perl_hv_free_ent ()
#28 0x080d7c8c in ?? ()
#29 0x080db6ff in Perl_hv_undef_flags ()
#30 0x080edf72 in Perl_sv_clear ()
#31 0x080ee3eb in Perl_sv_free2 ()
#32 0x080d79ec in Perl_hv_free_ent ()
#33 0x080d7c8c in ?? ()
#34 0x080db6ff in Perl_hv_undef_flags ()
#35 0x080edf72 in Perl_sv_clear ()
#36 0x080ee3eb in Perl_sv_free2 ()
#37 0x080d79ec in Perl_hv_free_ent ()
#38 0x080d7c8c in ?? ()
#39 0x080db6ff in Perl_hv_undef_flags ()
#40 0x080edf72 in Perl_sv_clear ()
#41 0x080ee3eb in Perl_sv_free2 ()
#42 0x080d79ec in Perl_hv_free_ent ()
#43 0x080d7c8c in ?? ()
#44 0x080db6ff in Perl_hv_undef_flags ()
#45 0x080edf72 in Perl_sv_clear ()
#46 0x080ee3eb in Perl_sv_free2 ()
#47 0x080d79ec in Perl_hv_free_ent ()
#48 0x080d7c8c in ?? ()
#49 0x080db6ff in Perl_hv_undef_flags ()
#50 0x080edf72 in Perl_sv_clear ()
#51 0x080ee3eb in Perl_sv_free2 ()
#52 0x080d79ec in Perl_hv_free_ent ()
#53 0x080d7c8c in ?? ()
... 
```

这些函数调用重复了数千次。我也打过电话`perl -d:Trace myscript.pl > log`，但日志文件大约 3 GB 大。

有没有更方便的方法来调试这个脚本？

编辑：我的脚本： http: [//paste.ubuntu.com/5564630/](http://paste.ubuntu.com/5564630/)。
我的架构文件： http: [//paste.ubuntu.com/5564631/](http://paste.ubuntu.com/5564631/)。它确定要下载哪些数据。
段故障在 ~2300 之后引发`go_terms`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T14:57:03.070

安装[Devel::Trace](http://search.cpan.org/perldoc?Devel%3a%3aTrace)。

在启用跟踪的情况下运行您的 perl 脚本：

```
perl -d:Trace myscript.pl >trace 2>&1 
```

跟踪文件以查看导致分段错误的 Perl 行的执行情况。

# jquery - 如何仅使用 jquery 从下到上为元素设置动画

> ID：15067558
> 
> 赞同：3
> 
> 时间：2013-02-25T12:58:30.437
> 
> 标签：jquery, jquery-animate

我知道我在问一个非常常见的问题，但我想知道是否有另一种方法可以`animate` 只`element`使用 jQuery？我创建了一个动画，但我想改进它，但我不知道该怎么做。[请查看此小提琴以查看动画](http://jsfiddle.net/sarfarazdesigner/nmGRt/)，或者您可以在此处查看：[walkoverapps](http://walkoverapps.com/)。

我只是有点困惑。还有其他方法可以为元素设置动画吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T17:50:22.790

我再次猜测您想获取该动画中每个步骤的坐标。jQuery animate 函数提供`step:function (number, tween)`在动画中的每一步调用。有关更多详细信息，请参见演示**[http://jsfiddle.net/nmGRt/5/](http://jsfiddle.net/nmGRt/5/)**

```
$('#rocket').delay(2000).animate({
    bottom: '600px'
}, {
    duration: 5000,
    complete: function () {},
    step: function (n, t) {
        var pos = $(this).position();
        $('#curVal')
            .text('X: ' + pos.left.toFixed(2) + ' Y: ' + pos.top.toFixed(2))
            .css({
            left: pos.left - 150,
            top: pos.top
        });
    }
}); 
```

* * *

我猜你在没有`jQuery UI`. 如果您只针对现代浏览器，请尝试使用 CSS3。请参阅[**浏览器兼容性**](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions#Browser_compatibility)表。

**JS：**

```
setTimeout(function () {
    $('#rocket').addClass('fire').css('bottom', 600);
}, 2000); 
```

**CSS3：**

```
.fire {    
    -moz-transition: bottom 5s;
    -webkit-transition: bottom 5s;
    -ms-transition: bottom 5s;
    -o-transition: bottom 5s;
    transition: bottom 5s;
} 
```

**演示：http:** [//jsfiddle.net/nmGRt/2/](http://jsfiddle.net/nmGRt/2/)

此外，您可以使用一些很酷的`cubic-bezier`功能来控制动画。见演示[http://jsfiddle.net/nmGRt/3/embedded/result/](http://jsfiddle.net/nmGRt/3/embedded/result/)

```
.fire {
-webkit-transition: all 5000ms cubic-bezier(0.880, 0.045, 0.750, 0.750);
   -moz-transition: all 5000ms cubic-bezier(0.880, 0.045, 0.750, 0.750);
    -ms-transition: all 5000ms cubic-bezier(0.880, 0.045, 0.750, 0.750);
     -o-transition: all 5000ms cubic-bezier(0.880, 0.045, 0.750, 0.750);
        transition: all 5000ms cubic-bezier(0.880, 0.045, 0.750, 0.750); /* custom */
} 
```

您可以从此站点生成此函数：http: [//matthewlein.com/ceaser/](http://matthewlein.com/ceaser/)

**额外的**

使用变换快速播放[http://jsfiddle.net/nmGRt/4/embedded/result/](http://jsfiddle.net/nmGRt/4/embedded/result/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T09:41:08.993

试试[http://jsfiddle.net/naveendalmeida/JVMmE/2/](http://jsfiddle.net/naveendalmeida/JVMmE/2/)

**HTML**

```
<div id="content">
    <div id="left">
        <div class="pr" id="ani">
             <h3 id="rocket" style="bottom:50px"></h3>

            <div id="rocket-smoke"></div>
        </div>
    </div>
</div> 
```

**JS**

```
<script type="text/javascript">

    function nav_animation(nav_obj, length, nav_intveral, direction) {
        var i = 0;
        var int = setInterval(function () {
            if (i < length) {
                    $(nav_obj).css(direction, i + "px");      
                i++;
            } else {
                window.clearInterval(int);
            }
        }, nav_intveral);
    }

    nav_animation('#rocket', 50, 1, 'bottom');
    nav_animation('#rocket', 100, 1, 'right');
    nav_animation('#rocket', 150, 1, 'bottom');
    nav_animation('#rocket', 200, 1, 'bottom');
    nav_animation('#rocket', 350, 1, 'right');
    setInterval("$('#rocket').css('-webkit-transform',' rotate(0deg)');",1700);
    nav_animation('#rocket', 400, 1, 'bottom');

</script> 
```

**CSS**

```
#rocket {
    position:absolute;
    bottom:50px;
    right:91px;
    background:url(http://walkoverapps.com/landing-content/rct.png) no-repeat;
    width:68px;
    height:84px;
    z-index:20;
    -webkit-transform: rotate(-45deg);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T02:47:01.233

请尝试 附带的[小提琴。](http://jsfiddle.net/tonyshih/nEgjJ/49/)您可能需要根据您的要求对此进行改进。

```
function animateCustom(cobj, clength, cintveral, cdirection) {

  var i = 0;

  var int = setInterval(function () {
    if (i < clength) {
        if (cdirection == 'y')
            $(cobj).css("bottom", i + "px");
        else if (cdirection == 'x')
            $(cobj).css("right", i + "px");            
        i++;
    } else {
        window.clearInterval(int);
    }
  }, cintveral);

}

animateCustom('#rocket', 100, 5, 'x');
animateCustom('#rocket', 200, 5, 'y'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T13:59:04.140

也许你的意思是x和y轴，你可以这样说确切的位置......

```
$(document).ready(function(){
    $('#rocket').delay(2000).animate({
        bottom:'+=600px',
        right:'-=200px'
    }, 5000,function(){});
}); 
```

您还可以将“底部”更改为“顶部”，将“右侧”更改为“左侧”，将“+=”更改为“-=”或只是“-”

# git - git：创建“临时”集成分支

> ID：15067561
> 
> 赞同：12
> 
> 时间：2013-02-25T12:58:32.427
> 
> 标签：git

我对使用 git 比较陌生。

最近从 master 我们分支了 +-10 个功能分支。让我们称它们为 A、B、C 等。

我想将这些合并在一起进行测试。如果我创建一个新分支并合并我的功能可以吗？

例如

```
[master] git checkout -b integration

[integration] git merge A

[integration] git merge B

[integration] etc 
```

一旦所有功能都经过测试和批准，是否可以安全地合并`integration`到 master 中，并在 master 日志中维护功能分支历史

例如

```
[integration] git checkout master
[master] git merge integration
[master] git branch -d integration 
```

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T14:07:53.653

简短的回答：是的。

长答案：是的，并且假设您的 master 分支在此期间没有进行任何更改，您与 master 的合并将是一个“快进”合并，因此在 之后`[master] git merge integration`，master 分支将看起来像合并之前的集成分支。

“分支历史”将出现在主分支中。恕我直言，最好不要将您的历史视为“分支历史”，而是“代码历史”。

如果您想记录更改来自合并的事实，请使用`git merge --no-ff`强制创建合并提交，即使快进提交（尽可能保持历史线性）有效。

另请参阅[共享功能分支的正确 Git 工作流程？](https://stackoverflow.com/questions/3817967/correct-git-workflow-for-shared-feature-branch)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T14:05:56.520

当然，那很好。

默认情况下（除非您压缩合并提交），您将保留每个功能的完整历史记录以及它们的集成历史记录，即使临时分支消失也是如此。

# jquery - 调用 POST 方法后重新调整 Spring Controller 404

> ID：15067563
> 
> 赞同：12
> 
> 时间：2013-02-25T12:58:33.683
> 
> 标签：jquery, spring-mvc

我有一个从 JQuery.post() 调用的 Spring 控制器。当它被调用时，控制器的方法被调用并返回。但是随后，在后台，Spring 更改了 URL 并调用了服务器增益。服务器以 404 响应。

我认为这是对 Spring 在处理 POST 方法后尝试查找 View 的响应。

如何阻止 Spring 控制器执行此操作。

这是我的弹簧控制器：

```
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import java.util.ArrayList;
import java.util.List;

@Controller
@RequestMapping("/person")
public class DataController {

  private List<Person> people = new ArrayList<Person>();

  @RequestMapping(value="put", method = RequestMethod.POST)
  public void addPerson(@ModelAttribute("person") Person person){
    System.out.println(">>>>>>> person: " + person);
    System.out.println(">>>>>>>>> " + person.getFirstName());
    people.add(person);
  }
} 
```

这是我的应用程序上下文 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
         http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
         http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="uk.co.jeeni" />

    <mvc:annotation-driven />

</beans> 
```

这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
                http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
         version="2.4">

    <servlet>
        <servlet-name>dispatcherServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath*:applicationContext-web.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>dispatcherServlet</servlet-name>
        <url-pattern>/data/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

这是我的 HTML 文件中的 JQuery 调用：

```
function attachSendDataEvent(){
    $("#sendData").click(function(){

        var data = "firstName=" + $("#firstName").val() + "&" +
                "lastName=" + $("#lastName").val() + "&" +
                "address=" + $("#address").val() + "&" +
                "postcode=" + $("#postcode").val();

        $.post("data/person/put",
                data,
                dataSentOK
        );
    });

    return false;
} 
```

该`dataSentOK`函数只是做一个`alert("DONE")`.

所以当 JQuery 方法调用的 URL 是：

```
http://localhost:8080/jquery/data/person/put 
```

在服务器端，该`System.out.println(...)`方法按预期打印出数据。

但是在 Firebug 中，服务器会发回 404。

所以我打开了 Spring 的日志记录并得到了这个：

```
[01] DispatcherServlet [DEBUG] DispatcherServlet with name 'dispatcherServlet' processing POST request for [/jquery/data/person/put]
[02] AbstractHandlerMethodMapping [DEBUG] Looking up handler method for path /person/put
[03] AbstractHandlerMethodMapping [DEBUG] Returning handler method [public void uk.co.jeeni.DataController.addPerson(uk.co.jeeni.Person)]
[04] AbstractBeanFactory [DEBUG] Returning cached instance of singleton bean 'dataController'
[05] DispatcherServlet [DEBUG] Rendering view [org.springframework.web.servlet.view.InternalResourceView: name 'person/put'; URL [person/put]] in DispatcherServlet with name 'dispatcherServlet'
[06] AbstractView [DEBUG] Added model object 'org.springframework.validation.BindingResult.person' of type [org.springframework.validation.BeanPropertyBindingResult] to request in view with name 'person/put'
[07] AbstractView [DEBUG] Added model object 'person' of type [uk.co.jeeni.Person] to request in view with name 'person/put'
[08] InternalResourceView [DEBUG] Forwarding to resource [person/put] in InternalResourceView 'person/put'
[09] DispatcherServlet [DEBUG] DispatcherServlet with name 'dispatcherServlet' processing POST request for [/jquery/data/person/person/put]
[10] AbstractHandlerMethodMapping [DEBUG] Looking up handler method for path /person/person/put
[11] AbstractHandlerMethodMapping [DEBUG] Did not find handler method for [/person/person/put]
[12] DispatcherServlet [ WARN] No mapping found for HTTP request with URI [/jquery/data/person/person/put] in DispatcherServlet with name 'dispatcherServlet'
[13] FrameworkServlet [DEBUG] Successfully completed request
[14] FrameworkServlet [DEBUG] Successfully completed request 
```

响应 URL POST 请求（/jquery/data/person/put），找到并调用了正确的方法（第 1 到 7 行），但随后 Spring 转发到`InternalResourceView`第 8 行，将 URL 更改为`/jquery/data/person/person/put`，这找不到。

我如何阻止 Spring 尝试寻找视图。我想要它做的就是干净地返回并完成。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T10:23:23.307

解决了。

问题正如#CodeChimp 所建议的那样，除了我仍然想要一个 void 返回类型。

我在方法中添加了`@ResponseBody`，`addPerson`一切正常：

```
@RequestMapping(value="put", method = RequestMethod.POST)
**@ResponseBody**
public void addPerson(@ModelAttribute("person") Person person){
  System.out.println(">>>>>>> person: " + person);
  System.out.println(">>>>>>>>> " + person.getFirstName());
  people.add(person);
} 
```

线索来自[http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-responsebody](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-ann-responsebody)。尽管文档尚不清楚 void return 会发生什么。刚刚试了一下，它奏效了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T13:33:49.877

我相信如果您有 null 或 void 返回类型，Spring 将尝试根据请求 URL 解析视图。我认为这里的正确形式是简单地返回一个 OK 页面，因为这似乎不是 JSON 或类似的东西。或者，只需使用 @ResponseBody 标记它并返回一个空字符串。

# ember.js - 复选框值列表作为数组，如 Ember.Select（多个）

> ID：15067568
> 
> 赞同：3
> 
> 时间：2013-02-25T12:58:59.900
> 
> 标签：ember.js, ember-data

有没有办法将 Ember 中复选框列表的数据作为 id 数组获取？

在我的应用程序中，我想创建一个新站点。我制作了一条路线来`/sites/new`显示带有添加站点的字段的表单。

这是我的模型：

```
App.Site = DS.Model.extend({
    name : DS.attr('string'),
    languages: DS.hasMany('App.Language')
});
App.Language = DS.Model.extend({
    name : DS.attr('string')
}); 
```

这是我的控制器：

```
app.SitesNewController = Em.ObjectController.extend({
    needs : [ 'languages' ],
    name: null,
    languages: null,
    createSite : function() {
        // Get the site name
        var name = this.get('name');
        var languages = this.get('languages');
        console.log(name,description,languages);
        // Create the new Site model
        app.Site.createRecord({
            name : name,
            languages : languages
        });

        // Save the new model
        this.get('store').commit();
    }
}); 
```

这是（部分）我的 SitesNewView：

```
{{#each controllers.languages}}
    <label class="checkbox">
        {{view Ember.Checkbox checkedBinding="languages"}}
        {{ name }}
    </label>
{{/each}} 
<button {{ action "createSite" }}>Save</button> 
```

在我的控制台语言中是`null`. 如何从 中获取一组语言 ID `this.get('languages')`？

**更新**

我的意思是类似于带有属性的 Ember.Select `multiple=true`，如下所示：`{{view Ember.Select selectionBinding="languages" contentBinding="controllers.languages" optionValuePath="content.id" optionLabelPath="content.name" multiple="true"}}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:44:28.087

看看[`jsfiddle`](http://jsfiddle.net/durinthomas/cB3De/)我快速创建的。

这可能不是最好的解决方案，但至少它应该对您有所帮助。

# ant - Ant 可选类路径元素

> ID：15067571
> 
> 赞同：2
> 
> 时间：2013-02-25T12:59:10.610
> 
> 标签：ant, multi-project

我有一些模块和一个主要的可运行项目。我有通用的构建文件，并且

build.common.xml

```
<target name="build" >
  <path id="libraries.classpath">
    <fileset dir="${lib.dir}" includes="*.jar" />
  </path>
  <javac srcdir="${src.dir}" destdir="${build.dir}" includeantruntime="false" source="1.6">
    <classpath refid="libraries.classpath" />
    <classpath refid="modules.classpath" />
  </javac>
</target> 
```

..并且每个模块都在它们的 build.xml 中声明了自己的依赖项：

```
<path id="modules.classpath">
  <pathelement path="../ModuleA/${build.dir}" />
  ...
</path> 
```

问题是如果没有内部依赖，我会得到以下异常：“找不到参考模块。类路径。”

解决方案是什么？**我如何声明一个可选的类路径元素？**

**注意：** *如果有人想建议用我的模块创建 jar，请证明这一点。我将拥有 5-10 个快速变化的模块，并且我不想在构建过程中执行不必要的步骤。*

**更新：**我将构建提取到两个不同的目标中并为它们创建了一个条件，但没有帮助（它与“错误”相呼应并使用模块依赖项构建）：

```
<target name="build">
    <condition property="modules.classpath.set" else="false">
          <isset property="modules.classpath"/>
    </condition>

    <echo message="modules.classpath is set: ${modules.classpath.set} " />
    <antcall target="build-with-modules" />
    <antcall target="build-without-modules" />
</target>

<target name="build-with-modules" if="modules.classpath.set">
    <echo message="Building with module-dependencies" />
    <javac srcdir="${src.dir}" destdir="${build.dir}" includeantruntime="false" source="1.6">
        <classpath refid="libraries.classpath" />
        <classpath refid="modules.classpath" />
    </javac>
</target>
<target name="build-without-modules" unless="modules.classpath.set">
        <echo message="Building with  no dependent modules" />
    <javac srcdir="${src.dir}" destdir="${build.dir}" includeantruntime="false" source="1.6">
        <classpath refid="libraries.classpath" />
    </javac>
</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:35:17.347

条件[`isreference`](https://ant.apache.org/manual/Tasks/conditions.html)：

> 测试给定的引用是否已在此项目中定义，并且 - 可选 - 是否属于预期类型。

所以，试试

```
<condition property="modules.classpath.set" else="false">
    <isreference refid="modules.classpath"/>
</condition> 
```

同样在该页面上，还有一个指向描述自定义条件的页面的链接。如果提供的条件都不符合您的要求，那么只需写一个。

更新：

`if`和`unless`in的逻辑`<target>`是检查属性是否被设置——对于`if`，目标在属性被设置时运行；对于`unless`，目标在未设置属性时运行 - 而不是属性的值。

我从未检查过条件的代码`isreference`，但我认为也许`else="false"`应该删除。

如果删除该部分仍然没有帮助，那么您可能需要使用一些嵌入式 groovy 或 beanshell 脚本，或者编写您自己的条件。

# php - 使用授权时mysql子查询错误

> ID：15067575
> 
> 赞同：0
> 
> 时间：2013-02-25T12:59:23.910
> 
> 标签：php, mysql

当我运行这个查询时，MySQL 给了我一个错误：

```
mysqli_query($connect,"GRANT SELECT,INSERT ON myblog.*
    TO '$username'@'localhost' IDENTIFIED BY 
    (SELECT user_password from users where user_name = '$username')") 
or die("fail to grant ".mysqli_error($connect)); 
```

这个查询有什么问题？有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:03:07.677

MySQL 不支持外部语句为`GRANT`.

```
A subquery's outer statement can be any one of: SELECT, INSERT, UPDATE, DELETE, SET, or DO. 
```

编辑：取自[MySQL docs on subqueries](https://dev.mysql.com/doc/refman/5.5/en/subqueries.html)。

# grails - Grails、映射和内存管理

> ID：15067576
> 
> 赞同：3
> 
> 时间：2013-02-25T12:59:23.873
> 
> 标签：grails

根据我的经验，地图是 Grails 和 Groovy 开发中非常常见的习语。现在我已经转移到一个使用更传统 Java 的项目，我的技术主管因为使用而受到了重创`HashMaps`——>我理解他的原因。 `HashMaps`使用`StrongReferences`. `StrongReferences`任何时候都有参考链。

我在 Groovy 中看到的一个常见习惯用法是使用 map 来代替 POJO。（例如，在网上浏览示例时，您会到处看到它。）

Grails 如何使用它的所有地图习语来解决这个问题？有人对他们的 Grails 应用程序进行过内存分析吗？像这样的地图`params`会停留一段时间，还是它们会随着用户会话终止而死掉并被收集？还是我需要像在 Java 中一样了解`Maps`在 Grails 中的使用？

=======更新==== 上面的问题仍然存在，但用于参考的文章[在这里](http://weblogs.java.net/blog/2006/05/04/understanding-weak-references)：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:07:02.907

的实例与`HashMap`Java 中任何其他类的实例没有什么不同——只要映射（分别为 POJO）是可访问的，那么映射条目（分别是 POJO 中的字段）引用的所有其他对象也将是可访问的。一旦映射 (POJO) 实例被取消引用，其所有*只能*通过映射 (POJO) 访问的条目（字段）都将有资格进行垃圾收集。

在这方面，地图并不比其他类好或差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:09:53.460

我不购买不使用地图的强大参考论据。

在您没有对 HashMap 的任何引用之后，它就可以用于 GC，然后，它的所有未被其他东西引用的元素也变得可以用于 GC。

对于在您无法访问它们之前保存其值的地图，请查看[WeakHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/WeakHashMap.html)。

# iphone - iphone viewForZoomingInScrollView 未调用

> ID：15067588
> 
> 赞同：7
> 
> 时间：2013-02-25T12:59:56.447
> 
> 标签：iphone, ipad, uiscrollview

**编辑**：我有包含 uiscrollview 的控制器。该滚动视图包含自定义 uiview，其单独的类继承自 uiview。那个 uiview 有 uiimageview 作为子视图。不，我在主控制器中使用“(UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView”。但是当我缩放滚动视图时，该方法没有触发。我应该怎么做才能调用这个方法。

```
UIView *DrawingPlusImageView = [[UIView alloc]initWithFrame:CGRectMake((i*IMAGEVIEW_IPAD_LAND_X+112), 0, 800, 600)];

    IDDrawingView *drawView = [[IDDrawingView alloc]initWithFrame:CGRectMake(0, 0, 800, 600)];

    UIImageView* imgViewLand = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 800, 600)];
    [imgViewLand setImage:[UIImage imageNamed:@"noFileSelected.png"]];
    [drawView setImageToDraw:imgViewLand.image];
    //        drawView.delegate = self;
    [drawView setCurrentSlidId:hmslide.strSlideID];
    [DrawingPlusImageView addSubview:imgViewLand];
    [DrawingPlusImageView addSubview:drawView];

    [scrollViewPresentation addSubview:DrawingPlusImageView];
    drawView.userInteractionEnabled = YES;

- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
// Return the view that we want to zoom

return  [self.scrollViewPresentation.subviews objectAtIndex:1];// there are slides, im zooming the second
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-24T09:01:23.400

我遇到了同样的问题。并为 ScrollView 设置最小和最大缩放级别解决了我的问题..尝试

```
self. scrollViewPresentation.minimumZoomScale = 1.0;
self. scrollViewPresentation.maximumZoomScale = 10.0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T18:48:31.540

只有在您开始缩放时才会调用它。视图应该是滚动视图的子视图，保留对它的引用作为属性并在委托方法中返回它：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.view addSubview:self.scrollView];
    [self.scrollView addSubview:self.container];
    [self.container addSubview:self.imageView];
}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return self.imageView;
} 
```

# c# - 如何让gridview更快地改变页面

> ID：15067592
> 
> 赞同：0
> 
> 时间：2013-02-25T13:00:09.333
> 
> 标签：c#, asp.net, sql-server

更改页面时，我的 ASP.NET 应用程序中的 GridView 工作非常缓慢。我知道这很可能是因为每次更新页面时都会从数据库中汇集大量数据，但我不知道如何解决这个问题，因为我不是 ASP.NET。

我当前的配置是启用了 ObjectDateSource 和分页的 GridView。我没有任何代码或类似的东西。ObjectDataSource 绑定到类型化数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:03:50.360

您对此的原因是正确的——即使您只想显示一小部分，您也必须从数据库中获取所有数据。例如，您从 DB 中检索 5000 行仅在当前页面中显示 15 行。

解决方案是实现自定义分页。

为了让它与您当前的配置一起使用，您需要更新您当前的选择方法以接受起始索引和最大行数输入参数，并更新网格视图中的以下属性

“StartRowIndexParameterName”、“MaximumRowsParameterName”、“SelectCountMethod”。

[这](http://www.4guysfromrolla.com/articles/031506-1.aspx) 是一篇很棒的文章，涵盖了您需要的内容，但 StackOverflow 上也有很多主题涵盖了这个主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T19:56:42.837

我发现了同样的问题并实现了一个自定义的 gridview，它现在是开源的，你可以在这里找到它[https://github.com/vcliment89/GridViewEX](https://github.com/vcliment89/GridViewEX)。您不需要实现所有的 gridview，但演示项目中有一个自定义寻呼机的示例。

# sql - 交叉乘法表

> ID：15067595
> 
> 赞同：2
> 
> 时间：2013-02-25T13:00:19.770
> 
> 标签：sql

我有这个 SQL 代码，我想在其收费单和收据上显示每个项目的总和：

```
select item_description, sum(receipt_qty) as Samp1, sum(chargeSlip_qty) as Samp2
from Items inner join Receipt_Detail on (Receipt_Detail.item_number =
    Items.item_number)
inner join ChargeSlip_Detail on (ChargeSlip_Detail.item_number =
    Items.item_number)
group by item_description 
```

它产生这个输出：

```
Acetazolamide 2681 1730
Ascorbic Acid 1512 651
Paracetamol   1370 742
Silk          576  952 
```

但它应该是：

```
Acetazolamide 383  173
Ascorbic Acid 216  93
Paracetamol   274  106
Silk          96   238 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:03:43.400

由于您要连接表，因此当您获得`sum()`. 因此，您可以使用子查询来获取结果。这将得到`sum()`for the`receipt`和`chargeslip`for each`item_number`然后你将它加入到你的`items`表中以获得最终结果：

```
select i.item_description, 
  r.Samp1, 
  c.Samp2
from Items i
inner join
(
  select sum(receipt_qty) Samp1,
    item_number
  from Receipt_Detail 
  group by item_number
) r
  on r.item_number = i.item_number
inner join
(
  select sum(chargeSlip_qty) Samp2,
    item_number
  from ChargeSlip_Detail 
  group by item_number
) c 
  on c.item_number = i.item_number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:12:48.313

左连接返回左表中的行，并且对于左表中的每一行，右表中的所有匹配行。

例如：

```
create table Customers (name varchar(50));
insert Customers values 
    ('Tim'), 
    ('John'), 
    ('Spike');
create table Orders (customer_name varchar(50), product varchar(50));
insert Orders values (
    ('Tim', 'Guitar'), 
    ('John', 'Drums'), 
    ('John', 'Trumpet');
create table Addresses (customer_name varchar(50), address varchar(50));
insert Addresses values (
    ('Tim', 'Penny Lane 1'), 
    ('John', 'Abbey Road 1'), 
    ('John', 'Abbey Road 2'); 
```

然后，如果您运行：

```
select  c.name
,       count(o.product) as Products
,       count(a.address) as Addresses
from Customers c
left join Orders o on o.customer_name = c.name
left join Addresses a on a.customer_name = c.name
group by name 
```

你得到：

```
name    Products    Addresses
Tim     1           1
John    4           4
Spike   0           0 
```

但是 John 没有 4 个产品！
如果您在没有 的情况下运行`group by`，您可以看到计数关闭的原因：

```
select  *
from Customers c
left join Orders o on o.customer_name = c.name
left join Addresses a on a.customer_name = c.name 
```

你得到：

```
name    customer_name   product     customer_name   address
Tim     Tim             Guitar      Tim             Penny Lane 1
John    John            Drums       John            Abbey Road 1
John    John            Drums       John            Abbey Road 2
John    John            Trumpet     John            Abbey Road 1
John    John            Trumpet     John            Abbey Road 2
Spike   NULL            NULL        NULL            NULL 
```

如您所见，连接最终会相互重复。对于每个产品，地址列表都是重复的。这会给你错误的计数。要解决此问题，请使用其他出色的答案之一：

```
select  c.name
,       o.order_count
,       a.address_count
from    Customers c
left join 
        (
        select  customer_name
        ,       count(*) as order_count
        from    Orders 
        group by
                customer_name          
        ) o
on      o.customer_name = c.name
left join 
        (
        select  customer_name
        ,       count(*) as address_count
        from    Addresses 
        group by
                customer_name          
        ) a
on      a.customer_name = c.name 
```

子查询确保每个客户只加入一行。结果要好得多：

```
name    order_count address_count
Tim     1           1
John    2           2
Spike   NULL        NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:03:58.270

首先执行 GROUP BY， per `Item_Number`，这样您就不会从`Receipt_Detail`and中乘出行`ChargeSlip_Detail`。也就是说，您`Item_Number`在 JOINing 之前生成 SUM 值`Items`

```
select
    I.item_description,
    R.Samp1,
    C.Samp2
from
    Items I
    inner join
    (SELECT item_number, sum(receipt_qty) as Samp1
      FROM Receipt_Detail
      GROUP BY item_number
    ) R
        on (R.item_number = I.item_number)
    inner join
    (SELECT item_number, sum(chargeSlip_qty) as Samp2
      FROM ChargeSlip_Detail
      GROUP BY item_number
    ) C
        on (C.item_number = I.item_number) 
```

# python - 使用类绘制两组数据

> ID：15067597
> 
> 赞同：0
> 
> 时间：2013-02-25T13:00:24.387
> 
> 标签：python, matplotlib

我是 Python 的初学者，所以我不知道 bug 的技术原因，可能我会错过请求中的某些内容。

我试图在同一个图上绘制两组不同的数据，但我的代码有问题。目的是绘制“脉冲曲线”，例如计数率与相位的关系，并且在同一图上还绘制来自同一相位箱中光谱分析的一些拟合分析的结果。
我使用`twinx(`) 因为 y 轴有两个不同的比例。但是，我必须在主代码中调用一个类，而这个类是从某些给定文本文件中读取数据所必需的。
当我尝试绘制不同的数据时，只需在代码中直接使用标准函数创建，就像[这里](http://matplotlib.org/faq/howto_faq.html#multiple-y-axis-scales)的官方示例一样，就没有问题了。我将发布我的代码，希望与类的复杂性不会妨碍对主题的良好理解：

```
#!/usr/bin/env python

import glob, re, sys, os
sys.path.append('/path-to-the-class-file/')

from scipy import *
from pylab import *
from prs import *
from scipy import optimize
from scipy import stats
import numpy as np
import matplotlib.pyplot as plt
import pyfits

#--------------------------------------------------------------------------------------------#      
# *data* is the class that read the data

data=Data('1131', array(['0.0_0.10','0.10_0.24','0.24_0.40','0.40_0.60','0.60_0.83','0.83_1.0']), array(['0.0_0.10','0.10_0.24','0.24_0.40','0.40_0.60','0.60_0.83','0.83_1.0']), 8, 3)

pp=pyfits.open('/path-to-the-fits-file-with-the-data/')
phase = pp[1].data.field(0)
rate = pp[1].data.field(2)
pp.close()

ax1 = subplot(311)
ax1.plot(phase, rate)
ay1 = ax1.twinx()

ecyc=data.ecyc1
ay1.plot(phase, ecyc) 
```

我没有指定任何关于该课程的内容，因为我不确定它是否有用。我收到的错误如下：

```
 Traceback (most recent call last):
  File "prs2.py", line 36, in <module>
    ay1.plot(phase, ecyc) #, yerr = (demin, demax))
  File "/science/epd-7.1-2-rh5-x86_64/lib/python2.7/site-packages/matplotlib/axes.py", line 3783, in plot
    for line in self._get_lines(*args, **kwargs):
  File "/science/epd-7.1-2-rh5-x86_64/lib/python2.7/site-packages/matplotlib/axes.py", line 317, in _grab_next_args
    for seg in self._plot_args(remaining, kwargs):
  File "/science/epd-7.1-2-rh5-x86_64/lib/python2.7/site-packages/matplotlib/axes.py", line 294, in _plot_args
    x, y = self._xy_from_xy(x, y)
  File "/science/epd-7.1-2-rh5-x86_64/lib/python2.7/site-packages/matplotlib/axes.py", line 234, in _xy_from_xy
    raise ValueError("x and y must have same first dimension")
ValueError: x and y must have same first dimension 
```

pr2.py 是主文件的名称。

我希望我已经按照规则发布。请问有什么建议吗？

# ember.js - EMBER 1.0 RC 是否需要 grunt v0.4.0 版本？

> ID：15067601
> 
> 赞同：1
> 
> 时间：2013-02-25T13:00:34.207
> 
> 标签：ember.js, gruntjs

我打算使用 EMBER 1.0 RC，我们需要 grunt 版本 v0.4.0 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:49:09.790

不，Grunt 不需要使用 Ember。您可以简单地[下载](https://raw.github.com/emberjs/ember.js/release-builds/ember-1.0.0-rc.1.js)Ember 并将其包含在您的应用程序中。

Grunt 是一个构建系统，可帮助您组织项目并执行有用的任务，但不是必需的。您可以在没有构建系统的情况下创建简单的 Ember 应用程序，但是构建系统非常有用，应该用于任何严肃的项目。

这是一个示例 JSBin，显示了一个不需要构建系统的简单 Ember 应用程序：http: [//jsbin.com/ixupad/1/edit](http://jsbin.com/ixupad/1/edit)

这是使用 Grunt 的 Ember 应用程序的一个很好的示例：[https ://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences)

# javascript - 如果音频停止，如何取消选中复选框？

> ID：15067604
> 
> 赞同：1
> 
> 时间：2013-02-25T13:00:53.453
> 
> 标签：javascript, html, audio, windows-8, checkbox

我有一个复选框，选中时播放音频，未选中时停止播放音频。但是，如果您因为音频的长度而对其进行检查，则音频会在某个点停止。当音频结束时，我想将复选框设置为未选中。如何检查音频是否在 javascript 中停止。

对不起，如果我用了太多次检查这个词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:07:21.857

添加这样的事件：

```
var audio = document.getElementById("#audio");

audio.addEventListener("ended", function() { 

   var checkbox = document.getElementById("#checkbox1");
   checkbox.checked = false;

}, true); 
```

您还可以使用以下方法检查浏览器是否支持**onended**事件：

`audio.hasOwnProperty('ended')`

# javascript - 如何从 dynatree 事件中调用外部 javascript 函数

> ID：15067605
> 
> 赞同：-1
> 
> 时间：2013-02-25T13:00:55.450
> 
> 标签：javascript, jquery, jquery-ui, jquery-dynatree

我使用 Jquery dynatree，我需要从 dynatree 事件中调用我的函数`onSelect`。例子：

```
 <script>
    function fillAdditionCheckboxes(node){
             ....
    }

    $(".dynatree-wrapper", this.el).dynatree({
        narrowSearchProgress : false,
        clickFolderMode: 1,
        checkbox: false,
        children: root.children,
        selectMode:1,
        onSelect:function (flag, node) {
            //how I can call my function ????
            fillAdditionCheckboxes(node);
        }
    });
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:21:30.720

首先，你为什么使用`"narrowSearchProgress : false"`？这不是一个有效的参数。[请参阅文档](http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html)。

你怎么了？dynatree 是否正在创建？你可以选择项目吗？

```
<script>
  function fillAdditionCheckboxes(node){
         ....
  }

  $(".dynatree-wrapper", this.el).dynatree({
      narrowSearchProgress : false,
      clickFolderMode: 1,
      checkbox: false,
      children: root.children,
      selectMode:1,
      onSelect:function (flag, node) {
          fillAdditionCheckboxes(node);
      }
  });
</script> 
```

# java - ConcurrentModificationException 尽管@Lock(LockType.READ) 注释

> ID：15067607
> 
> 赞同：1
> 
> 时间：2013-02-25T13:01:13.020
> 
> 标签：java, jakarta-ee, concurrency, glassfish

我在 Glassfish 3.1.2.2 上有 Java EE 应用程序

通过 read() 我得到以下代码 ConcurrentModificationException：

```
private Set<MonitoredService> connectedServices = new HashSet<MonitoredService>();

@Override @Lock(LockType.WRITE)
public void addConnectedService(MonitoredService service) {
    if (!connectedServices.contains(service)) {
        connectedServices.add(service);
    }
}

@Override  @Lock(LockType.READ)
public Set<MonitoredService> getConnectedServices() {
    return  Collections.unmodifiableSet(new HashSet<MonitoredService>(connectedServices));
} 
```

我认为 Lock 注释关心集合上的同步访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:06:31.730

仅仅因为函数是同步的，并不意味着实际的集合是同步的。`connectedServices`即使在单例中，您也无法保证其他内容没有被修改。如果您确实需要同步集合，请使用：

```
Collections.synchronizedSet(...); 
```

# iphone - 从 plist 读取时程序崩溃

> ID：15067611
> 
> 赞同：0
> 
> 时间：2013-02-25T13:01:30.003
> 
> 标签：iphone, ios, objective-c, xcode

我正在尝试从以下`plist`内容中读取

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
<dict>
    <key>question</key>
    <string>2 + 2 = ?</string>
    <key>A</key>
    <string>2</string>
    <key>B</key>
    <string>4</string>
    <key>C</key>
    <string>3</string>
</dict>
<dict>
    <key>question</key>
    <string>2 + 4 = ?</string>
    <key>A</key>
    <string>3</string>
    <key>B</key>
    <string>6</string>
    <key>C</key>
    <string>9</string>
</dict>
</array>
</plist> 
```

我试图在按下 UIButton 时更新视图控制器，但从数组中读取似乎有错误。有一个创建错误的数组。第一个问题显示得很好，但是当按下按钮时它会崩溃。断点显示崩溃的行是

> self.questionasked.text = question[currentQuestion];

这是代码

```
- (void)viewDidLoad
{
[super viewDidLoad];
rootArray = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"question" ofType:@"plist"]];

currentQuestion = -1;
[self showNextQuestion];
}
 -(void) showNextQuestion{
        currentQuestion++;
    int numItems = [rootArray count];
    NSMutableArray *question = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *A = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *B = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *C = [NSMutableArray arrayWithCapacity:numItems]; 

for (NSDictionary *itemData in rootArray) {
    [question addObject:[itemData objectForKey:@"question"]];
    [A addObject:[itemData objectForKey:@"A"]];
    [B addObject:[itemData objectForKey:@"B"]];
    [C addObject:[itemData objectForKey:@"C"]];

    self.questionasked.text = question[currentQuestion];
    self.answer1.text = A[currentQuestion];
    self.answer2.text = B[currentQuestion];
    self.answer3.text = C[currentQuestion];

    }
}

-(IBAction)nextQ:(UIButton *) sender{

[self showNextQuestion];

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:21:48.607

首先，您需要更改将 plist 加载到数组中的方式，因为它会自动释放更改：

```
rootArray = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"question" ofType:@"plist"]]; 
```

有了这个 ：

```
 rootArray = [[NSArray alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"question" ofType:@"plist"]]; 
```

并且您遇到另一个将导致崩溃的错误，您必须在 showNextQuestion 方法中获取以下行：

```
self.questionasked.text = question[currentQuestion];
    self.answer1.text = A[currentQuestion];
    self.answer2.text = B[currentQuestion];
    self.answer3.text = C[currentQuestion]; 
```

在 for 语句中，代码应该是这样的：

```
-(void) showNextQuestion{
        currentQuestion++;
    int numItems = [rootArray count];
    NSMutableArray *question = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *A = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *B = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *C = [NSMutableArray arrayWithCapacity:numItems]; 

    for (NSDictionary *itemData in rootArray) {
        [question addObject:[itemData objectForKey:@"question"]];
        [A addObject:[itemData objectForKey:@"A"]];
        [B addObject:[itemData objectForKey:@"B"]];
        [C addObject:[itemData objectForKey:@"C"]];

        }
         self.questionasked.text = question[currentQuestion];
        self.answer1.text = A[currentQuestion];
        self.answer2.text = B[currentQuestion];
        self.answer3.text = C[currentQuestion];

    } 
```

祝你好运..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:10:23.230

请尝试将这些代码行放在`for`循环之外。

```
self.questionasked.text = question[currentQuestion];
self.answer1.text = A[currentQuestion];
self.answer2.text = B[currentQuestion];
self.answer3.text = C[currentQuestion]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:18:03.347

当您使用：

```
rootArray = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"question" ofType:@"plist"]]; 
```

你会得到一个`autoreleased` `NSArray`，这就是它崩溃的原因，将其更改为：

```
rootArray = [[NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"question" ofType:@"plist"]] retain]; 
```

如果您使用的是 ARC，请使用：

```
@property (nonatomic, strong) NSArray *rootArray; 
```

和

```
self.rootArray = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"question" ofType:@"plist"]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:08:22.587

首先从`plist`文件中获取数据，这里`yourArray`是`NSArray`

```
yourArray = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"FileName" ofType:@"plist"]];    

for(int i=0; i < yourArray.count; i++)
{
  NSLog(@"%@",[array objectAtIndex:i] objectForKey:@"question"]);
  NSLog(@"%@",[array objectAtIndex:i] objectForKey:@"A"]);
  NSLog(@"%@",[array objectAtIndex:i] objectForKey:@"B"]);
  NSLog(@"%@",[array objectAtIndex:i] objectForKey:@"C"]);
} 
```

Consol 中的输出显示。

# php - 从 mysql 填充第二个下拉菜单

> ID：15067612
> 
> 赞同：1
> 
> 时间：2013-02-25T13:01:36.783
> 
> 标签：php, mysql, ajax

我看到有人问过类似的问题，但没有一个人回答我的问题。我有一个关于 ajax 和 php 的问题。在他们两个中，我都是相对初学者。

我尝试做的是一个所谓的：链式选择框。我想要2个下拉菜单。当我从第一个值中选择一个值时，第二个下拉菜单会从 mysql 数据库中填充。

为此，我使用 jquery、ajax、php 和 mysql。

我试图在网上找到一些例子，但它们对我来说似乎都相当复杂（我想是因为我是初学者）。

我决定自己做一些东西，但我被堆积了。我不确定逻辑是否正确。

所以我们开始（我将在这里只包含相关代码）：

使用 jquery 我发送一个 ajax 请求：

```
 $("#loc").change(function(){
     var val = ($('#loc').val());

        $.ajax({
        type:'POST',
        url:'query.php',
        data: {val:val},
        success:function(response){
            $("#x").html(response);
        } });
    }); 
```

“loc”是第一个下拉菜单的 id。我得到值并将其发送到 query.php

query.php 有以下几行代码：

```
 <?php

include('connect.php'); 
$area = $_POST['val'];
$query ="SELECT DISTINCT activity FROM main ORDER BY 1 where n_city='$area'";
$result = mysqli_query($dbcon, $query) or die('no available data');
$options="";
while ($row=mysqli_fetch_array($result, MYSQLI_ASSOC)){
$activity=$row["activity"];

 }
 ?> 
```

现在我想弄清楚两件事。1）我应该在成功函数中返回什么，以便获得一个填充了查询结果的表单？2）其次也是最重要的，我的想法实际上是正确的还是我遗漏了一些逻辑错误？

非常感谢。迪米特里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:05:06.193

1.  干净的解决方案是返回一个 JSON 数组，其中包含第二个下拉菜单的所有选项。这可以通过创建一个普通的 PHP 数组然后使用`json_encode()`. 您可以遍历结果并在 JS 函数中创建新选项。

2.  它肯定会像这样工作。但是，花时间学习如何使用其中一种可用的解决方案可能是值得的。

# swing - 使父面板和所有其他兄弟面板的子面板顶部

> ID：15067614
> 
> 赞同：0
> 
> 时间：2013-02-25T13:01:42.747
> 
> 标签：swing, drag-and-drop, jpanel, visible

我有一个父母`JPanel`，为此我添加了这些组件。

*   第一的`JTable`

*   秒针`JTable`

*   第一个孩子`JPanel`

我现在正在做的步骤。

*   我将数据从一个拖到`JTable`另一个`JTable`。

*   创建一个`JPanel`将显示拖动数据的运行时。

*   `JLabel`在创建的运行时添加一个值`JPanel`

参考链接[DNDCode](https://stackoverflow.com/questions/4886689/why-draghandler-exportasdrag-disables-my-mousemotionlistener/5033074#5033074)

我正在使用`GridBayLayout`父面板。

**问题**-

它在 JTable 下隐藏了我的运行时创建的 JPanel，即运行时创建的 JPanel 不会出现在添加的第一个 JTable 的顶部。

# android - 闪屏前的白屏

> ID：15067615
> 
> 赞同：4
> 
> 时间：2013-02-25T13:01:45.313
> 
> 标签：android, performance

我有一个问题`SplashScreenActivity`，当我在手机上启动我的应用程序时，它会显示大约 0.5 秒的白屏。`MainActitivy`扩展`FragmentActivity`并在I中`AndroidManifest`声明`SplashScreenActivity`为启动器和纵向模式为`screenOrientation`.

**编码：**

```
public class SplashScreenActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.splashscreen);
    randomSplash();

    Thread splashscreen = new Thread() {

        public void run() {
            try {
                Thread.sleep(1000);
                Intent mainScreen = new Intent("com.rm.jkrm.MAINACTIVITY");
                startActivity(mainScreen);
            } catch (InterruptedException e) {

            } finally {
                finish();
            }
        }
    };
    splashscreen.start();
}

private void randomSplash(){
    Random random = new Random();
    int i = random.nextInt(4);

    LinearLayout ln = (LinearLayout) findViewById(R.id.splashscreen);

    switch(i){
    case 1: 
        ln.setBackgroundResource(R.drawable.splash1);
        break;
    case 2: 
        ln.setBackgroundResource(R.drawable.splash2);
        break;
    case 3: 
        ln.setBackgroundResource(R.drawable.splash3);
        break;
    default: 
        ln.setBackgroundResource(R.drawable.splash0);
        break;
    }
}
} 
```

**XML:**

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/splashscreen"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="vertical">
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:27:32.967

您需要在 AsyncTask 中运行这两个操作：

```
setContentView(R.layout.splashscreen);
randomSplash(); 
```

将`setContentView`doInBackground-method 和您运行的 postExecute 方法放入`randomSplash`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:08:39.457

```
 Thread splashscreen = new Thread() {

        public void run() {
            try {
                Thread.sleep(1000);
                Intent mainScreen = new Intent("com.rm.jkrm.MAINACTIVITY");
                startActivity(mainScreen);
            } catch (InterruptedException e) {

            } finally {
                finish();
            }
        }
    };
    splashscreen.start(); 
```

这是你的问题 UI 线程睡眠不是一个很好的主意，而是使用处理程序，我认为它也可能导致异常。

```
Handler h=new Handler();
        h.postDelayed(new Runnable() {

            public void run() {
                // TODO Auto-generated method stub
                startActivity(new Intent(Splash_Activity.this,Main_Activity.class));
                finish();
            }
        }, 2000);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-07T19:01:00.383

将 AndroidManifest.xml 文件中的 SplashActivity 主题更改为此。

```
android:theme="@android:style/Theme.Translucent.NoTitleBar" 
```

# php - 自定义排序数组

> ID：15067616
> 
> 赞同：4
> 
> 时间：2013-02-25T13:01:58.877
> 
> 标签：php, arrays, sorting, push

```
$original_ids = array(1, 2, 3, 4); //<--- Original values without sorted.
$sorted_ids = array(4, 1, 3); //<--- Fixed values (sort by this)
$result_ids = array(); //<--- The result array after sorted 
```

我只想重新检查匹配的数组并排序`$sorted_ids`（如果你理解的话）

$result_ids 必须是... `array(4, 1, 3, 2)`（**2**不在 $original_ids 数组中，所以把它放在**最后**）

**我绑定到类似...的代码：**

```
foreach ($sorted_ids as &$id) {
    if (in_array($id , $original_ids)) {
        $result_ids[] = $id;
    } else {

    }
} 
```

但我不知道如何将不匹配的数组推送到 $result_ids 数组的最后一个。

不明白就评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:09:30.307

```
$result_ids = array_merge(
   array_intersect($sorted_ids, $original_ids),  // the values that match sorter
   array_diff($original_ids, $sorted_ids)        // append the rest
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:05:38.163

```
foreach ($sorted_ids as $id) {
    if (in_array($id , $original_ids)) {
        $result_ids[] = $id;
    } else {
        $addToEnd[] = $id
    }
}

array_merge($result_ids, $addToEnd); 
```

顺便说一句，您的使用`&$id`是毫无意义的，因为您推动了它的价值。你不需要参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T13:08:30.673

```
array_merge($sorted_ids, array_diff($original_ids, $sorted_ids)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:07:06.767

```
$original_ids = array(1, 2, 3, 4); 
$sorted_ids = array(4, 1, 3);
foreach($original_ids as $key=>$val){
    if(in_array($val,$sorted_ids)){
       unset($original_ids[$key]);
    }
}

$result_ids = array_merge($sorted_ids,$original_ids);

print_r($result_ids); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T13:13:06.373

您可以使用此代码：

```
<?php

foreach ($sorted_ids as &$id) {
    if (sort($id)) {
        $result_ids[] = $id;
    } else {

    }
}

?> 
```

它会做你需要的

# c++ - c ++ ostringstream对象在返回main函数后导致未处理的异常

> ID：15067617
> 
> 赞同：1
> 
> 时间：2013-02-25T13:02:05.213
> 
> 标签：c++, exception, sfml, ostringstream, unhandled

```
Unhandled exception at 0x53e83d80 in TestGame.exe: 0xC0000005: Access violation reading         
location 0xfeeefef6. 
```

当我关闭我的 SFML 窗口时，我的 C++ 程序抛出一个未处理的异常（导致主类返回 0；

导致此问题的代码是 std::ostringstream 对象，如果我不使用它，则不会发生问题。

```
void Orbs::UpdateText()
{
oss.str("");

oss << air_orbs.number;
air_orbs.text.setString(oss.str());
oss.str("");

oss.flush();

} 
```

类头：

```
#pragma once

#include <SFML/Graphics.hpp>
#include "FieldConst.h"
#include <sstream>

int const ORB_CHAR_SIZE = 20;
float const ORB_SCALE_SIZE = 0.25f;

struct  Orb
{
sf::Texture texture;
sf::Sprite sprite;
int number;
sf::Text text;

void Add(){
    number++;
}

void Remove(){
    number--;
}
};

class Orbs
{
public:
Orbs();
~Orbs();
void Render(sf::RenderWindow &target);
void UpdateText();

private:
Orb air_orbs, darkness_orbs, death_orbs, earth_orbs, electricity_orbs,
    fire_orbs, life_orbs, light_orbs, machine_orbs, metal_orbs, time_orbs,     water_orbs;

std::ostringstream oss;
};

Player::Player()
{
Player::name = "Player1";

Player::deck = new Deck();
Player::voidZone = new Deck();

Player::hand = new Hand();

Player::orbs = new Orbs();
} 
```

. #pragma 一次

```
#include "IncludeCards.h"
#include "Orbs.h"

class Player
{
 public:
Player();
~Player();

std::string GetName();
Deck* GetDeck();
Hand* GetHand();
Deck* GetVoidZone();
Orbs* GetOrbs();

void DrawFromDeck();
void DiscardToVoid(Card *cardToDiscard);

//void UseCard ability/invoke/spell

private:
std::string name;
Deck *deck;
Hand *hand;

Deck *voidZone;

Orbs *orbs;
}; 
```

我能做些什么来修复它？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:13:45.843

我不明白你为什么让 oss 成为 Orbs 的成员。它以更适合局部变量的方式使用，因此您应该删除它：

```
class Orbs
{
public:
Orbs();
~Orbs();
void Render(sf::RenderWindow &target);
void UpdateText();

private:
Orb air_orbs, darkness_orbs, death_orbs, earth_orbs, electricity_orbs,
    fire_orbs, life_orbs, light_orbs, machine_orbs, metal_orbs, time_orbs,     water_orbs;
};

void Orbs::UpdateText()
{
    std::stringstream oss;
    oss << air_orbs.number;
    air_orbs.text.setString(oss.str());
} 
```

或者使用 C++11：

```
void Orbs::UpdateText()
{
    air_orbs.text.setString(std::to_string(air_orbs.number));
} 
```

# android - 有没有办法在 android 和 i-os 的钛合金应用程序中使用 sqlite 数据库？

> ID：15067619
> 
> 赞同：0
> 
> 时间：2013-02-25T13:02:21.910
> 
> 标签：android, ios, sqlite, titanium, titanium-alloy

我正在尝试在 Alloy 应用程序（钛的 MVC）中连接现有的 SQLite 数据库。任何人都可以提出任何方法来完成这项任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:55:12.033

有关在 Alloy 中预加载数据库的信息，请参阅[此](https://github.com/appcelerator/alloy/tree/master/test/apps/models/sql_preload)示例。

# c - 用里面的结构类型初始化一个结构

> ID：15067620
> 
> 赞同：12
> 
> 时间：2013-02-25T13:02:27.380
> 
> 标签：c, struct

我想创建一个结构 Person，它由两个结构类型和一个变量组成。那么我该如何初始化和使用 struct Person 呢？

```
struct name{
   char *firstName;
   char *lastName;
} name;

struct address{
   char *street;
   int number;
} address;

struct person{
   struct name fullName;
   struct address fullAddress;
   int age;
} person; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T13:08:28.003

您可以使用嵌套`{}`的 .

```
struct person
{
   struct name fullName;
   struct address fullAddress;
   int age;
} person = 
{
    {
        "First Name", /* person.fullName.firstName */
        "Last Name",  /* person.fullName.lastName */
    },
    {
        "Street",     /* person.fullAddress.street */
        42            /* person.fullAddress.number */
    },
    42                /* person.age */
}; 
```

然后您可以访问其他成员，如下所示：

```
person.fullName.firstName;
person.fullName.lastName;
person.fullAddress.street;
person.fullAddress.number;
person.age; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:09:30.043

对于住在地址的 18 岁的 John Doe，42

```
struct person{
   struct name fullName;
   struct address fullAddress;
   int age;
} person = {{"John", "Doe"}, {"address", 42}, 18}; 
```

# javascript - javascript 仅获取 div 父节点值（没有子节点）

> ID：15067626
> 
> 赞同：5
> 
> 时间：2013-02-25T13:03:06.367
> 
> 标签：javascript, html

这是我的问题：

```
<html>
    <div id="parentdiv">
        some parent value
        <div id="childdiv">some child value</div>
    </div>
</html> 
```

> 父 div --> 父 div 内容 --> 子 div --> 子 div 内容 --> 结束子 div --> 结束父 div

我只需要获取父 div 值，没有子 div 值。我怎样才能在 Javascript 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:13:16.577

尝试这个：

```
alert($('#parentdiv').clone().children().remove().end().text()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:10:45.693

如果您可以控制 HTML - 只需将值包装在`<p>`标签中（应该如此），然后像这样访问它..

HTML

```
<html>
    <div id="parentdiv">
        <p>some parent value</p>
        <div id="childdiv">some child value</div>
    </div>
</html> 
```

jQuery

```
$('#parentdiv p').text(); 
```

如果 parentdiv 中还有其他`<p>`元素，则使用一个类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:11:07.227

这有效：

```
var $parent = $('#parentdiv').clone();

$parent.find('#childdiv').remove();

var parentvalue = $parent.text(); 
```

在这个[JsFiddle中试试](http://jsfiddle.net/markus85/QFaWR/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:15:26.477

只需将其包装在 span 标签中并获取该标签的 inneHTML

# python - 安装后查找 distutils 安装目录

> ID：15067629
> 
> 赞同：0
> 
> 时间：2013-02-25T13:03:15.093
> 
> 标签：python, python-3.x, distutils

Distutils 允许用户使用, ,等`setup.py`选项微调安装路径。但是**我如何在****安装*****后***找到这些选项的值？`--prefix``--install-purelib``--install-scripts``--install-data`

 *我在 stackoverflow 上阅读了一些讨论，但找不到对这些`setup.py`选项值的引用。

我的具体问题是：

*   我需要通过`datafiles=`安装选项 访问文件设置
    *   → 哪个去`--install-data`，默认`--prefix`（顺便说一句，`sys.prefix`不像文档说的那样匹配）；
*   从通过安装的脚本`scripts`
    *   → 哪个去`--install-scripts`，默认`--prefix`+ `/bin`。

我一直在查看`..`脚本目录中的相对内容，但这对于不同系统上的用户来说是个问题。如果我可以查询安装选项的值，它将适用于所有情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:57:20.990

您可以使用[pkgutil.get_data()](http://docs.python.org/2/library/pkgutil.html#pkgutil.get_data)访问数据文件，而无需摆弄安装路径。

```
import pkgutil
contents_of_datafile = pkgutil.get_data(__name__, 'data_you_installed/datafile.csv') 
```*

# java - 图像不出现

> ID：15067630
> 
> 赞同：-5
> 
> 时间：2013-02-25T13:03:17.033
> 
> 标签：java, android, xml

在此先感谢，我有一张图片，我想在我的**contatore**超过 10 时显示它。但它没有出现。

```
ImageView immagine;
immagine = (ImageView) findViewById(R.id.nello);
immagine.setVisibility(View.INVISIBLE);
...
contatore++;
display.setText("Il totale è: "+ contatore);

if (contatore >10)
{
    immagine.setVisibility(View.VISIBLE);
}` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:18:04.740

您必须在每次单击时进行此检查，仅在 onCreate 时检查 contatore 的值
这必须进入每个 OnClickListener

```
if (contatore >10)    
        immagine.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:22:35.513

尝试这个

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    contatore++;
    display.setText("Il totale è: "+ contatore);

    if (contatore > 10) {
        immagine.setVisibility(View.VISIBLE);
    }
  } 
```

# ios - 自定义 UILabel 设置器

> ID：15067637
> 
> 赞同：0
> 
> 时间：2013-02-25T13:03:38.600
> 
> 标签：ios, objective-c, uilabel

**为什么不改变uilabel？**

我创建了一些类，但无法覆盖设置器

.h 文件的代码

```
@interface ViewController : UIViewController
{
    UILabel * _lblName;
}
@property (retain, nonatomic) IBOutlet UILabel * lblName;

@end 
```

.m 文件的代码

```
@synthesize lblName = _lblName; 
```

```
- (void)setLblName:(UILabel *)lblName{
if(![_lblName isEqual:lblName]){
[_lblName release];
_lblName = [lblName retain];}} 
```

```
- (IBAction)didCustomBtnClick:(id)sender {
UILabel* lbl = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.0, 100.0, 30.0)];
lbl.text = @"Duck";
self.lblName = lbl;
[lbl release];} 
```

# javascript - 如何获取 kendo ui 网格中下拉列表的值？

> ID：15067639
> 
> 赞同：1
> 
> 时间：2013-02-25T13:03:42.327
> 
> 标签：javascript, html, kendo-ui

我有一个带有下拉列表和复选框的网格。每当我选中复选框（多选）时，我都想获取所选下拉列表的值。我怎样才能使用 kendoui 做到这一点。

请帮帮我这是我的[小提琴](http://jsfiddle.net/MG89G/253/#run)。

我的代码：

```
<div id="grid"></div>

<input type="button" value="gridSelectedItem" onclick="selectElementContents( document.getElementById('grid') );"
    />

<div>
<input id="dropdownList" runat="server" /></div>
<script type="text/x-kendo-template" id="CheckboxTemplate">
<li unselectable="off" class="k-item nowrap check-item">
    <input type="checkbox" name="#= text #" value="#= value #" class="check-input" #= selected ? "checked" : "" #/>
    <span>#= text #</span>
</li> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T18:28:07.567

另一方面 - 您定义的模板不需要包含 li 元素 - 它是为您自动生成的。

要检索与项目相关的模型，您可以使用 ddl 客户端对象的 dataItem 方法和选项的索引（这就是您需要修复模板的原因，因为索引会出错）。

这是神奇的片段：

```
var ddl = $('#dropdownList').data().kendoDropDownList;
var model = ddl.dataItem($input.closest('.k-item').index());
alert(model.text); 
```

我更新了您的[小提琴](http://jsfiddle.net/MG89G/331/)以查看它的实际效果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-04T12:14:33.340

这对我有用：

var selectedId = $('#MyDropDown').data("kendoDropDownList").value();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T06:19:32.003

1.  以下代码适用于我的 shift kendo 下拉菜单：

```
<div class="form-group">
  <label>Shift</label>
  <div class="input-group">
    @(Html.Kendo().DropDownListFor(t => t.ShiftId)
      .Name("ShiftId")
      .DataTextField("Text")
      .DataValueField("Value")
      .OptionLabel("...Select Shift...")
      .DataSource(source => source.Read(read => read.Action("GetShifts", "AssessmentResult")))
      .HtmlAttributes(new { style = "width:292px", @required = "required" })
    )
  </div>
</div> 
```

2.  我也有点击事件按钮：

```
<button type="button" id="show">Show</button> 
```

3.  该脚本如下所示，它会提醒所选的班次值（注意：我在 Telerik Kedno 论坛上做了一些研究）

```
<script type="text/JavaScript">
  $('#show').click(function(event) {
    var ShiftId = $("#ShiftId").data("kendoDropDownList").value();            
    alert(ShiftId); 
```

}

# javascript - 如何在 Chromium 中打开 PDF 文件？

> ID：15067645
> 
> 赞同：5
> 
> 时间：2013-02-25T13:04:00.147
> 
> 标签：javascript, node.js, google-chrome, chromium, appjs

我正在为我的桌面应用程序使用 nodejs 和 chromium。问题是我无法在 chromium 中打开 pdf 文件。所以我google了一下，发现大部分答案都与mozplugger插件有关。我安装了以下链接中提到的插件：

[http://www.tootips.com/2013/01/how-to-open-pdf-files-inside-chromium.html](http://www.tootips.com/2013/01/how-to-open-pdf-files-inside-chromium.html)

现在，当我尝试在 chromium 中打开 pdf 文件时，我收到一条错误消息：“ **Mozplugger: M4 parsing of config generated error ”。**如何解决此错误？

请帮我！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T18:31:36.023

如果您查看这个[`Ask Ubunutu`问题](https://askubuntu.com/questions/12584/why-doesnt-chromium-have-chrome-pdf-viewer-plugin/12587#12587)，您会发现您实际上可以将 Chrome 的 PDF 查看器与 Chromium 一起使用。

Chrome 有一个不错的 PDF 插件，可以让你在页面中打开，但它不是开源的，所以它不包含在 Chromium 中。您可以安装 Chrome 并对插件进行符号链接，然后每当您更新 Chrome 时，您也会在 Chromium 中获得更新。或者，您可以将插件复制到 Chromium，然后卸载 Chrome，但您不会以这种方式收到更新。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T22:42:17.907

您是否尝试过使用 PDFjs 作为完全基于 javascript 的替代解决方案？

```
https://github.com/mozilla/pdf.js 
```

它相对较新，但适用于许多不同的示例，也许它对您的应用程序来说已经足够了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T09:29:41.533

在 Linux 中，我认为我们需要 mozplugger 插件来查看 pdf 文件。我刚刚删除并再次安装了 mozplugger（参考链接：[http](http://www.tootips.com/2013/01/how-to-open-pdf-files-inside-chromium.html) ://www.tootips.com/2013/01/how-to-open-pdf-files-inside-chromium.html，http : [//mozplugger.mozdev.org /](http://mozplugger.mozdev.org/) ) 现在它似乎工作了。

在 windows 中，我们需要安装一个系统 pdf 阅读器，如 acrobat ( [http://www.adobe.com/in/products/reader.html](http://www.adobe.com/in/products/reader.html) )，因为 chromium 使用系统 PDF 查看器下载和显示 pdf (参考链接：[http:// code.google.com/p/chromium/wiki/ChromiumBrowserVsGoogleChrome](http://code.google.com/p/chromium/wiki/ChromiumBrowserVsGoogleChrome)）。

另一种解决方案是在 node.js 的帮助下使用以下脚本在默认浏览器中打开 pdf 链接。

安装 node.js 开放模块：

```
$ npm install open 
```

利用：

```
var open = require('open');
open('http://www.google.com', function (err) {
  if (err) throw err;
  console.log('The user closed the browser');
}); 
```

参考链接：[如何使用nodejs打开默认浏览器并导航到特定的URL](https://stackoverflow.com/questions/8500326/how-to-use-nodejs-to-open-default-browser-and-navigate-to-a-specific-url)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-19T23:51:31.680

您可以通过 Google 使用此扩展程序：[ExtensionDocs PDF/PowerPoint Viewer](https://chrome.google.com/webstore/detail/docs-pdfpowerpoint-viewer/nnbmlagghjjcbdhgmkedmbmedengocbn?hl=en)，它还允许您打开 docx、ppt、rar 和更多文件类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-03T12:43:23.310

Google 最近[宣布](https://news.ycombinator.com/item?id=7781878)Google Chrome PDF Viewer 将开源。这意味着在不久的将来 Chromium 浏览器和 Chromium OS 用户可以很快享受 Chrome PDF 查看器，而无需任何变通方法！

[请参阅https://code.google.com/p/pdfium/](https://code.google.com/p/pdfium/)上的 PDFium 项目网页

# jquery - jQuery - 显示和隐藏按钮

> ID：15067646
> 
> 赞同：2
> 
> 时间：2013-02-25T13:04:06.820
> 
> 标签：jquery, hide, show

我编写了一个脚本，在输入区域内单击时显示提交按钮。在输入外部单击时，该按钮应被隐藏。有几个区域和按钮，因此我为每个按钮和区域分配了一个唯一的 ID。

问题是：当我单击该区域时，会显示该按钮。但是当点击外面时，什么也没有发生。如果我只有一个按钮和区域，该脚本就可以工作，但是在分配 ID 时，它会停止工作......

```
$(".textarea").click(function(e) {
    var cid = $(this).attr('rel');

    $("#submit" + cid).show();
    e.stopPropagation();
});

$(document).click(function() {
    $("#submit" + cid).hide();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:25:29.440

该变量`cid`在匿名文本区域单击处理程序中声明。因此，当另一个函数由于单击而被调用时，它没有值。

将您的隐藏功能更改为独立于`cid`这样的东西

```
$(document).click(function() {
    $("button[id*=submit]").hide();
}); 
```

该`id*=submit`部分将查找所有按钮并隐藏它们`submit`。`id`这将规避跟踪的需要`cid`。如果您在 id 中有其他`submit`不想隐藏的按钮，则需要基于类进行选择或更改 id 格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:08:11.687

```
$(".textarea").click(function(e) {
    var cid = $(this).attr('rel');

    $("#submit" + cid).show();
    e.stopPropagation();
});

$(document).click(function() {
    //add logic to hide all submit buttons by assigning common class to all
}); 
```

# asp.net-mvc - 如何在编辑器模板中使用传递的选择列表

> ID：15067648
> 
> 赞同：3
> 
> 时间：2013-02-25T13:04:12.903
> 
> 标签：asp.net-mvc, asp.net-mvc-3, mvc-editor-templates

我正在尝试创建一个编辑器模板，该模板将为传递的选择列表中的每个值创建一个“引导样式”单选按钮（就像`Html.DropDownFor`创建下拉列表的方法一样）

所以我认为我有这个电话：

```
@Html.EditorFor(model => model.FaultTypeID,"RadioButtonList", 
        new SelectList(Model.AllowdeFaultTypes, "FaultTypeID", "FaultTypeName")) 
```

现在是 RadioButtonList 的模板：

```
@foreach (var item in ViewData["Items"] as SelectList)
{
    <a>@item.Text</a> <b>@item.Value</b>
} 
```

但转换失败，我得到一个`NullReferanceExeption`. 通过反思，我看到该`ViewData["Items"]`值是类型`System.Collections.Generic.List<CamelotFaultManagement.DAL.FaultType>`

问题是我真的不想将`RadioButtonList`编辑器模板与`CamelotFaultManagement.DAL.FaultType`类紧密结合，这样做没有任何意义。我想要一个通用的编辑器模板。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T13:12:09.630

在您的编辑器模板中，您似乎使用了一些`ViewData["Items"]`您从未设置过的属性。如果您想使用此类属性，请确保您已分配它：

```
@Html.EditorFor(
    model => model.FaultTypeID,
    "RadioButtonList", 
    new { Items = new SelectList(Model.AllowdeFaultTypes, "FaultTypeID", "FaultTypeName") }
) 
```

话虽如此，您使用某些 ViewData 东西的方法对我来说似乎完全错误。

我会简单地定义一个视图模型（在 ASP.NET MVC 中总是如此）：

```
public class RadioListViewModel
{
    public string Value { get; set; }
    public IEnumerable<SelectListItem> Values { get; set; }
} 
```

然后你可以将你的编辑器模板强类型化到这个视图模型。当然，您的编辑器模板现在将存储在`~/Views/Shared/EditorTemplates/RadioListViewModel.cshtml`：

```
@model IRadioListViewModel
@foreach (var item in Model)
{
    <a>@item.Text</a> <b>@item.Value</b>
} 
```

现在剩下的就是在你的主视图模型中使用这个视图模型：

```
public class MyViewModel
{
    public RadioListViewModel FaultTypes { get; set; }
    ...
} 
```

然后在您的视图中简单地呈现相应的编辑器模板：

```
@model MyViewModel
...
@Html.EditorFor(x => x.FaultTypes) 
```

简单、传统、强类型。

# java - 如何在 CDI 中动态创建实例

> ID：15067650
> 
> 赞同：15
> 
> 时间：2013-02-25T13:04:15.873
> 
> 标签：java, java-ee-6, cdi

假设我有一个 Car 课程。在我的代码中，我想创建 10 辆汽车。Car 类有一些`@Inject`带注释的依赖项。

这样做的最佳方法是什么？

CDI 有一个`Provider`接口，我可以用它来创建汽车：

```
@Inject Provider<Car> carProvider;
public void businessMethod(){
    Car car = carProvider.get();
} 
```

不幸的是，如果我没有`CarFactory`一个带有`@Produces`注释的方法来创建汽车，那它就不起作用。尽管它反映了现实世界，没有工厂我无法制造汽车，但我宁愿不为所有东西都写工厂。我只希望 CDI 容器像任何其他 bean 一样创建我的汽车。

您如何建议我创建这些汽车？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-07T08:37:25.000

只需使用`javax.enterprise.inject.Instance`界面即可。

像这样：

```
public class Bean {

    private Instance<Car> carInstances;

    @Inject
    Bean(@Any Instance<Car> carInstances){
        this.carInstances = carInstances;
    }

    public void use(){
        Car newCar = carInstances.get();
        // Do stuff with car ...
    }

} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-07T10:03:48.920

我最喜欢的程序化查找模型是使用`CDI.current().select().get()`.

[在这里](https://github.com/martinanderssondotcom/java-ee-concepts/blob/master/src/test/java/com/martinandersson/javaee/cdi/lookup/ProgrammaticLookupRunner.java)演示。

servlet 依赖于两个 CDI bean，一个是请求范围，另一个是应用范围：

```
private final RequestScopedBean requestScoped
            = CDI.current().select(RequestScopedBean.class).get();

private final ApplicationScopedBean applicationScoped
            = CDI.current().select(ApplicationScopedBean.class).get(); 
```

可以在[此处](https://github.com/martinanderssondotcom/java-ee-concepts/blob/master/src/test/java/com/martinandersson/javaee/cdi/lookup/ProgrammaticLookupTest.java)找到使用此 servlet 的测试类。

检查代码，您会注意到该代码与您将使用的代码完全等效`@Inject MyBean myBean;`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T17:59:52.027

您可以在`@Produces`注释中使用限定符：

```
@Qualifier
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.METHOD, ElementType.TYPE, ElementType.FIELD, ElementType.PARAMETER})
public @interface MyCars {
} 
```

样本生产者方法：

```
@Produces
@MyCars
public Car getNewCar(@New Car car){
    return car;
} 
```

用法：

```
@Inject
@MyCars
private Provider<Car> carProvider; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T18:09:04.260

另一种方法是简单地不给 Car 任何 CDI 范围，这使它具有依赖性，并且每次注入时都会获得一个新实例，并且这些实例在包含实例被销毁之前不会被销毁。

# c# - 找不到使 tessnet2 工作的方法

> ID：15067651
> 
> 赞同：0
> 
> 时间：2013-02-25T13:04:18.040
> 
> 标签：c#, tesseract, object-recognition, tessnet2

我创建了一个控制台应用程序。添加了对 tessnet2_32 的引用。

```
Ocr ocr = new Ocr();
using (Bitmap bmp = new Bitmap(filename))
{
    tessnet2.Tesseract tessocr = new tessnet2.Tesseract();
    tessocr.Init(@"C:\temp\tessdata", "eng", false);
... 
```

我也尝试更改`"C:\temp\tessdata"`为

```
C:\work\ConsoleApplication3\ConsoleApplication3
C:\work\ConsoleApplication3\ConsoleApplication3\tessdata
C:\work\ConsoleApplication3\ConsoleApplication3\bin\debug
C:\work\ConsoleApplication3\ConsoleApplication3\bin
C:\work\ConsoleApplication3\ConsoleApplication3\bin\debug\tessdata
C:\work\ConsoleApplication3\ConsoleApplication3\bin\tessdata
C:\work\ConsoleApplication3\ConsoleApplication3\debug\tessdata
C:\work\ConsoleApplication3\tessdata
C:\work\ConsoleApplication3\ 
```

该`tessdata`文件夹本身包含 9 个失败并被添加到所有这些位置：

```
eng.cube.bigrams
eng.cube.fold
eng.cube.lm
eng.cube.bigrams
eng.cube.params
eng.cube.size
eng.cube.word-freq
eng.tesseract_cube.nn
eng.traineddata 
```

但它总是存在于 .Init 行并带有一条消息：

```
The file 'z:\dev\interne\cs\tesseract-ocr-svn\dotnet\tessnet2.cpp' does not exist. 
```

我无法想象为什么它在我只有 C 的时候试图访问一些 Z 磁盘。或者我完全误解了这个错误。

有人可以逐步发布告诉我该做什么和/或我做错了什么吗？即使在阅读了 30 多个谷歌链接后，我也感到完全失落。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:32:07.453

您使用了错误版本的语言数据文件；你所拥有的是 Tesseract 3.0x。tessnet2 是 Tesseract 2.04 的 .NET 包装器，因此您需要加载兼容的数据文件。

[尝试从https://sourceforge.net/projects/tesseract-ocr-alt/files/](https://sourceforge.net/projects/tesseract-ocr-alt/files/)下载 tesseract-2.00.eng.tar.gz 。

# smpp - SMPP 注册_交付

> ID：15067656
> 
> 赞同：1
> 
> 时间：2013-02-25T13:04:33.373
> 
> 标签：smpp

我想知道在 SMPP 绑定中在哪里添加这个参数，所以它的默认值将从 0 更改为 1。

为了更清楚，我希望在 submit_sm.xml 中将此参数设置为 1。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:45:00.457

SMPP 3.4 规范，第 5.2.17 节可以回答您的大部分问题。

“registered_delivery”字段用于请求交付确认。该字段只能在 PDU 级别设置，而不是绑定级别。

有不同类型的交货确认。您可以要求不要求、要求之一、部分或全部。register_delivery 用 1 个字节表示，默认设置为 0x00；这意味着所有类型的交付确认都被禁用。您需要设置不同的位来覆盖。

以下是可能的配置列表：

### 对于 SMSC 交货收据（位 1 和 0）

*   xxxxxx 0 0 => 未请求 SMSC 交付收据（默认）。
*   xxxxxx 0 1 => 请求 SMSC 交付收据，最终交付结果是交付成功或失败。
*   xxxxxx 1 0 => 请求 SMSC 交付收据，最终交付结果为交付失败。
*   xxxxxx 1 1 => 保留。

### 对于 SME 发起的确认（位 3 和 2）

*   xxxx 0 0 xx => 未请求收件人 SME 确认（默认）。
*   xxxx 0 1 xx => 请求 SME 交付确认。
*   xxxx 1 0 xx => 要求 SME 手册/用户确认。
*   xxxx 1 1 xx => 请求交付和手动/用户确认。

### 对于中间通知（位 5）

*   xxx 0 xxxx => 未请求中间通知（默认）。
*   xxx 1 xxxx => 请求中间通知。

如您所见，可能要求 3 种不同类型的交货确认。

发送一种或多种类型的交付确认请求并不能保证 SMSC 有义务。由 SMSC 决定如何执行它。

# c++ - 通过引用复制本地对象

> ID：15067660
> 
> 赞同：0
> 
> 时间：2013-02-25T13:04:44.917
> 
> 标签：c++, visual-c++, memory-leaks

这是我的问题，

```
Class MClass {

public:

    void Add(OtherClass* objects) {
        _objects = objects;
    }

private:

    OtherClass* _objects;
}

//otherfile.cpp

void Setup() {

    MClass myObj;
    OtherClass obj[NUMBER_OF_OBJECTS];

    //obj initialization here
    //...

    myObj.Add(obj);
} 
```

它会导致 RT 错误，因为 *obj 在函数体结束后减小。

但是，如何使这个有效？

我喜欢先初始化一个对象，然后再将其分配给其他类。

**编辑**

我不想在这里使用存储类或其他东西，我只想要一个原始数组，因为它对我来说非常昂贵。它的功能不会减轻我的问题。

那么我该如何以原始数组样式做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:08:18.933

```
Class MClass {
public:
    void Add(std::vector<OtherClass> objects) {
        _objects = std::move(objects);
    }
private:
    std::vector<OtherClass> _objects;
}

//otherfile.cpp
void Setup() {
    MClass myObj;
    std::vector<OtherClass> obj(NUMBER_OF_OBJECTS);
    myObj.Add(std::move(obj));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:08:05.333

目前尚不完全清楚您要做什么，但您可以存储对象集合而不是指针：

```
class MClass 
{
 public:
    void Add(const std::vector<OtherClass>& objects) {
        objects_ = objects;
    }
    void Add(std::vector<OtherClass>&& objects) {
        objects_ = std::move(objects);
    }
 private:
    std::vector<OtherClass> objects_;
}; 
```

然后

```
void Setup() 
{    
    MClass myObj;
    std::vector<OtherClass> obj(NUMBER_OF_OBJECTS);
    //obj initialization here
    //...
    myObj.Add(std::move(obj)); // move obj's contents onto myObs's objects.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T13:13:54.403

在您的示例中，您存储了一个指向本地数组的指针。如果方法结束，则数组超出范围并且不再存在。

这就是原因，您的指针不再有效。如果您想解决这个问题，请了解 C++ 中的变量范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T13:08:33.027

停止使用原始数组，并使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)或[`std::array`](http://en.cppreference.com/w/cpp/container/array)。然后你就不必再担心了。

* * *

如果你*真的*想手动做，你也必须手动复制。使用 eg `std::vector`and`std::move`更有效，但在这里你可以：

```
Class MClass {
public:
    MClass()
        : _objects(nullptr), _count(0)
    {}

    MClass(const MClass& other)
        : _objects(nullptr), _count(0)
    {
        Add(other._objects, other._count);
    }

    ~MClass()
    {
        if (_objects != nullptr)
            delete [] _objects;
    }

    void Add(const OtherClass* objects, const size_t count)
    {
        if (_objects != nullptr)
            delete [] _objects;

        _objects = new [count];

        for (size_t i = 0; i < count; i++)
            _objects[i] = objects[i];

        _count = count;
    }

    MClass& operator=(const MClass& other)
    {
        Add(other._objects, other._count);
    }

private:
    OtherClass* _objects;
    size_t _count;
};

// ...

myObj.Add(obj, NUMBER_OF_OBJECTS); 
```

如您所见，它的代码更多，这使得跟踪和调试变得更加困难，并且出错的可能性也更大。而且不像我上面说的那么“有效”。

# node.js - Node.js：递归需求和导出

> ID：15067665
> 
> 赞同：1
> 
> 时间：2013-02-25T13:05:00.660
> 
> 标签：node.js, module

简单地说：我如何制作 a `require()`of a `require ()`，然后使用 an `exports`of an将数据恢复为原始数据`exports`？

这是一个实际的例子：

我的`hello.js`文件：

```
var text = "Hello world!"
exports.text 
```

在同一个文件夹中，我有`foo.js`文件：

```
var hello = require("./hello.js")
exports.hello 
```

最后，我的`app.js`文件（也在同一个文件夹中）：

```
var foo = require("./foo.js")
console.log(foo.hello.text) 
```

我期待它回来：

```
Hello world! 
```

但相反，它返回一个错误：

```
/Users/Hassinus/www/node/test/app.js:2
console.log(foo.hello.text)
                     ^
TypeError: Cannot read property 'text' of undefined
at Object.<anonymous> (/Users/Hassen/www/node/test/app.js:2:22)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10)
at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

有什么帮助吗？这种情况并没有那么棘手：我想将我的脚本分组到一个文件夹中，其中包含一个唯一的入口脚本，它将调用其他各种文件中的函数。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:18:52.167

您没有在导出上设置任何值。你必须做类似`exports.text = text`的事情，否则出口没有价值

你好.js

```
var text = "Hello world!";
exports.text = text; 
```

foo.js 文件：

```
var hello = require("./hello.js");
exports.hello = hello; 
```

app.js 文件

```
var foo = require("./foo.js");
console.log(foo.hello.text); 
```

# jquery - 为什么 on() 不起作用？

> ID：15067666
> 
> 赞同：1
> 
> 时间：2013-02-25T13:05:00.847
> 
> 标签：jquery, html

我试图简单地使用 .on('click') 事件，因为我正在我的页面上动态创建元素。

测试事件并且它只是没有触发：

```
function showSub(){
    alert('wefef');
}

$('.common-main-row').on('click', showSub); 
```

实际上，在这个例子中， .common-main-row 总是在页面上而不是动态创建的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:07:16.610

您使用的是什么版本的 jQuery，on() 从 1.7 开始仅在 jQuery 中可用，在此之前它是 live()。试试这个。

[http://jsfiddle.net/Upvfx/1/](http://jsfiddle.net/Upvfx/1/)

```
function showSub(){
    alert('wefef');
}

$('.common-main-row').live('click', showSub); 
```

编辑：

我在 jsfiddle 示例中使用了 jQuery 1.8.3。on() 从 1.7 开始包含在 jQuery 中。 [http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:09:31.843

确保您拥有最新的 jQuery 版本，您的代码包含在其中

```
 $(document).ready(function(){ /* your code here */ }); 
```

把它放在你的标题中。

```
 <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:09:40.400

[http://jsfiddle.net/sEfuu/](http://jsfiddle.net/sEfuu/)

```
$(document).ready(function() {
    $('.common-main-row').click( function(e){
        //do stuff
        alert('wefef');
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:10:14.867

您可以使用 .bind()

**[演示](http://jsfiddle.net/mRuTb/)**

```
function showSub(){
    alert('wefef');
}

$('.common-main-row').bind('click', showSub); 
```

# jquery - .toggle() 上的 jQuery UI 缓动设置打破了确定切换状态的能力？

> ID：15067667
> 
> 赞同：0
> 
> 时间：2013-02-25T13:05:03.247
> 
> 标签：jquery, html, toggle

在[这个](https://stackoverflow.com/questions/15066304/how-to-determine-the-current-state-of-jquery-toggle/15066386#comment21186700_15066386)问题中，我发现在切换 div 的可见性时使用缓动设置会破坏确定切换当前状态的能力。

在[jsFiddle](http://jsfiddle.net/eventide/wWaDm/)我有这些行：

```
$(this).next('div.detailsTable').toggle('blind', 'easeInOutQuart', 300);
$(this).next('div.detailsTable').toggle(); 
```

随着它们中的每一个被交替注释掉，检查“.is(':visible')”的 if 语句显示第一行始终显示为 false（不可见）。

在 HTML 的控制台中查看，显示属性（无或可见）永远不会在隐藏/显示的 div 上设置。

转到上面链接的 jsFiddle 并交替注释掉每一行，你就会明白我的意思了。

如果您在 jsFiddle 中的代码中发现有问题，请告诉我，否则，我该如何解决这个问题才能确定切换状态，以便我可以根据每个状态做一些事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:17:30.493

只需在切换结束时使用回调，否则测试将在动画结束之前完成

```
.toggle('blind', 'easeInOutQuart', 300, function(){
    if ($(this).is(':visible')) {
        alert('visible');
    } else {
        alert('not visible');
    }
}); 
```

[http://jsfiddle.net/wWaDm/7/](http://jsfiddle.net/wWaDm/7/)

# python - 如何获取要绘制的 matplotlib Axes 实例？

> ID：15067668
> 
> 赞同：98
> 
> 时间：2013-02-25T13:05:06.350
> 
> 标签：python, matplotlib, finance, axes

我需要使用一些股票数据制作烛台图（类似这样）。为此，我想使用函数[matplotlib.finance.candlestick()](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/finance.py)。对于这个函数，我需要提供引号和“*要绘制到的 Axes 实例*”。我创建了一些示例报价如下：

```
quotes = [(1, 5, 6, 7, 4), (2, 6, 9, 9, 6), (3, 9, 8, 10, 8), (4, 8, 8, 9, 8), (5, 8, 11, 13, 7)] 
```

不过，我现在还需要一个 Axes 实例，对此我有点迷茫。我在使用 matplotlib.pyplot 之前创建了绘图。我想我现在需要用[matplotlib.axes](http://matplotlib.org/api/axes_api.html)做一些事情，但我不确定到底是什么。

有人可以在这里帮我一点吗？欢迎所有提示！

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2013-02-25T13:14:46.330

使用[`gca`](https://matplotlib.org/api/_as_gen/matplotlib.pyplot.gca.html?highlight=gca#matplotlib.pyplot.gca)("get current axes") 辅助函数：

```
ax = plt.gca() 
```

例子：

```
import matplotlib.pyplot as plt
import matplotlib.finance
quotes = [(1, 5, 6, 7, 4), (2, 6, 9, 9, 6), (3, 9, 8, 10, 8), (4, 8, 8, 9, 8), (5, 8, 11, 13, 7)]
ax = plt.gca()
h = matplotlib.finance.candlestick(ax, quotes)
plt.show() 
```

![在此处输入图像描述](../Images/a3fe53d7038b6eaa13675f6859345419.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-25T13:25:06.697

你可以

```
fig, ax = plt.subplots()  #create figure and axes
candlestick(ax, quotes, ...) 
```

或者

```
candlestick(plt.gca(), quotes) #get the axis when calling the function 
```

第一个给你更多的灵活性。如果烛台是您想要绘制的唯一内容，则第二个更容易

# mysql - 从多个表中选择结果在另一个表上出现的数量少于 X 数量

> ID：15067673
> 
> 赞同：0
> 
> 时间：2013-02-25T13:05:25.027
> 
> 标签：mysql

我不确定提出这个问题的最佳方式，所以提前感谢您处理我的困惑。

这是我提出的查询：

```
SELECT a.id FROM assets a, courseAssets ca, courses c, assetTags at WHERE c.courseUser = {$userId} AND c.id = ca.courseID and ca.assetID = a.id AND count(at.assetID = a.id) <5 
```

这一直有效到第三个“and”。在那之后，我试图获取结果并在assetTags中找到它们，并且只返回出现少于5次的ID。

希望这是有道理的，我可以在脑海中看到它，只是不确定如何到达那里。我确定有一个 UNION，Join 什么的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:07:54.540

您不能将聚合函数`count`与“普通”列选择混合使用。
为避免这种情况，请使用 a`group by`并将聚合条件放在`having`子句中。

```
SELECT a.id 
FROM assets a
inner join courseAssets ca on ca.assetID = a.id
inner join courses c on c.id = ca.courseID
inner join assetTags at on at.assetID = a.id
group by a.id
having count(distinct at.assetID) < 5 
```

顺便说一句，习惯连接语法是最佳实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:03:59.157

如果要正确进行计数或求和，则需要 GROUP BY 子句。

这可能接近您所追求的：

```
SELECT id
FROM (
SELECT a.id, count(ast.assetID) AS counter
FROM assets a, courseAssets ca, courses c, assetTags ast 
WHERE c.courseUser = {$userId} 
    AND c.id = ca.courseID 
    AND ca.assetID = a.id 
    AND ast.assetID = a.id
GROUP BY a.id
) temp
WHERE temp.counter < 5 
```

原谅任何错误。我还将assetTags别名“at”更改为“ast”只是为了避免保留字......

# ruby - 自动单位转换？

> ID：15067677
> 
> 赞同：1
> 
> 时间：2013-02-25T13:05:55.337
> 
> 标签：ruby, unit-conversion

是否有可用的软件包进行自动单位转换？搜索用于显示目的的最佳单位的东西。

例如，当我有数字 0.000001m 时，它输出 1 µm？
或 0.000000001m 至 1 nm

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:09:57.300

我不确定，但也许这会有所帮助

[http://ruby-units.rubyforge.org/ruby-units/](http://ruby-units.rubyforge.org/ruby-units/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:42:40.610

让我们看看使用简单的递归方法可以实现什么。

```
class Numeric
  def choose_best_scale(prefix = nil)
    if abs >= 1e2
      (self / 1e3).choose_best_scale next_prefix(prefix)
    elsif abs <= 1e-2
      (self * 1e3).choose_best_scale prev_prefix(prefix)
    else
      [self, prefix]
    end
  end

  private

  SIPrefixes = [:n, :μ, :m, :k, :M, :G]

  def prev_prefix(prefix)
    return :m if prefix.nil?
    SIPrefixes[SIPrefixes.index(prefix) - 1]
  end

  def next_prefix(prefix)
    return :k if prefix.nil?
    SIPrefixes[SIPrefixes.index(prefix) + 1]
  end
end 
```

以下是它在实践中的工作方式。

```
pry(main)> (-6..6).map { |x| (10.0 ** x).choose_best_scale }
=> [[1.0, :μ],
    [10.0, :μ],
    [0.1, :m],
    [1.0, :m],
    [10.0, :m],
    [0.1, nil],
    [1.0, nil],
    [10.0, nil],
    [0.1, :k],
    [1.0, :k],
    [10.0, :k],
    [0.1, :M],
    [1.0, :M]] 
```

# javascript - jquery中未捕获的类型错误

> ID：15067685
> 
> 赞同：1
> 
> 时间：2013-02-25T13:06:11.827
> 
> 标签：javascript, jquery, ajax

我正在尝试将 Metro panel jquery 和 isotope jquery 与此功能合并，然后我在 jquery 中收到此未捕获的类型错误。

当我第一次加载页面时它的工作但之后它不工作并给出这个错误。

```
<script type="text/javascript">  
$(window).load(function() {  

$('#metropanel').metropanel({ 
```

**`Uncaught TypeError: Object [object Object] has no method`**

```
'metropanel'  
 mpPosition:'left',  
  mpMainItemBg: '#353535',  
  mpSubmenuBg: '#353535',  
  mpActiveItem:'transparent-smoke',  
  mpHoverItem:'transparent-blue',  
  contentPosition:'related',  
  contentEffect:'slideLeft',  
  contentEffectDuration:400,  
  MainListScrollBarStyle: 'solid-olive',  
  SubmenuScrollBarStyle: 'solid-blue',  
  mpState:1,  
  MainItemDisplay:8  
 });  

$(document).ready(function() {  
        $("body").append("<div id='divSmallBoxes'></div>");  
        $("body").append("<div id='divMiniIcons'></div><div id='divbigBoxes'></div>");  
        $(".OpenSideBar").pageslide({ direction: "left" });
 });  
}); 
```

如何解决？

# php - 如何从php中的另一个字符串中删除一个字符串

> ID：15067687
> 
> 赞同：-2
> 
> 时间：2013-02-25T13:06:19.207
> 
> 标签：php, sql

我有一个包含 sql 语句的字符串，如下所示：

```
$sql = "SELECT nic_number, client_title, client_lastname FROM customer ORDER BY id_client LIMIT 0, 1"; 
```

我想从中删除`LIMIT 0, 1`，以便它变成

```
SELECT nic_number, client_title, client_lastname FROM customer ORDER BY id_client 
```

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:07:26.913

使用[str_replace](http://php.net/manual/en/function.str-replace.php)：

```
echo str_replace("LIMIT 0, 1", "", $sql); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:10:07.793

```
$sql = 'SELECT nic_number, client_title, client_lastname FROM customer ORDER BY id_client LIMIT 0, 1';
echo $sql = preg_replace('/LIMIT \d+, \d+/', '', $sql); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:07:31.057

假设内容始终相同：

```
$sql = str_replace('LIMIT 0, 1', '', $sql); 
```

# javascript - 创建一个在 视图中的元素并创建一个新的 元素

> ID：15067688
> 
> 赞同：0
> 
> 时间：2013-02-25T13:06:21.303
> 
> 标签：javascript, jquery, html

我正在尝试使用基于网络的记事本进行实验。我有一个 textarea 元素，它在打印 HTML 页面时写入隐藏的 div。我遇到的问题是允许 textarea 元素溢出。我的宏伟愿景是限制 textarea，一旦 textarea 被填充，让填充的 div 从视图中消失，将其内容写入用于打印的隐藏 div，以及一个带有新 textarea 显示的新 div。

最好，我希望用户可以选择单击按钮来执行此操作，以及在 textarea 已满时自动执行该操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:15:02.487

您无法使用宽度和高度检查文本区域是否溢出。您可以通过设置 maxlength 来做到这一点。同样，并非所有浏览器都支持此属性。您可能会发现此链接很有帮助 [How to force maxlength on textArea in HTML using JavaScript](https://stackoverflow.com/questions/1125482/how-to-impose-maxlength-on-textarea-in-html-using-javascript)

# windows-phone-7 - windows phone 8 应用测试

> ID：15067689
> 
> 赞同：1
> 
> 时间：2013-02-25T13:06:20.987
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, windows-phone

我是 windows phone 7 的开发人员。现在我正在转向 windows phone 8。但是当我安装 windows phone 8 sdk 时。我知道 wp8 模拟器需要特殊的硬件功能。不幸的是我的电脑有点过时了，这意味着我不支持这个模拟器。而且我也无法购买新的 windows phone 8。所以我一直在寻找是否有可用的在线应用程序运行工具，以便我可以测试我的应用程序，或者有什么方法可以在我的笔记本电脑上运行模拟器。请在这件事上帮助我。谢谢我的笔记本电脑 compaq presario cq61。英特尔 core2duo 2.1 Ghz，3GB 内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:00:25.157

以下是运行 Windows Phone 8 模拟器的要求列表。看起来您的笔记本电脑规格不符合确切标准，但只要您的 BIOS 支持虚拟化、SLAT 和 DEP（在文章中提到），您就可以运行它（尽管您可能会看到性能不佳） .

至于一个在线测试设施，它可能会在不同的服务器上运行模拟器，我不知道存在这样的任何东西。

另请注意，即使没有模拟器，您仍然应该能够安装 SDK，并且只要您运行 Visual Studio 2012，您就可以将您的应用程序部署到您的 WP8 设备进行测试（假设您是最终能够购买 WP8 设备）。

希望这可以帮助。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626524(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626524(v=vs.105).aspx)

# osgi - OSGI 集成测试，Pax Exam 探针在容器包启动之前执行测试

> ID：15067691
> 
> 赞同：2
> 
> 时间：2013-02-25T13:06:35.167
> 
> 标签：osgi, integration-testing, apache-karaf, pax-exam

我目前正在尝试使用 PAX-EXAM+KARAF 编写 OSGI 集成测试，但遇到了一个问题，即 pax 考试试图在依赖包在容器中实际启动/初始化之前执行测试方法。奇怪的是，有时测试会成功，在这种情况下，所有的包/上下文都会启动并记录下来，但大多数时候它不会。方法的延迟无济于事:(任何人都可以帮助解决这个问题吗？

我正在使用 PAX-EXAM 2.6.0、org.apache.karaf.tooling.exam.container 2.3.0、apache-karaf 2.3.0。

代码：

```
@Inject
BundleContext bundleContext;

@Inject
    EntityManagerFactoryService entityManagerFactoryService;//Service exposed trough OSGI

    protected EntityManager entityManager;

    @Before
    public void init() throws InterruptedException {
        entityManager = entityManagerFactoryService.getEntityManagerFactory().createEntityManager();
    }

@Configuration
    public static Option[] configuration() throws Exception {

    return new Option[] {
            karafDistributionConfiguration().frameworkUrl(maven().groupId("org.apache.karaf").artifactId("apache-karaf").type("zip").versionAsInProject())
                    .karafVersion("2.3.0").name("Apache Karaf"),                
mavenBundle("com.google.guava", "guava", "13.0.1").startLevel(30),
mavenBundle("com.mysql.jdbc", "com.springsource.com.mysql.jdbc", "5.1.6").startLevel(30),
                mavenBundle("javax.persistence", "com.springsource.javax.persistence", "2.0.0").startLevel(30),
                mavenBundle("org.apache.commons", "com.springsource.org.apache.commons.lang", "2.6.0").startLevel(30),

...the rest of bundles  

junitBundles(), }; 
```

测试方法：

```
@Test
    public void contextNotNull() {
        Assert.assertNotNull(entityManagerFactoryService);
    } 
```

日志：

```
java.lang.ClassNotFoundException: com.startjg.crp.core.dao.service.EntityManagerFactoryService not found by PAXEXAM-PROBE-749fa717-8bdc-4d9a-9803-bdaf6d4edac0 [144]
    at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1460)
    at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:72)
    at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1843)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

完整日志： [https ://www.dropbox.com/s/v12r15sbmtu9svp/log.txt](https://www.dropbox.com/s/v12r15sbmtu9svp/log.txt)

也尝试过没有运气：

```
protected <T> Object getService(Class<T> serviceClass) {
    int maxCount = 5;
    int delay = 5000;
    for (int i = 0; i <= maxCount; i++) {
        if (bundleContext.getServiceReference(serviceClass) != null) {
            ServiceReference<T> serviceReference = bundleContext.getServiceReference(serviceClass);
            return bundleContext.getService(serviceReference);
        } else {
            try {
                Thread.sleep(delay);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
    return null;
}

@Before
public void init() throws InterruptedException {
    EntityManagerFactoryService emfs = (EntityManagerFactoryService) getService(EntityManagerFactoryService.class);
    entityManager = entityManagerFactoryService.getEntityManagerFactory().createEntityManager();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:43:57.987

您确定您的 EntityManager 正在工作并且可以作为服务使用吗？您很可能缺少一些依赖项，这就是包含该服务的捆绑包未完全启动的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T15:09:54.787

当前的 pax 考试 3.3.0 现在完全支持 karaf 作为容器。以前的 karaf 考试代码现在完全移至 pax 考试。

# twitter-bootstrap - 导航栏中的样式导航药丸

> ID：15067694
> 
> 赞同：5
> 
> 时间：2013-02-25T13:06:41.013
> 
> 标签：twitter-bootstrap

我不确定是否正确，但在导航栏中使用引导导航药丸不起作用，因为导航在 bootstrap.css 中具有优先权。如果正确，那么我们是否不应该在导航栏中使用这些导航样式？

4094行`.nav-pills > .active > a, .nav-pills > .active > a:hover, .nav-pills > .active > a:focus { color: #ffffff; background-color: #0088cc; }`

第 4623 行

```
 .navbar .nav > .active > a,
    .navbar .nav > .active > a:hover,
    .navbar .nav > .active > a:focus {
      color: #555555;
      text-decoration: none;
      background-color: #e5e5e5;
      -webkit-box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.125);
         -moz-box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.125);
              box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.125);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T13:11:42.593

您可以通过以下方式使用它：
Jsfiddle [with navbar and navpills](http://jsfiddle.net/shail/DJtsa/)

```
 .navbar .nav-pills >li >a {
    color: #005580;
 }
   .navbar .nav-pills > li > a:hover {
      background-color: #0088cc;
 }
 .navbar .nav-pills .active > a {
    background-color:#ccc;
    color:#0088cc;
}

<div class="navbar">
<div class="navbar-inner">
<a data-toggle="collapse" data-target=".nav-collapse" class="btn btn-navbar">
  <i class="icon-bar"></i>
  </a>

    <a class="brand" href="">New Icon Menu</a>

    <div class="nav-collapse">
        <ul class="nav nav-pills pull-right">
            <li><a href=""><i class="icon-home icon-2x"></i> Home<br></a>
            </li>
            <li><a href=""><i class=" icon-pencil icon-2x"></i>About Us</a>
            </li>
            <li><a href=""><i class=" icon-briefcase icon-2x"></i>Portfolio</a>
            </li>
            <li><a href=""><i class=" icon-envelope icon-2x"></i>Contact Us</a>
            </li>
        </ul>
         </div>
       </div>
     </div> 
```

# apache - Apache访问日志：多个状态码

> ID：15067695
> 
> 赞同：1
> 
> 时间：2013-02-25T13:06:43.573
> 
> 标签：apache, http

在 Apache access.log 中，我习惯了这种访问日志行：

```
127.0.0.1 - frank [10/Oct/2000:13:55:36 -0700] "GET /apache_pb.gif HTTP/1.0" 200 2326 
```

我今天早上检查了一些 apache 访问日志，发现了一些我不习惯的东西：

```
192.168.1.10- - [20/Feb/2013:00:00:45 +0000] "POST /form/... 404 200 252 "-" "-" 435835 
```

有多个状态码。这是否意味着请求被多次发送（类似于失败/重试机制？

# c# - Excel 如何识别日期单元格以及如何使用 OpenXml 和 C#

> ID：15067707
> 
> 赞同：2
> 
> 时间：2013-02-25T13:07:18.577
> 
> 标签：c#, excel, openxml

我花了几个小时，但仍然没有令人满意的答案。

当我单击 excel 文档中的单元格时，它被标记为日期字段。但是，如果我使用 OpenXml 调查 DateType - 我将收到 DataType 为 NULL 的 Cell 对象。我注意到，在这种情况下，Cell.StyleIndex 设置为“116”，但我想保证，我将始终以与 Excel 相同的方式识别日期单元格。如何获取指示日期字段的数据样式索引的完整列表？

```
 public bool IsDateCell(Cell cell)
    {
        switch (cell.StyleIndex.Value)
        {
            case 116: return true;
            case 98: return true;
            case 283: return true;
            case 282: return true;
            default: return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:35:30.133

我认为问题在于 OPENXML 如何决定单元格的类型。至少我知道 OLEDEB 中存在类似的问题。通常它是通过从列中读取前几个值来实现的。

您可以做的是在将值输入到 excel 之前将格式定义为日期，或者使用 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Jet\4.0\Engines\Excel\ -->TypeGuessRows。看：

[OleDB 和混合 Excel 数据类型：缺少数据](https://stackoverflow.com/questions/3232281/oledb-mixed-excel-datatypes-missing-data/5721521#5721521)

[通过 OleDB 读取 Excel 文件时，非空单元格中的 DBNull](https://stackoverflow.com/questions/3206915/dbnull-in-non-empty-cell-when-reading-excel-file-through-oledb)

# javascript - 如何在 ExtJS 网格和 Jquery 图表之间建立关联

> ID：15067709
> 
> 赞同：0
> 
> 时间：2013-02-25T13:07:22.640
> 
> 标签：javascript, jquery, extjs4, extjs4.1

我有一个 ExtJS 网格和一个 Jquery Gauge 图表。我想在图表和网格之间进行交互。如果我们选择网格中的一行，则相应的更改将反映在图表中。这是网格的代码....

```
Ext.define('Gamma.view.EdgesGridChart' ,{
extend: 'Ext.grid.Panel',
alias : 'widget.edgesGridChart',
id: 'edgesGridChart',

height: 300,
width: Ext.getBody().getViewSize().width*0.4,
animate: true,
shadow: true,
title : 'Call Information',
store : 'Edges',
loadMask: true,
autoheight: true,
theme: 'Base',
dockedItems: [{
    xtype: 'pagingtoolbar',
    store: 'Edges',  
    dock: 'bottom',
    displayInfo: true,
    items: [
            { 
                xtype: 'tbseparator'
            }
    ]
}],
plugins: [
          Ext.create('Ext.grid.plugin.CellEditing', {
              clicksToEdit: 1
         })        
],
selModel: {
    selType: 'cellmodel'
},
initComponent: function() {
    this.columns = [{
        header: 'SOURCE', 
        dataIndex: 'source',
        flex: 1
    },{
        header: 'TARGET', 
        dataIndex: 'target',
        flex: 1
    }, {
        header: 'DIR',
        dataIndex: 'dir',
        flex: 1
    }, {
        header: 'PEG', 
        dataIndex: 'peg', 
        flex: 1
    }, {
        header: 'WEIGHT',
        dataIndex: 'weight',
        flex: 1
    }];
this.callParent(arguments);

} 
```

});

这是仪表图的代码....

```
 $(document).ready(function(){
        var gradient1 = {
            type: 'linearGradient',
            x0: 0,
            y0: 0.5,
            x1: 1,
            y1: 0.5,
            colorStops: [{ offset: 0, color: '#C5F80B' },
                         { offset: 1, color: '#6B8901'}]
        };

        var gradient2 = {
            type: 'linearGradient',
            x0: 0.5,
            y0: 0,
            x1: 0.5,
            y1: 1,
            colorStops: [{ offset: 0, color: '#FF3366' },
                         { offset: 1, color: '#B2183E'}]
        };

        var anchorGradient = {
            type: 'radialGradient',
            x0: 0.35,
            y0: 0.35,
            r0: 0.0,
            x1: 0.35,
            y1: 0.35,
            r1: 1,
            colorStops: [{ offset: 0, color: '#4F6169' },
                         { offset: 1, color: '#252E32'}]
        };

        $('#jqRadialGauge').jqRadialGauge({
            background: '#F7F7F7',
            border: {
                lineWidth: 6,
                strokeStyle: '#76786A',
                padding: 16
            },
            shadows: {
                enabled: true
            },
            anchor: {
                visible: true,
                fillStyle: anchorGradient,
                radius: 0.05
            },
            tooltips: {
                disabled: false,
                highlighting: true
            },
            annotations: [
                            {
                                text: 'Wing Span',
                                font: '18px sans-serif',
                                horizontalOffset: 0.5,
                                verticalOffset: 0.8
                            }
                         ],
            scales: [
                     {
                         minimum: 0,
                         maximum: 150,
                         startAngle: 140,
                         endAngle: 400,
                         majorTickMarks: {
                             length: 12,
                             lineWidth: 2,
                             interval: 10,
                             offset: 0.84
                         },
                         minorTickMarks: {
                             visible: true,
                             length: 8,
                             lineWidth: 2,
                             interval: 2,
                             offset: 0.84
                         },
                         labels: {
                             orientation: 'horizontal',
                             interval: 10,
                             offset: 1.00
                         },
                         needles: [
                                    {
                                        value: 56,
                                        type: 'pointer',
                                        outerOffset: 0.8,
                                        mediumOffset: 0.7,
                                        width: 10,
                                        fillStyle: '#252E32'
                                    }
                                  ],
                         ranges: [
                                    {
                                        outerOffset: 0.82,
                                        innerStartOffset: 0.76,
                                        innerEndOffset: 0.68,
                                        startValue: 0,
                                        endValue: 100,
                                        fillStyle: gradient1
                                    },
                                    {
                                        outerOffset: 0.82,
                                        innerStartOffset: 0.68,
                                        innerEndOffset: 0.60,
                                        startValue: 110,
                                        endValue: 150,
                                        fillStyle: gradient2
                                    }
                                 ]
                     }
                    ]
        });

        $('#jqRadialGauge').bind('tooltipFormat', function (e, data) {

            var tooltip = '<b>Element: ' + data.elementType + '</b> ' + '</br>';

            switch (data.elementType) {

                case 'needle':
                    tooltip += 'Value: ' + data.value;
                    break;
                case 'range':
                    tooltip += 'Start Value: ' + data.startValue + '<br/>End Value: ' + data.endValue;
            }

            return tooltip;
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:50:01.117

可以使用以下代码更新 jqRadialGauge 插件：

```
 var scales = $('#jqRadialGauge').jqRadialGauge('option', 'scales');
            scales[0].needles[0].value = Math.random() * 100;

            $('#jqRadialGauge').jqRadialGauge('update'); 
```

如果您想在单击 ExtJS 网格行时更新 jqRadialGauge 的指针，您可以尝试使用以下代码：

```
 $('#edgesGridChart').on('rowclick', function(grid, rowIndex, columnIndex, e) {
            var scales = $('#jqRadialGauge').jqRadialGauge('option', 'scales');
            scales[0].needles[0].value = rowIndex;

            $('#jqRadialGauge').jqRadialGauge('update');
        }, this); 
```

第二个片段中的代码显示了如何将 jqRadialGauge 第一针设置为单击行的行索引。

最好的问候，
马克西姆·米利夫

免责声明：我为 jqChart 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:48:34.390

完成捕获点击事件后，请尝试使用此方法。

```
 selectionchange : function(){
    var grid = Ext.getCmp('edgesGridChart');
    var selectedRecords= grid.getView().getSelectionModel().getSelection();
    myData = selectedRecords[0].get('columnName');

    var jquery= $('#jqRadialGauge').jqRadialGauge('option', 'scales');
    jquery[0].needles[0].value = myData ;
    $('#jqRadialGauge').jqRadialGauge('update');

}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:07:41.487

这是对如何实现的高级解释……实际实现会有所不同。

在网格的行单击上，设置值并更新jquery模型的数据，之后您需要找到一种方法在数据模型更新时刷新图表。

所有这些都可以使用从 extjs 行编辑/单击事件触发的 jquery 自定义事件来完成。

# python - 在python中计算两次之间的差异

> ID：15067710
> 
> 赞同：8
> 
> 时间：2013-02-25T13:07:24.043
> 
> 标签：python, time

我正在使用python，并想计算两次之间的差异。

实际上我有一个场景来计算登录和注销时间之间的差异，例如在组织中，工作时间有一些特定的限制，所以如果用户`9:00 AM`在早上登录，如果他在晚上注销`6:00 PM`，我们需要计算他在办公室呆了多长时间（`9 hours`在目前的情况下），但我想在 python 中执行此操作，所以谁能告诉我如何实现上述计算登录和注销时间差异的概念？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-25T13:11:06.467

```
>>> start = datetime.datetime(year=2012, month=2, day=25, hour=9)
>>> end = datetime.datetime(year=2012, month=2, day=25, hour=18)
>>> diff = end - start
>>> diff
datetime.timedelta(0, 32400)
>>> diff.total_seconds()
32400
>>> diff.total_seconds() / 60 / 60
9
>>> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T13:51:29.137

使用[divmod](http://docs.python.org/2/library/functions.html#divmod)完成此任务

```
>>> start = datetime.datetime.utcnow()
>>> end = datetime.datetime.utcnow()
>>> divmod(end - start, 60)
(0, 2.454) # (minutes, seconds) 
```

divmod 会给

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T13:12:05.557

您首先使用了错误的类来表示时间。

```
> import datetime
> print datetime.datetime.now() - datetime.datetime(2013, 1, 1)
55 days, 14:11:06.749378 
```

*返回*的对象是一个`timedelta`. 但是差异当然是在`datetime`对象之间计算的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T13:57:07.287

在我看来@Fabian 的回答可能是最好的。但我们是否让这变得比必须的更困难？

需要按日、月、年计算吗？

如果您正在生成它，那么仅使用 timesec 表示会不会更容易？

当用户登录时：

```
user_login_time = time.time() 
```

当用户重访时：

```
time_difference = time.time() - user_login_time 
```

然后查看time_difference是否在XXXX秒以上？现在我**假设**您只是要检查用户是否没有登录 XX 分钟或 xx 小时？

否则，我会强调@Fabian 的答案将是最好的，如果您正在查看解析时间日期字符串，或者需要对数据执行其他时间/日期函数。

我还要强调，如果你使用这种方法，为时间制作常量，或者确保对它们进行评论，以使其更具可读性。

但是，如果您只是想了解用户是否在过去 30 分钟内一直在线，这可能会更容易。

# kendo-grid - 在 Kendo Grid (Javascript) 中创建动态列

> ID：15067714
> 
> 赞同：3
> 
> 时间：2013-02-25T13:07:33.670
> 
> 标签：kendo-grid

我想创建一个带有动态列的剑道网格，所有列都将在客户端创建。

举个例子：

我编写了以下代码来创建网格：

```
var grid = $("#grid");
        grid.children().remove();
        grid.kendoGrid({
            columns: [{ title: 'One', width: '100px' }, { title: 'Two', width: '100px' }, {title: 'Three', width:'100px'}],
            dataSource: {
                transport: {
                    read: {
                        url: "@Url.Action("")",
                        type: "GET",
                        dataType: "json",
                        traditional: true,
                        data: {
                            itemTypeId: $("#").val(),
                            where: ["", "", "", "", ""],
                            orderBy: ["", "", ""],
                        },
                    },
                },
                schema: {
                    data: "",
                    total: "",
                },
                serverPaging: true,
                pageSize: 4,
                error: function (e) {
                    alert(e.errors);
                }
            },
            pageable: true,
            resizable: true,
            reorderable: true,
        })
    } 
```

当我通过以下方式定义列时：

```
columns: [{ title: 'One', width: '100px' }, { title: 'Two', width: '100px' }, {title: 'Three', width:'100px'}], 
```

上面的代码工作正常。

但我想在一个不起作用的循环中创建所有这些列。

就像：我将架构保存在 javascript 变量中，然后将其分配给剑道网格。

```
Var columnSchema = "{ title: 'One', width: '100px' },{ title: 'Two', width: '100px' },{ title: 'Two', width: '100px' }";

columns : [columnSchema] 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:58:41.870

对您的代码稍作更改，它应该可以工作：

```
var columnSchema = [{ title: 'One', width: '100px' },{ title: 'Two', width: '100px' },{ title: 'Three', width: '100px' }];

grid.kendoGrid({
    // .. other properties ..
    columns : columnSchema
}); 
```

您需要将 columnSchema 变量定义为数组而不是字符串（如我的示例所示），它会起作用。

您还可以构建数组，例如

```
var columnSchema = [];
columnSchema.push({ title: 'One', width: '100px' });
columnSchema.push({ title: 'Two', width: '100px' });
columnSchema.push({ title: 'Three', width: '100px' }); 
```

如果需要，您可以`push(..)`在从其他地方读取列信息的循环内使用。

只要在使用变量初始化网格之前完成此操作。创建网格后，您将无法更改列。

如果您需要在创建网格后更改列，您需要先调用该`destroy()`方法，然后`kendoGrid(..)`再使用新的列规范。

# html - 控制缓存过期

> ID：15067719
> 
> 赞同：6
> 
> 时间：2013-02-25T13:07:55.243
> 
> 标签：html, css, .htaccess, caching, html5boilerplate

通过 Google Webmaster Tools 的 PageSpeed 分析器运行我的网页后，它向我报告说我的资源都没有被缓存。下面是直接取自 H5BP 的 .htaccess 文件中的代码。我是否正确假设以下过期设置正确并且我的实现中有问题，或者我是否必须为每个文件名设置明确的过期而不是广泛的概括？

```
# ----------------------------------------------------------------------
# Expires headers (for better cache control)
# ----------------------------------------------------------------------

# These are pretty far-future expires headers.
# They assume you control versioning with filename-based cache busting
# Additionally, consider that outdated proxies may miscache
#   www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/

# If you don't use filenames to version, lower the CSS and JS to something like
# "access plus 1 week".

<IfModule mod_expires.c>
  ExpiresActive on

# Perhaps better to whitelist expires rules? Perhaps.
  ExpiresDefault                          "access plus 1 month"

# cache.appcache needs re-requests in FF 3.6 (thanks Remy ~Introducing HTML5)
  ExpiresByType text/cache-manifest       "access plus 0 seconds"

# Your document html
  ExpiresByType text/html                 "access plus 0 seconds"

# Data
  ExpiresByType application/json          "access plus 0 seconds"
  ExpiresByType application/xml           "access plus 0 seconds"
  ExpiresByType text/xml                  "access plus 0 seconds"

# Feed
  ExpiresByType application/atom+xml      "access plus 1 hour"
  ExpiresByType application/rss+xml       "access plus 1 hour"

# Favicon (cannot be renamed)
  ExpiresByType image/x-icon              "access plus 1 week"

# Media: images, video, audio
  ExpiresByType audio/ogg                 "access plus 1 month"
  ExpiresByType image/gif                 "access plus 1 month"
  ExpiresByType image/jpeg                "access plus 1 month"
  ExpiresByType image/png                 "access plus 1 month"
  ExpiresByType video/mp4                 "access plus 1 month"
  ExpiresByType video/ogg                 "access plus 1 month"
  ExpiresByType video/webm                "access plus 1 month"

# HTC files  (css3pie)
  ExpiresByType text/x-component          "access plus 1 month"

# Webfonts
  ExpiresByType application/vnd.ms-fontobject "access plus 1 month"
  ExpiresByType application/x-font-ttf    "access plus 1 month"
  ExpiresByType application/x-font-woff   "access plus 1 month"
  ExpiresByType font/opentype             "access plus 1 month"
  ExpiresByType image/svg+xml             "access plus 1 month"

# CSS and JavaScript
  ExpiresByType application/javascript    "access plus 1 year"
  ExpiresByType text/css                  "access plus 1 year"

</IfModule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:56:43.350

这看起来不错。

要么您没有安装**mod_expires**模块（百万分之一没有），要么其他一些指令正在其他`.htaccess`地方`httpd.conf`禁用这些模块。请使用页面速度工具获取文件发送的实际标题，然后粘贴。

# jquery - ASP.NET MVC 和 Jquery DatePicker

> ID：15067722
> 
> 赞同：2
> 
> 时间：2013-02-25T13:08:05.183
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui, datepicker

我想使用带有以下日期字段的 jQuery UI 日期选择器

```
 <div class="editor-field">
            @Html.EditorFor(model => model.CalibrationDate)
            @Html.ValidationMessageFor(model => model.CalibrationDate)
  </div> 
```

我已经在我的视图中包含了所需的脚本和以下函数

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/jquery-ui-1.8.20.js")" type="text/javascript"></script>

<script>
    $(document).ready(function () {
        $('.date').datepicker({ dateFormat: "dd/mm/yy" }
    }); 
```

看来我需要将日期类分配给我的

```
 @Html.EditorFor(model => model.CalibrationDate) 
```

你能建议我怎么做吗？或任何其他方法来获得此功能？

* * *

根据评论，这是最终的工作代码：

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function () {
$(".date").datepicker();
});
</script> 
```

并且在体内

```
<div class="editor-label">
            @Html.LabelFor(model => model.CalibrationDate)
        </div>
        <div class="editor-field">

           @Html.TextBoxFor(m => m.CalibrationDate,  new{ Class = "datepicker" })
            @Html.ValidationMessageFor(model => model.CalibrationDate)
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:11:53.093

您可以传递`EditorFor`带有类成员作为`additionalViewData`参数的匿名对象。

```
@Html.EditorFor(model => model.CalibrationDate, new { @class = "date" }) 
```

注意：在关键字前面使用`@`符号允许我们将其用作标识符。

# asp.net - ASP.NET 变量未获得赋值

> ID：15067724
> 
> 赞同：-2
> 
> 时间：2013-02-25T13:08:08.007
> 
> 标签：asp.net

我对这个 asp.net 代码有问题。变量 qty 和 itname 没有得到有效值……谁能找出问题所在？

```
Imports System.Data
Imports System.Data.SqlClient
Partial Class consolidate
    Inherits System.Web.UI.Page

    Public lastreq_no As Int32

    Protected Sub btnconsolidate_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnconsolidate.Click
        Dim qtypen As Integer
        Dim qtypencil As Integer
        Dim qtygbag As Integer
        Dim qtysugar As Integer
        Dim i As Integer
        Dim req As Integer
        Dim qty As Integer
        Dim itname As String = ""
        Dim sqlcon As New SqlConnection("Data Source=user-hp\sqlexpress;initial catalog=campco;integrated security=true;")
        If sqlcon.State = ConnectionState.Open Then
            sqlcon.Close()
        End If

        sqlcon.Open()
        Dim str As String
        str = "Select Req_no from Requirements "
        Dim cmd As New SqlCommand(str, sqlcon)
        Dim sdr As SqlDataReader
        sdr = cmd.ExecuteReader()
        sdr.Read()
        lastreq_no = sdr.GetInt32(sdr.VisibleFieldCount - 1)
        For i = 0 To sdr.VisibleFieldCount - 1
            req = sdr.GetInt32(i)
            While req > lastreq_no
                Dim selcomnd1 As String
                Dim selcomnd2 As String
                selcomnd1 = "Select @itname=It_name from Requirements where Req_no= @req"
                selcomnd2 = "Select @qty= Quantity from Requirements where Req_no= @req"
                Dim sqlcomnd1 As New SqlCommand(selcomnd1, sqlcon)
                Dim sqlcomnd2 As New SqlCommand(selcomnd2, sqlcon)
                sqlcomnd1.Parameters.AddWithValue("@itname", itname)
                sqlcomnd2.Parameters.AddWithValue("@qty", qty)
                sqlcomnd1.ExecuteScalar()
                sqlcomnd2.ExecuteScalar()
                TextBox1.Text = itname
                TextBox2.Text = qty
                sqlcon.Close()
                sqlcon.Open()
                Select Case (itname)
                    Case "Pen"
                        qtypen += qty
                        lastreq_no = req
                    Case "Pencil"
                        qtypencil += qty
                        lastreq_no = req
                    Case "Gunny bag"
                        qtygbag += qty
                        lastreq_no = req
                    Case "Sugar"
                        qtysugar += qty
                        lastreq_no = req
                End Select
            End While
        Next

        sqlcon.Close()
        If sqlcon.State = ConnectionState.Open Then
            sqlcon.Close()
        End If
        sqlcon.Open()
        Dim comm As String
        comm = "Insert into Consolidate (lastr_no,qtypen,qtypencil,qtygunnybag,qtysugar)values('" + lastreq_no.ToString + "','" + qtypen.ToString + "','" + qtypencil.ToString + "','" + qtygbag.ToString + "','" + qtysugar.ToString + "')"
        Dim sqlcomm As New SqlCommand(comm, sqlcon)
        Dim s As String
        s = sqlcomm.ExecuteNonQuery()
        sqlcon.Close()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:14:27.287

首先，标量语句均无效。您是否尝试在 SQL Management Studio 或类似程序中运行这些语句来测试这些语句本身？它们应该是这样的：

```
selcomnd1 = "Select It_name from Requirements where Req_no=@req"
selcomnd2 = "Select Quantity from Requirements where Req_no=@req" 
```

然后你会以这种方式分配它们：

```
itname = CType(sqlcmnd1.ExecuteScalar(), String)  ' .ToString() would probably work here as well
qty = Convert.Int32(sqlcmnd2.ExecuteScalar()) 
```

或者您可以使用`.TryParse`数量：

```
Integer.TryParse(sqlcmnd2.ExecuteScalar(), qty) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:14:04.650

线

```
sqlcomnd1.Parameters.AddWithValue("@itname", itname) 
```

提供一个值为 的*输入*参数`itname`。尚未为该变量分配任何值。

您需要添加一个*输出*参数：请参阅此处了解如何执行此操作。

[在 ADO.NET 中获取输出参数值](https://stackoverflow.com/questions/290652/get-output-parameter-value-in-ado-net)

# c# - MailMessage Bcc AddRange 的扩展方法

> ID：15067733
> 
> 赞同：2
> 
> 时间：2013-02-25T13:08:28.113
> 
> 标签：c#, extension-methods, system.net.mail

向 a 添加多个收件人时，`MailMessage.BCC`没有`AddRange()`. 仅有的`MailMessage.Bcc.Add();`

可以通过扩展方法更改此功能吗？在这一点上我有点迷茫，任何指针都会非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T13:15:58.647

`MailMessage.Bcc`是类型`MailAddressCollection`。这`MailAddressCollection`实现了`ICollection<MailAddress>`. 所以你可以做的是编写一个通用的`AddRange`扩展方法，它适用于任何`ICollection<T>`.

这将如下所示：

```
public static class CollectionExtensions
{
    public static void AddRange<T>(this ICollection<T> target, IEnumerable<T> items)
    {
        foreach(var item in items)
        {
            target.Add(item);
        }   
    }
} 
```

然后，您可以像这样使用它：

```
var address1 = new MailAddress("abc@xyz.com");
var address2 = new MailAddress("wxy@hij.com");
message.Bcc.AddRange(new[] { address1, address2 }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T13:17:36.000

假设您正在谈论 System.Net.Mail.MailMessage 类，您需要的已经由 MailAddressCollection.Add 方法提供（Bcc 属于 MailAddressCollection 类型）。

只需使用逗号字符 (",") 分隔的多个电子邮件地址调用 Add 方法。

检查这个：

[http://msdn.microsoft.com/en-us/library/ms144695(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms144695(v=vs.100).aspx)

# python - 每次我在同一个语料库上训练时，LDA 模型都会生成不同的主题

> ID：15067734
> 
> 赞同：18
> 
> 时间：2013-02-25T13:08:28.630
> 
> 标签：python, nlp, lda, topic-modeling, gensim

我正在使用 python`gensim`从一个包含 231 个句子的小型语料库中训练一个潜在狄利克雷分配 (LDA) 模型。然而，每次我重复这个过程，它都会产生不同的主题。

**为什么相同的LDA参数和语料每次都会产生不同的主题？**

**以及如何稳定主题生成？**

我正在使用这个语料库（[http://pastebin.com/WptkKVF0](http://pastebin.com/WptkKVF0)）和这个停用词列表（[http://pastebin.com/LL7dqLcj](http://pastebin.com/LL7dqLcj)），这是我的代码：

```
from gensim import corpora, models, similarities
from gensim.models import hdpmodel, ldamodel
from itertools import izip
from collections import defaultdict
import codecs, os, glob, math

stopwords = [i.strip() for i in codecs.open('stopmild','r','utf8').readlines() if i[0] != "#" and i != ""]

def generateTopics(corpus, dictionary):
    # Build LDA model using the above corpus
    lda = ldamodel.LdaModel(corpus, id2word=dictionary, num_topics=50)
    corpus_lda = lda[corpus]

    # Group topics with similar words together.
    tops = set(lda.show_topics(50))
    top_clusters = []
    for l in tops:
        top = []
        for t in l.split(" + "):
            top.append((t.split("*")[0], t.split("*")[1]))
        top_clusters.append(top)

    # Generate word only topics
    top_wordonly = []
    for i in top_clusters:
        top_wordonly.append(":".join([j[1] for j in i]))

    return lda, corpus_lda, top_clusters, top_wordonly

####################################################################### 

# Read textfile, build dictionary and bag-of-words corpus
documents = []
for line in codecs.open("./europarl-mini2/map/coach.en-es.all","r","utf8"):
    lemma = line.split("\t")[3]
    documents.append(lemma)
texts = [[word for word in document.lower().split() if word not in stopwords]
             for document in documents]
dictionary = corpora.Dictionary(texts)
corpus = [dictionary.doc2bow(text) for text in texts]

lda, corpus_lda, topic_clusters, topic_wordonly = generateTopics(corpus, dictionary)

for i in topic_wordonly:
    print i 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-25T14:44:31.667

> 为什么相同的LDA参数和语料每次都会产生不同的主题？

因为 LDA 在训练和推理步骤中都使用随机性。

> 以及如何稳定主题生成？

`numpy.random`通过在每次训练模型或执行推理时将种子重置为相同的值，使用`numpy.random.seed`：

```
SOME_FIXED_SEED = 42

# before training/inference:
np.random.seed(SOME_FIXED_SEED) 
```

（这很难看，它使 Gensim 结果难以重现；考虑提交补丁。我已经打开了一个[问题](https://github.com/piskvorky/gensim/issues/113)。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-06-25T05:57:45.027

在 LdaModel() 方法的初始化中设置`random_state`参数。

```
lda_model = gensim.models.ldamodel.LdaModel(corpus=corpus,
                                            id2word=id2word,
                                            num_topics=num_topics,
                                            random_state=1,
                                            passes=num_passes,
                                            alpha='auto') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-21T03:56:12.040

即使有大约 50,000 条评论，我也遇到了同样的问题。但是您可以通过增加 LDA 运行的迭代次数来获得更加一致的主题。它最初设置为 50，当我将其提高到 300 时，它通常会给我相同的结果，可能是因为它更接近收敛。

具体来说，您只需添加以下选项：

```
ldamodel.LdaModel(corpus, ..., iterations = <your desired iterations>): 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-12T20:09:37.313

这是由于其他人指出的 LDA 的概率性质。但是，我不认为将`random_seed`参数设置为固定数字是正确的解决方案。

绝对首先尝试增加迭代次数以确保您的算法收敛。即便如此，每个起点都可能使您处于不同的局部最小值。所以你可以在不设置 的情况下多次运行 LDA `random_seed`，然后使用每个模型的 coherence score 比较结果。这可以帮助您避免次优的局部最小值。

Gensim`CoherenceModel`已经为您实现了最常见的一致性指标，例如`c_v`、`u_mass`和`c_npmi`。

您可能会意识到这些会使结果更加稳定，但它们实际上并不能保证每次运行的结果都相同。但是，最好尽可能地达到全局最优，而不是因为固定的`random_seed`IMO 而陷入相同的局部最小值。

# c - 打印参数的 Oneliner C

> ID：15067736
> 
> 赞同：0
> 
> 时间：2013-02-25T13:08:31.683
> 
> 标签：c

我需要编写一个单行程序来打印程序的参数，而不使用除 argc 之外的任何其他计数器变量。然而：

问题 1\. 它以降序而不是升序打印参数。

问题2\. gcc 和 cl 产生不同的结果，那么哪个是正确的？

```
while(argc>0) printf("Argument %d is %s\n",--argc,argv[argc]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T13:22:19.083

如果您正在寻找 oneliner 那么这将在没有以下帮助的情况下完成`argc`：

```
while(*argv) printf("Argument is %s\n",*argv++); 
```

`argv[argc]`保证为NULL。

这也是您的代码中的一个问题。当您通过`argv[argc]`with 时`%s`，它会导致未定义的行为。另一个是`argc`没有中间序列点的修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T13:11:47.360

没有一个是对的。未定义的行为永远不会正确。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T13:19:29.607

永远不要以这种方式编写程序，因为**无法保证**首先执行哪个参数。

根据 C++ 标准 5.2.2/8：

> 后缀表达式和参数表达式的求值都是无序的。参数表达式评估的所有副作用在输入函数之前排序

要么 要么`--argc`将`argv[argc]`首先执行，并且行为未定义。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-25T13:16:44.170

移出否则发生的`argc`值变化。`printf``Undefined Behaviour`

```
while((argc--)>0) printf("Argument %d is %s\n",argc,argv[argc]); 
```

问题是因为：

> 未指定函数参数的评估顺序

# java - Intellij IDEA for java 上的 UnitTest 自动运行程序

> ID：15067740
> 
> 赞同：3
> 
> 时间：2013-02-25T13:08:39.033
> 
> 标签：java, unit-testing, intellij-idea, tdd, autorun

我尝试使用插件 'fireworks' [http://plugins.jetbrains.com/plugin?pr=idea&pluginId=1106](http://plugins.jetbrains.com/plugin?pr=idea&pluginId=1106)为 java 代码自动运行单元测试。但它不起作用。有什么替代方案吗？

是否有人在源更改后自动执行 java 代码的单元测试？

# 附言

我的项目很小——它只是算法课程的练习，所以我不想在 Maven 上构建复杂的部署系统或解决如此琐碎任务的东西。因此，如果存在任何适用于 IDEA 的插件，那对我来说会更好。

但是，如果您对 Maven 有简单的决定，它也可以适应它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:50:18.013

您可以绑定 ^S 来运行测试（^shiftR），这几乎可以为您提供您所追求的（我认为）。

然后将测试运行器设置为在运行前始终保存。

然后每次执行 ^S 时都会触发测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-28T13:59:11.673

是的，Infinitest 也适合这个目的。对于较大的项目，它会变得很烦人，但对于您的小项目，它应该可以正常工作。此外，它在 Eclipse 中运行良好。

# c++ - 按键更改 std::multimap 中多个元素的值

> ID：15067743
> 
> 赞同：0
> 
> 时间：2013-02-25T13:08:43.997
> 
> 标签：c++, multimap

我正在使用一个`std::multimap`

```
std::multimap<string,string> map; 
```

它包含以下元素

```
1 2  
2 3
3 2
1 2
1 0 
```

我想用X替换所有的1和2。我在*谷歌*搜索了很长时间，但没有得到结果。我试过了

```
for(it=mmap.begin();it!=mmap.end();it++)
{
   if(it->first == "1" || it->first == "2")
   {
     key = it->second;
     it.erase(it);
     mmap.insert(pair<string,string>("X",key));
   }
} 
```

但结果错误。我知道大小每次都会变化，当我们插入元素时，元素会被插入到最后，这反过来又结束了 for 循环。还有其他方法可以摆脱这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:25:49.487

> > 我知道大小每次都不同，当我们插入元素时，最后会插入

不，它不会，它会在这样的位置插入一个新元素以保留顺序。

你需要做的是这个。

```
// for "1"
while (auto I = mmap.lower_bound ("1"), I != mmap.end())
{
    mmap.insert(pair<string,string>("X",I->second));
    mmap.erase (I);
}

// Same for "2"
while (auto I = mmap.lower_bound ("2"), I != mmap.end())
{
    mmap.insert(pair<string,string>("X",I->second));
    mmap.erase (I);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:12:11.617

您在迭代容器时正在修改容器，这很糟糕。

我建议您存储所有要替换的值，删除它们，然后放回您想要的所有值。

或者只是创建具有所需值的新地图

# exception - Vaadin 7 获取屏幕宽度

> ID：15067744
> 
> 赞同：2
> 
> 时间：2013-02-25T13:08:54.387
> 
> 标签：exception, get, resolution, vaadin

当我尝试像这样获取屏幕宽度时，出现 UnsatisfiedLinkError 异常：

```
int screenWidth = BrowserInfo.get().getScreenWidth(); 
```

在 BrowserInfo.getBrowserString() 处抛出异常：

```
Feb 25, 2013 2:03:40 PM com.vaadin.server.DefaultErrorHandler doDefault
SEVERE: 
java.lang.UnsatisfiedLinkError: com.vaadin.client.BrowserInfo.getBrowserString()Ljava/lang/String;
at com.vaadin.client.BrowserInfo.getBrowserString(Native Method)
at com.vaadin.client.BrowserInfo.<init>(BrowserInfo.java:76)
at com.vaadin.client.BrowserInfo.get(BrowserInfo.java:67)
at com.vaadin.client.BrowserInfo.<clinit>(BrowserInfo.java:56)
at layoutHandler.MainLayoutHanlder.setCssClasses(MainLayoutHanlder.java:34) 
```

这是 Vaadin 7 的错误，还是我只是错误地使用了 BrowserInfo 类？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T14:48:44.500

`Page.getCurrent().getBrowserWindowWidth()`改为打电话。

`BrowserInfo`是一个客户端类，你不应该在你的服务器端类中使用它。我会完全避免将客户端库放在类路径上。`getBrowserWindowWidth`是原生的，因为这是 GWT 编译器桥接 JavaScript 代码的方式。如果您查看源代码，JavaScript 代码位于特殊格式的注释中。

# php - HTML 表单未将变量发送到 PHP/MySQL

> ID：15067745
> 
> 赞同：0
> 
> 时间：2013-02-25T13:08:56.020
> 
> 标签：php, html, mysql

我的问题是，当我在我的 html 表单中输入数据并单击提交时，它会调用我的 php 文件，但它不会发送参数。

我什至尝试过使用工作代码来测试它，甚至工作代码也没有通过变量。我不确定为什么这样做，糟糕的 php 安装？不知道。

在这里，如果你想看看它是否至少对你有用。但是我没有将任何东西传递到我的 php 文件中的变量中。谢谢您的帮助。

```
 <html>
    <head>
    <title>Home</title>
    </head>
<body>

<form method="get" action="reg.php">
Firstname: <input type="text" name="firstname">
Lastname: <input type="text" name="lastname">
Age: <input type="text" name="age">
<input type="submit" value="Submit">
</form>

</body>
</html> 
```

这是php文件：

```
 <?php
echo $_SERVER['REQUEST_METHOD'];

if(isset($_GET['firstname'])){
    $firstname = $_GET['firstname'];
}
else{
    $firstname = 'null';
}
if(isset($_GET['lastname'])){
    $lastname = $_GET['lastname'];
}
else{
    $lastname = 'null';
}
if(isset($_GET['age'])){
    $age = $_GET['age'];
}
else{
    $age = 'null';
}

$con = mysqli_connect("127.0.0.1","root","", "my_db");

$sql="INSERT INTO persons (FirstName, LastName, Age)
VALUES
('$firstname','$lastname','$age')";
$result = mysqli_query($con, $sql);
if ($result)
  {
echo "1 record added";
  }
else{
    echo "Did not work";
}

error_reporting(E_ALL);
mysqli_close($con);
?> 
```

当我查看错误报告时，对于我测试的每一段工作代码，它每次都显示未定义索引。我测试了 4 个工作代码文件，但都没有工作，但被证明确实有效。我开始认为我的 php 安装错误或更深层次的问题是问题所在。再次感谢。

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2013-02-25T13:11:56.443

三件事：

1.  我建议您使用 POST 而不是 GET。
2.  给你的输入字段一个id，它应该可以工作。
3.  在将数据写入数据库之前，您需要对其进行清理。

# java - Sharkey的SeparatedListAdapter与ImageView？

> ID：15067746
> 
> 赞同：0
> 
> 时间：2013-02-25T13:08:57.313
> 
> 标签：java, android

我也在使用 Sharkey 的 SepatedListAdapter，并且从基础版中对其进行了相当多的定制。我添加了更多文本字段和图像视图，数据从数据库中提取出来。我无法理解的一件事是如何在适配器中更新 imageview 的 src。

例如，这就是我所拥有的（包括对 Sharkey 代码的更改）：

我是我的**布局**，我有一个 imageview：

```
 <ImageView
        android:id="@+id/list_complex_image" 
        android:layout_width="30dp"
        android:layout_height="30dp" /> 
```

在我的**main.java**中：

```
public Map<String,?> createItem(String title, String caption, String flightno, String extra, String imagesrc) {  
    Map<String,String> item = new HashMap<String,String>();  
    item.put(ITEM_TITLE, title);  
    item.put(ITEM_CAPTION, caption);
    item.put(ITEM_FLIGHTNO, flightno);
    item.put(ITEM_EXTRA, extra);
    item.put(ITEM_IMAGESRC, imagesrc);

    return item;  
} 
```

进一步下来，我有：

```
 adapter.addSection(sEventDate + sExtraInfo, new SimpleAdapter(this, currentListSection, R.layout.list_complex,   
                    new String[] { ITEM_TITLE, ITEM_CAPTION, ITEM_FLIGHTNO, ITEM_EXTRA, ITEM_IMAGESRC }, 
                    new int[] { R.id.list_complex_title, R.id.list_complex_caption, R.id.list_complex_flightno, R.id.list_complex_extra, R.id.list_complex_image })); 
```

粗略地说，我认为它试图为图像视图设置一个文本值，它不需要文本值。我想编辑**src**字段

在 Sharkey 的 separatorlistadapter.java 中**，**他有：

```
public void addSection(String section, Adapter adapter) {  
    this.headers.add(section);  
    this.sections.put(section, adapter);  
} 
```

在将项目添加到适配器之前，我有什么想法可以更新它以包括对 ImageView 的**src更改？**

非常感谢，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:57:04.227

我已经找到了答案，供其他人搜索。

感谢 David Cesarino 的以下帖子： [在此处发布](https://stackoverflow.com/questions/5684002/license-problem-using-sectioned-listview-with-j-sharkeys-separatedlistadapter)

原来我可以引用 Resource Drawable 对象的 String.ValueOf() 参数。因此，我可以将字段值设置为：而不是使用纯字符串（如文本字段）：

```
String.valueOf(R.drawable.my_shape_image) 
```

发挥魅力，干杯！Ĵ

# jquery - .htm 文件加载在 IE 中有效，但在 Firefox 中无效

> ID：15067753
> 
> 赞同：2
> 
> 时间：2013-02-25T13:09:25.697
> 
> 标签：jquery, html

我需要显示一个 .htm 文件，它位于应用程序之外。

这是设计和代码。

```
<a href="javascript:;" onclick="showhtm()">

<div id="htmldiv">

</div>

<script type="text/javascript">

function showhtm() {
    var sPath = window.location.pathname;
    var sPage = sPath.substring(sPath.lastIndexOf('/') + 1);
    var shtm = sPage.substring(0, sPage.lastIndexOf('.'));

    $("#htmldiv").load("http://10.196.128.98/htms/app/files/html/" + shtm + ".htm");

}
</script> 
```

这适用于 IE，但不适用于 Firefox。

我应该改用 iframe 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:12:20.473

我认为代码正在*本地*运行，从通过`file://`URL 加载的页面（例如，您双击或类似的）。它在 IE 中起作用但在 Firefox 中不起作用的原因是它们对[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)有不同的解释，这可以防止跨域 ajax 调用。IE 允许源`null`（本地文件）通过 ajax 从 Web 加载资源，即使从技术上讲这是一个跨源调用，但 Firefox 不允许。

> 我应该改用 iframe 吗？

一个`iframe`会工作的，是的。当然，您不能从容器页面对其内容进行任何脚本编写（再次因为 SOP），并且您正在加载到其中的页面不需要使用框架破坏脚本，但鉴于这些附带条件，它应该可以工作. 当然，你会设置它`src`而不是使用它`load`：

```
$("#htmliframe")[0].src = "http://10.196.128.98/htms/app/files/html/" + shtm + ".htm";
// or
$("#htmliframe").attr("src", "http://10.196.128.98/htms/app/files/html/" + shtm + ".htm"); 
```

# jsf - ace:row 编辑器不更新支持 bean

> ID：15067754
> 
> 赞同：1
> 
> 时间：2013-02-25T13:09:28.097
> 
> 标签：jsf, icefaces

我正在使用 Icefaces 3.0。我在 jsf 页面中有行编辑器

```
 <ace:rowEditor id="editor" rowEditListener="#{employmentNumberController.updateNumber}" rowEditCancelListener="#{employmentNumberController.cancelUpdateNumber}" />
        </ace:column> 
```

在页面顶部，我有三个布尔复选框，它们是 ExternalSystemSynchroniser 类的属性，负责与外部系统同步，但这不是行编辑器的一部分。

```
 <h:selectBooleanCheckbox id="adSynchronizer" label="Synchronize with Ad" value="#{employmentNumberController.synchronizer.synchronizeAd}">
                        <h:outputLabel for="adSynchronizer" value="Synchronize with Active Directory"/>
                    </h:selectBooleanCheckbox>

                    <h:selectBooleanCheckbox id="mcdSynchronizer" label="Synchronize with Mcd" value="#{employmentNumberController.synchronizer.synchronizeMcd}">
                        <h:outputLabel for="mcdSynchronizer" value="Synchronize with Mcd"/>
                    </h:selectBooleanCheckbox> 
```

问题是当我在 jsf 页面上更改这些布尔值的值时......后备 bean 属性没有得到更新，并且行提交事件没有按预期工作。

提交行编辑操作时，如何使支持 bean 更改其值。

# encryption - 为什么我不能在 Azure (Windows Server 2012) 上使用自定义 configProtectionProvider 加密 web.config/appSettings？

> ID：15067759
> 
> 赞同：6
> 
> 时间：2013-02-25T13:09:34.447
> 
> 标签：encryption, azure, web-config, appsettings, windows-server-2012

我有一个 MVC 应用程序，它部署到在 Windows Server 2012 虚拟机上运行的 Windows Azure 托管服务。在该`web.config`文件中，我有 3 个部分[使用`PKCS12ProtectedConfigurationProvider`](http://archive.msdn.microsoft.com/pkcs12protectedconfg): `connectionStrings`、`dataCacheClients`和`system.net/mailSettings/smtp`. 以下是相关部分的样子：

```
<configuration>
  ...
  <configProtectedData>
    <providers>
      <add name="CustomProvider" thumbprint="[this is secret]"
          type="Pkcs12ProtectedConfigurationProvider.Pkcs12ProtectedConfigurationProvider, PKCS12ProtectedConfigurationProvider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=34da007ac91f901d" />
    </providers>
  </configProtectedData>
  ...
  <connectionStrings configProtectionProvider="CustomProvider">
    <EncryptedData ... ommitted for brevity
  </connectionStrings>
  ...
  <system.net>
    <mailSettings>
      <smtp configProtectionProvider="CustomProvider">
        <EncryptedData ommitted for brevity
      </smtp>
    </mailSettings>
  </system.net>
  ...
  <dataCacheClients configProtectionProvider="CustomProvider">
    <EncryptedData ommitted for brevity
  </dataCacheClients>
  ...
</configuration> 
```

**以上所有工作都很好**。部署到 Azure 时，连接字符串、SMTP 邮件和数据缓存都可以正常工作。提供`PKCS12ProtectedConfiguration`者使用我的自定义证书来解密这些部分，一切都很好。

但是我似乎不能使用相同的方法来加密`web.config/appSettings`。当我尝试将以下内容部署到 Azure 时...

```
<configuration>
  ...
  <appSettings configProtectionProvider="CustomProvider">
    <EncryptedData ommitted for brevity
  </appSettings>
  ...
</configuration> 
```

...然后我得到以下异常：

```
Server Error in '/' Application.

Configuration Error

Description: An error occurred during the processing of a configuration file
required to service this request. Please review the specific error details
below and modify your configuration file appropriately.

Parser Error Message: An error occurred loading a configuration file: Could not
load file or assembly 'PKCS12ProtectedConfigurationProvider, Version=1.0.0.0,
Culture=neutral, PublicKeyToken=34da007ac91f901d' or one of its dependencies.
The system cannot find the file specified.

Source Error: 

Line 41:     </EncryptedData>
Line 42:   </connectionStrings>
Line 43:   <appSettings configProtectionProvider="CustomProvider">
Line 44:     <EncryptedData ...>
Line 45:       <EncryptionMethod .../>

Source File: E:\sitesroot\0\web.config    Line: 43 

Assembly Load Trace: The following information can be helpful to determine why
the assembly 'PKCS12ProtectedConfigurationProvider, Version=1.0.0.0,
Culture=neutral, PublicKeyToken=34da007ac91f901d' could not be loaded.

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value
[HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure
logging.
To turn this feature off, remove the registry value
[HKLM\Software\Microsoft\Fusion!EnableLog]. 
```

**但是我知道`PKCS12ProtectedConfigurationProvider.dll`它在`/bin`文件夹**中，因为：

1.  我远程进入虚拟机并在两者中都看到了`approot/bin`它`siteroot/bin`
2.  当我使用未加密的版本进行部署时`appSettings`，其他 3 个部分已使用此 dll 成功解密。

就好像程序集加载器`PKCS12ProtectedConfigurationProvider.dll`在解析并加载该`appSettings`部分之前无法查找该文件。我尝试省略提供程序配置部分的版本、文化和 PublicKeyToken 部分，但随后错误变为：

```
Parser Error Message: An error occurred loading a configuration file: Could not 
load file or assembly 'PKCS12ProtectedConfigurationProvider' or one of its 
dependencies. The system cannot find the file specified. 
```

**部署到在 Windows Server 2012 虚拟机上运行的 Windows Azure 托管服务时，是否可以`web.config/appSettings`使用自定义进行加密？`configProtectionProvider`**如果是这样，我在这里错过了什么？

## 更新：

发布此消息后，我打开了`Fusion!EnableLog`注册表项，现在我在异常中获得了以下附加信息：

```
Assembly Load Trace: The following information can be helpful to determine why
the assembly 'PKCS12ProtectedConfigurationProvider, Version=1.0.0.0, 
Culture=neutral, PublicKeyToken=34da007ac91f901d' could not be loaded.

=== Pre-bind state information ===
LOG: User = NT AUTHORITY\NETWORK SERVICE
LOG: DisplayName = PKCS12ProtectedConfigurationProvider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=34da007ac91f901d
 (Fully-specified)
LOG: Appbase = file:///d:/windows/system32/inetsrv/
LOG: Initial PrivatePath = NULL
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: No application configuration file found.
LOG: Using host configuration file: D:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet.config
LOG: Using machine configuration file from D:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Post-policy reference: PKCS12ProtectedConfigurationProvider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=34da007ac91f901d
LOG: Attempting download of new URL file:///d:/windows/system32/inetsrv/PKCS12ProtectedConfigurationProvider.DLL.
LOG: Attempting download of new URL file:///d:/windows/system32/inetsrv/PKCS12ProtectedConfigurationProvider/PKCS12ProtectedConfigurationProvider.DLL.
LOG: Attempting download of new URL file:///d:/windows/system32/inetsrv/PKCS12ProtectedConfigurationProvider.EXE.
LOG: Attempting download of new URL file:///d:/windows/system32/inetsrv/PKCS12ProtectedConfigurationProvider/PKCS12ProtectedConfigurationProvider.EXE. 
```

**所以这里有另一个问题**：为什么 IIS 会在`inetsrv`这个程序集的路径中查找，而不是在应用程序的`/bin`文件夹中查找它？我在日志中看到“未找到应用程序配置文件”。这是否意味着程序集绑定器必须找到一个`web.config`未加密的`appSettings`部分才能解析和加载它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T12:37:30.457

您是否尝试在角色启动时在 GAC 中安装程序集？

有关在启动时将程序集添加到 gac 的信息[http://blogs.infosupport.com/adding-assemblies-to-the-gac-in-windows-azure/](http://blogs.infosupport.com/adding-assemblies-to-the-gac-in-windows-azure/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-17T15:17:33.227

我能够通过安装 NuGet 包来修复此错误：[https ://www.nuget.org/packages/Pkcs12ProtectedConfigurationProvider/](https://www.nuget.org/packages/Pkcs12ProtectedConfigurationProvider/)

我猜安装过程的一部分是为您注册 .dll。

# c - 在 Visual Studio 2010 中使用 C99 之前的语法

> ID：15067761
> 
> 赞同：0
> 
> 时间：2013-02-25T13:09:39.283
> 
> 标签：c, visual-studio-2010, syntax, ide

我正在使用一个相当旧的代码库，而且都是 C99 之前的代码。因此，没有`bool`类型，而是一个`BOOLEAN`枚举。我是一个年轻的枪手，所以我喜欢 VS 2010，但它与旧代码库的配合并不是特别好。我猜它使用 MSVC2010 来做它的在线错误高亮，我也猜~~MSVC2010 符合 C99 标准~~。我可能错了，但无论如何，当我用布尔表达式分配 BOOLEAN 变量时，它会突出显示“错误”。我举一个简单的例子：

```
typedef enum boolean_tag {FALSE, TRUE} BOOLEAN;
BOOLEAN test = FALSE;
test = 1 == 1; 
```

在 VS2010 编辑器中，`=`将错误突出显示，并且在鼠标悬停时会注意到 type 的值`bool`不能分配给 type 的实体`BOOLEAN`。由于 C99 之前没有 a 的概念`bool`，这应该只是枚举值的分配，因此不是错误。

所以，我的问题是：有没有办法告诉 VS2010 使用 C99 之前的语法/错误检查？或者，这是一个延伸，它是否完全为这些功能使用了另一个编译器？

谢谢。

编辑：更正了 MSVC2010 假设

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:10:10.073

需要考虑的一些事项：

*   Visual Studio 是一个 C++ 编译器，因此不适合编译严格符合的 C 程序。
*   Visual Studio 不符合任何版本的 C 标准。它当然不遵循或执行 C99 标准。
*   在 C++ 中，表达式的`1 == 1`计算结果为`true`类型`bool`。
*   在 C 中，任何版本的标准都会`1 == 1`计算`1`为 type的值`int`。

Visual Studio 抱怨是因为您试图将 bool 存储在枚举中，这在 C++ 中是不合适的，C++ 是一种具有某种强类型的语言。在 C 语言中没有这样的限制。

您的问题的答案是：您遇到这些问题是因为您尝试在编译器中为另一种编程语言编译 C 程序。

# codeigniter - 带有代码点火器的 UTF-8

> ID：15067764
> 
> 赞同：0
> 
> 时间：2013-02-25T13:09:40.500
> 
> 标签：codeigniter, utf-8

我正在使用以前使用自制代码的 UTF8_unicode 数据库。所以数据库非常好，我可以毫无问题地获取我的数据并显示它。

我正在尝试切换到 CodeIgniter。我已经更改了 database.php 和 config.php 以使其显示 UTF8 但它不起作用。如果我希望能够正确显示我的数据，我必须在我的控制器中使用 utf8_decode。知道为什么吗？它现在让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-05T06:37:41.770

花了很多时间后，我得到了这个问题的解决方案。

1) 打开您的 PHPMyAdmin 数据库。

2) 选择您的数据库。

3）选择你的桌子后。

4）转到结构然后单击更改要存储该类型数据的列。

5) 转到排序规则并将类型从 latin1_swedish_ci 更改为 utf8_general_ci。

这个逻辑更正了我的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:10:19.603

在浏览了很多网页后，我找到了解决方案！

CodeIgniter 用于`mysql_query("SET NAMES utf8")`与 mysql 服务器通信。因此，如果您以前从未使用过它，那一切都会变得混乱。我不知道我将如何处理它。

我也做了：

```
ALTER TABLE p1x3l_posts MODIFY texte TEXT character set latin1;
ALTER TABLE p1x3l_posts MODIFY texte BLOB;
ALTER TABLE p1x3l_posts MODIFY texte TEXT character set utf8; 
```

它更正了我的数据。

# android - Android - 从 onReceive 中调用 onKeyDown

> ID：15067766
> 
> 赞同：0
> 
> 时间：2013-02-25T13:09:46.927
> 
> 标签：android, android-intent

我对 Android 开发和 Java 开发完全陌生，所以请原谅我的愚蠢问题 :)

我想设置一个在按下按钮时停止 SMS 声音的应用程序。

到目前为止，我能够设置一个 SMSReceiver 来查看何时收到 SMS 并执行它所告知的操作。这是代码：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.media.AudioManager;

public class SMSReceiver extends BroadcastReceiver {
    @Override
public void onReceive(Context context, Intent intent) {
    AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
    switch (audioManager.getRingerMode()) {
    case AudioManager.RINGER_MODE_VIBRATE:
        audioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        audioManager.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
    break;
    case AudioManager.RINGER_MODE_NORMAL:
        audioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        audioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
    break;
    }
  }
} 
```

现在，我需要的是仅在按下音量减小按钮（或任何其他按钮）时才在 onReceive 中执行操作。

我试图添加一个 onKeyDown 方法......但我无法解决它:(。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:22:15.280

据我了解，您可以使用以下方式：当按钮更改其状态时 - 在用户首选项中写入布尔标志。当 SMS 到来时，您可以从首选项中检查标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T03:44:44.710

编码：

```
if(buttonPressed){
    //your code
} 
```

实际上应该是：

```
if(currentActivity.buttonPressed){
    //your code
} 
```

因为它无法从另一个类解析 buttonPressed

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T13:17:52.130

编辑：做了一些改变

```
public static Boolean buttonPressed = false; 

 //put these 2 methods inside your current activity

@Override //important!
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_VOLUME_DOWN)){
            buttonPressed = true;
        }
         return super.onKeyDown(keyCode, event);;
    }

@Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_VOLUME_DOWN)){
            buttonPressed = false;
        }
         return super.onKeyUp(keyCode, event);;
    }
//This inside your receiver class
public void onReceive(Context context, Intent intent) 
{
    if(buttonPressed){
        //your code
    }
} 
```

# postgresql - Postgresql：角色oid的外键

> ID：15067770
> 
> 赞同：4
> 
> 时间：2013-02-25T13:09:59.590
> 
> 标签：postgresql, postgresql-9.2

如何将外键添加到 postgres 中的数据库角色？

```
CREATE TABLE "public"."role_info" (
    "last_login" timestamptz,
    "user" name,
    CONSTRAINT "role_info" FOREIGN KEY ("user") REFERENCES "pg_catalog"."pg_authid" ("rolname") ON UPDATE NO ACTION ON DELETE NO ACTION
 )
 WITH (OIDS=FALSE); 
```

这是返回*权限被拒绝*。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T13:26:28.243

你没有。您不能在当前实现中添加引用系统目录的外键。

即使稍后对某些目录放宽该限制`pg_role`，所有数据库共享的全局目录也可能仍然受到限制。

您*可以*使用触发器单向地强制执行关系，阻止您添加引用不存在的系统目录条目的值。但是，您无法阻止目录条目被删除，因此它的实用性有限。

**围绕 PostgreSQL 12 版本编辑 2019：**

你不能这样做的原因有很多。

系统特例系统目录关系以多种方式使它们表现得特别：

*   它有时会对它们进行就地更新，这对于用户关系是不允许的，并且不能在事务中止时回滚
*   它通常通过一层间接和缓存（syscache 和 relcache）来访问它们
*   它通过一种特殊的轻量级访问方法（genam）更新它们，该方法不支持一堆 PostgreSQL 的高级特性，并出于性能、内存使用和代码复杂性的原因做出了许多简化假设。

此外，在这种情况下，`pg_catalog.pg_authid`您可以通过检查看到*共享关系*`select relisshared from pg_catalog.pg_class where oid = 'pg_catalog.pg_authid'::regclass`。这意味着相同的表内容被映射到 PostgreSQL 实例（“集群”或数据目录）上的所有数据库中。没有明智的方法来对此进行 FK，因为引用它的关系只存在于`pg_catalog.pg_class`一个*数据库*中，包含其行的堆也将存在 - 但*引用* `pg_catalog.pg_authid`的堆将映射到*所有数据库*中。连接到一个数据库的 postgres 后端不知道 FK 约束甚至存在于另一个数据库上，也无法检查。

# .net - 如何使用获取资源数据

> ID：15067774
> 
> 赞同：2
> 
> 时间：2013-02-25T13:10:12.403
> 
> 标签：.net, vb.net, winforms, bitmap, embedded-resource

我使用以下命令创建了一个包含 PNG 文件的资源文件：

```
resgen.exe Test3.resx Test3.resources 
```

我可以遍历资源并且可以成功地看到它们被包含在内，我还可以看到每个元素的数据类型是 System.Drawing.Bitmap，但是我无法将字节数组转换回位图，

要么 PNG 需要不同的检索和转换，要么我快疯了

有人知道我错过了什么吗？

```
 Public Function GetImageResources() As Dictionary(Of String, Bitmap)

    Dim resourceReader As New ResourceReader(".\Test3.resources")
    Dim resourcesEnumerator As IDictionaryEnumerator = resourceReader.GetEnumerator()
    Dim resourcesFound As New Dictionary(Of String, Bitmap)

    Do While resourcesEnumerator.MoveNext()

        Dim dataType As String = Nothing
        Dim data() As Byte = Nothing
        resourceReader.GetResourceData(resourcesEnumerator.Key, dataType, data)

        Dim finalImage As New Bitmap(New MemoryStream(data))
        'RUNTIME ERROR: Parameter is not valid
        'dataType value = System.Drawing.Bitmap, System.Drawing, ...

        resourcesFound.Add(resourcesEnumerator.Key.ToString(), finalImage)

    Loop
    resourceReader.Close()

    Return resourcesFound
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-30T20:36:43.913

我只是有同样的问题。由于 DataType: ResourceTypeCode.Stream 始终存在偏移量 4，我很难读取资源流。[您可以在 MSDN](https://msdn.microsoft.com/en-us/library/system.resources.resourcereader(v=vs.110).aspx)中的 Microsoft 代码中看到该偏移量（该代码非常适合 Bitmap）。

我在[GitHub 上做了一个关于资源阅读和 uri 的小项目](https://github.com/EricOuellet2/UriInternal)

对于构建操作定义为“资源”的图像（在文件夹“[YourProject]/Icons/About.png”中）：

```
 System.IO.Stream stream = HQ.Util.General.ResourceHelper.LoadResourceFromUri(
            HQ.Util.General.ResourceHelper.GetLocationUri("Icons/About.png"));

        Image image = new Bitmap(stream); 
```

这是我的 ResourceHelper 文件（如果它可以帮助你）...

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Diagnostics;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Reflection;
using System.Resources;
using System.Runtime.Serialization.Formatters.Binary;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Resources;

namespace HQ.Util.General
{
    public static class ResourceHelper
    {
        // ******************************************************************
        /// <summary>
        /// The resource should be defined as 'Resource' not as 'Embedded resource'.
        /// </summary>
        /// <param name="resourcePath">The resource path</param>
        /// <param name="assembly">If null, then use calling assembly to find the resource</param>
        /// <returns></returns>
        public static Uri GetLocationUri(string resourcePath, Assembly assembly = null)
        {
            if (assembly == null)
            {
                assembly = Assembly.GetCallingAssembly();
            }

            resourcePath = resourcePath.Replace('\\', '/');

            return new Uri(@"pack://application:,,,/" + assembly.GetName().Name + ";component" +
                (resourcePath[0] == '/' ? resourcePath : "/" + resourcePath), UriKind.Absolute);
        }

        // ******************************************************************
        /// <summary>
        /// Will load resource from any assembly that is part of the application.
        /// It does not rely on Application which is specific to a (UI) frameowrk.
        /// </summary>
        /// <param name="uri"></param>
        /// <param name="asm"></param>
        /// <returns></returns>
        public static Stream LoadResourceFromUri(Uri uri, Assembly asm = null)
        {
            Stream stream = null;

            if (uri.Authority.StartsWith("application") && uri.Scheme == "pack")
            {
                string localPath = uri.GetComponents(UriComponents.Path, UriFormat.UriEscaped);

                int indexLocalPathWithoutAssembly = localPath.IndexOf(";component/");
                if (indexLocalPathWithoutAssembly == -1)
                {
                    indexLocalPathWithoutAssembly = 0;
                }
                else
                {
                    indexLocalPathWithoutAssembly += 11;
                }

                if (asm != null) // Take the provided assembly, do not check for the asm in the uri.
                {
                    stream = GetAssemblyResourceStream(asm, localPath.Substring(indexLocalPathWithoutAssembly));
                }
                else
                {
                    if (uri.Segments.Length > 1)
                    {
                        if (uri.Segments[0] == "/" && uri.Segments[1].EndsWith(";component/"))
                        {
                            int index = uri.Segments[1].IndexOf(";");
                            if (index > 0)
                            {
                                string assemblyName = uri.Segments[1].Substring(0, index);

                                foreach (Assembly asmIter in AppDomain.CurrentDomain.GetAssemblies())
                                {
                                    if (asmIter.GetName().Name == assemblyName)
                                    {
                                        stream = GetAssemblyResourceStream(asmIter, localPath.Substring(indexLocalPathWithoutAssembly));
                                        break;
                                    }
                                }
                            }
                        }
                    }

                    if (stream == null)
                    {
                        asm = Assembly.GetCallingAssembly();
                        stream = GetAssemblyResourceStream(asm, localPath.Substring(indexLocalPathWithoutAssembly));
                    }
                }
            }
            return stream;
        }

        // ******************************************************************
        /// <summary>
        /// The path separator is '/'.  The path should not start with '/'.
        /// </summary>
        /// <param name="asm"></param>
        /// <param name="path"></param>
        /// <returns></returns>
        public static Stream GetAssemblyResourceStream(Assembly asm, string path)
        {
            // Just to be sure
            if (path[0] == '/')
            {
                path = path.Substring(1);
            }

            // Just to be sure
            if (path.IndexOf('\\') == -1)
            {
                path = path.Replace('\\', '/');
            }

            Stream resStream = null;

            string resName = asm.GetName().Name + ".g.resources"; // Ref: Thomas Levesque Answer at:
            // http://stackoverflow.com/questions/2517407/enumerating-net-assembly-resources-at-runtime

            using (var stream = asm.GetManifestResourceStream(resName))
            {
                using (var resReader = new System.Resources.ResourceReader(stream))
                {
                    string dataType = null;
                    byte[] data = null;
                    try
                    {
                        resReader.GetResourceData(path.ToLower(), out dataType, out data);
                    }
                    catch (Exception ex)
                    {
                        DebugPrintResources(resReader);
                    }

                    if (data != null)
                    {
                        switch (dataType) // COde from 
                        {
                            // Handle internally serialized string data (ResourceTypeCode members).
                            case "ResourceTypeCode.String":
                                BinaryReader reader = new BinaryReader(new MemoryStream(data));
                                string binData = reader.ReadString();
                                Console.WriteLine("   Recreated Value: {0}", binData);
                                break;
                            case "ResourceTypeCode.Int32":
                                Console.WriteLine("   Recreated Value: {0}", BitConverter.ToInt32(data, 0));
                                break;
                            case "ResourceTypeCode.Boolean":
                                Console.WriteLine("   Recreated Value: {0}", BitConverter.ToBoolean(data, 0));
                                break;
                            // .jpeg image stored as a stream.
                            case "ResourceTypeCode.Stream":
                                ////const int OFFSET = 4;
                                ////int size = BitConverter.ToInt32(data, 0);
                                ////Bitmap value1 = new Bitmap(new MemoryStream(data, OFFSET, size));
                                ////Console.WriteLine("   Recreated Value: {0}", value1);

                                const int OFFSET = 4;
                                resStream = new MemoryStream(data, OFFSET, data.Length - OFFSET);

                                break;
                            // Our only other type is DateTimeTZI.
                            default:
                                ////// No point in deserializing data if the type is unavailable.
                                ////if (dataType.Contains("DateTimeTZI") && loaded)
                                ////{
                                ////    BinaryFormatter binFmt = new BinaryFormatter();
                                ////    object value2 = binFmt.Deserialize(new MemoryStream(data));
                                ////    Console.WriteLine("   Recreated Value: {0}", value2);
                                ////}
                                ////break;
                                break;
                        }

                        // resStream = new MemoryStream(resData);
                    }
                }
            }

            return resStream;
        }

        // ******************************************************************
        private static void DebugPrintResources(System.Resources.ResourceReader reader)
        {
            Debug.Print("Begin dump resources: ---------------------");
            foreach (DictionaryEntry item in reader)
            {
                Debug.Print(item.Key.ToString());
            }
            Debug.Print("End   dump resources: ---------------------");
        }

        // ******************************************************************        // ******************************************************************
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-14T18:08:54.880

我在完全相同的问题上苦苦挣扎。我发现当保存到资源文件时，字节数组的前面会添加四个字节。我不知道为什么，也没有找到任何文档。无论如何，以下内容将有助于正确地将您的图像数据转换回来：

```
public Image FixImageDataFromResourceFile(byte[] byteArrayFromResourceFile)
{
    byte[] fixedImageData = new byte[byteArrayFromResourceFile.Length - 4];
    Array.Copy(byteArrayFromResourceFile, 4, fixedImageData, 0, fixedImageData.Length);
    MemoryStream ms = new MemoryStream(fixedImageData);
    Image retval = Bitmap.FromStream(ms);
    ms.Close();
    return retval;
} 
```

如果有人知道这四个字节的用途或可以找到有关它的文档，我很想知道它。我唯一的猜测是这四个字节用于识别资源文件中的数据类型，但肯定会使任何信息在没有适当通知的情况下无用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T15:33:57.490

还不知道如何使用 GetResourceData，但我至少这段代码能达到同样的效果：

```
Public Function GetImageResources() As Dictionary(Of String, Bitmap)

    Dim resourcesFound As New Dictionary(Of String, Bitmap)

    Dim resourceReader As New ResourceReader(".\Test3.resources")
    Dim resourcesEnumerator As IDictionaryEnumerator = resourceReader.GetEnumerator()
    Dim resourceSet As New ResourceSet(".\Test3.resources")

    Do While resourcesEnumerator.MoveNext()

        Dim retrievedObject As Object = resourceSet.GetObject(resourcesEnumerator.Key.ToString())

        Dim convertedBitmap As Bitmap = DirectCast(retrievedObject, Bitmap)
        resourcesFound.Add(resourcesEnumerator.Key.ToString(), convertedBitmap)

    Loop
    resourceReader.Close()
    resourceSet.Close()

    Return resourcesFound
End Function 
```

# html - 在固定宽度内使元素 100% 成为主体 - IE6 BUG

> ID：15067782
> 
> 赞同：0
> 
> 时间：2013-02-25T13:10:37.067
> 
> 标签：html, css, internet-explorer-6

很确定这是一个 IE6 错误，因为它适用于所有其他浏览器。

[这个html代码的jsFiddle](http://jsfiddle.net/WjD3x/)：

```
 <div style="background:blue; width:600px; margin-left:auto; margin-right:auto;">
            BLUE
            <div style="background:red; position:absolute; width:100%; left:0;">
                red
            </div>
        </div> 
```

所以“RED” div 应该是其容器（在本例中为主体）的 100% 宽度。在 IE6 中，它始终是 600px。是否有不涉及忽略ie6的修复程序？（我希望我能，相信我！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:21:06.200

该元素相对于其第一个定位（非静态）祖先元素进行定位。绝对位置元素**相**对于第一个具有非静态位置的父元素定位。如果没有找到这样的元素，包含块是`<html>`

因此，要使您的内部 div 相对于其父级定位为“绝对”，您必须使其父级定位为**相对**

[jsFiddle 显示您的代码与父 div 相对](http://jsfiddle.net/Lxr2a/1/)

```
<div style="background:blue; width:600px; margin-left:auto; margin-right:auto;position:relative">BLUE
    <div style="background:red; position:absolute; width:100%; left:0;">red</div>
</div> 
```

对于您的其他情况（ie6 错误？），我需要更多代码。

# c# - IList.Contains(string[]) 如何在 C# 中使用？

> ID：15067789
> 
> 赞同：3
> 
> 时间：2013-02-25T13:11:08.257
> 
> 标签：c#, linq

我正在寻找一种使用字符串数组参数调用 IList.Contains 的快速方法

有没有办法做到这一点：

```
val[] = {"first", "second"}

var temp = from i in items
           where i.list.Contains(val)
           select i; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T13:15:48.980

如果要检查*是否*`i.list`包含or ： *`"first"``"second"`*

 *```
var val = new [] { "first", "second" };
var temp = from i in items
           where val.Any (i.list.Contains)
           select i; 
```

如果要检查是否`i.list`包含*两者* `"first"`或`"second"`：

```
var val = new [] { "first", "second" };
var temp = from i in items
           where val.All (i.list.Contains)
           select i; 
```

但是，如果性能至关重要（考虑在循环中调用数百个项目），则[按照 Hermit 的建议](https://stackoverflow.com/a/15067848/458193)`HashSet`使用交集会更合适。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T13:13:26.547

```
var temp = from i in items
           where i.list.Any(x => val.Contains(x)) 
           select i; 
```

`All`如果所有列表项都应在值中，则使用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T13:14:22.707

我真的不擅长 LINQ，所以我不打算解决这个问题。

首先在列表上执行包含并不是最快的事情。在列表上执行 LINQ 并不能让它更快。你需要做的是有一个 HashSet，然后做一个 Contains。如果您有两个列表，我会说创建两个 HashSet 并将它们相交。

[http://msdn.microsoft.com/en-us/library/vstudio/bb918911(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb918911(v=vs.90).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T13:17:43.843

不确定“包含”是什么意思，如果您想要所有匹配的项目，@lazyberezovsky 的答案应该是正确的。

但是，如果您想覆盖 IList.Contains 以支持数组（或 Enumerable），您可以这样做：

```
 /// <summary>
    /// Return true if <paramref name="allItems"/>
    /// contains one or more <paramref name="candidates"/>
    /// </summary>
    public static bool Contains<T>(IList<T> allItems, IEnumerable<T> candidates)
    {
        if (null == allItems)
            return false;

        if (null == candidates)
            return false;

        return allItems.Any(i => candidates.Contains(i));
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T13:19:18.467

这是一个扩展方法，用于获取数组中的任何项目是否存在于列表中。这个返回一个`bool`like `IList.Contains`。

```
public static class IListExtensions
{
    public static bool ContainsAny<T>(this IList<T> list, IEnumerable<T> enumerable)
    {
        foreach (var item in enumerable)
        {
            if (list.Contains(item))
                return true;
        }
        return false;
    }
} 
```

用法：

```
IList<int> a = // ...
string[] b = // ...

a.ContainsAny(b); 
```*

# android - 为什么即使在 UI 线程上 TextView 的文本值也不会更改

> ID：15067793
> 
> 赞同：0
> 
> 时间：2013-02-25T13:11:45.397
> 
> 标签：android, user-interface

我有一个带有按钮的活动。在 ACTION_DOWN 上，我开始录制并在按下此按钮的同时继续录制。在 ACTION_UP 我必须停止录制。录音线程是单独的一个。活动上有一个文本视图，显示记录时间。时间的默认值为“00:00:00:000”来自记录线程即时调用活动类的 updateTime 方法：

```
public void updateTime(final String time) {
    Log.d("***UPDATE TIME Thread", "Current time:" + time);
    runOnUiThread(new Runnable() {
        public void run() {
            timerTextView.setText(time);
            Log.d("UPDATE TIME Thread", "Current time:"+time);
        }
    });
} 
```

当我第一次调用此活动时，它可以正常工作并正确更新时间值。但是，如果我从上一个屏幕中选择相同的选项来开始第二次录制，时间文本视图的值将保持与“00:00:00:000”相同，其中第二个 Log.d 代码行显示了正确的值。这是 LogCat

```
02-25 16:07:10.660: D/Recording(5075):  Start
02-25 16:07:10.695: D/***UPDATE TIME Thread(5075): Current time:00:00:00:032
02-25 16:07:10.711: D/UPDATE TIME Thread(5075): Current time:00:00:00:032
02-25 16:07:10.843: D/***UPDATE TIME Thread(5075): Current time:00:00:00:174
02-25 16:07:10.863: D/UPDATE TIME Thread(5075): Current time:00:00:00:174
02-25 16:07:10.945: D/***UPDATE TIME Thread(5075): Current time:00:00:00:280
02-25 16:07:10.972: D/UPDATE TIME Thread(5075): Current time:00:00:00:280
02-25 16:07:11.082: D/***UPDATE TIME Thread(5075): Current time:00:00:00:418
02-25 16:07:11.089: D/UPDATE TIME Thread(5075): Current time:00:00:00:418
02-25 16:07:11.203: D/***UPDATE TIME Thread(5075): Current time:00:00:00:535
02-25 16:07:11.222: D/UPDATE TIME Thread(5075): Current time:00:00:00:535
02-25 16:07:11.351: D/***UPDATE TIME Thread(5075): Current time:00:00:00:676
......
Here is my Activity Class Code 
```

公共类 VerficationPBActivity 扩展 Activity 实现 VoiceManagerListener, OnTouchListener { private Claimant currentClaimant = null; TextView screenHeading = null; 私有字符串 screenHeadingText = null; TextView textToSpeakTextView = null; TextView timerTextView = null; TextView statusHintTextView = null; 私人按钮 pushToRecordButton;

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_verfication_pb);
    ActivityController.getActivityController().setCurrentActivity(this);
    screenHeading = (TextView) findViewById(R.id.screenHeading);
    textToSpeakTextView = (TextView) findViewById(R.id.text_to_speek);
    timerTextView = (TextView) findViewById(R.id.timer);
    statusHintTextView = (TextView) findViewById(R.id.status_hint);
    screenHeadingText = (String) getIntent().getSerializableExtra("heading");
    currentClaimant = (Claimant) getIntent().getSerializableExtra("claimant");
    screenHeading.setText(screenHeadingText);
    if (currentClaimant != null) {
        textToSpeakTextView.setText(currentClaimant.getNextPrompt());
        statusHintTextView.setText(currentClaimant.getStatusHint());
    }
    pushToRecordButton = (Button) findViewById(R.id.pushToRecord);
    pushToRecordButton.setOnTouchListener(this);

}

@Override
public void updateTime(final String time) {

    Log.d("***UPDATE TIME Thread", "Current time:" + time);
    runOnUiThread(new Runnable() {
     public void run() {
     timerTextView.setText(time);
     Log.d("UPDATE TIME Thread", "Current time:"+time);
     Log.d("UPDATE TIME Thread", "Current value:"+timerTextView.getText());
     }
     });

}

@Override
public boolean onTouch(View v, MotionEvent event) {
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        VoiceManager.getInstance().startRecording();
        break;
    case MotionEvent.ACTION_UP:
        Log.d("Push Button Down", "Up Event Fired");
        VoiceManager.getInstance().stop();
        String audioDataBase64 = VoiceManager.getInstance().getAudioDateinBase64Encoding();
        if (screenHeadingText.equals("Verification")) {
            VBSServiceManager.getInstance().processVerification(currentClaimant, audioDataBase64);
        } else {
            VBSServiceManager.getInstance().processEnrollment(currentClaimant, audioDataBase64);
        }
        break;
    }
    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:21:29.727

在 android 中，您不能从另一个线程更新 UI。这是 android 开发中的限制（我认为这是删除不必要的错误的功能）。您可以为此使用 AsyncTask ...

在使用中，您可以在 donInBackground() 中执行长任务，然后可以使用 onProgressUpdate() 更新 UI ...请参阅[此处的 AsyncTask 示例](http://developer.android.com/reference/android/os/AsyncTask.html)

**编辑**

有关更多信息，请参阅[此](https://stackoverflow.com/questions/3745405/threading-ui-updates-in-android)类似问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T17:16:51.273

查看您的日志，我意识到**您几乎每 100 毫秒更新一次 TextView**，这就是它没有显示任何内容的原因。

这就是我模拟您正在做的事情的方式，并且我的 textview 在第 100 次迭代后显示了最终值：-

```
for(int i=0;i<100;i++)
{
    ((TextView) findViewById(R.id.timerTextView)).setText(""
            + System.currentTimeMillis());
    try {
        Thread.sleep(100);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

尝试每秒更新一次 UI，您也可能会占用 CPU 周期。

# bash - grep 并打印回参考

> ID：15067796
> 
> 赞同：4
> 
> 时间：2013-02-25T13:11:52.260
> 
> 标签：bash, shell, grep, iptables

我有这个 iptable 日志：

```
Feb 25 10:32:48 XXX: [414645.555838] FW: DEN TCP IN=eth0 OUT= MAC=XYZ SRC=1.1.1.1 DST=2.2.2.2 LEN=40 TOS=0x00 PREC=0x00 TTL=57 ID=0 DF PROTO=TCP SPT=80 DPT=51814 WINDOW=0 RES=0x00 RST URGP=0 
```

我想 grep 1.1.1.1 和 80（SRC 和 SPT 字段）。我这样做：

```
grep -oP 'SRC=([^ ]+).+SPT=([0-9]+)' /var/log/iptables.log 
```

但它返回：

```
SRC=1.1.1.1 DST=2.2.2.2 LEN=40 TOS=0x00 PREC=0x00 TTL=57 ID=0 DF PROTO=TCP SPT=80 
```

如何仅获得 $1 和 $2 （对匹配值的引用）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T13:47:34.167

您的示例的主要问题是您正在尝试返回分组，这是不可能的 IIUC。解决此问题的一种方法是使用积极的后视（参见 参考资料`man perlre`）：

```
grep -oP '(?<=SRC=|SPT=)[^ ]*' 
```

输出：

```
1.1.1.1
80 
```

这是一个更便携的替代方案：

```
grep -o 'SRC=[^ ]*\|SPT=[^ ]*' | grep -o '[^=]*$' 
```

如果您希望输出在一行上，您应该考虑使用一种工具，即使用*Lev 的*答案。如果您知道输出总是成对出现，您可以将这些行加入`paste`：

```
grep -oP '(?<=SRC=|SPT=)[^ ]*' | paste - - 
```

或与`xargs`：

```
grep -oP '(?<=SRC=|SPT=)[^ ]*' | xargs -n2 
```

或者`sed`：

```
grep -oP '(?<=SRC=|SPT=)[^ ]*' | sed 'N; s/\n/ /' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-25T13:18:48.907

一种`sed`方法：

```
sed -rn 's/.*SRC=([^ ]+).*SPT=([0-9]+).*/\1 \2/p' /var/log/iptables.log 
```

您可以将其通过管道传输`while read src spt`到您的脚本或类似的东西中。现在这当然不是很有效，因为模式中有三颗星，所以如果性能是一个问题，您可以考虑使用诸如`cut`提取某些字段之类的东西：

```
cut -d' ' -f12,21 /var/log/iptables.log 
```

不确定日志格式是否足够一致以使其正常工作。

# python - Blender Python选择同一组内的对象？

> ID：15067804
> 
> 赞同：6
> 
> 时间：2013-02-25T13:12:15.993
> 
> 标签：python, blender

我正在使用 Python 在搅拌机中创建一些形状。我想将这些形状组合在一起并使用以下代码来做到这一点：

```
 import bpy

 bpy.ops.group.create(name= "NewGroup")
 bpy.ops.object.group_link(group="NewGroup")
 For i in range (1,3,1):
    tempobject = bpy.data.objects["Cube" + str(i)]
    bpy.context.scene.objects.active=tempobject
    bpy.ops.object.group_link(group="NewGroup") 
```

当我尝试选择一个组以便将它们加入一个活动对象时：

```
 host_object = bpy.data.objects["Cube1"]
 bpy.context.scene.objects.active=host_object
 bpy.ops.object.select_same_group(group="NewGroup")

 bpy.ops.object.join() # all selected objects join to active object 
```

它不会选择组内的任何对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-17T18:34:01.900

正如评论中提到的@Antoni4040 一样，您有一个大写的“For”应该是“for”。

如果这不是问题，请粘贴错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-03T09:23:32.353

你应该使用

```
bpy.context.scene.objects['objName'].select 
```

打电话之前`select_same_group`。希望能帮助到你。

# oracle - 带日期的 Oracle 查询

> ID：15067807
> 
> 赞同：0
> 
> 时间：2013-02-25T13:12:20.583
> 
> 标签：oracle, date

这个查询：

```
SELECT
Min(DB_SAM.T_CALENDAR."Date")
FROM
DB_SAM.T_CALENDAR
WHERE
DB_SAM.T_CALENDAR."Week" = 8 
```

返回 13-02-18 00:00:00

这个查询：

```
SELECT
Min(DB_SAM.T_CALENDAR."Date")
FROM
DB_SAM.T_CALENDAR
WHERE
DB_SAM.T_CALENDAR."Week" = 9 
```

返回 13-02-25 00:00:00

以下使用前 2 个查询，当然 DB_SAM.T_MELDUNGEN 不为空。那么为什么这会返回 0 行呢？

```
SELECT
...
...
FROM
DB_SAM.T_MELDUNGEN
INNER JOIN DB_SAM.T_ZELLEN ON DB_SAM.T_MELDUNGEN."Ort" = DB_SAM.T_ZELLEN."Betriebsstelle"
WHERE
DB_SAM.T_MELDUNGEN."Stg Beginn" >= (SELECT Min(DB_SAM.T_CALENDAR."Date") FROM DB_SAM.T_CALENDAR WHERE DB_SAM.T_CALENDAR."Week" = 8) AND
DB_SAM.T_MELDUNGEN."Stg Beginn" < (SELECT Min(DB_SAM.T_CALENDAR."Date") FROM DB_SAM.T_CALENDAR WHERE DB_SAM.T_CALENDAR."Week" = 9) 
```

顺便提一句。这些条件有效：

```
WHERE
DB_SAM.T_MELDUNGEN."Stg Beginn" >= TO_DATE('02/18/2013','MM/DD/YYYY') AND
DB_SAM.T_MELDUNGEN."Stg Beginn" < TO_DATE('02/25/2013','MM/DD/YYYY') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:31:09.953

`SELECT to_char(Min(DB_SAM.T_CALENDAR."Date"), 'MM/DD/YYYY') FROM DB_SAM.T_CALENDAR WHERE DB_SAM.T_CALENDAR."Week" = 8`显示年份为 0013。

# mysql - 在一行中从一对多关系中获取所有值

> ID：15067808
> 
> 赞同：2
> 
> 时间：2013-02-25T13:12:20.700
> 
> 标签：mysql, left-join, concatenation, one-to-many

我的数据库中有一对多的关系。 ![在此处输入图像描述](../Images/ebdaecd7ae6b2890ed4014e3f5f030b3.png)

我想获取所有城市，所有的电影院都以 CSV 格式附加在一行中。我试过了：

```
SELECT city.*,CONCAT(cinema_name)
FROM city
LEFT JOIN cinema
ON cinema.city_id=city.city_id
GROUP BY city.city_id 
```

但这只会返回第一个电影院。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T13:13:37.173

使用 GROUP_CONCAT 而不是 CONCAT

```
SELECT
  city.*,
  GROUP_CONCAT(cinema_name) AS `Cinemas`
FROM city
  LEFT JOIN cinema
    ON cinema.city_id = city.city_id
GROUP BY city.city_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:14:52.813

试试这个查询

```
SELECT ct.city_id, GROUP_CONCAT(cinema_name) 
FROM cinema c, city ct
WHERE c.city_id = ct.city_id
Group BY c.city_id; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-19T05:36:41.477

对于在**V5.7**上测试的当前版本的 Mysql，如果您希望将该数据作为 json 对象，您可以试试这个。

```
SELECT
  city.*,
  GROUP_CONCAT(
JSON_OBJECT(
'cinema_name', cinema_name
)) AS `Cinemas`
FROM city
  LEFT JOIN cinema
    ON cinema.city_id = city.city_id
GROUP BY city.city_id 
```

# sql - 创建触发器时出现 Oracle 错误

> ID：15067813
> 
> 赞同：1
> 
> 时间：2013-02-25T13:12:40.287
> 
> 标签：sql, database, oracle

这是我的 SQL 代码：

```
CREATE OR REPLACE TRIGGER Promjenaplacanja
BEFORE UPDATE
ON Placanje
FOR EACH ROW
DECLARE
v_PlacanjeID NUMBER(10,0);
v_Starinacin NVARCHAR2(50);
v_Novinacin NVARCHAR2(50);

BEGIN

BEGIN
  SELECT :OLD.PlacanjeID ,
         :OLD.Nacin_Placanja 

    INTO v_PlacanjeID,
         v_Starinacin
    FROM DUAL ;
  SELECT :NEW.Nacin_Placanja 

    INTO v_Novinacin
    FROM DUAL ;
  INSERT INTO Auditplacanja
    ( PlacanjeID, Starinacin, Novinacin, Datum )
    VALUES ( v_PlacanjeID, v_Starinacin, v_Novinacin, SYSDATE ); 
END;
END; 
```

但是我得到了这两个错误：

错误（16,7）：PL/SQL：忽略 SQL 语句错误（16,19）：PL/SQL：ORA-00942：表或视图不存在

没看懂，谁能帮忙 ：\ 谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:25:58.130

表或视图不存在。您的触发器指向 2 个位置的表格：

1）触发器的创建： *placanje*

2）插入语句：*auditplacanja* （也许是auditplacanje？）。

这两个表是否都存在（在您运行代码的架构中）？

# xpath - Selenium RC xpath 不同于 firefox/xpath 可视化工具？

> ID：15067816
> 
> 赞同：0
> 
> 时间：2013-02-25T13:12:58.083
> 
> 标签：xpath, selenium, rc

我有一些关于 selenium RC xpath 的问题。我已经制作了一些 xpath 字符串来匹配某些字段，而不管 ids （所有都是自动生成的）。

我的 Xpath 将表中的元素与某些条件匹配。这是我的html代码

```
<table style="width:900px;">
    <tbody>
        <tr>
            <td colspan="2">
                <span class="header" id="ctl00_ContentPlaceHolder_ctl07">Nowy wniosek </span>
                <span class="description" id="ctl00_ContentPlaceHolder_ctl08"></span>
                <span></span>
            </td>
        </tr>
        <tr>
            <td width="34%" valign="top" bgcolor="#ffffc7">
                <span>Status wniosku</span>
                <span></span>
            </td>
            <td width="66%" bgcolor="#ffffc7">
                <input type="text" scriptattrib="scriptAttribstring" class="baseCtrl" id="ctl00_ContentPlaceHolder_1020" readonly="readonly" value="Nowy wniosek" name="ctl00$ContentPlaceHolder$1020"/>
                <span> </span>
                <span class="ctrlDescrpt">(Pole nie do edycji)</span>
                <span> </span>
                <span style="display:none;" class="validation" id="ctl00_ContentPlaceHolder_ctl21"></span>
                <span></span>
            </td>
        </tr>
        <tr>
            <td width="34%" valign="top">
                <span>Wykonaj akcję</span>
                <span></span>
            </td>
            <td width="66%">
                <select class="baseCtrl" id="ctl00_ContentPlaceHolder_1021" name="ctl00$ContentPlaceHolder$1021">
                    <option value="save">zapisz</option>
                    <option value="send">wyślij do przełożonego</option>
                    <option value="cancel">anuluj</option>
                </select>
                <span> </span>
                <span style="display:none;" class="validation" id="ctl00_ContentPlaceHolder_ctl32"></span>
                <span></span>
            </td>
        </tr>
        <tr style="display: none;">
            <td width="34%" valign="top" bgcolor="#ffffc7">
                <span>Wykonaj akcję</span>
                <span></span>
            </td>
            <td width="66%" bgcolor="#ffffc7">
                <select class="baseCtrl" id="ctl00_ContentPlaceHolder_1024" name="ctl00$ContentPlaceHolder$1024">
                    <option value="save">zapisz</option>
                    <option value="send2">prześlij dalej(ścieżka oddziały)</option>
                </select>
                <span> </span>
                <span style="display:none;" class="validation" id="ctl00_ContentPlaceHolder_ctl43"></span>
                <span></span>
            </td>
        </tr>
        <tr>
            <td width="34%" valign="top" bgcolor="#ffffc7">
                <span>Uwagi</span>
                <span></span>
            </td>
            <td width="66%" bgcolor="#ffffc7">
                <textarea scriptattrib="scriptAttribstring" class="baseCtrl" id="ctl00_ContentPlaceHolder_1022" readonly="readonly" cols="20" rows="5" name="ctl00$ContentPlaceHolder$1022"></textarea>
                <span> </span>
                <span style="display:none;" class="validation" id="ctl00_ContentPlaceHolder_ctl65"></span>
                <span></span>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <span></span>
            </td>
        </tr>
    </tbody>
</table> 
```

这是我的 Xpath

```
//span[text()='Wykonaj akcję']/parent::*/parent::*[not(contains(@style,'display: none'))]/child::*/following-sibling::*[not(contains(@style,'display: none'))]//select[not(contains(@disabled,'disabled'))] 
```

问题如下。根据记录的人员或背后的某些业务逻辑，表格可见或不可见。我试图让表格的 TR 元素不能包含样式 display: none;。

当我在 firefox 或一些 xpath 可视化工具中测试 xpath 时，一切似乎都很好。

我的 Selenium 代码虽然出于某种原因返回了隐藏元素。（返回最后一个匹配元素，对他来说隐藏的元素是匹配的）。我不知道可能是什么原因。可以再给它一些光吗？

这也是我的硒代码。

```
 var localizator = LocalizatorGenerators.SelectOptionLocator(labelName);
                var id = selenium.GetAttribute(localizator + "@id");
                selenium.SeleniumValidate(value, type, id);
                selenium.Select(string.Format("id={0}", id), value);

 public static string SelectOptionLocator(string labelName)
        {
            var xpath =
                String.Format(
                    "//span[text()='{0}']/parent::*/parent::*[not(contains(@style,'display: none;'))]/child::*/following-sibling::*[not(contains(@style,'display: none;'))]//select[not(contains(@disabled,'disabled'))]", labelName);
            return xpath;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:36:27.910

这是一个非常可怕的 XPath 定位器。您的各种组合`parent::*`和`following-sibling::*`使得很难预测这将匹配什么。但是由于您要识别的是`select id="ctl00_ContentPlaceHolder_1021"`不使用其`id`值的，请尝试以下操作：

```
//tr[not(contains(@style,'display: none'))]/td/[span[text()='Wykonaj akcję']]/td/select[@disabled != 'disabled'] 
```

# php - 如何将文件作为电子邮件附件发送？

> ID：15067826
> 
> 赞同：0
> 
> 时间：2013-02-25T13:13:36.450
> 
> 标签：php, excel, spreadsheet

John McNamara 的电子表格 WriteExce 可以正常下载 excel 文件。

目前使用此功能从mysql导出数据并生成excel。正常工作以执行动作下载，但我想创建动作电子邮件。我已经设置好了所有东西，但我只需要更改动作下载以保存到 tmp，例如

但是我如何生成 Excel tmp 并通过电子邮件发送呢？

```
 <?php
        include("include/conexion.php"); // CONECT TO BBDD
        require_once('include/write_excel/Worksheet.php'); // CLASS EXCEL
        require_once('include/write_excel/Workbook.php'); // CLASS EXCEL
        include_once("include/Classes/class.phpmailer.php"); // CLASS EMAIL

        header("Content-type: application/vnd.ms-excel");
        header("Content-Disposition: inline; filename=$filename" );

        $filename = "Listado.xls";

        // Creating a workbook
        $workbook = new Workbook("-");
        $worksheet1 =& $workbook->add_worksheet('Listado');

        $formato_texto_negrita =& $workbook->add_format();
        $formato_texto_negrita->set_bold(0x2BC);
        $formato_texto_negrita->set_align('left');
        $formato_texto_negrita->set_size(8);

        $formato_texto =& $workbook->add_format();
        $formato_texto->set_align('left');
        $formato_texto->set_size(8);

        $formatot2 =& $workbook->add_format();
        $formatot2->set_align('right');
        $formatot2->set_size(8);

        $formato_numero =& $workbook->add_format();
        $formato_numero->set_align('right');
        $formato_numero->set_num_format('0.000,00;[Red]-0.000,00');
        $formato_numero->set_size(8);

        $i=3;
        $j=0;
        $k=0;
        $opcionListado = $_POST['opcionListado'];

        $worksheet1->set_column($k,$k++,10); // CLAVE
        $worksheet1->set_column($k,$k++,10); // Recepcion
        $worksheet1->set_column($k,$k++,15); // Ubicacion
        // NAME OF COLUMNS…..

        $res = mysql_query($query, $conexion);

        for($l=0;$row=mysql_fetch_array($res);$l++)
        {
        // DATE ROWS…….
        }

        file_put_contents($filename, $workbook->close());
?> 
```

并且电子邮件代码包含在其他 php.ini 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:28:57.320

这篇文章应该可以帮助你：

[http://www.html-form-guide.com/email-form/php-email-form-attachment.html](http://www.html-form-guide.com/email-form/php-email-form-attachment.html)

如果做不到这一点，我建议你只使用[谷歌](https://www.google.co.uk/search?q=attach%20file%20to%20php%20using%20email&oq=attach%20file%20to%20php%20using%20email&aqs=chrome.0.57j0l3j62l2.5317&sourceid=chrome&ie=UTF-8)，因为这个主题已经被多次讨论过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:43:18.990

只需像往常一样将电子表格生成到 tmp 目录。然后我建议你使用 php 邮件库 swift mail。

看看这个例子

[http://swiftmailer.org/docs/messages.html#attaching-dynamic-content](http://swiftmailer.org/docs/messages.html#attaching-dynamic-content)

# c# - 如何让 WPF TextBox 关心小数点？

> ID：15067827
> 
> 赞同：0
> 
> 时间：2013-02-25T13:13:37.140
> 
> 标签：c#, wpf, textbox

所以我有一个`TextBox`只允许数字和小数点。我希望用户只被允许输入 1 个小数点。

以下是`PreviewTextInput`事件触发的代码：（有些代码有点多余，但可以完成工作）

```
 private void PreviewTextInput(object sender, TextCompositionEventArgs e)
    {

        TextBox textBox = (TextBox)sender;

        if (e.Text == ".")
        {

            if (textBox.Text.Contains("."))
            {

                e.Handled = true;
                return;

            }

            else
            {
                //Here I am attempting to add the decimal point myself
                textBox.Text = (textBox.Text + ".");
                e.handled = true;
                return;

            }

        }
        else
        {
            e.Handled = !IsTextAllowed(e.Text);
            return;
        }
    }

    private static bool IsTextAllowed(string text)
    {
        Regex regex = new Regex("[^0-9.-]+"); //regex that matches disallowed text
        return !regex.IsMatch(text);
    } 
```

**问题是**输入的第一个小数点在后面跟着一个数字时才“*有意义”。*因此，如果用户输入`123.`并且您要设置 a`breakpoint`并检查`textBox.text`它的值将是`123`. 我知道这种情况正在发生，因为`textBox`它绑定到 a`Double`所以它试图“聪明”并忘记那些当前“无关紧要”的值（“。”）。

我的代码应该没有任何问题，我只是希望强制`textBox`跳过一些不必要的（？）自动格式化。

*有没有办法让`textBox`“关心”第一个小数点？*

从未回答的[可能重复项。](https://stackoverflow.com/questions/12482240/annoying-auto-formatting-occurring-in-wpf-textbox-databound-to-double-property)

**或者**

*是否有不同的方法来限制小数位数？”（我在这方面做了很多研究，我认为没有其他选择。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:32:04.020

如果只是限制您想要的字符，那么与字符串格式绑定之类的东西可能会满足您的需求

[这](http://www.csharp-examples.net/string-format-double/)是双精度格式的一个很好的例子

这将是在代码中绑定到您的 ViewModel 的示例

```
 <TextBox Text="{Binding LimitedDouble,StringFormat={}{0:00.00}}"></TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T15:30:14.503

```
private void txtDecimal_KeyPress(object sender, KeyPressEventArgs e)
{
    if (!Char.IsDigit(e.KeyChar) && e.KeyChar != '\b' && e.KeyChar!='.')
    {
        e.Handled = true;
    }
    if (e.KeyChar == '.' && txtDecimal.Text.Contains("."))
    {
        e.Handled = true;
    }
} 
```

# javascript - Wordpress 何时将 hide-if-js 类添加到元框

> ID：15067832
> 
> 赞同：10
> 
> 时间：2013-02-25T13:13:49.700
> 
> 标签：javascript, wordpress, meta-boxes

我有 2 个元框添加到“页面”类型。但仅在第一种情况下，Wordpress（单独）将**hide-if-js**类添加到元框容器中。Questin 是 - Wordpress 何时将此**hide-if-js**添加到元框容器 div 中？

第一个元框添加代码 - 这个代码自动获得**hide-if-js**类：

```
add_action( 'add_meta_boxes', 'add_portfolio_template_meta' );
 function add_portfolio_template_meta() {
add_meta_box('projects-details-for-template', 'Portfolio template options:', 'projects_details_for_template_html', 'page', 'side', 'default');

} 
```

第二个元框添加脚本：

```
add_action( 'add_meta_boxes', 'add_contact_template_meta' );
function add_contact_template_meta() {
add_meta_box('contact-details-for-template', 'Contact page details:', 'contact_details_html', 'page', 'side', 'default');

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-19T16:42:54.977

今天刚碰到这个。原来它与顶部的“屏幕选项”部分有关（编辑帖子时后端的右上角，拉开一个新的 div）。

如果在“屏幕选项”中未选中“hide-if-js”类，则当页面加载时，“hide-if-js”类将出现在您的元框上。要删除类/使元框可见，请将其选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T00:03:26.827

将我的 WordPress 更新到 3.9 后，我注意到我无法再在大内容框中输入内容。我还注意到框上方的编辑器菜单不见了。使用 Google Chrome / Inspect Element 我看到一条红色错误消息，上面写着“未捕获的 TypeError”tinymce 正在尝试加载但无法加载。我查看了元素检查器的右侧，发现捕获的 div 具有“ **hide-if-js** ”的样式。开始研究并遇到了这篇文章。

我发现 WordPress 3.9 不再支持 TinyMCE 而是使用 WP-edit。我从未安装过 TinyMCE，但它让我意识到可以在它之上构建另一个插件。我一一停用了我安装的插件，在每个插件后检查是否解决了问题。在我停用第三个插件后，编辑器菜单再次出现，我可以在内容框中输入！（我确实返回并重新激活了 1st 2 插件，因为我知道这些不是问题。）

我希望这会有所帮助。顺便说一句 - 导致问题的插件是 Foter，但我确信还有其他几个插件会导致同样的问题。

# php - 用于处理 MySQL 无限和嵌套查询的 PHP 函数

> ID：15067833
> 
> 赞同：0
> 
> 时间：2013-02-25T13:13:53.970
> 
> 标签：php, mysqli, nested

我的同事要求我制作一个*PHP*函数来插入我们的 Web 应用程序，以处理无限量的嵌套（循环）查询，从而使我们的生活更加轻松，而不必担心丢失当前和/或以前的结果。

这是我几分钟后提出的代码，它似乎工作正常，但我仍然有这些问题：

1.  我是在重新发明[mysqli_prepare](http://php.net/manual/en/mysqli.prepare.php)函数吗？
2.  以这种方式处理这些嵌套查询是否明智？
3.  使用以下方法有什么优点和缺点？

实际功能：

```
function qn($query) {
    global $db;
    $rand_var = 'r' . mktime() . mt_rand();
    $$rand_var = $db->query($query);
    return $$rand_var;
} 
```

并在行动中：

```
if (($db instanceof mysqli) != true) {
   $db = new mysqli(DB_ADDRESS, DB_USER, DB_PASS, DB_NAME);
}

$a = qn('SELECT DISTINCT ***');

while ($row_a = $a->fetch_assoc()) {
    // do some stuff
    $b = qn('SELECT ***' . $row_a['foo']);
    while ($row_b = $b->fetch_assoc()) {
        $c = qn('SELECT COUNT(id)' . $row_b['bar']);
        // keep going ...
    }
} 
```

**注意：** SQL 查询是示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:17:57.950

你去吧：[SafeMysql](https://github.com/colshrapnel/safemysql)是你正在寻找的东西，还有很多很多！

```
if (!($db instanceof safemysql)) {
   $db = new safemysql(...);
}

$a = $db->getCol('SELECT DISTINCT ***');
foreach ($a as $foo) {
    // do some stuff
    $b = $db->getAll('SELECT ***', $foo);
    foreach ($b as $row_b) {
        $c = $db->getOne(('SELECT COUNT(id)', $row_b['bar']);
         // keep going ...
    }
} 
```

回答你的问题

> 我是在重新发明 mysqli_prepare 函数吗？

绝对没有。
你什么都不准备。

> 以这种方式处理这些嵌套查询是否明智？

不，碰撞的可能性非常高。至少使用 microtime 而不是 mktime。

> 使用以下方法有什么优点和缺点？

有很多缺点

*   没有错误处理
*   不支持占位符
*   乱码
*   整个`qn()`功能没用。您可以单独使用 $db->query() 。

此外， **Till Helge Helwig**是绝对正确的：所有嵌套查询都可以（并且应该）用带有连接（和分组）的单个查询替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:29:35.507

以下代码：

```
$rand_var = 'r' . mktime() . mt_rand();
$$rand_var = $db->query($query);
return $$rand_var; 
```

可以简化为

```
return $db->query($query); 
```

因为它只是在返回之前将查询结果存储在具有唯一名称的局部变量中。这没有多大意义。

# android - 在 Android 上缓存 SVG 图像和内存使用情况

> ID：15067834
> 
> 赞同：7
> 
> 时间：2013-02-25T13:13:54.797
> 
> 标签：android, image, memory-management, svg

我正在使用**SVG Android** ( [http://code.google.com/p/svg-android/](http://code.google.com/p/svg-android/) )。我在我的应用程序的几个活动中使用相同的 svg 文件。建立一个缓存来存储和检索图像是个好主意吗？

我正在使用**SparseArray**以这种方式存储**PictureDrawable**（从 SVG 生成）：

```
SVG svg = SVGParser.getSVGFromResource(resources, resourceId);
PictureDrawable pictureDrawable = svg.createPictureDrawable();
cache.put(resourceId, pictureDrawable); 
```

管理 PictureDrawable 对象时是否需要注意内存使用情况？我确认缓存中的最大项目数将小于 50。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T13:20:38.270

是的，这是一个非常好的主意，只有在第一次运行时，App 才会从 svg 为特定设备屏幕尺寸生成图像，并将它们存储在缓存中，然后一直使用这些图像。节省大量 CPU，更快的 UI 加载。

但是，我建议保存名称包含您的应用程序版本的缓存文件。如果您发布包含一些不同 svg 图像的更新（例如版本 2），则将使用具有不同名称的新文件而不是旧文件。

通常最多可以使用 10Mb `Context.getCacheDir()`，系统会在存储空间不足时清理此文件夹。

此外，作为一个很好的措施，每次初始化`Cache`类时，您都可以进行一些清理，即删除一些旧版本或不需要的项目。

这是我主要用来从 App 缓存目录中保存和获取 Serializable 对象的类：

```
public class ObjectCacheFile<T> {
    private final File mFile;

    public ObjectCacheFile(Context context, String name) {
        mFile = new File(context.getCacheDir(), name);
    }

    public File getFile() {
        return mFile;
    }

    public void put(T o) {

        try {

            if (!mFile.exists()) {
                mFile.createNewFile();
            }

            FileOutputStream fos = new FileOutputStream(mFile);

            ObjectOutputStream objOut = new ObjectOutputStream(fos);

            try {
                objOut.writeObject(o);
            } finally {
                objOut.close();
            }
        } catch (IOException e) {
            Log.e(App.getLogTag(this), "error saving cache file", e);
        }
    }

    @SuppressWarnings("unchecked")
    public T get() {

        if (!mFile.exists()) {
            return null;
        }

        try {
            ObjectInputStream objIn = new ObjectInputStream(new FileInputStream(mFile));
            try {
                return (T) objIn.readObject();
            } finally {
                objIn.close();
            }
        } catch (IOException e) {
            Log.e(App.getLogTag(this), "error reading cache file", e);
        } catch (ClassNotFoundException e1) {
            Log.e(App.getLogTag(this), "cache file corrupted, deleting", e1);
            mFile.delete();
        }

        return null;
    }

} 
```

# ios - NSFetchedResultsController 似乎正在将空对象插入数组？

> ID：15067842
> 
> 赞同：0
> 
> 时间：2013-02-25T13:14:09.370
> 
> 标签：ios, objective-c, core-data, nsfetchedresultscontroller, nsmanagedobjectcontext

我不确定出了什么问题。我的数据模型中有一个实体，称为 Quote，其中大约 3,000 个存储在 .sqlite 中。我只是想通过 a 将这些实体的属性之一放入 a 的单元格`UITableView`中`NSFetchedResultsController`。我得到的错误是在这行代码上：

`NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest: fetchRequest managedObjectContext: [self managedObjectContext] sectionNameKeyPath: nil cacheName: @""];`

似乎问题在于它试图将空对象加载到数组中。我猜这意味着它没有在 .sqlite 文件中找到对象。有可能是这种情况吗？如果是这样，我该如何开始尝试追查为什么会这样？

这是一些代码，如果您需要更多代码，请询问：

**来自 AppDelegate.m：**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UINavigationController *nav = (UINavigationController *) self.window.rootViewController;
    FQQuotesTableViewController *quotesTableViewController = (FQQuotesTableViewController *) [[nav viewControllers] objectAtIndex: 0];
    quotesTableViewController.managedObjectContext = self.managedObjectContext;
    quotesTableViewController.test = @"Hello!";
    return YES;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex: 0];
    NSString *storePath = [documentsPath stringByAppendingPathComponent: @"Quotes.sqlite"];
    NSURL *storeURL = [NSURL fileURLWithPath: storePath];

    if (![[NSFileManager defaultManager] fileExistsAtPath:[storeURL path]]) {
        NSURL *preloadURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"Quotes" ofType:@"sqlite"]];
        NSError* err = nil;

        if (![[NSFileManager defaultManager] copyItemAtURL:preloadURL toURL:storeURL error:&err]) {
            NSLog(@"Oops, could copy preloaded data");
        }
    }

    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![_persistentStoreCoordinator addPersistentStoreWithType: NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return _persistentStoreCoordinator;
} 
```

**从我的 ViewController.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSError *error;
    if (![self.fetchedResultsController performFetch: &error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();    
    }
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return [[_fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    id <NSFetchedResultsSectionInfo> secInfo = [[_fetchedResultsController sections] objectAtIndex: section];
    return [secInfo numberOfObjects];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    NSManagedObject *blah = [self.fetchedResultsController objectAtIndexPath: indexPath];
    cell.textLabel.text = [blah valueForKey: @"quote"];

    return cell;
}

#pragma mark - Fetched Results Controller

- (NSFetchedResultsController *) fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName: @"Quote" inManagedObjectContext: [self managedObjectContext]];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:nil ascending: YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    [fetchRequest setFetchBatchSize: 50];

    NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest: fetchRequest managedObjectContext: [self managedObjectContext] sectionNameKeyPath: nil cacheName: @""];
    self.fetchedResultsController = theFetchedResultsController;
    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:26:35.447

您是否尝试为 设置键（模型的属性名称）`sortDescriptor`？我认为这是问题所在。

```
NSSortDescriptor *sortDescriptor =
  [[NSSortDescriptor alloc] initWithKey:nil  // set key for the descriptor
                              ascending:YES]; 
```

# dll - 在 dll 中使用 GetObject() 和 vb6.0

> ID：15067844
> 
> 赞同：2
> 
> 时间：2013-02-25T13:14:12.120
> 
> 标签：dll, vb6

我正在使用一种方法将所有 USB 外部插入到 PC 中。我使用在 vb6 中编写的函数并创建了一个 dll。现在我想在 c++ 程序中使用 dll，但我有一个关于 getObject() 函数的错误。我可以在用 vb6 编写的 dll 中使用 getObject() 吗？这是函数的代码

```
Public Function GetUsbDeviceList() As String
    Dim ComputerName As String
    Dim wmiServices As Object
    Dim wmiDiskPartitions As Object
    Dim wmiDiskPartition As Object
    Dim wmiDiskDrives As Object
    Dim wmiDiskDrive As Object
    Dim wmiLogicalDisks As Object
    Dim wmiLogicalDisk As Object
    Dim Vol As Object
    Dim strFound As String
    Dim Query As String

    ComputerName = "."
    Set wmiServices = GetObject("winmgmts:{impersonationLevel=Impersonate}!//" & ComputerName)

    strFound = ""
    ' Get physical disk drive
    Set wmiDiskDrives = wmiServices.ExecQuery("SELECT * FROM Win32_DiskDrive where InterfaceType = 'USB'")
    For Each wmiDiskDrive In wmiDiskDrives
        'MsgBox ("Disk drive Caption: " & wmiDiskDrive.Caption & vbNewLine & "DeviceID: " & " (" & wmiDiskDrive.DeviceID & ")")
        'Use the disk drive device id to find associated partition
        Query = "ASSOCIATORS OF {Win32_DiskDrive.DeviceID='" & wmiDiskDrive.DeviceID & "'} WHERE AssocClass = Win32_DiskDriveToDiskPartition"
        Set wmiDiskPartitions = wmiServices.ExecQuery(Query)

        For Each wmiDiskPartition In wmiDiskPartitions
           'Use partition device id to find logical disk
           Set wmiLogicalDisks = wmiServices.ExecQuery("ASSOCIATORS OF {Win32_DiskPartition.DeviceID='" & wmiDiskPartition.DeviceID & "'} WHERE AssocClass = Win32_LogicalDiskToPartition")
            For Each wmiLogicalDisk In wmiLogicalDisks
                'MsgBox ("Drive letter associated with disk drive = " & wmiDiskDrive.Caption & wmiDiskDrive.DeviceID & vbNewLine & " Partition = " & wmiDiskPartition.DeviceID & vbNewLine & " is " & wmiLogicalDisk.DeviceID)
                 Dim DatiUnita As Scripting.FileSystemObject
                 Set DatiUnita = GetObject(, "Scripting.FileSystemObject")
                Set Vol = DatiUnita.GetDrive(DatiUnita.GetDriveName(wmiLogicalDisk.DeviceID))
                strFound = strFound + wmiLogicalDisk.DeviceID + "," + Vol.volumename + "," + wmiDiskDrive.PNPDeviceID + ";"
            Next
        Next
    Next

    GetUsbDeviceList = strFound
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:25:50.537

改变

```
Set DatiUnita = GetObject(, "Scripting.FileSystemObject") 
```

至

```
Set DatiUnita = CreateObject("Scripting.FileSystemObject") 
```

（或者，您可以使用

```
Set DatiUnita = GetObject("", "Scripting.FileSystemObject") 
```

即一个空字符串，不要与空字符串混淆`Variant`。）

# android - WebView 和 native 之间通信的另一种方式

> ID：15067853
> 
> 赞同：3
> 
> 时间：2013-02-25T13:14:44.583
> 
> 标签：android, android-webview

我`WebView`在本机应用程序中使用了很多 JavaScript。如果 JS 端想调用原生函数，使用`JavaScriptInterface`. 但是，如果 native 想要调用 JS 函数，就不是那么容易了。到目前为止，我已经尝试了两种解决方案：

*   使用 URL调用`loadUrl`方法`javascript:something()`- 不可接受，因为当用户在键盘上键入`WebView`内容时，函数执行后将其隐藏
*   `String`每 x 秒（由对象提供）向本机端询问函数并调用`eval()`结果 - 有时在设置间隔 1 秒后，我在 50-60 秒后收到这些请求！

我想知道是否还有其他方法可以完成这种通信模型。假设在 app 中创建本地`Socket`// `HTTP`something-else 服务器并为其授予访问权限`WebView`。我正在寻找如何（如果可能的话）做到这一点的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-01T07:46:01.050

我有以下代码，它使用 java 反射从 Java 调用 JavaScript。它避免了以下 loadUrl 错误： 1\. 当您将焦点放在输入中时，loadUrl 可能会隐藏键盘。2\. loadUrl 不能调用太频繁。

希望这会有所帮助：

```
public class AdvancedWebView extends WebView {
    private static final int EXECUTE_JS = 194;
    Method sendMessageMethod;
    Object webViewCore;
    boolean initFailed = false;;
    InputMethodManager imm;

    public AdvancedWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
        imm = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
        this.getSettings().setJavaScriptEnabled(true);
        this.initReflection();
    }

    @SuppressWarnings("rawtypes")
    private void initReflection() {
        Object webViewObject = this;
        Class webViewClass = WebView.class;
        try {
            Field f = webViewClass.getDeclaredField("mProvider");
            f.setAccessible(true);
            webViewObject = f.get(this);
            webViewClass = webViewObject.getClass();
        } catch (Throwable e) {
            // mProvider is only required on newer Android releases.
        }       

        try {
            Field f = webViewClass.getDeclaredField("mWebViewCore");
            f.setAccessible(true);
            webViewCore = f.get(webViewObject);
            if (webViewCore != null) {
                sendMessageMethod = webViewCore.getClass().getDeclaredMethod("sendMessage", Message.class);
                sendMessageMethod.setAccessible(true);      
                System.out.println("sendMessageMethod-----"+sendMessageMethod);
            }
            hasIntercepted = true;
        } catch (Throwable e) {
            hasIntercepted = false;
            //Log.e(LOG_TAG, "PrivateApiBridgeMode failed to find the expected APIs.", e);
        }finally{
            if(sendMessageMethod == null)
            {
                hasIntercepted = false;
            }
        }
    }

    private void loadJs(String url) {
        if (sendMessageMethod == null && !initFailed) {
            initReflection();
        }
        // webViewCore is lazily initialized, and so may not be available right away.
        if (sendMessageMethod != null) {
            //String js = popAndEncodeAsJs();
            Message execJsMessage = Message.obtain(null, EXECUTE_JS, url);
            try {
                sendMessageMethod.invoke(webViewCore, execJsMessage);
            } catch (Throwable e) {
                //Log.e(LOG_TAG, "Reflection message bridge failed.", e);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T02:57:12.853

我不知道如何使备用通信模型正常工作，但我想我已经找到了 loadUrl-hides-the-keyboard 问题的解决方法：[https](https://stackoverflow.com/a/18776064/513038) ://stackoverflow.com/a/18776064/513038 。这有帮助吗？

# erp - 哪个文件准备样式和脚本 [ERPNEXT]

> ID：15067856
> 
> 赞同：0
> 
> 时间：2013-02-25T13:14:49.617
> 
> 标签：erp

我有 ERPNEXT 的虚拟机，我正在尝试更改小代码以满足我的需要和要求。

所以我正在尝试更改 UI 和 javascript。

例如：让我们从 Apps/Home/Desktop 中获取 Desktop 文件夹

有 3 个文件，desktop.html、desktop.css 和 desktop.js

我想知道，哪个文件负责获取 desktop.css 和 desktop.js 并将它们转换为内部 javascript 和内部 css

这样我就可以进行调整了。

注意：如果我想更改外观和感觉，我知道我可以在 desktop.css 和 desktop.js 中编写代码，但是因为我有兴趣知道哪个文件负责转换，以便我可以调整它模块。

等待您的好评。

温暖的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:18:39.000

查看：

[https://github.com/webnotes/wnframework/blob/master/public/js/wn/views/pageview.js](https://github.com/webnotes/wnframework/blob/master/public/js/wn/views/pageview.js)

show 方法创建新的 wn.views.Page(name)

它的init方法使用wn.dom.eval和wn.dom.set_style来设置js和css

仅供参考：[https ://github.com/webnotes/wnframework/blob/master/public/js/wn/dom.js](https://github.com/webnotes/wnframework/blob/master/public/js/wn/dom.js)

# c# - 动态用户控件为空，但在 page_init 期间无法创建它们

> ID：15067857
> 
> 赞同：0
> 
> 时间：2013-02-25T13:14:50.620
> 
> 标签：c#, asp.net

我有一个基于 winforms 的网站。

该站点有一个包含转发器的页面。

转发器包含许多项目，每个项目都包含用户控件的多个实例。

转发器中每个项目的实例数各不相同。

通常，如果我正在动态创建用户控件，我会在 page_init 方法中这样做，以便在回发等期间可以使用其所有数据。

但是，在创建中继器项之前，我不知道需要多少个此用户控件的实例。

那么，我该如何解决这个问题呢？我需要在 page_init 中创建这些用户控件以使它们可用，但在绑定之前我不知道会有多少。

我能看到的唯一方法是双重处理数据，并在页面初始化中创建一个 Dictionary<,List>，然后在 DataItem_Bind 和 DataItem_Create 方法中使用它。但这似乎效率低下。

有没有更优雅的方式来管理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:54:49.537

jbl有它。必须回答我自己的问题才能删除对我的个人资料的评论，抱歉。

# c - gtk_entry_get_text 不工作

> ID：15067859
> 
> 赞同：1
> 
> 时间：2013-02-25T13:14:53.087
> 
> 标签：c, windows, gtk

我在 c 中使用 GTK 2.2。我可以从其中一个条目中获取文本并使用类型转换将其转换为整数，但它不适用于第二个条目。由于某种原因，我设置为从第二个条目获取文本的变量保持为 0。这是我的代码。button2_clicked 部分不起作用，但问题也可能出在 button2 g_signal 连接中。

```
#include <stdlib.h>
#include <gtk/gtk.h>

int prod,prod_amt,amt,amt_holder,tot_amt;

static void button3_clicked(GtkWidget *widget,gpointer window){
    GtkWidget *dialog;

    dialog = gtk_message_dialog_new (GTK_WINDOW (window), GTK_DIALOG_MODAL,GTK_MESSAGE_INFO, GTK_BUTTONS_CLOSE, "The Total amount is %d",tot_amt);
    gtk_window_set_position (GTK_WINDOW (dialog), GTK_WIN_POS_CENTER);
    gtk_dialog_run (GTK_DIALOG (dialog));
    gtk_widget_destroy (dialog);
}

static void button2_clicked(GtkWidget *widget,gpointer data){
    amt = (int)gtk_entry_get_text(GTK_ENTRY(data));
    prod_amt = prod;
    int products[10];
    products[0] = 15;
    products[1] = 200;
    products[2] = 55;
    products[3] = 30000;
    products[4] = 15000;
    products[5] = 20000;
    products[6] = 20;
    products[7] = 30;
    products[8] = 2500;
    products[9] = 1000;
    if(amt>0 && amt<11)
    amt_holder = products[amt-1];
    tot_amt += amt_holder;
    g_print("%d",tot_amt);
    gtk_entry_set_text(GTK_ENTRY(data),"");
}

static void prod_list (GtkWidget *widget, GtkWidget *window)
{
    GtkWidget *dialog;
    dialog = gtk_message_dialog_new (GTK_WINDOW (window), GTK_DIALOG_MODAL,     GTK_MESSAGE_INFO, GTK_BUTTONS_CLOSE, "Kurkure 15,Chocolate Pack 200\n Dove Shampoo 55     Laptop 30,000\n Television 15,000 Netbook 20,000\n Oreo 20 Dark Fantasy 30\n Toaster 2500 Clothes 1000");
    gtk_window_set_position (GTK_WINDOW (dialog), GTK_WIN_POS_CENTER);
    gtk_dialog_run (GTK_DIALOG (dialog));
    gtk_widget_destroy (dialog);
}

static void button_clicked(GtkWidget *widget,gpointer data){
    prod = (int)gtk_entry_get_text(GTK_ENTRY(data));
    g_print(prod);
    gtk_entry_set_text(GTK_ENTRY(data),"");
}

static void clear_clicked(GtkWidget *widget,gpointer data){
    gtk_entry_set_text(GTK_ENTRY(data),"");
}

int main(int argc,char* argv) {
    GtkWidget *window,*button,*entry,*table,*dialog,*clearb;
    GtkWidget *entry2,*button2,*listofprod,*button3;
    gtk_init(&argc,&argv);
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    float product[5],no_of_products,amount,total_amount=0,product_holder,amount_holder=0;
    button = gtk_button_new_with_mnemonic("Enter number of products");
    entry = gtk_entry_new();
    button2 = gtk_button_new_with_mnemonic("Enter Product Numbers");
    entry2 = gtk_entry_new();
    table = gtk_table_new(3,3,0);
    clearb = gtk_button_new_with_label("Clear");
    button3 = gtk_button_new_with_mnemonic("Total amount");
    listofprod = gtk_button_new_with_mnemonic("List of Products");
    g_signal_connect(window,"delete-event",G_CALLBACK(gtk_main_quit),NULL);
    g_signal_connect(button,"clicked",G_CALLBACK(button_clicked),entry);
    g_signal_connect(entry,"activate",G_CALLBACK(button_clicked),entry);
    g_signal_connect(listofprod,"clicked",G_CALLBACK(prod_list),window);
    g_signal_connect(clearb,"clicked",G_CALLBACK(clear_clicked),(gpointer)entry);
    g_signal_connect(button2,"clicked",G_CALLBACK(button2_clicked),(gpointer)entry2);
    g_signal_connect(button3,"clicked",G_CALLBACK(button3_clicked),(gpointer)window);
    g_signal_connect(entry2,"activate",G_CALLBACK(button2_clicked),(gpointer)entry2);
    gtk_table_attach(GTK_TABLE(table),button,1,2,0,1,GTK_FILL,GTK_FILL,0,0);
    gtk_table_attach(GTK_TABLE(table),entry,0,1,0,1,GTK_FILL,GTK_FILL,0,0);
    gtk_table_attach(GTK_TABLE(table),entry2,0,1,1,2,GTK_FILL,GTK_FILL,0,0);
    gtk_table_attach(GTK_TABLE(table),button2,1,2,1,2,GTK_FILL,GTK_FILL,0,0);
    gtk_table_attach(GTK_TABLE(table),clearb,2,3,0,1,GTK_FILL,GTK_FILL,0,0);
    gtk_table_attach(GTK_TABLE(table),listofprod,2,3,1,2,GTK_FILL,GTK_FILL,0,0);
    gtk_table_attach(GTK_TABLE(table),button3,0,1,2,3,GTK_FILL,GTK_FILL,0,0);
    gtk_container_add(GTK_CONTAINER(window),table);
    gtk_container_set_border_width(GTK_CONTAINER(window),100);
    gtk_widget_show_all(window);
    gtk_widget_set_size_request(window,310,310);
    gtk_main();
    return 0;
} 
```

我已经多次检查过这段代码。它出什么问题了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T13:25:17.527

您永远不能将字符串类型转换为整数。这不是 C 中“类型转换”的意思。

您必须使用实际代码进行转换。例如，查找`strtoul()`函数。

# awk - 基于多行列的 AWK 格式数据

> ID：15067860
> 
> 赞同：0
> 
> 时间：2013-02-25T13:14:57.037
> 
> 标签：awk, rows

见下文我有我想要格式化的这些数据，以便我可以将这些数据插入到 mysql 表中。

```
 fdsfsfrerwrwrwr_Core             55000:10011608      ipv4        Vl1162
  xcvbdtykgjfhffghrfhfhffghCore    55000:10014478      ipv4        Vl1447
  675436346ore                     55000:1004868       ipv4
  545_Core                         55000:1004128       ipv4
  345235345                        55000:2728          ipv4
  534534e                          55000:1002108       ipv4        Vl2105
  C8567566756Core                  55000:10021038      ipv4        Vl2103
  C546346453554_Core               55000:2105898       ipv4        Vl664
                                                                   Vl896
  ewttt_WAN_Core                   55000:1007967       ipv4        Vl2552
  tetrewCore                       55000:1001708       ipv4        Vl905
  gsdgdsfgore                      55000:100106        ipv4
  65434533_Core                    55000:1009418       ipv4        Vl941
                                                                   Vl1028
  I2222222-11                      55000:10008         ipv4
  I666r555-12                      55000:20002         ipv4        Vl749
                                                                   Vl874
                                                                   Vl894
                                                                   Vl942
                                                                   Vl1172
                                                                   Vl1439
                                                                   Vl2553
  345345353Core                    55000:1004068       ipv4        Vl50
  5345345Core                      55000:1004498       ipv4        Vl617
  S534534                          55000:1002798       ipv4        Vl779
  534535335Core                    55000:1004278       ipv4
  test                             55000:500500        ipv4 
```

我想使用 AWK 或任何其他工具来产生类似于以下的结果，以便我可以将此数据插入 mysql 数据库。我使用了以下 AWK 命令。猫样本.data | awk '{打印 $1","$2","$3","$4}'

```
 TEST1_Core,990010:10011608,ipv4,Vl1162
AA2_Autism_Core,990010:10014478,ipv4,Vl1447
6753312_Core,990010:1004868,ipv4,
542343423,990010:1004128,ipv4,
Bgdfdfgdf,990010:2728,ipv4,
gfgCore,990010:1002108,ipv4,Vl2105
fgdfgfgdfg_Core,990010:10021038,ipv4,Vl2103
42342342342342Core,990010:2105898,ipv4,Vl664 
```

请注意，最后一列有多行关联到一条记录。

```
 ghfghfhdfCore                    990010:1009418       ipv4        Vl941
                                                                   Vl1028
  hfghfghdf11                      990010:10008         ipv4
  yreyryer-12                      990010:20002         ipv4        Vl749
                                                                   Vl874
                                                                   Vl894
                                                                   Vl942
                                                                   Vl1172
                                                                   Vl1439
                                                                   Vl2553 
```

如何将最后一列转换为多行，以便我可以跟踪结果。

```
 ghfghfhdfCore,990010:1009418,ipv4,Vl941 Vl1028
hfghfghdf11,990010:10008,ipv4,
yreyryer-12,990010:20002,ipv4,Vl749 Vl874 Vl894 Vl942 Vl1172 Vl1439 Vl2553 
```

我相信一定有人能够帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:51:50.493

在看到后续行有多少字段之前，不要打印行尾换行符：

```
awk -v OFS="," '{$1=$1;printf "%s%s",(NF>1?n:" "),$0;n=ORS}END{print ""}' file 
```

例如：

```
$ cat file
  ghfghfhdfCore                    990010:1009418       ipv4        Vl941
                                                                   Vl1028
  hfghfghdf11                      990010:10008         ipv4
  yreyryer-12                      990010:20002         ipv4        Vl749
                                                                   Vl874
                                                                   Vl894
                                                                   Vl942
                                                                   Vl1172
                                                                   Vl1439
                                                                   Vl2553

$ awk -v OFS="," '{$1=$1;printf "%s%s",(NF>1?n:" "),$0;n=ORS}END{print ""}' file
ghfghfhdfCore,990010:1009418,ipv4,Vl941 Vl1028
hfghfghdf11,990010:10008,ipv4
yreyryer-12,990010:20002,ipv4,Vl749 Vl874 Vl894 Vl942 Vl1172 Vl1439 Vl2553 
```

我刚刚注意到你可以有一些只有 3 个字段的行，在这种情况下需要在末尾添加一个逗号：

```
$ awk -v OFS="," 'NF==3{sub(/$/,OFS)} {$1=$1;printf "%s%s",(NF>1?n:" "),$0;n=ORS} END{print ""}' file
ghfghfhdfCore,990010:1009418,ipv4,Vl941 Vl1028
hfghfghdf11,990010:10008,ipv4,
yreyryer-12,990010:20002,ipv4,Vl749 Vl874 Vl894 Vl942 Vl1172 Vl1439 Vl2553 
```

如果您的字段实际上是制表符分隔的，或者第三个字段后有空格，则还有另一种解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:34:06.720

尝试这样做：

```
awk '
    BEGIN{OFMT="INSERT INTO `table` \
    VALUES(\n\t`%s`,\n\t`%s`,\n\t`%s`,\n\t`%s`\n);\n"
    }
    NF==3{printf OFMT, $1, $2, $3, $4v}
    NF==4{if (length(v)){printf OFMT, $1, $2, $3, $4v;v=""}
        else{printf OFMT, $1, $2, $3, $4}
    }
    NF==1{v=v","$1}
' file | mysql 
```

## 没有[mysql的输出](/questions/tagged/mysql "显示标记为“mysql”的问题")

```
 INSERT INTO `table`     VALUES(
        `TEST1_Core`,
        `990010:10011608`,
        `ipv4`,
        `Vl1162`
);
INSERT INTO `table`     VALUES(
        `AA2_Autism_Core`,
        `990010:10014478`,
        `ipv4`,
        `Vl1447`
);
INSERT INTO `table`     VALUES(
        `6753312_Core`,
        `990010:1004868`,
        `ipv4`,
        ``
);
INSERT INTO `table`     VALUES(
        `542343423`,
        `990010:1004128`,
        `ipv4`,
        ``
);
INSERT INTO `table`     VALUES(
        `Bgdfdfgdf`,
        `990010:2728`,
        `ipv4`,
        ``
);
INSERT INTO `table`     VALUES(
        `gfgCore`,
        `990010:1002108`,
        `ipv4`,
        `Vl2105`
);
INSERT INTO `table`     VALUES(
        `fgdfgfgdfg_Core`,
        `990010:10021038`,
        `ipv4`,
        `Vl2103`
);
INSERT INTO `table`     VALUES(
        `42342342342342Core`,
        `990010:2105898`,
        `ipv4`,
        `Vl664`
);
INSERT INTO `table`     VALUES(
        `24234234N_Core`,
        `990010:1007967`,
        `ipv4`,
        `Vl2552,Vl896`
);
INSERT INTO `table`     VALUES(
        `C86765Core`,
        `990010:1001708`,
        `ipv4`,
        `Vl905`
);
INSERT INTO `table`     VALUES(
        `Dhyhyh_Core`,
        `990010:100106`,
        `ipv4`,
        ``
);
INSERT INTO `table`     VALUES(
        `ghfghfhdfCore`,
        `990010:1009418`,
        `ipv4`,
        `Vl941`
);
INSERT INTO `table`     VALUES(
        `hfghfghdf11`,
        `990010:10008`,
        `ipv4`,
        `,Vl1028`
);
INSERT INTO `table`     VALUES(
        `yreyryer-12`,
        `990010:20002`,
        `ipv4`,
        `Vl749,Vl1028`
);
INSERT INTO `table`     VALUES(
        `42342342_Core`,
        `990010:1004068`,
        `ipv4`,
        `Vl50,Vl874,Vl894,Vl942,Vl1172,Vl1439,Vl2553`
);
INSERT INTO `table`     VALUES(
        `gdfgdg_Core`,
        `990010:1004498`,
        `ipv4`,
        `Vl617`
);
INSERT INTO `table`     VALUES(
        `Spgdfggdf`,
        `990010:1002798`,
        `ipv4`,
        `Vl779`
);
INSERT INTO `table`     VALUES(
        `gdgdgdgdgCore`,
        `990010:1004278`,
        `ipv4`,
        ``
);
INSERT INTO `table`     VALUES(
        `test`,
        `990010:500500`,
        `ipv4`,
        ``
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:56:13.360

我建议您遵循通用规则“使用只执行一项任务的程序，但要做好”。因此，让我们从使您的数据保持一致开始：

```
sed -ne '1h;1!H;${;g;s/\n\s\+\(\S\+\)/,\1/g;p;}' 
```

这是众所周知的单线车削`sed`多线。

现在只有您的幻想可能会阻止您以各种方式操作数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:38:34.783

其他 awk 方法，更多的是“古怪的方式”：

```
'NF>1{print line;line=$1 "," $2 "," $3 "," $4} NF==1{line=line " " $1}' 
```

# c# - 如何使用 CancellationToken 属性？

> ID：15067865
> 
> 赞同：141
> 
> 时间：2013-02-25T13:15:14.007
> 
> 标签：c#, multithreading, concurrency, cancellation, cancellation-token

与前面[的 RulyCanceler 类](http://www.albahari.com/threading/part3.aspx#_Safe_Cancellation)的代码相比，我想使用 `CancellationTokenSource`.

如何使用[Cancellation Tokens](http://www.albahari.com/threading/part3.aspx#_Cancellation_Tokens)中提到的它，即不抛出/捕获异常？我可以使用该`IsCancellationRequested`物业吗？

我试图这样使用它：

```
cancelToken.ThrowIfCancellationRequested(); 
```

和

```
try
{
  new Thread(() => Work(cancelSource.Token)).Start();
}
catch (OperationCanceledException)
{
  Console.WriteLine("Canceled!");
} 
```

但这`cancelToken.ThrowIfCancellationRequested();`在方法中给出了运行时错误`Work(CancellationToken cancelToken)`：

```
System.OperationCanceledException was unhandled
  Message=The operation was canceled.
  Source=mscorlib
  StackTrace:
       at System.Threading.CancellationToken.ThrowIfCancellationRequested()
       at _7CancellationTokens.Token.Work(CancellationToken cancelToken) in C:\xxx\Token.cs:line 33
       at _7CancellationTokens.Token.<>c__DisplayClass1.<Main>b__0() in C:\xxx\Token.cs:line 22
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

我成功运行的代码在新线程中捕获了 OperationCanceledException：

```
using System;
using System.Threading;
namespace _7CancellationTokens
{
  internal class Token
  {
    private static void Main()
    {
      var cancelSource = new CancellationTokenSource();
      new Thread(() =>
      {
         try
         {
           Work(cancelSource.Token); //).Start();
         }
         catch (OperationCanceledException)
         {
            Console.WriteLine("Canceled!");
         }
         }).Start();

      Thread.Sleep(1000);
      cancelSource.Cancel(); // Safely cancel worker.
      Console.ReadLine();
    }
    private static void Work(CancellationToken cancelToken)
    {
      while (true)
      {
        Console.Write("345");
        cancelToken.ThrowIfCancellationRequested();
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2013-02-25T13:20:50.550

您可以按如下方式实现您的工作方法：

```
private static void Work(CancellationToken cancelToken)
{
    while (true)
    {
        if(cancelToken.IsCancellationRequested)
        {
            return;
        }
        Console.Write("345");
    }
} 
```

就是这样。您总是需要自己处理取消 - 在适当的时候退出方法（以便您的工作和数据处于一致状态）

**更新：**我不喜欢写`while (!cancelToken.IsCancellationRequested)`，因为通常很少有退出点可以在循环体中安全地停止执行，并且循环通常有一些逻辑条件退出（迭代集合中的所有项目等）。所以我认为最好不要混合这些条件，因为它们有不同的意图。

**关于避免的注意事项`CancellationToken.ThrowIfCancellationRequested()`：**

[Eamon Nerbonne](https://stackoverflow.com/users/42921/eamon-nerbonne)的[评论](https://stackoverflow.com/a/7343338/2483271)：

> ...正如这个答案所说，`ThrowIfCancellationRequested`用一堆检查退出优雅地替换。`IsCancellationRequested`但这不仅仅是一个实现细节；这会影响可观察行为：任务将不再以取消状态结束，而是以`RanToCompletion`. 这不仅会影响显式状态检查，还会更微妙地影响与 eg 的任务链接`ContinueWith`，具体取决于所`TaskContinuationOptions`使用的。我会说避免`ThrowIfCancellationRequested`是危险的建议。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-07-24T01:37:09.230

您可以使用取消令牌创建任务，当您应用转到后台时，您可以取消此令牌。

您可以在 PCL [https://developer.xamarin.com/guides/xamarin-forms/application-fundamentals/app-lifecycle中执行此操作](https://developer.xamarin.com/guides/xamarin-forms/application-fundamentals/app-lifecycle)

```
var cancelToken = new CancellationTokenSource();
Task.Factory.StartNew(async () => {
    await Task.Delay(10000);
    // call web API
}, cancelToken.Token);

//this stops the Task:
cancelToken.Cancel(false); 
```

花药解决方案是 Xamarin.Forms 中的用户计时器，当应用程序转到后台时停止计时器 [https://xamarinhelp.com/xamarin-forms-timer/](https://xamarinhelp.com/xamarin-forms-timer/)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-02-20T07:05:14.070

您必须将 传递`CancellationToken`给任务，该任务将定期监视令牌以查看是否请求取消。

```
// CancellationTokenSource provides the token and have authority to cancel the token
CancellationTokenSource cancellationTokenSource = new CancellationTokenSource();
CancellationToken token = cancellationTokenSource.Token;  

// Task need to be cancelled with CancellationToken 
Task task = Task.Run(async () => {     
  while(!token.IsCancellationRequested) {
      Console.Write("*");         
      await Task.Delay(1000);
  }
}, token);

Console.WriteLine("Press enter to stop the task"); 
Console.ReadLine(); 
cancellationTokenSource.Cancel(); 
```

在这种情况下，操作将在请求取消时结束，并且`Task`将具有一个`RanToCompletion`状态。如果您想确认**您的任务已被取消**，则必须使用`ThrowIfCancellationRequested`抛出`OperationCanceledException`异常。

```
Task task = Task.Run(async () =>             
{                 
    while (!token.IsCancellationRequested) {
         Console.Write("*");                      
         await Task.Delay(1000);                
    }           
    token.ThrowIfCancellationRequested();               
}, token)
.ContinueWith(t =>
 {
      t.Exception?.Handle(e => true);
      Console.WriteLine("You have canceled the task");
 },TaskContinuationOptions.OnlyOnCanceled);  

Console.WriteLine("Press enter to stop the task");                 
Console.ReadLine();                 
cancellationTokenSource.Cancel();                 
task.Wait(); 
```

希望这有助于更好地理解。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-06-24T08:57:52.130

您**可以**在不处理异常的情况下使用`ThrowIfCancellationRequested`！

的使用`ThrowIfCancellationRequested`意味着在 a **`Task`**（不是 a `Thread`）中使用。在 a 中使用时`Task`，您不必自己处理异常（并获得 Unhandled Exception 错误）。它将导致离开`Task`，并且该`Task.IsCancelled`属性将为 True。不需要异常处理。

在您的具体情况下，将 更改`Thread`为`Task`.

```
Task t = null;
try
{
    t = Task.Run(() => Work(cancelSource.Token), cancelSource.Token);
}

if (t.IsCancelled)
{
    Console.WriteLine("Canceled!");
} 
```

# asp.net - 将调用重定向到不同的 Web 应用程序

> ID：15067866
> 
> 赞同：2
> 
> 时间：2013-02-25T13:15:16.140
> 
> 标签：asp.net, asp.net-mvc, url-rewriting, routing, httpmodule

我有以下场景要实现：

*   `/HR/Employee/Get`主网站上的用户请求( `localhost:80`)
*   `HR`是托管在 IIS 中不同端口（例如`localhost:8081`）上的应用程序的名称，或者它可以部署在网络上的另一台服务器上。
*   URL被拦截并映射到`https://localhost:8081/HR/Employee/Get`（我设法让它工作）
*   现在我需要将调用转移/重定向到目标 URL，然后将结果返回给客户端（在本例中为浏览器）。

我尝试使用`Server.TransferRequest`，但它仅在我转移到同一域内的路由时才有效。有什么方法可以让我在不必向目标 URL 发出另一个 HTTP 请求的情况下完成这项工作？我只是希望端口 80 上的站点充当反向代理或类似的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:10:31.243

尝试 RedirectPermanent，这将执行[301 重定向](http://en.wikipedia.org/wiki/HTTP_301)

```
public ActionResult Get()
{
  return RedirectPermanent("https://localhost:8081/HR/Employee/Get");
} 
```

您还可以使用 RedirectToActionPermanent 和 RedirectToRoutePermanent

# c++ - 在非 OS Arm 板上使用“fopen”

> ID：15067871
> 
> 赞同：2
> 
> 时间：2013-02-25T13:15:26.820
> 
> 标签：c++, embedded, arm

我正在开发不支持操作系统的 Arm 板。我已经在台式计算机上测试了我的 c++ 代码。它工作正常。现在我必须转储使用 arm-elf-g++ 交叉编译代码后生成的 bin 文件。我的代码正在使用 fopen 命令打开一个文件以读取其内容，但是由于没有操作系统，所以没有文件系统，这对主板有用吗？

谢谢vid09

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:46:33.650

你为什么要打开文件来阅读它——那是什么数据？

您可以通过其他方式将其提供给您的嵌入式代码。例如

*   将其编译为常量
*   通过某个端口（可能是串行端口，或以太网 - 尽管后者是一项没有操作系统的大工作！）并使用主机发送数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T20:59:59.787

你的目标库很可能有一个 fopen() 存根；您需要用工作版本替换的无效的空函数定义。这称为*重定向*。如果不重新定位，您的代码可能会很好地编译和链接，但 fopen() 调用和任何其他标准 I/O 调用（例如 printf() ）将无济于事。

重定向的方式取决于编译器的标准 C 库。在 Keil/RealView 中，您可以修改提供的 retarget.c 示例之一并将其与您的项目链接。如果您使用 Newlib（通常与裸机 GNU 工具链一起使用），则需要修改或重新实现*系统调用*存根。其他工具链也有类似的方法。

然而，这都是相当学术的，因为要打开一个文件，你必须有一个文件系统，这反过来又要求你有某种形式的媒体，上面有可以作为文件读取的数据。所有这些都可以在裸机系统上完成，但它涉及额外的硬件和软件。例如，参见[FatFs 。](http://elm-chan.org/fsw/ff/00index_e.html)例如，通过 SPI 接口添加 SD 或 MMC 卡在硬件方面相对简单。您当然可以在片上 Flash 上实现 RAM 磁盘或文件系统，但您仍然必须首先考虑如何将数据获取到此类文件系统中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T13:59:47.727

在裸机上使用文件 I/O 的一种常见方式是用于调试。在这种情况下，它通常使用[semihosting](http://doc.ironwoodlabs.com/arm-arm-none-eabi/html/getting-started/chap-cs3.html)来实现。

> CS3 旨在支持没有操作系统的板。为了允许类似的功能`open`和`write`在没有操作系统支持的情况下工作，与调试器一起支持*半主机功能。*
> 
> 启用半主机后，这些系统调用将转换为主机系统上的等效函数调用。您只能在连接到调试器时使用这些函数调用；如果您在与调试器断开连接时尝试使用它们，您将获得硬件异常。

显然，这在独立环境中不起作用。

但是，您可以选择自己实施必要的调用。这取决于您使用的 C 运行时库；这是关于如何为 Newlib 执行此操作的教程：[http ://www.embedded.com/electronics-blogs/industry-comment/4023922/Embedding-GNU-Newlib-Part-2](http://www.embedded.com/electronics-blogs/industry-comment/4023922/Embedding-GNU-Newlib-Part-2)

# scala - 在 Scala 2.10 中获取 java.lang.Class[T] 的 Scala 类型

> ID：15067872
> 
> 赞同：3
> 
> 时间：2013-02-25T13:15:27.733
> 
> 标签：scala, reflection, scala-java-interop

我正在查看[scala 反射概述](http://docs.scala-lang.org/overviews/reflection/overview.html)，我想知道是否可以`java.lang.Class<T>`在 Scala 2.10 中使用 a 作为类型。

```
import scala.reflect.runtime.{ universe => ru }

class Reflector {
  def getType: ru.Type = {
    ru.typeOf[java.lang.String]
  }
  def getType[T](clazz: Class[T]): ru.Type = {
    //is it possible to implement me?
  }
} 
```

是否可以在不更改其签名的情况下实现该`parse[T](clazz: Class[T]): ru.Type`方法以便能够从 java 调用它`new Reflector().parse(String.class)`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T13:48:10.533

您可以像这样实现您的方法：

```
def getType[T](clazz: Class[T])(implicit runtimeMirror: ru.Mirror) =
  runtimeMirror.classSymbol(clazz).toType 
```

然后这样称呼它：

```
implicit val mirror = ru.runtimeMirror(getClass.getClassLoader)
getType(classOf[String]) 
```

您可能对[smirror 库](https://github.com/fwbrasil/smirror)感兴趣，因为它包含类似的方法

```
def sClassOf[T](clazz: Class[T])(implicit runtimeMirror: Mirror): SClass[T] 
```

where`SClass`包含一个`typ`属性。

* * *

## 编辑

您可能希望将方法更改为此（这将保持相同的签名）

```
def getType[T](clazz: Class[T]):ru.Type = {
  val runtimeMirror =  ru.runtimeMirror(clazz.getClassLoader)
  runtimeMirror.classSymbol(clazz).toType
} 
```

# c# - 创建可以在 C# 中反序列化的 JSON 对象

> ID：15067875
> 
> 赞同：3
> 
> 时间：2013-02-25T13:15:43.423
> 
> 标签：c#, javascript, jquery, json, wcf

我正在尝试创建一个可以作为 C# 对象读取的 JSON 对象，当我尝试通过 AJAX 发送它时，我不断收到 400 个错误请求错误。

我的JavaScript如下：

```
$.ajax({
type: "POST",
url: "LeagueService.svc/Fixtures",
    data: JSON.stringify(fixture),
    dataType: "json",
    contentType: "application/json",
    success: function (json, status, req) {
        $successMessage = '<div class="hero-unit"><h2>Success</h2><p>The fixture has been added to the database.</p></div>';

        $('#dialog').html($successMessage).fadeOut(500, function (e) {
            $(this).dialog("close");
        });

     },
     error: function (req, status, error) {
       alert('Error: ' + req.responseText);
     }
}); 
```

我的 Fixture 对象看起来像：

```
function Fixture() { }

Fixture.prototype =
{
    ID: "",
    HomeTeam: "",
    AwayTeam: "",
    Date: "",

    toJSON: function () { return { "fixture": {"ID" : this.ID, "HomeTeam" : this.HomeTeam, "AwayTeam" : this.AwayTeam, "Date" : this.Date} }; }
}; 
```

这种方法在我编写的其他函数中运行得非常好，所以我不确定现在出了什么问题。

我的 C# 方法和接口： 接口：

```
[OperationContract]
[WebInvoke(Method = "POST",
    BodyStyle = WebMessageBodyStyle.Wrapped,
    RequestFormat = WebMessageFormat.Json,
    ResponseFormat = WebMessageFormat.Json,
    UriTemplate = "/Fixtures")]
void AddFixture(Fixture fixture); 
```

和方法：

```
public void AddFixture(Fixture fixture)
{
    using (SqlConnection conn = new SqlConnection(Properties.Settings.Default.DBConnect))
    {
        try
        {
            conn.Open();
            string query = "INSERT INTO tbFixtures (HomeTeam, AwayTeam, Date) VALUES(@HT, @AT, @Date);";
            using (SqlCommand cmd = new SqlCommand(query, conn))
            {
                cmd.Parameters.AddWithValue("@HT", fixture.HomeTeam.ID);
                cmd.Parameters.AddWithValue("@AT", fixture.AwayTeam.ID);
                cmd.Parameters.AddWithValue("@Date", fixture.Date);

                cmd.ExecuteNonQuery();
            }
        }
        catch (Exception) { }
        finally
        {
            conn.Close();
        }
    }
} 
```

和 C# 类：

```
[DataContract(Name="Fixture", Namespace="")]
public class Fixture
{
    [DataMember(Name = "ID", Order = 1)]
    public int ID { get; set; }

    [DataMember(Name = "HomeTeam", Order = 2)]
    public Team HomeTeam { get; set; }

    [DataMember(Name = "AwayTeam", Order = 3)]
    public Team AwayTeam { get; set; }

    [DataMember(Name = "Date", Order = 4)]
    public DateTime Date { get; set; }
}

[DataContract(Name = "Team", Namespace = "")]
public class Team
{
    [DataMember(Name = "ID", Order = 1)]
    public int ID { get; set; }

    [DataMember(Name = "Name", Order = 2)]
    public string Name { get; set; }

    [DataMember(Name = "Wins", Order = 3)]
    public int Wins { get; set; }

    [DataMember(Name = "Losses", Order = 4)]
    public int Losses { get; set; }

    [DataMember(Name = "Draws", Order = 5)]
    public int Draws { get; set; }

    [DataMember(Name = "GoalsConceded", Order = 6)]
    public int GoalsConceded { get; set; }

    [DataMember(Name = "GoalsScored", Order = 7)]
    public int GoalsScored { get; set; }

    [DataMember(Name = "Manager", Order = 8)]
    public Manager Manager { get; set; }
}

[DataContract(Name = "Manager", Namespace = "")]
public class Manager
{
    [DataMember(Name = "ID", Order = 1)]
    public int ID { get; set; }
    [DataMember(Name = "Name", Order = 2)]
    public string Name { get; set; }
} 
```

Manager 和 Team 类的编写方式与 JavaScript 中的 Fixture 类完全相同。

该对象序列化为我认为正确的 JSON，但如果我遇到这些错误，显然不是。生成的 JSON 如下：

```
{ "fixture": {
    "ID":0,
    "HomeTeam":{
        "ID":1,
        "Name":"Rhondda St FC",
        "Wins":21,
        "Losses":2,
        "Draws":4,
        "GoalsConceded":20,
        "GoalsScored":36,
        "Manager": {
            "ID":1,
            "Name":"Ron Burgundy"
        }
    },
    "AwayTeam": {
        "ID":2,
        "Name":"Mt Pleasant United FC",
        "Wins":18,
        "Losses":5,
        "Draws":3,
        "GoalsConceded":22,
        "GoalsScored":28,
        "Manager": { 
            "ID":2,
            "Name":"Brian Fantana"
        }
    },
    "Date":"02/19/2013 12:00pm"
}} 
```

如果有人能对此有所了解，将不胜感激。谢谢！

编辑：完整的错误（没有CSS）是：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Request Error</title>
   </head>
  <body>
    <div id="content">
      <p class="heading1">Request Error</p>
      <p xmlns="">The server encountered an error processing the request. Please see the <a rel="help-page" href="http://localhost:55310/LeagueService.svc/help">service help page</a> for constructing valid requests to the service.</p>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:35:34.820

我认为这是因为它不喜欢您的日期格式 - 即“02/19/2013 12:00pm”。尝试将 C# Fixture Data Contract 中的 Date 类型更改为字符串或编辑 JS Fixture 原型的 toJSON 方法以返回格式为“2013-02-19Z”的字符串。

# html - 在 HTML 中对齐文章

> ID：15067878
> 
> 赞同：0
> 
> 时间：2013-02-25T13:15:50.597
> 
> 标签：html, css, alignment

好的，所以基本上我一直在搞乱 HTML，我一直在尝试用图像滑块模仿这些网站，然后在底部显示文本（不重要），我遇到了一些我无法正确对齐的东西。我已经尝试将其列为列表并使用各种 CSS 方法。到目前为止，这是我的代码（忽略其中的文字）

HTML：

```
<html>

<head>
    <title>Test</title>
    <link href="style/style.css" rel="stylesheet" type="text/css" />
</head>

<body>

<section id="main">

      <article class="signup">
            <hgroup>
                <h1>Sign Up Now!</h1>
                <h2>Stay Updated with the latest news</h2>
            </hgroup>
            <p>Sign up now and be emailed upon a new tutorial and recieve our weekly newsletter! Not only that, but you also
            get to comment and do other cool stuff!</p>
            <footer>
                <a href="#">Sign Up</a>
            </footer>
       </article>
        <article class="tuts">
            <hgroup>
                <h1>Follow Some Tutorials</h1>
                <h2>Learn Some!</h2>
            </hgroup>
            <p>This site offers many tutorials from Programmming to Physics to Chemistry to Networking to basically anything, and
            you guys also get to vote for some new tutorials!</p>
            <footer>
                <a href="#">Tutorials</a>
            </footer>
       </article>
  </section>

</body> 
```

和CSS：

```
#main article{
    float: left;
    display: block;
    padding: 0; 
    padding-left: 20px;

}

#main{
    display: block;
    float: left;
    width: 100%;
    vertical-align:middle;
    clear: both;
}
.signup{
    width: 33%;
    height: auto;
    margin-right: 66%;
    padding-left: 10px;
    text-align: left;
    border-left: 1px solid #ccc;
    width: 33%;
    display: block;
}
.tuts{
    width: 33%;
    height: auto;
    margin-left: 33%;
    margin-right: 33%;
    text-align: left;
    border-left: 1px solid #ccc;
    width: 33%;
    display: block;
} 
```

由于似乎不清楚，我要求基本上对齐文章，以便在提供的代码的教程部分上方没有填充/边距。所以基本上类似于 navmenu，列表对齐（我已经使用 CSS 代码完成了此操作，但由于某种原因它不起作用）。因此，如果不清楚，基本上只是将两篇文章对齐，使它们并排接触，在任何一个顶部或任何一个下方都没有边距。只是垂直对齐。

对不起，我真的不知道如何解释它，但我希望我提供的应该足够了。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:38:25.603

要让它们并排“浮动”，只需`margin`从s 中删除`article`s。

[http://jsfiddle.net/ZjLtV/1/](http://jsfiddle.net/ZjLtV/1/)

```
.signup{
    width: 33%;
    height: auto;
    /*margin-right: 66%;*/
    padding-left: 10px;
    text-align: left;
    border-left: 1px solid #ccc;
    width: 33%;
    display: block;
}
.tuts{
    width: 33%;
    height: auto;
    /*margin-left: 33%;
    margin-right: 33%;*/
    text-align: left;
    border-left: 1px solid #ccc;
    width: 33%;
    display: block;
} 
```

# sql - SQLite 连接命令 4 个表

> ID：15067882
> 
> 赞同：0
> 
> 时间：2013-02-25T13:15:58.353
> 
> 标签：sql, database, sqlite, join

我是 sql 的小菜鸟，我需要一些帮助。我有 3-4 个表，我想创建一个 sqlite 命令来返回一些行。表格如下。

**表：餐厅**

```
| Name | menuID | REFERENCES [Menu]([menuID])| 
```

**表：菜单**

```
| MenuID | Name | 
```

**表：成分**

```
| IngredientID | Name | 
```

**表：Food_Incl_ingredient**

```
| FoodIncIngredientID | FoodID REFERENCES [Food][FoodID] | IngredientID REFERENCES [Ingredient]([IngredientID])| 
```

**表：食物**

```
| FoodID | Name | Type | MenuID REFERENCES [Menu][MenuID]| 
```

如果他们没有我要说的成分，我想查询以返回餐厅名称、食物名称和食物类型。谢谢你。

**餐桌餐厅：**

```
| Name     | MenuId |
  Goodys        2
  Koumbaris     1 
```

**表菜单：**

```
| MenuID |     Name     |
    1      koumbarisMenu
    2      goodysMenu 
```

**餐桌食物：**

```
| FoodID |     Name      |  Type  | MenuID |
   29     Chef's Salad    Starter     2
   31     Mama's Salad    Starter     2
   30     Ceasar's Salad  Starter     2 
```

表 Food_Incl_ingredient：

```
| FoodInclIngredientID | FoodID | IngredientID |
          1               29           1
          6               31           1
          8               30           1 
```

**餐桌成分：**

```
| IngredientID |  Name  |
    1         Cereals
    2         Shellfish 
```

**SQL查询：**

```
SELECT Restaurant.Name, Food.Name, Food.Type
FROM Restaurant
INNER JOIN Menu ON Restaurant.menuID = Menu.MenuID  
INNER JOIN Food ON Menu.MenuID = Food.MenuID  
INNER JOIN Food_Incl_ingredient ON Food.FoodID = Food_Incl_ingredient.FoodID  
INNER JOIN Ingredient ON Food_Incl_ingredient.FoodInclIngredientID = Ingredient.IngredientID  
WHERE Ingredient.Name == 'Cereals' 
```

**预期成绩：**

```
| Name |      Name      |  Type  |
 Goodys  Chef's Salad     Starter
 Goodys  Mama's Salad     Starter
 Goodys  Ceasar's Salad   Starter 
```

我得到的唯一结果是第一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:21:57.687

问题出在哪里？只需加入您需要的所有表格，然后说`WHERE Ingredient.Name != 'meat'`。

```
SELECT Restaurant.Name, Food.Name, Food.Type
FROM Restaurant
  JOIN Menu ON Restaurant.menuID = Menu.MenuID
  JOIN Food ON Menu.MenuID = Food.MenuID
  JOIN Food_Incl_ingredient ON Food.FoodID = Food_Incl_ingredient.FoodIncIngredientID
  JOIN Ingredient ON Food_Incl_ingredient.FoodIncIngredientID = Ingredient.Ingredient.ID
WHERE Ingredient.Name != 'meat' 
```

我希望我了解您的帖子中的表名是什么以及主键是什么；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:12:22.333

`...if they don't have the ingredient i will say`

这是一个非常基本的结构，可让您编写查询来说明*餐厅是否需要为其菜单购买食材*。

您通常会构建一些东西，以便餐厅可以有多个菜单，例如早餐、午餐、晚餐，也可能是餐饮或派对。

注意最后的 LEFT JOIN 和 COALESCE 的使用。

```
Restaurant
id
restaurantname

Menu
id
menuname   e.g. Breakfast, Lunch, Dinner, Catering, Party, Special Cultural Holiday

Dish
id
dishname   

Ingredient
id
ingredientname 
```

--一道菜有一种或多种成分

```
Dish_Ingredients
dishid
ingredientid 
```

-- 菜单有一道或多道菜

```
MenuDish
menuid
dishid 
```

-- 一家餐厅有一个或多个菜单

```
RestaurantMenu
restaurantid
menuid 
```

-- 一家餐馆保留一份原料清单

```
RestaurantIngredients
restaurantid
ingredientid
quantityOnHand 
```

--left join 将导致当菜调用库存中没有记录的成分时返回 NULL 值；因此 COALESCE()

```
 select restaurantname, menuname, dishname, ingredientname, quantityOnHand
    from restaurant R 
    inner join restaurantmenu RM on R.id = RM.restaurantid
    inner join menu M on RM.menuid = M.id
    inner join menudish MD on MD.menuid = M.id
    inner join dish D on MD.dishid = D.id
    inner join dishingredient DI on DI.dishid = D.id
    inner join ingredients I on DI.ingredientid  = I.id

    LEFT JOIN

    restaurantingredients RI  on RI.ingredientid = I.id and RI.restaurantid = R.id   
    where Coalesce(quantityOnHand, 'none') as CurrentInventory 
```

# java - 无法从 String 转换为 byte[]

> ID：15067883
> 
> 赞同：2
> 
> 时间：2013-02-25T13:15:59.063
> 
> 标签：java, string, bytearray, bufferedreader, valueconverter

```
public static Runnable reader() throws IOException {
    Log.e("Communication", "reader");
    din = new DataInputStream(sock.getInputStream());
    brdr = new BufferedReader(new InputStreamReader(din), 300);
    boolean done = false;
    while (!done) {
        try {
            char[] buffer = new char[200];
            int anzahlZeichen = brdr.read(buffer, 0, 200);
            String nachricht = new String(buffer, 0, anzahlZeichen);
            byte[] in = nachricht.getBytes("ISO-8859-1");
            for (int counter = 0; counter < nachricht.length(); counter++) {
                System.out.println(in);
            }
            if (nachricht != null)
                answer();
            System.out.println(nachricht);

        } catch (IOException ioe) {
            done = true;
        }
    }

    return null;
} 
```

我想将字符串转换`nachricht`为字节 [] `in`，但我不明白。有人可以帮忙吗？我只收到数字，没有单词或字母。也欢迎另一种方法。我得到的`System.out.println(nachricht)`只有七次，`[B@41c04778`但我应该得到`01 02 03 04 05 06 07`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:17:25.027

你的问题是线`System.out.println(in)`

它应该是`System.out.println(in[counter]);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T13:21:11.680

这

```
[B@41c04778 
```

表示您正在打印一个字节数组（**[ ）（** **B**）。

Java 数组没有有用的`toString()`实现。以上内容有助于理解，因为您将来也会这样做。其他原始类型存在明显的助记符。

# python - 如何计算 HTTP 调用的亚马逊签名

> ID：15067886
> 
> 赞同：0
> 
> 时间：2013-02-25T13:16:02.570
> 
> 标签：python, amazon-web-services, signature

我想集成来自 Amazon Elastic Transcoder 的新服务。由于我的应用程序在 python 2.4 上运行，因此无法使用 boto。

所以我正在写直接的http调用。我遇到的问题是它在我发布请求时告诉我这一点，但适用于获取请求：

> 我们计算的请求签名与您提供的签名不匹配。检查您的 AWS 秘密访问密钥和签名方法。有关详细信息，请参阅服务文档。

这是代码：

```
import time
import hmac
import hashlib
import urlparse
import requests
import json

proxy = { 
              "http"  : "http://10.254.252.100:3128", 
              "https" : "http://10.254.252.100:3128", 
            }

class AWSSignerV4(object):
    '''
    AWS V4 signature class.
    '''

    def __init__(self, access_key, key, http_verb, uri, headers, payload='', service=None, region=None):
        '''
        Instantiates a AWS V4 request signer (HMAC-256).

        :param access_key: AWS access key.
        :param key: AWS access secret key.
        :param http_verb: Request HTTP verb (e.g., GET or POST)
        :param uri: Request URL (http://<aws-service>.<aws-region>.amazonaws.com/[something]
        :param headers: dict with the headers used on the request. This dictionary will be updated with the authentication headers.
        :param payload: Optional payload for PUT or POST requests.
        :param service: Optional service name. By default it will be derived from the uri parameter.
        :param region: Optional AWS datacentre region. By default it will be derived from the uri parameter.
        '''
        self._key = key
        self._headers = headers
        self._http_verb = http_verb
        self._access_key = access_key
        self._payload_hash = hashlib.sha256(payload).hexdigest().lower()

        parsed_url = urlparse.urlparse(uri)
        expanded_netloc = parsed_url.netloc.split('.')

        if service is None:
            service = expanded_netloc[0]

        if region is None:
            region = expanded_netloc[1]

        self._service = service
        self._region = region

        if 'x-amz-date' not in headers:
            headers['x-amz-date'] = self.generate_request_date()

        self._timestamp = headers['x-amz-date']
        headers['x-amz-credential'] = self.credential_scope

        self._path = parsed_url.path
        self._query_string = self._canonicalise_querystring(parsed_url.query.strip())
        self._cheaders, self._signed_headers = self._canonicalise_headers(self._headers, parsed_url.netloc)
        self._headers['Authorization'] = self.authorization_header

    def __call__(self):
        '''
        This method (that makes an instance of this class a callable object) will return the updated header dictionary, including
        the AWS authorization headers.
        '''
        return self._headers

    #############################################
    # Instance properties
    @property
    def authorization_header(self):
        return 'AWS4-HMAC-SHA256 Credential={}/{}, SignedHeaders={}, Signature={}'.format(self._access_key, self.credential_scope,
                                                                                          self._signed_headers, self.request_signature)

    @property
    def request_signature(self):
        return hmac.new(self.signature_key, self.string_to_sign, hashlib.sha256).hexdigest()

    @property
    def canonical_request_hash(self):
        request = '{self._http_verb}\n{self._path}\n{self._query_string}\n{self._cheaders}\n{self._signed_headers}\n{self._payload_hash}'.format(**locals())
        return hashlib.sha256(request).hexdigest().lower()

    @property
    def string_to_sign(self):
        return 'AWS4-HMAC-SHA256\n{}\n{}\n{}'.format(self._timestamp, self.credential_scope, self.canonical_request_hash)

    @property
    def credential_scope(self):
        request_date = self._timestamp[:8]
        return '{}/{}/{}/aws4_request'.format(request_date, self._region, self._service)

    @property
    def signature_key(self):
        sign = lambda k, m: hmac.new(k, m.encode('utf-8'), hashlib.sha256).digest()

        k_date = sign(('AWS4' + self._key).encode('utf-8'), self._timestamp[:8])
        k_region = sign(k_date, self._region)
        k_service = sign(k_region, self._service)
        return sign(k_service, 'aws4_request')

    #########################################
    # Class methods
    @staticmethod
    def generate_request_date():
        return time.strftime('%Y%m%dT%H%M%SZ', time.gmtime())

    @staticmethod
    def _canonicalise_querystring(query):
        assert(query == '')  # TODO proper query string support will be added if required!
        return ''

    @staticmethod
    def _canonicalise_headers(headers, host):
        canonical_headers = {}
        canonical_headers_str = ''

        for key, value in headers.iteritems():
            canonical_headers[key.lower()] = value.strip()  # change to regexp to remove spaces not within "

        if 'host' not in canonical_headers:
            canonical_headers['host'] = host

        for key, value in sorted(canonical_headers.iteritems()):
            canonical_headers_str += '{}:{}\n'.format(key, value)

        return (canonical_headers_str, ';'.join(sorted(canonical_headers.keys())))

# Sample code
if __name__ == '__main__':
    headers = {}

#    uri = 'https://elastictranscoder.us-east-1.amazonaws.com/2012-09-25/pipelines/1360339173389-562f0b'
    uri = 'https://elastictranscoder.us-east-1.amazonaws.com/2012-09-25/pipelines/'
#    uri = 'https://elastictranscoder.us-east-1.amazonaws.com/2012-09-25/jobs/1360339319640-ef1c5b'
#    uri = 'https://elastictranscoder.us-east-1.amazonaws.com/2012-09-25/jobs/'
    test_obj = AWSSignerV4('acess key', 'private key', 'POST', uri, headers)

    headers = test_obj()
    payload = {'Name': 'Testweb',
               'InputBucket':'testjd5',
               'OutputBucket':'testfinals',
               'Role':'arn:aws:iam::789823056103:role/Elastic_Transcoder_Default_Role',
               'Notifications':{'Progressing': '', 'Completed': '', 'Warning': '', 'Error': ''}
               }
#    payload = {'Input': {"Key":"9761.webm",
#                  "FrameRate":"auto",
#                  "Resolution":"auto",
#                  "AspectRatio":"auto",
#                  "Interlaced":"auto",
#                  "Container":"webm"},
#               'Output':{"Key":"test.mp4",
#                  "ThumbnailPattern":"",
#                  "Rotate":"0",
#                  "PresetId":"1351620000000-100020"},
#               'PipelineId':'1360339173389-562f0b'
#               }
#    headers['Content-Length']= '%s'%(value)
#    print uri
#    for key, value in headers.iteritems():
#            call_header['%s'%(key)]= '%s'%(value)

#    print headers
    print requests.post(uri, headers=headers, data=json.dumps(payload), proxies=proxy).text
#    print requests.get(uri, headers=headers,  proxies=proxy).text 
```

你能看看并告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:32:16.857

因为我对 AWS sqs api 和请求登录 python 3 感到非常沮丧，所以我决定在 github 上创建一个项目。我刚刚推动了这个项目，所以它处于非常早期的阶段，但我很快就会添加更多功能。好消息是它已经具备您所需要的：AWS 版本 4 签名算法：[https ://github.com/rcosnita/aws-tests](https://github.com/rcosnita/aws-tests)

看看： - [https://github.com/rcosnita/aws-tests/blob/master/aws/sqs/tests/itest_sqs_client.py](https://github.com/rcosnita/aws-tests/blob/master/aws/sqs/tests/itest_sqs_client.py)

这应该让您开始使用 aws 请求签名。

祝你好运，如果它对你有帮助，请告诉我。

# paypal - PayFlow pro 测试信用交易（退款）

> ID：15067888
> 
> 赞同：1
> 
> 时间：2013-02-25T13:16:19.183
> 
> 标签：paypal, payflowpro

我正在尝试在测试模式下退款（pilot-payflowpro.paypal.com）（我的货币是英镑仅供参考）

据我从文档中可以看出，我正确使用了所有内容：[https://www.x.com/sites/default/files/payflowgateway_guide.pdf](https://www.x.com/sites/default/files/payflowgateway_guide.pdf) “提交信用交易” 通过 ORIGID 等和 AMT，我得到了成功响应。

当我登录[https://manager.paypal.com](https://manager.paypal.com)并检查是否退还了正确的金额时，它总是记录 1GBP

即使我忽略了 AMT，它也只会记录 1GBP，但如果我进行第二次退款并忽略 AMT，它会尝试退还原始金额（因为 1GBP 已经退还，所以现在不再是金额了）并且它给出了 117 错误代码。

我想知道这是否仅用于记录此 1GBP 而不是我指定的数量的测试模式？我什至使用 manager.paypal.com 本身中的 ORIGID 进行了手动退款（在测试交易中），它向我显示了一个正确金额的成功屏幕，但在再次搜索交易时，它显示为 1GBP。

我无法在文档或在线找到这种行为。有人有这方面的信息吗？

我唯一的其他选择是进行实时交易并退款，但测试肯定需要表现相同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T15:10:48.487

我刚刚解决了同样的问题，目前，这似乎是文档中未指定的次要过度站点/错误。最初的问题是我没有通过 PayFlow 管理器指定沙箱电子邮件地址。

您可以通过登录经理帐户，单击顶部的服务设置，然后单击设置选项来找到沙盒电子邮件地址。您将在下面的第三部分中找到沙盒电子邮件地址。[这可以是任何地址，但您可能希望通过http://developer.paypal.com](http://developer.paypal.com)设置开发者帐户。希望这可以帮助某人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:12:03.290

嗯 - 我刚刚在测试模式下使用 GBP 测试了全部和部分退款，它们对我来说按预期工作（没有 1GBP 问题）

您能否创建一个一次性测试帐户（[此处为第 I 部分](https://ppmts.custhelp.com/app/answers/detail/a_id/929/)）——如果您遇到同样的问题，请记录您的完整 NVP 请求字符串以进行销售和退款并更新您的问题？

# php - extjs 4：通过 PHP 脚本使用 MYSQL db 填充组合框

> ID：15067889
> 
> 赞同：0
> 
> 时间：2013-02-25T13:16:24.597
> 
> 标签：php, mysql, extjs, combobox

您好，我正在尝试使用来自 MYSQL 数据库的数据填充组合框。使用带有 MVC 架构的 Extjs 4。

这是我认为的组合框配置：

```
 ...
         {
            xtype: 'combobox',
            id: 'cmbMetric',
            name: 'metr',
            mode: 'queryMode',
            querymode : 'lcoal',
            fieldLabel: 'Metric',
            store: 'MetricsData',
            editable: false,
            valign : 'middle',
            margin : 15

        }
        .... 
```

我的商店：

```
Ext.define('Metrics.store.MetricsData', {
extend: 'Ext.data.Store',
model: 'Metrics.model.MetricsData',
autoLoad: true,
proxy : {
    type : 'ajax',
    actionMethods : 'POST',
    api : {
    read : 'testmysql.php'
    },
    reader: {
        type: 'json',
        successProperty: 'success',
        messageProperty: 'message',
        root: 'data'
    }
}
}); 
```

我的模型：

```
Ext.define('Metrics.model.MetricsData', {
extend: 'Ext.data.Model',
fields: [{name : 'name_metric'}]    
}); 
```

最后是我的 PHP 脚本：

```
<?php   

//database parameters
$user='user'; 
$pw='';
$db='mydb';
$table='metric';

//make database connection
$connection = mysql_connect("localhost", $user, $pw) or
die("Could not connect: " . mysql_error());
mysql_select_db($db) or die("Could not select database");

metricsName();

function metricsName() 
{
$sql = 'SELECT name_metric FROM metric';

$result = mysql_query($sql); // result set

while($rec = mysql_fetch_array($result, MYSQL_ASSOC)){
    $arr[] = $rec;
};

$data = json_encode($arr);  //encode the data in json format

}

?> 
```

我不知道出了什么问题或错误来自哪里，但我的组合框永远不会被填满。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:04:00.767

您需要`echo`在`$data`最后返回。

```
$data = json_encode($arr);  //encode the data in json format
echo $data; 
```

您返回的数据也应如下所示：

```
{
    data: [{ 
              name_metric: 'record1' 
          }, { 
              name_metric: 'record2' 
          }],
    total: 2,
    success: true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:13:09.727

两件事情：

*   当您定义 id 属性/字段时，Ext 似乎喜欢它，它默认为 id。您应该将主键添加到您的 sql 查询中，并在别名或命名为“id”的数据中返回它，或者更改代理的 idProperty 以匹配您发送的名称。
*   ExtJS 期望您的 json 采用类似这样的格式，因为您定义了该代理

    ```
    {
        “成功”：是的，
        “消息”：“好的”，
        “数据”： [
            {
                “身份证”：1，
                “name_metric”：“Value1”
            },
            {
                “身份证”：2，
                “name_metric”：“Value2”
            }
        ]
    }
    ```

    这意味着您的函数应该只返回数据数组，而不是编码的数组，并且 php 的输出应该是这样的：

    ```
        回声 json_encode（数组（
            '成功' => 真，
            '消息' => "好的",
            '数据' => 指标名称（）
    ));
    ```

*   最后，组合框定义关闭。您需要至少提供一个 valueField 定义并创建商店的实例，而不是传递它的名称

    ```
    {
        xtype: '组合框',
        存储：Ext.create("Metrics.store.MetricsData"),
        displayField: 'name_metric',
        值字段：'id'
    }

    ```

# android - 保存状态只保存片段的一部分

> ID：15067890
> 
> 赞同：1
> 
> 时间：2013-02-25T13:16:25.503
> 
> 标签：android, bundle

我在保存应用程序某些部分的状态时遇到问题。

在布局中，我有 5 `EditText`a`Button`和 a `TextView`。当用户输入值并计算（单击按钮）时，将`TextView`填充 。

当方向改变时，没有任何反应，视图被传递并完美运行，但是当我（用我`ViewPager`的）滑动时，填充的状态`TextView`没有被保存。我有 3 个片段，如果我只滑动，比如从右到中，它会被保存，但是如果我向最左边滑动，`TextView`当我返回片段时，它是未填充的，输入的值会`EditText`被保存。

我的预期是`onClick()`（正在进行计算并填充`TextView`）的过程没有保存，我该如何处理？我曾尝试跟进[Google 网站](http://developer.android.com/guide/components/fragments.html)上的指南，但没有任何运气。

我的代码是：

```
public class FuelConsumptionFragment extends Fragment implements OnClickListener {

View view;
int savedState = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    if (savedInstanceState != null) {

        savedState = savedInstanceState.getInt("curChoice", 0);

    }

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("curChoice", savedState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    view = inflater.inflate(R.layout.fuel_consumption, container, false);

    Button calculate_fuel = (Button)view.findViewById(R.id.calculate_fuel);
    calculate_fuel.setOnClickListener(this);

    return view;

    } 
```

显现：

```
<activity
            android:name="simcas.fartberegneren.MainActivity"
            android:icon="@drawable/fartberegneren"
            android:label="" 
            android:configChanges="orientation|screenSize" >
</activity> 
```

**编辑：**我有一个模糊的想法，即通货膨胀`onCreateView`可能是问题所在，这是正确的吗？

**编辑2：**只是绕过我的代码并意识到我的“自定义”适配器可能是问题的一部分，代码如下：

```
public class MyAdapter extends FragmentStatePagerAdapter {

public MyAdapter(FragmentManager fm) {
    super(fm);

}

@Override
public int getCount() {
    return 3;
}

@Override
public Fragment getItem(int position) {
    switch (position) {
    case 0: return new SpeedZonesFragment();
    case 1: return new DistanceFragment();
    case 2: return new FuelConsumptionFragment();
    default: return null;
    }
}
} 
```

这会导致问题吗？正如我所见，我`Fragment`在切换位置时正在创建一个新的，对吗？

**编辑3：**代码`onClick()`：

```
@Override
public void onClick(View view) {

DecimalFormat format = new DecimalFormat("#.#");

InputMethodManager imm = (InputMethodManager)getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(view.getWindowToken(), 0);

EditText distance_entry_fuel = (EditText) getActivity().findViewById(R.id.distance_fuel);
EditText speed_a_entry_fuel = (EditText) getActivity().findViewById(R.id.speed_a_fuel);
EditText gas_a_use = (EditText) getActivity().findViewById(R.id.gas_use_a);
EditText speed_b_entry_fuel = (EditText) getActivity().findViewById(R.id.speed_b_fuel);
EditText gas_b_use = (EditText) getActivity().findViewById(R.id.gas_use_b);
EditText gas_price = (EditText) getActivity().findViewById(R.id.gas_price);

distance_entry_fuel.setRawInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
speed_a_entry_fuel.setRawInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
gas_a_use.setRawInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
speed_b_entry_fuel.setRawInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
gas_b_use.setRawInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
gas_price.setRawInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);

distance_entry_fuel.clearFocus();
speed_a_entry_fuel.clearFocus();
gas_a_use.clearFocus();
speed_b_entry_fuel.clearFocus();
gas_b_use.clearFocus();

double moneySpend;
double timeArest;
double timeArest1;
double timeBrest;
double timeBrest1;
double totalTime;
double totalTimerest;

try {

    double distance = Double.parseDouble(distance_entry_fuel.getText().toString());
    double speedA = Double.parseDouble(speed_a_entry_fuel.getText().toString());
    double gasA = Double.parseDouble(gas_a_use.getText().toString());
    double speedB = Double.parseDouble(speed_b_entry_fuel.getText().toString());
    double gasB = Double.parseDouble(gas_b_use.getText().toString());
    double gasPrice = Double.parseDouble(gas_price.getText().toString());

    double gasUseA = (distance / gasA);
    double gasUseB = (distance / gasB);

    if (speedB > speedA) {

        if (gasUseB > gasUseA) {

            moneySpend = ((gasUseB - gasUseA) * gasPrice);

        }

        else {

            moneySpend = ((gasUseA - gasUseB) * gasPrice);

        }

        timeArest = (distance % speedA); // Calculate the remainder of A
        timeArest1 = ((timeArest / speedA) * 60); // Convert the remainder of A to minutes       
        timeBrest = (distance % speedB); // Calculate the remainder of B
        timeBrest1 = ((timeBrest / speedB) * 60); // Convert the remainder of B to minutes

        totalTime = (int)((distance / speedA) - (distance / speedB)); // Calculate the amount of hours saved            

        if (timeArest >= timeBrest) {   // Condition for calculating time

            totalTimerest = (timeArest1 - timeBrest1);

        }

        else {                          // opposite condition

            totalTimerest = ((timeArest1 - timeBrest1) + 60); // Make up for the negative number

        }           

    }

    else {

        if (gasUseB > gasUseA) {

            moneySpend = ((gasUseB - gasUseA) * gasPrice);

        }

        else {

            moneySpend = ((gasUseA - gasUseB) * gasPrice);

        }

        timeArest = (distance % speedA); // Calculate the remainder of A
        timeArest1 = ((timeArest / speedA) * 60); // Convert the remainder of A to minutes       
        timeBrest = (distance % speedB); // Calculate the remainder of B
        timeBrest1 = ((timeBrest / speedB) * 60); // Convert the remainder of B to minutes

        totalTime = (int)((distance / speedB) - (distance / speedA)); // Calculate the amount of hours saved

        if (timeBrest >= timeArest) {   // Condition for calculating time

            totalTimerest = (timeBrest1 - timeArest1);

        }

        else {                          // opposite condition

            totalTimerest = ((timeBrest1 - timeArest1) + 60); // Make up for the negative number

        }   
    }

    String minuteTotal = "";
    String hourTotal = "";

    if (totalTimerest == 1) {

        minuteTotal = " minut";

        }

    else { 

        minuteTotal = " minutter";

    }

    if (totalTime == 1) {

       hourTotal = " time";

    }

    else {

        hourTotal = " timer";

    }

    String moneySpendOnGas;

    String distanceText = "Over en strækning på " + format.format(Double.parseDouble(distance_entry_fuel.getText().toString())) + " km";
    String gasUsedA = "Bruger du " + format.format(gasUseA) + " liter benzin, ved en gennemsnitsfart på " + speedA + " km/t.";
    String gasUsedB = "Bruger du " + format.format(gasUseB) + " liter benzin, ved en gennemsnitsfart på " + speedB + " km/t.";

    if (totalTime > 0) {

        if (totalTimerest > 0) {

            moneySpendOnGas = "Det koster dig " + format.format(moneySpend) + " kr at komme " + (int)totalTime + hourTotal + " og " + (int)totalTimerest + minuteTotal + " hurtigere frem.";

        }

        else {

            moneySpendOnGas = "Det koster dig " + format.format(moneySpend) + " kr at komme " + (int)totalTime + hourTotal + " hurtigere frem.";

        }

    }

    else {

        moneySpendOnGas = "Det koster dig " + format.format(moneySpend) + " kr at komme " + (int)totalTimerest + minuteTotal + " hurtigere frem.";

    }

    TextView distance_text_fuel = (TextView) getActivity().findViewById(R.id.distance_text_fuel);
    distance_text_fuel.setText(distanceText);
    TextView gas_used_a = (TextView) getActivity().findViewById(R.id.gas_used_a);
    gas_used_a.setText(gasUsedA);
    TextView gas_used_b = (TextView) getActivity().findViewById(R.id.gas_used_b);
    gas_used_b.setText(gasUsedB);
    TextView money_spend = (TextView) getActivity().findViewById(R.id.money_spend);
    money_spend.setText(moneySpendOnGas);
}

catch (NumberFormatException e) {

    DialogFragment alert = new EntryAlertDialog();
    alert.show(getFragmentManager(), "Alert");

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:12:29.530

您可以强制`TextView`保存其状态，也可以`EditText`这样做。只需在布局文件中调用`TextView.setFreezesText(true)`或添加标签。`android:freezesText="true"``TextView`

# python - python - 如何仅使用递归在python中制作列表搜索程序？

> ID：15067891
> 
> 赞同：2
> 
> 时间：2013-02-25T13:16:25.880
> 
> 标签：python, python-2.7

我正在尝试制作一个 python 程序（**只使用递归，不使用循环**），它从用户那里获取一个名称列表以及一个用于搜索列表的名称。程序必须判断该名称是否存在于给定列表中。此外，如果列表的元素是`"James Christ"`并且我们搜索`"James"`，则程序应该返回 true。我已经完成了一半的程序。但是我的代码不执行附加功能。我的代码是这样的：

```
L1=list(input("Enter the list of names : "))
x=input("Enter the name to search : ")

def search(L1,x):
    if len(L1)==0:
        return "Not found!!"
    else:
        if x==L1.pop(0):
         return "Entry found!!"
        else:
         return search(L1,x)

print search(L1,x) 
```

请帮帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:44:47.237

这是一个不破坏原始列表的解决方案。

```
montys = [
    'John Cleese', 'Graham Chapman', 'Terry Gilliam',
    'Eric Idle', 'Terry Jones', 'Michael Palin']
actor = 'Idle'

def search(data, word):
    if len(data) == 0:
        return "Not found!"
    else:
        if word in data[0]:
            return "Entry found!"
        else:
            return search(data[1:], word)

print(search(montys, actor)) 
```

有关更多信息，请参阅 Junuxx 答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T13:26:49.747

而不是`if x==L1.pop(0)`，使用`if x in L1.pop(0)`.

这适用于`James`and `James Christ`，但也适用于`Jamesy Bob`or `SuperJames`。

要确保输入与列表中名称的整个单词匹配，您可以执行`if x in L1.pop(0).split()`. 这通过拆分`James Christ`成一个单词列表 ( `['James', 'Christ']`) 并检查“James”是否作为该列表中的单词之一出现。

# qt5 - 静态编译 QT

> ID：15067892
> 
> 赞同：2
> 
> 时间：2013-02-25T13:16:27.170
> 
> 标签：qt5

我想静态编译QT，我做了以下步骤：

1）配置-static -debug -opensource

2）nmake sub-src 但在这一步中我有一些错误，比如

D:\qt\bin\rcc.exe -name mimetypes D:\qt-everywhere-opensource-src-5.0.1\qtbase\src\corelib\mimetypes\mimetypes.qrc -o .rcc\debug_static\qrc_mimetypes.cp 'D:\qt\bin\rcc.exe' 不是内部或外部命令、可运行程序或批处理文件。NMAKE：致命错误 U1077：“D:\qt\bin\rcc.exe”：返回代码“0x1”停止。NMAKE：致命错误 U1077：'"C:\Program Files (x86)\Microsoft Visual Studio 11.0 \VC\BIN\nmake.exe"'：返回代码 '0x2' 停止。NMAKE：致命错误 U1077：“cd”：返回代码“0x2”停止。NMAKE：致命错误 U1077：“cd”：返回代码“0x2”停止。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:08:48.033

在尝试编译 Qt 5.x 之前，您可能需要安装一些库（取决于您要编译的模块）：

*   **ActivePerl** (** 需要，因为它用于配置**qtsdk** )
*   微软视窗 SDK 7.1
*   微软 DirectX SDK
*   Python
*   重症监护室
*   ...

如果您计划使用内部使用相同库（例如 zlib）的库（例如 Assimp），您可能必须使用最新版本覆盖位于**qtbase\src\3rdparty**子目录中的这些库。

编辑位于**qtbase目录中的文件****configure.bat**，并注释掉第 45 行： **`::if not exist %QTSRC%\.gitignore goto sconf`** 

 **编辑文件**qmake.conf**，位于**qtbase\mkspecs\win32-msvc2010**（如果您使用 Visual Studio 2010）或**qtbase\mkspecs\win32-msvc2012**（如果您使用 Visual Studio 2012）：

*   第 9 行：`CONFIG += incremental flat precompile_header autogen_precompile_source debug_and_release debug_and_release_target`
*   第 23 行：`QMAKE_CFLAGS_RELEASE = -O2 -MT`
*   第 24 行：`QMAKE_CFLAGS_RELEASE_WITH_DEBUGINFO += -O2 -MT -Zi`
*   第 25 行：`QMAKE_CFLAGS_DEBUG = -Zi -MTd`

启动**Visual Studio 命令提示符**：开始 > 程序 > Microsoft Visual Studio 20XX > Visual Studio 工具。
确保**Perl.exe**的路径在**PATH**环境变量中：（`PATH=%PATH%;C:\Perl\bin`或者`PATH=%PATH%;C:\Perl64\bin`如果为 x64 编译）。

进入**qtbase**目录：`CD \Qt\5.0.1\qtbase`.

配置 Qt 以编译静态调试和发布版本：

*   `configure -developer-build -opensource -confirm-license -platform win32-msvc2010 -mp -nomake examples -nomake tests -static`（如果您使用的是 Visual Studio 2010）
*   `configure -developer-build -opensource -confirm-license -platform win32-msvc2012 -mp -nomake examples -nomake tests -static`（如果您使用的是 Visual Studio 2012）

如果需要，可以稍后编译示例和测试。
如果您打算使用**OpenGL**，请添加`-opengl desktop`到命令行，否则 Qt 将默认使用面向移动设备的 OpenGL/ES。
如果您的 CPU 不支持多核，请删除该`-mp`选项。

返回父目录：`CD ..`.

再次配置 Qt : `configure -developer-build -opensource -confirm-license -platform win32-msvc20`XX `-opengl desktop -mp -nomake examples -nomake tests -static`
*（我不确定这一步是否需要，但只需几秒钟......）。*

编译：`nmake`。

另一种编译方法是使用[jom](http://qt-project.org/wiki/jom)并指定要使用的 CPU 内核数：`C:\Qt\jom\jom.exe -j #NUMBER_OF_CORES#`。

您将在**qtbase\lib文件夹中找到已编译的静态库，并在 qtbase** **\** include 的子目录中包含要包含的文件。
要使用它们，您必须在 Visual C++ 项目中[使用静态运行时库](http://msdn.microsoft.com/en-us/library/2kzt1wy3(v=vs.100).aspx)（`/MT`或`/MTd`）。**

# c# - C# RestSharp PUT 方法并发送原始字节（protobuf）

> ID：15067894
> 
> 赞同：4
> 
> 时间：2013-02-25T13:16:32.297
> 
> 标签：c#, protocol-buffers, restsharp

如何使用 HTTP PUT 方法发送字节数组？`AddFile`类的方法`RestRequest`发送额外的标头。方法`AddParameter`采用`Object`类型。

我是怎么做的：

```
byte[] data;
using (var ms = new MemoryStream())
{
    Serializer.Serialize(ms, query);
    data = ms.ToArray();
    ms.Close();
}
var client = new RestClient(ServerPath);
var request = new RestRequest(RequestPath, Method.PUT);
request.AddFile("stream", x => new MemoryStream(data), string.Empty);
client.ExecuteAsync(request, responce => Debug.WriteLine(responce.Content)); 
```

但是在服务器端，我看到了额外的标头

> -------------------------------------------28947758029299 内容处置：表单数据；名称=“流”；filename="" Content-Type: application/octet-stream [RAW DATA HERE] -------------------------------28947758029299 --

额外的标题使查询不可读。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T14:03:50.630

感谢马克·格拉维尔。解决方案：

> ```
>  var client = new HttpClient();
>         var httpContent = new ByteArrayContent(data);
>         client.PutAsync(Path, httpContent); 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-10T19:11:13.503

我有时会为此苦苦挣扎，最后找到了解决方案，魔术是作为没有参数名称的请求体给出

```
// file to send
IFormFile file
byte[] buffer;

using (var ms = new MemoryStream())
using (var stream = file.OpenReadStream())
{
    stream.CopyTo(ms);
    buffer = ms.ToArray();
}
var uploadDoc = new RestRequest("ressource", Method.POST);
uploadDoc.RequestFormat = DataFormat.None;
uploadDoc.AddParameter("", buffer, ParameterType.RequestBody);

var response = new RestClient("baseUrl").Execute(uploadDoc); 
```

希望它可以帮助别人

# github - 有没有办法查看托管在 gist 上的代码示例的实时演示？

> ID：15067900
> 
> 赞同：7
> 
> 时间：2013-02-25T13:17:05.527
> 
> 标签：github, gist

对不起，如果这是一个愚蠢的问题。

有没有办法查看托管在 gist 上的代码示例的实时演示？

例如，有没有办法查看此示例的实时版本？[https://gist.github.com/tmcw/3452458](https://gist.github.com/tmcw/3452458)

我显然可以下载代码并在本地运行它，但我想知道 gist 是否真的打算托管演示以及原始代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T10:11:44.130

我知道有办法！

转到[http://bl.ocks.org/](http://bl.ocks.org/)并将 gist ID 添加到 URL 的末尾。

例如：[http](http://bl.ocks.org/3452458) ://bl.ocks.org/3452458我原来的问题的要点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:11:23.260

不是我从 GitHub 知道的。

我知道的“gist 渲染”的唯一示例是**[gist.io](http://gist.io/)**，用于从 gist 渲染博客页面。
例如，[这篇文章](http://gist.io/3135754)取自[这个 gist](https://gist.github.com/idan/3135754)。

# spring - HTTP 连接池

> ID：15067902
> 
> 赞同：1
> 
> 时间：2013-02-25T13:17:10.243
> 
> 标签：spring, tomcat, connection-pooling

我需要在 Tomcat 服务器上的 Spring 应用程序中设置 HTTP 连接池。

我们正在讨论是在应用程序级别还是在服务器级别定义池（applicationContext.xml 与 server.xml）。

我的问题是：我已经看了又看了，但我找不到任何关于这样做的信息。

现在，我正在`org.apache.http.impl.conn.PoolingClientConnectionManager`课堂上工作，一切正常。

我如何能够在我的 Java 代码之外定义一个池并从那里使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:56:41.743

这是您正在寻找的 tomcat 7 的配置参考：http: [//tomcat.apache.org/tomcat-7.0-doc/config/http.html#Standard_Implementation](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html#Standard_Implementation)

这也是关于同一主题的另一篇 SO 帖子：[如何增加 tomcat 线程池中的线程数？](https://stackoverflow.com/questions/6402681/how-to-increase-number-of-threads-in-tomcat-thread-pool)

# jquery - 如何使用 jquery 从特定页面中删除特定的 css 元素？

> ID：15067903
> 
> 赞同：0
> 
> 时间：2013-02-25T13:17:19.870
> 
> 标签：jquery, css

我有 6 个特定页面，其中包含大量以下 html 行：

```
<div class="ms-webpart-chrome ms-webpart-chrome-vertical ms-webpart-chrome-fullWidth "> 
```

我需要在所有这些特定页面上使用 jquery 删除第一个 css 元素，即“ms-webpart-chrome”。

“ms-webpart-chrome”的作用是它添加了一个我想从所有页面中删除的白色背景。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:18:57.990

这是 jQuery 的一个相当简单的用法。[首先，您使用类选择器](http://api.jquery.com/class-selector/)查找具有该类的元素，然后使用[`first`](http://api.jquery.com/first)忽略除第一个之外的所有元素，然后对该元素执行某些操作。

问题中您实际上想要做的事情有点不清楚，但有两种可能的选择：

如果要实际删除**元素**，请使用[`remove`](http://api.jquery.com/remove)：

```
$(".ms-webpart-chrome").first().remove(); 
```

如果您只想从中删除该类，请使用[`removeClass`](http://api.jquery.com/removeClass)：

```
$(".ms-webpart-chrome").first().removeClass("ms-webpart-chrome"); 
```

* * *

根据我的经验，使用`.first()`是最有效的选择，但这不太重要。第一个位（按类查找并获得第一个）也可以使用[`:first`选择器](http://api.jquery.com/first-selector/)（或[`:eq(0)`](http://api.jquery.com/eq-selector/)）完成：

```
$(".ms-webpart-chrome:first").doSomething(); 
```

在这两种情况下，这可能会迫使 jQuery 使用自己的选择器引擎而不是内置的浏览器功能，这可能并不理想。但是，如果您只这样做一次，那么它只会在真正**庞大的**页面上起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:28:56.900

通过使用 jQuery ：

```
$(function(){
$('.ms-webpart-chrome').each(function(){
$(this).removeClass('ms-webpart-chrome');
})
}) 
```

通过使用 CSS ：

找到 CSS 文件并搜索“.ms-webpart-chrome”并删除整行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:19:30.597

如果每个页面都有一个 .pages 类，您可以使用 each 循环浏览每个页面并删除第一个带有 ms-webpart-chrome 类的元素

```
$('.pages').each(function(){
$(this).find('.ms-webpart-chrome:first').remove();
}); 
```

# amazon-web-services - 防止从 amazon s3 直接下载音频文件

> ID：15067904
> 
> 赞同：8
> 
> 时间：2013-02-25T13:17:23.403
> 
> 标签：amazon-web-services, amazon-s3

我有存储在 Amazon S3 中的音频文件，可以从基于 Web 的音乐播放器应用程序和移动应用程序访问这些文件。即使是未登录的用户也应该能够访问音乐。但是我不希望人们使用该链接来下载内容。这可以在 s3 中完成吗？

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-15T22:59:15.910

您可以根据 HTTP 引用者限制访问。它不是防弹的（Referrer 可能会被欺骗），但它会阻止随意下载。

您使用存储桶策略来限制 Referrer 的可能值。

此页面上有一个示例（向下滚动一点）[http://docs.aws.amazon.com/AmazonS3/latest/dev/AccessPolicyLanguage_UseCases_s3_a.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/AccessPolicyLanguage_UseCases_s3_a.html)

这是他们的例子：

```
{
  "Version":"2008-10-17",
  "Id":"http referer policy example",
  "Statement":[
    {
      "Sid":"Allow get requests originated from www.example.com and example.com",
      "Effect":"Allow",
      "Principal":"*",
      "Action":"s3:GetObject",
      "Resource":"arn:aws:s3:::examplebucket/*",
      "Condition":{
        "StringLike":{
          "aws:Referer":[
            "http://www.example.com/*",
            "http://example.com/*"
          ]
        }
      }
    }
  ]
} 
```

您还可以使用过期的签名 URL - 这将阻止人们从其他站点链接到您的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-12T14:15:36.413

One scenario comes to mind:

When your music player app wants to play something, it has to ask your backend for the URL to the MP3\. Your backend can produce URLs with "Expires" parameter[1] set to 10 seconds in the future.

This way, the URL returned by your backend is only usable for 10 seconds, which should be more than enough for the music player to initiate the download from S3.

Of course the user could download the file if he/she sees the URL in some kind of HTTP sniffer in the 10 second window and starts the download.

But there's no bulletproof way to protect user from getting his/hers hands on the content their device accesses. If the content is delivered to a device, there is always a way for sufficiently technical people to get their hands on it.

p.s. Just a heads-up, if your MP3 player supports seeking (especially seeking by sending another HTTP range-request), you'd have to re-get a new URL with refreshed "expires" parameter from your backend.

[1] [http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html](http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-14T15:53:35.473

我也遇到了这个要求，并且对如何实现这个有更新的答案。

在您的存储桶的“权限”选项卡上，选择“存储桶策略”按钮并填写以下代码：

```
{
    "Version": "2012-10-17",
    "Id": "Policy1542209806458",
    "Statement": [
        {
            "Sid": "Explicit deny to ensure requests are allowed only from specific referer.",
            "Effect": "Deny",
            "Principal": "*",
            "Action": "s3:*",
            "Resource": "arn:aws:s3:::your-bucket-arn/*",
            "Condition": {
                "StringNotLike": {
                    "aws:Referer": [
                        "http://yourdomain.com/*"
                    ]
                }
            }
        }
    ]
} 
```

这将**只**允许来自您域的引用者的请求。请注意设置您的`Resource`字段并更改允许的`aws:Referer`列表。

这仍然可以被欺骗，但它是直接链接 S3 对象的简单障碍。

# android - Facebook SDK 3.0 - 附加权限

> ID：15067913
> 
> 赞同：2
> 
> 时间：2013-02-25T13:17:40.867
> 
> 标签：android, permissions, facebook-android-sdk

有一项任务是为服务器端访问令牌提供多个权限（多个读取和发布）。在 3.0 版中，有 2 种单独的会话打开方法：openForRead 和 openForPublish。

一开始应用程序要求读取权限：

```
private void authorizeFacebook() {
    if (DEBUG)
        Log.d(TAG, "Facebook authorization");
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        session.openForRead(this.createReadRequest());
    } else {
        Session.openActiveSession(this, true, mFacebookSessionCallback);
    }
} 
```

但是在状态回调之后，应用程序要求发布权限：

```
if (session.isOpened() && !session.getPermissions().contains("publish_stream")) {
    if (DEBUG)
        Log.d(TAG, "Facebook, Request additional permission: Publish Stream");

    session.requestNewPublishPermissions(new NewPermissionsRequest(this, Arrays.asList("publish_stream")).setCallback(mFacebookSessionCallback).setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO)); 
```

而且用户体验存在很大的问题，因为在额外的权限请求后，出现了 facebook 登录表单，用户必须再次输入凭据......它是否按照 SDK 开发人员的设计工作？..还是我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T07:46:16.853

这个答案可能为时已晚。我遇到了类似的问题，适用于 Android 的 FB SDK 3.0。这是 SDK 中的一个错误，他们已在 3 月 20 日发布的 FB SDK 3.0.1 for Android 中修复了它。[更改日志](https://developers.facebook.com/android/change-log-3.x/)提到：

> Web 视图登录对话框包含请求新权限的场景的令牌信息。这避免了用户在会话请求新权限时必须输入他们的登录凭据。

升级后重试。[从这里](https://developers.facebook.com/resources/facebook-android-sdk-3.0.1.zip)获取新的 SDK 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:40:02.603

我发现如果用户没有在他们的 Android 设备上安装 Facebook 应用程序，那么每次请求他/她获得额外权限时都会出现登录屏幕。但是，如果用户确实在他们的设备上安装了 Facebook 应用程序，那么我发现他/她只需要通过单击是/否按钮来确认/取消确认其他权限。

顺便说一句，我整理了一系列三篇简短的文章，解释如何打开 Facebook 会话、请求额外权限等等。[这是](http://adilatwork.blogspot.co.uk/2013/02/facebook-android-sdk-30-opening-session.html)第一个。

# ios - 格式化数据 CIColorCube

> ID：15067914
> 
> 赞同：0
> 
> 时间：2013-02-25T13:17:43.453
> 
> 标签：ios, nsdata, exc-bad-access, core-image, cifilter

我正在尝试使用 CoreImage 框架的 CIColorCube CIFilter，我尝试了任意 3D Luts 到图像，我将 3D luts 包装到 NSData，然后作为参数传递给 CIColorCube CIFilter。但我收到 EXC_BAD_ACCESS 异常。这是我的代码：

CIContext *context = [CIContext contextWithOptions:nil]; CIFilter *filter = [CIFilter filterWithName:@"CIColorCube"];

```
uint8_t color_cube_data[4096*4] = {
    153, 255, 255, 1,
    170, 255, 255, 1,
    186, 255, 255, 1,
    204, 255, 255, 1,
    221, 255, 255, 1,
    237, 255, 255, 1,
    255, 255, 255, 1};
NSData * cube_data =[NSData dataWithBytes:color_cube_data length:4096*sizeof(float)*4];

[filter setValue:originalImage forKey:kCIInputImageKey];
[filter setValue:[NSNumber numberWithFloat:16] forKey:@"inputCubeDimension"];
[filter setValue:cube_data forKey:@"inputCubeData"];
CIImage *result = [filter valueForKey:kCIOutputImageKey];
CGImageRef cgImage =[context createCGImage:result fromRect:originalImage.extent];
imgVw_Result.image=[UIImage imageWithCGImage:cgImage]; 
```

我错过了什么请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:50:15.227

`CIColorCube`需要范围内浮点类型的 rgb 数据`0.0 to 1.0`，而您的`color_cube_data`结构是类型`uint8_t`。此外，在您的`cube_data`构造函数中，您实际上已经考虑了类型 float (" `sizeof(float)`")，这意味着您没有为过滤器的 NSData 结构提供正确的字节大小。

请参阅以下文档中的清单 5-3： [https ://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_filer_recipes/ci_filter_recipes.html#//apple_ref/doc/uid/TP30001185-CH4 -SW1](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_filer_recipes/ci_filter_recipes.html#//apple_ref/doc/uid/TP30001185-CH4-SW1)

# mysql - mysql 按重要性和 id 排序

> ID：15067927
> 
> 赞同：0
> 
> 时间：2013-02-25T13:18:31.923
> 
> 标签：mysql, sorting

我如何先按 id 排序，而不是按“重要”排序。重要列是布尔值，1 或零

我试过的

```
 select * from list ORDER BY `id` DESC, `important` DESC;
    select * from list ORDER BY `id` DESC, `important` DESC; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:21:16.280

这没有任何意义，特别是如果“ID”列是自动递增的……它总是按照 ID 的相反顺序排列。如果您首先想要所有重要物品，请将您的订单换成

```
order by
   `important` desc,
   `id` desc 
```

这会将您所有的“重要”项目放在所有不重要的前面...然后，在所有重要的项目中，将在顶部显示最新的 ID，然后返回最旧的

# php - 从 chrome 扩展写入数据库

> ID：15067929
> 
> 赞同：3
> 
> 时间：2013-02-25T13:18:34.737
> 
> 标签：php, javascript, database, google-chrome-extension

这可能是一个广泛的问题，但我找不到关于如何做到这一点的明确解释（也许我只是搜索得不够好）。

我正在编写一个 chrome 扩展，我需要将我从站点收集的数据写入数据库。

问题是我真的不知道如何做到这一点或从哪里开始。正如我之前的帖子中提到的，这是我的第一个谷歌扩展程序，最重要的是，这是我第一次使用数据库。这个项目中有很多第一次:)。

谷歌搜索后，我发现我可能需要使用 php 来做到这一点，因为 javascript 是一种客户端语言。但除此之外，我完全被难住了，不知道如何开始。

请问有什么提示吗？

再次，对不起，如果我的问题太宽泛了。也许这个话题会帮助未来的新手（比如我）跟上这个速度。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:41:48.443

首先阅读这篇关于如何从扩展向服务器发出请求的文章：http: [//developer.chrome.com/extensions/xhr.html](http://developer.chrome.com/extensions/xhr.html)

然后，快速学习如何创建一个连接到数据库的简单 php 脚本。也许是这样的：[http ://www.freewebmasterhelp.com/tutorials/phpmysql](http://www.freewebmasterhelp.com/tutorials/phpmysql)

# java - 通过 numberFormat 解析数字后 Float arraylist 中的双元素

> ID：15067930
> 
> 赞同：0
> 
> 时间：2013-02-25T13:18:44.220
> 
> 标签：java, casting, number-formatting

我想解析一些格式相同但数字类型不同的字符串（它们包括一些数字），并将这些数字设置为它们的相关数组。例如有这个字符串：" "positions":[[35.23,436.34],[23.5, 7.1]] 我想把这些数字放入一个名为 "this"! 的浮点数组中，对于这个字符串""indices":[[ 23,4],[2,1]]" 我想将它们放入一个名为 "that" 的整数数组中！

为此，我使用此声明编写了一个通用函数：

```
 private <E extends Number> voidfunc(ArrayList<E> array, String JSON){
       .
       .
       array.add((E) NumberFormat.getInstance().parse(JSON.substring(...)));
       .
       .
       } 
```

这很好用，并将数字正确放入数组，但后来，在我的应用程序的某个地方，我得到一个“类转换异常。不能将 Double 转换为 Float”试图这样做：

```
 floatArray[i] = temp.get(i); 
```

temp 已定义为浮点数组列表并已填充上述函数。

谁能告诉我为什么会这样，我该如何解决？我非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:24:49.147

在您的示例中，`E`是泛型方法的类型参数。这种类型在运行时是未知的，所以强制转换为这种类型`(E)`是假的，编译器很可能在这一行报告警告。JVM 在此转换期间不检查类型兼容性，因此不兼容类型的值可能会进入列表。例如，`Double`类型的值可以存储在`List<Float>`. 稍后，当您尝试从列表中提取值并将其转换为 时`Float`，`ClassCastException`将会发生。

您可能需要像这样更改代码：

```
private void func (ArrayList <? super Double> array, String JSON)
{
    ...
    array.add (NumberFormat.getInstance ().parse (JSON.substring (...)));
    ...
}

ArrayList <Number> temp = new ArrayList ();
func (temp, json);
floatArray [i] = temp.get (i).floatValue (); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:25:59.833

尝试：

```
floatArray[i] = ((Double) temp.get(i)).floatValue(); 
```

# php - 如何在同一程序中通过 PHP 套接字发送和接收消息

> ID：15067931
> 
> 赞同：0
> 
> 时间：2013-02-25T13:18:45.780
> 
> 标签：php, php-socket

我编写了一个简单的套接字程序来将消息从客户端发送到服务器。这工作正常，我需要从服务器到客户端得到响应。我可以在同一个套接字程序中做吗？如果可以，我该怎么做？

这是我的服务器套接字代码。

```
<?php
$address="127.0.0.1";
$port="3222";
$sock=socket_create(AF_INET,SOCK_STREAM,0) or die("Cannot create a socket");
socket_bind($sock,$address,$port) or die("Couldnot bind to socket");
socket_listen($sock) or die("Couldnot listen to socket");
$accept=socket_accept($sock) or die("Couldnot accept");
$read=socket_read($accept,1024) or die("Cannot read from socket");
echo $read; 
```

?>

这是客户端套接字的代码。

```
<?php
$address="127.0.0.1";
$port="3222";
$msg="Hello server";

$sock=socket_create(AF_INET,SOCK_STREAM,0) or die("Cannot create a socket");
socket_connect($sock,$address,$port) or die("Could not connect to the socket");
socket_write($sock,$msg); 
```

?>

有人可以帮我吗....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:21:31.333

您可以在写入套接字后简单地调用`socket_read()`以等待答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-09T08:59:17.810

这是一个非常适合我的[例子](https://www.codeproject.com/Tips/418814/Socket-Programming-in-PHP)

# xaml - 如何为 Metro 应用 Listview 提供 windows 8 颜色主题？

> ID：15067942
> 
> 赞同：0
> 
> 时间：2013-02-25T13:19:23.543
> 
> 标签：xaml, windows-8, microsoft-metro

我正在开发一个 Windows 8 Metro 应用程序，在其中我使用 StandardStyles.Xaml 设置了我的 Xaml 列表视图并更改了它的选择颜色。现在我想改变它，比如根据 Windows 主题改变它的选择颜色。即）如果您要更改为 Windows 8 中的主题，其相应的列表视图也将更改其选择颜色。例如）：PC 设置。我怎么能得到这个？如果可能的话，我还想在列表视图中隐藏选择刻度线吗？

# vb.net - 如何在 vb.net 中对数据进行多次搜索

> ID：15067946
> 
> 赞同：-1
> 
> 时间：2013-02-25T13:19:36.457
> 
> 标签：vb.net, forms, ms-access, search, gridview

```
Private Sub cmdsearch_Click(sender As System.Object, e As System.EventArgs) Handles cmdsearch.Click

Me.StockDataBindingSource.Filter = "ItemCode, ItemType, Quantity,CompanyDeliveredBy,ReceivedByPrintName,TotalCost   = '" & Me.txtsearch.Text & "'"

End Sub 
```

我想在我的数据库中搜索多个字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:59:02.860

您需要指定要引用的列和表。如果您有多个表，您可能需要查看 SQL 连接[http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

别的，

```
SELECT column_one, column_two FROM columnname WHERE column_id ='1' 
```

下面的示例使用 SQLite 从表**base_user**获取数据，它返回多个列，即名字、姓氏、用户名等。它还被参数化以更好地保护您的查询。

```
sqlText = "SELECT id AS userID, " & _
"first_name AS firstName, " & _
"last_name AS lastName, " & _
"user_name AS userName, " & _
"is_deleted AS isDeleted, " & _
"is_active AS isActive " & _
"FROM base_user WHERE " & _
"is_deleted=@isDeleted AND " & _
"is_active=@isActive"
SetDBCommand(sqlText)
DBCommandSQLite.Parameters.AddWithValue("@isActive", IsActive)
DBCommandSQLite.Parameters.AddWithValue("@isDeleted", IsDeleted) 
```

# javascript - 通过单选按钮更改 jQuery 图像 src

> ID：15067947
> 
> 赞同：1
> 
> 时间：2013-02-25T13:19:41.253
> 
> 标签：javascript, jquery, html

我有这段代码，但为什么当我点击任何单选按钮时，图像 src 不会改变？

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Toggle Images using RadioButtons</title>
    <script type="text/javascript"
    src="http://ajax.microsoft.com/ajax/jQuery/jquery-1.4.2.min.js">
    </script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("input:radio[name=style]").change(function() {
                if (this.value == "tuxedo"){
                        var style = 'tuxedo';
                } else {
                        var style = 'classic' ;                  
                }
            });
            $("input:radio[name=breast]").change(function() {
              if (this.value == "double"){
                        var breast = 'double';
                } else {
                        var breast = 'single' ;                  
                }
            });
            $("input:radio[name=buttons]").change(function() {
            if (this.value == "4"){
                        var buttons = '4';
           } else if (this.value == "3"){
                        var buttons = '3';
            } else if (this.value == "2"){
                        var buttons = '2';
                } else {
                        var buttons = '1' ;                  
                }
            });

                          $("#imgDef").attr(
                        'src', 'http://127.0.0.1/2/suits/'+ style +'/'+ breast +'/'+ buttons +'.jpg'                   
                    );
     });
    </script>
</head>
<body>
Style:<br />
<label><input name="style" type="radio" value="classic" />Classic</label><br />
<label><input name="style" type="radio" value="tuxedo" />Tuxedo</label><br />
<br /><br />
Breast:<br />
<label><input name="breast" type="radio" value="single" />Single</label><br />
<label><input name="breast" type="radio" value="double" />Double</label><br />
Buttons:<br />
<label><input name="buttons" type="radio" value="1" />1</label><br />
<label><input name="buttons" type="radio" value="2" />2</label><br />
<label><input name="buttons" type="radio" value="3" />3</label><br />
<label><input name="buttons" type="radio" value="4" />4</label><br />
<img id="imgDef" src="http://127.0.0.1/2/suits/classic/single/1.jpg"/>
</body>
</html>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:24:45.420

您在绑定到输入字段上的 .change 事件的每个函数的范围内定义样式、乳房和按钮。在这些功能之外，它们将无法访问。在您的函数之外声明它们，然后在您的输入更改函数中设置它们。

IE

```
$(document).ready(function() {
    var style, breast, buttons;
        $("input:radio[name=style]").change(function() {
            if (this.value == "tuxedo"){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T13:24:07.723

```
 $("input:radio[name=buttons]").change(function() {
               var buttons;

                if (this.value == "4"){
                            buttons = '4';
               } else if (this.value == "3"){
                            buttons = '3';
                } else if (this.value == "2"){
                            buttons = '2';
                    } else {
                            buttons = '1' ;                  
                    }
                }); 
```

像这样声明..希望它对你有用..

你最好像这样获得选中的单选按钮的值

**`$('input:radio[name=buttons]:checked').val();`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:28:25.803

1.  在“就绪”处理程序的开头声明变量： `$(document).ready(function() { var style; var breast; var buttons; ...`

2.  不要在条件语句中使用 var。只需设置值： `if (this.value == "tuxedo"){ style = 'tuxedo'; ....`

3.  在“更改”处理程序的末尾调用更改 src 属性的代码。你必须调用它三遍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:34:21.967

这是一个完整的工作示例。[http://jsfiddle.net/whizkid747/FsSz6/](http://jsfiddle.net/whizkid747/FsSz6/) 如果您只想在选择所有 3 个部分时更改图像 src，您可能需要在设置 img src 之前在每个变量中添加一个检查 undefined

```
var style,breast,buttons;

$("input:radio[name=style]").change(function() {

                if (this.value == "tuxedo"){
                         style = 'tuxedo';
                } else {
                         style = 'classic' ;                  
                }
    loadImage();
            });
            $("input:radio[name=breast]").change(function() {
              if (this.value == "double"){
                         breast = 'double';
                } else {
                         breast = 'single' ;                  
                }
                 loadImage();
            });
            $("input:radio[name=buttons]").change(function() {
            if (this.value == "4"){
                         buttons = '4';
           } else if (this.value == "3"){
                         buttons = '3';
            } else if (this.value == "2"){
                         buttons = '2';
                } else {
                         buttons = '1' ;                  
                }
                 loadImage();
            });
function  loadImage(){
    alert('http://127.0.0.1/2/suits/'+ style +'/'+ breast +'/'+ buttons +'.jpg');
                          $("#imgDef").attr(
                        'src', 'http://127.0.0.1/2/suits/'+ style +'/'+ breast +'/'+ buttons +'.jpg'                   
                    );
} 
```

# phantomjs - 使用php运行phantomjs而不安装它

> ID：15067949
> 
> 赞同：0
> 
> 时间：2013-02-25T13:19:43.090
> 
> 标签：phantomjs

这是否可以在不使用 php.ini 安装的情况下运行 phantomjs。

我不想将它安装在服务器中。我只想在需要使用源文件时使用它。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:54:36.610

显然不是，因为 PhantomJS 不是 PHP 的一部分，它需要作为外部程序调用。

# jquery - JQuery width() 不返回正确的值

> ID：15067952
> 
> 赞同：0
> 
> 时间：2013-02-25T13:19:47.107
> 
> 标签：jquery, css

我有一个没有预设宽度的 div `css`，我试图在屏幕上居中`JQuery`，它适用于**Chrome**、**Firefox**和**IE8+**，但不适用于**IE7**。为什么？

**CSS：**

```
.productBoxWrapper{
    height:210px;
    clear:both;
    background-color:blue;
} 
```

**查询：**

```
$('#mydiv').css("position", "absolute");
this.css("left", ($(window).width() - $("#mydiv").width()) / 2 + "px"); 
```

**JSFiddle：http:** [//jsfiddle.net/tygcz/3/](http://jsfiddle.net/tygcz/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:24:36.633

尝试像这样居中：

CSS：

```
#myDiv{
     position: absolute; top: 50%; left: 50%;
} 
```

脚本：

```
$('#myDiv').css('marginLeft', - ( parseInt( $('#myDiv').width() ) / 2) + 'px' );
$('#myDiv').css('marginTop', - ( parseInt( $('#myDiv').height() ) / 2) + 'px' ); 
```

我不确定天气 parseInt 是否真的需要。

# gwt - 如何将对象列表绑定到 GWT 中的 ListBox？

> ID：15067954
> 
> 赞同：0
> 
> 时间：2013-02-25T13:19:56.037
> 
> 标签：gwt

我想将我的服务绑定到 ListBox，但我无法绑定它。
//服务类

```
 public class Service {
    private String serviceName;

    public Service(String serviceName) {

        this.serviceName = serviceName;
    }

    public String getServiceName() {
        return serviceName;
    }

    public void setServiceName(String serviceName) {
        this.serviceName = serviceName;
    }

    } 
```

// SignUpBean 类

```
 public class SignUpBean {
        private List<Service> services;

    public List<Service> getServices() {
        return services;
    }

    public void setServices(List<Service> services) {
        this.services = services;
    }
} 
```

以下是我的主编辑

```
public class SignUpEditor extends SimplePanelimplements Editor<SignUpBean> {

    public ListBox services;
public void SignUpEditor (){
services.addItem("Service1");
    services.addItem("Service2");
setWidget(services);
}
} 
```

我没有收到任何错误，但我认为我必须使用`ListEditor`or `CompositeEditor`。但我不知道。谁能建议如何绑定`Service`到`ListBox`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:54:45.397

ListBox 假设是一个 LeafValueEditor。从概念上讲，我们不编辑 ListBox 中的列表。相反，我们从列表中选择一个值，该值将显示在选择中。因此，ListBox 只保存一个值，因此 ListBox 必须是叶值编辑器。

目前没有 GWT 支持直接将列表绑定到 ListBox。我们必须编写一个扩展 ListEditor 的适配器（有关详细信息，请参阅 HasDataEditor 类）。这种方法很奇怪。

简单的方法是编写一个实现 LeafValueEditor< List < String >> 的适配器。在适配器的 setValue 方法中，我们应该遍历列表并为列表中的每个值调用 listBox.addItem。

我不推荐任何一种方法，因为 ListBox`LIST is NON EDITABLE`并且只有`VALUE is EDITABLE`. 我建议在不使用编辑器的情况下手动执行 addItems。

**更新**：HasDataAdapter 是一个示例 ListEditor。参考那个实现。你可能会有一些想法。

# javascript - 当用户关闭窗口而不是导航/刷新/等时如何触发事件......？

> ID：15067957
> 
> 赞同：0
> 
> 时间：2013-02-25T13:20:11.317
> 
> 标签：javascript, jsp

我需要在用户单击浏览器中的 [x] 时进行一些操作，而不是在页面因刷新或页面之间的正常导航而卸载时...

显然我不能依赖 onclose、onbeforeunload 或 onunload 事件，因为它们在导航到其他页面或刷新同一页面时也会被触发，而这不是必须完成这些操作的时刻......

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:57:46.187

我不知道这是否适用于 IE 以外的其他浏览器（规范规定它必须仅在 IE 中检查......）但这有效：

```
window.onbeforeunload = function() {
    if ((window.event.clientX < 0) || (window.event.clientY < 0) || (window.event.clientX < -80)) { // close button 
        //things to do when the user closes the tab or window pressing the [x]
    } else if (window.event.altKey == true) { // ALT + F4
        //things to do when the user closes with ALT+F4
    } 
}; 
```

好吧，如果用户单击书签，这将不起作用，因为它也是一个 clientY < 0 ...

# delphi - AnyDac 表单设计，编程查询取消对话框

> ID：15067960
> 
> 赞同：0
> 
> 时间：2013-02-25T13:20:21.407
> 
> 标签：delphi, delphi-xe, anydac

我的来自 TADGUIxAsyncExecuteDialog 组件的 AnyDac Cancel 对话框出现问题，基本上我需要用户能够取消查询执行它工作得很好但设计与程序不匹配我需要的是编辑显示的表单为了满足用户的需求，删除 AnyDac 的图标更改标题等。有什么想法可以做到这一点吗？

我正在使用 AnyDac 6.0.3 Build 2713 Delphi XE

尝试在互联网上搜索一个星期，没有运气:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:32:19.810

找到了解决方法:)

```
 while AnyQuery.Command.State = csExecuting do
    begin
      Application.ProcessMessages;
      //do anything here while query is executing
      //the query has to be set to ResourceOptions.CmdExecMode = amAsync
      end;
    end; 
```

您也可以通过执行以下命令取消查询

```
AnyQuery.AbortJob(False); 
```

我的代码如下所示：

```
AnyQuery.Active;
ShowProgressForm:= TShowProgressForm.Create(Application); 
ShowProgressForm.Label1.Caption := 'Generating Query Please Wait...';

while AnyQuery.Command.State = csExecuting do
begin
      Application.ProcessMessages;

      if ShowProgressForm.Cancel then
      begin
        AnyQuery.AbortJob(False);
        ShowProgressForm.Close;
        EXIT;
      end;
end;

ShowProgressForm.Close; 
```

这`Cancel`是一个全局布尔变量，`ShowProgressForm.pas`当您按下`Cancel`按钮时，变量变为`True`并且该`AbortJob(False)`方法将中止查询执行:)

希望能帮助到你 ：）

# html - 如何使用 CSS 高度属性在 HTML 表格中显示滚动条

> ID：15067961
> 
> 赞同：0
> 
> 时间：2013-02-25T13:20:21.957
> 
> 标签：html, css

我需要显示表格的滚动条。我用 style="height:200px;overFlow:auto;" 在表格周围添加了一个 div 元素。如果表中有更多记录，这工作正常，但如果表中只有一条记录，我无法看到滚动（这很好）并且表的高度与以前相同，空白处底部（因为我设置为 200px 的高度）。如何通过在只有一条记录的情况下删除空白空间并在有更多记录的情况下显示滚动来使表格高度正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:34:13.267

不要在 div 上使用 200px 的高度，而是尝试使用 200px 的最大高度；

```
<div style="max-height:200px;overflow:auto;"> 
```

[http://jsfiddle.net/d42CA/](http://jsfiddle.net/d42CA/)

# batch-file - 使用批处理命令编辑文本文件中的特定行

> ID：15067964
> 
> 赞同：2
> 
> 时间：2013-02-25T13:20:24.500
> 
> 标签：batch-file

我有一个包含以下文本的文本文件。

“模块”

> ```
>  {
>     "ModuleSignature" = "8:MergeModule.6F1248514B3047E99E4EE8A129CB8605"
>     "Version" = "8:1.0.0.0"
>     "Title" = "8:uoipmsm"
>     "Subject" = "8:"
>     "Author" = "8:Microsoft"
>     "Keywords" = "8:"
>     "Comments" = "8:"
>     "SearchPath" = "8:"
>     "UseSystemSearchPath" = "11:TRUE"
>     "TargetPlatform" = "3:1"
>     "PreBuildEvent" = "8:"
>     "PostBuildEvent" = "8:"
>     "RunPostBuildEvent" = "3:0"
>     } 
> ```

在上面; 我想更改从工具触发构建时将提供的版本号。

我想在批处理文件中传递一个参数**$Version**，它必须从我使用的工具中获取版本号，并在该文本文件中更新相同的版本号。

例如：在上面的文本中，我想将其编码为 "Version" = "8:$Version" 因此，当我在触发构建时提供版本号时，它必须在此文本文件中更新相同的版本号。

您能否指导我如何编辑特定行。我是 Windows 批处理脚本的新手。

我必须再添加一点......在文本文件中我必须修改第 399 行中的版本。因此批处理文件必须跳转到该文本文件中的第 399 行并进行修改。请帮我解决同样的问题...

* * *

我已将上述脚本保存在文本键盘中，并与 ver.bat 保存相同；并且在同一个文件夹中我保存了 Intext 文件。当我提到要替换的行号时，它正在删除“=”符号之后的内容，从第 1 行到第 399 行。

在运行批处理文件之前：

```
"ModuleSignature" = "8:MergeModule.6F1248514B3047E99E4EE8A129CB8605"
"Version" = "8:1.0.0.0"
"Title" = "8:uoipmsm"
"Subject" = "8:"
"Author" = "8:Microsoft"
"Keywords" = "8:"
"Comments" = "8:"
"SearchPath" = "8:"
"UseSystemSearchPath" = "11:TRUE"
"TargetPlatform" = "3:1"
"PreBuildEvent" = "8:"
"PostBuildEvent" = "8:"
"RunPostBuildEvent" = "3:0" 
```

如果我运行批处理文件，我提到行号为 10 和 tat 之后；我得到以下输出；

```
"ModuleSignature" = 
"Version" = ""
"Title" = 
"Subject" = 
"Author" = 
"Keywords" = 
"Comments" = 
"SearchPath" = 
"UseSystemSearchPath" = 
"TargetPlatform" = 
"PreBuildEvent" = 
"PostBuildEvent" = 
"RunPostBuildEvent" = 
```

任何想法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:58:42.957

这应该这样做。当然，如果您的输入文件发生更改，这将不得不更改。如果输入文件中有空行（不算），您可能还需要进行调整。请注意，您只需要传递版本（而不是整个新行 399）。在您的示例中，这将是“8：1.0.0.0”。最好引用字符串，以防其中有空格。作为解释，这将：

1.  必须使用参数调用此 bat 文件
2.  使用 FOR LOOP 将前 398 行回显到临时文件
3.  使用作为参数传递的版本添加新行 399
4.  使用 MORE 将剩余的行附加到临时文件
5.  将临时文件复制到原始文件
6.  删除临时文件

X

```
@echo off
REM %1=Version (use quotes if there are spaces in version)

set ReplaceLine=399
set InFile=Test.txt
set TempFile=TempTest.txt
if exist "%TempFile%" del "%TempFile%"

if "%~1"=="" (
   color CF
   echo.This program must be called with an argument!
   pause
   goto :eof
   )

setlocal enabledelayedexpansion
set /A Cnt=1
for /F "tokens" %%a in (%InFile%) do (
   echo.%%a>> "%TempFile%"
   set /A Cnt+=1
   if !Cnt! GEQ %ReplaceLine% GOTO :ExitLoop
   )
:ExitLoop
endlocal

echo."Version" = "%~1">> "%TempFile%"
more +%ReplaceLine% < "%InFile%">> "%TempFile%"
copy /y "%TempFile%" "%InFile%"
del "%TempFile%"
goto :eof 
```

# php - UPDATE mysql_query 不更新表

> ID：15067966
> 
> 赞同：-1
> 
> 时间：2013-02-25T13:20:26.747
> 
> 标签：php, mysql

我在使用 UPDATE 命令时遇到问题。

我试图更新我的数据库，但它只是没有发生。在过去的 10 天里，我一直试图让它发挥作用，这让我发疯了。

这是代码：

```
$a = mysql_query("UPDATE `findacab` SET `lat` = ".$ads['Latitude']." , `long` = ".$ads['Longitude']."
                WHERE `eeventendtime` = ".$ads['Postcode']."  "); 
```

桌子：

```
$q = mysql_query("SELECT Postcode, Latitude, Longitude FROM postcodes");
while($ads = mysql_fetch_array($q)) 
{ 
    mysql_query("UPDATE findacab SET lat = '".$ads['Latitude']."' , long = '".$ads['Longitude']."' WHERE eeventendtime = '".$ads['Postcode']."' ");
    echo $ads['Latitude']." ".$ads['Longitude']." ".$ads['Postcode']."</br>";
     //$query = "select count(*) from findacab where eeventendtime = '".mysql_real_escape_string($ads['Postcode'])."'"; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:26:16.680

除非您的完整表格仅包含整数，否则您应该在字符串周围添加引号

```
$a = mysql_query("UPDATE `findacab` SET 
    `lat` = '".$ads['Latitude']."' , 
    `long` = '".$ads['Longitude']."' 
    WHERE 
    `eeventendtime` = '".$ads['Postcode']."' "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:34:08.963

```
$query = "select count(*) from findacab where eeventendtime = '".mysql_real_escape_string($ads['Postcode'])."'";
$result = mysql_query($query);
$row = mysql_fetch_array($result);
echo $row[0] 
```

如果它返回 0，那么您只是没有要更新的记录。另一个可能的原因 - 您正在尝试使用与存储的相同值更新表。在这种情况下更新不会改变数据。

# android - ImageView 没有填满其布局的高度

> ID：15067967
> 
> 赞同：3
> 
> 时间：2013-02-25T13:20:29.257
> 
> 标签：android, android-listview

我想在`ImageView`里面添加一个`ListView`. 我希望图像填充布局而不会失真（基本上，填充高度并调整其宽度）。

这就是我现在得到的：

![在此处输入图像描述](../Images/f62071a4c57bad0291ea76f68153126f.png)

我已经把一个灰色的背景，`ImageView`使它更容易看到。红色是我想要的尺寸。

这是我的代码：

**Project_form.xml**

```
<?xml version="1.0" encoding="utf-8"?> <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

     <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/name_project"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:padding="3dp"
        android:layout_alignParentLeft="true"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="25dp" >
    </TextView>

    <Button
        android:id="@+id/button_project"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/btn_custom"
        android:layout_centerVertical="true"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:layout_alignParentRight="true"
        android:padding="3dp"
        android:text="  details  "
        android:textSize="20dp"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/imagesstep"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:background="@color/grey"
        android:adjustViewBounds="false"
        android:layout_centerVertical="true"
        android:padding="3dp"
        android:layout_alignParentRight="true"
        android:visibility="invisible" />
 </RelativeLayout> 
```

**我的方法 getView()`Adapter`**：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {            
    View row = convertView;            
    if (row==null) {       
        LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
        row = inflater.inflate(R.layout.project_form, parent, false);
    }   
    TextView text = (TextView) row.findViewById(R.id.name_project); 
    text.setText(this.objects[position].getName());       
    int IDImage=this.objects[position].getIDImage();       
    int IDPlay = this.objects[position].getIDPlay();
    text.setCompoundDrawablesWithIntrinsicBounds(IDImage, 0, 0, 0);         
    text.setCompoundDrawablePadding(7);    
    ImageView image = (ImageView)
    row.findViewById(R.id.imagesstep);                
    image.setVisibility(View.VISIBLE);          
    image.setImageResource(IDPlay);
    if (position == selectedPosition) {
        row.setBackgroundColor(Color.parseColor("#8000ff00"));
    }  
    else {
        row.setBackgroundColor(Color.TRANSPARENT);
    }

    return row;
} 
```

我尝试使用不同的参数，例如`ScaleType`android:adjustViewBounds 和 layout_width 但我的图像高度从未改变。我也尝试以编程方式进行（类似于 image.setMinHeight(parent.getHeight()) 但它也失败了。

谁能指出我出了什么问题？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:28:16.900

尝试改变`RelativeLayout`to`layout_height``fill_parent`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent">

    <TextView ... />

    <Button .. />

    <ImageView ... />
 </RelativeLayout> 
```

或者，您可以将`minHeight`属性设置`ImageView`为`?android:attr/listPreferredItemHeight`

```
<ImageView
    ...
    android:minHeight="?android:attr/listPreferredItemHeight" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:34:38.190

从图像视图中删除填充

# c# - XamlReader 和变音符号

> ID：15067969
> 
> 赞同：2
> 
> 时间：2013-02-25T13:20:41.537
> 
> 标签：c#, wpf, encoding, xamlparseexception, xamlreader

我现在有一个带有德语变音符号（如下）的 xaml，当我尝试解析它时，我得到一个 invalidchar 错误。

当我不使用 XamlParser 上下文时，它可以工作。但我必须使用它来设置一些类型映射

* * *

XAML：

```
<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:test="clr-namespace:BR.UI.Tests.Items;assembly=BR.UI.ViewLocator.Tests"
    mc:Ignorable="d" d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.DataContext>
        <test:SampleViewModel />
    </UserControl.DataContext>
    <Grid>
        <Label>ö</Label>
    </Grid>
</UserControl> 
```

解析它的代码

```
 var context = new ParserContext();
 var result = System.Windows.Markup.XamlReader.Parse(xaml,context); 
```

我找不到任何东西来设置编码提示（这将是.net String UTF-16）我做错了什么？

我还尝试使用 XmlParserContext 注入编码。

```
 var xmlcontext = new XmlParserContext(null, null, null, XmlSpace.Preserve,
                                          Encoding.Unicode);

    var context = new ParserContext(xmlcontext); 
```

但这没有帮助:-(

我需要做什么？是否有某种 XAML 编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T07:28:19.673

回答我自己的问题希望没问题。

对我有帮助的是使用

`System.Windows.Markup.XamlReader.Load(stream,XamlParserContext)`

方法。

s。[http://msdn.microsoft.com/de-de/library/ms590388.aspx](http://msdn.microsoft.com/de-de/library/ms590388.aspx)

这种方法似乎尊重字符串变量的编码。

我仍然不明白为什么这不适用于静态 ParseMethod。但我希望这个解决方案能帮助其他人安全时间:-)

# android - Androidlinkedin应用程序问题

> ID：15067971
> 
> 赞同：-1
> 
> 时间：2013-02-25T13:20:59.660
> 
> 标签：android, android-intent

我有两个关于 androidlinkedin 应用程序的问题

1.  **从我的应用程序共享一些内容后，我想在单击返回按钮时关闭linkedin登录页面**

    我通过linkedin share activiy 分享了我的内容，如果linkedIn 已经是**LOGGEDIN** ，它工作正常。但是，如果我注销linkedin然后尝试共享一些内容登录页面将出现在这个时候我试图通过点击后退按钮关闭linkedin登录页面。但是登录页面总是显示它不会关闭。

    ```
    Intent intent = new Intent(Intent.ACTION_SEND);

    ComponentName shareItem = new ComponentName("com.linkedin.android", com.linkedin.android.home.UpdateStatusActivity);    
    intent.putExtra(Intent.EXTRA_TEXT, _myContent);
    intent.setComponent(shareItem); 
    ```

2.  **我想查找 linkenin 应用程序是否已登录。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:45:12.663

> 从我的应用程序共享一些内容后，我想在单击返回按钮时关闭linkedin登录页面

要访问linkedin应用程序的任何页面/屏幕，您需要登录，因此必须先登录。

> 我想查找linkedin 应用程序是否已登录。

AFAIK 不可能，因为linkedin 不以任何方式提供此类信息。

# maven - 当我在 IntelliJ IDEA 12 中运行 maven 时，为什么会有竞争的 javac 内存参数？

> ID：15067972
> 
> 赞同：1
> 
> 时间：2013-02-25T13:21:03.053
> 
> 标签：maven, intellij-idea

在 IntelliJ IDEA 12 中，我有一个 maven 2.2.1 运行/调试配置。在“Runner”选项卡下，我将 VM Options 指定为`-XX:MaxPermSize=768m -Xmx768m -Xms256m`. 当我运行时，控制台显示：

```
C:\dev\sdks\jdk1.6.0_25\bin\java -XX:MaxPermSize=768m -Xmx768m -Xms256m -Xmx1500M -XX:MaxPermSize=1500m -Dclassworlds.conf=C:\dev\bin\apache-maven-2.2.1\bin\m2.conf -Dmaven.home=C:\dev\bin\apache-maven-2.2.1 -Didea.launcher.port=7534 "-Didea.launcher.bin.path=C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0.4\bin"... 
```

额外的一组选项来自 ( `-Xmx1500M -XX:MaxPermSize=1500m`)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:19:47.597

-Xmx1500M -XX:MaxPermSize=1500m 来自 MAVEN_OPTS 环境变量。
这是一个错误，来自 MAVEN_OPTS 的选项应该在来自 Runner 选项卡的选项之前（请参阅[http://youtrack.jetbrains.com/issue/IDEA-101087](http://youtrack.jetbrains.com/issue/IDEA-101087)）

# ruby-on-rails - 使用标准内容页面扩展 Rails 应用程序

> ID：15067978
> 
> 赞同：0
> 
> 时间：2013-02-25T13:21:19.013
> 
> 标签：ruby-on-rails, content-management-system

我用 Rails 3.2 开发了一个应用程序

我们意识到我们最终可能会拥有许多“标准”内容页面，主要是记录应用程序本身的文本。应用程序用户不会玩任何东西。

是否有一个扩展程序（插件、gem）我可以用来向我的应用程序添加页面，就像我们通常在标准 CMS 上所做的那样？

我希望能够将内容的添加/点头委托给管理员，而不是用 HTML 编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:27:03.230

我们的知识库也有类似的问题，因此选择使用[nanoc](http://nanoc.ws/)。

就最终用户而言，这为我们提供了类似于[developer.github.com的内容。](http://developer.github.com/)并且代码是用markdown编写的（developer.github.com是[开源](https://github.com/github/developer.github.com)的）。

这样，我们所有的文档都是用 Markdown 写在静态文件中的。
支持人员无需了解编程即可编写它们。使用 GitHub Mac 应用程序，他们可以非常轻松地从存储库中推送和拉取。

# macos - 核心数据应用程序设计

> ID：15067979
> 
> 赞同：0
> 
> 时间：2013-02-25T13:21:21.253
> 
> 标签：macos, core-data, datasource, nsviewcontroller

* * *

大家好，

我有一个关于我现在正在为 Mac OS X 开发的应用程序的问题，该应用程序使用一个简单的 sqlite 数据库。我的问题是我应该如何将数据源组件处理到我的应用程序中？除了使用向 AppDelegate 发送消息的委托之外，是否有一种简单的方法可以在不同的视图控制器中使用一个数据源？这似乎是一个奇怪的问题，但事实是我之前只在 IOS 上进行开发，您只需将 objectcontext 传递给 viewController 以使其可用于视图控制器。在 MacosX 上，我无法弄清楚如何做同样的事情......

任何帮助将非常感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:25:15.140

如何将上下文从一个视图控制器传递到另一个：

```
newViewController.managedObjectContext = self.managedObjectContext; 
```

或者，您可以将上下文保留在应用程序委托和覆盖`initWithCoder`中，当从情节提要或 xib 初始化视图控制器时应调用它：

```
AppDelegate *delegate = (AppDelegate*) [[NSApplication sharedApplication] delegate]; 
self.managedObjectContext = delegate.managedObjectContext; 
```

# javascript - Highcharts - 访问重叠数据点

> ID：15067980
> 
> 赞同：3
> 
> 时间：2013-02-25T13:21:24.147
> 
> 标签：javascript, highcharts

我有一个散点系列，其中两个点具有相同的坐标。每个点都有与之相关的不同数据（例如不同人的体重和身高——两个不同的人可以有完全相同的身高和体重）：

```
series: [ {
            data: [{x:193.5, y:80.7, name:'danny'},
                  {x:193.7, y:90.7, name:'oren'},
                  {x:193.7, y:90.7, name:'josef'},
                  {x:195.5, y:80.3, name:'thomas'}]
        }] 
```

[jsfiddle](http://jsfiddle.net/f5ncR/1/)的完整示例。

查看图表的工具提示时，第二点的工具提示显示：

```
Oren: 193.7,90.7 
```

使*josef*的数据无法访问。

我想让*josef*和*oren*的数据都可以访问，例如将它们放在同一个工具提示中。

```
Oren: 193.7,90.7
Josef: 193.7,90.7 
```

你将如何达到这个效果？

**假设一个非常大的数据集 - 每次都对整个系列进行迭代不是一种选择。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:56:52.197

您可以使用工具提示格式化程序 ( [http://api.highcharts.com/highcharts#tooltip](http://api.highcharts.com/highcharts#tooltip) ) 手动格式化您的工具提示。

在格式化程序中比较系列中所有其他点的 x 和 y 值(this.series) 如果值相同，则将这些点的名称添加到工具提示中。

# xslt - 逗号分隔

> ID：15067982
> 
> 赞同：1
> 
> 时间：2013-02-25T13:21:30.100
> 
> 标签：xslt, xslt-2.0

我有一组产品 ID，例如 (123565,589655,45585,666669,5888) 我想在这些 ID 的前后放置逗号，例如 (,123565,589655,45585,666669,5888,)..

我怎样才能为此编写 XSLT 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:48:28.347

**只需使用**：

```
<xsl:text>,</xsl:text><xsl:value-of select="$yourSequence" 
                                    separator=","/><xsl:text>,</xsl:text> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:45:37.623

很大程度上取决于您的输入 XML 文件以及您希望输出的样子。无论如何，由于您使用的是 XSLT 2.0，因此您可以使用该`string-join()`函数。

假设您有一个如下所示的输入 XML 文件：

```
<products>
  <product>
    <name>Product #1</name>
    <id>123565</id>
  </product>
  <product>
    <name>Product #1</name>
    <id>589655</id>
  </product>
  <product>
    <name>Product #1</name>
    <id>45585</id>
  </product>
</products> 
```

你可以有这样的样式表：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">

  <xsl:output method="text" indent="yes"/>
  <xsl:variable name="SEPARATOR" select="','"/>

  <xsl:template match="/">
    <!--
    Join the values of each products/product/id element with $SEPARATOR; prepend
    and append the resulting string with commas.
    -->
    <xsl:value-of
      select="concat($SEPARATOR, string-join((products/product/id),
        $SEPARATOR), $SEPARATOR)"/>
  </xsl:template>

</xsl:stylesheet> 
```

这将产生以下输出：

```
,123565,589655,45585, 
```

如果您编辑您的问题以包含您的输入 XML 以及您希望输出 XML 的样子，我可以相应地修改我的答案。

# windows - 无法使用 findstr 命令调用参数

> ID：15067984
> 
> 赞同：2
> 
> 时间：2013-02-25T13:21:32.707
> 
> 标签：windows, batch-file

我正在创建一个批处理文件，它将在 LOG 文件中搜索字符串。该字符串包含两个静态部分和两个动态部分。动态部分是我们在运行时输入的。我在批处理脚本本身中连接静态和动态部分并在文件中搜索它。

例如，如果静态字符串是“hello world |”和“|”

动态字符串是“2013”​​和“2014”，我的最终字符串就像

finalstring=你好世界| 2013 | 2014

为了消除双引号，我使用了延迟扩展。下面是我的代码：

```
@echo off
For /f "tokens=2-4 delims=/ " %%a in ('date /t') do (set mydate=%%c-%%a-%%b)
echo %mydate%

setlocal DisableDelayedExpansion
set "str=%~1"
setlocal EnableDelayedExpansion
echo !str!

setlocal DisableDelayedExpansion
set "str2=%~2"
setlocal EnableDelayedExpansion
echo !str2!

setlocal DisableDelayedExpansion
set "string1=hello world | "
set "string1=%~string1"
setlocal EnableDelayedExpansion
echo !string1!

setlocal DisableDelayedExpansion
set "pipesign= | "
set "pipesign=%~pipesign"
setlocal EnableDelayedExpansion
echo !pipesign!

:concat 
set "finalstring=%string1%%str%"
set "finalstring2=%finalstring%%pipesign%"
set "finalstring3=%finalstring2%%str2%"

echo %finalstring3%
:concat

findstr %finalstring3% C:\test\log20132502 
```

我的批处理文件的输出如下：

```
2013-02-25
2013
2014
'2013' is not recognized as an internal or external command,operable program or batchfile 
```

我的假设是连接字符串存在错误，并且在“finalstring”中未正确调用该参数

谁能帮我解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:09:05.177

有时您必须打开和关闭延迟扩展，但您确实应该尝试构建代码以最小化次数。你的代码太过分了。

您不能使用`%~var`从变量值中删除封闭引号。这仅适用于参数，如 in`%~1`或 FOR 变量，如`%%~A`. 您编写代码的方式无需删除引号。`set "var=value"`在赋值期间有引号来保护值，但引号不包含在值中。

您的错误消息源于管道必须在您的 FINDSTR 行中被引用（或转义）。

FINDSTR 将搜索字符串拆分为多个搜索字符串，以空格分隔。您想在搜索字符串中包含空格，因此您需要 FINDSTR`/C:"search string"`选项。

我不明白您在顶部处理日期的目的，但我保留了它。

大概，`2013`和`2014`作为参数传入，`%1`和`%2`。

我相信您的代码可以简化如下：

```
@echo off
setlocal enableDelayedExpansion
for /f "tokens=2-4 delims=/ " %%a in ('date /t') do (set mydate=%%c-%%a-%%b)
echo %mydate%

set "mySearch=hello world | %~1 | %~2"
echo !mySearch!

findstr /c:"!mySearch!" c:\test\log20132502 
```

如果`%1`or的值`%2`可以包含`!`，那么延迟的扩展将在 的赋值期间破坏该值`mySearch`。在这种情况下，切换延迟扩展会有所帮助。

```
@echo off
setlocal disableDelayedExpansion
for /f "tokens=2-4 delims=/ " %%a in ('date /t') do (set mydate=%%c-%%a-%%b)
echo %mydate%

set "mySearch=hello world | %~1 | %~2"
setlocal enableDelayedExpansion
echo !mySearch!
endlocal

findstr /c:"!mySearch!" c:\test\log20132502 
```

但我怀疑搜索字符串的打印输出只是为了调试目的。如果您真的不需要变量或搜索字符串的打印输出，那么您的代码可以简单地变成

```
@echo off
setlocal disableDelayedExpansion
for /f "tokens=2-4 delims=/ " %%a in ('date /t') do (set mydate=%%c-%%a-%%b)
echo %mydate%

findstr /c:"hello world | %~1 | %~2" c:\test\log20132502 
```

# python - python在运行时更改源代码

> ID：15067985
> 
> 赞同：2
> 
> 时间：2013-02-25T13:21:37.913
> 
> 标签：python

对于那些知道的人来说，简单的问题对我来说很难，因为我认为这实际上是不可能的。

制作一个简单的python程序后，就可以在电脑的命令提示符下运行了。

我想知道或者是否可以允许以这种方式运行它的人将元素添加到列表（list.insert）并在下次运行程序时让它仍然存在？（从而将预定义列表编辑为新的列出并以这种方式保存）

编辑：只是提供更多信息：

该程序所要做的就是允许您选择一个列表。从这个列表中它返回一个随机项目。我只是希望在运行程序时允许将项目添加到此列表中，然后保持列表更新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T13:23:41.857

最基本的方法是使用 Pickle 模块将数据保存并加载到磁盘：

[http://docs.python.org/2/library/pickle.html](http://docs.python.org/2/library/pickle.html)

[http://docs.python.org/2/library/pickle.html#example](http://docs.python.org/2/library/pickle.html#example)

这是我将如何在一个简单的程序中使用它

```
try:
    import cPickle as pickle
except ImportError:
    import pickle

class MyClass(object):

    def __init__(self, file_name):
        self.array = []
        self.file_name = file_name
        self.load_data()

    def add_element(self, element):
        self.array.append(element)
        self.save_data()

    def load_data(self):
        try:
            with open(self.file_name, "r") as f:
                self.array = pickle.load(f)
        except IOError:
            pass

    def save_data(self):
        with open(self.file_name, "w") as f:
            pickle.dump(self.array, f)

def main():
    FILE_NAME = "test.pkl"
    a = MyClass(FILE_NAME)
    print "elements in array are", a.array
    for i in range(5):
        a.add_element(i)

if __name__ == "__main__":
    main() 
```

# javascript - 更改就绪处理程序上的 jQuery UI 手风琴

> ID：15067997
> 
> 赞同：3
> 
> 时间：2013-02-25T13:22:24.877
> 
> 标签：javascript, jquery, jquery-ui, accordion

当我单击手风琴选项卡并且动画完成时（不是在动画之前或动画期间），是否可以处理该事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:25:27.900

动画完成后触发[激活](http://api.jqueryui.com/accordion/#event-activate)事件：

```
$("#yourElement").accordion({
    activate: function(event, ui) {
        // Animation is complete, do something...
    }
}); 
```

# jquery - 如何使用ajax调用发送上传的文件

> ID：15067998
> 
> 赞同：0
> 
> 时间：2013-02-25T13:22:34.530
> 
> 标签：jquery, ajax, forms, web-services, file-upload

我有一个如下表格...

```
<form  id="form2" name="form2" action="" method="post"  onsubmit="" enctype="multipart/form-data" modelAttribute="uploadForm" >
<div>
<span>File : </span>
</div>
<div>
<input type="file" id="filebrowse">
</div>
</form> 
```

当我提交表单时，我需要通过 ajax 调用将上传的文件作为参数发送到我的 REST Web 服务。

我对如何做到这一点感到非常困惑。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:26:35.527

首先谷歌搜索总是一个好主意。tutsplus 已经创建了[这个教程](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)。已经有几个开源 AJAX 文件上传器，因此您可以考虑使用其中之一，或者如果有必要创建自己的文件上传器，也许可以从这些文件中获取灵感。