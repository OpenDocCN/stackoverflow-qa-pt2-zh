# StackOverflow 问答 15325000-15325999

# ruby - 修改机架应用程序

> ID：15325002
> 
> 赞同：0
> 
> 时间：2013-03-10T17:06:44.043
> 
> 标签：ruby, rubygems, subdomain, rack, middleware

对于我的一个 ruby​​ 应用程序，我需要服务器根据子域路由请求。有很多方法可以使用其他 gem 来做到这一点，但我决定制作自己的“中间件”。此代码根据请求的目的地运行应用程序。

配置.ru

```
require './subdomain'
require './www'

run Rack::Subdomain.new([
  {
    :subdomain => "test", 
    :application => Sinatra::Application
  }
]); 
```

子域.rb

```
module Rack
  class Subdomain
    def initialize(app)
      @app = app
    end

    def call(env)
      @app.each do |app|
        match = 'test'.match(app[:subdomain])
        if match
          return app[:application].call(env)
        end
      end
    end
  end
end 
```

我的问题是如何修改此工作代码以使其工作完全相同，但通过如下代码调用它：

```
run Rack::Subdomain do
  map 'www' do
    Example::WWW
  end

  map 'api' do
    Example::API
  end
end 
```

使用建议的代码：

配置.ru

```
require './subdomain'
require './www'

run Rack::Subdomain.new do |x|
  x.map 'test' do
    Sinatra::Application
  end
end 
```

子域.rb

```
module Rack
  class Subdomain
    def initialize(routes = nil)
      @routes = routes
      yield self
    end

    def map(subdomain)
      @routes << { subdomain: subdomain, application: yield }
    end

    def call(env)
      @routes.each do |route|
        match = 'test'.match(route[:subdomain])
        if match
          return route[:application].call(env)
        end
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-10T19:20:29.667

您调用上面的“工作代码”，但它似乎根本没有检测到子域，而是将其连接到文字“测试”。无论如何，您可以通过创建一个 map 方法来实现类似于您想要的模式，该方法将条目添加到您的子域-> 应用程序路由列表中。我已将您的重命名为`@app`，`@routes`因为它是路由的哈希，而不是应用程序引用。

```
module Rack
  class Subdomain
    def initialize(routes = [])
      @routes = routes
      yield self if block_given?
    end

    def map(subdomain)
      @routes << { subdomain: subdomain, application: yield }
    end

    def call(env)
      @routes.each do |route|
        match = 'test'.match(route[:subdomain])
        if match
          return route[:application].call(env)
        end
      end
    end
  end
end

rsd = Rack::Subdomain.new do |x|
  x.map 'www' do
    Example::WWW
  end

  x.map 'api' do
    Example::API
  end
end

run rsd 
```

# utf-8 - 无效的 UTF-8 字节

> ID：15325009
> 
> 赞同：3
> 
> 时间：2013-03-10T17:07:10.960
> 
> 标签：utf-8, character-encoding

根据[维基百科](http://en.wikipedia.org/wiki/UTF-8#Invalid_byte_sequences)：

> 并非所有字节序列都是有效的 UTF-8。应为以下情况准备 UTF-8 解码器：
> 
> ```
> 1\. the red invalid bytes in the above table
> 2\. an unexpected continuation byte
> 3\. a start byte not followed by enough continuation bytes
> 4\. an Overlong Encoding as described above
> 5\. A 4-byte sequence (starting with 0xF4) that decodes to a value greater than U+10FFFF 
> ```

根据代码页布局，0xC0 和 0xC1 是无效的，并且绝不能出现在有效的 UTF-8 序列中。这是我对 CodePoints 0xC0 和 0xC1 的内容：

```
Byte 2   Byte 1      Num   Char
11000011 10000000    192   À
11000011 10000001    193   Á 
```

这些字节序列有对应的字符，但不应该有。我做错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T17:29:45.870

你只是混淆了术语：

**代码点**U+ 00C0是字符“À”，U+00C1 是“Á”。
以 UTF-8 编码，它们分别是**字节序列** `C3 80`和`C3 81`。

**字节** `C0`和`C1`不应出现在 UTF-8 编码中。

*代码点*表示独立于字节的字符。*字节*就是字节。

# c++ - PdhGetFormattedCounterValue 和正确的格式

> ID：15325013
> 
> 赞同：0
> 
> 时间：2013-03-10T17:07:17.473
> 
> 标签：c++, winapi, performancecounter, pdh

我试图理解性能 API，但我在理解`PdhGetFormattedCounterValue`函数和`dwFormat`参数时遇到了问题。

调用此函数时如何知道选择哪种格式？

我`PDH_COUNTER_INFO`在 MSDN 上找到了这个结构，看到这个结构有一个`dwType`成员，但是我仍然不明白如何使用这个结构来获取有关计数器格式的信息以成功调用该`PdhGetFormattedCounterValue`函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:26:18.643

You get to choose.

Many counters are calculated as fractions or they are scaled or both, so they have fractional parts. Which makes `PDH_FMT_DOUBLE` a good choice.

Some counter types never have fractional parts. You *could* read all the documentation and work out which, and then add two code paths to handle "counters that might be fractional" and "counters that won't be fractional", but this would be a lot of work for very little gain or none.

Just use `PDH_FMT_DOUBLE`.

**Update**

For most counters the precision is only a concern during the calculation of the final value, which happens within the PDH library. But, as you say, the precision of bulk totals (such as disk free space) *could* be an issue. Happily, it isn't.

A double has 52 bits of significand. For a counter reported in bytes this has room for 4 petabytes without any loss of precision.

But disk free space is reported in megabytes, not bytes, so a double can report up to 2^(72) bytes or 4 zettabytes with no loss of precision. And I'm pretty sure you can't have a single volume bigger than 2^(64) bytes.

Memory use (of processes and so) is reported in bytes but the values are always multiples of the page size (4096 bytes), so the bottom 12 bits of any reported value are zero. Hence a double can represent a memory size of up to 2^(64) bytes - i.e. the entire 64-bit memory space - without loss of precision.

Precision isn't a problem. Just use `PDH_FMT_DOUBLE`.

# string - 在 TASM/程序集中按原样打印彩色字符串，例如，13 作为回车，而不是垃圾值

> ID：15325014
> 
> 赞同：0
> 
> 时间：2013-03-10T17:07:18.053
> 
> 标签：string, assembly, colors, x86, tasm

再会！我是汇编语言的新手，我正在尝试打印一个带有颜色的简单“Hello World”。它可以工作，但是当我现在添加时，例如，`13, 10`它不会显示回车换行，而是显示其他字符（音符和圆圈）。这是我的代码：

```
.MODEL SMALL
.DATA
.stack

hello db 13,10,'Hello World'
      db 13,10,'    #####     ',0        ; there are spaces
ROW1 DB 12
COL DB 20

.CODE
.STARTUP
MOV AL, 3       ; 80x25 color
INT 10H         ; video BIOS call   
MOV AH, 2       ; set cursor position
MOV BH, 0       ; display page number
 mov bl,2
MOV DH, ROW1        ; row number
MOV DL, COL     ; column number
INT 10H         ; video BIOS call
CALL FAR PTR DISP   ; display first line of video text

.EXIT

DISP PROC FAR
        MOV SI, 0   ; set up array pointer
NEXT:   MOV AL, hello[SI]; get name character
    CMP AL, 0   ; exit if character is 0
    JZ EXIT     
    MOV BH, 0   ; display page number
    MOV BL, [BP+SI] ; get attribute
    MOV CX, 1   ; do 1 character
    MOV AH, 9   ; write character/attribute on screen
    INT 10H     ; video BIOS call
    INC SI      ; point to next character/attribute
    ADD DL, 1   ; move two columns to the right
    MOV AH, 2   ; set cursor position
    INT 10H     ; video BIOS call
    JMP NEXT    ; and continue
EXIT:   RET
DISP ENDP

END 
```

请帮我修复代码，以便**在控制台中看到变量中****写入的`hello`**内容。另外，我怎样才能**摆脱闪烁的颜色**？我刚刚在互联网上获得了一个颜色列表，但是当我在这里输入它时，它会闪烁（`mov bl, 2`呈绿色但它会闪烁）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:53:20.283

您可以将[函数 0Eh](http://www.ctyme.com/intr/rb-0106.htm)用于`CR`和`LF`。它将推进光标位置：

> 视频 - 电传输出
> 
> AH = 0Eh
> AL = 要写入的字符
> BH = 页码
> BL = 前景色（仅限图形模式）
> 
> 描述：在屏幕上显示一个字符，根据需要推进光标和滚动屏幕
> 
> **注意：字符 07h (BEL)、08h (BS)、0Ah (LF) 和 0Dh (CR) 被解释并执行预期的操作**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:39:22.410

当我回答您的另一个问题时，来自[Ralf Brown 的中断列表](http://www.ctyme.com/rbrown.htm)：

```
INT 10 - VIDEO - WRITE CHARACTER AND ATTRIBUTE AT CURSOR POSITION
    AH = 09h
    AL = character to display
    BH = page number (00h to number of pages - 1) (see #00010)
        background color in 256-color graphics modes (ET4000)
    BL = attribute (text mode) or color (graphics mode)
        if bit 7 set in <256-color graphics mode, character is XOR'ed
          onto screen
    CX = number of times to write character
Return: nothing
Notes:  all characters are displayed, including CR, LF, and BS
    replication count in CX may produce an unpredictable result in graphics
      modes if it is greater than the number of positions remaining in the
      current row
    With PhysTechSoft's PTS ROM-DOS the BH, BL, and CX values are ignored
      on entry. 
```

正如它所说：**注意：显示所有字符，包括 CR、LF 和 BS**。

您必须自己解释承运人退货 (CR, `0x0d`)。因此，如果输入是`0x0d`（`13`十进制），请按照下面的说明进行操作，否则如果输入是其他内容，请按照您当前的操作进行处理。

因此，对于 CR，读取当前光标位置，然后通过以下`int 10h`调用更改光标位置：

首先，获取当前光标位置：

```
INT 10 - VIDEO - GET CURSOR POSITION AND SIZE
    AH = 03h
    BH = page number
        0-3 in modes 2&3
        0-7 in modes 0&1
        0 in graphics modes
Return: AX = 0000h (Phoenix BIOS)
    CH = start scan line
    CL = end scan line
    DH = row (00h is top)
    DL = column (00h is left)
Notes:  a separate cursor is maintained for each of up to 8 display pages
    many ROM BIOSes incorrectly return the default size for a color display
      (start 06h, end 07h) when a monochrome display is attached
    With PhysTechSoft's PTS ROM-DOS the BH value is ignored on entry. 
```

在输出中，`dh`是当前行。这样做`inc dh`，然后设置其余参数：

```
INT 10 - VIDEO - SET CURSOR POSITION
    AH = 02h
    BH = page number
        0-3 in modes 2&3
        0-7 in modes 0&1
        0 in graphics modes
    DH = row (00h is top)
    DL = column (00h is left) 
```

但是，当您位于底行并且输入中有 CR 时，您不会在问题中说出您想要做什么。您也应该检查这种情况并以您喜欢的方式处理它。

接着：

```
inc si
jmp next 
```

# objective-c - 自动触发 IBAction

> ID：15325018
> 
> 赞同：1
> 
> 时间：2013-03-10T17:07:37.233
> 
> 标签：objective-c, xcode, cocoa-touch, ibaction

我有一个按钮，想在不触摸的情况下自动触发它。可能吗？

```
-(IBAction)xxx:(id)sender 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:56:45.477

我的回答假设您有以下方法：

```
- (IBAction)someAction:(UIButton *)sender {
} 
```

并且您在名为`someButton`.

如果您现在只需要“解雇它”，只需调用它：

```
[self someAction:someButton]; 
```

如果您需要“解雇”一次，但稍后，您可以执行以下操作：

```
// call it 5 seconds from now
[self performSelector:@selector(someAction:) withObject:someButton afterDelay:5.0]; 
```

如果要重复触发它，请使用计时器：

```
myTimer = [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(buttonTimerFired) userInfo:nil repeats:YES];

- (void)buttonTimerFired {
    [self someAction:someButton];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:10:37.157

动作可以像每个常规函数一样被调用——你可以通过在其他东西上运行计时器来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T17:11:44.890

你应该`NSTimer`用来做你的工作。

```
[NSTimer scheduledTimerWithTimeInterval: 0.01f target: self selector: @selector(BtoonMethod) userInfo: nil repeats: NO];

-(void)BtoonMethod
{
  // write code for call yor button method

} 
```

# android - 移除 ListView 中 ListItem 周围的蓝色光芒（android）

> ID：15325023
> 
> 赞同：1
> 
> 时间：2013-03-10T17:07:55.930
> 
> 标签：android, eclipse, listview, layout

单击时，我想摆脱列表项周围可怕的蓝色 HOLO 光晕。

我有：

```
<ListView
        android:id="@+id/projects_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:cacheColorHint="#00000000"
        android:choiceMode="singleChoice"
        android:listSelector="@android:color/transparent"
        android:paddingBottom="0dp"
        android:paddingLeft="0dp"
        android:paddingRight="0dp"
        android:scrollbars="none" /> 
```

但它仍然看起来像这样： [http ://www.roji.be/IMG_0001.png](http://www.roji.be/IMG_0001.png)

更新：好的，我的应用程序是：

```
<style name="AppBaseTheme" parent="android:style/Theme.Light">
<item name="android:actionBarStyle">@style/ActionBar</item>
        <item name="android:windowBackground">@drawable/gradient_bg</item>
        <item name="android:windowContentOverlay">@null</item>
</style> 
```

每个列表项都包装在一个 LinearLayout

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/com.axxes.netinc"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/listitemshadow" //9patch shadow 
    android:orientation="vertical"
    android:paddingTop="8dp" > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:26:24.707

将列表视图的淡入淡出边缘设置为无。

```
<ListView
    android:id="@+id/projects_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:cacheColorHint="#00000000"
    android:choiceMode="singleChoice"
    android:listSelector="@android:color/transparent"
    android:paddingBottom="0dp"
    android:paddingLeft="0dp"
    android:paddingRight="0dp"
    android:scrollbars="none"
    android:fadingEdge="none" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T10:23:31.393

To remove blue glow completely:

android:overScrollMode="never" place this attribute inside listview.
To change glow color add this code in application class

```
int glowDrawableId = getResources().getIdentifier("overscroll_glow", "drawable", "android");
        int edgeDrawableId = getResources().getIdentifier("overscroll_edge", "drawable", "android");
        Drawable androidGlow = ContextCompat.getDrawable(this, glowDrawableId);
        Drawable androidEdge = ContextCompat.getDrawable(this, edgeDrawableId);
        androidGlow.setColorFilter(getResources().getColor(R.color.white_20), PorterDuff.Mode.SRC_IN);
        androidEdge.setColorFilter(getResources().getColor(R.color.white_20), PorterDuff.Mode.SRC_IN); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-10T18:49:15.803

只需添加`android:overScrollMode="never"`您的列表视图。

```
 <ListView
            android:layout_marginTop="5dp"
            android:id="@+id/listview"
            tools:listitem="@layout/row_item"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:overScrollMode="never">
        </ListView> 
```

# mysql - MySQL查询按一列排序并生成其排名（相当于RANK OVER PARTITION oracle）

> ID：15325032
> 
> 赞同：2
> 
> 时间：2013-03-10T17:08:30.453
> 
> 标签：mysql, ranking

我有一个这样的 MySQL 表：

```
id | points | rank | league_id
______________________________
1  | 84     | 0    | 1
2  | 55     | 0    | 1
3  | 104    | 0    | 1
4  | 123    | 0    | 2 
```

我想要完成的是以下内容：

```
id | points | rank | league_id
______________________________
1  | 84     | 2    | 1
2  | 55     | 3    | 1
3  | 104    | 1    | 1
4  | 123    | 1    | 2 
```

所以 - 使用排名列来存储基于点数的排名，按league_id 分组。这可能看起来是多余的，但我需要它来实现我的目的（它用于一个梦幻体育网站，并且有一个排名列大大简化了许多 PHP 代码并减少了整个脚本所需的查询数量）。

我知道显而易见的解决方案 - 遍历行，按league_id 分组并一一更新排名。我想知道的是，有没有更有效的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:18:26.143

OTOH，所以首先在一次性数据库上进行测试，准备加载备份：

```
 SET @rank = 1;
  SET @league = 0;

  UPDATE tablename
  SET 
      rank = @rank := IF(@league = league_id,@rank+1,1),
      league_id = @league := league_id
  ORDER BY league_id,points DESC; 
```

# c# - 列表队列

> ID：15325033
> 
> 赞同：0
> 
> 时间：2013-03-10T17:08:33.767
> 
> 标签：c#, queue

是否可以声明`List<T>`如下的队列：

```
private static Queue<List<object>> webdata = new Queue<List<object>>(); 
```

我的对象列表通常包含几个数据表和一些其他对象

*   如果没有，有更好的方法吗？
*   如果队列计数为 100，我如何告诉线程停止排队，直到队列计数小于 50？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:12:01.203

```
private static Queue<List<object>> webdata = new Queue<List<object>>(); 
```

当然，您可以声明这样的数据类型。

> 如果队列计数为 100，我如何告诉线程停止排队，直到队列计数小于 50？

这是[TPL Dataflow](http://msdn.microsoft.com/en-us/library/hh228603.aspx)的完美工作。在阻止接受其他项目之前，您可以控制处理块中可能有多少项目。

如果您尚未了解 TPL 数据流，则需要投入时间来理解这些概念。但是，它非常适合这种类型的处理，并且可能非常值得付出努力。

# ruby - 在 Ruby 中安全地创建和操作 HTML，无需 Rails

> ID：15325038
> 
> 赞同：1
> 
> 时间：2013-03-10T17:09:06.497
> 
> 标签：ruby, html

在 Ruby 中，是否有一个用于创建具有以下特征的 HTML 的库：

*   不依赖于 Rails，也不是 Rails 的一部分。
*   所有内容都经过正确编码，包括属性。
*   节点不会立即呈现为字符串。也就是说，您可以创建一个节点，然后将其传递给一个方法，将更多节点附加到其中，或者添加和删除属性。然后，稍后，您可以请求将节点呈现为 HTML。

我知道“builder”和“Nokogiri”库，但它们似乎无法完成上述所有操作。

有一个“w3c-dom”库，它可以做我想做的一切，但是 DOM API 是非常低级的。大多数其他语言的库很久以前就抛弃了 DOM API。

# wordpress - 如何更改 NextGen Gallery ImageBrowser URL

> ID：15325043
> 
> 赞同：0
> 
> 时间：2013-03-10T17:09:54.963
> 
> 标签：wordpress, .htaccess, url-rewriting, nextgen-gallery

我正在使用最新版本的 NextGen Gallery (Wordpress)。当我应用 imagebrowser 而不是 jQuery 时，它会将图像更改为图像页面。图片页面的url就像

`www.example.com/postname/category/?pid=no.`

但我想把它改成

`www.example.com/image/no.`

这样做有什么技巧或 .htaccess 重写代码吗？

# ruby-on-rails - 无法运行“ruby 脚本/服务器”rails/version (LoadError)

> ID：15325046
> 
> 赞同：0
> 
> 时间：2013-03-10T17:10:15.333
> 
> 标签：ruby-on-rails, ruby

我在为其他人构建的 ruby​​ 应用程序启动服务器时遇到问题。当我运行“ruby server/script”命令时，会生成以下输出：

```
ruby script/server 
./script/../config/../vendor/rails/railties/lib/initializer.rb:7:in `require': no such file to load -- rails/version (LoadError)
    from ./script/../config/../vendor/rails/railties/lib/initializer.rb:7
    from ./script/../config/boot.rb:45:in `require'
    from ./script/../config/boot.rb:45:in `load_initializer'
    from ./script/../config/boot.rb:38:in `run'
    from ./script/../config/boot.rb:11:in `boot!'
    from ./script/../config/boot.rb:109
    from script/server:2:in `require'
    from script/server:2 
```

我已经看了又看，似乎看不到任何解决方案。

眼镜：

```
Ruby 1.8.7, 
Rails 2.2.2, 
gem -v 1.8.25 
```

编辑：
这样做之后，我仍然得到同样的错误：

```
[dralexmv@archbang rubygame]$ ruby script/server 
./script/../config/../vendor/rails/railties/lib/initializer.rb:7:in `require': no such file to load -- rails/version (LoadError)
    from ./script/../config/../vendor/rails/railties/lib/initializer.rb:7 
```

版本：

```
[dralexmv@archbang rubygame]$ gem -v 
1.4.2 
[dralexmv@archbang rubygame]$ rails -v 
Rails 2.2.2 
[dralexmv@archbang rubygame]$ ruby -v 
ruby 1.8.7 (2012-10-12 patchlevel 371) [x86_64-linux] 
```

编辑：宝石清单

```
*** LOCAL GEMS ***

actionmailer (2.2.2)
actionpack (2.2.2) 
activerecord (2.2.2) 
activeresource (2.2.2) 
activesupport (2.2.2) 
bundler (1.2.4) 
json (1.7.7) 
mysql (2.9.1) 
rails (2.2.2) 
rake (10.0.3) 
rdoc (4.0.0) 
rubygems-bundler (1.1.0) 
rubygems-update (1.4.2) 
rvm (1.11.3.6) 
sqlite3 (1.3.7) 
```

编辑：在测试应用程序上进行测试

```
[dralexmv@archbang test_a]$ ruby script/server
=> Booting WEBrick...
=> Rails 2.2.2 application started on `http://0.0.0.0:3000`
=> Ctrl-C to shutdown server; call with --help for options
[2013-03-10 12:06:35] INFO  WEBrick 1.3.1
[2013-03-10 12:06:35] INFO  ruby 1.8.7 (2012-10-12) [x86_64-linux]
[2013-03-10 12:06:35] INFO  WEBrick::HTTPServer#start: pid=11230 port=3000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:37:38.607

降级您的宝石并尝试。Rails 2.X 不适用于大于 1.5 的 gem 版本

```
sudo gem update --system 1.4.2 
```

# java - 使用 JMimeMagic 进行 MIME 类型检查 - MagicMatchNotFoundException

> ID：15325047
> 
> 赞同：4
> 
> 时间：2013-03-10T17:10:19.037
> 
> 标签：java, exception, mime-types

我需要检查`currentFile`MIME 类型。如果结果是成功并且文件具有 MIME-type `return true`。如果没有检查成功`return false`。
为了这个目标，我使用[JMimeMagic](http://sourceforge.net/projects/jmimemagic/)。
我试着[按照这篇文章做这个](http://www.rgagnon.com/javadetails/java-0487.html)

此代码的输出是 -`net.sf.jmimemagic.MagicMatchNotFoundException`

您需要**JDK 7** - 以这种方式将 File 更改为 byte[]（`Files.readAllBytes(path)`）。

**代码：**

```
 class ProbeContentTypeCheker implements Checker {

    @Override
    public boolean check(File currentFile) {
        String mimeType = null;
        try {
            Path path = Paths.get(currentFile.getAbsolutePath());
            byte[] data = Files.readAllBytes(path);
            MagicMatch match = Magic.getMagicMatch(data);
            mimeType = match.getMimeType();
        } catch (MagicParseException | MagicMatchNotFoundException
                | MagicException | IOException e) {
            e.printStackTrace();
        }

        if (null != mimeType) {
            return true;
        }

        return false;
    }
} 
```

**输出（仅当它是“错误”类型时）：**

```
 net.sf.jmimemagic.MagicMatchNotFoundException
    at net.sf.jmimemagic.Magic.getMagicMatch(Magic.java:222)
    at net.sf.jmimemagic.Magic.getMagicMatch(Magic.java:170)
    at task.ProbeContentTypeCheker.check(FileScan.java:357)
    at task.FolderScan.findFiles(FileScan.java:223)
    at task.FolderScan.findFiles(FileScan.java:215)
    at task.FolderScan.run(FileScan.java:202)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

如果文件是“ok”类型 => 输出到控制台正常。但一段时间后出现另一个**例外**：

```
Exception in thread "pool-1-thread-1" java.lang.OutOfMemoryError: Java heap space
    at java.lang.String.toCharArray(String.java:2753)
    at org.apache.oro.text.perl.Perl5Util.match(Unknown Source)
    at net.sf.jmimemagic.MagicMatcher.testRegex(MagicMatcher.java:663)
    at net.sf.jmimemagic.MagicMatcher.testInternal(MagicMatcher.java:433)
    at net.sf.jmimemagic.MagicMatcher.test(MagicMatcher.java:341)
    at net.sf.jmimemagic.Magic.getMagicMatch(Magic.java:208)
    at net.sf.jmimemagic.Magic.getMagicMatch(Magic.java:170)
    at task.ProbeContentTypeCheking.check(FileScan.java:384)
    at task.FolderScan.findFiles(FileScan.java:228)
    at task.FolderScan.findFiles(FileScan.java:225)
    at task.FolderScan.findFiles(FileScan.java:225)
    at task.FolderScan.run(FileScan.java:209)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

**问题：**

*   出现这种异常怎么解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:26:28.033

JMimeMagic [0.1.2](http://jcenter.bintray.com/jmimemagic/jmimemagic/0.1.2/jmimemagic-0.1.2.pom?direct)依赖于 Commons Logging 1.0.4 [NoClassDefFoundError](https://stackoverflow.com/questions/1457863/what-is-the-difference-between-noclassdeffounderror-and-classnotfoundexception)意味着 Java 虚拟机或 ClassLoader 实例尝试加载类的定义（作为普通方法调用的一部分或使用新表达式）并且找不到类的定义。解决方案是将 commons-logging-1.0.4.jar 添加到您的类路径中。

请注意，JMimeMagic 有其他[3rd 方依赖](http://mvnrepository.com/artifact/jmimemagic/jmimemagic/0.1.2)项：

1.  雅加达 ORO 2.0.8
2.  Log4j 1.2.8
3.  Xerces 2.4.0（可选）
4.  xml-apis 2.0.2
5.  xmlParserAPI 2.0.2

**更新 - MagicMatchNotFoundException**

如果未找到与提供的数据匹配的 mime 类型，则会引发MagicMatchNotFoundException [。](http://jmimemagic.sourceforge.net/apidocs/net/sf/jmimemagic/MagicMatchNotFoundException.html)您可以将日志级别设置`net.sf.jmimemagic`为 DEBUG 以获取有关正在发生的事情的更多信息

**更新 2 - OutOfMemoryError**

OOM 看起来与 JmimeMagic 的行为有关。在某些情况下，它会尝试对整个字节数组输入运行正则表达式以查找幻数匹配。有关 Nuxeo 企业平台，请参阅此报告的[问题](https://jira.nuxeo.com/browse/NXP-9337)。
我认为您可以通过限制传递给的字节数组的大小来解决此问题`getMagicMatch`

# python - python列表索引是同一个列表

> ID：15325049
> 
> 赞同：1
> 
> 时间：2013-03-10T17:10:20.990
> 
> 标签：python, list, indexing

我刚刚看到如下输出 - 只是想知道这里发生了什么。

```
>>> l = [1,2,3,4]
>>> l[0]=l
>>> l
[[...], 2, 3, 4] 
```

为什么 l[0] 值会这样显示？谁能解释我为什么会出现这种行为。我在想它会像 [[1,2,3,4], 2, 3, 4] 一样返回。

干杯，卡莱

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T17:11:25.933

它显示了`...`，否则它将不得不无限递归。

Python 中的列表对象是一个指向列表的指针——像分配它一样`l[0] = l`不会复制。例如，尝试

```
l1 = [1, 2, 3, 4]
l2 = [1, 2]
l2[0] = l1
print l2
# [[1, 2, 3, 4], 2]
l2[0].append(5)
print l1
# [1, 2, 3, 4, 5] 
```

请注意，即使您从未`l1`明确更改过，它现在已被附加到。

因此，当您在其自身中放置一个列表时，该列表项*仍然*是指向整个列表的链接。在上面的代码之后，尝试执行以下操作：

```
l[1]  # ==> 2
l[0][1]  # ==> 2
l[0][0][1]  # ==> 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T17:12:37.850

使用列表的副本来避免无限递归：

```
In [10]: l = [1,2,3,4]

In [11]: l[0] = l[:]

In [12]: l
Out[12]: [[1, 2, 3, 4], 2, 3, 4] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T17:39:33.663

如果您使用 PrettyPrinter，输出将是不言自明的

```
>>> l = [1,2,3,4]
>>> l[0]=l
>>> l
[[...], 2, 3, 4]
>>> pp = pprint.PrettyPrinter(indent = 4)
>>> pp.pprint(l)
[<Recursion on list with id=70327632>, 2, 3, 4]
>>> id(l)
70327632 
```

# html - ruby 解析的问题

> ID：15325050
> 
> 赞同：2
> 
> 时间：2013-03-10T17:10:23.260
> 
> 标签：html, ruby, arrays, parsing, nokogiri

我只是在用红宝石中的 nokogiri 解析网站时遇到了一个小问题。

这是网站的样子

```
<div id="post_message_111112" class="postcontent">

        Hee is text 1 
     here is another
      </div>
<div id="post_message_111111" class="postcontent">

            Here is text 2
    </div> 
```

这是我的代码来解析它

```
 doc = Nokogiri::HTML(open(myNewLink))
 myPost = doc.xpath("//div[@class='postcontent']/text()").to_a()

ii=0

 while ii!=myPost.length
     puts "#{ii}  #{myPost[ii].to_s().strip}"
   ii+=1
 end 
```

我的问题是当它显示它时，由于 之后的新行`Hee is text 1`， to_a 让它变得很奇怪

```
myPost[0] = hee is text 1
myPost[1] = here is another
myPost[2] = here is text 2 
```

我希望每个 div 都是自己的消息。像

```
myPost[0] = hee is text 1 here is another
myPost[1] = here is text 2 
```

我将如何解决这个谢谢

**更新**

我试过

```
 myPost = doc.xpath("//div[@class='postcontent']/text()").to_a()

myPost.each_with_index do |post, index|
  puts "#{index}  #{post.to_s().gsub(/\n/, ' ').strip}"
end 
```

我放 post.to_s().gsub 是因为它抱怨 gsub 不是一种发布方法。但我仍然有同样的问题。我知道我做错了只是破坏了我的头

**更新 2**

忘了说新线是`<br />`甚至连

```
 doc.search('br').each do |n|
  n.replace('')
end 
```

或者

```
doc.search('br').remove 
```

问题依然存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:36:22.303

如果您查看`myPost`数组，您会发现每个 div 实际上是它自己的消息。第一个恰好包含一个换行符`\n`。要用空格替换它，请使用`#gsub(/\n/, ' ')`. 所以你的循环看起来像这样：

```
myPost.each_with_index do |post, index|
    puts "#{index}  #{post.to_s.gsub(/\n/, ' ').strip}"
end 
```

**编辑：**

根据我对它的有限了解，xpath 只能找到节点。子节点是`<br />`，因此它们之间有多个文本，或者您`div`的搜索中包含标签。肯定有一种方法可以在`<br />`节点之间加入文本，但我不知道。在你找到它之前，这里有一些有用的东西：

1.  将您的 xpath 匹配替换为`"//div[@class='postcontent']"`

2.  调整循环以删除 div 标签：

    ```
    myPost.each_with_index do |post, index|
         post = post.to_s
         post.gsub!(/\n/, ' ')
         post.gsub!(/^<div[^>]*>/, '') # delete opening div tag
         post.gsub!(%r|</\s*div[^>]*>|, '') # delete closing div tag
         puts "#{index}  #{post.strip}"
    end 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:13:37.180

在这里，让我为您清理：

```
doc.search('div.postcontent').each_with_index do |div, i|
  puts "#{i} #{div.text.gsub(/\s+/, ' ').strip}"
end
# 0 Hee is text 1 here is another
# 1 Here is text 2 
```

# python - 在python脚本中实例化类

> ID：15325053
> 
> 赞同：0
> 
> 时间：2013-03-10T17:10:51.763
> 
> 标签：python, python-3.x

我想在脚本中创建一个 Node 对象并将其用作实例变量。在下面显示的代码中，该行`root = Node('')`给了我一个错误，说未定义的变量 Node.js。

```
if __name__ == '__main__':
    #url = ''
    #processWords(url)
    currentWord = []
    root = Node('')
    curr = root
    words = ['adelaide', 'ahmedabad', 'calcutta', 'california', 'chicago', 'chennai', 'delhi', 'dubai', 'melbourne', 'mumbai']
    process(words)
    play()

class Node:
    def __init__(self, char):
        self.char = char
        self.children = set() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:12:45.627

您需要在尝试使用它`Node` *之前进行定义。*

# python - 优化 Mass ID3 标签扫描

> ID：15325056
> 
> 赞同：0
> 
> 时间：2013-03-10T17:11:19.097
> 
> 标签：python, id3, mutagen

我正在构建一个小工具，我想扫描音乐收藏，读取曲目的 ID3 信息，只要该特定艺术家的歌曲没有被访问超过两次，就可以存储它。我打算`Mutagen`用于阅读标签。

然而，我和其他许多人的音乐收藏量很大，超过 20,000 首歌曲。据我所知，图书馆之类`Mutagen`的必须打开和关闭每首歌曲才能从中获取 ID3 信息。虽然 MP3 的性能不是很重，但歌曲很多。我已经计划以保持每个艺术家的数量的形式进行小的优化，如果他们的歌曲数量超过 2，则不存储任何信息，但据我所知，我仍然需要打开每首歌曲以检查艺术家 ID3 标签.

我玩弄了使用目录作为艺术家姓名提示的想法，并且一旦艺术家歌曲数量超过 2，就不再阅读该目录中的任何信息，但并不是每个人都将他们的音乐设置在整洁的 Artist/Album/Songs 目录中。

有没有人想到任何其他优化可以减少打开这么多 MP3 的开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:26:33.283

提防过早的优化。你真的确定这将是一个性能问题吗？您的要求是什么——脚本需要多快运行？使用天真的方法运行速度有多快？在优化之前进行分析和评估。我认为您很可能会遇到实际不存在的性能问题。

如果您想要一个有保证的正确答案，您无法避免访问每个文件一次。如您所见，完全跳过文件的优化基本上相当于自动猜测。

您是否可以记录您之前完成的扫描，并在后续扫描中使用文件的最后修改日期来避免重新扫描您已经扫描过一次的文件？这可能意味着您的第一次扫描可能需要一点时间，但后续扫描会更快。

如果您需要快速对音乐收藏进行大量复杂查询，请考虑将整个收藏的元数据导入数据库（例如 SQLite 或 MySQL）。导入需要时间——更新以插入新文件需要一点时间（如上检查最后修改的日期）。然而，一旦数据进入您的数据库，假设数据库设置合理，一切都应该是相当快速的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:34:08.143

一般来说，对于这个问题，我建议您使用多种方法来检测艺术家或曲目标题：

第一种检查方法：文件名可能是 ARTIST-TITLE.mp3 格式吗？（或类似的）
（文件名是“Artist-Track.mp3”）

```
for file in os.listdir(PATH_TO_MP3s):
   artist = re.split("[\_\-\.]", file)[-3]
   track = re.split("[\_\-\.]", file)[-2]
   filetype = re.split("[\_\-\.]", file)[-1] 
```

当然，您必须先确定文件是否为该格式。

第二步（如果首先不适合该文件）将检查目录名称是否适合（如您所说）

第三个也是最后一个是检查 ID3 标签。

但请确保在信任之前检查这些值是否正确。
例如，如果有人将“Track-Artist.mp3”用于我提供的代码艺术家和轨道将被切换。

# android - Nexus S 中的 LKM 支持

> ID：15325061
> 
> 赞同：0
> 
> 时间：2013-03-10T17:11:27.670
> 
> 标签：android, linux, linux-kernel, linux-device-driver

我有 Android 4.1.2 的 Nexus S，我想将我的自定义 Loadable-Kernel-Module 插入其中。我已经扎根了。我想知道

1.  运行内核的 Nexus S 是否已经支持 LKM，或者我必须使用 LKM-support 刷新我自己的内核，然后插入我的模块？

2.  我已经下载了 Android 2.2 源代码，现在从 android.source.com 下载 Samsung-kernel 以使用 Android 4.1.2 为我的 Nexus S 编译模块。我想知道我是否必须下载 4.1.2 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T19:28:13.607

1.  您可以使用“insmod your_lkm.ko”作为 root 加载您的 LKM。它应该适用于任何安卓系统。

2.  您可能希望使用当前在设备上的内核而不是其他版本来编译 LKM（尤其不是具有主要版本更改的内核，例如 linux 版本 2.6 和版本 3.0）

# php - php foreach() 在 foreach()

> ID：15325063
> 
> 赞同：0
> 
> 时间：2013-03-10T17:11:35.120
> 
> 标签：php, file, list, foreach, lines

我正在尝试打开多个文件，然后逐行拆分每个文件。我正在使用它`foreach()`来浏览文件，而其中的另一个`foreach()`用于拆分文件的行。

```
$dir = '../mydir';
$files = scandir($dir, 1);
foreach($files as $input){
    if(($input!==".")&&($input!=="..")){
        $myfile="../mydir/".$input;
        $fh = fopen($myfile, 'r');
        echo $input."... ";
        $input = substr($input,0,-4);
        $FN = "../mydir/out.".$input.".xls";
        $FH = fopen($FN, 'w') or die("Can't open file!");
        $lines = file($myFile);
        foreach($lines as $line) {
        list($OPT1,$OPT2) = explode(",", $line);
            fwrite($FH, $OPT1);     
        }
        echo "Done.";
    }
} 
```

但我`$OPT1`的是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:17:04.087

我怀疑您`$fh = fopen($myfile,'r')`正在锁定文件，因此`file()`无法访问它。您似乎没有使用该文件句柄（实际上您稍后会覆盖该变量），因此只需删除该行就可以了。

编辑：哦，显然变量名是区分大小写的。你不能互换`$myfile`和`$myFile`。

# java - 如何在单个视图（jsp）文件中使用多个控制器

> ID：15325065
> 
> 赞同：1
> 
> 时间：2013-03-10T17:11:45.413
> 
> 标签：java, spring, jsp, model-view-controller

我有一个 jsp 页面，`mypage.jsp` . 这有 2 个标签 - 第一个标签和第二个标签。这些选项卡中的每一个都有自己的表单。

每个选项卡必须由单独的控制器处理，例如 firsttab 由 处理`firsttabcontroller`， secondtab 由 处理`secondtabcontroller`。

现在，如果我在 firsttab 中提交表单，则 secondtab 中的内容可能会被更改。并且随着 secondtab 中的更改影响 firsttab 内容，可以预期相同的效果。

**每次我向任何控制器发出请求时，都`mypage.jsp` 应该呈现相同的页面。**

所以问题是处理从同一视图映射到不同控制器的多个表单/选项卡。

如何做到这一点？我研究了一些类似的问题，但没有一个给我满意的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:55:06.713

我可能会使用 AJAX 来做到这一点。您可以使用从两个不同控制器 URL 请求的 HTML 填充选项卡。

这可能如下所示，其中您要填充的选项卡有一个 id 为 mytab 的 div。

```
$.get('<spring:url value='/myurl'/>', function(data) {
  $('#mytab').html(data);
}); 
```

当您在选项卡 1 中提交表单时，您只需触发 GET 到填充选项卡 2 的控制器以刷新内容。

# c++ - 为什么缓冲速度只会随着 ifstream 中缓冲区大小的增加而增加？

> ID：15325072
> 
> 赞同：1
> 
> 时间：2013-03-10T17:12:32.123
> 
> 标签：c++, ifstream

我有一个信息检索和存储课程项目，第一部分我必须找到从硬盘读取大文件的最佳缓冲区大小。我们的 ta 说随着缓冲区大小增加到某个点（通常是 4 个字节），读取速度会提高，但之后会降低。但是使用下面的代码，无论缓冲区大小还是文件大小，它都会增加（我已经在 100 mb 上对其进行了测试）。据我所知，缓冲仅在并行异步进程（如线程）中有意义，并且当文件被碎片整理和\或查找文件目录和地址的成本（对于disk) 足够重要，那么问题是否与我的代码或 ifstream 处理事情的方式有关，或者这些条件在这里不成立？

```
ifstream in("D:ISR\\Articles.dat", std::ifstream::binary);

if(in)
{
    in.seekg(0, in.end);
    int length = in.tellg();

    length = 100 * 1024 * 1024;
    int bufferSize = 2;
    int blockSize = 1024;//1kB
    int numberOfBlocks = length / blockSize;
    if(length % blockSize > 0) numberOfBlocks++;

    clock_t t;
    double time;

    for(int i = 0; i < 5; i++)
    {
        in.seekg(0, in.beg);
        int position = 0;
        int bufferPosition;
        char* streamBuffer = new char[bufferSize];
        in.rdbuf()->pubsetbuf(streamBuffer, bufferSize);

        t = clock();

        for(int i = 0; i < numberOfBlocks; i++)
        {
            char* buffer = new char[blockSize];
            bufferPosition = 0;

            while(bufferPosition < blockSize && position < length)
            {
                in.read(buffer + bufferPosition, bufferSize);
                position += bufferSize;
                bufferPosition += bufferSize;
            }

            delete[] buffer;
        }

        t = clock() - t;
        time = double(t) / CLOCKS_PER_SEC;
        cout << "Buffer size : " << bufferSize << " -> Total time in seconds : " << time << "\n";

        bufferSize *= 2;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:18:59.813

> 我所知道的缓冲只在并行异步进程中才有意义

不！不！缓冲在许多情况下都有意义。一个常见的情况是 I/O。如果增加读/写缓冲区的大小。操作系统可以少接触 I/O 设备。

它可以在每个操作中读取/写入更大的块。然后，性能变得更好。

选择缓冲区大小`2^n`：128, 512, 1024,... 否则会降低性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T03:53:29.590

> 无论缓冲区大小或文件大小，它都会增加

上述说法不成立。由于您重复测量程序，由于系统缓存的好处，连续的结果将比以前的结果更好。实际上，您从系统缓存而不是硬盘访问文件内容。但是在缓冲区大小超过阈值后，读取性能会下降。感谢 Richard Steven 在 APUE 2nd 的第 3 章，您可以找到详细而广泛的读写缓冲区实验。

# firefox-addon - 如何在 XUL 弹出面板下放置阴影

> ID：15325076
> 
> 赞同：0
> 
> 时间：2013-03-10T17:12:54.060
> 
> 标签：firefox-addon, firefox-addon-sdk, xul

我试图在定义如下的弹出面板下放置一个阴影：

```
<popupset id="mainPopupSet">
    <panel id="autoTagBookmarksPopup" noautohide="true" fade="none" backdrag="true" level="float">
        <hbox id="titleBox">
            <spacer flex="1"/>
            <image id="closeImage" align="end"/>
        </hbox> 
```

...我没有成功：box-shadow

有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:14:54.510

你可以粘贴你用于 box-shadow 的 css 吗？

尝试这个...

```
-moz-box-shadow: 3px 3px 4px #000;
-webkit-box-shadow: 3px 3px 4px #000;
box-shadow: 3px 3px 4px #000;

/* For IE 8 */
-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')";
/* For IE 5.5 - 7 */
filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-27T10:28:24.217

这是一个老问题，但我有同样的问题，想分享我的解决方案，所以这可能对其他人有帮助。

我还没有找到将盒子阴影直接放在面板上的方法。看起来，面板元素之外的所有视觉元素都将被剪切（阴影放在外面）。

但是，我随后为第一个孩子定义了阴影并添加了一些边距，以便阴影可见。

对于给定的示例，这可能看起来像这样（未经测试）：

```
panel#autoTagBookmarksPopup {
    background-color: transparent;
    border-width: 0px;
}

panel > hbox#titleBox {
    margin: 5px;
    border: 1px solid #bbb;
    background-color: #fff;
    box-shadow: 2px 2px 3px #888;
} 
```

# javascript - 删除 问题

> ID：15325080
> 
> 赞同：0
> 
> 时间：2013-03-10T17:13:00.057
> 
> 标签：javascript, jquery, html, forms

我正在构建一个食谱保存应用程序，其中有一个类似于[http://jsfiddle.net/LHPbh/](http://jsfiddle.net/LHPbh/)的表单。

如您所见，我有一组表单元素包含在一个`<li>`. 您可以单击添加成分并将更多的 li 添加到该字段中。

我的问题是：

1.  第一个 li 是唯一删除的。如果您单击添加成分，然后尝试删除该成分，则没有任何效果？
2.  有没有办法不让第一个 li 被它删除，但所有后续 li 的旁边都有一个删除链接？（仅仅因为应该总是至少有一种成分？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T17:17:57.350

当您调用时`clone()`，它不会复制事件。[如文档中所述](http://api.jquery.com/clone/)，您需要调用`clone(true)`它才能执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:19:25.230

您没有在克隆的元素上放置事件侦听器。此外，您不应为“删除”链接提供自己的 id，因为它们必须是唯一的。

要使第一个成分没有删除按钮，请不要在标记中包含一个，而只是动态创建它们并将它们附加到克隆的元素中：

```
var deleteButton = $("<a class='float-left'>Delete</a>").click(deleteThis);
$('ul#listadd > li:first')
  .clone()
  .attr('name', 'ingredient' + newNum)
  .append(deleteButton)
  .appendTo('ul#listadd');

function deleteThis() {
    var li = $(this).closest('li')
    li.fadeOut('slow', function() { li.remove(); });
} 
```

[jsfiddle.net 上的演示](http://jsfiddle.net/LHPbh/21/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T17:20:42.980

[http://jsfiddle.net/LHPbh/2/](http://jsfiddle.net/LHPbh/2/)

```
$('.deleteThis').live("click", function () {
        var li = $(this).closest('li')
        li.fadeOut('slow', function() { li.remove(); });
    }); 
```

这是对 1\. 点的回答。问题是，事件处理程序绑定没有发生在新创建的元素中，因为此代码仅在页面加载时运行。这可以通过使用 .live() 来解决。另一个问题是，id-s 必须是唯一的。所以代替 id，在这里你可以使用类 .deleteThis。

[http://jsfiddle.net/LHPbh/19/](http://jsfiddle.net/LHPbh/19/)

这增加了对 2\. 点的回答：

```
if ($("#listadd li").length == 1) {
    return;
} 
```

如果列表仅包含 1 个 li 元素，则回调的其余部分将不会运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T17:32:25.743

您正在添加动态添加到 DOM 的项目，因此 jQuery 无法访问它们:) 在这种情况下，您可以使用以下代码：

```
$(document).on('click', '.selector', function(e) {

    //code here

}); 
```

其次，您正在加载一个相当旧版本的 jQuery。

第三，您试图选择一个 ID 已经存在的元素，并且 ID 只能存在一次。我已将其更改为更新示例中的类。

最后，您定义了两次链接的类，如下所示：

```
<a class='float-left' id="deletethis" href='#' class="deletethis">Delete</a> 
```

这也带来了问题，所以我将其更改为更正标记，如下所示：

```
<a class='float-left deletethis' href='#'>Delete</a> 
```

祝你好运:) 我在这里更新了你的 jsFiddle：

[http://jsfiddle.net/q4pf6/](http://jsfiddle.net/q4pf6/)

# haskell - Haskell：我的程序没有进行转换

> ID：15325091
> 
> 赞同：0
> 
> 时间：2013-03-10T17:13:36.677
> 
> 标签：haskell

我制作了一个简单的程序来处理我已经实现的队列数据结构。这是我的代码

```
transf :: Queue -> [Char]
transf emptyQueue = []  
transf queue = [front queue] ++ transf (dequeue queue) 
```

队列在哪里

```
newtype Queue = Q [Char] deriving (Show)

emptyQueue :: Queue
emptyQueue = Q []

queueIsEmpty :: Queue -> Bool
queueIsEmpty (Q []) = True
queueIsEmpty (Q _) = False

enqueue :: Char -> Queue -> Queue
enqueue x (Q q) = Q (q ++ [x])

dequeue :: Queue -> Queue
dequeue (Q (_:xs)) = Q xs
dequeue (Q []) = error "dequeue: empty queue"

front :: Queue -> Char
front (Q (x:_)) = x
front (Q []) = error "front: empty queue" 
```

我的程序不会将队列转换为字符串。哪里有问题？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T17:22:14.647

```
transf emptyQueue = [] 
```

这`emptyQueue`只是您的参数的名称。您不是针对全局内容的模式匹配`emptyQueue`。您不能对这样的变量进行模式匹配 - 只能针对构造函数。

您必须编写`transf (Q [])`以匹配空队列，但请注意，您的整个函数可以简单地定义为`transf (Q xs) = xs`.

# iphone - 仅在插入动画完成后重新加载 UITableViewCell

> ID：15325092
> 
> 赞同：3
> 
> 时间：2013-03-10T17:14:00.740
> 
> 标签：iphone, ios, objective-c, uitableview, uikit

所以我在`UITableViewCell`我的 tableView 中插入了一个。

```
[searchTableView beginUpdates];
[searchTableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationTop];
[searchTableView endUpdates]; 
```

在此之后，我正在运行一个异步请求，该请求使用淡入淡出动画更新 tableviewcell。

```
[someRequestWithCompletion:^(id data) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [searchTableView beginUpdates];
            [searchTableView reloadRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            [searchTableView endUpdates];
        });
 }]; 
```

但是这个请求有可能在插入动画完成之前完成。如果请求在插入动画之后完成，则没有问题，如果它之前完成并`reloadRowsAtIndexPaths`在当前插入的同一单元格上调用 a ，则单元格会立即显示并在插入动画淡出时强制重新加载。

有没有办法在单元格完全插入后触发重新加载更新？最好的方法是什么？

如果有任何问题，请在评论中告诉我

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-25T14:16:12.540

试试这个..

你可以在动画完成后重新加载你的 TableView。

```
[CATransaction begin];
[searchTableView beginUpdates];

[CATransaction setCompletionBlock: ^{
        [searchTableView reloadData];
    }];

[searchTableView deleteRowsAtIndexPaths: [NSArray arrayWithObjects: indexPath, nil]
                       withRowAnimation: UITableViewRowAnimationAutomatic];

[searchTableView endUpdates];

[CATransaction commit]; 
```

# c - 在 C 中分配大内存（Project Euler Prob）

> ID：15325093
> 
> 赞同：-1
> 
> 时间：2013-03-10T17:14:23.620
> 
> 标签：c, arrays, math, memory-management

我试图在项目 euler 上使用 C 来解决问题[点击这里](http://projecteuler.net/problem=16) 是代码。它适用于 10 个值，但对于 1000 个值，它会给出错误的输出。我注意到它在 32 之前给出了正确的输出。我想我超出了内存或其他东西。如何为这么大的数组分配内存？

```
#include <stdio.h>
int main() { 
    int a[10], i, sum=1, b=0;

    for(i = 1; i < 10; i++) { 
        a[0] = 1;
        a[i] = sum + a[i-1];
        sum = sum + a[i-1];
    }

    for(int j = 1;j > 0; j++) {
        b = b + sum%10;

        if(sum<10)
            break;

        sum = sum/10;
     }

     printf("%d\n",b);

     return 0;
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T22:44:43.337

您可以尝试将 2 ^(1000)计算为 80-bit `long double`，然后使用`sprintf`将其转换为字符串，然后对该字符串的数字求和。

为什么这样有效：

浮点类型将数字存储为尾数乘以指数。指数始终是 2 的幂，尾数可以是 1。对于 a `long double`，指数最高可达 2 ^(16383)。 `printf`和朋友，在现代实现中，将正确打印出浮点数的数字。

代码：

```
int main() {
  char buf[1024]; int ans = 0;
  sprintf(buf, "%.0f", 0x1.0p1000);
  for (int i = 0; buf[i]; i++) ans += buf[i] - '0';
  printf("%i\n", ans);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T22:56:58.637

> I noticed that it gives a right output till 32

That is, because the integer type you're using has 32 bits. It simply can't hold larger numbers. You can't solve it the conventional way.

Here's what I'd suggest: First let's estimate how many digits that number will have. Every time a number gets 10-fold in decimal writing a new digit is required. So the number of digits for a number in decimal is given by ceil(log10(n)). So for 2^1000 you need ceil(log10(2^1000)) digits, but that is just ceil(1000*log10(2)) = 302, so you'll need 302 decimal digits to write it down.

This gives the next idea: Write down the number 1 in 302 digits, i.e. 301 times '0' and one '1' in a string. Then double the string 1000 times, by adding it to itself just like in elementary school, carrying the overflowing digits.

* * *

*EDIT* I think I should point out, that the problem encountered is the whole point of this Project Euler problem. Project Euler problems all have in common, that you can not solve them by using naive programming methods. You must get creative to solve them!

# python - GAE 的套接字库的替代方案

> ID：15325094
> 
> 赞同：0
> 
> 时间：2013-03-10T17:14:23.823
> 
> 标签：python, google-app-engine, sockets

`sockets`在 Google AppEngine 上运行的 Python 标准库模块是否有替代方案？由于沙箱，套接字在那里被禁用。

我看过其他类似的问题，但答案是没有实现套接字，而不是问题。其中一个提到了一个表单链接，该链接可以成为可以访问这些功能的受信任测试人员，但我还没有收到 Google 的消息：/

我在想 Twisted，因为它支持很多协议，但我对套接字及其工作方式知之甚少，所以我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:18:24.477

不幸的是，您只能在 App Engine 上发出 HTTP 和 HTTPS 请求。没有其他的。

您可以在 App Engine 上获得的最接近的东西是[Channels](https://developers.google.com/appengine/docs/python/channel/overview) API，它可以满足您的需求。

urllib3 甚至不相关。它执行 HTTP 和 HTTPS，而不是套接字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-26T16:02:38.373

好消息！谷歌最近发布了一个应用引擎的套接字 API，文档在这里：

[https://developers.google.com/appengine/docs/python/sockets/](https://developers.google.com/appengine/docs/python/sockets/)

它仍处于预览版本中（截至 2014 年 3 月），它有其自身的许多限制，但它应该能够处理许多情况。

# solr - Lucene 找到交叉点最多的文档

> ID：15325101
> 
> 赞同：1
> 
> 时间：2013-03-10T17:15:08.410
> 
> 标签：solr, lucene

我想在Lucene中实现“共同好友”的功能，所以我有很多文档都有好友列表。

```
DOC:
    id: p1
    name: Mike
    profile_id: 1
    friends_id: [2,3,4,5,6,7,8] 
```

或者

```
id: p3
name: John
profile_id: 3
friends_id: [6,7,8,9,10] 
```

或者

```
 id: p5
    name: Roftl
    profile_id: 5
    friends_id: [1,2,3,6,10] 
```

如果我是帐户 Mike，我想通过 Lucene 查询找到另一个具有更多共同朋友的帐户。如果可能的话，还可以在响应中添加带有该数字的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:09:42.493

您可以尝试以下步骤。

1) 访问 Mike 文档的 termvector。

2）访问字段friends_id中的条款

3) 迭代这些术语（即friend_ids）并形成术语查询的布尔查询。

4) 使用该查询搜索索引。

5）假设您在 friends_id 归档中没有重复的术语，它应该可以工作。最佳结果应符合您的要求。

更好的是，Lucene 提供了 MoreLikeThisQuery 来实现查询中提供的术语的相似文档。

简而言之，此查询用于查找候选文档的相似文档。它所做的只是上述步骤。在您的用例中，您不是在为候选文档寻找相似的文档，而是为文档中的某个字段寻找最相似的文档。

[这是MoreLikeThisQuery](http://java.dzone.com/articles/lucene-morelikethis-example)的示例代码

[另一个教程](http://cephas.net/blog/2008/03/30/how-morelikethis-works-in-lucene/)

# google-chrome - 使用 Google Chrome 在我的本地主机上浏览网站时，我可以通过检查元素访问我的文件夹的名称和内容吗？

> ID：15325104
> 
> 赞同：0
> 
> 时间：2013-03-10T17:15:22.860
> 
> 标签：google-chrome, localhost

我听说谷歌浏览器可以在 localhost 上检索网站的 html 内容和文件夹名称，并且可以直接从浏览器保存修改。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:19:12.513

永久改变？还是发展“如果发生变化”？

IE 开发人员工具和 Firefox 的 Firebug 可以对会话进行动态“假​​设”更改，以便进行故障排除和尝试隔离问题。Chrome 也有这个选项。这三个都是用 F12 触发的。

但看起来 Chrome 也有可以让你动态编辑 HTML 的扩展。 [http://www.addictivetips.com/internet-tips/pageedit-edit-any-website-within-chrome-view-changes-instantly/](http://www.addictivetips.com/internet-tips/pageedit-edit-any-website-within-chrome-view-changes-instantly/)

Firefox 可能有类似的项目，Chrome 可能有替代品或更多。

# php - 检查 MySQL 行中的值

> ID：15325111
> 
> 赞同：0
> 
> 时间：2013-03-10T17:16:17.010
> 
> 标签：php, mysql, sql, regex, pdo

我将用户 ID 值存储在由 | 分隔的表字段中 (user_id1|user_id2|user_id3|user_id17)。

用户 ID 将在某些时候从该字段中添加和删除。

如何检查当前用户 ID 是否存在于字段中或不使用查询？它当然需要完全匹配。无法查找`user_id1`和查找`user_id17`。

我知道我可以使用 SELECT 查询，分解字段，然后使用，`in_array`但如果有办法使用查询来做到这一点，那就更好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T18:54:41.303

为尚未阅读该主题的用户（这是一个坏主意）存储您的论坛值是不可扩展的。如果您真的必须这样做，请*以相反的方式*进行，因为您还会遇到与在新用户注册时必须向**数据库中的每个主题添加条目相关的问题。**

而不是前面的关系表，而是尝试如下执行：¹

```
Table: topics
+----+-------+------+-----
| id | title | body | ...
+----+-------+------+-----
| 1  | xyz   | .... | ...

Table: replies
+----+-------+------+-----
| id | title | body | ...
+----+-------+------+-----
| 3  | xyz   | .... | ...

Table: read_topics
+---------+----------+
| user_id | topic_id |
+---------+----------+
| 2       | 1        | 
```

当您拥有大量用户时，您的方法虽然可能（并且更容易想象）开始崩溃，而可扩展性就是您在评论中提到的。这里的另一个问题是，使用您的方法，您会受到**巨大的**性能损失，因为您必须从数据库中提取数据，拆分它，然后进行操作和重新组合，然后再进行另一个事务。您还***遇到了两个 CGI 线程同时写入表的***问题。玩得开心...

您正在使用一种工具来进行数据操作、排序、数据关系和存储，因此请将其用于所有这些，而不仅仅是作为信息的垃圾场。

^(1\. 我远不是数据库优化方面的完整专家，而且很可能有比这更好的方法。测试！)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:30:59.880

以这种方式存储 id 是个坏主意。更好的策略是将此列重构为另一个表，并在该表中为每个 user_id 存储一行。

在任何情况下，如果您可以通过始终以“|”开始和结束内容来稍微改变在列中存储 user_ids 的方式，

例如，改变这个：

```
(user_id1|user_id2|user_id3|user_id17) 
```

到

```
(|user_id1|user_id2|user_id3|user_id17|) 
```

然后您的查询变得简单

```
SELECT * FROM dbname.tablename WHERE userid_csv LIKE "%|user_id1|%" 
```

请注意，这可能非常低效，并可能导致表格扫描。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:55:59.537

听起来您正在寻找 MySQL 等效的[Postgres 数组](http://www.postgresql.org/docs/9.2/static/arrays.html)。它值得一票，因为这是解决您描述的问题的合理方法。不幸的是，在 MySQL 支持数组类型数据之前，您可能不得不求助于您所描述的 hinky string-to-array 过程。我会对其他人在 MySQL 中设置数组类型值和关系的解决方案进行一些研究。我还会尝试使用您期望的数据类型对海量数据集进行一些测试，看看这是否真的是一种优化，或者如果使用交叉表使用更标准的解决方案会更好。

在没有看到您的数据的情况下想到的另一个想法是创建一个包含主题 ID 和用户 ID 的交集表，但仅在读取主题时插入一行。然后，您可以假设用户/主题缺少一行表示“未读”。

# c++ - 状态类型 boost:fusion in boost:odeint

> ID：15325114
> 
> 赞同：2
> 
> 时间：2013-03-10T17:16:49.117
> 
> 标签：c++, boost, odeint

我想用并行`boost::odeint`求解不同变量集合的微分方程——比如类型。`std::vector`一种解决方案当然是将所有变量组合成一个大向量，然后将其用作状态变量。

但是，我更喜欢更优雅的解决方案，例如`boost::fusion`用作状态类型，然后保存不同的向量。据我从[帖子和](http://boost.2283326.n4.nabble.com/A-couple-of-odeint-questions-td4636453.html)[相关问题](https://github.com/ddemidov/gpgpu_with_modern_cpp/blob/master/src/lorenz_ensemble/viennacl_lorenz_ensemble.cpp)的实施中了解到，这样做原则上没有障碍。我只错过了一些具体实现的提示——特别是关于正确的规范

代数、运算和调整大小

例如创建错误步进器所需的。哪些现有的实现——例如`odeint::fusion_algebra`——可以直接使用，在这种情况下还需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:08:12.193

只要它的每个元素都支持，就可以使用`boost::fusion`编译时容器`fusion_algebra``default_operations`

*   与标量 (*) 相乘
*   加法和减法 (+,-)
*   调整大小

基本浮点类型就是这种情况，例如`double`, `float`，甚至`std::complex`。这也适用于支持表达式模板的类型，例如来自[MTL](http://mtl4.org)、boost::ublas 或 vexcl 和 viennacl 的向量和矩阵类型。但这是不可能的`std::vector`，因为向量没有实现或重载适当的 +*-/ 运算符。在这种情况下，您有三种可能性

1.  选择支持表达式模板的向量类型
2.  实现一个嵌套代数，它用融合迭代融合序列并从子代数中`for_each`调用正确的`for_each`
3.  实现一个迭代融合序列元素的自定义操作。

注意 1：调整大小通常意味着，如果您的类型需要调整大小，则您需要专门`is_resizable`针对编译时间进行调整，例如通过

```
template<>
is_resizable< YourType > : boost::true_type { }; 
```

和专业化`resize_impl<>`和`same_size<>`。查看默认实现。这真的很容易，应该只是一条线。

注意 2：如果您还需要步长控制，并且您选择使用带有表达式模板的向量类型，则运算符`/`和函数`max`必须存在，并且它们必须执行逐元素除法和逐元素最大值。这可能很难实现。如果您需要帮助，请随时再次与我们联系。

# java - 码头连接器和处理程序

> ID：15325115
> 
> 赞同：2
> 
> 时间：2013-03-10T17:16:57.430
> 
> 标签：java, jetty

目前我正在创建一个这样的嵌入式服务器：

```
Server server = new Server(8080);

ServletContextHandler handler = new ServletContextHandler();
handler.setContextPath("/abc");

handler.addServlet( ...);
handler.addServlet(....);
handler.addServlet(....);

server.SetHanlder(handler);

server.start();
server.join(); 
```

所以我没有在上面明确创建连接器。如果我想创建一个连接器，这对事情有什么影响？

服务器可以有多个连接器吗？是否创建了默认连接器，如果我明确创建一个，它会使用它吗？

我认为我需要一个连接器的原因是我想显式设置一些实际服务器实例没有的属性。

我对连接器的用途有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:55:29.983

连接器用于接受和处理初始传入连接。

默认情况下，基本 HTTP（非 SSL）连接器是根据您`new Server(8080);`在线提供的端口设置的。它应该在您机器的所有网络接口上侦听端口 8080。

如果您想提供 SSL 或 SPDY，您将需要基于您的 Jetty 版本的适当 SSL 连接器（javadoc：[Jetty 6](http://jetty.codehaus.org/jetty/jetty-6/apidocs/org/mortbay/jetty/Connector.html)、[Jetty 7/8](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/Connector.html)、[Jetty 9](http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/server/ServerConnector.html)）。

或者，如果您只想监听特定的网络接口，则需要适当地配置您的连接器。

# flash - Flash - On Timer 私人功能

> ID：15325117
> 
> 赞同：0
> 
> 时间：2013-03-10T17:17:03.797
> 
> 标签：flash, function, timer, private

我正在尝试让计时器为这个游戏工作。我在第 36 行收到错误：私有属性只能用于类属性定义。

这是硬件作业的最后一部分供您比较：[http ://www.lwebdesigns.net/hw1.docx](http://www.lwebdesigns.net/hw1.docx)

这是我的 MainTimer 包的代码{

```
import flash.display.MovieClip;

import flash.events.TimerEvent;
import flash.utils.Timer;

public class MainTimer extends MovieClip {
    // Init vars for class
    private var currentMin:int;
    private var currentSec:int;
    // create a one second timer from Flash's Timer class
    private var oneSecTimer:Timer = new Timer(1000,1);

    public var timerHasStopped:Boolean = false;

    public function MainTimer() {
        // constructor code
        trace("Main timer is here");
        currentMin = 2;
        currentSec = 5;

        minBox.text = String(currentMin);
        if(currentSec < 10){
            secBox.text = "0" + String(currentSec); //concatenate with a leading zero
           }else{
               secBox.text = String(currentSec);
           }//if end
           oneSecTimer.addEventListener(TimerEvent.TIMER_COMPLETE, onTimerComplete);
           oneSecTimer.start();

    } // ends onTimerComplete

} //public function maintimer end
        private function onTimerComplete(event:TimerEvent):void{

        currentSec = currentSec - 1;

        if (currentSec < 0){
            currentSec = 59;
            currentMin -= 1;
        } //end if
        if (currentMin < 0){
            currentMin = 0;
            currentSec = 0;
            timerHasStopped = true;
        }else{
            oneSecTimer.start();
        } //end else

        //update our display
        minBox.text = String(currentMin);
        secBox.text = String(currentSec);
        //Adjust display for seconds less than 10
        if (currentSec < 10){
                secBox.text = "0" + String(currentSec);
        } // end if
    }// end onTimerComplete 
```

} //公共端 } //包端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:30:18.587

据我所知，你有`}`很多。删除有评论的那个

`}//public function maintimer end`

# c# - 对通用集合进行排序？

> ID：15325120
> 
> 赞同：-8
> 
> 时间：2013-03-10T17:17:42.413
> 
> 标签：c#, sorting

可以说我有一个通用列表。

```
IList<T> list; 
```

我需要对项目进行排序，但我不能使用 .NET 方法，`Sort`因为大多数集合都没有。由于我不提前知道类型是什么，我该如何对项目进行排序？

```
public void Sort(IList<T> list) {
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:23:03.663

为了能够对列表中某种类型的项目进行排序，它们[必须具有可比性](http://en.wikipedia.org/wiki/Comparison_sort)，因此对于 .NET，您将不得不假设`T`实现[`IComparable<T>`](http://msdn.microsoft.com/en-us/library/4d7sx9hd%28v=vs.100%29.aspx)。现在您可以比较项目，只需实现排序算法即可，例如：

*   [快速排序](http://en.wikipedia.org/wiki/Quicksort)
*   [合并排序](http://en.wikipedia.org/wiki/Merge_sort)

两者都是 O(n*log(n)) 但对于面试我会坚持合并排序，因为我发现它更容易实现。我认为这里选择一个的重点是**不要**建议完全简单的运行时间不好的东西，例如[Bubble sort](http://en.wikipedia.org/wiki/Bubble_sort)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:25:18.900

您可以使用快速排序实现：

```
static void QuickSort<T>(List<T> a, int left, int right) where T : IComparable<T>
{
    int i = left, j = right;
    T pivot = a[(left + right) / 2];
    while (i <= j)
    {
        while (a[i].CompareTo(pivot) < 0)
            i++;
        while (a[j].CompareTo(pivot) > 0)
            j--;
        if (i <= j)
        {
            T temp = a[i];
            a[i++] = a[j];
            a[j--] = temp;
        }
    }
    if (left < j)
        QuickSort(a, left, j);
    if (i < right)
        QuickSort(a, i, right);
} 
```

这就是`List.Sort()`正在做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T17:23:11.727

有关大量排序算法的信息，请参见[Wikipedia 。](http://en.wikipedia.org/wiki/Sorting_algorithm)

只要它们之间有顺序，您就不需要知道类型。您可以通过要求`T`成为[`IComparable`](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T17:25:48.650

好的，这实际上是两个问题：如何比较两个元素以查看它们应该处于什么顺序，以及如何将它们按顺序排列。

要比较两个元素，您可以要求调用者传入一些东西来进行比较，或者使用[Comparer.Default](http://msdn.microsoft.com/en-us/library/azhsac5f.aspx)为您创建一个。

要将元素按顺序排列，我建议实施快速排序。

# javascript - 需要帮助编辑和理解 Dribbble API 的 jQuery 投资组合模板

> ID：15325130
> 
> 赞同：0
> 
> 时间：2013-03-10T17:18:58.863
> 
> 标签：javascript, jquery

我需要一些帮助来理解以下内容：

```
var inner = ""; 
var innerP1 = '<li style="list-style-type:none;"><div class="dribbble"><div class="shot"><a href="';
var innerP2 = '"><img src="';
var innerP3 = '"></a></div><div class="likes">'  
var innerP4 = ' Likes</div><div class="comments">'
var innerP5 = ' Comments</div><div class="name">'
var innerp6 = '</div></div></li>'

function render(filter){
for (var i = 0; i<filter.shots.length;i++){
inner = inner + innerP1 + filter.shots[i].url + innerP2 + filter.shots[i].image_url + innerP3 + filter.shots[i].likes_count + innerP4 + filter.shots[i].comments_count + innerP5 + filter.shots[i].title + innerp6;
}; 
```

我想在这里删除一些字段；我真正想要的是带有链接和标题的图像。“var”函数有什么作用，我不能将所有 html 合并到其中一个中吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:28:31.910

好的，我想通了。这是我如何改变它：

```
var inner = ""; 
var innerP1 = '<li style="list-style-type:none;"><div class="dribbble"><div class="shot"><a href="';
var innerP2 = '"><img src="';
var innerP3 = '"></a>'  
var innerp4 = '</div></div></li>'

function render(filter){
for (var i = 0; i<filter.shots.length;i++){
inner = inner + innerP1 + filter.shots[i].url + innerP2 +         filter.shots[i].image_url + innerP3 + innerp4; 
```

我意识到这是一个序列，其中 var 是序列中的变量，而 inner=... 是定义序列顺序的地方。

# javascript - 用 d3.js 替换 jQuery 的最后一点 - 带有 css-attribute 更改的选择

> ID：15325133
> 
> 赞同：1
> 
> 时间：2013-03-10T17:19:16.120
> 
> 标签：javascript, jquery, d3.js

这是代码中的最后一点 jQuery - 就像这样一切正常：

```
var colourchange = function () {
  var my_selection = d3.select(this);
  var selection_class = my_selection.attr("class");

  $("." + selection_class)
    .css("fill", "yellow");
}; 
```

为了避免使用 jQuery 库（仅针对这一行！），我试图用`d3.js`代码替换它——无论如何这都是代码的主要部分。这是我所拥有的：

```
var colourchange = function () {
  var my_selection = d3.select(this);
  var selection_class = my_selection.attr("class");

  d3.selectAll("." + selection_class)
    .attr("fill", "yellow");
}; 
```

但它只是行不通。我很确定我遗漏了一些非常明显的东西。

编辑：也许我应该提一下我是如何调用这个函数的......

```
<d3 - selection>
    .data(my_data)
    .enter().append("rect")
    .attr(...) etc.
    .on("mouseover", colourchange) 
```

该函数的效果应该应用于鼠标悬停在其上的元素以及具有相同类的其他一些元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:02:23.190

我会`.attr("fill", "yellow")`改为`.style("fill", "yellow")`

使用 .attr()会导致您的问题，`<rect fill="yellow" ...>`而不是`<rect style="fill: yellow;" ...>`可能导致您的问题。

# bash - Cygwin 启动脚本

> ID：15325137
> 
> 赞同：14
> 
> 时间：2013-03-10T17:19:36.023
> 
> 标签：bash, cygwin, startup, startupscript

启动后如何在 cygwin 中运行脚本？

我想在 cygwin 启动时自动添加一些挂载并在其中运行其他脚本。我看到在linux中它就像在etc/init.d中添加一个shell文件一样简单但是，我尝试添加这个目录和chmod +x添加一个shell，chmod那个shell文件，但不起作用。

此外，如果有一种方法可以在关闭时运行脚本，如 umount、rmdir 等。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T00:36:23.613

你正在寻找的是

```
~/.bash_profile 
```

又名

```
C:\cygwin\home\CPJ\.bash_profile 
```

使用股票安装此文件在 Cygwin 启动时读取。如果您想添加更多文件，您可以编辑`.bash_profile`文件，例如

```
source foo.sh
source bar.sh
source baz.sh 
```

[Bash 手册页](http://linux.die.net/man/1/bash)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-24T22:46:11.507

我很抱歉添加到这个非常古老的问题，但我认为上面接受的答案有一个小问题。

尝试向您的 .bash_profile 添加一个命令，如下所示，我使用它来打开本地 SSH 端口：

```
ssh -D1080 root@localhost -g localhost 
```

当您以交互方式登录时，会启动另一个 SSH 会话，然后又会启动另一个会话，然后您将陷入无限循环。

认为这可能会帮助某人..

**.bash_login**是您真正需要的：P

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-03T00:46:52.917

我通过结合一些给定的答案解决了这个问题。

```
In Cygwin 
```

所以首先我跑到`which bash`那个目录。

然后我打开并`.bash_profile`添加了我想在启动时运行的代码。（对我来说，这只是自动更改目录）

然后只需保存更改，重新启动 Cygwin 和 Boom！我在我的新目录:)

希望这对某人有帮助！

# c# - ASP.NET 不能向 div 添加超过 1 个标签？

> ID：15325139
> 
> 赞同：1
> 
> 时间：2013-03-10T17:19:44.147
> 
> 标签：c#, webforms

您好，我正在使用一个简单的`asp.net`网络表单：

```
 <div id="in_mess" runat=server >

        <div class="dialog" runat=server> 
            <p class="dialog_interior">Test Message</p>
        </div>

    </div>

    <div id="out_mess" runat=server>

    </div>

</div>

<div id="mess_con" runat=server>

        <form runat=server id="form_con" >
            <p><label>Message</label><input type="text" width="250" id="inp_message"></p> <br>
            <p><label>To</label><input type="text" width="100" id="inp_recepeint"></p> <br>
            <asp:Button ID="ButtonChat" text="Chat" runat=server 
                onclick="ButtonChat_Click" />
        </form>

</div> 
```

在后面的代码中，当单击 ButtonChat 时，我实现了以下简单函数：

```
protected void ButtonChat_Click(object sender, EventArgs e)
{
    this.in_mess.Controls.Add(new Label { Text = "Hello", CssClass = "dialog" });
} 
```

问题是我无法让它向 div 添加多个标签，我添加的标签仍然存在，但据我所知，无论我点击多少次，都没有添加新标签。

我在该行上放了一个断点，它显示控件集合的计数保持在 3 不变。

我在通过 JavaScript 添加标签时遇到了类似的问题`<p>`，我通过阻止表单重新加载页面来解决这个问题，但我不确定你是否可以将它应用到 ASP.NET。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:55:35.277

您对页面重新加载的思考是正确的。在 WebForms 中，onclick 事件会生成完整的回发。动态添加的控件不会自动记住，因此您只需在标记页的内容中再添加 1 个。

您*可以*记住添加了多少标签，然后在页面加载时将它们全部添加回来，但是我不太喜欢这种解决方案。

也许您可以使用 onclientclick 使用 Javascript 添加标签？

```
<script type="text/javascript">
    function ButtonChat_Click(){
        var label = document.createElement("label");
        label.className = "dialog";
        label.createTextNode("Hello");
        document.getElementById("in_mess").appendChild(label);
    }
 </script>

 <div id="in_mess" runat=server >
    <div class="dialog" runat=server> 
        <p class="dialog_interior">Test Message</p>
    </div>

 </div>

 <div id="out_mess" runat=server>

 </div>

 <div id="mess_con" runat=server>

     <form runat=server id="form_con" >
        <p><label>Message</label><input type="text" width="250" id="inp_message"></p> <br>
        <p><label>To</label><input type="text" width="100" id="inp_recepeint"></p> <br>
        <asp:Button ID="ButtonChat" text="Chat" runat=server onclientclick="ButtonChat_Click" />
     </form>

 </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:53:30.050

Javascript，不是这里唯一的解决方案。要在多次回发中保持页面状态，您必须处理站点视图状态。这对于其他事情也非常有用，例如在多个回发中保持属性值的持久性。

利用您的 ASPX，我建议使用以下代码隐藏。我不使用标签作为 ListItems，因为 ViewState 对象需要可序列化。

```
public partial class _default : System.Web.UI.Page
{
    public List<LabelInfo> LabelInfos
    {
        get
        {
            object listOfLabelInfos = ViewState["Labels"];
            return (listOfLabelInfos == null) ? null : (List<LabelInfo>)listOfLabelInfos;
        }
        set
        {
            ViewState["Labels"] = value;
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        // Init the LabelInfo list, if this page load is not a postback.
        if (!IsPostBack)
        {
            LabelInfos = new List<LabelInfo>();
        }
    }

    protected void btnTest_Click(object sender, EventArgs e)
    {
        LabelInfos.Add(new LabelInfo { Text = "TestLabel", CssClass = "TestClass" });

        foreach (LabelInfo l in LabelInfos)
        {
            this.in_mess.Controls.Add(new Label { Text = l.Text, CssClass = l.CssClass });
        }
    }
}

[Serializable]
public class LabelInfo
{
    public string Text = "";
    public string CssClass = "";
} 
```

# jakarta-ee - 如何以编程方式查找 EJB 的 JNDI 查找名称？

> ID：15325142
> 
> 赞同：6
> 
> 时间：2013-03-10T17:20:09.017
> 
> 标签：jakarta-ee, jboss7.x, jndi, ejb-3.1

我在我的应用程序中使用 EJB 3.1。

我想将我的应用程序中的一个 EJB 的 JNDI 查找名称发送到另一个应用程序，以便它可以在运行时使用它并与我的 EJB 通信。由于查找名称取决于部署在 EJB 容器上的 ear 文件的名称，并且每次在我的应用程序中进行任何更改时，这些 ear 文件的名称都会发生变化。

以编程方式查找任何 EJB 的查找名称的过程是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:34:11.147

首先，我不会推荐这种方法。为什么不修复 EJB 的 JNDI 名称？

也就是说，您可以调用一个方法`InitialContext#list`来遍历 JNDI 树并找出您的 EJB 的名称。[这里](https://stackoverflow.com/questions/2324937/code-to-list-all-the-entries-in-jndi-on-remote-machine)有一个很好的代码示例，所以我不会重复它。一个重要的注意事项 - 调用`ctx.list("")`只会为您提供第一级 JNDI 树，因此您必须递归调用该方法才能获得 EJB 名称。提示：EJB 通常部署在分支**ejb**下。

也可以看看：

*   [初始上下文](http://docs.oracle.com/javase/7/docs/api/javax/naming/InitialContext.html)

# vb.net - 如何覆盖下载的文件 vb.net

> ID：15325144
> 
> 赞同：-1
> 
> 时间：2013-03-10T17:20:13.400
> 
> 标签：vb.net

我正在制作一个自动文件下载器，当我按下按钮时，我需要它重新下载并覆盖文件。

这是我的代码：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
  My.Computer.Network.DownloadFile _
    ("http://www.randomurl.com/randomfile.txt", _
    Path.Combine(Environment.GetFolderPath( _
    Environment.SpecialFolder.ApplicationData), _
    "test/randomfile.txt"))
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T17:24:48.883

[DownloadFile](http://msdn.microsoft.com/en-us/library/ack30t8y%28v=VS.90%29.aspx)有一个重载，允许覆盖前一个文件

```
 My.Computer.Network.DownloadFile 
       (address, destinationFileName, userName,
        password, showUI, connectionTimeout, overwrite) 
```

从 MSDN

*   地址 = 字符串或 Uri。要下载的文件的路径，包括文件名和主机地址。必需的。
*   目的地文件名 = 字符串。下载文件的文件名和路径。必需的。
*   用户名 = 字符串。要进行身份验证的用户名。默认为空字符串“”。
*   password = String.Password 进行身份验证。默认为空字符串“”。
*   showUI = Boolean。指定是否显示操作的进度。默认为假。
*   连接超时 = Int32。超时间隔，以毫秒为单位。默认值为 100 秒。
*   覆盖 = 布尔值。指定是否覆盖现有文件。默认为假。

因此，您可以通过这种方式更改您的代码

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
  My.Computer.Network.DownloadFile _
    (address := "http://www.randomurl.com/randomfile.txt", _
    destinationFileName := Path.Combine(Environment.GetFolderPath( _
    Environment.SpecialFolder.ApplicationData), _
    "test/randomfile.txt"), _
    userName := string.Empty, password := string.Empty, _
    showUI := False, connectionTimeout := 100000, _
    overwrite := True)
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:28:41.960

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim uri As System.Uri = New System.Uri("http://www.randomurl.com/randomfile.txt")
    Dim webclient As System.Net.WebClient = New System.Net.WebClient()

    Dim path As String = New String(System.IO.Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "test\\randomfile.txt"))
    Dim fileInfo As System.IO.FileInfo = New System.IO.FileInfo(path)
    If Not System.IO.Directory.Exists(fileInfo.Directory.FullName) Then
        System.IO.Directory.CreateDirectory(fileInfo.Directory.FullName)
    End If

    AddHandler webclient.DownloadFileCompleted, AddressOf webclient_DownloadDataCompleted

    webclient.DownloadFileAsync(uri, path)

End Sub

Private Sub webclient_DownloadDataCompleted(ByVal sender As Object, ByVal e As System.ComponentModel.AsyncCompletedEventArgs)

    MessageBox.Show("Your download has completed.")

End Sub 
```

（编辑 - 更改为按照评论中的要求显示异步方法）

请注意，如果文件存在，将被覆盖 -> [http://msdn.microsoft.com/en-us/library/ez801hhe(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/ez801hhe(v=VS.80).aspx)

# php - 基本日历构建 - 使用 pdo 输出 mysql 事件数据

> ID：15325145
> 
> 赞同：0
> 
> 时间：2013-03-10T17:20:18.643
> 
> 标签：php, mysql, pdo

我正在尝试逐步构建一个日历，基本上我只需要在一个看起来像这样的非常基本的日历中输出我的事件数据。

![在此处输入图像描述](../Images/3d04b2b02dd57c3d1137cf8eb74d5a4e.png) 我已经建立了日历，但我的问题是我无法让它在日期旁边显示事件。这是我的数据库连接 php 文件，**问题可能是由这个**文件引起的，因为我无法显示我的 mysql 数据 - 抱歉，我根本不知道 pdo。

```
<?php

class DB_Connect {
    /**
     * Stores a database object
     *
     * @var object A database object
     */
    protected $db;
    /**
     * Checks for a DB object or creates one if one isn't found
     *
     * @param object $dbo A database object
     */
    protected function __construct($dbo=NULL)
    {
        if ( is_object($db) )
        {
            $this->db = $db;
        }
        else
        {
            // Constants are defined in /sys/config/db-cred.inc.php
            $dsn = "mysql:host=" . DB_HOST . ";dbname=" . DB_NAME;
            try
            {
                $this->db = new PDO($dsn, DB_USER, DB_PASS);
            }
            catch ( Exception $e )
            {
                // If the DB connection fails, output the error
                die ( $e->getMessage() );
            }
        }
    }
}
?> 
```

这是我的 calender.php 代码，它为日历日期和事件创建必要的类。问题可能在**_loadEventData**函数中

```
<?php

include_once '../sys/class/class.db_connect.inc.php';
include_once '../sys/config/db-cred.inc.php';
include_once '../sys/class/class.event.inc.php';

class Calendar extends DB_Connect
{
    private $_useDate;
    private $_m;
    private $_y;
    private $_daysInMonth;
    private $_startDay;

    public function __construct($dbo=NULL, $useDate=NULL)
    {
        //Call the parent constructor to check for a db obj

        parent::__construct($dbo);
        //Gather and store data relevant to the month

        if ( isset($useDate) )
        {
            $this->_useDate = $useDate;
        }
        else
        {
            $this->_useDate = date('Y-m-d H:i:s');
        }
        // Convert to a timestamp, then determine the month&year to use when building the calendar

        $ts = strtotime($this->_useDate);
        $this->_m = date('m', $ts);
        $this->_y = date('Y', $ts);
        //Determine how many days are in the month

        $this->_daysInMonth = cal_days_in_month(
            CAL_GREGORIAN,
            $this->_m,
            $this->_y
        );
        // Determine what weekday the month starts on

        $ts = mktime(0, 0, 0, $this->_m, 1, $this->_y);
        $this->_startDay = date('w', $ts);
    }
    //generate calendar

    private function _loadEventData($id=NULL)
    {
        $sql = "SELECT
    `event_id`, `event_title`, `event_desc`,
    `event_start`, `event_end`
    FROM `events`";
        //If an event ID is supplied, add a WHERE clause so only that event is returned

        if ( !empty($id) )
        {
            $sql .= "WHERE `event_id`=:id LIMIT 1";
        }
        //Otherwise, load all events for the month in use

        else
        {
            //Find the first and last days of the month

            $start_ts = mktime(0, 0, 0, $this->_m, 1, $this->_y);
            $end_ts = mktime(23, 59, 59, $this->_m+1, 0, $this->_y);
            $start_date = date('Y-m-d H:i:s', $start_ts);
            $end_date = date('Y-m-d H:i:s', $end_ts);
            //Filter events to only those happening in the currently selected month

            $sql .= "WHERE `event_start`
    BETWEEN '$start_date'
    AND '$end_date'
    ORDER BY `event_start`";
        }
        try
        {
            $stmt = $this->db->prepare($sql);
            //Bind the parameter if an ID was passed

            if ( !empty($id) )
            {
                $stmt->bindParam(":id", $id, PDO::PARAM_INT);
            }
            $stmt->execute();
            $results = $stmt->fetchAll(PDO::FETCH_ASSOC);
            $stmt->closeCursor();
            return $results;
        }
        catch ( Exception $e )
        {
            die ( $e->getMessage() );
        }
    }
    //Loads all events for the month into an array
    private function _createEventObj()
    {
        /*Load the events array*/
        $arr = $this->_loadEventData();
        /* Create a new array, then organize the events by the day of the month on which they occur*/
        $events = array();
        foreach ( $arr as $event )
        {
            $day = date('j', strtotime($event['event_start']));
            try
            {
                $events[$day][] = new Event($event);
            }
            catch ( Exception $e )
            {
                die ( $e->getMessage() );
            }
        }
        return $events;
    }
    //Returns HTML markup to display the calendar and events Using the information stored in class properties
    public function buildCalendar()
    {
        /*Determine the calendar month and create an array of
        weekday abbreviations to label the calendar columns
        */
        $cal_month = date('F Y', strtotime($this->_useDate));
        $weekdays = array('Sun', 'Mon', 'Tue',
            'Wed', 'Thu', 'Fri', 'Sat');
        /*Add a header to the calendar markup*/
        $html = "\n\t<h2>$cal_month</h2>";
        for ( $d=0, $labels=NULL; $d<7; ++$d )
        {
            $labels .= "\n\t\t<li>" . $weekdays[$d] . "</li>";
        }
        $html .= "\n\t<ul class=\"weekdays\">"
            . $labels . "\n\t</ul>";
        /*
        * Load events data
        */
        $events = $this->_createEventObj();
        $html .= "\n\t<ul>"; // Start a new unordered list
        for ( $i=1, $c=1, $t=date('j'), $m=date('m'), $y=date('Y');
              $c<=$this->_daysInMonth; ++$i )
        {
            /*Apply a "fill" class to the boxes occurring before
            the first of the month */
            $class = $i<=$this->_startDay ? "fill" : NULL;
            /* Add a "today" class if the current date matches
            the current date*/
            if ( $c==$t && $m==$this->_m && $y==$this->_y )
            {
                $class = "today";
            }
            /*Build the opening and closing list item tags*/
            $ls = sprintf("\n\t\t<li class=\"%s\">", $class);
            $le = "\n\t\t</li>";
            /*Add the day of the month to identify the calendar box*/
            if ( $this->_startDay<$i && $this->_daysInMonth>=$c)
            {
                /*
                * Format events data
                */
                $event_info = NULL; // clear the variable
                if ( isset($events[$c]) )
                {
                    foreach ( $events[$c] as $event )
                    {
                        $link = '<a href="view.php?event_id='
                            . $event->id . '">' . $event->title
                            . '</a>';
                        $event_info .= "\n\t\t\t$link";
                    }
                }
                $date = sprintf("\n\t\t\t<strong>%02d</strong>",$c++);
            }
            else { $date="&nbsp;"; }
            /*If the current day is a Saturday, wrap to the next row*/
            $wrap = $i!=0 && $i%7==0 ? "\n\t</ul>\n\t<ul>" : NULL;
            /*Assemble the pieces into a finished item*/
            $html .= $ls . $date . $le . $wrap;
        }
        /*Add filler to finish out the last week*/
        while ( $i%7!=1 )
        {
            $html .= "\n\t\t<li class=\"fill\">&nbsp;</li>";
            ++$i;
        }
        /*Close the final unordered list*/
        $html .= "\n\t</ul>\n\n";
        /* Return the markup for output*/
        return $html;
    }
}
?> 
```

这是创建数组的 php 文件

```
<?php
/**
 * Stores event information
 */
class Event
{
    /**

     * The event ID
     *
     * @var int
     */
    public $id;
    /**
     * The event title
     *
     * @var string
     */
    public $title;
    /**
     * The event description
     *
     * @var string
     */
    public $description;
    /**
     * The event start time
     *
     * @var string
     */
    public $start;
    /**
     * The event end time
     *
     * @var string
     */
    public $end;
    /**
     * Accepts an array of event data and stores it
     *
     * @param array $event Associative array of event data
     * @return void
     */
    public function __construct($event)
    {
        if ( is_array($event) )
        {
            $this->id = $event['event_id'];
            $this->title = $event['event_title'];
            $this->description = $event['event_desc'];
            $this->start = $event['event_start'];
            $this->end = $event['event_end'];
        }
        else

        {
            throw new Exception("No event data was supplied.");
        }
    }
}
?> 
```

最后这是输出日历的索引文件

```
 <?php
/*
 * Include necessary files
 */
include_once '../sys/core/init.inc.php';
/*
 * Load the calendar for January
 */
$cal = new Calendar($dbo, "2013-02-01 12:00:00");

/*
 * Set up the page title and CSS files
 */
$page_title = "Events Calendar";
$css_files = array('style.css');
/*
 * Include the header
 */
include_once 'assets/common/header.inc.php';
?>
    <div id="content">
        <?php

        echo $cal->buildCalendar();

        ?>
    </div><!-- end #content -->
<?php
/*
 * Include the footer
 */
include_once 'assets/common/footer.inc.php';
?> 
```

这是CSS

```
body {
background-color: #789;
font-family: georgia, serif;
font-size: 13px;
}
#content {
display: block;
width: 812px;
margin: 40px auto 10px;
padding: 10px;
background-color: #FFF;
-moz-border-radius: 6px;
-webkit-border-radius: 6px;
border-radius: 6px;
border:2px solid black;
-moz-box-shadow: 0 0 14px #123;
-webkit-box-shadow: 0 0 14px #123;
box-shadow: 0 0 14px #123;
}
h2,p {
margin: 0 auto 14px;
www.it-ebooks.info
CHAPTER 4 ■ BUILD AN EVENTS CALENDAR
156
text-align: center;
}
ul {
display: block;
clear: left;
height: 82px;
width: 812px;
margin: 0 auto;
padding: 0;
list-style: none;
background-color: #FFF;
text-align: center;
border: 1px solid black;
border-top: 0;
border-bottom: 2px solid black;
}
li {
position: relative;
float: left;
margin: 0;
padding: 20px 2px 2px;
border-left: 1px solid black;
border-right: 1px solid black;
width: 110px;
height: 60px;
overflow: hidden;
background-color: white;
}
li:hover {
background-color: #FCB;
z-index: 1;
-moz-box-shadow: 0 0 10px #789;
-webkit-box-shadow: 0 0 10px #789;
box-shadow: 0 0 10px #789;
}
.weekdays {
height: 20px;
border-top: 2px solid black;
}
.weekdays li {
height: 16px;
padding: 2px 2px;
background-color: #BCF;
}
.fill {
www.it-ebooks.info
CHAPTER 4 ■ BUILD AN EVENTS CALENDAR
157
background-color: #BCD;
}
.weekdays li:hover,li.fill:hover {
background-color: #BCD;
-moz-box-shadow: none;
-webkit-box-shadow: none;
box-shadow: none;
}
.weekdays li:hover,.today {
background-color: #BCF;
}
li strong {
position: absolute;
top: 2px;
right: 2px;
}
li a {
position: relative;
display: block;
border: 1px dotted black;
margin: 2px;
padding: 2px;
font-size: 11px;
background-color: #DEF;
text-align: left;
-moz-border-radius: 6px;
-webkit-border-radius: 6px;
border-radius: 6px;
z-index: 1;
text-decoration: none;
color: black;
font-weight: bold;
font-style: italic;
}
li a:hover {
background-color: #BCF;
z-index: 2;
-moz-box-shadow: 0 0 6px #789;
-webkit-box-shadow: 0 0 6px #789;
box-shadow: 0 0 6px #789;
} 
```

我知道这很长，但我认为我的问题在于日历或数据库连接文件，我真的很感谢一些帮助，因为我不太了解 PDO。提前致谢

这是我的数据库表结构 ![在此处输入图像描述](../Images/01d23acb5c048aa02af5e82ed9d8096b.png)

所有代码都取自一本书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:48:19.173

在带有日历类的文件中：

在说`$date = sprintf("\n\t\t\t<strong>%02d</strong>",$c++);`您可以添加的行之后`$date .= $event_info;`

# symfony - 我可以在编译器传递中访问语义配置吗？

> ID：15325146
> 
> 赞同：7
> 
> 时间：2013-03-10T17:20:20.200
> 
> 标签：symfony, configuration, dependency-injection

我有一个包的语义配置，需要在同一包的编译器传递期间进行解释。

是否可以在不将其存储在中间容器变量中的情况下访问它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-22T15:25:18.417

是的，有点：

```
<?php

namespace Acme\DemoBundle\DependencyInjection;

use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
use Symfony\Component\DependencyInjection\ContainerBuilder;

class CompilerPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        $configs = $container->getExtensionConfig('acme_demo');
    }
} 
```

从我可以看到`$configs`的是一组未合并的配置，并且不包括默认值（由配置 TreeBuilder 定义的值）。

看[这里](http://api.symfony.com/2.3/Symfony/Component/DependencyInjection/ContainerBuilder.html#method_getExtensionConfig)和[这里](https://github.com/symfony/symfony/blob/v2.3.1/src/Symfony/Component/DependencyInjection/ContainerBuilder.php#L571)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-14T11:38:11.757

只是为了@Peter 的回答的完整性：`getExtensionConfig`返回一个**数组数组**，应该使用对应的数组进行处理，`Configuration`以便能够访问默认值。

```
<?php

namespace Acme\DemoBundle\DependencyInjection;

use Symfony\Component\Config\Definition\ConfigurationInterface;
use Symfony\Component\Config\Definition\Processor;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;

class CompilerPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        $configs = $container->getExtensionConfig('acme_demo');
        $configuration = new Configuration();
        $config = $this->processConfiguration($configuration, $configs);

        /// You can safely work with $config now
    }

    private function processConfiguration(ConfigurationInterface $configuration, array $configs)
    {
        $processor = new Processor();

        return $processor->processConfiguration($configuration, $configs);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-09T20:13:50.957

我意识到这是一篇旧帖子，但我一直在寻找相同的信息，最终发现这适用于单个参数：

```
$cfgVal = $container
  ->getParameterBag()
  ->resolveValue( $container->getParameter( 'param_name' )); 
```

当然，这个功能可能是在原始帖子之后添加的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-12-21T17:59:52.743

我一直在寻找如何读取已处理的配置，而无需设置自定义参数以稍后在 CompilerPass 中检索，并遇到了以下解决方案。

查看内核中的操作顺序`Kernel::prepareContainer`，我们可以看到它调用`Bundle::getContainerExtension()`后跟`Bundle::build()` 这意味着`Extension::load`在运行编译器之前调用了方法并处理了配置。

由于 Symfony 还在容器中注册了扩展，因此您只需从`CompilerPass`.

然而，由于 Symfony 也会清空`processedConfigs`数组，因此在加载扩展后，您需要使`CompilerPass`.

```
namespace AppBundle;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\HttpKernel\Bundle\Bundle;
use AppBundle\DependencyInjection\Compiler\AppCompilerPass;

class AppBundle extends Bundle
{
    public function build()
    {
        $container->addCompilerPass(new AppCompilerPass());
    }

    /** demonstration of the default functionality in Bundle
    public function getContainerExtension()
    {
        if (null === $this->extension) {
            $this->extension = new AppBundle\DependencyInjection\AppExtension();
        }

        return $this->extension;
    } */
} 
```

```
namespace AppBundle\DependencyInjection;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Extension\Extension;

class AppExtension extends Extension
{
    const ALIAS = 'app'; //just for demonstration and reference in CompilerPass

    private $config = array();

    public function load(array $configs, ContainerBuilder $container): void
    {
        //make the processed configuration available
        $this->config = $this->processConfiguration(new Configuration(), $configs);
        //...
    }

    public function getConfig()
    {
        try {
            return $this->config;
        } finally {
            //erases the config after it is retrieved, for security and performance reasons
            $this->config = array();
        }
    }

    /** demonstration of default functionality in Extension
    public function getAlias()
    {
        return self::ALIAS;
    } */
} 
```

```
namespace AppBundle\DependencyInjection\Compiler;

use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use AppBundle\DependencyInjection\AppExtension;

class AppCompilerPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        //...
        if (!$container->hasExtension(AppExtension::ALIAS)) {
            //always make sure the extension exists
            return;
        }
        $config = $container->getExtension(AppExtension::ALIAS)->getConfig();
        dump($config);
        //...
    }
} 
```

* * *

您可以将扩展名传递给编译器传递，而不是从容器中检索扩展名。

```
class AppBundle extends Bundle
{
    public function build()
    {
        $container->addCompilerPass(new AppCompilerPass($this->getContainerExtension()));
    }
} 
```

```
use AppBundle\DependencyInjection\AppExtension;

class AppCompilerPass implements CompilerPassInterface
{
    private $extension;

    public function __construct(AppExtension $extension = null)
    {
        $this->extension = $extension;
    }

    public function process(ContainerBuilder $container)
    {
        //...
        if (!$this->extension) {
            //always make sure the extension exists
            return;
        }
        $config = $this->extension->getConfig();
        dump($config);
        //...
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-01T09:35:06.763

我有点晚了，但这是我习惯于在编译器传递中检索配置的方式（这应该让每个人都开心；）。

首先，让我们在一个参数中设置配置（或其中的一部分）：

```
<?php

namespace Me\Bundle\MyBundle\DependencyInjection;

use Symfony\Component\Config\FileLocator;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Loader\YamlFileLoader;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;
use Symfony\Component\Yaml\Yaml;

class MyBundleExtension extends Extension
{
    const CONFIG_PATH = __DIR__.'/../Resources/config';

    /**
     * {@inheritdoc}
     */
    public function load(array $configs, ContainerBuilder $container)
    {
        $config = $this->processConfiguration($this->getConfiguration($configs, $container), $configs);

        $loader = new YamlFileLoader($container, new FileLocator(self::CONFIG_PATH));

        $container->setParameter('my_bundle.config', $config);
    }
} 
```

然后，您可以像在编译器传递中那样使用它：

```
<?php

namespace Me\Bundle\MyBundle\DependencyInjection\Compiler;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;

class UseConfigPass implements CompilerPassInterface
{
    /**
     * {@inheritdoc}
     */
    public function process(ContainerBuilder $container)
    {
        // ...

        $config = $container->getParameter('my_bundle.config');

        // ...
    }
} 
```

这样，config 只在扩展文件中处理，您不需要询问第一个元素！

> 请注意，如果您希望更改另一个捆绑包的配置，您可能需要查看[prepend extension](http://symfony.com/doc/current/bundles/prepend_extension.html)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-29T09:08:21.067

这是一个老问题，但到目前为止我正在使用这个：

```
use Symfony\Component\Config\Definition\Processor;
...

public function process(ContainerBuilder $container)
{
    $config = $this->getConfiguration($container);
    ...
}

/**
 * @param ContainerBuilder $container
 * @return array
 */
private function getConfiguration(ContainerBuilder $container)
{
    $parameterBag = $container->getParameterBag();
    $processor = new Processor();
    $configuration = new Configuration();

    return $processor->processConfiguration($configuration, $parameterBag->resolveValue($container->getExtensionConfig('YOUR_EXTENSION')));
} 
```

是的，对于每个 CompilerPass，它都会处理配置，但就我而言，我只有一个，所以没什么大不了的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-07T02:09:16.637

@xPheRe 在编译器传递中加载配置不是一个好的解决方案。这意味着如果您有多个编译器，您将多次加载配置。配置应该在扩展中加载一次。

正如@Peter 所说，如果您确定配置存在，请执行以下操作：

```
$config = $container->getExtensionConfig('acme_demo')[0]; 
```

然后你可以做这样的事情：

```
$definition = new Definition('your_service_id');
$definition->setArgument(0, $config); 
```

# c++ - 图像处理术语：位深度

> ID：15325147
> 
> 赞同：1
> 
> 时间：2013-03-10T17:20:27.540
> 
> 标签：c++, image, image-processing, png, libpng

我正在做一些图像处理，我对一些术语有点困惑。特别是，我对“位深度”的含义感到困惑。

我对位图的结构有很好的理解：它基本上是一个`M x N x channels`矩阵。所以一个 RGB 位图是`M x N x 3`，一个 RGBA（带有 alpha 通道的 RGB）是一个`M x N x 4`矩阵。

但是，这里还有另一个变量，即**BIT DEPTH**（或颜色深度）。根据**[Wikipedia 文章](http://en.wikipedia.org/wiki/Color_depth)**，位深度是指每个***像素*****的位数***。因此，RGB 位图的位深度为 24。*

 *但是，我一直在使用`libpng`C++，并且`libpng`似乎将位深度定义为每个***通道*****的位数***，而不是每个像素。因此，RGB 位图可以有 8 位深度，这意味着每个通道 1 个字节（8 位），因此每个像素有 24 位。*

 *特别是，libpng API 函数[**`png_get_bit_depth`**](http://refspecs.linuxbase.org/LSB_3.1.0/LSB-Desktop-generic/LSB-Desktop-generic/libpng12.png.get.bit.depth.1.html)返回`8`24 位 RGB 位图。那么，使用术语的维基百科文章是错误的吗？还是`libpng`这里错了？还是术语本身有些模棱两可？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:27:25.687

两者都没有错，尽管指定像素深度更为常见。通常，您会看到组件深度的唯一时间是针对专家的内容。另请参阅 x264，它具有 8 位和 10 位版本，均指组件深度。**

# css - 将链接高度设置为其父级的 100%

> ID：15325148
> 
> 赞同：11
> 
> 时间：2013-03-10T17:20:32.117
> 
> 标签：css, height

如果我有除法`height: 100px;`并且其中包含一个链接 - 我可以让链接填充除法的高度而不对值进行硬编码吗？

`<div><a href="#">hello</a></div>`

```
div {
    height: 100px;
    width: 100px;
    background: red;
}

a {
    background: green;
    height: 100%; /* This does not work. Is it possible to set this height to 100% of container? */
} 
```

小提琴：http: [//jsfiddle.net/nPL65/](http://jsfiddle.net/nPL65/)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-10T17:22:14.183

添加：

```
display: block;
height: 100%; 
```

虽然我不知道你是否介意链接跨越`<div>`

如果你只是设置`<a>`为`display: inline-block;`

[**jsFiddle**](http://jsfiddle.net/nPL65/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T17:28:05.827

是的..只有当您将其显示设置为阻止时才有可能

```
div {
   width: 100px;
   height: 100px;
   background: red;
}

a{
    display: block;
    height:100%;
    background: green;
} 
```

如您所见，背景填充为绿色而不是红色..它证明高度实际上是设置的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T17:22:31.760

块元素将扩展以填充其容器，将高度指定为 100% 将使其增加到其父级的高度。

```
a {
    background: green;
    display: block;
    height: 100%;
} 
```

**工作示例：http:** [//jsfiddle.net/h42bD/](http://jsfiddle.net/h42bD/)

# php - php xpath 获取正确的 div 内容

> ID：15325151
> 
> 赞同：0
> 
> 时间：2013-03-10T17:20:55.067
> 
> 标签：php, xpath, domdocument

我想解析我的文件“file.html”：

```
<div class="result">
    <p class="a">asdf</p>
</div>
<div class="result">
    <p class="a">hjkl</p>
    <p class="b">lkjh</p>
</div> 
```

使用 PHP 代码：

```
<?php
$dom = new DOMDocument();
$dom->loadHTMLFile(file.html);

$xpath = new DOMXPath($dom);

$entries = $xpath->query('//div[@class="result"]');

$i = 0;
foreach($entries as $entry) {
    $text_a[$i] = $xpath->query('//p[@class="a"]', $entry);
    $text_b[$i] = $xpath->query('//p[@class="b"]', $entry);
    $i++;
}
?> 
```

我想为 1\. 结果只有一个 text_a 和第二个 text_a 和 text_b。

但不幸的是，我在第一个结果中得到了 a 类和 b 类的内容，而在第二个结果中只得到了 a 类的内容。

有谁知道，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:38:17.687

我相信这种情况正在发生，因为在需要相对 XPath 的情况下，您已经陷入使用绝对 XPath 的常见陷阱。请试试这个：

```
$text_a[$i] = $xpath->query('p[@class="a"]', $entry);
$text_b[$i] = $xpath->query('p[@class="b"]', $entry); 
```

# azure - 用于令人尴尬的并行的 Azure 服务总线

> ID：15325158
> 
> 赞同：0
> 
> 时间：2013-03-10T17:21:48.927
> 
> 标签：azure, parallel-processing, azureservicebus

我正在尝试使用 azure 服务总线来解决一个令人尴尬的并行问题——一个可以分成 N 个独立部分的问题。它本质上是一个 map/reduce 问题，但我不想使用 Hadoop，因为我需要实时答案（< 1 秒）

我最初的计划是有一群工人，每个工人都有 1/N 片数据库。然后，我在公共汽车上放了 N 个搜索问题，每个工人都会做自己的事情。聚合器将合并结果。

我在这里吠错树了吗？这是解决此类问题的错误方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:58:44.837

您的一般场景是合理的，并且许多构建异步/并行系统的人每天都在使用这种场景。

但是，您要求在 < 1 秒内获得汇总结果可能会更成问题。将消息放入队列意味着消息将被持久化，然后在故事的工作线程结束时反序列化。然后，工作线程需要做一些工作并将结果返回到队列或存储中，以便之后进行聚合。

您可能会（但可能不会）发现您可以始终如一地达到亚秒级延迟要求。只有通过测试，您才能知道您是否可以达到您的性能和延迟要求。我建议构建一个应用程序将工作放入队列中，并使用工作者角色来提取工作，做一些有意义的事情，然后返回响应。

测量，调整，测量，调整。那你就知道了；）

如果延迟至关重要，并且如果 ServiceBus 无法提供您需要的性能，您可能需要考虑避免持久性开销，而是将成批的工作数据放入共享缓存中，并在他们有工作要做时通知您的工作人员。

但是，请注意，您现在必须自己构建大部分基础设施，包括 ServiceBus 自动为您提供的工作人员通知机制、重试和标记为正在处理的处理等。

HTH。

# php - 测试是否设置了cookie，php

> ID：15325160
> 
> 赞同：1
> 
> 时间：2013-03-10T17:21:57.463
> 
> 标签：php, cookies, isset

仅当未设置 cookie 并且刚刚设置时，我才需要运行查询。（换句话说，这是用户第一次访问该页面）

我尝试了以下方法：

```
$cookiename = "item_".$itemid;

if(!isset($_COOKIE[$cookiename])){
    setcookie($cookiename, "viewed", time()+60*60*18);
    $was_set="no";
}

//if it wasn't set and now it is
if(isset($_COOKIE[$cookiename]) and $was_set=="no") {
    mysql_query("UPDATE items_details SET views=views+1 where iid=$itemid");
    echo "<!-- +1 view -->";
}
else {
    echo "<!-- +0 views -->";
} 
```

第一部分效果很好，如果没有设置 cookie，但第二部分不起作用，它总是返回*+0 视图*

`isset($_COOKIE[$cookiename])`表达式总是返回 false，即使 cookie 只设置在上面 6 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:27:22.627

`setcookie()`**在响应**上添加`Set-Cookie:`标头。

 **`$_COOKIE`包含浏览器根据**请求**发送的 cookie 。

当您使用`setcookie()`它时，$_COOKIE 不会立即生效，但是当您下次加载页面时，`$_COOKIE`将有您的值，因为浏览器已经在请求中发送了 cookie 数据。

您需要稍微重构您的代码，这样您就不会在同一请求中使用 setcookie 后检查 $_COOKIE 中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:30:36.017

setcookie 仅设置标题，即发送到客户端。它不会改变 $_COOKIE 超全局变量。另一方面 - $_COOKIE 填充了从客户端发送的 cookie。因此，在第一步 - 您使用 setcookie 设置 cookie 并且在 $_COOKIE 中没有任何内容，因为客户端尚未发送它，并且只会在下一个请求时发送。因此，cookie 在 _COOKIE 超全局中无法立即使用是正常的。**

# javascript - jquery/javascript 验证是否适用于提交表单？

> ID：15325167
> 
> 赞同：-1
> 
> 时间：2013-03-10T17:22:19.820
> 
> 标签：javascript, jquery, security

我有一个问题。就像我们在表单中进行任何验证或使用某些选择器一样。现在，在提交表单之前，假设我打开了 firebug 或类似工具，并将**ID 或类**更改为其他内容。并提交表格是否正确？

例如：假设我有一个带有类**pdate**的日期输入字段来选择过去的日期和类**fdate**作为未来的日期。现在假设为相应的选择添加了一个带有这些类的 jQuery 验证。但是，如果我将**pdate**更改为**fdate**并提交表单，则使用 firebug，现在我只想确定这里的数据如何正确？

对于这种情况应该有什么好的方法？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:24:42.550

不
，客户端逻辑不安全。

您总是需要验证服务器上的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:25:31.347

我不相信客户端来验证您的数据。客户端验证有助于用户正确填写 from，但真正的验证应该在服务器端完成。

# arrays - 来自数据库的 IP 阵列禁止网站访问

> ID：15325168
> 
> 赞同：0
> 
> 时间：2013-03-10T17:22:23.257
> 
> 标签：arrays, ip

我正在努力做到这一点，这样我就可以轻松地禁止人们访问我的网站。在我的数据库中，我有一个名为“ip”的行，其中包含一个 ips 数组，例如：“0.0.0.0”、“1.1.1.1”、“2.2.2.2”。

我的以下代码是

```
<?php

include('config.inc.php');
include('database.inc.php');

$result=mysql_query("SELECT * FROM ban");

while($row = mysql_fetch_array($result))
  {

$ip = $_SERVER['REMOTE_ADDR'];
$ban = array($row['ip']);

$count = count($ban);
for ($i=0; $i<$count; $i++) {
if($ip == $ban[$i]) { 
    die("<h2>You've been banned!</h2>"); 
}
}
}
?> 
```

它没有显示“你已被禁止！” 即使我已经将我的 IP 放在了数组中？

谢谢你的帮助！

# jquery - 使用 jQuery 从数组构建 ul li

> ID：15325173
> 
> 赞同：0
> 
> 时间：2013-03-10T17:22:46.537
> 
> 标签：jquery, arrays, html-lists

我有一个看起来像这样的数组：

```
var myArray = {
    "ABC.txt": "1",
    "AD.txt": "2",
    "uploads/": "1",
    "uploads/Penguins.jpg": "1",
    "uploads/Tulips.jpg": "2",
    "morefiles.txt": "2"
}; 
```

我正在尝试`ul li`像这样：

```
<ul>
  <li>
    <a href="ABC.txt" pos="1">ABC.txt</a>
  </li>
  <li>
    <a href="AD.txt" pos="2">AD.txt</a>
  </li>
  <li rel="folder">
    <a href="uploads/" pos="1">uploads</a>
    <ul>
      <li>
        <a href="uploads/Penguins.jpg" pos="1">Penguins.jpg</a>
      </li>
      <li>
        <a href="uploads/Tulips.jpg" pos="2">Tulips.jpg</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="morefiles.txt" pos="2">morefiles.txt</a>
  </li>
</ul> 
```

我正在尝试`UL LI`使用 jQuery，但实际上我什么都没有，只是一些代码片段，甚至没有任何值得放在这里的东西。

请一点帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:27:33.910

看起来你需要的是某种模板引擎。查看[**ICanHaz**](http://icanhazjs.com/)，您可以在其中获得以下内容：

```
<script id="user" type="text/html">
  <li>
    <p class="name">Hello I'm {{ name }}</p>
    <p><a href="http://twitter.com/{{ twitter }}">@{{ twitter }}</a></p>
  </li>
</script> 
```

初始化脚本很简单：

```
var user = ich.user(user_data_object) 
```

此外，本文[客户端模板](http://coding.smashingmagazine.com/2012/12/05/client-side-templating/)将为您解释以下内容：

```
<h1>{{title}}</h1>
<ul>
    {{#names}}
        <li>{{name}}</li>
    {{/names}}
</ul> 
```

除此之外：

```
var data = {
    "title": "Story",
    "names": [
        {"name": "Tarzan"},
        {"name": "Jane"}
    ]
} 
```

要转换为：

```
<h1>Story</h1>
<ul>
    <li>Tarzan</li>
    <li>Jane</ul>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:37:23.193

首先变量 myArray 不是一个数组，一个数组是在 [ ] 中定义的，所以它应该看起来像这样

```
var myArray = [{"ABC.txt" : "1"}, {"AD.txt" : "2"}, {"uploads/" : "1"}, {"uploads/Penguins.jpg" : "1"}, {"uploads/Tulips.jpg" : "2"},{"morefiles.txt" : "2"}]; 
```

但是要在您的问题中生成 html，您可能最好使用以下结构：

```
var myArray = [
    {
        "href":"ABC.txt",
        "pos" : "1"
    },{
        "href":"AD.txt",
        "pos":"2"
    },
    ...etc
]; 
```

然后使用另一个内部数组生成嵌套

然后，您可以使用 for 循环遍历数组并随时将元素附加到

# html - 打破父级图像 仅使用 css

> ID：15325175
> 
> 赞同：2
> 
> 时间：2013-03-10T17:22:55.950
> 
> 标签：html, css

我想打破父 div 中的图像。我的主要问题是我不知道原始图像的宽度或高度。我也无法使用任何 javascript 来修复它。

使用`position:absolute;`对图像有正确的影响，但下面的`<p></p>`内容会在图像下方上升。

![图像突破父 div](../Images/d74b9fda4b85d88ee61498f3402630e3.png)

HTML：

```
 <div>
        <h1>Some Title</h1>
        <figure>
            <img src="someimage.jpg" />
        </figure>
        <p>Some description</p>
    </div> 
```

CSS：

```
div{
    width:700px;
    }

img{
    width: 80%;
    margin: 0px 0 0 -40%;
    left: 50%;
    position: absolute;
    display: block;
    } 
```

编辑：图像不应该比浏览器窗口宽（因此触发滚动）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:56:21.480

我想，你想要的是，你`paragraph`总是在图像的下方。

并且由于您已经制作了 img `position:absolute`，它的行为将独立于它的父 div。这就是该段落在 h1 标记之后呈现的原因。

此外，通过设置元素`margin`的值`position:absolute`或填充来进行固定对您没有太大帮助，因为您永远无法判断图像的宽度和大小以及分辨率范围（包括 IE）。所以我不会建议你那些临时锻炼：

在我看来，你应该做的最好的事情是改变你的布局结构：无论如何，你的 img 后面的内容区域是不可见的，那么为什么不保留三个单独的容器呢？并将它们相对定位？

看到这个标记：

```
<div class="wrapper">
            <div class='header'>
                <h1>Some Title</h1>
            </div>
            <div class="image">
                <figure>
                    <img src="someimage.jpg" />
                </figure>
            </div>
            <div class="para">
                <p id="paragraph">Some description</p>
            </div>
</div> 
```

并看到这个CSS：

```
 .header
    {
        position: relative;
        left:10%;
        width:80%;
        height: 20%;
        background-color: #CCCCCC;
        text-align: center;
    }
    .wrapper
    {
        width: 100%;
        height: auto;
    }
    .image
    {
        position: relative;
        top:20%;
        width: auto;
        background-color: #EEEEEE;
        height: auto; 
        text-align: center;
    }
    .image > figure >img
    {
        width: 1800px;
        height: 800px;
        border:1px Solid #CCCCCC;
    }
    .para
    {
        position: relative;
        left:10%;
        width:80%;
        height: 20%;
        background-color: #555555;
        text-align: center;
    } 
```

[小提琴](http://jsfiddle.net/manishmishra256/FkyF9/1/)

好处：

1.  这将适用于所有决议。

2.  您的段落容器将根据 img 高度定位自己；

3.  现在，我为 img 赋予了一个非常高的值，您所要做的就是将 img 的高度和宽度设置为 100%，使其保持原始状态。

它应该工作。告诉我是否没有

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:37:09.470

好的，我想你可以在`div`? 你可以拥有图像的最大尺寸吗？如果是这样，请尝试[此解决方案](http://jsfiddle.net/VrrBY/)。

基本上，我将 div 设置为`width:500px`并将 figure 设置为`700px`. 现在，这个数字`200px`比它的容器（`100px`每一边）都大，所以我把这个数字移到左边`100px`（这不是优雅的解决方案，因为你应该避免负边距，但我不得不将它用于演示目的），然后我把 center align 放在图。这将始终将图像放在图形的中间。我希望这是有道理的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:03:36.700

**[JSFiddle](http://jsfiddle.net/vNKYL/)**

```
div{
    width:700px;
    background:#000;
    position:relative;
    margin:0 auto;
    color:#fff;
    text-align:center;
}

img{
    width: 120%;
    margin: 0px 0 0 -10%;
    position: relative;
    display: block;
} 
```

HTML 保持不变。一些 CSS 用于示例（如背景颜色）。

无论如何，将其设置`img`为`position:relative`将使文本保留在图像下方。代替`margin: 0 0 0 -10%`,`left: -10%`也可以。

# php - 将php数组中的元素相乘

> ID：15325177
> 
> 赞同：0
> 
> 时间：2013-03-10T17:23:09.730
> 
> 标签：php, arrays, for-loop

我有一个非常简单的问题，但由于某种原因，输出不是我想要的。我有 2 个数组：

```
total_hours = array(10, 20, 30);
hourly_rate = array(15, 10, 15); 
```

所以我想要解决的是如何将对应的元素`total_hours`与`hourly_rate`(eg element 1: 10*15 = 150) 相乘，然后将其放入一个名为`total_sum`(total_sum has been initialized) 的数组中。这是我到目前为止所做的：

```
$total_sum = 0;
for($i=0; $i < sizeof($hourly_rate); $i++) {
    for($a=0; $a < sizeof($total_hours); $a++) {
        $total_sum = ($hourly_rate[$i]*$total_hours[$a]); 
    } 
    $total_pay[] = $total_sum;    
} 
```

目前我得到 0 并且不明白为什么。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:37:49.470

您可以使用带有匿名函数的 array_map 将小时数乘以费率。array_map 遍历给定的数组并将结果作为数组返回。查看[http://php.net/manual/en/function.array-map.php](http://php.net/manual/en/function.array-map.php)了解更多信息。

```
$total_hours = array(10, 20, 30);
$hourly_rate = array(15, 10, 15);    

$total_pay = array_map(function($hour, $rate) {
    return $hour * $rate;
}, $total_hours, $hourly_rate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:24:37.030

你不想有两个循环，只有一个：

```
$total_pay = array();
for($i=0; $i < count($hourly_rate); $i++) {
  $total_pay[] = $hourly_rate[$i]*$total_hours[$i]; 
} 
```

要获得最终数组的总和，请使用`array_sum`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T17:37:34.913

以下内容基于[Aarolama Bluenk 的这个答案，](https://stackoverflow.com/a/14270531/19679)只要两个数组的大小相同，就应该可以工作：

```
for($i = 0; $i < count($total_hours); $i++) {
    $result[] = $total_hours[$i] * $hourly_rate[$i];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T17:37:55.457

```
$total_hours = array(10, 20, 30);
$hourly_rate = array(15, 10, 15);

$mi = new MultipleIterator();
$mi->attachIterator(new ArrayIterator($total_hours));
$mi->attachIterator(new ArrayIterator($hourly_rate));

$total_pay = array();
foreach($mi as $details) {
    $total_pay[] = $details[0] * $details[1];
} 
```

# oracle - Oracle 翻译功能

> ID：15325180
> 
> 赞同：1
> 
> 时间：2013-03-10T17:23:24.390
> 
> 标签：oracle, plsql

我是 Oracle 的新手，正在尝试实现以下目标。

我有一个名为 USER_NAME 的列，格式为 XXXX_YYYY_ZZZZ，其中 XXXX 是数字，Y 和 Z 是字母字符。我需要把它翻译成 YYYY_XXXX_ZZZZ。

我做了一些研究并获得了翻译功能。有人可以给我一个示例如何获得上述表格吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T17:31:10.597

```
select regexp_replace('XXXX_YYYY_ZZZZ', '^(.*?)_(.*?)_(.*)$', '\2_\1_\3') 
from dual 
```

# python - 如何通过正则表达式过滤熊猫中的行

> ID：15325182
> 
> 赞同：222
> 
> 时间：2013-03-10T17:23:39.850
> 
> 标签：python, regex, pandas

我想在其中一列上使用正则表达式干净地过滤数据框。

举一个人为的例子：

```
In [210]: foo = pd.DataFrame({'a' : [1,2,3,4], 'b' : ['hi', 'foo', 'fat', 'cat']})
In [211]: foo
Out[211]: 
   a    b
0  1   hi
1  2  foo
2  3  fat
3  4  cat 
```

我想将行过滤到以`f`使用正则表达式开头的行。先走：

```
In [213]: foo.b.str.match('f.*')
Out[213]: 
0    []
1    ()
2    ()
3    [] 
```

这不是非常有用。然而，这会给我我的布尔索引：

```
In [226]: foo.b.str.match('(f.*)').str.len() > 0
Out[226]: 
0    False
1     True
2     True
3    False
Name: b 
```

所以我可以通过以下方式进行限制：

```
In [229]: foo[foo.b.str.match('(f.*)').str.len() > 0]
Out[229]: 
   a    b
1  2  foo
2  3  fat 
```

这让我人为地将一个组放入正则表达式中，似乎可能不是干净的方式。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2013-03-11T07:27:34.647

改用[包含](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.contains.html)：

```
In [10]: df.b.str.contains('^f')
Out[10]: 
0    False
1     True
2     True
3    False
Name: b, dtype: bool 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2017-06-02T18:57:45.037

已经有一个字符串处理函数`Series.str.startswith()`。你应该试试`foo[foo.b.str.startswith('f')]`。

**结果：**

```
 a   b
1   2   foo
2   3   fat 
```

我想你所期望的。

或者，您可以使用包含正则表达式选项。例如：

```
foo[foo.b.str.contains('oo', regex= True, na=False)] 
```

**结果：**

```
 a   b
1   2   foo 
```

`na=False`是为了防止出现错误，以防出现 nan、null 等值

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-12-08T02:57:03.650

It may be a bit late, but this is now easier to do in Pandas by calling [`Series.str.match`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.match.html). The [docs](https://pandas.pydata.org/pandas-docs/stable/user_guide/text.html#testing-for-strings-that-match-or-contain-a-pattern) explain the difference between `match`, `fullmatch` and `contains`.

Note that in order to use the results for indexing, set the `na=False` argument (or `True` if you want to include NANs in the results).

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2015-06-26T15:10:26.923

使用数据框进行多列搜索：

```
frame[frame.filename.str.match('*.'+MetaData+'.*') & frame.file_path.str.match('C:\test\test.txt')] 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2018-10-11T17:37:32.893

基于[user3136169](https://stackoverflow.com/users/3136169/user3136169)[的出色答案](https://stackoverflow.com/a/48884429/12268505)，这里有一个示例，说明如何删除 NoneType 值。

```
def regex_filter(val):
    if val:
        mo = re.search(regex,val)
        if mo:
            return True
        else:
            return False
    else:
        return False

df_filtered = df[df['col'].apply(regex_filter)] 
```

您还可以将正则表达式添加为 arg：

```
def regex_filter(val,myregex):
    ...

df_filtered = df[df['col'].apply(regex_filter,regex=myregex)] 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2018-02-20T11:35:55.733

编写一个布尔函数来检查正则表达式并在列上使用 apply

```
foo[foo['b'].apply(regex_function)] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-11-22T11:25:47.167

使用 Python 内置的编写 lambda 表达式的能力，我们可以通过任意正则表达式操作进行过滤，如下所示：

```
import re  

# with foo being our pd dataframe
foo[foo['b'].apply(lambda x: True if re.search('^f', x) else False)] 
```

通过使用 re.search，您可以按复杂的正则表达式样式查询进行过滤，这在我看来更强大。（因为`str.contains`相当有限）

同样重要的是：您希望字符串以小“f”*开头。*通过使用正则表达式`f.*`，您可以在文本中的任意位置匹配 f。通过使用该`^`符号，您明确声明您希望它位于内容的开头。所以使用`^f`可能是一个更好的主意:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-30T03:12:39.840

使用`str` 切片

```
foo[foo.b.str[0]=='f']
Out[18]: 
   a    b
1  2  foo
2  3  fat 
```

# python - Django - 需要只能处理年份或年份和月份值的日期时间字段

> ID：15325183
> 
> 赞同：5
> 
> 时间：2013-03-10T17:23:40.003
> 
> 标签：python, django, datetime

我需要能够在我的一些日期时间字段中只写年份或年份和月份（除了标准的完整日期时间值）。就像下面的这些模式。

```
YYYY
YYYY-MM
YYYY-MM-DD
YYYY-MM-DD HH
YYYY-MM-DD HH:MM
YYYY-MM-DD HH:MM:SS 
```

在 mySQL 中，这可以通过使用零轻松完成，但这在 django 中不起作用。就是那个愚蠢的 time.datetime python 函数不支持它。

在 django 中是否有一些简单的方法可以做到这一点？如果没有，是否有一些扩展可以为我做到这一点？如果没有，我该如何以最好的方式解决这个问题？

如果它是一个完整的数据时间值，如果它可以处理本地时间的标准化，我会很好。这样我就可以在任何地方使用相同的字段。但这不是超级重要。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T17:32:16.583

也许这会有所帮助：

**DayMonthField 和 YearField**

django-yearlessdate - [https://github.com/seddonym/django-yearlessdate](https://github.com/seddonym/django-yearlessdate)

**年月字段**

```
YEARMONTH_INPUT_FORMATS = (
    '%Y-%m', '%m/%Y', '%m/%y', # '2006-10', '10/2006', '10/06'
)

class YearMonthField(CharField):
    default_error_messages = {
        'invalid': _('Enter a valid year and month.'),
    }

    def __init__(self, input_formats=None, *args, **kwargs):
        super(YearMonthField, self).__init__(*args, **kwargs)
        self.input_formats = input_formats

    def clean(self, value):
        if value in validators.EMPTY_VALUES:
            return None
        if isinstance(value, datetime.datetime):
            return format(value, '%Y-%m')
        if isinstance(value, datetime.date):
            return format(value, '%Y-%m')
        for fmt in self.input_formats or YEARMONTH_INPUT_FORMATS:
            try:
                date = datetime.date(*time.strptime(value, fmt)[:3])
                return format(date, '%Y-%m')
            except ValueError:
                continue
        raise ValidationError(self.error_messages['invalid'])

class MyModel(models.Model):
    yearmonth = YearMonthField() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-22T17:32:59.363

还有 django-monthfield，它使用数据库中的日期字段，但小部件只选择年份和月份：

[https://github.com/clearspark/django-monthfield](https://github.com/clearspark/django-monthfield)

# apache - 了解使用 HTTP_HOST 的重定向

> ID：15325184
> 
> 赞同：0
> 
> 时间：2013-03-10T17:24:00.167
> 
> 标签：apache, .htaccess, mod-rewrite

我目前正在阅读有关重定向的教程，并且有点困惑。以下内容应该将所有对当前域的请求重定向到一个新域。

```
RewriteCond %{HTTP_HOST} old_domain\.com [NC]
RewriteRule ^(.*)$ http://www.new_domain.com/$1 [L,R=301] 
```

然而目的是`HTTP_HOST`什么？它包含什么？对我来说`HTTP_HOST`包含当前的主机名？( `old_domain.com`) 因此我对上述规则的理解是它正在测试一个包含旧域的字符串，然后是旧域？`old_domain.com/old_domain.com`

不应该吗？

```
RewriteCond %{HTTP_HOST} [NC]
RewriteRule ^(.*)$ http://www.new_domain.com/$1 [L,R=301] 
```

作为另一个帮助理解的示例，您将如何将请求重定向到`mysite.com`（其次是其他内容，因此本质上是对索引页面的请求）到`mysite2.com`using `HTTP_HOST`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:37:18.733

条件是`%{HTTP_HOST}`根据旧主机检查提供的主机。因此，如果请求通过主机“old_domain.com”进入服务器，则应运行下一条规则。如果主机是其他任何东西，甚至是 www.old_domain.com，则将跳过下一条规则。

换句话说，`%{HTTP_HOST}`就是用户传递给服务器的内容。该条件检查用户再次提供了您为其编写规则的内容。

# asp.net-mvc-4 - 从 Url 地址栏路由到控制器

> ID：15325186
> 
> 赞同：0
> 
> 时间：2013-03-10T17:24:24.857
> 
> 标签：asp.net-mvc-4, asp.net-mvc-routing, asp.net-mvc-controller

默认情况下，所有来电都转到家庭控制器。但我想做的是输入一个不同的控制器并去那里。MVC4

www.mywebsite.com 这将转到家庭控制器。

www.mywebsite.com/test 这需要去测试控制器，但对我来说它不会去，它只是说有一个内部服务器错误。

我不知道看，路由很简单所以我认为我不需要将它添加到路由映射类中。我也尝试过使用 actionlink，但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:37:54.043

如果您使用的是默认 MVC4 项目，您所要做的就是添加另一个名为 TestController 的控制器，并在其上添加一个名为 Index() 的操作方法，并且 www.mywebsite.com/test 将路由到该控制器。

# vim - 如何使用 netbeans_intg 制作 vim？

> ID：15325192
> 
> 赞同：1
> 
> 时间：2013-03-10T17:25:13.953
> 
> 标签：vim

我在 vim Makefile 中没有看到“netbeans_intg”，但我确实看到我可以使用该功能配置 vim，`+netbeans_intg`如此[处](http://vimdoc.sourceforge.net/htmldoc/various.html#+netbeans_intg)所述。我看到这个功能不包含在巨大的功能安装中。netbeans 功能的文档说，“当运行不带参数的配置时，应该包含 NetBeans 接口。”，但`vim --version`显示的输出`-netbeans-intg`。

```
./configure --help 
```

节目

```
--enable-FEATURE[=ARG]  include FEATURE [ARG=yes] 
```

但

```
./configure --enable-netbeans_intg=yes 
```

印刷

```
configure: WARNING: unrecognized options: --enable-netbeans_intg
configure: loading cache auto/config.cache
configure: error: `CC' was set to `' in the previous run
configure: error: `CFLAGS' was set to `' in the previous run
configure: error: `LDFLAGS' was set to `' in the previous run
configure: error: `CPPFLAGS' was set to `' in the previous run
configure: error: in `/home/ros/vim/src':
configure: error: changes in the environment can compromise the build
configure: error: run `make distclean' and/or `rm auto/config.cache' and start over 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:19:18.847

为什么要这个功能？

跳转`/netbeans`到`src/Makefile`本段：

```
# NETBEANS - NetBeans interface. Only works with Motif, GTK, and gnome.
# Motif version must have XPM libraries (see |workshop-xpm|).
# Uncomment this when you do not want the netbeans interface.
#CONF_OPT_NETBEANS = --disable-netbeans 
```

如果您使用 GUI 编译 Vim，听起来 netbeans 接口会自动编译。这让我们回到我的第一个问题。而对于这一点：如果一个简单的程序能给你带来你想要的，你为什么要手动编译 Vim `$ sudo apt-get install vim-gnome`？

# android - 从 Android Activity 打开包含 # 的 URL

> ID：15325198
> 
> 赞同：1
> 
> 时间：2013-03-10T17:25:39.507
> 
> 标签：android

我正在尝试使用以下方法打开一个包含 # 的 URL：

```
startActivity(new Intent("android.intent.action.VIEW", Uri.parse(url))); 
```

但是当浏览器打开时，# 被忽略了......我不知道为什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:34:13.790

尝试[在 Android 中使用 URL 类 URL 编码正确构造 URL](https://stackoverflow.com/questions/3286067/url-encoding-in-android)

```
String urlStr = "http://abc.dev.domain.com/0007AC/ads/800x480 15sec h.264.mp4";
URL url = new URL(urlStr);
URI uri = new URI(url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef());
url = uri.toURL(); 
```

# bash - 在 tail -f 记录期间处理特殊情况

> ID：15325201
> 
> 赞同：-2
> 
> 时间：2013-03-10T17:25:58.370
> 
> 标签：bash

我正在跟踪日志以查找是否有任何异常，如下所示

```
tail -f flexi.log | grep "Exception" --color 
```

这工作正常，但不幸的是，如果有任何 DataNotAvailableException，我不想记录它。

DataNotAvailableException 经常出现，我不想记录它。

这可能吗 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:28:08.290

只需添加另一个 grep 即可搜索并删除 DataNotAvailables。

```
tail -f flexi.log | grep "Exception" --color | grep -v "DataNotAvailableException" 
```

# svn - 从 HEAD-n 到 HEAD-n+m 的 SVN 日志提交？

> ID：15325202
> 
> 赞同：1
> 
> 时间：2013-03-10T17:26:04.963
> 
> 标签：svn

我希望看到从 HEAD 倒退的步骤开始`svn log`的最多`M`提交。`N`

如果您愿意，可以使用 SQL 语句之类的东西。或`-r N:M`支持简单算术的范围..

我想避免必须“grep”对应于 HEAD 的实际整数：

```
head_as_int=$(/usr/bin/svn info | perl -ne 'print "$1\n" if /^Revision: (\d+)$/' 
```

我想这将是理想的：

```
svn log -r HEAD-$n:HEAD-$n+$m 
```

不支持。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:28:57.820

只用`-l`国旗？

```
svn log -l5 
```

如果您想要特定范围的修订，那么您可以这样做：

```
svn log -r1345:1350 
```

当然，您可以使用 Bash（或您使用的任何外壳进行算术运算）：

```
svn log -r$N:$((N+5)) 
```

# mysql - 将数据库从文件制造商 pro7 移动到 Mysql

> ID：15325206
> 
> 赞同：0
> 
> 时间：2013-03-10T17:26:51.660
> 
> 标签：mysql, database, database-migration, filemaker, data-transfer

所以我有这个 fileMakerPro7 数据库。作为我的高级项目，我应该将数据库迁移到 MySQL 数据库，而不是给它一个 3N 形式的基于 PHP 的接口......

公司允许我们在该项目上花费最多 200 美元，但如果我付钱，它就必须工作。但是，我很难找到迁移数据库的方法。有什么建议么？

我找到了“file maker pro migrator”（[http://www.fmpromigrator.com](http://www.fmpromigrator.com)），试用版对我们来说足够了吗？在最坏的情况下，我们将从丢弃公司拥有的整个数据库开始。

我还可以下载 fileMakerPro12 并免费试用一个月。我可以使用 FMP12 转换数据库吗？

我完全迷失了......对任何免费建议持开放态度......

+这是一家非营利性公司，我正在为其做项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:34:07.987

如果必须这样做，我会查看 FileMaker db 的设计并在 mysql 中创建类似的东西。然后我会将 Filemaker 数据导出为文本并以某种方式导入。细节取决于外键值等。

PHP 接口将单独完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-06T22:07:26.000

## MySQL 数据转换：

是的，如果您的数据库足够小，FmPro Migrator 的演示版将转换数据库并为您构建一个 PHP Web 应用程序 - 免费。

以下是演示版的限制：

*   5 个字段
*   5 个脚本
*   5 种布局

## PHP 网络应用程序：

大多数人没有意识到这一点，但有大量 XML 格式的 FileMaker 元数据可用于执行这些类型的转换。此 XML 信息可通过通过剪贴板复制布局或从数据库设计报告 XML 文件中读取来获得。我发现剪贴板数据是最可靠的信息来源。

FmPro Migrator 能够解析 XML 并将其转换为 PHP Web 应用程序。

布局上的每个对象都用 XML 表示，以及样式和位置信息。此信息可用于创建表示与原始布局相同外观的表单文件。事实上，如果您实现了所有对象属性，就很难看出 Web 应用程序和原始数据库之间的区别。这对于公司不想重新培训员工的情况很有帮助。他们希望 Web 应用程序的外观和工作方式与原始桌面应用程序相同。

我最近在 CakePHP 框架中做了一些这样的转换。这是我使用的一些技术：

自动输入计算字段 - 计算存储的计算字段并存储在模型中，将记录保存到数据库。

未存储的计算字段 - 未存储的计算字段在表单控制器中实时计算 - 但仅适用于实际显示在表单上的字段。如果它们没有在表单上使用，这可以防止不必要地计算这些值，从而提高性能。

全局字段 - FileMaker 中的全局字段与编程语言中的全局变量一样使用。重要的是要知道每个 FileMaker 用户都有自己的全局字段数据的私有副本。MySQL 或其他 SQL 数据库服务器没有等效功能，但可以使用 SESSION 变量轻松模拟此功能。因此，每个 Web 用户仍将获得他们自己的私有 SESSION 数据，模拟 FileMaker 数据库中最初存在的相同功能。我在模型数据数组中构建这些全局变量，就好像它们是从模型中检索的一样，这意味着转换后的脚本和表单上的字段可以轻松引用它们。就在记录被写入数据库之前，结果被保存到 SESSION 变量中以保持持久性。

脚本中的全局变量 - 如果您想实现相同的功能，FileMaker 脚本中的全局变量与 PHP SESSION 变量的使用非常匹配。

矢量图形对象 - FileMaker 布局通常包括矩形、椭圆和线对象。这些对象可以替换为 RafaelJS 库，提供高质量分辨率的独立图形。

值列表 - 基于自定义和字段的值列表在 AppController.php 文件中的集中位置实现。因此，在 AppController 中更改值列表的定义，成功地在整个应用程序中自动更改菜单。

# shell - shell 脚本中的变量 newcatalog=`'$newcatalog' | sed 's/^-/\.\/-/'`

> ID：15325207
> 
> 赞同：0
> 
> 时间：2013-03-10T17:27:02.033
> 
> 标签：shell, unix, sed, ksh

我正在编写 shell 脚本：

```
read newcatalog
newcatalog=`'print -- $newcatalog | sed 's/^-/\.\/-/'`
cd "$newcatalog" 
```

newcatalog 这是新目录的名称。目录名称应该支持 * ? 和任何选项。

目录名称中的“-n”“-y”和其他“-”工作正常，但`*`不起作用，因为

```
print -- $newcatalog 
```

方法

```
print -- * | sed 's/^-/\.\/-/' 
```

它发送到`sed`所有文件，但我只想发送`*`，如下所示：

```
print -- "*" | sed 's/^-/\.\/-/' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:35:53.167

这一行是错误的：

```
newcatalog=`'print -- $newcatalog | sed 's/^-/\.\/-/'` 
```

反引号内的第一个单引号是一个闯入者，shell 应该向您诊断它。

```
newcatalog=`print -- $newcatalog | sed 's/^-/\.\/-/'` 
```

（这留下了您实际执行什么的问题。）通常，您应该使用`$(...)`而不是``...``.

```
newcatalog=$(print -- $newcatalog | sed 's/^-/\.\/-/') 
```

如果您试图避免 shell 元字符扩展`*`，请`$newcatalog`用双引号括起来：

```
newcatalog=$(print -- "$newcatalog" | sed 's/^-/\.\/-/') 
```

那不会完全保护你。如果有人键入：`$(rm -f *)`作为对 的响应`read catalog`，即使使用双引号，您也会遇到严重的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:10:55.783

你工作太辛苦了。无需调用`sed`即可进行替换。做就是了：

```
test "${newcatalog#-}" = "$newcatalog" || newcatalog="./$newcatalog" 
```

# php - PHP 返回数组中的前三个元素，然后返回另外三个

> ID：15325208
> 
> 赞同：-3
> 
> 时间：2013-03-10T17:27:09.227
> 
> 标签：php, arrays

我有一个包含 20 个元素的数组，数组中的每个元素都包含一个图像。我正在制作它，以便图像大小交替。三个图像应该是中等大小，然后接下来的四个是小，第七个是大的。模式应该一直持续到数组的末尾。现在我让它工作，所以每 7 个图像都很大，其余的都很小。我不确定设置中等图像的最佳方法是什么。所以：数组[]

```
[0]
[1]
[2]
[3]
[4]
[5]
[6]
[7]
[8]
[9]
[10]
[11]
[12]
[13]
[14]
[15]
[16]
[17]
[18]
[19]
[20] 
```

我希望 [0]、[1]、[2]、[8]、[9]、[10]、[15]、[16]、[17] 都是中等大小的。

下面是我的代码。

```
 foreach ($images as $image ) {
                $img_size = "small";
                if($i !==0 && $i % 7 == 0) {
                    $img_size = "large";
                }else{
                    $img_size = $img_size;
                }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:09:09.227

尝试这个：

```
$i = 0;
$count = count($a)-1; // get the maximum index of array $a

while ($i <= $count) {

    echo $a[i];
    if ($i+1 <= $count) echo $a[$i+1];
    if ($i+2 <= $count) echo $a[$i+2];

    $i+=8;
} // while 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:57:47.160

一些 if/else 逻辑：

```
<?php

$m = 3;
$s = 7;
$l = 8;

$counter = 1;
for($i=0;$i<=20;$i++){
    if($counter <= $m){
        $img_size = "medium";
    }elseif($counter <= $s){
        $img_size = "small";
    }else{
        $img_size = "large";
    }
    if($counter == $l) $counter = 0;

    $counter++;
    echo "i = $i and img_size = $img_size <br>";
}

?> 
```

# mysql - MySQL - 修改查询（非空）

> ID：15325209
> 
> 赞同：1
> 
> 时间：2013-03-10T17:27:21.570
> 
> 标签：mysql, sql, aggregate-functions

我正在尝试编写命令来检索已设置的数据库部分

我需要制作一个`teacher_id`'s 列表，其中计算每个老师一天的课程数量。

我在用

```
SELECT teacher_id, COUNT(lesson_time)
FROM lessons
WHERE lesson_time > 0
GROUP BY teacher_id; 
```

此语句检索所有教师 ID 并显示他们每个人有多少课，但是，我希望该语句也包括有 0 课的教师。

`lesson_time`设置为`NOT NULL`，所以我假设 0 必须写在老师有 0 节课的单元格中。

教师 ID 在“教师”表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:32:28.643

您可以使用 SELF JOIN

```
SELECT
  p.people_id,
  p.first_name,
  IFNULL(COUNT(l.lesson_time),0) AS LessonCount
FROM people AS p
  LEFT JOIN lessons AS l
    ON t.people_id = l.teacher_id
GROUP by p.people_id 
```

这是修改后的查询，将从教师表中获取所有教师，然后加入课程表进行计数。如果任何计数不可用，它将显示 0。

# php - 如何使用 PHP 以日历格式简单地显示表格行

> ID：15325215
> 
> 赞同：0
> 
> 时间：2013-03-10T17:27:41.017
> 
> 标签：php, mysql, datetime

我有一张桌子，里面有“预订”。所以结构很简单，看起来像这样。

预订：

```
----------------------------------------------------------------------
| ResID | CarID | UserID | startTime | startDate | endTime | endDate  |
----------------------------------------------------------------------
|   1   |   4   |    4   | 13:00:00  |2013-04-21 |13:00:00 |2013-04-29| 
```

这些由前端的用户和管理员更新和添加。因此，用户无需通过日历更新日期。

但我想要一种简单的方法以日历格式显示这些日期。我已经查看了一些开源解决方案，例如 PHP Calender 和一些 JQuery 解决方案，但理想情况下，我想要的只是一个简单的界面，以日历格式显示这些保留，以便我可以在此基础上进行构建。

我还在网上找到了一些脚本，其中编写的 PHP 似乎有些过时。

所以实际上我只是在寻找一个起点来循环访问我的数据库表中的条目，就像我对普通表所做的那样。

任何人都可以提出最简单的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:45:42.780

如果您可以使用 jQuery，我建议您使用[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)。向这个日历界面添加事件真的很容易，而且看起来很干净。您可以禁用大多数功能，例如拖动事件，因为您似乎不需要它们。

# asp.net - asp.net 文本框中的按键事件

> ID：15325218
> 
> 赞同：1
> 
> 时间：2013-03-10T17:28:15.090
> 
> 标签：asp.net, ajax

我需要将文本框中的输入作为数值。我需要从输入的文本框和从数据库值中检索的数据做产品。如何在文本框上进行按键事件？

```
SqlConnection objcon = new SqlConnection(conn);
objcon.Open();
string SQL = "select * from Price";
SqlCommand objCommand = new SqlCommand(SQL, objcon);
SqlDataAdapter adapter = new SqlDataAdapter();
DataSet DS = new DataSet();
adapter.SelectCommand = objCommand;
adapter.Fill(DS);
DataTable dt = DS.Tables[0];
DataView dvWindows = new DataView(dt);
dvWindows.RowFilter = "Description = 'Windows'";
foreach (DataRowView rowView in dvWindows)
{
    DataRow row = rowView.Row;
    decimal d =Convert.ToInt32(txtncores.Text) * (decimal)row["CoreCost"];// txtncores is textbox
    txtWindows.Text = d.ToString();// result value to populate in text box
} 
```

帮帮我，我是否需要在同一页面上的部分更新上使用 Ajax 而不会闪烁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:27:22.133

You could have the following asp textbox:

```
<asp:textbox id="txtncores" onkeyup="MyFunction(this);" /> 
```

Then, the following javascript function, using jQuery to do your Ajax call:

```
function MyFunction(elem)
{
    $.ajax({
        cache: false,
        type: "POST",
        url: "MyPage.aspx",
        data: "UpdatetxtWindows=" + elem.value ,
        dataType: "html",
        success: (function(data){
                document.getElementByID("txtWindows").value = data;
            })
        });
} 
```

And, on server-side, on Page Load event, do the following (my sample is in VB.net):

```
If Request.Params("UpdatetxtWindows") <> "" Then
    'Use Request.Params("UpdatetxtWindows") to do your product as in:
    d = Convert.ToInt32(Request.Params("UpdatetxtWindows")) * (decimal)row["CoreCost"]
    'Return the result to the ajax success event
    Response.Write(d.ToString())  ' d is the decimal result as in your question.
End If 
```

Note: I didn't test all of this, but it should be very close to what you need.

# sqlite - 在 Windows 8 App 中使用共享数据库

> ID：15325220
> 
> 赞同：1
> 
> 时间：2013-03-10T17:28:17.340
> 
> 标签：sqlite, windows-8, share

我正在为需要本地数据存储的 Windows 8 开发一组应用程序，我在从这些应用程序访问数据时遇到了麻烦。据我所知，每个应用程序都有自己的位置来存储其数据。是否主要可以从不同的应用程序访问 Windows.Storage 中的一个文件？我使用 SQLite 作为数据库服务器，并且必须有一个通用数据库来在应用程序之间共享数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:58:30.803

不，这些应用程序是沙盒的，因此它们无法访问彼此的本地数据存储。如果您愿意让您的应用程序初始化过程询问用户在哪里放置/查找 SQLite 数据库，那么应用程序可以在用户通过文件选择器选择的文件系统上的某个位置共享相同的文件。

当然，这意味着用户必须记住文件在他第一次启动“第二个”应用程序时的位置，因为他需要浏览到他“第一个”应用程序存放文件的同一位置。

但是，如果您利用[AccessCache.StorageItemAccessList](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.accesscache.storageitemaccesslist.aspx)，则可以将该文件位置保存在应用程序的本地存储中，因此下次用户运行任一应用程序时，他不必通过文件选择器再次授予权限。

# php - 在下拉框中选择选项后使用数组变量动态更新表单文本字段

> ID：15325224
> 
> 赞同：0
> 
> 时间：2013-03-10T17:28:46.463
> 
> 标签：php, javascript, jquery, drop-down-menu

我有一个由几支球队组成的梦幻棒球联盟，每支球队的名单上都有很多球员。所以，我有一个显示名册的页面。通过在下拉列表中选择条款，可以为名单上的每个球员分配一份合同。然后我需要在页面底部的文本字段中动态更新玩家的 base_salary。一个团队可以选择多个球员，所以我需要该框来增加所选球员的总薪水。当我只需要跟踪球员是否签订合同并且我可以在复选框的值内传递球员工资时，我使用了一个复选框，但现在有多种合同类型，因此是下拉菜单。所以，我的 java 函数仍然包含一些旧代码供参考....我不知道如何传递和“跟踪” 选择下拉菜单时的增量工资值。薪水从数据库中获取并放在 $base_salary 中。提前致谢！！

到目前为止，这是我的代码（已修改）....

```
<form method='post' action='../keepers_updated' name='form1' id='form1'>
<select name='contracts[]' id='contracts' onchange='changeClass(this)'>
  <option value=>None</option>
  <option value=<php '$keeper'; ?> data-total=<php '$current_base_salary'; ?>Std.Keeper</option>
  <option value=<php '$contract_1'; ?> data-total=<php '$current_base_salary'; ?>>1</option>
  <option value=<php '$contract_3'; ?> data-total=<php '$current_base_salary'; ?>>3</option>
  <option value=<php '$contract_5'; ?> data-total=<php '$current_base_salary'; ?>>5</option>
  <option value=<php '$franchise'; ?> data-total=<php '$current_base_salary'; ?>>F Tag</option>
</select>
</td>
<td width='10px' align='center' ><php $current_teamID; ?></td>
<td width='60px' align='center' ><php $current_positionID; ?></td>
<td width='10px' align='center' width='10px' ><php $$current_base_salary; ?></td>
<td><input type='text' name='textfield' id='textfield' value=<php $$total_salary; ?> readonly />
<b>Total Keeper Salary</b></td>

<input type='hidden' name='TeamsID' value=<php $Teams_ID; ?>>
<input type='submit' value='Save keepers'>
</form>
</table> 
```

我对java进行了一次尝试。我在某处发现了一个帖子，其中提到了选项值标签中的“数据”属性。不确定它是否可以在这里应用，但我试过了......

```
function changeClass() {
  function recalculate() {
var elem=document.getElementById("textfield"); 
    var sum = 0;

    $('#contracts').find('option:selected').each(function() {
        sum += parseInt($(this).data("total"));
    });

    elem.value='$'+sum;
  }

  $('#contracts').change(ChangeClass() {
    recalculate();
  });

});
</script> 
```

表单会加载所有合同选项，但文本字段不会更新任何内容。无论我在下拉列表中选择什么，都保持默认值。谢谢！

**更新：** 好的....我发现我可以在选择选项值字段中传递两个变量。我用 : 分隔合同类型和 base_salary，就像这样，(value=$contract_1:$base_salary)。我可以使用此代码来拆分值并且它可以工作...

```
function changeClass(value) {
  var textfield;
  var select = document.getElementsByTagName('option');
  var value_parts = value.split(':');
  var count = select.length;
  document.getElementById('textfield').value = value_parts[1];
  return;
} 
```

现在我遇到的麻烦是获得选择的总数，因此我可以创建一个 for 循环来累积工资。

# android - Android：转换为 dalvik 格式失败，错误 1 ADT 2.1

> ID：15325233
> 
> 赞同：1
> 
> 时间：2013-03-10T17:29:34.420
> 
> 标签：android

导出过程中的这个错误让我发疯。它是在更新 ADT 并添加 ActionBarSherlock 库后出现的，不确定是哪一个导致了问题。我已经删除了所有库并再次添加它们，我创建了一个新项目并复制了代码，也没有工作。

我还可以尝试哪些其他事情？（不要告诉我清理我已经完成了数千次的项目）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T22:29:11.587

这听起来好像不是真的，但它适用于我，所以如果问题与库链接的东西无关，希望它也适用于你......

当您在 Eclipse 中时，只需关闭自动构建然后导出，就不会出现此错误。

# c# - 将 PHP 代码转换为 C# 代码

> ID：15325236
> 
> 赞同：0
> 
> 时间：2013-03-10T17:29:52.250
> 
> 标签：c#, php

```
<?php 
$pwd = "test"; 
$crypted = base64_encode(pack("H*", sha1(utf8_encode($pwd)))); 
echo("$crypted"); 
?> 
```

所以我在上面得到了这个 PHP 代码，我正在尝试将它转换为 C# 代码。我尝试了以下方法，但它没有相同的输出。

```
var bytes = Encoding.UTF8.GetBytes("test");
            SHA1 sha = new SHA1CryptoServiceProvider();
            var result = sha.ComputeHash(bytes);
            string hex = Encoding.UTF8.GetString(result, 0, result.Length);
            byte[] packH = PackH(hex);
            var base64String = Convert.ToBase64String(packH); 
```

和方法：

```
 public static byte[] PackH(string hex)
        {
            if ((hex.Length % 2) == 1) hex += '0';
            var bytes = new byte[hex.Length / 2];
            for (int i = 0; i < hex.Length; i += 2)
            {
                bytes[i / 2] =  Convert.ToByte(hex.Substring(i, 2), 16);
            }
            return bytes;
        } 
```

而且因为我没有足够的声誉来回答我自己的问题，所以我会在这里写下答案：D

```
It seems that i needed to do some extra things:D 

     public static string Crypt(string data)
            {
                SHA1 sha = new SHA1Managed();
                byte[] buffer = Encoding.UTF8.GetBytes(data);
                byte[] computeHash = sha.ComputeHash(buffer);

                string delimitedHexHash = BitConverter.ToString(computeHash);
                string hexHash = delimitedHexHash.Replace("-", "");
                byte[] packH = PackH(hexHash);
                return Convert.ToBase64String(packH);
            }

            public static byte[] PackH(string hex)
            {
                if ((hex.Length%2) == 1) hex += '0';
                var bytes = new byte[hex.Length/2];
                for (int i = 0; i < hex.Length; i += 2)
                {
                    bytes[i/2] = Convert.ToByte(hex.Substring(i, 2), 16);
                }
                return bytes;
            } 
```

甚至更容易

```
Console.WriteLine(Convert.ToBase64String(new SHA1CryptoServiceProvider().ComputeHash(Encoding.ASCII.GetBytes("root")))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:31:25.493

看起来在 PHP 版本中`pack`，在使用 base64 编码之前，您也在调用 SHA1 函数的输出。

如果我正确解释 PHP 版本，您基本上首先对 SHA1 哈希的输出进行十六进制编码，然后对十六进制编码的字符串进行 Base64 编码 - 这与直接对 SHA1 哈希的输出进行 Base64 编码不同，即C# 版本中发生了什么..

# android - Bugsense - 传输 ping 超时

> ID：15325238
> 
> 赞同：2
> 
> 时间：2013-03-10T17:30:08.360
> 
> 标签：android, bugsense

BugSense 为我抛出了一个小异常。它有效（每次！？）当我的应用程序在我手中崩溃时，我仍然会收到电子邮件通知。我想知道以防万一，这个错误信息是什么？

有人知道吗？

例外：

```
 W/BugSenseHandler(2881): Transmitting ping Exception Connect to /168.63.83.24:443 timed out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:09:23.537

这意味着应用程序无法连接到端口**443**上的 IP 168.63.83.24 （通常用于**HTTPS**），它`times out`才能连接。

# c# - 试图让 Windows Phone 8 ListPicker 工作

> ID：15325243
> 
> 赞同：3
> 
> 时间：2013-03-10T17:30:25.233
> 
> 标签：c#, silverlight, xaml, windows-phone-8, windows-phone

ListPicker 功能，我可以单击它并出现一个全屏弹出窗口，但有可供选择的选项。

我的xml：

```
 <toolkit:ListPicker ExpansionMode="FullScreenOnly" FullModeHeader="Select Module" Name="modulePicker">
                    <toolkit:ListPicker.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <TextBlock Text="{Binding moduleNumber}"/>
                            </StackPanel>
                        </DataTemplate>
                    </toolkit:ListPicker.ItemTemplate>
                    <toolkit:ListPicker.FullModeItemTemplate>
                        <DataTemplate>
                            <StackPanel">
                                <TextBlock Text="{Binding moduleNumber}"/>
                            </StackPanel>
                        </DataTemplate>
                    </toolkit:ListPicker.FullModeItemTemplate>
                </toolkit:ListPicker> 
```

而它背后的 C# 包括：

```
String[] moduleNumber = { "AA1", "AA2", "AA3" }; 
```

和

```
 public MainPage()
    {
        InitializeComponent();
        this.modulePicker.ItemsSource = moduleNumber;
    } 
```

那么我需要做什么才能让 moduleNumber 中列出的字符串显示在 ListPicker 上？

如果您需要了解更多信息，请询问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:30:41.370

后面的代码很好。这是一个 xaml 问题。请在您的 xaml 文件中尝试此方法。

1) 将您的数据模板定义为 PhoneApplicationPage Resources，它从后面的代码绑定到 moduleNumber 数组。

2）然后将您的列表选择器绑定到模板。

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Name="modulePickerItemTemplate">
        <StackPanel>
            <TextBlock Text="{Binding moduleNumber}"/>
        </StackPanel>
    </DataTemplate>
    <DataTemplate x:Name="modulePickerFullItemTemplate">
        <StackPanel>
            <TextBlock Text="{Binding moduleNumber}"/>
        </StackPanel>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources>

<toolkit:ListPicker ExpansionMode="FullScreenOnly" FullModeHeader="Select Module" 
                    Name="modulePicker"
                    FullModeItemTemplate="{Binding modulePickerFullItemTemplate}" 
                    ItemTemplate="{Binding modulePickerItemTemplate}" /> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-03-21T22:21:36.860

我认为您的原始代码无效是因为拼写错误-

# c# - LinqKit PredicateBuilder 返回所有行或非行

> ID：15325245
> 
> 赞同：6
> 
> 时间：2013-03-10T17:30:26.917
> 
> 标签：c#, entity-framework, predicatebuilder, linqkit

我开始使用[**LinqKit**](http://www.albahari.com/nutshell/linqkit.aspx)的[**PredicateBuilder**](http://www.albahari.com/nutshell/predicatebuilder.aspx)来创建带有 OR 条件的谓词，这在 Linq 表达式中是不可能的。

我面临的问题是，如果我从`PredicateBuilder.True<MyEntity>()`它开始**返回所有行**，如果我从`PredicateBuilder.False<MyEntity>()`它开始**返回非行**，除了我使用的表达式！看下面的代码：

```
 var pre = PredicateBuilder.True<MyEntity>();
        pre.And(m => m.IsActive == true);

        using (var db = new TestEntities())
        {
            var list = db.MyEntity.AsExpandable().Where(pre).ToList();
            dataGridView1.DataSource = list;
        } 
```

它应该返回具有 IsActive == true 的行，但它会返回所有行！

我已经尝试了`PredicateBuilder.True` |的所有可能组合。`PredicateBuilder.False`与`And`| `Or`方法，没有一个有效！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-10T17:37:00.570

`And`扩展方法不会*修改*原始谓词 - 它返回一个*新*谓词，表示原始谓词`AND`与指定的谓词一起。

实际上，您的操作不会更改变量引用的谓词，这意味着根据您是否将原始谓词初始化为or `pre`，您最终会得到所有记录或没有记录。`true``false`

尝试：

```
 var pre = PredicateBuilder.True<MyEntity>();
    pre = pre.And(m => m.IsActive); 
```

如果您打算将`OR`谓词放在一起，请记住从`false`初始谓词开始。

```
 var pre = PredicateBuilder.False<MyEntity>();
    pre = pre.Or(m => m.IsActive); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-04T06:34:37.450

正如 Ani 所说，您忘记分配 pre

```
pre = pre.And(m => m.IsActive); 
```

# java - CountDownTimer 调用 double 方法

> ID：15325247
> 
> 赞同：0
> 
> 时间：2013-03-10T17:30:35.573
> 
> 标签：java, android

我不知道如何更好地解释。我有这个计时器，在它完成计数后，它应该调用另一个类（弹出窗口），然后在计数器所在的同一个类中调用另一个函数。

```
public class MyCount extends CountDownTimer {

        public MyCount(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        public void onFinish() {

            Intent i = new Intent(getApplicationContext(), PogresanOdgovor.class);
            i.putExtra("tacanOdgovor", tacanOdg);
            startActivity(i);
            mHandler.postDelayed(mLaunchTask,2200);

            brojacPogresnihOdgovora++;
        } 
```

第一次通过后，我的分数是2而不是1，然后是6，14......这个延迟的方法就是下一个问题：

```
Runnable mLaunchTask = new Runnable() {
        public void run() {
            nextQuestion();
            brojacVremena.start();
        }
     }; 
```

当用户回答错误时，我调用与 onFinish() 中的方法完全相同的方法并且它工作正常。

MyCount brojacVremena = new MyCount(6000, 1000);

最终 OnClickListener clickListener = new OnClickListener() { public void onClick(View v) {

```
 Answer ans = (Answer) v.getTag();
        if (ans.isCorrect) {
            brojacVremena.cancel();
            brojacTacnihOdgovora = brojacTacnihOdgovora + 5;
            Intent i = new Intent("rs.androidaplikacijekvizopstekulture.TACANODGOVOR");
            startActivity(i);
            mHandler.postDelayed(mLaunchTask,1200);
        }
    else{
        brojacVremena.cancel();
        brojacPogresnihOdgovora++;
        Intent i = new Intent(getApplicationContext(), PogresanOdgovor.class);
        i.putExtra("tacanOdgovor", tacanOdg);
        startActivity(i);
        mHandler.postDelayed(mLaunchTask,2200);

    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:17:39.117

我发现了我的错误。我给柜台打了两次电话。这里：

```
nextQuestion(); 
brojacVremena.start(); 
```

并在相同的 nextQuestion 方法中：

```
public void nextQuestion() {
brojacVremena.start();
.
.
. 
```

我不知道那是怎么发生的。

# python - Appengine 队列存储桶如何填充？

> ID：15325251
> 
> 赞同：1
> 
> 时间：2013-03-10T17:30:58.333
> 
> 标签：python, google-app-engine, python-2.7, task-queue

根据[文档](https://developers.google.com/appengine/docs/python/config/queue#Defining_Push_Queues_and_Processing_Rates)：

> App Engine 会根据您为队列指定的速率不断地用新令牌重新填充存储桶。

我不清楚这里的连续这个词是什么意思。这是否意味着一次添加一个令牌，`(rate_magnitude/rate_unit)`或者所有令牌每次都一次转储一次`rate_unit`？

需要明确的是，如果我有一个 queue.yaml 如下。我会每小时一次获得 60 个令牌的转储（因此请求已填充），还是相当于将费率设置为`1/m`？

```
queue:
- name: default
  rate: 60/h
 ... 
```

如果它是每单位时间的转储，如果 my`bucket_size`小于 的量级会发生`rate`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:28:26.423

令牌一次添加一个。无论存储桶大小如何，每分钟 1 次和每小时 60 次之间或每分钟 0.1 次和每小时 6 次之间的速率没有区别。

# php - 使用php持久化值随机生成的数字

> ID：15325255
> 
> 赞同：0
> 
> 时间：2013-03-10T17:31:10.817
> 
> 标签：php

我使用 php 中的 shuffle 函数随机生成 0 到 999 之间的数字。有没有办法在每个页面重新加载时保持这些随机生成的数字的顺序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:34:23.437

```
<?php
session_start();

if (!isset($_SESSION['numbers'])) {
  $_SESSION['numbers'] = array(/*numbers here*/);
  shuffle($_SESSION['numbers']);
}

// use $_SESSION['numbers'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:34:37.493

我*认为*这就是你所追求的，但我可能在这里错了。

`srand()`您可以使用该函数选择用于随机数生成的种子值。这是用于从对 的连续调用中生成所有其他随机数的初始数字`rand()`。这意味着如果您选择一个数字（地狱，甚至从 中获取一个`rand()`）并存储它，然后您可以使用`srand()`为生成器播种并从 中获取相同的值序列`rand()`。

# android - 如何在致命信号 11 之后使用 logcat 中的输出来找出我在 android 本机代码中从哪里得到错误？

> ID：15325260
> 
> 赞同：7
> 
> 时间：2013-03-10T17:31:19.690
> 
> 标签：android, debugging, android-ndk, fatal-error

我有一个错误要修复，它会弹出很多。它是一个致命的信号 11\. 问题是程序在我的任何本机代码中都没有崩溃，但其他原因导致了它。我从 logcat 得到以下信息，我不知道这个的正确术语：

```
03-10 12:50:14.419 F/libc    (3429): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1)
03-10 12:50:14.819 I/DEBUG   (11778): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
03-10 12:50:14.819 I/DEBUG   (11778): Build fingerprint: 'hp/hp_tenderloin/tenderloin:4.0.4/IMM76I/330937:user/release-keys'
03-10 12:50:14.819 I/DEBUG   (11778): pid: 3429, tid: 3702  >>> com.RefinedCode.handocr <<<
03-10 12:50:14.819 I/DEBUG   (11778): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000000
03-10 12:50:14.819 I/DEBUG   (11778):  r0 004a1e30  r1 33400001  r2 004a1e30  r3 00000000
03-10 12:50:14.819 I/DEBUG   (11778):  r4 414b3da8  r5 004b6cb8  r6 00000007  r7 4e348f80
03-10 12:50:14.819 I/DEBUG   (11778):  r8 4e766c10  r9 4e348f78  10 00000008  fp 4e766c24
03-10 12:50:14.819 I/DEBUG   (11778):  ip 2ac56f9c  sp 4e766c08  lr 2ac254dd  pc 2b10ba64  cpsr 60010010
03-10 12:50:14.819 I/DEBUG   (11778):  d0  0000000000000000  d1  0000000000000000
03-10 12:50:14.819 I/DEBUG   (11778):  d2  0000000000000000  d3  0000000000000000
03-10 12:50:14.819 I/DEBUG   (11778):  d4  4379000044310000  d5  437a0000442d8000
03-10 12:50:14.819 I/DEBUG   (11778):  d6  bff921fb54400000  d7  442a556b00000000
03-10 12:50:14.819 I/DEBUG   (11778):  d8  4392103d3089705f  d9  45a820003c711706
03-10 12:50:14.829 I/DEBUG   (11778):  d10 3f80000000000000  d11 3f800000000000ff
03-10 12:50:14.829 I/DEBUG   (11778):  d12 4017ef9a000000ff  d13 000000003f800000
03-10 12:50:14.829 I/DEBUG   (11778):  d14 3fee940d6bb98cc4  d15 3ff0000000000000
03-10 12:50:14.829 I/DEBUG   (11778):  d16 0000000000000000  d17 0000000042ff0000
03-10 12:50:14.829 I/DEBUG   (11778):  d18 3fc5555555555549  d19 bf9b6d5dd2eaade7
03-10 12:50:14.829 I/DEBUG   (11778):  d20 3ef4e83ec07d9f84  d21 be5ae1fd202f348f
03-10 12:50:14.829 I/DEBUG   (11778):  d22 bc7a626331000000  d23 3de5d93a5acfd57c
03-10 12:50:14.829 I/DEBUG   (11778):  d24 ff00000000000000  d25 0000d8050000a9d8
03-10 12:50:14.829 I/DEBUG   (11778):  d26 0003e14a0018a8a0  d27 0002d8070002a9da
03-10 12:50:14.829 I/DEBUG   (11778):  d28 0000000000ff0000  d29 090a0b0c0d0e0f10
03-10 12:50:14.829 I/DEBUG   (11778):  d30 0000000100000001  d31 0000000100000001
03-10 12:50:14.829 I/DEBUG   (11778):  scr 60000010
03-10 12:50:14.829 I/DEBUG   (11778): 
03-10 12:50:14.999 I/DEBUG   (11778):          #00  pc 00088a64  /system/lib/libskia.so (_ZNK6SkPath7isEmptyEv)
03-10 12:50:14.999 I/DEBUG   (11778):          #01  pc 0006e4da  /system/lib/libandroid_runtime.so
03-10 12:50:15.009 I/DEBUG   (11778):          #02  pc 0001edb0  /system/lib/libdvm.so (dvmPlatformInvoke)
03-10 12:50:15.009 I/DEBUG   (11778):          #03  pc 00059050  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread)
03-10 12:50:15.009 I/DEBUG   (11778): 
03-10 12:50:15.009 I/DEBUG   (11778): code around pc:
03-10 12:50:15.009 I/DEBUG   (11778): 2b10ba44 e5903014 e3530000 03a00001 012fff1e  .0....S......./.
03-10 12:50:15.009 I/DEBUG   (11778): 2b10ba54 e3530001 13a00000 112fff1e e590300c  ..S......./..0..
03-10 12:50:15.009 I/DEBUG   (11778): 2b10ba64 e5d30000 e2700001 33a00000 e12fff1e  ......p....3../.
03-10 12:50:15.009 I/DEBUG   (11778): 2b10ba74 e1a03002 e5912008 e92d4010 e1530002  .0... ...@-...S.
03-10 12:50:15.009 I/DEBUG   (11778): 2b10ba84 e1a04000 3a000004 eddf7a09 edc07a01  .@.....:.z...z..
03-10 12:50:15.009 I/DEBUG   (11778): 
03-10 12:50:15.009 I/DEBUG   (11778): code around lr:
03-10 12:50:15.009 I/DEBUG   (11778): 2ac254bc ed78f7ca 463a4621 4605466e f7fc4668  ..x.!F:FnF.FhF..
03-10 12:50:15.009 I/DEBUG   (11778): 2ac254cc 4628faa3 bdf0b005 4610b510 ed70f7ca  ..(F.......F..p.
03-10 12:50:15.009 I/DEBUG   (11778): 2ac254dc bf00bd10 4610b510 f7ca4619 bd10ed70  .......F.F..p...
03-10 12:50:15.009 I/DEBUG   (11778): 2ac254ec 4610b510 ed70f7ca bf00bd10 4610b510  ...F..p........F
03-10 12:50:15.009 I/DEBUG   (11778): 2ac254fc ed70f7ca bf00bd10 2030b570 f7c74615  ..p.....p.0 .F..
03-10 12:50:15.009 I/DEBUG   (11778): 
03-10 12:50:15.009 I/DEBUG   (11778): stack:
03-10 12:50:15.009 I/DEBUG   (11778):     4e766bc8  004b5270  [heap]
03-10 12:50:15.009 I/DEBUG   (11778):     4e766bcc  004a1ac0  [heap]
03-10 12:50:15.009 I/DEBUG   (11778):     4e766bd0  1d600005  
03-10 12:50:15.009 I/DEBUG   (11778):     4e766bd4  2b2e62e3  /system/lib/libdvm.so
03-10 12:50:15.009 I/DEBUG   (11778):     4e766bd8  004b2de0  [heap]
03-10 12:50:15.009 I/DEBUG   (11778):     4e766bdc  004b6cb8  [heap]
03-10 12:50:15.009 I/DEBUG   (11778):     4e766be0  004b2de0  [heap]
03-10 12:50:15.009 I/DEBUG   (11778):     4e766be4  2ac1c5c1  /system/lib/libandroid_runtime.so
03-10 12:50:15.009 I/DEBUG   (11778):     4e766be8  41477d58  /dev/ashmem/dalvik-LinearAlloc (deleted)
03-10 12:50:15.009 I/DEBUG   (11778):     4e766bec  004b6cb8  [heap]
03-10 12:50:15.009 I/DEBUG   (11778):     4e766bf0  00000004  
03-10 12:50:15.009 I/DEBUG   (11778):     4e766bf4  4e348ee8  
03-10 12:50:15.019 I/DEBUG   (11778):     4e766bf8  2b524910  /dev/ashmem/dalvik-heap (deleted)
03-10 12:50:15.019 I/DEBUG   (11778):     4e766bfc  2b524910  /dev/ashmem/dalvik-heap (deleted)
03-10 12:50:15.019 I/DEBUG   (11778):     4e766c00  df0027ad  
03-10 12:50:15.019 I/DEBUG   (11778):     4e766c04  00000000  
03-10 12:50:15.019 I/DEBUG   (11778): #01 4e766c08  414b3da8  /dev/ashmem/dalvik-LinearAlloc (deleted)
03-10 12:50:15.019 I/DEBUG   (11778):     4e766c0c  2b2b0db4  /system/lib/libdvm.so 
```

通常当我遇到这种错误时，这是​​因为我编写的一些本机代码搞砸了，比如访问向量的无效元素或其他东西。

问题通常发生在我的一个本机函数运行后（但不在其中），所以当我没有得到问题发生位置的行号时，我真的很难弄清楚如何解决它。有没有办法可以使用此输出来获取有关该问题的更多信息？我不知道这个输出的正确术语是什么，所以我很难寻找答案。如果这里有人有这方面的经验，我真的很想能够使用它！

谢谢，扎克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T10:38:30.960

`Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1)`是`null pointer dereferencing`。如您所见，地址是`0x00000000`，因此系统正在尝试从地址读取`0`。

```
03-10 12:50:14.999 I/DEBUG   (11778):          #00  pc 00088a64  /system/lib/libskia.so (_ZNK6SkPath7isEmptyEv)
03-10 12:50:14.999 I/DEBUG   (11778):          #01  pc 0006e4da  /system/lib/libandroid_runtime.so
03-10 12:50:15.009 I/DEBUG   (11778):          #02  pc 0001edb0  /system/lib/libdvm.so (dvmPlatformInvoke)
03-10 12:50:15.009 I/DEBUG   (11778):          #03  pc 00059050  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread) 
```

你的崩溃是在`SkPath7isEmptyEv`-> `SkPath.isEmpty()`。（这称为[名称修饰](http://en.wikipedia.org/wiki/Name_mangling#Complex_example)）

所以这显然是一个系统/框架问题。我会尝试创建一个最小的代码来重现该问题以了解其性质并搜索已知的错误报告。最好的办法是找到一个不触及此代码路径的解决方法。

# java - Javascript复选框切换问题

> ID：15325264
> 
> 赞同：0
> 
> 时间：2013-03-10T17:31:34.807
> 
> 标签：java, javascript, jquery, html

您好我正在尝试获取一个简单的脚本，该脚本将根据用户是否单击页面上的复选框来隐藏或显示 div。

我有一个用我要编辑的元素以及脚本编写的测试 HTML，但是当我测试它时，现在 chrome 开发人员控制台显示错误或脚本甚至被调用。

我已经查看了这两个以供参考：

[如何检查是否在jQuery中选中了复选框？](https://stackoverflow.com/questions/901712/check-checkbox-checked-property-using-jquery)
[除非选择单选按钮，否则如何使复选框变灰？](https://stackoverflow.com/questions/12695095/how-to-grey-out-checkbox-unless-radio-button-is-selected)

这是对我将使用的 jQuery 库的引用。

```
<script language="JavaScript" type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

除了我试图开始工作的脚本：

```
$('extendedStay').click(function(){
  $('#extendedQuarter').toggle(this.checked);
}); 
```

以及我试图开始工作的元素：

```
<div id="extendedResponse" align="left">
    <form action="">
        <div name="extendedStayResponses">
            <input type="checkbox" name="extendedStay" id="extendedStay"/>Yes
        </div>
        <div id="extendedQuarter" style="display:none">
            <select name="extraQuarters" selected="1">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
            </select>
        </div>
    </form>
</div> 
```

我只是不正确地实现了该功能，还是我没有看到一些语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T17:33:01.630

添加一个`#`for id 选择器。此外，如果此脚本在页面加载时执行，您应该将其放置在没有`$(document).ready()`函数的情况下。

```
 <script>
      $(document).ready(function(){
        $('#extendedStay').click(function(){
            $('#extendedQuarter').toggle(this.checked);
        });
      });
    </script> 
```

**工作示例：http:** [//jsfiddle.net/Lv8eX/](http://jsfiddle.net/Lv8eX/)

# c# - 如何通过鼠标单击组合框在记事本（运行时）中获取数据？

> ID：15325270
> 
> 赞同：2
> 
> 时间：2013-03-10T17:32:21.047
> 
> 标签：c#, asp.net, winforms

我制作了一个完整的 INTERNET 浏览器。我做了很多选择，一个书签创建一个问题。假设我通过单击记事本文件中的新值来获取一个值，当按照我的想法完成此操作时。我又遇到了一个问题，每次点击都会得到一个重复的值。如何避免重复数据请指导我。我的编码部分是：-

```
private void comboBox1_SelectedIndexChanged_1(object sender, EventArgs e)
{
   int kkk = comboBox1.Items.Count;

   string path = File.ReadAllText("F:\\kmm.txt");
   string[] y = path.Split('\n');
   foreach (string kk in y)
   {
      comboBox1.Items.Add(kk);
   }
   // comboBox1.Items.Clear();
   string km = comboBox1.SelectedItem.ToString();
   wb.Navigate(km);
} 
```

快照组合框:: ![在此处输入图像描述](../Images/7b0c1d719cd366d17ed11d29c16c414e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:43:19.053

每次`ComboBox Selection Index`更改时，都会从 加载项目`F:\kmm.txt`。

您正在应用非常错误的逻辑来加载项目`ComboBox`

更好的方法是在`Form_Load`事件中仅在 ComboBox 中加载项目一次。

但是，如果您希望将项目添加到组合框中，`comboBox1_SelectedIndexChanged_1`以防您需要清除`comboBox1`.

试试这种方式：

```
private void comboBox1_SelectedIndexChanged_1(object sender, EventArgs e)
{
   int kkk = comboBox1.Items.Count;

   string path = File.ReadAllText("F:\\kmm.txt");
   string[] y = path.Split('\n');

   // clear all existing items first
   comboBox1.Items.Clear();

   foreach (string kk in y)
   {
      comboBox1.Items.Add(kk);
   }
   // comboBox1.Items.Clear();
   string km = comboBox1.SelectedItem.ToString();
   wb.Navigate(km);
} 
```

# android - 更改画布上的位图

> ID：15325273
> 
> 赞同：2
> 
> 时间：2013-03-10T17:32:28.010
> 
> 标签：android, canvas, bitmap

我有一个视图类和活动以及与 XML 链接的视图类。视图类首先绘制字母 a 的位图。在活动中，有下一个和上一个按钮，允许用户在字母图像中进行操作。但是，我到处寻找清理画布的方法，但似乎没有任何问题。我不确定如何访问视图类来更改图像，因为它们是通过 XML 布局文件链接的。

查看课程

```
 protected void onDraw(Canvas canvas) {

    drawLetterA(canvas);

}

public void drawLetterA (Canvas canvas) {

    Bitmap myBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.lettera);
    canvas.drawBitmap(myBitmap, 0, 0, null);

}

public void drawLetterB (Canvas canvas) {

    //canvas.drawColor(Color.WHITE);
    Bitmap myBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.letterb);
    canvas.drawBitmap(myBitmap, 0, 0, null);

} 
```

# ruby - 中间人父、兄弟、子方法

> ID：15325277
> 
> 赞同：0
> 
> 时间：2013-03-10T17:32:51.407
> 
> 标签：ruby, middleman

在中间人中创建页面时，如何指示哪些页面是父母/兄弟/孩子？该文档提供了一些指示，您可以如何使用父兄弟和子方法来构建导航和面包屑，但它没有说明如何排列目录中的页面，以便它们响应这些方法（父，兄弟，子）在适当的方式。

```
Each resource in the sitemap is a Resource object. Pages can tell you all kinds of interesting things about themselves. You can access frontmatter data, file extension, source and output paths, a linkable url, its mime type, etc. Some of the properties of the Page are mostly useful for Middleman's rendering internals, but you could imagine filtering pages on file extension to find all .html files, for example.

Each page can also find other pages related to it in the site hierarchy. The parent, siblings, and children methods are particularly useful in building navigation menus and breadcrumbs. 
```

这是父方法 [http://rubydoc.info/github/middleman/middleman/Middleman/Sitemap/Extensions/Traversal#parent-instance_method](http://rubydoc.info/github/middleman/middleman/Middleman/Sitemap/Extensions/Traversal#parent-instance_method)

这是子方法 [http://rubydoc.info/github/middleman/middleman/Middleman/Sitemap/Extensions/Traversal#children-instance_method](http://rubydoc.info/github/middleman/middleman/Middleman/Sitemap/Extensions/Traversal#children-instance_method)

这是兄弟姐妹方法

[http://rubydoc.info/github/middleman/middleman/Middleman/Sitemap/Extensions/Traversal#siblings-instance_method](http://rubydoc.info/github/middleman/middleman/Middleman/Sitemap/Extensions/Traversal#siblings-instance_method)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T13:42:34.583

在深入研究了 Middleman 的代码之后，我发现了一个 Cucumber 测试，它描述了`#parent`、`#children`和`#siblings`方法。

[中间人/中间人核心/功能/sitemap_traversal.feature](https://github.com/middleman/middleman/blob/master/middleman-core/features/sitemap_traversal.feature)：

```
Feature: Step through sitemap as a tree

  Scenario: Root
    Given the Server is running at "traversal-app"
    When I go to "/index.html"
    Then I should see "Path: index.html"
    Then I should not see "Parent: index.html"
    Then I should see "Child: sub/index.html"
    Then I should see "Child: root.html"
    Then I should not see "Child: proxied.html"

...continued... 
```

*   简而言之，似乎可以在文件名“index.html”的上一级找到父资源，所以如果您正在查看`/foo/bar/some_resource.html`，它的父资源可以在`/foo/index.html`.
*   它的兄弟姐妹与请求处于同一级别（请注意，“同名目录”被转换为“索引文件”，例如`/foo/bar/`become `/foo/bar.html`，使其兄弟姐妹处于同一`/foo/*`级别。）
*   它的孩子在下面的级别。

通过将任何文件放置在文件层次结构中的相应位置，您应该能够通过调用`#parent`、`#children`或引用该文件或包含该文件的集合`#siblings`。

[在阅读测试时请注意，在配置文件中](https://github.com/middleman/middleman/blob/master/middleman-core/fixtures/traversal-app/config.rb)设置了几个“假”路由（`/sub/fake.html`and`fake2.html`和`/directory-indexed/fake.html`and ） 。`fake2.html`

* * *

## 更深的潜水

如果你不能从表面上接受 Cucumber 测试（我不怪你），还有更多！毕竟，这是什么，“我应该看到”和“我不应该看到”的废话？嗯，有一个答案。

在测试的夹具（ middleman/middleman [-core/fixtures/traversal-app/](https://github.com/middleman/middleman/tree/master/middleman-core/fixtures/traversal-app)）中，[layout.erb](https://github.com/middleman/middleman/blob/master/middleman-core/fixtures/traversal-app/source/layout.erb)是唯一包含任何内容的文件。在其中，您可以看到在 html 文档的正文中打印出 Child、Parent 和 Sibling 路径。

[中间人/中间人核心/固定装置/遍历应用程序/源/ layout.erb](https://github.com/middleman/middleman/blob/master/middleman-core/fixtures/traversal-app/source/layout.erb)：

```
Path: <%= current_page.path %>

Source: <%= current_page.source_file.sub(root + "/", "") %>

<% if current_page.parent %>
  Parent: <%= current_page.parent.path %>
<% end %>

...continued... 
```

这有助于解释测试，这些测试只是在响应正文中查找来自布局的字符串。[您可以在 Cucumber 步骤定义 ( middleman / middleman-core / lib / middleman-core / step_definitions /](https://github.com/middleman/middleman/tree/master/middleman-core/lib/middleman-core/step_definitions) )中看到测试的确切行为。

最后，布局使用我们首先要描述的方法，`#parent`，`#children`， 和`#siblings`，它们在 middleman-core 中定义。

在[middleman/middleman-core/lib/middleman-core/sitemap/extensions/traversal.rb 中：](https://github.com/middleman/middleman/blob/master/middleman-core/lib/middleman-core/sitemap/extensions/traversal.rb)

```
module Traversal
  # This resource's parent resource
  # @return [Middleman::Sitemap::Resource, nil]
  def parent
    parts = path.split("/")
    parts.pop if path.include?(app.index_file)

    return nil if parts.length < 1

    parts.pop
    parts << app.index_file

    parent_path = "/" + parts.join("/")

    store.find_resource_by_destination_path(parent_path)
  end

  # This resource's child resources
  # @return [Array<Middleman::Sitemap::Resource>]
  def children
    return [] unless directory_index?

    if eponymous_directory?
      base_path = eponymous_directory_path
      prefix    = %r|^#{base_path.sub("/", "\\/")}|
    else
      base_path = path.sub("#{app.index_file}", "")
      prefix    = %r|^#{base_path.sub("/", "\\/")}|
    end

    store.resources.select do |sub_resource|
      if sub_resource.path == self.path || sub_resource.path !~ prefix
        false
      else
        inner_path = sub_resource.path.sub(prefix, "")
        parts = inner_path.split("/")
        if parts.length == 1
          true
        elsif parts.length == 2
          parts.last == app.index_file
        else
          false
        end
      end
    end
  end

  # This resource's sibling resources
  # @return [Array<Middleman::Sitemap::Resource>]
  def siblings
    return [] unless parent
    parent.children.reject { |p| p == self }
  end

  ...continued...
end 
```

我将不再解释 Ruby 代码，因为我得赶紧上班了。如果您希望我进一步调查，请在评论中告诉我，我会回复的。

# php - 从单个文本表单保存多个 $_POST

> ID：15325278
> 
> 赞同：0
> 
> 时间：2013-03-10T17:32:52.730
> 
> 标签：php, forms, session, post

我有一个带有单个表单的页面和一个提交按钮。

我想要实现的是，当输入一些文本时，它会保存到`$_POST`数组中并在下面输出。但是，然后我想做的是使用*相同*的表单来执行**相同**的任务（尽管文本不同），但要确保保存**两个/多个**值。

我假设实现这一点的最佳方法是在重新加载页面时将它们保存到数组中；但我不知道从哪里开始。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:35:25.027

您可以做的是制作一些隐藏字段并使用表单中的数据对其进行初始化，这是第一次编辑的。然后当它第二次发布时，您可以使用隐藏字段中的值和普通字段中的新信息

```
<input type="hidden" name="hiddenFieldName" value="<?php $_POST['normalFieldName'] ?>" 
```

# python - 镜像二叉搜索树

> ID：15325281
> 
> 赞同：0
> 
> 时间：2013-03-10T17:33:04.213
> 
> 标签：python, binary-search-tree

这段代码给出了二叉搜索树的根，就是创建它的镜像。

```
def mirror(root):
    if root is None:
        pass
    else:
        mirror(root.left)
        mirror(root.right)
        temp = root.left
        root.left = root.right
        root.right = temp 
```

首先，这段代码是否正确，这里的递归是否应该首先到达树的叶子，然后在展开时切换引用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T17:36:36.683

这是正确的，但不是很 Pythonic。

最好只写

```
def mirror(root):
    if root is None:
        return
    mirror(root.left)
    mirror(root.right)
    root.left, root.right = root.right, root.left 
```

对于这个问题，您可以按任一顺序递归（在父母之前或之后反转叶子）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-19T05:22:09.963

这是我获取二叉搜索树镜像的python代码。可能有一些不正确的缩进。

```
#Binary Tree Node

class Node:

    def __init__(self,item):
        self.data = item
        self.left = None
        self.right = None

#Binary search tree
class binarySearchTree:
    def __init__(self):
        self.root = Node(None)

    def mirror(self,node):

        if node is None:
            return False
        elif self.root.data == node:
            self.root.left,self.root.right = self.root.right,self.root.left
            if self.root.left != None:
                self._mirror(self.root.left)
                if self.root.right != None:
                    self._mirror(self.root.right)
            else:
                return self.root

    def _mirror(self,node):
        if node is None:
            return False
        else:
            node.left,node.right = node.right,node.left
            if node.left != None:
                self._mirror(node.left)
                if node.right != None:
                    self._mirror(node.right)

            else:
                return node
    def inorder_traverse(self):
        if self.root != None:
            self._inorder(self.root)

    def _inorder(self,cur):
        if cur != None:
            if cur.left is not None:
                self._inorder(cur.left)

            print(cur.data)

            if cur.right != None:
                self._inorder(cur.right)
def main():
    bst = binarySearchTree()
    bst.insert(7)
    bst.insert(1)
    bst.insert(0)
    bst.insert(3)
    bst.insert(2)
    bst.insert(5)
    bst.insert(4)
    bst.insert(6)
    bst.insert(9)
    bst.insert(8)
    bst.insert(10)
    bst.insert(11)
    bst.inorder_traverse()
    bst.mirror(7)
    bst.inorder_traverse() 
```

输出：

[在此处输入图像描述](https://i.stack.imgur.com/TarZY.jpg)

# jquery - jQuery :empty 在 Jade 中不起作用

> ID：15325282
> 
> 赞同：0
> 
> 时间：2013-03-10T17:33:09.510
> 
> 标签：jquery, pug

我的页面上有一个用于信息消息的 div，但如果它为空，我希望它不可见。我在布局文件中使用了以下 jQuery 脚本，但它似乎不起作用。我得到一个空的蓝色盒子，但我希望它被隐藏，除非里面有内容。

```
script(type='text/javascript')
    $('#info:empty').hide(); 
```

实际的 Jade 文件只有：

```
extends layout

block head
    title Test page

block content
    if (message)
        #info= message 
```

我有另一个工作的 jQuery 脚本，它使整个 div 淡出，所以我不认为这是布局文件的问题，但无论如何：

```
head
    link(href='http://fonts.googleapis.com/css?family=Open+Sans', rel='stylesheet', type='text/css')
    link(href="/stylesheets/style.css", type="text/css", rel="stylesheet")
    script(type='text/javascript', src="http://code.jquery.com/jquery-1.9.1.min.js");
    script(type='text/javascript')
        $(document).ready(function(){
           setTimeout(function(){
          $("#info").fadeOut("slow", function () {
          $("#info").remove();
              });

        }, 2000);
         });
    script(type='text/javascript')
        $('#info:empty').hide();
    meta(http-equiv='Content-Type', content='text/html; charset=utf-8')
    block head

body
    block content 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:51:48.477

将它移动到文档中）。准备好它会触发。

```
 script(type='text/javascript')
        $(document).ready(function(){
           setTimeout(function(){
          $("#info").fadeOut("slow", function () {
          $("#info").remove();
              });

        }, 2000);
         $('#info:empty').hide();
        }); 
```

# javascript - 如何检测鼠标指针是否击中 HTML 5 画布上已绘制的线条

> ID：15325283
> 
> 赞同：2
> 
> 时间：2013-03-10T17:33:22.293
> 
> 标签：javascript, html, canvas, mouseover

我试图弄清楚如何检测用户的鼠标是否使用 jQuery 在 HTML 5 画布上击中一行。

这是生成画布线的代码：

```
<canvas id="myCanvas" width="400" height="400" style="border:1px solid #c3c3c3;">
Your browser does not support the canvas element.
</canvas>

<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
<script type="text/javascript">
    window.onload = function(){
        var c=document.getElementById("myCanvas");
        var ctx=c.getContext("2d");
        ctx.moveTo(40,0);
        ctx.lineTo(40,360);
        ctx.stroke();
        ctx.moveTo(80,400);
        ctx.lineTo(80,40);
        ctx.stroke();
        ctx.moveTo(120,0);
        ctx.lineTo(120,360);
        ctx.stroke();
        ctx.moveTo(160,400);
        ctx.lineTo(160,40);
        ctx.stroke();
    };
</script> 
```

我正在使用一个修改过的 jQuery 脚本，我实际上在这里的另一个问题中找到了该脚本，但现在我无法弄清楚如何在画布中检测线条，主要是从白色到黑色的颜色差异。我知道这可以用图像来完成，但我还没有看到任何人有这样的东西。

我想我真正的问题是，有没有办法用 jQuery 检测画布元素上的颜色变化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T18:30:01.707

它可能与javascript有关。实际上，您在上面的示例中没有使用任何 jQuery。一种简单的方法是从画布中获取像素数据，并检查指定 x 和 y 位置的 alpha。如果 alpha 未设置为 0，那么您在画布上绘制了一些东西。下面是我快速组合起来的一个功能。

**[现场演示](http://jsfiddle.net/loktar/zzuYh/)**

```
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d"),
    width = 400;
height = 400;

canvas.width = canvas.height = 200;

// draw
ctx.moveTo(40, 0);
ctx.lineTo(40, 360);
ctx.stroke();
ctx.moveTo(80, 400);
ctx.lineTo(80, 40);
ctx.stroke();
ctx.moveTo(120, 0);
ctx.lineTo(120, 360);
ctx.stroke();
ctx.moveTo(160, 400);
ctx.lineTo(160, 40);
ctx.stroke();

function detectLine(x, y) {
    var imageData = ctx.getImageData(0, 0, width, height),
        inputData = imageData.data,
        pData = (~~x + (~~y * width)) * 4;

    if (inputData[pData + 3]) {
        return true;
    }

    return false;
}

canvas.addEventListener("mousemove", function(e){
    var x  = e.pageX,
        y = e.pageY;
    console.log(detectLine(x, y));
});

console.log(detectLine(40, 100));
console.log(detectLine(200, 200)); 
```

# javascript - 当页面包含 DOM 时，基于内容的 iframe 自动高度不会调整大小

> ID：15325285
> 
> 赞同：0
> 
> 时间：2013-03-10T17:33:35.477
> 
> 标签：javascript, dom, iframe, resize, height

当页面包含 DOM 时，基于内容的 iframe 自动高度不会调整大小

```
<script language="javascript" type="text/javascript">
  function resizeIframe(obj) {
    obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
  }
</script>

<iframe src="http://site.com/page.php" frameborder="0" width="995" scrolling="no" marginheight="0" marginwidth="0" allowtransparency="true" onload="javascript:resizeIframe(this);"></iframe> 
```

在我发现这个问题之前它工作得很好

其中一个 iframe 网站页面包含 DOM 以隐藏和显示更多文本

![在此处输入图像描述](../Images/ab744c8447a80019ac1110f1cda06ee6.png)

当用户点击它时..它将显示更多文本..但 iframe 不会调整大小并且不会显示整个页面

![在此处输入图像描述](../Images/1e2c699e35ae9247b61c03f7cea6e9a9.png)

我需要它正常工作

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-02T20:23:59.323

您需要检测 iFrame 中的 DOM 是否已更改，然后重新计算 IE 框架的大小。最好的方法是使用 MutationObserver。但是，这在 IE10 及更低版本中不起作用，因此您必须使用后备。

看看我的小图书馆，它会为你处理这一切。

[https://github.com/davidjbradshaw/iframe-resizer](https://github.com/davidjbradshaw/iframe-resizer)

# java - 在 Netbeans IDE 7.3 中安装 glassfish3？

> ID：15325289
> 
> 赞同：-1
> 
> 时间：2013-03-10T17:33:53.307
> 
> 标签：java, glassfish-3, netbeans-7

我已经安装了 glassfish3，还安装了 netbeans ide 7.3。现在，我想将安装的 glassfish3 添加到我的服务器中。我怎样才能做到这一点？我不想再次下载它。像，我可以在 netbeans IDE 中给出我安装的 glassfish3 的路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:44:16.897

转到`Services`选项卡并右键单击`Servers`，然后单击`Add Server`并选择所需的服务器。

![将服务器添加到 netbeans](../Images/d53836eed434833bb6a8513e5313d829.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:16:22.780

Netbeans 带有 GLassfish 对吗？不过，看看下面的

[https://blogs.oracle.com/vkraemer/entry/glassfish_3_1_and_netbeans](https://blogs.oracle.com/vkraemer/entry/glassfish_3_1_and_netbeans)

# null - @EJB 注入 dao

> ID：15325294
> 
> 赞同：0
> 
> 时间：2013-03-10T17:34:17.060
> 
> 标签：null, ejb, jta

我刚刚开始使用 EJB。我想使用 JTA 从数据库中接收一些数据。我的实体：

```
@Entity
@Table(name = "User")
@NamedQuery(name = "User.findByAddressName",
            query = "select u from User u where u.userAddress.addressName = :addressName")
public class User implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private long userID;

     @Column(name = "userFirstName", length = 45)
     private String userFirstName;

    @Column(name = "userLastName", length = 45)
    private String userLastName;

    @Column(name = "userBirthDate")
    private Date userBirthDate;

    @Column(name = "userPhone")
    private String userPhone;

    @Column(name = "userPassword")
    private String userPassword;

    @OneToOne(cascade = CascadeType.ALL, mappedBy = "addressUser")
    private Email userAddress;

    public User() {
    }

    public User(String userFirstName, String userLastName, Date userBirthDate, String userPhone, String userPassword) {
        this.userFirstName = userFirstName;
        this.userLastName = userLastName;
        this.userBirthDate = userBirthDate;
        this.userPhone = userPhone;
        this.userPassword = userPassword;
    }
} 
```

我的道：

```
@Stateless
public class UserBean {

    @PersistenceContext(unitName = "server")
    private EntityManager em;

   public User getUserByEmail(String email) {
       TypedQuery<User> queryUser = em.createNamedQuery("User.findByAddressName",
               User.class);
       queryUser.setParameter("addressName", email);
       return queryUser.getSingleResult();
   }

} 
```

我的服务：

```
@Stateless
public class LoginService {
    @EJB
    UserBean userBean;

    public boolean loginUser(String userEmail, String userPass) {
        User user = userBean.getUserByEmail(userEmail);

        if (userPass.equals(user.getUserPassword())) {
            return true;
        } else return false;
    }
} 
```

我尝试接收数据：

```
boolean b = new LoginService().loginUser("user", "user1"); 
```

但是由@EJB 在LoginService 中注入的UserBean userBean 为null。

有很多简单的例子说明如何做这样的事情，我都做的一模一样，但是还是抛出NullPointerException，不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:41:32.470

要从 Java EE 环境中的注入中受益，您不能通过`new`. 您需要通过`@EJB`JNDI 注入或查找它。

如果您通过`new`此实例创建服务，则不会将其视为容器管理的实例，因此它的任何功能（如注入）都不可用。当您通过 JNDI 注入或查找其引用时，您将获得完全托管的实例，并为您完成所有注入。

不知道您在哪个 Java EE 堆栈上（5 或 6），但请记住，您不能简单地将东西通过`@EJB`手动创建的类注入。它们也需要由容器创建以使用注入。

# asp.net-mvc-4 - 对 ASP.NET MVC4 Web API 控制器的 jQuery 调用中出现意外的令牌

> ID：15325297
> 
> 赞同：0
> 
> 时间：2013-03-10T17:34:21.887
> 
> 标签：asp.net-mvc-4, asp.net-web-api, jsonp

我正在调用我正在构建的 MVC4 Web API 服务，只是为了学习 MVC 和 Web API。我的 jQuery 调用有问题。我不断收到意外的令牌错误。

[http://jsbin.com/ayuvak/1/edit](http://jsbin.com/ayuvak/1/edit)

任何帮助将不胜感激。我怀疑这很容易，但我直到凌晨 4:00 都在从事另一个项目，无法集中精力挽救我的生命。

```
$(document).ready(
      function(){
        $.ajax({
            url: 'http://sub.robertkaucher.com/api/Subtitles/5?callback',
            type: "GET",
            dataType: "jsonp"
        });
        function callback(data) {
            $('#divContent').html(data.SubFile);

        }
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:51:49.163

您要求您的服务返回 JSONP，但该服务将 JSON 作为内容类型返回。这就是您收到此错误的原因。您可以尝试使响应标头返回内容类型到 text/javascript 而不是 application/json 吗？

修复跨源策略的更好方法是使用[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。[这](http://blogs.msdn.com/b/carlosfigueira/archive/2012/07/02/cors-support-in-asp-net-web-api-rc-version.aspx)是一篇很棒的文章，解释了如何在 Web API 中启用 CORS 支持

# asp.net - MVC3 中的 .NET 成员资格、角色和授权

> ID：15325299
> 
> 赞同：0
> 
> 时间：2013-03-10T17:34:30.553
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-membership, authorization

好的，所以我将我的 MVC3 设置为使用来自 .NET 的默认注册、登录和成员资格。只需将服务向导运行到数据库上。

现在，我将`[Authorize(Roles = "User")]`要在控制器中限制的每个动作的部分放入。

我遇到的问题是，尽管已登录，但每当我尝试访问这些“受限操作”时，我仍然会收到登录提示，我会收到登录屏幕提示。

.NET 成员资格中的默认角色或成员是什么？或者我可以更改授权过滤器/规则以适应所有登录的成员吗？

谢谢！任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:34:09.167

您只需要`[Authorize]`强制用户进行身份验证即可。

稍后，一旦你有很多控制器，并且想要区分允许哪些用户组查看哪些控制器或操作，你可以添加添加角色并关闭控制器到不同的角色：

例子

```
[Authorize(Roles = "Admin")]
public ActionResult AdminReports() 
```

# google-apps-script - 谷歌应用脚 本平台上的类型检查

> ID：15325301
> 
> 赞同：4
> 
> 时间：2013-03-10T17:34:34.460
> 
> 标签：google-apps-script

有没有办法检查谷歌应用脚​​本中的内置类型？我不知道如何访问内置类型的构造函数。所以我不能使用 instaceof 运算符。

例如配置文件（[https://developers.google.com/apps-script/class_analytics_v3_schema_profile](https://developers.google.com/apps-script/class_analytics_v3_schema_profile)）

```
function getReportDataForProfile(profile) {
if (profile instanceof Profile) // Profile is undefined...
...
} 
```

还有什么有点令人困惑：当我得到一个 Profile 实例时（在变量配置文件中）

```
profile.constructor // is undefined 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-26T02:35:30.793

观察输出后`Logger.log()`，很明显对于大多数内置 Google Apps 对象，`toString()`方法的输出是类名：

```
var sheet = SpreadsheetApp.getActiveSheet()
if (typeof sheet == 'object')
{
    Logger.log(  String(sheet)     ) // 'Sheet'
    Logger.log(  ''+sheet          ) // 'Sheet'
    Logger.log(  sheet.toString()  ) // 'Sheet'
    Logger.log(  sheet             ) // 'Sheet' (the Logger object automatically calls toString() for objects)
} 
```

所以上面的任何一个都可以用来测试对象的*类型*（除了最后一个显然只适用于 的例子`Logger`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:03:08.320

似乎这不一定是一个干净的解决方案，但它仍然可以正常工作。

如果是 Profile 对象，则`profile.getKind()`返回`analytics#profile`. 但是，如果`.getKind()`没有为该对象定义方法，则会引发错误。所以看起来你必须做 2 次检查。

```
if (typeof profile.getKind != "function") {
  if (profile.getKind() == "analytics#profile") {
    //profile is a Profile!
  } else {
    //profile is some other kind of object
    //use getKind() to find out what it is!
  }
} else {
  //profile doesn't have a getKind method
  //need a different way of determining what it is
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-29T12:25:55.603

在某些情况下，“in”可用于通过其属性验证对象：

```
function CheckType( fileOrFolder ) {
  if ( "getName" in fileOrFolder )
    if ( "getFiles" in fileOrFolder ) return "folder" ;
    else if ( "getBlob" in fileOrFolder)  return "file" ;
  return "neither file nor folder" ;
}

function ShowType( Obj ) {
  let Type = CheckType( Obj ) ;
  console.log( "%s is a %s", "getName" in Obj ? Obj.getName() : Obj.toString(), Type ) ;
}

ShowType( DriveApp.getFiles().next() )   ;
ShowType( DriveApp.getFolders().next() ) ;
ShowType( DriveApp ) ; 
```

# jquery - 定位的 div 元素

> ID：15325302
> 
> 赞同：1
> 
> 时间：2013-03-10T17:34:36.130
> 
> 标签：jquery, css, html

我在几个网站上看到了以下内容，我想知道它是如何完成的..

[http://www.peterurban.info/](http://www.peterurban.info/)

基本上，它是许多不同的高度 div，它们都位于一个容器内，该容器似乎具有内联高度样式，以便为定位的 div 创建空间。我不认为它是javascript（在检查器中查看）。也许这是某种php技巧？样式必须从 DOM 注入吗？

如果有人可以分享这方面的任何信息，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:37:40.023

已经用这个 jquery 插件做到了：http: [//masonry.desandro.com/](http://masonry.desandro.com/)

# vb.net - 生成随机布尔值

> ID：15325305
> 
> 赞同：5
> 
> 时间：2013-03-10T17:34:41.153
> 
> 标签：vb.net, random

我有点坚持一个简单的问题：如何生成一个简单的随机布尔值？
如果是正确的， a `Boolean 0 = false and 1 = true`，但如何使用它？

当前代码：

```
Dim RandGen As New Random
Dim RandBool As Boolean
RandBool = Boolean.Parse(RandGen.Next(0, 1).tostring) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-10T18:00:34.227

或者只是简单地：

```
Random rng = new Random();
bool randomBool = rng.Next(0, 2) > 0; 
```

节省一些解析文本的处理能力，而简单的比较就足够了。

编辑：第二个参数是独占的，所以应该是`.Next(0, 2)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T17:24:02.647

将 RandGen 调暗为新随机

```
 Dim RandBool As Boolean

    RandBool = RandGen.Next(0, 2).ToString

    TextBox1.Text = RandBool 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T17:55:48.160

也许是这样的？

```
 string[] trueOrFalse = { "false", "true"};
        bool RandBool = bool.Parse(trueOrFalse[RandGen.Next(0,2)]); 
```

# android - 更改布局后 admob 消失

> ID：15325308
> 
> 赞同：1
> 
> 时间：2013-03-10T17:35:06.090
> 
> 标签：android, admob

我在我的 android 应用程序中使用多个布局。当我通过 setContentView 更改布局时，admob 横幅消失了。在更改布局时我需要做些什么。

```
public void setContentView (int layoutResID) 
    {
        super.setContentView(layoutResID);
        // Create the adView
        try {
            // Lookup your LinearLayout assuming it's been given
            // the attribute android:id="@+id/mainLayout"

        RelativeLayout layout = (RelativeLayout)
                findViewById(getRespectiveLayoutID(layoutResID));
        //adView.setGravity(Gravity.BOTTOM);
        // Add the adView to it
        layout.addView(adView);

        // Initiate a generic request to load it with an ad

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

`我真的很感激任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T06:40:51.603

更改布局时，您需要将广告添加到新布局中。adview 是一个视图，就像 textview 一样，所以上面的代码正在做的是将 adview 添加到布局中。当您致电时，`setContentView(R.layout.example)`您会更改视图，因此您看不到 adview，因为它没有显示。要解决此问题，您必须将您编写的代码放在您调用的每个 setContentView 之后。

# android - Android：如何连续显示 2 个通知

> ID：15325316
> 
> 赞同：0
> 
> 时间：2013-03-10T17:35:56.313
> 
> 标签：android, android-notifications

使用不同的参数调用了下面的方法两次，`name`但我的设备上只出现了 1 个通知（最后一个）。`PendingIntent.getActivity()`我认为在其中放置一个唯一的请求模式参数`name.hashCode()`会起作用，但这并没有解决问题。那么如何更改此方法以使我的设备连续显示 2 个通知而不是仅显示最后一个？

```
private void showNotification(String name, String sub) {
        Intent intent = new Intent(activity.getApplicationContext(),
                FragmentTabsPager.class);
        PendingIntent pIntent = PendingIntent.getActivity(
                activity.getApplicationContext(), name.hashCode(), intent, 0);
        NotificationCompat.Builder builder = new NotificationCompat.Builder(
                activity.getApplicationContext());  
        builder.setContentTitle("Hello world"
                ).setContentText(name+" from "+sub)
                .setSmallIcon(R.drawable.icon).setContentIntent(pIntent)
                .getNotification();
        NotificationManager notificationManager = (NotificationManager) activity
                .getApplicationContext().getSystemService(
                        Context.NOTIFICATION_SERVICE);
        Notification notification = builder.getNotification();      
        notification.flags |= Notification.FLAG_AUTO_CANCEL;        
        notification.defaults |= Notification.DEFAULT_SOUND;
        notification.defaults |= Notification.DEFAULT_VIBRATE;      
        notificationManager.notify(0, notification);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:38:18.070

第一个参数`notify()`是通知的 ID。`Notification`如果您希望屏幕上出现不同的 s，则需要有所不同。如果您`notify()`使用相同的 ID 调用两次，`Notification`则会替换，而不是添加。

# node.js - 我应该如何创建需要 mongodb 连接的自定义模块？

> ID：15325321
> 
> 赞同：3
> 
> 时间：2013-03-10T17:36:52.257
> 
> 标签：node.js, mongodb

我正在使用 nodejs、express 和 mongodb 开发一个 Web 应用程序。

在我列出 API 调用的“主”文件中，我包含了一个用户类，该类具有诸如 Users.authenticate(userObject, callback) 和 Users.getById(userId, callback) 之类的方法。

**很抱歉这个长代码片段。这只是我的用户类的一个片段。**

```
function Users (db) {
  if (!db) {
    return {'message': 'creating an instance of Users requires a database'}
  } else {
    this.db = db;
    return this;
  }
}

Users.prototype.authenticate = function (user, callback) {
  if (!user.username) {
    return {'message': 'Users.authenticate(user, callback) requires user.username'};
  } else if (!user.password) {
    return {'message': 'Users.authenticate(user, callback) requires user.password'};
  } else if (!callback) {
    return {'message': 'Users.authenticate(user, callback) requires callback(err, user)'};
  }

  this.db.collection('users', function (err, collection)  {
    if (err) {return {'message': 'could not open users collection'}};

    /* query for the user argument */
    collection.findOne(user, function (err, doc) {
      if (!err) {
        if (!doc) {
          callback({'message': 'user does not exist'}, null);
        } else {
          callback(null, doc);
        }
      } else {
        callback({'message': 'error finding user'}, null);
      }

    });
  });
};
exports.Users = Users; 
```

**而已**

我将一个开放的数据库连接传递给我的用户类，并进行如下调用：

```
var server = new mongo.Server('localhost', '27017', {auto_reconnect: true});
var db = new mongo.Db('supportdash', server, {"fsync": true});

// open connection to be, init users
db.open(function (err, db) {
  var users = new Users(db);
  users.authenticate({"username": "admin", "password": "password"}, function (err, user) {
    // do something with the error, or user object
  });
}); 
```

**现在我的问题**

1.  我应该传递一个开放的数据库连接，还是应该传递用户类管理自己的连接所需的信息（本地主机、端口、数据库名称）？

2.  我尝试使用 jasmine-node 设置测试，但最终遇到了很多异步数据库调用问题。我想添加一个用户，然后测试 Users.authenticate 是否正常工作。我使用了 Jasmines runs() 和 waitsfor() 异步助手，但我无法让它工作。然后我遇到了一个问题，我需要一段时间来调试（使用不同的类），而测试会为我节省很多时间。关于如何测试与 mongodb 数据库交互的类的任何建议？

# css - 多个自定义滚动条

> ID：15325322
> 
> 赞同：2
> 
> 时间：2013-03-10T17:36:54.177
> 
> 标签：css, scrollbar

我只想知道是否可以在同一页面上有多个定制的-webkit-scrollbars。我制作了一些特定于颜色的 div，比如一个 div 有绿色文本和图像，另一个有蓝色等。所以我想为每个 div 制作一个自定义滚动条，使其与颜色匹配。

Q1：有可能吗？

Q2：如果是这样，我会怎么做？

我已经考虑过一种解决方案，但我认为它有点麻烦。一种解决方案可能是让每个 div 包含一个 iframe，然后使用唯一的滚动条创建单独的页面，但我不知道这是否会起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T18:03:10.893

当然你可以 - 只需在滚动条伪类前面加上你想要的选择器，即：

```
::-webkit-scrollbar-track {
    background-color: #333;
}

/* Override styles for <div>s, for example */
div::-webkit-scrollbar-track {
    background-color: #b13131;
} 
```

我在这里为你做了一个简单的例子 - [http://jsfiddle.net/teddyrised/Nsz93/](http://jsfiddle.net/teddyrised/Nsz93/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T06:04:48.273

您还可以通过元素的 id 应用这些规则。假设 div 的滚动条必须设置样式，其 id 为“myDivId”。然后您可以执行以下操作。这样，您可以为不同元素的滚动条使用不同的样式。

```
#myDivId::-webkit-scrollbar {
    width: 12px;
}

#myDivId::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    border-radius: 10px;
}

#myDivId::-webkit-scrollbar-thumb {
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
} 
```

[http://jsfiddle.net/QcqBM/516/](http://jsfiddle.net/QcqBM/516/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T17:52:36.440

可以使用 jquery 插件或简单地设置带有 css 的滚动条样式。这可以在 webkit 和 ie 中完成。

```
::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
} 
```

[http://jsfiddle.net/jeffpowrs/nEkPw/](http://jsfiddle.net/jeffpowrs/nEkPw/)

[http://css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/)

# c++ - Having trouble with an undeclared identified, even though i included my .h file(C++)

> ID：15325332
> 
> 赞同：1
> 
> 时间：2013-03-10T17:37:38.467
> 
> 标签：c++

I'm trying to implement a stack using a linked list, my Node struct is the private data of my ListStack class. When i try and use Node in my main.cpp it says that Node is an undeclared identifier. By the way i'm using this stack and everything to implement a RPN calculator and i have 3 files calculator.h, calculator.cpp, and main.cpp(if that is relevant)

Here is the struct:

```
struct Node
{
    double data;
    Node* under;
};

Node* top; 
```

I have included the .h file(calculator.h) with `#include "calculator.h"`

The first statement it doesn't recognize is `Node* current= top;` it also does not recognize top. Any reason for this? I'm kind of new to this site so sorry if I haven't included enough information.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:40:10.863

If your structure is a private variable of a class you can't call it like that, you need something like

```
MyClass::Node mynode; 
```

# xquery - XML XQuery 基本查询结果

> ID：15325336
> 
> 赞同：0
> 
> 时间：2013-03-10T17:37:44.313
> 
> 标签：xquery, altova, flwor

我在这里提出一个希望可以回答的问题，这真的很愚蠢和基本。

我有一个作者文件，格式如下：

```
<authorRoot>
<author>
<info tags on author>
</author>
etc
</authorRoot> 
```

我想做的就是通过FLWOR返回一个列表，其中每个“作者”及其信息都是不同的值，所以当我运行查询时，结果应该看起来像

```
1\. <author><info>.....</info></author>
2\. <author><info>.....</info></author>
etc 
```

我确定像这样简单的东西应该就是下面的代码

```
xquery version "1.0";
for $x in //author
return $x 
```

但是当我这样做时，查询结果显示为

```
1.<author><info>...</info></author><author><info>...</info></author><author><info>...</info></author><author><info>...</info></author><author><info>...</info></author>....etc 
```

我对 XQuery 比较陌生，我正在使用 AltovaSpy。我已经完成了与此类似的基本问题（我有一个布局相似的文件，并且我使用基本相同的代码，从而产生了一个包含多个值的 xquery 结果页面，而不仅仅是一个长值），但对于这个文件，它只是没有好像不行！我的代码是不是我没有看到的东西？或者它可能是文件，也许？

感谢您对这种情况的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:49:29.473

嗯，你的推理是正确的。.

这只是一个格式问题，似乎 Altova 将整个序列打印在一行中，没有换行符。

您也可以在[我的 XQuery 在线测试器](http://videlibri.sourceforge.net/cgi-bin/xidelcgi?&data=%3CauthorRoot%3E%0A%3Cauthor%3E%0A%3Cinfo%3Eb%3C%2Finfo%3E%0A%3C%2Fauthor%3E%0A%0A%3Cauthor%3E%0A%3Cinfo%3Ea%3C%2Finfo%3E%0A%3C%2Fauthor%3E%0Aetc%0A%3C%2FauthorRoot%3E%20%2F%2F%20&extract=xquery%20version%20%221.0%22%3B%0Afor%20%24x%20in%20%2F%2Fauthor%0Areturn%20%24x%0A&printed-node-format=xml&output-format=adhoc&extract-kind=xquery&print-type-annotations=true)中进行尝试，在那里您可以看到序列与您预期的一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:33:20.073

如果您观看[Altova XMLSpy 的演示视频](http://www.youtube.com/watch?v=piVbWtChd6I)并前进到 2:35，您将看到单击工具栏按钮之一（似乎标记为“Pretty-print”）将如何将 XQuery 的结果格式化为缩进良好的 XML。

# ruby-on-rails-3 - 安装 pg (0.12.2) 时出错，Bundler 无法继续

> ID：15325344
> 
> 赞同：3
> 
> 时间：2013-03-10T17:38:37.627
> 
> 标签：ruby-on-rails-3, rubygems, bundler, railstutorial.org

我正在关注[Michael Hartl Ruby on Rails 教程](http://ruby.railstutorial.org/chapters/static-pages#top)，并且有一部分是他，他指示您更新 Gemfile 以包括：

```
group :production do
  gem 'pg', '0.12.2'
end 
```

然后在终端中输入以下命令：

```
bundle update
bundle install --without production 
```

当您运行 bundle update 命令时，它会返回以下错误。

```
sample_app:$ bundle update
Fetching gem metadata from https://rubygems.org/.........
Fetching gem metadata from https://rubygems.org/..
Resolving dependencies...
Using rake (10.0.3) 
Using i18n (0.6.4) 
etc
[omitted lines for brevity]
etc
Using railties (3.2.12) 
Using coffee-rails (3.2.2) 
Installing diff-lcs (1.1.3) 
Using jquery-rails (2.0.2) 
Installing pg (0.12.2) 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /home/ross/.rvm/rubies/ruby-1.9.3-p392/bin/ruby extconf.rb 
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    etc
    [omitted lines for brevity]
    etc       

Gem files will remain installed in /home/ross/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.12.2 for inspection.
Results logged to /home/ross/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.12.2/ext/gem_make.out

An error occurred while installing pg (0.12.2), and Bundler cannot
continue.
Make sure that `gem install pg -v '0.12.2'` succeeds before bundling.
sample_app:$ 
```

**通过从Gemfile**`'pg', '0.12.2'`中删除gem并在运行命令后替换它，我能够轻松克服此错误。这似乎工作正常，因为在后者的标志中也省略了 gem 。**`bundle update``'pg', '0.12.2'``without production``bundle install --without production`**

 **仅当`'pg', '0.12.2'`使用正确的数据库部署到 heroku 时才需要 gem，即使我将它部署到 heroku 也一切正常，但我只是想知道这是教程中的错误还是我在这里遗漏了更大的东西？

每次运行都要移除这个**Gem**`bundle update`也很烦人，`bundle update`真的有必要吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T12:08:57.280

我正在遵循相同的教程，我认为在`update`不修改**现有**依赖项的情况下运行是多余的，但在这种情况下，它甚至会导致问题，因为`update`命令没有`--without`参数。

我偶然发现了[Rails 3 备忘单](http://envylabs.com/uploads/Rails_3_Cheat_Sheets.pdf)，它以这种方式提到了捆绑器工作流程：

> ### 从 Gemfile 添加或删除依赖项后
> 
> 1.  `$ bundle`
> 2.  提交 Gemfile 和 Gemfile.lock
> 
> ### 修改现有依赖版本后
> 
> 1.  `$ bundle update`
> 2.  提交 Gemfile 和 Gemfile.lock

![rails3 备忘单：捆绑器工作流程](../Images/0cdf83d086a67c532c105a4bb79c77a1.png)

* * *

我阅读了[手册页](http://gembundler.com/v1.3/man/bundle-update.1.html)`bundle update`并尝试了**[RECOMMENDED WORKFLOW](http://gembundler.com/v1.3/man/bundle-update.1.html#RECOMMENDED-WORKFLOW)**，其中包括`bundle update`在`bundle install`.

就我而言（省略了一些输出）：

```
$ bundle install --without production
Resolving dependencies...
Using rake (10.0.3)
...
Installing rspec-core (2.11.1)
Your bundle is complete!
Gems in the group production were not installed.             <-- check  

$ bundle update
Resolving dependencies...
Using rake (10.0.3) 
...
Using uglifier (1.2.3) 
Your bundle is updated!
Gems in the group production were not installed.             <-- check 
```

我用新的 RVM gem set 试了一下，一切都安装正确了。

之后`Gemfile.lock`包含`pg (0.12.2)`并部署到 Heroku 工作。

> ### 推荐的工作流程
> 
> > 通常，在使用使用 bundler 管理的应用程序时，您应该使用以下工作流程：
> > 
> > 第一次创建 Gemfile 后，运行
> > 
> > `$ bundle install`
> > 
> > 将生成的 Gemfile.lock 检查到版本控制中
> > 
> > `$ git add Gemfile.lock`
> > 
> > 在另一台开发机器上签出此存储库时，运行
> > 
> > `$ bundle install`
> > 
> > 在部署机器上签出此存储库时，运行
> > 
> > `$ bundle install --deployment`
> > 
> > 更改 Gemfile 以反映新的或更新的依赖项后，运行
> > 
> > `$ bundle install`
> > 
> > 确保将更新的 Gemfile.lock 签入版本控制
> > 
> > `$ git add Gemfile.lock`
> > 
> > 如果 bundle install 报告冲突，请手动更新您在 Gemfile 中更改的特定 gem
> > 
> > `$ bundle update rails thin`
> > 
> > 如果您想将所有 gem 更新到仍然与 Gemfile 中列出的 gem 匹配的最新版本，请运行
> > 
> > `$ bundle update`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T22:06:09.013

postgres 安装失败并出现此错误：“找不到'libpq-fe.h 标头”

看起来很多人都面临这个问题，好消息是：stackoverflow 有答案；）

[尝试安装 pg gem 时找不到'libpq-fe.h 标头](https://stackoverflow.com/questions/6040583/unable-to-install-pg-gem-on-ubuntu-cant-find-the-libpq-fe-h-header)

（或者至少它应该帮助你寻找正确的方向）**

# python - 如何判断 wx.Panel 的孩子是否放置在另一个孩子（wxpython）之上或之下？

> ID：15325350
> 
> 赞同：0
> 
> 时间：2013-03-10T17:39:27.213
> 
> 标签：python, graphics, wxpython, wxwidgets, overlap

我有一个 wx.Panel，里面有多个孩子。

当放置另一个孩子时，我如何判断它是否没有踩到已经放置的孩子？

（我的意思是我可以想到我遍历孩子列表的解决方案，获取他们所有的位置和大小并进行数学运算......但我想知道是否还没有更简单的解决方案）

[编辑]：我需要在父面板上有多个带有轮廓的面板，以及连接子面板的线条。这个想法是能够判断一条线是否没有穿过另一个面板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T18:59:01.303

我的建议是通过使用 sizers 放置孩子来避免这个问题。轻松多了。

我从您的编辑中看到，您并不关心重叠的小部件，正如您的问题的标题所示，而是一条线是否与小部件重叠。

我对这个不同的问题的建议是研究使用 GraphViz ( [http://www.graphviz.org/](http://www.graphviz.org/) )，它将计算有效的布局，最大限度地减少重叠并经常完全消除它们。有关可以实现的相同示例，请查看[http://ravenspoint.com/maps.html](http://ravenspoint.com/maps.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:59:45.493

作为窗口的组件（wx.Panel、wx.StaticLine 等）有一个`.getRect`返回 wx.Rect 的方法。

[wx.Rect](http://wxpython.org/docs/api/wx.Rect-class.html)有一个方法，`.Intersects(self, otherRect)`如果 2 个元素重叠则返回 true。

还有一个[wx.Rect2D](http://wxpython.org/docs/api/wx.Rect2D-class.html)具有一些附加功能 - 插值、获取交集和并集等。

# algorithm - 最大流量，在 s = t 的情况下

> ID：15325351
> 
> 赞同：1
> 
> 时间：2013-03-10T17:39:29.950
> 
> 标签：algorithm, max-flow

我正在阅读维基百科上[的最大流量问题](http://en.wikipedia.org/wiki/Maximum_flow_problem)。我很好奇问题描述是否允许 s 等于 t （源等于接收器）。我知道如果 s =t ，答案必须是 0。但是，假设我正在编写代码来解决这个问题。我的代码应该处理这种特殊情况还是问题描述禁止这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:33:08.053

如果 s = t，您可以将无限量的流量从 s 推送到 t，因为我们不需要使用任何那些限制我们可以推送的流量的讨厌的容量受限的弧线东西。

您的代码是否需要处理这种情况在很大程度上取决于调用者调用您的代码的原因以及他们对这种退化情况的期望。我会说你应该返回浮点无穷大并将其留给调用者来整理细节。

# java - Java NoClassFoundDefError 和 ClassNotFoundException 问题

> ID：15325354
> 
> 赞同：2
> 
> 时间：2013-03-10T17:39:53.927
> 
> 标签：java

我只花了两个小时阅读互联网上到处讨论这个问题的帖子，但我没有一个能提供我正在寻找的解决方案的帖子。

我在 Eclipse 中创建了一个 Java 应用程序。我将它导出为 Jar 文件、可运行的 Jar 文件（我尝试了所有三个选项：提取所需的库、打包所需的库......）并且 Jar 文件在我开发应用程序的 Windows 7 上都运行良好。

我尝试在另一台装有 Windows Vista 的计算机上使用它。如果我双击 jar 文件，我会收到一条错误消息，提示“找不到主类：Golf_Calculator。程序将退出。”。我尝试使用命令运行它，我得到了这个：

```
C:\Users\Geoffroy\Desktop\Golf Calculator>java Golf_Calculator.jar
Exception in thread "main" java.lang.NoClassDefFoundError: Golf_Calculator/jar
Caused by: java.lang.ClassNotFoundException: Golf_Calculator.jar
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: Golf_Calculator.jar.  Program will exit. 
```

我真的不知道该怎么办.. 我的 META-INF 文件夹在 Jar 文件中，并且包含具有正确主类名称的 MANIFEST.MF 文件。我读到这可能是因为我在代码中导入的类不在主目录中，但是当使用 Eclipse 生成可运行 Jar 文件时，使用“提取所需库”选项，我认为它会修复问题。不，它没有..这是我在代码中所做的所有导入，可能会给你一个提示：

```
import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.PrintWriter;
import java.math.BigDecimal;
import java.util.Vector;

import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.ListModel;
import javax.swing.Box.Filler;
import javax.swing.event.TableModelListener;
import javax.swing.plaf.ComboBoxUI;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel; 
```

我希望那里的人能够帮助我:)

非常感谢！

编辑：我试过这个：java -jar Golf_Calculator.jar 并得到了这个：

```
C:\Users\Geoffroy\Desktop\Golf Calculator>java -jar Golf_Calculator.jar
Exception in thread "main" java.lang.UnsupportedClassVersionError: Golf_Calculat
or : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: Golf_Calculator. Program will exit. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:44:46.720

您没有运行 java 文件，它是一个 jar 文件。使用以下命令运行它。

```
java -jar Golf_Calculator.jar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:42:10.503

你需要运行它`java -jar Golf_Calculator.jar`

# c - 数组 if 语句的元素

> ID：15325355
> 
> 赞同：-2
> 
> 时间：2013-03-10T17:39:55.777
> 
> 标签：c, arrays, if-statement

```
#include <stdio.h>

main()
{
    int i,l,t=1,m,a[15]={0};
    for(i=0;i<15;i++)
    {  
        scanf("%d",&a[i]);
    }

    for(i=0;i<15;i++)
    {
        if(a[i]>=3 && a[i]<=8)
        {
            for(l=i+1;l<15;l++)
            {
                if(a[i]>a[l])
                {
                    m=a[i];
                    a[i]=a[l];
                    a[l]=m;
                }
            }
            printf(" No%d \t %d \n",t++,a[i]);
        }
    }
    system("pause");
} 
```

在 ci 中的这段代码中，想要按升序打印数组的元素，但元素的值必须在 3 和 8 之间。我得到的结果不包括 8 以上的值，但它们包括 3 以下的值。为什么这会发生吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:49:03.133

我建议你单独进行排序，然后只打印 3 到 8 之间的元素，然后你会按照你想要的顺序得到它。

```
// sort the array
for(i=0;i<15;i++)
{
    for(l=i+1;l<15;l++)
    {
        if(a[i]>a[l])
        {
            m=a[i];
            a[i]=a[l];
            a[l]=m;
        }
    }
}

for (i = 0; i < 15; i++)
{
    if (a[i] < 3)
        continue;

    if (a[i] > 8)
        break;

    printf(" No%d \t %d \n",t++,a[i]);
} 
```

编辑：修改打印循环

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:43:51.393

看起来您正在其中运行某种排序算法，但您跳过了 3 到 8 之间的所有元素。

您看到打印 3 以下数字的原因是因为您`printf`在进行交换的循环之后：当内部循环完成时，一个小于`a[i]`可能插入到`i`第 -th 位置的数字。如果您`printf`在循环之前移动，则打印的数字将全部来自该`[3..8]`范围，包括两端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T17:49:04.083

您的外部循环将 3 和 8 从您的排序中排除：

```
for(i=0;i<15;i++)
{
    if(a[i]>=3 && a[i]<=8) /* <--- exclusion here */
    {
        /* code nested in outer loop and exclusion */
    }
} 
```

但是，您的内部循环没有这样的排除：

```
for(l=i+1;l<15;l++)
{
    if(a[i]>a[l]) /* <--- no exclusion! */
    {
        m=a[i];
        a[i]=a[l];
        a[l]=m;
    }
} 
```

我建议修改您的内部循环以从搜索中排除低于 3 的值：

```
for(l=i+1;l<15;l++)
{
    if(a[l]>=3 && a[i]>a[l])
    {
        m=a[i];
        a[i]=a[l];
        a[l]=m;
    }
} 
```

# javascript - window.location.href 在我需要 POST 时使用 GET

> ID：15325358
> 
> 赞同：0
> 
> 时间：2013-03-10T17:40:32.583
> 
> 标签：javascript, ajax

我有以下脚本，从底部向上几行我有一个`window.location.href`通过地址栏发布我的表单的结果。这很混乱，我想使用 POST 而不是 GET，有人有什么想法吗？

```
<script language="javascript">
function OnChangedUsername()
{
  if(document.signup.newuserid.value == "")
  {
    document.signup.btnCheckAvailability.disabled = true;
  }
  else
  {
    document.signup.btnCheckAvailability.disabled = false;
  }
}
function createRequestObject() {
  var ro;
  var browser = navigator.appName;
  if(browser == "Microsoft Internet Explorer"){
    ro = new ActiveXObject("Microsoft.XMLHTTP");
  }else{
    ro = new XMLHttpRequest();
  }
  return ro;
}

var http = createRequestObject();

function sndReq() {
  http.open('get', 'password_check.asp?emailaddress=<%Response.Write(emailaddress)%>&check=<%Response.Write(check)%>&password_check='+document.signup.newuserid.value);
  http.onreadystatechange = handleResponse;
  http.send(null);
}

function handleResponse() {
  if(http.readyState == 4){
    var response = http.responseText;
    var update = new Array();

    if(response.indexOf('|' != -1)) {
      update = response.split('|');
      document.getElementById("username_chk").innerHTML = update[0];

      if(document.getElementById("username_chk").innerHTML == "Ok") {
        window.location.href='detailsupdate.asp?username=<%Response.Write(sUsername)%>&check=<%Response.Write(check)%>&EmailAddress='+document.signup.EmailAddress.value+'&Address='+document.signup.Address.value+'&Address1='+document.signup.Address1.value+'&Address2='+document.signup.Address2.value+'&City='+document.signup.City.value+'&PostalCode='+document.signup.PostalCode.value+'&Country='+document.signup.Country.value+'&WorkPhone='+document.signup.WorkPhone.value+'&HomePhone='+document.signup.HomePhone.value+'&MobilePhone='+document.signup.MobilePhone.value+'&FaxNumber='+document.signup.FaxNumber.value+'&AlternativePhone='+document.signup.AlternativePhone.value+'&OO='+document.signup.OO.checked+'&Workshop='+document.signup.Workshop.checked+'&Raised='+document.signup.Raised.checked+'&Ground='+document.signup.Ground.checked+'&pd='+document.signup.newuserid.value+'&Tram='+document.signup.Tram.checked;
      }
    }
  }
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:42:39.360

发出 POST 请求并将响应直接呈现到浏览器窗口的唯一方法是使用表单（您使用 DOM 生成）并提交它（您也可以通过 DOM 完成）。

另一种方法是使用 XMLHttpRequest（或其他一些 Ajax 技术）并使用 DOM 呈现响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:43:22.687

无需将表单数据作为 GET 数据传递。您可以将方法指定为 POST。

```
<form action="script.asp" method="post">
   ...
   <input type="submit" value="submit">
</form> 
```

您也不应该使用`window.location.href`. 这是非常丑陋的。当您提交表单时（单击提交按钮），它会将您的表单数据发布到 script.asp。

另一种提交表单的方法是通过 DOM 提交。`document.forms[0].submit();`

# java - 返回对象的类型（命名空间）与预期不同 - Web 服务客户端中自动生成的类包含类的副本

> ID：15325367
> 
> 赞同：1
> 
> 时间：2013-03-10T17:41:48.560
> 
> 标签：java, web-services, netbeans, jaxb, wsdl

我在 NetBeans 7.2 中工作。我使用 JAXB 绑定从 xml 创建了笔记本电脑类，然后我从这个项目制作了 jar 并将其添加到 Web 服务库 - 我想使用笔记本电脑类中的函数作为 Web 服务中的函数。在 Web 服务客户端中，一些类是从 ws 中的函数自动生成的，例如 getall()，它返回笔记本电脑列表。

```
@WebMethod
public List<Laptop> getAll() {

    return l.getAll();
} 
```

除了 Web 服务客户端中的 GetAll.java 类之外，还生成了 GetAllResponse.java 类，其中包含内部的 Return 类 - Return 与笔记本电脑类相同 - 只是名称不同。因此，Web 服务客户端中的每个类，由返回膝上型计算机或膝上型计算机列表的函数生成，并且在名称中具有单词“Response”，都包含类 Return（使用 @WebResult(name="Laptop"），名称可以更改从返回到笔记本电脑）

```
@WebMethod
@WebResult(name="Laptop")
public Laptop getById(int id) {
    return l.getById(id);
} 
```

在多个地方实现笔记本电脑后，我对返回给客户端的对象的命名空间有疑问。如下图所示，预期的对象是：DAO.client.Laptop 但发送的是 DAO.client.GetByIdResponse.Laptop。我应该改变什么以在客户端中只有一个笔记本电脑的实现或避免返回对象类型的歧义？

Pict1：命名空间问题 [http://imageshack.us/photo/my-images/208/47894110.jpg/](http://imageshack.us/photo/my-images/208/47894110.jpg/)

Pict2:Laptop.java 在几个地方 [http://imageshack.us/photo/my-images/534/24881074.png/](http://imageshack.us/photo/my-images/534/24881074.png/)

# css - CSS中文档树的操作？

> ID：15325368
> 
> 赞同：3
> 
> 时间：2013-03-10T17:41:51.470
> 
> 标签：css

我很确定这不存在，但我想知道是否有人做过这种事情作为 CSS 的附加组件。

假设我们有一个包含联邦法规 (CFR) 的 XML 文档，并且还说文档本身无法编辑（我们所能做的就是使用样式表来显示它），并且假设有一个子部分其中包含多个规则，XML文档大致如下：

```
<subpart>
<ruleNo>63.400</ruleNo>
<ruleTitle>Definitions</ruleTitle>
<ruleNo>63.410</ruleNo>
<ruleTitle>Applicability</ruleTitle>
...
</subpart> 
```

现在我想编写一个样式表，将子部分内容放入一个表格中，左列有规则编号，右列有规则标题。`ruleNo`如果有一种方法可以选择相邻的并且`ruleTitle`好像它们对应于单个节点，然后为该假想节点编写规则，则任务会容易得多。

例如，可能有一个*节点定义*函子`=>`，它将临时将大括号中的部分定义为节点。例如，`Rule => subpart > {ruleNo + ruleTitle}`将创建一个临时节点，该节点将是任何一对兄弟姐妹的父节点，这些兄弟姐妹`ruleNo + ruleTitle`是`subpart`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T17:53:09.803

CSS 不支持操作文档树，也不提供以您描述的方式对元素节点进行分组的能力。此外，[CSS2.1 表格模型](http://www.w3.org/TR/CSS21/tables.html)没有提供一种应用样式的方法，使得每一`ruleNo + ruleTitle`对都可以格式化为单独的行：而 CSS 有一个可以创建为祖先或后代的匿名框的概念，这也扩展到表模型，它不支持一次生成单个匿名框作为一对`ruleNo + ruleTitle`单元格的父行。

诸如 Sass 和 LESS 之类的预处理器语言是无关紧要的，因为它们无论如何都被编译成 CSS，所以如果它不适用于 CSS，那么它也不适用于预处理器。

鉴于您当前的 XML，不可能使用 CSS 将其格式化为每行包含一个`ruleNo`和一个`ruleTitle`元素的表格。您将希望使用 XSLT 将其转换为具有相应行的 XHTML 表。

# android - VLC在android中编译

> ID：15325371
> 
> 赞同：0
> 
> 时间：2013-03-10T17:42:02.157
> 
> 标签：android, eclipse, compilation, vlc

我在 *.apk 中编译 vlc。Eclipse 中的错误没有显示，但是当我在模拟器上运行时会记录异常。播放器不启动。

03-10 21:38:08.999: E / VLC / LibVLC (26114): Can't load vlcjni library: java.lang.UnsatisfiedLinkError: Couldn't load libvlcjni: findLibrary 返回零

在 Ubuntu 上编译。对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T06:07:57.513

从那个错误来看，您实际上并没有编译 .so 文件，因此没有 libvlcjni。因此，要么您刚刚编译了 VLC 播放器的 Java 端，要么您的 Java 代码或 jni/ 设置不正确。

# java - 无法从 Play 框架应用程序在 AppFog/CloudFoundry 上创建临时文件

> ID：15325373
> 
> 赞同：2
> 
> 时间：2013-03-10T17:42:06.260
> 
> 标签：java, playframework-2.0, cloud-foundry, multipartform-data, appfog

我在 appfog 上部署了我的 play framework 2.1 应用程序（同样的问题也存在于 cloudfoundry 上，因为它们本质上是相同的）。我的应用程序允许文件上传，但我在获取文件时遇到错误。当我使用 play run 在本地运行时，它工作正常。

我的代码如下：

```
MultipartFormData body = request().body().asMultipartFormData();
FilePart midi = body.getFile("midi");
File file = midi.getFile(); 
```

日志中的错误消息是：

```
play.api.Application$$anon$1: Execution exception[[IOException: No such file or directory]]
    at play.api.Application$class.handleError(Application.scala:289) ~[play.play_2.10-2.1.0.jar:2.1.0]
    at play.api.DefaultApplication.handleError(Application.scala:383) [play.play_2.10-2.1.0.jar:2.1.0]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anonfun$handleAction$1$4$$anonfun$apply$28.apply(PlayDefaultUpstreamHandler.scala:391) [play.play_2.10-2.1.0.jar:2.1.0]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anonfun$handleAction$1$4$$anonfun$apply$28.apply(PlayDefaultUpstreamHandler.scala:391) [play.play_2.10-2.1.0.jar:2.1.0]
    at scala.Option.map(Option.scala:145) [org.scala-lang.scala-library-2.10.0.jar:na]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anonfun$handleAction$1$4.apply(PlayDefaultUpstreamHandler.scala:391) [play.play_2.10-2.1.0.jar:2.1.0]
Caused by: java.io.IOException: No such file or directory
    at java.io.UnixFileSystem.createFileExclusively(Native Method) ~[na:1.7.0_11]
    at java.io.File.createTempFile(Unknown Source) ~[na:1.7.0_11]
    at java.io.File.createTempFile(Unknown Source) ~[na:1.7.0_11]
    at play.api.libs.Files$TemporaryFile$.apply(Files.scala:60) ~[play.play_2.10-2.1.0.jar:2.1.0]
    at play.api.mvc.BodyParsers$parse$Multipart$$anonfun$handleFilePartAsTemporaryFile$1.apply(ContentTypes.scala:624) ~[play.play_2.10-2.1.0.jar:2.1.0]
    at play.api.mvc.BodyParsers$parse$Multipart$$anonfun$handleFilePartAsTemporaryFile$1.apply(ContentTypes.scala:622) ~[play.play_2.10-2.1.0.jar:2.1.0] 
```

看起来从 multipartForm 创建临时文件时遇到问题。有没有解决这个问题的好方法？我的应用程序存储在 AWS 上，通过 appfog 进行配置。

# php - 使用 PHP 在外部链接上隐藏引用者

> ID：15325377
> 
> 赞同：1
> 
> 时间：2013-03-10T17:42:21.067
> 
> 标签：php, http-referer

我正在编写一个页面，其中包含指向另一台服务器上的某些音乐文件的链接，该服务器已阻止外部推荐人的访问。该网站还允许直接访问文件（通过在浏览器的地址栏中粘贴 url）。

经过数小时的搜索和尝试，我打算放弃，但发生了令人震惊的事情！当您通过 Gmail 发送链接时，通过单击它，Gmail 会将您重定向到另一个页面，然后文件开始下载。我的意思是 Gmail 在没有设置任何推荐人的情况下进行重定向。我怎样才能在我的代码中做到这一点？

**tl; dr：**当用户单击链接时，我想将用户重定向到外部 url，而不发送任何推荐人数据！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:54:05.713

不幸的是，这不一致地实施。

[如此处](https://stackoverflow.com/questions/4762254/javascript-window-location-does-not-set-referer-in-the-request-header)所述

*   `window.location.href`在以下浏览器下 更改时会设置 HTTP referrer 标头（HTTP-Referer） ：
    *   **MSIE 9（但可能是 9 以上的任何版本）**
    ***   Firefox（至少 3.0、3.5、4.0、5.0，但很可能是所有版本）*   Chrome（至少 9 个，但很可能是所有版本）*   Safari（至少 5 个，但很可能是所有版本）**
    *   **Opera（至少 11 个，但很可能是所有版本）**
*   **MSIE (至少 6, 7, 8)** :更改时**没有**设置referrer`window.location.href`

您可以考虑通过单击它，`<iframe>`但您仍然会在各种浏览器上看到不同的结果。

另一个建议是通过您的服务器代理请求，不要在执行请求时设置引荐来源网址。如果您的带宽有限，这可能是一个问题。

# jquery - 重新设计 Pinterest 小部件？

> ID：15325378
> 
> 赞同：2
> 
> 时间：2013-03-10T17:42:24.480
> 
> 标签：jquery, css, widget, pinterest

是否可以重新设计这个标准的 Pinterest 小部件？看看这里。假设我只想更改背景颜色：

[http://business.pinterest.com/widget-builder/#do_embed_user](http://business.pinterest.com/widget-builder/#do_embed_user)（点击“预览”实际查看）

我所做的任何事情都没有任何效果......修改我的样式表，或者即使我使用 jQuery 并将其定位为`.css('background-color','black')`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T00:47:06.597

下面是 Pinterest 小部件的情况：每次页面加载时，Pinterest 小部件脚本都会为自己分配一个新的 CSS 类名称。所以用 CSS 来定位它是很棘手的，因为你不能直接指向它。我可以通过遵循特定的 CSS 路径来访问它，如下所示：

```
div#pinterest_wrapper > span > span:first-child { background-color: black; } 
```

我将他们的代码包装在哪里...`div#pinterest_wrapper`只是`<div>`这样我可以更轻松地找到它。一旦我找到正确的路径，就可以根据需要快速设置样式。

（它有一个嵌套的`<span>`层次结构。如上所示，它`<span>`是您可能需要应用大多数样式的第一个内部结构。）

# facebook - Facebook/Python 是否喜欢粉丝页面？-n00b-

> ID：15325381
> 
> 赞同：-4
> 
> 时间：2013-03-10T17:42:52.800
> 
> 标签：facebook, tabs, facebook-page

嗨，我在 php 中使用此代码检查是否喜欢使用 signed_request 的粉丝页面：

```
 private function parsePageSignedRequest()  
    { 
        if (isset($_REQUEST['signed_request']))  
        { 
            $encoded_sig = null; 
            $payload = null; 
            list($encoded_sig, $payload) = explode('.', $_REQUEST['signed_request'], 2); 
            $sig = base64_decode(strtr($encoded_sig, '-_', '+/')); 
            $data = json_decode(base64_decode(strtr($payload, '-_', '+/'), true)); 
            return $data; 
        } 
        return false; 
    } 

    function isLiked() 
    { 
        $signed_request = $this->parsePageSignedRequest(); 

        if($signed_request->page->liked)  
        { 
            return true; 
        } else { 
            return false;                 
        } 
    } 
```

我如何为 python/django 编写这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:47:50.733

我认为您可以使用以下 SDK 之一

[Python](https://github.com/jmg/pyfb)

[django](https://github.com/jgorset/fandjango)

# c - 即使源文件被删除也能自行打印的程序

> ID：15325385
> 
> 赞同：1
> 
> 时间：2013-03-10T17:43:22.970
> 
> 标签：c

我遇到了一个 C 语言程序，即使源文件被删除，它也会自行打印。但我不知道它是如何工作的。以下是此代码

```
char *p="char *p=%c%s%c;main() {printf(p,34,p,34);}";
main() {printf(p,34,p,34);} 
```

任何人都可以通过解释每个步骤来帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T17:58:56.280

这个版本的 C ['quine'](http://en.wikipedia.org/wiki/Quine_%28computing%29)或自我复制程序不是严格有效的 C89，更不用说任何更新的东西了。但是，它适用于大多数系统。

理解它的关键是要知道字符 34 是双引号，`"`.

```
char *p="char *p=%c%s%c;main() {printf(p,34,p,34);}";
main() {printf(p,34,p,34);} 
```

使用字符串作为格式字符串的`printf()`打印，再次使用参数（或双引号）和 34（再次）。`p``34``p`

```
printf("char *p=%c%s%c;main() {printf(p,34,p,34);}", 34, p, 34); 
```

产生：

```
char *p="char *p=%c%s%c;main() {printf(p,34,p,34);}";main() {printf(p,34,p,34);} 
```

当它重新编译并运行时，它会自我复制。

此版本符合标准 C：

```
#include <stdio.h>
const char*s="#include <stdio.h>%cconst char*s=%c%s%c;%cint main(void){printf(s,10,34,s,34,10,10);}%c";
int main(void){printf(s,10,34,s,34,10,10);} 
```

它使用换行符`'\n'`^J 是字符代码 10 以及 34 是双引号这一事实`"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:56:51.543

如果把上面程序中的 printf() 换成下面的，你能理解吗？

```
printf("char *p=%c%s%c;main() {printf(p,34,p,34);}",
      34, "a string", 34); 
```

# performance - 最大化距离

> ID：15325386
> 
> 赞同：1
> 
> 时间：2013-03-10T17:43:25.100
> 
> 标签：performance, distance, maximize

你能给我一个关于这个问题的提示吗？我有一个按升序排序的 int 向量，两个元素之间的距离是 v[i+1] - v[i]。例如 v[]={0 , 5, 7 ,8, 10}，5 和 0 之间的距离是 5，7 和 5 是 2 等等。我想删除 NB 值（NB 是我要删除的值的数量）这个向量（我不能删除 0 或 10，所以 NB 可能是最大值 3），以便两个元素之间的距离最大。对于此示例，最小距离在 7 和 8 之间...如果我只想删除一个元素（NB=1），我将删除 8，而不是最小距离为 2（5 和 7 之间的距离）。

我做了一个这样的结构： (0,5, diff 5) (5,7 diff 2) (7,8 diff 1) (8,10 diff 2) 然后我按 diff 升序排序，只要 NB 是不是 0 如果它不是 10 或 0，我将从对中删除第二个元素，找到具有该元素的下一个对，当我第一次找到该元素时，将其替换为对中的第一个元素，然后更新差异...在此示例中，我将删除 8，结果将是 (5,7 diff 2) (7,10 diff 3) (0,5, diff 5)。我认为这是非常低效的，因为我必须再次搜索元素。你能给我一个如何提高效率的想法吗？

# java - Using a cursor to return rows from SQLite, error when database is empty

> ID：15325388
> 
> 赞同：0
> 
> 时间：2013-03-10T17:43:37.407
> 
> 标签：java, android, sqlite

When my database is empty, or it has just been created I am getting this error,

> 03-10 17:34:40.758: E/AndroidRuntime(1144): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.adressbooktake2/com.example.adressbooktake2.MainActivity}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0

Here is my code in my main class,

```
public class MainActivity extends Activity {
    DBAdaptor db;   
    Cursor cursor;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 
        db = new DBAdaptor(this).open();        
        cursor = db.getAllRecords();

        DisplayRecord(cursor);

} 
```

which then calls this code in my DBAdaptor class,

```
 public Cursor getAllRecords() 

    {       
        Cursor gaRecords = db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME,
                        KEY_PHONENUMBER, KEY_EMAIL}, null, null, null, null, null);     

        gaRecords.moveToFirst();

        return gaRecords;

    }

} 
```

I believe the problem is that when the database has just been created, there is nowhere for the moveToFirst() to go, as there is no data. But I am not sure how to get round this as I need a moveToFirst() for when there is a stocked database.

Anyone see a solution? Have a diagnosed the problem correctly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:48:15.583

You can check for an empty Cursor like this:

```
...
cursor = db.getAllRecords();
if(cursor.getCount() > 0)
    DisplayRecords(cursor);
else
    DisplayNoRecordsMessage(); 
```

Or since you posted `DisplayRecords()` in a previous question, you can also use:

```
...
if (c != null && !cursor.isAfterLast())
{
    nameTxt.setText(c.getString(1));
    phoneTxt.setText(c.getString(2));
    emailTxt.setText(c.getString(3));
} 
```

Also please read about [Java naming convention](http://java.about.com/od/javasyntax/a/nameconventions.htm) which states that method names should start with a lowercase letter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:50:08.497

Cursor.moveToFirst() returns false in case of empty cursor.

See the doc: [http://developer.android.com/reference/android/database/Cursor.html#moveToFirst()](http://developer.android.com/reference/android/database/Cursor.html#moveToFirst%28%29)

I'd say the problem is in DisplayRecord().

Are you fetching data from the cursor in DisplayRecord() ? If so, inside of it you should check if the cursor contains some data, calling *moveToFirst* and checking its result for example.

Something like

```
private void DisplayRecord(Cursor c){
    if(!c.moveToFirst()){
         return;
    }
    // do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T17:51:40.240

Use if(cursor .moveToFirst()) to check cursor

```
public class MainActivity extends Activity {
    DBAdaptor db;   
    Cursor cursor;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 
        db = new DBAdaptor(this).open();        
        cursor = db.getAllRecords();

        if(cursor.moveToFirst()){
           DisplayRecord(cursor);
            }

} 
```

# php - 从最高到最低相似度回显字符串

> ID：15325390
> 
> 赞同：2
> 
> 时间：2013-03-10T17:43:48.670
> 
> 标签：php, foreach

很难解释，但我需要一些帮助。所以我有 4 个字符串 `$query = 'google awesome';`, `$result1 = 'google is cool';`, `$result1 = 'google is awesome';`和 `$result3 = 'other page';`.

假设我使用了 PHP `similar_text();`，并且`$result1`60% 相似，`$result2`70% 相似，`$result3`5% 相似。

我如何按照从高到低的顺序呼应它们。请注意，我使用了 3 个以上的字符串，我只是使用`foreach();`.

编辑：这是我的一段代码。

```
if(isset($_GET['q'])) {
    $results = file(__DIR__ . '/data/urls.txt');
    $query = $_GET['q'];
    foreach($results as $result) {
        $explode = explode('::', $result);
        $site = $explode[0];
        $title = $explode[1];
        /* if $query = similar to $title, echo ordered by similarity. */
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:45:59.437

我建议您将所有字符串存储在一个数组中并使用用户定义的比较函数，例如[usort()](http://php.net/manual/en/function.usort.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:48:51.667

PHP 具有`usort`创建自己的比较函数的功能。直接来自[文档](http://php.net/manual/en/function.usort.php)：

```
<?php
$ref = "some ref string";

function cmp($a, $b)
{
    global $ref;
    return similar_text($ref, $a) - similar_text($ref, $b);
}

$a = array("one", "two", "three");

usort($a, "cmp");

foreach ($a as $key => $value) {
    echo "$key: $value\n";
}
?> 
```

请注意，这可能非常低效，因为您要对`similar_text`每个字符串进行多次计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T17:58:16.790

此解决方案将允许具有相同相似度排名的 $results 不会相互覆盖。他们在那时被列为先到先得。

```
$query = 'google awesome';
$results = array('google is cool', 'google is awesome','other page');
foreach ($results as $result) {
  $rank = similar_text($query,$result);
  $rankings[$rank][] = $result;
}
krsort($rankings); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T17:51:32.843

例如，您可以使用结果和文本构建一个数组，然后对数组进行排序并打印。

```
 if(isset($_GET['q'])) {
    $results = explode("\n",file_get_contents(__DIR__ . '/data/urls.txt')); // i assume all url is in a new line
    $query = $_GET['q'];
    $similarity = array();
    $map = array();        
    foreach($results as $result) {
        list($site,$title) = explode('::', $result);
        $similarity[$site] = similar_text($title,$query); //calculate similari by title for sites 0 is similar bigger is not realy similar
        $map[$site] = $title;            
    }
    asort($similarity,SORT_NUMERIC); //sort the results

    $limit = 10;
    foreach($similarity as $site=>$sim){
         print "<a href='{$site}'>{$map[$site]}</a>({$sim} % differnece what you need)<br/>";
         if( --$limit < 1) break;
    }
} 
```

应该阅读的链接：

[http://www.php.net/manual/en/function.arsort.php](http://www.php.net/manual/en/function.arsort.php)

[http://www.php.net/manual/en/function.each.php](http://www.php.net/manual/en/function.each.php)

[http://www.php.net/manual/en/function.list.php](http://www.php.net/manual/en/function.list.php)

# c# - 想要捕获最小化窗口的屏幕截图

> ID：15325391
> 
> 赞同：1
> 
> 时间：2013-03-10T17:43:50.630
> 
> 标签：c#, winforms

我正在使用 MDI 应用程序。在最小化任何 sdi 表单之前，我想捕获它的没有标题栏的屏幕截图。我的代码正在工作，但我捕获图像的方式并不清晰，有点模糊。这样我就做到了。这是我的代码。

```
protected override void WndProc(ref Message m)
        {

            if (m.Msg == WM_COMMAND && m.WParam.ToInt32() == SC_MINIMIZE)
            {
                OnMinimize(EventArgs.Empty);
            }

            base.WndProc(ref m);
        }

protected virtual void OnMinimize(EventArgs e)
        {

            if (_lastSnapshot == null)
            {
                _lastSnapshot = new Bitmap(100, 100);
            }

            using (Image windowImage = new Bitmap(ClientRectangle.Width, ClientRectangle.Height))
            using (Graphics windowGraphics = Graphics.FromImage(windowImage))
            using (Graphics tipGraphics = Graphics.FromImage(_lastSnapshot))
            {
                Rectangle r = this.RectangleToScreen(ClientRectangle);
                windowGraphics.CopyFromScreen(new Point(r.Left, r.Top), Point.Empty, new Size(r.Width, r.Height));
                windowGraphics.Flush();

                float scaleX = 1;
                float scaleY = 1;
                if (ClientRectangle.Width > ClientRectangle.Height)
                {
                    scaleY = (float)ClientRectangle.Height / ClientRectangle.Width;
                }
                else if (ClientRectangle.Height > ClientRectangle.Width)
                {
                    scaleX = (float)ClientRectangle.Width / ClientRectangle.Height;
                }
                tipGraphics.DrawImage(windowImage, 0, 0, 100 * scaleX, 100 * scaleY);
            }
        } 
```

所以请指导我如何获得更清晰和突出的sdi表格的快照。任何的想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:08:36.350

您缩放图片，任何缩放 - 无论是放大还是缩小 - 都会导致图像质量降低。我不会缩放图像，而是获得窗口的宽度和高度，创建一个具有该大小的新位图，最后也绘制相同大小的图像。

```
protected virtual void OnMinimize(EventArgs e)
{
    Rectangle r = this.RectangleToScreen(ClientRectangle);

    if (_lastSnapshot == null)
    {
        _lastSnapshot = new Bitmap(r.Width, r.Height);
    }

    using (Image windowImage = new Bitmap(r.Width, r.Height))
    using (Graphics windowGraphics = Graphics.FromImage(windowImage))
    using (Graphics tipGraphics = Graphics.FromImage(_lastSnapshot))
    {
        windowGraphics.CopyFromScreen(new Point(r.Left, r.Top), new Point(0, 0), new Size(r.Width, r.Height));
        windowGraphics.Flush();

        tipGraphics.DrawImage(windowImage, 0, 0, r.Width, r.Height);
    }
} 
```

或接近上述的东西 - 我实际上还没有能够测试它。

# iphone - 旋转事件后子容器控制器未收到 viewWillLayoutSubviews

> ID：15325395
> 
> 赞同：2
> 
> 时间：2013-03-10T17:44:03.667
> 
> 标签：iphone, objective-c, ios5, uiviewcontroller

我有一个视图控制器，它是容器控制器的子级，我想知道当设备上的方向发生变化时如何调整视图大小。**子控制器未收到预期的 viewWillLayoutSubviews 事件。**

我的印象是，当视图的边界发生变化时会调用“viewWillLayoutSubviews”，但 ChildViewController 的 willRotateToInterfaceOrientation 和 didRotateFromInterfaceOrientation 事件之间的边界值保持不变。 **这是为什么？**

我在轮换期间看到的特定视图事件是：

```
[ParentViewController viewDidLoad]
[ParentViewController viewWillLayoutSubviews]
[ParentViewController layoutHomeForStartup]
[ParentViewController viewDidAppear:]
[ParentViewController showLoginView]

[ChildViewController viewDidLoad]
[ChildViewController didMoveToParentViewController:]

[ParentViewController viewWillLayoutSubviews]

[ChildViewController viewWillLayoutSubviews]
[ChildViewController viewDidAppear:]
[ChildViewController showLoginPanel]

[ParentViewController willRotateToInterfaceOrientation:duration:]
[ChildViewController willRotateToInterfaceOrientation:duration:]

[ParentViewController viewWillLayoutSubviews]
// QUESTION: Why doesn't the childViewController not receive viewWillLayoutSubviews?

[ParentViewController didRotateFromInterfaceOrientation:]
[ChildViewController didRotateFromInterfaceOrientation:] 
```

这是我将子控制器添加到父控制器的方式：

```
// ParentViewController:
- (void)viewDidLoad
{
    ChildViewController *childViewController = [ChildViewController alloc] initWithNibName...];

    [childController willMoveToParentViewController:self];
    [self addChildViewController:childController];
    [view addSubview:childController.view];
    [childController didMoveToParentViewController:self];
} 
```

因为我仍然针对 iOS 5.0+ 设备，所以我还实现了：

```
- (BOOL)automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers 
{
    return YES;
} 
```

`shouldAutomaticallyForwardAppearanceMethods`并且`shouldAutomaticallyForwardRotationMethods`也被实现并返回YES（对于那些使用iOS 6+的人）；

我不确定在容器控制器的子视图控制器中处理方向变化的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:33:20.533

### 1.

`automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers`其实是两种方法：

他们被称为`shouldAutomaticallyForwardRotationMethods`和`shouldAutomaticallyForwardAppearanceMethods`

**即使它是 IOS5 下的 1 种方法，您也必须为 IOS6 实现较新的变体**

### 2.

孩子们的界限似乎没有改变你在评论中所说的，这是有道理的。所以调用`setNeedsLayout`视图控制器的视图来让它们自己布局:)

# java - 循环遍历一个文件，一组一行一行

> ID：15325400
> 
> 赞同：1
> 
> 时间：2013-03-10T17:44:56.697
> 
> 标签：java, file, loops, netbeans

我在阅读 .dat 文件时遇到问题。目前，我知道如何阅读 .dat/.txt 文件，但这对我来说有点棘手。

所以我有一组这样的数据：

**测试数据**

```
Sunday
Scuba Diving Classes
Mr.Jones
N/A
Yes

Sunday
Sailing
Mr. Jackson
N/A
Yes

Sunday
Generation Next
Ms.Steele
N/A
Yes

Monday
Helping Hands
Ms.Wafa
ANX0
No 
```

我需要对这个文件做的是逐条记录文件记录，如果字符串*activityname* .equals 等于活动名称（例如水肺潜水课程），则设置以**C**开头的变量以供查看。这是它的编码：

```
try{
            BufferedReader reader = new BufferedReader(new FileReader("test.dat"));

                int numberOfLines = readLines();
                numberOfLines = numberOfLines / 6;

                for(int i=0;i < numberOfLines; i++)
                {
                    String CDay = reader.readLine();
                    String CActivityName = reader.readLine();
                    String CSupervisor = reader.readLine();
                    String CLocation = reader.readLine();
                    String CPaid = reader.readLine();
                    String nothing = reader.readLine();

                    if(CActivityName.equals(activityName))
                    {
                        txtDay.setText(CDay);
                        txtSupervisor.setText(CSupervisor);
                        txtLocation.setText(CLocation);

                        //If it Activity is paid, then it is shown as paid via radiobutton
                        if(CPaid.equals("Yes"))
                                {
                                    radioYes.setSelected(rootPaneCheckingEnabled);
                                }
                        if(CPaid.equals("No"))
                                {
                                    radioNo.setSelected(rootPaneCheckingEnabled);
                                }
                    }
                    else
                    {
                        reader.close();
                    }
                }
        }
        catch(IOException e)
        {
                Logger.getLogger(AddActivity.class.getName()).log(Level.SEVERE, null, e);
        }
    } 
```

我已经使用 numberoflines 变量来遍历文件，但我的逻辑有缺陷，我不知道如何通过这个

**方法的现状与错误**

目前，该方法只读取第一条记录*Scuba Diving Classes*，当 if 条件为 false 时，不会遍历整个文件。

帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:56:45.393

> 目前，此方法……当 if 条件为 false 时，不会遍历整个文件。

要找出原因，请查看`else`块：

```
else
{
    reader.close();
} 
```

这意味着您`BufferedReader`在完成读取文件之前正在关闭。您无需在该`else`块中放置任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:01:49.517

我看到 JB Net 评论帮助了你。同样，通常您应该在 finally 块中关闭 IO 变量（文件、数据或其他），如下所示：

```
InputStream is = null;
try{
    //open streams, do work
}catch(...){

}finally{
//seperate try catch here to make sure it does not affect anything else, just close one resource per try catch
try{
    if(is != null){
        is.close()
    }catch(Exception ...){
        //one line log
    }
} 
```

在 java 7 中，您尝试过使用资源，但没有尝试过：)

# ruby - 来自 Login 的 Twitter 访问令牌能否用于 Search API？

> ID：15325406
> 
> 赞同：0
> 
> 时间：2013-03-10T17:45:35.743
> 
> 标签：ruby, twitter

在阅读 Twitter 文档时，我感觉到根据授权类型，您对 API 有不同的访问权限。

我的问题：如果我正在为 Twitter 登录进行 OAuth 授权，我得到的那些访问令牌可以用于进行搜索 API 调用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:56:30.063

我不确定您想到了哪些不同的身份验证级别，但据我所知，大多数 Twitter API 调用（需要身份验证）都有“需要用户上下文”注释，但看起来不同级别之间没有区别（至少与限制搜索 API 无关）

另外要进行搜索，您实际上并不需要身份验证令牌。您可以通过[http://search.twitter.com/search.json访问搜索端点](http://search.twitter.com/search.json)

# javascript - jQuery是否有某种撕裂图像动画效果？

> ID：15325408
> 
> 赞同：0
> 
> 时间：2013-03-10T17:45:43.117
> 
> 标签：javascript, jquery, animation, tearing

我想知道今天是否存在某种使用 jQuery 的撕裂图像动画效果？不像是一百万块，而是像中间撕开一张图片的效果？向两边移动。还是这需要使用 Flash 动画？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:14:06.727

您可以使用 javascript 和 css3 完成此操作。

只需让 javascript 复制图像（可能是具有背景的 div 作为图像）并将其粘贴到自身上。然后让左图显示第一个像素 0 到 50%，右图应该显示像素 50% 到 100%，背景右对齐。然后，您可以让 css 或 jquery 将每一侧分开。您需要添加一些额外的样式来创建撕裂外观，但这是完全可行的。

# php - PHP Zend 框架在注销时杀死所有浏览器之间的会话

> ID：15325409
> 
> 赞同：0
> 
> 时间：2013-03-10T17:45:43.627
> 
> 标签：php, zend-framework, zend-session

我可以使用 firefox 和 google chrome 登录我的应用程序。当我点击退出谷歌浏览器时，它会返回登录屏幕。但是，用户仍然登录到 Firefox。当我将用户从其中一个浏览器中注销时，如何从 firefox 和 google chrome 中删除会话。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:55:38.020

一种解决方案是将每个 session_id 与 user_id 存储在 db 表中，例如：

```
table active_session
id: primary key
user_id: int 11
session_id: varchar(50)
login_time: timestamp 
```

那么如果要终止一个会话，可以使用 session_id 搜索 user_id，然后从表中删除所有其他会话。

# java - 如何在不使用 java 数组或集合类中的任何方法的情况下比较 2 个数组？

> ID：15325411
> 
> 赞同：0
> 
> 时间：2013-03-10T17:45:50.530
> 
> 标签：java, arrays

这是我家庭作业的一部分，所以我需要解释而不仅仅是答案。

我正在创建传奇的钱包类。我必须能够将一个钱包（数组）与另一个钱包（数组）进行比较。关键是我不能使用 java 数组或集合类中的任何方法。我什至从哪里开始创建这样的东西？

我在做什么的一个例子是这样的：

```
String[] array1 = {"Quarter", "Dime", "Nickel", "Penny"};
String[] array1 = { "Dime", "Quarter", "Penny", "Nickel"};
(Does Array1==Array2?)
return true/false 
```

我再次需要理解这一点，所以请不要只是为我弄清楚，而是给我一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:50:12.687

您可以尝试嵌套 for 循环。在伪代码中：

```
for each element 'i' in Array1:
    for each element 'j' in Array2:
        does 'i' equal 'j'?
            // do something
        else:
            // do something else 
```

这会让你开始吗？您需要更多帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:51:16.780

您比较两个数组之间的元素的方式`Arrays.equal()`是迭代每个元素并一次比较它们。

```
String[] array1 = new String[] {"Quarter", "Dime", "Nickel", "Penny"};
String[] array2 = new String[] {"Dime", "Penny", "Quarter", "Nickel"};

public boolean equalArrays(String[] array1, String[] array2) {
    if(array1.length != array2.length) {
        return false;
    }
    int matched = 0;
    for(int i = 0; i < array1.length; i++) {
        for(int j = 0; j < array2.length; j++) {
            if(array2[j].equals(array1[i])) {
                matched++;
                break;
            }
        }
    }
    return matched == array1.length;
} 
```

# node.js - MVC 单元测试 LocomotiveJS

> ID：15325412
> 
> 赞同：-1
> 
> 时间：2013-03-10T17:45:56.163
> 
> 标签：node.js, unit-testing, model-view-controller, testing, locomotivejs

我正在使用 LocomotiveJS 构建 MVC 应用程序。我一直在考虑我应该编写的测试类型并且感到困惑。

以下是应用程序中的不同组件 - 模型、视图、控制器、路由器和 ORM。

***如果我必须对每个组件进行单元测试***，那么我认为我应该这样做。

1.  编写测试以确保 ORM 提供的 API 以我期望的方式运行。
2.  单元测试我的模型存根 ORM。我为它提供了存根，因此我不必在单元测试中依赖实际的数据库操作。
3.  控制器访问视图和模型。控制器的工作是获取/修改模型并响应客户端（渲染/重定向）。
    *   可以通过向控制器提供测试输入并检查是否生成了正确的响应来测试控制器的响应（存根`render`/`redirect`并确保进行了正确的调用）。
    *   可以通过存根模型并确保进行正确调用来测试控制器对模型的操作。这感觉不对，因为我正在测试实现......
4.  视图只是模板；控制器将模板与值绑定。我可以创建一个假视图模型并将其绑定到视图并查看是否生成了正确的输出。
5.  路由只是接受请求并将其映射到正确的控制器和操作。我可以通过删除部分路由器并确保对路由器的请求映射到预期的控制器/动作来确保应用程序支持正确的路由。

假设我现在更改了模型 API，我必须更改模型测试，我必须更改控制器测试使用的模型存根，并且我必须更新控制器测试中的断言。

**这似乎有点矫枉过正。**

这是否有意义？

像上面那样做1和2。

3.集成测试其余部分（控制器/视图/路由器）。`test`在这里，我认为我应该在一个环境中启动我的应用程序并使用它`supertest`来确保请求生成正确的响应 - 访问一个 url，我得到正确的内容，正确的重定向等。

我认为对模型进行单元测试是有意义的，因为它代表了与不同系统的交互（数据持久性）。我们要确保桥接功能正常。路由器/控制器/视图在我们自己的系统中以非常特定的方式进行交互。所以集成测试似乎没问题。你觉得呢？你有没有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:01:15.620

如果您依赖集成测试，您将失去单元测试的好处。您的测试将运行得比他们需要的要慢，因此运行频率会降低。你的测试不会告诉你你在哪里弄坏了东西。您的测试不会使用应用程序的尽可能多的功能。您的测试将只有文档的一半有效。您将无法进行 TDD。

总的来说，任何时候有人为了速度而选择放弃单元测试，他们都会走得更慢。

# python - 如何为“测试尝试”实现数据库表

> ID：15325413
> 
> 赞同：2
> 
> 时间：2013-03-10T17:45:56.307
> 
> 标签：python, django

我有以下带有模型的数据库设置`Test`，现在。`Question``Answer``Attempt`

![数据库设置](../Images/59579bb85dc3791e44d882677561a483.png)

我对如何实现`Attempt`模型有一些问题。它用于跟踪测试尝试结果，如下所示： ![尝试表](../Images/abb28a5ccd8058af2e99811988ba3518.png)

我如何设置`Attempt`以便我可以注册它`admin.site.register(Attempt)`并查看我得到了多少正确或错误的答案。正确/错误答案的数量应该是一个链接，它将我重定向到一个页面，该页面显示哪些答案已被正确/错误地回答。我得到的是这个：

```
class Attempt(models.Model):
    name = models.ForeignKey(Test)
    correct = models.IntegerField(default=0)
    wrong = models.IntegerField(default=0)
    # list of answer ids that have been answered correct
    list = () # ? 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:18:52.647

从我所看到的情况来看，连接问题和尝试表的表将起作用。

```
class QuestionAttempt(models.Model):
    attempt = models.ForeignKey(Attempt)
    answer = models.ForeignKey(Answer) 
```

因此，对于给定的 Attempt 实例，您可以获得所有 QuestionAttempt 记录，并确定它们是正确的还是不正确的。

# list - 方案任务分解——全局变量问题

> ID：15325418
> 
> 赞同：1
> 
> 时间：2013-03-10T17:46:15.460
> 
> 标签：list, variables, scheme

所以这是我的问题（概括为抽象情况）。一般是口译员。

我有一个程序需要解析输入列表，并根据其元素顺序调用一些需要修改变量的函数。函数单独定义并由**(cond** ) 选择。我需要更新的这 3 个变量包含有关当前情况的信息（确切地说 - 机器人位置、迷宫和机器人方向）。前一个函数的结果用于下一个函数（即更新的变量被使用）。

```
(define func-a ... )
(define func-b ... )

(define (main-func <maze> <orientation> <coordinates> <list with commands>)

  ;; here I parse the list and choose which function to call
  ;; output must contain (list <new-maze> <new-orientation> <new-coordinates>))

) 
```

我可以使用哪些方案工具来更新这些变量？我考虑了几个选项：

*   使用（定义然后调用集合！（这是不好的风格，因为它不是纯函数式编程）；
*   从头到尾调用函数（这不起作用：我还必须检查移动是否有效）；
*   根本不要使这些变量保持不变，尝试将它们作为参数传递给每个函数；

还有其他合适的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:59:43.460

仅仅因为 Scheme 被认为是一种“函数式语言”并不能禁止您使用“set！” - 毕竟它存在于要使用的语言中。因此没有任何问题：

```
(define-record-type position (fields x y z))

(define robot-position (make-position 0.0 0.0 0.0))

(define update-robot-position (new-x new-y new-z)
  (set! robot-position (make-position new-x new-y new-x))) 
```

[我选择将位置定义为不变。]

如果您愿意，您可以选择另一种方法，但从根本上改变了机器人的位置，并且这种改变将在您的代码中以某种方式出现。为什么不使用最简单、最直接的方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:06:21.127

您必须保留一些状态（以及读取文件），因此不会有纯函数式编程，您必须接受一些偏差。

一般的方法是将共享对象保持为某个元函数中的本地对象，比如`parse`，并通过调用你的函数来更新它，比如`parse-one`,`parse-two`等等。

现在您需要一种更新它们的方法。

`parse-one`您可以通过在范围内`parse-two`定义它们来使它们可见：

```
(let ((state (make-state)))
  (let ((parse-one (lambda () ...))
        (parse-two (lambda () ...)))
    ....)) 
```

或者您使用返回值：

```
(let ((state (make-state)))
  ...
  (set! state (parse-one state))
  ...) 
```

还有第三种方法，称为 OOP。将它们全部定义在一个闭包中，以便它们可以共享一些数据：

```
(define (make-parser)
  (let ((state (make-state))
    (let (((parse-one (lambda () ...))
          ((parse-two (lambda () ...))
          ((get-state (lambda () state)))
       (list parse-one parse-two get-state))))

(destructuring-bind (parse-one parse-two get-state) (make-parser)
  ...
  (parse-one)
  ...
  (get-state)) 
```

（[destructuring-bind](http://www.lispworks.com/documentation/HyperSpec/Body/m_destru.htm)只是破坏列表的一种简单方法，请参阅它的[方案实现](http://pschombe.wordpress.com/2006/03/10/destructuring-bind/)）但它似乎是第一个的复杂版本。

# c# - 获取后台任务以不断更新文本框

> ID：15325422
> 
> 赞同：1
> 
> 时间：2013-03-10T17:46:49.147
> 
> 标签：c#, .net, backgroundworker

我对这一切都很陌生，所以请多多包涵！我正在编写一个小应用程序来控制我的望远镜，此刻我可以连接到它并告诉它指向哪里。我想要几个文本框，或者随着望远镜位置不断更新的标签 -`T`是望远镜对象，我正在调用`T.Altitude`, `T.Azimuth`，`T.RightAscention`并且`T.Declination`我希望这些值每半秒左右更新四个标签。我假设我需要使用后台工作人员，但我正确吗？我可以访问 Telescope 对象，因为它是在主线程上创建的吗？我到底是怎么做的！这就是我到目前为止所拥有的（而且不多！）......

```
private void bw_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;

    string Az = T.Azimuth.ToString();
    string Alt = T.Altitude.ToString();
    string Dec = T.Declination.ToString();
    string Ra = T.RightAscension.ToString();

    System.Threading.Thread.Sleep(500);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:31:46.137

在您的情况下，您应该考虑使用 Timer 类之一。这些类以指定的时间间隔调用给定的委托。

Windows.Forms 命名空间中的 Timer 类在 UI 线程中调用委托，因此您不必为调度或其他任何事情而烦恼，但如果您过于频繁地调用它，它可能会降低 UI 的响应速度。

其他 Timer 使用单独的线程，因此您将需要使用 Dispatcher 对象或 SynchronizationContext 对象来修改 UI 值。您可以在 msdn 上阅读有关这些内容的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:30:24.750

最简单的方法可能是建议使用[Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)使用望远镜（对象）中的当前值定期更新 Gui。

作为旁注，后台工作器在 C# 5.0 中有点过时了，因为它更容易使用 async/await（请参阅[有关 async/await 与 BackgroundWorker 的线程](https://stackoverflow.com/questions/12414601/async-await-vs-backgroundworker)）。

这是 WinForms 中的示例实现，它每 500 毫秒刷新一组标签。

```
public partial class MyForm : Form
{
    private readonly Timer _timer = new Timer();

    public MyForm()
    {
        InitializeComponent();

        _timer.Interval = 500;
        _timer.Tick += TimerTick;
        _timer.Enabled = true;
    }

    void TimerTick(object sender, EventArgs e)
    {
        _labelAzimuth.Text = T.Azimuth.ToString();
        _labelAltitude.Text = T.Altitude.ToString();
        _labelDeclination.Text = T.Declination.ToString();
        _labelRightAscension.Text = T.RightAscension.ToString();
    }
} 
```

# java - Java从字符串中获取整数值

> ID：15325423
> 
> 赞同：2
> 
> 时间：2013-03-10T17:46:49.600
> 
> 标签：java, string, integer

我想从我的字符串中获取整数值。下面是我的例子。

```
String strScore = "Your score is 10\. Probability in the next 2 years is 40%"; 
```

但我只想得到10分。我该怎么做？

更新：

```
String firstNumber = strScore.replaceFirst(".*?(\\d+).*", "$1");

bfLog.createEntry( firstNumber ); 
```

我将其保存到 sqlite 数据库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T17:50:07.883

您可以使用其中一种`String`正则表达式`replace`方法来捕获[捕获组](http://docs.oracle.com/javase/tutorial/essential/regex/groups.html)中的第一个数字：

```
String firstNumber = strScore.replaceFirst(".*?(\\d+).*", "$1"); 
```

*   `.*?`消耗初始非数字（非贪婪）
*   `(\\d+)`获取组中的一个或多个可用数字！
*   `.*`其他一切（*贪婪*）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T17:49:59.567

这取决于您的字符串中是否有任何其他内容可以更改。

如果除了数字之外它总是相同的，你可以使用

```
int score = Integer.parseInt(strScore.substring(14,16)) 
```

因为数字“10”位于字符串的索引 14 和 15。如果您的字符串中的其他内容发生了变化，您应该使用正则表达式：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-18T10:40:45.747

你可以试试这个：

```
String strScore = "Your score is 10\. Probability in the next 2 years is 40%";
String intIndex = strScore.valueOf(10);
String intIndex = 10 // Result 
```

# c# - 字母数字的屏蔽文本框输入验证

> ID：15325427
> 
> 赞同：0
> 
> 时间：2013-03-10T17:47:09.930
> 
> 标签：c#, .net, winforms

我使用了以下站点： http: [//msdn.microsoft.com/en-us/library/kkx4h3az.aspx](http://msdn.microsoft.com/en-us/library/kkx4h3az.aspx) 来验证输入 8 位数字，

然后我尝试以这种方式进行验证，以便只允许将字母数字（字母）值输入到文本框中，但它不起作用。

您是否必须应用不同的方法来只允许字母？如果有怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:03:21.313

这不是我的想法，但它应该让你开始......这似乎是一个常见的问题。如果这不起作用，请继续搜索 SO，您会找到答案。

```
 Regex regex = new Regex("[a-zA-Z]");
 Match match = regex.Matches(textBox1.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-26T12:19:52.977

首先，字母数字表示字母**和**数字。如果你只想要字母，你必须在你的面具中使用“L”。请参阅[此链接](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.maskedtextbox.mask?view=net-5.0)以供参考。

或者，您可以检查文本更改事件中的输入。这也适用于传统的 TextBox（对于屏蔽文本框，您必须将 TextBox 更改为 MaskedTextBox）。请参见下面的代码：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    TextBox tb = sender as TextBox;
    if (!tb.Text.All(char.IsLetter))
    {
        MessageBox.Show("Only Letters are allowed.", "Invalid Input", MessageBoxButtons.OK, MessageBoxIcon.Warning);
        tb.SelectAll();
    }
} 
```

代码要求`using System.Linq;`

# matlab - 如何验证向量是否真的恢复了？

> ID：15325429
> 
> 赞同：2
> 
> 时间：2013-03-10T17:47:27.287
> 
> 标签：matlab, optimization, numeric, numerical-methods, linear-programming

在压缩感知中，如何验证向量是否已恢复，或者如何绘制有关恢复率的数字？因为在数值实验中，原始向量和压缩算法产生的向量之间总是存在差异的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:04:18.143

确认您的载体实际上已恢复的唯一方法是

*   保留一份矢量图
*   压缩另一个副本
*   解压压缩向量
*   与原作比较

当您尝试设计或选择无损压缩方法时，这可能很有用。

但是，如果您处于拥有矢量的环境中，则需要对其进行压缩。后来解压，想知道有没有丢失。那么没有实际的方法可以确定。幸运的是，您可以通过存储和比较一些统计数据来了解您的新向量是否与旧向量相似。

一些可能很有趣的统计数据，具体取决于您的向量：

*   长度
*   矩（均值、方差等）
*   正值的数量
*   最高和最低值
*   两个值之间的最小非零差
*   每 10000 个元素的确切值
*   ...
*   基本上对你来说真正重要的东西

# c# - 在类的函数中引用表单

> ID：15325430
> 
> 赞同：-2
> 
> 时间：2013-03-10T17:47:45.357
> 
> 标签：c#

这是我的`CheckXWinner`函数代码，我需要在其中引用我的表单才能绘制胜利线：

```
 public void CheckXWinner(Button[] buttonArray, Form1 frm)
    {
        int arrLength = buttonArray.Length; 
        int root = (int)Math.Sqrt(Convert.ToDouble(arrLength));
        bool winner = false;//variable to keep the computer from going when Xwins
        for (int i = 0;  i < root;  i++)
        {
            //Sets the counter for the winners back to zero
            int d2Count = 0;
            int d1Count = 0;
            int hCount = 0;
            int vCount = 0;

                for(int j = 0;  j < root; j++)
                {
                    //increments the appropriate counter if the button contains an X
                    //Horizonal win
                    if (buttonArray[(i*root) + j].Text == "X")
                    {
                        hCount++;
                        if (hCount == root)
                        {
                            for (int z = (root - 1); z >= 0; z--)
                            {
                                buttonArray[(i*root) + z].BackColor = Color.IndianRed;
                            }
                            Xwins();
                            winner = true; //sets winner to true so computer does not take turn 
                        }
                    }//end of Horizonal win

                    //Left to right diagonal
                    if (buttonArray[j + (j*root)].Text == "X")
                    {
                        d1Count++;
                        if (d1Count == root)
                        {
                            for (int z = (root - 1); z >= 0; z--)
                            {
                                buttonArray[z + (z * root)].BackColor = Color.IndianRed;
                            }
                            Xwins();
                            winner = true; 
                        }
                    }//end of LTR win

                    //Right to left diagonal
                    if (buttonArray[(j*(root - 1)) + (root - 1)].Text == "X")
                    {
                        d2Count++;
                        if (d2Count == root)
                        {
                            for (int z = (root - 1); z >= 0; z--)
                            {
                                buttonArray[(z*(root - 1)) + (root - 1)].BackColor = Color.IndianRed;
                            }
                            Xwins();
                            winner = true; 
                        }
                    }//end of RTL win

                    //Vertical win
                    if (buttonArray[i + (root*j)].Text == "X")
                    {
                        vCount++;
                        if (vCount == root)
                        {
                            for (int z = (root - 1); z >= 0; z--)
                            {
                                buttonArray[i + (root*z)].BackColor = Color.IndianRed;
                            }
                            Xwins();
                            winner = true; 
                        }
                    }//end of vert win                        
                }//end of for j loop
        }//end of for loop
        CheckDraw();
        if (winner == false)
        {
            ComputerGoes(buttonArray);
        };

    }//end of CheckXWinner 
```

在这个类的另一部分，我有与表单关联的所有按钮点击的处理程序：

```
 //Handle any button clicks
    private void button_click(object sender, EventArgs e)
    {
        Button b = (Button)sender;
        b.Text = "X";
        b.Enabled = false;
        CheckXWinner(buttonArray, Form1 frm);
    } 
```

我对该调用的 Form1 部分有错误，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:50:11.030

在您传递的地方，`Form1 frm`您实际上应该传递对 Form1 上的实例的引用。根据您对传递建议的评论，`this`按钮处理程序似乎是在另一个表单中声明的​​（而不是在 Form1 中）。如果是这种情况，您应该获取/保留对 Form1 实例的引用并将其传入：

```
CheckXWinner(buttonArray, a_ref_to_form); 
```

但是，查看您的实现`CheckXWinner`看起来并不像您在`frm`任何地方引用！

将 CheckXWinner 的声明重写为

```
public void CheckXWinner(Button[] buttonArray) 
```

并这样称呼它：

```
CheckXWinner(buttonArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:54:42.093

当您将 frm 作为参数传递时，它不会在任何地方声明。

传递“this”而不是 Form1 frm。

# tomcat - 长轮询，向多个用户发送更新

> ID：15325431
> 
> 赞同：1
> 
> 时间：2013-03-10T17:47:49.243
> 
> 标签：tomcat, asynchronous, tomcat7, long-polling

我正在构建一个*带有实时更新的 tomcat 服务器应用程序*。我正在使用异步上下文向用户发送更新。因此，该请求将保持打开状态，直到频道有一些新闻或更新。当消息到达时，需要将消息通知几个在线订阅者。问题是如何从更新新闻的某个用户发送的同一请求中将更新发送给所有订阅者。我应该为每个订阅者执行一个新线程吗？

PS我从本教程中了解了正确的长轮询实现：[http ://www.oracle.com/webfolder/technetwork/tutorials/obe/java/async-servlet/async-servlets.html](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/async-servlet/async-servlets.html)

# c - C中的枚举/类字典工具？

> ID：15325436
> 
> 赞同：3
> 
> 时间：2013-03-10T17:48:16.583
> 
> 标签：c

我正在阅读[此处](http://clc-wiki.net/wiki/K&R2_solutions%3aChapter_7%3aExercise_1)发布的 K&R 第 7 章中问题的解决方案。基本上，程序会根据程序的名称（“upper”或“lower”）将标准输入转换为小写或大写。它似乎将转换函数的名称存储在某种字典中，如下所示：

```
int (*convcase[2])(int) = {toupper, tolower}; 
```

然后根据程序的名称是以 au 还是 l 开头来访问这些函数：

```
if(argc > 0)
  {
    if(toupper((unsigned char)argv[0][0]) == 'U')
    {
      func = 0;
    }
    else
    {
      func = 1;
    }

    while((ch = getchar()) != EOF)
    {
      ch = (*convcase[func])((unsigned char)ch);
      putchar(ch);
    }
  } 
```

我理解那个代码块在做什么，但我从来没有见过像 convcase 的初始声明这样的东西。看起来像是宏、枚举和数组的某种奇怪组合。谁能解释（1）为什么 convcase 是一个指针；(2) 名称后面的 (int) 类型是什么；(3) toupper 和 tolower 在该声明中到底是什么，因为它们不是 char *s；(4) 何时/为何使用这种设置。当您有多个可能的函数调用时，它只是一个类似宏的快速工具来节省一些空间吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T18:01:18.327

1.  `convcase`是两个函数指针的数组；它不是一个指针。数组表达式在需要指针的地方使用时将隐式转换为指针。
2.  那不是演员表。它指定函数接受`int`参数，就像`toupper`and`tolower`函数一样。
3.  `convcase`用函数指针`toupper`和初始化`tolower`。
4.  我认为这个问题是关于函数指针的。当您希望函数指针抽象时，请使用函数指针。我建议这个例子是对函数指针的不必要使用。在这种情况下，根据用户输入更改`convcase[0]`或更改为西班牙语或日语的能力更有可能保证使用函数指针。`convcase[1]`此外，函数指针可用于参数中以提供额外的抽象。例如，[qsort](http://pubs.opengroup.org/onlinepubs/009695399/functions/qsort.html)函数能够对任何类型的数组进行排序，因为它使用函数指针来*比较*对象。这是一个使用函数作为*比较器*`int`对输入进行排序的示例。`int_compare`

 *```
#define nelem(array) (sizeof (array) / sizeof *(array))

int int_compare(const void *p1, const void *p2) {
    int x = *(int *)p1, y = *(int *)p2;
    return (x > y) - (y > x);
}

int main(void) {
    int value[16];
    for (size_t x = 0; x < nelem(value); x++) {
        if (scanf("%d", &value[x]) != 1) {
            break;
        }
    }

    qsort(value, sizeof *value, x, int_compare);
    return 0;
}
```*

# c++ - 这在多线程环境中会不会产生干扰？

> ID：15325441
> 
> 赞同：-1
> 
> 时间：2013-03-10T17:48:52.383
> 
> 标签：c++, multithreading, thread-safety, deque, thread-synchronization

```
std::deque<T> dq;
Thread_function(pointer to queue as argument)     // created 8 threads
{
     vertext_found = true;
     **v is initialized to NULL
     while ( i < dq->size())
     {
          EnterCriticalSection(&h);
          if( i < dq.size() ) {
              v = dq.at(i);      // accessing element of queue without popping
              i++;
              vertext_found = true;
          }
          LeaveCriticalSection(&h);
          if (vertext_found && (i < dq.size()) && v != NULL)
          {
              **operation on 'v'
              vertext_found = false;
          }
     }
} 
```

这是否会成为数据竞争条件，尤其是在关键部分之外处理“ **while (i < dq->size())** ”时？我的方法正确吗？否则请建议我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T18:10:13.150

> 这在多线程环境中会不会产生干扰？

在您的问题文本中，`dq`（就像您的函数中的所有其他变量一样）是一个*本地*对象：

```
std::deque<T> dq; 
```

如果确实如此，那么这个问题有一个简单的答案：**“是”**。它是线程安全的，因为没有争用：每个线程都在一个本地对象上工作，并且由于没有共享，所以不会有任何数据竞争。

* * *

现在假设您的代码旨在显示*共享*数据结构的使用，并且这`dq`实际上是一个全局对象或多个线程可以同时访问的东西（这`dq->size()`似乎是函数调用所暗示的），那么答案是**“这取决于”**。

**如果您的所有线程仅同时执行您正在显示的函数，并且`dq`是对 的引用或指针`const`**，因此您的函数不包含对任何非`const`成员函数的任何调用，那么答案是**“是的，*但***你不在这种情况下，根本不需要*任何关键部分”。*C++11 标准的第 17 段 6.5.9/3 规定：

> C++ 标准库函数不得直接或间接修改可由当前线程以外的线程访问的对象 (1.10)，除非这些对象是通过函数的非`const` 参数直接或间接访问的，包括`this`.

对定义什么是数据竞争的第 1.10 段（尤其是 1.10/21）的引用使上述段落的含义更加清晰：

> **如果程序的执行在不同的线程中包含两个相互冲突的操作**，则该程序的执行包含数据竞争，其中至少一个不是原子的，并且两者都不会在另一个之前发生。任何此类数据竞争都会导致未定义的行为。[...]

最后，第 1.10/4 段指定了两个动作何时发生冲突：

> 如果其中一个修改了内存位置 (1.7) 而另一个访问或修改了相同的内存位置，则两个表达式求值会发生冲突。

所有这一切的结果是**`const`成员函数必须是线程安全的**。您可能有兴趣观看[Herb Sutter](http://channel9.msdn.com/posts/C-and-Beyond-2012-Herb-Sutter-You-dont-know-blank-and-blank)关于它的演示文稿。

由于`deque<T>::size()`是`const`成员函数，并且`at()`是返回对 的引用的`const`成员函数（因为您是从引用或指向的指针调用它） ，因此无需同步来自多个线程的访问。`const``const`

* * *

**如果您`dq`不是*对*的引用或指针`const`**，那么答案是“**否**”，因为`at()`它是一个非`const`成员函数。此外，由于`v`是对元素的非常量引用，因此您的“操作`v`”可能是非，因此在*元素*上而不是在其自身`const`上引入数据竞争。*`dq``dq`*

 *同样，**如果您的线程同时`dq`通过其他函数**访问和修改，那么答案又是**“否”**，因为您没有保护对共享对象的所有访问。读操作与写操作冲突（见上文），您只是保护*其中*的一部分。在这种情况下，您的关键部分应该跨越整个`while`周期。*

# python - 如何从导入文件中的函数访问变量

> ID：15325442
> 
> 赞同：2
> 
> 时间：2013-03-10T17:48:54.303
> 
> 标签：python

所以我有一个文件，我们把它命名为 main.py

在其中，我导入了一个外部文件，我们将其命名为 ext.py

现在假设这些是 ext.py 的内容：

```
def how():
    tangerine = 1 
```

假设这些是 main.py 的内容：

```
import ext
print #Not sure what or how 
```

我想知道的是如何通过主文件打印出 tangerine 变量。像这样：打印 ext.how().tangerine？如果我输入 ext.tangerine 它不起作用，因为 tangerine 仅在 how() 函数中定义。

请帮忙，因为我真的需要它！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T17:55:11.217

使用全局的替代方法 - 从函数中返回 tangerine 的值：

```
def how():
     tangerine = 1    
     return tangerine 
```

在 main.py- 中：

```
 import ext
 print ext.how() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:07:50.127

您可能应该使用一个类。

```
def how():
    tangerine = 1 
```

将始终具有值 1。如果您如其他海报所述将其设为全局可访问，则该变量将可在全局命名空间中访问，这意味着每次您在方法之外修改变量时，您的函数的功能可能会受到影响，因为它依赖于“全球状态”。很可能会发生不想要的坏事。

使用类/对象并不困难：

```
class Know(object):
    def __init__(self, t):
        self.tangerine = t
    def how(self):
        self.tangerine += 1

iknow = Know(0)
iknow.how()

youknow.Know(9)
youknow.how()
print youknow.tangerine
>>> 10
print iknow.tangerine
>>> 1 
```

# google-chrome-extension - 来自 Javascript 的 Chrome 扩展程序链内容

> ID：15325447
> 
> 赞同：0
> 
> 时间：2013-03-10T17:49:04.793
> 
> 标签：google-chrome-extension

所以，我正在尝试做一个基本的 Google Chrome Hello World 扩展。有人可以解释一下为什么下面的代码不起作用吗？谢谢。

popup.js：

```
document.getElementById("foobar").innerHTML = "Hello Chrome Extensions"; 
```

popup.html：

```
<!doctype html>
<html>
  <head>
    <title>Hello Chrome</title>
    <script src="popup.js"></script>
    <div id="foobar"></div>
  </head>
  <body>
  </body>
</html> 
```

我正在关注[http://developer.chrome.com/extensions/getstarted.html](http://developer.chrome.com/extensions/getstarted.html)的“框架” 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:06:31.970

可以通过两种方式解决：

1.  `<script .. >`交换和的顺序`<div ..>`。
2.  将代码包装在`popup.js`domready 事件中：

    ```
    document.addEventListener('DOMContentLoaded', function() {
        // Code here...
    }); 
    ```

您的代码失败，因为在`<div>`执行脚本时未知。

# symlink - 如何确保在 Chef 的符号链接中存在目录路径？

> ID：15325449
> 
> 赞同：2
> 
> 时间：2013-03-10T17:49:28.457
> 
> 标签：symlink, chef-infra, chef-solo

在 Chef 中创建符号链接：

```
link "#{node[:tomcat][:home]}/webapps/myface.war" do
  to "/srv/scafandru/current/myface.war"
end 
```

失败，因为当时节点上缺少父目录。

在[`link`资源](http://docs.opscode.com/resource_link.html)中我看不到任何类似于[`directory`资源](http://docs.opscode.com/resource_directory.html)的属性`recursive true`，所以我目前的方法是通过运行来确保目录结构存在

```
directory "#{node[:tomcat][:home]}/webapps" do
  recursive true
end 
```

就在链接之前。

是否有任何优雅的方法可以将此行为封装在链接资源中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:00:53.713

如果您不想编写代码，您的解决方案是最好的解决方案。

如果您愿意有更好的解决方案，您可以扩展链接提供者以添加递归属性。

为此，您可以参考[opscode 文档](http://wiki.opscode.com/plugins/viewsource/viewpagesrc.action?pageId=7274964)中的说明：

> **扩展现有提供程序**
> 
> 如果您想编写一个扩展另一个提供程序类的 LWP，您可以将其作为一个 mixin 来完成，然后您可以使用该扩展类将其放置在食谱库目录下的库中。
> 
> 然后将编写您的 LWRP 以将该库包含在提供程序实现中，以访问扩展的核心资源。例如，请参阅传输手册，其中包含一个 `transmission_torrent_file`LWRP，允许您通过 BitTorrent 协议下载文件。此`transmission_torrent_file`LWRP 是现有文件和 remote_file 资源的扩展。

# python - 使用结果值或函数附加到 Python 中的列表中

> ID：15325452
> 
> 赞同：0
> 
> 时间：2013-03-10T17:49:35.677
> 
> 标签：python, optimization, coding-style

从性能和编码风格的角度来看，这两种方法是否等效？

```
def foo(n):
    return n*2

# case 1 with ".append(function())"

mylist = [1,2,3,4,5,6,7,8,9,10]
result = list()
for l in mylist:
    result.append(foo(l))

# case 2 ".append(result)"

mylist = [1,2,3,4,5,6,7,8,9,10]
result = list()
for l in mylist:
    r = foo(l)
    result.append(r) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:53:00.443

您的方法或多或少是等效的；选项 2 做了*更多*的工作；它必须对临时变量进行额外的存储和名称查找。实际上，差异很小，您应该更关注代码的可读性而不是过早的优化。

对于您的*具体*示例，您最好使用列表理解：

```
result = [foo(l) for l in mylist] 
```

列表推导式在 C 代码中构造列表，并且不必在`.append()`每次循环迭代时查找方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:51:44.230

我认为它们是相同的，但最好的选择是`map(foo, mylist)`- 即使从性能的角度来看也`append`可能导致列表调整大小需要额外的时间

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T17:53:36.230

仅删除临时分配可能会获得一些性能提升，但请记住，过早优化是邪恶的，微优化不值得付出努力

当然还有更好的方法，例如

**列表理解**

```
mylist = [1,2,3,4,5,6,7,8,9,10]
result = [n*2 for n in mylist] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T17:52:50.663

```
result = [foo(i) for i in mylist] 
```

是你想要的。

# opengl - 编译着色器（结构）时的 GLSL 奇怪错误

> ID：15325460
> 
> 赞同：0
> 
> 时间：2013-03-10T17:50:20.033
> 
> 标签：opengl, graphics, glsl

我有一个片段着色器，它有结构和这些结构的统一。当我尝试编译它们时，OpenGL 给了我这个错误：

```
0(30) : error C0000: syntax error, unexpected identifier, expecting '{' at token "lights_a"
0(31) : error C0000: syntax error, unexpected identifier, expecting '{' at token "material" 
```

我不知道这里有什么问题。我一直在寻找问题...我查看了第 30 行和第 31 行，我做了我能想象的一切，但没有成功。

这是代码：

```
#version 330 core
struct LightBase
{
    int renderit;

    vec4 ambient_light;
    vec4 specular_light;
    vec4 diffuse_light;

    float radius;

    vec3 light_position;
    vec3 light_direction;

    int light_type;
};

struct MaterialBase
{
    vec4 ambient_affect;
    vec4 specular_affect;
    vec4 diffuse_affect;
    float shining;

    float mirror;

    int light_affect;
};

in vec3 VertexPos;
in vec3 Normal;
uniform int light_quantity;
uniform LightBase lights_a[50];
uniform MaterialBase material;
uniform float usingTex;
uniform sampler2D texturemap;
in vec2 UVs;
in vec4 Colors;
out vec4 color;

void main() {

    vec4 texture_u = texture(texturemap,UVs).rgba * usingTex;
    vec4 color_u = Colors * (1.0f-usingTex);

    vec4 final_color = color_u+texture_u;
    // Light
    for(int i=0;i<light_quantity;i++) {
        if(lights_a[i].renderit==1) {
            if(lights_a[i].light_type==1) {

                float attenuation = max(0.0,1.0-dot(lights_a[i].light_direction,lights_a[i].light_direction));

                vec3 L = normalize(lights_a[i].light_direction);
                vec3 N = normalize(Normal);
                vec3 V = normalize(-VertexPos);
                vec3 R = normalize(-reflect(L,N));

                float nDotL = max(0.0,dot(N,L));
                float rDotV = max(0.0,dot(R,V));

                float ambient_result = lights_a[i].ambient_light * material.ambient_affect * attenuation;
                float diffuse_result = lights_a[i].diffuse_light * material.diffuse_affect * nDotL * attenuation;
                float specular_result = lights_a[i].specular_light * material.specular_affect * pow(rDotV,material.shining) * attenuation;

                vec4 this_colour = (ambient_result + diffuse_result + specular_result) * final_color;
                    final_color = this_colour;
            }
    }
    }

    color = final_color;
} 
```

代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:14:05.767

当我编译你的代码时，我没有看到错误——只有几个警告：

```
0(62) : error C7011: implicit cast from "vec4" to "float"
0(63) : error C7011: implicit cast from "vec4" to "float"
0(64) : error C7011: implicit cast from "vec4" to "float" 
```

我几乎可以通过注释掉`struct LightBase`and的声明来重现您看到的错误——除了它们出现在第 33和`struct MaterialBase`34 行。`lights_a``material`

这让我相信你的问题是你实际上并没有编译你认为的程序。也许您正在将它从文件读取到内存中，但是在您调用 glShaderSource 之前，内存会以某种方式损坏......

# c++ - 运算符重载以连接字符串

> ID：15325462
> 
> 赞同：0
> 
> 时间：2013-03-10T17:50:29.093
> 
> 标签：c++, visual-c++

我试图实现运算符重载以连接 2 个字符串，但不使用内置字符串函数和使用指针。代码如下：

```
#include<iostream>
using namespace std;
class str
{
    public:
    char* name;
    str* operator+(str obj)
    {
        str obj3;
        while(*name)
        {
            obj3.name = name++;
            obj3.name++;
        }
        while(*obj.name)
        {
            obj3.name = obj.name++;
            obj3.name++;
        }
        *(obj3.name) = '\0';
        return &obj3;
    }
};

int main()
{
    str str1,str2;
    str* str3;
    str1.name = "hello";
    str2.name = " there!";
    str3 = str1+str2;
    cout<<"the output is: "<<str3.name;
    return 0;
} 
```

我尝试了很多修改，但没有成功。我可以在网上找到的所有解决方案都是基于内置的字符串函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:56:58.487

好吧，立即脱颖而出的是：

*   该成员没有明确的所有权`name`- 在您的情况下，您将其设置为一些字符串文字，但是如果您将其分配给`new`? 那么谁来负责破坏呢？谁是主人？
*   `operator+`返回指向 的指针`str`，而不是 a `str`，因此`str3 = str1+str2;`无效。
*   `str obj3;`从未初始化其成员，但您尝试在其中写入，这是未定义的行为。
*   按值传递将创建副本，如果您不遵循三规则，这很糟糕——在这种情况下，如果您需要，这甚至不清楚。

# java - java模拟发牌员——ArrayIndexOutOfBoundsException

> ID：15325464
> 
> 赞同：0
> 
> 时间：2013-03-10T17:50:37.233
> 
> 标签：java

我在执行我的代码时遇到了问题，无法准确指出错误的来源或原因，也许有人可以看看并在可能的情况下向我提供一些反馈。

**错误信息：**

```
51
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 1
3 of Clubs, Diamonds, Hearts, Spades
    at javacards.Card.toString(Card.java:15)
    at javacards.CardRun.main(CardRun.java:15) 
```

**卡片运行类：**

```
public class CardRun {

public static void main(String[] args)
{
    Deck deck = new Deck();
    Card C;

    System.out.println(deck.getTotalCards());

    while(deck.getTotalCards() != 0)
    {
        C = deck.drawFromDeck();
        System.out.println(C.toString());
    }
} 
```

**卡类**

```
public class Card {
    private int card, suit;
    private static String[] suits = {"Clubs, Diamonds, Hearts, Spades"};
    private static String[] cards = {"Ace", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King"};

    Card(int suit, int card)
    {
        this.card = card;
        this.suit = suit;
    }

    public @Override String toString()
    {
        return cards[card] + " of " + suits[suit];
    }

    public int getCard()
    {
        return card;
    }

    public int getSuit()
    {
        return suit;
    }
} 
```

**甲板等级**

```
public class Deck {

private Card[]cards;
int i;

Deck()
{
    i = 51; 
    cards = new Card[52];
    int x = 0;
    for(int a=0; a<=3; a++)
    {
        for(int b=0; b<=12; b++)
        {
            cards[x] = new Card(a,b);
            x++;
        }
    }
}

public Card drawFromDeck()
{
    Random generator = new Random();
    int index = 0;

    index = generator.nextInt(i);
    Card temp = cards[index];
    cards[index] = cards[i];
    cards[i] = null;
    i--;
    return temp;
}

public int getTotalCards()
{
    return i;
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T17:52:56.370

这个数组：

```
private static String[] suits = {"Clubs, Diamonds, Hearts, Spades"}; 
```

仅包含一项-您可能的意思是：

```
private static String[] suits = {"Clubs", "Diamonds", "Hearts", "Spades"}; 
```

# jquery - 带有点击事件的jQuery和fancybox

> ID：15325465
> 
> 赞同：1
> 
> 时间：2013-03-10T17:50:40.297
> 
> 标签：jquery, fancybox

我只想知道是否可以在单击事件上创建一个包含隐藏 div 内容的幻想框。像这样当按下按钮时：

```
<input type="button" class="headerButtonNormal" id="test" value="Contact information" onmouseover=this.className="headerButtonHoover"
           onmouseout=this.className="headerButtonNormal" onclick="showFormInformation()"> 
```

执行这段 javascript 代码并以某种方式生成一个幻想框：

```
function showFormInformation()
{

} 
```

这是我要展示的 div：

```
<div id="inline">
Test fancybox
</div> 
```

在互联网上搜索时，fancybox 似乎不是为此而设计的……它更多地是为链接点击而设计的。我应该使用不同的框架吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:53:39.453

这就在 Fancybox 的驾驶室里！

做就是了：

```
$.fancybox({
    content: $('#inline')
}) 
```

或者正如肯尼迪指出的那样：

```
$.fancybox({
    href: '#inline'
}) 
```

您应该注意，隐藏的 div 的 css 路径在您的幻想箱内时会有所不同。

查看此答案（[https://stackoverflow.com/a/3819374/599075](https://stackoverflow.com/a/3819374/599075)）以了解另一种方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:05:02.543

尝试：

HTML：

```
<input type="button" class="headerButtonNormal" id="test" value="Contact information"
onmouseover=this.className="headerButtonHoover" onmouseout=this.className="headerButtonNormal">
<div id="inline">Test fancybox</div> 
```

jQuery：

```
$("#test").on("click", function () {
    showFormInformation();

    return false;
});

function showFormInformation() {
    $.fancybox({
        content: $("#inline").html()
    });
} 
```

[在这里](http://jsfiddle.net/5Ne4s/)提琴

您可能希望移动内联事件处理程序以使用 jQuery 绑定，因为您已经在使用该库。

# sharepoint - 以编程方式获取 SharePoint 快速搜索内容源

> ID：15325467
> 
> 赞同：1
> 
> 时间：2013-03-10T17:51:02.673
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-api, fastsearch

需要帮助来完成我的 C# 程序。我的农场中有四个内容源。如果内容源空闲，我需要获取所有内容源并开始完全爬网。

最好的方法是什么。请有人给我指出一篇关于 Sharepoint 搜索对象模型/快速搜索对象模型的好文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:08:53.787

您可以使用以下方式获取所有[ContentSourceCollection](http://msdn.microsoft.com/en-us/library/aa637145%28v=office.12%29.aspx)：

```
 /*
       Replace <SiteName> with the name of a site using the SSP
      */
        string strURL = "http://<SiteName>";
        SearchContext context;
        using (SPSite site = new SPSite(strURL))
        {
            context = SearchContext.GetContext(site);
        }
        Content sspContent = new Content(context);
        ContentSourceCollection sspContentSources = sspContent.ContentSources;

        foreach (ContentSource cs in sspContentSources)
        {
            Console.WriteLine("NAME: " + cs.Name + "  ID: " + cs.Id);
        } 
```

如果你想具体`ContentSource`比：

```
 string strContentSourceName = "FASTQuerySSA"; //which indicates the name of the content source to retrieve
   ContentSource cs = sspContentSources[strContentSourceName]; 
```

### 检查内容源的爬网状态值

```
 Console.WriteLine("Crawl Status = " + cs.CrawlStatus);
 Console.WriteLine("Crawl started at: " + cs.CrawlStarted.ToString());
 Console.WriteLine("Crawl completed at: " + cs.CrawlCompleted.ToString()); 
```

### 开始内容源的增量爬网

```
 cs.StartIncrementalCrawl();
   break; 
```

### 开始内容源的完整爬网

```
 cs.StartFullCrawl();
   break; 
```

### 暂停正在进行的爬网

```
 cs.PauseCrawl();
  break; 
```

### 停止内容源的爬网

```
 cs.StopCrawl();
  break; 
```

有关更多详细信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/aa679491%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/aa679491%28v=office.12%29.aspx)

## 更新：

下面是枚举场中所有搜索服务应用程序的一些代码。它确实包括所有这些，包括 FAST 内容和 FAST 查询：

```
 SearchService s = new SearchService("OSearch14", SPFarm.Local);
 foreach (SearchServiceApplication ssa in s.SearchApplications)
   {
      //do something with the proxy here
   } 
```

# c# - 如何在c#中为富文本框中的特定字符换行

> ID：15325468
> 
> 赞同：0
> 
> 时间：2013-03-10T17:51:08.073
> 
> 标签：c#, .net

当我们在richtextbox中输入如果单词未完成但行已完成时，整个单词将转到下一行。所以有人可以告诉我如何为特殊字符执行此操作。它通常发生在空格字符但我想要为另一个字符（Ascii 字符）制作它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:34:30.610

如果您选择的换行符被按下，请检查 KeyPress 事件：

```
private void richTextBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == '-')
    {
        int curserPosition = richTextBox1.SelectionStart;
        richTextBox1.Text += "-\r\n";
        richTextBox1.SelectionStart = curserPosition + 2;
        e.Handled = true;
    }
} 
```

如果将字符串粘贴到 RichTextBox 中，您将需要解析字符串并将字符替换为字符加上回车符和换行符：

```
string rtbText = string.Empty;
rtbText.Replace("-", "-\r\n"); 
```

如果您只想在当前行已满时中断，则必须按照以下行添加更多逻辑：

```
if (richTextBox1.Lines[richTextBox1.Lines.Length - 1].Length > 100)
{
    // parse the string for the last occurance of "-" and insert a CRLF behind it
} 
```

# php - 我想将 JSON 字符串加载到 Flexigrid 表中

> ID：15325469
> 
> 赞同：1
> 
> 时间：2013-03-10T17:51:15.493
> 
> 标签：php, jquery, mysql, json, flexigrid

我正在尝试使用 mysql resulset 将表创建为 JSON 字符串。我有 Flexigrid 所需的包和从同一路径中的另一个 php (table.php) 加载数据的功能。

我可以显示 Flexigrid 表，但没有显示数据。当我在浏览器中检查 table.php 时，我得到 JSON 字符串并且所有“看起来”都是正确的。如果有人可以帮助我了解我缺少什么，我分享我的代码？

表.php

```
<?php
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '123';
$db = 'nwind';
mysql_connect($dbhost,$dbuser,$dbpass) or die ('Error!');   
mysql_select_db($db) or die ('Check the Data Base');    
$query = 'SELECT orderId, customerId, employeeId, orderDate FROM orders';
$resultset = mysql_query ($query);  
if (!$resultset) {
$message  = 'Query error: ' . mysql_error() . '\n';
$message .= 'Search: ' . $query;
die($message);
}   
$json = array();
while ($object = mysql_fetch_object($resultset)) {
$json[] = array(
"Order_ID" => $object->orderId,
"Customer_ID" => $object->customerId,
"Employee_ID" => $object->employeeId,
"Order_Date" => $object->orderDate
);
}
echo json_encode($json);
?> 
```

例子.php

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title> 
<link rel="stylesheet" href="../flexigrid/css/flexigrid.pack.css" type="text/css"/>
<script type="text/javascript" src="../js/jquery-1.8.2.js"></script>
<script type="text/javascript" src="../flexigrid/js/flexigrid.pack.js"></script>
</head>
<body>
<div class="flexigrid">
<table id="flex"></table>
</div>      
<script type="text/javascript">
$("#flex").flexigrid({
url:'table.php',
dataType:'json',
colModel : [
{display: 'Order_ID',
name : 'orderId',
width : 60,
sortable : true,
align: 'center'},
{display: 'Customer_ID',
name : 'customerId',
width : 180,
sortable : true,
align: 'left'},
{display: 'Employee_ID',
name : 'employeeId',
width : 120,
sortable : false,
align: 'left'},
{display: 'Order_Date',
name : 'orderDate',
width : 130,
sortable : true,
align: 'left'}
],
sortname: 'orderId',
sortorder: 'asc',
usepager: true,
title: 'Orders',
useRp: true,
rp: 15,
showTableToggleBtn: true,
width: 700,
height: 200,
resizable: false
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T04:43:57.753

只需在 javascript 中检查您的 ColumnModel 即可。它肯定与您返回的数据不匹配。

# python - 将几个参数或字典传递给延迟函数（deferred.defer / pickle）？

> ID：15325472
> 
> 赞同：0
> 
> 时间：2013-03-10T17:51:31.410
> 
> 标签：python, google-app-engine, pickle

知道延迟任务一天会被调用上千次，那么以下两种方法（在带宽和使用 Google App Engine 的 cpu 方面）之间哪个更好？

因为我猜参数会被不同地腌制，并且 POST 请求大小以及延迟调用持续时间都会受到影响。

**第一种方法：**

```
from google.appengine.ext import deferred

def do_something_later(string1, string2, string3, string4):
    template_values = {
        'stuff': string1,
        'specs': string2,
        'misc1': string3,
        'misc2': string4,
    }
    # do something with template_values

deferred.defer(do_something_later, string1, string2, string3, string4) 
```

**方法二：**

```
from google.appengine.ext import deferred

def do_something_later(template_values):
    # do something with template_values

template_values = {
    'stuff': string1,
    'specs': string2,
    'misc1': string3,
    'misc2': string4,
}
deferred.defer(do_something_later, template_values) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:59:01.140

我无法想象在任何情况下这会有所作为。第一个和第二个选项之间的大小差异只有几个字节。即使每天运行数千次，您也只是在那段时间内谈论几 Kb。实在不值得操心。您应该使用对您的代码更有意义的任何一个。

# c# - Windows Phone 8 模拟器的网络跟踪有什么方法吗？

> ID：15325476
> 
> 赞同：0
> 
> 时间：2013-03-10T17:51:46.277
> 
> 标签：c#, windows-phone-8

我正在使用 WebClient 向`GET`PHP 文件发送请求（它将请求中的参数值写入文件）。我想测试我的模拟器是否真的发送了这样的请求。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:29:49.650

是的 Fiddler ( [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/) ) 可以为您跟踪网络流量。

但是，设置起来可能有点棘手。有关如何设置的更多详细信息，请参阅[http://www.fiddler2.com/fiddler/help/phone.asp 。](http://www.fiddler2.com/fiddler/help/phone.asp)

# iphone - 数组中的数据未显示在 pickerView 中

> ID：15325479
> 
> 赞同：1
> 
> 时间：2013-03-10T17:51:54.677
> 
> 标签：iphone, objective-c, ios6, nsarray, uipickerview

我正在尝试做单组件选择器示例开始 iOS 6 开发书，几乎每件事都正常，但数组中的数据没有显示在 pickerView 请帮助

这是我的 .h 文件

```
<UIPickerViewDataSource , UIPickerViewDelegate>
{
    IBOutlet UIPickerView *singlePicker;
    NSArray *chaNames;
}

@property (strong, nonatomic) IBOutlet UIPickerView *singlePicker;
@property (strong, nonatomic) NSArray *chaNames;

- (IBAction)buttonPressed:(id)sender;

@end 
```

这是 .m 文件

```
#import "SSPSingleComponentViewController.h"

@interface SSPSingleComponentViewController ()

@end

@implementation SSPSingleComponentViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.chaNames = @[@"Luke",@"Leia",@"Han",@"Chewbacca",@"Artoo", @"Threepio",@"lando"];
}

- (IBAction)buttonPressed:(id)sender {

    NSInteger row = [self.singlePicker selectedRowInComponent:0];
    NSString *selected = self.chaNames[row];
    NSString *title = [[NSString alloc]initWithFormat:@"You slected %@", selected];

    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"OutPut is : " message:title delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];

    [alert show];
}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}
-(NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component
{
    return [self.chaNames count];
}
-(NSString *)pickerView:(UIPickerView *)pickerView
            titleForRow:(NSInteger)row
           forComponent:(NSInteger)component
{
    return[self.chaNames objectAtIndex:row];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
@end 
```

请帮助提前谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:25:33.070

您需要按如下方式分配 NSArray 对象：

```
self.chaNames = [NSArray alloc] initWithObjects:@"Luke",@"Leia",@"Han",@"Chewbacca",@"Artoo", @"Threepio",@"lando"]; 
```

编辑：

您还需要设置 singlePicker.datasource = self; 和 singlePicker.delegate = self; 在 viewDidLoad 中或将其与 IB（委托和数据源）正确连接

```
-(void)viewDidLoad {

    self.chaNames = [NSArray alloc] initWithObjects:@"Luke",@"Leia",@"Han",@"Chewbacca",@"Artoo", @"Threepio",@"lando"];
} 
```

# linux - 在 Prolog 中测试包冲突

> ID：15325485
> 
> 赞同：1
> 
> 时间：2013-03-10T17:52:40.963
> 
> 标签：linux, recursion, dependencies, prolog, packages

这是一个 Prolog 程序，我想检查 Linux 包之间的依赖关系以及是否存在任何冲突。

```
dep(gnome1,gcc7).
confl(gcc7,gcc8).

% recursive chain dependency
depend(X,Y):- dep(X,Y).
depend(X,Y):- dep(X,Z), depend(Z,Y).

% conflict(X,Y) holds if X and Y depend
on two packages which conflict, conflict between two
packages should be a symmetric relation.

% my poor attempt
conflict(X,Y):- depend(X,A), depend(Y,B), (confl(A,B) | confl(B,A)). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:22:20.973

我认为您的方法几乎是正确的：

```
dep(gnome1,libc7).
dep(gnome1,gcc7).

dep(gnome2,gnome1).
dep(gnome2,gcc8).

confl(gcc7,gcc8).

% recursive chain dependency
depend(X,Y):- dep(X,Y).
depend(X,Y):- dep(X,Z), depend(Z,Y).

% conflict(X,Y) holds if X and Y depend
% on two packages which conflict, conflict between two
% packages should be a symmetric relation.

conflict(X,Y) :-
    depend(X,A), depend(Y,B),
    X @< Y,  % break symmetry
    (confl(A,B) ; confl(B,A)). 
```

我添加了一些（错误）配置来测试：

```
11 ?- conflict(X,Y).
X = gnome1,
Y = gnome2 ;
false. 
```

# cakephp - cakephp 2.x 中 Router::requestAction 的替代方法或从路由文件调用控制器操作

> ID：15325486
> 
> 赞同：1
> 
> 时间：2013-03-10T17:52:46.100
> 
> 标签：cakephp, routes, cakephp-1.3, cakephp-2.1

Router::requestAction 已在 cakephp 2.x 中删除我需要从路由页面调用该操作。实际上我想更新 url 的缓存，然后我想路由传入的页面。它在 1.3 中是可能的，但在更高版本中不再使用。系统检查路由设置时如何访问控制器功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:26:03.840

`Router::requestAction()` never existed even in 1.3\. The function you are referring to is probably `Object::requestAction()` and is available in 2.x also. But in 2.x `Router` doesn't extends `Object` anymore and hence the function is not available. Still I don't see why you need to call a controller action to update your url cache. I presume you have routes and/or url slugs stored in db which you need and for that you should have a model function which returns the required info.

# php - 检查是否在 PDO 中执行了 SQL 查询

> ID：15325487
> 
> 赞同：-2
> 
> 时间：2013-03-10T17:52:47.760
> 
> 标签：php, pdo

在 mysql_query 中，我们可以通过以下方式检查查询是否已执行：

```
$query = $yourdbconnection->fetch_array(mysql_query("SELECT * FROM tbl_name"));
if ($query){ // query is working }
else { // query is not working } 
```

在 PDO 中，我正在做这样的事情：

```
$query = $yourdbconnection->query("SELECT * FROM tbl_name");
$fetchquery = $query->fetchAll();
if ($fetchquery) { // query is working}
else { // query not working} 
```

我的代码有效吗？该声明到底在`if`做什么？它正在做同样的事情`mysql_query`吗？如何检查查询是否返回 0 行？

**[编辑]**

我发现这些解决方案是解决问题的方法

1.  使用`$stmt->fetch()`

    准备（$sql）；$stmt->执行（）；

    ```
    if ($data = $stmt->fetch()) {
        do {
            echo $data['model'] . '<br>';
        } while ($data = $stmt->fetch());
    } else {
        echo 'Empty Query';} 
    ```

    ?>
2.  添加另一个查询来计算行数看到[这个答案](https://stackoverflow.com/a/15325834/890669)

但是，我仍在寻找更好的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:22:54.650

要查看您的查询是否已执行，我建议您将 PDO 设置为异常模式，就像您的常识所建议的那样。你可以这样做：

```
$dbh = new PDO('mysql:host=localhost;dbname=db', 'user', 'pass');
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

关于检查查询是否在 PDO 中返回值的最佳方法，我建议只进行`SELECT COUNT(*) FROM table`查询，如下所示：

```
<?php
$query = $dbh->query('SELECT COUNT(*) FROM table');
if ($query->fetchColumn() != 0) {
    /* Query has result(s) */
    $query = $dbh->query('SELECT * FROM table');
    /* ... */
} else {
    /* Query has no results */
}
?> 
```

如果您还有其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T17:58:36.277

您的帖子中有 2 个问题。

> 1) 检查查询是否在 PDO 中返回值的最佳方法是什么？

检查返回值

> 2）如何检查PDO中是否执行了SQL查询

将 PDO 设置为异常模式，如[标签 wiki中所述](https://stackoverflow.com/tags/pdo/info)

顺便说一句，对于`"SELECT * FROM tbl_name"`您可能希望使用的查询，`fetchAll()`而不是`fetch()`.

# javascript - 如何捕获购物车的内容作为表单中的输入

> ID：15325489
> 
> 赞同：-2
> 
> 时间：2013-03-10T17:52:52.050
> 
> 标签：javascript, jquery

我如何将“shoppingCart”选择捕获为表单中的输入“formdesc”？

示例：`<ol id="shoppingCart" name="formdesc"></ol>`不起作用。

**HTML：**

```
...
<select id="apparelType">
    <option selected="selected" value="na">Select</option>
    <option value="0">T-Shirt</option>
    <option value="1">Shorts</option>
    <option value="2">Hat</option>
    <option value="3">Bag</option>
</select>

<label for="numb">Total: <span>$</span></label> 
<input id="numb" type="number" name="formbal" value="0.00" /> 
<input id="pretaxTotal" type="hidden" value="0.00" />
<ol id="shoppingCart"></ol>
</form> 
```

**JS：**

```
<script type="text/javascript">

    $('#apparelType').change(function(){
        var apparelType = $('#apparelType');
        var fmapVal = apparelType.val();

        if (fmapVal == 'na') {
          alert('Please select an apparel type.');
        } else {
          var appVal = [ 15, 20, 25, 30 ];
          var description = apparelType.find('option:selected').text();
          var cost = appVal[fmapVal];

          var pretaxTotal = parseInt($('#pretaxTotal').val());
          var subtotal = pretaxTotal + cost;
          var updatedTotal = ( subtotal * 1.06 ).toFixed(2);

          $('#pretaxTotal').val(subtotal);
          $('#numb').val(updatedTotal);

          $('#shoppingCart').append('<li>' + description + '</li>');
      }
  });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:00:55.390

您可以在表单中创建另一个隐藏字段，每次进行选择时，您可以将值 (0-3) 添加到隐藏字段并为每个项目添加分隔符。这样该字段包含类似这样的内容`0;3;1;2;3;`。稍后您可以在接收表单数据的代码中再次拆分它。

在您的 html 中，它看起来像这样：

```
<input id="techCart" type="hidden" value = ""/> 
```

在您的 JS 中，您可以添加：

```
$('#techCart').val($('#techCart').val() + ":" + apparelType.val()); 
```

在你的 else 部分结束时。

请参阅[http://jsfiddle.net/5frXU/1/](http://jsfiddle.net/5frXU/1/)进行快速测试。

# php - 在php中执行多列查询

> ID：15325491
> 
> 赞同：0
> 
> 时间：2013-03-10T17:52:57.080
> 
> 标签：php

我有一个有 2 个条目的表

拦截器,被拦截

我想执行以下查询

```
$statement = $conn->prepare('SELECT (blocked FROM blocks WHERE blocker = :myPlayerId) AND (blocker FROM blocks WHERE blocked=:myPlayerId)');
            $statement->bindParam(':myPlayerId', $myPlayerId, PDO::PARAM_INT);
            $statement->execute(); 
```

我想在我的 id 为 myPlayerId 的阻止和阻止列中获取值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:56:42.763

试试这个说法：
`SELECT blocked,blocker FROM blocks WHERE blocker=':myPlayerId' OR blocked=':myPlayerId' LIMIT 0,1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:04:50.787

如果您真的希望这两个在同一行，请尝试将您的查询更改为

```
SELECT * FROM
  (SELECT blocked FROM blocks WHERE blocker = :myPlayer)t1
  JOIN 
  (SELECT blocker FROM blocks WHERE blocked = :myPlayer)t2 
```

# c# - 如果我将 Main() 放在结构而不是类中，有什么区别？

> ID：15325493
> 
> 赞同：1
> 
> 时间：2013-03-10T17:53:01.637
> 
> 标签：c#

`Main()`如果我将静态方法放在结构而不是类中，有什么区别？

```
struct Program
{
    static void Main(string[] args)
    {
        System.Console.WriteLine("Hello World");
    }
} 
```

如果没有区别，为什么微软默认为其容器选择一个类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:55:54.897

没有任何区别。
（除了结构和类之间的普通区别）

如果您不创建该类型的任何实例，则应将其放在`static class`.
如果你这样做，你应该根据类型的实际使用情况来决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:56:55.307

## 从应用程序状态的观点来看没有*区别。*

如果您查看 IL 代码。

*   如果`struct`程序类扩展自`System.ValueType`，而`class`程序扩展自`System.Object`

为了`class`

```
.class private auto ansi beforefieldinit Program
    extends [mscorlib]System.Object
{
    .method public hidebysig specialname rtspecialname instance void .ctor() cil managed
    {
        .maxstack 8
        L_0000: ldarg.0 
        L_0001: call instance void [mscorlib]System.Object::.ctor()
        L_0006: ret 
    }

    .method private hidebysig static void Main(string[] args) cil managed
    {
        .maxstack 8
        L_0000: ldstr "Hello World"
        L_0005: call void [mscorlib]System.Console::WriteLine(string)
        L_000a: ret 
    }

} 
```

为了`struct`

```
.class private sequential ansi sealed beforefieldinit Program
    extends [mscorlib]System.ValueType
{
    .method private hidebysig static void Main(string[] args) cil managed
    {
        .entrypoint
        .maxstack 8
        L_0000: ldstr "Hello World"
        L_0005: call void [mscorlib]System.Console::WriteLine(string)
        L_000a: ret 
    }

} 
```

# mysql - 如何将 MS SQL 导出到 MySql 表中？

> ID：15325505
> 
> 赞同：0
> 
> 时间：2013-03-10T17:53:46.260
> 
> 标签：mysql, sql

如何将大型表从 MS SQL 导出到 MySql 表中。请注意，桌子很大。

我尝试了 MySql Workbench 中的 mysql 迁移工具包，但我无法建立到 SQL 服务器的连接

请告诉我最好的方法来做到这一点？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:44:33.310

一种方法（如果确实是大量数据和大量表）：在 SQL Server 中创建链接服务器并使用它将数据推送到 MySQL。

[本文提供了创建链接服务器的分步说明。](http://www.packtpub.com/article/mysql-linked-server-on-sql-server-2008)

然后像这样对您的表运行查询：

```
INSERT INTO OPENQUERY (<LINKED SERVER>, 'SELECT * FROM MySQL_Table') 
SELECT * FROM dbo.SQL_Table 
```

# c# - TcpClient.Close() 仅适用于 Thread.Sleep()

> ID：15325506
> 
> 赞同：7
> 
> 时间：2013-03-10T17:53:52.400
> 
> 标签：c#, tcp, tcpclient, thread-sleep

我有一个简单的服务器，它从客户端获取字符串并将其打印在屏幕上。我也有简单的客户端，发送数据并关闭：

```
static void Main()
{
        var client = new TcpClient("localhost", 26140);

        var stream = client.GetStream();
        Byte[] data = System.Text.Encoding.UTF8.GetBytes("CALC qwer"); 
        stream.Write(data, 0, data.Length);
        stream.Close();
        client.Close();
        //Thread.Sleep(100);
} 
```

并且使用未注释的字符串 'Thread.Sleep(100)' 它可以正常工作。但是在评论时，有时（5-10 次运行中的 1 次）客户端不发送字符串。观察wireshark和netstat我注意到客户端发送SYN，ACK包，建立连接并退出而不发送任何东西并且没有关闭套接字。

谁能解释这种行为？为什么睡眠有帮助？我究竟做错了什么？

升级版：

使用此示例代码，在关闭之前添加 flush() 确实有效，感谢 Fox32。

但之后我回到了我的初始代码：

```
var client = new TcpClient("localhost", 26140);
client.NoDelay = true;
var stream = client.GetStream();
var writer = new StreamWriter(stream);
writer.WriteLine("CALC qwer");
writer.Flush();
stream.Flush();
stream.Close();
client.Close(); 
```

即使使用 NoDelay，它也不起作用。这很糟糕 - 通过网络流使用 StreamWriter？

升级版：

这是服务器代码：

```
static void Main(string[] args)
    {
        (new Server(26140)).Run();
    } 
```

在服务器类中：

```
public void Run()
    {
        var listener = new TcpListener(IPAddress.Any, port);
        listener.Start();
        while (true)
        {
            try
            {
                var client = listener.AcceptTcpClient();
                Console.WriteLine("Client accepted: " + client.Client.RemoteEndPoint);
                var stream = client.GetStream();
                stream.ReadTimeout = 2000;
                byte[] buffer = new byte[1000];
                stream.Read(buffer, 0, 1000);
                var s = Encoding.UTF8.GetString(buffer);
                Console.WriteLine(s);
            }
            catch (Exception ex)
            {
                Console.WriteLine("ERROR! " + ex.Message);
            }
        }
    } 
```

升级版：

甚至添加 Sleep(1) 会使同时运行的 30-50 个客户端中的 1 个发生崩溃。添加 Sleep(10) 似乎可以完全解决它，我无法捕捉到任何崩溃。不明白，为什么socket需要这几毫秒才能正确关闭。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T18:07:07.040

它`TcpClient`使用的是[Nagle 算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)，并在通过网络发送数据之前等待更多数据。如果您将套接字关闭到快速，则不会传输任何数据。

您有多种方法可以解决此问题：

`NetworkStream`有一种刷新流内容的`Flush`方法（我不确定这个方法是否对 MSDN 的评论有任何作用）

禁用 Nagle 算法：设置[`NoDelay`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.nodelay.aspx)为`TcpCLient`true。

最后一个选项是设置[`LingerState`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.lingerstate.aspx). 方法文档指出，`TcpClient`在调用时使用[`Close`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.close.aspx)`LingerState``Close`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T18:06:41.237

在几乎所有情况下，您都应该调用`Shutdown`a`Socket`或`TcpClient`在处理它之前。粗鲁地处理会破坏连接。

您的代码基本上包含与 TCP 堆栈的竞争条件。

设置`NoDelay`也是解决此问题的方法，但会损害性能。调用`Flush`恕我直言仍然会导致无序关闭。不要这样做，因为它们只是通过隐藏症状来掩盖问题的黑客。打电话`Shutdown`。

我想强调`Shutdown`的是，被调用`Socket`是我所知道的**唯一有效的解决方案。**甚至`Flush`只是将数据强制到网络上。由于网络中断，它仍然可能丢失。`Close`它在被调用后不会被重新传输，因为这`Close`是对套接字的粗鲁杀戮。

不幸的是， [TcpClient 有一个错误](http://support.microsoft.com/kb/821625)，它迫使您转到底层 Socket 以将其关闭：

```
tcpClient.Client.Shutdown();
tcpClient.Close(); 
```

根据 Reflector 的说法，如果你曾经访问过`GetStream`这个问题，并且 Close 不会关闭底层套接字。据我估计，这个错误是因为开发人员并不真正了解`Shutdown`. 很少有人知道，而且许多应用程序因此而出现故障。[一个相关的问题。](https://stackoverflow.com/questions/425235/how-to-properly-and-completely-close-reset-a-tcpclient-connection)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T18:48:57.327

在您的服务器端代码中，您只调用`Read()`一次，但您不能假设在调用 read 时数据可用。您必须继续循环阅读，直到没有更多数据可用。请参阅下面的完整示例。

我试图用最少的代码重现您的问题，但无法做到。服务器每次都会打印出客户端消息。没有特殊设置，例如`NoDelay`and 没有明确的`Close()`or `Flush()`，只是`Using`确保所有资源都被正确处理的语句。

```
class Program
{
    static int port = 123;
    static string ip = "1.1.1.1";
    static AutoResetEvent waitHandle = new AutoResetEvent(false);

    static void Main(string[] args)
    {
        StartServer();
        waitHandle.WaitOne();

        for (int x=0; x<1000; x++)
        {
            StartClient(x);
        }

        Console.WriteLine("Done starting clients");
        Console.ReadLine();
    }

    static void StartClient(int count)
    {
        Task.Factory.StartNew((paramCount) =>
        {
            int myCount = (int)paramCount;

            using (TcpClient client = new TcpClient(ip, port))
            {
                using (NetworkStream networkStream = client.GetStream())
                {
                    using (StreamWriter writer = new StreamWriter(networkStream))
                    {
                        writer.WriteLine("hello, tcp world #" + myCount);
                    }
                }
            }
        }, count);
    }

    static void StartServer()
    {
        Task.Factory.StartNew(() => 
        {
            try
            {
                TcpListener listener = new TcpListener(port);
                listener.Start();

                Console.WriteLine("Listening...");
                waitHandle.Set();

                while (true)
                {
                    TcpClient theClient = listener.AcceptTcpClient();

                    Task.Factory.StartNew((paramClient) => {
                        TcpClient client = (TcpClient)paramClient;

                        byte[] buffer = new byte[32768];
                        MemoryStream memory = new MemoryStream();
                        using (NetworkStream networkStream = client.GetStream())
                        {
                            do
                            {
                                int read = networkStream.Read(buffer, 0, buffer.Length);
                                memory.Write(buffer, 0, read);
                            }
                            while (networkStream.DataAvailable);
                        }

                        string text = Encoding.UTF8.GetString(memory.ToArray());
                        Console.WriteLine("from client: " + text);
                    }, theClient);
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e);
            }
        }, TaskCreationOptions.LongRunning);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:02:24.760

升级版：

我已经在几台计算机上测试了这个错误，没有任何崩溃。似乎这是我计算机上的本地错误。

ENDOFPD

因此，我发现了有关重现此错误的信息。@Despertar - 您的代码运行良好。但这不是重现此错误的条件。在客户端，您需要发送数据并在它之后退出。在您的代码中，许多客户端正在发送数据，并且毕竟应用程序正在关闭。

这就是我在我的计算机上测试它的方式：我有服务器（只接受连接并打印传入数据）、客户端（只在结束退出时发送数据）和正在运行的实用程序（运行客户端 exe 几次）。

所以，我启动服务器，将运行实用程序复制到客户端文件夹并运行它。运行 ulility 启动 150 个连接到服务器的客户端，其中 5-10 个死掉（我在服务器控制台中看到错误）。并且在客户端上取消注释 Thread.Sleep() 效果很好，没有错误。

任何人都可以尝试重现此版本的代码吗？

客户端代码：

```
private static void Main(string[] args)
{
try
{
    using (TcpClient client = new TcpClient(ip, port))
    {
        using (NetworkStream networkStream = client.GetStream())
        {
            using (StreamWriter writer = new StreamWriter(networkStream))
            {
                writer.WriteLine("# hello, tcp world #");
                writer.Flush();
            }
            networkStream.Flush();
            networkStream.Close();
        }
        client.Close();
        //Thread.Sleep(10);
     }
     }
     catch (Exception ex)
     {
         Console.WriteLine(ex.Message);
     }
} 
```

代码，多次运行客户端（在exe文件中编译并放在客户端的exe附近 - 此代码将一一运行许多客户端）：

```
static void Main(string[] args)
{
    string path = "YOU_CLIENT_PROJECT_NAME.exe";
    for (int i = 0; i < 150; i++ )
    {
        Console.WriteLine(i);
        Process.Start(path);
        Thread.Sleep(50);
    }
    Console.WriteLine("Done");
    Console.ReadLine();
} 
```

（不要忘记将路径更改为正确的 exe 文件名）

服务器代码：

```
class Program
{

    static int port = 26140;
    static AutoResetEvent waitHandle = new AutoResetEvent(false);

    static void Main(string[] args)
    {
        StartServer();
        waitHandle.WaitOne();
        Console.ReadLine();
    }

    static void StartServer()
    {
        Task.Factory.StartNew(() =>
        {
            try
            {
                TcpListener listener = new TcpListener(port);
                listener.Start();

                Console.WriteLine("Listening...");
                waitHandle.Set();

                while (true)
                {
                    TcpClient theClient = listener.AcceptTcpClient();

                    Task.Factory.StartNew(paramClient =>
                    {
                        try
                        {
                            TcpClient client = (TcpClient) paramClient;
                            byte[] buffer = new byte[32768];
                            MemoryStream memory = new MemoryStream();
                            using (NetworkStream networkStream = client.GetStream())
                            {
                                networkStream.ReadTimeout = 2000;
                                do
                                {
                                    int read = networkStream.Read(buffer, 0, buffer.Length);
                                    memory.Write(buffer, 0, read);
                                } while (networkStream.DataAvailable);
                                string text = Encoding.UTF8.GetString(memory.ToArray());
                            }
                        }
                        catch (Exception e)
                        {
                            Console.WriteLine("ERROR: " + e.Message);
                        }
                    }, theClient);
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e);
            }
        }, TaskCreationOptions.LongRunning);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T05:01:19.217

我已经尝试过代码，在几台计算机上重现了这个错误。没有人崩溃。好像是我的本地计算机错误。

感谢大家试图帮助我。

无论如何，这太奇怪了。如果我能找出为什么我的电脑上存在这个错误，我会写下来。

# android - 如何将 SQLite 中的数据存储在 2D Arraylist 中？

> ID：15325508
> 
> 赞同：1
> 
> 时间：2013-03-10T17:54:25.427
> 
> 标签：android, sqlite, arraylist

我需要从我的 SQLite 数据库中获取所有信息并将其存储在数组列表中，或者如果有更好的方法，则以其他方式存储。我的数据库有 6 列，这是我尝试提取数据并将其存储在 Arraylist 索引中的方式；

```
db.open();
    for(int i = 0; i<= amount; i++)
    {

        Cursor c = db.fetchAllNotes();
        if (c.moveToFirst())
        {
            do {      
                mid = c.getString(0);
                place =c.getString(1);
                info =c.getString(2);
                coordl1 =c.getString(3);
                coordl2 =c.getString(4);
                colour =c.getString(5);

                 //code here to store each string in an Array index
                mapSetupList.add(mid,place,info,coordl1,coordl2,colour);

            }while (c.moveToNext());
        }
    }
    db.close(); 
```

我知道如何创建一个 Array 列表，但我不知道如何在一个索引中存储 6 个字符串，我尝试了 2D Arraylist，但这似乎太复杂了，我认为这不是正确的方法. 有没有更好的方法来做到这一点，如果没有，如何用 Arraylists 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:02:06.403

如何创建一个自己定义的对象，将所有列包装为属性？

```
public class Foo {

   private int id; // alternative to id column in db
   private String type;
   private String date;
   ...

   public void setId(int id) { // setter
      this.id = id;
   }

   public int getId() { // getter
      return this.id;
   }
} 
```

然后创建`ArrayList<Foo>`，现在您可以简单地将**SQLite**中的数据保存到 ArrayList 中：

```
public void store() {
   Cursor c = null; // first declare and initialise appropriate objects
   ArrayList<Foo> foos = new ArrayList<Foo>();
   Foo member = null;
   try {
      c = db.rawQuery(query, whereArgs); // perform query
      if (c.moveToFirst()) { // move cursor to first row because implicitly
         do { // cursor is position before first row
            member = new Foo(); // for each row create new Foo
            member.setId(c.getInt(0)); // initialise properties
            member.setType(c.getString(1));
            member.setDate(c.getString(2));
            ...
            foos.add(member); // add Foo into ArrayList
         } while (c.moveToNext()); // it moves cursor to next row
      }
   }
   finally { // in finally block release datasource(s), cursor(s)
      if (c != null) {
         c.close();
      }
      if (db != null && db.isOpen()) {
         db.close();
      }
   }
} 
```

**注意：**我推荐这种方法。它清晰、安全、有效。不要忘记在工作完成后释放任何数据源、游标以避免通常抛出的异常，例如游标已打开、数据库已关闭等。

## 更新：

> 我不确定类示例，带有定义的对象和getter和setter，在我尝试这个之前你能详细说明一下吗？谢谢！！

因此，getter 和 setter 是“一般”用于操作 Object 的属性以保留**封装**的方法——在 OOP 中非常重要。Setter 用于初始化属性，getter 用于获取 Object 的属性。

现在我为您编写了将数据从 sqlite 存储到 ArrayList 的方法示例。有这一行：

```
member.setId(c.getInt(0)); 
```

**Foo Object**的`setId(c.getInt(0))`setter以一个 Integer 作为参数，现在使用此方法，您将使用来自的数据填充 id 值。**`Cursor`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:01:00.447

创建一个包含您喜欢的所有信息的类，然后创建它的一个实例，然后将该实例添加到 ArrayList。**

# php - PHP：一种通过循环排序并在查询后排除某些条目的方法

> ID：15325509
> 
> 赞同：6
> 
> 时间：2013-03-10T17:54:25.543
> 
> 标签：php, mysql

我正在创建一个显示数据库表中的项目的系统，具体取决于它们是否可用。

我有两张桌子：

预订：

```
----------------------------------------------------------------------
| ResID | CarID | UserID | startTime | startDate | endTime | endDate  |
----------------------------------------------------------------------
|   1   |   4   |    4   | 13:00:00  |2013-04-21 |13:00:00 |2013-04-29| 
```

和汽车：

```
-------------------------------------------
| CarID  |  make | model | serial | image |
-------------------------------------------
|   1    | Honda | civic | ky675  | 1.png | 
```

因此，当用户访问一个页面时，他们输入一个开始日期和结束日期，然后在运行查询以检查该汽车是否在该日期可用后显示汽车列表。

所以我想出了这个查询。

```
$carstring = mysql_query("SELECT * FROM cars 
                            {$statement} 
                            AND deleted = 'no' 
                            AND carID NOT IN (
                              SELECT carID FROM reservations 
                                WHERE startDate = '".$sqlcoldate."'
                            ) 
                          GROUP BY model"); 
```

这样做是从数据库中选择所有汽车，然后排除作为子查询的数组结果的汽车 ID 数组。其余的汽车，它按型号分组并在循环中显示它们，如下所示：

```
$getcars = $carstring;
while($searchcars = mysql_fetch_array($getcars)) {

 **some HTML showing car imag and make etc etc**

 } 
```

这“有效”。例如，如果我有 5 辆 Honda Civic，并且所有这些都在用户输入的日期被保留，他们的 carID 将被排除在循环之外。然而，它根本不会在列表中显示本田思域，因为它们都将消失。

我需要一种方法来判断我是否在某个日期用完了某种型号的汽车。所以我有三个思域，我知道三个被排除在外，所以我展示了一个，但它无法预订。

我认为解决方案是删除子查询。所以首先我运行：

```
$nonavail = mysql_query("SELECT carID FROM reservations 
                         WHERE startDate = '".$sqlcoldate."'");
while($noavailrow = mysql_fetch_array($nonavail)) { 
```

这给了我需要排除的一系列汽车 ID，然后我可以抓取所有汽车并使用 PHP 和我的汽车 ID 对它们进行排序。但我现在迷路了……

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T18:35:44.203

应该可以这样做：

```
SELECT    c.make, c.model, count(c.carid) - count(x.resid) available_cars
FROM      cars c
LEFT JOIN (
   SELECT   r.carid, r.resid
   FROM     reservations r 
   WHERE    ? BETWEEN r.startdate AND r.enddate) x ON x.carid = c.carid
WHERE     c.deleted = 'no'
GROUP BY  c.make, c.model
ORDER BY  c.make, c.model 
```

内部子查询将仅选择开始时间在给定时间之前和结束时间之后的那些预订（由 表示`?`）。外部查询然后选择所有汽车并尝试找到属于每辆车的预订（可以有一个或没有，但永远不会超过一个，因为我猜你不能同时为同一辆车预订多个时间）。最后，结果集按`make`和`model`对每个车辆的总数进行分组，并计算预订数量，差值是可用车辆的数量。

这种方法利用了`COUNT()`只计算**非** `NULL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:50:41.763

我将提供一个 PHP 解决方案。SQL 可能是性能更好的选项，所以这实际上只是为了给线程添加一些多样性。

这是我如何理解这个问题。您想要显示可用的汽车以及每个不可用的车型至少有一辆汽车。IE：

*   福特金牛座 - 可用
*   福特金牛座 - 可用
*   本田思域 - 不可用
*   现代奏鸣曲-Avaialble

...

```
// Keep track of the models so we know which ones we have already processed
$models = array();

// Filter the array of results
array_filter( $results, function ( $result ) use ( &$models )
{
    // If the model has not yet been represented, add the model to the models 
    // array and return true, preserving this item in the array
    if ( !in_array( $result->model, $models )
    {
        $models[] = $result->model;
        return true;
    }

    // If the car is in the excluded list, remove this item from the array
    if ( in_array( $result->car_id, $excluded_car_ids ) )
    {
        return false;
    }

    return true;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:08:13.927

这里给出分离可用和不可预订的汽车列表的解决方案。它对您非常有用。

获取可供预订的车辆列表。IE）。**可预订特定日期间隔..**

```
select *,'available' as status from cars where CarID not in(SELECT CarID FROM reservations
WHERE UNIX_TIMESTAMP( CONCAT( startDate,  ' ', startTime ) ) <= $startTimestamp
AND UNIX_TIMESTAMP( CONCAT( endDate,  ' ', endTime ) ) >= $endTimestamp)WHERE deleted = 'no' group by make,model order by make,model asc 
```

获取不可预订的汽车列表。IE）。**已为特定日期间隔保留..**

```
select *,'not available' as status from cars where CarID not in(SELECT CarID FROM reservations
WHERE UNIX_TIMESTAMP( CONCAT( startDate,  ' ', startTime ) ) <= $startTimestamp
AND UNIX_TIMESTAMP( CONCAT( endDate,  ' ', endTime ) ) >= $endTimestamp)WHERE deleted = 'no' group by make,model order by make,model asc 
```

注意：将日期转换为时间戳格式..

```
$startDateTime="21/04/2013 13:00:00"; //date example
list($sDay, $sMonth, $sYear, $sHour, $sMinute,$sSeconds) = split('[/ :]', $startDateTime); 
$startTimestamp=mktime($sHour, $sMinute,$sSeconds, $sMonth, $sDay, $sYear);

$endDateTime="29/04/2013 13:00:00"; //date example
list($eDay, $eMonth, $eYear, $eHour, $eMinute,$eSeconds) = split('[/ :]', $endDateTime); 
$endTimestamp=mktime($eHour, $eMinute,$eSeconds, $eMonth, $eDay, $eYear); 
```

代码如下：

```
<?php
$startDateTime="21/04/2013 13:00:00"; //date example
list($sDay, $sMonth, $sYear, $sHour, $sMinute,$sSeconds) = split('[/ :]', $startDateTime); 
$startTimestamp=mktime($sHour, $sMinute,$sSeconds, $sMonth, $sDay, $sYear);

$endDateTime="29/04/2013 13:00:00"; //date example
list($eDay, $eMonth, $eYear, $eHour, $eMinute,$eSeconds) = split('[/ :]', $endDateTime); 
$endTimestamp=mktime($eHour, $eMinute,$eSeconds, $eMonth, $eDay, $eYear);

$carstringAvailable = mysql_query("select *,'available' as status from cars 
                            WHERE CarID not in(
                                SELECT CarID FROM reservations
                                WHERE UNIX_TIMESTAMP( CONCAT( startDate,  ' ', startTime ) ) <= $start_Timestamp
                                  AND UNIX_TIMESTAMP( CONCAT( endDate,  ' ', endTime ) ) >= $end_Timestamp
                                  )
                            AND deleted = 'no' group by make,model order by make,model asc");

$getcarsAvailable = $carstringAvailable;
?>
<h3>Available cars for reservation</h3>
<table>
<tr>
    <th>CarID</th><th>make</th><th>model</th><th>serial</th><th>image</th><th>status</th>
</tr>
<?php 
if(mysql_num_rows($getcarsAvailable)>0)
{
    while($searchcarsAvail = mysql_fetch_array($getcarsAvailable)) 
    {
    ?>
    <tr>
        <td><?php echo $searchcarsAvail['CarID'];?></td>
        <td><?php echo $searchcarsAvail['make'];?></td>
        <td><?php echo $searchcarsAvail['model'];?></td>
        <td><?php echo $searchcarsAvail['serial'];?></td>
        <td><?php echo $searchcarsAvail['image'];?></td>
        <td><?php echo $searchcarsAvail['status'];?></td>
    </tr>
    <?php
    } 
}
else 
{
?>
    <tr>
        <td colspan='5'>No records found</td>
    </tr>
<?php 
}
?>
</table>

<?php 
$carstringUnAvailable = mysql_query("select *,'available' as status from cars 
                            WHERE CarID in(
                                SELECT CarID FROM reservations
                                WHERE UNIX_TIMESTAMP( CONCAT( startDate,  ' ', startTime ) ) <= $start_Timestamp
                                  AND UNIX_TIMESTAMP( CONCAT( endDate,  ' ', endTime ) ) >= $end_Timestamp
                                  )
                            AND deleted = 'no' group by make,model order by make,model asc");

$getcarsUnAvailable = $carstringUnAvailable;
?>
<h3>Already Reserved cars list</h3>
<table>
<tr>
    <th>CarID</th><th>make</th><th>model</th><th>serial</th><th>image</th><th>status</th>
</tr>
<?php
if(mysql_num_rows($getcarsUnAvailable)>0)
{ 
    while($searchcarsUnAvail = mysql_fetch_array($getcarsUnAvailable)) 
    {
    ?>
    <tr>
        <td><?php echo $searchcarsUnAvail['CarID'];?></td>
        <td><?php echo $searchcarsUnAvail['make'];?></td>
        <td><?php echo $searchcarsUnAvail['model'];?></td>
        <td><?php echo $searchcarsUnAvail['serial'];?></td>
        <td><?php echo $searchcarsUnAvail['image'];?></td>
        <td><?php echo $searchcarsUnAvail['status'];?></td>
    </tr>
    <?php 
    }
 }
 else 
{
?>
    <tr>
        <td colspan='5'>No records found</td>
    </tr>
<?php 
}
?>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:40:18.607

```
$carstring = mysql_query("SELECT *,(SELECT count(CarID) FROM reservations WHERE reservations.CarID=cars.CarID AND '".$sqlcoldate."' NOT BETWEEN startDate AND endDate ) as availability FROM cars {$statement} AND deleted = 'no' GROUP BY model"); 
```

上面的查询将为您提供带有附加字段（可用性）的汽车列表，其中包含可用特定型号的汽车数量，如果汽车不可用，该字段将仅显示零。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T17:54:59.527

选择品牌和型号的“主列表”，然后加入可用的内容。这可能不是最优化的语法，但很清楚：

```
select Models.*, Available.* from (select make, model from Cars 
GROUP BY make, model) as Models
LEFT JOIN (SELECT * FROM Cars WHERE CarID NOT IN (1,3,6)) as Available on Models.model = Available.model 
```

您会注意到，出于测试目的，我删除了排除保留汽车的逻辑并将其替换为 NOT IN。但它很容易让您重新插入。

见[http://sqlfiddle.com/#!2/266db/12/0](http://sqlfiddle.com/#!2/266db/12/0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T21:02:43.877

我有一个类似的问题要解决。

首先，您必须了解您要在包含您预订的汽车的数据库中寻找未预订的汽车......

您正在寻找不在您的数据库中的信息！
但是你可以从你所拥有的东西中扣除它。

为了简化比较挑战，您应该将您的日期和时间（在您的预订表和两个用户标准 - 开始和结束 - 中）加入“时间戳”格式......将所有现有预订与用户请求。有关格式信息，
请参见：[http ://db.apache.org/derby/docs/10.7/ref/rrefsqlj27620.html。](http://db.apache.org/derby/docs/10.7/ref/rrefsqlj27620.html)

因此，您必须使用您的用户数据（开始和结束时间戳）查找您预订的汽车，并将它们从所有可能的汽车中过滤掉。

                  用户开始 用户结束
                         | |
案例A |--------| | |
案例B |--|--------| |
案例C | |-----------| |
案例 D | |-------|---|
案例E | | |-----------|
案例 F |--------|-----------------|----------------|
                         | |

您需要案例 A 和 E。

此脚本应找出案例 B、C、D 和 F... 并将所有 CarID 放入我称为“NotAvaibleCars”的数组中。
它忘记了案例 A 和 E（过去/完成的预订和未来的预订）。

然后，您必须检查每辆车的 ID 是否为“inArray”，然后才能在结果页面上显示。

代码：

```
$allReservedCars = mysql_query("SELECT * from reservation") or die(mysql_error());

$allCars = mysql_query("SELECT * from cars") or die(mysql_error());

$NotAvailableCars = array();

$userStart = $_POST['yourClientStartCriteria'];
$userEnd = $_POST['yourClientEndCriteria'];

while ($allCarsCheck = mysql_fetch_array($allReservedCars)){
$TimestampStart = $allCarsCheck['startDate'] . ' ' . $allCarsCheck['startTime'];
$TimestampEnd = $allCarsCheck['startDate'] . ' ' .$allCarsCheck['startTime'];

if (
    (($TimestampStart>$userStart)&&($TimestampStart<$userEnd)) ||   // if cases C or D (A reservation start already exist for this car between userStart and userEnd)
    (($TimestampEnd>$userStart)&&($TimestampEnd<$userEnd)) ||       // if case B or C (A reservation end already exist for this car between userStart and userEnd)
    (($TimestampStart<$userStart)&&($TimestampEnd>$userEnd))        // if case F (A reservation that wraps userStart and userEnd already exist for this car)
   ) {

   array_push($NotAvailableCars, $allCarsCheck['CarID']); // You have now an array of the NOT available cars.

   }

}

while($searchcars = mysql_fetch_array($allcars)) {

 if (inArray($searchcars['CarID'],$NotAvailableCars)){
  //Do nothing!
 }
 else{
 // Your code to show this available car.
 }
} 
```

;)

好的... 8 小时后我再次阅读我的解决方案...
我发现我错过了主要问题：在没有可用于品牌/型号组合的汽车时展示一些东西。

我研究了它......并且有一个......一种解决方案。
但我希望有一个更好的......这就是我现在所能看到的。

```
$distinctMakeModel = mysql_query("SELECT distinct make, model from cars");
while ($row = mysql_fetch_array($distinctMakeModel)){
  array_push($CarModelArray, $row['make'] . ' -splitter- ' . $row['model']) // Array with all make/model combination

}

$CarQtyArray = array();
for($i=0;$i<$CarModelArray.length;$i++){
  $thisCar = explode(' -splitter- ',$carModelArray[$i]);

  $ThisCarQty = mysql_query("SELECT count(*) from cars where make=$thisCar[0] AND model=$thisCar[1]");
  $thiscar = mysql_fetch_array($ThisCarQty);
  array_push($CarQtyArray, $thiscar[0];     //So now you have an array of quantity with indexes matching the $carModelArray indexes.
} 
```

您现在有一个汽车品牌/型号数组和一个具有匹配索引的数量数组。

下一段代码将创建一个具有相同匹配索引的不可用数量数组。

```
for($i=0;$i<$CarModelArray.length;$i++){
  $thisCar = explode(' -splitter- ',$carModelArray[$i]);
  $NotAvailableCarQtyArray[$i] = 0;

  for($j=0;$j<$NotAvailableCars.length;$j++){
    $thisNotAvailable = mysql_query("Select count(*) where make=$thisCar[$i] AND model=$thisCar[$i] AND carID=$NotAvailableCars[$j]");
    $isThisTheModel = mysql_fetch_array($thisNotAvailable);
    if ($isThisTheModel<>'0'){
      $NotAvailableCarQtyArray[$i] ++;
    }

  }
} 
```

所以现在...
在 $CarModelArray[0] 中，假设您拥有本田思域。
在 $CarQtyArray[0] 中，您有 3个。
在 $NotAvailableCarQtyArray[0] 中，您有 3 个（全部消失了！）。

```
for ($i=0;$i<$CarModelArray.length;$i++){
  if ($CarQtyArray[$i]==$NotAvailableCarQtyArray[$i]){
    echo $CarModelArray[$i] . ' are not available.<br>';
  }
} 
```

这需要 waaayyy 在这里进行许多查询！！！
将 SQL 查询放入循环中并不是一个好主意。
但是，再次......我不知道该怎么做。

这就像开始和结束搜索之间的汽车数量乘以您拥有的品牌/型号的数量。

但它应该工作......
至少我试过了。
;)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-17T18:59:35.563

据我了解，您想要获取可用汽车列表和按“制造”和“模式”分组的不可用汽车分支列表（例如：本田 Civid、福特 Escape）。因此，我认为您进行 2 个查询是正确的，但第二个查询似乎不正确。

第一个查询是您的第一个查询，它无法检索不可用的汽车。

第二个查询是通过'make'和'model'获取所有不可用的汽车组。这个查询看起来像：`$nonavail = mysql_query("SELECT carID FROM reservations WHERE startDate = '".$sqlcoldate."' GROUP BY 'make', 'type'");`

获得 2 个数组后，您可以正确操作并在布局上显示它们。请记住，第一个是可用的汽车，第二个是不可用的汽车分支。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-12T18:33:47.063

此查询检查预订的开始日期或结束日期是否发生在新客户需要汽车的期间。它总结了可用的汽车。

```
SELECT c.model, ... ,
  SUM(
    CASE WHEN (r.startDate BETWEEN $desiredstart AND $desiredend) OR
              (r.endData BETWEEN $desiredstart AND $desiredend)  
         THEN 0
         ELSE 1 END) as num_available
FROM cars c 
  LEFT JOIN reservations r 
  ON (c.CarID=r.CarID)
WHERE
  r.deleted = 'no' (
    SELECT carID FROM reservations 
       WHERE 
         AND
 ) 
GROUP BY c.model 
```

# c# - Gridview 保持编辑模式

> ID：15325512
> 
> 赞同：0
> 
> 时间：2013-03-10T17:54:56.130
> 
> 标签：c#, asp.net

我的 Gridview 拒绝退出编辑模式。当我点击更新链接时，一切正常，就正在更新的数据库而言，但 Gridview 行仍处于编辑模式。当我按下取消按钮时，Gridview 会反映新信息。为什么即使将 EditIndex 设置为 -1，该行仍处于编辑模式？

我确定这确实是一种补救措施，但我找不到任何帮助让 gridview 退出编辑模式，而不仅仅是告诉我设置编辑索引。

```
protected void Gridview_RowUpdating(object sender, GridViewUpdateEventArgs e) {
    // Update code is here and works fine
    try {
        // this works and updates the database w/ no problems
        ObjectDataSource.Update();
    }
    catch (Exception ex) {
    }

    Gridview.EditIndex = -1;
    Gridview.DataBind();            
} 
```

编辑：我拿出了 try/catch，似乎没有任何失败，但我仍然必须显式调用 ObjectDataSource.Update() 所以，这是我的 GridView 的设置：

```
<asp:Gridview ID="Gridview" runat="server" DataSourceID="ObjectDataSource" DataKeyNames="ID" OnDataBound="Gridiew_DataBound"
                AutoGenerateColumns="false" OnRowCommand="Gridview_RowCommand" OnRowUpdating="Gridview_RowUpdating"> 
```

和 ObjectDataSource

```
<asp:ObjectDataSource ID="ObjectDataSource" runat="server" TypeName="DAL.Class" SelectMethod="SelectMethod" UpdateMethod="UpdateMethod">
    <UpdateParameters>
        <asp:Parameter Name="param1" Type="Int32" />
        <asp:Parameter Name="param2" Type="String" />
        <asp:Parameter Name="param3" Type="String" />
        <asp:Parameter Name="param4" Type="String" />
        <asp:Parameter Name="param5" Type="String" />
        <asp:Parameter Name="param6" Type="Int32" />
        <asp:Parameter Name="param7" Type="String" />
        <asp:Parameter Name="param8" Type="Int32" />
    </UpdateParameters>
</asp:ObjectDataSource> 
```

那么，什么设置不正确，它不会自动更新？

编辑 2：所以，我现在在 ObjectDataSource_Updating 事件中设置参数值（之前没有被调用，这就是我显式调用 ods_update() 的原因）。现在 _Updating 事件被击中，但它从未进入我的 DAL 方法。同样，没有错误被抛出，它只是不做任何事情......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:09:53.387

也许正在发生一些不好的事情，比如编辑失败。而且由于您隐藏了错误：

```
catch (Exception ex) {
    } 
```

...你看不到发生了什么。

如果 GridView/DataSource 设置正确，则无需显式调用 Update 或 DataBind。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-27T20:33:53.930

您可以通过更新虚拟表来试一试吗？（在 Gridview_RowUpdating 事件中）

```
 ObjectDataSource.UpdateCommand = @"UPDATE somedummytable set  parameter";   
ObjectDataSource.Update();     
Gridview.EditIndex = -1;       
    ObjectDataSource.DataBind();     
Gridview.DataBind(); 
```

在这一步之后，我确信它会退出编辑模式。

# android - 使用 SQLite 索引查询在 android 中的 Geo Proximity

> ID：15325513
> 
> 赞同：1
> 
> 时间：2013-03-10T17:55:02.530
> 
> 标签：android, database, performance, sqlite, geo

[计算地理接近度的公式](https://stackoverflow.com/questions/2096385/formulas-to-calculate-geo-proximity)

（我是android开发的新手，所以请建议我最好的答案，不要投反对票，对不起我的英语不好）

我正在使用 Haver Sine 公式计算距离 bt 2 点。

在上述情况下，Alix Axel 使用 mysql 和 php，但在我的情况下，我在我的 android 应用程序上实现了这一点，实际上在我的应用程序中，我有一个 LocationService（背景），我的应用程序将继续使用 GPS 和网络提供商获取 lon/lat使用....

```
locationManager.requestLocationUpdates(provider, THIRTY_SEC, HUNDRED_METER, Locationlistener); 
```

一旦找到最好的，而不是在那个位置的基础上，我正在执行 sqlite indexng 查询，我的 sqlite 查询是（这个方法在 SQLiteHelper 类中同步）

```
SELECT * FROM (
    SELECT * FROM Places WHERE
        (Lat >= 1.2393 AND Lat <= 1.5532) AND (Lon >= -1.8184 AND Lon <= 0.4221)
) WHERE
    acos(sin(1.3963) * sin(Lat) + cos(1.3963) * cos(Lat) * cos(Lon - (-0.6981))) <= 0.1570; 
```

如上所述，此查询导致我存储在局部变量中的一些行

`List<Places> places = aboveQuery(location);`

结果地方可能是 1,100 或更多，之后我为列表中的每个地方生成一个简单的通知。所以通知仍然可能是 1、100 或更多。下面是我执行此任务的代码。

```
public class LocationServices  extends Service {    

// rest of the code here to fatch location using GPS, Network 

private class LocationServiceProcess implements Runnable {

            @Override
            public void run() {
                try {
                List<Places> Places = query a databse for location matching

                // generate notification here

                } catch (Exception ex) {
                        ex.printStackTrace();
                    }
                }
    }
} 
```

我想现在你们可以理解我的问题了，现在我的问题是

**正如 Alix Axel 在他的帖子中所说，Haversine 公式比 Vincenty 公式快得多，我能够在大约 6 秒内运行 100 万次计算，这对于我的需求来说几乎是可以接受的**

1.  这个 scnario 是否最好代表当前位置从数据库中获取位置（假设在我的数据库表中包含数千个位置/行）。即这种计算和查询服务线程中的数据是否最好。（我应该在服务主线程之外执行）如果不是告诉我该怎么做？

2.  在那之后，一旦我有了一个地点列表，最好在同一个线程中生成通知或广播所有地点，而不是在 BroadCastReceiver 中为每个地点生成通知。请记住只是简单的通知，其中仅包含地点名称、发生时间和简短说明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-18T08:51:12.963

一个老问题，但一个普遍的问题。

您可以查看 Mapsforge 解决方案以及他们如何管理 POI 搜索。详细了解[POI 搜索管理](https://github.com/mapsforge/mapsforge/tree/master/mapsforge-poi/src/main/java/org/mapsforge/poi/storage)、[DbConstants](https://github.com/mapsforge/mapsforge/blob/master/mapsforge-poi/src/main/java/org/mapsforge/poi/storage/DbConstants.java)和[AbstractPoiPersistenceManager](https://github.com/mapsforge/mapsforge/blob/master/mapsforge-poi/src/main/java/org/mapsforge/poi/storage/AbstractPoiPersistenceManager.java)类以及专门研究`findNearPosition()`的方法。Mapsforge 团队的工作质量很高，逻辑上的表现满足了我的要求（所有类别都可以选择，POI 数量很大），也许它会满足你的要求。

您可以`findNearPosition()`在扩展 Android 的类中使用`AsyncTask`并在其方法中执行此方法调用`doInBackground()`。`onPostExecute()`，您可以收集结果并更新您的 UI。如果位置发生变化，您可以取消`AsyncTask`并启动另一个。

# angularjs - 从 AngularJS APP 访问 Google Calendar API

> ID：15325516
> 
> 赞同：0
> 
> 时间：2013-03-10T17:55:21.377
> 
> 标签：angularjs, google-api, google-calendar-api

我正在实现（我正在尝试实现）一个 100% 的客户端 AngularJS 网络应用程序，它应该访问谷歌日历 API。当然，这不起作用，因为我遇到了跨域问题：

```
XMLHttpRequest cannot load http://... . Origin http://localhost:9000 is not allowed by Access-Control-Allow-Origin. 
```

除了创建代理之外，是否有任何解决方案可以绕过此问题？通过设置一些标题或更改一些谷歌配置？我一个都没看到...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T19:19:45.840

您需要谷歌方将正确的标题 Access-Control-Allow-Origin 返回到您的浏览器，这样它就不会抱怨跨浏览器问题。

确保在谷歌云控制台中正确配置为 Web 应用程序。我假设网络应用程序是因为重定向。

如果它是一个电话应用程序或不在 localhost:9000 重定向端点上提供任何服务，则还有其他选项。例如，您可以在另一个窗口中打开 oauth 重定向，仍然使用 localhost:9000 作为重定向。即使您没有在该端口侦听，您仍然可以从父窗口获取在重定向上设置的 url 代码或错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:22:10.260

伟大的暗示菲利普！google javascript api 客户端（[见这里](http://googleappsdeveloper.blogspot.ch/2011/12/using-new-js-library-to-unlock-power-of.html)）完成了这项工作。

但我想知道：google javascript api客户端如何绕过跨域问题？有人知道吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-05T04:23:07.807

CORS 是您在通过 Web 浏览器运行应用程序时会遇到的问题。我建议你在谷歌浏览器上下载一个 CORS 切换扩展，这样你就可以关闭 CORS 并且 API 将连接。祝你好运！

# perl - 在 Moose 中，如果角色定义了具有默认值的属性，我如何在消费类中更改该默认值？

> ID：15325518
> 
> 赞同：4
> 
> 时间：2013-03-10T17:55:25.783
> 
> 标签：perl, moose, moo

我的 Moose 课程使用了一个我不允许更改的角色。该角色定义了一个具有默认值的属性。我需要我的班级具有该属性，但具有不同的默认值。

那可能吗？

我所能想到的就是用我自己的一些代码围绕“新”方法，如下所示：

```
around new => sub {
    my ($orig, $self) = (shift, shift);
    return $self->$orig(@_, the_attribute => $new_value);
} 
```

但我不确定围绕 new 是否有效，并且还希望有更优雅的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T22:53:15.267

一个更好、更简单的方法是在你的类中写这个：

```
has '+the_attribute' => (
    default => sub{1},
} 
```

`has`使用 a`+`可以只覆盖属性的特定属性。

比周围的 BUILDARGS 简单得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T18:36:25.990

你有正确的想法，但你不应该覆盖`new`. [Moose::Manual::BestPractices](http://search.cpan.org/perldoc?Moose%3a%3aManual%3a%3aBestPractices)说：

> 永远不要覆盖新的
> 
> 覆盖`new`是一种非常糟糕的做法。相反，您应该使用 a `BUILD`or`BUILDARGS`方法来做同样的事情。当你 override`new`时，当你的类不可变时，Moose 不能再内联构造函数。

我已经有一段时间没有这样做了，但我认为以下方法可以解决问题：

```
around BUILDARGS => sub {
   my $orig  = shift;
   my $class = shift;
   return $self->$orig(
      the_attribute => $new_value,
      @_ == 1 ? %{ $_[0] } : @_,
   );
}; 
```

笔记：

*   我首先放置了新属性以允许它被覆盖。
*   我做到了，`->new({ ... })`而且`->new(...)`仍然有效。如果你不关心 break ，你可以使用`@_`而不是。`@_ == 1 ? %{ $_[0] } : @_``->new({ ... })`

# node.js - Express 静态文件 - 所有路由前缀

> ID：15325522
> 
> 赞同：1
> 
> 时间：2013-03-10T17:55:49.353
> 
> 标签：node.js, express

在我的代码中，我目前有

```
app.use(express.static(__dirname + "/../styles"))
app.use(express.static(__dirname + "/../public"))
app.use(express.static(__dirname + "/../scripts"))
app.use("/flosses", express.static(__dirname + "/../styles"))
app.use("/flosses", express.static(__dirname + "/../public"))
app.use("/flosses", express.static(__dirname + "/../scripts"))
app.use("/flosses/edit", express.static(__dirname + "/../styles"))
app.use("/flosses/edit", express.static(__dirname + "/../public"))
app.use("/flosses/edit", express.static(__dirname + "/../scripts"))
app.use("/accounts", express.static(__dirname + "/../styles"))
app.use("/accounts", express.static(__dirname + "/../public"))
app.use("/accounts", express.static(__dirname + "/../scripts")) 
```

这是非常乏味的。我可以做这样的事情吗？

```
app.use("*",express.static(__dirname + "/../scripts")) 
```

注意：我的 css、js 和图像在 3 个不同的目录中，我需要 /thing1/index.css、/thing2/index.css 等。

谢谢，
阿里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:29:17.520

你可以使用这个，这有点 hacky IMO，但它应该可以工作：

```
// place this after your routes
app.routes.get.forEach(function(r) {
  app.use(r.path, express.static(__dirname + '/public'));
}); 
```

它仅适用于`GET`路线（因此是`app.routes.get`），并且您可能不需要对*每条*路线都使用它，因此您可以过滤`r.path`以仅挑选出您需要的路线）。另外，我不确定性能影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:40:09.580

为什么不直接在网站根目录引用静态数据，而不是将它们添加到应用程序 URI 的每个级别？

这就是大多数人所做的，也是这些框架的设计目的。

# angularjs - 带有模板URL的AngularUI消息框

> ID：15325526
> 
> 赞同：1
> 
> 时间：2013-03-10T17:56:14.207
> 
> 标签：angularjs, angular-ui, angular-ui-bootstrap

我正在使用[angular-ui / bootstrap](http://angular-ui.github.com/bootstrap/) $dialog 服务

可以加载部分内部消息框吗？我会使用标题和页脚，只更改消息参数。因此，没有必要在部分模板中包含页眉和页脚。

在此示例[http://plnkr.co/edit/ttobdpirZlnEQBE3LOeZ](http://plnkr.co/edit/ttobdpirZlnEQBE3LOeZ)中，通过单击“味精产品”说明了我期望的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:11:50.680

不，该`messageBox`方法旨在快速创建具有一致外观和感觉的消息框。这种方法背后的想法是，您可以快速创建类似警报的消息，这些消息在整个应用程序中具有一致的外观和感觉。

正如您所注意到的，该`open`方法是一个更灵活的版本，允许您使用您指定的部分创建任何模式对话框。

如果您想创建许多使用相同模板的对话框，您可以将`$dialog`服务包装到您自己的服务中，例如：

```
app.factory('productsDialog', function($dialog){
  return function(products) {    
    return $dialog.dialog({
      templateUrl: 'products.html',
      controller: 'DialogCtrl',
      resolve: {products: function() { return products; }}      
    });
  };
}); 
```

并像这样使用它：

```
$scope.dlgProduct = function(){
    productsDialog($scope.products).open();
  }; 
```

这是一个有效的插件：http://plnkr.co/edit/L2fd7b4y3woLDJmNiN3Y? [p =preview](http://plnkr.co/edit/L2fd7b4y3woLDJmNiN3Y?p=preview)

# html - 带屏幕滑动的 CSS 动画标题（无 JS）

> ID：15325528
> 
> 赞同：0
> 
> 时间：2013-03-10T17:56:21.397
> 
> 标签：html, css, css-transitions

我正在尝试使用 css 创建简单的自动隐藏菜单/标题。我使用过渡，但我认为这不是重点。当我悬停标题时应该向下滑动并显示全部内容，当我将鼠标移开时它应该向上滑动。这个对我有用。我还希望在标题向上滑动时扩展屏幕内容。这是市长问题。我知道在整个页面（屏幕）上扩展 div 的唯一方法是修复其顶部、底部、左侧和右侧。当最高值发生变化时，它不起作用。

请看我的代码示例：http: [//jsbin.com/ahmid/2/edit](http://jsbin.com/ahamid/2/edit)

绿色部分有问题。我试图通过更改悬停时的最高值来修复它 - 但当鼠标位于内容之外和标题之外时它也不起作用。

下面是代码：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div id="main">
    <div id="head">
      <span> header </span>
    </div>
    <div id="content">
      <span>
        test content
      </span>
    </div>
  </div>
</body>
</html> 
```

和CSS：

```
 body { 
  position: relative;
}
#main { 
  position: absolute;
  left: 0px;
  right: 0px;
  top: 0px;
  bottom: 0px;
  background-color: white;
}
#head { 
  display: block;
  height: 50px;
  top: -44px;
  right: 0px;
  left: 0px;
  background-color: #fcc;
  margin: 0px 3px;
  position: absolute;
  transition: 0.5s;
  -moz-transition: 0.5s;
  -webkit-transition: 0.5s;
  -o-transition: 0.5s;
}
#head:hover { 
  height: 50px;
  background-color: red;
  top:0px;
  transition: 1s;
  -moz-transition: 1s;
  -webkit-transition: 1s;
  -o-transition: 1s;
}
#content { 
  background-color: cfc;
  position: absolute;
  top: 50px;
  bottom: 0px;
  left: 0px;
  right: 0px;
  margin: 3px;
  transition: 1s;
  -moz-transition: 1s;
  -webkit-transition: 1s;
  -o-transition: 1s;
}
#head span { 
 color: black;
 font-weight: bold;
 transition: 0.5s;
 -moz-transition: 0.5s;
 -webkit-transition: 0.5s;
 -o-transition: 0.5s;
}
#head:hover span { 
  color: yellow;
  transition: 1s;
  -moz-transition: 1s;
  -webkit-transition: 1s;
  -o-transition: 1s;
}
#content:hover { 
  top: 6px;
 transition: 0.5s;
 -moz-transition: 0.5s;
 -webkit-transition: 0.5s;
 -o-transition: 0.5s;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:05:27.250

我认为问题在于您将#content 设置为悬停状态。

你真正想要的是它总是这样，并且只在#head 的悬停中改变它（向下；增加顶部）

将#content 更改为：

```
#content { 
    background-color: cfc;
    .....
    top: 6px;
    .....
} 
```

并修改头部悬停的顶部：

```
#head:hover ~ #content { 
   top: 50px;
   transition: 0.5s;
   -moz-transition: 0.5s;
   -webkit-transition: 0.5s;
   -o-transition: 0.5s;
} 
```

你可以这样做，因为 head 和 content 是兄弟，所以你可以使用兄弟选择器。

这样它就可以正常运行，唯一奇怪的是转换时间不同，但你可以管理这个:-)

# android - Android jsoup 没有得到完整的 HTML 文档

> ID：15325530
> 
> 赞同：0
> 
> 时间：2013-03-10T17:56:26.143
> 
> 标签：android, jsoup, document

我的 jsoup 库有问题，当我使用 post 方法请求 URL 时，我无法下载完整的 HTML 文档，我只得到了一半的文档。我该如何解决这个问题。提前致谢。

```
Thread hilo = new Thread(new Runnable() {
                    @Override
                    public void run() {
                        try {
                            String url = "http://correos.es/comun/CodigosPostales/1010_s-CodPostal.asp";
                            Map<String, String> mapa = new HashMap<String, String>();
                            mapa.put("LlamarWebService", "false");
                            mapa.put("Prueba", "");
                            mapa.put("Ejecutando", "Direcciones");
                            mapa.put("Formu1", "FormLoc");
                            mapa.put("Formu2", "FormProvin");
                            mapa.put("CodPostal", numero);

                            String userAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.60 Safari/537.17";
                            Connection conn = Jsoup.connect(url).data(mapa).userAgent(userAgent);
                            Document doc = conn.post();
                            Elements elemento = doc.select("div.txtNormal");
                            Log.e("", elemento.toString());

                        } catch (Exception e) {
                            Log.e("Error", e.toString());
                        }
                    }
                });
                hilo.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:42:08.357

您是否在 Eclipse Logcat 中编写 html 代码？您可能只看到文本的一部分，因为 Eclipse 限制了显示文本的长度。[这篇文章](https://stackoverflow.com/questions/8888654/android-set-max-length-of-logcat-messages)可能会对你有所帮助。

戈尔达克

# sql - 将 oracle 时间戳四舍五入为整数

> ID：15325537
> 
> 赞同：0
> 
> 时间：2013-03-10T17:56:46.560
> 
> 标签：sql, oracle

```
INSERT INTO Calculations(TOTAL_DAYS_NUMBER) 
select DTE_CHARGE - (
   select min(TIME_REGISTERED)
   from (
      select TIME_REGISTERED from SHIFTING_RECORDS where id=5
      UNION ALL
      select TIME_REGISTERED from MEAL_RECORDS where id=5
      UNION ALL
      SELECT TIME_REGISTERED FROM REGISTRATION WHERE id=5
      )
   ) 
from REGISTRATION
where id=5; 
```

**它给了我输出 19 3:28:47.812000000**这对我来说是不可能插入到具有整数数据类型的列中的，我只对获取前两位数字感兴趣，即 19。我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:01:53.440

使用`extract(DAY FROM ...)`：

```
INSERT INTO Calculations (TOTAL_DAYS_NUMBER)
SELECT extract(DAY FROM DTE_CHARGE - (
    SELECT min(TIME_REGISTERED) FROM (
        SELECT TIME_REGISTERED
        FROM SHIFTING_RECORDS
        WHERE id = 5

        UNION ALL

        SELECT TIME_REGISTERED
        FROM MEAL_RECORDS
        WHERE id = 5

        UNION ALL

        SELECT TIME_REGISTERED
        FROM REGISTRATION
        WHERE id = 5
    )
))
FROM REGISTRATION
WHERE id = 5; 
```

# javascript - Backbone.js url 函数是如何工作的？

> ID：15325542
> 
> 赞同：0
> 
> 时间：2013-03-10T17:57:08.643
> 
> 标签：javascript, jquery, backbone.js

我对 Backbone 还很陌生，为了更好地理解 Backbone，我一直在做教程，但我永远无法弄清楚可以在模型中定义的 url 是如何工作的。

*网址：'/待办事项'*

我来自 PHP 环境，习惯于静态页面。'/todoItem' 到底是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T18:03:34.607

Backbone 采用 REST 风格的 API，其中每个模型都是具有自己的 URL 路径的 REST 资源。因此，您可能可以执行以下操作：

*   创建一个汽车资源`POST /car`
*   读取特定的汽车资源`GET /car/42`
*   `PUT /car/42`使用 JSON 请求正文更新汽车特定资源，例如`{"model": "Corolla"}`
*   删除特定的汽车`DELETE /car/42`

`/car`因此，对于一个模型来说，如果它是一个新的（尚未保存的）模型，则通常希望 URL 是，`/car/42`否则。因此[，骨干网的默认实现](http://documentcloud.github.com/backbone/docs/backbone.html#section-64)是：

```
url: function() {
  var base = _.result(this, 'urlRoot') || _.result(this.collection, 'url') || urlError();
  if (this.isNew()) return base;
  return base + (base.charAt(base.length - 1) === '/' ? '' : '/') + encodeURIComponent(this.id);
}, 
```

所以通常情况下，您需要做的就是更改`urlRoot`属性，如果您的 API 遵循 REST 约定，您就可以开始了。

```
var Car = Backbone.Model.extend({urlRoot: '/car'}); 
```

# c - 停止从命令行启动二进制文件

> ID：15325545
> 
> 赞同：3
> 
> 时间：2013-03-10T17:57:24.167
> 
> 标签：c, linux

如何让应用程序阻止自己从命令行启动？

我有一个应该由守护进程启动的二进制文件；但是当有人试图从命令行启动二进制文件时，我应该错误地指出“无法从命令行启动”。尝试谷歌搜索但徒劳无功。

PS。[http://www.daniweb.com/software-development/c/threads/449682/stop-launching-from-command-line](http://www.daniweb.com/software-development/c/threads/449682/stop-launching-from-command-line) 我想检查是否有比链接中提到的更好的方法..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T18:01:39.487

我不确定是否有防弹答案（关于如何防止从命令行启动程序）。你可以考虑

*   用[isatty(3)](http://man7.org/linux/man-pages/man3/isatty.3.html)测试`STDIN_FILENO`（即 0）不是 tty
*   尝试打开`/dev/tty`（它应该会失败）见[tty(4)](http://man7.org/linux/man-pages/man4/tty.4.html)
*   [使用getsid(2)](http://man7.org/linux/man-pages/man2/getsid.2.html)测试您与父母不在同一会话中，或使用[setsid(2)开始新会话](http://man7.org/linux/man-pages/man2/setsid.2.html)
*   称自己[为守护进程(3)](http://man7.org/linux/man-pages/man3/daemon.3.html)

而且我不确定您是否总是想拒绝从终端启动。对于调试，您肯定希望能够从终端启动。如果从终端开始，我实际上只会警告，而不是退出。

而且您可能希望在标准路径之外安装程序，可能在某些`libexec/`或`sbin/`目录中。

另见[能力（7）](http://man7.org/linux/man-pages/man7/capabilities.7.html)，[pty（7）](http://man7.org/linux/man-pages/man7/pty.7.html)，[termios（3）](http://man7.org/linux/man-pages/man3/termios.3.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T22:32:16.017

作为记录，只有当您自己编写二进制文件时，才使用 isatty(3) 进行测试。如果您试图阻止人们启动第三方二进制文件，该方法将失败。

一般来说，为了防止人们从命令行启动特定程序，*nix 方式是`chown`二进制文件由启动它的守护进程拥有，并且由组拥有说`no_command_line`. 然后`chmod 705 binary_executables`，将所有不允许从命令行运行 binary_executables 的人放入组中`no_command_line`。

高温高压

# android - 如何使饼图可点击？

> ID：15325546
> 
> 赞同：0
> 
> 时间：2013-03-10T17:57:30.260
> 
> 标签：android, jfreechart, android-canvas, pie-chart

我想让饼图可点击。我正在研究 afreechart 网站上发布的示例（用于制作条形图和饼图）。我试图理解它，我会通过使饼图可点击来进一步了解它。该示例可以在这里找到：[https ://code.google.com/p/afreechart/](https://code.google.com/p/afreechart/)

# 查看课程

```
protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        bitmap =  Bitmap.createBitmap(canvas.getWidth(), canvas.getHeight(),
                Bitmap.Config.ARGB_8888);

        canvas.setBitmap(bitmap);

       inertialMove();

      paintComponent(canvas);
    }

 public  void paintComponent(Canvas canvas) {

        // first determine the size of the chart rendering area...

        Dimension size = getSize();
        RectangleInsets insets = getInsets();
        RectShape available = new RectShape(insets.getLeft(), insets.getTop(),
                size.getWidth() - insets.getLeft() - insets.getRight(),
                size.getHeight() - insets.getTop() - insets.getBottom());

        double drawWidth = available.getWidth();
        double drawHeight = available.getHeight();
        this.scaleX = 1.0;
        this.scaleY = 1.0;

        if (drawWidth < this.minimumDrawWidth) {
            this.scaleX = drawWidth / this.minimumDrawWidth;
            drawWidth = this.minimumDrawWidth;
        }
        else if (drawWidth > this.maximumDrawWidth) {
            this.scaleX = drawWidth / this.maximumDrawWidth;
            drawWidth = this.maximumDrawWidth;
        }

        if (drawHeight < this.minimumDrawHeight) {
            this.scaleY = drawHeight / this.minimumDrawHeight;
            drawHeight = this.minimumDrawHeight;
        }
        else if (drawHeight > this.maximumDrawHeight) {
            this.scaleY = drawHeight / this.maximumDrawHeight;
            drawHeight = this.maximumDrawHeight;
        }

        RectShape chartArea = new RectShape(0.0, 0.0, drawWidth,
                drawHeight);

        this.chart.draw(canvas,chartArea, this.anchor, this.info);

 } 
```

# 活动

然后我想点击该区域（例如红色区域）以显示一条消息。问题是因为我知道图表是从 afreechart 网站的全部示例代码中绘制的，我可以转到不同颜色的每个区域，单击并显示适当的消息，但图表隐藏在某个地方（它不可见）。问题可能是因为我使用位图和画布的方式......

```
public boolean onTouchEvent(MotionEvent event){
            if(event.getAction()==MotionEvent.ACTION_DOWN){

          }

            else if (event.getAction()==MotionEvent.ACTION_UP){

                int color = bitmap.getPixel((int) event.getX(), (int) event.getY());
                System.out.println("color =" +color);

                int redValue = Color.red(color);
                int blueValue = Color.blue(color);
                int greenValue = Color.green(color);

                System.out.println("redValue =" +redValue);
                System.out.println("blueValue =" +blueValue);
                System.out.println("greenValue =" +greenValue);

                     if (redValue == 255){
                        Toast.makeText(getBaseContext(), "Is Red", Toast.LENGTH_SHORT).show();

                    }

                     if (blueValue == 255){
                        Toast.makeText(getBaseContext(), "Is BLUE", Toast.LENGTH_SHORT).show();

                    }

                     if (greenValue == 255){
                          Toast.makeText(getBaseContext(), "Is GREEN", Toast.LENGTH_SHORT).show();

                        }
                //}

            }
            return true; 

        }

    } 
```

请我很高兴得到您的帮助...这真的很令人沮丧，因为首先我是 android 新手，我可以在没有实际看到图表的情况下看到正确的消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T10:02:51.663

在视图上设置一个`onTouchListener`并做你已经在做的事情，即获取像素 RGB 分量。还用于识别用户单击的饼图，将您自己的颜色传递给饼图，以便单击时您可以对该饼图进行详细描述......

# javascript - '""' 是有效的 JSON 字符串吗？

> ID：15325547
> 
> 赞同：1
> 
> 时间：2013-03-10T17:57:45.377
> 
> 标签：javascript, json

我很困惑。引用 json.org

JSON 建立在两种结构之上：

*   名称/值对的集合。在各种语言中，这被实现为对象、记录、结构、字典、哈希表、键控列表或关联数组。
*   值的有序列表。在大多数语言中，这被实现为数组、向量、列表或序列。

所以，我不认为 '""' 应该是一个有效的 JSON 字符串，因为它既不是一个列表值（即不以 '[' 开头并以 ']' 结尾）但 JSON.parse 不给出异常并返回空字符串。

它是一个有效的 JSON 字符串吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T17:58:15.053

不，`''`不是**有效**的JSON。`JSON.parse('')` *确实会*引发错误 - 只需查看浏览器控制台即可。

下次你有一个“这是有效的 JSON 吗？” 问题，只需通过[JSON 验证器运行它。](http://jsonlint.com/)这就是它们存在的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T18:05:18.527

> 所以，我不认为`""`应该是一个有效的 JSON 字符串

它是一个有效的 JSON 字符串（这是一种可能出现在 JSON 文本中的数据类型）。

> 因为它既不是列表值（即不以'['开头并以']'结尾）

JSON**文本**（即完整的 JSON 文档）必须（在最外层）是对象或数组。字符串不是有效的 JSON 文本。

[正式规范](http://www.ietf.org/rfc/rfc4627.txt)说：

> *JSON 文本是一个序列化的对象或数组。*

但回到这里引用问题：

> 但 JSON.parse 不给出异常并返回空字符串。

您使用的 JSON 解析器过于自由。不要假设所有的 JSON 解析器都会。

例如，如果我跑步，`perl -MJSON -E'say decode_json(q{""})'`我会得到：

> JSON 文本必须是 -e 第 1 行的对象或数组（但找到数字、字符串、true、false 或 null，使用 allow_nonref 允许这样做）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-24T07:18:52.723

遵循最新的 JSON [RFC 7159](https://www.rfc-editor.org/rfc/rfc7159#section-2)，`""`实际上是有效的 JSON。但在一些早期的标准中并非如此。

引用：

> JSON 文本是一系列标记。标记集包括六个结构字符、字符串、数字和三个文字名称。
> 
> JSON 文本是一个序列化的值。请注意，某些先前的 JSON 规范将 JSON 文本限制为对象或数组。仅生成需要 JSON 文本的对象或数组的实现将是可互操作的，因为所有实现都将接受这些作为符合标准的 JSON 文本。

# bash - 如何将 tail 与 sed 结合使用。

> ID：15325548
> 
> 赞同：22
> 
> 时间：2013-03-10T17:57:59.860
> 
> 标签：bash

我想发出哔声，以防日志文件中出现任何异常。

我正在使用 bash 脚本。

但不幸的是，当 tail 与 sed 结合使用时，它不起作用。

我已尝试使用以下命令并在此处发布。

```
tail -f mylogs.log | grep "Exception" | sed -e $'s/Exception/Exception\a/'

tail -f mylogs.log  | sed -e $'s/Exception/Exception\a/'

tail -f mylogs.log  | grep "Exception" | sed -e $'s/Exception/Exception\a/' 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-10T18:09:25.273

问题是它`grep`看到它没有写入终端，所以它缓冲它的输出，最终写入可以一次处理的大块`sed`。要告诉它在行可用时立即打印出来，请使用以下`--line-buffered`选项：

```
tail -f mylogs.log \
  | grep --line-buffered Exception \
  | sed -u -e $'s/Exception/Exception\a/' 
```

（请注意，我还向 ' 添加了`-u`标志`sed`，这类似于`grep`'`--line-buffered`选项。在我的测试中，它似乎对这个命令没有影响，但我认为最好包含它以防万一。）

# batch-file - 批处理脚本：删除不包含特定的子文件夹

> ID：15325549
> 
> 赞同：0
> 
> 时间：2013-03-10T17:58:04.710
> 
> 标签：batch-file, cmd

我正在尝试找出一个 win 命令行来删除所有不包含 *.nes 的子文件夹并将输出重定向到日志文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:29:21.340

This will delete any sub folder in the folder where the batch script is located that does not have a file with .nes ending inside it (anywhere even in sub sub folders). Be careful with this script it can not be easily undone if you test is carelessly. It does not warn when run.

```
@echo off
:: do not use if you don't know 
:: what you are doing!
::
:: this file deletes all subfolders 
:: without files with *.nes in them
:: WARNING: use with extreme care!

echo --- cleanup on %date% %time:~0,-3%% --- >> removed.log

for /D %%i in (*) do (
    dir /b /s ".\%%i\*.nes" >NUL 2>NUL
    if errorlevel 1 ( :: dir sets errorlevel 1 if no file is found
        rmdir /q /s "%%i"
        echo.    removed %%i >> removed.log
    )

    set errorlevel=0
)

echo. >> removed.log 
```

# php - json_encode() 是否可以防止 SQL 注入？

> ID：15325558
> 
> 赞同：2
> 
> 时间：2013-03-10T17:58:39.313
> 
> 标签：php, sql, json, sql-injection, mysql-real-escape-string

我注意到该函数会`json_encode()`自动将反斜杠`"`和`'`值放在一起。我最初是通过在将字符串放入数组之前使用来防止 SQL 注入`mysqli_real_escape_string($con, $value)`，之后将使用 JSON 对其进行编码。

因为`json_encode`添加了额外的反斜杠，所以有必要使用该`mysqli_real_escape_string`功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T18:01:53.353

是的，它仍然是必要的。`json_encode`将反斜杠添加到 JSON 中包含的字符串，但不添加到 JSON 本身的控制元素。

所以这：

```
array( 'key' => 'some "value" here' ); 
```

变成：

```
{"key": "some \"value\" here"} 
```

字符串中仍有未转义的引号（键和值周围的引号。`json_encode`并不是为了防止 SQL 注入。它纯粹为 JSON 添加斜线，因此当您稍后处理`json_decode()`数据时，它知道字符串开始和停止的地方。

正如其他人所说 - 使用准备好的陈述。时期。如果您已经在使用 mysqli，那么您没有理由不使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T18:02:24.767

如果您使用的是 mysqli，只需使用 Prepared Statements 即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T18:05:31.350

json_encode() 和 mysqli_real_escape_string() 都不能防止 SQL 注入。

此外，如果您不在 json 编码值中使用 mysqli_real_escape_string()，您将无法将它们解码回来。

此外，如果您将 json 存储在数据库中，那么您的数据库结构是错误的。

您正在使用您的数据库的表就是这样的数组。它们旨在将标量值存储在其单元格中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T18:02:54.787

`json_encode`对 XSS 或 SQL 错误生成的保护不足。将对象编码为 JSON 的行为甚至会添加新的引号字符。

…但不要使用`mysqli_real_escape_string`，使用[准备好的语句和参数化查询](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)。

…通常你不应该将 JSON 存储在数据库中。规范化您的数据，以便您可以查询它。

# youtube - 将 YouTube 视频分成不同的超链接？

> ID：15325559
> 
> 赞同：0
> 
> 时间：2013-03-10T17:58:39.840
> 
> 标签：youtube

我有一个长度为 50 分钟的 YouTube 视频（不是我自己上传的）：视频谈论不同的内容，每个内容在不同的时间开始，例如： content_x 开始 @ 0minutes : 0Seconds content_y 开始 @10minutes : 0Seconds ..etc

现在我想将这些内容按照超链接进行划分，这样如果我想观看任何部分，我可以在相应的时间（分钟和秒）点击这个链接。

我更愿意在 YouTube 视频的描述部分或“关于部分”中这样做，所以你能指导我如何做到这一点吗？或任何其他关于如何以动态和描述性方式访问 YouTube 中不同视频内容的更简单的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:08:58.317

右键单击视频并选择`Copy video URL at current time`。

然后粘贴到任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:03:57.213

您可以将您想要的时间附加到 youtube 链接的末尾

例如 `http://www.youtube.com/watch?v=XXX#t=31m08s`

其中 31m08s 代表 31 分 8 秒。

同样，您可以为所需的其余部分创建链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:04:26.470

检查此站点：[www.youtubetime.com](http://youtubetime.com)它将生成一个具有特定开始时间的 Youtube 链接。或者，您可以在视频描述中用空格分隔您的时间（例如，非常长的描述 0:00 第 1 部分 1:00 第 2 部分等……或者您可以使用这些时间链接写评论并将其用作“索引”。希望我已经回答了你的问题。

# objective-c - NSNumber、NSSet 等类的内存管理

> ID：15325560
> 
> 赞同：-2
> 
> 时间：2013-03-10T17:58:48.010
> 
> 标签：objective-c, memory-management, nsnumber, nsautoreleasepool, nsset

这些是类，它们声明了指向对象的指针……对吗？你像对象一样向他们发送方法。 `NSNumber * myNumber = [NSNumber numberWithInteger: x];`

那么为什么他们没有像这样发布： `[myNumber release];`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:01:44.260

关于内存管理“NARC”，您应该记住一条规则：当您使用 New Alloc Retain Copy 时，您应该释放或自动释放对象，否则不应该。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:02:19.010

按照惯例，像您所展示的类方法初始化器会创建自动释放的实例，因此您不需要调用它们，`release`除非您`retain`以某种方式调用它们。但是，实例方法初始化程序 - 就像`initWithInteger:`您的情况一样 - 返回保留的实例。那些你需要释放自己的人。

# function - GUI 的问题，无法使用句柄来存储变量

> ID：15325567
> 
> 赞同：1
> 
> 时间：2013-03-10T17:59:30.097
> 
> 标签：function, matlab, user-interface, matlab-guide

我正在创建一个 GUI，用户在其中输入一个值，当他按下按钮时，它会运行一个外部函数并显示错误消息。我无法在 GUI 编码中成功插入变量。我对在哪里插入变量感到困惑。我试过手柄，但不幸的是它不起作用。

```
 % --- Executes just before Stallfunction is made visible.
  function Stallfunction_OpeningFcn(hObject, ~, handles, varargin)
  % This function has no output args, see OutputFcn.
  % hObject    handle to figure
  % eventdata  reserved - to be defined in a future version of MATLAB
  % handles    structure with handles and user data (see GUIDATA)
  % varargin   command line arguments to Stallfunction (see VARARGIN)
  % Choose default command line output for Stallfunction
   handles.user_entry = user_entry;
  % Update handles structure
  guidata(hObject, handles);
  % UIWAIT makes Stallfunction wait for user response (see UIRESUME)
  % uiwait(handles.figure1); 
```

**我在上面的代码中插入了变量“user_entry”，对吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:27:51.530

`user_entry` is not assigned a value in your function. If you launch your GUI by passing a value for `user_entry` like this:

```
Stallfunction(user_entry) 
```

then the first lines of your code in the openingFcn should be:

```
if ~isempty(varargin)
    user_entry = varargin{1};
else
    error('please start the GUI with an input value')
end 
```

After this, you can assign `user_entry` to the handles structure as you're doing already.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T00:31:49.347

尝试这个：

```
function num = get_num()
    fig = figure('Units', 'characters', ...
                 'Position', [70 20 30 5], ...
                 'CloseRequestFcn', @close_Callback);

    edit_num = uicontrol(...
                'Parent', fig, ...
                'Style', 'edit', ...
                'Units', 'characters', ...
                'Position', [1 1 10 3], ...
                'HorizontalAlignment', 'left', ...            
                'String', 'init', ...
                'Callback', @edit_num_Callback);  

    button_finish = uicontrol( ...
        'Parent', fig, ...
        'Tag', 'button_finish', ...
        'Style', 'pushbutton', ...
        'Units', 'characters', ...
        'Position', [15 1 10 3], ...
        'String', 'Finish', ...
        'Callback', @button_finish_Callback);            

    % Nested functions
    function edit_num_Callback(hObject,eventdata)
        disp('this is a callback for edit box');
    end            

    function button_finish_Callback(hObject,eventdata) 
        % Exit
        close(fig);
    end       

    function  close_Callback(hObject,eventdata)
        num_prelim = str2num(get(edit_num,'string'));
        if(isempty(num_prelim))
            errordlg('Must be a number.','Error','modal');
            return;
        end
        num = num_prelim;
        delete(fig);
    end

waitfor(fig);  
end 
```

看看你能不能搞砸这个并得到你想要的。此外，学习使用嵌套函数以及回调如何在 matlab 中工作。将此保存为函数文件，然后调用“num = getnum;”

# sql - SQL 示例查询解决方案（按技术分组和子查询技术）

> ID：15325574
> 
> 赞同：1
> 
> 时间：2013-03-10T18:00:02.647
> 
> 标签：sql, subquery

表：

```
Classes(class, type, country, numGuns, Bore, displacement)
Ships(name, class, launched) 
```

问题：找到每个级别的第一艘船下水的年份？

我的尝试：

```
 select class, min(launched) from Ships
         group by (class) 
```

提供的答案：

```
 select class, launched from ships as s1
         where launched <= ALL (select year from ships as s2
                                where s2.class = s1.class) 
```

所以我的问题是，我会从我的查询中得到想要的结果吗？我真的不明白它是否像提供的答案那样复杂，尤其是当表中没有年份这样的列时。

组中的最小年份应对应于该级别的第一艘船。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:12:36.067

是的，你的答案有效。

事实上，它比提供的答案更好，因为该查询实际上返回了一个类中的所有船舶和发射，该类是在该类推出的第一年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-13T05:42:05.187

正确解决这个问题。

您只是从`Ships`表中选择，但很可能有些`classes`人没有在`Ships`表中分配任何船只，您也需要考虑这些，因此使用 a`LEFT JOIN`来遵守条件。

```
SELECT C.class, 
       CASE WHEN S.launched IS NULL THEN 
       (SELECT MIN(launched) 
        FROM   Ships as S 
       WHERE   S.class = C.class) ELSE S.launched END
FROM   Classes as C LEFT JOIN Ships as S
ON     C.class = S.name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-13T12:22:01.073

```
select c.class , min (launched)
from classes c left join ships s on c.class = s.class 
group by c.class
; 
```

# git - git子模块和目录结构

> ID：15325575
> 
> 赞同：0
> 
> 时间：2013-03-10T18:00:09.587
> 
> 标签：git

我有一个类似的目录结构：

```
root/
    files
    dir1/
        main-project-files
        main-project-subdirs/
    dir2/ 
```

我有另一个要添加到邮件项目的存储库。它的结构类似于：

```
dir1/
    submodule-files
    submodule-subdirs/ 
```

问题是我希望`dir1`主项目和外部存储库中的文件是同一个文件夹，但我真的不希望`dir1`作为存储库的一部分跟踪作为主项目一部分的文件。以整体结构结束，例如：

```
root/
    files
    dir1/
        main-project-files
        main-project-subdirs/
        submodule-files
        submodule-subdirs/
    dir2/ 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:09:06.650

你要做的是在你想要跟踪的目录中有一个符号链接，或者从你不想跟踪的目录中被指向。如果您不想跟踪符号链接，也可以将其添加到您的 gitignore。然后，Git 将只查看您跟踪的目录，而对 symlinc 指向的位置一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:33:11.803

Git 并没有真正的工具来构建复杂的列表，这些列表准确地列出了哪些目录来自某个任意历史列表中的哪些文件。我认为这背后的原因是，人类跟踪和验证列表与描述究竟可以做什么和不能做什么一样容易出错。

只需将共享社区和历史的所有内容保存在一个 repo 集中，并将其作为子模块克隆到使用它的所有其他内容中。您会得到相同的效果，其中哪些文件属于哪些历史的规则更容易验证（更不用说描述了）。

# c# - 包含引号的 html 标记上的子字符串

> ID：15325576
> 
> 赞同：2
> 
> 时间：2013-03-10T18:00:14.413
> 
> 标签：c#, string, parsing, substring

我怎样才能正确使用子字符串，至少，让它工作？

`'#fff'\">`我想在 stringString中找到这个子字符串的位置`this.style.backgroundColor='#fff'\">Choose a translation mode,`

我正在这样做：

```
string substrToSearch = "'#fff'\\\">";
int substrPosition = stringString.IndexOf(substrToSearch); 
```

不幸的是，substrPosition = -1，它不起作用。有人可以帮助我吗？

编辑解决：

我真的不明白为什么我不能这样做`string quote = " " ";`但我可以这样做`quote = " \" "`，事实上我知道我可以但是..这里，“\”用作转义字符，所以为什么在我的子字符串中m 搜索它不会被解释为转义字符而是简单的文本？

对我来说`string substrToSearch = "'#fff'\">";`，substrToSearch 是 '#fff'"> as `\"`= `"`。

简单来说，为什么`\"`不解释为转义字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:08:53.700

试试这个：

```
string substrToSearch = "'#fff'\">"; 
```

访问 stringString 时不会对其进行转义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:10:13.700

干得好...

```
 [TestMethod]
    public void StringIndex
    {
        var stringString = "this.style.backgroundColor='#fff'\">Choose a translation mode,:";
        var substrToSearch = "'#fff'\">";
        var substrPosition = stringString.IndexOf(substrToSearch);

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T18:26:20.620

您添加的问题的答案是字符串转义概念的基础。语法`string quote = " " ";`是有问题的，因为编译器会认为字符串以第二个引号而不是第三个引号结尾。字符串转义允许用 表示**实际的引号**，`\"`因此**实际值为**is `" \" "`，`"`not `\"`。

# jquery - 如何在不影响兄弟姐妹的情况下更改 li 中的文本

> ID：15325577
> 
> 赞同：1
> 
> 时间：2013-03-10T18:00:20.707
> 
> 标签：jquery

好的，伙计们，我昨天花了一整天的时间在谷歌上搜索并尝试不同的解决方案，但没有任何效果。我有一个动态生成的可折叠 div，其中包含各种内容。我的问题是`ul`我在可折叠文件中的文本引起的。我的结构示例如下。

```
<ul id="list-0">
   <li>
     <div id="div-00" class=".item">
       <span id="item-00">Item</span>
       <select id="slide-00" data-role="slider" data-mini="true">
             <option value="on">Need</option>
             <option value="off">Done</option>                       
       </select>
     </div>
   </li>
   <li>
      <div id="div-01" class=".item">
         <span id="item-01">Item</span>
         <select id="slide-01" data-role="slider" data-mini="true">
             <option value="on">Need</option>
             <option value="off">Done</option>                       
         </select>
     </div>
  </li>
</ul> 
```

我正在尝试更改跨度内的文本。这很容易用一个简单的

```
 $("#item-00").text("whatevertext"); 
```

......它的工作原理。但是，当我尝试更改任何后续跨度的文本时，该文本将应用于任何先前单击的跨度......为什么会发生这种情况？就像我在已经将跨度更改为**"bananas"**`id="#item-01"`之后将跨度的文本更改为**"apples"** ，两个跨度都将更改为**"apples"**。这对我来说毫无意义，而且我尝试过的任何方法都没有奏效。如果您需要更多我的代码，请告诉我。 `id="#item-00"`

 ****```
$(document).on('click', '.item', function () {
     var div = $(this).attr("id"); 
     var split = div.split("-");
...more codings.... involving the opening of a popup to let user type in span text in input of id="thisothername"
     var name = $("#thisothername").attr("value");
     $("#" + "item" + "-" + split[1]).text(name);
}); 
```

我目前正在使用它从输入中获取文本并将其应用于选定的 li > div > span .... split[1] 是一个数组索引，其中包含父 div id aka 00 或 01 的解析数值然后用于调用子跨度的 id，理论上只更改该 id 的文本 aha。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:11:01.530

你可以这样尝试：

```
$(document).on('click', '.item', function () {

  // .. some other stuff ...

  $(this)
    .find('span')
    .first()
    .text($("#thisothername").attr("value"));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:08:48.160

类名不需要`.`标记中的

```
 <div id="div-00" class="item"> 
```

现在这应该可以了

```
$(document).on('click', '.item', function () {
     var div = $(this).attr("id"); 
     var split = div.split("-");    
     //var name = $("#thisothername").attr("value"); //dont know what does it do
     $("#" + "item" + "-" + split[1]).text("some name");
}); 
```

或者你可以通过 id 拆分来做到这一点

```
$(document).on('click', '.item', function () {
         //var div = $(this).attr("id"); 
         //var split = div.split("-");    
         //var name = $("#thisothername").attr("value"); //dont know what does it do
         $("span",this).text("some name");
    }); 
```

[http://jsfiddle.net/utFmc/1/](http://jsfiddle.net/utFmc/1/)****

# c# - 使用 Mapper 与隐式运算符有什么优势吗？

> ID：15325578
> 
> 赞同：8
> 
> 时间：2013-03-10T18:00:26.833
> 
> 标签：c#, automapper, implicit-conversion, implicits

映射器自动映射：

```
Mapper.CreateMap<ObjectType1, ObjectType2>()
    .ForMember(o1 => o1.PropName, mapper => mapper.MapFrom(o2 => o2.Prop2Name));

Mapper.Map(object1, object2); 
```

隐式运算符：

```
public static implicit operator Object1(Object2 o2)
{ 
    Object1 o1 = new Object2(); 
    //Mapping code here...
    return o1;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T18:03:01.047

`Mapper.Map`通过从隐式运算符调用，没有理由不能同时使用两者。

使用 AutoMapper 允许您依赖自动生成的映射代码，这样您就不必使用`ForMember`单独映射每个成员。

# php - echo 在分号后打印

> ID：15325583
> 
> 赞同：0
> 
> 时间：2013-03-10T18:00:41.187
> 
> 标签：php, html, web

我正在使用 NVU 进行 Web 开发，并且遇到了一个我已经搜索了很长时间才能解决的问题。

```
<?php 
$imagesDir = 'images/'; 
$images = glob($imagesDir . '*.{jpg,jpeg,png,gif}', GLOB_BRACE);
foreach($images as $key=>$value)
{
      echo "<img src='"$value"'>" ;
}
?> 
```

我应该得到“images/”文件夹中所有图像的输出，但我的输出看起来像这样

> " ; } ?>

它只打印它之后的内容，而不是我真正想要它打印的内容。我应该怎么办？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:03:10.097

可能是因为你错过了时期..

```
 echo "<img src='".$value."'>" ; 
```

您还可以在 PHP 中将变量放在双引号内，而无需连接字符串。

```
echo "<img src='$value'>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:03:13.487

您忘记添加连接运算符

```
echo "<img src='" . $value . "'>" ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T18:03:37.013

你错过了这些时期：

```
echo "<img src='".$value."'>" ; 
```

此外，值得经常检查错误日志，查看 PHP 错误日志（或者如果未过滤，则查看服务器错误日志）。

# batch-file - 批处理文件 - 以管理员身份运行，如果不删除批处理文件？

> ID：15325588
> 
> 赞同：0
> 
> 时间：2013-03-10T18:00:55.923
> 
> 标签：batch-file, uac, administrator, elevated-privileges

嗨，我制作了一个需要以管理员身份运行的批处理文件。为此，我使用了从[这里](https://stackoverflow.com/a/12264592/1016343)(StackOverflow) 获取的这个脚本。

但我想要的是，如果用户选择不以管理员身份运行（单击否到 UAC），那么程序将退出，批处理将自动删除它。

批处理文件自行删除的命令是“del %0”，但我需要有关此脚本中何处的帮助，我可以放置此命令。我尝试将它与“@exit /B”一起使用，但是如果您按 YES 或 NO 到 UAC，批处理文件将被删除，然后批处理文件的其余部分无法执行

当用户对 UAC 按下“NO”时，任何人都可以帮助弄清楚如何只运行命令“del %0”？

* * *

```
@echo off
:checkPrivileges 
NET FILE 1>NUL 2>NUL
if '%errorlevel%' == '0' ( goto gotPrivileges ) else ( goto getPrivileges ) 

:getPrivileges 
if '%1'=='ELEV' (shift & goto gotPrivileges) 

setlocal DisableDelayedExpansion
set "batchPath=%~0"
setlocal EnableDelayedExpansion
ECHO Set UAC = CreateObject^("Shell.Application"^) > "%temp%\OEgetPrivileges.vbs" 
ECHO UAC.ShellExecute "!batchPath!", "ELEV", "", "runas", 1 >> "%temp%\OEgetPrivileges.vbs" 
"%temp%\OEgetPrivileges.vbs" 
@exit /B 

:gotPrivileges 
```

* * *

谢谢你们 符文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:42:33.507

如果我理解您的问题，您需要一种方法来检测 UAC 提示是否被取消。如果您使用带有 -w 选项的 Elevate32.exe 或 Elevate64.exe（下载[ElevationToolkit1.zip](http://www.westmesatech.com/misctools.html)）程序，您可以检测到这一点，如果您取消 UAC 提示，它将返回退出代码 1223 (ERROR_CANCELLED)。

账单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T20:50:46.150

我知道这是一个老问题，但发布解决方案仍然很有用。
如果您安装了 Powershell，则无需创建新的 vbs 脚本，并且可以检查 ERRORLEVEL 以检测 UAC 提示是否已取消。

只需将其放入您的脚本中：

```
@echo off
:checkPrivileges 
NET FILE 1>NUL 2>NUL
if '%errorlevel%' == '0' ( goto gotPrivileges 
) else ( powershell "saps -filepath %0 -verb runas" >nul 2>&1)
if NOT '%errorlevel%' == '0' call :deleteSelf
exit /b

:deleteSelf
start /b "" cmd /c del "%~f0"&exit /b

REM No need for this label
::getPrivileges 
::if '%1'=='ELEV' (shift & goto gotPrivileges) 

::setlocal DisableDelayedExpansion
::set "batchPath=%~0"
::setlocal EnableDelayedExpansion
::ECHO Set UAC = CreateObject^("Shell.Application"^) > "%temp%\OEgetPrivileges.vbs" 
::ECHO UAC.ShellExecute "!batchPath!", "ELEV", "", "runas", 1 >> "%temp%\OEgetPrivileges.vbs" 
::"%temp%\OEgetPrivileges.vbs" 
::@exit /B 

:gotPrivileges 
```

我从 dbenham 的帖子中获取的删除[方法](https://stackoverflow.com/questions/20329355/how-to-make-a-batch-file-delete-itself)

# c# - 在 C# 的画布上绘制多个矩形

> ID：15325592
> 
> 赞同：0
> 
> 时间：2013-03-10T18:01:07.873
> 
> 标签：c#, wpf, canvas

我正在尝试在我的画布上绘制一排矩形。当我运行以下代码时，我只得到一个矩形，即使我的画布元素说它有 12 个孩子。维度是一个具有 2 个整数属性的类，高度和宽度。我正在绘制的画布是 400 像素 x 600 像素。

```
Dimensions windowDimensions = new Dimensions()
        {
            Width = (int)cvsGameWindow.Width,
            Height = (int)cvsGameWindow.Height
        };

        //init rectangles
        for (int i = 0; i < windowDimensions.Width; i+=50)
        {
            Rectangle rect = new Rectangle(); //create the rectangle
            rect.StrokeThickness = 1;  //border to 1 stroke thick
            rect.Stroke = _blackBrush; //border color to black
            rect.Width = 50;
            rect.Height = 50;
            rect.Name = "box" + i.ToString();
            Canvas.SetLeft(rect,i * 50);
            _rectangles.Add(rect);
        }
        foreach (var rect in _rectangles)
        {
            cvsGameWindow.Children.Add(rect);
        } 
```

以及在我的代码顶部声明的私有成员：

```
private SolidColorBrush _blackBrush = new SolidColorBrush(Colors.Black);
private SolidColorBrush _redBrush = new SolidColorBrush(Colors.Red);
private SolidColorBrush _greenBrush = new SolidColorBrush(Colors.Green);
private SolidColorBrush _blueBrush = new SolidColorBrush(Colors.Blue);
private List<Rectangle> _rectangles = new List<Rectangle>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T18:07:31.610

这是罪魁祸首：

```
Canvas.SetLeft(rect,i * 50); 
```

在第一个循环中`i=0`，您正在设置`Canvas.Left = 0`; 由于您的 for 循环正在执行`i+=50`，因此我将在第二个循环中执行此操作`50`，因此您将进行设置`Canvas.Left = 2500`。你说你的`Canvas`is `400x600`，所以你的矩形不在屏幕上。

最简单的解决方法：使用`Canvas.SetLeft(rect, i)`- since`i`以 50 为增量增加。

# xpages - 使用 xp:include 将属性传递给自定义控件

> ID：15325595
> 
> 赞同：1
> 
> 时间：2013-03-10T18:01:23.020
> 
> 标签：xpages

当使用包含页面将自定义控件动态加载到 XPage 上时，是否可以将自定义属性值作为包含的一部分传递给自定义控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:03:23.847

Peter，包含页面不加载自定义控件，而是加载另一个 XPage。页面没有属性。但是......页面成为组件树的一部分，因此您可以使用`getComponent("thecomponent").getParameterMap`（Off my head，可能被称为略有不同）访问其包含的控件

这有帮助吗？

# php - 如何仅显示请求 ID？

> ID：15325596
> 
> 赞同：0
> 
> 时间：2013-03-10T18:01:27.187
> 
> 标签：php

我想请教这里的前辈。我可以只显示 1 个 ID 吗？

当我单击第一行的查看时。我只想显示第一行。

```
+----+--------------+-------------+----------+---------+-----------------+---------------+-----------+---------------------+-----------+---------------+--------+------+--------+
| Id | username     | Peralatan   | Kuantiti | Tujuan  | Tarikh Pinjaman | Tarikh Pulang | Masa Guna |  Masa Terima        | Keputusan | KuantitiLulus | Respon | View | Delete |
+----+--------------+-------------+----------+---------+-----------------+---------------+-----------+---------------------+-----------+---------------+--------+------+--------+
| 31 | FahmiNazirul | Speaker     | 12       | testing | 10/03/2013      | 11/03/201     | 12 pagi   | 10/03/2013 07:35:40 | Lulus     |  2            | Respon | View | Delete |
+----+--------------+-------------+----------+---------+-----------------+---------------+-----------+---------------------+-----------+---------------+--------+------+--------+
| 35 | ali          |Lcd_projecter|  1       | testing | 10/03/2013      |  11/03/2013   | 12 pagi   | 10/03/2013 02:54:55 | Lulus     |  1            | Respon | View | Delete |
+----+--------------+-------------+----------+---------+-----------------+---------------+-----------+---------------------+-----------+---------------+--------+------+--------+ 
```

但是，在我首先单击查看后，我得到了这个。

```
----------------------------------------------------------- 
Username: FahmiNazirul
Peralatan: Speaker
Kuantiti: 12
Tarikh Pinjam: 10/03/2013
Tarikh Pulang: 11/03/2013
Masa untuk di ambil: 12 pagi
----------------------------------------------------------- 
Kepututsan: Lulus
Kuantiti yang di luluskan: 2
----------------------------------------------------------- 

----------------------------------------------------------- 
Username: ali
Peralatan: Lcd_projecter
Kuantiti: 1
Tarikh Pinjam: 10/03/2013
Tarikh Pulang: 11/03/2013
Masa untuk di ambil: 12 pagi
----------------------------------------------------------- 
Kepututsan: Lulus
Kuantiti yang di luluskan: 1
----------------------------------------------------------- 
```

这是我在上面显示数据的编码

```
$id =$_REQUEST['Id'];

            $query = "SELECT * FROM pinjaman ";

            $result = mysql_query($query) or die(mysql_error()) ;

            while(($row = mysql_fetch_array($result)))

              {

              $id = $row['Id'];
              echo "----------------------------------------------------------- " ."<br/>";
              echo " Username: " . $row['username'] ."<br/>";
              echo " Peralatan: " . $row['BarangPinjaman']."<br/>" ;
              echo " Kuantiti: " . $row['Kuantiti']."<br/>" ;                 
              echo " Tarikh Pinjam: " . $row['tarikhpinjam'] ."<br/>";
              echo " Tarikh Pulang: " . $row['tarikhpulang']."<br/>";
              echo " Masa untuk di ambil: " . $row['masaguna']."<br/>";
              echo "----------------------------------------------------------- " ."<br/>";
              echo " Kepututsan: " . $row['keputusan']."<br/>";
              echo " Kuantiti yang di luluskan: ". $row['kuantitilulus']."<br/>";
              echo "----------------------------------------------------------- " ."<br/>";

              echo "</tr>";

              } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:04:50.630

更改您的查询以包含用户 ID

```
"SELECT * FROM pinjaman where id = ".intval(mysql_real_escape_string($id)); 
```

# gson - 仅在字段上使用自定义反序列化器？

> ID：15325597
> 
> 赞同：3
> 
> 时间：2013-03-10T18:01:27.310
> 
> 标签：gson

我做了一个复制机制，我同步两个数据库。为了在数据库之间进行通信，我使用 Gson 将对象序列化为 JSON。每个对象都有一个 UUID 来识别它。为了避免发送最新的项目，当对象包含在要复制的对象的字段中时，我使用对象 UUID。

我们有以下课程：

```
public class Entity {
    String uuid;

// Getters and setters..
}

public class Article extends Entity {
    String name;
    Brand brand;

// Getters and setters..
}

public class Brand extens Entity {
    String name;
    Producer producer 

// Getters and setters..
}

public class Producer extends Entity {
    String name;

// Getters and setters..
} 
```

如果我序列化 Article 它的 JSON 表示将如下所示：

```
{"brand":"BrandÖ179d7798-aa63-4dd2-8ff6-885534f99e77","uuid":"5dbce9aa-4129-41b6-a8e5-d3c030279e82","name":"Sun-Maid"} 
```

其中“BrandÖ179d7798-aa63-4dd2-8ff6-885534f99e77”是类（“品牌”）和 UUID。

如果我序列化 Brand 我期望：

```
{"producer":"ProducerÖ173d7798-aa63-4dd2-8ff6-885534f84732","uuid":"5dbce9aa-4129-41b6-a8e5-d3c0302w34w2","name":"Carro"} 
```

在杰克逊，我会将文章类更改为：

```
public class Article {
    String uuid;
String name;
    @JsonDeserialize (using = EntityUUIDDeserializer.class) @ JsonSerialize (using = EntityUUIDSerializer.class)        
    Brand brand;

// Getters and setters..
} 
```

并实现自定义序列化器和反序列化器以返回 UUID 而不是对象。

Gson 没有 @JsonDeserialize 注释。

如果我们像这样安装序列化器和反序列化器：

```
Gson gson = new GsonBuilder()
          .registerTypeAdapter(Producer.class, new EntityUUIDDeserializer())
          .registerTypeAdapter(Brand.class, new EntityUUIDDeserializer())  
          .registerTypeAdapter/Producer.class, new EntityUUIDSerializer())
          .registerTypeAdapter(Brand.class, new EntityUUIDSerializer())                 
          .create(); 
```

我们可以对文章和品牌进行序列化。

反序列化文章

```
Article article= gson.fromJson(inputJSONString, Article.class); 
```

工作正常，但

```
Brand brand= gson.fromJson(inputJSONString, Brand.class); 
```

不工作。我想问题是当我们反序列化一个品牌时，我们让品牌的反序列化器尝试返回一个 UUID 字符串，但我们希望反序列化器返回一个品牌对象。

有没有办法避免创建两个不同的 Gson 对象？两个不同的 Gson 对象的问题是当您想要反序列化一个同时包含 Article 和 Brand 的对象时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:06:12.597

您编写序列化器/反序列化器并将其注册到 Gson（使用`GsonBuilder`）。

[https://sites.google.com/site/gson/gson-user-guide#TOC-Custom-Serialization-and-Deserialization](https://sites.google.com/site/gson/gson-user-guide#TOC-Custom-Serialization-and-Deserialization)

```
Gson g = new GsonBuilder()
              .registerTypeAdapter(Producer.class, new MyProducerDeserializer())
              .registerTypeAdapter(Producer.class, new MyProducerSerializer())                  
              .create(); 
```

当您序列化/反序列化您的`Brand`类时，它会将它们用于`Producer`其中包含的字段。

# php - 无法使用 Yii PHP 框架从 Instagram JSON 响应中检索子对象

> ID：15325603
> 
> 赞同：0
> 
> 时间：2013-03-10T18:02:06.250
> 
> 标签：php, json, yii, instagram

我正在尝试使用 Yii 框架和 Yii 扩展 yiinstagram 创建一个 Instagram 应用程序。我可以成功连接到 Instagram，但我无法检索所有当前用户的个人资料数据。这是我在控制器中连接到 Instagram 并检索用户数据的代码。

```
public function actionIndex()
{                                                
    $instagram = Yii::app()->instagram->getInstagramApp();
    if (isset($_GET['code']))
    {
        $accessToken=$instagram->getAccessToken();
        Yii::app()->session['InstagramAccessToken']= $accessToken;
        $instagram->setAccessToken(Yii::app()->session['InstagramAccessToken']);
        $instagramUser=$instagram->getCurrentUser();
        Yii::app()->session['InstagramUser'] = $instagramUser;
        $userFeed = $instagram->getUserFeed();
        $this->render('index', array('userFeed'=>$userFeed));
    } 
    else
    {
    echo "Could not retrieve code variable";
    }
} 
```

我将包含当前用户的 instagram 个人资料数据的会话变量放入与另一个控制器关联的这个 php 页面中：

```
<?php
/* @var $this LoginController */
$this->pageTitle=Yii::app()->name . ' - Instagram Profile'; 
?>
<h1>Instagram Profile</h1>
<div class="row">
    <div class="span3"><img src="<?php echo Yii::app()->session['InstagramUser']->profile_picture;?>"/></div>
<div class="span7">
    <ul>
        <li><b>username:</b><?php echo Yii::app()->session['InstagramUser']->username;?></li>
        <li><b>full name:</b><?php echo Yii::app()->session['InstagramUser']->full_name;?></li>
        <li><b>bio:</b><?php echo Yii::app()->session['InstagramUser']->bio;?></li>
        <li><b>website:</b><?php echo Yii::app()->session['InstagramUser']->website;?></li>
        <li><b>photos:</b><?php echo Yii::app()->session['InstagramUser']->counts->media;?></li>
        <li><b>followers:</b><?php echo Yii::app()->session['InstagramUser']->counts->followed_by;?></li>
        <li><b>follows:</b><?php echo Yii::app()->session['InstagramUser']->counts->follows;?></li>
    </ul>
    <?php echo var_dump(Yii::app()->session['InstagramUser']); ?>        
</div> 
```

来自子对象“计数”（media、followed_by、follows）的值不会显示，即使会话变量中的其余数据显示。我做了一个 Yii::app()->session['InstagramUser'] 的 var_dump，这就是我得到的：

```
object(stdClass)#22 (6) { 
["username"]=> string(9) "mdailey77" 
["bio"]=> string(36) "photographer and avid Photoshop user"
["website"]=> string(25) "http://www.mattdailey.net"
["profile_picture"]=> string(72) "http://images.instagram.com/profiles/profile_3586295_75sq_1345911013.jpg"
["full_name"]=> string(14) "Matthew Dailey"
["id"]=> string(7) "3586295" } 
```

“counts”子对象应该出现在“id”之前。如何从“计数”子对象中获取要显示的值？在过去的三天里，我一直在为此苦恼，所以任何帮助将不胜感激。谢谢。

不确定这是否有帮助，但使用相同的端点 url 这是我使用 Instagram 自己的 API 控制台得到的响应：

```
{
"meta": {
"code": 200
},
"data": {
    "username": "mdailey77",
    "bio": "photographer and avid Photoshop user",
    "website": "http://www.mattdailey.net",
    "profile_picture": "http://images.instagram.com/profiles/profile_3586295_75sq_1345911013.jpg",
    "full_name": "Matthew Dailey",
    "counts": {
          "media": 167,
          "followed_by": 24,
          "follows": 30
    },
    "id": "3586295"
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:52:19.573

查看[底层 Instagram.php 的来源](https://github.com/macuenca/Instagram-PHP-API/blob/6562f46169d8b2c8a040cd37e1e3d6308ad028a6/Instagram.php)，看起来 is 的返回`getCurrentUser()`是从身份验证中获得的。查看[Instragram 文档](http://instagram.com/developer/authentication/)，身份验证请求的返回数据不包括计数。

您在问题末尾得到的 JSON 看起来像您去了[/users/user-id/](http://instagram.com/developer/endpoints/users/#get_users)

看起来与此等效的是使用`getUser($id)`而不是`getCurrentUser()`. 您显然需要提供适当的用户 ID 来执行此操作（您应该从`getCurrentUser()`.

我想你会想要这样的东西：

```
public function actionIndex()
{                                                
    $instagram = Yii::app()->instagram->getInstagramApp();
    if (isset($_GET['code']))
    {
        $accessToken=$instagram->getAccessToken();
        Yii::app()->session['InstagramAccessToken']= $accessToken;
        $instagram->setAccessToken(Yii::app()->session['InstagramAccessToken']);
        $loggedInUser=$instagram->getCurrentUser();
        $instagramUser=$instagram->getUser($loggedInUser->id);
        Yii::app()->session['InstagramUser'] = $instagramUser;
        $userFeed = $instagram->getUserFeed();
        $this->render('index', array('userFeed'=>$userFeed));
    } 
    else
    {
    echo "Could not retrieve code variable";
    }
} 
```

# php - 当传递的数组是键而不是数组时禁止通知

> ID：15325605
> 
> 赞同：0
> 
> 时间：2013-03-10T18:02:10.087
> 
> 标签：php, arrays

我有一个简单的函数，它应该检查传入的参数是否是一个数组并且有值。该函数完美运行，除非我将多维数组作为属性传递。我怀疑 isset() 通过了，但是因为密钥可能不存在，所以它给出了一个未定义的：

```
 <?php
 $array1 = array("John","Doe");
 $array2 = array();

 function valid_array($array) {
     if (is_array($array) && count($array) > 0) {
         return true;
     }
     return false;
 }

 // Below works great:
 valid_array($array1);

 // If I pass the following I get the notice 
 // Notice: Undefined index: sample_key in ....:
 valid_array($array2['sample_key']);     

 ?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:09:26.473

抑制错误的最简单方法是在调用函数之前使用“@”符号：

示例：`@my_custom_function();` 这将抑制您的函数可能产生的任何错误（但不会修复它们）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:05:56.667

这意味着，没有数组项`sample_key`作为其键。用于`isset()`验证，不要压制它。

```
if(isset($array2['sample_key'])) 
    valid_array($array2['sample_key']); 
```

这种情况称为`Exceptions`捕获它们并引发错误。

这是一种在使用时引发错误的方法。

```
function valid_array(array $array) {
                 //    ^ Asks for a generic array to be passed
     if (is_array($array) && count($array) > 0) {
         return true;
     }
     return false;
 } 
```

# php - 检查 CSV MySQL 行中的值

> ID：15325610
> 
> 赞同：-1
> 
> 时间：2013-03-10T18:02:40.540
> 
> 标签：php, mysql, sql, regex, pdo

我将用户 ID 值存储在由 | 分隔的表字段中 (user_id1|user_id2|user_id3|user_id17)。

用户 ID 将在某些时候从该字段中添加和删除。

如何检查当前用户 ID 是否存在于字段中或不使用查询？它当然需要完全匹配。无法查找`user_id1`和查找`user_id17`。

我知道我可以使用 SELECT 查询，分解字段，然后使用，`in_array`但如果有办法使用查询来做到这一点，那就更好了。

我想我会解释一下我在做什么：我为一个小型私人网站（7 个用户）创建了一个论坛，但对它进行了更大规模的编码。

我的表结构很好：forum_categories、forum_topics、forum_posts。在表之间使用外键进行删除和更新查询。

我正在寻求帮助的是将每个用户的主题标记为未读。我可以使用 topic_id 和 user_id 创建一个新表，每个表都是一个新行，但这对于很多用户和主题来说并不好。

如果有人有更好的解决方案，我完全赞成。或者可以向我证明每个 user_id 1 行是最好的方法，那么我将非常愿意这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:19:00.817

我认为您想跟踪已读消息，而不是相反。如果您跟踪未读消息，则每次添加用户时，您都必须将该用户添加到每个主题“未读列表”中。

我按照我的评论建议查看了 SMF。他们使用单独的表格来跟踪已读消息。

一张简单的桌子，可以容纳`user_id`并且`topic_id`是您需要的。当用户阅读主题时，请确保该用户的表中有一行。

使用单独表格的另一个原因。查询数据库中的 2 个 int 值会比使用`LIKE %`语句更快。

# java - 如何在一个地方修改响应

> ID：15325611
> 
> 赞同：2
> 
> 时间：2013-03-10T18:02:46.357
> 
> 标签：java, playframework-2.0

我正在寻找 play framework 2.0.4 Java 中的一个地方来修改响应。

用例：在 GlobalSettings.onRequest() 方法中加载一些用户对象。那行得通，但我还需要设置一个cookie。我需要访问 response() 或 session()。onRequest() 方法中似乎都没有。并且没有 onResponse() 方法。

我现在看到的唯一方法是在每个控制器的方法中调用一个返回结果的方法。

**更新** 我最初在这里发布的链接现在已经死了。相反，我发现这个[http://www.playframework.com/documentation/2.0/JavaActionsComposition](http://www.playframework.com/documentation/2.0/JavaActionsComposition)解释了与下面接受的答案相同的事情。此外，关于控制器注释的注释很有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:36:50.243

在 Java 中，这似乎比在 Scala 中困难得多。基本思想是用自定义动作包装每个动作，在调用时添加标题并调用原始方法（`delegate`）。这与 Java 动作组合中的机制完全相同。

此解决方案适用于我，但未经过广泛测试，因此请检查您的所有操作是否仍然有效。

```
import play.*;
import play.mvc.*;

public class Global extends GlobalSettings {

  private class ActionWrapper extends Action.Simple {
    public ActionWrapper(Action action) {
      this.delegate = action;
    }

    @Override
    public Result call(Http.Context ctx) throws java.lang.Throwable {
      Result result = this.delegate.call(ctx);
      Http.Response response = ctx.response();
      response.setHeader("X-My-Header", "100");
      return result;
    }
  }

  @Override
  public Action onRequest(Http.Request request, java.lang.reflect.Method actionMethod) {
    return new ActionWrapper(super.onRequest(request, actionMethod));
  }

} 
```

# ios - 我怎么知道IOS App是否在后台使用faye服务器

> ID：15325633
> 
> 赞同：0
> 
> 时间：2013-03-10T18:03:49.680
> 
> 标签：ios, ruby-on-rails, ruby-on-rails-3, ios5, faye

我一直在`Faye`为我们的`IOS`聊天应用程序实施。由于我对`IOS`侧面了解不多，所以我有点困惑。一切正常，但我的客户要求我检查`IOS`应用程序是否已收到推送消息，但就`Faye`它而言，它只检查客户端停用`/meta/disconnect`的`/meta/unsubscribe`通道，但我怎么知道`IOS`应用程序进入后台，因为我必须通过发送消息`APNS`. 但是我的客户不想通过 Rails API 告诉浏览器应用程序状态。有点困惑请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:12:12.867

当您的 ApplicationDelegate 中的此方法被调用时，您可以知道您的应用程序进入后台：

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

您还可以从任何控制器监听 UIApplicationDidEnterBackgroundNotification 事件：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(appHasGoneInBackground:)
                                             name:UIApplicationDidEnterBackgroundNotification
                                           object:nil]; 
```

这是一个涵盖此主题的线程：

[AppDelegate 中后台/前台方法的使用](https://stackoverflow.com/questions/4846822/iphone-use-of-background-foreground-methods-in-appdelegate)

# big-o - 大 O 符号

> ID：15325636
> 
> 赞同：-2
> 
> 时间：2013-03-10T18:03:59.233
> 
> 标签：big-o, notation

我正在阅读大 O 符号。在我的书中，有一个例子，其中*n ²*的复杂度属于 O( *n ³* ) 类。这对我来说似乎不合逻辑，因为*n ³*取决于*n*并且它不仅仅是我们可以“摆脱”的简单常数乘数。

请向我解释为什么这两个具有相同的复杂性。我在这个论坛或其他任何地方都找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:07:39.757

大 O 确定较大 n 值的上限。O( *n ³* )大于O( *n ²* )，所以*n ²*程序仍然是O( *n ³* )。它也是 O( *n ⁴* ), O(*n ⁵ ), ..., O( *n ^(infinity)* )。

然而，反之亦然。n^3 程序不是 O( *n ²* )。相反，它将是 Omega( *n ²* )，因为 Omega 确定了一个下限（我们至少需要做多少工作）。

Big O 没有说这个上限是“严格的”，它只需要高于实际复杂度。因此，虽然 n*n 复杂度程序的界限为 O( *n ³* )，但这并不是一个非常严格的界限。O( *n ²* ) 更紧凑，信息更丰富。

# php - 将表单发布到服务器并将 user_id 保存到 $_SESSION 后未定义索引

> ID：15325638
> 
> 赞同：1
> 
> 时间：2013-03-10T18:04:09.040
> 
> 标签：php, session

我基本上是PHP的初学者。我对此有基本的了解，但真的很难找到解决方案。

**主页.php：**

```
<?php 

 require('dbconnection.php'); 

 if(isset($_POST)&&(sizeof($_POST)>0))
 {
    $sql_query_insert_user = "insert into users(user_fname,user_mname,user_lname,user_dob,user_email,user_doc,user_gender,user_nationality) values '$fname','$mname','$lname','$dob','$email','$doc','$gender','$nationality')";

    mysql_query($sql_query_insert_user,$dbconnect) or die("cannot insert to user");

    $user_id = mysql_insert_id();

    session_start();

    $_SESSION['user_id'] = $user_id;
    $_SESSION['user_name'] = $user_name;

    $sql_query_insert_user_login = "insert into users_login(user_id,user_name,user_password) values ('$user_id','$user_name','$user_password')";

    mysql_query($sql_query_insert_user_login,$dbconnect) or die("cannot connect to user login");

 }

?> 
```

我尝试像这样访问会话变量：

**用户主页.php**

```
<?php 

session_start();

echo $_SESSION['id'];
echo $_SESSION['user_name'];

?> 
```

它显示：

> 注意：未定义索引：id 注意：未定义索引：user_name

关于这个错误的任何想法？我花了很长时间试图找出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:07:24.650

您正在定义`$_SESSION['user_id'] = $user_id;`然后引用`$_SESSION['id']`. 它需要`user_`前缀。

除了那个错误，您需要确保您在标签中使用，否则该`method="post"`块将不会被执行，并且您的会话变量永远不会被设置。`<form>``if (isset($_POST...`

当一切正常时，停止使用`mysql_*`函数。它们已被弃用，社区已经迁移到 PDO 和类似的替代品，如 MySQLi 一段时间了。

# javascript - 带有文件路径参数的 window.URL.createObjectURL

> ID：15325640
> 
> 赞同：0
> 
> 时间：2013-03-10T18:04:13.580
> 
> 标签：javascript

window.URL.createObjectURL 可以与文件参数一起使用，但我需要将它与文件的字符串路径一起使用（即：File:///c:/music.Mp3） 有人知道怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:07:18.320

由于安全限制，这是不允许的。如果可能的话，任何人都可以编写一个可以下载您计算机上所有文件的网页。这就是为什么您必须使用`File`对象的原因，因为您只能从用户输入中获取这些对象。

如果您详细说明您要解决的问题，我可以尝试提供其他建议。

# android - 通过蓝牙播放 TTS

> ID：15325641
> 
> 赞同：1
> 
> 时间：2013-03-10T18:04:19.447
> 
> 标签：android, bluetooth, text-to-speech

我有一个小应用程序，如果连接，我希望能够将 TTS 音频发送到扬声器或蓝牙耳机。它在免提电话模式下工作正常，但在 BT 上没有运气。知道如何解决这个问题吗？代码片段如下：'

私人无效说话（字符串s）{

```
 HashMap<String, String> hash = new HashMap<String, String>(); 

        hash.put(TextToSpeech.Engine.KEY_PARAM_STREAM, String.valueOf(AudioManager.STREAM_SYSTEM));

        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);

        audioManager.setMode(AudioManager.MODE_NORMAL);
        audioManager.startBluetoothSco();
        audioManager.setBluetoothScoOn(true);

        tts.speak(s, TextToSpeech.QUEUE_ADD, hash);

     } 
```

'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:07:01.207

[在Using the Android RecognizerIntent with a bluetooth 耳机](https://stackoverflow.com/questions/14991158/using-the-android-recognizerintent-with-a-bluetooth-headset/14993590#14993590)中使用我的答案

在您声明 private void speak(String s) 的活动中添加一个类成员

```
BluetoothHeadsetUtils mBluetoothHelper;
TelephonyManager mTelManager;
MyPhoneStateListener mPhoneStateListener = new MyPhoneStateListener(); 
```

在同一活动 onCreate() 添加

```
@Override
public void onCreate()
{
     mBluetoothHelper = new BluetoothHeadsetUtils(this);
     mTelManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
     mTelManager.listen(mPhoneStateListener, PhoneStateListener.LISTEN_CALL_STATE);
} 
```

并添加活动的 onResume() 和 onPause

```
@Override
onResume()
{ 
    mBluetoothHelper.start();
}

@Override
onPause()
{
    mBluetoothHelper.stop();
} 
```

您可以将您的 speak(String s) 定义为

```
public void speak(String s, String utteranceId) // utteranceId can be an empty string
{
    HashMap<String, String> myHashRender = new HashMap<String, String>();
    myHashRender.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, utteranceId);
    if (mBluetoothHelper.isOnHeadsetSco())
    {
        myHashRender.put(TextToSpeech.Engine.KEY_PARAM_STREAM, 
                String.valueOf(AudioManager.STREAM_VOICE_CALL));
    }
    tts.speak(s, TextToSpeech.QUEUE_ADD, myHashRender);
} 
```

而不是广播接收器使用电话状态监听器

```
protected class MyPhoneStateListener extends PhoneStateListener
{

    @Override
    public void onCallStateChanged(int state, String incomingNumber)
    {

                switch (state)
                {
                    case TelephonyManager.CALL_STATE_RINGING:

                            mAudioManager.setStreamMute(AudioManager.STREAM_RING, true);
                            speak("whatever you want here", "ringing"); //$NON-NLS-1$

                            Log.d(TAG, "ringing cancel recognizer");  //$NON-NLS-1$

                        break;

                    case TelephonyManager.CALL_STATE_OFFHOOK:

                            Log.d(TAG, "offhook cancel recognizer");  //$NON-NLS-1$

                        break;

                    case TelephonyManager.CALL_STATE_IDLE:

                        new Thread(new Runnable()
                        {   
                            @Override
                            public void run()
                            {
                                try
                                {
                                    Thread.sleep(2000);
                                }
                                catch (InterruptedException e)
                                {

                                }
                                mBluetoothHelper.start();
                            }
                        }).start();
                        Log.d(TAG, "call state idle");  //$NON-NLS-1$

            }

    }
} 
```

在您的活动或服务中添加实现 OnUtteranceCompletedListener 并添加以下代码

```
@Override
public void onUtteranceCompleted(String utteranceId)
{
    if (utteranceId.equals("ringing"))
    {
        mAudioManager.setStreamMute(AudioManager.STREAM_RING, false);
        mBluetoothHelper.stop();
    }
} 
```

# vba - 如何将表单记录源设置为记录集中返回的第一条记录？

> ID：15325648
> 
> 赞同：0
> 
> 时间：2013-03-10T18:05:16.867
> 
> 标签：vba, ms-access

我正在尝试将从记录集返回的第一条记录设置为“维护”形式的记录源我将如何执行此操作？

我这样做的原因是我构建了一个 VBA 代码，该代码根据某人进入某个字段来查找数据库中的所有记录 - 结果可能是 0、1 或大于 1。如何将记录集更改为返回第一条记录，然后当他们按下另一个按钮时，移动到返回的下一条记录？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:24:20.390

我不太确定你在看什么。但也许它可以帮助你：

```
'access to first field of the first row in record set variable (record set has just beed poppulated)  
rs.Fields(0).Value
'moving to second row of record set         
rs.MoveNext 
```

GL！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:30:24.000

这里有一个很大的沟通问题。

> 如何将记录集更改为返回的第一条记录

默认情况下，新打开的记录集位于第一条记录（除非没有记录）。向我们展示您现有的用于打开记录集的 VBA 代码，以及为什么您认为它尚未出现在第一条记录中。

> 当他们按下另一个按钮时，移动到返回的下一条记录？

@Wawrzyniec 已经发布了。

> 如何将结果设置为表单的记录集

什么结果，什么形式？您是指您在 VBA 内部生成的记录集吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:57:51.380

我通过将记录集设置为我的 SQL 语句找到了答案。然后我将该记录集设置为我的目标表单的记录源。

这意味着由于表单是在向导中构建的，“下一个”和“上一个”按钮将正常工作；在记录之间移动。

```
Forms!FrmMaintenance.RecordSource = SQL 
```

# c - 指向 void 作为函数中的参数的指针，没有可变数量参数的原型

> ID：15325649
> 
> 赞同：-3
> 
> 时间：2013-03-10T18:05:18.070
> 
> 标签：c, pointers, microcontroller, void-pointers, function-declaration

假设我有一个应该接受任意数量参数的函数，所以我在这里要做的是声明没有原型，并在代码中调用该函数时创建该函数。我正在使用指向 void 的指针来接收随机数的参数参数，但是，在这样做时，对第一个参数的内存地址的引用是唯一传递的东西，所以要让它工作，我必须声明变量的顺序与我将在代码中调用它们的顺序相同：

```
unsigned char result=0;
unsigned char a=1; 
unsigned char b=2;
unsigned char c=3;

char main (void)
{
    for (;;)
    {
        result = function (&a, &b, &c);
        result = function (&c, &b, &a);
    }
}

function (void *vPointer)
{
    return (1);
} 
```

此外，我声明没有类型的函数，因为它与调用不匹配（它也被隐式声明）。

这里的结果是对函数中发送的第一个参数的引用，所以如果 i 在第一个函数调用中指向下一个地址，它将起作用，但在第二个调用中，它获取对 c 的引用，以及任何内存在它放置的位置之前。

任何人都知道以正确方式对参数进行排序的方法吗？还是在函数中接收未知数量参数的有效方法？

**注意：（...）不得使用。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:09:52.600

*所有*C 函数都应该有原型。它们实际上不是强制性的，但没有充分的理由不使用它们（除非您被不支持它们的 pre-ANSI 编译器所困扰）。（但请参阅此答案的底部。）

如果您想要一个接受可变数量参数的函数，则该原型应以 结尾`, ...`，并且函数本身应使用该`<stdarg.h>`机制来处理其参数。（这需要至少一个具有已定义类型的参数；该参数用作以下参数的锚点。）[在此处](http://man7.org/linux/man-pages/man3/stdarg.3.html)和其他地方都有记录。

在我输入此内容时，您使用“**注意：不应使用任何库（例如 (...) ）** ”更新了您的问题。`<stdarg.h>`是所有符合 C 实现（包括独立（嵌入式）实现）所需的少数头文件之一——因为它不定义任何函数，只定义类型和宏。您的 C 实现应该支持它。如果不是，那么它不是一个符合标准的 C 实现，您需要准确地告诉我们您正在使用什么编译器和/或阅读它的文档以了解它如何处理可变参数函数或等效函数。

如果您真的不能使用`, ...`and `<stdarg.h>`（或者可能是较旧的`<varargs.h>`），那么您可以使用固定数量的参数定义您的函数，足以满足所有用途，然后让调用者传递额外的空指针。

**编辑：**

这是基于评论和聊天中的新信息的更新。

OP 有一个家庭作业要`printf`为一些 TI 微控制器实现，由于某种原因*不*使用`, ...`符号或`<stdarg.h>`. 有问题的编译器显然实现了 C89/C90，因此它确实支持这两个特性；这是一个任意限制。

该信息应该存在于问题中，这就是为什么在 OP 更新它之前我不赞成它的原因。

没有可移植的方法来实现这一点——这正是为什么它是`, ...`标准语言`<stdarg.h>`的一部分，也是标准库的一部分。

可能最好的方法是编写一个使用`, ...`and的程序`<stdarg.h>`，然后调用编译器，以便它只显示预处理器的输出（解析各种`va_*`宏和`va_list`类型），然后模仿它。*而且*您必须假设或使用编译器文档验证可变参数和非可变参数函数的调用约定是兼容的。换句话说，找出这个特定的实现做了什么，然后重新发明一个类似的轮子。

（我希望家庭作业的重点是展示标准技术有多好。）

**更新 2：**

我在上面写道，所有 C 函数都应该有原型。这实际上可能是该规则的一个罕见例外。至少其中一个调用：

```
printf("Hello\n");
printf("x = %d\n", 42); 
```

必须从符合要求的编译器生成诊断，除非`printf`声明为`, ...`（家庭作业禁止这样做），或者没有可见的原型`printf`。如果没有原型，那么至少有一个调用将具有未定义的行为（C 标准未定义的行为，尽管它可能由特定的编译器定义）。

实际上，为了满足作业要求，您必须假装您使用的是 ANSI C 之前的编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:13:32.563

使用具有可变参数的函数的唯一“干净”方法是使用*可变参数*函数：

```
#include <stdarg.h>

void myfun(int foo, ...) {
       va_list ap;
       va_start(foo, ap);
       // ...
       va_end(ap);
} 
```

你需要确保你知道你实际期望的参数（通常你要么使用你的第一个参数来指示期望有多少（和哪些）参数（示例是一个`int`说“现在来参数”），或者一个格式字符串像“%d %s:%s”，表示现在有一个 int 和两个 char*），或者你使用一个最终的终止参数（例如，读取参数直到你遇到 NULL）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:29:46.597

您可以使用结构：-

```
typedef struct _Params {
   int m_a;
   int m_b;
   int m_c;
} Params; 
```

那么你的参数就不能混淆了。就像您需要的最大字母一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T18:23:51.580

您可以使用可变长度的数组：

```
unsigned char result=0;
unsigned char a=1; 
unsigned char b=2;
unsigned char c=3;

function (int len, void *vPointer);

int main (void)
{
    for (;;)
    {
        unsigned char args[3];
        args[0] = a;
        args[1] = b;
        args[2] = c;
        result = function (3, args);
        args[0] = c;
        args[1] = b;
        args[2] = a;
        result = function (3, args);
    }
    return 0;
}

function (int len, void *vPointer)
{
    return (1);
} 
```

但我建议您改用标准方式，即可变参数函数。

//jk

# java - (reader.ready()) 和使用 for 循环读取文件有什么区别？

> ID：15325652
> 
> 赞同：1
> 
> 时间：2013-03-10T18:05:30.657
> 
> 标签：java, for-loop, while-loop

在我之前的问题中，我询问了循环文件的问题，并解决了它。但是，我意识到该方法未能读取最后一组行/记录。所以我把原来的`for`循环改成了`while(reader.ready())`. 所以：

**原始`for`循环：**

```
 int numberOfLines = readLines();
     numberOfLines = numberOfLines / 6;

     for(int i=0;i < numberOfLines; i++) 
```

**将其更改为：**

```
BufferedReader reader = new BufferedReader(new FileReader("test.dat"));

while(reader.ready()) 
```

两者之间有什么区别，更具体地说，具体是`.ready()`做什么的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:21:08.353

从[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)：

> 告诉这个流是否准备好被读取。如果缓冲区不为空，或者底层字符流已准备好，则缓冲字符流已准备好。
> 
> **返回：**
> 如果保证下一个[read()](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#read())不会阻塞输入，则返回 true，否则返回 false。请注意，返回 false 并不能保证下一次读取将阻塞。

`ready`因此，如果`read`保证不阻塞，则缓冲区将是。

正如 JB Nizet[指出的那样](https://stackoverflow.com/questions/15325652/whats-the-difference-between-reader-ready-and-using-a-for-loop-to-read-thro#comment21640420_15325815)，这并不*一定意味着您已经到达文件的末尾*。如果出于任何原因，您的流*可能会*阻塞，`ready`则将返回`false`.

相反，请尝试像这样读取您的文件：

```
String line = reader.readLine();
while (line != null) {
    // code code code
    line = reader.readLine();
} 
```

# android - 无法将 google-play-services 正确安装到 Eclipse 中（试图让地图正常工作）

> ID：15325654
> 
> 赞同：6
> 
> 时间：2013-03-10T18:05:43.000
> 
> 标签：android, google-maps-android-api-2

我当前的 wokspace 设置如下所示：

![在此处输入图像描述](../Images/2245314b6b518e93c2600596c5279467.png) ![在此处输入图像描述](../Images/a11476aedd370b4a1917a480328a15cc.png)

然而，人们告诉我，要让地图正常工作，我还需要在我的**“Android Dependencies”文件夹中有****“google-play-services_lib.jar”**，而这样做的方法是：“to Google Play Services into您的项目**项目 -> 属性 -> Android -> 库，添加 -> google-play-services_lib** "

 ****唯一的问题是它总是在*最初的绿色标记*之后，当重新打开“项目->属性->安卓->库”时它变成一个*红十字*……而且也没有“google-play-services_lib.jar” " 被添加到项目中的 "Android Dependencies"

这个问题是这个问题的产物：[试图让地图 v2 Android 演示](https://stackoverflow.com/questions/15301607/trying-to-get-maps-v2-android-demo-working/15302134)在我上面被告知的地方工作对于让地图在我的应用程序中工作是必要的。（否则在扩展包含地图片段的 XML 时会出错。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:03:20.587

您是否尝试过使用`Google APIs`而不是`Android 4.2.2`？使用它将使用`Google Maps`依赖项。

* * *

我刚刚使用 Google Maps v2 而不是 Google API 作为构建，而是使用 Android 4.1 制作了一个“工作应用程序”（它不会引发任何错误，但我懒得制作密钥）。这是我的程序。

1.  从 SDK 下载管理器下载库。
2.  将具有此路径“.../android-sdk/extras/google/google_play_services/libproject/google-play-services_lib”的文件夹“google-play-services_lib”复制到我保存库的另一个文件夹中。
3.  在 Eclipse 中，我从现有代码中选择了新项目 - Android 项目。它被导入没有任何问题。
4.  右键单击测试项目，单击属性 - Android - 添加 - 现在在我的工作区中的 google-play-services_lib。
5.  通过尝试子类查看它是否有效`com.google.android.gms.maps.MapFragment`。

如果您遇到任何错误，请回复，如果您做得对，一切都会奏效。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T23:54:10.367

首先，您需要从 Package Explorer 中删除您的 google-play-services 项目，然后您需要将目录 C:/android-sdks.....google-play-service 中的“google-play-service 文件夹”复制到您的WORKSPACE 然后打开 Eclipse 从您的 WORKSPACE 导入项目“google-play-services”，然后您可以添加库...

希望能帮助到你：）****

# encryption - 通过将字母转换为数字来加密消息 NEED HELP..答案是 UTTQ CTOA...如何？

> ID：15325660
> 
> 赞同：0
> 
> 时间：2013-03-10T18:06:13.000
> 
> 标签：encryption, discrete-mathematics

通过将字母转换为数字，应用加密函数 f (p) = (3p + 7) mod 26，然后将数字转换回字母来加密消息 NEED HELP。答：加密形式：UTTQ CTOA。

有人可以向我解释他们是如何得到这个答案的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:15:44.033

首先，您必须为每个字母分配一个数字：

A = 0; B = 1; C = 2 ....

然后将该函数应用于您获得的数字并将其转换回字母：

N 是 13，所以 13 * 3 = 39，+ 7 = 46 然后 mod 26 = 20

转换回来，20 = U

如果您在句子的所有字母上都这样做，您将获得加密形式

这里是执行此操作的 C# 代码：

```
 private static string encrypt(string s)
    {
        char[] tmp = new char[s.Length];
        int i = 0;

        foreach (char c in s)
        {
            tmp[i] = (char)((((c - 'A') * 3 + 7) % 26) + 'A');
            i++;
        }

        return new string(tmp);
    } 
```

在这里你的解密功能（好吧，这个很乱但有效）：

```
 private static string decrypt(string s)
    {
        string res = s;
        for (int i = 0; i < 5; i++)
            res = encrypt(res);

        return res;
    } 
```

# ruby - Ruby Project Euler # 12 效率

> ID：15325664
> 
> 赞同：0
> 
> 时间：2013-03-10T18:06:26.697
> 
> 标签：ruby

处理 Project Euler 的第 12 题：

> 三角形数的序列是通过添加自然数生成的。所以第 7 个三角形数是 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28。前十项是：
> 
> 1, 3, 6, 10, 15, 21, 28, 36, 45, 55, ...
> 
> 让我们列出前七个三角形数的因数：
> 
> ```
> 1:1
>  3：1,3
>  6：1,2,3,6
> 10：1,2,5,10
> 15：1,3,5,15
> 21: 1,3,7,21
> 28：1、2、4、7、14、28
> 
> ```
> 
> 我们可以看到 28 是第一个有五个以上除数的三角形数。
> 
> 第一个有超过 500 个除数的三角形数的值是多少？

这是我所拥有的：

```
require 'reusable'

# The idea here is that 2^n is the smallest number with n factors, 
# according to their definition, so it's a good place to start.
# It also happens to be a HUGE number, so I'm worried I'm thinking 
# about this wrong. Did 4999 instead of 5000, just to make sure 
# I didn't overshoot.
start = 2 * 4999

# The faster way to calculate the nth Triangle number
def nthTriangle(n)
 n * (n + 1) / 2
end

def answer(num)
    i = startingTriangle(num)
    while true
        triangle = i*(i+1)/2
        puts triangle
        factors = numFactors(triangle)
        return "#{triangle} is triangle number #{i}, with #{factors} factors." if factors > num
        i += 1
    end
end

# Basic reversal of the nthTriangle thing to figure
# out which n to start with in the answer function.
def startingTriangle(n)
    power = n - 2
    sqrt(power * 2).to_i - 1
end

puts answer(5000) 
```

还有那个必需的文件（我试图将我将在一堆欧拉问题中重用的方法放入其中）：

```
def primesUpTo(n)
  nums = [0, 0] + (2..n).to_a
  (2..sqrt(n).to_i+1).each do |i|
    if nums[i].nonzero?
      (i**2..n).step(i) {|m| nums[m] = 0}
    end
  end
  nums.find_all {|m| m.nonzero?}
end

def prime?(n)
    test = primesUpTo(sqrt(n).to_i)
    test.each do |i|
        if n % i == 0
            return false
        end
    end
    true
end

# Just for faster, more intuitive (to me) array summing
def sum(array)
    array.inject(0) {|s, n| s + n }
end

# Ditto
def product(array)
    array.inject(1) {|p, n| p * n}
end

# I don't like typing the 'Math.'
def sqrt(n)
    Math.sqrt(n)
end

# Returns an array of arrays of the prime factors of num
# Form [[factor1, power1],[factor2, power2]]
# Ex: primeFactors(12) == [[2,2],[3,1]]
def primeFactors(n)
    array = []
    # 2 3 
    primesUpTo((n/2).to_i+1).select{ |i| n % i == 0 }.each do |p|
        pcount = 1
        n = n / p
        while n % p == 0
            pcount += 1
            n = n / p
        end
        array << [p, pcount]
    end
    array
end

# Returns the number of factors a number has
# INCLUDING both the number itself and 1
# ex: numFactors(28) = 6
def numFactors(n)
    return 2 if prime?(n)
    product = 1
    primeFactors(n).each do |i|
        product *= i[1] + 1
    end
    product
end 
```

我的问题是我的代码真的超级慢。如果我从 1 而不是我的起始编号开始，则需要一分钟 + 才能达到 200000（远不及 2^4999）。但除了废弃库素数解决方案并将所有素数添加到我一直提到的数组中——我觉得这只会让它更快一点——我想不出如何让它更快。它需要更快。

我在想这一切都错了吗？有什么建议么？

关于如何提高我的任何库方法的效率的任何建议也很有用，我可能会一次又一次地使用这些方法。我想从头开始制作它们，所以我理解它们，但我担心它们效率很低。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:35:15.507

从您的代码：

> 这里的想法是 2^n 是具有 n 个因子的最小数

从所述的 Project Euler 任务中：

> 我们可以看到 28 是第一个有五个以上除数的三角形数。

我不确定为什么您认为 2^n 是具有 n 个因子的最小数字，但问题中给出的示例清楚地证明了您的假设是错误的，因为 2^5 = 32，大于 28。

我的解决方案从 1 开始搜索并且相当有效。我根本不使用素数。

**附录：**为了完整起见，除了从一个过高的数字开始之外，另一个大问题是搜索大于 5000 个除数而不是大于 500，正如您在评论中注意到并指出的那样。

# java - 玩框架 zentasks 教程 groupBy

> ID：15325668
> 
> 赞同：0
> 
> 时间：2013-03-10T18:07:02.330
> 
> 标签：java, playframework-2.0

我正在做 zentasks 教程。我在这一步位于这里

[https://github.com/playframework/Play20/wiki/JavaGuide3](https://github.com/playframework/Play20/wiki/JavaGuide3)

我已经覆盖到标题**添加一些样式**。在此之前，您应该刷新页面，一切都应该没问题。

当我刷新时，我收到以下错误

![在此处输入图像描述](../Images/75074efe9fa35fb16c41bd1b60cc4856.png)

我已经看了一段时间了，无法弄清楚我可能做错了什么。

编辑这是我这个页面的代码

```
@(projects: List[Project])(body: Html)

<!DOCTYPE html>

<html>
    <head>
        <title>Zentasks</title>
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
    </head>
    <body>
        <header>
            <a href="@routes.Application.index" id="logo"><span>Zen</span>tasks</a>
        </header>
        <nav>
            <h4 class="dashboard"><a href="#/">Dashboard</a></h4>
            <ul id="projects">
                @projects.groupBy(_.folder).map{
                    case(group, projects) => {
                        @views.html.projects.group(group,projects)
                    }
                } 
                @projects(0).folder </br>
                @projects(1).folder </br>
                @projects(2).folder </br>
                @projects(3).folder </br>
                @projects(4).folder </br>
                @projects(5).folder </br>
                @projects(6).folder </br>

            </ul>
        </nav>
        <section id="main">
            @body
        </section>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:02:01.510

我发现了问题，它真的很小。

编码

```
 @projects.groupBy(_.folder).map{
                case(group, projects) => {
                    @views.html.projects.group(group,projects)
                }
            } 
```

应该

```
 @projects.groupBy(_.folder).map{
                case (group, projects) => {
                    @views.html.projects.group(group,projects)
                }
            } 
```

如果您没有看到差异（我花了 3 个小时才找到它！），“case”后面有一个空格。就是这样。我的项目现在编译。

# mysql - MySQL 我可以将这两个查询合并在一起吗？

> ID：15325669
> 
> 赞同：1
> 
> 时间：2013-03-10T18:07:04.327
> 
> 标签：mysql

我想将这两个查询的结果放在一起，但不知道如何组合它们。目标是按产品获得每月的总销售额。我有店内购买和在线订单。这是从在线订单中获取每月总销售额的第一个查询：

```
SELECT YEAR( orderDate ) AS "SalesYear"
     , MONTH( orderDate ) AS "SalesMonth"
     , SUM( orderTotal ) AS "TotalSales"
     , products.productID 
FROM orders
INNER JOIN orderdetails ON orders.orderID = orderDetails.orderID
INNER JOIN products ON orderDetails.productID = products.productID
GROUP BY productID, YEAR( orderDate ) , MONTH( orderDate )
ORDER BY YEAR( orderDate ) , MONTH( orderDate ) 
```

这是从商店购买中按产品检索每月总销售额的查询：

```
SELECT YEAR( orderDate ) AS "SalesYear"
    , MONTH( orderDate ) AS "SalesMonth"
    , SUM( orderTotal ) AS "TotalSales"
    , products.productID 
FROM in_storepurchase
INNER JOIN instorepurchasedetails 
   ON in_storepurchase.isPurchaseID = instorepurchasedetails.isPurchaseID
INNER JOIN products 
   ON instorepurchasedetails.productID = products.productID
 GROUP BY productID, YEAR( orderDate ) , MONTH( orderDate )
 ORDER BY YEAR( orderDate ) , MONTH( orderDate ) 
```

任何有关如何将其纳入一个查询以便我可以在单个表上获得所有结果的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:13:57.990

当然，你可以使用 UNION：

```
SELECT 
    YEAR( t.orderDate ) AS "SalesYear", MONTH( t.orderDate ) AS "SalesMonth", SUM( t.orderTotal ) AS "TotalSales", productID
FROM
(
 select 1 
     UNION ALL
 select 2 
) as t
GROUP BY
    t.productID, YEAR( t.orderDate ) , MONTH( t.orderDate ) 
```

# java - SQL 语句给出错误

> ID：15325672
> 
> 赞同：1
> 
> 时间：2013-03-10T18:07:09.910
> 
> 标签：java, android, database, sqlite

我在 Android 上使用 SQLite，运行此命令时遇到问题：

```
UPDATE vocab_words SET correct = 5 
WHERE
    name = 'AQA GCSE Spanish Higher',
    foreign_word = 'campo, el',
    english_meaning = 'field, the' 
```

这里有什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T18:10:06.103

您的 SQL 查询有语法错误。请从以下位置更改您的查询：

```
UPDATE vocab_words SET correct = 5 WHERE name = 'AQA GCSE Spanish Higher', foreign_word = 'campo, el', english_meaning = 'field, the' 
```

到：

```
UPDATE vocab_words SET correct = 5 WHERE name = 'AQA GCSE Spanish Higher'AND foreign_word = 'campo, el'AND english_meaning = 'field, the' 
```

此外，我建议您使用一些教程阅读 SQL 的基础知识。这是基本错误之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T18:09:57.253

*使用`AND`not with组合两个或多个简单条件`comma(,)`。*

> UPDATE vocab_words SET correct = 5 WHERE name = 'AQA GCSE Spanish Higher', foreign_word = 'campo, el', english_meaning = 'field, the'

用。。。来代替

> UPDATE vocab_words SET correct = 5 WHERE name = 'AQA GCSE Spanish Higher' AND foreign_word = 'campo, el' AND english_meaning = 'field, the'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:26:04.517

从最初查看您的帖子开始，更新声明应该是 -

```
UPDATE vocab_words SET correct = 5 WHERE name = 'AQA GCSE Spanish Higher' and foreign_word = 'campo, el' and english_meaning = 'field, the' 
```

# java - 使用 servlet 来管理状态？

> ID：15325674
> 
> 赞同：0
> 
> 时间：2013-03-10T18:07:17.520
> 
> 标签：java, jakarta-ee, servlets

servlet 是一个从 post&get 获取数据并将数据传递到 Web 应用程序的视图部分的对象，因此可以用作：

*   处理或存储从 HTML 表单提交的数据
*   提供动态内容，例如数据库查询的结果

但是在维基百科中也可以看到：

*   管理无状态 HTTP 协议中不存在的状态信息，例如将商品填充到相应客户的购物车中

那么这里所说的将商品填充到相应客户的购物车中是什么意思呢？

这是否意味着 servlet 是 Session 变量？有人可以解释这种行为并更好地举一个例子吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:30:02.880

HTTP 是无状态的。这意味着服务器返回的数据不依赖于用户之前的任何操作。Cookie 和其他非 HTTP 方法使 Web 看起来是有状态的，例如使用户能够在网站上登录和退出。

查看： [http ://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html)

对于应用程序开发人员来说，它始终是无状态的。

对于最终用户来说，它似乎是有状态的

现在，

每个 HTTP 请求都会导致一个新的 servlet 调用（即，一个线程调用 servlet 的服务和 doXxx 方法），无论连接是否保持活动。

**编辑：**

HttpSession 对象用于设置与特定会话相关的信息，例如当前会话的购物车中的产品数量。请注意，如果浏览器关闭或清除 cookie，会话将关闭。

网络服务器如何知道它是同一个会话？

Webservers 以 cookie 的形式向浏览器发送 sessionId。并且，浏览器将具有 sessionId 的 cookie 发送回服务器以供后续请求。

浏览器如何识别为链接/请求发送哪些 cookie？

它基于这些参数。如果请求与这些参数匹配，则浏览器会发送该特定 cookie：

域：发出请求的域名。

路径：如果上下文根路径名称相同。

安全：如果给定的 cookie 可以在此非安全通道上发送，则服务器发送

如果 cookie 被禁用，则它使用 URL 重写。

即使在浏览器关闭和打开后也可以保留会话吗？是的。答案是 cookie + DB + 谷歌搜索 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:22:08.723

servlet 还可以通过以下方式访问由您的容器（appsrver）创建的会话`request.getSession()`

使用会话，servlet 可以进行会话管理，例如将购物车项目存储在会话中，并使其在来自客户端的不同请求时可访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:13:12.080

可从 HttpServletRequest 访问 HttpSession 对象 对象作为 Servlet 的 doXXX() 方法中的方法 arg 传递。此会话是有状态的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T18:20:45.280

在 java Servlet 中，

我们可以将 get/post 请求参数中的变量值存储在

请求状态或会话状态。

对于请求状态变量 -

```
request.setAttribute("requestvariable", "My Value"); 
```

将值保存在一个完整的请求 - 响应周期中。

在会话状态变量中 -

```
request.getSession().setAttribute("sessionvariable", "My Value"); 
```

将在同一浏览器会话中保存多个请求 - 响应周期中的值。

变量的值也可以通过

```
request.getSession().removeAttribute("sessionvariable"); 
```

此会话变量值可以在应用程序中的多个 jsp/servlet 中提供，例如会话中的用户购物车信息。

因此 Servlet 在这里作为控制器工作，变量的状态存储在框架指定的 api 和变量中的会话或请求中。

# iphone - 横向模式下的 Vimeo 视频

> ID：15325676
> 
> 赞同：1
> 
> 时间：2013-03-10T18:07:21.470
> 
> 标签：iphone, objective-c, xcode

在一个应用程序中，我正在显示来自 Vimeo 和 Youtube 的视频。默认情况下，所有视频都应以横向模式打开。整个应用程序仅基于纵向。Youtube 视频自动以横向模式打开，并且还支持方向而不需要我想要的任何努力，但问题在于 Vimeo 视频。Vimeo 视频不在横向模式下播放，也不支持方向。我遇到了大麻烦，如果有人知道，请帮助我。对于 Youtube，我已经加载了以下 Html 字符串：

```
 NSString *embedHTML =  @"\
<html><head>\
<style type=\"text/css\">\
body {\
    background-color: transparent;\
    color: white;\
    }\
</style>\
</head><body style=\"margin:0\">\
<embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
width=\"%0.0f\" height=\"%0.0f\"></embed>\
</body></html>";
NSString *html = [NSString stringWithFormat:embedHTML, urlString, frame.size.width, frame.size.height];
return html; 
```

对于 Vimeo，我编写了以下 Html 字符串：

```
@"<iframe src=\"http://player.vimeo.com/video/%@?title=0&autoplay=0&portrait=0&color=333&api=1&player_id=vimeoplayer\" width=\"50\" height=\"50\" frameborder=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>" 
```

# android - 简单的计数器按钮 android

> ID：15325687
> 
> 赞同：-1
> 
> 时间：2013-03-10T18:07:46.150
> 
> 标签：android, user-interface

我想做一个简单的计数按钮，如下图所示

![在此处输入图像描述](../Images/01e6668b9b3029549ae09c40b541f29d.png)

我能想象的最简单的方法是定义两个按钮和一个文本视图。有没有更好的解决方案来实现这个目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:13:10.870

> 我能想象的最简单的方法是定义两个按钮和一个文本视图。

如果你想创建一个“简单的计数按钮”，那么这是最明显的方法......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:18:50.583

没有`no such widget available`哪个有这样的用户界面，您需要正确的自定义或按照您正在做的方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T18:23:02.510

是的，二`ImageButtons`和一`TextView`（以及计数逻辑）将是您应该如何做的。

# android - 在从 sqlite datadase 检索到的位置上填充精确点

> ID：15325688
> 
> 赞同：0
> 
> 时间：2013-03-10T18:07:50.080
> 
> 标签：android, sqlite, android-maps

我是 android 新手，正在尝试开发一个应用程序，我想在其中从 sqlite db 检索位置并在地图上显示这些位置的精确点。我在这里阅读了许多链接和其他问题，但我不知道如何开始使用它。请帮助我提供一些示例代码或有用的链接。提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T00:14:00.363

Android SQLite：[https ://developer.android.com/training/basics/data-storage/databases.html](https://developer.android.com/training/basics/data-storage/databases.html)

要实现此处阅读的地图：[https ://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

如果你告诉我你尝试了什么，我可以帮助你。

# java - Java - 获取当前星期的日期名称数组

> ID：15325690
> 
> 赞同：6
> 
> 时间：2013-03-10T18:07:53.403
> 
> 标签：java, arrays, loops, calendar, dayofweek

我正在寻找的是在java中创建一个星期几的数组，从昨天开始，最多六天

```
 String daysWeek[] = { "Yesterday", "Today", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday"}; 
```

我想以昨天和今天返回的数组的前两个元素。

起初，通过使用这似乎是一项简单的任务

```
currentDay = Calendar.getInstance().get(Calendar.DAY_OF_WEEK);

String daysList[] = {"Sunday", "Monday", "Tuesday", "Wednesday",
            "Thursday", "Friday", "Saturday"};

String daysWeek[] = {"Yesterday", "Today", daysList[currentDay], daysList[currentDay+1], ...}; 
```

上面的注释`daysList[currentDay]`将在明天返回，因为数组`daysList`从 0 开始，即如果`currentDay = 3`今天是星期二，那么这将是`daysList[2]`。

但我的问题在于，如果 currentDay 是 7，这意味着今天是星期六，那么`currentDay+1`明天将是数组中不存在的第八个元素。

如果今天是星期三或更晚然后一次，我可以循环我的数字吗？`currentDay + x > 7`设置`currentDay`回 1？

这一切都发生在一种称为`getDaysList(currentDay)`返回`daysWeek[]`数组的方法中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T18:11:30.357

这里对您有用的一个函数是*模*( `%`) 运算符。

基本上，模运算符所做的是取除法的其余部分，这正是您想要的。（记得在四年级时，“9 / 2”不是 4.5，而是 4 余数 1？这就是余数部分。）

因此，而不是：

```
days[currentDay + x] 
```

采用：

```
days[(currentDay + x) % 7] 
```

模运算符返回值的快速示例：

```
 0 % 7 = 0   (0 / 7 = 0 R0)
 1 % 7 = 1   (1 / 7 = 0 R1)
 6 % 7 = 6   (6 / 7 = 0 R6)
 7 % 7 = 0   (7 / 7 = 1 R0)
 8 % 7 = 1   (8 / 7 = 1 R1)
15 % 7 = 1   (15 / 7 = 2 R1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-10T00:47:31.887

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T18:16:10.480

您可以使用余数运算符 ( `%`)：

```
6 % 7 == 6
7 % 7 == 0
8 % 7 == 1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-01-27T19:14:16.510

```
import java.text.SimpleDateFormat;
import java.util.*;
class Date {</p><br>
    public static void main(String args[]) { </p><br>
    // Monday 01/27/2019 15:07:53 AM
    System.out.println("Current Day: "+new SimpleDateFormat("EEEE MM-dd-yyyy HH:mm:ss a").format(Calendar.getInstance().getTime()) );
   }
} 
```

# c# - 如果值是sql查询中的字符串，如何传递表名

> ID：15325691
> 
> 赞同：0
> 
> 时间：2013-03-10T18:07:57.133
> 
> 标签：c#

```
private void Save_rec_Click(object sender, EventArgs e)
{
    string pattern = ("[\\s]+");
    string input = firstname.Text;
    string replacement = "_";
    Regex rgx = new Regex(pattern);
    string result = rgx.Replace(input, replacement);
    msg.Text = result;

    cmd = new SqlCeCommand("create table " + result + "(id int, first_name nVarChar(100))", con);
    cmd.ExecuteNonQuery();
    cmd = new SqlCeCommand("insert into '"+ result +"' values(1,'" + firstname.Text + "')", con);
    cmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:16:46.593

不能经常说出这一点，尤其是因为它在 .NET 中相当容易。通过使用 SqlCommand 参数来简单地防止 SQL 注入发生，如下所示：

```
string strUserInput = TextBox1.Text;

SqlCommand sqlComm = new SqlCommand();
sqlComm.CommandText = "SELECT SomeColumn FROM Table WHERE Name = @ParamName";
SqlParameter param = cmd.Parameters.Add("@ParamName", strUserInput); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:31:18.067

这更像是一个评论，但是在允许评论的空间中有太多要解决的问题。首先，此代码的最终用户是谁？它是纯内部的并且受到严格限制吗？因为您将自己暴露在[SQL 注入](http://msdn.microsoft.com/en-us/library/ms161953.aspx)攻击之下。

也就是说，它看起来可以执行您想要的操作（创建一个表，然后在该表中插入一行），您必须像上面那样使用动态 SQL 来执行此操作，但需要注意的是您必须`firstname.Text`在将其包含在 SQL 字符串中之前，请先彻底清除它。此外，对于`insert`字符串，您应该用 and 将表名括起来，`[`而`]`不是`'`and `'`。

**注意：**要考虑的一件重要事情是您要完成的工作。无论您追求什么，我都无法想象这样一个场景，其中 N 个表的单行用于 N 个名字输入是一个好的设计。

# python - Python：守护进程与无限循环

> ID：15325693
> 
> 赞同：2
> 
> 时间：2013-03-10T18:08:28.770
> 
> 标签：python, unix, daemon

[我有一个问题：这种](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)创建 python-daemon 脚本的方法和这个有什么区别：

```
while(True):
   do_something()
   sleep(10) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:27:09.340

对于一个进程来说，作为一个守护进程不仅仅意味着包含一个无限循环。它不应在其父进程（通常是 shell）终止时终止。它应该支持停止、启动和重新启动的接口（当它的程序文件使用 start|stop|restart 参数执行时）。这就是你提到的例子所做的。

PS我的守护进程应该做的事情列表并不完整，它只是表明有这样的事情。

# wso2 - WSO2 与第三方 SAML2 服务提供商的集成

> ID：15325697
> 
> 赞同：4
> 
> 时间：2013-03-10T18:08:51.810
> 
> 标签：wso2, single-sign-on, saml-2.0

我正在尝试使用**WSO2 Identity Server**作为**IdP**配置第三方**SAML 服务提供者**。我遇到了一些我认为可能与 WSO2 实施有关的问题。

 ****经过快速研究，我发现**WSO2IS**`AuthRepons`发送的带有绑定的 e 被放气然后编码。它使我的 SP 无法解析。我检查了 SAML 规范，该规范指出它应该只被编码。**`POST``base64``AuthnResponse``base64`**

 **另一个问题是**WSO2IS**需要`RelayState`与`AuthnRequest`. 否则会报告错误并且请求不会被进一步处理。根据**SAML**规范，此参数是可选的。

除了自定义 SP 实现之外，是否有任何解决方法可以使其协同工作？******

# c++ - 将 Char* 分配给字符串变量后删除

> ID：15325705
> 
> 赞同：3
> 
> 时间：2013-03-08T21:46:46.257
> 
> 标签：c++, string

我已经执行了下面的代码，它工作得很好。因为它是关于指针的，我只是想确定一下。尽管我确定将 char* 分配给 string 会产生副本，即使我删除 char* ， string var 也会保留该值。

```
#include <stdio.h>
#include <string.h>
#include <string>
#include <iostream>

int main(){
    std::string testStr = "whats up ...";
    int strlen = testStr.length();
    char* newCharP = new char[strlen+1];
    memset(newCharP,'\0',strlen+1);
    memcpy(newCharP,testStr.c_str(),strlen);

    std::cout << "  :11111111   :   " << newCharP << "\n";
    std::string newStr = newCharP ;

    std::cout << "  2222222 : " << newStr << "\n";
    delete[] newCharP;
    newCharP = NULL;

    std::cout << "  3333333 : " << newStr << "\n";
} 
```

我只是在我的公司项目中更改了一些代码，并且 char* 在 C++ 中的函数之间传递。char* 指针已复制到字符串，但 char* 在函数末尾被删除。我找不到任何具体的原因。所以我只是删除 char* ，只要它被复制到一个字符串中。这会有什么问题吗..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:15:23.520

> 从中创建 std::string 后删除 char 数组是否安全？

# 是的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T18:18:28.493

当您将 C 风格的字符串（数组`char`）分配给`std::string`. 重载的赋值将该 C 风格的字符串复制到`std::string`.

```
std::string newStr = newCharP; 
```

在此分配之后，所有字符都`newCharP`复制到`newStr`。然后就可以`delete` `newCharP`放心了。

# weka - Liblinear 不在 CLASSPARH 中，在带有 weka 的 linux 上

> ID：15325712
> 
> 赞同：1
> 
> 时间：2013-03-10T18:09:30.333
> 
> 标签：weka, libsvm

[我从http://liblinear.bwaldvogel.de/](http://liblinear.bwaldvogel.de/)下载 liblinear.1.92 ，将 .jar 文件放在

```
$HOME/lib/liblinear-1.92/liblinear-1.92.jar 
```

并开始 weka 作为

```
java -classpath $CLASSPATH:weka.jar:$HOME/lib/libsvm-3.16/java/libsvm.jar:$HOME/lib/liblinear-1.92/liblinear-1.92.jar weka.gui.GUIChooser 
```

在我想使用 liblinear 分类器之前，一切都很好，weka 显示“liblinear not in CLASSPATH”。可能是什么问题呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:09:21.740

那是因为你下载的 liblinear.jar 不是原来的。该jar的创建者使用他自己的包结构，他的类被放置在

```
de.bwaldvoge.liblinear 
```

但是标准的 weka 分类器`Linear`在

```
liblinear 
```

在您链接的 bwaldvogels 网站的底部，他提供了指向[Weka 包装器](https://github.com/bwaldvogel/liblinear-weka)的链接，该包装器指向他的包。

[Weka 包管理器](http://weka.wikispaces.com/How+do+I+use+the+package+manager?)从3.7.2 或更高版本可用，因此您必须下载开发人员版本，因为最新的稳定版是 3.6.9。

然后，只需启动 Weka 包管理器并安装 LibLINEAR。它以这种方式对我有用。请注意，这将在 $HOME 中创建一个“wekafiles”目录。

# android - Android - CSS垂直居中不起作用

> ID：15325713
> 
> 赞同：0
> 
> 时间：2013-03-10T18:09:39.423
> 
> 标签：android, css, alignment, center

以下容器应垂直居中...：

```
<div style="
  position:fixed;
  top:0;
  bottom:0;
  margin:auto;
  background-color:red;
  width: 50px;
  height:50px;
  z-index:555;
"></div> 
```

...而且它存在于除 Android 之外的所有主要浏览器中。有没有办法在Android中垂直居中？它显示在左上角。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:31:59.893

你有没有尝试过

```
top: 50%; margin-top: -25px; 
```

# sql - SQL 示例查询（我的答案正确吗？）

> ID：15325715
> 
> 赞同：2
> 
> 时间：2013-03-10T18:09:50.527
> 
> 标签：sql

表：

*   `Classes (class, type, country, numGuns, bore, displacement)`
*   `Ships (name, class, launched)`
*   `Outcome (ship, battle, result)`

问题：

> 为每个等级找出该等级在战斗中沉没的船只数量。

我的答案：

```
 SELECT ships.class, COUNT(*)
  FROM ships, outcome
  WHERE ships.name = outcomes.ship AND outcome.result = 'sunk'
  GROUP BY ships.class 
```

加入回答：

```
 SELECT class, COUNT(*)
  from ships
  inner join outcomes
  on name = ship 
  where outcome.result = 'sunk'
  group by class 
```

样本手册中给出的答案：

```
 SELECT classes.class, COUNT(*)
  FROM classes, ships, outcomes
  WHERE classes.class = ships.class AND ship = name AND result = 'sunk'
  GROUP BY classes.class; 
```

我不明白为什么他们必须包含`classes`表格，我的查询还不够吗？我正在做同样的事情，但没有加入`classes`桌子。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:19:18.320

~~唯一真正的区别是，如果有一个没有船的班级，则提供的答案将包含一行，而您的查询不会。~~

糟糕，对不起，我最初误读了示例答案。它们之间没有真正的区别。

* * *

还值得注意的是，这种语法：

```
SELECT classes.class, COUNT(*)
FROM classes, ships, outcomes
WHERE classes.class = ships.class AND ship = name AND result = 'sunk'
GROUP BY classes.class; 
```

过时且已弃用。这是首选的现代语法：

```
SELECT classes.class, COUNT(*)
FROM classes
INNER JOIN ships    ON classes.class = ships.class
INNER JOIN outcomes ON outcomes.ship = ships.name
WHERE  outcomes.result = 'sunk'
GROUP BY classes.class; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-18T11:02:30.873

最简单的答案...

```
SELECT class,
SUM(CASE WHEN result='sunk' THEN 1 ELSE 0 END) 
FROM
(
    SELECT class, ship, result 
    FROM Classes c 
    LEFT JOIN Outcomes o 
    ON o.ship=c.class
UNION
    SELECT class, ship, result
    FROM Ships s 
    LEFT JOIN  Outcomes o 
    ON o.ship=s.class OR o.ship=s.name
)
AS res
GROUP BY class 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-17T02:31:56.930

对于每个类，此查询将返回沉没的船的数量，因此如果没有船沉没，您的计数将为 0，而不是仅显示具有计数的船沉没的类。

```
select class, count(ship) as Sunk_Count
from ships left outer join
(select outcomes.ship
from Outcomes
where result = 'Sunk') as result
on Ships.name = result.ship
group by class 
```

这是输出的样子

```
| ID | Class     | Sunk_Count |
| 1  | Kongo     |  1         | 
| 2  | Renown    |  0         |
| 3  | Revenge   |  0         |
| 4  | Tennessee |  0         |
| 5  | Yamato    |  0         | 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-14T18:34:15.670

我知道这是一个老问题，但我希望这对任何试图找出这个练习的答案的人都有帮助

该`outcomes`表可以包括未包含在该`ships`表中的船舶。

通过您的查询，您只包括`ships`表中的船舶，您需要包括`outcomes`表中的一些船舶。问题是，如何知道结果船属于哪个级别？

练习中给出了一些注释

> 1.  结果关系可能包含船舶关系中不存在的船舶。
>     
>     
> 2.  沉没的船不能参加以后的战斗。
>     
>     
> 3.  由于历史原因，在许多演习中将领头舰称为头舰。
>     
>     
> 4.  在 Outcomes 表中找到但不在 Ships 表中的船仍然在数据库中考虑。即使沉没也是如此。

`classes`该表还有另一种说法

> 其名称被分配到一个级别的船称为领导船。

基于此，您可以通过以下查询获取所有船舶

```
 SELECT name FROM ships
 UNION
 SELECT ship FROM outcomes o
 JOIN classes c ON (o.ship = c.class) 
```

如果一艘船不在`ships`表中但在`outcomes`表中，知道它的级别的唯一方法是将船的名称与所有级别进行比较，如果匹配，则该船是主船。

这是一个可以为您提供正确答案的查询示例

```
WITH all_ships AS (
 SELECT name FROM ships
 UNION
 SELECT ship FROM outcomes o
 JOIN classes c ON (o.ship = c.class)
),
ships_sunked AS (
 SELECT name FROM all_ships
 JOIN outcomes o ON (o.ship = all_ships.name)
 WHERE o.result = 'sunk'
)
SELECT DISTINCT COALESCE(class, ss.name) FROM ships s
RIGHT JOIN ships_sunked ss ON (s.name = ss.name) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-25T17:32:04.407

我会投票支持 Kaczmarski，因为它非常接近。有效的答案还有一行可以在第二遍时通过错误检查。

需要进行检查以确保`ships.name`不包含也是类名的名称。

一个有效的数据库结构将包括俾斯麦号和所有沉没在结果表和船舶表中的船只。或者，ships 表将不包含任何沉没的船只。

这种类型的方法必须在真实世界的场景中使用，在该场景中，多个用户正在修改数据库并且用户对正在修改的表具有读取权限。

```
select class, sum(sunks) as sunks from(
    select class, sum(case result when 'sunk' then 1 else 0 end) as sunks 
    from classes c left join outcomes o on c.class = o.ship
where class not in (select name from ships) 
    group by class
    union all
    select class, sum(case result when 'sunk' then 1 else 0 end) as sunks
    from ships s left join outcomes o on s.name = o.ship
    group by class
)as x

group by class 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-11T08:29:49.140

更有效的方法是：

```
 select class, SUM(CASE WHEN result='sunk' 
          THEN 1 
          ELSE 0 END) from
(
select class,ship as name,result from classes cc left outer join outcomes oo ON cc.class=oo.ship
union
select class,name,result from ships ss left outer join outcomes oo ON ss.name=oo.ship
) as ttt
group by class 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-10T18:27:48.557

There is no real difference in both queries. There can be difference if you remove group by and count from select. Because there can be more than one same ship names in different classes. Since you are using group by class then it doesn't make any difference in both queries. Both queries will return ships count per class.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-10T18:54:37.957

这将是问你的 TA（助教？）的好问题。使用您书中的答案可能有“教学”原因。

尽管您的查询和书中的查询会产生相同的结果，但您的查询不能轻易修改以回答有关“类”的其他问题。例如，假设问题变为“每个国家沉没了多少艘船？”。对“图书查询”进行简单更改即可轻松实现（使用 RBarryYoung 重新格式化的代码）：

```
SELECT classes.country, COUNT(*)
FROM classes
INNER JOIN ships    ON classes.class = ships.class
INNER JOIN outcomes ON outcomes.ship = ships.name
WHERE  outcomes.result = 'sunk'
GROUP BY classes.country; 
```

这可能是一个微妙的点，但是以您“最感兴趣”的表作为`FROM`子句开始查询，然后根据需要加入其他相关表。这至少使您的代码更易于阅读。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-24T15:23:23.153

您的查询没有列出每个类别，仅列出船沉没的类别，这要好一些，但似乎仍然不正确：

```
select class, sum(sunks) as sunks from(
    select class, sum(case result when 'sunk' then 1 else 0 end) as sunks 
    from classes c left join outcomes o on c.class = o.ship
    group by class
    union all
    select class, sum(case result when 'sunk' then 1 else 0 end) as sunks
    from ships s left join outcomes o on s.name = o.ship
    group by class
)as x
group by class 
```

# gtk - Shift-Tab 聚焦前一个输入字段

> ID：15325716
> 
> 赞同：1
> 
> 时间：2013-03-10T18:09:50.797
> 
> 标签：gtk, glade

我正在使用 Glade 来设计一个 GUI。当我插入 GtkEntry 字段时，我可以使用 Tab 键导航到下一个字段（此功能在 Glade 中是“免费”提供的）。但是，似乎我不能使用 Shift-Tab 来聚焦前一个选项卡条目。

当我有两个按钮时，Tab 和 Shift-Tab 都是开箱即用的。

那么：有没有办法让 Shift-Tab 聚焦 Glade 中的前一个 GtkEntry？

Glade 代码如下；一个有两个输入字段，一个有两个按钮。

两个条目：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <object class="GtkWindow" id="window1">
    <property name="can_focus">False</property>
    <child>
      <object class="GtkBox" id="box1">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <property name="orientation">vertical</property>
        <property name="homogeneous">True</property>
        <child>
          <object class="GtkEntry" id="entry1">
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="invisible_char">●&lt;/property>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">0</property>
          </packing>
        </child>
        <child>
          <object class="GtkEntry" id="entry2">
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="invisible_char">●&lt;/property>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">1</property>
          </packing>
        </child>
      </object>
    </child>
  </object>
</interface> 
```

两个按钮：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <object class="GtkWindow" id="window1">
    <property name="can_focus">False</property>
    <child>
      <object class="GtkBox" id="box1">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <property name="orientation">vertical</property>
        <property name="homogeneous">True</property>
        <child>
          <object class="GtkButton" id="button1">
            <property name="label" translatable="yes">button</property>
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="receives_default">True</property>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">0</property>
          </packing>
        </child>
        <child>
          <object class="GtkButton" id="button2">
            <property name="label" translatable="yes">button</property>
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="receives_default">True</property>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">1</property>
          </packing>
        </child>
      </object>
    </child>
  </object>
</interface> 
```

# css - 如何防止内联嵌入下推文本 (CSS)

> ID：15325719
> 
> 赞同：2
> 
> 时间：2013-03-10T18:09:54.230
> 
> 标签：css, inline

嗨，我的内联嵌入有问题。他们将我的文本向下推或取消水平对齐，我不知道如何纠正它。

这是我的（HTML）代码：

```
<div id="WindMax">
<embed src="WeatherIcons/UpArrow.svg" type="image/svg+xml" class="E25px" />
77
<span class="Set">mph</span>
</div> 
```

和（CSS）代码：

```
embed {
margin:0; padding:0; border:0; outline:0;
display:inline;
}
embed.E25px {
width:25px; height:25px;
}
embed.E30px {
width:30px; height:30px;
}
span.Set {
font:bold 15px 'Arial Narrow',Arial,Sans-Serif;
text-align:center;
display:inline;
}
#WindMax {
background:;
position:absolute;
width:100px; height:25px;
margin:45px 0 0 570px;
font:bold 25px/25px 'Arial Narrow',Arial,Sans-Serif;
text-align:left;
z-index:-996;
} 
```

提前干杯:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T15:08:06.800

将此用于嵌入图像：`vertical-align: middle;`

# ios - 在对象上找不到属性“委托”

> ID：15325729
> 
> 赞同：0
> 
> 时间：2013-03-10T18:11:15.727
> 
> 标签：ios, objective-c, xcode, delegates

所以这是我的 WSWordlistTableView.h：

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>

@interface WSWordlistTableView : UITableView {

}

@property (nonatomic, assign) id <UITableViewDataSource>    datasource;
@property (nonatomic, assign) id <UITableViewDelegate>      delegate;

- (id)initWithFrame:(CGRect)frame;

@end 
```

如您所见，有`delegate`和`datasource`属性。

我的 WSWordlistTableViewController.h：

```
#import <UIKit/UIKit.h>
#import "WSWordlistManager.h"
#import "WSUserManager.h"

@interface WSWordlistTableViewController : UITableViewController <UITableViewDelegate, UITableViewDataSource>

@end 
```

所以，我正在用这个在主 VC 上滑动的表构建一个滑动抽屉视图。这是主 VC 中创建视图和控制器然后将它们滑动到屏幕上的方法：

```
- (IBAction)slideWordlistView:(id)sender {

    if(!self.wordlistTableView ) {
       CGRect frame = CGRectMake(30, 340, 100, 310);
       self.wordlistTableView = [[WSWordlistTableView alloc] initWithFrame:frame];
    }      
    [self.view bringSubviewToFront:self.wordlistTableView];

    if(!self.wordlistTableViewController) {
       self.wordlistTableViewController = [[WSWordlistTableViewController alloc] init];
    }
    self.wordlistTableViewController.view.frame = self.wordlistTableView.bounds;
    self.wordlistTableViewController.view.autoresizingMask = self.wordlistTableView.autoresizingMask;
    [self addChildViewController:self.wordlistTableViewController];
    [self.wordlistTableView addSubview:self.wordlistTableViewController.view];
    [self.wordlistTableViewController didMoveToParentViewController:self];

    // *** THESE LINES THROW THE ERRORS
    self.wordlistTableView.delegate = self.wordlistTableViewController;
    self.wordlistTableView.datasource = self.wordlistTableViewController;

    CGFloat newX = kVisibleX;
    NSLog(@"newX = %f", newX);
    [UIView animateWithDuration: .25
                     animations:
     ^{
         CGRect drawerFrame = self.wordlistTableView.frame;
         drawerFrame.origin.x = newX;
         self.wordlistTableView.frame = drawerFrame;
     }]; 
```

}

```
self.wordlistTableView.delegate = self.wordlistTableViewController;
self.wordlistTableView.datasource = self.wordlistTableViewController; 
```

这两行都抛出错误，说他们在 'WSWordlistTableView*' 上找不到属性 'delegate' 和 'datasource'。他们都在那里。我不明白。

# c++ - 自定义类的优先级队列使用比较器与 C++ 中的构造函数参数

> ID：15325730
> 
> 赞同：2
> 
> 时间：2013-03-10T18:11:18.703
> 
> 标签：c++, priority-queue, comparator

我想在 C++中创建一个`priority_queue`类。`Edge`

为此，我创建了`edgeCompare`比较器类，如下所示：

```
class edgeCompare{
public:
    map<int, glm::mat4x4> * Qmap;

    edgeCompare(const map<int, glm::mat4x4> & Qm){
        * Qmap = Qm;
    }

    bool operator() (const Edge & e1, const Edge & e2) const{
        // code that compares and returns corresponding bool
        // OBS: in this function I use *Qmap
    }
} 
```

如您所见，问题是我需要一个外部变量来进行比较。

A`priority_queue`通常声明为：

```
priority_queue<Edge, vector<Edge>, edgeCompare> pq; 
```

但就我而言，我需要`edgeComparator`用我的变量构造`Qmap`。

我应该如何进行？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-29T18:28:53.840

模板参数是比较器的*类型*。您仍然需要将比较器的*实例*传递给 priority_queue 构造函数，此时您可以使用您喜欢的任何参数构造比较器实例。

例如：

```
map<int, glm::mat4x4> m;
edgeCompare comp(m);
priority_queue<Edge, vector<Edge>, edgeCompare> pq(comp); 
```

您也可以`edgeCompare`内联创建对象，但需要额外的括号来消除歧义：

```
priority_queue<Edge, vector<Edge>, edgeCompare> pq((edgeCompare(m))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T18:23:43.593

在类中重载`operator==`、和`operator!=`，以便您可以在比较器中比较它们。`operator>``operator<``Edge``e1 == e2`

也不要从`std::map`. 它没有`virtual`析构函数，因此从它派生是个坏主意。

只需将您的地图作为班级的私人成员即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T18:25:08.483

根据[这里的链接](http://www.sgi.com/tech/stl/priority_queue.html)，有一个重载允许您在`priority_queue`构造函数中传递谓词。

# python - 为什么 atexit 不在 python 中注册？

> ID：15325733
> 
> 赞同：0
> 
> 时间：2013-03-10T18:11:55.687
> 
> 标签：python, loops, save, pickle, atexit

我在 Tkinter 中有一个循环：

```
def main():
    #Global Variables
    windows = []
    buttons = []
    labels = []
    messageboxes = []
    global theme
    theme = 0
    listboxes = []
    global register
    register = []
    global path
    path = ""
    # Lotsa' Code
    Tkinter.mainloop()

if __name__ == "__main__":
    main()

def save_f():
    global register
    outFile = open('FobbySave.txt', 'wb')
    pickle.dump(register, outFile)
    outFile.close()
global register     
#At Quit
atexit.register(save_f) 
```

atexit 失败。但是当我尝试打印寄存器时它没有问题。当我将 save_f 放入 Tkinter 循环时，它起作用了，但 atexit 没有。那么有人可以告诉我我做错了什么吗？

附言

## 抱歉，第一次忘记写 atexit 了。但它在我的代码中。

编辑：原始代码在这里

```
import pickle
import atexit
def save_f():
    global register
    outFile = open('Something.txt', 'wb')
    pickle.dump(register, outFile)
    outFile.close()
atexit.register(save_f) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:59:43.490

好的，事实证明问题是我需要`atexit.register(save_f)`而不是`atexit.register(save_f())`.

您不应该进行函数调用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:15:10.570

你的基本脚本对我有用，只要我`import atexit`设置`register`了一些东西。例如：

```
import pickle
import atexit

def save_f():
    outFile = open('Something.txt', 'wb')
    pickle.dump(register, outFile)
    outFile.close()

register = 1
atexit.register(save_f) 
```

（请注意，这`global`也不是必需的）。在这种情况下，您应该确保`atexit.py`在当前目录或您的`PYTHONPATH`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T18:16:09.537

查看您的代码，我建议您尝试一下：

```
def main():
    # ... everything in main ...
    Tkinter.mainloop()

def save_f():
    outFile = open('FobbySave.txt', 'wb')
    pickle.dump(register, outFile)
    outFile.close()

#At Quit
atexit.register(save_f)

if __name__ == "__main__":
    main() 
```

问题可能是您在运行 main 方法`atexit` *后初始化了您的。*因此，在代码被杀死（并停止执行）后，您尝试添加该`atexit`方法。

# php - 如何使用 PHP 在字符串中查找字符的序列模式？

> ID：15325735
> 
> 赞同：2
> 
> 时间：2013-03-10T18:12:26.287
> 
> 标签：php, regex, arrays, string

假设我有随机的文本块：

```
EAMoAAQAABwEBAAAAAAAAAAAAAAABAgMFBgcIBAkBAQABBQEBAAAAAAAAAAAAAAAGAgMEBQcBCBAAAQMDAgMEBQcIBQgGCwEAAQACAxEEBSEGMRIHQVFhE3GBIhQIkaGxwTJCI9FScoKSojMV8GLCUxbhstKDo7M0ZHOTJEQlF/HiQ2PDVHSExEUmGBEBAAIBAgMDCAgCCgMBAQEAAAECAxEEITEFQRIGUWFxgZGhIhPwscHRMlIUB0Jy4fGCkqLCI1MVFrLSQ2IzF//aAAwDAQACEQMRAD8A7+QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEEDwXkzpxHgusxi7NrnXF3G0NBLhzAkAeAqVH934r6bt57uTPSJ8ne1n2Rqycezy35VlRttwYu5DXNlLOcczOdpHM3hUUqtLs/wBxulZonXJ8vjp8caa+eOa5k6flrPLVcIbm3n/gytf4NcCVKtj1XbbqNcOSuT+W0W+pi3x2rzjRWWxUCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAggV5It2Uy8GNYAWmW6kr5MDftO8T3BRXxR4s2/SccTb48lvw0jnPnn8tfP6o1Ze02ds08OERzlid+/P5Orp5BHEeFuxxa0Dxpx9a+fOu+Iup9Tmfm30p+Ss92vr/N6bat/t67fDyjWfLLG79pt45YpAA8NdUAg9ngolTFNbedtqWi0avVicv5bLKFr2kSRltHaahrXCnylZcd6k208rDy4ItxlkUr5+XnZE1zxq0h3KfUQqv1GWsxeI0tHKY1rPtjRgVivKZU7HebrS491ybX+TWnO7V7PEn7w+f0rpPhb9zdxt7Rj3szkx/n/AI6+n88f4vTyebno8Wr3qTGvun7mawSxzsbNC4Pje0Oa9pqCD2grv+3z0zUi9Ji1bRrEx2wjtqzWdJ5wqq8pEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQU 
```

规格：

```
patternABC >= 2 characters = groupABC IF groupABC occurs more than once
groupABC + (groupABC)n = sequence WHERE n >= 1 AND sequence > 6 characters 
```

** 一个序列需要大于 6 个字符才能被评估

分解：

如何找到按顺序出现的任何重复模式？

```
QEBAQEBAQEBAQEBAQEBAQEBA 
```

我还想计算每组重复多少次：

```
QEBA QEBA QEBA QEBA QEBA QEBA = 6 
```

此外，该序列必须大于 6 个字符才能进行评估：

```
NO GOOD: AA AA AA
GOOD: AA AA AA AA 
```

如果输出可以存储在关联数组中，并且删除重复条目，那将是理想的：

```
QEBA => 6, AA => 4, QEBA => 3, AA => 8, (QEBA => 6)<- REMOVE 
```

有没有人有时间和意愿来解决这个问题？如果你这样做，你会摇滚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:01:20.850

```
$str = 'EAMoAAQAABwEBAAAAAAAAAAAAAAABAgMFBgcIBAkBAQABBQEBAAAAAAAAAAAAAAAGAgMEBQcBCBAAAQMDAgMEBQcIBQgGCwEAAQACAxEEBSEGMRIHQVFhE3GBIhQIkaGxwTJCI9FScoKSojMV8GLCUxbhstKDo7M0ZHOTJEQlF/HiQ2PDVHSExEUmGBEBAAIBAgMDCAgCCgMBAQEAAAECAxEEITEFQRIGUWFxgZGhIhPwscHRMlIUB0Jy4fGCkqLCI1MVFrLSQ2IzF//aAAwDAQACEQMRAD8A7+QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEEDwXkzpxHgusxi7NrnXF3G0NBLhzAkAeAqVH934r6bt57uTPSJ8ne1n2Rqycezy35VlRttwYu5DXNlLOcczOdpHM3hUUqtLs/wBxulZonXJ8vjp8caa+eOa5k6flrPLVcIbm3n/gytf4NcCVKtj1XbbqNcOSuT+W0W+pi3x2rzjRWWxUCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAggV5It2Uy8GNYAWmW6kr5MDftO8T3BRXxR4s2/SccTb48lvw0jnPnn8tfP6o1Ze02ds08OERzlid+/P5Orp5BHEeFuxxa0Dxpx9a+fOu+Iup9Tmfm30p+Ss92vr/N6bat/t67fDyjWfLLG79pt45YpAA8NdUAg9ngolTFNbedtqWi0avVicv5bLKFr2kSRltHaahrXCnylZcd6k208rDy4ItxlkUr5+XnZE1zxq0h3KfUQqv1GWsxeI0tHKY1rPtjRgVivKZU7HebrS491ybX+TWnO7V7PEn7w+f0rpPhb9zdxt7Rj3szkx/n/AI6+n88f4vTyebno8Wr3qTGvun7mawSxzsbNC4Pje0Oa9pqCD2grv+3z0zUi9Ji1bRrEx2wjtqzWdJ5wqq8pEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQU';

preg_match_all( '/(\S{2,}?)\1+/', $str, $matches );

// Remove duplicates
$matches[0] = array_unique( $matches[0] ); 

foreach ( $matches[0] as $key => $value ) {
    if ( strlen( $value ) > 6 ) {
        $repeated = $matches[1][$key];
        $results[] = array( $repeated => count( explode( $repeated, $value ) ) - 1 );
    }    
}

print_r($results); 

/*
[AA] => 7
[QEBA] => 93
[CAgI] => 18
[EBAQ] => 18
*/ 
```

以上假设一个序列由非空格字符组成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:54:40.277

获取序列`preg_match_all('/(?:(.{6,})\1)/',$inputText,$sequences)`
*（注意：序列将保存在`$sequences`）*
解释的正则表达式演示：[http ://regex101.com/r/rW4nE2](http://regex101.com/r/rW4nE2)

使用[array_unique()](http://www.php.net/manual/en/function.array-unique.php)删除重复项。

循环遍历每个序列并：通过 解释的 RegEx 演示
获取组： [http ://regex101.com/r/pC3pB7](http://regex101.com/r/pC3pB7)`preg_match_all('/(.+?)(\1)(\1)?/',$sequence,$groups)`

如果需要，请使用[count() 。](http://www.php.net/manual/en/function.count.php)

# c++ - 占主导地位的用户定义强制转换运算符

> ID：15325736
> 
> 赞同：1
> 
> 时间：2013-03-10T18:12:29.997
> 
> 标签：c++

假设我有两个课程：`A`和`B`. 我定义了如何投射`A`到`B`和`B`到`A`。我还定义了`operator<`,`operator>`并且`operator==`对于他们两个，所以我可以将 an`A`与 an`A`或 a`B`与另一个进行比较`B`。然后我创建了一个类的实例`A`，例如`a`一个类`B`，`b`。我比较它们：

```
if(a>b){...} 
```

他们中的哪一个会被转换以匹配另一个？除了显式转换之外，有没有办法影响这一点？

编辑：我举了一个我的问题的例子，希望这有助于解释我自己。假设我想存储整数。我可以将它们存储在`A`或`B`. 在`A`中，我只存储正值。中`B`，只有负数。完整代码如下。如果`a`转换为`B`，`a>b`则为真。如果`b`转换为`A`，则为假。试试看。对我来说，如果我不按其他方式施放，那`a>b`是错误的。我要问的是，是否可以使转换占主导地位，以便在这些情况下，我可以确定会发生什么？

啊

```
#ifndef _A
#define _A

class B;

class A{
    private:
        int val;
    public:
        A(int val);
        operator B()const;
        bool operator==(const A& a)const;
        bool operator>(const A& a)const;
        bool operator<(const A& a)const;
};

#endif 
```

溴化氢

```
#ifndef _B
#define _B

class A;

class B{
    private:
        int val;
    public:
        B(int val);
        operator A()const;
        bool operator==(const B& b)const;
        bool operator>(const B& b)const;
        bool operator<(const B& b)const;
};

#endif 
```

A.cpp

```
#include "A.h"
#include "B.h"

A::A(int val){
    this->val=val>=0?val:-val;
}
A::operator B()const{
    return B(-val);
}
bool A::operator==(const A& a)const{
    return val==a.val?true:false;
}
bool A::operator>(const A& a)const{
    return val>a.val?true:false;
}
bool A::operator<(const A& a)const{
    return val<a.val?true:false;
} 
```

B.cpp

```
#include "A.h"
#include "B.h"

B::B(int val){
    this->val=val>0?-val:val;
}
B::operator A()const{
    return A(-val);
}
bool B::operator==(const B& b)const{
    return val==b.val?true:false;
}
bool B::operator>(const B& b)const{
    return val>b.val?true:false;
}
bool B::operator<(const B& b)const{
    return val<b.val?true:false;
} 
```

主文件

```
#include <iostream>
using namespace std;

#include "A.h"
#include "B.h"

int main(){
    A a(5);
    B b(-7);
    if(a>b) cout << "a>b is true"   << endl;
    else    cout << "a>b is false"  << endl;
    return 0;
} 
```

编辑：对我来说，它总是正确的操作数`>`（主要）。此外，如果我将比较运算符声明为友元函数，代码将无法编译，并出现错误`ambiguous overload for 'operator>' in 'b > a'`，这是我所预料的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:15:47.220

`operator>`不会施放任何东西。它只会将两个操作数与定义的重载进行比较。如果没有这样的重载，您的代码将无法编译。

它看起来像这样：

```
bool operator>(const A& lhs, const B& rhs)
{
   return lhs.foo > rhs.bar; //
} 
```

如果你想在和之间进行转换`A`，`B`你会接受构造函数`B`，`A`所以你可以这样做：

```
A::A(const B& b) {} //do stuff to convert B to A

A a = someb; 
```

这等于`A a(someb);`

# javascript - 复制 div 的附加显示代码如何修复它

> ID：15325744
> 
> 赞同：0
> 
> 时间：2013-03-10T18:13:13.680
> 
> 标签：javascript, html

我使用代码使用以下代码复制 div 的内容：

```
 <textarea cols="100" rows="10" id="output"></textarea>
 <input type="submit" onClick="javascript:copyText();" value="Copy">

 function copyText(){
 var output = document.getElementById("container").innerHTML;
 document.getElementById("output").value = output;
 } 
```

问题是我的 div 在附加函数的列表中。当我单击复制时，结果将显示代码。我想要在 div 中显示的确切值。

[小提琴中的完整代码](http://jsfiddle.net/technique13/KdAxW/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:18:18.290

将 innerHtml 更改为 InnerText 属性

```
var output = document.getElementById("container").innerText; 
```

InnerHtml 返回元素的 html 内容，而 innerText 返回文本（值）

查看更新的[小提琴](http://jsfiddle.net/KdAxW/4/)

# python - python坐标生成器

> ID：15325745
> 
> 赞同：1
> 
> 时间：2013-03-10T18:13:18.000
> 
> 标签：python

我需要按给定尺寸生成所有点坐标，例如：

```
>>>points(2,2)
>>>[(0,0),(0,1),(1,0),(1,1)]
>>>points(1,1,1)
>>>[(0,0,0),(0,0,1),(0,1,0),(0,1,1),(1,1,0),(1,1,1)] 
```

我已经看到了二维的[解决方案，但无法找到一种方法使方法独立于维数：](https://stackoverflow.com/questions/9082829/creating-2d-coordinates-map-in-python)

```
>>> from itertools import product
>>> list(product(xrange(d) for d in (1,2,3)))
[(xrange(1),), (xrange(2),), (xrange(3),)] #where is my tuples? 
```

其中 (1,2,3) 是 *args 元组，可以是任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:23:21.233

*调用*函数时需要使用 *以使用可迭代对象作为参数列表。f(*[1,2,3]) 像 f(1,2,3) 一样工作。

知道这一点，并使用 itertools：

```
def points(*args):
  return list(product(*[range(n) for n in args])) 
```

# opengl - 如何在 glm 中创建广告牌矩阵

> ID：15325752
> 
> 赞同：6
> 
> 时间：2013-03-10T18:14:07.303
> 
> 标签：opengl, glsl, glm-math

如何使用 glm 从空间中的一个点创建广告牌平移矩阵？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T18:14:07.303

```
mat4 billboard(vec3 position, vec3 cameraPos, vec3 cameraUp) {
    vec3 look = normalize(cameraPos - position);
    vec3 right = cross(cameraUp, look);
    vec3 up2 = cross(look, right);
    mat4 transform;
    transform[0] = vec4(right, 0);
    transform[1] = vec4(up2, 0);
    transform[2] = vec4(look, 0);
    // Uncomment this line to translate the position as well
    // (without it, it's just a rotation)
    //transform[3] = vec4(position, 0);
    return transform;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T18:14:56.307

只需将转换的左上角 3×3 子矩阵设置为身份。

* * *

### 更新：固定功能 OpenGL 变体：

```
void makebillboard_mat4x4(double *BM, double const * const MV)
{
    for(size_t i = 0; i < 3; i++) {

        for(size_t j = 0; j < 3; j++) {
            BM[4*i + j] = i==j ? 1 : 0;
        }
        BM[4*i + 3] = MV[4*i + 3];
    }

    for(size_t i = 0; i < 4; i++) {
        BM[12 + i] = MV[12 + i];
    }
}

void mygltoolMakeMVBillboard(void)
{
    GLenum active_matrix;
    double MV[16];

    glGetIntegerv(GL_MATRIX_MODE, &active_matrix);

    glMatrixMode(GL_MODELVIEW);
    glGetDoublev(GL_MODELVIEW_MATRIX, MV);
    makebillboard_mat4x4(MV, MV);
    glLoadMatrixd(MV);
    glMatrixMode(active_matrix);
} 
```

# android - 从 Facebook 获取数据时获取“不受支持的方法，fql.multiquery”

> ID：15325753
> 
> 赞同：1
> 
> 时间：2013-03-10T18:14:09.200
> 
> 标签：android, facebook, facebook-fql, fql.multiquery

我正在尝试通过 FQL 多查询从 Facebook 获取我的 Android 应用程序中的数据，如下所述：http: [//www.kanatorn.info/2011/12/31/fql-multiple-query-android-sdk-example/](http://www.kanatorn.info/2011/12/31/fql-multiple-query-android-sdk-example/)

这是我的代码：

```
 Bundle params = new Bundle();
        JSONObject multiquery = new JSONObject();
        try {
            multiquery.put("query1", "SELECT eid, name, start_time, is_date_only, pic_square, pic_big, location FROM event WHERE eid IN" + 
                "(SELECT eid FROM event_member WHERE uid=me() AND start_time >= now()) ORDER BY start_time");
            multiquery.put("query2", "SELECT eid, rsvp_status, start_time FROM event_member WHERE uid=me() AND start_time >= now() ORDER BY start_time");
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        params.putString("method", "fql.multiquery");
        params.putString("queries", multiquery.toString());         

        Session session = Session.getActiveSession();

        Request request = new Request(session,
            "/fql",
            params,
            HttpMethod.GET,                 
            new Request.Callback(){
                public void onCompleted(Response response) {
                    ...
                }
            });             
        Request.executeAndWait(request); 
```

我得到的结果如下：

```
{Response:  responseCode: 500, graphObject: null, error: {HttpStatus: 500, errorCode: -1, errorType: Exception, errorMessage: Unsupported method, fql.multiquery}, isFromCache:false} 
```

我不知道我的错误在哪里。它说`unsupported method, multiquery`，但这实际上应该是一个有效的方法，对吧？我到处寻找类似的问题，但似乎只有我一个人遇到这个问题。我觉得我错过了一些简单的东西......如果有人可以帮助我，那就太酷了。谢谢！

顺便提一句。正常查询一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:45:28.877

链接的 Kanatorn 页面说`method`应该是`fql.multiquery`，但你只是`multiquery`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T09:37:41.507

为了解决这个
问题，您是否阅读了此开发人员页面。

[http://developers.facebook.com/docs/howtos/androidsdk/3.0/run-fql-queries/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/run-fql-queries/)

更新网址

[https://developers.facebook.com/docs/android/graph/#fql](https://developers.facebook.com/docs/android/graph/#fql)

# android - 在android中正确显示和显示pdf文件

> ID：15325757
> 
> 赞同：0
> 
> 时间：2013-03-10T18:14:50.527
> 
> 标签：android, file, pdf

我正在尝试在我的应用程序中打开一个 pdf 文件。我的问题是我无法阅读该文档，因为它出现了奇怪的字符。另外，如果我显示一个 txt 文件，我可以阅读它，但它的文本并不像我想要的那样对齐。所有的线都居中。我的问题是我做错了什么，我该如何纠正这些错误？

我的 xml

```
<!-- Demonstrates styled string resources.
     See corresponding Java code com.android.sdk.content.StyledText -->
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView
        android:id="@+id/text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textStyle="normal" />

</LinearLayout>

</ScrollView> 
```

和班级

```
public class PrimulAjutor2A extends MainActivity2A
{
    @Override
  protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

       // See assets/res/any/layout/styled_text.xml for this
       // view layout definition.
        setContentView(R.layout.primulajutor2);

        // Programmatically load text from an asset and place it into the
       // text view.  Note that the text we are loading is ASCII, so we
       // need to convert it to UTF-16.
       try {
           InputStream is = getAssets().open("abc.pdf");

            // We guarantee that the available method returns the total
            // size of the asset...  of course, this does mean that a single
           // asset can't be more than 2 gigs.
            int size = is.available();

            // Read the entire asset into a local byte buffer.
            byte[] buffer = new byte[size];
           is.read(buffer);
            is.close();

           // Convert the buffer into a string.
           String text = new String(buffer);

            // Finally stick the string into the text view.
           TextView tv = (TextView)findViewById(R.id.text);
            tv.setText(text);
        } catch (IOException e) {
            // Should never happen!
            throw new RuntimeException(e);
        }
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:18:46.307

我建议您使用 google docs 使用 webview 显示您的 pdf。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<WebView
    android:id="@+id/wv"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/> 

</LinearLayout> 
```

在您的活动类中使用以下代码。

```
 WebView wv= (WebView) findViewById(R.id.wv);
     wv.setVerticalScrollBarEnabled(true);
     wv.setHorizontalScrollBarEnabled(true);
     wv.getSettings().setBuiltInZoomControls(true);
     wv.getSettings().setJavaScriptEnabled(true);
     wv.setWebViewClient(new WebViewClient());
     wv.loadUrl("https://docs.google.com/file/d/0B8ZDVNCvRWK8c3YzQVFaWjg1bEU/edit"); 
```

![在此处输入图像描述](../Images/79043474ecc2da0d3660b97d13b2c57d.png)

要求用户登录谷歌帐户并需要文档所有者的许可。既然你给了我访问权限，我就可以在我的手机中查看相同的内容。在三星 Galaxy S3 上测试。WebView 可以滚动和缩放。

如果您的设备上安装了 pdf 应用程序，您可以使用 Intent 提供必要的参数来打开您的 pdf 文件。

```
private void openFile(File f, String mimeType)
{
Intent viewIntent = new Intent();
viewIntent.setAction(Intent.ACTION_VIEW);
viewIntent.setDataAndType(Uri.fromFile(file), mimeType);
// using the packagemanager to query is faster than trying startActivity
// and catching the activity not found exception, which causes a stack unwind.
List<ResolveInfo> resolved = getPackageManager().queryIntentActivities(viewIntent, 0);
if(resolved != null && resolved.size() > 0)
{
    startActivity(viewIntent);
}
else
{
    // notify the user they can't open it.
}
} 
```

[http://ecestage.googlecode.com/svn-history/r12/branches/src/com/pdfviewer/PdfViewerActivity.java](http://ecestage.googlecode.com/svn-history/r12/branches/src/com/pdfviewer/PdfViewerActivity.java)。我没有尝试链接中的代码。你可以试试这个。

# javascript - 隐藏回调的变量是不好的做法吗？

> ID：15325761
> 
> 赞同：6
> 
> 时间：2013-03-10T18:15:11.647
> 
> 标签：javascript, node.js, asynchronous

以异步Node函数`fs.stat()`为例。如果我需要`fs.stat()`在文件上使用，然后再做一次，结果会被遮蔽。

```
fs.stat(file, function(err, stats) {
  fs.stat(file, function(err, stats) {
  });
}); 
```

`err`变量以及`stats`变量都被隐藏了 - 如果我不会在第二个回调中使用第一个回调，这是否重要？重命名第二个回调变量是否更好？

一次或多次覆盖这些变量是否会对性能产生任何影响？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T18:21:06.477

意见问题，但我会说是的 - 不好的做法。无论如何，这里有两个问题

*   下一个需要处理此代码的人（可能是您）可能会感到困惑。

*   在将来的某个时间，您可能需要访问外部值以提供一些新功能（例如，要确保两个文件对象具有相同的类型？）。进行这种更改将需要对整个代码块进行烦人且容易出错的编辑。

现在使用不同的名称以防止以后出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:24:09.410

是的，这是不好的做法。取决于开发人员查看它有多糟糕。如果我得到这样的东西，我首先想到的是

为什么他将`err`and传递`stats`给这个回调？

```
fs.stat(file, function(err, stats) {
                        \\    \\
                         \\    \\
  fs.stat(file, function(err, stats) {
  });
}); 
```

在像您现在正在做的相同功能的多个实例中工作时。您必须确保可以独立访问所有变量。

除非您确定不再使用某个变量或构造，否则您可以重新使用它。但是您必须在有用的评论中提及这一点，以确保其他开发人员理解它。

* * *

**更新：**

回调函数上的那些变量有范围限制，因此它们不会影响函数声明之外。

一个有效案例的例子是：

```
 fs.stat(file, function(err, stats) {

  });

  //Another similar functions somewhere with same varialbes
  fs.stat(file2, function(err, stats) {
  }); 
```

# bash - 如何通过“mySync leftdir rightdir”等特定命令使我的同步bash脚本可执行？

> ID：15325769
> 
> 赞同：0
> 
> 时间：2013-03-10T18:16:15.523
> 
> 标签：bash, unix, ubuntu

我正在为 Ubuntu 中的 Unix 创建一个同步两个目录的 bash 脚本。

我已经编写了同步程序，但我面临的问题是我需要通过命令行调用我的脚本：“ **mySync -r leftdir rightdir** ”或“ **mySync -i leftdir rightdir** ”，我似乎没有让它工作。

**-r** （递归）将覆盖所有重复的文件夹。

**-i** 只有在用户同意的情况下才会覆盖重复的文件夹

问题是如何通过命令使我的脚本可执行？

如果选择了“-i”命令，我怎样才能让我的脚本在覆盖之前等待用户的接受？

在此先感谢您的帮助 。

代码是：

```
 #!/bin/bash

    echo "hello,the directory must be on the Desktop. "
    read -p "Please enter your username: " x3

    read -p "First directory name: " x1
    read -p "Second directory name: " x2

    dir1="/home/$x3/Desktop/$x1/"
    dir2="/home/$x3/Desktop/$x2/"

    if [ -d $dir2 ]; then
    cd "$dir1"

    find . -print0 | while read -d $'\0' file; do
    [ -e "$dir2/$file" ] || echo "$file"
    done

    cp -rupv $dir2* $dir1

    else
    echo Path Not found.. Check network status
    fi

    if [ -d $dir1 ]; then
    cd "$dir2"
    find . -print0 | while read -d $'\0' file; do
    [ -e "$dir1/$file" ] || echo "$file"
    done

    cp -rupv $dir1* $dir2

    else
    echo Path Not found.. Check network status

    fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:01:41.963

首先，你为什么不只使用[rsync](http://en.wikipedia.org/wiki/Rsync)？

如果您真的想自己执行此操作，我建议您使用`getopt`or`getopts`进行选项解析。然后您可以根据这些选项控制执行...

要使脚本可执行，您可以使用 chmod：

`$ chmod +x mySync`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:00:28.907

能稍微描述一下吗？？

如果您想让您的脚本可以通过命令执行，请像这样创建一个 C 包装器

在 /usr/ 目录中创建一个文件夹（假设为 XXX）并将 sh 文件复制到那里

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char **argv){
  char string[512];
  strcpy(string, "");
  if(argc>=2){      //if argument exists
    for(int i=1; i<argc; i++){
        strcpy(string, strcat(strcat(string, argv[i]), " ") );
    }

            char cmd[512];
            system("cd /usr/XXX")
            strcpy(cmd, strcat("PROGRAM_NAME.sh ", string)); //note the SPACE
            system(cmd);
  }

  else{
    system("cd /usr/XXX")
    system("PRGRAM_NAME.sh");
  }
} 
```

它的编码非常粗略（使用 -std=c99 编译），然后将 sh 文件和编译文件都放在 /usr/XXX 目录中，现在打开 .bashrc 文件，最后放入

```
export PATH="/usr/XXX:$PATH" 
```

现在输入命令..

如果命令不起作用，请修改它...如果其他人完全回答它，快乐就消失了（基本上，我现在没有足够的勇气检查文件） **编辑**
您需要通过键入来获取 .bashrc 文件源.bashrc

# python - Python：拆分多维列表

> ID：15325773
> 
> 赞同：1
> 
> 时间：2013-03-10T18:16:56.963
> 
> 标签：python, list, unicode, split

我有一个列表形式为

```
[(u'a1', u'b1'),
 (u'a1', u'b2'),
 (u'c1', u'c2')] 
```

我希望它两个被分成两个列表/列，比如

```
list1          list2    
[(u'a1',       [(u'b1'),
 (u'a1',       (u'b2'),
 (u'c1')]       (u'c2')] 
```

**将unicode**转换为字符串也会有所帮助！

另外，在另一种情况下，我的列表形式为

```
[(('a', 'c'), -3), (('a', 'd'), -7), (('c', 'd'), -4)] 
```

我需要以下形式的输入

```
('a','a','c')
('c','d','d')
(-3,-7,-4) 
```

有小费吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T18:21:02.043

您可以使用列表推导创建两个新列表：

```
x=[(u'a1', u'b1'),
 (u'a1', u'b2'),
 (u'c1', u'c2')]

list1 = [i[0] for i in x]

list2 = [i[1] for i in x] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T18:24:51.293

The second example:

```
>>> L = [(('a', 'c'), -3), (('a', 'd'), -7), (('c', 'd'), -4)]
>>> zip(*[(a[0], a[1], b) for a, b in L])
[('a', 'a', 'c'), ('c', 'd', 'd'), (-3, -7, -4)] 
```

It first flattens each item and then transposes the list.

# css - 将 div 高度设置为 100%，在内部拉伸是行不通的

> ID：15325774
> 
> 赞同：0
> 
> 时间：2013-03-10T18:17:12.117
> 
> 标签：css, html, styles, height

我有 3 个盒子（div-s）。

main-box里面有两个盒子。第一个（Box1）向右浮动，另一个（Box2）向左浮动。

两个框的高度都设置为 100%，因此当其中一个拉伸主框时，另一个框的高度相同

# 我做了什么：

我让 Box 2 拉伸了 main-box 4 行。**但是**框 2 仍然是相同的高度，即使是 100%。

## 代码

```
<!-- main box -->
<div style='border: 1px solid; padding: 5px;'>

    <!-- box 1 -->
    <div style='border: 1px solid; height: 100%; float: right;'>Box 1 Line 1</div>
    <!-- box 2 -->
    <div style='border: 1px solid; height: 100%; float: left;'>Box 2 Line1<br /> Box 2 Line2<br />Box 2 Line3<br />Box 2 Line4</div>

<!-- clear -->
<div style='clear: both;'></div>
</div> 
```

## 包括简单的照片。

[http://im31.gulfup.com/Rn6H3.png](http://im31.gulfup.com/Rn6H3.png)

我还在学习，这让我很烦我不知道为什么当我将框 1 设置为 100% 高度时，框 1 不会与框 2 一起拉伸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:20:53.730

为容器添加高度。除非在包含元素上指定了高度，否则浏览器无法使用百分比计算高度。当浏览器尝试将 box2 设置为 100% 时，它无法确定 div 应为 100% 的高度（父元素高度）。

```
<div style="border: 1px solid; padding: 5px; height: 77px;">

    <!-- box 1 -->
    <div style="border: 1px solid; height: 100%; float: right;">Box 1 Line 1</div>
    <!-- box 2 -->
    <div style="border: 1px solid; height: 100%; float: left;">Box 2 Line1<br> Box 2 Line2<br>Box 2 Line3<br>Box 2 Line4</div>

<!-- clear -->
<div style="clear: both;"></div>
</div> 
```

来自[MDN](https://developer.mozilla.org/en-US/docs/CSS/height)：

> 该百分比是相对于生成框的包含块的高度计算的。如果包含块的高度没有明确指定（即，它取决于内容高度），并且该元素不是绝对定位的，则该值计算为 auto。根元素上的百分比高度是相对于初始包含块的。

**工作示例：http:** [//jsfiddle.net/pZHaY/](http://jsfiddle.net/pZHaY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:46:27.253

您已将添加的文本设置为仅框 2，并且您已将高度设置为 100%，这等于 height:auto; 它将内容的大小设为 100%，因此不会拉伸。最好的解决方案是将高度设置为固定 ex: height: 200px; 或者您可以添加内容并保持高度：100%。

# apache - 如何删除“http://”、“https://”和“www”。从使用 mod 重写的 URL？

> ID：15325775
> 
> 赞同：-1
> 
> 时间：2013-03-10T18:17:14.583
> 
> 标签：apache, .htaccess, mod-rewrite

我想从 URL 中删除“http://”和“https://”。我还想删除“www”。部分也是如此。全部使用 mod rewrite / .htaccess。我在这里找到的大多数相关答案都是使用 PHP 或 JavaScript。

```
e.g, 
"http://www.example.com" should become "example.com"
"https://example.com" should become "example.com"
"www.example.com" should become "example.com" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:19:37.773

`http://`and`https://`是协议说明符。浏览器可以为用户隐藏它们，但不能通过 modrewrite 从 URL 中删除它们。

对于 apache modrewrite 剥离`www.`，使用

```
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

# javascript - JavaScript：if 语句正在改变随机生成器的结果？

> ID：15325778
> 
> 赞同：0
> 
> 时间：2013-03-10T18:17:53.673
> 
> 标签：javascript, if-statement, random

基本上我正在创建一个类似于二十一点程序的程序，其中两张牌根据随机数生成器发牌，同一张牌可能同时发两次（即同时出现两张红桃皇后）和我想创建一个事件发生次数的计数器，但是当我实现 if 语句时，它会影响结果，因此两张卡总是完全相同......有人可以告诉我我在这里做错了什么? 代码如下：

```
function dealHand() {
var randomCardOne = Math.floor ((Math.random() *13) +2);
var randomCardTwo = Math.floor ((Math.random() *13) +2);
    if (randomCardOne = randomCardTwo) {identicalCards()};
} 

var identicalPairs = 0;
function identicalCards(){
    document.getElementById("identical").value=++identicalPairs;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:20:32.457

您正在将一张卡的价值分配给另一张卡

```
if (randomCardOne = randomCardTwo) {identicalCards()}; 
```

应该

```
if (randomCardOne == randomCardTwo) {identicalCards()}; 
```

在第一种情况下，您只是在分配 randomCardTwo 的值后评估 randomCardOne 是否“真实”。

考虑您是否可能想使用`===`而不是`==`因为

```
2 == '2' // yields true

2 === '2' // yields false 
```

在这种情况下这不是问题，但在其他情况下可能是这样，因此最好了解这一点。我尽量坚持，`===`因为它更严格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:19:10.770

您正在使用 =，这是 JavaScript 中的赋值运算符。你应该使用 ==

例如

```
if (randomCardOne == randomCardTwo) {identicalCards()}; 
```

# javascript - Javascript：数组中多个字符串的文本替换？

> ID：15325786
> 
> 赞同：6
> 
> 时间：2013-03-10T18:18:55.510
> 
> 标签：javascript, jquery, replace

我有一个带有 Twitter 主题标签的数组。我想`tw.text`为这些主题标签过滤一个字符串并将这些单词包装在一个`span`

```
var hashtags = new Array("home","car", "tree");

tw.text.replace('#home', '<span class="hash">#home</span>') 
```

我该怎么做？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T18:21:11.217

```
hashtags.forEach(function (elem) {
    tw.text = tw.text.replace('#' + elem, '<span class="hash">#' + elem + "</span>");
}); 
```

这不考虑包含可能导致重复替换的其他标签的标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T18:29:25.257

我会建立一个正则表达式来做这样的替换......

```
var hashtags = new Array("home","car", "tree");

var rex = new RegExp("#("+hashtags.join("|")+")",'g')

tw.text.replace(rex, '<span class="$1">#$1</span>') 
```

正则表达式最终成为`#(thing|another|etc...)`所有替换都一次性完成。

# php - php reg 表达式检查日期格式是否正确

> ID：15325790
> 
> 赞同：0
> 
> 时间：2013-03-10T18:19:15.247
> 
> 标签：php, regex

我目前正在尝试找出日期是否为`YYYY-DD-MM`.

在 PHP 中，我有这个：

```
if (preg_match('(\d{4})(-)(\d{2})(-)(\d{2})$', $newDateOfBirth)) 
```

但是我不断收到以下错误：

> 警告：preg_match(): Unknown modifier '(' in C:\webserver\webroot\index.php 第 105 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:20:52.793

您缺少分隔符：

```
if (preg_match('~(\d{4})(-)(\d{2})(-)(\d{2})$~', $newDateOfBirth)) 
```

# java - 将scala代码添加到java文件

> ID：15325791
> 
> 赞同：0
> 
> 时间：2013-03-10T18:19:15.993
> 
> 标签：java, scala

我有 .java 文件，并且有有效的代码。你能解释一下，是否可以在那里添加一些scala代码，比如改变

```
 int x, y;
int xx = 0;
int yy = 0;
int z = 0;
int flag = 0; 
```

到 `var x=0 var y=0 var z=0 ....`

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T19:20:31.957

文件是大多数语言的最小编译单元，包括 Java 和 Scala。因此，您不能向 Java 编译器指示它应该只编译文件的*某些部分*，而向 Scala 编译器指示它应该编译其他部分。

但是，您可以将用 Java 编写的类与用 Scala 编写的类混合使用，只要这些类位于它们自己的适当文件中即可。

（实际上，可以使用 REPL 解释器一次执行一行 Scala，但这不能以您想要的方式与 Java 代码合并，因为首先，Java 编译器不知道您在做什么，并且其次，Scala 实际上是秘密地将语句包装在类中以使其全部工作。）

# django - 来自模型的表格

> ID：15325795
> 
> 赞同：0
> 
> 时间：2013-03-10T18:19:21.867
> 
> 标签：django

我有不同的模型：

```
Cars
Pictures (models.ForeignKey(Cars))
CarsOptions(models.OneToOneField(Cars)) 
```

然后我想，那个用户可以添加新车。表格.py：

```
class NewCarsForm(ModelForm):
    class Meta:
        model = Cars
        exclude = ('checked','user') 
```

在views.py中：

```
@login_required
def add_car(request):
    form = NewCarsForm(request.POST or None)
    if form.is_valid(): 
        cmodel = form.save()
        cmodel.save()
        return redirect(profile)
    return render(request, 'add_car.html', { 'form': form,}) 
```

我有几个问题（是的，我读过[这个](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)）。

1.  如您所见，用户只能添加“汽车”，不能添加图片和选项。如何以一种形式在一个页面上执行此操作？
2.  `exclude = ('checked','user')`，这意味着，我想用checked=0制作所有新位置，所以我可以过滤它们。而用户字段 - 用户不能在列表中选择用户。如何获取用户 ID（谁添加了汽车）`form.save()`？

谢谢。

更新：

```
class Pictures(models.Model):
    cars = models.ForeignKey(Cars, related_name='pictures')
    width = models.PositiveIntegerField(editable=False, default=640)
    height = models.PositiveIntegerField(editable=False, default=480)
    image = models.ImageField(upload_to=lambda inst, fname: 'users_img/' + 'cars' + fname, height_field='height', width_field='width', max_length=100)
    def __unicode__(self):
        return str(self.id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T02:19:10.440

**表格.py**

```
class NewCarsForm(ModelForm):
    class Meta:
        model = Cars
        exclude = ('checked','user')

PicturesFormset = inlineformset_factory(Cars, Pictures, 
    fields=('field_name', 'field_name'), can_delete=True)

CarsOptionsFormset = inlineformset_factory(Cars, CarsOptions, 
    fields=('field_name', 'field_name'), can_delete=True) 
```

**视图.py**

```
@login_required
def add_car(request):
    cars = Cars(user=request.user)
    if request.method == 'POST':
        form = NewCarsForm(request.POST, instance=cars)
        if form.is_valid(): 
            cmodel = form.save()

            picture_formset = PicturesFormset(request.POST, request.FILES,
                instance=cmodel)
            if picture_formset.is_valid():
                picture_formset.save()

            option_formset = CarsOptionsFormset(request.POST, instance=cmodel)
            if option_formset.is_valid():
                option_formset.save()

            return redirect(profile)

    form = NewCarsForm()
    picture_formset = PicturesFormset(instance=Cars())
    option_formset = CarsOptionsFormset(instance=Cars())

    return render(request, 'add_car.html', { 
        'form': form,
        'picture_formset': picture_formset,
        'option_formset': option_formset,
    }) 
```

**模板**

```
<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}

    <h4>Car:</h4>
    {{ form.as_p }}

    <h4>Picture:</h4>
    {{ picture_formset.as_p }}

    <h4>Options:</h4>
    {{ option_formset.as_p }}

    <input type="submit" value="Submit">
</form> 
```

# d3.js - 未捕获的类型错误：无法读取未定义的属性“长度”

> ID：15325797
> 
> 赞同：0
> 
> 时间：2013-03-10T18:19:35.023
> 
> 标签：d3.js

运行以下代码时：

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.x.axis path {
  display: none;
}

.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 1.5px;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.js"></script>
<script>

var margin = {top: 20, right: 20, bottom: 30, left: 50},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var parseDate = d3.time.format("%e-%m-%Y").parse;

var x = d3.time.scale()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var line = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.value); });

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.csv("http://localhost/webserver/data/downloads.csv", function(error, data) {
  data.forEach(function(d) {
    d.date = parseDate(d.date);
    d.value = +d.value;
  });

  x.domain(d3.extent(data, function(d) { return d.date; }));
  y.domain(d3.extent(data, function(d) { return d.value; }));

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Price ($)");

  svg.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line);
});

</script> 
```

我收到以下错误：

```
Uncaught TypeError: Cannot read property 'length' of undefined d3.v3.js:7296 
```

该行具有以下描述：

```
 function d3_time_parse(date, template, string, j) {
    var c, p, i = 0, n = template.length, m = string.length; 
```

我的源数据如下所示：

日期；值 23-4-2012；12 24-4-2012；10 25-4-2012；13 26-4-2012；24 27-4-2012；45

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:40:59.383

您的 csv 应该有逗号`,`作为分隔符，并且属性区分大小写。尝试这个：

```
date,value
23-4-2012,12
24-4-2012,10
25-4-2012,13
26-4-2012,24
27-4-2012,45 
```

# time - 2人游戏在PSPACE

> ID：15325799
> 
> 赞同：0
> 
> 时间：2013-03-10T18:19:50.150
> 
> 标签：time, computer-science, complexity-theory, time-complexity, computation-theory

所以我给出了一个带有 2n 个变量的布尔公式 Q。用 Q(x1...xn,y1...yn) 表示，并且提到存在 a1....an 属于 {0,1} 使得对于属于 {0,1} 的每个 b1...bn Q(a1...an,b1,....bn} 现在的问题是证明这是在 PSPACE 和 U DTIME(2^ kn) 复杂度类。

现在我相信这就像两个玩家，其中玩家 A 有一个获胜的策略。如果我可以编写一个需要指数时间和多项式空间的程序，我会解决它。

现在，如果玩家 A 存在选择，则程序应该返回 true，即在他从 0 和 1 中选择 ai 的值之后，无论双玩家 B 选择什么，并且无论他给出的值为 0,1，公式将始终评估为 true。

所以我正在考虑以下条款

```
for ai=a1 to an
{
flag =true;
for j=0 to 1
{
set ai =j;

//check all possible combination of bi's and check the formula
//if formula evaluates to false ,set flag =false and break,
//try the next j for ai;

}

//if flag =false then ai is not a good selection ,select another ai
//if flag =true yes we have a good selection of ai ,
//player 1 will always win in this case
return true and break;

} 
```

这种方法是否正确，我也可以使用相同的方法检查 bi 的所有组合吗

```
for bi=b1 to bn
{
for j=0 to 1
{
//evaluate formula here
//but the problem is i do not have all the values of ai's
// i have only one value of ai ,what will i substitute for the rest
}

} 
```

任何解决此类问题的建议和新方法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:01:01.450

它在 DTIME(2**2n) 中。蛮力算法：

```
//requires n bits space, 2**n iterations of check() or 2**2n time total
loop over all possibilities to choose (a1,...,an):
    if (check(Q, (a1,..., an))):
        return (a1,...,an);

return null

check(Q, (a1,...,an)):
    //requires n bits space, 2**n iterations
    loop over all possibilities to choose (b1,...,bn):
        if (! Q(a1, ..., an, b1, ..., bn)):
             return false
    return true 
```

# playframework-2.0 - Securesocial，身份验证后调用linkedin请求的问题

> ID：15325800
> 
> 赞同：0
> 
> 时间：2013-03-10T18:19:57.910
> 
> 标签：playframework-2.0, linkedin, securesocial

我正在尝试使用 securesocial 通过 OAuth1 对 Linkedin 进行身份验证并获取已连接用户的连接列表。

身份验证工作正常，但在用户连接后调用任何请求，都会返回 401 响应。我可能做错了，但我没有看到潜在的问题。

这是添加到securesocial 代码中提供的Java Demo 应用程序的简单方法：

```
@SecureSocial.SecuredAction ( authorization = WithProvider.class, params = {"linkedin"})
public static Result linkedinConnections(){
    Identity user = (Identity) ctx().args.get(SecureSocial.USER_KEY);        
    OAuth1Info oauthInfo = user.oAuth1Info().get();

    String url = "http://api.linkedin.com/v1/people/~/connections:(headline,first-name,last)?format=json";
    String consumerKey = SecureSocial.serviceInfoFor(user).key().key();
    String consumerSecret = SecureSocial.serviceInfoFor(user).key().secret();

    return async(
            WS.url(url)
            .sign(
                new OAuthCalculator(
                    new OAuth.ConsumerKey(consumerKey, consumerSecret), 
                    new OAuth.RequestToken(oauthInfo.token().toString(), oauthInfo.secret().toString())
                )
            )
            .get()
            .map(new Function<WS.Response, Result>() {
                public Result apply(WS.Response response) {
                    System.out.println(response);
                    return ok(response.getStatusText());
                }
            })
        );
} 
```

任何想法都会有所帮助

问候， 纳比尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T07:45:59.663

我没有尝试将 SecureSocial 与 LinkedIn 一起使用，但鉴于此

*   SecureSocial 的身份验证有效
*   您想列出 LinkedIn 用户的连接
*   您自己的方法总是得到 401 错误（未经授权）

很明显，您正在混合两种不同的访问级别。SecureSocial 执行的身份验证只需要来自 LinkedIn 的基本信息，例如姓名或邮件地址。然后使用相同的身份验证令牌，您想访问 LinkedIn 用户的高级信息（其连接）。这当然被 LinkedIn 拒绝（未经授权），因为用户只允许您访问他的基本个人资料，而不是他的联系人/连接。

如果您希望获得更多权限以列出用户的连接，我认为您必须将范围信息添加到 SecureSocial 发送的 OAuth 身份验证请求中。这可能意味着您必须编辑模块的源文件以添加范围信息。

有关 LinkedIn 范围和权限，请参阅[https://developer.linkedin.com/documents/authentication](https://developer.linkedin.com/documents/authentication)。有关 LinkedIn SecureSocial 代码，请参阅[https://github.com/jaliss/securesocial/blob/master/module-code/app/securesocial/core/providers/LinkedInProvider.scala](https://github.com/jaliss/securesocial/blob/master/module-code/app/securesocial/core/providers/LinkedInProvider.scala)。

希望这可以帮助。

# objective-c - 为什么我在尝试对此 NSMutableArray 进行排序时会看到“不兼容的类型”错误？

> ID：15325802
> 
> 赞同：-2
> 
> 时间：2013-03-10T18:20:03.580
> 
> 标签：objective-c, nsmutablearray

我想对 NSStrings 的 NSMutableArray 进行排序。我发现的所有教程都说了同样的话，但是当我尝试遵循它们时，我看到了编译时错误。我的代码如下：

```
NSArray *sorted=[self.expressions sortUsingComparator:@selector(compare:)]; 
```

我看到的编译错误如下：

![代码打印屏幕](../Images/57bcfc707cadaaaa2bba484cbe93e99f.png)

为什么我会看到此“将 'SEL' 发送到不兼容类型的参数”错误，我能做些什么来防止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T18:23:15.600

您调用`sortUsingComparator`的不是选择器而是比较器块

你想调用`sortUsingSelector:`——它调用你传递的选择器（比较：）为每个比较

# compilation - 为什么 Go 编译的版本比较庞大？

> ID：15325804
> 
> 赞同：0
> 
> 时间：2013-03-10T18:20:06.243
> 
> 标签：compilation, go

我最近安装了 go 并尝试了 hello world 示例。

```
package main
import "fmt"
func main() {
    fmt.Printf("hello, world\n")
} 
```

> $ 去构建 hello.go

返回 1.2Mb 大小的 hello 二进制文件。这对于一个 hello world 程序来说是相当大的。关于为什么文件大小很大的任何特殊原因？是因为导入“fmt”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T19:35:51.010

这是[一个围棋常见问题](http://golang.org/doc/faq#Why_is_my_trivial_program_such_a_large_binary)

**为什么我的小程序是这么大的二进制文件？**

> gc 工具链中的链接器（5l、6l 和 8l）执行静态链接。因此，所有 Go 二进制文件都包含 Go 运行时，以及支持动态类型检查、反射甚至恐慌时堆栈跟踪所需的运行时类型信息。
> 
> 在 Linux 上使用 gcc 静态编译和链接的简单 C“hello, world”程序大约 750 kB，包括 printf 的实现。使用 fmt.Printf 的等效 Go 程序大约为 1.2 MB，但其中包括更强大的运行时支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:36:23.847

是的，包“fmt”是原因之一。它还反过来导入其他包。但即使不使用“fmt”，整个运行时也会静态链接到 Go 二进制文件中。Go 的运行时并不是一个简单的运行时——它包括例如调度程序/goroutine 与 OS 线程管理器、拆分堆栈分配器、垃圾收集器和垃圾收集器友好的内存分配器（也是 C 线程友好的）、信号处理程序和堆栈跟踪生成器。 ..

# php - Zend::encode + blob

> ID：15325806
> 
> 赞同：0
> 
> 时间：2013-03-10T18:20:14.087
> 
> 标签：php, zend-framework, json

基本上，我有一行包含一个 blob。

```
$query = "SELECT * from blah"; 
$objects = $db->fetchAll($query);
$output =  Zend_Json::encode($objects); 
```

输出中没有 blob 内容，它们都是空的。

我的问题是 - 可以`Zend_Json`编码处理这个还是原生的`json_encode`？还是我必须编写一个特殊的函数来处理这种情况？

哎呀，我想我至少可以部分回答我自己的问题 - 见这里 - [Zend_JSON:Encode messing up - 为什么？](https://stackoverflow.com/questions/1741894/zend-jsonencode-messing-up-why)

使用 utf8_encode 解析二进制文件修复了这个问题。

这是一个简单的解决方案，但它是最好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:02:39.573

哎呀，我想我至少可以部分回答我自己的问题 - 见这里 - [Zend_JSON:Encode messing up - 为什么？](https://stackoverflow.com/questions/1741894/zend-jsonencode-messing-up-why)

使用 utf8_encode 解析二进制文件修复了这个问题。

这是一个简单的解决方案，但它是最好的解决方案吗？

# php - 从数据库PHP计算大数据

> ID：15325807
> 
> 赞同：0
> 
> 时间：2013-03-10T18:20:23.790
> 
> 标签：php, mysql, sql, phpmyadmin

我创建了一个从数据库计算库存的表（客户端），数据库有大量从本地文件导入的数据，但是表（客户端）有超过 30 列，大部分列只是计算从基于产品的数据库，但项目的行只有 700 个项目，我从浏览器收到错误“此网页不可用”，当我尝试仅检索 400 个项目时，它工作正常，所以检索和计算 700 个项目的 30 列项目时有什么问题，

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:23:39.827

也许它正在超时。使用 php 函数`set_time_limit(0)`。
通过零，没有时间限制。

# ruby - Ruby 1.9.2 EOL 了吗？

> ID：15325817
> 
> 赞同：9
> 
> 时间：2013-03-10T18:21:16.270
> 
> 标签：ruby

Ruby 1.9.2 (p320) 的最后一个补丁版本于 2012 年 4 月发布，几乎是一年前。从那时起，针对 1.9.3 发布了 4 个补丁版本。最新的 1.9.2 版本不包含 1.9.3 的安全修复：[fix1](http://www.ruby-lang.org/en/news/2012/11/09/ruby19-hashdos-cve-2012-5371/)、[fix2](http://www.ruby-lang.org/en/news/2013/02/22/json-dos-cve-2013-0269/)、[fix3](http://www.ruby-lang.org/en/news/2013/02/22/rexml-dos-2013-02-22/)

1.9.2 还支持吗？在 gems 中支持 MRI 1.9.2 有意义吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-09T12:29:50.177

[根据马茨](https://twitter.com/yukihiro_matz/status/421152831844806656)：

“1.8.7 和 1.9.2 将于 2014 年 6 月停产。根据当前计划，2.0 和 2.1 将在发布后维持 2 年。”

[根据红宝石问题跟踪器](https://bugs.ruby-lang.org/issues/9217)Zachary Scott 的说法：

“1.9.3 将在 2014 年 3 月 EOL'd 我们将在 2.1.0 发布的公告中正式宣布它。额外的 1.9.3 维护取决于 Ruby 协会与美国的合同延期。”

## 我的想法

*   1.9.3 在 1.9.2 之前结束有点奇怪，但我怀疑 1.9.2 的安装基数更大一些。

*   如果 ruby​​-lang.org 有一个包含最新 ruby​​ 版本以及 EOL 的中央表格，那就太好了。目前信息在提交、推文等之间有点分散。但核心团队反应迅速。

*   鉴于 Heroku 对 Ruby 的支持，[查看 Heroku 支持的 Ruby 版本](https://devcenter.heroku.com/articles/ruby-support#ruby-versions)也可能会间接提供支持的概念。

## 更新

[Ruby 发布工程](https://bugs.ruby-lang.org/projects/ruby/wiki/ReleaseEngineering)页面列出了以下日期：

*   正常维护：2012年6月完成
*   安全修复：于 2013-06-01 完成
*   延长维护：2014-06-30完成

## 其他来源

*   [https://www.ruby-lang.org/en/news/](https://www.ruby-lang.org/en/news/)
*   [https://bugs.ruby-lang.org/projects/ruby/wiki/ReleaseEngineering](https://bugs.ruby-lang.org/projects/ruby/wiki/ReleaseEngineering)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-10T19:00:31.560

我认为 1.9 分支上支持的最新版本是 1.9.3。所以如果你打算在你的 gems 中支持 ruby​​ 1.9，你应该支持 1.9.3。

对于 ruby​​ 1.9，您会发现大多数用户使用 1.9.3，因为它支持 1.9 分支的版本。1.9.2 和 1.9.3 之间的语言差异也很小（1.9.3 主要是在“更好的实现”上工作）。

如果你真的想支持 1.9.2，那么你应该。

# eclipse - Apache tomcat 7 localhost 页面没有错误，但是在运行项目时：显示 HTTP 状态 404

> ID：15325818
> 
> 赞同：2
> 
> 时间：2013-03-10T18:21:21.500
> 
> 标签：eclipse, tomcat, localhost, http-status-code-404

我知道有很多关于 Apache tomcat 404 错误的问题：但我认为我的不同。

*   我正在使用 Windows 7 64 位
*   **将 eclipse-jee-juno-SR2-win32-x86_64**解压到 C:\
*   解压**apache-tomcat-7.0.37-windows-x64**
*   将端口 server.xml 更改为 3030 而不是 8080
*   从第 (2) 点 继续执行[此步骤](http://www.coreservlets.com/Apache-Tomcat-Tutorial/tomcat-7-with-eclipse.html) **“快速启动”**
*   **我没有忘记：**
*   复制ROOT文件夹
*   R-单击 Eclipse 服务器选项卡中的 tomcat 节点 -> 属性 -> 切换位置
*   在项目资源管理器中双击 tomcat 节点并检查**使用 tomcat instillation（控制 tomcat 安装）**

页面：`http://localhost:3030/`工作正常。它显示消息**如果你看到这个，你已经成功安装了 Tomcat。恭喜！**

**但是**当我尝试简单的项目（我遵循[基本教程](https://www.youtube.com/watch?v=oX2rw5pAdxw&list=PLE0F6C1917A427E96&index=2)）并使用**Run as** -> **Run on Server**时，会显示错误 404 的页面。当回到`http://localhost:3030/`它显示没有错误。

*   没有错误`http://localhost:3030/`
*   运行项目时出错！

> HTTP 状态 404 - /SimpleProject/
> 
> * * *
> 
> 类型状态报告
> 
> 消息 /SimpleProject/
> 
> 描述 请求的资源不可用。
> 
> * * *
> 
> Apache Tomcat/7.0.37

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:22:44.937

我是这个问题的作者，我解决了它。我将提供解决方案，以便其他人可以从中获得帮助。

当我仔细遵循这个[安装步骤](http://www.coreservlets.com/Apache-Tomcat-Tutorial/tomcat-7-with-eclipse.html)时，安装是正确的。

导致错误的唯一问题是在**web.xml**中：
- 创建新的“动态 Web 项目”时（以我
为例） - 处理此文件：**WebContent -> WEB-INF -> web.xml**
-`<welcome-file> </welcome-file>`标签必须引用现有文件才能在浏览器中显示。
- 如果有一些默认标签删除它们。
- 例如，当您创建一个名为**index.html**的新 HTML 文件时，请确保**web.xml**文件引用它。`<welcome-file>index.html</welcome-file>`

* * *

**题外话**（与上面的解决方案无关）
我实际上正在广泛使用 NetBeans 做简单的 Java 标准版项目。我很少遇到 NetBeans 问题，当它们发生时，我可以自己或通过搜索有关问题的信息轻松解决它们。

当我开始学习 Java Entrprise Edition 并查看有关 NetBeans 的教程时，我从**第一**天就开始了我的第一个项目。

但我发现大多数教程都使用 Eclipse，这就是我安装它的原因。

当我搬到 Eclipse 时。我遇到了很多问题，每个问题都需要花费数小时来搜索和解决。在开始一个项目之前需要**三天时间。**

我想知道为什么人们更喜欢 Eclipse 而不是 NetBeans。我认为有一些原因。(^_^)

# ruby-on-rails - 使用日期时间的 Rails 和 Jquery datepicker

> ID：15325820
> 
> 赞同：0
> 
> 时间：2013-03-10T18:21:30.267
> 
> 标签：ruby-on-rails, ruby, jquery-ui

我希望日期选择器更新日期时间的“日期”部分，而 time_select 更新日期时间的“时间”部分我尝试了什么：

```
<%= f.text_field :Start_Time , :class => 'datepicker' %> <P>
<%= f.time_select :Start_Time, :class => 'time_select' ,:ignore_date => true %> 
```

但它不起作用

```
1 error(s) on assignment of multiparameter attributes

{"utf8"=>"✓",
 "authenticity_token"=>"5gQBBtVp8F1363IWsxzl9sF9QC9oAjP37r1e9pyS1NQ=",
 "booking"=>{"Create_Date"=>"",
 "Start_Time"=>"2013/03/06",
 "Start_Time(4i)"=>"18",
 "Start_Time(5i)"=>"06",
 ..... 
```

日期选择器可以更新日期字段但不能更新日期时间字段的日期部分谁能告诉我那里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:09:00.087

我不认为你能做到这一点。您必须将它们作为单独的属性提交，然后编写一个方法将它们加入模型中。

或者，如果您使用 jquery-ui datepicker，您可以添加[时间插件](https://github.com/trentrichardson/jQuery-Timepicker-Addon)并创建一个新的 css 类“datetime_picker”+ js 初始化程序。这样，您可以执行以下操作：

```
f.text_field :Start_Time , :class => 'datetime_picker' 
```

# java - Android 使用 GCM 和 PHP 从设备向其他设备发送通知

> ID：15325822
> 
> 赞同：1
> 
> 时间：2013-03-10T18:21:46.787
> 
> 标签：java, php, android, notifications, google-cloud-messaging

我需要有关如何使用 GCM 和 PHP 作为服务器的相同应用程序将通知从设备发送到其他设备的帮助。

谁能给我一个简单的例子，说明如何注册为用户并向另一个用户发送消息。或提供任何对我的申请有用的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:57:40.450

我想我知道你在说什么。首先，如果您想从设备 A 向设备 B 发送 Google Cloud Message，您必须拥有设备 B 的 GCM 注册 ID。（我希望您不打算将设备 B 的注册 ID 存储在设备 A 上）

这是一种方法

创建注册页面。从用户那里获取一个唯一的输入，比如电子邮件地址（不要忘记验证它）并获取 GCM 注册 ID。然后将此信息以唯一输入（电子邮件）作为主键存储在服务器中，并将其与 GCM 注册 ID 映射。

现在**，如果您想要**应用程序的用户，假设用户 A 向用户 B 发送一些信息（例如聊天应用程序），使用用户 B 的唯一输入（电子邮件地址）从设备 A 调用您的 PHP 方法。您的 Web 方法可以从输入参数中获取设备 B 的 GCM 注册 ID，并可以发送 GCM 消息。您可以从用户的通讯录或电子邮件地址中的联系人中获取用户 B、C、D 等的电子邮件地址（或使用社交网络 SDK 获取电子邮件地址）。

**如果您希望您的应用**在未经用户同意的情况下从设备 A 向设备 B 发送 GCM 消息，那么您还需要设备 B 的注册 ID 或映射的唯一密钥（本例中为电子邮件）。在这种情况下，我真的没有看到任何用处。但是由于您在原始问题中没有提及任何细节，因此我提供了可能性。

您不能使用 IMEI 号码，因为设备 A 不知道设备 B 的 IMEI 号码。如前所述，您不能将来自 USER A、B、C、D 的所有注册 ID 存储在设备 A 中。

# sql - 带有自定义参数的存储过程

> ID：15325827
> 
> 赞同：0
> 
> 时间：2013-03-10T18:22:15.493
> 
> 标签：sql, sql-server, tsql

我正在尝试创建一个存储过程来汇总我创建的视图中的计数，但我需要使用自定义参数，因为我想过滤开始日期和结束日期（我的两个参数）并且这些应该依赖于用户输入。

例如，我想要这样的东西，除了我希望 @Name 是由另一个人设置的值，而不是在过程本身中设置的值。解决此问题的最佳方法是什么？

```
DECLARE @Name VARCHAR(20)
SET @Name='User1'
SELECT
    SUM(
        CASE
            WHEN Name=@Name THEN Total*-1
            ELSE Total
        END
    ) [Total Adj]
    ,Date
FROM Table
GROUP BY Date 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:36:35.413

只需创建一个 SP：

```
CREATE PROC some_proc @Name VARCHAR(20)
SELECT
    SUM(
        CASE
            WHEN Name=@Name THEN Total*-1
            ELSE Total
        END
    ) [Total Adj]
    ,Date
FROM Table
GROUP BY Date 
```

并使用它：

```
some_proc 'User1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:45:13.170

您可以通过以下方式称呼您：

```
Exec spname 'name','param1','param2' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T19:35:08.637

我更喜欢表格功能。与程序基本相同，但可用于类似于视图。另外，作为一个函数返回一些东西，我更喜欢使用一个函数来返回数据。一个过程做某事。但是，这只是我个人的看法。

```
create function dbo.some_func(@Name Varchar(30))
returns table
as
begin
  return(
    SELECT
      SUM(CASE WHEN Name=@Name THEN Total*-1 ELSE Total END) [Total Adj]
         ,Date
    FROM Table
    GROUP BY Date
)
end 
```

# android - Android：具有流体宽度中间列的 3 列布局

> ID：15325832
> 
> 赞同：0
> 
> 时间：2013-03-10T18:22:46.620
> 
> 标签：android, android-tablelayout

我有一个表格行，它是屏幕的全宽，它包含 2 个文本视图和一个按钮。理想情况下，我希望显示为：

[文本视图1][文本视图2][按钮]

Textview1 贴在左侧，Button 贴在右侧，Textview2 填充剩余的可用空间。我一直在环顾四周，但找不到任何可以自动拉伸以适应剩余部分的选项。

由于应用程序的性质，我必须自动添加这些表格行及其内容，所以这就是我目前所拥有的。

```
for( Program element :  sampleList)
{           
LayoutParams trLP = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
LayoutParams timeLP = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
LayoutParams titleLP = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
LayoutParams moreInfoLP = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);

//Table row to hold details
TableRow tr = new TableRow(this);
tr.setLayoutParams(trLP);

//Time
TextView time = new TextView(this);
time.setText(element.getTime());
timeLP.width=50;
timeLP.gravity=1;
time.setLayoutParams(timeLP);

//Title
TextView title = new TextView(this);
title.setText(element.getTitle());
title.setLayoutParams(titleLP);

//Button
moreInfo = new Button(this);
moreInfo.setText("More Info");

//Add to text views to table row
tr.addView(time);
tr.addView(title);
tr.addView(moreInfo);

holder.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));              
} 
```

上面的工作但显然没有像我想要的那样显示，因为中间文本视图上的 wrap_content，我知道我可以硬编码一个宽度，但非常希望远离这种情况。我正在尝试用我拥有的当前代码实现什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:44:17.000

您可能想尝试`weight`LayoutParameters 的属性。在您的情况下，将外部元素的权重设置为 0，将中心元素的权重设置为 1。这应该使中心元素占据尽可能多的空间。然而，权重属性有时会有点奇怪。

也看看[这个 Q/A](https://stackoverflow.com/questions/2698817/linear-layout-and-weight-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:08:36.433

我会为此使用 Mig Layout（[http://www.miglayout.com/](http://www.miglayout.com/)和[https://github.com/saynomoo/mig4android](https://github.com/saynomoo/mig4android)），因为它确实使这种事情变得更容易。我没想到，但填充和增长限制看起来应该可以完成您需要的工作。

# linux - 编译 xcbproto 1.7 时出错

> ID：15325835
> 
> 赞同：0
> 
> 时间：2013-03-10T18:22:56.917
> 
> 标签：linux

我尝试在 linux 中编译 xcbproto 1.7 并在输入 make install 命令时收到错误消息

```
Making install in xcbgen
make[1]: Entering directory `/home/reham/miriad_files/xcb-proto-1.7/xcbgen'
make[2]: Entering directory `/home/reham/miriad_files/xcb-proto-1.7/xcbgen'
make[2]: Nothing to be done for `install-exec-am'.
test -z "/usr/local/lib/python2.5/site-packages/xcbgen" || /bin/mkdir -p "/usr/local/lib/python2.5/site-packages/xcbgen"
 /usr/bin/install -c -m 644 __init__.py error.py expr.py matcher.py state.py xtypes.py '/usr/local/lib/python2.5/site-packages/xcbgen'
/home/reham/Desktop/Fermi/ScienceTools-v9r15p2-fssc-20090808-i686-pc-linux-gnu-libc2.5/i686-pc-linux-gnu-libc2.5/bin/python: error while loading shared libraries: libpython2.5.so.1.0: cannot open shared object file: No such file or directory
make[2]: *** [install-pkgpythonPYTHON] Error 127
make[2]: Leaving directory `/home/reham/miriad_files/xcb-proto-1.7/xcbgen'
make[1]: *** [install-am] Error 2
make[1]: Leaving directory `/home/reham/miriad_files/xcb-proto-1.7/xcbgen'
make: *** [install-recursive] Error 1 
```

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:33:10.690

您似乎已在系统上安装的自定义 python 版本似乎存在问题。即这个：

```
/home/reham/Desktop/Fermi/ScienceTools-v9r15p2-fssc-20090808-i686-pc-linux-gnu-libc2.5/i686-pc-linux-gnu-libc2.5/bin/python 
```

这似乎取决于`libpython2.5.so.1.0`链接器未找到的共享库。

很可能您安装的自定义 python 版本带来了这个共享库，因为它不在标准目录之一中，所以找不到它。

要解决此问题，您可以尝试使用系统上安装的 python 版本，或者添加包含`libpython2.5.so.1.0`链接器搜索的路径的路径。

我的猜测是它会在下面的某个地方 `/home/reham/Desktop/Fermi/ScienceTools-v9r15p2-fssc-20090808-i686-pc-linux-gnu-libc2.5/i686-pc-linux-gnu-libc2.5/`

很可能在子目录中`/lib`。

# google-visualization - 谷歌折线图：如何添加单位？

> ID：15325837
> 
> 赞同：7
> 
> 时间：2013-03-10T18:23:00.503
> 
> 标签：google-visualization

[https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart#Example](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart#Example)

如何将单位添加到垂直轴，如“$”或“€”？在示例中，它应该是 1.200 $、1.000 $、800 $、600 $ 和 400 $。

像这样添加'$'是行不通的：

```
var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2004',  1000 '$',      400],
      ['2005',  1170 '$',      460],
      ['2006',  660 '$',       1120],
      ['2007',  1030 '$',      540]
    ]); 
```

我知道，这是一个不好的例子，因为 sales 没有任何单位，但这只是一个例子。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-10T20:30:11.923

您需要在图形选项中添加格式标签，如下所示：

```
var options = {
    vAxis: {format:'# $'}
}; 
```

参考：[https ://google-developers.appspot.com/chart/interactive/docs/gallery/linechart#Configuration_Options](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart#Configuration_Options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T20:07:19.233

我偶然发现了这个问题，发现较新的 Google 表格（2017 年）具有网格/图表的“高级编辑”选项。单击右上角的向下箭头，您将看到它。如果向下滚动，该界面上的最后一个选项卡可让您为数据轴设置自定义前缀/后缀。

# java - 基于Java中玩家的用户输入和每个玩家的卡片返回一副卡片

> ID：15325850
> 
> 赞同：5
> 
> 时间：2013-03-10T18:24:18.847
> 
> 标签：java

我有洗牌和返回结果的一副牌，但现在我想根据用户输入更改输出：玩家数量和每位玩家的卡片数量。

**原始代码：**

**CardRun - 主要**

```
public static void main(String[] args)
{
    Scanner scan = new Scanner(System.in);
    Deck deck = new Deck();
    Card C;

    System.out.println(deck.getTotalCards());
    System.out.print("Number of players: ");
    int players = scan.nextInt();
    System.out.print("Number of cards: ");
    int cards = scan.nextInt();

    while(deck.getTotalCards() != players)
    {
        C = deck.drawFromDeck();
        System.out.println(C.toString());
    }

} 
```

**甲板等级**

```
public class Deck {
private ArrayList<Card>cards;

Deck()
{
    cards = new ArrayList<Card>();
    for(int a=0; a<=3; a++)
    {
        for(int b=0; b<=12; b++)
        {
            cards.add(drawFromDeck());
        }
        cards.addAll(cards);
    }
}

public Card drawFromDeck()
{
    Random generator = new Random();
    int index = generator.nextInt(cards.size());
    return cards.remove(index);
}

public int getTotalCards()
{
    return cards.size();
}

} 
```

**卡类**

```
public class Card {
private int card, suit;
private static String[] suits = {"Clubs", "Diamonds", "Hearts", "Spades"};
private static String[] cards = {"Ace", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King"};

Card(int suit, int card)
{
    this.card = card;
    this.suit = suit;
}

public @Override String toString()
{
    for(int i = 0; i<players; ++i)
    {
        System.out.println("Player " + (i+1) + ": "+ cards.get(i));
    }
}

public int getCard()
{
    return card;
}

public int getSuit()
{
    return suit;
}
} 
```

**输出** 牌组：54
玩家数量：4（由用户输入）
每个用户的卡片数量：5（由用户输入）
玩家 1：黑桃 A、红心 2、红色小丑
玩家 2：红心 8、10 Clubs, 9 of Hearts
Player 1 有更好的牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:34:55.733

如我所见，您让每个玩家`cards`从牌组中抽牌：

```
List<Hand> hands = new ArrayList<Hand>(players); // defines each players hand (in your case one, each "cards" cards);

// let 'em draw
for(int k=0; k<players; ++k) {
    Hand currentHand = new Hand();
    for(int i=0; i<cards; ++i) {
       currentHand.add(deck.drawFromDeck());
    }
    hands.add(currentHand);
}

// find the best
Collections.sort(hands); // make sure to implement Comparable, to reasonably check which one has the best hand

for(int i=0; i<players; ++i) {
    System.out.println("Player " + (i+1) + ": " + hands.get(i)); // Make sure Hand::toString() is overriden properly
} 
```

是的，我认为应该这样做，它仍然非常**干净和模块化**。

# android - Listening to touch events in an Android View based class

> ID：15325854
> 
> 赞同：1
> 
> 时间：2013-03-10T18:24:33.740
> 
> 标签：android, touch-event, ontouchlistener

when deriving a class from android.view.View, I see 3 possibilities to handle touch events:

1.  use the setOnTouchListener method to add a listener instance
2.  override the View.onTouchEvent method
3.  implement OnTouchListener in derived View

    ```
    class ExtendedView extends View {
        public ExtendedView(Context context) {
            super(context);

            // 1\. set a listener
            setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    // TODO Auto-generated method stub
                    return false;
                }
            });
        }

        // 2\. override onTouchEvent
        @Override
        public boolean onTouchEvent(MotionEvent event) {
            // TODO Auto-generated method stub
            return super.onTouchEvent(event);
        }
    }

    // 3\. implement and use OnTouchListener
    class ExtendedView3 extends View implements OnTouchListener {

        public ExtendedView3(Context context) {
            super(context);
            setOnTouchListener(this);
        }

        // not override this 
        // public boolean onTouchEvent() {...}

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            return false;
        }
    } 
    ```

These alternatives seems to serve the same purpose. The only obvious difference is the extra View parameter, when using OnTouchListener - so one could listen to different views (in this case a non anonymous listener would be used). But this is not needed in my scenario; I just want to listen to the events of the instance of my ExtendedView.

I use - with some success - alternative 2, override onTouchEvent. Overriding the existing method seems to me the natural and simplest way to accomplish the task.

The reason why I'm here: I've see code in which a View derived class uses setOnTouchListener to set an extra listener, instead of overriding onTouchEvent.

So my questions are:

1.  do I miss something?
2.  is alternative 1 (and 3) appropriate, when deriving from a View?

Extra Bonus question: View does NOT implement the OnTouchListener interface, but has the onTouchEvent method. Why? Wouldn't it be more coherent for the View to implement this interface instead of having the onTouchEvent method?

* * *

PS: I found a discussion about this issue:

[Where should I implement the Android onTouchListener?](https://stackoverflow.com/questions/9492573/where-should-i-implement-the-android-ontouchlistener)

Frankly, I don't understand the accepted answer: "edthethird" wrote about overriding onTouchEvent:

> There is only 1 extra class instantiated ...

which extra class - I don't see one.

And in the onTouchEvent implementation he compares an event with a view - this doesn't make much sense for me. Additionally he assumes that different views will call onTouchEvent - but - if I understand the override approach right - this will NOT happen.

--

"BeatingToADifferentRobot" wrote "... setOnTouchListener [..] provides more flexibility and follows a general java pattern"

I can't follow this. What more flexibility could that be? I can always derive from the class and override the method.

And overriding a method is - hopefully - nothing "not following a general java pattern"

# php - 访问 PHP 方法

> ID：15325858
> 
> 赞同：0
> 
> 时间：2013-03-10T18:25:22.983
> 
> 标签：php, database, methods, c#-3.0

我即将开始为使用 C# 的组织开展项目。为了获得必要的数据，我必须从数据库中获取数据，但是，即使创建应用程序，我也不会被授予访问数据库的权限。您可以假设这会带来一些挑战。

在过去的一个项目中，我创建了一个 PHP 脚本，它为我访问数据库并以 JSON 格式返回数据。我也想这样做，不幸的是，我需要能够进行大约 100-120 个查询，因此为我需要的每个查询创建一个 PHP 脚本将非常耗时。

是否可以在 PHP 中创建一个接受字符串参数的方法，然后以某种方式将字符串从 C# 传递给它？如果是这样，那我该怎么做？如果我可以将字符串传递给脚本中的方法，那么它只需要 3 个方法（在 PHP 脚本中）就可以进行所有必要的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:08:44.233

从 C# 应用程序/库调用 PHP 方法的简单示例将涉及使用`WebRequest`和`WebResponse`类：

```
HttpWebRequest request = (HttpWebRequest) 
    WebRequest.Create("http://server/script.php?method=my_method");

HttpWebResponse response = (HttpWebResponse) request.GetResponse();

Stream stream = response.GetResponseStream(); 
```

使用流，您可以解析或反序列化响应，例如，如果它是 JSON 字符串。

此实现依赖于`script.php`使用`method`参数，并将调用委托给该方法；如果您愿意，可以使用伪路由。更多参数可以通过查询字符串传递，并由调用的方法使用。

另一个简单的例子：

```
$r = new Repository();
$d = $r->{$_GET['method']}();
echo json_encode($d); 
```

**但是**，其中大部分可以使用现有技术来实现。将 PHP 方法公开为 API 已经过时了，并且存在大量 RESTful API 框架来加速此类应用程序的开发。使用 API 的 C# 应用程序/库也是如此，前提是您使用带有客户端实现的东西。

你的问题的答案，“*有没有可能……* ”；当然可以，但是这是一个相当高的要求，实现将完全依赖于问题域。

* * *

作为一个详细说明（*评论可能太长了*），我目前正在开展一个大规模的大修项目。以前的开发人员决定推出自己的一切。这对我意味着什么？我无法重用他们的代码库。他们推出了自己的安全策略。垃圾。

我说垃圾不是因为我可以**写得**更好（*我可能会，但不多*），而是因为我知道得更好。

我喜欢成熟的技术，那些集成良好并拥有大量社区和开发人员支持的技术。当我在文档和此处之间遇到问题时，我通常可以很快找到解决方案。此外，组件的问题已记录、修复并且可以解决。

将自己的集成组件（*无论是安全性还是其他*）用于生产，尤其是当您*知道*自己将其视为学习经历时，是不负责任的。

# php - Calling specific version of python from PHP

> ID：15325859
> 
> 赞同：4
> 
> 时间：2013-03-10T18:25:24.677
> 
> 标签：php, python, exec, environment-variables

I'm setting up a big system relying on python 2.7 being run through php. The call is always something like:

```
exec('python test.py'); 
```

However no matter what I do PHP keeps using python 2.4 for executing my files. Because of the size of the system I can't change in the programming, but will have to make 'python' point directly to python2.7.

By searching around I have reached the conclusion that I should change the php env.

```
echo getenv("PYTHONPATH"); // NOTHING
echo getenv("PATH"); // /bin:/usr/bin 
```

I can do so through `putenv` (for example: `putenv("PATH=/usr/bin/python2.7:".$_ENV["PATH"]`), but php keeps running python 2.4 no matter what I change it to.

Hope somebody out there got a simple solution :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T18:31:29.840

你能不能只这样做：

```
exec('/usr/bin/python2.7/python test.py'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:53:23.597

另一种选择，您可以在脚本 test.py 的第一行中设置解释器的路径

```
#!/usr/local/bin/python2.7 
```

但你需要使 test.py 可执行

```
chmod +x path_to_file/test.py 
```

并从 php 运行

```
exec('path_to_file/test.py'); 
```

PS 注意管理员有时会禁用服务器上的 exec 功能以确保安全。disable_functions="popen,exec,system,passthru,proc_open,shell_exec" ....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:34:30.103

如果您不能使用完整路径，请尝试使用别名：

```
alias python='/usr/bin/python2.7'
python --version
Python 2.7.2 
```

# javascript - Div that appears on Scroll but not on page load

> ID：15325861
> 
> 赞同：0
> 
> 时间：2013-03-10T18:25:35.407
> 
> 标签：javascript, jquery, html, scroll

I'm making this web page and I want a div to appear only on scrolling down 300px from the top of the page. This is the JavaScript i borrowed from the net:

```
<script type="text/javascript">
$(document).ready(function(){
$(window).scroll(function(){
var y = $(window).scrollTop();
if(y > 300){
  $("#topdiv").fadeIn("slow");
 } else {
  $("#topdiv").fadeOut("fast");
}})});</script> 
```

The only issue with this is that when the page loads, the div appears on top and then disappears once the user starts scrolling. I dont want the div to appear once the page loads. Something like this is exactly what i want:

[http://www.calmdigital.com/](http://www.calmdigital.com/)

Would greatly appreciate help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:27:45.600

on document ready hide the div

```
$(function(){
if($("#topdiv").length>0)
 $("#topdiv").hide();
}); 
```

or hide it via css

```
#topdiv{
 display:none;
} 
```

# python - Orange information score maximum value, in the context of bayesian and tree classifiers

> ID：15325865
> 
> 赞同：1
> 
> 时间：2013-03-10T18:26:02.487
> 
> 标签：python, bayesian, classification, orange

I am working with the Orange package and have written the following code based on the tutorials available:

```
import orange,orngTest,orngStat,orngTree,Orange
bayes = orange.BayesLearner()
tree=orngTree.TreeLearner(mForPruning=2)
bayes.name="bayes"
tree.name="tree"
data = Orange.data.Table("iris.tab")
learners=[bayes,tree]
results=orngTest.crossValidation(learners,data,folds=10)
print "Learner    CA    IS    Brier    AUC"
for i in range(len(learners)):
    print "%-8s    %5.3f    %5.3f    %5.3f    %5.3f" %\
    (learners[i].name,\
    orngStat.CA(results)[i],\
    orngStat.IS(results)[i],\
    orngStat.BrierScore(results)[i],\
    orngStat.AUC(results)[i]) 
```

This results in the following print:

```
Running script:
Learner      CA        IS     Brier    AUC  
bayes       0.920    1.402    0.098    0.993  
tree        0.940    1.447    0.120    0.967 
```

Based on the following description of [Information Score](http://link.springer.com/article/10.1007/BF00153760)

> Let the correct class of an instance be C. Recall that P(C) is the prior probability of class C and P'(C) is the posterior probability returned by the classifier. We consider two cases: (a) P'(C) > P(C) Here the probability of class C has changed in the right direction, therefore we will call such an answer useful. It should be awarded a positive score. Co) P'(C) < P(C) Here the probability of class C has changed in the wrong direction, therefore we will call such an answer misleading. It should be assigned a negative score.

Following:

```
Suppose the classifier in 1950 answered:   
P'(Bush) = 0.45   
P'(Dukakis) = 0.55   
P'(all others) = 0 
```

Is a value greater than 1.0 invalid for information score? Or is it the case that I have used the incorrect classifier on this type of data set, there are three distinct categories of data in the `iris.tab` data set.

# .net - 复制到另一台机器时无法在 WcfTestClient 中添加服务

> ID：15325867
> 
> 赞同：16
> 
> 时间：2013-03-10T18:26:03.847
> 
> 标签：.net, wcf, visual-studio-2012, exception-handling, wcftestclient

我想在另一台机器上运行 WcfTestClient（包含在 VS2012 中）而不安装 VS2012。这可能吗？在我安装了 .NET 4.5 的机器上，但是当我尝试添加 Web 服务时，它给了我以下堆栈跟踪：

```
************** Exception Text **************
System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.Tools.Common.SdkPathUtility.GetRegistryValue(String registryPath, String registryValueName)
   at Microsoft.Tools.Common.SdkPathUtility.GetSdkPath(Version targetFrameworkVersion)
   at Microsoft.Tools.TestClient.ToolingEnvironment.get_MetadataTool()
   at Microsoft.Tools.TestClient.ServiceAnalyzer.GenerateProxyAndConfig(String projectPath, String address, String configPath, String proxyPath, Int32 startProgressPosition, Int32 endProgressPostition, BackgroundWorker addServiceWorker, String& errorMessage)
   at Microsoft.Tools.TestClient.ServiceAnalyzer.AnalyzeService(String address, BackgroundWorker addServiceWorker, Single startProgress, Single progressRange, String& errorMessage)
   at Microsoft.Tools.TestClient.Workspace.AddServiceProject(String endpoint, BackgroundWorker addServiceWorker, Single startProgress, Single progressRange, String& error)
   at Microsoft.Tools.TestClient.AddServiceExecutor.Execute(AddServiceInputs inputs, Workspace workspace, BackgroundWorker addServiceWorker)
   at Microsoft.Tools.TestClient.UI.MainForm.addServiceWorker_DoWork(Object sender, DoWorkEventArgs e)
   at System.ComponentModel.BackgroundWorker.OnDoWork(DoWorkEventArgs e)
   at System.ComponentModel.BackgroundWorker.WorkerThreadStart(Object argument) 
```

在 WcfTestClient 文件夹中，我只有 2 个文件，是否需要包含其他文件？WcfTestClient.exe WcfTestClient.exe.config

两者都是直接从 VS2012 IDE 文件夹中复制的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-02T20:18:37.967

WCFTestClient 必须在安装了 SDK 的计算机上运行。它不仅在注册表中查找 SDK 的位置，而且还从 SDK 运行 svcutil 以生成代理类以在运行时连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-08T16:37:10.963

在使用 VS2012 Pro（更新 4）在 Windows 7 上开发 .Net 4.0 WCF 服务时，我发现我需要安装 Windows 8.0 SDK，而不是人们可能假设的 Windows 7 SDK。（添加此答案以替换我之前的评论）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-05T13:51:42.883

响应有点晚，但不需要在目标计算机上安装 SDK。

您只需要复制一些文件并确保存在一个注册表项。

**从本地安装的 VS 2015 (v14.0)：**

```
C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\WcfTestClient.exe
C:\Windows\Microsoft.NET\assembly\GAC_MSIL\Microsoft.VisualStudio.VirtualTreeGrid\v4.0_14.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.VirtualTreeGrid.dll 
```

**从本地安装的 Windows SDK (v10)：**

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.6 Tools\SvcUtil.exe
C:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.6 Tools\SvcConfigEditor*.* 
```

注册表项：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Microsoft SDKs\NETFXSDK\4.6\WinSDK-NetFx40Tools-x86  (just ensure all keys exists, no content needed) 
```

此处的完整说明：[https](https://social.msdn.microsoft.com/Forums/vstudio/en-US/c3c7221c-c06f-4364-887a-fb20f22877be/wcf-test-client-problem?prof=required) ://social.msdn.microsoft.com/Forums/vstudio/en-US/c3c7221c-c06f-4364-887a-fb20f22877be/wcf-test-client-problem?prof=required （最后一个回复，作者：Jakub Bereżański)

# qt - statement cannot resolve address of overloaded function Qt/C++

> ID：15325869
> 
> 赞同：-1
> 
> 时间：2013-03-10T18:26:07.407
> 
> 标签：qt, memory-address

```
void RollsRoyceTab::stateRRChanged(int)
 {
     stateRR = checkBoxRollsRoyce->checkState();
     if(stateRR) emit signal_rr_alg; else emit signal_rr_manual;
 } 
```

error in stateRR statement cannot resolve address of overloaded function

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:51:18.700

`emit`只是语法糖——它实际上并没有做任何事情，而是从 C++ 代码中预处理出来的。接下来`emit`必须是有效的函数调用，而不是信号名称。

将您的代码更改为此（假设信号没有参数）：

```
if(stateRR)
  emit signal_rr_alg();
else
  emit signal_rr_manual(); 
```

（请注意，带有布尔或枚举参数的单个信号可能会更好一些 - 取决于您将这些信号连接到什么。）

# jquery - Why would I need this variable declaration to make my code work?

> ID：15325874
> 
> 赞同：2
> 
> 时间：2013-03-10T18:26:28.027
> 
> 标签：jquery, css, modernizr

I have this piece of code and it actually works fine, yet I have a spurious line in there and it won't work without it for some reason.

It picks up the hover color from the css via jquery and animates that hover (between colors) for browsers that dont have css transitions. ( I am using modernizr to detect the feature). The problem is that if I remove the variable declaration `var ie8and9dec = quickbarcolorhover;` ( which has no other use at all, it's just there to trigger whatever makes this work ) then it will not work at all for IE8 and IE9 ... (*so probably just wont work at all as I think all the other browsers I've used don't need this code in the first place*).

Does anyone know why this would be the case? It will also work if I replace the declaration with `console.log(quickbarcolorhover);`, and that's how I discovered it. I would rather not have this spurious piece of code if I can avoid it.

```
$(function() {
    var quickbar = $(".no-csstransitions #quick-bar a");
    quickbarcolor = quickbar.css("color");

    quickbar.hover(function () {
        if ( $(this).css("color") != quickbarcolor) {
            quickbarcolorhover = $(this).css("color");
        }
        var ie8and9dec = quickbarcolorhover; /* this dec has no purpose but code wont work without it */
        $(this).children().css("color", quickbarcolor).animate({ color: quickbarcolorhover } ,400 );
    }, function() {
        $(this).children().animate({ 'color': quickbarcolor} ,400 )
    }  
    );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:05:04.103

以防万一它对其他人有任何帮助，我将描述我为解决此问题所做的工作。

我正在使用 wordpress，我发现 wordpress 已经包含 jQuery UI；所以我所做的是删除我最初用于动画功能的 JqueryUI 代码的一部分（有一个插件可以使用，但我选择包含 JqueryUI 代码）所以现在我替换了这段代码排队（在我的functions.php文件中）到jqueryUI核心和JqueryUI效果核心，因此通过完全不同的（并且在wordpress术语中更好）方法包括JqueryUI。

然后我使用的代码也略有改变，但实际上我认为代码不是问题，因为它可能与我使用的 jQueryUI 代码与 wordpress 中包含的 Jquery 代码不同步有关。

```
$(function() {
    var quickbar = $(".no-csstransitions #quick-bar a");
    var quickbarcolor = quickbar.css("color");

    quickbar.hover(function () {
            if ( $(this).css("color") != quickbarcolor) quickbarcolorhover = $(this).css("color");
            $(this).find("*").css("color", quickbarcolor).animate({ color: quickbarcolorhover } , 400 );
        }, function() {
            $(this).find("*").animate({ 'color': quickbarcolor} ,400 )
        }
    );
}); 
```

# symfony - Symfony Unit testing: How to simulate a Http-PUT with a json body?

> ID：15325876
> 
> 赞同：5
> 
> 时间：2013-03-10T18:26:59.597
> 
> 标签：symfony, phpunit, silex

I use the client-Object to simulate and test my Silex-Webservices. How can I send a JSON-Body with the PUT-method?

My idea was:

```
$crawler = $this->client->request('PUT', '/test', array(), array(), array(), '{"id":"34"}'); 
```

That does not work. :(

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T02:38:36.990

请尝试使用此代码：

```
$client->request(
    'PUT', '/test', array(), array(),
    array(
        'CONTENT_TYPE' => 'application/json',
        'HTTP_X-Requested-With' => 'XMLHttpRequest'
    ),
    '{"id":"34"}'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:33:59.743

谢谢 Dimitry，不完全是我想要的，而是找到解决方案的一个很好的提示：

```
$client->request(
    'PUT', '/test', array(), array(),
    array(
        'CONTENT_TYPE' => 'application/json',
        'HTTP_X-Requested-With' => 'XMLHttpRequest'
    ),
   '{"id":"34"}'
); 
```

您的解决方案有一个空数组，其想法是将 JSON 作为字符串传递！

非常感谢！干杯

# prolog - Remove of the occurences of an element in a list containing lists in prolog

> ID：15325878
> 
> 赞同：1
> 
> 时间：2013-03-10T18:27:10.653
> 
> 标签：prolog

I've been working with this for a while. I came to a solution for a typical prolog exercice, to remove all the ocurrences of an element in a list... But I've been trying to figure out how to remove them if there are lists inside the list.

This is the furthes I've come with:

```
delete(X, Y, Lres) :- 
delete(X, Y, [], Lres).

delete([], Y, Ac, Lres):-
Lres = Ac.

delete([H|T], Y, Ac, Lres):-
is_list(H),
delete(H, Y, Ac, Lres),
delete(T, Y, Lres, Lres).

delete([H|T], Y, Ac, Lres):-
H = Y,
delete(T, Y, Ac, Lres).

delete([H|T], Y, Ac, Lres):-
delete(T, Y, [H|Ac], Lres). 
```

Doing this call:

```
[trace] 23 ?- delete([1, 2, [3, 1,3], 4, 5, 3], 2, LRes). 
```

It fails with this:

```
Call: (13) delete([], 2, [3, 5, 4, 3, 1, 3, 1], [3, 1, 3, 1]) ? creep
Call: (14) [3, 1, 3, 1]=[3, 5, 4, 3, 1, 3, 1] ? creep
Fail: (14) [3, 1, 3, 1]=[3, 5, 4, 3, 1, 3, 1] ? 
```

If there a way to change the value of a variable in prolog?

I explain myself:

When I wrote this:

```
delete([], Y, Ac, Lres):-
Lres = Ac. 
```

I thought that the value of Lres would be replaced by Ac, but indeed it is comparing Lres with Ac which is false, but I don't get why it does work when Lres is empty. From the same call here is the trace for that case:

```
Call: (13) delete([], 2, [3, 1, 3, 1], _G1276) ? creep
Call: (14) _G1276=[3, 1, 3, 1] ? creep
Exit: (14) [3, 1, 3, 1]=[3, 1, 3, 1] ? creep 
```

I've been thinking a while in this and I don't see any other way to do this!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:15:38.760

我认为你做的比需要的更复杂：你为什么要引入一个额外的论点？普通匹配似乎导致了一个简单的解决方案：

```
delete([], _, []).
delete([E|Es], E, Rs) :-
    !, delete(Es, E, Rs).
delete([L|Es], E, [D|Rs]) :-
    is_list(L),
    !, delete(L, E, D),
    delete(Es, E, Rs).
delete([N|Es], E, [N|Rs]) :-
    delete(Es, E, Rs). 
```

这会产生

```
?- delete([1, 2, [3, 1, 2, 3], 4, 5, 3], 2, LRes).
LRes = [1, [3, 1, 3], 4, 5, 3]. 
```

# php - generating POST request, curl_setopt, http_build_query: a data loss

> ID：15325881
> 
> 赞同：0
> 
> 时间：2013-03-10T18:27:25.520
> 
> 标签：php

Im generating a POST request:

```
$data['v'] = '2';
$data['file'] = gz compressed data

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($data));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$content = curl_exec($ch); 
```

After this, the "file" field gets lost - it wont arrive to the server, all others do. What can I do?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:54:51.580

上传文件时，需要文件`curl`的完整路径（不要忘记在前面加上“@”符号），而不是二进制数据：

```
$data = array(
    'file' => "@/path/to_your_file_not_binary_data",
    'v' => '2'
);

curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
```

见这里：[http ://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

此外，如果您需要指定`Content-Type`标题：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: multipart/form-data')); 
```

# android - Using Activity class static members in a background service

> ID：15325882
> 
> 赞同：0
> 
> 时间：2013-03-10T18:27:26.750
> 
> 标签：android, service, android-context

My app has an Activity class called MainActivity and one of its members is

```
public static SharedPreferences prefsdefault; 
```

My app has also a service (in another process) which runs in background. Inside the service I wrote

```
MainActivity.prefsdefault.getString(Key,"Hello"); 
```

The app sometimes throws null pointer exception at this line. Why? Does it mean that this member is cleaned up by the garbage collector when I close the activity and I cannot access it at anytime (when my service runs)? So what is the perfect solution for this?

Should I pass the MainActiviy.class to the service? It also happens when I implement a thread that requires a context.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:34:14.353

这是因为，即使您的 prefsdefault 可能已经初始化一次，您的整个应用程序也可能被垃圾收集并再次重新启动。

在这种情况下，您的服务会发现该字段为空。在活动中使用静态字段是错误的，原因有很多，最重要的是您的应用程序可能会被操作系统杀死并重新启动，然后所有静态字段都会再次被清除。

使用共享首选项的正确方法是在需要访问/写入时使用 getSharedPreferences 访问它们。

另一个奇怪的事情是你说服务在另一个进程中运行。在这种情况下，它不应该能够访问来自另一个进程的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:29:35.103

因为`prefsdefault`是`NULL`。我没有看到它已初始化。你可以这样做

```
prefsdefault = getSharedPreferences("my_preferences", Activity.MODE_PRIVATE); 
```

**热点提示：永远不要让你的`SharedPreference`实例*static*。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:29:39.930

这样做的原因`SharedPreferences`是没有初始化你不需要这样做，因为`SharedPreferences`如果 MODE 是私有的，在应用程序中全局可用，只需在服务中创建新实例，它就会工作

# objective-c - Issue Connecting with GCDAsyncSocket with OSX executable

> ID：15325886
> 
> 赞同：2
> 
> 时间：2013-03-10T18:27:59.810
> 
> 标签：objective-c, macos, cocoaasyncsocket, gcdasyncsocket

I have the excellent GCDAsyncSocket running perfectly on an iOS app I have developed.

I was just playing around with setting up a Mac OSX command line program that uses the library in a similar way to log to SQLite DB but can't get it to even attempt to connect to host. No errors get generated. The program doesn't crash or anything so don't have an idea about why it's not working. Does anyone have an idea why this won't work?

The console only prints out the following (with no connect/disconnect/read/write logging i.e. the socket delegate methods are not being called):

```
Attempting to connect to host: 192.168.1.2 on port: 1234 to refresh 
```

Here is quite a bit of the code I am using:

*main.m*

```
#import <Foundation/Foundation.h>
#import "LoggerClass.h"

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        LoggerClass *logger = [[LoggerClass alloc] init];
        [logger startLogging];
        while (logger.status == 0) {
            sleep(1);
            continue;
        }
        return 0;
    }
} 
```

*LoggerClass.h*

```
#import <Foundation/Foundation.h>
#import "Device.h"

@interface LoggerClass : NSObject <DeviceProtocol>

@property (nonatomic, strong) FMDatabase *database;
@property (nonatomic, strong) NSArray *devices;
@property (nonatomic) int status;
- (void)startLogging;

@end 
```

*LoggerClass.m*

```
#import "LoggerClass.h"
#import "FMDatabase.h"

#define kLoggingInProgress 0
#define kLoggingCompleted 1

@implementation LoggerClass

@synthesize database = _database;
@synthesize devices = _devices;
@synthesize status = _status;

- (id)init {
    if (self = [super init]) {
        self.status = kLoggingInProgress;

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *docsPath = [paths objectAtIndex:0];
        NSString *path = [docsPath stringByAppendingPathComponent:@"database.sqlite"];  
        self.database = [FMDatabase databaseWithPath:path];

        Device *d1 = [Device deviceWithName:@"Device 1" address:@"192.168.1.2" delegate:self];      
        self.devices = [NSArray arrayWithObjects:d1, nil];
    }   
    return self;
}

- (void)startLogging {
    for (Device *d in self.devices) {
        [d refresh];
    }
}

- (void)didUpdateDevice:(Device *)device {

    // Insert DB entry code

    NSLog(@"%@ has finished Logging", device.name);
    self.status = kLoggingCompleted; // This would obviously register completed if only 1 device returned but for sake of this test that fine
}

@end 
```

*Device.h*

```
#import <Foundation/Foundation.h>
#import "GCDAsyncSocket.h"

@protocol DeviceProtocol;

@interface Device : NSObject

@property (nonatomic, weak) id<DeviceProtocol> delegate;
@property (nonatomic, strong) NSString *name;
@property (nonatomic, strong) NSString *address;
@property (nonatomic, strong) GCDAsyncSocket *socket;

+ (Device *)deviceWithName:(NSString *)n address:(NSString *)a delegate:(id<DeviceProtocol>)d;
- (void)refresh;

@end

@protocol DeviceProtocol <NSObject>
@required
- (void)didUpdateDevice:(Device *)device;
@end 
```

*Device.m*

```
#import "Device.h"

#define DEVICE_PORT 1234

@implementation Device

@synthesize delegate = _delegate;
@synthesize name = _name;
@synthesize address = _address;
@synthesize socket = _socket;

- (id)initWithName:(NSString *)name andAddress:(NSString *)address andDelegate:(id<DeviceProtocol>)delegate { // Designated Initialiser
    if (self = [super init]) {

        self.socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];

        self.name = name;
        self.address = address;
        self.delegate = delegate;
    }
    return self;
}

+ (Device *)deviceWithName:(NSString *)n address:(NSString *)a delegate:(id<DeviceProtocol>)d {
    return [[Device alloc] initWithName:n andAddress:a andDelegate:d];
}

#pragma mark - GCD Async Socket Delegate Methods

- (void)socket:(GCDAsyncSocket *)sender didConnectToHost:(NSString *)host port:(UInt16)port {
    NSLog(@"Connected to: %@", self.address);
}

- (void)socketDidDisconnect:(GCDAsyncSocket *)sock withError:(NSError *)error {
    NSLog(@"Socket for %@ disconnected %@.", self.address, error);

    if (self.delegate) [self.delegate didUpdateDevice:self];
}

- (void)socket:(GCDAsyncSocket *)sock didWriteDataWithTag:(long)tag {
    NSLog(@"socket:didWriteDataWithTag:");
}

- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag {
    NSLog(@"socket:didReadData:withTag:");

    [self.socket disconnect];   
}

- (void)refresh {
    if ([self.address length] == 0) { [self.delegate didUpdateDevice:self]; return; }

    NSLog(@"Attempting to connect to host: %@ on port: %i to refresh", self.address, DEVICE_PORT);
    NSError *error = nil;
    if (![self.socket connectToHost:self.address onPort:DEVICE_PORT withTimeout:15 error:&error]) NSLog(@"ERROR: %@", error);

    NSData *dataToSend;
    // Build byte data here to send to device (exact same data works on iOS)

    [self.socket writeData:dataToSend withTimeout:10 tag:0];
    [self.socket readDataWithTimeout:-1 tag:0];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:41:48.780

我刚刚重新阅读了您的评论并意识到您的 main() 是什么样子。我认为这就是你的问题所在。回调可能位于主调度队列中，但它永远没有机会执行它们。在 Cocoa 应用程序中，主队列通常作为主运行循环的一部分运行，但您不会启动运行循环。

请参阅 dispatch_get_main_queue()[文档](http://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079-CH2-SW11)。

我认为最简单的初始修复是用这个替换你的旋转循环：

```
dispatch_main(); 
```

# linux - 在嵌入式 Linux 系统上使用 tmpfs

> ID：15325887
> 
> 赞同：1
> 
> 时间：2013-03-10T18:28:00.380
> 
> 标签：linux, filesystems

我将很快推出一个新的嵌入式 Linux 系统，内核版本 3.2。当我们进行软件映像更新时，主根文件系统需要是可写的，并且我们确实希望保留 /var/log 下的日志以在重新启动后进行分析。

我见过使用的一种技术是将 /tmp 挂载为 tmpfs，这是有道理的，因为我们不需要 /tmp 中的任何内容在重新启动后进行维护。Linux 系统中的哪些其他目录会经历大量写入，但不需要在重新启动后维护？到目前为止，我已经看到：

```
/tmp
/var/运行

```

任何人都可以为 tmpfs 推荐任何其他候选人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:20:12.413

是的，

```
/tmp
/var/run 
```

和

```
/var/tmp 
```

也。是的，`/var/tmp`假设在系统重新启动之间保留临时文件，但实际上，我`/var/tmp/`的总是空的。把它放在 tmpfs 中不会有什么坏处——我已经这样做了 10 多年，到目前为止一切都很好。

另外，我总是放入`/run/lock`tmpfs，到目前为止也很好。如果你有`udev`那么它会穿上`/dev`。`devtmpfs`还有我的系统，自动把`/run`和`/run/shm`在tmpfs。根据您的系统，您也可以考虑这样做。

高温高压

# windows - 如何在 Windows 的沙箱中运行不受信任的代码？

> ID：15325888
> 
> 赞同：3
> 
> 时间：2013-03-10T18:28:04.020
> 
> 标签：windows, sandbox

是否有办法在 Windows 的沙箱下运行不受信任的代码（C 或 C++）。会阻止程序打开文件、网络连接或分叉、执行等的东西？

这将是一个小程序，它被上传到服务器，在那里它会被编译和执行，这个程序的生命周期很短。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-01-27T20:36:03.937

我意识到这个问题是一个老问题，但它从来没有真正得到完整的答案。当被问到这个问题时，Windows 没有那么多可用的隔离选项。不过也有一些改善。

现在解决这个问题的方法是使用[Docker 或 Hyper V 容器](https://docs.microsoft.com/en-us/virtualization/windowscontainers/manage-containers/hyperv-container#process-isolation)/VM。

但在 Windows 10 之前的时代，答案是操纵 Windows vista/7 周围的进程隔离并使用单独的用户/应用程序帐户。

处理能力：

您可以操纵程序[集成级别](https://docs.microsoft.com/en-us/windows/win32/secauthz/mandatory-integrity-control#integrity-labels)并与受限/唯一用户一起运行，因此范围有限（组策略可以进一步限制用户）。

网络访问：

*   限制使用阻止[出站连接](https://fossbytes.com/block-program-from-accessing-internet-windows/)的防火墙。

文件访问：

NTFS 文件系统拥有最可配置的文件系统之一，如果您以不同的用户身份运行进程，则可以制定 ACL 策略来显着限制进程的文件访问。

资源：

最后，如果您可以访问源代码，您可能会删除或修改问题部分。

# ios - 刷新 UIPageViewController - 重新排序页面并添加新页面

> ID：15325891
> 
> 赞同：42
> 
> 时间：2013-03-10T18:28:19.193
> 
> 标签：ios, iphone, cocoa-touch, uikit, uipageviewcontroller

我有一个`UIPageViewController`我正在提供页面数据以使用`UIPageControllerDelegate`and的实现`UIPageControllerDataSource`。

一切正常，但我希望能够将项目添加到页面数据并重新排序页面数据。

如果用户已经到达最后一页，然后我添加了一个项目，他们就无法到达下一页，因为`viewControllerAfterViewController:`已经被调用了。如果他们向后滚动一个然后向前滚动两个，他们可以很好地进入新页面，因此数据设置正确。我怎么能告诉它`UIPageViewController`刷新它的商店接下来会发生什么？

同样，我想重新排序支持页面视图的集合。但是如果我这样做，我会遇到同样的问题——页面视图会认为下一页仍然是上次加载当前页面时的状态。

我想我正在寻找类似于`reloadData:`on的东西`UITableView`。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2014-02-07T09:42:18.160

我找到了一种解决方法，可以强制`UIPageViewController`忘记当前未显示的相邻页面的缓存视图控制器：

```
pageViewController.dataSource = nil;
pageViewController.dataSource = self; 
```

每次更改页面集时，我都会这样做。当然这不会影响当前显示的页面。

通过这种解决方法，我避免了缓存错误，并且仍然可以`animated:YES`在`setViewControllers:direction:animated:completion:`.

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-10T18:31:23.413

你需要打电话`setViewControllers:direction:animated:completion:`。

此外，在 iOS 6 中，请注意您是否使用 UIPageViewControllerTransitionStyleScroll 样式，因为如果`animated:`为“是”，则会出现一个主要的缓存错误（请参阅我的讨论：[UIPageViewController navigates to wrong page with Scroll tr​​ansition style](https://stackoverflow.com/questions/12939280/uipageviewcontroller-navigates-to-wrong-page-with-scroll-transition-style/12939384#12939384)）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-04T20:57:10.967

这是我在 Swift 2 中的 didFinish 委托方法中对@ortwin-gentz 答案的完整实现，它对我来说非常有效：

```
func pageViewController(
    pageViewController: UIPageViewController,
    didFinishAnimating finished: Bool,
    previousViewControllers: [UIViewController],
    transitionCompleted completed: Bool
) {
    if !completed { return }
    dispatch_async(dispatch_get_main_queue()) {
        pageViewController.dataSource = nil
        pageViewController.dataSource = self
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-06T06:04:54.670

Swift 4 版本，用于将 pageviewcontroller 的数据重新加载到 @theory 的版本。

```
func pageViewController(_ pageViewController: UIPageViewController, didFinishAnimating finished: Bool, previousViewControllers: [UIViewController], transitionCompleted completed: Bool) {
    if !completed { return }
    DispatchQueue.main.async() {
        self.dataSource = nil
        self.dataSource = self
    }
} 
```

# gcc - 在云端访问 GCC 进行编译

> ID：15325894
> 
> 赞同：1
> 
> 时间：2013-03-10T18:28:28.597
> 
> 标签：gcc, azure, virtual-machine, compiler-as-a-service

我们正在构建一个云服务来提供“编译即服务”。我们在 Azure 上有一个 Ubuntu 12.04 VM。我们也设法在虚拟机上安装了 GCC。现在我们正在 Visual Studio 上构建前端。我们有一个文本框来保存代码。但是我们无法弄清楚如何使用 GCC 来处理代码？

目前我们正在使用这样的东西；

```
 string log = @"C:\log.c";
        using (FileStream fs = new FileStream(log, FileMode.Create))
        {
            using (StreamWriter sw = new StreamWriter(fs))
            {
                sw.Write(TextBox1.Text);
                sw.Close();
            }
        }
        string szMgwGCCPath = "/usr/bin/gcc"; // Example of location
        string szArguments = " -c log.c -o log.exe"; // Example of arguments
        ProcessStartInfo gccStartInfo = new ProcessStartInfo(szMgwGCCPath, szArguments);
        gccStartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        Process.Start(gccStartInfo); 
```

我不确定它的哪些部分是正确的。由于我们无法测试它，因为编译器存储在 clod 上。

字符串 szMgwGCCPath = "/usr/bin/gcc"; // 位置示例

我们如何给出位置？我们是否使用 blob 存储 URL？怎么做？

之后我们如何处理文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:49:14.897

您上面的情况尚不清楚。

在我们继续之前，您上面的代码是用 C# 编写的。根据[.NET Framework 设计指南](http://msdn.microsoft.com/en-us/library/vstudio/ms229045%28v=vs.100%29.aspx)，**请不要使用匈牙利符号 **这在 .NET 中是不必要的，而且在很大程度上没有意义（例如 sz == '字符串以零结尾'不是字符串在 CLR 中的表示方式！） .

回到您的代码和场景：

您的“前端”代码在哪里运行？WinForms/WPF 客户端应用程序？在 ASP.NET 网站中？

如果您的客户端在 ASP.NET 中运行，您是否使用 Mono 在 Linux VM 中托管 ASP.NET 网站（如果是，请更新您问题的标签以包括 Mono 和 Linux）？如果您在 Linux 上运行 Mono，那么您为什么要尝试生成“.exe”？“.exe”文件是 Windows 可执行文件 - Linux 可执行文件通常没有“.exe”扩展名。如果您的客户端在 Linux 上运行，您为什么要使用 MinGW？这用于在 Windows 上运行 GNU 代码！

坦率地说，我认为您需要重新考虑您要达到的目标，或者更清楚地重新陈述您的方案和问题。

# java - PreparedStatement 抛出 .NullPointerException

> ID：15325899
> 
> 赞同：1
> 
> 时间：2013-03-10T18:29:04.443
> 
> 标签：java, jdbc

```
public class MyBean {

    private Connection con;

    Set combinations;
    public MyBean()
    {

        try
        {
            Class.forName("oracle.jdbc.OracleDriver");
            con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl","scott","tiger");
            con.setAutoCommit(true);

        }
        catch( ClassNotFoundException cfe )
        {
            cfe.printStackTrace();
        }
        catch( SQLException se )
        {
            se.printStackTrace();
        }

    }

      public boolean CustRegistration( String name,String username, String pwd, String  address, String city,String state,long phoneno)
     {
         try
          {
       PreparedStatement st = con.prepareStatement("insert into custreg values(?,?,?,?,?,?,?)");
                 st.setString(1,name);
             st.setString(2,username);
             st.setString(3,password );
             st.setString( 4,address);
             st.setString(5,city);
             st.setString(6,state);
             st.setLong(7 ,phoneno);
             int i = st.executeUpdate();

             if( i > 0 )
                 return true;

         }
         catch( SQLException sety )
         {
             sety.printStackTrace();
         }
         return false;       
     }
public boolean check_Customer( String username,String password )
{
    try
    {
    PreparedStatement st;   
    st = con.prepareStatement( "select * from custreg where username=? and password=?" );

        st.setString(1,username);

        st.setString(2,password );

        ResultSet rs = st.executeQuery();

        if( rs.next() )
        {
            st.close(); 
            return true;        
        }

        st.close();
    }
    catch( SQLException sert )
    {
        sert.printStackTrace();
    }

    return false;
} 
```

///////////////////////////////////////
每当我尝试与数据库连接它会抛出 NULL POINTER EXCEPTION 堆栈跟踪是：

```
java.lang.NullPointerException
    Bean.MyBean.check_Customer(MyBean.java:35)// line 35 is prepared statement which uses connection             
 Servlets.LoginSubmit.doPost(LoginSubmit.java:63)//the code here is 
if( mybean.check_Customer( user,pass ) ) 
```

javax.servlet.http.HttpServlet.service(HttpServlet.java:647) javax.servlet.http.HttpServlet.service(HttpServlet.java:728) org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.爪哇：393）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:37:41.430

很可能您的`DB is DOWN`so`con`为空，因为它无法建立连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:35:45.297

我假设堆栈跟踪中的 check_Customer 实际上是 CustRegistration 方法。在这种情况下，这意味着未设置 con 字段（它为空）。

在构造函数中，您正在捕获异常，然后打印它们。我认为你有这些例外之一。也许您的类路径中没有 oracle 驱动程序？

# wolfram-mathematica - 如何在 Mathematica 中输出自定义多边形坐标？

> ID：15325900
> 
> 赞同：1
> 
> 时间：2013-03-10T18:29:13.053
> 
> 标签：wolfram-mathematica, polygon, output

我正在尝试进行嵌套操作或仅使用两个窗口进行操作：我需要一个窗口，其功能如下：

```
Manipulate[Graphics[Polygon[pt], 
  PlotRange -> 2], {{pt, {{0, 0}, {1, 0}, {1, 1}, {0, 1}, {1, -1}}}, 
  Locator, LocatorAutoCreate -> True}] 
```

但将其坐标输出到另一个窗口，该窗口使用这些坐标绘制指定的图形。我不确定 Manipulate 是否是最好的选择，但基本上我正在尝试制作一个可视界面，用户可以在其中指定多边形，然后程序使用这些坐标的信息来绘制指定的 3D 图。

我想如果我知道如何从操纵中输出坐标或如何制作一些东西，我可以弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:57:32.437

例如：

```
GraphicsRow[{
 Manipulate[
   Graphics[Polygon[rs = pt], PlotRange -> 2], 
   {{pt, {{0, 0}, {1, 0}, {1, 1}, {0, 1}, {1, -1}}},
     Locator, LocatorAutoCreate -> True}],
  Dynamic@
   ParametricPlot3D[Through[(Interpolation /@ 
        First@(Transpose /@ {Append[#, 0] & /@ rs}))[t]], {t, 1, Length@rs}, 
        PlotRange -> 2]}] 
```

![数学图形](../Images/10b4be83012c27f9acd53a9d6cfbd434.png)

# php - 数组回声内的串联

> ID：15325901
> 
> 赞同：0
> 
> 时间：2013-03-10T18:29:14.813
> 
> 标签：php, arrays

很简单，但是这个回声没有返回任何东西。我想从包含的 PHP 数组文件中连接 2 个值，因此我不必编写两次代码。我写错了什么？

```
<?php echo $lang['work' . 'title']; ?> 
```

在我尝试过的其他人中

```
<?php echo $lang['work', 'title']; ?>
<?php echo $lang['work' 'title']; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:31:31.910

```
<?php echo $lang['work'], $lang['title']; ?> 
```

查看[php 数组](http://php.net/manual/en/language.types.array.php)文档。

# windows - visualstudio windows窗体设计器文件不更新windows7

> ID：15325912
> 
> 赞同：1
> 
> 时间：2013-03-10T18:29:56.140
> 
> 标签：windows, forms, visual-studio, windows-7, designer

我正在尝试在 VisualStudio 2010 中构建 Windows 窗体

我正在使用一些 DevExpress 组件。我有一些内部定制的组件。（我是 VisualStudio 的新手）我从一个 Windows 窗体开始，转换为 DevExpress Xtra 窗体我添加了一个 DateEdit 组件、一个 SimpleButton、一个 gridview

一段时间后 X.Designer.cs 不再改变！

* 不再出现在文件旁边，表示它已更改。

因此，当构建发生时，新添加的组件就会丢失。

有人建议我的 VisualStudio 安装已损坏，我应该重新安装

我很茫然。有 0 个错误。0 个警告。0 条消息。为什么会发生这种情况？它使开发变得不可能。

我已经看到一些建议，删除 X.Designer.cs 可能会有所帮助，但这只会清空表单的所有内容！

问候，

# c++ - 用默认值标记网格 C++

> ID：15325913
> 
> 赞同：0
> 
> 时间：2013-03-10T18:29:56.807
> 
> 标签：c++, grid

我正在尝试遍历 C++ 中的网格并将每个坐标标记为假。我以为我所做的是创建一个 25x25 网格，但 VC++ 给了我两个错误：

```
(37)"error C2064: term does not evaluate to a function taking 0 arguments"

(44)"error C2448: 'markAllIncluded' : function-style initializer appears to be a function definition" 
```

我正在为我的一些头文件使用 stanford c++ lib。

这是我的代码：

```
#include <iostream>
#include "console.h"
#include "maze.h"
#include "gwindow.h"
#include "grid.h"
#include "queue.h"
#include "random.h"
#include "simpio.h"
#include "stack.h"
#include "vector.h"
#include <array>

using namespace std;
//prototypes

const int numCols = 25;
const int numRows = 25;

Vector<int> rand_coords();
Grid<bool> markAllIncluded(numCols, numRows);

int main() {

    Vector <int> coords = rand_coords(); //get random coords
    cout << "(" << coords[0] << ", " << coords[1] << ")" << endl;

    Grid<bool> included = markAllIncluded();
    string x = included.toString();
    cout << x;

    return 0;
}

Grid<bool> markAllIncluded() {

    Grid<bool> m(numRows, numCols); 

    for (int i=0; i <= numRows; i++) {
        for (int j = 0; j <= numCols; j++) {
            m.set(i, j, false);
        }
    }

    return m;

}

Vector<int> rand_coords () {

    Vector<int> coords(2);

    coords[0] = randomInteger(0, numCols);
    coords[1] = randomInteger(0, numRows);

    //cout << "(" << coords[0] << ", " << coords[1] << ")" << endl;

    return coords;

} 
```

我的语法错了吗？当我将包含设置为 markAllIncluded()l 时，我在 main() 中出现错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:48:13.633

是的，你的语法是错误的。函数声明

```
Grid<bool> markAllIncluded(numCols, numRows); 
```

是不正确的。你应该使用

```
Grid<bool> markAllIncluded(); 
```

（因为`numRows`和`numCols`是全局`const`s），或

```
Grid<bool> markAllIncluded(int numCols, int numRows); 
```

稍后的定义也是如此。

# bash - Bash - 启动脚本再次运行？

> ID：15325916
> 
> 赞同：1
> 
> 时间：2013-03-10T18:30:10.630
> 
> 标签：bash, truecrypt

我正在尝试学习一些脚本。我有一个场景，我丢失了我的 truecrypt 密码。我运行下面的脚本。

```
#!/bin/sh
DIRECTORY=/media/truecrypt1
for i in 1 2 password
do
   clear
   echo "Trying $i as a password"
   truecrypt -k "" --protect-hidden=no ITSTUDY $DIRECTORY -p $i
   if [[ -d "${DIRECTORY}" && ! -L "${DIRECTORY}" ]] ; then
       echo "It Worked!"
   fi
done 
```

但是，如果密码错误，我会得到

```
Trying 1 as a password
Incorrect password or not a TrueCrypt volume.
Enter password for /mnt/ITSTUDY: 
```

让脚本再次开始运行的唯一方法是 ctrl+c。如果我在每次失败后按 ctrl+c 最终脚本会得到正确的密码。但是，如果我有 1000 个可能的密码，那不是一个选项。

如何让脚本查找输出

**密码不正确或不是 TrueCrypt 卷。**

然后发送一个 ctrl+c? 还是退出？到目前为止，我尝试的所有操作都不会在 truecrypt -k 行下方进行，直到我执行 ctrl+c。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:03:59.980

Truecrypt 正在进入交互模式，在循环的每次迭代中询问您的密码，这将阻止输入，因此循环不会继续。

添加`--non-interactive`标志应该可以解决这个问题。

# ruby - Module#Refine 和 Module#used - 无法理解它们在 Ruby 中的用途

> ID：15325917
> 
> 赞同：1
> 
> 时间：2013-03-10T18:30:16.880
> 
> 标签：ruby

谁能在这里帮助我了解以下两种方法如何与一些示例一起使用？

> *   *模块#细化*
> *   *模块#used*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:43:36.273

关于“refine”，它是名为[Refinements](https://bugs.ruby-lang.org/projects/ruby-trunk/wiki/RefinementsSpec)的“实验性”功能的一部分。细化不是 Ruby 2.0 核心规范的一部分，因为它们的价值和后果仍在各种 Ruby 实现者之间进行讨论（请记住，Ruby 不仅仅是它的核心实现，“MRI”——JRuby、Rubinius 等）。

改进（如果它们有一天在规范中出现）将允许某种“本地猴子修补”，允许仅在给定模块的范围内修补现有类。如果您对围绕它们的某些部分的讨论感兴趣，您应该查看有关它的 Charles Olivier Nutter[文章](http://blog.headius.com/2012/11/refining-ruby.html)（他是 JRuby 的主要实现者）或Yehuda Katz的[这篇文章。](http://yehudakatz.com/2010/11/30/ruby-2-0-refinements-in-practice/)

关于“使用”，根据来源，它并没有做太多：

```
static VALUE
rb_obj_dummy(void)
{
    return Qnil;
} 
```

经过一些研究和“[求助](https://twitter.com/headius/status/311887701005701120)”，这里是 Charles Olivier Nutter（JRuby 主要实现者）的回答：

> 当模块出现在细化的“使用”调用中时调用#used

所以你的两个问题实际上是相关的。

# c# - 如何模拟触摸事件

> ID：15325918
> 
> 赞同：1
> 
> 时间：2013-03-10T18:30:25.290
> 
> 标签：c#, wpf, events, touch, kinect

我正在使用 Kinect 的深度传感器开发触摸应用程序。我能够获得用户放置手指的点，但我想触发相应的触摸事件。

例如，我希望能够发送`TouchDown`, `Touch Up`,`Touch Move`事件。

我看了看`TouchDevice`和`TouchPoint`课程，但我不知道该怎么做。我试图创建一个 fake`TouchPoint`并将其添加到 custom `TouchDevice`，但我不知道下一步该做什么。

我试图做 a`ReportDown`但它只会`Touch_FrameReported`以空参数触发。

所以我的问题是，如何触发触摸系统事件？这些类是否可能，或者我应该使用 Windows 消息（`WM_TOUCH`和`WM_GESTURE`）？

# c++ - 在它之后查找 Word + X 字母

> ID：15325919
> 
> 赞同：1
> 
> 时间：2013-03-10T18:30:29.063
> 
> 标签：c++, file, text, find

我想首先说我还在学习，有些人可能会认为我的代码看起来很糟糕，但它就是这样。

所以我有这个文本文件，我们可以调用 example.txt。

example.txt 中的一行可能如下所示：

```
randomstuffhereitem=1234randomstuffhere 
```

我希望我的程序接受 item= 旁边的数字，并且我已经使用以下代码对其进行了一些处理。

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

    string word;

int main()
{
    ifstream readFile("example.txt", ios::app);
    ofstream outfile("Found_Words.txt", ios::app);
    bool found = false; 

    long int price;
    cout << "Insert a number" << endl;
    cout << "number:";
    cin >> number;
    system("cls");
    outfile << "Here I start:";
    while( readFile >> word )
    {
        if(word == "item=") 
```

这是问题所在；首先，它只搜索“item=”，但要找到它，它不能包含在其他字母中。它必须是一个独立的词。

它不会找到：

```
helloitem=hello 
```

它会发现：

```
hello item= hello 
```

它必须用空格分隔，这也是一个问题。

其次，我想在 item= 旁边找到数字。就像我希望它能够找到 item=1234 一样，请注意 1234 可以是任何数字，例如 6723。

而且我不希望它找到数字后面的内容，所以当数字停止时，它不会再接收数据。像 item=1234hello 必须是 item=1234

```
 {
            cout <<"The word has been found." << endl;
            outfile << word << "/" << number;
            //outfile.close();
                if(word == "item=")
                {
        outfile << ",";
                }

        found = true;
            }
    }
    outfile << "finishes here" ;
    outfile.close();
    if( found = false){
    cout <<"Not found" << endl;
    }
    system ("pause");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:22:42.523

You can use a code like this:

```
bool get_price(std::string s, std::string & rest, int & value)
{
    int pos = 0; //To track a position inside a string
    do //loop through "item" entries in the string
    {
        pos = s.find("item", pos); //Get an index in the string where "item" is found
        if (pos == s.npos) //No "item" in string
            break;
        pos += 4; //"item" length
        while (pos < s.length() && s[pos] == ' ') ++pos; //Skip spaces between "item" and "="
        if (pos < s.length() && s[pos] == '=') //Next char is "="
        {
            ++pos; //Move forward one char, the "="
            while (pos < s.length() && s[pos] == ' ') ++pos; //Skip spaces between "=" and digits
            const char * value_place = s.c_str() + pos; //The number
            if (*value_place < '0' || *value_place > '9') continue; //we have no number after =
            value = atoi(value_place); //Convert as much digits to a number as possible
            while (pos < s.length() && s[pos] >= '0' && s[pos] <= '9') ++pos; //skip number
            rest = s.substr(pos); //Return the remainder of the string
            return true; //The string matches 
        }
    } while (1);
    return false; //We did not find a match
} 
```

Note that you should also change the way you read strings from file. You can either read to newline (std::getline) or to the end of stream, like mentioned here: [stackoverflow question](https://stackoverflow.com/questions/3203452/how-to-read-entire-stream-into-a-stdstring)

# php - WordPress：3.5+ 附加图库以发布和使用模板标签

> ID：15325920
> 
> 赞同：0
> 
> 时间：2013-03-10T18:30:32.200
> 
> 标签：php, wordpress, media, wordpress-3.5

只是想知道 WordPress 3.5+ 是否仍然附加画廊，即使它没有添加到帖子内容区域。

早期的 WordPress 将图库添加为附件，并允许通过模板标签填充，即使它没有添加到内容区域。现在使用 3.5.1 版本，我正在尝试创建一个画廊，如果我添加到帖子内容中，它会显示，但是一旦我从帖子内容中删除，画廊也会从媒体库中消失，并且没有找到附件为帖子。

只是想知道并试图了解他们如何改变媒体库和画廊。我了解他们在创建画廊 id 之前的基本知识，但现在他们只添加图像 id，因此没有更多的画廊 id。那是对的吗？

那么问题我如何使用类似`<?php echo do_shortocode('[gallery link="file"]'); ?>`或类似的模板标签添加画廊？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:47:15.203

你自己几乎已经回答了这个问题！

[检查法典](http://codex.wordpress.org/Gallery_Shortcode)的细节。

我需要使用自定义元框来执行此操作，可以在此处找到详细信息。[打开 WordPress 3.5 媒体管理器时预选图像](https://stackoverflow.com/questions/13936080/pre-select-images-when-opening-wordpress-3-5-media-manager)。

编辑：

为了其他读者的利益和澄清，需要这样的东西

```
echo do_shortcode( '[gallery ids="139,138,137,136"]' ); 
```

其中 ids 是您想要包含的附件​​ id 的逗号分隔列表。这是最简单的形式 - 检查[法典](http://codex.wordpress.org/Gallery_Shortcode)以获取更多选项。

# c++ - SIGSEGV（分段错误）C++ 指针

> ID：15325922
> 
> 赞同：1
> 
> 时间：2013-03-10T18:30:43.973
> 
> 标签：c++, pointers, segmentation-fault

好的，这是我的代码：

```
#include <iostream>
using namespace std;
class Nodo{
public:
    Nodo *siguiente,*anterior;
    string Nombre,Curso,Posicion;
    int carnet;
    Nodo(){
        siguiente=anterior=NULL;
        Nombre=Curso="";
        carnet=0;
    }
};
class ListaCircular{
public:
    Nodo *PrimerNodo,*UltimoNodo;    
    ListaCircular(){
        *PrimerNodo->siguiente=*UltimoNodo;
    }
};

int main(){
    ListaCircular *a=new ListaCircular();
    cout<<a->PrimerNodo->siguiente<<endl;
    return 0;
} 
```

当我尝试运行它时，它显示“BUILD SUCCESSFUL”但“RUN FAILED”，当我调试它时出现 SIGSEGV 消息，似乎有错误的行是：

```
*PrimerNodo->siguiente=*UltimoNodo; 
```

但是如果我再次运行程序而没有这些行：

```
ListaCircular *a=new ListaCircular();
cout<<a->PrimerNodo->siguiente<<endl; 
```

然后程序成功构建并运行。

我怎样才能使那个“cout”成功？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T18:36:59.943

在这个类的构造函数中：

```
class ListaCircular{
public:
    Nodo *PrimerNodo,*UltimoNodo;    
    ListaCircular(){
        *PrimerNodo->siguiente=*UltimoNodo;
    }
}; 
```

您正试图取消引用未初始化的指针`PrimerNodo`，这会产生**未定义的行为**。在您的情况下，它会导致*分段错误*（这实际上很好，因为否则这种错误可能很难找到）。

一种可能的解决方案是`Nodo`在构造函数的主体中创建这些类型的对象：

```
ListaCircular(){
    PrimerNodo = new Nodo();
    UltimoNodo = new Nodo();
    PrimerNodo->siguiente = UltimoNodo;
} 
```

还要注意这一行：

```
cout << a->PrimerNodo->siguiente << endl; 
```

将打印`a->PrimerNodo->siguiente`指向的内存地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:40:08.523

我对c ++还是有点陌生​​，所以可能是我错了，但不应该`Primernodo->siguiente=Ultimonodo`吗？在`ListaCircular`课堂上。。

另外，您到底想打印什么？您是要打印对象还是什么？您可能想在“Siguiente，like”`cout<<<a->PrimerNodo->siguiente->toString<< endl;`或类似内容之后添加另一个 '->'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:33:51.110

它应该是：

`PrimerNodo->siguiente=UltimoNodo`

但是，`UltimoNodo`没有初始化，所以取消引用它可能是非法的（UB）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T18:45:44.930

定义一个新的 Nodo 链接函数：-

```
void Nodo::SetSiguiente(Nodo*sig){
    siguiente=sig;
    sig->anterior=this;
} 
```

修复构造函数：-

```
ListaCircular(){
    PrimerNodo = new Nodo;
    UltimoNodo = new Nodo;

    PrimerNodo->SetSiguiente(UltimoNodo);
    UltimoNodo->SetSiguiente(PrimerNodo);
} 
```

# matlab - 检测相对于本地活动的信号跳跃

> ID：15325924
> 
> 赞同：3
> 
> 时间：2013-03-10T18:31:07.883
> 
> 标签：matlab

`for`在 Matlab 中，是否可以在不使用循环的情况下测量整个信号中信号的局部变化？即，我可以实现以下内容：

```
window_length = <something>
for n = 1:(length_of_signal - window_length/2)
    global_variance(n) = var(my_signal(1:window_length))
end 
```

以矢量化格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:44:30.710

如果您有图像处理工具箱，则可以使用[STDFILT](http://www.mathworks.com/help/images/ref/stdfilt.html)：

```
global_std = stdfilt(my_signal(:),ones(window_length,1));

% square to get the variance
global_variance = global_std.^2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:02:51.213

检查 Matlab Central 中的[“移动窗口标准差”功能](http://www.mathworks.com/matlabcentral/fileexchange/9428-moving-window-standard-deviation)。您的代码将是：

```
movingstd(my_signal, window_length, 'forward').^2 
```

还有[移动方差](http://www.mathworks.com/matlabcentral/fileexchange/8252-moving-variance)代码，但它似乎被破坏了。

这个想法是使用`filter`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T19:59:15.760

您可以创建一个 2D 数组，其中每一行都移动到上面的行，并且行数等于窗口宽度；那么计算方差是微不足道的。这不需要任何工具箱。不确定它是否比`for`循环快得多：

```
longSignal = repmat(mySignal(:), [1 window_length+1]);
longSignal = reshape(longSignal(1:((length_of_signal+1)*window_length)), [length_of_signal+1, window_length])';
global_variance = sum(longSignal.*longSignal, 2);
global_variance = global_variance(1:length_of_signal-window_length)); 
```

请注意，第二列相对于上面的列向下移动了 1 - 这意味着当我们拥有要在行中操作的数据块时，我采用转置。之后，求和运算符将对第一个维度求和，从而为您提供一个包含所需结果的行向量。但是，有一些数据包装正在进行，所以我们必须限制“好”值的数量。

我现在手边没有 matlab（我在家），所以我无法测试上述内容 - 但我认为一般的想法应该可行。它是矢量化的 - 我不能保证它很快......

# wcf - 客户端上的 wcf wshttpbinding 证书验证和检测加密。

> ID：15325928
> 
> 赞同：2
> 
> 时间：2013-03-10T18:31:24.770
> 
> 标签：wcf, encryption, certificate, wshttpbinding

我有一个 wcf 服务。服务的绑定是wsHttpBinding，安全类型是消息安全。该服务托管在 IIS 上。IIS 上的站点绑定是 http(80)。该服务还具有配置有服务行为的证书。

捆绑：

```
<wsHttpBinding>
        <binding name="maksServiceBinding" maxReceivedMessageSize="2147483647">
          <security mode ="Message">
            <message clientCredentialType="UserName" establishSecurityContext="true" />
          </security>
        </binding>
</wsHttpBinding> 
```

行为：

```
<serviceCredentials>
            <serviceCertificate findValue="xxxxName" x509FindType="FindBySubjectName" storeLocation="LocalMachine" storeName="My" />
            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="xxx.xxx.xxxServiceUsernameValidator, xxx.xxx"/>
            <!--<clientCertificate >
              <authentication certificateValidationMode="ChainTrust" revocationMode="NoCheck"/>
            </clientCertificate>-->
          </serviceCredentials> 
```

我的服务运行良好，但我有三个问题：

1）我如何强制我的客户端进行这些配置：certificateValidationMode="ChainTrust" revocationMode="NoCheck" 这些配置可以在客户端更改（例如：certificateValidationMode 可以更改为 None）但我不希望客户端更改这些配置。（评论）不起作用。

2）当certificateValidationMode为ChainTrust时，客户端需要添加证书才能使用我的服务。但是如果客户端不添加证书并将certificateValidationMode更改为None，客户端可以使用该服务。如果我找不到防止这种情况的解决方案，我将使用 X509CertificateValidator 编写自定义证书验证。因为服务消息无法加密（不安全）。

3）我用 fiddler2 观察客户端的请求和响应。我尝试了两种情况。第一的; 添加了证书，并且 certificateValidationMode 为 ChainTrust。第二; 未添加证书，并且 certificateValidationMode 为 None。这两种情况的请求和响应是相同的。问题来了。请求和响应是否加密？如果它们是加密的，那第二种情况又会如何呢？因为客户端上没有证书。证书可以存储在缓存等其他地方吗？

Fiddler2 输出：

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <s:Header>
    <a:Action s:mustUnderstand="1" u:Id="_2">http://nvi.gov.tr/adres/IMaksCrudBusinessOf_Bina/Read</a:Action>
    <a:MessageID u:Id="_3">urn:uuid:e1ef9b1b-14c4-4952-b535-ff84a11b18b4</a:MessageID>
    <a:ReplyTo u:Id="_4">
      <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
    </a:ReplyTo>
    <a:To s:mustUnderstand="1" u:Id="_5">http://umuts/MaksServices/MaksBinaIslemleri.svc</a:To>
    <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <u:Timestamp u:Id="uuid-fcbcbde5-ec92-4e46-9a7b-f541ed9e62c8-11">
        <u:Created>2013-03-10T17:54:01.744Z</u:Created>
        <u:Expires>2013-03-10T17:59:01.744Z</u:Expires>
      </u:Timestamp>
      <c:SecurityContextToken u:Id="uuid-e4d1e34d-0fe2-4a44-a5f7-b94ab0e4d33c-5" xmlns:c="http://schemas.xmlsoap.org/ws/2005/02/sc">
        <c:Identifier>urn:uuid:ced2f798-d488-405d-9e4d-a9bce5acc8f5</c:Identifier>
      </c:SecurityContextToken>
      <c:DerivedKeyToken u:Id="uuid-fcbcbde5-ec92-4e46-9a7b-f541ed9e62c8-9" xmlns:c="http://schemas.xmlsoap.org/ws/2005/02/sc">
        <o:SecurityTokenReference>
          <o:Reference ValueType="http://schemas.xmlsoap.org/ws/2005/02/sc/sct" URI="#uuid-e4d1e34d-0fe2-4a44-a5f7-b94ab0e4d33c-5"/>
        </o:SecurityTokenReference>
        <c:Offset>0</c:Offset>
        <c:Length>24</c:Length>
        <c:Nonce>vUN53uBYs3XxRkW30IRUGg==</c:Nonce>
      </c:DerivedKeyToken>
      <c:DerivedKeyToken u:Id="uuid-fcbcbde5-ec92-4e46-9a7b-f541ed9e62c8-10" xmlns:c="http://schemas.xmlsoap.org/ws/2005/02/sc">
        <o:SecurityTokenReference>
          <o:Reference ValueType="http://schemas.xmlsoap.org/ws/2005/02/sc/sct" URI="#uuid-e4d1e34d-0fe2-4a44-a5f7-b94ab0e4d33c-5"/>
        </o:SecurityTokenReference>
        <c:Nonce>cJDYx++Xl28SaS57RPr/Og==</c:Nonce>
      </c:DerivedKeyToken>
      <e:ReferenceList xmlns:e="http://www.w3.org/2001/04/xmlenc#">
        <e:DataReference URI="#_1"/>
        <e:DataReference URI="#_6"/>
      </e:ReferenceList>
      <e:EncryptedData Id="_6" Type="http://www.w3.org/2001/04/xmlenc#Element" xmlns:e="http://www.w3.org/2001/04/xmlenc#">
        <e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes256-cbc"/>
        <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
          <o:SecurityTokenReference>
            <o:Reference ValueType="http://schemas.xmlsoap.org/ws/2005/02/sc/dk" URI="#uuid-fcbcbde5-ec92-4e46-9a7b-f541ed9e62c8-10"/>
          </o:SecurityTokenReference>
        </KeyInfo>
        <e:CipherData>
          <e:CipherValue>Awdg0bBuWmrYzddiVm2TztRIvytluR/wUVfe329DiPk2kNVO1NI5RE4/Gol/3dyObGXbvBO9eFR1Y84gOAw6gwVue+BVRMqIlYxuVkSijXsWzp/Cz84nJN+paGnKtXMIlefdRC3y3G3AcN3TX8hzwoPM1BQttJ8YJQV8PK7Lbgv2YXX/9XzgIteeIgz5KzMWp+rJ0egGxdsKLkwE3jFbj+ncfiKX7qWoFhQgCz53FbNXvPMQ/QE7LBaqhEereX/U2+Dc8ku+D/eep9g5i6v9p0RPv2g5K4dT5UeLXIh5Whqh8fx9xSZY1WsV+RegePNIyXEf/meeN3FnnC8dyJENoxfKny0tWfkiXyLxtF6SHHAUh50VKPnsrdpJh+9yIfprCpLRSLqIAaRGPjiK+oZEnDSNI7q/ipFB8KHeJKi+b38VrfBC/4IqUL+BQ+AHfWyRS2yYsAXGBWsIBLzUU7AFsslpJb3Z5Q2Z7g5FpRNUKiIbvhPZ+1dLBdthYAP0JuiawX4WCq4Ew0UB6Rh6bH1OD5eqfEbetRzr4KJt/9VW585x/Opx24wAfP2ktC5Tl//Az6jz1PAOhotHDXUN6FCW5oG9ah93S2i/fHNpqeiJoVCWEOBR+v8ExJcgbC/EtH01TaoyMHS+UlpbzWZk1h5sC21rtqHVrWjy4s0ZupBiPWabfVwKzz0VJ4DCTbnnHdNcyryvAM6kS+6qOgZbf6pWDx5MqRp00l2+N3yFJWoOCjPWzCqRcL0WUHucrJhRvCzpzKy16mQuFyFrZwXJjYmSBFv41V1lP/uyV+1+WMRcAdezqDDaYOyRb15jizMXZD9YYRau89nre64UzsCDNpmt4heD+tqOIivsId4tteKg64umY3xPRRaD0beZDrfBm8SpXsgt7U1K/wd2R2Q4U0fVFKgYJPH/1W6ZgONd/skg6AZ1tRK4y2nDiQk+yV8F99j9ipk2iMgjhDxlNN20yA2Svz85i3wJqUp3Qh+Eksmre2rcuClE1GZPadAOWumJVuL8FsNjZ50jeTWwYUE3jYKxCFIs+05jeiRbBRrbhVCDSze/47to9sNNXyGrR0yxIYE5QI+fE7zbjalWXdSISD68cpuGUg+ne/+ABa3DMlxmj1DOD3DwlHpWFxWC4F2E/nQvd5cDczyru+hpEw6kObR1RhlZR8AWY1FDP7YotugGM3imPelrRR91+vYPjY74pz0XZX6KqIlUS70as8tKodrZejMxqK542pmsc1r1/NyOmr669++6EEt1U5gikO8LLuUyKw7IpI6cxqyIN1aKoMhpZktS3NS4paQdWxtJqS1mT0FgvpyxVurPliWh5nreb8/5/txrfVxvNjmbEEVDTdHIa4IzefPpX19ZQwYnWea5hGGBSS7q20VA3gXkQGmHxjyZl9Vm6xCqTXqI8HLk7+zOncUuzo8rsk6k/LoEhLKkVpSliwrMMZdOvAyY9mgpn55KWDpD4cTxli4KhosltOmZ4S+8cErMSwBUVqiB2DEMj2nPsOjM9wA1LnPsWj7yva84Fc5/zwLS+hUN40MFohtsu3+wj5eyXnoIbDmTGTLq4W/p8DFxZfgE50DLtNmy06TAz06lOzpXYViFwC/gJnhNrmn/a3l79QCIl+ldyOqbrsosSSCXqk7aLx6IvLiw5AugiH3lQXH6bjtPd3KoYXZiTbSdTNNDy+Q8d1uO8lDAsXClXdRqUuss8pPQJhVHUdvffr0AF//mpfiC1O5kSppTpJCjyhpZ7B+uHLKeehXuhvuGxyIsdb4NzPD+cjDhxwwdEFH2nUCOYLdIsqzSCluF3hovAFnCQ00wdqS2s/GTu+p+8d7VrYaau6Fv+B8/N3pBLBWIPjmEbKlmX70KaBAT2y3CEUG+nGmiqI649UXJ492A7s0bdTBVmetdTyAyvRsFucDi/ZswbTr4D4LrDNouYn+cI0cUoXOAJ5zv3xFGuYdeqsyaLIHP2y06P9RSHCACBvjZHwW3Kl4BUZOneTCAquFPgFdc8gcwXmx8uGaIgwdTx9H20FOq+VIacpr2sThZ4yxZdz6SPIejlOOyrL/oxgaqRi9Rkt+N91Z6U7/dK3Rl8SHjc0LQT3czL0MOtzwY5lq05FXhnSzpkXauQ9K8Qy83Nxfx5s8DT3tOyFOdTe308melK/3uRlvyQ5wJFqcd6u7+fQNqCsDJ3hQmHJqZCwRawJPcS1B9zlpo+9sT86Gz0HwUpSILHEHF0iBLg9X1yz6jZfeWc8qW1noFvnRI0aNkiypQSEbC/nR4AJp7KPsaD6bwK7+H3yX+p6Tqydyj4ckVQBP9jV3w0dfk5wQNaQIXyVEzr4/x9Jg4fb4CGK8gCTSFx8jPta8vjWRirf/LpYoFwF02S6llSGRJERIc/hR1FPLTn3gfx5sl5bqkpmk2U3hHSO0OR1fYU8Dcw2YJduxC3e8aHXOMVrkHx4N6hLT6a5EJy8N4W79vqo+6964ZC9nKxQk/l7UkgcEtogw5pnuZZn39elk4pAK51FsrAgnzNIpFoepOfBP3hLj3xGFSUDHmt50G+cAlxgl04Y2i/isecXDOxzMxWN7wpJjcgr25tju93Y2Bt+sR4Zs+mg4A2cSQ4LSrXrfQSPuKL0KeU60u9wJmQda/zT5NNOIVFL4fTl9yNOBugpESbTIF/ceg4KW9rOeyqJJQg16GRVLG1Xayu6GXdjSuxVfoInccNJQJZpzaeMZolYeHnQVWcP9D1QmBBuJL/OnKrsvDpZt61qn9lCXcYF+UiTl+tZOOQry9ASKnNZFHIIymUyFb26Gzgydzud5b/HCfy6T4YxKO</e:CipherValue>
        </e:CipherData>
      </e:EncryptedData>
    </o:Security>
  </s:Header>
  <s:Body u:Id="_0">
    <e:EncryptedData Id="_1" Type="http://www.w3.org/2001/04/xmlenc#Content" xmlns:e="http://www.w3.org/2001/04/xmlenc#">
      <e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes256-cbc"/>
      <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
        <o:SecurityTokenReference xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
          <o:Reference ValueType="http://schemas.xmlsoap.org/ws/2005/02/sc/dk" URI="#uuid-fcbcbde5-ec92-4e46-9a7b-f541ed9e62c8-10"/>
        </o:SecurityTokenReference>
      </KeyInfo>
      <e:CipherData>
        <e:CipherValue>xgJK91cn2sLm4FvnVJZoueexPXVExJaA/gCoBdZK2nLlBLvIFnQz/Y6okzRfh0jugF6Vrx5aj+0i3T6V6TfNnBkFuLsKnDeyL2D/cawlBqM=</e:CipherValue>
      </e:CipherData>
    </e:EncryptedData>
  </s:Body>
</s:Envelope> 
```

# jquery - 如何通过jquery控制选择/选项多个垂直滚动条的宽度

> ID：15325929
> 
> 赞同：1
> 
> 时间：2013-03-10T18:31:27.353
> 
> 标签：jquery, select, scroll, option

我想使用下面的表单布局使表单上的垂直滚动条更粗：

```
<form:select    
   id="selectedTaskKeywordsTypes" 
   name="selectedTaskKeywordsTypes" 
   path="selectedTaskKeywordsTypes" 
   multiple="true"  >
<form:options items="${optionsTaskTypeKeywords}"   />
</form:select> 
```

我意识到生成的底层 HTML5 可能需要使用 $(document).ready(function() 中的 jquery 语句进行操作。

我发现所有关于调整垂直滚动条的参考都只与浏览器窗口有关，而不是与单个选择/选项字段有关。

# compiler-construction - 编译时出现奇怪的错误

> ID：15325937
> 
> 赞同：0
> 
> 时间：2013-03-10T18:32:18.777
> 
> 标签：compiler-construction, cuda, sparse-matrix

我的 cuSparse 程序运行正常，但修改后我遇到了一堆错误：

```
/tmp/tmpxft_000014cd_00000000-14_Sample2.0.o: In function `main':
tmpxft_000014cd_00000000-3_Sample2.0.cudafe1.cpp:(.text+0xb24): undefined reference to   `cusparseCreate'
tmpxft_000014cd_00000000-3_Sample2.0.cudafe1.cpp:(.text+0xb68): undefined reference to `cusparseCreateMatDescr'
tmpxft_000014cd_00000000-3_Sample2.0.cudafe1.cpp:(.text+0xbb4): undefined reference to `cusparseSetMatType'
tmpxft_000014cd_00000000-3_Sample2.0.cudafe1.cpp:(.text+0xbc8): undefined reference to `cusparseSetMatIndexBase'
tmpxft_000014cd_00000000-3_Sample2.0.cudafe1.cpp:(.text+0xc60): undefined reference to `cusparseScsrmv_v2' 
```

这意味着什么？程序中的 main() 函数变得非常混乱。这些错误可以与它有某种联系吗？可能我应该把程序分成几个部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:36:49.607

链接器说它缺少这些函数的定义。你定义了这些函数吗？名称拼写是否正确？

//jk

# drupal-7 - Drupal 7 - 带有自定义模板的模块块未呈现

> ID：15325938
> 
> 赞同：0
> 
> 时间：2013-03-10T18:32:22.130
> 
> 标签：drupal-7, block, drupal-themes

我似乎无法在我的模块中获取我的自定义块来呈现我创建的模板文件。这是我的代码：

```
<?php

include_once 'e_most_popular.features.inc'; //this is from features module

function e_most_popular_block_info() {
   $blocks['e_most_popular'] = array(
     'info' => t('e_most_popular block TITLE'), 
     'cache' => DRUPAL_NO_CACHE, //there are a number of caching options for this
   );

  return $blocks;

}

function e_most_popular_block_view($delta = ''){

  switch($delta){

    case 'e_most_popular':

      if(user_access('access content')){ //good idea to check user perms here

         $block['subject'] = t('MYblock_TITLE');

         $block['content'] = e_most_popular_block_function_items();

      }

      break;

  }

}

function e_most_popular_block_function_items(){

  $items = array();

  $items['VAR_ONE'] = array('#markup' => 'VAR_ONE_OUTPUT'); //this is the simplest kind of render array

  $items['VAR_TWO'] = array(

                        '#prefix' => '<div>',

                        '#markup' => 'VAR_TWO_OUTPUT',

                            '#suffix' => '</div>',

                          );

//this is where the $items get sent to your default e_most_popular_block.tpl.php that gets //registered below

      return theme('e_most_popular_block_function_items', array('items' => $items)); 

    }

//here you are registering your default tpl for the above block 

function e_most_popular_theme() {   

  $module_path = drupal_get_path('module', 'e_most_popular');

  $base = array(

    'path' => "$module_path/theme",   );

     return array(

    'e_most_popular_block_function_items' => $base + array(

      'template' => 'e_most_popular_block',  

      'variables' => array('items' => NULL,),

    ),   

  ); 

} 
```

我已经确认它确实读取了模板文件，因为如果没有正确命名它会出错，并且我已经启用和模块将块分配给块菜单中的侧边栏。进行更改后，我也会清除缓存。我仍然没有输出。这是模板文件：

```
Template file Test
<?php 

$items = $variables['items'];
print render($items['VAR_ONE']); 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:12:19.420

正如我在评论中提到的，问题是您没有在 hook_block_view 中返回 $block 变量。这就是为什么没有输出任何东西的原因。

查看[hook_block_view](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_view/7)的文档。

您的 hook_block_view 应该如下所示：

```
function e_most_popular_block_view($delta = ''){
  $block = array();

  switch($delta){

    case 'e_most_popular':

      if(user_access('access content')){ //good idea to check user perms here

         $block['subject'] = t('MYblock_TITLE');

         $block['content'] = e_most_popular_block_function_items();

      }

      break;

  }
  return $block;
} 
```

# amazon-web-services - Amazon Glacier 可以镜像 Amazon S3 存储桶吗？

> ID：15325943
> 
> 赞同：38
> 
> 时间：2013-03-10T18:32:48.287
> 
> 标签：amazon-web-services, amazon-s3

我想使用 Amazon Glacier 镜像 S3 存储桶。

[冰川常见问题解答](http://aws.amazon.com/glacier/faqs/)指出：

> Amazon S3 现在提供了一个新的存储选项，使您能够利用 Amazon Glacier 的成本极低的存储服务进行数据归档。您可以定义 S3 生命周期规则以自动将 Amazon S3 对象集存档到 Amazon Glacier，从而降低您的存储成本。您可以通过访问 Amazon S3 开发人员指南中的对象生命周期管理主题来了解更多信息。

这很接近，但我想*镜像*。我不想删除 S3 上的内容，只将其复制到 Glacier。

这可以使用 AWS 自动设置吗？

或者这个镜像是否需要手动上传到 Glacier？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-07-14T17:40:49.120

现在可以通过首先在 Amazon S3 上创建跨区域复制存储桶来实现“S3 到 Glacier”镜像（此复制存储桶将成为您原始存储桶的镜像 - 请参阅[http://docs.aws.amazon.com /AmazonS3/latest/dev/crr.html ），然后从](http://docs.aws.amazon.com/AmazonS3/latest/dev/crr.html)*复制*存储桶中设置生命周期规则（将数据移动到 Glacier） 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-04T19:46:12.160

亚马逊不通过其 API 提供此功能。我们遇到了同样的问题，并通过运行将文件重新上传到 Glacier 的每日 cron 作业解决了这个问题。

下面是一段代码，您可以使用 Python 和 boto 运行以将文件复制到 Glacier 保险库。请注意，使用下面的代码，您必须先从 S3 本地下载文件，然后才能运行它（例如，您可以使用 s3cmd） - 以下代码对于将本地文件上传到 Glacier 很有用。

```
import boto

# Set up your AWS key and secret, and vault name
aws_key = "AKIA1234"
aws_secret = "ABC123"
glacierVault = "someName"

# Assumption is that this file has been downloaded from S3
fileName = "localfile.tgz"

try: 
  # Connect to boto
  l = boto.glacier.layer2.Layer2(aws_access_key_id=aws_key, aws_secret_access_key=aws_secret)

  # Get your Glacier vault
  v = l.get_vault(glacierVault)

  # Upload file using concurrent upload (so large files are OK)
  archiveID = v.concurrent_create_archive_from_file(fileName)

  # Append this archiveID to a local file, that way you remember what file
  # in Glacier corresponds to a local file. Glacier has no concept of files.
  open("glacier.txt", "a").write(fileName + " " + archiveID + "\n")
except:
  print "Could not upload gzipped file to Glacier" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-28T22:19:44.277

这是通过[Lifecycle policy](https://aws.amazon.com/blogs/aws/archive-s3-to-glacier/)完成的，但该对象在 S3 中不再可用。您可以将其复制到单独的存储桶中以保留它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-24T12:06:43.893

如果您首先在 S3 存储桶上启用版本控制，则可以将生命周期规则应用于以前的版本。这将实现非常相似的结果，但不会有当前版本的备份。

# python - 用于 git 版本化 wiki 的 Restful API

> ID：15325945
> 
> 赞同：1
> 
> 时间：2013-03-10T18:32:55.040
> 
> 标签：python, git, rest, wiki, tastypie

我正在尝试为具有以下属性的 wiki 设计一个 URL 方案：

*   降价语法
*   页面
*   页面部分（由标题结构定义）
*   使用 pygit2 进行 git 版本化

我现在必须遵循计划：

```
/page/
/page/:name/
/page/:name/section/
/page/:name/section/:id/ 
```

但它没有考虑到修订。修订对于列出页面更改的历史非常有用，也可以用于检查特定的页面修订等。所以我想知道你如何将它们包含在 api 中。

谢谢

# java - Java源文件在编译时是否可以运行任意代码？

> ID：15325946
> 
> 赞同：1
> 
> 时间：2013-03-10T18:32:59.307
> 
> 标签：java, javac

我是否可以构造一个 Java 源文件，以便在使用`javac`（但不使用 调用`java`）编译时运行任意代码？

或者我可以假设通过 运行任意源文件是安全的`javac`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:26:07.127

我从来没有真正使用过这个特性，但是 javac 可以运行注释处理器——我相信这只是任意代码。处理器必须在处理器路径中，默认情况下只是用户类路径。因此，根据您的用例，我认为是的，这是一个需要注意的安全问题。您可能需要确保使用 禁用注释处理`-proc:none`，或采取其他一些预防措施。

请参阅[Javac 手册的注释处理部分](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:43:57.617

`javac`无论源文件如何设置，都无法执行 Java。它要做的就是将java文件编译成类文件。

# java - Java 中的线程和命令行参数

> ID：15325947
> 
> 赞同：0
> 
> 时间：2013-03-10T18:33:03.013
> 
> 标签：java, multithreading

所以我正在编写一个简单的线程来将两个向量相加，它需要 2 个命令行参数：向量长度和线程数。据我了解，该程序应该接受这两个参数并根据它们将向量相加，显示取决于线程数和向量长度的性能。这就是我卡住的地方。到目前为止，我已经编写了使用数组将两个向量相加并创建线程的基本代码，显示了时间，但我在使用命令行参数实现它时遇到了麻烦。这是我到目前为止所做的。

```
 public class Addition 
      {

         public static void main(String args[])
         {
        int NoOfThreads = Integer.parseInt(args[0]);
        VectorLength = Integer.parseInt(args[1]);

        System.out.println("Start time: " + System.nanoTime());//print start time
        Thread v1 = new Vector();
        Thread v2 = new Vector();
        Thread vsum = new Vector();

        //start all threads
        v1.start();    
        v2.start();    
        vsum.start();
        //vsum2.start();
        System.out.println("End time: " + System.nanoTime());//print end time
     }

  }

  public class Vector extends Thread
  {    

//create vectors and assign them arbitrary values
int v1[] = {12,13,14,15,16,17,18}; 
int v2[] = {15,19,20,22,24,26,28};

//initialise the vector sums to zero
int vsum = 0;
public void run()
{
        //loop to add up the elements of the first vector
        if(Integer.parseInt(args[0])> 0 )
        {
            for(int i = 0; i < v1.length; i++)
            {
                 for(int j=0; j<v2.length; j++)
                 {       
                    vsum = v1[i]+ v2[j];
                    System.out.println("Current total of vector 1: " + vsum);
                    try
                    {
                        System.out.println(System.nanoTime());
                        Thread.sleep(100);
                    }
                    catch (InterruptedException e)
                       {}           
                 }//for
            }

        }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:49:28.103

您不能`args`在课堂外使用`main`。
请不要使用`Vector`，因为它是`ArrayList`.
您可以做的是在您的`thread`类中添加成员变量 as`int NoOfThreads`并在构造时设置它并`thread class`在您的`run()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:50:24.603

几点注意事项：

1.  您的添加代码使用嵌套循环。我想那不是本意。为了对两个向量求和，一个循环就足够了。
2.  在`main(..)`中，您没有正确等待线程终止。“结束时间：...”将在您启动线程后立即打印。使用`Thread.join()`.
3.  您没有使用输入中的线程数。您总是创建并启动 3 个线程。与向量长度相同。它不会传递给线程。
4.  考虑为每个线程添加一些唯一的 id，以便在它们打印到控制台时可以区分它们。
5.  正如其他人提到的，代码甚至无法编译。使其首先编译（`vectorLength`未声明，`args`在使用范围内未知等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:50:24.750

我在这里看到两个编译问题。

首先，`VectorLength`没有定义的类型。我认为应该是`int VectorLength`。

其次，您试图访问似乎不可用`args`的类中的参考。`Vector`

如果要`args`在`Vector`类中使用，可以将 this 作为参数传递给`Vector`构造函数并将其存储为字段。像这样的东西：

```
public Vector(String[] args) {
    this.args = args;
} 
```

然后从你的`Addition`类中你应该使用这个重载的构造函数：

```
Thread v1 = new Vector(args);
Thread v2 = new Vector(args); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T18:54:17.737

将类创建为 Vector 不会有问题，因为 Vector 不是 Java 中的保留关键字，并且由于您没有使用 <>-><> 的 Vector 类，因此不会有问题。

我能看到的唯一问题是这段代码

```
int NoOfThreads = Integer.parseInt(args[0]);
VectorLength = Integer.parseInt(args[1]); 
```

您正尝试同时初始化两个变量 NoOfThreads 和 VectorLength，但中间的语句以分号结束。

```
int NoOfThreads = Integer.parseInt(args[0])**,**
    VectorLength = Integer.parseInt(args[1]); 
```

注意逗号代替分号。

其次，您试图在 Vector 类的 run 方法中访问 args[0]，但 args 数组的范围在 Addition 的 main 方法中。

`if(Integer.parseInt(args[0])> 0 )`

尝试自己解决这两个问题。祝一切顺利。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T19:19:25.873

您的代码中有太多东西被破坏了。这里有几个。

1.  您在 main 之外使用 args。（将其设置为 Vector 类的属性并在对象创建期间对其进行初始化）
2.  Vector 工作正常，但使用不同的类名是有意义的
3.  一个文件中只能有一个公共类。（将 Vector 放在不同的文件中或删除公共文件）
4.  为什么需要命令行中的向量大小和线程数？您的矢量大小和胎面计数是静态的（预定义的）。
5.  如果您尝试从给定大小动态创建向量并从线程大小运行线程，那么需要对您的代码进行很多更改。

我建议在执行此任务之前开始进行更简单的编程练习。

# android - 在没有活动扩展的情况下启动服务

> ID：15325951
> 
> 赞同：0
> 
> 时间：2013-03-10T18:33:30.103
> 
> 标签：android, service, android-activity, fragment

我想在我的班级开始一项服务

```
public class LayoutOne extends Fragment implements OnClickListener 
```

当我扩展 Activity 超类时，它以前运行得很好，但是由于我必须扩展 Fragment 我遇到了问题..

我在 LayoutOne 类中实现了 OnClicklistener，所以我想在其中启动一个服务，但是它在新 Intent 行和 startServcie 行上给了我一个错误。知道如何解决这个问题吗？

```
@Override
public void onClick(View v) {

switch (v.getId()) {
case R.id.bGo:

if (mStartGo) {
mButton.setText(“Stop going boy”);
mStartGo = false;

Intent intent = new Intent(this, StartGoService.class);
Messenger messenger = new Messenger(handler);
intent.putExtra(“MESSENGER”, messenger);
startService(intent);
//… 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:34:41.093

尝试使用：

```
Intent intent = new Intent(v.getContext(), StartGoService.class);
Messenger messenger = new Messenger(handler);
intent.putExtra(“MESSENGER”, messenger);
v.getContext().startService(intent); 
```

由于它是 View 的 onClick() 方法，因此您应该能够使用用于创建 View 的 Context。

# android - 想要一个 ListActivity 的 setEmptyView()

> ID：15325953
> 
> 赞同：1
> 
> 时间：2013-03-10T18:33:35.477
> 
> 标签：android, layout, view

正如标题所示，我想为列表活动设置默认视图。我试图这样做：

```
TextView emptyView = new TextView(this);
emptyView.setText("No lists available");
this.getListView().setEmptyView(emptyView); 
```

但这没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:27:44.783

问题是它`emptyView`永远不会附加到任何东西上，如果你使用`addView()`：

```
TextView emptyView = new TextView(this);
((ViewGroup) getListView().getParent()).addView(emptyView);
emptyView.setText("It's empty!");
getListView().setEmptyView(emptyView); 
```

现在你会看到它！

* * *

我写了一个快速 Runnable 在空/“满”之间交替...

```
public class Example extends ListActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        TextView emptyView = new TextView(this);
        ((ViewGroup) getListView().getParent()).addView(emptyView);
        emptyView.setText("It's empty!");
        getListView().setEmptyView(emptyView);

        getListView().postDelayed(new Runnable() {
            @Override
            public void run() {
                if(getListAdapter() == null)
                    setListAdapter(new ArrayAdapter<String>(Example.this, android.R.layout.simple_list_item_1, new String[] {"It", "Has", "Content"}));
                else
                    setListAdapter(null);
                getListView().postDelayed(this, 2000);
            }
        }, 2000);
    }
} 
```

# ruby-on-rails - 如何设置 Simple_Form 生成的每个复选框的“标签”样式？

> ID：15325957
> 
> 赞同：1
> 
> 时间：2013-03-10T18:33:48.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

这个：

```
<%= f.input :accomplished_goal, label: "Accomplished goal this week?", collection: ["Yes", "No"], as: :check_boxes, label_html: { class: 'checkbox inline' } %> 
```

产生：

```
<div class="control-group check_boxes optional weekly_entry_accomplished_goal">
   <label class="check_boxes optional control-label checkbox inline">Accomplished goal this week?</label>
    <div class="controls">
       <label class="checkbox">
           <input class="check_boxes optional" id="weekly_entry_accomplished_goal_yes" name="weekly_entry[accomplished_goal][]" type="checkbox" value="Yes" />
             Yes
       </label>
       <label class="checkbox">
           <input class="check_boxes optional" id="weekly_entry_accomplished_goal_no" name="weekly_entry[accomplished_goal][]" type="checkbox" value="No" />
              No
       </label>
           <input name="weekly_entry[accomplished_goal][]" type="hidden" value="" />
    </div>
</div> 
```

理想情况下，我想将样式添加`inline`到内部`label class="checkbox"`

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:03:16.500

这是我发现的作品：

```
<%= f.input :accomplished_goal, label: "Accomplished goal this week?", collection: ["Yes", "No"], as: :check_boxes, item_wrapper_class: 'inline' %> 
```

即使用属性`item_wrapper_class: 'inline'`

将类添加`inline`到内部`<label class="checkbox inline">`

# java - 按下鼠标指针时创建一个对象，java

> ID：15325961
> 
> 赞同：-7
> 
> 时间：2013-03-10T18:33:55.097
> 
> 标签：java, swing, jpanel, paintcomponent

我想制作一个在屏幕上有对象的程序，然后当你按下它们时，它会跟随鼠标指针，直到你释放鼠标，然后它就不再跟随鼠标。

这是我必须将球添加到屏幕上的代码，所以如果可以调整代码，那就太好了。它分为3类

```
import java.awt.BorderLayout;
import java.awt.event.*;
 import java.util.Random;
import javax.swing.*;

public class DrawBalls {
JFrame frame = new JFrame();
final DrawPanel drawPanel = new DrawPanel();
JPanel controlPanel = new JPanel();
JButton createBallButton = new JButton("Add ball");

DrawBalls(){
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    controlPanel.add(createBallButton);
    frame.add(drawPanel);
    frame.add(controlPanel, BorderLayout.SOUTH);
     frame.pack();
    frame.setVisible(true);
     {
         drawPanel.addMouseMotionListener(new MouseMotionAdapter() {
@Override
public void mouseMoved(MouseEvent e) {
            super.mouseMoved(e);
            for (Ball b : drawPanel.getBalls()) {
                if (b.getBounds().contains(me.getPoint())) {
                  //this has it being the same coordinates as the mouse i don't know   
                  //how to have it run constantly so when i move it, it doesn't work  

                  b.setx(me.getX()-(b.radius/2));
                  b.sety( me.getY()-(b.radius/2));   
                     drawPanel.repaint();
            }

        }
    }

     });
         createBallButton.addActionListener(new ActionListener() {
        Random rand = new Random();
        private int counter = 1;
 int noOfClicks = 1;

        public void actionPerformed(ActionEvent e) {

            if(noOfClicks<=10){

            int ballRadius = 10;
            int x = rand.nextInt(drawPanel.getWidth());
            int y = rand.nextInt(drawPanel.getHeight());

            //check that we dont go offscreen by subtarcting its radius unless its x and y are not bigger than radius
            if (y > ballRadius) {
                y -= ballRadius;
            }
            if (x > ballRadius) {
                x -= ballRadius;
            }

            drawPanel.addBall(new Ball(x, y, ballRadius, counter));//add ball to panel to be drawn
            counter++;//increase the ball number
        noOfClicks++;
        }
            }
    });        
}
public static void main(String[] args) {
   SwingUtilities.invokeLater(new Runnable() {
         @Override
        public void run() {
            new DrawBalls();
        }
    });
} 
```

球类

```
import java.awt.*;
import java.awt.geom.*;

 public class Ball {
 private Color color;
 private int x, y;
 private int radius;
 private final int number;

Ball(int x, int y, int radius, int counter) {
    this.x = x;
    this.y = y;
    this.radius = radius;
    this.number = counter;

    this.color = Color.RED;
  }
 public void draw(Graphics2D g2d) {
    Color prevColor = g2d.getColor();
    g2d.drawString(number + "", x + radius, y + radius);
    g2d.setColor(color);
    g2d.fillOval(x, y, radius, radius);
    g2d.setColor(prevColor);
}
public Rectangle2D getBounds() {
    return new Rectangle2D.Double(x, y, radius, radius);

}
int getNumber() {
    return number;
}
} 
```

绘图面板

```
 import java.awt.*;
 import java.util.*;
 import javax.swing.*;

 public class DrawPanel extends JPanel {
  ArrayList<Ball> balls = new ArrayList<Ball>();

   public void addBall(Ball b) {
      balls.add(b);
       repaint();
    }

   public ArrayList<Ball> getBalls() {
      return balls;
}
@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g;

    for (Ball ball : balls) {
        ball.draw(g2d);
    }
}
    @Override
public Dimension getPreferredSize() {
    return new Dimension(300, 300);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:46:15.337

一种方法是使您的 Ball 类成为实际的 Swing 组件。然后您可以使用[ComponentMover](http://tips4java.wordpress.com/2009/06/14/moving-windows/)类。

编辑：

> 你如何将一个类变成一个摇摆组件

基本上，您将 draw(...) 代码移动到 JComponent 的 paintComponent() 方法中。这是一个简单的示例，它为您完成所有自定义绘画，因为绘画基于 Shape 对象。您仍然需要修改代码以绘制“数字”。

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import javax.swing.*;

public class ShapeComponent extends JComponent
{
    Shape shape;

    public ShapeComponent(Shape shape)
    {
        this.shape = shape;
        setOpaque( false );
    }

    public Dimension getPreferredSize()
    {
        Rectangle bounds = shape.getBounds();
        return new Dimension(bounds.width, bounds.height);
    }

    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D)g;

        g2d.setColor( getForeground() );
        g2d.fill( shape );
    }

    @Override
    public boolean contains(int x, int y)
    {
        return shape.contains(x, y);
    }

    private static void createAndShowUI()
    {
        ShapeComponent ball = new ShapeComponent( new Ellipse2D.Double(0, 0, 50, 50) );
        ball.setForeground(Color.GREEN);
        ball.setSize( ball.getPreferredSize() );
        ball.setLocation(10, 10);

        ShapeComponent square = new ShapeComponent( new Rectangle(30, 30) );
        square.setForeground(Color.ORANGE);
        square.setSize( square.getPreferredSize() );
        square.setLocation(50, 50);

        JFrame frame = new JFrame();
        frame.setLayout(null);
        frame.add(ball);
        frame.add(square);
        frame.setSize(200, 200);
        frame.setVisible(true);

        MouseListener ml = new MouseAdapter()
        {
            public void mouseClicked( MouseEvent e )
            {
                System.out.println( "clicked " );
            }
        };

        ball.addMouseListener( ml );
        square.addMouseListener( ml );
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowUI();
            }
        });
    }
} 
```

这种方法与trashgod 建议使用图标的主要区别在于，鼠标事件只会在鼠标悬停在球上时生成，而不是球的矩形角，因为该`contains(...)`方法尊重您正在绘制的形状。

# java - EclipseLink 层次结构错误

> ID：15325965
> 
> 赞同：0
> 
> 时间：2013-03-10T18:34:18.283
> 
> 标签：java, jpa, eclipselink, eclipse-virgo

我正在尝试使用 Virgo 和 EclipseLink 并实现基于 Greenpage 项目的应用程序。

我已经实现了一个层次结构，但我遇到了一个奇怪的错误（使用 EclipseLink）：

```
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.0.0.v20091127-r5931): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class model.Person] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy. 
```

等级制度：

Entity <- NamedEntity <- Person <- ... - 扩展 Person 的其他类

```
import java.io.Serializable;

import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.MappedSuperclass;

@MappedSuperclass
public abstract class Entity implements Serializable {

    private static final long serialVersionUID = 1L;

    private Long id;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }
}

import javax.persistence.MappedSuperclass;

@MappedSuperclass
public abstract class NamedEntity extends Entity {
    private static final long serialVersionUID = 1L;

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Override
    public String toString() {
        return name;
    }
}

import javax.persistence.DiscriminatorColumn;
import javax.persistence.Entity;
import javax.persistence.Inheritance;
import javax.persistence.InheritanceType;

import pl.com.mgr.model.NamedEntity;

@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "discriminator")
public abstract class Person extends NamedEntity {
    private static final long serialVersionUID = 1L;

} 
```

编辑：Kevin Bowersox 发布的答案（非常感谢！）帮助......部分;）。问题变得更深了。我们现在是：Entity <- NamedEntity <- Attribute <- LecturerAttribute

```
import javax.persistence.Column;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.MappedSuperclass;

import model.NamedEntity;

@MappedSuperclass
public abstract class Attribute<T extends NamedEntity> extends NamedEntity {
    private static final long serialVersionUID = 1L;

    private T entity;
    private String value;

    @ManyToOne
    @JoinColumn(name = "entity", nullable = false)
    public T getEntity() {
        return entity;
    }

    public void setEntity(T entity) {
        this.entity = entity;
    }

    @Column(nullable = false)
    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

}

import javax.persistence.Entity;

@Entity
public class LecturerAttribute extends Attribute<Lecturer> {
    private static final long serialVersionUID = 1L;

} 
```

还有一个例外：

```
Internal Exception: Exception [EclipseLink-7161] (Eclipse Persistence Services - 2.0.0.v20091127-r5931): org.eclipse.persistence.exceptions.ValidationException
Exception Description: Entity class [class model.LecturerAttribute] has no primary key specified. It should define either an @Id, @EmbeddedId or an @IdClass. If you have defined PK using any of these annotations then make sure that you do not have mixed access-type (both fields and properties annotated) in your entity class hierarchy. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T18:38:06.870

将注释从访问器移至字段声明，并将字段可访问性更改为受保护。

```
@MappedSuperclass
public abstract class Entity implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    protected Long id;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T20:11:34.187

好的，Kevin Bowersox 的回答让我找到了正确的答案：我更改了所有受保护的字段并将注释更改为字段。这导致良好的工作;)。

# javascript - 将自定义属性附加到动态创建的节点 javascript

> ID：15325971
> 
> 赞同：0
> 
> 时间：2013-03-10T18:34:44.977
> 
> 标签：javascript, dom, setattribute

我需要设置通过 Javascript 创建的节点的属性。但是，由于值在整个脚本中不同函数的位置，它变得相当复杂。

我有一个构造函数：

```
function Todo(id, task, who, dueDate) {
    this.id = id;
    this.task = task;
    this.who = who;
    this.dueDate = dueDate;
    this.done = false;
} 
```

然后我创建保存待办事项的 span 元素：

```
function createNewTodo(todoItem) {
    var li = document.createElement("li");
    li.setAttribute("id", todoItem.id);

    var spanTodo = document.createElement("span");
    spanTodo.innerHTML =
        todoItem.who + " needs to " + todoItem.task + " by " + todoItem.dueDate;
    li.appendChild(spanTodo);
return li;
} 
```

然后我从页面上的表单中获取值，该表单用于设置谁和任务。还有日期，但这有点复杂，因为我稍后会在我的代码中使用该值来获取今天的日期和他们输入的日期之间的差异。

```
function getFormData() {
    var task = document.getElementById("task").value;
    if (checkInputText(task, "Please enter a task")) return;

    var who = document.getElementById("who").value;
    if (checkInputText(who, "Please enter a person to do the task")) return;

    var adate = document.getElementById("dueDate").value;
    var reString = new RegExp("[0-9]{4}\\-\[0-9]{2}\\-\[0-9]{2}");

    var date = compareDates(date);
    var id = (new Date()).getTime();
    var todoItem = new Todo(id, task, who, date);
    todos.push(todoItem);
    addTodoToPage(todoItem);
    saveTodoItem(todoItem);
} 
```

所以，天是我想要的价值。我想将dueDate 设置为相等的天数，以便我可以在createNewToDo 函数的innerHTML 中使用该值。

```
function compareDates(date) {
  var days = Math.floor(daysCal);
  console.log(date);
  todoItem.setAttribute("dueDate", days);
  if (cdate < date) {
  console.log("you have" + " " + days + " " + "more day(s)");
  }
  else if (cdate > date ) {
  console.log("you are" + " " + -days + " " + "day(s) overdue");  
  } 
} 
```

关于修改将dueDate设置为天数的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:54:44.273

Your`todoItem`是由`Todo`构造函数创建的 JS 对象，而不是像`li`or之类的 DOM 节点`spanTodo`。因此，它没有`setAttribute`方法，如果你想设置它的属性，只需分配给它（使用[成员 operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)）：

```
todoItem.dueDate = daysL 
```

# loops - FOR 循环和 IF 语句的问题

> ID：15325974
> 
> 赞同：1
> 
> 时间：2013-03-10T18:35:07.410
> 
> 标签：loops, if-statement, for-loop, repeat

试图显示订购的每个组合的数量和总价。不知道为什么它不会在 A、B 和 C 中存储值。这里是新手程序员，所以要简单。if 语句的问题已经有一段时间了，所以很明显我做错了整个 if 语句。

```
#include <iostream>
using namespace std;
int main( )
{
 int group = 0;
 char combo = ' ';
 int A = 0;
 int B = 0;
 int C = 0;
 double total = 0.0;
 cout << "How many customers are in the group? ";
 cin >> group;
 for (int counter = 0; counter < group; counter = counter + 1)
 {
    cout << "Enter combo ordered: ";
    cin >> combo;
    if (combo = A)
    {
        A = A + 1;
        cout << "Enter combo ordered: ";
        cin >> combo;
    }
    else if (combo = B)
    {
        B = B + 1;
        cout << "Enter combo ordered: ";
        cin >> combo;
    }
    else if (combo = C)
    {
        C = C + 1;
        cout << "Enter combo ordered: ";
        cin >> combo;
    }
    total = A*6 + B*6.25 + C*5.75;
 }
 cout << "# of Combo A ordered: " << A << endl;
 cout << "# of Combo B ordered: " << B << endl;
 cout << "# of Combo C ordered: " << C << endl;
 cout << "Total price: $" << total << endl;
 system("pause");
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T18:37:21.800

For循环应该是`for (int counter = 0; counter < group; counter++)`

如果语句应该`==`用于相等。 `=`仅用于分配。

您的`if`陈述需要引用您要比较的字符：`if (combo == 'A') {`. 您也可能需要将组合作为字符数组访问，如下所示：`if (combo[0] == 'A') {`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:35:29.547

我认为您可能只需要调整几件事；`double`当你计算一个using时，一些编译器不喜欢它，因为程序很小`int`，所以没有理由不在这里使用它。`double`还有一些语法错误（即用`=`而不是`==`）。您是否尝试过以孤立的方式显示您的输出？就像是：

```
main(){
double A = 1;
double B = 2;
double C = 3;
double total = A*6 + B*6.25 + C*5.75;

 cout << "# of Combo A ordered: " << A << endl;
 cout << "# of Combo B ordered: " << B << endl;
 cout << "# of Combo C ordered: " << C << endl;
 cout << "Total price: $" << total << endl;
 system("pause");
 return 0;
} 
```

您更正的代码：

```
#include <iostream>
using namespace std;
int main( )
{
 int group = 0;
 char combo = ' ';
 double A = 0;
 double B = 0;
 double C = 0;
 double total = 0.0;
 cout << "How many customers are in the group? ";
 cin >> group;
 for (int counter = 0; counter < group; counter++)
 {
    cout << "Enter combo ordered: ";
    cin >> combo;
    if (combo == 'A')
    {
        A++;
    }
    else if (combo == 'B')
    {
        B++;
    }
    else if (combo == 'C')
    {
        C++;
    } 
    cout << "Enter combo ordered: ";
    cin >> combo;       
 }

 total = A*6 + B*6.25 + C*5.75;

 cout << "# of Combo A ordered: " << A << endl;
 cout << "# of Combo B ordered: " << B << endl;
 cout << "# of Combo C ordered: " << C << endl;
 cout << "Total price: $" << total << endl;
 system("pause");
 return 0;
} 
```

我还将显示您的值，`group`以确保`if`循环甚至至少运行一次。这里有一些故障点，我将单独测试。

* * *

**编辑：**

也许测试一下：

```
#include <iostream>
using namespace std;
int main( )
{
 int group = 0;
 cout << "How many customers are in the group? ";
 cin >> group;
 for (int counter = 0; counter < group; counter++)
 {
    cout << "Test success";
 } 
```

看看你是否甚至进入你的`for`循环。

# android - 获取两个位置之间的距离，如 Google Directions 中的 http 请求

> ID：15325976
> 
> 赞同：2
> 
> 时间：2013-03-10T18:35:21.693
> 
> 标签：android, location, directions

我知道关于这个问题有很多话题，但我的问题更具体。我调用 Google Directions http API 来获取两个位置之间的路由。响应的 JSON 包含如何从 A 点行进到 B 点的所有信息。但是我如何自己计算距离，例如在我移动时我的实际位置和一个步骤的下一个结束位置之间的距离？我需要的是“公路线路”而不是“航空线路”。

我所做的是使用 LocationManager 获取我的实际位置的 lat、lng。有了这个和最终位置的 lat, lng，我调用 Location.distanceBetween 方法。但它给出了一个不精确的距离。不精确意味着 distancebetween 方法的结果与方向 API 的距离不同。长路和短路一样。

一种解决方案是多次调用 Directions API……但必须有更好的解决方法才能获得沿道路的实际距离。有什么工具可以得到我想要的吗？

编辑使其更易于理解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:34:55.440

调用 Directions API：

```
 public Document getDocument(LatLng start, LatLng end, String mode) {
    String url = "http://maps.googleapis.com/maps/api/directions/xml?" 
            + "origin=" + start.latitude + "," + start.longitude  
            + "&destination=" + end.latitude + "," + end.longitude 
            + "&sensor=false&units=metric&mode=driving";

    try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse response = httpClient.execute(httpPost, localContext);
        InputStream in = response.getEntity().getContent();
        DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        Document doc = builder.parse(in);
        return doc;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

之后，您可以在文档中收到的所有 json 对象上运行，并检查每对点之间的距离：

```
 public int getDistanceValue (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("distance");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "value"));
    Log.i("DistanceValue", node2.getTextContent());
    return Integer.parseInt(node2.getTextContent());
} 
```

以下是获得所有分数的方法：

```
 public ArrayList<LatLng> getDirection (Document doc) {
    NodeList nl1, nl2, nl3;
    ArrayList<LatLng> listGeopoints = new ArrayList<LatLng>();
    nl1 = doc.getElementsByTagName("step");
    if (nl1.getLength() > 0) {
        for (int i = 0; i < nl1.getLength(); i++) {
            Node node1 = nl1.item(i);
            nl2 = node1.getChildNodes();

            Node locationNode = nl2.item(getNodeIndex(nl2, "start_location"));
            nl3 = locationNode.getChildNodes();
            Node latNode = nl3.item(getNodeIndex(nl3, "lat"));
            double lat = Double.parseDouble(latNode.getTextContent());
            Node lngNode = nl3.item(getNodeIndex(nl3, "lng"));
            double lng = Double.parseDouble(lngNode.getTextContent());
            listGeopoints.add(new LatLng(lat, lng));

            locationNode = nl2.item(getNodeIndex(nl2, "polyline"));
            nl3 = locationNode.getChildNodes();
            latNode = nl3.item(getNodeIndex(nl3, "points"));
            ArrayList<LatLng> arr = decodePoly(latNode.getTextContent());
            for(int j = 0 ; j < arr.size() ; j++) {
                listGeopoints.add(new LatLng(arr.get(j).latitude, arr.get(j).longitude));
            }

            locationNode = nl2.item(getNodeIndex(nl2, "end_location"));
            nl3 = locationNode.getChildNodes();
            latNode = nl3.item(getNodeIndex(nl3, "lat"));
            lat = Double.parseDouble(latNode.getTextContent());
            lngNode = nl3.item(getNodeIndex(nl3, "lng"));
            lng = Double.parseDouble(lngNode.getTextContent());
            listGeopoints.add(new LatLng(lat, lng));
        }
    }

    return listGeopoints;
} 
```

实际上我使用这段代码`Polyline`在地图上绘制了一个方向，但是距离函数也应该可以工作。

# jquery - 获取绝对定位和隐藏的 div 的高度

> ID：15325978
> 
> 赞同：1
> 
> 时间：2013-03-10T18:35:26.437
> 
> 标签：jquery, html, height, hidden, absolute

我一直在阅读并试图解决这个问题，但我找不到解决方案。

我正在尝试获取一个 div 的高度，以更新另一个 div 的高度并制作很酷的 jQuery 动画。这一切都是由 ajax 请求触发的（可以正常工作）。

[这是一个活生生的例子](http://jsfiddle.net/97Xx5/2/)

我不知道如何获得 的高度`#bigBox`，因为它总是返回 0。

**已编辑**

所有的解决方案都有效，但它们并没有达到我的预期。我需要计算`#bigBox`淡出后的高度。

最后我设法做到了。

我将类更改`.toToggle`为 div `#bigBox`，而不是在它的父 div 中。这样做是为了避免父母蜂拥而至`display: none;`。现在相同的元素被隐藏了，所以它可以工作

[这是最终的解决方案](http://jsfiddle.net/Zqe6z/)

谢谢你们！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:40:03.380

您在获取高度之前将其隐藏，因此当您获取高度时，它将为“0”。

试试这个：

```
var height = $("#bigBox").height();
$(".toToggle").fadeOut(600, "swing",function(){

    alert(height);

    $(".toToggle").fadeIn(500);
}); 
```

[见小提琴](http://jsfiddle.net/97Xx5/3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:37:39.750

根据定义，隐藏元素没有高度。例如，您需要将其绝对定位并在屏幕外（见下文）、显示它、获取它的高度并再次隐藏它。

.offscreen { 显示：块；位置：绝对；左：-999em；}

更新：仔细查看您的演示后，为什么不在动画开始之前获取高度？

[http://jsfiddle.net/97Xx5/5/](http://jsfiddle.net/97Xx5/5/)

```
var height = $("#bigBox").height();

$(".toToggle").fadeOut(600, "swing", function () {
    alert(height);

    $(".toToggle").fadeIn(500);
}); 
```

# c# - 如何通过删除按钮删除datagridview中的选定行

> ID：15325980
> 
> 赞同：0
> 
> 时间：2013-03-10T18:35:39.290
> 
> 标签：c#

```
SqlConnection con = new SqlConnection( "Data Source=AMBADNYA-PC;Initial
         Catalog=MYRAWPRO;Persist Security Info=True;User ID=sa;Password=sa");

string query = "DELETE FROM Sales  WHERE Sales_ID =" + 
                dataGridViewProduct.SelectedRows[0].Cells[0].Value.ToString();

SqlCommand com = new SqlCommand();

com.CommandText = query;
com.Connection = con;
con.Open();
com.ExecuteNonQuery();
con.Close();

MessageBox.Show("Deleted"); 
```

但它显示错误

```
Invalid column name 'uiui'. 
```

`uiui`是列值。我究竟做错了什么？

# php - PHP：如何将在 facebook 应用程序中创建的照片上传到用户墙

> ID：15325989
> 
> 赞同：0
> 
> 时间：2013-03-10T18:36:45.543
> 
> 标签：php, facebook, facebook-graph-api

我有一个 facebook 应用程序，用户可以在其中为他们的图像提供类似 instagram 的效果。 [http://instakilo.herokuapp.com/](http://instakilo.herokuapp.com/)
添加图像过滤器时，底部会出现一个下载链接，单击该链接时，将创建该编辑图像的源并将其添加到下载链接的“href”属性中，并下载图像。现在我不想下载图像，而是想将该图像发布到用户墙上并附上一些标题。

我搜索了一些教程，但他们显示通过 HTML 表单上传图片，用户从硬盘驱动器中选择图像并发布，但在这里我有该图像的来源，在 javascript 变量中。正如您在我的应用程序中的 script.js 文件中看到的那样，script.js 末尾的以下代码

```
function showDownload(canvas){

    downloadImage.off('click').click(function(){

        // When the download link is clicked, get the
        // DataURL of the image and set it as href:

        var url = canvas.toDataURL("image/png;base64;");
        downloadImage.attr('href', url);
        $.ajax({

                        type: "POST",
                        url: "http://instakilo.herokuapp.com/process.php",
                        data: {'data':url},
                        success: function(){alert('Posted');},
                        error:function(){alert('error');}
                    });

    }).fadeIn();
            downloadImage.css("display","inline-block");  

} 
```

在 url 变量中存储图像源。如您所见，我尝试使用 ajax 将其发布到 process.php，但它似乎不起作用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:37:01.533

从 URL 使用`url`和`me/photos`端点发布照片

```
var params = {};
params['message'] = 'The message';;
params['url'] = url;

FB.api('/me/photos', 'post', params, function(response) {
    if (!response || response.error) {
    // an error occured
        alert(JSON.stringify(response.error));
    } else {
    // Done
        alert('Published to stream');
    }
}); 
```

# javafx - 如何为 JavaFX TableView 设置项目 - 对象包含另一个对象？

> ID：15325990
> 
> 赞同：6
> 
> 时间：2013-03-10T18:36:47.777
> 
> 标签：javafx

我想尽可能简短而不省略有用的信息。我有以下课程：

```
public class Address{
StringProperty city = new SimpleStringProperty();
StringProperty street = new SimpleStringProperty();

//following the constructor, getters and setters
...
} 
```

我有另一个班级客户，那个有一个地址成员

```
public class Client {

StringProperty name = new SimpleStringProperty();
StringProperty  id = new SimpleStringProperty();
ObjectProperty<Address> address = new SimpleObjectProperty<>();

//following the constructor, getters and setters
...
} 
```

和一个带有控制器的 JavaFX 接口，该控制器包含一个 TableView 对象，该对象应在 3 列中输出给定对象的 Client 类的成员和 Address 类的 city 成员。我的 TableView 和 TableColumn 定义如下代码

```
public class SettingsController {
TableColumn<Client, String> clientNameCol;
TableColumn<Client, String> clientEmailCol;
TableColumn<Client, String> clientCityCol;
private TableView<Client> clientSettingsTableView;
...
...
    clientNameCol = new TableColumn<>("Name");
    clientNameCol.setCellValueFactory(new PropertyValueFactory<Client, String>("name"));

    clientEmailCol = new TableColumn<>("email");
    clientEmailCol.setCellValueFactory(new PropertyValueFactory<Client, String>("email"));

    clientCityCol = new TableColumn<>("City");
    clientCityCol.setCellValueFactory(new PropertyValueFactory<Client, String>("city"));

    clientSettingsTableView.setItems(clientData);
    clientSettingsTableView.getColumns().clear();
    clientSettingsTableView.getColumns().addAll(clientNameCol, clientEmailCol, clientCityCol); 
```

当然还有一个 ObservableList clientData 包含一个 Client 对象数组。一切正常，除了应该为每个客户输出城市的列。我应该如何定义客户对象的城市列（由地址成员包含）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T18:22:19.357

@invariant 感谢您的帮助，我用谷歌搜索了更多，最终得到了以下解决方案：

```
clientCityCol = new TableColumn<>("City");
clientCityCol.setCellValueFactory(new PropertyValueFactory<Client, Address>("address"));
// ======== setting the cell factory for the city column  
clientCityCol.setCellFactory(new Callback<TableColumn<Client, Address>, TableCell<Client, Address>>(){

        @Override
        public TableCell<Client, Address> call(TableColumn<Client, Address> param) {

            TableCell<Client, Address> cityCell = new TableCell<Client, Address>(){

                @Override
                protected void updateItem(Address item, boolean empty) {
                    if (item != null) {
                        Label cityLabel = new Label(item.getCity());
                        setGraphic(cityLabel);
                    }
                }                    
            };               

            return cityCell;                
        }

    }); 
```

Address 类有一个 getter getCity()，它将城市成员作为 String() 返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T13:18:22.633

这适用于 fxml？

考虑以下代码：

`<TableColumn prefWidth="8" text="City"> <cellValueFactory > <PropertyValueFactory property="adress.city" /> </cellValueFactory> </TableColumn>`

以这种方式工作我有一个空白单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-27T03:23:07.463

您忘了提及您必须将 clientCityCol 的定义更改`TableColumn<Client, String> clientCityCol;`为，`TableColumn<Client, Address> clientCityCol;`否则它将无法正常工作。

# php - 在 YII 中更改语言

> ID：15325996
> 
> 赞同：2
> 
> 时间：2013-03-10T18:37:31.683
> 
> 标签：php, yii

使用 YII 创建新站点后，我在 protected/messages 中添加了一个文件夹“fr”，并添加了一个文件“site.php”，其中包含：

> 返回数组（'你好' => 'bonjour'）；

在 view/layout/main.php 中，我添加了以下代码：

```
<?php 
    // I change the language to english and french using session. 
    //  This is just for example.
    Yii::app()->language = 'fr'; 

    // I also used Yii::app()->setLanguage('fr');
    echo Yii::t('site','hello');
?> 
```

但是语言没有翻译..我错在哪里。请建议

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T19:23:34.973

如果您希望翻译在所有视图中正常工作，您应该在控制器中设置语言。

为了使语言适用于所有控制器，请在 components 文件夹中创建包含extends的新`Controller.php`文件，然后所有控制器都应扩展类。在类覆盖方法中（不要忘记调用）并在那里设置语言。例如：`class Controller``CController``Controller``Controller``init()``parent::init()`

```
class Controller extends CController
{
    public $layout='//layouts/column1';

    function init()
    {
        parent::init();
        Yii::app()->language = 'fr';
    }
 } 
```

通过这种方式，您可以在一处添加适用于所有控制器的其他内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:46:50.067

您忘记设置源语言。

进入配置：

```
return array(
   'sourceLanguage'=>'en',
), 
```

或应用程序：

```
Yii::app()->sourceLanguage = 'en'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T14:23:32.693

您可以将 config/main.php 中的默认语言设置为

```
return array(
    ...
    'sourceLanguage' => 'fr',
    'language'=>'en',
    ...
    'params' => array(
               ...
               'languages'=>array('en_us'=>'English', 'fr'=>'French', 'fa_ir'=>'فارسی'),
               ....
               ), 
); 
```

并在您喜欢的任何地方更改您的语言：

```
Yii::app()->language = Yii::app()->params->languages['fa_ir']; 
```

也为了更多的经验，也许：

```
Yii::app()->language = Yii::app()->params->languages[$_GET['lang']]; 
```