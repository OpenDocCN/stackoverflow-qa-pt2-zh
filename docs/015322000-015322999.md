# StackOverflow 问答 15322000-15322999

# jquery - jQuery 查找和追加元素

> ID：15322001
> 
> 赞同：2
> 
> 时间：2013-03-10T12:04:45.183
> 
> 标签：jquery, variables, append, clone

我创建了一个变量来查找“img”并像这样克隆：

```
var element = jQuery.find('img').clone();
element.appendTo('body'); 
```

它对我不起作用。我的 Chrome 控制台告诉我：

```
Uncaught TypeError: Object [object Array] has no method 'clone' 
```

甚至可以这样写`jQuery.find()`吗？我还能尝试什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T12:08:06.597

你可以使用

```
$('img').appendTo('body'); 
```

或者

```
$('img').clone().appendTo('body'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T12:14:12.773

`find()`需要一个您尚未提供的起点。的语法`jQuery.find()`不正确。正确的语法`find()`是：

```
jQuery(parentSelector).find(descendentSelector); 
```

这将`parentSelector`在`descendentSelector`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T12:12:11.230

该`clone()`函数无法很好地处理结果，您可以使用 jQuery 对象`find()`包装结果，如下所示：`find()`

```
var element = jQuery(jQuery.find('img')).clone();
element.appendTo('body'); 
```

# android - 如何通过http post以UTF-8发送字符串

> ID：15322002
> 
> 赞同：5
> 
> 时间：2013-03-10T12:04:46.073
> 
> 标签：android

我尝试发送字符串“Привет мир！”

```
String link = POST_URL;
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(link);
String xml ="Привет мир";
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("file", xml));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
HttpResponse response = httpclient.execute(httppost); 
```

并通过 php 脚本保存：

```
if(!empty($_REQUEST['file'])){
$fp = fopen("C:\\windows\\temp\\1.xml", "w");
$mytext =$_POST["file"];
$test = fwrite($fp, $mytext); 
fclose($fp); 
```

但我明白了？？？？？？？？？在我的网络服务器上，我尝试使用 utf 编码重新打开文件，但它没有帮助。我该如何解决。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-10T12:07:06.183

StringEntity 的字符集为 UTF-8。这些行可以解决问题：

```
 httpPost.setEntity(new StringEntity(body, HTTP.UTF_8)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-21T14:02:40.110

这对我有用：

```
HttpPost httpPost = new HttpPost("http://someurl.com");
httpPost.setEntity(new UrlEncodedFormEntity(nameValuePair, HTTP.UTF_8)); 
```

# php - 使此代码 PDO 友好

> ID：15322012
> 
> 赞同：0
> 
> 时间：2013-03-10T12:06:42.217
> 
> 标签：php, mysql, pdo

我刚刚开始使用 PDO 而不是 mysql 函数。但现在我被困在我的 php 博客的一部分上。

我如何让这段代码对 PDO 更友好一点：

```
$total_results = mysql_fetch_array(mysql_query("SELECT COUNT(*) as num   
    FROM php_blog"));
$total_pages = ceil($total_results['num'] / $blog_postnumber);
for($i = 1; $i <= $total_pages; $i++) {
   if ($page == $i) {
      echo "<span class='current'>$i</span>";
   }
   else {
      echo "<a href=\"index.php?page=$i\">$i</a>";
   }
} 
```

我尝试使用 PDO rowCount()，但它似乎不起作用......

对不起我的英语不好，我来自瑞典！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:14:11.540

rowCount 不适用于 PDO 中的 mySQL。相反，您只需运行 count(*) 查询。

```
<?php
$sql = "SELECT count(*) FROM `table` WHERE foo = bar"; 
$result = $con->prepare($sql); 
$result->execute(); 
$number_of_rows = $result->fetchColumn(); 
```

资料来源：[使用 PDO 的行数](https://stackoverflow.com/questions/883365/count-with-pdo)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T12:17:10.333

```
$stmt = $db->exec( "select count(*) as num from php_blog" );
$results = $stmt->fetch();
$total_results = $results[ 'num' ];
$total_pages = ceil( $total_results / $blog_postnumber );
for($i = 1; $i <= $total_pages; $i++) {
   if ($page == $i) {
      echo "<span class='current'>$i</span>";
   }
   else {
   echo "<a href=\"index.php?page=$i\">$i</a>";
   }
} 
```

# asp.net-mvc-3 - 在控制器 asp.net mvc3 中调用函数

> ID：15322013
> 
> 赞同：0
> 
> 时间：2013-03-10T12:06:47.050
> 
> 标签：asp.net-mvc-3, razor

我在控制器中有一个功能。名称为reportController 返回图表

```
public FileContentResult GetChart(DateTime tuNgay, DateTime denNgay)
    {
        return File(Chart(tuNgay, denNgay), "image/png");
    } 
```

和功能 Chart(tuNgay, denNgay) 现在我想从视图中调用它们

```
<div><img src="/report/GetChart" /> 
```

但我得到错误请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:15:40.133

你可以使用`@Url.Action`

```
<img src='@Url.Action("GetChart","report")' /> 
```

# ios - 问题旋转 UIImage

> ID：15322014
> 
> 赞同：4
> 
> 时间：2013-03-10T12:06:47.200
> 
> 标签：ios, objective-c, cocoa-touch, ios6

我正在为 iPad 开发 iOS 6 应用程序。我开发了一些代码来旋转`UIImage`. 它适用于正方形图像，但是当图像不是正方形时，它们会被裁剪，因此您只能看到图像的一部分（正方形）。

我的代码：

```
UIGraphicsBeginImageContext(image.size);

CGContextRef context = UIGraphicsGetCurrentContext();

CGContextTranslateCTM( context, 0.5f * image.size.width, 0.5f * image.size.height ) ;
CGContextRotateCTM( context, -1.5707963267949) ;

[image drawInRect:(CGRect){ { -imatgetemporal.size.width * 0.5f, -image.size.height * 0.5f }, image.size }];

UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext(); 
```

我认为问题出在0.5f，但我不知道如何解决。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:30:25.883

您需要使您的图形上下文足够大以容纳旋转的图像。您正在使用 image.size，但应该使用旋转后的大小作为 UIGraphicsBeginImageContext 的参数。此外，您对 drawInRect 的论点不正确。您需要通过以下方式偏移（旋转的）原点 x，它确定最终图像的 y 原点：“向上”为原始高度的一半（这使最终图像完全脱离绘图上下文的顶部）然后“向下”整个原始宽度，即最终图像高度。

```
const CGSize imageSize = image.size;
UIGraphicsBeginImageContext(CGSizeMake(imageSize.height, imageSize.width));

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextTranslateCTM(context, 0.5f * imageSize.width, 0.5f * imageSize.height ) ;
CGContextRotateCTM(context, -1.5707963267949) ;
[image drawInRect:(CGRect){ { imageSize.height * 0.5 - imageSize.width, -imageSize.width * 0.5f }, imageSize }];

UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext(); 
```

# javascript - 仅在单击父项后打开子菜单

> ID：15322016
> 
> 赞同：3
> 
> 时间：2013-03-10T12:07:01.543
> 
> 标签：javascript, jquery, css

我想我的问题以前已经回答过很多次了，但我找不到我的确切情况。

我有一个带有子菜单的垂直菜单，我只想在单击父级（而不是悬停）时显示子菜单，一次只显示一个子菜单，在单击菜单外的某个位置后，我希望子菜单消失。

这就是我现在所拥有的——它基于现在的悬停。我尝试将 a:hover 更改为 a:active 之类的东西，但效果不佳（我的 CSS 不太好）。

```
    /* 容器 */
     #cssmenu > ul {
        显示：块；
        位置：相对；
      //宽度：190px；
      宽度：100%；
     }

        /* 包含链接的列表元素 */
           #cssmenu > ul li {
              显示：块；
              位置：相对；
              边距：0；
              填充：0；
              宽度：100%；  
           }

            /* 通用链接样式 */
            #cssmenu > ul li a {
                显示：块；
                位置：相对；
                边距：2；
                宽度：95%；
                高度：50 像素；
                背景颜色：#ABC578;
                左边框：实心 0px #FFFFFF;
                边框底部：实心 1px #FFFFFF;
                字体：0.7em Tahoma，无衬线；
                字体大小：14px；
                字体粗细：粗体；
                颜色：#FFFFFF；
                文字装饰：无；
                填充顶部：30px；
            }

            /* 菜单/子菜单链接的悬停状态 */
            #cssmenu > ul li>a:hover, #cssmenu > ul li:hover>a {
                颜色：#fff;
                文本阴影：0 1px 0 rgba(0, 0, 0, .3);
                背景：#82c500；
                背景：-webkit-linear-gradient（底部，#82c500，#000000）；
                背景：-ms-linear-gradient（底部，#82c500，#000000）；
                背景：-moz-linear-gradient（底部，#82c500，#000000）；
                背景：-o-线性渐变（底部，#82c500，#000000）；
                边框颜色：透明；
            }

            /* 指示子菜单的箭头 */
            #cssmenu > ul .has-sub>a::after {
                内容： '';
                位置：绝对；
                顶部：34px；
                右：8px；
                宽度：0px；
                高度：0px；

                /* 使用边框创建箭头 */
                边框：4px纯透明；
                左边框：4px 实心#d8d8d8；
            }

            /* 相同的箭头，但颜色更深，以创建阴影效果 */
            #cssmenu > ul .has-sub>a::before {
                内容： '';
                位置：绝对；
                顶部：35px；
                右：8px；
                宽度：0px；
                高度：0px；

                /* 使用边框创建箭头 */
                边框：4px纯透明；
                左边框：4px 实心#000；
            }

            /* 改变鼠标悬停时的颜色 */
            #cssmenu > ul li>a:hover::after, #cssmenu > ul li:hover>a::after {
                左边框：4px 实心#fff；
            }

            #cssmenu > ul li>a:hover::before, #cssmenu > ul li:hover>a::before {
                左边框：4px 实心 rgba(0, 0, 0, .3);
            }

            /* 子菜单 */
            #cssmenu > ul ul {
                位置：绝对；
                左：95%；
                宽度：100%；
                顶部：-9999 像素；
                左填充：5px；
                不透明度：0；
                /* 使用不透明过渡创建的淡入淡出效果 */
                -webkit-transition：不透明度 .2s 缓入；
                -moz-transition：不透明度 .2s 缓入；
                -o-transition：不透明度 .2s 缓入；
                -ms-transition：不透明度 .2s 缓入；
            }

            /* 当用户悬停父链接时显示子菜单 */
            #cssmenu > ul li:hover>ul {
                顶部：-2px；
                不透明度：1；
            }

```

请问有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:23:04.307

好的，我用它来解决我的问题：[如何检测元素外的点击？](https://stackoverflow.com/questions/152975/how-to-detect-)

现在我在网站的页脚中有这样的东西：

```
     $('html').click(function() {
            隐藏子菜单（）；
     });
     $("#cssmenu").click(函数(事件){
            event.stopPropagation();
     });

```

当我点击子菜单时，我调用显示子菜单的 subMenu 函数：

```
 <div id='cssmenu'>
    <ul>
      <li class='has-sub '><a href='#' onclick="subMenu('handleSubMenu1')">
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:09:27.240

据我所知，你不能单独使用 CSS 来做到这一点，你需要使用 javascript/jQuery。

# ruby - 为什么 RSpec 在从 ruby 中运行并重新加载规范文件时运行规范两次？

> ID：15322020
> 
> 赞同：4
> 
> 时间：2013-03-10T12:07:39.193
> 
> 标签：ruby, rspec, jruby, guard

我试图在现有的 ruby​​ 运行时中使用 RSpec，并在每次文件更改时运行规范。这是因为 JRuby 和 JVM 启动时间。为了在每次运行时消除这种情况，我想启动一次 ruby​​，然后只重新加载更改的文件并运行规范。我正在使用guard（带有不同的扩展）和watchr，但似乎都遇到了下面描述的问题。

我将问题归结为 RSpec 本身。`RSpec::Core::Runner.run`问题是，当通过多次运行 RSpec 时，它工作正常，直到使用`load`. 然后 RSpecs 开始运行规范两次。我创建了显示此问题的示例项目：[https ://github.com/mostr/rspec_double_run_issue](https://github.com/mostr/rspec_double_run_issue)

以下是示例输出：

```
ruby run_spec_in_loop.rb 
Running spec from within ruby runtime
.
Finished in 0.00047 seconds
1 example, 0 failures

loading spec file via 'load' as if it was changed and we wanted changes to be picked up
Running spec from within ruby runtime
..
Finished in 0.001 seconds
2 examples, 0 failures 
```

当从现有的 ruby​​ 运行时运行时，有什么方法可以告诉 RSpec 在后续运行之间清除其上下文？我也将此作为RSpec Core 项目的问题[#826提出。](https://github.com/rspec/rspec-core/issues/826)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T06:24:29.837

在这里总结答案，以便从“未回答”过滤器中删除此问题...

根据[RJHunter](https://stackoverflow.com/users/39223/rjhunter)的观察，解释已记录在此处的 GitHub RSpec Core 项目中：

[https://github.com/rspec/rspec-core/issues/826#issuecomment-15089030](https://github.com/rspec/rspec-core/issues/826#issuecomment-15089030)

对于后代（如果上述链接失效），以下是详细信息：

> RSpec 运行器已经在内部调用 load，您的第二个负载是导致双重运行问题的原因。
> 
> 我根据您的示例快速敲出一个脚本，该脚本重新运行单个规范文件，将规范更改为其他内容，然后重新运行它们，无需第二次加载即可正常工作
> 
> 见：[https ://gist.github.com/JonRowe/5192007](https://gist.github.com/JonRowe/5192007)

上述要点包含：

```
require 'rspec'

spec_file = 'spec/sample_spec.rb'

File.open(spec_file, 'w') { |file| file.write 'describe { specify { expect(true).to eq false } }' }

1.upto(5) do |i|
  puts "Running spec from within ruby runtime"
  ::RSpec::Core::Runner.run([spec_file], STDERR, STDOUT)

  #rewriting the spec file
  File.open(spec_file, 'w') { |file| file.write "describe { specify { expect(#{i}).to eq false } }" }

end 
```

# shell - -prune 在没有 OR(-o) 选项的情况下查找工作 - Unix

> ID：15322027
> 
> 赞同：0
> 
> 时间：2013-03-10T12:08:26.727
> 
> 标签：shell, scripting, aix

```
$pwd
/tmp
$touch 1.tst 2.tst
$mkdir inner_dir
$touch inner_dir/3.tst
$find . ! -name . -prune -name '*.tst'
1.tst
2.tst 
```

我想将“查找”限制为仅在当前目录中搜索具有“tst”扩展名的文件（我知道这可以使用“ls”命令完成，但想稍后添加其他“查找”过滤器，如 mtime）。我的问题是上面的“发现”是如何工作的？为什么以下不起作用（使用 OR 选项）？

```
find . ! -name . -prune -o -name '*.tst' 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:43:26.917

> -prune 始终计算值为 True。如果它是一个目录，则停止当前路径名的下降。如果指定了 -depth 标志，则忽略 -prune 标志。

我想如果你玩它，你可以弄清楚它在做什么。

例如

```
find . ! -name . -prune 
```

给

```
./1.tst
./2.tst
./d 
```

我们不会因为修剪而进入 ./d ——“停止下降……”。然后通过 -name '*.tst' 过滤剩下的内容，使其成为顶级目录中的列表文件。

高温高压

# vb.net - 绑定到组合框但 vb.net 中的错误“对象引用...”

> ID：15322031
> 
> 赞同：0
> 
> 时间：2013-03-10T12:09:05.050
> 
> 标签：vb.net, object, data-binding, binding, combobox

我想与组合框绑定。但这是错误**“对象引用未设置为对象的实例”。**

**此代码：**

```
Private Sub cbSection_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cbSection.SelectedIndexChanged
        Dim Find As Boolean = False
        Dim ds2 As New DataSet
        Dim sb2 As New StringBuilder
        Dim da2 As New SqlDataAdapter

        sb2.Remove(0, sb2.Length)
        sb2.Append("SELECT DISTINCT Team")
        sb2.Append(" FROM Employee")
        sb2.Append(" WHERE (Section='" & cbSection.SelectedValue & "')")
        sb2.Append(" ORDER BY Team")
        Dim sqlTeam As String = sb2.ToString()

        If Find = True Then
            ds2.Tables("Team").Clear() >>>>>>> This Error
        End If

        da2.SelectCommand.CommandText = sqlTeam
        da2.Fill(ds2, "Team")
        If ds2.Tables("Team").Rows.Count <> 0 Then
            Find = True
            With cbTeam
                .DisplayMember = "Team"
                .ValueMember = "Team"
                .DataSource = ds2.Tables("Team")
            End With
        Else
            Find = False
        End If
    End Sub 
```

我检查对象它是正确的。但现在出错了。

谢谢你的时间。:)

# php - 重新声明类错误

> ID：15322032
> 
> 赞同：0
> 
> 时间：2013-03-10T12:09:05.913
> 
> 标签：php, html, php-5.2

我有这三个文件： index.php：

```
<div class="tweet_bx">
     <form method="post" name="m_gigs" id="m_gigs" enctype="multipart/form-data"  action="index.php">
       <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td width="17%"><strong>Filter gigs by</strong></td>
        <td class="<?php echo $class1;  ?>" width="8%" align="center" ><a class="cuuuent" href="index.php?gigs=latest" >Latest</a></td>
        <td class="<?php echo $class2;  ?>" width="15%" align="center"><a href="index.php?gigs=popular">Most Popular</a></td>
        <td class="<?php echo $class3;  ?>" width="15%" align="center"><a href="index.php?gigs=rating" >Best Ratings</a></td>

      </tr>
    </table>
    <table>
    <?php
    include('Sql.php');
    $c = new connexion();
    $videos= $c->getVideos();
    for($i=0;$i<sizeof($videos); $i++)
    {
    ?>
    <tr><td colspan = "2"><img src="<?php echo $videos[$i]['image']; ?> " /></td>
         <td><label color="blue"><?php echo $videos[$i]['titre']; ?></label></td>

    </tr>
    <tr>
    <td><label color="blue"><?php echo $videos[$i]['description']; ?></label></td>
    </tr>

    <?php
    }
    ?>

    </table>

    </form>
    </div>

    <div class="tweet_bx">
    <?php

    ?>

    </div>
    </div>
    <?php include('right.php'); ?>
    </div> 
```

文件 right.php：

```
<div class="right_box">
<div class="right_box_center">
<ul>
<?php
include('Sql.php');

$c = new connexion();
$categories = $c->getCategories();
for($i=0;$i<sizeof($categories) ; $i++){

?>
<li><a href="index.php?categorie=<?php  echo $categories[$i]['categorie'];?>"><?php  echo $categories[$i]['categorie'];?></a> </li>

  <?php
  }
  ?>
   </ul>
   </div>
<img align="middle" src="images/img.jpg" />
<a href="javascript:popup()"> <img align="middle" src="images/invite.jpg" style="padding-left:32px;" /></a>

</div> 
```

最后是文件 sql.php：

```
<?php
class connexion {
    function __construct(){
    $HOST_DB ="mysql11.000webhost.com";
    $NAME_DB="a1638637_fiverr";
    $USER_DB ="a1638637_afif";
    $PWD_DB="azerty2012";
     $connect = mysql_connect($HOST_DB,$USER_DB,$PWD_DB) or die();
      $db=mysql_select_db($NAME_DB);
      }
    //Registration part  
 function register($email,$login,$pass){
 $verif_email= $this->exists($email,0);
 $verif_user = $this->exists($user,1);
 if(!$verif_email && !$verif_user){
                               $requete_insert_tem  ="INSERT INTO member (`email`,`user`,`password`) VALUES ('".$email."', '".$login."','".$pass."'); ";
                               mysql_query($requete_insert_tem) or die();
                               return true;
                                }
else return false;                              

 }

function exists($attribut,$number){
if($number==0){
$Log_query=mysql_query("SELECT * FROM  member WHERE email ='$attribut'") or die(mysql_error());
if ($Log_query == true && mysql_num_rows($Log_query) >0)return true;
else return false;                  
}
if($number==1){
$Log_query=mysql_query("SELECT * FROM  member WHERE user ='$attribut'") or die(mysql_error());
if ($Log_query == true && mysql_num_rows($Log_query) >0)return true;
else return false;  
}
}

//login part
function login($attr, $pass){
 $verif_email= $this->exists($attr,0);
 $verif_user = $this->exists($attr,1);
 if($verif_email){
 $Log_query=mysql_query("SELECT * FROM  member WHERE email ='$attr' AND password = '$pass'") or die(mysql_error());
 if ($Log_query == true && mysql_num_rows($Log_query) >0) {
                        $p=0;
                          while ($Res_user = mysql_fetch_array($Log_query) ) {
                        $marques[$p] = $Res_user;
                        $p++;
                        }
                        }
                return $marques;
 }
 if($verif_user){
 $Log_query=mysql_query("SELECT * FROM  member WHERE user ='$attr' AND password = '$pass'") or die(mysql_error());
 if ($Log_query == true && mysql_num_rows($Log_query) >0) {
                        $p=0;
                          while ($Res_user = mysql_fetch_array($Log_query) ) {
                        $marques[$p] = $Res_user;
                        $p++;
                        }
                        }
                return $marques;
 }
 return null;

}

function getCategories(){
$Log_query=mysql_query("SELECT distinct(categorie) FROM  video ") ;
if ($Log_query == true && mysql_num_rows($Log_query) >0) {
                        $p=0;
                          while ($Res_user = mysql_fetch_array($Log_query) ) {
                        $marques[$p] = $Res_user;
                        $p++;
                        }
                        }
                return $marques;
}

function getVideos(){
$Log_query=mysql_query("SELECT * FROM  video ") ;
if ($Log_query == true && mysql_num_rows($Log_query) >0) {
                        $p=0;
                          while ($Res_user = mysql_fetch_array($Log_query) ) {
                        $marques[$p] = $Res_user;
                        $p++;
                        }
                        }
                return $marques;

}

}
?> 
```

我有这个错误：`Fatal error: Cannot redeclare class connexion in /home/a1638637/public_html/Sql.php on line 2`。但我没有重新声明班级联系！
我认为问题出在 right.php 文件中，因为：

*   正确的部分不起作用
*   出现错误
    以修复此错误我需要知道
*   错误是什么？
*   我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:11:55.693

您需要使用`require_once`而不是`include`. SQl.php 文件被读取和解析两次，因此它试图重新声明一个已经声明的类。使用 require_once 这不会发生。

# python - python 3.3中的特殊字符

> ID：15322033
> 
> 赞同：-1
> 
> 时间：2013-03-10T12:09:10.127
> 
> 标签：python, unicode, special-characters, decoder

我正在尝试做一个小型解码器。
我想将值分配给`'a'`特殊字母`"("`
示例：`( = "a"`
如果我输入`"("`它会打印它`"a"`：

如果我输入`"(%!)("`：

它为每个字符打印等效项，例如：

```
LadyBa 
```

希望你明白我的意思！
我知道它需要 unicode 或类似的东西，但我不太擅长
我正在尝试学习的 python。
在 windows python 3.3 上工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:20:31.753

你可以使用`str.translate`：

```
In [7]: trans = str.maketrans("(","a")

In [8]: "(bcd(".translate(trans)
Out[8]: 'abcda' 
```

> S.translate(table [,deletechars]) -> 字符串
> 
> 返回字符串 S 的副本，其中删除可选参数 deletechars 中出现的所有字符，其余字符已通过给定转换表映射，该转换表必须是长度为 256 或 None 的字符串。如果 table 参数为 None，则不应用任何转换，并且该操作只是删除 deletechars 中的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:16:33.960

编辑：这很好，感谢 Ashwini Chaudhary

```
>>> d = {'(': 'a'}
>>> "".join(d.get(x,x) for x in 'text with m(ny letters')
'text with many letters' 
```

这是一个更长的解决方案，但等效：

所以你想翻译信件并保持你不知道的事情不变吗？

```
>>> d = {'(': 'a'}
>>> ''.join(map(lambda letter: d.get(letter, letter), 'text with m(ny letters'))
'text with many letters' 
```

**解释**

* * *

这

```
d.get(letter, letter) 
```

尝试查找 d 中的字母，如果不存在则返回字母（第二个字母）

* * *

```
lambda letter: lalala 
```

是相同的

```
def f(letter):
    return lalala
f # return f 
```

* * *

```
map(function, list) 
```

做这个：

```
[function(element) for element in list] 
```

这是一个简短的形式

```
l = []
for element in list:
    l.append(function(element))
l # returns that list 
```

* * *

```
''.join(list) 
```

是相同的

```
string = ''
for element in list:
    string += element
string # return string as result 
```

# java - 如何仅对 Java 中 ArrayList 中的内容执行操作？

> ID：15322034
> 
> 赞同：-1
> 
> 时间：2013-03-10T12:09:12.867
> 
> 标签：java, arraylist, minecraft

这是我之前的问题的重写，因为我被告知它太长了。

```
if(/*This is where I need something*/)
{
    mc.thePlayer.swingItem();
    mc.playerController.attackEntity(mc.thePlayer, e);
    delay = 0;
    break;
} 
```

这是 Minecraft 中 KillAura 代码的一部分。我正在努力使它不针对我制作的朋友列表中的人。该列表是一个名为“friendslist”的 ArrayList，位于名为 Variables.java 的文件中。如果有人能向我解释我如何使它不针对我的朋友列表中的人，我将非常感激。请保持简洁，因为我对 java 比较陌生。

提前致谢。

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:12:34.607

一个`ArrayList`对象有一个名为 的方法`contains`。使用此方法，您可以测试对象是否是集合的一部分。阅读[文档](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。

**工作示例**

```
ArrayList<People> people = new ArrayList<People>();
// Define the collection.
People p = new People("Dave");
// Create a new test object.
people.add(p);
// Add the object to the collection.
if(people.contains(p))
{
    // Will print out, because P exists within the people collection.
    System.out.println("Object exists in the collection");
} 
```

## 改进我的原始答案

正如评论中所建议的，鉴于这是一个游戏的比较算法，您可能需要对其进行更多优化。考虑到这一点，我想到了使用[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)。

**HashMap 示例**

```
HashMap<String, Person> friends = new HashMap<String, Person>();
// Create the HashMap object.
Person p = new Person("Dave");
// Create a test object, with the name "Dave".
String key = p.getName();
// Get a key. In this case, the object's name.
friends.put(key, p);
// Add the person to the collection. 
```

使用此代码，您现在在 HashMap 集合中有一个人。现在，当有人走进你的“攻击光环”时，你可以简单地得到那个人的名字，然后检查你的 HashMap 中是否存在一个键。这快速（O(1) 复杂度）且准确，最重要的是，您正在比较自定义值；不是同一个对象。因此，用户可以回收他们的对象并仍然存储在您的收藏中。

希望这个编辑会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:12:01.950

为了查找对象是否不在列表中，请使用：

```
if (!friendslist.contains(otherPlayer)) 
```

`friendslist`你的朋友列表在哪里`otherPlayer`，如果在你的朋友列表中，它是一个玩家。

您可以阅读有关[列表](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)和[数组列表的更多信息](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:14:03.980

很难说出所有的部分是什么，但是如果 friendslist 是一个包含玩家对象的数组列表，并且 thePlayer 是您要检查的那个，那么

```
if (!(friendslist.contains(mc.thePlayer))) 
```

# joomla - Joomla 2.5 后端使用 jquery 和 JFormField 添加自定义字段

> ID：15322035
> 
> 赞同：1
> 
> 时间：2013-03-10T12:09:17.957
> 
> 标签：joomla, module

我在开发 joomla(2.5) 模块时遇到了问题。我有具有自定义字段类型添加位置的 xml 文件。

```
<fieldset name="addLocations" label="Add Locations" addfieldpath="/modules    /mod_pr_weather/elements">
    <field type="addlocation" name="locations"></field>
</fieldset> 
```

并且有 addlocation.php 文件，

```
<?php

defined('JPATH_BASE') or die;

jimport('joomla.form.formfield');

class JFormFieldAddlocation extends JFormField {
protected $type = 'Addlocations';
protected function getInput() {

$addFrom = '<div id="pr_maindiv">  <h1>'.JText::_('MOD_PR_WEATHER_HEADER_ADD_LOCATION').'</h1>'.$this->getForm("single").'</div>';
    $addFromBlock = '<div id="pr_maindiv_b" style="clear:both;"><h1>'.JText::_('MOD_PR_WEATHER_HEADER_ADD_LOCATION').'</h1>'.$this->getForm("multi").'</div>';

    $doc = JFactory::getDocument();

    $doc->addScriptDeclaration('

            jQuery(document).ready(function(){
                     jQuery("#pr_maindiv_b").css("display","none");
                    jQuery("#jform_params_slideshow_style").change(function(){
                            if(jQuery(this).val()==2){
                              jQuery("#pr_maindiv").css("display","none");
                            jQuery("#pr_maindiv_b").css("display","block");
                                }else{
                                jQuery("#pr_maindiv").css("display","block");
                                jQuery("#pr_maindiv_b").css("display","none");
                                }
                        });

                });

            ');
    return $addFrom . $addFromBlock;
}

private function getForm($type = 'single') {
    $form_type_tooltip =  'class="hasTip" title="' . JText::_('MOD_PR_WEATHER_ADDLOCATION_TOOLTIP') . '"';
    $from='';   
        if ($type=='single') {
            $from = '<p><label'.$form_type_tooltip.'>'.JText::_('MOD_PR_WEATHER_ADDLOCATION_LABEL').'</label></p><p><input type="text" value="GEOLOCATION" placeholder="GEOLOCATION" name="single_location"/></p>
                     <p><input type="button" id="addMore" value="more"></p>';
        }else{

            $from = '<div style="clear:both;" id="first"><h3>Frist Block</h3><p><label'.$form_type_tooltip.'>'.JText::_('MOD_PR_WEATHER_ADDLOCATION_LABEL').'</label></p><p><input type="text" value="GEOLOCATION" placeholder="GEOLOCATION" name="first_block_loc"/></p>
                     <p><input type="button" id="addMoreFrist" value="more"></p></div>';
            $from .= '<div style="clear:both;" id="second"><h3>Second Block</h3><p><label'.$form_type_tooltip.'>'.JText::_('MOD_PR_WEATHER_ADDLOCATION_LABEL').'</label></p><p><input type="text" value="GEOLOCATION" placeholder="GEOLOCATION" name="second_block_loc"/></p>
                     <p><input type="button" id="addMoreSecond" value="more"></p></div>';
            $from .= '<div style="clear:both;" id="third"><h3>Third Block</h3><p><label'.$form_type_tooltip.'>'.JText::_('MOD_PR_WEATHER_ADDLOCATION_LABEL').'</label></p><p><input type="text" value="GEOLOCATION" placeholder="GEOLOCATION" name="third_block_loc"/></p>
                     <p><input type="button" id="addMoreThird" value="more"></p></div>';
            $from .= '<div style="clear:both;" id="fourth"><h3>Fourth Block</h3><p><label'.$form_type_tooltip.'>'.JText::_('MOD_PR_WEATHER_ADDLOCATION_LABEL').'</label></p><p><input type="text" value="GEOLOCATION" placeholder="GEOLOCATION" name="fourth_block_loc"/></p>
                     <p><input type="button" id="addMoreFourth" value="more"></p></div>';
        }
        return $from;
}
} 
```

以及用于按钮类型触发的 js 文件：

```
jQuery("#addMore").click(function(){
jQuery("#pr_maindiv").append("<p style='clear:both;'><input type='text'       value='GEOLOCATION' placeholder='GEOLOCATION' name='single_location[]'/></p>");
});
jQuery("#addMoreFrist").click(function(){
jQuery("div#first").append("<p style='clear:both;'><input type='text'         value='GEOLOCATION' placeholder='GEOLOCATION' name='first_block_loc[]'/></p>");
});
jQuery("#addMoreSecond").click(function(){
jQuery("div#second").append("<p style='clear:both;'><input type='text'     value='GEOLOCATION' placeholder='GEOLOCATION' name='second_block_loc[]'/></p>");
});
jQuery("#addMoreThird").click(function(){
jQuery("div#third").append("<p style='clear:both;'><input type='text'     value='GEOLOCATION' placeholder='GEOLOCATION' name='third_block_loc[]'/></p>");
});
jQuery("#addMoreFourth").click(function(){
jQuery("div#fourth").append("<p style='clear:both;'><input type='text'     value='GEOLOCATION' placeholder='GEOLOCATION' name='fourth_block_loc[]'/></p>");
}); 
```

当按钮类型的点击事件发生时，完美地追加到后端表单中。但是当保存点击时，每个xml字段类型值都保存了，但自定义字段类型不保存到数据库参数列中。为什么？如果我的问题不清楚，请通知我上传完整文件。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T11:05:40.903

如果在定义字段时在 addlocation.php 中将字段名称设置为 **name="jform[first_block_loc]"** ，那么它必须将值存储在 params 列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:20:18.823

Joomla 只会存储来自您在 xml 定义中提供的名称的输入字段的结果：因此您的 jquery 应该绑定到更改或表单的提交和连接/连接您添加的值并将这些值存储在名为“位置”的字段中。Onload，您应该有相反的情况，即根据位置的值填充自定义字段（这可以通过 php 轻松实现）。

# html - 使用css溢出滚动div内容

> ID：15322039
> 
> 赞同：0
> 
> 时间：2013-03-10T12:09:30.910
> 
> 标签：html, css

我刚刚开始学习 html 和 css，我正在尝试创建一个简单的静态网站。我的问题是我正在尝试`option2`使用 css 使 div container() 滚动`overflow:auto`。

`overflow:auto`问题是当生效时，内部 div 会错位、重叠等。`#box2`是 的内部 div `#option2`。`#box2text`是 div 的内部`#box2`div。

## HTML

```
<div id="option2">
    <div id="box2">
        <img class="pic1" src="img/button top/user1.png"></img>
        <div id="box2text">Text for updates, news, events, ect.</div>
    </div>
    <div id="box2">
        <img class="pic1" src="img/button top/user1.png"></img>
        <div id="box2text">Text for updates, news, events, ect.</div>
    </div>
    <div id="box2">
        <img class="pic1" src="img/button top/user1.png"></img>
        <div id="box2text">Text for updates, news, events, ect.</div>
    </div>
    <div id="box2">
        <img class="pic1" src="img/button top/user1.png"></img>
        <div id="box2text">Text for updates, news, events, ect.</div>
    </div>
</div> 
```

## CSS

```
#option2 {
    height:90%;
    width:35%;
    margin-left:0;
    margin-right:5%;
    margin-top:2%;
    min-height:90%;
    position:apsolute;
    float:left;
    text-align:center;
    overflow:auto;
    display:block;
    -moz-border-radius: 15px;
    border-radius: 15px;
    border:solid white;
}
#box2 {
    height:25%;
    width:90%;
    float:center;
    text-align:center;
    margin:0 auto;
    margin-top:15px;
    margin-bottom:5px;
    bottom:0px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    border:solid white;
}
img.pic1 {
    float:left;
    height:80px;
    width: 80px;
    margin-left:20px;
    margin-top:20px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    border:solid white;
}
#box2text {
    float:right;
    height:80%;
    width:65%;
    margin-right:1%;
    margin-top:20px;
    background-color:grey;
    -moz-border-radius: 15px;
    border-radius: 15px;
    border:solid white;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:21:17.647

我能看到的唯一问题是在#option2 的css 中，您`absolute`拼写错误并且您尝试使用浮点值`center`。要水平居中元素，请使用

```
margin-left: auto; 
margin-right: auto 
```

此外，一个 id 只能使用一次。虽然它通常不会影响浏览器呈现 HTML 的方式，但根据 HTML 标准它是不正确的。拥有多个具有相同 id 的元素会在浏览器中引起混乱，尤其是当您想使用 JavaScript 来操作这些元素时。

请参阅此 jsfiddle 并`absolute`更正：http: [//jsfiddle.net/qpkJV/1/](http://jsfiddle.net/qpkJV/1/)

# c++ - 我可以从缓冲区初始化 iostream 而不复制它吗？

> ID：15322045
> 
> 赞同：1
> 
> 时间：2013-03-10T12:09:50.343
> 
> 标签：c++, iostream

我有一个`unsigned char *buffer`充满`size`字节的缓冲区。我想从中初始化一个流。

我可以这样做，它复制缓冲区字节：

```
string s(bytes, bytes + size);
stringstream ss(s); 
```

我想知道我是否可以在没有该副本的情况下启动流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:08:46.560

您需要实现一个自定义`streambuf`，然后将其传递给`istream`构造函数。这将允许您像访问任何其他流一样访问数组数据。有关详细信息，请参阅以下链接：

1.  [std::streambuf](http://www.cplusplus.com/reference/streambuf/streambuf/)
2.  [标准::istream](http://www.cplusplus.com/reference/istream/istream/)

Boost 提供了 iostreams 库来帮助解决这个问题。特别是，它已经提供了`array_source`用于包装标准数组的类。以下代码示例说明了如何完成此操作：

```
#include <cstdlib>
#include <iostream>
#include <string>

#include <boost/iostreams/stream_buffer.hpp>
#include <boost/iostreams/device/array.hpp>

namespace io = boost::iostreams;

int main(int argc, char* argv[]) {
    const char buffer[] = "buffer data\n";

    io::array_source src{ buffer, strlen(buffer) };
    io::stream_buffer<io::array_source> strbuf{ src };

    std::istream stream{ &strbuf };
    std::string line;
    std::getline(stream, line);
    std::cout << line << std::endl;
    return EXIT_SUCCESS;
} 
```

# android - 尝试在 gridview 中查看保存的相机图片时收到警告

> ID：15322054
> 
> 赞同：3
> 
> 时间：2013-03-10T12:10:52.200
> 
> 标签：android, gridview, android-camera, filenotfoundexception

我将在我的项目中使用相机/画廊。为此，我首先拍照并将其保存在我的文件夹中（假设图片世界），并将 imageuri 保存在本地数据库中。然后，当我试图让图片在 gridview 中显示时，我收到一条警告消息。在gridview中没有图片但可以查看图片名称。我已经检查过它正在创建图片，并且本地数据库中的 uri 也是正确的。我想补充一点，当我尝试使用图库保存图片时..没有问题。我使用相同的适配器来查看保存的画廊和相机图片。我在这里附上警告：

```
03-10 17:48:11.367: W/System.err(522):  at libcore.io.IoBridge.open(IoBridge.java:406)
03-10 17:48:11.367: W/System.err(522):  at java.io.FileInputStream.<init>(FileInputStream.java:78)
03-10 17:48:11.367: W/System.err(522):  at java.io.FileInputStream.<init>(FileInputStream.java:105)
03-10 17:48:11.367: W/System.err(522):  at android.content.ContentResolver.openInputStream(ContentResolver.java:369)
03-10 17:48:11.367: W/System.err(522):  at android.provider.MediaStore$Images$Media.getBitmap(MediaStore.java:705)
03-10 17:48:11.367: W/System.err(522):  at hr.s2is.ischool.admin.adapter.CommunityUserAdapter.getView(CommunityUserAdapter.java:71)
03-10 17:48:11.367: W/System.err(522):  at android.widget.AbsListView.obtainView(AbsListView.java:2033)
03-10 17:48:11.367: W/System.err(522):  at android.widget.GridView.makeAndAddView(GridView.java:1323)
03-10 17:48:11.377: W/System.err(522):  at android.widget.GridView.makeRow(GridView.java:328)
03-10 17:48:11.377: W/System.err(522):  at android.widget.GridView.fillDown(GridView.java:281)
03-10 17:48:11.377: W/System.err(522):  at android.widget.GridView.fillFromTop(GridView.java:403)
03-10 17:48:11.377: W/System.err(522):  at android.widget.GridView.layoutChildren(GridView.java:1215)
03-10 17:48:11.377: W/System.err(522):  at android.widget.AbsListView.onLayout(AbsListView.java:1863)
03-10 17:48:11.377: W/System.err(522):  at android.view.View.layout(View.java:11278)
03-10 17:48:11.377: W/System.err(522):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
03-10 17:48:11.377: W/System.err(522):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:925)
03-10 17:48:11.387: W/System.err(522):  at android.view.View.layout(View.java:11278)
03-10 17:48:11.387: W/System.err(522):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
03-10 17:48:11.387: W/System.err(522):  at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
03-10 17:48:11.387: W/System.err(522):  at android.view.View.layout(View.java:11278)
03-10 17:48:11.387: W/System.err(522):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
03-10 17:48:11.387: W/System.err(522):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
03-10 17:48:11.397: W/System.err(522):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
03-10 17:48:11.397: W/System.err(522):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
03-10 17:48:11.397: W/System.err(522):  at android.view.View.layout(View.java:11278)
03-10 17:48:11.397: W/System.err(522):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
03-10 17:48:11.397: W/System.err(522):  at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
03-10 17:48:11.397: W/System.err(522):  at android.view.View.layout(View.java:11278)
03-10 17:48:11.397: W/System.err(522):  at android.view.ViewGroup.layout(ViewGroup.java:4224)
03-10 17:48:11.407: W/System.err(522):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1489)
03-10 17:48:11.407: W/System.err(522):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
03-10 17:48:11.407: W/System.err(522):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-10 17:48:11.407: W/System.err(522):  at android.os.Looper.loop(Looper.java:137)
03-10 17:48:11.407: W/System.err(522):  at android.app.ActivityThread.main(ActivityThread.java:4424)
03-10 17:48:11.407: W/System.err(522):  at java.lang.reflect.Method.invokeNative(Native Method)
03-10 17:48:11.417: W/System.err(522):  at java.lang.reflect.Method.invoke(Method.java:511)
03-10 17:48:11.417: W/System.err(522):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-10 17:48:11.417: W/System.err(522):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-10 17:48:11.417: W/System.err(522):  at dalvik.system.NativeStart.main(Native Method)
03-10 17:48:11.417: W/System.err(522): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
03-10 17:48:11.427: W/System.err(522):  at libcore.io.Posix.open(Native Method)
03-10 17:48:11.427: W/System.err(522):  at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
03-10 17:48:11.427: W/System.err(522):  at libcore.io.IoBridge.open(IoBridge.java:390) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:44:06.370

您是否已授予读取本地存储的权限？您应该检查是否在 Android Manifest 中声明了有关写入和读取内部存储的任何权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:02:17.870

你添加权限了吗

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

还有一件事：

使用 sdk，您无法写入内部存储的根目录。这会导致您的错误。尝试这样的事情

```
final File dir = new File(context.getFilesDir() + "/nfs/guille/groce/users/nicholsk/workspace3/SQLTest");
dir.mkdirs(); //create folders where write files
final File file = new File(dir, "BlockForTest.txt"); 
```

# c# - Task.ContinueWith() 与 2 个任务？

> ID：15322057
> 
> 赞同：1
> 
> 时间：2013-03-10T12:11:11.420
> 
> 标签：c#, .net-4.0, task-parallel-library

我应该什么时候使用

```
Task task1 = Task.Factory.StartNew (() => {...})
                 .ContinueWith (ant => Console.Write ("2")); 
```

对比

```
Task task1 = Task.Factory.StartNew (() => {... });
Task task2 = task1.ContinueWith (ant => Console.Write ("2")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T12:19:10.713

它的含义相同，只是您现在将参考第二个任务。如果第一个任务在执行所有任务之前需要一些处理，则可以使用第二个选项。一个例子是添加另一个`var task3 = task1.ContinueWith()`，因此任务二和三将同时执行，但前提是第一个任务完成处理。其实应该是：

```
Task task2 = Task.Factory.StartNew (() => {...}).ContinueWith (ant => Console.Write ("2"));

Task task1 = Task.Factory.StartNew (() => {... });
Task task2 = task1.ContinueWith (ant => Console.Write ("2")); 
```

注意我替换`task1`为`task2`. 启动任一任务将导致`task1`首先启动。

# c++ - 是否存在函数指针未涵盖的 std::function 用例，或者它只是语法糖？

> ID：15322058
> 
> 赞同：12
> 
> 时间：2013-03-10T12:11:12.120
> 
> 标签：c++, c++11, c++-standard-library, std-function

与函数指针相比​​，std::function 的符号非常好。但是，除此之外，我找不到不能用指针替换它的用例。那么它只是函数指针的语法糖吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-10T12:18:45.890

`std::function<>`为您提供了封装**任何类型的可调用对象**的可能性，这是函数指针无法做到的（尽管确实可以将*非捕获*lambda 转换为函数指针）。

为了让您了解它允许您实现的灵活性：

```
#include <functional>
#include <iostream>
#include <vector>

// A functor... (could even have state!)
struct X
{
    void operator () () { std::cout << "Functor!" << std::endl; }
};

// A regular function...
void bar()
{
    std::cout << "Function" << std::endl;
}

// A regular function with one argument that will be bound...
void foo(int x)
{
    std::cout << "Bound Function " << x << "!" << std::endl;
}

int main()
{
    // Heterogenous collection of callable objects
    std::vector<std::function<void()>> functions;

    // Fill in the container...
    functions.push_back(X());
    functions.push_back(bar);
    functions.push_back(std::bind(foo, 42));

    // And a add a lambda defined in-place as well...
    functions.push_back([] () { std::cout << "Lambda!" << std::endl; });

    // Now call them all!
    for (auto& f : functions)
    {
        f(); // Same interface for all kinds of callable object...
    }
} 
```

像往常一样，[在这里看一个活生生的例子](http://liveworkspace.org/code/4sAas7$67)。除其他外，这使您可以实现[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-10T12:23:16.010

`std::function`旨在表示任何类型的可调用对象。有很多可调用对象不能用函数指针以任何方式表示。

1.  一个函子：

    ```
    struct foo {
      bool operator()(int x) { return x > 5; }
    };

    bool (*f1)(int) = foo(); // Error
    std::function<bool(int)> f2 = foo(); // Okay 
    ```

    您不能创建实例`foo`并将其存储在`bool(*)(int)`函数指针中。

2.  带有*lambda-capture*的 lambda ：

    ```
    bool (*f1)(int) = [&](int x) { return x > y; }; // Error
    std::function<bool(int)> f2 = [&](int x) { return x > y; }; // Okay 
    ```

    但是，没有捕获的 lambda 可以转换为函数指针：

    > 没有 lambda-capture 的 lambda 表达式的闭包类型具有一个公共的非虚拟非显式 const 转换函数，该函数指向具有与闭包类型的函数调用运算符相同的参数和返回类型的函数的指针。这个转换函数返回的值应该是一个函数的地址，当被调用时，它与调用闭包类型的函数调用运算符具有相同的效果。

3.  实现定义的可调用返回值：

    ```
    bool foo(int x, int y) { return x > y; };

    bool (*f1)(int) = std::bind(&foo, std::placeholders::_1, 5); // Error (probably)
    std::function<bool(int)> f2 = std::bind(&foo, std::placeholders::_1, 5); // Okay 
    ```

    `std::bind`的返回值是实现定义的可调用对象。标准仅指定如何使用该对象，而不是其类型。

# python - 选择查询的一些问题

> ID：15322059
> 
> 赞同：0
> 
> 时间：2013-03-10T12:11:22.850
> 
> 标签：python, sql, python-2.7, web2py

我有 2 张桌子。第一个表是`auth_user`，我存储一些用户设置，并且有一列名为`foo`; 它是一个列表，看起来像：

```
row = db().select(db.auth_user.ALL).first()
print row.foo
## ['a','b'] 
```

在第二个表中`data_table`，我存储了一些信息，它有一个名为`book`. 我需要进行查询以从`data_table`哪里获取信息

```
data_table.book.lower() in row.foo == True 
```

这是我的代码：

```
 datab =  db((db.data_table.book.lower() in row.foo) == True).select(db.data_table.ALL, limitby=((int(page_number)-1)*50, int(page_number)*50)) 
```

但它没有排序，我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:44:41.043

使用[`.belongs()`](http://web2py.com/books/default/chapter/29/06#belongs)方法：

```
db.data_table.book.lower().belongs(row.foo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:44:55.580

认真考虑为这种事情编写存储过程。

# android - Android 应用程序包安装在手机上的什么位置

> ID：15322063
> 
> 赞同：28
> 
> 时间：2013-03-10T12:11:44.953
> 
> 标签：android, path, installation

我已经在我的手机上安装了一个我在 java 上创建的 Android 应用程序。该应用程序已成功安装在设备上，但我无法找到它已安装的软件包。

如何找到已安装应用程序的路径？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-10T12:13:33.447

您将在以下位置找到应用程序文件夹：

```
/data/data/"your package name" 
```

您可以使用模拟器的 DDMS 访问此文件夹。除非您有根设备，否则您无法在真实设备上访问此位置。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-03-14T12:36:54.840

系统应用已安装 /system/app/ 或 /system/priv-app。其他应用程序可以安装在 /data/app 或 /data/preload/ 中。

使用 USB 连接到您的 android 手机并运行以下命令。您将看到所有已安装的软件包。

```
$ adb shell 

$ pm list packages -f 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-10T12:14:29.747

安装在设备或模拟器上的应用程序将安装在：

```
/data/data/APP_PACKAGE_NAME 
```

APK 本身放置在该`/data/app/`文件夹中。

但是，这些路径位于系统分区中，要访问它们，您需要具有 root 权限。这是一个设备。在模拟器上，您可以在*文件资源管理器*选项卡的 logcat (DDMS) 中看到它

顺便说一句，它只显示在你`Manifest.XML`的`package="APP_PACKAGE_NAME"`属性下定义的包名。您在 Eclipse 项目中创建的任何其他包都不会显示在此处。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-12-28T21:01:46.170

-> 按以下方式列出所有包：

```
adb shell su 0 pm list packages -f 
```

-> 按住键“ctrl+alt+f”搜索您的包名称。

->找到后，查找与其关联的位置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-02T14:43:53.510

包本身位于`/data/app/com.company.appname-xxx.apk`.

`/data/app/com.company.appname`只是为存储本机库、缓存、ecc 等文件而创建的目录...

`Context.getPackageCodePath()`您可以使用函数调用检索包安装路径。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-10T12:14:32.973

```
/data/data/"your app package name " 
```

但是除非您有根设备，否则您将无法阅读

# c++ - 为什么不是 is_class 在这个代码段中工作？

> ID：15322065
> 
> 赞同：2
> 
> 时间：2013-03-10T12:11:55.757
> 
> 标签：c++, templates, c++11, typetraits

尝试在以下部分中使用 is_class （从较大的部分中删除），但它似乎不起作用。怎么了？

```
#include <type_traits>

template<typename U, typename = void>
struct xxxU_Impl
{
    static void xxxU_push (const U& value);
};

template<typename U> void xxxU_push (const U& value) { xxxU_Impl<U>::xxxU_push (value); }

template<typename U>
struct xxxU_Impl<U *, typename std::enable_if<std::is_class<U>::value>::type>
{
    static void xxxU_push (const U *& value) { }
};

class Foo
{
public:
    int mFoo;
};

int main () {
    Foo * pFoo = new Foo;

    xxxU_push<Foo *>(pFoo);
} 
```

这是 cygwin 上的 gcc v4.7.2 和 gcc -std=c++11 test.cpp 命令行。

输出是：

```
test.cpp: In instantiation of 'void xxxU_push(const U&) [with U = Foo*]':
test.cpp:26:23:   required from here
test.cpp:9:63: error: no matching function for call to 'xxxU_Impl<Foo*, void>::xxxU_push(Foo* const&)'
test.cpp:9:63: note: candidate is:
test.cpp:14:17: note: static void xxxU_Impl<U*, typename std::enable_if<std::is_class<_Tp>::value>::type>::xxxU_push(const U*&) [with U = Foo]
test.cpp:14:17: note:   no known conversion for argument 1 from 'Foo* const' to 'const Foo*&' 
```

**

## 更新

:** 这是带有注释的修改后的代码，恕我直言，这些类型现在是相同的。尽管如此，我还是遇到了编译错误。

```
#include <type_traits>

template<typename U, typename = void>
struct xxxU_Impl
{
    static void xxxU_push (const U  & value);   // U=Foo*:  const Foo* & value ==
                                                //          Foo const * & value
};

template<typename U> void xxxU_push (const U  & value)  // U=Foo*:  const Foo* & value ==
                                                        //          Foo const * & value
{ xxxU_Impl<U>::xxxU_push (value); }

template<typename U>
struct xxxU_Impl<U *, typename std::enable_if<std::is_class<U>::value>::type>
{
    static void xxxU_push (U const * & value) { }   // U=Foo:   Foo const * & value
};

class Foo
{
public:
    int mFoo;
};

int main () {
    Foo* pFoo = new Foo;

    xxxU_push<Foo*>(pFoo);
} 
```

怎么了？

谢谢，D

PS 与 is_enum 类似的方案可以在没有问题的情况下工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T12:30:42.977

该`std::is_class<>`特征工作正常，编译器几乎可以告诉您问题所在：

> `Foo* const`test.cpp:14:17：注意：参数 1 从到的未知转换`const Foo*&`

您正在以这种方式调用函数模板：

```
xxxU_push<Foo *>(pFoo); 
```

这意味着`U`将是`Foo*`. 现在函数签名：

```
template<typename U>
void xxxU_push (const U& value) 
```

相当于这个：

```
template<typename U>
void xxxU_push (U const& value) 
```

`Foo*`在为你替换之后`U`得到这个：

```
void xxxU_push (Foo* const& value) 
```

因此，`value`是对指向 a 的指针的常量引用`Foo`。在函数内部，您以这种方式实例化您的类模板：

```
xxxU_Impl<U>::xxxU_push (value); 
```

也就是说，当再次替换`Foo*`时`U`：

```
xxxU_Impl<Foo*>::xxxU_push (value); 
```

现在您的类模板专业化是这样定义的：

```
template<typename U>
struct xxxU_Impl<U *, typename std::enable_if<std::is_class<U>::value>::type>
{
    static void xxxU_push (const U *& value) { }
}; 
```

如果您将其`Foo*`作为模板参数进行实例化，`U`则将推断为 be `Foo`，这*是*一个类类型。因此，您的类模板被实例化而没有失败（不确定这是否是您想要的，但这肯定会发生），特别是`xxxU_push()`函数以这种方式实例化：

```
 static void xxxU_push (const Foo *& value) { } 
```

这相当于：

```
 static void xxxU_push (Foo const*& value) { } 
```

你能看到差别吗？在调用站点上，您有一个对非常量指针的常量引用，在这里您有一个对常量指针的非常量引用！这两种类型是不同的，编译器抱怨它不能转换参数。

例如，您可以通过更改以下签名来修复错误`xxxU_push()`：

```
static void xxxU_push (U * const& value) { }
//                     ^^^^^^^^^^ 
```

[更改后，您可以在此处](http://liveworkspace.org/code/4sAas7%2469)看到整个编译过程。

**更新：**

作为评论的后续，事实证明您一定希望`static`成员函数`xxxU_push()`接受指向的指针`const`：

```
 static void xxxU_push (Foo const*& value) { } 
```

在这种情况下，您必须做出决定：您不能将 a 传递`Foo*`给接受对指针的非常量*引用的函数。*`const`但是，您可以删除参考：

```
 static void xxxU_push (Foo const* value) { } 
```

这是使您的程序编译的第一种可能性。第二种可能性是更改调用站点，以便它提供指向`const`：

```
int main () {
    Foo * pFoo = new Foo;
    Foo const* pConstFoo = pFoo;
    xxxU_Impl<Foo*>::xxxU_push(pConstFoo);
//                             ^^^^^^^^^
} 
```

# c++ - 如何测量读取/周期或指令/周期？

> ID：15322066
> 
> 赞同：1
> 
> 时间：2013-03-10T12:11:55.960
> 
> 标签：c++, c, performance, caching, metrics

我想彻底测量和调整我的 C/C++ 代码，以便在 x86_64 系统上更好地使用缓存。我知道如何用计数器测量时间（我的 Windows 机器上的 QueryPerformanceCounter），但我想知道如何测量每个周期的指令或每个周期的读/写相对于工作集。

我应该如何继续测量这些值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T15:00:52.343

现代处理器（即那些不到 20 年的不受限制的处理器）是超标量的，即它们一次执行多条指令（给定正确的指令顺序）。最新的 x86 处理器将 CISC 指令转换为内部 RISC 指令，对它们重新排序并执行结果，甚至具有多个寄存器组，因此可以并行执行使用“相同寄存器”的指令。今天没有任何合理的方法来定义“指令执行所需的时间”。

当前的 CPU比内存*快得多*（几百条指令是访问内存的典型成本），它们都严重依赖缓存的性能。然后你会得到各种有趣的内核共享（或不共享）缓存部分的效果，......

调优代码以获得最大性能从软件架构开始，然后是程序组织、算法和数据结构选择（这里有一点缓存/虚拟内存意识也很有用）、仔细的编程和（作为最极端的措施来挤出最后 2% 的性能）考虑因素，比如你提到的那些（以及另一个最喜欢的，“在汇编中重写”）。排序是这样的，因为第一级以相同的成本提供了更多的性能。在挖掘之前先*测量，程序员是出了**名的*发现瓶颈不可靠。并考虑重组代码以提高性能的成本，无论是在工作本身，还是在说服自己这个复杂的代码是正确的，以及维护方面。考虑到计算机和人员的相对成本，极端的性能调整几乎没有任何意义（也许对于流行操作系统中经过大量旅行的代码路径，编译器生成的常见代码路径，但几乎没有其他地方）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:26:53.097

如果你真的对你的代码在哪里访问缓存以及它在哪里访问内存感兴趣，并且处理器在其设计中的使用时间不到 10-15 年，那么处理器中有性能计数器。您需要驱动级软件来访问这些寄存器，因此您可能不想为此编写自己的工具。幸运的是，您不必这样做。

有来自 Intel 的 VTune、来自 AMD 的 CodeAnalyst 和用于 Linux 的 oprofile 等工具（适用于 AMD 和 Intel 处理器）。

有一系列不同的寄存器可以计算实际完成的指令数，处理器等待的周期数。您还可以获得诸如“内存读取次数”、“缓存未命中数”、“TLB 未命中数”、“FPU 指令数”之类的计数。

下一个更棘手的部分当然是尝试解决这些问题中的任何一个，正如另一个答案中提到的那样，程序员并不总是擅长调整这些事情 - 而且这肯定很耗时，更不用说在 X 型处理器上运行良好的东西不一定在 Y 型上运行得很快（早期的 Pentium 4 有一些调整技巧在 AMD 处理器上工作得非常糟糕 - 另一方面，如果你为那个时代的 AMD 处理器调整代码，你得到的代码也能在同代英特尔处理器上运行良好！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:30:35.367

您可能对读取相对数量的周期的 rdtsc x86 指令感兴趣。

有关在许多编译器中读取计数器的实现，请参见[http://www.fftw.org/cycle.h 。](http://www.fftw.org/cycle.h)

但是，我建议简单地使用 QueryPerformanceCounter 进行测量。实际的周期数很少很重要，要调整代码，您通常只需要能够比较相对时间测量值，并且 rdtsc 有很多陷阱（尽管可能不适用于您描述的情况）：

*   在多处理器系统上，没有一个一致的周期计数器值。
*   现代处理器经常调整频率，改变相对于周期变化率的时间变化率。

# asp.net - 像 facebook 的主页一样分页

> ID：15322070
> 
> 赞同：1
> 
> 时间：2013-03-10T12:12:01.900
> 
> 标签：asp.net, scroll, paging

我有一个页面，里面有新闻。我不能只获取数据并在我的页面上显示 300 多个新闻。
所以我尝试`paging`了但在asp.net 分页中以前的记录不在页面上。**我想要`paging`类似`facebook's`主页**的东西，新记录出现在旧记录之后。我冲浪但找不到类似的东西。谁能帮我。我该怎么做？
一个或一个小费可能对我有用。

**注意：**
不同之处在于我希望在单击`see more news`底部的按钮时加载内容。感谢您的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:45:11.343

最后我使用了简单的分页而不是我想要的。我用了两个按钮来回。找不到我想要的解决方案。

# javascript - 如何从嵌入的 extern svg 文件初始化 d3 svg 元素并对其进行操作

> ID：15322071
> 
> 赞同：2
> 
> 时间：2013-03-10T12:12:10.357
> 
> 标签：javascript, d3.js, svg, embed

svg 文档作为文件嵌入。

svg 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="64px"
   height="64px"
   id="svgPic"
   version="1.1"
   inkscape:version="0.48.4 r9939"
   sodipodi:docname="New document 18">
  <g
     id="curvLayer"
     inkscape:label="Curv"
     inkscape:groupmode="layer">
    <path
       style="fill:none;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 2.0162099,44.937652 C 19.928085,44.362124 23.033712,29.671999 33.839655,29.657316 44.913406,29.332988 44.178722,15.232728 60.486296,15.244392"
       id="path4373"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
  </g>
</svg> 
```

这是带有 javascript 的 html，我尝试使用 d3 操作 svg。但没有成功。

```
<body>
  <embed src="berg4.svg" type="image/svg+xml" id="svgpic"/>

  <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>

  <script type="text/javascript" charset="utf-8">

     var subdoc = document.getElementById("svgPic").getSVGDocument();
     var curvLayer = subdoc.getElementById("curvLayer");
     var myPoint = d3.select("#curvLayer").append("svg:circle")
            .attr("cx", x) //e.g. x = 100
            .attr("cy", y) //e.g. y = 100
            .attr("r", 4.5);
  </script>
</body> 
```

问题是，如何在这个 svg 中添加一个像 circle 这样的新元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T21:04:41.320

诀窍是您需要为 D3 提供外部 svg 的根元素。这可以为您的示例完成，如下所示：

```
var svgRoot = document.getElementById('svgpic').getSVGDocument().documentElement;
d3.select(svgRoot).select("#curvLayer").append("circle")
                                           .attr("cx", 10)
                                           .attr("cy", 10)
                                           .attr("r", 4.5); 
```

显然对于 Firefox，您可能需要使用`contentDocument`而不是`getSVGDocument()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:20:05.223

我看到你的代码有两个问题：

1.  **选择你的元素：**你正在使用`document.getElementByID`with `D3.select`，这是不必要的 - 你可以使用[CSS 选择器选择](http://www.w3schools.com/cssref/css_selectors.asp)只有 D3 的元素：

    ```
    d3.select("#curvLayer") 
    ```

2.  **设置`cx`和`cy`属性：**您正在将附加的圆圈`cx`和`cy`属性设置为“x”和“y”，但这些之前没有在您的代码中定义。尝试设置为静态值或先定义 x 和 y：

    ```
    .append("circle")
        .attr("cx", 10)
        .attr("cy", 10)
        .attr("r", 4.5); 
    ```

jsfiddle 进行了这些更新：http: [//jsfiddle.net/qAHC2/308/](http://jsfiddle.net/qAHC2/308/)

# php - trim 期望参数是字符串

> ID：15322079
> 
> 赞同：-3
> 
> 时间：2013-03-10T12:13:08.233
> 
> 标签：php

我收到一条错误消息，说 trim() 期望参数 1 是字符串，给定数组。这是第二行：

```
 $page_result = $title_result->FetchRow();
        if (strlen(trim($page_result)) > 0)
            $this->body = stripslashes(urldecode($page_result['title_module_text']));
        else
            $this->body = ""; 
```

我认为 trim() 的第一个参数是一个字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:18:56.340

来自 MySQL 文档：`array mysql_fetch_row ( resource $result )`

“返回对应于获取行的数值数组，并将内部数据指针向前移动。”

查看[http://php.net/manual/de/function.mysql-fetch-row.php](http://php.net/manual/de/function.mysql-fetch-row.php)

```
<?php
$result = mysql_query("SELECT id, name FROM people WHERE id = '32'");
if (!$result) {
    echo 'Error: ' . mysql_error();
    exit;
}
$row = mysql_fetch_row($result);

echo $row[0]; // 32
echo $row[1]; // the name value
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T12:16:28.730

```
<?php
$page_result = $title_result->FetchRow();
$title_module_text = trim($page_result['title_module_text']);
if (strlen($title_module_text) > 0)
    $this->body = stripslashes(urldecode($title_module_text));
else
    $this->body = ""; 
```

# c - 快速排序算法行为异常

> ID：15322085
> 
> 赞同：2
> 
> 时间：2013-03-10T12:14:07.147
> 
> 标签：c, sorting, quicksort

这是一个尝试使用快速排序算法对数组进行排序的程序。一切似乎都很好，只是输出不正确。

（尝试 n=5 的程序，然后 n=10。它适用于前者，但不适用于后者。）

```
#include <stdio.h>
//#include <iostream.h>
//#include <conio.h>

int partition(int arr[], int left, int right)   {
    int i = left, j = right;
    int temp;

    //Choosing the middle element as the pivot
    //int pivot=arr[left];
    int pivot = arr[(left+right)/2];

    while (i <= j) {
        while (arr[i] < pivot) {i++;}
        while (arr[j] > pivot) {j--;}

        if (i <= j) {
            temp = arr[i];
            arr[i] = arr[j];
            arr[j] = temp;
            i++;
            j--;
        }
    }

    return i;
}

void quick_sort(int arr[], int p, int r)   {
    if (p<r)   {
       int q=partition(arr, p, r);
       quick_sort(arr, p, q-1);
       quick_sort(arr, q+1, r);
    }
}

int main()  {
    int values[100], n, i;

    //clrscr();

    printf("Enter no. of elements ");
    scanf("%d", &n);

    if (n>100) {
        printf("Invalid input. Exiting now");
        //getch();
        return 0;
    }

    for (i=0; i<100; i++) values[i]=0;

    printf("Enter the numbers\n");
    for (i=0; i<n; i++) scanf("%d", &values[i]);

    printf("The numbers you entered are\n");
    for (i=0; i<n; i++) printf("%d ", values[i]);

    printf("\n");

    quick_sort(values, 0, n-1);

    printf("Numbers after sorting are\n");
    printf("(The output might not be the expected one (Be careful).\n");
    for (i=0; i<n; i++) printf("%d ", values[i]);

    //std::cin.get();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:50:19.787

有两个问题。首先，比较`i <= j`是错误的。如果`i == j`，则不应将元素与其自身交换。`i < j`这应该在两个地方都改为。其次，您不应该在交换后移动`i`和数组索引。`j`如果它是最后一次交换，`i`则会超过实际的枢轴并导致您的错误。

```
int partition(int arr[], int left, int right)   {
    int i = left, j = right;
    int temp;

    //Choosing the middle element as the pivot
    //int pivot=arr[left];
    int pivot = arr[(left+right)/2];

    while (i < j) {
        while (arr[i] < pivot) {i++;}
        while (arr[j] > pivot) {j--;}

        if (i < j) {
            temp = arr[i];
            arr[i] = arr[j];
            arr[j] = temp;
        }
    }

    return i;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T15:18:49.267

最好使用 **algorithm.h**中的 std 排序：

[http://www.cplusplus.com/reference/algorithm/sort/](http://www.cplusplus.com/reference/algorithm/sort/)

# java - 无法在我的 java 文件中使用 jar 库

> ID：15322092
> 
> 赞同：0
> 
> 时间：2013-03-10T12:14:23.723
> 
> 标签：java

抱歉这个菜鸟问题，我是 Java 新手，我不想使用 IDE，而是想使用命令行来了解幕后运行的内容

[我正在关注MigLayout](http://www.miglayout.com)上的入门公会

```
#MigWindow.java

public class MigWindow {
    public static void main(){
        javax.swing.JPanel panel = new javax.swing.JPanel(new MigLayout());// a simple line to make sure the library jar import correctly 

    }

} 
```

并使用以下命令编译：

```
javac -cp ./MigLayout.jar MigWindow.java 
```

我得到了一个错误：

```
MigWindow.java:3: cannot find symbol
symbol  : class MigLayout
location: class MigWindow
        javax.swing.JPanel panel = new javax.swing.JPanel(new MigLayout());

                                                      ^
1 error 
```

似乎 jar 库没有正确导入，知道吗？

~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:16:42.363

确保添加导入`MigLayout`

```
import net.miginfocom.swing.MigLayout; 
```

这听起来很明显，但在此处`MigLayout.jar`调用时请确保当前目录`javac`以及您的 JAR 文件没有损坏。

**更新：**

要检查您的 JAR 文件*是否*包含您可以执行的类：

```
jar tvf MigLayout.jar 
```

并检查`MigLayout`班级。找不到课程，您可以从[这里](http://www.miglayout.com/)下载正确的课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:20:09.520

您的源文件中缺少导入语句。编译器不知道 'MigLayout' 来自哪里。

在您的文件顶部，但在您的`package`声明（如果有）下方添加一个导入，例如

```
import package.MigLayout; 
```

这告诉编译器从给定的类路径导入什么。您需要更换`package`正确的包装。

# java - 由两个不同的类加载器打破单例

> ID：15322093
> 
> 赞同：4
> 
> 时间：2013-03-10T12:14:26.673
> 
> 标签：java, design-patterns

我正在设计下面的单例类，我知道我的单例可能会被破坏

```
public class SingletonObject {
    private static SingletonObject ref;
    private SingletonObject () //private constructor
    { }

    public  static synchronized   SingletonObject getSingletonObject()
    {
        if (ref == null)
            ref = new SingletonObject();
                return ref;
        }

    public Object clone() throws CloneNotSupportedException
    {throw new CloneNotSupportedException ();
    }   
} 
```

下面的 url 已经建议了可以[用其他方式破解单例的](https://stackoverflow.com/questions/11654876/cracking-singleton-with-other-ways)地方，但我的疑问是，正如这个 url 中所建议的那样，单例可以被类加载器破坏，同样的类也可以由两个不同的类加载器加载，因此，你可以只需在由两个不同类加载器加载的类中调用其 getInstance() 方法，即可创建单例类的两个实例。这种方法可以在不必诉诸于违反私有构造函数的情况下起作用。

```
ClassLoader cl1 = new URLClassLoader(new URL[]{"singleton.jar"}, null);
ClassLoader cl2 = new URLClassLoader(new URL[]{"singleton.jar"}, null);
Class<?> singClass1 = cl1.loadClass("hacking.Singleton");
Class<?> singClass2 = cl2.loadClass("hacking.Singleton");
//...
Method getInstance1 = singClass1.getDeclaredMethod("getInstance", ...);
Method getInstance2 = singClass2.getDeclaredMethod("getInstance", ...);
//...
Object singleton1 = getInstance1.invoke(null);
Object singleton2 = getInstance2.invoke(null); 
```

请告知应采取什么措施来避免这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T12:18:13.060

如果你想创建真正的单例，你应该避免使用自定义类加载器——所有单例都应该由公共父类加载器加载。

从问题中解决您的问题的示例，链接如下：

```
private static Class getClass(String classname) throws ClassNotFoundException {
    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    if(classLoader == null) 
        classLoader = Singleton.class.getClassLoader();
    return (classLoader.loadClass(classname));
} 
```

## 类似的问题：

*   [具有多个不同类加载器的单例类](https://stackoverflow.com/questions/15156840/singleton-class-with-several-different-classloaders)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:43:43.623

这是您担心的情况：

1.  类加载器在其类路径上`A`没有。`Singleton`
2.  类加载器`B`是其类路径的子类加载器。`A``Singleton`
3.  类加载器`C`是其类路径的子类加载器。`A``Singleton`
4.  两者`B`和`C`加载`Singleton`.

根据 JLS ，当这种情况发生时，您最终会得到两种不同的类型，称为`Singleton`...。因此，当您创建各自的实例时，它们将是不同类型的实例。（可以说，“一个类型”不变量并没有被打破，因为类型不一样。但是，如果单例的目的是保持必须只保持一次的状态，那么技术论点就无关紧要了。 )

实际上，如果您确实遇到了这种情况，那么加载的另一个类`B`将无法使用...`A`的实例，*反之亦然*...因为类型不同。Effectively和的类集只会“知道”其中一个单例实例......分别。`Singleton`*`B``C`*

 *无论如何，如果你确实需要`B`'s 和`C`'s 类来共享一个 的实例`Singleton`，实现它的方法是放在`Singleton`一个公共父/祖先类加载器的类路径上；例如`A`在这种情况下。

* * *

> 请告知应采取什么措施来避免这种情况。

在重新阅读本文时，您似乎正在寻找一种方法来阻止其他人编写使用类加载器意外或故意破坏不变量的代码。

我认为没有……除非您将其他人的代码视为不受信任并在沙箱中运行它，以防止他们创建类加载器，使用破坏抽象的反射等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:19:33.933

我不认为这应该是一个问题，因为不同加载器加载的类是不兼容的，你将无法将两个实例都转换为`SingletonObject`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T12:54:42.883

为了避免这种情况，Singleton 的类应该由最顶层的类加载器加载。在这种复杂的情况下，这应该在应用程序启动时完成，在任何其他类加载器出现之前。首先调用`getSingletonObject()`方法来加载类并实例化单例。tern 中的子类加载器（例如自制）不应破坏类加载策略：首先在父类加载器中查找类，然后才尝试加载自身。如果中断，可能会出现多个 Singleton。*

# cassandra - 如何反序列化 DynamicComposite 列值？

> ID：15322094
> 
> 赞同：2
> 
> 时间：2013-03-10T12:14:28.593
> 
> 标签：cassandra, hector

我正在尝试实现一个数据模型，其中行键是字符串，列名是 Long，列值是 DynamicComposites。使用 Hector，存储过程的示例如下所示：

```
// create the value
DynamicComposite colVal = new DynamicComposite(); 
colVal.add(0, "someString");
colVal.setComparatorByPosition(0, "org.apache.cassandra.db.marshal.UTF8Type");
colVal.setSerializerByPosition(0, StringSerializer.get());

// create the column
HColumnImpl<Long, DynamicComposite> newCol = new
    HColumnImpl<Long, DynamicComposite>(longSerializer, 
        dynamicCompositeSerializer);

newCol.setName(longValue);
newCol.setValue(colVal);
newCol.setClock(keySpace.createClock());

// insert the new column
Mutator<String> mutator = HFactory.createMutator(keySpace,stringSerializer);
mutator.addInsertion("rowKey","columnFamilyName",newCol);
mutator.execute(); 
```

现在，当我尝试检索数据时：

```
// create the query
SliceQuery<String,Long,DynamicComposite> sq =
    HFactory.createSliceQuery(keySpace, stringSerializer, longSerializer, 
        dynamicCompositeSerializer);

// set the query
sq.setColumnFamily("columnFamilyName");
sq.setKey("rowKey");
sq.setColumnNames(longValue);

// execute the query
QueryResult<ColumnSlice<Long, DynamicComposite>> qr = sq.execute();

// get the data
qr.get().getColumnByName(longValue).getValue(); 
```

或者当我只是想简单地说再见时：

```
// get the data    
dynamicSerializer.fromByteBuffer(qr.get().
    getColumnByName(longValue).getValueBytes()); 
```

我遇到了一个异常：

```
Exception in thread "main" java.lang.NullPointerException
    at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:191)
    at com.google.common.collect.ImmutableClassToInstanceMap.getInstance(ImmutableClassToInstanceMap.java:147)
    at me.prettyprint.hector.api.beans.AbstractComposite.serializerForComparator(AbstractComposite.java:321)
    at me.prettyprint.hector.api.beans.AbstractComposite.getSerializer(AbstractComposite.java:344)
    at me.prettyprint.hector.api.beans.AbstractComposite.deserialize(AbstractComposite.java:713)
    at me.prettyprint.hector.api.beans.DynamicComposite.fromByteBuffer(DynamicComposite.java:25)
    at me.prettyprint.cassandra.serializers.DynamicCompositeSerializer.fromByteBuffer(DynamicCompositeSerializer.java:35) 
```

据我从阅读的所有教程中了解到，应该可以使用 DynamicComposite 作为列值。因此我想问：我做错了什么？从例外看来，我只是忘记在某处设置一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:38:07.843

拉多万，

这可能是由于与 Hector 版本结合使用的 Guava 库的兼容性问题。

另见：[https ://github.com/hector-client/hector/pull/591](https://github.com/hector-client/hector/pull/591)

我在 Hector-core-1.1-1.jar 上，结合 Guava-14.0.jar 我得到和你一样的错误。当我将它与 Guava-12.0.1.jar 一起使用时，它对我来说效果很好。

# jquery - Limit the overlay of jQuery UI dialog

> ID：15322095
> 
> 赞同：0
> 
> 时间：2013-03-10T12:14:29.247
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

There is a screen in my site where I want to show sign-up dialog, locking, but showing, member-only content: [whatiftopions](http://whatifoptions.com/Engine/Screens).

Currently, the jQuery dialog locks up the whole screen -- a user can only use browser buttons to navigate away from the screen. How can I make it, so the background overlay of the jQuery dialog covers only the area below the main navigation menu?

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:17:07.343

Frederic, thanks for your suggestion to use the non-modal dialog. That's what I ended up doing -- switched to non-modal and put an overlay div over the specific content.

# c# - 变量名“@KorisnickoIme”已被声明。变量名称在查询批处理或存储过程中必须是唯一的

> ID：15322101
> 
> 赞同：1
> 
> 时间：2013-03-10T12:15:06.703
> 
> 标签：c#, sql

我尝试从收到错误的 GridView 中对数据进行排序（启用排序）。变量名称在查询批处理或存储过程中必须是唯一的。2.这里和适配器

```
{
 istorijaKupovinaDataSource.SelectCommand = @"
       SELECT   k.Datum, p.Naziv AS Proizvodjac, l.Naziv AS Lek, k.Kolicina, k.Cena, ni.Naziv AS NacinIsporuke
            FROM    Kupovina k
                    INNER JOIN Lek l ON k.LekId = l.Id 
                    INNER JOIN NacinIsporuke ni ON k.NacinIsporukeID = ni.Id 
                    INNER JOIN Proizvodjac p ON l.ProizvodjacId = p.Id 
                    INNER JOIN Kupac u ON k.KupacId = u.Id
            WHERE   u.KorisnickoIme = @KorisnickoIme
            ORDER BY k.Datum";

        istorijaKupovinaDataSource.SelectParameters.Add("KorisnickoIme", DbType.String, User.Identity.Name);

}
public static void Kupi(long lekID, int kolicina, decimal cena, long nacinIsporukeID, string korisnickoIme)
    {
        SqlConnection con = new SqlConnection();
        try
        {
            con.ConnectionString = ConfigurationManager.ConnectionStrings["OnlineApotekaConnectionString"].ConnectionString;
            con.Open();

            string updateLager = @"
            UPDATE  Lager
            SET Kolicina=Kolicina-@Kolicina
            WHERE LekID=@LekID";

            SqlCommand cmd = new SqlCommand(updateLager, con);
            cmd.Parameters.AddWithValue("@LekID", lekID);
            cmd.Parameters.AddWithValue("@Kolicina", kolicina);

            cmd.ExecuteNonQuery();

            string insertIntoKupovina=@"
                INSERT INTO Kupovina (KupacID, LekID, Datum, Kolicina, Cena, NacinIsporukeID) 
                VALUES (@KupacID, @LekID, @Datum, @Kolicina, @Cena, @NacinIsporukeID)";

            cmd = new SqlCommand(insertIntoKupovina, con);
            cmd.Parameters.AddWithValue("@KupacID", KupacAdapter.GetID(korisnickoIme));
            cmd.Parameters.AddWithValue("@LekID", lekID);
            cmd.Parameters.AddWithValue("@Datum", DateTime.Now.Date);
            cmd.Parameters.AddWithValue("@Kolicina", kolicina);
            cmd.Parameters.AddWithValue("@Cena", cena);
            cmd.Parameters.AddWithValue("@NacinIsporukeID", nacinIsporukeID);

            cmd.ExecuteNonQuery();

        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            con.Close();
        }
    }
} 
```

{ SqlConnection con = new SqlConnection();

```
 try
    {
        con.ConnectionString = ConfigurationManager.ConnectionStrings["OnlineApotekaConnectionString"].ConnectionString;
        con.Open();

        string selectQuery = @"
            SELECT ID
            FROM Kupac
            WHERE KorisnickoIme = @KorisnickoIme";

        SqlCommand cmd = new SqlCommand(selectQuery, con);
        cmd.Parameters.AddWithValue("@KorisnickoIme", korisnickoIme);

        return Convert.ToInt64(cmd.ExecuteScalar());

    }
    catch (Exception err)
    {
        throw err;
    }
    finally
    {
        con.Close();
    }
}
public List<Kupac> SelectAll()
{
    List<Kupac> list = new List<Kupac>();

    SqlConnection con = new SqlConnection();

    try
    {
        con.ConnectionString = ConfigurationManager.ConnectionStrings["OnlineAotekaConnectionString"].ConnectionString;
        con.Open();
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = con;

        string selectQuery = "SELECT * FROM Kupac";

        cmd.CommandText = selectQuery;
        SqlDataReader reader = cmd.ExecuteReader();

        while (reader.Read())
        {
            list.Add(new Kupac(reader["Jmbg"].ToString(), reader["Ime"].ToString(), reader["Prezime"].ToString(), reader["Telefon"].ToString(), reader["Adresa"].ToString(), reader["Email"].ToString(), reader["KorisnickoIme"].ToString()));
        }
        reader.Close();
        return list;
    }
    catch (Exception err)
    {
        throw err;
    }
    finally
    {
        con.Close();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T12:24:26.967

我认为你应该使用

```
 istorijaKupovinaDataSource.SelectParameters.Clear();
    istorijaKupovinaDataSource.SelectParameters.Add("KorisnickoIme", DbType.String, User.Identity.Name); 
```

代替

```
istorijaKupovinaDataSource.SelectParameters.Add("KorisnickoIme", DbType.String, User.Identity.Name); 
```

# android - 使用精明边缘的 OpenCV 对象检测

> ID：15322102
> 
> 赞同：0
> 
> 时间：2013-03-10T12:15:25.493
> 
> 标签：android, opencv, image-processing, object-detection

我正在做一个项目，我通过 Android 智能手机检测障碍物，这个应用程序旨在成为盲人的导航指南。

我正在使用 OpenCV 检测视频帧中的精明边缘，但在检测对象时不知所措。我需要的是一种提取/检测框架中任何对象的方法。我浏览了几个例子，但它们都是关于检测特定对象的，比如人脸。任何输入将不胜感激，因为我是图像处理的新手。

# iphone - iPad Layout 与过去的状态栏有差距

> ID：15322113
> 
> 赞同：0
> 
> 时间：2013-03-10T12:16:37.683
> 
> 标签：iphone, xcode, ipad, statusbar, container-view

我使用 xcode 4.6 创建了这个基本应用程序，它代表了我真实应用程序的确切布局。我所做的唯一两个更改是取消选中初始导航控制器中的“导航栏可见”，并为第二个导航控制器选择“状态栏：无”。 ![在此处输入图像描述](../Images/435bba3e9257a96adf088c72a117008f.png)

正如您在下面看到的，状态栏曾经位于容器视图中的位置有一个空白区域。 ![在此处输入图像描述](../Images/2eb14597e1268b694c3e5a47a9a7a52b.png)

请为自己创建这个简单的应用程序，并确定需要更改哪些内容才能消除空白。它代表了我可以发布我的应用程序之前的最后一个错误。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:01:27.637

如果您不想显示状态栏，则通过将“最初隐藏状态栏”属性设置为“是”将其从 plist 中隐藏

去`Info.plist`档案。

设置“状态栏最初是隐藏的”值= YES

它会消除这个差距

# php - 使用 AJAX 和 PHP 将 php 文件加载到 div 中的点击事件？

> ID：15322117
> 
> 赞同：0
> 
> 时间：2013-03-10T12:16:56.483
> 
> 标签：php, html, ajax, jquery

目前我有这个代码用于将文件加载到 div 中。当我点击其中一个选项时，它只是链接到页面，而不是使用 AJAX 将页面加载到 div 中。

```
$(document).ready(function(){
  $('.eventSelect').click(function(){
    var url = 'includes/events.php';
    $('.content').load(url); 
  });
});   

$(document).ready(function(){
  $('.podSelect').click(function(){
    //Retrieve Content from the back-end PHP page, and pass the ID selected
    var url = 'includes/content.php';
    $('.content').load(url); 
  });
}); 
```

这是带有两个可单击选项的代码。因此，如果我单击 pod，则 pod 的内容将出现在 div 类（内容）中，并且对于事件也是如此。

```
echo "<div id=\"viewSelect\">";
echo "<div class=\"eventSelect\">";
echo "<a href=\"/../includes/events.php\">";
echo "events";
echo "</a>";
echo "</div>";
echo "<div class=\"podSelect\">";
echo "<a href=\"/../includes/events.php\">";
echo "pods";
echo "</a>";
echo "</div>";
echo "</div>"; 
```

我认为我的问题与href有关，但我不确定。

如果有人可以提供帮助，那就太好了，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:24:53.210

我认为您需要从单击处理程序中返回 false 以防止默认行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:39:18.853

只需将您的 JS 更改为以下

```
 $(document).ready(function(){
      $('#viewSelect > a').click(function(){
        var url = $(this).attr('href');
        $('.content').load(url);
        return false; 
      });
    }); 
```

**上面发生了什么**
`$(document).ready();`<-- 确保代码在文档加载后运行

`$('#viewSelect > a').click();`<-- 将id`anchor`内的所有标签绑定到事件`viewSelect``click`

`$(this).attr('href');`<-- 获取 clckeked `anchor href`属性

`return false;` <-- 阻止默认功能（此处为超链接重定向）

**一些建议**

*   您不需要重复相同的功能两次。这只能通过单个功能来实现。
*   另外，我看不出您有任何理由`HTML`在`php echo`声明中包含明文。这只是服务器不必要的开销。
*   正确阅读[jQuery 文档](http://docs.jquery.com/)，不要在 `$(document).ready()`每次编写新函数时启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:45:28.093

你听说过 jquery bro 吗？...试试 jquery 这会解决你的问题。

```
function loadAjax(url,display)
{ $("."+display).html('Loading Content Please Wait...'); 
$.get(url,function(data){  $("."+display).html(data) }); } 
```

现在参数是

```
 url=ajax feed to load (eg. includes/events.php)
    display = where to show your feed result. (eg. content) 
```

像这样使用

```
<div class="content"></div> 
<a Onclick='loadAjax("includes/events.php","content")'>Click To Load Events</a>
<a Onclick='loadAjax("includes/contents.php","content")'>Click To Load Events</a> 
```

显然，您需要 jquery 库才能使其工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T12:21:58.850

试试去掉`<a>`标签

```
echo "<div id=\"viewSelect\">";
echo "<div class=\"eventSelect\">";
echo "events";
echo "</div>"; 
```

# ruby - 通过引用传递参数

> ID：15322119
> 
> 赞同：0
> 
> 时间：2013-03-10T12:17:13.843
> 
> 标签：ruby

```
class Test
  def initialize
    @foo = 1
    @bar = 1
  end
  def change(a, b) 
    a += 1
    b -= 1   
  end 
  def print
    change(@foo,@bar)
    puts "#{@foo},#{@bar}"
  end
end 
```

由于变量`foo`和 `bar`可能在这个类中多次一起修改，我想知道我是否可以使用一种方法来完成这项工作。我想在仍然进入上述代码`2,0`的同时打印方法。有没有一种简单的方法可以在 Ruby 中编写这样的方法？`print``1,1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:23:39.617

Ruby 实际上可以做到这一点，但它并没有你想象的那么清楚。在 Ruby 中，所有变量都只是对对象的引用。所以：

```
2.0.0p0 :001 > def m(a)
2.0.0p0 :002?>   a << 1
2.0.0p0 :003?>   a
2.0.0p0 :004?> end
 => nil
2.0.0p0 :005 > a = [3,2]
 => [3, 2]
2.0.0p0 :006 > m(a)
 => [3, 2, 1]
2.0.0p0 :007 > a
 => [3, 2, 1] 
```

但是，整数是不可变的。所以，你*不能*对整数变量做同样的事情。你看，+=、-=、*= 等都是真的`var = var +/-/* rhs`。这只会修改存储在局部变量中的引用，而不是在传递的变量中。你真的有两个选择：

1.  使用可变对象：使用 Hash、Array 等——并确保使用破坏性操作，如`<<`,`flatten!`等。
2.  将 Integer 包装在一个简单的可变对象中：编写一个可变包装类，让您可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:31:33.890

这样的事情有用吗？

```
class Test
  def initialize
    @foo = 1
    @bar = 1
  end
  def change(a, b) 
    a += 1
    b -= 1
    [a, b]   
  end 
  def print
    @foo, @bar = change(@foo,@bar)
    puts "#{@foo},#{@bar}"
  end
end 
```

你可以在 Ruby 中做这样的事情，但它更高级，因为没有内置按引用传递。

这将导致更难理解源代码。有意想不到的副作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:38:59.450

整数是 Ruby 中的不可变对象，因此您不能那样修改它们。`a += 1`只是用新值重新分配局部变量`a`，它不会修改原始对象（1）。

为了实现你想要的（虽然你还没有真正解释你想要什么），你有几种可能：

*   在对象中包装整数（对于这样一个简单的例子来说很麻烦）

*   使用可变对象而不是整数，例如哈希。

例如：

```
class Test
  def initialize
    @foo_bar = { foo: 1, bar: 1 }
  end
  def change(a, b) 
    @foo_bar[a] += 1
    @foo_bar[b] -= 1
  end 
  def print
    change(:foo,:bar)
    puts "#{@foo_bar[:foo]},#{@foo_bar[:bar]}"
  end
end 
```

另外，请注意：很少需要将对象的实例变量作为参数传递给同一对象的方法（`change(@foo,@bar)`在您的示例中）。实例变量用于保持对象的内部状态。

# c# - C#获取图像类型，不使用图像文件扩展名

> ID：15322121
> 
> 赞同：0
> 
> 时间：2013-03-10T12:17:38.227
> 
> 标签：c#, jpeg

我正在寻找通过解析文件内容来获取图像文件格式的 C# 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T12:20:11.360

您可以读取和检查文件的前几个字节。这叫做*签名*。

例如对于 JPEG 它是`FF D8 FF`

[这是签名数据库之一](http://www.filesignatures.net/index.php?page=all&order=SIGNATURE&sort=DESC)。我相信你可以谷歌更多。

# c# - 是什么让我的计时器运行不准确？

> ID：15322123
> 
> 赞同：1
> 
> 时间：2013-03-10T12:18:00.597
> 
> 标签：c#, .net, windows, multithreading, timer

我有一个创建新计时器的类，并在每次滴答时轮询远程队列（通过 HTTP）。

```
public void Start()
{
    _timer = new Timer((x) =>
    {
        Console.WriteLine(DateTime.Now.ToString("hh:MM:ss.fff") + " " + typeof(T).Name);                

        var message = (Message)null;
        var messageBody = (T)null;

        try
        {
            if (!_queue.TryGet(out message))
                return;

                messageBody = (T)JsonConvert.DeserializeObject(message.Body, typeof(T));

                _messageDispatcher.Dispatch<T>(messageBody);

                _queue.Delete(message.Id);
            }
            catch (Exception ex)
            {
                _errorHandler.Handle(ex, message);
            }                
        }, null, 0, _queueConsumerConfiguration.PollingInterval);            
    }
} 
```

如果我创建这个类的八个新实例，将轮询间隔设置为 250 毫秒，然后调用它们，我会假设计时器会非常准确地计时。计时器回调中执行的内容无关紧要。然而，这种情况并非如此。

```
01:03:23.305 MessageSleepForOneSecond
01:03:23.301 MessageSleepForOneSecond
01:03:23.297 MessageSleepForOneSecond
01:03:23.316 MessageSleepForOneSecond
01:03:24.321 MessageSleepForOneSecond
01:03:24.562 MessageSleepForOneSecond
01:03:24.701 MessageSleepForOneSecond
01:03:24.707 MessageSleepForOneSecond
01:03:24.716 MessageSleepForOneSecond
01:03:25.321 MessageSleepForOneSecond
01:03:25.518 MessageSleepForOneSecond
01:03:25.764 MessageSleepForOneSecond
01:03:25.912 MessageSleepForOneSecond
01:03:25.920 MessageSleepForOneSecond
01:03:25.924 MessageSleepForOneSecond
01:03:26.521 MessageSleepForOneSecond
01:03:26.710 MessageSleepForOneSecond
01:03:26.957 MessageSleepForOneSecond
01:03:27.107 MessageSleepForOneSecond
01:03:27.120 MessageSleepForOneSecond
01:03:27.126 MessageSleepForOneSecond
01:03:27.716 MessageSleepForOneSecond
01:03:27.906 MessageSleepForOneSecond
01:03:28.151 MessageSleepForOneSecond
01:03:28.305 MessageSleepForOneSecond
01:03:28.316 MessageSleepForOneSecond
01:03:28.322 MessageSleepForOneSecond
01:03:28.913 MessageSleepForOneSecond
01:03:29.100 MessageSleepForOneSecond
01:03:29.349 MessageSleepForOneSecond
01:03:29.502 MessageSleepForOneSecond
01:03:29.513 MessageSleepForOneSecond
01:03:29.538 MessageSleepForOneSecond
01:03:30.107 MessageSleepForOneSecond
01:03:30.297 MessageSleepForOneSecond
01:03:30.545 MessageSleepForOneSecond
01:03:30.705 MessageSleepForOneSecond
01:03:30.712 MessageSleepForOneSecond
01:03:30.733 MessageSleepForOneSecond
01:03:31.307 MessageSleepForOneSecond
01:03:31.310 MessageSleepForOneSecond
... 
```

这是怎么回事？是什么导致不准确？管理线程池，Windows，...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:34:00.940

定时器不是无限准确的，线程调度也不是无限准确的。它们中的任何一个都具有最多 1 毫秒的精度（可通过 配置`timeBeginPeriod`），在当前版本的 Windows 上默认为 16.7 毫秒（在 15 年以上的旧 Windows 上约为 50 毫秒）。

计时器本身并不是无限准确的，它会生成一个事件，使线程池中的线程准备就绪，该事件将在以后的任何时间安排，不准确，也没有任何硬性保证。如果其他线程正在运行，那么根据处理器负载和线程优先级，“以后的任何时间”可能实际上是以后的*任何时间*（甚至永远不会）。

仅此一点就足以说明为什么通常您选择的间隔都不准确（巧合除外），但特别是 250 毫秒的间隔不会是准确的（因为 249 毫秒是调度程序默认粒度的最接近倍数，因此新线程可以*在最好*安排在 265.6ms 之后——这假设在那个确切的时间有一个内核可用，这是不能保证的）。

此外，处理 HTTP 请求可能会花费相当多的时间，因此即使没有其他线程，您创建的工作线程也很有可能比核心数量多。这必然意味着操作系统必须决定在特定时间安排哪一个。不管调度器做什么，最终总会有一个或几个线程出现“不公平”的情况，导致它们“不准确”。

写入控制台也是如此。对控制台的写入是同步的（即当您的两个线程写入控制台时，单个写入可能以任何顺序出现，但它们不会出现乱码）。这必然意味着有一个锁。谁先拿到锁，谁就继续。任何试图在纳秒后获得锁的人都将被阻止。其他一些线程接管时间片。最终，被阻塞的线程将再次“准备好”，但不能严格保证该线程会立即运行。

准备好跑步和跑步是两件截然不同的事情。

# c# - 使用 C# Windows Store 应用程序通过 POST 将数据传输到网络服务器

> ID：15322124
> 
> 赞同：1
> 
> 时间：2013-03-10T12:18:11.860
> 
> 标签：c#, windows-8, windows-runtime, httpclient

我正在尝试通过 POST 将数据从我的 Windows 应用商店应用程序传输到我的网络服务器。我尝试了以下方法：

```
 try
        {
            HttpClient httpClient = new HttpClient();

            Stream stream = GenerateSampleStream(500);
            StreamContent streamContent = new StreamContent(stream);

            HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Post, "address/script.php");

            request.Content = streamContent;
            request.Headers.TransferEncodingChunked = true; // Assume we do not know the content length
            HttpResponseMessage response = await httpClient.SendAsync(request);

        }
private static MemoryStream GenerateSampleStream(int size)
        {
            // Generate sample data.
            byte[] subData = new byte[size];
            for (int i = 0; i < subData.Length; i++)
            {
                subData[i] = 64; // '@'
            }

            return new MemoryStream(subData);
        } 
```

查看我的 script.php，我没有得到任何 POST 数据：

```
if($_POST)   {
mail(...);
} 
```

# python - 数字 python 的平方根

> ID：15322130
> 
> 赞同：-6
> 
> 时间：2013-03-10T12:18:38.600
> 
> 标签：python, square-root, math.sqrt

这是我的代码：

```
import cmath
root = (cmath.sqrt(25))
print (root)
raw_input() 
```

我面临的问题是根的结果是 5+0j，这是不可取的，我只想要平方根。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T12:20:20.270

使用`math`模块代替`cmath`模块；后者仅适用于复数：

```
>>> import math
>>> print math.sqrt(25)
5.0 
```

对于它的价值，*如果您期望一个复数*`cmath`，结果是正确的。你可以只取结果的一部分，但由于模块中有一个普通的浮点等价物，让你的计算机做额外的工作是没有意义的。*`.real``math`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T12:24:51.200

结果本身是正确的。的平方根`25 + 0j`是`5 + 0j`。

是`j`从哪里来的？它是隐含的，因为您使用的是复杂的数学 ( `cmath`) 库。

如果您只想要复数的*实部，请执行以下操作：*

```
>>> root = (cmath.sqrt(25))
>>> root.real
5.0 
```

最后，如果您只想处理实数，请使用该`math`库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:23:32.327

结果是正确的！

那是因为您正在使用复杂的数学库来查找平方根。

毕竟，

```
5+0j 
```

是 25 的复平方根：

```
(5+0j)*(5+0j) = 25 + 2*0j + (0j)^2 = 25 + 0 + 0 = 25 
```

使用该`math`模块代替“常规”平方根。

或者：使用通过以下方式访问实部：

```
root.real 
```

通常，您可能希望使用复数而不是自然数来进行通用性和数学错误检测 - 但这是另一个讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-01T13:28:11.470

`cmath`适用于复数，而不是实数。这应该工作！

```
import math
import cmath
def sqrt(n):
    if n < 0:
        return cmath.sqrt(n)
    else:
        return math.sqrt(n) 
```*

# java - SQLite 和 Android，移动到数据库中的下一行，检索然后显示结果

> ID：15322132
> 
> 赞同：1
> 
> 时间：2013-03-10T12:18:40.433
> 
> 标签：java, android, database, sqlite

我正在尝试获取在使用 SQLite 数据库的 Android 上运行的电话簿。

我正在努力解决的问题是，当我单击下一个按钮时，我希望显示数据库中的下一行数据。但是，当我运行应用程序时，我不断收到此错误

03-10 12:05:22.455: E/AndroidRuntime(772): 致命异常: main 03-10 12:05:22.455: E/AndroidRuntime(772): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com. example.adressbooktake2/com.example.adressbooktake2.MainActivity}：java.lang.NullPointerException

这是我正在使用的代码，

MainActivity.Java

```
public class MainActivity extends Activity {  

    DBAdaptor db = new DBAdaptor(this);
    int count = 1;
    Cursor cursor = db.getallRecord();

protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);         
        DisplayRecord(cursor);

    }

public void Nextdata (View view){

        if (cursor.moveToNext())
        { 
            DisplayRecord(cursor);
        }           

    }

    public void Previousdata (View view){

        if (cursor.moveToPrevious())
        { 
            DisplayRecord(cursor);
        }
    }

public void DisplayRecord(Cursor c) {

        EditText nameTxt = (EditText)findViewById(R.id.Name);
        EditText phoneTxt = (EditText)findViewById(R.id.Phone);
        EditText emailTxt = (EditText)findViewById(R.id.Email);     
        nameTxt.setText(c.getString(1));
        phoneTxt.setText(c.getString(2));
        emailTxt.setText(c.getString(3));//
    } 
```

DBAdaptor.Java

```
 package com.example.adressbooktake2;

import android.annotation.SuppressLint;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdaptor {
    public static final String KEY_ROWID = "id";
    public static final String KEY_NAME = "name";
    public static final String KEY_PHONENUMBER = "phone";
    public static final String KEY_EMAIL = "email";
    private static final String TAG = "DBAdaptor";

    public static final String DATABASE_NAME = "AddressBookDataBase1";
    public static final String DATABASE_TABLE = "AddressBook";
    public static final int DATABASE_VERSION = 1;

    public static final String DATABASE_CREATE = "create table if not exists AddressBook (id integer primary key autoincrement, "
            + "name VARCHAR, phone VARCHAR, email VARCHAR);";

    private final Context context;

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdaptor(Context ctx)
    {
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            try 
            {
                db.execSQL(DATABASE_CREATE);
            } 
                catch (SQLException e) 
            {
                    e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to" + newVersion +
                    ", which will destroy all old data");
            db.execSQL("Drop TABLE IF EXISTS AddressBook");
            onCreate(db);

        }       
    }

    //--counts rows in database--
    public int rowCounter()
    {
        Cursor mCount= db.rawQuery("select count(*) from AddressBook where id=" + KEY_ROWID, null);
        mCount.moveToFirst();
        int rowCount= mCount.getInt(0);
        return rowCount;
    }

    //--opens the database---
    public DBAdaptor open() throws SQLException
    {
        db = DBHelper.getWritableDatabase(); //Line 88
        return this;
    }

    //--close the dabatabase
    public void close()
    {
        DBHelper.close();
    }

    //--insert a record into database--
    public long insertRecord(String name, String email, String phone)
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_NAME, name);
        initialValues.put(KEY_EMAIL, email);
        initialValues.put(KEY_PHONENUMBER, phone);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    //--deletes a record
    public void deleteRecord(long rowId)
    {
        db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null);

    }

    //--retrieves a particular record--
    public Cursor getRecord(long rowId) throws SQLException
    {
        Cursor mCursor = 
                db.query(true, DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME,
                        KEY_EMAIL, KEY_PHONENUMBER}, KEY_ROWID + "=" + rowId, null, null, null, null, null);
        if (mCursor !=null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }       

    //--Retrieves all data--

    public Cursor getallRecord() throws SQLException
    {
        {

            Cursor gaCursor = db.rawQuery("SELECT* FROM " + DATABASE_TABLE, null);                  
            if (gaCursor !=null) 
            {
                gaCursor.moveToFirst();
            }

            return gaCursor;
        }
    }

} 
```

如果您能看到我哪里出错了，我们将不胜感激任何可以提供的帮助。

异常的完整堆栈跟踪是（2），

> 03-10 13:07:39.579: E/AndroidRuntime(770): 致命异常: main 03-10 13:07:39.579: E/AndroidRuntime(770): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com. example.adressbooktake2/com.example.adressbooktake2.MainActivity}: java.lang.NullPointerException 03-10 13:07:39.579: E/AndroidRuntime(770): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106) 03 -10 13:07:39.579: E/AndroidRuntime(770): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230) 03-10 13:07:39.579: E/AndroidRuntime(770): 在 android.app .ActivityThread.access$600(ActivityThread.java:141) 03-10 13:07:39.579: E/AndroidRuntime(770): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234) 03-10 13: 07:39.579：E/AndroidRuntime(770)：在 android.os.Handler。dispatchMessage(Handler.java:99) 03-10 13:07:39.579: E/AndroidRuntime(770): 在 android.os.Looper.loop(Looper.java:137) 03-10 13:07:39.579: E/ AndroidRuntime(770): 在 android.app.ActivityThread.main(ActivityThread.java:5039) 03-10 13:07:39.579: E/AndroidRuntime(770): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-10 13:07:39.579: E/AndroidRuntime(770): 在 java.lang.reflect.Method.invoke(Method.java:511) 03-10 13:07:39.579: E/AndroidRuntime(770): 在com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 03-10 13:07:39.579: E/AndroidRuntime(770): at com.android.internal.os.ZygoteInit.main(ZygoteInit .java:560) 03-10 13:07:39.579: E/AndroidRuntime(770): at dalvik.system.NativeStart.main(Native Method) 03-10 13:07:39.579: E/AndroidRuntime(770): Caused作者：java.lang。NullPointerException 03-10 13:07:39.579: E/AndroidRuntime(770): 在 android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:229) 03-10 13:07:39.579: E/AndroidRuntime(770): 在 android .database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224) 03-10 13:07:39.579: E/AndroidRuntime(770): 在 android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164) 03- 10 13:07:39.579: E/AndroidRuntime(770): at com.example.adressbooktake2.DBAdaptor.open(DBAdaptor.java:88) 03-10 13:07:39.579: E/AndroidRuntime(770): at com. example.adressbooktake2.MainActivity.(MainActivity.java:20) 03-10 13:07:39.579: E/AndroidRuntime(770): 在 java.lang.Class.newInstanceImpl(Native Method) 03-10 13:07:39.579: E/AndroidRuntime(770): 在 java.lang.Class.newInstance(Class.java:1319) 03-10 13:07:39.579: E/AndroidRuntime(770): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1054) 03-10 13:07:39.579: E/AndroidRuntime(770): 在android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:21:58.557

```
 if (gaCursor !=null) 
    {
        gaCursor.moveToFirst();
    }
    else
    {
        gaCursor.close();
    } 
```

`gaCursor`如果为空，将抛出 NPE 。

**如果它为空，您不能（也不需要）关闭它。**

只需卸下`else`零件。

您还需要更改`DisplayRecord`功能。`c`在调用之前检查是否为空`c.toString()`。

```
if (c!= null){
    nameTxt.setText(c.getString(1));
    phoneTxt.setText(c.getString(2));
    emailTxt.setText(c.getString(3));//
} 
```

此外，你不要`db`在你的 DBAdaptor.Java 文件中实例化，Wither 在里面使用`open()`或添加（使用更好）`this.db = db``onCreate``open`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:23:11.353

`onCreate()`它通常是在调用之前执行逻辑的错误的来源。在你的情况下：

```
DBAdaptor db = new DBAdaptor(this);
int count = 1;
Cursor cursor = db.getallRecord(); 
```

尝试只声明变量并在以下位置初始化它们`onCreate`：

```
public class MainActivity extends Activity {  

    DBAdaptor db;
    int count = 1;
    Cursor cursor;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);         

        db = new DBAdaptor(this);
        cursor = db.getallRecord();
        DisplayRecord(cursor);
    }
    [...]
} 
```

也看看[这个 SO question](https://stackoverflow.com/questions/11412690/android-sqlite-exception-unable-to-instantiate-activity)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:20:32.827

移动这个

```
EditText nameTxt = (EditText)findViewById(R.id.Name);
        EditText phoneTxt = (EditText)findViewById(R.id.Phone);
        EditText emailTxt = (EditText)findViewById(R.id.Email); 
```

像这样

```
setContentView(R.layout.activity_main);
    EditText nameTxt = (EditText)findViewById(R.id.Name);
            EditText phoneTxt = (EditText)findViewById(R.id.Phone);
            EditText emailTxt = (EditText)findViewById(R.id.Email);            
        DisplayRecord(cursor); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T12:39:49.777

似乎是`Cursor`从返回的对象`getallRecord()`为null...而**Null Pointer Exception**是指...`Cursor`中访问的null对象`DisplayRecord()`

在显示记录之前执行检查，如下所示：

```
if(c != null)
    //Display Records
else
    Log.e(TAG, "Cursor is Null"); 
```

此外，这似乎不是从数据库中检索联系人的正确方式...`ContentProvider`创建了某些 's 以使数据库中的数据可用于应用程序...[这](http://developer.android.com/guide/topics/providers/contacts-provider.html#UserProfile)可能会有所帮助...

# android - 如何告诉用户我的应用有升级？

> ID：15322139
> 
> 赞同：0
> 
> 时间：2013-03-10T12:19:05.640
> 
> 标签：android, file, http, save

现在我将我的应用程序的最后一个版本号保存在我的服务器的数据库中。当用户执行广告在线操作时，我控制该数字，如果用户设备上安装的版本较低，我会显示一条消息'有一个更新的版本。请升级'。要将用户路由到我的服务器，我使用免费的重新路由服务，如 dyndns...

但是，如果 dyndns 决定停止免费服务会怎样？该应用程序无法再访问我的服务器，并且无法显示升级消息。所以，我认为最好在网页中存储一个 version.txt 文件。如果无法再访问 dyndns 地址 id，我会阅读在线存储的**version.txt 。**

但是，**该文件在网络上的保存位置是**什么？有免费服务允许保存每个人都可以访问的文件吗？我尝试了 Google Web 服务，但过了一会儿该文件无法访问。是否有其他类似的 HTTP 站点允许您免费保存文件（读取次数不限）？

谢谢大家，Geltry

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:22:01.333

如果您使用的是 BugSense Crash Report 服务，则可以在通知下拉窗口中向用户显示一条消息，前提是该应用程序有新的升级并修复了某个错误。

你可以检查一下：

[http://www.bugsense.com/](http://www.bugsense.com/)

# android - 每秒定期更新小部件

> ID：15322144
> 
> 赞同：2
> 
> 时间：2013-03-10T12:19:37.723
> 
> 标签：android, android-widget, widget, textview, updates

我目前有一个使用两个的小部件`setTextViewText`：

公共类 DigitalClock 扩展 AppWidgetProvider {

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    int N = appWidgetIds.length;

    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.digitalclock);

    for (int i = 0; i < N; i++) {
        int appWidgetId = appWidgetIds[i];

        Intent clockIntent = new Intent(context, DeskClock.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, clockIntent, 0);

        views.setOnClickPendingIntent(R.id.rl, pendingIntent);
        java.util.Date noteTS = Calendar.getInstance().getTime();
        String time = "kk:mm";
        String date = "dd MMMMM yyyy";

        views.setTextViewText(R.id.tvTime, DateFormat.format(time, noteTS));
        views.setTextViewText(R.id.tvDate, DateFormat.format(date, noteTS));

        appWidgetManager.updateAppWidget(appWidgetId, views);

    }

}
} 
```

我的问题是如何使用它来`TextView`每秒设置两个，以便时间更新而不是`appwidgetprovider`允许的 30 分钟？我听说过 using `AlarmManager`, using a `service`, `handler`.... 问题是似乎没有人说清楚或举例说明我将如何去做。

因此，如果有人有明确的方法来实现这一点，我将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T15:31:04.793

您可能有一些服务在后台运行。将广播消息从该服务或活动发送到扩展 AppWidgetProvider 的类（在您的情况下为 DigitalClock），然后覆盖同一类的 onReceive() 函数。

第 1 步：从服务或某处发送广播。

第 2 步：在您的 DigitalClock 类中添加 onReceive() 函数。

```
 public class DigitalClock extends AppWidgetProvider {

        public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        int N = appWidgetIds.length;

        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.digitalclock);

        for (int i = 0; i < N; i++) {
            int appWidgetId = appWidgetIds[i];

            Intent clockIntent = new Intent(context, DeskClock.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, clockIntent, 0);

            views.setOnClickPendingIntent(R.id.rl, pendingIntent);
            java.util.Date noteTS = Calendar.getInstance().getTime();
            String time = "kk:mm";
            String date = "dd MMMMM yyyy";

            views.setTextViewText(R.id.tvTime, DateFormat.format(time, noteTS));
            views.setTextViewText(R.id.tvDate, DateFormat.format(date, noteTS));

            appWidgetManager.updateAppWidget(appWidgetId, views);

        }

    }
  @Override
        public void onReceive(Context context, Intent intent) {

                super.onReceive(context, intent);
//Do your task here like updating the textviews
}

    } 
```

# android - Android - 我可以创建上一个片段按钮的 TextView 或 EditText onClick 吗？

> ID：15322145
> 
> 赞同：0
> 
> 时间：2013-03-10T12:19:38.693
> 
> 标签：android, android-fragments, android-fragmentactivity

我有`FragmentActivity`2`Fragments`和. 里面有一个。的，我需要创建一个和。我已经调用了事件的方法。方法如下：`FragmentA``fragmentB``FragmentA``button``onClick``fragmentA` `button``TextView``EditText``FragmentB``FragmentB` `onCick``FragmentA` `button`

```
public void updateFragmentB(String t) {
TextView tv = new TextView(getActivity().getApplicationContext());
            tv.setText(t);
} 
```

但它不起作用。

这是我在 FragmentB 中的 onCreate 方法：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View myFragmentView = inflater.inflate(R.layout.fragment_b, container, false);

    b_received = (TextView)myFragmentView.findViewById(R.id.b_received);
    b_received.setText("Wait For the text");
    tv = new EditText(getActivity().getApplicationContext());
    String myTag = getTag();

    ((AndroidViewPagerActivity)getActivity()).setTabFragmentB(myTag);

    return myFragmentView;
} 
```

我的 fragment_b 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >
   <TextView
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:text="It's Fragment B" />
   <TextView
       android:id="@+id/b_received"
       android:layout_width="match_parent"
       android:layout_height="wrap_content" />
   <ImageView
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:scaleType="center"
       android:src="@drawable/ic_launcher"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:48:55.757

因为`Fragment B`您必须首先定义一个 Layout 然后创建您的`TextView`and `EditView`，然后您必须将这些`TextView`和 EditText 添加到那些`layouts`，然后将该布局添加到`ContentView`.

您可以通过以下方式完成此操作：

1.  定义您的`layouts`,`TextView`并`EditText`在 xml 中然后将该 xml 添加到您的内容视图中，如下所示

    ```
    setContentView(R.layout.fragment_layout_b); 
    ```

2.  或者，如果您已经定义了布局，并且您希望通过使用该`findViewById()`方法以编程方式获取布局，然后将新创建的对象`TextView`和`EditText`对象添加到此布局中。

您不能只是简单地创建`TextView`或`EditText`对象并让它出现在`Fragment B`您必须将它们添加到`Fragment B`.

如果您需要进一步的帮助，请`Fragment B`分享`onCreateView()`方法代码

现在我可以看到您的 onCreateView 方法，我可以看到 tv = new EditText(getActivity().getApplicationContext());

我假设 'tv' 是一个 EditText 引用变量，我看不到电视被添加到您的布局中。因此，您必须将 tv 添加到适当的布局中。

或者您可以像添加 TextView 一样将 EditText 添加到 xml 中的布局中。

好的所以现在我可以查看你的布局 xml：

1.将android id添加到您的LinearLayout：

1.  在您的代码中使用 LinearLayout lLayout = myFragmentView.findViewById(R.id.lLayout); 获取 LinearLayout 对象。

2.  现在将您的 EditText 视图对象添加到您的 LinearLayout 对象：

    lLayout.addView(tv); //如果 tv 是 EditText 对象

# asp.net - Paypal 多参数返回，cancel_return urls

> ID：15322148
> 
> 赞同：0
> 
> 时间：2013-03-10T12:20:02.610
> 
> 标签：asp.net, paypal, paypal-sandbox

我正在 ASP.NET 应用程序中进行简单的 Paypal 支付集成，我尝试为成功和取消构建返回查询字符串，但它不起作用，因为我在查询字符串中发送了多个参数

```
string returnUrl = ConfigurationManager.AppSettings["PayPalSandBoxUrl"] + "&business=" + email;
        returnUrl += "&amount= 100";
        returnUrl += "&item_name=Invoice to somebody";
        // the problem goes in following params
        returnUrl += "&return=" + ConfigurationManager.AppSettings["Domain"] + "Payment.aspx?param1=" + param1 + "&param2=" + param2 ;
        returnUrl += "&cancel_return=" + ConfigurationManager.AppSettings["Domain"] + "Payment.aspx?cancel=true&param1=" + param1; 
```

我认为贝宝请求参数和返回查询参数之间有些混淆，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:38:07.770

当您添加包含可能混淆真实参数的符号的 URL 参数时，符号为`?`,`&`等`/`，您必须使用 [UrlEncode对它们进行编码](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)

所以让你的字符串为：

```
string returnUrl = 
        ConfigurationManager.AppSettings["PayPalSandBoxUrl"] 
         + "&business=" + HttpServerUtility.UrlEncode(email);
        returnUrl += "&amount= 100";
        returnUrl += "&item_name=" + HttpServerUtility.UrlEncode("Invoice to somebody");
        // the problem goes in following params
        returnUrl += "&return=" 
          + HttpServerUtility.UrlEncode(ConfigurationManager.AppSettings["Domain"] + "Payment.aspx?param1=" + param1 + "&param2=" + param2) ;
        returnUrl += "&cancel_return=" 
          + HttpServerUtility.UrlEncode(ConfigurationManager.AppSettings["Domain"] + "Payment.aspx?cancel=true&param1=" + param1 ); 
```

# php - MySQL-第一行被跳过

> ID：15322151
> 
> 赞同：1
> 
> 时间：2013-03-10T12:20:13.517
> 
> 标签：php, mysql, row

我有一个看起来像这样的 MySQL 表 -

![在此处输入图像描述](../Images/0f83d5efa3dbe157f5205fe1c07d154a.png)

当我尝试使用以下代码打印所有行时

```
<?php
include_once("connect.php");
$sql = "SELECT * FROM scores";
$query = mysql_query($sql) or die("systemResult=Error");
$counter    = mysql_num_rows($query);

if($counter>0)
{
    print("systemResult=Success<br>");

    while($data=mysql_fetch_array($query))
    {
        $athleteName    = $data["athleteName"];
        print "&athleteName=" . $athleteName;
        print "<br>";
    }
}
else
{
    print("systemResult=Error");
}
?> 
```

代码的精确副本 - [http://pastebin.com/00WFdnrt](http://pastebin.com/00WFdnrt)

我得到以下输出

```
systemResult=Success
&athleteName=Guest-73
&athleteName=Guest-71
&athleteName=Guest-24
&athleteName=Guest-67
&athleteName=Guest-37
&athleteName=Guest-23
&athleteName=Guest-91
&athleteName=ankur
&athleteName=Guest-41
&athleteName=Guest-38
&athleteName=Guest-72
&athleteName=Guest-25
&athleteName=Guest-36
&athleteName=Guest-17 
```

[点击这里查看实时版本](http://mathlympics.cu.cc/php/getData.php)

如您所见，第一行 (id:1, atheleteName:ankur) 没有被打印。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:23:30.393

```
&athleteName=Guest-91
&athleteName=ankur 
```

该行已列出，您需要在查询中使用 ORDER BY ID ASC

```
$sql = "SELECT * FROM scores ORDER BY ID ASC"; 
```

更新：根据发布的代码，mysql_fetch_array 调用了两次：

```
 if($counter>0)
        {
                print("systemResult=Success<br>");

                $array = mysql_fetch_array($query);
                while($data=mysql_fetch_array($query))
                { 
```

**只需删除第一个 ( `$array = mysql_fetch_array($query);`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T12:35:41.717

在您的代码中

```
 if($counter>0)
            {
                    print("systemResult=Success<br>");
                    $array = mysql_fetch_array($query);

                    while($data=mysql_fetch_array($query))
                    { 
```

你有循环之前`mysql_fetch_array` *。*`while`

只需删除该行，您也将获得第一条记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T12:38:06.487

在此文件中，您参考

@Akam 是的，差不多 - pastebin.com/00WFdnrt 用于精确复制 - Ankur Sharma 2 分钟前

有一个行号。9：

```
 $array = mysql_fetch_array($query);

   while($data=mysql_fetch_array($query)) 
```

这导致丢失第一条记录。

你没有在你的问题中写这个。

# unit-testing - 如何在 AngularJS 中测试具有解析属性的控制器？

> ID：15322155
> 
> 赞同：19
> 
> 时间：2013-03-10T12:20:34.110
> 
> 标签：unit-testing, angularjs, jasmine

如何测试具有解析属性的控制器？它抛出一个错误：未知提供者：InitProvider，在测试期间，可以理解。我该如何测试它？

我使用路由配置中的 init 属性来加载数据并在控制器实例化时将其传递给控制器​​，因此在加载数据之前路由不会改变。

```
 $routeProvider
    .when('/topic/:topic_id/content/:content_id', {
      templateUrl: 'views/content.html',
      controller: 'ContentCtrl',
    resolve: {
      init: ContentCtrl.init
    }
    }); 
```

模式一开始就完全错误吗？

```
'use strict';

var ContentCtrl = ['$scope', '$location', '$routeParams', 'init', function ($scope, $location, $routeParams, init) {

    $scope.contents = init.contents;

  }];

ContentCtrl.init = ['$q', 'app_config', '$log', '$timeout', function ($q, app_config, $log, $timeout) {

    var defer = $q.defer();

    $log.log("ContentCtrl loading..");

    $timeout(function() {
        defer.resolve({contents: [
                                    {message: 'Hello!'}
                                  ]});

        $log.log("ContentCtrl loaded.");

    }, 2000);

    return defer.promise;
}];

angular.module('studentportalenApp').controller('ContentCtrl', ContentCtrl); 
```

我想将整个控制器封装在里面`.controler('ContentCtrl', function() { ... })`，但还没有弄清楚如何正确完成以使 init 在路由配置中可用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-22T10:32:16.280

在这里遇到同样的事情。我使用这里的方法解决了它：[https](https://groups.google.com/forum/?fromgroups=#!topic/angular/LzXm-9nwkjY) ://groups.google.com/forum/?fromgroups=#!topic/angular/LzXm-9nwkjY 。

基本上，我模拟了通常使用简单变量发送的数据，并将其添加到测试中的控制器中。在你的情况下，我认为它看起来像：

```
var initData = {
      contents: [{message: 'Hello!'}]
};
$controller("ContentCtrl", { $scope: ..., init: initData }); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-24T15:41:06.627

正如 charlietfl 所建议的，它最终通过将所有东西都转换为服务来解决。

例子：

**路线配置：**

```
//This helper injects a function with the service 
//defined in the initMethod string and returns services.prepare()
var interceptWith = function(initMethod) {
        return [initMethod, function(m) {
                    return m.prepare();
                }];
}

$routeProvider        
    .when('/foobar/', {
        templateUrl: 'foobar.html',
        controller: 'FoobarCtrl',
        resolve: {
            init: interceptWith('FoobarCtrlInit')
        }
    }); 
```

**foob​​ar 控制器定义：**

```
angular.module('fooApp').controller('FoobarCtrl', ['$scope', 'init', function ($scope, init) {              
            $scope.data = init.data;    
  }])
.service('FoobarCtrlInit', ['$q', '$timeout', function ($q, $timeout) {

        var _prepare = function() {

            var deferred = $q.defer();

            //Fake async loading of data
            $timeout(function() {
                 deferred.resolve({data: ['A','B','C']});
            }, 1000);

            return deferred.promise; 
        }

        return {
            prepare: _prepare
        }
}]); 
```

**为了测试这一点，可以这样做：**

```
'use strict';

describe('Controller: FoobarCtrl', function() {

  // load the controller's module
  beforeEach(module('fooApp'));

  var FoobarCtrl,
    scope;

  // Initialize the controller and a mock scope
  beforeEach(inject(function($controller) {
    scope = {};
    CourseCtrl = $controller('FoobarCtrl', {
      $scope: scope,
      init: {data: ['Testdata A', 'B', 'C']}
    });
  }));

  it('should attach a list of data to the scope', function() {
    expect(scope.data.length).toBe(3);
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-20T01:55:22.773

在 $routeProvider 上使用解析时，我在 Karma 中遇到了同样的错误，我通过在 app.js 的单元测试中测试我的解析来修复它，如下所示：

```
describe("myApp",  function() {

  beforeEach(module('myApp'));

  it('should resolve initial values for my Controller', inject(function( $route ) {
    expect($route.routes['/'].resolve.init).toBeDefined; //or whatever test you want
  }));
}); 
```

然后我只是在我的控制器的测试中模拟了这个值，就像在控制器的描述中一样：

```
//mock out the resolved values to isolate controller code
  beforeEach(module(function($provide) {
    $provide.value('init', function() {
      return 'whatever data you need to mock';
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-10T08:44:41.900

要对路由的解析值进行单元测试：

var resolvedObject = $injector.invoke($route.current.$$route.resolve.testedObject);

# css - 怎么可能 有风格 和 在相对宽度的列中？

> ID：15322158
> 
> 赞同：1
> 
> 时间：2013-03-10T12:20:44.890
> 
> 标签：css, zurb-foundation

使用 zurb 的基础，使用 div 设置具有可变列宽的表单很简单。我需要使用 dl 做同样的事情，例如： - 让 dt 扩展 zurb 网格中的两列（16.7%） - 让列表的所有 dd 填充剩余的 10 列（83.3%）

我找到了使用填充和边距的固定宽度列的解决方案，在父 dd 内嵌套了第二个没有 dt 的 dl。我发现的当前首选的最后一个替代方案只是将 dl 翻倍：

```
<div class="row">
    <div class="small-2 columns">
        <dl class="sub-nav" input-radio>
            <dt>Scope:</dt>
        </dl>
    </div><!-- col -->
    <div class="small-10 columns">
        <dl class="sub-nav" input-radio>
            <dd class="active"><a href="engine" value="videodb">videoDB</a></dd>
            <dd><a href="engine" value="imdb">IMDB</a></dd>
            <dd><a href="engine" value="amazon">Amazon</a></dd>
        </dl>
    </div><!-- col -->
</div><!-- row --> 
```

是否有不需要嵌套 dls 的可变宽度解决方案？

# java - 向在线数据库发出 Put 方法时出现问题

> ID：15322160
> 
> 赞同：0
> 
> 时间：2013-03-10T12:20:54.863
> 
> 标签：java, android, http-put

我正在尝试在我这里拥有的在线数据库上发布一个 Put 是我的代码

```
@Override
public void onRatingChanged(RatingBar arg0, float arg1, boolean arg2)
{
    try
    {
    RatingBar rb = (RatingBar)findViewById(R.id.ratingbar_item);
    float currentRating = rb.getRating();
    float userRating = arg1;
    float count = getIntent().getIntExtra("count", 0);
    String newRating = String.valueOf(((currentRating*count)+userRating)/(count+1));
    rb.setRating(Float.valueOf(newRating));
    String url = "https://api.mongolab.com/api/1/databases/" + getIntent().getStringExtra("State") + "/collections/" + getIntent().getStringExtra("Activity") + "/" + getIntent().getStringExtra("id")  +"?apiKey=xxxxxxxxxxxxxxxxxx";
    HttpClient http = new DefaultHttpClient();
    HttpPut putmethod = new HttpPut(url);

    putmethod.setHeader("Content-Type", "application/xml");
    String content = "{ \"_id\" : { \"$oid\" : \"" + getIntent().getStringExtra("id") +"\"} , \"name\" : \"" + getIntent().getStringExtra("Name") + "\" , \"address\" : \"" + getIntent().getStringExtra("Address") +"\" , \"rating\" : \" " + newRating + "\" , \"count\" : \""+ String.valueOf(count+1) +"\" , \"coordinates\" : \" " + getIntent().getStringExtra("Coordinates") + "\" , \"img\" : \" "+ getIntent().getStringExtra("imgurl") +" \"}";
    putmethod.setEntity(new StringEntity(content,  HTTP.UTF_8));
    HttpResponse response = http.execute(putmethod);
    if (response.getStatusLine().getStatusCode()  == 200) 
        {
        Log.i("rating sent", "success");
        Toast.makeText(getApplicationContext(), "Feedback submitted, Thank you", Toast.LENGTH_LONG).show();
        }
    else
    {
        Log.i("url", url);
        Log.i("rating sent", "failed");
        Log.i("response", String.valueOf(response.getStatusLine().getStatusCode()));
        Log.i("conent", content);

    }
    }
    catch (UnsupportedEncodingException e)
    {
        Log.i("exception",e.getMessage());
    }
    catch(ClientProtocolException e)
    {
        Log.i("exception",e.getMessage());
    }
    catch (IOException e)
    {
        Log.i("exception",e.getMessage());
    }

} 
```

这是我从 logcat 得到的回复

```
03-10 05:13:10.489: I/url(5686): https://api.mongolab.com/api/1/databases/california/collections/Hiking/513c72fce4b07fcc2599c604?apiKey=G9Vr2_cykXY9AJvwe9NF_97R-onVVdFj
03-10 05:13:10.489: I/rating sent(5686): failed
03-10 05:13:10.489: I/response(5686): 415
03-10 05:13:10.499: I/conent(5686): { "_id" : { "$oid" : "513c72fce4b07fcc2599c604"} , "name" : "Test" , "address" : "Wild Cat Canyon Rd, El Cajon, CA 92021" , "rating" : " 2.5" , "count" : "1.0" , "coordinates" : " 32.911225,-116.821318" , "img" : " http://s3-media3.ak.yelpcdn.com/bphoto/j7B-K242DfWWFJfCxc7HQg/l.jpg "} 
```

我知道代码 415 是什么意思，但我确实包含了一个标头，明确指出内容将是 application/xml（我也尝试过 txt/xml，它也不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:26:36.143

您没有在正文中发送 XML。Content-Type 应该与您实际发送的类型相匹配。如果您要发送 JSON（如其所示），您应该设置 application/json. 如果您确实打算发送 XML，则应该将数据包装在 XML 实体中。

# linux - linux grep 某些行

> ID：15322162
> 
> 赞同：1
> 
> 时间：2013-03-10T12:21:00.180
> 
> 标签：linux, grep

嗨，我正在尝试从 .dat 文件中 grep 某些行并将它们放入新文件 test.dat（或 .txt）中。我想 grep 日期/时间 (2012Sep212357) 和以 (FD12P 开头并以 PARS 结尾的行。请记住，2012Sep 之后的日期/时间正在改变。我试过了

```
grep '^2012Sep.*AA$' |'^FD12P.*PARS$' file.dat > test.dat 
```

但它不起作用，输出应该是：

```
2012Sep212357,FD12P_S/N ,      OK  ,  FD, 102, 26578, 16081, C,   0,   0,   0,     0.00,    41.18,    0.0,  0.000,  0.000,  0.000,  0.000,  0.000,  0.000, 15.20,      4, BEL_RAIN,      OK  ,  0.00, -0.20, -1.40, -1.80, -1.40, -1.40, -1.40, 311.0, ,          ,      0,0.0000000,0.0000000, Snow11_Icing ,   OK  , 33, 0909, 190, 17.03, 11111, FD, WS425_SN_,      OK  , 208, 210, 5, 5,  11.4,  11.4,  11.7,   5.9,   6.0,   4.9, 196.3,   6.4, 172.0,   3.5, 194.0,   6.4, 172.0,   1.8, 178.0,   4.6,   6.0,  0,   0.0,   1.6, CR3000_SN_,      OK  , "2012-09-21 20:01:30", "SN_1838", 12.90, 16.47, 17.06, 50.22,1001.1,  0.00,  0.00,2419.6, 432.1,   -4.6,   3.1, 188.5, S78D_SN_,      OK  ,64403.0,64841.0,  10.0, 211.5,   5.4, 206.5,   4.3,   5.4, 209.8,   3.2, 190.3,   5.4, 214.3,   1.6, 191.1,   3.8,  23.2,  0,   0.0,   1.1, 
```

原始文件的样本（我在文件中有很多类似下面的行）：

```
2012Sep212357 23:56:03.06250, AAA_YMDHMS, 2012, 9, 21, 23, 56, 4, POSS_71,      OK  ,  15.0,   73.2,   0.0,   0.0,   C,   0.0,   0.3,   0.6,PS711 78:218:17:41 189.9 205.5  112        1.7        7.3 60  15  51  73.2   0.0     2080,PS712,PS713,PS714,PS715,PS716 F# 51 2.03 7.39 54.98 2.06 0.89 681.1  0.3 11.0 112  14.6 C    376 0.00 0.00 0  0  2  1  112  1.7 189.8 205.4 157.1 192.0 78.5 32.0 928.0 2.0 0.0 -99.0 0.0 10.7 10.7 10000000.0 376 T 4 I 0 ,dia  2 6, 28 22 4,dia  3 5, 26 34 4,dia  4 3 18 17, 3,dia  5 4 25 13 4 1,,dia  6 5 12 7 1,dia  7 6 10 6,dia  8 5 12 4,dia  9 1 3 1,dia  10 2 3 1,dia  11 2 4,dia  12 0 0 1,dia  13 1 1,dia  14 1,dia  15 1 1,dia  16 1 1 1,dia  17 1,dia  18 1 3,dia  22 0 1,dia  23 1,dia  24 1 1,dia  25 1,dia  26 1,dia  29 1,dia  30 1,dia  31 2 2,dia  32 0 3,dia  33 1 2,dia  34 0 1 1,dia  35 1,dia  36 0 3,dia  37 0 2,dia  38 1 2,dia  39 1 2,dia  40 0 2,dia  41 2,dia  42 1 4 1,dia  43 2,dia  44 1 2,dia  45 1 2,dia  47 0 3,dia  49 2,dia  52 2,dia  59 1,dia  60 1,dia  61 1,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia , YANKEE_S/N_0706011,      OK  ,  46.9,  48.2,  -1.3,  17.0,   2.5, 1.000,  -0.8,   0.0,  -0.1,  -0.1,  -1.5,  -3.5,   0.0,   0.0,   0.0,   0.0, CT25K_S/N_A42101,      OK  ,CT0,20,2,3,00, /////, /////, /////,00000300,100,N,100,25,82,206,-4,7,LF7HN1,6,-2,6,5,5,4,4,4,3,4,3,2,2,3,3,2,2,2,3,2,2,2,3,3,2,2,3,3,3,3,3,3,3,3,4,4,4,3,4,4,5,3,4,5,4,3,5,3,6,4,1,5,3,3,4,5,3,3,0,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, FD12P_S/N ,      OK  ,  FD, 102, 26578, 16081, C,   0,   0,   0,     0.00,    41.18,    0.0,  0.000,  0.000,  0.000,  0.000,  0.000,  0.000, 15.20,      4, BEL_RAIN,      OK  ,  0.00, -0.20, -1.40, -1.80, -1.40, -1.40, -1.40, 311.0, ,          ,      0,0.0000000,0.0000000, Snow11_Icing ,   OK  , 33, 0909, 190, 17.03, 11111, FD, WS425_SN_,      OK  , 208, 210, 5, 5,  11.4,  11.4,  11.7,   5.9,   6.0,   4.9, 196.3,   6.4, 172.0,   3.5, 194.0,   6.4, 172.0,   1.8, 178.0,   4.6,   6.0,  0,   0.0,   1.6, CR3000_SN_,      OK  , "2012-09-21 20:01:30", "SN_1838", 12.90, 16.47, 17.06, 50.22,1001.1,  0.00,  0.00,2419.6, 432.1,   -4.6,   3.1, 188.5, S78D_SN_,      OK  ,64403.0,64841.0,  10.0, 211.5,   5.4, 206.5,   4.3,   5.4, 209.8,   3.2, 190.3,   5.4, 214.3,   1.6, 191.1,   3.8,  23.2,  0,   0.0,   1.1, PARS_SN ,      OK  ,  0.00, 147.7,    C,   -10.0,   9999,  19.0, 10057,     0,   0.0,   0.0,   0.0,   0.0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, TB_SN_ ,      OK  ,   0.0,   0.0,   0.0,   0.0, GEONOR_SN_,      OK  ,   1.1,  -0.1,   0.0,  -0.5, MP3000_SN_3031,      OK  , 13611, 09/21/12 23:52:03,   201, 290.8410,  54.5700, 992.6000, 224.9700,   0.0000, 13616, 09/21/12 23:52:52,   301,   2.006,   0.000,  -1.000, 13629, 09/21/12 23:53:40,   301,   2.153,   0.000,  -1.000, 13612, 09/21/12 23:52:49,   401, Zenith33, 290.841, 290.619, 290.324, 289.965, 289.594, 289.315, 289.019, 288.657, 288.252, 287.874, 287.473, 286.550, 285.484, 284.489, 283.557, 282.448, 281.549, 280.729, 279.510, 278.444, 277.386, 276.560, 275.714, 275.025, 274.243, 273.660, 272.269, 270.575, 269.615, 268.371, 267.229, 265.628, 264.201, 262.967, 261.651, 259.787, 258.405, 256.936, 255.301, 253.573, 251.715, 249.948, 248.309, 246.431, 244.513, 242.739, 240.876, 238.979, 237.113, 235.236, 233.310, 231.360, 229.586, 227.806, 226.248, 224.444, 222.997, 221.686, 13613, 09/21/12 23:52:50,   402, Zenith33,   8.112,   7.620,   7.356,   7.167,   7.001,   6.926,   6.905,   6.821,   6.749,   6.753,   6.634,   6.261,   5.949,   5.797,   5.612,   5.539,   5.345,   5.309,   5.308,   5.128,   4.854,   4.559,   4.412,   4.302,   4.119,   3.899,   3.280,   2.939,   2.634,   2.426,   2.251,   2.077,   1.768,   1.456,   1.191,   1.016,   0.836,   0.688,   0.572,   0.498,   0.420,   0.342,   0.315,   0.268,   0.247,   0.216,   0.169,   0.151,   0.117,   0.086,   0.079,   0.057,   0.043,   0.034,   0.027,   0.029,   0.025,   0.023, 13614, 09/21/12 23:52:50,   403, Zenith33,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.001,   0.002,   0.003,   0.004,   0.004,   0.005,   0.006,   0.006,   0.006,   0.005,   0.005,   0.006,   0.006,   0.006,   0.005,   0.004,   0.005,   0.007,   0.001,   0.001,   0.001,   0.001,   0.001,   0.001,   0.000,   0.001,   0.003,   0.001,   0.001,   0.002,   0.004,   0.001,   0.001,   0.004,   0.002,   0.002,   0.001,   0.000,   0.002,   0.000,   0.000,   0.002,   0.001, 13615, 09/21/12 23:52:51,   404, Zenith33,  56.270,  53.729,  53.026,  52.810,  52.940,  53.694,  54.346,  54.964,  55.335,  56.838,  57.384,  58.904,  60.251,  62.294,  63.354,  65.906,  66.386,  69.111,  73.093,  75.221,  75.959,  76.108,  77.720,  79.306,  80.117,  79.051,  73.398,  70.405,  73.031,  72.626,  69.891,  68.496,  69.016,  64.496,  60.284,  56.164,  50.403,  46.814,  43.598,  40.230,  38.220,  36.595,  37.270,  35.931,  35.872,  34.573,  34.382,  31.848,  30.184,  28.592,  27.367,  26.572,  25.385,  24.167,  22.947,  22.196,  20.102,  17.273, 13617, 09/21/12 23:53:37,   401, Angle Scan32(N), 290.841, 290.341, 290.135, 289.888, 289.601, 289.359, 289.063, 288.816, 288.596, 288.292, 287.907, 286.989, 286.151, 285.159, 283.948, 282.604, 281.604, 280.663, 279.693, 278.789, 278.079, 277.346, 276.519, 275.626, 274.793, 274.033, 272.555, 271.680, 270.758, 269.641, 268.433, 266.921, 265.443, 264.229, 263.036, 261.562, 260.179, 258.611, 257.035, 255.240, 253.437, 251.850, 250.007, 248.111, 246.297, 244.386, 242.365, 240.776, 239.021, 237.268, 235.613, 233.999, 232.464, 230.806, 229.090, 227.562, 226.043, 224.730, 13620, 09/21/12 23:53:38,   Angle Scan32(S),   7.814,   6.994,   6.357,   5.945,   5.634,   5.442,   5.438,   5.371,   5.350,   5.230,   5.403,   4.970,   4.875,   4.949,   5.079,   5.089,   4.678,   4.723,   4.734,   4.826,   4.625,   4.731,   5.251,   5.544,   5.911,   6.282,   7.083,   7.490,   7.369,   6.637,   5.359,   3.880,   2.902,   1.757,   1.279,   1.035,   0.725,   0.560,   0.455,   0.361,   0.275,   0.255,   0.190,   0.162,   0.130,   0.122,   0.103,   0.103,   0.080,   0.080,   0.062,   0.061,   0.056,   0.033,   0.026,   0.032,   0.025,   0.020, 13624, 09/21/12 23:53:39,   403, Angle Scan32(S),   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.003,   0.002,   0.003,   0.003,   0.004,   0.006,   0.006,   0.005,   0.005,   0.007,   0.006,   0.003,   0.003,   0.002,   0.004,   0.003,   0.001,   0.001,   0.001,   0.000,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.001,   0.002,   0.003,   0.000, 13627, 09/21/12 23:53:40,   404, Angle Scan32(S),  56.426,  52.621,  49.854,  47.596,  47.538,  48.077,  50.507,  49.331,  49.623,  49.122,  51.626,  50.226,  51.898,  55.446,  57.410,  61.732,  58.361,  60.002,  61.793,  65.138,  68.036,  74.196,  82.373,  85.787, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000,  85.190,  66.155,  53.728,  37.351,  23.545,  17.741,  14.367,  12.172,  13.330,  10.572,  10.516,   9.346,   8.075,   6.828,   5.445,   5.651,   5.252,   5.502,   6.274,   6.017,   6.092,   6.767,   6.991,   5.608,   4.837, 13619, 09/21/12 23:53:37,   401, Angle Scan32(A), 290.841, 290.480, 290.186, 289.854, 289.535, 289.214, 288.917, 288.581, 288.361, 288.152, 287.764, 286.828, 286.006, 284.883, 283.694, 282.416, 281.453, 280.518, 279.586, 278.614, 277.817, 277.085, 276.148, 275.167, 274.327, 273.550, 271.972, 270.837, 269.920, 268.786, 267.391, 265.698, 264.125, 263.022, 261.916, 260.413, 259.030, 257.379, 255.820, 253.810, 251.899, 250.295, 248.273, 246.140, 244.078, 242.025, 239.986, 238.294, 236.323, 234.485, 232.698, 230.971, 229.531, 227.863, 226.234, 224.886, 223.635, 222.540, 13622, 09/21/12 23:53:38,   402, Angle Scan32(A),   7.987,   7.424,   6.955,   6.634,   6.380,   6.247,   6.209,   6.208,   6.193,   6.097,   6.195,   5.877,   5.729,   5.754,   5.761,   5.682,   5.312,   5.292,   5.284,   5.308,   5.132,   5.058,   5.182,   5.206,   5.294,   5.250,   5.203,   4.958,   4.590,   4.145,   3.543,   2.837,   2.317,   1.620,   1.235,   1.011,   0.768,   0.615,   0.497,   0.416,   0.336,   0.293,   0.233,   0.196,   0.162,   0.141,   0.123,   0.115,   0.092,   0.091,   0.069,   0.064,   0.054,   0.033,   0.026,   0.032,   0.026,   0.021, 13625, 09/21/12 23:53:39,   403, Angle Scan32(A),   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.000,   0.000,   0.002,   0.003,   0.003,   0.003,   0.004,   0.005,   0.007,   0.006,   0.005,   0.005,   0.008,   0.006,   0.003,   0.003,   0.002,   0.004,   0.003,   0.001,   0.001,   0.001,   0.000,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.001,   0.002,   0.003,   0.000, 13628, 09/21/12 23:53:40,   404, Angle Scan32(A),  56.682,  53.972,  51.892,  50.578,  50.563,  50.727,  52.154,  52.163,  52.709,  52.844,  54.714,  54.856,  56.689,  60.229,  62.028,  64.870,  63.262,  65.752,  68.310,  71.277,  73.323,  76.555,  79.852,  81.290,  88.961,  92.860, 100.000, 100.000, 100.000, 100.000, 100.000,  99.377,  92.961,  72.472,  62.030,  54.508,  43.265,  32.818,  27.337,  23.694,  21.524,  22.368,  19.811,  19.031,  18.017,  16.873,  15.321,  13.403,  13.020,  12.580,  12.825,  13.851,  13.301,  13.059,  13.511,  13.757,  11.592,  10.430, 290.841,  54.570, 992.600, 224.970,   0.000, BACIC_, No ,belraw3110.0,belsum  -1.8,fdsum   0.0,fdsnow   0.0,yksum  -3.5,ykcsum   0.0,S78D-  OK  ,PARtotal 147.7,ParCnt   0.0,Counter 594.0,Max_ws   6.4,Dir 172.0,Delta_ws   4.6,gust   0.0
2012Sep212358 23:57:03.06250, AAA_YMDHMS, 2012, 9, 21, 23, 57, 4, POSS_71,      OK  ,  15.0,   73.2,   0.0,   0.0,   C,   0.0,   0.3,   0.6,PS711 78:218:17:42 390.3 297.2   64         .1        2.1 60  15  49  73.2   0.0     2080,PS712,PS713,PS714,PS715,PS716 F# 49 2.03 2.14 1.03 2.01 1.07 19.2  0.2 12.4 64  14.7 C    376 0.00 0.00 0  0  3  1  64  0.1 390.3 297.2 149.0 176.3 83.8 32.0 944.0 2.3 0.0 -99.0 0.0 10.7 10.7 10000000.0 376 T 1 I 0 ,dia  2 5, 26 20 3,dia  3 4, 26 20 3,dia  4 6 22 18, 1 0 0 1 0 1,dia  5 4 15 20 3 0, 1,dia  6 4 15 8 4,dia  7 8 14 7,dia  8 4 7 6 0 0 1,dia  9 4 9 4,dia  10 3 7,dia  11 3 1 1,dia  12 1 3,dia  14 2 2,dia  15 1 3,dia  16 1 2 1,dia  17 4 2,dia  21 1,dia  22 0 1,dia  23 2 1,dia  25 0 1,dia  26 1,dia  27 1,dia  29 1,dia  30 1 1,dia  31 1,dia  32 2,dia  33 1 1,dia  34 0 2,dia  36 0 1,dia  37 1 2,dia  38 1 1,dia  39 0 2,dia  40 0 0 1,dia  41 3 3 1,dia  42 1,dia  43 2 0 1,dia  45 1 1,dia  47 0 1,dia  48 1 1,dia  55 1,dia  59 1,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia , YANKEE_S/N_0706011,      OK  ,  55.7,  56.8,  -1.2,  17.0,   3.2, 1.000,  -0.9,   0.0,   0.0,  -0.1,  -1.5,  -3.5,   0.0,   0.0,   0.0,   0.0, CT25K_S/N_A42101,      OK  ,CT0,20,2,3,00, /////, /////, /////,00000300,100,N,100,25,82,206,-4,7,LF7HN1,6,-2,6,5,5,4,4,4,3,4,3,2,2,3,3,2,2,2,3,2,2,2,2,3,2,2,3,3,3,3,3,3,3,3,4,4,4,3,4,5,6,2,5,4,5,3,3,4,5,4,2,4,3,2,4,5,3,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, FD12P_S/N ,      OK  ,  FD, 102, 20517, 16565, C,   0,   0,   0,     0.00,    41.18,    0.0,  0.000,  0.000,  0.000,  0.000,  0.000,  0.000, 15.20,      4, BEL_RAIN,      OK  ,  0.00, -0.20, -1.40, -1.80, -1.40, -1.40, -1.40, 311.0, ,          ,      0,0.0000000,0.0000000, Snow11_Icing ,   OK  , 33, 0909, 182, 17.07, 11111, F8, WS425_SN_,      OK  , 202, 197, 5, 5,   8.5,   8.5,   8.9,   4.4,   4.6,   5.2, 196.6,   6.4, 172.0,   3.6, 198.0,   6.4, 172.0,   2.0, 178.0,   4.4,   6.0,  0,   0.0,   1.2, CR3000_SN_,      OK  , "2012-09-21 20:02:30", "SN_1838", 12.91, 16.45, 17.06, 49.96,1001.1,  0.00,  0.00,2419.4, 432.0,   -4.4,   3.2, 206.6, S78D_SN_,      OK  ,64628.0,64977.0,   8.0, 211.6,   4.3, 207.1,   4.6,   5.4, 209.8,   3.2, 190.3,   5.4, 214.3,   1.6, 191.1,   3.8,  23.2,  0,   0.0,   0.8, PARS_SN ,      OK  ,  0.00, 147.7,    C,   -10.0,   9999,  19.0, 10059,     0,   0.0,   0.0,   0.0,   0.0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, TB_SN_ ,      OK  ,   0.0,   0.0,   0.0,   0.0, GEONOR_SN_,      OK  ,  -0.2,  -0.2,   0.0,  -0.5, MP3000_SN_3031,      OK  , 13611, 09/21/12 23:52:03,   201, 290.8410,  54.5700, 992.6000, 224.9700,   0.0000, 13616, 09/21/12 23:52:52,   301,   2.006,   0.000,  -1.000, 13629, 09/21/12 23:53:40,   301,   2.153,   0.000,  -1.000, 13612, 09/21/12 23:52:49,   401, Zenith33, 290.841, 290.619, 290.324, 289.965, 289.594, 289.315, 289.019, 288.657, 288.252, 287.874, 287.473, 286.550, 285.484, 284.489, 283.557, 282.448, 281.549, 280.729, 279.510, 278.444, 277.386, 276.560, 275.714, 275.025, 274.243, 273.660, 272.269, 270.575, 269.615, 268.371, 267.229, 265.628, 264.201, 262.967, 261.651, 259.787, 258.405, 256.936, 255.301, 253.573, 251.715, 249.948, 248.309, 246.431, 244.513, 242.739, 240.876, 238.979, 237.113, 235.236, 233.310, 231.360, 229.586, 227.806, 226.248, 224.444, 222.997, 221.686, 13613, 09/21/12 23:52:50,   402, Zenith33,   8.112,   7.620,   7.356,   7.167,   7.001,   6.926,   6.905,   6.821,   6.749,   6.753,   6.634,   6.261,   5.949,   5.797,   5.612,   5.539,   5.345,   5.309,   5.308,   5.128,   4.854,   4.559,   4.412,   4.302,   4.119,   3.899,   3.280,   2.939,   2.634,   2.426,   2.251,   2.077,   1.768,   1.456,   1.191,   1.016,   0.836,   0.688,   0.572,   0.498,   0.420,   0.342,   0.315,   0.268,   0.247,   0.216,   0.169,   0.151,   0.117,   0.086,   0.079,   0.057,   0.043,   0.034,   0.027,   0.029,   0.025,   0.023, 13614, 09/21/12 23:52:50,   403, Zenith33,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.001,   0.002,   0.003,   0.004,   0.004,   0.005,   0.006,   0.006,   0.006,   0.005,   0.005,   0.006,   0.006,   0.006,   0.005,   0.004,   0.005,   0.007,   0.001,   0.001,   0.001,   0.001,   0.001,   0.001,   0.000,   0.001,   0.003,   0.001,   0.001,   0.002,   0.004,   0.001,   0.001,   0.004,   0.002,   0.002,   0.001,   0.000,   0.002,   0.000,   0.000,   0.002,   0.001, 13615, 09/21/12 23:52:51,   404, Zenith33,  56.270,  53.729,  53.026,  52.810,  52.940,  53.694,  54.346,  54.964,  55.335,  56.838,  57.384,  58.904,  60.251,  62.294,  63.354,  65.906,  66.386,  69.111,  73.093,  75.221,  75.959,  76.108,  77.720,  79.306,  80.117,  79.051,  73.398,  70.405,  73.031,  72.626,  69.891,  68.496,  69.016,  64.496,  60.284,  56.164,  50.403,  46.814,  43.598,  40.230,  38.220,  36.595,  37.270,  35.931,  35.872,  34.573,  34.382,  31.848,  30.184,  28.592,  27.367,  26.572,  25.385,  24.167,  22.947,  22.196,  20.102,  17.273, 13617, 09/21/12 23:53:37,   401, Angle Scan32(N), 290.841, 290.341, 290.135, 289.888, 289.601, 289.359, 289.063, 288.816, 288.596, 288.292, 287.907, 286.989, 286.151, 285.159, 283.948, 282.604, 281.604, 280.663, 279.693, 278.789, 278.079, 277.346, 276.519, 275.626, 274.793, 274.033, 272.555, 271.680, 270.758, 269.641, 268.433, 266.921, 265.443, 264.229, 263.036, 261.562, 260.179, 258.611, 257.035, 255.240, 253.437, 251.850, 250.007, 248.111, 246.297, 244.386, 242.365, 240.776, 239.021, 237.268, 235.613, 233.999, 232.464, 230.806, 229.090, 227.562, 226.043, 224.730, 13620, 09/21/12 23:53:38,   402, Angle Scan32(N),   8.160,   7.857,   7.577,   7.363,   7.180,   7.123,   7.047,   7.133,   7.134,   7.075,   7.083,   6.916,   6.715,   6.682,   6.530,   6.323,   5.999,   5.897,   5.845,   5.772,   5.604,   5.312,   5.007,   4.764,   4.590,   4.224,   3.621,   3.104,   2.680,   2.432,   2.241,   2.012,   1.820,   1.490,   1.207,   1.003,   0.830,   0.694,   0.557,   0.489,   0.417,   0.340,   0.290,   0.240,   0.203,   0.165,   0.148,   0.128,   0.105,   0.104,   0.077,   0.066,   0.051,   0.031,   0.026,   0.032,   0.027,   0.023, 13623, 09/21/12 23:53:39,   403, Angle Scan32(N),   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.001,   0.002,   0.003,   0.003,   0.003,   0.004,   0.005,   0.007,   0.006,   0.005,   0.005,   0.008,   0.007,   0.004,   0.003,   0.002,   0.004,   0.003,   0.001,   0.001,   0.001,   0.000,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.001,   0.002,   0.003,   0.000, 13626, 09/21/12 23:53:40,   404, Angle Scan32(N),  57.019,  55.193,  53.564,  53.315,  53.339,  53.281,  53.637,  55.162,  56.061,  56.732,  57.804,  59.747,  61.663,  65.110,  66.650,  67.988,  67.915,  70.569,  73.641,  75.918,  76.393,  76.266,  74.408,  74.010,  74.288,  73.384,  70.577,  66.022,  65.699,  65.979,  65.527,  66.482,  68.845,  60.866,  56.617,  53.351,  47.036,  41.541,  38.110,  35.401,  34.460,  33.999,  33.480,  31.319,  31.345,  31.507,  30.179,  28.661,  26.417,  26.580,  26.578,  27.422,  26.442,  25.451,  24.835,  25.084,  22.074,  20.811, 13618, 09/21/12 23:53:37,   401, Angle Scan32(S), 290.841, 290.626, 290.240, 289.821, 289.469, 289.065, 288.771, 288.341, 288.121, 288.010, 287.614, 286.667, 285.864, 284.613, 283.457, 282.245, 281.322, 280.393, 279.502, 278.463, 277.581, 276.853, 275.805, 274.735, 273.891, 273.092, 271.414, 270.019, 269.101, 267.951, 266.361, 264.487, 262.818, 261.826, 260.810, 259.275, 257.892, 256.162, 254.619, 252.395, 250.385, 248.765, 246.572, 244.208, 241.912, 239.723, 237.677, 235.897, 233.725, 231.819, 229.917, 228.090, 226.747, 225.073, 223.535, 222.356, 221.359, 220.467, 13621, 09/21/12 23:53:38,   402, Angle Scan32(S),   7.814,   6.994,   6.357,   5.945,   5.634,   5.442,   5.438,   5.371,   5.350,   5.230,   5.403,   4.970,   4.875,   4.949,   5.079,   5.089,   4.678,   4.723,   4.734,   4.826,   4.625,   4.731,   5.251,   5.544,   5.911,   6.282,   7.083,   7.490,   7.369,   6.637,   5.359,   3.880,   2.902,   1.757,   1.279,   1.035,   0.725,   0.560,   0.455,   0.361,   0.275,   0.255,   0.190,   0.162,   0.130,   0.122,   0.103,   0.103,   0.080,   0.080,   0.062,   0.061,   0.056,   0.033,   0.026,   0.032,   0.025,   0.020, 13624, 09/21/12 23:53:39,   403, Angle Scan32(S),   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.003,   0.002,   0.003,   0.003,   0.004,   0.006,   0.006,   0.005,   0.005,   0.007,   0.006,   0.003,   0.003,   0.002,   0.004,   0.003,   0.001,   0.001,   0.001,   0.000,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.001,   0.002,   0.003,   0.000, 13627, 09/21/12 23:53:40,   404, Angle Scan32(S),  56.426,  52.621,  49.854,  47.596,  47.538,  48.077,  50.507,  49.331,  49.623,  49.122,  51.626,  50.226,  51.898,  55.446,  57.410,  61.732,  58.361,  60.002,  61.793,  65.138,  68.036,  74.196,  82.373,  85.787, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000,  85.190,  66.155,  53.728,  37.351,  23.545,  17.741,  14.367,  12.172,  13.330,  10.572,  10.516,   9.346,   8.075,   6.828,   5.445,   5.651,   5.252,   5.502,   6.274,   6.017,   6.092,   6.767,   6.991,   5.608,   4.837, 13619, 09/21/12 23:53:37,   401, Angle Scan32(A), 290.841, 290.480, 290.186, 289.854, 289.535, 289.214, 288.917, 288.581, 288.361, 288.152, 287.764, 286.828, 286.006, 284.883, 283.694, 282.416, 281.453, 280.518, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:29:55.477

您在这里有两个不同的操作。首先是行的选择，将自己限制为仅以字符串开头`2012Sep`并包含字符串`FD12P`和`, PARS`（按此顺序）的行。

第二个是过滤这些行中的每一行，以仅保留日期和和之间的文本`FDP12`（`PARS`不包括`PARS`本身）。

第一个操作可以用`grep`管道中的 a 完成，第二个操作可以用 a 完成`sed`：

```
grep '^2012Sep.*, FD12P.*, PARS' infile.dat
    | sed -e 's/ .*, FD12P/, FD12P/'
          -e 's/, PARS.*$//'
    >outfile.dat 
```

这取决于您应该检查的几件事。

*   日期后紧跟一个空格；
*   只有一个`FDP12`和`PARS`在行中；
*   `FD12P`and`PARS`总是以（`", "`逗号、空格）开头。

如果其中任何一个结果不正确，您可能需要调整 和 的`grep`参数`sed`。如果违反了第二条规则，这尤其值得关注，因为您必须更详细地指定您希望它的行为方式。

以下记录显示了这一点：

```
pax> cat qq.in
2012Sep212357 23:56, AAA_YMDHMS, FD12P_S/N , blah, PARS, more blah
a dummy line which should not match
2012Sep212358 23:57, AAA_YMDHMS, FD12P_S/N , yada, PARS_xyzzy, more yada

pax> grep '^2012Sep.*FD12P.*, PARS' qq.in
...> | sed -e 's/ .*FD12P/, FD12P/' -e 's/, PARS.*$//'
2012Sep212357, FD12P_S/N , blah
2012Sep212358, FD12P_S/N , yada 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:40:39.220

您可以通过提供多个来分隔正则表达式`-e`：

```
grep -e '^2012Sep' -e '^FD12P.*PARS$' file.dat 
```

另外，从您在上一个答案中的最后一条评论中，我了解到您不仅想找到匹配的行，还想提取匹配的行。

使用 gnu grep，您可以使用以下`-o`标志：

```
grep -oe '^2012Sep' -e '^FD12P.*PARS$' file.dat 
```

**编辑：**

假设您要查找以 2012Sep 开头并包含 FD12P 和 PARS 的所有行，并且只输出特定部分。[`sed`](http://www.gnu.org/software/sed/)在这种情况下更有意义：

```
sed -ne 's#^\(2012Sep[^ ]*\).*\(FD12P.*\)PARS.*#\1,\2#p' file.dat | sed -e 's#  *# #g' 
```

*   `-n`告诉 sed 默认情况下不要回显行
*   `p`当行匹配时，该标志告诉 sed 输出行
*   括号创建要保留的数据组
*   \1 和 \2 引用组
*   我们匹配整行（我们想要的数据周围的.*），这意味着只有我们的替换将保留

# android - 在inapp计费消费android中获取响应代码为5

> ID：15322165
> 
> 赞同：4
> 
> 时间：2013-03-10T12:21:22.560
> 
> 标签：android, in-app-purchase, in-app-billing

实际上我正在尝试在 android 中进行应用内购买，并且我已经从 android sdk 下载了琐碎的驱动器。我可以通过调用launchPurchaseFlow 方法成功购买，但问题是当我尝试通过调用consumeAsync 方法来消费产品时，我得到的响应代码为5（开发人员错误）。这是购买成功后我正在执行的代码

```
mHelper.consumeAsync(inventory.getPurchase(SKU_GAS), mConsumeFinishedListener); 
```

任何人请尽快为我提供解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T12:23:55.963

开发者错误（代码 = 5）通常意味着您正在使用与您通过开发者控制台上传的 APK 签名不同的应用程序进行测试，或者该应用程序的版本/版本代码与您上传的 APK 不同。

根据文档（[http://developer.android.com/google/play/billing/billing_reference.html](http://developer.android.com/google/play/billing/billing_reference.html)）：

“提供给 API 的参数无效。此错误还可能表明应用程序未正确签名或未正确设置 Google Play 中的应用内结算，或者在其清单中没有必要的权限”

例如，如果您使用使用调试密钥签名的 APK 进行测试，您可能会收到此错误。它应该使用与上传到 Google Play 商店的开发者控制台进行测试的 APK 相同的密钥（通常是您将用于已发布应用的密钥）进行签名。

此外，如果您使用的 APK 版本代码与当前上传到开发者控制台的 APK 版本代码不同，您可能会收到此错误代码 5（开发者错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:25:07.023

存在这方面的问题。这是暂时的（我们希望如此），但在 2013 年 3 月 8 日左右推出。请对此错误报告加注星标并发表评论：[https](https://code.google.com/p/android/issues/detail?id=53077) ://code.google.com/p/android/issues/detail?id=53077 。

# entity-framework - 如何使用字符串“where 子句”查询 DbSet？

> ID：15322170
> 
> 赞同：0
> 
> 时间：2013-03-10T12:21:43.033
> 
> 标签：entity-framework, entity-framework-5, repository-pattern, repository

我有以下（大大删节的）通用存储库类：

```
public class Repository<TEntity> : IRepository<TEntity> where TEntity : class
{
    private DbSet<TEntity> _entitySet;
    private NewExternalsContext _dbContect;

    public Repository(NewExternalsContext dbContext)
    {
        _dbContect = dbContext;
        _entitySet = _dbContect.Set<TEntity>();
    }

    public virtual TEntity Get(object objectId)
    {
        // TODO Figure out how to use 'id' to build an Expression<Func<TEntity, bool>>.
        throw new NotImplementedException();
    }

    public virtual TEntity FindOne(Expression<Func<TEntity, bool>> where)
    {
        return _entitySet.FirstOrDefault(where);
    }
} 
```

我对该`public virtual TEntity Get(object objectId)`方法的问题是，因为存储库是通用的，我不知道它`TEntity`有任何 id 字段，或者它被称为什么。我能做的最好的就是检查它是否有一个`Id`字段，我最常用的 id 字段名称。那么，我该怎么说`_entitySet.Where("Id = " + objectId)`呢？我有`public virtual TEntity FindOne(Expression<Func<TEntity, bool>> where)`方法，但是当我只想通过 获取对象时`id`，就像很常见的那样，我不想写出整个 lambda 表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:35:51.690

您将需要创建另一个返回实体的方法，如以下问题所示：[How to get ObjectSet<T>'s entity key name?](https://stackoverflow.com/questions/3328325/how-to-get-objectsetts-entity-key-name) ，您可以稍微作弊并通过 id 获取实体，如下所示：

```
 public T GetById(int id)
    {
        var keyPropertyName =_objectSet.EntitySet.ElementType.KeyMembers[0].ToString();          
        T entity = _objectSet.Where("it." + keyPropertyName + "=" + id).First();
        return entity;
    } 
```

# python - 在 Python 中使用 .find 查找第一个非数字字符

> ID：15322171
> 
> 赞同：3
> 
> 时间：2013-03-10T12:21:46.183
> 
> 标签：python, regex

我有一个字符串，其中包含`ABC 12345`但也包含`ABC 98765.`或`ABC 55555<`

为了查找`ABC`然后识别我使用的以下数字序列

```
index = page.find('ABC',index)
t1 = page.find(' ',index+1)
t2 = page.find(' ',t1+4) 
```

这给了我`12345`一个结果，但不是`98765`or `55555`。

如何更改第 3 行以查找空格和其他字符，例如`.`or `<`？

我试过了

```
import re

t2 = re.search("\d", page,t1+4) 
```

但是这种语法被破坏了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T12:24:52.853

使用正则表达式查找文字文本`ABC`和可选空格后面的数字：

```
match = re.search(r'ABC\s*(\d+)', page)
if match:
    print match.group(1) 
```

无论数字后面是什么，这都有效：

```
>>> re.search(r'ABC\s*(\d+)', 'ABC 98765.').group(1)
'98765'
>>> re.search(r'ABC\s*(\d+)', 'ABC 55555<').group(1)
'55555' 
```

如果您需要查找多个匹配项，请`findall()`改用：

```
matches = re.findall(r'ABC\s*(\d+)', page) 
```

它为您提供了文字文本后面的所有数字组的列表`ABC`：

```
>>> re.findall(r'ABC\s*(\d+)', 'Some text with ABC 98765\. There is some other text too, with ABC 55555<!')
['98765', '55555'] 
```

# codeigniter - CodeIgniter 中的资产

> ID：15322177
> 
> 赞同：0
> 
> 时间：2013-03-10T12:22:14.857
> 
> 标签：codeigniter

我在 Codeigniter 中有以下文件结构：

```
application
system
assets
-- js
-- imgs
-- css 
```

从我读过的内容来看，为了正确链接到这些资产文件，我应该像这样创建一个助手：

```
function asset_url(){
   return base_url().'assets/';
} 
```

我对 Codeigniter 和 MVC 架构完全陌生。请有人解释我是如何做到这一点的。

我是否在 application/helpers 文件夹中创建一个名为“asset_helper.php”的新文件，然后将上面的代码放入？

那么我在我的html中写什么来链接到我的资产文件夹中的一个css文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:41:21.447

是的，如[帮助指南](http://ellislab.com/codeigniter/user-guide/general/helpers.html)（以及您的问题）中所述，您将函数放在以文件名`application/helpers/`结尾`_helper.php`的文件中。一旦你有了它，你将不得不加载它

```
$this->load->helper('asset'); 
```

或者使用`application/config/autoload.php`.

您可能希望`_helper.php`使用这样的 if 来扭曲文件中的各个函数：

```
if ( ! function_exists('asset_url')) {
    function asset_url() {
        // ...
    }
} 
```

因此，在名称冲突的情况下，您不会出现致命错误。我认为最好知道是否存在冲突，但是 CI 自己的帮助文件会这样做，因此您可以使用冲突名称定义自己的一两个帮助者，同时让同一个帮助文件中的其他人保持原样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:41:32.130

一个简单的

```
<link rel="stylesheet" href="<?=base_url('assets/css');?>" type="text/css"> 
```

会成功的。

但是如果你想跟着它，你可以直接把函数放在core`uri_helper`上找到`system/helpers/url_helper`或者在目录上创建一个新的helper `application/helper`，注意你的文件必须以a`_helper`结尾，example `filename_of_myhelper_helper`，然后你可以加载它`$this->load->helper('filename_of_myhelper')`，还要记住，和的区别`helper`在于`library`a`library`是一个类，而 a`helper`只是一个具有各种功能的 php 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:56:24.237

我通常使用

```
$cssFooPath = $this->config->base_url() . 'css/foo.css'; 
```

这样，codeigniter 处理基本 url（为您提供 html 文件中的绝对路径，我将资产目录放在应用程序的根目录中，就像您一样。对于“js/foo.js”或“img/foo”也是如此.png' 显然。

如果您使用的是 apache，则使用此 .htaccess

```
RewriteEngine on
RewriteBase /
RewriteCond $1 !^(index\.php|images|robots\.txt|assets|hg)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

当文件没有更改时，可以很容易地提供 http 标头，因为 apache 将处理所有这些

# deployment - 自动将 Azure 包发布/部署到云

> ID：15322178
> 
> 赞同：0
> 
> 时间：2013-03-10T12:22:22.627
> 
> 标签：deployment, azure, msbuild

我想让 CI 构建 Azure 包并将其部署到云暂存。我关注[了 http://www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/#step4](http://www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/#step4)

本教程从 power shell 脚本部署，但它不起作用。有如下错误...

Get-AzureDeployment：“调用 ServiceManagement API 时发生异常。HTTP 状态代码：404。服务管理错误代码：ResourceNotFound。消息：未找到部署。操作跟踪 ID：

请指出我正确的方向。我不确定 powershell 是好的一种还是有其他方法可以创建 MSBuild 脚本以将 Azure 部署到云？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:41:38.247

如果发现我的问题。一旦我深入研究 pwoershell 脚本。我需要更改订阅名称以遵循我的 credentials.publishsettings 文件。在我更改或指定 powershell 脚本参数后。它工作正常。

参数（$serviceName = "", $storageAccountName = "", $packageLocation = "", $cloudConfigLocation = "", $environment = "Staging", $deploymentLabel = "ContinuousDeploy to $servicename", $timeStampFormat = "g", $alwaysDeleteExistingDeployments = 1, $enableDeploymentUpgrade = 1, **$selectedsubscription = "'3-Month Free Trial",** $subscriptionDataFile = "")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T15:35:32.987

使用特定服务名称调用 Get-AzureDeployment 将假定您已经创建了服务（例如 yourname.cloudapp.net）。我不知道你是否已经这样做了，但这是我要做的第一件事。您在本教程中引用的脚本负责在该服务名称中创建*部署*，甚至处理不存在的部署。但是，我没有看到任何为您创建实际服务的东西，所以这可能就是脚本失败的原因。参见第 4 步中的第 7 项：

```
New-AzureService -ServiceName "mytestcloudservice" -Location "North Central US" -Label "mytestcloudservice" 
```

希望这就是你遇到的问题。

# asp.net-mvc - 从局部视图访问父模型

> ID：15322180
> 
> 赞同：17
> 
> 时间：2013-03-10T12:23:22.390
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, partial-views

我问是因为我将创建的部分视图是空白的，目的是创建一个新的子实体。我只需要一种快速（无论是否肮脏）从局部视图中访问父模型的方法。我需要父母的身份证。

局部视图是否会自动访问父模型？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-10T12:35:19.173

您不能从局部视图访问父模型，除非您在渲染它时将一些值作为参数传递给该局部模型。例如在您的主视图中：

```
@model MyViewModel
...
@Html.Partial("_myPartial", new ViewDataDictionary(new { id = Model.Id })); 
```

然后在您的部分内部，您可以访问`Id`：

```
<div>@ViewBag.Id</div> 
```

当然，这是将数据传递给局部视图的一种非常糟糕的方式。正确的方法是使用强类型视图模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-25T13:24:17.150

我知道这是一个老话题，但我想我还是把我的解决方案添加到同一个问题上。我认为它有点清洁。

基本上将模型添加到局部视图。

封装视图：

```
@model whatever
...
@Html.Partial("partialview", anotherwhatever) 
```

部分观点：

```
@model anotherwhatever
<div>@Model.something</div>
... 
```

在我的例子中，我只需要将一个字符串传递到部分视图中（只是使用它来缩短和划分代码），所以这比其他解决方案要优雅得多。

我首先尝试了另一个解决方案，但实际上无法让它工作，它只是表现得好像我传递的值是空白的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-17T20:16:49.497

这最终为我工作。

```
@model MyViewModel
...
@Html.Partial("_myPartial", new ViewDataDictionary { { "id", Model.Id } }) 
```

在局部视图中，使用了这个......

```
<div>@ViewBag.id</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-24T00:22:57.070

在正常情况下，您可以而且应该只将值传递给部分，但我们遇到了一个没有意义的极端情况。如果您绝对确定必须这样做，您可以轻松访问父模型或 ViewBag，如​​下所示：

```
// Get the parent's model
var model ViewContext.Controller.ViewData.Model as MyType
// Get the parent's ViewBag
var value = ViewContext.Controller.ViewBag.MyVariableName as MyType 
```

我们遇到的情况有以下限制，导致我们使用它：

1.  部分是自动生成、插入和呈现，而不是从我们的 Razor 页面显式调用（在我们的例子中，这些是由我们的 CMS 以特定字数插入到文章中的广告）
2.  我们在自动渲染时传递给 Partial 的模型是根据保存在 DB 中的值生成的，所以我们只想在模型中拥有绝对不会改变的东西（并且不能包含用户特定的信息或可能在不重新生成页面的情况下更改的信息）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-19T14:52:41.323

您可以只传递模型 IE：

封装视图：

```
 @model MyModel
    @Html.Partial("_myPartial", Model) 
```

局部视图：

```
 @model MyModel
    Id = @Model.Id; 
```

# html - 为什么我在使用谷歌浏览器时拇指会消失？

> ID：15322187
> 
> 赞同：0
> 
> 时间：2013-03-10T12:23:54.247
> 
> 标签：html, css, google-chrome, html-lists

所以我制作了自己的摄影作品集网站[——www.ignasphoto.com](http://www.ignasphoto.com)。现在因为我对 html/css 很陌生，所有这一切都是我的第一个工作。但是，在使用 Google chrome 时，我在主索引页面上的拇指列表出现问题。有时，页面加载时部分或全部拇指不可见，仅在刷新页面后才会出现。它们有时会在我单击拇指后消失，然后返回索引页面并仅在刷新页面后重新出现。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:31:40.993

我知道这不是您问题的答案，但我注意到在查看您网站中的源代码时，您`<head>`可以`<script>`设置效果参数。

如果您想稍微整理一下，可以将该脚本移动到 .js 文件中，然后链接到它。

因此，如果您在根目录中创建了一个名为 effect.js 的新文件，并将所有介于两者之间的内容剪切并粘贴`<script>`到`</script>`effect.js 中，那么您可以使用以下命令在脑海中调用它：

`<script type="text/javascript" src="effect.js"></script>`

# javascript - 如何以正确的方式改变和动画 div？

> ID：15322189
> 
> 赞同：0
> 
> 时间：2013-03-10T12:24:42.400
> 
> 标签：javascript, jquery

我有一个这样的div：

```
<div class="class1">
    <div class="class2"></div>
    <div class="class3"></div>
    <div class="class4">
         <div class="class5"></div>
    </div>
</div> 
```

此 div 在页面上存在多次。

现在我想删除一些子元素，重新排列其他元素并以正确的方式为该过程设置动画。

目前我这样做。

例子：

```
var mainElement = $('class1');

mainElement.find('class2').css('property','value');
mainElement.find('class3').remove();
mainElement.find('class4').animate({'property': 'value'});

```

这可行，但并不像我希望的那样顺利。一次对一个元素执行此操作时，它可以工作，但即使这样也有点不稳定。然而，主要问题是这段代码是在页面加载时执行的，就像我之前说的，它同时应用于更多元素。然后它变得非常不稳定，以至于你根本看不到动画。

有人可以向我解释如何以正确的方式做到这一点吗？

当我这样做时，例如 $('class1').fadOut() 工作非常顺利，即使同时处理 50 个元素。

问候，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:30:32.820

目前尚不清楚您正在制作什么动画，但如果您移动 div 以导致页面重新流动，您将获得较差的性能。尝试通过使它们绝对定位来将您的 div 从页面流中取出。淡入淡出会表现良好，因为它不会影响布局。

# asp.net - 检查数据库并返回结果

> ID：15322195
> 
> 赞同：0
> 
> 时间：2013-03-10T12:25:26.393
> 
> 标签：asp.net

我只是想检查数据库以查看用户是否与其他用户成为朋友

在控制器中

```
 [NonAction]
    public bool IsFriend(int UserId, int id)
    {
            int query = _service.IsFriend(UserId, id);
            if (query > 0)
            {
                return true;
            }
            else
            {
                return false;
            }
    } 
```

如果我可以为其传递正确的参数，这将起作用

我怎么能从我有数据的视图中使用它。我知道它不是很好的身份，例如

IsFriend(User.Id, Model.Userid)

model.userid 是朋友检查 userid 是登录用户的 id

从一个角度来看，这甚至可能吗？

使用剃须刀 cshmtl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:44:51.937

您可以将方法移动到更常见的位置（可能是帮助类），然后`using`在您的视图中添加语句并调用该函数

```
@model YourPageViewModel

@using YourProject.HelperNameSpaceName
<div>  
  @foreach(var friend in Model.KnownPeople)
  {
    <p>@friend.Name</p>
    <p>@(IsFriend(friend.ID, Model.UserId)??"is friend":" is not friend")</p>    
  }
</div> 
```

但我建议你做的是在你的操作方法而不是你的视图中做这件事。只需检查您的 Action 方法并仅将 Friend 用户添加到您的视图模型的 Friends 集合属性中。然后在视图中，简单地显示它。

```
public ActionMethod Profile(int userId)
{
  var profileViewModel=new ProfileViewModel();
  var knownPeoples=repo.GetAllKnownPeopls(userId);
  foreach(var person in knownPeoples)
  {
    if(IsFriend(person.ID, profileViewModel.CurrentUserID))
      profileViewModel.Friends.Add(person);
  }
  return View(profileViewModel);
} 
```

现在在您看来，只需编写显示代码

```
@model ProfileViewModel
@foreach(var friend in Model.Friends)
{
  <p>@friend.Name</p>
} 
```

# c - C中的隐藏函数

> ID：15322196
> 
> 赞同：8
> 
> 时间：2013-03-10T12:25:28.313
> 
> 标签：c, linux, ld-preload

我有一个具有 f1 功能的应用程序 `void f1 ()`

此外，我有一个库，我使用`LD_PRELOAD`.

该库有几个代码文件和几个头文件，并编译为.so文件。

`f1`其中一个头文件也使用了一个与上面签名相同的函数。最新`f1`的仅在库中使用。（我无法将其更改为静态方法）

问题是当我从应用程序的库覆盖中加载库（使用`LD_PRELOAD`）时。`f1``f1`

有没有办法将库配置`f1`为仅对库可见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T12:28:55.837

如果您完全可以修改头文件，请使函数`static`使其仅在该编译单元中可见，或者用`__attribute__ ((visibility ("hidden")))`（仅 GCC）标记以使其仅在该库中可见：

```
__attribute__ ((visibility ("hidden"))) void f1(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T12:34:29.120

[您还可以使用-fvisibility=hidden](http://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html)编译您的库，并将显式`__attribute__ ((visibility ("default")))`用于需要可见的库的少数功能。

# actionscript-3 - 在 AS3 中具有不同宽度的笔划

> ID：15322198
> 
> 赞同：2
> 
> 时间：2013-03-10T12:25:57.443
> 
> 标签：actionscript-3

我需要一个在整个长度的不同位置具有不同宽度的笔画。例如，我有一条手动绘制的路径（不使用 AS3），我想为它分配一个在路径长度开始和结束时宽度为 0，中间宽度为 10 的笔划路径的长度，以便笔画的宽度可以在整个路径的长度上逐渐变化。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:56:19.607

在 as3 中，您将使用[lineStyle()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#lineStyle%28%29)：

```
var segs:int = 32;//number of segments/'circle resolution'
var ai:Number = (Math.PI * 2) / segs;//angle increment
var offx:int = stage.stageWidth/2;//circle centre x
var offy:int = stage.stageHeight/2;//circle centre y
var rad:Number = 100;//circle radius
var maxWidth:Number = 18;

for(var i:int = 0 ; i < segs; i++){
    var a:Number = ai * i;
    var cx:Number = offx + Math.cos(a) * rad;
    var cy:Number = offy + Math.sin(a) * rad;
    graphics.lineStyle(i/segs * maxWidth);
    if(i == 0) graphics.moveTo(cx,cy);
    graphics.lineTo(cx,cy);
} 
```

![AS3 线型](../Images/0144cb81de30a2d613889579300e097c.png)

但您提到您需要在 Flash 编辑器中绘制，因此您需要编写脚本。[您可以使用JSFL](http://help.adobe.com/en_US/flash/cs/extend/WS5b3ccc516d4fbf351e63e3d118a9024f3f-7ffa.html)编写 Flash 编辑器的脚本。

这是上面的 JSFL 端口：

```
var doc = fl.getDocumentDOM();
var segs = 32;//number of segments/'circle resolution'
var ai = (Math.PI * 2) / segs;//angle increment
var offx = doc.width/2;//circle centre x
var offy = doc.height/2;//circle centre y
var rad = 100;//circle radius
var maxWidth = 10;

for(var i = 0 ; i < segs; i++){
    var a = ai * i;
    var an = ai * (i+1);//next angle
    var cx = offx + Math.cos(a) * rad;//current pt
    var cy = offy + Math.sin(a) * rad;
    var nx = offx + Math.cos(an) * rad;//next pt
    var ny = offy + Math.sin(an) * rad;
    //this is mainly what you're after
    var s = doc.getCustomStroke("toolbar");
    s.thickness= (i/segs)*maxWidth;
    doc.setCustomStroke(s);

    doc.addNewLine({x:cx,y:cy},{x:nx,y:ny});
} 
```

创建一个新的 Flash 文档，然后创建一个新的 Flash JavaScript 文件并运行上述代码：

![圈子jsfl](../Images/5a1b81592c18c5bbb74af22b5656bb08.png)

Stroke 的[厚度](http://help.adobe.com/en_US/flash/cs/extend/WS5b3ccc516d4fbf351e63e3d118a9024f3f-78bc.html)属性就是您所追求的。您还可以使用 JSFL 创建自定义绘图工具。查看 [Extending Macromedia Flash MX 2004: Complete Guide and Reference to JavaScript Flash]（现在卖的很便宜），这是你能在这个主题上得到的最好的东西。还有一个关于创建[工具](http://web.archive.org/web/20051212133929/http://www.friendsofed.com/books/1590593049/3049.pdf)的免费章节，这正是您所需要的。

另一种选择可能是编写 Radomír Měch 的[Deco Tool](http://www.adobe.com/devnet/flash/articles/deco_intro.html#articlecontentAdobe_numberedheader_2)程序引擎的脚本。不幸的是，它没有很好的[记录](http://www.adobe.com/technology/projects/deco.html)。

如果您要进入 JSFL，请查看 Dave Stewart 的精彩[xJSFL](http://www.xjsfl.com)

尽管您提到了 Flash，但您可能还想查看 Illustrator 的[Scriptographer](http://scriptographer.org/)免费插件，该插件也可以通过 JavaScript 编写脚本，并且 Illustrator 可以生成矢量图形，您可以轻松地将其导入 Flash。

# javascript - 根据浏览器大小改变大小的中心图像

> ID：15322199
> 
> 赞同：0
> 
> 时间：2013-03-10T12:26:02.710
> 
> 标签：javascript, css, image, center, variable-width

[我有一个](http://www.jordahn.eu/stack/stackpreview.php)需要适应不同屏幕尺寸的网站。其中大部分都非常简单，但我有一个幻灯片需要根据屏幕大小调整大小并将图像置于页面中心。图像比页面宽，以便在尺寸变化时两侧没有空白。

全尺寸图片的宽度为 4800 像素，但这会随着浏览器的大小而变化。

如果只是以一种尺寸居中图像的问题，我会使用

```
#image{left:50%, margin-left:2400px;} 
```

但是由于我根据可用空间调整图片大小，所以我可以随时显示图片的全高，显示图像的宽度会发生变化，并且居中的方法不好。

那么如何使用javascript检查当前图像宽度并更改margin-left属性，或者可以在css中完成吗？

编辑在这里添加一些CSS：

根据浏览器/屏幕大小，这有点好调整图像大小以适应可用空间中的高度。但是缺少居中。

```
#slideshow{
max-height:100%;
width:auto;
background-color: blue;
overflow: hidden;
text-align: center;
z-index:5;}

.size-4{
max-height:100%;
width:auto;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:29:47.487

你可以做一个表。[空间]-[图像]-[空间]

空格必须是`<td width="50% height="100%">` 图像`

这就是我在我的网站中处理它的方式

# opencl - Nvidia 和 AMD 上的 OpenCL 全局内存与图像内存性能差异

> ID：15322206
> 
> 赞同：2
> 
> 时间：2013-03-10T12:27:09.437
> 
> 标签：opencl

OpenCL 基准测试站点[http://www.clbenchmark.com/](http://www.clbenchmark.com/)具有针对

```
Image Filter: Separable Gaussian Blur - Global Memory Usage and
Image Filter: Separable Gaussian Blur - Image Memory Usage 
```

Nvidia 在全球内存使用方面完全占主导地位。例如，GTX 580 的速度几乎是 HD 7970 的两倍。它是 Nvidia 仍然领先的为数不多的基准测试之一。有人可以解释这是为什么吗？

我问的原因是我在我的 GTX 590 上写了一个光线追踪器，它运行得非常快。从大多数评论来看，我预计我的光线追踪器在 HD 7970 上的运行速度会快四倍。然而，它实际上运行速度慢了四倍！我不明白为什么。我不使用图像缓冲区。我将像素写到全局内存中。当我分析内核时间时，我发现 HD 7950 内核时间慢了四倍，所以我知道问题出在内核方面，而不是在通过 PCI 总线移动数据时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:28:34.203

全局内存是设备内存，使用全局内存的数据缓冲区具有可读写的优点。它们很慢，即访问数据缓冲区会消耗更多的 gpu 周期。

另一方面，纹理内存或您的意思是图像内存比全局内存快，它们使用的 gpu 周期更少。但它们可以是只读的或只写的。

如果您遇到需要只读或只写的情况，您可以使用图像缓冲区，它们会更快。但是，如果您需要读写缓冲区，则必须使用数据缓冲区（全局内存）。

另外需要注意的一件事是，如果缓冲区声明为 RGBA，则对图像缓冲区的任何读取都可以一次获取 4 个数据。如果您使用 float4，您也可以在数据缓冲区中使用此优势。由于 gpu 可以一次获取 4 个浮点值（这会提高性能）。

始终尝试尽可能少地使用全局内存（请参阅 NVIDIA 或 AMD 手册以了解每次内存访问的确切周期数）。如果您想了解更多，请告诉我:)

# sql-server - 如何将数据库备份（由维护计划创建）文件复制到远程计算机

> ID：15322211
> 
> 赞同：-2
> 
> 时间：2013-03-10T12:27:30.587
> 
> 标签：sql-server, configuration, database-administration, system-administration, maintenance-plan

我想在 MS SQL Server 维护计划后将备份文件复制到另一台服务器的新共享文件夹中。怎么做？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:34:59.080

这是我使用的解决方案

1- 使用 robocopy 命令创建批处理文件

```
ROBOCOPY C:\backfolder \\sharedserver\c$\backupcopy *.bak /S /purge 
```

2-将新任务添加到任务计划程序以在维护计划时间后每天运行控制面板>>管理工具>>任务计划程序然后添加新任务以运行批处理文件。

# tomcat - Tomcat 5.5 服务无法启动？

> ID：15322219
> 
> 赞同：-5
> 
> 时间：2013-03-10T12:28:23.173
> 
> 标签：tomcat, tomcat5.5

我的笔记本电脑中正确安装了tomcat 5.5，但他们的服务没有启动。

请给我正确的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:19:44.240

如果您使用的是**Windows**操作系统，您可以手动启动 tomcat。

*   转到任务管理器
*   选择服务选项卡
*   在服务窗口中选择服务按钮
*   找到 Tomcat 并按下开始按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T14:29:38.730

可能是端口问题。确保运行 Tomcat 的端口是空闲的，如果没有，请尝试更改端口并重新启动服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:30:23.310

请传递有关您的操作系统、安装的软件等的更多信息。

如果你有**linux**（大多数是**ubuntu**是新手使用的），`sudo service tomcat5 start`就足够`sudo service tomcat5 status`了并检查它的状态。不要忘记只使用包管理器。

如果资源允许，我会推荐 tomcat7。

# asp.net-mvc - 将控制器和操作动态分配给局部视图内的表单

> ID：15322220
> 
> 赞同：0
> 
> 时间：2013-03-10T12:28:29.177
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个场景，我需要在 3 个 jQuery-UI 选项卡中呈现 3 个不同的表单，表单的结构及其模型是相同的，但是我需要根据表单的哪个选项卡将表单发布到不同的控制器和 Action 方法包含在。我创建了一个包含该表单的部分视图。显然，我可以创建 3 个不同的局部视图发布到 3 个不同的控制器，但这似乎非常低效。

我想知道是否有可能以某种方式告诉部分视图更改控制器和其中包含的表单根据它包含的选项卡发布到的操作。

就像是：

```
<div id="tabs">
  <ul>
      <li><a href="#tabs-1">New Question </a><img src="@Url.Content("~/Content/images/FAQ.png")" /></li>
    <li><a href="#tabs-2">New Idea  </a> <img src="@Url.Content("~/Content/images/idea.png")" /></li>
    <li><a href="#tabs-3">New Bug</a> <img src="@Url.Content("~/Content/images/bug-icon.png")" /></li>
  </ul>
  <div id="tabs-1">
    @Html.Partial("_NewQuestionPartial")//this form posts to: Controller=Home and Action=Question
  </div>
  <div id="tabs-2">
    @Html.Partial("_NewQuestionPartial")//I want this form to post to: Controller=Support and Action=Idea
  </div>
  <div id="tabs-3">
    @Html.Partial("_NewQuestionPartial")//I want this form to post to: Controller=Support and Action=NewBug
  </div>
</div> 
```

如果我能以某种方式将变量传递给局部视图，我就可以使用 jQuery 设置动作和控制器。

这是可能吗？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:51:16.123

您可以将 ViewBag 字段（或者更好的是，您的 ViewModel 上的属性）传递给包含控制器名称和要回发到的视图的局部视图，然后在视图中，将这些值插入到 BeginForm 帮助程序的适当参数中.

在主视图中：

```
@{
<div id="tabs">
     <ul>
        ...
     </ul>
     <div id="tabs-1">
          ViewBag.Controller = "Home";
          ViewBag.Action = "Question";
          Html.Partial("_NewQuestionPartial");
     </div>
     <div id="tabs-2">
          ViewBag.Controller = "Idea";
          ViewBag.Action = "Question";
          Html.Partial("_NewQuestionPartial");
     </div>
     <div id="tabs-3">
          ViewBag.Controller = "Idea";
          ViewBag.Action = "NewBug";
          Html.Partial("_NewQuestionPartial");
     </div>
</div>                
} 
```

在局部视图中：

```
 @using (Html.BeginForm((string)ViewBag.Action, (string)ViewBag.Controller))
        {
            ...
        } 
```

# c++ - 错误 C2653：“用户”：不是类或命名空间名称

> ID：15322233
> 
> 赞同：-2
> 
> 时间：2013-03-10T12:30:04.510
> 
> 标签：c++, visual-c++, visual-studio-2012

我知道网上已经有好几篇关于这个问题的帖子了。但是，答案对我没有帮助:(有人能帮助我吗？我有很多课程，但这些错误并不适用于所有课程。这些错误有点“随机”出现，我不知道在哪里我开始看。

我尝试过但没有帮助的解决方案：

1.  包括预编译的头文件 stdafx.h
2.  `#include pragma once`
3.  尽善尽美`ifndef`_`define`

此外，我还会收到一些奇怪的错误，例如：

```
Error   507 error C2275: '_iobuf' : illegal use of this type as an expression 
```

以及许多其他语法错误。

我有 10 个 .h 和 .cpp 文件，所以我只复制了 2 对出现上述错误的文件。有人可以帮我吗？谢谢！

//存储.h文件

```
 #pragma once
    #ifndef STORAGE_H
    #define STORAGE_H

    #include <iostream>
    #include <fstream>
    #include <sstream>
    #include <string>
    #include <vector>
    #include <cstdio>
    #include <cstdlib>
    #include "settings.h"
    #include "Catalogue.h"
    #include "paymentModeList.h"
    #include "user.h"

    using namespace std;

    class Storage
    {
    private:
        //for userInformation.txt
        static const string KEYWORD_USERNAME;
        static const string KEYWORD_PASSWORD;
        //for settingsInfo.txt
        static const string KEYWORD_ACCTALERT;
        static const string KEYWORD_PAYMENTALERT;
        static const string KEYWORD_ITEMALERT;

        //for catalogueInfo.txt
        static const string KEYWORD_TITLENAME;
        static const string KEYWORD_CATLINES;
        static const string KEYWORD_ITEMNAME;
        static const string KEYWORD_PRICE;
        static const string KEYWORD_PAYMENTMODE;
        static const string KEYWORD_PAYMENTACCOUNT;
        static const string KEYWORD_CATEGORY;
        static const string KEYWORD_DATE;
        static const string KEYWORD_REMARKS;
        static const string KEYWORD_ONNOTIFICATIONS;
        static const string KEYWORD_PAIDSTATUS;
        static const string KEYWORD_DAYSBEFORE;

        //for paymentModeInfo.txt 

        //for accountInfo.txt

    public:
        Storage(); // empty constructor

        //reading from files
        vector<User*> getVectorUser();

        vector<Catalogue*> getCatalogueList(int);
        vector<Item*> getNotificationList(int);

        //not done
        vector<PaymentMode*> getPaymentModeList(int);
        Settings* getSettings(int);

        //writing to files
        void writeVectorUser(vector<User*>);
        void writeCatalogueList(vector<Catalogue*>, int);
        void writeNotificationList(vector<Item*>, int);
        void writeSettings(Settings*, int);

        //not done
        void writePaymentModeList(vector<PaymentMode*>, int);

        //checking & misc
        string getTaskInfo(string& task, string infoStart, string infoEnd);
        bool checkEmpty(ifstream &readFile);
    };

    #endif 
```

//user.h 文件

```
#pragma once
#ifndef _USER_H
#define _USER_H

#include <string>
#include <iostream>
#include "item.h"
#include "account.h"
#include "accountList.h"
#include "settings.h"
#include "paymentModeList.h"
#include "NotificationList.h"
#include "catalogueList.h"

using namespace std;

class User
{
private:
    string username;
    string password;
    int user_index;

    //implement sorting method under private

public:
    User(string, string, int);
    string GetUsername();
    string GetPassword();
    void makeSettings(string, string);
    Settings* makeSettings(string, string, bool, bool, bool);
    void enterSettings(Settings*, PaymentModeList*, AccountList*);
    void enterUser();
    void addExpenses(CatalogueList*, NotificationList*, PaymentModeList*, AccountList*);
    void deleteEdit(CatalogueList*, NotificationList*);
    void deleteCategory(string, CatalogueList*, NotificationList*);
    void retrieve(CatalogueList*, NotificationList*, PaymentModeList*, AccountList*);
    void viewSummary(Settings*, PaymentModeList*, AccountList*);

};

#endif 
```

//用户.cpp

#include “用户.h”

```
using namespace std;

User :: User(string givenUser, string givenPassword, int index)
{
    username = givenUser;
    password = givenPassword;
    user_index = index;
}

string User :: GetUsername()
{
    return username;
}

string User :: GetPassword()
{
    return password;
}

//JIE ER PAYMENT AND ACCOUHNT ALERT
Settings* User :: makeSettings(string user, string pass, bool paymentAlert, bool accountAlert, bool itemAlert)
{
    Settings* mySettings = new Settings(user, pass, paymentAlert, accountAlert, itemAlert);

    return mySettings;
}

void User :: enterUser()
{
    //Once enter, user need to construct all the list and store data gotten from database to their respective location
    CatalogueList* myCatalogueList = new CatalogueList();

    NotificationList* myNotificationList = new NotificationList();

    Settings* mySettings = new Settings(username, password, true, true, true); //NEED TO REVISE

    PaymentModeList* myPayModeList = new PaymentModeList();

    AccountList* myAcctList = new AccountList();

    //user selects settings button
    enterSettings(mySettings, myPayModeList, myAcctList);

    //user select add button
    addExpenses(myCatalogueList, myNotificationList, myPayModeList, myAcctList);

    //user select summary
    viewSummary(mySettings,myPayModeList, myAcctList);

    //user select retrieve
    //retrieve(myCatalogueList);

    //user select delete/edit
    //deleteEdit(myCatalogueList);

    //user select viewReport

    //user gets notification

    //user gets alert

    //user chooses undo
    return;
}

void User :: addExpenses(CatalogueList* myCL, NotificationList* myNL, PaymentModeList* myPL, AccountList* myAL)
{
    string itemName;
    double price;
    string paymentMode;
    string account;
    string category;
    int date;
    string remarks;
    bool onNotification;
    bool paidStatus;
    int daysBefore;

    //assume user pass in correct details
    cin >> itemName >> price >> paymentMode >> account >> category >> date >> remarks >> onNotification >> paidStatus >> daysBefore;

    Item* itemToAdd = new Item(itemName, price, paymentMode, account, category, date, remarks, onNotification, paidStatus, daysBefore);

    //add to respective catalogue
    (*myCL).addItem(itemToAdd);

    //Create Account or PaymentMode if they are not existing
    //update paymentModeList and accountList
    Account* toAddAcct = new Account(account);
    PaymentMode* toAddPayMode = new PaymentMode(paymentMode);

    int indexAcct = (*myAL).findAcct(toAddAcct);
    if(indexAcct == -1)
        (*myAL).addAcct(toAddAcct);
    vector<Account*> tempVA = (*myAL).getVectorAcctList();
    (*tempVA[indexAcct]).addPayMode(toAddPayMode);

    //Create Account or PaymentMode if they are not existing
    //update paymentModeList and accountList
    int indexPM = (*myPL).findPaymentMode(toAddPayMode);
    if( indexPM == -1 )
        (*myPL).addPaymentMode(toAddPayMode);
    vector<PaymentMode*> tempVPM = (*myPL).getVectorPayModeList();
    (*tempVPM[indexPM]).addAcct(toAddAcct);

    //update balance at respective account
    //find respective account
    (*(tempVA[indexAcct])).updateAcctBal(price);

    //update balance at respective paymetmode
    //find respective paymentMode
    (*(tempVPM[indexPM])).updatePayModeBal(price);

    //add to notificationlist if necessary
    if( (onNotification == true) && ( (*myNL).findItem(itemToAdd) == -1) ) //NEED TO REVISE FIND FUNCTION: Remarks
        (*myNL).addItem(itemToAdd);

    return;
}

void User:: enterSettings(Settings* mySettings, PaymentModeList* myPL, AccountList* myAL)
{
    //user selects change username
    (*mySettings).changeUsername();

    //user selects change password
    (*mySettings).changePassword();

    //user selects to change Account Threshold
    string toFindAcct;
    cin >> toFindAcct;
    Account* tempA = new Account(toFindAcct);

    int indexA = (*myAL).findAcct(tempA);
    double newAcctThreshold;
    cin >> newAcctThreshold;
    vector<Account*> tempVA = (*myAL).getVectorAcctList();
    (*tempVA[indexA]).setAccountThreshold(newAcctThreshold);

    //user selects to change PaymentMode Threshold
    string toFindPM;
    cin >> toFindPM;
    PaymentMode* tempPM = new PaymentMode(toFindPM);
    int indexP = (*myPL).findPaymentMode(tempPM);
    double newPMThreshold;
    cin >> newPMThreshold;
    vector<PaymentMode*> tempVPM = (*myPL).getVectorPayModeList();
    (*tempVPM[indexP]).setPaymentModeThreshold(newPMThreshold);

    //CENTRAL SWITCH FOR BUDGET_ALERT
    //user selects change budgetAlert
    (*mySettings).toggleBudgetAlert();

    //CENTRAL SWITCH FOR NOTIFICATIONS
    //user selects change repeated items notifications
    (*mySettings).toggleRepeatedItemsNotification();

}

void User :: viewSummary(Settings* mySet, PaymentModeList* myPL, AccountList* myAL)
{
    //display username
    string userN = (*mySet).getUsername();
    cout << userN << endl;

    //display budget for account/paymentMode?

    //display total expenditure by account
    double sumAcctBal = (*myAL).getSumOfAllAcctBal();
    cout << sumAcctBal;

    //display total expenditure by paymentMode
    double sumPayModeBal = (*myPL).getSumOfAllPayModeBal();
    cout << sumPayModeBal << endl;

}

void User :: retrieve(CatalogueList* myCL, NotificationList* myNL, PaymentModeList* myPL, AccountList* myAL)
{
    //user input any of the following itemName, price, paymentMode, account, category, date
    //output the information for user to view
    vector< vector<Item*> > retrieveOutput;

    string itemName;
    string paymentMode;
    string account;
    string category;

    string date; //can be a range
    double price;//can be a range

    //Search by item name
    cin >> itemName;
    retrieveOutput = (*myCL).retrieveItem(itemName);

    //search by paymentMode
    cin >> paymentMode;

    vector<Catalogue*> catList = (*myCL).getVCatList();
    for(int i = 0; i < catList.size(); i++)
    {

        return;
    }
}

    /*void User :: deleteEdit(Expenses* myPriceList, Expenses* myCatalogueList)
    {
    string categoryToDelete;
    cin >> categoryToDelete;

    //user choose to delete by category
    deleteCategory(categoryToDelete, myPriceList, myCatalogueList);

    //*****user can choose to delete single or multiple items******////
    //call for retrieve function
    //user select items
    //search through every list to delete the items

    //*******user can choose to edit single item*******//
    //call for retrieve function
    //user select single item
    //search through every list to edit the particular item*/
    //return;
    //}

    /*
    void User :: deleteCategory(string categoryToDelete, Expenses* myPriceList, Expenses* myCatalogueList)
    {
    myCatalogueList -> deleteCat(categoryToDelete);
    myPriceList -> deleteCat(categoryToDelete);

    return;
    }
    */ 
```

//存储.cpp

```
#include "storage.h"

using namespace std;

//for userInformation.txt
const string Storage::KEYWORD_USERNAME = " -username ";
const string Storage::KEYWORD_PASSWORD = " -password ";
//for settings.txt
const string Storage::KEYWORD_ACCTALERT = " -acctAlert ";
const string Storage::KEYWORD_PAYMENTALERT = " -payModeAlert ";
const string Storage::KEYWORD_ITEMALERT = " -itemAlert ";

//for catalogueInfo.txt & notificationList.txt
const string Storage::KEYWORD_TITLENAME = " -titlename ";
const string Storage::KEYWORD_CATLINES = " -catlines ";
const string Storage::KEYWORD_ITEMNAME = " -itemname ";
const string Storage::KEYWORD_PRICE = " -price ";
const string Storage::KEYWORD_PAYMENTMODE = " -paymentmode ";
const string Storage::KEYWORD_PAYMENTACCOUNT = " -paymentaccount ";
const string Storage::KEYWORD_CATEGORY = " -category ";
const string Storage::KEYWORD_DATE = " -date ";
const string Storage::KEYWORD_REMARKS = " -remarks ";
const string Storage::KEYWORD_ONNOTIFICATIONS = " -onNotifications ";
const string Storage::KEYWORD_PAIDSTATUS = " -paidstatus ";
const string Storage::KEYWORD_DAYSBEFORE = " -daysbefore ";

Storage :: Storage()
{}

bool Storage :: checkEmpty(ifstream &readFile)
{
    if(readFile.is_open())
    {
        if(readFile.peek() == std::ifstream::traits_type::eof())
            return true;
        else 
            return false;
    }
    else
        return false;

}

string Storage::getTaskInfo(string& task, string infoStart, string infoEnd)
{
    int startPos = 0, endPos = 0;
    if(!infoStart.empty())
    {
        startPos = task.find(infoStart);
        if(startPos == string::npos)
            return "";
        startPos += infoStart.length();
    }
    endPos = task.rfind(infoEnd);
    if(endPos == string::npos)
        return task.substr(startPos).c_str();
    return task.substr(startPos, endPos-startPos).c_str();
}

vector<User*> Storage :: getVectorUser()
{
    vector<User*> userList;

    ifstream readFile("userInformation.txt"); 

    string oneUser;
    string username;
    string password;
    int index =0;

    while(!checkEmpty(readFile))
    {
        getline(readFile, oneUser);

        username = getTaskInfo(oneUser, "", KEYWORD_USERNAME);
        password = getTaskInfo(oneUser, "", KEYWORD_PASSWORD);

        User* toAdd = new User(username, password, index);

        userList.push_back(toAdd);
        index++;
    }

    return userList;
}

void Storage :: writeVectorUser(vector<User*> allMyUsers)
{
    ofstream storeFile;

    storeFile.open("userInformation.txt");

    for(int i=0; i<allMyUsers.size(); i++)
    {
        string username = allMyUsers[i] -> GetUsername();
        string password = allMyUsers[i] -> GetPassword();

        storeFile << username
            << KEYWORD_USERNAME
            << password
            << KEYWORD_PASSWORD
            << endl;
    }

    storeFile.close();

    return;
}

vector<Item*> Storage :: getNotificationList(int index)
{
    string finalName = "notificationInfo";
    string indexName;

    ostringstream convert;
    convert << index;

    indexName = convert.str() + ".txt";
    finalName = finalName + indexName;

    char* cstr_fileName = new char[finalName.length() + 1];
    strcpy(cstr_fileName, finalName.c_str());

    ifstream readFile(cstr_fileName);

    string oneItem;
    string itemname;
    string price;
    string paymentMode;
    string paymentAccount;
    string category;
    string date;
    string remarks;
    string onNotifications;
    string paidStatus;
    string daysBefore;

    vector<Item*> notifyList;

    while(!checkEmpty(readFile))
    {
        getline(readFile, oneItem);

        itemname = getTaskInfo(oneItem, "", KEYWORD_ITEMNAME);

        price = getTaskInfo(oneItem, "", KEYWORD_PRICE);
        double price_double = atof(price.c_str());

        paymentMode = getTaskInfo(oneItem, "", KEYWORD_PAYMENTMODE);
        paymentAccount = getTaskInfo(oneItem, "", KEYWORD_PAYMENTACCOUNT);
        category = getTaskInfo(oneItem, "", KEYWORD_CATEGORY);

        date = getTaskInfo(oneItem, "", KEYWORD_DATE);
        int date_int = atoi(date.c_str());

        remarks = getTaskInfo(oneItem, "", KEYWORD_REMARKS);

        onNotifications = getTaskInfo(oneItem, "", KEYWORD_ONNOTIFICATIONS);
        bool onNotify_bool;
        if(onNotifications == "true")
            onNotify_bool = true;
        else
            onNotify_bool = false;

        paidStatus = getTaskInfo(oneItem, "", KEYWORD_PAIDSTATUS);
        bool paidStatus_bool;
        if(paidStatus == "true")
            paidStatus_bool = true;
        else
            paidStatus_bool = false;

        daysBefore = getTaskInfo(oneItem, "", KEYWORD_DAYSBEFORE);
        int daysBefore_int = atoi(daysBefore.c_str());

        Item* itemAdd = new Item(itemname, price_double, paymentMode, paymentAccount, category, date_int, remarks, onNotify_bool, paidStatus_bool, daysBefore_int);

        notifyList.push_back(itemAdd);
    }

    return notifyList;
}

void Storage :: writeNotificationList(vector<Item*> notifyList, int index)
{
    string finalName = "notificationInfo";
    string indexName;

    ostringstream convert;
    convert << index;

    indexName = convert.str() + ".txt";
    finalName = finalName + indexName;

    char* cstr_fileName = new char[finalName.length() + 1];
    strcpy(cstr_fileName, finalName.c_str());

    ofstream storeFile;
    storeFile.open(cstr_fileName);

    for(int j=0; j<notifyList.size(); j++)
    {
        string itemname = notifyList[j] -> getName();

        double price = notifyList[j] -> getPrice();
        int priceInCents = price * 100;
        ostringstream convertPrice;
        convertPrice << priceInCents;
        string price_str = convertPrice.str();

        string paymentmode = notifyList[j] -> getPaymentMode(); 
        string paymentaccount = notifyList[j] -> getPaymentAccount();
        string category = notifyList[j] -> getCat();

        int date = notifyList[j] -> getDate();
        ostringstream convertDate;
        convertDate << date;
        string date_str = convertDate.str();

        string remarks = notifyList[j] -> getRemarks();

        bool onNotification = notifyList[j] -> getNotification();
        string onNotification_str;
        if(onNotification == true)
            onNotification_str = "true";
        else
            onNotification_str = "false";

        bool paidstatus = notifyList[j] -> getPaidStatus();
        string paidStatus_str;
        if(paidstatus == true)
            paidStatus_str = "true";
        else
            paidStatus_str = "false";

        int daysbefore = notifyList[j] -> getDaysBefore();
        ostringstream convertDaysBefore;
        convertDaysBefore << daysbefore;
        string daysbefore_str = convertDaysBefore.str();

        storeFile << itemname 
            << KEYWORD_ITEMNAME
            << price_str
            << KEYWORD_PRICE
            << paymentmode
            << KEYWORD_PAYMENTMODE
            << paymentaccount
            << KEYWORD_PAYMENTACCOUNT
            << category
            << KEYWORD_CATEGORY
            << date_str
            << KEYWORD_DATE
            << remarks
            << KEYWORD_REMARKS
            << onNotification_str
            << KEYWORD_ONNOTIFICATIONS
            << paidStatus_str
            << KEYWORD_PAIDSTATUS
            << daysbefore_str
            << KEYWORD_DAYSBEFORE
            << endl;
    }

    storeFile.close();

    return;
}

void Storage :: writeSettings(Settings* mySettings, int index)
{
    string finalName = "settingsInfo";
    string indexName;

    ostringstream convert;
    convert << index;

    indexName = convert.str() + ".txt";
    finalName = finalName + indexName;

    char* cstr_fileName = new char[finalName.length() + 1];
    strcpy(cstr_fileName, finalName.c_str());

    ofstream storeFile;
    storeFile.open(cstr_fileName);

    string username = mySettings -> getUsername;
    string password = mySettings -> getPassword;

    bool onAcctBudgetAlert = mySettings -> getOnAcctBudgetAlert;
    string onAcctBudgetAlert_str;
    if(onAcctBudgetAlert == true)
        onAcctBudgetAlert_str = "true";
    else
        onAcctBudgetAlert_str = "false";

    bool onPayModeBudgetAlert = mySettings -> getOnPayModeBudgetAlert;
    string onPayModeBudgetAlert_str;
    if(onPayModeBudgetAlert == true)
        onPayModeBudgetAlert_str = "true";
    else
        onPayModeBudgetAlert_str = "false";

    bool onRepeatedItemsNotification = mySettings -> getOnRepeatedItemsNotification;
    string onRepeatedItemsNotification_str;
    if(onRepeatedItemsNotification == true)
        onRepeatedItemsNotification_str = "true";
    else
        onRepeatedItemsNotification_str = "false";

    storeFile << username
        << KEYWORD_USERNAME
        << password
        << KEYWORD_PASSWORD
        << onAcctBudgetAlert_str
        << KEYWORD_ACCTALERT
        << onPayModeBudgetAlert_str
        << KEYWORD_PAYMENTALERT
        << onRepeatedItemsNotification_str
        << KEYWORD_ITEMALERT
        << endl;

    storeFile.close();

    return;
}

vector<Catalogue*> Storage :: getCatalogueList(int index)
{
    vector<Catalogue*> catList;

    string finalName = "catalogueInfo";
    string indexName;

    ostringstream convert;
    convert << index;

    indexName = convert.str() + ".txt";
    finalName = finalName + indexName;

    char* cstr_fileName = new char[finalName.length() + 1];
    strcpy(cstr_fileName, finalName.c_str());

    ifstream readFile(cstr_fileName);

    string oneCat;
    string titlename;
    string catlines;
    int catlines_int;

    string oneItem;
    string itemname;
    string price;
    string paymentMode;
    string paymentAccount;
    string category;
    string date;
    string remarks;
    string onNotifications;
    string paidStatus;
    string daysBefore;

    while(!checkEmpty(readFile))
    {
        getline(readFile, oneCat);
        titlename = getTaskInfo(oneCat, "", KEYWORD_TITLENAME);
        catlines = getTaskInfo(oneCat, "", KEYWORD_CATLINES);

        Catalogue* CatAdd = new Catalogue(titlename);
        catlines_int = atoi(catlines.c_str());

        for(int i=0; i<catlines_int; i++)
        {
            getline(readFile, oneItem);
            itemname = getTaskInfo(oneItem, "", KEYWORD_ITEMNAME);

            price = getTaskInfo(oneItem, "", KEYWORD_PRICE);
            double price_double = atof(price.c_str());

            paymentMode = getTaskInfo(oneItem, "", KEYWORD_PAYMENTMODE);
            paymentAccount = getTaskInfo(oneItem, "", KEYWORD_PAYMENTACCOUNT);
            category = getTaskInfo(oneItem, "", KEYWORD_CATEGORY);

            date = getTaskInfo(oneItem, "", KEYWORD_DATE);
            int date_int = atoi(date.c_str());

            remarks = getTaskInfo(oneItem, "", KEYWORD_REMARKS);

            onNotifications = getTaskInfo(oneItem, "", KEYWORD_ONNOTIFICATIONS);
            bool onNotify_bool;
            if(onNotifications == "true")
                onNotify_bool = true;
            else
                onNotify_bool = false;

            paidStatus = getTaskInfo(oneItem, "", KEYWORD_PAIDSTATUS);
            bool paidStatus_bool;
            if(paidStatus == "true")
                paidStatus_bool = true;
            else
                paidStatus_bool = false;

            daysBefore = getTaskInfo(oneItem, "", KEYWORD_DAYSBEFORE);
            int daysBefore_int = atoi(daysBefore.c_str());

            Item* itemAdd = new Item(itemname, price_double, paymentMode, paymentAccount, category, date_int, remarks, onNotify_bool, paidStatus_bool, daysBefore_int);
            CatAdd -> pushItem(itemAdd);
        }
        catList.push_back(CatAdd);
    }

    return catList;
}

void Storage :: writeCatalogueList(vector<Catalogue*> catList, int index)
{
    string finalName = "catalogueInfo";
    string indexName;

    ostringstream convert;
    convert << index;

    indexName = convert.str() + ".txt";
    finalName = finalName + indexName;

    char* cstr_fileName = new char[finalName.length() + 1];
    strcpy(cstr_fileName, finalName.c_str());

    ofstream storeFile;
    storeFile.open(cstr_fileName);

    for(int i=0; i<catList.size(); i++)
    {
        vector<Item*> itemCat = catList[i] -> getVCatItems();
        string titleName = catList[i] -> getCatName();

        int catLines = itemCat.size();
        ostringstream convertCatLines;
        convertCatLines << catLines;

        string catLines_str = convertCatLines.str();

        storeFile << titleName
            << KEYWORD_TITLENAME
            << catLines_str
            << KEYWORD_CATLINES
            << endl;

        for(int j=0; j<itemCat.size(); j++)
        {
            string itemname = itemCat[j] -> getName();

            double price = itemCat[j] -> getPrice();
            int priceInCents = price * 100;
            ostringstream convertPrice;
            convertPrice << priceInCents;
            string price_str = convertPrice.str();

            string paymentmode = itemCat[j] -> getPaymentMode(); 
            string paymentaccount = itemCat[j] -> getPaymentAccount();
            string category = itemCat[j] -> getCat();

            int date = itemCat[j] -> getDate();
            ostringstream convertDate;
            convertDate << date;
            string date_str = convertDate.str();

            string remarks = itemCat[j] -> getRemarks();

            bool onNotification = itemCat[j] -> getNotification();
            string onNotification_str;
            if(onNotification == true)
                onNotification_str = "true";
            else
                onNotification_str = "false";

            bool paidstatus = itemCat[j] -> getPaidStatus();
            string paidStatus_str;
            if(paidstatus == true)
                paidStatus_str = "true";
            else
                paidStatus_str = "false";

            int daysbefore = itemCat[j] -> getDaysBefore();
            ostringstream convertDaysBefore;
            convertDaysBefore << daysbefore;
            string daysbefore_str = convertDaysBefore.str();

            storeFile << itemname 
                << KEYWORD_ITEMNAME
                << price_str
                << KEYWORD_PRICE
                << paymentmode
                << KEYWORD_PAYMENTMODE
                << paymentaccount
                << KEYWORD_PAYMENTACCOUNT
                << category
                << KEYWORD_CATEGORY
                << date_str
                << KEYWORD_DATE
                << remarks
                << KEYWORD_REMARKS
                << onNotification_str
                << KEYWORD_ONNOTIFICATIONS
                << paidStatus_str
                << KEYWORD_PAIDSTATUS
                << daysbefore_str
                << KEYWORD_DAYSBEFORE
                << endl;
        }
    }

    storeFile.close();

    return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T13:10:41.993

以下是我在遇到这些问题时会采取的一些步骤：

*   `error C2653: 'User' : is not a class or namespace name`是关于您的用户定义类型之一。检查发生此错误的行，看看您是否可以发现问题（顺便说一下，如果您告诉我们错误发生在哪一行而不是给我们 4 个文件并说它在某处，这可能**真的很有帮助**！）。如果没有，那么...
*   ...您可能正面临一些`#include`/namespace 噩梦。
*   摆脱`using namespace std;`. 作为临时解决方案，您可以通过 etc 导入您需要的内容`using std::string;` ，但对于可持续的长期方法，请阅读 Herb Sutter 的文章：[http ://www.gotw.ca/gotw/053.htm](http://www.gotw.ca/gotw/053.htm)
*   从文件中删除所有不必要`#include`的 s。只包含您实际需要的内容！
*   你的组合`#pragma once`和手动包括警卫对我来说似乎很奇怪。我认为这不会引起问题，但我会坚持两者之一。
*   `stadfx.h`从您的包含中删除**并**禁用项目选项中的预编译头文件。重建你的项目。（我并不是说预编译的标头不好，但我会在您解决问题之前将它们删除。）

# android - Android：如何在片段中更新我的 textView

> ID：15322237
> 
> 赞同：15
> 
> 时间：2013-03-10T12:31:27.947
> 
> 标签：android, dynamic, android-fragments, textview

我正在尝试使用片段来构建我的第一个合适的 Android 应用程序。我有一个主要的 xml。它由两个垂直片段组成，顶部片段仅由两个 TextView 组成。其中第一个包含静态文本，第二个包含一个值，我最终将从 SQL 动态获取。

如果我把这是我的 MainActivity.java 那么它会很高兴地更新我的第一个 Fragment 中的 TextView 的值：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    // Set the Text to try this out
    TextView t = (TextView)findViewById(R.id.viewItem);
    t.setText("Text to Display");
} 
```

我有两个片段 XML 和一个 Java 来支持每个，所以我想将此字段的设置放入支持片段的 Java 中，而不是用于 MainActivity 的 Java 中。

当我把它放在片段中时，它看起来像这样：-

```
 public class FragmentMainTop extends Fragment {
@Override
public View onCreateView(LayoutInflater inflater,
        ViewGroup container, Bundle savedInstanceState){
    // -- inflate the layout for this fragment
    return inflater.inflate(R.layout.fragmentmt, container,false);

    // Set the Text to try this out
    TextView t = (TextView)findViewById(R.id.viewItem);
    t.setText("Text to Display");
} 
```

但是，如果我这样做，我会在 TextView 行上得到一个错误：

“FragmentMainTop 类型的 findViewById(int) 方法未定义”

那么为什么它不知道这个方法呢？我有 ctl/shift/o 所以我知道我有所有正确的进口。我不想最终将所有代码都放在 MainActivity 中，因为如果我想在另一个活动中使用 Fragment，我将不得不重复所有代码。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-10T12:32:59.223

您需要将膨胀的片段布局分配给一个变量，以便您可以访问其`findViewById()`方法。然后，在您更新完小部件后将其退回。

```
@Override
public View onCreateView(LayoutInflater inflater,
        ViewGroup container, Bundle savedInstanceState){
    // -- inflate the layout for this fragment
    View myInflatedView = inflater.inflate(R.layout.fragmentmt, container,false);

    // Set the Text to try this out
    TextView t = (TextView) myInflatedView.findViewById(R.id.viewItem);
    t.setText("Text to Display");

    return myInflatedView;
} 
```

通常，当您`findViewById()`在 中调用时`Activity`，您正在调用`Activity.findViewById()`. 在您的班级中尝试相同的调用`Fragment`将失败，因为没有这样的`Fragment.findViewById()`方法。因此，您必须使用`View.findViewById()`膨胀视图来获取对小部件的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T12:39:19.560

我不是专家，但我会说方法中的 return 语句会返回一些东西，并且该语句之后的下一行是无法访问的：O

所以尝试改变顺序！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T06:14:01.937

我正在使用我活动中的这段代码来更新添加到 xml 标记中的文本视图。textview 是类级别的对象。继承人一些代码：

```
<fragment
    android:id="@+id/fragmentRegister"
    android:name="com.proshore.loveis.RegisterFragment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/view1" /> 
```

这是仅显示类级别变量的片段代码。

```
public class RegisterFragment extends Fragment implements OnClickListener {

TextView textViewDOB, textViewLanguage;

public RegisterFragment() {
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
//eluded methods here
}
} 
```

现在我更新片段的活动：

```
public class RegisterActivity extends FragmentActivity {
Button buttonEnter;
RegisterFragment fragmentRegister;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_register);
    buttonEnter = (Button) findViewById(R.id.buttonEnter);
    fragmentRegister = (RegisterFragment) getSupportFragmentManager()
            .findFragmentById(R.id.fragmentRegister);
}

@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
    buttonEnter.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Log.d("dontknowitwillowrk", fragmentRegister.textViewLanguage
                    .getText().toString());
            fragmentRegister.textViewLanguage.setText("hello mister how do you do");

        }
    });
}
} 
```

注意：不确定这是否是一个好方法。

# php - move_uploaded_file 失败——没有错误信息

> ID：15322240
> 
> 赞同：2
> 
> 时间：2013-03-10T12:31:34.287
> 
> 标签：php, file-upload

根据[PHP.net 文档](http://php.net/manual/en/function.move-uploaded-file.php)，如果`move_uploaded_file`失败且没有错误，那是因为它无法打开原始文件，但据我所知，该文件存在并且可以通过代码访问。有谁知道是什么导致了这个问题？

这是命令：

```
 if(!move_uploaded_file($file["tmp_name"],
            SITE_ROOT."/../static/images/photos/tmp/".$fileName.$fileExt)) {
        throw new Exception("ERROR: There was a serious server problem uploading the image :(");
    } else {
        return true;
    } 
```

这里是 $newImage 的创建位置：

```
if(imagejpeg($img_dst, sys_get_temp_dir()."/tmp.jpg", 100)) {    
    $newImage["name"] = "tmp.jpg";
    $newImage['tmp_name'] = sys_get_temp_dir()."/tmp.jpg";
    $newImage['error'] = 0;
    $newImage['type'] = "image/jpeg";
    $newImage['size'] = filesize(sys_get_temp_dir()."/tmp.jpg"); 
```

我什至可以在系统的临时目录中查看该文件，但即使`filesize()`可以正常查看，`move_uploaded_file`似乎也有问题。

日志文件是空的（除了 MIME 警告：）`Cannot get media type from 'x-mapp-php5'`。有人知道发生了什么吗？

* * *

**编辑**：我想知道它是否与此有关？（来自文档。）

> **move_uploaded_file()**仅允许移动通过 PHP 上传的文件，从而确保此操作的安全性。

编辑：是的，就是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:37:19.403

也许它与您访问的文件夹的权限有关

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T23:22:17.903

它的局限性在于`move_uploaded_file`：它只能处理由 PHP 上传的图像。由于我要移动的图像仅由 PHP 创建，因此不会移动它。

我只是将命令替换为`copy`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:43:24.500

它不太可能在没有任何错误的情况下失败。你检查过错误日志吗？

# php - 删除用户帐户数据并重定向到登录屏幕

> ID：15322241
> 
> 赞同：0
> 
> 时间：2013-03-10T12:31:35.617
> 
> 标签：php, dns, web-hosting

我正在向调用代码的应用程序添加“删除我的帐户”功能：

```
if ($cmd == "DeleteAccountConfirm")  {
    DeleteUsersAccount();
    header("Location: index.php?cmd=logout&msg=Account deleted successfully");      
} 
```

DeleteUsersAccount() 函数检查用户 ID，然后从相应的表中调用 DELETES 以获取该玩家的所有记录，但问题似乎是注销函数，如下所示：

```
if ($cmd == "logout" )  { 
        unset($_SESSION['user']);  
        unset($_SESSION['login_time']);  
        unset($_SESSION['logged_in']);  
        session_unset(); 
        session_destroy();  
        if ($msg == "") { $msg = "logged out successfully"; }
        header("Location: index.php?cmd=View&menu=".$selected_menu."&msg=".$msg); 
} 
```

我的问题是 - 这是擦除用户帐户并将其重定向到登录屏幕的有效/安全方式吗？还有什么我需要考虑的吗？

谢谢

# python - Python - windows上多播绑定的绑定错误

> ID：15322242
> 
> 赞同：3
> 
> 时间：2013-03-10T12:31:45.077
> 
> 标签：python, networking, udp, multicast

我需要在 Python 应用程序中使用多播，经过一番谷歌搜索后，我发现了有效的代码片段，这里是：

```
# UDP multicast examples, Hugo Vincent, 2005-05-14.
import socket
import sys
import struct

def send(data, port=50000, addr='239.192.1.100'):
    """send(data[, port[, addr]]) - multicasts a UDP datagram."""
    # Create the socket
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    # Make the socket multicast-aware, and set TTL.
    s.setsockopt(socket.IPPROTO_IP, socket.IP_MULTICAST_TTL, 20) # Change TTL (=20) to suit
    s.setsockopt(socket.IPPROTO_IP, socket.IP_MULTICAST_LOOP, 1)
    # Send the data
    s.sendto(data, (addr, port))

def recv(port=50000, addr="239.192.1.100", buf_size=1024):
    """recv([port[, addr[,buf_size]]]) - waits for a datagram and returns the data."""

    # Create the socket
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

    # Set some options to make it multicast-friendly
    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    try:
            s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEPORT, 1)
    except AttributeError:
            pass # Some systems don't support SO_REUSEPORT
    s.setsockopt(socket.IPPROTO_IP, socket.IP_MULTICAST_TTL, 20)

    # Bind to the port
    s.bind(('', port))

    # Set some more multicast options
    intf = socket.gethostbyname(socket.gethostname())
    s.setsockopt(socket.IPPROTO_IP, socket.IP_MULTICAST_IF, socket.inet_aton(intf))
    mreq = struct.pack("4sl", socket.inet_aton(addr), socket.INADDR_ANY)

    s.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq)

    # Receive the data, then unregister multicast receive membership, then close the port
    data, sender_addr = s.recvfrom(buf_size)
    s.setsockopt(socket.SOL_IP, socket.IP_DROP_MEMBERSHIP, socket.inet_aton(addr) + socket.inet_aton('0.0.0.0'))
    s.close()
    return data

if __name__=="__main__":
    if sys.argv[1] == "recv":
            print recv()
    else:
            send("a") 
```

我有绑定和多播的问题。

据我了解，如果我绑定将接收消息的套接字，在这种情况下它将过滤流量。`('',port)`意味着我想接收来自此套接字和此端口的所有流量，而不管数据包的目标 ip（与 相同`0.0.0.0`），让我们称之为案例 1。

如果我有，这也有效`bind((addr,port))`。我将收到所有目标 ip 为这个多播组的数据包（当然我也需要加入这个多播组），这是案例 2。

现在正如我所说，这两种方法都有效，但仅适用于 Linux。

我在 Windows 机器上尝试了我的小程序，第一个案例正在工作，但是当我尝试另一个我得到的

```
 Traceback (most recent call last):
  File "test.py", line 51, in <module>
    print recv()
  File "test.py", line 32, in recv
    s.bind((addr, port))
  File "C:\Python27\lib\socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
socket.error: [Errno 10049] The requested address is not valid in its context 
```

我不是 Windows 系统专家（我主要在 Linux 上进行开发），但我很感兴趣为什么我的代码仅在 Windows 系统上失败并出现此错误（我使用的是 Windows 7 顺便说一句）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-29T17:08:25.453

正如[Carl Cerecke 在](http://pymotw.com/2/socket/multicast.html#comment-763199034)[PYMOTW Multicast 文章](http://pymotw.com/2/socket/multicast.html)的评论中所指出的，在 Windows 中使用 socket.INADDR_ANY 将绑定到默认的多播地址，如果您有多个接口，Windows 可能会选择错误的一个。

为了解决这个问题，您可以明确指定要从中接收多播消息的接口：

```
group = socket.inet_aton(multicast_group)
iface = socket.inet_aton('192.168.1.10') # listen for multicast packets on this interface.
sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, group+iface) 
```

您可以使用以下命令获取接口列表：

```
socket.gethostbyname_ex(socket.gethostname()) 
# ("PCName", [], ["169.254.80.80", "192.168.1.10"]) 
```

在上面的示例中，我们可能希望跳过第一个 169.254 链路本地地址并选择所需的 192.168.1.10 地址。

```
socket.gethostbyname_ex(socket.gethostname())[2][1]
# "192.168.1.10" 
```

# javascript - 试图计算圆上两点之间的角度？

> ID：15322244
> 
> 赞同：5
> 
> 时间：2013-03-10T12:31:53.650
> 
> 标签：javascript, jquery, math, geometry

首先让我说我在数学上绝对是个残暴的人，请多多包涵。

我正在尝试计算圆上两点之间的角度，这两点是用户在一定时间内拖动的距离。

这是我到目前为止所拥有的：

```
intervalId = setInterval(function(){

      if(p1x != undefined){
        p2x = Xpos;

      }

      if(p1y != undefined){
        p2y = Ypos;
      }

      if( p1x != p2x || p1y != p2y ){

        p1a = p1x - wheelMiddleVer;
        p1b = p1y - wheelMiddleHor;
        a = Math.sqrt((p1a * p1a) + (p1b * p1b));

        p2a = p2x - wheelMiddleVer;
        p2b = p2y - wheelMiddleHor;
        b = Math.sqrt((p2a * p2a) + (p2b * p2b));

        u = p1x - p2x;
        v = p1y - p2y;
        c = Math.sqrt((u * u) + (v * v));

      }

      p1x = Xpos;
      p1y = Ypos;

  }, 1000); 
```

我不确定如何完成它。我曾尝试使用 cos A = (b^2 + c^2 - a^2)/2bc 公式，但对我来说并不奏效。我将感谢您对此的意见。如果我能让问题更清楚，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T12:46:11.717

首先，请记住，大多数语言都有反转 Y 轴。意味着刻度上的点越高 -> Y 值越小。

至于你的问题，你应该使用 arctan：

```
var angle = Math.atan((p1y - p2y) / (p2x - p1x)) * (180 / Math.PI); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:41:12.487

首先找到起点和终点之间的差异。

```
deltaY = P2_y - P1_y 
deltaX = P2_x - P1_x 
```

然后使用 arctan 计算角度

```
angleInDegrees = atan2(deltaY ,deltaX) * 180 / PI 
```

# fonts - 如何为 ZPL 语言创建和上传位图字体到 Zbera 热敏打印机？

> ID：15322250
> 
> 赞同：0
> 
> 时间：2013-03-10T12:32:40.177
> 
> 标签：fonts, zebra-printers, zpl, bitmap-fonts

您能否告诉我创建（上传）ZPL 语言的位图字体到 Zebra 热敏打印机的程序是什么？

事实证明，Zebra 不支持他们的客户端在不同的代码页中使用位图字体。他们的字体包中只有可缩放的字体。

是否可以创建或将 windows 位图字体转换为 FNT 文件并在 ZPL 语言中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:13:21.763

您可以在 Zebra 的知识库中找到将字体从 PC 上传到 Zebra 打印机的说明：[https ://km.zebra.com/kb/index?page=answeropen&type=open&searchid=1362935480906&answerid=16777218&iqaction=5&url=https%3A%2F% 2Fkm.zebra.com%2Fkb%2Findex%3Fpage%3Dcontent%26id%3DSO7889%26actp%3Dsearch%26viewlocale%3Den_US&highlightinfo=6292308,82,99#](https://km.zebra.com/kb/index?page=answeropen&type=open&searchid=1362935480906&answerid=16777218&iqaction=5&url=https%3A%2F%2Fkm.zebra.com%2Fkb%2Findex%3Fpage%3Dcontent%26id%3DSO7889%26actp%3Dsearch%26viewlocale%3Den_US&highlightinfo=6292308,82,99#)。

小心 - 在使用受版权保护的字体（例如 Arial）并将它们加载到打印机时存在法律问题。确保使用您拥有商业使用许可的字体或使用免费字体（我相信 Google 提供了许多免费字体）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-05T16:08:18.433

您可以使用 ^DY 命令直接将完整的 Truetype 字体下载到大多数 ZPL 打印机上。这是推荐的方法，除非字体大于打印机的可用存储空间。您必须查看打印机的用户指南以了解您的打印机有多少存储空间。除非您使用亚洲字体或较旧的打印机型号，否则这通常不是问题。[在这种情况下，您可以使用Zebra Setup Utility](https://www.zebra.com/us/en/products/software/barcode-printers/zebralink/zebra-setup-utility.html)附带的字体向导，通过仅选择您需要的字符来缩小字体。这也将其转换为 FNT 字体。直接方法将允许您将字体称为 TTF 或 OTF。

```
~DYE:MyFont,B,T,XXSIZE,,...binary data of full font 
```

详细信息：[https ://www.zebra.com/content/dam/zebra/manuals/printers/common/programming/zpl-zbi2-pm-en.pdf?page=164](https://www.zebra.com/content/dam/zebra/manuals/printers/common/programming/zpl-zbi2-pm-en.pdf?page=164)

就像 Jason 提到的，请记住确保您的字体已获得许可用于此用途。

# list - 如何更改列表中所有相等的元素？

> ID：15322251
> 
> 赞同：1
> 
> 时间：2013-03-10T12:32:44.277
> 
> 标签：list, functional-programming, ocaml

如何替换OCaml中`c`等于的列表的所有元素？`t`

我试过`List.filter`没有成功：

```
List.fold_right (fun c -> t) (List.filter c myLst) [] 
```

该`List`模块是否包含此任务的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:01:51.030

您可以使用`map`（参见[列表模块](http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html)）：

```
open Printf;;

let l = ['a'; 'b'; 'c'; 'd'; 'c']
let l2 = List.map (fun x -> if (x = 'c') then 't' else x) l;;
List.iter (printf "%c ") l2;; 
```

哪个打印

```
a b t d t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T14:55:30.093

如果您想使用 List.fold_right，可以使用以下方法：

```
let replace lst = List.fold_right (fun elmt accum -> 
    let e = if elmt = 'c' then 't' else elmt in
    e::accum
) lst [];;
      val replace : char list -> char list = <fun>
# replace ['a'; 'b'; 'c'];;
- : char list = ['a'; 'b'; 't'] 
```

注意：不要在 OCaml 中使用 == 而不是 =，它们有不同的含义。== 测试物理平等，但 = 测试语义平等。因此，当您使用 == 时，即使两个值在语义上相等，它也可能返回 false。

# php - 如何在模型中建立条件关系？

> ID：15322252
> 
> 赞同：0
> 
> 时间：2013-03-10T12:32:48.193
> 
> 标签：php, activerecord, yii, yii-relations

我在应用程序中有两种类型的配置文件，它们是两个不同的表。例如，个人资料在“person”表中，其 ID 以“p”开头，而企业资料在“business”表中，其 ID 以“b”开头。

我有一个“喜欢”表，可以在帖子和个人资料之间创建关系。但是，轮廓是条件关系；如果 profile_id 以 'b' 开头，则应为 Business 模型，如果不是，则应为 'Person' 模型。

我试图在模型的关系（）方法中加入一个 if 语句。但是，在那个阶段，属性没有初始化，我得到一个错误。我尝试使用 afterFind() 和 afterConstruct() 来添加与模型元数据的关系（使用 CActiveRecordMetaData::addRelation()）。当我在 afterFind 或 afterConstruct 中呼应关系的类型时，它们都是应有的。但是，由于某种原因，当我尝试遍历某些结果并访问关系时，它们都被标识为业务。当我在添加关系之后调用 CActiveRecord::refresh() 时，我收到一个错误，说达到了 100 个嵌套函数调用的限制。

如何实现这种条件关系？

# java - SWT 组复合边界分散器

> ID：15322253
> 
> 赞同：0
> 
> 时间：2013-03-10T12:32:51.593
> 
> 标签：java, swt, composite

当我按 TAB 键时，SWT 组复合边框消失。壳牌有 3 组复合材料，但消失的问题只有一组。

```
 Group grpCustomerDetails = new Group(this, SWT.NONE);
    grpCustomerDetails.setForeground(SWTResourceManager
            .getColor(SWT.COLOR_DARK_GRAY));
    grpCustomerDetails.setFont(SWTResourceManager.getFont("Segoe UI", 8,
            SWT.NORMAL));
    grpCustomerDetails.setText("CUSTOMER DETAILS");
    grpCustomerDetails.setBounds(10, 49, 917, 273);
           .........................
            Group grpBankDetails = new Group(this, SWT.NONE);
    grpBankDetails.setText("BANK DETAILS");
    grpBankDetails.setBounds(954, 49, 396, 214);
           ..........................
            ScrolledComposite scrolledComposite = new ScrolledComposite(this,
            SWT.BORDER | SWT.H_SCROLL | SWT.V_SCROLL);
    scrolledComposite.setBounds(10, 335, 1340, 300);
    scrolledComposite.setExpandHorizontal(true);
    scrolledComposite.setExpandVertical(true);

    table = new Table(scrolledComposite, SWT.BORDER | SWT.FULL_SELECTION);
    table.setHeaderVisible(true);
    table.setLinesVisible(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T09:30:15.953

我遇到了类似的问题，这似乎是 SWT 中的一个错误：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=145662](https://bugs.eclipse.org/bugs/show_bug.cgi?id=145662)

# javascript - 在 Groovy 中等效于 Javascript 的 map()？

> ID：15322256
> 
> 赞同：4
> 
> 时间：2013-03-10T12:33:04.770
> 
> 标签：javascript, list, groovy, loops

在 Javascript 中的函数

```
array.map(callback[, thisArg]) 
```

创建一个新数组，其结果是对该数组中的每个元素调用提供的函数。（根据[mdn](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)上的文档）。Groovy 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-10T12:38:07.590

您可能正在寻找[`collect`](http://groovy.codehaus.org/groovy-jdk/java/lang/Object.html#collect%28groovy.lang.Closure%29)：

```
def numbers = [1,2,3]
assert numbers.collect { it * 2 } == [2,4,6] 
```

还有专门为`Collection`和 数组类型定义的变体（与对任何对象都有效的 collect 自身相反，默认行为将任意对象视为与仅包含该对象的单元素数组相同），例如[`collectMany`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#collectMany%28groovy.lang.Closure%29)，它允许您要为每个元素返回一个包含零个、一个或多个结果的列表，并将结果全部连接起来

```
assert numbers.collectMany { (it > 1) ? [it, -1*it] : [] } == [2, -2, 3, -3] 
```

# java - 如何在 Eclipse 中禁用只读文件警告？

> ID：15322260
> 
> 赞同：1
> 
> 时间：2013-03-10T12:33:38.317
> 
> 标签：java, eclipse, readonly

当您想在 Eclipse 中编辑只读文件时，会出现一个消息框，询问：`"File ... is read-only. Do you wish to make it writable?"`.

![在此处输入图像描述](../Images/a2fae37a919b12a93314cfd5f0ee2f1d.png)

当我打开只读文件时，如何摆脱此消息框并始终使编辑器处于只读模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-04T15:25:53.197

尝试

文件>资源下的属性>属性下>取消选中只读

在日食 Helios 中为我工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:06:03.050

一个插件可以做到这一点。但我想出了一个棘手的问题。将该项目下的所有文件设置为只读，并使其只能由管理员组写入和控制，然后在没有管理员权限的情况下启动eclipse。我已经测试了对话框不会出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T19:44:20.253

很多年前，我曾经在这个问题上看到过针对 Eclipse 的缺陷请求，似乎 Eclipse 开发人员没有计划这样做。

另外，我找不到 StarPinkER 提到的 Eclipse 插件，所以同时最烦人的方法是在对话框出现时**按 ESC 按钮。**

# c++ - 数组的运行时错误

> ID：15322265
> 
> 赞同：-4
> 
> 时间：2013-03-10T12:34:19.907
> 
> 标签：c++, arrays, pointers, runtime, runtime-error

嗨，我最近使用 DirectX9，遇到了这个错误。虽然它与 DirectX 无关。这就是我所拥有的。

```
struct D3DVertex
{
    float x, y, z;
    DWORD Color;
};

int main()
{
    D3DVertex *TestShape = new D3DVertex();

        TestShape[0].x = 0.0f;
        TestShape[0].y = 2.0f;
        TestShape[0].z = 0.5f;
        TestShape[0].Color = 0xffffffff;

        TestShape[1].x = -2.0f;
        TestShape[1].y = -2.0f;
        TestShape[1].z = 0.5f;
        TestShape[1].Color = 0xffffffff;

        TestShape[2].x = 2.0f;
        TestShape[2].y = -2.0f;
        TestShape[2].z = 0.5f;
        TestShape[2].Color = 0xffffffff;

return 0;
} 
```

当我运行它时，它会给我一个运行时错误，上面写着这个。

```
Windows has triggered a breakpoint in x.exe.

This may be due to a corruption of the heap, which indicates a bug in x.exe or any of the DLLs it has loaded.

This may also be due to the user pressing F12 while x.exe has focus.

The output window may have more diagnostic information. 
```

但是当我拿走这条线时`TestShape[2].z = 0.5f;`，错误就消失了。为什么会发生这种情况，我该如何解决。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T12:42:35.480

您正在内存中创建一个对象：

```
D3DVertex *TestShape = new D3DVertex(); 
```

然后你像访问数组一样访问它

```
TestShape[x] ... 
```

这就是问题所在，您没有数组。你有一个对象。

创建一个数组：

```
D3DVertex *TestShape = new D3DVertex[3]; 
```

现在你有 3 个类型的对象`D3DVertex`。

要记住的重要一点是指针不是数组。唯一获得指针的情况是，当您将数组作为参数传递给函数时，该数组已*衰减为指针。*然后你得到一个指向数组中第一个元素的指针。

更好的是，使用 a`std::vector<D3DVertex> TestShape;`而不必担心处理指针。

```
D3DVertex foo; //create object.

TestShape.push_back(foo); //add it to your vector. 
```

`operator[]`您可以使用未检查访问或`at(index)`边界检查访问来访问您的向量

```
D3DVertex f = TestShape[0]; //Get element zero from TestShape. 
```

如果您想遍历向量并查看每个元素：

```
for (std::vector<D3DVector>::iterator it = TestShape.begin(); it != TestShape.end(); ++it) // loop through all elements of TestShape.
{
     D3DVector vec = *it; //contents of iterator are accessed by dereferencing it
     (*it).f = 0; //assign to contents of element in vector.
} 
```

# c++ - C++ this 指针，函数调用中的隐藏参数

> ID：15322268
> 
> 赞同：0
> 
> 时间：2013-03-10T12:34:44.790
> 
> 标签：c++, this

我有一个包含成员的堆栈类和一个名为 push 的函数。

```
class STACK
{
    int data;
    public:
    void push(int x)
    {
        data=x;
    }
} 
```

C++ 做了什么来转换这个语句：

```
s1.push(3); 
```

至

```
s1.push(this,3); 
```

基本上我的问题是在引擎盖下会发生什么来生成`this`指针并将其作为隐藏参数传递？

我实际上是在用 C 编码。我的目标是拥有一个尽可能接近 OOP 的程序。为此，我将函数指针作为结构的成员。因此，我想知道是否有可能以某种方式跟踪调用函数的结构（如“this”指针）。我不想做类似的事情： s1.push(&s1,3); 因为它超出了我的目的。

**是否可以转换 s1.push(3); 到 s1.push(&1,3); 通过宏替换**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T12:42:10.813

最重要的事情！该声明：

```
s1.push(3); 
```

不翻译为：

```
 s1.push(this, 3); 
```

但是对于这样的事情：

```
STACK::push(&s1, 3); 
```

where`STACK::push`可以被视为 class/namespace 下的 global/namespace 或 static 函数`STACK`，其原型为：

```
push(STACK const* pThis, int arg); 
```

`this`指针始终是方法（函数）的第一个参数。如果方法的参数为零，它仍然有一个参数（`this`类的指针）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T12:37:12.717

没有魔法

```
s1.push(3); 
```

只是语法

```
STACK::push(&s1, 3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:36:18.050

```
this = &s1 
```

s1 的地址是已知的，因此可以将其传递给 STACK::push。就这么简单:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T12:37:38.413

C++ 不能完全转换语句（因为 C++ 是一种语言规范，您可以通过多种方式实现该语言，即使是不道德的，也有大量奴隶在纸上工作；您不需要计算机，即使您想要一台, 拥有 C++)。编译器（例如 GCC）将语句转换为其他一些较低级别的表示。使用 GCC，它是 Gimple 语句，并且可以检查 Gimple 表示，例如使用[MELT 的探针](http://gcc-melt.org/index.html#probe_id)或[-fdump-tree-gimple](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)和其他选项（如`-fdump-tree-all`或`-fdump-tree-ssa`等...）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T17:21:03.587

在您编辑之后，这个问题又涉及到另一个问题 - C 中的 OOP。这很困难且类型不安全，但可以实现。您可以查看 GObject 库，它在 C 中提供对象系统。我猜它大量使用宏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-10T13:35:14.487

不幸的是，您必须在 C 中显式或隐式指定指针。

对于 C++，编译器负责将隐式`this`指针设置为类成员函数的参数。在您的代码中，成员函数`void STACK::push(STACK*, int)`在编译时被编译器自动修改，然后，当`STACK::push`调用成员函数时，编译器会将对象地址（`this`）设置为成员函数的参数（通常是第一个）`STACK::push`。

没有 C 编译器会提供上述功能，因此，设置指针是用户的责任。

# php - php表单重定向到其他页面并接收值

> ID：15322269
> 
> 赞同：0
> 
> 时间：2013-03-10T12:34:56.240
> 
> 标签：php

我有一个 php 页面，其中包含一个名为“BuyForm”的表单和一个单独的提交按钮.. 像这样

```
<form id="BuyForm" name="BuyForm" method="post" action="purchase.php" enctype="multipart/form-data">
// form goes here
//example of one field
<div class="wrapper"> Your Name:
<input type="text" class="input" name="txtUserName" value="<?php if(isset($user_name)){echo $user_name;} ?>" <?php if(isset($flag) && $flag == 1){echo "error";}?> >
</div>
// more form options 
```

此表格在此页面“purchase.php”上。action="purchase.php" 即将此表单重定向回此页面的原因是因为所有验证仅在此页面中。

现在我遇到了一个问题并寻求意见..

1.  我想将这些表单值（例如 name="txtUserName"）传输到另一个页面，我知道我可以通过 action="otherpage.php" 直接执行此操作并通过 php 接收。但这不可能，因为我必须将所有当前验证移至该页面（otherpage.php），如果有任何问题，则我必须重定向回此表单页面（purchase.php），这将浪费时间和带宽而不是一个好的编码..在这种情况下还能做什么？即我如何将值从这个页面发送到那个页面？

2.  关于上面的 Q-1，我如何在该页面上接收值？

谢谢期待。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:37:43.413

将您的 $_POST 值保存到数组中并通过标头位置发送。

我的例子：

```
$values = $_POST;

header('Location: other_page.php?'.http_build_query($values ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:43:36.647

使用会话呢？

```
session_start();
foreach ($_POST as $key=>$value){
   $_SESSION[$key]=$value;
} 
```

有了它，您可以在任何地方访问该值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:45:50.500

你可以这样做：

在您的 purchase.php 中：

```
if(!isset($_POST['var_name'])) {

//here the form code

}
else
{
//here's the validation
} 
```

# linux - 我如何从期望脚本中的文件中读取数据

> ID：15322273
> 
> 赞同：2
> 
> 时间：2013-03-10T12:35:21.310
> 
> 标签：linux, expect

```
#! /bin/expect   
set timeout 20 
set user [lindex $argv 0] 
set password [lindex $argv 1] 
set prompt "$ "  ;# -- main activity   
proc dostuff { currenthost} {      
;# do something with currenthost      
send -- "ls -lrt\r"   return}   ;# -- start of task

set fd [open ./hostlist r] 
set hosts [read -nonewline $fd] 
close $fd 

foreach host [split $hosts "\n" ] {       
spawn /usr/bin/ssh $user@$host       
  while (1) {         
    expect { 
        "no)? " {            
        send -- "yes\r"        
    }                  
    "password: " {             
        send -- "$password\r"        
    }                   
    "$prompt" {            
        dostuff { $host }            
        break        
    }       
     }    
  } 

expect "$prompt"   
send -- "exit\r"  
}   
expect eof 
```

我在网上浏览了[这段](http://kahimyang.info/kauswagan/howto_blogs/704-using_expect_script_to_automate_ssh_logins_and_do_routine_tasks_accross_multiple_hosts)代码，但如果它被排列在 2 列中，它会读取数据。

```
HOST   TFTP_SERVER_ADDRESS
xx     XXYY
aa     AABB
...    ...
...    .... 
```

等等

我想将每个 TFTP_SERVER_ADDRESS 分配给一个变量并在我的脚本中使用它。

此外，这段代码是否安全：

```
# grab the password
stty -echo
send_user -- "Password for $user@$host: "
expect_user -re "(.*)\n"
send_user "\n"
stty echo
set pass $expect_out(1,string)

#... later
send -- "$pass\r" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T13:55:51.097

从文件中读取数据然后调用期望脚本的示例脚本。

更改密码.sh

```
while read line
do
    pin=`echo $line | awk -F'|' '{print $1}'`
    ipaddress=`echo $line | awk -F'|' '{print $2}'`
    password=`echo $line | awk -F'|' '{print $3}'`
    #echo "$pin -- $password -- $ipaddress"
    echo "./t.expect $ipaddress $pin \"$password\" "
done<pin_password_8_192series.csv 
```

t.expect

```
#!/usr/bin/expect -f
set timeout 20
set IPaddress [lindex $argv 0]
set PIN [lindex $argv 1]
set PASSWORD [lindex $argv 2]

spawn telnet $IPaddress 
expect "localhost login:"
send "root\r"
expect "Password:"
send "root\r"
send "cd /mnt/sip\r"
send "sed -i  's/Password=\"$PIN\"/Password=\"$PASSWORD\"/g' Config.xml\r"
send "reboot\r"
send "exit\r"
interact 
```

pin_password_8_192series.csv

```
341|192.168.6.1|&<M11qqHVkDdBj2
342|192.168.6.3|gyo8rB-9C<Ok.;=
343|192.168.6.6|skFI)4S-O.&-y,i
344|192.168.6.8|+Fqp6z*qEtQN0s? 
```

# jquery - 对本地 libcs oap/nanohttpd 服务器的 jquery/soap 请求-> Access-Control-Allow-Origin 不允许 Origin *

> ID：15322279
> 
> 赞同：1
> 
> 时间：2013-03-10T12:36:06.483
> 
> 标签：jquery, http, post, soap, nanohttpd

我写了一个 c 程序，它需要一个接口来连接其他程序，也需要一个 webste。所以我只是选择了libcs​​oap来创建一个soap接口。libcs​​oap 库基于 nanohttpd，这是一个用 c 编写的小型 http 服务器。

我刚刚实现了一些测试函数，例如一个`ping`只返回一个没有任何有趣数据的 xml 的函数。

我可以在 libcs​​oap 的帮助下毫无问题地调用这些函数。但是现在，我尝试从一个虚拟网站调用肥皂接口。我刚刚创建了一个带有 textarea 和一个按钮的 html 文件，以将 textarea 的内容作为原始 xml 发送。

然后我尝试将答案放入- 按钮`div`旁边`send`。此 html 文件位于我的本地计算机`xubuntu-02`上的 apache2 网络服务器上。

这是代码：

```
<HTML xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <HEAD>
    <TITLE>Debug Post</TITLE>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
    function submit_data() {
        var src = document.getElementById('data');
        $.support.cors = true;

        $.ajax({
            url: 'http://xubuntu-02:10000/tbs_blabla',
            type: 'POST',
            async: false,
            timeout: 30000,
            data: src.value,
            success: function(data) {
                alert('OK!');
                /*document.getElementById('data').value = data;*/
            },
            fail: function() {
                alert('failed');
            }
        });
    }
    </script>
  </HEAD>
  <BODY>
    <H1>Debug Post</H1>
      <textarea id="data" rows="10" cols="80">
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance" xmlns:xsd="http://www.w3.org/1999/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"> <SOAP-ENV:Header/> <SOAP-ENV:Body>  <m:ping xmlns:m="urn:tbs_blabla">  <m:name xsi:type="xsd:string">Jonny B. Good</m:name></m:ping> </SOAP-ENV:Body></SOAP-ENV:Envelope>

     </textarea>
      <p>
        <input type="button" value="Submit" onclick="submit_data();return false;" />
      </p>
    <p>
    <div id="res">
    </div>
    </p>
  </BODY>
</HTML> 
```

我使用铬来调试代码。可以观察所有http请求，我总是得到http状态200作为答案。所以......请求应该是完整的？如果我检查服务器端的日志（libcs​​oap-log），我还可以看到 xml 已处理，创建了一个新的 xml 并发送了新的 xml。

我还用wireshark检查了请求，似乎没问题：

```
POST /tbs_blabla HTTP/1.1
Host: xubuntu-02:10000
Connection: keep-alive
Content-Length: 425
Accept: */*
Origin: http://xubuntu-02
User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Referer: http://xubuntu-02/test.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
DNT: 1

<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance" xmlns:xsd="http://www.w3.org/1999/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"> <SOAP-ENV:Header/> <SOAP-ENV:Body>  <m:ping xmlns:m="urn:tbs_blabla">  <m:name xsi:type="xsd:string">Jonny B. Good</m:name></m:ping> </SOAP-ENV:Body></SOAP-ENV:Envelope>

     HTTP/1.1 200 OK
Date: Sun, 10 Mar 2013 13:28:33 GMT
Server: Nano HTTPD library
Content-Type: text/xml
Content-Length: 417

<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"> <SOAP-ENV:Header/> <SOAP-ENV:Body>  <m:pingResponse xmlns:m="urn:tbs_blabla">  <m:ok xsi:type="xsd:boolean">true</m:ok></m:pingResponse> </SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

所以，一切看起来都不错，但在 javascript 控制台中的 chromium 中，我总是得到`XMLHttpRequest cannot load http://xubuntu-02:10000/tbs_blabla. Origin http://xubuntu-02 is not allowed by Access-Control-Allow-Origin.`.

我总是发送一个请求，但网页上什么也没发生。

我不知道为什么。我测试了很多东西。`chromium-browser --disable-web-security`例如，以或开始铬`chromium-browser --allow-file-access-from-files`。

我检查了许多stackoverflow-posts：

[错误：使用 JQuery 的 ajax 方法加载 XML 文件时，“Access-Control-Allow-Origin 不允许 Origin null”](https://stackoverflow.com/questions/5396527/error-origin-null-is-not-allowed-by-access-control-allow-origin-when-loading)

[XmlHttpRequest 错误：Access-Control-Allow-Origin 不允许 Origin null](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin)

[Access-Control-Allow-Origin 不允许 Origin null](https://stackoverflow.com/questions/8456538/origin-null-is-not-allowed-by-access-control-allow-origin)

[$.ajax(): Origin null 是不允许的](https://stackoverflow.com/questions/7752527/ajax-origin-null-is-not-allowed)

[将 jQuery Post 发送到 Google API 的 Access-Control-Allow-Origin 错误](https://stackoverflow.com/questions/6114436/access-control-allow-origin-error-sending-a-jquery-post-to-google-apis)

...

也许有人可以看到我做错了什么？

感谢您的帮助。

此致

- 编辑 -

我只是在 php 中写了一个小“代理”。它只是接收 xml 并将其发送到 localhost:10000，然后返回 xml-answer。现在我使用 xml 的后字段数据。

这是php文件：

```
<?php
echo shell_exec('curl http://localhost:10000/tbs_lgrow -m60 -d' . escapeshellarg($_POST['data']));
?> 
```

现在它适用于这个小技巧。

谢谢

此致

# jquery - jQuery：如何在 ajaxForm 函数中包含验证？

> ID：15322284
> 
> 赞同：1
> 
> 时间：2013-03-10T12:36:33.277
> 
> 标签：jquery, jquery-validate, ajaxform

[已提出此问题](https://stackoverflow.com/questions/12381768/ajaxform-not-working-inside-the-validation-submithandler) ，但未确认答案。我试过了，但没有用。所以我想再次问同样的问题（这样合适吗？如果不合适，请告诉我该怎么做）。

我有一个需要验证的表单，然后使用 ajaxForm 提交（该表单包含图像和文件数据，因此`.serialize()`无法提交）。以下是详细信息：

HTML：

```
<form id="myForm" action="..." method="post" enctype="multipart/form-data">
  ...
  <input type="file" name="image" /><br />
  <input type="file" name="file" /><br />
  ...
</form> 
```

jQuery：

```
$(document).ready(function() {

  $("#myForm").ajaxForm ({

    beforeSubmit: function() {
      $("#myForm").validate({
        onkeyup:false,
        rules: {
          ...
        },
        messages: {
          ...
        },
      });
    },

    success: function(returnData) {
      $('#content').html(returnData);
    }

  });

}); 
```

该`ajaxForm`部分是好的。但是表单只是未经验证就提交了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T16:21:43.363

[`.validate()`用于在 DOM ready 上初始化插件](http://docs.jquery.com/Plugins/Validation/validate#options)，因此将其拉到其他函数之外。

*准备好在 DOM 中初始化*两个插件，然后使用任何适当的内置回调函数...

*   使用插件的[回调](http://www.malsup.com/jquery/form/#options-object)[`beforeSubmit`函数，使用`ajaxForm`](http://www.malsup.com/jquery/form/#options-object)[Validate 插件的`.valid()`方法](http://docs.jquery.com/Plugins/Validation/valid)以编程方式检查表单的有效性。

**您无需担心创建任何新的`submit`处理程序或`click`处理程序函数，因为这两个插件已经自动捕获`submit`事件。**

**工作演示：http: [//jsfiddle.net/MF26D/](http://jsfiddle.net/MF26D/)**

将您的代码重新排列成更像这样的东西：

```
$(document).ready(function () {

    $("#myForm").validate({ // initialize the plugin
        // any other options,
        onkeyup: false,
        rules: {
            //...
        },
        messages: {
            //...
        }
    });

    $("#myForm").ajaxForm({ // initialize the plugin
        // any other options,
        beforeSubmit: function () {
            return $("#myForm").valid(); // TRUE when form is valid, FALSE will cancel submit
        },
        success: function (returnData) {
            $('#content').html(returnData);
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:41:22.330

试试这个

```
 $(document).ready(function() {

      $("#myForm").ajaxForm ({

        beforeSubmit: function() {
           if (!$("#myform").valid())
                    return;
        },

        success: function(returnData) {
          $('#content').html(returnData);
        }

      });

    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T12:41:30.303

可以在提交处理程序中调用表单插件：

```
$("#myForm").submit(function(e){
  e.preventaDefault();

   var isValid=/* run your validation code that determines true or false*/

   if( isValid){
     $(this).ajaxForm({/* plugin options*/})
  }

}) 
```

# c# - 使用实体框架将基类型定义查询为派生类型

> ID：15322298
> 
> 赞同：1
> 
> 时间：2013-03-10T12:38:29.543
> 
> 标签：c#, .net, entity-framework

我有以下 POCO（使用 Code First 和 EF 6.0.0 alpha 3）：

```
public class RevBase
{
    [Key]
    public int Id{ get; set; }
}

public class ItemBase
{
    [Key]
    public int Id { get; set; }

    public List<RevBase> Revs { get; set; }
}

public class RevDev : RevBase
{
    public string Content { get; set; }
}

public class ItemDev : ItemBase
{
    public string Title { get; set; }
} 
```

以及以下上下文

```
public class MyContext : DbContext
{
    DbSet<ItemDev> Items { get; set; }
} 
```

现在我想查询`context.Items.Include(i => i.Revs)`但以某种方式告诉 EF 它应该将 Revs 加载为`RevDev`not `RevBase`。

这是可能的还是我需要加载它们`RevBase`并进行另一个查询以获取相应的`RevDev`实例？

我尝试的另一种方法是从`RevDev`to创建第二个关系`ItemDev`，但随后 EF 还在数据库中创建了第二个外键列，这并不是真正必要的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:18:26.690

> 将 Revs 加载为 RevDev 而不是 RevBase

如果给定`RevBase`的不是 a `RevDev`，则不能将其加载*为* `RevDev`. （不是每一种动物都是狗。你不能把每一种动物都变成狗，有些是猫。）

实际上，我认为您需要的是按类型*过滤*，这在使用时通常会出现问题，`Include`因为它根本不支持任何过滤。我看到你有两个选择：

*   使用显式加载（支持过滤）：

    ```
    var items = context.Items.ToList();
    foreach (var item in items)
        context.Entry(item).Collection(i => i.Revs).Query()
            .Where(r => r is RevDev)
            .Load(); 
    ```

    这些是 1 + N 个单独的数据库查询。

*   使用投影：

    ```
    var items = context.Items
        .Select(i => new
        {
            Item = i,
            RevDevs = i.Revs.Where(r => r is RevDev)
        })
        .AsEnumerable()
        .Select(a => a.Item)
        .ToList(); 
    ```

    这只是一个数据库查询。自动关系修复应`Item.Revs`使用已加载的`RevDevs`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:12:36.053

刚刚发现实体框架默认情况下会这样做。我的代码中有另一个错误，为什么它不起作用......

# django - 在 django python 中使用注册应用程序

> ID：15322301
> 
> 赞同：0
> 
> 时间：2013-03-10T12:38:57.107
> 
> 标签：django, django-registration

我已按照[http://lightbird.net/dbe/forum3.html#user-registration](http://lightbird.net/dbe/forum3.html#user-registration)教程在 django 中使用注册应用程序。我假设注册应用程序有效，因为我在应用程序的数据库中获取了注册用户，问题是我无法使用该用户登录我想我需要通过电子邮件确认注册。我如何仅出于开发目的解决此问题。我的注册表位于 localhost/accounts/register/ 并且我的登录表单位于 localhost/accounts/login/ 当我尝试登录时，没有任何反应，我停留在同一个屏幕上。

# html - 忽略全屏画布

> ID：15322304
> 
> 赞同：0
> 
> 时间：2013-03-10T12:39:05.843
> 
> 标签：html, canvas

我在网页上有一个全屏画布。大小在 processingjs 中处理。

```
 <div id="canvasDiv">
            <canvas id="processingCanvas" data-processing-sources="resources/processing/canvas01.pde"> </canvas>
        </div> 
```

画布后面是很多文字。问题是我不能再在 iPad 上滚动，因为画布在顶部。有没有办法忽略画布但仍将其显示在顶部？这是当前的CSS：

```
#canvasDiv {
    position: absolute;
    left: 0;
    z-index: 999;
}

#processingCanvas {
    position: fixed;
    top: 0;
    left: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:46:43.070

**以下是如何让元素落入底层元素：**

如果浏览器是 Chrome、Firefox、Safari、Blackberry 或 Android，但不是 IE 或 Opera，您可以使用指针事件告诉画布不要处理点击/触摸事件，然后点击/触摸将由底层元素处理. 所以，在 CSS 中：

```
 #topCanvas{ pointer-events: none; } 
```

但是在 IE 和 Opera 中，你必须很棘手：

*   隐藏顶部画布，
*   在底部元素上触发事件，
*   显示顶部画布。

这段代码展示了如何触发底层元素的事件：

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
body{ background-color: ivory; }
#wrapper{ width:200; height:200;}
#bottom{ position:absolute; top:0; left:0; width:200; height:200; background-color:red; }
#top{ position:absolute; top:0; left:0; width:200; height:200; background-color:blue; }
</style>

<script>
$(function(){

    $('#top').click(function (e) {
        $('#top').hide();
        $(document.elementFromPoint(e.clientX, e.clientY)).trigger("click");
        $('#top').show();
    });

    $("#bottom").click(function(){ alert("bottom was clicked."); });

}); // end $(function(){});
</script>

</head>

<body>
    <div id="wrapper">
        <canvas id="bottom"></canvas>
        <canvas id="top"></canvas>
    </div>
</body>
</html> 
```

# c - 读取 BMP 文件并旋转

> ID：15322305
> 
> 赞同：0
> 
> 时间：2013-03-10T12:39:09.370
> 
> 标签：c, bitmap

我正在尝试读取 BMP 文件并将其保存在二维缓冲区中，以便将其旋转成直角。但是，最终文件不正确，无法显示。下面的代码有什么问题？

```
#include <fstream.h>
#include <iostream.h>

int main() {
    long int width=686;
    long int height=800 ;
/* open file */
    FILE * bitmap_file= fopen("filename.bmp", "rb");
    if(!bitmap_file) {
        printf("Could not find file.\n");
        fclose(bitmap_file);
        return 0;
    }
    printf("File opened.\n");
    typedef struct buffer1
    {         
        int red;
        int green;
        int blue;
    } buffer1;
    static buffer1 buffer_bitmap1[686][800];
    fseek(bitmap_file, 0, SEEK_SET);
    int count=0;
    for(int i = 0; i <8; ++i){
        for(int j = 0; j <6; ++j){
            fread(&buffer_bitmap1[j][i].red , 1, 1, bitmap_file);    /*for rotate bmp exchange the width with height in matrix.*/
            fread(&buffer_bitmap1[j][i].green, 1, 1, bitmap_file);
            fread(&buffer_bitmap1[j][i].blue, 1, 1, bitmap_file);
            count=count+8;
            fseek(bitmap_file,count, SEEK_CUR);     /*move pointer*/
        }
    }
    fclose(bitmap_file);
    FILE *bitmap_file1= fopen("filename.bmp", "a");
    count=0;
    fseek(bitmap_file, 0, SEEK_SET);
    char * a ="a";
    for(int i = 0; i <6; ++i){
        for(int j = 0; j <8; ++j) {
            fwrite(&buffer_bitmap1[i][j],1,1,bitmap_file1);
            fwrite(&buffer_bitmap1[i][j].blue,1,1,bitmap_file1);
            fwrite(&buffer_bitmap1[i][j].green,1,1,bitmap_file1);
            count=count+8;
            fseek(bitmap_file, 8, SEEK_CUR);     /*move pointer*/
        }
    }
    fclose(bitmap_file);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:55:31.683

至少，您不能简单地从头开始读取 BMP 文件，因为它具有[BMP Header](http://en.wikipedia.org/wiki/BMP_file_format)。

首先，您需要读取标头以获取 BMP 参数（图像大小、数据偏移量、每像素位数等）

其次，为了旋转图像并能够看到结果，您还需要修改标题。

# c# - 有没有办法记录 ASP.NET 页面中发生的任何意外异常？

> ID：15322309
> 
> 赞同：2
> 
> 时间：2013-03-10T12:39:24.190
> 
> 标签：c#, asp.net, logging, log4net

我正在使用 log4net 记录预期的异常，如下所示：

```
try {
   // some exception occurred
} catch (Exception ex)
{
   log.Error("Exception occurred!", ex);
} 
```

该信息将被写入文件或我设置的某个地方。但是对于那些不在 try...catch 块运行时异常中的，我怎样才能在发生时完全记录它们？

log4net 是否支持它或者有什么方法可以将它们记录在一起？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T12:41:07.310

您可以订阅`Application_Error`Global.asax 中的全局事件处理程序，其中所有未处理的异常都会冒泡，您将有可能记录（并可能处理它们）。

例如：

```
protected void Application_Error()
{
    var exception = Server.GetLastError();
    log.Error("Exception occurred!", exception);

    // TODO: optionally handle the exception here, for example display
    // some custom error page or something
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T12:41:29.473

[ELMAH](https://code.google.com/p/elmah/)是您的朋友 - 您*可以*将它[与 log4net 一起](https://github.com/edwinf/log4net---ELMAH-Appender)使用。

> ELMAH（错误记录模块和处理程序）是一个完全可插拔的应用程序范围的错误记录工具。它可以动态添加到正在运行的 ASP.NET Web 应用程序，甚至是一台机器上的所有 ASP.NET Web 应用程序，无需重新编译或重新部署。

您可以使用 nuget 获得适当的包配置。

# django - 如何通过 django 中的“ObjectId”mongodb 字段找到？

> ID：15322310
> 
> 赞同：0
> 
> 时间：2013-03-10T12:39:35.663
> 
> 标签：django, mongodb, objectid

我正在寻找通过“ObjectId”获取字段的方法

但是，我没有找到。

我取消了 Entries 模型

```
class Entries(models.Model):
    subject = models.CharField(max_length=120, null=False)
    content = models.TextField(null=False)
    created = models.DateTimeField(auto_now_add=True, auto_now=True)
    writer = models.CharField(max_length=30, null=False)

@csrf_exempt
def viewPost(request, entry_number): # ex) entry_number = '513c780210ae920f58762d3d'
    e = Entries.objects.get(id = entry_number) # error!!
    return HttpResponse('zz') 
```

它代码引发错误，因此我尝试在代码下。

```
e = Entries.objects.get(_id = entry_number) # error!!
e = Entries.objects.get(pk = entry_number) # error!!
e = Entries.objects.get(id = entry_number) # error!!
e = Entries.objects.get(_id = ObjectId(entry_number)) # error!!
e = Entries.objects.get(pk = ObjectId(entry_number)) # error!!
e = Entries.objects.get(id = ObjectId(entry_number)) # error!!
e = Entries.objects(id = entry_number) # error!! 
```

它给我看消息

```
'invalid literal for int() with base 10: '513c780210ae920f58762d3d', ... 
```

因此，现在我正在使用 pymongo（没有 django 的 ORM）

```
d = entries_table.find_one({'_id' : ObjectId(entry_number)})
return render_to_response('view.html', {'ROOT_URL':ROOT_URL,
                                        'entry':d, 'id':d['_id']}) 
```

有人帮我使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:53:40.480

Django ORM 现在不支持 MongoDB。请改用 PyMongo。

# c# - 从两个表中获取数据（查询）

> ID：15322311
> 
> 赞同：-2
> 
> 时间：2013-03-10T12:39:43.790
> 
> 标签：c#, sql, sql-server

查询两个表时出现错误。“'tbl_programme' 附近的语法不正确。” 当我运行以下代码时。我想从两个表中检索数据。

```
// Define the ADO.NET objects.
        SqlConnection con = new SqlConnection(connectionString);
        string selectSQL = "SELECT * FROM tbl_team";
        SqlCommand cmd = new SqlCommand(selectSQL, con);
        SqlDataAdapter adapter = new SqlDataAdapter(cmd);
        DataSet dsPubs = new DataSet();

        // Try to open database and read information.
        try
        {
            con.Open();
            adapter.Fill(dsPubs, "tbl_team");

            // This command is still linked to the data adapter.
            cmd.CommandText = "SELECT * tbl_programme";
            adapter.Fill(dsPubs, "tbl_student_project_choice");

            DataRelation test = new DataRelation("test",
            dsPubs.Tables["tbl_team"].Columns["teamId"],
            dsPubs.Tables["tbl_student_project_choice"].Columns["choiceGroupId"]);
            dsPubs.Relations.Add(test);

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T12:40:22.393

您在陈述中错过了`FROM`关键字，`SELECT`

```
cmd.CommandText = "SELECT * FROM tbl_programme";
                         // ^ HERE 
```

# types - 将哈希表标识为 OCaml 中的用户定义类型

> ID：15322321
> 
> 赞同：9
> 
> 时间：2013-03-10T12:40:44.853
> 
> 标签：types, ocaml

我希望能够定义一种类型（比如 my_type），它可以识别以字符串为键的哈希表并映射到整数值。
所以，我尝试了

```
# type my_type = (string, int) Hashtbl.t;; 
```

但是，当我尝试

```
# let a = Hashtbl.create 100;;
val a : ('_a, '_b) Hashtbl.t = <abstr>
# Hashtbl.add a "A" 12;;
- : unit = ()
# a;;
- : (string, int) Hashtbl.t = <abstr> 
```

最后一行显示 (string, int) Hashtbl.t = abstr 而不是 my_type。如何确保它给我哈希表的类型为 my_type？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T15:05:51.383

声明类型同义词并期望编译器在精确情况下使用一个表达式或另一个表达式是没有意义的：因为它们是相同的类型，编译器将使用其中一个，而您几乎无法控制。

如果要强制执行类型抽象，以免将类型`my_type`与任何其他类型混合`(string, int) Hashtbl.t`，则应使用标记差异的构造函数定义新类型：

```
type my_type = Tbl of (string, int) Hashtbl.t
let a = Tbl (Hashtbl.create 100)
let add (Tbl t) k v = Hashtbl.add t k v 
```

`my_type`您可能想要这个（并且当您想使用其中一个函数时，必须通过显式模式匹配将所有值转换为哈希表的成本`Hashtbl`），或者您可能只想操作类型同义词，但在后一种情况下您不应期望编译器输出报告任何特定类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T14:37:15.833

更新：抱歉，正如gasche指出的那样，您可以使用简单的类型注释来做到这一点，忘记类型强制

```
# type my_type = (string, int) Hashtbl.t;;
type my_type = (string, int) Hashtbl.t
# let (a : my_type) = Hashtbl.create 100;;
val a : my_type = <abstr> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T13:57:39.307

`my_type`只是 的同义词`(string, int) Hashtbl.t`，您可以互换使用。

您可以通过以下方式告诉编译器`a`类型为`my_type`，并获得更好的输出：

```
# let (a:my_type) = Hashtbl.create 100;;
val a : my_type = <abstr>
# a;;
- : my_type = <abstr> 
```

如果您想知道`<abstr>`，这意味着顶层不知道如何打印`a`（它的内容，而不是它的类型）。

# java - 从为超类创建的链表中插入和提取子类

> ID：15322325
> 
> 赞同：0
> 
> 时间：2013-03-10T12:40:58.243
> 
> 标签：java, inheritance, linked-list

我制作了一个通用链表

```
Container<String, Person> 
```

持有 Person 对象。我需要用分别称为 Owners 和 Mechanics 的两个子类的对象来填充这个列表。这部分目前一切正常（我正在创建所有者和机械师对象作为它们所属的相应子类，并使用我的插入函数将它们放入列表中），但是当我尝试使用以下方法提取所有者或机械师时：

```
Owner o = container.get("John"); 
```

我收到以下错误：

```
error: "incompatible types
        Owner o = container.get("John");                                  ^
         required: Eier
  found:    Person 
```

我该如何规避/解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:43:10.113

那是因为编译器不知道这`"John"`是一个`Owner`. 你可以投：

```
Owner o = (Owner)container.get("John"); 
```

或检查它是否是`Owner`转换前以避免可避免的异常，使用`instanceof`.

```
Person p = container.get("John");
if (p instanceof Owner){
    Owner o = (Owner) p;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T12:44:01.140

编译器是对的：它所知道的关于对象的所有信息就是它是一个`Person`，而不是一个`Owner`。如果您确定这`"John"`是一个`Owner`，请添加一个显式转换。

这可能不是解决问题的最优雅方式，因为如果`"John"`不是`Owner`. 当您需要“向下转换”到子类时，您应该评估将`Owner`s 和`Mechanic`s 放入同一个容器的决定：如果两个子类的容器是分开的，您的代码可能会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T12:44:38.083

你需要对它进行类型转换

```
Owner o = (Owner)container.get("John"); 
```

如果它的力学那么你需要做

```
Mechanics m = (Mechanics) container.get("John"); 
```

所以最好这样做

```
for(Person p : container)  
{  
  if (p instance of Owner)  
     Owner o = (Owner) p;  
  else  
     Mechanics m = (Mechanics) p;  
} 
```

# java - 如何在JAVA中的3个矩阵中分别显示由RGB值表示的图像

> ID：15322329
> 
> 赞同：1
> 
> 时间：2013-03-10T12:41:20.037
> 
> 标签：java, image, image-processing, rgb, grayscale

我有 3 个相同大小的 2D 矩阵（比如说 200 行和 300 列）。每个矩阵代表三种“基本”颜色（红色、绿色和蓝色）之一的值。矩阵的值可以在 0 到 255 之间。现在我想组合这些矩阵以将它们显示为彩色图像（200 x 300 像素）。我怎样才能在 JAVA 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:50:04.373

首先：您可以从此值创建**颜色，例如：**

**`Color c = new Color(red, green, blue, alpha);`**

注意：

1.  **红色**是Matrics1的值
2.  **绿色**是Matrics2的值
3.  **蓝色**是 Matrics3 的值

然后创建新图像：

`BufferedImage image = new BufferedImage(200/*Width*/, 300/*height*/, BufferedImage.TYPE_INT_ARGB);`

然后在图像上设置值像这样：

```
image.setRGB(x, y, c.getRGB()); 
```

这是此步骤的代码，请尝试：

```
public class Main {

    public static void main(String args[]) throws IOException {
        int red[][] = new int[200][300];
        int green[][] = new int[200][300];
        int blue[][] = new int[200][300];
        /////////////////set this matrices 

        BufferedImage image = new BufferedImage(200/*Width*/, 300/*height*/, BufferedImage.TYPE_INT_ARGB);

        for (int i = 0; i < 200; i++) {
            for (int j = 0; j < 300; j++) {
                Color c = new Color(red[i][j], green[i][j], blue[i][j]);
                image.setRGB(i, j, c.getRGB());
            }
        }
        ImageIO.write(image, "jpg", new File("/////////////image path.jpg"));
    }
} 
```

# game-engine - 如何制作像 Minecraft 这样的具有 3D 图形的动作游戏？

> ID：15322336
> 
> 赞同：-3
> 
> 时间：2013-03-10T12:42:14.263
> 
> 标签：game-engine

我想做一个动作游戏，玩家在迷宫中，在逃跑时他必须杀死其他玩家/怪物。该游戏将在 Windows 上可用。我不知道从哪里开始。我查看了 C++ 和 DirectX9，但对我来说有点难，Microsoft 不再支持 C# 的 XNA，GameMaker 8 Pro 似乎并不那么完整。也许读一本书会很好，希望你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:30:16.563

只是为了给你一个启动，我建议你看看 Visual C# 和 openTK，也许是 JitterPhysics

[http://www.opentk.com/](http://www.opentk.com/)

[http://jitter-physics.com/wordpress/](http://jitter-physics.com/wordpress/)

根据您的编程知识，这可能就是您需要开始的全部内容。此外，看看其他引擎如何解决问题总是一个好主意，例如下载免费版本的 unity 并查看他们制作的视图抽象。

# php - MySQLi 表存在

> ID：15322337
> 
> 赞同：2
> 
> 时间：2013-03-10T12:42:20.257
> 
> 标签：php, mysqli

在 PHP 中，查看表是否存在的最佳方法是什么？

这是我到目前为止使用的

```
public function TableExists($table) {
    $res = $this->Query("SELECT 1 FROM $table");

    if(isset($res->num_rows)) {
        return $res->num_rows > 0 ? true : false;
    } else return false;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-10T12:44:20.303

如果表不存在，您发布的内容将引发错误。试试这个：

```
SHOW TABLES LIKE 'tablename'; 
```

并确保您准确地返回一排。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-10T12:51:19.220

Colin 有正确的解决方案——使用`SHOW TABLES LIKE`. 这是使用您的代码的样子：

```
public function TableExists($table) {
  $res = $this->Query("SHOW TABLES LIKE $table");
  return mysql_num_rows($res) > 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T13:09:23.163

用于查看，如果`[table name]`存在

```
SELECT COUNT(*)
FROM information_schema.tables 
WHERE table_schema = '[database name]' 
AND table_name = '[table name]'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T13:11:37.273

其他答案的方法的替代`SHOW TABLES`方法是使用`INFORMATION_SCHEMA`这样的：

```
SELECT COUNT(*)
  FROM INFORMATION_SCHEMA.TABLES
 WHERE TABLE_SCHEMA = 'your_database_name' AND TABLE_NAME = 'tablename'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-27T09:17:45.690

```
$con = mysqli_connect($hostname,$username,$password,$database);

if(mysqli_num_rows(mysqli_query($con,"SHOW TABLES LIKE 'accman'"))) {
  echo "DB EXIST";
} else {
  echo "DB Not Exist";
} 
```

# macos - 尝试在 MAC OSX 上使用 DeployTool 编译 .m 文件

> ID：15322339
> 
> 赞同：1
> 
> 时间：2013-03-10T12:42:36.680
> 
> 标签：macos, matlab, compiler-construction

我看到有几个关于这个主题的讨论，但没有一个能帮助我解决我的问题。

我正在尝试编译我的 Matlab 项目。没有太大的成功。

我看到了这个视频，并且几乎遵循了它的指导：-> 我使用了“deploytool”。

当我尝试构建项目时，我得到了下图。这条线已经展示了很多：

```
2013-03-10 14:29:21.014 mcc[39814:4303] This process is attempting to exclude an item from Time Machine by path without administrator privileges. This is not supported. 
```

一些讨论表明我需要在某处写“sudu matlab”，但我不知道在哪里......

编译图：

> 蚂蚁：
> 
> mcc -o Untitled1 -W main:Untitled1 -T link:exe -d /Users/Nimrod/Documents/MATLAB/Temp/Untitled1/src -w enable:specified_file_mismatch -w enable:repeated_file -w enable:switch_ignored -w enable:missing_lib_sentinel -w enable:demo_license -v /Users/Nimrod/Documents/MATLAB/Temp/temp.m 2013-03-10 14:29:17.073 mcc[39814:4303] 此过程试图通过路径从 Time Machine 中排除项目没有管理员权限。这是不支持的。2013-03-10 14:29:17.075 mcc[39814:4303] 此进程试图在没有管理员权限的情况下通过路径从 Time Machine 中排除项目。这是不支持的。
> 
> 2013-03-10 14:29:41.167 mcc[39814:4303] 此过程试图通过没有管理员权限的路径从 Time Machine 中排除项目。这是不支持的。编译器版本：4.18 (R2012b) Processing /Applications/MATLAB_R2012b.app/toolbox/matlab/mcc.enc Processing /Applications/MATLAB_R2012b.app/toolbox/shared/spcuilib/mcc.enc Processing include files... 2 item(s)添加。处理使用 MCR 安装的目录... 文件 /Users/Nimrod/Documents/MATLAB/Temp/Untitled1/src/mccExcludedFiles.log 包含从 CTF 存档中排除的函数列表。添加了 0 项。为已编译的应用程序生成 MATLAB 路径... 创建了 39 个路径项。开始验证 MEX 文件：Sun Mar 10 14:30:16 2013 结束验证 MEX 文件：Sun Mar 10 14:30:16 2013 2013-03-10 14:30:16。783 mcc[39814:4303] 此进程试图通过没有管理员权限的路径从 Time Machine 中排除项目。这是不支持的。
> 
> 2013-03-10 14:30:39.015 mcc[39814:4303] 此进程试图在没有管理员权限的情况下通过路径从 Time Machine 中排除项目。这是不支持的。警告：将路径“/Users/Nimrod/Documents/MATLAB/Temp”添加到编译器路径实例。解析文件“/Users/Nimrod/Documents/MATLAB/Temp/temp.m”（引用自：“编译器命令行”）。解析文件“/Applications/MATLAB_R2012b.app/toolbox/compiler/deploy/deployprint.m”（引用自：“编译器命令行”）。解析文件“/Applications/MATLAB_R2012b.app/toolbox/compiler/deploy/printdlg.m”（引用自：“编译器命令行”）。删除 0 个临时 MEX 授权文件。生成文件“/Users/Nimrod/Documents/MATLAB/Temp/Untitled1/src/readme.

尝试运行应用程序文件时，出现以下崩溃：

> 进程：prelaunch [39864] 路径：/Users/USER/Documents/*/Untitled1.app/Contents/MacOS/prelaunch 标识符：Untitled1 版本：1 代码类型：X86-64（本机）父进程：launchd [134] 用户 ID : 501
> 
> 日期/时间：2013-03-10 14:37:28.848 +0200 操作系统版本：Mac OS X 10.8.2 (12C2034) 报告版本：10
> 
> 自上次报告以来的间隔：自上次报告以来的 9226 秒崩溃：自上次报告以来的 5 次每个应用程序崩溃：5 匿名 UUID：6DB02735-2968-B918-129B-82542E2D0F24
> 
> 崩溃的线程：0
> 
> 异常类型：EXC_BREAKPOINT (SIGTRAP) 异常代码：0x0000000000000002、0x0000000000000000
> 
> 应用程序特定信息：dyld：启动、加载依赖库
> 
> Dyld 错误消息：库未加载：@rpath/libmwcpp11compat.dylib 引用自：/Users/USER/Documents/*/Untitled1.app/Contents/MacOS/prelaunch 原因：找不到图像
> 
> 二进制图像：0x100000000 - 0x100000ff7 +Untitled1 (1) /Users/USER/Documents/*/Untitled1.app/Contents/MacOS/prelaunch 0x7fff6205c000 - 0x7fff6209093f dyld (210.2.3) <36CAA36E-72BC-3E48-77AD9-BDF usr/lib/dyld
> 
> 型号：MacBookPro9,1，BootROM MBP91.00D3.B08，4 个处理器，Intel Core i7，2.6 GHz，8 GB，SMC 2.1f173 显卡：Intel HD Graphics 4000，Intel HD Graphics 4000，内置，384 MB 显卡：NVIDIA GeForce GT 650M、NVIDIA GeForce GT 650M、PCIe、1024 MB 内存模块：BANK 0/DIMM0、4 GB、DDR3、1600 MHz、0x80AD、0x484D54333531533643465238432D50422020 内存模块：BANK 1/DIMM0、4 GB、DDR3、16008 0x484D54333531533643465238432D50422020 AirPort: spairport_wireless_card_type_airport_extreme (0x14E4, 0xF5), Broadcom BCM43xx 1.0 (5.106.98.100.14) 蓝牙: 版本 4.1.2f9 1, AirPort 1, en1 网络服务卡-18 : pci11c1,5901, sppci_ieee1394openhci, Thunderbolt@62,0,0 PCI 卡: Apple 57761-B0, sppci_ethernet, Thunderbolt@61,0,0 PCI 卡: pci12d8,400e, sppci_usbopenhost, Thunderbolt@60,0,0 PCI 卡：pci12d8,400e，sppci_usbopenhost，Thunderbolt@60,0,1 PCI 卡：pci12d8,400f，USB 增强型主机控制器，Thunderbolt@60,0,2 串行 ATA 设备： APPLE HDD HTS547575A9E384、750.16 GB 串行 ATA 设备：HL-DT-ST DVDRW GS31N USB 设备：hub_device、0x8087（英特尔公司）、0x0024、0x1a100000 / 2 USB 设备：FaceTime 高清摄像头（内置）、apple_vendor_id、0x85009、0x1a101 / 3 USB 设备: hub_device, 0x8087 (Intel Corporation), 0x0024, 0x1d100000 / 2 USB 设备: hub_device, 0x0424 (SMSC), 0x2513, 0x1d180000 / 3 USB 设备: BRCM20702 Hub, 0x0a5c (Broadcom Corp.), 0x4500, 0x1d8 / 6 USB 设备：蓝牙 USB 主机控制器，apple_vendor_id，0x821d，0x1d181300 / 7 USB 设备：Apple 内部键盘/触控板，apple_vendor_id，0x0253，0x1d183000 / 5 USB 设备：IR 接收器，apple_vendor_id，0x8242，0x1d182000 / 4 USB 设备：hub_device，apple_vendor_id，0x9127，0x40100000 / 2 USB 设备：键盘集线器，apple_vendor_id，0x1006，0x4013200000 / 6 设备：Apple 键盘, 0x40132000 / 7 USB 设备：显示音频，apple_vendor_id，0x1107，0x40140000 / 5 USB 设备：FaceTime 高清摄像头（显示器），apple_vendor_id，0x1112，0x40150000 / 4 USB 设备：Apple Thunderbolt 显示器，apple_vendor_id，0x9227,0x401700apple_vendor_id，0x1107，0x40140000 / 5 USB 设备：FaceTime 高清摄像头（显示器），apple_vendor_id，0x1112，0x40150000 / 4 USB 设备：Apple Thunderbolt 显示器，apple_vendor_id，0x9227，0x40170000 / 3apple_vendor_id，0x1107，0x40140000 / 5 USB 设备：FaceTime 高清摄像头（显示器），apple_vendor_id，0x1112，0x40150000 / 4 USB 设备：Apple Thunderbolt 显示器，apple_vendor_id，0x9227，0x40170000 / 3

# c# - MouseDown 和 Click 冲突

> ID：15322342
> 
> 赞同：13
> 
> 时间：2013-03-10T12:43:03.023
> 
> 标签：c#, winforms, mousedown

我在 form_MouseDown 事件上有一个 Drag() 方法。我在表单上也有一个点击事件。问题是，如果我点击表单，MouseDown 事件会被触发，它永远不会有机会触发点击事件。

解决此问题的最佳方法是什么？如果表单实际上被拖动，我正在考虑计算像素，但必须有更好的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-07T03:02:24.987

我找到了这个解决方案，虽然它是针对双击和鼠标按下事件：

```
void pictureBox_MouseDown(object sender, MouseEventArgs e)
{
if (e.Button == MouseButtons.Left && e.Clicks ==1)
{
PictureBox pb = (PictureBox)sender;
DoDragDrop((ImageData)pb.Tag, DragDropEffects.Copy);
}
} 
```

来源：[http ://code.rawlinson.us/2007/04/c-dragdrop-and-doubleclick.html](http://code.rawlinson.us/2007/04/c-dragdrop-and-doubleclick.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T12:57:56.333

> 如果表单实际上被拖动，我正在考虑计算像素，但必须有更好的方法。

不，这正是你必须这样做的方式。

这不仅仅是软件限制；它也非常实用。如果您从用户的角度考虑问题，您将立即看到问题以及解决方案。问问自己，点击和拖动有什么区别？

它们都以鼠标按钮在对象上向下移动开始，但其中一个以鼠标按钮在相同位置的对象上返回结束，而另一个以鼠标按钮在完全不同的位置返回结束.

由于时间机器尚未完善，因此您无法提前知道这一点。

所以是的，您需要保持某种距离阈值，如果指针在对象上方向下移动时超出该距离阈值，那么您认为它是一种阻力。否则，您认为这是一次点击。

该距离阈值不应为 0。不应要求用户*完全*保持鼠标不动以启动点击。很多用户都是低于标准的鼠标。尝试点击时，它们很可能会轻微抽搐。如果阈值为 0，则他们在尝试单击时最终会进行大量无意的拖动。

当然，您实际上不必担心任何这些或自己计算阻力阈值。相反，使用 Windows 默认值，可通过调用`GetSystemMetrics`函数并指定`SM_CXDRAG`或来获得`SM_CYDRAG`。（这些可能会在 WinForms 框架的某个地方公开，但我不这么认为。自己 P/Invoke 它们同样容易。）

```
const int SM_CXDRAG = 68;
const int SM_CYDRAG = 69;
[DllImport("user32.dll")]
static extern int GetSystemMetrics(int index);

Point GetDragThreshold()
{
    return new Point(GetSystemMetrics(SM_CXDRAG), GetSystemMetrics(SM_CYDRAG));
} 
```

在 UX/UI 领域，这类事情被称为*滞后*或*去抖动*，类似于在物理学和电子学中使用这些术语。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T12:51:30.603

不幸的是，在“按下按钮”时，您还不知道所需的操作是单击还是拖放。**你稍后**会发现它。

对于点击，决定因素是“没有移动”和“按钮向上”。

对于拖动，决定因素是“运动”和“按钮向上”。

因此，要消除这些交互的歧义，您不仅要跟踪按钮，还要跟踪移动。您不需要跟踪整体运动，只有 button-down 和 button-up 之间的运动是有趣的。

因此，这些事件是启动/停止 Mouse.Capture 机制（动态呈现**拖动装饰器**和**放置位置提示**）的好地方，或者以更简单的形式 - 存储移动矢量的原点和目标并检查距离是否 > D（即使发生了移动，也应该有一些安全的最小距离，在该距离内取消 DRAG。鼠标有时是“锯齿状的”，人们真的不喜欢你的应用程序在结束时双击开始拖动快速鼠标指针移动:) )

# python - 调用 is_instance() 似乎没有实例化类

> ID：15322348
> 
> 赞同：0
> 
> 时间：2013-03-10T12:43:38.300
> 
> 标签：python, django, mongoengine

我在开发类似于 Django [_get_queryset(klass)](https://github.com/django/django/blob/master/django/shortcuts/__init__.py#L80)方法的东西时遇到问题。当提供 QuerySet 或 mongoengine 文档时，我正在尝试提取 QuerySet。我试过以下逻辑：

```
from mongoengine.base import BaseDocument
from mongoengine.queryset import QuerySet

def _get_queryset(klass):
    if isinstance(klass, QuerySet):
        return klass
    if isinstance(klass, BaseDocument):
        return klass.objects
    else:
        raise ValueError 
```

对于给定的文档，例如：

```
class Monkey(mongoengine.Document):
    name = mongoengine.StringField(unique=True) 
```

如果我将以下内容传递给python[`is_instance()`](http://docs.python.org/2/library/functions.html#isinstance)

```
>>> isinstance(db.Monkey.objects, QuerySet)
True 
```

但是（似乎）令人惊讶的是，

```
>>> isinstance(Monkey, BaseDocument)
False

>>> isinstance(Monkey(), BaseDocument)
True 
```

`isinstance()`呈现类时不实例化它吗？在 Django 中，一个大致等效的调用起作用：

```
>>> isinstance(Monkey, ModelBase)
True 
```

为什么`Monkey`在 Django 中在这里实例化，但在上面的 mongoengine 版本中却没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:50:57.453

在 python 中，类是对象。特别是它们是以下实例`type`：

```
>>> class MyClass(object): pass
... 
>>> isinstance(MyClass, type)
True 
```

此外，由于`object`是最基本的类型，它们也是以下实例`object`：

```
>>> isinstance(MyClass, object)
True 
```

所以，你得到的结果是正确的。类的实例与类本身不同。如果要检查一个类是否是子类，有`issubclass`函数：

```
>>> issubclass(MyClass, object)
True 
```

在 Django 中工作的事实`isinstance(Monkey, ModelBase)`是因为在 django`ModelBase`中不是一个类而是一个元类：

```
# from django source-code
class ModelBase(type):
    """
    Metaclass for all models.
    """ 
```

这意味着模型类是其元类的实例（在这种情况下`ModelBase`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:01:21.480

在 Python 中，类本身就是对象。默认情况下，类是类型的`type`（即它是`type`类的实例），但可以使用*元类*覆盖该默认值。使用元类将导致该类成为元类的实例（应该扩展`type`）。

这意味着如果您`Monkey`使用 metaclass定义一个类`ModelBase`，那么 Python 将创建一个`ModelBase`名为 的对象`Monkey`。该`Monkey`对象是一个类，因此您可以实例化类型为 的对象`Monkey`。

# html - 在 HTML5 中从 Web 浏览器捕获视频

> ID：15322352
> 
> 赞同：1
> 
> 时间：2013-03-10T12:44:04.060
> 
> 标签：html

我正在尝试按照本指南以 HTML5 从网络摄像头捕获视频

[http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

我已复制并粘贴以下代码，但 Chrome 未请求使用我的相机的权限

```
<video autoplay></video>

<script>
  var onFailSoHard = function(e) {
    console.log('Reeeejected!', e);
  };

  // Not showing vendor prefixes.
  navigator.getUserMedia({video: true, audio: true}, function(localMediaStream) {
    var video = document.querySelector('video');
    video.src = window.URL.createObjectURL(localMediaStream);

    // Note: onloadedmetadata doesn't fire in Chrome when using it with getUserMedia.
    // See crbug.com/110938.
    video.onloadedmetadata = function(e) {
      // Ready to go. Do some stuff.
    };
  }, onFailSoHard);
</script> 
```

而当我在指南中单击“捕获视频”时，它可以工作，我的网络摄像头显示......

另一个网站有类似的代码，但又一次它不适合我

[http://dev.opera.com/articles/view/playing-with-html5-video-and-getusermedia-support/](http://dev.opera.com/articles/view/playing-with-html5-video-and-getusermedia-support/)

```
<!-- HTML code -->
<video id="sourcevid" autoplay>Put your fallback message here.</video>

/* JavaScript code */
window.addEventListener('DOMContentLoaded', function() {
    // Assign the <video> element to a variable
    var video = document.getElementById('sourcevid');

    // Replace the source of the video element with the stream from the camera
    if (navigator.getUserMedia) {
        navigator.getUserMedia('video', successCallback, errorCallback);
        // Below is the latest syntax. Using the old syntax for the time being for backwards compatibility.
        // navigator.getUserMedia({video: true}, successCallback, errorCallback);
        function successCallback(stream) {
            video.src = stream;
        }
        function errorCallback(error) {
            console.error('An error occurred: [CODE ' + error.code + ']');
            return;
        }
    } else {
        console.log('Native web camera streaming (getUserMedia) is not supported in this browser.');
        return;
    }
}, false); 
```

我想知道我是否遗漏了什么或有什么改变，因为到目前为止没有一个示例代码对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:12:10.360

发现发生了什么。对于任何想知道的人，在 Chrome 上，如果从服务器运行，您只能访问网络摄像头。它不仅仅适用于文件。

# javascript - 如何在nodejs中对“私有”实用程序函数进行单元测试

> ID：15322354
> 
> 赞同：17
> 
> 时间：2013-03-10T12:44:20.303
> 
> 标签：javascript, node.js, unit-testing, commonjs

我目前正在为 nodejs 应用程序编写一些测试。假设我有一个这样的模块：

```
module.exports = function myModule(moduleParam) {
    var someVar;
    ....
    ....
    function helper(param) {
        return param + someVar;
    }
    return {
        doSomething: function (bar) {
            ....
            ....
            var foo = helper(bar);
            ....
            ....
        }
    };
}; 
```

假设“helper”函数只在模块内部有用，不应该暴露在外面。

测试它的“最佳实践”是什么？（当然，我可以将 doSomething 函数作为一个整体进行测试，但是这样，“helper”函数会在特定情况下以“黑盒”方式进行测试）。

对于那个仪表，我使用 nodeunit 作为测试框架，但我可以根据需要更改它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-10T17:50:33.700

你不测试它。单元测试是黑盒测试。这意味着您唯一测试的是公共接口，即合约。

诸如此类的私有功能只能通过重构公共功能来实现。

因此，如果您因此使用 TDD，您的私有函数将被隐式测试。

如果这感觉不对，那通常是因为您的结构错误。然后你应该考虑将你的私有内容移到一个额外的模块中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-13T14:26:45.237

因为我发现测试是单元测试和 TDD 之外的有用工具（[这个 SO 答案](https://stackoverflow.com/questions/105007/should-i-test-private-methods-or-only-public-ones/105209#105209)是一个很好的论据），所以我制作了一个 npm 包来帮助你解决类似的情况：[require-from](https://www.npmjs.org/package/require-from)。

在您的示例中，这就是您将如何使用它：

*模块文件.js*：

```
function helper(param) {
    return param + someVar;
}

module.exports = function myModule(moduleParam) {
    var someVar;
    ....
    ....
    return {
        doSomething: function (bar) {
            ....
            ....
            var foo = helper(bar);
            ....
            ....
        }
    };
};
module.helperExports = helper; 
```

*导入-file.js*：

```
var requireFrom = require('require-from');
var helper = requireFrom('helperExports', './module-file'));
var public = requireFrom('exports', './module-file')); // same as require('./module-file') 
```

# javascript - 使用什么技术手动使文本具有闪烁效果

> ID：15322355
> 
> 赞同：0
> 
> 时间：2013-03-10T12:44:21.437
> 
> 标签：javascript, jquery, css, algorithm, timer

我知道我可以使用它来更改文本的颜色

```
$(#text).css('color', 'red'); 
```

我的 javscript 应该如何以大约 200 毫秒的间隔让它闪烁为红色和黑色？

如果我能做这样的事情就好了

```
 function loop() {
        setTimeout(function () {
            ChangeTextToRed();

            <pause for 300ms here>

            ChangeTextToBlack();
            loop();
        }, 300);
    } 
```

但我知道javascript中没有thread.sleep

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:16:29.820

使用 setInterval 和 jquery 的 toggleClass() 方法，您可以非常轻松地完成此操作。

```
setInterval(function() {
    $('#text').toggleClass("blink");
}, 300); 
```

您只需添加/删除具有其他颜色的类。查看 jsfiddle 上的工作示例：http: [//jsfiddle.net/UFfRc/](http://jsfiddle.net/UFfRc/)

编辑：只是想提供更多信息。这种方法（使用类）的好处是您可以在不编辑 javascript 的情况下对其进行自定义。您可以添加过渡、移动等。此外，这将在不支持 css3 过渡的浏览器上正常降级。他们只会看到没有转换的状态变化。这是一个例子。[http://jsfiddle.net/rRXGc/](http://jsfiddle.net/rRXGc/)

说了这么多，负责。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:48:48.970

您可以尝试使用以下[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)方法：

```
setTimeout(function () {
    // do something here
}, 300); 
```

这允许您定期执行一些代码（本例中为 300 毫秒）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T12:48:51.730

只需使用`setInterval`并在两个类之间切换。

```
setInterval(function() {
    var newClass = '.'+ $('#text').hasClass('black') ? 'red' : 'black';

    $('#text').attr('class', newClass);
}, 300); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T12:49:45.607

您已经使用过[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)，您将不得不这样做两次：

```
function loop() {
    setTimeout(function () { // pause for 300ms before executing this:
        ChangeTextToRed();
        setTimeout(function () { // pause for 300ms before executing this:
            ChangeTextToBlack();
            loop();
        }, 300);
    }, 300);
} 
```

或更短：

```
function loop() {
    ChangeTextToRed();
    setTimeout(function () {
        ChangeTextToBlack();
        setTimeout(loop, 300);
    }, 300);
} 
```

当然，你也可以使用[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)和维护一个布尔标志来进行更改，但上面的内容很简单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-10T13:16:26.187

我知道这不是一个很大的支持 CSS 功能，但你可以使用动画

```
#text{
   animation:blackred 400ms linear infinite; -webkit-animation:blackred 400ms linear infinite; -moz-animation:blackred 400ms linear infinite; -o-animation:blackred 400ms linear infinite;
}

@keyframes blackred{
0%{color:red;}
50%{color:black;}
100%{color:red;}
}

@-webkit-keyframes blackred{
0%{color:red;}
50%{color:black;}
100%{color:red;}
}

@-moz-keyframes blackred{
0%{color:red;}
50%{color:black;}
100%{color:red;}
}

@-o-keyframes blackred{
0%{color:red;}
50%{color:black;}
100%{color:red;}
} 
```

# regex - unix 正则表达式中的星号（*）和点星号（.*）

> ID：15322362
> 
> 赞同：7
> 
> 时间：2013-03-10T12:45:12.340
> 
> 标签：regex, unix

我总是发现自己对 UNIX 中这两个通配符的用法感到困惑。我知道星号只能用作正则表达式中的量词，但 UNIX`*`在某些情况下允许像`ls`命令一样，而在`grep`它应该只用作量词。是否有一些排除可以指导我使用其中的哪一个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T12:53:39.330

您正在谈论 UNIX 中的两种不同的模式，即*glob*（通配符）和*正则表达式*。

匹配文件名时通常使用 Glob。您的 shell 会自动对命令参数进行通配符扩展，您可以这样编写

```
ls *foo* 
```

列出所有包含字符串的文件`foo`。Glob 非常简单（忽略`extglob`）：语法通常只支持`*`（任何字符）和`?`（任何一个字符）。由于 shell 的自动扩展，这些可以在任何地方使用，并且必须明确禁止以避免不必要的匹配（例如，编写`grep '.*foo.*'`以避免扩展`*`模式中的 ）。

另一方面，我们有正则表达式，用于对文本进行模式匹配。通常，它们与特定的实用程序一起使用，例如`grep`,`sed`并且`perl`理解这些模式，尽管一些 shell 具有采用正则表达式的上下文（例如 Bash's `${x/pat/sub}`）。正则表达式语法更强大，这使得它非常适合在大量文本中查找特定模式。

# php - 如果最后一个字符是“/”，则将其删除

> ID：15322370
> 
> 赞同：2
> 
> 时间：2013-03-10T12:45:57.837
> 
> 标签：php, url, dom, substr

我正在从头开始制作一个搜索引擎（大声笑），我坚持这个问题：

当用户提交 URL 时，我的“蜘蛛”会“抓取”它以获取其他链接。有些人当然使用`<a href="/page">`而不是`<a href="http://long-domain.com/page">`，所以我用 `if(substr($link->getAttribute('href'), 0, 1) == '/')`

并在其前面添加一个域。但是，每当我添加一个域时，一些链接就会变成`http://php.net//abcd`. 如您所见，它的`//`.

现在，我的想法是让我的脚本编辑提交的 URL，所以如果它最后有一个斜杠，它将被删除，但我不知道如何删除它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-10T12:48:17.877

您可以使用[rtrim](http://php.net/manual/en/function.rtrim.php)

```
$url = rtrim($url, '/'); 
```

它将删除`/`字符串末尾的所有内容，如果没有则保持不变

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:58:31.863

只需在最终网址上进行字符串替换

```
<?php $final_url=str_replace("//","/",$your_link_to_be_crawled); ?> 
```

这很简单。

在它影响 http:// 后把 // 放回去，

让我们做`preg_replace`

```
<?php
$your_url_to_crawl;
$patterns = array(); $patterns[0] = '/http:/';$patterns[1] = '/https:/'; $patterns[2] = '/any_other_protocol/';
$replacements = array(); $replacements[2] = 'http://'; $replacements[1] = 'https://';$replacements[0] = 'any_other_protocol';
echo preg_replace($patterns, $replacements, $your_url_to_crawl); 
```

?>

# php - PHP等待来自命令行的输入

> ID：15322371
> 
> 赞同：86
> 
> 时间：2013-03-10T12:46:00.453
> 
> 标签：php, command-line

我希望能够让 PHP 程序等待用户的输入。例如：

1.  脚本向服务器请求授权码（此码将通过电子邮件发送）
2.  脚本等待用户输入授权码
3.  脚本继续

我该怎么做第2步？（是否可以？）

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2013-03-10T12:54:20.577

cli 的 php 手册页在[此处有一条评论，](http://www.php.net/manual/en/features.commandline.php#94924)详细说明了解决方案，（复制此处以供其他人查看）

```
<?php
echo "Are you sure you want to do this?  Type 'yes' to continue: ";
$handle = fopen ("php://stdin","r");
$line = fgets($handle);
if(trim($line) != 'yes'){
    echo "ABORTING!\n";
    exit;
}
fclose($handle);
echo "\n"; 
echo "Thank you, continuing...\n";
?> 
```

# git - Git 子模块的问题

> ID：15322375
> 
> 赞同：1
> 
> 时间：2013-03-10T12:46:22.373
> 
> 标签：git, git-submodules

我正在尝试将文件添加到以前以某种方式添加为子模块的 git 存储库。我不知道那是怎么发生的。

我在任何地方都找不到`.gitmodules`文件，我的`.git/config`样子是这样的：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[remote "origin"]
    url = git@github.com:frankV/dotfiles.git
    fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

我需要包含 vim vundle 的目录，但由于上述问题，我不能。到目前为止，我无法从这个 repo 中删除它或在 vundle 目录下添加任何文件。

当我尝试添加文件时，我得到：`fatal: Path '_vim/bundle/vundle/autoload/vundle' is in submodule '_vim/bundle/vundle'`

和我的 git 状态输出：

```
...
#   modified:   _vim/bundle/Command-T (untracked content)
#   modified:   _vim/bundle/The-NERD-Commenter (untracked content)
#   modified:   _vim/bundle/The-NERD-tree (untracked content)
#   modified:   _vim/bundle/matchit.zip (untracked content)
... 
```

如您所见，vundle 不在此列表中，并且可以在通过 vundle 安装时不跟踪这些子模块......但是让 vundle 工作的更多理由！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:38:29.963

你有一个嵌套的存储库，用 找到它`find . -name .git`，如果你真的想导入无历史源代码，你可以使用`git rm`它的包含目录并删除 .git 目录本身。为了不丢失当前历史，您可以从中获取并子树合并分支，但是以最小的努力保留结构和历史的最佳点就是保持回购结构不变。

Git calls nested repositories submodules, and does have a command to help you manage the gruntwork --- for instance, submodules' primary repos are often hosted by third parties (yours at `git://github.com/gmarik/vundle.git` for instance), so the submodule command sets up some infrastructure to help advertise where any of your repo's clients can find the submodules' primaries --- but everything the submodule command does is assistance with mundane tasks like that. No other git command has any clue whether a repo is being used as a submodule or not, because it doesn't have to care.

所以看起来你正在做的是试图使用别人正在进行的项目的结果作为你自己项目中的构建块，而 git 的方法就是以最直接的方式简单地做到这一点：克隆他们的项目并将其用作您自己的一部分。 [我写的另一个答案](https://stackoverflow.com/a/15032668/1290731)可能是 TMI，它是关于将项目拆分为子模块，但它是对这个概念的简单和直接的另一种看法。

# c++ - 有符号短和普通短有什么区别

> ID：15322376
> 
> 赞同：2
> 
> 时间：2013-03-10T12:46:23.703
> 
> 标签：c++, signed, short

c ++中的有符号和普通短有什么区别？范围不一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:47:14.350

`short`是`signed`默认的，所以没有区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T12:50:20.207

名称`signed short int`、和是同义词`signed short`，在 C++ 中表示相同的类型。`short int``short`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:11:40.697

默认情况下，整数在 C++ 中是有符号的，IMO 对`signed`关键字的存在提出了质疑。从技术上讲，它是多余的，也许它确实有助于一些清晰，但几乎没有人在生产中使用它。每个人都非常清楚整数默认是有符号的。老实说，我不记得上次`signed`在生产代码中看到是什么时候了。

至于浮点数和双精度数 - 它们根本不能无符号，它们总是有符号的。

在这方面，C++ 语法有点多余，至少 IMO 是这样。有许多不同的方式来表达同样的事情，例如`signed short int`,和`signed short`，你所说的仍然可能是平台甚至编译器相关的。`short int``short`

例如，像 Qt 这样的框架声明了它们自己的约定，这些约定更短且信息丰富，例如：

quint8、quint16、quint32、quint64 都是无符号整数，数字表示以位为单位的大小，逻辑相同：

qint8、qint16、qint32、qint64 是有符号整数，具有各自的位宽。

`uint`至少对我来说，比`unsigned`or更可取`unsigned int`，在同样的逻辑中，您也有`ushort`比. 更可取的逻辑`unsigned short int`。还有就是`uchar`要完成短硬一族。

# algorithm - 将 n 个数字插入二叉搜索树的复杂性

> ID：15322386
> 
> 赞同：7
> 
> 时间：2013-03-10T12:47:34.507
> 
> 标签：algorithm, tree, complexity-theory, binary-search-tree, asymptotic-complexity

我有一个问题，它说“计算将 n 个数字插入二叉搜索树的过程的时间复杂度”。它并不表示这是否是平衡树。那么，这样的问题能给出什么答案呢？如果这是一棵平衡树，则高度为 logn，插入 n 个数字需要 O(nlogn) 时间。但这是不平衡的，在最坏的情况下甚至可能需要 O(n ^(2 ) 时间。)找到将 n 个数字插入 bst 的时间复杂度是什么意思？我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T12:53:17.890

**即使树是平衡的，它也可能是 O(n^2)。**

假设您要添加一个排序的数字列表，所有数字都大于树中的最大数字。在这种情况下，所有数字都将添加到树中最右边叶子的右孩子，因此 O(n^2)。

例如，假设您将数字 [15..115] 添加到以下树中：

![在此处输入图像描述](../Images/6f2d8025a80409d026f97f7dd61cf56f.png)

这些数字将被添加为一条长链，每个节点都有一个右手子节点。对于列表的第 i 个元素，您必须遍历 ~i 个节点，这会产生 O(n^2)。

一般来说，如果您想将插入和检索保持在 O(nlogn)，则需要使用[自平衡树](http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-04T08:55:49.413

维基说的是正确的。由于给定的树是一棵 BST，所以不需要搜索整个树，只需将要插入的元素与树/子树的根进行比较，就可以获得第一个元素的适当节点。这需要 O(log2n)。一旦我们有了这样一个节点，我们就可以在其中插入密钥，然后需要将正确的 aub-tree 中的所有元素向右推，这样 BST 的搜索属性就不会受到侵犯。如果要插入的位置是最后一个，我们需要担心第二个过程。如果注意此过程可能需要 O(n)，最坏的情况！因此，在 BST 中插入元素的总体最坏情况复杂度为 O(n)。谢谢！

# jquery - 如果光标在打开的元素内，则保持元素打开

> ID：15322388
> 
> 赞同：0
> 
> 时间：2013-03-10T12:47:50.780
> 
> 标签：jquery

如果光标移动到元素，我试图保持切换元素可见。

我的代码现在是：

```
<div class="infobox">
    <i class="icon-info-sign"></i>
    <div class="infobox_content" style="display: none;">
        Content
    </div>
</div> 
```

有了这个 JavaScript/jQuery

```
$("div.infobox i.icon-info-sign").hover(
    function () {
        $(this).parent().find(".infobox_content").stop(true).show("slow");
    },
    function (e) {
        $(this).parent().find(".infobox_content").stop(true).hide("slow");
    }
); 
```

如何检测光标是否已移动到`.infobox_content`? 如果是这样，我需要让元素保持打开状态，并且只在它的外面隐藏它一次`.infobox_content`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:13:02.560

将悬停更改为其中`infobox`的图标而不是其中的图标应该可以简化 UI。

```
$("div.infobox").hover(
    function () {
        $(this).find(".infobox_content").stop(true).show("slow");
    },
    function (e) {
        $(this).find(".infobox_content").stop(true).hide("slow");
    }
); 
```

如果您有`infobox`比显示更多的元素，并且由于其他元素而无法正常工作，请将图标和内容包装在另一个 div 中，以便它们共享一个共同的父级并将悬停绑定到该共同的父级

# javascript - 如何使用 imacros 之类的 firefox 插件脚本移动光标并单击项目

> ID：15322390
> 
> 赞同：0
> 
> 时间：2013-03-10T12:47:57.240
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk, imacros

我相信没有办法使用简单的 javascript 来移动鼠标并单击 item/url。我已经对此进行了很多搜索，并且我发现的大多数答案，出于安全原因，这是不可能的。

但是使用firefox插件脚本怎么样？我确实相信这是可能的，因为 imacros 可以做到这一点，甚至可以更好地记录和回放它。

但我可以找到他们是如何做到的，谁能给我一些线索如何使用插件脚本移动鼠标光标？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:57:22.487

[做到这一点的最好方法是使用Selenium IDE](http://docs.seleniumhq.org/projects/ide/)来确保一切都正确定位。Selenium 提供了一个非常强大的浏览器自动化工具包，并且 IDE 版本相当容易使用，尽管它可能需要一些调整。您可以在 Selenium IDE 下[下载](http://docs.seleniumhq.org/download/)Firefox 插件。

# django - Django 'image' 属性没有与之关联的文件

> ID：15322391
> 
> 赞同：75
> 
> 时间：2013-03-10T12:47:57.677
> 
> 标签：django

当用户注册我的应用程序时。当他到达个人资料页面时，我收到此错误。

```
The 'image' attribute has no file associated with it.
Exception Type: ValueError 
Error during template rendering
In template C:\o\mysite\pet\templates\profile.html, error at line 6
1 <h4>My Profile</h4>
2  
3 {% if person  %}
4 <ul>           
5   <li>Name: {{ person.name }}</li>
6   <br><img src="{{ person.image.url }}">
Traceback Switch back to interactive view
File "C:\o\mysite\pet\views.py" in Profile
 71\.     return render(request,'profile.html',{'board':board ,'person':person}) 
```

我认为发生此错误是因为我的模板需要图像并且看到他刚刚注册他无法添加图像，除非他转到编辑页面并添加一个页面然后他可以访问个人资料页面。

我的个人资料.html

```
<h4>My Profile</h4>

{% if person  %}
<ul>           
    <li>Name: {{ person.name }}</li>
    <br><img src="{{ person.image.url }}">

</ul>
{% endif %} 
```

views.py 中的我的个人资料功能

```
def Profile(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:LoginRequest'))
    board = Board.objects.filter(user=request.user)
    person = Person.objects.get(user=request.user)
    return render(request,'profile.html',{'board':board ,'person':person}) 
```

*我通过创建一个 Person 对象的 2 个实例并在我的模板中用 if 分隔它们来尝试此解决方案，但它没有成功。*

```
<h4>My Profile</h4>

{% if person  %}
<ul>           
    <li>Name: {{ person.name }}</li>
 </ul>
{% endif %}
{% if bob %}
<ul>           
<br><img src="{{ bob.image.url }}">
</ul> 
```

*我对 Profile 函数的解决方案*

```
def Profile(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:LoginRequest'))
    board = Board.objects.filter(user=request.user)
    person = Person.objects.get(user=request.user)
    bob = Person.objects.get(user=request.user)

    return render(request,'profile.html',{'board':board ,'person':person,'bob':bob}) 
```

我一直在阅读内置模板标签和过滤器的文档我认为这里的解决方案是使用 (和) 模板标签，但我似乎无法正确使用它。

如何配置此模板以使图片成为选项。如果他们没有照片，请留下它，但显示人名。

感谢你们对我的帮助

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-03-10T12:54:27.510

`bob`并且`person`是同一个对象，

```
person = Person.objects.get(user=request.user)
bob = Person.objects.get(user=request.user) 
```

所以你可以只用一个人。

在您的模板中，`image`首先检查是否存在，

```
{% if person.image %}
    <img src="{{ person.image.url }}">
{% endif %} 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2013-05-20T07:26:59.097

不违反 DRY 的更好方法是向模型类添加一个辅助方法，例如：

```
@property
def image_url(self):
    if self.image and hasattr(self.image, 'url'):
        return self.image.url 
```

并使用 default_if_none 模板过滤器提供默认网址：

```
<img src="{{ object.image_url|default_if_none:'#' }}" /> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-11-09T01:54:50.340

我亲爱的朋友，其他解决方案很好但还不够，因为如果用户没有头像，您应该轻松显示默认图像（不需要迁移）。因此，您可以按照以下步骤操作：

将此方法添加到您的人员模型中：

```
@property
def get_photo_url(self):
    if self.photo and hasattr(self.photo, 'url'):
        return self.photo.url
    else:
        return "/static/images/user.jpg" 
```

您可以使用任何路径（/media、/static 等），但不要忘记将默认用户照片作为 user.jpg 放入您的路径。

并在模板中更改您的代码，如下所示：

```
<img src="{{ profile.get_photo_url }}" class="img-responsive thumbnail " alt="img"> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-06-12T13:56:00.343

不完全是 OP 所寻找的，但另一种可能的解决方案是为 ImageField 设置默认值：

```
 class Profile(models.Model):
    # rest of the fields here
    image = models.ImageField(
        upload_to='profile_pics/',
        default='profile_pics/default.jpg') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-28T08:01:51.207

您还可以使用 Python 3 内置函数[**getattr**](https://docs.python.org/3/library/functions.html#getattr)创建新属性：

```
@property
def image_url(self):
    """
    Return self.photo.url if self.photo is not None, 
    'url' exist and has a value, else, return None.
    """
    if self.image:
        return getattr(self.photo, 'url', None)
    return None 
```

并在您的模板中使用此属性：

```
<img src="{{ my_obj.image_url|default_if_none:'#' }}" /> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-09-22T11:44:40.723

我认为您在模型字段中的问题，请尝试输入默认图像值，如下所示：

```
PRF_image = models.ImageField(upload_to='profile_img', blank=True, null=True , default='profile_img/925667.jpg') 
```

或者您可以在类模型中添加一个方法，如下所示，如果存在则返回 PRF_image，如果不存在则返回空字符串：

```
@property
def my_PRF_image(self):

    if self.PRF_image :
        return self.PRF_image.url
    return '' 
```

在您的模板中，您可以使用：

```
{{ your_object.my_PRF_image }} 
```

我希望这有帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-18T09:19:26.247

也许这有帮助，但我的数据库没有保存页面上显示的对象的图片。

由于models.py中的那个对象有blank=False，而且我正在循环遍历对象，它不断地给出一个错误，直到我在管理员中添加一张替换图片供数据库渲染。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-18T10:34:53.807

当任何一个或多个项目没有添加图像而其余项目添加时，也会出现此错误。要解决这个问题：

```
class Product(models.Model):
    pname = models.CharField(max_length=30)
    price = models.IntegerField()
    img = models.ImageField(null = True,blank = True)
    def __str__(self):
        return self.pname
    @property
    def imageURL(self):
        try:
            url = self.img.url
        except:
            url=''
        return url 
```

# c# - c# 在基构造函数中获取派生类的字段（属性）值

> ID：15322399
> 
> 赞同：-8
> 
> 时间：2013-03-10T12:48:23.143
> 
> 标签：c#, constructor, base, derived-class

我有 2 节课：

```
public class Class1
{
   private string Name1;
   public Class1()
   {
      //How to get Name2 of the derived class?
   }  
}

public class Class2 : Class1
{
   private string Name2 = "asd"; 
   public Class2(){}
} 
```

如何`Name2`在基构造函数中获取派生类？

```
public class Class1
{
   private string Name1;
   public Class1()
   {
       class2 xxx = this as class2      
       if (class2 != null) 
          this.Name1 = xxx.Name2;
   }  
} 
```

“this as class2” - 不为空

这个例子是正确的。唯一的事情是我不知道派生类是 Class2 或 class3 还是 class4 .... 我需要通用代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:50:51.067

你不能（更重要的是，你不应该）那样做。当您在基类的构造函数中时，子类部分尚未初始化，因此无法获取子类的成员：很简单，它们还不存在。

另一个问题是`Name2`属性可能根本不存在于子类中，即使在定义级别：我可以从 派生`Class3`，`Class1`并赋予它`Name3`属性而不是`Name2`。

所有这些都没有涉及诸如破坏封装之类的“微不足道”的事情：`Name2`是一个私有成员，可能会在`Class2`.

子类在构造函数中与超类进行通信的唯一方法是传递参数。这会起作用：

```
public class Class1 {
    private string Name1;
    public Class1(string subclassName2)
    {
        // Subclass has passed its Name2 here
    }  
}

public class Class2: class1 {
    private string Name2; 
    public Class2(string myName) : base(myName) {
        Name2 = myName;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:13:27.247

您可以从基类代码访问派生类中的代码，但只能从实际上是派生类对象的对象内访问，并且仅当涉及的方法是虚拟方法时。

如果您有一个对象本身就是基类的实例，那么从该实例中您将看不到来自基类的派生类代码。

例子

```
public class Baseclass{

  public void Foo()
  {
      Bar();
  }
  public virtual void Bar()
  {
     print("I'm a BaseClass");}}

public classs Derived: BaseClass{

  public override void Bar()
  {
     print("I'm a Derived Class");}}

Main()

   var b = new BaseClass();
   x.Foo()  // prints "I'm a BaseClass" 
   // This Foo() calls Bar() in base class  
    var d = new Derived();
   d.Foo()  // prints "I'm a Derived Class" 
   // in above, the code for Foo() (in BaseClass)
   //  is accessing Bar() in derived class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:49:43.913

我认为你不能，因为当你实例化派生类时，首先调用基类构造函数来初始化基类，然后初始化派生类。在基类构造函数中，无法访问派生类成员，因为它们在那时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T14:11:50.893

目前还不清楚您要达到的目标。可以执行以下操作，但我认为这不是一个好习惯：

```
 interface IHasName2
    {
        string Name2 { get; }
    }
    class Class1
    {
        string Name1;

        public Class1()
        {
            var withName2 = this as IHasName2;
            if (withName2 != null)
            {
                Name1 = withName2.Name2;
            }
        }
    } 
```

然后派生的类`Class1`可以根据需要实现`IHasName2`。

但也许你想要一个`abstract`类来确保派生类指定一个`Name2`. 它可能是这样的：

```
 abstract class Class1
    {
        string Name1;

        // instance property required to be implemented by deriving classes
        protected abstract string Name2 { get; }

        // instance constructor
        protected Class1()
        {
            // 'Name2' can be read already here (dangerous?)
            Name1 = Name2;
        }
    } 
```

最后，考虑 dasblinkenlight 提出的简单解决方案，让实例构造函数`Class1`接受`string`名称参数。然后，派生类在“链接”其基类构造函数时必须提供该名称参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T12:57:37.237

## 你做不到。它严格违反了面向对象方法编程的基本规则。

因为每个实例都`Class2`将具有该`Name2`属性。但是对于对象的实例，不能保证相同`Class1`。

# r - 如何为graphNEL 图的节点着色？

> ID：15322400
> 
> 赞同：6
> 
> 时间：2013-03-10T12:48:27.030
> 
> 标签：r, graphviz, graph-visualization

我正在使用`graphNEL`来自`gRbase`和`Rgraphviz`用于绘图的对象，并且希望在绘图时以不同的（指定的）颜色为图形的节点着色。例如，我如何用蓝色和`a`红色绘制这个图表？`b``c``d`

```
library(Rgraphviz)
library(gRbase)
mygraph = dag(~a:c + b:c + b:d)
plot(mygraph) 
```

![在此处输入图像描述](../Images/53b75a006cefd9791222ba73325b5943.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T13:24:13.917

这应该有效；

```
nAttrs<-list()
nAttrs$color <- c(a = "blue", b = "blue", c = "red", d = "red")
plot(g1, nodeAttrs = nAttrs) 
```

另请参阅`getDefaultAttrs()`以获取具有默认值的所有图形属性。

# php - 如何正确使用 php 过滤器进行验证？

> ID：15322401
> 
> 赞同：1
> 
> 时间：2013-03-10T12:48:27.770
> 
> 标签：php

我最近发现了用于卫生和验证的 PHP 过滤器功能。

我一直想知道我是否正确使用它们并且很难找到关于它们的很多信息，尤其是标志。

例如，我有一个针对电子邮件地址的清理功能。

```
function sanitize_email($var){
$var = trim($var);
$var = filter_var($var,FILTER_UNSAFE_RAW);
$var = filter_var($var,FILTER_SANITIZE_EMAIL);
$var = filter_var($var,FILTER_VALIDATE_EMAIL);
return $var;
} 
```

我的问题如下？

我应该使用过滤器的组合吗？还是 FILTER_VALIDATE_EMAIL 足以单独保护表单字段？

我读过 UNSAFE_RAW 不起作用，除非你使用它的标志，但我找不到一个很好的例子来展示它与标志一起使用。

我也有一个类似的功能来清理一个看起来像这样的文本字段......

```
function sanitize_text($var){
$var = trim($var);
$var = htmlspecialchars($var);
$var = filter_var($var,FILTER_SANITIZE_STRING);
$var = filter_var($var,FILTER_SANITIZE_MAGIC_QUOTES);
return $var;
} 
```

同样，我不确定我是否真的需要使用此功能完成所有工作。

在确保输入安全方面，我如何改进此功能？

# php - 如何使用 php 和 mysql 将外键字段链接到另一个表中的主键字段？

> ID：15322409
> 
> 赞同：0
> 
> 时间：2013-03-10T12:49:15.937
> 
> 标签：php, mysql, phpmyadmin, foreign-keys, primary-key

我得到了 2 个表，例如一个以 id 作为主键（自动增量）的 USER TABLE 和一个以 userid 作为用户表中 id 的外键（整数）的 BOOKING TABLE。使用 phpmyadmin mysql 数据库。

我如何编写一个 php 脚本，我可以将这两个字段链接在一起，以便它们始终相关？因此，当用户在 Web 表单上输入姓名并预订游览时，它会在后端自动完成所有操作。

我是 php 和 mysql 的新手，搜索了很多论坛和观看教程，但仍然没有任何线索。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:51:03.327

您目前正在寻找的是如何加入多个表。下面的查询使用`INNER JOIN`仅显示在两个表上都匹配的记录。

```
SELECT  a.*, b.*
FROM    User a
        INNER JOIN Booking b
            ON a.ID = b.userID
// WHERE    ..conditions here.. 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# javascript - 动态新行上的 jQuery 自动完成

> ID：15322411
> 
> 赞同：1
> 
> 时间：2013-03-10T12:49:35.787
> 
> 标签：javascript, jquery

**问题：**（jQuery）自动完成仅适用于第一个输入（默认显示）。它不适用于使用添加行功能添加的其他行。

***我已阅读其他帖子并了解我必须使用类而不是 id。但它仍然不起作用。***

我正在使用 jquery 自动完成和一些 javascript 来添加和删除特定 ID 的行。

**这是标题：**

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
```

**这是jquery代码：**

```
jQuery(document).ready(function ($) {

  /*  availableTags = [
        "Demo",
        "Senna",
        "Adam",
        "Eva",

    ];*/

    $('.autofill').autocomplete({
        source:'suggest.php', minLength:2
    });
}); 
```

**这是HTML代码：**

```
 <div class="content-left">
    <a href="#" id="addScnt">Add rows</a>

        <div id="p_scents">
            <p>
                <label style="margin-bottom:10px;" for="p_scnts">
                    <input class="autofill" type="text" id="p_scnt" size="20" name="p_scnt[]"
                    value="" placeholder="Enter text" />
                </label>
            </p>
        </div>
    </div>

**Here is the Javascript to add rows:** 

$(function () {
    var scntDiv = $('#p_scents');
    var i = $('#p_scents p').size() + 1;

    $('#addScnt').on('click', function () {
        $('<p><label style="margin-bottom:10px;" for="p_scnts"><input class="autofill"  type="text" name="p_scnt[]" size="20" id="p_scnt_' + i + '" value=""  placeholder="Add text"       /></label  for="remScnt"> <label style="padding-left:400px;"><a href="#" id="remScnt">Remove</a></label></p>').appendTo(scntDiv);
        //i++;
        //return false;

        //Added the 5 lines below

        $(function ($) {
            $('#p_scnt_' + i).autocomplete({
            source:'suggest.php', minLength:2
            });
        });
        i++;
        return false;

    });

    $('#remScnt').on('click', function () {
        if (i > 2) {
            $(this).parents('p').remove();
            i--;
        }
        return false;
    });
}); 
```

所以上面的代码工作正常。为您的帮助干杯；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T14:55:48.740

对于您的最新代码，您犯了两个错误：

1.  `i`在将自动完成应用于文本字段之前增加计数器
2.  通过停止脚本`return false`

此外，建议使用`.on()`替换`.live()`，因为它在版本 1.7 中已弃用。

演示：http: [//jsfiddle.net/indream/f8mt4/](http://jsfiddle.net/indream/f8mt4/)

```
$('#addScnt').on('click', function () {
    $(...).appendTo(scntDiv);
    //i++; Should not be done here
    //return false; Stopped the script

    //Added the 5 lines below

    $(function ($) {
        $('#p_scnt_' + i).autocomplete({
            source: window.availableTags,
            minLength: 1
        });
    });
    i++; // should increase counter here
    return false;

}); 
```

ps 我已更改`availableTags`为全局变量以使演示有效，
但我认为您会使用查询来检索标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:54:14.533

```
$('#addScnt').live('click', function() {
  .........................

$('#p_scnt_'+i).autocomplete({
  source:'suggest_fill.php', 
  minLength:1  
});

 return false;
  ..................
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:08:29.713

我认为这是js文件加载问题的顺序。

尝试将第二个文件放在第一个文件之上。

希望它可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T14:19:12.933

第二个`$(function(){`太多了。它应该看起来像这样

```
<script>
$(function() {
  var scntDiv = $('#p_scents');
  var i = $('#p_scents p').size() + 1;

  $('#addScnt').live('click', function() {
    $('<p><label style="margin-bottom:10px;" for="p_scnts"><input class="autofill"  type="text" name="p_scnt[]" size="20" id="p_scnt_' + i +'" value=""  placeholder="Add text"       /></label  for="remScnt"> <label style="padding-left:400px;"><a href="#" id="remScnt"><img src="../../img/remove.jpg" width=""  height=""  class="img"  alt=""  title=""/></a></label></p>').appendTo(scntDiv);
    i++;   

    //Added the 5 lines below    

    $('#p_scnt_'+i).autocomplete({
      source:'suggest_fill.php', 
      minLength:1  
    });
  return false;
  });

  $('#remScnt').live('click', function() {
    if( i > 2 ) {
      $(this).parents('p').remove();
      i--;
    }
    return false;
  });
});
</script> 
```

# mysql - 学生考勤表结构

> ID：15322417
> 
> 赞同：0
> 
> 时间：2013-03-10T12:50:08.400
> 
> 标签：mysql, sql, database, database-design, relational-database

我很抱歉提出这个非常不常见的问题。

我正在使用 mysql，并且我有包含以下表格的数据库

```
course
course_subject
subject
student
student_course
department
employee
employee_role
personal_information
attendance
attendance_symbol 
```

![表结构](../Images/a74db38094b71f3258d402a028aace46.png)

上述数据库是相互链接的（关系数据库）......直到出勤时都很好......当学生注册一门课程时，它会自动注册与该特定课程相关的科目..

但是当谈到整体出勤时，我有一些问题......但首先让我告诉你们我对出勤的假设可能不正确，但包括：

```
    1.当学生注册一门课程时，它会自动注册其科目
    2\. 每门课程都有注册学生
    3\. 学生每日入学

```

我似乎无法弄清楚如何应对这种情况...我只需要帮助创建一个表格来标记学生每天的出勤情况...一旦标记不知道可能会存储另一张表格或如何...需要帮助

和学生每天都得到它出勤...但是当涉及到出勤时，我无法弄清楚我应该在哪里有出勤表...我应该将出勤表链接到 student_course 还是在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:55:00.920

要保存学生是否在某个日期参加某个学科的信息，您应该有一个如下表：

```
Attendance (student_id, subject_id, date) 
```

然后在学生参加时存储。这样，它将与您的学生、学科相关，但也与 student_course 相关，因为学科是课程的一部分。或者您可以只存储 course_id 而不是 subject_id。

# macos - mov rax,[res] 在 macho64 中不起作用

> ID：15322425
> 
> 赞同：1
> 
> 时间：2013-03-10T12:50:33.570
> 
> 标签：macos, assembly, nasm, mach-o, mov

我的代码：

```
section .data
   res db 0

section .text
   global _main
   extern _printf
   extern _scanf

_main
   ..blablabla.....
   mov rax,[res]
   ..blablbabla....
ret 
```

并且错误：Mach-O 64 位格式不支持`mov rax,[res]`.

所以，在 macho64 中，我无法链接`res`，在`[res]`？

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:05:41.867

我不知道 macho64 格式，但有替代方案`mov rax,[res]`：

```
mov rax,res
mov rax,[rax] 
```

或者使用 RIP 相对寻址：

```
mov rax,[rel res] 
```

# java - 删除带有大量尾随 0 的浮点字符串上的科学记数法

> ID：15322437
> 
> 赞同：-1
> 
> 时间：2013-03-10T12:51:27.390
> 
> 标签：java, math

我正在尝试将来自设备的数据的十六进制字符串转换为浮点数：

LCD显示中的设备输出，

`0x00ac`对应的浮点值为`5.06`

计算该值的方法是：

```
final byte[] temp = new byte[1];
temp[0] = ba[0];
float fff = hexToFloat(bytesToHex(temp)).floatValue();
final float ff = ( fff / 42) * 1000;
String floatString = Float.toString(ff); 
```

但是 floatString 输出字符串包含“E-”符号。我需要删除它。此外，ff 的值似乎与设备在 LCD 中输出的值略有不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:00:52.623

我看不出怎么`0x00ac`能等于 5.06，但这里是如何用 BigDecimals 摆脱科学记数法：

```
BigDecimal num = new BigDecimal(fltInput);
String numWithNoExponents = num.toPlainString() 
```

# c++ - 有什么方法可以声明变量的名称然后是类型

> ID：15322438
> 
> 赞同：-2
> 
> 时间：2013-03-10T12:51:28.327
> 
> 标签：c++, types, casting, void

我允许用户选择他想使用的数据类型，例如，如果他想使用 long 或 double 等。我想先声明变量的名称，然后设置它的类型。在 C++ 中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:59:23.293

如果我正确理解了你的问题，你想这样做：

```
declare variable;

// in the program:
variable = (int) anotherVariable; 
```

简短的回答：

# 不

长答案：

a`void *`正是这样做的，它需要在取消引用之前显式转换为不同的类型。但这对于不是 s 的变量是不可能`void *`的。

```
void *variable = NULL;
int someIntVariable = 100;
int *someIntPointer = NULL;
variable = &someIntVariable;
someIntPointer = (int *)variable;
.. // but this seems unncessary. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:00:08.227

考虑在其他平台上使用[`VARIANT`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221627%28v=vs.85%29.aspx)（如果你在 Windows 上）或类似的东西。关键`VARIANT`是它是一个能够存储各种数据类型但在给定时间只有一种特定类型的联合。这样，您可以`VARIANT`提前定义一个新的泛型变量类型 ( )，然后在运行时根据用户选择调整其内部类型。

但是，使用类似的东西`VARIANT`是有代价的，因为您对其执行的每个操作都必须检查该操作对于当前的基础类型是否正确。`VARIANT`也使用更多的内存，因为联合有自己的开销（详见定义）。

您可能希望将变体操作包装在一个类中以简化其使用。与此`VARIANT`相反的好处`void*`是它为您提供了更多的类型安全性，并且代码变得更具可读性。

编辑：正如另一个答案指出的那样，`boos::variant`就是为了这个目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:01:53.680

看看[`boost::variant`](http://www.boost.org/doc/libs/1_53_0/doc/html/variant.html)，或者，如果您只需要 POD，`union`。但是请记住，这会使许多事情复杂化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T13:05:33.530

```
enum VariantType {
   USER_INT, USER_DOUBLE
};

union Variant {
   int i;
   double d;
}

int main() {
   VariantType type;
   Variant data;
   type = getUserDataType();
   switch(type) {
   case USER_INT:
      data.i = 42;
      break;
   case USER_DOUBLE:
      data.d = 42.0;
      break;
   default:
      break;
} 
```

...或使用一些现成的变体实现。

# c++ - 使用 cout 打印时出现分段错误

> ID：15322439
> 
> 赞同：-3
> 
> 时间：2013-03-10T12:51:29.123
> 
> 标签：c++, segmentation-fault

我要为这个分段错误发疯了。我正在编写一个简单的 2 遍汇编程序。剥离中间文件以获取操作码、符号表条目等工作正常。我现在正在将机器代码缓冲区打印到控制台，但有些东西导致了分段错误。

```
#include"./assembler.h"
using namespace std;

int main(void)
{
ifstream inf("pooltab");
int pooltab[10],pooltab_ptr=0;

while(true)
{
    int x;
    inf>>x;
    if(inf.eof()) break;
    pooltab[pooltab_ptr++] = x;
}
for(int i=0;i<pooltab_ptr;i++)
    cout<<pooltab[i]<<endl;
pooltab_ptr = 0;
inf.close();

inf.open("intermediate.asm");
//  ofstream outf("machine_code");  
    sym_tab symtab;
literal_tab littab;

symtab.create_tab();
littab.create_tab();

char buf[50],*token,*m_code_buf,ch;
int loc_cntr=0,id,ltrl,a,b;

while(true)
{
    inf.getline(buf,50);
    if(inf.eof()) break;
    token = strtok(buf,"(), ");
    if(token != NULL)
    {
        if(token[0] == 'A' && token[1] == 'D')
        {
            token = strtok(NULL,",)");
            if(token == NULL)
            {
                cerr<<"null token error";
                return -1;
            }
            id = atoi(token);
            if(id == 1 || id == 2)
            {
                token = strtok(NULL,",() C");
                                    if(token == NULL)
                {
                    cerr<<"null token error";
                    return -1;
                } 
                loc_cntr = atoi(token);
            }
        }

        if(token[0] == 'I' && token[1] == 'S')
        {
            token = strtok(NULL,",)");
            if(token == NULL) 
            {
                cerr<<"null token error";
                return -1;
            }
            id = atoi(token);
            if(id == 10 || id == 11)
            {
                token = strtok(NULL,"S,() ");
                if(token == NULL)
                { 
                    cerr<<"null token error";
                    return -1;
                }
                a = atoi(token);
                a = symtab.get_addr(a);
                sprintf(m_code_buf,"%03d) + %02d 0 %03d\n",loc_cntr,id,a);  
                cout<<m_code_buf;
            }
            else if(id == 1)
            {
                sprintf(m_code_buf,"%03d) + %02d 0 000\n",loc_cntr,id);
                printf("%s",m_code_buf);
            }
            else if(id > 1 || id < 10)
            {
                token = strtok(NULL,"() ");
                if(token == NULL)
                { 
                    cerr<<"null token error"; 
                    return -1;
                }
                a = token[0] - 48;
                token = strtok(NULL," (,");
                if(token == NULL)
                {
                    cerr<<"null token error"; 
                    return -1;
                }
                ch = token[0];
                printf("%d %d %c \n",id,a,ch);
            }

            loc_cntr++;
        }
    }
}
inf.close();
//  outf.close();

return 0;
} 
```

这是我`(IS,1) (1) (S,1)`在中间代码文件中检查命令式语句的方式。错误在`sprintf`. 现在，当我对代码进行更改时，故障似乎从一个地方跳到另一个地方。前任。在某一时刻，我使用`cout`而不是`printf`. 然后`sprintf`就好了，但是 cout 产生了错误。然后我改变了 pooltab 的生成方式，现在`sprintf`是麻烦制造者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:55:35.047

我猜这`m_code_buf`要么没有初始化，要么太小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:47:31.287

数组和指针不一样。

目前，您已定义`m_code_buf`为指向的指针`char`：

```
char *m_code_buf; 
```

那*只是*一个指针。它没有指向任何地方。没有`char`它指向的对象。你不能开始把它当作它实际上指向任何有效的`char`对象。仅仅因为类型告诉您它将指向 a `char`，并不意味着它会自动执行。

当您将其更改为：

```
char m_code_buf[256]; 
```

这给了你一个数组`char`。它实际上`char`在内存中分配了 256 个大小的对象供您使用。然后将其传递给`sprintf`.

但`m_code_buf`这里不是指针。但是，在许多上下文中，数组的名称会隐式转换为指向其第一个元素的指针。这就是为什么您可以开始将数组的名称视为指针，即使它*不是*.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T12:56:35.723

```
if(token == NULL) cerr<<"null token error";
a = atoi(token); 
```

如果`token`是`NULL`，你只是传递`NULL`给`atoi`...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T12:53:43.363

这可能只是意味着您想要写的内容超出了缓冲区的承受能力。它让你写在别人的记忆上（段错误）。

# c# - 如何在 ASP.NET 中获取用户环境详细信息

> ID：15322444
> 
> 赞同：-2
> 
> 时间：2013-03-10T12:52:04.190
> 
> 标签：c#, asp.net

因此，出于某些审计目的，我应该跟踪连接到托管 Web 应用程序的用户的以下详细信息。

*   操作系统：
*   浏览器：
*   估计的位置：
*   服务提供商：
*   领域：
*   IP地址：
*   机器名称：
*   用户名

要获取 IP 地址、MeachineName、用户名，我尝试使用以下代码。

```
var userIpAddress = HttpContext.Current.Request.UserHostAddress;
var MachineName = HttpContext.Current.ApplicationInstance.Server.MachineName;
var UserName = HttpContext.Current.User.Identity.Name; 
```

编辑：

```
var Browser = Request.Browser.Browser;
var OperatingSystem = Request.Browser.Platform; 
```

那么如何获取剩余的字段值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T12:54:33.347

> 那么如何获取剩余的字段值呢？

你不能。这些值永远不会作为 HTTP 请求的一部分发送到您的服务器。

并且不要被愚弄认为`HttpContext.Current.ApplicationInstance.Server.MachineName`给你客户的机器名称。这将为您提供服务器的机器名称。您无法获取客户端的机器名称。

# prolog - 我如何得到总和 x^n/n！在序言中？

> ID：15322446
> 
> 赞同：-1
> 
> 时间：2013-03-10T12:52:22.513
> 
> 标签：prolog, sum, factorial

我对Prolog不太了解。我需要计算一个总和**x^n/n！**在 Prolog 中，**n=1..k，k 和 x 整数** 有人，请解释我如何使用 Prolog 来做到这一点。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T14:05:25.473

通过使用带有累加器参数的尾递归辅助谓词实现循环：

```
xsum(K,X,S):- K>=1, zsum(X,1,K,1,0,S).

zsum(X,I,K,PrevTerm,PrevSum,S):-
  I=:=K, Term is ________ * X / I, S is _____ + _____.

zsum(X,I,K,PrevTerm,PrevSum,S):-
  I < K, Term is ________ * X / I, Sum is _____ + _____, I1 is I+1,
  zsum(X,I1,K,Term,Sum,S). 
```

填空。:)

这些子句是互斥的，因此谓词是确定性的。

# html - 同一行上的流体和静态 div

> ID：15322452
> 
> 赞同：0
> 
> 时间：2013-03-10T12:53:33.900
> 
> 标签：html, css, responsive-design, fluid-layout

我有一个关于流体布局的问题。我正在构建一个响应式站点，并且我有一个使用 DIV 构建的 Listview。我想要做的是：

我有一个项目列表，每个项目都有几个不同的数据条目（标题、年份、流派、选项），每个条目都在自己的 DIV 中（它们都在包装 DIV 中）。其中 2 个具有固定宽度，例如日期 (YYYY-MM-DD)。它的宽度始终相同，选项（2 个图标）也是如此。

我如何构建它以使标题和流派 div 具有流畅的宽度和变化，并且日期和选项 div 保持相同的宽度。

我试过以百分比设置宽度，但这意味着它会在我调整窗口大小时重新计算。例如，我希望日期在所有断点上具有相同的宽度。无论您是在 iPhone 还是桌面上查看它。

欣赏任何和所有的想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:49:21.027

为每个人提供流动的宽度，即，您只需为要修复这些宽度的元素`width:90%`定义它们，它们将不再被进一步拉伸到极限。`min-width:240px;`

# java - 磁盘缓存/DiskLRUCache - 非线程访问？

> ID：15322455
> 
> 赞同：1
> 
> 时间：2013-03-10T12:54:00.960
> 
> 标签：java, android, caching, disk

我看到的每一个使用 Jake Wharton 的 DiskLRUCache 的例子，我都看到人们在主线程上调用 cache.get 和 cache.put（即没有打开一个新线程）。

这不坏吗？另外，如果我想使用线程调用来获取字符串，那么在不创建侦听器的情况下最好的方法是什么？

即目前我有： String data = cache.get("data");

但由于它是磁盘 I/O 操作，我宁愿将 cache.get 移动到不同的线程。

# core-data - 更新核心数据中的属性

> ID：15322466
> 
> 赞同：0
> 
> 时间：2013-03-10T12:55:05.313
> 
> 标签：core-data, nsfetchrequest, insert-update

我知道这已经被回答了很多次，但我似乎无法让我的工作。

我有一个名为`SchoolName`s 的实体，它有一个名为`nameOfSchool`. 我希望能够更新这个属性。

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"SchoolName"];
fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"NameOfSchool" ascending:YES]];
NSError *errorLoading = nil;
self.schoolNames = [context executeFetchRequest:fetchRequest error:&errorLoading];

NSLog(@"%d", self.schoolNames.count ); 
```

我可以看到`NSLog`我正在将数据加载到`schoolNames`数组中。但我不知道如何更新数组中的条目，然后将其保存回实体。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:28:22.867

的返回值`executeFetchRequest`是一组*SchoolName*对象。要更新这些对象，只需为属性分配一个新值：

```
for (SchoolName *sn in self.schoolNames) {
    sn.nameOfSchool = ... ; // new value;
}
NSError *error;
if (![context save:&error]) {
    // Save failed, handle error ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:36:21.893

马丁的建议确实有效。我赞成;)。

另一种方法是通过 KVC 访问您感兴趣的属性（如果您没有对实体进行子类化`SchoolName`）。

```
for (NSManagedObject *schoolObject in [self schoolNames]) {
    [schoolObject setValue:@"yourNewValue" forKey:@"nameOfSchool"];
} 
```

还要记住保存，相反更改只会在内存中（而不是在存储中）。

PS 在代码中，我认为那`nameOfSchool`是`NSString`. 其他值是可能的。

# javascript - 将 Javascript 对象绑定到 HTML 元素

> ID：15322467
> 
> 赞同：1
> 
> 时间：2013-03-10T12:55:07.067
> 
> 标签：javascript, jquery, html, data-binding

我只是想和大家分享一个经验。所以我的问题是，我遇到了将 javascript 后端对象绑定到 HTML 前端元素的问题。现在，我通过谷歌搜索并阅读了一些关于这个问题的 stackoverflow 文章，许多帖子对此的回答是使用[jQuery.data()](http://api.jquery.com/jQuery.data/)，但是在我的第一次尝试中我没有成功，因为我不知道 jQuery 的对象创建方法。我的问题是，我想在我存储它的范围之外检索存储的数据，并且当我编写 jQuery('selectorID') 时，jQuery 总是（我认为）返回一个新的对象引用。例如：

```
var ref1 = $('#myID');
var ref2 = $('#myID');

if(ref1 == ref2)
{
   alert(true);
}
else
{
   alert(false);
} 
```

总是会警告假的。然而，用 javascript 的内置[getElementById()](http://www.w3schools.com/jsref/met_doc_getelementbyid.asp)替换 jQuery 方法，我们将得到相同的引用！因此，以下代码将始终警告为真！

```
var ref1 = document.getElementById("myID");
var ref2 = document.getElementById("myID");

if(ref1 == ref2)
{
   alert(true);
}
else
{
   alert(false);
} 
```

我的故事的一点小意思是，如果您想**将 javascript 对象全局绑定到 HTML 元素**并考虑**使用 jQuery 的 data() 方法，请将数据存储在 javascript 的内置[getElementById()](http://www.w3schools.com/jsref/met_doc_getelementbyid.asp)**返回的引用上。这样，**无论您在何处使用 getElementByID 检索引用**，**您都将始终获得相同的引用**，并且可以使用 jQuery 的 data() 方法从中获取数据。

我的问题：

1.  我的思维逻辑正常吗？
2.  有没有更好的方法将 javascript 对象全局绑定到 HTML 元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T00:25:09.437

无论您提到的代码不起作用的原因是什么，jQuery 为每个查询都提供了一个新集合，这**绝对不是事实。**给定 HTML：

```
<div id="somediv"> foo bar </div> 
```

以下Javascript[按预期工作](http://codepen.io/anon/pen/jwroJ)：

```
var $ref1 = $('#somediv');
var $ref2 = $('#somediv');

console.log("$ref1:", $ref1);
console.log("$ref2:", $ref2);

// compare the collections / references
console.log("$ref1 == $ref2:", $ref1 == $ref2); // => false
console.log("$ref1 === $ref2", $ref1 === $ref2); // => false

// compare the referred DOM elements themselves
console.log("$ref1[0] == $ref2[0]:", $ref1[0] == $ref2[0]); // => true
console.log("$ref1[0] === $ref2[0]", $ref1[0] === $ref2[0]); // => true

$ref1.data('somedata', 'SOMEDATA');
console.log('$ref1->somedata:', $ref1.data('somedata')); // => SOMEDATA
console.log('$ref2->somedata:', $ref2.data('somedata')); // => SOMEDATA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:00:21.050

我这样做的方式是这样的。

```
var ref1 = $('a');
var ref2 = $('div');

var equal = ref1.length === ref2.length;
if (equal) {
    $.each(ref1, function(i) {
        equal = equal && ref1[i] === ref2[i];

        if (!equal) {
            return false;
        }
    });
}

if (equal) {
    alert(true);
} else {
    alert(false);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:06:29.197

```
ref1[0] === ref2[0] // Should return true 
```

我认为jQuery的实例是独一无二的，所以你可以比较它的匹配项，当你引用一个ID时，它应该只是一个元素。

你可以这样做：

```
var ref1 = $('#myID')[0];
var ref2 = $('#myID')[0]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-10T13:18:44.773

我深入研究了 jQuery 的源代码，并找到了 jQuery 的构造函数。如下：

```
// Define a local copy of jQuery
jQuery = function( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
} 
```

每当您使用`ref2 = $('#myID')`检索相应的 jQuery 元素时，jQuery 都会为您创建一个新对象。所以`==`会返回 false 给你，因为这两个元素与 js 对象引擎完全不同。

似乎`getElementById`方法更适合您的需要。但我不知道js引擎如何执行它的`getElementById`方法。

# scala - 列表和统一访问原则

> ID：15322476
> 
> 赞同：0
> 
> 时间：2013-03-10T12:56:43.283
> 
> 标签：scala, uniform-interface

我有以下代码，我想知道为什么`list.head.effects =`这里需要这个部分。据我了解，统一访问原则表示该列表应该由返回`list.head.effects`，此时我可以访问该列表。但是要使作业真正起作用，我需要如下所示。会不会是它评估`Entrance :: list.head.effects`但没有在任何地方分配它？还是我在变幻的世界里太深了？

```
def addEntrance(list: List[Tile]) = list.head.effects = Entrance :: list.head.effects

case class Tile(x: Int, y: Int) {
  var effects: List[_ >: Effect] = List()
}

case class Entrance extends Effect 
```

无论如何，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T14:15:09.237

`::`创建一个新列表，其中左侧参数附加到右侧列表中。这不会改变或分配任何东西。没有`var`可能的不可变解决方案是：

```
case class Tile(x: Int, y: Int, effects: List[_ >: Effect] = List())

case class Entrance extends Effect

def addEntrance(list: List[Tile)) = list match {
  case Tile(x,y,effects) :: tail => Tile(x,y,Entrance() :: effects) :: tail
  case Nil => ...
} 
```

这里`addEntrance`返回一个更新的列表，这是使用不可变列表的方式。

顺便说一句：`.head`在列表上使用仅适用于特殊情况，因为通常您不知道列表是否至少包含一项。所以在这里使用模式匹配是一种更好的方法。

# c# - 没有空构造函数的类不能进行序列化

> ID：15322478
> 
> 赞同：1
> 
> 时间：2013-03-10T12:56:46.533
> 
> 标签：c#

我想知道为什么 a`class`不能`serialization`没有空的构造函数。

当我收到此错误消息时，我尝试了几次：

```
ClassName cannot be serialized because it does not have a parameterless constructor. 
```

代码如下：

```
 public void DoSerialize(string path)
    {
        try
        {
            XmlSerializer serializer = new XmlSerializer(typeof(List<MyClass>));
            TextWriter textWriter = new StreamWriter(path);
            serializer.Serialize(textWriter, MyList);
            textWriter.Close();
        }
        catch (Exception e)
        {

        }
    } 
```

真的，当我添加一个空的构造函数时，它起作用了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T13:03:42.840

在反序列`XmlSerializer`化时需要创建一个你的类的对象，然后从 XML 中一一设置它的属性。为此，序列化程序必须构造对象，并为此使用默认的无参数构造函数。它不能使用其他构造函数，因为它不知道需要传递给它们什么属性。

无法创建缺少无参数构造函数的对象实例已被认为是一个问题，并[在 .NET 的更高版本中通过提供一种使用`FormatterServices.GetUninitializedObject`](https://stackoverflow.com/q/390578/335858). 但是，`XMLSerializer`一直保持目前的状态。

# java - 在 Clojure 中制作缩略图

> ID：15322483
> 
> 赞同：3
> 
> 时间：2013-03-10T12:57:19.333
> 
> 标签：java, clojure

我在终端中运行以下命令来运行存储在以下文件中的代码：

```
java -cp clojure.jar clojure.main thumbmaker.clj 
```

thumbmaker.clj 的内容在哪里（这段代码已经在多个地方引用过）：

```
(import javax.imageio.ImageIO)
(import java.awt.image.BufferedImage)
(use '[clojure.java.io :only [as-file input-stream output-stream] :as io])

(defn make-thumbnail-generic [input new-filename width]
  (let [img (javax.imageio.ImageIO/read input)
        imgtype (java.awt.image.BufferedImage/TYPE_INT_ARGB)
        width (min (.getWidth img) width)
        height (* (/ width (.getWidth img)) (.getHeight img))
        simg (java.awt.image.BufferedImage. width height imgtype)
        g (.createGraphics simg)]
    (.drawImage g img 0 0 width height nil)
    (.dispose g)

(defn make-thumbnail-from-file [filename new-filename width]
  (make-thumbnail-generic filename new-filename width))

(make-thumbnail-from-file "thumb.png" "test.png" 100) 
```

我收到以下错误：

> 线程“主”java.lang.IllegalArgumentException 中的异常：未找到匹配方法：读取 (thumbmaker.clj:0)

我已经独立检查了 REPL 中的 import 和 use 语句，它们似乎被接受得很好。

我检查了 ImageIO 的 Java 参考，读取功能在那里。

我已经完成了 Java-Interop 的编写，这似乎是非常标准的方式，所以我无法弄清楚为什么读取不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T13:30:11.240

请参阅[http://docs.oracle.com/javase/1.5.0/docs/api/javax/imageio/ImageIO.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/imageio/ImageIO.html)

javax.imageio.ImageIO/read 需要一个 URL、文件、InputStream 或 ImageInputStream。不是字符串。

做`(javax.imageio.ImageIO/read (as-file input))`可以解决问题。

# php - Javascript字符串/变量连接没有空格

> ID：15322496
> 
> 赞同：0
> 
> 时间：2013-03-10T12:58:35.480
> 
> 标签：php, javascript

在使用 ajax 脚本时，我让 php 部分回显一个值，然后在 jQuery 部分中提醒它。

所以我们有这样的事情：

```
<?php echo "1"; ?>

//Javascript
alert("the value is"+phpvalue); 
```

警报显示为“值为 1”。现在我的问题是如何删除“值是”和 +phpvalue 之间的空格？所以它显示为“值是1”。我在 php 部分尝试了 trim() 但它没有改变任何东西。

如果这是一个菜鸟问题，请感谢任何帮助和抱歉=/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:17:28.107

在 http 响应中，除了您打印的内容之外，还可以包含其他一些字符。例如，如果 php 标记之前有空格 .. php 文件开头的 BOM 字符...因此，如果您只修剪变量，这并不能确定，那么您将在客户端获得纯粹的变量而没有垃圾字符。

所以你应该在javascript的客户端使用trim：例如jQuery trim（[http://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)）

```
 alert("the value is"+$.trim(phpvalue)); 
```

或者使用 phpjsorg ( [http://phpjs.org/functions/trim/](http://phpjs.org/functions/trim/) ) 中的 nativ js trim 函数：

```
 alert("the value is"+trim(phpvalue)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:06:18.097

不确定您到底想要什么，但这里有两种情况

```
If you just are dealing with excess whitespace on the beginning or end of the string you can use trim(), ltrim() orrtrim() to remove that.

If you are dealing with extra spaces within a string consider a preg_replace of multiple whitespaces " "* with a single whitespace " "

$foo = preg_replace( '/\s+/', ' ', $foo ); 
```

# html - 图片没有垂直对齐？

> ID：15322497
> 
> 赞同：0
> 
> 时间：2013-03-10T12:58:54.370
> 
> 标签：html, image, html-table, vertical-alignment

我正在创建一个注册表单，我正在处理错误。如果用户名已经被占用，我想在文本框旁边显示一张图片。

```
<table width='60%'>
    <tr>
        <td align='left'>Username:</td>
        <td align='right' valign='center'>
            <img src='img/warning.png' title='Username alredy taken.' height='16px'
            />&nbsp;
            <input type='textbox' name='register_username' value='USERNAME'
            />
        </td>
    </tr>
</table> 
```

[http://jsfiddle.net/2RM8N/2/](http://jsfiddle.net/2RM8N/2/)

如上面的jsfiddle所示，图片没有垂直对齐，我希望它与文本/文本框的垂直高度相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:10:02.063

`"valign"`属性不接受`"center"`价值，你可能是说`"middle"`.

尝试将此样式应用于`INPUT`and `IMG`：

```
style="vertical-align: middle;" 
```

# actionscript-3 - AS3 在场景中调用 Math.random？

> ID：15322498
> 
> 赞同：0
> 
> 时间：2013-03-10T12:59:22.287
> 
> 标签：actionscript-3, math, random

所以，我正在尝试制作一个小行星随机移动的游戏，但是当我将 Math.random 函数放在我的函数之外时，它只给出 1 次值，并且每次小行星 = 0 时都不会重复。如果我把它放在我的函数中，它只是不断更新并让我的小行星随机飞来飞去。有什么帮助吗？编辑：对不起，如果我不清楚，我整晚都没有睡。我想让我的小行星在屏幕上的随机路径上移动，然后随机选择另一条路径并在该路径上移动，这应该在每次 x>1024 和 y>768 时发生

```
import flash.events.Event;
addEventListener(Event.ENTER_FRAME, massGain);
stop();

var math1:Number = Math.floor(Math.random()*20-10);
trace(math1);

function massGain(e:Event)
{

Mouse.hide();

Cosmo.x = mouseX;
Cosmo.y = mouseY;

Asteroid5.x = Asteroid5.x + math1;
Asteroid5.y = Asteroid5.y + math1;
if(Asteroid5.x >1024){
Asteroid5.x = 0;
}
if(Asteroid5.y > 768){
Asteroid5.y = 0;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:06:51.900

用这个！

```
import flash.events.Event;
addEventListener(Event.ENTER_FRAME, massGain);
stop();

// random value to start of with
var math1:Number = Math.floor(Math.random()*10);//20-10 doesnt make sense .. its 10

function massGain(e:Event)
{
        Mouse.hide();

        Cosmo.x = mouseX;
        Cosmo.y = mouseY;

        if(Asteroid5.x >1024){
        Asteroid5.x = 0;
        math1 = Math.floor(Math.random()*10);// new random Value
        trace(math1);
        }
        if(Asteroid5.y > 768){
        Asteroid5.y = 0;
        math1 = Math.floor(Math.random()*10);// new random Value
        }

        Asteroid5.x = Asteroid5.x + math1;
        Asteroid5.y = Asteroid5.y + math1;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:14:07.800

```
import flash.events.Event;
addEventListener(Event.ENTER_FRAME, massGain);
stop();

var speedX = Math.floor(Math.random()*20-10);
var speedY = Math.floor(Math.random()*20-10);

function massGain(e:Event)
{

Mouse.hide();

Cosmo.x = mouseX;
Cosmo.y = mouseY;

Asteroid5.x = Asteroid5.x + speedX;
Asteroid5.y = Asteroid5.y + speedY;
if(Asteroid5.x >1024||Asteroid5.x<0){
speedX = -speedX;
}
if(Asteroid5.y > 768||Asteroid5.y<0){
speedY = -speedY;
}
} 
```

试试这个。

# android - SQLite 更改数据库上项目的排序顺序

> ID：15322504
> 
> 赞同：2
> 
> 时间：2013-03-10T13:00:16.647
> 
> 标签：android, database, sqlite

所以想象一下这是我的数据库的一个快速模型：

![在此处输入图像描述](../Images/38970033616fb6b1152e6037292226ff.png)

数据库中的项目按列表呈现给用户，每个列表都显示在一个新片段上，这些片段显示在一个视图页面上。因此，假设在这种假设情况下，viewpager 上有两个片段，第一个片段将显示**first_list**，第二个片段将显示**second_list**。这是该查询的代码：

```
 public static Cursor getListItems (final Context context, String listName) {
    if (mDatabase == null || !mDatabase.isOpen())
        open(context);  //This gets the writable db.

    String where = LIST_NAME + " = '" + listName + "'";
    return mDatabase.query(TABLE_LIST_ITEMS, PROJECTION_LIST_ITEMS, 
    where, null, null, null, SORT_ORDER);
} 
```

从哪里开始`SORT_ORDER`，`order_in_list`这很好用。

现在，列表视图可以使用公共[库](https://github.com/bauerca/drag-sort-listview)重新排列，它试图允许用户控制每个列表中项目的顺序。这是我遇到问题的地方，没有`add(int index, Object object)`光标，或者其他一些简单的方法来管理排序。我首先认为我可以简单地调用`mDatabase.update()`来更改值，`order_in_list`但这可行，但结果并不如预期。例如，用户将**项目二拖到****零**位置，请记住：零索引值，我们现在将有**两个**项目`order_in_list`为零。虽然我可以调用**第一项**`mDatabase.update()`来将他的位置更新为**一项******，想象一下在一个格式良好的数据库中处理多个项目需要做多少工作。****

 ****有人对我如何解决这个问题有什么好的建议吗？我以为我很聪明地添加了额外的 col 进行排序:(

INB4：

**是的，我知道数组可以很好地处理这个问题**。但该数据库不仅存储 4 个列，它还有更多字段。每次从数据库中填充数组都是浪费时间和精力。无论如何，我必须在应用程序关闭时写回数据库。

**编辑**所以我将列表视图更改为仅显示一个文本字符串，并在实际单击该项目时显示更多列（因此显示具有指定列表项数据的新片段）。这让我可以简单地保留一个 ArrayAdapter 来轻松处理拖放操作。在 onStop 期间，我仅在需要保存更改时才更新参考：

```
@Override
public void onStop() {
    if (updateDbOnExit) {
        //Update rows on database.
        for (int i = 0; i < items.size(); i++) {
            //Set the order in list be the actual order on the array.
            Constants.LogMessage("Updating db content");
            DbManager.moveListItemTo(getActivity(), items.get(i), i);
        }
            updateDbOnExit = false;
    }
    super.onStop();
} 
```

其中 MoveListItemTo 更新 order_in_list 的值：

```
 public static void moveTaskItemTo (final Context context, String item, int to) {
    if (mDatabase == null || !mDatabase.isOpen())
        open(context);  

    String where = COL_CONTENT + " = '" + item+ "'";

    ContentValues mContentValues = new ContentValues();
    mContentValues.put(ORDER_IN_LIST, to);  
    int rows = mDatabase.update(TABLE_LIST_ITEMS, mContentValues, where, null);

    Constants.LogMessage(rows + " row updated. Item moved to position: " + to);

    close();
} 
```

现在可以了。但是，我仍然想知道是否有其他方法，尤其是当适配器使用数据库中多个**列**中的数据时，因此需要使用 CusorAdapter 而不是常规的 ArrayAdapter，这在turn 要求**数据库**本身在每次拖放时更新，以通过`cursorAdapter.swapCursor()`. 如前所述，在每次拖动时更新数据库上的**所有**项目（实际上并不经常发生这种情况），代价高昂，只更新**两**行，将是一个更明智的选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T15:57:29.307

`I just meant I wanted a more effective way to update the fields in the db, rather than manually updating each and every single row`

将用户指定顺序列设为小数，而不是整数。然后您只需要更新移动的行。

允许负数。

```
0.00 cat
1.00 aardvark
2.00 wolf
3.00 dog 
```

如果将“dog”拖到“wolf”上方，则“dog”变为 1.50，无需更改其他行。如果将“aardvark”拖到“cat”上方（特殊情况——在列表之前而不是在行之间插入），则从最高值中减去 1，“aardvark”变为 -1.00。

这将要求您知道相邻行的值，但您不必更新它们。只有移动的行的值必须改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:20:21.863

我建议您有一个额外的列 user_specified_order 表示用户通过拖放对 UI 中的行进行重新排序。

当其 user_specified_order 值因拖放重新定位而失效时，您必须更新每一行。何时*保留*该值取决于您——无论是在用户操作的“结束”时，但要定义（例如单击保存按钮）或在每次拖放后，如果没有明确的 UI 指示“结束操纵”。

编辑：Android 中的 ContenProvider： [Android - 你可以更新 SQLite 结果的光标吗？](https://stackoverflow.com/questions/7973607/android-can-you-update-a-cursor-for-sqlite-results)

Android SQLite 事务： [Android 数据库事务](https://stackoverflow.com/questions/8147440/android-database-transaction)****

# android - Android - 图片库（使用 Universal-image-loader）

> ID：15322507
> 
> 赞同：2
> 
> 时间：2013-03-10T13:00:26.837
> 
> 标签：android, image, url, image-gallery, universal-image-loader

我想知道是否有任何关于如何创建从 URL 加载图像的简单图像库的库/教程。

我想要的是：

*   用于查看图库中所有图像的缩略图的网格视图

*   当您单击图像时，您会看到它全屏

*   左右滑动浏览图库中的图片

似乎无法正确处理！

编辑：这个通用图像加载器看起来很棒 [https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader) 是否可以在我的其他活动中使用 ImageGridActivity？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:22:16.600

是的，有，你应该看看**Universal Image Loader for Android**，它是一个非常好的库，用于处理来自网络的图像。

**特征**

*   多线程图像加载
*   可以广泛调整 ImageLoader 的配置（线程池大小、HTTP 选项、内存和磁盘缓存、显示图像选项等）
*   在内存和/或设备的文件系统（或 SD 卡）中缓存图像的可能性
*   “听”加载过程的可能性
*   可以使用单独的选项自定义每个显示图像调用
*   小部件支持

项目站点位于 github：[https ://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

**编辑**

该项目附带满足您愿望的示例，Gallery、ListView、GridView 和 PagerAdapter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:16:35.713

最好的办法是将所有图像从 url 存储到外部存储，然后异步生成缩略图以优化性能。但为此，您还需要网页上图像的所有 url，这很容易使用 html 解析器完成。

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet(url);
HttpResponse response = client.execute(request);

String html = "";
InputStream in = response.getEntity().getContent();
BufferedReader reader = new BufferedReader(new InputStreamReader(in));
StringBuilder str = new StringBuilder();
String line = null;
while((line = reader.readLine()) != null)
{
    str.append(line);
}
in.close();
html = str.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:20:08.120

要在网格中显示图像，您将需要一个自定义适配器（Google it）并使用捆绑将位图发送到一个新活动，您将全屏显示您的图像。

# android - 公共静态变量或使用意图类的 putExtra 方法

> ID：15322508
> 
> 赞同：8
> 
> 时间：2013-03-10T13:00:29.780
> 
> 标签：android, variables, android-activity

我在这里有一个关于性能的一般性问题，我应该做哪些，不应该使用哪些。我实际上在我的应用程序中使用了两个活动，让我们称之为“theFirst”和“theSecond”活动。

在第一个活动中，我有一个公共静态对象，在我的例子中，它是我制作的自定义对象的列表，称为 Conjunction。

当我调用 theSecond 活动时，我想获取此列表的内容。那么我应该使用公共静态变量吗？有什么问题吗？theFirst 活动只有一个实例，对吗？所以使用公共静态变量没问题..？我猜。

或者我应该计算整个列表并将信息放在一个大字符串上并使用 putExtra 方法将其发送到第二个活动？

对此的一个很好的解释会非常好，我将非常感激`:)`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-10T13:10:59.980

不推荐使用静态变量。静态变量存储在堆的**PermGen**部分中。即使类完成了它的工作，静态变量也会留在堆中。垃圾收集器会做标记和清扫。如果您在第二个活动中引用的第一个活动中有一个静态变量，则链接将保持很长时间。如果您使用更多静态变量，您可能会出现内存泄漏。也减少使用不必要的物品。

静态变量由 ClassLoader 引用的 Class 对象引用 - 因此，除非 ClassLoader 以某种方式删除 Class 或 ClassLoader 本身符合垃圾收集条件，否则静态变量不会被垃圾收集。因此，如果您使用在许多类中引用的静态变量，除非这些类可用于垃圾收集，否则这些类和声明静态变量的类不能被垃圾收集。所以这会导致堆内存扩展导致内存泄漏。

我建议将 puExtra 用于基元类型。在您的情况下，使用单例应该会有所帮助。

在这个视频中，这个人谈到了为什么不应该使用静态变量以及如何避免内存泄漏。[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。这家伙谈到使用 MAT Analyzer 来检查内存泄漏。

也看看这个链接。*[http://developer.android.com/guide/faq/framework.html](http://developer.android.com/guide/faq/framework.html)*。查看标题下的详细信息 *如何在单个应用程序中的活动/服务之间传递数据？。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:05:09.260

公共静态不是一个好主意。在某些情况下，“theFirst”活动可能会被系统终止。通关：[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)可以帮助您了解活动的工作方式。

最好不要真正将 putExtra 用作字符串，还要将 putExtra 用于 Parselable 或 Serializable 对象。[有关可序列化的信息，请参见此处](https://stackoverflow.com/q/2736389/944070)

# android - 计算经过时间（第二个时间标记 - 第一个时间标记）

> ID：15322518
> 
> 赞同：1
> 
> 时间：2013-03-10T13:02:22.883
> 
> 标签：android

我有服务（服务有一个广播接收器，它监听`ACTION_BATTERY_CHANGED`），我想计算两个时间标记之间经过的时间，这就是我所拥有的：

```
public void onReceive(Context context, Intent intent){
                    int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
                long time;
                long startTime=0;

                    if(OldLevel==0){
                    OldLevel=level;
                    startTime = System.nanoTime();

                    }
                    else{

                        time=System.nanoTime()-startTime;
                        startTime=System.nanoTime();  //edited

                    Log.e("inFFFF","FFFF "+time);// I somehow here get 16243428223995 nanoseconds which are too large because in reality it just take 1-2min.
                    }

                } 
```

如果你能请： 1\. 告诉我为什么时间比预期的大 2\. 或者建议更好的方法来计算正在流逝的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:08:56.870

在您的代码示例中，仅当满足条件 1 时才为 startTime 分配一个值。（否则您计算`System.nanoTime()-startTime`startTime 为 0 的位置）

所以实际上你正在将现在时间与 0 进行比较，这是开始时间的初始值。这是错误的。纳米时间用于测量经过的时间。您应该始终将 System.nanoTime() 与 System.nanoTime() 的其他调用进行比较。见： [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#nanoTime()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#nanoTime())

也许尝试这样的事情：

```
public void onReceive(Context context, Intent intent){

                long time;
                long startTime= System.nanoTime();

                    if(....){

                    startTime = System.nanoTime();

                    }
                    else{

                        time=System.nanoTime()-startTime;

                    Log.e("inFFFF","FFFF "+time);// I somehow here get 16243428223995 nanoseconds which are too large because in reality it just take 1-2min.
                    }

                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:26:57.067

在`else`开始时的时间总是为零。所以你需要从一开始就捕捉开始时间。

IE

```
long startTime=System.nanoTime(); 
```

否则保持其余代码不变

# css - 如何在没有绝对定位的情况下将主体元素内的 div 垂直和水平居中？

> ID：15322519
> 
> 赞同：5
> 
> 时间：2013-03-10T13:02:31.417
> 
> 标签：css, html, centering

我已经阅读了无数关于垂直对齐和居中 div 的问答和博客文章，但我无法让最简单的情况起作用：直接在 html 正文中放置一个空的 20x20 div。

html:

```
 body
    {
        background-color:DarkGray;
        display:table;
    } 

    .box
    {
        background-color:black;

        display:table-cell
        margin:0, auto;    

        width:20px;
        height:20px;
    }
```

```
<body>
    <div class="box">
    </div>
</body> 
```

这是[JSFiddle](http://jsfiddle.net/8At93/382/)。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-10T13:06:04.950

`display:table`并且`display:table-cell`是坏的，远离他们。`div`这是使内部居中的一种非常常见的方法`<body>`。它将元素的顶部和左侧定位在 50% 点内`body`，然后从 and 中减去and的`width`1/2 。`height``margin-top``margin-left`

```
.box {
  background-color: black;
  position: absolute;
  left: 50%;
  top: 50%;
  width: 20px;
  height: 20px;
  margin-left: -10px;
  /* -1/2 width */
  margin-top: -10px;
  /* -1/2 height */
}
```

```
<body>
  <div class="box">

  </div>
</body>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T13:10:09.240

首先，边距样式存在语法错误：

```
margin: 0, auto; 
```

但应该是：

```
margin: 0 auto; 
```

在支持垂直定位的情况下，它应该是：

```
html,
body {
  background-color: DarkGray;
  height: 100%;
}

.box {
  position: relative;
  top: 50%;
  margin: -10px auto;
  /* -height/2 */
  width: 20px;
  height: 20px;
  background-color: black;
}
```

```
<body>
  <div class="box">
  </div>
</body>
```

And there is a discussion on this site [Why not use tables for layout in HTML?](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T14:00:54.590

Tyriar's code is definitely the best solution.
Always remember to set the `margin-left` and `margin-top` to half the width of the div you wish to center, as elements always align from their sides and not their center.

# java - Java并发中的可见性问题是如何发生的？

> ID：15322527
> 
> 赞同：1
> 
> 时间：2013-03-10T13:04:17.150
> 
> 标签：java, concurrency, concurrent-programming

我正在阅读这本书：“Java Concurrency in Practice”，以更好地了解 Java 并发的工作原理。在第 3 章第 3.1 节：可见性 书中有一个示例试图说明可见性问题是如何发生的。这是示例代码（书中的清单 3.1）：

```
 public class NoVisibility {
    private static boolean ready;
    private static int number;

    private static class ReaderThread extends Thread {
        public void run() {
            while (!ready)
                Thread.yield();
            System.out.println(number);
        }
    }

    public static void main(String[] args) {
        new ReaderThread().start();
        number = 42;
        ready = true;
    }
} 
```

这本书说 NoVisibility 可以永远循环，因为 ready 的值可能永远不会对读者线程可见。这怎么可能。我的一般理解是，无论如何，准备好会在某个时间成为现实。但我不明白为什么这可能不会发生并且循环永远存在。有人可以帮助我更好地理解这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T13:07:41.260

因为 ready 没有被标记为 volatile 并且值可能在 while 循环开始时被缓存，因为它在 while 循环中没有改变。这是抖动优化代码的方式之一。

因此，线程可能在 ready = true 之前启动并读取 ready = false 在本地缓存该线程并且不再读取它。

查看 volatile 关键字。

[来源](https://stackoverflow.com/a/1919476/12860)

# javascript - 单击移动选项以进行下一步选择

> ID：15322530
> 
> 赞同：1
> 
> 时间：2013-03-10T13:04:48.043
> 
> 标签：javascript, jquery

我想将单击时的每个选项移动到下一个选择，这是我目前得到的：

```
<form action="#" method="get">
<select multiple name="players" id="players">
    <option value="player">player</option>
    <option value="player1">player1</option>
    <option value="player2">player2</option>
</select>

<select multiple name="team" id="teams">
    <option value="team">team</option>
    <option value="team1">team1</option>
    <option value="team2">team2</option>
</select> 
```

```
 $('#players option').each(function() {
  $(this).click(function() {
  $(this).appendTo('#teams');
  });
});

  $('#teams option').each(function() {
  $(this).click(function() {
  $(this).appendTo('#players');
  });
}); 
```

问题是当我点击已经附加的元素时，它只是不想移动到“原始”选择。如何解决？

演示：http: [//jsbin.com/ujugej/4/edit](http://jsbin.com/ujugej/4/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:08:03.823

它不起作用，因为您在开始时分配事件，在移动任何东西之前。相反，将事件分配给不会更改的父母，并将其委托给选项。[文档](http://api.jquery.com/on)

```
$('#players').on('click', 'option', function() {
  $(this).appendTo('#teams');
});

$('#teams').on('click', 'option', function() {
  $(this).appendTo('#players');
}); 
```

[JSBin](http://jsbin.com/ujugej/9/)

# qt5 - Qt5 - Linux 应用程序部署 - 可以动态使用依赖项吗？

> ID：15322531
> 
> 赞同：2
> 
> 时间：2013-03-10T13:05:05.043
> 
> 标签：qt5

我有一个尝试在其他 Linux 系统上部署的 Linux Qt 5 应用程序。我正在使用 VirtualBox 机器进行开发和测试（均为 32 位）。我的应用程序在开发人员机器上运行依赖项，但不在非开发人员测试机器（未安装 Qt 5）上运行。我有一个脚本，它识别使用 ldd 命令识别的依赖项。是否存在 ldd 命令未列出的依赖项？我正在尝试动态链接依赖项。那可能吗？还是我必须使用静态选项从源代码配置和构建？任何帮助，将不胜感激。谢谢。

这是我正在使用的脚本：

```
 #!/bin/sh

    if [ `getconf LONG_BIT` = "64" ]
    then
        LIBS=./data/libs_64
        BIN=./data/bin/Lottery_64
    else
        LIBS=./data/libs_32
        BIN=./data/bin/Lottery_32
    fi

    # Run your app
    export LD_LIBRARY_PATH=$LIBS:"$LD_LIBRARY_PATH"
    $BIN $@ 
```

依赖项位于 libs_32 中。我在二进制目录中有平台文件夹。我还需要其他插件吗？

这是我正在使用的依赖项：

```
linux-gate.so.1 
libQt5Widgets.so.5 
libQt5Gui.so.5 
libQt5Core.so.5
libstdc++.so.6 
libgcc_s.so.1 
libc.so.6 
libpthread.so.0 
libgobject-2.0.so.0 
libglib-2.0.so.0
libX11.so.6 
libm.so.6 
libGL.so.1 
libicui18n.so.49 
libicuuc.so.49 
libdl.so.2
libgthread-2.0.so.0 
librt.so.1 
/lib/ld-linux.so.2 
libffi.so.6 
libpcre.so.3 
libxcb.so.1 
libglapi.so.0 
libXext.so.6 
libXdamage.so.1 
libXfixes.so.3 
libX11-xcb.so.1
libxcb-glx.so.0 
libXxf86vm.so.1
libdrm.so.2 
libicudata.so.49 
libXau.so.6 
libXdmcp.so.6 
```

我缺少任何依赖项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:14:07.393

```
>Or do I have to configure and build from the source code with the static option? 
```

这就是我要走的路。您需要重新构建您的 QT 添加 -static t "configure" 并且您对部署没有那么多问题。顺便说一句：如果您想节省时间，请使用开关“-nomake demos -nomake examples”。

通过静态链接注意许可证的问题:(

# jquery - jQuery Validation 插件的 minlength 不起作用

> ID：15322535
> 
> 赞同：0
> 
> 时间：2013-03-10T13:05:40.877
> 
> 标签：jquery, jquery-validate

我必须根据条件使用最小长度。（我自己尝试过它也不起作用，无论如何）

“必需”规则没有问题。如果条件正常，我可以看到必需的消息，“必需”规则按预期工作，我也可以在控制台中看到“快乐的一天”。

但即使我可以在控制台中看到“最小长度 5”，它的行为就像表格是可以的。

我哪里错了？谢谢。

```
if($('form#form_validation_reg_generate_user').valid({

                                        rules: {

                                            'userPassword':{
                                                required:(function () {
                                                    if($('#userPassword').val().length >0 ) {
                                                        console.log('happy day');
                                                        return true;
                                                    }
                                                    else{
                                                        console.log('happy day false');
                                                        return false;
                                                    }
                                                    })(),
                                                minlength:(function () {
                                                    if($('#userPassword').val().length >0 ) {
                                                        console.log('min length 5');
                                                        return 5;

                                                    }
                                                    else{
                                                        console.log('min length 0');
                                                        return 0;
                                                    }
                                                    })()          

                                            }

                                        }

                                    })) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:17:16.423

你的代码全错了：

```
if ($('form#form_validation_reg_generate_user').valid({
    // your rules
})); 
```

您正在`.valid()`与`.validate()`. 你不应该在里面声明任何东西`.valid()`，你不能把`.validate()`里面的条件。

[`.validate()`被调用*一次*以初始化表单上的插件](http://docs.jquery.com/Plugins/Validation/validate#options)。它不是一种按需触发验证的方法。初始化后，表单将根据插件中内置的各种事件回调自动验证，例如`submit`, `onkeyup`,`onfocusout`和 select, button & checkbox `click`。

要以编程方式执行验证测试，您可以调用[内置`.valid()`方法](http://docs.jquery.com/Plugins/Validation/valid)，该方法非常类似于`submit`事件，因为它将触发*整个表单*的验证测试，并且表单将显示任何错误。 `.valid()`还将返回一个布尔值`true`或`false`指示表单是否通过了验证测试。在您的示例/案例中，您似乎不需要使用此方法。

* * *

您的规则代码不合逻辑：

```
required: (function () {
    if ($('#userPassword').val().length > 0) {
        return true;
    } else {
        return false;
    }
},
minlength: (function () {
    if ($('#userPassword').val().length > 0) {
        return 5;
    } else {
        return 0;
    }
} 
```

您的规则逻辑完全没有意义，这些功能会导致插件阻塞。`userPassword`第一条规则是说`required`只有`userPassword`包含某些东西。这在逻辑上与“可选”相同。您的第二条规则是说`minlength`of`userPassword`仅`5`当`userPassword`包含某些内容时……再次，这没有任何意义。如果该字段是可选的，那么您只需声明`minlength`并且默认情况下，它仅适用于该字段包含某些内容时。（您没有显示您的 HTML，所以我只假设它`userPassword`是同一字段的`name`和。）`id`

试试这个：

```
$(document).ready(function () {

    $('form#form_validation_reg_generate_user').validate({
        rules: {
            userPassword: {
                minlength: 5
            } 
        }, 
        submitHandler: function (form) { // for demo
            alert('valid form submission'); // for demo
            return false; //form demo
        }
    });

}); 
```

**演示：http: [//jsfiddle.net/7jLnu/](http://jsfiddle.net/7jLnu/)**

否则，如果您还想要该字段`required`：

```
rules: {
    userPassword: {
        required: true,
        minlength: 5
    } 
}, 
```

[http://jsfiddle.net/qZzZ6/](http://jsfiddle.net/qZzZ6/)

# r - R中的散点图包

> ID：15322537
> 
> 赞同：1
> 
> 时间：2013-03-10T13:05:49.443
> 
> 标签：r

我正在尝试使用`scatterplot`函数来绘制散点图。我已经加载了 和 之类的`ggplot2`包`scatterplot3d`。但是，我收到消息“ `Could not find function scatterplot`”。此外，当我使用 Rcommander 绘图时，我看到相同的命令，“ `scatterplot`”

我应该加载什么包？

**注意**我知道有使用 ggplot 的绘图或其他一些功能。我看到 Rcmdr 使用了 scatterplot 命令，它有一些特殊的东西，比如侧面的 boxplot 等等。这就是我想坚持使用它的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:12:21.570

您是否在寻找：

*   [散点图:::lessR](http://finzi.psych.upenn.edu/R/library/lessR/html/ScatterPlot.html)
*   [scatterplot.density:::aqfig](http://finzi.psych.upenn.edu/R/library/aqfig/html/scatterplot.density.html)
*   [散点图:::tis](http://finzi.psych.upenn.edu/R/library/tis/html/scatterPlot.html)
*   [rp.scatterplot:::rapport](http://finzi.psych.upenn.edu/R/library/rapport/html/rp.scatterplot.html)
*   [scatterPlot.HH:::RcmdrPlugin.HH](http://finzi.psych.upenn.edu/R/library/RcmdrPlugin.HH/html/scatterPlot.HH.html)

包`scatterplot3d`只有一个功能，称为`scatterplot3d()`...。

# javascript - jQuery Slidetoggle + 旋转

> ID：15322538
> 
> 赞同：2
> 
> 时间：2013-03-10T13:05:53.690
> 
> 标签：javascript, jquery, rotation, slidetoggle

嗨，我正在尝试这样当您单击一个课程时，它会滑动切换另一个课程并旋转您刚刚单击的课程。我的代码做了所有这些，但如果我再次点击它不会旋转回来。

```
/* Category Description Toggle */
$('.category-desc').css("display", "none");
$(".category-desc-toggle").addClass("close");

$(".category-desc-toggle").click(function() {
$('.category-desc').slideToggle(300);
if($('.category-desc-toggle').hasClass('close')){
$(this).transition({ rotate: '45deg' });
$('.category-desc-toggle').removeClass('close').addClass('open');
};
if($('.category-desc-toggle').hasClass('open')){
$(this).transition({ rotate: '0deg' });
$('.category-desc-toggle').removeClass('open').addClass('close');
}; 
```

});

我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:50:46.893

我认为您应该然后添加 -45deg 而不是 0deg ...而且，请确保该类未定位为静态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:51:17.343

在 HTML 文档的 .category-desc-toggle 中添加这个 onclick="count_click_desc=(count_click_desc+1)%2;"

```
$(".category-desc-toggle").click(function() {
$('.category-desc').slideToggle(300);
if(count_click_desc){
    $(this).transition({ rotate: '45deg' });
};
if(!count_click_desc){
    $(this).transition({ rotate: '-45deg' });
};
}); 
```

同样，它**应该可以**工作，我没有安装过渡插件并且懒得下载它......所以，我不确定它是否会工作......实际上，我之前没有正确阅读你的问题。 .如果解决了，请点击+1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:21:25.270

这应该工作

```
$(".category-desc-toggle").click(function() {
    $('.category-desc').slideToggle(300);
    $(this).transition({ rotate: '45deg' });
}); 
```

# java - string.format 自动填充我的双重我如何让它停止

> ID：15322540
> 
> 赞同：0
> 
> 时间：2013-03-10T13:06:01.320
> 
> 标签：java, double, string-formatting, padding

示例输入：

```
double a = 31.3131313131313131313131313131313131131313131313131313131313131;
String value1 = String.format("N= %1$39.32f", a);
System.out.println(value1); 
```

示例输出：N= 31.3131313131310000000000000...

为什么我的程序会在需要值时自动填充？我如何控制它，因为我希望调用这些值。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:12:37.013

这是双重精度的问题，看看这个：

```
public static void main(String[] args) {
    double a = 31.3131313131313131313131313131313131131313131313131313131313131;
    System.out.println(Double.toString(a));
} 
```

输出：

```
31.31313131313131 
```

java`double`数据类型不能保持这么高的精度。改用 a `BigDecimal`。

```
public static void main(String[] args) {
    BigDecimal a = new BigDecimal("31.3131313131313131313131313131313131131313131313131313131313131");
    System.out.println(a.toPlainString());
} 
```

输出：

```
31.3131313131313131313131313131313131131313131313131313131313131 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:09:44.560

因为 a`double`只能表示 53 位精度，也就是大约 16 位十进制精度。因此，您的变量`a`只需使用与您请求的值最接近的可表示值进行初始化。

如果您真的需要这种级别的精度，您应该考虑使用[`BigDecimal`](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html).

# java - 处女座“Greenpages”小零钱问题

> ID：15322541
> 
> 赞同：0
> 
> 时间：2013-03-10T13:06:02.680
> 
> 标签：java, osgi, eclipse-virgo

首先，我想说我是 Virgo 和 OSGi 的新手，所以请耐心等待 ;)

这是我的问题：我正在使用“greenpages”lastes 版本（[http://www.eclipse.org/virgo/documentation/greenpages-documentation-2.4.0.RELEASE/docs/htmlsingle/greenpages-guide.html](http://www.eclipse.org/virgo/documentation/greenpages-documentation-2.4.0.RELEASE/docs/htmlsingle/greenpages-guide.html)）示例项目，我想将对象传递形式从 jpa 子项目项目更改为 web 子项目。我的更改如下所示：

```
<osgi:service ref="directory" interface="greenpages.jpa.JpaDirectory"/> 
```

代替

```
<osgi:service ref="directory" interface="greenpages.Directory"/> 
```

在网络项目上下文中：

```
<osgi:reference id="directory" interface="greenpages.jpa.JpaDirectory" /> 
```

其中 Directory 是一个接口，而 JpaDirecotry 是实现，所以在我的网络控制器中，我想要这样的东西：

```
@Controller
public class GreenPagesController {

    @Autowired
    private JpaDirectory directory;
....

} 
```

我被迫将 JpaDirectory 类访问器从默认更改为“公共”。但我仍然收到错误：

[2013-03-10 13:51:59.047] 错误 start-signalling-11 org.springframework.web.context.ContextLoader 上下文初始化失败 org.springframework.beans.factory.BeanCreationException：创建名为“目录”的 bean 时出错：初始化bean 失败；嵌套异常是 org.springframework.beans.TypeMismatchException：无法将类型“java.lang.String”的属性值转换为属性“接口”所需的类型“java.lang.Class[]”；嵌套异常是 java.lang.IllegalArgumentException：找不到类 [greenpages.jpa.JpaDirectory]

并且不知道如何处理它。也许有人可以建议我如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:33:17.810

很可能您的捆绑包没有导入包`greenpages.jpa`。确保将`greenpages.jpa`其添加到`Import-Package`包的 MANIFEST.MF 的标头中。

# cmake - 在 CMake add_custom_command 中捕获返回值？

> ID：15322547
> 
> 赞同：10
> 
> 时间：2013-03-10T13:06:35.020
> 
> 标签：cmake

如何获取由调用的命令的返回值`add_custom_command`？

我以为我可以做这样的事情，

```
macro(mac param1)
    execute_process(COMMAND process ${param1} RESULT_VARIABLE res_var)
    if(${res_var} ....

endmacro(mac)

add_custom_command(COMMAND mac(param1)) 
```

但这行不通。我发现即使是平原

```
macro(mac)
endmacro()

add_custom_command(COMMAND mac()) 
```

不起作用。在构建时，sh 抱怨：

```
/bin/sh: 1: Syntax error: end of file unexpected 
```

或者，如果我不使用宏但`execute_process`自己调用`add_custom_command`：

```
/bin/sh: 1: Syntax error: word unexpected (expecting ")") 
```

我猜这`add_custom_command`不希望传递宏或内置函数。但是，如何从 in 中的命令获取返回值`add_custom_command`？或者，不太具体，我怎样才能发现命令`add_custom_command`失败？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-10T14:48:48.850

add_custom_command 运行的命令在构建时间之前不会运行，因此您无法“捕捉”它们在 CMake 的配置/生成步骤期间失败。

如果自定义命令失败，那么依赖于该自定义命令输出的任何事情都将被避免，因为 make 在那之后停止，或者如果 make 继续跟踪错误，它最终将在其结束时返回错误，并给出某种排序“构建失败”消息。

您始终可以编写一个作为自定义命令运行的等效脚本，然后在该脚本中，在某些类型的错误之后执行某些操作。如果在-P脚本处理模式下使用cmake，可以制作一个跨平台的脚本，调用execute_process并分析返回值。

例如：

```
configure_file(
  ${CMAKE_CURRENT_SOURCE_DIR}/script.cmake.in
  ${CMAKE_CURRENT_BINARY_DIR}/script.cmake
  COPYONLY
)
add_custom_command(COMMAND ${CMAKE_COMMAND} -P
  ${CMAKE_CURRENT_BINARY_DIR}/script.cmake
) 
```

然后在 script.cmake.in 中：

```
execute_process(COMMAND process param1 RESULT_VARIABLE res_var)
if(NOT "${res_var}" STREQUAL "0")
  # do something here about the failed "process" call...
  message(FATAL_ERROR "process failed res_var='${res_var}'")
endif() 
```

# php - mysqli 标志字段（工作代码）

> ID：15322548
> 
> 赞同：0
> 
> 时间：2013-03-10T13:06:41.323
> 
> 标签：php, mysql, mysqli

这是来自[What do bit flags in mysqli mean using fetch_field_direct](https://stackoverflow.com/questions/11437650/what-do-bit-flags-in-mysqli-mean-using-fetch-field-direct)的后续帖子。下面是一个脚本示例，该脚本将通过添加 ?tablename= 来处理 url 中指定的数据库中的表 用户将鼠标悬停在表标题上时显示的字段代码不反映表中字段的属性（这些代码来自[http://www.php.net/manual/en/mysqli-result.fetch-fields.php#101828](http://www.php.net/manual/en/mysqli-result.fetch-fields.php#101828)中的建议）。字段标志输出不描述表中的字段。字段标志的正确含义是什么？

```
<?php
/*----- Store username, password and name of database in variables
        Log in to database using mysqli */
    $user="username";
    $pass="password";
    $dbname="databaseName";

    $mysqli = new mysqli("localhost", "$user", "$pass", "$dbname");

if ($mysqli->connect_errno) {
    printf("Connect failed: %s\n", $mysqli->connect_error);
    exit();
}

/*----- Gets the table name from the URI 
        If no table is selected, choose a default table. */
if (isset($_GET['tablename'])){ 
    $tablename = $_GET['tablename'];
}
else {
    $tablename = "defaultTable";
}
$query="SELECT * FROM ".$tablename;
/*----- Query additions */
if (isset($_GET['id'])){    
    $id=$_GET['id'];
    $query.=" WHERE ".$tablename."_id=".$id;
}

if ($query != "") {
$result = $mysqli->query($query);

    //First, find the number of fields returned in the query and set fieldCount to 0
    $numFields=$result->field_count;
    $numRows=$result->num_rows;
    $fieldCount=0;

    //If the number of rows or the number of fields equals zero, add an error message

    $errorText = "";
    if ($numFields == "0") {
        $errorText .= "No fields in this table.";
    }
    if ($numRows == "0") {
        $errorText .= "Query did not return any results.";
    }

    //Next, store the field names in an array
    do{
        $field[$fieldCount] = mysqli_fetch_field_direct($result, $fieldCount);
        $fieldname[]=$field[$fieldCount]->name;
        $fieldlength[]=$field[$fieldCount]->length;
        $fieldflags[]=$field[$fieldCount]->flags;
        $fieldCount++;
    }
    while ($numFields>$fieldCount);

    while($row = $result->fetch_array(MYSQLI_BOTH))
    {
        $rows[] = $row;
    }
}

        ?> 
        <table >
            <thead>
            <?php
                $fieldCount=0;
                while ($fieldCount<$numFields)
                {
                    $flag = decbin($fieldflags[$fieldCount]);
                    /* str_pad(string, length of desired string, what to pad with, 0 for right or 1 for left or 2 for both) */
                    $flag = str_pad($flag,'19','0','0');
                    echo "<th title=\"";
                    echo $flag ."\n";
                    if ($flag[0] == "1" ) {echo "NOT NULL \n";}
                    if ($flag[1] == "1" ) {echo "PRIMARY KEY \n";}
                    if ($flag[2] == "1" ) {echo "UNIQUE KEY \n";}
                    if ($flag[3] == "1" ) {echo "MULTIPLE KEY \n";}
                    if ($flag[4] == "1" ) {echo "BLOB \n";}
                    if ($flag[5] == "1" ) {echo "UNSIGNED \n";}
                    if ($flag[6] == "1" ) {echo "ZEROFILL \n";}
                    if ($flag[7] == "1" ) {echo "BINARY \n";}
                    if ($flag[8] == "1" ) {echo "ENUM \n";}
                    if ($flag[9] == "1" ) {echo "AUTO INCREMENT \n";}
                    if ($flag[10] == "1" ) {echo "TIMESTAMP \n";}
                    if ($flag[11] == "1" ) {echo "SET \n";}
                    if ($flag[12] == "1" ) {echo " \n";}
                    if ($flag[13] == "1" ) {echo " \n";}
                    if ($flag[14] == "1" ) {echo "PART KEY \n";}
                    if ($flag[15] == "1" ) {echo "GROUP FLAG \n";}
                    if ($flag[16] == "1" ) {echo "NUM FLAG     \n";}
                    if ($flag[17] == "1" ) {echo "UNIQUE FLAG    \n";}
                    if ($flag[18] == "1" ) {echo " \n";}

                    echo "\">".ucfirst(str_replace($tablename."_","",$fieldname[$fieldCount])) ."</th>";
                    $fieldCount++;
                }
            ?>
            <td></td>
            </thead>
            <tbody>
<?php
            $rowCounter = 0;
            $fieldCount=0;
            while($rowCounter < $numRows){
                echo "

                <form name=\"update-".$rows[$rowCounter][0]."\"
                      id=\"update-".$rows[$rowCounter][0]."\"
                      method=\"post\" >
                <tr id=\"update-".$rows[$rowCounter][0]."\">
                ";

                while($fieldCount < $numFields){
                    echo"
                        <td><input size=\"$fieldlength[$fieldCount]\" maxlength=\"$fieldlength[$fieldCount]\" value=\"".$rows[$rowCounter][$fieldCount]."\" /></td>
                    ";
                    $fieldCount++;
                }
                $fieldCount=0;
                echo"
                <td>
                <a href=\"thispage.php?tablename=".$tablename."&id=".$rows[$rowCounter][0]."\" >view</a>
                </td>
                </tr>
                </form>";
                $rowCounter++;
            }
            $rowCounter=0;
    echo "<tbody>
        </table>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:10:11.803

这些标志在 MySQL 手册的[C API 数据结构](http://dev.mysql.com/doc/refman/5.5/en/c-api-data-structures.html)章节中进行了简要说明：

```
Flag Value             Flag Description
NOT_NULL_FLAG          Field can't be NULL
PRI_KEY_FLAG           Field is part of a primary key
UNIQUE_KEY_FLAG        Field is part of a unique key
MULTIPLE_KEY_FLAG      Field is part of a nonunique key
UNSIGNED_FLAG          Field has the UNSIGNED attribute
ZEROFILL_FLAG          Field has the ZEROFILL attribute
BINARY_FLAG            Field has the BINARY attribute
AUTO_INCREMENT_FLAG    Field has the AUTO_INCREMENT attribute
ENUM_FLAG              Field is an ENUM (deprecated)
SET_FLAG               Field is a SET (deprecated)
BLOB_FLAG              Field is a BLOB or TEXT (deprecated)
TIMESTAMP_FLAG         Field is a TIMESTAMP (deprecated)
NUM_FLAG               Field is numeric; see additional notes following table
NO_DEFAULT_VALUE_FLAG  Field has no default value; see additional notes following table 
```

它们链接到等效的 PHP 常量，如 Mysqli 手册的[预定义常量](http://php.net/manual/en/mysqli.constants.php)部分所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T02:06:07.397

我知道这是古老的，但这可能对其他人有所帮助。我认为问题在于 $flag 数组中的索引是以相反的顺序读取的——它们应该从 18 运行到 0 以获得正确的结果。或者描述符应该倒置。

# java - 将 Java 程序添加到 Windows 资源管理器

> ID：15322551
> 
> 赞同：-5
> 
> 时间：2013-03-10T13:07:24.367
> 
> 标签：java, winapi

我有一个将文件从一个位置复制到另一个位置的 java 程序，我增强了复制的一般方式，例如能够同时复制多个文件，这意味着当用户按下粘贴时，他将获得一个文件列表粘贴，因为仅仅为了复制用户可能不想运行我的 jar 文件。所以我希望我的 Jar 文件在用户右键单击文件（Windows 资源管理器）时运行。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:34:02.813

我找到了答案。选择 c 或 c++。Java 不能直接与硬件/操作系统交互，也不能处理不是从 Java 组件内触发的事件。

# javascript - 如何删除 D3.js 中的属性？

> ID：15322556
> 
> 赞同：72
> 
> 时间：2013-03-10T13:08:29.233
> 
> 标签：javascript, dom, attributes, d3.js

我可以在 D3.JS 中删除属性吗？我已经使用它添加了它`.attr("disabled", "disabled")`，现在我正在寻找类似于 jQuery 的东西来`.removeAttr("disabled", "disabled");`再次删除它。`<button>`对和有用`<option>`。我试过使用`.remove()`但是删除整个对象而不是属性。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-03-10T13:15:25.950

来自[API 文档`attr`](https://github.com/d3/d3-selection#selection_attr)

> 空值将删除指定的属性

所以它看起来像你想要`.attr('disabled', null)`的。

# cuda - Cuda 单线程范围变量

> ID：15322561
> 
> 赞同：0
> 
> 时间：2013-03-10T13:09:01.143
> 
> 标签：cuda, register-allocation

是否可以让 cuda 使用在函数外部声明的单线程范围变量（寄存器或本地内存）？

我的大多数设备功能都需要使用相同的变量。

我不想将相同的变量作为参数传递给我的所有设备函数，而是在函数之外声明变量。

那可能吗？

我的计算能力是1.2。

编辑：一个例子：

```
__device__ __local__ int id;
__device__ __local__ int variable1 = 3;
__device__ __local__ int variable2 = 5;
__device__ __local__ int variable3 = 8;
__device__ __local__ int variable4 = 8;

//
__device__ int deviceFunction3() {
  variable1 += 8;
  variable4 += 7;
  variable2 += 1;
  variable3 += id;

  return variable1 + variable2 + variable3;
}

__device__ int deviceFunction2() {
  variable3 += 8; 
  variable1 += deviceFunction3();
  variable4 += deviceFunction3();

  return variable3 + variable4;
}

__device__ int deviceFunction1() {
  variable1 += id;
  variable4 += 2;
  variable2 += deviceFunction2();
  variable3 += variable2 + variable4;
  return variable1 + variable2 + variable3 + variable4;
}

// Kernel
__global__ void kernel(int *dev_a, int *dev_b, int *dev_c) {
  id = get_id();

  dev_c[id] = deviceFunction1();
} 
```

3 个设备函数需要操作相同的变量。每个变量都是针对每个线程独立计算的。据我了解，我不能使用上面的代码，因为我不能声明变量以便它们对每个线程都是本地的。

我必须做的是在内核函数中声明所有变量，然后将指向变量的指针传递给所有其他函数：

```
__device__ int deviceFunction3(int* id,int* variable1,int* variable2,int* variable3,int* variable4) {
  *variable1 += 8;
  *variable4 += 7;
  *variable2 += 1;
  *variable3 += 2;

  return *variable1 + *variable2 + *variable3;
}

__device__ int deviceFunction2(int* id,int* variable1,int* variable2,int* variable3,int* variable4) {
  *variable3 += 8; 
  *variable1 += deviceFunction3(id,variable1,variable2,variable3,variable4);
  *variable4 += deviceFunction3(id,variable1,variable2,variable3,variable4);

  return *variable3 + *variable4;
}

__device__ int deviceFunction1(int* id,int* variable1,int* variable2,int* variable3,int* variable4) {
  *variable1 += *id;
  *variable4 += 2;
  *variable2 += deviceFunction2(id,variable1,variable2,variable3,variable4);
  *variable3 += *variable2 + *variable4;
  return *variable1 + *variable2 + *variable3 + *variable4;
}

// Kernel
__global__ void kernel(int *dev_a, int *dev_b, int *dev_c) {
  int id = get_id();
  int variable1 = 3;
  int variable2 = 5;
  int variable3 = 8;
  int variable4 = 8;

  dev_c[id] = deviceFunction1(&id,&variable1,&variable2,&variable3,&variable4);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:04:11.450

您的用例是一个非常糟糕的想法，我不会向我最大的敌人推荐这种设计模式。暂时不考虑代码的优点，正如我在评论中暗示的那样，您可以通过将它们所依赖的 __device__ 函数和变量封装在一个结构中来实现所需的线程局部变量范围，如下所示：

```
struct folly
{
    int id;
    int variable1;
    int variable2;
    int variable3;
    int variable4;

    __device__ folly(int _id) {
        id = _id;
        variable1 = 3;
        variable2 = 5;
        variable3 = 8;
        variable4 = 8;
    }

    __device__ int deviceFunction3() {
        variable1 += 8;
        variable4 += 7;
        variable2 += 1;
        variable3 += id;

        return variable1 + variable2 + variable3;
    }

    __device__ int deviceFunction2() {
        variable3 += 8; 
        variable1 += deviceFunction3();
        variable4 += deviceFunction3();

        return variable3 + variable4;
    }

    __device__ int deviceFunction1() {
        variable1 += id;
        variable4 += 2;
        variable2 += deviceFunction2();
        variable3 += variable2 + variable4;
        return variable1 + variable2 + variable3 + variable4;
    }
};

__global__ void kernel(int *dev_a, int *dev_b, int *dev_c) {
    int id = threadIdx.x + blockIdx.x * blockDim.x;
    folly do_calc(id);
    dev_c[id] = do_calc.deviceFunction1();
} 
```

另请注意，CUDA 支持 C++ 样式的引用传递，因此您在发布的第二段代码中编写的任何一个设备函数都可以轻松地编写如下：

```
__device__ int deviceFunction3(int & variable1, int & variable2, 
                               int & variable3, int & variable4) 
{
  variable1 += 8;
  variable4 += 7;
  variable2 += 1;
  variable3 += 2;

  return variable1 + variable2 + variable3;
} 
```

这更清洁，更容易阅读。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T22:31:42.827

我只是想补充一点，我已经得出结论，这是不可能的。我发现这是 CUDA C 的一个主要设计问题。

我`__local__`在一些幻灯片中看到了一个关键字，但我找不到任何文档，nvcc 也无法识别它。

我猜所有应该只有单个线程范围的变量必须只在函数内部声明。

# java - 如何将 DBUtils 结果集转换为由更多域对象组合而成的 JavaBeans？

> ID：15322567
> 
> 赞同：2
> 
> 时间：2013-03-10T13:09:34.317
> 
> 标签：java, spring, javabeans, apache-commons-dbutils

我正在 Spring Framework 中创建 MVC Web 应用程序，我需要将 Apache DBUtils 结果集中的行转换为由嵌套对象组成的 JavaBeans。

关于我发现的极少数示例，我创建了这个 RowProcessor 实现。

```
public class MonthOrderCountHandler extends BasicRowProcessor {

    @Override
    public Object toBean(ResultSet rs, Class type) throws SQLException {

        // Year
        Year year = new Year();
        year.setYearNo(rs.getInt("yearNo"));
        year.setYear4(rs.getString("year4"));
        year.setYear2(rs.getString("year2"));

        // Quarter
        Quarter quarter = new Quarter();
        quarter.setQuarter(rs.getInt("quarter"));

        // Month
        Month m = new Month();
        m.setYear(year);
        m.setQuarter(quarter);
        m.setMonthAbbreviation(rs.getString("monthAbbreviation"));
        m.setMonthName(rs.getString("monthName"));
        m.setMonthNo(rs.getInt("monthNo"));

        // Final bean
        MonthOrderCount result = new MonthOrderCount();
        result.setMonth(m);
        result.setOrderCount(rs.getInt("orderCount"));

        return result;

    }
} 
```

**问题：**我想知道如何在我的 DAO 对象中使用这个行处理器，以及这个实现是否正确？

* * *

通常我以这种方式将行转换为 JavaBean：

```
ResultSetHandler<List<MonthOrderCount>> listUrlHandler = new BeanListHandler<>(MonthOrderCount.class); 
```

但在我的情况下，首先需要创建嵌套对象，然后创建最终的 JavaBean，所以我假设我需要自定义行处理器。

* * *

我的域对象的结构是：

MonthOrderCount 类：

```
public class MonthOrderCount {    
    private Month month;
    private int orderCount;
} 
```

月班：

```
public class Month {
    private Quarter quarter;
    private Year year;
    private int monthNo;
    private String monthName;
    private String monthAbbreviation;
} 
```

四分之一班：

```
public class Quarter {
    private int quarter;
    private String abbreviation;
} 
```

年级：

```
public class Year {
    private int yearNo;
    private String year2;
    private String year4;
} 
```

**编辑：**我问是因为我的结果看起来像这样。orderCount 变量已正确填充，但月份在所有情况下都为空。对我来说最奇怪的是 - toBean() 方法永远不会被调用。

> 2013-03-10 17:09:46 INFO ChartDataService:29 - [MonthOrderCount{month=null, orderCount=1863}, MonthOrderCount{month=null, orderCount=2262}, MonthOrderCount{month=null, orderCount=2531}, MonthOrderCount {month=null, orderCount=2379}, MonthOrderCount{month=null, orderCount=2106}, MonthOrderCount{month=null, orderCount=1498}, MonthOrderCount{month=null, orderCount=1300}, MonthOrderCount{month=null, orderCount =1578}, MonthOrderCount{month=null, orderCount=2385}, MonthOrderCount{month=null, orderCount=2991}, MonthOrderCount{month=null, orderCount=2219}, MonthOrderCount{month=null, orderCount=1943}, MonthOrderCount{月=空，订单计数=264}]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:04:59.980

如果要将结果集转换为 JavaBean 列表，则需要覆盖 toBeanList() 而不是 toBean() 方法。

最终处理程序类覆盖 BasicRowProcessor 如下所示：

```
public class MonthOrderCountHandler extends BasicRowProcessor {

    @Override
    public List toBeanList(ResultSet rs, Class clazz) {
        try {
            List newlist = new LinkedList();
            while (rs.next()) {
                newlist.add(toBean(rs, clazz));
            }
            return newlist;
        } catch (SQLException ex) {
            throw new RuntimeException(ex);
        }
    }

    @Override
    public Object toBean(ResultSet rs, Class type) throws SQLException {

        // Year
        Year year = new Year();
        year.setYearNo(rs.getInt("yearNo"));
        year.setYear4(rs.getString("year4"));
        year.setYear2(rs.getString("year2"));

        // Quarter
        Quarter quarter = new Quarter();
        quarter.setQuarterNo(rs.getInt("quarterNo"));

        // Month
        Month m = new Month();
        m.setYear(year);
        m.setQuarter(quarter);
        m.setMonthAbbreviation(rs.getString("monthAbbreviation"));
        m.setMonthName(rs.getString("monthName"));
        m.setMonthNo(rs.getInt("monthNo"));

        // Final bean
        MonthOrderCount result = new MonthOrderCount();
        result.setMonth(m);
        result.setOrderCount(rs.getInt("orderCount"));

        return result;

    }
} 
```

我希望它可以帮助某人。

# c++ - cout 腐败字符*

> ID：15322572
> 
> 赞同：-8
> 
> 时间：2013-03-10T13:10:10.097
> 
> 标签：c++, char, garbage

我编写了一个代码来打印 2 个工人的姓名，但它打印的是垃圾。

```
cout << "highest salary: " << highestSalary.getID() << " " << highestSalary.getName() << endl;

cout << "hardest worker: " << mostHours.getID() << " " << mostHours.getName(); 
```

函数 getName() 在工作类中定义为：

```
char* Worker::getName()
{
    char temp[20];

    int i;
    strcpy(temp, name);

    return temp;
} 
```

在调试器上通过这个我尝试将highestSalary.getName（）的值放在ver char * temp中，该值是我预期的，比如说“bob”，但在cout之后，值是“”和cout印刷垃圾。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T13:11:19.527

NO NO NO，您正在返回一个指向局部函数变量的指针。这就是它崩溃的原因。

改为这样做：

```
std::string Worker::getName()
{
   std::string temp(name); // not sure what type of name is...
   return temp;
} 
```

别忘了`#include<string>`。

现在你有了真正的 C++，而不是 C 和指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:14:38.250

您正在传递一个指向局部变量的指针。一旦你的函数结束，这个变量就消失了。

如果这是 C++，你应该使用 string 类。如果出于某种原因你不这样做，至少是[const 正确的](http://en.wikipedia.org/wiki/Const-correctness)：

```
const char* Worker::getName() const 
{
    return name;
} 
```

# asp.net - 如何每次回发到asp.net页面而不是第一次触发js？

> ID：15322578
> 
> 赞同：1
> 
> 时间：2013-03-10T13:10:38.287
> 
> 标签：asp.net, postback, browser-cache

我有一个 js 函数，它将在页面初始化时自动执行。这个js在第一次打开页面时会被完美调用执行，但是当我回发（点击asp.net页面上的链接）页面时，它不会被调用并且功能被破坏。

这是我在 Default.aspx 中的 js 函数：

```
<script type="text/javascript">
        function HightLightKeywords() {
            var container = document.getElementById("result");
            var keywords = new Array();
            <%  
                // This is C# code runs in server side.
                for (int i = 0; i < keywords.Count; i++)
                {
                    Response.Write(string.Format("keywords['{0}'] = '{1}';", i, keywords[i]));
                }
            %>
            for (var i = 0; i < keywords.length; i++)
            {
                var a = new RegExp(keywords[i], "igm");
                container.innerHTML = container.innerHTML.replace(a, "<span style='background:#FF0;'>" + keywords[i] + "</span>");
            }
        }
        HightLightKeywords();
    </script> 
```

它只在第一次进入 Default.aspx 时执行一次，在我单击页面上的按钮后它不会触发两次（回发）。

这与客户端缓存有关吗？有没有办法（通过设置一些属性？）在回发时防止客户端缓存？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:36:15.783

请注意，`<%= ... %>`块中的代码仅在整页重新加载时执行。你需要的是更新数组并在每个部分回发时`keywords`重新调用函数并控制。检查以下代码：`hHightLightKeywords``ScriptManager`

```
 <script type="text/javascript">
      function hHightLightKeywords() {
           var container = document.getElementById("result");
           for (var i = 0; i < keywords.length; i++) {
                var a = new RegExp(keywords[i], "igm");
                container.innerHTML = container.innerHTML.replace(a, "<span style='background:#FF0;'>" + keywords[i] + "</span>");
           }
      }
 </script>

 <asp:UpdatePanel runat="server">
      <ContentTemplate>
           <asp:TextBox runat="server" ID="KeywordsTextBox" Text="cras turpis et" />
           <asp:Button runat="server" Text="Click Me" />
      </ContentTemplate>
 </asp:UpdatePanel>
 <p id="result">
      Et ac tincidunt nisi pid vel? Nunc turpis risus duis porta cursus cum augue, nisi,
      scelerisque turpis aliquam. Scelerisque tristique pid, elementum augue sociis augue
      cras mauris lundium nisi rhoncus diam cras parturient nec, velit odio, et turpis
      risus porttitor aliquam facilisis, ut duis augue porta magnis velit velit, augue
      vut sed facilisis dignissim, arcu, cras! Ultrices adipiscing? Est eros ac augue
      turpis integer mus massa! Est nisi auctor sagittis augue sit? Tortor tristique elementum,
      adipiscing. Nec platea ac natoque facilisis, porta tincidunt magna lorem augue tincidunt
      turpis, scelerisque adipiscing elementum scelerisque. Risus'vel ac augue lorem odio!
      Cursus ultrices et elementum egestas dapibus proin arcu velit augue?
 </p> 
```

代码隐藏：

```
protected IEnumerable<string> Keywords
{
    get
    {
        return KeywordsTextBox.Text.Split(' ').Where(kw => !string.IsNullOrEmpty(kw)).Select(kw => "'" + kw.Trim().Replace("'", @"\'") + "'");
    }
}

protected void Page_PreRender(object sender, EventArgs e)
{
    ScriptManager.RegisterArrayDeclaration(this, "keywords", string.Join(",", Keywords));
    ScriptManager.RegisterStartupScript(this, this.GetType(), "hHightLightKeywords", "hHightLightKeywords()", true);
} 
```

# ruby-on-rails - ActionMailer::Base::NullMail 在开发中尝试 exception_notification 时

> ID：15322579
> 
> 赞同：7
> 
> 时间：2013-03-10T13:10:39.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3, exception-notification, exception-notifier

我想将 exception_notification gem 添加到我们的应用程序中，但是，当我尝试手动触发邮件时会发生这种情况：

```
exception
# => #<ZeroDivisionError: divided by 0>
ExceptionNotifier::Notifier.exception_notification(request.env, exception)
# => #<ActionMailer::Base::NullMail:0x007fa81bc7c610>
ExceptionNotifier::Notifier.background_exception_notification(exception)
# => #<ActionMailer::Base::NullMail:0x007fa81bf58190> 
```

在上面的示例中，控制台在某个控制器中`rescue_from Exception`经过深思熟虑后位于 ApplicationController内部的断点处。`1/0`

我也在使用delayed_job，但是 - 毫不奇怪 -`ExceptionNotifier::Notifier.background_exception_notification(exception).deliver`不会假脱任何东西。

我已经`config.consider_all_requests_local = false`在开发中设置了，但仍然 exception_notification 实例化 NullMail。在应用程序的其他部分，邮件程序可以正常工作并使用`sendmail`.

有什么想法我在这里做错了吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T14:23:25.647

您可能正在使用旧版本的 ExceptionNotifier 和新版本的 ActiveMailer::Base。不在电子邮件功能中调用 mail 命令将导致返回 ActionMailer::Base::NullMail 实例而不是 Mail 实例。

从[文档](http://apidock.com/rails/ActionMailer/Base)：

```
class Notifier < ActionMailer::Base
  default :from => 'no-reply@example.com',
         :return_path => 'system@example.com'

  def welcome(recipient)
    @account = recipient
    mail(:to => recipient.email_address_with_name,
         :bcc => ["bcc@example.com", "Order Watcher <watcher@example.com>"])
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-17T16:08:29.623

我有我的测试/ rspec 返回 NullMail 对象。解决方案很简单，我的代码是：

```
def my_mail(foo)
   mail(
     to: to,
     from: from,
     subject: @sample_item.campaign_market.campaign.translation_for(language_id, 'sample_item_mailer.request_review.subject'),
     content_type: "text/html"
   )
   @sample_item.update_attributes!({feedback_requested: true, review_requested_at: Time.now})
   TrackingService::Event.new(@user, @user.market, 'sample_items', "request_review_email #{@sample_item.id}").call()
end 
```

ruby 文档中没有立即明确的是您需要返回邮件功能，而不仅仅是执行它。如果您在构建邮件对象后需要做某事，请确保在最后返回邮件。像这样：

```
def my_mail(foo)
   m = mail(
     to: to,
     from: from,
     subject: @sample_item.campaign_market.campaign.translation_for(language_id, 'sample_item_mailer.request_review.subject'),
     content_type: "text/html"
   )
   @sample_item.update_attributes!({feedback_requested: true, review_requested_at: Time.now})
   TrackingService::Event.new(@user, @user.market, 'sample_items', "request_review_email #{@sample_item.id}").call()
   return m
end 
```

# java - 在 Java 中创建临时文件时如何删除 ip 和其他数值

> ID：15322581
> 
> 赞同：0
> 
> 时间：2013-03-10T13:10:52.437
> 
> 标签：java, regex

我得到一个`name`如下所示的文件名。我想删除最终的 ip 和另一个数值以最终获得真实的文件名。有没有比使用正则表达式更好的方法来实现这一点？也许其他一些技术？请帮助我知道这一点。

```
 String name = "pdf_of_filename_127.10.10.0_8726347.xls";

        System.out.println("Initial File Name :"+name);

        String [] t = name.split("_");
        String finalpart = t[t.length - 1];
        String extension = finalpart.substring(finalpart.lastIndexOf("."),finalpart.length());

        String finalName = "";

        for(int i = 0;i < t.length - 2;i++)
            finalName += t[i]+"_";
        finalName = finalName.substring(0,finalName.length() - 1);

        System.out.println("Final File Name :"+finalName+extension); 
```

**输出：**

```
Initial File Name :pdf_of_filename_127.10.10.0_8726347.xls

Final File Name :pdf_of_filename.xls 
```

**如需更多了解：**

```
String name = "pdf_of_filename_53613785621.183761237_127.10.10.0_8726347.xls";

output Expected:
Final File Name :pdf_of_filename_53613785621.183761237.xls 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:17:24.440

这会起作用：

```
String name = "pdf_of_filename_53613785621.183761237_127.10.10.0_8726347.xls";
String finalName = name.replaceAll("_(\\d+\\.){3}[\\d_]+","");
System.out.println("finalName = " + finalName); 
```

它删除了一个看起来像这样的子字符串：

```
_             an underscore
(\\d+\\.){3}  followed by 3 times a digit and a period (127.10.10.)
[\\d_]+       then some digits and underscores (0_876347) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T13:18:00.170

怎么样

```
name = name.replaceAll("_[\\d._]+\\.","."); 
```

**编辑有问题的新要求**

尝试：

```
name = name.replaceAll("_\\d{1,3}\.[\\d._]+\\.","."); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T13:27:00.297

用于验证以 IP 结尾的文件名、任意位数和 3 到 4 个字母长的文件扩展名的安全正则表达式：

```
^(.*)_[12]?\d{1,2}\.[12]?\d{1,2}\.[12]?\d{1,2}\.[12]?\d{1,2}_\d+\.([a-z]{3,4})$ 
```

替换为：`\1.\2`
解释演示：[http ://regex101.com/r/tE3iB8](http://regex101.com/r/tE3iB8)

更短：`^(.*)_([12]?\d{1,2}\.){3}[12]?\d{1,2}_\d+\.([a-z]{3,4})$`
替换为：`\1.\3`
解释演示：[http ://regex101.com/r/rM6mD8](http://regex101.com/r/rM6mD8)

# c++ - 长期未签名的建筑是否长期被允许？

> ID：15322584
> 
> 赞同：0
> 
> 时间：2013-03-10T13:11:30.243
> 
> 标签：c++, types, casting

`unsigned long long`是否允许施工？有什么类似的`unsigned long double`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T13:13:03.457

`unsigned long long`很好。（从技术上讲，它从 C99 开始就已经存在，但只是从 C++11 开始，但每个主要的 C++ 编译器已经实现它很长时间了。）

没有这样的事情`unsigned long double`。浮点类型（至少是我能想到的任何语言中可用的，当然还有那些由 IEEE754 和 C 标准描述的）总是有符号的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T13:14:39.467

是的，`unsigned long long`是允许的，因为它声明了一个`long long`也是`unsigned`. `unsigned`关键字可以应用于任何整数类型，并且确实`long long`是整数类型。

没有`unsigned long double`因为`long double`是浮点类型（与整数类型相反），也没有无符号浮点类型（[参考 1](https://stackoverflow.com/questions/512022/why-doesnt-c-have-unsigned-floats)，[参考 2](https://stackoverflow.com/questions/3589663/why-no-unsigned-floating-point-types)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:15:20.467

根据[这个](http://en.cppreference.com/w/cpp/language/types)here，有一个`unsigned long long`但仅在`C++ 11`. 关于`unsigned long double`我不确定。
查看参考，

# javascript - javascript中的可选前瞻

> ID：15322589
> 
> 赞同：-1
> 
> 时间：2013-03-10T13:11:53.380
> 
> 标签：javascript, regex

我试图为用户输入构建一个正则表达式。我基于用户输入构建表单。让我们假设用户将 css 属性分配给“Icon-[anything]”（引导图标）。现在在这种情况下，我必须确保“--”不会重复多次，并且还应确保“icon-white”应该是唯一分配在另一个类旁边的类；这个“icon-white”也必须是可选的。

```
/^icon-[az-]+(\icon-white)?$/
```

- 此正则表达式适用于可选图标白色场景，但在避免重复“--”方面存在一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:23:29.020

如果你想匹配“icon-somevalue”而不是“icon-white”试试

```
icon-(?!white).* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:18:41.350

如果我理解正确（虽然我不确定我是否理解，对不起......）我认为您是说允许以下两种情况：

1.  `icon-white`
2.  `icon-[anything]`where`[anything]`可以是任何小写文本并包含一个连字符，但绝不是两个（或更多）连字符直接相邻，例如`--`.

尽管您的原始正则表达式表明此模式将锚定在测试字符串的开头，但您尚未*说明*此模式可能出现的位置，因此我假设是这种情况。在这种情况下，这个正则表达式应该有帮助：

**`^icon-white$|^icon-([a-z]+-?)+$`**

打破它：

1.  `^icon-white$`匹配包含*完全*“icon-white”的文字字符串
2.  `|`或者
3.  `^icon-([a-z]+-?)+$`匹配以"icon-"*开头并**立即以*"something" 结尾的文字字符串，即`([a-z]+-?)+`.

现在，要清楚 - 我不明白 and 之间的`icon-white`关系`icon-[something]`。也就是说，据我所知，上面 3 的模式也没有理由`icon-[something]`不能覆盖“icon-white”文字。即上面的1和2是多余的。但是我把它们包括在这里，这样你就可以把更合适的东西拼凑在一起。

将“某物”从 3 分解：

1.  `( )+`表示括号内的任何内容的一个或多个实例，即`[a-z]+-?`

打破它`[a-z]+-?`：

1.  `[a-z]+`至少一个字符“a”到“z”（注意此处不允许使用连字符以避免在前一个字符之后立即出现额外的连字符）
2.  `-?` 一个可选的连字符（即正好是 0 或 1 个连字符）

* * *

这匹配以下测试用例：

1.  图标-白色
2.  图标-x
3.  图标-xx
4.  图标-x-
5.  图标-xx-
6.  图标-xx
7.  图标-xx-x
8.  图标-xx-xx
9.  图标-xxx-
10.  图标-x-xx-xx-x-xxxxx- ...等等

这与以下测试用例不匹配：

1.  任何使用大写字母的情况（您只指定了小写字母）
2.  icon- （因为我们需要*一个或多个*字符来表示“某物”。
3.  图标 -
4.  图标--x
5.  图标-x--

* * *

我希望这能满足您的需求，但我怀疑它确实如此（因为我并不真正理解您的解释“确保“icon-white”应该是唯一分配在另一个类旁边的类”），但希望我的细分能给你您需要的部分。

* * *

**编辑：**

我想也许你说允许的场景是：

1.  图标-[某物]
2.  图标-[某物]图标-白色
3.  图标-白色图标-[某物]

其中 [something] 是小写文本和连字符的任意组合，只要不存在双连字符，并且不是“白色”即可。

所以...这定义了 "icon-[something]" ：`icon-(?!white$)([a-z]+-?)+`

这意味着我们的上述 3 个场景是：

1.  `^icon-(?!white$)([a-z]+-?)+$`
2.  `^icon-(?!white$)([a-z]+-?)+ icon-white$`
3.  `^icon-white icon-(?!white$)([a-z]+-?)+$`

因此，将它们放在一起：

**`^icon-(?!white$)([a-z]+-?)+$|^icon-(?!white$)([a-z]+-?)+ icon-white$|^icon-white icon-(?!white$)([a-z]+-?)+$`**

我尝试将 icon-white 部分作为可选组来执行此操作，但在第一部分捕获它的负前瞻时遇到了麻烦......所以......这会做;-)

# eclipse - Eclipse 在每次构建时打开一个新的 Web 浏览器选项卡

> ID：15322591
> 
> 赞同：1
> 
> 时间：2013-03-10T13:12:01.610
> 
> 标签：eclipse, browser

我正在使用 Eclipse Juno (Java EE) + Tomcat，一切正常，但有一件事很烦人。每次按下运行按钮时，Eclipse 都会打开一个新的 Web 浏览器选项卡（我使用 chrome 作为外部 Web 浏览器）。是否可以告诉 Eclipse 它应该刷新选项卡而不是打开一个新选项卡？

谢谢和最好的问候

孔泽

# wordpress - nginx-apache-wordpress：在子目录下和 nginx 后面设置 apache/wordpress

> ID：15322599
> 
> 赞同：0
> 
> 时间：2013-03-10T13:13:11.810
> 
> 标签：wordpress, apache, nginx, rewrite, subdirectory

我开发了一个 Rails 应用程序并且对它很满意，但我被要求在 subdirectory 下设置 Wordpress `/wp`。在尝试使 nginx-to-apache 代理工作的一些不愉快的时间之后，我放弃了从糟糕的指南中复制代码并编写了一些非常简短而清晰的配置：

```
location @wp {
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_redirect off;
  proxy_pass http://127.0.0.1:8080;
}

location ~ ^/wp(/|$) {
  root /home/apache/www;
  rewrite ^/wp/?$ / break;
  rewrite ^/wp/(.*) /$1 break;
  try_files $uri @wp;
} 
```

它解决了我遇到的大多数问题，但由于一个明显的原因它不起作用：Wordpress 生成`<real_ip>:8080/<url>`链接，这不仅丑陋（我可以忍受），而且链接不起作用，因为 Apache 在 localhost 上侦听只要。我如何告诉 Apache 或 Wordpress（或者我应该使用 Nginx 代理什么标头）使链接看起来像`<real_ip>/wp/<url>`？还是我的设置设计有问题？我将不胜感激任何解决方案或提示，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:21:37.853

下面是我对 nginx 的配置，它在主根目录下运行 Rails 应用程序，在子目录下运行 WordPress 博客。也许试试这个？

```
server {
  listen <ip-address>:80;
  server_name domain.com;
  rewrite ^(.*)$ $scheme://www.domain.com$request_uri? permanent;
  break;
}

server {
  listen <ip-address>:80;
  server_name www.domain.com;
  root   /www/domain.com/public_html/current/public;

  access_log /www/domain.com/logs/access.log;
  error_log /www/domain.com/logs/error.log;

  location ^~ /blog {
    root /www/domain.com/blog/public_html;
    index index.php index.html index.htm;
    try_files $uri $uri/ /blog/index.php?$args;

    location ~ \.php$ {
        include /etc/nginx/fastcgi_params;
        if ($uri !~ "^/images/") {
                fastcgi_pass unix:/var/run/php-fastcgi/php-fastcgi.socket;
        }
        fastcgi_index index.php;
        fastcgi_param  SCRIPT_FILENAME  /www/domain.com/blog/public_html$fastcgi_script_name;
   }
} 
```

# python - 有哪些工具可用于构建用于部署目的的 debian 软件包？

> ID：15322603
> 
> 赞同：8
> 
> 时间：2013-03-10T13:13:30.950
> 
> 标签：python, debian, packaging

我想构建`.deb`我的应用程序的文件，以便我可以使用 Debian 的所有依赖关系解析功能部署到远程服务器上。我的应用程序是一组主要是 Python 脚本，外加一些配置文件和一些二进制 blob，但现有的大多数讨论 Source 和 Binary 包的文档似乎都面向需要编译的 C 应用程序。

我应该看什么工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:57:02.720

基础知识在这里：[https ://help.ubuntu.com/community/PythonRecipes/DebianPackage](https://help.ubuntu.com/community/PythonRecipes/DebianPackage)

还有一种使用[stdeb](https://pypi.python.org/pypi/stdeb)的更自动化的方式，它是python 的 distutils 或[pgkme](https://launchpad.net/pkgme)的扩展，它有点更新但更面向 ubuntu。

Stani Michiels 在 PyCon 2010 上做了一个非常好的演讲，介绍了他们使用跨平台照片批处理处理器 (phatch) 的经验，其中包括他们如何让软件被 debian 存储库接受，其中包括您想要实现的目标（以及更多）。

# c# - WP8 简单页面导航失败

> ID：15322605
> 
> 赞同：0
> 
> 时间：2013-03-10T13:13:59.577
> 
> 标签：c#, windows-phone-8

尝试从一页导航到另一页时出现以下异常。

```
 // Code to execute if a navigation fails
        private void RootFrame_NavigationFailed(object sender, NavigationFailedEventArgs e)
        {
            if (Debugger.IsAttached)
            {
                // A navigation has failed; break into the debugger
                Debugger.Break();
            }
        } 
```

我的应用程序的结构如下

![在此处输入图像描述](../Images/054f54fbb27366abd4d1284dcaac943d.png)

我试着像这样导航

```
public MainPage()
    {
        InitializeComponent();
        NavigationService.Navigate(new Uri("/Live.xaml", UriKind.Relative));
    } 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:23:01.743

尝试将导航从构造函数移动到`OnNavigatedTo`方法。

```
 // Constructor
    public MainPage()
    {
        InitializeComponent();

    }

    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);
        NavigationService.Navigate(new Uri("/Live.xaml", UriKind.Relative));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:36:15.023

您无法从页面构造函数访问 NavigationService，第一个方法将在构造函数之后调用，并且您可以覆盖和使用 NavigationService 存在 OnNavigateTo （正如 Anton Sizlikov 回答的那样）。或者您可以订阅 Page.Loaded 事件（但它会在 OnNavigateTo 之后发生）并在那里运行您的导航代码。

# parameters - Verts、NumVerts、Normals 和 TexCoords 是什么意思？

> ID：15322612
> 
> 赞同：0
> 
> 时间：2013-03-10T13:14:18.500
> 
> 标签：parameters, 3d, vuforia

我想知道 Verts、NumVerts、Normals 和 TexCoords 对 3D 模型的意义。在 Vuforia SDK 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:50:04.090

顶点本质上定义了模型的几何形状。法线描述了每个面的方向，它们用于阴影计算。TexCoords 用于将纹理包裹到模型上。

如果您解释了您需要了解这些参数的目的，也许我们可以为您提供更好的答案。

# javascript - 如何使用 haxe 创建可重用的 js 库？

> ID：15322616
> 
> 赞同：2
> 
> 时间：2013-03-10T13:14:38.017
> 
> 标签：javascript, haxe

我想知道，因为我以 javascript 为目标，如何创建我自己的代码的可重用库，我可以在多 js haxe 项目中使用？

我想创建一个库 js haxe 项目，我将放置我的可重用类，但是如果我编译它，我会得到 js 代码，如何在其他 haxe 项目中使用它？

我要做的，是将核心逻辑隔离到一个库中，然后在使用同一个核心逻辑js库的html页面中使用多个视图。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:14:49.497

我找到了解决方案，如果有人感兴趣，[这里是](https://groups.google.com/forum/#!searchin/haxelang/JS%2420modular%2420applications%2420/haxelang/wPiO4UB4YqI/EEuW4_B4ObYJ)

# ios - 在 UIImageView IOS 上绘制圆圈的最佳方法

> ID：15322620
> 
> 赞同：5
> 
> 时间：2013-03-10T13:15:03.930
> 
> 标签：ios, uiview, uiimageview, cgcontext, cashapelayer

我有一个 UIImageView 显示用户刚刚用相机拍摄的照片。在该图像上，我需要绘制一个设置大小的透明可移动圆圈。因此，当用户在图像上拖动手指时，圆圈会随之移动。然后，如果用户停止移动他们的手指，圆圈会停留在同一个地方。

我一直在阅读[CAShapeLayer](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html)上的苹果文档，但我仍然不确定最好的方法，我应该绘制 UIView 吗？

任何例子都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-10T16:39:05.307

以下代码创建三个手势：

*   点击手势会在视图上放置一个圆圈（这样您就可以看到它`CAShapeLayer`是如何创建的）；

*   平移手势移动圆圈（假设您从圆圈内开始移动）；和

*   捏合手势可调整圆圈的大小。

因此，这可能看起来像：

```
#import <QuartzCore/QuartzCore.h>
#import <UIKit/UIGestureRecognizerSubclass.h>

@interface ViewController ()

@property (nonatomic, weak) CAShapeLayer *circleLayer;
@property (nonatomic) CGPoint circleCenter;
@property (nonatomic) CGFloat circleRadius;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    // create tap gesture

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                                          action:@selector(handleTap:)];
    [self.view addGestureRecognizer:tap];

    // create pan gesture

    UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self
                                                                          action:@selector(handlePan:)];
    [self.view addGestureRecognizer:pan];

    // create pinch gesture

    UIPinchGestureRecognizer *pinch = [[UIPinchGestureRecognizer alloc] initWithTarget:self
                                                                                action:@selector(handlePinch:)];
    [self.view addGestureRecognizer:pinch];
}

// Create a UIBezierPath which is a circle at a certain location of a certain radius.
// This also saves the circle's center and radius to class properties for future reference.

- (UIBezierPath *)makeCircleAtLocation:(CGPoint)location radius:(CGFloat)radius
{
    self.circleCenter = location;
    self.circleRadius = radius;

    UIBezierPath *path = [UIBezierPath bezierPath];
    [path addArcWithCenter:self.circleCenter
                    radius:self.circleRadius
                startAngle:0.0
                  endAngle:M_PI * 2.0
                 clockwise:YES];

    return path;
}

// Create a CAShapeLayer for our circle on tap on the screen

- (void)handleTap:(UITapGestureRecognizer *)gesture
{
    CGPoint location = [gesture locationInView:gesture.view];

    // if there was a previous circle, get rid of it

    [self.circleLayer removeFromSuperlayer];

    // create new CAShapeLayer

    CAShapeLayer *shapeLayer = [CAShapeLayer layer];
    shapeLayer.path = [[self makeCircleAtLocation:location radius:50.0] CGPath];
    shapeLayer.strokeColor = [[UIColor redColor] CGColor];
    shapeLayer.fillColor = nil;
    shapeLayer.lineWidth = 3.0;

    // Add CAShapeLayer to our view

    [gesture.view.layer addSublayer:shapeLayer];

    // Save this shape layer in a class property for future reference,
    // namely so we can remove it later if we tap elsewhere on the screen.

    self.circleLayer = shapeLayer;
}

// Let's move the CAShapeLayer on a pan gesture (assuming we started
// pan inside the circle).

- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    static CGPoint oldCenter;

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        // If we're starting a pan, make sure we're inside the circle.
        // So, calculate the distance between the circle's center and 
        // the gesture start location and we'll compare that to the 
        // radius of the circle.

        CGPoint location = [gesture locationInView:gesture.view];
        CGPoint translation = [gesture translationInView:gesture.view];
        location.x -= translation.x;
        location.y -= translation.y;

        CGFloat x = location.x - self.circleCenter.x;
        CGFloat y = location.y - self.circleCenter.y;
        CGFloat distance = sqrtf(x*x + y*y);

        // If we're outside the circle, cancel the gesture.
        // If we're inside it, keep track of where the circle was.

        if (distance > self.circleRadius)
            gesture.state = UIGestureRecognizerStateCancelled;
        else
            oldCenter = self.circleCenter;
    }
    else if (gesture.state == UIGestureRecognizerStateChanged)
    {
        // Let's calculate the new center of the circle by adding the
        // the translationInView to the old circle center.

        CGPoint translation = [gesture translationInView:gesture.view];
        CGPoint newCenter = CGPointMake(oldCenter.x + translation.x, oldCenter.y + translation.y);

        // Update the path for our CAShapeLayer

        self.circleLayer.path = [[self makeCircleAtLocation:newCenter radius:self.circleRadius] CGPath];
    }
}

// Let's resize circle in the CAShapeLayer on a pinch gesture (assuming we have
// a circle layer).

- (void)handlePinch:(UIPinchGestureRecognizer *)gesture
{
    static CGFloat oldCircleRadius;

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        if (self.circleLayer)
            oldCircleRadius = self.circleRadius;
        else
            gesture.state = UIGestureRecognizerStateCancelled;
    }
    else if (gesture.state == UIGestureRecognizerStateChanged)
    {
        CGFloat newCircleRadius = oldCircleRadius * gesture.scale;
        self.circleLayer.path = [[self makeCircleAtLocation:self.circleCenter radius:newCircleRadius] CGPath];
    }
}

@end 
```

# algorithm - 为以下内容提出 O(logm) 算法

> ID：15322621
> 
> 赞同：2
> 
> 时间：2013-03-10T13:15:10.427
> 
> 标签：algorithm, big-o

我需要为以下内容提出一个算法：让我们假设我们有一个由零和一组成的数组。数组从数组的开头到索引 m 用 0 填充，所有剩余索引用 1 填充。我需要在 O(logm) 时间内找到这个索引 m。这是我的想法：我认为这就像二进制搜索，首先我查看数组的中间元素，如果它为零，那么我会忘记数组的左侧部分并对右侧部分执行相同的操作，并且继续这样，直到我遇到一个。如果中间元素是一个，那么我会忘记右边的部分并对数组的左边部分做同样的事情。这是一个正确的 O(logm) 解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T13:17:42.393

它不是*“像”*二分查找——它**是**二分查找。不幸的是，它是`O(logN)`，不是`O(logM)`。

要在 中找到边界线`O(logM)`，请从另一端开始：尝试位置`{1, 2, 4, 8, 16, ... 2^i}`等，直到找到`1`。`2^i`然后对和之间的区间进行二分搜索`2^(i+1)`，其中`2^i+1`是您发现 a 的第一个位置`1`。

找到第一个`1`take `O(logM)`，因为每次迭代时索引都会加倍。之后，二分查找又取一个`O(logM)`，因为区间的长度`2^i..2^(i+1)`也小于`M`。

# camera - 通过 Web RTC 使用多个 USB 摄像头

> ID：15322622
> 
> 赞同：4
> 
> 时间：2013-03-10T13:15:12.073
> 
> 标签：camera, webrtc

我想将多个 USB 摄像头与 Web RTC 一起使用。

例如） [https://apprtc.appspot.com/?r=93443359](https://apprtc.appspot.com/?r=93443359)

此应用程序是 Web RTC 示例。我可以连接到另一台机器，但我必须断开一次才能更换相机。

我想要的是，

1.在同一屏幕上同时使用两个摄像头。2.（如果1不可能），我想在不断开当前连接的情况下切换相机

有人知道如何在 Web RTC 上使用两个摄像头吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T03:30:41.917

调用 getUserMedia 两次并在两者之间更改相机输入

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-26T16:28:41.377

您可以使用**约束**来指定要使用的相机，也可以将它们都显示在一个页面中。要指定使用哪个摄像头，请查看以下代码段（仅适用于 Chrome 30+）：

```
getUserMedia({
  video: {
    mandatory: {
      sourceId: webcamId,
      ...
    }
  }, 
  successCallback,
  failCallback); 
```

`webcamId`您可以通过以下方式获得：

```
MediaStreamTrack.getSources(function(sources){
  var cams = _.filter(sources, function(e){ //only return video elements 
    return e.kind === 'video';
  });
  var camIds = _.map(cams, function (e) { // return only ids
    return e.id;
  });
}); 
```

在上面的代码片段中，我使用[了下划线](http://underscorejs.org/#filter)方法`filter`和`map`.

更多信息：

*   WebRTC[视频源](https://simpl.info/getusermedia/sources/)
*   [约束](https://simpl.info/getusermedia/constraints/)

# android - 列表项在 onLoadFinished 后不显示

> ID：15322624
> 
> 赞同：0
> 
> 时间：2013-03-10T13:15:24.147
> 
> 标签：android, android-arrayadapter, android-loader

我被困在以下场景中。

我的活动实现了 2 个选项卡和一个 pageradapter，上面有 2 个片段，并且出于兼容性目的，我正在使用 ActionBarSherlock。

有问题的片段从 SherlockListFragment 扩展并实现**LoaderManager.LoaderCallbacks**。
我创建了一个**自定义 ArrayListAdapter**和一个扩展 AsyncLoader 的自定义 Loader。

问题是当加载器完成加载它的任务时，列表视图没有刷新，它只**显示一个空白页**。

我遵循了这个[解决方案](https://stackoverflow.com/questions/12869779/error-using-setlistshown-on-a-listfragment-with-a-custom-view)，但它并没有解决我的问题。

这是我的片段布局 xml 文件。

```
 <LinearLayout android:id="@+id/progressContainer"
        android:orientation="vertical"
        android:layout_width="match_parent" 
        android:layout_height="match_parent"
        android:visibility="gone"
        android:gravity="center">

    <ProgressBar style="?android:attr/progressBarStyleLarge"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:paddingTop="4dip"
            android:singleLine="true" />

</LinearLayout>

<FrameLayout android:id="@+id/listContainer"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin" >

<ListView
    android:id="@id/android:list"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:background="@color/abs__background_holo_light"
    android:divider="@android:color/transparent"
    android:dividerHeight="@dimen/activity_horizontal_margin"
    android:drawSelectorOnTop="false"
    android:headerDividersEnabled="true"
    android:smoothScrollbar="true"
     />

    <TextView
            android:id="@android:id/empty"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#FFFFFF"

            android:gravity="center"
            android:text="no hay rumores"
            /> 
```

这是自定义加载器代码

```
 package *.android.core;

import android.content.Context;
import android.support.v4.content.AsyncTaskLoader;

import *.Rumor;
import *.DownloadHelper;

import java.util.List;

public class RumorListLoader extends AsyncTaskLoader<List<Rumor>> {

    List<Rumor> mRumors;
    Context mContext;

    /**
     * Constructor.
     * 
     * @param context
     */
    public RumorListLoader(final Context context) {
        super(context);
        this.mContext = context;

    }

    /*
     * (non-Javadoc)
     * @see android.support.v4.content.Loader#deliverResult(java.lang.Object)
     */
    @Override
    public void deliverResult(final List<Rumor> data) {
        if (isReset()) {
            if (data != null) {
                onReleaseResources(data);
            }
        }

        final List<Rumor> oldList = data;
        this.mRumors = data;

        if (isStarted()) {
            super.deliverResult(data);
        }

        if (oldList != null) {
            onReleaseResources(oldList);
        }
    }

    /*
     * (non-Javadoc)
     * @see android.support.v4.content.Loader#isReset()
     */
    @Override
    public boolean isReset() {
        // TODO Auto-generated method stub
        return super.isReset();
    }

    @Override
    public List<Rumor> loadInBackground() {
        final List<Rumor> rumores = DownloadHelper.downloadPreviousRumors(this.mContext);

        return rumores;
    }

    /*
     * (non-Javadoc)
     * @see
     * android.support.v4.content.AsyncTaskLoader#onCanceled(java.lang.Object)
     */
    @Override
    public void onCanceled(final List<Rumor> data) {
        // TODO Auto-generated method stub
        super.onCanceled(data);

        onReleaseResources(data);
    }

    /**
     * Helper function that takes care of releasing resources.
     * 
     * @param apps
     */
    protected void onReleaseResources(final List<Rumor> apps) {
    }

    /*
     * (non-Javadoc)
     * @see android.support.v4.content.Loader#onReset()
     */
    @Override
    protected void onReset() {
        // TODO Auto-generated method stub
        super.onReset();

        onStopLoading();

        if (this.mRumors != null) {
            onReleaseResources(this.mRumors);
            this.mRumors = null;
        }
    }

    /*
     * (non-Javadoc)
     * @see android.support.v4.content.Loader#onStartLoading()
     */
    @Override
    protected void onStartLoading() {
        if (this.mRumors != null) {
            deliverResult(this.mRumors);
        }
        if (takeContentChanged() || this.mRumors == null) {
            forceLoad();
        }
    }

    /*
     * (non-Javadoc)
     * @see android.support.v4.content.Loader#onStopLoading()
     */
    @Override
    protected void onStopLoading() {
        // TODO Auto-generated method stub
        super.onStopLoading();
        cancelLoad();
    }

} 
```

最后这是片段类

```
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.Loader;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.animation.AnimationUtils;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.TextView;

import com.actionbarsherlock.app.SherlockListFragment;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

import java.util.ArrayList;
import java.util.List;

public class RumorsFragment extends SherlockListFragment implements
        LoaderManager.LoaderCallbacks<List<Rumor>> {

    protected Context mContext;

    public static final String ARG_SECTION_NUMBER = "section_number";

    protected final static int RUMOR_LOADER_CODE = 100;
    private final static String TAG = "ru_rufragment";

    protected RumorAdapter mAdapter;

    protected View mProgressContainer;
    protected View mListContainer;
    boolean mListShown;
    public ListView mList;
    View mEmptyView;
    TextView mStandardEmptyView;
    CharSequence mEmptyText;

    private LoaderManager.LoaderCallbacks<List<Rumor>> mCallbacks;

    final private Handler mHandler = new Handler();

    final private Runnable mRequestFocus = new Runnable() {
        public void run() {
            mList.focusableViewAvailable(mList);
        }
    };

    /**
     * Constructor.
     */
    public RumorsFragment() {

    }

    /**
     * Setup the list data.
     */
    protected void init() {

    }

    @Override
    public void onActivityCreated(final Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        // Initially there is no data

        this.mContext = getSherlockActivity();

        // Create an empty adapter to display the data.
        this.mAdapter = new RumorAdapter(this.mContext, R.layout.rumor_item);
        setListAdapter(this.mAdapter);
        setEmptyText("Sin datos");
        setListShown(false);
        mCallbacks = this;

        getLoaderManager().initLoader(RUMOR_LOADER_CODE, null, mCallbacks);
    }

    @Override
    public void onAttach(final Activity activity) {
        super.onAttach(activity);
        this.mContext = getSherlockActivity();
    }

    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // This fragment adds elements to the action bar
        setHasOptionsMenu(true);
    }

    @Override
    public Loader<List<Rumor>> onCreateLoader(final int arg0, final Bundle data) {

        return new RumorListLoader(this.mContext);
    }

    @Override
    public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {
        // TODO Auto-generated method stub
        super.onCreateOptionsMenu(menu, inflater);
    }

    @Override
    public View onCreateView(final LayoutInflater inflater, final ViewGroup container,
            final Bundle savedInstanceState) {

        final View fragmentView = inflater.inflate(R.layout.fragment_rumors, container, false);
        setRetainInstance(true);
        return fragmentView;
    }

    @Override
    public void onDetach() {
        // TODO Auto-generated method stub
        super.onDetach();
    }

    @Override
    public void onLoaderReset(final Loader<List<Rumor>> arg0) {
        this.mAdapter.clear();

    }

    @Override
    public void onLoadFinished(final Loader<List<Rumor>> loader, final List<Rumor> data) {

        Log.i(TAG, "Gets to onLoadFinished");
        switch (loader.getId()) {
        case RUMOR_LOADER_CODE:
            mAdapter.setData(data);
             // The list should now be shown;
            if (isResumed()) {
                setListShown(true);
            } else {
                setListShownNoAnimation(true);
            }
        }

    }

    @Override
    public boolean onOptionsItemSelected(final MenuItem item) {
        // TODO Auto-generated method stub
        return super.onOptionsItemSelected(item);
    }

    @Override
    public void onPrepareOptionsMenu(final Menu menu) {
        // TODO Auto-generated method stub
        super.onPrepareOptionsMenu(menu);
    }

    public void setListShown(Boolean shown, boolean animate) {
        ensureList();
        if (mListShown == shown) {
            return;
        }
        mListShown = shown;
        if (shown) {
            if (animate) {
                mProgressContainer.startAnimation(AnimationUtils.loadAnimation(getSherlockActivity(), android.R.anim.fade_out));
                mListContainer.startAnimation(AnimationUtils.loadAnimation(getSherlockActivity(), android.R.anim.fade_in));
            } else {
                mProgressContainer.clearAnimation();
                mListContainer.clearAnimation();
            }
            mProgressContainer.setVisibility(View.GONE);
            mListContainer.setVisibility(View.VISIBLE);
        } else {
            if (animate) {
                mProgressContainer.startAnimation(AnimationUtils.loadAnimation(getSherlockActivity(), android.R.anim.fade_in));
                mListContainer.startAnimation(AnimationUtils.loadAnimation(getSherlockActivity(), android.R.anim.fade_out));
            } else {
                mProgressContainer.clearAnimation();
                mListContainer.clearAnimation();
            }
            mProgressContainer.setVisibility(View.VISIBLE);
            mListContainer.setVisibility(View.GONE);
        }
    }

    public void setListShown(boolean shown) {
        setListShown(shown, true);
    }

    public void setListShownNoAnimation(boolean shown) {
        setListShown(shown, false);
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {

        super.onViewCreated(view, savedInstanceState);
        ensureList();
    }

    @Override
    public void onDestroyView() {
        mHandler.removeCallbacks(mRequestFocus);
        mList = null;
        mListShown = false;
        mEmptyView = mProgressContainer = mListContainer = null;
        mStandardEmptyView = null;
        super.onDestroyView();
    }

    public ListView getListView() {
        ensureList();
        return mList;
    }

    public void setEmptyText(CharSequence text) {
        ensureList();
        if(mStandardEmptyView == null) {
            throw new IllegalStateException("Cant be used");
        }
        mStandardEmptyView.setText(text);
        if(mEmptyText == null) {
            mList.setEmptyView(mStandardEmptyView);
        }
        mEmptyText = text;
    }

    private void ensureList() {
        if (mList != null) {
            return;
        }

        View root = getView();
        if (root == null) {
            throw new IllegalStateException("View not created");
        }
        if(root instanceof ListView) {
            mList = (ListView) root;
        } else {
            mStandardEmptyView = (TextView) root.findViewById(android.R.id.empty);
            if (mStandardEmptyView == null) {
                mEmptyView = root.findViewById(android.R.id.empty);
            } else {
                mStandardEmptyView.setVisibility(View.GONE);
            }
            mProgressContainer = root.findViewById(R.id.progressContainer);
            mListContainer = root.findViewById(R.id.listContainer);
            View rawListView = root.findViewById(android.R.id.list);
            if(!(rawListView instanceof ListView)) {
                if (rawListView == null) {
                    throw new RuntimeException("Listview argument android.R.id.list");
                }
                throw new RuntimeException( "Content has view with id attribute 'android.R.id.list' "
                        + "that is not a ListView class");
            }
            mList = (ListView) rawListView;
            if (mEmptyView != null) {
                mList.setEmptyView(mEmptyView);
            } else if (mEmptyText != null) {
                mStandardEmptyView.setText(mEmptyText);
                mList.setEmptyView(mStandardEmptyView);
            }
        }
        mListShown = true;
        //mList.setOnClickListener(mOn)
        if (mAdapter != null) {
            ListAdapter adapter = mAdapter;
            mAdapter = null;
            setListAdapter(adapter);
        } else {
            if (mProgressContainer != null) {
                setListShown(false, false);
            }
        }
        mHandler.post(mRequestFocus);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:05:47.840

最后，我只是按照链接的示例并删除了我的代码的“ensurelist”部分来解决了这个问题。

# ibm-mq - 队列管理器 (IBM Websphere MQv7) 上的侦听器已关闭

> ID：15322629
> 
> 赞同：0
> 
> 时间：2013-03-10T13:16:04.443
> 
> 标签：ibm-mq, mq

我已经连接到有一堆队列的远程队列管理器。但是队列侦听器（打开输入计数）没有出现。Tomcat 应用程序服务器已启动并正在运行。

可能的原因是什么？

有没有办法检查听众失望的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:27:00.767

我建议查看[WebSphere MQ 信息中心](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/index.jsp)，您会发现大量有价值的信息。不过我会说你必须检查你的错误[日志](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fa15170_.htm)，通常你会检查： - 队列管理器错误日志。- 一般的 WebSphere MQ 日志。目录取决于平台，但 Infocenter 将成为您的朋友！

当您说队列侦听器时，我不确定您的意思，也许您的意图是指某个 IP 端口上的队列管理器侦听器（例如 TCP）。如果可能的话，包括完成代码和原因代码，甚至是你在 Java 中获得的堆栈跟踪。

老实说，我希望这对您有用，如果不是，请告诉我！

玩得开心，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:49:01.140

我认为需要进一步的细节。我会假设 qmgr 很好，因为您说您已连接到具有一堆队列的远程队列管理器。检查队列

# python - 用于视觉工作室和原始突出显示的 python 工具？

> ID：15322630
> 
> 赞同：1
> 
> 时间：2013-03-10T13:16:10.360
> 
> 标签：python, visual-studio-2010

我怎样才能得到像`None`, `False`,`True`突出显示的东西？我认为他们确实值得强调..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:01:37.473

在 Python 2.x 中，True、False 和 None 不是关键字，只是全局变量。

显然，如果您使用 Python 3.x，则应突出显示 True 和 False。

来源： [https ://pytools.codeplex.com/workitem/803](https://pytools.codeplex.com/workitem/803)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:18:42.953

我知道两个支持 Python 的 Visual Studio 扩展。我没有使用它们中的任何一个（我更喜欢带有 PyDev 或文本编辑器的 Eclipse），但您可以尝试：

[http://pytools.codeplex.com/](http://pytools.codeplex.com/)

[http://www.ironpython.net/tools/](http://www.ironpython.net/tools/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:19:30.663

你在运行 Iron Python 吗？如果是这样，您是否还在为 Visual Studio 运行 Python 工具：http: [//pytools.codeplex.com/](http://pytools.codeplex.com/)

# java - 如何比较 1 和 0 是否相等？使用文件阅读器

> ID：15322631
> 
> 赞同：-2
> 
> 时间：2013-03-10T13:16:17.517
> 
> 标签：java

我正在尝试编写一个 Java 程序来读取文本文件中的输入并将 1 与 0 进行比较。当 1 的频率等于 0 的频率时，结果相等。

例子：

输入.txt

> 1100
> 100
> 101
> 10

输出.txt

> 平等的！
> 不相等！
> 不相等！
> 平等的

这是我正在使用的代码：

```
package automata;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

public class Main {

public static void main(String[] args) throws FileNotFoundException, IOException {
     FileReader freader = new FileReader("Input.txt");
    BufferedReader br = new BufferedReader(freader);
     try
{

    String s="";
    while((s = br.readLine()) != null)
    {
        int count = 0;
        for(int i = 0 ; i < s.length() ; i++)
        {
            if(s.charAt(i) == '0') count++;
            else if(s.charAt(i) == '1') count--;
        }
        if(count == 0) System.out.print("Equal!\n");
        else System.out.print("Not Equal! \n");
    }

} catch (FileNotFoundException e){
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}
            }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:56:39.113

我就是这样做的。

```
import java.io.*;

public class TestFile
{
    public TestFile()
    {
        File inputFile = new File("input.txt"),
             outputFile = new File("output.txt");

        try
        {
            FileInputStream fis = new FileInputStream(inputFile);
            FileOutputStream fos = new FileOutputStream(outputFile);
            BufferedReader br = new BufferedReader(new InputStreamReader(fis));
            BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));
            String s;
            while((s = br.readLine()) != null)
            {
                int count = 0;
                for(int i = 0 ; i < s.length() ; i++)
                {
                    if(s.charAt(i) == '0') count++;
                    else if(s.charAt(i) == '1') count--;
                }
                if(count == 0) bw.append("Equal!\n");
                else bw.append("Not Equal! \n");
            }
            br.close();
            bw.close();
        } catch (FileNotFoundException e){
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args)
    {
        new TestFile();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:19:11.510

如果您遍历每一行的每个字符，

*   您可以计算一个或零并将结果与​​完整字符串的一半长度进行比较。

*   您可以使用一个初始化为零的计数器，并为每个 1 增加一个，为每个 0 减少一个，因此您将在相同数量的 1 和 0 上将其设为 0

此外，如果您获得大量数据（很多行和很长的行），那么在到达终点之前定期检查一行是否相等可能是有意义的（如果您在 2000 个字符的行上有 1001 个，您无需再检查并保存 999 次迭代）。

# python - python pandas, DF.groupby().agg(), column reference in agg()

> ID：15322632
> 
> 赞同：48
> 
> 时间：2013-03-10T13:16:20.917
> 
> 标签：python, pandas, group-by, split-apply-combine

On a concrete problem, say I have a DataFrame DF

```
 word  tag count
0    a     S    30
1    the   S    20
2    a     T    60
3    an    T    5
4    the   T    10 
```

I want to find, **for every "word", the "tag" that has the most "count"**. So the return would be something like

```
 word  tag count
1    the   S    20
2    a     T    60
3    an    T    5 
```

I don't care about the count column or if the order/Index is original or messed up. Returning a dictionary {**'the' : 'S'**, ...} is just fine.

I hope I can do

```
DF.groupby(['word']).agg(lambda x: x['tag'][ x['count'].argmax() ] ) 
```

but it doesn't work. I can't access column information.

More abstractly, **what does the *function* in agg(*function*) see as its argument**?

btw, is .agg() the same as .aggregate() ?

Many thanks.

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-10T13:24:45.360

`agg` is the same as `aggregate`. It's callable is passed the columns (`Series` objects) of the `DataFrame`, one at a time.

* * *

You could use `idxmax` to collect the index labels of the rows with the maximum count:

```
idx = df.groupby('word')['count'].idxmax()
print(idx) 
```

yields

```
word
a       2
an      3
the     1
Name: count 
```

and then use `loc` to select those rows in the `word` and `tag` columns:

```
print(df.loc[idx, ['word', 'tag']]) 
```

yields

```
 word tag
2    a   T
3   an   T
1  the   S 
```

Note that `idxmax` returns index *labels*. `df.loc` can be used to select rows by label. But if the index is not unique -- that is, if there are rows with duplicate index labels -- then `df.loc` will select *all rows* with the labels listed in `idx`. So be careful that `df.index.is_unique` is `True` if you use `idxmax` with `df.loc`

* * *

Alternative, you could use `apply`. `apply`'s callable is passed a sub-DataFrame which gives you access to all the columns:

```
import pandas as pd
df = pd.DataFrame({'word':'a the a an the'.split(),
                   'tag': list('SSTTT'),
                   'count': [30, 20, 60, 5, 10]})

print(df.groupby('word').apply(lambda subf: subf['tag'][subf['count'].idxmax()])) 
```

yields

```
word
a       T
an      T
the     S 
```

* * *

Using `idxmax` and `loc` is typically faster than `apply`, especially for large DataFrames. Using IPython's %timeit:

```
N = 10000
df = pd.DataFrame({'word':'a the a an the'.split()*N,
                   'tag': list('SSTTT')*N,
                   'count': [30, 20, 60, 5, 10]*N})
def using_apply(df):
    return (df.groupby('word').apply(lambda subf: subf['tag'][subf['count'].idxmax()]))

def using_idxmax_loc(df):
    idx = df.groupby('word')['count'].idxmax()
    return df.loc[idx, ['word', 'tag']]

In [22]: %timeit using_apply(df)
100 loops, best of 3: 7.68 ms per loop

In [23]: %timeit using_idxmax_loc(df)
100 loops, best of 3: 5.43 ms per loop 
```

* * *

If you want a dictionary mapping words to tags, then you could use `set_index` and `to_dict` like this:

```
In [36]: df2 = df.loc[idx, ['word', 'tag']].set_index('word')

In [37]: df2
Out[37]: 
     tag
word    
a      T
an     T
the    S

In [38]: df2.to_dict()['tag']
Out[38]: {'a': 'T', 'an': 'T', 'the': 'S'} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-10T13:47:18.227

Here's a simple way to figure out what is being passed (the unutbu) solution then 'applies'!

```
In [33]: def f(x):
....:     print type(x)
....:     print x
....:     

In [34]: df.groupby('word').apply(f)
<class 'pandas.core.frame.DataFrame'>
  word tag  count
0    a   S     30
2    a   T     60
<class 'pandas.core.frame.DataFrame'>
  word tag  count
0    a   S     30
2    a   T     60
<class 'pandas.core.frame.DataFrame'>
  word tag  count
3   an   T      5
<class 'pandas.core.frame.DataFrame'>
  word tag  count
1  the   S     20
4  the   T     10 
```

your function just operates (in this case) on a sub-section of the frame with the grouped variable all having the same value (in this cas 'word'), if you are passing a function, then you have to deal with the aggregation of potentially non-string columns; standard functions, like 'sum' do this for you

Automatically does NOT aggregate on the string columns

```
In [41]: df.groupby('word').sum()
Out[41]: 
      count
word       
a        90
an        5
the      30 
```

You ARE aggregating on all columns

```
In [42]: df.groupby('word').apply(lambda x: x.sum())
Out[42]: 
        word tag count
word                  
a         aa  ST    90
an        an   T     5
the   thethe  ST    30 
```

You can do pretty much anything within the function

```
In [43]: df.groupby('word').apply(lambda x: x['count'].sum())
Out[43]: 
word
a       90
an       5
the     30 
```

# java - 如何控制 ErrorDiffusionDescriptor 的颜色模型的像素大小？

> ID：15322637
> 
> 赞同：3
> 
> 时间：2013-03-10T13:16:33.633
> 
> 标签：java, image, bmp, jai, dithering

我正在尝试将直接颜色模型图像转换为双色调索引图像（每像素 1 位）并将索引图像保存为 BMP。

如[Java Advanced Imaging API Home Page](http://www.oracle.com/technetwork/java/iio-141084.html)所述：

> 编码输出的位深度由源图像的位深度决定。

从[源码`BMPImageWriter`](http://jcs.mobile-utopia.com/jcs/57069_BMPImageWriter.java)看，这个的机制就是[ColorModel#getPixelSize()](http://docs.oracle.com/javase/6/docs/api/java/awt/image/ColorModel.html#getPixelSize%28%29)的返回值。

[使用来自 Wikimedia Commons 的图像](http://commons.wikimedia.org/wiki/File:Vanadium_crystal_bar_and_1cm3_cube.jpg)的缩小副本，我首先执行颜色量化以获得颜色查找表，然后进行误差扩散以应用 Floyd–Steinberg 抖动：

```
PlanarImage surrogateImage = PlanarImage.wrapRenderedImage(image);

PlanarImage op = ColorQuantizerDescriptor.create(surrogateImage, ColorQuantizerDescriptor.OCTTREE, 2, null, null, null, null, null);
LookupTableJAI lut = (LookupTableJAI)op.getProperty("LUT");
IndexColorModel cm = new IndexColorModel(1, lut.getByteData()[0].length, lut.getByteData()[0], lut.getByteData()[1], lut.getByteData()[2]);

op = ErrorDiffusionDescriptor.create(surrogateImage, lut, KernelJAI.ERROR_FILTER_FLOYD_STEINBERG, null);

image = op.getAsBufferedImage(); 
```

问题是，`image.getColorModel().getPixelSize()`返回 8，所以图像被保存为 8bpp 位图：

![样本图像上颜色量化和误差扩散的结果。](../Images/a6ee9f2b3f167801e265b3fa77b5ff5c.png)

此图像的大小为 167 KiB。

我在某处看到将颜色模型传递给错误扩散的一种方法是设置 JAI.KEY_IMAGE_LAYOUT 渲染提示：

```
ImageLayout layout = new ImageLayout();
layout.setTileWidth(image.getWidth());
layout.setTileHeight(image.getHeight());
layout.setColorModel(cm);
layout.setSampleModel(op.getSampleModel());
RenderingHints rh = new RenderingHints(JAI.KEY_IMAGE_LAYOUT, layout);
op = ErrorDiffusionDescriptor.create(surrogateImage, lut, KernelJAI.ERROR_FILTER_FLOYD_STEINBERG, rh); 
```

`image.getColorModel().getPixelSize()`现在返回 1，但结果图像发生了显着变化：

![通过 ImageLayout 的样本图像上的颜色量化和误差扩散的结果。](../Images/94c4bf9279e8b1d32bb0d8aa6b3eac56.png)

但是，此图像的大小为 21 KiB，大约是我使用 MS Paint 将示例图像转换为单色位图时的大小。因此，看起来 JAI`BMPImageWriter`使用了正确的编码，但如果您仔细查看第二张图像，相邻的像素列相距 8 个像素。事实上，你可以看到第一张图像，只有第一张图像的每一列像素被扩展为 8 列像素。

这是 JAI 中的错误吗？我可以做些什么来将这些 8 宽的像素列折叠为单列像素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:45:55.027

这应该适用于 24 BPP png：

```
 String filename = "jEEDL.png";

    PlanarImage image = PlanarImage.wrapRenderedImage(JAI.create("fileload", filename));

    LookupTableJAI lut = new LookupTableJAI(new byte[][] {{(byte)0x00, (byte)0xff}, {(byte)0x00, (byte)0xff}, {(byte)0x00, (byte)0xff}});
    ImageLayout layout = new ImageLayout();
    byte[] map = new byte[] {(byte)0x00, (byte)0xff};
    ColorModel cm = new IndexColorModel(1, 2, map, map, map);
    layout.setColorModel(cm);
    SampleModel sm = new MultiPixelPackedSampleModel(DataBuffer.TYPE_BYTE,
            image.getWidth(),
            image.getHeight(),
            1);
    layout.setSampleModel(sm);
    RenderingHints hints = new RenderingHints(JAI.KEY_IMAGE_LAYOUT, layout);
    PlanarImage op = ErrorDiffusionDescriptor.create(image, lut, KernelJAI.ERROR_FILTER_FLOYD_STEINBERG, hints);

    BufferedImage dst  = op.getAsBufferedImage();

    JAI.create("filestore", dst, "jEEDL.bmp", "BMP"); 
```

# c# - 使用 getfile 定义初始化图像数组的路径

> ID：15322640
> 
> 赞同：0
> 
> 时间：2013-03-10T13:16:37.153
> 
> 标签：c#, arrays, image, getfiles

我正在尝试制作一个按钮，按下该按钮后将获取目录中的所有图像并将它们按顺序放置在图像数组中，到目前为止，它可以在可以获取文件路径的地方工作，但我无法让它工作对于图像，有什么想法吗？

这是我正在尝试使用的代码

```
private void button2_Click(object sender, RoutedEventArgs e)
{
    string[] filePaths =Directory.GetFiles("C:/Users/Pictures/Movements/","*.jpg");
    System.Windows.Controls.Image[] Form_moves =new                System.Windows.Controls.Image[12];
    int i = 0;

    foreach (string name in filePaths)
    {

        Console.WriteLine(name);
        Form_moves[i] = filePaths[i] ;
        i++;

    }

    string[] UserFilePaths = Directory.GetFiles("C:/Users/Pictures/Movements/User/", "*.jpg");

    foreach (string User_Move_name in filePaths)
    {
        Console.WriteLine(User_Move_name);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:25:41.147

我想我已经解决了：

```
 private void button2_Click(object sender, RoutedEventArgs e)
    {
        string[] filePaths = Directory.GetFiles("C:/Users/Movements/Form/","*.jpg");
        string[] User_Moves_filePaths = Directory.GetFiles("C:/Users/Movements/User/", "*.jpg");
        System.Drawing.Image[] Form_Move = new System.Drawing.Image[9];
        System.Drawing.Image[] User_Move = new System.Drawing.Image[9]; 
        int i = 0;
        int j = 0;

        foreach (string name in filePaths)
        {
            Console.WriteLine(name);//Kept in for testing purposes SolidBrush Image CancelEventArgs see that array is being populated in correct order
            Form_Move[i] = System.Drawing.Image.FromFile(filePaths[i]);
            i++;
        }

        foreach (string User_Move_name in User_Moves_filePaths)
        {
            Console.WriteLine(User_Move_name);
            User_Move[j] = System.Drawing.Image.FromFile(User_Moves_filePaths[j]);
            j++;
        } 
```

# php - php多维数组编解码json

> ID：15322646
> 
> 赞同：2
> 
> 时间：2013-03-10T13:17:17.360
> 
> 标签：php, arrays, json

我有一个数组，我编码为 json 并将其保存到数据库中。数组看起来像

```
 $myarray = array(
    'test'=>array('key1'=>'1',
                  'key2'=>'2',
                  'key3'=>'3'),
    'test2' =>array('key4'=>'1',
                   'key5'=>'<a href="myclass"></a>'
                  )
     );
json_encode($myarray); 
```

我数据库中保存的 json 看起来像

```
{

 "test":  {"key1":"1",
           "key2":"2",
           "key3":"3"
          },
 "test2": {"key4":"1",
           "key5":"<a href ="myclass"></a>"
           }
} 
```

**MYSQL 保存** `$sql = "UPDATE my_table SET params= '".json_encode($param )."' WHERE id`='".$key."'";

比我从数据库中检索 json 字符串并尝试使用`json_decode($json, true);`输出 null重建数组时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:17:09.463

您是否尝试过使用`addslashes()`和`stripslashes()`php 函数？

尝试：要更新您的表格：

```
$sql = "UPDATE my_table SET params='".addslashes(json_encode($myarray))."' WHERE id ='".$key."';"; 
```

从表中读取：

```
$sql = "SELECT params FROM my_table WHERE id='".$key."';";
...code to read row...
$myparams = stripslashes($row['params']); 
```

您也可以尝试使用 php 手册中的多维数组的自定义函数，`stripslashes_deep()`请参见[http://www.php.net/manual/en/function.stripslashes.php](http://www.php.net/manual/en/function.stripslashes.php)（示例 #2）

```
function stripslashes_deep($value)
{
    $value = is_array($value) ?
                array_map('stripslashes_deep', $value) :
                stripslashes($value);

    return $value;
}

// Example
$array = array("f\\'oo", "b\\'ar", array("fo\\'o", "b\\'ar"));
$array = stripslashes_deep($array);

print_r($array);

// Output    
Array
(
    [0] => f'oo
    [1] => b'ar
    [2] => Array
        (
            [0] => fo'o
            [1] => b'ar
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:47:45.430

您可以序列化数据而不是将其存储为 json。

```
$sql = "UPDATE table SET field='".serialize($myarray)."' WHERE ..."; 
```

然后，当您想重新创建数组时，只需将其从表中拉出并 unserialize() 即可。它在数据库中不是人类可读的；然而，这种技术速度很快，并且适用于在数据库中存储数组。如果你的 js 脚本需要数据，那么在你 unserialize() 之后 json_encode() 它。

# air - Windows 7+8 上的 AIR3.3+ sharedObject 位置

> ID：15322647
> 
> 赞同：0
> 
> 时间：2013-03-10T13:17:17.547
> 
> 标签：air, local-shared-object

读这个

[共享对象位置

我的 LSO 应该在

```
%APPDATA%\Macromedia\Flash Player\#SharedObjects\ 
```

但在 Windows 8 中，我在这里只看到 #SharedObjects 文件夹

```
%APPDATA%\Roaming\Macromedia\Flash Player\#SharedObjects\ 
```

它不是我共享对象的位置！

我还了解到，从 AIR3.3 开始，Adobe 更改了 LSO 的位置​​以使 AIR for mobile 与 iOS 兼容，但不确定这是否以及如何影响 Windows 上的 AIR for desktop。那么有人能解开这个谜吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:28:55.383

好的，为 Windows8 找到了它

```
\Users\<username>\AppData\Roaming\client\Local Store\#SharedObjects\ 
```

# themes - 使用 deface、auth_shared_login_bar 进行大礼包定制

> ID：15322651
> 
> 赞同：0
> 
> 时间：2013-03-10T13:17:31.857
> 
> 标签：themes, spree, deface

如何在#link_to_car 之前将 auth_shared_login_bar 部分从 _nav_bar 移动到 _main_nav_bar？

我设法使用以下方法将登录链接添加到 _main_nav_bar：

```
insert_before '#link-to-cart'
partial 'spree/shared/login_bar' 
```

但是找不到从 _nav_bar 中删除登录栏的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:01:54.500

找到了一种方法：

```
<!-- replace 'code:contains("if")' -->
<!-- closing_selector 'code:contains("end")' -->
<!-- sequence :after => 'auth_shared_login_bar' -->
<%= %> 
```

但我认为这不是实现预期结果的最佳方式。任何意见将不胜感激。

# javascript - IE中的jQuery插件问题

> ID：15322655
> 
> 赞同：0
> 
> 时间：2013-03-10T13:18:16.293
> 
> 标签：javascript, jquery, html, jquery-plugins

我已经创建了我的 jQuery 自定义插件；

```
(function($){

$.fn.userForm = function(){
var element = this;
var UserDataObj = {
name:"John",
email:"john@example.com",
phone:"9999999999",
desc:"some description"
}

        this.supports_html5_storage = function() 
        {

        };

        this.saveFormData = function(param)
        {

        }

        if (this.supports_html5_storage())
        {

        }
        else
        {

        }

};

})(jQuery); 
```

现在我试图在我的插件中调用一个方法；

```
var myPlugin = new $.fn.userForm();
myPlugin.saveFormData(".formFieldUserData"); 
```

由于某种原因，代码在 IE 中中断，同时执行 var myPlugin = new $.fn.userForm();

我该如何解决这个问题？

# eclipse - 如何在 Eclipse 中删除启动配置历史记录？

> ID：15322663
> 
> 赞同：38
> 
> 时间：2013-03-10T13:19:18.157
> 
> 标签：eclipse, history

右键单击Package Explorer中的任意现有项目，选择“export...” - “Java” - “Runnable JAR file”，我在“launch configuration”列表中找到所有旧项目。这些项目已经从磁盘中删除，并且在 Package Explore 中不可见。如何从该列表中删除它们？我正在使用日食靛蓝。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-02-10T20:44:28.697

这个问题似乎得到了很好的回答[**`here`**](https://stackoverflow.com/questions/9645038/is-there-a-way-to-delete-meta-data-on-eclipse-run-configurations)，但是，为了进行更改，我只是从以下路径中删除了所有不需要的启动配置。

```
${WORKSPACE}/.metadata/.plugins/org.eclipse.debug.core/.launches/Delete all the .class LAUNCH Files 
```

删除文件后，需要重新启动 Eclipse 才能使更改生效。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-10T13:21:43.203

在 Window...Preferences...Run/Debug...Launching...Launch Configurations 下，您可以激活和停用一些过滤器，这些过滤器限制了 Run...Run Configurations 中显示的内容。我想这就是你要找的。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-11T18:13:39.773

Eclipse menu -> Run -> Run Configurations... 弹出所有可行的运行配置列表，按类型分组。您正在寻找 Java 应用程序下的那些。其中任何一个都是可删除的。删除它们，它们将不再显示在运行/启动配置列表中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-03-23T09:35:41.063

*   转到运行-> 运行配置。删除 Java 应用程序下现有的已保存项目。
*   运行该类，具有来自 eclipse 的 main 方法。它将被自动设置。
*   创建可运行的 Jar。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-05-20T11:53:05.140

转到运行-> 运行配置。删除 Java 应用程序下现有的已保存项目。

然后运行该类，具有来自 eclipse 的 main 方法。它将被自动设置。

现在创建可运行的 Jar。

# fortran - Fortran I/O，首先读取的是EOF？

> ID：15322666
> 
> 赞同：0
> 
> 时间：2013-03-10T13:19:50.567
> 
> 标签：fortran, fortran90, gfortran, fortran77, fortran95

我正在尝试使用一些旧的 FORTRAN 代码和一些新的 Java 代码，这些代码在 Windows（作为 exe）中工作但在 OS X 中不工作。我尝试在 eclipse 中构建它，我得到了

```
make: *** [all] Segmentation fault: 11 
```

所以我去终端并这样做，即使是不同的编译器，但仍然是相同的结果：

运行使用标准 -c 和 -o 命令制作的 OS X 10.7.5 和 gfortran-4.2

```
Program foo
open(unit = 1, file = 'variables.txt',IOSTAT= iost)
    write(*,*)iost
    read(1,*) P
    write(*,*)P
...
end program foo 
```

该程序手动构建，但输出为：

```
0
At line 13 of file Cubic42.f
Fortran runtime error: End of file 
```

我也看到了这个错误：

```
list in: end of file
apparent state: unit 88 named variables
last format: list io
lately reading sequential formatted external IO
Abort 
```

显示IOSTAT返回0，说明文件好？但它不会读取文件，即使我将 unit# 更改为 88.. 并且即使我将 CR 更改为 mac、windows 或 unix。

这似乎只是输入/输出的问题，例如，如果我对变量进行硬编码，程序可以工作。

有想法该怎么解决这个吗？提前致谢。

**Edit1** 这里是 variables.txt 文件

```
-9999
15.6
500
150.9
48.98
0.000 
```

最后有一个回车，如果我把-9999改成正数也没关系

**编辑2**

我从目录中删除了文本文件并将 .f 重新制作为如下所示：

```
program foo
   implicit none
    real a, b, c, d
   open(unit = 1, file = 'variables.2txt', action='write')
   write(1, *) -6666
   write(1, *) 6.15
    write(1, *) -321
    write(1, *) 5.16
   close(1)

    open(unit = 2, file = 'variables.2txt', action='read',form='FORMATTED')
    read(2, *) a
            write(*,*) a
    read(2, *) b
            write(*,*) b
    read(2, *) c
            write(*,*) c
    read(2, *) d
            write(*,*) d
    close(2)

end program foo 
```

然后我编译它。
输出是：

```
 -6666.000    
   6.150000    
  -321.0000    
   5.160000 
```

正如预期的那样，但 variables.2txt 无处可寻！我很困惑，请帮忙。

**Edit3** 我找到了幻像文件。它位于 /users/me/phantom.txt 所以问题是，如何使文件保存在与可执行文件相同的目录中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:49:31.797

我收到与您的错误消息非常相似的错误消息

```
 0
At line 4 of file proba.f (unit = 1, file = 'variables.txt') 
```

在使用文件在 Linux 上运行代码时`variables.txt`，我根据旧的 MAC 约定将行尾字符显式设置为`^M`（而不是 Unix 的`^J`）。所以，我想，这是一个 EOL 约定问题。您最终可以尝试将两行写入文件并调查该文件，以确定 gfortran 期望在您的系统上使用哪个 EOL 约定：

```
program foo
  implicit none
  open(unit = 1, file = 'variables.txt', action='write')
  write(1, *) -9999
  write(1, *) 15.6
  close(1)
end program foo 
```

另外，我肯定会选择更新的 gfortran 编译器（当前稳定版是 4.7.2 版）。

# html - HTML5 - hgroup - linebrak 不验证？

> ID：15322667
> 
> 赞同：0
> 
> 时间：2013-03-10T13:19:54.077
> 
> 标签：html

我想知道为什么在 HTML5 中使用换行符
- 标签不根据 w3 标准验证？我可以在标题之间使用其他标签吗？

[在http://validator.w3.org](http://validator.w3.org)中给出错误的示例：

```
<!DOCTYPE html> 
<head>
<meta charset="UTF-8" /> 
<title>HTML5</title>
</head>
<body>

<hgroup>
    <h1>heading 1</h1>
        <br>

    <h2>heading 2</h2>
</hgroup>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:22:31.540

你不能再放任何东西了`<h1>`——`<h6>`在里面`<hgroup>`！

`<hgroup>`您必须使用 CSS 样式在元素内的连续标题之间留出更多空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:22:42.957

您可以放入的唯一有效标签`<hgroup>`是 from `<h1>`to `<h6>`，因此`<br />`这里是无效标签

![在此处输入图像描述](../Images/b61281ec62439b9867f8f0f5fc7597f0.png)

# c# - 将项目从 Visual Studio 2008 升级到 2012 后无法添加类型库

> ID：15322669
> 
> 赞同：1
> 
> 时间：2013-03-10T13:20:14.127
> 
> 标签：c#, winforms, com, reference, typelib

最近，我将我的 Winform 项目从 Visual Studio 2008 转换为 Visual Studio 2012，并尝试添加 COM 类型库引用。结果是以下错误消息。有人可以帮我解决错误吗？升级报告显示没有错误，所以我不确定从哪里开始进行故障排除。

![在此处输入图像描述](../Images/63fb9b6cdb37990a360c7e5c3a4d0d02.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:35:40.377

您是尝试从 COM 组件选项卡还是通过浏览来引用？

此页面 ( [http://msdn.microsoft.com/en-us/library/vstudio/wkze6zky.aspx](http://msdn.microsoft.com/en-us/library/vstudio/wkze6zky.aspx) ) 包含有关添加 COM 组件的一些信息：

“如果要添加对包含内部清单的已注册 COM DLL 的引用，请确保先取消注册 DLL。如果不这样做，Visual Studio 会将程序集引用添加为 ActiveX 组件而不是本机 DLL。 "

希望这有点帮助。

# android - 如何从相机意图中获取图像路径？

> ID：15322670
> 
> 赞同：3
> 
> 时间：2013-03-10T13:20:21.873
> 
> 标签：android, image, android-intent, camera

我使用 android 2.1，我想从相机意图结果中获取真实路径。我[从 ACTION_IMAGE_CAPTURE Intent 中读取了 Get Path of image](https://stackoverflow.com/questions/4184951/get-path-of-image-from-action-image-capture-intent)但它适用于 android 2.2。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (requestCode == CAMERA_RESULT)
    {
        Bitmap thumbnail = (Bitmap) data.getExtras().get("data");
        imv.setImageBitmap(thumbnail);
         Uri selectedImageUri = data.getData();
         String path = getRealPathFromURI(selectedImageUri);
    }
}

private String getRealPathFromURI(Uri contentUri)
{
    try
    {
        String[] proj = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(contentUri, proj, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }
    catch (Exception e)
    {
        return contentUri.getPath();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T14:10:52.033

> 上面的代码适用于某些手机，但在我的情况下不适用于三星手机，因此我为所有设备实现了通用逻辑。

当我从相机捕捉照片时，我使用光标实现逻辑并迭代光标并获取从相机捕捉的最后一张照片路径。

```
Cursor cursor = getContentResolver().query(Media.EXTERNAL_CONTENT_URI, new String[]{Media.DATA, Media.DATE_ADDED, MediaStore.Images.ImageColumns.ORIENTATION}, Media.DATE_ADDED, null, "date_added ASC");
if(cursor != null && cursor.moveToFirst())
{
    do {
        uri = Uri.parse(cursor.getString(cursor.getColumnIndex(Media.DATA)));
        photoPath = uri.toString();
    }while(cursor.moveToNext());
    cursor.close();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-29T08:41:44.790

@TGMCians 给出的答案有效，但我能够进一步即兴创作，如下所示

```
Cursor cursor = getContentResolver().query(Media.EXTERNAL_CONTENT_URI, new String[]{Media.DATA, Media.DATE_ADDED, MediaStore.Images.ImageColumns.ORIENTATION}, Media.DATE_ADDED, null, "date_added ASC");
if(cursor != null && cursor.moveToLast()){
    Uri fileURI = Uri.parse(cursor.getString(cursor.getColumnIndex(Media.DATA)));
    String fileSrc = fileURI.toString();
    cursor.close();
} 
```

# ruby-on-rails - Cookies 存储似乎未初始化

> ID：15322672
> 
> 赞同：1
> 
> 时间：2013-03-10T13:20:27.953
> 
> 标签：ruby-on-rails, ruby, cookies

我有带有 ruby​​ 1.9.3-p286 的 rails 3.1 应用程序。在我之前在 ApplicationController 中的一个过滤器中，我有`session_create_params = {deviceId: cookies.signed[:device_id]}`

当我调用我的一些集成测试时，我得到`undefined method [ ]' for nil:NilClass`似乎 cookie 为零。我该如何解决这个问题或我做错了什么？

```
require 'test_helper'

class CreatingSomeStuff < ActionDispatch::IntegrationTest
  setup do
    Capybara.current_driver = :webkit
  end
  context 'When viewing some stuff' do
    setup do
      @some_url = 'http://www.google.com'
      visit("/stuff?url=#{@some_url}")
    end
  end
end 
```

# python - 类：我不太了解它们

> ID：15322674
> 
> 赞同：-4
> 
> 时间：2013-03-10T13:20:31.073
> 
> 标签：python, python-2.7

我目前正在阅读“如何像计算机科学家一样思考”一书

现在我得到了我从书中做的这段代码

```
class Card:
    suitList = ["Clubs", "Diamonds", "Hearts", "Spades"]
    rankList = ["narf", "Ace", "2", "3", "4", "5", "6", "7",
                "8", "9", "10", "Jack", "Queen", "King"]

    def __init__(self, suit=0, rank=0):
        self.suit = suit
        self.rank = rank

    def __str__(self):
        return (self.rankList[self.rank] + " of " + self.suitList[self.suit])

    def __cmp__(self, other):
        #check the suits
        if self.suit > other.suit: return 1
        if self.suit < other.suit: return -1
        #suits are the same... check ranks
        if self.rank > other.rank: return 1
        if self.rank < other.rank: return -1
        #ranks are the same... it's a tie
        return 0    

class Deck:
    def __init__(self):
        self.cards = []
        for suit in range(4):
            for rank in range(1, 14):   
                self.cards.append(Card(suit, rank))

    def printDeck(self):
        for card in self.cards:
            print card

    def __str__(self):
        s = ""
        for i in range(len(self.cards)):
            s = s + " "*i +str(self.cards[i]) + "\n"
        return s

    def shuffle(self):
        import random
        nCards = len(self.cards)
        for i in range(nCards):
            j = random.randrange(i, nCards)
            self.cards[i], self.cards[j] = self.cards[j], self.cards[i]

    def removeCard(self, card):
        if card in self.cards:
            self.cards.remove(card)
            return 1
        else:
            return 0

    def popCard(self):
        return self.cards.pop()

    def isEmpty(self):
        return (len(self.cards) == 0)

    def deal(self, hands, nCards=999):
        nHands = len(hands)
        for i in range(nCards):
            if self.isEmpty(): break
            card = self.popCard()
            hand = hands[i % nHands]
            hand.addCard(card)

class Hand(Deck):
    def __init__(self, name=""):
        self.cards = []
        self.name = name

    def addCard(self,card):
        self.cards.append(card)

    def __str__(self):
        s = "Hand " + self.name
        if self.isEmpty():
            return s + "is empty\n"
        else:
            return s + " contains\n" + Deck.__str__(self)

class CardGame:
    def __init__(self):
        self.deck = Deck
        self.deck.shuffle()

deck = Deck()
deck.shuffle()
hand = Hand("frank")
deck.deal([hand], 5)
print hand 
```

现在我明白了自我，但我不明白在哪里

```
self.deck.shuffle() 
```

来自以及为什么它在`__init__`函数中。我需要的是对类和一些日常使用的很好的解释，这将向我解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:24:27.250

该`__init__`函数正如其名称所暗示的那样：初始化该类的一个实例。

类之于千篇一律，就像对象之于 cookie：它是创建内存中的实例并与之交互的蓝图。

类和对象有什么用？它们将数据和功能封装到一个单元中。

计算机科学中的每一种语言都试图帮助你做一件事：管理复杂性。它封装了细节并将它们隐藏在用户面前，因此他们只需要考虑该类如何映射到他们的真实生活体验，以便有效地使用它。

这是给你的另一个想法：*不要使用 classes*。Python 是面向对象和函数式编程的完美结合。如果您不了解类，请在没有它​​们的情况下编写 Python。继续学习，直到你看到光明，然后开始将它们融入你的设计中。

# java - GWT 模块...在项目源或资源中找不到

> ID：15322675
> 
> 赞同：4
> 
> 时间：2013-03-10T13:20:35.120
> 
> 标签：java, gwt

我是 GWT 的新手。我尝试制作一个 Web 应用程序并使用以下 maven 配置来配置 gwt。我将它放在配置文件中，因此只有在调用配置文件时才会编译 gwt。

简介如下：

```
<profiles>
        <profile>
            <id>gwtCompile</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>gwt-maven-plugin</artifactId>
                        <version>2.5.0</version>
                        <configuration>
                            <extraJvmArgs>-Xmx512M -Xss1024k </extraJvmArgs>
                            <module>com.mycompany.MyMainModule</module>
                            <inplace>true</inplace>
                            <force>true</force>
                            <disableCastChecking>true</disableCastChecking>
                            <style>PRETTY</style>
                            <warSourceDirectory>${basedir}/war</warSourceDirectory>
                        </configuration>
                        <dependencies>
                            <dependency>
                                <groupId>com.google.gwt</groupId>
                                <artifactId>gwt-user</artifactId>
                                <version>${gwt.version}</version>
                            </dependency>
                            <dependency>
                                <groupId>com.google.gwt</groupId>
                                <artifactId>gwt-dev</artifactId>
                                <version>${gwt.version}</version>
                            </dependency>
                        </dependencies>
                        <executions>
                            <execution>
                                <id>compileJS</id>
                                <phase>process-classes</phase>
                                <goals>
                                    <goal>compile</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile> 
```

当我运行命令时：

```
 mvn clean install -Dmaven.test.skip=true -PgwtCompile 
```

它给了我错误信息：

```
GWT Module com.mycompany.MyMainModule not found in project sources or resources. 
```

我的 MyMainModule.gwt.xml 是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<module>
    <inherits name='com.google.gwt.user.User' />

    <entry-point class='com.mycompany.MyMainModule' />

    <source path='client' />
    <source path='shared' />
</module> 
```

我可以看到一些在线文档说多模块项目应该有这个错误。但 mime 不是一个多模块项目。

有人可以让我知道这可能出了什么问题吗？

非常感谢。

编辑：

我已经准备好了：

```
<resources>
    <resource>
        <directory>${basedir}/src/main/java</directory>
        <includes>
            <include>**/client/**</include>
            <include>**/*.gwt.xml</include>
        </includes>
    </resource>
    <resource>
        <directory>${basedir}/src/main/resources</directory>
        <includes>
            <include>**/*</include>
        </includes>
    </resource>
</resources> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T14:41:14.810

尝试在构建标签中添加资源标签。

```
<build>
    <resources>
        <resource>
            <directory>${basedir}/src/main/java</directory>
        </resource>
        <resource>
            <directory>${basedir}/src/main/resources</directory>
        </resource>
    </resources>
    <!-- **Other build tags** -->
</build> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T10:44:35.093

我找到了解决方案。问题是 gwt-maven-plugin 中指定的模块必须是 .gwt.xml 文件的确切路径名，而不是入口点文件。

所以配置文件必须是：

```
<configuration>
    <extraJvmArgs>-Xmx512M -Xss1024k </extraJvmArgs>
    <module>com.mycompany.myoroject.MyMainModule</module>
    <inplace>true</inplace>
    <force>true</force>
    <disableCastChecking>true</disableCastChecking>
    <style>PRETTY</style>
    <warSourceDirectory>${basedir}/war</warSourceDirectory>
</configuration> 
```

因为我的 MyMainModule.gwt.xml 在 src/main/com/mycompany/myproject/MyMainModule.gwt.xml 下。

非常感谢您的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T01:49:13.243

重要的配置变量是 outputDirectory 和 webappDirectory。看这里：

```
<project
    xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://maven.apache.org/POM/4.0.0
            http://maven.apache.org/maven-v4_0_0.xsd
            ">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.gwt</groupId>
    <artifactId>gwt-ui-sandbox</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>GWT UI Sandbox</name>

    <properties>
        <license.licenseName>apache_v2</license.licenseName>
        <license.inceptionYear>2012</license.inceptionYear>

        <webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory>
        <default.encoding>UTF-8</default.encoding>
        <project.build.sourceEncoding>${default.encoding}</project.build.sourceEncoding>
        <project.reporting.outputEncoding>${default.encoding}</project.reporting.outputEncoding>
        <maven.compiler.plugin.encoding>${default.encoding}</maven.compiler.plugin.encoding>
        <gwt.version>2.5.0</gwt.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
        </dependency>        
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
        </dependency>
    </dependencies>

    <build>
        <outputDirectory>${webappDirectory}/WEB-INF/classes</outputDirectory>

        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>false</filtering>
                <excludes>
                    <exclude>**/*.css</exclude>
                    <exclude>**/Messages.properties</exclude>
                </excludes>
            </resource>
        </resources>        

        <plugins>
            <!--            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>license-maven-plugin</artifactId>
                <version>1.1</version>
                <executions>
                    <execution>
                        <id>first</id>
                        <goals>
                            <goal>update-file-header</goal>
                        </goals>
                        <phase>process-sources</phase>
                    </execution>
                </executions>
            </plugin>-->

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.6</version>
            </plugin>

            <!-- Copy static web files before executing gwt:run -->
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>exploded</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <webappDirectory>${webappDirectory}</webappDirectory>
                </configuration>                
            </plugin>

            <plugin>
                <artifactId>maven-source-plugin</artifactId>
                <version>2.1.2</version>
                <executions>
                    <execution>
                        <id>attach-sources</id>
                        <goals>
                            <goal>jar-no-fork</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <artifactId>maven-failsafe-plugin</artifactId>
                <version>2.6</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>integration-test</goal>
                            <goal>verify</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>            

            <plugin>
                <artifactId>maven-javadoc-plugin</artifactId>
                <version>2.8.1</version>
            </plugin>

            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <version>8.1.9.v20130131</version>
                <executions>                
                    <execution>
                        <id>start-jetty</id>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>deploy-war</goal>
                        </goals>
                        <configuration>
                            <daemon>true</daemon>
                            <scanIntervalSeconds>0</scanIntervalSeconds>

                        </configuration>
                    </execution>
                    <execution>
                        <id>stop-jetty</id>
                        <phase>post-integration-test</phase>
                        <goals>
                            <goal>stop</goal>
                        </goals>
                    </execution>
                </executions>    
                <configuration>
                    <systemProperties>
                        <systemProperty>
                            <name>some.prop</name>
                            <value>false</value>
                        </systemProperty>
                    </systemProperties>
                    <stopKey>stop</stopKey>
                    <stopPort>8079</stopPort>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>${gwt.version}</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                            <goal>css</goal>
                            <goal>i18n</goal>
                            <goal>generateAsync</goal>
                            <!-- package source files with .class files: -->
                            <!-- (this is not good for dev mode incremental parsing) -->
                            <!-- <goal>resources</goal> -->
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <runTarget>index.html</runTarget>
                    <hostedWebapp>${webappDirectory}</hostedWebapp>
                    <compileReport>false</compileReport>
                    <style>PRETTY</style>
                    <draftCompile>true</draftCompile>
                    <logLevel>INFO</logLevel>

                    <mode>manual</mode>
                    <productionMode>true</productionMode>
                    <remoteweb>rmi://127.0.0.1/chromium</remoteweb>
                    <browser>/usr/bin/chromium-browser</browser>
                    <timeOut>${gwt.timeout}</timeOut>

                    <i18nMessagesBundles>
                        <!-- need to compile only one language in order to make the compiler happy... -->
                        <!-- My guess: GWT seems to directly use the properties files when using translations from sub-modules -->
                        <i18nMessagesBundle>com.gwt.uisandbox.Messages</i18nMessagesBundle>
                    </i18nMessagesBundles>

                    <cssFiles>
                        <cssFile>com/gwt/uisandbox/Style.css</cssFile>
                    </cssFiles>
                </configuration>
            </plugin>

            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <phase>process-resources</phase>
                        <configuration>
                            <target>
                                <!-- http://code.google.com/p/google-web-toolkit/issues/detail?id=4599 -->
                                <replace dir="${basedir}">
                                    <include name="target/generated-sources/gwt/com/gwt/uisandbox/Style.java"/>
                                    <replacetoken>interface Style extends CssResource {</replacetoken>
                                    <replacevalue>public interface Style extends CssResource {</replacevalue>
                                </replace>
                            </target>
                        </configuration>
                        <goals>
                            <goal>run</goal>
                        </goals>                        
                    </execution>
                </executions>
            </plugin>

            <!-- http://maven.apache.org/plugins/maven-enforcer-plugin/plugin-info.html -->
            <plugin>
                <artifactId>maven-enforcer-plugin</artifactId>
                <executions>
                    <execution>
                        <id>enforce-sane-versions</id>
                        <goals>
                            <goal>enforce</goal>
                        </goals>
                        <configuration>
                            <rules>
                                <requirePluginVersions />
                                <DependencyConvergence />
                            </rules>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>

        <pluginManagement>
            <plugins>
                <plugin>
                    <artifactId>maven-clean-plugin</artifactId>
                    <version>2.5</version>
                </plugin>        
                <plugin>
                    <artifactId>maven-resources-plugin</artifactId>
                    <version>2.6</version>
                </plugin>        
                <plugin>
                    <artifactId>maven-source-plugin</artifactId>
                    <version>2.1.2</version>
                </plugin>        
                <plugin>
                    <artifactId>maven-deploy-plugin</artifactId>
                    <version>2.7</version>
                </plugin>        
                <plugin>
                    <artifactId>maven-install-plugin</artifactId>
                    <version>2.4</version>
                </plugin>        
                <plugin>
                    <artifactId>maven-site-plugin</artifactId>
                    <version>3.2</version>
                </plugin>        
                <plugin>
                    <artifactId>maven-jar-plugin</artifactId>
                    <version>2.4</version>
                </plugin>        
                <plugin>
                    <artifactId>maven-enforcer-plugin</artifactId>
                    <version>1.2</version>
                </plugin>
                <plugin>
                    <artifactId>maven-javadoc-plugin</artifactId>
                    <version>2.9</version>
                </plugin>                
                <plugin>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <version>2.13</version>
                </plugin>        
            </plugins>
        </pluginManagement>
    </build>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>commons-codec</groupId>
                <artifactId>commons-codec</artifactId>
                <version>1.7</version>
            </dependency>
            <dependency>
                <groupId>com.google.gwt</groupId>
                <artifactId>gwt-user</artifactId>
                <version>${gwt.version}</version>
                <!-- netbeans needs provided scope to find gwt sources (when debuggung) -->
                <scope>provided</scope>
            </dependency>
            <dependency>
                <groupId>log4j</groupId>
                <artifactId>log4j</artifactId>
                <version>1.2.17</version>
            </dependency>
            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>4.11</version>
            </dependency>
            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-log4j12</artifactId>
                <version>1.6.6</version>
            </dependency>
            <dependency>
                <groupId>commons-io</groupId>
                <artifactId>commons-io</artifactId>
                <version>2.4</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project> 
```

（见[这里](http://javagc.blogspot.de/2013/03/example-gwt-maven-pomxml.html)）

顺便说一句：在构建一个包含在另一个最终编译的 UI 模块中的模块时，您应该只将 java 文件放入最终结果中（就像其他响应所建议的那样）。否则，它会破坏 gwt:run 的增量 java 解析机制。

# android - Eclipse Android XML 编辑器错误：文件不存在

> ID：15322677
> 
> 赞同：2
> 
> 时间：2013-03-10T13:21:00.893
> 
> 标签：android, xml, eclipse

我一直在使用 Eclipse 经典最后一个版本来开发 Android 应用程序，现在它崩溃了，我无法查看或编写任何 xml 文件。打开 Eclipse 时出现的错误如下： Android XML Editor Error: The file doesn't exist

这是我的错误的快照：

[![错误 1：打开 Eclipse 时](../Images/769ba4146dc2c2a79d15d06f85cbf4d1.png)](https://i.stack.imgur.com/NwYXP.png) [![错误 2：打开 XML 文件后](../Images/db9812a779b5a4ee8f79e2cd8ef5e10b.png)](https://i.stack.imgur.com/PS4Lz.png)

谢谢你，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-13T13:54:32.237

我遇到了类似的问题，并通过以下步骤解决了它 1）打开了一个 XML 文件正常工作的项目。2) 关闭上一个项目出错的 XML 文件。3）重新启动Eclipse。

当我家中出现电源故障时，我收到了这个错误，不知道这个错误是什么意思，但我用这种方式修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T19:08:07.570

我用下载的原始文件夹替换了 eclipse 主文件夹，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-10T15:26:00.043

当您打开 Eclipse 时，您将看到 3 或 4 个 .xml 文件已打开，例如 string.xml 等...关闭所有这些文件并关闭您的 Eclipse。再次打开eclipse，您将不会再看到此错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-23T06:17:45.693

请关闭所有 xml 文件并重新启动您的 Eclipse SDK，当工作区的元数据和插件多于此类错误时，它将解决，但简单的解决方案是您必须关闭所有 xml 并重新启动您的 SDK

# google-chrome-devtools - 奇怪的瀑布滞后

> ID：15322682
> 
> 赞同：1
> 
> 时间：2013-03-10T13:21:39.643
> 
> 标签：google-chrome-devtools

我真的很好奇，为什么我的瀑布中有一个空白区域？看起来一切都被缓存了，但 html 和 css 之间仍然存在一些神秘的 100 毫秒延迟。

![ ](../Images/4ceaf71fe0dc2794d7e1a24a1047aab4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:33:30.873

浏览器需要解析你的 html 文件。这可能需要一些时间。

您可以尝试在时间轴面板中检查问题。它提供了有关浏览器内几乎所有操作的信息。

# php - 使用 yahoo smtp 从 php 发送电子邮件

> ID：15322683
> 
> 赞同：-2
> 
> 时间：2013-03-10T13:21:42.967
> 
> 标签：php

我厌倦了寻找有关如何配置 php ini 以使用 yahho 或 gmail 发送电子邮件的解决方案。当我使用 mil 功能时，它不会给我任何错误，但我也没有收到邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:34:04.933

您可以在 php.ini 中配置“[邮件功能]”部分。并将 SMTP 设置为您的 SMTP 服务器，并将 smtp_port 设置为 25，这是用于 SMTP 连接的标准端口。

在 gmail 中，设置如下：

> SMTP：smtp.gmail.com
> 
> TLS/STARTTLS 端口：587
> 
> SSL 端口：465

希望这对您有所帮助。

# python - mpmath 矩阵求逆的替代方案或加速

> ID：15322686
> 
> 赞同：3
> 
> 时间：2013-03-10T13:21:45.247
> 
> 标签：python, python-3.x, matrix, inversion, mpmath

我正在用 python 编写一些代码，这些代码需要经常反转大方阵（100-200 行/列）。

我正在达到机器精度的极限，所以已经开始尝试使用`mpmath`任意精度的矩阵求逆，但它非常慢，即使使用`gmpy`.

以精度 30（十进制）反转大小为 20、30、60 的随机矩阵需要约 0.19、0.60 和 4.61 秒，而相同的操作`mathematica`需要 0.0084、0.015 和 0.055 秒。

这是在 Arch linux 机器上使用`python3`and `mpmath 0.17`（不确定 gmpy 版本）。我不确定为什么 mpmath 慢得多，但是否有任何开源库可以接近数学为此管理的速度（即使快 1/2 也不错）？

我不需要任意精度——128 位可能就足够了。我也只是不明白 mpmath 怎么会这么慢。它必须使用非常不同的矩阵求逆算法。具体来说，我正在使用`M**-1`.

有没有办法让它使用更快的算法或加速它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:42:58.490

不幸的是，mpmath 中的 Linera 代数相当慢。有许多库可以更好地解决这个问题（例如[Sage ）。](http://sagemath.org)也就是说，作为 Stuart 建议的后续，在 Python 中进行相当快速的高精度矩阵乘法相当容易，无需安装任何库，使用定点算术。这是一个使用 mpmath 矩阵进行输入和输出的版本：

```
def fixmul(A, B, prec):
    m = A.rows; p = B.rows; n = B.cols;
    A = [[A[i,j].to_fixed(prec) for j in range(p)] for i in range(m)]
    B = [[B[i,j].to_fixed(prec) for j in range(n)] for i in range(p)]
    C = [([0] * n) for r in range(m)]
    for i in range(m):
        for j in range(n):
            s = 0
            for k in range(p):
                s += A[i][k] * B[k][j]
            C[i][j] = s
    return mp.matrix(C) * mpf(2)**(-2*prec) 
```

在 256 位精度下，这对我来说将两个 200x200 矩阵相乘比 mpmath 快 16 倍。这样直接写一个矩阵求逆程序也不难。当然，如果矩阵条目非常大或非常小，您需要先重新调整它们。[一个更可靠的解决方案是使用gmpy](http://code.google.com/p/gmpy/)中的浮点类型编写自己的矩阵函数，这应该基本上一样快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:21:26.417

我假设双精度对于最终结果的精度来说不是问题，但对于某些矩阵，它会导致逆的中间结果出现问题。在这种情况下，让我们将普通 numpy（双精度）逆的结果视为一个很好的近似值，然后将其用作牛顿方法的几次迭代的起点来求解逆。

让**A**是我们要反转的矩阵，**X**是我们对逆矩阵的估计。牛顿方法的迭代简单地包括：

```
X = X*(2I - AX) 
```

对于大型矩阵，计算上述几次迭代的努力与找到逆矩阵的努力相比几乎是微不足道的，它可以大大提高最终结果的准确性。试试这个。

顺便说一句，**I**是上述等式中的单位矩阵。

**编辑添加代码以测试浮动类型的精度。**

使用此代码测试浮点类型的精度。

```
x = float128('1.0')
wun = x
two = wun + wun
cnt = 1
while True:
   x = x/two
   y = wun + x
   if y<=wun: break
   cnt +=1

print 'The effective number of mantissa bits is', cnt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-08T07:10:09.300

[MATLAB 多精度工具箱](http://www.advanpix.com/)使用 128 位精度（Core i7 930）提供以下时序：

20x20 - 0.007 秒

30x30 - 0.019 秒

60x60 - 0.117 秒

200x200 - 3.2 秒

请注意，对于现代 CPU，这些数字要低得多。

# php - 如何从 wordpress 中特定父页面的子页面调用信息？

> ID：15322688
> 
> 赞同：1
> 
> 时间：2013-03-10T13:21:56.463
> 
> 标签：php, wordpress, parent-child

女士们和先生们，男孩和女孩，所有年龄段的大师，极客和天才。

我的 wordpress 主题有问题。

我正在为一家拥有在线商店的公司创建一个网站。店铺页面的层次结构如下：

店铺
-分类页面
--产品页面

其中一个类别页面称为“设计”，其页面 ID 为 22。我想在`<aside>`wordpress 的侧边栏中显示，作为链接，标题和来自最新子页面的图像'设计”页面。每个产品页面都有一个使用名为“Product_Image”的自定义字段定义的图像。

我在stackoverflow上找到了这段代码，我已经对其进行了修改以显示我需要的数据，但它不仅调用了设计页面的最新子页面，还调用了整个站点的最新页面。

```
<?php
   $args=array(
   'showposts'=>1,
   'post_type' => 'page',
   'caller_get_posts'=>1
   );
$my_query = new WP_Query($args);
if( $my_query->have_posts() ) {
  while ($my_query->have_posts()) : $my_query->the_post(); ?>
    <div>
      <a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?>
        <?php  echo "<img src='" . get_post_meta($post->ID, "Product_Image", true) . "' />"; ?>
      </a>
    </div>
  <?php
  endwhile;
}
?> 
```

我对 PHP 完全陌生。我才刚刚开始学习使用“Tutsplus - PHP Essentials”。

谁能帮我修改此代码，使其仅显示来自设计页面的最新子页面的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:34:14.540

您可以向查询添加新参数，以仅获取设计页面的子页面。所以，修改你的 $args 数组，如下所示：

```
$args=array(
  'showposts'=>1,
  'post_type' => 'page',
  'caller_get_posts'=>1,
  'post_parent' => '22'  // get pages that are children of the design page
); 
```

将其余代码保持原样，它应该可以工作。
供将来参考，请参阅此处了解所有 WP_Query 参数：[http ://codex.wordpress.org/Function_Reference/WP_Query#Parameters](http://codex.wordpress.org/Function_Reference/WP_Query#Parameters)

# java - 在同一个应用程序上下文中持有同一个 spring bean 的两个不同版本

> ID：15322690
> 
> 赞同：0
> 
> 时间：2013-03-10T13:22:02.157
> 
> 标签：java, spring

我有一个基于 spring 的应用程序，它使用 bean 来描述某些实体的元数据。随着我的应用程序的增长，元数据也会发生变化。

在我的应用程序发布新版本时，我希望将旧的 bean 定义与新的 bean 定义一起保持，并使它们可用于程序。

我最初的想法是在 bean 定义中添加一个名为“Version”的新属性。它的值将对应于一个发布版本。因此，如果我想更改其中一个实体的元数据定义，我会复制粘贴旧定义，进行所需的更改（例如添加一个字段）并更新版本字段。

在代码中，我可以轻松地按版本过滤 bean。

**问题**：

自然，Spring 不允许我拥有两个具有相同 id 的 bean（它不知道我实际上可以通过版本来消除歧义）。似乎我不需要在 bean 定义中添加新属性，而是需要在其名称中对版本进行编码。

这是在 Spring 中执行此操作的正确方法吗（我没有找到任何 OOTB 支持）？有没有其他模式可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:14:47.830

您不能同时拥有两个相同类型*和*相同名称的 bean。您可以在 bean 名称中包含版本后缀，但这可能会破坏您的某些`@Autowired`注入。

Spring 配置文件（在 3.1 中引入）是一种在替代上下文配置之间快速切换的方法，但同时激活其中两个可能会再次导致冲突。

# python - OpenKinect Libfreenect 中的 K4W Python 问题

> ID：15322694
> 
> 赞同：2
> 
> 时间：2013-03-10T13:22:20.917
> 
> 标签：python, linux, wrapper, kinect, openkinect

[我已经从https://github.com/renewagner/libfreenect/tree/k4w-wip](https://github.com/renewagner/libfreenect/tree/k4w-wip)在 Linux 11.10 上安装了开放 kinect 项目的 K4W 分支。我可以导航到目录 libfreenect/build 并运行命令：

```
sudo bin/glview 
```

并且输出正常。

我还从 libfreenect/wrappers/python 安装了 Python 包装器，并且可以成功导入库。但是，如果我运行一个简单的代码，例如

```
import freenect
freenect.sync_get_depth() 
```

我保存为 kinect1.py 然后使用命令运行`sudo kinect1.py`

我收到以下错误：

> 错误：无效索引 [0]
> 
> 错误：无法打开设备 1.) 是否已插入？2.) 阅读自述文件

但是，我可以直接返回运行 glview 示例，它仍然可以找到。所以我必须在 Python 包装器实现中遗漏一些东西。我希望有人能帮帮忙。

# matlab - 尝试播放声音时出错

> ID：15322696
> 
> 赞同：2
> 
> 时间：2013-03-10T13:22:34.417
> 
> 标签：matlab, audio

类似于这个问题[Basic sound error in Matlab](https://stackoverflow.com/q/9369833/501663) (with no answer)，当我尝试播放声音（Matlab 2012a，Windows 7 64bit）时，使用`sound`、`soundsc`或`audioplayer`，我得到一个错误：

```
>> load chirp.mat;
>> soundsc(y,Fs)
Error using sound (line 60)
Too many input arguments.

Error in soundsc (line 48)
sound(varargin{:}) 
```

我怀疑这是设备驱动程序问题，但这只是猜测。Matlab 似乎看到了音频设备：

```
>> devinfo = audiodevinfo;
>> devinfo.output.Name
ans =
Primary Sound Driver (Windows DirectSound)
ans =
Speakers (High Definition Audio Device):1 (Windows DirectSound)
ans =
Speakers (High Definition Audio Device):2 (Windows DirectSound) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:11:49.867

问题是我的 Matlab 路径中的一个函数是“名称隐藏”Matlab 自己的函数之一。不幸的是，它是`assert`函数，它被深埋在调用堆栈中，所以我花了一些时间才发现。此外，我试图理解为什么断言在它检查的条件完全正确时会失败......

# c++ - 将 char* 分配给字符串变量后删除

> ID：15322697
> 
> 赞同：3
> 
> 时间：2013-03-10T13:22:37.893
> 
> 标签：c++, string, pointers, char

我已经执行了下面的代码，它工作得很好。由于它是关于指针的，我只是想确定一下。虽然我确信将 char* 分配给 string 会生成一个副本，即使我删除了 char*，string var 也会保留该值。

```
 #include <stdio.h>
    #include <string.h>
    #include <string>
    #include <iostream>

    int main()
    {
        std::string testStr = "whats up ...";
        int strlen = testStr.length();
        char* newCharP = new char[strlen+1];
        memset(newCharP,'\0',strlen+1);
        memcpy(newCharP,testStr.c_str(),strlen);

        std::cout << "  :11111111   :   " << newCharP << "\n";
        std::string newStr = newCharP ;

        std::cout << "  2222222 : " << newStr << "\n";
        delete[] newCharP;
        newCharP = NULL;

        std::cout << "  3333333 : " << newStr << "\n";
    } 
```

我只是在我的公司项目中更改了一些代码，并且 char* 在 C++ 中的函数之间传递。char* 指针已复制到字符串，但 char* 在函数末尾被删除。我找不到任何具体的原因。所以我只是删除 char*，只要它被复制到一个字符串中。这会有什么问题吗...？

PS：我已经在 Codereview 中问过这个问题，但我得到了将其移至 SO 的建议。因此，我已将其标记为关闭并在此处发布问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T13:24:41.027

不，因为`std::string`复制了你的内容`char*`，所以当你不再需要它时，你可以随意删除它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-10T13:25:26.320

没有问题，只要`newChar`指向一个以null结尾的字符串，并且本身不为null。

`std::string`具有允许从 a 进行隐式构造的构造函数`const char*`。它会复制由输入表示的字符串，`const char *`因此它在假设`char*`是一个空终止字符串的情况下工作，因为没有其他方法可以知道要复制多少个字符到字符串自己的数据存储中。此外，`NULL`标准实际上不允许使用指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T14:09:07.237

代码很好，如果您查看这里的构造函数，`std::basic_string` [您](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)将能够推断出`std::string`这里有两个有趣的构造函数：

```
(4) string(char const*,
           size_type count,
           Allocator const& alloc = Allocator() );

(5) string(char const* s,
           Allocator const& alloc = Allocator() ); 
```

两者都执行复制，第一个读取完全`count`字符，而第二个读取直到遇到 NUL 字符。

* * *

话虽如此，我积极鼓励您*不要*在这里使用动态分配。如果您想使用临时缓冲区，请考虑`std::vector`改用。

```
#include <stdio.h>
#include <string.h>
#include <string>
#include <iostream>

int main()
{
    std::string testStr = "whats up ...";
    unsigned strlen = testStr.length();

    std::vector<char> buffer(strlen+1);

    memset(&buffer[0],'\0',strlen+1);
    memcpy(&buffer[0], testStr.c_str(), strlen);

    std::cout << "  :11111111   :   " << &buffer[0] << "\n";

    std::string newStr(&buffer[0]);

    std::cout << "  2222222 : " << newStr << "\n";

    buffer.clear();

    std::cout << "  3333333 : " << newStr << "\n";
} 
```

注意：`vector`和`string`都有范围构造函数，从一系列迭代器中构建它们，我故意避免使用它们以避免混淆和你不知所措。只知道您可以使用它们来避免调用`memcpy`和冒缓冲区溢出的风险。

# python - 具有嵌套 Web 请求的 Gevent 池

> ID：15322701
> 
> 赞同：4
> 
> 时间：2013-03-10T13:23:08.157
> 
> 标签：python, web, pool, gevent

我尝试组织最多 10 个并发下载的池。该函数应下载基本 url，然后解析此页面上的所有 url 并下载每个 url，但并发下载的总数量不应超过 10。

```
from lxml import etree 
import gevent
from gevent import monkey, pool
import requests

monkey.patch_all()
urls = [
    'http://www.google.com', 
    'http://www.yandex.ru', 
    'http://www.python.org', 
    'http://stackoverflow.com',
    # ... another 100 urls
    ]

LINKS_ON_PAGE=[]
POOL = pool.Pool(10)

def parse_urls(page):
    html = etree.HTML(page)
    if html:
        links = [link for link in html.xpath("//a/@href") if 'http' in link]
    # Download each url that appears in the main URL
    for link in links:
        data = requests.get(link)
        LINKS_ON_PAGE.append('%s: %s bytes: %r' % (link, len(data.content), data.status_code))

def get_base_urls(url):
    # Download the main URL
    data = requests.get(url)
    parse_urls(data.content) 
```

如何组织它以并发方式，但保持所有 Web 请求的一般全局池限制？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-07T00:44:50.270

我认为以下内容应该可以满足您的需求。我在我的示例中使用 BeautifulSoup 而不是您拥有的链接条带化的东西。

```
from bs4 import BeautifulSoup
import requests
import gevent
from gevent import monkey, pool
monkey.patch_all()

jobs = []
links = []
p = pool.Pool(10)

urls = [
    'http://www.google.com', 
    # ... another 100 urls
]

def get_links(url):
    r = requests.get(url)
    if r.status_code == 200:
        soup = BeautifulSoup(r.text)
        links.extend(soup.find_all('a'))

for url in urls:
    jobs.append(p.spawn(get_links, url))
gevent.joinall(jobs) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-08T05:06:54.740

gevent.pool 将限制并发的greenlets，而不是连接。

您应该使用[会话](http://docs.python-requests.org/en/latest/user/advanced.html#session-objects)与[HTTPAdapter](http://www.python-requests.org/en/latest/api/#requests.adapters.HTTPAdapter)

```
连接限制 = 10
适配器 = requests.adapters.HTTPAdapter(pool_connections=connection_limit,
                                        pool_maxsize=connection_limit)
会话 = 请求。会话（）
session.mount('http://', 适配器)
session.get('一些网址')
# 或者用 gevent 做你的工作
从 gevent.pool 导入池
# 如果处理数据的时间应该大于连接限制
# 比唐宁长，
# 进行更改运行处理。
池大小 = 15
池 = 池（池大小）
对于网址中的网址：
    pool.spawn(session.get, url)

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:33:27.253

您应该使用[gevent.queue](http://www.gevent.org/gevent.queue.html)以正确的方式执行此操作。

这[（eventlet示例）](http://eventlet.net/doc/examples.html#recursive-web-crawler)也将有助于您理解基本思想。

Gevent 解决方案类似于 eventlet。

请记住，将有某个地方存储访问过的 URL，以免发生循环，因此您不会出现内存不足的错误，您需要引入一些限制。

# java - 尝试使用给定规则对字符串进行编码

> ID：15322705
> 
> 赞同：1
> 
> 时间：2013-03-10T13:23:52.933
> 
> 标签：java, encoding, character-encoding

我必须为包含各种记录的特定文件构建一个编码器/解码器工具，并且这些记录有多个字段。现在我有了这些字段及其编码的描述。称为“TBCD”的一组特定编码如下：

地址是 TBCD 格式的数据；这表示如果一个地址通过一串数字“123456789”来表达自己，它会以下列形式出现在票证中：

```
2 1 first byte
4 3
6 5
8 7
F 9 last byte 
```

地址的每个数字都以二进制表示，4 位。井号 (#) 编码为 h'C'，星号 (*) 编码为 h'B'，零 (0) 编码为 h'0'。当地址的位数为奇数时，值 h'F'（二进制 '1111'）用于填充。

为了对此进行解码，我具有以下功能：

```
public static String decodeTBCD(int field_size, byte[] field) {
    // TODO Auto-generated method stub
    if (field == null) {
        return null;
    }

    StringBuffer buffer = new StringBuffer();

    try {
        for (int i = 0; i < field_size; i++) {
            buffer.append(field[i] & 0x0F);
            if ((field[i] & 0xF0) != 0xF0)
                buffer.append((field[i] & 0xF0) >> 4);
        }
    } catch (Exception e) {
        System.out.println("INFORMATION" + "  decodeTBCD   "
                + e.getMessage());
        return null;
    }

    return buffer.toString();
} 
```

因此，如果输入字节数组是 {70,-9,1} 解码的字符串是 64710 。

现在我必须将相同的字符串编码回 TBCD 格式，为此我编写了以下代码：

```
 Integer i = Integer.parseInt(buffer.toString());
    ArrayList<Integer> digitStack = new ArrayList<Integer>();
    ArrayList<StringBuilder> tbcdStack = new ArrayList<StringBuilder>();
    while (i > 0) {
        digitStack.add(i % 10);
        i = i / 10;
    }
    int j = digitStack.size();
    while (j > 0) {
        StringBuilder s = new StringBuilder(
                Integer.toBinaryString(digitStack.get(j - 1)));
        while (s.length() != 4) {
            StringBuilder builder = new StringBuilder();
            builder.append("0");
            builder.append(s);
            s = builder;
        }
        j--;
        System.out.println(" s : " + s + " " + s.length());
        tbcdStack.add(s);
    }
    if (tbcdStack.size() % 2 != 0)
        tbcdStack.add(new StringBuilder("1111"));
    System.out.println(tbcdStack);
    int iterator = 0, k = 0;
    byte[] bytes = new byte[tbcdStack.size() / 2];
    while (k < tbcdStack.size() / 2) {
        StringBuilder buf1 = new StringBuilder();
        buf1.append(tbcdStack.get(iterator + 1));
        buf1.append(tbcdStack.get(iterator));
        Byte b1 = Byte.valueOf(buf1.toString(), 2);
        System.out.println((byte) b1);
        bytes[k++] = b1;
        iterator += 2;
    } 
```

我只是颠倒了这个过程，从解码的字符串中提取了所有数字，然后按照 digit2 后跟 digit1 的顺序连接数字，然后用 byte{"digit2" + "digit1"} 构建一个字节数组。但我没有得到正确的答案：

```
 DECODING : inside TBCD  70,-9,1 outside TBCD  64710  
 ENCODING : input 64710 . Individual digits : 0110, 0100, 0111, 0001, 0000, 1111  

  Result : first byte = 70 (correct) , second byte = 23 (need -9) , third byte = error (11110000 out of range). 
```

我在这里想念什么？

# python - 哪个数据结构用作字典数组？

> ID：15322708
> 
> 赞同：0
> 
> 时间：2013-03-10T13:24:19.437
> 
> 标签：python, arrays, list, namedtuple

我需要构建一个像这样的数据结构：

```
{
    key: {k: v for k in range(fixed_small_number)}
    for key in range(fixed_large_number)
} 
```

问题是我正在以一种“折衷”的方式构建它，每次多获取一个项目以放入随机 k 作为随机密钥，即我需要随机访问，并且我需要内部 dict 是可变的。

所以我的问题分为两个：

1.  外部字典的推荐类型。

2.  内部字典的推荐类型。

对我来说“最好的”解决方案是一组可变的命名元组，只是这个不存在。

我可以使用一个命名元组列表，然后用新数据重新创建每个，但这听起来非常浪费，因为列表不是随机访问效率高的，而且所有重写相同的数据。

是否有一些我不知道的神奇新结构？

编辑：使用示例：

```
for key, k, v in [('a', 1, 2), ('b', 1, 3), ('a', 2, 1), ('a', 3, 1), ('b', 3, 1) ...]:
    my_structre[key][k] = v 
```

编辑2：

事实证明，列表实际上确实[支持随机访问](https://stackoverflow.com/questions/3917574/how-is-pythons-list-implemented)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T13:32:02.550

您可以构建一个自定义类，`__slots__`用于限制使用的内存量：

```
class MutableEfficientNamedList(object):
    __slots__ = ('field1', 'field2', 'field3')

    def __init__(self, *values):
        for k, v in zip(self.__slots__, values):
            setattr(self, k, v)

    def __getitem__(self, i):
        return getattr(self, self.__slots__[i])

    def __setitem__(self, i, v):
        return setattr(self, self.__slots__[i], v)

    def __repr__(self):
        return '{}({})'.format(type(self).__name__, 
            ', '.join(repr(getattr(self, s)) for s in self.__slots__)) 
```

然后在你的结构中使用它们。它们可以像命名元组一样使用（允许按索引*和*名称访问），但它们允许变异。通过使用`__slots__`每个实例的内存占用量仍然很低：

```
>>> menl = MutableEfficientNamedList('foo', 'bar', 'baz')
>>> menl
MutableEfficientNamedList('foo', 'bar', 'baz')
>>> menl.field1
'foo'
>>> menl[0]
'foo'
>>> menl[1]
'bar'
>>> menl[1] = 'spam'
>>> menl.field2
'spam' 
```

您当然要为插槽提供有意义的名称，并且请为您的班级选择一个比我在示例中使用的名称更好的名称。:-)

为了扩展该`namedtuple()`模式，这里是一个通用工厂函数：

```
def namedlist(name, *attrs):
    """Create a named list class named `name` with attributes `attrs`.
       `attrs` must be strings representing valid Python identifiers.
    """
    class MutableEfficientNamedList(object):
        __slots__ = attrs

        def __init__(self, *values):
            for k, v in zip(self.__slots__, values):
                setattr(self, k, v)

        def __getitem__(self, i):
            return getattr(self, self.__slots__[i])

        def __setitem__(self, i, v):
            return setattr(self, self.__slots__[i], v)

        def __repr__(self):
            return '{}({})'.format(type(self).__name__, 
                ', '.join(repr(getattr(self, s)) for s in self.__slots__))

    MutableEfficientNamedList.__name__ = name
    return MutableEfficientNamedList

MyList = namedlist('MyList', 'foo', 'bar', 'baz')
nl = MyList(1, 2, 3)
print nl  # MyList(1, 2, 3)
print nl.bar  # 2
print nl[1]  # 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T13:32:29.450

`defaultdict`感觉就在这里：

```
from collections import defaultdict

d = defaultdict(lambda: defaultdict(int))

d[3][4] = 10 
```

如果您想要固定大小的列表，`defaultdict`您是否涵盖：

```
d = defaultdict(lambda: [None]*fixed_small_number)

d[3][4] = 10
# d[3] is now [None, None, None, None, 10, None, None, ...] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:39:03.387

鉴于你的例子：

```
for key, k, v in [('a', 1, 2), ('b', 1, 3), ('a', 2, 1), ('a', 3, 1), ('b', 3, 1) ...]:
    my_structre[key][k] = v 
```

解决方案确实是使用[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict).

```
from collections import defaultdict

d = defaultdict(dict)
for key, k, v in [('a', 1, 2), ('b', 1, 3), ('a', 2, 1), ('a', 3, 1), ('b', 3, 1)]:
    d[key][k] = v 
```

回答：

```
{'a': {1: 2, 2: 1, 3: 1}, 'b': {1: 3, 3: 1}} 
```

作为一个函数：

```
def method(iter_of_3_item_iters):
    d = defaultdict(dict)
    for (a, b, c) in iter_of_3_item_iters:
        d[a][b] = c
    return d 
```

# forms - 使用 Express node.js 接收带有 post 表单的 req.body 空

> ID：15322710
> 
> 赞同：6
> 
> 时间：2013-03-10T13:24:21.213
> 
> 标签：forms, node.js, post, express

我有一个简单的表单，它使用 Express 将 POST 数据发送到我的 Node.JS 服务器。这是表格：

```
<form method="post" action="/sendmessage">
  <div class="ui-widget">
      <input type="text" id="search" data-provide="typeahead" placeholder="Search..." />
  </div>
  <textarea id="message"></textarea>
</form> 
```

ui-widget 和输入与`typehead`来自 Twitter 的自动完成库有关。这就是我在服务器中处理 POST 请求的方式：

```
app.post('/sendmessage', function (req, res){

  console.log(req.body);

  usermodel.findOne({ user: req.session.user }, function (err, auser){

        if (err) throw err;

        usermodel.findOne({ user: req.body.search }, function (err, user){

            if (err) throw err;

             var message = new messagemodel({

                  fromuser: auser._id,
                  touser: user._id,
                  message: req.body.message,
                  status: false

             });

             message.save(function (err){

                  if (err) throw err;

                  res.redirect('/messages')

             })

        });

   });

}); 
```

控制台显示“{}”，然后显示错误`req.body.search`，因为`search`未定义。我不知道这里发生了什么，这不是与`typehead`输入有关的问题。这个问题的任何解决方案...？

谢谢提前！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-10T18:07:22.627

`req.body`由名称和值组成。

添加`name="search"`您的搜索框，然后重试。

您还必须使用 express/connect.bodyParser() 中间件，感谢 Nick Mitchinson！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-09T19:58:30.553

我遇到了这个问题，结果我正在使用`app.use(express.bodyParser());`，但它是在我使用的代码之后。向上移动解决了这个问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-18T03:40:09.660

在**快车 4**上就是这个。*（请注意，这不会解析多部分/上传）。*

```
app.use(bodyParser.urlencoded({extended: true})); 
```

如果你想接收 json 输入

```
app.use(bodyParser.json()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-16T01:37:22.750

就我而言，这是由于我的应用重定向`http`到`https`. 更新 Facebook 以使用`https`uri 修复了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-20T15:48:31.060

就我而言，我没有`name="firstname"`在我的`input`领域中提供这样的名称标签。添加它们后，一切正常。

# wpf - WPF 滚动条位置

> ID：15322713
> 
> 赞同：1
> 
> 时间：2013-03-10T13:24:40.040
> 
> 标签：wpf, location, scrollbar, stackpanel

我在 TabItem 内有一个 Stackpanel，它是 TabControl 的一部分。随着东西被添加到 StackPanel，我有一个自定义的垂直 ScrollBar 出现。目前，它出现在“堆栈面板顶部”的 TabItem 控件内。我想将滚动条的位置完全移到 TabControl 之外。我试图用边距做一些事情，但是当 ScrollBar 被推到 TabControl 的边缘之外时，它只是被剪掉了，我再多的弄乱 zindex 都没有导致任何成功。任何帮助将不胜感激。- 莱夫

```
 <TabItem Name="tabItem1" Background="{x:Null}" BorderBrush="#FF48D6EE" IsSelected="True">
                <TabItem.Template>
                    <ControlTemplate TargetType="{x:Type TabItem}">
                        <Grid>
                            <Border Name="Tab1" Margin="0,0,0,0" BorderBrush="#FF002648" BorderThickness="1,0,1,1" CornerRadius="0,0,3,3">
                                <Border.Effect>
                                    <DropShadowEffect ShadowDepth="0" Color="#FF3Ed3F4" Opacity=".5" BlurRadius="2"/>
                                </Border.Effect>
                            </Border>
                            <HeaderedContentControl Name="TabHeaderText" 
                                                TextBlock.FontFamily="Aharoni" 
                                                TextBlock.FontWeight="Bold" 
                                                TextBlock.Foreground="#FF214c6d" 
                                                TextBlock.FontSize="18" 
                                                Header="Tab1" 
                                                Margin="10,1,10,0" 
                                                VerticalAlignment="Center" 
                                                HorizontalAlignment="Center"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Tab1" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint=".5,0" EndPoint=".5,1">
                                            <GradientStop Color="#FF000a13" Offset="0" />
                                            <GradientStop Color="#FF06335c" Offset="0.5" />
                                            <GradientStop Color="#FF33bbdb" Offset="1" />
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="Tab1" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect ShadowDepth="0" Color="#FF3ccbee" Opacity="1" BlurRadius="5"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="Tab1" Property="BorderBrush" Value="#FF48d6ed"/>
                                <Setter TargetName="Tab1" Property="BorderThickness" Value="1,0,1,1" />
                                <Setter TargetName="Tab1" Property="Header">
                                    <Setter.Value>
                                        <custom:OutlinedText FontSize="18" 
                                                            FontFamily="Aharoni" 
                                                            FontWeight="ExtraBold" 
                                                            Fill="Black" 
                                                            Stroke="#ff3bb1db" 
                                                            StrokeThickness=".75" 
                                                            Text="Tab1"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </TabItem.Template>
                <ScrollViewer HorizontalScrollBarVisibility="Disabled" 
                        VerticalScrollBarVisibility="Auto"
                        Template="{StaticResource ScrollViewerControlTemplate}">
                    <StackPanel Name="panelTab1" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                </ScrollViewer>
            </TabItem> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T17:17:26.813

我们遇到了类似的问题。我们发现 WPF 在裁剪时不会绘制具有负边距的东西。当包含 TabItem 控件的元素之一设置了 MinHeight 并且窗口缩小到 MinHeight 以下时，剪辑就会发挥作用。默认情况下，滚动条对 PART_VerticalScrollBar 使用负边距。

解决方案是确保您没有在任何可能包含您的 TabItem 的容器上设置 MinHeight。如果您需要使用 MinHeight，请将其设置在顶层视图中。

Snoop 工具对于调试 WPF 布局问题非常有帮助。

[http://snoopwpf.codeplex.com/](http://snoopwpf.codeplex.com/)

# list - LISP - 如何获得嵌套列表的平均长度？

> ID：15322716
> 
> 赞同：2
> 
> 时间：2013-03-10T13:24:49.373
> 
> 标签：list, nested, lisp, average, clisp

我有个问题。我需要从此列表中获取平均长度：`(1 (2 3 4) 5 (6 7) 8 (9))`. 应该是 2。我不知道从哪里开始......

我试图从中得到`(1 2 3 4 5 6 7 8 9)`，`(1 (2 3 4) 5 (6 7) 8 (9))`但我失败了，因为`(reduce #'append list-name)`没有工作。

我知道如何计算这个，但我需要在 (1 (2 3 4) 5 (6 7) 8 (9)) 中获取所有列表，如下所示：

```
list1 = (1 5 8)
list2 = (2 3 4)
list3 = (6 7)
list4 = (9) 
```

但我不知道怎么做。

你能给我一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:18:25.193

```
(defun nested-lists-average-length (ls &aux (i 0) (n 0))
    (dolist (a ls (float (/ _______)))
      (if (_______ a) 
        (progn (_______ i) 
               (incf n (_______ a) ))))) 
```

[填](http://clhs.lisp.se/Body/m_dolist.htm)……填……[空格](http://www.lispworks.com/documentation/HyperSpec/Body/f_length.htm)。[_](http://clhs.lisp.se/Body/f_listp.htm) [_](http://clhs.lisp.se/Body/m_incf_.htm) :)

# escaping - 如何用 ESC/POS 画线？

> ID：15322720
> 
> 赞同：2
> 
> 时间：2013-03-10T13:25:03.217
> 
> 标签：escaping, line, draw, epson

我需要使用 ESC/POS 命令在我的收据上画一条水平线（实线但虚线将是完美的！）。

现在我正在使用一些技巧，允许我通过使用带有一些空格字符的“UnderLine”命令来绘制一条水平线，但我不喜欢它，因为我需要为该线提供一些绘图属性，例如“高度”：

```
PRINT #1, CHR$(&H1B);"-";CHR$(1); <==== set underline on
PRINT #1, "            "; CHR$(&HA);
PRINT #1, CHR$(&H1B);"-";CHR$(0); <==== set underline off 
```

我相信它可以通过位图像命令发生，但我不知道该怎么做。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-09T09:11:45.183

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T18:37:48.963

打印特殊图形的另一种方法是使用位图命令 0x1B 0x2A (ESC *) 然后设置整个页面的位数，然后生成 8 位高 x xx 字节宽的像素图。8 位由 MSB（顶部）到 LSB（底部）表示，因此实心 8 像素高线为 0xFF。我经常使用数据字节 0x80 来绘制一条 1 像素的线，或者使用 0x01 来将线放在底部。此外，您可以参考这篇文章： http: [//nicholas.piasecki.name/blog/2009/12/sending-a-bit-image-to-an-epson-tm-t88iii-receipt-printer-using-c- and-escpos/](http://nicholas.piasecki.name/blog/2009/12/sending-a-bit-image-to-an-epson-tm-t88iii-receipt-printer-using-c-and-escpos/) 玩得开心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-23T13:54:53.513

使用[mike42 的 escpos-php](https://github.com/mike42/escpos-php)：

```
$printer->textRaw(str_repeat(chr(196), 40).PHP_EOL); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-08-09T07:05:52.733

您必须进入页面模式，并将字符间距设置为 0 + 使用小字体大小和可能的粗体样式，以便下划线之间没有更多空间。要设置线高，唯一的解决方案是绘制几条堆叠在一起的线。这在页面模式下是可能的，因为您可以使用打印区域 (ESC W) 将数据放置在您想要的任何位置。

另一个可能的技巧是使用徽标来绘制线条（仍处于页面模式）

# php - mySQL 连接表 if 表 1 列值 LIKE 表 2 列值

> ID：15322721
> 
> 赞同：-3
> 
> 时间：2013-03-10T13:25:05.837
> 
> 标签：php, mysql, sql

表格1

```
+-------+--------+--------+
| 姓名 | 年龄 | 性别 |
+-------+--------+--------+
| 标记 | 20 | 男|
| 约翰 | 22 | 男|
| 珍妮 | 21 | 女|
+-------+--------+--------+

```

表 2

```
+-------+----------+---------+
| 名称2 | 状态 | 地址 |
+-------+----------+---------+
| 约翰 | 单身 | 迈阿密 |
| 标记 | 单身 | 纽约|
| 珍妮 | 单身 | 球衣 |
+-------+----------+---------+

```

我想这样显示...
例如标记：
姓名：马克
年龄：20
性别：男性
状态：单身
地址：纽约
请使用“LIKE”不等于

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:28:10.147

基本上，由于用于模式匹配，`=`因此更倾向于使用。`LIKE``LIKE`

```
SELECT  a.name, a.age, a.gender,
        b.status, b.address
FROM    table1 a
        INNER JOIN table2 b
            ON a.name = b.name2 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

如果你真的想用`LIKE`，

```
SELECT  a.name, a.age, a.gender,
        b.status, b.address
FROM    table1 a
        INNER JOIN table2 b
            ON a.name LIKE b.name2 
```

*   [SQLFiddle 演示（*两个查询*）](http://www.sqlfiddle.com/#!2/94919/2)

# php - php 通过父类从扩展类访问函数

> ID：15322722
> 
> 赞同：1
> 
> 时间：2013-03-10T13:25:08.917
> 
> 标签：php

我一直在网上寻找答案，但找不到任何相关的东西，所以我想在这里问。

如何通过其父类从扩展类访问函数？

**基类（父类）**

```
require_once('FirstChild.class.php');

require_once('SecondChild.class.php');

class Base {

public $first;

public $second;

function __construct() {

$this->first = new FirstChild();

$this->second = new SecondChild();

}

} 
```

**第一（儿童班）**

```
class FirstChild extends Base {

public $firstVar;

function __construct() {

$this->firstVar = 'Hello';

}

public function getSecondVar() {

echo parent::$second->getVar();//doesnt work!!?

}

} 
```

**二年级（儿童班）**

```
class SecondChild extends Base {

public $secondVar;

function __construct() {

$this->secondVar = 'World';

}

public function getVar() {

return $this->secondVar;

}

} 
```

**如何在“FirstChild”中访问“getSecondVar”函数？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:27:50.697

不要使用该`parent::`方法。而是使用`$this->second->getVar();`并确保也调用父构造函数，例如使用`parent::__construct();`（或者，在构造函数中填充 $this->second `FirstChild`）

例如

```
class FirstChild extends Base {
    public function __construct() {
        // your code
        $this->second = new SecondChild();
        $this->firstVar = 'Hello';
    }
    public function getSecondVar() {
        echo $this->second->getVar();
    }
} 
```

编辑：您设置它的方式`$second`也永远不会设置为通过将构造函数方法添加到`FirstChild`您正在覆盖的`Base::__construct()`. 您需要回忆`parent::__construct()`并确保它不会创建新的实例，`FirstChild()`或者您需要在`FirstChild`的构造函数中执行相同的代码。

无论如何，从父类调用子类通常不是最佳实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:42:31.513

您阅读了有关如何访问父类函数的信息，它与[`parent`关键字](http://php.net/keyword.parent)一起使用，如下所示：

```
parent::__construct(); 
```

对于`$second`您可以访问的属性，`$this`因为它是公开的：

```
$this->second; 
```

这已经是全部了。请注意调用父级的构造函数并记住公共成员是公共的（并且您将永远无法访问私有成员）。

# javascript - Javascript动画：停止多次跳转

> ID：15322723
> 
> 赞同：2
> 
> 时间：2013-03-10T13:25:20.453
> 
> 标签：javascript, jquery, html, css

我已经让这个角色用 javascript 移动了。

一切正常，通过将键码绑定到这个角色，我得到了流畅的动画。我尝试用`spaceBar`.

**问题**-

我的角色跳得很好，但跳了很多次。我尝试添加`event.preventDefault()` 但这并没有奏效。

我只想要一个平滑的跳跃，只要我按下空格键。

这是跳转的代码-

```
if(spaceBar)
    {
        box.animate({top:"-50"},100)
        .animate({top:"50"},100);
        event.isDefaultPrevented();
    } 
```

和小提琴——

[移动角色](http://jsfiddle.net/stackmanoz/ruuhK/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:45:04.480

这对我有用：

```
if(spaceBar)
{
    box.clearQueue().animate({top:"-=50"},100).animate({top:"+=50"},100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:34:32.163

将要返回的动画（倒地，我猜你可以称之为）添加到上一个动画的完成参数中：

```
if(spaceBar)
{
    box.animate({top:"-50"},100,function(){
        box.animate({top:"50"},100);
    })
    event.isDefaultPrevented();
} 
```

这是一个[JSFiddle](http://jsfiddle.net/ruuhK/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:35:48.170

你会想要使用 jQuery 的`.clearQueue()`函数 ( [http://api.jquery.com/clearQueue/](http://api.jquery.com/clearQueue/) )

```
if(spaceBar)
{
    box.clearQueue().animate({top:"-50"},100).animate({top:"50"},100);
} 
```

供您参考：http: [//jsfiddle.net/FGPCC/](http://jsfiddle.net/FGPCC/)

# html - 悬停效果 div 位置和边框

> ID：15322725
> 
> 赞同：2
> 
> 时间：2013-03-10T13:25:29.410
> 
> 标签：html, hover, css

当我将鼠标悬停在 div 上时，我想更改它上的几件事。

我想让盒子阴影更大，并将 div 稍微向上和向左移动，同时不影响这个 div 周围的其他 div。到目前为止，这是我的代码。

```
#divshadow {
    box-shadow: 2px 2px 10px #888;
    -moz-box-shadow: 2px 2px 10px #888;
    -webkit-box-shadow: 2px 2px 10px #888;
    border-radius: 7px;
    margin-right:  3%;
    padding-top: 8px
}

.divshadow:hover {
} 
```

```
<div id="divshadow" class="divshadow"
    style="float:left;width:30%; margin-left:2%"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:33:53.870

这是使用 CSS3 过渡的解决方案。on 的值`#divshadow:hover`需要根据您的需要进行调整。

[jsFiddle](http://jsfiddle.net/de3Qv/1/)

```
#divshadow {
    box-shadow: 2px 2px 10px #888;
    -moz-box-shadow: 2px 2px 10px #888;
    -webkit-box-shadow: 2px 2px 10px #888;
    border-radius: 7px;
    margin-right:3%;
    padding-top:8px;

    transition: all .5s ease;
    -webkit-transition: all .5s ease;
    position:relative;
    top:0px;
    left:0px;
}
#divshadow:hover {
    top:-3px;
    left:-3px;
    box-shadow: 2px 2px 20px #888;
    -moz-box-shadow: 2px 2px 20px #888;
    -webkit-box-shadow: 2px 2px 20px #888;
} 
```

# xml - 将具有 X 元素的一个节点溢出到具有这些元素之一的 X 节点中

> ID：15322727
> 
> 赞同：1
> 
> 时间：2013-03-10T13:25:41.637
> 
> 标签：xml, xslt

是否有可能得到这样的转变：

源 XML：

```
<Item>
  <stockcode>XXX1</stockcode>
  <vehicle>Bentley</vehicle>
  <model>Continental GT (2006-)</model>
  <model>Continental Flying Spur (2006-)</model>
  <width>9</width>
  <wheel_size>20</wheel_size>  
  <offset>40</offset>
  <bolt_pattermn>5x112</bolt_pattermn>
  <brand>AEZ</brand>
  <Velg_ID>AEZ Myta</Velg_ID>
  <kit1>DK-ZJAE x1</kit1>
</Item> 
```

目标 XML：

```
<Item>
  <stockcode>XXX1</stockcode>
  <vehicle>Bentley</vehicle>
  <model>Continental GT (2006-)</model>
  <width>9</width>
  <wheel_size>20</wheel_size>    
  <offset>40</offset>
  <bolt_pattermn>5x112</bolt_pattermn>
  <brand>AEZ</brand>
  <Velg_ID>AEZ Myta</Velg_ID>
  <kit1>DK-ZJAE x1</kit1>
  <qty_available>8.00000000</qty_available>
  <price>174.00</price>
  <picture>41010</picture>
  <pkpcena>195.4999</pkpcena>
</Item>
<Item>
  <stockcode>XXX1</stockcode>
  <vehicle>Bentley</vehicle>
  <model>Continental Flying Spur (2006-)</model>
</Item> 
```

在源 XML 中有 1 个节点的 X 元素，必须将其划分为 X 节点的 1 个元素。目标 XML 可以包含源中的所有元素，也可以仅包含元素`<vehicle>`和`<model>`！

如果是 - 有人可以给出提示吗？;-)

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:20:43.350

这会做到：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/">
    <root>
      <xsl:apply-templates select="//model" mode="split" />
    </root>
  </xsl:template>

  <xsl:template match="model" mode="split">
    <xsl:apply-templates select="..">
      <xsl:with-param name="currentModel" select="." />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="Item">
    <xsl:param name="currentModel" />

    <xsl:copy>
      <xsl:apply-templates
         select="@* | node()[not(self::model)] | $currentModel" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例输入时，这会产生：

```
<root>
  <Item>
    <stockcode>XXX1</stockcode>
    <vehicle>Bentley</vehicle>
    <model>Continental GT (2006-)</model>
    <width>9</width>
    <wheel_size>20</wheel_size>
    <offset>40</offset>
    <bolt_pattermn>5x112</bolt_pattermn>
    <brand>AEZ</brand>
    <Velg_ID>AEZ Myta</Velg_ID>
    <kit1>DK-ZJAE x1</kit1>
  </Item>
  <Item>
    <stockcode>XXX1</stockcode>
    <vehicle>Bentley</vehicle>
    <model>Continental Flying Spur (2006-)</model>
    <width>9</width>
    <wheel_size>20</wheel_size>
    <offset>40</offset>
    <bolt_pattermn>5x112</bolt_pattermn>
    <brand>AEZ</brand>
    <Velg_ID>AEZ Myta</Velg_ID>
    <kit1>DK-ZJAE x1</kit1>
  </Item>
</root> 
```

这是我缩短了上述方法的一个实现，其中包含 Dimitre 技术的一些指针：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="model">
    <xsl:apply-templates select=".." mode="gen">
      <xsl:with-param name="currentModel" select="." />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="@* | node()" mode="gen">
    <xsl:param name="currentModel" select="/.." />

    <xsl:copy>
      <xsl:apply-templates
         select="@* | node()[not(self::model)] | $currentModel" 
         mode="gen" />
    </xsl:copy>
  </xsl:template>
  <xsl:template match="text()" />
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:33:49.980

**一、本次改造：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:template match="text()"/>

 <xsl:template match="model">
  <xsl:apply-templates select=".." mode="gen">
   <xsl:with-param name="pInclude" select="."/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="node()|@*" mode="gen">
  <xsl:param name="pInclude" select="/.."/>
      <xsl:copy>
       <xsl:apply-templates mode="gen" select=
        "node()[not(name()=name($pInclude)) or count(.|$pInclude)=1]|@*" >
        <xsl:with-param name="pInclude" select="$pInclude"/>
       </xsl:apply-templates>
      </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于此 XML 文档时（提供的一个`model`添加了第三个元素和多个`Item`元素）：**

```
<t>
    <Item>
        <stockcode>XXX1</stockcode>
        <vehicle>Bentley</vehicle>
        <model>Continental GT (2006-)</model>
        <model>Continental Flying Spur (2006-)</model>
        <model>Galactic Flying Spur (2006-)</model>
        <width>9</width>
        <wheel_size>20</wheel_size>
        <offset>40</offset>
        <bolt_pattermn>5x112</bolt_pattermn>
        <brand>AEZ</brand>
        <Velg_ID>AEZ Myta</Velg_ID>
        <kit1>DK-ZJAE x1</kit1>
    </Item>
    <Item>
        <stockcode>XXX1</stockcode>
        <vehicle>Bentley</vehicle>
        <model>XXX Continental GT (2006-)</model>
        <model>YYY Continental Flying Spur (2006-)</model>
        <model>ZZZ Galactic Flying Spur (2006-)</model>
        <width>9</width>
        <wheel_size>20</wheel_size>
        <offset>40</offset>
        <bolt_pattermn>5x112</bolt_pattermn>
        <brand>AEZ</brand>
        <Velg_ID>AEZ Myta</Velg_ID>
        <kit1>DK-ZJAE x1</kit1>
    </Item>
</t> 
```

**产生想要的正确结果：**

```
<Item>
   <stockcode>XXX1</stockcode>
   <vehicle>Bentley</vehicle>
   <model>Continental GT (2006-)</model>
   <width>9</width>
   <wheel_size>20</wheel_size>
   <offset>40</offset>
   <bolt_pattermn>5x112</bolt_pattermn>
   <brand>AEZ</brand>
   <Velg_ID>AEZ Myta</Velg_ID>
   <kit1>DK-ZJAE x1</kit1>
</Item>
<Item>
   <stockcode>XXX1</stockcode>
   <vehicle>Bentley</vehicle>
   <model>Continental Flying Spur (2006-)</model>
   <width>9</width>
   <wheel_size>20</wheel_size>
   <offset>40</offset>
   <bolt_pattermn>5x112</bolt_pattermn>
   <brand>AEZ</brand>
   <Velg_ID>AEZ Myta</Velg_ID>
   <kit1>DK-ZJAE x1</kit1>
</Item>
<Item>
   <stockcode>XXX1</stockcode>
   <vehicle>Bentley</vehicle>
   <model>Galactic Flying Spur (2006-)</model>
   <width>9</width>
   <wheel_size>20</wheel_size>
   <offset>40</offset>
   <bolt_pattermn>5x112</bolt_pattermn>
   <brand>AEZ</brand>
   <Velg_ID>AEZ Myta</Velg_ID>
   <kit1>DK-ZJAE x1</kit1>
</Item>
<Item>
   <stockcode>XXX1</stockcode>
   <vehicle>Bentley</vehicle>
   <model>XXX Continental GT (2006-)</model>
   <width>9</width>
   <wheel_size>20</wheel_size>
   <offset>40</offset>
   <bolt_pattermn>5x112</bolt_pattermn>
   <brand>AEZ</brand>
   <Velg_ID>AEZ Myta</Velg_ID>
   <kit1>DK-ZJAE x1</kit1>
</Item>
<Item>
   <stockcode>XXX1</stockcode>
   <vehicle>Bentley</vehicle>
   <model>YYY Continental Flying Spur (2006-)</model>
   <width>9</width>
   <wheel_size>20</wheel_size>
   <offset>40</offset>
   <bolt_pattermn>5x112</bolt_pattermn>
   <brand>AEZ</brand>
   <Velg_ID>AEZ Myta</Velg_ID>
   <kit1>DK-ZJAE x1</kit1>
</Item>
<Item>
   <stockcode>XXX1</stockcode>
   <vehicle>Bentley</vehicle>
   <model>ZZZ Galactic Flying Spur (2006-)</model>
   <width>9</width>
   <wheel_size>20</wheel_size>
   <offset>40</offset>
   <bolt_pattermn>5x112</bolt_pattermn>
   <brand>AEZ</brand>
   <Velg_ID>AEZ Myta</Velg_ID>
   <kit1>DK-ZJAE x1</kit1>
</Item> 
```

* * *

**二、一个更通用且仍然很短的转换，其中要拆分的元素名称作为（外部）参数传递**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:param name="pName" select="'model'"/>

 <xsl:template match="*">
  <xsl:apply-templates select="parent::*[$pName = name(current())]" mode="gen">
   <xsl:with-param name="pInclude" select="."/>
  </xsl:apply-templates>
  <xsl:apply-templates/>
 </xsl:template>

 <xsl:template match="node()|@*" mode="gen">
  <xsl:param name="pInclude" select="/.."/>

      <xsl:copy>
       <xsl:apply-templates mode="gen" select=
       "node()[not(name()=name($pInclude)) or count(.|$pInclude)=1]|@*" >
        <xsl:with-param name="pInclude" select="$pInclude"/>
       </xsl:apply-templates>
      </xsl:copy>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

* * *

**三、此类通用问题的最通用解决方案**：

看到这个答案：[https ://stackoverflow.com/a/8597577/36305](https://stackoverflow.com/a/8597577/36305)

# jquery - 用javascript检查时间变量的范围

> ID：15322731
> 
> 赞同：0
> 
> 时间：2013-03-10T13:26:37.550
> 
> 标签：jquery, javascript-events, javascript

我想取一个特定的时间值（由 html5 htmlmedia timerange.end 以秒为单位给出）并检查它在我已经拥有的时间列表中的位置，看起来像这样

```
00:00:00.00
00:00:22.00
00:01:21.00
00:01:36.00
00:01:51.00
00:02:06.00
00:02:21.00
00:02:36.00 
```

我将这些值硬编码在捕获程序的文本文件服务器端。我想检查并查看它（video_time）位于哪两个值之间，如果 src 不对应于时隙，则从那里更改 iframe 中的 src，上面的列表中有 n 次和对应的 n -1 个插槽，src 将命名为 /Slide0.html 到 /Slide[n-1].html 到目前为止 iv 创建了一些逻辑来检查时间，占位符逻辑来更改 iframe 的 src，如果值 > 15 秒和一些回调定期调用事物，

[编辑：删除了一些不相关的东西]这是问题所在，

```
function category() {
    var played_ob =video_time_played() ;
    if ( played_ob  > 0 )
      var played_num = played_ob;
    else
     var played_num = 0;
    var tes = 15;
    if ( played_num > tes)
     document.getElementsByTagName("iframe")[0].src="/static/Slide1.html";
    else
     console.log ("meh");
}; 
```

上面我希望检查它落在哪个时间范围并设置正确的 iframe。这就是我需要帮助的，我想做的如下

```
/* PSEUDOCODE OF WHAT I WISH TO ACHIEVE BUT DONT KNOW HOW TO DO IT ENTIRELY.*/
 function category (){
     var time_spent = video_time_played_so_far_in_seconds(); 
       /* this part i dont know, especially how to generate the list from a text file serverside */
     categories_list = [list of consecutive times i showed above in HH:MM:SS.00]

     var which_category = function check_in_between_which_two_times_var_lies () {
        /***********  i DONT know how to code this part either, *******/
        the_category_found_as_an_integer_between_0=>n-1 = ? 
        var category = the_category_found_as_an_integer_between_0=>n-1 ;
        return category  ;
       }

     function which_new_src (which_category) {
      /* code to select new src */
         var new_src = "/static/Slide"+which_category".html";
         return new_src;
     }

     function change_src_of_iframe () {
         var relevant_iframe = document.getElementsByTagName("iframe")[0];

         change_src_of_iframe () {
         var new_src = which_new_src(which_category);
         relevant_iframe..src= new_src ;
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:45:41.780

这就是我最终要做的：

将带有 HH:MM:SS 的有序数组转换为有序秒数组：

```
function to_seconds (capture){
console.log(capture.length);
var clean = new Array() ;
for ( var i = 0, len = capture.length; i<len; i++ ) {
     if (capture[i] ) 
       clean.push(capture[i]);
    } 

console.log(clean.length);
var ready = clean ;

var times = new Array() ;
   for ( var i = 0, len = ready.length; i<len; i++ ) {

       var obj =  ready[i].split(':'); 
       var seconds =obj[0]*3600+obj[1]*60+obj[2]*1;
       times.push(seconds) ;
   }
console.log(times.length);
return times ; 
} 
```

然后检查到目前为止播放的时间所在的位置，

```
function find_category_number (time,list) {
 var number = 0;
 for ( var i = 0, len = list.length; i<len; i++ ) {
 if ( time > list[i] && time < list[i+1] )
    number= i;
 }

return number ;
} 
```

最后生成一个新的 src 值：

```
function find_new_src (category_number) {
var src = "/static/Slide"+category_number+".html" ;
return src ;
} 
```

这就是我最需要做的，猜想把问题分解成小的模块化部分有点帮助，我试图同时做所有的逻辑，我的大脑冻结了。

# android - 远程激活 android 服务 - 即使在锁定的设备上

> ID：15322734
> 
> 赞同：1
> 
> 时间：2013-03-10T13:26:51.230
> 
> 标签：android, service, remote-access

我正在开发一种安全应用程序，它将远程触发（通过短信）。我的问题是：即使手机被锁定，确保我的激活短信激活服务的最佳方法是什么？我不想惹用户耗尽他们的电池，通常应用程序什么都不做，只有当它被激活时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:52:23.663

最好的方法是使用清单中声明的​​广播接收器+意图服务来执行您想要的。

在清单中声明接收者：

```
<receiver android:name="yourpackege.YourReceiver">
    <intent-filter>
    <action   android:name="android.provider.Telephony.SMS_RECEIVED"/> 
    </intent-filter> 
```

收件人：

```
public class YourReceiver extends BroadcastReceiver {
    .
    .
    .
@Override
public void onReceive(Context context, Intent intent)  {
    Bundle bundle = intent.getExtras(); 
    if (bundle != null) {
        Object[] pdus = (Object[]) bundle.get("pdus"); 
        SmsMessage[] messages = new SmsMessage[pdus.length]; 
        for (int i = 0; i < pdus.length; i++)
            messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
        notifyMessages(context, messages);
    }       
} 
```

并在 notifyMessages 中触发一个执行实际工作的意图服务。这样，广播接收器将执行获取消息的时间。通过这种方式，您不会弄乱电池，但只有在手机收到短信时才运行一些代码。

```
private void notifyMessages(Context c, SmsMessage[] messages) {
    Log.d("SMS", "Received message");
    for(SmsMessage m : messages){
                if(isActivationMessage(m){
        Intent serviceIntent = new Intent(c, YourIntentService.class);
        serviceIntent.putExtra(); // Put all your extras here
        c.startService(myServiceIntent);
} 
```

# javascript - 在 java jsp 文件中的 HTML 中有隐藏文本

> ID：15322735
> 
> 赞同：0
> 
> 时间：2013-03-10T13:26:56.817
> 
> 标签：javascript, html, css, hidden

因此，我有一个 java jsp 文件，在其中我想使用 HTML 来制作它，以便隐藏特定的字符串/文本，直到按下按钮/链接然后它显示出来。我该怎么做？

Javascript 似乎无法正常工作。我尝试了以下但没有奏效：

```
<div style="display: none;" id="hiddenText">This is hidden</div>
<a href="#" onclick="document.getElementById('hiddenText').style.display="block"; return false;">Click here to see hidden text.</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:28:43.850

您的双引号用作“onclick”属性值的分隔符，因此如果您愿意，`style.display="block";`则必须使用单引号：`style.display='block';`

```
<div style="display: none;" id="hiddenText">This is hidden</div>
<a href="#" onclick="document.getElementById('hiddenText').style.display='block'; return false;">Click here to see hidden text.</a> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:29:35.510

引号是错误的，在块词之后

HTML：

```
 <div style="display: none;" id="hiddenText">This is hidden</div>
 <a href="#" onclick="return toggle('hiddentext');">Click here to see hidden text.</a>

 <script type="text/javascript">
    function toggle (id){
       var element = document.geElementById(id);
       if( 'none' == element.style.display ){
           element.style.display = 'block';

       }else{
           element.style.display = 'none';

       }
       return false;
    }
</script> 
```

或者如果你使用 jQuery：

```
 <div style="display: none;" id="hiddenText">This is hidden</div>
  <a href="#" id="toggler">Click here to see hidden text.</a>

  <script tyle="text/javascript">
       $(function(){
            $('#toggler').click(function(e){
                e.preventDefault();
                $('#hiddenText').toggle();
            });
       });
  </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:28:44.597

尝试这个：

```
onclick="javascript://document.getElementById('hiddenText').style.display='block'; return false;" 
```

# java - For Loops 输出不是我想要的

> ID：15322739
> 
> 赞同：0
> 
> 时间：2013-03-10T13:27:08.190
> 
> 标签：java

我是java新手，在网上做练习题。我遇到了这个问题，被困了很长时间。

编写一个名为 diceSum 的类，提示用户输入所需的总和，然后反复掷两个六面骰子，直到它们的总和为所需总和。这是与用户的预期对话：

```
Desired dice sum: 9
4 and 3 = 7
3 and 5 = 8
5 and 6 = 11
5 and 6 = 11
1 and 5 = 6
6 and 3 = 9 
```

这就是我所做的。

```
import java.util.Random;
import java.util.Scanner;
public class diceSum{
    public static void main(String[] args){
        System.out.print("Desired dice sum: ");
        Scanner sc=new Scanner(System.in);
        int input=sc.nextInt();

        Random rnd=new Random();
        int r1=rnd.nextInt(7);
        int r2=rnd.nextInt(7);

        int sum=0;
        for(int i=0;i<6;i++){
             sum=r1+r2;
            System.out.println(r1 + "and" + r2 + "=" + sum);

        }

    }
} 
```

我的输出是

```
Desired dice sum:9
0 and 2=2
0 and 2=2
0 and 2=2
0 and 2=2
0 and 2=2
0 and 2=2 
```

我不明白它为什么会在不给出另一个随机数的情况下打印 0 和 2 6 次。我在想是否应该再创建一些 int r3=rnd.nextInt(7),int r4=rnd.nextInt(7)。但我在想这会很长，但这是一种可能的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:28:58.777

利用：

```
int r1;
int r2;
for(int i=0;i<6;i++){
     r1=rnd.nextInt(6) + 1;
     r2=rnd.nextInt(6) + 1;
     sum=r1+r2;
     System.out.println(r1 + "and" + r2 + "=" + sum);
     if (sum == input){
         // This will break once you get the value.
         break;
     }
} 
```

继续并获得新的随机数。也用于`rnd.nextInt(6) + 1`获得 1 - 6（没有 0）。

您的任务是继续检查直到找到，而不仅仅是 6 次。哟应该改用`while`循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:29:06.110

```
int r1;
int r2;
for(int i=0;i<6;i++){
     r1=rnd.nextInt(6) + 1;
     r2=rnd.nextInt(6) + 1;
     sum=r1+r2;
     System.out.println(r1 + "and" + r2 + "=" + sum);
     if (sum == input){
         break;
     }
} 
```

但在这里你也不确定得到相同的数字

```
4 and 3 = 7
3 and 5 = 8
5 and 6 = 11
5 and 6 = 11
1 and 5 = 6    
6 and 3 = 9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T13:29:11.050

您需要将`r1`and的声明/初始化移动`r2`到循环中。否则，它们被设置一次，并在程序运行的其余部分保持不变。

请注意，该作业并不要求您进行六次投掷，而是要求您进行尽可能多的投掷以达到所需的总和。为了确保循环*可以*停止，您应该检查输入的数字至少为 2 且最多为 12。

另外，这是错误的：

```
int r2=rnd.nextInt(7); 
```

它给你一个从 0 到 6 的数字，包括 0 到 6，但真正的掷骰子不能产生零。相反，您需要编写

```
int r2=rnd.nextInt(6)+1; 
```

您的循环应如下所示：

```
int sum;
do {
    int r1=rnd.nextInt(6) + 1;
    int r2=rnd.nextInt(6) + 1;
    sum=r1+r2;
    System.out.println(r1 + "and" + r2 + "=" + sum);
} while (sum != input); 
```

# c# - Environment.ExpandEnvironmentVariables 的反面

> ID：15322745
> 
> 赞同：0
> 
> 时间：2013-03-10T13:28:20.870
> 
> 标签：c#, .net, visual-studio, directory, environment-variables

是否有与[Environment.ExpandEnvironmentVariables](http://msdn.microsoft.com/en-us/library/system.environment.expandenvironmentvariables.aspx)方法相反的方法。

我的意思是，在给定路径后，该方法返回其 EnvironmentValue 对应项。

例如：

> C:\users\user\AppData\Local\foo\bar

应该变成：

> %LOCALAPPDATA%\foo\bar

（为了使配置文件可移植。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:29:38.030

恐怕不存在这样的方法。更不用说你可以有多个环境变量指向同一个值。在这种情况下，您希望返回哪个变量？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T14:15:31.153

在被告知没有这样的事情之后，我写了一个非常简单的版本。如果有人有任何建议，那就太棒了！

该方法替换了它可以找到的最长的环境变量。

```
public static class EnvironmentExtension
{
    public static string ContractEnvironmentVariables(string path)
    {
        path = Path.GetFullPath(path).ToUpperInvariant();
        DictionaryEntry currentEntry = new DictionaryEntry("","");
        foreach (object key in Environment.GetEnvironmentVariables().Keys)
        {
            string value = (string)Environment.GetEnvironmentVariables()[key];
            if (path.Contains(value.ToUpperInvariant()) && value.Length > ((string)currentEntry.Value).Length)
            {
                currentEntry.Key = (string)key;
                currentEntry.Value = value;
            }
        }
        return path.Replace((string)currentEntry.Value, "%" + (string)currentEntry.Key + "%");
    }
} 
```

# eclipse - 我无法使用“localhost:8080/mywebapp/index.jsp”运行 Maven 战争

> ID：15322754
> 
> 赞同：0
> 
> 时间：2013-03-10T13:29:11.040
> 
> 标签：eclipse, jsp, jboss, maven-3, jboss7.x

我真的绝望了，我花了几天时间在网上搜索我的 pb 的解决方案，但没有任何帮助.. :/ 任何人都可以帮助我

我正在使用 eclipse，我有一个简单的 maven 战争（一个 hello world，仅用于测试），我在我的 Jboss 7.0.2 服务器中部署了这个战争文件，并且该文件已部署..我什至检查了“Jboss Mangement”，“Managemnt Deploy” " 部分，war 文件就在那里。在我想运行这个 Maven 战争文件 localhost:8080/mywebapp/index.jsp 之前，一切都很好，但是发生错误 http404 说“请求资源（mywebapp/index.jsp”）不可用。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:59:32.917

检查是否可以找到`index_jsp.class`应用程序路径中调用的类文件`JBOSS/server/default/work/jboss.web/localhost/...`

如果不是，那么你的战争就有问题。检查启动日志是否有任何错误总是一个好主意。您的战争是否包含 WEB-INF/web.xml 文件？检查该文件中是否存在与 index.jsp 相关的错误配置标记

在您的 mywebapp 战争文件中， index.jsp 放置在哪里 - 它是直接`mywebapp`在`mywebapp/WEB-INF`. 如果是后者你不能直接访问它，你必须在 web.xml 中有所需的配置

# python - 我有一个存储像素值的二维数组，如何将它们显示为图像

> ID：15322757
> 
> 赞同：1
> 
> 时间：2013-03-10T13:29:19.887
> 
> 标签：python, image-processing, python-2.7, python-imaging-library

我得到了图像补丁的像素值，如下所示，但是我应该如何使用 python 将它们显示为图像补丁？PIL库中有方法吗？

```
array([[162, 162, 161, 162, 156, 163, 160],
       [162, 162, 161, 162, 156, 163, 160],
       [162, 162, 161, 162, 156, 163, 160],
       [162, 162, 161, 162, 156, 163, 160],
       [162, 162, 161, 162, 156, 163, 160],
       [164, 157, 155, 161, 159, 158, 159],
       [160, 163, 158, 160, 161, 159, 155]]) 
```

# android - ORMLite 索引 1 处的绑定值为 null

> ID：15322760
> 
> 赞同：1
> 
> 时间：2013-03-10T13:29:33.460
> 
> 标签：android, ormlite

我正在尝试将对象添加到类 LyricsInfo 中的 ForeignCollection，但不幸的是我收到错误：“**索引 1 处的绑定值为 null** ”。有任何想法吗？我已经读过查询的[selectionArg 参数](https://stackoverflow.com/questions/4572090/android-sql-illegalargumentexception-the-bind-value-at-index-1-is-null)可能会导致此异常。

```
03-10 14:07:35.545: W/System.err(26781): java.lang.IllegalStateException: Could not build lazy iterator for class com.ep45.db.Lyric
03-10 14:07:35.545: W/System.err(26781):    at com.j256.ormlite.dao.LazyForeignCollection$1.closeableIterator(LazyForeignCollection.java:88)
03-10 14:07:35.545: W/System.err(26781):    at com.j256.ormlite.dao.CloseableWrappedIterableImpl.closeableIterator(CloseableWrappedIterableImpl.java:32)
03-10 14:07:35.545: W/System.err(26781):    at com.j256.ormlite.dao.CloseableWrappedIterableImpl.iterator(CloseableWrappedIterableImpl.java:22)
03-10 14:07:35.545: W/System.err(26781):    at com.j256.ormlite.dao.CloseableWrappedIterableImpl.iterator(CloseableWrappedIterableImpl.java:12)
03-10 14:07:35.545: W/System.err(26781):    at com.ep45.db.LyricsInfo.getLyrics(LyricsInfo.java:34)
03-10 14:07:35.545: W/System.err(26781):    at com.ep45.db.LyricsInfo.<init>(LyricsInfo.java:82)
03-10 14:07:35.545: W/System.err(26781):    at com.ep45.audio.AudioHelper.getSongInfo(AudioHelper.java:228)
03-10 14:07:35.545: W/System.err(26781):    at com.ep45.activities.MainscreenActivity.loadNewSongs(MainscreenActivity.java:287)
03-10 14:07:35.545: W/System.err(26781):    at com.ep45.activities.MainscreenActivity_.access$5(MainscreenActivity_.java:1)
03-10 14:07:35.545: W/System.err(26781):    at com.ep45.activities.MainscreenActivity_$12.run(MainscreenActivity_.java:363)
03-10 14:07:35.550: W/System.err(26781):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-10 14:07:35.550: W/System.err(26781):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-10 14:07:35.550: W/System.err(26781):    at java.lang.Thread.run(Thread.java:856)
03-10 14:07:35.550: W/System.err(26781): Caused by: java.lang.IllegalArgumentException: the bind value at index 1 is null
03-10 14:07:35.550: W/System.err(26781):    at android.database.sqlite.SQLiteProgram.bindString(SQLiteProgram.java:297)
03-10 14:07:35.550: W/System.err(26781):    at android.database.sqlite.SQLiteProgram.bindAllArgsAsStrings(SQLiteProgram.java:401)
03-10 14:07:35.550: W/System.err(26781):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:55)
03-10 14:07:35.555: W/System.err(26781):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
03-10 14:07:35.555: W/System.err(26781):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1693)
03-10 14:07:35.555: W/System.err(26781):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1667)
03-10 14:07:35.555: W/System.err(26781):    at com.j256.ormlite.android.AndroidCompiledStatement.getCursor(AndroidCompiledStatement.java:162)
03-10 14:07:35.555: W/System.err(26781):    at com.j256.ormlite.android.AndroidCompiledStatement.runQuery(AndroidCompiledStatement.java:57)
03-10 14:07:35.555: W/System.err(26781):    at com.j256.ormlite.stmt.SelectIterator.<init>(SelectIterator.java:55)
03-10 14:07:35.555: W/System.err(26781):    at com.j256.ormlite.stmt.StatementExecutor.buildIterator(StatementExecutor.java:232)
03-10 14:07:35.555: W/System.err(26781):    at com.j256.ormlite.dao.BaseDaoImpl.createIterator(BaseDaoImpl.java:952)
03-10 14:07:35.555: W/System.err(26781):    at com.j256.ormlite.dao.BaseDaoImpl.iterator(BaseDaoImpl.java:531)
03-10 14:07:35.555: W/System.err(26781):    at com.j256.ormlite.dao.BaseDaoImpl.iterator(BaseDaoImpl.java:526)
03-10 14:07:35.560: W/System.err(26781):    at com.j256.ormlite.dao.LazyForeignCollection.seperateIteratorThrow(LazyForeignCollection.java:75)
03-10 14:07:35.565: W/System.err(26781):    at com.j256.ormlite.dao.LazyForeignCollection$1.closeableIterator(LazyForeignCollection.java:86)
03-10 14:07:35.565: W/System.err(26781):    ... 12 more 
```

歌词信息.java

```
public class LyricsInfo {
@DatabaseField(generatedId=true) @Getter @Setter private int id;
@ForeignCollectionField @Setter private ForeignCollection<Lyric> lyrics;
...

public List<Lyric> getLyrics() {
    ArrayList<Lyric> itemList = new ArrayList<Lyric>();
    CloseableWrappedIterable<Lyric> it = lyrics.getWrappedIterable();
    try {
        for(Lyric lyric: it)
            itemList.add(lyric);
    } finally {
        try {
            it.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    return itemList;
}

public LyricsInfo(List<String> theLyrics) {
    try {

        if(lyrics == null)
            lyrics = DatabaseManager.getInstance().getHelper().getDao(DatabaseHelper.LYRICSINFO).getEmptyForeignCollection("lyrics");
    } catch (SQLException e) {
        Log.e("Test","Exception occured");
        e.printStackTrace();
    }
    ...
    lyrics.add(...);
    ...

}

} 
```

歌词.java

```
@DatabaseTable
@RequiredArgsConstructor()
@NoArgsConstructor()
public class Lyric {
    @DatabaseField(generatedId=true) @Getter @Setter private int id;
    @DatabaseField(canBeNull=true) @NonNull @Getter @Setter private int time;
    @DatabaseField(canBeNull=true) @NonNull @Getter @Setter private String text;
    @DatabaseField(foreign=true,foreignAutoRefresh=true)  @Getter @Setter private LyricsInfo lyricsInfo;

    public void appendText(String text) {
        this.text += text;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:36:53.433

如果您阅读以下两个答案中的任何一个：

*   [索引 1 处的绑定值在查询中为空？](https://stackoverflow.com/questions/10300327/bind-value-at-index-1-is-null-android-sqlite-query)
*   [IllegalArgumentException：索引 1 处的绑定值为 null](https://stackoverflow.com/questions/4572090/android-sql-illegalargumentexception-the-bind-value-at-index-1-is-null)

他们似乎在说 Sqlite 正在引发异常，因为它试图迭代的字段之一是`null`. 有可能：

```
@DatabaseField(canBeNull=true) @NonNull @Getter @Setter private int time; 
```

也许那应该是一个`Integer`？不过我只是猜测。如果您显示导致此问题的数据行，我们或许能够提供更具体的帮助。

# jquery - 单击外部图像时阻止 Fancybox 1.3 关闭

> ID：15322763
> 
> 赞同：0
> 
> 时间：2013-03-10T13:29:37.267
> 
> 标签：jquery, html, fancybox

我之前搜索并发现了一些关于此的问题，但没有一个答案有效。当我单击图像外部时，我想要它做的不是关闭，而只是单击角落中的 X。

我尝试了很多不同的想法，有些只是在同一帧中打开图像，而有些则有效，只是现在角落里的 X 消失了，所以我根本无法关闭它。

让我最接近的是“modal:true”，但 X 使用它消失了。

这是我的页面，图片位于菜单中的“Fotografier”下：http: [//esoxluciusdegothia.blogg.se](http://esoxluciusdegothia.blogg.se/)

我为 Fancybox 提供的代码是：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox();
    });
</script> 
```

正如我所说，我尝试的大多数“答案”只是让图片在同一个窗口中打开，就像它是图片的直接链接一样。我希望他们弹出并获得导航按钮+关闭按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:57:04.787

对于 fancybox **v1.3.x**使用这些 API 选项：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox({
           "hideOnOverlayClick" : false, // prevents closing clicking OUTSIE fancybox
           "hideOnContentClick" : false, // prevents closing clicking INSIDE fancybox
           "enableEscapeButton" : false  // prevents closing pressing ESCAPE key
        });
    });
</script> 
```

...所以关闭fancybox的唯一方法是按下`close`按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T15:54:00.700

**编辑：**这个答案涉及fancyBox 2。请参阅[JFK](https://stackoverflow.com/questions/15322763/stop-fancybox-1-3-from-closing-when-clicking-outside-image#15326193)对fancyBox 1.3 方式的回答。

如果您查看 fancyBox 代码，您会注意到该`modal`设置只是一个快捷方式：

```
// 'modal' propery is just a shortcut
if (coming.modal) {
    $.extend(true, coming, {
        closeBtn   : false,
        closeClick : false,
        nextClick  : false,
        arrows     : false,
        mouseWheel : false,
        keys       : null,
        helpers: {
            overlay : {
                closeClick : false
            }
        }
    });
} 
```

在您的情况下，您想要的是：

```
$('.fancybox').fancybox({
    helpers: {
        overlay: {
            closeClick: false
        }
    }
}); 
```

# php - 基于会话的登录系统 - 通过 AJAX 发出警告

> ID：15322764
> 
> 赞同：0
> 
> 时间：2013-03-10T13:29:37.763
> 
> 标签：php, javascript, jquery, ajax, session

我在使用基于会话的登录（使用 PHP、HTML 和 CSS 实现）时遇到问题。到现在为止还挺好。现在我希望当您输入错误时，会出现警告。首先，我刚刚创建了带有附加警告的第二页。但最好在 AJAX 中实现这一点（也许使用 jQuery）。但现在我有一个问题。由于我已经实现了 AJAX 部分，我无法登录。每次出现警告。当我删除 AJAX 请求时，一切正常。似乎不再调用php验证部分。但我不知道为什么。这是代码：

这是验证的一部分（loginscript.php）。登录表单的名称为 loginform，submit.button 的名称为 login。

```
else if (isset( $_POST['login'] )) 
{
    $username = $_POST['username'];
    $password = $_POST['password'];

    $clean_username = strip_tags(stripslashes(mysql_real_escape_string($username)));

    $clean_password = (strip_tags(stripslashes(mysql_real_escape_string($password))));

    $hash_password = saltedHash($clean_password, $clean_username);

    $sql = mysql_query("SELECT * FROM $loginTable WHERE $attUsername = '$clean_username' AND $attPassword = '$hash_password'");

    if (mysql_num_rows($sql) == 1) 
    {
        $_SESSION['logged'] = true;
        echo 'correct';
        header('refresh:2;url=ajax/cmapp.php');
        exit;
    }
} 
```

显示的部分不起作用，因为我使用它：

```
$(document).ready(function()
{
$("#tr1").hide();
/* sendung formular abfangen */
$("#loginform").submit(function() {
                                /* ajax objekt zum aufruf & versand an das skript
    'name' und 'email' sind in der data-zeile die variablen für das php-skript */
    $.ajax({
        type: "POST",
        url: "loginscript.php",
        data: "username=" + $("#username").val() + "&password=" + $("#password").val(),
        success: function(msg)
        {
            if (msg == 'correct')
                {
                    alert("hjlkjl")
                    window.location='ajax/cmapp.php';
                }
            else
                {
                    $("#tr1").hide().load("message.html").fadeIn(0);
                } 
```

每次执行 else 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:07:31.067

您的`data`值应该包含一个`login`变量，否则 PHP 脚本将不会输入条件。并且由于您使用 POST，因此您可以使用对象作为`data`值

```
data : {
  username : $("#username").val(),
  password : $("#password").val(),
  login : true,
} 
```

# css - 将图像与表格单元格的边缘对齐

> ID：15322768
> 
> 赞同：0
> 
> 时间：2013-03-10T13:29:54.427
> 
> 标签：css, image, css-tables

我正在对其中一个预制论坛进行大量定制，我想做的一件事是用其他东西替换在线/离线图形，然后重新定位它们，而不是定位在用户名的末尾，它位于帖子该部分的左角。

我的目的是让 div 标签中的 img 代码分配有`float:left`, 和`position:absolute`（需要使用绝对，否则其他元素，例如用户名和头像将变得偏离中心）。目前，这就是我所拥有的：

[http://img849.imageshack.us/img849/6357/18555863.gif](http://img849.imageshack.us/img849/6357/18555863.gif)

如您所见，似乎有某种我无法通过的填充或边距。我尝试为 、 和 的 div 添加样式`margin:0px, padding:0px`，`left:0px`但`top:0px`它们都无法将图像移动到正确的位置（即，关闭图像边缘和表格边框之间的间隙细胞）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:46:03.033

您可以尝试为图像分配负边距。

```
img{
margin-left: -10px;
margin-top: -10px;
} 
```

# java - 如何在 Java 中将“YYYY-MM-DD hh:mm:ss”转换为 UNIX 时间戳？

> ID：15322780
> 
> 赞同：1
> 
> 时间：2013-03-10T13:30:56.917
> 
> 标签：java, unix-timestamp

或者，也许您知道如何解决此问题的更好方法。我以“YYYY-MM-DD HH:MM:SS”的格式获取日期，并且需要以近似增量计算现在之间的时间差：1 分钟前、1 小时前等。

任何指针都非常感谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:40:42.307

看看[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。

您可以定义您的模式并将其解析为 Java 日期对象：

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date date = format.parse("your string goes here");
long timestamp = date.getTime(); 
```

第一行定义 SimpleDateFormat（如果您经常重复使用它也可以是静态的） 第二行解析您的输入 第三行将其转换为毫秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:36:16.537

首先，您需要将日期字符串解析为 a `Date`，然后从中获取时间戳：

```
final SimpleDateFormat dateFormat = new SimpleDateFormat("YYYY-MM-dd HH:mm:ss");

final String myDateString = "someDateString";
final Date date = dateFormat.parse(myDateString);

final long timestamp = date.getTime(); 
```

查看[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)javadocs 以获取有关使用哪种格式字符串的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:39:39.220

您需要在 SimpleDateFormat 的帮助下将字符串转换为 java.util.Date （例如，请参阅 - [https://stackoverflow.com/search?q=simpledateformat+%5Bjava%5D](https://stackoverflow.com/search?q=simpledateformat+%5Bjava%5D)），然后获取自 1 月 1 日以来的毫秒数，1970 年，格林威治标准时间 00:00:00。

```
Date dt = new Date();
long unixTimeStamp = dt.getTime(); 
```

# c# - 在中继器控件中找不到标签控件

> ID：15322781
> 
> 赞同：1
> 
> 时间：2013-03-10T13:31:06.543
> 
> 标签：c#, asp.net, exception, repeater

我想在后面的代码中使用带有 ID 的 Label 控件`TextLabel`，但这给了我以下异常`Object reference not set to an instance of an object.`异常是在代码后面文件中的这行代码上：

```
 Label label = e.Item.FindControl("TextLabel") as Label;

  string text = label.Text; 
```

我在这里犯了什么错误？如何在后面的代码中找到“TextLabel”控件？

asp代码：

```
<asp:Repeater ID="UserPostRepeater" runat="server" OnItemDataBound="UserPostRepeater_ItemDataBound">
    <HeaderTemplate>
    </HeaderTemplate>
    <ItemTemplate>

        <asp:Label ID="TextLabel" runat="server" Text="Label"></asp:Label>
    </ItemTemplate>
    <FooterTemplate>
    </FooterTemplate>
</asp:Repeater> 
```

代码隐藏：

```
protected void UserPostRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    BlogProfileEntities blogProfile = new BlogProfileEntities();
    Label label = e.Item.FindControl("TextLabel") as Label;
    string text = label.Text;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T13:38:26.073

使用时，`ItemDataBound`您需要检查中继器项目的类型 - `e.Item.ItemType`。

它必须是`ListItemType.Item`或`ListItemType.AlternatingItem`- 这些是标签所在的模板。

```
protected void UserPostRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    BlogProfileEntities blogProfile = new BlogProfileEntities();

    if (e.Item.ItemType == ListItemType.Item || 
        e.Item.ItemType == ListItemType.AlternatingItem)
    {
      Label label = e.Item.FindControl("TextLabel") as Label;
      string text = label.Text;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:46:10.583

> 您需要指定`ItemType`它的类型。这将适用于您的情况：

```
protected void UserPostRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)  // Add this
    {
     Label label = e.Item.FindControl("TextLabel") as Label;
     string text = label.Text;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T13:39:39.653

您必须检查正确的输入`ItemType`，`ItemDataBound`因为它是为**每个**项目调用的，所以是第 `Header`一个。

```
protected void UserPostRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
     // This event is raised for the header, the footer, separators, and items.
      // Execute the following logic for Items and Alternating Items
      if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) 
      {
         Label label = e.Item.FindControl("TextLabel") as Label;
         string text = label.Text;
      }
} 
```

# javascript - 把数字变成星星？

> ID：15322782
> 
> 赞同：3
> 
> 时间：2013-03-10T13:31:10.143
> 
> 标签：javascript

我有这个代码可以很好地将数字一变成一颗星，但是如果我想要像 1-5 这样的几个数字变成与数字相同数量的星星（*），我可以在同一个循环中执行此操作或我需要创建 5 个不同的循环，每个数字一个吗？

```
function changeNumber()
{
    var elements= document.getElementsByClassName("grade");
    for (var i=0; i<elements.length; i++) {
        var element = elements[i];
        var text = element.innerHTML; 
        var x = text.replace('1','*');
        element.innerHTML=x;
    }

} 
```

此代码获取用户输入的值并将其放入数组中...

```
var button = $('#add');
    button.click(function() 
    {
        //funktion för vad som ska hända när man klickar på knappen
        var filmnamn = $('#name');
        var filmnamnet = filmnamn.val();
        var betyg = $('#star');
        var betyget = betyg.val();
        betyget = Number(betyget);

        if(filmnamnet == 0)
        {
            $('#name').css('background-color', 'red');

        }
        if(betyget == 0)
        {
            $('#star').css('background-color', 'red');

        }
        if(betyget == 0 || filmnamnet == 0)
        {
            alert("Vänligen fyll i fälten korrekt");

        }
        else
        {
            var array = new Array();
            array.unshift(betyget);
            array.unshift(filmnamnet);
            film_array.unshift(array);
            betyg_array.unshift(array);
            updateFilmList();

        }

    }); 
```

然后函数 updateFilmlist 看起来像这样......

```
 var film_list = $("#filmlista");
    var film_array = new Array();        

function updateFilmList()
    {
            document.getElementById("name").value = '';
            document.getElementById("star").value = 0;
            var filmen = film_array[0][0];
            var grade = film_array[0][1];
            var element = '<li class="lista">' + filmen + '<span class="betyg">'+ grade +'</span></li>';
            film_list.append(element);
            changeNumber();

    } 
```

当我添加你在changeNumber函数中显示的代码时，唯一变成星号的数字是动态创建的列表中的第一个列表元素......然后其余的只是显示为数字，这是为什么呢？顺便说一句，您可以忽略 betyg_array ，因为它用于另一个功能并且与问题无关......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T13:43:18.967

适合您的单线器：

```
var str = '8 rabbits, that\'s 16 rabbit ears';
str = str.replace(/(\d+)/g,function(a){return Array(+a+1).join('*')});
//=> ******** rabbits, that's **************** rabbit ears 
```

[**解释**]

`/(\d+)/g`从字符串中提取一组连续的数字 ( `\d`)（例如 '1'、'15'）。

回调函数返回一个包含 n 个元素的连接数组 = 转换为 Number ( `+-operator`, 这里`+a`)的找到的数字集`+a+1+1`（加 1），因为包含 n 个空元素 'string' 的数组的连接返回一个长度为 n-1 的字符串。

[**奖金**`String`]你可以这样扩展

```
String.prototype.replaceNumbersWithStr = function(str){
   str = str || '*'; // default to '*';
   return this.replace(/(\d+)/g,function(a){return Array(+a+1).join(str)});
}
// usage examples
'8 rabbits, that\'s 16 rabbit ears'.replaceNumbersWithStr();
 //=> ******** rabbits, that's **************** rabbit ears

'8 rabbits, that\'s 16 rabbit ears'
   .replaceNumbersWithStr('<span class="star"></span>');
 //=> <span class="star"></span><span class="star"> ... 
```

更复杂一点：

```
String.prototype.Num2Str = function(str){
   str = str || '*'; // default to '*';
   return this.replace(/\{(\d+)\}/g,function(a,b){return Array(+b+1).join(str)});
}
// usage example
'{2} rabbits, that\'s 4 rabbit ears'.Num2Str();
 //=> ** rabbits, that's 4 rabbit ears

'Stars: {2}'.Num2Str('<span class="star"></span>');
 //=> Stars: <span class="star"></span><span class="star"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T13:41:02.623

**[工作演示](http://jsfiddle.net/NqCNf/2/)**

您不需要每个或循环的条件。

```
function changeNumber(){
    var elements= document.getElementsByClassName("grade");
    for (var i=0; i<elements.length; i++) {
        var element = elements[i];
        var length = parseInt(element.innerHTML);
        var x=Array(length+1).join("*");
        element.innerHTML=x;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T13:42:19.297

`Array(5).join("*")`会给你一串4星。我相信你可以从那里弄清楚。

# ruby-on-rails - Resque 作业在开发环境中被正确安排，但在 cucumber 中不起作用

> ID：15322783
> 
> 赞同：1
> 
> 时间：2013-03-10T13:31:22.473
> 
> 标签：ruby-on-rails, cucumber, resque

很容易配置`resque`。现在我很难通过黄瓜测试`resque_specs`。

我对 Rails 很陌生，我无法弄清楚在我的测试环境中我应该做什么和不应该做什么。

为了`resque`工作，我必须在终端中执行以下操作：

```
#start redis
redis-server /usr/local/etc/redis.conf
#launch resque
rake resque:work QUEUE='*'
#start resque-scheduler
rake resque:scheduler 
```

`Resque`工作并且`resque-scheduler`正在适当地安排工作。

我在 features/support/env.rb 中添加了以下两行

```
require 'resque_spec/scheduler'
require 'resque_spec/cucumber' 
```

这是黄瓜步骤。

```
Then(/^application should poll remote service every (\d+) seconds$/) do |arg1|
    RemoteServiceWorker.should have_scheduled().in(arg1)
end 
```

它没有通过并出现以下错误：

```
expected that RemoteServiceWorker would have [] scheduled in 30 seconds (RSpec::Expectations::ExpectationNotMetError) 
```

这不够描述。我已经阅读了[https://github.com/leshill/resque_spec](https://github.com/leshill/resque_spec)`resque_specs`上的文档，但没有帮助。我的猜测是它永远不会在我的测试环境中启动。`resque-scheduler`

问题是：我需要在我的测试环境中单独`redis`启动`resque`和启动吗？`resque-scheduler`还是问题出在其他地方？

谢谢！

# wordpress - 对 WordPress 的管理区域插件使用 get 方法

> ID：15322785
> 
> 赞同：0
> 
> 时间：2013-03-10T13:31:25.400
> 
> 标签：wordpress, plugins, hyperlink, get, admin

我正在尝试使用 get 或 post 方法通过我为插件创建的管理页面中的链接传输数据，但是每当我使用 get 方法将数据传输到所需页面时，get 信息就会传输到*站点/wp-admin/admin.php?name=somename&description=somedescription*而不是*site/wp-admin/admin.php?page=category-tag/tag-config-panel.php?name=somename&description=somedescription*，即使我直接到此的形式。

为什么要这样做？

```
<form action="admin.php?page=category-tag/tag-config-panel.php" method="get">
    <table class="cTable">
        <tr>
            <td>
                <span>Tag Name: </span>
            </td>
        </tr>
        <tr>
            <td>
                <input class="cTag_input" type="text" name="tName"/>
            </td>
        </tr>
        <tr>
            <td>
                <span>Description: </span>
            </td>
        </tr>
        <tr>
            <td>
                <textarea rows="4" cols="50" id="tag-description" name="tDescription"></textarea>
            </td>
        </tr>
        <tr>
            <td>
                <input class="uibutton" type="submit" value="submit">
            </td>
        </tr>
    </table>
</form> 
```

这是使用输入的示例代码，但我在这里的 get 方法遇到了同样的问题。

# ember.js - emberjs 的构建文档

> ID：15322786
> 
> 赞同：3
> 
> 时间：2013-03-10T13:31:37.870
> 
> 标签：ember.js

使用什么工具我可以从 emberjs 的源代码构建文档？JSDoc3 因“@private 标记不允许值”而失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T14:14:00.363

使用[Yuido](http://yui.github.com/yuidoc/)。有`docs`目录（在根目录下）。如果你`cd`从终端那里运行`yuidoc --server`（假设你已经安装了它），你将能够在`localhost:3000`.

# sql - 创建文件名依赖于内容

> ID：15322789
> 
> 赞同：1
> 
> 时间：2013-03-10T13:32:24.287
> 
> 标签：sql, bash, awk

我有一个 SQL 转储。我已经处理了它的内容`sed`以产生当前的形式。

```
7022,4749463839619600C700F700000000000101010....
9254,47494638396196008300F700000000003737373....
2613,FFD8FFE000104A4649460001020100C800C8000....
...... 
```

我想生成多个文件，文件名是冒号（`7022`, `9254`, `2613`）之前的字段，扩展名依赖于第二个字段。如果它以开头，`4749`则扩展名将是`.gif`else `.jpeg`。该文件的内容是反向十六进制转储的第二个字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T14:12:02.953

您可以使用以下方法轻松创建文件`awk`：

```
$ ls
file.sql 

$ cat file.sql
7022,4749463839619600C700F700000000000101010
9254,47494638396196008300F700000000003737373
2613,FFD8FFE000104A4649460001020100C800C8000

$ awk -F, '{$2~/^4749/?f=$1".gif":f=$1".jpeg";system("xxd -r -p - "f"<<<"$2)}' file.sql

$ ls
2613.jpeg  7022.gif  9254.gif  file.sql

$ file 7022.gif 
7022.gif: GIF image data, version 89a, 150 x 199

$ xxd 7022.gif 
0000000: 4749 4638 3961 9600 c700 f700 0000 0000  GIF89a..........
0000010: 0101 01                                  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:45:25.890

如果 perl 没问题，您可以使用以下脚本：

```
#!/usr/bin/perl

use warnings;
use strict;

my $debug = 1;

while (<>) {
  chomp;

  my ($basename, $data) = split ',';

  my $ext = ($data =~ /^4749/) ? 'gif' : 'jpeg';

  my $filename = "$basename.$ext";

  print "writing data for $filename: $data\n" if $debug;

  my $bytes = pack "H*", $data;

  open (my $file, ">$filename");
  print $file $bytes;
  close $file;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T14:51:43.573

这可能有效...

```
#!/bin/bash
IFS=','
while read name data dummy; do
  m=${data:0:4}
  case $m in
    4749)
      ext=gif ;;
    *)
      ext=jpeg ;;
  esac
  xxd -r -p - $name.$ext <<<$data
done 
```

# ios - 来自日期选择器的事件开始日期和警报时间

> ID：15322792
> 
> 赞同：0
> 
> 时间：2013-03-10T13:32:29.493
> 
> 标签：ios, xcode, uidatepicker

我将在日历中添加一个事件。

我的代码是正确的，但我需要来自 Datepicker 的日期和时间。

如何从 datepicker 为以下代码设置日期和时间：

```
EKEventStore *es = [[EKEventStore alloc] init];
[es requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
    /* This code will run when uses has made his/her choice */
    EKEvent *myEvent = [EKEvent eventWithEventStore:es];
    myEvent.title = @"New Event";

    myEvent.startDate = [NSDate date]; // I need to set date from Datepicker

    NSTimeInterval interval = 60*+5; // I need to set time from Datepicker
    EKAlarm *alarm = [EKAlarm alarmWithRelativeOffset:interval];
    [myEvent addAlarm:alarm];
    myEvent.endDate = [[NSDate date] initWithTimeInterval:600 sinceDate:myEvent.startDate];

    [myEvent setCalendar:[es defaultCalendarForNewEvents]];
    NSError *err;
    [es saveEvent:myEvent span:EKSpanThisEvent error:&err];
}]; 
```

您可以看到我将设置日期和时间的评论。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:33:53.617

使用（假设您是[UIDatePicker](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)`datePicker`的出口）：

```
NSDate *date = self.datePicker.date; 
myEvent.startDate = date; 
```

或在一行中：

```
myEvent.startDate = self.datePicker.date 
```

对于时间间隔：

```
NSTimeInterval interval = <time in seconds>; 
```

编辑：（在您发表评论后）

因为你只需要时间，而不是日期+时间。然后你需要使用`NSDateFormatter`和格式化日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:12:00.560

我找到了日期和时间的解决方案。我正在与您分享代码：

对于日期选择器的日期：

```
NSDate *selectedDate = self.datePicker.date;
myEvent.startDate = selectedDate; 
```

对于日期选择器的闹钟时间：

```
EKAlarm *alarm = [EKAlarm alarmWithAbsoluteDate:selectedDate];
[myEvent addAlarm:alarm]; 
```

就这样。

良好的编码;)

# javascript - 是否有茉莉花匹配器来比较对象的属性子集

> ID：15322793
> 
> 赞同：91
> 
> 时间：2013-03-10T13:32:39.477
> 
> 标签：javascript, unit-testing, jasmine

我有一个对象可以沿着我的测试行为进行扩展，但我想确保原始属性仍然存在。

```
var example = {'foo':'bar', 'bar':'baz'}

var result = extendingPipeline(example)
// {'foo':'bar', 'bar':'baz', 'extension': Function}

expect(result).toEqual(example) //fails miserably 
```

在这种情况下，我希望有一个匹配器可以通过，如下所示：

```
expect(result).toInclude(example) 
```

我知道我可以编写一个自定义匹配器，但在我看来，这是一个如此普遍的问题，应该已经有了解决方案。我应该在哪里寻找它？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2014-06-30T09:53:11.173

茉莉花2.0

```
expect(result).toEqual(jasmine.objectContaining(example)) 
```

由于此修复：[https](https://github.com/pivotal/jasmine/commit/47884032ad255e8e15144dcd3545c3267795dee0) ://github.com/pivotal/jasmine/commit/47884032ad255e8e15144dcd3545c3267795dee0 它甚至适用于嵌套对象，您只需将要部分匹配的每个对象包装在`jasmine.objectContaining()`

简单的例子：

```
it('can match nested partial objects', function ()
{
    var joc = jasmine.objectContaining;
    expect({ 
        a: {x: 1, y: 2}, 
        b: 'hi' 
    }).toEqual(joc({
        a: joc({ x: 1})
    }));
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-07-21T09:15:59.077

我有同样的问题。我刚刚尝试了这段代码，它对我有用：

```
expect(Object.keys(myObject)).toContain('myKey'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T13:46:03.927

我认为这并不常见，而且我认为您找不到。随便写一个：

```
beforeEach(function () {
    this.addMatchers({
        toInclude: function (expected) {
            var failed;

            for (var i in expected) {
                if (expected.hasOwnProperty(i) && !this.actual.hasOwnProperty(i)) {
                    failed = [i, expected[i]];
                    break;
                }
            }

            if (undefined !== failed) {
                this.message = function() {
                    return 'Failed asserting that array includes element "'
                        + failed[0] + ' => ' + failed[1] + '"';
                };
                return false;
            }

            return true;
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-01T20:24:36.313

我认为我会提供使用现代 javascript 地图和休息运算符的替代方案。我们可以使用带有 rest 运算符的解构来省略属性。[请参阅本文](https://codeburst.io/use-es2015-object-rest-operator-to-omit-properties-38a3ecffe90)中的进一步说明。

```
var example = {'foo':'bar', 'bar':'baz'}

var { extension, ...rest } = extendingPipeline(example)

expect(rest).toEqual(example) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-06T22:51:40.383

`jasmine.objectContaining()`仅适用于单层。

`expect(result).toMatchObject(example)`检查传入的对象示例是否匹配结果属性的子集。

# delphi - 在自定义组件中覆盖 TScrollBox OnResize 事件

> ID：15322794
> 
> 赞同：1
> 
> 时间：2013-03-10T13:32:46.060
> 
> 标签：delphi, delphi-2010, vcl

我正在制作一个从 TScrollBox 派生的自定义组件，它显示存储在字符串属性中的图像文件的缩略图。它工作得很好，直到在运行时调整滚动框的大小。我尝试覆盖 Risize 方法，但是当我在运行时向组件添加图像时，添加两到三个图像后，它会出错（无效的指针操作）。请参阅下面的代码

```
type
  TViewer = class(TScrollBox)
  private
    { Private declarations }
    fColumns: Integer;
    fImages : TStrings;
    fThumbWidth: Integer;
    fThumbHeight: Integer;
    procedure SetColumns(Value: Integer);
    procedure SetImages(Value: TStrings);
    procedure SetThumbWidth(Value: Integer);
    procedure SetThumbHeight(Value: Integer);
    function GetColumns: Integer;
    function GetThumbWidth: Integer;
    function GetThumbHeight: Integer;
  protected
    { Protected declarations }
    procedure LinesChanged(Sender: TObject);
    procedure UpdateViewer;
    procedure ClearViewer;
    **//procedure Resize;override;**
  public
    { Public declarations }
    constructor Create(AOwner: TComponent);override;
    destructor Destroy;override;
  published
    { Published declarations }
     property Columns : Integer read GetColumns write SetColumns default 5;
     property Images  : TStrings read fImages write SetImages;
     property ThumbHeight: Integer read GetThumbHeight write SetThumbHeight default 100;
     property ThumbWidth: Integer read GetThumbWidth write SetThumbWidth default 100;
     property OnImageClick: TNotifyEvent read  fOnImageClick write  fOnImageClick;
  end;

procedure Register;

implementation

procedure TViewer.ClearViewer;
var
 I: Integer;
begin
 for I := ControlCount-1 downto 0 do
   TPanel(Components[I]).Free;
end;

procedure TViewer.UpdateViewer;
var
 I,X,Y,C, D: Integer;
 Thumb, btnPnl: TPanel;
 img: TImage;
 btn1, btn2, btn3, btn4: TSpeedButton;
begin
 self.
 ClearViewer;
  X:= 0;
  Y:= 0;
  C:= 1;
  D:= 5;
  Thumb:= nil;
  for I := 0 to fimages.Count - 1 do
  begin
   if fileExists(fimages[I]) then
   begin
     Thumb:= TPanel.Create(self);
     Thumb.Parent:= self;
     thumb.Tag:= I;

     Thumb.Caption:= '';
     Thumb.Left:= X + D;
     Thumb.Top:= Y + D;
     Thumb.Width:= fThumbWidth;
     Thumb.Height:= fThumbHeight; 
     img:= TImage.Create(Thumb);
     img.Parent:= Thumb;
     img.Tag:= I;
     img.Align:= alClient;
     img.Stretch:= true;
     img.OnClick:= fOnImageClick;
     img.Picture.LoadFromFile(fImages[I]);
   end;
   X:= X + Thumb.Width + D;
   if C = fColumns then
   begin
     X:= 0;
     Y:= Y + Thumb.Height + D;
     C:= 0;
   end
   else
   Inc(C);
  end;
end;

procedure TViewer.SetImages(Value: TStrings);
begin
  fImages.Assign(Value);
  UpdateViewer;
end;

procedure TViewer.SetColumns(Value: Integer);
begin
 if fColumns <> value then
  fColumns:= Value;
end;

procedure TViewer.SetThumbWidth(Value: Integer);
begin
 if fThumbWidth <> Value  then
  fThumbWidth:= Value;
end;
procedure TViewer.SetThumbHeight(Value: Integer);
begin
 if fThumbHeight <> Value  then
  fThumbHeight:= Value;
end;

function TViewer.GetColumns: Integer;
begin
 result:= fColumns;
end;

function TViewer.GetThumbWidth: Integer;
begin
  result:= fThumbWidth;
end;

function TViewer.GetThumbHeight: Integer;
begin
  result:= fThumbHeight;
end;

procedure TViewer.LinesChanged(Sender: TObject);
begin
  UpdateViewer;
end;

**{procedure TViewer.Resize;
begin
  inherited;
  UpdateViewer;
end;}**

constructor TViewer.Create(AOwner: TComponent);
begin
  inherited Create(aOwner);
  DoubleBuffered:= True;
  fImages := TStringList.Create;
  TStringList(fImages).OnChange := LinesChanged;
  fThumbHeight:= 100;
  fThumbWidth:= 100;
  fColumns:= 5;
end;

destructor TViewer.Destroy;
begin
  fImages.Free;
  inherited;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T13:40:33.200

编码

```
for I := ControlCount-1 downto 0 do
  TPanel(Components[I]).Free; 
```

是有问题的。的确，`ControlCount`就是`Controls`这样。你不能混合它们！`ComponentCount``Components`

你应该这样做：

```
for I := ControlCount-1 downto 0 do
  Controls[I].Free; 
```

但是，我不认为这是问题所在。

# assembly - x64 SSE 数据类型

> ID：15322795
> 
> 赞同：7
> 
> 时间：2013-03-10T13:33:02.067
> 
> 标签：assembly, 64-bit, sse

*AMD64 架构程序员手册第 1 卷：应用程序编程*第 226 页关于 SSE 指令说：

> 处理器在执行指令之前不会检查指令操作数的数据类型。它只在执行时检查它们。例如，如果处理器执行的算术指令采用双精度操作数，但 MOVx 指令提供了单精度操作数，则处理器将在执行算术运算之前首先将操作数从单精度转换为双精度，然后结果将是正确的。但是，所需的转换可能会导致性能下降。

我不明白这一点；我原以为 ymm 寄存器只包含 256 位，每条指令根据其预期的操作数进行解释，由您来确保存在正确的类型，在所描述的场景中，CPU 将全速运行并默默地给出错误的答案。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:42:34.713

英特尔[® 64 和 IA-32 架构优化参考手册](http://www.intel.co.uk/content/dam/doc/manual/64-ia-32-architectures-optimization-manual.pdf#page=269)§5.1 对混合整数/FP“数据类型”说了类似的话（但奇怪的是不是单数和双数）：

> 在编写适用于整数和浮点数据的 SIMD 代码时，请使用 SIMD 转换指令或加载/存储指令的子集，以确保 XMM 寄存器中的输入操作数包含正确定义以匹配指令的数据类型。
> 
> 包含交叉类型使用的代码序列在不同的实现中产生相同的结果，但会导致显着的性能损失。强烈建议不要使用 SSE/SSE2/SSE3/SSSE3/SSE44.1 指令对 XMM 寄存器中类型不匹配的 SIMD 数据进行操作。

英特尔[® 64 和 IA-32 架构软件开发人员手册](http://download.intel.com/products/processor/manual/325462.pdf)同样令人困惑：

> SSE 和 SSE2 扩展定义了打包和标量浮点数据类型以及 128 位 SIMD 整数数据类型的类型化操作，但 IA-32 处理器不会在架构级别强制执行这种类型化。他们只在微架构级别执行它。
> 
> ...
> 
> Pentium 4 和 Intel Xeon 处理器执行这些指令时不会产生无效操作数异常 (#UD) 并将在寄存器 XMM0 中产生预期的结果（即每个寄存器的高 64 位和低 64 位将被视为双精度浮点值，处理器将相应地对它们进行操作）。
> 
> ...
> 
> 在此示例中： XORPS 或 PXOR 可用于代替 XORPD 并产生相同的正确结果。然而，由于操作数数据类型和指令数据类型之间的类型不匹配，由于指令在微体系结构级别的实现会导致延迟损失。
> 
> 使用错误类型的移动指令也可能导致延迟损失。例如，MOVAPS 和 MOVAPD 都可用于将压缩的单精度操作数从内存移动到 XMM 寄存器。但是，如果使用 MOVAPD，则当正确键入的指令尝试使用寄存器中的数据时，将产生延迟损失。
> 
> 请注意，将数据从 XMM 寄存器移动到内存时不会产生这些延迟损失。

我*真的*不知道“他们只在微架构级别执行它”是什么意思，除了它表明不同的“数据类型”被 μarch 以不同的方式处理。我有几个猜测：

*   AIUI、x86 内核由于寄存器不足，通常使用[寄存器重命名。](http://en.wikipedia.org/wiki/Register_renaming)也许它们在内部为整数/单/双操作数使用不同的寄存器，因此它们可以更靠近相应的向量单元。
*   FP 数字似乎也可能在内部使用不同的格式表示（例如，使用更大的指数来摆脱 denorms）并仅在必要时转换为规范位。
*   CPU 使用“[转发](http://en.wikipedia.org/wiki/Hazard_%28computer_architecture%29#Register_forwarding)”或“绕过”，因此执行单元不必等待数据写入寄存器，然后才能被后续指令使用，通常可以节省一两个周期。这可能不会发生在整数和 FP 单元之间。

# html - 在 iframe 中的光标位置插入 html 内容

> ID：15322799
> 
> 赞同：1
> 
> 时间：2013-03-10T13:33:41.207
> 
> 标签：html, iframe

当用户在 iframe 中按下按钮时，我试图动态插入表格。我使用的 insertHTML 方法没有锻炼。所以我使用了 pasteHTML 方法。内容现在被插入 iframe 的顶部。这是我写的代码......

代码.....

* * *

```
<html>
  <head>
    <script type="text/javascript">
       var editorDoc;
        function InitEditable () 
         {
           var editor = document.getElementById ("editor");
           editorDoc = editor.contentWindow.document;          
           var editorBody = editorDoc.body;

           if ('spellcheck' in editorBody) 
        {  
            editorBody.spellcheck = false;
            }

           if ('contentEditable' in editorBody) 
       {
            editorBody.contentEditable = true;
           }
          else 
           {  // Firefox earlier than version 3
            if ('designMode' in editorDoc) 
             {
                    // turn on designMode
             editorDoc.designMode = "on";                
             }
        }
    }

          function editorCommand(command) 
    {
             editorDoc.execCommand (command, false, null);
           }

    function addTable()
    {
             editorDoc.focus();
             var  html = '<table border="1"><tr><td>1</td></tr></table>'  
             var sel, range;
             if (window.getSelection) {
            // IE9 and non-IE
            sel = window.getSelection();
            if (sel.getRangeAt && sel.rangeCount) 
             {
              range = sel.getRangeAt(0);
              range.deleteContents();
              var el = document.createElement("div");
              el.innerHTML = html;
             var frag = document.createDocumentFragment(), node, lastNode;
              while ( (node = el.firstChild) ) 
               {
                lastNode = frag.appendChild(node);
               }
               range.insertNode(frag);

        // Preserve the selection
           if (lastNode) 
           {
            range = range.cloneRange();
            range.setStartAfter(lastNode);
            range.collapse(true);
            sel.removeAllRanges();
            sel.addRange(range);
        }
    }
 } else if (document.selection && document.selection.type != "Control") {
    // IE < 9
    document.selection.createRange().pasteHTML(html);
}

    }

  </script>
 </head>
 <body onload="InitEditable ();">
 <table bgcolor="red" border="1" width="65%" height="5%">
    <tr><td width="5%"><img src="" onClick="editorCommand('bold')"></img></td>
    <td> <img src="" onClick="addTable()"></img></td>
   </tr></table>

<iframe id="editor" width="65%" height="70%">

</iframe>
 <br/><br/>    
 <br/>

 </body>
</html> 
```

# javascript - QWebView 调用 Javascript 函数

> ID：15322804
> 
> 赞同：4
> 
> 时间：2013-03-10T13:34:16.480
> 
> 标签：javascript, qt, user-interface, webview

我尝试将 QAction 的信号触发（）与 QWebView 中的 JS 函数连接起来。所以，我的代码：

```
...      
QWebView *webView = new QWebView;   
QAction *buttonAction = new QAction;
webView->load(QUrl(":/example.html");
...   
connect(buttonAction, SIGNAL(triggered()), this, SLOT(alert()));  
... 
```

插槽功能：

```
void MainWindow::alert()
{
   webView->page()->mainFrame()->evaluateJavaScript(QString("myFunction();"));
} 
```

在 example.html 中：

```
<script type="text/javascript">
    function myFunction()
    {
       alert("I am an alert box!");
    }
</script> 
```

因此，应用程序正常启动，但是当我按下按钮时，应用程序出现错误，而不是显示警报。此外，调试中有消息：

```
QWaitCondition: Destroyed while threads are still waiting 
```

有什么事？

# ruby - 用于调试 Ruby 2.0.0 的 Vim 插件？

> ID：15322806
> 
> 赞同：2
> 
> 时间：2013-03-10T13:34:27.073
> 
> 标签：ruby, debugging, vim, macvim, ruby-2.0

我已经看到了一些在 Vim 中运行 Ruby 调试器的选项，包括 StackOverflow 上的一些很好的答案。但是，其中大多数似乎都针对 Ruby 1.8 或 1.9.2，并且不清楚如何让调试器在 Vim 中与 Ruby 2.0.0 一起运行。

最新的似乎是[https://github.com/astashov/vim-ruby-debugger](https://github.com/astashov/vim-ruby-debugger)。感谢这里的一些答案，我已经能够让 Rails 服务器在这个插件下运行。但是，设置断点似乎没有任何效果：代码只是完成而没有中断。

我正在使用自制软件中的 MacVim，它回答启用 Ruby。

我是否缺少其他一些插件或宝石？

需要哪些 Vim 插件和 Ruby gem 才能在 Vim 中获得良好的调试体验（尤其是在 Mac OS X Lion 上）？

# html - PayPal动态定价和IPN？

> ID：15322807
> 
> 赞同：1
> 
> 时间：2013-03-10T13:34:29.520
> 
> 标签：html, paypal

因此，我正在尝试创建一个可以更改价格的“立即购买”页面。所以我得到了一个立即购买的 PayPal 按钮。

```
<form name="_xclick" action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="me@example.com">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="item_name" value="Dildo">
<input type="hidden" name="amount" value="12.99">
<input type="image" src="http://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif"         border="0" name="submit" alt="Make payments with PayPal - it\'s fast, free and secure!">
</form> 
```

但是当我使用它时，它不会发送到 IPN。我的 IPN 工作正常，因为我已经对其进行了测试。当使用这样的按钮进行付款时，我似乎无法让 PayPal 发送到 IPN。但我需要动态更改价格。

# angularjs - 使用 AngularJS 和 ng-repeat 有效地更新列表很重要

> ID：15322813
> 
> 赞同：4
> 
> 时间：2013-03-10T13:35:09.333
> 
> 标签：angularjs

假设我有一个`$scope.items`使用`ng-repeat`. 这个列表相当大并且定期更新，但一次只更新单个项目，例如。第 2 项更新 12 次，第 359 项更新 2 次，第 1071 项更新 89 次，依此类推。

据我了解，更新`$scope.items`列表中的单个项目将导致 AngularJS 重新呈现完整列表，即使大多数项目根本没有改变。这似乎是一件毫无意义的事情，并且肯定可以以更有效的方式处理。我可以使用 jquery 之类的工具并自己更新 DOM，但这似乎在很大程度上违背了 AngularJS 的观点。AngularJS 中是否有任何方法可以更新`ng-repeat`生成模型中的单个列表元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-02T19:24:36.237

对于像我一样登陆这个话题的人。查看 ngRepeat 指令的“track by”增强。

[http://www.bennadel.com/blog/2556-using-track-by-with-ngrepeat-in-angularjs-1-2.htm](http://www.bennadel.com/blog/2556-using-track-by-with-ngrepeat-in-angularjs-1-2.htm) [https://docs.angularjs.org/api/ng/directive/ngRepeat](https://docs.angularjs.org/api/ng/directive/ngRepeat)

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T16:06:30.980

这取决于您如何设置绑定和更新。如果您有一个大列表，请进行更新，发送到服务器并将整个列表替换为服务器的返回，是的，您将重新渲染。但是，如果您只是更新需要更新的一条信息，将那条原子信息发送到服务器，则没有理由重新渲染整个数据集。

如果您担心或真的想一次在屏幕上显示 10,000 个项目，请为行设置查看模式和编辑模式。您可以使用单向绑定 ( [https://github.com/abourget/abourget-angular](https://github.com/abourget/abourget-angular) ) 呈现只读版本，并在编辑模式下显示具有双向绑定的表单。这将显着增加您在任何给定时间可以在屏幕上显示的项目数量，同时仍允许您编辑每个项目。

# c# - c# deflatestream 返回大量空字符

> ID：15322816
> 
> 赞同：0
> 
> 时间：2013-03-10T13:35:23.623
> 
> 标签：c#, deflatestream

我正在尝试使用 DeflateStream 从 Web 服务器膨胀数据。但是由于某种原因，我的函数返回的字节数组包含几个空字符，而不是它们应该是的任何字符。例如（空格代表一个空字符）

```
 ge       603-595568599                     _web           :   msg 
```

我不确定我做错了什么。这是我的解压缩功能：

```
using (FileStream inFile = new FileStream(filename, FileMode.Open, FileAccess.Read))
{
    using (DeflateStream Decompress = new DeflateStream(inFile, CompressionMode.Decompress, true))
    {
        //Decompress.Flush();
        using (StreamReader reader = new StreamReader(Decompress))
        {
            byte[] temp = Encoding.UTF8.GetBytes(reader.ReadToEnd());
            for (int i = 0; i < temp.Length; i++)
            {
                if (temp[i] < 10) temp[i] = 0x20;
            }
            r0 = Encoding.UTF8.GetString(temp);
        }
    }
} 
```

难道我做错了什么？这会/可能是什么原因？

ETA：使用 msdn 文章中的示例代码产生相同的结果

```
using (FileStream inFile = new FileStream(filename, FileMode.Open, FileAccess.Read))
{
    using (FileStream decompressedFileStream = File.Create("packet.txt"))
    {

        using (DeflateStream decompressionStream = new DeflateStream(inFile, CompressionMode.Decompress))
        {
            decompressionStream.CopyTo(decompressedFileStream);
            r3=string.Format("Decompressed: {0}", "packet");
        }
    }
} 
```

这是一个示例数据

```
42 58 51 8C 6E 85 51 BC 31 40 04 ED 28 48 2C 06 A8 B8 3C BF 28 C5 AE 5A 2D B1 20 BF D8 3A 1B 42 59 41 28 33 43 33 03 03 13 D3 78 13 23 0B 73 53 CB A4 B4 34 D3 B4 34 03 0B 53 0B 93 B4 A4 34 8B A4 24 E3 14 D3 54 43 73 13 B3 54 23 4B 83 24 D3 E4 34 13 88 AE 5A 1B 7D B8 B1 B8 3D 51 94 5A 9C 5F 5A 94 9C 6A 57 91 99 96 66 A3 0F E7 A2 F8 0E 00 00 00 FF FF 
```

# php - HTTP/1.1 响应慢，file_get_contents 远程服务器

> ID：15322818
> 
> 赞同：4
> 
> 时间：2013-03-10T13:35:32.327
> 
> 标签：php, html, http

我正在通过 HTTP 1.0 协议从远程网站获取文件。我想我会很好，并在获取文件时使用 gzip 以最大限度地减少使用的带宽。

无论我如何形成我的标头，我都没有在响应中获得 gzip 压缩的内容，尽管在使用浏览器测试它时它确实如此。我还使用我的代码从我自己的网站获得了 gzip 格式。

我认为这是因为他们的服务器正在使用仅在 HTTP 1.1 中可用的分块传输编码。

我将协议切换到 HTTP 1.1。这是我下面的代码。我的网站对此做出了回答，尽管 1.0 立即执行的操作需要几秒钟。当我在远程网站上尝试它时，它会一直加载而没有回答。

所以我的问题是，为什么 1.1 这么慢？我使用了格式错误的标头还是什么？另外，为什么我的页面回答而另一个没有。有输入吗？谢谢。

```
$header = array(
    'http' => array(
    'method'  => 'GET',
    'header'  => 'Accept-Encoding: gzip\r\n' .
    'User-Agent: test\r\n)' .
    'Accept-Charset: ISO-8859-1,utf-8\r\n' .
    'Accept-Encoding: gzip, sdhc, deflate\r\n' . 
    'Host: www.mysite.test.com\r\n' .,
    'protocol_version' => '1.1\r\n'
);

$context = stream_context_create($header);
$file_string = file_get_contents('www.mysite.test.com/test.txt', false, $context); 
```

编辑：在达到服务器保持活动限制之前，它肯定会保持连接打开。花了大约 1.1 分钟从他们的网页上得到我的答案。需要弄清楚如何关闭连接。否则它似乎工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:20:04.237

嗯......似乎在我用头撞墙一段时间后答案很明显。

我将 Connection 移到靠近顶部的位置，它突然起作用了，但随后 gzip 设置停止工作。所以我试图弄清楚为什么顺序似乎很重要。似乎我用单引号引用 ' 而不是 " 导致 \r\n 无法正确评估。至少我认为这是问题所在。它现在似乎正在工作. 无论如何，谢谢大家...当我犯这样的简单错误时，我讨厌它...

再次编辑：我似乎仍然没有从该站点获得 gzip，尽管它适用于我的。我将尝试从浏览器复制标题，看看会发生什么。

编辑2：我们走了！它按预期工作。也许他们以某种方式过滤了用户代理或其他什么。

编辑 3：现在我在多次下载同一个文件时得到了非常随机的结果。有时我把它压缩了，有时没有。他们的服务器随机为我提供两个标头之一。唯一的区别是 Vary：Accept-Encoding 和 Content-Encoding：gzip。我认为一旦我告诉它我可以处理它，它总是会发送 gzip？我自己的服务器似乎不断地提供 gzip。

编辑 4：由于某种原因，在用户代理中使用早期的 MSIE 5.0 版本时，我有时会得到 gzip:ed 并且有时会解压缩。我只能理解将 gzip 交给能够处理它的用户代理，但至少它应该是一致的。反正。问题已解决，谢谢。

# php - php在没有任何占位符的情况下使用准备好的语句获取任何数据

> ID：15322824
> 
> 赞同：-3
> 
> 时间：2013-03-10T13:36:15.850
> 
> 标签：php, mysql, mysqli

我的网站处于原型阶段。

由于准备好的语句更安全并且是与 mysql db 对话的新方式，我决定使用它们并阅读 php.net 中的相关部分，但 php.net 中的所有示例都带有占位符，例如`where name = ?`.

下面我不需要占位符，但我无法打印我的输出。

我的数据库没有输出。

**我有以下注意事项：**

注意：未定义变量：第 16 行中的行
注意：未定义变量：第 16 行中的行
注意：未定义变量：第 16 行中的行
注意：未定义变量： row in ... 第 16 行

我该怎么办？你能帮我吗。

谢谢，

**在我的 index.php中问候**

```
//mysql bağlantısı
    global $db_baglanti;
    $db_baglanti = new mysqli(vt_host, vt_user, vt_password, vt_name);
    if ($db_baglanti->connect_errno) 
    {
        echo "MySQL bağlantısı kurulamadı: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
    }

    if (!$db_baglanti->set_charset("utf8")) 
    {
        printf("utf8 karakter setinin yüklenmesinde problem oluştu: %s\n", $db_baglanti->error);
    } 
    else 
    {
        $db_baglanti->set_charset("utf8");
    } 
```

**在包含的页面中**

```
$sorgum = "SELECT kolon_baslik, kolon_yazi FROM tb_yazilar";

if ($beyan = $db_baglanti->prepare($sorgum)) 
{

    /* execute statement */
    $beyan->execute();

    /* fetch values */
    while ($beyan->fetch()) {
        echo $row['kolon_baslik'].'<br /><br />'.$row['kolon_yazi'].'<br /><br />';
    }

    /* close statement */
    $beyan->close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:46:54.610

来自万能手册：[http ://www.php.net/manual/en/mysqli-stmt.fetch.php](http://www.php.net/manual/en/mysqli-stmt.fetch.php)

> 请注意，在调用 mysqli_stmt_fetch() 之前，应用程序必须绑定所有列。

从第一个例子开始：

```
/* execute statement */
$stmt->execute();

/* bind result variables */
$stmt->bind_result($name, $code);

/* fetch values */
while ($stmt->fetch()) {
    printf ("%s (%s)\n", $name, $code);
} 
```

您缺少的是`$beyan->bind_result($kolon_baslik, $kolon_yazi);`并使用这些变量而不是不存在的`$row`数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:58:25.427

谢谢，我在这个链接找到了答案：http: [//php.net/manual/en/mysqli-stmt.fetch.php](http://php.net/manual/en/mysqli-stmt.fetch.php)。

工作代码是：

```
if ($beyan = $db_baglanti->prepare($sorgum)) 
{

    /* execute statement */
    $beyan->execute();

    /* bind result variables */
    $beyan->bind_result($name, $code);

    /* fetch values */
    while ($beyan->fetch()) {
        //printf ("%s (%s)\n", $name, $code)
        echo $name.'<br /><br />'.$code.'<br /><br />';
    }

    /* close statement */
    $beyan->close();
} 
```

我了解到我必须将 mysql 结果绑定到变量，然后打印绑定的变量值。相关代码是：`$beyan->bind_result($name, $code);`

# nginx - nginx重写而不更改url

> ID：15322826
> 
> 赞同：28
> 
> 时间：2013-03-10T13:36:17.473
> 
> 标签：nginx, rewrite

我想在我的 nginx 服务器中使用重写功能。

当我尝试“ [http://www.example.com/1234](http://www.example.com/1234) ”时，我想重写“ [http://www.example.com/v.php?id=1234](http://www.example.com/v.php?id=1234) ”并想要获得“ [http://www .example.com/1234](http://www.example.com/1234) ”在浏览器中。

这是 nginx.conf 文件

```
...
  location ~ /[0-9]+ {
      rewrite "/([0-9]+)" http://www.example.com/v.php?id=$1 break;
  }
... 
```

当我尝试“ [http://www.example.com/1234](http://www.example.com/1234) ”

我想要 ...

```
url bar in browser : http://www.example.com/1234
real url : http://www.example.com/v.php?id=1234 
```

但我有麻烦了...

```
url bar in browser : http://www.example.com/v.php?id=1234
real url : http://www.example.com/v.php?id=1234 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-10T14:24:49.367

参考：[http ://wiki.nginx.org/HttpRewriteModule#rewrite](http://wiki.nginx.org/HttpRewriteModule#rewrite)

> 如果替换字符串以 http:// 开头，则客户端将被重定向，并且任何进一步的 >rewrite 指令都将终止。

所以删除 http:// 部分，它应该可以工作：

```
location ~ /[0-9]+ {
        rewrite "/([0-9]+)" /v.php?id=$1 break;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-07T08:58:36.820

In my case, I needed to use 'last' to make it work due I had other rules that I wanted to be applied:

```
location ~ /[0-9]+ {
    rewrite "/([0-9]+)" /v.php?id=$1 last;
} 
```

# graph - 我认为应该是一个简单的情节

> ID：15322829
> 
> 赞同：0
> 
> 时间：2013-03-10T13:36:31.950
> 
> 标签：graph, matplotlib

所以基本上我试图在我的 x 轴上绘制一个带有 n 和在我的 y 轴上的 r 的图表

所以对于 n=1 它有 r=1，n=2 它有 r=2，n=3 它有 r=4，n=4 它有 8，然后我打算扩展它。

我试过这个：

```
import scipy
import scipy.linalg
import numpy as np
from matplotlib import pyplot as plt

for n in range(1,5):
    A=np.identity(n)
    for i in range(0,n):
        for j in range(0,i):
            A[i,j]=-1
    A[:,n-1]=1
    x=np.random.randn(n,1)
    b=A*x
    P, L, U = scipy.linalg.lu(A)
    print A
    r=U.max()/A.max()
    print r
    print n
    plt.plot(n,r)
    plt.show() 
```

但它仅绘制 n 的最大值与 r 的相应值，而不是 n 的所有值。不知道我做错了什么。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:07:24.223

`plt.plot()`可以绘制线条和标记。默认情况下，它只会绘制线条。您只给出一个点，因此无法绘制线条，*也**不会*绘制标记。要打开标记，请设置属性`marker="o"`：`plt.plot(x, y, markers="o")`。如果你想要一个线图，你必须列出`n`并`r`绘制它们。对于带有标记的列表：http: [//matplotlib.org/api/artist_api.html#matplotlib.lines.Line2D.set_marker](http://matplotlib.org/api/artist_api.html#matplotlib.lines.Line2D.set_marker)

此外，您可能希望`plt.show()`退出 for 循环。它为每次迭代制作一个更新的数字，我不确定你是否想要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T14:56:18.083

您首先需要创建要绘制的数组，然后绘制它

```
rr, nn = [], []
for n in range(1,5):
    A=np.identity(n)
    for i in range(0,n):
        for j in range(0,i):
            A[i,j]=-1
    A[:,n-1]=1
    x=np.random.randn(n,1)
    b=A*x
    P, L, U = scipy.linalg.lu(A)
    print A
    r=U.max()/A.max()
    print r
    print n
    rr.append(r)
    nn.append(n)

plt.plot(nn,rr)
plt.show() 
```

您这样做的方式会创建一个新图，每个循环都有一个点。

此外，如果您打算增加`n`，我建议检查更有效的循环方式（例如列表理解或[itertools](http://docs.python.org/2/library/itertools.html)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T16:45:49.413

我不确定这是否是您想要的（阅读您的描述，我认为是，但查看您的代码看起来您​​正在尝试做一些更困难的事情）。

如果您真的想获得序列`1, 2, 4, 8, 16, ...`，我鼓励您在一次操作中处理整个数组，而不是使用 for 循环。它更具表现力，并且对于大型数组来说更快。

反正：

```
>>> import matplotlib.pyplot as plt
>>> import numpy as np
>>> 
>>> n = np.arange(5)
>>> r = 2 ** n
>>> r
array([ 1,  2,  4,  8, 16])
>>> plt.plot(n, r, 'ob')
[<matplotlib.lines.Line2D object at 0x102d8ee10>]
>>> plt.show() 
```

![输出](../Images/edef08ea05719a9df3ea18152bca41ff.png)

# sql - Sql 和 php 脚本

> ID：15322830
> 
> 赞同：0
> 
> 时间：2013-03-10T13:36:52.887
> 
> 标签：sql, scripting, populate, mysql

想知道我在哪里可以找到 sql 脚本和表的示例，这些脚本和表可以学习设置提前 1 年预订的公寓假期，每天和每周的价格，而无需制作包含 732 个单元格（2 年）的 sql 表。我希望设法使某人了解我在寻找什么。有几个知名网站提供此类服务。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:56:40.580

2张桌子：

*   公寓 { appt_id, appt_name}
*   预订 res_id,appt_id, date_from, date_to}

然后，您只需插入所有具有正确 appt id 的预订。然后，根据查询，您将对两个表进行连接。例如，要查找公寓 ID 繁忙的日期，您可以这样做

```
 select * from reservations where appt_id=1 
```

这显然是假设您要查询 appt 1 的日期

# symfony - 在 Symfony 2 中转发后获取原始请求信息

> ID：15322832
> 
> 赞同：0
> 
> 时间：2013-03-10T13:37:00.237
> 
> 标签：symfony

我使用以下`access_denied_url`参数创建了一个自定义错误 403 页面`security.yml`：显示新页面时，我想告诉人们在尝试访问页面 xxxxx 时发生了问题。

`$request->headers->get('referer')`是空的。

```
/**
 * @Route("/forbidden", name="error_403")
 * @Template()
 */
public function error403Action(Request $request)
{
    return array('referer' => $request->headers->get('referer'));
} 
```

如何获取有关原始请求（导致此转发的请求）的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:53:53.863

`{{ app.request.server.get('PHP_SELF') }}`它解决了直接在 Twig 模板中调用的问题。

# css - 在一行中显示 3 个 DIV

> ID：15322836
> 
> 赞同：1
> 
> 时间：2013-03-10T13:37:39.253
> 
> 标签：css, html, css-position

我正在尝试像水平线一样显示 3 个 div。

像这样：

![在此处输入图像描述](../Images/e9dd20e35537b632085c429dce75d087.png)

这是我的 HTML：

```
 <div class="notactive"></div>
         <div class="notactive"></div>
         <div class="notactive"></div> 
```

到目前为止，这是我的 CSS：

```
.notactive {
    height: 10px;
    width: 90px;
    background: #fff;
    position: absolute; 
    //left: 200px;
    bottom: 30px;
    cursor: pointer;
    float: left;
    display: block-inline;
} 
```

**更新 ：**

```
.notactive {
    height: 10px;
    width: 90px;
    background: #fff;
    position: absolute; 
    //left: 200px;
    bottom: 30px;
    cursor: pointer;
    float: left;
    display: inline-block;
} 
```

但我无法让它工作。希望有人能帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:41:19.400

几个问题：

*   它`inline-block`不是`block-inline`
*   `position:absolute`, `left`,`bottom`是不必要的
*   你使用白色作为它的背景，所以你可能看不到它

[jsFiddle](http://jsfiddle.net/GGKWK/)

```
.notactive {
    height: 10px;
    width: 90px;
    background: #000;
    cursor: pointer;
    display: inline-block;
} 
```

还有另一种方法使用`float:left;`，但`inline-block`足以满足您的需求。

[jsFiddle](http://jsfiddle.net/wcBz6/)

**HTML**

```
<div class="notactive"></div>
<div class="notactive"></div>
<div class="notactive"></div>
<div class="clear></div> 
```

**CSS**

```
.notactive {
    height: 10px;
    width: 90px;
    background: #000;
    cursor: pointer;
    float:left;
    margin:2px;
} 
```

**编辑：** [这是](http://jsfiddle.net/qNXHf/2/)您在评论中提出的小提琴问题的解决方法。我将图像和名称`div`用一个固定的`height`. 这把他们推倒了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:39:23.683

您的代码中有错误 - 应该是

```
display: inline-block; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:40:51.017

我不会为此使用绝对位置，试试这个：

```
.notactive {
    height: 10px;
    width: 90px;
    background: #fff;
    cursor: pointer;
    float: left;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T13:42:55.347

Yes display: inline-block 是你最好的选择。除非有特定原因，否则请删除绝对定位。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T13:48:20.287

```
.notactive:nth-child(1){left:0px;}
.notactive:nth-child(2){left:100px;}
.notactive:nth-child(3){left:200px;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-10T14:11:00.553

```
<html>
<head>
<style>
.left
{
width:33%;
background-color:cyan;
float:left;
height:200px;
}
.centre
{
background-color:red;
width:33%;
float:left;
height:200px;
}
.right
{
width:33%;
background-color:cyan;
float:left;
height:200px;
}

</style>
<body>
<div class="left"></div>
<div class="centre"></div>
<div class="right"></div>
</body>
</html>
try this coding that I have Created for you 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-10T14:21:29.400

```
<html>
<head>
<style>
.notactive1
{
 height: 10px;
 width: 90px;
 background: Red;
 position: absolute; 
 top:10px;
 left:100px;
}
.notactive2
{
 height: 10px;
 width: 90px;
 background: Red;
 position: absolute; 
 top:10px;
 left:200px;
 cursor: pointer;
}
.notactive3
{
 height: 10px;
 width: 90px;
 background: Red;
 position: absolute; 
 top:10px;
 left:300px;
 cursor: pointer;
}
</style>
<body>
<div class="notactive1"></div>
<div class="notactive2"></div>
<div class="notactive3"></div>
</body>
</html>
Another Answer Hope You Statisfied by this ans...... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-28T08:24:39.937

```
<div>
    <div style="display: inline-block;width:100px;height:100px;background-color:red;">DIV 1</div>
    <div style="display: inline-block;width:100px;height:100px;background-color:green;">DIV 2</div>
    <div style="display: inline-block;width:100px;height:100px;background-color:blue;">DIV 3</div>
</div>
```

# wordpress - woocommerce 购物车和结帐中没有价格

> ID：15322837
> 
> 赞同：0
> 
> 时间：2013-03-10T13:37:50.020
> 
> 标签：wordpress, shopping-cart, checkout, woocommerce

设法不在我的产品页面中显示价格。但是有谁知道如何从购物车和结帐中删除定价？

或者这一切都应该是自定义的 CSS 调整？我正在寻找一个钩子，但找不到它。这是一个订购东西的网站，网上没有定价。

希望有人可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:38:51.440

我去过那儿！您将需要检查网站上的每个价格元素，然后从主题的 php 代码中删除或将其 css 类变为不可见，如下所示：

```
span.price{display: none;} 
```

# python - 如何通过在 tkinter 列表框中双击来打开网络链接？

> ID：15322838
> 
> 赞同：2
> 
> 时间：2013-03-10T13:37:50.050
> 
> 标签：python, tkinter

我正在尝试通过双击打开列表框中显示的 Web 链接。

到目前为止，我所拥有的只是如果使用按钮打开来调用函数的代码，因为这是我之前使用的，但现在我只想能够双击它：

```
def internet():
    weblink = lb2.get(ACTIVE)
    webbrowser.open(weblink) 
```

我在 Windows 上使用 python 3.3

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T13:48:04.610

只需将列表框的双击事件绑定到一个回调函数中，然后在回调中检查列表框中选择了哪些项目。所以是这样的：

```
listbox.bind( "<Double-Button-1>" , internet )

def internet():
    weblink = lb2.get(ACTIVE)
    webbrowser.open(weblink) 
```

# php - 限制循环中的帖子

> ID：15322839
> 
> 赞同：0
> 
> 时间：2013-03-10T13:37:51.697
> 
> 标签：php, wordpress, loops, jquery-post

嗨，我有一个使用高级自定义字段的推荐循环。我需要循环一次只随机循环一个帖子我已经尝试过 query_posts 但它不起作用。

```
<?php
                query_posts( 'posts_per_page=1&orderby=rand' );
            if(get_field('testimonials', 'options')): ?>

                <?php while(has_sub_field('testimonials', 'options')): ?>

                    <ul>
                        <li class="title"><?php the_sub_field('name'); ?></li>
                        <li class="site"><a href="<?php the_sub_field('website'); ?>" target="_blank"><?php the_sub_field('website'); ?></a></li>
                        <li class="desc"><?php the_sub_field('message'); ?></li>
                    </ul>

                <?php endwhile; ?>

            <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:51:10.587

while循环有问题，你应该这样做：

```
<?php
    $posts = new WP_Query();
    $posts->query('posts_per_page=1&orderby=rand');

    if (have_posts()) : 
        while (posts->have_posts()) : $posts->the_post(); 
           if(get_field('testimonials', 'options')): //Ain't no sure what does this ?>
           <ul>
              <li class="title"><?php the_sub_field('title'); ?></li>
              <li class="site"><a href="<?php the_sub_field('website'); ?>" target="_blank">
              <?php the_sub_field('website'); ?></a></li>
              <li class="desc"><?php the_sub_field('message'); ?></li>
    </ul>
<?php
           endif;
       break;  // Exit loop after first post
   endwhile;
endif;
?> 
```

看看我是如何使用 while 循环的。我不明白做什么`get_field`，您应该将帖子 ID 作为第二个参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:54:19.183

试试这个循环出每页一个帖子：

```
 $args = array(
     'posts_per_page' => 1,
     'orderby' => 'rand'
    );
$the_query = new WP_Query( $args );

while ( $the_query->have_posts() ) :
    $the_query->the_post();
    echo '<ul>';
    echo '<li>' . get_the_title() . '</li>';
    echo '</ul>';
    echo '<li class="title">'.the_sub_field('name'). '</li>';
    echo '<li class="site"><a href="'.the_sub_field('website').'" target="_blank">'.the_sub_field('website').'</a></li>';
    echo '<li class="desc">'.the_sub_field('message').'</li>';
endwhile;

wp_reset_postdata(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:53:02.843

我在这里找到了解决方案:) [http://www.advancedcustomfields.com/resources/how-to/how-to-query-posts-filtered-by-custom-field-values/](http://www.advancedcustomfields.com/resources/how-to/how-to-query-posts-filtered-by-custom-field-values/)

```
<?php 

// args
$args = array(
    'numberposts' => -1,
    'post_type' => 'event',
    'meta_key' => 'location',
    'meta_value' => 'Melbourne'
);

// get results
$the_query = new WP_Query( $args );

// The Loop
?>
<?php if( $the_query->have_posts() ): ?>
    <ul>
    <?php while ( $the_query->have_posts() ) : $the_query->the_post(); ?>
        <li>
            <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
        </li>
    <?php endwhile; ?>
    </ul>
<?php endif; ?>

<?php wp_reset_query();  // Restore global post data stomped by the_post(). ?> 
```

# java - 3个线程按顺序打印备用值

> ID：15322847
> 
> 赞同：1
> 
> 时间：2013-03-10T13:39:07.630
> 
> 标签：java, multithreading

我正在尝试创建一个实现，其中多个线程打印序列的替代值。所以这里 thread1 将打印 1,4,7 thread2 将打印 2,5,8 thread3 将打印 3,6,9。我正在使用原子整数和模函数。

下面的实现工作正常，第一个线程打印 1,4,7 而第二个线程打印 2,5,8 和第三个打印 3,6,9 但问题是没有保持序列，即输出可能像 1,3,2 ,4,5,7,8,6,9 而我希望将序列保持为适当的线程 shld 打印这些值。一个条件是我不想使用同步。[仅用于学习目的]

```
import java.util.concurrent.atomic.AtomicInteger;

public class ThreeThreadsOrderedLockLess {

    AtomicInteger sharedOutput = new AtomicInteger(0);

    public static void main(String args[]) {

        ThreeThreadsOrderedLockLess t = new ThreeThreadsOrderedLockLess();

        ThreadTasks t1 = t.new ThreadTasks(0);
        ThreadTasks t2 = t.new ThreadTasks(1);
        ThreadTasks t3 = t.new ThreadTasks(2);

        Thread ts1 = new Thread(t1);
        Thread ts2 = new Thread(t2);
        Thread ts3 = new Thread(t3);
        ts1.start();
        ts2.start();
        ts3.start();

    }

    private class ThreadTasks implements Runnable {

        private final int threadPosition;

        public ThreadTasks(int threadPosition) {
            super();

            this.threadPosition = threadPosition;
        }

        @Override
        public void run() {

            while (sharedOutput.get() < 9) {

                if (sharedOutput.get() % 3 == this.threadPosition) {

                    System.out.println("Printing output for Thread: "
                            + this.threadPosition + "  "
                            + sharedOutput.incrementAndGet());
                }
            }

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:43:31.070

您应该先打印，然后增加：

```
int value = sharedOutput.get() + 1;
System.out.println("Printing output for Thread: "
                        + this.threadPosition + "  "
                        + value);
sharedOutput.incrementAndGet(); 
```

也就是说，所有线程都忙于循环，这将导致 100% 的 CPU 使用率。您应该改为同步线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-22T19:38:10.160

下面的代码片段将按顺序打印数字，所有线程将在任务完成后正常终止。使用 AtomicInteger，它对于打印数字是线程安全的，并且可以将相同的逻辑应用于打印，直到具有任意数量的线程的任意数字。

```

    导入 java.util.concurrent.atomic.AtomicInteger；

    公共类 PrintNumSequence
    {
        公共静态无效主要（字符串 [] 参数）
        {
          AtomicInteger atomicInteger = new AtomicInteger(0);
          new NumPrinter(atomicInteger, 0).start();// thread0
          new NumPrinter(atomicInteger, 1).start();// thread1
          new NumPrinter(atomicInteger, 2).start();// thread2

        }
    }

    类 NumPrinter 扩展线程
    {

        私有 AtomicInteger atomicInteger;
        私有 int 线程数；

       公共NumPrinter（AtomicInteger atomicInteger，int threadNum）
       {
        this.atomicInteger = atomicInteger;
        this.threadNum = 线程数；
       }

       @覆盖
       公共无效运行（）
       {
        int num = atomicInteger.intValue();
        做
        {
            同步（atomicInteger）
            {
                数 = atomicInteger.intValue();
                // 如果数字是 9 则停止。
                如果（数字 > 9）
                {
                    atomicInteger.notifyAll();
                    休息;
                }
                // 3 是线程数
                if ((num % 3) == threadNum)
                {
                    System.out.println("线程-" + threadNum + " -->" + num);
                    num = atomicInteger.incrementAndGet();

                }
                atomicInteger.notifyAll();
                尝试
                {
                    atomicInteger.wait();
                }
                捕捉（InterruptedException e）
                {
                    e.printStackTrace();
                }
            }
         } 而（真）；
       }
     }

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:42:37.810

这是因为每个线程的时间片是由操作系统决定的。因此，线程 x 可能会增加共享编号，但在打印之前，时间片会传递给下一个线程 y，后者现在读取共享编号并在递增后打印它（假设线程 y 比线程 x 获得更多时间来增加和打印共享号码）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T13:51:17.177

使用Java 的**wait()、notify()、notifyall()**方法。
你也可以看看这些方法的[**教程**](http://www.java-samples.com/showtutorial.php?tutorialid=306)。

希望这将有助于解决您的问题。. .

这个例子的输出如下。

看跌：1
获得：1
看跌：2
获得：2
看跌：3
获得：3
看跌：4
获得：4
看跌：5
获得：5

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-11T08:45:29.817

这应该有效：

```
package com.sid;

import java.util.concurrent.atomic.AtomicInteger;

public class NumberSequence {

    private AtomicInteger sharedOutput = new AtomicInteger(0);
    private Object object = new Object();

    public static void main(String args[]) {

        NumberSequence t = new NumberSequence();

        ThreadTasks t1 = t.new ThreadTasks(0);
        ThreadTasks t2 = t.new ThreadTasks(1);
        ThreadTasks t3 = t.new ThreadTasks(2);

        Thread ts1 = new Thread(t1);
        Thread ts2 = new Thread(t2);
        Thread ts3 = new Thread(t3);

        ts1.start();
        ts2.start();
        ts3.start();

    }

    private class ThreadTasks implements Runnable {

        private final int threadPosition;

        public ThreadTasks(int threadPosition) {
            super();

            this.threadPosition = threadPosition;
        }

        @Override
        public void run() {

            while (sharedOutput.get() < 10) {

                synchronized (object) {

                    if (sharedOutput.get() % 3 == this.threadPosition) {

                        if(sharedOutput.get() < 10)
                        System.out.println("Printing output for Thread: "
                                + this.threadPosition + "  "
                                + sharedOutput.incrementAndGet());
                    }
                }
            }

        }
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-21T12:37:10.767

适当的同步将帮助您获得明确的答案。我已经改进了实现，你应该解决你的问题。

```
 int threadId;
    int moduluos;
    int numOfThreads;

    public ThreadTasks(int id, int nubOfThreads) {
        threadId = id;
        this.numOfThreads = nubOfThreads;
        moduluos = threadId%numOfThreads;
    }

    public void run() {
        print();
    }

    private void print() {
        try {
            while (true) {
                synchronized (monitor) {
                    if (number.get() % numOfThreads != moduluos) {
                        monitor.wait();
                    } else {
                        System.out.println("ThreadId [" + threadId
                                + "] printing -->"
                                + number.getAndIncrement());
                        monitor.notifyAll();
                    }
                }
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-24T09:18:58.970

```
 package test.mk.thread;
import java.util.concurrent.atomic.AtomicInteger;

public class MkThread2 {
    int nextThreadToRun = 1;
    int[] arr = {1,2,3,4,5,6,7,8,9,10,11};
    AtomicInteger nextArrayIndex = new AtomicInteger(0);
    boolean token = true;

    public static void main(String[] args) {
        MkThread2 mkThread = new MkThread2();
        Thread t1 = new Thread(new Worker2(1, mkThread));
        Thread t2 =  new Thread(new Worker2(2, mkThread));
        Thread t3 =  new Thread(new Worker2(3, mkThread));
        t1.start();
        t2.start();
        t3.start();
    }
}

class Worker2 implements Runnable{
    volatile int threadNo;
    private MkThread2 mkThread;
    private String threadName;

    Worker2(int threadNo, MkThread2 mkThread){
        this.threadNo = threadNo;
        this.mkThread = mkThread;
        this.threadName = "Thread:"+threadNo ;
    }

    public void run(){
        try{
            synchronized (mkThread) {
                while(mkThread.token){
                    while(threadNo != mkThread.nextThreadToRun){
                        mkThread.wait();
                    }
                    if(mkThread.token){//double checking
                        System.out.print(threadName+ "->" + mkThread.arr[mkThread.nextArrayIndex.get()]);
                        if(threadNo == 3) System.out.println();
                        mkThread.nextThreadToRun = getNextThread(threadNo);
                        if(mkThread.nextArrayIndex.get() == mkThread.arr.length-1){
                            mkThread.token = false;
                        }
                        mkThread.nextArrayIndex.incrementAndGet();
                    }
                    mkThread.notifyAll();

                }
            }
        }
        catch(Exception e){
            e.printStackTrace();
        }
    }

    private int getNextThread(int threadNo){
        int result = -1;
        switch (threadNo) {
        case (1):
            result = 2;
            break;
        case (2):
            result = 3;
            break;
        case (3):
            result = 1;
            break;
        }
        return result;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-06T07:05:29.253

```
public class PrintThreadsInSerial {
    public static void main(String[] args) {
    Thread t = new Thread(new Job());
    t.start();
    }
}

class Job implements Runnable {
    @Override
    public void run() {
     while (true) {
        for (int i = 1; i <= 3; i++) {
         System.out.println(i);
        }
     }
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-03T11:09:09.867

您可以使用以下代码使用多个线程打印序列号 -

```
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.BlockingQueue;

public class ThreadCall extends Thread {

    private BlockingQueue<Integer> bq = new ArrayBlockingQueue<Integer>(10);
    private ThreadCall next;

    public void setNext(ThreadCall t) {
        this.next = t;
    }

    public void addElBQ(int a) {
        this.bq.add(a);
    }

    public ThreadCall(String name) {
        this.setName(name);
    }

    @Override
    public void run() {
        int x = 0;
        while(true) {
            try {
                x = 0;
                x = bq.take();
                if (x!=0) {
                    System.out.println(Thread.currentThread().getName() + " =>" + x);
                    if (x >= 100) System.exit(0); // Need to stop all running threads
                    next.addElBQ(x+1);
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    public static void main(String[] args) {
        int THREAD_COUNT = 10;
        List<ThreadCall> listThread = new ArrayList<>();

        for (int i=1; i<=THREAD_COUNT; i++) {
            listThread.add(new ThreadCall("Thread " + i));
        }

        for (int i = 0; i < listThread.size(); i++) {
            if (i == listThread.size()-1) {
                listThread.get(i).setNext(listThread.get(0));
            }
            else listThread.get(i).setNext(listThread.get(i+1));
        }

        listThread.get(0).addElBQ(1);

        for (int i = 0; i < listThread.size(); i++) {
            listThread.get(i).start();
        }
    }
} 
```

希望这能解决您的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-08T19:15:41.657

我正在使用 5 个线程将代码打印 1-100。可以使用任意数量的线程以循环方式打印输出。

基本概念是锁定一个对象并通知另一个对象执行打印值。

```
public class PrintOneToHundredUsing5Threads {

    public static void main(String[] args) {
        List<Object> objList = new ArrayList<>();
        for (int i = 0; i < 5; i++) {
            objList.add(new Object());
        }
        for (int i = 0; i < 5; i++) {
            Thread t = new Thread(new PrintThread(objList.get(i), objList.get((i + 1) % 5)));
            t.setName("Thread" + i);
            t.start();
        }
    }

}

class PrintThread implements Runnable {
    Object current;
    Object next;
    volatile static int i = 1;

    PrintThread(Object cur, Object next) {
        this.current = cur;
        this.next = next;
    }

    @Override
    public void run() {
        for (; i <= 100;) {
            synchronized (current) {
                synchronized (next) {
                    next.notify();
                    System.out.println(Thread.currentThread().getName() + " Value : " + i++);
                }
                try {
                    current.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

            }
        }
    }

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-08T15:21:05.003

```
package threeThread;

class Task implements Runnable {

  String message;
  ThreeThread lock;
  int i = 0;
  int p;

  public Task(String text, ThreeThread obj, int p) {
    message = text;
    this.lock = obj;
    this.p = p;
  }

  @Override
  public void run() {

    while(true) {
        synchronized (lock) {

            while(!((lock.status % 3) == 0) && p == 1){
                try {
                    lock.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }

            while(!((lock.status % 3) == 1) && p == 2){
                try {
                    lock.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }

            while(!((lock.status % 3) == 2) && p == 3){
                try {
                    lock.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            System.out.println("thread: " + p + " : " + message);
            lock.status++;
            lock.notifyAll();
        }
    }
  }
}

public class ThreeThread {

  volatile int status = 0;
  public static void main(String[] args) {

    ThreeThread lock = new ThreeThread();
    Thread t1 = new Thread(new Task("Hello", lock,1));
    Thread t2 = new Thread(new Task("Good", lock,2));
    Thread t3 = new Thread(new Task("Morning", lock,3));
    t1.start();
    t2.start();
    t3.start();
  }

} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-18T08:31:27.333

ThreadSynchronization 类可用于打印“n”号之间的数字。线程的顺序。逻辑是在每个连续线程之间创建一个公共对象，并使用“等待”、“通知”来按顺序打印数字。注意：最后一个线程将与第一个线程共享一个对象。

您可以在运行程序之前更改“maxThreads”值以增加或减少程序中的线程数。

```
import java.util.ArrayList;
import java.util.List;

public class ThreadSynchronization {

    public static int i = 1;
    public static final int maxThreads = 10;

    public static void main(String[] args) {
        List<Object> list = new ArrayList<>();
        for (int i = 0; i < maxThreads; i++) {
            list.add(new Object());
        }
        Object currObject = list.get(maxThreads - 1);
        for (int i = 0; i < maxThreads; i++) {
            Object nextObject = list.get(i);
            RunnableClass1 a = new RunnableClass1(currObject, nextObject, i == 0 ? true : false);
            Thread th = new Thread(a);
            th.setName("Thread - " + (i + 1));
            th.start();
            currObject = list.get(i);
        }
    }

}

class RunnableClass implements Runnable {

    private Object currObject;
    private Object nextObject;
    private boolean firstThread;

    public RunnableClass(Object currObject, Object nextObject, boolean first) {
        this.currObject = currObject;
        this.nextObject = nextObject;
        this.firstThread = first;
    }

    @Override
    public void run() {
        int i = 0;
        try {
            if (firstThread) {
                Thread.sleep(5000);
                firstThread = false;
                System.out.println(Thread.currentThread().getName() + " - " + ThreadSynchronization.i++);
                synchronized (nextObject) {
                    nextObject.notify();
                }
            }
            while (i++ < Integer.MAX_VALUE) {
                synchronized (currObject) {
                    currObject.wait();
                }
                System.out.println(Thread.currentThread().getName() + " - " + ThreadSynchronization.i++);
                Thread.sleep(1000);
                synchronized (nextObject) {
                    nextObject.notify();
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-10-06T06:46:07.293

这可以使用阻塞队列更好地实现。定义一个持有阻塞队列的工作者。工作人员在队列中等待，直到它收到一个数字。它打印它收到的数字，增加它并将它传递给链中的下一个工人。请参阅[此处](http://wilddiary.com/printing-numbers-in-sequence-from-alternating-threads/)以获取完整的解决方案。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-09-21T08:29:09.670

```
import java.util.concurrent.atomic.AtomicInteger; 
 public class Print123456789 {

public static void main(String[] args) {
    print p1 = new print(0);
    print p2 = new print(1);
    print p3 = new print(2);

    Thread t1 = new Thread(p1);
    Thread t2 = new Thread(p2);
    Thread t3 = new Thread(p3);

    t1.start();
    t2.start();t3.start();

}

}

class print implements Runnable {
private int threadNumber;
private static AtomicInteger atomicInteger = new AtomicInteger(0);
public print(int threadNumber) {
    super();
    this.threadNumber = threadNumber;
}

public void run(){
    try{
    while(atomicInteger.get() < 10){
        synchronized (atomicInteger) {

            if((atomicInteger.get()%3) == this.threadNumber){
                System.out.println(atomicInteger.getAndIncrement() + " Thread :" + this.threadNumber );
                atomicInteger.notifyAll();
                }
            else
                atomicInteger.wait();
        }
    }
    }catch(InterruptedException e)
    {
        e.printStackTrace();
    }
}

} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-10-27T06:47:13.780

```
public class PrintSeqNumUsingAltThreads {

    public static void main(String[] args) {
        AtomicInteger counter = new AtomicInteger(0);
        int numThreads = 3;

        Thread t1 = new Thread(new SeqNumPrinter(counter, 0, numThreads));
        Thread t2 = new Thread(new SeqNumPrinter(counter, 1, numThreads));
        Thread t3 = new Thread(new SeqNumPrinter(counter, 2, numThreads));

        t1.currentThread().setName("T1");
        t2.currentThread().setName("T2");
        t3.currentThread().setName("T3");

        t1.start();
        t2.start();
        t3.start();
    }
}

public class SeqNumPrinter implements Runnable {

    AtomicInteger atmCounter;
    Integer threadPosition;
    Integer numThreads;

    public SeqNumPrinter(AtomicInteger counter, int position, int numThreads) {
        this.atmCounter = counter;
        this.threadPosition = position;
        this.numThreads = numThreads;
    }

    @Override
    public void run() {
        while (atmCounter.get() < 10) {
            if (atmCounter.get() % numThreads == threadPosition) {
                System.out.println("Printing value : " + atmCounter.getAndIncrement() + ", by thread : " + 
                        Thread.currentThread().getName());
            }
        }
    }
} 
```

输出 ：

> **打印值：0，按线程：Thread-0
> 打印值：1，按线程：Thread-1
> 打印值：3，按线程：Thread-0
> 打印值：2，按线程：Thread-2
> 打印值：4，按线程：Thread-1
> 打印值：6，按线程：Thread-0
> 打印值：5，按线程：Thread-2
> 打印值：7，按线程：Thread-1
> 打印值：9，按线程：Thread-0
> 打印值：8，按线程：Thread-2**

# ruby-on-rails - 如果我写“：”冒号字符，则错误轮胎弹性搜索

> ID：15322851
> 
> 赞同：0
> 
> 时间：2013-03-10T13:39:35.410
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, elasticsearch, tire

这是我的轮胎设置：

```
def self.search(params)
    tire.search(load: true, page: params[:page], per_page: 9) do 
      query do
        boolean do
          must { string params[:query], default_operator: "AND" } if params[:query].present?
          must { range :published, lte: Time.zone.now }
          must { term :post_type, params[:post_type] } if params[:post_type].present? 
        end
      end
      sort { by :created_at, "desc" } if params[:query].blank?
      facet "posttypes" do
        terms :post_type
      end
    end
  end   

    settings :analysis => {
      :filter  => {
        :ngram_filter => {
          :type => "nGram",
          :min_gram => 2,
          :max_gram => 12
        }
      },
      :analyzer => {
        :index_ngram_analyzer => {
          :type  => "custom",
          :tokenizer  => "standard",
          :filter  => ["lowercase", "ngram_filter"]
        },
        :search_ngram_analyzer => {
          :type  => "custom",
          :tokenizer  => "standard",
          :filter  => ["standard", "lowercase", "ngram_filter"]
        }
      }
    } do
    mapping do
      indexes :_id, index: :not_analyzed
      indexes :tags, :analyzer => 'keyword'
      indexes :published, type: 'date'
      indexes :created_at, type: 'date'
      [:title, :description, :post_type].each do |attribute|
        indexes attribute, :type => 'string', :index_analyzer => 'index_ngram_analyzer', :search_analyzer => 'search_ngram_analyzer'
      end
    end
  end

  def to_indexed_json
    {
      _id: _id,
      title: title,
      description: description,
      tags: tags,
      post_type: post_type,
      published: published,
      created_at: created_at
    }.to_json
  end 
```

如果我只写一个冒号**：**我得到这个错误：

```
500 : {"error":"SearchPhaseExecutionException[Failed to execute phase [query], total failure; shardFailures {[r7kpljHrRbOPzjngca91Uw][posts][3]: SearchParseException[[posts][3]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\"query\":{\"query_string\":{\"query\":\":\"}},\"filter\":{\"range\":{\"published\":{\"lte\":\"2013-03-09T12:51:43Z\"}}},\"size\":9}]]]; nested: QueryParsingException[[posts] Failed to parse query [:]]; nested: ParseException[Cannot parse ':': Encountered \" \":\" \": \"\" at line 1, column 0.\nWas expecting one of:\n    <NOT> ...\n    \"+\" ...\n    \"-\" ...\n    <BAREOPER> ...\n    \"(\" ...\n    \"*\" ...\n    <QUOTED> ...\n    <TERM> ...\n    <PREFIXTERM> ...\n    <WILDTERM> ...\n    \"[\" ...\n    \"{\" ...\n    <NUMBER> ...\n    <TERM> ...\n    \"*\" ...\n    ]; nested: ParseException[Encountered \" \":\" \": \"\" at line 1, column 0.\nWas expecting one of:\n    <NOT> ...\n    \"+\" ...\n    \"-\" ...\n    <BAREOPER> ...\n    \"(\" ...\n    \"*\" ...\n    <QUOTED> ...\n    <TERM> ...\n    <PREFIXTERM> ...\n    <WILDTERM> ...\n    \"[\" ...\n    \"{\" ...\n    <NUMBER> ...\n    <TERM> ...\n    \"*\" ...\n    ]; }{[r7kpljHrRbOPzjngca91Uw][posts][2]: SearchParseException[[posts][2]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\"query\":{\"query_string\":{\"query\":\":\"}},\"filter\":{\"range\":{\"published\":{\"lte\":\"2013-03-09T12:51:43Z\"}}},\"size\":9}]]]; nested: QueryParsingException[[posts] Failed to parse query [:]]; nested: ParseException[Cannot parse ':': Encountered \" \":\" \": \"\" at line 1, column 0.\nWas expecting one of:\n    <NOT> ...\n    \"+\" ...\n    \"-\" ...\n    <BAREOPER> ...\n    \"(\" ...\n    \"*\" ...\n    <QUOTED> ...\n    <TERM> ...\n    <PREFIXTERM> ...\n    <WILDTERM> ...\n    \"[\" ...\n    \"{\" ...\n    <NUMBER> ...\n    <TERM> ...\n    \"*\" ...\n    ]; nested: ParseException[Encountered \" \":\" \": \"\" at line 1, column 0.\nWas expecting one of:\n    <NOT> ...\n    \"+\" ...\n    \"-\" ...\n    <BAREOPER> ...\n    \"(\" ...\n    \"*\" ...\n    <QUOTED> ...\n    <TERM> ...\n    <PREFIXTERM> ...\n    <WILDTERM> ...\n    \"[\" ...\n    \"{\" ...\n    <NUMBER> ...\n    <TERM> ...\n    \"*\" ...\n    ]; }{[r7kpljHrRbOPzjngca91Uw][posts][4]: SearchParseException[[posts][4]: from[-1],size[-1]: Parse Failure [Failed to parse source [{\"query\":{\"query_string\":{\"query\":\":\"}},\"filter\":{\"range\":{\"published\":{\"lte\":\"2013-03-09T12:51:43Z\"}}},\"size\":9}]]]; nested: QueryParsingException[[posts] Failed to parse query [:]]; nested: ParseException[Cannot parse ':': Encountered \" \":\" \": \"\" at line 1, column 0.\nWas expecting one of:\n    <NOT> ...\n    \"+\" ...\n    \"-\" ...\n    <BAREOPER> ...\n    \"(\" ...\n    \"*\" ...\n    <QUOTED> ...\n    <TERM> ...\n    <PREFIXTERM> ...\n    <WILDTERM> ...\n    \"[\" ...\n    \"{\" ...\n    <NUMBER> ...\n    <TERM> ...\n    \"*\" ...\n    ]; nested: ParseException[Encountered \" \":\" \": \"\" at line 1, column 0.\nWas expecting one of:\n    <NOT> ...\n    \"+\" ...\n    \"-\" ...\n    <BAREOPER> ...\n    \"(\" ...\n    \"*\" ...\n    <QUOTED> ...\n    <TERM> ...\n    <PREFIXTERM> ...\n    <WILDTERM> ...\n    \"[\" ...\n    \"{\" ...\n    <NUMBER> ...\n    <TERM> ...\n    \"*\" ...\n    ]; }]","status":500} 
```

**如何解决这个问题？**

**我正在使用带有 mongoid 3.xx 的 mongodb**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:56:13.410

lucene 查询中的特殊字符需要[转义](http://lucene.apache.org/core/old_versioned_docs/versions/3_4_0/queryparsersyntax.html#Escaping%20Special%20Characters)。

尝试查询`\:`而不是`:`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T17:50:19.790

这些[特殊字符](http://lucene.apache.org/core/2_9_4/queryparsersyntax.html#Escaping%20Special%20Characters)需要转义：

```
+ - && || ! ( ) { } [ ] ^ " ~ * ? : \ 
```

所以你需要`\:`而不是`:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:41:16.973

尝试将其转换为等效的十六进制以转义字符

# c - C：在linux中播放音频循环

> ID：15322856
> 
> 赞同：1
> 
> 时间：2013-03-10T13:40:21.140
> 
> 标签：c, linux, audio

我有一个缓冲区，`int16_t`里面有一些音频 PCM 数据。我需要从 a 点到 b 点重复播放缓冲区，以便您听到无限的音频循环。

我发现播放声音最简单的方法是使用 libao，但我同意任何其他方法。这是我的代码：

```
int play(int a, int b, char *buf);

int main()
{
        int16_t *buf;  /*my buffer*/
        int a, b;
        /* a and b are the indexes of the buffer; 
         * because libao wants a buffer of char, 
         * and buf points to of int16_t, I'll pass 
         * the value a and b multiplied with 2.
         */ 

        [···]

        play(2*a, 2*b, (char *) buf);
        return 0;
}
int play(int a, int b, char *buf)
{  
        ao_device *device;  
        ao_sample_format format;  
        int default_driver;   
        /* -- Initialize -- */
        fprintf(stderr, "libao example program\n");  
        ao_initialize();  
        /* -- Setup for default driver -- */  
        default_driver = ao_default_driver_id();  
        memset(&format, 0, sizeof(format));  
        format.bits = 16;  
        format.channels = 1;  
        format.rate = 44100;  
        format.byte_format = AO_FMT_LITTLE;
        /* -- Open driver -- */  
        device = ao_open_live(default_driver, &format, NULL /* no options */);  
        if (device == NULL) {  
            fprintf(stderr, "Error opening device.\n");  
            exit(1);  
        }  
        /* -- Play the infinite loop -- */
        for (;;){
            ao_play(device, buf+a, b-a+1);
            /*buf+a is the start of the loop, b-a+1 the number of byte to play--edited*/
        }
        /* -- Close and shutdown -- */  
        ao_close(device);  
        ao_shutdown();  
    return 0;  
} 
```

问题是我在循环结束和开始之间听到一段时间的沉默。因为我正在使用此代码来测试其他代码，所以我绝对需要知道它是否可能是由于错误使用[libao](https://www.xiph.org/ao/doc/)引起的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:40:49.057

是的，这绝对可能是由于使用不当引起的。请从 ao_play() 调用中删除 +1，如下所示：

```
ao_play(device, buf+a, b-a); 
```

# ios - 我将如何更改此静态数组以从 xCode 中的此 plist 中提取？

> ID：15322857
> 
> 赞同：-1
> 
> 时间：2013-03-10T13:40:29.107
> 
> 标签：ios, objective-c, arrays, plist

我有一个在线 plist（格式为[http://example.com/people.plist](http://example.com/people.plist)）。我怎么能让 UITable 视图从 plist 而不是静态数组中提取名称？

```
<plist version="1.0">
<array>
<dict>
    <key>fname</key>
    <string>Scott</string>
    <key>sname</key>
    <string>Sherwood</string>
    <key>age</key>
    <string>30</string>
</dict>
<dict>
    <key>fname</key>
    <string>Janet</string>
    <key>sname</key>
    <string>Smith</string>
    <key>age</key>
    <string>26</string>
</dict>
<dict>
    <key>fname</key>
    <string>John</string>
    <key>sname</key>
    <string>Blogs</string>
    <key>age</key>
    <string>20</string>
</dict>
</array>
</plist> 
```

这是我的**viewDidLoad**

```
- (void)viewDidLoad
{
[super viewDidLoad];

Person *p1 = [[Person alloc] initWithFname:@"Scott" sname:@"Sherwood"  age:30];
Person *p2 = [[Person alloc] initWithFname:@"Janet" sname:@"Smith"  age:26];
Person *p3 = [[Person alloc] initWithFname:@"John" sname:@"Blogs"  age:20];

self.people = [NSArray arrayWithObjects:p1,p2,p3, nil];
} 
```

这是我的**tableView cellForRowAtIndexPath**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

// Configure the cell...
Person *p1 = [self.people objectAtIndex:indexPath.row];

cell.textLabel.text = p1.fname;
return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:57:47.530

您可以为您的`Person`类创建一个自定义初始化程序，并几乎直接从 plist 填充数组：

```
@implementation Person

- (id)initWithDictionary:(NSDictionary *)dict
{
    NSString *fname = [dict objectForKey:@"fname"];
    NSString *sname = [dict objectForKey:@"sname"];
    NSString *age =   [dict objectForKey:@"age"  ];
    return self = [self initWithFname:fname sname:sname age:[age intValue]];
}

@end 
```

然后做这样的事情：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"people" ofType:@"plist"];
NSArray *plist = [NSArray arrayWithContentsOfFile:path];

NSMutableArray *people = [NSMutableArray array];
for (NSDictionary *item in plist) {
    Person *p = [[Person alloc] initWithDictionary:item];
    [people addObject:p];
    [p release];
} 
```

然后只是`people`用作数据源。

一个边际概念改进：不是将年龄存储为`<string>`，而是将其存储为`<integer>`。在这种情况下，您将拥有`NSNumber`对象（您也可以`intValue`在第一步中调用该方法）。

# intellij-idea - Intelli Idea 使用 - 如何更快地启动和更少的内存占用？

> ID：15322858
> 
> 赞同：0
> 
> 时间：2013-03-10T13:40:32.577
> 
> 标签：intellij-idea

我正在尝试从 eclipse 转移到 intellij 的想法。我正在为 intellij idea 尝试各种开发插件案例 -`android, clojure, scala, python, javascript, java, gwt, dart, jboss, spring`等等，因为我热衷于学习编程的不同方面*。

随着安装更多插件（如 intellij wiki 所述），启动时间会增加。在使用 intellij 跨不同编程环境进行学习时，如何更快地启动和减少内存占用？

我试图找出开发人员在使用多种语言环境时如何使用 intellij idea。

**选项 1)**我们是否有不同的 intellij 安装来处理不同的语言环境，即在上述场景中，有 5-6 个不同的 intellij 安装，只安装了适当的插件。（**愚蠢的方式**）

**选项 2）** intellij idea 是否提供一种机制来在单个安装中关闭不同的插件？（**更聪明的方式**）

# orchardcms - OrchardCMS 形状跟踪未显示自定义主题

> ID：15322861
> 
> 赞同：1
> 
> 时间：2013-03-10T13:40:40.543
> 
> 标签：orchardcms, orchardcms-1.6

我正在为我的新果园网站创建自定义主题。形状跟踪模块非常有用，但由于某种原因，它没有在我的自定义主题中呈现。我不确定我可能会错过什么才能让它出现。

当我将我的网站设置为使用主题 TheThemeMachine 时，它​​在页面底部显示得很好。当我比较来自 TheThemeMacing 的渲染源和我的自定义主题时，我在头部看到了形状跟踪模块的所有 CSS 和 JS 引用。但是，当我滚动到自定义主题源的底部时，我看不到所有带有 JSON 对象的脚本博客。我只看到很多空脚本“shape-tracing-wrapper”块。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:38:57.577

您在 document.cshtml 中缺少一个名为 Tail 的区域。将您的主题版本与核心/形状/视图中的版本进行比较。

# java - 通过 HTTP 重定向发送密码明文到 HTTPS

> ID：15322865
> 
> 赞同：0
> 
> 时间：2013-03-10T13:41:16.947
> 
> 标签：java, security, https, playframework, passwords

这是[我之前](https://stackoverflow.com/questions/15315231/security-with-play-from-outside-application)关于如何保护从移动应用程序到托管在 Heroku 上的 Play 应用程序的 API 调用的问题的后续内容。

最初建议我实现 OAuth，但它似乎比我需要的更复杂，我考虑在每次调用时通过 HTTPS 发送密码明文并将其存储在设备上。

1.  是否可以只组成一个我存储在应用程序中的长随机字符串，并在 API 端也需要它？这似乎会阻止其他人使用 API，这很好。
2.  如果是这样，仅通过 HTTPS 发送该令牌以及用户的用户名和密码是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:41:16.947

在写这篇文章时，我遇到了[这个](https://stackoverflow.com/a/9525278/809278)答案，它看起来像是一个可以接受的解决方案：

*   每次通话都使用 HTTPS
*   第一次调用后，发送回一个 authToken
*   每隔一段时间在设备和服务器上使令牌过期

# php - 为我的输入表单分配一个初始值，并始终产生 Null 输出

> ID：15322871
> 
> 赞同：0
> 
> 时间：2013-03-10T13:41:30.983
> 
> 标签：php, html, forms, input

所以我尝试在我的网站中创建一些订单，（ps我的网站是租车网站），我的方法是他们输入他们的详细信息，然后他们进入正在审查他们的订单的评论页面，然后提交它以便详细信息将进入我想要的电子邮件。但不知何故，在评论页面上，我为我创建的表单设置了初始值，其中包含之前在表单中估算的详细信息（成功）。当我点击提交时，已发送到我的电子邮件 PHP 联系表单中的详细信息始终设置为空，然而，我的`isset`函数会发现它错误并且不会执行该函数。这是完整的代码

评论页面 [评论页面](http://tny.cz/0b40c10c)

邮件发送 php 功能页面 [Mail-Sender 表单结果页面](http://tny.cz/cd6ea8a8)

很抱歉没有在这里使用代码示例代码，因为我的代码很混乱，因为它包含很多`{`和`}`符号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T13:43:33.150

浏览器不会发布来自禁用输入的任何内容。您需要使用隐藏的输入并以文本形式显示数据以供用户查看。

例如，将其更改为：

```
<tr>
 <td valign="middle" width="200px" height="40px">
  <label for="name">Name</label>
 </td>
 <td valign="middle" width="700px">
  <?= echo $name; ?>
  <input name="name" id="name"type="hidden" class="inputstyle" value="<?= $name; ?>">
 </td>
</tr> 
```

# javascript - 完全展开这个 CSS inline-block div 扫描线

> ID：15322884
> 
> 赞同：5
> 
> 时间：2013-03-10T13:43:00.820
> 
> 标签：javascript, jquery, css, scanline

我希望这种扫描线效果能够正常工作。从左到右*显示*文本。仿佛阴极射线正在将其燃烧成屏幕上的荧光粉。

这个想法是滑过具有透明尖端的黑色行。[这是一个 80% 的工作演示。](http://jsbin.com/uteyik/2/edit) ![在此处输入图像描述](../Images/ac2ae47690c505813f6cac39e3b77f0d.png) 每行中最右边的黑色`.mask`div 不会展开。它必须。

我试图将`.mask`带有黑色背景的最右边的 div 保留为 inline-block 并使其全宽。我有点理解为什么请求不起作用（宽度：100% 将其他内联块推到下一行，这是正确的），但必须有一种方法可以在不破坏 javascript 宽度的情况下获得这个完整的右侧.

```
.row {
        font-family:'Courier New',Courier,monospace;
        font-size:16px;
        display:block;
        height:auto;
        width:100%;
        min-width:20%;
        position:relative;
        margin-right:0px;
}

.mask {
        display:inline-block;
        width:auto; /* 100% does not work */
        background:black;
        white-space:pre;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:47:01.600

这在 jsbin 上不起作用，因为它使用绝对定位（除非您查看全屏演示）.. 但无论如何我都提供了它供您将其复制/粘贴到您自己的浏览器[http://jsbin.com/uteyik/12 /](http://jsbin.com/uteyik/12/) .. 以下是变更亮点：

**CSS：**

```
.row {
 ..
  position:absolute;   /* changed to absolute */

}
.mask {
  ..
  width:100%;  /* changed to 100% */
  position:absolute;   /*changed to absolute */
} 
```

和**javascript：**

```
jQuery(document).ready(function() {
    function fill_box(rows) {
        var rowHeight = getSampleRowHeight();
        var thisRowHeight = 0;
        for(var i = 0; i < rows; i += 1) {
            $('.box').append('<div class="row" style="top: '+thisRowHeight+'"><div class="scan_cursor i1"> </div><div class="scan_cursor i2"> </div><div class="scan_cursor i3"> </div><div class="mask"> </div></div>');       
            thisRowHeight +=rowHeight;
        }   
    }

    fill_box(30);

    function tag_animate(el) {
        // animate the mask
        el.animate( {
            'margin-left' : '100%'
            }, 
            {
                complete : function () {        
                    tag_animate(el.parent().next().find('.mask'));
                }
            } 
        );
        // animate the stripes
        el.siblings().animate( {
            'margin-left': '100%'
            }, 
            {
               complete : function () {     
                   el.siblings().hide();
               }
            }
        );      
    }    

    tag_animate($('.box').find('.row').eq(0).find('.mask'));

    function getSampleRowHeight() {
        // get sample row height, append to dom to calculate
        $('.box').append('<div class="row" style="display: hidden"> <div class="scan_cursor i1"> </div></div>');
        var rowHeight = $('.row').height();
        $('.box').find('.row').remove();
        return rowHeight;
    }    
 }); 
```

**解释：**我首先创建一个虚拟行并计算它的高度。然后，我使用虚拟行高 x 行号创建具有`position: absolute`并从顶部定位它的行。**这个想法**是我想用绝对定位制作所有东西，这样当它是 100% 时，面具不会推动下面的条纹，而且行必须是绝对的，因为当我让它的内容消失时，我不想要行下面跳起来。

**奖金：**看到它以相反的方式工作（即文本消失）：http: [//jsbin.com/uteyik/9](http://jsbin.com/uteyik/9)这是我最初的（和不正确的）答案

# compilation - 在 F# 中编译代码引用的最新方法是什么

> ID：15322888
> 
> 赞同：7
> 
> 时间：2013-03-10T13:43:19.983
> 
> 标签：compilation, f#, quotations

我正在构建一个符号衍生引擎。例如

```
let f = <@ fun x:double -> x * x @>
let df = der f 
```

结果表达式将是

```
<@ 2 * x @> 
```

实际的方程可能是任意复杂的。

使用递归模式匹配和转换来生成导数并不太难，但最后我想在紧密的数值循环中使用生成的方程，就像我手写它们一样。这是数值计算代码，所以更快总是更好（如果可能的话）

我查看了 FSharpX 引用编译器，但它看起来像解释器而不是编译器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T16:25:06.013

I have not tested this, but the code that translates F# quotations to LINQ expressions (and compiles them) has now moved from F# PowerPack into the F# Core library, so I think that is the most up-to-date version:

```
open Microsoft.FSharp.Linq.RuntimeHelpers

LeafExpressionConverter.EvaluateQuotation <@ 1 + 2 @> 
```

and to use it for lambdas

```
let d=LeafExpressionConverter.EvaluateQuotation <@ fun y -> y+1.0 @> 
    :?> ( double -> double )

Console.WriteLine(d 10) 
```

outputs

```
11 
```

Note the cast at the end to convert the ''obj'' to a lambda of the correct type

# linux - 如何实现鼠标驱动 Linux USB 鼠标驱动？

> ID：15322892
> 
> 赞同：10
> 
> 时间：2013-03-10T13:43:57.323
> 
> 标签：linux, linux-kernel, linux-device-driver, device-driver

我需要使用外部设备控制计算机屏幕的鼠标指针。我只知道我必须为该设备编写设备驱动程序。这是一个USB设备。

谁能告诉我应该如何解决这个问题？

为此需要哪些模块和算法？

如果您能提供一些参考资料，我将不胜感激？

很抱歉这些琐碎的问题，但我是 Linux 设备驱动程序领域的新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T14:12:28.410

作为 Stark 先生的指导，这是编写模块之前必不可少的。至于usb鼠标驱动的问题，可以查看以下[链接](http://www.linux-mag.com/id/330/)。对于未知的 USB 设备，您可以参考此[链接。](http://matthias.vallentin.net/blog/2007/04/writing-a-linux-kernel-driver-for-an-unknown-usb-device/) USB鼠标驱动程序的更多链接：[link1](http://www.compsoc.man.ac.uk/~moz/kernelnewbies/documents/kdoc/mousedrivers/debugging.html) [link2](http://www.linux.it/~rubini/docs/input/input.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T13:51:28.727

阅读[Linux 设备驱动程序](http://lwn.net/Kernel/LDD3/)，它会告诉你你需要知道的一切。Linux 包含一个 USB 鼠标驱动程序（我现在正在使用），它应该是一个很好的参考。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-10T13:53:49.357

首先，看看[Linux USB](http://www.linux-usb.org/)会很有用。请参阅[编写 USB 设备驱动程序](https://www.kernel.org/doc/htmldocs/writing_usb_driver.html)。

# c# - 因为它有一个 DefiningQuery 而没有 元素存在于 元素

> ID：15322894
> 
> 赞同：62
> 
> 时间：2013-03-10T13:44:18.603
> 
> 标签：c#, .net, entity-framework

我在我的应用程序中使用 EF。

我尝试将新记录保存\插入到映射表中

并得到以下错误：

`Unable to update the EntitySet 'UsersLimitationToCountry' because it has a DefiningQuery and no <InsertFunction> element exists in the <ModificationFunctionMapping> element to support the current operation.`

我应该自己在 edmx 中定义它吗？如何？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-03-10T15:13:49.097

我的多对多映射表缺少 PK

补充，问题就解决了。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-03-26T00:31:32.217

同意接受的答案。只是提供它背后的原因......

当使用没有主键的表完成 EF 映射时，它被视为视图。由于视图是逻辑实体，它们不能被更新。

因此，要么将缺少的主键添加到您的表中，要么将它们视为一个视图，并且不要对它们执行任何更新操作。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-01-21T07:19:06.183

> 如果您的视图是可更新的，您可以简单地从 .edmx 的 StorageModel 部分内的视图的 EntitySet 定义中删除该元素，并且正常的更新处理将与任何其他表一样工作。

对我来说就是这种情况。简单地删除导致另一个错误。我按照这篇文章的步骤，除了最后一个。为了您的方便，我复制了我遵循的帖子中的 4 个步骤来解决问题，如下所示：

1.  右击 edmx 文件，选择打开方式，XML 编辑器
2.  在 edmx:StorageModels 元素中找到实体
3.  `DefiningQuery`完全 删除
4.  将 store:Schema="dbo" 重命名为 Schema="dbo" （否则代码会生成错误，说名称无效）

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-07-11T14:47:50.240

我在可更新视图上遇到了这个问题。发现[这篇文章](https://blogs.msdn.microsoft.com/alexj/2009/09/01/tip-34-how-to-work-with-updatable-views/)解决了我的问题。

因此，我的视图的基础表确实定义了主键，但 EF 不知道 PK 中的哪些列，因为实体是在视图上构建的。这里的诀窍是“说服”EF，您的视图可以更新为表格。步骤与上述答案中提到的几乎相同：

1.  右击 edmx 文件，选择打开方式，XML 编辑器
2.  在 edmx:StorageModels 元素中找到实体
3.  完全删除该`<DefiningQuery>`部分
4.  将 store:Schema="dbo" 重命名为 Schema="dbo"
5.  *更改`store:Type="Views"`为`store:Type="Tables"`*

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-02-02T11:02:40.177

My table didn't have primary key in sql table design. Added it and solved.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-12-24T12:27:13.797

1.  右击 edmx 文件，选择打开方式，XML 编辑器

2.  在 edmx:StorageModels 元素中找到实体

3.  完全删除 DefiningQuery

4.  将其重命名`store:Schema="dbo"`为`Schema="dbo"`（否则，代码将生成一个错误，说明名称无效）这些步骤对我有用

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-05-15T15:49:12.643

**重新检查您的表没有 PK ：** 只需添加主键，然后删除并重新添加表到 edmx 然后它应该可以工作

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-01-07T18:24:37.147

确保您的外键表没有多个列名与引用表中的列匹配；只有主键应该在您的参考表与参考表之间匹配。0..1 应该有可区分的列名，为您的列制定命名约定，以确保引用和引用表没有多个匹配的列名。由 ALMwConsult.net 提供

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-21T14:52:15.977

如果您没有处理表中的主键，那么在 MVC 中更新和插入记录数据库时肯定会出现此问题

**用户未处理 DbUpdate 异常**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-12T14:43:35.307

处理 db first mvc 应用程序。问题是我忘记为表定义主键。通过使用 alter 命令添加主键并更新 DAL(edmx) 解决

# java - jmf 无法识别网络摄像头

> ID：15322898
> 
> 赞同：0
> 
> 时间：2013-03-10T13:44:54.697
> 
> 标签：java, opencv, jmf

我使用 jmf jar 文件来运行我的网络摄像头。这是我的代码。运行此代码时它不显示我的网络摄像头？谁能给我一个解决方案？谢谢

```
CaptureDeviceInfo di = CaptureDeviceManager.getDevice("vfw:Microsoft WDM Image Capture (Win32):0";);
ml = di.getLocator(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:09:50.983

我的 JMF 应用程序也找不到任何设备。我通过使用以下代码解决了这个问题：

```
MediaLocator ml = new MediaLocator("vfw://0"); 
```

`vfw://0`网络摄像头的路径在哪里，你可以在 JMStudio 找到它。

# css - 在带有LESS的字符串中使用函数

> ID：15322900
> 
> 赞同：5
> 
> 时间：2013-03-10T13:44:57.857
> 
> 标签：css, less

我搜索了文档和 SO，但找不到我的查询的答案。将函数的结果包含在带有 LESS 的字符串中的正确方法是什么？

例如，我已经定义了一个变量，并且想将它变亮以获得一个盒子阴影。例如，这是我想做的：

```
.box-shadow(~"inset 0 1px 1px rgba(0,0,0,.075), 0 0 2px lighten(@green, 10%)"); 
```

显然那是行不通的。在不为 定义特定变量的情况下，实现此目的的正确方法是什么`lighten(@green, 10%)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T13:50:55.347

将它放在字符串之外应该可以工作。

```
@green: #0f0;
.box-shadow(@def) { box-shadow: @def; }

p {
  .box-shadow(~"inset 0 1px 1px rgba(0,0,0,.075), 0 0 2px" lighten(@green, 10%)) 
} 
```

编译为

```
p {
  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 2px #33ff33;
} 
```

# postgresql - 用于 Web 分析工作负载 (AWS RedShift) 的模板数据库架构

> ID：15322905
> 
> 赞同：4
> 
> 时间：2013-03-10T13:45:54.493
> 
> 标签：postgresql, database-design, analytics, data-warehouse, amazon-redshift

是否有任何现有的用于一般网络分析工作负载的架构模板，例如类似于 Google Analytcis，它可能至少有以下表格

1.  用户
2.  网站
3.  要求

由于我不想重新发明轮子，我正在寻找任何现有的定义良好的模式或良好的关系建模是否适合我的需要。

任何想法？

备注：我在 AWS RedShift 上运行，但我认为大多数面向列的数据库应该有类似的架构。

# php - 需要一些关于 PHP 循环的建议

> ID：15322906
> 
> 赞同：0
> 
> 时间：2013-03-10T13:46:01.880
> 
> 标签：php, html, database, loops

我需要创建一个从数据库获取数据的循环......并打印数据，`<li>`但每 5 个`li`需要在一个`ul`......

我该怎么做这个循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T13:57:36.743

你可以用`NoRewindIterator`和来做到这一点`LimitIterator`。只需将从表示结果集的数据库客户端库返回的迭代器包装到 中`NoRewindIterator`，然后您可以使用 5 次迭代，`LimitIterator`直到整个迭代器无效：

```
$it = new NoRewindIterator($result);

$it->getInnerIterator()->rewind(); # Rewind once

while ($it->valid())
{
    echo '<ul>';
    foreach (new LimitIterator($it, 0, 5) as $row)
    {
        echo '<li>', .... , '</li>' ;
    }
    echo '</ul>';
} 
```

*编辑：*添加了该`rewind()`操作，因为默认情况下某些不自动倒带的迭代器需要它，有关所有详细信息，请参阅我创建的参考问题：[*NoRewindIterator 何时倒带内部迭代器？*](https://stackoverflow.com/q/16682198/367456)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T15:00:48.687

为什么不使用`modulo`运算符？

```
$counter = 0;

echo '<ul>';

while ($row = fetchRow())
{
    $counter++;

    if ($counter % 5 == 0) echo '</ul><ul>';

    echo '<li>' . $row['field'] . '</li>';
}

echo '</ul>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T14:02:16.070

使用另一个计数器：

```
$counter=0;
echo '<ul>';
while($record_in_database=fetch_it_somehow){
  if($counter==5){
    $counter=0;
    echo '</ul><ul>'; // *
    }
  echo '<li>'.$record_in_database->retrieve_data_somehow().'</li>';
  ++$counter;
} // end while
echo '</ul>'; // you must close it as you've opened in * marked line 
```

# java - TextView 计时器秒数跳跃

> ID：15322909
> 
> 赞同：0
> 
> 时间：2013-03-10T13:46:06.127
> 
> 标签：java, android, eclipse

我有这个代码，它只是显示一个事件的倒计时时钟。关于最后几秒钟的跳跃数字，我遇到了一个问题，这与普通时钟不同。这是我正在使用的代码。有人可以就这个问题可能在哪里提供一些指导。亲切的问候。

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    new Timer().schedule(new TimerTask() {

        File sdcard = Environment.getExternalStorageDirectory();
        File cfgFile = new File(sdcard, "TimeTillParis/config.txt");

        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                public void run() {

                try {
                    InputStream is = new FileInputStream(cfgFile);
                    Properties prop = new Properties();
                    prop.load(is);

                    int mmY = Integer.parseInt(prop.getProperty("YEAR"));
                    int mmM = Integer.parseInt(prop.getProperty("MONTH"));
                    int mmD = Integer.parseInt(prop.getProperty("DAY"));
                    int mmH = Integer.parseInt(prop.getProperty("HOUR"));
                    int mmC = Integer.parseInt(prop.getProperty("MINUTE"));
                    int mmS = Integer.parseInt(prop.getProperty("SECOND"));

                    Calendar cal = Calendar.getInstance();
                    Date today = new Date(System.currentTimeMillis());

                    cal.set(Calendar.YEAR, mmY);
                    cal.set(Calendar.MONTH, mmM);
                    cal.set(Calendar.DAY_OF_MONTH, mmD);
                    cal.set(Calendar.HOUR_OF_DAY, mmH);
                    cal.set(Calendar.MINUTE, mmC);
                    cal.set(Calendar.SECOND, mmS);

                    long milliseconds = (cal.getTimeInMillis() - today.getTime());

                    String mD="", mH="", mM="", mS="", boxText="";

                    mD += (milliseconds / (1000*60*60*24));
                    mH += (milliseconds / (1000*60*60) % 24);
                    mM += (milliseconds / (1000*60) % 60);
                    mS += (milliseconds / 1000 % 60);

                    boxText += "Next visit to Paris in \n\n" +
                                mD + "d   " + 
                                mH + "h   " + 
                                mM + "m   " + 
                                mS + "s";

                    TextView textView = (TextView) findViewById(R.id.textView_date_display);
                    textView.setText(boxText);

                } catch (FileNotFoundException e) {
                    String cfgNotFound="";
                    cfgNotFound += "config.txt not found!";
                    TextView textView = (TextView) findViewById(R.id.textView_date_display);
                    textView.setText(cfgNotFound);
                    //e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                }
            });
        }
    }, 0, 100);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:07:46.867

我准备了完整的解决方案，如果您有任何问题，请告诉我：

```
public class MainActivity extends Activity {

    private static final int COUNTDOWN_INTERVAL = 1000;

    MyTimer timer;

    Calendar eventTime;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        File sdcard = Environment.getExternalStorageDirectory();
        File cfgFile = new File(sdcard, "TimeTillParis/config.txt");

        try {
            InputStream is = new FileInputStream(cfgFile);
            Properties prop = new Properties();
            prop.load(is);

            int mmY = Integer.parseInt(prop.getProperty("YEAR"));
            int mmM = Integer.parseInt(prop.getProperty("MONTH"));
            int mmD = Integer.parseInt(prop.getProperty("DAY"));
            int mmH = Integer.parseInt(prop.getProperty("HOUR"));
            int mmC = Integer.parseInt(prop.getProperty("MINUTE"));
            int mmS = Integer.parseInt(prop.getProperty("SECOND"));

            Calendar cal = Calendar.getInstance();

            cal.set(Calendar.YEAR, mmY);
            cal.set(Calendar.MONTH, mmM);
            cal.set(Calendar.DAY_OF_MONTH, mmD);
            cal.set(Calendar.HOUR_OF_DAY, mmH);
            cal.set(Calendar.MINUTE, mmC);
            cal.set(Calendar.SECOND, mmS);

            eventTime = cal;

        } catch (FileNotFoundException e) {
            String cfgNotFound="";
            cfgNotFound += "config.txt not found!";
            TextView textView = (TextView) findViewById(R.id.textView_date_display);
            textView.setText(cfgNotFound);
            //e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    @Override
    protected void onResume() {
        super.onResume();
        if(eventTime != null) {
            long millisInFuture = (eventTime.getTimeInMillis() - System.currentTimeMillis());
            timer = new MyTimer(this, millisInFuture, COUNTDOWN_INTERVAL);
            timer.start();
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        if(timer != null) {
            timer.cancel();
        }
    }

    private static class MyTimer extends CountDownTimer {

        TextView textView;

        public MyTimer(Activity actitivy, long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
            // findViewById is very expansive, so fined it only once
            textView = (TextView) actitivy.findViewById(R.id.textView_date_display);
        }

        @Override
        public void onFinish() {

        }

        @Override
        public void onTick(long millisUntilFinished) {
            SimpleDateFormat sdf = new SimpleDateFormat("'Next visit to Paris in \n\n'd'd   'h'h   'm'm   's's'");
            String boxText = sdf.format(new Date(millisUntilFinished));

            textView.setText(boxText);
        }

    }
} 
```

# html - 为单个下拉菜单的子菜单创建子菜单

> ID：15322910
> 
> 赞同：0
> 
> 时间：2013-03-10T13:46:08.010
> 
> 标签：html, css, drop-down-menu

我需要一个仅在悬停时显示的下拉菜单。从下拉菜单列表中，我需要将鼠标悬停在其中一个子项上的进一步列表。

关键字/父级是**主题。** 悬停时（在单词**Subjects**上）它必须显示：
Maths
English
Spanish
History
Science
Extra
Marks

将鼠标悬停在子 Extra 上时，它必须显示另外 3 个项目：
艺术
体育
社区

我已经尝试过下拉菜单和下拉菜单，但是即使我将鼠标悬停在父主题上，也会显示子菜单项（即艺术、体育和社区）。它们必须仅在悬停在 Extra 上时出现。

我受到 CSS 挑战，从在线下载的下拉脚本中尽力而为。但似乎没有人解决这种情况。

这是菜单的 HTML。不确定我是否做得对。

```
<nav id="subjectsNav">
    <ul>
        <li class="last"><a href="#" title="SUBJECTS">SUBJECTS</a>

            <ul>
                <li><a href="#" title="Maths">Maths</a>
                </li>
                <li><a href="#" title="English">English</a>
                </li>
                <li><a href="#" title="Spanish">Spanidsh</a>
                </li>
                <li><a href="#" title="History">History</a>
                </li>
                <li><a href="#" title="Science">Science</a>
                </li>
                <li><a href="#" title="EXTRA">EXTRA</a>
                </li>
                <ul id="extraNav">
                    <li><a href="#" title="Arts">Arts</a>
                    </li>
                    <li><a href="#" title="Sports">Sports</a>
                    </li>
                    <li><a href="#" title="Community">Community</a>
                    </li>
                </ul>
                <li><a href="#" title="Marks">Marks</a>
                </li>
            </ul>
        </li>
    </ul>
</nav> 
```

需要有关上述 HTML 和 CSS 的帮助。非常感谢您的回答。非常感谢您抽出宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T14:32:45.987

extraNav 子菜单必须在父列表项内：

```
<ul id="subjectsNav">
<li><a href="#" title="SUBJECTS">SUBJECTS</a>

    <ul>
        <li><a href="#" title="Maths">Maths</a>
        </li>
        <li><a href="#" title="English">English</a>
        </li>
        <li><a href="#" title="Spanish">Spanidsh</a>
        </li>
        <li><a href="#" title="History">History</a>
        </li>
        <li><a href="#" title="Science">Science</a>
        </li>
        <li><a href="#" title="EXTRA">EXTRA</a>
            <ul>
                <li><a href="#" title="Arts">Arts</a>
                </li>
                <li><a href="#" title="Sports">Sports</a>
                </li>
                <li><a href="#" title="Community">Community</a>
                </li>
            </ul>
        </li>
        <li><a href="#" title="Marks">Marks</a>
        </li>
    </ul>
</li>
</ul> 
```

CSS：

```
/* Main */
#subjectsNav {
    list-style: none;
}
#subjectsNav li {
    width: 70px;
    display: block;
    float: left;
    position: relative;
}
#subjectsNav li:hover > ul {
    display: block;
}
/* Sub-menu */
 #subjectsNav ul {
    list-style: none;
    left: 0;
    margin: 0;
    padding: 0;
    display: none;
    position: absolute;
    z-index: 99999;
}
#subjectsNav ul li {
    float: none;
    display: block;
}
#subjectsNav ul ul {
    top: 0;
    left: 70px;
} 
```

演示：http: [//jsfiddle.net/Bc2sv/](http://jsfiddle.net/Bc2sv/)

# javascript - iPhone/iOS 6/Mobile Safari：有没有办法检测“浏览器全屏”模式？安卓兼容性？

> ID：15322915
> 
> 赞同：2
> 
> 时间：2013-03-10T13:46:47.637
> 
> 标签：javascript, jquery, iphone, ios, mobile-safari

我想知道如何检测用户是否在 Safari 中使用“全屏功能”。我不是说它是从跳板开始的，我是指 iOS 6 中添加的功能。

实际上，这里有一个类似的问题，这里发布了这段代码：

```
$(window).on('resize', function(){
    if ($(this).height() > 300 && 
       (window.orientation == 90 || window.orientation == -90)) {
        // Full screen!
    } else {
        // Exit full screen!
    }
}); 
```

但它的问题是它在方向改变时也会触发。另外，我不确定使用硬编码值是否是个好主意，尤其是“300”？有没有更好的方法来检测“浏览器全屏”模式？

编辑：好的，所以我刚刚检查过：在 iPhone 上改变方向时，事件`onorientationchange` **被**`resize`触发。将 Safari 更改为全屏也会触发`resize`- 所以我可以将我的函数与该事件挂钩。但是Android设备呢，它们也会触发`resize`吗？还是最好将函数简单地绑定到`onorientationchange` **and** `resize`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T07:23:48.800

**跨浏览器方式**

```
$(document,window).on('resize orientationchange webkitfullscreenchange mozfullscreenchange fullscreenchange',  function(){

}); 
```

# iphone - UINavigationTransitionView、UILayoutContainerView和UIViewControllerWrapperView的作用是什么

> ID：15322916
> 
> 赞同：4
> 
> 时间：2013-03-10T13:46:49.613
> 
> 标签：iphone, ios, objective-c, cocoa-touch

和的作用是`UINavigationTransitionView`什么？它们的生命周期是什么？`UILayoutContainerView``UIViewControllerWrapperView`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T01:32:51.957

Apple 可能使用如此复杂的视图层次结构来支持关注点的清晰分离。转换视图可能*只关心子视图控制器的转换，而布局视图**只*关心以不同的界面方向布置它们。这可以让他们重新使用选项卡控制器中的布局逻辑（不需要转换逻辑）。

正如其他人指出的那样，这一切都是猜测，所以没有人可以给你一个明确的答案。祝你实现你的控制器好运！

# javascript - 清除 URL 哈希

> ID：15322917
> 
> 赞同：30
> 
> 时间：2013-03-10T13:46:54.363
> 
> 标签：javascript, html, url-routing, window.location

访问`stackoverflow.com/#_=_`并`window.location.hash`评估为`#_=_`。美好的。

现在执行`window.location.hash = ''`清除哈希，URL 变为`stackoverflow.com/#`. （注意尾随`#`。）

为什么`#`in`window.location.hash`不一致地包含或排除？如何在`#`不重新加载页面的情况下从 URL 中删除？

（[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.location)说

> [哈希是] URL 中 # 符号之后的部分，包括 # 符号。

但对于空散列，情况并非如此。）

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-10T14:19:26.707

要回答第二个问题（删除`#`不刷新页面）：

```
history.pushState('', document.title, window.location.pathname); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T18:48:27.597

回答你的第一个问题：

根据Mozilla.org中的[window.location 文档：](https://developer.mozilla.org/en-US/docs/DOM/window.location) *“URL 中 # 符号之后的部分，如果有的话，包括 # 符号。 **如果 url 不包含 # 或 # 后没有任何内容，则为空字符串。** "*

奇怪的是，该文件刚刚在 2013 年 4 月 8 日更新。不确定是否在您检查文档后添加。

顺便说一句（并参考答案）， window.location.hash 和 pushState 是不同的概念，尽管密切相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T14:04:18.217

有两件事推动了这种行为：

*   “设置散列属性导航到命名的锚点，而无需重新加载文档。” （[这里](http://ific.uv.es/informatica/manuales/ClientReferenceJS13/location.html#1193379)）
*   “当您设置位置对象或其任何属性时，除了 hash[...] 在 JavaScript 1.1 及更高版本中，设置位置的效果取决于用户通过网络将文档与原始文档进行比较的设置。” （[这里](http://ific.uv.es/informatica/manuales/ClientReferenceJS13/location.html#1193176)）

所以基本上，设置 hash 属性不应该导致重新加载，设置任何其他属性应该导致重新加载（或者可能是 E-Tag/modified-since 标头检查，具体取决于浏览器设置）。

我假设为了保持一致性，浏览器构建器将设置一个空的哈希值转换为将“#”设置为哈希值。这样，地址栏中的 url 不会导致重新加载。但后半部分纯属猜测。

# solr - Lucene 在多值字段中查找索引？

> ID：15322919
> 
> 赞同：0
> 
> 时间：2013-03-10T13:47:06.260
> 
> 标签：solr, lucene, solarium

我有一个多值的名称字段，我必须在列表中找到匹配值的索引。

```
DOC example:

profile_id: 1
names: [ "My name", "something", "My second name", "My nickname"] 
```

询问：

```
profile_id:1 AND names:"My secon name"~ 
```

预期结果：

```
my doc, and the index of the matched, 2 
```

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:40:53.257

[SpanTermQuery](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/search/spans/SpanTermQuery.html)与 TermQuery 一样匹配文档，但它还跟踪出现在同一文档中的相同术语的位置。

```
Spans positionInfoForAllMatchingDocs = spanQuery.getSpans(..arguments..);
int position = -1;
while(positionInfoForAllMatchingDocs.next()){
      position = positionInfoForAllMatchingDocs.start() // Returns the start position of the current match.
      System.out.println("Found match in the document with id: " + positionInfoForAllMatchingDocs.doc() + " at position: " + position); // You obviously want to replace this sysout with something elegant.
} 
```

*   确保您计划为其检索位置信息的字段已使用 Field.TermVector.WITH_POSITIONS 或 Field.TermVector.WITH_POSITIONS_AND_OFFSETS 进行索引。

# javascript - 在 document.ready 中定义函数的区别

> ID：15322931
> 
> 赞同：0
> 
> 时间：2013-03-10T13:48:27.587
> 
> 标签：javascript, jquery

在 document.ready 中定义函数有什么区别？

它会影响何时可以调用函数的范围吗？

例如，在函数 inside() 和 outside() 的位置定义中是否有任何问题/差异我应该注意：

```
<script>
document.ready(){
 function inside(){
    alert('inside');
 }
}

 function outside(){
    alert('outside');
 }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:52:15.817

是的，您只能`inside`从事件回调内部访问该函数`ready`：

```
document.ready(function(){

  function inside(){
    alert('inside');
  }

  inside(); // works
  outside(); // works

});

function outside(){
  alert('outside');
}

inside(); // doesn't work
outside(); // works 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:49:52.537

> 它会影响何时可以调用函数的范围吗？

是的，没有别的。

（尽管您的特定示例取决于您首先`ready()`向对象添加方法`document`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T13:58:58.803

Javascript 具有函数级别范围，这意味着如果您在 document.ready 中定义一个函数，它将在 document.ready 之外不可用

我会像这样在外面定义一个命名空间： var app = {};

然后像这样定义你的内部函数： app.inside = function() {

然后 inside 将在您的应用程序全局命名空间中可用。

# google-chrome-extension - 无法安装我自己的扩展“下载中断”

> ID：15322932
> 
> 赞同：1
> 
> 时间：2013-03-10T13:48:32.070
> 
> 标签：google-chrome-extension

尝试了所有方法 - 重新上传、调整大小、编写空白扩展名、等待 12 小时、使用另一个谷歌帐户、浏览器、操作系统、另一个存档器等。我创建扩展名，将其上传到仪表板，发布它。当我尝试从商店安装它时，我收到此错误：

![](../Images/b42c17b9265fc4fad64ed03393f03efa.png)

甚至来自谷歌开发人员“入门”手册的示例扩展也因“下载中断”错误而失败。我在谷歌群组上看到了很多相同的问题，但没有答案。有人知道为什么会这样吗？

# java - 按下按钮时如何显示这样的选项菜单？

> ID：15322934
> 
> 赞同：0
> 
> 时间：2013-03-10T13:49:07.527
> 
> 标签：java, android, menu

我一直在想如何满足以下要求。

我需要用两个按钮制作一个简单的屏幕，如下所示： ![在此处输入图像描述](../Images/b712004ce0821888a73f3d0669d9efd5.png)

屏幕的那部分已经完成。

对我来说最难的事情是在按下两个按钮时做出它们的行为。在这种情况下，他们必须在下面显示一个选项菜单，如下所示：

按钮 1 按下： ![在此处输入图像描述](../Images/71c8a805cff5c6673ede4c8c1a38b686.png)

按下按钮 2：

![在此处输入图像描述](../Images/d6c13777416477e93945f161c9de8512.png)

我还没有开始对菜单进行编程，但如果有帮助，这是屏幕的布局（没有按钮）。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@color/grayBackgound"
    tools:context=".MenuActivity" >

    <include android:layout_width="match_parent" layout="@layout/header" />
    <include android:layout_width="match_parent" layout="@layout/loggedin_subheader"/>

</LinearLayout> 
```

标题的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >    

    <ImageView 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/header"
        android:contentDescription="@string/header" 
     />

     <ImageButton 
            android:id="@+id/btnClose"
            android:src="@drawable/btn_close"
            android:contentDescription="@+string/salir"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_marginLeft="260dp"
      />

</FrameLayout> 
```

子标题的布局几乎相同。

我只需要帮助为每个按钮制作选项菜单。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T14:00:06.220

您要实现的菜单通常称为`QuickAction Dialog`. 有几个可用的教程。

为了让您开始，这里有几个链接：

1.  [http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

2.  [https://github.com/ruqqq/WorldHeritageSite](https://github.com/ruqqq/WorldHeritageSite)（这本身不是教程，但有完整的实现`QuickAction Dialog`）

3.  [https://code.google.com/p/simple-quickactions/](https://code.google.com/p/simple-quickactions/)（您需要对此进行一些修改）

在您的情况下，第一个链接是最有希望的。如果您将该页面向下滚动到**类似 Gallery3D 的 QuickActions**部分，您会看到它有点类似于您希望应用程序的最终结果。当然，不用说，您仍然需要对站点上可用的源进行修改。

希望这可以帮助。;-)

# php - 每次页面刷新都会更改数千条记录

> ID：15322937
> 
> 赞同：-1
> 
> 时间：2013-03-10T13:49:42.847
> 
> 标签：php, mysql, database, performance, optimization

我开始考虑我的新项目，我发现了一些速度问题，所以我希望你能帮助我选择一种好的和优雅的编码方式。

每个用户在数据库中都有他访问过的“地方”的记录。每个地方都有“学校”——这个特定地方的许多学校。每个学校都有课。每个班级可能在不同的时间结束其“学习年”，因此如果日期 >= 学习年结束，则​​其数字应递增。

所以我们有这样一个数据库：

“地方”表：

```
place | user_id | 
----------------- 
1     |   4     |
2     |   4     | 
```

4 号用户访问了 1 号和 2 号地点

“学校”表：

```
school | place |
----------------
5      |   2   |
6      |   2   | 
```

Place 2 有两所学校 - id 5 和 6。

“类”表：

```
class | school | end_learning | class_number
---------------------------------------------
20    |   5    | 01.01.2013   |   2
21    |   5    | 03.01.2013   |   3
22    |   5    | 05.01.2013   |   4 
```

学校 5 有 3 个班级，ID 为 20、21、22。如果日期大于 01.01.2013，则班级 20 的班级编号应递增为 3，结束学习日期更改为 01.01.2014。等等。

现在我们遇到了问题——如果有 1000 个地方，每个地方有 100 所学校，每个有 10 个班级，我们就有 1000000 条记录。很多。因为我所提供的只是一个简单的示例，所以我必须考虑在每次用户刷新页面时更新整个数据库，所以我担心它可能会滞后于这么多的记录。

我还可以将课程序列化为学校表中的一个字段：

```
school | place | classes
-------------------------------------------------------------------------
5      |   2   | serialized class 20, 21, 22 with end_learning field and class number
6      |   2   | other serialized classes from school 6 
```

在那种情况下，我得到的记录减少了 10 倍，但每次我必须反序列化数据，检查日期，如果它比现在少，则更改它，序列化并保存到数据库。第二个问题是我必须从 db 中选择所有记录来操作它们，而不仅仅是所有需要更改的记录。

我也在考虑拥有两个数据库：一个包含在未来可能需要更改的记录，第二个可能需要在接下来的 24 小时（不久的将来）进行更改。每 24 小时将在接下来的 24 小时内结束学习的所有课程都移动到“近期”数据库，因此页面的每次刷新都适用于数千条记录，而不是数十万或数百万条记录。取而代之的是，它每天只对数百万条记录（更远的将来）创建一次“近期”表。

您如何看待所有这些数据库模式？也许你有更好的主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:13:12.973

我不太了解您概述的业务逻辑或数据模型 - 但我假设您已经考虑过了。

首先，像 MySQL 这样的 RDBMS 解决方案非常非常擅长管理大量记录，只要您使用的数据是关系型的。据我所知，您将搜索许多记录，但只更新一些记录（用户只能注册有限数量的课程）；我不认为这是一个大问题。

其次，在您可以证明它不满足您的性能需求之前，使用“标准”关系模型几乎总是比在开始时采用“异国情调”解决方案更好（我将您的序列化和分区解决方案归类为“异国情调“出于此答案的目的）。大量的时间和精力都花在了优化 SQL 的性能上；如果有一个简单的替代方案，它将成为标准解决方案的一部分。当然，有些点标准关系模型无法扩展（例如 Facebook 大小的流量），或者关系模型并不真正适合的业务领域（文档、图表）。但是，所有替代方案都像“标准” MySQL 一样具有优点和缺点。

第三，处理可能的性能问题的最佳方法是处理它们。在代码中。建立一个测试平台，根据关系模型创建一个模式，用测试数据填充它（例如使用[DbMonster](http://sourceforge.net/projects/dbmonster/)），给它一些负载（例如使用[JMeter](http://jmeter.apache.org/)）并调整你的模式和查询以证明你的情况不适合标准溶液。如果你真的可以证明你不能很好地使用标准的关系数据库东西，那么只选择异国情调的东西。

# php - Android 使用 HTTP-GET 调用 PHP

> ID：15322940
> 
> 赞同：0
> 
> 时间：2013-03-10T13:49:59.057
> 
> 标签：php, android, http, url, http-post

我的问题是：如何使用 HttpPost 调用 php？

```
 final HttpClient httpclient = new DefaultHttpClient();
final HttpPost httppost = new HttpPost("www.example.de/mySkript.php");
final ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("param1", "value1"));
nameValuePairs.add(new BasicNameValuePair("param2", "value2"));

httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
final HttpResponse response = httpclient.execute(httppost); 
```

我们发现了这个......但我们不想将参数/值发送到 PHP，因为如果您通过 URL 调用我们的 PHP 计数 +1。任何代码只调用PHP？

谢谢 ：）

编辑：PHP是：

```
<?php
$userdatei = fopen ("test.txt","r");
$zeile = fgets($userdatei, 500);
$zeile++;
fclose($userdatei);

$schreiben = fopen ("test.txt","w");
fwrite($schreiben, $zeile);
fclose($schreiben);
?> 
```

并使用此代码：

```
 public static HttpResponse hitUrl(String url) {
      try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response = httpclient.execute(new HttpGet(url));
        return response;
      } catch (Exception e) {
          e.printStackTrace();
        return null;
      }
    } 
```

并调用它：

```
hitUrl("http://example.de/test.php"); 
```

这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:54:48.600

您需要向您的服务器发出 HTTP GET 请求，您可以使用以下内容：

```
public static HttpResponse hitUrl(String url) {
  try {
    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse response = httpclient.execute(new HttpGet(url));
    return response;
  } catch (Exception e) {
    Log.("[GET REQUEST]", "Network exception", e);
    return null;
  }
} 
```

我还可以为此服务器异步调用推荐 AQuery 库：

[http://code.google.com/p/android-query/](http://code.google.com/p/android-query/)

# jquery - JQuery SelectBoxIt 插件的显示属性问题

> ID：15322941
> 
> 赞同：0
> 
> 时间：2013-03-10T13:49:59.253
> 
> 标签：jquery, html, drop-down-menu

我一直在尝试使用 SelectBoxIt Jquery 插件，但是动态创建的选择框的显示和禁用属性存在问题。简而言之，如果原来的选择框有一个“display:none”的css属性，SelectBoxIt仍然会显示它。我通过在隐藏的容器 div 中插入选择框来解决这个问题。但是，当显示容器 div 时，selectboxit 会正确显示，但现在已禁用。你们对如何解决这个问题有任何线索吗？

HTML 代码：

```
<div>
<select name="sel" id="sel">
<option value="0">Select this</option>
<option value="1">Select that</option>
</select>
</div>

<div id="seladd_xx" style="display:none">
<select name="seladd[]" id="sel_xx">
<option value="0">Select this now</option>
<option value="1">Select that now</option>
</select>
</div>    
<button type="button" id="addbtn_unit" class="addmore" style="font-weight: bold;font-size:11px">Add More</button>    

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.selectboxit/3.2.0/jquery.selectBoxIt.min.js">        </script> 
```

查询代码：

```
<script type="text/javascript">
$(document).ready(function(){
    $("select").selectBoxIt();
    id=0;
    $('.addmore').click(function(){
        newUnit($('#seladd_xx'));
    })

    function newUnit(element) {
        var newElement = element.clone(true);
        if(id <10)id = "0"+id;
        newElement.attr("id",element.attr("id").split("_")[0]+"_"+id);
        $('select', newElement).each(function() {
            var yyid = $(this).attr("id").split("_")[0] + '_' + id;
            $(this).attr('id', yyid);
        });
        $('#seladd_xx').before(newElement);
        newElement.show('fast');
        id++;
    }
})

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:52:22.833

更新您的 jQuery 选择器以不在隐藏的选择框上调用 SelectBoxIt。像这样：

```
$('select:visible').selectBoxIt(); 
```

# wordpress - 自定义帖子类型模板在循环中返回错误的永久链接

> ID：15322942
> 
> 赞同：1
> 
> 时间：2013-03-10T13:50:14.003
> 
> 标签：wordpress, custom-post-type, permalinks

我创建了一个自定义帖子类型（员工简历）和一个自定义模板来显示摘录、附加图像，并获取链接到自定义帖子类型的永久链接。

当我使用我的自定义模板循环访问我的自定义帖子类型时，它会获取附加的图像和摘录，但是当我`get_permalink()`在循环中使用它时，它会返回使用该模板的页面的永久链接，而不是它正在循环的每个帖子的永久链接通过，我筋疲力尽，所以我可能忽略了一些东西。

自定义帖子类型（functions.php）

```
add_action('init', 'employee_bio',1);

     function employee_bio() {
       $feature_args = array(
          'labels' => array(
           'name' => __( 'Employee Bios' ),
           'singular_name' => __( 'Employee Bio' ),
           'add_new' => __( 'Add New Bio' ),
           'add_new_item' => __( 'Add New Bio' ),
           'edit_item' => __( 'Edit Bio' ),
           'new_item' => __( 'New Bio' ),
           'view_item' => __( 'View Bio' ),
           'search_items' => __( 'Search Employee Bios' ),
           'not_found' => __( 'No Employee Bio found' ),
           'not_found_in_trash' => __( 'No Employee Bio found in trash' )
         ),
       'public' => true,
       'show_ui' => true,
       'capability_type' => 'page',
       'hierarchical' => true,
    'has_archive' => false,
    'can_export' => true,
       'rewrite' => array('pages' => true, 'with_front' => false),
       'menu_position' => 20,
       'supports' => array('title', 'editor', 'thumbnail','excerpt', 'page-attributes','post-formats' )
     );
  register_post_type('bio',$feature_args);
} 
```

自定义模板（bio_overview.php）

```
<?php get_header(); ?>
<?php $loop = new WP_Query( array( 'post_type' => 'bio') ); ?>
<div id="primary" class="content-area">
        <div id="contentwide" class="site-content" role="main">

            <?php while ($loop->have_posts() ) : $loop->the_post(); ?>

                <div class="bio_summeries">

                    <div class="mini_headshot">
                        <?php echo the_post_thumbnail('full');?>
                    </div>

                    <p class="bio_excerpt">
                        <?php the_excerpt(); ?> 
                    </p>
                    <a href="".<?php get_permalink();?> .""> Read More > </a>
                    <!--<div class="read_more_bio"></div>-->

                </div>

                <?php //comments_template( '', true ); ?>

            <?php endwhile; // end of the loop. ?>

        </div><!-- #content .site-content -->
    </div><!-- #primary .content-area --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:33:38.960

找到它，我不得不从`<a>`标签和`echo`结果中删除额外的引号和连接。所以：`<a href="".<?php get_permalink();?> .""> Read More > </a>` 变成： `<a href="<?php echo get_permalink();?>"> Read More > </a>`

这让它工作了。现在，该睡觉了。

# c - C : .so 库和生成文件

> ID：15322944
> 
> 赞同：1
> 
> 时间：2013-03-10T13:50:18.883
> 
> 标签：c, makefile, libraries

我正在尝试将 .so 库添加到我的项目中，但我对 makefile 的了解非常有限，不幸的是我不明白我能找到的教程......

这是我的项目的结构：

```
/project
    ex1.c
    ex1.h
    ex1_client.c
    ex1_client.h
    /lib
        libmylib.so 
```

我需要在 ex1 和 ex1_client 这两个可执行文件中使用 mylib，但我没有成功将它包含在 makefile 中（而且我想我可能不知道如何将它包含在我的 .c 文件中......）

我的makefile是：

```
CC= gcc
CFLAGS= -Wall -pedantic -std=c99 -pthread
RM= rm -f
LFLAGS= -L./lib
LIBS= -lmylib
#Don't know if the following is necessary
LD_LIBRARY_PATH= ./lib

all: ex1 ex1_client

ex1: ex1.o
    $(CC) $(CFLAGS) -o ex1 ex1.o $(LFLAGS) $(LIBS)

ex1_client: ex1_client.o
    $(CC) $(CFLAGS) -o ex1_client ex1_client.o $(LFLAGS) $(LIBS)

ex1.o: ex1.c ex1.h
    $(CC) $(CFLAGS) -c ex1.c ex1.h

ex1_client.o: ex1_client.c ex1_client.h
    $(CC) $(CFLAGS) -c ex1_client.c ex1_client.h

clean:
    $(RM) *.o ex1 ex1_client *~ 
```

它不起作用 - 似乎不知道在哪里可以找到 mylib，或者只是不知道它有什么要找的。

除此之外，我没有在我的 .c 文件中写任何关于 mylib 的内容……我的意思是没有#include。可能是所有问题之一。

关于图书馆和makefile的解释对我来说似乎真的很难理解......请原谅一个年轻的法国开发者在学校学习的英语;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T14:02:36.577

`mylib.so`应该是`libmylib.so`，否则链接器找不到它。

（看看系统上已经安装的库而不是做出错误的假设怎么样？）

# sql - 在 SQL SERVER 中加入多个表

> ID：15322945
> 
> 赞同：0
> 
> 时间：2013-03-10T13:50:26.503
> 
> 标签：sql, database, foreign-keys, primary-key

![在此处输入图像描述](../Images/bcbc7da1d113c2a0ef25f0e406358e6e.png)

我喜欢上面的逻辑ERD。我没问题，但我不明白如何显示正确的信息。

例如：

需要列出组和属于每个组的成员。为每个组显示 ID 及其名称。对于每个成员，显示其组长的唯一标识符、姓名、性别、出生日期和标识符。

好的，我们有组表和组成员表。

```
SELECT group ID, group name
FROM group;

SELECT member ID, name, gender, D.O.B, Leader ID
From group member; 
```

我知道这是错误的，我只是不明白如何显示正确的信息，我可以想象但无法写下来 O_o....有点卡住

还有一个问题，主管怎么样，我知道它通过（活动参与者）但是我如何必须以这个主管作为外键创建活动表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:56:33.347

> 这是你可以做的：

```
SELECT 
      P.Name,
      P.DOB,
      P.Gender,
      G.GroupName,
      GL.PersonId   
FROM Person P
INNER JOIN GroupMember GM ON GM.PersonId =  P.PersonId
INNER JOIN Group G ON G.GroupId =  P.GroupId
INNER JOIN GroupLeader GL ON GL.GroupId = G.GroupId 
```

> 您可以使用`JOIN`更多表格并构建您的表格，`query`如上所示。

# function - PostgreSQL 在同一架构中找不到函数

> ID：15322948
> 
> 赞同：0
> 
> 时间：2013-03-10T13:51:02.710
> 
> 标签：function, postgresql

问题示例：

*   架构名称 -`schema123`
*   函数名 =`function123`

找不到 ->`variable:=function123();` 可以找到 ->`variable:=schema123.function123()`

使用 PostgreSQL 8.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:08:12.100

尝试：

```
SET search_path='public, schema123'; 
```

然后运行你的函数。

更好的方法是使用具有模式名称的完全限定函数名称，如第二个示例中所示。这远不那么容易出错。

请注意，除非您在搜索路径函数中有架构，否则将找不到它。在 Pg 8.4 中，您必须在存储过程中具有复杂的逻辑才能设置和恢复搜索。在 9.2 中，您实际上可以为该功能设置此项，这可能是考虑升级的一个很好的理由。

# compiler-construction - 创建编程语言

> ID：15322958
> 
> 赞同：5
> 
> 时间：2013-03-10T13:52:19.273
> 
> 标签：compiler-construction, programming-languages

我想知道专业程序员如何创建自己的编程语言。
他们是否只创建一个编译器来读取文本文件并从中生成可执行文件（考虑到没有语法错误等）？

我不打算创建自己的编程语言（我显然对此缺乏经验），我只是想知道他们是如何做到的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:56:05.570

您应该阅读编译器构造。一些主要领域包括：

*   词法分析
*   语法分析
*   语义分析
*   代码优化

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T14:13:03.950

如果您有兴趣，可以在 Udacity 上学习一门很棒的免费课程，它会给您一个好主意：[https](https://www.udacity.com/course/cs262) ://www.udacity.com/course/cs262 （编程语言 - 构建 Web 浏览器）。我的课程还没有完成一半，但我们已经学习了一些有趣的概念以及词法分析的基础。您可能认为 Web 浏览器与编程语言无关（我曾这样做过），但实际上，除了将代码编译为可执行形式之外，它们的作用几乎相同。他们都必须阅读、解析和 lex 代码，并根据语言规范对其进行解释。JavaScript 也是一种非常强大的语言，内置于每个现代浏览器中（许多其他“语言”现在也被浏览器解释）。

再举一个例子，Python 的首次实现是用 C 编程语言实现的。这允许 python 程序使用 C 源代码。还有一个 Java 版本的 Python (jython) 可以与 Java 程序互操作。是什么让 Python Python（如果你忽略它的电池方面）是语言规范，其中包括什么是保留字，对象如何存储在内存中，什么样的表达式和控制结构是有效的，等等。 . 我的知识不足以开发像 Python 这样的“严肃”语言。但是有人必须用另一种语言来开发它。即使你确实有能力开发另一种语言，你也必须有一些特别的东西才能让它被广泛使用，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T15:42:46.777

大多数时候，当有人需要一种编程语言时，他们正在创建一种“领域特定语言”。基本上，他们正在创建一种专门为他们需要解决的问题而构建的编程语言。

通常这些编程语言不会产生可执行代码。他们通常会分析程序并在内存中生成一个数据结构，该数据结构是程序的一种表示形式，以便于评估程序的语句。然后他们直接从该数据结构评估这些语句，而不是将该数据结构翻译成一系列汇编语言指令。

执行此操作的编程语言称为“解释型”。并且有一些非常流行的编程语言属于这一类。用于此类语言的另一个术语是“脚本语言”。所有的脚本语言都是解释型的，但并不是所有的解释型语言都被称为脚本语言。

产生 CPU 直接执行的“可执行文件”或一系列指令的策略称为“编译”。使用这种策略的语言被称为“编译”语言。C 和 C++ 都是编译语言。

一件有趣的事情是编译或解释只是不同的执行策略。可以制作 C 解释器，也可以编译 Python 程序。但是使用一种执行策略获得广泛接受的语言很少看到使用另一种执行策略的实现。

因此，程序员为创建新的编程语言所做的最重要的事情是：

1.  创建一个词法分析器和/或解析器。（这是将一系列字符转换为表示程序的内部数据结构的部分。）
2.  创建一个执行引擎来执行由数据结构表示的语句。

通常，选择特定领域语言的语法是为了使第一步非常容易。要么选择与现有语言非常接近的语法，以便程序员可以重用现有的解析器，要么专门选择语法以使语言非常易于解析。

第二步通常相当简单，尽管某些语言特性可能会使事情变得非常复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-25T15:22:22.837

我发现那里的很多资源太自下而上或太理论化，对于那些不想让你的手深入 LLVM、C 或汇编，但仍然喜欢从“零开始”编写编程语言（不使用解析器生成工具）的人）。

您可以查看我的教程系列[在 Swift 中实现编程语言](https://medium.com/swift2go/implementing-a-programming-language-in-swift-part-1-introduction-790840ef8bb5)。

我也喜欢这些资源，它们也非常适合初学者：

*   [编程语言管道](https://medium.freecodecamp.org/the-programming-language-pipeline-91d3f449c919)

*   [让我们构建一个简单的解释器](https://ruslanspivak.com/lsbasi-part1/)

# ios - SecTrustSetAnchorCertificates 破坏了 credentialForTrust

> ID：15322960
> 
> 赞同：2
> 
> 时间：2013-03-10T13:52:28.437
> 
> 标签：ios, objective-c, ssl, pki

我想连接到使用自定义 CA 签名证书的 HTTPS 服务器。我想在我的 IOS 应用程序中硬连线认证的权威 CA 证书。我试过这段代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    .....
    NSString *rootCertPath = [[NSBundle mainBundle] pathForResource:@"qfixca" 
                          ofType:@"der"];
    self.rootCertData = [NSData dataWithContentsOfFile:rootCertPath];
    .....
    NSMutableURLRequest *theRequest=[NSMutableURLRequest requestWithURL:
           [NSURL URLWithString:url] cachePolicy:
            NSURLRequestUseProtocolCachePolicy timeoutInterval:10.0];

    [theRequest setValue:userAgent forHTTPHeaderField:@"User-Agent"];

    NSURLConnection *theConnection=[[NSURLConnection alloc] 
                                    initWithRequest:theRequest delegate:self];

    if (theConnection) {
        NSLog(@"Connection establisted successfully");
    } else {
        NSLog(@"Connection failed.");
    }
}

- (void)connection:(NSURLConnection *)connection
    willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    SecTrustRef trust = challenge.protectionSpace.serverTrust;

    CFDataRef certDataRef = (__bridge_retained CFDataRef)self.rootCertData;
    SecCertificateRef cert = SecCertificateCreateWithData(NULL, certDataRef);

    // Establish a chain of trust anchored on our bundled certificate.
    CFArrayRef certArrayRef = CFArrayCreate(NULL, (void *)&cert, 1, NULL);

    SecTrustSetAnchorCertificates(trust, certArrayRef);
    SecTrustResultType result;
    OSStatus status = SecTrustEvaluate(trust, &result);
    if (status == errSecSuccess &&
       (result == kSecTrustResultProceed ||
       result == kSecTrustResultUnspecified))
    {
        NSURLCredential *cred = [NSURLCredential credentialForTrust:trust];
        [challenge.sender useCredential:cred forAuthenticationChallenge:challenge];
        NSLog(@"sending response");
    }
    else {
        [challenge.sender cancelAuthenticationChallenge:challenge];
    }
} 
```

问题是，在我添加我的根 CA 证书作为锚点之后

```
SecTrustSetAnchorCertificates 
```

称呼

```
[challenge.sender useCredential:cred forAuthenticationChallenge:challenge]; 
```

不像我预期的那样工作。我得到了此服务器的证书无效错误。当我跳过将我的 CA 证书添加为锚并直接调用时

```
[challenge.sender useCredential:cred forAuthenticationChallenge:challenge]; 
```

它有效，但我无法验证服务器证书。我究竟做错了什么？非常感谢！

亚当

# linux - 从 Linux 中删除进程

> ID：15322962
> 
> 赞同：0
> 
> 时间：2013-03-10T13:52:41.120
> 
> 标签：linux, process, kernel

如果有人要追求在 Linux 中编写内核模块的疯狂而危险的想法...

*   在内核的内部进程表中查找由 PID 指定的进程
*   从表中提取内存中进程的开始/结束地址
*   用 0 覆盖此进程的所有内存

然后 ...

*   这会是一种立即终止任何进程的方法吗？
*   这会有多“不安全”？是否有可能完全不引起内核恐慌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:41:02.947

用零覆盖进程的代码（在 x86 中）很可能不会阻止进程执行，但由于这变成了一条普通指令，我认为 ADD EAX，[EAX]，它会一直走到结束代码段 [除非 EAX 指向无效内存]。显然，如果进程的寄存器被设置为一些无效的内存地址[在 64 位中，一个非规范的值将是好的，在 32 位中，一个写保护的东西，例如零]，并且/或内存中充满了导致“无效操作码”的东西，那将是另一回事。

我真的不明白这怎么能比使用`SIGKILL`(aka `KILL -9 pid`) “更好” - 如果进程在内核内部被阻塞并且以某种方式没有离开内核，那么覆盖代码空间将无济于事，因为进程是无论如何都不会运行该代码。如果内核中存在错误，那么您对进程的用户空间内存做了什么并不重要。修复内核错误！

# excel - onWait 后无法运行子程序

> ID：15322967
> 
> 赞同：0
> 
> 时间：2013-03-10T13:52:55.223
> 
> 标签：excel, excel-2007, vba

我有两个子例程：CommandButton2_Click、CommandButton1_Click，其中 cmd2_click 将使用以下语句调用 cmd1_click：

```
Application.OnTime Now() + TimeValue("00:00:15"), "CommandButton1_Click" 
```

但是在执行上述语句时出现以下错误。

这是错误的屏幕截图 ![在此处输入图像描述](../Images/c73428c663eb9254b74fb8e88f50f566.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:04:00.000

请在程序工作表名称前加上一个点，如下例所示。

试试下面的代码：

```
 Application.OnTime Now() + TimeValue("00:00:15"), "Sheet1.CommandButton1_Click" 
```

如果您在对象浏览器中搜索 CommandButton1_Click 过程，您将在保存命令按钮的工作表上看到它的私有函数。

![在此处输入图像描述](../Images/a3265bea10c63afc3dfd0c73df70db46.png)

还要确保您的宏已启用。请参考以下链接。 [http://www.youtube.com/watch?v=3Jqp_WQRT6M](http://www.youtube.com/watch?v=3Jqp_WQRT6M)

# c# - 将结构数据类型编组为从 C++ Dll 到 C# 的返回类型

> ID：15322969
> 
> 赞同：3
> 
> 时间：2013-03-10T13:52:57.587
> 
> 标签：c#, c++, data-structures, marshalling, dllimport

我在从 C++ DLL 到 C# 程序的定义堆栈中获取搜索方法的值时遇到问题这是我的代码

C++---------------------------------------------------- -------------

```
extern "C" __declspec(dllexport) userCredential CallStackSeach(StackUser* pObject, userCredential item)
{
    return pObject->search(item);
} 
```

结构

```
typedef struct userInfo
{
    char* firstName;
    char* middleName;
    char* lastName;
    char* address;
    char* email;
};

typedef struct userCredential
{
    char* username;
    userInfo person;
    char* password;
    bool admin;

}; 
```

C＃ - - - - - - - - - - - - - - - - - - - - - - - - - ------------

结构

```
[StructLayout(LayoutKind.Sequential)]
public struct userInfo
{
    [MarshalAs(UnmanagedType.LPStr)]
    public string firstName;
    [MarshalAs(UnmanagedType.LPStr)]
    public string middleName;
    [MarshalAs(UnmanagedType.LPStr)]
    public string lastName;
    [MarshalAs(UnmanagedType.LPStr)]
    public string address;
    [MarshalAs(UnmanagedType.LPStr)]
    public string email;
}
[StructLayout(LayoutKind.Sequential)]
public struct userCredential
{
    [MarshalAs(UnmanagedType.LPStr)]
    public string username;
    [MarshalAs(UnmanagedType.Struct)]
    public userInfo person;
    [MarshalAs(UnmanagedType.LPStr)]
    public string password;
    [MarshalAs(UnmanagedType.Bool)]
    public bool admin;
} 
```

//P调用

```
[DllImportAttribute("SystemMISO,dll", CallingConvention = CallingConvention.Cdecl, EntryPoint="CallStackSearch")]
[return: MarshalAs(UnmanagedType.LPStruct)]
static private extern IntPtr CallStackSeach(IntPtr pObejct, userCredential item); 
```

//函数包装器

```
public userCredential StackSeach(userCredential item)
{         
   var ptr = CallStackSeach(this.ptrObject,item);
   return (userCredential)Marshal.PtrToStructure(ptr, typeof(userCredential));
   //occur error
} 
```

我有一个错误`"Cannot marshal 'return value': Invalid managed/unmanaged type combination (Int/UInt must be paired with SysInt or SysUInt)."`

# javascript - 突破使用 Buster 的 iFrame

> ID：15322970
> 
> 赞同：0
> 
> 时间：2013-03-10T13:52:58.483
> 
> 标签：javascript, html, iframe

我有一个网站，有人正在使用下面的代码来强制我的网站不要脱离他们的 iframe。我已经尝试了所有可用的帧中断脚本，但无济于事。任何帮助都会很棒！多谢你们！

```
Buster: function () {

    var interval = setInterval(function () {

        if (Lbjs.IsClick) {
            clearInterval(interval);
        }
        else if (Lbjs.Unload > 0) {
            Lbjs.Unload -= 2;
            window.top.location.replace("/cancelnavigation/");
            Lbjs.NavigationNotice();
        }
    }, 1);

    var clearDelay = (this.Countdown > 0) ? this.Countdown : 8;
    setTimeout(function () { clearInterval(interval); }, clearDelay * 1000);
},

NavigationNotice: function () {

    var navNotice = document.getElementById("navNotice");
    navNotice.innerHTML = "<span class=\"warning\" style=\"text-align:center;height:20px;width: 400px;padding: 10px;\"><b>Request Cancelled</b> - Navigation is disabled for 8 Seconds...</span>";

    if (navNotice.style.display == "none") {
        this.Fader.FadeIn(navNotice, 200, function () {
            setTimeout(function () {
                Lbjs.Fader.FadeOut(navNotice, 200, null);
            }, 1500);
        });
    }
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:01:00.810

检查页面的引用者，如果请求来自他们的服务器，则只需发送其他内容。

这必须使用服务器平台完成，但不能使用 Javascript 完成。

# angularjs - angular JS - 非依赖服务之间的通信

> ID：15322971
> 
> 赞同：13
> 
> 时间：2013-03-10T13:53:14.907
> 
> 标签：angularjs

我是 Angular 新手，遇到了一个 catch-22：

**事实：**

1.  我有一个记录我的东西的服务（我的记录器）。

2.  我已经用我自己的实现替换了 $ExceptionHandler（角度的），它将未捕获的异常转发到 my-logger 服务

3.  我有另一个服务，pusher-service，每当要使用“my-logger”在我的应用程序的某处记录致命消息时，都需要通知该服务。

**问题：**

我不能让 'my-logger' 依赖于 'pusher'，因为它会创建循环依赖（因为 'pusher' 使用 $http。圆圈：$ExceptionHandler -> my-logger -> pusher -> $http -> $异常处理程序...)

**我的尝试：**

为了使这两个服务相互通信，我想在 pusher-service 上使用 $watch：监视 $rootscope 上的一个属性，该属性将在 my-logger 中更新。但是，当尝试在“my-logger”中使用 $rootScope 时，为了更新“推送器”“监视”的属性，我在循环依赖方面失败了，因为事实证明 $rootscope 依赖于 $ExceptionHandler（圆圈: $ExceptionHandler -> my-logger -> $rootScope -> $ExceptionHandler)。

试图找到一个选项来在运行时获取在其上下文“my-logger”服务中工作的范围对象。找不到这样的选择。

也不能使用广播，因为它需要 my-logger 才能访问范围（$rootScope），而如上所示，这是不可能的。

**我的问题：**

是否有一种角度方式让两个服务通过第 3 方实体进行通信？

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-10T18:21:06.687

使用作为通知/发布订阅服务的第三个服务：

```
.factory('NotificationService', [function() {
    var event1ServiceHandlers = [];
    return {
        // publish
        event1Happened: function(some_data) {
            angular.forEach(event1ServiceHandlers, function(handler) {
                handler(some_data);
            });
        },
        // subscribe
        onEvent1: function(handler) {
            event1ServiceHandlers.push(handler);
        }
    };
}]) 
```

上面，我只展示了一种事件/消息类型。每个额外的事件/消息都需要自己的数组、发布方法和订阅方法。

```
.factory('Service1', ['NotificationService',
function(NotificationService) {
    // event1 handler
    var event1Happened = function(some_data) {
        console.log('S1', some_data);
        // do something here
    }
    // subscribe to event1
    NotificationService.onEvent1(event1Happened);
    return {
        someMethod: function() {
           ...
           // publish event1
           NotificationService.event1Happened(my_data);
        },
    };
}]) 
```

Service2 的编码与 Service1 类似。

注意 $rootScope、$broadcast 和 scopes 是如何不用于这种方法的，因为它们在服务间通信中是不需要的。

通过上述实现，服务（一旦创建）在应用程序的生命周期内保持订阅状态。您可以添加方法来处理退订。

在我当前的项目中，我使用相同的 NotificationService 来处理控制器范围的 pubsub。（如果有兴趣，请参阅[更新 Angularjs 和 Momentjs 中的“时间前”值](https://stackoverflow.com/questions/18006334/updating-time-ago-values-in-angularjs-and-momentjs/18115976#18115976)）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-10T15:11:14.013

是的，使用事件和侦听器。

在您的“我的记录器”中，您可以在捕获新日志时广播一个事件：

```
$rootScope.$broadcast('new_log', log); // where log is an object containing information about the error. 
```

而不是在你的“推动者”中听那个事件：

```
$rootScope.$on('new_log', function(event, log) {... // 
```

这样你就不需要任何依赖了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:19:47.640

我已经部分成功地解决了这个问题：我使用 $injector 创建了 'my-logger' 和 'pusher' 之间的依赖关系。我在'my-logger'中使用了$injector，并在致命消息到达时在“运行时”（意味着在即将使用它而不是在服务声明时）注入推送服务。仅当我在发送发生之前在“运行时”将 $http 注入到“推送器”时，这才有效。

我的问题是为什么它在“运行时”中与注入器一起工作，而不是在服务头部声明的依赖项？

我只有一个猜测：这是时间问题：当服务在“运行时”注入时，如果它已经存在（意味着已经在其他地方初始化），那么**不需要**获取并获取它的所有依赖项，因此圆圈**是从未发现**，也从未停止执行。

我对么 ？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-09T17:50:21.157

您可以制作自己的通用事件发布服务，并将其注入到每个服务中。

这是一个例子（我没有测试过，但你明白了）：

```
 .provider('myPublisher', function myPublisher($windowProvider) {
            var listeners = {},
                $window = $windowProvider.$get(),
                self = this;

            function fire(eventNames) {
                var args = Array.prototype.slice.call(arguments, 1);

                if(!angular.isString(eventNames)) {
                    throw new Error('myPublisher.on(): argument one must be a string.');
                }

                eventNames = eventNames.split(/ +/);
                eventNames = eventNames.filter(function(v) {
                    return !!v;
                });

                angular.forEach(eventNames, function(eventName) {
                    var eventListeners = listeners[eventName];

                    if(eventListeners && eventListeners.length) {
                        angular.forEach(eventListeners, function(listener) {
                            $window.setTimeout(function() {
                                listener.apply(listener, args);
                            }, 1);
                        });
                    }
                });

                return self;
            }
            function on(eventNames, handler) {
                if(!angular.isString(eventNames)) {
                    throw new Error('myPublisher.on(): argument one must be a string.');
                }

                if(!angular.isFunction(handler)) {
                    throw new Error('myPublisher.on(): argument two must be a function.');
                }

                eventNames = eventNames.split(/ +/);
                eventNames = eventNames.filter(function(v) {
                    return !!v;
                });

                angular.forEach(eventNames, function(eventName) {
                    if(listeners[eventName]) {
                        listeners[eventName].push(handler);
                    }
                    else {
                        listeners[eventName] = [handler];
                    }
                });

                return self;
            }
            function off(eventNames, handler) {
                if(!angular.isString(eventNames)) {
                    throw new Error('myPublisher.off(): argument one must be a string.');
                }

                if(!angular.isFunction(handler)) {
                    throw new Error('myPublisher.off(): argument two must be a function.');
                }

                eventNames = eventNames.split(/ +/);
                eventNames = eventNames.filter(function(v) {
                    return !!v;
                });

                angular.forEach(eventNames, function(eventName) {
                    if(listeners[eventName]) {
                        var index = listeners[eventName].indexOf(handler);
                        if(index > -1) {
                            listeners[eventName].splice(index, 1);
                        }
                    }
                });

                return self;
            }

            this.fire = fire;
            this.on = on;
            this.off = off;
            this.$get = function() {
                return self;
            };
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-26T09:48:57.193

这是在服务和控制器之间发布/订阅多个事件的简单方法

```
.factory('$eventQueue', [function() {
  var listeners = [];
  return {
    // publish
    send: function(event_name, event_data) {
        angular.forEach(listeners, function(handler) {
          if (handler['event_name'] === event_name) {
            handler['callback'](event_data);
          }                
        });
    },
    // subscribe
    onEvent: function(event_name,handler) {
      listeners.push({'event_name': event_name, 'callback': handler});
    }
  };
}]) 
```

消费者和生产者

```
.service('myService', [ '$eventQueue', function($eventQueue) {
  return {

    produce: function(somedata) {
     $eventQueue.send('any string you like',data);
    }

  }
}])

.controller('myController', [ '$eventQueue', function($eventQueue) {
  $eventQueue.onEvent('any string you like',function(data) {
    console.log('got data event with', data);
}])

.service('meToo', [ '$eventQueue', function($eventQueue) {
  $eventQueue.onEvent('any string you like',function(data) {
    console.log('I also got data event with', data);
}]) 
```

# joomla - Joomla 中的前端编辑不起作用

> ID：15322972
> 
> 赞同：0
> 
> 时间：2013-03-10T13:53:37.107
> 
> 标签：joomla, editor, joomla2.5, frontend

我在 Joomla 2.5 中创建了一个站点，并且无法使用前端选项“编辑文章”来编辑我的文章。当我在离线模式下运行站点时，此功能可用，但当我切换到在线模式时，它会消失。在在线模式下运行站点时，我登录到管理员，然后“查看站点” 有人可以帮帮我吗！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:13:05.703

当您的网站处于在线模式时，您需要在前端登录才能编辑文章。如果您已经在后端登录也没关系，它不会计算在内。

您应该在某个页面上启用登录模块，或者在前端启用指向登录页面的菜单项。在那里登录后，您将能够编辑您的文章。

如果您不希望用户在前端看到您的登录页面/模块，您可以为其创建一个隐藏菜单项，只有您知道该链接并且不会显示它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:09:27.913

只需转到您网站的 /index.php?option=com_users

在那里，您将能够登录到前端。

# tcl - 查找 Tk 小部件的类型

> ID：15322977
> 
> 赞同：0
> 
> 时间：2013-03-10T13:53:53.007
> 
> 标签：tcl, tk

有没有办法知道 Tk 小部件的“类型”是什么？

例如，假设我使用`tk::label`命令或`ttk::label`命令创建了一个标签。

之后，我只有小部件的路径名，例如`.l`. 现在，我想知道用于构建的命令是什么`.l`。

我需要的是一个编程解决方案，一些给定`.l`路径的代码可以返回命令的名称，我对*Tcl*解决方案，甚至是用 C 编码的 Tcl 扩展感兴趣。

一种方法是使用 proc 重命名*所有*小部件创建命令，将这些信息保存在某处，然后完全按照原始命令执行的操作，但此解决方案要求您知道所有可用的小部件创建命令，并且不需要考虑到用户定义的小部件（或整体的巨型小部件）。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T17:30:20.850

该[`winfo class`](http://www.tcl.tk/man/tcl8.5/TkCmd/winfo.htm#M9)命令将告诉您小部件的类，这通常足够好（请参阅此交互式会话）：

```
% label .tklabel;       puts [winfo class .tklabel]
Label
% ttk::label .ttklabel; puts [winfo class .ttklabel]
TLabel 
```

请注意，您可以在创建时设置标准 Tk 顶层和 Ttk 小部件的类。这会使事情变得相当复杂。使用顶层，您可以查看是否`[winfo toplevel $w] eq $w`为真，但这不是从 8.5 开始的保证测试，因为可以将顶层重新设置为另一个小部件的子级或将经典框架转换为顶层（通过`wm forget`/ `wm manage`）。

如果您*必须*获取用于创建小部件的确切命令，唯一真正确定的方法是捕获创建命令并记录信息，如下所示：

```
rename frame the_real_frame
proc frame {pathName args} {
    set ::creationInfo($pathName) [list frame $args]
    the_real_frame $pathName {*}$args
} 
```

尝试避免这种复杂性通常更容易（尤其是在生产环境中，您还需要设置一些东西来处理`<Destroy>`事件，以便您清理有关不再存在的小部件的信息，这只会增加更多的技巧）。

# mysql - 获取 MySQL 还原数据库文件的位置

> ID：15322979
> 
> 赞同：0
> 
> 时间：2013-03-10T13:53:55.407
> 
> 标签：mysql, .net, vb.net

我有一个带有 MySQL 数据库的 VB.NET 项目。我想恢复我的备份数据库文件。我有一个代码可以工作，但我是用户通过`OpenfileDialog`.

这是我的代码：

```
restoreDirectory = OpenFileDialog1.FileName.ToString()
Dim myProcess As New Process()
myProcess.StartInfo.FileName = "cmd.exe"
myProcess.StartInfo.UseShellExecute = False
myProcess.StartInfo.WorkingDirectory = "C:\wamp\bin\mysql\mysql5.5.20\bin\"
myProcess.StartInfo.RedirectStandardInput = True
myProcess.StartInfo.RedirectStandardOutput = True
myProcess.Start()
Dim myStreamWriter As StreamWriter = myProcess.StandardInput
Dim mystreamreader As StreamReader = myProcess.StandardOutput
myStreamWriter.WriteLine("mysql -u root  mssa < " & restoreDirectory & " ")
myStreamWriter.Close()
myProcess.WaitForExit()
myProcess.Close() 
```

我确定我得到了正确的文件路径，但它不起作用。我错过了什么吗？

# java - Java - 服务器端口号重试

> ID：15322982
> 
> 赞同：0
> 
> 时间：2013-03-10T13:54:26.890
> 
> 标签：java, sockets, while-loop

我想做一个条件，当用户输入一个小于 1024 的端口号时，它会要求他们再试一次。我知道如何执行 if 语句和简单的 while 循环，但不太确定如何执行此操作。

```
import java.net.ServerSocket;

class Server {
    public void start (int num) throws Exception {
        ServerSocket server = new ServerSocket(num);
        if(num  < 1024){
            ServerSocket server = new ServerSocket(num);
        }
    }
} 
```

然而，这是错误的。我知道也许可以使用一个while循环，但我尝试了类似的方法但仍然出错。如果用户输入一个小于 1024 的数字，那么它会要求他们再次输入数字。继续这样做，直到数字> = 1024。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:56:49.457

你可以扔的`IllegalArgumentException`时候`num < 1024`。此方法的调用者应使用 try .. catch 块（可能在循环内重试）

调用者可以使用：

```
Server s = new Server;
int maxRetries = 10;
int retry = 0;
while(retry < maxRetries){
    try {
        retry++;
        // Read value to num somehow (scanner maybe)
        s.start(num);
    catch (IllegalArgumentException e){
        // print error string
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T14:03:28.637

```
public static void main(String[] args) {
    Scanner scanner = new Scanner(System.in);
    int port = scanner.nextInt();
    while (port < 1024) {
        System.out.println("Please enter a valid port");
        port = scanner.nextInt();
    }
    System.out.println("Port is "+port);
    //Put the logic here to start the server socket.
} 
```

试试这个，用你的价值替换扫描仪部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T14:13:22.077

你只需要扫描仪类。见[http://www.homeandlearn.co.uk/java/user_input.html](http://www.homeandlearn.co.uk/java/user_input.html)

```
Scanner user_input = new Scanner( System.in );
int portEntered=user_input.nextInt();
while(user_input<1024)
{
//  message stating user has entered number less than 1024 using sysout
portEntered= user_input.nextInt();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T05:04:53.557

我不会费心测试这种情况。只需尝试创建 ServerSocket，如果它出于*任何*原因抛出 BindException，请重新提示用户并重试。

# c++ - 调试：自动检查 if (this==NULL)

> ID：15322986
> 
> 赞同：1
> 
> 时间：2013-03-10T13:55:41.983
> 
> 标签：c++, visual-studio-2010, visual-studio

Visual Studio 2010 中是否有办法自动捕获在 NULL 对象上调用成员函数的错误？也许有一些标志，在每个成员函数的请求中都提出了适当的断言？

默认行为是静默接受它，并且仅在访问字段时崩溃。然而，在某些情况下，如果比原来的错误晚得多。

* * *

**编辑：**我*知道*在指针上调用成员函数会`NULL`调用未定义的行为。这是我想要根除的代码中的一个错误。我希望 Visual Studio 有一些可以帮助我的非标准工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T14:38:01.377

不，这将毫无用处。

`NULL`对指针调用成员函数会调用*未定义的行为*。顾名思义，您无法确定此时的行为。

具体来说：

```
void MyObject::foo() {
    if (this) { throw std::logic_exception("this is NULL"); }

    std::cout << "Hello, world!\n";
} 
```

可以由任何符合要求的编译器合理地更改为：

```
void MyObject::foo() {
    std::cout << "Hello, world!\n";
} 
```

毕竟，标准`this`首先保证永远不会为空！

但是，可以做的不是依赖“裸”指针：

```
template <typename T>
class Pointer {
public:
    Pointer(): _ptr(nullptr) {}
    Pointer(T* t): _ptr(t) {}

    T* operator->() const { assert(_ptr); return _ptr; }
    T& operator*() const { assert(_ptr); return *_ptr; }

private:
    T* _ptr;
}; 
```

然后像使用指针一样使用它：

```
int main() {
    Pointer<MyObject> value = container.find("Element");
    value->foo();
} 
```

如果它为空，则断言在`foo`尝试调用之前触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T14:03:28.327

不，但如果你完全接受 RAII 并且只使用 C++11 智能指针（从不显式调用删除），你将很难遇到这样的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T14:40:23.670

您可以检查是否`this`为 NULL，但如果您在 MSVS 中运行，则应考虑使用`DebugBreak`- 选项，以强制调试中断以调查堆栈。这可能导致最有效的错误。我从 Release compiles 中删除了检查，因为在没有调试器的情况下运行该代码会使您的应用程序自行挂起，因为没有调试器可以告诉它继续。为了避免这个问题，你可以考虑 isDebuggerPresent()。

```
#ifdef DEBUG
#define CHECK() if (this==NULL) DebugBreak();
#else
#define CHECK() 
#endif 
```

IsDebuggerPresent：

*   [https://stackoverflow.com/a/101915/1080604](https://stackoverflow.com/a/101915/1080604)
*   [http://msdn.microsoft.com/en-us/library/ms680345.aspx](http://msdn.microsoft.com/en-us/library/ms680345.aspx)

MSDN 上的 DebugBreak：

*   [http://msdn.microsoft.com/en-us/library/ea9yy3ey.aspx](http://msdn.microsoft.com/en-us/library/ea9yy3ey.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T14:02:36.160

自动 - 我不知道，但你总是可以使用断言：

```
assert(this); 
```

至于`this`并考虑它是一个引用“被调用者”类实例的关键字 - 它怎么可能是 NULL？通过 NULL 指针调用？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T14:01:51.480

我不知道有什么特殊的选项可以检查这个，但你可以很容易地写一个宏：

```
 #define CHECK_THIS()  assert(this) 
```

或者

```
 #define CHECK_THIS() do { if (this == NULL) { std::cerr << "'this' is NULL at " \
                             << __FILE__ << ":" << __LINE__ << " in " << __func__; \
                             exit(2); } while(0) 
```

（它使用“do - while”以便可以将其放置在任何地方而不会干扰其他 if 语句等）。

然后只需添加`CHECK_THIS()`任何相关功能。

# c - 为什么下面的代码不能修改指针数组中的字符串？

> ID：15322993
> 
> 赞同：2
> 
> 时间：2013-03-10T13:56:07.670
> 
> 标签：c

我正在尝试将字符串“hello”修改为“Hello”，但它不起作用，也没有给出任何错误。有人可以解释为什么它不起作用。

```
#include <stdio.h>

int main() {
    char *arr[] = {"hello" , "world"};
    char **p = arr;
    printf("%s\n",arr[0]);
    *(*(p+0)+1) = 'H';
    printf("%s\n",arr[0]);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T14:00:44.693

字符串字面量属于类型`char[]`并存储在只读存储器中。你不能改变它们。

如果要更改它们，则需要创建一个 char 数组。你有一个指针数组。

你可以这样做：

```
char foo[] = "Hello";
foo[0] = 'G';
printf("%s", foo); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T14:01:04.017

因为您不能修改字符串文字（尽管它们是 non-const 数组类型`char`）。您的程序按原样调用未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T15:32:00.163

```
char *arr[] = {"hello" , "world"}; 
```

arr 是指向 char 的指针数组，因此您不能修改字符串文字，指针指向。

```
char arr[][6] = {"hello" , "world"}; 
```

arr 是二维字符数组 - 或两个字符串的数组。您可以修改它们，但您需要指定数组第二维的长度。它需要足够大以容纳最长的字符串。

# c# - 在c#中的“使用”中包含代码的原因是什么

> ID：15322996
> 
> 赞同：0
> 
> 时间：2013-03-10T13:56:20.987
> 
> 标签：c#

我有以下代码：

```
 try
        {
            using (var context = new DataContext())
            {
                if (!context.Database.Exists())
                {
                    // Create the SimpleMembership database without Entity Framework migration schema
                    ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                }
            }

            WebSecurity.InitializeDatabaseConnection("xxx", "UserProfile", "UserId", "UserName", autoCreateTables: true);
            var sql = System.IO.File.ReadAllText("SqlScript.sql");
            context.Database.ExecuteSqlCommand(sql);
        }
        catch (Exception ex)
        {
            throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
        } 
```

有人可以解释“使用”的目的是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:58:04.420

它是正确处理模式的[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)。

它相当于

```
DataContext context = new DataContext();
try
{
   // using context here
}
finally
{
  if(context != null)
    ((IDisposable)context).Dispose();
} 
```

这在 MSDN 文章中针对[`using Statement`](http://msdn.microsoft.com/en-gb/library/yh598w02.aspx).

以`using`这种方式使用可确保适当的一次性使用并减少程序员出错的机会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:58:02.330

`using`使用后自动处置对象。您无需手动调用`.Dispose()`.

```
using (var context = new DataContext())
{
    // other codes
}  
// at this point the context is already disposed 
```

是相同的

```
var context = new DataContext()
// other codes
context.Dispose()    // manually calling Dispose()
// at this point the context is already disposed 
```

*   [**使用**语句^(MSDN 手册)](http://msdn.microsoft.com/en-gb/library/yh598w02.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:57:51.690

`using`语句确保`Dispose`在 using 块结束时调用它。您的代码相当于：

```
var context = new DataContext();

try
{ 
   if (!context.Database.Exists())
   {
       ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
   }
}
finally
{
    if (context != null)
        context.Dispose();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T13:59:18.767

该`"using"`语句的原因是确保对象始终`disposed`正确，并且不需要显式代码来确保发生这种情况。

该`using`语句简化了您必须编写的代码来创建并最终清理对象。

```
using (MyResource myRes = new MyResource())
{
    myRes.DoSomething();
} 
```

相当于：

```
MyResource myRes= new MyResource();
try
{
    myRes.DoSomething();
}
finally
{
    // Check for a null resource.
    if (myRes!= null)
        // Call the object's Dispose method.
        ((IDisposable)myRes).Dispose();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T13:59:47.260

该关键字`using`用于实现`IDisposable`接口的对象 - 如果对象被垃圾收集器收集，它们包含不会被清除的非托管资源。
使用时，`using`您将对象的范围限制为花括号，并且当`using`-Statement 离开时，所有非托管资源都将被释放。

在这里看到[这篇](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.110%29.aspx)文章。