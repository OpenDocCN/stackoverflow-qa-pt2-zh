# StackOverflow 问答 12892000-12892999

# c# - 在 XSLT 中组合相同的子元素

> ID：12892001
> 
> 赞同：2
> 
> 时间：2012-10-15T08:41:52.470
> 
> 标签：c#, asp.net, xslt

嗨，首先我正在学习复杂的 XSLT 迭代，现在写我遇到了一个查询，其中我在标签信息下有相同的信息，唯一不同的标签是具有不同属性值的 BookingClassAvail，我想组合成一个保留信息标签作为单独的。

XML:

```
 <Availability>
        <Success/>
        <Information xmlns="http://www.opentravel.org/OTA/2003/05">
          <DepDateTime>2012-10-27</DepDateTime>
          <OrigLocation LocationCode="DEL" />
          <DestLocation LocationCode="BOM" />
          <OrigDestinationOptions>
            <OrigDestinationOption>
              <FlightSegment DepDateTime="2012-10-27A12:35:00" ArrDateTime="2012-10-27A14:05:00" StopQuantity="0" FlightNumber="152" JourneyDuration="90" Ticket="eTicket">
                <DepAirport LocationCode="DEL" Terminal="" />
                <ArrAirport LocationCode="BOM" Terminal="" />
                <OperatingAirline CompanyShortName="A1" />
                <Equipment AirEquipType="A320" />
                <MarketingAirline CompanyShortName="A1" />
                <BookingClassAvail ResBookDesigCode="T" ResBookDesigQuantity="180" />
              </FlightSegment>
            </OrigDestinationOption>
            <OrigDestinationOption>
              <FlightSegment DepDateTime="2012-10-27A12:35:00" ArrDateTime="2012-10-27A14:05:00" StopQuantity="0" FlightNumber="152" JourneyDuration="90" Ticket="eTicket">
                <DepAirport LocationCode="DEL" Terminal="" />
                <ArrAirport LocationCode="BOM" Terminal="" />
                <OperatingAirline CompanyShortName="A1" />
                <Equipment AirEquipType="A320" />
                <MarketingAirline CompanyShortName="A1" />
                <BookingClassAvail ResBookDesigCode="B" ResBookDesigQuantity="80" />
              </FlightSegment>
            </OrigDestinationOption>

            <OrigDestinationOption>
              <FlightSegment DepDateTime="2012-10-28A10:35:00" ArrDateTime="2012-10-27A14:05:00" StopQuantity="0" FlightNumber="152" JourneyDuration="90" Ticket="eTicket">
                <DepAirport LocationCode="DEL" Terminal="" />
                <ArrAirport LocationCode="BOM" Terminal="" />
                <OperatingAirline CompanyShortName="A1" />
                <Equipment AirEquipType="A320" />
                <MarketingAirline CompanyShortName="A1" />
                <BookingClassAvail ResBookDesigCode="B" ResBookDesigQuantity="80" />
              </FlightSegment>
            </OrigDestinationOption>
          </OrigDestinationOptions>
        </Information>
        <Information xmlns="http://www.opentravel.org/OTA/2003/05">
          <DepDateTime>2012-11-05</DepDateTime>
          <OrigLocation LocationCode="BOM" />
          <DestinationLocation LocationCode="DEL" />
          <OrigDestinationOptions>
            <OrigDestinationOption>
              <FlightSegment DepDateTime="2012-11-05T08:35:00" ArrDateTime="2012-11-05T09:40:00" StopQuantity="0" FlightNumber="993" JourneyDuration="65" Ticket="eTicket">
                <DepAirport LocationCode="BOM" Terminal="" />
                <ArrAirport LocationCode="DEL" Terminal="" />
                <OperatingAirline CompanyShortName="GR" />
                <Equipment AirEquipType="A320" />
                <MarketingAirline CompanyShortName="GR" />
                <BookingClassAvail ResBookDesigCode="T" ResBookDesigQuantity="180" />
              </FlightSegment>
            </OrigDestinationOption>
            <OrigDestinationOption>
              <FlightSegment DepDateTime="2012-11-05A08:35:00" ArrDateTime="2012-11-05A16:15:00" StopQuantity="0" FlightNumber="666" JourneyDuration="75" Ticket="eTicket">
                <DepAirport LocationCode="BOM" Terminal="" />
                <ArrAirport LocationCode="DEL" Terminal="" />
                <OperatingAirline CompanyShortName="MM" />
                <Equipment AirEquipType="A320" />
                <MarketingAirline CompanyShortName="MM" />
                <BookingClassAvail ResBookDesigCode="Y" ResBookDesigQuantity="180" />
              </FlightSegment>
            </OrigDestinationOption>
          </OrigDestinationOptions>
        </Information>
      </Availability> 
```

想要如下输出：

```
 <Availability>
      <Success/>
      <Information xmlns="http://www.opentravel.org/OTA/2003/05">
        <DepDateTime>2012-10-27</DepDateTime>
        <OrigLocation LocationCode="DEL" />
        <DestLocation LocationCode="BOM" />
        <OrigDestinationOptions>
          <OrigDestinationOption>
            <FlightSegment DepDateTime="2012-10-27A12:35:00" ArrDateTime="2012-10-27A14:05:00" StopQuantity="0" FlightNumber="152" JourneyDuration="90" Ticket="eTicket">
              <DepAirport LocationCode="DEL" Terminal="" />
              <ArrAirport LocationCode="BOM" Terminal="" />
              <OperatingAirline CompanyShortName="A1" />
              <Equipment AirEquipType="A320" />
              <MarketingAirline CompanyShortName="A1" />
              <BookingClassAvail ResBookDesigCode="T" ResBookDesigQuantity="180" />
              <BookingClassAvail ResBookDesigCode="B" ResBookDesigQuantity="80" />
            </FlightSegment>
          </OrigDestinationOption>

         <!-- since the DepDateTime has different date hence not combined in the above flightsegment -->

            <OrigDestinationOption>
              <FlightSegment DepDateTime="2012-10-28A10:35:00" ArrDateTime="2012-10-27A14:05:00" StopQuantity="0" FlightNumber="152" JourneyDuration="90" Ticket="eTicket">
                <DepAirport LocationCode="DEL" Terminal="" />
                <ArrAirport LocationCode="BOM" Terminal="" />
                <OperatingAirline CompanyShortName="A1" />
                <Equipment AirEquipType="A320" />
                <MarketingAirline CompanyShortName="A1" />
                <BookingClassAvail ResBookDesigCode="B" ResBookDesigQuantity="80" />
              </FlightSegment>
            </OrigDestinationOption>
        </OrigDestinationOptions>
      </Information>
      <Information xmlns="http://www.opentravel.org/OTA/2003/05">
        <DepDateTime>2012-11-05</DepDateTime>
        <OrigLocation LocationCode="BOM" />
        <DestinationLocation LocationCode="DEL" />
        <OrigDestinationOptions>
          <OrigDestinationOption>
            <FlightSegment DepDateTime="2012-11-05T08:35:00" ArrDateTime="2012-11-05T09:40:00" StopQuantity="0" FlightNumber="993" JourneyDuration="65" Ticket="eTicket">
              <DepAirport LocationCode="BOM" Terminal="" />
              <ArrAirport LocationCode="DEL" Terminal="" />
              <OperatingAirline CompanyShortName="GR" />
              <Equipment AirEquipType="A320" />
              <MarketingAirline CompanyShortName="GR" />
              <BookingClassAvail ResBookDesigCode="T" ResBookDesigQuantity="180" />
              <BookingClassAvail ResBookDesigCode="Y" ResBookDesigQuantity="180" />
            </FlightSegment>
          </OrigDestinationOption>
        </OrigDestinationOptions>
      </Information>
    </Availability> 
```

如果您在上面看到标签 BookingClassAvail 具有 ResBookDesigCode 和 ResBookDesigQuantity 的不同信息，因此需要逐行堆叠。

```
<BookingClassAvail ResBookDesigCode="T" ResBookDesigQuantity="180" />
<BookingClassAvail ResBookDesigCode="B" ResBookDesigQuantity="80" /> 
```

此外，如果其中的任何信息不同于它应该作为单独的航段出现。

还要注意，上面的一个标签为出港航班，其他信息为进港航班，需要单独保存，只需合并即可。

提前一百万谢谢。

* * *

肖恩，我使用了您建议的解决方案，但我遇到了一个错误，因为“无法从已加载的输入文档中删除空格。将输入文档提供为 XmlReader。”

XML:

```
 <Availability>
  <Success/>
  <Information xmlns="http://www.opentravel.org/OTA/2003/05">
    <DepDateTime>2012-10-27</DepDateTime>
    <OrigLocation LocationCode="DEL" />
    <DestinationLocation LocationCode="BOM" />
    <OrigDestinationOptions>
      <OrigDestinationOption>
        <FlightSegment DepDateTime="2012-10-27T12:35:00" ArrivalDateTime="2012-10-27T14:05:00" StopQuantity="0" FlightNumber="152" JourneyDuration="90" Ticket="eTicket">
          <DepAirport LocationCode="DEL" Terminal="" />
          <ArrivalAirport LocationCode="BOM" Terminal="" />
          <OperatingAirline CompanyShortName="A1" />
          <Equipment AirEquipType="A123" />
          <MarketingAirline CompanyShortName="A1" />
          <BookingClassAvail ResBookDesigCode="O" ResBookDesigQuantity="40" />
        </FlightSegment>
      </OrigDestinationOption>
      <OrigDestinationOption>
        <FlightSegment DepDateTime="2012-10-27T12:35:00" ArrivalDateTime="2012-10-27T14:05:00" StopQuantity="0" FlightNumber="152" JourneyDuration="90" Ticket="eTicket">
          <DepAirport LocationCode="DEL" Terminal="" />
          <ArrivalAirport LocationCode="BOM" Terminal="" />
          <OperatingAirline CompanyShortName="A1" />
          <Equipment AirEquipType="A123" />
          <MarketingAirline CompanyShortName="A1" />
          <BookingClassAvail ResBookDesigCode="T" ResBookDesigQuantity="180" />
        </FlightSegment>
      </OrigDestinationOption>
      <OrigDestinationOption>
        <FlightSegment DepDateTime="2012-10-27T19:10:00" ArrivalDateTime="2012-10-27T20:10:00" StopQuantity="0" FlightNumber="158" JourneyDuration="60" Ticket="eTicket">
          <DepAirport LocationCode="DEL" Terminal="" />
          <ArrivalAirport LocationCode="BOM" Terminal="" />
          <OperatingAirline CompanyShortName="A1" />
          <Equipment AirEquipType="A123" />
          <MarketingAirline CompanyShortName="A1" />
          <BookingClassAvail ResBookDesigCode="D" ResBookDesigQuantity="50" />
        </FlightSegment>
      </OrigDestinationOption>
    </OrigDestinationOptions>
  </Information>
  <Information xmlns="http://www.opentravel.org/OTA/2003/05">
    <DepDateTime>2012-11-05</DepDateTime>
    <OrigLocation LocationCode="BOM" />
    <DestinationLocation LocationCode="DEL" />
    <OrigDestinationOptions>
      <OrigDestinationOption>
        <FlightSegment DepDateTime="2012-11-05T15:00:00" ArrivalDateTime="2012-11-05T16:15:00" StopQuantity="0" FlightNumber="666" JourneyDuration="75" Ticket="eTicket">
          <DepAirport LocationCode="BOM" Terminal="" />
          <ArrivalAirport LocationCode="DEL" Terminal="" />
          <OperatingAirline CompanyShortName="M1" />
          <Equipment AirEquipType="A123" />
          <MarketingAirline CompanyShortName="M1" />
          <BookingClassAvail ResBookDesigCode="Y" ResBookDesigQuantity="180" />
        </FlightSegment>
      </OrigDestinationOption>
      <OrigDestinationOption>
        <FlightSegment DepDateTime="2012-11-05T15:00:00" ArrivalDateTime="2012-11-05T16:15:00" StopQuantity="0" FlightNumber="666" JourneyDuration="75" Ticket="eTicket">
          <DepAirport LocationCode="BOM" Terminal="" />
          <ArrivalAirport LocationCode="DEL" Terminal="" />
          <OperatingAirline CompanyShortName="M1" />
          <Equipment AirEquipType="A123" />
          <MarketingAirline CompanyShortName="M1" />
          <BookingClassAvail ResBookDesigCode="Y" ResBookDesigQuantity="180" />
        </FlightSegment>
      </OrigDestinationOption>
    </OrigDestinationOptions>
  </Information>
</Availability> 
```

XSLT 使用：

```
 <xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:ot="http://www.opentravel.org/OTA/2003/05"
  exclude-result-prefixes="xsl ot">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*" />

  <xsl:key name="kSegment" match="ot:OrigDestinationOption"
                           use="concat( ot:FlightSegment[1]/@DepDateTime,
                                          '|', generate-id(..))" />

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="ot:OrigDestinationOptions">
    <xsl:variable name="options" select="generate-id()" />
    <xsl:copy>
      <xsl:apply-templates select="
     ot:OrigDestinationOption[
       generate-id()=generate-id(key('kSegment',
        concat( ot:FlightSegment[1]/@DepDateTime,
                '|', $options))[1])]" mode="group" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="ot:OrigDestinationOption" mode="group">
    <xsl:variable name="group" select="key('kSegment',
        concat( ot:FlightSegment[1]/@DepDateTime,'|', generate-id(..)))" />
    <xsl:copy>
      <xsl:apply-templates select="*[not(self::ot:FlightSegment)]"/>
      <FlightSegment xmlns="http://www.opentravel.org/OTA/2003/05">
        <xsl:apply-templates
          select="ot:FlightSegment[1]/@*  |
               ot:FlightSegment[1]/*[not(self::ot:BookingClassAvail)] |
               $group/ot:FlightSegment/ot:BookingClassAvail" />
      </FlightSegment>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

面临的错误：

“无法从已加载的输入文档中删除空白。将输入文档提供为 XmlReader。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:19:19.840

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:ot="http://www.opentravel.org/OTA/2003/05"
  exclude-result-prefixes="xsl ot">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />

    <xsl:key name="kSegment" match="ot:OrigDestinationOption"
                             use="concat( ot:FlightSegment[1]/@DepDateTime,
                                          '|', generate-id(..))" />

<xsl:template match="@*|node()">
 <xsl:copy>
   <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="ot:OrigDestinationOptions">
 <xsl:variable name="options" select="generate-id()" />
 <xsl:copy>
   <xsl:apply-templates select="
     ot:OrigDestinationOption[
       generate-id()=generate-id(key('kSegment',
        concat( ot:FlightSegment[1]/@DepDateTime,
                '|', $options))[1])]" mode="group" />
 </xsl:copy>
</xsl:template>

<xsl:template match="ot:OrigDestinationOption" mode="group">
  <xsl:variable name="group" select="key('kSegment',
        concat( ot:FlightSegment[1]/@DepDateTime,'|', generate-id(..)))" /> 
 <xsl:copy>
   <xsl:apply-templates select="*[not(self::ot:FlightSegment)]"/>
   <FlightSegment xmlns="http://www.opentravel.org/OTA/2003/05">
     <xsl:apply-templates
       select="ot:FlightSegment[1]/@*  |
               ot:FlightSegment[1]/*[not(self::ot:BookingClassAvail)] |
               $group/ot:FlightSegment/ot:BookingClassAvail" />
   </FlightSegment>  
 </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

**...当应用于此输入时**（OP 提供的文档的缩减版）...

```
<Availability>
    <Information xmlns="http://www.opentravel.org/OTA/2003/05">
    <OrigDestinationOptions>
        <OrigDestinationOption>
            <FlightSegment DepDateTime="2012-10-27A12:35:00" Ticket="eTicket">
                <DepAirport LocationCode="DEL" Terminal=""/>
                <BookingClassAvail ResBookDesigCode="T" ResBookDesigQuantity="180"/>
            </FlightSegment>
        </OrigDestinationOption>
        <OrigDestinationOption>
            <FlightSegment DepDateTime="2012-10-27A12:35:00" Ticket="eTicket">
                <DepAirport LocationCode="DEL" Terminal=""/>
                <BookingClassAvail ResBookDesigCode="B" ResBookDesigQuantity="80"/>
            </FlightSegment>
        </OrigDestinationOption>
    </OrigDestinationOptions>
</Information>
<Information xmlns="http://www.opentravel.org/OTA/2003/05">
<OrigDestinationOptions>
    <OrigDestinationOption>
        <FlightSegment DepDateTime="2012-10-28A10:35:00" Ticket="eTicket">
            <DepAirport LocationCode="DEL" Terminal=""/>
            <BookingClassAvail ResBookDesigCode="B" ResBookDesigQuantity="80"/>
        </FlightSegment>
    </OrigDestinationOption>
</OrigDestinationOptions>
</Information>
</Availability> 
```

**...产量...**

```
<Availability>
  <Information xmlns="http://www.opentravel.org/OTA/2003/05">
    <OrigDestinationOptions>
      <OrigDestinationOption>
        <FlightSegment DepDateTime="2012-10-27A12:35:00" Ticket="eTicket">
          <DepAirport LocationCode="DEL" Terminal="" />
          <BookingClassAvail ResBookDesigCode="T" ResBookDesigQuantity="180" />
          <BookingClassAvail ResBookDesigCode="B" ResBookDesigQuantity="80" />
        </FlightSegment>
      </OrigDestinationOption>
    </OrigDestinationOptions>
  </Information>
  <Information xmlns="http://www.opentravel.org/OTA/2003/05">
    <OrigDestinationOptions>
      <OrigDestinationOption>
        <FlightSegment DepDateTime="2012-10-28A10:35:00" Ticket="eTicket">
          <DepAirport LocationCode="DEL" Terminal="" />
          <BookingClassAvail ResBookDesigCode="B" ResBookDesigQuantity="80" />
        </FlightSegment>
      </OrigDestinationOption>
    </OrigDestinationOptions>
  </Information>
</Availability> 
```

## 笔记

1.  分组键是父 OrigDestinationOptions 节点和航班起飞时间的乘积。
2.  假设每个 OrigDestinationOption 恰好包含一个 FlightSegment。
3.  假设当要合并同一组中的 FlightSegments 时，需要保留的组中所有成员的唯一不同信息是 BookingClassAvail 元素。
4.  这不是一个超通用的解决方案，但考虑到问题表述中缺乏定义，这是合理的。如果您需要更通用的解决方案，则需要更精确地了解输入结构和转换规则。

# python - 鼻子测试和文件上传问题

> ID：12892005
> 
> 赞同：6
> 
> 时间：2012-10-15T08:42:09.520
> 
> 标签：python, file-upload, pylons, nose, webtest

过去两天我一直在网上搜索，试图了解我在使用 WebTest 时遇到的问题。但是，我没有高兴，想知道这里是否有人可以提供帮助。

我正在使用鼻子在我正在开发的 Web 应用程序上运行测试，但似乎在使用包含文件上传字段的表单时遇到问题。当服务器正常运行时，表单和验证在服务器上工作，如果我从 shell 运行测试代码，它也可以工作。但是，每当我从鼻子运行测试代码时，它都无法接受提交的信息。

下面是一个表格示例：

```
<form method="POST" enctype="multipart/form-data" action="....">
    <input type="text" name="first_name" id="first_name">
    <input type="text" name="last_name" id="last_name">
    <input type="file" name="thumbnail" id="thumbnail">
    <input type="submit" value="Create" name="submit" id="submit">
</form> 
```

我的 WebTest 代码如下所示：

```
response = self.app.get( url(controller=self.controller, action='create') )
form = response.form                                                       

log.debug( form.submit_fields() )                                          

form.set('first_name', 'test1-1')                                          
form.set('last_name', 'test1-1')                                            
form.set('thumbnail', '')                                                 

log.debug( form.submit_fields() )                                          
response = form.submit() 
```

运行此命令时得到的响应是提交的值中缺少缩略图，即使表单验证器不需要该字段也是如此。当我比较 Nose 的代码输出并通过 shell 运行它时，我注意到 submit_fields 的输出不同

外壳输出：

```
[('first_name', ''),('last_name', '')] #First log call
[('first_name', 'test1-1'),('last_name', 'test1-1'), ('thumbnail', '')] #Second log call 
```

鼻子输出：

```
[(u'first_name', ''), (u'last_name', ''), (u'thumbnail', <File name="thumbnail" id="thumbnail">)] #First log call
[(u'first_name', 'test1-1'), (u'last_name', 'test1-1'),(u'thumbnail', <File name="thumbnail" id="thumbnail">)] #Second log call 
```

正如您所看到的，shell 没有缩略图元组，但将其设置为一个空字符串，它可以毫无问题地通过。但是，在 Nose 中已经有一个元组，它不会重置值。谁能帮我这个？使用 form.submit 方法时在 WebTest 中尝试多部分表单是否有问题？

在此先感谢您的帮助。

图书馆信息：Pylons-1.0.1 WebTest-1.4.0 WebOb-1.2.3 nose-1.2.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:58:03.803

您是否尝试过删除 log.debug `log.debug( form.submit_fields() )`？

众所周知，Nose 有时会与日志记录进行奇怪的交互，因为它会对输出进行一些内部重定向。

# rest - Spring MVC 3.1 中的基本身份验证

> ID：12892009
> 
> 赞同：2
> 
> 时间：2012-10-15T08:42:22.920
> 
> 标签：rest, spring-mvc, spring-security, basic-authentication, restful-authentication

我正在尝试使用 Spring MVC 3.1 和 REST API 开发示例应用程序。

在进入应用程序之前，有一个登录表单来验证用户。我想使用 REST API 使用用户在登录表单中提供的凭据（用户名和密码）进行基本身份验证。

我的问题是我不知道如何使用 REST API 进行基本身份验证。

我进行了很多搜索，但没有得到任何正确的教程，我可以从中解决我的错误。

请任何人指导我或告诉我任何好的文章？

现在我正在学习以下教程 [http://www.jpalace.org/docs/technotes/spring/rest-security.html](http://www.jpalace.org/docs/technotes/spring/rest-security.html)但得到空指针异常。

**RestClient.java**

```
import org.springframework.web.client.RestTemplate;

public class RestClient {

    RestTemplate restTemplate = new RestTemplate();
    static final String URL = "http://www.assembla.com/spaces/my_spaces";
    static final String username = "aaaaa";
    static final String password = "aaaaa";

    public RestClient() {

        BasicSecureSimpleClientHttpRequestFactory requestFactory = new BasicSecureSimpleClientHttpRequestFactory();
        requestFactory.setCredentialsProvider(new SimpleCredentialsProvider(
                new Credentials(username, password)));
        restTemplate.setRequestFactory(requestFactory);
    }

    public void exec() {
        System.out.println("restTemplate :::::::::::::::::: " + restTemplate);
        String response = restTemplate.getForObject(URL, String.class);
        System.out.println("Response:::::::::::::: " + response);
    }

} 
```

**BasicSecureSimpleClientHttpRequestFactory.java**

```
import java.net.HttpURLConnection;
  import sun.misc.BASE64Encoder;

    public class BasicSecureSimpleClientHttpRequestFactory extends
            SecureSimpleClientHttpRequestFactory {

        public BasicSecureSimpleClientHttpRequestFactory() {
        }

        protected void prepareSecureConnection(HttpURLConnection connection) {
            if (credentialsProvider == null) {
                return;
            }
            Credentials credentials = credentialsProvider.getCredentials(null);
            String token = credentials.getUsername() + ":"
                    + credentials.getPassword();
            BASE64Encoder enc = new sun.misc.BASE64Encoder();
            String encodedAuthorization = enc.encode(token.getBytes());
            connection.setRequestProperty("Authorization", "Basic "
                    + encodedAuthorization);
        }
    } 
```

**SecureSimpleClientHttpRequestFactory .java**

```
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.URI;

import org.springframework.http.HttpMethod;
import org.springframework.http.client.ClientHttpRequest;
import org.springframework.http.client.SimpleClientHttpRequestFactory;

abstract public class SecureSimpleClientHttpRequestFactory extends
        SimpleClientHttpRequestFactory {

    protected CredentialsProvider credentialsProvider;

    public SecureSimpleClientHttpRequestFactory() {
    }

    public CredentialsProvider getCredentialsProvider() {
        return credentialsProvider;
    }

    public void setCredentialsProvider(CredentialsProvider credentialsProvider) {
        this.credentialsProvider = credentialsProvider;
    }

    @Override
    public ClientHttpRequest createRequest(URI uri, HttpMethod httpMethod)
            throws IOException {
        HttpURLConnection connection = openConnection(uri.toURL(), null);
        prepareConnection(connection, httpMethod.name());
        prepareSecureConnection(connection);
        return new SecureSimpleClientHttpRequest(connection);
    }

    abstract protected void prepareSecureConnection(HttpURLConnection connection);

} 
```

**SecureSimpleClientHttpRequest .java**

```
import java.io.IOException;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URI;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.client.ClientHttpRequest;
import org.springframework.http.client.ClientHttpResponse;
public class SecureSimpleClientHttpRequest implements ClientHttpRequest {
    public SecureSimpleClientHttpRequest(HttpURLConnection connection) {
        // TODO Auto-generated constructor stub
    }
    @Override
    public HttpMethod getMethod() {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public URI getURI() {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public HttpHeaders getHeaders() {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public OutputStream getBody() throws IOException {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public ClientHttpResponse execute() throws IOException {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

**SimpleCredentialsProvider .java**

```
public class SimpleCredentialsProvider implements CredentialsProvider {

    private Credentials credentials;

    public SimpleCredentialsProvider(Credentials credentials) {
        super();
        this.credentials = credentials;
    }

    @Override
    public Credentials getCredentials(String str) {

        return credentials;
    }

} 
```

**凭据提供程序.java**

```
public interface CredentialsProvider {

    public Credentials getCredentials(String str);
} 
```

**凭据.java**

```
public class Credentials {

    private String username;
    private String password;

    public Credentials(String username, String password) {
        super();
        this.username = username;
        this.password = password;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

} 
```

我收到以下错误：

> 2012 年 10 月 16 日下午 12:56:04 org.apache.catalina.core.StandardWrapperValve 调用严重：servlet spring 的 Servlet.service() 在 org.springframework.web.client.RestTemplate$AcceptHeaderRequestCallback 处抛出异常 java.lang.NullPointerException。 doWithRequest(RestTemplate.java:530) at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:444) at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:409) at org.springframework .web.client.RestTemplate.getForObject(RestTemplate.java:207)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:58:04.537

一种方法是，如果您已经在使用 spring MVC，将它与 Spring Security 结合使用： http: [//static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity.html](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity.html)

由于它以各种方式支持基本身份验证：http: [//static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-form-and-basic](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-form-and-basic)

还可以查看这篇文章以了解将其与 REST 一起使用： [http ://www.baeldung.com/2011/11/20/basic-and-digest-authentication-for-a-restful-service- with-spring-security-3-1/](http://www.baeldung.com/2011/11/20/basic-and-digest-authentication-for-a-restful-service-with-spring-security-3-1/)

# qt - 从另一个线程 Qt 将小部件添加到主窗口

> ID：12892010
> 
> 赞同：-1
> 
> 时间：2012-10-15T08:42:23.233
> 
> 标签：qt, qt4

我刚刚开始在 Qt 中爬行。在我的 Ubuntu 机器上安装了 qt4 并尝试了一些基本示例。现在我正在尝试开发一个多线程应用程序。首先，我很困惑是使用 pthreads 还是 Qthreads。谁能告诉我哪个更好用。？

在我的应用程序中，我会将一些值从一个线程发送到另一个线程。第二个线程将在一个框中打印这些。我的问题是，除了主线程之外的线程是否可以将小部件添加到主窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:15:16.853

1.  使用`QThread`. 它在`pthreads`内部使用，但您不依赖`pthreads`并且可以（可能）在其他平台和操作系统上运行您的程序。
2.  您不能`QWidget`从工作线程创建实例。Qt 中只有一个 GUI 线程：运行`main()`. 只有这个线程可以创建与窗口管理器通信的任何东西（小部件和像素图）。

所以在线程之间，你只通信数据。GUI 线程自己管理图形用户界面，只接受来自工作线程的数据。查看 Qt 文档以了解如何实现多线程应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:22:09.703

您可以使用`QApplication`which 具有静态方法`topLevelWidgets()`，您可以在其中“找到”您的主要小部件之一。

像这样：

```
#include <QApplication>   

foreach(QWidget *widget, QApplication::topLevelWidgets())
{
    if(widget->accessibleName() == "YourMainWidgetName")
    {
        myMainTopWidget = widget;
    }
} 
```

当您将值从一个线程发送到另一个线程时，请使用信号和插槽。它们是线程安全的并且易于使用。

# ado.net - 超时更新 SQLDatareader 正在读取的记录（有时）

> ID：12892018
> 
> 赞同：1
> 
> 时间：2012-10-15T08:42:40.907
> 
> 标签：ado.net, timeout, sql-update, sqldatareader

**设置**

我有一个简单的 SQLDataReader 配置为带回给定表中的每一行。

我正在使用 SQLDataReader，因为我希望将内存占用保持在相对较低的水平。

对于检索到的每一行，我对一些数据进行了简单的更改，并将其用作我立即执行的更新的基础。

通过这种方式，我可以将一个简单的计算函数应用于 aa 表中的每条记录。

**它什么时候起作用？**

这在我的本地数据库上运行良好。它也适用于位于另一台服务器上的测试数据库。

**什么时候不起作用？**

如果我恢复我们的实时数据库的副本，则该过程无法正确执行，在第一次尝试执行更新时遇到超时。

**有什么不同吗？**

LiveBackup 和 Test 之间的唯一区别似乎是其中的记录数。Test 数据库有 4823 条记录，LiveBackup 有 10182 条记录。

此外，如果我在 SQLDataReader 中引入标准，使其从 LiveBackup 系统检索有限数量的记录（1000 条左右），它会立即开始工作

**理论**

似乎有可能引入了某种锁，但我真的看不出在哪里。

我很感激我可以简单地将记录分成 1000 个批次，但这仍然会让我不明白究竟是什么导致了我的问题。

**当我的 SQLDatareader 处理大量记录时，为什么会在更新（处理单个记录）时发生超时？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:21:25.487

SQL Server 页面大小为 8K，所以当您尝试读取一页时，锁定可能会发生变化？

Bruce Barker 在这里的回复有一些避免这种情况的提示：http: [//www.dotnet247.com/247reference/msgs/15/76467.aspx](http://www.dotnet247.com/247reference/msgs/15/76467.aspx)

但是正如您所指出的，批量获取要更新的行是向前迈出的一步:-)

就个人而言，如果您*必须*在本地获取数据以进行更新，我会批量填充老式的 DataSet/DataTable 并使用 DataAdapter。然后，您也可以在批量写入更新方面获得一些额外的效率：http: [//msdn.microsoft.com/en-us/library/aadf8fk2​​.aspx](http://msdn.microsoft.com/en-us/library/aadf8fk2.aspx)

您是否已经决定无法在 TSQL 中进行更新？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:47:30.223

听起来你在不同的环境之间有不同的隔离/行锁定级别，这就是为什么你会得到不同的行为（或者 SQL Server 选择不同的策略，行越多）。看起来好像带回表中每一行的查询正在将表锁定在您的实时数据库中。

可以设置行锁定行为：

*   [针对整个数据库](http://msdn.microsoft.com/en-us/library/ms188277.aspx)，
*   或者只是[在连接上](http://msdn.microsoft.com/en-us/library/ms173763.aspx)，
*   甚至在单个查询中，例如`SELECT * FROM MyTable WITH (NOLOCK)`

（因此请注意，这更像是一个 SQL Server 问题，而不是与 ADO.NET 相关的任何问题）

# python - 更改列的顺序

> ID：12892020
> 
> 赞同：0
> 
> 时间：2012-10-15T08:42:48.490
> 
> 标签：python, awk

我需要更改列的顺序（即顺序）

```
# cat customer.csv
customerno, firstname, lastname, sales
23242, john, doe, 2345.00
23253, jane, doe, 1234.00
23221, greg, johnson, 2345.00
23210, howard, gardner, 2345.00 
```

这有效，但第一列后没有逗号。

```
# awk  '{print $4, $3, $2, $1}' customer.csv
sales lastname, firstname, customerno,
2345.00 doe, john, 23242,
1234.00 doe, jane, 23253,
2345.00 johnson, greg, 23221,
2345.00 gardner, howard, 23210, 
```

如何删除最后的逗号？有没有一种优雅的方式来做到这一点？

```
# awk  '{print $4 ",", $3, $2, $1}' customer.csv
sales, lastname, firstname, customerno,
2345.00, doe, john, 23242,
1234.00, doe, jane, 23253,
2345.00, johnson, greg, 23221,
2345.00, gardner, howard, 23210, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:46:49.247

使用逗号 + 空格作为分隔符并在打印列时打印必要的逗号：

```
awk -F", " '{print $4",", $3",", $2",", $1}' filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:10:46.203

如果您想在 python 中执行此操作（您的标记会建议），请尝试以下操作：

```
f = open('customer.csv')
for line in f:
    line = line.strip().split(', ')
    line.reverse()
    print ', '.join(line) 
```

或者，如果要将结果输出到文件：

```
f = open('customer.csv')
out = ''
for line in f:
    line = line.strip().split(', ')
    line.reverse()
    out += ', '.join(line) + '\n'
f.close()

f = open('customer2.csv', 'w')
f.write(out)
f.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T11:27:18.940

```
awk '{sub(",",""); print $4", " $3, $2, $1}' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T14:08:39.167

你很接近，你只是忘了设置你的字段分隔符：

```
$ awk  'BEGIN{FS=OFS=", "} {print $4, $3, $2, $1}' customer.csv
sales, lastname, firstname, customerno
2345.00, doe, john, 23242
1234.00, doe, jane, 23253
2345.00, johnson, greg, 23221
2345.00, gardner, howard, 23210 
```

# asp.net - asp.net页面及其控制的初始化和加载到底是什么意思？

> ID：12892025
> 
> 赞同：0
> 
> 时间：2012-10-15T08:43:22.117
> 
> 标签：asp.net, .net

什么是*asp.net 页面生命周期*中控件的**初始化**和控件的**加载**。我的意思是这些阶段的内存分配是什么

 *即使页面尚未初始化，我们如何在 preinit 事件中设置属性。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:48:00.567

[http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=vs.100).aspx)

我不知道为什么内存分配对你来说如此无能为力，但我相信微软决定在 .Net 框架本身中管理它（你既不能真正看到也不能改变它）不仅不会像 C++ 那样产生问题，而且免费让我们不必担心，如果您的应用程序真的担心内存，那么我认为 .Net 对您来说不是一个好选择，顺便说一句，Java 也不是。*

# sass - 带有自定义模板选择器的 SASS

> ID：12892026
> 
> 赞同：1
> 
> 时间：2012-10-15T08:43:23.293
> 
> 标签：sass, compass-sass

我正在使用一个模板系统，我需要将 CSS 选择器设置为#%id%。然而，无论我如何试图欺骗 SASS 使用该选择器，我都无法让它工作。有人对我如何使这项工作有任何想法吗？

我总是收到这个错误。

`Invalid CSS after "#": expected id name, was "%id%"`

更新：

这是我尝试过的...

```
@mixin thing($id) {
  ##{$id} {
    color:red;
  }
}
@include thing(unquote('%id%')); 
```

...和...

```
$id:'%id%';
##{unquote($id)} {
  color:red;
} 
```

...最后...

```
#%id% {
  color:red;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:10:12.243

没有办法做到这一点。`#%id%`是一个无效的 CSS 选择器，Sass 无法解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:49:39.300

这有帮助吗？

```
@mixin thing($selector) {
  #{$selector} {
    color: red;
  }
}

@include thing("#someId"); 
```

# dns - 在域传播期间显示建设中的页面

> ID：12892037
> 
> 赞同：0
> 
> 时间：2012-10-15T08:44:09.513
> 
> 标签：dns, nameservers

我们昨天更换了我们的托管服务提供商，并且看到了[这个](http://eyaas.com)页面。有什么办法，我可以显示一个建设中的页面而不是这个。

顺便说一句，名称服务器编辑需要多长时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:52:00.313

如果您正在迁移您的主机（和域名服务器），让网站永不宕机的最佳方法是同时“准备”第二台（新）服务器（例如，在新服务器的索引中选择一个正在建设的页面）服务器（我认为现在只是一个 IP 地址），然后当 dns 迁移时（并且您正在显示正在建设的页面），您可以将所有站点移动到新服务器位置并重新上线）。

根据您使用的 ISP 的不同，dns 的编辑可能需要一段时间，根据我的经验（使用 www.switch.ch）需要 12 到 48 小时。不完全是一门科学；）

# google-chrome - 在浏览器上创建上下文菜单操作 onclick

> ID：12892041
> 
> 赞同：1
> 
> 时间：2012-10-15T08:44:19.723
> 
> 标签：google-chrome, google-chrome-extension, contextmenu

我已经陷入这个问题已经几个小时了，有没有人知道每次用户点击谷歌浏览器扩展时如何显示上下文菜单。我设法用我的 default_popup 显示菜单，但我发现我应该在上下文菜单上实现它。

这是图像：
![](../Images/cb6578ac38c9878a82572aa3c30a5a75.png)

我有以下代码

清单.json

```
{
    "name": "Hello Toolbar",
    "version": "1.0",
    "manifest_version": 2,
    "description": "A Toolbar that helps.",
    "browser_action": {
        "default_icon": "icon.png"
    },
    "background": {
        "scripts": ["background.js"]
    },
    "permissions": [
        "cookies",
        "http://*/*",
        "tabs",
        "contextMenus"
    ]
} 
```

背景.js

```
chrome.browserAction.onClicked.addListener( function(tab){
    chrome.contextMenus.create({"title": "Test parent item", "contexts": ['page']}); 
}); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:05:52.030

我认为您对[`chrome.contextMenus`](http://developer.chrome.com/extensions/contextMenus.html)API 的期望是错误的。它*永远*不能用于*打开*上下文菜单。它只能在满足某些自定义条件时告诉 Chrome 显示上下文菜单条目（请参阅该[`create`方法](http://developer.chrome.com/extensions/contextMenus.html#method-create)的文档以了解如何定义这些条件）。

在下面的截屏视频中，我展示了您的代码的预期行为。

![](../Images/c52d83d79b8ae8aa56809450675e67e9.png)

*   除非用户右键单击，否则不会显示上下文菜单。
*   单击浏览器操作按钮后，在打开页面内的上下文菜单时会显示上下文菜单条目。

如果您希望在单击时出现“弹出窗口”，请使用清单文件部分中的`"default_popup"`条目。`"browser_action"`然后，显示以下内容：

![](../Images/40e58bc0f881a52c5057b65f7800fe4b.png)

您可以使用 CSS 使弹出窗口看起来像“上下文菜单”。浏览器[操作文档](http://developer.chrome.com/extensions/browserAction.html)提供了[一些示例](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/common/extensions/docs/examples/api/browserAction/)。

# c# - 在调试时模拟丢失的对象

> ID：12892042
> 
> 赞同：2
> 
> 时间：2012-10-15T08:44:20.987
> 
> 标签：c#, visual-studio, debugging

我只是在 Visual Studio 调试器中搜索调试选项，我可以在其中模拟丢失的对象条件，即（this.XX == null）。我想知道有什么方法可以在调试会话中为字段“XX”分配一个空值？我想要的完全等同于取消分配给整个 XX 字段的内存（XX 内部包含其他几个数据结构）。

我所有的搜索结果都告诉我如何编辑，但我想知道如何取消分配？MSVC 有这样的选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T08:46:49.857

如果设置断点，您应该能够将鼠标悬停在`this.XX`将显示其当前值的属性上，然后您可以单击该值并将其替换为`null`.

或者，您可以像这样在代码中使用条件语句

```
#if DEBUG
    this.XX = null;
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:50:49.610

也考虑[立即窗口](https://stackoverflow.com/questions/794255/how-do-you-use-the-immediate-window-in-visual-studio)。

您可以在其中键入一些语句，并在代码暂停在断点时添加一些代码。

# ruby-on-rails - 禁用 MassAssignmentSecurity

> ID：12892043
> 
> 赞同：2
> 
> 时间：2012-10-15T08:44:22.297
> 
> 标签：ruby-on-rails, mass-assignment

有没有办法完全禁用 Rails3 中的 MassAssignmentSecurity 功能？

我们正忙于升级，需要暂时禁用它:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:20:13.033

在`config/application.rb`您可以将 设置`config.active_record.whitelist_attributes`为`false`因此您遇到相反的情况时，您必须禁止访问不应访问的属性。在底线，会做你想做的，...

# ruby - Ruby 中的发送方法

> ID：12892045
> 
> 赞同：44
> 
> 时间：2012-10-15T08:44:25.847
> 
> 标签：ruby

我刚刚阅读了`send`Ruby 中的内容，但在查看这段代码时我仍然感到困惑（它来自一个测验，但无论如何它已经过期了）

```
x = [1,2,3]
x.send :[]=,0,2
x[0] + x.[](1) + x.send(:[],2) 
```

我知道第一行为 x 分配了一个数组，然后我根本不明白做什么`:[] = ,0,2`，我不明白为什么需要 send 我不明白`x.[](1)`最后做了什么和 x.send(:[],2)线

我真的很困惑，我只是无法在网上找到这些信息。

我找到了[send 的作用，](https://stackoverflow.com/questions/3337285/what-does-send-do-in-ruby)但我仍然有点困惑，并且对整个代码感到困惑。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-15T08:48:32.013

首先，像`[]`(array index) 和`[]=`只是 Ruby 中的方法。`x`是一个`Array`，并且数组有一个`[]=`方法，它接受两个参数，一个索引和一个要设置的值。

Using`send`允许您使用任意参数将任意“消息”（方法调用）传递给对象。

`x.send :sort`例如，您可以调用将“排序”消息发送到数组。不过，排序不需要任何参数，所以我们不必向它传递任何额外的东西。

`x#[]=`，另一方面，接受两个参数。它的方法可以认为是这样的：

```
def []=(index, value)
  self.set_value_at_index(index, value)
end 
```

所以，我们可以用 调用它`send :[]=, 0, 2`，就像调用`x[0] = 2`. 整齐吧？

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-15T08:48:04.823

在 Ruby 中，`a[0] = 2`实际上是`a.[]=(0, 2)`.

知道了这一点，这就是你的第二行所做的——它`[]=`使用元编程调用带有两个参数的方法，正如你猜对的那样。

这与您的第三行相同：`a[0]`是 Ruby 中的语法糖 for `x.[](0)`.

以下代码与您的示例更简单等效：

```
x = [1, 2, 3]
x[0] = 2
x[0] + x[1] + x[2] 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-07-20T12:57:18.970

不用担心。在这些情况下，Ruby 可能有点棘手。让我们逐行检查代码：

```
x = [1,2,3]
x.send :[]=,0,2
x[0] + x.[](1) + x.send(:[],2) 
```

## 第一行

第一行对您来说很清楚：它将一个包含三个元素的数组分配给 x。仅此而已。

## 第二行

第二行调用传递符号的[`Object#send`](http://ruby-doc.org/core-2.0/Object.html#method-i-send)方法（请记住，所有以 ruby`x`​​ 开头的符号都是符号） 、(a ) 和(another )。 现在你只需要看看 send 方法做了什么（正如你所说的你已经完成了）：`:``:[]=``0``Fixnum``2``Fixnum`

> 调用由符号标识的方法，将任何指定的参数传递给它

这意味着它将调用由标识的方法并将其`:[]=`传递给它。现在让我们来看看方法。这个方法定义（如果你需要的话可以*重载）是：*`0``2`[`Array#[]=`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-5B-5D-3D)

 *```
class Array
    # ...
    def []=(a, b)
        # ...
    end
end 
```

如果你问我，这个方法是由`send`as调用的，`x.[]=(0, 2)`这很丑陋。这就是为什么 Ruby 定义了一个语法糖版本：`x[0] = 2`一般来说：

```
x.[]=(a, b)  -->  x[a] = b 
```

在这种`Array`情况下，我们还有以下内容：

```
x.[](a)  -->  x[a] 
```

在这两种情况下，您都可以在特定上下文中自由调用任何对您有意义的版本。

## 第三行

现在是第三行和最后一行：

```
x[0] + x.[](1) + x.send(:[],2) 
```

事情变得非常棘手。我们把它分为：

1.  `x[0]`
2.  `x.[](1)`
3.  `x.send(:[], 2)`

第一个非常简单。它返回数组的第一个元素。

第二个是我们之前看到的语法糖，基本上可以*转换*成`x[1]`返回数组的第二个元素。

第三个用于`Object#send`调用`[]`传递`2`给它的方法。这意味着它调用`x.[](2)`which意味着`x[2]`。

## 结论

编码

```
x = [1,2,3]
x.send :[]=,0,2
x[0] + x.[](1) + x.send(:[],2) 
```

可以使用以下方法进行转换：

```
x.send(:[]=, a, b)  -->  x.[]=(a, b)
x.send(:[], a)  -->  x.[](a)
x.[]=(a, b)  -->  x[a] = b
x.[](a)  -->  x[a] 
```

至：

```
x = [1,2,3]
x[0] = 2
x[0] + x[1] + x[2] 
```

可以简化为：

```
2 + 2 + 3 
```

这导致：

```
7 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-15T08:48:32.387

`send`是一种在 ruby​​ 中实现反射调用的方法。因此这一行：

```
x.send :[]=,0,2 
```

相当于：

```
x[0] = 2 
```

您是这样阅读的：方法的名称是符号（在您的情况下`[]=`），然后传入参数 - 0 和 2。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-20T12:18:32.050

x[0]+x[1]+x[2]=2+2+3=7 我想这一定是答案*

# iphone - iOS 5 横向应用程序。完美运行。在 iOS 6 设备上，它锁定为纵向

> ID：12892054
> 
> 赞同：0
> 
> 时间：2012-10-15T08:44:51.787
> 
> 标签：iphone, objective-c, ios

我有一个 100% 处于横向模式的应用程序，在 iOS5 设备上它看起来就是这样。当我在 iOS6 上安装它时，它处于纵向模式。

在我的 info.plist 我设置

支持的界面方向 item 0：横向（右主页按钮） item 1：横向（左主页按钮）

我已经阅读了文档并在我的应用程序委托中添加了 2 个新方法，但它没有任何区别。我是否需要提前将这两种​​方法添加到应用程序中的每个根视图（显示在每个选项卡上的视图）？

```
- (BOOL)shouldAutorotate 
{
return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
return YES;
} 
```

在项目中的每个 XIB 中，我都设置了方向：景观

任何人都可以建议我在实施时错过了什么？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:06:21.797

正如文档中所述[`supportedInterfaceOrientations`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW120)，它应该返回一个位掩码，指定支持哪些方向。不是布尔值。

因此，您应该返回支持的界面方向，例如： `UIInterfaceOrientationMaskAll`, `UIInterfaceOrientationMaskAllButUpsideDown`, ....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:31:01.213

supportedInterfaceOrientations 函数返回当前控制器支持的 interfaceOrientations。如果您的应用程序本身不支持它们，即使返回它们，该控制器也不会。

解决方案：将所有支持的方向添加到项目设置中的摘要选项卡。然后控制器可以在指定的方向中单独选择支持的方向。

# .net - WCF IParameterInspector + IErrorHandler

> ID：12892055
> 
> 赞同：2
> 
> 时间：2012-10-15T08:44:52.613
> 
> 标签：.net, wcf, error-handling, wcf-4, wcf-extensions

如果我同时拥有[`IParameterInspector`](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iparameterinspector.aspx)并附[`IErrorHandler`](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.aspx)加到一个服务，我可以确定[`IErrorHandler.HandleError()`](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.handleerror.aspx)会在被调用的同一个线程上[`IParameterInspector.BeforeCall()`](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iparameterinspector.beforecall.aspx)被调用吗？

我需要这个，因为万一发生错误[`IParameterInspector.AfterCall()`](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iparameterinspector.aftercall.aspx)，永远不会被调用，并且没有办法（据我所知）我可以获得在`BeforeCall()`. 所以我希望通过在我的接口实现中有一个字段来克服这个`ThreadStatic`问题:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:11:43.410

您可能想要使用实例上下文扩展。

```
InstanceContextExtension: IExtension<InstanceContext>   
OperationContext.Current.InstanceContext.Extensions.Find<InstanceContextExtension>() 
```

可以在`BeforeCall`方法中添加实例上下文扩展。然后可以在`AfterCall`方法中检索并使用实例上下文扩展。任何特定于操作的数据都可以放在这个扩展对象中，而不是引入线程亲和性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:42:12.780

您可以让实现 IErrorHandler 的类也实现 IParameterInspector。然后，您可以将对相关状态和输入参数的引用存储为类变量。然后可以从 HandleError 方法中访问它们。我目前正在使用它来记录输入参数和发生未处理异常时的原始消息。

# mysql - rake db:migrate 的问题

> ID：12892056
> 
> 赞同：0
> 
> 时间：2012-10-15T08:44:59.653
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

大家好，我是 ruby​​ on rails 的新手，所以我用 rake db:migrate 遇到了这个问题，所以我使用 --trace up 来理解它，但我不知道该怎么做。我把我的迁移 .rb 文件放在下面。

```
 $ rake db:migrate --trace
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:migrate
==  AlterUsers: migrating =====================================================
-- rename_table("users", "admin_users")
rake aborted!
An error has occurred, all later migrations canceled:

Mysql2::Error: Table 'admin_users' already exists: RENAME TABLE `users` TO `admin_users`
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:245:in `query'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:245:in `execute'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `log'
/Library/Ruby/Gems/1.8/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:245:in `execute'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/connection_adapters/mysql2_adapter.rb:211:in `execute'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:457:in `rename_table'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:466:in `send'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:466:in `method_missing'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:438:in `say_with_time'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/benchmark.rb:293:in `measure'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:438:in `say_with_time'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:458:in `method_missing'
/Users/seydoukonate/Sites/simple_cms/db/migrate/20121015072622_alter_users.rb:3:in `up'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:410:in `send'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:410:in `migrate'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/benchmark.rb:293:in `measure'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:410:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:123:in `with_connection'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:389:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:528:in `__send__'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:528:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:720:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:777:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:777:in `ddl_transaction'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:719:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:700:in `each'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:700:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:570:in `up'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/migration.rb:551:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:153
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `execute'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `invoke_with_call_chain'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `run'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/bin/rake:33
/usr/bin/rake:23:in `load'
/usr/bin/rake:23
Tasks: TOP => db:migrate 
```

这是我的 _create_user.rb 文件中的内容。

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|

      t.string "first_name", :limit => 25
      t.string "last_name", :limit => 50
      t.string "email", :default => "", :null => false
      t.string "password", :limit => 40
      t.timestamps
    end
  end
  def self.down
    drop_table :users
  end
end 
```

这是 alter_user.rb 文件中的内容

```
class AlterUsers < ActiveRecord::Migration
  def up
    rename_table("users", "admin_users")
    add_column("admin_users", "username", :string, :limit => 25)
    change_column("admin_users", "email", :string, :limit => 100)
    rename_column("admin_users", "password", "hashed_password")
    add_column("admin_users", "salt", :string, :limit => 40)
    puts "*** About to add and index ***"
    add_index("admin_users", "username")
  end

  def down
    remove_index("admin_users", "username")
    remove_column("admin_users", "salt")
    rename_column("admin_users", "hashed_apssword", "password")
    change_column("admin_users", "email", :string, :default => "", :null => false)
    remove_column("admin_users", "username")
    rename_table("admin_users", "users")
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:50:20.740

错误信息很清楚

```
Mysql2::Error: Table 'admin_users' already exists: RENAME TABLE `users` TO `admin_users` 
```

这意味着该表已经存在。可能是以前的迁移已经创建了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:53:08.377

您可能已经安装了设计 gem，它已经创建了一个名为`admin_users`.

您要么需要`admin_users`在运行之前删除表（和相应的迁移文件）`alter`；或者您可以重命名`users`为`admin_users`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T00:25:55.827

对于本教程，我的意思是（Ruby on Rails 3 Essential Training）如果您遇到上述问题，请尝试执行

```
rake db:migrate VERSION=0 
```

并运行

```
rake db:migrate 
```

# php - 如何在php中将时间表插入mysql

> ID：12892057
> 
> 赞同：-4
> 
> 时间：2012-10-15T08:45:11.943
> 
> 标签：php, mysql

我想将学校时间表/课程表存储到 mysql 数据库中。需要帮助理解。这是php表单

```
Period No.  Monday      Tuesday     Wednesday   Thursday    Friday      Saturday

1           Subject     Subject     Subject     Subject     Subject     Subject
            Classrrom   Classroom   Classroom   Classroom   Classroom   Classroom

2           Subject     Subject     Subject     Subject     Subject     Subject
            Classrrom   Classroom   Classroom   Classroom   Classroom   Classroom

3           Subject     Subject     Subject     Subject     Subject     Subject
            Classrrom   Classroom   Classroom   Classroom   Classroom   Classroom

4           Subject     Subject     Subject     Subject     Subject     Subject
            Classrrom   Classroom   Classroom   Classroom   Classroom   Classroom

5           Subject     Subject     Subject     Subject     Subject     Subject
            Classrrom   Classroom   Classroom   Classroom   Classroom   Classroom

6           Subject     Subject     Subject     Subject     Subject     
            Classrrom   Classroom   Classroom   Classroom   Classroom   

7           Subject     Subject     Subject     Subject     Subject     
            Classrrom   Classroom   Classroom   Classroom   Classroom                                                                                
8           Subject     Subject     Subject     Subject     Subject     
            Classrrom   Classroom   Classroom   Classroom   Classroom 
```

如何将此表格插入数据库或此类学校时间表的任何其他解决方案。每天需要不同的科目和教室，总时间是 8\. 请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:50:10.907

### 您可以按照您要求的方式进行操作。

```
CREATE TABLE timetable
    (`Period` int, `Monday` varchar(17), `Tuesday` varchar(17), `Wednesday` varchar(17), `Thursday` varchar(17), `Friday` varchar(17), `Saturday` varchar(17))
;

INSERT INTO timetable
    (`Period`, `Monday`, `Tuesday`, `Wednesday`, `Thursday`, `Friday`, `Saturday`)
VALUES
    (1, 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom'),
    (2, 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom'),
    (3, 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom'),
    (4, 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom'),
    (5, 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom'),
    (6, 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom'),
    (7, 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom'),
    (8, 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom', 'Subject-Classroom')
; 
```

### 你有这样的输出：

```
+--------+-------------------+-------------------+-------------------+-------------------+-------------------+-------------------+
| PERIOD |            MONDAY |           TUESDAY |         WEDNESDAY |          THURSDAY |            FRIDAY |          SATURDAY |
+--------+-------------------+-------------------+-------------------+-------------------+-------------------+-------------------+
|      1 | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom |
|      2 | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom |
|      3 | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom |
|      4 | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom |
|      5 | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom |
|      6 | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom |
|      7 | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom |
|      8 | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom | Subject-Classroom |
+--------+-------------------+-------------------+-------------------+-------------------+-------------------+-------------------+ 
```

现在使用**PHP**，你可以这样解析它：

```
<?php
     $class = explode("-", $class);
     // Subject: $class[0];
     // Classroom: $class[1];
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:56:14.193

1.  您应该创建一个包含 4 个字段的数据库表：日期、期间、主题和教室。
2.  创建表单，为周一第一节课命名元素，例如“1-1-subject”，为周三第 5 节课命名“3-5-subject”。
3.  遍历 post 值并将它们保存到 db，您可以使用 PHP 的 explode 函数轻松地将字段名称分开。

# batch-file - 在一批中运行多个任务不起作用

> ID：12892058
> 
> 赞同：0
> 
> 时间：2012-10-15T08:45:14.667
> 
> 标签：batch-file

我有以下 bat 文件，它分析大于 10000kb 的文件大小（好吧，这并不大，但它目前正在测试东西。然后我希望它提示一个消息框并打开`P:\bogfiles`目录，但我的批处理不这样做，它只想完成一项移动文件的任务。

当找到大于 X（或在我们的测试示例中为 10000kb）的文件时，如何让多个函数相互连接运行？

```
pushd c:\Myfolder
md P:\bigfiles2
for %%a in (*.*) do if %%~za gtr 10000 move %%a P:\bigfiles2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:43:26.893

就像巴厘岛 C 说的那样，您的问题并未反映您的代码。您声明您的脚本除了移动文件之外不想执行任何其他任务。您的代码似乎没有任何其他任务要完成。

如果您询问如何获取它以便可以使其执行多个命令，则有几种方法。您可以将它们放在一个块中（这是最常用的方法），也可以滥用与号 (&)。例如

```
pushd c:\Myfolder
md P:\bigfiles2
for %%a in (*.*) do if %%~za gtr 10000 (
move %%a P:\bigfiles2
msg * "Is this what you were referring to as a a message box?"
%SystemRoot%\explorer.exe "P:\bogfiles"
) 
```

或者

```
pushd c:\Myfolder
md P:\bigfiles2
for %%a in (*.*) do if %%~za gtr 10000 move %%a P:\bigfiles2 & msg * "This is very messy code." & %SystemRoot%\explorer.exe "P:\bogfiles" 
```

底部的示例几乎**不**应该被使用，因为它会使您的代码对大多数其他程序员不可读。

# actionscript-3 - 已部署（非调试）移动 Flex 应用程序中的跟踪（或任何其他形式的日志）

> ID：12892060
> 
> 赞同：1
> 
> 时间：2012-10-15T08:45:18.037
> 
> 标签：actionscript-3, apache-flex, logging, mobile, flex4

我正在寻找一种在移动 Flex 应用程序中显示日志消息的方法。我知道跟踪在非调试版本中不可用，那么我有哪些替代方案？

我想做的是在组件中显示此消息，因为有时我会遇到一些与我的服务器连接相关的奇怪错误，这些错误不会发生在我的办公室中。只要知道连接发生了什么就可以帮助我调试这个问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:48:33.263

试试这个日志库 [AS3 Commons Logging](http://www.as3commons.org/as3-commons-logging/)

它提供了许多日志记录目标，而不仅仅是跟踪目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:13:03.467

对于类似的问题，我使用了 Monster Debugger

[看看这里](http://demonsterdebugger.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:48:46.023

试试`ExternalInterface.call("console.log", "My message")`。它将“我的消息”输出到浏览器控制台。它会满足你的需求吗？

# windows - `inet_ntop()` 的 Windows 套接字编程链接错误

> ID：12892063
> 
> 赞同：1
> 
> 时间：2012-10-15T08:45:40.190
> 
> 标签：windows, sockets, mingw, winsock, inet-ntop

> **可能重复：**
> [在 Windows XP 中是否有替代 inet_ntop / InetNtop 的方法？](https://stackoverflow.com/questions/1561469/is-there-an-alternative-to-inet-ntop-inetntop-in-windows-xp)

我是套接字编程的新手。我写了我的第一个代码，它给出了一个链接器错误。我搜索了这个问题，但找不到解决方案。所以，我正在尝试堆栈交换。（第一次:-)）

这是代码，我使用的是 Windows XP

```
#ifndef _WIN32_WINNT
#define _WIN32_WINNT 0x0501
#endif

#include<stdio.h>
#include<string.h>
#include<winsock2.h>
#include<Ws2tcpip.h>

#ifndef INET6_ADDRSTRLEN
#define INET6_ADDRSTRLEN 46
#endif

int main(int argc, char *argv[])
{
    WSADATA wsaData;

if(WSAStartup(MAKEWORD(1,1), &wsaData) != 0){
    fprintf(stderr, "WSAStartup failed.\n");
    return 1;
}

int status;
struct addrinfo hints;
struct addrinfo *res, *p;
char ipstr[INET6_ADDRSTRLEN];

if(argc != 2){
    fprintf(stderr,"usage: Shows IP address of hostname.\n");
    return 1;
}

memset(&hints, 0 , sizeof hints);

hints.ai_family = AF_UNSPEC;
hints.ai_socktype = SOCK_STREAM;

if((status = getaddrinfo(argv[1], NULL, &hints, &res)) != 0){
    fprintf(stderr, "getaddrinfo : %s \n", gai_strerror(status));
    return 2;
}

printf("IP addresses for %s:\n\n", argv[1]);

for(p = res; p != NULL; p = p->ai_next){
    void *addr;
    char *ipver;

    if(p->ai_family == AF_INET){ //IPv4
        struct sockaddr_in *ipv4 = (struct sockaddr_in *)p->ai_addr;
        addr = &(ipv4->sin_addr);
        ipver = "IPv4";
    }
    else{ //IPv6
        struct sockaddr_in6 *ipv6 = (struct sockaddr_in6 *)p->ai_addr;
        addr = &(ipv6->sin6_addr);
        ipver = "IPv6";
    }

    inet_ntop(p->ai_family, addr, ipstr, sizeof ipstr);
    printf("%s : %s\n",ipver, ipstr);
}

freeaddrinfo(res);

WSACleanup();

return 0;
} 
```

我正在使用以下命令编译它：

```
gcc file.c "C:\Program Files\CodeBlocks\MinGW\lib\ws2_32.a" -o final.exe 
```

它给出以下错误：

```
(.text+0x21d): undefined reference to 'inet_ntop'
collect2: ld returned 1 exit status 
```

是的，我正在使用 beej 指南来学习套接字编程。如果您想向我推荐其他一些不错的教程或书籍，请继续。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:51:41.390

如果`getaddrinfo()`有效，`getnameinfo()`可能也会有效。您可以使用它来将您的`struct sockaddr`背部转换为数字表示。

# amazon-ec2 - 奇怪的内存已满错误 - AWS

> ID：12892065
> 
> 赞同：0
> 
> 时间：2012-10-15T08:45:50.953
> 
> 标签：amazon-ec2, amazon-web-services, installation, easy-install

```
df -ih
 Filesystem     Inodes IUsed IFree IUse% Mounted on
 /dev/xvda1       512K   45K  468K    9% /
 udev             205K   389  205K    1% /dev
 tmpfs            207K   271  207K    1% /run
 none             207K     4  207K    1% /run/lock
 none             207K     1  207K    1% /run/shm
 overflow         207K    14  207K    1% /tmp
 /dev/xvdf        1.9M   354  1.9M    1% /db
df -ah
 Filesystem      Size  Used Avail Use% Mounted on
 /dev/xvda1      8.0G  3.6G  4.0G  48% /
 proc               0     0     0    - /proc
 sysfs              0     0     0    - /sys
 none               0     0     0    - /sys/fs/fuse/connections
 none               0     0     0    - /sys/kernel/debug
 none               0     0     0    - /sys/kernel/security
 udev            819M  8.0K  819M   1% /dev
 devpts             0     0     0    - /dev/pts
 tmpfs           331M  184K  331M   1% /run
 none            5.0M     0  5.0M   0% /run/lock
 none            827M     0  827M   0% /run/shm
 overflow        1.0M     0  1.0M   0% /tmp
 /dev/xvdf        30G   14G   16G  48% /db
 /db/etc/mysql    30G   14G   16G  48% /etc/mysql
 /db/lib/mysql    30G   14G   16G  48% /var/lib/mysql
 /db/log/mysql    30G   14G   16G  48% /var/log/mysql
sudo easy_install nltk
 Searching for nltk
 Reading http://pypi.python.org/simple/nltk/
 Reading http://nltk.org/
 Reading http://www.nltk.org/
 Reading http://www.nltk.org/download
 Reading http://nltk.sf.net/
 Best match: nltk 2.0.3
 Downloading http://pypi.python.org/packages/source/n/nltk/nltk-2.0.3.zip#md5=88bb51626ceb7eee58be64b73d43cafc
 error: No space left on device 
```

问题出在哪里？它显示我在所有分区上都有空间。它表明我的 inode 也未满。我无法安装。我也尝试过 sudo apt-get autoremove 。万分感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:47:04.067

正如巴特弗里德里希斯在评论中回答的那样，

/tmp 是问题所在。因此，下载了安装 zip 文件夹，而不是从 /tmp 安装它。

# javascript - KnockoutJS：在 Select 中的每个选项上调用的单击事件

> ID：12892066
> 
> 赞同：13
> 
> 时间：2012-10-15T08:46:01.360
> 
> 标签：javascript, knockout.js

我希望 Knockout 在用户单击 SELECT 元素中的选项时调用事件。

这是我的 JavaScript：

```
function ReservationsViewModel() {
    this.availableMeals = [
        { mealName: "Standard (sandwich)", price: 0 },
        { mealName: "Premium (lobster)", price: 34.95 },
        { mealName: "Ultimate (whole zebra)", price: 290 }
    ];
}

ko.applyBindings(new ReservationsViewModel()); 
```

这是我的 HTML：

```
<select data-bind="foreach: availableMeals">
    <option data-bind="text: mealName, click: alert('hello')" />
</select> 
```

但是当我运行它时，即使没有实际单击任何选项，应用程序也会显示三次“hello”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-15T10:08:46.140

您应该使用`change`binding 而不是`click`和`optionsText`binding 而不是`option`tag 并使用`function`in `change`binding 而不是仅仅调用`alert`：

```
<select data-bind="options: availableMeals, optionsText: 'mealName', value: selectedMeal, event: {change: onChange}">
</select>

function Meal(name, price){
    var self = this;

    self.mealName = name;
    self.price =  price;    
}

function ReservationsViewModel() {
    var self = this;
    self.availableMeals = ko.observableArray(
        [new Meal("Standard (sandwich)", 0),
         new Meal("Premium (lobster)", 34.95),
         new Meal("Ultimate (whole zebra)", 290)]);

    self.selectedMeal = ko.observable(self.availableMeals()[0]);

    self.onChange = function() {
        alert("Hello");
    };
}

ko.applyBindings(new ReservationsViewModel()); 
```

这是工作示例：http: [//jsfiddle.net/Q8QLX/](http://jsfiddle.net/Q8QLX/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T10:55:01.927

“警报”应该嵌入到一个函数中：

```
<select data-bind="foreach: availableMeals, event: {change: function () {   alert('hello'); } }">
    <option data-bind="text: mealName " />
</select> 
```

# java - 如何将属性注入 Aspect 日志记录类？

> ID：12892067
> 
> 赞同：1
> 
> 时间：2012-10-15T08:46:27.877
> 
> 标签：java, spring, dependency-injection, aspectj

我在将属性注入`LoggingAspect`类时遇到问题。成像我有一个 AspectJ 类：

```
@Aspect
public class LoggingAspect {
   private IBoc theBo;

   /** getter and setter **/
} 
```

这是中国银行：

```
public interface IBoc {
}

public class BocImpl implements IBoc {
} 
```

和 BOC 的 Spring 配置：

```
<beans ...>
   <aop:aspectj-autoproxy/>

   <bean id="theBoc" class="org.huahsin.BocImpl"/>
</beans> 
```

在 applicationContext.xml 文件中，我以这种方式配置 AspectJ：

```
<beans...>
   <bean id="theLog" class="org.huahsin.LoggingAspect">
      <property name="theBo" ref="theBoc"/>
   </bean>
</beans> 
```

我怎么能`theBo`在`LoggingAspect`课堂上注射？

* * *

**2012 年 10 月 17 日更新**

我在这里找到了一些线索。如果我删除，类`<aop:aspectj-autoproxy>`中的成员变量将不会为空。如果我有该代码，则 theBo 将为空。`theBo``LoggingAspect`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:40:27.793

通常`Spring`负责创建和配置 bean。`AspectJ`然而，方面是由`AspectJ`运行时创建的。您需要`Spring`配置`AspectJ`已创建的方面。对于单例方面的最常见情况，例如`LoggingAspect`上面的方面，`AspectJ`定义了一个`aspectOf()`返回方面实例的方法。您可以告诉`Spring`将该`aspectOf()`方法用作获取方面实例的工厂方法。

例如：

```
 <beans>      
      <bean name="loggingAspect"
        class="org.huahsin.LoggingAspect"
        factory-method="aspectOf">
        <property name="theBo" ref="theBoc"/>
      </bean>

      <bean id="theBoc" class="org.huahsin.BocImpl"/>
  </beans> 
```

**更新：**

在你的类中定义工厂方法：

```
@Aspect
public class LoggingAspect {

    private IBoc iBoc;

    private static LoggingAspect instance = new LoggingAspect();

    public static LoggingAspect aspectOf() {
        return instance;
    }

    public void setiBoc(IBoc iBoc) {
        this.iBoc = iBoc;
    }
} 
```

# java - WebServiceTransportException：未找到 [404]

> ID：12892068
> 
> 赞同：8
> 
> 时间：2012-10-15T08:46:30.263
> 
> 标签：java, spring, service, web, jaxb

我目前正在使用 jaxb 实现一个 Spring Web 服务。但是当我尝试使用创建的 Web 服务`WebServiceTransportException: Not Found [404]`时遇到错误。我确实尝试搜索网络，但无法找到可能的根本原因。下面我展示了我的源代码。

应用程序上下文.xml

```
<bean
    class="org.springframework.ws.server.endpoint.adapter.GenericMarshallingMethodEndpointAdapter">
    <constructor-arg ref="marshaller" />
</bean>

<bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
        <list>
            <value>com.ph.domain.EightBallRequest</value>
            <value>com.ph.domain.EightBallResponse</value>
        </list>
    </property>
</bean>

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/jsp/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

<bean id="simpleUrlHandlerMapping"
    class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"
    lazy-init="true">
    <property name="mappings">
        <props>
            <prop key="/test.asp">LandingController</prop>
        </props>
    </property>
</bean>     

<bean name="LandingController" class="com.ph.controller.LandingController">
    <property name="stub" ref="eightBallClient"/>
</bean> 
```

网络服务客户端

```
public class EightBallClient extends WebServiceGatewaySupport {

private Resource request;

public void setRequest(Resource request) {
    this.request = request;
}

public String AskQuestion(String question) throws IOException {
    String responseString = null;

    EightBallRequest request = new EightBallRequest();
    request.setQuestion(question);

    EightBallResponse response = new EightBallResponse();

    response = (EightBallResponse) getWebServiceTemplate()
            .marshalSendAndReceive(request);
    responseString = response.getAnswer().toString();
    return responseString;
}
} 
```

我的网络服务的定义

```
<bean id="schema" class="org.springframework.xml.xsd.SimpleXsdSchema">
    <property name="xsd" value="/WEB-INF/eightball.xsd" />
</bean> 
```

下面是错误堆栈：

```
SEVERE: Servlet.service() for servlet dispatcher threw exception
org.springframework.ws.client.WebServiceTransportException: Not Found [404]
    at org.springframework.ws.client.core.WebServiceTemplate.handleError(WebServiceTemplate.java:626)
    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:550)
    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:501)
    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:350)
    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:344)
    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:336) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:39:34.217

这是我解决此错误的方法：

1.  声明一个 SoapActionCallback。
2.  在 marshalSendAndReceive() 中使用此回调，如下所示。

    ```
    final EightBallResponse response = new EightBallResponse();
    final SoapActionCallback soapActionCallback = new SoapActionCallback("<the operation name as defined in the WSDL>");
    response = (EightBallResponse) getWebServiceTemplate()
        .marshalSendAndReceive(request, soapActionCallback );
    responseString = response.getAnswer().toString(); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T14:12:27.237

就我而言，解决方案是注意 URI 中的大小写。我把它全小写了，但是 web 服务需要一个 CamelCase 动作名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T21:27:09.790

也许你的URI：

> ```
>  <bean name="webserviceTemplate"
>  class="org.springframework.ws.client.core.WebServiceTemplate">
>      <property name="defaultUri" value="http://localhost:8080/mywebservice" /> 
> ```

检查这个值：

> “http://mylocal:8080/mywebservice”

# c# - 我可以阻止 ExcelDNA 处理异常的发生吗？

> ID：12892084
> 
> 赞同：1
> 
> 时间：2012-10-15T08:47:50.557
> 
> 标签：c#, error-handling, excel-dna

在构建我的应用程序时，我经常喜欢将 SharpDevelop 中的“处理异常时暂停”选项设置为 true（我知道 Visual Studio 有类似的标志）。

然而，似乎 ExcelDNA 在 Excel 启动时抛出了很多异常（这些异常被捕获，因此在生产中没有问题）。

这意味着每次我想有效地调试我的程序时，我都需要先关闭这个标志，然后在 excel 完成启动后再次打开它。

有没有办法解决？

例如，第一个例外是：

> System.IO.FileNotFoundException：无法加载文件或程序集“ExcelDna.Loader”或其依赖项之一。该系统找不到指定的文件。在静态 RuntimeAssembly System.Reflection.RuntimeAssembly.nLoad(System.Reflection.AssemblyName fileName, System.String codeBase, System.Security.Policy.Evidence assemblySecurity, System.Reflection.RuntimeAssembly locationHint, System.Threading.StackCrawlMark stackMark, System.Boolean throwOnFileNotFound , System.Boolean for Introspection, System.Boolean suppressSecurityChecks) 在静态 RuntimeAssembly System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(System.Reflection.AssemblyName assemblyRef, System.Security.Policy.Evidence assemblySecurity, System.Threading.StackCrawlMark stackMark, System.Boolean for Introspection,系统。

# c# - 获取字符串的一部分

> ID：12892088
> 
> 赞同：0
> 
> 时间：2012-10-15T08:48:03.153
> 
> 标签：c#, .net, string, visual-studio-2010, c++-cli

我有类似的东西：

```
 String^  s2="22/12/2012"; 
```

我怎样才能得到另一个年份的一部分`String`？上一个虚拟示例的年份部分是 2012 年。

如果你能给出答案，我对 C# 很好，这是相应的代码：

```
string  s2="22/12/2012"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:10:19.257

```
string [] split = Regex.Split(s2, @"/");
string year = split[2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:08:47.503

这是你想要的吗？

`string theYear = DateTime.Parse(s2).Year.ToString();`

当然，您应该检查它是否是这样的有效字符串：

```
 DateTime theDate;
            string theYear;
            if (DateTime.TryParse(s2, out theDate))
            {
                theYear = theDate.Year.ToString();
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T09:14:47.833

var 结果 = DateTime.Parse(s2, new CultureInfo("en-US")).Year;

如果需要，更改文化信息

或者

```
string[] date = s2.Split('/');

 if (date.Length == 3)
 {
    //date[2]
 } 
```

# javascript - JavaScript onclick 条件表格单元格

> ID：12892089
> 
> 赞同：1
> 
> 时间：2012-10-15T08:48:04.260
> 
> 标签：javascript, html, cell

我最近遇到了一个[问题](https://stackoverflow.com/questions/12887085/javascript-for-toggling-visibility-of-table-cell/12887121#12887121)，我已经解决了。

但是，我现在有一个不同的问题。我希望代码只切换第 2 列和第 3 列中单元格的可见性。

我不知道如何解决这个问题，我对 JavaScript 的了解很少。

此外，最好让第 2 行和第 3 行中的所有单元格自动切换为不可见，但这不是必需的。

**编辑：**

为了方便起见，我只复制了我以前问题的解决方案。

```
function tableclick(e) 
{
    e = e || window.event;
    var target = e.target || e.srcElement;
    while(target != this && (!target.tagName || target.tagName != "TD")) target = target.parentNode;
    if( target != this) 
    {
        toggleVis(target)
    }
}

function toggleVis(obj) 
{
    if ( obj.style.fontSize != "0px" ) 
    {
        obj.style.fontSize = "0px"
    }
    else 
    {
       obj.style.fontSize = "16px"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:07:52.063

```
function tableclick(e) 
{
    e = e || window.event;
    var target = e.target || e.srcElement;
    while(target != this && (!target.tagName || target.tagName != "TD")) target = target.parentNode;
    if( target != this && (target.cellIndex == 1 || target.cellIndex == 2)) 
    {
        toggleVis(target)
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:07:39.440

我通过做一些我从未想过会真正起作用的事情来解决它，但是你有它......

```
function tableclick(e) 
{
    var ColNum=1;
    if(navigator.userAgent.indexOf("MSIE")!=-1) {
        if(event.srcElement.tagName=="TD") {
            ColNum+=event.srcElement.cellIndex;
            }
        }
    else {    
        if (e.target == "[object HTMLTableCellElement]") {
             ColNum+=e.target.cellIndex;
             }
        }
    if (ColNum == 2 || ColNum == 3)
    {    
    e = e || window.event;
    var target = e.target || e.srcElement;
    while(target != this && (!target.tagName || target.tagName != "TD")) target = target.parentNode;
    if( target != this) 
    {
        toggleVis(target)
    }
    }
} 
```

# jquery - jQuery 验证不验证

> ID：12892091
> 
> 赞同：3
> 
> 时间：2012-10-15T08:48:10.113
> 
> 标签：jquery, jquery-validate

我的 jQuery 验证脚本有问题。

[您可以在http://jsfiddle.net/R3wrn/1/](http://jsfiddle.net/R3wrn/1/)上找到代码

jQuery：

```
$(document).ready(function () {
    $("#frmContact").validate({
        rules: {
            contact_name: "required",
            contact_firstname: "required",
            contact_email: {
                required: true,
                email: true
            },
            contact_company: "required",
            contact_VAT: "required",
            contact_Address: "required",
            contact_ZIP: "required",
            contact_city: "required",
            contact_country: "required"
        }
    });
}); 
```

HTML：

```
<form id="frmContact" action="#" method="post" class="f2m contactForm">
    <div class="inputgroup">
        <label for="contact_name">Name</label>
        <input type="text" id="contact_name" value="" />
    </div>
    <div class="inputgroup">
        <label for="contact_firstname">First name</label>
        <input type="text" id="contact_firstname" value="" />
    </div>
    <div class="inputgroup">
        <label for="contact_email">Email</label>
        <input type="text" id="contact_email" value="" />
    </div>
    <div class="inputgroup">
        <label for="contact_name">Company</label>
        <input type="text" id="contact_company" value="" class="required" />
    </div>
    <div class="inputgroup">
        <label for="contact_VAT">VAT number</label>
        <input type="text" id="contact_VAT" value="" class="required" />
    </div>
    <div class="inputgroup">
        <label for="contact_Address">Address</label>
        <input type="text" id="contact_Address" value="" />
    </div>
    <div class="inputgroup">
        <label for="contact_ZIP">Postal code</label>
        <input type="text" id="contact_ZIP" value="" />
    </div>
    <div class="inputgroup">
        <label for="contact_city">City</label>
        <input type="text" id="contact_city" value="" />
    </div>
    <div class="inputgroup">
        <label for="contact_country">Country</label>
        <select id="contact_country">
            <option value="">---</option>
            <option value="8b902045-d885-4777-86fb-e44788d842e3">Belgi&#235;</option>
            <option value="1a839cad-d0a0-449e-b376-96f120e78c9e">Duitsland</option>
            <option value="bcabef32-78eb-4489-a90a-cfa42e525053">France</option>
            <option value="788806bb-c3ec-4a42-a651-64e676065b7d">Griekenland</option>
            <option value="542063ac-025b-44c5-8324-f36bde1c7989">Groot-Brittanni&#235;</option>
            <option value="c5159342-0cbb-4f9d-b449-71d16e0953e0">Itali&#235;</option>
            <option value="65c9621d-4f6a-45d4-9d8c-25d6e27432d3">Luxemburg</option>
            <option value="14874203-02c2-4999-a0a5-aabcacf21530">Nederland</option>
            <option value="135523df-5161-4c90-865c-cbf280569631">Noorwegen</option>
            <option value="e0954d61-d0f3-498a-850f-33a54be040d5">Portugal</option>
            <option value="ab0a9f35-206e-419b-9fb9-b8bbd51066cb">Spanje</option>
            <option value="19766c79-51be-4094-95e5-6a981a452491">Zweden</option>
        </select>
    </div>
    <div class="inputgroup">
        <label for="contact_mobile">Mobile</label>
        <input type="text" id="contact_mobile" value="" />
    </div>
    <div class="inputgroup">
        <label for="contact_comments">Comments</label>
        <textarea id="contact_comments" rows="10" cols="10"></textarea>
    </div>
    <div class="buttondiv">
        <br />
        <input type="submit" id="btnSendContact" class="button" value="Send your request" />
    </div>
</form> 
```

为什么它只验证`companyname`?

我在 ASP.NET MVC 应用程序中有或多或少相同的代码，但它不会验证任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:53:38.037

jQuery Validate 插件使用`name`属性，而不是`id`. 尝试将输入的`id`属性更改为`name`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:07:40.313

这是答案

[http://jsfiddle.net/2nknH/](http://jsfiddle.net/2nknH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:51:40.343

您没有在这些输入中添加所需的 css 类，请检查此更新版本：http: [//jsfiddle.net/R3wrn/2/](http://jsfiddle.net/R3wrn/2/)

编辑：

对于规则，就像@cloud nix 所说的那样，在这些输入中添加名称可以解决它：http: [//jsfiddle.net/R3wrn/7/](http://jsfiddle.net/R3wrn/7/)

# perl - 如何将xml转换为idml

> ID：12892092
> 
> 赞同：-3
> 
> 时间：2012-10-15T08:48:16.773
> 
> 标签：perl

我想使用 perl 脚本将 xml 转换为 idml 文件。

XML:

```
 <?xml version="1.0"?>
     <catalog>
         <book id="bk101">
             <author>Gambardella, Matthew</author>
             <title>XML Developer's Guide</title>
             <genre>Computer</genre>
             <price>44.95</price>
             <publish_date>2000-10-01</publish_date>
             <description>An in-depth look at creating applications with XML.</description>
         </book>
     </catalog> 
```

如果有任何 idml 模块，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:09:42.213

下次你问“是否有 X 的模块”问题时，**请先****查看[CPAN](http://www.cpan.org/)**。在这种情况下，一个简单的[搜索](http://search.cpan.org/search?q=IDML;s=0)会产生两个命中；但是[模块 ( `Image::ExifTool`)](http://search.cpan.org/~exiftool/Image-ExifTool-9.01/lib/Image/ExifTool.pod)仅支持对 IDML 文件的[读取访问。](http://search.cpan.org/~exiftool/Image-ExifTool-9.01/lib/Image/ExifTool.pod#DESCRIPTION)所以答案是*否定*的，没有合适的模块。

如果您手头有太多时间，并且这在法律上对您来说是可行的，您可以尝试对目标格式进行逆向工程。在这种情况下，Perl 最多只能是一种胶水语言，而您将在 XSLT 转换中完成大部分工作。

# javascript - Javascript间隔不起作用

> ID：12892094
> 
> 赞同：0
> 
> 时间：2012-10-15T08:48:24.230
> 
> 标签：javascript

我的 javascript 间隔中有 2 个函数：我用 2 个 html 按钮开始间隔，开始（启动它）和停止（停止它）

这是开始的：

```
function start_sync(){
    //runs the interval
    if(sync_interval == false)
    {
        sync_interval = setInterval(function(){
            gl_context.drawImage(gl_video,0,0,gl_cw,gl_ch);
            update_seek_slider_position(gl_video.currentTime);
        },10);
        sync_interval_running = true;
    };
    console.log("Sync Interval Started");
}; 
```

当我按下停止时调用它：

```
function stop_sync(){
    if(sync_interval == true)
    {
        clearInterval(sync_interval); //stops the interval
        sync_interval_running = false;
    };
    console.log("Sync Interval Stopped");
} 
```

好的，第二个功能不会停止，“update_seek_slider_position(gl_video.currentTime);” 它仍然是一个。

js区间是否只接受一个函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T08:50:39.903

以下测试是错误的，所以我猜该`clearInterval`函数永远不会被调用：

```
if(sync_interval == true) 
```

将其替换为：

```
if(sync_interval_running == true) 
```

该`sync_interval`变量由`setInterval`函数返回，**不是**布尔值。

`start_sync`您的功能也有同样的评论。测试应该是：

```
if(sync_interval_running == false) 
```

# iphone - 隐藏所有包含通过使父 UiView 的高度为 0 的视图

> ID：12892100
> 
> 赞同：2
> 
> 时间：2012-10-15T08:48:36.477
> 
> 标签：iphone, ios, xcode, ios4, ios6

我正在制作一个动画，在其中我必须将一个`UIView`名为“ **subView** ”的高度设为 0。现在 subView 包含一个`UIButton`和`UIImageView`。现在我通过这种方法在按钮单击时将高度设为 0

```
@interface ViewController : UIViewController
{
    IBOutlet UIView *suvView;
    IBOutlet UIButton *subButton;
    IBOutlet UIImageView *imgview;
}
-(IBAction)hide:(id)sender;
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self.view addSubview:suvView];
    [suvView addSubview:subButton];
    [suvView addSubview:imgview];
}

-(IBAction)hide:(id)sender
{
    [UIView beginAnimations:nil context:suvView];
    [UIView setAnimationDuration:0.25];
    [suvView setFrame:CGRectMake(0, 94, 320, 0)];
    [UIView commitAnimations];
}
@end 
```

但是当我将高度设置为 0 时，名为“subButton”和“imgview”的视图看起来就是这样。我想让它们在子视图高度为 0 时隐藏。

我正在使用 XCode 4.5

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T09:30:45.623

如果您想隐藏它们而不调整大小：`[mainview setClipsToBounds:YES]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:17:46.163

你有两种方法可以做到这一点： -

首先，如果您将 suvViews 高度设为 0，则无需将其移除。但只需隐藏 imgview 和 subButton 之类的

```
-(IBAction)hide:(id)sender
{
    [UIView beginAnimations:nil context:suvView];
    [UIView setAnimationDuration:0.25];
    [suvView setFrame:CGRectMake(0, 94, 320, 0)];
    [UIView commitAnimations];
    subButton.hidden = YES;
    imgview.hidden = YES;
}
@end 
```

您还可以做的是使用 suvView 的高度降低 subButton 和 imgview 的高度，例如

```
-(IBAction)hide:(id)sender
{
    [UIView beginAnimations:nil context:suvView];
    [UIView setAnimationDuration:0.25];
    [suvView setFrame:CGRectMake(0, 94, 320, 0)];
    [imgview setFrame:CGRectMake(0, x, y, z];
    [subButton setFrame:CGRectMake(0, x, y, z];
    [UIView commitAnimations];
} 
```

其中 x,y,z 是 imgview 和 subButton 的坐标。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:20:16.390

在开始动画之前添加以下行：

```
subButton.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight;
imgView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight; 
```

或者您也可以从界面构建器中执行此操作，方法是为每个子视图（按钮和图像视图）设置垂直和水平调整大小

顺便说一句，您应该使用苹果推荐的基于块的动画（如果您使用的是 iOS 4.0 及更高版本）而不是`beginAnimations:`and `commitAnimations:`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T09:21:15.117

```
//try this code for view animation

-(IBAction)hide:(id)sender
{
[UIView animateWithDuration:2.0 delay:0.0 options:UIViewAnimationCurveEaseOut
                 animations:^{
    [suvView setFrame:CGRectMake(0, 94, 320, 0)];
 }
  completion:nil];
} 
```

# iphone - 我可以从我的应用程序中锁定 iPhone 原生应用程序吗？

> ID：12892101
> 
> 赞同：-1
> 
> 时间：2012-10-15T08:48:38.067
> 
> 标签：iphone, ios

我想从我的应用程序中锁定本机应用程序。

有没有可能。

请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:49:41.873

不，这是不可能的，您的应用程序在沙箱中运行，并且无法操作该沙箱之外的任何东西。

# java - 如何模块化处理 Java 文件的两个 Lisp 函数的通用功能？

> ID：12892104
> 
> 赞同：1
> 
> 时间：2012-10-15T08:48:44.243
> 
> 标签：java, emacs, elisp

我使用一个 Lisp 函数来编译当前的 Java 文件并使用另一个来运行它。这两个函数使用相同的功能来获取包名称和适当的目录来编译/运行（这个功能是作为[另一个问题的答案](https://stackoverflow.com/a/12548762/789593)发布的）。我想将这些功能的通用功能模块化，即 from `(let*`to 但不包括`(cd`. 我怎样才能做到这一点？

作为奖励，我想撤消对目录（`cd`:ing）的更改，因为这些功能已完成以避免意外行为，例如`C-x C-f`从 parten 目录开始查找文件（）。有人[建议，这可以通过`unwind-protect`](https://stackoverflow.com/questions/12546437/how-to-make-a-lisp-function-call-java-while-being-aware-of-packages/12548762#comment17175479_12548762).

```
(add-hook 'java-mode-hook
      (lambda ()

    (defun java-compile-current-file ()
      "Compiles the current file with javac"
      (interactive)
      (let* ((package (save-excursion
                (goto-char (point-min))
                (when (re-search-forward "^\\s *package\\s +\\(.*\\);" (point-max) t)
                  (match-string 1))))
         (directory (file-name-directory (buffer-file-name)))
         sub-dirs)

        (if directory
        (setq directory (file-truename directory))
          (error "Current buffer is not visiting a file"))

        (when package
          (setq sub-dirs (reverse (split-string package "\\.")))

          (while sub-dirs
        (if (string-match (concat "^\\(.*/\\)" (regexp-quote (car sub-dirs)) "/$") directory)
            (setq directory (match-string 1 directory)
              sub-dirs (cdr sub-dirs))
          (error "Package does not match directory structure"))))

        (cd directory)
        (compile
         (concat "javac -Xlint:all " ; Tog bort -Werror från
                    ; argumenten. För
                    ; gnälligt!
             (if package (concat package "/") "")
             (file-name-nondirectory (buffer-file-name))))))

    (local-set-key [(f8)] 'java-compile-current-file)

    ;; https://stackoverflow.com/a/12548762/789593
    (defun java-run-current-file ()
      "Runs the java program the current file corresponds to"
      (interactive)
      (let* ((package (save-excursion
                (goto-char (point-min))
                (when (re-search-forward "^\\s *package\\s +\\(.*\\);" (point-max) t)
                  (match-string 1))))
         (directory (file-name-directory (buffer-file-name)))
         sub-dirs)

        (if directory
        (setq directory (file-truename directory))
          (error "Current buffer is not visiting a file"))

        (when package
          (setq sub-dirs (reverse (split-string package "\\.")))

          (while sub-dirs
        (if (string-match (concat "^\\(.*/\\)" (regexp-quote (car sub-dirs)) "/$") directory)
            (setq directory (match-string 1 directory)
              sub-dirs (cdr sub-dirs))
          (error "Package does not match directory structure"))))

        (cd directory)
        (shell-command
         (concat "java "
             (if package (concat package ".") "")
             (file-name-sans-extension
              (file-name-nondirectory (buffer-file-name)))))))

    (local-set-key [(f7)] 'java-run-current-file))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:18:38.260

这是一个粗略的、未经测试的代码重构。它不是特别优雅或惯用的，但至少应该足以让您入门。

```
;; 1\. Refactored `java-get-package' into its own `defun'
;; 2\. Refactored `java-package-directory' into its own `defun'
;; 3\. Broke out `defun's outside of `java-mode-hook'
;; 4\. Use (let ((default-directory ...) ...) instead of (cd ...) (...)
;; 5\. Broke out keystroke assignments into `my-java-mode-hook'

(defun java-get-package ()
  "Get package definition before point"
  (interactive)
  (save-excursion
    (save-match-data  ;; Added; you want this too
      (goto-char (point-min))
      (when (re-search-forward "^\\s *package\\s +\\(.*\\);"
                               (point-max) t)
        (match-string 1)) )) )

(defun java-package-directory (package)
  "Get package directory of PACKAGE in current buffer"
  (let ((directory (file-name-directory (buffer-file-name)))
        sub-dirs)
    (if directory
        (setq directory (file-truename directory))
      (error "Current buffer is not visiting a file"))
    (save-match-data
      (setq sub-dirs (reverse (split-string package "\\.")))
      (while sub-dirs
        (if (string-match (concat "^\\(.*/\\)"
                                  (regexp-quote (car sub-dirs)) "/$")
                          directory)
            (setq directory (match-string 1 directory)
                  sub-dirs (cdr sub-dirs))
          (error "Package does not match directory structure") ) ) )
    directory) )

(defun java-compile-current-file ()
 "Compiles the current file with javac"
 (interactive)
 (let* ((package (java-get-package))
        (default-directory (java-package-directory package)) )
   (compile
    (concat "javac -Xlint:all " ; Removed too noisy -Werror
        (if package (concat package "/") "")
        (file-name-nondirectory (buffer-file-name)) ) ) ))

(defun java-run-current-file ()
 "Runs the java program the current file corresponds to"
 (interactive)
 (let* ((package (java-get-package))
        (default-directory (java-package-directory package)) )
   (shell-command
    (concat "java "
        (if package (concat package ".") "")
        (file-name-sans-extension
         (file-name-nondirectory (buffer-file-name)) ) )) ))

(defun my-java-mode-hook () "Stuff to run when entering Java mode"
    (local-set-key [(f7)] 'java-run-current-file)
    (local-set-key [(f8)] 'java-compile-current-file) )

(add-hook 'java-mode-hook #'my-java-mode-hook) 
```

新函数可能应该接受一个缓冲区参数，以便您可以在与您所在的缓冲区不同的缓冲区上调用它们，以实现一般可用性和遵守常见的 Emacs 约定。但同样，希望这足以让你开始。

# java - Android Socket 接收问题

> ID：12892108
> 
> 赞同：1
> 
> 时间：2012-10-15T08:48:53.180
> 
> 标签：java, android, sockets

我有以下代码从套接字读取数据。

```
byte[] data = new byte[dataLength];

if(dataLength > 2000000)FileManager.writeToLogFile(this.getClass(), "GetIncomingMessages", LogMessageType.DEBUG, "XXXXYYYY => 2 length: " + dataLength);

for(int i = 0 ; i < dataLength ; i++){
    byte[] temp = new byte[1];
    in.read(temp);
    data[i] = temp[0];
}

if(dataLength > 2000000)FileManager.writeToLogFile(this.getClass(), "GetIncomingMessages", LogMessageType.DEBUG, "XXXXYYYY => 3 length: " + dataLength); 
```

这段代码运行良好，直到我得到一个大小约为 3MB（准确地说是 3227056 字节）的包。收到此数据包时，不会发生异常，我的程序也不会崩溃，但代码永远不会超过该点。基本上，您在上面看到的最后一个日志条目没有生成。

这可能是什么原因？我怎么能至少弄清楚错误是什么？（错误不会在任何 try-catch 块中捕获）。然而，在这一点之外还有其他接收发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:55:32.080

尝试：

```
if( dataLength ) ...

int readBytes = 0;

while( readBytes < dataLength )
{
   readBytes += in.read( data, readBytes, dataLength-readBytes);
}

if( dataLength ) ... 
```

这应该有助于加快速度。

**请注意**，这并不是您问题的真正解决方案。但我想效率低下的循环是其中的一部分。希望我们可以编辑此答案以为您找到解决方案。

# c# - 确定请求是 ASP.NET MVC 3 中的 PartialView 还是 AJAX 请求

> ID：12892112
> 
> 赞同：9
> 
> 时间：2012-10-15T08:49:20.987
> 
> 标签：c#, asp.net, asp.net-mvc-3, httprequest

我必须授予网站用户访问权限。我在这里进行过滤：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
} 
```

问题是我无法将完整的视图请求（例如“索引”）与 PartialViewRequests 或 AJAX 调用请求区分开来。

因此该页面`'Index'`具有访问权限，但该页面`'PartialViewGridViewForIndex'`没有访问权限。

该物业`ControllerContext.IsChildAction`也无济于事。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-15T08:58:05.177

您可以使用[IsAjaxRequest](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajaxrequestextensions.isajaxrequest%28v=vs.108%29.aspx)扩展方法来确定是否使用 AJAX 请求来调用此控制器操作：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    if (filterContext.HttpContext.Request.IsAjaxRequest())
    {
        // the controller action was invoked with an AJAX request
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-08T11:07:31.330

您可以在 asp.net Core 2 中扩展 HttpRequestExtensions，如下所示

```
public static class HttpRequestExtensions
{
    private const string RequestedWithHeader = "X-Requested-With";
    private const string XmlHttpRequest = "XMLHttpRequest";

    public static bool IsAjaxRequest(this HttpRequest request)
    {
        if (request == null)
        {
            throw new ArgumentNullException("request");
        }

        if (request.Headers != null)
        {
            return request.Headers[RequestedWithHeader] == XmlHttpRequest;
        }

        return false;
    }
} 
```

并将其用作

```
 if (!Request.IsAjaxRequest())
 {
    //----
  }
  else
  {
      // -------
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T13:39:13.583

我将通过扩展`AuthorizeAttribute`. 然后我会将我的代码放在`OnAuthorize`覆盖中。在`FilterContext`对象中可以查看`FilterContext.ActionDescriptor.MethodInfo.ReturnType.Name`。对于部分视图，这将是`PartialViewResult`.

# java - 在大型数据集中对相同值进行分组的有效解决方案

> ID：12892113
> 
> 赞同：8
> 
> 时间：2012-10-15T08:49:29.440
> 
> 标签：java, algorithm, batch-processing, spring-batch, bigdata

我的工作是为以下问题开发和实施解决方案：

给定一个包含 30M 记录的数据集，从特定数据集字段中提取（键，值）元组，按键和值对它们进行分组，存储每个键的相同值的数量。将每个键的前 5000 个最常见的值写入数据库。每个数据集行包含多达 100 个（键、值）元组，采用序列化 XML 的形式。

我想出了这样的解决方案（使用[Spring-Batch](http://static.springsource.org/spring-batch/)）：

批处理作业步骤：

**步骤 1.**遍历数据集行并提取（键、值）元组。在获得一些固定数量的元组后，将它们转储到磁盘上。每个元组都转到一个名称模式为“/chunk-”的文件，因此指定键的所有值都存储在一个目录中。在一个文件中，值是按顺序存储的。

**步骤 2.**遍历所有 '' 目录并将它们的块文件合并为一个分组相同的值。由于这些值是按顺序存储的，因此对于 O(n * log k) 复杂度而言，将它们合并是微不足道的，其中“n”是块文件中的值的数量，“k”是块的初始数量。

**步骤 3.**对于每个合并文件（即每个键），使用[PriorityQueue](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)顺序读取其值以维护前 5000 个值，而不将所有值加载到内存中。将队列内容写入数据库。

我在这个任务上花了大约一周的时间，主要是因为我以前没有使用过 Spring-Batch，并且因为我试图强调需要准确实现多线程部分的可伸缩性。

**问题是我的经理认为这项任务太容易了，无法在上面花费那么多时间。**

问题是 -*您是否知道更有效的解决方案，或者可能更容易实施的效率较低？您需要多少时间来实施我的解决方案？*

我知道类似 MapReduce 的框架，但我不能使用它们，因为该应用程序应该在具有 3 个内核和 1GB 用于 Java 堆的简单 PC 上运行。

先感谢您！

UPD：我想我没有清楚地表达我的问题。让我换个方式问：

**鉴于问题并作为项目经理或至少是任务审阅者，您会接受我的解决方案吗？你会花多少时间来完成这项任务？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:42:53.837

您确定这种方法比对 XML 文件进行预扫描以提取所有键，然后为每个键一遍又一遍地解析 XML 文件更快吗？你在这个解决方案中做了很多文件管理任务，这绝对不是免费的。

由于您有三个核心，您可以同时解析三个键（只要文件系统可以处理负载）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:18:50.327

您的解决方案似乎合理且有效，但是我可能会使用 SQL。

在解析键/值对时，我将插入/更新到 SQL 表中。然后我会查询表中的最高记录。

这是一个仅使用 T-SQL 的示例（SQL 2008，但该概念应该适用于大多数现代 rdbms）

/START/ 和 /END/ 之间的 SQL 将是您需要在代码中执行的语句。

```
BEGIN
-- database table
DECLARE @tbl TABLE (
    k INT -- key
    , v INT -- value
    , c INT -- count
    , UNIQUE CLUSTERED (k, v)
)
-- insertion loop (for testing)
DECLARE @x INT
SET @x = 0
SET NOCOUNT OFF
WHILE (@x < 1000000)
    BEGIN
    --
    SET @x = @x + 1
    DECLARE @k INT
    DECLARE @v INT
    SET @k = CAST(RAND() * 10 as INT)
    SET @v = CAST(RAND() * 100 as INT)
    -- the INSERT / UPDATE code
    /* START this is the sql you'd run for each row */
    UPDATE @tbl SET c = c + 1 WHERE k = @k AND v = @v
    IF @@ROWCOUNT = 0
        INSERT INTO @tbl VALUES (@k, @v, 1) 
    /* END */
    --
    END
SET NOCOUNT ON
-- final select
DECLARE @topN INT
SET @topN = 50
/* START this is the sql you'd run once at the end */
SELECT 
    a.k
    , a.v 
FROM (
    SELECT 
        ROW_NUMBER() OVER (PARTITION BY k ORDER BY k ASC, c DESC) [rid]
        , k
        , v
    FROM @tbl
) a
WHERE a.rid < @topN
/* END */
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:49:01.630

哎呀，尝试仅在内存中进行的老式方法似乎并不需要太多工作。

我会先尝试这样做，然后如果内存不足，请尝试每次运行一个键（根据@Storstamp 的回答）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T18:53:39.180

如果由于数据的大小而不能使用“简单”解决方案，我的下一个选择是使用 SQL 数据库。但是，由于其中大多数都需要相当多的内存（并且在 RAM 中严重过载时会下降），也许您应该将您的搜索重定向到像[MongoDB](http://www.mongodb.org/)这样的 NoSQL 数据库，即使主要基于磁盘也可以非常有效. （您的环境基本上需要，只有 1GB 的堆可用）。

NoSQL 数据库将为您完成所有基本的簿记（存储数据、跟踪所有索引、对其进行排序），并且可能比您的解决方案更有效，因为所有数据都可以排序和插入时已编入索引，消除了对 /chunk- 文件中的行进行排序、合并等额外步骤。

您最终将获得一个可能更易于管理的解决方案，并且它还允许您设置不同类型的查询，而不是仅针对这种特定情况进行优化。

作为项目经理，我不会反对您当前的解决方案。它已经很快并解决了问题。然而，作为一名架构师，我会反对，因为该解决方案有点难以维护，并且没有使用经过验证的技术，这些技术基本上与您自己编写的代码部分做相同的事情。很难击败现代数据库的树和哈希实现。

# web-services - 记录使用 WebServices 的 win 应用程序

> ID：12892115
> 
> 赞同：0
> 
> 时间：2012-10-15T08:49:35.713
> 
> 标签：web-services, qa, loadrunner

我需要记录使用 web 服务的 windows 应用程序（我通过 fiddler 观看了这个）。

首先，我尝试使用 Web Services proto 来记录脚本，但失败了。我的应用程序使用 https proto，它无法与服务器建立连接。

然后我阅读了网络捕获级别并开始使用 WinInet 选项进行录制。我能够连接到服务器（握手成功）。LR 向我展示了记录动作的数量。但是在生成我的脚本之后是空的。

我决定使用第三个选项进行捕获：WinInit 和 Socket 级别。我已经在高级选项中为我的应用程序配置了 SSL 并再次尝试。什么都没有改变。

我已经加载了 wireshark 并转储了应用程序流量，用 LR 对其进行了分析，并以二进制形式获得了请求和响应——我不想使用那种表示。

所以，我需要你的帮助！

PS with fiddler 我可以看到该应用程序使用带有 gzip 和 base64 编码的肥皂文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:54:13.370

Use a standard web virtual user.

Change the recording options to the earlier recording engine. Make sure you record all headers.

Upon recording, record an external application.

Set your global proxy for port 7777 on the local machine, which the proxy recorder for external applications uses. When recording starts a dialog will repeat this information.

Traffic should then pass through the recording proxy for your thick client app which uses web services calls, including appropriately handing SSL negotiation.

# c# - 从控制器操作中设置视图中下拉列表的选定值

> ID：12892119
> 
> 赞同：0
> 
> 时间：2012-10-15T08:49:43.740
> 
> 标签：c#, jquery, asp.net-mvc, c#-4.0, razor

我有 5 个下拉菜单，基本上显示“选择”、“是”和“否”。最初它们被设置为“选择”。一旦他的用户选择了某些东西，我就会将数据存储在一个 cookie 中（使用 Jquery），并最终将其传递给 ViewModel，以便我可以在 Controller 中使用它。

当用户刷新页面时，我希望使用 ViewModel 中的值再次填充这些下拉列表。

目前我有以下代码： -

在我拥有的视图内

```
<%: Html.DropDownList("FirstQuestYesNo", ViewData["FirstQuestYesNoData"] as SelectList, new { @class = "normalDropdowns" })%> 
```

在我的控制器中，我有以下内容：-

```
 var ddlYesNoData = new SelectList(new[]
                                      {
                                          new {ID="",Name=@Resources.GeneralTerms.GeneralTerms_Select},
                                          new {ID="Yes",Name=@Resources.GeneralTerms.GeneralTerms_Yes},
                                          new{ID="No",Name=@Resources.GeneralTerms.GeneralTerms_No},
                                      },
        "ID", "Name", 1);

        //Refresh the YesNo dropdown with the correct vals
        Dictionary<string, string> YesNoData = new Dictionary<string, string>();
        YesNoData.Add("FirstQuestYesNoData", viewModel.FirstQuestYesNoValue);
        YesNoData.Add("SecondQuestYesNoData", viewModel.SecondQuestYesNoValue);
        YesNoData.Add("ThirdQuestYesNoData", viewModel.ThirdQuestYesNoValue);
        YesNoData.Add("FourthQuestYesNoData", viewModel.FourthQuestYesNoValue);
        YesNoData.Add("FifthQuestYesNoData", viewModel.FifthQuestYesNoValue);

        foreach (var item in YesNoData)
        {
            ViewData[item.Key] = ddlYesNoData;
            if (item.Value != null)
            {
                var selected = ddlYesNoData.Where(x => x.Value == item.Value).First();
                selected.Selected = true;
            }
        } 
```

所以基本上我正在做的是从 viewModel 中获取每个下拉列表的值，然后尝试在我的视图中设置该值。由于我正在做的事情，我将所有 DropdownLists 选项都作为“选择”而不是我的 viewModel 中的值。

问题是我不知道如何“定位”特定的 DropDownList。如何使用我的代码从控制器定位 DropDown（在本例中为“FirstQuestYesNo”）？

感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:55:14.193

在您的控制器操作中，只需将`FirstQuestYesNo`属性设置为相应的值。例如：

```
ViewData["FirstQuestYesNo"] = "Yes"; // this value might come from a cookie 
```

这将自动预选带有 的选项`value="Yes"`。显然，这个值将来自 cookie。你不需要任何`foreach`循环。

# javascript - JavaScript 实时计算

> ID：12892120
> 
> 赞同：1
> 
> 时间：2012-10-15T08:49:44.550
> 
> 标签：javascript, jsfiddle, real-time-updates

我用[jeditable](http://www.appelsiini.net/projects/jeditable)建立了一个带有自定义输入数字的表。一旦输入值，输入类型就消失了

我需要找到一个 JavaScript 实时计算，它会自动计算我的值的数量。

我发现了 2 个非常适合我的案例的有趣示例，但是否有可能在不使用表单和输入的情况下实现相同的效果？

[第一个例子](http://jsfiddle.net/greglockwood/VkCgh/)

[第二个例子](http://javalearning-adventure.blogspot.com.es/2010/08/javascript-real-time-calculation.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:27:08.690

是的。如你所知，一个 div 元素可以被访问`document.getElementById('div_id')`，它的值可以被访问`document.getElementById('div_id').value`。

因此，取出表单并插入您需要`id`的`div`'s 并访问该值，然后找到总和，然后将值设置`sum`为另一个`div`。这是代码

```
<script>
   function calculateBMI() {

   var wtStr =document.getElementById('w').value;

   if (!wtStr)
     wtStr = '0';

   var htStr = document.getElementById('h').value;
   if (!htStr)
     htStr = '0';

   var weight = parseFloat(wtStr);
   var height = parseFloat(htStr);
   document.getElementById("r").value = weight + height;
 }
 </script>

 <input id = "w" type="Text"  name="weight" size="4" onkeyup="calculateBMI()"> Weight  (in Kilos)  
 <input id = "h" type="Text" name="height" size="4" onkeyup="calculateBMI()"> Height (in Centimeters)<br>
 <input id = "r" type="Text" name="BodyMassIndex" id="BodyMassIndex" size="4"> BMI     
 <input type="button" style="font-size: 8pt" value="Calculate" onClick="calculateBMI()" name="button"> 
```

如果你不想要`input`，你可以使用`textarea`.

# java - 如何合并两个 AST？

> ID：12892122
> 
> 赞同：5
> 
> 时间：2012-10-15T08:49:54.917
> 
> 标签：java, parsing, antlr, abstract-syntax-tree, lexer

我正在尝试实现一个工具来合并某些源代码的不同版本。给定相同源代码的两个版本，我们的想法是解析它们，生成各自的抽象源代码树 (AST)，最后将它们合并为一个保持语法一致性的输出源 - 词法分析器和解析器是问题[ANTLR：如何跳过多行注释](https://stackoverflow.com/questions/12898052/antlr-how-to-skip-multiline-comments)。

我知道有类可以帮助...`ParserRuleReturnScope`但总是返回 null :-(`getStop()``getStart()`

这是一个片段，说明了我如何修改我的 perser 以打印规则：

```
parser grammar CodeTableParser;

options {
    tokenVocab = CodeTableLexer;
    backtrack = true;
    output = AST;
}

@header {
    package ch.bsource.ice.parsers;
}

@members {
    private void log(ParserRuleReturnScope rule) {
        System.out.println("Rule: " + rule.getClass().getName());
        System.out.println("    getStart(): " + rule.getStart());
        System.out.println("    getStop(): " + rule.getStop());
        System.out.println("    getTree(): " + rule.getTree());
    }
}

parse
    : codeTabHeader codeTable endCodeTable eof { log(retval); }
    ;

codeTabHeader
    : comment CodeTabHeader^ { log(retval); }
    ;

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:16:40.657

假设您*拥有*AST（通常一开始就很难获得，解析真实语言通常比看起来更难），您首先必须确定它们的共同点，并构建一个收集该信息的映射。这并不像看起来那么容易。您是否将已移动但与“普通”相同的子树计算在内的代码块？除了一致地重命名标识符之外，两个相同的子树呢？修改后的评论呢？（大多数 AST 会丢失注释；大多数程序员会认为这是一个非常糟糕的主意）。

您可以构建“最长公共子串”算法的变体来比较树。我已经在我构建的工具中使用了它。

最后，在合并了树之后，现在您需要重新生成文本，最好保留原始代码的大部分布局。（当你改变他们如此喜爱的布局时，程序员讨厌你）。因此，您的 AST 需要捕获位置信息，而您的再生必须尽可能尊重这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:53:38.373

解析器代码中的调用`log(retval)`看起来会发生在规则的末尾，但事实并非如此。您需要将呼叫移动到一个`@after`块中。

我更改`log`为吐出一条消息以及范围信息，并将对它的调用添加到我自己的语法中，如下所示：

```
script    
    @init {log("@init", retval);}
    @after {log("@after", retval);}
    : statement* EOF  {log("after last rule reference", retval);} 
        -> ^(STMTS statement*) 
    ; 
```

解析测试输入产生以下输出：

```
Logging from @init
    getStart(): [@0,0:4='Print',<10>,1:0]
    getStop(): null
    getTree(): null
Logging from after last rule reference
    getStart(): [@0,0:4='Print',<10>,1:0]
    getStop(): null
    getTree(): null
Logging from @after
    getStart(): [@0,0:4='Print',<10>,1:0]
    getStop(): [@4,15:15='<EOF>',<-1>,1:15]
    getTree(): STMTS 
```

`after`块中的调用同时填充了`stop`和`tree`字段。

我不能说这是否会对您的合并工具有所帮助，但我认为这至少可以帮助您解决半填充范围对象的问题。

# qt - 如何防止QSpinBox自动突出显示内容

> ID：12892129
> 
> 赞同：8
> 
> 时间：2012-10-15T08:50:17.200
> 
> 标签：qt, qt4, qspinbox

`QSpinBox`使用向上/向下按钮选择（突出显示）其内容。有什么办法可以禁用它吗？除了使用我自己的子类`QSpinBox`来访问底层之外，还有什么方法可以清除选择`QLineEdit`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T11:32:59.813

没有办法直接禁用它，但你可以做一些 hack：

```
void Window::onSpinBoxValueChanged() // slot
{
    spinBox->findChild<QLineEdit*>()->deselect();
} 
```

我建议使用排队连接来连接它，如下所示：

```
connect(spinBox, SIGNAL(valueChanged(int)), this, SLOT(onSpinBoxValueChanged()), Qt::QueuedConnection); 
```

这将确保在突出显示行编辑后调用插槽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-20T21:29:33.540

与@Anthony 的解决方案相同，但更短：

```
connect(spinBox, static_cast<void (QSpinBox::*)(int)>(&QSpinBox::valueChanged), spinBox,
            [&, spinBox](){spinBox->findChild<QLineEdit*>()->deselect();}, Qt::QueuedConnection); 
```

# sitecore - 保存布局页面时的 Sitecore NullReferenceException

> ID：12892131
> 
> 赞同：1
> 
> 时间：2012-10-15T08:50:20.547
> 
> 标签：sitecore

我有一个 NullReferenceException 但是当我试图保存布局页面时。我正在使用电子邮件营销管理器。我已经构建了一个布局页面（ASPX），其中包含几个链接到自定义子布局（ASCX）的占位符

通过电子邮件管理器（“添加到此处”）添加这些子布局表单后，我单击保存按钮并收到错误消息：

```
[NullReferenceException: Object reference not set to an instance of an object.]
   Sitecore.Modules.EmailCampaign.Core.MessageRelationsCorrector.ReplaceItemPaths(LayoutDefinition layout) +164
   Sitecore.Modules.EmailCampaign.Core.MessageRelationsCorrector.CorrectItemRelations(WebPageMail message) +236
   Sitecore.Modules.EmailCampaign.Pipelines.CorrectMessageRelations.Process(SaveArgs args) +268

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct&amp; sig, MethodAttributes methodAttributes, RuntimeType typeOwner) +0
   System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner) +72
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks) +251
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) +28
   Sitecore.Pipelines.Processor.Invoke(PipelineArgs args) +262
   Sitecore.Nexus.Pipelines.NexusPipelineApi.Resume(PipelineArgs args, Pipeline pipeline) +225
   Sitecore.Pipelines.Pipeline.Resume() +39
   Sitecore.Pipelines.Pipeline.DoStart(PipelineArgs args) +115
   Sitecore.Pipelines.Pipeline.Start(PipelineArgs args, Boolean atomic) +133
   Sitecore.Pipelines.Pipeline.Start(PipelineArgs args) +32
   Sitecore.Shell.Applications.WebEdit.Commands.Save.Execute(CommandContext context) +669
   Sitecore.Shell.Framework.Dispatcher.Dispatch(Message message, CommandContext context) +62
   Sitecore.Shell.Framework.Dispatcher.Dispatch(Message message, Item[] items) +110
   Sitecore.Shell.Framework.Dispatcher.Dispatch(Message message, Item item) +78
   Sitecore.Shell.Applications.WebEdit.WebEditRibbonForm.HandleMessage(Message message) +429
   Sitecore.Shell.Framework.Commands.MessageCommand.Execute(CommandContext context) +447
   Sitecore.Web.UI.Sheer.ClientPage.Dispatch(String command) +143
   Sitecore.Web.UI.Sheer.ClientPage.RaiseEvent() +108
   Sitecore.Web.UI.Sheer.ClientPage.OnPreRender(EventArgs e) +624
   Sitecore.Shell.Applications.WebEdit.WebEditRibbon.OnPreRender(EventArgs e) +35
   System.Web.UI.Control.PreRenderRecursiveInternal() +103
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2496 
```

你知道可能是什么原因吗？如果没有，我该如何调试这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:47:59.473

我相信这个问题与 ECM 模块中新注册的错误有关，我怀疑可能是您在时间框架匹配后放入了原始票证。但是，如果不是您本人或出于将其传递给可能遇到此问题的其他人的利益，为了解决此问题，您需要向 Sitecore 支持提交一张票。有一个初始修补程序，如果他们发现您的问题相同或相关，他们可以为您提供修补程序。

# c# - WCF 服务，垂直记录

> ID：12892137
> 
> 赞同：6
> 
> 时间：2012-10-15T08:50:53.777
> 
> 标签：c#, .net, wcf, logging, nlog

我一直在寻找 WCF 服务的日志记录（包括 NLog 和 PostSharp 等技术），但我还有一些尚未解决的问题......我不知道我是否遗漏了一些明显的东西，或者这不可能。

假设我有一个包含 100 多个 Web 服务调用入口点的 WCF 服务层。其中之一是导致问题。在该层之下是业务逻辑层和数据库层。我想要做的（我认为）是打开该服务调用的日志记录（这将包括相关的活动 ID），以便记录对该服务的任何调用，并且还记录较低层中的任何日志消息。我真的不想在较低层的程序集级别打开日志记录，因为它们将被许多 Web 服务方法共享。

这是否可能，通过现有的框架或以创造性的方式使用 CorrelationManager 之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:50:45.750

在 log4net 中，您可以在线程上下文中设置一个属性，该属性将包含在线程的所有日志记录事件中。

```
public class WcfServiceClass
{
    public void ProblemServiceMethod()
    {
        using (log4net.ThreadContext.Stacks["logThisMethod"].Push("ProblemServiceMethod"))
        {
            // can also add the correlationId to the logs using this method.
            // call business logic...

        }
    }
} 
```

然后[创建一个自定义 appender](http://www.codeproject.com/Articles/406634/Creating-a-custom-log4net-appender)来过滤它。

```
public class IfContextSetFilterAppender : log4net.Appender.AppenderSkeleton
{
    protected override void Append(LoggingEvent loggingEvent)
    {
        bool logThisEntry = false;
        string serviceMethodBeingLogged;

        foreach (object p in loggingEvent.GetProperties())
        {
            System.Collections.DictionaryEntry dEntry = (System.Collections.DictionaryEntry)p;
            if (dEntry.Key == "logThisMethod")
            {
                logThisEntry = true;
                serviceMethodBeingLogged = dEntry.Value.ToString();
            }
        }

        if (!logThisEntry)
            return; // don't log it.

        // log it.
    }
} 
```

这是该想法的非常简单（但清晰）的示例。

如果我真的像您描述的那样将其构建成大规模的服务，我会：

1.  创建一个[IOperationInvoker](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/17/wcf-extensibility-ioperationinvoker.aspx)端点行为，该行为获取方法名称并为其应用的所有调用设置 log4net 上下文值。

2.  （可选）让附加程序从 app.config 中读取应记录的所有服务方法名称的过滤器列表。（如果您有选择性地将 OperationInvoker 行为应用于哪些方法，则附加程序不需要这种复杂性。）

通过执行该行为，您可以通过单独的配置来控制生产服务的日志记录，而无需接触服务代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:56:41.870

您可以为该特定服务调用创建一个新的日志记录源，然后启用诊断来过滤它。

```
 <system.diagnostics>
    <sources>
      <source name="Your.Source.Here" switchValue="Verbose">
        <listeners>
          <add name="xml" />
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add name="xml" type="System.Diagnostics.XmlWriterTraceListener" traceOutputOptions="LogicalOperationStack" initializeData="l:\logs\N4S.MSO.ADC.Host.svclog" />
    </sharedListeners>
  </system.diagnostics> 
```

# mysql - MySQL 存储过程在服务器上花费的时间比 localhost 长得多

> ID：12892138
> 
> 赞同：0
> 
> 时间：2012-10-15T08:50:57.640
> 
> 标签：mysql, webserver, localhost

我创建了一个带有在 localhost 上运行的查询的存储过程：

在 0,0065s (0,1426s) 内获取 21 行

在服务器上：

在 0,0037 秒 (15,9947 秒) 内提取了 21 行

我尝试了以下选项以在本地主机上获得与服务器相同的结果：

*   SQL_NO_CACHE
*   重置缓存
*   刷新缓存

但它并没有给我相同的结果，所以我想知道为什么在服务器上运行的查询要慢得多。

我已经运行了一个解释，但真的不知道我可以从中准备什么：

```
1, 'PRIMARY', '<derived2>', 'ALL', '', '', '', '', 16106, 100.00, 'Using temporary; Using filesort'
1, 'PRIMARY', 'A', 'ALL', 'PRIMARY', '', '', '', 5214, 100.00, 'Using where; Using join buffer'
2, 'DERIVED', 'T', 'ALL', 'PRIMARY', '', '', '', 76211, 100.00, 'Using wher 
```

e'

这是我正在运行的查询：

```
SELECT
        `A`.`country_description`,
    SUM(`turnover_ytd`) AS `turnover_currentyear_ytd`,
    SUM(`turnover_ly`) AS `turnover_lastyear_ytd`,
    SUM(`turnover_sly`) AS `turnover_2ndlastyear_ytd`,
    SUM(`turnover_ytd`) AS `volume_currentyear_ytd`,
    SUM(`turnover_ly`) AS `volume_lastyear_ytd`,
    SUM(`turnover_sly`) AS `volume_2ndlastyear_ytd`,
    COALESCE(((SUM(`turnover_ytd`)-SUM(`turnover_ly`))/SUM(`turnover_ly`))*100, 0) AS `turnover_percentage_currentandlastyear_ytd`,
        COALESCE(((SUM(`volume_ytd`)-SUM(`volume_ly`))/SUM(`volume_ly`))*100, 0) AS `volume_percentage_currentandlastyear_ytd`,
        COALESCE(((SUM(`turnover_ly`)-SUM(`turnover_sly`))/SUM(`turnover_sly`))*100, 0) AS `turnover_percentage_lastand2ndlastyear_ytd`,
        COALESCE(((SUM(`volume_ly`)-SUM(`volume_sly`))/SUM(`volume_sly`))*100, 0) AS `volume_percentage_lastand2ndlastyear_ytd`

  FROM
        `agent` AS `A`
        INNER JOIN
        (
            SELECT
                `debtor_number`,
                IF(SUBSTR(`period`,1,4) = SUBSTR(201210,1,4), `turnover_ytd`, 0) AS `turnover_ytd`,
                IF(SUBSTR(`period`,1,4) = SUBSTR(201210-100,1,4), `turnover_ytd`, 0) AS `turnover_ly`,
        IF(SUBSTR(`period`,1,4) = SUBSTR(201210-200,1,4), `turnover_ytd`, 0) AS `turnover_sly`,
        IF(SUBSTR(`period`,1,4) = SUBSTR(201210,1,4), `volume_ytd`, 0) AS `volume_ytd`,
                IF(SUBSTR(`period`,1,4) = SUBSTR(201210-100,1,4), `volume_ytd`, 0) AS `volume_ly`,
        IF(SUBSTR(`period`,1,4) = SUBSTR(201210-200,1,4), `volume_ytd`, 0) AS `volume_sly`
            FROM
                `turnover_volume` AS `T`
            WHERE
        `company_number` = 01
      AND
        SUBSTR(`period`,5,2) <= SUBSTR(201210,5,2)
      AND
        SUBSTR(`period`,1,4) IN (SUBSTR(201210,1,4), SUBSTR(201210-100,1,4), SUBSTR(201210-200,1,4))
      AND
        `turnover_ytd` != 0
      AND
        `volume_ytd` != 0

    ) AS `T` ON (`T`.`debtor_number` = `A`.`debtor_number`)

    WHERE
    `A`.`agent_number` = 003
  GROUP BY
    `A`.`country_description`; 
```

服务器规格如下：

主机是运行 ESX 的物理服务器，而 Web 服务器在 ESX 内以虚拟方式运行。

主机规格为：

品牌和类型：Altos R720 CPU：Xeon E5404 (2ghz) 存储：通过 Iscsi 通过存储连接。(Eternus DX80) 内存：6 GB

访客规格为： CPU：2x vCPU 内存：2 GB

操作系统是：红帽 4.1.2-44

除了这些规格之外，客人还可以无限制地访问主机。

我的本地 PC 规格是：

CPU：Intel Core 2 Quad CPU Q9300 @ 2.50GHz 内存：3 GB 操作系统：Windows 7 32 位

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:13:34.393

我发现了问题，与我的本地主机数据库相比，网络服务器上的排序规则类型有所不同。

在本地主机上我有：

latin1_swedish_ci

在服务器上是：

utf8_unicode_ci

表上的引擎也不同，服务器上的 InnoDB 与 MyIsam ......

通过检查不同排序规则类型之间的翻译，这会导致查询速度变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:53:18.537

与本地计算机相比，您是否考虑过服务器的硬件？

这是一个共享主机包吗？专用服务器？云？

# postgresql - 如何在 liquibase 中使用一些默认时间戳更新日期列

> ID：12892139
> 
> 赞同：1
> 
> 时间：2012-10-15T08:51:00.110
> 
> 标签：postgresql, liquibase

如何在 liquibase 中使用默认值（2010-01-01 00:00:00）更新日​​期列。我知道要获取当前日期。您能否建议我使用一些默认值更新列。

```
 <property name="now" value="SYSDATE" dbms="postgresql">

 <changeSet>
    <update>
      <column name="date_created" valueDate="${now}"/>
    </update>
 </changeSet> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T09:18:12.547

该属性`valueDate`支持三种格式：

1.  YYYY-MM-DD
2.  hh:mm:ss
3.  YYYY-MM-DDThh:mm:ss

在您的情况下，这有效：

```
<column name="date_created" valueDate="2010-01-01" /> 
```

# c++ - 在调用函数之前声明函数时出现链接器错误

> ID：12892141
> 
> 赞同：0
> 
> 时间：2012-10-15T08:51:09.217
> 
> 标签：c++, xcode, linker, clang, undefined-symbol

我的游戏中有一个更新函数，其中包含以下代码：

```
void DrawMiniFPSCounter();
DrawMiniFPSCounter(); 
```

该`DrawMiniFPSCounter()`函数在名为 miniFPSCounter.cpp 的文件中声明，该文件是构建目标的一部分（我使用的是 Xcode）。构建时，我收到一个链接器错误，提示`DrawMiniFPSCounter`找不到该符号。我已尝试删除上面的声明并仅调用`DrawMiniFPSCounter()`，但这会导致编译期间出现“未找到符号”错误。为什么链接器很难找到这个符号？这与项目中解析符号的顺序有关吗？

编辑：我`nm hrMiniFPSCounter.o | grep Draw`在构建目录中运行命令，并得到以下输出：

```
00000000 T __Z15DrawMiniCounteriiiii
0002d040 S __Z15DrawMiniCounteriiiii.eh
00000a00 T __Z18DrawMiniFPSCounterv
0002d148 S __Z18DrawMiniFPSCounterv.eh
00000560 t __ZL9DrawDigitiiib
0002d128 s __ZL9DrawDigitiiib.eh 
```

这是正常的吗？为什么函数名称末尾有多余的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:14:34.663

根据我的经验，最常见的“错误”：

1.  文件（真的）被编译了吗？
2.  它（真的）是否正确链接？
3.  你给这个函数起你认为你做的名字了吗？
4.  *新的*命名空间问题:)

您确定 miniFPSCounter.cpp 文件已编译（/已以正确的方式包含在项目中）吗？我猜您遇到的情况可能是由一些不同的事情引起的，但是由于缺乏更多信息，我想说：尝试确保正在编译 cpp 文件（可能会引入一些语法错误，从而导致编译如果确实已编译，则会出错）并且当您确定这一点时，您可以开始检查其他内容（例如它是否正确链接等）

编辑：将清单放在首位。

# javascript - 菜单 - ajax 加载内容上的子菜单和活动链接

> ID：12892142
> 
> 赞同：0
> 
> 时间：2012-10-15T08:51:13.947
> 
> 标签：javascript, jquery, html, css, ajax

我对菜单的活动项目和切换的子菜单有问题：当我单击“Prensa”或“Contacto”时，脚本会将活动井添加到菜单项。例如，“Prensa”获得了活动，如果我点击“Contacto”，它就会从“Prensa”中删除它。

问题是当我点击“艺术品”时，它会得到活动类，但也有来自它的子菜单的所有链接。此外，如果我再次单击“Prensa”，“艺术品”的子菜单将保持打开状态，并且“艺术品”的所有链接仍会获得活动类（还有“艺术品”链接本身）。

另一个问题是，当我单击子菜单项时，它只添加了一个“类”而没有其他任何内容，因此我无法添加 css 使其处于活动状态。

这是我的标记：

```
 <ul id="menu" class="menu">
            <li id="artworks"><a href="#">ARTWORK</a>
                <ul class="submenu">
                    <img src="../img/submenu.png" alt="submenu" width="62" height="1" />
                    <li><a href="#" id="sweetlife">Sweet Life</a></li>
                    <li><a href="#">Pleasure</a></li>
                    <li><a href="#">Bienal de la habana</a></li>
                    <li><a href="#">Estudios de craneos</a></li>
                </ul>
            </li>
            <li id="prensa_nav"><a href="#">PRENSA</a></li>
            <li id="contacto_nav"><a href="#">CONTACTO</a></li>
        </ul> 
```

这是我的js：

```
 // active menu item
$(function() {
    $('#menu li').click(function() {
        $('#menu li').each(function() {
            $(this).removeClass('active');
        });
        $(this).addClass('active');
    });
});

    /* Menu dropdown */
    $(document).ready(function($){

    // Add class of drop if item has sub-menu
    $('ul.submenu').closest('li').addClass('drop');

    // Left Sidebar Main Navigation
    var menu_ul = $('.menu > li.drop > ul'),
        menu_a  = $('.menu > li.drop > a');

    menu_ul.hide()    

    menu_a.click(function(e) {
        e.preventDefault();
        if(!$(this).hasClass('active')) {
            menu_a.removeClass('active');
            menu_ul.filter(':visible').slideUp('normal');
            $(this).addClass('active').next().stop(true,true).slideDown('normal');
        } else {
            $(this).removeClass('active');
            $(this).next().stop(true,true).slideUp('normal');
        }
    });

}); 
```

有人可以帮我解决这些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:22:05.477

您必须仅设置活动菜单的直接子级，而不是所有其他子级。

对于脚本，单击子菜单会调用两次：一次在子菜单上，一次在父菜单上。第一次调用设置了孩子的课程，但第二次调用立即将其删除。您可以在 jQuery 中阻止单击的这种“传播”。

示例：http: [//jsfiddle.net/willemvb/q96FK/](http://jsfiddle.net/willemvb/q96FK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:21:42.543

您使用此样式代码

```
 $(function() {
   $('#menu li').click(function() {
        $(".active").removeClass('active');
        $(this).addClass('active');
   });
});

$(document).ready(function($){

// Add class of drop if item has sub-menu
$('ul.submenu li:first').addClass('drop');
var menu_ul = $('.menu li.drop ul'),
menu_a  = $('.menu li.drop a'); 
```

此致

# java - 春季任务计划

> ID：12892144
> 
> 赞同：1
> 
> 时间：2012-10-15T08:51:20.693
> 
> 标签：java, spring, scheduled-tasks

我第一次使用 Spring 任务执行器系统，但无法让它工作......

我已经阅读了[关于 SO 的各种帖子，](https://stackoverflow.com/questions/6154741/why-isnt-spring-running-my-scheduled-method)但没有任何迹象表明该任务正在执行。首先，我在我的服务 bean 上尝试了 @Scheduled 注释，但在阅读了这遇到了 AOP 代理问题后，我使用了直接的 XML 配置，如下所示：

```
<task:executor id="executorWithPoolSizeRange"
        pool-size="5-25"
        queue-capacity="100" />       
 <task:scheduler id="taskScheduler" pool-size="2" /> 
 <task:scheduled-tasks>
 <task:scheduled ref="fileWriter" method="test" fixed-rate="5000" />
</task:scheduled-tasks> 
```

使用 fileWriter bean 是一个常规的 Spring bean，测试方法如下：

```
public void test (){
   System.err.println("run in job");
} 
```

通过使用 DEBUG 日志记录设置运行，我知道以下内容：

1.  bean 被加载并初始化。
2.  如果我输错了“方法”属性的名称，则会引发异常，因此至少会解析任务定义。
3.  调试语句中没有任何内容表明任务的任何激活
4.  永远不会触发测试方法中的断点。

我希望在我的应用程序或弹簧单元测试运行时每 5 秒看到一次，以查看控制台上打印出的 test() 方法的消息。我正在使用 Spring 3.0.6 并在 Mac 10.6 Java 6 上的 Eclipse 3.7 中测试通过 Jetty 运行的应用程序。我们使用的所有其他 Spring 功能（数据库、安全性、MVC 工作正常）。非常感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:55:00.817

If you haven't try adding Quartz to your classpath (you shouldn't need it but...).

Whats most likely happening is that the scheduler is running and failing to execute your proxy. The proxy probably throws an exception and the scheduler's exception policy is probably discarding it.

The other option... (and I am probably going to get down voted) is to not use Springs scheduler. Unless you need the Quartz Cron stuff I find Springs Task scheduler overly complicated and yet weak compared to:

[**Guava's ListeningScheduledExecutorService**](http://code.google.com/p/guava-libraries/wiki/ListenableFutureExplained)

The listening executor service will allow you to chain events. You can easily wrap the above in some service bean. Yes I know you probably want the decoupling that Spring provides... but you can get far better decoupling and event based by combing the ExecutorService and [Guava's EventBus](http://code.google.com/p/guava-libraries/wiki/EventBusExplained).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:37:23.523

尝试这个：

```
 <task:scheduled-tasks scheduler="taskScheduler">
   <task:scheduled ref="fileWriter" method="test" fixed-rate="5000" />
 </task:scheduled-tasks> 
```

# ruby-on-rails - 从 SQL 查询用 ruby 编写查询

> ID：12892145
> 
> 赞同：1
> 
> 时间：2012-10-15T08:51:23.167
> 
> 标签：ruby-on-rails

如何在 ruby​​ 中编写以下查询。

```
select count(*), project_types.project_type_name,company_id from project_type_stages_questions,project_types where (project_type_stage_id in 
(select project_type_stages_id from project_type_stages where project_type_id in (select project_type_id from project_types))) group by project_type_stage_id,project_types.project_type_name,company_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T00:02:58.607

如果你有一个复杂的 sql 要做，并且你打算使用它的结果，你可以将它传递给 db manager：

```
sql = "select count(*), project_types.project_type_name,company_id from project_type_stages_questions,project_types where (project_type_stage_id in (select project_type_stages_id from project_type_stages where project_type_id in (select project_type_id from project_types))) group by project_type_stage_id,project_types.project_type_name,company_id"
ActiveRecord::Base.connection.execute(sql) 
```

公共 api 没有提供太多信息，但它就在[这里](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/DatabaseStatements.html#method-i-execute)。

如果您需要 ActiveRecord::Relation 作为结果，我建议他们使用 Arel。

# node.js - 对 node-mongodb-native 语法感到困惑

> ID：12892146
> 
> 赞同：0
> 
> 时间：2012-10-15T08:51:24.130
> 
> 标签：node.js, mongodb, node-mongodb-native

我刚刚进入 node 和 mongodb 并遇到了第一个障碍。

我正在浏览一个代码如下所示的教程：

```
var db = new mongo.Db("database", new mongo.Server(host, port, {}));
db.open(function(error){
  db.collection("user", function(err, collection){
    collection.find({"id":"1"}, function(error, cursor){
      cursor.toArray(function(err, users){
        if(users.length == 0){
          console.log("no such user");
        } else if {
          console.log("user found: ", users[0]);
        }
     });
   });
 }); 
```

但是代码无法工作，说**用户**为空。（我确实有一个插入条目的代码）无论如何，在试图弄清楚发生了什么时，我遇到了文档，它使用同步模式进行**查找**而不是使用回调来检索光标。代码是这样的：

```
var cursor = collection.find({"id":"1"}); 
```

事实上，我在文档中找不到任何地方提到使用**find**和返回游标的回调。我真的很困惑。教程过时了吗？这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:01:17.350

如果`users`是`null`，那么这很可能`err`表明问题所在。添加`if (err)`路径到您的代码以`err`在设置时记录。

`find`可以以您描述的两种方式工作。回调参数是可选的，如果你不提供它，你可以使用返回的游标。请参阅文档：[链接](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#find)。

# javascript - 循环中的javascript变量连接

> ID：12892154
> 
> 赞同：1
> 
> 时间：2012-10-15T08:51:51.700
> 
> 标签：javascript, variables, loops, concatenation

我应该如何连接这个？

这是我的 JavaScript 代码

```
var c0 = document.all.ntext.value; 
var c1 = document.all.stext.value;
var x;

for(x=0; x<2; x++)
{
    a.innerHTML = c //contatenation needed
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:03:40.093

```
var c0 = document.all.ntext.value; 
var c1 = document.all.stext.value;
var x;

for(x=0; x<2; x++)
{
    a.innerHTML = c0 + с1
} 
```

那是你要的吗？

如果你这样走会更好：

```
var c = [document.all.ntext.value, document.all.stext.value];
var x;

for(x=0; x<c.length; x++)
{
    a.innerHTML += c[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:04:08.020

```
var needed = ['ntext', 'stext'];   
a.innerHTML = needed.map(function(key) {
  return document.all[key].value;
}).join(''); 
```

[.map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)需要用于旧浏览器的 shim。

# winforms - 计时器“名称”属性？窗口窗体c#？

> ID：12892155
> 
> 赞同：-1
> 
> 时间：2012-10-15T08:51:52.897
> 
> 标签：winforms

在窗口窗体中，我们可以访问计时器控件的名称属性还是可以更改名称属性。帮帮我谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:17:18.860

如果您在谈论[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)类，那么在此类或其祖先中没有此类属性。如果需要，只需基于 System.Windows.Forms.Timer 创建自己的计时器。

# c# - 算法没有给出我在 C# 中所期望的答案

> ID：12892158
> 
> 赞同：-4
> 
> 时间：2012-10-15T08:52:04.163
> 
> 标签：c#, algorithm

> [http://projecteuler.net/problem=1](http://projecteuler.net/problem=1)
> 
> 如果我们列出所有小于 10 且是 3 或 5 的倍数的自然数，我们会得到 3、5、6 和 9。这些倍数的和是 23。求出 1000 以下的所有 3 或 5 的倍数之和。

如果我将“int maxNum”更改为 10 或任何其他小数字（如 20），我将得到正确答案。

但不知何故，当我用一个像 1000 这样的大数字做它时，它会给我一个我不希望出现的数字，我不知道为什么，请帮忙。

它这样做是因为它已经达到了 int 的最大值吗？

```
class Program
{

    static void Main(string[] args)
    {
        //TASK: If we list all the natural numbers below 10 that are multiples of 3 or 5, we get 3, 5, 6 and 9\. The sum of these multiples is 23.
        //Find the sum of all the multiples of 3 or 5 below 1000.

        int multiplierA = 3;
        int multiplierB = 5;

        int maxNum = 1000;
        int i = 1;

        int deelEen = MultiplyFactory(multiplierA, i, maxNum);
        int deelTwee = MultiplyFactory(multiplierB, i, maxNum);

        int result = deelEen + deelTwee;

        Console.WriteLine(result);
        Console.Read();
    }

    static int MultiplyFactory(int multiplier, int i, int maxNum)
    {
        List<int> savedNumbers = new List<int>();
        while(multiplier*i < maxNum)
        {
            savedNumbers.Add(multiplier*i);
            i++;
        }

        int answer = 0;
        foreach(int getal in savedNumbers)
        {
            Console.WriteLine(getal);
            answer = answer + getal;
        }
        savedNumbers.Clear();
        return answer;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:59:52.123

我认为问题在于你需要找到所有 3 或 5 的倍数的总和。你的程序正在做的是找到 3 的所有乘数的总和 + 5 的所有乘数的总和。你可以返回 int 数组，然后对数组中的不同数字求和。

您还可以使用 Linq 从列表中获取不同的值

```
class Program
{
    static void Main(string[] args)
    {
        //TASK: If we list all the natural numbers below 10 that are multiples of 3 or 5, we get 3, 5, 6 and 9\. The sum of these multiples is 23.
        //Find the sum of all the multiples of 3 or 5 below 1000.

        int multiplierA = 3;
        int multiplierB = 5;

        int maxNum = 1000;
        int i = 1;
        int result = 0;

        List<int> deelEen = MultiplyFactory(multiplierA, i, maxNum);
        List<int> deelTwee = MultiplyFactory(multiplierB, i, maxNum);

        foreach (int val in deelEen)
            result += val;

        foreach (int val in deelTwee)
            if (!deelEen.Contains(val)) result += val;

        Console.WriteLine(result);
        Console.Read();
    }

    static List<int> MultiplyFactory(int multiplier, int i, int maxNum)
    {
        List<int> savedNumbers = new List<int>();
        while (multiplier * i < maxNum)
        {
            savedNumbers.Add(multiplier * i);
            i++;
        }

        return savedNumbers;

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:11:48.207

问题是你数了一些数字两次。例如，您首先将 15 相加为可被 3 整除，然后将其相加为可被 5 整除。

所以对于 1 到 20 之间的数字，你有

```
deelEen = 3 + 6 + 9 + 12 + 15 + 18
deelTwee = 5 + 10 + 15 
```

和

```
result = 3 + 5 + 6 + 9 + 10 + 12 + 15 + 15 + 18 
```

当正确答案是

```
result = 3 + 5 + 6 + 9 + 10 + 12 + 15 + 18 
```

# intellij-idea - IntelliJ 缺少所有检查

> ID：12892160
> 
> 赞同：5
> 
> 时间：2012-10-15T08:52:10.627
> 
> 标签：intellij-idea, syntax-highlighting, inspections

我遇到了 IntelliJ 的问题，我似乎无法为自己找到解决方案。我没有更改任何设置，但是当我今天早上启动我的 IDE 时，所有检查和其他突出显示都消失了。

通过突出显示，我的意思是变量名称变成紫色，静态结尾以斜体文本显示等。

继承似乎也被破坏了，因为实现方法链接到实现的接口方法，但接口方法不链接到实现方法。

我对此的搜索告诉我右下角有一个图标。设置为“检查”，在配置下，似乎一切都设置为默认值。

有什么方法可以解开我的 IDE 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T23:49:47.877

另一种解决方案：

文件 -> 省电模式

它需要被禁用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T08:58:54.713

对此的（或至少一个）答案是：

文件 -> 使缓存无效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-23T04:21:32.693

确保代码所在的文件夹标记为源根目录。如果它没有被标记为源根，语法高亮将非常有限。

要将目录标记为源根目录，请右键单击该目录，然后向下导航到“将目录标记为”并选择“源根目录”。

[![我花了很长时间试图找出问题所在，令人尴尬。 不要评判我。 认为它可能会节省其他人一些时间来发布这个。](../Images/4001adebc5c4ce9a152f0659d8a7699c.png)](https://i.stack.imgur.com/KCKEA.png)

# javascript - 有没有办法在控制台选项卡中查看正在发生的每一件事？

> ID：12892161
> 
> 赞同：1
> 
> 时间：2012-10-15T08:52:20.937
> 
> 标签：javascript, firebug

例如，如果有幻灯片正在播放，我可以在 Firebug 的`HTML`选项卡中看到 HTML 正在发生变化。

该`Console`选项卡仅显示 console.log()-ged 的​​内容，或者是否有错误。我希望确认 Javascript 的每一行都正在执行 - 以及发生时返回/生成的任何输出/值。就像左侧的一个小光标在执行时逐行向下移动 - 并在遇到错误时立即停止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:56:09.120

在控制台中使用断点和调试。您可以在 firebug 中打开脚本并选择可以添加断点的行。然后，您可以运行您的脚本并在右侧的面板中看到很多东西。

# android - 我们如何在模拟器的图库中保存图像

> ID：12892163
> 
> 赞同：13
> 
> 时间：2012-10-15T08:52:25.760
> 
> 标签：android

我们如何将任何图像放入模拟器的图库中。我以多种方式尝试了那个，但我仍然无法将图像放入模拟器的图库中。我正在使用eclipse和ubuntu。当我进入 ~/.android/avd/ 并尝试制作图像目录时，但我真的没有这样做。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-15T09:00:20.587

脚步：-

1）转到文件资源管理器（如果没有，则从添加文件资源管理器`Windows->Show views->File Explorer`）

2）将图像推入`mnt->SDcard`

3）如何推动？单击 Eclipse 屏幕右侧的图标（将文件推送到设备中）。

3）推送文件后，进入模拟器中的开发工具。在那个去媒体扫描仪。

4）扫描后，您的图像将显示在模拟器的相册中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-25T10:02:33.097

**这仅适用于 Genymotion（Android 模拟器）**

您可以通过将任何图像从 PC 拖动到仿真器屏幕来轻松完成此操作，它将从 PC 的路径传输到仿真器下载文件夹。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-15T08:57:39.577

1.  从 启动任何模拟器`AVD Manager`。

2.  切换到`DDMS`模式

3.  在接下来的选项卡中选择`File Explorer`。您可以在模拟器中看到文件夹和文件。

4.  选择`sdcard`或`mnt/sdcard.`

5.  窗口右上方有一个推送图标`file explorer`。点击那个按钮。

6.  选择您的图像。

7.  扫描你的SD卡

`emulator -> devtools -> media scanner/media provider -> scan sdcard`

完毕..！！！

在此之前，您必须为您的模拟器提供**sd 卡支持。**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-04T03:35:25.067

将图像文件拖放到对我有用的图库中，然后关闭并重新打开图库应用程序，您将看到图像

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-06T10:54:27.277

一种简单的方法。只需同步谷歌照片，你就会在模拟器中获得图像

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-25T04:23:28.140

**只需从电脑拖放到模拟器，您就会在模拟器的下载文件夹中获得这些内容。**

# cocos2d-iphone - CCNode的位置

> ID：12892164
> 
> 赞同：1
> 
> 时间：2012-10-15T08:52:26.753
> 
> 标签：cocos2d-iphone, composition, cocos2d-x, ccsprite

[这篇文章](http://www.cocos2d-iphone.org/forum/topic/6621)讨论了将 CCSprite 子类化或将 CCSprite 作为成员的利弊。

假设我有一个 CCNode，它有一个 CCSprite 作为成员。
然后我将 CCNode 作为一个子节点添加到我的层，并将 CCSprite 添加到 CCNode。

现在我想改变CCSprite的位置，我应该改变包含CCSprite的CCNode的位置还是CCSprite本身？

如果我改变 CCSprite 的位置，CCNode 的位置会发生什么变化？

*   编辑
    这被认为是可接受的做法吗？
    我是否最好设置 CCNode 的位置，让 CCSprite 定位在 CCNode 所在的任何位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:49:14.520

当您有多个想要与节点一起移动的精灵时，将 CCSprite 添加为 CCNode 的子节点会很有帮助。

考虑一个玩家精灵的例子。假设您想在播放器下方放置一个阴影。将阴影精灵和玩家精灵都添加到父 CCNode 可以轻松移动它们。

如果您有一个没有其他想要移动的精灵的精灵，那么您不需要 CCNode 父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:00:10.500

基本上，cocos2d-x 中的所有 Node 都有一个父 Node（Scene 除外）。

更改父节点的位置会将位置更改应用于其所有子节点，

除非该子节点有自己的子节点，否则更改子节点的位置不会影响任何事情。

在您的示例中，如果更改 CCSprite 位置，CCNode 的位置将保持不变。但是，如果你改变了 CCNode 的位置，同样的改变（在屏幕上移动）也会发生在 Sprite 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:55:15.273

你想设置精灵的位置。简单的原因是该节点可能包含其他应该能够独立于精灵移动的子节点。

更改节点的位置根本不会影响父节点的位置。同样，更改父节点的位置根本不会更改子节点的位置。子节点位置是其父位置的偏移量，因此如果您移动父节点，它们将跟随，但它们的位置属性（相对于父位置）保持不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T07:47:17.643

最好移动 CCNode 的位置，因为 CCSprite 的位置也受其父节点的影响。虽然通过移动 CCSprite 的位置，您将在视觉上获得相同的结果（其父级未移动），但它使获取 sprite 的位置更加复杂和混乱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T08:56:32.057

你的精灵不会发生任何事情。如果您没有将内容大小和锚点设置为精灵的容器，则节点的位置将始终等于节点的位置 (0.f, 0.f)。因此，您的精灵的位置将与其父级（0.f，0.f）相关

# java - 在 JFrame 中设置图标

> ID：12892166
> 
> 赞同：0
> 
> 时间：2012-10-15T08:52:32.680
> 
> 标签：java, swing, icons, jframe, imageicon

我想更改项目的图标而不是 java 图标。当程序图标显示在状态栏中时，它应该显示自定义图标而不是默认的 java 图标。

我正在使用以下代码。请告诉我这段代码有什么问题。

```
class newframe extends JFrame 
{

    Container cp;
    newframe()
    {
        cp=this.getContentPane();
        cp.setLayout(null);
    }

    public static void main(String args[])
    {
        newframe frm= new newframe(); 

        frm.setbounds(0,0,1000,800);
        frm.setVisible(true);
        ImageIcon im1= new ImageIcon("path upto image");
        frm.setIconImage(im1.getImage());
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T08:57:22.217

```
..new ImageIcon("path upto image"); 
```

框架图标通常是嵌入式资源，因此必须由`URL`而不是（`String`代表路径的） a访问`File`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:01:04.277

有几件事会阻止它编译。第一的：

```
frm.setbounds(0,0,1000,800); 
```

你的“setbounds”应该有一个大写的B。通常，函数将被大小写，这样第一个单词的第一个字母是小写的，后面的单词是大写的。有关 setBounds 的文档，请参阅此链接：[setBounds](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#setBounds%28int,%20int,%20int,%20int%29)

您的 ImageIcon 路径中存在第二个问题。很难说这是否来自您的代码，或者您是否为了示例而删除了路径，但 Andrew Thompson 已经充分解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T11:05:47.057

我认为问题在于 imageicon 的声明。您应该做的不是获取直接路径，而是执行以下操作：

`ImageIcon im1= new ImageIcon("Toolkit.getDefaultToolkit(). getImage(getClass().getResource("path upto image"))");`
我对所有应用程序都这样做，并且每次都有效。

# widget - 如何在 Tkinter 中获取主框架的名称

> ID：12892180
> 
> 赞同：4
> 
> 时间：2012-10-15T08:53:31.190
> 
> 标签：widget, tkinter, frame, master

长话短说：在 Tkinter 中是否有获取小部件主框架名称的功能？

让我再告诉你一点：
有一个按钮，名为“BackButton”

```
self.BackButton = Button(self.SCPIFrame, text = "Back", command = self.CloseFrame)
self.BackButton.place(x = 320, y = 320, anchor = CENTER) 
```

当我单击此按钮时，有一个名为“CloseFrame”的函数，它关闭当前帧（并做一些其他事情），在本例中为“SCPIFrame”。但为此，我需要 Frame 的名称，其中存在 BackButton。有任何想法吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-02-23T20:21:07.080

我认为最好的方法是使用 .master 属性，它实际上是主人的实例:) 例如（我在 IPython 中这样做）：

```
import Tkinter as tk

# We organize a 3-level widget hierarchy:
# root
#   frame
#     button

root = tk.Tk()
frame = tk.Frame(root)    
frame.pack()
button = tk.Button(frame, text="Privet!", background='tan')
button.pack()

# Now, let's try to access all the ancestors 
# of the "grandson" button:

button.master   # Father of the button is the frame instance:
<Tkinter.Frame instance at 0x7f47e9c22128>

button.master.master   # Grandfather of the button, root, is the frame's father:
<Tkinter.Tk instance at 0x7f47e9c0def0>

button.master.master.master  # Empty result - the button has no great-grand-father ;) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-15T15:27:34.553

从字面上回答你的问题：

> 是否有获取 Tkinter 中小部件主框架名称的功能？

`winfo_parent`正是您所需要的。为了有用，您可以将它与`_nametowidget`（因为`winfo_parent`实际上返回父级的名称）结合使用。

```
parent_name = widget.winfo_parent()
parent = widget._nametowidget(parent_name) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T11:16:33.657

如果您使用面向对象的编程风格，主框架要么是对象本身，要么是对象的属性。例如：

```
class MyApplication(tk.Tk):
    ...
    def close_frame(self):
        # 'self' refers to the root window 
```

以非 OO 方式解决此问题的另一种简单方法是将 master 存储在全局窗口中（适用于非常小的程序，但不推荐用于必须随时间维护的任何内容），或者您可以传递它进入回调。例如：

```
self.BackButton = Button(..., command=lambda root=self.SCPIFrame: self.close_frame(root))
...
def CloseFrame(self, root):
    # 'root' refers to whatever window was passed in 
```

# iphone - 不适用于 App Store - 有人可以告诉我在哪里可以找到系统音量代码吗？

> ID：12892184
> 
> 赞同：3
> 
> 时间：2012-10-15T08:53:57.817
> 
> 标签：iphone, ios, system, volume, iphone-privateapi

仅供我个人使用！！！

我正在尝试找到可以在应用程序内更改系统音量的位置。我只想做一些事情，当我按下按钮时，它会降低亮度并降低音量（铃声），当我在开会时，我可以设置不同的“配置文件”。

我会经常使用它，因为我白天上课和开会。

有什么帮助吗？我听说过天体框架，但我在任何地方都找不到。那是我需要的吗。

同样，这不是苹果的批准:-) 提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:17:44.573

对于亮度，您可以使用以下代码（甚至是公开的）

```
[[UIScreen mainScreen] setBrightness: brightness]; 
```

`brightness`从 0.0 到 1.0 的浮点数在哪里。

对于音量。尝试以下（这些是**SpringboardService**框架中的私有 API）

```
mach_port_t SBSSpringBoardServerPort();

void SBSetMediaVolume(mach_port_t port, int volume); 
```

在这种情况下，如果它不起作用。您可以尝试使用`GSEvent`with code `kGSEventVolumeDownButtonDown`, `kGSEventVolumeDownButtonUp`, `kGSEventVolumeUpButtonDown`,`kGSEventVolumeUpButtonUp`

参考实现在这里： [http ://code.google.com/p/hid-support/source/browse/trunk/hidspringboard/Tweak.xm?spec=svn82&r=82](http://code.google.com/p/hid-support/source/browse/trunk/hidspringboard/Tweak.xm?spec=svn82&r=82)

这是越狱调整。但是，您可以提取代码，它应该可以在非越狱手机上使用。

# cakephp - 如何使用 CakePHP 在变量 var $paginate 中传递一个变量

> ID：12892186
> 
> 赞同：0
> 
> 时间：2012-10-15T08:54:00.730
> 
> 标签：cakephp, date, pagination

我的分页完美地像这样工作：

```
var $paginate = array(
            'Article' => array(
                'conditions' => array(
                    'Article.visible' => true),
                'order' => array('Article.creation_date DESC', 'Article.id DESC'),
                'limit' => 11
            )
        ); 
```

但我想用这样的发布日期过滤我的文章

```
var $paginate = array(
            'Article' => array(
                'conditions' => array(
                    'Article.visible' => true,
                    'Article.publication_date <= ' => date('Y-m-d H:i:s')),
                'order' => array('Article.creation_date DESC', 'Article.id DESC'),
                'limit' => 11
            )
        ); 
```

但是 date() 函数似乎不被接受。这不是好的语法。有人可以帮助我吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:52:26.847

如果要执行此`$this->paginate = array()`操作，则必须在分页的操作或`__construct()`函数中使用。

当对象被实例化时，你不能执行这样的函数。

对于运行时任何类型的方法调用都是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:57:33.250

您不能在类级别的数组声明中使用函数。您可以做的是`beforeFilter()`在控制器中使用回调来初始化`$paginate`变量，如下所示：

```
function beforeFilter()
{
    parent :: beforeFilter();

    $this->paginate = array(
            'Article' => array(
                'conditions' => array(
                    'Article.visible' => true,
                    'Article.publication_date <=' => date('Y-m-d H:i:s')),
                'order' => array('Article.creation_date DESC', 'Article.id DESC'),
                'limit' => 11
            )
        );
} 
```

# log4net - Log4net 每小时翻转，但 datePattern 为秒

> ID：12892188
> 
> 赞同：2
> 
> 时间：2012-10-15T08:54:20.533
> 
> 标签：log4net

我正在尝试编写一个每小时创建新文件的日志，这可以简单地使用设置为的 datePattern 来完成， **但**我需要 datePattern（或至少文件名由 yyyyMMddHHmmss 组成，但仍然每 1 小时翻转一次。

显然，当我设置它时，它会给出结果，但翻转是每秒。

我到处搜索，但找不到任何答案。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:12:10.360

Log4net 不支持这个。您可以复制滚动文件附加程序的源代码并自己实现此功能。据我所知，您不能从类派生并覆盖行为，因为日期模式用于私有方法中。

# windows-8 - 如何以编程方式获取 WinRT (Windows 8) 中的 mac 地址？

> ID：12892189
> 
> 赞同：4
> 
> 时间：2012-10-15T08:54:24.683
> 
> 标签：windows-8, windows-runtime

我正在寻找 WinRT 中的 API 来访问 mac 地址。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T09:22:12.850

您无法按说法检索 MAC 地址，但您可以检索特定于硬件的信息来识别机器（如果您正在尝试这样做）。

这是讨论该主题的完整 msdn 文章：[Guidance on using the App Specific Hardware ID (ASHWID) to implementation per-device app logic (Windows)](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431)

请注意仅使用您需要的信息而不是完整的 id，因为它可能会根据对您无用的信息（例如 Dock Station 字节）而改变。

这是一个基于几个字节（CPU id、内存大小、磁盘设备的序列号和 bios）计算设备 id 的代码示例：

```
string deviceSerial = string.Empty;
// http://msdn.microsoft.com/en-us/library/windows/apps/jj553431
Windows.System.Profile.HardwareToken hardwareToken = Windows.System.Profile.HardwareIdentification.GetPackageSpecificToken(null);
using (DataReader dataReader = DataReader.FromBuffer(hardwareToken.Id))
{
    int offset = 0;
    while (offset < hardwareToken.Id.Length)
    {
        byte[] hardwareEntry = new byte[4];
        dataReader.ReadBytes(hardwareEntry);

        // CPU ID of the processor || Size of the memory || Serial number of the disk device || BIOS
        if ((hardwareEntry[0] == 1 || hardwareEntry[0] == 2 || hardwareEntry[0] == 3 || hardwareEntry[0] == 9) && hardwareEntry[1] == 0)
        {
            if (!string.IsNullOrEmpty(deviceSerial))
            {
                deviceSerial += "|";
            }
            deviceSerial += string.Format("{0}.{1}", hardwareEntry[2], hardwareEntry[3]);
        }
        offset += 4;
    }
}

Debug.WriteLine("deviceSerial=" + deviceSerial); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T20:02:13.700

没有办法做到这一点。Windows 应用商店应用程序 API 是沙盒的，并且对您可以获得的有关用户的信息非常严格，主要是因为隐私问题。

# c# - 如何在 Linq to Entity 中为非 Unicode 字符使用 N''？

> ID：12892191
> 
> 赞同：8
> 
> 时间：2012-10-15T08:54:26.143
> 
> 标签：c#, tsql, linq-to-entities

如何在 Linq to Entity 中使用 N'' 例如在 T-SQL 中我们有以下代码：

```
select *from students where name=N'سیروان عفیفی' 
```

我有这个代码：

```
var query = from p in dbContext.Students
                            where p.Name == "سیروان عفیفی"
                            select p; 
```

我如何使用 Linq to Entity 做到这一点？

我发现[了这个](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.asnonunicode.aspx) ：

```
 var query = (from p in dbContext.Students
                             where p.Name == EntityFunctions.AsNonUnicode("سیروان عفیفی")
                            select p); 
```

但它不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:20:13.647

如果您的列类型以“n”开头，`nvarchar`或者`nchar`您不需要`N"`在值的第一个添加。

我尝试了以下方法，它适用于`nvarchar`

```
x.Name == "سیروان عفیفی" 
```

# entity-framework - 实体框架 - 自动添加未附加的项目

> ID：12892192
> 
> 赞同：1
> 
> 时间：2012-10-15T08:54:29.327
> 
> 标签：entity-framework

我使用 EF 5 和 Code First。

我有一个主要的 ViewModel，它公开了一个翻译属性。翻译由 1 到 n 个翻译项组成。Translation 属性绑定到用户控件。当通过 Viewmodel 中的 _context.Translations.Add(t) 创建和添加翻译时，翻译中的所有 TranslationItems 也会正确保存并存储在数据库中。

但是，当我尝试将新的 TranslationItem (t.TranslationItems.Add) 添加到现有翻译时，它不会保存在数据库中。context.ObjectStateManager.GetObjectStateEntries(EntityState.Added) 也没有返回任何元素，所以我猜新的翻译项仍然没有附加。由于 TranslationItem 添加在子用户控件中，因此我无法访问当前的 Datacontext 以将实体状态设置为已添加。

我能做些什么？

编辑：

```
public class Translation : BaseEntity, IValidatableObject
{

    private List<TranslationItem> _translations;
         public virtual List<TranslationItem> Translations
    { 
        get{
            return _translations;
        }
        set
        {
            _translations = value;

        }
    }s 
```

在视图模型中：

```
Translation = new Translation(); or

Translation = repo.GetTranslation(1); 
```

绑定到自定义用户控件：

```
<Views:TranslationTextInput   Translations="{Binding Translation}"/> 
```

在 UserControl 后面的代码中：

```
 Trans.Translations.Add(new TranslationItem() { Text = "", Lcid = new CultureInfo("en").LCID }); 
```

保存功能：

```
 public void Update(Translation t)
    {
        if (t.Id == 0)
            _context.Units.Add(t);
        _context.SaveChanges();
    } 
```

我在 Viewmodel 构造函数中创建上下文并将其传递给存储库类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:16:09.613

如果正确连接，ChangeTracker**应该**会自动抓取它的所有子项。但是，如果您确定已附加到上下文 ，则`Translation`可以尝试附加所有`TranslationItems`内部。`Translation``Translation`

我不确定 的`DbSet`名称`TranslationItems`，请将其更改为您命名的任何名称。

```
public void Update(Translation t)
{
    if (t.Id == 0)
        _context.Units.Add(t);

    foreach (var ti in t.Translations)
    {
         if (_context.Entry(ti).State == EntityState.Detached)
         {
             _context.TranslationItems.Attach(ti);
         }
    }

    _context.SaveChanges();
} 
```

# sql - 在存储过程中出现 if/else 错误

> ID：12892194
> 
> 赞同：2
> 
> 时间：2012-10-15T08:54:36.503
> 
> 标签：sql, sql-server-2008

我对 SQL 查询比较陌生，但我有这个存储过程，我试图获取如下所述的已声明变量的值，但出现错误，

第一行是 20 这里，

```
declare @m_ID_v int
set @m_ID_v = ( select ID_C from M_T where MName_C = @MName_parameter)

declare @g bit
if (select G_L_Column from G_L_table Where M_ID_Column = @M_ID_variable)
    set @g_v = 1
else
    set @g_variable = 0 
```

我得到的例外：

> *消息 4145，级别 15，状态 1，过程 GetID，第 20 行
> 在预期条件的上下文中指定的非布尔类型表达式，靠近“设置”。消息 156，级别 15，状态 1，过程 GetID，第 21 行关键字“else”附近的语法不正确。*

现在，如果我删除`declare @g...`并尝试解析它，则不会发生错误

**编辑**

我希望我的代码通过我的选择语句检查返回的值，所以“如果存在”并不是真正要寻找的，抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:57:03.617

[如果存在，](http://msdn.microsoft.com/en-us/library/ms188336.aspx)请尝试使用：

```
declare @g_v bit
if exists(select G_L_Column from G_L_table Where M_ID_Column = @M_ID_variable)
   set @g_v = 1
else
   set @g_v = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:59:28.513

你不能说

```
 if (select ... 
```

您必须在`if`语句中将某些内容与其他内容进行比较，或使用布尔函数，例如`exists`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T09:02:03.777

```
declare @m_ID_v int
set @m_ID_v = ( select ID_C from M_T where MName_C = @MName_parameter)

declare @g bit
if ((select G_L_Column from G_L_table Where M_ID_Column = @M_ID_variable) = value )
    set @g_v = 1
else
    set @g_variable = 0 
```

# java - 如何使用 node.js child_process API 运行 jar 文件？

> ID：12892195
> 
> 赞同：20
> 
> 时间：2012-10-15T08:54:48.740
> 
> 标签：java, javascript, node.js

我试图在 nodejs 上运行一个 jar 文件，但它抛出了以下错误：

```
Error: Unable to access jarfile /home/example/Applications/example.jar 
```

这是我在 test.js 中的以下代码：

```
var exec = require('child_process').exec, child;
child = exec('/usr/bin/java -jar ~/Applications/example.jar',
  function (error, stdout, stderr){
    console.log('stdout: ' + stdout);
    console.log('stderr: ' + stderr);
    if(error !== null){
      console.log('exec error: ' + error);
    }
}); 
```

我在这个命令中用 nodejs 运行了我的 test.js，但收到了上面的错误：

```
node test.js 
```

我的代码有什么错误吗？我不确定为什么此时会引发错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T09:07:47.520

从`.jar`_`exec();`

`.jar`java会在不使用`-jar`参数的情况下找到jar文件。否则它就像.. 寻找`filename.jar.jar`

特殊的雪花 macos 需要`.jar`并且如果省略它就不起作用。
（感谢 Gʀɪᴍ）[他还创建了一个相关问题](https://stackoverflow.com/questions/54333776/calling-a-jar-file-in-node-js-with-child-process-do-i-need-the-jar-extension)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-31T12:25:23.647

如果您在 Windows 命令提示符下使用它，则可以使用此代码。

```
var exec = require('child_process').exec, child;
child = exec('java -jar C:\\..\\..\\yourjar.jar',
function (error, stdout, stderr){
console.log('stdout: ' + stdout);
console.log('stderr: ' + stderr);
if(error !== null){
  console.log('exec error: ' + error);
}
}); 
```

不要忘记双带，否则会一团糟。

# windows-7 - 声音一旦失去就不会回来

> ID：12892199
> 
> 赞同：1
> 
> 时间：2012-10-15T08:55:17.117
> 
> 标签：windows-7, windows-xp, windows-xp-sp3

我正在开发一个产生声音的 Windows 应用程序。但有时声音，一旦静音和取消静音，就不会再回来了。我在音量控制中提高了音量，但仍然没有。

我在 HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\LowRegistry\Audio\PolicyConfig\PropertyStore 处阅读了有关添加到注册表中的应用程序相关键的解决方案。该解决方案包括在没有声音时删除与应用程序相关的键。声音确实回来了，但我遇到的问题是它是反复出现的。我的意思是，有时当该应用程序的音量再次静音时，声音会消失，但在我取消静音时无法恢复。它并不一致，有时会发生但并非总是如此！

问题：有没有办法防止这种情况发生而不必每次出现问题时都删除密钥？哪个（隐藏的）Windows 组件将密钥添加到注册表并切断声音？

谢谢你

克里斯

# ruby - 如何从中心圆的半径找到所有重叠的圆？

> ID：12892201
> 
> 赞同：5
> 
> 时间：2012-10-15T08:55:19.970
> 
> 标签：ruby, mongodb, mongodb-query, mongoid3

如何在 mongo shell 中进行交叉或重叠查询 - 哪些圆圈与我的搜索区域重叠？`Within`仅与中心位置有关，但不包括搜索范围内其他圆的半径。

蒙哥：

```
# My bad conception:
var search = [[30, 30], 10]
db.places.find({circle : {"$within" : {"$center" : [search]}}}) 
```

现在我只能获得中心点内的这个圆圈位于圆圈的搜索区域中：

红宝石：

```
# field :circle, type: Circle # eg. [ [ 30, 30 ], 10 ]
field :radius, type: Integer
field :location, :type => Array, :spatial => true
spatial_index :location

Places.within_circle(location: [ [ 30, 30 ], 10 ])

# {"$query"=>{"location"=>{"$within"=>{"$center"=>[[30, 30], 10]}}} 
```

我创建了带有附加位置（特殊索引）和半径的示例数据，而不是圆形，因为 mongodb 地理索引不支持圆形：

```
{ "_id" : 1, "name" : "a", "circle" : [ [ 5, 5 ], 40 ], "latlng" : [ 5, 5 ], "radius" : 40 }
{ "_id" : 2, "name" : "b", "circle" : [ [ 10, 10 ], 5 ], "latlng" : [ 10, 10 ], "radius" : 5 }
{ "_id" : 3, "name" : "c", "circle" : [ [ 20, 20 ], 5 ], "latlng" : [ 20, 20 ], "radius" : 5 }
{ "_id" : 4, "name" : "d", "circle" : [ [ 30, 30 ], 50 ], "latlng" : [ 30, 30 ], "radius" : 50}
{ "_id" : 5, "name" : "e", "circle" : [ [ 80, 80 ], 30 ], "latlng" : [ 80, 80 ], "radius" : 30}
{ "_id" : 6, "name" : "f", "circle" : [ [ 80, 80 ], 20 ], "latlng" : [ 80, 80 ], "radius" : 20} 
```

期望的查询结果：

```
{ "_id" : 1, "name" : "a", "circle" : [ [ 5, 5 ], 40 ], "latlng" : [ 5, 5 ], "radius" : 40 }
{ "_id" : 3, "name" : "c", "circle" : [ [ 20, 20 ], 5 ], "latlng" : [ 20, 20 ], "radius" : 5 }
{ "_id" : 4, "name" : "d", "circle" : [ [ 30, 30 ], 50 ], "latlng" : [ 30, 30 ], "radius" : 50}
{ "_id" : 5, "name" : "e", "circle" : [ [ 80, 80 ], 30 ], "latlng" : [ 80, 80 ], "radius" : 30} 
```

下面的解决方案假设我得到所有行，然后在我的半径的红宝石侧过滤，但它只返回：

```
{ "_id" : 4, "name" : "d", "circle" : [ [ 30, 30 ], 50 ], "latlng" : [ 30, 30 ], "radius" : 50} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:33:34.433

我不熟悉 mongodb 但我假设 [[x, y], r] 值的意思

> x：轴 x 上的中心值。y：y 轴中心的值。r：圆半径。

假设你有一个圆 S，这是你的搜索和一个随机的圆 A。然后你可以计算两个圆的中心（S.center 和 A.center）之间的距离，看看它是否低于添加的两个圆半径（Sr +阿尔）。

```
def distance_between(a, b)
  ((b.first - a.first)**2 + (b.last - a.last)**2)**0.5
end

elements = [{ _id: 1, name: "a", circle: [ [ 5, 5 ], 40 ] },
            { _id: 2, name: "b", circle: [ [ 10, 10 ], 5 ] },
            { _id: 3, name: "c", circle: [ [ 20, 20 ], 5 ] },
            { _id: 4, name: "d", circle: [ [ 30, 30 ], 50 ] },
            { _id: 5, name: "e", circle: [ [ 80, 80 ], 30 ] },
            { _id: 6, name: "f", circle: [ [ 80, 80 ], 20 ] }]
search = [[30, 30], 10]

elements.select do |elem| circle = elem[:circle]
  distance_between(circle.first, search.first) <= circle.last + search.last
end

#{:_id=>1, :name=>"a", :circle=>[[5, 5], 40]}
#{:_id=>3, :name=>"c", :circle=>[[20, 20], 5]}
#{:_id=>4, :name=>"d", :circle=>[[30, 30], 50]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T22:55:14.713

不幸的是，mongo 目前没有直接查询重叠对象的能力，只能查询对象内的点。

@oldergod 的回答描述了计算两个圆是否重叠的算法。

这是基于该计算的shell中的解决方法：

```
function distance(a, b) {
    return Math.pow(Math.pow(a[0] - b[0], 2) + Math.pow(a[1] - b[1], 2), 0.5);
} 
```

在插入到集合“圆圈”中的样本数据上：

```
> db.circle.find().forEach(
    function(c) {  
        if ( (distance(c.latlng, search.latlng) < c.radius + search.radius) ) 
          {   
               print(c.name); 
          } 
    } )
a
c
d
> 
```

# c# - 如何修复我的连接类？

> ID：12892203
> 
> 赞同：1
> 
> 时间：2012-10-15T08:55:30.097
> 
> 标签：c#

我是 C# 的新手

我把我的数据库连接到一个类：

```
public class Connection
{
    public string SetConnection()
    {
        string connectionstring = "server=SURI-PC;database=cms;Integrated Security=True";
        return connectionstring;
    }
} 
```

然后，我在主类中调用它：

```
public static void Main(string[] args)
{
    Connection conObject = new Connection();
    SqlConnection scon = new SqlConnection(conObject.SetConnection());
    String sql = "insert into category(cat_id, cat_name) values('C03', 'Browser')";
    SqlCommand cmd = new SqlCommand(sql, scon);
    cmd.ExecuteNonQuery();
} 
```

但它不起作用。

如何创建连接类并在其他类中调用它？

请帮我！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:27:35.967

是的，就像 zenwalker 说的那样，没有 scon.Open() 需要打开与数据库的连接。此外，当您像这样打开连接时，最好使用 using-block

```
using(SqlConnection scon = new SqlConnection(conObject.SetConnection())) {
    scon.Open();
    String sql = "insert into category(cat_id, cat_name) values('C03', 'Browser')";
    SqlCommand cmd = new SqlCommand(sql, scon);
    cmd.ExecuteNonQuery();
} 
```

另请参阅[此处](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection%28v=vs.80%29.aspx)了解有关 SqlConnection 的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:32:11.963

你可以像这样创建类

```
 public class ConClass
{
   public SqlConnection Connection()
   {
       SqlConnection con = new SqlConnection(@"Data Source=AHM-0149043-D;Integrated Security=True");
       return con;
   }
} 
```

然后随时调用它

```
 ConClass c = new ConClass();
  SqlConnection s= c.Connection(); 
```

# php - GD 渲染图像不显示撇号

> ID：12892204
> 
> 赞同：0
> 
> 时间：2012-10-15T08:55:43.010
> 
> 标签：php, gd

我制作了一个脚本，它从字符串中呈现图像。除了不显示撇号这一事实之外，这很好。空格是撇号应该在的位置。

有任何想法吗？

这是渲染代码：（字符串只是普通文本。就像报纸文章一样）

```
$text = $_SESSION['article'];

$arrText=explode("\n",wordwrap($text,69,"\n"));//change number 75 here to check the wordwrap

$im = @imagecreate(650,2500); //creates an image (width,height)
$background_color = imagecolorallocate($im, 0, 0, 0); //sets image background color
$y=5; //vertical position of text

foreach($arrText as $arr)
{
  $white=imagecolorallocate($im,255,255,255); //sets text color
  imagestring($im,5,15,$y,trim($arr),$white); //create the text string for image,added trim() to remove unwanted chars
  $y=$y+15;

}

imageantialias($im, true);
imagepng($im);
imagedestroy($im);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:24:34.117

我对您的代码进行了一些修改：

*   将高度降低到 500px

*   删除了我的 gd 版本中似乎缺少的 imageantialias

所以 ：

```
<?php

$text = "this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test";

$arrText = explode("\n", wordwrap($text, 69, "\n")); //change number 75 here to check the wordwrap

$im = @imagecreate(650, 500); //creates an image (width,height)
$background_color = imagecolorallocate($im, 0, 0, 0); //sets image background color
$y = 5; //vertical position of text

foreach ($arrText as $arr)
{
    $white = imagecolorallocate($im, 255, 255, 255); //sets text color
    imagestring($im, 5, 15, $y, trim($arr), $white); //create the text string for image,added trim() to remove unwanted chars
    $y = $y + 15;
}

header("Content-type: image/png");
imagepng($im);
imagedestroy($im); 
```

它给了我：

![在此处输入图像描述](../Images/76b5354e004d665079bfd87ebcdc64b7.png)

所以我有'我自己。有可能在您的系统中，或者在您的 gd 版本中，或某某中，`imagestring`函数不支持撇号。

您是否尝试使用`imagettftext`而不是`imagestring`？除了给您撇号之外，您还可以非常密切地自定义您的字体。

您的代码变为：

```
$text = "this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test this'is'a'test";

$arrText = explode("\n", wordwrap($text, 69, "\n")); //change number 75 here to check the wordwrap

$im = @imagecreate(650, 500); //creates an image (width,height)
$background_color = imagecolorallocate($im, 0, 0, 0); //sets image background color
$y = 5; //vertical position of text

foreach ($arrText as $key => $arr)
{
    $white = imagecolorallocate($im, 255, 255, 255); //sets text color
    //imagestring($im, 5, 15, $y, trim($arr), $white); //create the text string for image,added trim() to remove unwanted chars
    putenv('GDFONTPATH=' . realpath('.'));
    imagettftext($im, 16, 0, 15, 16 + $y, $white, 'font.ttf', trim($arr));
    $y = $y + 16 + 4; // size of font + newline space
}

header("Content-type: image/png");
imagepng($im);
imagedestroy($im); 
```

预览（使用[此](http://home.fuz.org/tests/font.ttf)字体）：

![在此处输入图像描述](../Images/5f2fb33bfc72eaf015d49b4d06faa279.png)

# selenium - 从 Selenium RC 迁移到 Webdriver

> ID：12892208
> 
> 赞同：0
> 
> 时间：2012-10-15T08:55:52.530
> 
> 标签：selenium, automation, webdriver, selenium-rc

我正在尝试迁移到 webdriver，因为它更快。我该怎么做呢？目前我正在对 selenium 使用 setUp() 命令。我需要为 webdriver 添加任何新的 jar 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:44:27.100

我想描述一下我在项目中使用的通用功能方法。我正在使用硒 webDriver。在java上工作。IDE：想法。构建经理：Maven。

所以我得到了 POM.xml 文件。所以我只是在 POM xml 中添加依赖项：

```
<dependency>
          <groupId>junit</groupId>
          <artifactId>junit</artifactId>
          <version>4.4</version>
      </dependency>

      <dependency> <groupId>org.seleniumhq.selenium</groupId>
          <artifactId>selenium-java</artifactId>
          <version>2.24.1</version>
      </dependency> 
```

在构建项目时，maven 将自动获得所需的 jars。

在我的项目中，我得到了 BaseSeleniumTest.java: 与以下内容：

```
public class BaseSeleniumTest extends SeleneseTestBase {
    static WebDriver driver;

    @BeforeClass
    public static void firefoxSetUp() throws MalformedURLException {

        driver = new FirefoxDriver();  
    }
    @Before
    public void homePageRefresh() throws IOException {
        driver.get("login.base.url");
    }

    @AfterClass
    public static void closeFirefox(){
        driver.quit();
    }
...
} 
```

还有一些从 BaseSekeniumTest.java 继承的其他类，我在其中描述了我的 selenium 测试包，这些测试由`@Test` 我的项目中的那种结构注释。

希望这对您有所帮助。

# c# - 附加属性回调不适用于 wpf VS2012 中的默认值

> ID：12892209
> 
> 赞同：2
> 
> 时间：2012-10-15T08:55:54.870
> 
> 标签：c#, wpf, callback, visual-studio-2012, dependency-properties

我正在尝试为组合框编写一个简单的附加属性，该属性通过回调更改组合框的数据源我的问题是回调函数不适用于默认值，这是我的代码

附属性类

```
namespace WpfApplication2
{
    public enum Types { Employee, Position, Task }
    public class ComboBoxAttached:DependencyObject
    {
        public static readonly DependencyProperty TypeOfProperty =
            DependencyProperty.RegisterAttached(
                "TypeOf", 
                typeof(Types), 
                typeof(ComboBoxAttached), 
                new PropertyMetadata(Types.Position, OnTypesChanged));  

        public static void SetTypeOf(DependencyObject d, Types use)
        {
            d.SetValue(TypeOfProperty, use);
        }

        private static void OnTypesChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            ComboBox cb = d as ComboBox;

            // MessageBox.Show(((Types)e.NewValue).ToString());
            switch ((Types) e.NewValue)
            {
                case Types.Employee:
                    cb.ItemsSource = SourceData.Employee;
                    break;
                case Types.Position:
                    cb.ItemsSource = SourceData.Position;
                    break;
                case Types.Task:
                    cb.ItemsSource = SourceData.Task;
                    break;
            }
        }
    }
 } 
```

数据源类别

```
namespace WpfApplication2
{
    public static class SourceData
    {
        public static List<string> Employee=new List<string>(){ "Manager","HR","CEO","CFO"};
        public static List<string> Position = new List<string>() { "Right", "Left", "Forward", "Backward" };
        public static List<string> Task = new List<string>() { "Assessment", "Measurement", "Consult", "Other" };  
    }
} 
```

xml

`<ComboBox MyProp:ComboBoxAttached.TypeOf="Position" Margin="5" />`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:13:53.480

只有在属性实际更改时才会调用回调。最初它有它的默认值，并且根据设计不会调用回调。所以你要么需要手动调用它，要么你可以使用类型的属性`Types?`（使其可以为空）手动让默认值为`null`：

```
public static readonly DependencyProperty TypeOfProperty =
            DependencyProperty.RegisterAttached(
                "TypeOf", 
                typeof(Types?), 
                typeof(ComboBoxAttached), 
                new PropertyMetadata(null, OnTypesChanged)); 
```

# wpf - 数据网格中的 Lostfocus 事件

> ID：12892210
> 
> 赞同：0
> 
> 时间：2012-10-15T08:55:58.147
> 
> 标签：wpf

我希望为 wpf 中的数据网格中的列实现失去焦点事件。我已经使用了 CellEditEnding 事件，但这是在编辑开始时而不是在结束时提出的。请有人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-21T16:26:54.140

Esam works 提供的解决方案需要稍作修改：

XAML 保持不变：

```
 <DataGrid.CellStyle>
   <Style TargetType="{x:Type DataGridCell}">
      <EventSetter Event="LostFocus" Handler="OnCellLostFocus"/>
   </Style>
</DataGrid.CellStyle> 
```

后面要修改的代码：

```
private void OnCellLostFocus(object sender, RoutedEventArgs e)
    {
        var myCell = sender as DataGridCell;
        if (myCell.Column.Header.ToString() == "Name of the column")
        {
            MessageBox.Show("tralala. I got it");
            //do whatever needed here
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T15:44:48.817

为什么不对单元格使用 LostFocus 事件，然后检查该单元格是否属于您想要的列。

例如：

```
<DataGrid.CellStyle>
   <Style TargetType="{x:Type DataGridCell}">
      <EventSetter Event="LostFocus" Handler="OnCellLostFocus"/>
   </Style>
</DataGrid.CellStyle> 
```

然后在处理程序中：

```
private void OnCellLostFocus(object sender, RoutedEventArgs e)
    {
        if (((DataGridCell)sender).Column.Header == "My Column")
            //do stuff
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:23:39.500

我已经使用了该活动，并且运行良好。我的 xml 代码看起来像

```
<DataGrid AutoGenerateColumns="False" Height="256" HorizontalAlignment="Left" Name="dgEmp" VerticalAlignment="Top" Width="490"  ItemsSource="{Binding DeleteDate,Mode=TwoWay}" Margin="6,7,0,0" CanUserDeleteRows="True" RowEditEnding="dgEmp_RowEditEnding"  CellEditEnding="dgEmp_CellEditEnding" Grid.RowSpan="3">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding ID,Mode=TwoWay}" IsReadOnly="True" Visibility="Hidden"/>
                        <DataGridTextColumn Header="Description" Binding="{Binding Description,Mode=TwoWay}" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Amount" Binding="{Binding Amount,Mode=TwoWay}" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Date" Binding="{Binding Date,Mode=TwoWay}" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Remark" Binding="{Binding Remark,Mode=TwoWay}" IsReadOnly="True"/>
                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Update" x:Name="btnUpdate"
                            Click="btnUpdate_Click"></Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Delete" x:Name="btnDelete"
                            Click="btnDelete_Click"></Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid> 
```

在我的 .cs 文件中的代码看起来像

```
 private void dgEmp_RowEditEnding(object sender, DataGridRowEditEndingEventArgs e)
        {
        var update = from p in Context.Expense_Submits where p.ID == objEmpToEdit.ID select p;
        foreach (var item in update)
            {
            item.ID = objEmpToEdit.ID;
            item.Description = objEmpToEdit.Description;
            item.Date = objEmpToEdit.Date;
            item.Amount = objEmpToEdit.Amount;
            item.Remark = objEmpToEdit.Remark;
            }
        Context.SubmitChanges();
        MessageBox.Show("The Current row updation is complete..");
        }

  private void dgEmp_CellEditEnding(object sender, DataGridCellEditEndingEventArgs e)
        {

        if (isUpdateMode) //The Row is edited
            {
            Expense_Submit exp_sub = (from exp in submit where exp.ID == objEmpToEdit.ID select exp).FirstOrDefault();
            FrameworkElement element_1 = dgEmp.Columns[1].GetCellContent(e.Row);
            if (element_1.GetType() == typeof(TextBox))
                {
                var Description = ((TextBox)element_1).Text;
                objEmpToEdit.Description = Description.ToString();

                }

            FrameworkElement element_2 = dgEmp.Columns[2].GetCellContent(e.Row);
            if (element_2.GetType() == typeof(TextBox))
                {
                var Amount = ((TextBox)element_2).Text;
                objEmpToEdit.Amount = Amount.ToString();
                }

            FrameworkElement element_3 = dgEmp.Columns[3].GetCellContent(e.Row);
            if (element_3.GetType() == typeof(TextBox))
                {
                var Date = ((TextBox)element_3).Text;
                objEmpToEdit.Date = Convert.ToDateTime(Date);
                }

            FrameworkElement element_4 = dgEmp.Columns[4].GetCellContent(e.Row);
            if (element_4.GetType() == typeof(TextBox))
                {
                var Remark = ((TextBox)element_4).Text;
                objEmpToEdit.Remark = Remark.ToString();
                }

            }

        }
 private void dgEmp_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
        objEmpToEdit = dgEmp.SelectedItem as Expense_Submit;
        } 
```

# javascript - 我如何理解高级 jquery 概念

> ID：12892212
> 
> 赞同：4
> 
> 时间：2012-10-15T08:55:59.360
> 
> 标签：javascript, jquery

每当我看到任何插件代码时，我都无法理解 80% 的代码。我也知道一些 jquery 并且已经成功使用它，但是我找不到他们在插件中所做的事情的那些方法。

通常是我在 10 行中编写的代码，它们会使用一些快捷方式并使用高级方法在 1 中完成。

例如，这是来自 jquery 文件上传插件的代码

```
 // Callback for uploads start, equivalent to the global ajaxStart event:
            start: function (e) {
                var that = $(this).data('fileupload');
                that._transition($(this).find('.fileupload-progress')).done(
                    function () {
                        that._trigger('started', e);
                    }
                );
            }, 
```

我不知道到底发生了什么，为什么函数名以下划线开头。所做的就是做的一切。

我在哪里可以找到用示例充分解释的那种东西，这样我也可以减少我的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:05:59.717

我是这样理解的：

`start`正如评论所说，是回调函数`Callback for uploads start, equivalent to the global ajaxStart event`

`var that`是当量。到：

[返回元素的命名数据存储中的值，由 jQuery.data(element, name, value) 设置，或元素的完整数据存储。](http://api.jquery.com/jQuery.data/)

设置变量时`that`，会调用一个名为的函数`_transition`，我猜它是 Ajax 调用的一些扩展，因为我们稍后会调用`done`函数。可能作者拥有作品，因此您需要搜索代码。

该函数获取[`$(this).find('.fileupload-progress')`](http://api.jquery.com/class-selector/)选择器返回的参数对象列表。

最后，我们调用`done`我猜是 eq 的函数。到[jQuery.ajax().done()](http://api.jquery.com/jQuery.ajax/)，在成功的 Ajax 请求后调用。里面完成了匿名函数的另一个回调

```
.done(function(){
    ....
}) 
```

在哪里触发了另一个`_trigger`用字符串`started`调用的函数和主函数 start 的回调事件`e`。

**And answer for your last question:**

`Where i can find that sort of stuff fully explained with examples so that i can also reduce my code?`

The truth is that without writting own stuff, you'll probably never learn that. Experience and coding is the key here. By searching for certain solutions, you'll find out new stuff like this one for example. So keep coding mate!

# c++ - 如何为模板类的所有实例专门化或重载全局模板函数？

> ID：12892219
> 
> 赞同：1
> 
> 时间：2012-10-15T08:56:14.760
> 
> 标签：c++, templates, template-specialization

如何专门化或重载函数`func`，以便专门化处理 MyClass 的所有实例？假设`func`是一个图书管理员功能（`std::swap`例如），所以我不能更改`func`，也不能替换或包装它，我必须专门处理它。

```
#include <iostream>

template<typename T>
class MyClass
{
};

template<typename T>
void func(const T&)
{
    std::cout << "Default" << std::endl;
}

// I don't want to copy this stuff for every instance of MyClass
template<>
void func<MyClass<int>>(const MyClass<int>&)
{
    std::cout << "Specialization" << std::endl;
}

int main(int, char**)
{
    func(int(0)); // "Default"

    func(MyClass<int>()); // "Specialization"

    func(MyClass<double>()); // "Default" but I want "Specialization" here

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:08:39.060

以下是您可以执行的一些示例。

```
template<typename T>
void func(const T&)
{
    std::cout << "Default" << std::endl;
}

template<template<typename> class A , typename B>
void func(const A<B>&)
{
    std::cout << "Overload All templated classes with one templated argument B" << std::endl;
}

template<typename T>
void func(const MyClass<T>&)
{
    std::cout << "Overload Myclass with some templated argument T" << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:00:04.347

如果您无论如何都无法更改全局`func`并且仍然想避免复制，那么一种方法是使用宏为您自动执行重复的内容。

```
#define Specialize(TYPE) \
template<> \
void func<MyClass<TYPE>>(const MyClass<TYPE>&) \
{ \
    std::cout << "Specialization" << std::endl; \
}

Specialize(int);
Specialize(double); 
```

如果您可以自由更改`MyClass<T>`，则将 的所有常见功能`MyClass<T>`放入一个常见的非模板基类中：

```
template<typename T>
class MyClass<T> : public MyClassBase // <---- a common base class
... 
```

并且仅重载或专门`func()`用于`MyClassBase`：

```
void func(const MyClassBase&)
{
    std::cout << "Specialization" << std::endl;
} 
```

# asp.net - 从自定义控件中获取价值

> ID：12892220
> 
> 赞同：1
> 
> 时间：2012-10-15T08:56:14.990
> 
> 标签：asp.net, custom-controls, servercontrols

我编写了一个 ASP.NET 服务器控件。

视图状态完美运行，但是当我尝试使用其公共即时方法获取自定义控件上的控件值时，它给我带来了一个异常，即没有具有该 ID 的控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:25:35.173

如果要从自定义控件中获取值，则必须在 OnInit 事件中注册控件。

```
//Register your controls
protected override void OnInit(EventArgs e) {
        var controlName = (Type)LoadControl("~/path.ascx");
        controlName.ID = "YOU_MUST_SET_AN_ID";
        placeholder.Controls.Add(controlName);
}

//get your controls (add the following in any method you like)
var controlNameCtrl = (Type)placeholder.FindControl("CONTROLID");
var propertyValue = controlNameCtrl.PropertyName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:07:57.550

当您创建自定义控件时，页面将自定义控件标识为一个实体，并且您无法直接访问自定义控件中的各个控件。

要获取自定义控件的各个元素的属性值，您应该在自定义控件中定义属性，这反过来将各个控件包装在自定义控件中。

但是，您始终可以在用户控件本身中获取包含控件的值（不是在放置它的页面中，而是在控件代码本身中。）。您还可以在自定义控件中编写事件以使其交互。

# flash - Flash ActionScript 缺少逗号 (,)

> ID：12892222
> 
> 赞同：0
> 
> 时间：2012-10-15T08:56:23.450
> 
> 标签：flash, actionscript-2

我在 ActionScript 中验证了注册表单，验证后我想显示以下消息。

```
var poptxt = "Dear Seeker,\n Please specify your Name, Gender and Birth date"; 
```

在此消息中，`,`缺少逗号 ()。

如何在验证消息中显示逗号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:57:55.320

Adobe 有一个关于嵌入字体的很棒的教程，带有视觉效果：

[http://www.adobe.com/devnet/flash/quickstart/embedding_fonts.html](http://www.adobe.com/devnet/flash/quickstart/embedding_fonts.html)

@paul 你为什么不回答？我不想偷任何东西，所以希望保罗只是回答，你可以点击他的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:06:42.330

如果您使用的是嵌入字体，请检查您嵌入了哪些字符。

在舞台上使用带有文本字段的 Flash IDE，确保您打开了“属性”窗口，单击文本字段并在属性窗口中查找“嵌入”。点击它，看看它说什么。您可以选择嵌入完整字符集或单个字符。您可能需要嵌入“标点符号”。

# php - 使用 PHP 创建和下载文件

> ID：12892229
> 
> 赞同：0
> 
> 时间：2012-10-15T08:56:59.423
> 
> 标签：php, jquery, forms, download, submit

当用户提交以下表单时，我正在尝试重写和下载 .txt 文件，但在最后一关时遇到了问题。

```
<form id="saveFile" action="index.php?download" method="POST" onsubmit="return false;">
    <input type="submit" name="backupFile" id="backupFile" value="Save a file" />
    <input type="hidden" name="textFile" id="textFile" />
</form> 
```

当按下提交按钮时，我正在运行一个 jQuery 函数，其中包含以下（简化的）代码 - 我已经取出了我实际保存的代码并将其替换为一个简单的字符串。这将设置“隐藏”输入类型，然后提交表单。

```
$("#textFile").val('This is the text I will be saving');
document.forms['saveJSON'].submit(); 
```

提交表单后，将运行以下 PHP 代码：

```
<?php 
if (isset($_GET['download'])) {

    $textData = $_POST["textFile"];
    $newTextData = str_replace("\\","",$textData);
    $myFile = "php/data.txt";
    $fh = fopen($myFile, 'w') or die("can't open file");
    fwrite($fh, $newTextData);
    fclose($fh);

    header("Cache-Control: public");
    header("Content-Description: File Download");
    header("Content-Disposition: attachment; filename='".basename($myFile)."'");
    header("Content-Type: application/force-download");
    header("Content-Transfer-Encoding: binary");
    readfile($myFile);
}
?> 
```

直到 fclose($fh); 行代码实际上工作正常；.txt 文件已使用所需的新内容进行更新，并且文件已下载。但是，当我打开下载的文件时，它包含 .txt 文件文本以及来自网页的大量内容（index.php）。

例如，文件可能如下所示

“这是我要保存的文本

这是我网站的h1

接下来是我的其余内容”

有谁知道可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:00:06.230

首先，正如 Harke 所说，您重定向（或链接）到只负责提供下载的脚本，您可以轻松地绕过

在读取文件之前清理输出缓冲区并在读取文件之后退出脚本

```
ob_clean();
    flush();
    readfile($file);
    exit; 
```

# delphi - 我可以在delphi中简化RTTI的这种使用吗？

> ID：12892230
> 
> 赞同：3
> 
> 时间：2012-10-15T08:57:01.713
> 
> 标签：delphi, delphi-xe2, rtti

我正在 Delphi XE3 中使用 RTTI 做一些工作，到目前为止，这导致调用如下过程：

```
procedure MyProc( ARecordInstance : pointer; ARecordType : PTypeInfo ); 
```

我称这个例程如下：

```
MyProc( @MyRec TypeInfo( TMyRec )); 
```

这一切都很好。

我突然想到，我也许可以将我的程序简化为：

```
procedure MyProc( var ARecord ); or procedure MyProc( ARecord : pointer ); 
```

..如果我可以在我的程序中从 ARecord 获取类型信息。但是，使用诸如“ARecord”之类的“实例”时，TypeInfo 会给出“期望类型标识符”错误，这是公平的。有什么方法可以将单个指针引用传递给我的记录，然后从中提取类型？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T21:14:43.393

如果您需要支持多种类型，您可以将您的过程包装在具有通用参数的类中，然后该过程将知道它正在使用什么数据类型，例如：

```
type
  MyClass<T> = class
  public
    class procedure MyProc(var AInstance : T);
  end;

class procedure MyClass<T>.MyProc(var AInstance : T);
var
  InstanceType: PTypeInfo;
begin
  InstanceType := TypeInfo(T);
  //...
end; 
```

.

```
MyClass<TMyRec>.MyProc(MyRec); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:40:10.547

为什么不只是使用无类型的 var 参数编写代码：

```
procedure MyProc(var ARecordInstance; ARecordType : PTypeInfo);
begin
  ... 
```

您将可以致电：

```
MyProc(MyRec,TypeInfo(TMyRec)); 
```

So avoid to type `@MyRec`. But you will also do not have strong type checking.

Using generics as proposed by Remy will allow strong typing, but will generate a bit more code.

# java - Logback - 异常的自定义输出

> ID：12892232
> 
> 赞同：5
> 
> 时间：2012-10-15T08:57:06.053
> 
> 标签：java, logging, stack-trace, logback

我对 logback 有一些特定的问题。我们已经从 log4j 迁移到 logback，一切似乎都很好，但是我们有一个异常类 MultiCauseException。正如您所猜到的 - 它可能有多个原因异常，所以问题是：我无法手动格式化堆栈跟踪以查看所有原因。

为什么它有效。Log4j 使用了 printStackTrace() 方法，您可以在 MultiCauseException 中覆盖它，问题就消失了。但是logback用的是他自己的方法，不知道怎么替换。

我想正确记录所有原因。

在课堂上我有

```
MultiCauseException nextInChain; // my cause
Throwable inner; 
        // the real exception (inner.getCause() can be != null - must be logged) 
```

和

```
 @Override
    public Throwable getCause() {
        return nextInChain;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:04:33.567

Logback 有一个叫做[Layouts](http://logback.qos.ch/manual/layouts.html)的东西，可以将事件格式化为字符串。但我仍然相信您应该能够使用[PatternLayout对其进行配置](http://logback.qos.ch/apidocs/ch/qos/logback/classic/PatternLayout.html)

# python - Python 代码生成：创建具有可变但已知数量的参数的函数

> ID：12892235
> 
> 赞同：0
> 
> 时间：2012-10-15T08:57:15.063
> 
> 标签：python, code-generation, metaprogramming

在 Python 中进行一些元编程，我必须动态创建一个函数。我的问题是直到生成代码才确定参数的数量。所以不同的生成函数会有不同名称的不同参数。但是当函数生成时，所有信息都可用，我不想使用`**args`！这是一个例子：

```
# information collected by my codgen process
arg_names = ['param_a','param_b','param_c']
some_callable = ClassDeterminedWhileGeneratingCode 
```

我想要生成的是一个像这样的函数，它将被添加到一个类中：

```
def my_fkt(self,param_a,param_b,param_c):
    instance = some_callable(param_a=param_a,param_b=param_b,param_c=param_c)
    self.do_something(instance)
    return instance.generate_result() 
```

我非常习惯于使用高阶函数生成函数，但是如果参数的数量不固定，那将无济于事。我很确定，我在某处见过使用`type.FunctionType`. 但我找不到任何关于此的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:26:17.170

看一下，

[http://snipplr.com/view/17819/](http://snipplr.com/view/17819/)

如果要操作参数名称，应将“y.func_code.co_varnames”替换为具有给定名称的元组。

干杯，乌维

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-05T20:19:28.807

试试 convtools 库，它支持 input_args 和许多其他东西，这些都是关于生成临时代码的。

# objective-c - 场景冻 结在特定动作上

> ID：12892238
> 
> 赞同：0
> 
> 时间：2012-10-15T08:57:23.447
> 
> 标签：objective-c, cocos2d-iphone

我是 cocos2d 的初学者。我有不同的精灵，它们每个都运行一些动作和动画。但是我注意到，当我尝试在动作序列中使用一些逻辑，使用`CCCalfFunc`并执行一些逻辑（更改动画、位置等）时，它会将屏幕上的所有动作冻结大约一秒钟。我猜它阻塞了主线程，但我想知道为什么它不降低帧速率？

它仍然是 60 fps，但每当我运行该动作并执行逻辑时，它都会阻塞一秒钟。**我的理解是，在更糟糕的情况下，它会降低帧速率，而不是冻结屏幕的动作。**那么在这种情况下有什么解决方案呢？我不想使用`NSOperation`，GDC，因为我正在更新精灵动画、位置等......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:27:11.563

正如@MrBonjour 提到的，我的问题是我正在使用主线程加载不在缓存中的动画。使用 GCD 解决了我的问题。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),^{
      //Load animations here
    dispatch_sync(dispatch_get_main_queue(),^{
       //Update UI, change frames, run animations,etc...
    });
}); 
```

# android - 在 Android 中是否有使用反射来打包对象的库？

> ID：12892241
> 
> 赞同：0
> 
> 时间：2012-10-15T08:57:28.737
> 
> 标签：android, reflection, parcelable, parcel

是否有一个库能够使用反射在 Android 中打包对象？类似于 Gson 但用于 Parcelization 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T12:32:14.627

我找到了这个[https://github.com/johncarl81/parceler](https://github.com/johncarl81/parceler)。这似乎是一个更好的解决方案。

# excel - VBA + 复选框 + 自动过滤器

> ID：12892252
> 
> 赞同：0
> 
> 时间：2012-10-15T08:58:11.963
> 
> 标签：excel, vba, autofilter

我在 excel 中有一个带有自动过滤器的列表，其中每一行都有一个复选框。

我制作了一个带有宏的按钮来选择所有复选框。这工作正常。但是当我过滤我的行时，我的“全选”必须**只选择可见的复选框**。

使用我的代码，它仍然选择所有复选框。有人有解决这个问题的想法吗？

我的代码：

```
 Sub SelectAll()
  Dim chk As CheckBox

  If Worksheets("Summary").FilterMode = True Then
    MsgBox "Filter mode is on"      
  Else
    MsgBox "Filter mode is off"
    For Each chk In Worksheets("Summary").CheckBoxes
      chk.Value = Checked
    Next
  End If
End Sub 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:54:19.313

我认为您的复选框被过滤器隐藏了。

在您的循环中，这可能会有所帮助：

```
Dim chkRng As Range
Set chkRng = chk.TopLeftCell
Let addr = chkRng.Address ' for debugging to verify the cell the checkbox is associated with
Dim visr As Range
Set visr = chkRng.SpecialCells(xlCellTypeVisible)
Set ans = Intersect(visr, chkRng)
If Not ans Is Nothing Then
   MsgBox ("visible")
End If 
```

# java - SSLSocketFactory 在 createSocket 风格之间的区别

> ID：12892254
> 
> 赞同：3
> 
> 时间：2012-10-15T08:58:17.907
> 
> 标签：java, ssl

在我们的产品中，我们使用 SSLSocketFactory 创建一个到服务器的 SSLSocket。在为服务器创建套接字时，我们根据产品配置使用两种方法之一：

(1) 我们创建一个标准套接字，然后将其包装在 SSLSocket 中。

```
SSLSocketFactory factory = ...
Socket s = new Socket(host, port);
SSLSocket sslSocket = (SSLSocket)factory.createSocket(s, host, port, true); 
```

(2) 我们简单地创建一个 SSL 套接字：

```
SSLSocketFactory factory = ...
Socket socket = factory.createSocket(host, port); 
```

在我们的测试环境中，这两种方法都同样有效。然而，在不同的客户站点，我们发现在某些情况下，其中一种方法会导致显着延迟，而另一种方法会立即连接（每次使用不同的方法）。这是不一致的，有时是不可重现的。

谁能说出这些连接方法之间的理论区别是什么，在什么情况下应该推荐哪一种？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:01:24.027

套接字编程中的显着延迟几乎总是 DNS 延迟。您需要知道 Java 确实反向 DNS 以及正向 DNS。确保您可以在所有主机上将所有相关的对等主机名解析为 IP 地址，反之亦然。创建要连接的 Socket 或 InetAddress 或两者都会产生延迟。如果您单独执行此操作，您将在调用 createSocket(socket, ...); 之前看到延迟。如果您通过调用 createSocket(host, port, ...) 让 SSLSocketFactory 创建自己的 Socket，则此时将发生延迟。

# ruby-on-rails - 使用多个提供者实现 Open-id 服务器

> ID：12892260
> 
> 赞同：1
> 
> 时间：2012-10-15T08:58:53.230
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-1.9

我想实现一个 openid 服务器，它可以与多个提供者交互以对用户进行身份验证。基本上我正在寻找类似 StackOverflow 的登录功能。

我正在研究 ruby​​-openid 但它似乎并没有在 2-3 年前的最后一次提交中得到维护。有人可以建议我在 Rails 3.2 中实现 Open-id 的好 gem /plugin 或资源吗

**要求 ：**

1.  应该能够托管我自己的开放 ID 服务器
2.  允许用户使用多个选项，例如（google/ blogger / yahoo..etc）
3.  应该适用于 Rails 3.2 / ruby​​ 1.9.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:10:02.707

尝试 OmniAuth

[http://www.omniauth.org/](http://www.omniauth.org/)

或者您也可以使用 RubyCAS 服务器

[http://code.google.com/p/rubycas-server/](http://code.google.com/p/rubycas-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:12:37.353

有一些有用的宝石：

*   [身份验证](https://github.com/oauth/oauth-ruby)
*   [全方位认证](http://www.omniauth.org/)

PS [ruby](https://github.com/openid/ruby-openid/) ​​-openid 实际上维护得很好 - 最后一次提交是在 18 天前... ;)
您可以通过将这一行添加到您的 Gemfile 中，将其从 Git 存储库中包含在您的应用程序中：

```
gem 'ruby-openid', :git => 'https://github.com/openid/ruby-openid.git' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:19:11.587

试试这个 OmniAuth 并观看视频，您可以轻松理解和实施

第 1 部分：[http ://railscasts.com/episodes/235-omniauth-part-1](http://railscasts.com/episodes/235-omniauth-part-1)

第 2 部分：[http ://railscasts.com/episodes/236-omniauth-part-2](http://railscasts.com/episodes/236-omniauth-part-2)

# python - 我可以创建一个使用 Flash 嵌入的跨平台 wxPython 应用程序吗？

> ID：12892263
> 
> 赞同：0
> 
> 时间：2012-10-15T08:59:01.343
> 
> 标签：python, flash, wxpython

我正在考虑创建一个我将为 Windows 和 OSX 部署的 wxPython 应用程序。我想在应用程序中包含 Flash 对象，例如 YouTube 嵌入和 Twitch.tv 嵌入。那可能吗？是否有任何资源可以解决该问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:26:50.140

您可以尝试提到的 WebView 小部件或下载单独的 webkit 端口并尝试（在 wxPython 邮件列表中搜索链接）。否则，唯一真正受支持的 wxPython 小部件是“ActiveX_FlashWindow”，我很确定这是仅限 Windows。

# admin - 从 DirectAdmin 导出电子邮件

> ID：12892265
> 
> 赞同：0
> 
> 时间：2012-10-15T08:59:20.153
> 
> 标签：admin

有没有办法从我的 DirectAdmin 中导出我所有的电子邮件帐户名称

我有 1000 个电子邮件用户，我无法一一输入

我希望我能找到一种将所有这些电子邮件名称导出为文本或类似内容的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:36:52.030

我得到了解决方案，您可以从 shell 中获取 DirectAdmin 数据库中的所有帐户，但没有 @domain.com 之类的

零点

堆

超过

流动

所以我将所有内容导出到文本文件并在最后一个字母后添加了一个类似 (( ~ )) 的符号，然后使用记事本 Ctrl + H 将 (( ~ )) 替换为 (( @domain.com ))

感谢帮助

# xslt - 使用 xslt 将 xml 转换为 jsonx

> ID：12892266
> 
> 赞同：2
> 
> 时间：2012-10-15T08:59:24.997
> 
> 标签：xslt, xslt-1.0, xslt-2.0, jsonx

任何人都可以帮助我通过数组获取以下内容..我必须生成通用的 xsl .. 输入 XML：

```
<Login>
    <Groups>
        <Group>
            <Name>john</Name>
            <Password/>
        </Group>
        <Group>
            <Name>john</Name>
            <Password/>
        </Group>
    </Groups>
</Login> 
```

输出：

```
<json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <json:object name="Login">
        <json:object name="Groups">
            <json:array name="Group">
                <json:object>
                    <json:string name="Name">john</json:string>
                    <json:string name="Password"/>
                </json:object>
                <json:object>
                    <json:string name="Name">john</json:string>
                    <json:string name="Password"/>
                </json:object>
            </json:array>
        </json:object>
    </json:object>
</json:object> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:28:10.090

更通用的解决方案。需要 XSLT 2.0

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />

    <xsl:template match="/">
        <xsl:element name="json:object">
            <xsl:apply-templates />    
        </xsl:element>
    </xsl:template>

    <xsl:template match="*[*]">
        <xsl:param name="nodeName" select="name()" />
        <xsl:variable name="firstNodeName" select="name(*[1])" />

        <xsl:element name="json:object">
            <xsl:if test="$nodeName">
                <xsl:attribute name="name" select="$nodeName" />
            </xsl:if>
            <xsl:choose>
                <xsl:when test="(count(*) > 1) and (every $x in */name() satisfies $x=$firstNodeName)">
                    <xsl:element name="json:array">
                        <xsl:attribute name="name" select="$firstNodeName" />

                        <xsl:apply-templates >
                            <xsl:with-param name="nodeName" select="''" />
                        </xsl:apply-templates>
                    </xsl:element>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:apply-templates />
                </xsl:otherwise>
            </xsl:choose>
        </xsl:element>
    </xsl:template>

    <xsl:template match="*[not(*)]">
        <xsl:element name="json:string">
            <xsl:attribute name="name">
                <xsl:value-of select="name()" />
            </xsl:attribute>
            <xsl:value-of select="text()" />
        </xsl:element>
    </xsl:template> 
</xsl:stylesheet> 
```

应用于提供的示例 XML，产生以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
    <json:object name="Login">
        <json:object name="Groups">
            <json:array name="Group">
                <json:object>
                    <json:string name="Name">john</json:string>
                    <json:string name="Password"></json:string>
                </json:object>
                <json:object>
                    <json:string name="Name">john</json:string>
                    <json:string name="Password"></json:string>
                </json:object>
            </json:array>
        </json:object>
    </json:object>
</json:object> 
```

上述解决方案在本站测试：http: [//xslttest.appspot.com/](http://xslttest.appspot.com/)

编辑：

`every $x in */name() satisfies $x=$firstNodeName`是 XPATH 2.0 构造，它检查`*/name()`序列中的所有元素是否等于 $firstNodeName。所以这整个条件实际上意味着检查一个节点是否有多个同名的子节点——这是检查我们是否处理`json:array`大小写的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-11T10:32:25.307

您可以尝试以下通用 xslt ：

```
<?xml version="1.0"?>

<xsl:stylesheet xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output omit-xml-declaration="yes" encoding="UTF-8" indent="yes"/>

<xsl:strip-space elements="*"/>

<!-- Array -->

<xsl:template match="*[*[2]][name(*[1])=name(*[2])]">

<json:object name="{name()}">

<json:array name="{name(*[1])}">

<xsl:apply-templates/>

</json:array>

</json:object>

</xsl:template>

<!-- Array member -->

<xsl:template match="*[parent::*[ name(*[1])=name(*[2]) ]] | /">

<json:object>

<xsl:apply-templates/>

</json:object>

</xsl:template>

<!-- Object -->

<xsl:template match="*">

<json:object name="{name()}">

<xsl:apply-templates/>

</json:object>

</xsl:template>

<!-- String -->

<xsl:template match="*[not(*)]">

<json:string name="{name()}">

<xsl:value-of select="."/>

</json:string>

</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-11T10:42:08.777

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
<xsl:output indent="yes" encoding="UTF-8" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />
<!-- Array -->
<xsl:template match="*[*[2]][name(*[1])=name(*[2])]">
  <json:object name="{name()}">
    <json:array name="{name(*[1])}">
      <xsl:apply-templates />
    </json:array>
  </json:object>
</xsl:template>
<!-- Array member -->
<xsl:template match="*[parent::*[ name(*[1])=name(*[2]) ]] | /">
  <json:object>
    <xsl:apply-templates />
  </json:object>
</xsl:template>
<!-- Object -->
<xsl:template match="*">
  <json:object name="{name()}">
    <xsl:apply-templates />
  </json:object>
</xsl:template>
<!-- String -->
<xsl:template match="*[not(*)]">
  <json:string name="{name()}">
    <xsl:value-of select="." />
  </json:string>
</xsl:template>
</xsl:stylesheet> 
```

# c# - Process.start() 启动的进程返回不正确的进程ID？

> ID：12892268
> 
> 赞同：25
> 
> 时间：2012-10-15T08:59:34.197
> 
> 标签：c#, .net-4.0, process, pid

我正在使用以下代码启动一个可执行文件：

```
Process proc = new Process();
proc.StartInfo.FileName = executablePath;
proc.Start();
proc.WaitForInputIdle(); 
```

在这个调用之后`proc.Id`它给了我一些整数，这不是真正的进程 ID。在任务管理器中，此进程有另一个 ID，而且我正在使用 MS UI 自动化访问此应用程序，它也返回与任务管理器中相同的 ID。所以我的问题是如何获得已启动进程的真实进程 ID？

**更新**

我发现在 Windows 7 上它可以正常工作并返回正确的 ID，但在 Windows XP 上却不行。可能是什么原因？

**设想**

应用场景如下。我有一个正在运行的嵌入式 HTTP 服务器，它不是由我实现的（[这里](http://www.codeproject.com/Articles/20445/C-Customizable-Embedded-HTTPServer)是源代码）。客户端连接到 Web 服务器并发送运行程序的请求。在我的服务器的请求处理程序中，我只是`Process.start()`用来启动请求的应用程序。作为一个 Web 服务器，该程序为连接到它的每个客户端会话创建线程（我假设是这样，因为我没有编写它）。这能以某种方式帮助识别仅存在于 Windows XP X86 Service Pack 3 上的问题吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-15T09:02:20.470

我是如何做到的一个例子：

```
 bool started = false;
    var p = new Process();

    p.StartInfo.FileName = "notepad.exe";

    started = p.Start();

    try {
      var procId = p.Id;
      Console.WriteLine("ID: " + procId);
    }
    catch(InvalidOperationException)
    {
        started = false;
    }
    catch(Exception ex)
    {
        started = false;
    } 
```

否则，请尝试使用这样的句柄：
[使用处理程序](https://stackoverflow.com/questions/1283564/unable-to-extract-processid-from-getprocessid-hwnd-pinvoke)
[获取处理程序](https://stackoverflow.com/questions/1421166/c-sharp-get-window-handle-after-starting-a-process)

```
hWnd = (int) process.MainWindowHandle;
int processId;
GetWindowThreadProcessId(hWnd, out processId);

[DllImport("user32")]
static extern int GetWindowThreadProcessId(IntPtr hWnd, out int processId); 
```

旁注：
如果您获取进程数组并遍历它们并比较 PID，会发生什么？

```
Process[] p = Process.GetProcessesByName( "testprogram" );
foreach(var proc in p)
    Console.WriteLine("Found: "+proc.Id == myExpectedProcId); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T09:30:12.883

这：

```
using (Process process = Process.Start("notepad.exe"))
{
    process.WaitForInputIdle();
    Console.WriteLine(process.Id);
} 
```

实际上对我有用：

[http://pasteboard.s3.amazonaws.com/images/1350293463417532.png](http://pasteboard.s3.amazonaws.com/images/1350293463417532.png)

任务管理器：

[http://pasteboard.s3.amazonaws.com/images/1350293536498959.png](http://pasteboard.s3.amazonaws.com/images/1350293536498959.png)

## 我的想法：

实际上，您的*进程*启动了另一个*进程*，并且*您*正在尝试获取某种启动器的 ID。（顺便说一句，它可以自己启动）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T09:39:36.980

下面还返回一个进程的PID

```
Process[] p = Process.GetProcessesByName("YourProcessName"); 
```

现在您可以使用`p[i].Id;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T10:13:21.337

我只是想在这里猜测，因为如果没有看到真实的代码就很难理解真正发生的事情。无论如何，您在其中一条评论中提到了 Trthreads。您是否有可能在主线程中初始化一个 Process 类型的单个变量 proc，然后在另一个线程中启动该进程？

如果是这种情况，可能进程不止一次启动，而您只获得其中一个的 PID。我能够重现您的案例的唯一方法是：

```
 private Process proc;
     private List<int> pids = new List<int>();

     public void StartProc()
     {
         // this tries to simulate what you're doing. Starts the process, then 
         // wait to be sure that the second process starts, then kill proc
         proc.Start();
         pids.Add(proc.Id);
         Thread.Sleep(300);
         try
         {
             proc.Kill();
         }
         catch {}
     }
     // the method returns the PID of the process
     public int Test()
     {
         proc = new Process();
         proc.StartInfo.FileName = @"notepad.exe";
         for (int i = 0; i < 2; i++)
         {
             Thread t = new Thread(StartProc);
             t.Start();
             Thread.Sleep(200);
         }
         Thread.Sleep(500);
         return proc.Id;
     } 
```

当您执行测试时，您应该会看到一个活动的记事本，并且该方法返回的 PID 与任务管理器显示的不同。但是如果你看一下 pids 列表，你应该看到任务管理器 PID 是列表中的第一个元素，而方法返回的那个是第二个。

你有没有可能做过类似的事情？

# android - 如何在点击时在 Android 中播放视频？

> ID：12892270
> 
> 赞同：1
> 
> 时间：2012-10-15T08:59:38.540
> 
> 标签：android, video

我尝试从远程 URL 播放视频并且效果很好，现在的问题是视频开始自动播放，我希望视频像 YouTube 视频一样显示，中间有一个播放按钮，点击视频应该播放.

```
public class Tabs extends Activity {
TabHost th;
VideoView video;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //Create tabs using XML 

    video=(VideoView) findViewById(R.id.VideoView);
    String path1="http://www.w3schools.com/html5/movie.mp4";
    MediaController mc = new MediaController(this);
    mc.setAnchorView(video);
    mc.setMediaPlayer(video);
    Uri uri=Uri.parse(path1);
    video.setMediaController(mc);
    video.setVideoURI(uri);
    video.start();
}
} 
```

这是我的代码，它工作得很好，但是视频会自动开始播放，我需要它来显示第一个场景，比如 YouTube 视频，中间有一个播放按钮，点击视频应该开始播放。它还应该显示视频的缩略图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:11:46.603

在 中设置视频播放器和 URL，`onCreate`并通过实现`onClickListener`.

在您的示例中（请记住导入丢失的包并创建一个 ID 为 的按钮`buttonStart`）：

```
public class Test extends Activity {
    TabHost th;
    VideoView video;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // Create tabs using XML

        video = (VideoView) findViewById(R.id.VideoView);
        String path1 = "http://www.w3schools.com/html5/movie.mp4";
        MediaController mc = new MediaController(this);
        mc.setAnchorView(video);
        mc.setMediaPlayer(video);
        Uri uri = Uri.parse(path1);
        video.setMediaController(mc);
        video.setVideoURI(uri);
        Button buttonStart = (Button) findViewById(R.id.buttonStart);
        buttonStart.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                video.start();
            }

        });

    }
} 
```

至于显示缩略图，如果你有它的 URL，你可以启动一个异步任务，它将检索远程图像并将其覆盖在视频播放器上（用于`FrameLayout`实现覆盖视图）。然后在覆盖的图像上设置一个 onClickListener （请参阅有关如何为按钮完成的代码，对于 an 可以遵循相同的逻辑`ImageView`）。只要确保将 ImageView 设置[为 clickable 即可](https://stackoverflow.com/a/7326806/1514026)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:43:25.913

好的，因为我在 ColorWP 的帮助下完成了这项工作（非常感谢），我想我会发布我所做的：

这是我使用框架布局重叠缩略图和播放图像的 xml。

```
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="292dp"
        android:layout_height="100dp"
        android:layout_x="7dp"
        android:layout_y="16dp"
        android:text="" />

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="281dp"
        android:layout_x="1dp"
        android:layout_y="138dp"
         >
    <RelativeLayout android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <VideoView
            android:id="@+id/svid"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

        <ImageView
            android:id="@+id/simg"
            android:layout_width="187dp"
            android:layout_height="137dp"
            android:src="@drawable/ic_action_search"
            android:layout_centerInParent="true" />
        <ImageView
            android:id="@+id/playimg"
            android:layout_width="100dp"
            android:layout_height="87dp"
            android:src="@drawable/animated_loading"
            android:layout_centerInParent="true" 
          />
       </RelativeLayout>
    </FrameLayout> 
```

在代码中，我所做的只是在播放图像上设置了一个 ClickListener，所以当用户在屏幕上按下播放图像时，我使用了 video.start()。效果很好:)

这是我的代码的摘录：

```
 protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single);
        vid=(VideoView) findViewById(R.id.svid);
        iv=(ImageView) findViewById(R.id.simg);
        ip=(ImageView) findViewById(R.id.playimg);
        t=(TextView) findViewById(R.id.textView1);
        final ProgressDialog pd=new ProgressDialog(SingleItem.this);

        link="http://www.w3schools.com/html5/movie.mp4";
         String path1=link;
            MediaController mc = new MediaController(this);
            mc.setAnchorView(vid);
            mc.setMediaPlayer(vid);
            uri=Uri.parse(path1);
            vid.setMediaController(mc);
            vid.setVideoURI(uri);
            vid.requestFocus();

            loadImage(thumb);

            ip.setClickable(true);
            ip.setImageResource(R.drawable.play);
            // ip.setVisibility(ImageView.INVISIBLE);
            vid.setOnPreparedListener(new OnPreparedListener() {

                @Override
                public void onPrepared(MediaPlayer mp) {
                    // TODO Auto-generated method stub
                    //ip.setVisibility(ImageView.VISIBLE);
                    pd.dismiss();

                }
            });
            ip.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                     vid.start();
                     pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                        pd.setMessage("Loading Video...");
                        pd.setIndeterminate(false);
                        pd.setCancelable(true);
                        pd.show();

                        if(vid.isPlaying()){
                             iv.setVisibility(ImageView.INVISIBLE);
                             ip.setVisibility(ImageView.INVISIBLE);
                         }else{
                             iv.setVisibility(ImageView.VISIBLE);
                             ip.setVisibility(ImageView.VISIBLE);
                         }

                }
            }); 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:04:01.483

编写 video.start(); 在你的按钮上单击侦听器。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T09:04:31.487

`onCreate`您可以添加一个按钮并向其添加一个侦听器，而不是在方法上流式传输它，并且在其单击事件上您可以流式传输视频

# c# - 在 C# 中绑定 C++ dll 时出现 EntryPointNotFoundException

> ID：12892271
> 
> 赞同：11
> 
> 时间：2012-10-15T08:59:45.027
> 
> 标签：c#, dllimport, entrypointnotfoundexcept

我尝试在我的 c# 控制台应用程序中绑定[http://msdn.microsoft.com/en-us/library/ms235636.aspx](http://msdn.microsoft.com/en-us/library/ms235636.aspx)中显示的简单 c++ dll ，但在运行时在 dll 中添加一个 EntryPointNotFoundException。我的测试课是

```
namespace BindingCppDllExample
{
    public class BindingDllClass
    {
        [DllImport("MathFuncsDll.dll")]
        public static extern double Add(double a, double b);
    }

    public class Program
    {
        public static void Main(string[] args)
        {
            double a = 2.3;
            double b = 3.8;
            double c = BindingDllClass.Add(a, b);

            Console.WriteLine(string.Format("{0} + {1} = {2}", a, b, c));
        }
    }
} 
```

什么不正确？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-15T09:28:32.020

您可以尝试在类之外声明函数并使用以下命令导出它们`extern "C"`：

标题：

```
// MathFuncsDll.h
namespace MathFuncs
{
    // Returns a + b
    extern "C" __declspec(dllexport) double Add(double a, double b);

    // Returns a - b
    extern "C" __declspec(dllexport) double Subtract(double a, double b);

    // Returns a * b
    extern "C" __declspec(dllexport) double Multiply(double a, double b);

    // Returns a / b
    // Throws DivideByZeroException if b is 0
    extern "C" __declspec(dllexport) double Divide(double a, double b);
} 
```

执行：

```
// MyMathFuncs.cpp
#include "MathFuncsDll.h"
#include <stdexcept>

using namespace std;

namespace MathFuncs
{
    double Add(double a, double b)
    {
        return a + b;
    }

    double Subtract(double a, double b)
    {
        return a - b;
    }

    double Multiply(double a, double b)
    {
        return a * b;
    }

    double Divide(double a, double b)
    {
        if (b == 0)
        {
            throw new invalid_argument("b cannot be zero!");
        }

        return a / b;
    }
} 
```

调用代码：

```
namespace BindingCppDllExample
{
    public class BindingDllClass
    {
        [DllImport("MathFuncsDll.dll")]
        public static extern double Add(double a, double b);
    }

    public class Program
    {
        public static void Main(string[] args)
        {
            double a = 2.3;
            double b = 3.8;
            double c = BindingDllClass.Add(a, b);

            Console.WriteLine(string.Format("{0} + {1} = {2}", a, b, c));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T10:25:56.133

在这种情况下，您可以下载[Dependency Walker](http://www.dependencywalker.com/)，将您的 DLL 加载到其中并查看 Export Functions 列表。您也可以为此使用[DumpBin](http://support.microsoft.com/kb/177429)。

默认情况下，从 C++ 或 C DLL 导出的函数使用[名称修饰](http://msdn.microsoft.com/en-us/library/deaxefa7%28v=vs.110%29.aspx)（也称为[名称](http://en.wikipedia.org/wiki/Name_mangling)修饰）。

正如[MSDN](http://msdn.microsoft.com/en-us/library/2ax8kbk1.aspx)上所说：

> C++ 函数的修饰名称包含以下信息：
> 
> *   函数名称。
> *   函数所属的类（如果它是成员函数）。这可能包括包含函数类的类，等等。
> *   函数所属的命名空间（如果它是命名空间的一部分）。
> *   函数参数的类型。
> *   调用约定。
> *   函数的返回类型。

`Add`例如，您的函数的修饰名称将如下所示`Add@MyMathFuncs@MathFuncs@@SANNN@Z`。

但是`extern "C" {…}`，正如 Darin Dimitrov 所建议的那样，可以通过将函数和任何函数原型封装在一个块中来强制 C++ 编译器公开 C++ 函数的未修饰名称。

尽管如果您要使用第三方 DLL（因此您不能修改它）或者您只是出于某种原因不想公开修饰名称，您可以明确指定函数的名称：

```
[DllImport("MathFuncsDll.dll", EntryPoint = "Add@MyMathFuncs@MathFuncs@@SANNN@Z")]
public static extern double Add(double a, double b); 
```

# android - 线性布局的重力

> ID：12892272
> 
> 赞同：2
> 
> 时间：2012-10-15T08:59:51.760
> 
> 标签：android, xml, button, user-interface, android-linearlayout

任何人都可以帮助我为在垂直线性布局中开发的四个按钮提供重力，这又是在带有进度条的水平线性布局中。我需要屏幕底部的整个按钮和进度条。请帮帮我。

提前致谢

```
<?xml version="1.0" encoding="UTF-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
> 

 <LinearLayout
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
>   
    <Button 
    android:id="@+id/play"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />
    <Button 
    android:id="@+id/pause"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        />
    <Button 
    android:id="@+id/back"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        />
    <Button 
    android:id="@+id/fwd"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        />

</LinearLayout>

<ProgressBar
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    style="?android:attr/progressBarStyleHorizontal"
    android:id="@+id/progressbar_Horizontal"  
  />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:34:10.833

```
 Hi @ srinivas.
    gravity for four buttons developed in a vertical linear layout which is again in horizontal  
    linear layout with progress bar, try out by this xml code.. its must helpful to you...

      <?xml version="1.0" encoding="utf-8"?>
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:background="@android:color/white"
     android:orientation="vertical" >

   <ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

          <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="10dp"
            android:orientation="horizontal"
            android:weightSum="3" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="2"
                android:text="First Name"
                android:textColor="#000000" />

            <EditText
                android:id="@+id/firstName"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@android:drawable/editbox_background_normal"
                android:ems="10"
                android:hint="First Name"
                android:maxLength="20"
                android:singleLine="true"
                android:textColor="#000000" >
            </EditText>
          </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="10dp"
            android:orientation="horizontal"
            android:weightSum="3" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="2"
                android:text="Last Name"
                android:textColor="#000000" />

            <EditText
                android:id="@+id/lastName"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@android:drawable/editbox_background_normal"
                android:ems="10"
                android:hint="Last Name"
                android:maxLength="20"
                android:singleLine="true"
                android:textColor="#000000" >
            </EditText>
           </LinearLayout>

          <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="10dp"
            android:orientation="horizontal"
            android:weightSum="3" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="2"
                android:text="UserName"
                android:textColor="#000000" />

            <EditText
                android:id="@+id/un"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@android:drawable/editbox_background_normal"
                android:ems="10"
                android:hint="User Name"
                android:maxLength="20"
                android:singleLine="true"
                android:textColor="#000000" >
            </EditText>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="10dp"
            android:orientation="horizontal"
            android:weightSum="3" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="2"
                android:text="Password"
                android:textColor="#000000" />

            <EditText
                android:id="@+id/pw"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@android:drawable/editbox_background_normal"
                android:ems="10"
                android:hint="Password"
                android:maxLength="20"
                android:password="true"
                android:singleLine="true"
                android:textColor="#000000" >
            </EditText>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="10dp"
            android:orientation="horizontal"
            android:weightSum="3" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="2"
                android:text="Email"
                android:textColor="#000000" />

            <EditText
                android:id="@+id/email"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@android:drawable/editbox_background_normal"
                android:ems="10"
                android:hint="Email"
                android:maxLength="20"
                android:singleLine="true"
                android:textColor="#000000" >
            </EditText>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="10dp"
            android:orientation="horizontal"
            android:weightSum="3" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="2"
                android:text="Phone No."
                android:textColor="#000000" />

            <EditText
                android:id="@+id/phoneNum"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@android:drawable/editbox_background_normal"
                android:ems="10"
                android:hint="Phone Number"
                android:inputType="number"
                android:maxLength="20"
                android:singleLine="true"
                android:textColor="#000000" >
            </EditText>
        </LinearLayout>

        <Button
            android:id="@+id/push_button"
            android:layout_width="150dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="10dp"
            android:background="@drawable/rounded_button"
            android:text="Send Data"
            android:textColor="#ffffff" />
       </LinearLayout>
        </ScrollView>

        </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:35:06.240

替换为以下代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
> 

 <LinearLayout
     android:id="@+id/btnLayout"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_above="@+id/progressbar_Horizontal"

>   
    <Button 
    android:id="@+id/play"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />
    <Button 
    android:id="@+id/pause"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        />
    <Button 
    android:id="@+id/back"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        />
    <Button 
    android:id="@+id/fwd"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        />

</LinearLayout>

<ProgressBar

    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    style="?android:attr/progressBarStyleHorizontal"
    android:id="@+id/progressbar_Horizontal"  

    android:layout_alignParentBottom="true"
  />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:09:41.623

```
android:gravity="bottom" 
```

将此行添加到您的垂直和水平线性布局我想这就是您正在寻找的答案

# uitableview - NSFetchedResultContoller 能做到吗？

> ID：12892277
> 
> 赞同：0
> 
> 时间：2012-10-15T09:00:03.887
> 
> 标签：uitableview, core-data, nsfetchedresultscontroller

需要一些建议：*NSFetchedResultController 可以这样做吗？*

```
UITableView:
  [section name] <= {entity: Section, value: title}
    [cell title] <= {entity: Cell, value: title}

Model:
  [entity: Section, properties: title] <->> [entity: Cell, properties: title, imgPath] 
```

麻烦： *部分的计数，它们的标题正在工作，无法从与 Cell 的关系中获取对象*

感谢帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:37:30.073

这应该是可能的。事实上，如果您创建 FRC 并`sectionNameKeyPath`设置为“section.title”，我认为您可以使用“标准”表视图数据源方法和获取结果控制器委托方法：

```
// Fetch "Cell" entities:
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Cell"];

// First sort descriptor for grouping the cells into sections, sorted by section title:
NSSortDescriptor *sort1 = [NSSortDescriptor sortDescriptorWithKey:@"section.title" ascending:YES];
// Second sort descriptor for sorting the cells within each section:
NSSortDescriptor *sort2 = [NSSortDescriptor sortDescriptorWithKey:@"title" ascending:YES];
request.sortDescriptors = [NSArray arrayWithObjects:sort1, sort2, nil];

NSFetchedResultsController *frc = [[NSFetchedResultsController alloc]
                                        initWithFetchRequest:request
                                        managedObjectContext:context
                                          sectionNameKeyPath:@"section.title"
                                                   cacheName:nil]; 
```

（我假设您`section`从*Cell*实体到*Section*实体之间存在反向关系。）

# objective-c - 同步联系人禁用 ios 6 中的 facebook 联系人

> ID：12892280
> 
> 赞同：1
> 
> 时间：2012-10-15T09:00:12.243
> 
> 标签：objective-c, facebook, ios6, contacts

我有个问题。我正在 ios 6 中制作一个应用程序，可以从我的通讯录中获取联系人，但是如果我启用了 facebook 的联系人选项，则可以从我的通讯录和 facebook 获取我的所有联系人，我想是否有可能使用代码不获取 facebook联系人。只有我认为的解决方案或合并具有相同名称的联系人或删除与@facebook.com 有电子邮件的联系人。

其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:28:51.187

检查@facebook.com 电子邮件地址是不可靠的。用户可以选择不发布该地址，非 Facebook 通讯录条目可以将其作为他们的电子邮件地址。

地址簿中有一个名为 ExternalRepresentation 的特殊字段，它似乎带有一些关于从 facebook 联系人同步的额外信息。这的第一部分似乎总是相同的。

警告：这可能不会一直有效，并且可能会在未来的某一天中断。这是无证的。

```
static NSData *facebookExtRepPrefix = [NSData dataWithBytes:"bplist00\xd4\x01\x02\x03" length:12];
#define kABPersonExternalRepresentationProperty 39 
```

然后

```
NSData *extRep = (__bridge NSData *)ABRecordCopyValue(theRecord, kABPersonExternalRepresentationProperty);
BOOL isFacebook = [[extRep subdataWithRange:NSMakeRange(0, facebookExtRepPrefix.length)] isEqualToData:facebookExtRepPrefix]; 
```

然后，您可以读取 kABPersonPersonLinkProperty (#42) - 该值在链接到它的本地联系人上将是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T06:12:03.560

使用默认来源，即`ABAddressBookCopyDefaultSource`in`ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering`给了我电话联系人（不是 Facebook 联系人）。

我没有将通讯簿中的人数作为`ABAddressBookGetPersonCount`，而是使用 allPeople 数组（从上面）来获取人数。

```
if (accessGranted) {

    ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, error);
    ABRecordRef source = ABAddressBookCopyDefaultSource(addressBook);
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(addressBook, source, kABPersonSortByFirstName);

    CFIndex nPeople = CFArrayGetCount(allPeople);//Not ABAddressBookGetPersonCount(addressBook) as that returns all contacts, Facebook included;
    items = [NSMutableArray arrayWithCapacity:nPeople];

    for (int i = 0; i < MIN(nPeople, 20); i++)
    {

        ABRecordRef person = CFArrayGetValueAtIndex(allPeople, i);

        //Do something with this person
    }
} 
```

参考：获取所有联系人：[https ://stackoverflow.com/a/17976915/1349663](https://stackoverflow.com/a/17976915/1349663)

# c++ - 如何在 C++ 中释放结构和对象数组？

> ID：12892281
> 
> 赞同：0
> 
> 时间：2012-10-15T09:00:12.970
> 
> 标签：c++, arrays, memory-leaks, struct, delete-operator

程序的结构是这样的，有一个头文件 manager.h，其中 C++ 类定义了数据成员和成员函数。然后在 manager.C 文件中实现成员函数。

我在 .c 文件中定义了 3 个结构。

```
#define HTSIZE 7

struct Node
{
int value;
int page;   
struct Node *next; 
};

struct Node *hashtable[HTSIZE];

struct lruNode{
int value;
struct lruNode *next;
struct lruNode* head;
struct lruNode* tail;

};

struct lruNode* lruhashtable[HTSIZE];
struct lruNode* lruTrackHead;
struct lruNode* lruTrackTail;

struct mruNode{
int value;
struct mruNode *next;    
 };

 struct mruNode* mruTrackHead=NULL;
 struct mruNode* mruhashtable[HTSIZE]; 
```

类的数据成员如下： 类名：页

类名：框架

班级名称：经理

所有结构都在 manager.C 中声明

manager.h 具有以下数据成员。

```
Page* pagePool;
Frame* framePool; 
```

在 manager.C 中，我将它们定义为

```
pagePool=new Page[n];
framePool=new Frame[n]; 
```

在 manager.C 的析构函数中

我正在做

```
delete[] pagePool;
delete[] framePool;
*hashtable=NULL;
*lruhashtable=NULL;
*mruhashtable=NULL; 
```

这里的结构是全局的，而不是类的一部分。这是我家庭作业的一部分。问题是在我的测试用例中，我正在转发以前的测试用例值。

我进行了编辑以按原样设置指针。现在，所有指向 struct 的指针数组的数组中的第一个值为 null。

仍然没有释放指向对象的指针数组。有人可以对此发表评论吗？

**编辑**

在遍历循环时，指针被释放。

但是指向对象的指针数组仍然不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:10:06.200

你打电话时

免费（哈希表）；

你释放分配给数组的内存

```
int value;
int page;   
struct Node * 
```

但是为 Node 指向的结构分配的内存被取消分配。

主要思想是从“最深的尖端”结构到顶部解除分配。所以试着做一个自下而上的解除分配，与它被分配的顺序相反。

# c - 带有边缘触发事件的 epoll

> ID：12892286
> 
> 赞同：4
> 
> 时间：2012-10-15T09:00:39.583
> 
> 标签：c, linux, sockets, epoll

[epoll](http://linux.die.net/man/7/epoll)的手册页有一个边缘触发的示例代码，如下所示：

```
for (;;) {
    nfds = epoll_wait(epollfd, events, MAX_EVENTS, -1);
    if (nfds == -1) {
        perror("epoll_pwait");
        exit(EXIT_FAILURE);
    }

    for (n = 0; n < nfds; ++n) {
        if (events[n].data.fd == listen_sock) {
            conn_sock = accept(listen_sock,
                        (struct sockaddr *) &local, &addrlen);
            if (conn_sock == -1) {
                perror("accept");
                exit(EXIT_FAILURE);
            }
            setnonblocking(conn_sock);
            ev.events = EPOLLIN | EPOLLET;
            ev.data.fd = conn_sock;
            if (epoll_ctl(epollfd, EPOLL_CTL_ADD, conn_sock,
                    &ev) == -1) {
                perror("epoll_ctl: conn_sock");
                exit(EXIT_FAILURE);
            }
        } else {
            do_use_fd(events[n].data.fd);
        }
    }
} 
```

在函数 do_use_fd 中，我在 while 循环中调用 nonblocked recv 直到 EAGAIN，示例代码工作正常。

我对这个示例代码有疑问，假设现在我有 50 个套接字客户端连接，突然有 10 个客户端同时写入数据，所以 epoll_wait() 将返回 10 然后进入 for 循环：

```
for (n = 0; n < nfds; ++n) 
```

它将调用 `do_use_fd(events[n].data.fd);` 这 10 个客户端，假设 n=5 已完成，而 n=6 尚未完成，突然事件 n=3 的文件描述已收到新数据，在所有这 10 个事件完成后返回 epoll_wait ，我会收到通知我有客户有新数据要读取的事件吗？否则我会错过它，因为当事件发生时，代码不在 epoll_wait 中！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T14:04:04.563

只要你一直读到`EAGAIN`报错，下次调用时就会得到事件`epoll_wait`。

该事件仅在空和非空（或满和非满`EPOLLOUT`）之间发生变化时触发，但该状态会一直保持到通过 传递事件`epoll_wait`。

在一个有点相关的说明：如果您注册`EPOLLIN`和`EPOLLOUT`事件并假设您从未填满发送缓冲区，您仍然会在每次触发`EPOLLOUT`返回的事件中设置标志- 请参阅[https://lkml.org/lkml/2011 /11/17/234](https://lkml.org/lkml/2011/11/17/234)以获得更详细的解释。`epoll_wait``EPOLLIN`

最后，边缘触发模式的确切行为实际上取决于所使用的套接字类型，并且在任何地方都没有真正记录。我前段时间做了一些测试，并在这里记录了我的发现：http: [//cmeerw.org/blog/753.html#753](http://cmeerw.org/blog/753.html#753) - 简而言之，对于数据报套接字，您可能会收到比预期更多的事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-01T10:21:26.830

当你在 epoll 下使用 Edge Triggered 时，读一些东西，可以这样

```
int n = -1;
while (1)
{
    n = recv(fd, iobuf, init_buff_size, MSG_DONTWAIT);
    if (n > 0)
    {
        LOG(glogfd, LOG_TRACE, "fd[%d] recv len %d\n", fd, n);
        mybuff_setdata(&(curcon->recv_buff), iobuf, n); // this is my func
        if (n == init_buff_size)
        {
            LOG(glogfd, LOG_DEBUG, "fd[%d] need recv nextloop %d\n", fd, n);
            continue;
        }
        break;
    }
    if (n == 0)
    {
        LOG(glogfd, LOG_ERROR, "fd[%d] close %s:%d!\n", fd, ID, LN);
        return do_close(fd);
    }
    if (errno == EINTR)
    {
        LOG(glogfd, LOG_TRACE, "fd[%d] need recv again!\n", fd);
        continue;
    }
    else if (errno == EAGAIN)
    {
        LOG(glogfd, LOG_TRACE, "fd[%d] need recv next!\n", fd);
        modify_fd_event(fd, EPOLLIN);   // this is the KEY, add read again
        break;
    }
    else
    {
        LOG(glogfd, LOG_ERROR, "fd[%d] close %s:%d!\n", fd, ID, LN);
        return do_close(fd);
    }
} 
```

# blackberry - 如何找到当前的黑莓设备是否支持印地语（或古吉拉特语）？

> ID：12892289
> 
> 赞同：1
> 
> 时间：2012-10-15T09:00:50.027
> 
> 标签：blackberry

嗨黑莓开发人员，

我实现了一个针对 OS6 及更高版本的应用程序。在这里，我正在将包含一些印度（古吉拉特语）语言的 url 加载到 browserField 中。这里我的问题是文本正确显示了一些设备但不是全部。它在 Bold 9780 OS6 中正确显示文本，但 Tourch 9800 OS7 显示不正确。它只显示矩形框。所以我需要知道我的设计支持古吉拉特语不是第一个。

我正在使用一些代码来获取可用语言的列表

```
Locale []loc1=Locale.getAvailableInputLocales();
            for(int i=0;i<loc1.length;i++)
            {
                System.out.println("=====1: "+loc1[i].getLanguage()+"======"+loc1[i].getDisplayLanguage());
                RichTextField rh1=new RichTextField("ISO: "+loc1[i].getLanguage()+"==name: "+loc1[i].getDisplayLanguage(),Field.FOCUSABLE);
                add(rh1);
            }
   String []loc2=Locale.getISOLanguages();
            for(int i=0;i<loc2.length;i++)
            {
                System.out.println("=====2: "+loc2[i]);
                RichTextField rh2=new RichTextField("ISO: "+loc2[i],Field.FOCUSABLE);
                add(rh2);
            } 
```

在这两种情况下，它都显示为附件。奇怪的是，在这两个数组中，我都没有找到任何名为“Gujarathi”或“gu（ISO 代码）”的语言。但在我的 9780 上完美显示数据但 9800 没有显示。

所以在这里我想知道这背后的原因是什么？

1）如果假设我的设计支持“古吉拉特语”语言，那么为什么它没有在 Locale.getISOLanguages() 中显示它的名称；或 Locale.getAvailableInputLocales();？

2）我们如何知道当前设备可以支持所需的语言语言？

我也尝试使用桌面管理器--->应用程序------->可用语言，即使在这里我也没有找到任何与印度语言相关的东西

我需要回答客户这背后的原因是什么？

我护目镜 12 小时。但没用所以我决定你是我唯一的希望？ ![在此处输入图像描述](../Images/9f83edcbeedaf0f250fd9cdaf978e660.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:28:42.960

尝试检查本地化演示

[http://docs.blackberry.com/en/developers/deliverables/33805/Localization_sample_app_files_1791764_11.jsp](http://docs.blackberry.com/en/developers/deliverables/33805/Localization_sample_app_files_1791764_11.jsp)

# redis - Redis 键匹配性能

> ID：12892292
> 
> 赞同：3
> 
> 时间：2012-10-15T09:00:56.460
> 
> 标签：redis, sorl-thumbnail

我们将 Redis 用于键值普通缓存和缩略图缓存。在具有 100 多个站点的机器中，Redis 缩略图数据库有 500000 个没有独特前缀的键，例如：

```
"sorl-thumbnail||image||6c4a67b016c4f867b9fdd3e5c5609887"
"sorl-thumbnail||image||ad7c56bd5461e9061604867d056b5de8"
"sorl-thumbnail||image||655ad6bb21129326ef4618df83a0f1f7"
"sorl-thumbnail||thumbnails||871641bfefa6250518fe52b86cf742c9"
"sorl-thumbnail||thumbnails||570565770557013bada8c1fe2cb3d658"
"sorl-thumbnail||image||c01134f4a8746d24c6d62543419bbb3a"
"sorl-thumbnail||image||ecc5afb281bc78fefe3046e2cc3f972a"
"sorl-thumbnail||image||670f1f1b6c5660f46053a484e22a4071" 
```

使用 001,002,003,... 100 之类的前缀作为站点 ID 是否会提高访问 Redis 的性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T17:05:44.700

因为主字典的数据结构是哈希表而不是树，所以如果你有大量具有公共前缀的键，Redis 的一般性能不会受到真正的影响。

用一些有区别的数据为密钥添加前缀并不能真正提高性能。

# javascript - 在平板电脑上运行时将点击事件转化为触摸事件

> ID：12892297
> 
> 赞同：2
> 
> 时间：2012-10-15T09:01:31.150
> 
> 标签：javascript, jquery, ipad

我为小学生制作了一个拼写游戏。我想在我的游戏触摸事件中制作点击事件，以便它可以在平板电脑上兼容。有没有办法可以将它们放在我的点击事件旁边，以便一个程序兼容两者，还是我必须制作平板电脑版本？

在这里，我以我的一个点击事件的代码为例

```
$('.drag').on('click', function(e) {
e.preventDefault();
if (animation) return;
animation = true;
setTimeout(function() {
    animation = false;
}, 700);
$(".minibutton").css('visibility', 'hidden');
$('.next').css('visibility', 'hidden');

var target = $('.drop-box.spellword:not(.occupied):first');
var targetPos = target.position();
var currentPos = $(this).offset();
var b = $(this);

if (target.length) {
    target.addClass("occupied");
    b.clone().addClass(
    b.data("letter") == target.data("letter") ? "wordglow3" : "wordglow").appendTo("table").css({
        background: "transparent",
        position: "absolute",
        top: currentPos.top,
        left: currentPos.left
    }).animate({
        top: targetPos.top,
        left: targetPos.left
    }, "slow", function() {
        $(this).css({
            top: 0,
            left: 0
        }).appendTo(target);

        var spellWord = $('.drop-box.spellword');
        if (!spellWord.filter(':not(.occupied)').length) {
            var wordIsCorrect = 0;
            spellWord.each(function() {
                if ($(this).data("letter") == $(this).find("div").data("letter")) {
                    wordIsCorrect++;
                }
            });

            if (spellWord.length == wordIsCorrect) {

                spellWord.addClass('wordglow2');
                $(right).val('Right!');
                $(right).show();
                success.play();
                $(wrong).hide();
                score.right++;
                score.attempts++;

                if (score.right == 3) {

                    $('.answers').css('visibility', 'visible');
                    $('.answers').html("Well done! </br> You correctly spelt " + score.right + ". </br> Keep it up.").show();
                    $('table').fadeOut(3000);
                    $('.right').hide();
                    $('.box-style2').hide();
                    $('.box-style').hide();
                    $('.picstyle').hide();
                    $('.play').hide();
                    $('.minibutton2').hide();
                    $("#mysoundclip").attr('src', listOfWords[rndWord].audio);
                    audio.stop();
                    $("#mypic").attr('src', listOfWords[rndWord].pic);
                    pic.hide();

                }

                setTimeout(function() {
                    jQuery('.minibutton').trigger('click');
                }, 1500);

                setTimeout(function() {
                    jQuery(right).hide();
                }, 1500);

            } else {

                //spellWord.addClass("wordglow4").css('color', 'transparent');
                $(wrong).val('Wrong!');
                $(wrong).show();
                failure.play();
                $(right).hide();
                score.wrong++;
                score.attempts++;

                if (score.wrong == 3) {

                    $(".minibutton").css('visibility', 'visible');
                    $('.next').css('visibility', 'visible');

                }

                $('.drop-box.spellword').animate({
                    'opacity': 1
                }, 1500, function() {
                    $(this).removeClass('wordglow4').removeClass('occupied').html('')
                });

                setTimeout(function() {
                    jQuery(wrong).hide();
                }, 1500);

            }
        }
    });

}

}); 
```

有人可以指出我正确的方向，因为我以前从未这样做过。

这是一个帮助的小提琴（声音警告！！）[http://jsfiddle.net/smilburn/7Y7A5/8/](http://jsfiddle.net/smilburn/7Y7A5/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:12:40.660

您可以添加点击事件并在您的移动版本中包含 jQuery Mobile。

```
$('.drag').on('click tap', function(e) {...} 
```

# c# - 什么是 GC 漏洞？

> ID：12892298
> 
> 赞同：6
> 
> 时间：2012-10-15T09:01:31.883
> 
> 标签：c#, .net, memory-leaks, garbage-collection

我用 C# 编写了一个长 TCP 连接套接字服务器。我的服务器中的内存出现峰值。我使用 dotNet Memory Profiler（一种工具）来检测内存泄漏的位置。Memory Profiler 显示私有堆很大，内存如下图（数字不是真实的，我想展示的是 GC0 和 GC2 的 Holes 非常非常大，数据大小正常）：

```
 Managed heaps - 1,500,000KB 
          Normal heap - 1400,000KB 
              Generation #0 - 600,000KB 
                  Data - 100,000KB 
                  "Holes" - 500,000KB 
              Generation #1 - xxKB 
                  Data - 0KB 
                  "Holes" - xKB 
              Generation #2 - xxxxxxxxxxxxxKB 
                  Data - 100,000KB 
                  "Holes" - 700,000KB 
          Large heap - 131072KB 
              Large heap - 83KB 
              Overhead/unused - 130989KB 
          Overhead - 0KB 
```

但是，什么是 GC 漏洞？dotNet Memory Profiler 的文档确定了“漏洞”：

> “空洞”表示两个分配的实例之间未使用的内存。由于固定实例或垃圾收集器中的优化，当堆未完全压缩时会出现“空洞”。

我想知道的是：

1.  “洞”出现在哪两种分配的实例之间？
2.  固定什么样的实例？
3.  如何压缩堆？

我希望有人能解释一下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T12:59:30.777

固定[对象](https://stackoverflow.com/questions/2490912/what-are-pinned-objects)是不允许在内存中移动的对象。在使用非托管代码时通常需要这样做，这需要您传递指向内存中某个结构的指针 - 默认情况下，垃圾收集器可以自由移动该结构以最好地管理内存，但是如果它在您这样做时已经给一些非托管代码一个指向该结构的指针，那么如果它移动该非托管代码将不再指向正确的结构，从而导致意外行为。

解决方案是“固定”该对象以告诉 GC 它不应该移动它。

您不能显式压缩堆，GC 在执行完全或部分收集时应该这样做（除了[LOH](http://msdn.microsoft.com/en-us/magazine/cc534993.aspx)） - 固定大量对象将使其更难成功管理它。有关 GC 的更多详细信息，请参阅[垃圾收集器基础知识和性能提示](http://msdn.microsoft.com/en-us/library/ms973837.aspx)

# git - 带有开发和生产环境的 Git

> ID：12892300
> 
> 赞同：6
> 
> 时间：2012-10-15T09:01:38.163
> 
> 标签：git

我是 git 新手，正在寻找使用 git 设置开发和生产环境的最有效方法。

我在一些项目上进行本地开发，比如：

```
project1.local
project2.local
project3.local 
```

当我准备好时，我将更改推送到服务器，beta 测试人员可以在其中使用它：

```
beta.project1.com
beta.project2.com
beta.project3.com 
```

只有当 betatest 成功时，我才会将更改推送到生产域：

```
www.project1.com
www.project2.com
www.project3.com 
```

我确实了解如何连接 project1.local 和 beta.project1.com。但是，我真的不明白如何设置 beta.project1.com 和 www.project1.com 之间的连接以将测试的功能推送到生产中。

git 适合我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T09:20:32.073

选中“*[一个成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)*”来或多或少地做你想做的事。

`git`您可以拥有多个存储库 ( `git remote --help`) 。因此，在生产中，您可以让存储库指向`beta`，并从那里提取更改。在 Beta 版中，您可以同时拥有`production`和`development`从开发中提取更改并将它们推送到`production`. 对于每种情况，您都应该处理分支，在这种情况下，给出的链接应该给您足够的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:36:28.687

您可以使用挂钩或持续集成工具，根据更新的分支触发不同的部署目标。

你会有一个中央回购，有`beta`和`production`分支。当你想发布到 beta 版本时，将其提交到`beta`分支，然后推送到中央仓库。然后钩子或脚本，识别出`beta`分支已经更新，采取行动并相应地部署到 beta 服务器。

生产提交也是如此。

# android - 如何在android应用程序上找到两个日期的差异

> ID：12892302
> 
> 赞同：6
> 
> 时间：2012-10-15T09:01:43.037
> 
> 标签：android, date

> **可能重复：**
> [在java中计算日期/时间差](https://stackoverflow.com/questions/5351483/calculate-date-time-difference-in-java)

我是 Android 新手，我想为我制作一个新应用。我想使用 currentDate 减去两个日期（dd/mm/yyyy）格式。例如，我想找出 01/02/2013 和 currentDate 之间的天数差异。我该怎么做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-15T09:03:19.540

```
SimpleDateFormat dfDate  = new SimpleDateFormat("dd/MM/yyyy");
    java.util.Date d = null;
    java.util.Date d1 = null;
    Calendar cal = Calendar.getInstance();
    try {
            d = dfDate.parse("01/02/2012 ");
            d1 = dfDate.parse(dfDate.format(cal.getTime()));//Returns 15/10/2012
        } catch (java.text.ParseException e) {
            e.printStackTrace();
        }

    int diffInDays = (int) ((d.getTime() - d1.getTime())/ (1000 * 60 * 60 * 24));
    System.out.println(diffInDays); 
```

检查[Ex1](http://www.java2s.com/Tutorial/Java/0040__Data-Type/FindtheDifferenceBetweenTwoGivenDates.htm)和[Ex2](http://www.kodejava.org/examples/90.html)以获得更详细的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:16:05.943

您可以查看[DateUtils](http://developer.android.com/reference/android/text/format/DateUtils.html)，它提供了一些实用方法来计算两个日期之间的经过时间，但仅用于表示。不要使用直接方法在天/毫秒之间进行转换，因为它不考虑闰年、闰秒、夏季/冬季时间变化等。这些考虑由 Calendar 类处理。

**更新** 您可以使用[Joda](http://joda-time.sourceforge.net/)库来执行您需要的相对日期和时间计算。

# java - Jackson：使用单个条目将字符串序列化/反序列化为数组

> ID：12892306
> 
> 赞同：1
> 
> 时间：2012-10-15T09:01:58.550
> 
> 标签：java, rest, jackson, restlet

我目前正在编写一个使用 RESTful 服务的 Java 客户端，使用 Restlet 包及其 Jackson 扩展。我想查询用户的服务并反序列化对`User`POJO 的响应，如下所示：

```
@JsonIgnoreProperties(ignoreUnknown=true)
public class User {

    private Integer uid;    
    private String name;
    private String mail;
    private String field_nickname;

    // omitted for brevity: getters/setters, toString
} 
```

来自服务的示例响应如下所示：

```
{
    "uid": "5",
    "name": "John Doe",
    "mail": "john@example.com",
    "field_nickname": {
        "und": [{
            "value": "jdoe",
            "format": null,
            "safe_value": "jdoe"
        }]
    }
} 
```

这是Java客户端代码：

```
import org.restlet.resource.ClientResource;
public class TestClient {

    public static void main(String[] args) throws Exception {
        // Getting a User
        ClientResource cr = new ClientResource("http://localhost/rest/user/7.json")
        User user = cr.get(User.class);
        System.out.println(user);

        // Creating a User
        cr = new ClientResource("http://localhost/rest/user.json");
        User user = new User();
        user.setName("Jane Doe");
        user.setFieldNick("jdoe2");
        user.setMail("jdoe2@example.com");
        cr.post(user);
    } 
```

和字段的序列化/反序列化`uid`非常简单，不会造成任何问题。我的问题是：该字段始终包含具有单个条目的数组，该条目始终看起来相同。`name``mail``field_nickname``und`

我如何告诉杰克逊将此字段反序列化为`String`保存属性值`field_nickname[und][0][value]`并将属性序列化为此类数组的 a？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:35:25.897

这是一种一次性的结构转换，您需要编写自己的处理程序。最简单的方法可能只是实现类似的东西：

```
@JsonProperty("field_nickname")
public void setNickname(NicknameWrapper[] wrapper) {
   field_nickname = wrapper[0].value;
}

@JsonIgnoreProperties(ignoreUnknown=true)
static class NicknameWrapper {
   public String value;
} 
```

或许也可以反转 (getNickname())。

# c++ - 确定一个元素是否被插入到哈希映射中

> ID：12892309
> 
> 赞同：0
> 
> 时间：2012-10-15T09:02:04.270
> 
> 标签：c++, hashmap

我正在使用 Google 的[sparsehashmap](http://google-sparsehash.googlecode.com/svn/trunk/doc/sparse_hash_map.html)，并尝试确定是否插入或查找了一个值。以下工作，但显然它正在查找两次。如果没有双重查找，我该怎么做？

```
Element newElement = Element();
bool  inserted = ((*map).insert(pair<const int64, Element>(key, newElement))).second;
Element element = (*(((*map).insert(pair<const int64, Element>(key, newElement))).first)).second;
if (inserted)
    puts("INSERTED"); 
```

我无法检查 Element 的内容（它是一个结构），因为我想区分找到的默认 Element 和插入的 newElement。我不知道如何分配`((*map).insert(pair<const int64, Element>(key, newElement)))`给一个变量，因为它是一个模板类型，其中包括类私有的`sparse_hash_map`类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:06:23.307

试试这个：

```
typedef sparse_hash_map<...>::iterator sh_iterator; //you already have this, haven't you?

std::pair<sh_iterator, bool> res = map->insert(std::make_pair(key, newElement));
if (res.second)
    puts("INSERTED"); 
```

如果出于某种原因你不喜欢这个`std::make_pair`函数，你应该考虑为 pair 类型使用 typedef：

```
typedef pair<const int64, Element> map_pair; 
```

无论如何，返回类型`insert`是`pair<iterator, bool>`，AFAIK`iterator`是该类的公共 typedef。

顺便说一句，我不明白你为什么要做第二个`insert`......以获得插入的元素？可能您应该声明`element`为参考。在我建议的代码中：

```
Element &element = res.first->second; 
```

当然，如果您使用的是 C++11，您可以简单地执行以下操作：

```
auto res = ...; 
```

# jasper-reports - Jasper 报告最后排序空/空值

> ID：12892311
> 
> 赞同：1
> 
> 时间：2012-10-15T09:02:09.170
> 
> 标签：jasper-reports

我在报告组和子组中，需要按字母顺序对它们进行排序，但我希望最后将空值或空值排序。是否有选择或一些解决方法来做到这一点？谢谢帕维尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T10:23:20.687

您可以借助排序选项和附加变量来实现此结果。

步骤：

*   添加变量以确定字段是空还是空。例如，在[guava 库](http://code.google.com/p/guava-libraries/)的帮助下，这个变量的表达式可以是这样的（参见[Strings.isNullOrEmpty(String) 方法](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Strings.html#isNullOrEmpty%28java.lang.String%29)）

```
<variable name="isNull" class="java.lang.Integer">
    <variableExpression><![CDATA[Strings.isNullOrEmpty($F{fieldName})]]></variableExpression>
</variable> 
```

*   添加两个排序指令 - 按我们的新变量排序（首先）和按字段排序（其次）

```
<sortField name="isNull" order="Ascending" type="Variable"/>
<sortField name="fieldName"/> 
```

* * *

完整的工作样本。*jrxml*文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ...>
    <import value="com.google.common.base.*"/>
    <field name="id" class="java.lang.Integer"/>
    <field name="city" class="java.lang.String"/>
    <sortField name="isNull" order="Ascending" type="Variable"/>
    <sortField name="city"/>
<variable name="isNull" class="java.lang.Integer">
    <variableExpression><![CDATA[Strings.isNullOrEmpty($F{city})]]></variableExpression>
</variable>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="100" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{city}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

用于测试的 Java 代码：

```
private void testReport() throws JRException {
    JasperReport jasperReport = JasperCompileManager.compileReport(reportSource);
    JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, params, getDataSource());

    JasperExportManager.exportReportToPdfFile(jasperPrint, outputFileName);
}

private JRDataSource getDataSource() {
    Collection<Address> list = new ArrayList<Address>();

    list.add(new Address(1, "Dallas"));

    list.add(new Address(2, "Dallas"));

    list.add(new Address(3, "Dallas"));

    list.add(new Address(5, null));

    list.add(new Address(4, ""));

    list.add(new Address(6, "Boston"));

    list.add(new Address(7, "Chicago"));

    list.add(new Address(8, "Dallas"));

    list.add(new Address(9, ""));

    list.add(new Address(10, null));

    list.add(new Address(11, null));

    return new JRBeanCollectionDataSource(list);
} 
```

在此示例中，***地址***是一个简单的*POJO*：

```
public class Address {

    private Integer m_id;
    private String m_city;

    public Address(Integer id, String city) {
        m_city = city;
        m_id = id;
    }

    public Integer getId() {
        return m_id;
    }

    public String getCity() {
        return m_city;
    }
} 
```

结果将是（生成的*PDF*文件）：

![*PDF* 格式生成的报告](../Images/5da76a6d795acde0fe2a3862a6737cea.png)

在示例中，我使用了基于*Java bean*的数据源，但此方法也适用于*jdbc*数据源。

* * *

您可以通过替换排序选项轻松进行反向排序（将***order***属性的值从**Ascending**更改为**Descending**）：

```
<sortField name="isNull" order="Descending" type="Variable"/> 
```

此表达式将对数据进行排序，以便在列表顶部显示空值和空值。

# android - 接收器中不存在 onDestroy 方法。什么是替代品？

> ID：12892312
> 
> 赞同：0
> 
> 时间：2012-10-15T09:02:12.800
> 
> 标签：android

我正在使用一个`Service`并且我动态注册一个接收器，例如

```
private BroadcastReceiver yourCallReceiver;
 yourCallReceiver = new CallReceiver();

        // Registers the receiver so that your service will listen for broadcasts
        registerReceiver(yourCallReceiver, theCallFilter); 
```

并取消注册

```
@Override
    public void onDestroy() {
        super.onDestroy();

        // Do not forget to unregister the receiver!!!
        unregisterReceiver(yourCallReceiver);
    } 
```

但是我遇到问题，当我取消注册接收器时我需要关闭一些工作，但接收器没有`onDestroy`方法。我怎样才能做到这一点？取消注册服务中的接收器时，如何停止某些第三方工作？这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:50:19.797

在您的自定义类中添加一个名为`onDestroy`（或任何您想调用的方法）的方法`CallReceiver`，如下所示：

```
public void onDestroy(){
  //Write your clean-up code here
} 
```

在您的 Service 中`onDestroy`，调用`onDestroy`您的接收器对象：

```
public void onDestroy() {
    super.onDestroy();
    // Do not forget to unregister the receiver!!!
    unregisterReceiver(yourCallReceiver);
    yourCallReceiver.onDestroy();
} 
```

# c# - 具有重复索引键的二维数组

> ID：12892313
> 
> 赞同：0
> 
> 时间：2012-10-15T09:02:17.623
> 
> 标签：c#, asp.net

我想把这行代码从 php 翻译成 asp.net

```
$subid[$value['parentid']][] = $value['id']; 
```

我不熟悉asp.net数据结构，我试过arraylist但不能在[1]插入，字典不允许重复键，有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:27:17.883

您可以使用字典稍作调整来实现您想要的。

你创建一个这样的字典：

```
Dictionary<string, List<string>> myDictionary = new Dictionary<string, List<string>>(); 
```

您向其中添加项目，例如：

```
if(myDictionary.ContainsKey("myKey")) myDictionary["myKey"].Add("myItem");
else
{
myDictionary.Add("myKey", new List<string>(){"myItem"});
} 
```

如果您要求某个键，它将返回对包含所有相关项目的列表的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:08:06.287

我不熟悉 PHP（不再）并且 SO 不是翻译服务，但您可以使用

*   [`List<Tuple<int, int>>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

或者

*   [`Lookup<int, int>`](http://msdn.microsoft.com/en-us/library/bb460184.aspx)

相反（假设您的 id 是整数）。

* * *

```
var list = new List<Tuple<int, int>>();
list.Add(Tuple.Create(1, 1));
list.Add(Tuple.Create(1, 2));
list.Add(Tuple.Create(2, 3));
list.Add(Tuple.Create(2, 4));
list.Add(Tuple.Create(3, 5)); 
```

有了[`Enumerable.ToLookup`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.tolookup.aspx)你可以创建一个`Lookup`.

```
var lookup = list.ToLookup(t => t.Item1, t => t.Item2); 
```

查找 parent-id = 1 的所有产品：

```
var parentID1 = lookup[1];
foreach (var value in parentID1)
    Console.Write(value); 
```

# sonarqube - 如何在詹金斯上粘贴声纳链接

> ID：12892315
> 
> 赞同：1
> 
> 时间：2012-10-15T09:02:18.690
> 
> 标签：sonarqube

我已经用声纳设置了 jenkins 来分析我在 ANT 中的项目。

我使用属性文件的路径调用了“独立声纳分析”，它运行良好，但是在测试完成后，它不会创建声纳文件夹来查看结果，所以我如何使声纳链接对我的最终用户可用jenkins 页面，以便他们可以轻松点击查看结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:40:12.910

你正面临这个限制：http: [//jira.codehaus.org/browse/SONARPLUGINS-1522](http://jira.codehaus.org/browse/SONARPLUGINS-1522)

我们在这个“链接”主题上打开了几个问题，我们将在 Jenkins sprint 的下一个 sprint 中处理它们（您可以在[我们的 JIRA 实例](http://jira.codehaus.org/secure/IssueNavigator.jspa?reset=true&jqlQuery=project%20=%20SONARPLUGINS%20AND%20component%20=%20%22Jenkins%20/%20Hudson%22%20AND%20resolution%20=%20Unresolved%20AND%20fixVersion%20is%20EMPTY%20ORDER%20BY%20priority%20DESC)上找到并观看它们）。

# ckeditor - CKEditor - 更改可用选项

> ID：12892318
> 
> 赞同：0
> 
> 时间：2012-10-15T09:02:41.483
> 
> 标签：ckeditor, outsystems

我在使用 Outsystems 开发的应用程序中使用 CKEditor。我需要更改 CKEditor 提供的当前视图。（它具有保存数据、使其斜体、粗体等的 GUI 选项）。我需要删除这些选项或禁用它们。

有什么提示吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:29:12.123

[开发人员指南](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar)中有很好的建议，但这是我使用的：

在你的 config.js

```
config.toolbar = 'Mine';
config.toolbar_Mine =
[
    { name: 'document', items: ['Source', '-', 'Save', 'NewPage', 'DocProps', '-', 'Templates'] },
    { name: 'clipboard', items: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo'] },
    { name: 'editing', items: ['Find', 'Replace', '-', 'SelectAll', '-', 'SpellChecker', 'Scayt'] },
    '/',
    { name: 'basicstyles', items: ['Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat'] },
    { name: 'paragraph', items: ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'CreateDiv',
    '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock']
    },
    { name: 'links', items: ['Link', 'Unlink', 'Doxtest'] },
    { name: 'insert', items: ['Image', 'Table', 'HorizontalRule', 'SpecialChar', 'PageBreak'] },
    '/',
    { name: 'styles', items: ['Styles', 'Format', 'FontSize'] },
    { name: 'colors', items: ['TextColor', 'BGColor'] },
    { name: 'tools', items: ['Maximize', 'ShowBlocks'] },
    { name: 'ponify', items: ['InsertMagicalPony'] }
]; 
```

然后只需添加/删除您需要的任何内容。请注意`{ name: 'ponify', items: ['InsertMagicalPony'] }`，例如，您可能没有。

# php - Dreamweaver 显示框而不是 Unicode 字符

> ID：12892320
> 
> 赞同：-1
> 
> 时间：2012-10-15T09:02:47.200
> 
> 标签：php, unicode, dreamweaver

在浏览器中查看时，我的页面工作正常。我有一个语言文件（扩展名为 .php），但没有任何 HTML 标记。我正在使用 Dreamweaver CS5.5 来编辑这些文件。

我有一个变量`$lang["label_name"]`，它保存值。在 Dreamweaver 代码视图中，所有 devnagari unicode 字符都显示为框。但是在另一台具有相同版本的dreamweaver 的机器上，当打开相同的文件时，unicode 字符显示正确。

我的机器中是否有任何设置遗漏？如何使 unicode 字符在 Dreamweaver 中正确显示（不是在谈论浏览器）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:05:03.937

> 我的机器中是否有任何设置遗漏？

大概。只需比较两个 Dreamweaver 安装之间的设置，并将差异添加到您的问题中。这可能会更容易说。

> 如何使 unicode 字符在 Dreamweaver 中正确显示（不是在谈论浏览器）？

通过正确配置。还要确保您在两个系统上使用相同的字体并且文件具有相同的编码并且 Dreamweaver 知道正确的编码。

# activemq - ActiveMQ 生产者创建和不活动期

> ID：12892322
> 
> 赞同：0
> 
> 时间：2012-10-15T09:02:53.090
> 
> 标签：activemq, producer-consumer

我有一个关于 ActiveMQ 和生产者的问题。

我应该为每次发送消息创建一个生产者吗？还是一直使用同一个？为每次发送创建生产者是否会对性能产生影响？

在一段时间不活动后连接也会断开，但我不知道它是否与此有关，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:07:28.267

是的，创建生产者对性能的影响很小，特别是如果代理位于另一台机器上（客户端需要与代理交谈以创建生产者）。

在这个答案的其余部分，我假设您使用 Java/JMS 与 AMQ 交谈。

如果您有一个非常简单的程序，您当然可以“重用”您的生产者，使用“NULL”目的地创建它们，并在发送时设置目的地。

您可以做的是使用[PooledConnectionFactory](http://activemq.apache.org/maven/5.5.0/activemq-pool/apidocs/org/apache/activemq/pool/PooledConnectionFactory.html)来简化连接、会话和生产者。我认为包装类会帮助你。

实际上，您可以像这样使用 PooledConnectionFactory（伪代码）：

```
 cf = new PooledConnectionFactory(myOriginalConnectionFactory)
 sendMessage(cf)
 sendMessage(cf)
 sendMessage(cf)

 SendMessage(connectionFactory)
   conn = connectionFactory.CreateConnection
   sess = conn.CreateSession
   prod = sess.createProducer
   msg = sess.createMessage
   prod.send(msg)
   prod.close
   sess.close
   conn.close 
```

这意味着您不必担心关闭/打开会话、连接等。这是`JmsTemplate`Spring Framework 广泛使用的工作方式（当然，使用池化/缓存资源效果更好）。

另请查看[此](http://activemq.apache.org/how-do-i-use-jms-efficiently.html)页面以获取性能提示和技巧。

# linux - qplatformdefs.h 与 cmake

> ID：12892324
> 
> 赞同：4
> 
> 时间：2012-10-15T09:03:12.740
> 
> 标签：linux, qt, cmake

我正在尝试使用 cmake 编译我的 Qt 程序，但是在编译[qzip.cpp](https://raw.github.com/chindit/dadaword/master/qzip.cpp "qzip.cpp")时出现错误：

> qzip.cpp:57:27：错误致命：qplatformdefs.h：没有这样的文件或目录

我在*CMakeLists.txt*中添加了这些行，但它不起作用：

> 如果（QT_LIBRARY_DIR 而不是 QT_MKSPECS_DIR 或 QT_QMAKE_CHANGED）
> 
> 执行程序（${QT_QMAKE_EXECUTABLE}
> 
> > ```
> > ARGS "-query QMAKE_MKSPECS"
> > 
> > OUTPUT_VARIABLE qt_mkspecs_dirs ) 
> > ```
> 
> # 不要替换：在 Windows 上，因为它可能是驱动器号
> 
> # 并且 windows 应该已经使用 ; 作为分隔符
> 
> 中频（UNIX）
> 
> > ```
> > STRING(REPLACE ":" ";" qt_mkspecs_dirs "${qt_mkspecs_dirs}") 
> > ```
> 
> ENDIF(UNIX)
> 
> SET（QT_MKSPECS_DIR NOTFOUND）
> 
> FIND_PATH(QT_MKSPECS_DIR qconfig.pri PATHS ${qt_mkspecs_dirs}
> 
> > ```
> > DOC "The location of the Qt mkspecs containing qconfig.pri"
> > 
> >  NO_DEFAULT_PATH ) 
> > ```
> 
> ENDIF（QT_LIBRARY_DIR 而不是 QT_MKSPECS_DIR 或 QT_QMAKE_CHANGED）
> 
> SET（QT_INCLUDES ${QT_QT_INCLUDE_DIR} ${QT_MKSPECS_DIR}/默认 ${QT_INCLUDE_DIR}）

那么，如何在我的 CMakeLists.cpp 中添加指向**qplatformdefs.h的链接？**

非常感谢。

**PS：**我在 Ubuntu 12.04 32bits

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-13T08:12:45.147

您可以尝试将其添加到您的 CMakeLists.txt 中：

`include_directories(${QT_MKSPECS_DIR}/default)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T11:55:11.303

您可能已经找到了答案，但如果您还没有找到答案，那就是：

在我的 Fedora 中，这个文件位于**/usr/lib64/qt4/mkspecs/linux-g++-64**。假设它在 Ubuntu 中的位置相同，您应该将此目录添加到 include_directories();

```
include_directories( lots_of_dirs "/usr/lib64/qt4/mkspecs/linux-g++-64/") 
```

我希望我有所帮助。

# html - Safari 显示 HTML5 视频控件和播放音频，但不显示视频？

> ID：12892328
> 
> 赞同：1
> 
> 时间：2012-10-15T09:03:25.560
> 
> 标签：html, video, safari

XP 上的 Safari 5.1.7 昨天显示 HTML5 视频。今天它只显示音频和控件。我拒绝相信 Safari 有自己的随机显示元素的想法。

供参考，网址为：`http://onelove-themovie.co.uk/`

```
<div id="trailer">
<img id="close" src="images/close.png" alt="close" />
<div id="video">
<video controls  autoplay="autoplay" poster="video/trailer.jpg" width="600"         onclick="if(/Android/.test(navigator.userAgent))this.play();">
<source src="video/trailer.mp4" type="video/mp4" />
<source src="video/trailer.webm" type="video/webm" />
<source src="video/trailer.ogv" type="video/ogg" />
<embed src="video/flashfox.swf" width="600" height="480" flashVars="autoplay=true&amp;controls=true&amp;loop=true&amp;src=trailer.mp4"  allowFullScreen="true" wmode="transparent" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer_en" />
</video>
</div>
</div> 
```

# c# - 如何使用 C# 更新 XMLDocument？

> ID：12892329
> 
> 赞同：0
> 
> 时间：2012-10-15T09:03:27.390
> 
> 标签：c#

我想更新 xml 文档，我需要以字符串形式返回更新后的 xml。我正在尝试如下。当我保存文档时，它需要文件名。但我不想将此保存为文件。我只想在字符串中获取更新的 xml。

```
 string OldXml = @"<Root>
                                  <Childs>
                                    <first>this is first</first>
                                    <second>this is second </second>
                                  </Childs        
                                  </Root>";

        XmlDocument NewXml = new XmlDocument();
        NewXml.LoadXml(OldXml );

        XmlNode root = NewXml.DocumentElement;
        XmlNodeList allnodes = root.SelectNodes("*");

        foreach (XmlNode eachnode in allnodes)
        {
            if (eachnode.Name == "first")
            {
                eachnode.InnerText = "1";
            }
        }

        NewXml.Save();
        string newxml = NewXml.OuterXml; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:20:33.340

您不需要调用`Save method`，因为 string 是不可变的，您的问题在于`root.SelectNodes("*")`，它只是获取子节点，而不是所有级别的节点。你需要再上一层：

```
 foreach (XmlNode eachnode in allnodes)
        {
            var firstNode = eachnode.ChildNodes.Cast<XmlNode>()
                              .SingleOrDefault(node => node.Name == "first");
            if (firstNode != null)
            {
                firstNode.InnerText = "1";
            }
        }

  string newxml = NewXml.OuterXml; 
```

强烈建议使用 LINQ to XML，它更简单：

```
var xDoc = XDocument.Parse(OldXml);
foreach (var element in xDoc.Descendants("first"))
    element.SetValue(1);

string newXml = xDoc.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:24:17.543

您的迭代永远不会到达名为“first”的节点。否则它会在不保存`NewXml`.

但是，您可以使用 a`XElement`并遍历所有后代。

```
 string OldXml = @"<Root>
                      <Childs>
                      <first>this is first</first>
                      <second>this is second </second>
                      </Childs>        
                      </Root>";

            var NewXml = XElement.Parse(OldXml);
            foreach (var node in NewXml.Descendants())
            {
                if (node.Name.LocalName == "first")
                {
                    node.Value = "1";
                }
            }
            var reader = NewXml.CreateReader();
            reader.MoveToContent();
            string newxml = reader.ReadInnerXml(); 
```

# php - 更改 php.ini 文件后是否需要重新启动 Apache？

> ID：12892331
> 
> 赞同：65
> 
> 时间：2012-10-15T09:03:32.270
> 
> 标签：php, apache

如果我对 php.ini 文件中的设置进行了更改 - 我是否需要重新启动 Apache 才能使其生效？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-10-15T09:07:54.650

取决于，实际上。取决于您如何在该网络服务器中使用 php：

*   使用php一个模块：你必须重新启动服务器进程
*   使用 php 作为 cgi 后端：您不必*重新*启动服务器进程
*   使用 php fastcgi：不确定，实际上......（虽然重启是安全的）
*   使用 PHP-FPM：您必须重新启动 fpm 服务器进程以防止不一致

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-05-08T13:17:09.643

在 Debian 8 上，我必须重新启动 PHP-FPM（和 Apache） 上面的答案是正确的，但是这里是命令，所以你不必用谷歌搜索它们。

重启阿帕奇：

```
/etc/init.d/apache2 restart 
```

重启 php5-fpm ：

```
sudo service php5-fpm restart 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-15T09:06:43.357

这取决于您使用的 SAPI。例如，如果您使用 PHP 作为 Apache 模块，则需要重新启动 apache 以使这些`php.ini`值生效。

如果您使用的是 FCGI，则需要重新启动您希望查看值更改的 PHP 脚本的 FCGI 守护程序。与之比较

*   [`upload_max_filesize`在 nginx 上更改问题](https://stackoverflow.com/q/8028692/367456)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-05-06T16:12:50.420

这取决于您运行的操作系统和版本。

我在 Ubuntu 下运行 Apache/2.4.29。

PHP 版本 7.2.24。

我用以下命令重启apache，修改php.ini文件后需要重启：

```
sudo service apache2 restart 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-04T17:19:53.537

不确定 Apache，但在带有 IIS 的 Windows 上不需要重新启动。

无论哪种方式，考虑到 PHP 有无数不同的配置，一个简单的检查方法是在浏览器中加载 phpinfo.php 文件并确认设置的值，然后在 php.ini 中更改该设置并重新加载 phpinfo。 php 以查看它是否正在接收您的更改。

If you don't know what I mean by "phpinfo.php" check this page: [https://blogtimenow.com/knowledge-base/create-phpinfo-php-file-page/](https://blogtimenow.com/knowledge-base/create-phpinfo-php-file-page/)

# r - 如何在输入文件中绘制带有中文名称的条形图？

> ID：12892335
> 
> 赞同：0
> 
> 时间：2012-10-15T09:03:35.243
> 
> 标签：r, unicode, utf-8

我想从具有中文字符的输入文件中绘制条形图。

```
木材   2   2 
表     3   4
笔     4   2 
垃圾桶  5   6 
杯     6   3 
```

我希望输出像 Excel 这样的中文名称作为 y 标签和图例。如何在 R 中实现它？ ![在此处输入图像描述](../Images/b253ef0cdc451a7d7ad1870861a78fbc.png)

将语言环境更改为简体中文后，我得到下图。

```
sessionInfo()
R version 2.14.1 (2011-12-22)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=zh_CN.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=zh_CN.UTF-8        LC_COLLATE=zh_CN.UTF-8    
 [5] LC_MONETARY=zh_CN.UTF-8    LC_MESSAGES=zh_CN.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=zh_CN.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] XML_3.9-4 
```

![在此处输入图像描述](../Images/a4061827ac202b90213984b6651d3922.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:25:46.007

当您尝试获取此条形图时遇到什么问题？它对我有用，至少与中国角色有关。尝试

```
mydata = matrix( c( 2:6, c( 2,4,2,6,3 ) ), nrow= 2 )
mylabs = c( "木材", "表", "笔", "垃圾桶", "杯" )
barplot( mydata, beside=T, horiz= "T", names.arg= mylabs, las= 1, col= c( "red", "blue" ) ) 
```

![在此处输入图像描述](../Images/da04b56bbc49481a31fedec00e68d361.png)

当您尝试将绘图保存为 pdf 时，可能会遇到问题。在这种情况下，请尝试 jpeg：

```
jpeg( "plotname.jpg" )
barplot( mydata, beside=T, horiz= "T", names.arg= mylabs, las= 1, col= c( "red", "blue" ) )
dev.off() 
```

# wpf - 如何从剪贴板获取位图以显示在 WPF 列表控件中

> ID：12892340
> 
> 赞同：1
> 
> 时间：2012-10-15T09:03:41.357
> 
> 标签：wpf

我在剪贴板（位图）中有一个图像，我从剪贴板中提取如下

```
 datObj = Clipboard.GetDataObject();  
     InteropBitmap pdfBitmap = datObj.GetData(DataFormats.Bitmap) as InteropBitmap; 
```

如何让这个 pdfBitmap 显示在 WPF 列表框中。THw WpfListBox 看起来如此..

```
 <ListBox ItemsSource="{Binding Path=Pages}">
   <ListBox.ItemTemplate>
        <DataTemplate>
            <Image Margin="10" Source="{Binding Path=UriSource}"></Image>               
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

并且绑定是

```
private ObservableCollection<BitmapImage> pages = new ObservableCollection<BitmapImage>(); 
```

我想首先缩放 interopbitmap （类似于 getthumbnailimage() 的东西），然后我需要以某种方式将 interopbitmap 变成 BitmapImage 。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:38:51.543

无需转换`InteropBitmap`为`BitmapImage`....it 是`ImageSource`，因此可以设置为`Source`控件的`Image`。

在您的`ListBox`项目模板中，您只需使用“ `{Binding}`”。

然后，您可以通过在图像上定义宽度和高度来“缩放”位图。

（我假设您有一个`Pages`用于访问该`pages`字段的属性）

```
private ObservableCollection<ImageSource> pages = new ObservableCollection<ImageSource>();

 <ListBox ItemsSource="{Binding Path=Pages}">
   <ListBox.ItemTemplate>
        <DataTemplate>
            <Image Margin="10" Source="{Binding}"></Image>               
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

但是，如果上述方法仍然不合适...例如，如果您试图通过转换为较低的分辨率（即缩略图大小）来减少“位图”的内存占用，那么您可以通过“从 InteropBitmap 转换为 BitmapImage”流式传输”数据，因此它可以被基于 WPF 的 BitmapImage “读取”。

*   [InteropBitmap 到 BitmapImage](https://stackoverflow.com/questions/2440267/interopbitmap-to-bitmapimage)

如果您可以访问底层 Hbitmap，那么您也许可以使用`CreateBitmapSourceFromHBitmap`（例如，通过使用 WIN32 调用而不是 WPF/.Net 调用访问剪贴板）。

*   [有没有在 BitmapSource 和 Bitmap 之间转换的好方法？](https://stackoverflow.com/questions/2284353/is-there-a-good-way-to-convert-between-bitmapsource-and-bitmap)

# jdbc - 使用 HIVE JDBC 在 Hive 中创建外部表：不可能？

> ID：12892341
> 
> 赞同：2
> 
> 时间：2012-10-15T09:03:45.960
> 
> 标签：jdbc, hive

`HIVE JDBC`通过isnt创建外部表在 hive 数据仓库中反映，而在 hive 数据仓库内的正常表创建没有任何问题。

通过 Hive JDBC 创建表后，

```
stmt.executeQuery("create external table trial (TOPIC STRING) row format delimited fields terminated by '' STORED as TEXTFILE LOCATION '/user/ranjitha/trial'");` 
```

没有返回错误。

但是当我尝试从这个表试验中检索时，没有返回任何内容。

在此链接[https://groups.google.com/a/cloudera.org/forum/?fromgroups#!topic/cdh-user/YTekdFtbelE](https://groups.google.com/a/cloudera.org/forum/?fromgroups#!topic/cdh-user/YTekdFtbelE)中，它表示无法使用`HIVE JDBC`.

如果有人可以在上面指导我，那将非常有帮助。这对于 JDBC 是不可能的，还是有另一种替代方法。

谢谢

# c# - C# 从 .txt 文件中读取值？

> ID：12892342
> 
> 赞同：-8
> 
> 时间：2012-10-15T09:03:47.457
> 
> 标签：c#

首先，我使用具有两种形式的 C#。`Form1`用于组合框，`Form2`用于文本框。

我使用`.txt`文件作为我的数据库。

这里我的数据库看起来很像：-

```
name, test1, test2, test3, test4
John, 1 ,    1 ,    0 ,    1
Dune, 1 ,    0 ,    0 ,    1
Petr, 1 ,    1 ,    1 ,    1
Sam,  0 ,    1 ,    0 ,    1 
```

所以我希望我的组合框只显示名称。当我选择其中一个名称并按确定按钮时，它将跳转到`Form2`文本框。

现在数据库中的 test1、test2、test3 和 test4 的值将分别写入 textbox1、textbox2、textbox3 和 textbox 4。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:09:10.220

您为文本文件描述的格式是 CSV - 逗号分隔值。这是一种非常常见的存储格式，并且有许多有用的工具和示例可以使用它。

因此，既然您知道它是如何调用的，您就可以对诸如“CSV C#”和“如何在 C# 中读取 CSV”之类的内容运行更具体的搜索，并找到有关如何执行所需操作的好答案。

# java - 使用 java 从 .xsd 创建 .xml 文件

> ID：12892343
> 
> 赞同：4
> 
> 时间：2012-10-15T09:03:49.433
> 
> 标签：java, xml, xsd, jaxb

我是 Java 世界的新手，我需要从 .xsd 文件生成 .xml 文件

我做了一些研究，发现'jaxb'可以做到。我也找到了一些[例子](http://blog.sanaulla.info/2010/08/29/using-jaxb-to-generate-xml-from-the-java-xsd/)，但问题是，几乎所有的例子都使用'xjc'工具来做到这一点。但我想通过我的java代码来做到这一点。

这可能吗？
如果是的话，我在想这样的事情，来自我的java代码

*   加载 .xsd 文件
*   生成 .xml
*   保存 .xml 文件

有人可以指导我找到一个好的资源，或者告诉我我的想法是否错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:25:19.090

我认为主要问题是要以一种干净的方式来做，你应该有反映你的 xsd 的类。Xsd 定义了一个数据模型，所以重要的部分是用类重新创建它。如果你想动态地做它可能会相当困难。如果您想在编译时执行此操作 - jaxb 是您的最佳选择。有一篇非常有趣的文章讨论了与解析 xml 相关的问题（它的角度与您描述的不同），但我认为从这里可以学到很多知识：

[http://elegantcode.com/2010/08/07/dont-parse-that-xml/](http://elegantcode.com/2010/08/07/dont-parse-that-xml/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:21:14.880

我在使用[XMLBeans](http://xmlbeans.apache.org/documentation/tutorial_getstarted.html)方面有过很好的经验，但是我总是在编译时就可以使用 XSD。它与 Maven（以及可能的其他构建系统）很好地集成。编译生成一系列 Java 类，可用于构造符合 XSD 的 XML 文档或处理您收到的 XML 文件。

您可以使用`org.apache.xmlbeans.XmlBeans.compileXsd`该类对 XSD 进行一些运行时处理，但我从未尝试过它。刚刚看到来自常见问题解答的参考。

# c - 在 C 中获取文件扩展名

> ID：12892347
> 
> 赞同：0
> 
> 时间：2012-10-15T09:03:57.863
> 
> 标签：c, function

是否有 C 库函数来获取文件的扩展名？我知道我可以自己设计一个函数来在“。”之后获得扩展。但当我们阅读它们时，并非所有文件都存储有它们的扩展名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:09:02.170

所以你想得到一个文件的类型？也许Linux中的“文件”命令就是你想要的。你可以查看它的源代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T09:12:26.880

Linux 中的`file`命令使用名为 libmagic 的库（不要与 libmagick 混淆）来检查文件本身中的“魔术”字节以确定可能的内容类型。

该库是相当跨平台的，有据可查，例如这里： http: [//linux.die.net/man/3/libmagic](http://linux.die.net/man/3/libmagic)

# r - 将二进制字符串转换为二进制或十进制值

> ID：12892348
> 
> 赞同：23
> 
> 时间：2012-10-15T09:04:00.010
> 
> 标签：r, binary, typeconverter, valueconverter, bitconverter

是否有任何函数可以将二进制字符串转换为二进制或十进制值？

如果我有一个二进制字符串`000101`，我应该怎么做才能将它转换成`5`？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-15T09:59:21.093

您可以使用该`packBits`功能（在`base`包中）。请记住，此功能需要非常具体的输入。

```
(yy <- intToBits(5))
#  [1] 01 00 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
# [26] 00 00 00 00 00 00 00
# Note that there are 32 bits and the order is reversed from your example

class(yy)
[1] "raw"

packBits(yy, "integer")
# [1] 5 
```

还有这个`strtoi`功能（也在`base`包里）：

```
strtoi("00000001001100110000010110110111", base = 2)
# [1] 20121015

strtoi("000101", base = 2)
# [1] 5 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-15T09:20:09.767

您可以尝试以下方法：

```
binStr <- "00000001001100110000010110110111" # 20121015
(binNum <- 00000001001100110000010110110111) # 20121015
[1] 1.0011e+24
binVec <- c(1,0,1,0,0,0,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1) # 2670721
shortBin <- 10011010010 # 1234
BinToDec <- function(x) 
    sum(2^(which(rev(unlist(strsplit(as.character(x), "")) == 1))-1))
BinToDec(binStr)
[1] 20121015
BinToDec(binNum)
[1] 576528
BinToDec(binVec)
[1] 2670721
BinToDec(shortBin)
[1] 1234 
```

也就是说，您可以同时输入字符串（因为`as.character()`）和数字二进制值，但是像`binNum`. 据我了解，您还想将二进制字符串转换为数字二进制值，但不幸的是，至少在基本 R 中没有这样的数据类型。

**编辑：**现在`BinToDec`也接受二进制向量，这可能是大数字的解决方案。`digitsBase()`包中的函数`sfsmisc`返回这样一个向量：

```
(vec <- digitsBase(5, base= 2, 10))
Class 'basedInt'(base = 2) [1:1]
      [,1]
 [1,]    0
 [2,]    0
 [3,]    0
 [4,]    0
 [5,]    0
 [6,]    0
 [7,]    0
 [8,]    1
 [9,]    0
[10,]    1
BinToDec(vec)
[1] 5 
```

最后，另一种可能性是 package `compositions`，例如：

```
(x <- unbinary("10101010"))
[1] 170
(y <- binary(x))
[1] "10101010" 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-06-19T01:43:51.600

```
base::strtoi(binary_string, base = 2) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-15T09:25:58.050

此函数使用灵活的基数计算十进制版本。基数等于 2 是二进制等。这应该一直工作到基数为 10。

```
base2decimal = function(base_number, base = 2) {
  split_base = strsplit(as.character(base_number), split = "")
  return(sapply(split_base, function(x) sum(as.numeric(x) * base^(rev(seq_along(x) - 1)))))
}
> base2decimal(c("000101", "00000001001100110000010110110111"))
[1]        5 20121015 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-18T15:21:57.507

如果您有 binary **string**，所有先前的答案都很棒。我经常发现自己处于想要对二进制向量组合进行编码的情况。从 0 和 1 的组合转换为整数的逻辑始终相同：

```
bincount <- function(B, base=2) { return(B %*% base^seq(0,ncol(B)-1)) } 
```

其中B是一个矩阵，每一列都是一个二进制向量。

例子：

```
isBig <- c(0, 1, 0, 1)
isRed <- c(0, 0, 1, 1)
B = cbind(isBig,isRed)
bincount(B)
# 0 1 2 3 
```

# objective-c - 使用容器视图

> ID：12892352
> 
> 赞同：0
> 
> 时间：2012-10-15T09:04:09.063
> 
> 标签：objective-c, ios, ipad, uiviewcontroller, container-view

这是我的情况。我有一个视图控制器。在顶部三个按钮和按钮下方是一个容器视图。当您按下按钮时，容器视图应该会发生变化。

这就是我在故事板中所做的。

1.  将视图控制器拖到我的故事板中。在其中添加了 3 个按钮和一个容器视图。
    此视图控制器已关闭类 viewController
2.  将第二个视图控制器拖入其中。并控制从 containerView 拖到这个视图控制器。并选择嵌入segue。

现在在代码中，我为控制器 viewController 执行以下操作

```
-(IBAction)chooseFirstController:(id)sender {
    [self.childViewControllers.lastObject switchToFirst];

}

-(IBAction)chooseSecondController:(id)sender {
    [self.childViewControllers.lastObject switchToSecond];
}
-(IBAction)chooseThirdController:(id)sender {
    [self.childViewControllers.lastObject switchToThird];
} 
```

对于我的 containerController.h，我执行以下操作。

```
@interface ContainerViewController : ViewController

@property (nonatomic,strong) FirstController *cont1;
@property (nonatomic,strong) SecondController *cont2;
@property (nonatomic,strong) ThirdController *cont3;
@property (nonatomic,strong) ContainerViewController *currentController; 
```

在我的 container.m 中

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.cont1 = [[FirstController alloc]initWithNibName:@"FirstController" bundle:nil];
    self.cont2 = [[SecondController alloc]initWithNibName:@"SecondController" bundle:nil];
    self.cont3 = [[ThirdController alloc]initWithNibName:@"ThirdViewController" bundle:nil];
    [self addChildViewController:self.cont1];
    self.currentController = self.cont1;
    [self.view addSubview:self.cont1.view];
}

-(void)switchToFirst {
    if (self.currentController != self.cont1) {
        [self addChildViewController:self.cont1];
        [self moveToNewController:self.cont1];
    }
}

-(void)switchToSecond {
    if (self.currentController != self.cont2) {
        [self addChildViewController:self.cont2];
        [self moveToNewController:self.cont2];
    }
}
-(void)switchToThird {
    if (self.currentController != self.cont3) {
        [self addChildViewController:self.cont3];
        [self moveToNewController:self.cont3];
    }
}

-(void)moveToNewController:(id) newController {
    [self.currentController willMoveToParentViewController:nil];
    [self transitionFromViewController:self.currentController toViewController:newController duration:.6 options:UIViewAnimationOptionTransitionFlipFromLeft animations:^{}
                            completion:^(BOOL finished) {
                                [self.currentController removeFromParentViewController];
                                [newController didMoveToParentViewController:self];
                                self.currentController = newController;
                            }];
} 
```

但是我在 IBActions 中不断收到错误“没有选择器 switchtoFirst 的已知实例方法”。

有谁能够帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:49:18.460

我猜那`lastObject`是返回 a`UIViewController`并且不知道它是 a `ContainerViewController`- 因此不知道该`switchtoFirst`方法。

尝试类似：

```
-(IBAction)chooseFirstController:(id)sender {
    UIViewController *vc = self.childViewControllers.lastObject;
    if([vc isKindOfClass:[ContainerViewController class]]) {
        ContainerViewController *containerVC = (ContainerViewController *)vc;
        [containerVC switchtoFirst];
    }
} 
```

# android - 使用 PendingIntent 切换飞行模式

> ID：12892355
> 
> 赞同：0
> 
> 时间：2012-10-15T09:04:18.720
> 
> 标签：android, android-pendingintent, airplane

我正在开发一个适用于 Android 的应用程序，我希望能够使用 PendingIntent 切换飞行模式。这可能吗？如果是这样，我会怎么做？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:49:18.833

```
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
boolean isEnabled = Settings.System.putInt(context.getContentResolver(), 
Settings.System.AIRPLANE_MODE_ON, isEnabled ? 0 : 1);
Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
intent.putExtra("state", !isEnabled);
PendingIntent pi = PendingIntent.getBroadcast(this, 0, i,PendingIntent.FLAG_UPDATE_CURRENT);
am.cancel(pi);
am.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,SystemClock.elapsedRealtime() + 20000, 20000, pi); 
```

# android - android-如何将 Header 添加到 GridView

> ID：12892357
> 
> 赞同：0
> 
> 时间：2012-10-15T09:04:28.283
> 
> 标签：android, android-layout

嗨，我是安卓新手。我想在网格中添加一个标题（星期日、星期一、.....、星期六），如下图所示。是否有任何解决方法来设计网格的标题。 ![在此处输入图像描述](../Images/febffd2d6def9027cfa96e1557e92868.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:20:57.160

`GridView`由于s中不支持页眉或页脚视图，因此在`GridView`. 请注意，这样标题将**不能**与`GridView`.

# c - 在C中获取2到100之间的所有素数

> ID：12892360
> 
> 赞同：-2
> 
> 时间：2012-10-15T09:04:39.837
> 
> 标签：c, loops, primes

这是我的代码，它应该只输出素数。

```
#include <stdio.h>
int prime(int n){
    int j;
    for (j=2;j<=n/2;j++){
        if((n%j)==0){
            return 0;
        }
        else{
            return 1;
        }
    }
}
void main(){
    int i,p;
    for (i=2;i<=100;i++){
        p=prime(i);
        if(p==1){
            printf("%d \n",i);
        }
    }
} 
```

结果是 2,3,7,9,11,13,15....

不是 2,3,5,7,11,13....

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T09:08:14.083

你可能想要：

```
int prime(int n){
    int j;
    for (j=2;j<=n/2;j++)
        if((n%j)==0)
            return 0;
   return 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:14:23.967

素数是只能被两个数整除的数。例如 2,3,5,7,11 等。

```
int main()
{
    int i,j,n=0;
    for(i=2;i<=100;i++)
    {
        for(j=1;j<=i;j++)
        {
            if(i%j==0)
            {
              n++;
            }
        }
        if(n==2)
        printf("%d\n",i);
        n=0;
    }
    getch();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T09:16:38.270

尝试这个 ：

```
int prime(int n){
    int j;
    int isPrime = 1;
    for (j=2;j<=n/2;j++){
        if((n%j)==0){
            isPrime = 0;
            break;
        }
    }
    return isPrime;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T10:11:49.633

如果您试图找出不超过给定数字（在您的情况下为 2..100）的素数，则构建素数表将加快该过程：

注意：输入是连续的以帮助构建素数表，这一点很重要。

```
#include <stdio.h>
#include <math.h>

/* Building a prime table for fast look up
 * NOTE : Numbers should be input from 2 to n in a sequential pattern to help build prime table;  */

# define PRIME_TAB_MAX 200

int prime_specific(int num)
{
    static int primeTab[PRIME_TAB_MAX] = { 0, };
    static int primeCount = 0;
    int check_limit ;
    unsigned int idx;

    if (num < 2)
        return 0;

    if (primeCount > 0) {
        check_limit = (int)sqrt(num);
        for (idx = 0; idx < primeCount && primeTab[idx] <= check_limit; idx++) {
            if (0 == (num % primeTab[idx])) {
                return 0;
            }
        }
    }
    else {
        for (idx = 2; idx <= num / 2; idx++)
            if (0 == (num % idx))
                return 0;
    }

    if (primeCount < PRIME_TAB_MAX) {
        primeTab[primeCount++] = num;
        return 1;
    }
    else {
        fprintf(stderr, "\nERROR: Prime Table is full");
        return (-1); //Internal error
    }
}

int main(void)
{
    unsigned int idx;
    int status ;

    for (idx = 2; idx <= 1000; idx++) {

        status = prime_specific(idx);

        switch (status)
        {
        case 1:
            fprintf(stderr, "%d\n", idx);
            break;
        case 0:
            //Do nothing
            break;
        default:
            fprintf(stderr, "\nERROR:Internal Error");
            return (-1);
        }
    }
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-06T16:44:08.337

代码：

```
#include <stdio.h>

int main ()

{

   /* local variable definition */

   int i, j;

     for(i=2; i<100; i++)
    {
      for(j=2; j <= (i/j); j++)

        if(!(i%j)) break; // if factor found, not prime

      if(j > (i/j)) printf("%d is prime\n", i);
    }

   return 0;

} 
```

# xml - 解析sax vs stax vs vdt的非常大的XML文件？

> ID：12892362
> 
> 赞同：2
> 
> 时间：2012-10-15T09:04:43.533
> 
> 标签：xml, parsing

我的基本需求是解析一个非常大的 xlsx 文件（100MB，150 万行和 10-15 列）。

我现在知道我最好的机会是处理底层 XML 文件，因为解析 xml 文件的内存占用比解析 xlsx 低得多（如果我只是尝试直接解析 xlsx 文件，我无法避免内存不足错误）。

到目前为止，我使用的是 SAX 解析器，它对于较小的文件运行良好，但在 60MB 左右它失败并抛出内存错误。我想知道 stax 解析器或 vdt-xml 在我的情况下是否更好？或者就此而言，任何其他 xml 解析方法来处理大文件？

# asp.net - 如何在 else 条件下停止刷新页面

> ID：12892366
> 
> 赞同：1
> 
> 时间：2012-10-15T09:04:56.460
> 
> 标签：asp.net, refresh

我的代码：

```
protected void btnOk_Click(object sender, EventArgs e)
{
     if (txtReportFavorite.Text != string.Empty)
     {
         //..
     }
     else
     {
         Response.Write("<script>alert('Enter Favorite name.')</script>");
         // I need to prevent page refresh here.
     }
 } 
```

如何在 else 条件下停止刷新页面。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:08:14.437

你不能。

该代码运行时已请求新页面。如果您不进行回发，则该代码将永远不会运行。

如果您想在不进行回发的情况下进行验证，则应该使用客户端代码来代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:08:06.070

您到达服务器端的事实意味着您的页面已经完成了一个完整的服务器循环并自行刷新。

除非您使用 Ajax 调用来调用此代码。

您还可以通过在您的按钮周围放置一个 AjaxUpdatePanel 来实现这一点，该按钮将在您的客户提交您的表单时模拟 Ajax 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:09:58.737

您显示的功能可以通过使用验证器轻松实现，因此页面不会回发。

一旦它到达服务器，它真的不可能停止刷新。好吧，至少据我所知。-米林德

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T09:10:33.667

在页面加载后面的代码中放这个

```
btnOk.Attributes.Add("onclick","return validate();"); 
```

在你的 aspx 文件中有这个脚本

```
function validate()
{
    if(document.getElementById("txtReportFavorite").value == "";
      {             
                alert("Enter Favorite name");
                return false;
      }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T09:12:13.577

您的页面已经转到服务器端，并且已经在回发中。

您必须使用客户端代码来防止回发。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T09:33:42.490

如果只需要验证空文本框，为什么不使用RequiredFieldValidator？您可以在客户端执行此操作。

```
<asp:TextBox runat="server" id="txtReportFavorite" />
<asp:RequiredFieldValidator runat="server" id="txtReportFavorite" controltovalidate="txtName" errormessage="Enter Favorite name!" />
<br />
<asp:Button runat="server" id="btnSubmit" text="Ok" onclick="btn_Click" />

protected void btnSubmitForm_Click(object sender, EventArgs e)
{
    if(Page.IsValid) //for secure validation 
    {
        //do something
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T09:45:47.477

尝试使用`RegisterScriptBlock`.

```
ClientScript.RegisterStartupScript(this.GetType),"","$(document).ready(function(){alert('Enter Favorite name.')});",true); 
```

如果您想从服务器端执行，请像上面那样执行。否则已经发布了许多答案。

# jsf-2 - 使用 Jsf 2.0 和 Primefaces 3.0 显示带有 Column 的动态行

> ID：12892367
> 
> 赞同：0
> 
> 时间：2012-10-15T09:05:00.087
> 
> 标签：jsf-2, primefaces, datatable

![在此处输入图像描述](../Images/dba1b122919707b9830dfb330133ad95.png)

我有学生记录，我需要按照此图像所示显示。

我正在使用 Jsf 2.0 和 primefaces 3.0 ，我正在尝试使用但仍然无法获得正确的格式。

> 我的问题是，有一个名称为 Exam 的列，例如 FE、SE、TE，它位于单列下，并且由于只有 3 个考试而固定。图像中前 3 列的平均值需要行跨度 3，因为每条记录都会有FE-Math、SE-Math 和 TE-Maths 等等所有 s3 科目的分数 那么我们如何才能使这种结构成为可能，例如“for 1 record 3 rowspan”？

如图所示，我们如何实现这种结构？

```
<p:dataTable var="s" value="#{tableBean.studentSummary}">  
    <p:column headerText="ID">  
        <h:outputText value="#{s.ID}" />  
    </p:column>  

    <p:column headerText="Name">  
        <h:outputText value="#{s.name}" />  
    </p:column>  

    <p:column headerText="Passing Date">  
        <h:outputText value="#{s.passDate}" />  
    </p:column>  

    <p:column headerText="Exam">  
        <h:outputText value="#{s.exam}" />  
    </p:column>  

    <p:column headerText="Maths">  
        <h:outputText value="#{s.math}" />  
    </p:column>  

    <p:column headerText="Physiscs">  
        <h:outputText value="#{s.phy}" />  
    </p:column>  

    <p:column headerText="Chemistry">  
        <h:outputText value="#{s.chem}" />  
    </p:column>

</p:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:41:49.123

试试这个。首先将 rowIndexVar 添加到您的 p:dataTable 标记，然后有条件地呈现输出。所以你的代码看起来像这样：

```
<p:dataTable rowIndexVar="currRow" value=#{myBean.student} val="s">
  <p:column headerText="Name">  
      <h:outputText value="#{s.name}" rendered="#{currRow lt 1}"/>  
  </p:column>  

  <p:column headerText="Passing Date">  
      <h:outputText value="#{s.passDate}" rendered="#{currRow lt 1}"/>  
  </p:column>  

  <p:column headerText="Exam">  
      <h:outputText value="#{s.exam}" />  
  </p:column> 

  <p:column headerText="Maths">  
      <h:outputText value="#{s.math}" />  
  </p:column>  

  <p:column headerText="Physiscs">  
      <h:outputText value="#{s.phy}" />  
  </p:column>  

  <p:column headerText="Chemistry">  
      <h:outputText value="#{s.chem}" />  
  </p:column> 
</p:dataTable> 
```

**更新：**好的，刚刚意识到这种方法的错误，但会离开，因为 rowIndexVar 可能对某人有用。而是修改呈现的属性以查看考试字段（不肯定语法正确）：

```
<h:outputText value="#{s.name}" rendered="#{s.exam eq 'fe'}"/> 
```

# ios - 在IOS上选择OpenUDID还是Mac地址？

> ID：12892372
> 
> 赞同：3
> 
> 时间：2012-10-15T09:05:27.567
> 
> 标签：ios, ios6, mac-address

为什么人们在 iOS 中使用 OpenUDID 而不是 Mac 地址进行识别？使用 Mac 地址会很简单。所有的 mobil 设备都有 Mac 地址，这是众所周知的，而且是独一无二的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:10:03.900

MAC 地址包含网络设备的信息，可能导致安全漏洞、跟踪等。使用无意义`OpenUDID`的地址可以保护设备及其所有者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:08:43.340

您永远不应该使用设备特定标识符来检测设备。设备更改所有者，这意味着如果用户出售他的设备，新用户最终可能会获得前所有者的数据。

# .net - 如何本地化实体框架内置验证消息/异常？

> ID：12892377
> 
> 赞同：2
> 
> 时间：2012-10-15T09:05:53.887
> 
> 标签：.net, entity-framework, c#-4.0, entity-framework-4.1

除了基于注释的验证机制，EF 还提供了所谓的“Facets”。这意味着在字符串属性上，您可以有一个“最大长度”方面（通过 EF 模型配置），您可以在其中指定 80 个字符的最大长度。大多数情况下，当您使用数据库优先方法时，EF 会自动完成此操作。

如果现在属性包含超过指定数量的字符，EF 将抛出 DbEntityValidationResult 和消息

> [PropName]：字段[PropName]必须是字符串或数组类型，最大长度为'80'。

我的问题：我怎样才能本地化这样的消息？？？我也需要德语和意大利语...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:50:12.243

Maarten Balliauw 写了一篇关于它的博客：

[本地化 ASP.NET MVC 2 DataAnnotations 验证消息](http://blog.maartenballiauw.be/post/2009/11/05/Localize-ASPNET-MVC-2-DataAnnotations-validation-messages.aspx)

更新您的类以使用`ErrorMessageResourceType`and`ErrorMessageResourceName`参数而不是您通常传递的 ErrorMessage 参数。

此外，您可以本地化您的 DisplayNameAttributes；这是一个 Stackoverflow 帖子，它解释了如何做到这一点：[DisplayNameAttribute 的本地化](https://stackoverflow.com/questions/356464/localization-of-displaynameattribute)

**更新**

我认为，如果您安装了 .NET Framework 语言包，则应该为您翻译这些标准消息。

一个警告（发生在我身上）：[ASP.NET MVC 3 本地化验证消息在我的机器上有效，但在服务器上无效](https://stackoverflow.com/questions/9636332/asp-net-mvc-3-localized-validation-messages-work-on-my-machine-but-not-on-serve)

# twitter-bootstrap - Twitter Bootstrap，通过 jquerys submit() 提交表单仅刷新页面

> ID：12892380
> 
> 赞同：1
> 
> 时间：2012-10-15T09:06:12.560
> 
> 标签：twitter-bootstrap

我现在正在酝酿这个问题一段时间，但我找不到答案。

我正在使用 Twitter Bootstrap 和 PHP/Mysql 开发一个应用程序，我有一个简单的表单，我想要一个 jquery 确认模式，如果单击 OK，则应该发布表单，如果单击 No，则不会发生任何事情。

现在我已经将表单和 jquery 简化到最低限度，但它仍然无法正常工作。

这是我现在的表格：

```
<div class="container-fluid">
    <div class="row-fluid">
        <form method="post" action="" data-confirm="Are you sure you want to delete?">
            <div class="span6">
                <div class="control-group">
                    <label class="control-label" for="inputIcon">Add New Network</label>
                        <div class="controls">
                        <div class="input-prepend">
                            <span class="add-on"><i class="icon-tag"></i></span>
                            <input class="input-xlarge span6" id="inputIcon" type="text" placeholder="Network Name" name="network">
                        </div>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputIcon">Network Timezone</label>
                        <div class="controls">
                        <div class="input-prepend">
                            <span class="add-on"><i class="icon-globe"></i></span>
                            <?php echo $this->timezones; ?>
                        </div>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" name="save_network" class="btn btn-primary"><i class="icon-ok icon-white"></i> Save Network</button>
                </div>      
            </div> 
```

* * *

这是我正在使用的 jquery：

```
/* confirmation dialogs */
$(document).ready(function() {
    $('form[data-confirm]').submit(function() {
        var form = this;
        if (!$('#dataConfirmModal').length) {
            $('body').append('<div id="dataConfirmModal" class="modal" role="dialog" aria-labelledby="dataConfirmLabel" aria-hidden="true"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><h3 id="dataConfirmLabel">Please Confirm</h3></div><div class="modal-body"></div><div class="modal-footer"><button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button><a class="btn btn-primary" id="dataConfirmOK">OK</a></div></div>');
        }
        $('#dataConfirmModal').find('.modal-body').text($(this).attr('data-confirm'));
        $('#dataConfirmModal').modal({
            show: true
        });
        $('a#dataConfirmOK').click(function() {
            $("form").submit();
        });
        return false;
    });
}); 
```

* * *

这是我的控制器中调用模型的函数

```
<?php

    // if settings form was submitted, save settings data
    if(isset($_POST['save_network']))
    {
        $this->model->insert_network('reports', $_POST);
    }

?> 
```

我不想要ajax左右，只是一个简单的表单提交，奇怪的是当我手动提交表单时，它工作得很好。表单中的数据保存在数据库中，但是当我使用 jquery .submit(); 表单已提交，但没有保存任何内容。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:51:55.403

在我的控制器中，我通过检查是否设置了按钮的名称值来检查表单是否已提交：

```
if(isset($_POST['save_network']))
{
$this->model->insert_network('reports', $_POST);
} 
```

当您使用 JQUERY 提交表单时，永远不会点击按钮；因此：没有设置按钮名称...呃

抱歉尖叫 :D 但这让我忙了 6 个小时，直到我发现这确实是问题所在......我永远不会忘记的教训！

希望这对其他人有帮助：如果您使用 jquery 提交表单，并通过查看按钮名称来检查表单是否在 php 中提交...这就是您遇到的问题 jquery 直接提交表单，因此只有名称值表单字段的设置，而不是来自输入按钮本身的设置。

* * *

因此，不要使用以下方法检查表单是否已提交：

```
if(isset($_POST['save_network'])) 
```

也许应该更好地检查如下：

```
if($_SERVER['REQUEST_METHOD'] == "POST") 
```

# cocos2d-iphone - 如何在 cocos2d (Kobold2D) CCLayer 上捏合/缩放

> ID：12892381
> 
> 赞同：1
> 
> 时间：2012-10-15T09:06:14.447
> 
> 标签：cocos2d-iphone, scale, cclayer, kobold2d, pinchzoom

我一直在尝试在 cocos2d 中的 CCLayer 上实现标准的捏合/缩放（使用 Kobold2D 手势识别器），但只取得了部分成功。

下面是我的代码，它确实使捏/缩放工作，只要捏点不移动。但是，如果我放大图层上的一个点，然后抬起并移动我的手指以进一步放大另一个点，则图层会瞬间跳跃。如果我从一开始就放大第二个点，它会跳转到图层本来的位置，而不是简单地从它所在的位置平滑缩放。

你能看到我做错了什么还是我错过了一个现有的简单的捏/缩放算法来为 CCLayers 完成这项工作？

注意：我为 ignoreAnchorInPosition 保留了默认 (YES) 值。另外，一开始 self.scalePrePinch = 1.0f

```
-(void) update:(ccTime)delta
{
    KKInput* input = [KKInput sharedInput];
    if (input.gesturePinchBegan) {
        CGSize scr = [[CCDirector sharedDirector] screenSize];
        CGPoint pinchLocation = [self convertToNodeSpace:input.gesturePinchLocation];
        CGPoint anchor = ccp(pinchLocation.x/scr.width, pinchLocation.y/scr.height);
        CGFloat newScale = input.gesturePinchScale * self.scalePrePinch;
        self.anchorPoint = ccp(self.anchorPoint.x + self.scale / newScale * (anchor.x - self.anchorPoint.x), 
                               self.anchorPoint.y + self.scale / newScale * (anchor.y - self.anchorPoint.y));
        self.scale = newScale;
    }
    else
        self.scalePrePinch = self.scale;
} 
```

# android - 动作条夏洛克

> ID：12892382
> 
> 赞同：1
> 
> 时间：2012-10-15T09:06:16.303
> 
> 标签：android, android-actionbar, actionbarsherlock

我是第一次使用 Actionbar Sherlock。我想要创建的是一个带有溢出按钮的操作栏。我尝试导入[http://wptrafficanalyzer.in/blog/adding-menus-to-action-bar-in-pre-honeycomb-versions-using-sherlock-library/](http://wptrafficanalyzer.in/blog/adding-menus-to-action-bar-in-pre-honeycomb-versions-using-sherlock-library/)项目并 emulate 。

但我收到以下错误没有找到与给定名称匹配的资源（在“主题”处，值为“@android:style/Theme.Sherlock.ForceOverflow”）。

我已经包含了来自 www.actionbarsherlock.com 的动作栏 Sherlock 的库文件

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:22:20.343

最新版本 (4.2) 中已删除强制溢出。查看 Github 上的问题以讨论其背后的动机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T10:26:31.993

Follow the steps below and i am 100% sure that you will be successful in importing the android Action Bar Sherlock library.

1.  The first thing you have to do, is to download the library from [http://actionbarsherlock.com](http://actionbarsherlock.com)? . After this unzip/untar it.

2.  The folder that you get will contain a number of sub-folders and files. Your action bar sherlock library is in the folder “actionbarsherlock”. Now, rename the folder “actionbarsherlock” to “ActionBarSherlockLib”.

3.  Now go to Eclipse and add the ABS(Action Bar Sherlock )-library as an Android project. Do not use Eclipse’s import tool to import the ActionBarSherlock library – it would not work immediately and you would have to fix some settings. Instead, create a new project as explained in the next step.

4.  Open File -> New -> Project -> Android Project From Existing Code. Select this and click next.

5.  In the next screen eclipse will ask you to browse the root directory. You have to select the root folder which contains all the files and folders that you had initially unzipped. After selecting the correct root folder, eclipse suggests a list of projects to create.

6.  You have to only check “ActionBarSherlockLib” and uncheck the rest.

7.  Check 'copy projects into workspace' and click finish.

8.  You are now a champion and have successfully imported the action bar sherlock library into eclipse. Congrats.

# mysql - 如何返回最后插入/更新行的所有最后一行字段？

> ID：12892388
> 
> 赞同：0
> 
> 时间：2012-10-15T09:06:57.257
> 
> 标签：mysql, sql, insert, last-modified

从标题开始，我想返回最后一行插入/更新的字段和值，是否可以在同一`INSERT`查询`UPDATE`中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:13:23.640

如果你使用主键，你可以使用[LAST_INSERT_ID()](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)；例如：

```
insert into user(name) values ('your name');
select * from user where id = LAST_INSERT_ID(); 
```

如果您需要获取最近插入或更新的所有行，我建议添加日期时间数据类型的 INSERTED 和 UPDATED 字段。因此，您可以选择最近间隔的表。请参见下面的示例：

```
SELECT *, INSERTED, UPDATED
FROM YOUR_TABLE 
WHERE INSERTED BETWEEN (NOW() - INTERVAL 1 MINUTE) AND NOW() 
   OR UPDATED BETWEEN (NOW() - INTERVAL 1 MINUTE) AND NOW(); 
```

这将返回最后一分钟修改或插入的记录。

# javascript - 如何使用 Then-By 执行 JavaScript Sort()

> ID：12892389
> 
> 赞同：1
> 
> 时间：2012-10-15T09:06:58.613
> 
> 标签：javascript

我有一个充满需要排序的对象的数组，但是我似乎无法让它工作。通常我只会做一个简单的 sort() 方法，它适用于对单列进行排序，但是在这种情况下，我需要先按一列排序，然后再按一秒排序。

为了让这更容易理解，假设我有一个类似于这个的对象数组：

```
{ Name: 'Alfred', Total: 4, Project: 'Foobar' } 
```

现在在这个例子中，我将如何首先按名称对这些对象的数组进行排序，然后按总计？我考虑过这样做：

```
myArray = myArray.sort(function(a,b){return (a.Name + a.Total) > (b.Name + b.Total)}); 
```

但是，我不确定解决此问题的最佳方法是什么。一些建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:17:01.177

```
myArray.sort(function(a,b){
  if(a.Name>b.Name){return 1;}
  else if(a.Name<b.Name){return -1;}
  else{
    if(a.Total>b.Total) return 1;
    else if(a.Total<b.Total) return -1;
    else return 0;
  }
}); 
```

缩小版：

```
myArray.sort(function(a,b){return a.Name>b.Name?1:a.Name<b.Name?-1:a.Total>b.Total?1:a.Total<b.Total?-1:0}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:16:23.620

```
myArray = myArray.sort(function(a, b) {
  var ret = a.Name.localeCompare(b.Name);
  if (ret == 0) {
     if (a.Total > b.Total) {
         return 1;
     } else if (a.Total < b.Total) {
         return -1;
     }
  }
  return ret; 
}); 
```

# uitableview - 在 MonoTouch.Dialog 的 DialogViewController.TableView 顶部添加边距

> ID：12892391
> 
> 赞同：0
> 
> 时间：2012-10-15T09:07:02.917
> 
> 标签：uitableview, uiview, xamarin.ios, monotouch.dialog

我有一个 MonoTouch.Dialog向对象`DialogViewController`添加自定义。`UIView``NavigationItem.Views`

高度为 25，其`UIView`框架设置如下：

```
Frame = new System.Drawing.RectangleF(0f, 44f, UIScreen.MainScreen.ApplicationFrame.Width, 25f); 
```

![在此处输入图像描述](../Images/887184a93e2622e91356e96800e55bf0.png)

```
_toolbar = new UIView();
this.NavigationController.NavigationBar.Add (_toolbar); 
```

如何使表格视图出现在`UIView`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:28:27.393

您应该在 DialogViewController 的子类中重写 LoadView() 方法，并在其中手动调整 UITableView 的大小，以确保它不会占用您为自定义视图占用的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T11:09:00.887

由于我无法得到 Miguel 的答案，我最终从上面使用了 jonathanpeppers 的想法，并将`UITableView.HeaderView`属性设置为一个与`UIView`我添加到`UINavigationBar`.

```
this.TableView.HeaderView = new UIView (new RectangleF(0, 0, 25f, 0)); 
```

# android - Android：拖动多个视图

> ID：12892392
> 
> 赞同：1
> 
> 时间：2012-10-15T09:07:03.713
> 
> 标签：android, drag-and-drop

我在 android 中拖动多个视图时遇到问题。我有一个使用 Canvas 创建的两个圆圈。问题是我只能拖动一个圆圈，而不能拖动另一个圆圈。似乎第一个圆圈覆盖了整个屏幕，当我尝试拖动第二个圆圈时，第一个圆圈仍在移动。

这是我的代码。

MainActivity.java

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}} 
```

DragSource.java

```
public class DragSource extends View {

private Paint viewPaint;
private float startX;
private float startY;
private float touchOffsetX;
private float touchOffsetY;
private float x = 30;
private float y = 30;
private static final float RADIUS = 30;

//needed for finding drop target:

//the constructor:
public DragSource(Context context, AttributeSet attrs) {
    super(context, attrs);

    viewPaint = new Paint();
    viewPaint.setColor(Color.RED);
    viewPaint.setAntiAlias(true);
}

public boolean onTouchEvent(MotionEvent mEvent) {

    int eventAction = mEvent.getAction();
    switch(eventAction) 
    {
    case MotionEvent.ACTION_DOWN:
        startX = x;
        startY = y;
        touchOffsetX = mEvent.getX();
        touchOffsetY = mEvent.getY();
        break;
    case MotionEvent.ACTION_UP:

        break;
    case MotionEvent.ACTION_MOVE:   
    case MotionEvent.ACTION_CANCEL:
        x = startX + mEvent.getX() - touchOffsetX;
        y = startY + mEvent.getY() - touchOffsetY;
        break;
    }
    return true;
}

public void draw(Canvas c) {
    int w = c.getWidth();
    int h = c.getHeight();

    c.drawCircle(x, y, RADIUS, viewPaint);
    this.invalidate();
}} 
```

我的activity_main.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" ><com.example.trialsdrag.DragSource
android:layout_width="wrap_content"
android:layout_height="wrap_content"/><com.example.trialsdrag.DragSource
android:layout_width="wrap_content"
android:layout_height="wrap_content"/></RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:30:50.997

发生的事情是您的视图大小实际上是整个屏幕的大小，并且`onTouchEvent`您只需更改它们上的绘图（移动圆圈）。

您需要做的是为您的 DragSource设置`android:layout_height`和设置，然后在使用中动态更改布局边距：`android:layout_width``main_activity.xml``onTouchEvent`

```
RelativeLayout.LayoutParams params = (LayoutParams) getLayoutParams();
params.setMargins(x+params.leftMargin, y+params.topMargin, 0, 0);
setLayoutParams(params); 
```

# php - 如何在 CakePHP 中保存日期时间格式（将日期从 JS 传递到 CakePHP）

> ID：12892393
> 
> 赞同：1
> 
> 时间：2012-10-15T09:07:06.220
> 
> 标签：php, javascript, cakephp, cakephp-1.3

我在 JS 中有一个 datetime 变量，它是：

```
var date_start   = dateFormat(newJobForm.time_start, "yyyy-mm-dd-HH-MM"); 
var date_end     = dateFormat(newJobForm.time_end, "yyyy-mm-dd-HH-MM"); 
```

主要问题是：我不能只显示分钟

当我将日期传递给 PHP 的`date()`函数时，由于 and 之间的关系`:`，它不会保存它。我试过了，但没有用。`H``i``explode()``-`

URL 是：`my_controller/abcd^5^2012-10-15-15-15^2012-10-18-17-30`并且我在 CakePHP 动作中从 JS 获取时间的控制器是：

```
$time_start          = $explode_item[2];                 
$time_end            = $explode_item[3]; 

$dateStart = strtotime ( date('Y-m-d H:i', $time_start) ) ;
            $dateStartArray['Y'] = date ( 'Y' , $dateStart );
            $dateStartArray['m'] = date ( 'm' , $dateStart );
            $dateStartArray['d'] = date ( 'd' , $dateStart );
            $dateStartArray['H'] = date ( 'H' , $dateStart );
            $dateStartArray['i'] = date ( 'i' , $dateStart ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:25:33.730

我得到了答案：
控制器应该是

```
$dateStart = date("Y-m-d H:i",strtotime ('+1 hour', strtotime (date("Y-m-d H:i",$time_start))));
$dateEnd   = date("Y-m-d H:i",strtotime ('+1 hour', strtotime (date("Y-m-d H:i",$time_end)))); 
```

我们需要在js中将时间转换为Echop

```
var d = new Date(value); var epochtime = (d.getTime()-d.getMilliseconds())/1000; 
```

完毕 ！:)

# database - LINQ to SQL 数据库中的西里尔字母

> ID：12892395
> 
> 赞同：1
> 
> 时间：2012-10-15T09:07:09.137
> 
> 标签：database, sql-server-2008, linq-to-sql, csv

我有带有西里尔字符的逗号分隔文件。当我使用 StreamReader 从中读取字符时，字符正常。我在 LINQ to SQL 数据库中写入文件，但是带有西里尔字母的列是用 ?????? .该列是 nvarchar 类型。有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:13:13.650

我认为这是一个编码问题，也许 SQL DB 没有正确的库来编码西里尔字母。

看看这里：[http ://dev.mysql.com/doc/refman/5.0/en/charset-cyrillic-sets.html](http://dev.mysql.com/doc/refman/5.0/en/charset-cyrillic-sets.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:15:23.467

尝试编码.Utf8：

```
new StreamReader("THE PATH", Encoding.UTF8); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:59:24.543

您可能需要更改数据库的排序规则

[http://msdn.microsoft.com/en-us/library/ms180175.aspx](http://msdn.microsoft.com/en-us/library/ms180175.aspx)

# performance - Redis maxmemory-policy：volatile-lru 与 allkeys-lru 的性能对比

> ID：12892396
> 
> 赞同：5
> 
> 时间：2012-10-15T09:07:18.893
> 
> 标签：performance, redis, lru

假设 redis 实例中的所有键都设置了过期时间，那么 volatile-lru 和 allkeys-lru 是相似的。但是当一个键被移除时，两者之间是否存在显着的性能差异？

奖金问题：

在使用 allkeys-lru 策略配置的 2 个不同实例之间，具有相同的内容和相同的配置，除了：

*   实例 A 的*所有*键都设置了过期时间（过期值不同）
*   实例 B*没有*设置过期时间的键

除了由于过期位而导致实例 A 中的内存开销之外，当 allkeys-lru 算法删除密钥时，两者之间是否存在性能差异？

在这两种情况下，我都在谈论 linux 64 位上的 redis 2.4.x 实例，maxmemory = 3Gb，当达到 maxmemory 时有 4-5000 个键（大多数键是散列）。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T11:23:52.983

[redis.c，第 2311 行，不稳定分支](https://github.com/antirez/redis/blob/unstable/src/redis.c#L2311)：

```
/* volatile-lru and allkeys-lru policy */
else if (server.maxmemory_policy == REDIS_MAXMEMORY_ALLKEYS_LRU ||
    server.maxmemory_policy == REDIS_MAXMEMORY_VOLATILE_LRU)
{
    for (k = 0; k < server.maxmemory_samples; k++) {
        sds thiskey;
        long thisval;
        robj *o;

        de = dictGetRandomKey(dict);
        thiskey = dictGetKey(de);
        /* When policy is volatile-lru we need an additonal lookup
         * to locate the real key, as dict is set to db->expires. */
        if (server.maxmemory_policy == REDIS_MAXMEMORY_VOLATILE_LRU)
            de = dictFind(db->dict, thiskey);
        o = dictGetVal(de);
        thisval = estimateObjectIdleTime(o);

        /* Higher idle time is better candidate for deletion */
        if (bestkey == NULL || thisval > bestval) {
            bestkey = thiskey;
            bestval = thisval;
        }
    }
} 
```

严格来说，似乎所有事物都相同`allkeys-lru`会更快，但幅度**不会**很大。我们谈论的机会可能不超过几分之一*微秒*。

第二个问题几乎已经得到回答，但以防万一：看起来有`allkeys-lru`多少密钥设置为过期，或者如果有的话，没有区别。当 lru 算法清除密钥时，您的示例中的实例 A 和 B 都会看到相同的性能。

# .net - SqlCeDataAdapter 和唯一可空列的问题

> ID：12892397
> 
> 赞同：1
> 
> 时间：2012-10-15T09:07:27.077
> 
> 标签：.net, sql-server-ce, dataadapter

*注意：我已经在[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/sqlce/thread/f5acc0d7-b1da-46b1-862b-310e45eb5bf3)上发布了这个问题，但没有收到任何答案。*

你好，

如果表包含唯一的可为空列，则对 SqlCeDataAdapter 调用 Update 会导致问题。出现此问题的原因是 SqlCeParameter 放弃了对其 SourceColumnNullMapping 属性的更改，该属性由 DbCommandBuilder 设置。这会导致 DbDataAdapter 中的错误行为，这可能会导致各种异常，具体取决于列类型（例如，当列是字符串类型并且要提交的行具有此单元格的值时，格式异常无法转换为诠释32）。有关此属性的详细信息、为什么需要它以及它如何影响 SQL 语句，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.data.common.dbparameter.sourcecolumnnullmapping.aspx)。

为什么 SqlCeParameter 不允许设置其 SourceColumnNullMapping？如果不更改数据模型，似乎没有解决方法。这是故意省略的吗？开发人员是否超时？这是一个错误吗？如果是这样，我在哪里可以报告？

我已经用 SQL Server CE 4.0 (4.0.8482.1) 对此进行了测试，甚至尝试了（显然是未宣布的？）SP1 (4.0.8876.1)。

我真的很期待任何答案！

# neo4j - 在 Rails 控制台中查询 Neo4j 数据库

> ID：12892399
> 
> 赞同：1
> 
> 时间：2012-10-15T09:07:33.357
> 
> 标签：neo4j, jrubyonrails

测试 Rails 应用程序代码的最佳实践是在控制台上。我在 Rails 上使用 Neo4j 数据库，我有一个名为 Customer 的节点，还有一些其他节点用于查询 Customer。`find(id)`对于某些 ID，我在 rails 控制台上得到了 nil，但实际上该节点不是空的。

在 Rails 控制台上：

```
jruby-1.6.5 :039 >   a = Customer.find(41)
=> nil 
jruby-1.6.5 :040 > 
```

On `Neo4j console`: where`Customer(45)`不包含任何东西。

```
neo4j-sh (0)$ ls
*_db_version =[43]
(me) --[Customer]-> (45)
(me) --[User]-> (2,9)
(me) --[UserType]-> (2,6)
(me) --[Neo4j::Rails::Model]-> (10)
(me) --[Party]-> (46)
(me) --[Searchable]-> (11)
(me) --[Invoice]-> (61)
(me) --[Company]-> (1,8)
(me) --[Currency]-> (3,2) 
```

但是当我进去时，`Company(1,8)`
我可以看到所有客户的记录

# android - 获取正在运行的进程列表并终止其后台服务

> ID：12892400
> 
> 赞同：6
> 
> 时间：2012-10-15T09:07:35.830
> 
> 标签：android, service, garbage-collection, background-process

我正在构建一个用于 RAM 优化的 Android 应用程序。[我可以使用此答案](https://stackoverflow.com/a/3479710/1514026)成功获取正在运行的进程（及其 PID）列表。但是，我看不到通过 PID 杀死它们或它们的后台服务的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T12:43:29.930

事实证明这是非常基本的：

```
ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);

for (RunningAppProcessInfo pid : am.getRunningAppProcesses()) {
    am.killBackgroundProcesses(pid.processName);
} 
```

# maven - 使用 Maven 运行时与从 Eclipse 运行时不同的 log4j 设置

> ID：12892401
> 
> 赞同：2
> 
> 时间：2012-10-15T09:07:37.137
> 
> 标签：maven, junit, log4j, logback

当我使用 运行测试时，我希望我的控制台尽可能安静`mvn test`，除非出现问题。再说一次，当我在 Eclipse 中编写测试时（换句话说，当我在 Eclipse 中运行单个 junit 测试时），它们可以非常冗长。

因此，与在 Eclipse 中一个接一个地运行测试相比，我需要一种方法来设置不同的 log4j/logback 设置。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:25:53.667

您可以将surefire 配置为使用不同的记录器设置文件。这将被 Eclipse 忽略。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
        <argLine>-Dlogback.configuration=[wherever]</argLine>
    </configuration>
</plugin> 
```

# c++ - 多读单写-线程安全？

> ID：12892405
> 
> 赞同：4
> 
> 时间：2012-10-15T09:07:41.227
> 
> 标签：c++, multithreading, thread-safety

我有一个数据结构，它有两种访问方法：query() 和 modify()。多个线程可以同时使用 query()，但只有一个线程可以进入 modify()，同时所有使用 query() 的线程都必须退出，然后才能在 modify() 上进行访问。

在 C++ 中使这种数据结构线程安全的最佳方法是什么？

（我阅读了增强读/写锁定，但有人告诉我它可能比使用互斥锁慢 3-40 倍）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:11:39.003

一般来说，您应该使用互斥锁来保护共享数据。

但是，如果您共享数据的类型是整数，您也可以考虑使用`std::atomic`，这通常比锁定互斥锁要快得多。

# javascript - 如何使用 jquery $.grep 解决 jshint 错误“不要在循环中创建函数。”

> ID：12892406
> 
> 赞同：2
> 
> 时间：2012-10-15T09:07:42.480
> 
> 标签：javascript, jquery, loops, jshint

下面的 javascript 代码给了我*不要在循环中创建函数。*错误

```
/* Get the favorite products from the data using the id */
productDataCategory[FAVORITES].length = 0/* empty favorites productDataCategory */;
for ( i = 0; i < currentUser.favorites.length; i++) {
    product = $.grep(productData, function(e){ return e.id === currentUser.favorites[i]; })[0];
    productDataCategory[FAVORITES].push(p);
} 
```

我查看了这个问题，并看到其他成员提出的一些类似问题
[如何解决 jslint 错误“不要在循环中创建函数。”](https://stackoverflow.com/questions/3037598/how-to-get-around-the-jslint-error-dont-make-functions-within-a-loop)
[不要在循环中创建函数](https://stackoverflow.com/questions/10320343/dont-make-functions-within-a-loop)

我遇到的问题是我在循环中使用 $.grep 函数来查找数组中的产品。
我不知道如何通过上述问题中的答案解决此问题。

* * *

来自登录用户的数据

```
{
    "user": "MBO",
    "email": "my@mail.com",
    "username": "Marcel",
    "photoURL": "url_here",
    "favorites": [13,25,40,56]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:11:19.803

将函数放在循环之外：

```
/* Get the favorite products from the data using the id */
productDataCategory[FAVORITES].length = 0/* empty favorites productDataCategory */;
var f = function(e){ return e.id === currentUser.favorites[i]; };
for ( i = 0; i < currentUser.favorites.length; i++) {
  product = $.grep(productData, f)[0];
  productDataCategory[FAVORITES].push(p);
} 
```

# c# - 使用 C# SDK 将 Facebook 页面的链接作为页面发布

> ID：12892411
> 
> 赞同：1
> 
> 时间：2012-10-15T09:07:58.910
> 
> 标签：c#, facebook-c#-sdk

当我使用字段消息并将链接放入其中时，它将仅作为链接字符串发布，而链接中没有图片，因为您从图形浏览器外部发布它，并且海报将是通过应用程序的页面名称。

但是当我使用该`link`字段并将链接放入其中时，它会给出我想要的表格，但海报将是帐户名称而不是页面名称。

首先：在使用将发布到页面墙上的 C# 控制台应用程序之前，我正在尝试在图形 API 资源管理器中发布帖子。如果我复制网站页面的链接并通过 Facebook 打开页面并将链接粘贴到状态字段中，它将自动生成包含图片和一些详细信息的表单，如果我单击发布，状态将显示为发布者页面本身，它将首先包含作为文本的链接，然后出现我谈到的表单。

如果我使用 C# SDK 并将状态发布为：

```
fbArgs["message"] = txtT.ToString();
facebook.Post("/PAGE_ID/feed", fbArgs); 
```

当我在 Facebook 页面网站上发布相同的字符串时，该帖子将仅包含链接，而不会自动出现表单。如果我使用`link`带有链接的字段作为值，它将以帐户名称发布，但使用我想要的形式？

当您在 Facebook 网站的状态编辑框中粘贴链接时，如何发布将自动生成表单的链接？

# node.js - 将 Node.js 应用程序推送到 Heroku 时跳过“使用 npm 安装依赖项”步骤

> ID：12892419
> 
> 赞同：6
> 
> 时间：2012-10-15T09:08:25.883
> 
> 标签：node.js, heroku, npm

运行`git push heroku master`总是会触发一个提示：

> 使用 npm 安装依赖项

此步骤会再次加载并重新安装所有依赖项，即使它已经存在。这非常耗时，有时我想在部署时跳过此步骤，因为我知道依赖项是相同的。

是否有任何命令或选项可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-16T16:27:43.530

你问这个问题已经很久了，现在 Heroku buildpack 缓存了`node_modules`，所以安装时间会快得多。

但是，如果您仍然想阻止`npm install`，这是一种解决方案。

在我写这篇文章时，默认的 Heroku 构建包不允许完全跳过 npm install。您可以在[dependencies.sh](https://github.com/heroku/heroku-buildpack-nodejs/blob/master/lib/dependencies.sh)文件中看到，这一行将始终运行：

```
npm install --unsafe-perm --userconfig $build_dir/.npmrc 2>&1 
```

`.npmrc`但是，如果您在项目文件夹中创建一个名为的文件，其内容如下：

```
dry-run 
```

这将导致 npm install 不修改您现有的`node_modules`目录。

请注意，此更改也将应用于`npm prune`Heroku 运行的命令，但*不会*应用于`npm rebuild`命令（这可能没问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T15:05:48.517

尝试删除

> 节点模块

例如来自你的 .gitignore

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-07T10:28:20.223

我发现的最简单的方法是

> heroku 应用程序：重命名新临时名称

然后

> heroku 应用程序：重命名 originalName

或更改 NODE_ENV 并再次将其恢复为以前的状态。

> heroku 配置：设置 NODE_ENV=dev

然后

> heroku 配置：设置 NODE_ENV=生产

可能还有其他类似的黑客，但这些应该足够了。

# java - 如何制作一个在适当位置插入生成的 setter 和 getter 的 YASnippet？

> ID：12892424
> 
> 赞同：2
> 
> 时间：2012-10-15T09:08:45.250
> 
> 标签：java, emacs, yasnippet

在[如何在 emacs 中为 Java 类实现“生成 getter/setter”的答案中？](https://stackoverflow.com/q/4990163/789593)有几个 YASnippet 可以解决在 Java 中创建实例变量时生成 setter 和 getter 的问题。但是，它们都没有在创建时适当地处理 setter 和 getter 方法的排序。例如，如果您有两个实例变量并在当前声明之间添加第三个，则 setter 和 getter 方法将直接在第二个实例变量之后结束，第三个实例变量的声明在方法之后。有没有办法编写一个 YASnippet 以便在适当的位置插入 setter 和 getter，即与实例变量的声明具有相同的排序？

# ios - 使用 CIDetector 进行检测时的 iOS 面部跟踪

> ID：12892427
> 
> 赞同：2
> 
> 时间：2012-10-15T09:08:50.203
> 
> 标签：ios, face-detection

这是实际的问题：在流式视频中进行人脸检测期间，我需要跟踪在之前的迭代中检测到哪些人脸以及哪些人脸是新人脸。这可以通过

CIFace特征跟踪ID

财产，但困难的部分来了。首先：CIDetector 返回数组

CIFaceFeature内部

对象而不是 CIFaceFeature。它们几乎像 CIFaceFeature，但不包含任何跟踪 id 或眼睛数据。目前我在iOS 5上试过，所以

CIDetectorTracking

CIDetector 的选项仅适用于 iOS 6，这可能是预期的结果。无论如何，我需要在我的应用程序中定位 iOS 5。我可以尝试通过计算检测到的人脸矩形来确定屏幕上是否仍然存在某些人脸，但没有额外的信息，如眼睛和嘴巴的位置，这些信息将非常不确定。

那么问题来了：

如何在 iOS 5 中从视频输出中检测人脸，并获得一些跟踪 id 以找到找到的人脸？

如果我至少能得到一个方向，也许像 openCV 之类的第 3 方库或一些非常有帮助的解释。

# sharepoint - Sharepoint 客户端对象模型：如何获取列表中的所有字段

> ID：12892430
> 
> 赞同：5
> 
> 时间：2012-10-15T09:09:03.840
> 
> 标签：sharepoint, sharepoint-clientobject

我有一个名为“讨论列表”的列表。我想从列表中提取所有列。

我想知道如何做 SharePoint 客户端对象模型。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T09:45:42.957

好的。找到了解决方案。使用我按标题获得的列表在此处回答，但可以使用任何方法：

```
// Get your ClientContext for your site  in 'clientContext'

SP.List oList = clientContext.Web.Lists.GetByTitle("List Title Here"); 
SP.FieldCollection fieldColl = oList.Fields;
clientContext.Load(fieldColl);
clientContext.ExecuteQuery();

foreach (SP.Field fieldTemp in fieldColl)
{
    MessageBox.Show(fieldTemp.InternalName.ToString()); //I used MessageBox to show, but you can do whatever you like with it here.
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-06T21:39:30.227

答对了。你会喜欢这个的。感谢上帝的泛型和 Linq！

```
// return all rows and (selected) fields of a list--fields are included dynamically
private Dictionary<string,Dictionary<string,object>> getListData( ClientContext ctx )
{
    Log.LogMessage( "Fetching {0}{1}", ctx.Url, ListName );
    var list = ctx.Web.Lists.GetByTitle( ListName );

    // fetch the fields from this list
    FieldCollection fields = list.Fields;
    ctx.Load( fields );
    ctx.ExecuteQuery();

    // dynamically build a list of fields to get from this list
    var columns = new List<string> { "ID" }; // always include the ID field
    foreach( var f in fields )
    {
        // Log.LogMessage( "\t\t{0}: {1} of type {2}", f.Title, f.InternalName, f.FieldTypeKind );
        if( f.InternalName.StartsWith( "_" ) || f.InternalName.StartsWith( "ows" ) ) continue;  // skip these
        if( f.FieldTypeKind == FieldType.Text ) // get Text fields only... but you can get other types too by uncommenting below
                // || f.FieldTypeKind == FieldType.Counter
                // || f.FieldTypeKind == FieldType.User
                // || f.FieldTypeKind == FieldType.Integer
                // || f.FieldTypeKind == FieldType.Number
                // || f.FieldTypeKind == FieldType.DateTime
                // || f.FieldTypeKind == FieldType.Lookup
                // || f.FieldTypeKind == FieldType.Computed
                // || f.FieldTypeKind == FieldType.Boolean )
        {
            columns.Add( f.InternalName );
        }
    }

    // build the include expression of which fields to fetch
    List<Expression<Func<ListItemCollection, object>>> allIncludes = new List<Expression<Func<ListItemCollection, object>>>();
    foreach( var c in columns )
    {
        // Log.LogMessage( "Fetching column {0}", c );
        allIncludes.Add( items => items.Include( item => item[ c ] ) );
    }

    // get all the items in the list with the fields
    ListItemCollection listItems = list.GetItems( CamlQuery.CreateAllItemsQuery() );
    ctx.Load( listItems, allIncludes.ToArray() );

    ctx.ExecuteQuery();

    var sd = listItems.ToDictionary( k => k["Title"] as string, v => v.FieldValues );   // FieldValues is a Dictionary<string,object>

    // show the fields
    foreach( var i in sd.Keys )
    {
        Log.LogMessage( "\tItem: {0}", i );
        foreach( var c in columns )
        {
            Log.LogMessage( "\t\t{0}: {1}", c, sd[ i ][ c ] );
        }
    }

    return sd;
} 
```

# javascript - JavaScript 函数在 iOS 中不起作用

> ID：12892438
> 
> 赞同：0
> 
> 时间：2012-10-15T09:09:31.043
> 
> 标签：javascript, html, objective-c, ios, mfmailcomposeviewcontroller

我创建了包含 JavaScript 的 NSString。

```
NSString *   someString =@"<!DOCTYPE html>\n        <html>\n       <body> \n    

    <h1>My Web Page</h1> \n       <p id=\"myPar\">I am a paragraph.</p><div id=\"myDiv\">I am a div.</div> \n       <p>        <button type=\"button\" onclick=\"myFunction()\">Try it</button> \n       </p>        <script type=\"text/javascript\">        function myFunction()        {            document.getElementById(\"myPar\").innerHTML=\"Hello Dolly\";            document.getElementById(\"myDiv\").innerHTML=\"How are you?\";\n        }        </script>       <p>When you click on \"Try it\", the two elements will change.</p>       \n </body> \n       </html>\n"; 
```

之后，我使用该字符串设置电子邮件正文。

```
 MFMailComposeViewController* Apicker = [[MFMailComposeViewController alloc] init];
            if (Apicker != nil)
            {

                Apicker.mailComposeDelegate = self;
    }
     [Apicker setMessageBody:someString isHTML:YES];
 [self presentModalViewController:Apicker animated:YES]; 
```

我发送电子邮件。

我的问题是，当我检查该邮件并按下`Try it`按钮时，它不起作用。

如果我在对象中使用简单的 HTML `someString`，它就可以工作。

为什么 JavaScript 在电子邮件中不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:54:52.677

出于安全原因，大多数电子邮件客户端（包括 iPhone）不支持 JavaScript。

例如，可以在电子邮件中嵌入恶意脚本，如果电子邮件被阅读，该脚本会向发件人报告，从而允许垃圾邮件发送者验证电子邮件地址。

使用 CSS 伪类[`:focus`](https://developer.mozilla.org/en-US/docs/CSS/%3afocus)，你可以在 CSS 中实现类似的东西。

尽管这有其局限性（例如不能将按钮放在 HTML 元素之后而不是在它们前面），但它是要求收件人点击网页的唯一选择；电子邮件仅限于 HTML 和 CSS。

**HTML**：

```
<button type="button">Try it</button>
<p id="myPar"><span class=oldtext>I am a paragraph.</span><span class=newtext>Hello Dolly</span></p>

<div id="myDiv"><span class=oldtext>I am a div.</span><span class=newtext>How are you?</span></div>

<p>When you click on "Try it", the two elements will change.</p> 
```

**CSS：**

```
/*
    Default state
*/
button+#myPar .oldtext,button+*+#myDiv .oldtext{

    display:inline;/* Not required because <span> tags are inline by default. Use if you use block-level elements and / or elements that are styled as block-level elements */
}

button+#myPar .newtext,button+*+#myDiv .newtext{

    display:none;
}

/*
    Button click effect
*/
button:focus+#myPar .oldtext,button:focus+*+#myDiv .oldtext{

    display:none;
}

button:focus+#myPar .newtext,button:focus+*+#myDiv .newtext{

    display:inline;
} 
```

↪[在 JSFiddle 查看这个例子](http://jsfiddle.net/7uwmb/1/)

***注意**：根据[can I use](http://caniuse.com/#feat=css-sel2)，本示例中使用的 CSS 与 iOS 兼容。它**不适**用于 IE < 9。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:12:10.793

出于安全原因，大多数电子邮件客户端（包括 iPhone）不支持 JavaScript。

例如，可以在电子邮件中嵌入恶意脚本，如果电子邮件被阅读，该脚本会向发件人报告，从而允许垃圾邮件发送者验证电子邮件地址。

# python - 编写此代码的更好方法？

> ID：12892440
> 
> 赞同：3
> 
> 时间：2012-10-15T09:09:31.500
> 
> 标签：python, idioms

我有以下代码，我认为它很臭，因为`vi`. 我怎样才能写得更好？

```
vi = '([a-zA-Z0-9_\-\.]+)'

handlers = [
    (r'/register', RegistrationHandler),
    (r'/profiles/%s/%s' % (vi, vi), GetProfiles),
    (r'/archives/%s/%s/%s/%s' % (vi, vi, vi, vi), GetArchives),
    (r'/publish-profiles', PublishProfiles),
    (r'/publish-bundle/%s/%s' % (vi, vi), PublishBundle),
    (r'/upload-file/%s/%s/%s' % (vi, vi, vi), UploadFile),
    (r"/favicon\.ico", tornado.web.StaticFileHandler, dict(path=settings['static_path'])),
    ] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T09:14:55.740

如果您使用的是 Python 2.6+，则可以使用[`str.format`](http://docs.python.org/library/stdtypes.html#str.format)：

```
r'/archives/{0}/{0}/{0}/{0}'.format(vi) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T09:12:35.303

这很容易，尝试命名您的变量，然后您可以访问具有给定名称的变量，任意次数。这是一个例子：

```
"%(vi)s is %(vi)s" % {'vi':vi} 
```

基本上，您使用 dict 进行替换。然后，您将格式从`%<options><variabletype>`(eg `%2s`) 更改为`%(<dictKey><options><variabletype>)`(eg `%(vi)2s`)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T09:11:57.667

而不是写一个`n`重复的元组，`vi`你可以写`(vi,)*n`.

# ios - ios中通行证的信用卡支付

> ID：12892443
> 
> 赞同：0
> 
> 时间：2012-10-15T09:09:49.120
> 
> 标签：ios, payment, passbook

> **可能重复：**
> [在 ios 应用上接受付款？](https://stackoverflow.com/questions/6481517/accept-payment-on-ios-apps)

我可以允许用户在我的应用程序中使用他们的信用卡而不是苹果在应用程序购买中支付他们的通行证吗

# blackberry - 如何下载 BBM SDK 并将其集成到我当前的应用程序中

> ID：12892451
> 
> 赞同：0
> 
> 时间：2012-10-15T09:10:14.920
> 
> 标签：blackberry

如何将 BBM SDK 添加到我当前的黑莓项目中，任何人都可以提供下载链接，

```
 My Target is to add Blackberry Pin programatically to Blackberry Messanger. 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T09:40:29.383

我们无法以编程方式将 PIN 添加到 BBM 联系人，我们无法控制以编程方式添加或删除 BBM 联系人。

我知道我们可以从我们的应用程序中调用 BBM 应用程序，但我不知道我们是否可以为邀请预定义 BBM Pin。但是我们不能以编程方式完成所有事情，您可能需要用户提示来执行此类事情

这是[链接](http://docs.blackberry.com/en/developers/subcategories/?userType=21&category=BlackBerry%20Messenger%20Social%20Platform%20SDK)

# c# - 如何在.net（C#）套接字上接收/发送文件、数据并区分它们

> ID：12892453
> 
> 赞同：0
> 
> 时间：2012-10-15T09:10:30.313
> 
> 标签：c#, .net, file, sockets, asynchronous

我在 .net 套接字上有异步服务器和异步客户端。客户端创建对象（例如类 UserInfo），序列化他，并写入 byte[]。客户端也有一些文件（例如 1.png）。客户端需要将序列化的 UserInfo 和 1.png 发送到服务器。

我用于文件，

> Socket.BeginSendFile 方法（字符串、AsyncCallback、对象）

对于 byte[] 对象

> client.BeginSend(byteData, 0, byteData.Length, 0, new AsyncCallback(SendCallback), client);

服务器必须一起接收这个日期，并了解什么是文件，什么是序列化对象（因为服务器只有一种接收数据的方法）。

```
listener.BeginAccept(
new AsyncCallback(AcceptCallback),
listener);
...
AcceptCallback(IAsyncResult ar)
{...
 handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
                new AsyncCallback(ReadCallback), state);
} 
```

和我们的逻辑

```
ReadCallback(IAsyncResult ar)
    {...} 
```

如何正确接收这些数据？最后，我需要该服务器具有 1.png 和 UserInfo 对象。（并区分它们）。而且，由于服务器是异步的，所以在同时接收来自多个客户端的数据时不应该混淆

我有一个想法，但我认为这是错误的：尝试在客户端上使用

> Socket.BeginSendFile 方法（String、Byte[]、Byte[]、TransmitFileOptions、AsyncCallback、Object）

使用 byte[] preBuffer，我将在其中写入标头，例如“...”，在服务器上我尝试找到此标头，剪切它，分析并做一些活动。

有没有更简单更正确的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:14:39.120

就实现而言，每个通道（套接字）都应具有明确且已知的协议-众所周知的对象类型。所以引入一个主类，它将封装所有可以通过这个套接字发送的数据：

```
public interface IPacketWrapper
{
   IEnumerable<byte> Payload { get; }
   UserInfo UserDetails { get; }
} 
```

因此客户端和服务器通过实现的对象进行交换，`IPacketWrapper`因此您可以将二进制数据和 放在一起`UserInfo`，然后分别在客户端/服务器端序列化/反序列化该对象。

# android - 在 Galaxy 选项卡上启动活动时如何隐藏键盘？

> ID：12892455
> 
> 赞同：0
> 
> 时间：2012-10-15T09:10:32.870
> 
> 标签：android, keyboard, hide

我正在使用带有 Android 3.1 的 Galaxy 选项卡，我试图在其布局文件中使用 EditText 启动活动，但问题是每次我输入活动时都会自动显示键盘。除非单击 EditText，否则我不希望显示键盘。

我使用了许多解决方案，除了我的**Galaxy Tab**之外，它们都适用于许多 android 设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:12:45.330

将以下内容设置为您在**AndroidManifest.xml中的活动**

```
android:windowSoftInputMode="stateHidden" 
```

或在您的活动代码的**onCreate**中：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

* * *

或尝试将以下内容添加到您的**onResume()**

```
try {
    InputMethodManager inputManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    inputManager.hideSoftInputFromWindow(this.getCurrentFocus().getWindowToken(), 0);
}
catch (Exception e) { /* do nothing */ } 
```

有关更多信息，请阅读[此](https://stackoverflow.com/a/7832810/966550)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:17:41.130

在你的`AndroidManifest.xml`：

```
<activity android:name="com.your.package.ActivityName"
          android:windowSoftInputMode="stateHidden"  /> 
```

更多细节`windowSoftInputMode`可以在[这里](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)找到。

此设置将在用户输入新 Activity 时隐藏软键盘（即使 EditText 控件获得焦点）。只有当用户单击编辑框控件时，才会显示软键盘。

# javascript - 使用 JavaScript 调整图像大小时如何保持图像质量不变？

> ID：12892458
> 
> 赞同：0
> 
> 时间：2012-10-15T09:10:43.883
> 
> 标签：javascript, html, image

这个问题相信大家都不陌生。

例如，如果我有一张图片，我以 32 x 32 px 的大小显示，然后用 JavaScript 将其放大到 64 x 64 px，图片质量会在大约 1 到 2 秒内变差，然后变得更好。

那么有没有办法在使用 JavaScript 调整图片大小时防止图片质量下降呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:11:52.043

您可以将图像交换为预加载的图像，而不是调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:14:21.373

好吧，这首先取决于图像的大小，如果图像大小大于您在代码中设置的大小，很明显，如果您使用 javascript 进行缩放，它将向您显示更清晰的内容。

如果图像本身尺寸较小并且您想要缩放，则图像将失真和像素化。

同样，当您尝试缩放或使其更大时，请尝试相等的命题，或者您可以使用 css zoom 属性进行缩放

# objective-c - iOS 5.0 警告：找不到委托的协议定义

> ID：12892463
> 
> 赞同：6
> 
> 时间：2012-10-15T09:10:53.347
> 
> 标签：objective-c, ios5, protocols, forward-declaration

我有自定义 UIView 类 GestureView。我有这个类的前向声明，它是下面的代表。我在 .m 文件中导入了 GestureView.h。这工作正常，但 iOS 发出警告消息说“找不到 GestureViewDelegate 的协议定义”。如果我删除前向声明，它会给出与错误相同的警告消息。我不想从 ContainerViewController.h 导入 GestureView.h，因为我通常会在 .m 文件中导入东西。有人可以解释一下类结构有什么问题吗？

**ContainerViewController.h**

```
#import <UIKit/UIKit.h>

@class DividerView;
@class GestureView;
@protocol GestureViewDelegate;

@interface ContainerViewController : UIViewController<GestureViewDelegate>
   @property (strong, nonatomic) IBOutlet GestureView *topContentView;
@end 
```

**手势视图.h**

```
#import <UIKit/UIKit.h>

@protocol GestureViewDelegate;

@interface GestureView : UIView
    - (void)initialiseGestures:(id)delegate;
@end

@protocol GestureViewDelegate <NSObject>
@required
- (void)GestureView:(GestureView*)view handleSignleTap:(UITapGestureRecognizer*)recognizer;
@end 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-15T20:48:40.537

我喜欢你试图避免在头文件中导入：非常好的做法。但是，要修复您的错误，您可以使您的代码变得更好！在我看来，你的类没有必要`ContainerViewController`对外声明它支持`GestureViewDelegate`协议，所以你应该把它移到你的实现文件中。像这样：

**手势视图.h**

```
#import <UIKit/UIKit.h>

@protocol GestureViewDelegate;

@interface GestureView : UIView

- (void)initialiseGestures:(id <GestureViewDelegate>)delegate;

@end

@protocol GestureViewDelegate <NSObject>
@required

- (void)gestureView:(GestureView *)view handleSingleTap:(UITapGestureRecognizer *)recognizer;

@end 
```

**ContainerViewController.h**

```
#import <UIKit/UIKit.h>

@class GestureView;

@interface CollectionViewController : UIViewController

// this property is declared as readonly because external classes don't need to modify the value (I guessed seen as it was an IBOutlet)
@property (strong, nonatomic, readonly) GestureView *topContentView;

@end 
```

**容器视图控制器.m**

```
#import "ContainerViewController.h"
#import "GestureView.h"

// this private interface declares that GestureViewDelegate is supported
@interface CollectionViewController () <GestureViewDelegate>

// the view is redeclared in the implementation file as readwrite and IBOutlet
@property (strong, nonatomic) IBOutlet GestureView *topContentView;

@end

@implementation ContainerViewController

// your implementation code goes here

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:22:43.120

试试这个方法，如果有效，请回复。

手势视图.h

```
#import <UIKit/UIKit.h>

@protocol GestureViewDelegate <NSObject>
@required
- (void)GestureView:(GestureView*)view handleSignleTap:(UITapGestureRecognizer*)recognizer;
@end

@interface GestureView : UIView
    - (void)initialiseGestures:(id)delegate;
@end 
```

容器视图.h

```
#import <UIKit/UIKit.h>

@class DividerView;
@class GestureView;
/*@protocol GestureViewDelegate;*/ //NO NEED TO WRITE THIS

@interface ContainerViewController : UIViewController<GestureViewDelegate>
   @property (strong, nonatomic) IBOutlet GestureView *topContentView;
@end 
```

# javascript - jQuery 中的 $.post 语法

> ID：12892472
> 
> 赞同：5
> 
> 时间：2012-10-15T09:11:24.863
> 
> 标签：javascript, jquery

请让我知道以下是否是使用 jQuery 将数据发送到另一个页面的正确方法。我是初学者，不确定语法。`rowData`是 JSON 格式。我通过单击按钮传递值。

```
$.post("GridValues.jsp", {"rowData": rowData }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T09:17:04.027

您的语法`POST`取决于 JSP 页面是期望接收 CGI 样式的 URI 编码变量还是 JSON blob。

在前一种（更常见的）情况下，您的代码是正确的 -`rowData`变量将显示为需要进行 JSON 解码的 CGI 参数。

如果您希望在`$.post`调用完成后让您的客户端代码执行某些操作，那么*现代*的方法是使用延迟对象：

```
$.post(...).done(function(data, textStatus, jqXHR) {
    // called on success
}).fail(function(jqXHR, textStatus, errorThrown) {
    // called on failure
}).always(function() {
    // called in both cases 
}); 
```

Note how using deferred objects exposes features (`.fail` and `.always` callbacks) that are not directly available using `$.post`, which only supports passing a `success` (aka `done`) handler.

Using the `jqXHR` *result* of `$.post` to register callbacks is more flexible than passing callbacks as parameters directly to the AJAX-related methods. It allows you to write functions that are only responsible for *initiating* the AJAX call and then have handlers that are completely decoupled from that responsible for processing the results.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T09:16:44.577

您的 jquery 调用应该适合您。另外，您可以随时参考 jquery API [jQuery.post](http://api.jquery.com/jQuery.post/)

> jQuery.post( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] )
> 
> url 包含请求发送到的 URL 的字符串。
> 
> 数据与请求一起发送到服务器的映射或字符串。
> 
> success(data, textStatus, jqXHR)请求成功时执行的回调函数。
> 
> 数据类型服务器预期的数据类型。默认值：智能猜测（xml、json、脚本、文本、html）。

试一试，如果您遇到任何问题，请告诉我们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T09:15:51.490

```
$.post("GridValues.jsp", {"rowData": rowData }, function(){} ); 
```

它和

```
$.ajax({
type: 'POST',
url: "GridValues.jsp",
data: {"rowData": rowData },
success: function(){}
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T09:16:20.633

此语法是有效的。

见： [http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

该文档提供了以下语法： `jQuery.post( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] )`

您确定不想包含成功处理程序吗？

# msbuild - 带变量的 Msbuild 任务

> ID：12892480
> 
> 赞同：0
> 
> 时间：2012-10-15T09:12:03.977
> 
> 标签：msbuild, msbuild-task

我希望 $(fooAssemblyInfo.Version) 在我的 BuildRepositoryZip 任务中工作，但它不是。为什么？我是否必须将 ItemName 或其他内容移出 Target assemblyversion，在这种情况下如何完成？

```
<Target Name="AssemblyVersion">
    <GetAssemblyIdentity AssemblyFiles="..\Tools\Utility.dll">
        <Output TaskParameter="Assemblies" ItemName="fooAssemblyInfo"/>
    </GetAssemblyIdentity>
    <Message Text="%(fooAssemblyInfo.Version)" />
</Target>

<!-- Zipping all *.zip to a package for repository server-->
<Target Name="BuildRepositoryZip" DependsOnTargets="AssemblyVersion">
            <!-- Create a zip file based on a Path -->
    <MSBuild.ExtensionPack.Compression.Zip TaskAction="Create" CompressPath="..\..\Deploy\*.zip" ZipFileName="..\..\$(fooAssemblyInfo.Version).zip"/>

</Target> 
```

# java - 计算时间戳之间的年、月、日差异

> ID：12892490
> 
> 赞同：2
> 
> 时间：2012-10-15T09:12:37.837
> 
> 标签：java, sql, timestamp

> **可能重复：**
> [如何计算两个 Java java.sql.Timestamps 之间的差异？](https://stackoverflow.com/questions/582278/how-to-calculate-the-difference-between-two-java-java-sql-timestamps)

您如何计算从 Java 中的 SQL 获取的两个时间戳之间的年/月/天（实际上不需要时间）？

下面是我正在使用的代码片段：

```
query = "SELECT bc.periodbeginningdate " +
            "FROM cus_billingcontract bc " +
            "WHERE cus_billingcontract_id = " + recordID;
Timestamp bDate = DB.getSQLValueTS(null, query);

query = "SELECT bc.periodenddate " +
            "FROM cus_billingcontract bc " +
            "WHERE cus_billingcontract_id = " + recordID;
Timestamp eDate = DB.getSQLValueTS(null, query); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:16:08.543

您可以`long`使用以下方法将时间戳转换为 s `getTime()`：请参阅此处以获取大量信息：

[如何计算两个 Java java.sql.Timestamps 之间的差异？](https://stackoverflow.com/questions/582278/how-to-calculate-the-difference-between-two-java-java-sql-timestamps?rq=1)

然后，使用这些`long`值，您可以使用 JodaTime 库轻松访问月份差异。

看这里：

[如何使用 Java 的 Joda API 仅在几个月内计算差异](https://stackoverflow.com/questions/7460701/how-to-calculate-difference-only-in-months-using-javas-joda-api)

# php - php：无法获得带有 readfile 的 Excel 的下载提示

> ID：12892497
> 
> 赞同：-4
> 
> 时间：2012-10-15T09:12:50.420
> 
> 标签：php, excel, header, fopen, readfile

我已经在这里和许多其他网站上进行了搜索，但找不到这样一个众所周知的问题的解决方案。我无法提示使用 php 的 readfile 下载 excel 文件。我也尝试过使用 fopen,print(fread),fclose 组合，但这也不起作用。请求 url 是 https 我在 http 时得到了提示：

```
 $path=$_SERVER['DOCUMENT_ROOT'].'/uploads/'.$legit;  
 header('Content-Description: File Transfer');  
 header('Content-Transfer-Encoding: binary');
 header('Accept-Ranges: bytes'); 
 header("Content-Disposition: attachment; filename='file.xls'");                                                       
 header('Content-Type: application/vnd.ms-excel');
 header('Content-Length: ' . filesize(\$path));
 header('Cache-Control: must-revalidate');
 header('Pragma: public');
 header('Expires: 0');
 ob_clean();
 readfile($path);
 exit;
  /*   IF ($file = FOPEN($path, 'rb')) {
   WHILE(!FEOF($file) and (CONNECTION_STATUS()==0)) {
     PRINT(FREAD($file, 1024*8));
 FLUSH();
     }
   FCLOSE($file);
    }
  RETURN((CONNECTION_STATUS()==0) and !CONNECTION_ABORTED());
   exit;
       }    */ 
```

请求，响应标头在萤火虫中都显示得很好，但没有提示。

我的客户端标头是使用 dojo/request API 发送的：

```
 var args={
             headers :{
                        'Content-Type' :'application/x-www-form-urlencoded',
                        'Accept' :'application/vnd.ms-excel',
                        'X-Requested-With':'XMLHttpRequest'
                            },
                            method:'GET',
                            timeout:10000
                        }
   var deferred=request.get(url,args);//the url is https it worked with http 
```

有什么帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:16:15.303

如果您使用 AJAX 请求请求数据，则响应将在后台透明地返回给 AJAX 进程。您必须将当前页面的主 URL 重定向到文件下载 URL 以引发文件下载过程。

# silverlight - Hotmail 中邮件正文的富文本编辑器在首先输入主题和收件人时冻结

> ID：12892500
> 
> 赞同：0
> 
> 时间：2012-10-15T09:13:06.377
> 
> 标签：silverlight, google-chrome, richtextbox, hotmail, windows-live

这是一个奇怪的问题，发生了数百次。我试图找出为什么当您首先输入主题和收件人时，Hotmail 中邮件正文的富文本编辑器会冻结。（有时！）。

我正在使用最新版本的 Chrome 版本 22.0.1229.94 m。我认为它与 Silverlight 有关，有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:35:21.160

我刚更新到outlook，现在好多了，没有这个问题了

# javascript - 在运行函数之前确保我的循环完全完成？

> ID：12892507
> 
> 赞同：0
> 
> 时间：2012-10-15T09:13:24.670
> 
> 标签：javascript, jquery, flexslider

我创建了一个循环，对我的数据进行模板化，然后将其附加到选定的 div 中，我想确保在运行下一个函数之前这些数据已经完全模板化并注入，所以我真正需要的是回调函数之类的东西。谁能建议我如何做到这一点？

JS

```
// Template slideshow
for (var i = 0, len = data.films.length; i < len; i++) {
    var dataPath = data.films[i];
    var tmp = '<li><img src="http://dummyimage.com/300/000/' + dataPath.id + '" /><h2>' + dataPath.title + '</h2></li>';

    $('.slides').append(tmp);
}

// Want to run this once Im sure all data has been templated and injected
$('.flexslider').flexslider({
    animation: "slide"
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:16:38.770

你不需要回调。您创建的代码总是在循环完成时注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:16:20.173

```
// Template slideshow
for (var i = 0, len = data.films.length; i < len; i++) {
    var dataPath = data.films[i];
    var tmp = '<li><img src="http://dummyimage.com/300/000/' + dataPath.id + '" /><h2>' + dataPath.title + '</h2></li>';

    $('.slides').append(tmp);

    // Want to run this once Im sure all data has been templated and injected
    if (i==len) {
       $('.flexslider').flexslider({
          animation: "slide"
       });​
    }
} 
```

# uitextfield - 无法通过 theos 挂钩 UITextfield 类

> ID：12892513
> 
> 赞同：0
> 
> 时间：2012-10-15T09:14:05.367
> 
> 标签：uitextfield, uitextview, jailbreak, cydia, tweak

我想为挂钩 uitextfield 或 uitextview 开发简单的调整。我的代码如下

```
%hook UITextView

-(id)initWithFrame:(CGRect)frame webView:(id)view
{
    UIAlertView *keyAlert = [[UIAlertView alloc] initWithTitle:@"testApp" message:@"Test" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [keyAlert show];
    [keyAlert release];

    return %orig;
}
%end 
```

它执行成功，但我无法获得任何输出。请检查此调整并帮助我，如果我走错了方向，请建议我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:02:58.893

您可能在这里做错了两件事：

1) UITextView 不一定在初始化时调用该方法；它可能正在调用 -initWithFrame: 、 -initWithFrame:font: 或 -initWithFrame:webView: （或者甚至只是 -init，稍后会设置框架）。您应该挂钩所有案例，看看您是否得到任何结果以及其中一个结果。

```
%hook UITextView
-(id)initWithFrame:(CGRect)frame
{
    %log; // conveniently NSLogs self,selector,arguments
    return %orig;
}
-(id)initWithFrame:(CGRect)frame font:(UIFont *)font
{
    %log; 
    return %orig;
}
-(id)initWithFrame:(CGRect)frame webView:(UIWebView *)webView
{
    %log; 
    return %orig;
}
%end 
```

2) Make sure the process you're hooking onto is the one calling the method. If your project's plist filters "com.apple.springboard" and you're testing this into another app, e.g. "com.apple.mobilesafari", it won't work.

# javascript - 图片说明无法正常工作

> ID：12892514
> 
> 赞同：1
> 
> 时间：2012-10-15T09:14:11.187
> 
> 标签：javascript, jquery, slidesjs

我正在使用[SlidesJS JQuery 插件](http://slidesjs.com/)在网页顶部显示滑动横幅。

但是，我在添加覆盖在图像上的图像标题时遇到了麻烦。根据上面的网站，我创建了一个带有类标题的新 p 并在其中输入我的标题，但据我所知，插件认为这个标题 div 是另一张幻灯片，并且在每个图像之后只显示标题文本。

[您可以在此处](http://www.abbottskitchens.com/study/test-article)查看该页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:32:52.713

您可能想检查[带有标题的示例 SlidesJS](http://archive.slidesjs.com/examples/images-with-captions/)。查看您的 html 代码并立即看到您正在为所有图像（幻灯片）使用一个 div 块。在链接上的示例代码中，他们将图像（幻灯片）拆分为每个 div，以便当您需要添加标题时，只需在 div 中添加一个子项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:33:33.097

他们的示例有每张幻灯片，然后在另一个 div 中添加标题，如下所示：

```
<div class="slide">
   <a href="/gosomewhere"><img src="/images/myimage"/></a>
   <div class="caption"><p>this image is awesome</p></div>
</div> 
```

如果没有实际尝试，我认为您可能会错过**幻灯片**以及分类为**div**的子**标题**

# javascript - 如何使用 jQuery 或 JavaScript 打印不断变化的 div

> ID：12892519
> 
> 赞同：0
> 
> 时间：2012-10-15T09:14:30.760
> 
> 标签：javascript, jquery, printing

我有一个`div`可以通过更改其十六进制值来控制颜色的颜色，但是如何将其打印为我选择的任何颜色而不是我在 上的原始颜色`div`？

**例如**：我`div`的是*白色*的。我将颜色更改为*红色*，并且有一个按钮可以让我打印它`div`，但它显示我正在打印*白色* `div`而不是*红色*。

```
<script language="JavaScript">
var gAutoPrint = true; // Tells whether to automatically call the print function

function printSpecial()
{
if (document.getElementById != null)
{
var html = '<HTML>\n<HEAD>\n';

if (document.getElementsByTagName != null)
{
var headTags = document.getElementsByTagName("head");
if (headTags.length > 0)
html += headTags[0].innerHTML;
}

html += '\n</HE>\n<BODY>\n';

var printReadyElem = document.getElementById("printReady");

if (printReadyElem != null)
{
html += printReadyElem.innerHTML;
}
else
{
alert("Could not find the printReady function");
return;
}

html += '\n</BO>\n</HT>';

var printWin = window.open("","printSpecial");
printWin.document.open();
printWin.document.write(html);
printWin.document.close();
if (gAutoPrint)
printWin.print();
}
else
{
alert("The print ready feature is only available if you are using a browser. Please
update your browser.");
}
}

</script> 
```

这是我的按钮并选择`div`：

```
<div id="printReady"> 

div I want to print
</div>

<a href="javascript:void(printSpecial())" style="position:absolute">Print this Page</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:24:32.220

添加样式

```
html += '<style>* { color: red }</style>'; 
```

例如

```
<script language="JavaScript">
var gAutoPrint = true; // Tells whether to automatically call the print function

function printSpecial() {
  if (document.getElementById == null) return false;
  var printReadyElem = document.getElementById("printReady");
  if (printReadyElem==null) {
    alert("Could not find the printReady function");
    return false;
  }

  var html = '<HTML>\n<HEAD>\n';

  if (document.getElementsByTagName != null) {
    var headTags = document.getElementsByTagName("head");
    if (headTags.length > 0) html += headTags[0].innerHTML;
  }

  html += '<style>* { color: red }</style>';
  html += '\n</HEAD>\n<BODY>\n';
  html += printReadyElem.innerHTML;
  html += '\n</BODY>\n</HTML>';

  var printWin = window.open("","printSpecial");
  if (printWin) {
    printWin.document.write(html);
    printWin.document.close();
    if (gAutoPrint) {
      printWin.focus().print();
    }
  }    
  else {
    alert("The print ready feature is only available if you are using a browser that supports it and you have not blocked popups. Please update your browswer.");
  }
  return false;
}
</script>

this is my button and selected div

  <div id="printReady"> 

  div i want to print
  </div>

  <a href="#" onclick="return printSpecial()" style="position:absolute">Print this Page</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:22:37.607

如果我理解了你的问题，你可以在 printSpecial() 的顶部添加这行代码：

```
$('#printReady').css('background', '#ff0000'); 
```

控制这种事情的更好方法是使用样式。

```
<style>
   .ready {
     background: #ffffff;
   }

   .printing {
     background: #ff0000;
   }
</style> 
```

然后你可以使用 jQuery.addClass 和 jQuery.removeClass。这样，您只需将 CSS 更改为您想要在两种“状态”中拥有的任何内容。

然后你这样做来改变风格：

```
$('#printReady').removeClass('ready');
$('#printReady').addClass('printing'); 
```

然后当你想把它改回来时反过来。

# sql - SUBSTRING 和 SUBSTR 函数 (SQL) 有什么区别？

> ID：12892520
> 
> 赞同：2
> 
> 时间：2012-10-15T09:14:31.610
> 
> 标签：sql, oracle

在我使用之前：

```
entityManagerFactory.createQuery("select p FROM Pays p where SUBSTRING(p.libeleClient, 0,1) 
```

但是当我使用这个查询时：

```
entityManagerFactory.createQuery("select p FROM Pays p where SUBSTR(p.libeleClient, 0,1) 
```

我得到一个例外:(

谁用 SUBSTR 替换 SUBSTRING ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:16:58.693

SUBSTR 是 Oracle 的函数

SUBSTRING 是 MySql 的函数

取决于您使用的数据库

编辑：

尝试编辑您的java代码，如下所示

```
String query = "select p FROM Pays p where SUBSTRING(p.libeleClient, 0,1)";

        // from Connection Object (connection)
        DatabaseMetaData meta = connection.getMetaData();
        //If the DB is Oracle 
          if(meta.getDatabaseProductName()).contains("Oracle")) {
              entityManagerFactory.createQuery(query.replace("SUBSTRING", "SUBSTR"));
          }// If the DB not Oracle , any Other like MySql 
          else {
              entityManagerFactory.createQuery(query);
          } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-26T12:57:24.220

substring 是 sql 标准 ISE:IEC 9075:1992 中定义的 sql 操作。

substr 是 oracle 使用的旧语法。这种错误的语法与真正的英文单词的 sql 用法完全不一致，绝不是缩写。

Oracle 仍然不支持标准语法。

有没有人在 oracle 中编写了一个 hack 来支持标准语法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:20:34.003

你没有说你得到了什么异常，但我猜这是一个语法错误。Oracle SUBSTR() 的正确语法是...

```
where SUBSTR(p.libeleClient, 0,1) = 'X' 
```

...（管他呢）。即第一次出现的单个字符必须相等；一些指定的值。SUBSTR() 不是布尔函数。

而 SUBSTRING() 根本不是一个 oracle 函数。要么是从其他数据库借用了语法，要么是在没有意识到的情况下使用了定制函数。

* * *

> “我试过你的建议，但它不起作用”

你有错误吗？或者你的意思是它不返回任何记录？因为我给出了一个完全有效的用法，[如文档中所定义](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions169.htm#i87066)。但是您没有给出任何数据示例，因此我几乎不可能提供一个从您的数据库中返回行的解决方案。

# unit-testing - 如何重构和单元测试复杂的遗留 Java EE5 EJB 方法？

> ID：12892524
> 
> 赞同：2
> 
> 时间：2012-10-15T09:14:48.143
> 
> 标签：unit-testing, design-patterns, java-ee-5

我和我的同事目前正在向我们的旧版 Java EE5 代码库引入单元测试。我们主要使用 JUnit 和 Mockito。在编写测试的过程中，我们注意到我们的 EJB 中的几个方法很难测试，因为它们同时做了很多事情。

我对整个测试业务相当陌生，因此我正在寻找有关如何更好地构建代码或测试的见解。我的目标是写出好的测试而不用头疼。

这是我们的一种方法及其在管理消息队列的服务中的逻辑步骤的示例：

*   消费消息

    *   确认PreviousDownloadedMessages

    *   getNewUnreadMessages

    *   addExtraMessages（取决于有些复杂的条件）

    *   将消息标记为已下载

    *   序列化消息对象

顶层方法目前暴露在接口中，而所有子方法都是私有的。据我了解，刚开始测试私有方法是不好的做法，因为只有公共接口才重要。

我的第一反应是公开所有子方法并单独测试它们，然后在顶级方法中确保它调用子方法。但是后来一位同事提到，将所有这些低级别方法与另一个方法暴露在同一级别可能不是一个好主意，因为这可能会引起混淆，并且其他开发人员可能会在他们应该使用顶级方法时开始使用一。我不能指责他的论点。

所以我在这里。

您如何协调公开易于测试的低级方法与避免使接口混乱？在我们的例子中，EJB 接口。

我在其他单元测试问题中读到应该使用依赖注入或遵循单一责任原则，但我在实践中遇到了麻烦。有人能指出如何将这种模式应用于上面的示例方法吗？

您会推荐其他通用 OO 模式或 Java EE 模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:23:50.380

依赖注入 (DI) 和单一职责原则 (SRP) 高度相关。

SRP 基本上是说每个班级应该只做一件事，而将所有其他事情委托给不同的班级。例如，你的`serializeMessageObjects`方法应该被提取到它自己的类中——我们称之为它`MessageObjectSerializer`。

DI 意味着将`MessageObjectSerializer`对象作为参数注入（传递）给您的`MessageQueue`对象——无论是在构造函数中还是在对`consumeMessages`方法的调用中。您可以使用 DI 框架来执行此操作，但我建议手动执行此操作以获取概念。

现在，如果您为 . 创建一个接口`MessageObjectSerializer`，您可以将其传递给`MessageQueue`，然后您将获得该模式的全部价值，因为您可以创建模拟/存根以便于测试。突然，`consumeMessages`不必注意如何`serializeMessageObjects`表现。

下面，我试图说明这种模式。请注意，当您想要测试 consumeMessages 时，您不必使用该`MessageObjectSerializer`对象。您可以制作一个模拟或存根，它完全按照您的要求进行操作，然后传递它而不是具体类。这确实使测试变得更加容易。请原谅语法错误。我无法访问 Visual Studio，因此它是在文本编辑器中编写的。

```
// THE MAIN CLASS
public class MyMessageQueue() 
{

    IMessageObjectSerializer _serializer; 

    //Constructor that takes the gets the serialization logic injected
    public MyMessageQueue(IMessageObjectSerializer serializer)
    {
        _serializer = serializer;

        //Also a lot of other injection 
    }

    //Your main method. Now it calls an external object to serialize
    public void consumeMessages()
    {
        //Do all the other stuff

        _serializer.serializeMessageObjects()
    }
}

//THE SERIALIZER CLASS
Public class MessageObjectSerializer : IMessageObjectSerializer 
{
    public List<MessageObject> serializeMessageObjects()
    {
        //DO THE SERILIZATION LOGIC HERE 
    }
}

//THE INTERFACE FOR THE SERIALIZER 
Public interface MessageObjectSerializer 
{
    List<MessageObject> serializeMessageObjects(); 
} 
```

**编辑：**对不起，我的例子是在 C# 中。我希望你无论如何都能使用它:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:08:16.843

乍一看，我会说我们可能需要引入一个新类，它会 1) 公开可以进行单元测试的公共方法，但 2) 不会在 API 的公共接口中公开。

例如，假设您正在为汽车设计 API。要实现 API，您将需要一个引擎（具有复杂行为）。您想全面测试您的引擎，但又不想向汽车 API 的客户端公开详细信息（我对汽车的了解仅是如何按下启动按钮以及如何切换无线电频道）。

在那种情况下，我会做的是这样的：

```
public class Engine {
  public void doActionOnEngine() {}
  public void doOtherActionOnEngine() {}
}

public class Car {
  private Engine engine;

  // the setter is used for dependency injection
  public void setEngine(Engine engine) {
    this.engine = engine;
  }

  // notice that there is no getter for engine

  public void doActionOnCar() {
    engine.doActionOnEngine();
  }

  public void doOtherActionOnCar() {
    engine.doActionOnEngine();
    engine.doOtherActionOnEngine(),
  }
} 
```

对于使用 Car API 的人来说，没有办法直接访问引擎，因此没有造成伤害的风险。另一方面，可以对引擎进行完全单元测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:16:12.380

好吧，正如您所注意到的，对具体的高级程序进行单元测试非常困难。您还发现了两个最常见的问题：

通常程序被配置为使用特定资源，例如特定文件、IP 地址、主机名等。为了解决这个问题，您需要重构程序以使用依赖注入。这通常是通过向构造函数添加参数来替换 ahrdcoded 值来完成的。

测试大型类和方法也非常困难。这通常是由于测试复杂逻辑所需的测试数量的组合爆炸。为了解决这个问题，您通常会首先重构以获得更多（但更短）的方法，然后通过从原始类中提取几个类来尝试使代码更通用和可测试，每个类都有一个入口方法（公共）和几个实用程序方法（私有）。这本质上是单一责任原则。

现在您可以通过测试新类开始“向上”工作。这将容易得多，因为此时组合更容易处理。

在此过程中的某个时刻，您可能会发现使用以下设计模式可以大大简化代码：命令、复合、适配器、工厂、构建器和外观。这些是减少混乱的最常见模式。

旧程序的某些部分可能在很大程度上无法测试，要么是因为它们太笨拙，要么是因为它不值得麻烦。在这里，您可以满足于一个简单的测试，它只检查已知输入的输出是否没有改变。本质上是回归测试。

# c++ - 为什么我们在 c++ 中有不同版本的 main 函数？

> ID：12892527
> 
> 赞同：7
> 
> 时间：2012-10-15T09:14:56.213
> 
> 标签：c++

> **可能重复：**
> [C++ 中的 _tmain() 和 main() 有什么区别？](https://stackoverflow.com/questions/895827/what-is-the-difference-between-tmain-and-main-in-c)

void main(...)、int main(..) 和 int _tmain() 有何不同。它们都是单进单出系统。但是我们在什么情况下使用这些启动功能呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:18:55.413

`void main()`是无效的; C++ 标准要求`main`返回`int`. 一些编译器让你侥幸逃脱。

`int main()`是两种标准形式之一。另一个是`int main(int argc, char *argv[])`，可用于接收命令行参数。实现可能允许其他形式，但不是必须的——但所有这些形式都*必须*返回`int`。

`int _tmain()`特定于 Microsoft。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:20:28.450

不同的实现支持不同的入口点（或入口点的选择）的原因是不同的操作系统或环境有不同的运行程序的方式，或者将参数信息传递给程序的不同方式。

有两种 C++ 实现：

“托管”实现假定存在某种操作系统。在托管实现上，`main`符合程序要求并且必须返回`int`.

“独立”实现不假设存在操作系统。在独立实现上，是否需要由实现决定`main`，但标准仍然说如果`main`需要，则必须返回`int`。

实现的常见做法是提供托管实现的功能，但允许`main`. 这符合托管实现的标准，前提是接受定义的符合标准的*程序。*`main`实际上，实现允许（作为扩展）某些没有`main`功能的不合格程序，只要它们包含实现定义的替代方案。从技术上讲，我认为它必须诊断“错误”，但实际上没有人会意外使用这样的扩展，所以他们可能不想看到诊断。

同样，符合要求的实现可以接受包含`void main`. 同样，为了使实现符合要求，它必须诊断出程序不符合要求。

实现无论如何都接受的不合格程序的含义取决于实现。

`_tmain`是一个 MS 扩展。它是`main`窄字符版本和`wmain`宽字符版本的别名。`wmain`也是一个 MS 扩展，它就像`main`除了`argv`作为宽字符串而不是窄字符串提供之外。因此，这是一个环境示例，其中有两种不同的方式为程序提供参数，具体取决于程序是否处理窄字符范围之外的字符（即 8 位代码页之外）。

# c#-4.0 - 如果我不使用 dispose 方法，linq 查询是否存在内存泄漏？

> ID：12892528
> 
> 赞同：0
> 
> 时间：2012-10-15T09:15:01.913
> 
> 标签：c#-4.0, memory-leaks, linq-to-entities

在代码审查期间，我被告知要确保对我使用的所有查询对象（LinqToEntities）执行 dispose 方法。

这是这么大的内存泄漏吗？我怎样才能更优雅地解决这个问题，现在我完成后不做任何处置？

我的代码如下：

```
var query = from x in listOfEntities where some_condition select x; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:17:35.657

我认为这个查询不会导致内存泄漏。它不是可能导致问题的查询。它可能是数据上下文。由于数据上下文实现了 IDisposable 你可以这样做：

```
using (var ctx = new yourDataContext())
{
   var query = from x in ctx.listOfEntities where some_condition select x;
} 
```

with`using`子句将确保在代码退出 using 语句后关闭与数据库的连接。它类似于 try/finally 块。

```
var ctx = new yourDataContext();
try
{
    var query = from x in ctx.listOfEntities where some_condition select x;
}
finally
{
   if(ctx != null)
        ctx.Dispose();
} 
```

编辑：（基于@Fredrik Mörk 的评论）。上面的代码只是为了向您展示`using`语句相对于`DataContext`. 要`query`在 using 块外使用对象，您可以在`using`块外定义它并调用`ToList`或类似方法，以便执行查询。以后就可以使用了。否则，由于延迟执行，当前代码块将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:25:17.360

不特定于这种情况，但是缺少调用是否`Dispose`会导致泄漏取决于一次性对象的内部工作原理。在一次性物品的框架中有一些例子，这些物品在处置时很少或不做任何事情。一些实现也只处理托管对象，无论如何最终都会由 GC 处理（因此在这种情况下，您只会丢失对象的*确定性*处理，不一定会导致任何内存泄漏）。

合同的重要部分`IDisposable`是它带来的约定。无论内部运作如何，您都遵守合同，因为内部运作是可以改变的，合同是不可改变的。虽然我不是盲目地应用规则，但我倾向于总是*尝试*处理我正在使用的项目。

# java - 使用Java查找Postgresql安装位置

> ID：12892532
> 
> 赞同：0
> 
> 时间：2012-10-15T09:15:30.260
> 
> 标签：java, postgresql, runtime.exec

我想找出Postgresql的安装位置，需要对postgresql.conf和pg_hba.conf文件做一些修改，然后重启Postgresql。

有什么方法可以识别出适用于 Windows/Unix/Linux 的安装目录吗？任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:53:52.303

问 PostgreSQL：

```
SHOW config_file;
SHOW hba_file; 
```

或者：

```
SELECT current_setting('config_file');
SELECT current_setting('hba_file'); 
```

当然，这需要 PostgreSQL 正在运行、侦听 TCP/IP 和默认端口。它还要求您能够进行身份验证。您需要提示用户输入端口（默认为 5432）和凭据。

在不询问正在运行的 PostgreSQL 实例的情况下，*没有*通用的方法来确定 PostgreSQL 数据目录位置，因为：

*   可能有不止一个正在运行的 PostgreSQL 实例
*   Mac OS X 上的 PostgreSQL 可能已经通过 Homebrew (Mac OS X)、Postgres.app (Mac OS X)、系统包管理 (Linux)、ports (BSD)、EnterpriseDB 安装程序、各种第 3 方汇总发行版、 .zip 二进制文件，或来自源代码。
*   PostgreSQL 可以从 launchd (Mac OS X)、作为 Windows 服务 (Windows)、从 systemd/upstart/init (Linux/BSD)、由用户手动启动和运行`pg_ctl`，等等。数据目录可以在启动命令行。

因此，您可以找出 PostgreSQL 数据目录的“位置”的整个想法是错误的。

如果您正在编写依赖 PostgreSQL 的软件，请考虑将您自己的副本与 .zip 二进制文件捆绑在一起，`pg_ctl`在非默认端口上启动并运行它，这样它就不会干扰用户可能已经安装的任何 PostgreSQL 安装在他们自己的系统上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:18:49.433

您可以定义自定义环境变量，`POSTGRES_HOME`并使用它类似于`JAVA_HOME`

```
 POSTGRES_HOME  = /usr/local/pgsql
 pg_hba.conf path =  POSTGRES_HOME/data/pg_hba.conf 
```

# android - ICS 上的 Android Theme.Translucent 将所有子元素呈现为姜饼

> ID：12892533
> 
> 赞同：0
> 
> 时间：2012-10-15T09:15:31.840
> 
> 标签：android

我正在开发一个 Android 应用程序，其中我将以下主题设置为我的一项活动，以便我有一个漂亮的半透明背景。

> android:theme="@android:style/Theme.Translucent.NoTitleBar"

这在 14 (ICS) 之前的版本中运行良好，但在 ICS 上，虽然活动以半透明背景显示，但活动内的所有元素都开始使用 Gingerbread 主题。即，活动内的按钮在选择时以黄色突出显示，而不是在 ICS 上显示为蓝色。同样，当激活/单击微调器按钮时，会将项目显示为对话框，而不是 ICS 弹出/弹出样式。

谁能帮助我如何获得半透明背景以及 ICS 主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:53:18.017

要获得 ICS 及更高版本的蓝色突出显示，您需要使用 Holo 主题，所有其他主题将呈现组件，就好像它们显示在 Gingerbread 及下方一样，因为这是主题告诉系统呈现它们的方式。

您可以扩展您选择的 Holo 主题并使用半透明主题中的成员，这将为您在 ICS 及更高版本上提供您想要的效果。

主题数据可在`<android-sdk>/platforms/android-<API-level>/data/res/`

# java - 如何选择 java nio 和 io？

> ID：12892536
> 
> 赞同：26
> 
> 时间：2012-10-15T09:15:45.390
> 
> 标签：java, nio

众所周知，如果我们要使用传统的IO来构建服务器，它必须在某个地方阻塞，所以我们必须使用循环或一线程一套接字模式，所以nio似乎是更好的选择。所以我想知道nio是否永远是更好的选择？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-15T09:45:56.603

恕我直言，阻塞 IO 通常是最简单的使用，除非您有特定要求对系统提出更多要求，否则您应该坚持使用最简单的选项。

下一个最简单的选项是阻塞 NIO，如果我想要比 IO 更高效或控制的东西，我通常更喜欢它。它仍然相对简单，但允许您使用 ByteBuffers。例如ByteBuffers 支持little endian。

一个常见的选项是使用带有选择器的非阻塞 NIO。这引入的大部分复杂性可以由 Netty 或 Mina 等框架处理。如果您*需要*非阻塞 IO，我建议您使用这样的库，例如因为每台服务器有数千个并发连接。恕我直言，您有数千个连接，您应该考虑拥有更多服务器，除非每个连接的作用非常微不足道。AFAIK google 寻求更多的服务器，而不是每台服务器数千个用户。

更极端的选择是使用 NIO2。这比非阻塞 NIO 更复杂、更冗长。我不知道有什么框架可以很好地支持这一点。即当你这样做时它实际上更快。AFAIK 如果您有 Infiniband（这是它旨在支持的），这似乎值得使用，但如果您有以太网，则可能不值得使用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-15T09:26:26.173

如果你想要非阻塞 IO，NIO 不是更好的选择——它是 Java 中的**唯一**选择。请记住，人们仍然经常使用旧的 IO，因为它更容易编写代码。NIO API 非常原始，它更像是一种低级技术，而不是客户端 API。我建议通过 API 使用 NIO，该 API 为您想要使用非阻塞 IO 解决的问题提供更简单的接口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-05T08:07:44.360

有点晚了，但就我个人而言，即使是常规的“日常”文件处理，我也使用 NIO。所以，我使用类似的东西：

```
 1\. if(Files.notExists(path)) { } 
 2\. Files.createDirectory(path);
 3\. Files.newInputStream(path) targetPath.resolve("somefile.txt");
 4\. Files.newBufferedWriter(path, charset);
 5\. DirectoryStream<Path> directoryStream = Files.newDirectoryStream(path); 
```

它对我来说很好。由于 relativize 或 resolveSibling 等方法，我更喜欢 Path 而不是旧的 File。

没有让我觉得比 IO 更复杂。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-24T21:15:49.970

如果你能证明它引入的不可避免的复杂性是合理的，你只会使用 NIO。如果您在预期负载方面没有任何指导，并且在您的产品/项目是否有资源来维护相关代码方面，那么您应该谨慎行事并使用 IO。

为了让我的回答更有分量，我刚刚花了三个月的时间来维护和修复使用原始 Java NIO（即没有使用总体框架）的集成层。该设计本质上是基于客户端线程将消息添加到队列和少数工作线程执行其 NIO 魔术，然后以基于事件的方式将回复传递回客户端线程。回想起来，我无法证明最初使用 NIO 的决定是合理的，因为它会分散注意力，占用了大量本应花在更高级别业务逻辑上的时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T09:24:32.120

您可以使用其中的任何一个，除非您要创建“超快”服务器。

当然，这里的一个好方法是使用 nio，因为它是为高吞吐量任务编写多客户端服务器的新的和现代的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-26T19:45:42.320

NIO.2 API 在处理文件方面相对于遗留`java.io.File`类的一些优势：

*   支持文件系统相关的属性。
*   允许您直接遍历目录树。
*   支持符号链接。

具体用例和更多细节可以看[这篇](http://tutorials.jenkov.com/java-nio/nio-vs-io.html)文章

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-04T23:22:35.840

传统 IO 是简单且简化的代码，NIO 更复杂但更灵活。就我而言，我更喜欢将 IO 用于*小型*流媒体，将 NIO 用于*大型*流媒体，但 nio 确实更复杂

使用 NIO，我必须创建一个完整的包来管理它，而不是我直接使用*片段的 io 包*

# javascript - Javascript退格功能

> ID：12892545
> 
> 赞同：0
> 
> 时间：2012-10-15T09:16:17.153
> 
> 标签：javascript, cursor, caret, backspace

我需要实现退格键行为，以便将光标放在左侧一个位置，而无需用户按下退格键，而是在我的（contenteditable）div 中以编程方式添加字符串之后，我需要光标自动移动一个左边的位置。我尝试将 \b 添加到我的字符串中，但没有成功。我怎样才能实现这种行为（最好使用 Javascript）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:06:29.113

您可以通过将浏览器事件注入可编辑的内容来轻松解决此问题。我正在展示一个使用左箭头键的示例，因为您写道要移动光标，我希望这是您想要的，因为 Backspace 会删除一个字符。如果要删除，请用退格键替换 left 的键码。

这是使用 jQuery 完成的方法：

```
var ev = jQuery.Event("keydown"); // Creates a new keydown event
ev.keyCode = $.ui.keyCode.LEFT; // Sets the event keyCode to be the left arrow button
$('#contentEditableContainer').trigger(ev); 
```

要包括 jQuery：

```
<head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T17:56:50.233

这是我使用的函数，请确保包含 jQuery。只需使用 id 调用此函数到您希望退格执行的文本框：

```
function backSpace(id){
var txt = $(id);
var startPos = txt[0].selectionStart;
var endPos = txt[0].selectionEnd;
var scrollPos = txt[0].scrollTop;
console.log("start: " + startPos + " end: " + endPos + " scrollPos: " + scrollPos);
if (endPos - startPos > 0){
    txt.val(txt.val().slice(0, startPos) + txt.val().slice(endPos, 100));
}else if (endPos > 0){
    txt.val(txt.val().slice(0, startPos-1) + txt.val().slice(startPos, 100));
}else{
    startPos = txt.val().length+1;
}
txt.focus();
txt[0].setSelectionRange(startPos-1,startPos-1);
} 
```

# sql - if 和 if 存在的区别

> ID：12892549
> 
> 赞同：1
> 
> 时间：2012-10-15T09:16:20.307
> 
> 标签：sql, sql-server-2008

我有这个存储过程，我想知道“如果存在”是否真的会比较 select 语句返回的值，或者它只会检查该条件是否可以执行，对不起这样一个愚蠢的问题，但我是 SQL 新手，

```
declare @m_ID_v int
set @m_ID_v = ( select ID_C from M_T where MName_C = @MName_parameter)

declare @g bit
if exists (select G_L_Column from G_L_table Where M_ID_Column = @M_ID_variable)
    set @g_v = 1
else
    set @g_variable = 0 
```

我的选择语句

```
select G_L_Column from G_L_table Where M_ID_Column = @M_ID_variable 
```

返回真或假，所以只想确定“如果存在”是否会像“如果”一样工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:22:03.387

使用`if exists`不作为`if`. 它不检查返回的值是真还是假，它检查是否存在一个值。

如果您的查询始终返回一个值，则`if exists`将始终评估为真。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:22:06.163

[存在 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188336.aspx)

指定一个子查询来测试是否存在行。

**如果子查询包含任何行，则返回 TRUE。**

# python - 在 Python 中首先列出特定类别

> ID：12892550
> 
> 赞同：0
> 
> 时间：2012-10-15T09:16:20.260
> 
> 标签：python, mysql, jinja2, werkzeug

我有一个来自 DB 的类别列表，如下所示，它工作正常 + 按 ID 排序。

```
{% for category in menu_categories|sort(attribute="id"):  %}    
<div>
    {{ category.name }}
</div>
{% endfor %} 
```

如果存在，我只需要一个例外`category='Pizza'`来首先列出它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:26:27.740

除非我误解了你，否则应该这样做：

```
{% for category in menu_categories|sort(attribute="id"): %}
    {% if category.name == 'Pizza': %}
        <div> {{ category.name }} </div>
    {% endif %}
{% endfor %}
{% for category in menu_categories|sort(attribute="id"): %}
    {% if category.name != 'Pizza': %}
        <div> {{ category.name }} </div>
    {% endif %}
{% endfor %} 
```

# ruby-on-rails - 有没有一种方法可以在 Heroku 上运行预定的作业而无需启动新的测功机？

> ID：12892552
> 
> 赞同：3
> 
> 时间：2012-10-15T09:16:23.857
> 
> 标签：ruby-on-rails, heroku

我正在寻找类似[Heroku Scheduler](https://devcenter.heroku.com/articles/scheduler)的东西，但有可能每 5 分钟运行一次作业。

看起来 Heroku 支持[Clockwork](https://devcenter.heroku.com/articles/clock-processes-ruby)，但它不是很明显的天气，它像测功机一样计费，或者仅按作业的实际运行时间计费。

换句话说，我的工作可能每 5 分钟运行 15 秒，所以我正在寻找每天收费`15 * 12 * 24`秒（每天 72 分钟）的东西。

Heroku 有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:54:31.440

Check our the [hirefire gem](https://github.com/meskyanichi/hirefire). This will spin up a new dyno only when there is something to be done in Delayed Job or Resque. You can combine this with the Heroku Scheduler or Clockwork if you need to run jobs at specific intervals.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:38:25.777

不确定这是否正是您所需要的，但您可以设置一个 cron 作业，以在预定时间运行。这将运行 rake 任务。

# css - 缩放页面时不缩放 DIV 元素

> ID：12892553
> 
> 赞同：1
> 
> 时间：2012-10-15T09:16:30.453
> 
> 标签：css, html

缩放网页时，DIV 元素不会缩放，但放置在 DIV 内的组件正在缩放并超出 DIV 的一侧。在这里，我创建了一个测试小提琴[test fiddle](http://jsfiddle.net/ablealias/Qhvvb/)。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:22:45.383

无论里面有什么，你的 Div 都占用了 50% 的可用空间。其余空间留作边距。例如，如果您从 100% 缩小（缩小，而不是缩小）。你可以看到内容会越来越小，但是 div 的宽度会增加。

如果您关心缩小/放大外观，请使用像素而不是百分比。

在这里试试：http: [//jsfiddle.net/fam46/1/](http://jsfiddle.net/fam46/1/)

# actionscript-3 - Flash AS3 在另一个视频播放时加载视频

> ID：12892555
> 
> 赞同：1
> 
> 时间：2012-10-15T09:16:35.107
> 
> 标签：actionscript-3, flash

我的 Flash 网站需要一个接一个地播放 10 个视频，为了减少等待时间，我需要在播放视频 1 时预加载视频 2 和视频 3，依此类推...

我需要遵循这个结构，因为在视频 1 结束时，用户将有机会选择下一个（2 或 3）。

所有的代码都在我电影的第一帧，我仍然需要学习类、包等。

第一个视频通过我放置在舞台上的链接视频（myVideo）播放，代码如下：

```
var nc:NetConnection = new NetConnection();
nc.connect(null);
var ns:NetStream = new NetStream(nc);
ns.addEventListener(NetStatusEvent.NET_STATUS, statusHandler);
ns.addEventListener(AsyncErrorEvent.ASYNC_ERROR, asyncErrorHandler);
ns.play("video1.f4v");
var myVideo:Video = new Video();
myVideo.attachNetStream(ns);
addChild(myVideo); 
```

我需要了解在 nr 时预加载其他两个视频的最佳方法。1正在玩。

我是否应该再创建 2 个链接视频，将它们放在舞台外并在那里加载视频，以便在需要时立即可用？

非常感谢您的帮助！

--- 编辑：在我的帖子中添加了更多详细信息 ---

我正在做一些测试以了解此过程，我尝试了以下方法：

```
var ns2:NetStream = new NetStream(nc);
var ns3:NetStream = new NetStream(nc);
ns2.play("video/video2.f4v");
ns2.pause();
ns2.addEventListener(AsyncErrorEvent.ASYNC_ERROR, asyncErrorHandler);
ns3.play("video/video3.f4v");
ns3.pause();
ns3.addEventListener(AsyncErrorEvent.ASYNC_ERROR, asyncErrorHandler); 
```

它可以工作，但是以这种方式加载 2 部电影会导致 100% 的 cpu 使用率和视频播放的帧速率不佳...也许我必须加载视频 2，检查加载是否完成，然后开始加载视频 3...这样做的正确方法？

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:54:51.170

我相信我找到了方法，这是完整的脚本：

```
var nc:NetConnection = new NetConnection();
nc.connect(null);
var ns:NetStream = new NetStream(nc);
ns.addEventListener(NetStatusEvent.NET_STATUS, statusHandler);
ns.addEventListener(AsyncErrorEvent.ASYNC_ERROR, asyncErrorHandler);
ns.play("video1.f4v");
var myVideo:Video = new Video();
myVideo.attachNetStream(ns);
addChild(myVideo);

var ns2:NetStream = new NetStream(nc);
var ns3:NetStream = new NetStream(nc);

function statusHandler(event:NetStatusEvent):void
{
    switch (event.info.code)
    {
        case "NetStream.Play.Start" :

        ns2.play("video/video2.f4v");
        ns2.pause();
        ns2.addEventListener(AsyncErrorEvent.ASYNC_ERROR, asyncErrorHandler);

        ns3.play("video/video3.f4v");
        ns3.pause();
        ns3.addEventListener(AsyncErrorEvent.ASYNC_ERROR, asyncErrorHandler);

        break;

        case "NetStream.Play.Stop" :
        trace("ns video stop");
        break;
    }
} 
```

当我调用 ns.play("video2.f4v"); 视频已经在浏览器缓存中，因此立即开始播放，CPU 使用率看起来也不错。

如果有更专业的方式我想了解更多。

trace("谢谢，再见");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:45:18.163

实现这一点的最简单方法是使用 Greensock 的[LoaderMax](http://www.greensock.com/loadermax/)。您可以设置要加载的视频列表，然后根据用户的操作对其中一些视频进行优先级排序。

LoaderMax 有一些很棒的功能，这些功能很难从头开始构建，它还修复了一些奇怪的 Flashplayer 行为。

有一点学习曲线，但不是太陡峭。

# java - 动态合并背景

> ID：12892559
> 
> 赞同：0
> 
> 时间：2012-10-15T09:16:42.757
> 
> 标签：java, android, colors, drawable

我有一个 jpeg“屏幕”和一个从 0 到 255 的数字。

jpeg 是部分透明的。

该数字应该用于实现灰度 Drawable，就像在此示例中用于设置背景一样：

```
setBackgroundColor(Color.rgb(number, number, number)); 
```

现在，我想以编程方式将这些值合并到值中，以获取单个图像，其中“number-Drawable”作为背景，jpeg 覆盖它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:24:15.737

您可以将 a[`LayerDrawable`](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html)与可绘制的颜色和可绘制的位图一起用作图层。请注意为可绘制的位图提供透明度，因为 JPEG 图像格式不支持透明度。或者对“屏幕”使用 PNG 格式。

# javascript - 组中的单选按钮使表单提交按钮无响应

> ID：12892561
> 
> 赞同：0
> 
> 时间：2012-10-15T09:16:50.483
> 
> 标签：javascript, jquery, ruby-on-rails-3

我有一个表单中的这个单选按钮组：

```
<%= form_for(@question) do |f| %>

    ....

    <div class="field">
        <%= f.radio_button :status, "open", { :checked => true } %>
        <%= f.label :status, "Open" %>
        <%= f.radio_button :status, "closed" %>
        <%= f.label :status, "Closed" %>
    </div><br />

    ....

<% end %> 
```

没有 Javascript 代码错误，但表单提交按钮仅在我从组中删除一个单选按钮或禁用浏览器上的 Javascript 或删除项目目录中的所有 Javascript 文件时才有效。以下是对单选按钮进行任何有条件更改的唯一 JQuery 代码：

```
....

$('#hide_question_form').click( function(e) {
  $('.new_question_form').slideUp(500);
  $('#question_title').val(null);
  $('#question_description').val(null);
  $('input:radio[name="question[status]"]')[0].checked = true;
  $('input:radio[name="question[status]"]')[1].checked = false;
});

.... 
```

我尝试一一评论/删除所有Javascript文件以查看问题出在哪里，但除非我全部删除，否则该按钮不起作用。有什么具体建议吗？谢谢！

**编辑**

根据要求生成的 HTML：

```
<div class="field">
        <input checked="checked" id="question_status_open" name="question[status]" required="required" type="radio" value="open" />
        <label for="question_status">Open</label>
        <input id="question_status_closed" name="question[status]" required="required" type="radio" value="closed" />
        <label for="question_status">Closed</label>
</div><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:40:12.130

我错了还是你有多个theese div？

如果是这样，问题将是您在生成的 html 中有多个相同的 id。

html id 必须是唯一的才能运行 javascript。document.getElementById 作为示例只返回一个元素而不是多个元素。

我指的是： question_status_open 和 question_status_closed

# python - 使用 python 的 Salesforce 批量上传 API 调用

> ID：12892568
> 
> 赞同：3
> 
> 时间：2012-10-15T09:17:15.883
> 
> 标签：python, salesforce

我正在研究 salesforce api 并遇到了批量上传 API。我想使用带有python的批量上传API将一些数据从数据库上传到salesforce。我目前正在使用 BeatBox 作为库。关于如何继续使用 BeatBox 的任何指示？或者有没有办法解决它。我已经完成了一半的解决方案，其中数据是来自 SQL 的查询并制作成 csv 文件。但是在批量上传之后我该怎么做呢？指针会有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T02:56:23.960

几天前发现了这个包：

[https://pypi.python.org/pypi/salesforce-bulk/1.0.1](https://pypi.python.org/pypi/salesforce-bulk/1.0.1)

似乎是您正在寻找的东西：

```
from salesforce_bulk import CsvDictsAdapter

job = bulk.create_insert_job("Account", contentType='CSV')

accounts = [dict(Name="Account%d" % idx) for idx in xrange(5)]    
csv_iter = CsvDictsAdapter(iter(accounts))    
batch = bulk.post_bulk_batch(job, csv_iter)    
bulk.wait_for_batch(job, batch)    
bulk.close_job(job)    
print "Done. Accounts uploaded." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T14:34:59.073

我几乎从这个网站学到了我所知道的一切。非常棒的例子：

[http://tomhayden3.com/2013/08/04/salesforce-python/](http://tomhayden3.com/2013/08/04/salesforce-python/)

[http://tomhayden3.com/2013/09/05/salesforce-beatbox-multi/](http://tomhayden3.com/2013/09/05/salesforce-beatbox-multi/)

# google-chrome - Chrome resizeto 函数大小

> ID：12892572
> 
> 赞同：0
> 
> 时间：2012-10-15T09:17:24.773
> 
> 标签：google-chrome

我需要在单击按钮后调整窗口大小，然后再次恢复到初始大小。但是在 chrome 中（可能还有其他浏览器）我遇到了这个问题，即使用宽度调用 open 然后使用具有相同宽度的 resizeTo 会导致宽度发生变化。尽管使用相同的宽度，但为什么尺寸会发生这种变化。ResizeTo 和 open 宽度参数的含义不同吗？

```
 myWindow=window.open('','','width=300,height=200');
   myWindow.document.write("<p>This is 'myWindow'</p>");
   myWindow.focus();
   setTimeout(myWindow.resizeTo(300,200), 10000); 
```

[​http://jsfiddle.net/AdbTk/](http://jsfiddle.net/AdbTk/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:23:39.890

检查这个小提琴它是否有效[http://jsfiddle.net/yD8Cc/](http://jsfiddle.net/yD8Cc/)

**编辑**

设置 setTimeout 时，resize 函数会正确执行，而且您不会注意到更改，因为您再次设置了相同的高度和宽度！

# c++ - 为什么 mysql_commit 这么慢？

> ID：12892573
> 
> 赞同：0
> 
> 时间：2012-10-15T09:17:25.247
> 
> 标签：c++, mysql

我是一个新人使用MYSQL。

代码是：

```
void gdns_mysql::commit_task()
    {
        if (mysql_commit(conn) != 0)
        {
            throw_trackerr_str(boost::format("MysqlCommitError %d %s") % mysql_errno(conn) % mysql_error(conn));
        }
    } 
```

这个函数 commit_task 总是花费 6~7 秒。
我想知道为什么会这样？
请列出一些原因。谢谢

顺便说一句：查询是这样的：

```
void gdns_mysql::update_server_status(std::string const& server_, std::string const& status_)
    {
        stringstream sql;
        sql << "update server";
        if (!status_.empty()) sql << " set status = '" << get_escape_string(status_) << "'";
        else sql <<" set status = status_predict";
        sql << " where serverip = '" << get_escape_string(server_) << "'"
            << endl;
        execute(sql.str());
    } 
```

和

```
zone_ptrs_t  gdns_mysql::query_zone_bykey(std::string const& zonename_)
    {
        string statement = "select * from zone";
        bool where_flag = false;
        if (!zonename_.empty())
        {
            statement += " where zonename = '" + get_escape_string(zonename_) + "'";
            where_flag = true;
        }
        select(statement);
        return fetch_datas<zone_t>();
    } 
```

# perl - 这个“$x **= $n”操作符有什么用

> ID：12892574
> 
> 赞同：-12
> 
> 时间：2012-10-15T09:17:25.410
> 
> 标签：perl, operators

在 Perl 中，我知道我们可以使用与`"$x *= $n"`相乘。所以我错误地使用了，对于非常小的值，输出似乎是非常高的数字。那个运营商是做什么的？`x``n``"**="``"n"`

请不要说它只是为了指数。它不是。请使用我显示的语法进行验证

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T09:20:32.013

它是幂运算符：

```
perl -e 'print 2**3'; 
```

打印 8

所以,`$a **= n`等价于`$a = $a**n`which 等价于`$a raised to the power n`

# boost - boost::lexical_cast 带正号

> ID：12892580
> 
> 赞同：0
> 
> 时间：2012-10-15T09:17:51.293
> 
> 标签：boost, sign, lexical-cast

转换为 std::string 时，如何使 boost::lexical_cast 包含正号？

我打算做同样的事情：`snprintf( someArray, someSize, "My string which needs sign %+d", someDigit );`。在这里，如果 someDigit 为正数，则 someDigit 将作为 +someDigit 放入字符串中，如果它为负数，则将其作为 -someDigit 放入字符串中。见：[http ://www.cplusplus.com/reference/clibrary/cstdio/snprintf/](http://www.cplusplus.com/reference/clibrary/cstdio/snprintf/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:24:03.880

> 转换为 std::string 时，如何使 boost::lexical_cast 包含正号？

使用`boost::lexical_cast<>`.

`boost::lexical_cast<>`使用流进行格式化。因此，可以创建一个新类并为其重载`operator<<`，`boost::lexical_cast<>`并将使用该重载运算符来格式化类的值：

```
#include <boost/lexical_cast.hpp>
#include <iomanip>
#include <iostream>

template<class T> struct ShowSign { T value; };

template<class T>
std::ostream& operator<<(std::ostream& s, ShowSign<T> wrapper) {
    return s << std::showpos << wrapper.value;
}

template<class T>
inline ShowSign<T> show_sign(T value) {
    ShowSign<T> wrapper = { value };
    return wrapper;
}

int main() {
    std::string a = boost::lexical_cast<std::string>(show_sign(1));
    std::cout << a << '\n';
} 
```

# jquery - 当我选择下拉列表时禁用多个复选框

> ID：12892585
> 
> 赞同：0
> 
> 时间：2012-10-15T09:18:22.463
> 
> 标签：jquery

当我选择下拉列表时，我是禁用多个复选框的新手。使用 java 脚本。

在这里，我拥有的代码源并不是更好地禁用所有字段。

```
function select(Seect)
{
  if(datatype=="varchar")
  {

     document.getElementById("field").disabled=true;
  }
} 
```

**强文本**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:29:42.183

这是使用 jquery 禁用页面的所有复选框的演示代码。试试下面的代码...

```
function select(Seect)
{    
   if(<your condition>)
   {    
      $('input[type="checkbox"]').attr("disabled","disabled");
   }
} 
```

如果您有任何问题，请告诉我......

# android - 从两个不同的地理位置编译 APK

> ID：12892587
> 
> 赞同：0
> 
> 时间：2012-10-15T09:18:39.727
> 
> 标签：android, compilation, apk, digital-signature, code-signing

> **可能重复：**
> [在两台不同的计算机上开发相同的应用程序](https://stackoverflow.com/questions/9776180/developing-same-app-on-two-different-computers)

出于专业原因，我必须从一台 PC 编译我的代码，有时也从另一台 PC 编译。

这种操作的主要问题是我的 APK 每两次只有一次相同的签名。

是否可以编译我的代码，使我的 APK 签名与一台 PC 和另一台地理位置相距遥远的 PC 完全相同？

我试图签署我的 APK，就好像我把它放在 Google Play 上一样，但问题是这样的过程很长，而且我经常编译，所以对我来说，这不是一个符合人体工程学的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:26:59.093

这是签署 APK 的基本步骤。

1.  使用 keytool 生成私钥
2.  从 Eclipse 导出未签名的 APK
3.  使用步骤 1 中生成的私钥库对 APK 进行签名
4.  验证 APK
5.  对齐最终的 APK

当您从一台 PC 移动到另一台 PC 时，只需确保您在步骤 1 中使用完全相同的密钥库来签署 APK。我认为这应该不是问题。

# ruby-on-rails - css 文件中的条件？

> ID：12892593
> 
> 赞同：2
> 
> 时间：2012-10-15T09:19:04.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我的css文件的一部分：

```
#accordion1 .slide_handle {
    background:url(/assets/handles-1.png);
    bottom:0;
    cursor:pointer;
    left:0;
    position:absolute;
    top:0;
    width:40px;
} 
```

显示一个手风琴，其中包含在 handles.1.png 中编写的文本。我正在用 4 种语言开发网站。如何根据语言（区域设置）参数更改 png 文件？这可能吗？或者根据语言加载一个完整的新css文件？（不建议）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T09:31:46.840

使您的基本 CSS 文件基于`user/session/environment`. 你会不必要地破坏你的缓存。

您在基本 css 中需要的只是默认值。CSS 的本质允许以下声明覆盖前面的声明。

因此，在您的应用程序的布局文件中，您将加载带有背景图像的标准基本 CSS 来处理默认语言环境。

对于特定于区域设置的覆盖，您将包含该特定区域设置的最小 CSS 文件，或者如果每个区域设置的配置量最少，则在标题中包含样式内联。

`views/layouts/application.html.erb`

```
<html>
  <head>
    <%= stylesheet_link_tag :defaults %> # Load standard base css here
    <% if user_locale.present? %>
      <style type="text/css">
        #accordion .slide_handle {
           background: url(<%= asset_url("handles-#{user_locale}.png") %>);
        }
      </style>
    <% end %>
  </head>
  <body>
    Yada Yada Yada
    <%= yield %>
  </body>
</html> 
```

我**强烈**建议您遵循一个约定，允许您的用户的区域设置标识符成为每个区域设置资产的唯一决策者。

如果您的语言环境是`en`, `de`, `fr`. 不要命名您的资产`handle-1.png`，`handle-2.png`但要确保它们是**`handle-en.png`**, **`handle-de.png`*** *`handle-fr.png`**。遵循约定将为您节省大量不自然和脆弱的配置来管理轨道。

总结，选择基本的**默认 CSS**，并在包含基本 css 后覆盖标题部分中的最小 css。或者，您可以包含**仅**具有覆盖的特定于语言环境的 css 文件。

```
<head>
   <%= stylesheet_link_tag :defaults %>
   <%= stylesheet_link_tag "base-#{user_locale}" if user_locale.present? %>
</head> 
```

用另一个替代解决方案更新：

```
<body class="<%= user_locale.presence || 'en' %>">
</body> 
```

在您的 CSS 列表中，使用 body 父级列出每个语言环境的所有覆盖，如下所示

```
body.en #accordion .slide_handle {
  background: ....
}
body.de #accordion .slide_handle {
  background: ...
} 
```

您可以将它们拆分为多个特定于语言环境的文件，并将它们全部保存在一个 css 中，无论您喜欢哪个。但是这种本地覆盖将自动应用于您的布局而无需任何进一步的更改，并且所有语言环境在您的 css 中始终可用（您可能会或可能不会觉得它有吸引力）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:33:51.450

我希望通过以下方式分隔您的 css 文件

*   一个`main.css`包含所有通用类的文件。
*   一些与语言相关的 css 文件将包含您的语言相关类。
*   这些与语言相关的 css 文件可以命名为：`style-en.css`等`style-fr.css`。

现在根据语言选择，您应该加载正确的`style-*.css`文件以及`main.css`

# objective-c - NSMutableArray 总是空的？

> ID：12892597
> 
> 赞同：0
> 
> 时间：2012-10-15T09:19:13.560
> 
> 标签：objective-c, nsmutablearray, nsarray

理解 Obj-C 的记忆体及其一些概念仍有一些困难。

所以我的主类包含一个`NSMutableArray`包含一些角色和他们的武器列表。就像这样 ：

**在主类.h**

```
@property (nonatomic, retain) NSMutableArray *players; 
```

**在 Main class.m 的 init 中**

```
for(int i = 0 ; i < 30 ; i++)
{
    [players addObject:[[PlayerInGame alloc] init:[self.tabPlayers objectAtIndex:i] :[self.tabWeapons:objectAtIndex:i]]];
} 
```

**PlayerInGame.h**

```
@property (nonatomic, retain) NSMutableArray *weaponsList; 
```

**PlayerInGame.m**

```
- (id) init : (Player*) player : (Weapon*) weapon
{
    [self.weaponsList addObject:weapon];
    // Then I try NSLog of weaponsList's count.
} 
```

此处武器列表始终为空。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:22:43.137

您必须先分配您的数组，然后才能在其中添加任何对象。`viewDidLoad`您可以在方法中使用以下代码

```
 NSMutableArray *players = [[NSMutableArray allo]init]; 
 NSMutableArray weaponsList = [[[NSMutableArray alloc] init] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T09:28:49.700

其他答案都是对的。在任何其他语言上，如果您引用未分配的对象，您将获得 NullPointerException。但是在目标 C 中，发送到 nil 的方法只返回 0，它不会使应用程序崩溃。如果您想进一步阅读，请阅读[此内容](https://stackoverflow.com/questions/1564410/when-to-use-nil-and-null-in-objective-c)

因此

```
[self.weaponsList addObject:weapon]; 
```

没有崩溃，而在 java 中，如果您尝试将对象添加到未分配的数组中，您的程序将崩溃。正如其他答案指出的那样，声明

```
self.weaponsList = [[[NSMutableArray alloc] init] autorelease]; 
```

分配内存来存储数组，并返回对变量武器列表的引用。现在武器列表！= nil。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T09:22:40.537

我还没有看到武器列表对象分配。你初始化它吗？

```
self.weaponsList = [[[NSMutableArray alloc] init] autorelease]; 
```

PS：小建议。方法“- (id) init : (Player*) player : (Weapon*) Weapon” 签名看起来会更好，如果您将其更改为更容易使用

```
- (id) initWithPlayer:(Player *)player weapon:(Weapon *)weapon 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T09:39:27.597

我还建议更改您的初始化语法并使用对象初始化数组：

```
- (id) initWithPlayer:(Player *)aPlayer weapon:(Weapon *)aWeapon {
    self.weaponsList = [NSMutableArray arrayWithObject:aWeapon];
    [self.weaponsList retain];
    // remember to release inside dealloc, or use autorelease
} 
```

# javascript - 使用 javascript模拟链接（ ）点击

> ID：12892598
> 
> 赞同：0
> 
> 时间：2012-10-15T09:19:16.537
> 
> 标签：javascript, hyperlink, href, simulate

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:20:54.447

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T15:29:41.663

试试这个

```
<a href="doc.pdf"><span id="spnDownload">Download!</span></a> 
```

$("#spnDownload").click();

# c++ - 算术运算和编译器优化

> ID：12892599
> 
> 赞同：3
> 
> 时间：2012-10-15T09:19:17.813
> 
> 标签：c++, c, optimization, arithmetic-expressions

我正在考虑一个定点算术库，为了决定库本身（通过表达式模板）应该完成多少优化，我开始质疑优化器已经完成了多少。以下面的例子为例：

```
//This is a totally useless function to exemplify my point
void Compare(FixedPoint a, FixedPoint b) {
   if(a/b>10) {
      ... do stuff
   }
} 
```

现在，在这个函数中，该类的典型实现`FixedPoint`将导致

```
if( ( (a_<<N) / b_) > (10 <<N) ) {
... do stuff
} 
```

其中`N`是小数位数。该表达式在**数学**上可以转换为：

```
(a_ > 10*b_) 
```

即使当您考虑整数溢出时，这种转换**不会**导致相同的行为。我的库的用户可能会关心数学等价性，并且宁愿使用简化版本（可能通过表达式模板提供）。

现在，问题是：优化器是否敢自己进行优化，即使行为并不严格相同？我应该为这样的优化而烦恼吗？请注意，此类优化并非微不足道。实际上，如果您确实进行了这些优化，那么当您使用定点算术时，您很少需要进行任何位移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:33:24.120

这将取决于`a_`和`b_`类型是有符号的还是无符号的。

在 C 和 C++ 中，有符号溢出在技术上是未定义的行为，而无符号溢出是使用二补码算法完成的。

然而，一些编译器拒绝优化该代码，因为许多程序依赖于有符号溢出的二补码行为。

优秀的现代编译器将有一个选项来启用/禁用这个特定的假设：有符号整数不会溢出。什么是默认选项会因编译器而异。

例如，对于 GCC，请参阅选项`-fstrict-overflow/-fno-strict-overflow`和相关警告`-Wstrict-overflow`。

# nosql - 向 Splunk 搜索添加约束会产生更多结果行

> ID：12892600
> 
> 赞同：1
> 
> 时间：2012-10-15T09:19:25.080
> 
> 标签：nosql, splunk

考虑以下两个 Splunk 搜索：

```
index=a | join type=inner MyKey [search index=b] 
```

和：

```
index=a | join type=inner MyKey [search index=b | where MyVal > 0] 
```

值得注意的是，后者的搜索 - 其子搜索具有约束的搜索 - 的结果行数是前者的*三倍。*

该命令的[Splunk 文档页面](http://docs.splunk.com/Documentation/Splunk/latest/SearchReference/Join)`join`建议语义足够接近 SQL 的参数`join`：

> 如果指定的字段对每个搜索和子搜索的结果是共同的，则连接用于组合搜索和子搜索的结果。您还可以使用 selfjoin 命令将表连接到自身。

此片段与`type=inner`论点相关：

> 如果指定的字段对每个搜索和子搜索的结果是共同的，则连接用于组合搜索和子搜索的结果。您还可以使用 selfjoin 命令将表连接到自身。

基于此信息，我假设上面的两个 Splunk 搜索应该分别等效于以下 SQL：

```
SELECT *
FROM a
INNER JOIN b ON a.MyKey = b.MyKey 
```

和：

```
SELECT *
FROM a
INNER JOIN b ON a.MyKey = b.MyKey
WHERE b.MyVal > 0 
```

添加约束如何增加结果行数？

有趣的是，下面的 Splunk 搜索产生了*第三个*结果 - 与我将相同数据放入 SQL 数据库时得到的结果相匹配：

```
index=a | join type=outer MyKey [search index=b | eval hasmatch=1]
| where hasmatch=1 
```

还有一些注意事项：

*   该`MyVal`字段在任何一个表/索引中都没有重复项
*   我已验证 Splunk 索引中的原始事件与事件计数和值中的原始源数据相匹配`MyVal`
*   为相关源类型配置的唯一搜索时间操作`props.conf`是`report`根据 in 中的节提取字段`transforms.conf`（源数据采用 CSV 方言）

谁能在这里给我一些线索？就我而言，这种行为是荒谬的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:47:51.697

我建议您在 Splunk 官方论坛 (splunk-base.splunk.com) 上重新发布此问题。那里有一些非常有用和经验丰富的“Splunkers”（员工、客户、合作伙伴等），它可能是您提问的更好地方。

干杯，

米宾

# .net - WPF XAML 引用未通过 myAssembly.GetReferencedAssemblies() 解析

> ID：12892603
> 
> 赞同：1
> 
> 时间：2012-10-15T09:19:36.930
> 
> 标签：.net, wpf, .net-assembly

我有一个 WPF 容器应用程序（带有`ContentControl`主机）和一个容器应用程序（`UserControl`）。双方都对对方视而不见。

只有一个 XML 配置文件包含`dllpath`容器的 DLL 字符串和容器`ViewModelClass`内部的完整命名空间名称。

容器中的通用代码解析容器的程序集 ( `Assembly.LoadFrom(dllpath)`) 并使用`Activator.CreateInstance(vmType)`. 当它`viewmodel`托管在`ContentControl`容器内部时，并且相关的 vierwmodel 特定 ResourceDictionary 被添加到`ContentControl.Resources.MergedDictionaries`容器的内容控件中，因此视图加载正常。

现在我的容器必须使用本地文件夹`DataGrid`中的程序集引用来托管 WPF。`WPFToolkit.dll``C:\Lib`

对 的**复制本地**引用`WPFToolkit.dll`被添加到`.csproj`容器项目的文件中，并且仅在`UserControl.XAML`使用其 XAML 名称空间时被引用。这样`bin\debug`，我的容器应用程序中的文件夹就会得到`WPFToolkit.dll`复制。

**XAML：**

`xmlns:Controls="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit"` `<Controls:DataGrid ItemsSource="{Binding AssetList}" ... />`

**问题：（**`ViewModel`即容器的用户控件）尝试加载自身 的那一刻，我得到了这个错误。

**“找不到类型'Microsoft.Windows.Controls.DataGrid'。编译时使用的程序集可能与加载时使用的程序集不同，并且类型丢失。”**

因此，我尝试在`myAssembly.GetReferencedAssemblies()`托管视图模型之前加载容器程序集 ( ) 的引用程序集。**但是`WPFToolkit`该程序集列表中没有！**

奇怪的是，我`Logger.dll`在容器代码库中引用了另一个 dll，但这个 dll 是使用 C# 代码实现的。所以我在`myAssembly.GetReferencedAssemblies()`.

那么这是否意味着程序集的 BAML 引用永远无法解析`GetReferencedAssemblies`？

**编辑：**

忘了添加我在containee 中做了一个post build 事件来xcopy all`bin\debug\*.*`到容器的'bin\debug'。然后就可以了。但我不希望所有容器都像那样复制到容器中。容器应该在运行前忽略被包含的应用程序（甚至是 dll）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:42:52.493

您的问题的解决方案可能是将处理程序添加到[`AppDomain.AssemblyResolve`](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)事件。当需要程序集并且您的应用程序无法以普通方式找到时，此事件被称为最后手段。在这里，您可以通过扫描您的容器文件夹（从配置中读取，因此没有硬关系）来自定义此过程，以尝试找到需要的`dll`.

# android - 在 Mono for Android 中更改布局方向

> ID：12892610
> 
> 赞同：0
> 
> 时间：2012-10-15T09:19:55.803
> 
> 标签：android, xml, layout, xamarin.android, right-to-left

如何将布局方向从 ltr 更改为 rtl ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T05:33:20.983

我在 Styles.xml 中使用此代码`

```
<style name="DirectionR">
    <item name="android:gravity">right</item>
    <item name="android:layout_gravity">right</item>
</style>

<style name="DirectionL">
    <item name="android:gravity">left</item>
    <item name="android:layout_gravity">left</item>
</style> 
```

`

单击此处了解更多信息：http: [//developer.android.com/reference/android/text/Layout.html](http://developer.android.com/reference/android/text/Layout.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-10T15:34:58.707

在 API 级别 19 中添加：

XML:

```
android:layoutDirection="ltr"

android:layoutDirection="rtl" 
```

如果您想以编程方式更改它，可以使用 ViewCompat（在 22.1.0 版本中添加）：

左到右：

```
ViewCompat.setLayoutDirection(mView, ViewCompat.LAYOUT_DIRECTION_LTR); 
```

右到左：

```
ViewCompat.setLayoutDirection(mView, ViewCompat.LAYOUT_DIRECTION_RTL); 
```

[https://developer.android.com/reference/android/util/LayoutDirection](https://developer.android.com/reference/android/util/LayoutDirection) [https://developer.android.com/reference/android/support/v4/view/ViewCompat](https://developer.android.com/reference/android/support/v4/view/ViewCompat)

# java - Java - 无需轮询即可在 JPanel 中选择选项

> ID：12892613
> 
> 赞同：0
> 
> 时间：2012-10-15T09:20:06.500
> 
> 标签：java, swing, concurrency, future, completion-service

我有一个 JPanel，它以与`JOptionPane.showMessageDialog(...)`. 但我不使用此选项，因为我想更改大小、消息、按钮位置以及更多内容。但最终的实用程序必须相同，一旦选择就返回所选选项。问题是我不想轮询一个可能被初始化为 null 的属性，直到它从`actionPerformed(...)`方法中改变。相反，我曾想过以某种方式使用 a `CompletionService`，但我无法思考如何准确地做到这一点。我该如何定义它？因为我猜`Future`必须在一个`getSelectedOption()`方法中选择它，但它必须在一个方法中生成 `actionPerformed(...)`。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:26:46.303

最简单的选项是将您的面板嵌入到 JDialog 中，它是 modal `setModal(true)`。

这样你就可以有一个静态方法来初始化你的面板和任何东西，调用`setVisible(true)`（阻塞，因为对话框是模态的）。然后，一旦用户单击 Ok 按钮（关闭对话框），您就可以检索选定的选项。

```
public static MyOption showMyDialog() {
    final JDialog myDialog = new JDialog();
    myDialog.add(myPanel);
    myDialog.setModal(true);
    myDialog.setVisible(true); // blocker since the dialog is modal

    return myPanel.getSelectedOption();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:23:32.480

您可以编写 JOptionPane 的子类并进行所需的布局，但仍然使用 return 方法。

# oauth2-playground - 如何使用访问令牌在 .net 中使用 google 配置 api 创建新用户帐户

> ID：12892615
> 
> 赞同：1
> 
> 时间：2012-10-15T09:20:11.210
> 
> 标签：oauth2-playground

我正在尝试创建一个 dektop 应用程序，以使用谷歌的 Provisioning API 在特定用户组中创建新用户帐户。

我在我的代码中使用了一些 >Net 库，这就是我的代码的样子。

```
string token = GetNewAuthenticationToken("domain.name", "adminEmail", "adminPassword");
AppsService service = new AppsService("domain.name", token);
service.CreateUser("usernametest", "userfirstname", "userlastname","userpasswordtest12345"); 
```

但我收到此错误， *请求执行失败*：[https ://apps-apis.google.com/a/feeds/domain.name/user/2.0](https://apps-apis.google.com/a/feeds/domain.name/user/2.0)

我知道这与我得到的令牌有关，有人知道如何使用*service.createuser*方法传递令牌吗？

以及在谷歌上注册应用程序时生成的客户端 ID 和客户端密码的用途。

# java - 无法解析 JRE：野马（标准 VM）

> ID：12892616
> 
> 赞同：2
> 
> 时间：2012-10-15T09:20:14.463
> 
> 标签：java

我正在使用 Eclipse(IDE) 开发一个项目，但出现此错误

*无法解析 JRE：野马（标准 VM）*

我在项目>>属性>>库（选项卡）中看到了这个。

我正在使用 jdk1.6.0_18。有没有朋友知道这个错误？

请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:22:06.210

似乎`JRE 6(Mustang)`在指定路径上不可用。签入 JRE

```
Eclipse -> Preferences -> Java -> Compiler 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T12:33:38.907

1.  从 Eclipse 菜单中选择运行 > 运行配置... >

2.  从 LHS 窗格中选择要执行的配置（如 JUnit、Maven Build 等）。

3.  在 RHS 窗格中寻找 JRE 选项卡。

4.  现在选择适当的运行时 JRE（如 Workspace Default JRE）

# python - 为具有一个前导下划线但不是具有两个前导下划线的方法提取 Doxygen doc

> ID：12892619
> 
> 赞同：1
> 
> 时间：2012-10-15T09:20:30.673
> 
> 标签：python, documentation, python-2.7, doxygen

在我正在处理的 Python 代码中，使用了一个约定，即具有一个前导下划线的方法是“受保护的”，而具有两个前导下划线的方法是“私有的”。现在我想为所有没有下划线的方法以及所有带有一个前导下划线的方法提供 Doxygen 提取文档，但不是带有两个前导下划线的方法。

我发现的各种设置和命令要么为我提供了仅没有下划线的方法的文档，要么为我提供了所有方法（包括具有一个和两个前导下划线的方法）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:06:11.570

Doxygen 当前具有硬编码行为，即以 _ 开头的方法被视为私有方法。

如果你想改变这一点，请查看 doxygen 源代码，特别是其中的`newFunction()`函数`src/pyscanner.l`应更改为如下所示：

```
static void newFunction()
{
  if (current->name.left(2)=="__" && current->name.right(2)=="__")
  {
    // special method name, see
    // http://docs.python.org/ref/specialnames.html
    current->protection=Public;
  }
  else if (current->name.left(2)=="__")
  {
    current->protection=Private;
  }
  else if (current->name.at(0)=='_')
  {
    current->protection=Protected;
  }
} 
```

# javascript - 测试输入值是否与常量值匹配

> ID：12892627
> 
> 赞同：0
> 
> 时间：2012-10-15T09:20:48.823
> 
> 标签：javascript, string, testing, variable-assignment

我有一个任务，有点卡住了。

需要将输入字符串与常量中的值匹配，但我正在匹配单个字符。

我的常数是`ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUWXYZ'`

我的意见是，`var input = 'ABOZ'`

我需要一个测试来检查输入变量中的每个字母是否存在于 ALPHABET 常量中。

希望我说得通。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:41:46.630

这是您问题的单行答案：

`(ALPHABET.match(new RegExp((input.split('').join('|')), 'g'))).length == input.length`

`true`只有当所有字符`input`都存在时才会返回`ALPHABET`

这是一个工作演示[http://jsfiddle.net/kayen/akL4A/](http://jsfiddle.net/kayen/akL4A/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:36:11.690

在 Firefox 16 中测试并运行。请记住，此实现不会验证输入是否为空或其他防御性检查。你应该自己做。这是区分大小写的结果。

不区分大小写 ：

```
 function validInput(input) {
        var ALPHABET = "ABCDEFGHIJKLMNOPQRSTUWXYZ";
        for (var i = 0; i < input.length; i++) {
            var charAtI = input.charAt(i);
            var indexOfCharAtI = ALPHABET.indexOf(charAtI);
            if (indexOfCharAtI < 0) {
                return false;
            }
        }
        return true;
    } 
```

不区分大小写 ：

```
 function validInput(input) {
        var ALPHABET = "ABCDEFGHIJKLMNOPQRSTUWXYZ";
        for (var i = 0; i < input.length; i++) {
            var charAtI = input.charAt(i);
            charAtI = charAtI.toUpperCase();
            var indexOfCharAtI = ALPHABET.indexOf(charAtI);
            if (indexOfCharAtI < 0) {
                return false;
            }
        }
        return true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:36:12.583

这是一个函数示例，该函数将返回 true 表示匹配或 false 表示不匹配。（请注意，这是一个区分大小写的测试）。

```
var ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
var input = 'ABOZ';

function testStr(str, constant){
  var matchFlag = true;
  var strSplit = str.split("");
  for(var i=0; i<strSplit.length;i++){
    if(constant.indexOf(strSplit[i]) == -1){
       matchFlag = false;
    }
  }
  return matchFlag;
} 
alert(testStr(input, ALPHABET)); //TRUE 
```

[演示](http://jsfiddle.net/7mrxG/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T09:34:50.233

一种方法是循环输入并搜索它是否以常量退出

可能的代码

```
var ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUWXYZ';
var input = 'ABOZ'
var count = 0;  
    for(x in input) {
        if(ALPHABET.indexOf(input[x])>-1){
            count++;
            continue;
        }
        else{
            break;
        }

    }
if(count==input.length) {
    alert("true");       
} 
```

[演示](http://jsfiddle.net/hbh7h/)

# google-chrome - Sahi 在 chrome 中不工作：发生 NumberFormatException 异常

> ID：12892633
> 
> 赞同：2
> 
> 时间：2012-10-15T09:21:09.703
> 
> 标签：google-chrome, numberformatexception, sahi

我正在尝试`sahi`在 Chrome 中运行脚本。但是当我单击该按钮时，它会引发 NumberFormatException。但它在 Firefox 中运行。

异常消息是...

例外：

```
java.lang.NumberFormatException: For input string: "849.4500122070312"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:481)
    at java.lang.Integer.parseInt(Integer.java:514)
    at com.vaadin.terminal.gwt.client.MouseEventDetails.deSerialize(MouseEventDetails.java:119)
    at com.vaadin.ui.Button.changeVariables(Button.java:217) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:06:38.663

看起来像一个错误。

我认为这与通过 Sahi 单击时鼠标坐标不是整数有关。您能否分享可以复制的 URL 或示例页面？

是否可以在 Sahi Pro 上尝试此操作以检查它是否已修复？这将有助于查明问题。

# c# - 从数据库中的组合框保存更改

> ID：12892634
> 
> 赞同：0
> 
> 时间：2012-10-15T09:21:11.530
> 
> 标签：c#, winforms

我有一个组合框，想将更改保存在数据库中。

我想要做的是，如果选择了组合框并且确实必须运行下面的代码。如果它是假的，那么它必须跳过代码并走得更远。

下面的代码正在检查是否启用了组合框。但是当我编译时，它在没有被选中时说是真的

```
private void Log()
{
    if (kaartburgerlijkestand.Enabled)
    {
        veranderingBurgelijkestaat();
    }
} 
```

下面的代码是将数据保存在数据库中

```
private string veranderingBurgerlijkestaat()
{
    string gebruiker = curMedewerker.Behandelnaam;
    string bekeken = prodermaform.pKaart();
    string tabblad = tabControl1.SelectedTab.Text;
    string pat = CPatient.GeefPatientNaam(patient.Id);
    string wijz = "Burgerlijkestaat: " + kaartBurgerlijkestand.Text;

    CDb dcon = new CDb();

    try
    {
        if (dcon.Open())
        {
            SqlCommand cmd = new SqlCommand("INSERT INTO dbo.loggen(Gebruiker, Bekeken, Tabblad, Patientnaam, Wijziging, Datum) VALUES(@gebruiker, @bekeken, @tabblad, @pat, @wijz, @datum)", dcon.Conn);
            cmd.Parameters.AddWithValue("@gebruiker", gebruiker);
            cmd.Parameters.AddWithValue("@bekeken", bekeken);
            cmd.Parameters.AddWithValue("@tabblad", tabblad);
            cmd.Parameters.AddWithValue("@pat", pat);
            cmd.Parameters.AddWithValue("@wijz", wijz);
            cmd.Parameters.AddWithValue("@datum", DateTime.Now);
            cmd.ExecuteNonQuery();
            cmd.Dispose();
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
    finally
    {
        dcon.Close();
    }

    return wijz;
} 
```

有人可以告诉我一个例子如何做到这一点

**我找到了解决方案**

我做了检查

```
private void doCheck(object sender, EventArgs e)
{
    cmbox = false;

    if (kaartBurgerlijkestaat.Focused)
    {
        veranderingBurgerlijkestand();                
    }

    cmbox = true;

} 
```

然后我使用了 SelectedValueChanged 事件

```
private void kaartBurgerlijkestand_SelectedValueChanged(object sender, EventArgs e)
{
    if (cmbox)
        doCheck(sender, e);  
} 
```

它工作正常。

我要感谢大家对我的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:44:04.803

添加一个事件侦听器，`kaartburgerlijkestand.Enabled`唯一检查您的组合框是否启用选择。`InitializeComponent();`在您的`Form.cs`文件行之后添加此行

```
kaartburgerlijkestand.SelectedIndexChanged += new System.EventHandler
(this.kaartburgerlijkestand_SelectedIndexChanged); 
```

还为上面的代码添加一个函数：

```
private void kaartburgerlijkestand_SelectedIndexChanged(object sender, EventArgs e)
    {
          veranderingBurgelijkestand();
    } 
```

# javascript - 使用谷歌地图 v3 进行车队跟踪的最佳实践？

> ID：12892639
> 
> 赞同：1
> 
> 时间：2012-10-15T09:21:27.490
> 
> 标签：javascript, google-maps-api-3, tracking, fleetdb

我想为建筑工地开发使用 HTML5、JavaScript、Couch DB 的车队跟踪应用程序。我会以 json 格式获得实时 lat，long 的移动车辆。我不想使用谷歌的 Direction Services，因为 lat，long 来自我们自己GPS 设备。我会将车辆显示为标记。关于以下问题，我怎样才能以最佳方式做到这一点：

1.  表现
2.  我是否需要为每辆车维护单独的实例（如果有 100 辆车正在移动）。
3.  网速低（因为建筑工地位于森林中）。

请给我一些建议，我已经在 NET 中搜索了 1 周，但得到任何有用的东西。注意：我很清楚谷歌的商业条款和条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:59:58.343

Google maps api 鼓励您使用 ajax 来解决性能问题并减少网络负载本身。如果您使所有标记都相同，您将减少必须加载的图像数量，但您的客户将无法将车辆彼此区分开来。因此，当位置更新时，您将无法分辨哪些车辆移动到哪里，它只是一堆随机移动的标记。在我的应用程序中，我通过画布在客户端绘制标记图像。这消除了等待标记图像加载的网络延迟。我有地图，其中 100 个不同的图标，每个图标都有不同的数字（标签），看似立即加载。另一个性能改进是使用 websockets 发送更新的数据。您可以在服务器端设置一个算法来检测车辆的移动，并且只为移动的车辆发送数据消息。如果在您的 JSON 提要中为每辆车提供了一个 ID，您可以遍历您的标记（车辆）并根据匹配的 ID 更新位置。

# html - li 后的第一个选择器

> ID：12892640
> 
> 赞同：-2
> 
> 时间：2012-10-15T09:21:31.623
> 
> 标签：html, css, css-selectors

我有[这种](http://jsfiddle.net/zyKpx/)情况：

```
<ul>
    <li>
        <a href="/">Home</a>
    </li>

    <li class="page_item page-item-5 current_page_item">
        <a href="/help">Help</a>
    </li>

    <li class="page_item page-item-7">
        <a href="/follow">Follow</a>
    </li>
</ul>​

li
{
    margin-bottom:10px;
}

a
{
    border:1px solid #000000;
}

ul li + page_item a
{
    border:0;
} 
```

而且，你怎么看，我只想在第一个链接上删除边框 class `page_item`， with `ul li + page_item a`，但似乎它不起作用？​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:26:11.513

你错过了`.`你的班级选择器前面的。

假设你的第一个`li`永远不会有这个类，你只想选择`li.page_item`它之后的那个，你可以使用这个选择器：

```
ul li:first-child + li.page_item a
{
    border:0;
} 
```

但是，如果您希望第一个`li.page_item a`无论在哪里都没有边界，那么您需要以[另一种方式](https://stackoverflow.com/questions/2717480/css-selector-for-first-element-with-class/8539107#8539107)进行...

```
ul li.page_item a
{
    border:0;
}

a, ul li.page_item ~ li.page_item a
{
    border:1px solid #000000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:23:34.353

您在 css 文件中使用此代码

```
ul li.page_item a{
  border:0px none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:23:41.530

您错过了类标识符 (a `dot`)

更改 CSS 的最后一部分：

```
ul li.page_item a
{
    border:none;
} 
```

还有一个提示：使用`border:none;`而不是`border:0`

# wcf - WCF：调用另一个 WCF 服务时如何处理错误？

> ID：12892648
> 
> 赞同：1
> 
> 时间：2012-10-15T09:22:11.460
> 
> 标签：wcf, error-handling

我有一个项目，我应该编写调用另一个 WCF 服务的 WCF 服务。它看起来如下：

```
[ServiceContract]
public interface IAsurService
{
    [OperationContract(ReplyAction = AsurService.ReplyAction_GetCatalogList)]
    Message GetCatalogList();

public Message GetCatalogList()
{
    // The external client service
    GetNsiClient client = new GetNsiClient();

    authContext auth = new authContext
    {
        company = "asur_nsi",
        password = "lapshovva",
        user = "dogm_LapshovVA"
    };

    catalogs catalogs = client.getCatalogList(auth); 
```

在这种情况下我该如何处理错误？我可以使用这样的标准故障合同方法吗：

```
[DataContract]
public class AsurDataFaultException
{
    private string reason;

    [DataMember]
    public string Reason
    {
        get { return reason; }
        set { reason = value; }
    }
}

public Message GetCatalogList()
{
    // The external client service
    GetNsiClient client = new GetNsiClient();

    authContext auth = new authContext
    {
        company = "asur_nsi",
        password = "lapshovva",
        user = "dogm_LapshovVA"
    };

    catalogs catalogs = null;
    try
    {
        catalogs = client.getCatalogList(auth);
    }
    catch (Exception exception)
    {
        AsurDataFaultException fault = new AsurDataFaultException();
        fault.Reason = "The error: " + exception.Message.ToString();
        throw new FaultException<AsurDataFaultException>(fault);
    } 
```

或者是其他东西？

先感谢您。

戈兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:25:18.763

如果远程 WCF 服务的失败导致您的代码失败，那么显然您应该抛出一个错误，但该错误**不应暴露**远程 WCF 服务的内部细节或其异常，如下所示：

```
catch (Exception exception) 
{
    // Indicate all that you may expose -- that the data is unavailable.
    DataUnavailableFault fault = new DataUnavailableFault();
    throw new FaultException<DataUnavailableFault>(fault); 
} 
```

当然，您也可以使用重试机制，但很明显，如果您最终导致远程服务失败，您应该通过抛出适当的错误向调用者表明这一点。

# javascript - 在 html&js 中显示带有“选项”标签的图像弹出窗口

> ID：12892651
> 
> 赞同：1
> 
> 时间：2012-10-15T09:22:20.420
> 
> 标签：javascript, html

我有一个要求。有一个选择框，其中多个选项为真（多选）。在选择框中选择任何选项时，我想显示一个与所选选项相对应的“删除图像/链接”弹出窗口。单击时，该图标的相应选项将被删除。标签中无法呈现图像或链接。

谁能建议我如何使用 js 和 html 来满足上述要求。

# java - POI 说单元格是空的，但单元格有值

> ID：12892654
> 
> 赞同：2
> 
> 时间：2012-10-15T09:22:37.143
> 
> 标签：java, excel, apache-poi

我正在使用 POI 在我的 Java 应用程序中打开一个 Excel (xls) 文件。这个 Excel 文件有 30 行。我需要在 ColumnIndex 9 处获取值。

我的代码：

```
Workbook wb;
wb = WorkbookFactory.create(inp);
Sheet sheet = wb.getSheetAt(0);
for (Row row : sheet) {
    if (row.getLastCellNum() >= 6) {
        for (Cell cell : row) {
             if(cell.getColumnIndex == 9) {
                 //do something
              }
         }
     }
} 
```

Excel 中的每一行在 1-14 列中都有值。我的问题是，只有一些值被识别。我在 ColumnIndex 9（我的 Excel 表中的第 10 列）的每个单元格中都写了相同的值，但问题仍然相同。

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:53:51.647

确保为列中的所有单元格设置相同的日期格式（选择列并明确设置格式）而且我相信使用[DataUtil 类](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DateUtil.html)获取数据比调用更合适`cell.getDateCellValue()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:16:18.173

POI 使用基于 0 的列计数。所以，如果你想要第 9 列，你需要获取索引为 8 的单元格，而不是 9。看起来你正在检查索引为 9 的列，所以有一列出来。

如果您不确定基于 0 的索引，那么最安全的做法是使用`CellReference`该类来帮助您。这将在 Excel 样式引用（例如 A1）和基于 POI 样式 0 的偏移量（例如 0,0）之间进行转换。使用类似的东西：

```
CellReference ref = new CellReference("I10");
Row r = sheet.getRow(ref.getRow());
if (r == null) {
    // That row is empty
} else {
    Cell c = r.getCell(ref.getCol());
    // c is now the cell at I10
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:11:44.770

似乎是 excel 文档的问题。

将它们转换为 csv 然后再转换回 xls 可以解决问题。

# ubuntu - 缺少 .cshrc 文件

> ID：12892656
> 
> 赞同：0
> 
> 时间：2012-10-15T09:22:38.753
> 
> 标签：ubuntu, csh

我已经在 Ubuntu 12.04 上安装了 cshell，但是没有`.cshrc`文件（在`~`或中`/etc`） - 创建 1 将 a 放入`source`脚本文件是否安全，如果是，最好的放置位置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:31:24.850

是的，在您的主目录中简单地创建新的 .cshrc 是安全的。我建议使用 tcsh 作为更好的 csh 替代品——它向后兼容 csh 并将使用相同的 .cshrc 文件。

我个人在 FreeBSD 上使用 tcsh 已经很多年了，它作为交互式 shell 非常好。

但是，请注意，有些人认为使用 csh 系列的任何 shell 都是不好的做法[http://www.faqs.org/faqs/unix-faq/shell/csh-whynot](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot)

# tomcat - Log4J 在战争部署时抛出 stackoverflow 错误

> ID：12892657
> 
> 赞同：5
> 
> 时间：2012-10-15T09:22:40.017
> 
> 标签：tomcat, log4j, war, stack-overflow

我们最近将我的应用程序移至多模块 maven 架构，现在**在 Tomcat 中部署时会引发 stackoverflow 错误。**

***堆栈跟踪包括在下面：***

```
GRAVE: Error waiting for multi-thread deployment of WAR files to complete
java.util.concurrent.ExecutionException: java.lang.StackOverflowError
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:757)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:477)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1393)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:318)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:401)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:346)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1140)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.StackOverflowError
    at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390)
    at java.lang.StringBuffer.append(StringBuffer.java:224)
    at org.apache.log4j.helpers.OptionConverter.getSystemProperty(OptionConverter.java:105)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:417)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429)
    at org.apache.log4j.helpers.OptionConverter.substVars(OptionConverter.java:429) 
```

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:26:03.463

您在配置中使用 System 属性，该属性的值为`${name}`，即`-Dname=${name}`

当 Log4j 尝试扩展 的值时`${name}`，它会得到`${name}`-> 循环。

如果很难判断是哪个变量导致了问题，请在其中设置断点`OptionConverter.java:105`或启用调试`-Dlog4j.debug=true`

# java - 用不需要的行为覆盖库构造函数

> ID：12892661
> 
> 赞同：0
> 
> 时间：2012-10-15T09:22:42.803
> 
> 标签：java, math, inheritance, apache-commons

我正在使用 Apache Commons Library 进行一些基本计算，并且我有一个 2x2 对称 RealMatrix，我需要为其计算 EigenDecomposition。矩阵如下：

```
{{10.387035702893005, 0.14862451664049367},
{0.14862451664049442, -5.1952457826500815}} 
```

double 类型的右上角和左下角元素应该是相同的，您会注意到它们几乎相同。但是，当我将矩阵传递给 EigenDecomposition 的新实例时，我会遇到异常。isSymmetric() 的计算结果为 false，并且因为构造函数将 'true' 作为参数传入，所以 isSymmetric() 方法会引发异常。我基本上需要绕过这个检查。我有哪些选择？谢谢！

```
public EigenDecomposition(final RealMatrix matrix,
                              final double splitTolerance)  {
    if (isSymmetric(matrix, true)) {
        transformToTridiagonal(matrix);
        findEigenVectors(transformer.getQ().getData());
    }
} 
```

NB 分裂容差参数，人们可能认为它指定了容差水平，只是一个虚拟参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:42:02.677

如果这两个值应该相等，您可以将一个复制到另一个之上吗？

```
matrix[0][1] = matrix[1][0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:29:43.603

问题似乎是一个数字错误 - 值几乎相同，但不完全相同。一个快速而肮脏的解决方案可能是：

使用条件检查两个值是否相等：`Math.abs(matrix[0][1] - matrix[1][0]) < DELTA`。你的容忍因子在哪里`DELTA`（你可以容忍的最大值是多少，所以矩阵将被认为是对称的）。

如果是 - 分配`matrix[0][1] = matrix[1][0]`

很容易看出，满足条件的矩阵现在应该按照定义是对称的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:33:29.357

你可以覆盖`isSymmetric`然后让第二个参数被忽略。然后你可以调用你自己的`isSymmetric`方法

例如

```
@override
public boolean isSymmetric(RealMatrix m, Boolean b) {
     return _isSymmetric(m);
} 
```

`_isSymmetric(m)`你自己的实现在哪里。然后，您可以以任何您认为合适的方式比较双精度值。我建议使用 delta 而不是直接 == 因为 double 值很少完全相等，但通常足够相等；）

# java - 如何在 Java 中捕获 shell 命令的退出状态？

> ID：12892665
> 
> 赞同：13
> 
> 时间：2012-10-15T09:23:04.040
> 
> 标签：java, exit-code

我正在为我的 CSVreader 创建一个 Junit 测试文件。我正在读取 CSV 文件的内容并将内容写入另一个文件。我想使用 diff 实用程序比较它们，我想使用 diff 的退出状态来了解内容是否相同。一般$? 给出退出状态，但我不知道如何捕获它并在我的代码中使用它。任何人都可以在这方面帮助我吗？

这就是我的代码的样子

```
 boolean hasSameContents = false;

    command="diff "+mp.get("directory")+"/"+fileName+" "+mp.get("outdir")+"/"+fileName;
    p= Runtime.getRuntime().exec(command);
    p.waitFor(); 
```

在此之后，我想获得退出状态并在这样的 if 条件下使用它

```
 if(exit_status==0)
     hasSameContents = true;
  else
     hasSameContents = false; 
```

甚至替代建议表示赞赏。:)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-15T09:26:31.820

您正在寻找[Process#exitValue](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#exitValue%28%29)

```
String command = "diff "+mp.get("directory")+"/"+fileName+" "+mp.get("outdir")+"/"+fileName;
Process p = Runtime.getRuntime().exec(command);
p.waitFor();
int exitStatus = p.exitValue(); 
```

不要忘记，`InputStream`即使您不在乎，您也应该阅读其中的内容，某些进程会阻塞（未完成），直到读取了输出缓冲区...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T09:27:38.917

您可以尝试使用`ProcessBuilder`类来创建一个`Process`对象，该对象`exitValue()`应该对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T09:26:59.350

[使用类 Process 的](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#waitFor%28%29)方法waitFor() 。它返回一个int，即进程的返回值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T09:28:41.840

`Runtime.exec()`和朋友返回一个[`Process`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)对象，该对象有一个`exitValue()`返回退出代码的方法。

# html - 桌头周围的边框

> ID：12892666
> 
> 赞同：0
> 
> 时间：2012-10-15T09:23:07.747
> 
> 标签：html, css, html-table, position, border

问题是我为它制作的边框`thead`没有遵循我为它制作的规则 - 向下移动的位置，向左移动一点。如何移动边框使其“粘”在头上？

[http://jsfiddle.net/GRf9v/188/](http://jsfiddle.net/GRf9v/188/)

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:27:52.620

尽量避免在表格中使用定位。定位适用于块元素，而不是表格数据。在这种情况下，我认为它不会帮助您实现您想要的。

这更接近你想要的吗？

[http://jsfiddle.net/GRf9v/189/](http://jsfiddle.net/GRf9v/189/)

这不应该是一张桌子。查看更新的答案：http: [//jsfiddle.net/GRf9v/190/](http://jsfiddle.net/GRf9v/190/)

希望这会帮助你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:00:41.893

如果您选择不使用表格，您可以检查一下。 [http://jsfiddle.net/athanph/6hhPK/](http://jsfiddle.net/athanph/6hhPK/)`

# java - Java / 线程优先级

> ID：12892668
> 
> 赞同：2
> 
> 时间：2012-10-15T09:23:10.120
> 
> 标签：java, multithreading, swing, sockets, thread-priority

我有一个应用程序启动四个线程来监听传入的数据包。每个线程在不同的端口上打开一个套接字。通常，数据包一次只能在一个端口上接收，但在某些情况下，消息可以在两个端口上接收几秒钟。这些线程中的每一个都处理消息并更新一堆听众（他们都在做一些 Swing 绘画的事情）。由于消息以 10 Hz 的频率发送，并且 Swing 组件上的绘制动作需要一些时间，我的第一种方法是只处理 20 条消息中的一条（完成组件上的绘制需要 2 秒时间）。效果很好...

但是当当时收到两条消息时，我需要告诉我的应用程序只处理其中一条（只在短时间内收到的一条）。总之，在第二个端口上接收到 10 条消息，频率也为 10 Hz。意思是，使用第一种方法有时我会错过所有 10 个，因为只有 20 个被处理。

每当收到第二个端口上的消息时，我希望我的应用程序处理那个消息，不管在第一个端口上接收到什么或当时是否绘制了某些东西。

以下代码显示了我的线程的实现，其中四个同时启动，具体取决于通过构造函数给出的端口。

```
private class IncomingRunner implements Runnable {

    private int listenPort;
    private DatagramSocket localSocket;
    private DatagramPacket packet;
    private int counter = 0;

    public IncomingRunner(int port) {
        this.listenPort = port;
    }

    @Override
    public void run() {
        try {
            localSocket = new DatagramSocket(listenPort);

            byte[] buffer = new byte[1024];
            packet = new DatagramPacket(buffer, buffer.length);

            while(isRunning)
                recvIncomingMsg();

        } catch (SocketException e) {
            e.printStackTrace();
        }
    }

    private void recvIncomingMsg() {
        try {
            localSocket.receive(packet);
            port = localSocket.getLocalPort();

            ReceivedMsg eventMsg;

            if(port == Config.PORT_1) {
                eventMsg = new ReceivedMsg(Config.PORT_1, Config.SOMETHING_1);
                System.out.println(HexWriter.getHex(packet.getData()));
            } else if (port == Config.PORT_2) {
                eventMsg = new ReceivedMsg(Config.PORT_2, Config.SOMETHING_2);
                System.out.println(HexWriter.getHex(packet.getData()));
            } else if (port == Config.PORT_3) {
                eventMsg = new ReceivedMsg(Config.PORT_3, Config.SOMETHING_3);
                System.out.println(HexWriter.getHex(packet.getData()));
            } else {
                eventMsg = new ReceivedMsg(Config.PORT_4, Config.SOMETHING_4);
                System.out.println(HexWriter.getHex(packet.getData()));
            }

            counter++;

            if(counter%20 == 0) {
                forward2PacketPanel(eventMsg);
                counter = 0;
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void forward2PacketPanel(final ReceivedMsg t) {
        for(final IPacketListener c : listeners) {
            if(c instanceof IPacketListener) {
                new Thread(new Runnable() {
                    @Override
                    public void run() {
                        ((IPacketListener)c).update(t);
                    }
                }).start();
            }
        }
    }
} 
```

**更新：** 我开始新线程来更新监听器的原因是，因为它们都应该同时更新 GUI。每个`updated`调用`paintComponent()`不同的方法`JPanel`。所以他们应该一起运行。

**UPDATE2：** 我不能使用第一种方法，因为这会导致消息丢失可能是重要的消息（在第二个端口接收）。我需要的是，当收到正常的消息时，只需处理它并进行绘制，不管有多少新的正常消息（在第一个端口上）进来。但即使在第二个端口上只收到一个消息，应用程序需要处理那个，不管正常接收线程中发生了什么。

我想我在这里面临两个问题：

1.  我需要让每个线程等到绘画完成，因为那是 UDP 我可以处理一个正常的数据包，而在绘画动作期间忘记所有后续的正常数据包。完成后，处理下一个正常数据包。

2.  如果接收到第二个端口上的数据包，则中断所有正常的数据包处理操作并执行处理特殊数据包所需的事情。

使用 MainIncomingClass 中的 BitSet 解决了问题 (1)。每个 Listener 都使用某种回调函数来指示它已完成绘制并在 BitSet 中设置一个特定的 Bit。如果不是所有的都是真的，我不会处理任何新的数据包，只是让他们走。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:38:03.343

[他们在这里](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)谈论事件调度线程。您*必须*使用它来更新您的 GUI。幸运的是，您还可以使用它以您想要的任何顺序发布您的更新。EDT 会`start()`为您解决问题。您仍然需要同步对`t`.

```
EventQueue.invokeLater(new Runnable() {
    @Override
    public void run() {
        ((IPacketListener)c).update(t);
    }
}); 
```

# c# - MvvmCross vnext：类似于wp7的monodroid CommandParameter

> ID：12892672
> 
> 赞同：1
> 
> 时间：2012-10-15T09:23:22.130
> 
> 标签：c#, windows-phone-7, xamarin.ios, xamarin.android, mvvmcross

我在教程示例的 MainMenuView 中使用字典而不是列表。在 wp7 中，我这样绑定：

```
 <ListBox ItemsSource="{Binding Items}" x:Name="TheListBox">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Key}" Margin="12" FontSize="24" TextWrapping="Wrap">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Tap">
                                <commandbinding:MvxEventToCommand Command="{Binding Path=DataContext.ShowItemCommand, ElementName=TheListBox}" CommandParameter="{Binding Value}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </TextBlock>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

但是对于 monodroid，我不知道在 mvxListView 中将 CommandParameter="{Binding Value}" 放在哪里，我收到此错误："MvxBind:Error: 2,71 Problem seen during binding execution for from Items to ItemsSource - 问题 ArgumentException:无法转换参数”来自我的 axml 代码：

```
<Mvx.MvxBindableListView
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:local="http://schemas.android.com/apk/res/Tutorial.UI.Droid"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
local:MvxBind="{'ItemsSource':{'Path':'Items'},'ItemClick':{'Path':'ShowItemCommand'}}"
local:MvxItemTemplate="@layout/listitem_viewmodel" 
```

/>

如何像 wp7 一样设置 CommandParameter 属性？

在此先感谢您的帮助。

按照您的说明 1，我在 Tutorial.Core 中更改 MainMenuViewModel，如下所示：

`公共字典项目{得到; 放; }

```
 public ICommand ShowItemCommand
    {
        get
        {
            return new MvxRelayCommand<KeyValuePair<string, Type>>((type) => DoShowItem(type.Value));
        }
    }

    public void DoShowItem(Type itemType)
    {
        this.RequestNavigate(itemType);
    }

    public MainMenuViewModel()
    {
        Items = new Dictionary<string, Type>()
                    {
                        {"SimpleTextProperty",  typeof(Lessons.SimpleTextPropertyViewModel)},
                        {"PullToRefresh",  typeof(Lessons.PullToRefreshViewModel)},
                        {"Tip",  typeof(Lessons.TipViewModel)},
                        {"Composite",typeof(Lessons.CompositeViewModel)},
                        {"Location",typeof(Lessons.LocationViewModel)}
                    };
    }` 
```

该示例在 wp7 中按预期工作，但是对于 monodroid，我得到与前一个相同的错误，因为我认为 KeyValuePair Key 属性会导致问题：

```
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:local="http://schemas.android.com/apk/res/Tutorial.UI.Droid"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
          android:layout_margin="12dp"
        android:orientation="vertical">
<TextView
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:text="View Model:"
        />
  <TextView
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:textAppearance="?android:attr/textAppearanceLarge"
          local:MvxBind="{'Text':{'Path':'Key'}}"
        />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:22:12.647

Mvx 当前没有单独的 CommandParameter 依赖目标，因此您目前无法以相同的方式解决此问题。

不包含 CommandParameters 的原因是设计选择，并且与缺少行为有关。因为没有一个行为对象将命令和命令参数包装在一个控件事件周围，所以 Click、LongClick、Swipe 等需要单独的 CommandParameter 绑定 - 这些可能会变得非常冗长和丑陋 - 所以，到目前为止，我们已经避开了这种方法。

但是，有几种方法可以达到与您正在寻找的效果相似的效果。

* * *

首先，列表上的 ItemClick 事件始终是绑定的，因此参数始终是已单击的对象 - 因此，如果您可以`.Value`在 MvxRelayCommand 操作中进行投影，那么代码将在 WP7 和 MonoDroid 中工作。

即这可以实现：

```
<ListBox ItemsSource="{Binding Items}" x:Name="TheListBox">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Key}" Margin="12" FontSize="24" TextWrapping="Wrap">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="Tap">
                            <commandbinding:MvxEventToCommand Command="{Binding Path=DataContext.ShowItemCommand, ElementName=TheListBox}" CommandParameter="{Binding}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </TextBlock>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

使用：

```
<Mvx.MvxBindableListView
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:local="http://schemas.android.com/apk/res/Tutorial.UI.Droid"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
local:MvxBind="{'ItemsSource':{'Path':'Items'},'ItemClick':{'Path':'ShowItemCommand'}}"
local:MvxItemTemplate="@layout/listitem_viewmodel"
/> 
```

您的命令处理程序在哪里`.Value`工作：

公共 ShowItemCommand { get { return new MvxRelayCommand( item => { DoShowFor(item.Value); } ); } }

* * *

其次，您可以选择绑定到每个列表项中的视图/控件上的 Click 事件，而不是绑定到列表级事件。有关此问题的一些讨论，请参阅 MvxBindableListView 中有关[MVVMCross 更改 ViewModel 的答案](https://stackoverflow.com/questions/12682082/mvvmcross-changing-viewmodel-within-a-mvxbindablelistview)

* * *

第三，如果你真的想的话，你可以在这种情况下编写自己的绑定......我认为这对于这种情况来说有点过分了，但在其他情况下它可能会很有用。

* * *

有关更多列表选择示例，请查看 BestSellers 和 CustomerManagement 示例。

# javascript - 使用 jquery mobile 和 phonegap 的应用程序的页面转换

> ID：12892684
> 
> 赞同：0
> 
> 时间：2012-10-15T09:23:59.203
> 
> 标签：javascript, android, html, cordova

我正在 html/css/javascript 中构建一个应用程序并使用 phonegap 构建。

所以，我首先想拥有简单的页面到页面导航。我试过这个：

指数：

```
<!DOCTYPE HTML>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="jquery.mobile-1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="jquery-1.8.2.js"></script>
    <script src="jquery.mobile-1.2.0/jquery.mobile-1.2.0.js"></script>
</head>

<body id="body">
    <div id="container" data-role="page">
        <a rel="external" data-role="button" href="test.html" data-transition="slide">click me</a>
    </div>

</body>

</html> 
```

测试.html：

```
<!DOCTYPE HTML>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="jquery.mobile-1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="jquery-1.8.2.js"></script>
    <script src="jquery.mobile-1.2.0/jquery.mobile-1.2.0.js"></script>
</head>

<body id="body">
    <div id="container" data-role="page">
        New page!
    </div>

</body>

</html> 
```

结果：当我单击按钮时，test.html 页面加载速度非常慢，并且 data-transition="slide" 似乎被忽略了。

我发现一篇关于动态页面加载的文章：[https ://www.ibm.com/developerworks/mydeveloperworks/blogs/94e7fded-7162-445e-8ceb-97a2140866a9/entry/dynamic_page_loading_for_phonegap1?lang=en](https://www.ibm.com/developerworks/mydeveloperworks/blogs/94e7fded-7162-445e-8ceb-97a2140866a9/entry/dynamic_page_loading_for_phonegap1?lang=en)

我真的不明白。HTML文件不是存储在本地吗？那么为什么要做 XMLHtppRequest 呢？

我的问题是：如何获得良好的页面转换（快速且有效果）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:42:26.753

您应该`rel="external"`从您的`<a>`链接中删除。

该属性`rel="external"`禁用 Ajax 导航，跳过过渡效果，并刷新您的页面`test.html`。

删除后尝试您的代码。

`index.html`：

```
<!DOCTYPE HTML>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="jquery.mobile-1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="jquery-1.8.2.js"></script>
    <script src="jquery.mobile-1.2.0/jquery.mobile-1.2.0.js"></script>
</head>

<body id="body">
    <div id="container" data-role="page">

        <!-- REMOVE THE ATTRIBUTE REL="EXTERNAL" FROM THE LINK -->
        <a data-role="button" href="test.html" data-transition="slide">click me</a>
    </div>

</body>

</html> 
```

`test.html`：

```
<!DOCTYPE HTML>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="jquery.mobile-1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="jquery-1.8.2.js"></script>
    <script src="jquery.mobile-1.2.0/jquery.mobile-1.2.0.js"></script>
</head>

<body id="body">
    <div id="container" data-role="page">
        New page!
    </div>

</body>

</html> 
```

让我知道你的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:56:14.883

试试Piotr Walczyszyn 的[这个解决方案。](http://outof.me/fixing-flickers-jumps-of-jquery-mobile-transitions-in-phonegap-apps/)强烈推荐给任何同时使用 Jquery mobile 和 Phonegap 的人。

# mysql - 在 MySQL 中使用 Union All 和 Order By

> ID：12892688
> 
> 赞同：4
> 
> 时间：2012-10-15T09:24:12.793
> 
> 标签：mysql, sorting, union-all

我有 2 张桌子：

```
create table advertised_products(id int,title varchar(99),timestamp timestamp);
insert advertised_products select 1,'t1',curdate();

create table wanted_products(id int,title varchar(99),timestamp timestamp);
insert wanted_products select 1,'t1',now(); 
```

我正在使用此查询来获取记录：

```
(
SELECT 
    ap.*,
    'advertised'  as type 
FROM advertised_products as ap
)
union all
(
SELECT 
    wp.*,
    'wanted' as type 
FROM wanted_products as wp
)
ORDER BY timestamp desc limit 3 
```

但它给出了错误：

> order 子句中的列 'timestamp' 不明确

我该如何排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:25:55.797

将其包装在子查询中。

```
SELECT s.*
FROM
    (
        SELECT  ap.*, 'advertised'  as type 
        FROM advertised_products as ap
          union all
        SELECT  wp.*, 'wanted' as type 
        FROM wanted_products as wp
    ) s
ORDER BY s.timestamp desc 
limit 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:32:21.093

错误就在这里，

```
 "ORDER BY timestamp desc limit 3" 
```

当您组合两个表时，查询必须知道您在哪个表中使用了哪些字段。很明显，您在“orderby”子句中缺少表引用

提及表名/表名的别名，如下所示

```
 "ORDER BY your_table_name.timestamp desc limit 3" 
```

# wcf - 当 mex 变得太大时，WCF RoutingService 失败

> ID：12892692
> 
> 赞同：1
> 
> 时间：2012-10-15T09:24:22.487
> 
> 标签：wcf

我遇到了 net.tcp WCF windows 服务 int .NET 4.0 的问题，看起来我的特定端点的 mex 太大了。直接连接到端点完全没有问题。我创建了一个 WCF RoutingService 以允许我们专用网络之外的人连接到我的内部 WCF 服务。通过 RoutingService 获取 mex 信息失败。

我的 WCF 服务有大约 7 个端点，WCF RoutingService 正在路由所有端点，但只有大的一个（有 17 个方法）有问题。

我在下面找到了这个链接，它解释了在无法直接连接到 mex 端点时如何解决问题

[http://blogs.msdn.com/b/distributedservices/archive/2009/05/07/too-many-operations-or-methods-in-wcf-service-causes-the-metadataexchange-fail.aspx](http://blogs.msdn.com/b/distributedservices/archive/2009/05/07/too-many-operations-or-methods-in-wcf-service-causes-the-metadataexchange-fail.aspx)

但它谈到了在 svcutil.exe.config 中使用 IMetadataExchange 合同创建端点。我遇到问题的 RoutingService 端点正在使用合同 System.ServiceModel.Routing.IRequestReplyRouter，所以我不知道是否需要稍微不同地配置 svcutil.exe.config 文件。我尝试了各种组合，但没有任何效果。我什至不确定我需要将 svcutil.exe.config 文件放在哪里，以便 RoutingService WCF 服务获取它，或者即使它需要一个。

有人知道更好的解决方案，或者在涉及 RoutingService 时可能提供帮助的链接吗？

# c# - 在iis7中发布站点后无法访问sql server

> ID：12892693
> 
> 赞同：0
> 
> 时间：2012-10-15T09:24:27.837
> 
> 标签：c#, visual-studio-2010, iis, iis-7

我使用 Visual Studio 2010 创建了一个网站。在网站开发时，我能够访问数据库..但是在使用 IIS7 发布网站后..我无法访问数据库..在那期间发生了异常时间是“连接处于关闭状态”。在 IIS7 中，当我将应用程序池标识更改为本地系统时，它起作用了。数据库安装在同一台机器上。服务器是 SQL SERVER 2008 R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:40:07.123

发布后，您只能通过 sql 身份验证访问数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:41:14.147

在 IIS7 中，应用程序池默认运行在**IIS AppPool\[Application Pool Name]下**

这意味着，如果您的应用程序池名为“MyWebSite”，那么您必须授予以下用户权限才能使用您的数据库：**IIS AppPool\MyWebSite**

它不会在任何列表中，因此您必须在添加时按上述方式键入它。

如果您不确定要授予它哪些权限，我建议将其设为数据库所有者。如果可行，您以后可以随时细化权限

# python - 向列表中的项目添加空格（Python）

> ID：12892698
> 
> 赞同：8
> 
> 时间：2012-10-15T09:24:45.667
> 
> 标签：python, string, list, space

我是一个 Python 菜鸟，我需要一些帮助来解决一个简单的问题。

我需要做的是创建一个包含 3 个项目的列表，并在每个项目之前和之后添加空格。

例如：`l1 = ['a', 'bb', 'c']`
应转化为：`[' a ',' bb ',' c ']`

我试图写这样的东西：

```
lst = ['a', 'bb', 'c']
for a in lst:
    print '  a  ' 
```

...等等其他元素，但我得到一个语法错误。谁能建议我一种可行的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T09:25:49.573

与往常一样，使用[列表推导](http://docs.python.org/reference/expressions.html#list-displays)：

```
lst = [' {0} '.format(elem) for elem in lst] 
```

这将[字符串格式化操作](http://docs.python.org/library/string.html#formatstrings)应用于每个元素，添加空格。如果您使用 python 2.7 或更高版本，您甚至可以省略`0`替换字段中的 （花括号）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T09:25:57.643

```
[ ' {} '.format(x) for x in lst ] 
```

编辑python 3.6+：

您可以改用 f 字符串，请参阅文档：[https ://www.python.org/dev/peps/pep-0498/](https://www.python.org/dev/peps/pep-0498/)

上面的例子看起来像：

```
[ f' {x} ' for x in lst ] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T09:45:08.623

```
lst = ['a', 'bb', 'c']  
lst = [' ' + x + ' ' for x in lst] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T09:26:23.497

```
In [44]: l1 = ['a', 'bb', 'c']

In [45]: [' %s '%x for x in l1]
Out[45]: [' a ', ' bb ', ' c '] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T09:29:18.373

首先缩进你的python代码！接着：

```
lst = ['a', 'b', 'c']
lst2 = [' ' + a + ' ' for a in lst]
print lst2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T09:25:59.323

尝试这个：

```
lst = [' ' + x + ' ' for x in ['a', 'bb', 'c']] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T09:27:12.977

```
>>> lst = ['a', 'bb', 'c']
>>> 
>>> [' {} '.format(x) for x in lst]
[' a ', ' bb ', ' c ']
>>> 
```

# sqlite - ASP.NET + SQLite 中的 ThreadAbortException

> ID：12892700
> 
> 赞同：0
> 
> 时间：2012-10-15T09:24:53.930
> 
> 标签：sqlite, nhibernate, system.data.sqlite

我有一段时间面临这个问题。有时（只是有时）我在我的一个 aspx 页面的 Page_PreRender 中得到 ThreadAbortException。这太奇怪了，我有时会在某些时候得到它。我在共享虚拟主机中托管的 asp.net 网站中使用 SQLite 和 NHibernate。例外是：

```
System.Threading.ThreadAbortException: Thread was being aborted.
   at System.Data.SQLite.SQLite3.Step(SQLiteStatement stmt)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at NHibernate.AdoNet.AbstractBatcher.ExecuteNonQuery(IDbCommand cmd)
   at NHibernate.AdoNet.NonBatchingBatcher.AddToBatch(IExpectation expectation)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Update(Object id, Object[] fields, Object[] oldFields, Object rowId, Boolean[] includeProperty, Int32 j, Object oldVersion, Object obj, SqlCommandInfo sql, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.UpdateOrInsert(Object id, Object[] fields, Object[] oldFields, Object rowId, Boolean[] includeProperty, Int32 j, Object oldVersion, Object obj, SqlCommandInfo sql, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Update(Object id, Object[] fields, Int32[] dirtyFields, Boolean hasDirtyCollection, Object[] oldFields, Object oldVersion, Object obj, Object rowId, ISessionImplementor session)
   at NHibernate.Action.EntityUpdateAction.Execute()
   at NHibernate.Engine.ActionQueue.Execute(IExecutable executable)
   at NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
   at NHibernate.Engine.ActionQueue.ExecuteActions()
   at NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
   at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   at NHibernate.Impl.SessionImpl.Flush() 
```

你有什么主意吗 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:14:06.223

您的代码可能执行时间过长（因为数据过多，或者因为 SQLite 正在等待另一个线程对数据库的锁定）。
尝试增加. `httpRuntime`_`executionTimeout``web.config`

# scala - 在折叠中提前中止

> ID：12892701
> 
> 赞同：95
> 
> 时间：2012-10-15T09:24:59.490
> 
> 标签：scala, functional-programming

提早终止弃牌的最佳方式是什么？作为一个简化的例子，假设我想总结 an 中的数字`Iterable`，但如果我遇到一些我不期望的东西（比如一个奇数），我可能想要终止。这是第一个近似值

```
def sumEvenNumbers(nums: Iterable[Int]): Option[Int] = {
  nums.foldLeft (Some(0): Option[Int]) {
    case (Some(s), n) if n % 2 == 0 => Some(s + n)
    case _ => None
  }
} 
```

然而，这个解决方案非常丑陋（例如，如果我做了一个 .foreach 和一个 return - 它会更干净更清晰），最糟糕的是，即使遇到非偶数，它也会遍历整个迭代.

那么写这样一个提前终止的折叠的最好方法是什么？我应该去递归地写这个，还是有更接受的方式？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-15T14:37:34.687

我的第一选择通常是使用递归。它只是稍微不那么紧凑，可能更快（当然不会更慢），并且在提前终止时可以使逻辑更清晰。在这种情况下，您需要嵌套的 def，这有点尴尬：

```
def sumEvenNumbers(nums: Iterable[Int]) = {
  def sumEven(it: Iterator[Int], n: Int): Option[Int] = {
    if (it.hasNext) {
      val x = it.next
      if ((x % 2) == 0) sumEven(it, n+x) else None
    }
    else Some(n)
  }
  sumEven(nums.iterator, 0)
} 
```

我的第二个选择是使用`return`，因为它使其他所有内容保持不变，您只需将折叠包装在 a 中`def`，这样您就可以从中返回一些东西——在这种情况下，您已经有了一个方法，所以：

```
def sumEvenNumbers(nums: Iterable[Int]): Option[Int] = {
  Some(nums.foldLeft(0){ (n,x) =>
    if ((n % 2) != 0) return None
    n+x
  })
} 
```

在这种特殊情况下，它比递归更紧凑（尽管我们在递归方面特别不走运，因为我们必须进行可迭代/迭代器转换）。当所有其他条件都相同时，跳跃的控制流是要避免的，但这里不是。在有价值的情况下使用它没有害处。

如果我经常这样做并希望它在某个方法的中间（所以我不能只使用 return），我可能会使用异常处理来生成非本地控制流。也就是说，它毕竟擅长什么，而且错误处理并不是它唯一有用的时候。唯一的技巧是避免生成堆栈跟踪（这真的很慢），这很容易，因为 trait`NoStackTrace`和它的子 trait`ControlThrowable`已经为你做到了。Scala 已经在内部使用了它（事实上，这就是它实现从折叠内部返回的方式！）。让我们自己做（不能嵌套，虽然可以解决这个问题）：

```
import scala.util.control.ControlThrowable
case class Returned[A](value: A) extends ControlThrowable {}
def shortcut[A](a: => A) = try { a } catch { case Returned(v) => v }

def sumEvenNumbers(nums: Iterable[Int]) = shortcut{
  Option(nums.foldLeft(0){ (n,x) =>
    if ((x % 2) != 0) throw Returned(None)
    n+x
  })
} 
```

当然在这里使用`return`更好，但请注意，您可以放在`shortcut`任何地方，而不仅仅是包装整个方法。

接下来对我来说是重新实现折叠（我自己或找到一个这样做的库），以便它可以发出提前终止的信号。这样做的两种自然方式是不传播值，而是`Option`包含值，其中`None`表示终止；或使用第二个指示完成的指标函数。Kim Stebel 展示的 Scalaz 惰性折叠已经涵盖了第一种情况，所以我将展示第二种情况（使用可变实现）：

```
def foldOrFail[A,B](it: Iterable[A])(zero: B)(fail: A => Boolean)(f: (B,A) => B): Option[B] = {
  val ii = it.iterator
  var b = zero
  while (ii.hasNext) {
    val x = ii.next
    if (fail(x)) return None
    b = f(b,x)
  }
  Some(b)
}

def sumEvenNumbers(nums: Iterable[Int]) = foldOrFail(nums)(0)(_ % 2 != 0)(_ + _) 
```

（是否通过递归、返回、惰性等方式实现终止取决于您。）

我认为这涵盖了主要的合理变体；还有一些其他选项，但我不确定为什么在这种情况下会使用它们。（`Iterator`如果它有 ，它本身会很好用`findOrPrevious`，但它没有，而且手动完成它所需要的额外工作使它成为在这里使用的一个愚蠢的选择。）

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-15T17:17:01.183

您描述的场景（在某些不需要的情况下退出）似乎是该`takeWhile`方法的一个很好的用例。它本质上是`filter`，但应该在遇到不满足条件的元素时结束。

例如：

```
val list = List(2,4,6,8,6,4,2,5,3,2)
list.takeWhile(_ % 2 == 0) //result is List(2,4,6,8,6,4,2) 
```

这也适用于`Iterator`s/ `Iterable`s。我为您的“偶数总和，但奇数中断”建议的解决方案是：

```
list.iterator.takeWhile(_ % 2 == 0).foldLeft(...) 
```

只是为了证明一旦它达到奇数就不会浪费你的时间......

```
scala> val list = List(2,4,5,6,8)
list: List[Int] = List(2, 4, 5, 6, 8)

scala> def condition(i: Int) = {
     |   println("processing " + i)
     |   i % 2 == 0
     | }
condition: (i: Int)Boolean

scala> list.iterator.takeWhile(condition _).sum
processing 2
processing 4
processing 5
res4: Int = 6 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-15T10:10:37.793

您可以使用 scalaz 中的 foldRight 的惰性版本以功能样式执行您想要的操作。有关更深入的解释，请参阅[此博客文章](http://voidmainargs.blogspot.de/2011/08/folding-stream-with-scala.html)。虽然此解决方案使用 a `Stream`，但您可以使用有效地将 a 转换`Iterable`为 a 。`Stream``iterable.toStream`

```
import scalaz._
import Scalaz._

val str = Stream(2,1,2,2,2,2,2,2,2)
var i = 0 //only here for testing
val r = str.foldr(Some(0):Option[Int])((n,s) => {
  println(i)
  i+=1
  if (n % 2 == 0) s.map(n+) else None
}) 
```

这仅打印

```
0
1 
```

这清楚地表明匿名函数只被调用了两次（即直到它遇到奇数）。这是由于 foldr 的定义，其签名（在 的情况下`Stream`）是`def foldr[B](b: B)(f: (Int, => B) => B)(implicit r: scalaz.Foldable[Stream]): B`. 请注意，匿名函数将按名称参数作为其第二个参数，因此不需要对其进行评估。

顺便说一句，您仍然可以使用 OP 的模式匹配解决方案来编写它，但我发现 if/else 和 map 更优雅。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-15T10:06:30.010

好吧，Scala 确实允许非本地返回。对于这是否是一种好的风格，有不同的看法。

```
scala> def sumEvenNumbers(nums: Iterable[Int]): Option[Int] = {
     |   nums.foldLeft (Some(0): Option[Int]) {
     |     case (None, _) => return None
     |     case (Some(s), n) if n % 2 == 0 => Some(s + n)
     |     case (Some(_), _) => None
     |   }
     | }
sumEvenNumbers: (nums: Iterable[Int])Option[Int]

scala> sumEvenNumbers(2 to 10)
res8: Option[Int] = None

scala> sumEvenNumbers(2 to 10 by 2)
res9: Option[Int] = Some(30) 
```

**编辑：**

在这种特殊情况下，正如@Arjan 建议的那样，您还可以这样做：

```
def sumEvenNumbers(nums: Iterable[Int]): Option[Int] = {
  nums.foldLeft (Some(0): Option[Int]) {
    case (Some(s), n) if n % 2 == 0 => Some(s + n)
    case _ => return None
  }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-10-12T13:58:09.330

[Cats](https://github.com/typelevel/cats)有一个称为[foldM](https://github.com/typelevel/cats/blob/master/core/src/main/scala/cats/Foldable.scala#L272)的方法，它可以进行短路（for `Vector`, `List`, `Stream`, ...）。

它的工作原理如下：

```
def sumEvenNumbers(nums: Stream[Int]): Option[Long] = {
  import cats.implicits._
  nums.foldM(0L) {
    case (acc, c) if c % 2 == 0 => Some(acc + c)
    case _ => None
  }
} 
```

如果它找到一个非偶数元素，则返回`None`而不计算其余元素，否则它返回偶数条目的总和。

如果要保持计数直到找到偶数条目，则应使用`Either[Long, Long]`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-04-13T12:05:38.807

您可以`foldM`从猫库中使用（如@Didac 建议的那样），但如果您想获得实际总和，我建议使用`Either`而不是。`Option`

`bifoldMap`用于从中提取结果`Either`。

```
import cats.implicits._

def sumEven(nums: Stream[Int]): Either[Int, Int] = {
    nums.foldM(0) {
      case (acc, n) if n % 2 == 0 => Either.right(acc + n)
      case (acc, n) => {
        println(s"Stopping on number: $n")
        Either.left(acc)
      }
    }
  } 
```

例子：

```
println("Result: " + sumEven(Stream(2, 2, 3, 11)).bifoldMap(identity, identity))
> Stopping on number: 3
> Result: 4

println("Result: " + sumEven(Stream(2, 7, 2, 3)).bifoldMap(identity, identity))
> Stopping on number: 7
> Result: 2 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-22T20:50:48.960

@Rex Kerr 你的回答帮助了我，但我需要调整它以使用 Either

```

  def foldOrFail[A,B,C,D](map: B => Either[D, C])(merge: (A, C) => A)(initial: A)(it: Iterable[B]): [D, A] = {
    val ii= it.iterator
    var b=初始
    而（ii.hasNext）{
      val x= ii.next
      地图（x）匹配{
        case Left(error) => return Left(error)
        案例右（d）=> b=合并（b，d）
      }
    }
    右(b)
  }

```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-04T18:32:58.520

您可以尝试使用临时变量并使用 takeWhile。这是一个版本。

```
 var continue = true

  // sample stream of 2's and then a stream of 3's.

  val evenSum = (Stream.fill(10)(2) ++ Stream.fill(10)(3)).takeWhile(_ => continue)
    .foldLeft(Option[Int](0)){

    case (result,i) if i%2 != 0 =>
          continue = false;
          // return whatever is appropriate either the accumulated sum or None.
          result
    case (optionSum,i) => optionSum.map( _ + i)

  } 
```

在这种情况下`evenSum`应该是`Some(20)`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-15T09:32:39.010

一个更漂亮的解决方案是使用跨度：

```
val (l, r) = numbers.span(_ % 2 == 0)
if(r.isEmpty) Some(l.sum)
else None 
```

...但如果所有数字都是偶数，它会遍历列表两次

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-15T09:35:14.800

您可以在遇到终止条件时抛出一个精心挑选的异常，并在调用代码中处理它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-13T17:32:20.067

只是出于“学术”原因（：

```
var headers = Source.fromFile(file).getLines().next().split(",")
var closeHeaderIdx = headers.takeWhile { s => !"Close".equals(s) }.foldLeft(0)((i, S) => i+1) 
```

需要两次，但它是一个很好的衬里。如果未找到“关闭”，它将返回

```
headers.size 
```

另一个（更好）是这个：

```
var headers = Source.fromFile(file).getLines().next().split(",").toList
var closeHeaderIdx = headers.indexOf("Close") 
```

# ios - 如何使用滑动手势作为触发器移动 UIScrollView

> ID：12892702
> 
> 赞同：0
> 
> 时间：2012-10-15T09:25:03.070
> 
> 标签：ios, xcode, uiscrollview, uigesturerecognizer

有没有办法使用滑动手势来控制 UIScrollView 中的滚动量。

我想要做的是使用滚动视图作为我整个 UI 的舞台。我想使用滑动动作触发将我的“舞台”从一侧移动到另一侧固定距离。您可以将其视为某种窗口，一次只能看到整个 UI 的一部分，我想在用户交互时移动可见区域。

我遇到的问题是我所做的小测试甚至无法正常启动并以黑屏退出并且没有特定的错误消息。

任何帮助是极大的赞赏。谢谢蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:32:02.760

尝试将实例的`pagingEnabled`属性设置为.`UIScrollView``YES`

从 iOS 5 开始，您还可以在您的实现中`UIScrollViewDelegate`实现以下方法：（请`scrollViewWillEndDragging:withVelocity:targetContentOffset:`确保在这种情况下`pagingEnabled`设置为`NO`，否则不会调用该方法）。

# macos - 沙盒 TideSDK 应用程序

> ID：12892703
> 
> 赞同：1
> 
> 时间：2012-10-15T09:25:05.533
> 
> 标签：macos, app-store, appstore-sandbox, tidesdk

我尝试使用 TideSDK 1.2.0.RC6e 将应用程序提交到 App Store。但是在使用权利签署代码之后

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.security.temporary-exception.apple-events</key>
    <true/>
    <key>com.apple.security.temporary-exception.mach-lookup.global-name</key>
    <true/>
    <key>com.apple.security.temporary-exception.files.absolute-path.read-write</key>
    <true/>
    <!-- Activates the sandbox, required. -->
    <key>com.apple.security.app-sandbox</key>
    <true/>
    <!-- Allow your application read/write access to the user downloads folder -->
    <key>com.apple.security.files.downloads.read-write</key>
    <true/>
    <!-- Allow your application read/write access to the file selected by the user. -->
    <key>com.apple.security.files.user-selected.read-write</key>
    <true/>
    <!-- Allow your application to initiate network requests -->
    <key>com.apple.security.network.client</key>
    <true/>
    <!-- Allow your application to listen for network requests -->
    <key>com.apple.security.network.server</key>
    <true/>
    <!-- Allow your application to use the printer -->
    <key>com.apple.security.print</key>
    <true/>
</dict> 
```

应用程序崩溃并报告

```
Callnote Premium(2618) deny forbidden-sandbox-reinit

Process:         Callnote Premium [2618]
Path:            /Users/administrator/Projects/CallnoteMakeup/dist/Callnote Premium.app/Contents/MacOS/Callnote Premium
Load Address:    0x1000
Identifier:      callnote-pro
Version:         2.0.4 (2.0.4)
Code Type:       i386 (Native)
Parent Process:  launchd [121]

Date/Time:       2012-10-15 13:19:04.024 +0400
OS Version:      Mac OS X 10.8.2 (12C54)
Report Version:  8

Thread 0:
0   libsystem_kernel.dylib          0x934c561e __mac_syscall + 10
1   libdispatch.dylib               0x96cbdbf1 dispatch_once_f + 57
2   libxpc.dylib                    0x90121641 _xpc_runtime_set_domain + 218
3   libxpc.dylib                    0x90120a39 _libxpc_initializer + 529
4   libSystem.B.dylib               0x916dac30 libSystem_initializer + 152
5   dyld                            0x8fe99cda ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) + 230
6   dyld                            0x8fe99fde ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) + 64
7   dyld                            0x8fe96268 ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) + 356
8   dyld                            0x8fe961cc ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) + 200
9   dyld                            0x8fe961cc ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) + 200
10  dyld                            0x8fe960ba ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) + 62
11  dyld                            0x8fe87e05 dyld::initializeMainExecutable() + 211
12  dyld                            0x8fe8badb dyld::_main(macho_header const*, unsigned long, int, char const**, char const**, char const**, unsigned long*) + 3050
13  dyld                            0x8fe87376 dyldbootstrap::start(macho_header const*, int, char const**, long, macho_header const*, unsigned long*) + 704
14  dyld                            0x8fe87077 _dyld_start + 71

Binary Images:
    0x8fe86000 -         0x8feb8e57  dyld (210.2.3) <23516BE4-29BE-350C-91C9-F36E7999F0F1> /usr/lib/dyld
    0x9011c000 -         0x90139fff  libxpc.dylib (140.41) <1BFE3149-C242-3A77-9729-B00DEDC8CCF2> /usr/lib/system/libxpc.dylib
    0x916da000 -         0x916dafff  libSystem.B.dylib (169.3) <81C58EAB-0E76-3EAB-BDFD-C5A6FE95536F> /usr/lib/libSystem.B.dylib
    0x934b1000 -         0x934cbffc  libsystem_kernel.dylib (2050.18.24) <C17D49D0-7961-3B67-B443-C788C6E5AA76> /usr/lib/system/libsystem_kernel.dylib
    0x96cbc000 -         0x96cceff7  libdispatch.dylib (228.23) <86EF7D45-2D97-3465-A449-95038AE5DABA> /usr/lib/system/libdispatch.dylib 
```

是否有可能将 TideSDK 应用程序提交到 App Store？

# mysql - Eclipse、Tomcat、spring框架应用设置问题

> ID：12892704
> 
> 赞同：0
> 
> 时间：2012-10-15T09:25:08.023
> 
> 标签：mysql, eclipse, tomcat, ubuntu, spring-mvc

我正在尝试在 Eclipse 上设置一个项目，但它在控制台上给了我这些异常，并在浏览器内给出了空白输出。

我想为这个项目贡献代码，但我不知道如何让它工作。我做了我应该做的一切，但它不起作用。我检查了jdbc连接，tomcat7安装，mysql安装。所有这些似乎都工作正常。

有人告诉我，这个项目在 Windows 7 机器上运行良好。

我正在使用 Ubuntu 12.04、MySql 5.5.24、Eclipse Juno、Tomcat 7

请向我提供一些有关例外情况的信息，或者我所缺少的信息。谢谢你。

> 2012 年 10 月 15 日下午 2:53:12 org.apache.tomcat.util.digester.SetPropertiesRule 开始警告：[SetPropertiesRule]{Server/Service/Engine/Host/Context} 将属性 'source' 设置为 'org.eclipse.jst .j2ee.server:cmsadmin' 没有找到匹配的属性。2012 年 10 月 15 日下午 2:53:12 org.apache.tomcat.util.digester.SetPropertiesRule 开始警告：[SetPropertiesRule]{Server/Service/Engine/Host/Context} 将属性 'source' 设置为 'org.eclipse.jst .jee.server:sites' 没有找到匹配的属性。2012 年 10 月 15 日下午 2:53:12 org.apache.coyote.AbstractProtocol 初始化信息：初始化 ProtocolHandler [“http-bio-8080”] 2012 年 10 月 15 日下午 2:53:12 org.apache.catalina.startup.Catalina加载信息：2012 年 10 月 15 日下午 2:53:12 org.apache.catalina.core 在 858 毫秒内处理了初始化。StandardService startInternal INFO：启动服务 Catalina 2012 年 10 月 15 日下午 2:53:12 org.apache.catalina.core.StandardEngine startInternal INFO：启动 Servlet 引擎：Apache Tomcat/7.0.26 2012 年 10 月 15 日下午 2:53:12 org .apache.catalina.loader.WebappClassLoader validateJarFile 信息：validateJarFile(/home/nuketro0p3r/Documents/Eclipse Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/sites/WEB-INF/lib /servlet-api.jar) - jar 未加载。请参阅 Servlet 规范 2.3，第 9.7.2 节。违规类：javax/servlet/Servlet.class 2012 年 10 月 15 日下午 2:53:13 org.apache.catalina.core.ApplicationContext 日志信息：初始化 Spring 根 WebApplicationContext log4j:WARN 找不到记录器的附加程序（org.springframework .web.context.ContextLoader）。log4j:WARN 请正确初始化 log4j 系统。日志4j： [http://logging.apache.org/log4j/1.2/faq.html#noconfig](http://logging.apache.org/log4j/1.2/faq.html#noconfig)了解更多信息。2012 年 10 月 15 日下午 2:53:17 org.apache.catalina.core.StandardContext listenerStart 严重：向 org.springframework.web.context.ContextLoaderListener org.springframework.beans.factory.BeanCreationException 类的侦听器实例发送上下文初始化事件的异常: 在类路径资源 [config/spring/spring-service-context.xml] 中定义名称为“groupService”的 bean 创建错误：在设置构造函数参数时无法解析对 bean 'groupDao' 的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建类路径资源 [config/spring/spring-security-hibernate.xml] 中定义的名称为“groupDao”的 bean 时出错：设置时无法解析对 bean“cmsSecuritySessionFactory”的引用bean 属性 'sessionFactory'; 嵌套异常是 org.springframework.beans.factory.BeanCreationException：在类路径资源 [config/spring/spring-security-hibernate.xml] 中定义名称为“cmsSecuritySessionFactory”的 bean 创建错误：调用 init 方法失败；嵌套异常是 org.hibernate.HibernateException：当 org.springframework.beans.factory 的 org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) 上没有可用连接时，必须设置“hibernate.dialect” .support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106) 在 org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:630) 在 org.springframework.beans.factory.support。ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:679) 原因：org.springframework.beans.factory.BeanCreationException：创建名称为“groupDao”的bean时定义在类路径资源 [config/spring/spring-security-hibernate.xml]：在设置 bean 属性“sessionFactory”时无法解析对 bean“cmsSecuritySessionFactory”的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在类路径资源 [config/spring/spring-security-hibernate.xml] 中定义名称为“cmsSecuritySessionFactory”的 bean 创建错误：调用 init 方法失败；嵌套异常是 org.hibernate.HibernateException：当 org.springframework.beans 上没有可用的连接时，必须设置“hibernate.dialect”。factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean (AbstractBeanFactory.java:290) 在 org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192) 在 org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)。 .. 还有 27 个原因：org.springframework.beans.factory.BeanCreationException：在类路径资源 [config/spring/spring-security-hibernate.xml] 中定义名称为“cmsSecuritySessionFactory”的 bean 创建错误：调用 init 方法失败；嵌套异常是 org. StandardContext startInternal SEVERE：Context [] 由于先前的错误而启动失败 2012 年 10 月 15 日下午 2:53:17 org.apache.catalina.core.ApplicationContext 日志信息：关闭 Spring 根 WebApplicationContext 2012 年 10 月 15 日下午 2:53:17 org .apache.catalina.loader.WebappClassLoader clearReferencesJdbc 严重：Web 应用程序 [] 注册了 JDBC 驱动程序 [com.mysql.jdbc.Driver] 但在 Web 应用程序停止时未能取消注册。为防止内存泄漏，已强制注销 JDBC 驱动程序。2012 年 10 月 15 日下午 2:53:18 org.apache.catalina.loader.WebappClassLoader validateJarFile 信息：validateJarFile(/home/nuketro0p3r/Documents/Eclipse Workspace/.metadata/.plugins/org.eclipse.wst.server.core/ tmp1/wtpwebapps/cmsadmin/WEB-INF/lib/servlet-api.jar) - jar 未加载。请参阅 Servlet 规范 2.3，第 9.7.2 节。违规类：javax/servlet/Servlet.class 2012 年 10 月 15 日下午 2:53:18 org.apache.catalina.core.ApplicationContext 日志信息：初始化 Spring 根 WebApplicationContext log4j:WARN 找不到记录器的附加程序（org.springframework .web.context.ContextLoader）。log4j:WARN 请正确初始化 log4j 系统。log4j:WARN 见 [http://logging.apache.org/log4j/1.2/faq.html#noconfig](http://logging.apache.org/log4j/1.2/faq.html#noconfig)了解更多信息。2012 年 10 月 15 日下午 2:53:22 org.apache.catalina.core.StandardContext listenerStart 严重：向 org.springframework.web.context.ContextLoaderListener org.springframework.beans.factory.BeanCreationException 类的侦听器实例发送上下文初始化事件的异常: 在类路径资源 [config/spring/spring-service-context.xml] 中定义名称为“groupService”的 bean 创建错误：在设置构造函数参数时无法解析对 bean 'groupDao' 的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建类路径资源 [config/spring/spring-security-hibernate.xml] 中定义的名称为“groupDao”的 bean 时出错：设置时无法解析对 bean“cmsSecuritySessionFactory”的引用bean 属性 'sessionFactory'; 嵌套异常是 org.springframework.beans.factory.BeanCreationException：在类路径资源 [config/spring/spring-security-hibernate.xml] 中定义名称为“cmsSecuritySessionFactory”的 bean 创建错误：调用 init 方法失败；嵌套异常是 org.hibernate.HibernateException：当 org.springframework.beans.factory 的 org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) 上没有可用连接时，必须设置“hibernate.dialect” .support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106) 在 org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:630) 在 org.springframework.beans.factory.support。ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:679) 原因：org.springframework.beans.factory.BeanCreationException：创建名称为“groupDao”的bean时定义在类路径资源 [config/spring/spring-security-hibernate.xml]：在设置 bean 属性“sessionFactory”时无法解析对 bean“cmsSecuritySessionFactory”的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在类路径资源 [config/spring/spring-security-hibernate.xml] 中定义名称为“cmsSecuritySessionFactory”的 bean 创建错误：调用 init 方法失败；嵌套异常是 org.hibernate.HibernateException：当 org.springframework.beans 上没有可用的连接时，必须设置“hibernate.dialect”。factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean (AbstractBeanFactory.java:290) 在 org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192) 在 org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)。 .. 还有 27 个原因：org.springframework.beans.factory.BeanCreationException：在类路径资源 [config/spring/spring-security-hibernate.xml] 中定义名称为“cmsSecuritySessionFactory”的 bean 创建错误：调用 init 方法失败；嵌套异常是 org. StandardContext startInternal SEVERE：Context [/cms] 由于先前的错误而启动失败 2012 年 10 月 15 日下午 2:53:22 org.apache.catalina.core.ApplicationContext 日志信息：关闭 Spring 根 WebApplicationContext 2012 年 10 月 15 日 2:53:22 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc 严重：Web 应用程序 [/cms] 注册了 JDBC 驱动程序 [com.mysql.jdbc.Driver] 但在 Web 应用程序停止时未能取消注册。为防止内存泄漏，已强制注销 JDBC 驱动程序。2012 年 10 月 15 日下午 2:53:22 org.apache.catalina.startup.HostConfig deployDirectory 信息：部署 Web 应用程序目录 /home/nuketro0p3r/Documents/Eclipse Workspace/contento3/lib 2012 年 10 月 15 日下午 2:53:24 .apache.catalina.startup.HostConfig 部署目录信息：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:09:03.037

> 2012 年 10 月 15 日下午 2:53:12 org.apache.tomcat.util.digester.SetPropertiesRule 开始警告：[SetPropertiesRule]{Server/Service/Engine/Host/Context} 将属性 'source' 设置为 'org.eclipse.jst .j2ee.server:cmsadmin' 没有找到匹配的属性。

Eclipse 将“源”属性添加到 server.xml 中的元素。没关系，它不应该在 server.xml 中……Tomcat 无法识别该属性，因此您会收到警告。

> 2012 年 10 月 15 日下午 2:53:17 org.apache.catalina.core.StandardContext listenerStart 严重：向 org.springframework.web.context.ContextLoaderListener org.springframework.beans.factory.BeanCreationException 类的侦听器实例发送上下文初始化事件的异常: 在类路径资源 [config/spring/spring-service-context.xml] 中定义名称为“groupService”的 bean 创建错误：在设置构造函数参数时无法解析对 bean 'groupDao' 的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建类路径资源 [config/spring/spring-security-hibernate.xml] 中定义的名称为“groupDao”的 bean 时出错：设置时无法解析对 bean“cmsSecuritySessionFactory”的引用bean 属性 'sessionFactory'; 嵌套异常是 org.springframework。beans.factory.BeanCreationException：在类路径资源 [config/spring/spring-security-hibernate.xml] 中定义名称为“cmsSecuritySessionFactory”的 bean 创建错误：调用 init 方法失败；嵌套异常是 org.hibernate.HibernateException：当 [...] 没有可用的连接时，必须设置“hibernate.dialect”

所以，显然这是一个 Spring/Hibernate 问题。我怀疑还有其他您尚未发布的错误，在这里...可能无法加载您的 JDBC 驱动程序之类的东西。或者，也许您真的没有`hibernate.dialect`设置，因此 Hibernate 无法正确配置自己。

# rsa - 可以使用 BouncyCastle 以 PEM 格式而不是 DER 格式导出公钥吗？

> ID：12892705
> 
> 赞同：2
> 
> 时间：2012-10-15T09:25:14.393
> 
> 标签：rsa, bouncycastle, pem, der

我目前使用 bouncy castle 生成 RSA 密钥对并将它们导出到文件中。目前，密钥以 DER 格式导出。我想知道是否可以将它们导出为 .PEM 格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:54:45.923

根据您的代码（您没有显示），只需使用[PemWriter](http://www.bouncycastle.org/docs/pkixdocs1.5on/org/bouncycastle/openssl/PEMWriter.html%20PEMWriter)。

```
public class PEMWriter
extends org.bouncycastle.util.io.pem.PemWriter 
```

或在外面转换

```
 openssl x509 inform=DER in=in.der outform=PEM out=out.pem 
```

# jquery - 在jquery mobile中删除li时如何删除list-divider

> ID：12892706
> 
> 赞同：0
> 
> 时间：2012-10-15T09:25:13.760
> 
> 标签：jquery, listview, jquery-mobile

我有一组组列表（li）。如果我要删除组中的所有“li”，我也想删除该列表分隔符。我的意思是如果列表分隔符后面有 3 个“li”，当我一个一个删除“li”时，最后当我删除最后一个“li”时。我也想删除那个列表分隔符。

现场小提琴示例：http: [//jsfiddle.net/69cqA/15/](http://jsfiddle.net/69cqA/15/)

在上面的示例中，当我删除 groupBdel_“li”时，我有 3 个组。我也想删除 groupB 的列表分隔符。

就像当我删除 groupAdel_ 中的所有“li”时，我想删除列表分隔符“groupA”

请给我一个解决方案，用 li 删除列表分隔符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:34:13.420

我已经更新了你的小提琴以达到你的结果

[http://jsfiddle.net/69cqA/34/](http://jsfiddle.net/69cqA/34/)

# android - 计算路径崩溃的边界

> ID：12892711
> 
> 赞同：2
> 
> 时间：2012-10-15T09:25:24.080
> 
> 标签：android, path, contains, point, bounds

我已经关闭了由许多 Bezier 段组成的 Path-s。这些贝塞尔线段的整数坐标最大为 5000,5000。我需要计算一个点是否在这些封闭路径之一内。我使用这段代码：

```
// p is a Path, bounds is a RectF
p.computeBounds(bounds, true);
Region region = new android.graphics.Region();
region.setPath(path, new android.graphics.Region((int)bounds.left, (int)bounds.top, (int)bounds.right, (int)bounds.bottom)); 
```

我按路径执行一次，然后执行

```
region.contains(x, y); 
```

问题是，computeBounds 使我的大路径的应用程序崩溃。没有强制关闭，它只是接收到 SIGSEGV 并返回主屏幕，没有任何消息。我试图将坐标缩小到更小的数字（除以 1000），但它没有帮助，程序仍然崩溃。

有没有其他方法可以计算一个点是否在一个复杂的路径内，它不会崩溃？

**编辑** 有没有办法用 RenderScript 计算这个？我找不到任何带有路径/贝塞尔曲线的 RenderScript 示例...

**编辑 2** 这发生在带有 4.1.1 和 4.1.2 的 Nexus 7 以及 ICS x86 平板电脑模拟器中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:23:58.943

通常Java代码会导致异常而不是分段错误，这意味着Java虚拟机有问题，除非您的项目中有自己的JNI代码并且导致分段错误。

您可以使用足够大的剪辑矩形将所有可能的路径绑定为剪辑区域，而不是计算路径的边界，这对于您的复杂路径来说似乎过于昂贵的操作，这样您就可以避免调用繁重和不必要的 Path.computeBounds。

```
import android.graphics.Region;
import android.graphics.Path;
import android.graphics.RectF;
import android.graphics.Rect;

private static final String id = "Graphics";

...

Path path = new Path();
/* Initialize path here... */

/* Huge rectangle to bound all possible paths */
Region clip = new Region(0, 0, 10000, 10000);

/* Define the region */
Region region = new Region();
if (region.setPath(path, clip)) {
    Log.d(id, "This region is fine");
} else {
    Log.e(id, "This region is empty");
} 
```

# javascript - 在 node.js 中“request.on”这个“.on”是什么

> ID：12892717
> 
> 赞同：27
> 
> 时间：2012-10-15T09:25:45.443
> 
> 标签：javascript, node.js

我是 node.js 和 java 脚本的新手，我找不到这个“.on”关键字的含义。当我用另一个字代码更改它时失败了。

```
var req = http.get("http://www.google.com", function(res) {
  console.log("Got response: " + res.statusCode);

 res.on('data', function (chunk) {
});

}).on('error', function(e) {
console.log("Got error: " + e.message);
 }); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-15T16:49:27.070

**on**方法将事件**绑定**到对象。

**如果**发生某些事情（数据发送或错误），这是一种表达您的意图的方式，**然后**执行作为参数添加的函数。这种编程风格称为**事件驱动编程**。[您可能想在维基百科](http://en.wikipedia.org/wiki/Event-driven_programming)中查找它

在 node.js 中，有一个名为**EventEmitter**的类，如果您决定在自己的代码中使用它们，它会为您提供基本事件所需的所有代码（我强烈建议在 node.js 的情况下使用它们）。node.js **EventEmitter**的文档在[这里](http://nodejs.org/api/events.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-15T09:30:56.487

**[.on](http://nodejs.org/docs/latest/api/events.html#events_emitter_on_event_listener)**是一种用于绑定事件处理程序的方法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-17T17:28:46.600

[http.get](https://nodejs.org/api/http.html#http_http_get_options_callback)的回调使用单个参数（您已命名`req`）调用。`req`是“请求”的缩写，是一个通用名称，因为此参数是一个[http.ClientRequest](https://nodejs.org/api/http.html#http_class_http_clientrequest)对象。http.ClientRequest 对象实现[了 stream.Writable](https://nodejs.org/api/stream.html#stream_class_stream_writable)，这是重要的一点：所有流都是[EventEmitter](https://nodejs.org/api/events.html#events_class_eventemitter)的实例。

EventEmitter 有一个名为[on](https://nodejs.org/docs/latest/api/events.html#events_emitter_on_eventname_listener)的函数，它为指定的事件添加一个监听函数。

> “监听函数”只是“回调函数”的别称

在您的示例中，您为`data`事件和`error`事件添加了一个侦听器。监听器函数由 EventEmitter*调用（因此称为“回调”）。*

**额外学分**

如果您需要一个侦听器来停止侦听（即，您不再希望调用您的回调），您可以使用[emitter.removeListener](https://nodejs.org/docs/latest/api/events.html#events_emitter_removelistener_eventname_listener)函数删除一个侦听器：

```
var myCallback = function(e) { console.log('Got error: ' + e.message); }
res.on('error', myCallback);
// do some things...
res.removeListener('error', myCallback); 
```

如果你只想让一个监听器运行一次，你可以使用[emitter.once](https://nodejs.org/docs/latest/api/events.html#events_emitter_once_eventname_listener)代替`on`函数，然后你就不必删除它：

```
res.once('error', myCallback); 
```

# java - 不断收到预期的错误类、接口或枚举

> ID：12892718
> 
> 赞同：0
> 
> 时间：2012-10-15T09:25:48.413
> 
> 标签：java, class, enums, interface, compiler-errors

我看不出这堂短课有什么问题。我得到 8 个类、接口或枚举预期错误。谢谢

```
public class BankAccount {
public BankAccount {
    private double balance = 0;
}
public BankAccount(double balanceIn) {
    private double balance = balanceIn;
}

public double checkBalance {
    return balance;
}

public void deposit(double amount) {
    if(amount > 0) balance += amount;
}

public void withdraw(double amount) {
    if(amount <= balance) balance -= amount;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:27:26.287

您在构造函数中声明了一个修饰符和字段。把它放在ctor外面

```
public BankAccount(double balanceIn) {
    private double balance = 0;
} 
```

应该

```
public class BankAccount
{
    private double balance = 0;
    public BankAccount(){}
}

public BankAccount {
    private double balance = 0;
} 
```

也是错误的..它不是您缺少 () 并删除的构造函数

```
private double balance = 0; 
```

# asp.net-web-api - 内存测试中的 WebAPI - 获取错误序列化 IQueryable

> ID：12892720
> 
> 赞同：3
> 
> 时间：2012-10-15T09:25:53.037
> 
> 标签：asp.net-web-api

我有这样的方法的 WebAPI 实现：

```
 public IEnumerable<Device> GetAllDevices()
 public Device GetDeviceById(int id) 
```

看起来不错，在 IIS 或自托管中运行时它可以工作。正确返回 JSON 对象。

但是，第一种方法在我尝试使用内存服务器的单元测试中失败。

```
 System.InvalidOperationException : Cannot create and populate list type System.Linq.IQueryable`1[Test.Device]. 
```

这归结为 Newtonsoft.Json.Serialization 程序集。测试示例如下：

```
 [Test]
    public void GET_AskingForListOfDevices_GettingOk200WithListOfDevicesInJSON()
    {
        var client = new HttpClient(InMemoryServer);
        HttpRequestMessage request = CreateRequest("api/devices", "application/json", HttpMethod.Get);

        using (HttpResponseMessage response = client.SendAsync(request).Result)
        {
            Assert.That(response.StatusCode, Is.EqualTo(HttpStatusCode.OK));
            Assert.NotNull(response.Content);
            Assert.AreEqual("application/json", response.Content.Headers.ContentType.MediaType);

            // next line throws exc
            var content = response.Content.ReadAsAsync<IQueryable<Device>>().Result;

            Assert.AreEqual(3, content.Count());
        }

        request.Dispose();
    } 
```

知道在哪里看吗？

更新
下面的示例引发了该错误，但是我找到了避免它的解决方案。只需使用 IList<> 而不是 IQueryable<>。仍然它没有回答我为什么它在 Fiddler 中工作的问题。它使用相同的技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:24:37.590

我遇到了同样的情况。IQueryable 引发异常，但如果您使用 IEnumerable 则它可以工作。

# css - 如何样式化 CSS 角色

> ID：12892726
> 
> 赞同：142
> 
> 时间：2012-10-15T09:25:58.213
> 
> 标签：css

在以下 HTML

```
<div id="content" role="main"> 
```

id 可以通过`#content`CSS 访问。我如何访问`role="main"`.

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-10-15T09:27:28.683

使用 CSS 属性选择器：

[https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors](https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors)

例如：

```
div[role=main] 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-15T09:27:46.763

像这样访问它应该可以工作：`#content[role="main"]`

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-05-26T08:52:51.007

编写访问该特定 div 的选择器的最短方法是简单地使用

```
[role=main] {
  /* CSS goes here */
} 
```

前面的答案没有错，但它们依赖于您使用 div 或使用特定 id。使用此选择器，您将能够拥有各种疯狂的标记，并且它仍然可以工作，并且您可以避免特异性问题。

```
[role=main] {
  background: rgba(48, 96, 144, 0.2);
}
div,
span {
  padding: 5px;
  margin: 5px;
  display: inline-block;
}
```

```
<div id="content" role="main">
  <span role="main">Hello</span>
</div>
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-10-15T09:28:27.870

当然你可以在这种模式下做：

```
 #content[role="main"]{
       //style
    } 
```

[http://www.w3.org/TR/selectors/#attribute-selectors](http://www.w3.org/TR/selectors/#attribute-selectors)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-04-26T14:48:09.380

我们可以用

```
 element[role="ourRole"] {
    requried style !important; /*for overriding the old css styles */
    } 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-10-15T09:29:12.990

关注此线程以获取更多信息

[CSS 属性选择器：如果自定义属性具有值，则应用类？另外，它可以在IE7+中工作吗？](https://stackoverflow.com/questions/6416369/css-attribute-selector-apply-class-if-custom-attribute-has-value-also-will-it)

并学习 css 属性选择器

[http://www.w3schools.com/css/css_attribute_selectors.asp](http://www.w3schools.com/css/css_attribute_selectors.asp)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-15T09:33:44.393

请用 ：

```
 #content[role=main]{
   your style here
} 
```

# c++ - 试图标记一个字符串

> ID：12892728
> 
> 赞同：0
> 
> 时间：2012-10-15T09:26:04.020
> 
> 标签：c++, tokenize, end-of-line

> **可能重复：**
> [如何在 C++ 中标记字符串？](https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c)

我有这个文本文件

```
q1 t q2

q2 e q3

q3 x q4

q4 t q5 q6 q11

q5 | q6 q11 
```

我想提取由空格分隔的每个元素。例如，在第一行中，我希望能够将“q1”“t”和“q2”提取为单独的标记。

我在想有两种方法可以解决这个问题

1.  使用 ifstream>> 从文件中逐个令牌读取。我用这种方法遇到的问题是我不知道如何判断何时到达行尾，以便我可以移动到下一行。

2.  另一种方法是使用 getline() 一次获取整行；这种方法的问题是我必须自己标记字符串，而且每一行都不同，所以我不确定这是最好的主意。我很震惊，没有内置的方法可以做到这一点，除了 strtok() 看起来根本不是我想要的。谢谢大家任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:30:14.447

使用`getline`, 和 对结果字符串进行标记，将其放入 a`std::stringstream`并从中提取标记。

```
std::string line_string;
while ( getline( file, line_string ) ) {
    std::istringstream line( line_string );
    std::string token;
    while ( line >> token ) {
        do something with token
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:32:20.010

如果您只想使用标准库，您可以使用，`getline`然后逐字使用。`stringstream``ifstream>>`

否则，C++ 在文本处理方面确实非常有限，您可以使用 Qt 的[字符串](http://qt-project.org/doc/qt-4.8/qstring.html)和流，或者来自 boost（包括 split）的[字符串算法，它们与 STL 字符串很好地集成在一起。](http://www.boost.org/doc/libs/1_51_0/doc/html/string_algo.html)

# android - 使用 Tastypie 实现移动应用程序的身份验证方案

> ID：12892742
> 
> 赞同：4
> 
> 时间：2012-10-15T09:26:49.627
> 
> 标签：android, python, ios, django, tastypie

我想为移动设备创建一个带有身份验证的 REST 服务。这是我第一次做这样的事情，所以我想收到一些关于如何实施的建议。

为此，我需要创建一个注册表单，让用户注册服务。我在这里看不到任何问题，我可以将表单数据发布到服务器并让它返回响应。

如果表单有效，将创建一个新的用户对象并立即登录。还将使用以下方法生成一个 API KEY：

```
from django.contrib.auth.models import User
from django.db import models
from tastypie.models import create_api_key

models.signals.post_save.connect(create_api_key, sender=User) 
```

该请求将返回 301 HTTP 状态并包含一个重定向 URI 以获取 API KEY。

在这一步之后，应用程序将请求另一个 URI（在注册请求的 301 响应中收到的 URI）来访问 API KEY（我将使用 Tastypie 的[ApiKeyAuthentication](http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#apikeyauthentication)方案）。该请求将包含在先前请求响应中收到的会话 cookie，这种查看方式将是安全的，我将能够使用 login_required 装饰器。响应将是带有用户名和 api 密钥的纯 JSON。

这些值将存储在应用程序的某个位置。

现在发出的任何请求都将添加存储在应用程序中的用户名和 API KEY，因此进一步的请求将更加安全。

这看起来像是一个很好的计划吗？设计中有漏洞吗？

# javascript - 如何确定一个点当前位于椭圆路径的哪一半？

> ID：12892743
> 
> 赞同：3
> 
> 时间：2012-10-15T09:26:53.997
> 
> 标签：javascript, math, geometry, physics, kinematics

这是我在 JavaScript 中处理的原子动画的静态帧，以[该图像](http://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/Stylised_Lithium_Atom.svg/220px-Stylised_Lithium_Atom.svg.png)为模型。

![在此处输入图像描述](../Images/32101b788d02849e24bde7722eb2cda4.png)

这是用于根据时间确定电子在其轨道上的位置的代码：

```
// Get position along elliptical path.
var x = Math.cos( this.timer.delta() * this.speed ) * ( this.pathWidth / 2 );
var y = Math.sin( this.timer.delta() * this.speed ) * ( this.pathHeight / 2 ); 
```

我想做的是在路径的橙色部分将电子**放在原子核上方**，在绿色部分将电子放在原子核**下方。**

当 时`this.timer.delta() == 0`，电子位于最右端，然后逆时针移动。

我正在寻求以下两件事的帮助：

1) 找出电子在其轨道最左侧的时间点。

2）确定在任何给定时间内电子当前在哪一半路径上。

理想情况下，无论 的值如何，解决方案都应该起作用`this.speed`（这是用于加速或减慢动画的数字乘数）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:31:46.757

这完全取决于角度 - 角度是您表达中的这一部分：

```
this.timer.delta() * this.speed 
```

因此，您可以简单地确定角度是否在零和 PI 之间 - 如果是 - 原子核在“前面”。

当然，简单地检查 y 是否为非负数也有同样的作用。

# iphone - 添加到联系人在 iPhone 5 上崩溃

> ID：12892747
> 
> 赞同：0
> 
> 时间：2012-10-15T09:27:02.740
> 
> 标签：iphone, ios6, titanium-mobile, appcelerator-mobile

我正在使用 Appcelerator Titan sdk 在 iPhone 5 上保存联系人，我的应用程序在 iOS 5 和 iOS 6 模拟器上运行良好，但是当我在 iPhone 5（物理设备）上运行它并将我的联系人保存到电话簿时它崩溃了。我无法弄清楚问题是什么，因为它在 iPhone 4 和 4s 设备和模拟器上运行良好。

```
 addBtn.addEventListener('click', function(){

    var isContactPresent = 'false';
    var people = Titanium.Contacts.getAllPeople();

    for (var i = 0; i < people.length; i++) {
        Ti.API.info("People object is: "+people[i]);

        var title = people[i].fullName;
        if (!title || title.length === 0) {
            title = "(no name)";
        }

        if (win_3.titleStr === title) {

            Ti.API.info('Address Book ' + title);
            Ti.API.info('Contacts to be added ' + win_3.titleStr);

            isContactPresent = 'true';

            var dialog = Ti.UI.createAlertDialog({
            message: 'Contact has already been added in Address Book',
            ok: 'Ok',
            title: 'Contacts Present'
            }).show();

            break;

        } 
    }

    if(isContactPresent == 'false') {
            SaveContacts();

            var dialog = Ti.UI.createAlertDialog({
            message: 'Contact has been added successfully',
            ok: 'Ok',
            title: 'Contacts Added'
            }).show();
    }

    //alert('Contact has been added successfully');
});

function SaveContacts() {

    Ti.API.info('Win Email ' + win_3.emailStr);
    Ti.API.info('Win Phone ' + win_3.phoneStr);

    var contact_type = "home";

    var contact = Titanium.Contacts.createPerson();

    contact.kind = Titanium.Contacts.CONTACTS_KIND_ORGANIZATION;
    contact_type = "work";
    contact.organization = win_3.titleStr;

    if (win_3.emailStr != ' ' || win_3.emailStr != '') {
        contact.email = {contact_type: [win_3.emailStr]};
    } else {

        win_3.emailStr = ' ';
        win_3.emailStr = 'Testing';
        contact.email = {contact_type: [win_3.emailStr]};
    }

    if (win_3.phoneStr != ' ' || win_3.phoneStr != '') {
        contact.phone = {contact_type: [win_3.phoneStr]};
    } else {

        win_3.phoneStr = ' ';
        win_3.phoneStr = '11231323';
        contact.phone = {contact_type: [win_3.phoneStr]};
    } 

    Titanium.Contacts.save();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:07:47.190

iOs6 需要一些联系人权限才能将联系人添加到地址簿：

[http://docs.appcelerator.com/titanium/release-notes/?version=2.1.3.GA#ios_6](http://docs.appcelerator.com/titanium/release-notes/?version=2.1.3.GA#ios_6)

# c# - c# 数据库连接字符串

> ID：12892760
> 
> 赞同：2
> 
> 时间：2012-10-15T09:27:50.330
> 
> 标签：c#, database, sql-server-ce

我对 c# 还很陌生，现在才开始使用数据库。我在我的项目文件夹中创建了一个本地数据库，当我单击数据库上的属性时，我得到“连接字符串”为：

```
Data Source="C:\Users\Documents\Visual Studio 2012\Projects\DataBaseTest\MyDatabase#1.sdf" 
```

我的问题很简单，如何使用该行创建连接字符串？由于某种原因，写这会产生错误。

```
SqlConnection con = new SqlConnection(Data Source="C:\Users\Documents\Visual Studio
    2012\Projects\DataBaseTest\MyDatabase#1.sdf"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T09:40:43.247

您使用的是 SQL Server Compact 版本数据库，因此您必须使用它`SqlCeConnection`来代替`SqlConnection`（用于 SQL Server）。

您还必须将连接字符串中的反斜杠转义`\`为`\\`：

```
SqlCeConnection sqlConnection = new SqlCeConnection("Data Source=C:\\Users\\Documents\\Visual Studio
2012\\Projects\\DataBaseTest\\MyDatabase#1.sdf"); 
```

或使用逐字字符串：

```
SqlCeConnection sqlConnection = new SqlCeConnection(@"Data Source=C:\Users\Documents\Visual Studio
2012\Projects\DataBaseTest\MyDatabase#1.sdf"); 
```

如果您没有在项目中使用 SqlCe 所需的库，请参阅我的其他[答案](https://stackoverflow.com/a/12157286/162671)：

> 从这里下载库[Microsoft SQL Server Compact 4.0](http://www.microsoft.com/en-us/download/details.aspx?id=17876)
> 
> 1.  添加对**`System.Data.SqlServerCe.dll`**项目的引用
> 2.  添加这个 using 指令**`using System.Data.SqlServerCe`**；
> 3.  使用**`SqlCeConnection`**代替**`SqlConnection`**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T09:31:50.970

您需要转义反斜杠（用双反斜杠替换反斜杠）或在您的字符串前面放一个 @ 以告诉 C# 按字面意思理解它，如下所示：

```
new SqlConnection("C:\\Users\\...") 
```

或者

```
new SqlConnection(@"C:\Users\...") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T09:33:17.577

对于路径，您不能像那样添加反斜杠。您需要转义反斜杠。有两种方法

逃避反斜杠

方法 #1 - 在路径字符串的开头使用 @

```
SqlConnection con = new SqlConnection(@"Data Source=C:\Users\Documents\Visual Studio
    2012\Projects\DataBaseTest\MyDatabase#1.sdf"); 
```

方法 #2 - 添加双反斜杠而不是一个反斜杠

```
SqlConnection con = new SqlConnection("Data Source=C:\\Users\\Documents\\Visual Studio
    2012\\Projects\\DataBaseTest\\MyDatabase#1.sdf"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T09:30:11.803

```
SqlConnection con = new SqlConnection(@"C:\Users\Documents\Visual Studio
    2012\Projects\DataBaseTest\MyDatabase#1.sdf"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-15T09:33:23.333

您需要使用 @ 符号来表明字符串是文字，并忽略特殊字符。

此页面显示示例 [http://www.dotnetperls.com/string-literal](http://www.dotnetperls.com/string-literal)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-09T16:31:50.830

对于 Visual Studio 2012 中的本地数据库，`System.Data.SqlServerCe`需要在代码中导入。我创建了一个控制台应用程序，它将连接到我从解决方案资源管理器选项卡添加的本地数据库，代码看起来像

```
SqlCeConnection con = new SqlCeConnection(@"Data ource=C:\Users\MyComputer\Documents\Visual Studio 2012\Projects\ConsoleApplication4\ConsoleApplication4\Database1.sdf");
            con.Open();

        string sql = "SELECT * FROM Employee";//select query
        string sql1 = "INSERT INTO Employee(Name, Age)VALUES('aaa', 12)";//insert query

                SqlCeCommand cmd = new SqlCeCommand(sql, con);
                SqlCeCommand cmd1 = new SqlCeCommand(sql1, con);
                cmd1.ExecuteScalar(); // executing insert command
                SqlCeDataReader reader = cmd.ExecuteReader();//to read data from table
                while (reader.Read())
                {
                    Console.WriteLine(String.Format("{0}, {1}", reader[0],reader[1]));
                }
               con.Close(); 
```

# windows - 捏缩放 - 获取触摸坐标

> ID：12892762
> 
> 赞同：5
> 
> 时间：2012-10-15T09:27:55.910
> 
> 标签：windows, winjs

我正在使用 WinJS 开发一个 Windows 8 应用程序。我正在尝试获取捏合和缩放的触摸坐标。我已经通过 Windows.UI.Input.GestureRecognizer 实现了手势操作处理程序。当“manipulationupdated”事件时，我触发了我的捏合和缩放逻辑，event.delta.scale 不是 1。当“manipulationupdated”事件对象内部发生操作时，我发现只有 1 个位置的坐标。如何根据这些信息计算两个手指触摸坐标？

另外我怎么知道该位置属于哪个触摸坐标？我发现该位置在事件对象内重复多次 - 在 event.position 和 event.detail[0].position

我想要实现的是在图表中执行捏合和缩放（很像地图）。请帮我解决这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:49:09.410

public class PZBehavior : Behavior {

```
 bool _isDragging;
    bool _isPinching;
    Point _ptPinchPositionStart;

    private Image _imgZoom;
    private ScaleTransform _scaleTransform;
    private RotateTransform _rotateTransform;
    private TranslateTransform _translateTransform;
    private MatrixTransform _previousTransform;

    private TransformGroup _parentGroup;
    private TransformGroup _currentTransform;

    protected override void OnAttached()
    {
        _imgZoom = AssociatedObject;
        _imgZoom.RenderTransform = BuildTrasnformGroup();
        var listener = GestureService.GetGestureListener(AssociatedObject);
        listener.DragStarted += DragStarted;
        listener.DragDelta += DragDelta;
        listener.DragCompleted += DragCompleted;
        listener.PinchStarted += PinchStarted;
        listener.PinchDelta += PinchDelta;
        listener.PinchCompleted += PinchCompleted;
    }

    private TransformGroup BuildTrasnformGroup()
    {
        _parentGroup = new TransformGroup();
        _currentTransform = new TransformGroup();

        _previousTransform = new MatrixTransform();

        _scaleTransform = new ScaleTransform();
        _rotateTransform = new RotateTransform();
        _translateTransform = new TranslateTransform();

        _currentTransform.Children.Add(_scaleTransform);
        _currentTransform.Children.Add(_rotateTransform);
        _currentTransform.Children.Add(_translateTransform);

        _parentGroup.Children.Add(_previousTransform);
        _parentGroup.Children.Add(_currentTransform);

        return _parentGroup;

    }

    void PinchCompleted(object sender, PinchGestureEventArgs e)
    {
        if (_isPinching)
        {
            TransferTransforms();
            _isPinching = false;
        }
    }

    void PinchDelta(object sender, PinchGestureEventArgs e)
    {
        if (_isPinching)
        {
            // Set scaling
            _scaleTransform.ScaleX = e.DistanceRatio;
            _scaleTransform.ScaleY = e.DistanceRatio;

            // Optionally set rotation

            _rotateTransform.Angle = e.TotalAngleDelta;

            // Set translation
            Point ptPinchPosition = new Point(0,0);
            _translateTransform.X = ptPinchPosition.X - _ptPinchPositionStart.X;
            _translateTransform.Y = ptPinchPosition.Y - _ptPinchPositionStart.Y;
        }
    }

    void PinchStarted(object sender, PinchStartedGestureEventArgs e)
    {
        _isPinching = e.OriginalSource == _imgZoom;

        if (_isPinching)
        {
            // Set transform centers
            Point ptPinchCenter = e.GetPosition(_imgZoom);
            ptPinchCenter = _previousTransform.Transform(ptPinchCenter);

            _scaleTransform.CenterX = ptPinchCenter.X;
            _scaleTransform.CenterY = ptPinchCenter.Y;

            _rotateTransform.CenterX = ptPinchCenter.X;
            _rotateTransform.CenterY = ptPinchCenter.Y;

            _ptPinchPositionStart = new Point(0,0);
        }
    }

    void DragCompleted(object sender, DragCompletedGestureEventArgs e)
    {
        if (_isDragging)
        {
            TransferTransforms();
            _isDragging = false;
        }
    }

    void DragDelta(object sender, DragDeltaGestureEventArgs e)
    {
        if (_isDragging)
        {
            _translateTransform.X += e.HorizontalChange;
            _translateTransform.Y += e.VerticalChange;
        }
    }

    void DragStarted(object sender, DragStartedGestureEventArgs e)
    {
        _isDragging = e.OriginalSource == _imgZoom;

    }

    void TransferTransforms()
    {
        _previousTransform.Matrix = Multiply(_previousTransform.Matrix, _currentTransform.Value);

        // Set current transforms to default values
        _scaleTransform.ScaleX = _scaleTransform.ScaleY = 1;
        _scaleTransform.CenterX = _scaleTransform.CenterY = 0;

        _rotateTransform.Angle = 0;
        _rotateTransform.CenterX = _rotateTransform.CenterY = 0;

        _translateTransform.X = _translateTransform.Y = 0;
    }

    Matrix Multiply(Matrix a, Matrix b)
    {
        return new Matrix(a.M11 * b.M11 + a.M12 * b.M21,
                          a.M11 * b.M12 + a.M12 * b.M22,
                          a.M21 * b.M11 + a.M22 * b.M21,
                          a.M21 * b.M12 + a.M22 * b.M22,
                          a.OffsetX * b.M11 + a.OffsetY * b.M21 + b.OffsetX,
                          a.OffsetX * b.M12 + a.OffsetY * b.M22 + b.OffsetY);
    }
} 
```

# visual-studio - ReSharper 6.1 是否适用于 Visual Studio 2012？

> ID：12892764
> 
> 赞同：11
> 
> 时间：2012-10-15T09:28:09.370
> 
> 标签：visual-studio, resharper, visual-studio-2012, resharper-6.1

Resharper 6.1 是否支持 Visual Studio 2012？我让它与 VS2010 一起工作，但想知道我是否需要升级到 ReSharper 7.0 以获得 VS2012 的支持。如果我这样做了，那将是令人失望的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T12:33:12.207

JetBrains[承认，尽管 Resharper 6.1 与 VS 11 集成得很好，但他们错过了安装程序。](http://blogs.jetbrains.com/dotnet/2011/11/resharper-61-eap-for-visual-studio-2011/)这是 关于如何使其与 vs 11 一起使用[的一个很好的分步说明。](http://gurustop.net/blog/2011/11/11/resharper-6-0-resharper-6-1-vs11-visual-studio-11-support-keyboard-shortcuts/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T11:26:06.340

如果在安装 VS2010+ReSharper 之后再安装 VS2012，则后者不会出现在 VS2012 中。

我假设——我还没有测试过——即使你在 VS2012 之后安装 R#，它也不会显示出来，因为 R# 安装程序不提供集成到 VS2012 的选项。

因此，我认为 R# 6.1 与 VS2012 不兼容。

# javascript - 用于 CSV 和 XML 的 IE 的 JQuery 文件上传插件问题

> ID：12892766
> 
> 赞同：3
> 
> 时间：2012-10-15T09:28:14.430
> 
> 标签：javascript, jquery-ui, internet-explorer, jquery-plugins, plugins

我已经在网上查了这个网站，但找不到解决我的问题的方法。

我正在尝试使用 JQuery 文件上传插件，并进行了一些修改以将文件类型限制为 CSV 和 XML，以及仅限于 1 个文件和每个文件最多 5MB。这些新属性运行良好，并且在除 IE 之外的所有浏览器中也运行良好。

我在 fileupload 事件上绑定了一个事件，它将 CSV 呈现为 HTML 表。这适用于除 IE 之外的所有浏览器。在 IE 中，它要么抛出错误，要么冻结，右上角的绿色进度条显示以下信息：

7.123775601068567 比特/秒 | 00:00:00 | 100.00 % | 0.00 KB / 0.00 KB

它实际上看起来像挂起，因为它似乎没有完成上传。当我重新加载同一页面时，它会显示正确的显示！没有进度条！

更新：当我简单地上传 CSV 文件时，代码很好。现在，当我尝试包含回调选项时，问题就出现了。它似乎与我从 'fileuploaddone' 更新的 'fileuploadcompleted' 事件有关，它改进了结果但仍然不正确，并且根本不执行和呈现 HTML 表（例如，请参见上面的链接）

```
// Load existing files:
$('#fileupload').each(function () {
    var that = this;            
    $.getJSON(this.action, function (result) {
        if (result && result.length) {
            $(that).fileupload('option', 'done')
                .call(that, null, {result: result});
        }
    });
}).bind('fileuploadcompleted', function (e, data) {         
    //console.log('fileuploaddone:start');
    var $filename = $('#fileupload td.name').text().trim();
    //console.log('filename is ' + $filename);

$.get('../jQuery-File-Upload/server/php/files/' + $filename, function(data) {
        $('#CSVSource').html('<pre>' + data + '</pre>');
});
$('#CSVTable').CSVToTable('../jQuery-File-Upload/server/php/files/' + $filename,{ 
        loadingImage: 'img/loading-table.gif', 
        startLine: 0 }).bind("loadComplete",function() {//for future use});
    }).bind('fileuploaddestroy', function (e, data) {
        //console.log('fileuploaddestroy');
        $('div#CSVTable').fadeOut(1000);            
    }); 
```

任何想法如何让它在 IE 中工作？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:46:49.260

好的，经过大量挖掘，问题得到了解决，尽管解决方案非常简单，并且已在此处介绍：

[如何处理ie8 jquery object does not support this property or method Error？](https://stackoverflow.com/questions/5173828/how-to-deal-with-ie8-jquery-object-doesnt-support-this-property-or-method-error)

所以基本上在上面的代码中，我应该一直使用 JQuery 版本的 trim，更新如下：

```
var $filename = $.trim($('#fileupload td.name').text()); 
```

以某种奇怪的方式发布问题帮助我解决了这个问题:)

作为旁注：我还注意到，如果您对“上传”网页所在的文件夹有 htaccess 限制，那么您在 IE 中也可以有不同的行为。例如，在设置了访问限制的情况下，尽管上传，但它不会显示实际上传的文件，但上传仍然有效。当您删除文件时，它会要求您登录。

# php - 从 CSV 创建属性作为循环

> ID：12892767
> 
> 赞同：0
> 
> 时间：2012-10-15T09:28:18.213
> 
> 标签：php, magento, while-loop

我正在编写一个脚本来以编程方式创建 Magento 属性，从 CSV 中提取数据。不确定从 CSV 中提取数据的实际循环是否正确 - 希望获得有关逻辑的专家指导？

```
 <?php 
$fh = fopen("attributes.csv", "r");
$i = 0;
while (($l = fgetcsv($fh, 1024, ",")) !== FALSE) {

    $i++;
    if($i == 1) continue; //ignoring the headers, so skip row 0
    $data['label'] = trim($l[2]);
    $data['input'] = trim($l[3]);
    $data['type'] = trim($l[2]);

    //Create the attribute

    $data=array(
'type'=>$data['type'],
'input'=>'text',
'label'=>$data['label'],
'global'=>Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
'is_required'=>'0',
'is_comparable'=>'0',
'is_searchable'=>'0',
'is_unique'=>'1',
'is_configurable'=>'1',
'use_defined'=>'1'
);

$model->addAttribute('catalog_product','test_attribute',$data);

}   

?> 
```

我基本上只是希望它从 CSV 中获取属性数据，并为 CSV 中的每一行运行代码来创建它（使用 CSV 中指定的标签和名称 - 我猜我在循环中遗漏了一些明显的东西？ （只是真正了解我在做什么！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:02:01.027

从 CSV 插入值后，您在每个循环中重置`$data`数组，因此 CSV 内容会丢失。试试这个

```
$fh = fopen("attributes.csv", "r");
$i = 0;
$attributes=array(); //!!
while (($l = fgetcsv($fh, 1024, ",")) !== FALSE) {

    $i++;
    if($i == 1) continue; //ignoring the headers, so skip row 0

    $data=array();

    $data['label'] = trim($l[2]);
    $data['input'] = trim($l[3]);
    $data['type'] = trim($l[2]);

    $data['global']=Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL;
    $data['is_required']='0';
    $data['is_comparable']='0';
    $data['is_searchable']='0';
    $data['is_unique']='1';
    $data['is_configurable']='1';
    $data['use_defined']='1';

    //insert $data to the attributes array
    $attributes[]=$data;
    //or
    $model->addAttribute('catalog_product','test_attribute',$data);
} 
```

# c++ - 转换运算符重载歧义，编译器不同

> ID：12892774
> 
> 赞同：8
> 
> 时间：2012-10-15T09:28:51.663
> 
> 标签：c++, visual-studio, gcc, operators

我在 SO 上看到了其他关于此的问题，但没有一个可以完整地解释它。编译器处理以下两种情况的*正确方法是什么？*我已经使用 gcc 4.7.1（使用 -std=c++0x）、VS2010 和 VS2012 进行了尝试，得到了不同的结果：

**示例 1：**

```
struct BB
{
 // generic cast
 template<typename T>
 operator T() const
 {   
   return 0;
 }

 // string cast
 operator std::string() const
 { 
   return string("hello");
 }
};

int main()
{
  BB b;
  string s = b;
} 
```

输出：

*   gcc 4.7.1：好的
*   VS2010：好的
*   VS2012：失败：“无法从 BB 转换为字符串”

**示例 2：**

```
struct BB
{
 // generic cast
 template<typename T>
 operator T() const
 {   
   return 0;
 }

 // string cast
 operator std::string() const
 { 
   return string("hello");
 }
};

int main()
{
  BB b;
  string s = (string)b; 
```

输出：

*   gcc 4.7.1：失败：重载字符串（BB&）的调用不明确
*   VS2010：好的
*   VS2012：失败：“无法从 BB 转换为字符串”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T09:53:16.933

您使用 C 风格演员表的第二个版本是模棱两可的。问题是有两种方法`static_cast<std::string>`可以将类的实例转换为`BB`字符串。显而易见的路径是使用非模板 std::string 强制转换运算符直接转换为字符串。还有一条更曲折的路，除了VS2010，其他人都找到了。另一种方法是使用模板转换运算符将 a 转换`BB`为字符串的分配器，然后使用此分配器构造一个空字符串。

模板转换运算符是潜在的危险野兽。您刚刚为编译器提供了将 a 转换`BB`为*任何东西*的工具。

您的第一个版本避开了这个问题，因为`std::basic_string(const _Alloc& __a)`它是一个显式构造函数。显式构造函数可以被显式转换使用，但不能被隐式转换使用。正是这个构造函数加上对分配器的转换造成了歧义，并且这个路径不能与隐式转换一起使用。

至于为什么 VS1012 在隐含转换上失败，可能是 VS2012 中的一个错误，也可能是 C++11 创造了更多从 a`BB`到 a 的途径`std::string`。我不是 C++11 专家。我什至不是新手。

还有一项：如果你使用过，你的代码会失败得更惨

```
 std::string s;
 s = b; 
```

赋值运算符与模板转换运算符一起创建了更多从`b`to获取的方法`s`。系统应该转换`b`为 a `std::string`、 a`char`还是 a `char*`？

底线：你真的应该重新考虑你对模板转换运算符的使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:00:39.890

在某些编译器下失败的原因是因为它们会竭尽全力试图弄清楚你在做什么。罪魁祸首是模板化的操作员调用。

正如[这个 SO question](https://stackoverflow.com/questions/1116654/function-template-with-an-operator)所解释的，必须显式调用模板化运算符（`b.operator()<std::string>`如果你想调用`template<typename T> operator();`），但是，没有办法调用你的模板化运算符：

```
b.operator std::string()<std::string>; //invalid
b.operator std::string <std::string>(); //also invalid, string takes no template arguments
// a bunch more weird syntax constructions... 
```

问题出在后面的名称`operator`取决于模板参数，因此无法指定它。gcc 和 VS2012 弄清楚了你在做什么，并注意到它们可以适应模板或明确定义的一个 => 模糊调用的转换。VS2010没有这样做，正在调用其中一个，你可以通过调试找到哪一个。

在这种情况下，模板专业化可能会有所帮助，但是，尝试定义

```
// string cast
template<>
operator std::string() const
{ 
    return string("hello");
} 
```

将失败，因为编译器无法区分该函数和没有`template<>`. 如果原型中有一些参数它会起作用，但`operator typename`确实有任何......

长话短说 - 避免使用模板化转换运算符。

# installshield - 需要使用 installshield 2011 升级在 Installshield 专业版 6.3 中完成的软件包

> ID：12892775
> 
> 赞同：1
> 
> 时间：2012-10-15T09:28:56.053
> 
> 标签：installshield

我有一个 Installshield 项目。

它有一个我们需要打包的应用程序。但目前的挑战是他们使用的是 Installshield 专业版 6.3，并且所有的过程都是通过 installscripts 运行的。此外，只要有一些升级，他们每个月都会使用一些脚本来升级包。这些文件将从服务器复制到该位置并构建。

对于同一个应用程序，现在我们需要添加一些自定义，这不会影响它们之前应用程序的行为。每个月他们都需要升级软件包，而无需通过 GUI 实际重新打包或升级，这应该通过脚本来完成。

我们如何实际处理这种情况。当我们不再支持 Installshield 专业版 6.3 时。

并且该软件包需要在 Windows 95 的所有操作系统中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T18:41:53.623

我看到这个问题已经在这里提出了一段时间，但我会回答它以防万一它对遇到同样问题的人有所帮助。

InstallShield 对升级在以前版本中创建的项目提供了非常强大的支持。您最好的选择是购买最新版本的 InstallShield 并升级 ISM（InstallShield 项目文件）。此过程将创建您以前的安装程序项目的备份。升级应该将项目正确导入为 InstallScript 项目（而不是 MSI 风格的项目）。

完成将 ISM 项目文件从 InstallShield 6.3 升级到最新版本后，您应该能够从 InstallShield IDE 中编辑 InstallScript rul 文件，就像之前使用 InstallShield 6.3 所做的一样

InstallShield IDE 具有支持各种 Windows 操作系统的内置选项。

# http - Web 服务器对高客户端轮询率的容忍度：Cowboy 与 Yaws Web 服务器

> ID：12892777
> 
> 赞同：5
> 
> 时间：2012-10-15T09:29:09.390
> 
> 标签：http, erlang, mnesia, yaws, cowboy

我一直在构建一个实时通知系统。它是 Web 应用程序的一部分，但必须在事件发生时立即查看。长时间轮询不是一种选择，因为当没有可用事件时，Web 服务器保持连接会很昂贵，所以我不得不进行短期轮询。

每个客户端每隔 2 秒访问一次 Web 服务器（这是一个相当高的速率）。当事件可用时，它们将作为 JSON 发送到 JavaScript 客户端。现在，这需要一个服务器设置来处理大量的短期连接。我已经使用 Yaws Web 服务器实现了一个这样的系统。然而，因为 Yaws 启动了许多其他服务，感觉很重，当连接超过 30,000 时，连接开始被拒绝或中止（可能是因为我在 Yaws 运行的同一个 Erlang VM 中运行一些 ETS 表[分离这些可能需要`rpc:call/4`，我担心这会增加延迟]）。我知道有一些特定于操作系统的调整要做，而且已经完成了。

如果集群多个 Yaws 实例很容易，这将不是问题。在 Yaws 中，我使用了一些 appmod，并且我正在以 REST 的方式做事。我在想 Cowboy Web 服务器可能会在这里增强一些东西。我以前没有用过 Cowboy，但我用过 Misultin。看看 Cowboy，它是一个成熟的 OTP 应用程序，它似乎很容易集群，而且是轻量级的，可能会增加整个系统可以处理的客户端数量。存储在 Mnesia 上，我可以轻松地分配它以添加更多节点（可能通过复制），因此每个 Mnesia 实例前面都有一个 Cowboy 实例。

我的问题是：

1.  我的猜测是否正确，如果我从 Yaws 切换到 Cowboy，我可能会显着提高性能？

2.  Yaws 有一个干净的 API via`Appmods`和`#arg{}`记录。Cowboy 是否有这两种东西的等价物（请说明）？

3.  可以`Cowboy`处理文件上传吗？如果是这样，您认为在频繁上传文件的情况下使用哪个服务器（Yaws 或 Cowboy）会更好？说明如何使用 Cowboy 完成文件上传。

4.  可以在同一台机器上运行多个 Yaws 实例。你认为为每台服务器（物理机）创建多个 Yaws 实例并将客户端负载分布在这些实例上会有所帮助吗？我需要知道什么？

5.  当我设置`yaws.conf`参数`max_connections = nolimit`时，如何在 Cowboy 中指定相同的参数？

现在，我关注了[Cowboy 作者的采访，](http://pdincau.wordpress.com/2012/06/27/an-interview-with-erlang-cowboy-loic-hoguin-lhoguin/)他讨论了 Cowboy 比 Yaws 更轻量级的原因。他说

> 最大的区别是使用二进制文件而不是列表。通用受体池是另一个。我可以列出很多其他的小差异，但我认为这些并不是最有趣的。

那是因为 Cowboy 使用了侦听器池库[Ranch](https://github.com/extend/ranch)，它以某种方式最终具有处理更多连接的更高能力，以及使用二进制文件而不是列表。

同一采访中的另一句话：

> 由于我们每个连接使用一个进程而不是两个进程，并且我们使用二进制文件而不是列表，因此在没有用户干预的情况下，我们最终使用的内存比其他项目少得多。牛仔也很懒惰，除非需要，它不会做任何事情。所以在用户开始调用函数之前，我们没有太多内存。

我想知道 yaws 是如何处理这种情况的。不知何故，我的问题域需要轻量级的 HTTP 处理。与 Mochiweb、Misultin 或 Cowboy 相比，Yaws 确实会导致更多的内存消耗。我最担心的是，Yaws 拥有最好/最干净的 API，它使我们能够访问`#arg{}`包含我们需要的所有内容作为 Erlang 记录，这样我们就可以自己将它们取出，而不是其他具有许多用于在外部提取内容的函数的 API。甚至文档：Yaws 文档也非常好且简单明了。也许我需要查看更多的 Cowboy 代码来处理文件上传和简单`GET`请求`POST`处理等问题。

否则，我之前提出的问题仍然是紧迫的问题。Yaws 相当不错，但对于这种快速、轻量级、短命、高率的民意调查情况似乎有点过头了，你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T21:36:08.903

您的 30000 拒绝限制听起来很像某处的 32k 限制。默认进程计数（32k）或文件描述符的某些系统限制等等。您不应该排除限制在内核方面的可能性。由于内核配置非常难以处理，我已经看到系统很容易达到极限。

# java - 使用java中的连接对象检查表是否存在

> ID：12892778
> 
> 赞同：1
> 
> 时间：2012-10-15T09:29:11.087
> 
> 标签：java, sql-server, database, oracle, db2

我需要从我的 java 程序检查数据库中是否存在具有特定“表名”的表。

数据库可能是不同类型的，即。MS SQL Server、甲骨文、DB2。我有一个到数据库的连接对象。是否有一种方法可以适用于所有类型的数据库？我可能必须扩展 java 程序以支持更多的数据库类型，因此对所有数据库类型的单一方法将非常有帮助。

我正在使用的代码。这似乎对 SQL Server 数据库正常工作，但在 Oracle 或 DB2 中找不到表

```
DatabaseMetaData meta = conn.getMetaData(); 
ResultSet res = meta.getTables(null, null, "TABLE_NAME", null); 
if(!res.next()){ 
  //table does not exist. 
} else{
   //table exists. 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:34:20.727

您可以使用[DatabaseMetaData.getTables()](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#getTables%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29)过程在数据库中搜索具有特定模式的表。如果您搜索一个确切的名称，您将得到一个空的`ResultSet`或`ResultSet`带有单行的 a，告诉您该表存在。

无论表是由当前用户还是其他用户拥有，这对我来说都适用于 Oracle 数据库。

```
import java.sql.*;
import oracle.jdbc.*;
public class TableExists
{
 public static String exists(String tableName)
     throws SQLException
 {
    Connection       conn = new OracleDriver().defaultConnection();
    DatabaseMetaData meta = conn.getMetaData(); 
    ResultSet res = meta.getTables(null, null, tableName, null); 
    if(!res.next()){ 
      return "Nope";
    } else{
      return "Yup";
    }
 }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:35:40.590

你可以试试`getTables()`.`DatabaseMetaData`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T09:37:15.573

非常简单：

```
SELECT
    1
FROM
    TABLE
; 
```

如果它抛出异常，则表不存在（或其他错误）。除此以外：

[http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#getTables(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#getTables(java.lang.String) , java.lang.String, java.lang.String, java.lang。细绳[]）

# php - 使用 Ajax 将变量从 PHP 传递到 Javascript 再返回到 PHP

> ID：12892781
> 
> 赞同：1
> 
> 时间：2012-10-15T09:29:13.023
> 
> 标签：php, javascript, jquery, ajax, variables

我有一个包含变量的 PHP 页面，我有一些径向框，单击它们时，它会计算您单击的项目的价格。我通过激活一个已将一些变量传递给的 js 函数来做到这一点。像这样。

PHP：

```
$result = mssql_query("SELECT * FROM Segments ORDER BY 'Squares'");
    if (!$result) {
        echo 'query failed';
        exit;               
    }

    while ($row = mssql_fetch_array($result)) { ?>

    <span><?php echo $row["Squares"]; ?></span>
    <input name="squares" type="radio" 
        onclick="ajaxCases('<?php echo $row["Squares"]; ?>', '<?php echo $row["StartCaseID"]; ?>', '<?php echo $row["StartMatrixPrice"]; ?>')" value="<?php echo $row["Squares"]; ?>"
        <?php if ($row["Squares"] == "1") { ?> checked="checked" <?php }else{ ?> checked="" <?php } ?>/>
<?php } ?> 
```

如您所见，onclick 转到了一个名为 ajaxcases 的函数，该函数如下所示。

```
function ajaxCases(squares,start,price){
    $('#step1').html('<p style="margin:100px 0px 0px 100px"><img src="images/ajax-loader-bigindic.gif" width="32" height="32" alt="" /></p>');
    $('#step1').load("ajax-styles.php?squares="+squares);
    prevId1 = "";
    document.varsForm.caseid.value=start;
    $('#step1price').html('<span style="margin:0px 0px 0px 30px"><img src="images/ajax-loader-price.gif" width="24" height="24" alt="" /></span>');
    $('#step1price').load("ajax-step1-price.php?Squares="+Squares);
    return true;
} 
```

然后转到一个名为 ajax-step1-price.php 的 php 页面，我尝试回忆变量 Squares。但是它不起作用，我认为它是一个 GET 但是返回未定义。

总结：我想知道如何将变量从 PHP 传递给 JS，然后再传回 PHP，或者如果有人能告诉我哪里出错了，我将不胜感激。

我正在使用 MS SQL 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:47:27.830

检查您的函数签名。

你有：

```
function ajaxCases(squares,start,price){ 
```

应该：

```
//                 |-------- capital S
function ajaxCases(Squares,start,price) { 
```

或者更好的是，改变这个：

```
$('#step1price').load("ajax-step1-price.php?Squares="+Squares); 
```

对此：

```
//                                                    v--- lowercase s
$('#step1price').load("ajax-step1-price.php?Squares="+squares); 
```

JavaScript 变量[区分大小写](http://en.wikipedia.org/wiki/JavaScript_syntax#Case_sensitivity)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:45:31.177

Squares 确实是一个 GET 变量，您可以像这样访问它`$_GET['Squares']`：

如果`$_GET['Squares']`返回`undefined`，请验证您调用的 URL 是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:47:57.010

尝试调试它。

首先查看 PHP 生成的 HTML。

如果所有值都正确，请尝试`<input name="squares" onclick="..." />`在浏览器控制台中运行生成的 javascript。

如果调用来自`ajaxCases()`服务器，请查看 URL - 它是否格式正确。

如果是 - 检查服务器脚本返回的内容以及它对输入值的作用。

希望有帮助。

# java - android中的微调器

> ID：12892782
> 
> 赞同：0
> 
> 时间：2012-10-15T09:29:13.697
> 
> 标签：java, android, spinner, android-spinner

嗨，我需要在 android 中开发一个微调器示例。在这里，我使用了以下代码：

```
 public class InsertionExample extends Activity {
 private final String NAMESPACE = "http://xcart.com";
private final String URL = "http://192.168.1.168:8089/XcartLogin/services/update?wsdl";
private final String SOAP_ACTION = "http://xcart.com/insertData";
private final String METHOD_NAME = "insertData";
Button btninsert;
String selectedItem;

static final String KEY_NAME = "orderid";
static final String KEY_STATUS = "status";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.change_status);
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);
    btninsert = (Button)findViewById(R.id.btn_insert1);
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
             Intent in = getIntent();
             String orderid = in.getStringExtra(KEY_NAME);
             String status = in.getStringExtra(KEY_STATUS);
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            PropertyInfo unameProp =new PropertyInfo();
            unameProp.setName("Status");//Define the variable name in the web service method
            unameProp.setValue(selectedItem);//Define value for fname variable
            unameProp.setType(String.class);//Define the type of the variable

            request.addProperty(unameProp);
            PropertyInfo idProp =new PropertyInfo();
            idProp.setName("Orderid");//Define the variable name in the web service method
            idProp.setValue(orderid);//Define value for fname variable
            idProp.setType(String.class);//Define the type of the variable
            request.addProperty(idProp);

              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
              envelope.setOutputSoapObject(request);
              HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

              try{
               androidHttpTransport.call(SOAP_ACTION, envelope);
                  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

                 TextView result = (TextView) findViewById(R.id.textView2);
                  result.setText(response.toString());
             }
           catch(Exception e){

           }
              }
    });

    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());
    //Dynamically generate a spinner data 
    createSpinnerDropDown();

}

//Add animals into spinner dynamically
private void createSpinnerDropDown() {

    //get reference to the spinner from the XML layout
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);

    //Array list of animals to display in the spinner
    List<String> list = new ArrayList<String>();
    Intent in = getIntent();

    String status = in.getStringExtra(KEY_STATUS);
    list.add(status);
    list.add("Q");
    list.add("P");
    list.add("F");
    list.add("I");
    list.add("C");

    //create an ArrayAdaptar from the String Array
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    //set the view for the Drop down list
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    //set the ArrayAdapter to the spinner
    spinner.setAdapter(adapter);
    adapter.notifyDataSetChanged();
    //attach the listener to the spinner
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener());

}

   public class MyOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

         selectedItem = parent.getItemAtPosition(pos).toString();

       }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Do nothing.
    }
} 
```

这里`List`在微调框上添加了以下内容：

```
 List<String> list = new ArrayList<String>();
    Intent in = getIntent();

    String status = in.getStringExtra(KEY_STATUS);
    list.add(status);
    list.add("Q");
    list.add("P");
    list.add("F");
    list.add("I");
    list.add("C"); 
```

这里的状态是从以前的活动值得到的。其他列表是默认的 Q、P、F、I 和 C。因为第一个列表只显示以前的状态。所以只有我必须先在这里添加状态。

现在我的问题是，

现在我以前的状态是 C 意味着我的微调框必须显示以下格式：

![在此处输入图像描述](../Images/b543113cd1341528f3da4ec366770808.png)

这里第一个和最后一个值仅显示 C。所以 C 值在我的微调框上可用两次。这是我的问题。在这里，我想先**添加以前的状态，同时以前的状态没有添加到另一个地方**。我怎么能在这里发展。请给我一些解决方案。例如；

如果我之前的状态是 P，那么显示的第一个值是 P，并且还显示 Q、P、F、I、C。所以这里 P 显示了 2 次。那么我该如何解决这个错误。

**编辑：**

```
list.add(status);
    list.add("Q");
    list.add("P");
    list.add("F");
    list.add("I");
    list.add("C");
    for(i=0;i<list.length();i++){
        if(list.get(i).equals(status)) {
                list.remove(list.get(i));
        }
   } 
```

在这里我得到以下错误： **方法长度（）未定义类型列表**

我该如何解决这个错误。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:24:55.857

```
list.add(status);
list.add("Q");
list.add("P");
list.add("F");
list.add("I");
list.add("C");
int position = -1;
    for(i=0;i<list.size();i++){
        if(list.get(i).equals(status)) {
                position = i;
        }
   }
if(position>0)
   list.removeAt(position); 
```

这如果`if(position>0) list.removeAt(position);` 授予如果状态在您的列表中，它将不会被删除。它将仍然位于列表的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:07:57.287

添加列表后使用此条件：

```
for(i=1;i<list.size();i++){
        if(list.get(i).equals(status)) {

                list.remove(i);
        }
 } 
```

# actionscript-3 - flash as3时间线动画存储值

> ID：12892786
> 
> 赞同：0
> 
> 时间：2012-10-15T09:29:42.750
> 
> 标签：actionscript-3, flash, variables, shared-objects

我在动画的第 20 帧上设置了一个值

```
var final_answer = hundreds.text+tens.text+units.text;
var mySharedObject:SharedObject = SharedObject.getLocal("/"); 
```

我想在第 40 帧上访问它，但出现以下错误

场景 1，图层“动作”，第 210 帧，第 5 行 1120：访问未定义的属性 mySharedObject。

```
I have also tried to use a normal variable - is there anyway to store a variable in what is effectively a cookie between frames? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:10:25.343

我建议您使用文档类，但如果您不想在第一帧中处理所有内容，您可以使用`addFrameScript`

```
addFrameScript(4,onFrame5);

function onFrame5():void{
    trace('current frame is 5');
} 
```

# iphone - 使用 OCMock 验证方法是否被调用

> ID：12892799
> 
> 赞同：1
> 
> 时间：2012-10-15T09:30:14.197
> 
> 标签：iphone, objective-c, ocmock, sentestingkit

我是 OCMock 的初学者，我需要验证是否从另一个类调用了一个方法。以下是我的代码。

```
 //Creating the OCMockObject
id mockProductRequest = [OCMockObject mockForClass:[ProductRequest class]];
[[mockProductRequest expect] testProductRequest];

//Creating the object where the mock object will be invoked
ProductService *actualService = [[ProductService alloc] init];
[actualService testProductService];

[mockProductRequest verify];

-(void)testProductService{
//Method where the mock object's method is invoked
ProductRequest *request = [[ProductRequest alloc] init];
[request testProductRequest];
} 
```

我似乎总是收到一个方法未被调用的异常。请帮我弄清楚我在这里做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:47:33.690

您必须在 real 中替换 real 请求`ProductService`。例如，您可以通过使请求成为`ProductService`这样的属性来归档它：

```
@interface ProductService
@property (strong) ProductRequest *request 
```

然后像这样将真实的 ProductRequest 与模拟的交换

```
- (void)testProductService {
  id mockProductRequest = [OCMockObject mockForClass:[ProductRequest class]]; 
  [[mockProductRequest expect] testProductRequest];

  ProductService *actualService = [[ProductService alloc] init]; 
  actualService.request = mockProductReqeust;

  // call some method on actualService which invokes the request

  [request testProductRequest];

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:42:24.357

模拟对象的目的是替换您要测试的对象。但是在您的代码中，您将消息 testProductRequest 发送到真正的 ProductRequest 而不是您的 MockObject ！

# android - 如何将图像从一个活动发送到另一个活动（使用文件路径）

> ID：12892800
> 
> 赞同：-1
> 
> 时间：2012-10-15T09:30:25.880
> 
> 标签：android, android-intent, imageview

在我的应用程序中，我正在从列表视图中的 url 加载图像。并且单击列表项我想在下一个活动中显示它。我可以通过意图传递位图，但是考虑到可以通过意图发送的数据的大小限制，我不想以这种方式发送。

任何人都知道将图像从一个活动传递到另一个活动的更好方法。

我听说过将图像存储在文件中并使用意图发送文件路径但不知道如何？请告诉我该怎么做？

```
listview.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View view, int position,
                        long arg3) {

                    imageview=(ImageView) view.findViewById(R.id.icon);
                    description=(TextView) view.findViewById(R.id.firstLine);
                    rating=(TextView) view.findViewById(R.id.text1);
                    noofDownloads=(TextView) view.findViewById(R.id.text2);
                    noofComments=(TextView) view.findViewById(R.id.text3);
                    imageId=(TextView) view.findViewById(R.id.imageIdText);
                    publishdate=(TextView) view.findViewById(R.id.thirdLine);
                    attribution=(TextView) view.findViewById(R.id.attributionText);
                    Intent intent = new Intent(PicturesList.this, PictureDetail.class);

   String fileName=description.getText().toString();
                fileclass=new FileClass();
                fileclass.saveImage(bitmap,fileName);

                Intent intent = new Intent(PicturesList.this, PictureDetail.class);
                intent.putExtra("imagePath",fileclass.getPath());

                    intent.putExtra("Description",description.getText());
                    intent.putExtra("Rate",rating.getText());
                    intent.putExtra("Downloads",noofDownloads.getText());
                    intent.putExtra("Comments",noofComments.getText());
                    intent.putExtra("PublishTime",publishdate.getText());

    startActivity(intent);

                }
            });

        } 
```

我已经从 ListAdapter 保存图像

在

```
getview()
{
String fileName=lolpic.getDescription().toString();
                    FileClass fileclass=new FileClass();
                    fileclass.saveImage(bitmap,fileName); 
```

和 FileClass.java

```
public class FileClass {

    Picture pic;
    File file;

    public void saveImage(Bitmap myBitmap,String fileName) {

        String root = Environment.getExternalStorageDirectory().toString();
        File myDir = new File(root + "/Pictures");

        String fname = fileName+".png";
        file = new File (myDir, fname);
        if (file.exists ())
        {
            file.delete (); 
        }

        try {
            FileOutputStream out = new FileOutputStream(file);
            //myBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);

            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            myBitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
            byte[] byteArray = stream.toByteArray();

            out.write(byteArray);
            out.flush();
            out.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public String getPath()
    {
        return file.getPath();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:38:55.797

**发送活动**

```
final String root = Environment.getExternalStorageDirectory().getAbsolutePath();
pathToImage = root + "/my/image/path/image.png";

Intent intent = new Intent(context, MyActivity.class);
intent.putExtra("imagePath", pathToImage);
startActivity(intent); 
```

在您**接受活动**时：

```
String path = getIntent().getStringExtra("imagePath");
Drawable image = Drawable.createFromPath(path);
myImageView.setImageDrawable(image); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:01:46.813

使用它来将图像存储在 sdcard 中

```
void saveImage() {

String root = Environment.getExternalStorageDirectory().toString();
File myDir = new File(root + "/saved_images");

String fname = "MyImage.jpg";
File file = new File (myDir, fname);
if (file.exists ()) file.delete (); 
try {
       FileOutputStream out = new FileOutputStream(file);
       myBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
       out.flush();
       out.close();

} catch (Exception e) {
       e.printStackTrace();
} 
```

}

接下来获取图像路径`file.getpath()`

并使用

```
intent.putExtra("imagePath", file.getpath()); 
```

通过意图发送图像并使用

```
String image_path = getIntent().getStringExtra("imagePath");
Bitmap bitmap = BitmapFactory.decodeFile(image_path);
myimageview.setImageDrawable(bitmap); 
```

在您的接收活动中将图像显示到名为 myimageview 的图像视图上

根据评论，看起来应该是 myimageview.setImageBitmap(bitmap) 。没有测试这个。但是如果上述方法不起作用，也可以尝试一下

# php - 将时间/日期从 XML 文件转换为 MYSQL 格式

> ID：12892806
> 
> 赞同：0
> 
> 时间：2012-10-15T09:30:52.913
> 
> 标签：php, mysql, sql, date

其中一个联属网络提供具有以下时间/日期格式的提要。

```
<startDate>1349992800000</startDate>
<endDate>1355266799999</endDate> 
```

我的问题是我正在尝试将其转换为 MYSQL 格式，我尝试了 mktime 和 strtotime ，但没​​有运气，日期似乎出错了。我知道这是自 Equinox 以来的时间，我只是不确定如何将其转换为 MYSQL 格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:34:59.477

您可以让 MySQL 使用以下方法进行转换[`FROM_UNIXTIME()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)：

```
INSERT INTO yourTable (`startDate`, `endDate`)
VALUES ( FROM_UNIXTIME( 1349992800000 ), FROM_UNIXTIME( 1355266799999 ) ); 
```

您可能必须先除以 1000，因为您的时间戳似乎是自纪元以来的毫秒数，而 MySQL 使用自纪元以来的秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:35:49.490

这个日期时间是[时间戳](http://en.wikipedia.org/wiki/Timestamp)

如果你通过 php，在日期函数手册页（[here](http://php.net/manual/en/function.date.php)）中你可以看到你可以从格式和时间戳创建一个日期对象

```
string date ( string $format [, int $timestamp = time() ] ) 
```

尝试一下，

祝你好运！

# javascript - 在悬停状态下播放声音

> ID：12892808
> 
> 赞同：4
> 
> 时间：2012-10-15T09:30:57.960
> 
> 标签：javascript, html, audio, hover

我正在尝试创建一个看起来像声波但行为像钢琴键盘的横幅。我希望这个键盘的每个键都能在**悬停**状态下播放一个简短**的独特**声音（.ogg 或 .mp3 样本） 。

 **我知道如何使用 Flash 来实现这一点，但我想在这个项目中坚持使用 HTML/JS，但实际上我在完成它时遇到了麻烦。

“键盘”看起来像这样（**SVG**）：

![键盘](../Images/190b4c2385174f95a574bda7b94895c4.png)

你能给我一些关于如何实现这一点的提示吗？

我在想`<svg>`，`<canvas>`或图像地图可能是不错的选择。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:57:06.983

**编辑：**您可以尝试这样的事情：

演示：http: [//jsfiddle.net/SO_AMK/xmXFf/](http://jsfiddle.net/SO_AMK/xmXFf/)

jQuery：

```
$("#layer1 rect").each(function(i) {
    $("#playme").clone().attr({
        "id": "playme-" + i,
        "src": B64Notes[i]
    }).appendTo($("#playme").parent());
    $(this).data("audio", i);
});
$("#layer1 rect").hover(function() {
    var playmeNum = $("#playme-" + $(this).data("audio"));
    playmeNum.attr("src", playmeNum[0].src)[0].play();
    // Reset the src to stop and restart so you can mouseover multiple times before the audio is finished
    $(this).css("fill", "red");
}, function() {
    $(this).css("fill", "#d91e63");
});​ 
```

我知道您想避免重复，但没有办法同时播放多个音符。

svg 直接在页面中以使代码更简单，因为它会从另一个域加载，从而阻止 jQuery 访问和修改它。要访问从外部源嵌入的 svg 文档，请参阅：http: [//xn--dahlstrm-t4a.net/svg/html/get-embedded-svg-document-script.html](http://xn--dahlstrm-t4a.net/svg/html/get-embedded-svg-document-script.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:31:31.050

如何为每个键分配一个 id 并使用 html5 `<audio>`？然后使用 jQuery 更改音频标签的 src 属性？

```
$('#a').hover(function(){
    $('#oggfile').attr("src","a.ogg");
    $('#mpegfile').attr("src","a.mp3");
});

$('#c').hover(function(){
    $('#oggfile').attr("src","a.ogg");
    $('#mpegfile').attr("src","a.mp3");
});

$('#c').hover(function(){
    $('#oggfile').attr("src","c.ogg");
    $('#mpegfile').attr("src","c.mp3");
});
​ 
```

[http://jsfiddle.net/wPGSv/](http://jsfiddle.net/wPGSv/)**

# oracle - 将节点与 Oracle 连接

> ID：12892813
> 
> 赞同：0
> 
> 时间：2012-10-15T09:31:22.310
> 
> 标签：oracle, node.js

我需要连接到 oracle db 并通过节点获取一些数据。是否有可用于将节点与 oracle 连接的驱动程序？这可能吗？

在 stackoverflow 中找到了很多指向这个问题的链接，但没有一个有更新的答案。任何想法？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-21T20:51:21.667

我知道这篇文章已经有几个月了，但这是 NodeJS 的官方 Oracle 驱动程序： [https ://github.com/oracle/node-oracledb](https://github.com/oracle/node-oracledb)

npm 上的链接： [https ://www.npmjs.com/package/oracledb](https://www.npmjs.com/package/oracledb)

对于简单的情况，我已经使用它几个月了，它工作得非常好。社区很活跃，因此他们会定期添加新功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:34:21.803

如有疑问，请咨询[NPM](http://npmjs.org)。对于 oracle 特定的节点模块，请检查[oracle 模块](https://npmjs.org/package/oracle) 和[db-oracle 模块](https://npmjs.org/package/db-oracle)

# haskell - 如何在 Haskell 中将 IO Int 转换为 String？

> ID：12892814
> 
> 赞同：0
> 
> 时间：2012-10-15T09:31:20.940
> 
> 标签：haskell, io-monad

我正在学习在 Haskell 中使用输入和输出。我正在尝试生成一个随机数并将其输出到另一个文件。问题是随机数似乎返回了一个`IO Int`我无法转换为`String`using的东西`show`。

有人可以在这里给我指点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T09:38:19.817

如果您向我们展示您编写的不起作用的代码，这将很有帮助。

不管怎样，你在一个`do`街区里写了这样的东西，是吗？

```
main = do
    ...
    writeFile "some-file.txt" (show generateRandomNumberSomehow)
    ... 
```

您应该改为执行以下操作：

```
main = do
    ...
    randomNumber <- generateRandomNumberSomehow
    writeFile "some-file.txt" (show randomNumber)
    ... 
```

运算符将右侧值的结果绑定到左侧的-valued`<-`变量。（是的，您也可以使用它来将值的结果绑定到-valued 变量等）`IO Int``Int``IO String``String`

此语法仅在`do`块内有效。重要的是要注意，`do`块本身会产生一个 IO 值——你不能洗掉 IO-ness。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T10:48:33.113

dave4420's answer is what you want here. It uses the fact that `IO` is a `Monad`; that's why you can use the `do` notation.

However, I think it's worth mentioning that the concept of "applying a function to a value that's not 'open', but inside some wrapper" is actually more general than `IO` and more general than monads. It's what we have the `Functor` class for.

For any functor `f` (this could, for instance, be `Maybe` or `[]` or `IO`), when you have some value
`wrapped :: f t` (for instance `wrapped :: Maybe Int`), you can use `fmap` to apply a function
`t -> t'` to it (like `show :: Int -> String`) and get a
`wrappedApplied :: f t'` (like `wrappedApplied :: Maybe String`).

In your example, it would be

```
genRandomNumAsString :: IO String
genRandomNumAsString = fmap show genRandomNumPlain 
```

# android - 使用 Android 内部可绘制对象

> ID：12892818
> 
> 赞同：5
> 
> 时间：2012-10-15T09:31:34.267
> 
> 标签：android, android-widget

我正在尝试编写一个三态开关。但是我无法访问默认的[com.android.internal.R.styleable.Switch_track](http://developer.android.com/reference/android/R.styleable.html#Switch_track) drawable 以用作背景。

如何获得该可绘制对象？

是否有另一种获取默认背景的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T10:25:16.760

仅供参考：虽然不建议访问内部资源并且您应该知道，它们可能会被供应商或操作系统更新更改或删除，但可以在运行时访问它们：

```
int id = Resources.getSystem().getIdentifier("Switch_track", "styleable", "android"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T09:54:22.320

您不应该访问私有资源，您不能确定该资源在所有设备上都可用。即使它可用，你也不能确定它会是一样的。

如果您想使用私有资源，您必须将其从 SDK 或 Android 源复制到您的项目资源中。

# objective-c - Objective-C 中的其他目标是什么？

> ID：12892824
> 
> 赞同：0
> 
> 时间：2012-10-15T09:31:56.037
> 
> 标签：objective-c

杂项目标是什么意思？它们与我们设定的正常目标有什么不同吗？

我在我分享的以下链接中阅读了它们。

“Cocoa 中弱引用的示例包括但不限于表数据源、大纲视图项、通知观察者以及各种目标和委托。”

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)

# c# - 是否可以在 DebuggerDisplay 中使用条件？

> ID：12892825
> 
> 赞同：27
> 
> 时间：2012-10-15T09:31:58.217
> 
> 标签：c#, .net, debugging, debuggerdisplay

考虑以下类：

```
[DebuggerDisplay("{GetType().Name,nq}: FileName = {FileName,nq}")]
public class FileWrapper
{
    public string FileName { get; set; }
    public bool IsTempFile { get; set; }
    public string TempFileName { get; set; }
} 
```

我想添加一个基于`IsTempFileName`属性的调试器显示。`, TempFileName = {TempFileName,nq}`当实例是临时文件时，我想添加字符串。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-15T09:50:43.950

您可以使用[条件运算符 (?:)](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)

```
[DebuggerDisplay("{GetType().Name,nq}: FileName = {FileName,nq}{IsTempFile ? \", TempFileName: \" + TempFileName : System.String.Empty,nq}")] 
```

* * *

```
IsTempFile == false 
```

![在此处输入图像描述](../Images/fb9276cff218dd1b5a4924194bf9e4a5.png)

* * *

```
IsTempFile == true 
```

![在此处输入图像描述](../Images/7a1fbd21dacd88a6f5c9696201879390.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-07T14:58:51.163

您可以使用任何有效的表达式。

但是，请记住，调试器会多次评估这些表达式，因此您使它们越复杂，您就越会开始注意到调试速度的降低（例如，在单步执行代码时）。

另一个需要考虑的主要事情是表达式由使用类的语言的调试器评估。如果该类及其所有潜在用户都在 C# 中，则没有问题，您可以使用三元运算符之类的东西。但是，如果您的课程也将使用另一种语言，那么：

1.  不能保证调试器甚至会使用 [DebuggerDisplay] 属性，
2.  如果是这样，则不能保证它会尝试评估 {expression} 块，并且
3.  如果您开始做任何花哨的事情（例如使用？：），它很有可能无法评估您的 C# 表达式

最安全的做法是添加一个私有属性来计算调试器值：

```
[DebuggerDisplay("{DebugValue,nq}")]
public class FileWrapper {

  public string FileName     { get; set; }
  public bool   IsTempFile   { get; set; }
  public string TempFileName { get; set; }

  private string DebugValue {
    get {
      var text = string.Format("{0}: FileName={1}", this.GetType(), this.FileName);
      if (this.IsTempFile)
        text += string.Format(", TempFileName={0}", this.TempFileName);
      return text;
    }
  }

} 
```

它是私有财产，因此不会妨碍任何潜在的子类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-31T13:23:49.480

您可以将它与 Extensions 方法一起使用。

```
using System;
using System.Linq;
using System.Diagnostics;
using System.ComponentModel;

namespace ConsoleApplicationDebuggerDisplay
{
    class Program
    {
        static void Main(string[] args)
        {
            MyObject o1 = new MyObject();
            MyObject o2 = new MyObject();
            o1.Items = new int[] { 1, 2, 3, 4 };
        }
    }

    [DebuggerDisplay("{DebuggerDisplay,nq}")]
    public class MyObject
    {
        [DebuggerDisplay("{Items.ToDebuggerDisplay(),nq}")]
        public int[] Items { get; set; }

        [DebuggerBrowsable(DebuggerBrowsableState.Never), Browsable(false)]
        internal string DebuggerDisplay
        {
            get
            {
                return string.Format("{{Items={0} ...}}"
                    , Items.ToDebuggerDisplay()
                    );
            }
        }
    }

    internal static class Extensions
    {
        public static bool IsNull(this object o)
        {
            return object.ReferenceEquals(o, null);
        }

        public static bool IsNotNull(this object o)
        {
            return !object.ReferenceEquals(o, null);
        }

        public static string ToDebuggerDisplay<T>(this System.Collections.Generic.IEnumerable<T> items)
        {
            if (items.IsNull())
                return "null";
            return string.Format("{{Count={0}}}", items.Count());
        }
    }
} 
```

[手表](https://i.stack.imgur.com/F7uel.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-23T17:56:57.757

首先，在我之前支持“懒惰”的答案......因为他们让我朝着正确的方向前进。

其次，这里有一篇文章：

[https://devblogs.microsoft.com/visualstudio/customize-object-displays-in-the-visual-studio-debugger-your-way/](https://devblogs.microsoft.com/visualstudio/customize-object-displays-in-the-visual-studio-debugger-your-way/)

以下是文章的名称和作者，以防上面的链接将来失效。

> 以您的方式在 Visual Studio 调试器中自定义对象显示
> 
> 莱斯利·理查森
> 
> 程序经理，Visual Studio 调试和诊断

第三，这是一个基于 null 或非 null 子集合的更通用的示例：

```
[System.Diagnostics.DebuggerDisplay("ParentName = '{ParentName}', MyKidsCount='{null == MyKids ? 0 : MyKids.Count}'")]
public class MyParent
{
    public string ParentName { get; set; }

    public ICollection<MyKid> MyKids { get; set; }
} 
```

# sql - 如何更改 postgresql 中外键的值？

> ID：12892826
> 
> 赞同：9
> 
> 时间：2012-10-15T09:31:58.853
> 
> 标签：sql, postgresql, foreign-key-relationship

假设我有两个表：`Customer`和`City`. 有很多`Customer`s住在同一个`City`。城市有一个`uid`主键。客户通过 具有指向其各自城市的外键引用`Customer.city_uid`。

`City.uid`由于外部原因，我必须相互交换两个s。但客户应该与他们的城市保持联系。因此，也有必要交换`Customer.city_uid`s。所以我想我首先交换`City.uid`s ，然后`Customer.city_uid`通过`UPDATE`-statement 相应地更改 s 。不幸的是，我不能这样做，因为这些`uids`是从`Customer`-table 引用的，而 PostgreSQL 阻止我这样做。

有没有一种简单的方法可以将两个`City.uid`s 以及 s 相互交换`Customer.city_uid`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T09:52:54.130

一种解决方案可能是：

```
BEGIN;
1\. Drop foreign key
2\. Make update
3\. Create foreign key
COMMIT; 
```

或者：

```
BEGIN;
1\. Insert "new" correct information
2\. Remove outdated information
COMMIT; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:42:28.773

我的直觉是建议不要尝试更改`city`表的 id 字段。但是这里缺少很多信息。因此，这确实是一种*感觉*，而不是*确定*的观点。

相反，我会交换表格*其他字段*中的*值。*例如，将 city1 的名称更改为 city2 的名称，反之亦然。*`city`*

 *例如：

```
OLD TABLE                               NEW TABLE

 id | name  | population                  id | name  | population
-------------------------                -------------------------
  1 | ABerg | 123456                       1 | BBerg | 654321
  2 | BBerg | 654321                       2 | ABerg | 123456
  3 | CBerg | 333333                       3 | CBerg | 333333 
```

*（ID 未被触及，但其他值被交换。功能与交换 ID 相同，但使用不需要对表约束等进行任何更改的“更柔和的触摸”查询等）*

然后，在您的关联表中，您可以...

```
UPDATE
  Customer
SET
  city_uid = CASE WHEN city_uid = 1 THEN 2 ELSE 1 END
WHERE
  city_uid IN (1,2) 
```

但是，您还有其他参考的表格`city_uid`吗？如果是这样，您是否可以在所有这些表上重复该更新？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-21T18:52:13.003

您可以创建两个临时城市。

你将会拥有：

*   城市 1
*   城市 2
*   城市温度 1
*   城市温度 2

然后，您可以执行以下操作：

1.  将所有客户 UID 从 City 1 更新为 City Temp 1。
2.  将所有客户 UID 从 City 2 更新为 City Temp 2。
3.  交换城市 1 和 2 UID
4.  将所有客户从 City Temp 1 移回 City 1。
5.  将所有客户从 City Temp 2 移回 City 2。
6.  删除临时城市。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-18T15:29:34.840

You can also add an `ON UPDATE CASCADE` clause to the parent table's `CREATE TABLE` statement, as described here:

[How to do a cascading update?](https://stackoverflow.com/questions/38103781/how-to-do-a-cascading-update)*

# php - 提供地理定位相关数据的系统

> ID：12892829
> 
> 赞同：0
> 
> 时间：2012-10-15T09:32:08.157
> 
> 标签：php, android, web-services

我一直在开发一个应用程序，它基本上会将当前位置发送到网络服务器，网络服务器将根据该地理位置进行操作。

网络服务器的主要任务是寻找发件人的朋友，他们在发件人所在的区域附近（围绕发件人的当前地理位置）。

我一直在考虑解决这个问题的 GIS，但很多时候它似乎很模糊。

任何指向此类 GIS 的任何现有开源实现或使用 LAMP 从头创建一个的方法的任何指针都将非常有帮助。

抱歉，如果这不是此类问题的正确位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:36:05.017

看看 Postgis，一个 postgres 项目。

从这里开始阅读：

[http://postgis.refractions.net/documentation/](http://postgis.refractions.net/documentation/)

希望有帮助。

# c++ - InternetQueryOption 在 Windows XP 上崩溃

> ID：12892830
> 
> 赞同：1
> 
> 时间：2012-10-15T09:32:08.390
> 
> 标签：c++, winapi, wininet

以下代码或多或少只是从 MSDN 文档中复制而来。在 Windows Vista 和 Windows 7 上它工作正常，但在 XP 上崩溃时调用`InternetQueryOption`. 任何人都知道问题可能是什么？

```
int main(int argc, char* argv[])
{

  HINTERNET hInternet = InternetOpen("x", INTERNET_OPEN_TYPE_DIRECT, NULL, NULL, 0);
  //
  // 1\. Set
  //
  {
    INTERNET_PER_CONN_OPTION_LIST    List;
    INTERNET_PER_CONN_OPTION         Option[2];
    unsigned long                    nSize = sizeof(INTERNET_PER_CONN_OPTION_LIST);

    Option[0].dwOption = INTERNET_PER_CONN_AUTOCONFIG_URL;
    Option[0].Value.pszValue = "http://myserver/get_proxy_info.dll";
    Option[1].dwOption = INTERNET_PER_CONN_FLAGS;
    Option[1].Value.dwValue = PROXY_TYPE_AUTO_PROXY_URL;

    List.dwSize = sizeof(INTERNET_PER_CONN_OPTION_LIST);
    List.pszConnection = NULL;
    List.dwOptionCount = 2;
    List.dwOptionError = 0;
    List.pOptions = Option;

    if(!InternetSetOption(hInternet, INTERNET_OPTION_PER_CONNECTION_OPTION, &List, nSize))
       printf("InternetQueryOption failed! (%d)\n", GetLastError());
  }
  //
  // 2\. Query
  //
  {
    INTERNET_PER_CONN_OPTION_LIST    List;
    INTERNET_PER_CONN_OPTION         Option[5];
    unsigned long                    nSize = sizeof(INTERNET_PER_CONN_OPTION_LIST);

    Option[0].dwOption = INTERNET_PER_CONN_AUTOCONFIG_URL;
    Option[1].dwOption = INTERNET_PER_CONN_AUTODISCOVERY_FLAGS;
    Option[2].dwOption = INTERNET_PER_CONN_FLAGS;
    Option[3].dwOption = INTERNET_PER_CONN_PROXY_BYPASS;
    Option[4].dwOption = INTERNET_PER_CONN_PROXY_SERVER;

    List.dwSize = sizeof(INTERNET_PER_CONN_OPTION_LIST);
    List.pszConnection = NULL;
    List.dwOptionCount = 5;
    List.dwOptionError = 0;
    List.pOptions = Option;

    printf("InternetQueryOption:\n");
    if(!InternetQueryOption(hInternet, INTERNET_OPTION_PER_CONNECTION_OPTION, &List, &nSize))
       printf("InternetQueryOption failed! (%d)\n", GetLastError());
       if(Option[0].Value.pszValue != NULL)
       printf("%s\n", Option[0].Value.pszValue);

    if((Option[2].Value.dwValue & PROXY_TYPE_AUTO_PROXY_URL) == PROXY_TYPE_AUTO_PROXY_URL)
      printf("PROXY_TYPE_AUTO_PROXY_URL\n");

    if((Option[2].Value.dwValue & PROXY_TYPE_AUTO_DETECT) == PROXY_TYPE_AUTO_DETECT)
       printf("PROXY_TYPE_AUTO_DETECT\n");

    INTERNET_VERSION_INFO      Version;
    nSize = sizeof(INTERNET_VERSION_INFO);

    InternetQueryOption(hInternet, INTERNET_OPTION_VERSION, &Version, &nSize);

    if(Option[0].Value.pszValue != NULL)
       GlobalFree(Option[0].Value.pszValue);

    if(Option[3].Value.pszValue != NULL)
       GlobalFree(Option[3].Value.pszValue);

    if(Option[4].Value.pszValue != NULL)
       GlobalFree(Option[4].Value.pszValue);

  }

} 
```

在 Windows XP 中，它在试图访问`NULL`指针后面的内容时遇到内存访问冲突。

```
 wininet.dll!PROXY_SERVER_LIST::CopyString(void) Unknown
    wininet.dll!PROXY_INFO::GetProxySettings(struct INTERNET_PROXY_INFO_EX *,int)   Unknown
    wininet.dll!PROXY_INFO_GLOBAL::GetProxySettings(struct INTERNET_PROXY_INFO_EX *,int)    Unknown
    wininet.dll!QueryPerConnOptions(void *,int,struct INTERNET_PER_CONN_OPTION_LISTA *) Unknown
    wininet.dll!_InternetQueryOptionA@16()  Unknown
>   InternetQueryOption.exe!main(int argc=1, char * * argv=0x003e2e60) Line 55  C++
    InternetQueryOption.exe!__tmainCRTStartup() Line 278    C 
```

# android - 如何在android中解决表没有这样的表异常？

> ID：12892834
> 
> 赞同：0
> 
> 时间：2012-10-15T09:32:11.403
> 
> 标签：android, android-sqlite, android-assets

我使用 sqlite 数据库开发了一个 android 应用程序。目前我的应用程序在 google play 中。在这里我在执行选择查询时收到一些报告的问题，例如“没有这样的表”。实际上我从 Assets 文件夹中复制了我的数据库。在这里，我按照下面给出的链接复制我的数据库 [这是我遵循的链接](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

通过代码就像

```
public class DbFromAssets  extends SQLiteOpenHelper  {  
    private String DB_PATH = Environment.getDataDirectory()+"/data/package/databases/";
    private static String DATABASE_NAME = "mydb.db";
    private final String DEFAULT_DESTINATION = DB_PATH + DATABASE_NAME; 
    @SuppressWarnings("static-access")
    public DbFromAssets(Context ctx)
    {
        super(ctx, DATABASE_NAME, null, 1);
        try
        {
            this.getReadableDatabase();
            InputStream is = ctx.getAssets().open(DATABASE_NAME);
            byte[] buffer = new byte[512];
            int length;
            OutputStream os = new FileOutputStream(DEFAULT_DESTINATION);
            while ((length = is.read(buffer)) >0){
                os.write(buffer, 0, length);
            }
            os.flush();
            os.close();
            is.close();
            this.close();
        }catch (Exception e) {
            e.printStackTrace();
            }       
            }

    @Override
    public void onCreate(SQLiteDatabase db) {
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    }
} 
```

我在我的启动画面中调用这个类方法，如下所示

```
 @SuppressWarnings("read-database")                    
            DbFromAssets readdb= new DbFromAssets(SplashActivity.this); 
```

我在模拟器和可用设备（如 lg sprint、motorolo droid 等）中测试过，这在我身边非常有效。我什至一次都没有遇到问题，但我在 google play 帐户中收到了强制关闭报告。任何人都可以知道为什么它会出错。请告诉我它会改进我的应用程序。

提前致谢。

# ruby - 按属性获取 xml-xpath

> ID：12892840
> 
> 赞同：1
> 
> 时间：2012-10-15T09:32:40.010
> 
> 标签：ruby, xml, nokogiri

`http://www.mdr.de/export/sandmann/folgen/sandmann612-mediaRss_doca-1_zc-1a3071ad.xml`除其他外，还返回以下几行：

```
(...)
<media:content url="http://x4100mp4dynonlc22033.f.o.l.lb.core-cdn.net/22033mdr/ondemand/4100mp4dynonl/FCMS-066eb3e7-81b2-4dae-898d-4963137eb4b6-e9ebd6e42ce1.mp4" type="video/mpeg" expression="full" width="512" height="288" bitrate="512" duration="398" />
<media:content url="http://x4100mp4dynonlc22033.f.o.l.lb.core-cdn.net/22033mdr/ondemand/4100mp4dynonl/FCMS-066eb3e7-81b2-4dae-898d-4963137eb4b6-c7cca1d51b4b.mp4" type="video/mpeg" expression="full" width="960" height="544" bitrate="1536" duration="398" />
(...) 
```

我如何告诉 Nokogiri 只提取行 where `bitrate="1536"`？

我实际上只需要那个 XPath 中的 URL，所以我期望（我觉得在这里写“期望”相当粗鲁，但有人告诉我这样做；）返回以下字符串：

```
http://x4100mp4dynonlc22033.f.o.l.lb.core-cdn.net/22033mdr/ondemand/4100mp4dynonl/FCMS-066eb3e7-81b2-4dae-898d-4963137eb4b6-c7cca1d51b4b.mp4 
```

如果有人有兴趣，这将允许我下载 Sandmännchen 的每日剧集，这是一部面向小孩的德国电视迷你剧。:)

到目前为止，我已经尝试过使用`simpleRSS`这个：

```
(...)
rss.entries.each do |entry|
    pp entry
end 
```

但这仅返回`media:group`“集合”链接的第一项：

```
{:title=>"Sandmann vom 14\. Oktober 2012",
 :link=>"http://www.mdr.de/export/sandmann/folgen/video78338.html",
 :description=>
  "Die j\xC3\xBCngste Geschichte vom Sandmann gibt es f\xC3\xBCr 24 Stunden hier auf Abruf. Heute: Molly mag keine Schuhe. Das finden die anderen Monster merkw\xC3\xBCrdig, weil Monster Schuhe lieben.",
 :pubDate=>2012-09-19 14:54:43 +0200,
 :guid=>
  "mp4:4100mp4dynonl/FCMS-066eb3e7-81b2-4dae-898d-4963137eb4b6-8442e17c3177",
 :media_content_url=>
  "rtmp://x4100mp4dynonlc22033.f.o.f.lb.core-cdn.net/22033mdr/ondemand",
 :media_content_type=>"fms/h264",
 :media_content_height=>"272",
 :media_content_width=>"480",
 :media_title=>"Sandmann vom 14\. Oktober 2012",
 :media_thumbnail_url=>
  "http://www.mdr.de/export/sandmann/folgen/sandmann864_v-standard43_zc-698fff06.jpg",
 :media_thumbnail_height=>"135",
 :media_thumbnail_width=>"180"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:56:25.600

这个怎么样：

```
doc.at_xpath('//media:content[@bitrate="1536"]/@url').text
#=> "http://www.mdr.de/export/sandmann/folgen/sandmann612-mediaRss__zc-1a3071ad.xml" 
```

顺便说一句，该链接不起作用，因此我实际上无法在完整文档上对此进行测试。

**更新**：

在 nokogiri 中使用以下答案中的信息：

```
filme = Nokogiri::XML(open('http://www.sandmann.de/static/san/app/filme.xml'))
folge = Nokogiri::XML(open(filme.xpath('//filme/folge').text))

folge.at_xpath('//media:content[@bitrate="1536"]/@url').text
#=> "http://x4100mp4dynonlc22033.f.o.l.lb.core-cdn.net/22033mdr/ondemand/4100mp4dynonl/FCMS-066eb3e7-81b2-4dae-898d-4963137eb4b6-c7cca1d51b4b.mp4" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:09:24.090

为方便起见，只需：

```
doc.at('content[@bitrate="1536"]')[:url] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T21:25:37.913

```
require 'nokogiri'
require 'open-uri'

url = 'http://www.mdr.de/export/sandmann/folgen/sandmann612-mediaRss_doca-1_zc-1a3071ad.xml'
doc = Nokogiri.XML(open(url))
doc.remove_namespaces! # Just to make our life simpler
content = doc.at_css('content[bitrate="1536"]')
puts content['url']
#=> http://x4100mp4dynonlc22033.f.o.l.lb.core-cdn.net/22033mdr/ondemand/4100mp4dynonl/FCMS-fd2af820-ec90-4f34-a58e-db1b9fdcc25a-c7cca1d51b4b.mp4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:27:36.617

这就是我最终想出的 - 不`nokogiri`（我认为它非常强大，但学习曲线相当陡峭。另外，我根本不明白......）`crack`而是。它似乎更红宝石，并且与我得到的 MRSS 提要很好地配合：

```
require 'rubygems'
require 'pp'
require 'crack'
require 'asciify'
require 'open-uri'

fileurl = ""
filme  = Crack::XML.parse(open('http://www.sandmann.de/static/san/app/filme.xml'))
folge = Crack::XML.parse(open(filme['filme']['folge']))
titel = folge['rss']['channel']['item']['description'].to_s.sub(/.*Die jüngste Geschichte vom Sandmann gibt es für 24 Stunden hier auf Abruf. Heute: /, '')
folge['rss']['channel']['item']['media:group']['media:content'].each do |x|
    fileurl << x['url'] if x['bitrate'] == "1536"
end
filename = titel.split(".").first.asciify + ".m4v"
filename.gsub!(" ","_")

system("curl -o \"#{filename}\" \"#{fileurl}\"") 
```

以防*你的*孩子也想看；）

# php - 将 int 与 string 进行比较会导致 php 中出现奇怪的结果？

> ID：12892847
> 
> 赞同：3
> 
> 时间：2012-10-15T09:33:09.717
> 
> 标签：php, if-statement

> **可能重复：**
> [比较两个变量返回错误结果](https://stackoverflow.com/questions/12248465/comparing-two-variables-returns-false-result)

```
<?php
if( "32 is this a bug of php " == 32)
   echo "true";
else
   echo "false";
?> 
```

输出是：

```
true 
```

[你可以在http://codepad.org/hgOisqZ8](http://codepad.org/hgOisqZ8)看到它的输出

为什么这个条件被评估为真？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T09:34:46.030

因为 PHP 在类型转换方面非常愚蠢。

通过首先将“32 is this a bug of php”转换为整数来评估此表达式，结果为 32。然后比​​较结果为真。

如果要进行类型安全比较，请使用 === 运算符

```
<?php
if( "32 is this a bug of php " === 32)
   echo "true";
else
   echo "false";
?> 
```

输出将是错误的。

请注意，使用 === 运算符，我们得到了`"32" !== 32`因为一个变量是`string`当另一个变量是`int`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T09:35:40.827

**这在[PHP 手册](http://il.php.net/manual/en/language.types.string.php#language.types.string.conversion)中进行了讨论。**

> 字符串转换为数字
> 
> 在数字上下文中评估字符串时，结果值和类型确定如下。
> 
> 如果字符串包含任何字符“.”、“e”或“E”，则该字符串将被评估为浮点数。否则，它将被评估为整数。
> 
> 该值由字符串的初始部分给出。如果字符串以有效的数字数据开头，这将是使用的值。否则，该值将为 0（零）。有效的数字数据是一个可选的符号，后跟一个或多个数字（可选地包含一个小数点），后跟一个可选的指数。指数是“e”或“E”后跟一位或多位数字。

**注意声明的部分**

> 如果字符串以有效的数字数据开头，这将是使用的值。

由于您的字符串以`32`PHP 开头，因此会比较`if(32 == 32)`哪个为真。

使用类型安全检查，将数据类型考虑在内，如果不希望出现这种行为，则在处理可能不同的类型时。像

```
1 === 1:   true
1 == 1:    true
1 === "1": false
1 == "1":  true
"foo" === "foo": true 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-15T09:35:48.903

请参阅[比较运算符](http://php.net/manual/en/language.operators.comparison.php)的文档：

> 如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较。

所以不，这不是错误，而是语言的设计方式。

`===`如果您不想打字杂耍，请使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T09:47:31.380

请注意，您还需要知道`$a==$b && $b==$c` **这并不意味着** `$a == $c`在 php.ini 中。

***例子：***

```
var_dump('32E0' == '32');
var_dump('32' == 32);
var_dump(32 == '32 is a bug');
var_dump('32E0' == '32 is a bug'); 
```

输出是：

```
bool(true)
bool(true)
bool(true)
bool(false) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T09:47:03.557

你也可以这样使用

```
<?php
if( "32 is this a bug of php " == '32')
  echo "true";
else
  echo "false";
?> 
```

# ios - 如何更改 UITableViewCell

> ID：12892848
> 
> 赞同：0
> 
> 时间：2012-10-15T09:33:14.113
> 
> 标签：ios, uitableview

我在标签栏中有 2 个 tableViewCell。将值从一个按钮复制到另一个按钮，如果值匹配，则计数器递增，并删除 Cell。在 managedCoreData

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell * result = nil;
    static NSString * OrederTableViewCell = @"OrderTableViewCell";

result = [tableView dequeueReusableCellWithIdentifier:OrederTableViewCell];
if (result == nil)
{
    result = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:OrederTableViewCell];
    result.selectionStyle = UITableViewCellSelectionStyleNone;
}

Order * order = [self.orderFRC objectAtIndexPath:indexPath];

result.textLabel.text = order.name;
result.imageView.image = [UIImage imageWithData:[order imageSmall]];
self.count = 1;
if ([order.name characterAtIndex:indexPath.row] == [order.name characterAtIndex:indexPath.row+1])
{
    self.count++;
    [[self managedObjectContext]deleteObject:order];
}
result.detailTextLabel.text = [NSString stringWithFormat:@"X = %d",self.count];

return result;
} 
```

# javascript - 在javascript中返回属性VS属性直接访问的方法

> ID：12892849
> 
> 赞同：2
> 
> 时间：2012-10-15T09:33:14.130
> 
> 标签：javascript, performance, design-patterns, object, properties

我发现许多 javascript 开发人员创建的方法只是返回如下属性：

```
function Obj (prop) {
    this.prop = prop; // public
}
Obj.prototype.getProp = function () {
    return this.prop;
}; 
```

虽然 prop 是公开的，可以像这样访问：

```
var a = obj.prop; 
```

此外，我发现使用方法访问对象属性比直接访问它慢 121 倍（在 Firefox 中）

```
var a, b,
    obj = new Obj(1);

a = obj.prop;
// ~6ns on Chrome
// ~5ns on Firefox

b = obj.getProp();
// ~6ns on Chrome (no difference)
// ~730ns on Firefox (122x slower...) 
```

所以我的问题是：我们应该始终创建返回属性的方法还是可以直接访问属性？那是反模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:47:06.000

是的，它是一种反模式。由于 js 没有原生的 getter 和 setter，它们将是跨浏览器的，但是，您应该创建自己的 getter 和 setter，例如：

```
Obj.prototype.getProp = function () {
    return this.prop;
}; 
```

是的，您仍然可以直接访问此道具，但现在您不必这样做。更多关于那个。这样你就可以通过闭包创建私有属性：

```
function Foo() {
   var __yourPrivateProp = 'Bar';
   return {
           getyourPrivateProp: function () {
               return: __yourPrivateProp
           }
   };
} 
```

# java - SugarCRM、WSDL 和 RPC

> ID：12892850
> 
> 赞同：0
> 
> 时间：2012-10-15T09:33:15.180
> 
> 标签：java, web-services, wsdl, sugarcrm

SugarCRM CE Web 服务 API 有许多 url，例如：

```
http://localhost/soap.php?wsdl
          AND
http://localhost/service/v2/soap.php?wsdl
http://localhost/service/v3/soap.php?wsdl
http://localhost/service/v4/soap.php?wsdl
http://localhost/service/v4_1/soap.php?wsdl 
```

他们都为**RPC/Encoded生成 WSDL**

当我使用带有命令行的**wscompile** Java 工具使用WSDL

```
wscompile -gen:client config.xml -keep 
```

和 config.xml 包含

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration
    xmlns="http://java.sun.com/xml/ns/jax-rpc/ri/config">
   <wsdl location="http://localhost/service/v4_1/soap.php?wsdl" packageName="com.crm.imported"/>
</configuration> 
```

我可以得到生成的类。但是所有 URL 在生成的类中都有不同的结构。

此外，只有**http://localhost/soap.php?wsdl**生成的类在工作，其余的都报错：

```
java.rmi.RemoteException: Runtime exception; nested exception is: 
    unexpected element type: expected={http://www.w3.org/2001/XMLSchema}QName, actual={http://www.w3.org/2001/XMLSchema}int 
```

***我的问题：***

1.  API 版本有什么区别？
2.  这是什么 XMLSchema QName 错误？如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:01:20.390

我得到了答案：

1.  所有 API 版本都有不同的实现。例如：更高版本要求密码为 MD5 编码。

2.  通过向参数提供错误信息会引发 XMLSchema 错误。java.rmi.RemoteException 将简单地给出不相关的错误消息。

# python - 使用 Matplotlib 绘制数据的动画散点图

> ID：12892863
> 
> 赞同：4
> 
> 时间：2012-10-15T09:33:57.560
> 
> 标签：python, matplotlib, animated, scatter

我试图以这种方式调整动画散点图示例，因此它可以实时显示我开发的基于代理的模型的结果。但是，图表中显示的结果并不是我除了它们之外的那样。更新值时会出错，并且代理倾向于聚集在对角线上的地方会出现奇怪的模式。我添加了一些简单的代码来说明这个问题。有谁知道出了什么问题？

```
import matplotlib.pyplot as plt
import matplotlib.animation as animation
import numpy as np
import os

n = 25 ## nr of agents
x,y = 10, 10 ## matrix of x by y dimension
dataX, dataY, binaryRaster = [],[],[]

class AnimatedScatter(object):
    """An animated scatter plot using matplotlib.animations.FuncAnimation."""
    def __init__(self):
        global n
        self.numpoints = n
        self.stream = self.data_stream()
        self.fig, self.ax = plt.subplots()
        self.ax.set_title("My first Agent Based Model (ABM)",fontsize=14)
        self.ax.grid(True,linestyle='-',color='0.75')
        self.ani = animation.FuncAnimation(self.fig, self.update, interval=100, 
                                           init_func=self.setup_plot, blit=True,
                                           repeat=False)

    def setup_plot(self):
        """Initial drawing of the scatter plot."""
        global x,y
        dataX,dataY = next(self.stream)
        self.scat = self.ax.scatter(dataY, dataX, c="tomato", s=20, animated=True)
        self.ax.axis([0, y, x, 0])
        return self.scat,

    def data_stream(self):
        """Generate a random walk (brownian motion). Data is scaled to produce
        a soft "flickering" effect."""
        global x,y, n

        dataX,dataY = self.createRandomData()

        #printing results to ascii for validation
        lines = []
        binaryData = np.zeros((x,y), dtype=np.int)
        for i in range(n):
            binaryData[dataX,dataY] =1
        for i in range(x):
            line = ""
            for j in range(y):
                line += str(binaryData[i,j])+ ","
            line= line[:-1]+ "\n"
            lines.append(line)
        lines.append("\n")

        yx = np.array([dataY,dataX])
        cnt = 0
        while cnt < 10:
            dataX,dataY = self.createRandomData()
            yx = np.array([dataY,dataX])

            #printing results to ascii for validation
            binaryData = np.zeros((x,y), dtype=np.int)
            for i in range(n):
                binaryData[dataX,dataY] =1
            for i in range(x):
                line = ""
                for j in range(y):
                    line += str(binaryData[i,j])+ ","
                line= line[:-1]+ "\n"
                lines.append(line)
            lines.append("\n")

            cnt+=1
            yield yx

        #printing results to ascii for validation

        outNm = os.getcwd()+"\\ScatterValidation.txt"
        outfile = open(outNm, "w")
        outfile.writelines(lines)
        outfile.close()
        return

    def update(self, i):
        """Update the scatter plot."""
        data = next(self.stream)
        self.scat.set_offsets(data[:2, :])
        return self.scat,

    def show(self):
        plt.show()

    def createRandomData(self):
        """Positions n agents randomly on a raster of x by y cells.
        Each cell can only hold a single agent."""

        global x,y,n
        binaryData = np.zeros((x,y), dtype=np.int)
        newAgents = 0
        dataX,dataY = [],[]
        while newAgents < n:
            row = np.random.randint(0,x,1)[0]
            col = np.random.randint(0,y,1)[0]
            if binaryData[row][col] != 1:
                binaryData[row][col] = 1
                newAgents+=1

        for row in range(x):
            for col in range(y):
                if binaryData[row][col] == 1:
                    dataX.append(row)
                    dataY.append(col)
        return dataX, dataY

def main():
    global n, x, y, dataX, dataY, binaryRaster
    a = AnimatedScatter()
    a.show()
    return

if __name__ ==  "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:37:06.927

您可以通过 2 种方式修复脚本，都涉及更改`update`函数：

1.  在更新函数中使用分散调用，我认为更清楚
2.  在更新中调用 set_offsets 之前转置数据数组

使用分散调用是最明确的解决方法，您可以在运行期间增加代理：

```
def update(self, i):
    """Update the scatter plot."""
    dataX, dataY = next(self.stream)
    self.scat = self.ax.scatter(dataX, dataY, c="tomato", s=20, animated=True)
    return self.scat, 
```

转置 offsets 数组也可以：

```
def update(self, i):
    """Update the scatter plot."""
    data = next(self.stream)
    self.scat.set_offsets(data.transpose())
    return self.scat, 
```

偏移量以 N 元组的形式给出，每个元组包含 2 个项目，而数据数组以 2 个元组的形式给出，每个元组具有 N 个项目，转置数据数组将解决您的问题。

注意：如果不更改全局变量，则不需要用 global 语句指定全局变量，因此在`setup_plot`等`__init__`中可以删除`global n,x,y`行。我会将`n`,`x`和`y`作为类的实例变量，而且不需要`dataX`,`dataY`和`binaryRasted`在脚本顶部定义。

# jquery - 多步表单 - 字段由 jquery 填充

> ID：12892867
> 
> 赞同：1
> 
> 时间：2012-10-15T09:34:17.340
> 
> 标签：jquery, forms

当一个值小于 4 时填充输入字段的脚本有问题。当值小于 4 时，脚本填充字段但未选择该值，所以当我要进行下一步时，我在此没有任何价值场地。当值大于 4 时，一切正常（该值也由 jquery 填充）。

```
 function compute() {
    if( parseInt($("#finish_day").val()) < 4 ) { 
      $('#return_car').children('#return_car option[value=' + $('#get_car').val() + ']').attr('selected', true).siblings().attr('disabled', true);            if  
      ($('#return_car').val()) $('#return_car').change();        
    }
    else {
       $('#get_car > option, #return_car > option').prop('disabled', false);            
       $('#three_day').hide(2000, function () {                
          $(this).remove();            
       });        
    }    
  }
  $('select#get_car').change(compute);$('input#finish_day').change(compute); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:46:44.617

```
 $('#return_car').children('#return_car option[value=' + $('#get_car').val() + ']').prop('selected', true).siblings().prop('disabled', true);

  $('#return_car').children('option[value=' + $('#get_car').val() + ']').prop('selected', true).siblings().prop({disabled:true,selected:false}); 
```

解决方案是添加 disabled:true 并选中。

# android - android加载更多列表

> ID：12892870
> 
> 赞同：-1
> 
> 时间：2012-10-15T09:34:22.560
> 
> 标签：android, android-listview

我想在我的应用程序中列出一个永无止境的清单。第一次，列表将显示 8，然后如果有更多数据，列表将根据列表的长度显示数据。

这是我的代码：

```
 package com.example.main;

    public class ResultRestoActivity extends ListActivity {

        Context ctx;

        List<Map<String,String>> listData =  new ArrayList<Map<String,String>>();
        List <Map<String,String>> list = new ArrayList<Map<String,String>>();

        ListAdapter adap;
        ListView lv;

        Button btnLoadMore;

        String bank,group,city,merchant,address,telpon,handphone,bb;

        TextView tv_GName,tv_city,tv_merchant,tv_address,tv_telpon,tv_handphone,tv_bb;

        ImageButton tabs_nearby, tabs_all;

        int itemsPerPage = 4;
        boolean loadingMore = false;

        @Override
        public void onCreate (Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            group = getIntent().getStringExtra("GROUP");
            bank = getIntent().getStringExtra("BANK");
            city = getIntent().getStringExtra("CITY");
            merchant = getIntent().getStringExtra("MERCHANT");
            address = getIntent().getStringExtra("ADDRESS");
            telpon = getIntent().getStringExtra("TELPON");
            handphone = getIntent().getStringExtra("HANDPHONE");
            bb = getIntent().getStringExtra("BB");

            ctx = this;
            setContentView(R.layout.activity_restoresult);

            tv_GName = (TextView)findViewById(R.id.tvRestoResult);
            tv_GName.setText(""+group+"");

    //      tabs_all = (ImageButton)findViewById(R.id.imgbtn_semua);
    //      tabs_all.setOnClickListener(new OnClickListener() {
    //          @Override
    //          public void onClick(View v) {
    //              // TODO Auto-generated method stub
    //              tabs_all.setImageResource(R.drawable.tabs_semua_active);
    ////                loadStart();
    //          }
    //      });

    //      tabs_nearby = (ImageButton)findViewById(R.id.imgbtn_nearby);
    //      tabs_nearby.setOnClickListener(new OnClickListener() {
    //          @Override
    //          public void onClick(View v) {
                    // TODO Auto-generated method stub
    //              Toast.makeText(ctx, "Coming Soon", Toast.LENGTH_SHORT).show();
    //              tabs_nearby.setImageResource(R.drawable.tabs_terdekat_active);
    //              Intent i = new Intent(v.getContext(), NearbyComingSoon.class);
    //              startActivity(i);
    //              comingsoon();
    //          }
    //      });

            list = (ArrayList<Map<String,String>>) getIntent().getSerializableExtra("LIST");        

            for(int i=0;i<list.size(); i++){
                final Map<String, String> map = list.get(i);
                for (Map.Entry<String, String> entry : map.entrySet()) {
    //              String key = entry.getKey();
                    final String value = entry.getValue();
                    if(value.equalsIgnoreCase(bank)){
                        listData.add(list.get(i));
                    }
                }
            }

            lv = getListView();
            adap = new ListAdapter(listData);
            lv.setAdapter(adap);
            lv.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> arg0, View v, int position,
                        long arg3) {
                    merchant = ((TextView) v.findViewById(R.id.tv_merchantname)).getText()
                                .toString();

                    Intent i = new Intent(ResultRestoActivity.this, DetailRestoActivity.class);
                        i.putExtra("GROUP", group);
                        i.putExtra("CITY", city);
                        i.putExtra("MERCHANT", merchant);
                        i.putExtra("ADDRESS", address);
                        i.putExtra("TELPON", telpon);
                        i.putExtra("HANDPHONE", handphone);
                        i.putExtra("BB", bb);
                    startActivity(i);
                }
            });

            View footerView = ((LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.listfooter, null, false);
            this.getListView().addFooterView(footerView);
            this.setListAdapter(adap);
            this.getListView().setOnScrollListener(new OnScrollListener() {
                @Override
                public void onScrollStateChanged(AbsListView view, int scrollState) {
                    // TODO Auto-generated method stub
                }

                @Override
                public void onScroll(AbsListView view, int firstVisibleItem,
                        int visibleItemCount, int totalItemCount) {
                    // TODO Auto-generated method stub
                    int lastInScreen = firstVisibleItem + visibleItemCount;

                    if((lastInScreen == totalItemCount) && !(loadingMore)){                 
                        Thread thread =  new Thread(null, loadMoreListItems);
                        thread.start();
                    }
                }
            });

            Thread thread = new Thread(null, loadMoreListItems);
                thread.start();
        }

        private Runnable loadMoreListItems = new Runnable() {
            @Override
            public void run() {
                // TODO Auto-generated method stub
                loadingMore = true;

    //          list = (ArrayList<Map<String,String>>) getIntent().getSerializableExtra("LIST");

                try {
                    Thread.sleep(1000);
                } catch (Exception e) {
                    // TODO: handle exception
                }

                for(int i=0;i<itemsPerPage; i++){
                    final Map<String, String> map = list.get(i+2);
                    for (Map.Entry<String, String> entry : map.entrySet()) {
    //                  String key = entry.getKey();
                        final String value = entry.getValue();
                        if(value.equalsIgnoreCase(bank)){
                            listData.add(list.get(i));
                        }
                    }
                }
                adap = new ListAdapter(listData);
                lv.setAdapter(adap);
            }
        };          
    } 
```

但是这段代码仍然出错。这里是它的错误信息：

```
android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

我需要你的建议、链接、评论和你的所有帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:40:50.803

尝试这个。在你的 run 方法中，像这样围绕 setAdapter 。它应该有帮助。问题是您正在尝试更新 Ui 表单后台线程。你不能那样做。更新 UI 时需要在主线程中。

```
 ResultRestoActivity.this.runOnUiThread(new Runnable() {

                    public void run() {
                         adap = new ListAdapter(listData);
                         lv.setAdapter(adap);

                    }
                }); 
```

# c++ - mfc 从对话框访问 formview 项

> ID：12892873
> 
> 赞同：0
> 
> 时间：2012-10-15T09:34:30.980
> 
> 标签：c++, mfc

在我的 SDI 应用程序中，我需要获得这种行为。单击 FormView 上的按钮后，将打开一个 CDialog。当我按下 CDialog 上的 OK 按钮时，我调用了 FormView 的一个函数。我不想关闭 CDialog。我尝试用无模式对话框来做，但是当我从对话框中调用 formview 函数时，我无法访问 formview 的控件，就像它丢失了 hwnd 一样；错误是无法读取 m_hwnd 的内存，hwnd 是???。这是我的代码：打开无模式对话框：

```
CCampiDlg *m_pDialog = NULL;
HWND hCampi = NULL;

// Invoking the Dialog
m_pDialog = new CCampiDlg;

if (m_pDialog != NULL)
{
    BOOL ret = m_pDialog->Create(m_pDialog->IDD, this);
    if (!ret)   //Create failed.
    {
        AfxMessageBox(_T("Error creating Dialog"));
    }
    m_pDialog->ShowWindow(SW_SHOW);
} 
```

当我在对话框中按下确定按钮时，我会：

```
CEditorTxView pView;
box2 = (CEdit*)(GetDlgItem(IDC_CAMPI_BOX2));
box2->GetWindowTextW(campo);
pView.inserisciCampo(1, campo); 
```

在 CEditorTxView (CFormView) 的 inserisciCampo 函数中，我必须使用我的控件 txtCtrl 进行操作，但它丢失了 hwnd。txtCtrl 的声明在 CEditorTxView.h

```
CTx1 txtCtrl; 
```

并在 DoDataExchange 函数中对其进行初始化：

```
void CEditorTxView::DoDataExchange(CDataExchange* pDX)
{
    CFormView::DoDataExchange(pDX);
    DDX_Control(pDX, IDC_TX1, txtCtrl);
} 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:17:40.843

我可以在这里给你两个答案：

1.  如何做你所问的（从无模式对话框中访问 CFormView 的控件）
2.  如何解决您的潜在问题（在无模式对话框中将更改传达给所有者视图）

对于第一个，您必须在对话框类中声明一个指向视图的指针，并在视图的构造函数中对其进行初始化：

```
class CCampiDlg : public CDialog
{
public:
    CCampiDlg(CEditorTxView* pView,  CWnd*pParent = NULL) // Change declaration to add pointer to view
    : m_pView(pView)
    {
    }
// ... Whatever
private:
    CEditorTxView* m_pView;
} 
```

现在在您的按钮处理程序中：

```
CEdit* box2 = (CEdit*)(GetDlgItem(IDC_CAMPI_BOX2)); // Why not use a control variable?
box2->GetWindowTextW(campo);
m_pView->inserisciCampo(1, campo); 
```

这应该可以满足您的要求。但是，**这样做是错误的**。

这种方法的问题是对话框对其父级了解太多。它知道它是类型`CEditorTxView`，并且它有一个名为 的成员`inserisciCampo`，它接受一个数字和一些文本。

它不应该知道那么多。事实上，除了它是 CView 甚至 CWnd 类型之外，对它的任何了解都太多了。

如果对话框知道视图，则不能将对话框与其他视图重用，并且任何时候视图更改其表示形式（例如，现在是文本框可能是将来的组合框）对话框都必须相应更改。

解决方案是向父母发送一条消息，解释发生了什么。然后父级（视图）应该知道如何处理该事件。例如：

```
class CCampiDlg : public CDialog
{
public:
    CCampiDlg(CWnd*pParent = NULL) {}
protected:
    OnOk()
    {
        CString campo;
        c_CampiBox2.GetWindowText(campo);
        GetParent()->SendMessage(UWM_CAMPO2_SET, 0, (LPARAM)&campo);
    }
} 
```

在视图中：

```
// It can be ON_REGISTERED_MESSAGE:
ON_MESSAGE(UWM_CAMPO2_SET, OnCampo2Set)

//...    

LRESULT CEditorTxView::OnCampo2Set(WPARAM, LPARAM lParam)
{
    CString* s = (CString*) lParam;
    inserisciCampo(1, *campo);
    return 0;
} 
```

现在，您已经解耦了视图和对话框。对话框对视图一无所知。您可以更改其类型、更改表示形式，甚至将其设为对话框，而无需更改对话框中的任何内容。如果你在其他地方需要同样的无模式对话框，你只需把它放在那里，在父级中创建一个消息处理程序，瞧！

有关进一步的解释和更好的示例，请查看以下文章：

*   [对话框和控件设计](http://www.flounder.com/dlgctl.htm)（您的案例在“环境通知”部分中进行了说明）
*   [消息管理](http://www.flounder.com/messages.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:09:59.963

在 Ok 按钮上单击以下代码正在运行：

```
 CEditorTxView pView;
   box2 = (CEdit*)(GetDlgItem(IDC_CAMPI_BOX2));
   box2->GetWindowTextW(campo);
   pView.inserisciCampo(1, campo); 
```

请注意，您正在堆栈中创建新的 pView 并且它不附加任何窗口。您实际上并没有指代已经创建并启动您的对话框作为父级的视图。重新访问上面的代码并尝试获取视图：

试试下面的代码，如果它不起作用（谷歌它）

```
 CFrameWnd * pFrame = (CFrameWnd *)(AfxGetApp()->m_pMainWnd);
  CView * pView = pFrame->GetActiveView(); 
```

# sql-server - mssql 索引创建选项卡上的“仅包含”选项是什么？

> ID：12892877
> 
> 赞同：0
> 
> 时间：2012-10-15T09:34:44.487
> 
> 标签：sql-server, include, indexing

索引中的每一行（实际上是一个表列）中都有一个“仅包含”选项。它是什么，需要它做什么？

[http://pasteboard.s3.amazonaws.com/images/1350293092227927.png](http://pasteboard.s3.amazonaws.com/images/1350293092227927.png)

（用于 SQL Server 的 SQL 管理器精简版）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:43:26.090

仅包含将使其成为“包含列”。包含的列仅包含在索引的叶级别，而不是 b 树的每个级别。这可以获得键中的最大大小/列数，并允许您更轻松地覆盖查询

通常使用包含列的方式如下：

在创建索引以支持查询时，将包含在 WHERE、JOIN 和聚合函数等中的列添加到索引键中。仅出现在 SELECT 列表中的列，添加为包含的列。这意味着 SQL Server 将能够查找索引，然后从索引底部获取剩余的列，而无需跳转到堆或聚集索引来获取列。

# java - C语言中的TCP客户端和Java中的服务器

> ID：12892882
> 
> 赞同：2
> 
> 时间：2012-10-15T09:34:51.390
> 
> 标签：java, c, tcp, client-server

我想与 2 个应用程序通信：C 中的客户端向 TCP 中的服务器发送消息，Java 中的服务器接收并发送确认。

这是客户端（代码是一个线程）：

```
static void *tcp_client(void *p_data)
{
  if (p_data != NULL)
  {
    char const *message = p_data;

    int sockfd, n;
    struct sockaddr_in serv_addr;
    struct hostent *server;

    char buffer[256];
    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0) {
        error("ERROR opening socket");
    }

    server = gethostbyname(ALARM_PC_IP);

    if (server == NULL) {
        fprintf(stderr,"ERROR, no such host\n");
        exit(0);
    }

    bzero((char *) &serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    bcopy((char *)server->h_addr, (char *)&serv_addr.sin_addr.s_addr, server->h_length);
    serv_addr.sin_port = htons(TCP_PORT);

    if (connect(sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0) {
        error("ERROR connecting");
    }

    n = write(sockfd,message,strlen(message));

    if (n < 0) {
        error("ERROR writing to socket");
    }

    bzero(buffer,256);
    n = read(sockfd,buffer,255);
    if (n < 0) {
      error("ERROR reading from socket");
    }
    printf("Message from the server : %s\n",buffer);
    close(sockfd);
  }

  return 0;
} 
```

和java服务器：

```
try {
    int port = 9015;
    ServerSocket server=new ServerSocket(port);
    System.out.println("Server binded at "+((server.getInetAddress()).getLocalHost()).getHostAddress()+":"+port);
    System.out.println("Run the Client");

    while (true) {
        Socket socket=server.accept();
        BufferedReader in= new BufferedReader(new InputStreamReader(socket.getInputStream()));
        System.out.println(in.readLine());
        PrintStream out=new PrintStream(socket.getOutputStream());
        out.print("Welcome by server\n");
        out.flush();
        out.close();
        in.close();
        System.out.println("finished");
    }
} catch(Exception err) {
    System.err.println("* err"+err);
} 
```

使用 n = read(sockfd,buffer,255); 客户端正在等待响应，对于服务器，消息永远不会结束，因此它不会使用 PrintStream 发送响应。

如果我删除这些行：

```
bzero(buffer,256);
n = read(sockfd,buffer,255);
if (n < 0) {
  error("ERROR reading from socket");
}
printf("Message from the server : %s\n",buffer); 
```

服务器知道消息已完成，但客户端无法接收响应。

怎么解决？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:49:54.757

in.readLine() 等待流中的 NL、CR 或 CR+NL。确保您在客户消息中发送。

# android - 微调器 setonitemselectedlistener 未被调用

> ID：12892887
> 
> 赞同：5
> 
> 时间：2012-10-15T09:35:34.310
> 
> 标签：android, spinner

我有一个奇怪的问题。选择Spinner的项目时，我需要做某事。

这是我的代码：

```
language = (Spinner) findViewById(R.id.current_language_text);

ArrayAdapter adapter = new ArrayAdapter(this,
                com.Orange.R.layout.my_spinner_textview, languages);

adapter.setDropDownViewResource(com.Orange.R.layout.multiline_spinner_dropdown_item);
language.setAdapter(adapter);
language.setSelection(Integer.valueOf(language_id) - 1);
language.setOnItemSelectedListener(new OnItemSelectedListener() {
     @Override
     public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
        System.out.println("position "+position);
        Toast.makeText(Settings.this, "Hello Toast",Toast.LENGTH_SHORT).show();

     }

      @Override
      public void onNothingSelected(AdapterView<?> parentView) {
                            // your code here
      }
    }); 
```

问题是`onItemSelectedListener`没有调用。我输入了`System.out.println`，`onItemSelected()`但我没有在 LogCat 中得到它。我试过了`Toast`，我得到了同样的结果，它没有出现。每次我从微调器中选择一个项目时，在 LogCat 中我都会收到以下警告：

```
Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@2b1dabd0 
```

知道为什么不调用 onItemSelectedListener 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-23T06:01:17.780

您是否在 manifest.xml 中添加了活动

```
<activity android:name=".YourActivity" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T05:24:09.083

添加类似这样的内容。

```
 example=spinnerdistrics.getItemAtPosition(position).toString(); 
```

# ios - PlayN iOS横向模式

> ID：12892889
> 
> 赞同：2
> 
> 时间：2012-10-15T09:35:39.360
> 
> 标签：ios, landscape, playn

我的游戏专为横向设计（屏幕分辨率 1024*768 - iPad 分辨率）。

我的游戏场景在 PlayN 支持的每个平台（Android、html 等）上都能正确渲染。只有iOS的问题。

我已经为 iPad 屏幕分辨率、设置 info.plist 文件、注册平台使用准备了所有资源`IOSPlatform.register(app, IOSPlatform.SupportedOrients.LANDSCAPES);`

当我运行我的应用程序时，有关设备方向的所有内容都是正确的，但游戏场景并未完全呈现。它以 768*768 分辨率渲染（并非所有场景对象都可见 - 只有属于 768*768 矩形的对象可见），剩余屏幕空间为黑色。

我通过以下方式调查了这个问题：

1.  对 rootLayer 应用缩放变换（以确保渲染整个场景）。`PlayN.graphics().rootLayer().setScale(0.75f, 0.75f);` 结果 - 游戏场景适合 768*768 矩形，我可以看到所有游戏场景对象。
2.  将平移变换应用到 rootLayer（以确保 PlayN 不会渲染 768*768 矩形之外的场景）。 `PlayN.graphics ().rootLayer().setTranslation(1024.0f - 768.0f, 0.0f);` 结果 - 游戏场景被翻译，但不属于 768*768 屏幕矩形的对象不可见。

我的猜测是 PlayN 为 768*1024 屏幕分辨率（默认 iPad 方向分辨率）准备了绘图上下文。当它渲染屏幕时，位于 768*1024 矩形之外的对象被剪裁（不渲染）。

任何可能导致这种奇怪行为的帮助或想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:51:08.833

The problem is in the following:

*   iOS doesn't change main window frame and root view frame after device rotation (while Android does - I've checked).
*   PlayN code expects that view size after rotation should be changed from 768*1024 (default orientation) to 1024*768.

Actual result: PlayN transforms game scene using transform matrix but doesn't change OpenGL framebuffer size (framebuffer size is still 768*1024)

I've fixed this issue by adding the next piece of code to `IOSGLContext`:

```
@Override
public void setSize (int width, int height)
{
    if (UIDeviceOrientation.LandscapeLeft == orient || UIDeviceOrientation.LandscapeRight == orient)
    {
        Console.WriteLine("Swap IOSGLContext width and height for " + UIDeviceOrientation.wrap(orient));
        viewWidth = height;
        viewHeight = width;
    }
    else
    {
        viewWidth = width;
        viewHeight = height;
    }
    super.setSize(viewWidth, viewHeight);
} 
```

Now everything work as expected!

If you have any other ideas how to fix this issue I will be glad to discuss them)

Thanks!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:51:20.757

下载最新的 PlayN-1.5 快照（来自 -> [https://github.com/threerings/playn](https://github.com/threerings/playn)而不是来自谷歌代码）。此问题已在该版本中修复

# javascript - innerText 在 Firefox 中不起作用

> ID：12892898
> 
> 赞同：2
> 
> 时间：2012-10-15T09:36:08.307
> 
> 标签：javascript, jquery, internet-explorer, firefox, innertext

这是我的代码：

```
<div id="code">My program<br />It is here!</div>
<script type="text/javascript">
var program=document.getElementById('code');
ShowLMCButton(program.innerText);
</script> 
```

它在 IE 中有效，但在 Firefox 中，innerText 不起作用。如何在 Firefox 中使用它？我试过 .text() 但它不想工作！我需要文本格式为“我的程序\n 它在这里！”

这是什么，是从站点复制 VB 脚本并将其直接粘贴到程序中，并且它必须包含所有新行等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-15T17:29:22.187

如您所说，FireFox 不支持 innerText 。我发现innerHTML 可以很好地解决这个问题。

来自：document.getElementById('<%= LblMapLat.ClientID %>').innerText 至：document.getElementById('<%= LblMapLat.ClientID %>').innerHTML

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:38:15.340

您使用了标签[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")，所以我假设您使用 jQuery。因此，您必须引用**jQuery**对象而不是`HTMLObject`.

```
<div id="code">My program<br />It is here!</div>
<script type="text/javascript">
    var program = $('#code');
    ShowLMCButton(program.text());
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T09:39:50.037

您可以检查浏览器的功能支持以相应地使用正确的属性。

```
var program=document.getElementById('code');
if(document.all){
     ShowLMCButton(program.innerText);
} else{
     ShowLMCButton(program.textContent);
} 
```

document.all 将基本上确定浏览器是否为 IE（Microsoft 对 W3C 标准的扩展）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T11:06:22.337

innerText 在 firefox 中不起作用。如果可以，请使用 innerHTML。如果不能，您可以使用 textContent 。你应该这样做，同时使用 Firefox 和 IE：

```
ShowLMCButton(program.innerText||program.textContent); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-08T07:06:26.417

使用，`textContent`它也适用于 Firefox 和 IE。

# authentication - 如何在 WCF 数据服务中获取客户端凭据

> ID：12892903
> 
> 赞同：1
> 
> 时间：2012-10-15T09:36:21.453
> 
> 标签：authentication, wcf-data-services

我需要有关如何从 WCF 数据服务中的调用客户端检索用户名和密码的帮助。客户端 (Android) 正在使用由 IIS 处理的 https 上的基本身份验证访问 WCF 数据服务。然后，WCF 数据服务需要访问 asmx 服务，为此我需要指定网络凭据，即用户名和密码。一种方法是将用户名和密码指定为 WCF 数据服务上的服务操作的输入参数，但我认为如果你能以某种方式从 http 请求中获取凭据会更干净吗？

# c++ - 生成向量

> ID：12892906
> 
> 赞同：-4
> 
> 时间：2012-10-15T09:36:28.910
> 
> 标签：c++, math

我有一条从 (x0, y0, z0) 开始并在屏幕上的一个像素处结束的光线。此外，我有一个 A x B 像素的屏幕。

如何在 (i,j) 像素处生成从起点到终点的光线？

我知道这个公式，但我无法在 c++ 中实现它。感谢帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T09:40:31.037

你没有足够的信息。

你得知道：

1.  视点（即相机在看什么点）
2.  视野
3.  定义相机相对于世界坐标的方向的“上”和“右”向量。

这是我自己的光线追踪器中的一些相关代码：

```
camera::camera(const point3& _eye, const point3& _center) :
    eye(_eye), center(_center)
{
    up.set(0, 1, 0);
    recalc();

    fov(30);
    m_aspect = 4.0 / 3;
}

camera::camera(const point3& _eye, const point3& _center, const vector3& _up) :
    eye(_eye), center(_center), up(_up)
{
    recalc();

    fov(30);
    m_aspect = 4.0 / 3;
}

void camera::recalc()
{
    // renormalise the up vector
    up.normalise();

    // calculate unit view direction vector
    view = vector3(eye, center);
    view.normalise();

    // and the right hand view vector
    right.cross(view, up);
    right.normalise();

    // and re-base the up vector (may not be normalised)
    up.cross(right, view);
}

void camera::fov(double fovy)
{
    m_fovy = math::deg2rad(fovy) / 2.0;
    m_tanf = tan(m_fovy);
}

void camera::aspect(double aspect)
{
    m_aspect = aspect;
}

void camera::aspect(int x, int y)
{
    m_aspect = (double)x / y;
}

ray camera::cast_ray(double x, double y) const
{
    vector3 dir(view);  
    dir.add_scaled(right, m_tanf * m_aspect * x);
    dir.add_scaled(up, m_tanf * y);
    dir.normalise();

    return ray(eye, dir, 0, 1.0);
} 
```

# django - 扩展 django 组和权限

> ID：12892907
> 
> 赞同：10
> 
> 时间：2012-10-15T09:36:37.777
> 
> 标签：django, django-models, django-permissions

过去 3 天我一直在搜索 Google 和 Stackoverflow，但找不到类似的东西。我想扩展或使用 django 组和权限。

假设我们有一些具有不同团队和用户的项目。

```
class Project(models.Model):
    owner = models.ForeignKey(User)
    name = models.CharField(max_length=100)

class Team(models.Model):
    project = models.ForeignKey(Project)
    members = models.ManyToManyField(User)
    name = models.CharField(max_length=100)
    permission = models.ManyToManyField(Permission) 
```

现在 - 一切都很好。现在我想要扩展 django 提供的现有 Auth.Group 以便我可以使用`request.user.has_perm...`直接方式。

因此，让我们将*Team-Model*更改为

```
class Team(Group):
    project = models.ForeignKey(Project)
    members = models.ManyToManyField(User) 
```

这扩展了现有的集团。`name`and`permissions`字段直接来自Group *-Model*。如果我创建一个新*Team*，也会添加一个*Group*。那太棒了。

使用我还可以添加的自定义`save`方法，`user`将`members`添加到创建的*Group*中，并获得授予*Team/Group*的权限。

现在我的问题是，*组*`name`的字段是唯一的 - 所以我无法为每个项目添加一个*管理员- 团队。*

 **我考虑为前端添加另一个名称字段，并为*Group-Model*的名称字段生成一个唯一的字符串。但是嗯....对于多个自定义组有更好的解决方案吗？也许有人有想法？先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T10:09:32.600

您需要使组名唯一。因此，您发现的一种方法是使用另一个名称字段，使其对所有子组都是唯一的。

另一种方法是利用现有的名称字段并添加您的特殊字符。例如带有 等的组名`admin#project1`（`members#project1`注意：我不确定组名中是否允许使用“#”，您可以选择任何允许的特殊字符）。

因此，每当您创建时，您都会在模型方法`Team`中使用后缀更新名称字段。`#<project_name>``Team``save()`

为了更清晰地显示它，您可以添加`__unicode__()`方法以仅返回组名的第一部分。例子：

```
class Team(Group):
    ...
    def __unicode__(self):
        try:
            return self.name.split('#')[0]
        except:
            #something wrong!
            return self.name 
```**

# java - 更改jframe中图标的大小和形状

> ID：12892908
> 
> 赞同：0
> 
> 时间：2012-10-15T09:36:48.090
> 
> 标签：java, swing, icons, jframe, awt

我用以下代码在 java 中创建了一个 jframe。这是创建在给定 url 中传递的图像的自定义图标。但是它的尺寸非常小，我可以将它的形状从矩形更改为圆形请帮助

```
 class newframe extends JFrame 
  {

 Container cp;
   newframe()
   {
      cp=this.getContentPane();
      cp.setLayout(null);
    }

    public static void main(String args[])
    {
      newframe frm= new newframe(); 

      frm.setbounds(0,0,1000,800);
      frm.setVisible(true);
      ImageIcon im1= new ImageIcon("path upto image");
      frm.setIconImage(im1.getImage());
     }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:19:36.090

你不能改变`Icon`for的大小`JFrame`，因为 T 的属性`op-Level Container`来自`Native OS`，AFAIK 并且因为

*   图标可以

    a)`fill`所有可用区域

    b)`smaller`比可用面积

    c)`only part of`图标可见，因为大于可用区域

*   的大小`Icon`是平台敏感的（`WinXP == 16 x 16`取决于`Win7`当前主题`16 x 16`或`32 x 32`）

*   有两种[自定义外观](https://stackoverflow.com/questions/3954616/java-look-and-feel-lf)实现了对`Top-Level Container`来自的属性的自己的注入`Native OS`，其中之一是`Substance L&F`，第二个并不重要，因为触及阴影区域，并且需要删除工具栏并返回修改后的内容（肮脏的黑客）

*   for `JFrame`based on`JSR296 in Netbeans`是不可能改变`Icon`for 的`Top-Level Containers`，因为这个 Swing 框架要覆盖和保护一些重要的方法，必须覆盖`RootPane`（请不要这样做，需要大量的 hack，结果将只是`Borders`（没有内容的透明窗口）`ContentPane`， 无路可返）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:52:14.723

**仅适用于 WINDOWS 7！**

当您将宽度设置为 32x32 像素时，超级栏中的 JFrame 窗口的图标会更大。它应该是这个大小，因为当它不是 32x32 时，它只显示 16x16 像素。

# php - 需要动态添加复选框

> ID：12892909
> 
> 赞同：1
> 
> 时间：2012-10-15T09:36:49.013
> 
> 标签：php, javascript, html, ajax

我正在尝试借助 javascript 动态添加复选框。但是我的 java 脚本只替换了早期的元素。我需要将新选择的元素添加到现有列表中。这是代码。请帮忙。

这是 index.php

```
<html>
<head>
<script>
function select_item(item,price)
{
if (item.length==0 || price.length==0 )
  { 
  document.getElementById("order").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("order").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","order.php?item="+item+"&price="+price,true);
xmlhttp.send();
}
</script>
</head>
<div id="order"></div>
</html>
<?php
echo "<a href=\"#\" onClick = \"select_item('Value1','Price1'); return false;\">Some Item1 here</a>";
echo "<br>";
echo "<a href=\"#\" onClick = \"select_item('Value2','Price2'); return false;\">Some Item2 here</a>";
?> 
```

这是 order.php

```
<?php
$item=$_GET["item"];
echo "<form action=\"#\">";
echo "<input type=\"checkbox\" checked=\"yes\" name=\"vehicle\" value=\"Bike\">$item<br>";
echo "</form>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:00:22.857

你可以使用这个：

```
<form action ....
<div id="order"></div> 
</form> 
```

和

```
document.getElementById("order").innerHTML+=xmlhttp.responseText; 
```

和 order.php

```
<?php  
$item=$_GET["item"];  
echo "<input type=\"checkbox\" checked=\"yes\" name=\"vehicle\" value=\"Bike\">$item<br>";  
?> 
```

# algorithm - 如何找到最长的回文子序列（不是它的长度）

> ID：12892912
> 
> 赞同：5
> 
> 时间：2012-10-15T09:37:05.603
> 
> 标签：algorithm, dynamic-programming

我想找出字符串中最长的回文子序列。我到处都能找到找出子序列长度的算法，并声明该算法也可以扩展以返回子序列，但我无处可寻。谁能解释我怎样才能得到序列？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T16:49:26.857

由于您在 geeksforgeeks 中提到了[Longest Palindromic Subsequence](http://www.geeksforgeeks.org/archives/19155)链接，因此我修改了解决方案以输出结果。我想我们需要一个辅助的二维数组来存储回文子序列是怎么来的，所以我们最后可以通过辅助数组得到结果。您可以在下面的代码中看到逻辑：

```
#include<iostream>
#include<cstring>

using namespace std;

// A utility function to get max of two integers
int max (int x, int y) { return (x > y)? x : y; }

// Returns the length of the longest palindromic subsequence in seq
int lps(char *str,char *result)
{
   int n = strlen(str);
   int i, j, cl;
   int L[n][n];  // Create a table to store results of subproblems

   int Way[n][n];// Store how the palindrome come from.

   // Strings of length 1 are palindrome of lentgh 1
   for (i = 0; i < n; i++)
   {
       L[i][i] = 1;
       Way[i][i]=0;
   }

    // Build the table. Note that the lower diagonal values of table are
    // useless and not filled in the process. The values are filled in a
    // manner similar to Matrix Chain Multiplication DP solution (See
    // http://www.geeksforgeeks.org/archives/15553). cl is length of
    // substring
    for (cl=2; cl<=n; cl++)
    {
        for (i=0; i<n-cl+1; i++)
        {
            j = i+cl-1;
            if (str[i] == str[j] && cl == 2)
            {
                   L[i][j] = 2;
                   Way[i][j]=0;     
            }

            else if (str[i] == str[j])
            {
                  L[i][j] = L[i+1][j-1] + 2;
                  Way[i][j]=0;
            }

            else
            {
                if(L[i][j-1]>L[i+1][j])
                {
                   L[i][j]=L[i][j-1];
                   Way[i][j]=1;                    
                }
                else
                {
                    L[i][j]=L[i+1][j];
                    Way[i][j]=2;  
                }

            }

        }
    }

    int index=0;
    int s=0,e=n-1;

    while(s<=e)
    {
         if(Way[s][e]==0)
         {
             result[index++]=str[s];
             s+=1;
             e-=1;

         }
         else if(Way[s][e]==1)e-=1;
         else if(Way[s][e]==2)s+=1;     
    }

    int endIndex=(L[0][n-1]%2)?index-1:index;

    for(int k=0;k<endIndex;++k)result[L[0][n-1]-1-k]=result[k];

    result[index+endIndex]='\0';

    return L[0][n-1];
}

/* Driver program to test above functions */
int main()
{
    char seq[] = "GEEKSFORGEEKS";
    char result[20];
    cout<<"The lnegth of the LPS is "<<lps(seq,result)<<":"<<endl;
    cout<<result<<endl;
    getchar();
    return 0;
} 
```

希望能帮助到你！

下面是解释：

令 X[0..n-1] 为长度为 n 的输入序列，L(0, n-1) 为 X[0..n-1] 的最长回文子序列的长度。

总共有5个案例。

1）每个字符都是长度为 1 的回文。对于给定序列中的所有索引 i，L(i, i) = 1。

2）只有2个字符，两者相同。L(i, j) = 2。

3）有两个以上的字符，首尾字符相同 L(i, j) = L(i + 1, j - 1) + 2

4)首尾字符不相同且L(i + 1, j)< L(i, j - 1)。L(i, j) = L(i, j - 1)。

5)首尾字符不相同且L(i + 1, j)>=L(i, j - 1)。L(i, j) = L(i + 1, j)。

我们可以观察到，只有在情况 1,2 和 3 中，字符 X[i] 才会包含在最终结果中。我们用一个二维辅助数组来表示回文子序列是怎么来的。案例 1、2、3 的值为 0；案例 4 的值为 1；案例 5 的值为 2。

用辅助阵方式。我们可以得到如下结果：

```
Let two variables s=0 and e=n-1.
While s<=e
Loop
    If Way[s][e]==0 Then X[s] should be included in the result and we store it in our result array.
    Else if Way[s][e]==1 Then X[s] should not be include in the result and update e=e-1 (because our result comes from case 4).
    Else if Way[s][e]==2 Then X[s] should not be include in the result and update s=s+1 (because our result comes from case 5). 
```

当 s>e 时应终止循环。这样我们可以得到一半的结果，我们可以很容易地扩展它来得到整个结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T10:07:39.420

在每个单元格的动态编程表中保留一个反向指针和一个值。然后按照表末尾的回溯来重构子序列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T11:57:51.070

诀窍是这样的：

*   将字符串的反向保存在临时缓冲区中
*   使用[最长公共子串算法](http://en.wikipedia.org/wiki/Longest_common_substring_problem "最长公共子串算法")找到 LCS。

请注意，根据您的第二个字符串的定义，两个字符串的 LCS 也是最长的回文。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-24T05:14:13.930

下面的解决方案非常简单，不需要额外使用任何其他矩阵。在这里，我们只是追溯生成最长回文子序列的路径。

```
int lps(char *str)
{
   int n = strlen(str);
   int i, j, cl;
   int L[n][n];  
   for (i = 0; i < n; i++)
      L[i][i] = 1;
    for (cl=2; cl<=n; cl++)
    {
        for (i=0; i<n-cl+1; i++)
        {
            j = i+cl-1;
            if (str[i] == str[j] && cl == 2)
               L[i][j] = 2;
            else if (str[i] == str[j])
               L[i][j] = L[i+1][j-1] + 2;
            else
               L[i][j] = max(L[i][j-1], L[i+1][j]);
        }
    }
    cout<<L[0][n-1]<<endl;
    i = 0,j = n-1;
    vector<char> result;
    while(i<=j)
    {
        if(str[i]==str[j])
        {
            result.push_back(str[i]);
            i++,j--;
        }
        else if(L[i][j-1]>L[i+1][j])
        {
            j--;
        }
        else
        {
            i++;
        }
    }
    if(L[0][n-1]%2==0)
    {
        for(auto i = result.begin();i!=result.end();i++)
            cout<<*i;
        reverse(result.begin(),result.end());
        for(auto i = result.begin();i!=result.end();i++)
            cout<<*i;
    }
    else
    {
        for(auto i = result.begin();i!=result.end();i++)
            cout<<*i;
        reverse(result.begin(),result.end());
        result.erase(result.begin());
        for(auto i = result.begin();i!=result.end();i++)
            cout<<*i;
    }  
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-06T19:44:34.770

**Java 方法。从计算回文子序列长度期间生成的 LPS 矩阵构建字符串。**

```
private static void LongestPalindromicSubsequence(char a[])
{
    int len=a.length;
    int lps[][]=new int[len][len];
    int l=1;

    for(int i=0;i<len;i++)
    {
        lps[i][i]=1;        //---------> Length of subsequence of string of length=1 is 1 <------------
    }

    for(int subsLen=2;subsLen<=len;subsLen++)
    {
        for( int i=0;i<(len-subsLen+1);i++)
        {
            int j=i+subsLen-1;

            if(a[i]==a[j]&&subsLen==2)
            {
                lps[i][j]=2;

            }
            else
            {
                if(a[i]!=a[j])
                {
                    lps[i][j]=Math.max(lps[i+1][j],lps[i][j-1]);
                }
                else
                {
                    lps[i][j]=2+lps[i+1][j-1];
                }
            }
        }
    }

   // System.out.println("Length of longest Palindromic subsequence: "+lps[0][len-1]);

    printLongestPalindromicsubsequence(a,lps);

}

private static void printLongestPalindromicsubsequence(char[] a, int[][] lps)
{
    int len=a.length;
    int end=lps[0][len-1];
    char str[]=new char[end+1];
    str[end--]='\0';
    int i=0,j=len-1;
    while(end>=0&&i<=j)
    {
        if(a[i]==a[j])
        {
            str[end--]=a[i];
            i++;
            j--;
        }
        else
        {
            if(lps[i+1][j]>lps[i][j-1])
            {
                i++;
            }
            else
            {
                j--;
            }
        }
    }

    if(lps[0][len-1]%2!=0)
    {
        i=0;
        int mid=lps[0][len-1]/2;
        j=str.length-2;
        while(j>mid)
        {
            str[i++]=str[j--];
        }
    }
    else        
    {  

        i=0;
        int mid=lps[0][len-1]/2;
        j=str.length-2;
        while(j>=mid)
        {
            str[i++]=str[j--];
        }
    }

    for(i=0;i<str.length;i++)
        System.out.print(str[i]);

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-19T06:06:16.363

一个示例 java 实现。随意对您的评论评论残酷。

```
public class LongestPalindrome {
    public static void main(String... arguments) {
        final String content = "GOBANANAS";
        String palindrome = getLongestPalindrome(content);
        System.out.println(palindrome);
    }

    private static String getLongestPalindrome(final String content) {
        String lastPalindrome = "";
        for (int lastIndex = content.length(); lastIndex >= 0; lastIndex--) {
            for (int i = 0; i <= lastIndex; i++) {
                String part = content.substring(i, lastIndex);
                if (part.length() > lastPalindrome.length() && part.length() > 1) {
                    boolean isPalindrome = isPalindrome(part);
                    if (isPalindrome) {
                        lastPalindrome = part;
                        System.out.println(String.format("%s : %s", part, isPalindrome));
                    }
                }
            }
        }

        return lastPalindrome;
    }

    private static boolean isPalindrome(String string) {
        String reverse = (new StringBuilder(string)).reverse().toString();
        return (string.equals(reverse));
    }
} 
```

# sql-server - 如何防止在 SQL Server 2008 R2 中重命名列和表

> ID：12892915
> 
> 赞同：0
> 
> 时间：2012-10-15T09:37:14.917
> 
> 标签：sql-server, sql-server-2008-r2, rename

我想通过以下方式保护数据库：

*   应保护表免受删除和重命名
*   应保护列免受删除和重命名
*   允许添加表和列

把它放到上下文中：它是一个`vocabularies`数据库（查找表），它将成为中央主副本，被分发到其他数据库（在同一台服务器上，将来到其他服务器（甚至是非 SQL 服务器系统）。

可以通过客户端数据库可以继续工作并在出现更新时获取更新的方式来处理添加表和列。另一方面，删除表和列必须以不同的、精心安排的方式处理。

我创建了一个 DDL 触发器来锁定表和列的删除，这很容易。
不幸的是，重命名表和列似乎是由该`sp_rename`过程处理的，并且该过程使用以下结构：

```
EXEC %%Object(ID = @objid).SetName(Name = @newname) 
```

这不是由 DDL 触发器拾取的。有什么方法可以确保不重命名表和列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:42:49.230

对于每个表，使用模式绑定创建一个视图，如以下代码所示：

```
CREATE VIEW PreventDropOnT1
WITH SCHEMABINDING 
AS
    SELECT Col1, Col2
    FROM T1 
```

# php - Php Exec Wget 不工作

> ID：12892916
> 
> 赞同：0
> 
> 时间：2012-10-15T09:37:18.170
> 
> 标签：php

我需要通过 php 在后台运行一些**网站 url**（http://domain.com/user.php?id=uniquetoken）（注意：**网站 url**包含 html、php 和 javascript ajax 请求）

我尝试了下面的代码，但它不起作用。谁能说出这有什么问题，或任何替代解决方案。

```
exec("wget http://domain.com/user.php?id=uniquetoken > /dev/null 2>&1 &"); 
```

Ps：我真正需要的是，当用户访问一个网站时，即使在他们关闭浏览器后也必须完成一些后台进程。（因为后台进程需要2分钟以上才能完成）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:29:06.187

实际上，这不是最好的方法。我没试过，但是当 PHP 进程终止时，它也会杀死你用*exec()*启动的孩子。当用户取消页面加载时，它无论如何都会停止。

您应该设置一个后台进程（例如，一个 PHP-CLI 脚本），并设置一个机制，用于从网站请求中触发该进程。比如说，bg proc 应该检查 db 表中的新记录，如果有的话，执行工作，然后删除记录。网页 PHP 应向其插入新的工作指令记录。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-15T09:39:10.540

试试`file_get_contents("http://domain.com/user.php?id=uniquetoken");`。

PHP 有一个叫做“fopen url wrappers”的东西，它允许所有文件系统函数也使用 HTTP 和 FTP 之类的东西。

# xcode - iPad 模拟器 6.0 页面方向不起作用

> ID：12892918
> 
> 赞同：2
> 
> 时间：2012-10-15T09:37:35.280
> 
> 标签：xcode, ipad, cordova, ios-simulator, orientation

我最近将 xcode 升级到安装了 iPad 6.0 的 4.5。现在，当我在其中运行 PhoneGap html5 应用程序时，模拟器内的页面没有旋转，它正在使用早期版本的 xcode。当我将模拟器从纵向更改为横向时，应用程序的 html 页面保持纵向，它不会与模拟器一起旋转到横向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T15:11:22.523

这个解决方案对我有用：

编辑 AppDelegate.m：

查找：[self.window addSubview:self.viewController.view]；

替换为以下代码：

self.window.rootViewController = self.viewController;

如果您仍在显示状态栏，则在内部：MainViewController.m：

[超级viewDidLoad]之后；

```
// Do any additional setup after loading the view from its nib. 
```

添加

```
self.webView.frame = CGRectMake ( 0, 15, self.view.frame.size.width, self.view.frame.size.height-15); 
```

可能不是最好的解决方法，但它对我有用！

# c# - XML 命名空间别名不可知的 .NET XML 阅读器/解析

> ID：12892922
> 
> 赞同：2
> 
> 时间：2012-10-15T09:37:56.937
> 
> 标签：c#, .net, xml, xml-parsing, xml-namespaces

如何读取/解析 XML 命名空间别名未知的 XML 文档？XML 文档的结构和名称空间是已知的，但别名不知道。例如

```
<?xml version="1.0" encoding="utf-8"?>
<Order xmlns:aa="urn:namespace1"
       xmlns:bb="urn:namespace2">
  <aa:Quantity>1</aa:Quantity>
  <bb:Price>9.98</bb:Price>
</Order> 
```

或者

```
<?xml version="1.0" encoding="utf-8"?>
<Order xmlns:cc="urn:namespace1"
       xmlns:dd="urn:namespace2">
  <cc:Quantity>1</cc:Quantity>
  <dd:Price>9.98</dd:Price>
</Order> 
```

**更新**：我事先不知道 XML 命名空间别名。他们可以是任何东西。

我需要使用 AddNameSpace 方法为 XmlNamespaceManager 提供命名空间列表和别名，如下所示：

```
XPathDocument xDoc = new XPathDocument(“Path to my file”); 
XPathNavigator xNav = xDoc.CreateNavigator();
XmlNamespaceManager xmlns = new XmlNamespaceManager(xNav.NameTable);
xmlns.AddNamespace("aa", "urn:namespace1");
xmlns.AddNamespace("bb", "urn:namespace2"); 
```

但这不是 XML 命名空间不可知论者。我的第二个文档使用 cc 和 dd 作为同一个命名空间的别名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:03:15.113

您提供的代码**与**名称空间无关，因为源 XML 中使用的名称空间前缀无关紧要。鉴于您问题中的命名空间定义，您必须使用您在 XPATH 中定义的前缀，例如您必须使用`aa`and `bb`。

```
var quantity = xNav.SelectSingleNode("/Order/aa:Quantity", xmlns); 
```

但是，只要名称空间和正确使用，此代码仍将成功地从 XML 中选择前缀`cc`和使用的位置。`dd``urn:namespace1``urn:namespace2`

为了能够在 XPATH 中包含命名空间前缀，您必须使用接受[`IXmlNamespaceResolver`](http://msdn.microsoft.com/en-us/library/system.xml.ixmlnamespaceresolver.aspx).

重申：当您使用以下代码定义命名空间时

```
xmlns.AddNamespace("aa", "urn:namespace1"); 
```

您声明在您的代码中（例如，在您打算使用的 XPATH 中）您将使用 namespace 前缀`aa`作为 namespace `urn:namespace1`。

在要解析的 XML 中，使用属性分配命名空间：

```
xmlns:cc="urn:namespace1" 
```

字符串`urn:namespace1`匹配两个地方以使用该特定命名空间是很重要的。前缀分别是您的代码和 XML 文件的本地前缀，它们**不必**匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:15:04.910

文档中使用的命名空间别名无关紧要 - 它们只是文档中使用的别名，可以是该文档的作者在创作该文档时想要使用的任何名称（它们甚至可以更改中间文档）。

要以与别名无关的方式访问此文档，只需提供您想要使用的任何别名`XmlNamespaceManager`，然后使用该别名来访问该文档，例如

```
XmlNamespaceManager xmlns = new XmlNamespaceManager(xNav.NameTable);
xmlns.AddNamespace("foo", "urn:namespace1");
xmlns.AddNamespace("bar", "urn:namespace2"); 
```

**这些别名不需要与文档中使用的别名相匹配**- 这样您就可以使用 XPath 表达式使用这些命名空间的`foo`和`bar`别名来导航文档，而不管文档本身使用的别名如何（只要您提供)的实例`XmlNamespaceManager`。

# interface-builder - 应用程序因“无法实例化名为 NSLayoutConstraint 的类”而崩溃

> ID：12892926
> 
> 赞同：0
> 
> 时间：2012-10-15T09:38:10.803
> 
> 标签：interface-builder, ios6, iphone-5

在 .xib 文件中，我如何为 iOS 6 保持 Autolayout 为开启状态，但对于低于 6 的 iOS 系统为关闭。

如果我将其关闭，我的 .xib 将无法获得正确的布局。如果我在 4.3 崩溃的情况下打开我的 Iphone。

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:21:16.237

我不相信这是可能的，因为自动布局会改变您的应用程序的编译方式。我考虑过的解决方法是：

*   检测显示器的高度并以编程方式更改一些元素（不错，但我已经这样做了，而这只是一个简单的更改）
*   检测显示器的高度并以编程方式加载适当的笔尖（缺点是保持两个笔尖）
*   忽略 4" 显示器并提交黑色边框（假设没有人想要这个）
*   尝试设计不会因拥有一些额外空间而受到影响的布局。（这总是可取的，但并不总是可能的。UIScrollViews/UITableViews 绝对适合这个，但不是固定的全屏视图。）

我自己仍在寻找更好的解决方案。

这是我用来确定 4" 与 3.5" iphone 的代码：

```
if (screenBounds.size.height == 568) {
    // code for 4-inch screen
} else {
    // code for 3.5-inch screen
} 
```

即使这看起来很骇人听闻，但请与 Apple 谈谈。:|

# iphone - 即使出现键盘，如何在 UITextfield 中设置光标？通过代码？

> ID：12892929
> 
> 赞同：0
> 
> 时间：2012-10-15T09:38:13.640
> 
> 标签：iphone

我用

```
[textField becomeFirstResponder]; 
```

设置键盘总是出现，但 UITextfield 中缺少光标。

当键盘出现时，如何设置光标仍然显示？？？

```
#import "Utility.h"
#import "InputViewController.h"
#import "SmsViewController.h"

@implementation InputViewController
@synthesize label,subLabel,textField;
@synthesize input,min,max,inputNo,letterOnly;
@synthesize nextInputViewController;

static NSMutableArray* inputList = nil;
static NSCharacterSet* letterSet;
static NSCharacterSet* digitSet;

+ (NSMutableArray*) inputList {
    if (inputList == nil) {
        inputList = [[NSMutableArray alloc] init];
    }
    return inputList;
}

// The designated initializer.  Override if you create the controller programmatically and want to perform customization that is not appropriate for viewDidLoad.
/*
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization.
    }
    return self;
}
*/

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];

   // [textField becomeFirstResponder];
    // initialize STATIC variables if neccessary
    if (inputList == nil) {
        inputList = [[NSMutableArray alloc] init];
    }
    if (letterSet == nil) {
        letterSet = [NSCharacterSet alphanumericCharacterSet];
    }
    if (digitSet == nil) {
        digitSet = [NSCharacterSet decimalDigitCharacterSet];
    }

    min = [[input objectForKey:@"Min"] intValue];
    max = [[input objectForKey:@"Max"] intValue];
    letterOnly = [[input objectForKey:@"AlphaOnly"] boolValue];

    label.text = [input objectForKey:@"Title"];
    if (letterOnly) {
        subLabel.text = [NSString stringWithFormat:@"Chú ý: Chỉ chấp nhận các ký tự A-Z a-z 0-9"];
    }
    else {
        subLabel.text = [NSString stringWithFormat:@"Chú ý: Chỉ chấp nhận các số từ 0-9"];
    }

    textField.secureTextEntry = [[input objectForKey:@"Secure"] boolValue];
    textField.keyboardType = letterOnly ? UIKeyboardTypeASCIICapable : UIKeyboardTypeNumbersAndPunctuation;
    if ([[input objectForKey:@"Input"] count] == 0) {
        textField.returnKeyType = UIReturnKeyDone;
    } else {
        textField.returnKeyType = UIReturnKeyNext;
    }

}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    // auto focus on textField for waiting input
    //[textField becomeFirstResponder];
}

/*
// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations.
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
*/

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc. that aren't in use.
}

- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [input release];
    [nextInputViewController release];
    [super dealloc];
}

- (BOOL)textField:(UITextField *)theTextField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    if (theTextField == textField) {

        // check maximum length
        if ([textField.text length] > max) {
            return NO;
        }

        // check Letter only or Digit only
        if ([string length] == 1) {
            if (letterOnly) {
                if (![letterSet characterIsMember:[string characterAtIndex:0]]) {
                    return NO;
                }
            }
            else {
                if (![digitSet characterIsMember:[string characterAtIndex:0]]) {
                    return NO;
                }
            }
        }       
    }
    return YES;
}

- (BOOL)textFieldShouldReturn:(UITextField *)theTextField {

    // When the user presses return, take focus away from the text field so that the keyboard is dismissed.
    if (theTextField == textField) {
     //   [textField becomeFirstResponder];
        int length = [textField.text length];
        if (length < min) {
            [Utility showAlert:[NSString stringWithFormat:@"%@ phải có chiều dài tối thiểu là %d!", label.text, min]];
            return NO;
        }
        else if ([label.text isEqualToString:@"Nhập mã bí mật mới"] &&
                 [textField.text isEqualToString:[inputList objectAtIndex:(inputNo-1)]] ) {

            [Utility showAlertWithTitle:@"Không hợp lệ" Content:@"Số bí mật mới giống hệt số cũ!"];
            return NO;
        }
        else if ([label.text isEqualToString:@"Xác nhận mã bí mật mới"] &&
                 ![textField.text isEqualToString:[inputList objectAtIndex:(inputNo-1)]] ) {

            [Utility showAlertWithTitle:@"Không hợp lệ" Content:@"Mã mới nhập lại không khớp với mã mới nhập lần đầu!"];
            return NO;
        }
        else {
    //      [textField resignFirstResponder];
            [self acceptInput:nil];
        }       
    }

    return YES;
}

- (IBAction)acceptInput: (id)sender {
    int length = [textField.text length];

    if (length < min) {
        [Utility showAlert:[NSString stringWithFormat:@"%@ phải có chiều dài tối thiểu là %d!", label.text, min]];
        return;
    }

    if ([inputList count] == inputNo) {
        [inputList addObject:(NSString*)textField.text];
    }
    else {
        [inputList replaceObjectAtIndex:inputNo withObject:(NSString*)textField.text];
    }

    NSDictionary* nextInput = [input objectForKey:@"Input"];

    if ([nextInput count] == 0) {
        SmsViewController* smsViewController = [[SmsViewController alloc] initWithNibName:@"SmsViewController" bundle:nil];
        smsViewController.title = @"SMS";
        smsViewController.sms = [input objectForKey:@"SMS"];
        smsViewController.smsDetails = inputList;

        NSString* confirm = [smsViewController.sms objectForKey:@"Confirm"];
        [self.navigationController pushViewController:smsViewController animated:YES];
        if (confirm == nil || [confirm isEqualToString:@""]) {

            // special case         
            [smsViewController showSMSPicker:smsViewController];
        }

        [smsViewController release];
    }
    else {
        if (nextInputViewController == nil) {
            nextInputViewController = [[InputViewController alloc] initWithNibName:@"InputViewController" bundle:[NSBundle mainBundle]];
            nextInputViewController.title = self.title;
            nextInputViewController.input = nextInput;
            nextInputViewController.inputNo = inputNo + 1;
        }       
        [self.navigationController pushViewController:nextInputViewController animated:NO];

    /*
        InputViewController *ivController = [[InputViewController alloc] initWithNibName:@"InputViewController" bundle:[NSBundle mainBundle]];
        ivController.title = self.title;
        ivController.input = nextInput;
        ivController.inputNo = inputNo + 1;
        [self.navigationController pushViewController:ivController animated:YES];
        [ivController release];
    */
    }

}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T10:36:03.820

声明您`[textField becomeFirstResponder];`在哪里声明了所有文本字段代表，例如：-

```
 _textFileld =[[UITextField alloc]initWithFrame:CGRectMake(20, 20, 280, 50)];
_textFileld.backgroundColor=[UIColor whiteColor];
_textFileld.borderStyle = UITextBorderStyleRoundedRect;
_textFileld.delegate=self;
_textFileld.clearButtonMode = UITextFieldViewModeAlways;
_textFileld.returnKeyType = UIReturnKeyDone;  
_textFileld.placeholder = GlobalButtonString;
[_textFileld becomeFirstResponder]; 
```

看看这是否有效？...

# c# - 检查当前线程是否等于构造对象的线程

> ID：12892935
> 
> 赞同：3
> 
> 时间：2012-10-15T09:38:34.230
> 
> 标签：c#

有没有办法检查`someObj.someMethod()`它是否在创建的同一线程上执行`someObj`？如果我弄乱了某些并发约束，这可以让我以后在调试时头疼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:42:01.393

唯一的方法是在创建线程 ID 时存储它。在 .NET 4.5 上：

```
readonly int ownerThreadId;
public SomeType() {
    ownerThreadId = Environment.CurrentManagedThreadId;
} 
```

然后检查中的相同术语`someMethod`。

请注意，在其他框架版本上，您可能需要：

```
ownerThreadId = Thread.CurrentThread.ManagedThreadId; 
```

反而。

# c# - 如何在不回发的情况下将 .aspx 页面动态加载到 contentplaceholder 中？

> ID：12892936
> 
> 赞同：1
> 
> 时间：2012-10-15T09:38:36.650
> 
> 标签：c#, asp.net, master-pages

我想在不进行回发的情况下将 .aspx 页面加载到 contentplaceholder 中。我拥有的是一个带有 3 个内容占位符的母版页

1.headerContent 2.leftContent 3.mainContent

我在 headercontent 中有 3 个链接，根据这 3 个链接的选择，我在 leftcontent 上显示了几个菜单。在选择左侧内容上的任何加载菜单时，我想通过代码隐藏（C#）在“maincontent”内显示/加载一个.aspx页面，而不进行刷新或回发。我想加载的 .aspx 页面没有继承母版页。

除了使用 iframe 之外，还有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:47:52.440

我可以建议使用用户控件（.ascx）而不是页面。有一个从一开始就加载所有控件的页面，该页面将使用母版页并将其内容占位符作为 mainContent。

您可以将每个控件放在页面上的 div 中，并将 div 的显示设置为无。然后您可以使用 java 脚本来显示相关的用户控件。

# ruby-on-rails-3 - 改善 Rails 加载时间

> ID：12892937
> 
> 赞同：8
> 
> 时间：2012-10-15T09:38:43.623
> 
> 标签：ruby-on-rails-3, performance

[这是上一个关于改进 rails 控制台加载时间的问题](https://stackoverflow.com/q/4736546/305019)的后续内容。

第一个很好的建议是找出[哪些宝石需要的时间太长](https://stackoverflow.com/a/5071198/305019)。

下一个答案，建议稍后使用`:require => nil`和[加载这些宝石](https://stackoverflow.com/a/7146810/305019)。

然而，对于一些宝石，如何在不破坏事物的情况下实现这一点并不完全清楚。这是我们“最大的罪犯”的列表，我想知道是否有人可以建议仅在必要时加载它们的最佳方法？

```
require gon: 2.730000 (2.870059)
require omniauth-openid: 1.410000 (1.503858)
require cancan: 2.640000 (2.707467)
require fog: 2.730000 (2.846530)
require activeadmin: 3.650000 (3.923877) 
```

当然还有更多需要大约 1 秒或更短的时间，这也加起来了……但至少删除大的已经可以改善事情了。

### 如何稍后有选择地加载 gem 以使 rails 加载更快？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-27T20:05:03.030

虽然不能直接回答您的问题，但您可以尝试以下两件事：

首先，您是否尝试过[1.9.3 的 Falcon 补丁](https://gist.github.com/1688857)？这些补丁包括一些非常重要的加载时间改进。

如果您使用的是 RVM，则可以使用

```
rvm install 1.9.3 --patch falcon -n falcon 
```

其次，确保您正在设置 GC 调整环境变量。默认情况下，Ruby 分配适合小型脚本的 GC 参数，但不适用于完整的 Rails 应用程序。这是我的设置，尽管您想根据应用程序的需要派生出自己的设置：

```
% env | grep RUBY_
RUBY_HEAP_MIN_SLOTS=800000
RUBY_HEAP_FREE_MIN=100000
RUBY_HEAP_SLOTS_INCREMENT=300000
RUBY_HEAP_SLOTS_GROWTH_FACTOR=1
RUBY_GC_MALLOC_LIMIT=79000000 
```

而我使用 ruby​​ 1.9.3-p286 的结果：

```
 Stock     Stock+GC  Falcon   Falcon+GC
                    27.13     8.43      8.63     6.69
Stock       27.13   100.00%   31.07%    31.81%   24.66%
Stock+GC    8.43    321.83%   100.00%   102.37%  79.36%
Falcon      8.63    314.37%   97.68%    100.00%  77.52%
Falcon+GC   6.69    405.53%   126.01%   129.00%  100.00% 
```

设置 GC 调整参数有最大的改进，但我们可以通过使用 falcon 补丁获得大约 26% 的性能改进。falcon 补丁加上 GC 参数的组合导致启动时间减少了 75% 以上。

# mongodb - 设置 Mongo CLI 结果大小

> ID：12892938
> 
> 赞同：3
> 
> 时间：2012-10-15T09:38:46.687
> 
> 标签：mongodb, command-line-interface

在 MongoDB 命令行中使用 find() 查询某些内容时，返回 10 个结果，我可以使用该`it`命令获取下一个 10 个结果。

如何增加退货金额？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:49:42.153

在 shell 中，您可以执行以下操作：

```
 DBQuery.shellBatchSize = 25 
```

这会将其设置为返回 25 个结果。

# multithreading - CPU 使用率与线程数

> ID：12892941
> 
> 赞同：10
> 
> 时间：2012-10-15T09:38:59.073
> 
> 标签：multithreading, performance, optimization

一般来说，CPU使用率和程序中线程数之间的关系是什么。假设：

*   多核CPU
*   线程执行完全相同的工作（假设它们从队列中获取相同的工作项并处理它们）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-15T09:43:22.820

这取决于应用程序的性质。

*   一个主要进行**计算**的应用程序- 每个内核 1 个线程的比率是一个合理的决定，因为您不想因开销而产生太多线程，并且您希望利用所有内核。
*   主要执行**IO**操作（如 http 请求）的应用程序可以产生比 #cores 更多的线程，并且仍然可以提高效率，因为瓶颈是每个 IO 请求的等待时间，并且您希望每次都获得尽可能多的信息你需要等待。

也就是说，您将获得的 CPU 使用率仍然取决于许多因素（IO、同步、程序中的非并行部分）。

如果您对应用程序的*速度*感兴趣- 永远记住[阿姆达尔定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)，它为您的应用程序将花费的时间（加速）提供了严格的限制，即使有无限数量的工作内核也是如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T09:44:30.160

没有这样的一般关系，除了明显的关系：

*   应用程序使用的 CPU 时间（CPU 秒数）不能超过可用内核数乘以它运行的（挂钟）秒数，并且
*   单个线程每秒不能使用超过一个 CPU 秒。

多线程应用程序的实际 CPU 数量主要取决于应用程序的性质以及您实现它的方式：

*   如果每个线程执行的计算不会与其他线程对锁、内存访问等产生争用，那么您应该能够接近可用 CPU 资源的理论极限。

*   争用可能会降低有效的 CPU 使用率，有时甚至会显着降低。

但是没有通用的公式可以告诉您可以获得多少加速。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T09:43:09.177

我认为没有关系或不容易。这取决于线程正在执行的工作。具有一个线程的程序可以消耗 100% 的 CPU，而具有大量线程的程序可以消耗更少的 CPU。

如果您正在寻找线程和已完成工作之间的优化关系，您必须研究您的案例，并可能找到一个经验解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T09:51:53.267

正如其他答案已经指出的那样，“这取决于”。在理想的世界中，对于 n 个内核，您将获得因子 n 的吞吐量，因为您在每个内核上的单独线程中执行相同的工作（这已经包含一个错误的假设，因为您需要以某种方式同步线程时它们从同一个队列中读取）。

[了解 Disruptor，硬核并发初学者指南](http://www.youtube.com/watch?feature=player_embedded&v=DCdGlxBbKU4)给出了一些很好的例子，你需要在并行任务时考虑什么，并且还展示了一些尝试并行化导致执行时间更长的情况。

# c++ - C++ 模板类复制构造函数和赋值运算符

> ID：12892942
> 
> 赞同：1
> 
> 时间：2012-10-15T09:38:59.770
> 
> 标签：c++, class, templates

我有一个模板类 Triple 的实现，它是一个包含任意三种类型的容器。我的问题是，我的类将三个对值的 const 引用作为参数，并且这些值必须是私有的（定义），但是，我还必须实现复制构造函数和重载赋值运算符。

```
template <typename T1, typename T2, typename T3>
    class Triple
{
public:
    Triple()
    { }
    Triple(const T1 &a, const T2 &b, const T3 &c) : a(a), b(b), c(c)
    { }

    // copy constructor
    Triple(const Triple &triple) {
        a = triple.first();
        b = triple.second();
        c = triple.third();
    }

    // assignment operator
    Triple &operator=(const Triple& other) {
        //Check for self-assignment
        if (this == &other)
            return *this;

        a = other.first();
        b = other.second();
        c = other.third();

        return *this;
    }

  private:
    T1 const& a;
    T2 const& b;
    T3 const& c;
 }; 
```

如果不分配给 const 变量，您将如何实现复制构造函数和赋值运算符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T09:44:14.793

您可能不应该将 const 引用作为成员，因为您（通常）无法知道对象的生命周期将超过对象的生命周期`a`，`b`并且`c`几乎可以肯定应该是 type`Tx`而不是`Tx const&`。

如果您**确实**知道这一点（请确保您知道，除非您是专业的 C++ 开发人员，否则您很可能不理解其中的含义），那么您可以使用初始化列表来创建一个复制构造函数。

```
Triple(const Triple& other) {
  : a(other.a)
  , b(other.b)
  , c(other.c)
{ } 
```

您不能使用赋值运算符，因为分配给引用会更改被引用的对象而不是引用，您可以使用指针模拟引用，但由于我认为这不是您想要的，所以我不会拼写出来。

无论如何，***你应该做***的真正的事情是使用`std::tuple`而不是重新发明轮子。

# javascript - 在 Django 中包含 JQuery 倒计时

> ID：12892943
> 
> 赞同：3
> 
> 时间：2012-10-15T09:39:04.843
> 
> 标签：javascript, jquery, django

我是 Django 新手，这个问题可能非常基础。我想在我的 Django 应用程序中实现这个 Jquery 倒计时（http://keith-wood.name/countdown.html）。但我不知道如何在我的 django 模板中包含一些 javascript。这是我尝试在模板中包含的内容：

```
<script type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<style type="text/css">@import "/Users/marc-antoine.lacroix/Desktop/JQuery/jquery.countdown.package-1.6.0/jquery.countdown.css";</style>
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.countdown-fr.js"></script>
<script language="javascript">
var newYear = new Date(); 
newYear = new Date(newYear.getFullYear() + 1, 1 - 1, 1); 
 $('#defaultCountdown').countdown({until: newYear}); 
</script> 
```

但是我的页面中没有任何内容。我做错了什么？这是在我的模板中包含 JQuery 的好方法吗？

我知道有人问了几个问题，但我没有找到解决问题的方法。

任何帮助都会非常受欢迎。

现在，我尝试了：

```
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<script type="text/javascript"    src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<style type="text/css">@import "/Users/marc-antoine.lacroix/Desktop/JQuery/jquery.countdown.package-1.6.0/jquery.countdown.css";</style>
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.countdown-fr.js"></script>
<script language="javascript">

$(document).ready(function(){

var newYear = new Date(); 
newYear = new Date(newYear.getFullYear() + 1, 1 - 1, 1); 
$('#defaultCountdown').countdown({until: newYear}); 

});
</script>

</head>
<body>

<div id="defaultCountdown"> </div>

</body> 
```

依然没有！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:43:39.333

您是否`<div id="defaultCountdown"></div>`在页面上的某个地方包含了内容？将您的 javascript 代码放在 ready 事件中也是一个好主意，如下所示：

```
$(document).ready(function(){
    //your code here
}); 
```

# .htaccess - htaccess 重定向参数到目录

> ID：12892948
> 
> 赞同：1
> 
> 时间：2012-10-15T09:39:14.637
> 
> 标签：.htaccess, rewrite

我设置了一个稍微奇怪的层次结构，其中索引读取 URI 来决定操作，而不是使用实际的子目录，例如：site.com/base/action/

我从旧系统转移到这个新系统，但我无法让重定向工作。我需要的是： /base/?param[]=value 做外部重定向到 /base/param/value/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:05:58.153

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.+?)(\[\])?=([^&]+)&?(.*)$
RewriteRule ^/?base/?$ /base/%1/%3/?%4 [L,R=301] 
```

这也将保留任何可能在`param[]=value`. `%4`您也可以通过删除规则目标末尾的 来完全破坏整个查询字符串。

# php - Magento 1.7 版本中的多个商店

> ID：12892949
> 
> 赞同：0
> 
> 时间：2012-10-15T09:39:18.380
> 
> 标签：php, magento

我已将我的 magento 商店表格 1.6.2 升级到 1.7.0.2。我想再管理一个同一个管理员的商店表单。我检查了相关步骤，但第二个商店 url 给出了与第一个相同的布局和设计。我为第二家商店创建了一个文件夹，并添加了一个 .htasccess 和索引 .php 文件。任何机构都知道要遵循的正确步骤吗？请帮忙..

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:54:46.387

您是否在每个 .htaccess 文件中尝试过类似的操作

.htacess 1

```
SetEnvIf Request_URI ^\/site_wow\/ MAGE_RUN_CODE=site_wow 
```

.htacess 2

```
SetEnvIf Request_URI ^\/site_ahepa\/ MAGE_RUN_CODE=site_ahepa 
```

阅读更多@ [Magento Multi Store URL rewrite](https://stackoverflow.com/questions/11459835/magento-multi-store-url-rewrite)

您可能还想阅读[http://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/](http://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/)

此外，您应该能够从同一个文件夹运行两个站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T16:22:05.703

我的安装工作如下（使用 Magento CE 1.7.0.2）：

1.  staging.domain.com -> 默认英国商店 -> 英文商店视图
2.  staging.domain.eu -> 默认欧盟商店 -> 法国商店视图

将系统 -> 配置 -> 常规 -> Web 变量的**安全**和**不安全的****基本 URL**分别设置为*staging.domain.com*或*staging.domain.eu*。

 ******然后我将此添加到每个域的 .htaccess 文件中：

```
SetEnvIf Host staging\.domain\.com MAGE_RUN_CODE=domain_uk
SetEnvIf Host staging\.domain\.com MAGE_RUN_TYPE=website
SetEnvIf Host ^domain\.com MAGE_RUN_CODE=domain_uk
SetEnvIf Host ^domain\.com MAGE_RUN_TYPE=website 
```

希望有帮助。完整的 tut：http: [//www.magentocommerce.com/knowledge-base/entry/tutorial-multi-site-multi-domain-setup](http://www.magentocommerce.com/knowledge-base/entry/tutorial-multi-site-multi-domain-setup)******

# java - 发送响应 Servlet 后处理数据

> ID：12892950
> 
> 赞同：1
> 
> 时间：2012-10-15T09:39:23.060
> 
> 标签：java, web-applications, servlets

我正在编写一个 servlet，我必须在其中处理用户数据。但由于处理数据需要时间，我需要在处理数据之前发送用户和数据有效的响应。有没有办法我可以先发送响应，然后处理数据。就像是，

```
response.send();
processData(); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:49:33.717

将 processData 放在不同的线程中。前任：

```
if(!processOn){
    processOn = true;
    new Thread(){
        public void run(){
            processData();
        }
    }.start();
}
response.send(); 
```

其中 proccessOn 是一个会话/静态布尔值，用于不重新启动进程两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:45:03.560

我认为这是不可能的，但是也许创建一个新`Thread`的来处理数据可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:50:02.763

是和不是。您不能发送响应然后读取请求内容。但是，您可以将请求内容作为字节数组读取，然后发送响应，然后执行应用程序级别的数据解析。

# jquery - 是什么让网站在滚动时感觉很重？

> ID：12892952
> 
> 赞同：2
> 
> 时间：2012-10-15T09:39:29.817
> 
> 标签：jquery, html

我刚刚完成，建立了我的第一个网站，但问题是它感觉很重，即向上或向下滚动感觉就像波涛汹涌。该页面最初加载得相当不错（5 秒），但是一旦你到了那里，它就感觉与 theblaze.com 的重量非常相似。

是什么让网站感觉很重，以及找出原因的故障排除步骤是什么？这是一个带有一些 jquery 插件的 html 站点。我在谷歌上搜索了“重站点”、“不连贯的滚动”等，但除了通常的“延迟加载你的图像”或其他什么之外，没有太多的发现。（我正在这样做。）大多数人似乎关心初始加载速度，而不是一旦你在网站上滚动的感觉。

可能的罪魁祸首是什么？

对我来说，这感觉像是一种记忆。就像您打开 Photoshop 并且计算机开始滞后一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:52:13.517

如果您访问[Google Page speed Insights](https://developers.google.com/speed/pagespeed/insights) : ，它将列出您的网站存在的所有缺陷，并且会建议您改进它们的方法。

Google 将根据移动设备和桌面设备的性能对您的网站进行评分。如果你的分数在 90+ 左右，你应该认为你做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:46:34.227

这听起来像是浏览器中的处理延迟——在滚动时观察 CPU/内存使用情况可能是有意义的。您可以尝试一次删除一个元素以找到罪魁祸首。

在要求浏览器调整图像大小而不是提前进行时，我注意到了这种滞后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:40:22.307

好吧，除了提到的工具之外，发现问题的过程很容易；

*   检查页面大小，包括图片
*   删除任何脚本并“感觉”页面，如果仍然很重，则问题是其他问题，如果感觉正确，则问题是/是脚本
*   如果问题是脚本，首先将其移动到页面底部
*   如果仍然影响，请检查它是否正常工作
*   如果没有脚本太重，尽量减少图片的数量和大小
*   如果您使用表格，请尝试设置尺寸
*   尽量避免嵌套表或许多嵌套 div，这需要一些渲染时间。
*   滚动和刷新效果对浏览器的渲染引擎来说很重。

检查所有这些，然后检查正确问题的具体解决方案。

再见

# c++ - 如何从 C++ 控制台程序连接到 MS SQL SERVER

> ID：12892953
> 
> 赞同：0
> 
> 时间：2012-10-15T09:39:31.303
> 
> 标签：c++, sql-server, console-application, borland-c++

我用Borland c 3.1做了一个简单的c++控制台程序，我想连接到sql server来操作数据库中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:55:57.273

旧的 vanilla 方法是使用 Windows 控制面板创建 ODBC 驱动程序。之后，您在应用程序中使用 ODBC 库。这种方法的想法是，您在控制面板中指定有关服务器的所有信息，在您的应用程序中，您只指定驱动程序的名称，而不指定其他任何信息。

我使用了这种方法，它按照 MSDN 中的描述工作。代码一点也不短。

当您在应用程序中指定所有内容时，有一种更好的方法。我有使用这些未记录功能的示例代码。那是很久以前的事了。我不确定我现在能找到这个代码。

# php - 使用 php 以编程方式缩进自动生成的代码

> ID：12892958
> 
> 赞同：3
> 
> 时间：2012-10-15T09:40:03.323
> 
> 标签：php, javascript, indentation

> **可能重复：**
> [如何以编程方式美化 JSON？](https://stackoverflow.com/questions/2614862/how-can-i-beautify-json-programmatically)

我已经构建了一个代码生成器，它为我提供了一个`.js`包含 javascript 的文件作为输出。代码工作正常，但唯一的问题是缩进。

我已经用 php 编写了我的代码生成器。谁能建议我一个库或其他可以帮助我在 php.ini 中自动缩进我生成的代码的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:48:28.803

试试看：他们有扩展、库等。

[http://jsbeautifier.org/](http://jsbeautifier.org/)

# java - 当 DB 约束验证失败时，在 p:inplace 中重置 p:inputText 的值

> ID：12892959
> 
> 赞同：2
> 
> 时间：2012-10-15T09:40:11.783
> 
> 标签：java, jsf, primefaces

我有这个代码：

```
<p:inplace id="staffno" editor="true">
                    <p:ajax event="save" listener="#{staffbean.onSave}" update="staffnoInplace messages" />                    
                    <p:inputText id="staffnoInplace" value="#{staffbean.vieweditStaff.staffno}"/>                                                 
</p:inplace> 
```

在 staffbean.onSave() 中，我通过 JPA/Hibernate 存储它。在它成功的情况下，我没有遇到任何问题。它存储在数据库中。

我的问题与 Hibernate 由于 DB 约束而引发异常的情况有关。在这些情况下，我希望原地保持可编辑状态并且不更改值。目前，它在数据库级别失败，但我仍然看到 UI 对象上的值更改为不正确的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:39:01.123

您应该为组件包含一个验证方法或验证器，`inputText`以便反转 bean 值并防止执行`onSave`以便在给定 ID 已存在于数据库中时

故意尝试将记录插入数据库，希望数据库约束提供验证，这是一种模糊的数据安全实践。我并不是说数据库约束不好，我只是说您应该在尝试插入数据库之前尽一切努力验证和清理您的输入。

在托管 bean 中包含一个验证方法，如下所示：

```
public void validateStaffNoId(FacesContext context, UIComponent component, Object value)
        throws ValidatorException {
    //Query DB to see if ID exists...
    if (idExists()) {
        //Throw validator exception
    }
} 
```

然后在您的 inputText 组件中简单地添加属性：

```
<p:inputText ... validator="#{staffBean.validateStaffNoId}" ... /> 
```

# xcode4 - 从 iPhone 向“REST”服务 URL 的 POST XML 请求

> ID：12892967
> 
> 赞同：2
> 
> 时间：2012-10-15T09:40:33.700
> 
> 标签：xcode4, http-post

我对 Objective-C 非常陌生，并且在某一点上感到震惊。我必须发布 XML 请求以休息服务 url 并从中获取响应。我正在使用 NSMutableRequest。但看不到任何响应。不明白在哪里我错了……

请求 XML 是这样的：

```
<GetUserRequest xmlns="http://schemas.datacontract.org/2004/07/DModel" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<ID>456789</ID>
<UserEmail>John@yahoo.com</UserEmail>
</GetUserRequest>

My url is like this : http://192.158.0.104:8732/IServices/GetXml 
```

我的代码是这样的：

```
NSString *urlString1=[NSString stringWithFormat:@"http://192.158.0.104:8732/IServices/GetXml"];
NSMutableURLRequest *request=[[[NSMutableURLRequest alloc] init]autorelease];
[request setURL:[NSURL URLWithString:urlString1]];
[request setHTTPMethod:@"POST"];
NSString *contentType=[NSString stringWithFormat:@"application/xml"];
[request addValue:contentType  forHTTPHeaderField:@"Content-type"];

NSMutableData *postBody=[NSMutableData data];
[postBody appendData:[[NSString stringWithFormat:@"<GetUserRequest xmlns=\"http://schemas.datacontract.org/2004/07/DModel\" xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\">"]dataUsingEncoding:NSUTF8StringEncoding]];
[postBody appendData:[[NSString stringWithFormat:@"<ID>456789</ID>"]dataUsingEncoding:NSUTF8StringEncoding]];
[postBody appendData:[[NSString stringWithFormat:@"<UserEmail>John@yahoo.com</UserEmail>"]dataUsingEncoding:NSUTF8StringEncoding]];
[postBody appendData:[[NSString stringWithFormat:@"/GetUserRequest>"]dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:postBody];
NSHTTPURLResponse *urlResponse=nil;
NSError *error=[[NSError alloc]init];
NSData *responseData=[NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&error];
NSString *rss=[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding ];
NSlog(@"Response Code:%d",[urlResponse statusCode]);
if([urlResponse statusCode ]>=200 && [urlResponse statusCode]<300)
{
    NSLog(@"Response:%@",rss);
} 
```

但我在活动控制台中看不到任何东西......

任何帮助，将不胜感激 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:10:00.233

该代码对我来说看起来很糟糕，并且没有包含足够的错误检查（`[NSURLConnection sendSynchronousRequest]`可以`nil`在发生错误时返回）。将结尾修改为：

```
NSError *error = nil;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request 
                                             returningResponse:&urlResponse 
                                                         error:&error];
if (responseData != nil)
{
    NSString *rss = [[NSString alloc] initWithData:responseData 
                                          encoding:NSUTF8StringEncoding ];
    NSlog(@"Response Code:%d",[urlResponse statusCode]);
    if([urlResponse statusCode ]>=200 && [urlResponse statusCode]<300)
    {
        NSLog(@"Response:%@",rss);
    } 
}
else
{
    NSLog(@"Failed to send request: %@", [error localizedDescription]);
} 
```

# amazon-s3 - 如何使用 jets3t API 访问和读取共享桶的桶信息？

> ID：12892972
> 
> 赞同：0
> 
> 时间：2012-10-15T09:41:03.080
> 
> 标签：amazon-s3, shared, bucket, jets3t

这是我的错误的解释。我在 Eucalyptus（开源）中注册了两个用户的 A、B。我在用户 A 的帐户中使用 Jets3t API 创建了一个存储桶 B1，并授予用户 B 读取权限（使用“CanonicalGrantee”接口）。在使用 A 的凭据列出访问控制列表时，我得到了 A 的 FULL_CONTROL 和 B 的 READ。但是当我尝试使用 B 的凭据访问存储桶 B1 信息时，我得到了这个错误

> 线程“主”org.jets3t.service.S3ServiceException 中的异常：无法使用无效存储桶执行操作 listObjects：在 test.ObjectPermission.main（ ObjectPermission.java:40)

有问题的代码是 `S3Bucket publicBucket =s3Service.getBucket("B1");`

这里 B1 是 Bucket 属于 User A。在上面的代码中 s3service 返回一个 null Values 。我知道 s3service 只检索在 B' Credential 下创建的信息所属的信息。

我不知道如何解决这个问题并使用 Jets3t API 访问共享存储桶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:18:42.437

您使用的方法是在账户 B 的存储桶列表中搜索账户 A 的存储桶 B1。所以总是在账户 B 中找不到该存储桶并返回 null。所以你必须以另一种方式检查它。您可以通过为该调用 isBucketAccessible() 对帐户 B 服务对象的 Bucket B1 进行头部请求来检查它，如果它返回 true，则表示存储桶可访问，否则不可访问。

我 100% 确定它会起作用:)

# regex - Unix：使用 grep -Rn 查找字符串

> ID：12892973
> 
> 赞同：0
> 
> 时间：2012-10-15T09:41:08.133
> 
> 标签：regex, unix, grep

我想`$foo['bar']`使用命令在目录中查找字符串`grep -Rn`。但无论我尝试什么，我都无法找出使用什么字符来避免正则表达式。

```
user@server$ grep -Rn $foo['bar'] /lib              // obviously don't work

user@server$ grep -Rn "$foo['bar']" /lib            // don't work
user@server$ grep -Rn `$foo['bar']` /lib            // don't work
user@server$ grep -Rn $foo\['bar'\] /lib            // don't work 
```

我必须使用`grep -Rn`命令，而不是另一个。非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:52:41.703

你需要转义 [ ] 标志，使用这个：

```
grep -Rn "\$foo\['bar'\]" /lib 
```

请注意，在这种情况下，不需要转义初始美元符号，但我发现这样更清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:48:13.577

试试这个代码：

```
 grep -Rn "$foo\['bar'\]" 
```

为我工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:00:27.770

```
On sh/bash: grep -Rn "$foo\['bar'\]" /lib
On csh/tcsh: grep -Rn ""\$foo"\['bar'\]" /lib 
```

# c# - 在 C#，VS 2008 中以异步模式读取文件

> ID：12892979
> 
> 赞同：-4
> 
> 时间：2012-10-15T09:41:14.807
> 
> 标签：c#, file-io

**您能否提供有关如何在异步模式下**逐行读取文件的示例代码或链接？

我必须一次读取一行文件（或至少 30 个字节的数据）并将其显示在文本框中，例如 textBox1。为此，我必须使用异步读取模式。我怎样才能做到这一点？

我正在使用 C# Windows 应用程序 IDE - Visual Studio 2008

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:32:54.867

您可以使用[BeginRead](http://msdn.microsoft.com/en-us/library/zxt5ahzw.aspx)方法。例如，您可以定义一个状态对象，该对象将包含有关正在读取的流和内容的信息：

```
public class State
{
    public Stream Stream { get; set; }
    public byte[] Buffer { get; set; }
} 
```

然后开始以 30 字节的块异步读取文件：

```
var stream = File.OpenRead("SomeFile.txt");
var state = new State
{
    Stream = stream,
    Buffer = new byte[30]
};
stream.BeginRead(state.Buffer, 0, state.Buffer.Length, EndRead, state); 
```

该`EndRead`方法可以这样定义：

```
private void EndRead(IAsyncResult ar)
{
    var state = ar.AsyncState as State;
    var bytesRead = state.Stream.EndRead(ar);
    if (bytesRead > 0)
    {
        string value = Encoding.UTF8.GetString(state.Buffer, 0, bytesRead);

        // TODO: do something with the value being read
        // Warning: if this is a desktop application such as WinForms
        // and you need to update some control on the GUI make sure that 
        // you marshal the call on the main UI thread, because this EndRead
        // method will be invoked on a thread drawn from the thread pool.
        // In WinForms you need to use Control.Invoke or Control.BeginInvoke
        // method to marshal the call on the UI thread.

        state.Stream.BeginRead(state.Buffer, 0, state.Buffer.Length, EndRead, state);
    }
    else
    {
        // finished reading => dispose the FileStream
        state.Stream.Dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:47:19.283

我猜你正在尝试从另一个线程读取文件。看看[这](http://social.msdn.microsoft.com/Forums/en-AU/csharplanguage/thread/70784fe4-2b89-4d58-ae05-38bff94c3006)是否对你有帮助，因为很难理解你到底想要做什么。

此外，正如@Darin 在评论中提到的，您应该阅读有关[FileStream.BeginRead](http://msdn.microsoft.com/en-us/library/zxt5ahzw.aspx)方法的信息。请注意，如果您使用的是 .Net 4.5，则可以使用[ReadAsync](http://msdn.microsoft.com/en-us/library/system.io.filestream.readasync.aspx)方法。

# php - Symfony2 的奇怪缓存行为

> ID：12892980
> 
> 赞同：0
> 
> 时间：2012-10-15T09:41:22.930
> 
> 标签：php, css, caching, symfony

所以我对 Symfony 的缓存有一个奇怪的问题，似乎是由asset() 函数触发的。

我的模板有这一行：`<link rel="stylesheet" type="text/css" href="{{ asset('public/login/css/layouts.css') }}" />`

对此 CSS 文件的更改不会出现在浏览器中。我试图清除浏览器缓存，`rm -rf app/cache/*`并在链接中添加版本号。没有任何效果。

当我通过简单地删除资产功能并直接链接到文件来更改链接时，我看到了更改。改回链接将向我显示旧的 css 文件。我不明白的是，发送到浏览器的 HTML 文件是**完全相同的**。CSS 文件的链接根本没有变化，但 CSS 文件中的内容确实发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:01:33.810

你应该把你的资源打包保存，让 Symfony 处理它们。更改后，请务必运行：

```
php app/console assets:install web 
```

# jquery - jquery在脚本后取消点击动作

> ID：12892981
> 
> 赞同：1
> 
> 时间：2012-10-15T09:41:23.050
> 
> 标签：jquery, click

我有一个显示选项卡内容的脚本。这部分工作正常，但是当用户单击链接时，浏览器似乎执行了单击并将用户带回页面顶部。我在脚本中有一个 return false 以取消 ent 点击，并且还尝试了 event.preventDefault() 但也没有运气。这是HTML：

```
<ul class="tabs">
                            <li><a href="#tab1">Tab 1</a></li>
                            <li><a href="#tab2">Tab 2</a></li>
                            <li><a href="#tab3">Tab 3</a></li>
                </ul>

                <div class="tab_container">

                            <div id="tab1" class="tab_content">

                               <div id="content">
                                <h2>Tab 1</h2>
                                <p>Tab 1 info here </p>
                                </div>
                            </div>

                            <div id="tab2" class="tab_content">
                                 <h2>Tab 2</h2>
                                <p>This is tab 2 here</p><br />

                                   <p>This is tab 2 here</p><br />
                            </div>

                            <div id="tab3" class="tab_content">
                                <h2>Tab 3</h2>
                                <p>tab 3 info here</p>                   
                            </div>

                </div> 
```

这是JS：

```
$(document).ready(function() {

//When page loads...
$(".tab_content").hide(); //Hide all content
$("ul.tabs li:first").addClass("active").show(); //Activate first tab
$(".tab_content:first").show(); //Show first tab content

//attribute an idea to each tab
$('.tabs li').each(function(i) {
var thisId = $(this).find("a").attr("href");
thisId = thisId.substring(1,thisId.length) + '_top';
$(this).attr("id",thisId);
}); 

function changeTab(activeTab)
{

            $("ul.tabs li").removeClass("active"); //Remove any "active" class
            $(activeTab + '_top').addClass("active"); //Add "active" class to selected tab, using the id created at document load

            $(".tab_content").hide(); //Hide all tab content

            $(activeTab).fadeIn(); //Fade in the active content

}

//On Click Event
$("ul.tabs li").click(function() {

        //call above function
        changeTab($(this).find("a").attr("href"));
    //event.preventDefault();   
    return false;

}); 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:48:55.053

您将 click 事件应用于 LI 元素，如果您想`return false;`工作，则应将 onclick 应用于 A 标签。

```
$("ul.tabs li a").click(function() {
  changeTab($(this).attr("href"));
  return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:49:04.577

将您的点击事件更改为：

```
$("ul.tabs li a").click(function() {
    //call above function
    changeTab($(this).attr("href"));
    //event.preventDefault();   
    return false;

}); 
```

# javascript - 即使没有在 Box2d World 中添加任何对象，也会绘制矩形

> ID：12892983
> 
> 赞同：0
> 
> 时间：2012-10-15T09:41:44.127
> 
> 标签：javascript, canvas, box2d

我正在用 Java 脚本创建一个 Box2d 世界，我没有在其中添加任何对象。我将重力设置为零。当我尝试在画布内绘制 box2d 对象时（如果存在），我发现在 0,0 处绘制了一个矩形。但是，当我使用 DebugDraw() 时，不会按预期显示任何对象。有人可以解释为什么要绘制额外的矩形吗？代码如下：

```
canvas=document.getElementById("cnv");
context=canvas.getContext("2d");
x=0;
y=0;
scale=100; 

gravity=new b2Vec2(0,0);
world=new b2World(gravity,false);
requestAnimFrame(main);
function main()
{
    requestAnimFrame(main);
    begin();
}

function begin()
{
    world.Step(1/60,10,10);
    drawObjects();
    world.ClearForces();
}

function drawObjects()
{
canvas.width=canvas.width;
for (currentBody = world.GetBodyList(); currentBody; currentBody =currentBody.m_next)
     {
    position = currentBody.GetPosition();
    if (currentBody.GetType() == b2Body.b2_staticBody) 
    {
        context.fillStyle="red";
        alert(position.x+" "+position.y);
        context.fillRect(position.x*scale,position.y*scale,125,125);
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:09:39.530

我发现即使我没有添加任何对象也绘制一个矩形的原因是我将高度和宽度硬编码为 125。如果我更改代码以便从 box2d 世界动态获取高度和宽度，则没有创建矩形，因为世界上不存在任何对象。

# r - 从循环中追加 rle 结果

> ID：12892985
> 
> 赞同：-1
> 
> 时间：2012-10-15T09:41:49.133
> 
> 标签：r, loops, append, coin-flipping

我正在运行一个循环运行大约 100 万次的抛硬币模拟。

每次运行循环时，我都希望保留 RLE 命令的表输出。不幸的是，一个简单的附加似乎并不合适。每次我运行循环时，我得到的数据量都略有不同，这似乎是症结之一。

这段代码让我知道我在做什么：

```
N <- 5 #Number of times to run
rlex <-NULL
#begin loop#############################
for (i in 1:N) { #tells R to repeat N number
x <-sample(0:1, 100000, 1/2)
rlex <-append(rlex, rle(x))
}
table(rlex) #doesn't work
table(rle(x)) #only 1 
```

因此，我想要一个合并的 rle 表，而不是有五个单独的 rle 结果（在这个模拟中，完整版有 100 万个）。希望这很清楚。显然我的实际代码要复杂一些，因此任何解决方案都应该尽可能接近我指定的内容。

更新：循环是绝对要求。没有如果或但是。也许我可以提取 table(rle(x)) 数据并将其放入矩阵中。然而，同样的绊脚石是一些不太频繁的运行长度并不总是在每个循环中出现。因此，我想我希望根据运行长度有条件地填充矩阵？

我放弃之前的最后一次更新：保留 rle$values 将意味着保留了太多数据。我的模拟是大规模的，我真的只希望保留 rle 的表输出。要么我为每个循环保留每个表（rle（x））并手动组合（会有数千个），要么我找到一种编程方式来保留数据（对于零和一来说是）并有一个由以下组成的表在我进行的过程中合并每个单独的循环。

按照规定，这很容易做到，或者我不会这样做。这似乎是一个愚蠢的想法/要求，但这应该与是否可以完成无关。

**上次是认真**的。这是一个动画 gif，显示了我期望发生的事情。![在此处输入图像描述](../Images/3acef55a6a884c5aa7bc98045dfa04a3.png)

在循环数据的每次迭代之后，将数据添加到表中。这一点很清楚，我将能够传达它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T13:11:37.197

Following up @CarlWitthoft's answer, you probably want:

```
N <- 5
rlex <-NULL
for (i in 1:N) {
    x <-sample(0:1, 100000, 1/2)
    rlex <-append(rlex, rle(x)$lengths)
} 
```

since I think you don't care about the `$values` component (i.e. whether each run is a run of zeros or ones).

**Result**: one long vector of run lengths.

But this would probably be a lot more efficient:

```
maxlen <- 30
rlemat <- matrix(nrow=N,ncol=maxlen)
for (i in 1:N) { 
    x <-sample(0:1, 100000, 1/2)
    rlemat[i,] <- table(factor(rle(x)$lengths,levels=1:maxlen))
} 
```

**Result**: an `N` by `maxlen` table of run lengths from each iteration.

If you only want to save the total number of runs of each length you could try:

```
rlecumsum <- rep(0,maxlen)
for (i in 1:N) { 
    x <-sample(0:1, 100000, 1/2)
    rlecumsum <- rlecumsum + table(factor(rle(x)$lengths,levels=1:maxlen))
} 
```

**Result**: an vector of length `maxlen` of the total numbers of run lengths across all iterations.

And here's my final answer:

```
rlecumtab <- matrix(0,ncol=2,nrow=maxlen)
for (i in 1:N) { 
   x <- sample(0:1, 100000, 1/2)
   r1 <- rle(x)
   rtab <- table(factor(r1$lengths,levels=1:maxlen),r1$values)
   rlecumtab <- rlecumtab + rtab
} 
```

**Result**: a `maxlen` by 2 table of the total numbers of run lengths across all iterations, divided by type (0-run vs 1-run).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T11:42:33.723

好的，尝试第 4 次：

```
N <- 5
set.seed(1)
x <- NULL
for (i in 1:N){
  x <- rbind(x, table(rle(sample(0:1, 100000, replace=TRUE))))
}

x <- as.data.frame(x)
x$length <- as.numeric(rownames(x))
aggregate(x[, 1:2], list(x[[3]]), sum) 
```

产生：

```
 Group.1     0     1
1        1 62634 62531
2        2 31410 31577
3        3 15748 15488
4        4  7604  7876
5        5  3912  3845
6        6  1968  1951
7        7   979   971
8        8   498   477
9        9   227   246
10      10   109   128
11      11    65    59
12      12    24    30
13      13    21    11
14      14     7    10
15      15     0     4
16      16     4     2
17      17     0     1
18      18     0     1 
```

* * *

如果要在循环内进行聚合，请执行以下操作：

```
N <- 5
set.seed(1)
x <- NULL
for (i in 1:N){
  x <- rbind(x, table(rle(sample(0:1, 100000, replace=TRUE))))
  y <- aggregate(x, list(as.numeric(rownames(x))), sum)
  print(y)
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-15T11:39:34.367

您需要阅读帮助页面`rle`。考虑：

```
names(rlex)  #"lengths"  "values"  "lengths"  "values" .... and so on 
```

同时，我强烈建议您花一些时间阅读统计方法。运行一百万次二项式模拟的机会为零（+/- epsilon），它会告诉您经过数百次尝试后您不会学到的任何东西，除非您的硬币有 p=1e-5 :-)。

# node.js - 如何在 node.js 中监听 192.168.1.1/subdir/？

> ID：12892986
> 
> 赞同：2
> 
> 时间：2012-10-15T09:41:54.367
> 
> 标签：node.js, webserver, express

我将 node.js 与 express 一起使用，我想让它在“192.168.1.1/subdir/”而不是“192.168.1.1”上进行监听，而无需更改 express 中的所有 url 配置我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:55:40.870

[express-namespace](https://github.com/visionmedia/express-namespace)可以帮助您：

```
require('express-namespace')

app.namespace('/subdir', function(){
  app.get('/view', function(req, res){
    res.send('/subdir/view rendered');
  });

  app.get('/edit', function(req, res){
    res.send('/subdir/edit rendered');
  });

}); 
```

# iphone - iPhone中的多列菜单

> ID：12892987
> 
> 赞同：0
> 
> 时间：2012-10-15T09:41:57.073
> 
> 标签：iphone, menu

我想为我的 iPhone 应用程序创建一个如下所示的菜单。可能吗？首先，只会显示主要项目。当我们点击一​​个主要项目时，它的子项目将显示在两列中。

![菜单](../Images/d9017ee9005b243d507816965ebef8ac.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T09:48:01.357

最简单的方法是使用自定义`UITableView`的部分。

*   每个部分的每个标题都将对应于您的“主要项目 X”。由于这些`UITableViewDelegate`方法，您可以为标题使用自定义视图，因此您可以提供`UIView`包含 a`UILabel`和“>”或“v”的图像，以及`UITapGestureRecognizer`处理将打开或关闭子菜单的点击
*   每个部分将包含 0（如果菜单关闭）或 N 项（如果菜单打开）
*   对应于一行的 tableView 的每个单元格将包含两个标签（或按钮），一个用于左侧的项目，一个用于右侧的项目。
*   当`UITagGestureRecognizer`点击某个部分的 时，您可以切换一个`BOOL`告诉该部分是“打开”还是“关闭”，然后调用`reloadData` UITableView 以显示或隐藏相应的单元格

其余的是基本的表视图编程，因此您可以像往常一样实现表视图（有关更多详细信息，请参阅 Apple 文档中的“[表视图编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)”）。

# javascript - 为什么我不能测试未定义的变量

> ID：12892988
> 
> 赞同：0
> 
> 时间：2012-10-15T09:41:59.477
> 
> 标签：javascript

我正在尝试这样做：

```
 var currentpage = page ? page : null; 
```

但是，如果尚未定义页面，则脚本会引发错误。即使我测试页面是否未定义，只要脚本查找页面就会出错。

为什么以及如何解决这个问题？

**更新：使代码示例更清晰；**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:45:17.447

为此使用`typeof`运算符：

```
var a = (typeof page != 'undefined') ? 'page=' + page: '';
alert(a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:45:45.613

您必须在某处使用`var page`或作为函数参数定义了变量`function (page)`。如果您在同一范围内的任何地方执行此操作，则该变量将被声明并存在，即使它没有值。如果您尝试使用一些甚至没有在同一范围内声明的变量，那是完全错误的，因为它在任何情况下都无法工作，而 Javascript 抛出错误是完全正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T09:49:12.987

尝试从未声明的变量中读取只会抛出 a`ReferenceError`并终止脚本。

```
> x123
ReferenceError: x123 is not defined 
```

更好的问题是，为什么你不知道你的变量是否存在。在正常情况下，这通常意味着你在做**坏事**。为什么需要检查这种情况？当然，我们可以提出更好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T09:53:32.533

另一种方法是这样，即使您`var a`未定义 else 也会被执行，也就是说您的脚本不会停止执行

```
 if(window.a){
      alert('hello'); 
    } else {
      alert('this else will fire');
    } 
```

# java - Play 2.0 (java)：MongoDB 适合做酒店预订网络应用吗？

> ID：12892992
> 
> 赞同：2
> 
> 时间：2012-10-15T09:42:07.707
> 
> 标签：java, mysql, mongodb, playframework-2.0

我想用 Play framework 2.0 (Java) 实现一个酒店预订系统。该应用程序将在没有银行交易的情况下进行酒店预订（信用卡将仅作为识别方法提供以防止欺诈），用户将选择所需的房间和日期范围，应用程序将进行预订并更新房间可用性。

出于性能原因，我正在考虑使用 mongo 而不是 mySQL，也因为我的模型将具有几种语言的可翻译字段，如果它在 mySQL 中将有很多连接。

对于可用性检查，我不太清楚，如果它在 mySQL 而不是 mongo 中更简单。

MongoDB 适合那种网络应用程序，还是我走错了路？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:49:18.270

两个简单的陈述：

*   **坚持你所知道**的。如果你知道简单的 SQL，那就去做吧。

*   **过早的优化是万恶之源。**如果甚至在开始应用程序之前，您已经在考虑优化，那么您的工作方式就存在严重问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:56:50.770

您可以将 mongoDB 用于此类应用程序。当涉及到敏感数据（例如信用卡信息）时，我个人有一些安全问题，因为删除信息并不意味着它是不可恢复的。

来自 MongoDB 上的维基百科：电子商务。一些站点正在使用 MongoDB 作为其电子商务基础设施的核心（**通常与 RDBMS 结合**用于最终订单处理和会计）。

关于stackoverflow的[优点和缺点有一些非常有趣的文章MongoDB的优点和缺点？](https://stackoverflow.com/questions/5244437/pros-and-cons-of-mongodb)

如果你想学习一种新的 NoSQL 技术，那就去吧，但如果你想安全地玩，那就坚持 mysql 解决方案。这些应用程序（预订）通常可以很好地与 BI 解决方案/数据挖掘配合使用，仅这一点就会使 noSql 方法对我来说是不可行的。

# jsf - jsf 2.0 f:convertDateTime for util.Date 使用来自 .properties 的自定义日期模式

> ID：12892996
> 
> 赞同：1
> 
> 时间：2012-10-15T09:42:18.187
> 
> 标签：jsf, date, datetime, jsf-2, converter

在使用返回 null 的操作中更改语言环境后，我道歉页面应该重新加载，但在第一次单击更改语言环境的链接后，带有日期的字段不会改变。我使用 MyFaces

我有一个页面，用户可以在其中设置语言环境，并且在更改语言环境后，我无法在第二次推送更改语言环境的链接后获得所需的日期格式。我从这篇文章中使用 bean 进行本地化

[本地化文章](https://stackoverflow.com/questions/5388426/jsf-2-0-set-locale-throughout-session-from-browser-and-programmatically/5391493#5391493)

我不明白为什么在

```
<h:outputText value="#{newsVar.date}">
<f:convertDateTime pattern="#{msg['date.pattern']}" />
</h:outputText> 
```

***！！！！已编辑！！！*** 当我在 mainLayout.xhtml 中使用构面时，我在获取 dataField 的 id 时遇到了一些问题

```
<f:view locale="#{localeManager.language}">

            <div id="wrapper">
                <div class="header">
                    <ui:insert name="header">
                        <ui:include src="/pages/template/commonHeader.xhtml" />
                    </ui:insert>
                </div>
                <div class="content_container">
                    <ui:insert name="content" />
                </div>
            </div> 
</f:view> 
```

commonHeader 包含在 commandLink

```
 <ui:composition>
        <h:form>
            <h1>
                <h:outputText value="#{msg['header.text']}" />
            </h1>
            <div class="lang_selector">             
                <h:commandLink action="#{localeManager.changeLanguage('ru')}"
                    value="#{msg['header.language.ru']}">
<!--                    <f:ajax render=":listGroupId:dateField" />-->
                </h:commandLink>
                <h:commandLink action="#{localeManager.changeLanguage('en')}"
                    value="#{msg['header.language.en']}">
<!--                    <f:ajax render=":listGroupId:dateField" />-->
                </h:commandLink>
            </div>
        </h:form>
    </ui:composition> 
```

在当前页面中，我有下一个

```
<ui:composition template="/pages/layouts/mainLayout.xhtml">
        <ui:define name="content">
            <f:event type="preRenderView" listener="#{news.showNews}" />
            <h:form id="listForm" prependId="false">
                        <h:panelGroup id="listGroupId">             
                <ui:repeat var="newsVar" value="#{news.newsList}">
                    <div class="news_item">
                        <div class="news_title">
                            <h1>
                                <h:outputText value="#{newsVar.title}" />
                            </h1>
                            <div class="news_date">
                                <h:outputText id="dateField" value="#{newsVar.date}">
                                    <f:convertDateTime pattern="#{msg['date.pattern']}" />
                                </h:outputText>
                            </div> 
```

如您所见，尝试获取“dateField”的 id，但该 id 的形式不同。我阅读了下一篇文章[How to JSF 2.0: – 在表单之外渲染组件](http://ocpsoft.org/java/jsf2-java/how-to-jsf-2-0-render-components-outside-of-the-form/)我知道我应该设置`<h:form id="listForm" prependId="false">`然后我可以在没有表单名称的情况下设置 elementId`<f:ajax/>`但我得到错误`javax.faces.FacesException - Component with id::listGroupId:dateField not found`。

我发现：在渲染中指定的元素必须已经存在于客户端 HTML DOM 树中。可能这就是为什么我有这个问题

请帮帮我...为什么日期模式仅从第二次更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:19:11.627

我会推荐以下

1）通常更改`setLanguage`为`changedLanguage`（在该方法中设置语言属性），在动作属性中使用setter是一种不好的做法，并且通常在动作方法中使用get/set前缀

2）添加`f:ajax`

```
<h:commandLink action="#{localeManager.changedLanguage('en')}" value="#msg['header.language.en']}">
    <f:ajax render="dateField"/>
</h:commandLink> 
```

3)`h:outputText`变成

```
<h:outputText id="dateField" value="#{newsVar.date}">
    <f:convertDateTime pattern="#{msg['date.pattern']}" />
</h:outputText> 
```