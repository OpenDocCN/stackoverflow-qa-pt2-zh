# StackOverflow 问答 15053000-15053999

# html - CSS一一对齐3个项目

> ID：15053000
> 
> 赞同：0
> 
> 时间：2013-02-24T15:02:27.263
> 
> 标签：html, css

我需要将下面给出的三个元素水平对齐而不是垂直对齐...这是当前文件...我该怎么做？

HTML：

```
 <div id="banner">
        <div class="IE-banner">
            <div id="go-lang">
                <p> This will contain google language </p>
            </div>
            <div id="go-search">
                <p> This will contain google search </p>
            </div>
            <div id="go-search">
                <p> This will contain facebook links </p>
            </div>
        </div>
    </div> 
```

CSS：

```
#banner{ 
 width:900px; 
 height:75px; 
 background-color:Red; 
 color:White; 
 font-size:10px; 
 font-weight:bold; 
 position:relative; 
}

div.IE-banner{
    position:absolute;
    vertical-align:middle;
    top:20px;
    right:10px;
    font-size:medium;
} 
```

![在此处输入图像描述](../Images/20cfd0dc3beaca5b1db10949cb5ca336.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:55:02.213

我在这里向您展示 2 种尝试与您的标记设计保持一致的替代方案 ![在此处输入图像描述](../Images/c7604cb7de084064979671c73178889d.png)

细节由您来管理。

我修改了其中一个 id 以避免标记中出现重复的 id（新 id 名为**"go-face"**）

```
<div id="go-face" class= "goDiv">
                <p> This will contain facebook links </p>
  </div> 
```

我修改了您的 IE 横幅规则，以使您的文本垂直居中并摆脱额外的代码

```
div.IE-banner{
   text-align:center;
   line-height:75px;   
   font-size:medium;
} 
```

我将“goDiv”命名为嵌套在 IE 横幅中的所有 div 共享的类，并添加了一个针对该类的规则，该规则将浮动 div 并为它们设置可用宽度的三分之一

```
.goDiv {
    width:33.33%;
    float:left;
} 
```

可以在this [fiddle看到示例](http://jsfiddle.net/Fico/BdkuS/)

**替代方案** 如果您不想将类添加到嵌套 div 中，您可以按如下方式修改选择器并且也可以使用

```
.IE-banner div{
   width:33.33%;
    float:left; 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:10:59.840

```
<style>
.IE-banner
{
float:right;
background-color:red;
}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T15:06:16.790

将您想要的项目排成一行：`display:inline-block`

```
.IE-banner div {
    display: inline-block;
} 
```

* * *

不过，为了更有条理，我会为您想要内联的所有元素添加一个类。并且只修改那个类。

```
<div id="banner">
    <div class="IE-banner">
        <div id="go-lang" class="inline">
            <p> This will contain google language </p>
        </div>
        <div id="go-search" class="inline">
            <p> This will contain google search </p>
        </div>
        <div id="go-search" class="inline">
            <p> This will contain facebook links </p>
        </div>
    </div>
</div> 
```

CSS：

```
.inline {
    display:inline-block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T15:17:03.853

您可以通过更改元素的显示属性来做到这一点。这也可以让您避免代码中出现过多的 div：

```
<ul class="banner">
    <li>Google lang</li>
    <li>Google search</li>
    <li>Facebook</li>
</ul> 
```

使用 CSS 规则：

```
ul.banner       { display: block; }
ul.banner > li  { display: inline-block; } 
```

或使用浮动方法：

```
ul.banner       { display: block; overflow: auto; }
ul.banner > li  { float: left; } 
```

漂亮干净的 HTML 内容适用于各种媒体。

# javascript - 如何生成将在默认地图应用程序中打开的位置链接？

> ID：15053004
> 
> 赞同：2
> 
> 时间：2013-02-24T15:02:35.140
> 
> 标签：javascript, google-maps, web-applications, map, apple-maps

我正在用 JS 编写一个简单的小型 Web 应用程序，希望生成指向位置（纬度/经度）的链接，这些位置将在移动用户的默认本地地图应用程序中打开（相对于在浏览器中打开）。

例如 iOS 上的地图、Android 上的谷歌地图等

有什么最佳实践可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:33:18.030

您可以使用 url 方案并生成这样的链接。当用户点击链接时，它应该打开一个本地地图应用程序。

```
<a href="comgooglemaps://?center=40.765819,-73.975866&zoom=14&views=traffic">Open map</a> 
```

以下是参考资料：

iOS 地图 [http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)

iOS 中的谷歌地图 [https://developers.google.com/maps/documentation/ios/urlscheme](https://developers.google.com/maps/documentation/ios/urlscheme)

Android 中的谷歌地图 [http://developer.android.com/guide/appendix/g-app-intents.html](http://developer.android.com/guide/appendix/g-app-intents.html)

希望这些链接可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-16T09:22:36.737

我在我的一个项目中也有类似的要求。我做了这样的事情：

```
<a href=geo:latitude,longitude></a> 
```

# jquery - 执行功能，只有在另一个功能完成后？

> ID：15053007
> 
> 赞同：0
> 
> 时间：2013-02-24T15:02:55.243
> 
> 标签：jquery

此脚本无限期地循环遍历元素，并应用一个类：

[http://jsfiddle.net/6HDAW/](http://jsfiddle.net/6HDAW/)

```
function across() {
var $active = $('.div .current');
var $next = $active.next();    
$next.addClass('current');
$active.removeClass('current');   
if($next.length == 0) { $(".div .bed:first-child").addClass('current'); }
}

function down() {
    var $active = $('#slideshow .active');
    var $next = $active.next();    
    $next.addClass('active');
    $active.removeClass('active');
    if($next.length == 0) { $("#slideshow .div:first-child").addClass('active'); }
}

$(function() {
  setInterval('across()', 500);
  setInterval('down()', 500);
}); 
```

有一个用于“跨”移动的功能和一个用于“向下”移动 .div 的功能。

我需要进行什么更改才能使“向下”功能仅在“跨越”功能完成时才执行？

我希望它在第一行的跨度上循环，然后向下移动，循环通过第二行，然后向下移动，循环通过第三行，然后是第四行，然后循环并重新做整个事情。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:06:11.643

我猜你可以在函数结束`down()`时执行函数`across()`吗？

```
function across() {
    var $active = $('.div .current');
    var $next = $active.next();    
    $next.addClass('current');
    $active.removeClass('current');   
    if($next.length == 0) { 
        $(".div .bed:first-child").addClass('current'); 
        down();
    }
}

function down() {
    var $active = $('#slideshow .active');
    var $next = $active.next();    
    $next.addClass('active');
    $active.removeClass('active');
    if($next.length == 0) { $("#slideshow .div:first-child").addClass('active'); }
}

$(function() {
  setInterval(across, 500);
}); 
```

[**小提琴**](http://jsfiddle.net/6HDAW/2/)

PS：setInterval中不要使用字符串，引用函数。

# counter - VHDL 时钟分频器：计数器 - 占空比

> ID：15053008
> 
> 赞同：1
> 
> 时间：2013-02-24T15:02:55.857
> 
> 标签：counter, vhdl, clock, frequency

我是 VHDL 的新手。我收到了有关如何从 24 MHz 的输入时钟信号生成 1Hz（50% 占空比）的时钟信号的代码。我有一些问题需要澄清。

1.  计数器限制是如何选择的？在下面的情况下，12000000。如果我想生成 8Hz 时钟信号，这个限制是多少。
2.  如果我想将占空比更改为 80%，应该如何调整代码？

    ```
    library IEEE;
    use IEEE.STD_LOGIC_1164.ALL;
    use IEEE.STD_LOGIC_ARITH.ALL;
    use IEEE.STD_LOGIC_UNSIGNED.ALL;
    entity clock is
       port ( CLKin: in std_logic;
              reset: in std_logic;
              CLKout: out std_logic);
    end clock;
    architecture arch of clock is

      signal counter: integer:=0;
      signal temp : std_logic := '1';
    begin
    process(CLKin,counter,reset)
    begin
       if(reset='0') then counter<=0; temp<='1';
        elsif(CLKin'event and CLKin='1') then counter <=counter+1;
         if (counter = 12000000) then temp <= NOT temp; counter<=0;
         end if;
        end if;
       CLKout <= temp;
    end process;
    end arch; 
    ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T15:28:31.057

您想将 24MHz 的时钟（即 24000000 Hz）分频为 1 Hz。因此，您创建了一个计数器，它将对 CLKin (24 MHz) 的每个上升沿进行计数。在 24000000/2=12000000 计数之后，你在中间。这就是您更改输出信号 ( `temp <= not temp`) 的电平值的地方。因为您指定它必须是 50% 的占空比。这样做时，您也会从头开始计数。

对于 8MHz，您有一个 (24000000/8)/2 = 1500000 的计数器。

并且只是一个小评论：最好使用`ieee.numeric_std`库 iso the`ieee_logic_arith`和 the`ieee.std_logic_unsigned`

注意：代码首先分配给一个信号`temp`。然后将信号`temp`输出`clkout`。这背后的原因是在 VHDL 中不允许从输出端口 ( `clkout`) 读取。你应该在做`output <= not output;`. 从一个信号，读取是允许的。

还有一点需要注意的是：在过程的敏感度列表中，不需要有`counter`信号。

```
process(CLKin, reset) -- no counter needed 
```

而且，另一件事......计算12000000个周期是：0 - >（12000000-1）= 11999999

# html - 是否可以创建画布路径，翻转它，然后应用填充？（以该顺序）

> ID：15053024
> 
> 赞同：0
> 
> 时间：2013-02-24T15:04:20.350
> 
> 标签：html, canvas

是否可以创建画布路径，翻转它，然后应用填充？

它需要按照特定的顺序。

**例子：**

1.  我画了一条路。假设它是一辆汽车。我**没有**填满路径（所以什么都看不见）
2.  我翻转路径
3.  我现在用渐变填充路径，这样渐变总是在同一个角度

**编辑：** 我尝试制作一个带有“未填充”路径的临时画布，翻转它，然后使用它来将其应用于“真实”画布：

```
 ctx.drawImage(tempCanvas,0,0,canvasWidth, canvasHeight); 
```

然后我像这样应用我的填充：

```
ctx.fill(); 
```

画布仍然是空的。我不知道具体为什么。我想这在某种程度上是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T23:24:48.207

是的你可以！

您可以在绘制**之前**水平翻转画布，然后翻转之后绘制的**所有**内容。

没有性能损失！

当然，在你进行翻转之前，你需要 context.save() 并且在绘制之后你需要 context.restore() 以便进一步的绘图在未翻转的画布上。

要在绘制之前翻转画布，请执行以下转换：

```
context.translate(canvas.width,0);
context.scale(-1,1); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/nFvaU/](http://jsfiddle.net/m1erickson/nFvaU/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
    img{border:1px solid blue;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");

        var img=new Image();
        img.onload=function(){

            // 1\. Save the un-flipped canvas
            ctx.save();

            // 2\. Flip the canvas horizontally
            ctx.translate(canvas.width,0);
            ctx.scale(-1,1);

            // 3\. Draw the image -- or you're path of a car
            ctx.drawImage(img,0,0);

            // 4\. Restore the canvas so further draws are not flipped horizontally
            ctx.restore();

        }
        img.src="http://dl.dropbox.com/u/139992952/car.png";

    }); // end $(function(){});
</script>

</head>

<body>
    <p>Original Image</p>
    <img src="http://dl.dropbox.com/u/139992952/car.png" width=200 height=78>
    <p>Horizontally flipped Image on Canvas</p>
    <canvas id="canvas" width=200 height=78></canvas>
</body>
</html> 
```

# java - Scanning a LAN for a Socket?

> ID：15053034
> 
> 赞同：0
> 
> 时间：2013-02-24T15:05:04.853
> 
> 标签：java, sockets

I am creating a basic little game and I want it to be able to scan over a LAN using Sockets, My current code works, however it's crude and slow.

My current code works as such, it gets the current computers first 2 octaves (e.g 192.168), then it does a dual for loop (0- 255) to scan from 192.168.0.0 to 192.168.255.255, In my opinion this is a very inefficient method of scanning through all of the IP's in a LAN.

This is the code:

```
new Thread(new Runnable() {
@Override
public void run() { 
            int next = 0;
            try{
            String ipAd = InetAddress.getLocalHost().getHostAddress();
            String ipStart = ipAd.substring(0, NetHandler.nthOccurrence(ipAd, '.', 2)-1);

            Socket s;

            for(int i = 0 ; i < 255; i++){
                for(int j = 0 ; j < 255; j++){
                    s = new Socket();
                    String ip = ipStart + (i + "." + j);
                    tests++;
                    server = ip;    
                    try{
                    s.connect(new InetSocketAddress(ip, 26655), 10);
                    }catch(Exception e){
                        continue;
                    }
                    servers[next++] = ip;
                    componentList.add(new GuiButton(ids++, GuiMultiplayer.this, SpaceGame.WIDTH/2, SpaceGame.HEIGHT/4 - 60 + (50 * ids), ip));
                }
            }
            }catch(Exception e){
            }
        }
    }).start();
} 
```

Is there an easier method to maybe list all of the devices on my LAN network? Or is my crude, slow solution the only way?

A preview of this monstrosity:

![enter image description here](../Images/8bc3d0dd791239aeb01743b226553c56.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T18:03:59.660

Discovering running instances of your app on a LAN is commonly done using UDP broadcasts. Have the requesting app send a single request message to the LAN's subnet broadcast IP on a pre-determined port, which will copy the message to that port on every PC connected to that subnet. Your other apps can open a UDP listening socket on that port to receive requests with. When each app receives the request, it will have the IP of the requester and can send a reply directly to it, allowing the requester to discover the repliers. After sending the initial request, the requester can wait for a period of time gathering up any replies it receives, and then use the info as needed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:10:33.000

My suggestion would be to multi-thread your application so that you initiate multiple connections at once. Check out the [Java Concurrency tutorials](http://docs.oracle.com/javase/tutorial/essential/concurrency/) on how to do this if you haven't done multi-threaded Java applications before.

Edit: You can certainly combine this with other people's suggestions in the comments too. In fact, I would probably use their suggestions before dealing with concurrency.

# azure - visualstudio.com 的每次部署都会清理 Azure 托管空间

> ID：15053037
> 
> 赞同：0
> 
> 时间：2013-02-24T15:05:43.830
> 
> 标签：azure, visual-studio-2012

我正在使用 visualstudio.com 部署到 azure 站点。它工作正常，但在每次部署时，它都会从 azure 空间中删除所有文件。

我有用户上传的内容，所以如果它至少保留一个文件夹会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:12:01.843

这就是 Azure 部署默认的工作方式。

您可以将发布配置文件添加到构建定义中以阻止这种情况发生。

从 Azure 门户下载发布配置文件，并`Settings->File Publish Options`确保`Remove additional files at destination`未勾选下方。保存此配置文件，然后将其添加到团队资源管理器中的构建定义中。

理想情况下，您不应该将内容上传到站点本身，因为该站点会被复制到托管它的每个虚拟机上。如果在两个不同的实例上修改相同的用户数据，这些多个实例将导致数据完整性问题。（虽然你可以侥幸逃脱，如果只有一个实例的话......但它至少对 Azure 来说是不好的做法......）

# actionscript-3 - 是否可以从 Actionscript 3.0 中的另一个函数调用变量？

> ID：15053038
> 
> 赞同：0
> 
> 时间：2013-02-24T15:05:53.210
> 
> 标签：actionscript-3

```
import flash.events.MouseEvent;
import flash.events.Event;
import flash.utils.Timer;
import flash.events.TimerEvent;

var timer:Timer = new Timer(1000);

start_btn.buttonMode = true;
stop_btn.buttonMode = true;
start_btn.addEventListener(MouseEvent.CLICK, onStart, false, 0, true);
timer.addEventListener(TimerEvent.TIMER, onTimer, false, 0, true);
//stage.addEventListener(Event.ENTER_FRAME, onEnter, false, 0, true);
function onStart(evt:MouseEvent):void
{
    var minutes:Number = Number(min_txt.text);
    var seconds:Number = Number(sec_txt.text);
    timer.start();
}

function onTimer(evt:TimerEvent):void
{
    minutes--;
    trace("Timer Triggered!!");
} 
```

那么我该如何做到这一点，以使“分钟-”起作用..因为变量在一个单独的函数中..

（或给我另一种方式）..

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:13:32.347

如果在函数中声明变量，则为局部变量。您不能访问变量其他功能，其他范围。但是如果你在全局变量中声明。随处可用。

简单的方法，如果你全局声明变量。它是可用的。

```
import flash.events.MouseEvent;
import flash.events.Event;
import flash.utils.Timer;
import flash.events.TimerEvent;

var timer:Timer = new Timer(1000);

start_btn.buttonMode = true;
stop_btn.buttonMode = true;
start_btn.addEventListener(MouseEvent.CLICK, onStart, false, 0, true);
timer.addEventListener(TimerEvent.TIMER, onTimer, false, 0, true);
//stage.addEventListener(Event.ENTER_FRAME, onEnter, false, 0, true);
var minutes:Number;
function onStart(evt:MouseEvent):void
{
  minutes = Number(min_txt.text);
  var seconds:Number = Number(sec_txt.text);
  timer.start();
}

function onTimer(evt:TimerEvent):void
{
  minutes--;
  trace("Timer Triggered!!");
} 
```

# jpa - eclipselink.read-only 和事务边界

> ID：15053041
> 
> 赞同：1
> 
> 时间：2013-02-24T15:06:11.823
> 
> 标签：jpa, eclipselink

我使用 EclipseLink 作为我的 JPA 提供程序。当我在查询对象上使用以下代码时：

```
myQuery.setHint("eclipselink.read-only", "true"); 
```

查询在与原始 EntityManager 使用的连接不同的连接上执行，并返回错误的结果。
将查询设置为只读会导致 EclipseLink 在不同的连接上运行它是否有意义？（我正在使用连接池）。
另外我在persistence.xml中添加了：

```
<shared-cache-mode>NONE</shared-cache-mode> 
```

禁用跨会话缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:45:18.063

只读查询旨在仅显示已读提交的数据。如果您需要事务性数据，则不应使用只读。

您可能能够使用独占连接，（持久性单元或持久性上下文属性）

"eclipselink.jdbc.exclusive-connection.mode"="总是"

# java - 使用 LinkedHashMap java 创建三元组

> ID：15053043
> 
> 赞同：0
> 
> 时间：2013-02-24T15:06:13.930
> 
> 标签：java, hashmap, multimap, n-gram, on-duplicate-key

我正在尝试使用 LinkedHashMap> 创建一个三元组模型，其中 Entry 是最后输入的二元组的条目（其结构是：LinkedHashMap

现在的问题是，作为一个映射，它不存储多个键（用现有键的新键值对覆盖现有键值对）。

我不确定多图是否对此有用？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:08:29.490

每个实现`Map`接口的集合都在实现中保留它的键`Set`。Set 不能保留多个值。

Multimap 只是一个`Map<Key, Collection<Value>>`. 它允许在一个键下保留多个值。

[阅读有关地图的更多信息。](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)

# php - 慢速只读远程数据库

> ID：15053048
> 
> 赞同：0
> 
> 时间：2013-02-24T15:06:24.277
> 
> 标签：php, mysql, database, web-applications

我有一个 PHP webapp 必须访问一个远程只读数据库，该数据库恰好非常慢（每次查询 8-10 秒），问题是我对该数据库的缓慢无能为力，但是，我可以做尽我所能来处理这个问题。数据库上的数据变化不大，可能每天一两次，每次查询都比较小，所以我们在考虑这些选项：

1.  每天将远程数据库转储到本地数据库，问题是我们将数据更改延迟一天

2.  为每个查询使用缓存，问题是数据库更改后的第一个查询总是很慢。

有人有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:20:24.407

有没有可能添加选项

3）。让慢数据库的维护人员紧急修复它？

如果不是，我认为您可以采用 Matt B 的想法，但在本地处理。

2）。为每个查询使用（本地）缓存。每天两次，运行调用所有最常见查询的后端 cron 作业，以便您的本地数据“准备好”快速查找新内容。这样，您的用户应该很少受到延迟的影响，如果他们正在做一些不寻常的事情，需要调用“主”数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:11:53.943

使用选项 2 并且还有一个定期更新缓存的 cron 作业（至少对于您最常访问的页面/搜索）怎么样？

# php - 带有名称的搜索引擎的 Mysql 语法

> ID：15053050
> 
> 赞同：0
> 
> 时间：2013-02-24T15:06:55.713
> 
> 标签：php, mysql, sql

我想用 php 中的人制作一个“搜索引擎”。我有两列。第一个是first_name，第二个是姓我使用这个sql语法：

```
SELECT * 
FROM users 
WHERE first_name OR last_name LIKE '$search_term%' 
```

我希望 sql 同时搜索名字和姓氏，而没有一个包含 first_name 和 last_name 的列。请帮忙 ！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:07:35.933

它应该是

```
SELECT * 
FROM   users 
WHERE  first_name LIKE '$search_term%' AND 
       last_name LIKE '$search_term%' 
```

但是上面的查询执行*全表扫描*，因为*它不使用 index*。为了获得更好的性能，请搜索`FULL TEXT SEARCH`.

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# ruby-on-rails - 在任何源中都找不到 activesupport-3.2.9 (Bundler::GemNotFound)

> ID：15053051
> 
> 赞同：0
> 
> 时间：2013-02-24T15:07:01.800
> 
> 标签：ruby-on-rails

我正在尝试通过乘客 + nginx 部署 Rails 网站。但是，当我尝试访问该网页时，出现以下错误。

这些是可能的原因： 应用程序代码中可能存在语法错误。请检查此类错误并修复它们。可能未安装所需的库。请安装此应用程序所需的所有库。应用程序可能未正确配置。请检查所有配置文件是否正确写入，修复任何不正确的配置，然后重新启动该应用程序。应用程序依赖的服务（例如数据库服务器或 Ferret 搜索引擎服务器）可能尚未启动。请启动该服务。有关错误的更多信息可能已写入应用程序的日志文件。请检查它以便分析问题。

```
Error message:
**Could not find activesupport-3.2.9 in any of the sources (Bundler::GemNotFound)**

Exception class:
PhusionPassenger::UnknownError 
```

我在网站的文件夹中运行*bundle install*，看到所有的 gem 都安装成功，包括 activesupport-3.2.9，然后我运行*rails server*，我可以通过 3000 端口访问网站。这应该证明该网站代码没有严重错误。

```
Here is what I added to nginx.conf file:
    server {
    listen 80;
    server_name localhost "";
    root /var/www/mysite/public;
    passenger_enabled on;
    } 
```

我不知道我还应该检查什么来解决这个问题。对你的帮助表示感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T13:57:38.070

我认为您可能需要配置`passenger.conf`为指向您用于运行捆绑器的相同 ruby​​ 版本 - 尝试运行乘客配置实用程序：

```
 passenger-config --ruby-command 
```

请参阅：[https ://stackoverflow.com/a/17088686/1578861](https://stackoverflow.com/a/17088686/1578861)

# php - 从后台数据库中检索图像名称：url

> ID：15053052
> 
> 赞同：-1
> 
> 时间：2013-02-24T15:07:03.353
> 
> 标签：php, background-image

我想使用我在数据库中制作的图像参考作为背景：url。我已经完成了设计 => [http://i49.tinypic.com/30ihudz.png](http://i49.tinypic.com/30ihudz.png)在我当前的代码中，我使用 div 样式来检索图像，但这并没有显示任何图像。有人可以指导我吗？提前致谢。

公共功能显示产品（）{

```
 $product = $this->db->query("SELECT id, title, description, price, filename FROM trips ORDER BY id");

            while ($row = $product->fetch_assoc())
                        {
                    $output .= '<div class="reisbox">';
                            $output .= '<div id="reis_insidebox1" style="background: url(\'img/content/'.$row['filename'].'\')" width="1000" height="500">';
                    $output .= '<div class="reis_textbox">';
                    $output .= '<h2>'.ucfirst($row['title']).'</h2>';
                            $output .= '<article>';
                            $output .=  ucfirst($row['description']);
                            $output .= '</article>';
                            $output .= '</div>';
                    $output .= '<div class="rightboxx">';
                    $output .= '<div class="reis_price_box">';
                            $output .= '<div class="reis_price_box_text">';
                            $output .= '&euro;'.$row['price'];
                            $output .= '</div>';
                            $output .= '<div class="more_box">';
                            $output .= '<a href="index.php?page=reis.php&pid='.$row['id'].'"><p>Lees meer..</p></a>';
                            $output .= '</div>';
                            $output .= '</div>';
                            $output .= '</div>';
                            $output .='<br />';
                            $output .= '<div id="add">';
                            $output .='<a href="index.php?page=cart.php&action=add&id='.$row['id'].'"><p>Add to cart</p></a>';
                            $output .= '</div>';
                    $output .= '</div>';
                            $output .= '</div>';
                }
                return $output;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:12:35.757

C:/ 不是 URL，因为它没有协议（如 file: 或 http:）。使路径指向 htdocs 文件夹中的文件，例如

```
"http://localhost/images/" 
```

管他呢。

# scala - 如何在反序列化 Json 时修复对重载的 apply() 方法的不明确引用

> ID：15053053
> 
> 赞同：5
> 
> 时间：2013-02-24T15:07:06.460
> 
> 标签：scala, playframework-2.0

鉴于以下需要对 JSON 进行序列化/反序列化的案例类...

```
import play.api.libs.json
import play.api.libs.functional.syntax._

trait MyTrait(s1: String, s2: String)

case class MyClass(s1: String, s2: String) extends MyTrait {

  def this(t: MyTrait) = this(t.s1, t.s2)
}

object MyClass {

  def apply(t: MyTrait) = new MyClass(t)

  implicit val myClassJsonWrite = new Writes[MyClass] {
    def writes(c: MyClass): JsValue = {
      Json.obj(
        "s1" -> c.s1,
        "s2" -> c.s2
      )
    }
  }

  implicit val myClassJsonRead = (
    (__ \ 's1).read[String] ~
    (__ \ 's2).read[String]
  )(MyClass.apply _)
} 
```

...我总是收到以下错误消息：

```
[error] /home/j3d/Projects/test/app/models/MyClass.scala:52: ambiguous reference to overloaded definition,
[error] both method apply in object MyClass of type (s1: String, s2: String)models.MyClass
[error] and  method apply in object MyClass of type (t: MyTrait)models.MyClass
[error] match expected type ?
[error]   )(MyClass.apply _)
[error]             ^ 
```

...为什么编译器不推断正确的`apply`方法？我该如何解决这个错误？任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:21:38.290

您可以像这样选择正确的方法：

```
MyClass.apply(_: String, _: String) 
```

编译器无法推断出正确的类型，因为您引用了该`apply`方法。因为您明确引用它们，所以编译器不会为您做出选择。

为了使语法更具可读性，您可以更改伴随对象定义

```
object MyClass extends ((String, String) => MyClass) { 
```

这样您就可以简单地引用伴随对象而不是模棱两可的`apply`方法

```
implicit val myClassJsonRead = (
  (__ \ 's1).read[String] ~
  (__ \ 's2).read[String])(MyClass) 
```

# android - 如何在 StaggeredGridView 中使用 setScrollListener

> ID：15053054
> 
> 赞同：3
> 
> 时间：2013-02-24T15:07:07.507
> 
> 标签：android, android-layout, android-gridview

我试图在 StaggeredGridView 中添加 Scroll 侦听器，我想不出一种方法来添加没有实现的方法，我可以看到
Github url [https://github.com/maurycyw/StaggeredGridView](https://github.com/maurycyw/StaggeredGridView) 谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T12:39:43.923

这是我尝试解决问题的方法

首先，添加一个私有实例：

```
private AbsListView.OnScrollListener mOnScrollListener; 
```

添加公共 setOnClickListener 方法：

```
public void setOnScrollListener (AbsListView.OnScrollListener l) {
    mOnScrollListener = l;
} 
```

然后，在 trackMotionScroll 中，添加行来调用侦听器：

```
private boolean trackMotionScroll(int deltaY, boolean allowOverScroll) {
.
.
.

/* HERE we call onScroll */
if (mOnScrollListener != null) {
    mOnScrollListener.onScroll(null, getFirstPosition(), getChildCount(), this.mItemCount);
}

return deltaY == 0 || movedBy != 0;
} 
```

您也可以实现自己的`onScrollStateChanged (AbsListView view, int scrollState)`方法，但我懒得这样做：P

最后，您可以调用`gridView.setOnScrollListener(listener)`将侦听器传递给 StaggeredGridView

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T14:22:58.830

创建一个继承 SwipeRefreshLayout 的类并重写 canChildScrollUp() 方法来检查 StaggeredGridView 是否到达顶部，如果到达顶部返回 true，否则返回 false。

```
public class SwipeDownToRefrsh extends SwipeRefreshLayout{

PullToRefreshStaggeredGridView pullToRefreshStaggeredGridView;

public SwipeDownToRefrsh(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

public void canChildScrollUp (PullToRefreshStaggeredGridView pullToRefreshStaggeredGridView) {
    this.pullToRefreshStaggeredGridView = pullToRefreshStaggeredGridView;
}

@Override
public boolean canChildScrollUp() {
    // TODO Auto-generated method stub
    if (pullToRefreshStaggeredGridView == null) {
        return true;
    } else {
        return !pullToRefreshStaggeredGridView.getRefreshableView().mGetToTop;
    }
} 
```

}

在您的 Activity 或 Fragment 中，只需发送 StaggeredGridView 的瞬间，如下所示：

((SwipeDownToRefrsh)holder.swipeRefreshLayout).canChildScrollUp(holder.staggeredGridView);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T09:18:12.970

我遇到了同样的问题，这就是为什么我自己添加了对滚动监听器的支持，你可以在 github 上找到该项目：[https ://github.com/GoMino/StaggeredGridView](https://github.com/GoMino/StaggeredGridView)

# android - 画布游戏缩放（确定真实的触摸坐标）

> ID：15053058
> 
> 赞同：0
> 
> 时间：2013-02-24T15:07:36.073
> 
> 标签：android, canvas, zooming, scale, coordinate-transformation

我是 android 游戏开发的新手，非常感谢您的帮助。我想在画布上画一些应该比屏幕大得多的图形。所以一些缩放和移动会很棒。我读过一些问题，但他们通常只回答一些细节 - 而不是整个概念。

我试过用相机

```
cam.save();
cam.translate(0f, 0f, -8f);
cam.applyToCanvas(canvas);
cam.restore(); 
```

这可以完美缩放，但我无法解码真正的触摸坐标。

我不想使用openGL（它有点矫枉过正，而且我想从简单的开始）

无论如何，我也尝试**了 canvas.scale(int, int)**，但没有奏效。我相信相机是正确的方式，但我迷路了。

所以问题是：如何确定实坐标？此外，如果有人可以分享一段教程等或一些使用画布转换的概念，那就太好了。（或者也许有更合适的方法来解决它）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:53:15.753

你必须覆盖 onTouchEvent

```
@Override
     public boolean onTouchEvent(MotionEvent event) {
         float x = event.getX();
         float y = event.getY();

         switch (event.getAction()) {
             case MotionEvent.ACTION_DOWN:
                 touch_start(x, y);
                 invalidate();
                 break;
             case MotionEvent.ACTION_MOVE:
                 touch_move(x, y);
                 invalidate();
                 break;
             case MotionEvent.ACTION_UP:
                 touch_up();
                 invalidate();
                 break;
         }
         return true;
     }

 private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }

     private void touch_move(float x, float y) {
         float dx = Math.abs(x - mX);
         float dy = Math.abs(y - mY);
         if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
             mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
             mX = x;
             mY = y;
         }
     }
     private void touch_up() {
         mPath.lineTo(mX, mY);
         // commit the path to our offscreen
         mCanvas.drawPath(mPath, mPaint);
         // kill this so we don't double draw
         mPath.reset();
     } 
```

# mysql - 从 ActiveRecord 返回结果的强制顺序

> ID：15053062
> 
> 赞同：0
> 
> 时间：2013-02-24T15:07:47.380
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, ruby-1.9.3

我有以下数组（例如）：

```
array = [234,675,11,233,99] 
```

我比运行以下 ActiveRecord 查询：

```
User.where(id: array) 
```

返回的数组将随机排序。

但是，我希望返回的结果基于原始数组的顺序（即 id=234 是第一个，id=99 是最后一个）。

我可以在数组上循环并触发 5 个单独的查询，有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:19:12.103

复制：

[ActiveRecord.find(array_of_ids)，保留顺序](https://stackoverflow.com/questions/1680627/activerecord-findarray-of-ids-preserving-order)

所以基本上代码应该是：

User.find(ids).order("field(id, #{ids.join(',')})")

# java - Java - 从文件路径获取图像

> ID：15053063
> 
> 赞同：0
> 
> 时间：2013-02-24T15:07:48.190
> 
> 标签：java, image, filepath

嘿，是否可以在不使用 java 中的完整文件位置的情况下从文件中获取图像？我下面的代码仅适用于完整的文件路径：

```
Icon icon = new ImageIcon("/Users/MyMac/Documents/Project/Software/Project/src/UI/Images/default_pic.png"); 
```

是否可以这样使用文件路径？：

```
Icon icon = new ImageIcon("/src/UI/Images/default_pic.png"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:25:56.127

"/src/UI/Images/default_pic.png" 是绝对路径，所以它会**在根目录中**查找 src 目录，然后在其中查找 UI 子目录，等等。这不是您想要的。

您可以使用诸如“src/UI/Images/default_pic.png”之类的相对路径（注意它不以“/”开头），但正如它的名字所说，它是相对于当前目录的。因此，如果您的当前目录是 /Users/MyMac/Documents/Project/Software/Project （或包含同一子路径中的文件的任何目录），它将起作用，否则不会。

最后，另一种方法是通过类路径访问文件。考虑到项目可以打包成 jar 文件，图像文件可能不是磁盘上的单独文件，但您仍然可以获取 URL 或 InputStream 来访问它。在 Class 和 ClassLoader 中搜索 getResource 和 getResourceAsStream。

# java - HashMap 用于存储大缓存

> ID：15053066
> 
> 赞同：0
> 
> 时间：2013-02-24T15:08:04.123
> 
> 标签：java, caching, hashmap

考虑有一些对象需要在一个类中重复使用多次。单独的每个对象可以很大，并且这样的对象的数量也可以非常大。此类对象的一个​​非常简单的示例可能是数据库中的记录。

将此类数据存储在 HAshMap 中，而不是每 10 行后再次查询到数据库可以帮助提高性能。但是，内存方面要求很高。

HashMap 怎么可能包含大量数据，但不能将所有数据都保存在内存中。如果它可以按需提供对象，那将是最好的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:17:21.383

您可以使用基于 LRU 的映射进行缓存，并且缓存大小的长度是固定的， `Least-Recently-Used`对象将保留在内存中。

在java中很容易得到这样的地图，`[LinkedHashMap][1]`.

```
final int MAX_ENTRIES = 100;
Map cache = new LinkedHashMap(MAX_ENTRIES+1, .75F, true) {
    // Returns true if this map should remove its eldest entry
    public boolean removeEldestEntry(Map.Entry eldest) {
        return size() > MAX_ENTRIES;
    }
}; 
```

您还可以使您的`Map`同步。

```
Map m = Collections.synchronizedMap(cache); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T16:00:37.330

通常，在实现可能很大的缓存时，您希望使用[SoftReference](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/SoftReference.html)。通常它看起来像这样：

```
private final Map<KeyType, Reference<MyLargeObject>> cache =
    new HashMap<>();    // Or LinkedHashMap, as per Quoi's suggestion

public MyLargeObject getCachedValue(KeyType key) {
    Reference<MyLargeObject> ref = cache.get(key);
    return (ref != null ? ref.get() : null);
}

public void addToCache(KeyType key, MyLargeObject value) {
    cache.put(key, new SoftReference<MyLargeObject>(value));
} 
```

SoftReference 持有一个对象，但如果内存变得紧张，将允许对该对象进行垃圾收集。如果对象确实被垃圾回收，SoftReference.get() 返回 null。

# resize - 使 QTreeView 自动调整为内容

> ID：15053067
> 
> 赞同：5
> 
> 时间：2013-02-24T15:08:18.437
> 
> 标签：resize, pyqt, qtreeview, qscrollarea

我正在尝试`QTreeView`对其内容进行自动调整大小。这是我的设置：我正在尝试创建一个`QWidget`带有`Qt.Tool | Qt.FramelessWindowHint`as its的“智能”工具提示`WindowFlags`，效果很好。它包含一个带有一些按钮的布局（其大小是恒定的）和`QTreeView`. 现在，每当向`QTreeView`'s 模型添加行时，`QTreeView`应该会自动增加其大小以避免垂直滚动条。

`QSizePolicy.Expanding`在工具提示小部件上设置`QTreeView`并没有改变任何东西 - 也许我在这里遗漏了一些额外的标志或其他东西。

我还尝试了以下蛮力方法：

```
class ToolTip:
    def __init__(self):
        ...
        self.itemView.setVerticalScrollMode(QAbstractItemView.ScrollPerPixel)
        self.itemView.verticalScrollBar().rangeChanged.connect(self.resizeViewVertically)

    def resizeViewVertically(self, min, max):
        self.resize(self.width(), self.height() + max) 
```

这在大多数情况下都有效，但并非总是如此。每隔一段时间（准确地说是每隔一次，但我不知道这是否是巧合），使用此代码，视图会正确调整大小（即所有内容都适合，并且不需要滚动条），但滚动条不会消失，允许滚动到最后一行下方的空白处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T19:24:24.370

您可能想参考此项目的工作原理：http: [//ftp.ics.uci.edu/pub/centos0/ics-custom-build/BUILD/PyQt-x11-gpl-4.7.2/examples/layouts/flowlayout。 py](http://ftp.ics.uci.edu/pub/centos0/ics-custom-build/BUILD/PyQt-x11-gpl-4.7.2/examples/layouts/flowlayout.py)

可能会给你一些关于你需要什么的提示。它是一种布局，您可以将其放入滚动窗口中，当主窗口调整大小时，它将重新排列内部的所有小部件以适应

# swing - ubuntu 字体外观和感觉上的 netbeans

> ID：15053069
> 
> 赞同：4
> 
> 时间：2013-02-24T15:08:35.387
> 
> 标签：swing, netbeans, netbeans-7

有没有机会让 ubuntu 12 下的 Netbeans 7.3 中的字体看起来更好？？？看看 eclipse 和 netbeans 中相同代码的外观，而两个 IDE 都配置了相同的编辑器字体设置（等宽），我也尝试了其他字体。它看起来像 netbeans 以完全不同的方式渲染字体，字体更薄？为什么会这样？

![在此处输入图像描述](../Images/f571a4b66f9ce6c01deb9304dae24f33.png)

我阅读了很多关于该问题的内容，并已将以下内容添加到 netbeans.conf 文件中

```
-J-Dapple.awt.graphics.UseQuartz=false
-J-Dswing.aatext=true
-J-Dawt.useSystemAAFontSettings=lcd 
```

它修复了一点，但两者之间仍然存在很大差异，是否有人找到了该问题的适当解决方案，或者也许有人可以在这里声明根本没有解决方案？我是一个新的 Netbeans 用户并且喜欢这个 IDE 但这件事让我发疯了 ;((

会非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T19:26:20.000

无论您进行何种更改，字体看起来都会有所不同，因为 Eclipse 基于 SWT，而 NetBeans 基于 Swing；这两个 UI 工具包使用不同的字体渲染引擎。

在 Swing 中，某些字体看起来比其他字体更好。我对 Swing（以及几乎所有我使用等距字体的地方）的偏好是[Ubuntu Mono](http://font.ubuntu.com/)，但[Deja Vu Sans Mono](http://dejavu-fonts.org/wiki/Main_Page)和[Source Code Pro](http://blogs.adobe.com/typblography/2012/09/source-code-pro.html)在 Swing 中的渲染效果也很好。

您几乎可以肯定您的系统上已经有前两个，如果您愿意，第三个很容易安装。我会说 Source Code Pro 的行距对我的口味来说太大了，尽管它是一个不错的字体。

在启用您提到的 JRE 标志并选择合适的字体后，下一个重要项目是选择最佳字体大小。给定渲染引擎中的给定字体在给定大小下可能比在不同环境中看起来更好或更差。

我发现，在 Swing 中，Deja Vu Sans Mono 在偶数点大小上看起来更好，所以我通常在 NetBeans 中以 10pt 或 12pt 使用它。另一方面，Ubuntu Mono 在奇数尺寸下渲染得更好，所以我通常在 NetBeans 中以 11pt 或 13pt 使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T23:42:28.033

字体渲染是不同的，因为它们使用不同的 UI 库。Netbeans 使用摇摆。Eclipse 使用 swt。

您可以修补 jdk 以获得 swing 以尊重您的字体渲染设置： [https ://gist.github.com/aleksandara/2963640](https://gist.github.com/aleksandara/2963640)

应用了补丁的 ubuntu 的 PPA： [https ://launchpad.net/~no1wantdthisname/+archive/openjdk-fontfix](https://launchpad.net/~no1wantdthisname/+archive/openjdk-fontfix)

# c - C中的UDP套接字编程：2个客户端和1个服务器

> ID：15053072
> 
> 赞同：3
> 
> 时间：2013-02-24T15:08:50.703
> 
> 标签：c, udp, client

我对网络编程很陌生。我有一个 UDP 客户端/服务器，它以小写或大写形式向服务器发送消息。服务器接收消息并通过 switch case 将其转发回来。我不知道如何将其转发回第一个客户端，将其发送到客户端 2。这是我的代码。

服务器：

```
/*
Simple udp server

*/
#include<stdio.h>   //printf
#include<string.h> //memset
#include<stdlib.h> //exit(0);
#include<arpa/inet.h>
#include<sys/socket.h>
#include<ctype.h>

#define BUFLEN 512  //Max length of buffer
#define PORT 8888   //The port on which to listen for incoming data

void die(char *s)
{
    perror(s);
exit(1);
}

int main(void)
{
struct sockaddr_in si_me, si_other, si_other2;

int s, i, slen = sizeof(si_other) , recv_len;
char buf[BUFLEN];

//create a UDP socket
if ((s=socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)
{
    die("socket");
}

// zero out the structure
memset((char *) &si_me, 0, sizeof(si_me));

si_me.sin_family = AF_INET;
si_me.sin_port = htons(PORT);
si_me.sin_addr.s_addr = htonl(INADDR_ANY);

//bind socket to port
if( bind(s , (struct sockaddr*)&si_me, sizeof(si_me) ) == -1)
{
    die("bind");
}

//keep listening for data
while(1)
{
    printf("Waiting for data...");
    fflush(stdout);

    //try to receive some data, this is a blocking call
    if ((recv_len = recvfrom(s, buf, BUFLEN, 0, (struct sockaddr *) &si_other, &slen)) == -1)   // read datagram from server socket
    {
        die("recvfrom()");
    }

    //print details of the client/peer and the data received
    printf("Received packet from %s:%d\n", inet_ntoa(si_other.sin_addr), ntohs(si_other.sin_port));         printf("Data: %s\n" , buf);

    //now reply to server socket/the client with the same data
    if (sendto(s, buf, recv_len, 0, (struct sockaddr*) &si_other, slen) == -1)
    {
        die("sendto()");
    }

}

close(s);
return 0;
} 
```

客户端：

```
/*
Simple udp client

*/
#include<stdio.h>   //printf
#include<string.h> //memset
#include<stdlib.h> //exit(0);
#include<arpa/inet.h>
#include<sys/socket.h>
#include<ctype.h>

#define SERVER "192.x.x.x"
#define BUFLEN 512  //Max length of buffer
#define PORT 8888   //The port on which to send data

void die(char *s)
{
perror(s);
exit(1);
}

int main(void)
{
struct sockaddr_in si_other;
int s, s2, i, slen=sizeof(si_other);
char buf[BUFLEN];
char message[BUFLEN];

if ( (s=socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)        // create a client socket
{
    die("socket");
}

memset((char *) &si_other, 0, sizeof(si_other));
si_other.sin_family = AF_INET;
si_other.sin_port = htons(PORT);

if (inet_aton(SERVER , &si_other.sin_addr) == 0)            // Create datagram with server IP and port.
{
    fprintf(stderr, "inet_aton() failed\n");
    exit(1);
}

while(1)
{
    printf("Enter message : ");
    gets(message);

    int a;
    char message2[BUFLEN];
    for(a=0;a<=BUFLEN-1;a++)
      {
        if(message[a] >= 97 && message[a] <= 122)
           message2[a] = toupper(message[a]);
        else
           message2[a] = tolower(message[a]);

      }

    if (sendto(s, message2, strlen(message2) , 0 , (struct sockaddr *) &si_other, slen)==-1)
    {
        die("sendto()");
    }

    //receive a reply and print it
    //clear the buffer by filling null, it might have previously received data
    memset(buf,'\0', BUFLEN);
    //try to receive some data, this is a blocking call
    if (recvfrom(s, buf, BUFLEN, 0, (struct sockaddr *) &si_other, &slen) == -1)        // read datagram from client socket
    {
        die("recvfrom()");
    }

    puts(buf);
}

close(s);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-11T21:51:35.490

由于这有 21K 视图没有明确的答案，这是对 UDP 编码的基本理解。我会给它一些爱。

正如评论中已经提到的：在您的服务器代码中，您使用以下命令从客户端接收消息：

```
recvfrom(s, buf, BUFLEN, 0, (struct sockaddr *) &si_other, &slen)) 
```

这个函数的结果是消息数据将被写入`buf`，并且发送消息的套接字的IP地址和端口号将被填写`si_other`（必须是类型`struct sockaddr_in`）。

那么，当您使用以下命令发送响应时：

```
sendto(s, buf, recv_len, 0, (struct sockaddr*) &si_other, slen) 
```

由于`si_other`您作为 的目标地址传递的`sendto`包含您收到的最后一条消息的 ip/port，因此响应将始终返回给您收到的最后一条消息的发件人。在许多服务器应用程序中，这是一个非常常见的场景：您从某个地方收到请求，然后将响应发送回同一个地方。

如果您希望消息发送到其他地方，而不是向您发送请求的进程，那么您需要创建一个不同的 struct sockaddr_in 变量，其中包含您希望消息发送到的 IP 地址和端口。

在您的客户端代码中，您已经拥有执行此操作的代码，例如（清理了一下）：

```
struct sockaddr_in si_client2;

memset((char *) &si_client2, 0, sizeof(si_client2));
si_client2.sin_family = AF_INET;
si_client2.sin_port = htons(CLIENT2_PORT);
if(inet_aton(CLIENT2_HOST, &si_client2.sin_addr) == 0)
    perror("inet_aton"); 
```

所以现在，如果您在 sendto() 中使用 si_client2，数据包将发送到该客户端。

因为它是UDP，所以不能保证交付。如果有一个进程在该 IP 地址、该端口号上侦听 UDP，那么（如果没有发生网络错误）它将收到该消息。如果没有，什么都不会发生.. 你的信息消失在虚空中。

请记住，如果客户端 1 和客户端 2 都在同一台机器上运行，它们将需要使用不同的端口号，因为每个目标（无论是客户端还是服务器角色）都必须具有唯一的 IP 和 PORT 组合。

现在，在现实生活中的应用程序中，服务器很少会提前知道其客户端的 IP 和 PORT。通常客户端不会使用固定端口号，而是使用“临时端口”。系统在运行时分配。然而，客户端通常会配置服务器的 IP 和端口。

因此，在大多数情况下，您将在服务器中保留一些代码来保存客户端地址列表。也许一个简单的消息传递服务会保留它从其获取消息的最后 100 个客户端的列表......但这实际上是如何完成的将由应用程序的需要决定。对于像这样的简单练习，您可以按照我所说的对地址进行硬编码......

底线是，要将 UDP 数据包发送到特定目的地，发送者必须知道该特定目的地的 IP 和 PORT。知道这一点的唯一方法是拥有一些配置数据，或者让某人（例如目的地）提前发送一个数据包，让您知道它的存在。请记住，使用 UDP 套接字，您可以从任何地方获取消息，并且您将获得 ip/port 以及消息。如果您需要发送消息，则需要知道要发送消息的 ip/端口。您的应用程序的问题是弄清楚它将如何获取该信息以及将这些信息存储在何处以供以后使用。

# cuda - Visual Studio + Nsight：__syncthreads() 未定义

> ID：15053074
> 
> 赞同：3
> 
> 时间：2013-02-24T15:09:10.297
> 
> 标签：cuda

问题已经存在，但我有同样的问题，答案并没有解决它

[Cuda __syncthreads 未定义。没有它-> 随机结果](https://stackoverflow.com/questions/13844624/cuda-syncthreads-undefined-without-it-random-results)

当我使用 __syncthreads() 时，智能感知说它未定义。还有另一个是同步线程吗？

# java - 不进入for循环

> ID：15053075
> 
> 赞同：-2
> 
> 时间：2013-02-24T15:09:11.483
> 
> 标签：java, loops, encryption, for-loop

因此，对于我的一生，我无法弄清楚为什么没有输入用于加密的 for 循环！我已经放置了一些打印语句来确认它没有进入理论上它应该*在 3 次内打印 im*，而是进入第一个条件但随后没有进入第一个 for 循环（由 i 控制的那个）

```
 //method for Ceaser encryption takes in a string in plain text or encrypted form, the key, and mode option
public static String ceaser(String a, int x, int T ){

    System.out.println(a);
    System.out.println(x);
    System.out.println(T);
    String full = "abcdefghijklmnopqrstuvwxyz";
    String output ="";
    //used for type matching for concat method
    String convertChar="";
    char[] alpha = full.toCharArray();

    //used to find the inital value (index of the plain text letter in the alphabet 
    int position = 0;

    //selecting encryption
    if(T==1){
        System.out.println("im inside");
        for (int i=0; i>a.length(); i++){
            System.out.println("im inside");
            for (int l=0; l>full.length(); l++){
                System.out.println("im inside");
                System.out.println(a.charAt(i));

                if (a.charAt(i) == full.charAt(l))
                    System.out.println(full.charAt(l));
                    position = l;
                    System.out.println(position);

            }
                //Handling the circular property of the shift
                if ((position + x) > 25){
                    System.out.println(convertChar);
                    convertChar = Character.toString(full.charAt((25-position)-x));
                    System.out.println(convertChar);
                    output.concat(convertChar);
                }
            else{
                System.out.println(convertChar);
                convertChar = Character.toString(full.charAt(position + x));
                System.out.println(convertChar);
                output.concat(convertChar);
            }
        }
    }
    // Selecting decryption
    else {
        for (int u=0; u>a.length(); u++){

            for (int b=0; b>full.length(); b++){
                if (a.charAt(u) == full.charAt(b))
                    position = b;

                //handling circular property
                if((position - x) < 0){
                    convertChar = Character.toString(full.charAt(25-(x-position)));
                    output.concat(convertChar);
                }
                //applying inverse shift
                else{

                    //try printng out convert char for debug
                    convertChar = Character.toString(full.charAt(position - x));
                    output.concat(convertChar);
                }

            }
        }
    }
    //displaying the output
    System.out.println(output);
    System.out.println("death of ceaser");
    return output;
} 
```

程序当前输出为：

```
 Please select the type of encryption you would like performed enter 1 for Ceaser, 2 for vigenere, or 3 for matrix transposition
1
Please enter 1 for encryption or 2 for decryption
1
Please input the string you want encrypted or decrypted: 
yuck
Enter the amount to shift by, aka the Key: 
2
yuck
2
1
im inside

death of ceaser 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:10:15.807

使用*小于* `<`来表示您的循环结束条件。代替：

```
for (int i=0; i>a.length(); i++){ 
```

和

```
for (int i=0; i < a.length(); i++){ 
```

这同样适用于这里：

```
for (int l=0; l>full.length(); l++){ 
```

改成

```
for (int l=0; l < full.length(); l++){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T15:10:36.050

```
 for (int i=0; i>a.length(); i++){
            System.out.println("im inside");
            for (int l=0; l>full.length(); l++){ 
```

我猜您是在与错误的运算符进行比较，不应该是`i < a.length()`and`l < full.length()`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T15:10:49.703

这是因为你有

```
i>a.length() 
```

`i`从零开始，因此无论该字符串有多短，它都不能*大于*字符串的长度。

您需要将条件更改为`i < a.length()`

# backbone.js - JavaScript - Backbone.js 应用程序中的交互式图表

> ID：15053081
> 
> 赞同：2
> 
> 时间：2013-02-24T15:10:16.930
> 
> 标签：backbone.js, raphael, vector-graphics, jsplumb, sankey-diagram

**背景：**我目前正在使用 JavaScript、[jQuery](http://jquery.com/)和[Backbone.js](http://backbonejs.org/)（支持者需要这些）为 Web 应用程序开发客户端。
这是一个以图形模式（主要通过表示数据的交互式图表）可视化和编辑数据的应用程序。

**术语：**所述数据是多个*文档*的格式，每个文档包含一个*项目列表*。
对于这个问题，让项目由*标识符*、*文本描述*和指向其他文档中项目的*链接组成。*链接应该是对称的（`i1 -> i2`当且仅当`i2 -> i1`也存在时才存在）。

**当前目标：**在这个阶段，应用程序应该能够读取两个文档，并排显示两个列表，然后根据它们的*链接*绘制线条，连接两个文档之间的项目。
这些行应该是可编辑的。换句话说，用户应该能够创建新*链接*，或删除现有链接（反映项目模型上的更改）。

这些文档可能有点长，比如几十个项目（在现实场景中可能有几百个）。当然，页面将是可滚动的，以允许用户查看所有内容。

此外，为了方便用户，应该有一个滑块来缩放视图（允许*放大/缩小*效果，因此为用户提供了*全局*和*局部*视图，后者更适合编辑，前者更适合分析）。
此外，应该允许用户隐藏特定项目（当项目有很多链接时很有用，创建*视觉垃圾*）。

**我设法做到了：**

*   读取数据并将其映射到 Backbone 模型和集合；
*   并排显示两个文档（主干视图），并带有项目连接；
*   允许在这些连接上进行交互（拖放以创建线条，单击以删除），反映骨干模型的变化；
*   隐藏特定项目；
*   规模效应。

在遇到[jsPlumb](http://jsplumbtoolkit.com/jquery/demo.html)之后，我使用[SVG](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)实现了这一点。

**手头的问题：**应用程序仍然需要调整（强调缩放效果）。无论如何，我发现 jsPlumb 使用起来很舒服。但是，在使用滑块时，渲染性能似乎有些不足（可能是滑块步长太小，从而触发了太多事件）。

支持者建议我尝试使用桑基图来表示这种数据。他们还建议我尝试基于[Raphaël.js](http://raphaeljs.com/)[的 tamc 的 Sankey](http://tamc.github.com/Sankey/)。 当然，视觉因素也有贡献。

**我的问题：**这个库是否与 Backbone 有很好的兼容性？可能，如果我使用生成的 SVG 元素作为主干视图的元素。
另外，两者中的任何一个都比另一个具有显着的渲染性能优势吗？

最后一点，是否还有其他库更适合这种情况，值得花时间重写应用程序，我可能会向支持者建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:18:31.530

该项目正在进行中，我最终使用[了 tamc 的 Sankey](http://tamc.github.com/Sankey/)，我自己做了一些额外的工作，以更好地适应这种特殊情况。

![在此处输入图像描述](../Images/57ce67939517002a0af3c1b84ea7ad25.png)

# .net - vs 2010 使用 odp.net 连接到 oracle

> ID：15053082
> 
> 赞同：0
> 
> 时间：2013-02-24T15:10:18.703
> 
> 标签：.net, vb.net, odp.net

我在 Visual Studio 2010 中有一个连接到 Oracle 数据库的简单表单。它有效。

```
 Dim oradb As String = "Data Source=" _
 + "(DESCRIPTION =" _
   + " (ADDRESS_LIST = " _
    + "  (ADDRESS = (PROTOCOL = TCP)(HOST = [HostName])(PORT = [PortNumber])) " _
   + " ) " _
  + " (CONNECT_DATA = " _
  + "   (SERVICE_NAME = APPS)" _
 + "  ) " _
+ " );User Id=accountt;Password=my_pwd; "

    Dim conn As New OracleConnection(oradb)
    conn.Open()
    Dim cmd As New OracleCommand
    cmd.Connection = conn
    cmd.CommandText = "select cit2 from wild9 where zipl=72055"
    cmd.CommandType = CommandType.Text
    Dim dr As OracleDataReader = cmd.ExecuteReader()
    dr.Read()
    Label1.Text = dr.Item("cit2")
    conn.Dispose() 
```

我使用的是 Windows XP，而 Oracle 位于远程窗口服务器上。但是，当我尝试向项目添加数据连接时：我得到：

ORA-12560: TNS: 协议适配器错误。（如果我将源保留为本地数据库）

ORA-12154: TNS: 无法解析指定的连接标识符（如果我将数据源更改为“jerry_apps”- 这就是它在 tnsnames.ora 中的名称）

我将 tnsnames.ora 复制到不同的目录中以保持相同。我什至配置了一个“Oracle Listner”。

有什么建议么？

# joomla - 迁移 Joomla 2.5 问题，网站外观和工作方式不同

> ID：15053088
> 
> 赞同：0
> 
> 时间：2013-02-24T15:10:39.453
> 
> 标签：joomla, migration

我正在尝试使用 akeeba kikstart 将 Joomla 网站从其临时服务器迁移到新服务器，在迁移过程中一切看起来都不错，但是一旦迁移完成，新服务器上的网站就会看起来很奇怪。这是我要迁移的网站：`http://46.20.125.254/~scfgroup/` 这就是迁移后的样子：[http ://www.scflegandcorporateservices.com](http://www.scflegalandcorporateservices.com)

有人知道为什么会这样吗？我该如何解决这个迁移问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:19:33.733

我从不使用任何第三方工具进行备份、传输等。我相信手动操作，老实说，非常简单。

1.  压缩原始站点并将其上传到新主机的 FTP，然后解压缩。
2.  从您的原始站点导出数据库并使用 PHPMyAdmin 将其导入新主机
3.  打开 configuration.php 并编辑数据库区域，使其与新服务器的设置相匹配。

希望以后应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:48:43.030

不用担心，您的 joomla 迁移过程进展顺利。如果网站可以通过 IP 访问，但不能通过域访问，那么这可能是因为

```
the ISP blocks the domain (unlikely)
the DNS server you use has some hiccups 
```

尝试将 Internet 连接中指定的 DNS 服务器地址更改为

```
Google DNS: 8.8.8.8, 8.8.4.4 or
OpenDNS: 208.67.222.222, 208.67.220.220 
```

还有其他一些免费的 DNS 服务，但我猜这些是大多数人使用的。否则，请与您的托管服务提供商解决此问题。

# php - Laravel ORM，日期比较

> ID：15053089
> 
> 赞同：26
> 
> 时间：2013-02-24T15:10:47.953
> 
> 标签：php, laravel, orm

我正在使用 Laravel 框架。

我想要这一天的所有行。这是我尝试过的：

```
DB::table('users')->where('created_at', '>=', date('Y-m-d H:i:s')) 
```

（`created_at`在数据库中以格式表示的字段：） `Y-m-d H:i:s`。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-24T16:02:40.263

嗯……这个问题有一个很好的答案，现在似乎已经消失了。*

是这样的：

```
User::where('created_at', '>=', new DateTime('today')) 
```

注意：如果您将此代码放在具有命名空间的文件中，或者将来可能使用命名空间，则应在 DateTime 类前面加上反斜杠：`new \DateTime('today')`。

* [https://stackoverflow.com/questions/15052679/laravel-framework-how-to-get-today-queries](https://stackoverflow.com/questions/15052679/laravel-framework-how-to-get-today-queries)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T15:36:38.450

`date('Y-m-d H:i:s')`返回现在的日期。

如果您想要一天开始的结果，可以将其替换为`date('Y-m-d').' 00:00:00'`.

如果您想要过去 24 小时的结果，可以将其替换为`date('Y-m-d H:i:s',time()-86400)`(86400 = 24*60*60)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-12T03:16:00.343

对于那些只需要比较日期而不需要时间的人，Lavarel 提供了一个方便的函数*whereDate*：

```
User::whereDate('created_at', '>=', date('Y-m-d')); 
```

[http://laraveldaily.com/eloquent-date-filtering-wheredate-and-other-methods/](http://laraveldaily.com/eloquent-date-filtering-wheredate-and-other-methods/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-04T14:44:45.087

简单地：

```
DB::table('users')->where('created_at', '>=', date('Y-m-d'). ' 00:00:00') 
```

获取这一天的所有行时（时间应为 00:00:00），因此请确保将日期条件设置为当前日期加上 00:00:00 即

```
date('Y-m-d'). ' 00:00:00' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-11T07:26:06.813

利用`whereDate`

```
$users = DB::table('users')
                ->whereDate('created_at', '2016-12-31')
                ->get(); 
```

您可能使用的其他功能是： `whereDate / whereMonth / whereDay / whereYear / whereTime`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-12T11:55:58.400

我知道这个话题很老，但可能有人试图从搜索引擎中找到解决方案。

您可以使用：

```
User::whereDate('created_at', '=', Carbon::today()->toDateString()); 
```

如果您想了解更多关于 Laravel 中使用 where 进行日期比较的信息，可以访问此链接。

[Eloquent 日期过滤：whereDate() 等方法](http://laraveldaily.com/eloquent-date-filtering-wheredate-and-other-methods/)

# android - Android html5 音频播放失败

> ID：15053095
> 
> 赞同：0
> 
> 时间：2013-02-24T15:11:02.570
> 
> 标签：android, html, audio, stream, progressive

我制作了一个 html 页面，并在其中放置了一个音频标签，然后我尝试使用我的 android 浏览器播放一些音乐。

但它不起作用。这是我的代码：

```
<audio id='simple-audio-player' src="http://m.html5/baidu.mp3" controls="controls" preload="metadata"></audio>

window.onload = function () {
  var au = document.getElementById("simple-audio-player");
  au.load();

  if(au.networkState != au.NETWORK_NO_SOURCE){
    alert('au.networkState != au.NETWORK_NO_SOURCE');
    try{
        au.play();
    }catch(err){
        alert(err);
    }
  }else{
    alert('au.networkState == au.NETWORK_NO_SOURCE');
  } 
```

};

我认为我的 IIS 配置有问题，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:56:43.360

您不能从窗口加载事件中播放音频，它必须响应用户交互而发生。

像这样...

```
window.addEventListener('ontouchstart', onStart);

function onStart()
{
    var audio = new Audio(); // --or-- document.getElementById('id-of-audio-tag');
    audio.src = "test.mp3";
    audio.play();
} 
```

# node.js - Node 中的 Mustache 和 Express

> ID：15053102
> 
> 赞同：2
> 
> 时间：2013-02-24T15:11:38.320
> 
> 标签：node.js, express, mustache

我正在拼命地尝试将[mu2 模块](https://github.com/raycmorgan/Mu)绑定到 node.js 中的 Express 中。但是，我似乎无法弄清楚，当尝试使用[mu2express 模块](https://github.com/TiddoLangerak/mu2Express)运行示例时，我在尝试运行时不断收到此错误：

```
module.js:340
throw err;
      ^
Error: Cannot find module 'mu2Express'
at Function.Module._resolveFilename (module.js:338:15)
at Function.Module._load (module.js:280:25)
at Module.require (module.js:362:17)
at require (module.js:378:17)
at Object.<anonymous> (/myapp.js:1:80)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10) 
```

这是由本地问题还是模块本身引起的错误？现在，我正在使用 node http 模块专门使用 mu2，但我真的想使用 express 是可能的。

有人可以帮忙吗？我应该提供更多信息吗？我对 node.js 很陌生，如果可能的话，我可以使用一些方向！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:36:49.443

查看合并：

[https://github.com/visionmedia/consolidate.js/](https://github.com/visionmedia/consolidate.js/)

它由 Express 背后的人自己制作，并支持 Hogan 和 Handlebars。

**编辑**：

您可以使用此初始化 Express 以进行合并

```
var express = require('express');
var cons = require('consolidate');
var app = express();

app.engine('html', cons.hogan);
app.set('view engine', 'html');
app.set('views', __dirname + '/views'); 
```

渲染现在将由 /views 提供，带有 HTML 扩展名和 Mustache-flavor 语法。

```
app.get('/', function (req, res) {
    res.render('index', {msg: 'Hello world!'}
}); 
```

还有一个基本模板，同样只是小胡子风格的语法

```
Hello {{msg}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:17:59.630

您需要文件中的`mu2Express`模块`myapp.js`，因此您需要先安装它。

您需要创建一个`package.json`至少包含以下内容的文件：

```
{
  "name": "myProject",
  "version": "0.0.1",
  "dependencies": {
    "mu2express": "~0.0.1"
  }
} 
```

而且我不确定这些示例是否适合该项目，您可能需要 require`mu2express`而不是`mu2Express`.

# ajax - 如何跳过 ajax 调用的验证？

> ID：15053105
> 
> 赞同：0
> 
> 时间：2013-02-24T15:12:00.607
> 
> 标签：ajax, validation, jsf, primefaces, selectonemenu

我有一个 h:inputText、h:selectonemenu 和命令按钮。Inputtext 是必填字段，我已将其定义为 immediate="true"。然后，当我单击按钮时，我想将 selectonemenu 的当前值传递给托管 bean。但它的passig为空。如何管理此验证，以便它允许我在托管 bean 中获取 selectOneMenu 的值。

我的代码是..

```
<h:inputText id="inputSome" required="true" requiredMessage="Pls enter something"/>
        <h:message for="inputSome"></h:message>
        <h:selectOneMenu id="recepients" value="#{controller.selected}" immediate="true">
            <f:selectItem itemLabel="Select" itemValue=""/>
            <f:selectItems value="#{controller.tempNameList1}"></f:selectItems>

        </h:selectOneMenu>

        <p:commandButton value="Add" action="#{controller.submit}"
            immediate="true"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T19:14:58.217

当您放入`immediate=true`commandButton 时，`Invoke Application`直接执行阶段，跳过（包括）验证之后的阶段。因此“应用模型值”阶段也被跳过，托管 bean 的属性保持未初始化。这会导致您为 的值传递 null `selectOneMenu`。解决方案是，您必须**手动**`selected`检索控制器的属性值，如下所示：

 **```
 Map<String, String> paramMap = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();

    for (String key : paramMap.keySet()) {
        if (key.contains("recepients")) {
            selected = Integer.parseInt(paramMap.get(key));
        }
    } 
```**

# java - 设置扬声器并不总是有效

> ID：15053107
> 
> 赞同：0
> 
> 时间：2013-02-24T15:12:02.257
> 
> 标签：java, android, broadcastreceiver, telephonymanager, android-audiomanager

我正在制作一个应用程序，用户可以通过我的应用程序呼叫他最喜欢的联系人。通话开始时，扬声器打开。为了使用此 Intent 拨打电话。

```
 Intent callIntent = new Intent(Intent.ACTION_CALL);
                callIntent.setData(Uri.parse("tel: "+contactnum.get(0)));
                startActivity(callIntent); 
```

当有一个外出呼叫时，会有一个启动 BroadcastReceiver 的 Intent

```
 <receiver android:name=".MyBroadcast">
    <intent-filter>

        <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
        <action android:name="android.intent.action.PHONE_STATE" />

    </intent-filter>
    </receiver>

public class MyBroadcast extends BroadcastReceiver{

    @Override
    public void onReceive(final Context context, Intent intent){
        // TODO Auto-generated method stub

        PhoneStateListener phoneStateListener = new PhoneStateListener(){
            @Override
            public void onCallStateChanged(int state, String incomingNumber){
                if(state == TelephonyManager.CALL_STATE_RINGING){
                }
                else if(state == TelephonyManager.CALL_STATE_IDLE){

                    AudioManager audioManager = (AudioManager) context
                            .getSystemService(Context.AUDIO_SERVICE);

                    audioManager.setSpeakerphoneOn(false);
                }
                else if(state == TelephonyManager.CALL_STATE_OFFHOOK){

                    AudioManager audioManager = (AudioManager) context
                            .getSystemService(Context.AUDIO_SERVICE);
                    audioManager.setSpeakerphoneOn(true);
                }
                super.onCallStateChanged(state, incomingNumber);
            }
        };
        TelephonyManager mgr = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);

        if(mgr != null){
            mgr.listen(phoneStateListener, PhoneStateListener.LISTEN_CALL_STATE);
        }
    }
} 
```

如您所见，onReceive 会在需要时打开扬声器。

问题是扬声器并不总是打开，而只是在用户第一次通话时打开。奇怪的是，如果用户在应用程序运行时打电话但不是通过我的应用程序正常工作，扬声器每次都会打开。什么会导致这样的事情？

还有别的，即使应用程序没有运行，启动接收器的意图也会继续工作，所以当我拨打电话或接听电话时，尽管应用程序甚至没有运行，但它会转动扬声器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:09:27.850

好的，所以我开始工作了。

我改变了意图过滤器，所以它只有一个动作

```
 <action android:name="android.intent.action.PHONE_STATE" /> 
```

当 TelephonyManager 处于摘机状态时，我设置了 audioManager 模式

```
audioManager.setMode(AudioManager.MODE_IN_CALL); 
```

就在打开扬声器之前，它可以工作。

更新

所以当应用程序没有运行时它仍然工作，但后来我发现这个问题[My Broadcast receiver get execute 即使我的应用程序不工作](https://stackoverflow.com/questions/12423271/my-broadcast-receiver-get-execute-even-if-my-application-is-not-working) ，我意识到我应该在我的主要活动中注册接收器并在活动中取消注册它销毁。

# php - 将两个 PHP 对象链接在一起

> ID：15053111
> 
> 赞同：0
> 
> 时间：2013-02-24T15:12:20.273
> 
> 标签：php

我有这两个对象：

```
$userinfo->pilotid;
$departures->total; 
```

我正在尝试获取`$departures->total`特定`pilotid`的 in `$userinfo`= `$userinfo->pilotid`。

但是，我不确定如何链接它们，以便它与 A 对 B 相呼应。我有类似的东西，但它没有显示任何内容。

```
<?php echo $pilotid->$departures->total; ?> 
```

此外，第一个对象的调用方式如下：

```
$pilotid = Auth::$userinfo->pilotid; 
```

这是使用查询从中收集对象的表的结构。

![http://i.stack.imgur.com/ZaYVe.jpg](../Images/4bab972fc5d7ab00b5f2b47b794db590.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:29:49.743

源于 OP 提供的数据，我假设它`$departures`与 1:n 关系`$userinfo`，`$userinfo`是包含 Pilotid 的 1。

因此，为了找出飞行员总共有多少次离开，有两种可能的方法，一种是使用子查询，这意味着这样的事情：

```
SELECT (SELECT COUNT(*) FROM `departures` WHERE `pilot_id` = ID) as total, * FROM pilots; 
```

在这种情况下，您的总数将在您的查询`total`列中。`$userinfo`

第二次尝试使用实际的 PHP。在这种情况下，您自己进行计数。

第一步：获取飞行员信息：

```
$userinfo = array();
while($row = fetch()) {
    $row->total = 0;
    $row->departures = array();
    $userinfo[$row->pilotid] = $row;
} 
```

这些行将为您提供以数组中的 ID 为键的飞行员数据。第二步。将出发点粘在飞行员身上。

```
while($row = fetch()) {
    if(isset($userinfo[$row->pilotid])) {
        $userinfo[$row->pilotid]->departures[] = $row;
        ++$userinfo[$row->pilotid]->total;
    }
} 
```

如果这不是您要查找的内容，我将需要您提供更多信息，但是像这样您将能够通过使用对象中的`total`变量`$userinfo`或简单地调用来获取飞行员的离开阵列`count`上。`departures`

另一个变体，它使实际起飞和飞行员分开，看起来像这样：

第一步：获取飞行员信息：

```
$userinfo = array();
while($row = fetch()) {
    $row->total = 0;
    $userinfo[$row->pilotid] = $row;
} 
```

这些行将为您提供以数组中的 ID 为键的飞行员数据。第二步。将出发点粘在飞行员身上。

```
$departures = array();
while($row = fetch()) {
    if(isset($userinfo[$row->pilotid])) {
        $departures[] = $row;
        ++$userinfo[$row->pilotid]->total;
    }
} 
```

我希望您会发现这些建议很有用。

编辑：从 OP 获得一些额外信息后，我建议更改用于访问相关信息的查询。

这是OP的原始代码

```
$dep_query = "SELECT COUNT(pilotid) as total, depicao, pilotid FROM phpvms_pireps GROUP
    BY depicao, pilotid ORDER BY total DESC LIMIT 5";

    $fav_deps = DB::get_results($dep_query);

    foreach($fav_deps as $departure)
    {
            $dep_airport = OperationsData::getAirportinfo($departure->depicao);
            $pilotid = Auth::$userinfo->pilotid;
    ?>
            <tr class="awards_table1">
                    <td width="10%"><?php echo $departure->depicao; ?></td>
                    <td width="10%"><img src="<?php echo Countries::getCountryImage($dep_airport->country); ?>" /></td>
                    <td width="60%"><?php echo $dep_airport->name; ?></td>
                    <td width="20%"><?php echo $pilotid->{$departures->total}; ?></td>
            </tr>
    <?php
    }
    ?> 
```

我们要更改的第一件事是用于获取班次的查询。如果我们实际上只想要有问题的飞行员之一，为什么要获取所有信息？

```
$pilotid = $userinfo->pilotid; //As per Chat discussion
$dep_query = "SELECT COUNT(depicao) as total, depicao FROM phpvms_pireps WHERE pilotid = $pilotid GROUP BY depicao ORDER BY total DESC LIMIT 5"; 
```

此查询将返回由相关飞行员运行的来自不同机场的前 5 个航班。至于其余的：

```
$fav_deps = DB::get_results($dep_query);

if(is_array($fav_deps)) {    //For the general use
    foreach($fav_deps as $departure) {
        $dep_airport = OperationsData::getAirportinfo($departure->depicao); ?>
        <tr class="awards_table1">
            <td width="10%"><?php echo $departure->depicao; ?></td>
            <td width="10%"><img src="<?php echo Countries::getCountryImage($dep_airport->country); ?>" /></td>
            <td width="60%"><?php echo $dep_airport->name; ?></td>
            <td width="20%"><?php echo $departure->total; ?></td> //Here is the actually changed Layout code
        </tr>
<?php 
    } 
} else echo "This pilot didn't have any departures yet."; 
```

?>

通过这些更改，您的代码应输出所需的结果。虽然它是完全未经测试的。但是它应该给你正确的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:18:04.140

我认为你需要的是这个（注意大括号）：

```
<?php echo $pilotid->{$departures->total}; ?> 
```

除非我误解了这个问题...

# java - 如果元素不存在跳到硒的下一步

> ID：15053112
> 
> 赞同：-1
> 
> 时间：2013-02-24T15:12:24.303
> 
> 标签：java, selenium

我正在使用 java`try`和`catch`. 如果该元素不存在，我需要跳到下一步

我在块内尝试了以下内容`try`：

```
driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS); 
```

但出现以下错误：

> org.openqa.selenium.remote.ErrorHandler$UnknownServerException：元素当前不可见，因此可能无法与之交互`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-14T08:53:27.723

您可以尝试以下方法：

```
WebDriverWait wait = new WebDriverWait(driver,20);

try {
    wait.until(ExpectedConditions.visibilityOfElementLocated(By.id("id of the element to be located")));
    return SUCCESS;
} catch (NoSuchElementException exception) {
    return FAILURE;
} 
```

如果返回`SUCCESS`则执行下一行，否则跳过它。

# spring - 我们如何在加载时从参考数据方法中将值分配给弹出表单字段

> ID：15053117
> 
> 赞同：0
> 
> 时间：2013-02-24T15:12:38.350
> 
> 标签：spring, jsp, jakarta-ee, servlets, spring-mvc

我有一个弹簧表单名称 UpdateStock.jsp

```
<form:form........>
 <form:input path="compAmount"/>
 ............
</form:form> 
```

我的意图是用数据库中的一些默认值初始化上面的弹簧表单文本框。所以我有表单文本标签

```
 <form:input path="compAmount" value=${compamount}/> 
```

这里 ${compamount} 是 referenceData() 方法返回的值之一。但问题是 value=${compamount} 无效。

所以我离开它并执行以下操作：

即在**reference_Data()方法中初始化****Object 命令**对象，如下所示。但它不起作用。

 **```
protected Map reference_Data(HttpServletRequest request, Object command,Errors errors, int page) throws Exception {

   UpdateStockBean bean=new UpdateStockBean();//which is correspond to UpdateStock.jsp page

   bean.setCompAmount(300);//this do not change the value of corresponding field
   command=new Object();
   command=(Object)bean;

} 
```

你能提出解决方案吗！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:07:43.577

你可以尝试这样的事情，你正在使用`Map`Collection：

```
Map yourname = new HashMap(); 
yourname.put("compamount", bean.getCompAmount()); 
```

所以这里的 ${compamount} 是 reference_Data() 方法返回的值之一。

**我希望能帮助你:)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:20:28.057

听起来您想为表单的某些文本字段设置一些默认值。如果您正在使用`SimpleFormController`，您可以简单地覆盖该方法`protected Object formBackingObject(HttpServletRequest request)`以在表单字段中使用一些默认数据填充表单。

您不应该`protected Map referenceData(HttpServletRequest request)`为此目的使用方法。因为`referenceData`用于为复选框或单选按钮提供列表数据。这在mkyoung的[这篇不错的文章中得到了很好的解释。](http://www.mkyong.com/spring-mvc/spring-mvc-form-handling-example/)

如果你正在使用`AbstractWizardFormController`，你仍然有方法`protected Object formBackingObject(HttpServletRequest request)`和`protected Map referenceData(HttpServletRequest request)`。因为[AbstractWizardFormController](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/mvc/AbstractWizardFormController.html)是 AbstractFormController 的子类[，](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/mvc/AbstractFormController.html)它最终拥有上述方法。这是一个使用表单烘焙对象的[示例演示。](http://www.mkyong.com/spring-mvc/spring-mvc-handling-multipage-forms-with-abstractwizardformcontroller/)`AbstractWizardFormController`

干杯!**

# jquery - 检测元素中何时存在 URL

> ID：15053118
> 
> 赞同：-1
> 
> 时间：2013-02-24T15:12:41.617
> 
> 标签：jquery, regex

HTML：

```
<textarea name="test">
  http://google.com/
  https://google.com/
  http://www.google.com
  www.google.com/
  [url=http://google.com/]test[/url]
  text
</textarea> 
```

jQuery：

```
$('button').click(function() {
    if ($('textarea[name="test"]').val().match(/\[url/)) {
        alert('links exist');
    }
}); 
```

什么样的正则表达式会匹配我在我的每个 URL 实例`<textarea>`？

**jsFiddle：http:** [//jsfiddle.net/5Z8AU/](http://jsfiddle.net/5Z8AU/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:38:56.517

[这里](https://stackoverflow.com/questions/1141848/regex-to-match-url)有更详细的答案。但是，如果您正在寻找一个仅处理您列出的情况的简单正则表达式，则可以这样做。

```
(http|\[url|www)[^\s]*(/|com|url]) 
```

可以理解为这部分是字符串的开头

```
(http|\[url|www) anything that starts with http, [url, or www 
```

接受任何不是空格的匹配字符

```
[^\s]* 
```

这就是她弦的结束

```
(/|com|url]) anything that ends with /, com, or url] 
```

# c# - 查询有效，但将其放入存储过程时不起作用

> ID：15053120
> 
> 赞同：0
> 
> 时间：2013-02-24T15:12:44.347
> 
> 标签：c#, sql-server, tsql, stored-procedures

我测试下面的查询并正常工作

```
select * from tbl where userName in ('A','B','C') 
```

但是当我创建一个存储过程并将参数传递给它时不起作用（参数正确）

```
SqlCommand sc = new SqlCommand("exec example @userName",...
sc.Parameters.AddWithValue("@userName", "'A','B','C'");
...

// Stored Procedure
create procedure example 
    @users varchar(100)
as
    select * from tbl where userName in ('@users') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:16:29.940

不要将论点放在引号中。

但是，只需：

```
select * from tbl where userName in (@users) 
```

也不起作用，因为您试图在`in`恰好代表元素列表的字符串上使用该函数。

您需要将字符串转换为数组，然后在 select 语句中使用它：

MSDN 有一个[示例函数用于执行此操作](http://archive.msdn.microsoft.com/SQLExamples/Wiki/View.aspx?title=StringArrayInput)：

```
CREATE FUNCTION dbo.Split 
   (  @Delimiter varchar(5), 
      @List      varchar(8000)
   ) 
   RETURNS @TableOfValues table 
      (  RowID   smallint IDENTITY(1,1), 
         [Value] varchar(50) 
      ) 
AS 
   BEGIN
      DECLARE @LenString int 

      WHILE len( @List ) > 0 
         BEGIN 
            SELECT @LenString = 
               (CASE charindex( @Delimiter, @List ) 
                   WHEN 0 THEN len( @List ) 
                   ELSE ( charindex( @Delimiter, @List ) -1 )
                END
               ) 

            INSERT INTO @TableOfValues 
               SELECT substring( @List, 1, @LenString )

            SELECT @List = 
               (CASE ( len( @List ) - @LenString ) 
                   WHEN 0 THEN '' 
                   ELSE right( @List, len( @List ) - @LenString - 1 ) 
                END
               ) 
         END
      RETURN 
    END 
```

然后像这样使用它：

```
select * from tbl where userName in (SELECT * FROM dbo.Split( ',', @users )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:39:12.830

众所周知，“in”查询很难参数化。首先，不要将参数放在引号中 - 这样它就不是参数：它是一个字符文字。但是：您也不能*只*使用单个参数 - 因为这将搜索一个仅包含引号和逗号的单个值 - 而不是您想要的。

这里有多种方法；例如，在服务器上使用“拆分”功能并在内部加入该结果。但是，一些工具也有帮助。例如，“dapper”允许语法调整：

```
var names = new List<string> { "A", "B", "C" };

var users = connection.Query<User>(
    "select * from users where name in @names",
    new { names }).ToList(); 
```

该库使用多个参数将其扩展为正确的“输入”查询。

# prolog - 返回列表中的语句

> ID：15053121
> 
> 赞同：0
> 
> 时间：2013-02-24T15:13:01.493
> 
> 标签：prolog

如果我有以下关系：

```
? friend(tom, X).
X = jim ;
X = tom ;
X = joe ;
X = bob ;
false. 
```

我怎样才能把输出变成：

```
X = [jim, tom, joe, bob]. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:19:12.063

我想到了; 我已经用作`bagof`解决方案谓词的一部分，如下所示：

```
bagof(X, friend(tom, X), Xs). 
```

# php - url 的正则表达式不起作用

> ID：15053123
> 
> 赞同：0
> 
> 时间：2013-02-24T15:13:13.850
> 
> 标签：php

```
$uri="https://www.facebook.com/video/embed?video_id=533502940004820";
$services['facebook']['regexp'] = array('/^https?:\/\/(www\.)?facebook\.com\/video\/embed?video_id=([0-9]*)/', 2);
$services['facebook']['img'] = "https://graph.facebook.com/%s/picture";
$i=1;

    $support=0;
    foreach($services as $service => $s) {
        if(preg_match($s['regexp'][0], $uri, $matches, PREG_OFFSET_CAPTURE) > 0) {
            $support = $i;
        }
        $i++;
    }
    if($support==0){
        echo "This website doesn't support now!";
    } 
```

这是我的代码，但是当我将它与**[https://www.facebook.com/video/embed?video_id=533502940004820](https://www.facebook.com/video/embed?video_id=533502940004820)**匹配时，它不起作用

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:18:44.730

`embed**?**video`代表“一个或零个'd'”。你必须逃避它。

# java - 相当于Java中C++的std::bind？

> ID：15053127
> 
> 赞同：7
> 
> 时间：2013-02-24T15:13:21.933
> 
> 标签：java, c++, functional-programming, bind

有没有办法像在 C++ 中使用 std::bind 一样将参数参数绑定到 Java 中的函数指针？类似这样的 Java 等价物是什么？

```
void PrintStringInt(const char * s, int n)
{
    std::cout << s << ", " << n << std::endl;
}

void PrintStringString(const char * s, const char * s2)
{
    std::cout << s << ", " << s2 << std::endl;
}

int main()
{
    std::vector<std::function<void(const char *)>> funcs;
    funcs.push_back(std::bind(&PrintStringInt, std::placeholders::_1, 4));
    funcs.push_back(std::bind(&PrintStringString, std::placeholders::_1, "bar"));
    for(auto i = funcs.begin(); i != funcs.end(); ++i){
        (*i)("foo");
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:28:11.727

恐怕不是，但这段代码是一种模仿 C++ 模板的方法（很差）：

```
abstract class Printer<T> {
   final T value;
   Printer( T v ) {
      value = v;
   }
   public abstract void print( String s );
}

class PrintStringInt extends Printer< Integer> {
   PrintStringInt( int v ) {
      super( v );
   }
   @Override public void print( String s ) {
      System.out.printf( "%s, %d\n", s, value );
   }
}

class PrintStringString extends Printer< String > {
   PrintStringString( String v ) {
      super( v );
   }
   @Override public void print( String s ) {
      System.out.printf( "%s, %s\n", s, value );
   }
}

public class BindTest {
   public static void main( String[] args ) {
      Printer<?>[] funcs = {
         new PrintStringInt( 4 ),
         new PrintStringString( "bar")
      };
      for( Printer<?> p : funcs ) {
          p.print( "foo" );
      }
   }
} 
```

输出：

```
foo, 4
foo, bar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T15:33:48.710

这与我认为您可以逐行翻译一样接近，`bind`不会将 1:1 映射到任何 Java 结构；

```
static void PrintStringInt(String s, int n)
{
    System.out.println(s + ", " + n);
}

static void PrintStringString(String s, String s2)
{
    System.out.println(s + ", " + s2);
}

interface MyCall {
    void fn(String value);
}

public static void main(String[] argv)
{
    Vector<MyCall> funcs = new Vector<MyCall>();
    funcs.add(new MyCall() { 
      @Override public void fn(String value) {PrintStringInt(value, 4); }});
    funcs.add(new MyCall() { 
      @Override public void fn(String value) {PrintStringString(value, "bar"); }});
    for(MyCall i : funcs){
        i.fn("foo");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T17:57:14.770

从 Java7 开始，人们也可以对方法句柄做同样的事情，`java.lang.invoke.MethodHandle`有关详细信息，请参阅类的 API 文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-18T20:47:42.987

使用 MethodHandle，这里是一个例子

```
public class HW
{
    int sum;

  public HW(int a, int b)
  {
    super();
    this.sum = a+b;
  }

  public void hello1(double c)
  {
    double newnumber = sum+c;
   System.out.println("hello from hello1, new number= " + newnumber);
  }

  public void hello2()
  {        
   System.out.println("hello from hello2, sum=" + sum);
  }
}

import java.lang.invoke.MethodHandle;
import java.lang.invoke.MethodHandles;
import java.lang.invoke.MethodType;

public class TestMethodHandle
{

/**
 * @param args
 */
  public static void main(String[] args)
  {

    HW hw = new HW(10, 15);
    MethodHandles.Lookup lookup = MethodHandles.lookup();
    MethodHandle mh;
    try
    {
        mh = lookup.findVirtual(HW.class, "hello2",
                                             MethodType.methodType(void.class));
        mh.invoke(hw);

        mh = lookup.findVirtual(HW.class, "hello1",
                MethodType.methodType(void.class, double.class));
        mh.invoke(hw, 20);

    } catch (NoSuchMethodException e)
    {
        e.printStackTrace();
    } catch (IllegalAccessException e)
    {
        e.printStackTrace();
    } catch (Throwable e)
    {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T15:17:59.020

您可以创建一个具有所需签名的函数的匿名类，它将调用转发到原始函数。

假设您有以下功能：

```
public class StringPrinter {
    public void printStringInt( String s, int n ) {
       System.out.println( s + ", " + n );
    }

    public void printStringString( String s, String s2 ) {
       System.out.println( s + ", " + s2 );
    }
} 
```

然后，您可以创建有效地将参数绑定到这些函数的匿名类。

```
public static void main( String[] args ) {
     public interface Print1String {
         public void printString( String s );
     }

     List<Print1String> funcs = new ArrayList<Print1String);
     funcs.add( new Print1String() {
        public void printString( String s ) {
            new StringPrinter( ).printStringInt( s, 42 ); 
        }});
     funcs.add( new Print1String() {
        public void printString( String s ) {
            new StringPrinter( ).printStringString( s, "bar" ); 
        }});

     for ( Print1String func : funcs ) {
         func.print1String("foo");
     }
} 
```

# textures - LibGDX 纹理到 ByteBuffer

> ID：15053129
> 
> 赞同：4
> 
> 时间：2013-02-24T15:13:31.010
> 
> 标签：textures, libgdx, bytebuffer, pixmap

我正在尝试将纹理转换为 LibGDX 中的像素图，以便我可以将所有像素数据放入 ByteBuffer 进行一些实验，据我所知，我应该能够通过执行以下操作来做到这一点：

```
Pixmap pixmap = textureName.getTexture().getTextureData().consumePixmap();
ByteBuffer data = pixmap.getPixels(); 
```

这似乎返回了一个适当大小的像素图，并且 ByteBuffer 似乎创建得很好，但它完全用零填充，从而产生一个空白的透明图像。这个以及其他一些测试让我相信 Pixmap 本身只是被创建为像这样的完全透明的图像，但我找不到可能导致这种情况发生的原因。是否有某种限制阻止它工作，或者我只是错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T01:14:01.747

我相信 API ( `consumePixmap()`) 是为了让类在将 Pixmap 推送到 GPU 时`Texture`从中提取数据。 Libgdx对象表示 GPU 上的纹理数据，因此将底层数据传输到 CPU 通常并非易事（它是渲染 API 的“错误”方向）。请参阅[http://code.google.com/p/libgdx/wiki/GraphicsPixmap](http://code.google.com/p/libgdx/wiki/GraphicsPixmap)`Pixmap`
`Texture`

此外，关于它的文档`consumePixmap()`说它[需要一个`prepare()`电话](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/TextureData.html#consumePixmap%28%29)才能工作。

要从纹理中提取像素信息，您需要构建一个[`FrameBuffer`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/FrameBuffer.html)对象，向其渲染纹理，然后提取像素（请参阅 参考资料[`ScreenUtils`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/utils/ScreenUtils.html)）。

目前尚不清楚您要完成什么，但是朝另一个方向（字节数组 -> `Pixmap`-> `Texture`）然后修改字节数组并重新进行转换可能会起作用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-19T20:11:40.447

当我想创建在我的关卡编辑器中制作的关卡的 PNG 时，我遇到了类似的问题。该级别由创建者放置的图块组成，然后将整个级别保存为 .png 以在游戏中使用。

以PT解释的方式解决了它。我希望它对遇到同样问题的其他人有用。

在您的应用程序配置中：cfg.useGL20 = true; 需要 GL20 才能构建 FrameBuffer

```
 public boolean exportLevel(){   

            //width and height in pixels
            int width = (int)lba.getPrefWidth();
            int height = (int)lba.getPrefHeight();

            //Create a SpriteBatch to handle the drawing.
            SpriteBatch sb = new SpriteBatch();

            //Set the projection matrix for the SpriteBatch.
            Matrix4 projectionMatrix = new Matrix4();

            //because Pixmap has its origin on the topleft and everything else in LibGDX has the origin left bottom
            //we flip the projection matrix on y and move it -height. So it will end up side up in the .png
            projectionMatrix.setToOrtho2D(0, -height, width, height).scale(1,-1,1); 

            //Set the projection matrix on the SpriteBatch
            sb.setProjectionMatrix(projectionMatrix);

            //Create a frame buffer.
            FrameBuffer fb = new FrameBuffer(Pixmap.Format.RGBA8888, width, height, false);

            //Call begin(). So all next drawing will go to the new FrameBuffer.
            fb.begin();

            //Set up the SpriteBatch for drawing.
            sb.begin();

            //Draw all the tiles.
            BuildTileActor[][] btada = lba.getTiles();
            for(BuildTileActor[] btaa: btada){
                for(BuildTileActor bta: btaa){
                    bta.drawTileOnly(sb);
                }
            }

            //End drawing on the SpriteBatch. This will flush() any sprites remaining to be drawn as well.
            sb.end();

            //Then retrieve the Pixmap from the buffer.
            Pixmap pm = ScreenUtils.getFrameBufferPixmap(0, 0, width, height);

            //Close the FrameBuffer. Rendering will resume to the normal buffer.
            fb.end();

            //Save the pixmap as png to the disk.
            FileHandle levelTexture = Gdx.files.local("levelTexture.png");
            PixmapIO.writePNG(levelTexture, pm);

            //Dispose of the resources.
            fb.dispose();
            sb.dispose(); 
```

*注意：我是 LibGDX 的新手，所以这可能不是最好的方法。*

# php - html 总是从链接中获取新页面

> ID：15053132
> 
> 赞同：0
> 
> 时间：2013-02-24T15:13:41.397
> 
> 标签：php, javascript, cookies, page-refresh

我在一个页面上设置了一个 cookie，并试图在下一页上取消设置，我通过链接到达。但是，只有当我刷新第二页 F5 时，cookie 才会被取消设置。

为了进行测试，我在第一页上有链接和一些 cookie 设置，如下所示：

```
<?php
include("connect-db.php");
$id = "newuser";
setcookie("user_id", $id, time() + 31536000); 

if (isset($_COOKIE["user_id"]))
  echo "Welcome " . $_COOKIE["user_id"] . "!<br>";
else
  echo "Welcome guest!<br>";
?>
<br>
<a href='next.php'>Next</a> 
```

在下一页我有这个 php 代码：

```
<?php
header("Cache-Control: no-cache, must-revalidate, max-age=0"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
header('Pragma: no-cache');

setcookie("user_id", "", time()-(60*60*24), "/");
echo "<br /> Welcome " . $_COOKIE["user_id"] . "!<br>";
?> 
```

如何确保未在第二页上设置 cookie，或者重新获取该页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:20:47.553

这取决于您要执行的操作。如果您依赖于*客户端*上的 cookie ，那么您可能需要使用客户端 (JavaScript) 取消设置它。如果依赖关系在服务器上，那么很难知道您的问题是什么，因为您可以在“取消设置”它之后编写代码的第二部分以不依赖于 cookie。

我不完全推荐这样做，因为它可能是不必要的额外页面加载，但您也可以强制发送标头。

```
if (isset($_COOKIE['user_id'])) {
    setcookie(/* your params */);
    header('Refresh: ' . $_SERVER['REQUEST_URI']);
    exit;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T15:22:04.043

您可以尝试在第二页中使用以下代码

setcookie("user_id", "");

我希望你能解决你的问题。

# scala - 创建自定义地图扩展时，具体地图#empty 会导致设计异味

> ID：15053137
> 
> 赞同：3
> 
> 时间：2013-02-24T15:15:09.500
> 
> 标签：scala, collections, scala-collections

我正在尝试编写一个`ForwardingMutableMap`特性，一个 la [Guava's `ForwardingMap`for Java](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ForwardingMap.html)。

这是我的拳头尝试的样子：

```
trait ForwardingMutableMap[K, V, +Self <: mutable.MapLike[K, V, Self] with mutable.Map[K, V]] 
    extends mutable.Map[K, V] 
    with mutable.MapLike[K, V, Self] { this: Self =>

  protected val delegate: mutable.Map[K, V]

  def get(key: K): Option[V] = delegate.get(key)

  def iterator: Iterator[(K, V)] = delegate.iterator

  def -=(key: K): this.type = {
    delegate -= key
    this
  }

  def +=(kv: (K, V)): this.type = {
    delegate += kv
    this
  }
} 
```

这会导致错误：

```
error: overriding method empty in trait MapLike of type => Self;
 method empty in trait Map of type => scala.collection.mutable.Map[K,V] has incompatible type
       trait ForwardingMutableMap[K, V, +Self <: mutable.MapLike[K, V, Self] with mutable.Map[K, V]] 
```

第二次尝试：

```
trait ForwardingMutableMap[K, V, +Self <: mutable.MapLike[K, V, Self] with mutable.Map[K, V]] 
    extends mutable.Map[K, V] 
    with mutable.MapLike[K, V, Self] { this: Self =>

  def empty: Self

  protected val delegate: mutable.Map[K, V]

  def get(key: K): Option[V] = delegate.get(key)

  def iterator: Iterator[(K, V)] = delegate.iterator

  def -=(key: K): this.type = {
    delegate -= key
    this
  }

  def +=(kv: (K, V)): this.type = {
    delegate += kv
    this
  }
} 
```

错误：

```
error: overriding method empty in trait ForwardingMutableMap of type => ForwardingMutableMap.this.Self;
 method empty in trait Map of type => scala.collection.mutable.Map[K,V] has incompatible type;
 (Note that method empty in trait ForwardingMutableMap of type => ForwardingMutableMap.this.Self is abstract,
  and is therefore overridden by concrete method empty in trait Map of type => scala.collection.mutable.Map[K,V])
       trait ForwardingMutableMap[K, V, +Self <: mutable.MapLike[K, V, Self] with mutable.Map[K, V]] 
```

第三次尝试：

```
trait ForwardingMutableMap[K, V, +Self <: mutable.MapLike[K, V, Self] with mutable.Map[K, V]] 
    extends mutable.Map[K, V] 
    with mutable.MapLike[K, V, Self] { this: Self =>

  override def empty: Self = empty2

  def empty2: Self

  protected val delegate: mutable.Map[K, V]

  def get(key: K): Option[V] = delegate.get(key)

  def iterator: Iterator[(K, V)] = delegate.iterator

  def -=(key: K): this.type = {
    delegate -= key
    this
  }

  def +=(kv: (K, V)): this.type = {
    delegate += kv
    this
  }
} 
```

类型混合`ForwardingMutableMap`必须实现`empty2`而不是`empty`.

这行得通，但有一股黑客的味道。我能做得更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:12:40.470

I think what you are looking for is already implemented in Scala standard library, which named `MapProxy`. Here is the source code :[src](https://github.com/scala/scala/tree/e67a039ec2/src/library/scala/collection/mutable/MapProxy.scala#L1)

```
scala> new mutable.MapProxy[Int, Int]{ override val self = HashMap.empty[Int, Int] }
res1: scala.collection.mutable.MapProxy[Int,Int]{val self: scala.collection.mutable.HashMap[Int,Int]} = Map()

scala> res1 += ((1,2))
res2: <refinement>.type = Map(1 -> 2)

scala> res1
res3: scala.collection.mutable.MapProxy[Int,Int]{val self: scala.collection.mutable.HashMap[Int,Int]} = Map(1 -> 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:44:00.137

这样的事情怎么样？

```
trait ForwardingMutableMap[K, V]
  extends Map[K, V] with MapLike[K, V, ForwardingMutableMap[K, V]] {

  override def empty = ForwardingMutableMap.empty

  protected val delegate: Map[K, V]

  def get(key: K): Option[V] = delegate.get(key)

  def iterator: Iterator[(K, V)] = delegate.iterator

  def -=(key: K): this.type = {
    delegate -= key
    this
  }

  def +=(kv: (K, V)): this.type = {
    delegate += kv
    this
  }
}

object ForwardingMutableMap {
  def empty[K, V]:ForwardingMutableMap[K, V] = new ForwardingMutableMap[K, V] {
    protected val delegate = Map.empty[K, V]
  }
} 
```

* * *

## 编辑

如果您不希望它是具体的，但类似于`MapLike`（可以有多个具体实现）的特征，您可以像这样定义它：

```
trait ForwardingMutableMap[K, V, Self <: ForwardingMutableMap[K, V, Self] with Map[K, V]]
  extends MapLike[K, V, Self] { 

  protected val delegate: Map[K, V]

  // ...
} 
```

然后像这样使用它

```
class MyMap[K, V](val delegate:Map[K, V]) extends Map[K, V] with ForwardingMutableMap[K, V, MyMap[K, V]] {
  override def empty = MyMap.empty
}

object MyMap {
  def empty[K, V] = new MyMap[K, V](Map.empty) 
} 
```

# ruby-on-rails - 在种子.rb 中使用回形针

> ID：15053138
> 
> 赞同：16
> 
> 时间：2013-02-24T15:15:16.473
> 
> 标签：ruby-on-rails, ruby, paperclip, seed

假设我的`seeds.rb`文件中有以下条目：

```
Image.create(:id => 52, :asset_file_name => "somefile.jpg", :asset_file_size => 101668, :asset_content_type => "image/jpeg", :product_id => 52) 
```

如果我播种它，它会尝试处理指定的图像，我会收到此错误：

```
No such file or directory - {file path} etc... 
```

我的图像已备份，因此我真的不需要创建它们；但我需要记录。我无法在我的模型中评论回形针指令；然后它起作用了；但我想可能还有另一种解决方案。

为了完成它，是否有另一种模式可以遵循？还是告诉回形针不要处理图像的转机？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-25T03:27:24.620

与其直接设置资产列，不如尝试利用回形针并将其设置为 ruby`File`​​ 对象。

```
Image.create({
  :id => 52, 
  :asset => File.new(Rails.root.join('path', 'to', 'somefile.jpg')),
  :product_id => 52
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-30T01:57:58.650

这里的另一个答案当然适用于大多数情况，但在某些情况下，提供 a`UploadedFile`而不是 a可能会更好`File`。这更接近地模仿了 Paperclip 从表单接收的内容并提供了一些额外的功能。

```
image_path = "#{Rails.root}/path/to/image_file.extension"
image_file = File.new(image_path)

Image.create(
  :id => 52,
  :product_id => 52,
  :asset => ActionDispatch::Http::UploadedFile.new(
    :filename => File.basename(image_file),
    :tempfile => image_file,
    # detect the image's mime type with MIME if you can't provide it yourself.
    :type => MIME::Types.type_for(image_path).first.content_type
  )
) 
```

虽然此代码稍微复杂一些，但它的好处是可以正确解释带有 .docx、.pptx 或 .xlsx 扩展名的 Microsoft Office 文档，如果使用 File 对象附加这些文件，它们将作为 zip 文件上传。

如果您的模型允许 Microsoft Office 文档但不允许 zip 文件，这一点尤其重要，因为否则验证将失败并且您的对象将不会被创建。它不会影响 OP 的情况，但会影响我的情况，因此我希望保留我的解决方案以防其他人需要它。

# c# - 将数字分成 3 位数字组

> ID：15053155
> 
> 赞同：2
> 
> 时间：2013-02-24T15:17:50.427
> 
> 标签：c#, parsing

我想创建一个方法，该方法采用类型变量`int`or`long`并返回一个`int`s 或`long`s 数组，每个数组项是一组 3 位数字。例如：

```
int[] i = splitNumber(100000);
// Outputs { 100, 000 }

int[] j = splitNumber(12345);
// Outputs { 12, 345 }

int[] k = splitNumber(12345678);
// Outputs { 12, 345, 678 }
// Et cetera 
```

我知道如何使用模运算符获得数字的最后*n*位，但我不知道如何获得*前*n 位，这是我能想到的唯一方法。请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:25:32.410

不转换为字符串：

```
int[] splitNumber(int value)
{ 
    Stack<int> q = new Stack<int>();
    do 
    {
        q.Push(value%1000);
        value /= 1000;
    } while (value>0);
    return q.ToArray();
} 
```

这是简单的整数运算；首先取模以获得最右边的小数，然后除以丢弃您已经添加的小数。我使用堆栈来避免反转列表。

编辑：评论中建议使用日志来获取长度。它可以使代码稍微**短**一些，但在我看来它并不是**更好**的代码，因为阅读它时意图不太清楚。此外，由于额外的数学函数调用，它可能会降低性能。无论如何; 这里是：

```
int[] splitNumber(int value)
{
    int length = (int) (1 + Math.Log(value, 1000));
    var result = from n in Enumerable.Range(1,length)
                 select ((int)(value / Math.Pow(1000,length-n))) % 1000;
    return result.ToArray();           
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T15:20:07.133

尝试先将其转换为字符串并进行解析，然后再次将其转换回数字

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-24T15:27:20.380

通过转换为字符串然后转换为 int 数组

```
int number = 1000000;
string parts = number.ToString("N0", new NumberFormatInfo()
                                            {
                                                NumberGroupSizes = new[] { 3 },
                                                NumberGroupSeparator = "."
                                            }); 
```

通过使用数学，

```
public static int[] splitNumberIntoGroupOfDigits(int number)
{
    var numberOfDigits = Math.Floor(Math.Log10(number) + 1); // compute number of digits

    var intArray = new int[Convert.ToInt32(numberOfDigits / 3)]; // we know the size of array
    var lastIndex = intArray.Length -1; // start filling array from the end

    while (number != 0)
    {
        var lastSet = number % 1000;
        number = number / 1000;

        if (lastSet == 0)
        {
            intArray[lastIndex] = 0;  // set of zeros
            --lastIndex;                    
        }
        else if (number == 0)
        {
            intArray[lastIndex] = lastSet; // this could be your last set
            --lastIndex;                    
        }
        else
        {
            intArray[lastIndex] = lastSet;
            --lastIndex;                    
        }
    }

    return intArray;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T15:24:11.157

转换为字符串

获取长度

如果长度模数 3 == 0

每 3 次将其字符串子串成整数

else if 查找余数，例如剩下的一两个

字符串前面的子字符串余数

然后以 3 为其余的子串

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T15:27:04.460

您可以先找出数字有多大，然后使用除法获取第一个数字，并使用模数保留其余数字：

```
int number = 12345678;

int len = 1;
int div = 1;
while (number >= div * 1000) {
  len++;
  div *= 1000;
}

int[] result = new int[len];
for (int i = 0; i < result.Length; i++) {
  result[i] = number / div;
  number %= div;
  div /= 1000;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-24T15:28:55.797

您可以将其与`System.Linq`.NET 3.5 及更高版本的命名空间一起使用：

```
int[] splitNumber(long value)
{
    LinkedList<int> results = new LinkedList<int>();

    do
    {
        int current = (int) (value % 1000);

        results.AddFirst(current);
        value /= 1000;
    } while (value > 0);

    return results.ToArray();// Extension method
} 
```

我过去常常`LinkedList<int>`避免[`Reverse`](http://msdn.microsoft.com/library/bb358497.aspx)在返回之前列出清单。您也可以[`Stack<int>`](http://msdn.microsoft.com/library/3278tedw.aspx)用于相同的目的，只需要 .NET 2.0：

```
int[] splitNumber(long value)
{
    Stack<int> results = new Stack<int>();

    do
    {
        int current = (int) (value % 1000);

        results.Push(current);
        value /= 1000;
    } while (value > 0);

    return results.ToArray();
} 
```

# javascript - FancyZoom 只缩放一次

> ID：15053159
> 
> 赞同：0
> 
> 时间：2013-02-24T15:18:12.827
> 
> 标签：javascript, prototypejs, zooming, scriptaculous

我在网上的某个地方找到了这段代码。它工作正常，但只有一次。

另一次我触发 eventListener 它不会缩放。尽管出现了 Zoombox，但那里没有 swf。

这是HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<script type="text/javascript" src="../scripts/prototype.js"></script> 
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/scriptaculous/1.8.1/scriptaculous.js"></script> 
<script type="text/javascript" src="../scripts/fancyzoom.js"></script>

<script type="text/javascript">

document.onload = new FancyZoom('small');

</script>

</head>

<body>

<div><a href="#svo1" id="small"></a></div>

<div id="svo1">

<object id="FlashID" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="680" height="600">
<param name="movie" value="../flash/mega-svo.swf" /><!--value="../images/possible  pics/flash/svo4.swf"-->
<param name="quality" value="high" />
<param name="wmode" value="opaque" />
<param name="swfversion" value="11.0.0.0" />
<!-- This param tag prompts users with Flash Player 6.0 r65 and higher to download the latest version of Flash Player. Delete it if you don’t want users to see the prompt. -->
<param name="expressinstall" value="../../external_files/expressInstall.swf" />
<!-- Next object tag is for non-IE browsers. So hide it from IE using IECC. -->
<!--[if !IE]>-->
<object type="application/x-shockwave-flash" data="../flash/mega-svo.swf" width="680" height="600">
  <!--<![endif]-->
  <param name="quality" value="high" />
  <param name="wmode" value="opaque" />
  <param name="swfversion" value="11.0.0.0" />
  <param name="expressinstall" value="../../external_files/expressInstall.swf" />
  <!-- The browser displays the following alternative content for users with Flash Player 6.0 and older. -->
  <div>
    <h4>Content on this page requires a newer version of Adobe Flash Player.</h4>
    <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" width="112" height="33" /></a></p>
  </div>
  <!--[if !IE]>-->
</object>
<!--<![endif]-->
</object>

</div>

</body>

</html> 
```

这是我下载的fancyzoom.js

```
Object.extend(String.prototype, {
// if a string doesn't end with str it appends it
ensureEndsWith: function(str) {
return this.endsWith(str) ? this : this + str;
},

// makes sure that string ends with px (for setting widths and heights)
px: function() {
return this.ensureEndsWith('px');
}
});

Object.extend(Number.prototype, {
// makes sure that number ends with px (for setting widths and heights)
px: function() {
return this.toString().px();
}
});

var Window = {
// returns correct dimensions for window, had issues with prototype's sometimes. this was ganked from apple.
size: function() {
    var width  = window.innerWidth || (window.document.documentElement.clientWidth || window.document.body.clientWidth);
    var height = window.innerHeight || (window.document.documentElement.clientHeight || window.document.body.clientHeight);
    var x      = window.pageXOffset || (window.document.documentElement.scrollLeft || window.document.body.scrollLeft);
    var y      = window.pageYOffset || (window.document.documentElement.scrollTop || window.document.body.scrollTop);
    return {'width':width, 'height':height, 'x':x, 'y':y}
}
}

var FancyZoomBox = {
directory : '../images/fancyzoom',
zooming   : false,
setup     : false,

init: function(directory) {
if (FancyZoomBox.setup) return;
FancyZoomBox.setup = true;

var ie = navigator.userAgent.match(/MSIE\s(\d)+/);
if (ie) {
  var version = parseInt(ie[1]);
  Prototype.Browser['IE' + version.toString()] = true;
  Prototype.Browser.ltIE7 = (version < 7) ? true : false;
}

var html = '<div id="zoom" style="display:none;"> \
              <table id="zoom_table" style="border-collapse:collapse; width:100%; height:100%;"> \
                <tbody> \
                  <tr> \
                    <td class="tl" style="background:url(' + FancyZoomBox.directory + '/tl.png) 0 0 no-repeat; width:20px; height:20px; overflow:hidden;" /> \
                    <td class="tm" style="background:url(' + FancyZoomBox.directory + '/tm.png) 0 0 repeat-x; height:20px; overflow:hidden;" /> \
                    <td class="tr" style="background:url(' + FancyZoomBox.directory + '/tr.png) 100% 0 no-repeat; width:20px; height:20px; overflow:hidden;" /> \
                  </tr> \
                  <tr> \
                    <td class="ml" style="background:url(' + FancyZoomBox.directory + '/ml.png) 0 0 repeat-y; width:20px; overflow:hidden;" /> \
                    <td class="mm" style="background:#fff; vertical-align:top; padding:10px;"> \
                      <div id="zoom_content"> \
                      </div> \
                    </td> \
                    <td class="mr" style="background:url(' + FancyZoomBox.directory + '/mr.png) 100% 0 repeat-y;  width:20px; overflow:hidden;" /> \
                  </tr> \
                  <tr> \
                    <td class="bl" style="background:url(' + FancyZoomBox.directory + '/bl.png) 0 100% no-repeat; width:20px; height:20px; overflow:hidden;" /> \
                    <td class="bm" style="background:url(' + FancyZoomBox.directory + '/bm.png) 0 100% repeat-x; height:20px; overflow:hidden;" /> \
                    <td class="br" style="background:url(' + FancyZoomBox.directory + '/br.png) 100% 100% no-repeat; width:20px; height:20px; overflow:hidden;" /> \
                  </tr> \
                </tbody> \
              </table> \
              <a href="#" title="Close" id="zoom_close" style="position:absolute; top:0; left:0;"> \
                <img src="' + FancyZoomBox.directory + '/closebox.png" alt="Close" style="border:none; margin:0; padding:0;" /> \
              </a> \
            </div>';

var body  = $$('body').first();
body.insert(html);

FancyZoomBox.zoom = $('zoom');
FancyZoomBox.zoom_table = $('zoom_table');
FancyZoomBox.zoom_close = $('zoom_close');
FancyZoomBox.zoom_content = $('zoom_content');
FancyZoomBox.zoom_close.observe('click', FancyZoomBox.hide);
FancyZoomBox.middle_row = $A([$$('td.ml'), $$('td.mm'), $$('td.mr')]).flatten();
FancyZoomBox.cells = FancyZoomBox.zoom_table.select('td');

// hide zoom if click fired is not inside zoom
$$('html').first().observe('click', function(e) {
  var click_in_zoom = e.findElement('#zoom'),
      zoom_display  = FancyZoomBox.zoom.getStyle('display');
  if (zoom_display == 'block' && !click_in_zoom) {
    FancyZoomBox.hide(e);
  }
});

// esc to close zoom box
$(document).observe('keyup', function(e) {
  var zoom_display = FancyZoomBox.zoom.getStyle('display');
  if (e.keyCode == Event.KEY_ESC && zoom_display == 'block') {
    FancyZoomBox.hide(e);
  }
});

// just use gifs as ie6 and below suck
if (Prototype.Browser.ltIE7) {
  FancyZoomBox.switchBackgroundImagesTo('gif');
}    
},

show: function(e) {
e.stop();
    if (FancyZoomBox.zooming) return;
    FancyZoomBox.zooming   = true;
    var element            = e.findElement('a');
    var related_div        = element.content_div;
    var width              = (element.zoom_width || related_div.getWidth()) + 60;
    var height             = (element.zoom_height || related_div.getHeight()) + 60;
    var d                  = Window.size();
    var yOffset            = document.viewport.getScrollOffsets()[1];
    // ensure that newTop is at least 0 so it doesn't hide close button
    var newTop             = Math.max((d.height/2) - (height/2) + yOffset, 0);
    var newLeft            = (d.width/2) - (width/2);
    FancyZoomBox.curTop    = e.pointerY();
    FancyZoomBox.curLeft   = e.pointerX();
    FancyZoomBox.moveX     = -(FancyZoomBox.curLeft - newLeft);
    FancyZoomBox.moveY     = -(FancyZoomBox.curTop - newTop);
FancyZoomBox.zoom.hide().setStyle({
        position    : 'absolute',
        top             : FancyZoomBox.curTop.px(),
        left            : FancyZoomBox.curLeft.px()
    });

    new Effect.Parallel([
        new Effect.Appear(FancyZoomBox.zoom, {sync:true}),
        new Effect.Move(FancyZoomBox.zoom, {x: FancyZoomBox.moveX, y: FancyZoomBox.moveY, sync: true}),
        new Effect.Morph(FancyZoomBox.zoom, {
          style: {
            width: width.px(),
            height: height.px()
          },
            sync: true,
            beforeStart: function(effect) {
              // middle row height must be set for IE otherwise it tries to be "logical" with the height
          if (Prototype.Browser.IE) {
            FancyZoomBox.middle_row.invoke('setStyle', {height:(height-40).px()});
          }
                FancyZoomBox.fixBackgroundsForIE();
            },
            afterFinish: function(effect) {
              var related_div_childElements = related_div.childElements();
                for(var i=0; i<related_div_childElements.length; i++)
                    Element.insert(FancyZoomBox.zoom_content,related_div_childElements[i]);
                FancyZoomBox.unfixBackgroundsForIE();
                FancyZoomBox.zoom_close.show();
                FancyZoomBox.zooming = false;
            }
        })
    ], { duration: 0.5 });
},

hide: function(e) {
e.stop();
    if (FancyZoomBox.zooming) return;
    FancyZoomBox.zooming = true;        
    new Effect.Parallel([
        new Effect.Move(FancyZoomBox.zoom, {x: FancyZoomBox.moveX*-1, y: FancyZoomBox.moveY*-1, sync: true}),
        new Effect.Morph(FancyZoomBox.zoom, {
          style: {
            width: '1'.px(),
            height: '1'.px()
          },
            sync                    : true,
            beforeStart: function(effect) {
                FancyZoomBox.fixBackgroundsForIE();
                FancyZoomBox.zoom_content.innerHTML = '';
                FancyZoomBox.zoom_close.hide();
            },
            afterFinish: function(effect) {
                FancyZoomBox.unfixBackgroundsForIE();
                FancyZoomBox.zooming = false;
            }
        }),
        new Effect.Fade(FancyZoomBox.zoom, {sync:true})
    ], { duration: 0.5 });
},

// switches the backgrounds of the cells and the close image to png's or gif's
// fixes ie's issues with fading and appearing transparent png's with 
// no background and ie6's craptacular handling of transparent png's
switchBackgroundImagesTo: function(to) {
FancyZoomBox.cells.each(function(td) {
  var bg = td.getStyle('background-image').gsub(/\.(png|gif|none)\)$/, '.' + to + ')');
  td.setStyle('background-image: ' + bg);
});
var close_img = FancyZoomBox.zoom_close.firstDescendant();
var new_img = close_img.readAttribute('src').gsub(/\.(png|gif|none)$/, '.' + to);
close_img.writeAttribute('src', new_img);
},

// prevents the thick black border that happens when appearing or fading png in IE
fixBackgroundsForIE: function() {
if (Prototype.Browser.IE7) { FancyZoomBox.switchBackgroundImagesTo('gif'); }
},

// swaps back to png's for prettier shadows
unfixBackgroundsForIE: function() {
if (Prototype.Browser.IE7) { FancyZoomBox.switchBackgroundImagesTo('png'); }
}
}

var FancyZoom = Class.create({
initialize: function(element) {
  this.options = arguments.length > 1 ? arguments[1] : {};
  FancyZoomBox.init();
  this.element = $(element);
    if (this.element) {
      this.element.content_div = $(this.element.readAttribute('href').gsub(/^#/, ''));
    this.element.content_div.hide();
    this.element.zoom_width = this.options.width;
    this.element.zoom_height = this.options.height;
  this.element.observe('click', FancyZoomBox.show);
    }
}
}); 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:27:23.077

当`FancyZoomBox.hide(e);`被调用`FancyZoomBox.zoom_content.innerHTML = '';`删除一个 swf 文件时，它会出现。

所以我把`FancyZoomBox.zoom_content.hide();`而不是`FancyZoomBox.zoom_content.innerHTML = '';`.

我还添加`FancyZoomBox.zoom_content.show()`了一个`FancyZoomBox.show(e);`方法。

现在一切正常。

这是一个更正的代码。

```
Object.extend(String.prototype, {
// if a string doesn't end with str it appends it
ensureEndsWith: function(str) {
return this.endsWith(str) ? this : this + str;
},

// makes sure that string ends with px (for setting widths and heights)
px: function() {
return this.ensureEndsWith('px');
}
});

Object.extend(Number.prototype, {
// makes sure that number ends with px (for setting widths and heights)
px: function() {
return this.toString().px();
}
});

var Window = {
// returns correct dimensions for window, had issues with prototype's sometimes. this was ganked from apple.
size: function() {
    var width  = window.innerWidth || (window.document.documentElement.clientWidth || window.document.body.clientWidth);
    var height = window.innerHeight || (window.document.documentElement.clientHeight || window.document.body.clientHeight);
    var x      = window.pageXOffset || (window.document.documentElement.scrollLeft || window.document.body.scrollLeft);
    var y      = window.pageYOffset || (window.document.documentElement.scrollTop || window.document.body.scrollTop);
    return {'width':width, 'height':height, 'x':x, 'y':y}
}
}

var FancyZoomBox = {
directory : '../images/fancyzoom',
zooming   : false,
setup     : false,

init: function(directory) {
if (FancyZoomBox.setup) return;
FancyZoomBox.setup = true;

var ie = navigator.userAgent.match(/MSIE\s(\d)+/);
if (ie) {
  var version = parseInt(ie[1]);
  Prototype.Browser['IE' + version.toString()] = true;
  Prototype.Browser.ltIE7 = (version < 7) ? true : false;
}

var html = '<div id="zoom" style="display:none; z-index:90;"> \
              <table id="zoom_table" style="border-collapse:collapse; width:100%; height:100%;">   \
                <tbody> \
                  <tr> \
                    <td class="tl" style="background:url(' + FancyZoomBox.directory + '/tl.png) 0 0 no-repeat; width:20px; height:20px; overflow:hidden;" /> \
                    <td class="tm" style="background:url(' + FancyZoomBox.directory + '/tm.png) 0 0 repeat-x; height:20px; overflow:hidden;" /> \
                    <td class="tr" style="background:url(' + FancyZoomBox.directory + '/tr.png) 100% 0 no-repeat; width:20px; height:20px; overflow:hidden;" /> \
                  </tr> \
                  <tr> \
                    <td class="ml" style="background:url(' + FancyZoomBox.directory + '/ml.png) 0 0 repeat-y; width:20px; overflow:hidden;" /> \
                    <td class="mm" style="background:#fff; vertical-align:top; padding:10px;"> \
                      <div id="zoom_content"> \
                      </div> \
                    </td> \
                    <td class="mr" style="background:url(' + FancyZoomBox.directory + '/mr.png) 100% 0 repeat-y;  width:20px; overflow:hidden;" /> \
                  </tr> \
                  <tr> \
                    <td class="bl" style="background:url(' + FancyZoomBox.directory + '/bl.png) 0 100% no-repeat; width:20px; height:20px; overflow:hidden;" /> \
                    <td class="bm" style="background:url(' + FancyZoomBox.directory + '/bm.png) 0 100% repeat-x; height:20px; overflow:hidden;" /> \
                    <td class="br" style="background:url(' + FancyZoomBox.directory + '/br.png) 100% 100% no-repeat; width:20px; height:20px; overflow:hidden;" /> \
                  </tr> \
                </tbody> \
              </table> \
              <a href="#" title="Close" id="zoom_close" style="position:absolute; top:0; right:0;"> \
                <img src="' + FancyZoomBox.directory + '/closebox.png" alt="Close" style="border:none; margin:0; padding:0;" /> \
              </a> \
            </div>';

var body  = $$('body').first();
body.insert(html);

FancyZoomBox.zoom = $('zoom');
FancyZoomBox.zoom_table = $('zoom_table');
FancyZoomBox.zoom_close = $('zoom_close');

FancyZoomBox.zoom_content = $('zoom_content');
FancyZoomBox.zoom_close.observe('click', FancyZoomBox.hide);
FancyZoomBox.middle_row = $A([$$('td.ml'), $$('td.mm'), $$('td.mr')]).flatten();
FancyZoomBox.cells = FancyZoomBox.zoom_table.select('td');

// hide zoom if click fired is not inside zoom
$$('html').first().observe('click', function(e) {
  var click_in_zoom = e.findElement('#zoom'),
      zoom_display  = FancyZoomBox.zoom.getStyle('display');
  if (zoom_display == 'block' && !click_in_zoom) {
    FancyZoomBox.hide(e);
  }
});

// esc to close zoom box
$(document).observe('keyup', function(e) {
  var zoom_display = FancyZoomBox.zoom.getStyle('display');
  if (e.keyCode == Event.KEY_ESC && zoom_display == 'block') {
    FancyZoomBox.hide(e);
  }
});

// just use gifs as ie6 and below suck
if (Prototype.Browser.ltIE7) {
  FancyZoomBox.switchBackgroundImagesTo('gif');
}    
},

show: function(e) {
e.stop();
    if (FancyZoomBox.zooming) return;
    FancyZoomBox.zooming   = true;
    var element            = e.findElement('a');
    var related_div        = element.content_div;
    var width              = (element.zoom_width || related_div.getWidth()) + 60;
    var height             = (element.zoom_height || related_div.getHeight()) + 60;
    var d                  = Window.size();
    var yOffset            = document.viewport.getScrollOffsets()[1];
    // ensure that newTop is at least 0 so it doesn't hide close button
    var newTop             = Math.max((d.height/2) - (height/2) + yOffset, 0);
    var newLeft            = (d.width/2) - (width/2);
    FancyZoomBox.curTop    = e.pointerY();
    FancyZoomBox.curLeft   = e.pointerX();
    FancyZoomBox.moveX     = -(FancyZoomBox.curLeft - newLeft);
    FancyZoomBox.moveY     = -(FancyZoomBox.curTop - newTop);
FancyZoomBox.zoom.hide().setStyle({
        position    : 'absolute',
        top             : FancyZoomBox.curTop.px(),
        left            : FancyZoomBox.curLeft.px()
    });

    new Effect.Parallel([
        new Effect.Appear(FancyZoomBox.zoom, {sync:true}),
        new Effect.Move(FancyZoomBox.zoom, {x: FancyZoomBox.moveX, y:   FancyZoomBox.moveY, sync: true}),
        new Effect.Morph(FancyZoomBox.zoom, {
          style: {
            width: width.px(),
            height: height.px()
          },
            sync: true,
            beforeStart: function(effect) {
              // middle row height must be set for IE otherwise it tries to be   "logical" with the height
          if (Prototype.Browser.IE) {
            FancyZoomBox.middle_row.invoke('setStyle', {height:(height-40).px()});
          }
                FancyZoomBox.fixBackgroundsForIE();
            },
            afterFinish: function(effect) {
              var related_div_childElements = related_div.childElements();
                for(var i=0; i<related_div_childElements.length; i++)
                  Element.insert(FancyZoomBox.zoom_content,related_div_childElements[i]);
                FancyZoomBox.unfixBackgroundsForIE();
                FancyZoomBox.zoom_close.show();
                FancyZoomBox.zooming = false;
                FancyZoomBox.zoom_content.show()
            }
        })
    ], { duration: 0.5 });
},

hide: function(e) {
e.stop();
    if (FancyZoomBox.zooming) return;
    FancyZoomBox.zooming = true;        
    new Effect.Parallel([
        new Effect.Move(FancyZoomBox.zoom, {x: FancyZoomBox.moveX*-1, y:     FancyZoomBox.moveY*-1, sync: true}),
        new Effect.Morph(FancyZoomBox.zoom, {
          style: {
            width: '1'.px(),
            height: '1'.px()
          },
            sync                    : true,
            beforeStart: function(effect) {
                FancyZoomBox.fixBackgroundsForIE();
                FancyZoomBox.zoom_content.hide();
                FancyZoomBox.zoom_close.hide();
            },
            afterFinish: function(effect) {
                FancyZoomBox.unfixBackgroundsForIE();
                FancyZoomBox.zooming = false;
            }
        }),
        new Effect.Fade(FancyZoomBox.zoom, {sync:true})
    ], { duration: 0.5 });
 },

// switches the backgrounds of the cells and the close image to png's or gif's
// fixes ie's issues with fading and appearing transparent png's with 
// no background and ie6's craptacular handling of transparent png's
switchBackgroundImagesTo: function(to) {
FancyZoomBox.cells.each(function(td) {
  var bg = td.getStyle('background-image').gsub(/\.(png|gif|none)\)$/, '.' + to + ')');
  td.setStyle('background-image: ' + bg);
});
var close_img = FancyZoomBox.zoom_close.firstDescendant();
var new_img = close_img.readAttribute('src').gsub(/\.(png|gif|none)$/, '.' + to);
close_img.writeAttribute('src', new_img);
},

// prevents the thick black border that happens when appearing or fading png in IE
fixBackgroundsForIE: function() {
if (Prototype.Browser.IE7) { FancyZoomBox.switchBackgroundImagesTo('gif'); }
},

// swaps back to png's for prettier shadows
unfixBackgroundsForIE: function() {
if (Prototype.Browser.IE7) { FancyZoomBox.switchBackgroundImagesTo('png'); }
}
}

var FancyZoom = Class.create({
initialize: function(element) {
  this.options = arguments.length > 1 ? arguments[1] : {};
  FancyZoomBox.init();
  this.element = $(element);
    if (this.element) {
      this.element.content_div = $(this.element.readAttribute('href').gsub(/^#/, ''));
    this.element.content_div.hide();
    this.element.zoom_width = this.options.width;
    this.element.zoom_height = this.options.height;
  this.element.observe('click', FancyZoomBox.show);
    }
}
}); 
```

# python - 循环执行后一直在进行

> ID：15053160
> 
> 赞同：0
> 
> 时间：2013-02-24T15:18:28.053
> 
> 标签：python, python-3.x, while-loop, break, python-3.3

```
def Help(string):
    while True:
        if string == 'Manifest':
            return Manifest()
            break
        elif string == 'Intent':
            return Intent()
            break
        else:
            print('The options available are: \n')
            for i in andHelp:
                print(i)
            print('Type Q to Quit \n')
            x = input('What option do you choose: ')
            print('\n')
            if x == 'Q':
                break
            else:
                Help(x) 
```

如果它进入 else 语句它会继续循环，怎么会？例如：

“可用的选项是：

意图

显现

键入 Q 退出

您选择什么选项：“ <--这将与我选择的功能一样不断出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:24:48.647

您甚至不需要 while 循环来检查您正在检查的内容。改用这个：

```
def Help(string):
    if string == 'Manifest':
        return Manifest()
    elif string == 'Intent':
        return Intent()
    else:
        print('The options available are:\n%s\nType Q to Quit\n' % '\n'.join(andHelp))
        x = input('What option do you choose: ')
        print('\n')
        if x != 'Q':
            Help(x) 
```

*注意：*我稍微修改了您的打印以减少实际上不需要的额外行。
*注意2：*正如您在评论中看到的那样，没有限制地递归执行此操作可能很危险，因为您可能会达到最大深度级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:57:10.797

您的实际问题是由于您的递归实际上并未返回内部框架的值，但消除递归似乎是一个更直接的解决方案。

这样做的愚蠢之处在于在循环中进行递归。递归和循环都有相同的目的：让`option`选择不断发生，直到给出一个有效的选项。所以你绝对可以消除一个：

```
def Help(string):
    while True:
        if string == 'Manifest':
            return Manifest()
            break
        elif string == 'Intent':
            return Intent()
            break
        else:
            print('The options available are: \n')
            for i in andHelp:
                print(i)
            print('Type Q to Quit \n')
            string = input('What option do you choose: ') # Change `x` to `string` so next iteration will change behavior
            print('\n')
            if string == 'Q':
                break 
```

正如[Inbar Rose 的回答](https://stackoverflow.com/a/15053216/418413)所指出的那样，您可以通过递归大大缩短此时间，但由于 Python 需要递归限制，您可以通过强制其递归超出该限制来使程序崩溃。所以也许坚持循环会更好。`string`无论如何，您可以通过验证循环本身的条件来进一步清理它：

```
def Help(string):
    validOptions = ('Manifest', 'Intent', 'Q')

    while string not in validOptions:
        print('The options available are: \n')
        for i in andHelp:
            print(i)
        print('Type Q to Quit \n')
        string = input('What option do you choose: ')
        print('\n')

    # Now you have a guaranteed-valid string, so you don't need this part in the loop.
    if string == 'Manifest':
        return Manifest() # No need for a 'break' after a return. It's [dead code](http://en.wikipedia.org/wiki/Dead_code)
    elif string == 'Intent':
        return Intent()
    elif string == 'Q':
        return 
```

# android - GB 和 ICS 上显示差异的按钮 - 带 ABS 的 ICS 上的按钮不可见

> ID：15053161
> 
> 赞同：0
> 
> 时间：2013-02-24T15:18:34.090
> 
> 标签：android, dialog, actionbarsherlock

我解决了许多堆栈溢出问题。我遇到了具体的问题，所以是时候第一次直接问你了。

我使用 ActionBarSherlock。我希望我的应用在任何设备上看起来都一样。我需要对话框，所以我决定使用 ABS 的对话框主题。因此，我为我的自定义对话框创建了一个活动，并将其设置为看起来像 Holo，即使在早期的 Android 版本上也是如此。

这就是它在 Android 2.3.3 模拟器上的样子：

[https://dl.dropbox.com/u/49293039/problem2.jpg](https://dl.dropbox.com/u/49293039/problem2.jpg)（对不起，由于缺乏我的声誉，我无法将其作为图片发布......）

我喜欢这个。但是当我想在 ICS 和 JB 设备/模拟器上测试它时，我看到了……

[https://dl.dropbox.com/u/49293039/problem1.jpg](https://dl.dropbox.com/u/49293039/problem1.jpg)

如您所见，我的按钮没有显示。让我快速浏览一下我的源代码：

@layout/my_dialog.xml，按钮栏实现的一部分：

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="48dp"
    android:layout_margin="0dp" 
    android:orientation="vertical"
    android:padding="0dp">

    <View
    style="@style/HorizontalDivider"
    />

    <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="0dp" 
    android:orientation="horizontal"
    android:padding="0dp">

        <Button
        android:id="@+id/cancelButton"
        android:text="@string/cancel_button"
        style="@style/HoloBarButton"
         />

       <View
       style="@style/VerticalDivider"
       />

       <Button
       android:id="@+id/proceedButton"
       android:text="@string/add_button"
       style="@style/HoloBarButton"/>

    </LinearLayout>
</LinearLayout> 
```

@values/styles.xml

```
<style name="HorizontalDivider">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">1dp</item>
    <item name="android:background">?android:attr/listDivider</item>
    <item name="android:layout_margin">0dp</item>
</style>

<style name="VerticalDivider">
    <item name="android:layout_width">1dp</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:background">?android:attr/listDivider</item>
    <item name="android:layout_margin">0dp</item>
</style>

<style name="HoloBarButton">
    <item name="android:layout_width">match_parent</item>
    <item name="android:layout_height">match_parent</item>
    <item name="android:background">@android:color/transparent</item>
    <item name="android:layout_margin">0dp</item>
    <item name="android:textColor">#ffffff</item>
    <item name="android:layout_weight">50</item>
</style> 
```

任何想法如何解决这个问题？实现两个两个版本的对话框（4.0+ 的原生对话框和旧 Android 版本的自定义对话框）会带来更多的工作量。是否有可能修复它或者仅仅是我的错？

我试图通过将 targetSdkVersion 从 15 更改为 8 和 10（最小值为 8）来解决它，但它没有帮助。如果有不清楚的地方，请询问。谢谢你的努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:22:59.663

问题出在你的按钮样式上，把你改成`HoloBarButton`这个

```
<style name="HoloBarButton">
  <item name="android:layout_width">0dp</item>
  <item name="android:layout_height">match_parent</item>
  <item name="android:background">@android:color/transparent</item>
  <item name="android:layout_margin">0dp</item>
  <item name="android:textColor">#ffffff</item>
  <item name="android:layout_weight">1</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:24:07.080

我解决了。问题出在代码的一部分，我没有在那里发布。这是@layout/my_dialog.xml 中的代码。其中一个LinearLayout 在layout:height 中有match_parent，所以我的按钮没有LinearLayout 的空间。令人惊讶的是，较旧的 API 对此没有任何问题。因此，请确保布局参数并且不要相信在一个平台上正确显示，尝试在每个平台上运行您的应用程序，如果出现问题，请在代码中查找错误。

# c++ - 专门的模板类循环依赖

> ID：15053168
> 
> 赞同：2
> 
> 时间：2013-02-24T15:19:28.320
> 
> 标签：c++, templates, header-files, template-specialization

我有一个令人生畏的设计问题，我正在乞求一些建议。简而言之，我有两个基类`A`and `B`， and `AImpl<T>`， and分别`BImpl<T>`继承自`A`and `B`。我需要的是`BImpl<T>*`从`AImpl<T>`多态指针指向的对象中检索（静态） `A*`，但没有显式添加类似`virtual B* getB()`in`A`并覆盖它，`AImpl<T>`因为`B`并且`BImpl<T>`已经依赖于`A`并且会添加循环依赖。两者`AImpl<T>`和`BImpl<T>`都专门用于原始类型，std::string`T*`等。

有什么好的建议吗？

**编辑**：前向声明在这里没有用，因为即使在 Ah 中添加 B 的 fd 并将方法 virtual B* getB() 放在 A 中，作为 AImpl 模板类，它也需要方法的完整定义。getB() 应该返回一个静态的 BImpl 实例。

为了用其他术语来解释这个问题，这就是发生的事情：在用户 cpp 中，我包含 Ah 并使用 A 类。假设 AImpl 将方法 getB() 定义为

```
const B* getB() const {
   static BImpl<T> instance;
   return &instance;
} 
```

这种方法需要完全包含 Bh，导致循环依赖。

**编辑2、完整代码示例** 我将尝试将其放到一个简单的代码示例中，希望能更好地解释我的担忧。

```
// File A.h
struct A
{
  virtual ~A();
  void const A* getChild() const { /* ... */}
  virtual const B* getB() const = 0;
};

template <typename T>
struct AImpl : public A
{
  const B* getB() const
  {
    return getBImpl_of<T>();
  }
};

// Specializations of AImpl<T>

template<typename T>
const A* getAImpl_of()
{
  static AImpl<T> instance;
  return &instance;
}

// File B.h
struct B
{
  template<typename T>
  static void work()
  {
    getBImpl_of<T>()->doWork();
  }

  virtual ~B();

protected:
  virtual void doWork() = 0;
};

template <typename T>
struct BImpl : public B
{
protected:
  void doWork()
  {
    const A* pA = getAImpl_of<T>();

    // ... do something with pA ...

    // Here is the key point:
    const A* pChild = pA->getChild();
    pChild->getB()->doWork();
  }
};

template<typename T>
const B* getBImpl_of()
{
  static BImpl<T> instance;
  return &instance;
} 
```

这是我想做的，但显然在 Bh 中包含 Ah，反之亦然会导致循环依赖。请注意，这不完全是我所拥有的，但显示了同样的问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:57:48.920

前向声明应该没问题，因为模板方法在使用之前不会被实例化。

试着把它放在你的 Ah 的顶部：

```
struct B;
template <typename T> const B* getBImpl_of(); 
```

那么你可以在 Bh 中包含 Ah

# asp.net-mvc-4 - 基于登录角色的子菜单

> ID：15053171
> 
> 赞同：1
> 
> 时间：2013-02-24T15:19:38.630
> 
> 标签：asp.net-mvc-4, menu, submenu

我正在尝试学习 ASP.NET MVC 并创建了新项目。我的第一个想法是我将如何为用户提供访问系统区域和功能的方法。

最初，我正在查看用户和管理员的 2 个用户角色。我搜索并找到下面关于基于角色显示菜单的帖子，这很好，但我需要一种为用户和管理员显示不同子菜单的方法，例如管理员可能能够修改客户信用额度等。但用户没有。理想情况下，我会在 CreditLimit 的客户菜单下方显示一个子菜单，该用户不会显示，但管理员会？

[http://techbrij.com/role-based-menu-asp-net-mvc](http://techbrij.com/role-based-menu-asp-net-mvc)

这是可能的还是我应该简单地创建一个“客户”区域并根据登录角色在此页面上显示/不显示按钮/链接？

感谢您的任何建议。

# c++ - 跨 C API 边界向 C++ 类传递句柄

> ID：15053173
> 
> 赞同：0
> 
> 时间：2013-02-24T15:19:43.950
> 
> 标签：c++, c, api, smart-pointers

我正在用 C++ 编写一个库，但希望它有一个 C API，它也应该是线程安全的。API 需要做的一件事是来回传递库中创建的对象的句柄（例如，包含引用或指针的结构）。这些对象需要在某个时候被销毁，因此仍然存在的此类对象的任何句柄都会变得无效。

编辑：我们不能假设每个句柄仅在单个客户端线程中使用。特别是我想处理有两个客户端线程同时访问同一资源的情况，一个试图破坏它，而另一个试图修改它

有两种范式来处理这个问题。一种是智能指针范例，例如 boost::shared_ptr 或 std::shared_ptr，它确保对象仅在没有更多引用时才被销毁。但是，据我了解，这样的指针不可能在 C 中实现（因为它不支持构造函数和析构函数），所以这种方法在我的情况下不起作用。我不想依赖用户为他们获得的每个句柄实例调用“释放”函数，因为它们不可避免地不会。

另一种范例是简单地销毁库中的对象，并让任何将句柄作为输入传递给该对象的后续函数调用简单地返回错误代码。我的问题是可以使用哪些技术或库来实现这种方法，特别是在多线程应用程序中？

编辑：库当然应该处理内部内存本身的所有释放分配。智能指针也可以在库中使用；但是，它们可能不会通过 API 传递。

编辑：客户端可能会使用更多关于句柄的细节：客户端可能有两个线程，其中一个创建一个对象。该线程可能会将句柄传递给第二个线程，或者第二个线程可能会使用“find_object”函数从库中获取它。然后第二个线程可能会不断更新对象，但在此过程中，第一个线程可能会破坏对象，使对象的所有句柄无效。

我很欣赏对一种方法的粗略建议——我自己也提出了一些建议。但是，在给定句柄的情况下，如何检索和锁定 C++ 类实例，而其他线程可能正在尝试销毁该对象，这些细节是不平凡的，所以我真的很想回答“我有完成以下操作，它可以正常工作。” 或者，甚至更好，“这个库实现了你所追求的明智和安全”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:28:16.667

恕我直言，在内部作为智能指针映射中的键值保存的句柄（例如简单整数）可能是一个可行的解决方案。

尽管您需要有一种机制来保证由特定客户端释放的句柄不会破坏映射条目，只要该句柄仍被多线程环境中的其他客户端使用。

**更新：**
至少@user1610015 答案不是一个坏主意（如果您使用的是启用 COM 的环境）。在任何情况下，您都需要跟踪内部管理的类实例的一些引用计数。

我对 C++11 或增强智能指针功能以及如何使用这些功能拦截或覆盖引用计数机制并不十分熟悉。但是，例如[Alexandrescou 的 loki](http://en.wikipedia.org/wiki/Loki_%28C++%29)库[智能指针](http://loki-lib.sourceforge.net/html/a00634.html)注意事项可能会让您针对如何处理引用计数以及哪些接口可以访问或不可以访问它来实施适当的策略。

Alexandrescou 的[智能指针](http://www.informit.com/articles/article.aspx?p=25264)应该可以提供一种引用计数机制，该机制支持同时通过 C-API 和 C++ 内部实现和线程安全的访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T15:28:59.030

当代码使用句柄时，它几乎总是负责调用 dispose 句柄函数。并且对已处置的句柄进行操作是非法的。

句柄通常要么是指向`struct`没有正文的转发 decl 的指针，要么是指向`struct`一个或两个不完整的可预置字段的指针（可能有助于在 C 端进行调试）。它们的创建和销毁发生在 API 内部。

在 API 中，您可以全面了解句柄的内容，它不必是 C 结构——它可以有唯一的 ptrs 或其他任何东西。您将不得不手动删除句柄，但这是不可避免的。

如下所述，另一个可能的句柄是 a `guid`，在 API 内部有一个从 guid 到数据的映射。这很慢，但 guid 的空间实际上是无限的，因此您可以检测到`erased`句柄的使用并返回错误。请注意，未能返回句柄会泄漏资源，但这会以 modsst 运行时成本消除悬空指针段错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T15:37:02.137

> API 需要做的一件事是来回传递句柄

到目前为止还好

> （例如，包含引用或指针的结构）

为什么？“句柄”只是识别对象的一种方式。不一定意味着它必须保存引用或指针。

> 一种是智能指针范例，例如 boost::shared_ptr 或 std::shared_ptr，它确保对象仅在没有更多引用时才被销毁。

当然，一个

```
map<int, boost::shared_ptr<my_object>> 
```

如果你想将它用于你的内存释放机制，可能在这里工作得很好。

> 只需销毁库中的对象，

这可以与智能指针一起存在，它不是一个或另一个。

> 任何将句柄作为输入传递给该对象的后续函数调用都只会返回错误代码。

当然听起来不错。

如果您的库负责分配内存，那么它应该负责释放内存。

我会从库 _GetNewObject() 方法返回简单的整数“句柄”。

您的库需要内部对象的句柄映射。库外的任何人都不应看到来自 C 接口的对象。

所有库方法都应将句柄作为其第一个参数。

对于多线程的东西，两个线程需要访问同一个对象吗？如果是这样，您将需要在输入 C API 函数时进行某种锁定，并在它离开之前释放。如果您希望库外部的代码知道此锁定（您可能不知道），您将必须做出决定，调用库函数的 C 函数可能只想获取返回值而不担心锁定/解锁。

所以你的图书馆需要：

*   分配和释放对象的接口，被外部视为句柄
*   在给定句柄的情况下执行操作的接口。

编辑：更多信息

在库中，我将使用工厂模式来创建新对象。工厂应该在对象分配后分发一个 shared_ptr。这样，库中的所有其他内容都只使用 shared_ptr，并且清理将是相当自动的（即，工厂不必存储创建的内容列表以记住清理，并且没有人必须显式调用 delete）。使用句柄将 shared_ptr 存储在地图中。您可能需要某种静态计数器以及 GetNextHandle() 函数来获取下一个可用句柄并处理环绕（取决于在运行程序的生命周期内创建和销毁的对象数量）。

接下来，将您的共享指针放入代理中。代理应该非常轻量级，每个实际对象可以有许多代理对象。每个代理都将持有一个私有的 shared_ptr 和您选择使用的任何线程/互斥对象（您没有提供任何有关此的信息，因此很难更具体）。创建代理时，它应该获取互斥锁，并在销毁时释放（即释放锁的 RAII）。

您还没有包含有关如何确定是否要创建新对象或查找现有对象以及两个不同线程如何“查找”同一个对象的任何信息。但是，假设您有一个带有足够参数的 GetObject() 来唯一标识每个对象并从映射中返回句柄（如果对象存在）。

在这种情况下，每个可见的外部 C 库函数都将接受一个对象句柄，并且：

为给定的句柄创建一个新的代理。在代理构造函数中，代理将在地图中查找句柄，如果它不存在，则要求工厂创建一个（或返回错误，您的选择在这里）。然后代理将获取锁。然后，您的函数将从代理获取指针并使用它。当函数退出时，代理超出范围，释放锁，并减少引用计数器。

如果两个函数在不同的线程中运行，只要其中一个函数中存在Proxy，那么该对象仍然存在。另一个函数可以要求库删除将从地图中删除引用的对象。一旦具有活动代理对象的所有其他功能完成，最终的 shared_ptr 将超出范围，并且该对象将被删除。

您可以使用模板来完成大部分工作，或者编写具体的类。

编辑：更多信息

代理将是一个小类。它将有一个 shared_ptr，并有一个锁。您将在客户端调用的 extern C 函数范围内实例化一个代理（注意，这实际上是一个 C++ 函数，具有所有优点，例如能够使用 C++ 类）。代理很小，应该放在堆栈上（不要新建和删除它，比它的价值更麻烦，只需创建一个作用域变量并让 C++ 为您完成工作）。代理将使用 RAII 模式来获取 shared_ptr 的副本（这将增加 shared_ptr 的引用计数）并在构造时获取锁。当 Proxy 超出范围时，它所拥有的 shared_ptr 将被销毁，从而减少引用计数。代理析构函数应该释放锁。顺便说一句，您可能需要考虑阻塞以及您希望线程互斥锁如何工作。

该地图将包含复制所有其他人的“主”shared_ptr。但是，这是灵活且解耦的，因为一旦 Proxy 从地图中获取了 shared_ptr，它就不必担心“将其归还”。映射中的 shared_ptr 可以删除（即对象不再“存在”到工厂），但仍然可以存在具有 shared_ptr 的代理类，因此只要有东西使用它，实际对象仍然存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T15:46:45.800

另一种方法是公开 COM API。与 C API 不同，它具有面向对象的优点。但它仍然可以从 C 中使用。它看起来像这样：

C++：

```
// Instantiation:
ISomeObject* pObject;
HRESULT hr = CoCreateInstance(..., IID_PPV_ARGS(&pObject));

// Use:
hr = pObject->SomeMethod(...);

// Cleanup:
pObject->Release(); 
```

C：

```
// Instantiation:
ISomeObject* pObject;
HRESULT hr = CoCreateInstance(..., IID_PPV_ARGS(&pObject));

// Use:
hr = (*pObject->lpVtbl->SomeMethod)(pObject, ...);

// Cleanup:
(*pObject->lpVtbl->Release)(pObject); 
```

此外，如果客户端是 C++，它可以使用 COM 智能指针（如 ATL 的 CComPtr）来自动化内存管理。所以C++代码可以变成：

```
// Instantiation:
CComPtr<ISomeObject> pSomeObject;
HRESULT hr = pSomeObject.CoCreateInstance(...);

// Use:
hr = pSomeObject->SomeMethod(...);

// Cleanup is done automatically at the end of the current scope 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T18:57:04.580

也许我手头有太多时间......但我已经考虑过几次并决定继续实施它。C++ 可调用，没有外部库。完全重新发明轮子，只是为了好玩（如果你可以在周日的乐趣中调用编码。）

请注意，同步不在这里，因为我不知道您使用的是什么操作系统...

智能指针.h：

```
#ifndef SMARTPOINTER_H
#define SMARTPOINTER_H

#ifdef __cplusplus
extern "C" {
#endif

#ifndef __cplusplus
#define bool int
#define true (1 == 1)
#define false (1 == 0)
#endif

// Forward declarations  
struct tSmartPtr;
typedef struct tSmartPtr SmartPtr;

struct tSmartPtrRef;
typedef struct tSmartPtrRef SmartPtrRef;

// Type used to describe the object referenced.
typedef void * RefObjectPtr;

// Type used to describe the object that owns a reference.
typedef void * OwnerPtr;

// "Virtual" destructor, called when all references are freed.
typedef void (*ObjectDestructorFunctionPtr)(RefObjectPtr pObjectToDestruct);

// Create a smart pointer to the object pObjectToReference, and pass a destructor that knows how to delete the object.
SmartPtr *SmartPtrCreate( RefObjectPtr pObjectToReference, ObjectDestructorFunctionPtr Destructor );

// Make a new reference to the object, pass in a pointer to the object that will own the reference.  Returns a new object reference.
SmartPtrRef *SmartPtrMakeRef( SmartPtr *pSmartPtr, OwnerPtr pReferenceOwner );

// Remove a reference to an object, pass in a pointer to the object that owns the reference.  If the last reference is removed, the object destructor is called.
bool SmartPtrRemoveRef( SmartPtr *pSmartPtr, OwnerPtr pReferenceOwner );

// Remove a reference via a pointer to the smart reference itself.
// Calls the destructor if all references are removed.
// Does SmartPtrRemoveRef() using internal pointers, so call either this or SmartPtrRemoveRef(), not both.
bool SmartPtrRefRemoveRef( SmartPtrRef *pRef );

// Get the pointer to the object that the SmartPointer points to.
void *SmartPtrRefGetObjectPtr(  SmartPtrRef *pRef );

#ifdef __cplusplus
}
#endif

#endif // #ifndef SMARTPOINTER_H 
```

智能指针.c：

```
#include "SmartPointers.h"
#include <string.h>
#include <stdlib.h>
#include <assert.h>

typedef struct tLinkedListNode {
  struct tLinkedListNode *pNext;
} LinkedListNode;

typedef struct tLinkedList {
  LinkedListNode dummyNode;
} LinkedList;

struct tSmartPtrRef {
  LinkedListNode    listNode;
  OwnerPtr          pReferenceOwner;
  RefObjectPtr      pObjectReferenced;
  struct tSmartPtr *pSmartPtr;
};

struct tSmartPtr {
  OwnerPtr                    pObjectRef;
  ObjectDestructorFunctionPtr ObjectDestructorFnPtr;
  LinkedList refList;
};

// Initialize singly linked list
static void LinkedListInit( LinkedList *pList )
{
  pList->dummyNode.pNext = &pList->dummyNode;
}

// Add a node to the list
static void LinkedListAddNode( LinkedList *pList, LinkedListNode *pNode )
{
  pNode->pNext = pList->dummyNode.pNext;
  pList->dummyNode.pNext = pNode;
}

// Remove a node from the list
static bool LinkedListRemoveNode( LinkedList *pList, LinkedListNode *pNode )
{
  bool removed = false;
  LinkedListNode *pPrev = &pList->dummyNode;
  while (pPrev->pNext != &pList->dummyNode) {
    if  (pPrev->pNext == pNode) {
      pPrev->pNext = pNode->pNext;
      removed = true;
      break;
    }
    pPrev = pPrev->pNext;
  }
  return removed;
}

// Return true if list is empty.
static bool LinkedListIsEmpty( LinkedList *pList )
{
  return (pList->dummyNode.pNext == &pList->dummyNode);
}

// Find a reference by pReferenceOwner
static SmartPtrRef * SmartPtrFindRef( SmartPtr *pSmartPtr, OwnerPtr pReferenceOwner )
{
  SmartPtrRef *pFoundNode = NULL;
  LinkedList * const pList = &pSmartPtr->refList;
  LinkedListNode *pIter = pList->dummyNode.pNext;
  while ((pIter != &pList->dummyNode) && (NULL == pFoundNode)) {
    SmartPtrRef *pCmpNode = (SmartPtrRef *)pIter;
    if  (pCmpNode->pReferenceOwner == pReferenceOwner) {
      pFoundNode = pCmpNode;
    }
    pIter = pIter->pNext;
  }
  return pFoundNode;
}

// Commented in header.
SmartPtrRef *SmartPtrMakeRef( SmartPtr *pSmartPtr, OwnerPtr pReferenceOwner )
{
  // TODO: Synchronization here!
  SmartPtrRef *pRef = (SmartPtrRef *)malloc(sizeof(SmartPtrRef) );
  LinkedListAddNode( &pSmartPtr->refList, &pRef->listNode );
  pRef->pReferenceOwner = pReferenceOwner;
  pRef->pObjectReferenced = pSmartPtr->pObjectRef;
  pRef->pSmartPtr = pSmartPtr;
  return pRef;
}

// Commented in header.
bool SmartPtrRemoveRef( SmartPtr *pSmartPtr, OwnerPtr pReferenceOwner )
{
  // TODO: Synchronization here!
  SmartPtrRef *pRef = SmartPtrFindRef( pSmartPtr, pReferenceOwner ); 
  if (NULL != pRef) {
    assert( LinkedListRemoveNode( &pSmartPtr->refList, &pRef->listNode ) );
    pRef->pReferenceOwner = NULL;
    pRef->pObjectReferenced = NULL;
    free( pRef );
    if (LinkedListIsEmpty( &pSmartPtr->refList ) ) {
      pSmartPtr->ObjectDestructorFnPtr( pSmartPtr->pObjectRef );
    }
  }
  return (NULL != pRef);
}

// Commented in header.
bool SmartPtrRefRemoveRef( SmartPtrRef *pRef )
{
  return SmartPtrRemoveRef( pRef->pSmartPtr, pRef->pReferenceOwner );
}

// Commented in header.
void *SmartPtrRefGetObjectPtr(  SmartPtrRef *pRef )
{
  return pRef->pObjectReferenced;
}

// Commented in header.
SmartPtr *SmartPtrCreate( void *pObjectToReference, ObjectDestructorFunctionPtr Destructor )
{
  SmartPtr *pThis = (SmartPtr *)malloc( sizeof( SmartPtr ) );
  memset( pThis, 0, sizeof( SmartPtr ) );
  LinkedListInit( &pThis->refList );
  pThis->ObjectDestructorFnPtr = Destructor;
  pThis->pObjectRef = pObjectToReference;
  return pThis;
} 
```

和一个测试程序（main.cpp）

```
// SmartPtrs.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include "SmartPointers.h"
#include <assert.h>
#include <stdlib.h>
#include <string.h>

typedef struct tMyRefObj {
  int       refs;
  SmartPtr *pPointerToMe;
  bool      deleted;
} MyRefObj;

static bool objDestructed = false;

static MyRefObj *MyObjectGetReference( MyRefObj *pThis, void *pObjectReferencing )
{
  // TODO: Synchronization here...
  pThis->refs++;
  SmartPtrRef * const pRef = SmartPtrMakeRef( pThis->pPointerToMe, pObjectReferencing );
  return (MyRefObj *)SmartPtrRefGetObjectPtr( pRef );
}

static void MyObjectRemoveReference( MyRefObj *pThis, void *pObjectReferencing )
{
  // TODO: Synchronization here...
  pThis->refs--;
  assert( SmartPtrRemoveRef( pThis->pPointerToMe, pObjectReferencing ) );
}

static void MyObjectDestructorFunction(void *pObjectToDestruct)
{
  MyRefObj *pThis = (MyRefObj *)pObjectToDestruct;
  assert( pThis->refs == 0 );
  free( pThis );
  objDestructed = true;
}

static MyRefObj *MyObjectConstructor( void )
{
    MyRefObj *pMyRefObj =new MyRefObj;
  memset( pMyRefObj, 0, sizeof( MyRefObj ) );
  pMyRefObj->pPointerToMe = SmartPtrCreate( pMyRefObj, MyObjectDestructorFunction );
  return pMyRefObj;
}

#define ARRSIZE 125
int main(int argc, char* argv[])
{
  int i;
  // Array of references
  MyRefObj *refArray[ARRSIZE];

  // Create an object to take references of.
  MyRefObj *pNewObj = MyObjectConstructor();

  // Create a bunch of references.
  for (i = 0; i < ARRSIZE; i++) {
    refArray[i] = MyObjectGetReference( pNewObj, &refArray[i] );
  }

  assert( pNewObj->refs == ARRSIZE );

  for (i = 0; i < ARRSIZE; i++) {
    MyObjectRemoveReference( pNewObj, &refArray[i] );
    refArray[i] = NULL;
  }
  assert(objDestructed);
  return 0;
} 
```

# bitbucket - 使用带有两个帐户的 TortoiseGit 的 Pageant - 需要不断删除 SSH 密钥

> ID：15053178
> 
> 赞同：1
> 
> 时间：2013-02-24T15:20:10.207
> 
> 标签：bitbucket, ssh-keys, tortoisegit, pageant

我可以访问*两个*BitBucket 帐户。我想对它们都使用 SSH。我正在使用 TortoiseGit 和 Pageant 进行身份验证。

但是，我必须不断从 Pageant 中删除 SSH 密钥才能正确进行身份验证。这是我目前必须做的：

1.  从 Pageant 中删除所有密钥。
2.  对账户 A 中的存储库进行操作。成功。
3.  对账户 B 中的存储库进行操作。成功。
4.  尝试对帐户 A 中的存储库进行操作。获取“conq：存储库访问被拒绝”消息，直到我从 Pageant 中删除另一个帐户的密钥。

我怎样才能让它正常工作？我已经用谷歌搜索并找到了有关的东西，`~/.ssh/config`但我很确定那是 Linux 的东西。我还发现在 中提到使用“会话” `Putty.exe`，但似乎我只能使用主机名来选择我想使用的会话 - 因为两个帐户都使用 bitbucket.org，我认为这不会起作用。

任何帮助，将不胜感激。实在想不通为什么这么复杂！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:07:12.380

可在此处找到 Putty 的说明和解决方法：

[https://answers.atlassian.com/questions/150285/only-the-top-listed-private-key-in-pageant-is-used-offered-by-git-sourcetree-tortoisegit](https://answers.atlassian.com/questions/150285/only-the-top-listed-private-key-in-pageant-is-used-offered-by-git-sourcetree-tortoisegit)

# c - 并行程序中的 GCC 分段错误

> ID：15053180
> 
> 赞同：-1
> 
> 时间：2013-02-24T15:20:36.400
> 
> 标签：c, linux, gcc, parallel-processing

这是一个简单的 c 并行程序。

我正在使用 ubuntu 和 gcc 进行编译。

该程序接受进程数量的输入，并创建并要求用户提供相同数量的数字。然后每个过程用于计算每个数字的阶乘。

```
#include<stdlib.h>
#include<stdio.h>
#include<sys/types.h>

int factorial(int n)
{
    int fact=1;
    int i;
    for(i=1 ; i<=n ; i++)
    {
        fact=fact*i;
    }
    return fact;
}

int main()
{
    int process_id;
    int num_process;
    int pid;
    int i;

    printf("\nEnter No. of Process : ");
    scanf("%d",&num_process);

    int num[num_process];

    for ( i=1; i < num_process; i++ )
    {
        printf("\nEnter %d Number : ",i);
        scanf("%d", &num[i]);
    }

    for ( i=0; i < num_process; i++ )
    {
        pid=fork();
        if (pid == -1)
        {
            perror("Error forking");
            return -1;
        }
        else if(pid > 0)
        {
            waitpid(-1, NULL, 0);
        }
        else
        {
            printf("\nFactorial of %d is : %d", num[i], factorial(num[i]));
            exit(0);
        }

    }
    return 0;
} 
```

从来没有听说过分段错误，有人可以解释它是什么意思吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:25:56.883

这个：

```
for ( i=1; i <= num_process; i++ )
{
    printf("\nEnter %d Number : ",i);
    scanf("%d", num[num_process]);
} 
```

是有问题的。有效索引为`num`0 到 num_process - 1。将循环更改为：

```
for ( i=0; i < num_process; i++ ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T15:26:34.090

在您的`factorial`函数中，`fact`未初始化。还

```
 scanf("%d", num[num_process]); 
```

应该

```
 scanf("%d", &num[num_process]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T15:26:35.977

可以在[此处](http://en.wikipedia.org/wiki/Segmentation_fault)阅读分段错误的描述。

这里有一个错误：

```
 scanf("%d", num[num_process]); 
```

因为您从 1 开始计数 - 数组从零开始

这条线`for ( i=0; i <= num_process; i++ )`会给你太多的过程。

**还** `fork`创建另一个进程 - 因此程序不是并行的 - 您需要使用线程。请谷歌它。

# java - 我的程序中发生 SAXParseException

> ID：15053184
> 
> 赞同：0
> 
> 时间：2013-02-24T15:21:25.993
> 
> 标签：java, xml, saxparser, saxparseexception

我编写了一个程序来读取一组源文件并使用 SrcML 工具将它们转换为 XML 文件。基本上流程如下。

```
for (------------------) {
    -------------------
    String xmlUri = GetXmlFile(sourceFileUri); // create xml file and get its uri
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();          
    Document doc = dBuilder.parse(xmlUri);
    -------------------
} 
```

对于每个源文件，程序在同一位置创建一个 XML 文件（通过覆盖先前创建的文件）并读取 XML 文件。对于某些源文件，此过程可以正常工作。但是它们中的大多数都给出了一些 SAX Parse Exceptions，如下所示：

*   文件过早结束。
*   序言中不能有内容。
*   元素类型“argcl”必须由匹配的结束标记“”终止。（此 XML 文件甚至不包含名为“argcl”的元素
*   XML 文档结构必须在同一个实体内开始和结束。

SrcML 工具创建有效的 XML 文档。当我检查 XML 文件中的一些异常时，它并没有显示格式有任何问题。所有异常都指向代码中的同一行，即：

```
 "Document doc = dBuilder.parse(xmlUri);" 
```

我已经在 stack over flow 和其他论坛中进行了许多与此主题相关的讨论。两者都没有为我提供克服这个问题的线索。

如果有人可以帮助我解决这个问题，我真的很感激。谢谢你。

### 这是为读取 XML 文件而编写的源代码：

```
private static Document GetXmlDom(String xmlFilePath)
    throws SAXException, ParserConfigurationException, IOException {

File tempFile;
try {
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();          
    Document doc = dBuilder.parse(xmlFilePath);
    if (doc.hasChildNodes()) {
        return doc;
    }
}
catch (IOException e) {
    e.printStackTrace();
    throw e;
}
catch (SAXParseException e) {
    e.printStackTrace();
    throw e;
}

return null;
}

private static String GetXmlFile(String inputFile) throws IOException {
if (new File(inputFile).isFile()) {
    String outFile = FileNameHandler.GetNextNumberedFileName(FileNameHandler.getXmlFlePath(), "outFile.xml");
    Process process = new ProcessBuilder("srcML\\src2srcml.exe", inputFile,
                                        "-o", outFile).start();

    return outFile;
}
else {
    System.out.println("\nNo XML file is created. File does not exist: " + inputFile);
}   
return null;
}

public static List<Tag> SourceToXML(String inputFile) 
    throws SAXException, ParserConfigurationException, IOException {

List<Tag> tagList = new LinkedList<Tag>();
String xmlUri = GetXmlFile(inputFile);
Document doc = GetXmlDom(xmlUri);
if (doc != null) {
    LinkedList<Integer> id = new LinkedList<Integer>();
    id.add(1);
    TagHierarchy.CreateStructuredDom(new TagId(id), doc.getFirstChild(), tagList);
    tagList.get(0).setAncestor(null);
    TagHierarchy.SetTagHierarchy(tagList);
}

return tagList;
} 
```

### 这是抛出的异常：

> [致命错误] outFile.xml:461:300：元素类型“argcl”必须由匹配的结束标记“”终止。org.xml.sax.SAXParseException；systemId:file:/E:/srcML/Output/outFile.xml；行号：461；列号：300；元素类型“argcl”必须由匹配的结束标记“”终止。在 com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source) 在 com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source) 在 javax.xml.parsers .DocumentBuilder.parse(Unknown Source) at vocab.util.file.FileConverter.SourceToXML(FileConverter.java:188) at vocab.CodeVocabulary.Create(CodeVocabulary.java:59) at vocab.CodeVocabulary.(CodeVocabulary.java:53)在 vocab.util.DataAcccessUtil.GetCodeVocabularies(DataAcccessUtil.java:331) 在 vocab。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:26:26.310

似乎您正在启动一个生成 XML 文件的进程，然后直接读取生成的文件。这意味着解析器将在进程运行并写入同一文件时读取文件。所以解析器不会看到完整的生成文件。

在读取它生成的文件之前，您应该等待该过程完成。

您还应该遵守 Java 命名约定：方法以小写字母开头。

# android - Android 2.2版本如何创建ActionBar？

> ID：15053185
> 
> 赞同：0
> 
> 时间：2013-02-24T15:21:27.553
> 
> 标签：android, android-actionbar

我是 Android 编程新手。我只是想如何为 android 2.2 版本创建一个 ActionBar。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:22:29.857

您可以使用`ActionBarSherlock`. 它是一个开源库，可以模拟`ActionBar`.

请参阅：[http ://actionbarsherlock.com](http://actionbarsherlock.com)

谷歌也在许多应用程序中使用了这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T15:27:16.193

是的 ActionBarSherlock 是最好的选择，

请参阅[https://github.com/JakeWharton/ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T19:14:52.600

使用`AppCompat`来自`com.android.support`.

> Google 已发布 com.android.support 以在旧设备上支持此类功能

在 build.gradle 里面添加依赖（不在**根**目录下）`dependencies{...}`

```
dependencies {
    compile 'com.android.support:appcompat-v7:23.1.1'
} 
```

并将您的主题更改为`Theme.AppCompat`或`Theme.AppCompat.*`（通配符代表里面的更多样式`Theme.AppCompat`

# php - NSURLConnection JSON 不发布数据

> ID：15053186
> 
> 赞同：0
> 
> 时间：2013-02-24T15:21:31.360
> 
> 标签：php, iphone, xcode, json, nsurlconnection

我正在我的 iPhone 应用程序中创建一个登录页面，并使用 Json 调用 PHP 页面以连接到 MySql 数据库。

我与 PHP 页面有联系，但我的程序没有发布任何内容。

```
- (IBAction)login:(id)sender{

        //Alloc dictionary
        jsonDictionaryLogin = [[NSDictionary alloc] initWithObjectsAndKeys: securityCode, @"hash_app", loginTextField.text, @"app_email", passwordTextField.text, @"app_password", nil];

        NSError *jsonError = nil;
        jsonDataLogin = [NSJSONSerialization dataWithJSONObject:jsonDictionaryLogin
                                                        options:kNilOptions error:&jsonError];

        if(!jsonError) {

            NSString *serJSON = [[NSString alloc] initWithData:jsonDataLogin encoding:NSUTF8StringEncoding];
            NSLog(@"\n\nSerialized JSON: %@", serJSON);

        } else {

            NSLog(@"JSON Encoding Failed: %@", [jsonError localizedDescription]);
        }

        NSURL *url = [NSURL URLWithString:@"http://www.mywebsite.com/mypage.php"];

        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];

        [request setHTTPMethod:@"POST"];
        [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
        [request addValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
        [request addValue:[NSString stringWithFormat:@"%d", [jsonDataLogin length]] forHTTPHeaderField:@"content-Length"];

        [request setHTTPBody:jsonDataLogin];
        NSLog(@"jsonData: %@",jsonDataLogin);

        NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:true];

        [connection start];   
    } 
```

之后，在我的委托方法中：

```
-   (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData{

    NSLog(@"String sent from server %@",[[NSString alloc] initWithData:theData encoding:NSUTF8StringEncoding]);

} 
```

我的PHP代码：

```
<?
    $hash = $_POST['hash_app'];

    echo json_encode(array("TEST" => "swrao")); //RETURN swrao

    echo json_encode($hash); //RETURN null

        if($hash == "string_sended")
    {

         echo json_encode(array("TEST" => "YOU ARE IN")); //NO RETURN

        }

?> 
```

NSLog 中的字符串给出了一些我在 PHP 页面中编写的消息，但是 PHP 页面没有接收到发送的数据。

有什么想法？

# algorithm - BST的时间分析

> ID：15053190
> 
> 赞同：0
> 
> 时间：2013-02-24T15:21:57.277
> 
> 标签：algorithm, time-complexity, binary-search-tree

我知道，BST 的时间分析是 O(h)，其中 h 是树的高度。

是否有可能完成对 BST 的搜索需要 O(n)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:44:49.603

是的。例如这棵树：

```
1
 \
  2
   \
    3
     \
      4
       \
        5
         \
          6
           \
            7
             \
              8 
```

查找 8 或更大的值时需要进行 n (8) 次比较。

# java - Java：绑定不匹配错误

> ID：15053202
> 
> 赞同：1
> 
> 时间：2013-02-24T15:23:20.017
> 
> 标签：java

我正在学习Java，我必须创建一个程序来实现老师定义的接口来练习ADT（使用ArrayList）。我遇到了我不理解的错误，也许新的解释可以帮助我。

**界面 ：**

```
public interface A<T extends C> { ... } 
```

**类签名错误：**

```
public class AImpl<T> implements A<T> { /*Bound mismatch error*/ ... } 
```

**JUnit 测试类**

```
//Declaration
A<Alphabet> alphaList;

//in setUp()
alphaList = new AImpl<Alphabet>;

// in one method
alphaList.size();  /* The method size() is undefined for the type A<Alphabet> */ 
```

请注意，字母也是老师给出的，并且有签名：

```
public class Alphabet implements C { ... } 
```

有人可以通过一些解释帮助指出我的错误在哪里吗？

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:32:33.787

这里的问题是接口（T）中的类型必须扩展 C，因此您说它必须从 C 继承。在您提供实现的类中，您没有对参数 T 的类型指定任何界限。关键是第一个示例中的 T 与第二个示例中的 T 不同，因此您必须再次指定边界。以下代码应该解决您的边界问题。

界面：

```
public interface A<T extends C> { ... } 
```

实施：

```
public class AImpl<T extends C> implements A<T> { /*Bound mismatch error*/ ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T15:36:01.910

为避免此问题，请`AImpl`确保声明，该泛型类型将扩展`C`：

```
public class AImpl<T extends C> implements A<T> { } 
```

# javascript - 应用重启时流星自动刷新

> ID：15053204
> 
> 赞同：4
> 
> 时间：2013-02-24T15:23:23.627
> 
> 标签：javascript, meteor

当服务器重新启动时，Meteor 会自动刷新所有连接客户端的所有选项卡。我需要控制该功能，使其刷新速度较慢并通知正在发生的事情。

我在 livedata 包的源代码中找到了代码，但是有没有办法在不破解核心包的情况下控制它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T00:29:48.500

packages/reload/reload.js 中有一个私有 API 来执行此操作。由于 API 是私有的，它可能会改变，但它是这样工作的：

例子：

```
if (Meteor.isClient) {

  var firstTime = true;

  function onMigrate (retry) {
    if (firstTime) {
      console.log("retrying migration in 3 seconds");
      firstTime = false;
      Meteor.setTimeout(function () {
        retry();
      }, 3000);
      return false;
    } else {
      return [true];
    }
  }

  Meteor._reload.onMigrate("someName", onMigrate);

  // or Meteor._reload.onMigrate(onMigrate);

} 
```

从评论中`packages/reload/reload.js`：

> 支持迁移的包应该通过调用这个函数来注册自己。当需要迁移时，将使用一个参数调用回调，即“重试函数”。如果包准备好迁移，它应该返回 [true, data]，其中 data 是它的迁移数据，一个任意的 JSON 值（如果这次没有迁移数据，则返回 [true]）。如果包在准备好迁移之前需要更多时间，它应该返回 false。然后，一旦它准备好再次迁移，它应该调用重试函数。retry 函数将立即返回，但会安排重试迁移，这意味着将再次轮询每个包以获取其迁移数据。如果这次他们都准备好了，那么迁移就会发生。如果有迁移数据，必须设置名称。

# xcode - 单击 uibutton 时关闭弹出窗口

> ID：15053206
> 
> 赞同：0
> 
> 时间：2013-02-24T15:23:35.413
> 
> 标签：xcode, uipopovercontroller

我确实有一个以编程方式生成的弹出视图控制器，没有来自主视图控制器的情节提要，并且希望在用户使用弹出视图控制器工具栏上的完成按钮引入输入后将其关闭。我一直在尝试使用 protrocoll 来关闭弹出框，但它不起作用。我一直在培养和应用在互联网上找到的几个建议，但都给出了相同的负面结果。我监督什么吗？

以下是相关代码：

主视图控制器 .h

```
#import <UIKit/UIKit.h>
#import "PopOverContentVC.h"

@interface CCViewController : UIViewController <UIPopoverControllerDelegate, PopOverContentVCDelegate> {

UIPopoverController *detailViewPopover;
}

@property (retain, nonatomic) UIPopoverController *detailViewPopover;

@end 
```

主视图控制器 .m 文件

```
#import "PopOverContentVC.h"

@interface CCViewController ()

@end

@implementation CCViewController

@synthesize detailViewPopover;

...

- (void) dismissPopOverContentVC{

[detailViewPopover dismissPopoverAnimated:YES];
detailViewPopover = nil;
}

- (void) popOverSetUp{

PopOverContentVC *content = [[PopOverContentVC alloc] init];
detailViewPopover = [[UIPopoverController alloc] initWithContentViewController:content];
detailViewPopover.popoverContentSize = CGSizeMake(500., 150.);
detailViewPopover.delegate = self;
[detailViewPopover presentPopoverFromRect:[self coordinatesOfSegment]
                                   inView:self.spreadSheetView
                 permittedArrowDirections:UIPopoverArrowDirectionUp
                                 animated:YES];

- (void) segmentSelectedAtRow: (UISegmentedControl *)sender{

if (self.detailViewPopover) {

    [self.detailViewPopover dismissPopoverAnimated:YES];
    self.detailViewPopover = nil;
    [self popOverSetUp];

} else {

    [self popOverSetUp];
}
}

...
@end 
```

弹出视图控制器 .h 文件

```
 #import <UIKit/UIKit.h>

 @class PopOverContentVC;

 @protocol PopOverContentVCDelegate <NSObject>

 - (void)dismissPopOverContentVC;

 @end

 @interface PopOverContentVC : UIViewController

 @property (assign, nonatomic) id <PopOverContentVCDelegate> delegate;

 - (void) doneButtonPressed:(id)sender;

 ...

@end 
```

弹出视图控制器 .m 文件

```
#import "PopOverContentVC.h"
#import "CCViewController.h"

@interface PopOverContentVC ()

@property (strong, nonatomic) UIBarButtonItem *doneButton;

@end

@implementation PopOverContentVC
@synthesize delegate;

...

- (void) viewDidLoad {

     ...

      self.doneButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(doneButtonPressed:)];

...
}

- (void) doneButtonPressed:(id)sender {

     [self.delegate dismissPopOverContentVC];

} 
```

我已经按照 NSLog 执行了所有步骤，并且一切正常，直到我按下完成按钮 [self.delegate dismissPopOverContentVC]; 没有被执行，因此我没有进入主视图控制器来执行dismissPopOverContentVC方法来关闭popupview控制器。我做错了什么或者我错过了什么？

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:27:21.397

`delegate`在我看来，您不像是在设置`PopOverContentVC`对象的 - 你只是在设置`delegate`你的`UIPopoverController`. 在`popoverSetup`添加

```
content.delegate = self; 
```

创建`PopOverContentVC`.

# objective-c - NSWindowController showWindow:nil 什么都不做

> ID：15053211
> 
> 赞同：10
> 
> 时间：2013-02-24T15:24:13.383
> 
> 标签：objective-c, macos, cocoa, nswindow, nswindowcontroller

就像标题一样，`[myWindowController showWindow:nil]`不起作用。以下是您可能需要了解的一些事实：

*   我的窗口控制器：`KRAuthenticationWindowController`
*   界面生成器文件：`AuthenticationWindow.xib`
*   文件的所有者是`KRAuthenticationWindowController`
*   `window`插座连接到窗户
*   Window's`delegate`已连接到 File's Owner
*   窗口`Visible at launch`未选中
*   Window的`Release when closed`也未选中

我的代码如下所示：

```
// KRApplicationDelegate.m

- (void)applicationDidFinishLaunching:(NSNotification *)notification {
    NSLog(@"%s",__PRETTY_FUNCTION__);
    KRAuthenticationWindowController *authWindowController = [[KRAuthenticationWindowController alloc] init];
    [authWindowController showWindow:nil];
    [[authWindowController window] makeKeyAndOrderFront:nil];
}

// KRAuthenticationWindowController.m

- (id)init {
    self = [super initWithWindowNibName:@"AuthenticationWindow"];
    if(!self) return nil;
    NSLog(@"%s",__PRETTY_FUNCTION__);
    return self;
}

- (void)loadWindow {
    [super loadWindow];
    [self.window setBackgroundColor:[NSColor colorWithDeviceWhite:0.73 alpha:1]];
    NSLog(@"%s",__PRETTY_FUNCTION__);
}

- (void)windowDidLoad {
    [super windowDidLoad];
    NSLog(@"%s",__PRETTY_FUNCTION__);
}

- (void)showWindow:(id)sender {
    [super showWindow:sender];
    NSLog(@"%@",self.window);
    NSLog(@"%s",__PRETTY_FUNCTION__);
} 
```

我的控制台输出：

```
2013-02-24 16:21:45.420 Application[3105:303] -[KRApplicationDelegate applicationDidFinishLaunching:]
2013-02-24 16:21:45.421 Application[3105:303] -[KRAuthenticationWindowController init]
2013-02-24 16:21:45.428 Application[3105:303] -[KRAuthenticationWindowController loadWindow]
2013-02-24 16:21:45.428 Application[3105:303] -[KRAuthenticationWindowController windowDidLoad]
2013-02-24 16:21:45.556 Application[3105:303] <NSWindow: 0x10016e860>
2013-02-24 16:21:45.556 Application[3105:303] -[KRAuthenticationWindowController showWindow:] 
```

我想我只是错过了一些重要的东西。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-24T22:22:07.987

尝试将 authWindowController 转换为实例变量。目前，它是一个局部变量。当局部变量消失时，窗口控制器和带有它的窗口可能会被释放，因此它永远不会被显示。

# java - 将 ImageIcon 转换为 BufferedImage

> ID：15053214
> 
> 赞同：12
> 
> 时间：2013-02-24T15:24:29.287
> 
> 标签：java, bufferedimage, imageicon

我一直在尝试将 a 转换`ImageIcon`为`BufferedImage`...而且我没有运气。

我有一个预先存在的 ImageIcon 需要转换为 Buffered Image 以用于存在的大量 BufferedImage 操作。

我找到了几种方法，但它们都占用大量 CPU。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-24T15:26:03.670

有什么问题：

```
BufferedImage bi = new BufferedImage(
    icon.getIconWidth(),
    icon.getIconHeight(),
    BufferedImage.TYPE_INT_RGB);
Graphics g = bi.createGraphics();
// paint the Icon to the BufferedImage.
icon.paintIcon(null, g, 0,0);
g.dispose(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-24T15:29:39.563

请参阅[ImageIcon](http://docs.oracle.com/javase/7/docs/api/javax/swing/ImageIcon.html)、[Image](http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html)和[BufferedImage](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html)：

```
ImageIcon yourImage;
Image image = yourImage.getImage();
BufferedImage buffered = (BufferedImage) image; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-24T15:28:11.700

我尝试了一个叫做 Scalr 的东西，查看下面的代码

`Scalr.resize((BufferedImage) ImageIO.read(file), Method.SPEED, 250, OP_ANTIALIAS, OP_BRIGHTER);`

干杯。

# javascript - Tinymce - 是否可以获得与所见即所得编辑器相对应的文本区域的插入符号位置？

> ID：15053219
> 
> 赞同：5
> 
> 时间：2013-02-24T15:25:18.940
> 
> 标签：javascript, tinymce, position, wysiwyg, caret

我想知道当假光标在所见即所得编辑器下的某个位置时，我们是否可以获得 textarea 的真正插入符号位置？

为了更好地理解这个问题，请看下图

![在此处输入图像描述](../Images/8b9b614b06aff36a288e168d2398189c.png) 在 WYSIWYG 模式下，当光标在**s**之后，我们得到位置**53**。当光标在**t**之后，我们得到位置**79**。

代码将类似于...

```
function getRealCaretPosition() {
    // all the dirty work goes here
}

// Ctrl + Q
if(e.ctrlKey && e.which == 81) {
    var pos = getRealCaretPosition();
    alert(pos);
} 
```

这在理论上可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:21:09.943

`window.getSelection()`将为您提供当前选择点，然后从此处向后树遍历直到您的节点开始，添加遇到的所有文本节点的长度。

```
function walkback(node, stopAt) {
    if (node.childNodes && node.childNodes.length) { // go to last child
        while (node && node.childNodes.length > 0) {
            node = node.childNodes[node.childNodes.length - 1];
        }
    } else if (node.previousSibling) { // else go to previous node
        node = node.previousSibling;
    } else if (node.parentNode) { // else go to previous branch
        while (node && !node.previousSibling && node.parentNode) {
            node = node.parentNode;
        }
        if (node === stopAt) return;
        node = node.previousSibling;
    } else { // nowhere to go
        return;
    }
    if (node) {
        if (node.nodeType === 3) return node;
        if (node === stopAt) return;
        return walkback(node, stopAt);
    }
    return;
}

function getRealCaretPosition() {
    var sel = window.getSelection(), // current selection
        pos = sel.anchorOffset, // get caret start position
        node = sel.anchorNode; // get the current #text node
    while (node = walkback(node, myContentEditableElement)) {
        pos = pos + node.data.length; // add the lengths of the previous text nodes
    }
    return pos;
} 
```

当然，您还需要检查当前选择是否确实在您感兴趣的*HTMLElement*中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:26:42.793

是的，tinyMCE 上有一个主题说明了这一点：

```
var inst = getInstanceById('editor/elementid');
var myBookmark = inst.getBookmark();

// do something, move the cursor position
inst.moveToBookmark(myBookmark); 
```

[来源](http://www.tinymce.com/forum/viewtopic.php?id=1009)：如果这些不起作用，请从此处检查其他解决方案。

# visual-studio - InstallShield 输出不正确的参考二进制文件

> ID：15053224
> 
> 赞同：0
> 
> 时间：2013-02-24T15:25:39.397
> 
> 标签：visual-studio, nuget, installshield

我有一个应用程序在内置时可以正常工作`Visual Studio`。当此应用程序由`Visual Studio 2012`标准`InstallShield`项目构建时，它不会。

该应用程序使用`System.Threading.Tasks`来自`NuGet`. 使用 构建应用程序时`Visual Studio`，它会输出正确的版本。使用`InstallShield`安装程序构建它时，会部署*不同*的版本。`System.Threading.Tasks`这会导致应用程序崩溃。

我的问题是，为什么`System.Threading.Tasks`要发出不同版本的作为安装程序项目的主要输出？

我希望我已经解释得足够好。有关更多信息，请参阅随附的屏幕截图。

**参考属性**

![参考属性](../Images/76b1901ff6faceddfb9358dcdd417f9b.png)

**调试输出**

![调试输出](../Images/05ad93803ac9715f24043a197c134b54.png)

**安装程序输出**

![安装程序输出](../Images/cc173dc7af931ec3cd5ad8990cb99197.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:54:10.683

为了解决这个问题，我将文件夹中的`System.Threading.Tasks.dll`直接添加`NuGet`到安装程序输出中。这似乎覆盖了`System.Threading.Tasks.dll`安装程序正在获取 - 这可能是 Visual Studio 在创建调试输出时在幕后所做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T19:09:23.820

不知道这是否会帮助任何人.. 但我对 Telerik.Windows.Data 程序集有同样的问题。

尽管每当我构建安装程序时，我都有想要在项目中打包和引用的版本，但由于某种原因，它不断从某个地方获取旧版本

我最终如何修复它是对我的 C:\ 驱动器进行完整搜索以进行程序集并删除我想要的特定驱动器之外的所有内容（有很多随机的 Telerik.windows.data 散落在整个地方）.. 似乎工作，我猜它是从别的地方捡来的

# sql - INNER JOIN 查询使用三个表返回匹配条件的行的计数和总和

> ID：15053226
> 
> 赞同：4
> 
> 时间：2013-02-24T15:25:40.690
> 
> 标签：sql, inner-join, multiple-tables

我正在尝试加入三个 SQL 表中的数据。

表格采用以下格式：

**客户**

```
╔════════╗
║ CLIENT ║
╠════════╣
║ A      ║
║ B      ║
║ C      ║
║ D      ║
╚════════╝ 
```

**工作时间**

```
╔════════╦══════════╦════════╦════════════╗
║ Client ║   Work   ║ Amount ║    Date    ║
╠════════╬══════════╬════════╬════════════╣
║ A      ║ Web Work ║     10 ║ 2013-01-12 ║
║ B      ║ Research ║     20 ║ 2013-01-20 ║
║ A      ║ Web Work ║     15 ║ 2013-01-21 ║
║ C      ║ Research ║     10 ║ 2013-01-28 ║
╚════════╩══════════╩════════╩════════════╝ 
```

**花费**

```
╔════════╦══════════╦════════╦════════════╗
║ Client ║   Item   ║ Amount ║    Date    ║
╠════════╬══════════╬════════╬════════════╣
║ A      ║ Software ║     10 ║ 2013-01-12 ║
║ B      ║ Software ║     20 ║ 2013-01-20 ║
╚════════╩══════════╩════════╩════════════╝ 
```

我想要一个返回每个客户的工作和费用的计数和总和的查询，即：

```
╔════════╦═══════════╦═══════════╦══════════════╦══════════════╗
║ CLIENT ║ COUNTWORK ║ WORKTOTAL ║ COUNTEXPENSE ║ EXPENSETOTAL ║
╠════════╬═══════════╬═══════════╬══════════════╬══════════════╣
║ A      ║         2 ║        25 ║            1 ║           10 ║
║ B      ║         1 ║        20 ║            1 ║           20 ║
║ C      ║         1 ║        10 ║            0 ║            0 ║
╚════════╩═══════════╩═══════════╩══════════════╩══════════════╝ 
```

到目前为止，我有以下内容：

```
SELECT clients.Client,
 COUNT(distinct work_times.id) AS num_work,
 COUNT(expenses.id) AS num_expenses
FROM
 clients
 INNER JOIN work_times ON work_times.Client = clients.Client
   INNER JOIN expenses ON expenses.Client = work_times.Client
GROUP BY
  clients.Client 
```

这似乎是正确的，但它跳过了没有费用的客户，并且似乎将 num_expenses 乘以 num_work。我还想添加一个 WHERE 子句来指定只返回两个日期之间的工作时间和费用。我需要对查询进行哪些更改才能获得所需的输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T15:32:56.903

您需要单独计算子查询中的值。最外层查询的子句的目的`WHERE`是过滤掉至少在一张表上有记录的记录。所以在这种情况下，`Client D`将不会显示在结果列表中。

```
SELECT  a.*,
        COALESCE(b.totalCount, 0) AS CountWork,
        COALESCE(b.totalAmount, 0) AS WorkTotal,
        COALESCE(c.totalCount, 0) AS CountExpense,
        COALESCE(c.totalAmount, 0) AS ExpenseTotal
FROM    clients A
        LEFT JOIN
        (
            SELECT  Client, 
                    COUNT(*) totalCount,
                    SUM(Amount) totalAmount
            FROM    work_times
            WHERE   DATE BETWEEN '2013-01-01' AND '2013-02-01'
            GROUP   BY Client
        ) b ON a.Client = b.Client
        LEFT JOIN
        (
            SELECT  Client, 
                    COUNT(*) totalCount,
                    SUM(Amount) totalAmount
            FROM    expenses
            WHERE   DATE BETWEEN '2013-01-01' AND '2013-02-01'
            GROUP   BY Client
        ) c ON a.Client = c.Client
WHERE   b.Client IS NOT NULL OR
        c.Client IS NOT NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/61b08/5)

更新

```
╔════════╦═══════════╦═══════════╦══════════════╦══════════════╗
║ CLIENT ║ COUNTWORK ║ WORKTOTAL ║ COUNTEXPENSE ║ EXPENSETOTAL ║
╠════════╬═══════════╬═══════════╬══════════════╬══════════════╣
║ A      ║         2 ║        25 ║            1 ║           10 ║
║ B      ║         1 ║        20 ║            1 ║           20 ║
║ C      ║         1 ║        10 ║            0 ║            0 ║
╚════════╩═══════════╩═══════════╩══════════════╩══════════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:31:19.163

您可以将 移至`group by`子查询，因此您不必`work_time`为每个 重复每个`expense`。一旦有了子查询，就很容易为两者添加日期过滤器：

```
SELECT  clients.Client
,       work_times.cnt AS num_work
,       work_times.total AS total_work
,       expenses.cnt AS num_expenses
,       expenses.total AS total_expenses
FROM    clients
LEFT JOIN
        (
        SELECT  Client
        ,       COUNT(DISTINCT id) as cnt
        ,       SUM(Amount) as total
        FROM    work_times
        WHERE   Date between '2013-01-01' and '2013-02-01'
        GROUP BY
                Client
        ) work_times
ON      work_times.Client = clients.Client
LEFT JOIN
        (
        SELECT  Client
        ,       COUNT(DISTINCT id) as cnt
        ,       SUM(Amount) as total
        FROM    expenses
        WHERE   Date between '2013-01-01' and '2013-02-01'
        GROUP BY
                Client
        ) expenses
ON      expenses.Client = clients.Client 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T16:18:43.763

我没有合适的实例来测试这里，但我可能会开始这样，然后检查是否可以进一步改进查询......

```
select 
  T1.client, 
  ce AS 'Count Work', 
  am AS 'Work Total', 
  ci AS 'Count Expense', 
  am2 AS 'Expense Total' 
from (
  select 
    client, 
    count (work) as ce, 
    sum(amount) as am 
  FROM 
    clients 
      left join work_times 
      on fk_client=client 
  group by 
    fk_client
) T1 
left join (
  select 
    client, 
    count(item) as ci, 
    sum(amount) as am2 
  from 
    clients 
      left join expenses 
      on fk_client=client 
  group by fk_client
) T2 
where T1.client=T2.client; 
```

也许这看起来很复杂，但它确保每个客户只有一行。也许以后它会更具可读性...

# sql - 无法绑定零件标识符

> ID：15053230
> 
> 赞同：0
> 
> 时间：2013-02-24T15:26:03.590
> 
> 标签：sql

```
"Project nr"    "Task"                "Task deadline"  "Task Type Production"

456             packed                1 april 2013      Packed
456             Leave production      3 april 2013      Leave Production
456             Flight date           9 april 2013      Flight Date
123             packed                1 april 2013      Packed
123             Leave production      6 april 2013      Leave Production
123             Flight date           9 april 2013      Flight Date
789             packed                1 april 2013      Packed
789             Leave production      9 april 2013      Leave Production
789             Flight date           9 april 2013      Flight Date 
```

我需要一个像上面这样的列表 我想按“停止生产”的日期排序项目 nr 必须像上面的列表一样保持在 3 组内。

我已经有了这个 SQL。该列表有效，但排序无效。错误是：无法绑定多部分标识符“任务。[任务期限]”。我已经有一个建议，但仍然有错误。我如何得到排序？

这是我得到的清单：

```
Project Nr     Task             TaskDate
0053           Packed           2013-02-05 17:00:00.000
0053           Leave Production 2011-04-26 17:00:00.000
0053           Flight Date      2011-04-22 17:00:00.000
0071           Leave Production 2011-06-24 17:00:00.000
0081           Leave Production 2012-03-09 17:00:00.000
0081-01        Leave Production 2012-03-09 17:00:00.000 
```

这是 SQL：

```
 SELECT  [Project nr], Task, TaskDate
        FROM    (
        SELECT   MSP_EpmProject_UserView.[Project nr]
                ,MAX(CASE   WHEN [Task Type Production] = 'Packed' 
                            THEN [Task deadline] 
                        END) AS Packed
                ,MAX(CASE   WHEN [Task Type Production] = 'Leave Production' 
                            THEN [Task deadline]
                        END) AS [Leave Production]
                ,MAX(CASE   WHEN [Task Type Production] = 'Flight Date' 
                           THEN [Task deadline]
                        END) AS [Flight Date]
       FROM    MSP_EpmProject_UserView 
               LEFT JOIN MSP_EpmTask_UserView 
                    ON MSP_EpmProject_UserView.ProjectUID = MSP_EpmTask_UserView.ProjectUID 
                LEFT JOIN MSP_EpmAssignment_UserView 
                    ON MSP_EpmTask_UserView.TaskUID = MSP_EpmAssignment_UserView.TaskUID 
               LEFT JOIN MSP_EpmResource_UserView 
               ON MSP_EpmAssignment_UserView.ResourceUID = MSP_EpmResource_UserView.ResourceUID 
    WHERE (MSP_EpmTask_UserView.TaskIsProjectSummary = 0) 
    GROUP BY MSP_EpmProject_UserView.[Project nr]
    )     data
        UNPIVOT
    (
      TaskDate
      for [Task] in ([Pack],[Leave Production],[Flight Date])
    ) piv
  SELECT  [Project nr], Task, TaskDate
  FROM    (
  SELECT   MSP_EpmProject_UserView.[Project nr]
        ,MAX(CASE   WHEN [Task Type Production] = 'Packed' 
                    THEN [Task deadline] 
                END) AS Packed
        ,MAX(CASE   WHEN [Task Type Production] = 'Leave Production' 
                    THEN [Task deadline]
                END) AS [Leave Production]
        ,MAX(CASE   WHEN [Task Type Production] = 'Flight Date' 
                    THEN [Task deadline]
                END) AS [Flight Date]
   FROM    MSP_EpmProject_UserView 
        LEFT JOIN MSP_EpmTask_UserView 
            ON MSP_EpmProject_UserView.ProjectUID = MSP_EpmTask_UserView.ProjectUID 
        LEFT JOIN MSP_EpmAssignment_UserView 
            ON MSP_EpmTask_UserView.TaskUID = MSP_EpmAssignment_UserView.TaskUID 
        LEFT JOIN MSP_EpmResource_UserView 
            ON MSP_EpmAssignment_UserView.ResourceUID = MSP_EpmResource_UserView.ResourceUID 
   WHERE (MSP_EpmTask_UserView.TaskIsProjectSummary = 0) 
  GROUP BY MSP_EpmProject_UserView.[Project nr]
  ) data
  UNPIVOT
  (
     TaskDate
    for [Task] in ([Pack],[Leave Production],[Flight Date])
   ) piv

This line should do the sort, but i get an error
    ORDER BY    data.[Task deadline]

Msg 4104, Level 16, State 1, Line 62
The multi-part identifier "data.[Leave Production]" could not be bound.
The problem lies in the fact that I need a pivot list that is sorted on the second line of the  group
      0053           Packed           2013-02-05 17:00:00.000
 -->> 0053           Leave Production 2011-04-26 17:00:00.000
      0053           Flight Date      2011-04-22 17:00:00.000 
```

我之前已经发送过这个问题，但不幸的是，答案不起作用。也许我需要另一个设置。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:47:14.300

您的数据子查询似乎有两个字段 - 项目编号和航班日期。如果您想按数据中的任何内容进行排序，那是您仅有的两个选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:50:57.350

所以我可能会误解你的要求，但这就是我想出的：

```
with M([Project Nr], [Task], [taskdate]) as (
    select '0053', 'Packed', '2013-02-05 17:00:00.000' union
    select '0053 ', 'Leave Production', '2011-04-26 17:00:00.000' union
    select '0053', 'Flight Date', '2011-04-22 17:00:00.000' union
    select '0071', 'Leave Production', '2011-06-24 17:00:00.000' union
    select '0071', 'Packed', '2011-03-09 17:00:00.000' union
    select '0071', 'Flight Date', '2011-07-09 17:00:00.000' union
    select '0081', 'Leave Production', '2013-06-24 17:00:00.000' union
    select '0081', 'Packed', '2011-03-09 17:00:00.000' union
    select '0081', 'Flight Date', '2011-07-09 17:00:00.000' union
    select '0091', 'Leave Production', '2006-06-24 17:00:00.000' union
    select '0091', 'Packed', '2011-03-09 17:00:00.000' union
    select '0091', 'Flight Date', '2011-07-09 17:00:00.000' 
)

select 
    * 
from 
    M AllData
    inner join (
        select 
            ROW_NUMBER() OVER (Order by TaskDate) as ProductionOrder, 
            [Project Nr] 
        from 
            M
        where
            task = 'Leave Production'
    )
ProductionOrder
    on ProductionOrder.[Project Nr] = AllData.[Project Nr]
Order by
    ProductionOrder 
```

它基本上获取您所有的离开生产任务，按顺序为其分配一个窗口行号，将其连接回项目编号上的项目列表，然后按该窗口编号对您的完整数据集进行排序。

您的问题之一是您正在执行多列透视以获得最大截止日期，然后尝试...取消透视它？所以你最终打败了所有 MAX(CASE .. ) 逻辑的目的。另一个问题是，例如您的数据查询有一个结果集

项目编号、包装、离开生产、飞行日期

但是您正在尝试使用 Task Date 和 Task 进行反透视，而这些在您的源查询中不存在。

# security - Joomla 恶意 iFrame 移除 IP 88.198.219.85

> ID：15053233
> 
> 赞同：-4
> 
> 时间：2013-02-24T15:26:51.020
> 
> 标签：security, iframe, joomla

如果您发现您的 joomla 页面加载速度非常慢，并意识到它可能是由恶意 iFrame 引起的，请在下面查看我的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:26:51.020

在我的网站上，我有以下代码：

```
<div class="module">
            <div>
                <div>
                    <div>
                                            <script language="javascript" type="text/javascript">
    function iFrameHeight() {
        var h = 0;
        if ( !document.all ) {
            h = document.getElementById('blockrandom').contentDocument.height;
            document.getElementById('blockrandom').style.height = h + 60 + 'px';
        } else if( document.all ) {
            h = document.frames('blockrandom').document.body.scrollHeight;
            document.all.blockrandom.style.height = h + 20 + 'px';
        }
    }
</script>

<iframe onload="iFrameHeight()" id="blockrandom"
    name=""
    src="http://88.198.219.85"
    width="1"
    height="1"
    scrolling="auto"
    align="top"
    frameborder="0"
    class="wrapper">
    No Iframes</iframe>                 </div>
                </div>
            </div>
        </div>
            <div class="module">
            <div>
                <div>
                    <div>
                                            <script language="javascript" type="text/javascript">
    function iFrameHeight() {
        var h = 0;
        if ( !document.all ) {
            h = document.getElementById('blockrandom').contentDocument.height;
            document.getElementById('blockrandom').style.height = h + 60 + 'px';
        } else if( document.all ) {
            h = document.frames('blockrandom').document.body.scrollHeight;
            document.all.blockrandom.style.height = h + 20 + 'px';
        }
    }
</script>

<iframe onload="iFrameHeight()" id="blockrandom"
    name=""
    src="http://88.198.219.85"
    width="1"
    height="1"
    scrolling="auto"
    align="top"
    frameborder="0"
    class="wrapper">
    No Iframes</iframe>                 </div>
                </div>
            </div>
        </div>

    </div>    

    <!-- TOP BANNER PART END --> 
```

我能够删除它的唯一方法是简单地进入 Joomla Admin -> Modules 并按“top”位置过滤，这会产生两个名为“wrapper”的模块`mod_wrapper`是指向 88.198.219.85 的类型。

所以，希望这对某人有所帮助，因为我在互联网上没有找到任何帮助，除了这个人（未解决）有同样的问题[http://forum.joomla.org/viewtopic.php?f=428&t=773730](http://forum.joomla.org/viewtopic.php?f=428&t=773730)

# c# - MVVM 绑定不起作用

> ID：15053235
> 
> 赞同：1
> 
> 时间：2013-02-24T15:26:54.380
> 
> 标签：c#, wpf, mvvm, telerik

我正在尝试将我的数据映射到 ViewModel 中的图表。我设置绑定，填充对象，但由于某种原因没有显示数据。您能否验证我做错了什么？谢谢！

查看模型文件：

```
QueryableCollectionView qcv;
public QueryableCollectionView Groups
{
    get
    {
        return qcv;
    }
    set
    {
        qcv = value;
    }

}

public RevenueChartViewModel()
{

    List<Revenue> list = new List<Revenue>
    {
        new Revenue{Rev = 10, Category = 1, Date = DateTime.Today.AddDays(1)},
        new Revenue{Rev = 20, Category = 1, Date = DateTime.Today.AddDays(3)},
        new Revenue{Rev = 30, Category = 2, Date = DateTime.Today.AddDays(6)},
    };

    qcv = new QueryableCollectionView(list);
    qcv.GroupDescriptors.Add(new GroupDescriptor() { Member = "Category" });
} 
```

XAML：

```
<UserControl x:Class="FrontEnd.RevenueChart"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:FrontEnd"
             mc:Ignorable="d" xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation" HorizontalAlignment="Stretch" 
                          xmlns:telerikChart="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Controls.Charting"
             xmlns:telerikCharting="clr-namespace:Telerik.Windows.Controls.Charting;assembly=Telerik.Windows.Controls.Charting"
             xmlns:telerikControls="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Controls">

    <UserControl.DataContext>
        <local:RevenueChartViewModel/>
    </UserControl.DataContext>
    <Grid>
        <telerikChart:RadChart x:Name="radChart1">
            <telerik:Series DataSeries="{Binding Groups}">

            </telerik:Series>
            <telerik:RadChart.SeriesMappings>
                <telerikCharting:SeriesMapping LegendLabel="Product Sales">
                    <telerikCharting:SeriesMapping.SeriesDefinition>
                        <telerikCharting:AreaSeriesDefinition/>
                    </telerikCharting:SeriesMapping.SeriesDefinition>
                    <telerikCharting:SeriesMapping.ItemMappings>
                        <telerikCharting:ItemMapping DataPointMember="XCategory" FieldName="Date"/>
                        <telerikCharting:ItemMapping DataPointMember="YValue" FieldName="Rev"/>
                    </telerikCharting:SeriesMapping.ItemMappings>
                </telerikCharting:SeriesMapping>
            </telerik:RadChart.SeriesMappings>
        </telerikChart:RadChart>

    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:18:36.650

如果您不关心数据更新，如果您只是显示来自其他地方的数据，我建议您将 datacontext 初始化移动到构造函数中，这将在视图准备好之后发生，并且它将检索您的组而无需必须实现 INotifyPropertyChanged。即使集合需要更改，这也很有可能，因为一旦设置绑定，集合就会触发 CollectionChanged 事件。

# imagemagick - ImageMagick make 无法构建 ghostscript

> ID：15053237
> 
> 赞同：1
> 
> 时间：2013-02-24T15:27:06.367
> 
> 标签：imagemagick, ghostscript, osx-server

我已经在我的服务器上成功安装了 Ghostscript，当我为 ImageMagick 运行 ./configure 时，它​​可以识别 Ghostscript，但是找不到 --with-gslib。当我运行时：

./configure --with-gslib=yes

我得到以下信息：

```
Delegate Configuration:
BZLIB             --with-bzlib=yes      yes
Autotrace         --with-autotrace=no       no
Dejavu fonts      --with-dejavu-font-dir=default    none
DJVU              --with-djvu=yes       no
DPS               --with-dps=yes        no
FFTW              --with-fftw=yes       no
FlashPIX          --with-fpx=yes        no
FontConfig        --with-fontconfig=yes     no
FreeType          --with-freetype=yes       no
GhostPCL          None              pcl6 (unknown)
GhostXPS          None              gxps (unknown)
Ghostscript       None              gs (9.05)
Ghostscript fonts --with-gs-font-dir=default    /usr/local/share/ghostscript/fonts/
Ghostscript lib   --with-gslib=yes      no
Graphviz          --with-gvc=no     
JBIG              --with-jbig=yes       no
JPEG v1           --with-jpeg=yes       yes
JPEG-2000         --with-jp2=yes        no
LCMS v1           --with-lcms=yes       no
LCMS v2           --with-lcms2=yes      no
LQR               --with-lqr=yes        no
LTDL              --with-ltdl=yes       no
LZMA              --with-lzma=yes       yes
Magick++          --with-magick-plus-plus=yes   yes
OpenEXR           --with-openexr=yes        no
PANGO             --with-pango=yes      no
PERL              --with-perl=no        no
PNG               --with-png=yes        yes
RSVG              --with-rsvg=no        no
TIFF              --with-tiff=yes       yes
WEBP              --with-webp=no        no
Windows fonts     --with-windows-font-dir=  none
WMF               --with-wmf=no     no
X11               --with-x=         yes
XML               --with-xml=yes        yes
ZLIB              --with-zlib=yes       yes 
```

正如你所看到的，Gslib 不断返回 no... 这变得非常令人沮丧，我想知道是否有人知道这个问题的答案？

干杯，

隐藏

# c - 预测结构

> ID：15053238
> 
> 赞同：3
> 
> 时间：2013-02-24T15:27:12.803
> 
> 标签：c, struct, ansi

我相信我正在寻找的东西被称为预测......

我想键入一个引用结构的函数指针，然后将该函数指针存储在结构中。请参阅下面的 ShellCmdDEF。

```
typedef BOOL (*ShellCmdFN) (struct ShellCmdDEF* pCmd, uint16_t u16State);

typedef struct
{
    uint32_t    u32Flags;
    uint16_t    u16State;
    ShellCmdFN  pCmdFN;

} ShellCmdDEF; 
```

编译器因此抱怨......

Shell.h:57:71: 警告: 'struct ShellCmdDEF' 在参数列表中声明 [默认启用] Shell.h:57:71: 警告: 它的范围只是这个定义或声明，这可能不是你想要的 [默认启用]

当然代码有效，我已经这样做了多年，但现在它是为了符合 Misra/DO170B，我需要摆脱警告。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T15:29:02.603

在函数指针类型之前声明结构：

```
struct ShellCmd;

typedef BOOL (*ShellCmdFN) (struct ShellCmd* pCmd, uint16_t u16State);

typedef struct ShellCmd
{
    uint32_t    u32Flags;
    uint16_t    u16State;
    ShellCmdFN  pCmdFN;
} ShellCmdDEF; 
```

# ruby-on-rails - Rails 路由域通配符

> ID：15053242
> 
> 赞同：1
> 
> 时间：2013-02-24T15:27:39.830
> 
> 标签：ruby-on-rails, routing, subdomain

我正在尝试基于[此 railscast](http://railscasts.com/episodes/221-subdomains-in-rails-3)为 Rails 制作域通配符路由。但我想在本机路由中制作与“范围”功能一样好的功能，例如

```
 domain ':city_id.mysite.com' do
    root :to => "cities#test"
  end 
```

恕我直言，它看起来比正则表达式更漂亮，但是我懒得自己为“：city_id.mysite.com”之类的路径编写解析器。我相信它已经存在于rails内部的某个地方，但我在源代码中找不到它。为这条路线使用 :constraints、:as、:scope 和其他配置也很好，但 htis 是可选的。

现在我的代码看起来像：

```
module Domain
  class Match
    def initialize(wildcard, *options)
      @wildcard = wildcard
    end

    def matches?(request)
      request.path_parameters[:city_id] = request.subdomain #to replace this with setting parameters from wildcard, :default and so on
      request.subdomain.present? #to replace this string with wildcard-match condition
    end
  end

  module Mapper
    def domain(wildcard='')
      constraints(Domain::Match.new wildcard) { yield }
    end
  end
end

ActionDispatch::Routing::Mapper.send(:include, Domain::Mapper) 
```

所以，我只能为子域创建路由

```
 domain 'subdomain' do
    root :to => "cities#test"
  end 
```

而且我只能在控制器中获得硬编码参数“city_id”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:28:16.563

好的，也许对某人有用。我发现，Journey::Path::Pattern 可以用于此。添加到初始化程序：

```
 @pattern = Journey::Path::Pattern.new(
      Journey::Router::Strexp.compile(path, constraints, ['.'])
  ) 
```

在检查时 -

```
 match_data  = @pattern.match(request.host)
  return false if match_data.nil? 
```

# css - CSS 列布局的列数不正确

> ID：15053248
> 
> 赞同：4
> 
> 时间：2013-02-24T15:28:23.797
> 
> 标签：css, responsive-design, css-multicolumn-layout

我正在尝试使用列进行响应式布局，但在某些情况下，它们的数量正在变化。我已经设置`column-count:3`了，但是当我有 4 个 div 时，它们的位置是 2x2 而不是 3x1。

当我有 7 列时会发生同样的错误，依此类推。

```
#content {
    width: 980px;
    height:1000px;
    position:relative;
    margin: 0 auto 0 auto;
    background-color:white;
    max-width: 980px;
}

#columns {
    font-size:1em;
    -webkit-column-count: 3;
    -webkit-column-gap: 0.625em;
    -webkit-column-fill: balance;
    -moz-column-count: 3;
    -moz-column-gap: 0.625em;
    -moz-column-fill: balance;
    column-count: 3;
    column-gap: 0.625em;
    column-fill: balance;
}

.news {
    margin-bottom:0.938em;
    display: inline-block;
    background: blue;
    -webkit-column-break-inside: avoid;
    -moz-column-break-inside: avoid;
    column-break-inside: avoid;
    padding: 0.625em;
}

.newsheader {
    width:100%;
    padding-bottom: 0.75em;
}
```

```
<div id="wrapper">
    <div id="content">
        <div id="columns">
            <div class="news">
                <p class="newsheader">Lorem ipsum dolor sit amet...</p> <span class="newscontent">Lorem ipsum dolor sit amet...</span>
            </div>
            <div class="news">
                <p class="newsheader">Lorem ipsum dolor sit amet...</p> <span class="newscontent">Lorem ipsum dolor sit amet...</span>
            </div>
            <div class="news">
                <p class="newsheader">Lorem ipsum dolor sit amet...</p> <span class="newscontent">Lorem ipsum dolor sit amet...</span>
            </div>
            <div class="news">
                <p class="newsheader">Lorem ipsum dolor sit amet...</p> <span class="newscontent">Lorem ipsum dolor sit amet...</span>
            </div>
        </div>
    </div>
</div>
```

这是一个 JSFiddle 演示：http: [//jsfiddle.net/BmG44/](http://jsfiddle.net/BmG44/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T16:44:12.147

**平衡柱**

这是我在 FF、Chrome 和 Opera 中观察到的行为：

```
1 element:    1 0 0
2 elements:   1 1 0
3 elements:   1 1 1

4 elements:   2 2 0   (expected: 2 1 1)
5 elements:   2 2 1
6 elements:   2 2 2

7 elements:   3 3 1   (expected: 3 2 2)
8 elements:   3 3 2
9 elements:   3 3 3 
```

对于 4 和 7 个元素，浏览器选择平衡前 2 列，而不是将元素分散到尽可能多的列中。

**元素的顺序**

列平衡时按顺序填充。换句话说，如果将 8 个元素添加到 3 列，则这些列将被填充，如下所示：

```
1    4    7 
2    5    8
3    6 
```

...而不是像这样：

```
1    2    3 
4    5    6
7    8 
```

[演示](http://jsfiddle.net/ZQjVS/1/)（在 FF、Chrome、Opera 中测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:54:41.413

您只是没有足够的内容来制作第 3 列。添加更多新闻元素，第三个出现：

[http://jsfiddle.net/BmG44/10/](http://jsfiddle.net/BmG44/10/)

该规范有这样的说法`column-count`：

> 描述了元素内容将流入的最佳列数。值必须大于 0。如果 'column-width' 和 'column-count' 都具有非自动值，则整数值描述最大列数。

[http://www.w3.org/TR/css3-multicol/#column-count](http://www.w3.org/TR/css3-multicol/#column-count)

我可以看到分阶段中没有任何内容表明指定 3 列意味着您将获得 3 列。如果不是得到 2 列内容和 1 个空列，而是得到 2 列并且没有空白空间，那就太好了。

此外，避免中断的正确属性名称是`break-inside`，尽管一些浏览器仍然接受`column-break-inside`（我认为 Webkit 根本不尊重新名称）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-14T16:13:02.720

我对五个元素的列表有同样的问题。以防万一有人需要它，解决这个问题的一个丑陋的技巧是计算列表的元素，如果它们是五个，在第四个元素之后添加一个额外的空项目。

# python - python如何解析和评估这些程序？

> ID：15053252
> 
> 赞同：-1
> 
> 时间：2013-02-24T15:28:36.127
> 
> 标签：python

在我们开始执行程序逻辑之前，看到解释器没有审查所有符号，我有点困惑。

例如，在此清单中：

```
def func_twice(f, x):
     f(f(x))

def square(x):
   return x * x

result = func_twice(square,2) 
```

**在运行时评估之前，**结果在全局框架中仍然不可见。****

 **在这个：

```
def f(x, y):
   return g(x)

def g(a):
   return a + y

f(1, 2) 
```

**y**在被评估之前没有经过语法检查。

如果有人说，这是由于解释性语言的性质，就是这样，如何用python编写企业应用程序，它可能有许多程序员引入的此类错误，直到测试才能恢复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:54:31.683

这是因为 python 没有变量声明。在这段代码中，我们在声明函数时不知道是否`y`存在`g`：

```
def f(x, y):
   return g(x)

def g(a):
   return a + y

y = 3
f(1, 2) 
```

仅在调用时`g`对其进行检查，因为在此之前无法知道

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:54:47.107

`func_twice`没有返回`f(f(x))`;的值 它`None`在没有明确的 return 语句的情况下返回。你要

```
def func_twice(f, x):
    return f(f(x)) 
```**

# jpa - CRUD 模块 玩！1.2.4

> ID：15053253
> 
> 赞同：0
> 
> 时间：2013-02-24T15:28:38.477
> 
> 标签：jpa, playframework, crud

我正在用 Play 开发一个网络应用程序！框架（1.2.4）。我已成功导入 CRUD 模块，并将 MySQL 数据库与 JDBC 连接起来。我创建了这样的模型：

```
@Entity

public class MyEntity extends Model {

    @Id
    @GeneratedValue (strategy=GenerationType.IDENTITY)
    public int id;

    public String name;
    public String phone;
    public String web;
    public String address;

    public MyEntity (String name, String phone, String web, String address) {
        this.name=name;
        this.phone=phone;
        this.web=web;
        this.address=address;
    }
} 
```

在`localhost:9000/admin`管理 CRUD 默认面板中，我尝试添加 MyEntity 的新对象，但不起作用：

```
PersistenceException occured : org.hibernate.exception.GenericJDBCException: could not insert: [models.MyEntity]

LogFail: object.save() (around line 152) 
```

在我的 MySQL 数据库中，我有一个名为 MyEntity 的表，其中包含 5 个字段：

```
id INT (PK, NotNull, AUTO_INCREMENT);  
name VARCHAR;  
phone INT;  
web VARCHAR;  
address VARCHAR 
```

不知道为什么它不起作用。我知道 JPA 使用自动生成的 id 字段，但我希望自动生成的 id 将是 MyEntity id 字段。

日志说：

```
[...]Caused by: java.sql.SQLException: Field 'id' doesn't have a default value. 
```

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:57:52.550

模型已经有一个 ID。

如果您想使用自己的 Id，则应改为扩展 GenericModel。

# visual-studio-2012 - 通过 nuget.org 服务器安装或更新时出错

> ID：15053254
> 
> 赞同：0
> 
> 时间：2013-02-24T15:28:41.863
> 
> 标签：visual-studio-2012, nuget

我得到一个 404 用于从这个 url 更新或安装 Nuget 包

[http://nuget.org/api/v2/](http://nuget.org/api/v2/)

这是最近的事。它首先发生在我安装了最新的 2012.2 更新。我卸载了它。但仍然有同样的问题。此处的这些其他问题会出现相同的错误，但它们都涉及自定义托管服务器而不是 nuget.org。

[NuGet - 安装单个包报告“远程服务器返回错误：（404）未找到。”](https://stackoverflow.com/questions/7407799/nuget-installing-individual-packages-reporting-the-remote-server-returned-an?rq=1) 和 [NuGet 2.2.3 扩展问题。无法连接到服务器？](https://stackoverflow.com/questions/14689747/nuget-2-2-3-extention-problems-cannot-connect-to-server) 在使用 vs2010 的不同机器 vista 上，这是我得到的错误成功安装“jQuery 1.9.1”。执行脚本文件'C:\Development\XXXXMVC2\packages\jQuery.1.8.3\Tools\uninstall.ps1'。安装失败。回滚... 拒绝访问路径“C:\Development\XXXXMVC2\packages.config”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:24:25.040

好的，问题是 TFS 服务器已关闭。我知道这一点，因为当我在工作区外的另一个目录中工作时，它很好。呃。现在，当本地工作区关闭时，您如何在本地工作区中使用 TFS

# objective-c - 在同一个 Storyboard 上加载 UIViewController

> ID：15053255
> 
> 赞同：0
> 
> 时间：2013-02-24T15:28:42.207
> 
> 标签：objective-c, uinavigationcontroller, storyboard

我正在尝试在同一个情节提要上加载 UIViewController，我为视图控制器提供了情节提要 ID、恢复 ID（与情节提要 ID 相同）和视图控制器标题为“故障”。

我有一个注册为 getStarted 的操作，我在其中运行以下代码，我还导入了我想使用 Get Started 按钮在视图控制器中加载的视图控制器

```
#import "BreakdownViewController.h" 
```

'

```
- (IBAction)getStarted:(id)sender {
    NSLog(@"Yes");
    BreakdownViewController *controller = [[BreakdownViewController alloc] initWithNibName:@"breakdown" bundle:nil];
    [self.navigationController pushViewController:controller animated:YES];
} 
```

是的注销，但视图控制器不加载。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:33:43.800

视图未加载，因为您试图从 nib 文件而不是情节提要加载它。我假设这是可以正确加载`BreakdownViewController`的子类或控制器。`UIViewController`将您的代码更改为此。

```
 // You could change `BreakdownViewController` to `UIViewController` if it doesn't work with it.
  // iOS 6.0 and above.
  BreakdownViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"breakdown"];
  [self presentViewController:controller animated:YES completion:nil]; 
```

由于不推荐使用方法，您应该真正使用上面的代码，但您也可以这样做。

```
 // iOS 5.0
   BreakdownViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"breakdown"];
   [self presentModalViewController:controller animated:YES]; 
```

您还可以为此添加一些过渡动画，也可以在下面添加以下`presentModalViewController`行`presentViewController`

```
 [controller setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal]; 
```

您也可以替换 'presentModalViewController' 或`presentViewController`行

```
 [self.navigationController pushViewController:controller animated:YES]; 
```

**编辑**

用户使用上面提供的代码后，出现错误

```
2013-02-24 16:08:14.517 BudgetMe[1300:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSCFString stringByAppendingString:]: nil argument' *** First throw call stack: (0x1cac012 0x10e9e7e 0x1cabdeb 0xaf87d5 0xddba 0x10f1c7 0x10f232 0x11ac25 0x31a3a3 0x117ee3 0x118167 0x312c 0x10fd705 0x312c0 0x31258 0xf2021 0xf257f 0xf16e8 0x60cef 0x60f02 0x3ed4a 0x30698 0x1c07df9 0x1c07ad0 0x1c21bf5 0x1c21962 0x1c52bb6 0x1c51f44 0x1c51e1b 0x1c067e3 0x1c06668 0x2dffc 0x252d 0x2455) 
```

当它到达`[self.navigationController pushViewController...]`/`[self presentViewController...]`我相信这是由于用户试图推送/呈现的视图控制器上的问题而引发的错误。我相信这是因为当这行代码被命中时，它会尝试像`viewDidLoad`在移动到实际视图控制器之前那样运行方法，所以如果抛出错误，它会显示为好像它在这一行上。找出这一点的最佳方法是充分利用断点。

我在[NSRangeException 之前遇到过这个问题，原因是：'*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array' 当呈现视图控制器时](https://stackoverflow.com/questions/11029469/nsrangeexception-reason-nsarraym-objectatindex-index-0-beyond-bou)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:35:30.860

你可能想用这个：

```
[self.storyboard instantiateViewControllerWithIdentifier:@"breakdown"]; 
```

而不是 alloc initWithNibName。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-24T18:08:05.203

如果我正确理解了这个问题，您是否在与您尝试推送的故事板相同的情节提要中定义了一个视图控制器？你为什么不使用segue？创建从源到目标的推送序列，并让按钮触发该序列。

一旦 segue 连接好，您可以通过以下方式以编程方式调用推送：

```
[self performSegueWithIdentifier:@"breakdownSegue"]; 
```

但是，如果您将 segue 直接连接到要调用 segue 的按钮，则可以跳过该步骤。

如果问题是 BreakdownViewController 是在外部 .xib 中定义的，并且您将其添加到此情节提要中，只需从情节提要场景中删除视图，它将从 .xib 加载视图。

# javascript - 彗星编程实现

> ID：15053258
> 
> 赞同：2
> 
> 时间：2013-02-24T15:29:01.723
> 
> 标签：javascript, asp.net, ajax, comet

我想设计一个类似于 Google Docs 的网络应用程序。即我需要一个开放的连接，以便客户端知道其他客户端正在编辑什么，然后也可以进行编辑。Comet Programming 是正确的方法吗？

由于我是 Web 开发的新手，而且我还在学习 Web 技术，你能推荐我应该从哪里开始吗？我正在学习 JavaScript、Ajax 和 ASP.NET。这些对于这种类型的应用程序是否足够（连同 HTML 和 CSS）？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:34:24.497

是的，这些技能就足够了，但是 Comet 是一种基本上尝试长时间保持连接打开以便服务器可以在必要时发送命令的技术。在当今最引人注目的 WebSockets 中，有可用的双向通信方法，但并非所有浏览器都实现了这一点。我建议继续使用 ASP.NET、JS、HTML 和 CSS，并开始研究将 SignalR ( [https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR) ) 用于实时网络，因为它提供了轻松使用所需的抽象实时连接。

# php - 为什么打开 Superglobals 是一件很糟糕的事情？

> ID：15053262
> 
> 赞同：-1
> 
> 时间：2013-02-24T15:29:16.473
> 
> 标签：php, superglobals

我已经通过搜索栏搜索了 Stack Overflow，只有 4 个帖子指出这些是不好的事情。

为什么没有完整的理由？

所以我发布这个问题是为了找出以下内容：

1.  为什么要做这些坏事？他们也打开你的服务器有什么风险？

2.  如果 PHP 中的超全局变量如此落后，为什么它们仍然存在？

3.  它们可以用来做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:34:42.750

[Superglobals](http://php.net/manual/en/language.variables.superglobals.php) *还*不错，而且它们*总是*处于开启状态。没有它们，您将无法访问诸如`$_GET`or之类的东西`$_POST`。

我怀疑您在谈论[Register Globals](http://php.net/manual/en/security.globals.php)，它在 PHP 5.3 中已被弃用并在 PHP 5.4 中被删除。他们无疑是坏的。它们允许任何人在您的代码中实例化任意全局变量。有很多关于它们为什么不好的信息，直到文档中包含它们自己的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:49:37.377

[`register_globals`](http://php.net/register_globals)*自己*都不是问题。

它的组合：

*   在全局范围内执行所有代码

*   从不初始化变量

*   然后从外部输入（register_globals）出现随机变量。

可悲的是，这是常见的情况以及它们在 PHP3/PHP4 时代的使用方式。这就是为什么过度概括的模因“register_globals are bad”实际上是正确的。

您可以在启用它们的情况下编写完全理智的代码，但这是一个不必要的陷阱。

# android - 谷歌上的同一个应用程序具有不同的 api 级别

> ID：15053266
> 
> 赞同：0
> 
> 时间：2013-02-24T15:29:41.133
> 
> 标签：android, api, upload

我已经从 api 11 开发了一个应用程序，所以 Honeycomb、ICS 和果冻梁工作正常。我决定这样做是因为许多新方法已被弃用，并且自 ICS 以来视觉外观更好。（它已经在谷歌播放）。

但现在我决定为 Gingerbeard 开发应用程序，所以我需要帮助来考虑最短的方法。

实际上，该应用程序被定义为：

```
<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="15"/> 
```

*   第一个问题：我想用 minsdk:8 和 maxsdk 10 开发另一个应用程序，以便 GB 的用户找到新的应用程序，而 HNC、ICS 和 JB 的用户找到已经在 google play 上的应用程序。因为如果在新应用程序中我定义 maxsdk 10 ICS 的用户不会搜索它，不是吗？

*   第二：如果第一个问题有效，我可以调用具有相同包名的项目吗？也许这个答案是否定的！但没关系，我可以更改包名称，当我将应用程序上传到谷歌播放应用程序名称时，大问题就来了。

    那么在这种情况下，我可以将相同的名称放在不同的包中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:46:38.183

您正在寻找的是[Multiple APK Support](http://developer.android.com/google/play/publishing/multiple-apks.html)。

回答您的问题：

1 - 是的，Google Play 过滤器会根据`sdkVersion`.

2 - 不仅您需要使用相同的包名，您还必须遵守其他[规则。](http://developer.android.com/google/play/publishing/multiple-apks.html#Rules)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:57:36.807

如果您真的想发布多个 APK，请执行以下操作：[为不同的 API 级别创建多个 APK](https://developer.android.com/training/multiple-apks/api.html)

但是，我不确定它是否是您的最佳解决方案。您可以保留一个 APK，只需在 和 中添加自定义布局和可绘制`res/drawable-vX`对象`res/layout-vX`。

*   [资源概览](https://developer.android.com/guide/topics/resources/overview.html)
*   [支持不同平台版本](https://developer.android.com/training/basics/supporting-devices/platforms.html)

# vb.net - 在现场使用变量

> ID：15053270
> 
> 赞同：0
> 
> 时间：2013-02-24T15:30:29.777
> 
> 标签：vb.net, winforms, richtextbox

我试图在单击按钮时运行一系列方程式，然后在富文本框中显示行。

```
Private Sub SubmitButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles SubmitButton.Click
    MessageBox.Show("Number of Estimates:$" & vbCrLf & "Grand Total of Estimates:$" & vbCrLf & "Average of Estimates:$")
    Estimates = +1
    SummaryRichTextBox.Text = "Carpet Waste in Sq. Yards =" & vbCrLf & "Underlay Waste in Sq. Yards=" _
& vbCrLf & "TackStrip Waste in Ft. =" & vbCrLf & "" & vbCrLf & "Number of Estimates =" _
& vbCrLf & "Accumulated Grand Total of Estimates ="
End Sub 
```

这会显示句子部分，但我只是想知道如何让它在 = 之后插入标签的值

```
ex.
Label1= 10
Carpet Waste in Sq. Yards = (label1 value here) 
```

我正在研究我的第二个程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:12:14.830

您只需要使用`Text`标签的属性：

```
"Carpet Waste in Sq. Yards = " &  label1.Text 
```

# cocoa - 从 Cocoa 应用程序中执行外部应用程序

> ID：15053272
> 
> 赞同：0
> 
> 时间：2013-02-24T15:30:50.957
> 
> 标签：cocoa, plugins

首先，让我明确一点，我需要它**并不**简单（显然我想要的*不仅仅是*执行另一个应用程序）。

**我需要的 ：**

*   使用外部应用程序的功能扩展我的主应用程序（类似于“插件”）
*   这些外部插件必须与主应用程序分开（在代码/实现方面）
*   外部插件必须能够无缝集成到主应用程序中
*   外部应用程序不应*被*用户视为“外部”的东西
*   实施*必须*遵守 App Store 条款和沙盒指南。

**示例** *（尽管这个想法在我脑海中并不是 100% 清楚）*：

*   主机应用程序启动
*   外部应用程序有一个窗口（和它自己的功能）
*   执行外部应用程序后，它的窗口现在变成主机应用程序的“工作表”

我不知道我所描述的是否可行。但是，我仍然需要听取您对此的意见。我已经对此事进行了大量研究，尽管我即将建立整个概念，即通过外部脚本（通过 php、python、AppleScript 等获取输入并提供一些输出）使主机应用程序可扩展。 .)，这不包括“插件”有自己的用户界面的情况。

那么，有什么想法吗？（一个例子或一些具体的参考指向我将是理想的......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:09:21.987

有一个新的 API 可以完全满足您的需求：

> XPC 服务 API 是 libSystem 的一部分，它为与 Grand Central Dispatch (GCD) 和 launchd 集成的基本进程间通信提供了一种轻量级机制。XPC 服务 API 允许您创建轻量级帮助工具，称为 XPC 服务，代表您的应用程序执行工作。

[守护进程和服务编程指南](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingXPCServices.html%20%22Daemons%20And%20Services%20Programming%20Guide)

[WWDC 2012 视频](https://developer.apple.com/videos/wwdc/2012/)中对此进行了很好的讨论。

你所描述的大部分内容确实是可能的——而且不一定非常困难。但是，您的“示例”并不像您自己所说的那样完全连贯。您希望第二个应用程序是独立的，但您不希望它看起来是“外部的”；这些力量并不完全可调和。出于显而易见的原因，您不太可能做的是接管已经独立运行的应用程序。但是您可以开始自己的流程。

通常的架构是有几个守护进程或服务为您执行任务，以及一个控制进程，它还处理所有用户界面。如上所述，邮件以这种方式工作。

# javascript - iOS WebView Javascript

> ID：15053273
> 
> 赞同：1
> 
> 时间：2013-02-24T15:31:00.010
> 
> 标签：javascript, html, ios, objective-c, xcode

好的，我正在为 iPhone 制作应用程序（仍在学习，了解 Objective-C 和 Xcode），并且进展顺利。我正在制作的应用程序已经为 Android 制作。有一部分应用程序正在为 Android 打开“硬编码”网页，这就是我遇到问题的部分。该网页上的 JavaScript 的部分代码如下所示：

```
<a onclick="Android.setCategory('US');" class="navigator_item cat_US">US</a> 
```

这是我唯一感兴趣的事情。例如，我只想将“onclick”部分作为字符串获取。因此，每当单击该部分时，我都想将其作为字符串获取，以便之后我可以执行自己的逻辑，调用某些方法或任何东西。我尝试使用

```
shouldStartLoadWithRequest 
```

但我无法在点击时注销任何内容。我在这里做错了吗？也许我缺乏javascript知识是个问题，而且我不懂基础知识，但我认为应该可以将那部分从onclick引号转换为字符串。这就是我所需要的。

**我忘记了一件非常重要的事情。我不能触摸那个用于 Android 的 javaScript，这就是 Android 应用程序现在的工作方式。这就是为什么我想做这个“字符串”的事情。**

我可以用 stringByEvaluatingJavaScriptFromString 和 document.getElementsByClassName JavaScript 方法做些什么吗？

干杯 peps :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:00:10.617

如果您可以自由更改`onclick`目标，则可以执行以下操作：

```
<a onclick="setCategory('US');">US</a> 
```

在您的网页中，然后为您的 UIWebView 执行以下操作：

```
[uiWebView stringByEvaluatingJavaScriptFromString:  @"function setCategory(category) {alert("Category is " + category);};"]; 
```

如果您有想要在设置类别时执行的 iOS 逻辑，我使用的技术是自定义 URL 方案。例如，setCategory 可能是：

```
setcategory://US/ 
```

您可以将 JavaScript 更改为

```
[uiWebView stringByEvaluatingJavaScriptFromString:  @"function setCategory(category) {window.location = 'setcategory://'+category+'/';};"]; 
```

然后在你的`shouldStartLoadWithRequest`方法中：

```
 NSString* scheme = [[request URL]scheme];
  NSString* host   = [[request URL]host]; // "host" is actually the category

  if ([scheme isEqualToString:@"setcategory"]) {
    // Do so logic to set the category
  } 
```

# delphi - 如何使用下拉列表创建 HKey 属性？

> ID：15053274
> 
> 赞同：0
> 
> 时间：2013-02-24T15:31:15.017
> 
> 标签：delphi, delphi-2010

使用 Delphi 2010，我正在创建一个具有 Registry Key 属性的组件。
我希望该属性显示值的下拉列表。我在下面的内容仅显示数值。

```
published
    property Key: HKey read FKey write SetKey Default HKEY_LOCAL_MACHINE; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T16:05:27.093

除了 TLama 的回答，我认为最德尔福的方式就是简单地做

```
type
  TRegistryRootKey = (rkClassesRoot, rkCurentUser, rkLocalMachine,
    rkUsers, rkPerformanceData, rkCurrentConfig, rtDynData);

...

published
  property RootKey: TRegistryRootKey read FRootKey write FRootKey
    default rkLocalMachine; 
```

当该使用该值时，请执行以下操作

```
procedure TMyClass.DoSomething;
const
  RootKeys: array[TRegistryRootKey] of DWORD = (HKEY_CLASSES_ROOT,
    HKEY_CURRENT_USER, HKEY_LOCAL_MACHINE, HKEY_USERS, HKEY_PERFORMANCE_DATA,
    HKEY_CURRENT_CONFIG, HKEY_DYN_DATA);
begin

  Windows.SomeAPIFunction(RootKeys[FRootKey]);

end; 
```

当然，`RootKeys`如果您需要在多个方法中使用该常量，则可以将其设为类的私有常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:44:54.023

如果要`HKEY`用作属性数据类型，则必须编写自定义属性编辑器，以使属性在设计时显示人类可读名称的下拉列表。安德烈亚斯的回答是一个更好的选择。

# c# - 在 Windows 移动应用程序中检测传入的短信

> ID：15053282
> 
> 赞同：0
> 
> 时间：2013-02-24T15:31:47.133
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我希望我的应用程序在用户收到短信时做出响应。该应用程序不需要访问消息的内容，它应该只检测是否收到了短信。我用谷歌搜索了这个问题，但找不到任何相关资源。谁能帮我解决这个问题？Windows Phone 应用程序中是否有这样的功能？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:04:45.983

在对象浏览器中查看...

我发现了这个：Windows.Phone.Networking.NetworkOperators.SmsInterceptor

MSDN：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj585389%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj585389%28v=vs.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:28:59.163

这在 Windows Phone 7 上是不可能的。Tiz 推荐的 Windows.Phone.Networking.NetworkOperators.SmsInterceptor 声明它适用于 Windows Phone 8。

# c# - 出现模态对话框

> ID：15053283
> 
> 赞同：-3
> 
> 时间：2013-02-24T15:32:01.273
> 
> 标签：c#, winforms

在我的 GUI 中，我希望当我单击一个按钮时，一个模式对话框出现在我的 GUI 前面，带有`msg "busy"`. 我该怎么做？

此外，模态对话框不应该有关闭它的选项（右上角没有十字按钮）。我想在按下按钮 2-3 秒后以编程方式关闭它

PS：这是我目前所拥有的

```
Form frm1 = new Form();
frm1.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedSingle;
frm1.ClientSize = new System.Drawing.Size(200, 200);
frm1.ControlBox = false;
frm1.ShowDialog(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:39:14.613

如果您不希望标题栏位于顶部，请使用下面的代码（请记住查看 MSDN 以获取有关每个代码的更多信息）

```
Form f = new Form();
f.FormBorderStyle=FormBorderStyle.None; //no border frame, close button etc gone!
f.ShowDialog(); // Modal dialog 
```

如果您只想隐藏右上角的所有按钮：

```
f.ControlBox = false; 
```

# python - Pythonic API 设计

> ID：15053284
> 
> 赞同：2
> 
> 时间：2013-02-24T15:32:31.237
> 
> 标签：python

我的目标是设计一个允许客户端执行以下操作的 Python API：

```
md = MentalDisorders()
print(md.disorders['eating']) 
```

获取与饮食有关的疾病列表。

这是我的尝试，考虑到 FAKE_DATABASE 将是一个真正的数据库，我只是将这个问题集中在界面的“感觉”/“可用性”上，特别是在我不熟悉的 Python 上下文中：

```
#!/usr/bin/env python2.7

FAKE_DATABASE = {
  'anxiety': ['phobia', 'panic'],
  'personality': ['borderline', 'histrionic'],
  'eating': ['bulimia', 'anorexia'],
}

class MentalDisorders(object):
  # ... some methods and fields that make it worthwhile having a container class ...
  class DisorderCollection(object):
    def __getitem__(self, key):
      if key in FAKE_DATABASE:
        return FAKE_DATABASE[key]
      else:
        raise KeyError('Key not found: {}.'.format(key))
  def __init__(self):
    self.disorders = self.DisorderCollection()

def main():
  md = MentalDisorders()
  print(md.disorders['anxiety'])
  print(md.disorders['personality'])
  print(md.disorders['eating'])
  try:
    print(md.disorders['conduct'])
  except KeyError as exception:
    print(exception)

if __name__ == '__main__':
  main() 
```

1.  有一个`DisorderCollection`可取的吗？
2.  应该`DisorderCollection`定义在里面`MentalDisorders`还是外面呢？
3.  `self.disorders`通过`self.DisorderCollection`正确的实例化？
4.  `DisorderCollection`要用作字段的 a 的实例化是否应该在 的`__init__`方法中发生`MentalDisorders`？
5.  是否应该根本不存在字段实例，`DisorderCollection`并且将上述内容实现为从`__getattribute__`数据库中的键查找的简单“转发调用”？在这种情况下，一个简单的`md.disorders`（没有指定密钥）会返回什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:48:06.057

我可以这样写：

```
class DisorderCollection(object):
    def __getitem__(self, key):
        if key in FAKE_DATABASE:
            return FAKE_DATABASE[key]
        else:
            raise KeyError('Key not found: {}.'.format(key))

class MentalDisorders(DisorderCollection):
    # ... some methods and fields that make it worthwhile having a container class ...

class PhysicalDisorders(DisorderCollection):
    # Unless you plan to have multiple types of disorder collections with different methods, I struggle to see a point in the extra layer of classes.

def main():
    md = MentalDisorders()
    print(md['anxiety'])
    print(md['personality'])
    print(md['eating'])
    try:
        print(md['conduct'])
    except KeyError as exception:
        print(exception)

if __name__ == '__main__':
    main() 
```

# java - 为什么 Java 中的 Switch 语句可以包含一个 FINAL 变量作为 CASE？

> ID：15053290
> 
> 赞同：5
> 
> 时间：2013-02-24T15:32:47.450
> 
> 标签：java, variables, switch-statement, case, final

为什么 Java 中的 Switch 语句可以包含一个 FINAL 变量作为 CASE？##

在我检查的JDK7中，无法将值重新分配给最终变量，如下所示。但是，为什么最终变量“x”可以包含在一个案例的 Switch 语句中，尽管最终变量“x”的值不能被重新分配？

为什么即使 Oracle 定义 Java 编译器将 final 变量作为初始化值而不是变量名，也可以这样做？[http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)

请告诉我这是否是 Java 编译器的技术错误，或者在 Switch 语句中检查最终变量的大小写是否存在异常或特殊用途？

```
class Example{
    public static void main(String args[]){
        final int x=100;
        //x=200;    //error: cannot assign a value to final variable x

        //The below piece of code compiles
        switch(x){
            case 200: System.out.println("200");
            case 300: System.out.println("300");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T15:37:41.583

这种情况怎么办？

```
public class Foo
{
    private final int x;

    public Foo(int x){this.x = x;}

    public void boo()
    {
        switch(x)
        {
            case 200: System.out.println("200");
            case 300: System.out.println("300");
        }
    }
} 
```

或者这个：

```
public static void doSomething(final int x)
{
    switch(x)
    {
        case 200: System.out.println("200");
        case 300: System.out.println("300");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T15:42:11.753

```
switch(x){
    case 200: System.out.println("200"); break;
    case 300: System.out.println("300");
} 
```

本质上意味着

```
if (x == 200)
  System.out.println("200");
else if (x == 300)
  System.out.println("300"); 
```

**它只是比较，而不是分配**，所以`x`不能修改的事实并不重要。

从技术上讲，您的示例会有所不同（因为您没有`break`）：

```
if (x == 200)
  System.out.println("200");
if (x == 200 || x == 300)
  System.out.println("300"); 
```

或类似的东西。

`x`永远不会`200`或`300`不会使代码无法编译的事实。然而，它可能允许 Java 优化 switch 语句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T15:35:34.300

好吧，您可以在函数中传递`final`参数：

```
//the function doesn't know what x  value is,
//but it knows that it can't modify its value
public someFunction(final int x) {

    x += 1; //compiler error
    switch(x) {
        case 200: System.out.println("200");
            break;
        case 300: System.out.println("300");
            break;
    }
}

//the function doesn't know what x value is,
//but it knows that it can modify it
//for internal usage
public someOtherFunction(int x) {

    switch(x) {
        case 200:
            x += 200;
            break;
        case 300:
            x += 300;
            break;
    }
    System.out.println(x);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T15:40:14.963

为什么您希望`final`修饰符有所作为？无需将任何内容分配给正在打开的值。

您确定您了解该`switch`语句的作用吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T16:08:25.953

我认为删除或警告`switch`在编译时已知的-statements 总是被评估为相同情况的优化在编译器中根本没有实现，因为这是一种罕见的情况。

以下代码也可以在没有警告或错误的情况下编译。

```
 switch(3){
    case 2: 
      System.out.println("two"); 
      break;
    case 3: 
      System.out.println("three"); 
      break;
  } 
```

编译器对`case 2:`部分中无法访问的代码发出警告会很好，但没有实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T20:32:53.257

除了具有最终参数之外，最终局部变量还可以保存在编译时未知的值：

```
public static void main(String args[]){
    final int x;

    if (someMethod())
      x = 200;
    else
      x = 300;

    switch(x){
        case 200: System.out.println("200");
        case 300: System.out.println("300");
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-25T23:52:32.477

大多数编译器使用优化算法优化代码，这些优化算法依赖于启发式（基于经验的技术）和近似值。下面的代码将进入控制流分析。我运行了很多程序示例

案例 A) if-else with final 变量 - 编译器抛出警告死代码。生成的字节码没有任何 if-else 语句。

```
public static void main(java.lang.String[])

Stack=1, Locals=2, Args_size=1
0:  iconst_0
1:  istore_1
2:  return
LineNumberTable: 
line 42: 0
line 54: 2

LocalVariableTable: 
Start  Length  Slot  Name   Signature
 0      3      0    args       [Ljava/lang/String;
 2      1      1    selection       I

 } 
```

案例 B）没有最终变量的 if-else - 没有编译器错误，但也没有代码优化。

```
 final int selection i=100; //case A
      //int selection i=100; //case B

     if(selection==1){
         System.out.println("Hi");
  }else if(selection==2){

  }else{

   } 
```

案例 C) if-else 带有最终变量，但 if-else 语句放在另一种方法中说

```
 computeIfLese(int selection) 
```

*   没有进行代码优化，因为该方法可以被具有不同参数值的其他实例调用（显然）。

由于编译器优化技术是基于启发式的，所以会出现这种情况，但谁会想到最罕见的情况。

等待 Java 众神的评论... :)

这是 Compiler 没有对此进行优化的活生生的证明。检查标签 5：

```
public static void main(java.lang.String[]);
Code:
 Stack=2, Locals=2, Args_size=1
0:  bipush  100
2:  istore_1
3:  bipush  100
5:  lookupswitch{ //2
    200: 32;
    300: 40;
    default: 48 }
32: getstatic   #16; //Field java/lang/System.out:Ljava/io/PrintStream;
35: ldc #22; //String 200
37: invokevirtual   #24; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
40: getstatic   #16; //Field java/lang/System.out:Ljava/io/PrintStream;
43: ldc #30; //String 300
45: invokevirtual   #24; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
48: return
  LineNumberTable: 
line 11: 0
line 15: 3
line 17: 32
line 18: 40
line 21: 48

LocalVariableTable: 
Start  Length  Slot  Name   Signature
0      49      0    args       [Ljava/lang/String;
3      46      1    selection       I

StackMapTable: number_of_entries = 3
 frame_type = 252 /* append */
 offset_delta = 32
 locals = [ int ]
  frame_type = 7 /* same */
 frame_type = 7 /* same */

 } 
```

# erlang - Eratosphenes 算法的筛选

> ID：15053304
> 
> 赞同：0
> 
> 时间：2013-02-24T15:34:04.327
> 
> 标签：erlang, prime-factoring

我正在尝试在erlang中实现一个eratosphenes筛子。但是我无法通过算法的第二步。我用 p 填充标记的条目，这样当我遍历列表直到找到大于 p 的值时，我就会知道它也是素数。

```
 -module(sieve).
    -export([primes/0]).

    primes() -> L = lists:seq(2,20),
    mark(L,2).

    mark(L,P) -> mark(L,P,2,[]).

    mark([],_,_,N) -> N;
    mark([_|T],P,C,N) when C =:= P -> mark(T,P,C+1,[N|[P]]);
    mark([H|T],P,C,N) -> mark(T,P,C,[N|[H]]). 
```

我也尝试过附加一个 ++ ，但这会产生相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:16:10.940

上面的代码只运行一次。

```
primes() ->
    List = lists:seq(2,100),
    mark([], List).

mark(Primes, []) ->
    lists:reverse(Primes);
mark(Primes, _List = [H| T]) ->
    mark([H | Primes], H, T, []).

mark(Primes, _P, [], NewList) -> 
    mark(Primes, lists:reverse(NewList));
mark(Primes, P, [H | T], NewList) when H rem P == 0 ->
    mark(Primes, P, T, NewList);
mark(Primes, P,[H | T], NewList) ->
    mark(Primes, P, T, [H | NewList]). 
```

即使没有反向也可以工作，但为了保持正确的顺序，我们可以做反向或 ++

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T19:54:10.413

如果您的目的是教育，将素数存储在列表中是可以的，vinod 的解决方案很好。但是如果你必须使用这个列表，那么我认为 ETS 表（有序集）可能更方便。

另一点，erathostene 算法的一个弱点是你首先创建一个巨大的列表（如果你需要很多），然后删除大部分元素。您可以轻松地将初始列表除以 2 `L = [2|lists:seq(3,Max,2)]`。您还可以在没有 2、3、5 的倍数的情况下初始化列表/表格，创建时间更短，消除时间更短。

# algorithm - 简单的 n-gram 算法

> ID：15053305
> 
> 赞同：1
> 
> 时间：2013-02-24T15:34:07.950
> 
> 标签：algorithm, string-matching, n-gram

我正在寻找一种可以在句子中找到 n-gram 的算法（或 C#、Java 源代码）。具体来说，我有 100 个单词的词汇表（w1 到 w100）和由这些单词组成的句子（s1、s2、s3 等）。

句子的长度从 1 到 100 个单词不等，单词可以按任何顺序出现在句子中（但一旦放在句子中，顺序就很重要），单词可以重复任意次数。

我正在寻找一种算法，该算法将采用阈值并返回高于阈值的句子中的 n-gram 以及出现 n-gram 的句子。

我也对一种间隙容错算法感兴趣，该算法以相同的顺序查找常用词，但两者之间有间隙。

提前致谢。我希望在 StackOverflow 的范围内清楚地说明这个问题。

# .net - Applying a global name change in Visual Studio

> ID：15053306
> 
> 赞同：0
> 
> 时间：2013-02-24T15:34:16.450
> 
> 标签：.net, visual-studio, entity-framework-5

I have recently changed my EF data model name from X to Y. Although the name change within solution explorer is visible, however, it doesn't seem to have been registered in Visual Studio 2012\. This can be diagnosed through the auto-generate context designer.cs file still identifying the model with it's old name. How can I make this name change effective or applied throughout the whole application? More clearly, how do you refactor this name to take effect globally within VS2012?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:05:58.617

You should rename the entity container name, which is in the properties of the edmx. Here's an example:

![enter image description here](../Images/a0405cd92cd3d1a7d083245cbd12fd2b.png)

As for the namespace: this is not very clear. The namespace entry of the edmx does not seem to do anything, The project's default namespace is used for generated classes. So you should change that to change the namespace of the generated code.

# javascript - JSP window.open() 函数

> ID：15053309
> 
> 赞同：0
> 
> 时间：2013-02-24T15:34:26.043
> 
> 标签：javascript, jsp

我正在创建一个 JSP 页面，其中必须打开一个包含一些内容的新窗口。例子：

```
window.open("www.stackoverflow.com"); 
```

当我们使用 Internet Explorer 浏览器时，程序会打开一个“新窗口”。当我们使用 Google Chrome 浏览器时，相同的程序会打开一个“新标签”而不是“新窗口”。这背后的问题是什么？也让我知道解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:41:05.647

请记住，首先，JSP 是在服务器端评估的，并吐出发送到浏览器的标记，`window.open()`然后在客户端执行类似（JavaScript）之类的东西。

其次，它是打开一个新选项卡还是一个新窗口（正如我的评论链接所示）取决于用户在浏览器中的偏好，因此不是您可以控制的。您应该能够在 IE 和 Chrome 中更改您自己的浏览器设置来测试这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T15:43:53.823

请注意，window.open 是 JavaScript 函数而不是 JSP，JSP 用于服务器端，JavaScript 用于客户端。

要在 chrome 中弹出一个新窗口，您必须指定新窗口的“规格”。这是一个例子。

```
window.open("www.stackoverflow.com", "", "toolbar=yes,menubar=no,resizable=yes,scrollbars=yes,width=1024"); 
```

有关“规格”的更多详细信息，请参阅 w3school [http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

希望这可以帮到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T21:03:42.417

正如所有人所说，这是一个`javascript`功能。不是jsp的。

如果您没有设置任何 ant 目标，则取决于`browser specification`.

所以，总是最好提到`target attribute`摆脱浏览器依赖。

这是 W3C 定义的目标列表。

[http://www.w3schools.com/tags/att_a_target.asp](http://www.w3schools.com/tags/att_a_target.asp)

前任：`window.open("www.stackoverflow.com","_self");//Always opens in same tab`

# python - python 3：从基于游标的列表写入文件

> ID：15053313
> 
> 赞同：0
> 
> 时间：2013-02-24T15:35:04.517
> 
> 标签：python, python-3.x

这是作业，我对 Python 还是很陌生。我编写了一个文本编辑器程序，它使用基于双行光标的列表类。我让用户打开要编辑的现有文件或新文件，并为该文件创建了一个基于光标的列表。最后，我希望用户能够将他们所做的任何更改保存回文件。我收到一些错误，不知道该怎么做。任何建议表示赞赏！

```
from cursor_based_list import CursorBasedList
from os.path import exists
import os

def main():
    def seeFile():
        """Asks the user if they want to view their file after editing, and
            if yes, prints the file without None, front, or rear."""
        seeFile = input("Would you like to see your file now? Y/N: ").upper()
        while not seeFile == "Y" and not seeFile == "N":
            print("That is not a valid choice!")
            seeFile = input("Would you like to see your file now? Y/N: ").upper()
        if seeFile == "Y":
            print()
            print(fileList)

    print()
    print("---------------------------------------------------------------------")
    print("Welcome to TextEd v.1, a friendly text editor program!")
    print()
    print("How would you like to begin?")
    print()
    print("O: Open an existing text file for editing")
    print("N: Create a new text file for editing")
    print()
    response = input("Please choose an initial option: ").upper()
    while response != "O" and response != "N":
        print("That is not a valid initial option.")
        response = input("Please choose an initial option: ").upper()
    if response == "O":
        fileName = input("Enter the file name: ")
        while not exists(fileName):
            print()
            print("File " + fileName + " does not exist!")
            fileName = input("Please enter a valid file name: ")
        myFile = open(fileName, 'r')
        data = myFile.readlines()
        fileList = CursorBasedList()
        for line in data:
            fileList.insertAfter(line)
        seeFile()
    elif response == "N":
        fileName = input("What would you like to name your file?: ")
        fileList = CursorBasedList()
        myFile = open(fileName, "w")

    print()    
    print("TextEd Menu:")
    print("---------------------------------------------------------------------")
    print()
    print("A: Insert a new line after the current line of your file")
    print("B: Insert a new line before the current line of your file")
    print("C: Display the current line of your file")
    print("F: Display the first line of your file")
    print("L: Display the last line of your file")
    print("E: Display the next line of your file")
    print("P: Display the previous line of your file")
    print("D: Delete the current line of your file")
    print("R: Replace the current line of your file with a new line")
    print("S: Save your edited text file")
    print("Q: Quit")
    while True:
        response = input("Please choose an option: ").upper()
        if response == "A":
            line = input("Enter the new line to insert after the current line: ")
            line = line + "\n" 
            fileList.insertAfter(line)
            seeFile()
        elif response == "B":
            line = input("Enter the new line to insert before the current line: ")
            line = line + "\n"
            fileList.insertBefore(line)
            seeFile()
        elif response == "C":
            line = fileList.getCurrent()
            print("The current line is:", line)
        elif response == "F":
            first = fileList.first()
            print("The first line is:", fileList.getCurrent())
        elif response == "L":
            last = fileList.last()
            print("The last line is:", fileList.getCurrent())
        elif response == "E":
            try:
                nextLine = fileList.next()
                print("The next line is:", fileList.getCurrent())
            except AttributeError:
                print("You have reached the end of the file.")
        elif response == "P":
            try:
                prevLine = fileList.previous()
                print("The previous line is:", fileList.getCurrent())
            except AttributeError:
                print("You have reached the beginning of the file.")
        elif response == "D":
            fileList.remove()
            seeFile()
        elif response == "R":
            item = input("Enter the line you would like put into the file: ")
            item = item + "\n"
            fileList.replace(item)
            seeFile()
        elif response == "S":
            temp = fileList.first()
            while temp!= None:
                result = str(temp.getData())
                myFile.write(result)
                temp = temp.getNext()
            myFile.close()
            print("Your file has been saved.")
            print()
        elif response == "Q":
            print("Thank you for using TextEd!")
            break
        else:
            print("That is not a valid option.")

main() 
```

一切都很好，除了保存。还有一点需要指出的是，当我到达 myFile.close() 时，我收到一条错误消息，指出“列表对象没有关闭属性”。

如果您想查看更多代码，请告诉我！我知道这可能不是“完美”的代码，所以请耐心等待。谢谢！

```
elif response == "S":
            myFile = open(fileName,"w")
            fileList.first()
            current = fileList.getCurrent()
            try:
                for x in range(len(fileList)):
                    myFile.write(str(current))
                    current = fileList.next()
                    current = fileList.getCurrent()
                    print(current)
            except AttributeError:
                myFile.close()
                print("Your file has been saved.")
                print() 
```

好的，我终于让它与上面的代码一起工作了。我敢肯定这可能是最丑陋的写法，但至少它有效！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:52:37.157

首先你在这里分配`myFile`：

```
 myFile = open(fileName, 'r') 
```

那时，myFile 是一个文件对象。但是，然后你这样做：

```
 myFile = myFile.readlines() 
```

现在 myFile 是一个包含文件中所有行的列表，因此不能再关闭。分配`myFile.readlines()`给不同的变量，你会没事的。

请参阅有关文件输入/输出[的文档。](http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects "文档")

`fileList`在编写时也是空的，因为当您打开要写入的文件时，您还在这里设置`fileList`了一个新`CursorBasedList`的：

```
elif response == "N":
        fileName = input("What would you like to name your file?: ")
        fileList = CursorBasedList() # <- Here
        myFile = open(fileName, "w") 
```

如果您删除该行，它应该可以正常工作。

# php - PHP最大文件上传配置问题

> ID：15053314
> 
> 赞同：0
> 
> 时间：2013-02-24T15:35:19.167
> 
> 标签：php

关于 php.ini post_max_size 和 upload_max_filesize 如何工作，我遇到了一些令人困惑的问题。阅读 php.net 文档，我知道通过设置 post_max_size = 16M 和 upload_max_filesize = 16M，将使我们能够上传最大 16MB 的文件。但我看到的不是。我正在使用这个检查加载的 .ini 值

```
$max_upload = (int)(ini_get('upload_max_filesize'));
$max_post = (int)(ini_get('post_max_size'));
$memory_limit = (int)(ini_get('memory_limit'));
$upload_mb = min($max_upload, $max_post, $memory_limit);

echo $max_upload;
echo $max_post;
echo $memory_limit;
echo $upload_mb; 
```

输出：

```
2
8
96
2 
```

该值与我在此 php.ini 中指定的值不同！

这是我的 php.ini 配置： [https ://docs.google.com/file/d/0B2o1vMJ7XFKyT0xDWUhJTnR0M2c/edit?usp=sharing](https://docs.google.com/file/d/0B2o1vMJ7XFKyT0xDWUhJTnR0M2c/edit?usp=sharing)

通过检查 phpinfo(); 的输出，我已经确保这个配置是 php 解释器加载的配置。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:27:13.913

我已经找到了解决我自己问题的方法。通过更彻底地检查 /etc/php5/fpm/php.ini ，我发现：

```
error_reporting = E_ALL error_reporting = E_ALL & ~E_DEPRECATED ~E_DEPRECATED 
```

通过将该值固定为

```
error_reporting = E_ALL & ~E_DEPRECATED 
```

修复问题。我首先拥有这些嵌套值的原因是，我首先使用 sed 来修改值，而我忘记了转义 '&' 字符。（& 表示插入子字符串，因此它会在此之前插入字符串）。将其转义为 '\&' 后，sed 命令按预期工作。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:58:08.267

你确定更改正确的 php.ini 请参阅 Apache config for php ini 目录也许你更改了另一个 php.ini

在用于设置 php ini 目录的 Apache 配置中搜索类似的内容

```
 PHPINIDir "c:/php" 
```

另一个问题可能是在 htaccess 中设置此参数，如果在运行中设置参数覆盖。

喜欢

```
 php_value upload_max_filesize 10M
 php_value post_max_size 10M 
```

注意：htaccess 有时会在父目录中设置

# vbscript - 我对一个小概念感到困惑

> ID：15053319
> 
> 赞同：2
> 
> 时间：2013-02-24T15:35:57.427
> 
> 标签：vbscript, qtp

我对 VBscript 很陌生，并且努力学习所有的概念。在我的练习中，我一直在怀疑。

```
dim a,b,c
set a = CreateObject("scripting.filesystemobject") 'initiate the file system object'
set b = a.GetFolder("E:\test") 'returns a object . and for the instance that varaiable b refers to that returned object'
c = b.datecreated 'accesing and storing the property to a variable /C/'
msgbox "folder: " &c 
```

当我执行此操作时，没有错误消息并且工作正常。但是当我改变

`c = b.datecreated`比`set c = b.datecreated`_

它显示了这个错误：

```
> object required:'datecreated' 
```

我知道这是一件基本的事情，但有时小事情会让你学到很多东西，对未来有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:45:36.403

该关键字`Set`在 VBScript 中仅用于分配对象：

```
set a = CreateObject("scripting.filesystemobject") 
```

非对象（如创建日期）的分配不带`Set`.

```
c = b.datecreated 
```

（这是我最喜欢的 VBScript 的坏处。）

# javascript - 无法在 javascript 中附加事件

> ID：15053328
> 
> 赞同：0
> 
> 时间：2013-02-24T15:36:47.667
> 
> 标签：javascript

我是 javascript 的新手。我正在读一本名为 DOM SCRIPTING 的书。

我试图编写一个示例，但不幸的是链接显示直接图像。我想做的是交换图像。这是js代码

```
 document.ready = function () {
     function showPicture(pictureChoosen) {
            var source = pictureChoosen.getAttribute('href');

            var placeholder = document.getElementById('plaecehlder');
            placeholder.setAttribute('src', source);

        }

    } 
```

这是我的html代码

```
 <ul>
    <li><a href="images/journee.jpg" onclick="showPicture(this);return false;">Journee</a></li>
    <li><a href="images/coffee.jpg">Coffee</a></li>

</ul>
<img id="plaecehlder" src="*" alt="" />Placeholder 
```

请告诉我我在哪里做错了..谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:49:19.933

你不需要这个：

```
document.ready = function () {

} 
```

只需定义函数。由于您在另一个函数中拥有该函数，因此它仅在本地范围内，而不在`onclick`处理程序正在查找的全局范围内。更好的是，会给元素一个id：

```
document.getElementById("foo").attachEvent // IE

document.getElementById("foo").addEventListener // standards-compliant 
```

[附加事件](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)文档

[addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)文档

* * *

您可能将 jQuery`$(document).ready(function(){});`与普通 DOM 混淆了。这是一个捷径

```
document.addEventListener("DOMContentLoaded", function(){}, false); 
```

这将回退到`onload`旧浏览器中的窗口事件。如果要将所有内容包装在一个函数中，则需要：

```
window.onload = function() {

    function showPicture(pictureChoosen) {
        var source = pictureChoosen.getAttribute('href');
        var placeholder = document.getElementById('plaecehlder');
        placeholder.setAttribute('src', source);

    }

    document.getElementById("foo").onclick = function() {
        showPicture(this);
        return false;
    }
} 
```

以便您的函数在您分配给元素的相同范围内定义。

# vim - Vim 中的管道和冒号命令

> ID：15053332
> 
> 赞同：1
> 
> 时间：2013-02-24T15:36:57.170
> 
> 标签：vim

我是一个快乐的 Emacs 用户。无论如何，我发现有一个领域可以让 Vim 更适合这项工作，这是在 Linux 终端或 Windows CLI 内部，当您不想打开单独的窗口时。这个轻量级任务有一些微型 Emacs 发行版，但我仍然没有找到一个好的。

对我来说，一个典型的 Vim 用法是一个更强大的替代方法`less`，例如：

```
 dir | vim - 
```

现在我来谈谈我的问题/疑问。

首先，Vim 从文件顶部开始。我想将光标定位在屏幕的最后一行，但`dir | vim +L -`不起作用。我想因为`L`不是`ex`命令。我该如何克服呢？

当我完成浏览并想退出时，我必须输入：`:q!`五个键和换档（所以两只手）。对于快速输出检查来说真的很多。冒号命令非常慢，因为它们需要移位。所以我想知道是否有办法`:`用功能键（比如 F2）或 Tab 键替换冒号。另外我想`!`用一个非移位键替换键，一个像``-=[];'\,./`. 这可能吗？这样做的缺点是什么？

## 编辑

注意冒号替换我的意思是只替换`:`每个冒号命令的符号，所以我可以输入`<F2>q<CR>`退出。例如，在 Emacs 中，您可以将修饰键“Meta”（通常是`Alt`键）分配给非标准键，或者将所有以前缀开头的命令重新映射`Ctrl-x`到不同的键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:53:42.137

在 Vim 中，`L`用于将光标置于窗口底部。

用于`$ command | vim - +8`将光标置于第 8 行。

用于`+$`将光标置于最后一行。

`~/.vimrc`如果你不喜欢，你可以把这条线放进去`:q!`：

```
nnoremap <F2> :q!<CR> 
```

还有，你不喜欢什么`less`？

***编辑***

```
$ command | vim - +'norm L' 
```

将光标放在最后一个可见行上。

你可以使用任何键来代替，`:`但 Vim 或多或少地使用了整个键盘。您必须明智地选择替换密钥并在您的`~/.vimrc`:

```
nnoremap <F2> : 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T02:18:09.217

在 Ubuntu 上安装 Vim73 时，有一个用于运行 VIM 的脚本，更像是“less”。我在你描述的情况下使用它。
该脚本`less.sh`位于（替换为您的安装路径）`/usr/share/vim/vim73/macros/less.sh`

这是脚本，以防您的服务器上没有它：
脚本`/usr/share/vim/vim73/macros/less.sh`：

```
#!/bin/sh
# Shell script to start Vim with less.vim.
# Read stdin if no arguments were given.

if test -t 1; then
 if test $# = 0; then
   vim --cmd 'let no_plugin_maps = 1' -c 'runtime! macros/less.vim' -
  else
   vim --cmd 'let no_plugin_maps = 1' -c 'runtime! macros/less.vim' "$@"
  fi
else
  # Output is not a terminal, cat arguments or stdin
  if test $# = 0; then
    cat
  else
    cat "$@"
  fi
fi 
```

请注意，它正在“关闭”所有插件。
如果您想在以`.vimrc`这种方式启动时做一些特殊的事情，您可以使用别名启动它，例如

```
alias lessv='use_less=1 /usr/share/vim/vim73/macros/less.sh'
# use it:
lessv some_file
# and
dir | lessv   # no need for "-" 
```

然后您可以在 中引用它，例如`$use_less`在所有常用映射之前执行。如果您以“正常方式”启动 vim，则不会出现错误（您不必使用类似的测试）。如果没有其他充分的理由使用它，那么拥有一个名为 use_less 的变量会很有趣。`.vimrc``finish``exists("$use_less")`

打开时有一些命令帮助`less.sh`，只需点击`h`
我也在 vim 帮助中找到它： 我试图在 Internet 上找到代码并使用链接，但没有运气。我认为该文件是安装的一部分。[`:h less`](http://vimdoc.sourceforge.net/htmldoc/various.html#less)
`less.vim`

**编辑：**
**Windows：**
在某些安装中的 Windows 上，也有一个`less.bat`或多或少地启动 vim 的功能。如果它不是安装的一部分，我将它粘贴在这里：
脚本`C:\Program\Vim\vim73\macros\less.bat`：

```
@echo off
rem batch file to start Vim with less.vim.
rem Read stdin if no arguments were given.
rem Written by Ken Takata.

if "%1"=="" (
  vim --cmd "let no_plugin_maps = 1" -c "runtime! macros/less.vim" -
) else (
  vim --cmd "let no_plugin_maps = 1" -c "runtime! macros/less.vim" %*
) 
```

**最后提示：**
`j` , `e`, `Ctrl`+ `j`, `Ctrl`+ `e`, `Ctrl`+`n`都映射到向下滚动 1 行（首先将光标放在窗口底部）。
`k`, `y`, `Ctrl`+ `k`, `Ctrl`+ `y`, `Ctrl`+`p`都映射到**向上滚动**1 行（如 less，首先将光标放在窗口底部）。
要**上下移动**，请使用`<Up>`和`<Down>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T15:46:15.273

在 Linux 中，你可以这样做：

```
ls | vim +$ +'map <F2> :' +'map <F3> !' - 
```

# c# - 使用 Masterpage 时无法在内容页面中运行 javascript

> ID：15053335
> 
> 赞同：1
> 
> 时间：2013-02-24T15:37:05.620
> 
> 标签：c#, javascript, asp.net

**在使用 contentpage/masterpage 时，我无法在单击按钮时在 asp.net 中运行进度条代码。
我已经检查了没有母版页的代码，它的工作很酷..但是在使用母版页时遇到了问题。我无法弄清楚的问题是什么？**

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Admin.master" AutoEventWireup="true" CodeFile="UploadStudentDB.aspx.cs" Inherits="Admin_UploadStudentDB" %>

        <asp:Content ID="Content1" ContentPlaceHolderID="Contentplaceholder2" Runat="Server">
          <script language="javascript" type="text/javascript">
            var size = 2;
            var id = 0;

            function ProgressBar() {
                if (document.getElementById('<%=txtFilePath.ClientID %>').value != "") 
                {
                    document.getElementById("divProgress").style.display = "block";
                    document.getElementById("divUpload").style.display = "block";
                    id = setInterval("progress()", 20);
                    return true;
                }
                else {
                    alert("Select a file to upload");
                    return false;
                }
            }

            function progress() {
                size = size + 1;
                if (size > 299) {
                    clearTimeout(id);
                }
                document.getElementById("divProgress").style.width = size + "pt";
                document.getElementById("<%=lblPercentage.ClientID %>").
                        firstChild.data = parseInt(size / 3) + "%";
            }

        </script>
        <body>
            <div id="divUpload" style="display:none">
                                 <div style="width:300pt;text-align:center;">Uploading...</div>
                                  <div style="width:300pt;height:20px; border:solid 1pt gray">
                                  <div id="divProgress" runat="server" 
                     style="width: 1pt; height: 20px; background-color:Gray;display:none">
                                   </div>
                                     </div>
                      <div style="width:300pt;text-align:center;">
                         <asp:Label ID="lblPercentage" runat="server" 
                         Text="Label"></asp:Label></div>
                                 </div>

         <div align="center">
            <table style="width: 100%; background-color:Silver"  border="1">
                        <tbody align="center">
                        <tr>
                            <td align="center">
                            <asp:Label ID="Label2" runat="server" Font-Bold="True" Font-Size="XX-Large" 
                Text="Please Select Excel File Containg Student Details..." ForeColor="White" 
                Font-Underline="True"></asp:Label>

                            </td>
                        </tr>
                            <tr>
                                <td>
                         <div style="background: url(hline.gif) repeat-x bottom #F2F2F2;padding: 8px 5px;border-bottom: 1px solid #ccc;">
                                    <asp:FileUpload ID="txtFilePath" runat="server"></asp:FileUpload>&nbsp;&nbsp;
                                    <asp:Button 
                                        ID="btnUpload" runat="server" Text="Upload" OnClientClick="return ProgressBar();" onclick="btnUpload_Click"  />
                                    <br />
                                    <asp:Label ID="lblMessage" runat="server" Visible="False" Font-Bold="True" 
                                        ForeColor="#009933" Font-Size="Large"></asp:Label>
                                </div>

                                </td>
                            </tr>
    <table>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:47:37.177

`body`我猜这是结束标签之后的流氓`script`标签。

# visual-studio-2010 - 致命错误 LNK1104：无法打开文件 'kernel32.lib'

> ID：15053337
> 
> 赞同：30
> 
> 时间：2013-02-24T15:37:14.890
> 
> 标签：visual-studio-2010, visual-c++, libraries

自从我在 Visual C++ 2010 Express 编译器上安装了用于 64 位编程的 .NET Framework SDK 以来，我就一直遇到这个错误。由于我遇到的这个错误，我什至无法编译一个简单的程序。我的平台是x86。如果有帮助，这是一个快照：

![在此处输入图像描述](../Images/7c259b499aaddb75a253c57a6ec71d9c.png)

我不知道还能说什么。我昨天刚下载了这个编译器，它工作正常。我想从 32 位编程升级到 64 位，这样我就可以使用 Assembly，所以我下载了这个[SDK](http://msdn.microsoft.com/en-us/windows/bb980924.aspx)。我在谷歌上搜索过，甚至在 Stackoverflow 上搜索过。谷歌并没有太大帮助，但我在[这里](https://stackoverflow.com/questions/3926866/lnk1104-cannot-open-file-kernel32-lib/7013508#comment21162060_7013508)找到了一个看起来与我相似的帖子，但答案并没有多大公正。有谁知道为什么会发生此错误以及如何摆脱它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-24T15:59:38.470

检查 VC++ 目录，在 VS 2010 中，这些可以在您的项目属性中找到。检查是否`$(WindowsSdkDir)\lib`包含在目录列表中，如果没有，请手动添加。如果您正在为 X64 平台构建，您应该从“平台”组合框中选择 X64，并确保它`$(WindowsSdkDir)\lib\x64`包含在目录列表中。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-24T22:34:59.640

将平台工具集更改为：项目属性->配置属性->通用下的“Windows7.1SDK”

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-15T19:28:58.113

确保您在 VC++ 目录中（右键单击项目，单击属性页），

*   包含目录：$(IncludePath)
*   列出项目库目录：$(LibraryPath)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-09T19:23:59.430

仅适用于命令行（即-makefile）用户：

1.  安装 VC++ Express 时，它只是 32 位的。所以，事情进入*C:\Program Files **(x86)***。
2.  然后，您决定升级到 64 位功能。因此，您安装了 SDK。但它支持 64 位。所以，事情进入*C:\Program Files*。

您（像我一样）可能通过以下方式将您的makefile“调整”到上面的＃1：

```
MS_SDK_BASE_DOS := C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A
ENV_SET         := LIB="$(MS_SDK_BASE_DOS)\Lib\x64" 
```

但是，现在，您需要将调整更改为上面的 #2，如下所示：

```
MS_SDK_BASE_DOS := C:\Program Files\Microsoft SDKs\Windows\v7.1 
```

（也不要错过从“v7.0A”到“v7.1”的变化。）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-04T07:12:28.823

在 project->properties->Configuration Properties->VC++ Directories -> **Library 目录**中添加 WindowsSdks 的 lib 路径。

我添加了以下路径并且错误出现::

**C:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A\Lib;**

我的系统是**Win-7, 64bit, VS 2013, .net framework 4.5**

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-20T04:34:09.843

我遇到了类似的错误，当我检查项目属性中的“链接器 -> 输入 -> 附加依赖项”列表时，问题停止了。我错过了一个分号“;” 就在“%(AdditionalDependencies)”之前。我也有两次相同的条目。您应该为 Debug 和 Release 分别编辑此列表。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-04-08T15:03:07.207

我在使用 Visual Studio 2017 的 Windows 10 上遇到了不同的问题，但效果相同。我认为我的问题归结为 VS 被安装到“C:\”以外的驱动器上。[我通过重新安装Windows 10 SDK](https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk "视窗 10 开发工具包")解决了这个问题

首先我必须卸载 Windows SDK（安装了两个版本）。然后运行可执行文件。安装后，运行visual studio，它工作正常。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-25T05:36:42.860

我刚刚遇到并自己解决了这个问题。我的问题有点不同。我在 Windows 10 上使用 Visual Studio。当我创建项目时，它`Target Platform Version`被自动设置为`10.0.15063.0`. 但是`kernel32.lib`这个版本的SDK没有，其他必要的头文件和lib文件也没有。所以我修改`Target Platform Version`为`8.1`. 它奏效了。

**环境**：

*   视窗 10
*   视觉工作室 2015
*   视觉 C++

**解决方案**：

1.  打开项目的`Property Page`;
2.  导航到`General`页面；
3.  修改`Target Platform Version`为所需的目标平台（例如`8.1`）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-10T13:21:05.370

![在此处输入图像描述](../Images/3c45a0829d6f4ea48fdd98a03c9889cf.png)

gero 的解决方案对我有用。
在 Visual Studios 2012 中，执行以下步骤。
- 转到解决方案资源管理器
- 右键单击​​您的项目
- 转到属性
- 配置属性 -> 常规
- 平台工具集 ->**更改为 Windows7.1SDK**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-11T05:16:20.640

如果上述解决方案不起作用，请检查属性->VC++ 目录->库目录中是否有**$(LibraryPath)**。如果您缺少它，请尝试添加它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-07T06:43:09.063

操作系统：Win10、Visual Studio 2015

解决方法：进入控制面板--->卸载程序---MSvisual studio ---->更改---->组织=修复

并修复它。请注意，您必须连接到互联网，直到修复完成。

祝你好运。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-09T23:11:18.030

今天在 Visual Studio 2017 中，我遇到了同样的问题。

就我而言，原因是 NETFXSDKDir ( `NETFXSDKDir=C:\Program Files (x86)\Windows Kits\NETFXSDK\4.6.1`) 中的环境设置不佳。它需要改为`NETFXSDKDir=C:\Program Files (x86)\Windows Kits\10\Lib\10.0.10240.0\um\x86`。具体来说，在这个批处理文件（我的目录实际上有 4 个不同的文件）中为 VS2017 的命令提示符设置：

```
%comspec% /k "C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Auxiliary\Build\vcvars32.bat" 
```

因为我不愿意更改其中一个“已安装”批处理文件……甚至更多，因为该批处理文件又调用了另一个：

```
@call "%~dp0vcvarsall.bat" x86 %* 
```

...而不是对于我特定的 C++ 命令行应用程序，我只是添加了显式路径文本：`;C:\Program Files (x86)\Windows Kits\10\Lib\10.0.10240.0\um\x86`对于“库目录”中的总字符串，如下所示：`$(VC_LibraryPath_x86);$(WindowsSDK_LibraryPath_x86);$(NETFXKitsDir)Lib\um\x86;C:\Program Files (x86)\Windows Kits\10\Lib\10.0.10240.0\um\x86`. （右键单击项目，属性→配置属性→VC++目录→库目录。）这解决了我的“致命错误LNK1104：无法打开文件'kernel32.lib'”错误。[我在这个 GitHub 问题](https://github.com/nodejs/node-gyp/issues/506)中找到了这个提示。

请注意，这在 Visual Studio 2017 Enterprise 2017 版本 15.1 (26403.0) 中是可重现的，即使在成功“修复”安装之后……在创建新的 Visual C++ Win32 控制台应用程序并尝试编译时。

事实上，除非创建了一个空白应用程序，否则默认模板还包括对`<SDKDDKVer.h>`我得到这个附加错误的引用：`Error (active) E1696 cannot open source file "SDKDDKVer.h"`. 所以我[创建了一个空的 C++ 项目](https://msdn.microsoft.com/en-us/library/ms235629.aspx)。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-08-30T15:37:32.900

在**Visual Studio 2017**中，我转到**Project Properties** -> **Configuration Properties** -> **General**，Selected **All Platforms** *(1) ，然后选择***Windows SDK Version**下的下拉列表*(2)*并从**10.0.14393.0**更新为已安装的*(3)* . 对我来说，那是**10.0.15063.0。**

 *******[![在此处输入图像描述](../Images/2898b323412e1d7dd8122d859a893e4c.png)](https://i.stack.imgur.com/9NElD.png)

***其他详细信息：****这更正了我的错误，因为 **Windows SDK 版本**帮助 VS 选择正确的路径。**VC++ 目录**-> 库目录 ->**编辑**->**宏**-> 显示宏**$(WindowsSDK_LibraryPath_x86)**具有上面选择的版本号的路径。********

# php - jquery ajax表单提交不能与codeigniter一起使用，但可以正常工作

> ID：15053338
> 
> 赞同：0
> 
> 时间：2013-02-24T15:37:23.170
> 
> 标签：php, jquery, mysql, ajax, codeigniter

我尝试使用没有 codeigniter 的 jquery ajax 提交表单，只是为了了解 ajax 的工作原理。它工作得很好，但现在我想在 codeigniter 中做到这一点（因为我正在 CI 中开发我的应用程序）。它不是在数据库中插入值。我不知道如何检查问题出在哪里

这是我的看法：-

```
<form name="article_form" method="POST" action="">
 <input type="text" name="title" placeholder="Title for your article" />
 <br>
 <textarea rows="12" name="body" placeholder="Tell your story"></textarea>
 <br>
 <input type="submit" name="submit_article" id="submit_article" value="Post" />
</form> 
```

这是我的 jquery ajax 脚本：-

```
<script language='JavaScript' type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js'></script>
    <script>
        $('#submit_article').click(function(){

            var article_title = document.getElementById("title").value;
            var article_body = document.getElementById("body").value;

            $.ajax({
                url: '<?php echo base_url()."main/submit_article";?>',
                type: 'POST',
                dataType: 'json',
                data: 'title='+article_title + '&body='+article_body,
                success: function(output_string){
                    $('#result_table').append(output_string);
                }
            });
        });
    </script> 
```

Main 是控制器，这个函数 submit_article ：-

```
public function submit_article()
{
        $article_title = $this->input->post('title');
        $article_body = $this->input->post('body');

    $this->load->model("model_articles");

    if($this->model_articles->article_submit($article_title, $article_body))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

这会加载模型 - model_articles 并将两个值，即 $article_title 和 $article_body 传递给函数 article_submit()。这是模型中必须将值插入数据库的函数：-

```
public function article_submit($article_title, $article_body)
    {
        $article_data = array(
            'title' => $article_title,
            'body' => $article_body
            );

        $query_insert_article = $this->db->insert('articles', $article_data);
        if($query_insert_article)
        {
            return true;
        }
        else
        {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:29:21.207

你需要改变你的控制器功能和 ajax 来试试这个

```
 <script language='JavaScript' type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js'></script>
<script>
    $('#submit_article').click(function(){

        var article_title = $('input[name="title"]').val();
       var article_body = $('textarea[name="body"]').val();

        $.ajax({
            url: '<?php echo base_url()."main/submit_article";?>/'+article_title+'/'+article_body ,
            type: 'POST',
            dataType: 'json',
            data:  $('#form_id').serialize(),/*edit form_id*/
            success: function(output_string){
                $('#result_table').append(output_string);
            }
        });
    });
</script> 
```

这个是你的控制器

```
 public function submit_article($article_title,$article_body )
  {

$this->load->model("model_articles");

if($this->model_articles->article_submit($article_title, $article_body))
{
    return true;
}
else
{
    return false;
} 
```

}

希望它会解决......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:47:15.500

您需要将您的 JavaScript 更改为：

```
$('#submit_article').click(function(e) {

    var article_title = $('input[name="title"]').val();
    var article_body = $('textarea[name="body"]').val();

    $.ajax({
        url: '<?php echo base_url(); ?>main/submit_article',
        type: 'POST',
        dataType: 'json',
        data: 'title=' + article_title + '&body=' + article_body,
        success: function(output_string) {
            $('#result_table').append(output_string);
        }
    });

    // Add this if you want to prevent the normal form from sending:
    e.preventDefault();
}); 
```

# cuda - 更改 CUDA 中的 arch 参数使我使用更多寄存器

> ID：15053339
> 
> 赞同：0
> 
> 时间：2013-02-24T15:37:28.527
> 
> 标签：cuda, nvidia, cpu-registers

我一直在我的 Tesla K20m 上编写内核，当我使用 -Xptas=-v 编译软件时，我得到以下结果：

```
ptxas info    : 0 bytes gmem
ptxas info    : Compiling entry function '_Z9searchKMPPciPhiPiS1_' for 'sm_10'
ptxas info    : Used 8 registers, 80 bytes smem, 8 bytes cmem[1] 
```

如您所见，只使用了 8 个寄存器，但是，如果我提到参数 -arch=sm_35，我的内核执行时间会急剧增加，并且使用的寄存器数量也会增加，我想知道为什么

```
nvcc mysoftware.cu -Xptxas=-v -arch=sm_35 
ptxas info    : 0 bytes gmem
ptxas info    : Compiling entry function '_Z9searchKMPPciPhiPiS1_' for 'sm_35'
ptxas info    : Function properties for _Z9searchKMPPciPhiPiS1_
0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 21 registers, 16 bytes smem, 368 bytes cmem[0] 
```

由于在多本书中都提到使用正确的卡架构可以提高性能，我想知道为什么我的卡会急剧下降。

谢谢。

编辑：类似的问题和答案：[寄存器和共享内存取决于编译计算能力？](https://stackoverflow.com/questions/6038221/registers-and-shared-memory-depending-on-compiling-compute-capability)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:05:44.770

Compiling with sm_20 and above enables IEEE math and ABI compliance. These two options can increase register count and decrease performance. These two options can be disabled.

# c# - HttpWebRequest - 启用假 Javascript

> ID：15053340
> 
> 赞同：2
> 
> 时间：2013-02-24T15:37:37.743
> 
> 标签：c#, httpwebrequest, web-scraping

我正在尝试使用 C# 下载网页：

```
var responseData = "";
var strUrl = this.QuerySelector(item, "a[class='url']").Attributes["href"].Value;

request = (HttpWebRequest)WebRequest.Create(strUrl);
request.Method = "GET";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = 0;
request.CookieContainer = cookies;
request.Timeout = System.Threading.Timeout.Infinite;
request.UserAgent = this.RefreshUserAgent();
request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
request.Headers.Add("Accept-Encoding", "gzip,deflate,sdch");
request.KeepAlive = true;
request.AllowAutoRedirect = false;
request.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;

response = (HttpWebResponse)request.GetResponse();
response.Cookies = request.CookieContainer.GetCookies(request.RequestUri);
var encoding = new System.Text.UTF8Encoding();
var responseReader = new StreamReader(response.GetResponseStream(), encoding, true);

responseData = responseReader.ReadToEnd();
response.Close();
responseReader.Close(); 
```

但该网站一直给我相同的代码，让 JavaScript 继续。我已经用 Fiddler 检查了数据 - 它只是再次导航到自身，但我无法通过此消息：

```
Before you can move on - please enable JavaScript. 
```

该网站是 Manta.com，这是我的示例页面。有任何想法吗..

[http://www.manta.com/c/mrsywyl/leeds-automotive](http://www.manta.com/c/mrsywyl/leeds-automotive)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:39:57.287

这是对的。`HttpWebRequest`只是做一个HTTP请求。它不支持 JavaScript。如果您想要这种行为，请尝试使用`WebBrowser`控件或 Awesomium 之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-18T16:00:46.027

您可以尝试伪造 UserAgent 请求标头：

```
request.UserAgent = "Mozilla/5.0 (Windows NT 6.3; WOW64; rv:31.0) Gecko/20100101 Firefox/31.0"; 
```

# log4net - Quartz.NET - 没有配置部分 找到 - 抑制日志输出

> ID：15053345
> 
> 赞同：4
> 
> 时间：2013-02-24T15:38:10.117
> 
> 标签：log4net, quartz.net

我正在尝试将**Quartz 2.1.2**与日志记录一起使用，但在调试时我不断收到以下输出：

> 未找到配置部分 - 禁止记录输出

这是我的**App.config**文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<configSections>
    <sectionGroup name="common">
      <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
 </sectionGroup>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
  </configSections>
  <common>
    <logging>
      <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4Net">
        <arg key="configType" value="INLINE"/>
        <arg key="configFile" value="c:\Scheduler.log"/>
        <arg key="level" value="INFO" />
      </factoryAdapter>
    </logging>
  </common>
  <log4net>
    <appender name="EventLogAppender" type="log4net.Appender.EventLogAppender">
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%d [%t] %-5p %l - %m%n" />
      </layout>
    </appender>
    <root>
      <level value="INFO" />
      <appender-ref ref="EventLogAppender" />
    </root>
  </log4net>
</configuration> 
```

这是实例化我的调度程序的代码：

```
private IScheduler scheduler;

    public JobScheduler()
    {
        ISchedulerFactory schedulerFactory = new StdSchedulerFactory();
        this.scheduler = schedulerFactory.GetScheduler();
        this.scheduler.Start();
    } 
```

我究竟做错了什么？

**更新：**

好的，所以我做错的一件事是我的单元测试项目中没有包含 App.config 文件。一旦我这样做了，我得到了一个不同的错误：

> 无法创建类型“Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter，Common.Logging.Log4Net”

我没有在 Common.Logging 命名空间中看到 Log4Net，所以我通过包管理器添加了 DLL，但我仍然得到同样的错误。我正在使用 Common.Logging 2.1.2 版。任何想法为什么我仍然有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:19:08.880

首先检查您是否拥有所有软件包（程序集）更新。这是我的**nuget** packages.config：

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="Common.Logging" version="2.1.2" targetFramework="net35" />
  <package id="Common.Logging.Log4Net" version="2.0.1" targetFramework="net40" />
  <package id="log4net" version="1.2.10" targetFramework="net40" />
  <package id="Quartz" version="2.1.2" targetFramework="net35" />
</packages> 
```

我认为您必须强制更新，`Common.Logging.Log4Net`因为 Quartz.net 没有下载最新版本。

然后检查您的**App.config**。你应该有这个绑定：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Common.Logging" publicKeyToken="af08829b84f0328e" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.1.2.0" newVersion="2.1.2.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

我认为您使用了错误的附加程序。您似乎想将日志写入文件，但您正在使用**EventLogAppender**。

如果您想使用文件系统，您可以尝试使用以下配置部分：

```
 <common>
    <logging>
      <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4Net">
        <arg key="configType" value="INLINE" />
        <arg key="level" value="INFO" />
      </factoryAdapter>
    </logging>
  </common>
  <log4net>
    <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender">
      <param name="File" value="c:\Scheduler.log" />
      <param name="AppendToFile" value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n" />
      </layout>
    </appender>
    <root>
      <level value="INFO" />
      <appender-ref ref="LogFileAppender" />
    </root>
  </log4net> 
```

您可能在尝试写入该文件夹时遇到权限问题。如果您的应用程序更改此设置，您想将日志放在 bin 文件夹中：

```
<param name="File" value="Scheduler.log" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:57:01.873

尝试将 Common.Logging 库与 Quartz 库放在同一个文件夹中（C5 也应该在那里）。据我所知，您不必在 Visual Studio 中引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-27T01:06:11.923

您可以安装[Common.Logging.Log4Net1211](https://www.nuget.org/packages/Common.Logging.Log4Net1211/)并更改 appsetting 如下

```
 <common>
    <logging>
      <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4Net1211">
        <arg key="configType" value="INLINE"/>
      </factoryAdapter>
    </logging>
  </common> 
```

请注意，dll 名称更改为“Common.Logging.Log4Net1211”。

# python - SciPy interp2d（线性）结果与 MatLab interp2（线性）不同

> ID：15053346
> 
> 赞同：2
> 
> 时间：2013-02-24T15:38:13.753
> 
> 标签：python, numpy, scipy, linear-interpolation

我正在将 MatLab 程序转换为 Python，但我无法理解为什么 scipy.interpolate.interp2d(linear) 给出的结果与 MatLab interp2(linear) 不同。我知道 scipy.interpolate.rectbivariatesspline 给出的结果与 matlab interp2(cubic) 相同。但在线性方法中给出的结果不同。最好的问候，谢谢你，Zeinab python：

```
from numpy import *
from scipy import interpolate

att=array([[ 239.044127,236.38616,231.891308,224.461261,212.628196,194.850501,170.332448,140.179075,107.822158,77.686597,52.989905,34.704514,22.112333,13.845297,8.577347,5.280345,3.238684,1.982192,1.211678,0.740152],[ 279.480169,276.646675,271.848543,263.89899,251.189969,231.976788,205.21918,171.832314,135.280008,100.344172,70.805784,48.14555,31.927007,20.837779,13.469048,8.656136,5.544346,3.544295,2.263191,1.444215],[ 326.756261,323.76423,318.690817,310.265908,296.745218,276.177018,247.251256,210.633036,169.730239,129.60991,94.611588,66.792291,46.097975,31.361771,21.150511,14.190114,9.491439,6.33744,4.227221,2.818012],[ 382.029446,378.906692,  373.604492,  364.77947,   350.562265,  328.799039,   297.892154,  258.195183,  212.95352,   167.411105,  126.421205,   92.660904,66.558802,   47.200839,   33.212749,   23.262033,   16.248519,   11.331774,7.895667,    5.49862 ],[ 446.652489,  443.440837,  437.980353,  428.871037,  414.139452,  391.447518,358.905095,  316.497136,  267.183987  ,216.237154,  168.925618,  128.548413,96.101273  , 71.039332 ,  52.154139,   38.133744,   27.816052  , 20.261982,14.747643 ,  10.729132],[ 522.206988,  518.966226,  513.448831 , 504.22346 ,  489.246854 , 466.032868,432.414435  ,387.964004,  335.224713 , 279.303496  ,225.720556 , 178.335132,138.756323  ,106.917309 ,  81.897894  , 62.513127 ,  47.618665 ,  36.2298, 27.545866   ,20.935121],[ 610.542076  ,607.354851 , 601.921297 , 592.815265,  577.975567  ,554.82951,520.979629,  475.5685   , 420.592603,  360.763363 , 301.610673  ,247.404216,200.34404 ,  160.915237 , 128.604656  ,102.478559  , 81.519018     ,64.781346,51.450576 ,  40.849466]])

att_r=logspace(0,log10(200),20)
att_m=linspace(4.5,7.5,7)
[r_grid,m_grid] = meshgrid(att_r,att_m)
rr=16
mm=4.6

att_cubic = interpolate.RectBivariateSpline(att_m,att_r,att)
Att_cubic = att_cubic(mm,rr)
print Att_cubic

att_linear = interpolate.interp2d(r_grid,m_grid,att,kind='linear')
Att_linear = att_linear(rr,mm)
print Att_linear 
```

MATLAB：

```
att=[239.044127 236.386160  231.891308  224.461261  212.628196  194.850501  170.332448  140.179075  107.822158  77.686597   52.989905   34.704514   22.112333   13.845297   8.577347    5.280345    3.238684    1.982192    1.211678    0.740152      
279.480169  276.646675  271.848543  263.898990  251.189969  231.976788  205.219180  171.832314  135.280008  100.344172  70.805784   48.145550   31.927007   20.837779   13.469048   8.656136    5.544346    3.544295    2.263191    1.444215
326.756261  323.764230  318.690817  310.265908  296.745218  276.177018  247.251256  210.633036  169.730239  129.609910  94.611588   66.792291   46.097975   31.361771   21.150511   14.190114   9.491439    6.337440    4.227221    2.818012
382.029446  378.906692  373.604492  364.779470  350.562265  328.799039  297.892154  258.195183  212.953520  167.411105  126.421205  92.660904   66.558802   47.200839   33.212749   23.262033   16.248519   11.331774   7.895667    5.498620
446.652489  443.440837  437.980353  428.871037  414.139452  391.447518  358.905095  316.497136  267.183987  216.237154  168.925618  128.548413  96.101273   71.039332   52.154139   38.133744   27.816052   20.261982   14.747643   10.729132
522.206988  518.966226  513.448831  504.223460  489.246854  466.032868  432.414435  387.964004  335.224713  279.303496  225.720556  178.335132  138.756323  106.917309  81.897894   62.513127   47.618665   36.229800   27.545866   20.935121
610.542076  607.354851  601.921297  592.815265  577.975567  554.829510  520.979629  475.568500  420.592603  360.763363  301.610673  247.404216  200.344040  160.915237  128.604656    102.478559    81.519018   64.781346   51.450576   40.849466];

r=logspace(0,log10(200),20);
m=[4.5:0.5:7.5]';
[r_grid,m_grid]=meshgrid(r,m);
rr=16;
mm=4.6;
att_cubic=interp2(r_grid,m_grid,att,rr,mm,'cubic')
att_linear=interp2(r_grid,m_grid,att,rr,mm) 
```

输出（matlab）：

```
att_cubic =57.4565
att_linear =58.2270 
```

输出（蟒蛇）：

```
Att_cubic=[[ 57.45649122]]
Att_linear=[ 56.13548995] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T18:24:33.330

我对此没有答案（抱歉，没有足够的声誉来发表评论）但是，当我运行您的 Python 代码时，我收到以下警告：

```
Warning:     No more knots can be added because the number of B-spline coefficients
    already exceeds the number of data points m. Probably causes: either
    s or m too small. (fp>s)
    kx,ky=1,1 nx,ny=19,11 m=140 fp=2.359644 s=0.000000 
```

我不完全清楚这里发生了什么，但这里有一些链接可能有助于您的调查：

1.  [SciPy，非矩形网格中的二维插值问题](https://stackoverflow.com/questions/3526514/problem-with-2d-interpolation-in-scipy-non-rectangular-grid)
2.  [https://groups.google.com/forum/#!topic/scipy-user/eJZKWvvR86Y](https://groups.google.com/forum/#!topic/scipy-user/eJZKWvvR86Y)
3.  [http://mail.scipy.org/pipermail/scipy-user/2007-October/014130.html](http://mail.scipy.org/pipermail/scipy-user/2007-October/014130.html)
4.  [https://github.com/scipy/scipy/issues/1599](https://github.com/scipy/scipy/issues/1599)

让我知道这是否有帮助和/或您已经弄清楚了。

# ajax - 使用 Mustache 解析 json

> ID：15053348
> 
> 赞同：0
> 
> 时间：2013-02-24T15:38:30.667
> 
> 标签：ajax, json, parsing, jquery, mustache

我有这个 JSON：

```
{ 
status: "ok", 
posts: [ { 
          id: 1362, 
          type: "ser", 
          slug: "av-ss-xiii-3",

           fields: { 
                     price: [ "550" ], 
                     sale: [ "rent" ] 
            } 
       } ]
} 
```

我正在用 mustache 以这种方式解析它，但正如你所看到的......字段不是对象数组，它是一个具有两个属性和数组值的对象......

```
{{#posts}}
<h1>{{type}}</h1>
        {{#fields}}
            <p> {{price}}:{{value}}</p>
         {{/fields}} 
{{/posts}} 
```

我想我在解析过程中会出错，因为它对价格值不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:47:20.393

您的模板即将工作。我可以看到的问题是 {{value}} 需要字段对象中不存在的键。您的模板当前输出带有冒号的价格，然后什么也不输出：

```
<h1>ser</h1>
<p> 550 :</p> 
```

也许您认为 {{value}} 会输出 55​​0，或者您的意思是输出 sale 的价值。在这两种情况下，将值包装在数组中有点奇怪：[“550”]。不过这并不重要，因为每个元素中只有一个元素，这根本不会使您的模板复杂化。我只能猜测您想要的输出是什么，但请允许我在一个*工作*示例中演示您的模板。

```
{{#posts}}
    <h1>{{type}}</h1>
    {{#fields}}
    <p> {{price}} : {{sale}}</p>
    {{/fields}}
{{/posts}} 
```

这将为您的数据输出以下 HTML：

```
<h1>ser</h1>
<p> 550 : rent</p> 
```

这是一个 jsFiddle 来说明：[带有多个帖子的模板](http://jsfiddle.net/willslab/Csv2s/)

我冒昧地制作了第二个帖子对象来演示您的数据如何使用集合呈现。我还猜测您可能意味着输出价格和销售值。

我想你已经理解了这一点，但要清楚， {{#fields}} ... {{/fields}} 就像条件一样工作，因为字段是一个对象而不是数组。没关系。如果字段是假的（例如，未定义或假），您的模板将不会呈现 p 元素。

请注意，我在 jsFiddle 中使用了 jQuery，但只是为了方便访问模板和 DOM 元素。

我希望这会有所帮助，但如果您有任何问题，请告诉我。如果这不是您要查找的内容，请编辑您的问题以描述您想要的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:06:09.433

最后我找到了它......这是一个“方法”的问题，使用 .toHtml 它对数组没有任何作用......使用 .render 它工作正常！谢谢

# db2 - DB2 联机恢复 - “SQL1035N 数据库当前正在使用中。”

> ID：15053350
> 
> 赞同：-1
> 
> 时间：2013-02-24T15:38:54.110
> 
> 标签：db2, backup, restore

我正在尝试做`ONLINE RESTORE ROLLFORWARDING TO END OF LOGS AND COMPLETE`。当我运行此命令时，我收到错误 SQL1035N 数据库当前正在使用中。它不允许任何连接！

如果我停用数据库然后运行命令，我可以恢复，但我的数据库对用户不可用，但应该是因为它是 24/7 实时生产系统。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:42:59.413

当您执行在线恢复时，DB2 必须锁定您尝试恢复的表空间。恢复过程实质上会覆盖磁盘上包含表空间数据的文件。这与在还原发生时使用同一表空间中的数据的应用程序不兼容。

如果您的数据库在单个表空间中包含所有数据，那么联机恢复并不是特别有用。如果您在数据库中有多个表空间，则应用程序可能能够在恢复损坏的表空间时继续运行，但这当然需要在您的应用程序和数据库设计中进行一些规划。

# android - 如何在 Intent 之间发送字符串？

> ID：15053351
> 
> 赞同：0
> 
> 时间：2013-02-24T15:38:55.690
> 
> 标签：android, string, android-intent

我需要帮助才能将字符串发送到另一个活动。

```
public class MainActivity extends Activity implements OnClickListener{

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    Intent myInt = new Intent(this,Receiver.class);
    myInt.putExtra("key",Event);
    startActivity(myInt);
}

Button b;
EditText Edt;
String Event;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        b=(Button)findViewById(R.id.button);
        b.setOnClickListener(this);
        Edt=(EditText)findViewById(R.id.EdtText);
        Event=new String(Edt.getText().toString());             
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

这就是我要发送到此活动的字符串事件的意图

```
public class Receiver extends Activity {

TextView txtV;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.receiving);
    txtV=(TextView)findViewById(R.id.txtV);
    Bundle extras = getIntent().getExtras();
    if(extras !=null) {
        String value = extras.getString("key");
    }
    txtV.setText("key");
}
} 
```

当我运行我的程序时，它只显示“键”，但我想显示我无法在此活动中使用的字符串事件，尽管我在第一个意图中使用了 putExtra 方法。请帮助我，我知道还有很多其他类似的问题，但我仍然不明白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:43:40.003

用这个：

```
 txtV.setText(value); 
```

不是这个：

```
 txtV.setText("key"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:50:04.210

尝试这个。我希望它会帮助你。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    b=(Button)findViewById(R.id.button);
    b.setOnClickListener(this);
    Edt=(EditText)findViewById(R.id.EdtText);
    Event=new String(Edt.getText().toString()); //Remove this line   
}

@Override
public void onClick(View arg0) {
    Event = Edt.getText().toString();  //Write here
    Intent myInt = new Intent(this,Receiver.class);
    myInt.putExtra("key",Event);
    startActivity(myInt);
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.receiving);
    txtV=(TextView)findViewById(R.id.txtV);
    Bundle extras = getIntent().getExtras();
    if(extras !=null) {
        String value = extras.getString("key"); //assign it.
        txtV.setText(value); //set it to textview.
    }
} 
```

# android - 在 Android 中通过蓝牙接收 xml 字符串时出错

> ID：15053358
> 
> 赞同：1
> 
> 时间：2013-02-24T15:39:56.397
> 
> 标签：android, xml, bluetooth, arduino

我正在开发一个应用程序，它通过蓝牙接收 xml 作为字符串（来自 Arduino 和 android 手机）。

我从蓝牙收到无效/不完整的字符串。蓝牙被定义为 Android 服务。每次我收到一个字符串时，它都不是原始形式，无论我是从 arduino 还是其他 android 手机发送的。xml 解析功能正在工作，我已经检查过了。

这是我接收字符串的代码

```
mConnectedThread = new ConnectedThread(btSocket);
            mConnectedThread.start();

            h = new Handler() {
                public void handleMessage(android.os.Message msg) {
                    switch (msg.what) {
                    case RECIEVE_MESSAGE:                                                   // if receive massage
                        byte[] readBuf = (byte[]) msg.obj;
                        String strIncom = new String(readBuf, 0, msg.arg1);                 // create string from bytes array
                        sb.append(strIncom);                                                // append string
                        int endOfLineIndex = sb.indexOf("\n");                          // determine the end-of-line
                        if (endOfLineIndex > 0) {                                           // if end-of-line,
                            String sbprint = sb.substring(0, endOfLineIndex);               // extract string
                            sendXML(sbprint); // this method is for sending the xml string
                            sb.delete(0, sb.length());                                      // and clear

                        }
                        Log.d(TAG, "...String:"+ sb.toString() +  "Byte:" + msg.arg1 + "...");
                        Log.d("IncString", strIncom);

                        break;

                    }
                };
            }; 
```

这是我正在使用的示例 xml 字符串

```
<head><hbt v='100'/><hrg v='75'/></head> 
```

我总是得到字符串但不像这样完整，`**v='100'/><hrg v='75'**`或者`**</head>**`

如果问题不清楚，请告诉我我将更新的任何内容

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:42:33.493

我用下面的代码成功地做到了这一点......

```
byte[] buffer = new byte[128];  // buffer store for the stream
        int bytes; // bytes returned from read()

        // Keep listening to the InputStream until an exception occurs
        while (true) {
            try {

                bytes = mmInStream.read(buffer);
                byte[] readBuf = (byte[]) buffer;
                String strIncom = new String(readBuf, 0, bytes);  // create string from bytes array
                sb.append(strIncom);     // append string
                int endOfLineIndex = sb.indexOf("\r\n"); // determine the end-of-line
                if (endOfLineIndex > 0) {  
                    // add the current string to eol to a local string
                    String sbprint = sb.substring(0, endOfLineIndex);

                    // get the start and end indexes of the heading
                    int startHeading = sb.indexOf("HE");
                    int endHeading = sb.indexOf("/HE");

                    // set the heading
                    blahblah.setCurrentHeading(sb.substring((startHeading + 2), endHeading));

  .... 
```

然后，在我从 arduino 发送的文本中检索到我想要的所有信息后，我打电话给：

```
sb.delete(0, sb.length()); 
```

来自我的 adruino 的字符串如下所示:::

```
void taskTransmitData(void)
{
  // start the xml
  Serial.print("HE");
  Serial.print(pMyMemory->currentHeading);
  Serial.print("/HE");

  .....

  Serial.println();

} 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T16:21:06.903

尝试在此处的代码中使用类似于第 92 行中的 while(true) 语句：[http ://code.google.com/p/android-arduino/source/browse/garduino/android/src/net/morrildl/ garduino/CommThread.java](http://code.google.com/p/android-arduino/source/browse/garduino/android/src/net/morrildl/garduino/CommThread.java)

# php - 循环只检查数组的第一部分

> ID：15053361
> 
> 赞同：2
> 
> 时间：2013-02-24T15:40:19.840
> 
> 标签：php, mysql, calendar

我正在制作一个日历系统，用户可以在其中进行预订（在不同的页面上）。在此页面上，用户单击相关框以选择新预订的开始时间。我正在检查现有预订的数据库，并使这些预订不可点击以防止重复预订。

我的问题是，为什么只有当天的第一个预订出现在桌子上？

变量是否`$booked`保持真实，因此不显示其他预订？我无法理解它！

MySQL：

```
$query="SELECT * FROM bookings WHERE DateBooked = '{$year}-{$month}-{$selectedday}' AND Approved = 1";
$result = mysql_query($query);
$todayarray = mysql_fetch_assoc($result); 
```

和 PHP：

```
while ($room <= $roomcount) {
    echo "\n<div class=\"roomtimes\">";
    echo "\n<table border=1>";
    echo "\n<tr><th class=\"titlecell\">Room $room</th></tr>";
    $cellnum = 10;
    while ($cellnum <= 22) {
        if (($todayarray['StartTime'] <= $cellnum) && ($todayarray['EndTime'] >= $cellnum) && ($todayarray['Room'] == $room)) {
            $booked = true;
        } else {
            $booked = false;
        }
        echo "\n<tr>";
        if ($booked) {
            echo "\n<td class=\"blankcell";
        } else {
            echo "\n<td class=\"linkcell";
        }

        if ($selectedtime == $cellnum) {
            echo " selectedcell";
        }
        echo "\">";
        if ($booked) {
            echo "$cellnum:00 --BOOKED--";
        } else {
            echo "<a href=\"newbooking.php?m=$selectedmonth&d=$selectedday&t=$cellnum&r=$room\">$cellnum:00</a>";
        }
        echo "</td>";
        echo "\n</tr>";
        $cellnum++;
    }
    $room++;
    echo "\n</table>";
    echo "\n</div>";
}
echo "\n</div>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:51:11.397

问题是您只查看表中结果集的第一行。您只调用`mysql_fetch_assoc($result)`一次，此函数一次只返回一个结果行。您需要遍历`$result`从查询调用中获得的信息。您可以使用类似于此的 while 循环：

```
while ($row = mysql_fetch_assoc($result) {
   //this can be your php code from above 
} 
```

# php - jquery，ajax调用失败

> ID：15053363
> 
> 赞同：0
> 
> 时间：2013-02-24T15:40:25.540
> 
> 标签：php, jquery, ajax

由于某种原因，这段代码根本不起作用，我真的不知道，我做了其他这样的 ajax 调用，它运行良好，但我不知道为什么这个代码根本不起作用，请帮忙？php 文件中根本没有日期。

```
$('.1').click(function(){
    $.ajax({
        type: 'GET',
        url: 'src/rate.php',
        data: 'rate=1&tut=12',
        success: function(msg){
            $('#view_tut_rating_container').html(msg);

        }

    });
}); 
```

这里也是php文件

```
 require '../config/global.php';
require 'functions.php';
if (isset($_GET['rate'] && isset($_GET['tut']))) {
    $rate = security($_GET['rate']);
    $tut = security($_GET['tut']);
    mysql_query("UPDATE tutorials set clicks = clicks+1 where id = '$tut'");
    mysql_query("UPDATE tutorials set rating = rating+'$rate' where id = '$tut'");
    echo getRatingById2($tut);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:43:35.263

如果这`.1`是一个锚点，请尝试通过从 .click 处理程序返回 false 来取消默认操作。类名也不能以数字开头。您将不得不更改您的代码：

```
$('.someClassName').click(function(){
    $.ajax({
        type: 'GET',
        url: 'src/rate.php',
        data: { rate: '1', tut: '12' },
        success: function(msg){
            $('#view_tut_rating_container').html(msg);
        }
    });

    return false;
}); 
```

还要注意将参数传递给服务器的首选方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:44:32.493

类名不能以整数开头。基本规则！！！将您的代码更改为：

```
$(".a1").click(function(){ ... }); 
```

并将 HTML 更改为：

```
<img class="a1" /> 
```

代替：

```
<img class="1" /> 
```

因为第二个是错误的。

* * *

另一件事是，`data`以首选格式 (JSON) 给出值。

```
data: {rate: '1', tut: '12'}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:50:27.690

试试这个代码。刚刚经过测试，对我来说工作正常。

```
<script>

$(document).ready(function(){ 
            $('.1').on("click",function(){

                                        alert("test");
                $.ajax({
                    type: 'GET',
                    url: 'rate.php',
                    data: 'rate=1&tut=12',
                    success: function(msg){
                        $('#view_tut_rating_container').html(msg);

                    }

                });
            });

})
</script>

<input type="button" class="1" value="ss"  />
<div id="view_tut_rating_container"></div> 
```

在你的 php 文件中`if (isset($_GET['rate'] && isset($_GET['tut'])))`

`if (isset($_GET['rate']) && isset($_GET['tut']))`我猜一定是

# sql - 获取表中最后 X 行中值出现的次数

> ID：15053365
> 
> 赞同：0
> 
> 时间：2013-02-24T15:40:47.370
> 
> 标签：sql, postgresql, postgresql-9.2

我正在为我的服务编写一个 nagios 插件，我想检查有多少最后的 X 操作导致了错误。

我想出了这个可以完成这项工作的查询，但是从 select 中选择对我来说似乎很乱，我想知道是否还有其他可能更优雅的解决方案。

```
SELECT 
  count(id) 
FROM 
  (SELECT * FROM table ORDER BY id DESC LIMIT 10) as T 
WHERE error IS NOT NULL; 
```

这会计算表中最后 10 行中的行数（id 是一个不断递增的序列），其中错误字段不为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:57:47.207

这个解决方案非常优雅。查询必须做两件事：识别最后十行，然后计算错误数。这种结构准确地捕获了它需要做的事情。

您可以摆脱该`where`子句，只需使用：

```
select count(error) 
```

子句中的子查询`from`非常有用，没有理由认为它们“不优雅”。

# arrays - php：变量后的名称数组

> ID：15053366
> 
> 赞同：1
> 
> 时间：2013-02-24T15:40:48.013
> 
> 标签：arrays, variables, for-loop

我在 for 循环中使用变量变量来命名我的数组时遇到问题。这是我的代码

```
 <?php
 $which_innerarray = 0;

 for($i=0;$i<10;$i++)
            {
             $a{$which_innerarray} = array(1,2,3,4);
             $which_innerarray++;
            }

 print_r($a1);
 ?> 
```

这目前抛出一个错误：未定义的变量 a1。

我可能有语法问题，但我似乎找不到它。任何帮助表示赞赏。

谢谢，

理查德·麦德森。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:43:00.147

尝试：

```
${"a{$which_innerarray}"} = array(1,2,3,4); 
```

但这看起来像代码气味。为什么不使用数组来代替？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:49:35.647

以这种方式尝试：

```
 <?php

 $which_innerarray = 0;

 for($i=0;$i<10;$i++)
            {
             ${'a'.$which_innerarray} = array(1,2,3,4);
             $which_innerarray++;
            }

 print_r($a1);
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T15:51:21.567

试试这个代码。

```
$which_innerarray = 0;
$a = Array();

for($i=0;$i<10;$i++)
{
    $a[$which_innerarray] = Array(1,2,3,4);
    $which_innerarray++;
}

print_r($a[1]); 
```

# jsf-2 - AJAX 侦听器没有被解雇 里面

> ID：15053370
> 
> 赞同：0
> 
> 时间：2013-02-24T15:41:06.657
> 
> 标签：jsf-2, primefaces

我正在尝试为页面上显示的 alist f 项目实现“将项目添加到购物车”功能`<p:dataList>`。添加按钮是一个[p:selectBooleanButton](http://www.primefaces.org/showcase/ui/selectBooleanButton.jsf)。

我已将 ajax 侦听器附加到按钮以将当前项目添加到支持 bean 中的集合中。但是，没有调用侦听器方法，但按钮呈现更新。

附上`valueChangeListener`作品，但我认为我不应该使用它？

**但是，无论哪种情况，我的分页都会停止工作。单击任何分页按钮不会更改页面内容。**

有人可以提供同样的帮助或建议更好的方法吗？

以下是代码：

**支持豆**

```
@ManagedBean(name = "movies")
@ViewScoped
public class MovieListBean extends BaseBean implements Serializable
{
   private static final long serialVersionUID = -1887386711644123475L;

   private LazyDataModel<Movie> lazyModel;

   private Map<Integer, Rental> cart;

   @PostConstruct
   public void initialize() {
      cart = new HashMap<>(0);
   }

   public LazyDataModel<Movie> getLazyModel() 
   {
      if (lazyModel == null) 
      {
         lazyModel = new LazyDataModel<Movie>() {

            private static final long serialVersionUID = -858683609299266223L;

            @Override
            public List<Movie> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String, String> filters) 
            {
               List<Movie> movieList = serviceLocator.getMovieService().getMovieCatalogInRange(first, (first + pageSize));
               this.setRowCount(serviceLocator.getMovieService().getCatalogSize());
               return movieList;
            }
         };
      }
      return lazyModel;
   }

   public void updateCart(Object obj)
   {
      System.out.println("Selected Movie ID" + obj);
      if (lazyModel != null)
      {
         System.out.println("Selected row in datalist - " + lazyModel.getRowIndex());
         System.out.println("Object instance associated with selected row - " + lazyModel.getRowData());
      }
      // Process object instance and add to cart
   }

   public Map<Integer, Rental> getCart() {
      return cart;
   }

   public void setCart(Map<Integer, Rental> cart) {
      this.cart = cart;
   }

} 
```

**索引.xhtml**

```
<ui:composition template="/WEB-INF/templates/template.xhtml">
   <ui:define name="content">
      <h:outputStylesheet name="movies.css" library="styles" />

      <h:form prependId="false" id="form">
         <p:dataList value="#{movies.lazyModel}" var="movie" id="movies" paginator="true" rows="10"
            paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
            type="none" paginatorAlwaysVisible="false" lazy="true">

            <p:panel id="movieInfo">
               <h:outputText value="#{movie.movieName}" styleClass="titles" />
               <div id="infoContainer">
                  <div>
                     <h:graphicImage library="images" name="#{movie.imageUri}" />
                  </div>
                  <div>
                     <div>
                        <h:outputText value="#{movie.plotLine}" />
                     </div>
                     <div class="rating">
                        <span>Rating : </span>
                        <p:rating value="#{movie.rating}" stars="10" readonly="true" />
                     </div>
                     <div id="rent">
                        <p:selectBooleanButton offLabel="Add to Cart" onLabel="Remove from Cart" id="btnRent"
                        value="#{not empty movies.cart[movie.movieID]}">
                           <p:ajax update="btnRent" listener="#{movies.updateCart (movie.movieID)}" event="click"/>
                        </p:selectBooleanButton>
                     </div>
                  </div>
               </div>
            </p:panel>

         </p:dataList>
      </h:form>

   </ui:define>
</ui:composition> 
```

我正在使用 JSF 2.1 (Mojarra) + Primefaces 3.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:02:58.177

你的价值`p:selectBooleanButton`是`#{not empty movies.cart[movie.movieID]}`。这是不可能的。它应该是一个布尔左值，一些带有 getter 和 setter 的属性。您认为 JSF 在使用 AJAX 发送时会如何设置字段？由于此按钮位于数据表中，您可以将它们的值组织为布尔数组。

# java - Eclipse 依赖项搜索中的 Maven 插件失败

> ID：15053372
> 
> 赞同：0
> 
> 时间：2013-02-24T15:41:22.377
> 
> 标签：java, maven, eclipse-plugin, m2eclipse

我有一个 Maven 架构的新项目。当我尝试向我的项目添加依赖项时，m2e 找不到与我的请求匹配的 jar（搜索结果始终为空）。 ![](../Images/4818ebbec8ac66c63540d476e8b636b7.png)

我的 Eclipse 设置允许下载工件源。(Preferences->Maven) Maven 存储库有 settings.xml（默认设置）。更重要的是，它里面有一些罐子，但 Eclipse 仍然看不到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-23T19:59:17.730

转到*窗口 → 显示视图 → 其他 → Maven/Maven 存储库*。单击“确定”。转到*Maven Repositories → Global Repositories/central*，右键单击并从上下文菜单中选择*Rebuild Index 。*重建需要一些时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:28:09.837

m2e 插件有很多错误。所以我建议你使用官方的[maven 存储库](http://search.maven.org)站点并通过 copy-past 将依赖项添加到你的 pom.xml

**如果您想使用 m2e 插件，请检查首选项。可能您需要添加一些存储库**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:06:27.093

我找到了答案。Settings.xml 必须如下所示。

```
 <mirrors>
  </mirrors>
  <profiles>
    <profile>
      <id>jdk-1.4</id>
      <activation>
        <jdk>1.4</jdk>
      </activation>
      <repositories>
        <repository>
          <id>jdk14</id>
          <name>Repository for JDK 1.4 builds</name>
          <url>http://www.myhost.com/maven/jdk14</url>
          <layout>default</layout>
          <snapshotPolicy>always</snapshotPolicy>
        </repository>
      </repositories>
    </profile>
    <profile>
      <id>home</id>
      <repositories>
        <repository>
          <id>central</id>
          <name>Repo for maven</name>
          <url>http://repo1.maven.org/maven2</url>
          <layout>default</layout>
        </repository>
        <repository>
            <id>jboss</id>
            <url>http://repository.jboss.com/maven2</url>
        </repository>
      </repositories>
    </profile>
  </profiles>

  <activeProfiles>
    <activeProfile>home</activeProfile>
  </activeProfiles> 
```

要使 m2e 正常工作，启动时的 Window-Preferences-Maven-Update 索引必须为 true。或者通过 Show View-Maven Repositories-Global-Rebuild Index 更新 maven 仓库

# c - 我如何使用 PEM 加密和解密数据 - OPENSSL、C、BIO

> ID：15053373
> 
> 赞同：0
> 
> 时间：2013-02-24T15:41:48.043
> 
> 标签：c, encryption, openssl, pem

以下代码可以成功加密和解密我的数据。

```
size_t pri_len;
size_t pub_len;
char *pri_key;
char *pub_key;
char message[AES_KEY_SIZE];
char *encrypted = NULL;
char *decrypted = NULL;

int pub_exp = 37;

RSA *keyPair = RSA_generate_key(2048,pub_exp,NULL,NULL);
BIO *pri = BIO_new(BIO_s_mem());
BIO *pub = BIO_new(BIO_s_mem());
//char passwordTemp[16] = "helloworld";
//pem_password_cb();

PEM_write_bio_RSAPrivateKey(pri,keyPair,NULL,NULL,0,NULL,NULL);
PEM_write_bio_RSAPublicKey(pub,keyPair);

pri_len = BIO_pending(pri);
pub_len = BIO_pending(pub);

pri_key = (char*)malloc(pri_len + 1);
pub_key = (char*)malloc(pub_len + 1);

BIO_read(pri,pri_key,pri_len);
BIO_read(pub,pub_key,pub_len);

pri_key[pri_len] = '\0';
pub_key[pub_len] = '\0';

//generate random number to encrypt
unsigned char randNum[AES_KEY_SIZE];
this->generateRandomNum(randNum,AES_KEY_SIZE);

char *encrypt2 =(char*) malloc(RSA_size(keyPair));
int encrypt_len2;
if((encrypt_len2 = RSA_public_encrypt(AES_KEY_SIZE,randNum,(unsigned char*)encrypt2,keyPair, RSA_PKCS1_OAEP_PADDING))==-1)
{
    printf("error");
}
else
{
    printf("encrypt success");
}

char *decrypt2 = (char*) malloc(RSA_size(keyPair));
if(RSA_private_decrypt(encrypt_len2,(unsigned char*) encrypt2, (unsigned char*) decrypt2,keyPair,  RSA_PKCS1_OAEP_PADDING)==-1)
{
    printf("error");
}
else
{
    printf("decrypt success");
} 
```

但是，如果我想存储我的 PEM 文件并稍后使用它，它如何再次使用我的密钥来加密和解密数据？

我找到了以下用于恢复我的 RSA 密钥的函数，但是，如果我使用其中任何一个密钥来解密我的数据，就会发生错误......

： 尝试读取或写入受保护的内存

```
RSA *keyPair2 = PEM_read_bio_RSAPrivateKey(pri,NULL,0,NULL);
RSA *keyPair3 = PEM_read_bio_RSAPublicKey(pub,NULL,0,NULL);

char *decrypt2 = (char*) malloc(RSA_size(keyPair2));
if(RSA_private_decrypt(encrypt_len2,(unsigned char*) encrypt2, (unsigned char*) decrypt2,keyPair2,  RSA_PKCS1_OAEP_PADDING)==-1)
{
    printf("error");
}
else
{
    printf("decrypt success");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:48:14.747

您需要使用私钥加密密钥，然后保存在文件中。但是，私人的安全很重要。您可以考虑使用 PKCS #8 来安全地存储私钥。

# centos - mysqld 无法启动

> ID：15053380
> 
> 赞同：0
> 
> 时间：2013-02-24T15:42:36.027
> 
> 标签：centos, restart, mysql

我正在尝试启动mysqld，但它不会启动..

```
[root@jack ~]#service mysqld restart
Interruzione di mysqld:                                    [  OK  ] 
```

它停在这里..它不会启动..可能是什么问题？有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:09:23.380

问题是分区满了！！！:) 只需删除一些文件并启动 mysqld 让它再次工作！;)

# r - 矩阵重组

> ID：15053383
> 
> 赞同：1
> 
> 时间：2013-02-24T15:42:53.970
> 
> 标签：r

我有一个 6 行的矩阵和一个长度为 6 的向量，我想用它来重新组织我的矩阵。

我的新矩阵的第一行应该包含我的向量第一个数字的值所在的行。

我的新矩阵的第二行应该包含我的向量第二个数字的值所在的行。

这是一个例子：

```
> Matrix <- matrix(rnorm(30),nrow=6,ncol=5)
> Vector <- c(1,3,6,2,4,5) 
```

实际的第一行将在操作后位于第一行位置。实际的第二行将在操作后位于第三行位置。实际操作后的第三行将在第六行位置。等等....

我希望我的解释足够清楚！

为了让我的问题更清楚，我做了这个编辑

**编辑：**

```
> Matrix=matrix(c(1,2,3,4,5,6,7,8,9),nrow=3,ncol=3,byrow=T)
> Matrix

        [,1][,2][,3]
    [1,] 1    2   3
    [2,] 4    5   6  
    [3,] 7    8   9

> Vector=c(2,3,1) 
```

我想重新组织行以获得这个：

```
> NewMatrix=matrix(c(4,5,6,7,8,9,1,2,3),byrow=T)
> NewMatrix

        [,1][,2][,3]
    [1,] 4    5   6
    [2,] 7    8   9 
    [3,] 1    2   3 
```

第 2 行现在在第 1 位，第 3 行现在在第 2 位，第 1 行现在在第 3 位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:49:07.863

使用向量索引：

```
Matrix[Vector,] 
```

要查看发生了什么，最好使用不同的`Matrix`：

```
Matrix=matrix(1:30, nrow=6)
Matrix
##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    7   13   19   25
## [2,]    2    8   14   20   26
## [3,]    3    9   15   21   27
## [4,]    4   10   16   22   28
## [5,]    5   11   17   23   29
## [6,]    6   12   18   24   30
Matrix[Vector,]
##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    7   13   19   25
## [2,]    3    9   15   21   27
## [3,]    6   12   18   24   30
## [4,]    2    8   14   20   26
## [5,]    4   10   16   22   28
## [6,]    5   11   17   23   29 
```

# c++ - 使用类堆栈

> ID：15053384
> 
> 赞同：1
> 
> 时间：2013-02-24T15:42:56.993
> 
> 标签：c++

我对课堂比较陌生，我对这个例子有一些问题要问。我想做的是使用堆栈来实现中缀算术表达式。我该如何开始？它是一个空指针吗？或者它是否特别返回任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:49:00.923

`void push (void*)`是一种接收指向 void 作为参数的指针的方法。指向 void 的指针意味着您可以发送任何数据类型的地址作为参数。但请注意，对数据的任何更改都会在堆栈内部和堆栈外部受到影响（因为您传递的是指针而不是数据的副本）

# php - 联系表单提交后如何重定向到感谢页面 - Wordpress 高级主题联系我们 php 模板

> ID：15053388
> 
> 赞同：3
> 
> 时间：2013-02-24T15:43:26.620
> 
> 标签：php, wordpress, forms, redirect, contact

我正在开发一个 Wordpress 主题，我正在尝试让主题附带的自定义联系表单在成功完成后重定向到感谢页面，以便我可以使用 adwords 转换跟踪。

尽管我已经查看了 Stackflows 以前关于此主题的问题/答案，但我仍在努力寻找解决问题的正确代码/解决方案（坦率地说，我对代码知之甚少）。对于这方面的任何帮助，我将非常感激！这是代码...

```
<?php
/*
Template Name: Contact Form
*/
?>

<?php 
global $woo_options;
$nameError = '';
$emailError = '';
$commentError = '';

//If the form is submitted
if(isset($_POST['submitted'])) {

//Check to see if the honeypot captcha field was filled in
if(trim($_POST['checking']) !== '') {
    $captchaError = true;
} else {

    //Check to make sure that the name field is not empty
    if(trim($_POST['contactName']) === '') {
        $nameError =  __( 'You forgot to enter your name.', 'woothemes' ); 
        $hasError = true;
    } else {
        $name = trim($_POST['contactName']);
    }

    //Check to make sure sure that a valid email address is submitted
    if(trim($_POST['email']) === '')  {
        $emailError = __( 'You forgot to enter your email address.', 'woothemes' );
        $hasError = true;
    } else if (!eregi( "^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$", trim($_POST['email']))) {
        $emailError = __( 'You entered an invalid email address.', 'woothemes' );
        $hasError = true;
    } else {
        $email = trim($_POST['email']);
    }

    //Check to make sure comments were entered  
    if(trim($_POST['comments']) === '') {
        $commentError = __( 'You forgot to enter your comments.', 'woothemes' );
        $hasError = true;
    } else {
        if(function_exists( 'stripslashes')) {
            $comments = stripslashes(trim($_POST['comments']));
        } else {
            $comments = trim($_POST['comments']);
        }
    }

    //If there is no error, send the email
    if(!isset($hasError)) {

        $emailTo = get_option( 'woo_contactform_email' ); 
        $subject = __( 'Contact Form Submission from ', 'woothemes' ).$name;
        $sendCopy = trim($_POST['sendCopy']);
        $body = __( "Name: $name \n\nEmail: $email \n\nComments: $comments", 'woothemes' );
        $headers = __( 'From: ', 'woothemes') . "$name <$email>" . "\r\n" . __( 'Reply-To: ', 'woothemes' ) . $email;

        //Modified 2010-04-29 (fox)
        wp_mail($emailTo, $subject, $body, $headers);

        if($sendCopy == true) {
            $subject = __( 'You emailed ', 'woothemes' ).get_bloginfo( 'title' );
            $headers = __( 'From: ', 'woothemes' ) . "$name <$emailTo>";
            wp_mail($email, $subject, $body, $headers);
        }

        $emailSent = true;

    }
}
} ?>

<?php get_header(); ?>

<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery(document).ready(function() {
jQuery( 'form#contactForm').submit(function() {
    jQuery( 'form#contactForm .error').remove();
    var hasError = false;
    jQuery( '.requiredField').each(function() {
        if(jQuery.trim(jQuery(this).val()) == '') {
            var labelText = jQuery(this).prev( 'label').text();
            jQuery(this).parent().append( '<span class="error"><?php _e( 'You forgot to enter your', 'woothemes' ); ?> '+labelText+'.</span>' );
            jQuery(this).addClass( 'inputError' );
            hasError = true;
        } else if(jQuery(this).hasClass( 'email')) {
            var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
            if(!emailReg.test(jQuery.trim(jQuery(this).val()))) {
                var labelText = jQuery(this).prev( 'label').text();
                jQuery(this).parent().append( '<span class="error"><?php _e( 'You entered an invalid', 'woothemes' ); ?> '+labelText+'.</span>' );
                jQuery(this).addClass( 'inputError' );
                hasError = true;
            }
        }
    });
    if(!hasError) {
        var formInput = jQuery(this).serialize();
        jQuery.post(jQuery(this).attr( 'action'),formInput, function(data){
            jQuery( 'form#contactForm').slideUp( "fast", function() {                  
                jQuery(this).before( '<p class="tick"><?php _e( '<strong>Thanks!</strong> Your email was successfully sent.', 'woothemes' ); ?></p>' );
            });
        });
    }

    return false;

});
});
//-->!]]>
</script>

<div id="content" class="col-full">
    <div id="main" class="col-left">

    <?php if ( isset($woo_options[ 'woo_breadcrumbs_show' ]) && $woo_options[ 'woo_breadcrumbs_show' ] == 'true' ) { ?>
        <div id="breadcrumbs">
            <?php woo_breadcrumbs(); ?>
        </div><!--/#breadcrumbs -->
    <?php } ?>  

        <div id="contact-page" class="post">

        <?php if(isset($emailSent) && $emailSent == true) { ?>

            <p class="info"><?php _e( 'Your email was successfully sent.', 'woothemes' ); ?></p>

        <?php } else { ?>

            <?php if (have_posts()) : ?>

            <?php while (have_posts()) : the_post(); ?>

                    <h1 class="title"><?php the_title(); ?></h1>

                    <div class="entry">
                        <?php the_content(); ?>
                    </div>

                <?php $geocoords = $woo_options['woo_contactform_map_coords']; ?>
                <?php if ($geocoords != '') { ?>
                <?php woo_maps_contact_output("geocoords=$geocoords"); ?>
                <?php echo do_shortcode( '[hr]' ); ?>
                <?php } ?>

                <?php if(isset($hasError) || isset($captchaError) ) { ?>
                    <p class="alert"><?php _e( 'There was an error submitting the form.', 'woothemes' ); ?></p>
                <?php } ?>

                <?php if ( get_option( 'woo_contactform_email') == '' ) { ?>
                    <?php echo do_shortcode( '[box type="alert"]'.__( 'E-mail has not been setup properly. Please add your contact e-mail!', 'woothemes' ).'[/box]' );  ?>
                <?php } ?>

                <form action="<?php the_permalink(); ?>" id="contactForm" method="post">

                    <ol class="forms">
                        <li><label for="contactName"><?php _e( 'Name', 'woothemes' ); ?></label>
                            <input type="text" name="contactName" id="contactName" value="<?php if(isset($_POST['contactName'])) echo $_POST['contactName'];?>" class="txt requiredField" />
                            <?php if($nameError != '') { ?>
                                <span class="error"><?php echo $nameError;?></span> 
                            <?php } ?>
                        </li>

                        <li><label for="email"><?php _e( 'Email', 'woothemes' ); ?></label>
                            <input type="text" name="email" id="email" value="<?php if(isset($_POST['email']))  echo $_POST['email'];?>" class="txt requiredField email" />
                            <?php if($emailError != '') { ?>
                                <span class="error"><?php echo $emailError;?></span>
                            <?php } ?>
                        </li>

                        <li class="textarea"><label for="commentsText"><?php _e( 'Message', 'woothemes' ); ?></label>
                            <textarea name="comments" id="commentsText" rows="20" cols="30" class="requiredField"><?php if(isset($_POST['comments'])) { if(function_exists( 'stripslashes')) { echo stripslashes($_POST['comments']); } else { echo $_POST['comments']; } } ?></textarea>
                            <?php if($commentError != '') { ?>
                                <span class="error"><?php echo $commentError;?></span> 
                            <?php } ?>
                        </li>
                        <li class="inline"><input type="checkbox" name="sendCopy" id="sendCopy" value="true"<?php if(isset($_POST['sendCopy']) && $_POST['sendCopy'] == true) echo ' checked="checked"'; ?> /><label for="sendCopy"><?php _e( 'Send a copy of this email to yourself', 'woothemes' ); ?></label></li>
                        <li class="screenReader"><label for="checking" class="screenReader"><?php _e( 'If you want to submit this form, do not enter anything in this field', 'woothemes' ) ?></label><input type="text" name="checking" id="checking" class="screenReader" value="<?php if(isset($_POST['checking']))  echo $_POST['checking'];?>" /></li>
                        <li class="buttons"><input type="hidden" name="submitted" id="submitted" value="true" /><input class="submit button" type="submit" value="<?php esc_attr_e( 'Submit', 'woothemes' ); ?>" /></li>
                    </ol>
                </form>
                <?php endwhile; ?>
            <?php endif; ?>
        <?php } ?>

        </div><!-- /#contact-page -->                
    </div><!-- /#main -->

    <?php get_sidebar(); ?>

</div><!-- /#content -->

<?php get_footer(); ?> 
```

抱歉发布所有代码（与没有线索有关），但我不确定哪些位相关/需要更改。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:39:25.963

你想具体实现什么？发送确认电子邮件后，您想将用户重定向到一个完全不同的页面吗？你可以在 PHP 中做到这一点，它就像替换行一样简单：

```
$emailSent = true; 
```

像这样：

```
header('Location: http://www.mysite.com/thankyoupage.htm');
exit(); 
```

或者，您可以在显示“电子邮件已成功发送”消息几秒钟后使用 javascript/jquery 重定向用户。

# jquery - 将 FullCalendar 日期传递给我的对话框模式表单

> ID：15053390
> 
> 赞同：2
> 
> 时间：2013-02-24T15:43:35.263
> 
> 标签：jquery, asp.net-mvc, jquery-ui, fullcalendar

我正在使用全日历，我想要的是将单击的日期传递给对话框模式表单（asp.net mvc PartialView）。这是我现在的代码：

```
 $calendar.fullCalendar({

        events: "/Home/CalendarData",
        dayClick: function (date) {
            $calendar.fullCalendar("renderEvent", { title: "on process", start: date}, true);

            $("#editDialog").html('')
            .load("/Home/About", function () {
                $("#editDialog").data("value", date).dialog("open");
            });
        }
    }); 
```

如您所见，我已经尝试使用 data() 函数将值传递给我的对话框。有没有办法让我的 PartialView 访问该数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:25:26.740

您应该能够使用 $.load 的第二个参数传递 json 有效负载

例如

```
$calendar.fullCalendar({
        events: "/Home/CalendarData",
        dayClick: function (date) {
            $calendar.fullCalendar("renderEvent", { title: "on process", start: date}, true);

           var payLoad = {
              ‘selectedDate’ : date
           };

            $("#editDialog").html('')
            .load("/Home/About", payLoad, function () {
                $("#editDialog").data("value", date).dialog("open");
            });
        }
    }); 
```

在上面的例子中，我们创建了一个名为**payLoad**的 json 对象，并通过 $.load 方法传入。**现在，您可以在控制器操作上通过名称selectedDate**定义一个变量并捕获该值

# batch-file - 创建一个批处理来解析一个文本文件，找到一个文件夹并复制它和它的树

> ID：15053393
> 
> 赞同：1
> 
> 时间：2013-02-24T15:43:40.637
> 
> 标签：batch-file

我很难让它发挥作用。这是我的批处理文件，只是为了测试我放了一个内部集。我想解析一个包含文件夹名称列表的文本文件，找到该文件夹​​并仅复制该文件夹及其内容及其树。

```
@echo off
setlocal
set str=SMX47
for /f "delims=" %%a in ('dir /b /s /o-d /ad') do if "%%~na" == "%str%" copy "%%a" "C:\Test\testcopy" 
```

它找到一个名为的文件夹`SMX47`并将其内容仅复制到该文件夹​​中`testcopy`。我想得到：

`\GP\GV\SMX47\`（所以树）和文件夹的内容`SMX47`。

谢谢你们的帮助。山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:19:49.837

这是一种方法。当一切正常时，删除暂停、@echo on 和 @echo off（最后）。

```
@echo off
set str=SMX47
for /f "delims=" %%a in ('dir /b /s /o-d /ad') do (
   if "%%~na" == "%str%" (
      call :CopyFolderStructure "%%a"
      )
   )
pause
goto :eof

:CopyFolderStructure
set FolderStructure=%~1
call set FolderStructure=%%FolderStructure:%cd%=%%
@echo on
xcopy /i /y "%~1\*.*" "C:\Test\testcopy%FolderStructure%\"
@echo off
goto :eof 
```

# actionscript-3 - AS3 从类修改根时间线中的变量集

> ID：15053395
> 
> 赞同：0
> 
> 时间：2013-02-24T15:43:53.357
> 
> 标签：actionscript-3, class, variables

我是 Action Script 3 的新手，我的根时间轴上有一个变量，用于设置我的游戏角色的速度：

```
var userSpeed:Number = 2; 
```

现在，我有一个射击课程，并且我添加了一个命中测试，这样当我射击一个加电时，它会将速度更改为 4（默认值的两倍），但是由于这是我的课程，我想知道我怎么能在类中从此处修改变量。

```
if(this.hitTestObject(speedPower) || this.x < 0 || this.x > stage.stageWidth || this.y < 0 || this.y > stage.stage.height)
{
this.removeEventListener(Event.ENTER_FRAME, moveShot);
this.parent.removeChild(thisshootTurret);
this.parent.userSpeed = 4;
} 
```

访问变量的方式只是一个随机猜测，我在互联网上找不到任何适合我的问题的东西或问题，所以这就是我能想到的。

当前的方式给了我这个错误：

```
1119: Access of possibly undefined property userSpeed through a reference with static type flash.display:DisplayObjectContainer. 
```

当我尝试时，我得到了同样的错误：

```
root.userSpeed = 4; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T16:51:31.427

我对 AS3 也很陌生，而且这个问题有点晚了，但这是我学到的关于从类中访问 root 的知识：

```
Movieclip(root).userSpeed = 4; 
```

应该做的伎俩。您还可以从类中调用根函数：

```
Object(root).myfunction(); 
```

永远不要从你的构造函数中调用 root 或 parent，它会返回 null。您可以使用 Event.ADDED 函数和事件处理程序来规避这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:16:33.430

任何时候您在时间轴上定义变量或函数（无论它是主时间轴还是特定时间轴），它们都会被添加到与拥有时间轴`MovieClip`相关联的类（如果有的话，没有必要将每个类关联到每个`MovieClip`） 。`MovieClip`

虽然主时间线始终与**文档类**（主类）相关联，并且您在主时间线上创建变量，然后您可以直接在主类的构造函数中使用它，但要考虑到一件重要的事情，时间线上定义的变量直到帧你给他们赋值的时候就会执行。

从你的代码我猜`this.parent`是主类的参考 - 文档类。如果这是真的，那么只需使用以下代码：

```
if(this.hitTestObject(speedPower) || this.x < 0 || this.x > stage.stageWidth || this.y < 0 || this.y > stage.stage.height)
{
    this.removeEventListener(Event.ENTER_FRAME, moveShot);
    this.parent.removeChild(thisshootTurret);
    this.parent.userSpeed = 4; // You just access userSpeed variable because it 
                               // is member of Main class.
} 
```

# postgresql - 在 PostgreSQL 中使用相关表进行全文搜索

> ID：15053400
> 
> 赞同：2
> 
> 时间：2013-02-24T15:44:13.360
> 
> 标签：postgresql, search, full-text-search, search-engine, postgresql-9.1

任务：在 PostgreSQL 中的多个表中实现全文搜索。

比如一个项目表——projects：有两个字段需要搜索：title和description。在这个表上创建一个索引：

```
ALTER TABLE public.projects ADD COLUMN search_fts tsvector;
UPDATE public.projects SET search_fts =
to_tsvector(
    coalesce(title, '') ||' '||
    coalesce(description, '') || ' '
);
CREATE INDEX in_projects_idx ON public.projects
  USING gin (search_fts); 
```

现在搜索很简单：

```
SELECT
    DISTINCT p.id,
    p.title,
    ts_rank(
        p.search_fts,
        to_tsquery('word1 | word2')
    ) as rank
FROM
    projects p
WHERE
    p.search_fts @@ to_tsquery('word1 | word2')
ORDER BY rank DESC; 
```

精致。现在我们需要查看表和项目类别——project_categories。类似于创建 tsvector 和为表上的字段名。现在的搜索查询是：

```
SELECT
    DISTINCT p.id,
    p.title,
    category.name as categoryName,
    ts_rank(
        (
            coalesce(p.search_fts, '') ||' '||
            coalesce(category.search_fts, '')
        ),
        to_tsquery('word1 | word2 | categoryName')
    ) as rank
FROM
    projects p
LEFT JOIN project_categories category
    ON p.category_id = category.category_id
WHERE
    (
        coalesce(p.search_fts, '') ||' '||
        coalesce(category.search_fts, '')
    ) @@ to_tsquery('word1 | word2 | categoryName')
ORDER BY rank DESC; 
```

更精致。现在搜索必须以一对多和多对多的形式在几十个与项目相关的表上工作。

加入人数越来越多。结合到越来越多的领域。

实际上这个问题是我要去的正确方式吗？你将如何解决这个问题？

我也考虑了有视图的版本。例如，基于这样的请求：

```
(
  SELECT 
      p.id as project_id,
      p.search_fts
  FROM projects p
) UNION ALL (
  SELECT 
      p.id as project_id,
      category.search_fts
  FROM projects p
  JOIN project_categories category
      ON p.category_id = category.category_id
) 
```

最后，我们得到整体指数。通过哪个搜索。但在视图中必须结合十几个不同通信选项的请求。对您对此选项的看法感兴趣。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:51:24.710

你有几个选择：

*   在所有输入表上使用触发器来维护一个汇总表，该汇总表将所有感兴趣的记录组合到文本行中。这适用于简单的情况，例如`customer`具有 1个或多个条目`phone`和一个或多个`address`条目的 a，您可以将其放入摘要搜索表中，就像`|customername|customerid|phone1|phone2|phone3|...|address1|address2|...`使用简单连接和`string_agg`过度连接表一样。但是，它对深度嵌套关系的扩展性很差，并且可能会带来一些锁定和并发问题。

*   使用旨在解决复杂搜索问题的外部搜索系统，例如 Apache Solr。

# c# - 如何在一个数据库命中中将多个插入或更新推送到一起 - 对于多数据库（SQL Server、Oracle、MySQL 和 PostgreSQL）应用程序

> ID：15053405
> 
> 赞同：-1
> 
> 时间：2013-02-24T15:44:42.563
> 
> 标签：c#, sql, database, sql-injection, database-performance

我正在尝试为我们的项目开发一个**支持多个数据库**（此时**SQL Server、Oracle、MySQL 和 PostgreSQL ）的****数据层库**。数据库服务器通常会托管在**公共云**中。数据访问（选择、插入、更新、删除）是从 Windows 窗体客户端和 Web 服务器执行的。winforms 客户端迫使我以这样一种方式设计东西，即进行最少的数据库往返。

 ******我遇到的问题是“**如何在一个数据库命中中将多个插入或更新推送到一起**”。

我已经对此进行了大量的谷歌搜索和研究，并且知道参数化插入/更新是记住 SQL 注入攻击的方法。但它不适合我，因为我不想多次往返数据库。

BulkCopy 是特定于 SQL Server 的，主要用于插入。

存储过程/XML - 我有不同的数据库，这使得为每个数据库维护存储过程变得困难和困难。而且表的数量也不是静态的，可以随时引入新表或更改现有表，因为应用程序本质上是非常动态的。

对我来说最好的选择（此时）是连接 sql 字符串（当然使用 StringBuilder）并一次性触发查询。我查看了**owasp-esapi-dotnet 库**（[http://code.google.com/p/owasp-esapi-dotnet/](http://code.google.com/p/owasp-esapi-dotnet/)），但没有实现 sql 编码（以防止 sql 注入）。此外，该项目现在看起来已经死了（最后一次提交是在 2010 年 12 月）。

是否有任何开源实现来处理多个数据库（至少 SQL Server、Oracle、MySQL 和 PostgreSQL）的 SQL 注入？

有没有其他方法可以实现这个目标（在单个数据库往返中进行多次插入/更新）？

我在 .NET 4 上使用 C#。

编辑：我们正试图将其作为一种产品推出，客户将有机会选择/选择他/她想要的任何数据库供应商。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:14:49.473

如果这是我的问题，我会在 sql server 上设置链接服务器。然后我会编写存储过程，从您的应用程序中接受必要的参数并处理它们。******

# c++ - Eclipse C++ 不在调试中构建 .txt 文件

> ID：15053407
> 
> 赞同：1
> 
> 时间：2013-02-24T15:44:44.373
> 
> 标签：c++, eclipse, build

我有一个从 .txt 文件中读取信息的 C++ 项目。当我在 Eclipse 中调试时，一切都运行正常，但是当我使用调试 .exe 在 Eclipse 之外运行应用程序时，它找不到文本文件。这是因为 Eclipse 没有在调试文件夹中构建文本文件（不确定为什么当我在 eclipse 内部调试时它会运行）。

我的项目中有一个文件夹，其中包含我的所有文本文件，并且整个文件夹没有在 /Debug 文件夹中构建。我查看了一些文件属性，并且没有勾选“从构建中排除”等选项。我不知道还有哪里可以检查。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T15:54:55.640

C++ 编译器不与`.txt`文件交互，这些文件在运行时动态加载。

我相信您的问题是您将文件名放在相对于程序运行位置的可执行文件中。这可能是一个问题，因为当 eclipse 启动它时，您的程序可能会在不同的位置运行。

例子：

```
Project File
    Bin
          Executable.exe
    Program.cpp
    text.txt 
```

如果您有这种类型的结构，并且您通过工具运行程序，它可能会将[工作目录](http://en.wikipedia.org/wiki/Working_directory)设置为`Project File`，因此文本文件的相对路径将是`text.txt`. 但是，如果您要从文件内部启动程序，`bin`则文本文件的相对路径将是`..\text.txt`

一个简单的解决方案是将`text.txt`文件放在`bin`文件和`project file`或不使用`relative path`但使用`absoulte path`

`Absoulte path`是当你像这样写下从根开始的路径时`C:\Project File\text.txt`

# java - Java 视频聊天 Web 应用程序

> ID：15053410
> 
> 赞同：2
> 
> 时间：2013-02-24T15:45:17.320
> 
> 标签：java, flash, video-streaming, p2p

首先，我应该说我在这方面没有很好的知识，我也没有要求给我一个完整的解决方案，但我真的希望得到你的任何帮助（建议，有用的资源阅读等）。这是我的情况：

我想做的事：我想开发带有视频聊天的简单 Java WEB 应用程序。我想让它的用户有机会打电话给其他用户并进行对话。一次只能在一个房间的两个人之间进行对话（不再有）。该网站将拥有许多用户的个人资料，他们将能够通过视频聊天进行交流。我曾经想把它做成 p2p，但现在我有一些疑问，如果我可以通过使用任何流媒体服务器来简化我的工作，我会选择它。

我现在有什么经验：我有使用 Java、HTML、JavaScript 的经验，在 Spring Framework、Hibernate、Maven 方面经验很少。

另一个信息：我想让它尽可能简单。我什至不想使用像Spring这样的框架，我最好使用纯servlet和jsp。我只有一点时间来做这件事，这就是为什么我宁愿只使用 Java 技术（如 servlet、applet）而不是使用其他技术（如 Flash）。但我不知道我是否可以在没有 Flash 的情况下做到这一点。无论如何，如果它们对成功非常重要，我可以学习其他技术。

请给我一些建议，使用什么和阅读什么来找到清晰的愿景。

# data-binding - 如何将模型属性绑定到视图类

> ID：15053413
> 
> 赞同：1
> 
> 时间：2013-02-24T15:45:42.337
> 
> 标签：data-binding, ember.js, handlebars.js

这里的文档：

[http://emberjs.com/guides/views/customizing-a-views-element/](http://emberjs.com/guides/views/customizing-a-views-element/)

讨论将类名绑定到视图中的真/假值。有没有办法将我的模型属性之一绑定到视图类名称？

例如

```
App.Category = DS.Model.extend({
    name:  DS.attr('string'),
    type: DS.attr('string'),  // The loaded model could have a type of 'typeA' or 'typeB'
});

App.CategoryView = Ember.View.extend({
   classNameBindings: ['type'],
   type: function(){
       return this.model.get('type'); // This doesn't work obviously
   },
   tagName: 'li'
}); 
```

会渲染

```
<li class="typeA"> [template_contents_are_here] </li> 
```

编辑：使用 Ember 1.0rc

# 编辑 2

所以我更进一步，现在可以从我的函数返回一个值。然而，它只在我的第一次迭代中返回正确的值。我从服务器加载了一系列模型，每个模型都使用 {{control}} 帮助器进行渲染（因此为每次渲染创建一个新视图和控制器）

```
App.CategoryView = Ember.View.extend({
       classNameBindings: ['type'],
       type: function(){
           return this.controller.get('model.type');
       }.property()
       tagName: 'li'
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:43:25.883

我更新了你的小提琴：http: [//jsfiddle.net/mavilein/hutYc/8/](http://jsfiddle.net/mavilein/hutYc/8/)

定义计算属性时，需要声明它依赖的属性：

```
App.CategoryView = Ember.View.extend({
   classNameBindings: ['type'],
   type: function(){
       return this.get('context.type');
   }.property("context.type"),
   tagName: 'li'
}); 
```

**请注意**，我用一种更“修饰”的方式替换了您访问 type 属性的方式。视图应始终根据其上下文工作。

# android - 将触摸事件分派到不同的窗口（如 PopUpWindow 或对话框窗口）

> ID：15053415
> 
> 赞同：0
> 
> 时间：2013-02-24T15:46:01.743
> 
> 标签：android, events, touch, dispatch

我对 Touch Event Dispatch 有一个疑问。

通常 Activity 与一个窗口相关联，因此如果我使用如下所示的代码，事件将正确分派到这些坐标处的相应视图。

getWindow().getDecoreView().dispatchTouchEvents()。

但是如果一些新的窗口出现在屏幕上，（如 Dialog 或 PopUpWindow）如何将事件发送到这些窗口？

1.  是否有任何可用的 API？

2.  任何想法，Android 框架如何将事件调度到最集中的最顶部窗口？

3.  如果我们可以从框架中公开 API，任何指向特定类或函数的指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T12:16:45.257

android中的事件是逐级调度的。事件从**activity->ViewGroup->View**开始，你可以实现这些方法来控制事件的派发：

```
dispatchTouchEvent(MotionEvent)

onTouchEvent(MotionEvent)

onInterceptTouchEvent(MotionEvent) 
```

# c++ - dll注入 - 简单的主要

> ID：15053418
> 
> 赞同：0
> 
> 时间：2013-02-24T15:46:25.480
> 
> 标签：c++, winapi, dll

我正在尝试将 dll 注入 .exe，我编写了这个简单的 main 代码，但没有创建我的文件。我用 cpp 代码注入它，但我不认为注入器是问题所在。

```
DWORD WINAPI Main_thread( LPVOID lpParam)
{
  std::ofstream myfile;
  myfile.open ("C:\\Users\\root\\Desktop\\example.txt");
  myfile << "success" << std::endl;
  myfile.close();
  return S_OK;
}

BOOL APIENTRY DllMain(HMODULE hModule, DWORD  _reason, LPVOID lpReserved)
{
  if (_reason == DLL_PROCESS_ATTACH)
     CreateThread(0, 0x1000, &Main_thread, 0, 0, NULL);
  return true;
} 
```

喷油器代码：

```
#include <iostream>
#include <Windows.h>
#include <TlHelp32.h>

using namespace std;
bool InjectDLL(DWORD ProcessID);

char dllPath[250] = "C:\\Users\\root\\Desktop\\testdll\\bin\\Debug\\testdll.dll";
char ProcessName[] = "chrome.exe";
typedef HINSTANCE (*fpLoadLibrary)(char*);

int main()
{
DWORD processId = NULL;
PROCESSENTRY32 pe32 = {sizeof(PROCESSENTRY32)};
HANDLE hProcSnap;
hProcSnap = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);
if(Process32First(hProcSnap, &pe32))
{
    do{
         if(!strcmp(pe32.szExeFile, ProcessName))
        {
            processId = pe32.th32ProcessID;
            break;
        }
    }while(Process32Next(hProcSnap, &pe32));
}
if (!InjectDLL(processId))
        cout << "DLL failed to inject" << endl;
}

bool InjectDLL(DWORD ProcessID)
{
HANDLE hProc;
LPVOID paramAddr;
HINSTANCE hDll = LoadLibrary("KERNEL32");
fpLoadLibrary LoadLibraryAddr = (fpLoadLibrary)GetProcAddress(hDll, "LoadLibraryA");
hProc = OpenProcess (PROCESS_ALL_ACCESS, false, ProcessID);
paramAddr = VirtualAllocEx(hProc, 0, strlen(dllPath)+1, MEM_COMMIT, PAGE_READWRITE);
bool memoryWritten = WriteProcessMemory(hProc, paramAddr, dllPath, strlen(dllPath)+1, NULL);
CreateRemoteThread(hProc, 0, 0, (LPTHREAD_START_ROUTINE)LoadLibraryAddr, paramAddr, 0, 0);
CloseHandle(hProc);
return memoryWritten;
} 
```

dll似乎没有被注入或者他不能写，我没有以root身份启动注入器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:07:34.010

您可以从任务管理器诊断您的问题，添加 PID 列。或者使用 SysInternals 的 Process Explorer。您会看到 Chrome.exe 启动了许多自身的实例。第一个只显示 UI，不参与浏览网页。您将看到其他选项卡，每个选项卡对应您在浏览器中打开的每个选项卡。

*那些其他实例是特殊的，它们在沙箱*中运行附加组件和脚本代码。旨在使 Chrome 对可能导致浏览器崩溃或挂起的网页或脚本具有弹性。但尤其是在删除所有特权的运行时环境中运行代码，这样它就不会弄乱用户的机器。就像您尝试编写的那种代码一样。

所以你的 Process32First/Next() 迭代器太简单了，它会选择它首先找到的任何 Chrome.exe 实例。很有可能它是一个沙盒，不会让你弄乱它的那种。您只能注入用户启动的实例，即仅显示 UI 的实例。这通常是这种黑客行为的有用性结束的地方，在这种情况下没有什么有趣的东西可以解决。

# c# - MVC Web 应用程序基本设计

> ID：15053424
> 
> 赞同：1
> 
> 时间：2013-02-24T15:47:05.757
> 
> 标签：c#, asp.net-mvc

我目前正在开发一个小型 Web 应用程序项目，我想使用 Microsoft MVC4 框架进行开发。我对Web开发的经验很少，所以请多多包涵。

在大多数情况下，它是一个典型的数据、业务逻辑、视图 Web 应用程序。但是，也有一些操作是 CPU 密集型的，并且需要相当长的时间才能返回结果（它们是由用户直接使用参数请求的）。

我考虑过编写一个单独的 Web 服务，它只负责昂贵的操作，以减少主 Web 应用程序的负载，但我不确定这是否正确。另外，如果我确实使用了单独的 Web 服务，那么 Web 应用程序的哪个组件应该与它通信？视图，通过 AJAX 调用，控制器..？

我可以有一些关于如何将所有这些放在一起的快速指南吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:04:42.833

您可以通过 AJAX 加载加载所有数据。很简单。

首先创建将 JSON 返回给 View 的 Controller。

```
 [HttpPost]
    public ActionResult GetData()
    {
        var data= "your data from db or web service"
        return Json(data);
    } 
```

其次使用 AJAX 获取数据。

```
function GetData(cityID) {
    $.ajax({
        url: '/Controler/GetData',
        type: 'POST',
        dataType: 'json',
        success: function (results) {
          //your data is in results varible
        },
        error: function (jqXHR, textStatus, errorThrown) {
        }
    });
} 
```

这非常快，因为所有方法都将被异步调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T15:53:22.277

> Web 应用程序的哪个组件应该与它通信？

控制器。视图应该只调用您的控制器操作。然后由控制器负责查询一些服务，构建模型并将此模型传递给视图。

# javascript - 除非被调用，否则不要在 erb 中运行 JS

> ID：15053430
> 
> 赞同：2
> 
> 时间：2013-02-24T15:47:26.977
> 
> 标签：javascript, ruby-on-rails

我有一个带有 ajax GET 到 ruby​​ 函数的页面。Get 请求应返回变量@player。当ajax“成功”时，它应该调用函数popPools

```
$.ajax({
  type: "GET",
  data: { faceid : response.id },
  url: "/pool/mMypools2",
  success: popPools()
  })

function popPools(){
  $("<%= content_tag(:p, @player[0].id) %>"
  ).appendTo(document.getElementById("asd"));} 
```

我的问题是函数 popPools 在 ajax 有机会从 mMypools 响应中获取新变量之前被自动调用。

```
error:
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

因为 onload @player 什么都不包含。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:07:17.747

删除末尾的括号`popPools`：

```
$.ajax({
  type: "GET",
  data: { faceid : response.id },
  url: "/pool/mMypools2",
  success: popPools
  }) 
```

您将 popPools 函数的*结果*作为值`success`而不是函数本身传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:24:18.930

听起来您试图在响应模板中做太多事情。Ajax 代码确实属于控制器级别，因为它试图从您的应用程序中获取数据。模板应该保持“哑”，只响应传递给它的变量。

为了解决这个问题，我会将您的文件顶部完全移出响应模板。一旦你在控制器级别正确加载了@player，然后继续你的响应。哦，别忘了 Javascript 转义生成的 HTML 或返回`content_tag`函数的任何引号都会破坏 jQuery。

*文件.js.erb：*

```
$(
  "<%= j content_tag(:p, @player[0].id) %>"
 ).appendTo(document.getElementById("asd"));} 
```

我希望这个建议会有所帮助。

# c# - spriteBatch.DrawString 如何从编译的 spritesheet 纹理中绘制文本？

> ID：15053435
> 
> 赞同：0
> 
> 时间：2013-02-24T15:48:11.350
> 
> 标签：c#, xna, drawstring, spritebatch

每个`spriteBatch.DrawString(spriteFont, "text", new Vector2(10, 20), Color.White)`调用是分别绘制文本字符串`spriteBatch.Draw`的每个字母（每帧调用每个字母），还是制作一个纹理并重新绘制它，还是以其他方式工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:00:18.620

它在内部为每个字母调用 SpriteBatch.Draw()。然后当您调用 SpriteBatch.End() 时，它会将整个批次和您在调用 .Begin() 后可能绘制的任何其他 Texture2D 精灵交给 GPU 进行渲染。

# matlab - MATLAB 类型::偶数

> ID：15053437
> 
> 赞同：0
> 
> 时间：2013-02-24T15:48:19.047
> 
> 标签：matlab

我浏览了这个文档的例子：

[表示偶数整数的类型和属性 - MATLAB](http://www.mathworks.com/help/symbolic/mupad_ref/type-even.html)

我什至复制粘贴了示例 1。但似乎我遇到了错误：

```
>> testtype(2, Type::Even),
testtype(-4, Type::Even),
testtype(8, Type::Even),
testtype(-11114, Type::Even),
testtype(4185296581467695598, Type::Even)

 testtype(2, Type::Even),
                 |
Error: Unexpected MATLAB operator. 
```

该文档也可以在我的 Matlab 帮助窗口中看到。有谁知道我做错了什么？提前致谢。

[我知道我可以用其他方式测试这些。但我想知道为什么它不起作用。]

# php - Moov 原子重定位

> ID：15053438
> 
> 赞同：2
> 
> 时间：2013-02-24T15:48:20.653
> 
> 标签：php, html, video, mp4

我正在开发一个用于 html5 视频上传和播放的项目，但我遇到了以下问题：

> 有些视频在完全加载后播放，那是因为`moov atom`放在文件末尾。现在，我需要把它放在`moov atom`视频文件的开头。

浏览互联网后，我找到了我想包含在我的项目中的[这个库。](http://www.phpkode.com/source/p/dolphin-sns/plugins/moovrelocator/lib/Moovrelocator.class.php)我的问题是我不知道如何包含和使用这个库来处理我的视频

有人知道更多吗？请给我解释一下，因为我搜索了整个互联网并没有找到解释。

PS 我知道存在自动交换 moov atom 的程序，但我没有选择使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:15:59.860

您提供的链接是名为 Dolphin SNS 的更大框架的一部分： [http ://www.phpkode.com/projects/item/dolphin-sns/](http://www.phpkode.com/projects/item/dolphin-sns/)

您想要使用的是 MoovRelocator 库本身，它实际上是由不同的作者（并且恰好被 Dolphin SNS 使用过）。这是 MoovRelocator 实际项目页面的链接：

[http://code.google.com/p/moovrelocator/](http://code.google.com/p/moovrelocator/)

其中指出：

“如果您需要演示文件（demo/demo.mp4 + demo/index.php），那么您应该下载存档版本（特色下载）。”

希望你现在会发现这更容易弄清楚......

# javascript - 找出两个哈希数组的差异

> ID：15053441
> 
> 赞同：2
> 
> 时间：2013-02-24T15:48:35.193
> 
> 标签：javascript, angularjs, underscore.js

我有两个数组`oldArray`和`newArray`. 当一个新值被输入时`newArray`，我想比较`oldArray`并取出新值。

在这些数组中，我存储哈希。

例如。

```
oldArray = []
newArray = [{"one": 1}] 
```

我需要找到新元素，即`{"one": 1}`

使用 underscore.js 我可以做这样的事情：

```
newElement = _.difference(newValue, oldValue) 
```

第一次效果很好，但是当我回去向数组添加更多内容时：

```
oldArray = [{"one": 1}]
newArray = [{"one": 1},{"two": 2}] 
```

做同样的事情 `newElement = _.difference(newValue, oldValue)`

我`[{"one": 1},{"two": 2}]`作为新对象回来了……是因为我在比较对象而不是值吗？有一个更好的方法吗。

以上是一个示例，但从我的应用程序中，我从控制台中提取了它

```
oldValue map.js:85
[Object]
0: Object
$$hashKey: "007"
address: "england"
latLng: GeoCode
__proto__: Object
length: 1
__proto__: Array[0]

newValue map.js:83
[Object, Object]

0: Object
$$hashKey: "007"
address: "england"
latLng: GeoCode
__proto__: Object

1: Object
$$hashKey: "009"
address: "france"
latLng: GeoCode
__proto__: Object
length: 2
__proto__: Array[0] 
```

当我比较这两个时，我得到：

```
[Object, Object]
0: Object
$$hashKey: "007"
address: "england"
latLng: GeoCode
__proto__: Object

1: Object
$$hashKey: "009"
address: "france"
latLng: GeoCode
__proto__: Object
length: 2
__proto__: Array[0] 
```

我目前在这个项目中使用 AngularJS 和 Underscore。

也许这样做会更好。我只需要从该数组中取出“不同”的对象。所以我可以用它来做其他事情。它并不总是最后一个元素。

**更新**

我也尝试过 JavaScript 数组集数学库并使用`.substract`但结果相同。这一定意味着哈希值正在改变——但在我看来它们不像

为了得到这些`oldArray`，`newArray`我正在使用 Angular $watch。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:27:18.437

如果`$$hashKey`始终是唯一的，那么您可以创建两个对象并将散列的键设为`$$hashKey`.

```
newObject[myObject["$$hashKey"]] = myObject; 
```

然后

```
var difference = _.omit(newObject, _.keys(oldObject)); 
```

将为您提供一个对象，该对象仅包含新对象中的键/值对，而不是旧对象中的键/值对。

如果没有唯一键，不太方便的方法是将对象序列化和反序列化为字符串，然后使用`_.difference`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:41:08.043

不久前我遇到了一个类似的 AngularJS 挑战。虽然我不确定我是否可以为您提供有关如何管理此问题的绝对最佳答案，但我可以说对我有用：

首先：确保您正确使用 $watch。它需要3个参数：

*   watchExpression – {(function()|string)} – 在每个 $digest 循环中评估的表达式。返回值的更改会触发对侦听器的调用。字符串：评估为表达式函数（范围）：以当前范围作为参数调用。
*   listener(optional) – {(function()|string)=} – 只要 watchExpression 的返回值发生变化，就会调用回调。字符串：评估为表达式函数（newValue，oldValue，scope）：以当前值和先前值作为参数调用。
*   **objectEquality(optional)** – {boolean=} – 比较对象是否相等而不是参考。

最后一段尤为重要。你想在你的情况下观察 objectEquality ，所以一定要像这样使用 $watch ：

`$scope.$watch('watchObject', fn({}), true);`

注意`true`上面第三个参数的使用。在[Angular Scope 文档中查看更多信息](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)中查看更多信息。

第二：当区分 Angular 对象时，我认为比较 $$hashKeys 的答案可能很有意义。您也可以考虑编写自己的 diff 函数，具体取决于您想要返回的内容。如果您想返回差异并且您只是查看比较基本对象，请尝试以下操作：[jQuery objectDiff](https://github.com/cdinger/jquery-objectdiff)

第三：如果您想将一个对象与其中的嵌套对象和/或数组进行比较，事情会变得很困难。我为此编写了一个未优化的方法，如果您需要它，我会很乐意提供更多信息。

祝你好运！

# opengl - 在 CUDA 中修改 OpenGL FBO 纹理附件

> ID：15053444
> 
> 赞同：2
> 
> 时间：2013-02-24T15:48:53.043
> 
> 标签：opengl, cuda

我有以下情况：

我有带有纹理作为颜色附件的自定义 FBO。我将我的东西渲染到那个 FBO。下一步我需要与 CUDA 共享该纹理，然后在其上运行一些后处理内核。然后纹理应该绑定回全屏四边形并渲染到默认帧缓冲区。我已经阅读[了几个 OpenGL / CUDA 互操作教程](http://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_website/Graphics_Interop.html)，其中一些步骤对我来说并不完全清楚。

首先，我看到他们通常做的是从 GL 纹理 X 读取数据，在 CUDA 中处理它，然后使用 PBO 填充纹理 Y 和结果数据。

我注意到的另一件事（如果我错了，请纠正我）是这些演示中的 OpenGL 默认使用 PBO 绑定，这意味着将第一遍渲染结果存储到其中？我真的不确定，因为所有这些演示都使用固定的 OpenGL，并且在渲染初始几何传递时，我看不到 PBO 绑定的地方。

回到我的案例：我的最后一个问题是——我可以在不使用 PBO 的情况下直接在 CUDA 中对 OpenGL 纹理进行操作，以便我可以在 CUDA 内核中对其进行修改吗？如果不是，那么这是否意味着我必须在将 FBO 纹理传递到 CUDA 阶段之前将其打包到 PBO 中？

**更新：**

从帧缓冲区填充 PBO 通常使用 glReadPixels() 完成，这意味着它被下载到 CPU。这是我想要阻止的。- 那是错误的假设。因此，基于我可以用纹理中的像素填充 PBO 的事实，下面的方法是什么？：用纹理中的数据填充 PBO。

将其映射到 CUDA 缓冲区资源。

使用内核对数据进行更改。

从修改后的 PBO 更新目标纹理。

在 OpenGL 中使用更新的纹理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:08:39.020

> 从帧缓冲区填充 PBO 通常使用 glReadPixels() 完成，这意味着它被下载到 CPU。这是我想要阻止的。

错误的！

glReadPixels 到 PBO 完全在 GPU 上执行，不会往返于系统内存。

### 更新：

CUDA 图形互操作有几个限制。例如，当图形资源绑定在图形上下文中时，您不能将图形资源映射到 CUDA 内存；具体来说，您可以映射它，但是对它的任何访问都会产生未定义的结果。因此，通常的策略使用代理对象。

因此，如果所讨论的 OpenGL 资源由于某种原因无法解除绑定，则使用 PBO 作为从 OpenGL 到 CUDA 的中介是一种有价值的方法。但是，对于 FBO，这并不重要，因为绑定到 FBO 的任何内容都不能用作数据源，只要它被绑定即可。由于该限制，通常存在多个目标对象（渲染缓冲区或纹理）实例，以多缓冲区方式使用循环。

因此，要么复制它，要么在将其映射到 CUDA 之前取消绑定它。对于多个缓冲区，后者是首选方法。

使用 CUDA 纹理时，您应该始终在读取时写入不同的纹理（在纹理的情况下，您必须将它们绑定到 CUDA 表面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-12T18:16:09.447

这是在 CUDA 中处理“OpenGL 纹理”然后立即在 OpenGL 中使用它而没有额外开销的示例：

[https://github.com/nvpro-samples/gl_cuda_interop_pingpong_st](https://github.com/nvpro-samples/gl_cuda_interop_pingpong_st)

# asp.net-mvc - 当用户未通过身份验证时，这是处理页面内容视图的好方法吗

> ID：15053446
> 
> 赞同：2
> 
> 时间：2013-02-24T15:48:56.420
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

当我运行我的 asp mvc 站点时，用户看到的第一页是 Index from `HomeController`.

```
http://localhost:50975/ 
```

在该页面上显示的数据仅属于该用户。
当我注销用户时，我希望我的 URL 保持不变（实际上`www.site.com`）：

```
http://localhost:50975/ 
```

但没有内容（因为用户没有登录）。
我现在这样处理这个问题，但我想知道这是好方法还是有更好的方法（可能有）。
在我看来：

```
@if (Request.IsAuthenticated)
{... display data 
}
else{... show only some logo and login and register form 
```

我不知道我是否对我想要的内容足够清楚，基本上我希望当用户在主页上时，当用户经过身份验证而不是经过身份验证时，该 URL 保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T15:50:16.820

是的，这似乎可以在您的视图中处理，并根据用户是否经过身份验证包括不同的部分/部分。

但是，如果您发现自己在视图中重复这些 if 数百次，将其转换为意大利面条代码，您可能有 2 个不同的视图并在您的 Index 操作中处理这种情况：

```
public ActionResult Index()
{
    if (Request.IsAuthenticated)
    {
        return View("AuthenticatedIndex");
    }

    return View();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:51:45.863

也可以从控制器返回 2 个不同的视图。如果您已通过身份验证，则为一个，如果您未通过身份验证，则为一个。取决于两种观点的不同程度。

# oracle - “触发失败”是什么意思？

> ID：15053451
> 
> 赞同：-1
> 
> 时间：2013-02-24T15:49:10.993
> 
> 标签：oracle, oracle10g

我有这个问题要在 Oracle 中解决：

`ITEM`应该在表中的一行中插入、更新或删除数据之前触发触发器。当表中的行发生更改时`ITEM`，请检查该行是否存在于`ORD`表中。如果该`SHIPDATE`列在表中有值，则`ORD`使触发器失败。

“触发失败”是什么意思？我真的很困惑。

我不知道这是否意味着我不再更新表格，或者我只会引发错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:35:51.697

听起来这是一个家庭作业问题。如果是这样，您真的想请您的教授澄清作业。我们可以猜测，但我们的猜测可能与教授想要的不符。

我猜教授是在要求您在触发器中引发异常。

# box2d - box2d重力播放器下落速度更快

> ID：15053456
> 
> 赞同：1
> 
> 时间：2013-02-24T15:49:43.190
> 
> 标签：box2d, game-physics, jbox2d

我正在使用 box2d 为移动设备开发游戏。我通过这些代码创建了一个世界：

```
b2Vec2 gravity(0.0f, 9.8f);
bool doSleep = false;
b2World* g_World = new b2World(gravity, doSleep); 
```

它工作得很好。我有播放器对象。播放器像这样摔倒：

y轴：0、10、30、70..等。我的意思是它每秒钟下降得更快。但我希望它以相同的速度下降。比如：y轴：0、10、20、30..等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:52:58.190

身体在重力的作用下下落，所以顺理成章地加速下落。

如果在您的世界中不应该是重力，则将重力矢量设置为零并为身体设置线速度：

```
b2Vec2 gravity(0.0f, 0f);
bool doSleep = false;
b2World* g_World = new b2World(gravity, doSleep);

b2Body* body;
<.. creating body ..>
body->setLinearVelocity(0, 10); 
```

如果在你的世界中重力应该是，那么在 b2BodyDef 中将重力比例设置为零：

```
b2Vec2 gravity(0.0f, 9.8f);
bool doSleep = false;
b2World* g_World = new b2World(gravity, doSleep);

b2BodyDef bodyDef;
bodyDef.gravityScale = 0;
< .. set other body parameters ..>
b2Body* body;
<.. creating body ..>
body->setLinearVelocity(0, 10); 
```

如果您使用旧版本的 Box2D，并且 b2BodyDef 中没有该字段，那么您有两种解决方案：

*   像上面的代码一样设置一次线速度，并在每个更新步骤中施加与重力相反的力：

    ```
    // Update cycle
    g_World->Step(elapsed, 7, 4);
    body->ApplyForceToCenter(-gravity); 
    ```

*   如菲利普所说，在每个更新步骤应用线速度：

    ```
    // Update cycle
    g_World->Step(elapsed, 7, 4);
    body->ApplyLinearVelocity(0, 10); 
    ```

# c# - 在 C# 中移动字符串

> ID：15053461
> 
> 赞同：13
> 
> 时间：2013-02-24T15:50:17.263
> 
> 标签：c#, arrays, string, char, shift

```
 static void Main(string[] args)
  {
     string s = "ABCDEFGH";
     string newS = ShiftString(s);
     Console.WriteLine(newS);
  }
  public static string ShiftString(string t)
  {
     char[] c = t.ToCharArray();
     char save = c[0];
     for (int i = 0; i < c.Length; i++)
     {
        if (c[i] != c[0])
        c[i] = c[i - 1];
     }
     Console.WriteLine(c);
     String s = new string(c);
     return s;
  } 
```

我需要将字符串向左移动一个空格，所以我最终得到了字符串：“BCDEFGHA”所以我考虑将字符串更改为 char 数组并从那里开始工作，但我不确定如何成功这项工作。我很确定我需要一个 for 循环，但我需要一些关于如何将 char 序列向左移动一个空格的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-24T15:52:13.760

这个怎么样？

```
public static string ShiftString(string t)
{
    return t.Substring(1, t.Length - 1) + t.Substring(0, 1); 
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-24T15:54:44.023

你可以试试这个：

```
s = s.Remove(0, 1) + s.Substring(0, 1); 
```

作为扩展方法：

```
public static class MyExtensions
{
    public static string Shift(this string s, int count)
    {
        return s.Remove(0, count) + s.Substring(0, count);
    }
} 
```

然后你可以使用：

```
s = s.Shift(1); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-24T16:29:32.847

解决这种关于移位*n 个*位置的问题的算法是复制字符串，连接在一起并获得子字符串。( *n < 长度(字符串)* )

```
string s = "ABCDEFGH";
string ss = s + s; // "ABCDEFGHABCDEFGH" 
```

如果你想移动*n*位置，你可以做

```
var result = ss.Substring(n, s.length); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-24T15:54:50.033

我个人会这样做：

```
public static string ShiftString(string t){
    string firstLetter = t.Substring(0, 1);

    return t.Substring(1) + firstLetter;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-01-09T00:26:35.583

**在 C# 8 及更高版本中...**

向右旋转***一***...

```
t = myString[^1] + myString[..^1]; 
```

或者，向左旋转***一***...

```
t = myString[1..] + myString[0]; 
```

或者，向右旋转***一定量***...

```
t = myString[^amount..] + myString[..^amount]; 
```

或者，向左旋转***一定量***...

```
t = myString[amount..] + myString[..amount]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-24T15:58:39.077

您可以利用以下`string`事实`IEnumerable<char>`：

```
public static string ShiftString(string t){
    return new String(t.Skip(1).Concat(t).Take(t.Length).ToArray());
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-09-21T09:20:00.777

使用[Span<T>](https://docs.microsoft.com/en-us/archive/msdn-magazine/2018/january/csharp-all-about-span-exploring-a-new-net-mainstay)我们可以显着提高性能。例如：

```
public static class StringExtensions
{
    public static string ShiftString(this string s)
    {
        return string.Concat(s.AsSpan(1), s.AsSpan(0, 1));
    }
} 
```

## 基准

这个答案+现有答案。使用跨度，字符串的移动变得更快并且产生更少的垃圾。

```
|  Method |     Data |     Mean |   Median | Allocated |
|-------- |--------- |---------:|---------:|----------:|
|    L33t | ABCDEFGH | 18.56 ns | 18.21 ns |      40 B |
|  Zs2020 | ABCDEFGH | 36.04 ns | 35.20 ns |      96 B |
| JohnWoo | ABCDEFGH | 47.69 ns | 47.39 ns |     104 B |
|  AlinaB | ABCDEFGH | 52.56 ns | 52.07 ns |     104 B | 
```

## 完整的测试代码

```
using System;
using BenchmarkDotNet.Attributes;
using BenchmarkDotNet.Configs;
using BenchmarkDotNet.Diagnosers;
using BenchmarkDotNet.Diagnostics.Windows;
using BenchmarkDotNet.Running;

namespace ConsoleApp10
{
    class Program
    {
        static void Main(string[] args)
        {
            var summary = BenchmarkRunner.Run<StringShiftTest>();
        }
    }

    [Config(typeof(Config))]
    public class StringShiftTest
    {
        private class Config : ManualConfig
        {
            public Config() => AddDiagnoser(MemoryDiagnoser.Default, new EtwProfiler());
        }

        [Params("ABCDEFGH")]
        public string Data;

        [Benchmark]
        public string L33t() => string.Concat(Data.AsSpan(1), Data.AsSpan(0, 1));

        [Benchmark]
        public string Zs2020() => (Data + Data).Substring(1, Data.Length);

        [Benchmark]
        public string JohnWoo() => Data.Substring(1, Data.Length - 1) + Data.Substring(0, 1);

        [Benchmark]
        public string AlinaB() => Data.Remove(0, 1) + Data.Substring(0, 1);
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-24T16:00:51.763

StringBuilder 类为您提供更好的性能

```
static string ShiftString(string str)
{
    if (str == null) throw new ArgumentNullException();
    int strLen = str.Length;
    if (strLen == 0) return string.Empty;
    StringBuilder sb = new StringBuilder(strLen);
    sb.Append(str, 1, strLen - 1);
    sb.Append(str[0]);
    return sb.ToString();
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-09-15T18:40:01.433

下面的方法采用数字 n，它告诉您要移动/旋转字符串多少次。如果数字大于字符串的长度，我会按字符串的长度取 MOD。

```
public static void Rotate(ref string str, int n)
    {
        //if the rotation/shift number is less than or =0 throw exception
        if (n < 1)
            throw new Exception("Negative number for rotation"); 
        //if the String is less than 1 character no need to shift
        if (str.Length < 1) throw new Exception("0 length string");

        if (n > str.Length) // If number is greater than the length of the string then take MOD of the number
        {
            n = n % str.Length;
        }

        StringBuilder s1=new StringBuilder(str.Substring(n,(str.Length - n)));
        s1.Append(str.Substring(0,n));
        str=s1.ToString();

    } 
```

///可以利用String操作的Skip和Take函数

```
 public static void Rotate1(ref string str, int n)
    {
        if (n < 1)
            throw new Exception("Negative number for rotation"); ;
        if (str.Length < 1) throw new Exception("0 length string");

        if (n > str.Length)
        {
            n = n % str.Length;
        }

        str = String.Concat(str.Skip(n).Concat(str.Take(n)));

    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-05-07T16:18:38.033

你也可以通过一个简单的 LINQ 语句来实现：

注意：同样可以通过简单的 for 和/或 while 循环来实现

```
string a = "ABCDEFGH";  
a = new string(Enumerable.Range(0, a.Length).Select(i => (a[(i+1)%a.Length])).ToArray()); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-04-14T16:40:06.100

C# 8.0

```
private static string ShiftString(string t, int shift)
{
    if (shift < 0)//left
    {
        shift = -shift;
        return t[shift..] + t[..shift];
    }
    else//right
    {
        return t[(t.Length - shift)..] + t[..(t.Length - shift)];
    }
} 
```

# android - Android 4.2.2 USB 调试“始终允许从此计算机”选项导致设备的目标未知？

> ID：15053463
> 
> 赞同：16
> 
> 时间：2013-02-24T15:50:20.617
> 
> 标签：android, debugging, usb, adb, android-4.2-jelly-bean

选择“始终允许从此计算机”后，我无法将 4.2.2 android 设备与 PC 连接。

我在 4.2.2 USB 调试中选择了“始终允许来自这台计算机”，它第一次运行良好，但当我尝试其他时间时，我的设备总是显示离线。我尝试过使用另一个也是 4.2.2 的设备和 USB 调试弹出窗口，当我单击确定（未选择“始终允许从此计算机”）时，设备列表变为在线。

我尝试了以下方法，但没有奏效

*   adb kill-server/ adb start-server/ 和 adb devices
*   安装新的 eclipse、android SDK 和 ADT
*   插拔我的设备一千次
*   [尝试从此链接](https://stackoverflow.com/questions/15031411/after-upgrade-android-on-nexus-to-4-2-2-eclipse-shows-target-unknown-for-device)重复步骤

**一旦我选择了“总是允许来自这台计算机”，有没有办法摆脱？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-05-10T18:56:43.997

如[本期](http://code.google.com/p/android/issues/detail?id=51695)所述，如果您`adb`第一次以 root 身份运行，可能会发生这种情况。它会在您的计算机上创建一个由 root 用户拥有的密钥文件，因此您的普通用户帐户无法读取或覆盖它。

要检查是否是这种情况：

```
$ ls -l ~/.android/adbkey
-rw------- 1 root root 1708 Nov 13  2012 .android/adbkey
             ^ notice root here 
```

要解决这个问题：

```
$ sudo chown $USER: ~/.android/adbkey
$ ls -l ~/.android/adbkey
$ -rw------- 1 thomas thomas 1708 Nov 13  2012 /home/thomas/.android/adbkey
               ^ now shows your username and primary group 
```

最后，重启 adb 服务器：

```
$ adb kill-server
$ adb start-server 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-25T20:11:47.047

从 Android 设备的设置中撤消 USB 调试授权并在 PC 上重新启动 adb 服务器。连接到 PC 时将再次出现该对话框。

用于重启 ADB 服务器

$ adb 杀死服务器

$ adb 启动服务器

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-12T20:54:18.307

1.  在您的设备中：转到**设置**
2.  选择**开发者选项**
3.  点击**撤销 USB 调试授权**
4.  按**确定**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-25T21:24:41.490

当我连接运行 4.2.2 AOSP 构建的 Galaxy S3 时，我出现了弹出窗口以允许在我的设备上使用计算机进行调试。

![在此处输入图像描述](../Images/af2547a0fa7ef824d20b8e0aa77216e1.png)

![在此处输入图像描述](../Images/f9a9436e26e04304d5088e4f557e431a.png)

在 Eclipse 上 - 在您单击设备上的“确定”以允许使用机器进行 USB 调试之前，您会看到以下内容。按 OK 后，它应该会更改为 Target Android OS。

在您的情况下 - 在您第一次按下调试对话框后，您的设备似乎一直处于脱机状态。

*   尝试其他 4.2 Android 设备
*   您的设备上有自定义 ROM 吗？
*   你的ROM是AOSP吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T17:09:37.460

自从升级到 4.2.2 (Google Nexus 10) 以来，我一直遇到这个问题。

在设备选择器中，我不断将“未知”作为目标。

唯一对我有用的是：

*   断开设备与 PC/笔记本电脑的连接
*   关闭 Eclipse。
*   进入设备上的设置并禁用 USB 调试
*   重新启用 USB 调试
*   将设备重新连接到 PC/笔记本电脑
*   *等到*windows 检测到设备并显示自动播放窗口。
*   关闭此窗口
*   重新打开 Eclipse

这有点痛苦，但它对我有用！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-24T17:57:08.130

设备离线是很常见的......当这种情况发生时，我只是拔下并插入设备，没有重启任何东西！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-08T05:57:57.880

我有同样的问题，并意识到我最好只使用模拟器。要使用模拟器，请单击 eclipse 中的“Windows”选项卡，然后选择“Android Virtual Device Manager”。从那里创建一个新的模拟器，然后单击右侧的“开始”。之后，您可以选择尺寸，然后按“启动”。启动大约需要2-3分钟，但效果很好，非常方便！

祝你好运！:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-25T21:35:12.897

这是从第三个答案中的评论中提取的。

在验证 $HOME/.android/adbkey 和 adbkey.pub 的所有权是适当的用户后仔细检查它们实际上是非零文件大小（ ls -al $HOME/.android ）。

与原始评论相同的事情发生在我身上。只需删除这两个文件并重新启动 adb ( adb kill-server ; adb start-server )，你应该是正确的。好吧，它至少对我有用。

# javascript - 在 DOM 中搜索表

> ID：15053464
> 
> 赞同：1
> 
> 时间：2013-02-24T15:50:24.163
> 
> 标签：javascript, jquery, html, user-interface, user-controls

作为我正在进行的 UI 实验的一部分，我已经将拖放搜索组合在一起。

到目前为止，我有这个：

[http://jsfiddle.net/craigie2204/pJDPQ/20/](http://jsfiddle.net/craigie2204/pJDPQ/20/)

当您拖动天气按钮时，它只会显示下雨。我的问题是：

例如，这可以是一个附加过程吗？用户删除显示下雨的天气，然后在星期二下降一天。那么表格能否显示周二下雨的所有搜索结果？如果是这样，您能否提供有关如何实现这一目标的任何参考。

我还尝试在函数上设置时间间隔，以检查可放置的 div 是否具有类。这样一来，如果用户删除了可拖动项目，则与此 div 关联的字符串将从搜索中删除。这似乎行不通，任何人都可以向我指出如何做到这一点（如果可以的话）。

与往常一样，如果您想弄乱 JSfiddle，请成为我的客人。

PS。如上所述，代码有点杂乱无章，因为我只是把我在网上找到的一些代码放在一起以获得所需的用户体验，所以提前抱歉。

多谢你们，

克雷格

```
$(function () {
var $result = $('.result');
$('.drag').draggable({

});
$('.drop').droppable({
    drop: function (e, ui) {
        outputResult(ui.draggable);
    }
});

setInterval (outputResult(elm), 100);

function outputResult(elm) {
    if ($(elm).hasClass('oweatherType')) {

        searchTable("rain");

    } else if ($(elm).hasClass('oday')) {
        searchTable("Tuesday");
    } else if ($(elm).hasClass('olocation')) {
                searchTable("Scotland");
    }
}

});

function searchTable(weatherSelect) {
var table = $('#tblData');
table.find('tr').each(function (index, row) {
    var allCells = $(row).find('td');
    if (allCells.length > 0) {
        var found = false;
        allCells.each(function (index, td) {
            var regExp = new RegExp(weatherSelect, 'i');
            if (regExp.test($(td).text())) {
                found = true;
                return false;
            }
        });
        if (found === true) $(row).show();
        else $(row).hide();
    }
});
} 
```

# javascript - 引导 Backbone 应用程序

> ID：15053466
> 
> 赞同：5
> 
> 时间：2013-02-24T15:50:28.183
> 
> 标签：javascript, backbone.js, coffeescript, requirejs, amd

我已经看到了几种有关如何做到这一点的方法，但我永远无法弄清楚哪种方法是“正确的”方法。

[来自 NetTuts+ 的 Jeffrey Way](https://tutsplus.com/course/build-your-own-slide-engine/) 和[Addy Osmani](http://addyosmani.github.com/backbone-fundamentals/#exercise-building-a-modular-backbone-app-with-amd-requirejs)实例化了一个“主”应用程序视图，以启动他们的应用程序。

```
require(['views/app'], function(AppView) {
  new AppView();
}); 
```

[Railscasts 的 Ryan Bates](http://railscasts.com/episodes/323-backbone-on-rails-part-1)通过实例化一个路由器来启动他的应用程序，然后处理后续请求：

```
window.App =
    Models: {}
    Collections: {}
    Views: {}
    Routers: {}

    init: ->
        new App.Router()
        Backbone.history.start()
    }
}

$(document).ready ->
    App.init() 
```

这两种引导应用程序的方式之间是否有重要区别？

我非常喜欢 Ryan Bates 如何创建一个`App`对象，他将所有模型、视图都附加到该对象上……虽然他使用的是 CoffeeScript，但我不确定这是否会对这个对象的处理方式产生任何影响。我试过这个，但我无法让它与 RequireJS 一起工作：

```
require(['jquery', 'backbone', 'router'], function ($, Backbone, Router) {
    window.App = {
        Models: {},
        Collections: {},
        Views: {},
        Aggregator: _.extend({}, Backbone.Events),
        Hook: $('#application'),
        Router: Router,

        init: function() {
            new App.Router();
            Backbone.history.start();
        }
    }
    $(document)ready(function() {
        App.init();
    });
}); 
```

然后我有一个简单的路由器，它在索引路由被命中时创建一个 loginView：

```
define(['backbone', 'loginView'], function(Backbone, LoginView) {
  var Router = Backbone.Router.extend({

    routes: {
      '': 'index'
    },

    index: function() {
      var loginView = new LoginView();
    }  

  });

  return Router;
}); 
```

还有我的登录视图：

```
define(['backbone'], function(Backbone) {
  var LoginView = Backbone.View.extend({

  });

  return LoginView;
}); 
```

为了遵循 Ryan Bates 的工作方式，我想做一些类似的事情：

```
App.Views.LoginView = Backbone.View.extend({}); 
```

但我不太确定这与他在咖啡脚本中所做的有什么不同：

```
class App.Views.LoginView extends Backbone.View 
```

当我在 LoginView 的`initialize`方法中将“App”记录到控制台时，我从 main.js 文件中获取对象，但是，当我尝试将某些内容附加到 App.Views 对象时，它显示 App.Views 未定义。一定是在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T20:19:31.620

当您创建时：

```
App.Views.LoginView = Backbone.View.extend({}); 
```

它与以下内容完全不同：

```
class App.Views.LoginView extends Backbone.View 
```

您可以通过将咖啡脚本从[咖啡转换为 js](http://js2coffee.org/)来检查咖啡脚本：

```
var __hasProp = {}.hasOwnProperty,
__extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

App.Views.LoginView = (function(_super) {

  __extends(LoginView, _super);

  function LoginView() {
    return LoginView.__super__.constructor.apply(this, arguments);
  }

return LoginView;

})(Backbone.View); 
```

我建议查看[todomvc 的主干需要设置的存储库](https://github.com/tastejs/todomvc/tree/gh-pages/dependency-examples/backbone_require)。

我有一个coffeescript [todo设置](https://github.com/jmparsons/play-scala-backbone-todo)，它松散地基于两个未附加到窗口的全局应用程序对象，但使用子对象来保存集合、模型、视图等。

# performance - URL 重写会阻止 IIS 的静态文件缓存吗？

> ID：15053467
> 
> 赞同：8
> 
> 时间：2013-02-24T15:50:35.547
> 
> 标签：performance, caching, iis, url-rewriting, performance-monitor

如果我激活 IIS Rewrite 模块 File Cache Hits 计数器不会增加。

我正在通过性能监视器跟踪命中（perfmon.exe / Web Service Cache/File Cache Hits）

如果我根据 IIS 缓存算法停用重写“文件缓存命中”通常会增加。

在这两种情况下，请求的文件都是静态 html 文件。

URL 重写会阻止 IIS 的静态文件缓存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-09T03:21:38.127

[文档声明](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference)是的，IIS 重写*可以*防止文件缓存。

> **与 IIS 输出缓存的交互**
> 
> URL 重写模块控制 IIS 输出缓存行为，以便：
> 
> 优化利用内核模式和用户模式输出缓存对重写 URL 的响应，从而提高使用 URL 重写模块的 Web 应用程序的性能。当 URL 重写可能违反缓存逻辑时，防止缓存响应。该模块通过更改某些缓存属性或完全禁用缓存来控制输出缓存。如果模块已被 IIS 配置或 IIS 管道中的任何其他模块禁用，则该模块无法启用输出缓存。输出缓存控制如下：
> 
> 1.  该模块始终设置用户模式缓存设置 varyByHeader="HTTP_X_ORIGINAL_URL"。这确保了当启用用户模式缓存时，模块会考虑原始 URL 来构造缓存条目的键。
>     
>     
> 2.  如果重写规则集使用的服务器变量的值要么在整个过程的生命周期中保持不变，要么派生自请求的 URL，则认为该规则集对于输出缓存是安全的。这意味着 URL 重写模块不会以任何方式更改现有缓存策略，而不是按照步骤中所述设置 varyByHeader
>     
>     
> 
> 以下服务器变量在用于重写规则时不会对输出缓存策略产生任何影响：
> 
> “CACHE_URL”、“DOCUMENT_ROOT”、“HTTP_URL”、“HTTP_HOST”、“PATH_INFO”、“PATH_TRANSLATED”、“QUERY_STRING”、“REQUEST_FILENAME”、“REQUEST_URI”、“SCRIPT_FILENAME”、“SCRIPT_NAME”、“SCRIPT_TRANSLATED”、“UNENCODED_URL” "、"URL"、"URL_PATH_INFO"、"APP_POOL_ID"、"APPL_MD_PATH"、"APPL_PHYSICAL_PATH"、"GATEWAY_INTERFACE"、"SERVER_SOFTWARE"、"SSI_EXEC_DISABLED"
> 
> 3\. 如果重写规则集使用上述列表中未提及的任何服务器变量，则该规则集被认为对于输出缓存不安全。这意味着 URL 重写模块将禁用所有请求的内核模式缓存，无论请求 URL 是否被重写。此外，该模块将通过设置缓存属性 varyByValue 来更改用户模式缓存的缓存策略，以包含规则集中使用的所有服务器变量值的串联字符串。

# java - 在 JSP 页面中使用 java 类

> ID：15053468
> 
> 赞同：0
> 
> 时间：2013-02-24T15:50:41.757
> 
> 标签：java, jsp

我对 Java 很满意，但我对 JSP 页面没有经验。

我的索引页面上有一个简单的登录表单，它调用一个名为 LoginController 的 Java 类来验证详细信息。

我不知道如何将信息从 LoginController 传递到新的 JSP 页面。我确信这是一行简单的代码，但我找不到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:04:21.060

我一直在使用下面的方法，希望对你有帮助。我通常在我的 servlet 中调用其他类，这充当将我的 java 代码（模型）与 jsp（视图）连接起来的控制器，请参见下面的代码

`request.setAttribute("attribute_name", result_from_java_class);`

然后我创建一个调度程序，将结果发送到 jsp 页面：-

`RequestDispatcher dispatcher = request.getRequestDispatcher("name_of_the_jsp_file+extension");`

最后我转发它：

`dispatcher.forward(request, response);`

在jsp页面上检索结果ie从java类传过来的信息，会如下

`request.getAttribute("attribute_name");`

希望能帮助到你。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:38:50.667

Java Servlet 有一些范围（我知道 3）。因此，您可以使用包含在您的范围中的信息向您的 jsp 添加信息。

**请求范围** 与请求关联的对象。您可以在会话期间访问信息。

```
request.setAttribute("attribute_name", result_from_java_class); 
```

但有时您想在许多页面上显示一些信息，因此如果您使用请求范围，则需要始终设置此属性。

但是您可以使用**会话范围**（将对象与会话关联）。现在您可以在所有工作期间访问对象（关闭站点时会话关闭）。 `session.setAttribute("attribute_name", result_from_java_class);`

**上下文范围**

servlet 可以通过名称将对象属性绑定到上下文中。绑定到上下文中的任何属性都可用于属于同一 Web 应用程序的任何其他 servlet。它也有相同的方法

我希望这有帮助）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T16:30:32.767

你可以在 jsp 中做所有事情。使用 JAVA **MVC 框架**

**即使没有，您也可以使用Servlet**执行简单的反手操作，
或者您可以使用**Java Beans**，这是 Java bean 的简单业务逻辑实现示例，请参考[http://www.tutorialspoint.com/jsp/jsp_java_beans.htm](http://www.tutorialspoint.com/jsp/jsp_java_beans.htm)

下面给出了**Servlet的示例**

**索引.jsp**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>

<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <form action="add" method="post">
        Value 1:<input type="text" name="val1" id="val1"/><br>
        Value 2:<input type="text" name="val2" id="val2"/><br>
        <input type="submit" value="Submit"/><br>
        </form>
        <%String sum="";
         sum = (String)request.getAttribute("val3"); %>
        <input type="text" value="<%=sum%>" />
    </body>
</html> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>add</servlet-name>
        <servlet-class>controller.add</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>add</servlet-name>
        <url-pattern>/add</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

**添加.java**

```
package controller;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
public class add extends HttpServlet {
    String val3;
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

        String val1=request.getParameter("val1");
        String val2=request.getParameter("val2");
        if(val1 != null && val2 != null)
        val3=""+(Integer.parseInt(val1)+Integer.parseInt(val2));
        else
        val3="";
        request.setAttribute("val3",val3);
        request.getRequestDispatcher("index.jsp").forward(request, response); 

        try {
        } finally {            
            out.close();
        }
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>
} 
```

# ruby - 使用不带参数的“ruby”会冻结终端

> ID：15053471
> 
> 赞同：6
> 
> 时间：2013-02-24T15:51:01.133
> 
> 标签：ruby

我是 Ruby 新手，在 Ubuntu 12.04 机器上安装了 Ruby 1.9.3。

每当我`ruby`在终端中运行没有参数的命令时，它就会挂起并且什么也不做。它在我的 Windows XP 安装中做同样的事情。

这是预期的行为吗？来自 Python/Java 背景，我期待某种输出。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-24T15:53:37.520

这是意料之中的。当您运行 just`ruby`时，它会坐在那里，等待来自 STDIN 的程序，然后是文件结束符，然后执行程序。

如果你想要交互式，比如当你运行时`python`，你想要 Ruby 的`irb`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-24T19:00:20.587

*   在控制台中检查您的想法

    类型`irb`

*   在控制台中运行程序

    类型`ruby program_I_want_to_run.rb`

# java - 通过可调用 带参数

> ID：15053474
> 
> 赞同：1
> 
> 时间：2013-02-24T15:51:13.963
> 
> 标签：java, generics

我正在编写一个 Java 应用程序，其中包含一个从用户钱包中扣款的通用模块。

所以类如下：

```
public class BuyGiftForMyselfCallable implements Callable<Boolean> {

private String username;
private long coins;

public BuyGiftForMyselfCallable(final String username,final long coins) {
    this.username=username;
    this.coins=coins;
}

@Override
public Boolean call() throws Exception {

    ...
    } 
```

我想将这个类传递给一个不知道 BuyGiftForMyselfCallable 的函数。它只知道Callable！

所以我有以下内容：

```
function receiver(Callable<*> func) {
...
} 
```

如何在这个函数中创建类的新实例并将参数传递给构造函数，而不知道类的来源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:54:03.020

在这里， Callable 不是在寻找 的类型`BuyGiftForMyselfCallable`，而是在寻找它的 return: `Boolean`。

所以使用`Callable<Boolean>`，IE：

```
public void receive(Callable<Boolean> func){
  ...
} 
```

此外，您不会在此函数中创建 Callable 类的实例，而是在其他地方（构造函数和所有）创建它们 - 然后将它们传递给此函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:08:49.630

您可以在此处使用反射[示例](http://docs.oracle.com/javase/tutorial/reflect/member/methodInvocation.html)或使用`instanceof`来找出实现类是什么，然后用它做任何你想做的事情。但是正如@vikingsteve 在评论中提到的那样，您应该使用不同的方法来避免这样做的必要性

# c# - 石头到重量的转换，难以计算出确切的公式

> ID：15053480
> 
> 赞同：-1
> 
> 时间：2013-02-24T15:52:18.497
> 
> 标签：c#, converters

```
#region Weights
private double StoneToKg(double Stone, double pounds)
{
    return (Stone * 14 + pounds) * 0.4535970244035199;
}
private double[] KgToStone(double p)
{
    double T = (p * 0.1574714285714286);
    double Stn = Math.Floor(T);
    double Pounds = (T - Stn) * 14;
    return new double[2] { Stn, Pounds };
}
#endregion
#region Heights
private double CmToM(double Cm)
{
    return Cm * 0.01;
}
private double MToCm(double M)
{
    return M * 100;
}

private double FeetToMeters(double Feet, double inch)
{
    Feet *= 12;
    return (Feet + inch) * 0.025399999961392;
}
private double[] MetersToFeet(double Meters)
{
    double feet = Math.Floor(Meters * 3.2808399);
    double inch = (Meters * 3.2808399) - Math.Floor(Meters * 3.2808399);
    inch *= 12;
    return new double[2] { feet, inch };
}
private double feetInchToCentimeters(double feet, double inch)
{
    return MToCm(FeetToMeters(feet, inch));
}
private double[] CentimetersToFeetInch(double Cm)
{
    return MetersToFeet(CmToM(Cm));
}
#endregion 
```

这是我正在使用的转换代码，目前在从石头转换为公斤并返回时遇到问题（100 stn 0 磅转换为公斤并返回 107 stn 和 2.00000000000014 磅）但将 100 公斤转换为石头并返回工作，我认为它是四舍五入答案，但我不确定在哪里或如何修复，寻找一种方法来进行准确的转换，可以处理往返的转换。

但是，欢迎任何其他代码绑定和建议。

（我包括了高度转换，以防万一也有问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:06:02.070

当我尝试代码时，我没有得到你说的结果：

```
double kg = StoneToKg(100, 0);

Console.WriteLine(kg);

double[] st = KgToStone(kg);

Console.WriteLine(st[0]);
Console.WriteLine(st[1]); 
```

输出：

```
635,035834164928
100
1,98951966012828E-13 
```

那不是 107 块石头和 2 磅，而是 100 块石头和 0.0000000000002 磅。

这完全在您使用双精度数学可以预期的精度范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:02:11.147

如果我可以在这里称重（对不起双关语）......

这确实是两个问题。与真正的问题相比，代码似乎是一个微不足道的问题，许多学生往往难以解决。这个问题是单位转换和有效数字。

根据维基百科，一块石头大约等于 6.35 公斤，用于测量体重。因此，如果您尝试将石头转换为公斤，则需要返回 6.35029 * (#ofStones)，根据输入的精度四舍五入到最接近的百分之一（或千分之一）。

现在讨论第二个问题，即输入的精度。似乎您希望对石头和磅使用整数输入，否则将它们分开是没有意义的。要获得石头的十进制数，您需要将整数乘以 14，然后加上磅，然后将整个数字除以 14 并乘以 6.35029：

`[(intStones * 14) + pounds]/14 * 6.35029` --> 四舍五入到最接近的百分之一

这有意义吗？然后对于您的转换，我建议使用如下整数（注意整数除法和乘法规则会自动截断小数）：

```
public void KgToStoneAndPounds(double kg, out int stones, out int pounds)
{
    //Convert kg to lbs (keep sig fig rules, I always go one extra place in intermediate calculations)
    double totalPounds = Math.Round(kg * 2.20462, 3);

    stones = totalPounds / 14;
    pounds = Math.Round(totalPounds - (stones * 14), 0);
} 
```

从科学的角度来看，这将为您提供足够好的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T16:32:21.933

一块石头是 6.35029 公斤，每块石头有 14 磅。所以 ...

```
const double KgPerStone = 6.35029;
const double PoundsPerStone = 14;

public double StonesToKg(double stones, double pounds)
{
    double totalStone = stones + (pounds / PoundsPerStone);
    return totalStone * KgPerStone;
}

public double KgToStones(double kg, out pounds)
{
    double totalStone = kg / KgPerStone;
    double stone = Math.Truncate(totalStone)
    double frac = totalStone - Math.Truncate(stone);
    pounds = frac * PoundsPerStone;
    return stone;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T15:55:25.343

对于任何业务计算，最佳实践是使用具有精度和舍入的 BigDecimal，而不是使用浮点数或双精度数。

有关 float 和 double 适合纯数学和几何计算的详细原因，请参阅：[使用 JSTL/Tomcat 进行财务计算的最佳实践](https://stackoverflow.com/questions/14345147/best-practice-for-financial-calculations-using-jstl-tomcat)

# javascript - 使用 jQuery 在现有文本框内容之前插入文本

> ID：15053481
> 
> 赞同：0
> 
> 时间：2013-02-24T15:52:22.210
> 
> 标签：javascript, jquery, html

我有一个简短的 jQuery 脚本，可以`images:`在用户单击链接时将文本添加到搜索框中。但是，如果用户单击不同的选项卡而不是他们键入的搜索将被删除。我想保留用户输入的内容*（如果他们输入了任何内容）*，它将**始终**位于`:`. **可以删除之前的任何内容。**

我该怎么做呢？

我目前的 jQuery 是：

```
$(document).ready(function(){
    $("#navigation a").click(function(){
        $("#search").val($(this).attr("id")+': ').focus();
        return false
    });
}); 
```

我的 HTML 是：

```
<ul id="navigation">
    <li><a href="#" id="images">Images</a></li>
    <li><a href="#" id="videos">Videos</a></li>
    <li><a href="#" id="articles">News</a></li>
    <li><a href="#" id="weather">Weather</a></li>
</ul>

<input type="text" id="search"> 
```

您可以在 JSFiddle 上看到当前代码的工作示例：http: [//jsfiddle.net/Zusnw/](http://jsfiddle.net/Zusnw/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:57:18.697

我建议：

```
$("#navigation a").click(function(){
    var search = $('#search'),
        curVal = $('#search').val(),
        i = curVal.indexOf(':'),
        newVal = i !== -1 ? curVal.substring(i) : ': ' + curVal;
    $('#search').focus().val(this.id + newVal);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Zusnw/8/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:00:13.060

这是你想要的修复。

```
$(document).ready(function(){
    $("#navigation a").click(function(){
        var searchBox = $("#search");
        var searchBoxVal = searchBox.val();     
        var newVal = '';
        if(searchBoxVal.indexOf(":") > -1)
        {
            // get the content after the colon...
            newVal = this.id + ":" +searchBoxVal.substring(searchBoxVal.indexOf(":")+1);
        }
        else
        {
            newVal = this.id + ": ";
            if(searchBoxVal.length > 0) 
            {
                // if colon not found but user has type anythings...
                newVal += searchBoxVal;
            }
        }
        searchBox.val(newVal);
        searchBox.focus();
        return false;
    });
}); 
```

# android - 适用于 Android 的 .net 服务器上的 Json

> ID：15053483
> 
> 赞同：-3
> 
> 时间：2013-02-24T15:52:30.980
> 
> 标签：android, json

我有用于登录界面的 json，但我不知道如何处理这种类型的 json 请帮助我了解如何处理这种 json

{“ActionVerb”：“xyz”，“来源”：“android”，“DTOCollect”：[{“DTOoJson”：{“LoginIdStr”：“xyz”，“UserPassStr”：“xyz”}，“DTOType”：“登录请求对象" } ] }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:56:28.907

通过“处理这种类型的 json”，我猜你是在问如何在 java 中反序列化它？

如果是这样，最简单的方法是使用 JSON 库，其中有很多。就我个人而言，我喜欢[GSON](http://code.google.com/p/google-gson/)，但请自行搜索并自行选择

# gwt - 无法使 GWT 应用程序与在 Tomcat 7 上配置的 CORS 一起工作

> ID：15053484
> 
> 赞同：0
> 
> 时间：2013-02-24T15:52:31.930
> 
> 标签：gwt, tomcat7, cors

我正在尝试配置 GWT 应用程序以使用不同的后端服务器（运行 Tomcat 7.0.26）。

我按照该网站的说明配置了 CORS 过滤器：http: [//software.dzhuvinov.com/cors-filter-installation.html](http://software.dzhuvinov.com/cors-filter-installation.html)

我使用了示例 GWT 代码（Greetings App），并进行了以下修改：

1.  在 GWT App 中，我在 RPC 调用之前添加了这一行：

    ```
    ((ServiceDefTarget) greetingService).setServiceEntryPoint("http://remoteserver/testcors/greet"); 
    ```

2.  我修改了 web.xml 并添加了 CORS 过滤器：

    ```
    <filter>
            <!-- The CORS filter with parameters -->
            <filter-name>CORS</filter-name>
            <filter-class>com.thetransactioncompany.cors.CORSFilter</filter-class>

            <!-- Note: All parameters are options, if ommitted CORS Filter will fall 
                    back to the respective default values. -->
            <init-param>
                    <param-name>cors.allowGenericHttpRequests</param-name>
                    <param-value>true</param-value>
            </init-param>

            <init-param>
                    <param-name>cors.allowOrigin</param-name>
                    <param-value>*</param-value>
            </init-param>

            <init-param>
                    <param-name>cors.allowSubdomains</param-name>
                    <param-value>false</param-value>
            </init-param>

            <init-param>
                    <param-name>cors.supportedMethods</param-name>
                    <param-value>GET, HEAD, POST, OPTIONS</param-value>
            </init-param>

            <init-param>
                    <param-name>cors.supportedHeaders</param-name>
                    <param-value>Content-Type, X-Requested-With</param-value>
            </init-param>

            <init-param>
                    <param-name>cors.exposedHeaders</param-name>
                    <param-value>X-Test-1, X-Test-2</param-value>
            </init-param>

            <init-param>
                    <param-name>cors.supportsCredentials</param-name>
                    <param-value>true</param-value>
            </init-param>

            <init-param>
                    <param-name>cors.maxAge</param-name>
                    <param-value>3600</param-value>
            </init-param>

    </filter>

    <filter-mapping>
            <!-- CORS Filter mapping -->
            <filter-name>CORS</filter-name>
            <url-pattern>/testcors/greet</url-pattern>
    </filter-mapping> 
    ```

如果我从“远程服务器”访问 TestCORS 应用程序，一切正常，我可以看到添加了这些标头：

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Access-Control-Allow-Origin: http://remoteserver
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: X-Test-2, X-Test-1
Content-Encoding: gzip
Content-Disposition: attachment
Content-Type: application/json;charset=utf-8
Content-Length: 214
Date: Sun, 24 Feb 2013 15:12:42 GMT 
```

但是，如果我访问在本地机器（127.0.0.1:8888）上运行的同一个 TestCORS GWT 应用程序，我会收到以下错误：

请求标头：

```
OPTIONS /testcors/greet HTTP/1.1
Host: remoteserver
Connection: keep-alive
Access-Control-Request-Method: POST
Origin: http://127.0.0.1:8888
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17
Access-Control-Request-Headers: x-gwt-module-base, x-gwt-permutation, origin, content-type
Accept: */*
Referer: http://127.0.0.1:8888/TestCORS.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

响应标头：

```
HTTP/1.1 403 Forbidden
Server: Apache-Coyote/1.1
Content-Type: text/plain;charset=ISO-8859-1
Content-Length: 96
Date: Sun, 24 Feb 2013 15:14:38 GMT 
```

我尝试了不同的浏览器（Chrome 版本 24.0.1312.57、Safari 版本 6.0.2 (8536.26.17)、Firefox 18.0.2、Opera 版本 12.14），我得到了服务器返回的相同错误 - HTTP 403。

我看到很少有人遇到类似的问题，但我无法找到解决方案：

*   [Apache Tomcat 和 CORS](https://stackoverflow.com/questions/12149355/apache-tomcat-and-cors)
*   [EC2 TOMCAT 7 上的 CORS](https://stackoverflow.com/questions/13446508/cors-on-ec2-tomcat-7)

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:52:48.737

我以前没有使用过这个 cors-filter，我更喜欢[这样](https://code.google.com/p/gwtquery/wiki/Ajax#CORS_%28Cross_Origin_Resource_Sharing%29)一个最简单的。

无论如何，在您的情况下，您似乎没有正确配置标题 gwt 需要工作，您的应用程序正在发送：

```
Access-Control-Request-Headers: x-gwt-module-base, x-gwt-permutation, origin, content-type 
```

所以，你的配置应该有：

```
<init-param>
   <param-name>cors.supportedHeaders</param-name>
   <param-value>x-gwt-module-base, x-gwt-permutation, origin, content-type</param-value>
</init-param> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T01:03:18.673

感谢 Vladimir，我还从这个网站获得了 CORS 过滤器：http: [//software.dzhuvinov.com/cors-filter-installation.html](http://software.dzhuvinov.com/cors-filter-installation.html)

我在 web.xml 中添加了其他支持的标头：

```
<init-param>
    <param-name>cors.supportedHeaders</param-name>
    <param-value>Content-Type, X-Requested-With, x-gwt-module-base, x-gwt-permutation, origin, content-type</param-value>
</init-param> 
```

# vb6 - 在 VB 6.0 中查找人的年龄

> ID：15053487
> 
> 赞同：-6
> 
> 时间：2013-02-24T15:52:53.323
> 
> 标签：vb6

我想知道一个人是否已经过了特定的年龄（以年为单位），以使他有资格获得一些福利。

* * *

我发布了这个问题，因为我在 VB 6.0 中使用 DateDiff（使用 'YYYY' 作为间隔）函数时没有得到完美的答案

我更改了逻辑并使用了 DateAdd 函数，然后使用了 DateDiff。我编写了以下代码来找出确切的年龄。

```
Public Function GetAge(dob As Date) As Integer
    Dim tempDate As Date

    If IsDate(dob) = False Then
        GetAge = -1
    Else
        tempDate = DateAdd("yyyy", 11, dob)
        If DateDiff("d", tempDate, Date) > 0 Then
            tempDate = DateAdd("yyyy", 19, dob)
            If DateDiff("d", tempDate, Date) > 0 Then
                tempDate = DateAdd("yyyy", 25, dob)
                If DateDiff("d", tempDate, Date) > 0 Then
                    GetAge = 3
                Else
                    GetAge = 2
                End If
            Else
                GetAge = 1
            End If
        Else
            GetAge = 0
        End If
    End If

End Function 
```

笔记：

```
-1 : Error in DOB
 0 : child
 1 : Teens
 2 : Youth
 3 : Senior 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:29:43.937

尝试类似：

```
if dateserial(year(dob) + 25, month(dob), day(dob)) > now then 
```

# c - typedef 结构指针数组

> ID：15053492
> 
> 赞同：0
> 
> 时间：2013-02-24T15:53:08.813
> 
> 标签：c, pointers, struct, typedef

我的头文件中有以下内容

```
typedef struct tree_node* TreeNode;

struct tree_node{

    int value;
    void *data;

    TreeNode parent;
    TreeNode left;
    TreeNode right;

}; 
```

要创建一个树节点，我正在执行以下操作

```
TreeNode createTreeNode(int value, void *data){

    TreeNode node;

    node = malloc(sizeof(TreeNode*));

    if(node == NULL){
        printf("TreeNode malloc failed!!\n");
        exit(EXIT_FAILURE);
    }

    node->data = data;
    node->value = value;
    node->parent = NULL;
    node->right = NULL;
    node->left = NULL;

    return node;

} 
```

现在我想创建 TreeNodes 数组......我该怎么做？我在想以下

```
TreeNode *treeNodes;
treeNodes = malloc(26 * sizeof(TreeNode)); 
```

进而

```
treeNodes[a_number_between_0_to_25] = createTreeNode(intNodeValue, NULL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:58:31.670

`node = malloc(sizeof(TreeNode*));`只会分配 4 个字节（或 8 个，具体取决于指针的大小）。这是错误的。使用`sizeof(struct tree_node);`，否则您将最终违反分段。

除此之外，您的代码看起来还可以。是的，这就是创建数组的方式。

也研究 VLA（可变长度数组）

# c# - TcpClient 没有连接，程序冻结，服务器没有收到任何东西

> ID：15053502
> 
> 赞同：0
> 
> 时间：2013-02-24T15:54:08.330
> 
> 标签：c#, tcp, tcpclient

```
 static void tcp()
    {
        MessageBox.Show("Beginning...");
        System.Net.IPAddress ipAddress = System.Net.IPAddress.Parse("127.0.0.1");
        IPEndPoint ipEndPoint = new IPEndPoint(ipAddress, 20061);
        TcpClient connection = new TcpClient();
        connection.Connect(ipEndPoint);
        NetworkStream stream = connection.GetStream();
        var reader = new StreamReader(stream);
        var writer = new StreamWriter(stream);
        writer.WriteLine("/api/subscribe?source=console&key=d41c411558628535bbad927b1ad667c823e37a7e06e1b0a61ce707ed287bb4bb&show_previous=true");
        writer.Flush();
        var line = reader.ReadLine();
        if (line != "success")
            throw new InvalidOperationException("Failed to connect");
        while ((line = reader.ReadLine()) != null)
        {
            MessageBox.Show(line);
            Program.Form3 Form3 = new Program.Form3();
            Form3.textBox1.Text = Form3.textBox1.Text + "\r\n" + line;
        }
    } 
```

这是我得到的代码。我想连接到我的服务器等待通过 TCP 的请求。但是，这段代码不起作用，我不知道为什么。当它在主线程上时，程序只是冻结。现在，当它在另一个线程 (tcp()) 上时，实际上什么都没有发生，服务器甚至什么也没有收到。

**我检查了服务器是否完全正常运行，它 100% 正常工作。**我使用 SimpleTCP 进行了检查。（我通过端口 20061 连接到 127.0.0.1，并发送命令“/api/subscribe?source=console&key=d41c411558628535bbad927b1ad667c823e37a7e06e1b0a61ce707ed287bb4bb&show_previous=true”，并开始接收我想要的字符串。）

我只想连接到 TCP，发送一个命令，然后开始接收字符串。

哦，我确实调用了线程，当我点击“连接”按钮时，消息框就会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:01:44.237

`writer.Flush()`写完命令后尝试调用。允许A`StreamWriter`缓冲数据并在缓冲区满时写入。`Flush()`刷新写缓冲区，这是你想要的。

# django - 使用 Cloudbees Jenkins 测试 Django/Postgres 部署

> ID：15053513
> 
> 赞同：0
> 
> 时间：2013-02-24T15:54:51.530
> 
> 标签：django, postgresql, jenkins, cloudbees

我正在尝试使用 Postgres 数据库对 Django 项目实施自动测试，但是在安装 psycopg2 时我的构建失败，因为`pg_config`找不到错误消息，可以在[此处](http://pastebin.com/JGFwN43p)阅读。根据[这个答案](https://stackoverflow.com/a/5450183/807674)，这是因为`libpq-dev`并且`python-dev`可能没有安装。一种对我不起作用的解决方案是使用替代数据库进行测试，因为我有一些依赖于 Postgres 特定功能的核心代码。我想知道，有没有人能够让 Django 与 Postgres 一起在 Cloudbees 的 Jenkins 上运行，如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:39:33.970

[您应该使用http://wiki.cloudbees.com/bin/view/DEV/Python+Builds](http://wiki.cloudbees.com/bin/view/DEV/Python+Builds)运行 python ，以便您可以选择要使用的确切运行时版本并获得 virtualenv 集，其中设置自定义 python 环境更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T22:57:01.060

我遇到了这个，如果你使用的是 python 3，你需要

```
apt-get install python3-dev 
```

# iphone - 从页面控制器隐藏点，单点触控 iphone

> ID：15053517
> 
> 赞同：0
> 
> 时间：2013-02-24T15:55:00.653
> 
> 标签：iphone, xamarin.ios, uipagecontrol

我想为基于 monotouch 的 iphone 设计一些类似的东西：

![在此处输入图像描述](../Images/ee46177be7828634b72e435f87a8299d.png)

每行都有一些按钮，通过向右或向左拖动行，您可以访问它们的图标。

我认为实现这一点的一种方法是嵌入 3 个页面控制器（每行一个）并在一个视图中添加每两个图标。

问题是：使用视图寻呼机是实现这一点的最佳方式吗？

如果是，我怎样才能隐藏页面控制器下方的点来创建这样的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:42:38.993

我认为您混淆了术语。

Page Control 是一个界面元素，用于标记 UIScrollView 的位置。

您应该为此使用 UIScrollView （没有页面控件）。

不要与 UIPageViewController 混淆，它是一种包含页面卷曲效果的分页滚动视图。

# asp.net - 使用 RSA 和文件路径加密 web.config 失败

> ID：15053520
> 
> 赞同：1
> 
> 时间：2013-02-24T15:55:11.850
> 
> 标签：asp.net, iis, encryption, rsa

我正在使用以下命令来加密文件

```
aspnet_regiis -pef "connectionStrings" "d:\MyPath\web.config" 
```

我得到以下答案

```
The configuration for physical path 'd:\MyPath\web.config' 
cannot be opened.
Failed! 
```

该文件不是只读模式，我以管理员权限运行 cmd。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T16:04:59.003

[`aspnet_regiis -pef`](http://msdn.microsoft.com/en-us/library/k6h9cz8h(v=vs.110).aspx)将*webApplicationDirectory*作为参数，并且不应包含 web.config 的文件名；

```
aspnet_regiis -pef "connectionStrings" "D:\MyPath" 
```

# c# - 无效的表达式术语“其他”

> ID：15053523
> 
> 赞同：0
> 
> 时间：2013-02-24T15:55:27.567
> 
> 标签：c#, if-statement

我是 C# 的初学者——我才学了几天。我正在尝试制作一个 GW2 交易站计算器，但我被卡住了。我正在尝试检查字符串的长度是否等于 3，以防它的 a `-`（如`-21`），并且 int 的值为负数。`else`我似乎很难看出我的这个陈述哪里出错了。

```
 sellPrice = sellPrice * 0.85;
        profit = (int)sellPrice - buyPrice;

        String copperString;
        copperString = profit.ToString();
        int length = copperString.Length;

        if (length == 3 && profit < 0);
        {
            copperString = copperString.Substring(Math.Max(0, copperString.Length - 3));
            this.textBox3.Text = copperString;
        }
        else
        {
            copperString = copperString.Substring(Math.Max(0, copperString.Length - 2));
            this.textBox3.Text = copperString;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T16:01:46.527

`;`终止一个`if()`语句，`else`它之后的语句变成一个“悬空”的 else 语句，这是非法的。

去掉<~ 这个`;`之后 `if (length == 3 && profit < 0);``;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T16:01:00.810

其原因在于`;`。它应该像

```
if (length == 3 && profit < 0)
{
   //TODO:
}
else
{
   //TODO:
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T15:59:14.383

`;`之后删除`if --> if (length == 3 && profit < 0)`

这是完整的代码：

```
 sellPrice = sellPrice * 0.85;
    profit = (int)sellPrice - buyPrice;

    String copperString;
    copperString = profit.ToString();
    int length = copperString.Length;

    if (length == 3 && profit < 0)
    {
        copperString = copperString.Substring(Math.Max(0, copperString.Length - 3));
        this.textBox3.Text = copperString;
    }
    else
    {
        copperString = copperString.Substring(Math.Max(0, copperString.Length - 2));
        this.textBox3.Text = copperString;
    } 
```

# arrays - knockout.js：如何处理来自 json 的动态嵌套数组

> ID：15053525
> 
> 赞同：0
> 
> 时间：2013-02-24T15:55:49.580
> 
> 标签：arrays, json, dynamic, knockout.js, nested

很抱歉有人提出了一个明显的问题......

问题：我正在尝试制作一种可以处理文件和文件夹的文件管理器，例如文件系统，从 JSON 中检索数据。

用户可以根据需要添加为文件夹，这样我就可以在 foldC 内的 foldB 内有 foldC，我不知道嵌套了多少文件夹。

在我看来，在 html 页面中，我只会在开头显示根文件夹；当用户单击我想在文件夹中“输入”的文件夹时，显示文件夹的内容（带有后退按钮）并隐藏根文件夹的其他内容（如 Microsoft Windows 资源管理器）。您可以使用子文件夹迭代此过程。

我想我需要一种动态添加html代码的代码......但我真的不知道从哪里开始使用knockout.js来做这个......

你能指点我什么地方吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:32:51.250

没有更多细节很难回答他的问题，但起点应该是[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)。当您在数组中向下钻取时，您可以使用“create”控制对象的创建（检查“使用“create”部分自定义对象构造）。

# c# - Windows Phone：自定义联系人存储无法编辑联系人姓名？

> ID：15053528
> 
> 赞同：0
> 
> 时间：2013-02-24T15:56:30.950
> 
> 标签：c#, windows-phone-8, windows-phone

我有一个创建自定义联系人存储的 WP8 应用程序，当我以编程方式（通过从服务器检索信息）添加一些联系人时，我去人民中心并修改联系人名称，新名称不会显示为显示名称的联系方式。

当我再次按编辑联系人时，我可以看到新值，但它们仍然没有显示为联系人的显示名称。

这种奇怪行为的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:24:20.810

您是否将不同的联系人联系在一起？在这种情况下，您只能在概览中看到主要联系人的姓名。

# ajax - Symfony2 发送表单 ajax

> ID：15053529
> 
> 赞同：11
> 
> 时间：2013-02-24T15:56:44.113
> 
> 标签：ajax, symfony, symfony-2.1

我正在尝试通过 ajax 提交表单以更新实体的字段，但不知道如何从控制器中检索数据：

```
<form class="ajax" action="{{ path('ajax_setSocial') }}" method="post" {{ form_enctype(form) }}>
  <div class="editor">
        {{ form_errors(form) }}
        <div class="editLabel pls">{{ form_label(form.ragSocial) }}</div>
        <div class="editField"> 
            <div class="ptm">
                {{ form_widget(form.ragSocial) }} {{ form_errors(form.ragSocial) }}
            </div>     
            {{ form_rest(form) }}
            <div class="mtm">
                <button class="btn btn-primary disabled save" type="submit">Save</button>
                <button class="btn ann">Close</button>
            </div>
        </div>
  </div> 
```

```
 var url = Routing.generate('ajax_setSociale');
        var Data = $('form.ajax').serialize();
        $.post(url, 
            Data
            , function(results){
                if(results.success == true) {
                    $(this).parents('ajaxContent').remove();
                    $(this).parents('.openPanel').removeClass('openPanel');
                } else {
                    alert('False'); //test
                }
        }); 
```

控制器（ajax_setSocial 路由）

```
public function setSocialeAction(Request $request)
{
      $em = $this->getDoctrine()->getManager();
      // $id = $request->get('form'); ???
    $entity = $em->getRepository('MyBusinessBundle:Anagrafic')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find Anagrafic entity.');
    }

    $form = $this->createFormBuilder($entity)
       ->add('ragSocial', 'text', array('label' => 'Social'))
       ->add('id', 'hidden')
        ->getForm();
    $form->bind($request);

    if ($form->isValid()) {
        $em->persist($entity);
        $em->flush();

        $output = array();
        $response = new Response();
        $output[] = array('success' => true);
        $response->headers->set('Content-Type', 'application/json');
        $response->setContent(json_encode($output));
        return $response;
    } 
```

作为恢复值然后传递 id 来创建查询和其他值来更新实体？如果这些字段没有通过验证，我该如何传递错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T13:04:57.007

我建议将 id 传递给控制器​​。

html:

```
<form class="ajax" action="{{ path('ajax_setSocial', { 'id': entity.id }) }}" method="post" {{ form_enctype(form) }}>

var url = "{{ path('ajax_setSocial', { 'id': entity.id }) }}"; 
```

控制器注解、参数和返回值，获取id：

```
/**
 *
 * @Route("/{id}", name="ajax_setSocial")
 * @Method("POST")
 */
public function setSocialeAction(Request $request, $id) {
    $em = $this->getDoctrine()->getManager();
    $entity = $em->getRepository('MyBusinessBundle:Anagrafic')->find($id);

    return array(
        'entity' => $entity
    );
} 
```

将错误传递回 html 是这样的：

```
// dummy line to force error:
// $form->get('ragSocial')->addError(new FormError("an error message"));

if ($form->isValid()) {
    ...
} else {
    $errors = $form->get('ragSocial')->getErrors(); // return array of errors
    $output[] = array('error' => $errors[0]->getMessage()); // the first error message
    $response->headers->set('Content-Type', 'application/json');
    $response->setContent(json_encode($output));
    return $response;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:19:34.737

我想你想要这个：

[symfony2 链式选择器](https://stackoverflow.com/questions/10186185/symfony2-chained-selectors/11059559#11059559)

但是，这个也可能有用：

[多对多 Ajax 表单（Symfony2 表单）](https://stackoverflow.com/questions/11462839/many-to-many-ajax-forms-symfony2-forms/13384784#13384784)（答案 3）

# javascript - 面板仅显示在特定页面上

> ID：15053548
> 
> 赞同：0
> 
> 时间：2013-02-24T15:58:55.037
> 
> 标签：javascript, location, document, if-statement

我需要一个有效的 javascript 代码，它只在我网站的一个特定页面上显示某个面板，并将其隐藏在其余页面上。这是一个论坛式的设置。

这是我到目前为止所得到的。

```
<script type="text/javascript">

function ShowPanel()
{
if(document.location.href == "http://www.exampleurl.com")
{document.getElementById("panel").style.display = "block";}
else
{document.getElementById("panel").style.display = "none";}
}

</script>

        <div id="panel" onload="ShowPanel">
            Example text.
        </div> 
```

根据我查过的示例代码，这一切似乎都是合理的，但显然某处存在错误。没发生什么事。

感谢您的检查！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:27:52.117

问题是 onload 事件不能用于 DIV 元素。onload 只能用于文档正文或外部资源（iframe、图像、脚本）。

最好的办法是将 JavaScript 放在页面底部。

例如

```
<div id="panel">
    Example text.
</div>

<script language="JavaScript">
if(document.location.href == "http://www.exampleurl.com"){
    document.getElementById("panel").style.display = "block";
}
else {
    document.getElementById("panel").style.display = "none";
}    
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:28:45.450

`document.location.href`通过在控制台中输入来检查页面上的真正内容（`F12`通常）。例如，即使 URL 中没有斜杠，大多数浏览器也会在服务器名称上添加尾部斜杠。匹配必须准确，您的代码才能按书面方式工作。

另一个选项是 compare `document.location.pathname`，它将在服务器名称之后包含所有内容。如果要进行不区分大小写的比较，可以使用 `document.location.pathname.toLowerCase()`.

# android - 与设备建立连接时，monkeyrunner 挂起

> ID：15053553
> 
> 赞同：0
> 
> 时间：2013-02-24T15:59:41.777
> 
> 标签：android, multithreading, adb, monkeyrunner

这是我需要做的。我有 2 台设备需要使用 monkeyrunner 进行测试。这是一个使用 python 和 monkeyrunner 的自动化测试。我想同时为 2 个设备执行测试，所以我想到了使用线程。

这是代码

> 导入线程
> 
> 导入日期时间导入操作系统，系统
> 
> 从 com.android.monkeyrunner 导入 ConfigParser
> 
> 从日期时间导入 MonkeyRunner、MonkeyDevice、MonkeyImage
> 
> 从 java.net 导入日期时间导入 hashlib
> 
> 从 com.ziclix.python.sql 导入 SocketException
> 
> 导入 zxJDBC
> 
> def UseThread(data1, data2, data3, devID, Code, ScreenshotRef, logFile):
> 
> ```
>  device = MonkeyRunner.waitForConnection(10, devID)
> 
> 'threaded code'
> 
> 'initialization' 
> ```
> 
> 文件=打开（os.path.dirname（os.path.realpath（**文件**））+'\Samples.txt'，'r'）而1：
> 
> 而 1: 行 = file.readline()
> 
> ```
> if not line:
> 
>     print 'Done!'
> 
>     break
> 
> else:
> 
>     line
> 
> val=line.split('\t')
> 
> data1 = val[0]
> 
> data2 = val[1]
> 
> data3 = val[2]
> 
> threads = []
> 
> for Code in cp.options('p'):
> 
>     devID = cp.get('product',Code).strip()
> 
>     ScreenshotRef = cp.get('source','ScreenshotRef') + '\\' + prodCode.upper()
> 
>     logFile = outputFolder + '\\' + prodCode.upper() + '\\logs.txt' 
> 
>     t=threading.Thread(target=UseThread,args=(data1, data2, data3, devID, prodCode, ScreenshotRef, logFile))
>     threads.append(t)
>     t.start()
> 
> for i in range(0,len(threads)):
>     threads[i].join() 
> ```

问题是这样的。当 while 循环完成一次运行并继续第二次运行时，代码会在monkeyrunner 等待连接时挂起。确切地说，这是它停止的部分

> 设备 = MonkeyRunner.waitForConnection(10, devID)

消息说“猴子命令唤醒”。

我认为问题与连接有关，而不是与线程有关，因为我试图在建立连接的那条线之前打印一些东西并且它可以工作。

当您已经建立连接时，建立连接是否存在问题？我需要先关闭以前的连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:20:00.030

MonkeyRunner waitForConnection 仅适用于一台设备。你不能运行它两次。您可以从另一个实例运行

# csv - Apache Camel 聚合大型（100 万条记录）CSV 文件时出现问题

> ID：15053554
> 
> 赞同：1
> 
> 时间：2013-02-24T15:59:51.387
> 
> 标签：csv, apache-camel, unmarshalling

我的问题是 (1) 是否有更好的策略来解决我的问题 (2) 是否可以调整/改进我的解决方案以便它可以工作并且不会以可靠的方式拆分聚合 (3 不太重要的方式) 如何可以我更智能地调试它？弄清楚聚合器正在做的 wtf 是很困难的，因为它只会在由于大小而难以调试的大批量上失败。任何这些的答案都会非常有用，最重要的是前两个。

我认为问题在于我没有正确地向骆驼表达我需要它来将传入的 CSV 文件视为一个整体，并且我不希望聚合器停止直到所有记录都被聚合。

我正在编写一条路径来消化一百万行 CSV 文件，拆分然后聚合一些关键主字段上的数据，然后将聚合记录写入表

不幸的是，表的主要约束被违反（这也对应于聚合键），这意味着聚合器没有等待整个输入完成。

它适用于几千条记录的小文件，但在生产中实际面临的大文件（1,000,000 条记录）它失败了。

首先，它在 CSV 解组后在拆分时出现 JavaHeap 内存错误而失败。我用 .streaming() 解决了这个问题。这会影响聚合器，聚合器“完成”过早。

为了显示：

```
A 1 
A 2 
B 2
--- aggregator split --- 
B 1
A 2

--> A(3),B(2) ... A(2),B(1) = constraint violation because 2 lots of A's etc.
when what I want is A(5),B(3) 
```

以 100、1000 等为例，记录它工作正常且正确。但是当它处理 1,000,000 条记录（这是它需要处理的实际大小）时，首先 split() 会收到 OutOfJavaHeapSpace 异常。

我觉得简单地更改堆大小将是一个短期解决方案，并且只是将问题推回直到下一个记录上限出现，所以我通过在拆分上使用 .streaming() 来解决它。

不幸的是，现在，聚合器正在滴灌记录，没有让它们陷入困境，而且它似乎提前完成并进行另一个聚合，这违反了我的主要约束

```
from( file://inbox )
.unmarshall().bindy().
.split().body().streaming()

.setHeader( "X" Expression building string of primary-key fields)
.aggregate( header("X") ... ).completionTimeout( 15000 )

etc. 
```

我认为问题的一部分是我依赖于流式拆分的超时时间不超过固定的时间，这并不是万无一失的——例如，系统任务可能会合理地导致这种情况，等等。而且每次我增加这个timeout 它使调试和测试这些东西的时间越来越长。

可能更好的解决方案是读取传入的 CSV 文件的大小，并且在处理完每条记录之前不允许聚合器完成。但是，我不知道如何用骆驼表达这一点。

很可能我只是对我应该如何处理/描述这个问题有一个基本的策略误解。我不知道可能有更好（更简单）的方法。

还有如此大量的记录进入，我无法实际手动调试它们以了解正在发生的事情（我怀疑我也在打破聚合器的超时）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:48:18.763

您可以先将文件逐行拆分，然后将每一行转换为 CSV。然后您可以在流模式下运行拆分器，因此内存消耗低，并且能够读取具有一百万条记录的文件。

[此页面http://camel.apache.org/articles](http://camel.apache.org/articles)有一些关于在 Camel 中拆分大文件的博客链接。它们虽然涵盖了 XML，但也与拆分大 CSV 文件有关。

# perl - 这有什么问题

> ID：15053555
> 
> 赞同：-1
> 
> 时间：2013-02-24T16:00:07.710
> 
> 标签：perl

我需要检查配置文件是否存在，所以我写这个是为了测试

```
#!/usr/bin/perl
use strict;
use warnings;

my $prfle=`~/sqllib/db2profile`;
print $prfle; 
```

但是它什么也没打印...

该脚本检查配置文件，如果未找到，它将询问用户，直到提供有效路径并执行该配置文件，我在 shell 脚本中成功实现了这一点，但在 perl 中遇到了麻烦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T16:03:57.427

在 Perl 中，反引号执行一个 shell 命令。例如，这将打印 hi：

```
`echo hi`; 
```

要检查文件是否存在，请使用`-e`：

```
$prfle= '~/sqllib/db2profile';
if (-e $prfle) {
    print "File Exists!\n";
} 
```

注意字符串文字周围的单引号`'`而不是反引号。```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T16:37:26.973

根据您的评论，我怀疑您想要这样的东西：

```
my $profile = '';                     # default profile
while (not -e $profile) {             # until we find an existing file
    print "Enter a valid profile: "; 
    chomp($profile = <>);             # read a new profile 
}
qx($profile);                         # execute this file 
```

执行文件的选项不止一种。`qx()`与反引号相同，将返回标准输出。`system()`将返回系统给出的执行命令的返回值。`exec()`将执行命令并退出您的 perl 脚本，有效地忽略`exec`. 根据您的需要，选择最适合您的选项。

# flash - 未找到 Flash Builder URL

> ID：15053560
> 
> 赞同：0
> 
> 时间：2013-02-24T16:00:15.720
> 
> 标签：flash, path, flash-builder, loader

尝试加载文件 Flash Builder 会引发以下错误：

```
Error #2044: Unhandled IOErrorEvent:. text=Error #2035: URL Not Found. 
```

这就是我尝试加载文件的方式：

```
loader.load(new URLRequest("../levels/TeaserI.swf")); 
```

如果我将文件夹“levels”放入 bin-debug 它工作正常，但永远不会超出它。我试过 ../../ 或省略 ../ 但这没有区别。Flash Builder 不应该将它需要的所有东西都放入 bin-debug 中，还是我出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:41:51.057

Flash Builder 不擅长理解文件夹路径 - 以“/”开头的路径通常会有所帮助。所以：

```
loader.load(new URLRequest("/../levels/TeaserI.swf")); 
```

编辑，正确阅读问题后：

这也可能是由于您存储资产的位置。由于 FB 不会自动将资产放入 bin-debug 中，这表明 FB 不知道它们。

将您的资产放在 src 文件夹中的某个位置或将资产添加到项目中：项目属性 -> Flex 构建路径 -> 源路径 -> 添加文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:33:58.743

尝试项目->清理并编译。文件是否出现在 bin-release (bin-debug) 文件夹中？他们必须出现！如果没有，请再次检查 Build Path -> Source Path。

使用相对路径并制作投影仪（从独立播放器打开 swf，而不是浏览器，然后制作文件->制作投影仪）。桌面项目无法在浏览器中正确运行。您需要投影仪或 AIR 环境。

将您的项目移动到磁盘根目录上的文件夹中 - flash 有时无法理解带有空格和其他不寻常符号的复杂路径。

尝试使用`-use-network=false`编译器选项。

并考虑到：FLEX 只是一个 IDE，而不是项目的运行时环境。如果它编译正确，它必须工作。在您的代码或文件夹结构中搜索错误。

# django - 教程中的 URL 匹配失败（管理员）

> ID：15053561
> 
> 赞同：0
> 
> 时间：2013-02-24T16:00:17.707
> 
> 标签：django, django-models, django-admin, django-urls, django-settings

我遵循了 Django 教程第 1 部分，现在在第 2 部分中，我应该启动并运行管理界面。

我非常仔细地执行了该步骤，但是当我尝试加载站点时，出现以下错误：

```
Using the URLconf defined in mysite.urls, Django tried these URL patterns, in this order:
1\. ^admin/
The current URL, , didn't match any of these. 
```

*我首先在settings.py*中取消注释“django.contrib.admin” ：

 *```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'polls',
) 
```

...之后我运行*python manage.py syncdb*，输出：

```
Creating tables ...
Installing custom SQL ...
Installing indexes ...
Installed 0 object(s) from 0 fixture(s) 
```

...然后我根据教程在*urls.py 中取消了我应该注释的三行：*

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'mysite.views.home', name='home'),
    # url(r'^mysite/', include('mysite.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

如上所述，如果运行，这会生成一条错误消息。

有什么问题？我的意思是我完全按照本教程进行了操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:30:25.123

请注意教程中的说明：

> 现在，打开 Web 浏览器并转到本地域上的“/admin/” - 例如，`http://127.0.0.1:8000/admin/`.

添加错误显示，您正在尝试转到根 URL，而不是`/admin/`按照指示。*

# php - PHP 限时禁令？

> ID：15053562
> 
> 赞同：-2
> 
> 时间：2013-02-24T16:00:21.857
> 
> 标签：php, mysql, ip, timed

我制作了一个禁止脚本，它会更新成员列表并放入`SET banned=Yes WHERE username=$_POST[username]`

但现在我想做定时封禁，比如如果一个用户被封禁了一天，他将在他的封禁时间之后被解除封禁。

有谁知道我该怎么做？我对 MySQL 和时代不太好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T16:05:47.020

只需将列更改为“BannedUntil (datetime)”之类的内容，将其设置为未来的某一天：

```
UPDATE Users SET BannedUntil = DATE_ADD(NOW(), INTERVAL 1 DAY) WHERE username = <username> 
```

并检查用户是否被禁止

```
SELECT 1 FROM Users WHERE BannedUntil > NOW() AND username = <username> 
```

如果我们返回一行，则该用户被禁止，否则不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T16:05:57.270

您可以节省禁令的时间和禁令的持续时间。

伪代码：

```
if (current_date == ban_time + ban_duration) { unban_user } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T16:07:15.430

存储用户被封禁的时间和封禁的持续时间。当用户尝试访问任何需要知道他或她是否被禁止的页面时——显示“你被禁止”消息或诸如此类的信息——查询数据库以获取用户信息。如果他被禁止，请将禁止持续时间添加到禁止时间，并将其与您当前的时间进行比较。如果您已通过该计算时间，则可以解除禁令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T16:06:46.847

您必须保存禁止时间（unix 时间戳字段或日期时间）以及禁止持续时间，当用户尝试登录时，您可以简单地检查禁止后经过了多少时间，如果禁止时间已过，更新行，并将禁止列设置为“否” '

# javascript - 使用淘汰赛js弹出

> ID：15053563
> 
> 赞同：5
> 
> 时间：2013-02-24T16:00:22.467
> 
> 标签：javascript, knockout.js, dialog, popup, viewmodel

我正在将我的一个旧 jquery 插件从 DOM 丛林迁移到这个花哨的 mvvm 框架淘汰赛。

我将使用哪种技术来正确显示弹出容器？我必须“通过调用”填充它，因为我每次都会得到一个 json 提要。

我尝试了一种使用 with 绑定的方法，但它仍然尝试在第一次运行时填充部分。

```
<!-- ko with: daySubmitFormViewModel -->
    <div class="ec-consulation-lightbox">
        <form id="cForm" class="form-container">
           // Some bindings here.
        </form>
    </div>
<!-- /ko with: --> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-14T09:08:16.600

它也可以在没有自定义绑定的情况下完成。示例如下

```
 <div class="modalWindowBackground" data-bind="visible: popupDialog" >
                <div class="modalWindow" data-bind="with:popupDialog">
                    <div class="content">
                        <h2 data-bind="text: title"></h2>
                        <p>
                            <span data-bind="text: message"></span>
                        </p>
                        <div class="buttonSpace">
                            <input type="button" class="closeButton" data-bind="value: closeButtonText, click: $root.hidePopupDialog" />
                        </div>                            
                    </div>
                </div>
            </div> 
```

视图模型代码：

```
 self.showAlert = function (title, message, closeButtonText) {
        self.popupDialog({ title: title, message: message, closeButtonText: closeButtonText });
    };
    self.hidePopupDialog = function () {
        self.popupDialog(null);           
    };

  //Code which opens a popup
  self.remove = function () {
        .... some code ...
        if (someCondition) {
          self.showAlert('SomeTitle', 'Message', 'OK');
          return;
        }
        .... some code ...
   }; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T07:57:52.353

创建一个自定义绑定，在可观察对象上触发其打开/关闭功能。

我已经为 jQuery Dialog 完成了一个自定义绑定，它使用这个 approuch 和 KO 模板。

```
<div id="dialog" data-bind="dialog: { autoOpen: false, modal: true, title: dialogTitle }, template: { name: 'dialog-template', data: dialogItem, 'if': dialogItem }, openDialog: dialogItem"></div> 
```

您可以在这里找到我的绑定以及其他一些绑定 [https://github.com/AndersMalmgren/Knockout.Bindings](https://github.com/AndersMalmgren/Knockout.Bindings)

现场演示[http://jsfiddle.net/H8xWY/102/](http://jsfiddle.net/H8xWY/102/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-17T08:07:49.403

[https://github.com/One-com/knockout-popupTemplate](https://github.com/One-com/knockout-popupTemplate)

这几乎可以满足您的要求。它是高度可配置的，并且在稳定的开发中（我们自己在 Web 应用程序中使用它）。

免责声明：我是 One.com 开发人员。我也是发起上述库的人。

# java - 使用 Opencv (Javacv) 在图像中查找 X,Y

> ID：15053571
> 
> 赞同：0
> 
> 时间：2013-02-24T16:01:18.267
> 
> 标签：java, opencv, javacv

我在获取图像中对象的 x,y 线时遇到问题。

我正在使用 Javacv，到目前为止，我有图像，并将其转换为 HSV，然后使用 inRange 函数获取图像的黑白版本。

现在的重点是，如果图片上有一个红色对象，我想获取它的 x,y 坐标，并可能将它们保存到数组或类似的东西中。

我希望你能理解我的问题/问题。我没有，请随时问，我会尽力解释得更好。

/杰斯珀

# cakephp-2.0 - CakePHP 返回丢失的数据库表

> ID：15053572
> 
> 赞同：0
> 
> 时间：2013-02-24T16:01:18.253
> 
> 标签：cakephp-2.0

我尝试了针对此问题的所有建议解决方案，即清除缓存文件夹。我还禁用了缓存`Configure::write('Cache.disable', true);`我的调试级别设置为 2。但我总是得到同样的错误。缺少的表只是新添加的表。顺便说一句，我只在我的本地主机中运行。这是我的模型，名为 Department.php

```
 <?php

class Department extends AppModel {

    public $name = 'Department';  
}
?> 
```

这是我的控制器名称 DepartmentsController.php

```
 <?php
class DepartmentsController extends AppController {

        public $name = 'Departments';
    public $helpers = array('Html', 'Form','Session');
    public $components = array('RequestHandler','Session');

    function index() {
        $this->Department->recursive = 0;
        $this->set('departments', $this->paginate());
    }    
}
?> 
```

提前谢谢你的回答！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:41:59.363

Assuming you are actually using a database I would try the following things:

1.  If your database table isn't named using the cakephp conventions, manually set it:

    public $useTable = 'table_name';

2.  Make sure your database config is using the right database in app/config/database.php

3.  If that model is in a plugin, use the plugin syntax when including it in the controller:

    public $uses=array('PluginName.Department');

# ios - 从单元格中的 TextField 获取数据

> ID：15053573
> 
> 赞同：0
> 
> 时间：2013-02-24T16:01:18.880
> 
> 标签：ios, uitableview, textfield

我创建了一个带有 TabelViewCell 的笔尖，其中包含一个标签和一个 TextField，然后我将此单元格加载到只有两行的 TableView 中。我想捕获一个项目的名称和价格，所以我更新了 cellForRowAtIndexPath 方法中的每个标签，因为我可以访问 indexPath.row 值。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleCellIdentifier = @"AddBudgetItemCell";

    SCAddBudgetItemCell *cell = (SCAddBudgetItemCell *)[tableView dequeueReusableCellWithIdentifier:simpleCellIdentifier];

    if(cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:simpleCellIdentifier owner:self options:nil];

        cell = [nib objectAtIndex:0];
    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.dataTextField.delegate = self;

    switch (indexPath.row)
    {
        case 0:
            cell.titleLabel.text = @"Item";
            break;

        case 1:
            cell.titleLabel.text = @"Price ¥";
            break;

        default:
            break;
    }

    return cell;
} 
```

但是我不知道如何从 TextField 中检索数据，因为我无法访问我创建的变量“cell”和 IndexPath.row 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:05:39.330

据我了解，您有两种选择。如果在你的内部`SCAddBudgetItemCell`你有一个包含文本字段字符串的属性，那么你可能可以通过执行类似的操作从视图控制器访问它`cell.yourtextfield.text`（其中 yourtexfield 是 SCAddBudgetItemCell 中的 UITextView。

另一种选择是让视图控制器响应 UITextFieldDelegate 并在用户通过实现委托方法对其进行编辑时存储字符串

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{
    //Whenever people start editing your textfield
}
-(BOOL)textFieldShouldReturn:(UITextField *)textField{
     //
return YES;
}
-(void)textFieldDidEndEditing:(UITextField *)textField
{
    //This is obvious. Whenever they end
} 
```

# java - 如何从 Android 中的倒数计时器中减去一秒（或更多）？

> ID：15053574
> 
> 赞同：1
> 
> 时间：2013-02-24T16:01:32.760
> 
> 标签：java, android, button, timer

我是倒数计时器的新手，所以我不知道这个问题。我尝试了很多东西，但没有得到我所期望的。这是我的计时器代码。像往常一样，它是一个类中的一个类。

```
// TIMER
    public class Timer extends CountDownTimer {

        public Timer(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {

            //getNgo(true, score, tries, secLeft);
        }

        @Override
        public void onTick(long millisUntilFinished) {

            //secLeft = millisUntilFinished;

            int sec = (int) (millisUntilFinished / 1000);
            sec = sec % 60;
            int min = sec / 60;
            tvTime.setTextColor(Color.WHITE);

            if (sec <= 10) {

                animScale(tvTime);

                tvTime.setTextColor(Color.RED);
                tvTime.setText("" + min + ":" + sec);

                if (sec < 10) {
                    tvTime.setTextColor(Color.RED);
                    tvTime.setText("" + min + ":0" + sec);
                }

            } else {
                tvTime.setText("" + min + ":" + sec);
            }
        }

    } 
```

所以，我只是想知道当我按下按钮时如何减去 3 秒（即 3000 毫秒），并且 textview 显示的计时器将继续滴答作响，但时间已经被扣除了。我把代码放在哪里。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:55:52.090

当我不得不对计划在固定时间进行的任务执行此操作时，我已经：

1.  取消了原来的任务。
2.  用新的时间段提交了一个新的。

我怀疑这是一个比你使用的更标准的模式`Timer`。

例如：

```
private final Runnable task = new Runnable() { @Override public void run() { /* ... */ } };

private final ScheduledThreadPoolExecutor stpe = new ScheduledThreadPoolExecutor();

private final long initialSeconds = 3;

public void submitTask() {
    stpe.schedule(task, initialSeconds, TimeUnit.Seconds());
}

public void subtractSeconds(long sec) {
    if(stpe.remove(task)) {
        stpe.schedule(task, Math.Max(initialSeconds - sec, 0), TimeUnit.Seconds);
    }
} 
```

你需要弄清楚：

*   如何确保任务仅最初提交一次并跟踪固定变量
*   您是否需要一项固定`final`任务或更改该任务
*   如果任务可以多次提交，并发/多线程问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T11:35:51.303

我已经使用其中一个 stackoverflow 帖子实现了一个简单的倒计时

```
// gets current time  
long timeNow = System.currentTimeMillis();  
/* timer holds the values of the current second the timer should display  
 * requiredTime is the start value that the countdown should start from  
 * startTime is the time when the application starts  
*/  
timer = requiredTime - (timeNow - startTime) / 1000;  
if (timer >= 0)   
    timer.setText(String.valueOf(timer)); 
```

要减去计时器，减去 requiredTime 即可。因为你改变了参考值。

```
// Override onClickListener and add the line
// to deduct 3 seconds
requiredTime -= 3; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-24T16:53:29.367

你不能。你必须自己写`CountDownTimer`。复制原始代码并添加方法

```
public synchronized void addTime(long millis) {
    mStopTimeInFuture += millis;
} 
```

然后设置`onClickListener`为按钮

```
bt.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        timer.addTime(-2000);       
    }
}); 
```

[这](http://wklej.org/id/964941/ "样本")是完整的示例代码

# python - Python 3d散点图颜色图问题

> ID：15053575
> 
> 赞同：4
> 
> 时间：2013-02-24T16:01:34.187
> 
> 标签：python, matplotlib, color-mapping

我有四维数据（x、y、z 位移；以及各自的电压），我希望在 python 中绘制 3d 散点图。我已经得到了要渲染的 3d 图，但是我想使用颜色图来改变点的颜色，这取决于点电压的大小。

我已经尝试了一些东西，但似乎无法让它工作我得到了错误`ValueError: Cannot convert argument type <type 'numpy.ndarray'> to rgba array`。我不确定如何转换我需要转换的东西，所以如果有人可以提供一些帮助，我将不胜感激。

我的代码在这里：

```
fig = plt.figure()
from mpl_toolkits.mplot3d import Axes3D
cmhot = plt.cm.get_cmap("hot")
ax = fig.add_subplot(111, projection='3d',)
ax.scatter(x, y, z, v, s=50, c = cmhot)
plt.show() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T16:08:49.820

[ax.scatter](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.scatter)可以采用一个颜色参数`c`，它是一个标量序列（例如 a`list`或 an `array`），以及一个`cmap`用于指定颜色图的参数。因此，要使颜色根据电压的*大小而变化，您可以定义：*

```
c = np.abs(v) 
```

这使得正负电压具有相同的颜色。相反，如果您希望每种颜色（正或负）都有自己的颜色，则可以使用`c = v`.

* * *

例如，

```
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
import numpy as np
x, y, z, v = (np.random.random((4,100))-0.5)*15
c = np.abs(v)

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
cmhot = plt.get_cmap("hot")
cax = ax.scatter(x, y, z, v, s=50, c=c, cmap=cmhot)

plt.show() 
```

![在此处输入图像描述](../Images/a7e05cae28494c4e4852ee87c73a3379.png)

# seo - 网站的 SEO 优化包含子域

> ID：15053576
> 
> 赞同：-1
> 
> 时间：2013-02-24T16:01:34.180
> 
> 标签：seo

我有一个包含子域的网站，例如 www.example.com 是主站点，usa.example.com 是它的美国版本，两个站点共享一些共同信息，会有重复的内容，因此会产生 seo 问题，如何解决它，规范标签的用途是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:51:05.363

如果这些网站针对不同国家的用户，应该没有 SEO 问题。您**不想**使用规范标签。登录[Google 网站管理员工具](https://www.google.com/webmasters/tools/)并分别添加**每个**站点。对于美国站点，请转到“配置”->“设置”并将站点定位设置为“美国”。如果您的 www 网站定位到不同的国家/地区，请也为该网站设置正确的定位。如果您的 www 网站应该面向世界其他地区，则不要为其设置定位。

# php - PDO 获取 user_id

> ID：15053579
> 
> 赞同：0
> 
> 时间：2013-02-24T16:01:45.100
> 
> 标签：php, mysql, pdo

好吧，我的登录代码有些问题。所有工作都很好，但是当我尝试从我的第二个用户那里获取该行时，它会向我显示第一个用户的行（我的意思是有关用户名、密码、电子邮件的信息，...）。

```
public function login($username, $password){
    global $pdo;

    $query = $pdo->prepare("SELECT * FROM users WHERE username = ? AND password = ?");
    $query->bindValue(1, $username);
    $query->bindValue(2, $password);

    $query->execute();

    $result = $query->rowCount();

    if($result === 1){
    return true;

    } else {
    return false;
     }     
  } 
```

我不能使用 mysql_result，但是我怎么能得到它呢？

```
 function user_id_from_username($username){
  return mysql_result(mysql_query("SELECT user_id FROM users WHERE username = $username"), 0, 'user_id');   
}

function login($username, $password){
  $user_id = user_id_from_username($username);

  return (mysql_result(mysql_query("SELECT COUNT(user_id) FROM users WHERE username = $username AND password = $password "),0) == 1)? $user_id : false;
} 
```

对不起我的英语^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:11:32.050

```
public function login($username, $password){
    global $pdo;

    $query = $pdo->prepare("SELECT id FROM users WHERE username = ? AND password = ?");
    $query->execute(array($username, $password));
    return $query->fetchColumn();
} 
```

# opencv - haar 分类器中 cascade.xml 的解释

> ID：15053581
> 
> 赞同：5
> 
> 时间：2013-02-24T16:01:54.377
> 
> 标签：opencv, classification, adaboost, haar-wavelet

如果有人可以完全解释 cascade.xml 中的数字/值，那将是最好的。示例：

```
<!-- stage 0 -->
<_>
  <maxWeakCount>3</maxWeakCount>
  <stageThreshold>-8.8384145498275757e-001</stageThreshold>
  <weakClassifiers>
    <_>
      <internalNodes>
        0 -1 66 5.1593100652098656e-003</internalNodes>
      <leafValues>
        -8.0555558204650879e-001 8.0694979429244995e-001</leafValues></_>
    <_>
      <internalNodes>
        0 -1 108 1.5044789761304855e-002</internalNodes>
      <leafValues>
        -6.2940740585327148e-001 7.5122624635696411e-001</leafValues></_>
    <_>
      <internalNodes>
        0 -1 99 -4.7172707127174363e-005</internalNodes>
      <leafValues>
        5.5112153291702271e-001 -8.6111217737197876e-001</leafValues></_></weakClassifiers></_> 
```

这些值的含义是什么

```
 <internalNodes>
        0 -1 99 -4.7172707127174363e-005</internalNodes> 
```

另一个问题是，程序如何知道在特定阶段使用哪个功能？据我所知，功能的形式如下

```
<_>
  <rects>
    <_>
      21 6 3 5 -1.</_>
    <_>
      22 6 1 5 3.</_></rects>
  <tilted>0</tilted></_> 
```

其中它是两个矩形的坐标，形成如下所示：

```
=-=    = Black colored rectangle
=-=    - White colored rectangle
=-=
=-=
=-= 
```

什么是值-1。3.是什么意思？我知道它的权重，但它是如何用于计算特征的？

**概括**

1.  里面的值是什么意思`<internalNodes>`？
2.  特征是如何计算的？砝码如何`<rects>`使用？
3.  最重要的是，哪个字段表示在特定阶段/节点中使用了哪些功能。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T08:43:12.200

在深入研究了 OpenCV 的源代码之后，我终于得到了自己问题的答案。

*   包含在 internalNodes 标记内的值

> node.left node.right node.featureIdx node.threshold

我不确定 node.left 和 node.right 的用途是什么，因为我看不到它们在任何地方被调用。

*   权重用于计算特征，如下所示：

> float ret = rect[0].weight * CALC_SUM(p[0], _offset) + rect[1].weight * CALC_SUM(p[1], _offset);

*   如第一个项目符号中所述，node.featureIdx 是在该特定节点处评估的功能的索引。

# c++ - 当我打印到屏幕或文件时，Expat 打印出垃圾

> ID：15053583
> 
> 赞同：1
> 
> 时间：2013-02-24T16:02:13.277
> 
> 标签：c++, xml, expat-parser

当我从我的 XML 文档中打印出信息时，我会在每一行之前得到 ��。这是我的 XML 文档。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<note>
<to>Tove</to>
<from>Jani</from>
<heading>Reminder</heading>
<body>Don't forget me this weekend!</body>
</note> 
```

这是我的代码

```
#include <cstdio>
#include <expat.h>
#include <string>
#include <fstream>
#include <cstring>
using namespace std;
void XMLCALL start(void*,const char*, const char**);
void XMLCALL end(void*,const char*);
void XMLCALL character(void*, const char*, int);
int main()
{
    int size;
    fstream fin("note.xml", ios::in | ios::binary | ios::ate);
    size = fin.tellg();
    char* data = new char [size + 1];
    fin.seekg(0, ios::beg);
    XML_Parser parser = XML_ParserCreate("ISO-8859-1");
    XML_SetElementHandler(parser, start, end);
    XML_SetCharacterDataHandler(parser, character);
    fin.read(data, size);
    XML_Parse(parser, data, size , fin.eof());
    XML_ParserFree(parser);
    fin.close();
    delete [] data;
}

void XMLCALL start(void* data, const char* name, const char** atts)
{
   if((strcmp(name, "note")) == 0)
   {
       printf("-- Note --<br> ");
   }
   else if((strcmp(name,"to")) == 0)
   {
       printf("To:  ");
   }
   else if((strcmp(name,"from")) == 0)
   {
       printf("From: ");
   }
   else if((strcmp(name,"heading")) == 0)
   {
       printf("Heading: ");
   }
   else if((strcmp(name, "body")) == 0)
   {
       printf("Message: ");
   }
}

void XMLCALL end(void* data,const char* name)
{
    printf("<br>");
}

void XMLCALL character(void* data, const char* info, int length)
{
    printf("%s",info);
} 
```

这是它打印出来的：

```
-- Note --<br> 
�To:  Tove<br>
xFrom: Jani<br>
xHeading: Reminder<br>
xMessage: Don't forget me this weekend!<br>
x<br> 
```

这就是我希望它打印出来的内容：

```
-- Note --<br> 
To:  Tove<br>
From: Jani<br>
Heading: Reminder<br>
Message: Don't forget me this weekend!<br>
<br> 
```

任何帮助将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:39:13.343

字符在长度 = 1 的行尾调用 '\n'。其他字符在信息字符串中的 '\n' 之后是垃圾字符。

# java - 如何根据用户输入动态选择某个对象，然后使用其他方法来更改该特定对象？

> ID：15053590
> 
> 赞同：0
> 
> 时间：2013-02-24T16:03:03.523
> 
> 标签：java, android

嗨，我目前正在编写一个虚拟宠物风格的应用程序，我为宠物的基础创建了一个名为 Pet.class 的类

```
 package com.grim.droidchi;

public class Pet {

    public static int Health = 100;
    public static int Happiness = 10;
    public static int Level = 1;
    public static int Hunger = 0;
    public static int Exp = 0;
    public static String Name;
    public static Boolean isAlive = true;
    public static Boolean isSick = false;

    public Pet(int startHealth, int startLevel, int startHunger) {

    }

   } 
```

还有一个扩展基本宠物类的“狗”类

```
package com.grim.droidchi;

public class Dog extends Pet {

    public Dog(int startHealth, int startLevel, int startHunger) {
        super(startHealth, startLevel, startHunger);

    }

} 
```

每 30 分钟一个 AlarmManager 触发我的 Gameloop.class

```
package com.grim.droidchi;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.media.MediaPlayer;
import android.util.Log;
import android.widget.TextView;

public class Gameloop extends BroadcastReceiver {
    MediaPlayer mp = null;
    private static final String TAG = "VPET";

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d(TAG, "Loop running");
        if (Pet.isAlive == true) {
            Pet.Hunger = Pet.Hunger + 1;
            Pet.Exp = Pet.Exp + 2;
            Pet.Happiness = Pet.Happiness - 1;

            mp = MediaPlayer.create(context, R.raw.beep);
            mp.start();
            petLevel();
            petStatus();
            randomEncounters();
        } else {

        }
    }

    private void petLevel() {

    }

    private void randomEncounters() {
        if (Math.random() < 0.20) {
            Pet.isSick = true; 

        }

    }

    private void petStatus() {
        if (Pet.Hunger > 7) {
            Pet.isAlive = false;

        } 

    }

} 
```

如何让 Gameloop 中的操作取决于用户决定选择的特定宠物？（假设我创造了更多的宠物类型。）

PS 同样作为这个问题的旁注，实现保持 UI 始终从 Gameloop 类保持最新的最佳方法是什么？

任何帮助将不胜感激。我仍在学习 Java 和 Android，有时即使在所有好的学习材料中也很难找到具体/问题的答案。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:08:16.623

对于宠物类型：

```
if (pet instanceof Dog) 
```

要更新 UI，请定义一个接口。在这里查看我的答案：

[从广播接收器访问 R](https://stackoverflow.com/questions/15029647/accessing-r-from-a-broadcastreceiver/15029963#15029963)

它适用于不同的场景，但很容易适应。

[编辑]

`instanceof`通常是设计不佳的标志。

试试这个：

```
public void feed(Pet pet, int foodAmount){
        pet.feed(foodAmount);
}

public class Pet{       
}

public class Dog extends Pet{
    public void feed(int foodAmount){
        // feed like a dog
    }
}

public class Cat extends Pet{
    public void feed(int foodAmount){
        // feed like a cat
    }
} 
```

然后只需使用`pet.feed(10);`

# mongodb - 基于多字段表达式的MongoDB订单文档

> ID：15053600
> 
> 赞同：0
> 
> 时间：2013-02-24T16:04:16.557
> 
> 标签：mongodb, aggregation-framework

我有一系列电影，其中包括有多少人看过这部电影，具体取决于他们的年龄。一个例子是：

```
{
   name : "Return of Jedi",
   kids : 5,
   adults : 10,
   seniors : 3
} 
```

这意味着有 5 个孩子、10 个成人和 3 个老年人观看了《绝地归来》。

我需要根据排名返回电影推荐。排名计算为与搜索匹配的该电影的观众总数。例如，如果我有一个孩子和成人的家庭，那么绝地归来的等级将是 13（#kids + #adults）。

MongoDB可以按计算表达式排序吗？如何？如果没有，是否有替代方案？

我想通过添加一个计算字段然后按它排序来使用聚合框架来解决这个问题。但这不会太耗费资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:37:51.367

您需要使用 $project，然后使用 $add。

就像是：

```
db.movies.aggregate({ $project: 
{ 
      movieName: "$name", 
      totalAudience: { $add : ["$kids","$adults","$seniors"]}
},
{ $sort : { totalAudience: -1 }}
); 
```

将为您提供按观众总数 desc 排序的所有电影。

# python - 具有精确连接数的多处理 FTP 上传

> ID：15053602
> 
> 赞同：3
> 
> 时间：2013-02-24T16:04:20.213
> 
> 标签：python, ftp, multiprocessing, ftplib

因此，我已经能够使用多处理将多个文件一次上传到具有以下两个功能的给定服务器：

```
import ftplib,multiprocessing,subprocess

def upload(t):
    server=locker.server,user=locker.user,password=locker.password,service=locker.service #These all just return strings representing the various fields I will need.
    ftp=ftplib.FTP(server)
    ftp.login(user=user,passwd=password,acct="")
    ftp.storbinary("STOR "+t.split('/')[-1], open(t,"rb"))
    ftp.close() # Doesn't seem to be necessary, same thing happens whether I close this or not

def ftp_upload(t=files,server=locker.server,user=locker.user,password=locker.password,service=locker.service):
    parsed_targets=parse_it(t)
    ftp=ftplib.FTP(server)
    ftp.login(user=user,passwd=password,acct="")
    remote_files=ftp.nlst(".")
    ftp.close()
    files_already_on_server=[f for f in t if f.split("/")[-1] in remote_files]
    files_to_upload=[f for f in t if not f in files_already_on_server]
    connections_to_make=3 #The maximum connections allowed the the server is 5, and this error will pop up even if I use 1
    pool=multiprocessing.Pool(processes=connections_to_make)
    pool.map(upload,files_to_upload) 
```

我的问题是我（非常经常地）最终会遇到以下错误：

```
File "/usr/lib/python2.7/multiprocessing/pool.py", line 227, in map
    return self.map_async(func, iterable, chunksize).get()
  File "/usr/lib/python2.7/multiprocessing/pool.py", line 528, in get
    raise self._value
ftplib.error_temp: 421 Too many connections (5) from this IP 
```

注意：还有一个偶尔会出现超时错误，但我正在等待它再次抬起它丑陋的头，到时候我会发布它。

当我使用命令行（即“ftp -inv”、“open SERVER”、“user USERNAME PASSWORD”、“mput *.rar”）时，即使我有（例如）3 个实例，我也没有收到此错误立即运行。

我已经阅读了 ftplib 和 multiprocessing 文档，但我无法弄清楚是什么导致了这些错误。这有点问题，因为我经常备份大量数据和大量文件。

1.  有什么方法可以避免这些错误，还是有另一种方法可以让 /a 脚本做到这一点？
2.  有没有办法告诉脚本如果它有这个错误，它应该等待一秒钟，然后恢复它的工作？
3.  有没有办法让脚本按照它们在列表中的相同顺序上传文件（当然速度差异意味着它们并不总是4个连续文件，但目前顺序似乎基本上是随机的）？
4.  有人可以解释为什么/如何同时与该服务器建立的连接比脚本要求的多吗？

所以，只是处理异常似乎是有效的（除了偶尔的递归错误......仍然不知道那里到底发生了什么）。

根据#3，我并不是希望它是 100% 的，只是脚本会选择列表中的下一个文件来上传（因此进程速度的差异可能/仍然会导致订单不完全顺序的，比当前系统中的可变性要小，当前系统似乎几乎是无序的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T17:01:15.990

您可以尝试为每个进程使用一个`ftp`实例：

```
def init(*credentials):
    global ftp
    server, user, password, acct = credentials
    ftp = ftplib.FTP(server)
    ftp.login(user=user, passwd=password, acct=acct)

def upload(path):
    with open(path, 'rb') as file:
        try:
            ftp.storbinary("STOR " + os.path.basename(path), file)
        except ftplib.error_temp as error: # handle temporary error
            return path, error
        else:
            return path, None

def main():
    # ...
    pool = multiprocessing.Pool(processes=connections_to_make,
                                initializer=init, initargs=credentials)
    for path, error in pool.imap_unordered(upload, files_to_upload):
        if error is not None:
           print("failed to upload %s" % (path,)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T16:18:21.570

具体回答（2）有没有办法告诉脚本如果它有这个错误，它应该等待一秒钟，然后恢复它的工作？

是的。

```
ftplib.error_temp: 421 Too many connections (5) from this IP 
```

这是一个例外。你可以抓住它并处理它。虽然 python 不支持尾调用，所以这是一种可怕的形式，它可以像这样简单：

```
def upload(t):
    server=locker.server,user=locker.user,password=locker.password,service=locker.service #These all just return strings representing the various fields I will need.
    try:
        ftp=ftplib.FTP(server)
        ftp.login(user=user,passwd=password,acct="")
        ftp.storbinary("STOR "+t.split('/')[-1], open(t,"rb"))
        ftp.close() # Doesn't seem to be necessary, same thing happens whether I close this or not
    except ftplib.error_temp:
        ftp.close()
        sleep(2)
        upload(t) 
```

至于您的问题（3），如果这是您想要的，请串行上传，而不是并行上传。

我期待您发布更新，并回答 (4)。我唯一想到的是通过 ftp 连接到该 IP 的其他进程。

# c# - 如何将 CSV 文件读入列表 ?

> ID：15053609
> 
> 赞同：0
> 
> 时间：2013-02-24T16:05:00.430
> 
> 标签：c#

是否可以从 CSV 文件创建我自己的班级列表？

该文件例如看起来像：

```
ID;NAME
1;Foo
2;Bar 
```

然后我有一个像这样的课程：

```
class MyClass
{
    public int id { get; set; }
    public string name { get; set; }
} 
```

是否可以从 cvs 文件中生成此类的列表？也许有一些图书馆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T16:05:45.593

[您可以使用 CSV 解析器，](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)例如[`FileHelpers`](http://filehelpers.sourceforge.net/)FastCSV 。如果您不想使用第三方库，可以查看可以这样使用的内置类：[`TextFieldParser`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)

```
public IEnumerable<MyClass> Parse(string path)
{
    using (TextFieldParser parser = new TextFieldParser(path))
    {
        parser.CommentTokens = new string[] { "#" };
        parser.SetDelimiters(new string[] { ";" });
        parser.HasFieldsEnclosedInQuotes = true;

        // Skip over header line.
        parser.ReadLine();

        while (!parser.EndOfData)
        {
            string[] fields = parser.ReadFields();
            yield return new MyClass()
            {
                id = fields[0],
                name = fields[1]
            };
        }
    }
} 
```

进而：

```
List<MyClass> list = Parse("data.csv").ToList(); 
```

但是，请**不要****[`never roll your own CSV parser`](http://secretgeek.net/csv_trouble.asp)**像其他人在这里建议的那样回答您的问题。

# deployment - 如何使用 QT5 部署应用程序

> ID：15053610
> 
> 赞同：0
> 
> 时间：2013-02-24T16:05:04.040
> 
> 标签：deployment, qt-creator, qt5

因此，我使用 QT creator 为 QT5 制作了乳胶的 GUI 前端。该应用程序运行良好，但我无法部署它。build 中的 deploy 选项显示为灰色。我也尝试过遵循[本](http://qt-project.org/doc/qt-5.0/qtdoc/deployment-windows.html)指南，但我什至无法将我的 QT 配置为使用静态链接。我能够配置源代码，但是当我尝试运行 mingw32-make sub-src 时，它在这里说什么都不做。

我使用链接 Qt 5.0.1 for Windows 32-bit (MinGW 4.7, 823 MB)从[这里下载了 QT。](http://qt-project.org/downloads)我还下载了适用于 Windows 8 的 Microsoft Visual Studio Express，以获取构建 C++ 所需的工具。

我还尝试手动安装 mingw32。我还安装了 Strawberry perl，因为一位指南告诉我要这样做，但什么也没做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:22:39.877

我设法解决了这个问题。有一个.dll。我之前没有找到它的原因是我的应用程序本身并不需要它，但我使用的库之一依赖于它。丢失的 .dll 是 icuuc49.dll。

# powershell - Powershell 获取进程查询

> ID：15053614
> 
> 赞同：2
> 
> 时间：2013-02-24T16:05:45.663
> 
> 标签：powershell

我想编写一个简单的 If 语句来检查进程是否存在。如果它存在，应该开始一些事情。

像这样，但工作.. ;)

```
If ((Get-Process -Name Tvnserver.exe ) -eq $True)
{ 
    Stop-Process tnvserver
    Stop-Service tvnserver
    Uninstall...
    Install another Piece of Software
}
Else
{
    do nothing
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T18:31:44.663

`Get-Process`不返回布尔值，并且列出的进程名称没有扩展名，这就是您的代码不起作用的原因。删除扩展并检查结果是否`$null`如[Musaab Al-Okaidi](https://stackoverflow.com/a/15053676/1630171)建议的那样，或者将结果转换为布尔值：

```
if ( [bool](Get-Process Tvnserver -EA SilentlyContinue) ) {
  # do some
} else {
  # do other
} 
```

如果您不希望脚本在进程未运行的情况下执行任何操作：只需省略`else`分支。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T16:12:46.127

如果进程不存在，这将评估为 true：

```
(Get-Process -name Tvnserver.exe -ErrorAction SilentlyContinue) -eq $null 
```

或者如果你想改变它，你可以否定该语句，如下所示：

```
-not ( $(Get-Process -name Tvnserver.exe -ErrorAction SilentlyContinue) -eq $null ) 
```

`-ErrorAction SilentlyContinue`如果进程不存在，必须避免引发任何错误，这一点很重要。

# php - 使用 ajax/jquery 设置 php 会话变量

> ID：15053620
> 
> 赞同：0
> 
> 时间：2013-02-24T16:06:15.287
> 
> 标签：php, jquery, ajax, session

我是 ajax/jquery 的新手。那么有没有一种简单的方法，当我单击表格中的单元格时，它的值将存储在会话变量中。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T16:23:17.030

```
<html>
<head>
...
<script src="jquery.js"></script>
...
<head>
<body>
....
<table id="clickable"><tr><td>Hello</td></tr></table>
<script>
$('#clickable td').on('click', function(e){ $.ajax({
    type: 'POST',
    url: 'yourphppage.php',
    data: {sendCellValue: $(this).text()}
}); });
</script>
....
</body>
</html> 
```

表格可以任意大，上面的脚本会将表格中被点击且 ID 为“可点击”的任何单元格发送到您的 PHP 页面。请注意，如果您想要多个可点击的表格，则应将其从 id 更改为 class。

然后在yourphppage.php中，（上面给出的代码必须在同一目录中：

```
<?php
session_start();
$_SESSION['cellValue'] = $_POST['sendCellValue'];
?> 
```

将信息保存到数据库与会话非常不同。你需要区分谁点击了什么？或者只记录点击的内容，不管是谁点击的？

如果是这样，请使用以下代码而不是上面的第二个代码段：

```
<?php
$connection = mysql_connect("localhost","my_db_username","pass1234");
mysql_select_db("my_db_name", $connection);

mysql_query('INSERT INTO TheTable (CellValue)
VALUES ("'.mysql_real_escape_string($_POST['sendCellValue']).'")');
?> 
```

为此，您需要一张桌子（称为 TheTable）。它将需要两列。第一个可以称为“ID”或类似的东西。它需要设置为“自动递增”，其类型必须为“整数”。第二列必须称为“CellValue”，其类型可以设置为“varchar”，长度为 255 个字符。

要输出信息以便打印，您应该提出一个关于如何将数据库表输出为 HTML 的新问题。您很可能不想按原样打印表格，因此您应该具体说明人们将点击的内容，即它是文本吗？还是一个号码？如果它是一个数字，什么样的数字？是否要将数字分组并显示每个组的总点击次数？等等，请具体。在打印出来之前，您可能需要根据要对表格中的信息进行的后处理来更改上述某些内容。例如，您可能需要将第二列的类型从 varchar 更改为 integer 或 float（在这种情况下，您还需要更改 PHP 文件）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T16:12:27.620

它可以像这样简单：

以下代码段将值发送到可以设置会话变量的页面

```
$.post('sessionsetter.php', { 'fieldname' : 'sessionvariablename', 'value' : 'sessionvalue'}); 
```

现在'sessionsetter.php'可以是这样的：

```
session_start();
$_SESSION[$_POST['fieldname']] = $_POST['value']; 
```

现在，您可以发送要设置为 SESSION 变量的任意数量的变量。

# c# - 如何暂停死锁程序并检查每个线程（VS，C#）的堆栈跟踪？

> ID：15053621
> 
> 赞同：1
> 
> 时间：2013-02-24T16:06:16.577
> 
> 标签：c#, multithreading, visual-studio, debugging, deadlock

我已经复制了 Windows 窗体应用程序[锁定](http://yacsharpblog.blogspot.ru/2008/07/locked-up.html)文章。它适用于 Visual Studio 2008，但我在 VS2010 中使用了它

后续文章[Lock Up Unlocked](http://yacsharpblog.blogspot.ru/2008/07/lock-up-unlocked.html)讲述：

> “如果您运行它并快速单击按钮几次，应用程序将停止响应”

好死……

> “然后，如果你暂停程序并检查每个线程的堆栈跟踪，你会发现......”

如何暂停程序并检查 Visual Studio 中每个线程的堆栈跟踪（最好是 2010，我希望其他线程也一样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:14:09.637

您应该在调试器下运行程序。您应该在工具栏上有一个暂停按钮，它将暂停在调试器下运行的程序。如果没有，请尝试使用菜单：Debug > Break All。

# .net - .NET 从资源复制文件

> ID：15053622
> 
> 赞同：-1
> 
> 时间：2013-02-24T16:06:17.683
> 
> 标签：.net, file, output

我想从我的 .NET 程序中输出一个文件。例如要在与可执行文件相同的文件夹中创建的图像。我希望该文件包含在程序中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:09:58.073

是的。您可以将该文件添加到您的项目中并将其设置为“嵌入式资源”以用于属性下的编译选项。该文件将嵌入到程序集中。

您可以使用以下代码从代码中获取文件作为流：

```
GetType().Assembly.GetManifestResourceStream(GetType(), "filename.ext"); 
```

在这里，我用作`GetType`获取当前程序集对象实例的快捷方式。该名称将以相对于您作为第一个参数传入的类型的命名空间为前缀（因此，如果类型和文件位于同一文件夹中，则可以使用原始文件名）。

# php - 维基风格的链接。如果目标页面不存在，如何更改链接的颜色

> ID：15053629
> 
> 赞同：0
> 
> 时间：2013-02-24T16:07:08.480
> 
> 标签：php, symfony1, symfony-1.4, propel

我有模型维基页面。WikiPage->我从数据库中获取的文本。我创建了方法“wikify”并按类::wikify($Page->getText()) 在页面上生成文本。在文本中我有构造 [链接名称]，我用这个生成链接：

```
$text = preg_replace('@\[(.*) (.*)\]@', '<a href="\\1" class="<?php Wiki::httpresponse($\\1) ?>">\\2</a>', $text); 
```

这个想法是使用函数 httpresponse 检查 url，如果没有页面则更改类。

http响应：

```
static public function httpresponse($url){
    $ch = curl_init(); 
    curl_setopt($ch, CURLOPT_URL, $url); 
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_setopt($ch, CURLOPT_FAILONERROR, true); 
    curl_exec ($ch); 
    $intReturnCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); 
    curl_close ($ch); 
    if ($intReturnCode != 200 && $intReturnCode != 302 && $intReturnCode != 304) { return "red"; } else return "blue";
} 
```

2个问题：

1.  当我在我的本地主机页面上测试 httpresponce 时，它​​没有找到它们，当我在网页上测试它时，一切正常。

    （检查链接如`http://localhost:8080/category/page`，类别是第一个模块，页面是第二个，主页是模块：类别，操作：索引，类别/页面是模块的路由：页面，操作：显示）

2.  生成的链接类仍然`<?php Wiki::httpresponse($\\1) ?>`没有执行 httpresponce 方法。

可以做什么？也许有更好的方法来完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:24:01.417

找到解决方案。

```
$reg_inURL = "@\[(\w*)\/(\w*) (.*)\]\]@";
   preg_match_all($reg_inURL, $text, $matches);
   $count = 0;
   $links = count($matches[0]);
   foreach ($matches[0] as $pattern)
   {
    $cat = $matches[1][$count];
    $pag = $matches[2][$count];

    $q = WikiPageQuery::create()
        ->leftJoin('WikiPage.WikiCategory')
        ->where('WikiCategory.category_address = ?', $cat)
        ->filterByAddress($pag)
        ->findOne();
    if (!$q)
    {
        $link_class = 'red';
        $url = $cat.'/add';
    }
    else 
    {
        $link_class = 'blue';
        $url = $cat.'/'.$pag;
    }

    $title = $matches[3][$count];
    $text = str_replace  ($pattern, '<a href='.$url.' class='.$link_class.'>'.$title.'</a>', $text);
    $count = $count+1;
   } 
```

# android - android：使用 addOnGlobalLayoutListener 获取扩展视图的尺寸但失败

> ID：15053630
> 
> 赞同：0
> 
> 时间：2013-02-24T16:07:09.610
> 
> 标签：android, view, oncreate, dimension

我正在执行以下`addOnGlobalLayoutListener`操作以测量主要活动 (A)`OnCreate`部分中的扩展视图 (doodleView)。

```
 doodleView = (DoodleView) findViewById(R.id.doodleView);
  doodleView.setOnTouchListener(this);    

  doodleView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() 
  {
        @Override
        public void onGlobalLayout() 
        {
            doodleViewWidth = doodleView.getWidth(); 
            doodleViewHeight = doodleView.getHeight();
        }
  }); 
```

`addOnGlobalLayoutListener`但是，它带有以下错误语句的红色下划线：

```
The method addOnGlobalLayoutListener(ViewTreeObserver.OnGlobalLayoutListener) in the type ViewTreeObserver is not applicable for the arguments (new OnGlobalLayoutListener(){}) 
```

我已经研究了网络，但找不到错误的原因。会有人知道问题吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T16:44:47.493

我正在做一些非常相似的事情，但后来我发现了 onMeasure。因此，如果这本质上是一次性的事情，请尝试做类似的事情：

```
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    View view = cardSlots[1];
    int cardHeight = view.getMeasuredHeight();
    int cardWidth = view.getMeasuredWidth();
    resizeView(playedSlot, cardWidth, cardHeight);
}

static public void resizeView(View view, int cardWidth, int cardHeight) {
    view.getLayoutParams().height = cardHeight;
    view.getLayoutParams().width = cardWidth;
    view.invalidate();
    //view.requestLayout();
    ((View)view.getParent()).invalidate();
} 
```

这样你就不用担心这样做了：

```
getViewTreeObserver().removeOnGlobalLayoutListener(this); 
```

你可能已经忘记了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T12:27:28.173

我有同样的问题。我将功能修改为

```
doodleView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() 
  {
        @Override
        public void onGlobalLayout() 
        {
            doodleViewWidth = doodleView.getWidth(); 
            doodleViewHeight = doodleView.getHeight();
        }
  }); 
```

我所做的只是`ViewTreeObserver`在之前添加了类名`OnGlobalLayoutListener()`。

# cakephp - CakePHP 相同的数组来自直接和关联模型

> ID：15053631
> 
> 赞同：0
> 
> 时间：2013-02-24T16:07:13.800
> 
> 标签：cakephp, model, cakephp-1.3

我在 CakePHP 1.3 中与 Categories -> Products 有简单的模型关系

`Category`有很多`Products`

我在不同控制器中获得的数据数组之间存在细微差别。数据在控制器`Product`中作为关联模型获取时在主产品数组中，在获取`Categories`时是分开的`Products`。

例如获取“Product1”

在`Categories`- $category['Product'][0]['title']

并且在`Products`- $product[0]['Product']['title']

我想使用相同的元素来展示产品。将使用哪种数组方案只是为了相同并不重要。进行修改的正确位置在哪里？我可以在获得这些数组后对其进行修改，但不要认为这是最好的选择。

当我在`Categories`控制器中并获得一个类别时，我得到了这个：

```
// $this->Category->findById('12');
Array
(
[ProductCategory] => Array
    (
        [id] => 12
        [title] => Category 1
        [updated] => 2013-02-24 10:06:15
        [created] => 2013-02-24 10:06:15
    )
[Product] => Array
    (
        [0] => Array
            (
                [id] => 4
                [parent_id] => 12
                [title] => Product1
                [updated] => 2013-02-24 10:17:01
                [created] => 2013-02-24 09:12:59

            )

        [1] => Array
            (
                [id] => 6
                [parent_id] => 12
                [title] => Product2
                [updated] => 2013-02-24 10:16:54
                [created] => 2013-02-24 09:13:53

            )
) 
```

将所有产品放入`Products`控制器时：

```
// $this->Product->find('all');
Array
(
    [0] => Array
        (
            [Product] => Array
                (
                    [id] => 10
                    [parent_id] => 12
                    [title] => Product1
                    [updated] => 2013-02-24 10:16:42
                    [created] => 2013-02-24 09:16:35
                )

        )

    [1] => Array
        (
            [Product] => Array
                (
                    [id] => 8
                    [parent_id] => 12
                    [title] => Product2
                    [updated] => 2013-02-24 10:16:47
                    [created] => 2013-02-24 09:15:39
                )

        )
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:09:37.523

您的一个发现是 a `find('all')`，另一个是 a `findById()`（它使用`find('first')`）。

**这两个都以不同的格式返回数据，因为`find('first')`知道您只想要一个项目，并且`find('all')`是一组未知的项目。**

两者都使用`find('all')`，但根据您是否只需要一个或多个来设置限制。然后，您的数据将返回完全相同。

您从哪个控制器检索数据对返回的数据没有影响。然而，哪种型号可以 - 所以只要确保您从同一个型号中进行查找。

例如。

```
//in your ProductsController
$this->Product->find('all');

//in your CategoriesController
$this->Category->Product->find('all');

// in some other controller
$this->loadModel('Product);
$this->Product->find('all'); 
```

PS - 但是如果你不在你的控制器中做你的“发现”会更好 - 在你的模型中创建一个方法，然后从你的控制器中调用它，而不是`$this->Product->find()`，它会是`$this->Product->getProducts()`（或者你想调用它的任何东西）。（阅读更多关于“胖模型，瘦控制器”的原因/示例......等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:07:13.220

或者，如果您希望“产品”看起来像：

```
<?php

'Product' => array
    (
        [0] => array
            (
                'Product' => array
                    (
                        ...
                    )
            )
    )

?> 
```

从类别模型中获取数据时，您需要手动获取相关数据，例如：

```
<?php

$this->Category->contain();
$cats = $this->Category->find('all');
foreach ($cats as &$cat) {
    $this->Category->Product->contain();  // You have to contain for each find.
    $cat['Product'] = $this->Category->Product->find('all', 
        array(
            'conditions' => array(
                'Product.category_id' => $cat['Category']['id']
            )
        )
    );
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T03:56:44.973

戴夫是对的，不同之处在于您使用的方法...即使您声称始终合并关联数据，但您在“产品”模型上的发现不是关联数据，因此格式将始终不同。

我来这里有一段时间了，我已经注意到戴夫知道他的东西。:) 我同意胖模型/瘦控制器范式，以实现干净、高效的代码。

如果你改变了：

```
<?php

$this->Category->contain(array(
    'Product'
));
$this->Category->find('all', 
    array(
        'conditions' => array(
            'Category.id' => $id // 12 for your OP.
        ),
        'limit' => 1
    )
);

?> 
```

应该给你：

```
<?php

array
    (
    [0] => array
        (
        'Category' => array
            (
            [id] => 12
            [title] => Category 1
            [updated] => 2013-02-24 10:06:15
            [created] => 2013-02-24 10:06:15
            ),
        'Product' => array
            (
                [0] => array
                    (
                    ...
                    ),
                [1] => array
                    (
                    ...
                    )
            )
    )
)

?> 
```

如果我错了，请纠正我，谢谢！

# python - 如何通过 SQLAlchemy 在 backref(.., order_by=..) 中使用 mixin 类中的列名？

> ID：15053649
> 
> 赞同：3
> 
> 时间：2013-02-24T16:09:05.343
> 
> 标签：python, sqlite, python-2.7, sqlalchemy

我修改了 Base 类以包含我所有的表都具有的三个默认列：

```
class Base(object):
    id            = Column(Integer, primary_key=True)
    date_created  = Column(DateTime, default=func.current_timestamp())
    date_modified = Column(DateTime, default=func.current_timestamp(),
                                     onupdate=func.current_timestamp()) 
```

我在两列之间有一对多的关系：

```
class User(Base):
    __tablename__ = 'users'

    name          = Column(Text)
    password      = Column(Text)

    items = relationship("Item", backref=
                 backref('user', order_by=date_modified),
                                 cascade="all, delete, delete-orphan")

class Item(Base):
    __tablename__ = 'items'

    user_id       = Column(Integer, ForeignKey('users.id'))
    title         = Column(Text) 
```

如果我在每个表的类中明确定义了 date_created 和 date_modified 列，这曾经可以正常工作。但是，从 Base 继承时，它不起作用，并且出现以下错误：

> **NameError**：名称“ **date_modified** ”未定义

如何使用`order_by=column_from_mixin`（`order_by=date_modified`）对反向引用关系进行排序？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T17:35:35.303

您可以使用以下任何一种：

```
backref('user', order_by=lambda: User.date_modified)
backref('user', order_by='User.date_modified') 
```

可以使用类名访问类属性`User.date_modified`，但此时类本身仍未定义。提供可调用（第二种情况在内部转换为可调用）会推迟名称解析，直到第一次使用映射，此时定义了所有映射类。

# windows - 使用 Windows 递归填充空文件夹

> ID：15053651
> 
> 赞同：0
> 
> 时间：2013-02-24T16:09:17.913
> 
> 标签：windows, shell, command-line, scripting, batch-file

我有大量的文件夹，命名为“A”到“Z”，这样每个文件夹都有相同形式的子文件夹。

例如，我可以在此路径中有一个目录：**.\A\D\E**

我想用一个空文件填充这些文件夹中的每一个（如果有人好奇，我可以将它提交到 git 存储库）。

Windows 没有相当于 Linux 的触控功能，但我安装了 GnuWin32 工具集，因此事实上我可以在我的 Windows 环境中使用触控功能。

我首先创建了一个包含以下内容的批处理文件：

```
FOR /D /r do touch empty 
```

但是当我运行它时，文件夹没有被填充。我也没有收到任何错误：

```
C:\sandbox>FOR /D /r do touch empty
C:\sandbox> 
```

有人看到上面的批处理脚本行有什么明显的错误吗？除了使用其他非 Windows 命令之外，我还有什么可以尝试的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:14:31.437

您只需要正确获取`FOR`命令的语法：

```
for /r %f in (.) do touch %f\empty 
```

# android - 来自 kml 文件的坐标到达模拟器中已修改

> ID：15053655
> 
> 赞同：0
> 
> 时间：2013-02-24T16:09:50.083
> 
> 标签：android, eclipse, gps, emulation, ddms

将坐标从 kml 文件发送到我的模拟器时遇到了一些麻烦。例如，我发送`long: 13,428753` `lat: 52,518823`和接收：`13.428751666666669`和`52.51882166666666`

在使用这些坐标在 a 上创建标记时，`GoogleMap`我会收到一个位置稍有不同的标记，但这会破坏`LatLng`对象之间的比较。有什么想法可以解决这个问题吗？如果需要，我可以提供更多信息。

我如何接收我的数据：

```
@Override
    public void onLocationChanged(Location location) {  
        if(CurrentJourney.getInstance().getJourney() == null) {
            return;
        }

        CurrentJourney.getInstance().getJourney().getCoordinates()
            .add(new LatLng (location.getLatitude(), location.getLongitude()));

        String latitude = String.valueOf(location.getLatitude());
        String longitude = String.valueOf(location.getLongitude());

        Intent intent = new Intent(ACTION_NEW_LOCATION);
        intent.putExtra(EXTRA_NEW_LATITUDE, latitude);
        intent.putExtra(EXTRA_NEW_LONGITUDE, longitude);
        sendBroadcast(intent);
    } 
```

# ruby-on-rails - Ruby on Rails 设计 - 没有路线匹配 [GET] "/users"

> ID：15053657
> 
> 赞同：0
> 
> 时间：2013-02-24T16:09:59.823
> 
> 标签：ruby-on-rails, devise

第一次使用设计我有点困惑。我遵循了手动通过身份验证的教程，因此我在这方面对 Rails 有一些了解。

通常，当您为用户创建脚手架时，您会得到一个用户控制器，其中包含用于显示、编辑、添加等用户的所有方法，可以通过浏览器通过`http://localhost:3000/users/[action]`.

我已经销毁了用户脚手架并再次使用设计（rails 生成设计用户）开始，但这根本不会创建控制器。将`http://localhost:3000/users/`给出错误`No route matches [GET] "/users"`。

我应该创建自己的控制器吗？我从这里去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:39:37.560

我认为您没有初始化设计。你可能应该跑

```
rails generate devise:install 
```

然后通过运行为用户生成模型

```
rails generate devise User 
```

# c# - 未知的可附加成员“Grid.Row”和“Grid.Column”

> ID：15053659
> 
> 赞同：1
> 
> 时间：2013-02-24T16:10:13.980
> 
> 标签：c#, .net, wpf, microsoft-metro

我是一名长期的 WPF 设计师，但对 Windows 应用程序开发还很陌生。我正在尝试将一组对象绑定到网格上，但不断收到错误`Unknown attachable member '(Grid.Row)' on element 'FrameworkElement'`和`Unknown attachable member '(Grid.Column)' on element 'FrameworkElement'`.

有人可以向我解释如何通过样式设置各种网格附加属性吗？

```
<ItemsControl ItemsSource="{Binding}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Grid>
                <!-- Column and row definitions omitted for brevity -->
            </Grid>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemContainerStyle>
        <Style TargetType="FrameworkElement">
            <Setter Property="(Grid.Row)" Value="{Binding Row}" />
            <Setter Property="(Grid.Column)" Value="{Binding Column}" />
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:49:12.110

不要使用 PropertyPath。您只需要一个合格的 Owner.Property 字符串。

```
<Setter Property="Grid.Row" Value="{Binding Row}" /> 
```

取自[PropertyPath XAML 语法](http://msdn.microsoft.com/en-us/library/vstudio/ms742451.aspx)

> 某些样式和模板属性（例如 Setter.Property）采用表面上类似于 PropertyPath 的限定属性名称。但这不是真正的 PropertyPath；相反，它是 WPF XAML 处理器结合 DependencyProperty 的类型转换器启用的限定 owner.property 字符串格式用法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:09:22.687

事实证明，我上面发布的代码实际上存在 3 个问题。

正如 @LPL 正确识别的那样`Setter.Value`，在使用 PropertyPath 的地方采用了限定的属性名称。这里的解决方法是**去掉括号**:`<Setter Property="Grid.Row" ... />`和`<Setter Property="Grid.Column" ... />`.

第二个问题是样式目标类型。事实证明，metro Grid 附加属性不能应用于 FrameworkElement。这里的解决方案是**用更具体的东西更新目标类型**：`<Style TargetType="ContentPresenter" />`。

最后，与 Silverlight 一样，[metro setter 的 value 属性不支持 bindings](https://stackoverflow.com/questions/11857505/how-do-i-do-bindings-in-itemcontainerstyle-in-winrt)。因此，即使在修复了前两个错误之后，setter 实际上仍试图将网格附加属性设置为 Binding 类型的实例。虽然不是那么直接，但[可以在此处找到解决方案的所有细节](http://blogs.msdn.com/b/delay/archive/2009/11/02/as-the-platform-evolves-so-do-the-workarounds-better-settervaluebindinghelper-makes-silverlight-setters-better-er.aspx)。总之，您可以使用 setter**设置自定义附加属性，这将反过来设置任何所需的绑定**。

# mysql - 在 2 个数字之间对项目进行分组

> ID：15053660
> 
> 赞同：0
> 
> 时间：2013-02-24T16:10:15.413
> 
> 标签：mysql

我有一个看起来像这样的查询：

```
select 
price, 
item_id,
sum(price),
count(item_id)
from transactions
group by
(price <= 20),
(price between 21 and 30),
(price between 31 and 40),
(price between 41 and 50),
(price > 50) 
```

我以前从未做过这样的小组，当我写它时，我只是在猜测查询是否有效，而且确实如此。但我的问题是，它真的能得到我想要的吗？

我希望所有交易按以下方式分组：

*   价格低于或等于 20 美元的物品
*   价格在 21 美元到 30 美元之间的物品
*   价格在 31 美元到 40 美元之间的物品
*   价格在 41 到 50 美元之间的物品
*   价格超过 50 美元的物品

那么，该查询是否符合我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:12:51.580

```
SELECT 
  price, 
  item_id,
  sum(price),
  count(item_id),
  IF(price<=20,0,IF(price<=30,1,IF(price<=40,2,IF(price<=50,3,4)))) AS pricegroup
FROM transactions
GROUP BY pricegroup 
```

甚至

```
SELECT 
  price, 
  item_id,
  sum(price),
  count(item_id)
FROM transactions
GROUP BY 
  IF(price<=20,0,IF(price<=30,1,IF(price<=40,2,IF(price<=50,3,4)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T16:17:26.900

在标准 SQL（和 MySQL）中执行此操作的方法是使用`case`语句。另外，我将定义放在这样的子查询中：

```
select pricegrp, sum(price), count(item_id)
from (select t.*,
             (case when price <= 20 then '00-20' 
                   when price between 21 and 30 then '21-30'
                   when price between 31 and 40 then '31-40'
                   when price between 41 and 50 then '41-50'
                   when price > 50 then '50+'
             end) as pricegrp
      from transactions t
     ) t
group by pricegrp 
```

另外，你也想按 item_id 分组吗？或者您只是想退回一件任意物品？根据您的需要，我`item_id`从`select`子句中删除了。似乎没有必要。

您的查询实际上确实在 MySQL 中运行，就其运行而言。它将为您想要的每个组生成一行，因此从这个意义上说它“有效”。但是，在每个组中，它将选择任意价格和 item_id。这些在`group by`子句中没有明确提及，因此您使用的是名为 Hidden Columns 的 MySQL（错误）功能。查询的不同运行或对数据的细微更改或对查询的细微更改可能会更改为每个组返回的 price 和 item_id 的值。

我强烈建议您实际命名该组。这使得查询和输出更加清晰。

另外，我建议您养成将所有列都放在子句中的`select`习惯`group by`。在某些情况下隐藏列实际上很有用，但我认为，一般来说，您应该谨慎地依赖它们。

如果价格没有存储为整数，那么正确的逻辑是：

```
select pricegrp, sum(price), count(item_id)
from (select t.*,
             (case when price <= 20 then '00-20' 
                   when price <= 30 then '21-30'
                   when price <= 40 then '31-40'
                   when price <= 50 then '41-50'
                   when price > 50 then '50+'
             end) as pricegrp
      from transactions t
     ) t
group by pricegrp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T16:15:41.317

```
SELECT  price, 
        item_id,
        SUM(CASE WHEN price <= 20 THEN price ELSE 0 END) `(price <= 20) SUM`,
        SUM(CASE WHEN price <= 20 THEN 1 ELSE 0 END) `(price <= 20) COUNT`,
        SUM(CASE WHEN price between 21 and 30 THEN price ELSE 0 END) `(price <= 20) SUM`,
        SUM(CASE WHEN price between 21 and 30 THEN 1 ELSE 0 END) `(price <= 20) COUNT`,
        SUM(CASE WHEN price between 31 and 40 THEN price ELSE 0 END) `price between 31 and 40 SUM`,
        SUM(CASE WHEN price between 31 and 40 THEN 1 ELSE 0 END) `price between 31 and 40 COUNT`,
        SUM(CASE WHEN price between 41 and 50 THEN price ELSE 0 END) `price between 41 and 50 SUM`,
        SUM(CASE WHEN price between 41 and 50 THEN 1 ELSE 0 END) `price between 41 and 50 COUNT`,
        SUM(CASE WHEN price > 50 THEN price ELSE 0 END) `price > 50 SUM`,
        SUM(CASE WHEN price > 50 THEN 1 ELSE 0 END) `price > 50 COUNT`
FROM    transactions
GROUP   BY price, item_id 
```

# wordpress - 删除 wp_nav_menu 中的子菜单范围

> ID：15053665
> 
> 赞同：1
> 
> 时间：2013-02-24T16:11:31.817
> 
> 标签：wordpress, menu

我有一个 HTML 菜单，我想用 wp_nav_menu 在 Wordpress 中显示它。

的HTML

```
<nav id="navigation" class="ddsmoothmenu">
<ul id="main-menu">
    <li><a href="index.html" class="current"><span>Home</span></a>
        <ul>
            <li><a href="index-2.html">Home Alternate 2</a></li>
            <li><a href="index-3.html">Home Alternate 3</a></li>
            <li><a href="index-4.html">Home Alternate 4</a></li>
            <li><a href="index-5.html">Home Alternate 5</a></li>
            <li><a href="index-6.html">Home Alternate 6</a></li>
        </ul>
    </li>
 </ul> 
```

我在我的 Wordpress header.php 文件中添加以下内容以显示导航菜单

```
$defaults = array(
               'theme_location'  => 'primary',
               'menu'            => 'Primary Menu',
               'container'       => '',
               'container_class' => '',
               'container_id'    => '',
               'menu_class'      => 'menu',
               'menu_id'         => '',
               'echo'            => true,
               'fallback_cb'     => 'wp_page_menu',
               'before'          => '',
               'after'           => '',
               'link_before'     => '<span>',
               'link_after'      => '</span>',
               'items_wrap'      => '<ul id="%1$s" class="%2$s">%3$s</ul>',
               'depth'           => 0,
               'walker'          => ''
             );
wp_nav_menu($defaults); 
```

然而，输出也在菜单项的第二级添加标签

```
<nav id="navigation" class="ddsmoothmenu">
<ul id="main-menu">
    <li><a href="index.html" class="current"><span>Home</span></a>
        <ul>
            <li><a href="index-2.html"><span>Home Alternate 2</span></a></li>
            <li><a href="index-3.html"><span>Home Alternate 3</span></a></li>
            <li><a href="index-4.html"><span>Home Alternate 4</span></a></li>
            <li><a href="index-5.html"><span>Home Alternate 5</span></a></li>
            <li><a href="index-6.html"><span>Home Alternate 6</span></a></li>
        </ul>
    </li>
 </ul> 
```

有没有办法只为顶级菜单项添加跨度或从二级菜单项中删除跨度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:23:43.650

```
add_filter( 'wp_nav_menu_objects', function( $items ) {
      foreach ( $items as $item ) {
        if (!$item->menu_item_parent) {
           $item->title = '<span>' . $item->title . '</span>';
        }
    }
    return $items;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:18:57.970

好的，虽然 walker 似乎是完成这项工作的一种好方法，但它似乎非常复杂，有很多行代码。我刚刚发现删除子菜单项跨度的最简单方法是使用 jQuery。Wordpress 自动将子菜单类添加到子 ul 中，因此对我有用的是

```
$('ul.sub-menu li a span').contents().unwrap(); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T20:57:58.760

使用 CSS 你可以隐藏子菜单`wp_nav_menu`

```
.sub-menu { display:none; } 
```

# php - 调试外部php

> ID：15053672
> 
> 赞同：0
> 
> 时间：2013-02-24T16:12:35.423
> 
> 标签：php, netbeans

我已经设置了 Xdebug。它有效。我可以调试代码。但是我在调​​试外部 php 代码时遇到了一个问题，它确实达到了我设置的断点。

这里有更多细节。

从表单的操作调用外部代码。

`<form name="htmlform" method="post" action="contact_form_send.php">`

我在contact_form_send.php中有一些代码，例如以下

```
 <?php 
```

`if(isset($_POST['email'])) { $email_to = "xxx@xxx.com"; $email_subject = "test";`

我在第一行设置断点。它从未击中它。但是，如果我将代码嵌入到与表单相同的文件中。我可以设置断点，单步执行代码。我知道 xdebug 正在工作，因为我看到状态栏说

我是 netbeans 和 php 的新手。如何调试外部 php 代码？

谢谢你的帮助。

这是我的 Xdebug 配置。

[X调试]

zend_extension = "C:\xampp\php\ext\php_xdebug.dll"

xdebug.profiler_append = 0

xdebug.profiler_enable = 1

xdebug.profiler_enable_trigger = 0

xdebug.profiler_output_dir = "C:\xampp\tmp"

xdebug.profiler_output_name = "cachegrind.out.%t-%s"

xdebug.remote_enable = 1

xdebug.remote_handler = "dbgp"

xdebug.remote_host = "127.0.0.1"

xdebug.trace_output_dir = "C:\xampp\tmp"

xdebug.remote_port = 9080

**更新：** 刚刚让它工作。我正在调试的索引文件是 htm 文件而不是 php.ini 文件。它在操作中调用了外部 php 文件。XDebug因此无法连接到服务器，卡在“等待连接”。我将索引文件的扩展名更改为 php。现在一切正常。但是我不知道这是否有意义。php 代码确实从 htm 文件中调用并运行。为什么我必须将索引文件的扩展名更改为php才能调试外部代码？我错过了配置中的某些内容吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T23:27:04.320

我没有尝试过你的场景，但我怀疑问题是表单没有传输调试器触发参数。将以下隐藏字段添加到您的表单中，并查看它是否在提交时触发调试器：

```
<input type="hidden" name="XDEBUG_SESSION_START" value="netbeans-xdebug" /> 
```

有了这个，HTML 页面就不需要具有 .php 扩展名。

# command-line - 无法在 Sublime 2 中创建新的构建环境

> ID：15053675
> 
> 赞同：1
> 
> 时间：2013-02-24T16:12:40.563
> 
> 标签：command-line, build, path, sublimetext2

使用 Sublime Test 2 中的 Command-B 对我有用，但它不使用最新版本的 Ruby。我正在努力解决这个问题。

复制步骤：1）转到工具|构建系统|新的构建系统2）粘贴以下代码：

```
{
    "cmd": ["~/.rvm/bin/rvm-auto-ruby", "$file"],
    "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
    "selector": "source.ruby"
} 
```

现在，当我按下 Command-B 时，我得到以下信息（注意每个命令前面的 'u'）：

```
[Errno 2] No such file or directory
[cmd:  [u'~/.rvm/bin/rvm-auto-ruby', u'/Users/$USERNAME$/projects/blog/yadda.rb']]
[dir:  /Users/$USERNAME$/projects/blog]
[path: /usr/bin:/bin:/usr/sbin:/sbin]
[Finished] 
```

注意：这不是对 Sublime 2 构建的其他文章的欺骗。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:09:58.047

尝试改变

```
"cmd": ["~/.rvm/bin/rvm-auto-ruby", "$file"] 
```

和

```
"cmd": ["/Users/your_username/.rvm/bin/rvm-auto-ruby", "$file"] 
```

# ruby-on-rails - Rails 路径助手在 js.coffee.erb 中不起作用

> ID：15053678
> 
> 赞同：7
> 
> 时间：2013-02-24T16:12:57.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, coffeescript, asset-pipeline

在我的 Rails 3.2 应用程序（Ruby 1.9）中，在 Coffeescript 中使用路径助手时出现以下错误。

```
undefined local variable or method `new_user_session_path' 
```

在我的部分 _usermenu.html.haml 工作正常：

```
= link_to t('user.login'), new_user_session_path 
```

在我的 app/assets/javascripts/metamenu.js.coffee.erb 中抛出上述错误：

```
$.get("<%= new_user_session_path %>") 
```

不能在coffeescript erb 中使用x_path 和x_url 助手吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-24T19:52:03.250

这是因为您不在资产内的视图上下文中。向文件添加 erb 扩展名不会改变这一点，它只是允许您评估嵌入式 ruby​​。

如果这是一次性场景，最好的办法是简单地使用字符串本身。

```
$.get("/sign_in") 
```

如果你真的想要，你可以创建一个输出脚本标签的部分，将你的帮助方法输出到 js 变量中并以这种方式访问​​它们。

```
# in your layout

<%= render 'url_helpers' %>

# in app/views/layouts/_url_helpers.html.erb

<script>
  window.new_user_session_path = "<%= new_user_session_path %>";
  # add more if necessary
</script>

# in your coffeescript

$.get(@new_user_session_path) 
```

还值得记住的是，这显然不会适用于您将模型实例传递给 url 助手的成员路由，因为这绝对不适用于咖啡脚本。请记住，在生产中资产是预编译的，因此您不能使用任何动态的东西。为此，您只能真正依靠在控制器中设置操作来响应 JS 调用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-02T16:42:07.167

旧帖子，但仍可从 Google 访问。

在 rails 4（当然至少也有 3 个）中，您可以使用路由助手轻松插入您的 js 文件：

*资产/javascript/my_file.js.coffee.erb*

```
<% self.class.include Rails.application.routes.url_helpers %>
window.index_route = '<%= index_path %>' 
```

# python - Python代码不一致

> ID：15053679
> 
> 赞同：0
> 
> 时间：2013-02-24T16:13:12.330
> 
> 标签：python, tuples

我有以下代码，这是 Sublime Editor 的插件：

```
old_viewport_position = self.view.viewport_position()
x = old_viewport_position[0]
y = old_viewport_position[1]
// smth happens
self.view.set_viewport_position((x,y))
// or self.view.set_viewport_position(old_viewport_position) 
print(old_viewport_position) //(0.0, 2759.0)
print(x) //0.0
print(y) //2759.0 
```

结果不是必须使用这个`x`，`y`。

但是，如果我对此值进行硬编码，例如：

```
self.view.set_viewport_position((0.0, 1339)) 
```

那么结果就是预期的。在第一种情况下，似乎根本没有这条线`set_viewport_position`。仍然`print`表明这些值是有效的。我的问题是，这个元组或函数在同一代码中采用这个元组，运行时的值不起作用，但硬编码的值起作用。

# php - PHP GD 和透明度 alpha

> ID：15053682
> 
> 赞同：0
> 
> 时间：2013-02-24T16:13:34.027
> 
> 标签：php, function, resize

我使用我创建的这个函数来调整大小等图片

```
<?php function
> resizer($ruta_img_ini,$ruta_img_save,$name_img,$name_end,$w,$h,$quality,$redimensaionar)
> { list($w_orig, $h_orig) =
> getimagesize("".$ruta_img_ini."".$name_img."");
> 
> if ($redimensaionar=="si") {
> 
> $scale_ratio = $w_orig / $h_orig; if (($w / $h) > $scale_ratio) { $w =
> $h * $scale_ratio; } else { $h = $w / $scale_ratio; } } $img = "";
> 
> $exp_ext=explode(".",$name_img);
> 
> $ext = strtolower($exp_ext[1]);
> 
> $target="".$ruta_img_ini."".$name_img."";
> 
> if ($ext == "gif"){  $img = imagecreatefromgif($target); } else
> if($ext =="png"){  $img = imagecreatefrompng($target);
> 
> 
> imagealphablending($img, false); imagesavealpha($img,true);
> $transparent = imagecolorallocatealpha($img, 255,255,255, 127);
> imagefilledrectangle($img, 0, 0, $w, $h, $transparent); 
> imagefilledrectangle($img, 2, 2, $w-4, $h-4, $transparent);
> 
> 
> } else {  $img = imagecreatefromjpeg($target); } $tci =
> imagecreatetruecolor($w, $h); // imagecopyresampled(dst_img, src_img,
> dst_x, dst_y, src_x, src_y, dst_w, dst_h, src_w, src_h)
> imagecopyresampled($tci, $img, 0, 0, 0, 0, $w, $h, $w_orig, $h_orig);
> imagejpeg($tci, "".$ruta_img_save."".$name_end.".".$ext."", $quality);
> } ?> 
```

问题：PNG 透明度和用于透明度的通道 alpha。上传图片，一切都很完美，但是上传后，图片很黑，我不知道发生了什么。不尊重带有 alpha 通道的 png 的透明度

# .htaccess - 为什么这个 URL 重写不起作用？

> ID：15053684
> 
> 赞同：0
> 
> 时间：2013-02-24T16:13:59.013
> 
> 标签：.htaccess

这是我域上的一个页面：www.mydomain.com/en/stats.php

我希望它看起来像这样：www.mydomain.com/en/statistics/players

这很容易完成，但由于某种原因，下面的 htaccess 代码不起作用。

```
Options +FollowSymLinks

RewriteEngine On
RewriteRule ^/statistics/players stats.php [R=301,L,QSA] 
```

当我尝试打开对 SEO 友好的版本时出现 404 错误。当我使用常规 URL 时，该页面可以正常打开。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:16:10.203

我认为它需要是：

```
RewriteEngine On
RewriteRule ^en/statistics/players en/stats.php [QSA] 
```

这`R=301`意味着它将执行重定向而不是重写，并尝试重定向到我猜不存在的 /stats.php。

该`L`标志意味着这是将为此请求处理的最后一个重写规则，在这种情况下，我怀疑这是您想要的。如果 /en/stats.php 有重写规则，它们将不会被处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:59:48.037

URL 可能没有前导斜杠。尝试不带或可选的斜线。`en`此外，当您在开始时锚定您的模式时，您必须检查前导

```
RewriteRule ^/?en/statistics/players /en/stats.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:09:05.457

最终起作用的是：

```
RewriteRule en/statistics/players en/stats.php [NC,L] 
```

# python - Networkx：在可视化 MultiGraph 时重叠边

> ID：15053686
> 
> 赞同：15
> 
> 时间：2013-02-24T16:14:14.193
> 
> 标签：python, python-2.7, matplotlib, graphviz, networkx

以下多重图正确绘制（即平行边不重叠）使用graphvizneato生成png（如[this answer](https://stackoverflow.com/questions/14943439/how-to-draw-multigraph-in-networkx-using-matplotlib-or-graphviz)所示）

```
import networkx as nx
nx.MultiGraph ([(1,2),(1,2),(1,2),(3,1),(3,2)])
nx.write_dot(Gm,'multi.dot')
!neato -T png multi.dot > multi.png 
```

但是使用 Networkx 的绘图功能并不能解决问题

```
nx.draw_graphviz(Gm,prog='neato') 
```

是否可以使用 Networkx 的绘制方法来防止重叠边缘？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T14:21:51.507

不幸的是没有。这在技术上是可行的，但到目前为止还没有人编写代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-10T09:59:48.707

您可以使用已计算的节点位置直接使用 matplotlib。

```
G=nx.MultiGraph ([(1,2),(1,2),(1,2),(3,1),(3,2)])
pos = nx.random_layout(G)
nx.draw_networkx_nodes(G, pos, node_color = 'r', node_size = 100, alpha = 1)
ax = plt.gca()
for e in G.edges:
    ax.annotate("",
                xy=pos[e[0]], xycoords='data',
                xytext=pos[e[1]], textcoords='data',
                arrowprops=dict(arrowstyle="->", color="0.5",
                                shrinkA=5, shrinkB=5,
                                patchA=None, patchB=None,
                                connectionstyle="arc3,rad=rrr".replace('rrr',str(0.3*e[2])
                                ),
                                ),
                )
plt.axis('off')
plt.show() 
```

[![在此处输入图像描述](../Images/c10499d9c593c7c7200216fd03507982.png)](https://i.stack.imgur.com/8mgDW.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-07T03:25:45.893

好吧，我知道它可能不是您要找的东西，但是我遇到了类似的问题，我想要一个有向图，其中两个节点之间的边根据方向具有不同的权重（无论是进入还是退出节点），我所做的工作是我为每个边缘使用了不同的颜色，并降低了其中一个边缘的不透明度，因此即使它们重叠也会显示出来。我只需要两个节点之间的两条边，所以它对我有用。

```
G = nx.DiGraph()
G.add_nodes_from([0,1])
pos = nx.circular_layout(G)
nx.draw_networkx_nodes(G, pos, node_color = 'r', node_size = 100, alpha = 1)
nx.draw_networkx_edges(G, pos, edgelist = [(0,1)], width = 2, alpha = 0.5, edge_color='b')
nx.draw_networkx_edges(G, pos, edgelist= [(1,0)], width = 1, alpha = 1)
plt.axis('off')
plt.show() 
```

[![在此处输入图像描述](../Images/b1288ac67ad4ca1d73b2a3151e4b993e.png)](https://i.stack.imgur.com/ujXkm.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-26T10:18:49.280

对上述答案的改进是将[connectionstyle](https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.patches.ConnectionStyle.html)参数添加到 nx.draw：

```
import networkx as nx
G = nx.DiGraph()
G.add_nodes_from([0,1])
pos = nx.circular_layout(G)
nx.draw_networkx_nodes(G, pos, connectionstyle='arc3, rad = 0.1', node_color = 'r', node_size = 100, alpha = 1)
nx.draw_networkx_edges(G, pos,connectionstyle='arc3, rad = 0.1', edgelist = [(0,1)], width = 2, alpha = 0.5, edge_color='b')
nx.draw_networkx_edges(G, pos,connectionstyle='arc3, rad = 0.1', edgelist= [(1,0)], width = 1, alpha = 1)
plt.axis('off')
plt.show() 
```

![在这里查看结果](../Images/28d8f12cfd496794e8c1362444c706e7.png)

# javascript - 为什么拆分 ajax 数据在控制台中有效，但在页面中无效？

> ID：15053688
> 
> 赞同：2
> 
> 时间：2013-02-24T16:14:39.800
> 
> 标签：javascript, ajax

我正在使用 ajax 加载内容并希望通过自定义标签进行拆分，

它在页面中不起作用，但在控制台中起作用

这是功能

```
for(var i = 0 ; i < propsPDF.length; i++){

    divProp = crearContenedorProp(i);
    $("#contenedorPDF").append(divProp);

    $.ajax({
      type: 'POST',
      url: "inc/tem.asp",
      data: {tipo: propsPDF[i][0], codigo: propsPDF[i][1], suc: propsPDF[i][2]},
      success: function(data) {

                var partes = data.split("<pagebreak />");
                alert(partes.length);

            },
      contentType: "application/x-www-form-urlencoded;charset=ISO-8859-15",
      dataType: 'html'

    });
} 
```

加载的 html 是一个普通的 HTML 页面，带有一个自定义标签，用于在 mPDF 中指定分页符 用于将 html 转换为 pdf 的 PHP 库

# mysql - Mysql 只返回两个表之间存在差异的记录

> ID：15053689
> 
> 赞同：1
> 
> 时间：2013-02-24T16:14:40.107
> 
> 标签：mysql, sql

这是此处较早[问题的扩展](https://stackoverflow.com/questions/15051242/mysql-find-differences-in-stock-levels-between-two-tables-and-return-the-result)

我有两张桌子，昨天和今天，每张桌子都有两列

```
StockNumber, StockLevel 
```

我怎么知道

1.  只有 StockNumber 的 StockLevel 有差异
2.  返回受影响的 StockNumber 和 StockLevel 值

例如：

今天的表：

```
StockNumber, StockLevel
ABC, 10
CBA,5
123,5 
```

昨天的表：

```
StockNumber, StockLevel
ABC, 9
CBA,5
123,10 
```

要返回以下 wi

```
StockNumber, StockLevel
ABC, 10
123, 5 
```

现在注意到 StockNumber "ABC" 返回今天的值 10， StockNumber "123" 也返回今天的值 5， StockNumber "CBA" 没有变化，也没有返回。

非常感谢，

马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T16:23:17.727

这将适用于两天都存在的股票；

```
SELECT t.StockNumber, t.StockLevel
FROM today t
JOIN yesterday y
  ON t.StockNumber=y.StockNumber
 AND t.StockLevel <> y.StockLevel 
```

如果您（如您之前的问题）还希望包括今天的新股票；

```
SELECT t.StockNumber, t.StockLevel
FROM today t
LEFT JOIN yesterday y
  ON t.StockNumber = y.StockNumber
WHERE y.StockNumber IS NULL 
   OR t.StockLevel <> y.StockLevel 
```

[一个用于测试两者的 SQLfiddle](http://sqlfiddle.com/#!2/93488/8)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:18:36.150

您可以加入 StockNumber 上的表并选择这些行`WHERE NOT A.StockLevel = B.StockLevel`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T16:22:06.460

这有点棘手，因为您可能在两个表中有不同的项目。为此，我建议使用 union all 和 group by：

```
select stockNumer,
       max(case when which = 'yesterday' then stocklevel end) as yesterdaylevel,
       max(case when which = 'today' then stocklevel end) as todaylevel
from ((select StockNumber, StockLevel, 'yesterday' as which
       from yesterday
      ) union all
      (select StockNumber, StockLevel, 'today' as which
       from today
      )
     ) t
group by stockNumber
having min(StockLevel) <> max(stockLevel) and count(*) = 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T16:27:43.347

```
select T.StockNumber, T.StockLevel 
from Today as T 
left join Yesterday as Y 
on T.StockNumber = Y.StockNumber 
WHERE T.StockLevel <> Y.StockLevel 
```

在这里玩结果：[http ://sqlfiddle.com/#!2/367b0/3/0](http://sqlfiddle.com/#!2/367b0/3/0)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T16:41:07.187

以下查询将返回`StockLevel`与昨天不同 (by ) 或昨天不存在的股票（这是什么`LEFT`和`IS NULL`适用于）：

```
SELECT Today.*
FROM Today LEFT JOIN Yesterday
    ON Today.StockNumber = Yesterday.StockNumber
WHERE
    Today.StockLevel <> Yesterday.StockLevel
    OR Yesterday.StockLevel IS NULL 
```

# sql-server-2008-r2 - 删除 SQL Server 中的重复记录

> ID：15053693
> 
> 赞同：17
> 
> 时间：2013-02-24T16:15:20.840
> 
> 标签：sql-server-2008-r2, duplicates

我写了一个查询来从表中删除重复记录

```
;WITH a as
(
SELECT Firstname,ROW_NUMBER() OVER(PARTITION by Firstname, empID ORDER BY Firstname) 
AS duplicateRecCount
FROM dbo.tblEmployee
)
--Now Delete Duplicate Records
DELETE FROM tblEmployee
WHERE duplicateRecCount > 1 
```

但我不知道我哪里出错了

> 列名无效`duplicateRecCount`

有人能帮我吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-24T16:48:34.897

您需要在删除语句中引用 CTE...

```
WITH a as
(
SELECT Firstname,ROW_NUMBER() OVER(PARTITION by Firstname, empID ORDER BY Firstname) 
AS duplicateRecCount
FROM dbo.tblEmployee
)
--Now Delete Duplicate Records
DELETE FROM a
WHERE duplicateRecCount > 1 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-14T10:28:46.620

```
 DELETE duplicates FROM
(SELECT ROW_NUMBER() OVER (PARTITION BY firstname, lastname, EMPNO, salary,dept  ORDER BY empno) cnt
 FROM tblEmp)  duplicates
WHERE duplicates.Cnt > 1 
```

# r - R中的rowvar导入错误

> ID：15053700
> 
> 赞同：4
> 
> 时间：2013-02-24T16:15:42.650
> 
> 标签：r, csv, import

我正在尝试使用以下命令将 .csv 文件导入 R：

```
mydata <- read.table("c:/data.csv", header=TRUE, sep=",", row.names="id") 
```

但不断得到：

```
Error in data[[rowvar]] : attempt to select less than one element 
```

.csv 文件如下所示：

```
Title1,Title2,Title3
1,2,3
4,5,6
7,8,9 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-05T22:14:14.267

mydata <- read.csv("c:/mydata.csv")

请改用 read.csv 函数。它会根据第一行中的值自动填充列标题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T16:19:23.840

row.names 参数应该是一个具有行数长度的向量。现在简单地省略这个论点可能会解决这个问题。该文档清楚地表明 row.names 是一个向量，尽管提出更多信息的异常会很好。

# ruby-on-rails - 运行从 GitHub 下载的 Rails 应用程序 (database.yml)

> ID：15053706
> 
> 赞同：1
> 
> 时间：2013-02-24T16:16:14.650
> 
> 标签：ruby-on-rails, postgresql, github

我是 Rails 的新手，所以请原谅这个问题，但我一直在到处寻找如何做到这一点。我有一个我克隆的 github 项目，我最终将不得不处理它，但现在需要在浏览器中查看它（将在接下来的几个月中加速运行）。我已经下载了目录并运行了捆绑安装。现在我正在尝试启动 rails 服务器，我得到了这个：

```
 Chriss-MacBook-Pro:chris cgood$ rails server
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.11/lib/rails/railtie/configuration.rb:85:in `method_missing': undefined method `active_record' for #<Rails::Application::Configuration:0x007fc07b649c48> (NoMethodError)
    from /Users/cgood/event/chris/config/application.rb:69:in `<class:Application>'
    from /Users/cgood/event/chris/config/application.rb:25:in `<module:ChrisGood>'
    from /Users/cgood/event/chris/config/application.rb:24:in `<top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.11/lib/rails/commands.rb:53:in `require'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.11/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

任何帮助将非常感激！我一直在拉头发几个小时来处理错误消息后的错误消息。这个让我很难在互联网上找到任何关于它的东西。

我安装了 xcode、rails 安装程序、自制软件和 postgreSQL。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:20:43.877

2件事：

1.  升级铁轨！！有一篇关于使用 3.2.11 的危险的[帖子](http://weblog.rubyonrails.org/2013/2/11/SEC-ANN-Rails-3-2-12-3-1-11-and-2-3-17-have-been-released/)
2.  你的应用需要一个名为 database.yml 的文件，阅读[这个](https://stackoverflow.com/questions/7689097/ruby-on-rails-how-can-i-edit-database-yml-for-postgresql)和[这个](http://guides.rubyonrails.org/getting_started.html#configuring-a-database)以找出要放入其中的内容

通常，您的应用程序中已经包含该文件，但由于它通常包含敏感数据，例如数据库用户密码，因此人们倾向于将其排除在他们的 github 存储库之外。所以你只需要自己做一个。

# haskell - Repa 是否指定其数据的内存布局？

> ID：15053707
> 
> 赞同：2
> 
> 时间：2013-02-24T16:16:16.697
> 
> 标签：haskell, repa, memory-layout

我看不到 Repa 在其任何“清单表示”中为数据指定内存布局。这是在某处指定的吗？

当然我可以通过实验来了解，但我更想知道布局是官方的还是随时可能改变的。

**编辑：**澄清一下，我了解 a`Storable` `Vector`的布局方式，但我想知道`Array U DIM2 Double`（例如）是行优先、列优先还是某些疯狂的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T16:49:23.080

[数据的内存布局由未装箱向量](http://hackage.haskell.org/packages/archive/repa/latest/doc/html/Data-Array-Repa-Repr-Unboxed.html)的类型类实例定义：

> 该实现使用基于类型族的@Data.Vector.Unboxed@，并为每种元素类型选择一种有效的、专门的表示。特别地，成对的未装箱向量被表示为成对的未装箱向量。

要查看向量的布局规范，请检查[向量包中定义的未](http://hackage.haskell.org/packages/archive/vector/latest/doc/html/src/Data-Vector-Unboxed-Base.html#Vector)装箱向量的实例，其中例如 Bool 用字节表示：

```
newtype instance MVector s Bool = MV_Bool (P.MVector s Word8) 
```

而如果我们深入研究原始数组包，您会看到[原始类型的对齐和大小约束](http://hackage.haskell.org/packages/archive/primitive/latest/doc/html/src/Data-Primitive-Types.html#Prim)。根据 Repa 1，清单（分配）数组填充在[row major](http://hackage.haskell.org/packages/archive/repa/1.0.0.0/doc/html/Data-Array-Repa.html#1)中。最新版本的文档也支持这一点。

> 我还必须对数据做一些 FFI，所以要直接布局

由于您必须与 C 代码（或其他代码）进行互操作，因此使用[Storable](http://hackage.haskell.org/packages/archive/vector/0.10.0.1/doc/html/Data-Vector-Storable.html)实例至关重要。这些将保证您的类型可以轻松地转移到 C 中（使用 C 布局约定，通过[ForeignPtr 接口到 Repa](http://hackage.haskell.org/packages/archive/repa/latest/doc/html/Data-Array-Repa-Repr-ForeignPtr.html)，这确保您安全地将指向 C 形外部数据的指针映射到 Repa 和从 Repa。

# c++ - 嵌套类变量调用

> ID：15053708
> 
> 赞同：0
> 
> 时间：2013-02-24T16:16:18.877
> 
> 标签：c++, class, nested

我想从这个出发： ![在此处输入图像描述](../Images/e8c630592f5a36f7366c0f7fe0874d18.png)

对此： ![在此处输入图像描述](../Images/00a260ff47be244f51fda462112fd133.png)

我该怎么做？子类 square 和 rectangle 的函数如何知道使用父类 shape 的变量？

我将如何设置主要的长度和宽度？

```
#include <iostream>
#include <cmath>
using namespace std;

class SHAPES
{
      public:
      class SQUARE
      {
            int perimeter(int length, int width)
            {
                return 4*length;
            }
            int area(int length, int width)
            {
                return length*length;
            }
      };
      public:
      class RECTANGLE
      {
            int perimeter(int length, int width)
            {
                return 2*length + 2*width;
            }
            int area(int length, int width)
            {
            return length*width;
            }
      };

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:20:33.623

这些不是*子类*（即派生类），而是*嵌套*类（如您的问题标题所述）。

如果我要告诉您如何使这些变量在嵌套类中可见，我认为我不会回答您的*真正问题。*根据我从您的类名称中可以理解的内容，您应该使用继承来建模它们之间的 IS-A 关系：

```
class SHAPE
{
public: // <-- To make the class constructor visible
    SHAPE(int l, int w) : length(l), width(w) { } // <-- Class constructor
    ...
protected: // <-- To make sure these variables are visible to subclasses
    int length;
    int width;
};

class SQUARE : public SHAPE // <-- To declare public inheritance
{
public:
    SQUARE(int l) : SHAPE(l, l) { } // <-- Forward arguments to base constructor
    int perimeter() const // <-- I would also add the const qualifier
    {
        return 4 * length;
    }
    ...
};

class RECTANGLE : public SHAPE
{
    // Similarly here...
};

int main()
{
    SQUARE s(5);
    cout << s.perimeter();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T16:24:01.337

我推荐其他（更好的？！）格式：

```
class Shape
{
protected:
    int length,width;
public: 
    Shape(int l, int w): length(l), width(w){}
    int primeter() const
    {
        return (length + width) * 2;
    }
    int area() const
    {
        return length * width;
    }
};

class Rectangle : public Shape
{
public
    Rectangle(int l, int w) : Shape(l,w){}
};

class Square : public Shape
{
public:
    Square(int l): Shape(l,l){}
};

int main()
{
    Rectangle r(5,4);
    Square s(6);

    r.area();
    s.area();
} 
```

或者使用[带有虚函数的接口](http://www.java2s.com/Tutorial/Cpp/0180__Class/Usevirtualfunctiontocalculateareafordifferentshapes.htm)。

# yii - 知道解释 phpunit 测试

> ID：15053712
> 
> 赞同：0
> 
> 时间：2013-02-24T16:17:23.157
> 
> 标签：yii, tdd, phpunit, database-connection, fixtures

我正在尝试配置灯具，phpunit 系统返回下一条消息'.E'，但我不知道如何解释它：

> C:\kyopol\Apache 2.22.22\htdocs\demo\protected\tests> **phpunit unit/EntityTest.php**
> 
> 塞巴斯蒂安伯格曼的 PHPUnit 3.7.14。
> 
> 从 C:\kyopol\Apache 2.22.22\htdocs\demo\protected\tests\phpunit.xml 读取的配置
> 
> **.E**
> 
> 时间：2 秒，内存：6.50Mb
> 
> 有 1 个错误：
> 
> 1) EntityTest::testRead 未定义变量：newEntity
> 
> C:\kyopol\Apache 2.22.22\htdocs\demo\protected\tests\unit\EntityTest.php:37
> 
> 失败！测试：2，断言：3，错误：1。

接下来，类测试EntityTest.php数据代码：

```
class EntityTest extends CDbTestCase
{   
public function testCreate()
{
    //CREATE a new Entity
    $newEntity=new Entity;
    $newEntity->setAttributes(
        array(
                'name' => 'Test Entity 1',
                'description' => 'Test entity number one',
                'type_id' => 1,
                'location_lat' => 77,
                'location_lon' => 77,
                'create_time' => '2013-02-16 20:36:00',
                'create_user_id' => 1,
                'update_time' => '0000-00-00 00:00:00',
                'update_user_id' => 0,
            )
    );
    $this->assertTrue($newEntity->save(false));

    //READ a Entity
    $retrievedEntity=Entity::model()->findByPk($newEntity->id);
    $this->assertTrue($retrievedEntity instanceof Entity);
    $this->assertEquals('Test Entity 1',$retrievedEntity->name);
}

public function testRead()
    {
        //READ a Entity
        $retrievedEntity=Entity::model()->findByPk($newEntity->id);
        $this->assertTrue($retrievedEntity instanceof Entity);
        $this->assertEquals('Test Entity 1',$retrievedEntity->name);
    }
} 
```

大写字母“E”和前一点“。”是什么意思？?

一般来说：没有人能说我怎么知道在 phpunit 中解释输出消息吗？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:55:08.317

您的一项测试失败了，这就是您看到**E**的原因。另一个正在通过，由 表示**。**. 如果测试中有任何错误消息，它们将在最后进行总结。

测试失败的错误消息是“未定义变量：newEntity”。

你的第一行`testRead()`是：

```
$retrievedEntity=Entity::model()->findByPk($newEntity->id); 
```

但是您从未`$newEntity`在该测试中进行设置。

# c# - SqlException：关键字“AND”附近的语法不正确

> ID：15053715
> 
> 赞同：3
> 
> 时间：2013-02-24T16:17:28.787
> 
> 标签：c#, sql-server

我正在使用 C# 和 SQL Server 2008 制作一个管理程序。我想一次使用 Blood Group、District 和 Club Name 搜索记录。这就是产生问题的原因：

```
 SqlDataAdapter sda = new SqlDataAdapter("SELECT * FROM Table2 
    WHERE @Blood_Group =" + tsblood.Text + "AND @District =" + tsdist.Text + 
    "AND  Club_Name =" + tscname.Text, Mycon1); 
```

谁能告诉我正确的语法是什么？提前Tnx。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T16:20:28.130

正确的语法是使用参数化查询，并且在构建 SQL 查询时绝对不要使用字符串连接：

```
string query = "SELECT * FROM Table2 WHERE BloodGroup = @BloodGroup AND District = @District AND Club_Name = @ClubName";
using (SqlDataAdapter sda = new SqlDataAdapter(query, Mycon1))
{
    sda.SelectCommand.Parameters.AddWithValue("@BloodGroup", tsblood.Text);
    sda.SelectCommand.Parameters.AddWithValue("@District", tsdist.Text);
    sda.SelectCommand.Parameters.AddWithValue("@ClubName", tscname.Text);
    ...
} 
```

这样，您的参数将被正确编码，并且您的代码不易受到 SQL 注入攻击。结帐[`bobby tables`](http://bobby-tables.com/)。

另请注意，我如何将 IDisposable 资源（例如 SqlDataAdapter）包装到 using 语句中，以确保即使在出现异常的情况下也能正确处理它，并且您的程序不会泄漏非托管句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:01:22.333

您忘记了一个`AND`（并且可能`@`在前面有一个`Club_Name`？）：

```
String CRLF = "\r\n";

String sql = String.Format(
      "SELECT * FROM Table2" + CRLF+
      "WHERE @Blood_Group = {0}" + CRLF+
      "AND @District = {1} " + CRLF+
      "AND Club_Name = {2}", 
      SqlUtils.QuotedStr(tsblood.Text), 
      SqlUtils.QuotedStr(tsdist.Text),
      SqlUtils.QuotedStr(tscname.Text));

SqlDataAdapter sda = new SqlDataAdapter(sql, Mycon1); 
```

# ios - 寻找适用于 iOS 的蓝牙 API 文档

> ID：15053718
> 
> 赞同：0
> 
> 时间：2013-02-24T16:17:37.977
> 
> 标签：ios, api, bluetooth

谷歌有一个[很好的关于 BT 的文档，](http://developer.android.com/guide/topics/connectivity/bluetooth.html)但苹果 iOS 的等价物在哪里？我可以导入`#import <CoreBluetooth/CoreBluetooth.h>`，但这在[我找到的唯一文档](https://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html)中没有提到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:52:37.833

`CoreBluetooth framework`仅适用于低功耗蓝牙。
对于经典蓝牙，它是`ExternalAccessory framework`.
低功耗蓝牙和*经典*蓝牙确实不同。您可以在 StackOverFlow 上获取更多信息，以查找标签*Core-Bluetooth*，因为它经常重复或通过谷歌搜索。Apple 提供了一些示例代码。即使 CoreBluetooth.framework 自 iOS 6.0 以来的新闻更改没有得到很好的评论（您必须阅读头文件），其他部分也有很好的文档记录。
顺便说一句，谷歌没有记录其蓝牙低功耗框架，因为它不正式支持它（摩托罗拉自己制造，并且有一个来自 tierce 开发人员的项目）。

# html - 删除图像之间的空间

> ID：15053720
> 
> 赞同：1
> 
> 时间：2013-02-24T16:17:49.573
> 
> 标签：html, css

[我在这个小提琴](http://jsfiddle.net/ynmbR/)中有四个图像：

```
<img src='http://black-agency.com/dat/Images/BG/dark.jpg'/>
<img src='http://black-agency.com/dat/Images/BG/dark.jpg'/>
<br>    
<img src='http://black-agency.com/dat/Images/BG/dark.jpg'/>
<img src='http://black-agency.com/dat/Images/BG/dark.jpg'/> 
```

我已经删除了填充和边距，但图片之间仍然存在空间。

我怎样才能让图片直接相邻，没有空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T16:19:13.530

您可以使用以下命令删除空格`Del`：

```
<img src='http://black-agency.com/dat/Images/BG/dark.jpg'/><img src='http://black-agency.com/dat/Images/BG/dark.jpg'/><br><img src='http://black-agency.com/dat/Images/BG/dark.jpg'/><img src='http://black-agency.com/dat/Images/BG/dark.jpg'/> 
```

浏览器将换行符解释为空格，因此如果您不想在其中有一个空格，则应将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:09:04.187

您可以乱用浮动而不是依赖`inline-block`默认样式，尽管在这种情况下它可能会非常复杂。

您可以将父级的字体大小设置为空。[看到这个小提琴](http://jsfiddle.net/vGy84/)。

您可以设置负边距。[看到这个小提琴](http://jsfiddle.net/2JsPg/)。

或者最后，您可以删除`img`标记中标签之间的空格，但是，这会使标记看起来很混乱。

由您决定在您的特定情况下哪种方法最好。请注意，如果这些图像不仅仅是占位符，那么背景图像更适合 CSS`background-image`属性和速记属性。`background`

# ruby-on-rails - 如何选择 minimummonths 值？

> ID：15053721
> 
> 赞同：0
> 
> 时间：2013-02-24T16:18:02.147
> 
> 标签：ruby-on-rails, ruby

在 SQL 中，我会这样做：

```
SELECT minimummonths WHERE name = "gold" 
```

我想在 Ruby on Rails 中做同样的事情，并在我的订单控制器的新部分中包含以下内容：

```
@plan = params[:plan]

@Payplanrow = Payplan.where(:name => @plan).minimummonths 
```

然后我尝试`@payplanrow`在我的页面中显示，`<%=@Payplanrow %>`但它不起作用。我得到错误：

```
undefined method `minimummonths' for #<ActiveRecord::Relation:0x007fe30f870ec0> 
```

我想打印`minimummonths`所选计划的值。永远只有一行数据对应于该`@plan`值。

我对 Ruby on Rails 还很陌生，所以我只是想找到一个正确方向的指针。我到处找，但似乎没有这样的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:37:46.907

问题是`Payplan.where(:name => @plan)`返回一个对象数组`Payplan`。假设您使用的是 Rails 3，您可以在“ [Active Record Query Interface](http://guides.rubyonrails.org/active_record_querying.html) ”中阅读更多相关信息。

但是，如果您确定您的查询只返回一条记录，您可以这样做：

```
@Payplanrow = Payplan.where(:name => @plan).first.try(:minimummonths) 
```

Rails 的方式是在你的模型中有一个范围：

```
class Payplan < ActiveRecord::Base

  scope :by_name, lambda {|name|
     {:conditions => {:name => name}}
  }

end

#controller 
@Payplanrow = Payplan.by_name(@plan).first.try(:minimummonths) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:43:01.317

您可以使用[`pluck`](http://guides.rubyonrails.org/active_record_querying.html#pluck)仅获`minimummonths`取值：

```
minimummonths = Payplan.where(:name => @plan).pluck(:minimummonths).first 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T16:35:03.683

那应该是：

```
Payplan.where(:name => @plan).first.minimummonths 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T16:23:23.927

尽管它不是真正的最佳选择，但您可以执行以下操作：

```
@Payplanrow = Payplan.where(:name => @plan).first.minimummonths 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T18:04:31.177

与其使用`where then first`，不如`find`在您期待`single record`.

```
 @Payplanrow = Payplan.find_by_name(@plan).try(:minimummonths) 
```

# relational-database - 关系数据库设计

> ID：15053723
> 
> 赞同：0
> 
> 时间：2013-02-24T16:18:17.430
> 
> 标签：relational-database

我试图理解实体、表和外键。我有以下内容：-

AnObject - 我已将其标识为实体类型。

```
ID (Primary Key)    
Description    
State    
DependsOn    
Creator 
```

现在 State 只有两个值`[Alive, Dead]`。然而，它可能在未来有另一个。但是，它只能是其中之一，但可能会在两者之间发生变化。

问题：

> State 应该是它自己的实体类型吗？它是一个实体类型还是一个表？State 是否应该有 AnObject 的外键，反之亦然？例如

状态

```
ID (PK)
Description
AnObject_ID (Foreign Key references AnObject) 
```

问题： AnObject 的 DependsOn 属性可以有多个其他 AnObject 实体类型的值。显然一个字段不能有多个值，但我不确定如何建模？

AnObject 的 Creator 属性也占用了严格数量的值 [Fred, Jim, Dean]。我应该为具有 AnObject ID 外键的 Creator 提供实体类型（表）吗？那么，A Creator 可以创建 0、1、m 个 AnObject，而 AnObject 只能有一个创建者？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:42:59.900

您可以使用来自 AnObject 的外键为枚举值添加额外的表。状态可能最好表示为 varchar not null 类型的单个字段。您可以将表的主键设为 varchar 字段 - 它们不必是 int 类型。

这将限制值，但允许您使用合理的语法来查询事物（即 WHERE state = 'Alive' （尽管在这种情况下，我认为您过早地抽象事物 - 我会保持简单，只是有一个简单的 bool IsDead 列）。

DependsOn 是一种单向属性（您可能不能让 A 依赖于 B 并且 B 也依赖于 A）。这里真正的问题是您打算如何查询这些项目以及它们中有多少。如果您想一次拉出整个依赖链并且链很长，那么您希望避免执行数百个单独的查询来做到这一点。你的用例是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:38:25.507

状态可能只是一个`enum`字段，除非您需要用户能够通过用户界面添加其他状态值，在这种情况下，您可以按照您的建议使用查找表（一对多关系）。我不知道您使用的是什么数据库，但这里有一些关于`enum`MySQL 类型的信息：http: [//dev.mysql.com/doc/refman/5.6/en/enum.html](http://dev.mysql.com/doc/refman/5.6/en/enum.html)。

如果您使用查找表，则 AnObject 应该有一个名为 StateID 的字段，该字段指向 State 表中所需的行。

听起来 DependsOn 是多对多的关系。为此，您将需要一个连接表，例如：

```
Table: Dependencies

Primary key (called a "composite key" because it's made up of more than one field):
    AnObjectParentID
    AnObjectChildID 
```

我假设父子关系需要依赖关系，但如果不是这种情况，您可能希望以不同的方式命名表或字段。

# jquery - 使用 Google Analytics 跟踪 AJAX 请求

> ID：15053726
> 
> 赞同：1
> 
> 时间：2013-02-24T16:18:28.007
> 
> 标签：jquery, ajax, google-analytics

我正在寻找一种使用 Google Analytics 跟踪 AJAX 请求的方法。我找到了很多关于它的文章。但是，他们都提供了类似的解决方案，例如这个[SO Question](https://stackoverflow.com/questions/8539897/using-google-analytics-to-track-ajax-requests)。但这对我不起作用，一个月后谷歌分析没有跟踪任何内容。

更让我感到奇怪的是，这段代码根本什么都不做。不会向 Google 发送任何 Ajax 或任何其他请求。那么它是如何工作的呢？我真的希望至少发送请求或重新加载 iframe。但似乎真的是什么都没做。

首先我这样做：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-X']);
_gaq.push(['_setDomainName', 'domain.com']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

然后在其他地方：

```
$.ajax({
    'url' : 'ajax.php',
    success: function(){
        _gaq.push(["_trackPageview", "/search/"+keyword+"/"]);
    }
}); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T10:51:37.817

该指南帮助我解决了这个问题。
[https://support.google.com/analytics/answer/1012264](https://support.google.com/analytics/answer/1012264)

# c++ - 已经“EOF”ed ifstream 上的 peek() 是否继续返回 EOF？

> ID：15053727
> 
> 赞同：3
> 
> 时间：2013-02-24T16:18:30.620
> 
> 标签：c++

简单代码：

```
std::ifstream file("file.txt");
std::string line;
while(getline(file,line))
  ; //exhaust file

//in this sample code, for simplicity assert that the only possible "fail"
//is EOF (which it will always be under normal circumstances).
assert(!file.fail() || file.eof());

assert(file.peek() == EOF); //does this always hold? 
```

最终断言会始终成功吗？

问题改写：EOF之后的位置是否也返回EOF？

文档没有清楚地提到当流已经在 EOF 时 peek() 做了什么，所以我的问题是。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T16:36:57.530

该标准说`peek`：

> 如果 good() 为假，则返回：traits::eof()。

当流的 eofbit 设置时，`good()`将返回`false`，因此`peek`将返回`traits::eof()`。这将继续发生，除非您执行清除 eofbit 的操作（例如寻找流）。`traits::eof()`如果设置了故障位或坏位，它也会返回。

注意：对于基于默认`char`的流，`traits::eof()`与`EOF`.

# matlab - 在 Matlab odeset() 中使用 NonNegative 设置

> ID：15053732
> 
> 赞同：0
> 
> 时间：2013-02-24T16:18:46.133
> 
> 标签：matlab, ode

我正在尝试在 MatLab 中解决一些 ODE，并看到方程中的变量是需要限制为正的总体。所以我在调用方程求解器之前尝试使用 odeset() 使它们成为非负数，但在绘制这些值之后它们有时实际上是负数（在下面的代码中它是洋红色线）。我究竟做错了什么？

这是一些代码：

```
%Lots of variables
includeJ=1;
cullLIRate=1/2000;
cullDIRate=1/2000;
N = 16800;
beta = 2e-7;
delta = 0.5;
gamma = 1/50;
sigma = 1/400;
mu = 1/365;
maxTime = 30*365;
kappa = N;
gR = 0.05;
mJ = 1/3650;
initJPerAdult = 10;
numInitE = 1000;
TSpan = [0,maxTime];

initState = [N-numInitE,numInitE,0,0,0,initJPerAdult*N];

%IMPORTANT BIT HERE
options = odeset('NonNegative', 1:6)
scirSoln = ode45(@equation,TSpan,initState,[],beta,delta,gamma,sigma,mu,kappa,gR,mJ,cullLIRate,cullDIRate,includeJ);

scirVals = deval(scirSoln,timeToPlot);
plot(timeToPlot,scirVals(1,:));
hold on;
plot(timeToPlot,scirVals(3,:),'k');
plot(timeToPlot,scirVals(4,:),'g');
plot(timeToPlot,scirVals(6,:),'m');

timeToPlot = [0:max(TSpan)/1000:max(TSpan)]; 
```

方程（...）的代码是：

```
function retVal = equation(t,y,beta,delta,gamma,sigma,mu,kappa,gR,mJ,cullLIRate,cullDIRate,includeJ)
retVal = zeros(6,1);

S = y(1);
E = y(2);
LI = y(3);
DI = y(4);
R = y(5);
J = y(6);

retVal(1)= mJ * J - beta * S * (delta * LI + DI);
retVal(2) = beta * S * (delta * LI + DI) - gamma * E;
retVal(3) = gamma * E - (cullLIRate + sigma) * LI;
retVal(4) = sigma * LI - (mu + cullDIRate) * DI;
retVal(5) = mu * DI + cullLIRate* LI + cullDIRate * DI;
retVal(6) = gR * S * (1 - S / kappa) - mJ * J;

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:32:58.780

您没有将定义的 odeset（选项变量）传递给 ODE45 - 求解器。

ODE45 的语法是： [T,Y] = ODE45(ODEFUN,TSPAN,Y0,OPTIONS,P1,P2...)

很高兴它奏效了！:)

# asp.net-mvc - 未收到 JSONP 回调

> ID：15053733
> 
> 赞同：0
> 
> 时间：2013-02-24T16:18:49.387
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-4, jsonp

我正在关注 ASP.NET MVC 和 JSONP 博客文章的示例代码/教程：http: [//blogorama.nerdworks.in/entry-EnablingJSONPcallsonASPNETMVC.aspx](http://blogorama.nerdworks.in/entry-EnablingJSONPcallsonASPNETMVC.aspx)

我已经获取了代码示例并对其进行了修改以供我自己使用。

当我点击页面时，它会触发我的控制器的动作，但`$.getJSON(call, function (rsp)..`根本没有触发。

**控制器动作**

```
[JsonpFilter]
public JsonpResult GetMyObjects(int id)
{
    List<MyObject> list = MyDAO.GetMyObjects(id);

    return new JsonpResult
        {
            Data = list,
            JsonRequestBehavior = JsonRequestBehavior.AllowGet
        };
} 
```

**网页**

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

</head>
    <body>
        <script type="text/javascript">

            var url = "http://localhost/MySite.ContentDelivery/MyController/GetMyObjects/?";

            function getObjects() {
                //
                // build the URL
                //
                debugger;
                var call = url + "id=48&jsoncallback=?";

                //
                // make the ajax call
                //
                $.getJSON(call, function (rsp) {
                    debugger;
                    alert(rsp);
                    if (rsp.stat != "ok") {
                        //
                        // something went wrong!
                        //
                        $("#myDiv").append(
                            "<label style=\"background-color:red;color:white;padding: 25px;\">Whoops!  It didn't work!" +
                            "  This is embarrassing!  Here's what the system had to " +
                            " say about this - " + rsp.message + "</label>");
                    }
                    else {
                        //
                        // build the html
                        //
                        var html = "";
                        $.each(rsp.list.myObject, function () {
                            var obj = this;
                            html += "<span" + obj.Name + "</span> <br />";
                        });

                        //
                        // append this to the div
                        //
                        $("#myDiv").append(html);
                    }
                });
            }

            //
            // get the offers
            //
            $(document).ready(function() {
                alert('go..');
                $(getOobjects);
            });
    </script>
        <div id="myDiv"></div>
    </body>
</html> 
```

**tl；博士**为什么在我触发并执行 MVC 控制器操作时我`getJson()`没有触发。`getObjects()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:29:58.813

代替：

```
var call = url + "id=48&jsoncallback=?"; 
```

和：

```
var call = url + "id=48&callback=?"; 
```

`JsonpResult`您使用的自定义依赖于一个名为`callback`而不是的查询字符串参数`jsoncallback`：

```
Callback = context.HttpContext.Request.QueryString["callback"]; 
```

此外，您还使用`[JsonpFilter]`属性装饰了控制器操作并返回了`JsonpResult`. 如文章中所述，您必须阅读过您应该选择一个：

```
[JsonpFilter]
public ActionResult GetMyObjects(int id)
{
    List<MyObject> list = MyDAO.GetMyObjects(id);

    return Json(list, JsonRequestBehavior.AllowGet);
} 
```

或其他：

```
public ActionResult GetMyObjects(int id)
{
    List<MyObject> list = MyDAO.GetMyObjects(id);

    return new JsonpResult
    {
        Data = list,
        JsonRequestBehavior = JsonRequestBehavior.AllowGet
    };
} 
```

但不要将两者混为一谈。

# hibernate - 在 play 框架中启动并运行 hibernate-spatial

> ID：15053738
> 
> 赞同：1
> 
> 时间：2013-02-24T16:19:33.097
> 
> 标签：hibernate, playframework-2.0, hibernate-spatial

我正在使用 play 2.1 迈出第一步，所以我在 playframework 网站上完成了 JavaTodoList 教程。一切都按预期工作。

接下来，我更改了 todolist 以使用在我的开发箱上运行的 postgresql 数据库。我所要做的就是更改 application.conf 中的一些设置

```
db.default.driver=org.postgresql.Driver
db.default.url="jdbc:postgresql://localhost:5432/todo"
db.default.user=todo
db.default.password=secretpassword 
```

我刷新了页面，进行了数据库演化，一切正常。

现在我想使用 hibernate-spatial 将位置坐标存储到每个 todolist 项目（实际上可以是任何其他基于位置的项目）。

我在 app /lib 目录中添加了一些库，即：

*   hibernate-commons-annotations-4.0.1.Final.jar
*   hibernate-core-4.1.9.Final.jar
*   休眠空间4.0-M1.jar
*   jdbc-stdext-2.0.jar
*   jts-1.12.jar
*   postgis-jdbc-1.5.3.jar
*   postgresql-8.4-701.jdbc4.jar

我在经典 glassfish java 应用程序上使用相同的库来存储空间特征，因此它们可以组合在一起。postgresql 数据库也使用 postgis 在空间上启用，这在之前使用经典的 java 应用程序进行了测试。

我将我的模型类扩展为 todo 任务，如下所示：

```
package models;

import java.util.*;

import play.db.ebean.*;
import play.data.validation.Constraints.*;

import javax.persistence.*;

import com.vividsolutions.jts.geom.Point;
import org.hibernate.annotations.Type;

@Entity
public class Task extends Model {

@Id
public Long id;

@Required
public String label;

@Type(type="org.hibernate.spatial.GeometryType")
@Column(columnDefinition="Point") 
public Point location;

public static Finder<Long,Task> find = new Finder(Long.class, Task.class);

public static List<Task> all() {
    return find.all();
}

public static void create(Task task) {
    task.save();
}

public static void delete(Long id) {
    find.ref(id).delete();  
}
} 
```

我还在我的 conf 文件中添加了 Postgis JPA 方言：

```
jpa.dialect=org.hibernate.spatial.dialect.postgis.PostgisDialect 
```

Play 编译一切正常，有一些错误，当类路径中缺少库时，但我添加了上面列出的一个又一个，直到不再出现错误。然而，没有触发新位置字段的数据库演变。似乎游戏忽略了我的应用程序的所有休眠空间特定部分。它的工作方式与之前的普通 todolist 应用程序相同。

我认为这与不同的hibernate版本有关（是使用hibernate3还是hibernate4播放？我可以升级到4吗？）。已经对此有经验的人可以告诉我他使用的每个库的版本以及必须完成的配置设置吗？

更新：正如克里斯托弗所提到的，我把 ebean 和 jpa 混在一起了。所以我把 jpa-sample 转移到我简单的 todolist 样本上。我更新了 play 项目文件和依赖项，重新连接了模型和控制器以适应 JPA EntityManager，并从类路径中删除了一些库，以便我使用 play 2.1 上的 hibernate 3。我也几乎像在 jpa 示例中一样进行了配置，我的 persistence.xml 和 application.conf 几乎看起来一样，除了我使用 postgres 方言进行休眠。我可以编译我的项目，但是当我启动它时，我得到了

> PersistenceException: [PersistenceUnit: defaultPersistenceUnit] 无法配置 EntityManagerFactory

我将 play 的详细程度配置为调试，所以我发现，在 PropertyBinder 构建我的任务实体的 id 属性后会出现此异常。

想我更进一步，但看不到尽头......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:00:31.667

您似乎将 Ebean 与 JPA 混合在一起——它们是互斥的。

这是一个 JPA 示例：

[https://github.com/playframework/Play20/tree/master/samples/java/computer-database-jpa](https://github.com/playframework/Play20/tree/master/samples/java/computer-database-jpa)

# android - 如何使用 android DownloadManager 下载多个文件，使其出现在一个队列中

> ID：15053740
> 
> 赞同：7
> 
> 时间：2013-02-24T16:19:50.970
> 
> 标签：android, download-manager

我正在使用 DownloadManager 下载文件。我知道如何下载一个文件并使用

```
request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED); 
```

或不。但是我有多个文件在某种意义上“属于”在一起，所以我想为这些文件创建一个“队列”，并以显示“队列”进度的方式显示通知（假设我添加了5 个文件到队列中，所以它会在第一个文件下载后显示 20%，在其中 2 个文件后显示 40%，...）

文件的顺序并不重要，但我希望能够在下载队列的最后一个文件时在 BroadcastReceiver 的 onReceive() 函数中检测到。

到目前为止，我设法做的最接近的事情是不使用 request.setNotificationVisibility，通过匹配 onReceive() 中的 downloadId 来计算下载的文件，并在下载最后一个文件时执行我需要做的事情。

有没有办法让它更“可见”？

# matlab - matlab中的卫星图像

> ID：15053742
> 
> 赞同：1
> 
> 时间：2013-02-24T16:20:20.290
> 
> 标签：matlab, satellite-image

我有一张 BSQ 格式的卫星图像。我最初使用 ENVI 处理它。现在，我正在尝试使用 Matlab 的*multibandread*函数读取图像。

这是与我要加载的图像有关的数据

```
samples = 911

lines   = 3191

bands   = 196

header offset = 0

data type = 2

interleave = bsq

byte order = 0 
```

这是我为加载图像而编写的代码。

```
I = multibandread('QUAC.bsq',[3191,911,196], ...
     'int16','0','bsq','ieee-le',{'Band','Direct',[29,23,16]}); 
```

我收到以下错误：

```
Error using multibandread>parseInputs (line 311)
Unable to open QUAC.bsq for reading.

Error in multibandread (line 112)
info = parseInputs(filename, dims,... 
```

[我在这个网站http://www.ehu.es/ccwintco/uploads/d/dc/LoadHypercubesMatlab.pdf](http://www.ehu.es/ccwintco/uploads/d/dc/LoadHypercubesMatlab.pdf)上查找了 multibandread 函数的格式

*我在 MATLAB 上检查了parseInputs*的代码，但我无法做出任何改变。

我在尝试加载图像时犯了什么错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-22T21:45:59.007

这个问题有点老了，但其他人知道答案可能会有用。

这很可能是一个错误的文件名（'QUAC.bsq'），或者该文件不在当前的 MATLAB 工作目录中。

参数列表中还有另一个错误，使用有效文件名，在 Matlab 2015b 中返回此错误：

```
Error using multibandread>parseInputs (line 337)
Expected input to be one of these types:

double, single, uint8, uint16, uint32, uint64, int8, int16, int32, int64

Instead its type was char.

Error in multibandread (line 111)
info = parseInputs(filename, dims,... 
```

在 multibandread 参数中用 0 替换 '0' 应该可以解决问题，对我有用。正确的语法是：

```
I = multibandread('QUAC.bsq',[3191,911,196], ...
 'int16',0,'bsq','ieee-le',{'Band','Direct',[29,23,16]}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-17T11:25:06.710

去掉文件名中的 .bsq

# c# - Asp.net AjaxFileUpload 更改按钮文本

> ID：15053751
> 
> 赞同：2
> 
> 时间：2013-02-24T16:20:45.587
> 
> 标签：c#, asp.net

我正在使用 ajaxfileupload 但我无法更改控制按钮文本。我需要转换土耳其语。我怎样才能做到这一点？

看那个

![](../Images/823a9199f013815e77c917629ae3f7a8.png)

例如“在此处放置文件”必须是“Dosyaları buraya sürükleyin”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-19T18:17:29.823

```
<script type="text/javascript">

    $(document).ready(function () {
        AjaxFileUpload_change_text();
    });

    function AjaxFileUpload_change_text() {

        document.getElementsByClassName('ajax__fileupload_selectFileButton')[0].innerHTML = "Abrir";
        document.getElementsByClassName('ajax__fileupload_dropzone')[0].innerHTML = "Arrastre archivo aquí";
        document.getElementsByClassName('ajax__fileupload_uploadbutton')[0].innerHTML = "Subir";
        document.getElementById("ctl00_MainContent_AjaxFileUpload1_FileStatusContainer").innerHTML = "Seleccione archivo(s) a subir.";

        Sys.Extended.UI.Resources.AjaxFileUpload_Pending = "Pendiente";
        Sys.Extended.UI.Resources.AjaxFileUpload_Pending = "Pendiente";
        Sys.Extended.UI.Resources.AjaxFileUpload_Remove = "Quitar";
        Sys.Extended.UI.Resources.AjaxFileUpload_Upload = "Subir";
        Sys.Extended.UI.Resources.AjaxFileUpload_Uploaded = "Subido";
        Sys.Extended.UI.Resources.AjaxFileUpload_UploadedPercentage = "{0} %";
        Sys.Extended.UI.Resources.AjaxFileUpload_Uploading = "Subiendo";
        Sys.Extended.UI.Resources.AjaxFileUpload_FileInQueue = "{0} archivos(s) en espera.";
        Sys.Extended.UI.Resources.AjaxFileUpload_AllFilesUploaded = "Completado.";
        Sys.Extended.UI.Resources.AjaxFileUpload_FileList = "Archivos subidos:";
        Sys.Extended.UI.Resources.AjaxFileUpload_Cancelling = "Cancelando...";
        Sys.Extended.UI.Resources.AjaxFileUpload_UploadError = "error";
        Sys.Extended.UI.Resources.AjaxFileUpload_CancellingUpload = "Cancelando...";
        Sys.Extended.UI.Resources.AjaxFileUpload_UploadingInputFile = "Subiendo: {0}.";
        Sys.Extended.UI.Resources.AjaxFileUpload_Cancel = "Cancelar";
        Sys.Extended.UI.Resources.AjaxFileUpload_Canceled = "cancelado";
        Sys.Extended.UI.Resources.AjaxFileUpload_UploadCanceled = "Subida cancelada";
        Sys.Extended.UI.Resources.AjaxFileUpload_DefaultError = "Error";
        Sys.Extended.UI.Resources.AjaxFileUpload_UploadingHtml5File = "Subiendo: {0}, peso: {1} bytes.";
        Sys.Extended.UI.Resources.AjaxFileUpload_error = "error";
    }

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:52:11.120

你为什么不为此目的使用控件本地化？

> 有了本地化支持，控件现在使用翻译成该区域设置语言的字符串。因此，如果您的网站启用了文化敏感设置，那么 Toolkit 控件将开箱即用，网站作者无需额外努力即可为其他语言单独构建

[参考](http://ajaxcontroltoolkit.codeplex.com/wikipage?title=Localization)

# c++ - 为自定义流类编写操纵器

> ID：15053753
> 
> 赞同：1
> 
> 时间：2013-02-24T16:20:52.387
> 
> 标签：c++, operator-overloading, iostream, streambuf

我编写了一个自定义流类，它输出缩进文本并且具有可以更改缩进级别的操纵器。所有缩进工作都在自定义流缓冲区类中实现，该流类使用该类。缓冲区正在工作（即文本在输出中缩进），但我无法让我的操纵器工作。我在很多地方都在阅读 ostream（我的类扩展）如何重载 operator<<，如下所示：

```
ostream& ostream::operator << ( ostream& (*op)(ostream&))

{
    // call the function passed as parameter with this stream as the argument
    return (*op)(*this);
} 
```

这意味着它可以将函数作为参数。那么为什么我的“缩进”或“缩进”流函数没有被识别呢？我确定我必须对 operator<< 进行一些重载，但我不应该不需要吗？请参阅下面的代码：

```
#include <iostream>
#include <streambuf>
#include <locale>
#include <cstdio>

using namespace std;

class indentbuf: public streambuf {

public:

    indentbuf(streambuf* sbuf): m_sbuf(sbuf), m_indent(4), m_need(true) {}

    int indent() const { return m_indent; }
    void indent() { m_indent+=4; }
    void deindent() { if(m_indent >= 4) m_indent-= 4; }

protected:

    virtual int_type overflow(int_type c) {

        if (traits_type::eq_int_type(c, traits_type::eof()))

            return m_sbuf->sputc(c);

        if (m_need)
        {
            fill_n(ostreambuf_iterator<char>(m_sbuf), m_indent, ' ');
            m_need = false;
        }

        if (traits_type::eq_int_type(m_sbuf->sputc(c), traits_type::eof()))

            return traits_type::eof();

        if (traits_type::eq_int_type(c, traits_type::to_char_type('\n')))

            m_need = true;

        return traits_type::not_eof(c);
    }

    streambuf* m_sbuf;
    int m_indent;
    bool m_need;
};

class IndentStream : public ostream {
public:
    IndentStream(ostream &os) : ib(os.rdbuf()), ostream(&ib){};

    ostream& indent(ostream& stream) {
        ib.indent();
        return stream;
    }

   ostream& deindent(ostream& stream) {
        ib.deindent();
        return stream;
    }

private:
    indentbuf ib;
};

int main()
{
    IndentStream is(cout);
    is << "31 hexadecimal: " << hex << 31 << endl;
    is << "31 hexadecimal: " << hex << 31 << endl;
    is << "31 hexadecimal: " << hex << 31 << deindent << endl;
    return 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T16:46:11.977

你的操纵器应该被声明为一个只接受一个类型参数的函数`ostream&`。但是，如果您将其设为*成员*函数，您就会知道还有一个隐式`this`参数被传递给该函数。

因此，您应该将您的操纵器声明为免费的非成员函数，使其成为`friend`您的类，以便它可以访问其私有成员`ib`：

```
class IndentStream : public ostream {
public:
    IndentStream(ostream &os) : ib(os.rdbuf()), ostream(&ib){};

    ostream& indent(ostream& stream) {
        ib.indent();
        return stream;
    }

    friend ostream& deindent(ostream& stream);
//  ^^^^^^

private:
    indentbuf ib;
};

ostream& deindent(ostream& stream)
{
    IndentStream* pIndentStream = dynamic_cast<IndentStream*>(&stream);
    if (pIndentStream != nullptr)
    {
        pIndentStream->ib.deindent();
    }

    return stream;
}

int main()
{
    IndentStream is(cout);
    is << "31 hexadecimal: " << hex << 31 << endl;
    is << "31 hexadecimal: " << hex << 31 << deindent << endl;
    is << "31 hexadecimal: " << hex << 31 << endl;
    return 0;
} 
```

或者，如果您真的希望您的功能成为成员，您可以使其成为`static:`

```
class IndentStream : public ostream {
public:
    IndentStream(ostream &os) : ib(os.rdbuf()), ostream(&ib){};

    ostream& indent(ostream& stream) {
        ib.indent();
        return stream;
    }

    static ostream& deindent(ostream& stream)
    {
        IndentStream* pIndentStream = dynamic_cast<IndentStream*>(&stream);
        if (pIndentStream != nullptr)
        {
            pIndentStream->ib.deindent();
        }

        return stream;
    }

private:
    indentbuf ib;
}; 
```

但是，这将迫使您使用限定名称来引用它：

```
int main()
{
    IndentStream is(cout);
    is << "31 hexadecimal: " << hex << 31 << endl;
    is << "31 hexadecimal: " << hex << 31 << IndentStream::deindent << endl;
    //                                       ^^^^^^^^^^^^^^
    is << "31 hexadecimal: " << hex << 31 << endl;
    return 0;
} 
```

# ios - 如果太长，iOS 会旋转标签

> ID：15053757
> 
> 赞同：1
> 
> 时间：2013-02-24T16:21:27.323
> 
> 标签：ios, objective-c, uilabel

在 iPhone 音乐播放器或锁屏上双击 home 键时，如果曲目的标题、作者或专辑名称太长而无法显示，则文本开始移动，以便阅读整个文本最终。

我怎样才能做到这一点？是否有任何公共API，或者我必须自己制作？

（很抱歉，如果这个问题已经被问过或者它是微不足道的，我不知道如何向谷歌描述它）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:08:16.473

你需要的术语是“marquee”（我不知道为什么是这个词，但是 HTML 效果也叫这个！）。

周围有许多开源实现，这里有一个例子：

[https://www.cocoacontrols.com/platforms/ios/controls/marqueelabel](https://www.cocoacontrols.com/platforms/ios/controls/marqueelabel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:42:47.107

音乐控制完全符合您的要求。[http://cydia.saurik.com/package/com.phoenix.pandoracontrols](http://cydia.saurik.com/package/com.phoenix.pandoracontrols)

不过，它会花费你五美元，而且你需要越狱。

# qt - 更改 QGraphicsItem 的本地坐标系统，使其原点位于 (0,0)

> ID：15053759
> 
> 赞同：2
> 
> 时间：2013-02-24T16:22:17.330
> 
> 标签：qt, qt4, qt5, qgraphicsitem, qgraphicsscene

我有一个 QGraphicsView 和一个名为 scene->setSceneRect(0,0,600, 600) 的场景的 QGraphicsScene。

我用boundingRectangle(0,0,600,600) 创建了一个名为background 的简单自定义QGraphicsItem。

很明显，背景项目的中心是（300,300），minX=0，minY=0 和 maxX=600，maxY=600...但我希望这个背景项目的中心是（0,0），minX= -300，minY=-300，原点在(0,0)，maxX=300，maxY=300。换句话说，我希望背景项目的局部坐标系能够反映我们在纸上绘制的自然坐标系。

[![x,y 图](../Images/6b1b7b4ee66abbd3a5474b4a73397d6c.png)](https://i.stack.imgur.com/CnM1U.png)
[（来源：[shmoop.com](http://www.shmoop.com/images/prealgebra/unit6/pa.6.094.png)）]

我该怎么做呢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:14:44.180

如果您有定制`QGraphcisItem`，您将负责绘画和几何图形。因此，您可以将矩形绘制为左上角 (-300,-300) 和右下角 (300,300)，只要确保通过覆盖和实现返回匹配的边界矩形`QGraphicsItem::boundingRect()`。

这是 Qt 文档中的一个示例：

```
 class SimpleItem : public QGraphicsItem
 {
 public:
     QRectF boundingRect() const
     {
         qreal penWidth = 1;
         return QRectF(-10 - penWidth / 2, -10 - penWidth / 2,
                       20 + penWidth, 20 + penWidth);
     }

     void paint(QPainter *painter, const QStyleOptionGraphicsItem *option,
                QWidget *widget)
     {
         painter->drawRoundedRect(-10, -10, 20, 20, 5, 5);
     }
 }; 
```

# perl - 如何将 shell 脚本移植到 Perl？

> ID：15053760
> 
> 赞同：-1
> 
> 时间：2013-02-24T16:23:03.963
> 
> 标签：perl

这是一个 shell 脚本，我如何在 Perl 中完成同样的事情？

```
prfile=~/sqllib/db2profile

profile()
{
if [ -f $prfile ] && [ "$prfile" != "" ];
then
        . $prfile
else
        read -p "Enter a valid Profile : " prfile
        profile
fi
}
profile 
```

在这里它检查配置文件，如果找到它会执行它，`. $prfile`否则它会再次询问用户正确的配置文件

**更新**

```
#!/usr/bin/perl
use strict;
use warnings;

my $profile = "$ENV{'HOME'}/sqllib/db2proile";
# default profile

while (not -e $profile) { # until we find an existing file
  print "Enter a valid profile: ";
  chomp($profile = <>); # read a new profile
}

qx(. $profile); 
```

这行得通。我希望主目录是动态的而不是硬编码的，因为它们因不同的机器而异。我只是想用 Perl 来完成我用 shell 所取得的成就。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:46:16.103

如果我了解您的目标，我认为您不能使用 perl 来完成此操作，因为 perl 将作为子进程运行，并且它无法更改 shell 的环境（它是父进程）。也许这对你有用（未经测试，即兴发挥）？

```
prfile=~/sqllib/db2profile
if [ -s "$prfile" ] ; then
   . "$prfile"
else
  while true ; do 
    read -p "Enter a valid Profile : " prfile
    if [ -s "$prfile" ] ; then
       . "$prfile"
       break;
    fi
  done
fi 
```

# ruby-on-rails - 表单中的嵌套属性未显示

> ID：15053767
> 
> 赞同：0
> 
> 时间：2013-02-24T16:23:28.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我有 3 个模型，表示选民有很多票，我试图让选民在创建投票对象时的相同表单上投票，但我的表单中的字段未显示。这是我的模型：

```
class Voter < ActiveRecord::Base
  attr_accessible :email_address, :verification_code, :verified, :votes_attributes
  has_many :votes, :class_name => "Vote"
  accepts_nested_attributes_for :votes
end

class Vote < ActiveRecord::Base
  belongs_to :entry
  belongs_to :voter
  attr_accessible :entry, :voter, :voter_id
end 
```

在我的表格中，我有：

```
<%= form_for(@voter) do |f| %>
<% if @voter.errors.any? %>
<div id="error_explanation">
<h2><%= pluralize(@voter.errors.count, "error") %> prohibited this voter from being saved:</h2>

<ul>
<% @voter.errors.full_messages.each do |msg| %>
<li><%= msg %></li>
<% end %>
</ul>
</div>
<% end %>

  <div class="field">
    <%= f.label :email_address %><br />
<%= f.text_field :email_address %>
  </div>
  <div class="field">
    <%= f.label :verification_code %><br />
    <%= f.text_field :verification_code %>
  </div>
  <div class="field">
    <%= f.label :verified %><br />
    <%= f.check_box :verified %>
  </div>

<div class="field">
      <% f.fields_for :votes do |builder| %>  
        <fieldset>
        <%= builder.label :votes, "Entry" %>
        <%= collection_select(:entry, :entry_id, Entry.all, :id, :email_address, :prompt => 'Please select an Entry') %>
      <% end %>
    </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

但是投票字段没有显示。我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:02:54.457

在rails 3中，您需要使用：

```
 <%= f.fields_for :votes do |builder| %> 
```

这将解决问题。

# python - 在运行测试时运行 __import__ 会将所有全局变量重置为 None

> ID：15053770
> 
> 赞同：0
> 
> 时间：2013-02-24T16:23:32.860
> 
> 标签：python, import, python-2.7

当我使用（[代码](https://github.com/ZyX-I/powerline/blob/fbccc659de6a3baddc784190a819ba61505f17a1/powerline/lib/vcs/__init__.py#L27)）`__import__`直接或间接运行时`importlib.import_module`

```
python setup.py test 
```

产生`TypeError`或类似的错误，表明该`NoneType`对象不能做某事。一些探索显示，调用`None`后立即出现`importlib`：模块中定义的所有全局变量现在都分配了这个值。如果我不运行测试，这不会发生。此外，如果我从另一个目录导入，则不会发生这种情况（在导入模块时，例如`powerline.lib.vcs.git`from `__init__.py`file 是`powerline.lib.vcs`模块的文件，这种行为会出现，但在`powerline.lib.vcs_modules`使用 empty导入时不会出现`__init__.py`）。

测试是通过`setuptools`使用单独目录`unittest`中的测试套件来完成的。`tests`Python 版本是`2.7.3-r2`（`-r2`代表 ebuild 修订版）。可以在[这里](https://travis-ci.org/ZyX-I/powerline/jobs/5021164)看到错误输出。

如何解决这种行为？

更奇怪的数据：我能够创建两个目录，这样就不会`diff -r --brief ~/.vam/powerline-{old,new}`返回任何更改（旧 = 错误，新 = 重新克隆，没有错误）并且`diff -u <(ls -laR) <(cd ../powerline-new && ls -laR)`只报告某些目录修改时间的更改，但是对于 powerline-old 它失败了，对于 powerline-new它不是。交换目录位置不会改变结果。`cp -r`也不会在其他位置复制两个目录或执行`tar c`, then `tar x`。

啊，*travis*虚拟机中的新克隆也[显示了](https://travis-ci.org/ZyX-I/powerline/jobs/5022734)这个奇怪的错误。

任何想法这意味着什么？在哪里可以保存状态来区分这些目录？

# c++ - 如何在我不想编辑的第 3 方代码中禁用来自 gcc 的未使用变量警告？

> ID：15053776
> 
> 赞同：116
> 
> 时间：2013-02-24T16:24:25.960
> 
> 标签：c++, gcc, compiler-warnings, compiler-flags

我想知道您传递给 gcc 编译器以关闭未使用的变量警告的开关？我在 windows 上从 boost 中得到错误，我不想触摸 boost 代码：

```
C:\boost_1_52_0/boost/system/error_code.hpp: At global scope:
C:\boost_1_52_0/boost/system/error_code.hpp:214:36: error: 'boost::system::posix_category' defined but not used [-Werror=unused-variable]
C:\boost_1_52_0/boost/system/error_code.hpp:215:36: error: 'boost::system::errno_ecat' defined but not used [-Werror=unused-variable]
C:\boost_1_52_0/boost/system/error_code.hpp:216:36: error: 'boost::system::native_ecat' defined but not used [-Werror=unused-variable] 
```

我尝试使用两者`-Wunused-value`，`-Wno-unused-value`但都没有抑制上面的消息。

什么是正确的命令，这是我的编译行：

```
g++  -g -fno-inline -Wall -Werror -Wextra -Wfloat-equal -Wshadow
-Wpointer-arith -Wcast-qual -Wcast-align -Wwrite-strings -Wno-conversion 
-Wdisabled-optimization -Wredundant-decls -Wunused-value -Wno-deprecated 
-IC:\\boost_1_52_0 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 
-c -o op.o op.cpp 
```

也许`-Wall`覆盖了我的目标？

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2013-02-24T16:31:09.677

`-Wno-unused-variable`开关通常可以解决问题。但是，如果您在项目中关心这些事情，这确实是一个非常有用的警告。当 GCC 开始警告你代码中没有的东西时，它会变得很烦人。

我建议您保持警告，但使用`-isystem`而不是`-I`第三方项目的包含目录。该标志告诉 GCC 不要警告您有关您无法控制的内容。

例如，代替`-IC:\\boost_1_52_0`，说`-isystem C:\\boost_1_52_0`。

希望能帮助到你。祝你好运！

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2014-04-28T02:22:14.013

有时你只需要抑制一些警告而你想保留其他警告，只是为了安全。*在您的代码中，您可以通过使用 GCC 的未使用*属性来抑制变量甚至形式参数的警告。假设您有以下代码片段：

```
void func(unsigned number, const int version)
{
  unsigned tmp;
  std::cout << number << std::endl;
} 
```

可能存在一种情况，当您需要将此函数用作处理程序时 - 这（恕我直言）在 C++ Boost 库中很常见。然后你需要第二个形参**version**，所以函数的签名和处理程序需要的模板一样，否则编译会失败。但是您也不需要在函数本身中使用它...

如何标记从警告中排除的变量或形式参数的解决方案是：

```
void func(unsigned number, const int version __attribute__((unused)))
{
  unsigned tmp __attribute__((unused));
  std::cout << number << std::endl;
} 
```

GCC 还有许多其他参数，您可以在*手册页*中查看它们。这也适用于 C 程序，不仅是 C++，而且我认为它几乎可以用于每个函数，而不仅仅是处理程序。继续尝试！;)

PS：最近我用它来抑制模板中 Boosts 序列化的警告，如下所示：

```
template <typename Archive>
void serialize(Archive &ar, const unsigned int version __attribute__((unused))) 
```

编辑：显然，我没有按照您的需要回答您的问题，[drak0sha](https://stackoverflow.com/a/15053852/3481531)做得更好。这是因为我主要是按照问题的标题，我的不好。希望这可以帮助其他人，因为这个标题而来到这里...... :)

* * *

## 回答 #3

> 赞同：78
> 
> 时间：2014-03-28T09:17:26.393

如果您使用 gcc 并希望禁用所选代码的警告，则可以使用 #pragma 编译器指令：

```
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wunused-variable"
( your problematic library includes )
#pragma GCC diagnostic pop 
```

对于您控制的代码，您还可以使用`__attribute__((unused))`来指示编译器不使用特定变量。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-02-24T16:30:38.497

请参阅[`man gcc`](http://linux.die.net/man/1/gcc)警告选项下。你有一大堆`unused`

> 警告选项
> ... -Wunused -Wunused-function -Wunused-label -Wunused-parameter -Wunused-value -Wunused-variable -Wunused-but-set-parameter -Wunused-but-set-variable

如果您为其中任何一个添加前缀`no-`，它将禁用此警告。

> 许多选项都有以 -f 或 -W 开头的长名称——例如，-fmove-loop-invariants、-Wformat 等等。其中大部分既有正面形式也有负面形式；-ffoo 的否定形式是 -fno-foo。本手册仅记录这两种形式中的一种，以非默认形式为准。

更详细的解释可以在[请求或抑制警告的选项中找到](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#Warning-Options)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-02-24T16:26:32.083

使用`-Wno-unused-variable`应该有效。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-24T16:28:13.753

编译器已经告诉你，不是`value`but `variable`。您正在寻找`-Wno-unused-variable`. 此外，尝试`g++ --help=warnings`查看可用选项的列表。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-07-26T19:52:00.120

> 你如何禁用来自 gcc 的未使用的变量警告？
> 我在 windows 上从 boost 中得到错误，我不想触摸 boost 代码......

您访问[Boost 的 Trac](https://svn.boost.org/trac/boost/report)并提交一份针对 Boost 的错误报告。

您的应用程序不负责清除库警告和错误。库负责清除自己的警告和错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-13T08:08:03.787

`-Wall`并`-Wextra`在 GCC 中设置阶段和后续`-Wno-unused-variable`可能不会生效。例如，如果您有：

`CFLAGS += -std=c99 -pedantic -pedantic-errors -Werror -g0 -Os \ -fno-strict-overflow -fno-strict-aliasing \ -Wall -Wextra \ -pthread \ -Wno-unused-label \ -Wno-unused-function \ -Wno-unused-parameter \ -Wno-unused-variable \ $(INC)`

然后 GCC 看到指令`-Wall -Wextra`并且似乎忽略了`-Wno-unused-variable`

这可以改为如下所示，并且您可以在未使用的变量上获得编译时不会停止的预期效果：

`CFLAGS += -std=c99 -pedantic -pedantic-errors -Werror -g0 -Os \ -fno-strict-overflow -fno-strict-aliasing \ -pthread \ -Wno-unused-label \ -Wno-unused-function \ $(INC)`

有充分的理由将其称为“警告”与“错误”。仅仅因为您的代码不完整（例如您正在将算法存根）而导致编译失败可能会失败。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-14T13:32:19.333

您可以在变量前加上'(void)'。如果您无权访问构建框架或者您只想影响本地的行为更改，这可能会很有用。

IE：

```
int main()
{
  int unused1;       //This will print warning
  int unused2;       //This will not print warning -
                     //                             |
  (void) unused2;    // <----------------------------
} 
```

输出：

```
$ g++ -Wall test.cc
test.cc: In function ‘int main()’:
test.cc:4:7: warning: unused variable ‘unused1’ [-Wunused-variable]
    4 |   int unused1;
      |       ^~~~~~~ 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2013-10-14T09:53:25.143

```
export IGNORE_WARNINGS=1 
```

它确实显示警告，但继续构建

# ruby - 加速我的 Ruby 代码

> ID：15053782
> 
> 赞同：0
> 
> 时间：2013-02-24T16:24:57.197
> 
> 标签：ruby, performance

我创建了一个用于选择用户的算法，它的运行速度比我想要的要慢，因为它被用于无限滚动网页。

我对 Ruby 的了解还不够，无法确定可以提高效率的方法。有没有人有任何想法？

```
def gen_users(list_length)
new_selection = []

# get all users
all_users = User.all

# shuffle them randomly
shuffled_users = all_users.shuffle

# cycle through all users randomly
shuffled_users.each do |user|
    # check user profile isn't already in current selection
    if !@users.include?(user)
    # check user profile exists
    if user.etkh_profile
        profile_completeness = user.etkh_profile.get_profile_completeness

        # check user profile meets minimum requirements        
        if profile_completeness >= MIN_PROFILE_COMPLETENESS && user.avatar? \
        && user.etkh_profile.background.length >= MIN_BACKGROUND_LENGTH

        # insert randomness and bias towards profiles with high completeness
        r = Random.new
        rand = r.rand(1..10)  # random integer between 1 and 10
        product = rand * profile_completeness

        # threshold is defined by the probability that a profile with min profile completeness
        # will be selected

        max_product = MIN_PROFILE_COMPLETENESS * 10
        threshold = (1 - PROBABILITY_MIN_PROFILE) * max_product

        if product >= threshold
            # add to total list
            @users << user

            # add to list of latest selection
            new_selection << user
        end
        end
    end
    end

    # exit loop if enough users have been found
    break if new_selection.length >= list_length
end

# return this selection
return new_selection
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T16:45:13.930

你做错的两件事是：

*   `threshold`是恒定的。您不应该在循环中每次都计算它。
*   `Random.new`应该重复使用。这就是它的用途。您不应该每次都在循环中创建新实例。

我对您的代码的重构（包含 steenslag 的改进）将是这样的：

```
THRESHOLD = (1 - PROBABILITY_MIN_PROFILE) * MIN_PROFILE_COMPLETENESS * 10
RANDOM_GENERATOR = Random.new

def gen_users(list_length)
  (User.all - @users)
  .select do |user|
    profile = user.etkh_profile and
    profile.background.length >= MIN_BACKGROUND_LENGTH and
    (completeness = profile.get_profile_completeness) >= MIN_PROFILE_COMPLETENESS and
    RANDOM_GENERATOR.rand(1..10) * completeness >= THRESHOLD
  end
  .select(&:avatar?)
  .sample(list_length)
  .tap{|a| @users.concat(a)}
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:56:31.150

很难说具体是什么造成了糟糕的性能，这取决于例如用户的数量。还：

1.  `max_product`并且`threshold`是常数，您不需要在每个周期都计算它们。
2.  也许`user.etkh_profile`是一种缓慢的方法？每个周期调用 3 次。
3.  此外，您不需要存储两个具有大量数据的局部变量（`all_users`和`shuffled_users`）。相反，您可以执行类似`shuffled_users = User.all.shuffle`.

# wpf - RestSharp - 在 WPF/Silverlight 中下载/使用图像

> ID：15053784
> 
> 赞同：3
> 
> 时间：2013-02-24T16:25:02.777
> 
> 标签：wpf, image, silverlight, download, restsharp

我正在尝试使用 RestSharp 从 WCF/Rest 服务下载图像。结果应保存在文件中并显示在图像控件和 WPF/SL 页面中。

```
 private void GetImage()
    {
        RestClient _Client = new RestClient(BASE_URI);
        RestRequest request = new RestRequest("/api/img/{FileName}");
        request.AddParameter("FileName", "dummy.jpg", ParameterType.UrlSegment);
        _Client.ExecuteAsync<MemoryStream>(
        request,
        Response =>
        {
            if (Response != null)
            {
                var bitmapImage = new BitmapImage();
                bitmapImage.BeginInit();
                bitmapImage.StreamSource = Response.Data;
                String fn = String.Format(@"c:\temp\{0}.jpg", Guid.NewGuid().ToString());
                System.IO.File.WriteAllBytes(fn,Response.Data.ToArray());
                bitmapImage.EndInit();
                img.Source = bitmapImage;
            }
        });
    } 
```

当我查看提琴手时，图像已正确下载，但没有保存图像，也没有显示任何内容。没有例外。有什么建议么 ？

* * *

更新

部分问题是 RestSharp 没有返回预期的内存流。转移到另一种方法并以 byte[] 格式访问原始数据可以解决部分问题，将图片保存到磁盘。

```
 private void GetImage()
    {
        RestClient _Client = new RestClient(BASE_URI);
        RestRequest request = new RestRequest("/api/img/{FileName}");
        request.AddParameter("FileName", "dummy.jpg", ParameterType.UrlSegment);
        _Client.ExecuteAsync(
        request,
        Response =>
        {
            if (Response != null)
            {
                byte[] imageBytes = Response.RawBytes;
                var bitmapImage = new BitmapImage();
                bitmapImage.BeginInit();
                bitmapImage.StreamSource = new MemoryStream(imageBytes);
                bitmapImage.CreateOptions = BitmapCreateOptions.None;
                bitmapImage.CacheOption = BitmapCacheOption.Default;
                bitmapImage.EndInit();

                JpegBitmapEncoder encoder = new JpegBitmapEncoder();
                Guid photoID = System.Guid.NewGuid();
                String photolocation = String.Format(@"c:\temp\{0}.jpg", Guid.NewGuid().ToString());
                encoder.Frames.Add(BitmapFrame.Create(bitmapImage));
                using (var filestream = new FileStream(photolocation, FileMode.Create))
                encoder.Save(filestream);

                this.Dispatcher.Invoke((Action)(() => { img.Source = bitmapImage; }));
                ;
            }
        });
    } 
```

虽然调用 this.dispatcher.Invoke 我仍然得到错误：调用线程无法访问这个对象，因为不同的线程拥有它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T19:51:54.220

由于它`BitmapImage`是在 UI 线程之外的另一个线程中创建的，因此您还必须调用[`Freeze`](http://msdn.microsoft.com/en-us/library/ms557735.aspx)以使其在 UI 线程中可访问。

尽管此处并非绝对必要，但最好始终处理任何`IDisposable`对象，包括`MemoryStream`. 因此，您还必须将[`BitmapImage.CacheOption`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.cacheoption.aspx)属性设置为[`OnLoad`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapcacheoption.aspx).

```
using (var memoryStream = new MemoryStream(imageBytes))
{
    bitmapImage.BeginInit();
    bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
    bitmapImage.StreamSource = memoryStream;
    bitmapImage.EndInit();
    bitmapImage.Freeze();
} 
```

冻结的 BitmapImage 可在 UI 线程中访问：

```
Dispatcher.Invoke((Action)(() => img.Source = bitmapImage)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:40:14.797

您是否使用调试器检查异常？`Task.Result`如果在后台任务上引发异常，除非您访问或使用运算符，否则不会在调用者代码上重新引发异常`await`。

我的猜测是您无权访问`C:`您正在写入的位置。无论如何，该代码块似乎没有必要，您应该能够直接将图像的源设置为您拥有的流，而无需将其写入磁盘。尝试评论写作以驱动一段代码，看看是否能解决问题。

# scikit-learn - sklearn.preprocessing 中没有 StandardScaler 类

> ID：15053786
> 
> 赞同：4
> 
> 时间：2013-02-24T16:25:10.993
> 
> 标签：scikit-learn

我想使用`StandardScaler`预处理包[http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.StandardScaler.html#sklearn.preprocessing.StandardScaler](http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.StandardScaler.html#sklearn.preprocessing.StandardScaler)中的类，但我一直`AttributeError: 'module' object has no attribute 'StandardScaler'`在 scikit-learn 0.13

`preprocessing.__dict__`不显示`StandardScaler`。

我可以`LabelEncoder`在同一个包中使用该类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T21:11:07.827

你的 python 路径中的`sklearn`包可能是旧版本，而不是你安装的 0.13 版本。尝试：

```
python -c "import sklearn; print(sklearn.__file__)" 
```

检查这是否是预期的 sklearn 安装位置。

为了解决重复安装问题，我发现运行以下命令很有用：

```
pip uninstall scikit-learn 
```

几次，直到我收到一条错误消息，明确指出系统上没有安装 scikit-learn。然后：

```
pip install scikit-learn 
```

一次安装最新的稳定版本（即撰写本文时的 0.13.1）。

# python - jinja2.exceptions.TemplateNotFound 错误

> ID：15053790
> 
> 赞同：54
> 
> 时间：2013-02-24T16:25:20.733
> 
> 标签：python, flask, jinja2

我使用烧瓶，当我调用这个 url 时出现这个错误：`/login` 这是我的登录方法：

```
@app.route('/login')
def login():
    if authenticateForPanel():
        return redirect(url_for("panel"))
    else:
        getParam = request.args.getlist('redirect_uri')
        if getParam:
            ref =getParam[0]
        else:
            ref="/panel"
        return render_template( themesDir + g.blogOptions['active_theme']+'/login.html', blogOptions = g.blogOptions, ref=ref ) 
```

和追溯：

```
Traceback (most recent call last):
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 1689, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 1360, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 1358, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/app.py", line 1344, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/ozcan/Documents/python/app.py", line 209, in login
    return render_template( themesDir + g.blogOptions['active_theme']+'/login.html', blogOptions = g.blogOptions, ref=ref )
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/templating.py", line 124, in render_template
    return _render(ctx.app.jinja_env.get_or_select_template(template_name_or_list),
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/jinja2/environment.py", line 758, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/jinja2/environment.py", line 719, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/jinja2/environment.py", line 693, in _load_template
    template = self.loader.load(self, name, globals)
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/jinja2/loaders.py", line 115, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/Users/ozcan/Library/Python/2.7/lib/python/site-packages/flask/templating.py", line 61, in get_source
    raise TemplateNotFound(template)
TemplateNotFound: static/themes/default/login.html 
```

我绝对确定 login.html 在那里（`static/themes/default/404.html`）。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2015-03-14T22:30:31.877

您将模板放在错误的位置。来自 Flask 文档：

Flask 将在模板文件夹中查找模板。因此，如果您的应用程序是一个模块，则此文件夹位于该模块旁边，如果它是一个包，则它实际上在您的包中：有关更多信息，请参阅文档：http: [//flask.pocoo.org/docs/quickstart/#rendering-模板](http://flask.pocoo.org/docs/quickstart/#rendering-templates)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-24T16:28:48.997

我认为你不应该在前面加上`themesDir`. 您只需将模板的文件名传递给烧瓶，然后它将在一个名为`templates`相对于您的 python 文件的文件夹中查找。

# python - 来自unix utc秒的numpy datetime64

> ID：15053791
> 
> 赞同：3
> 
> 时间：2013-02-24T16:25:23.760
> 
> 标签：python, datetime, numpy, pandas

注意：我认为 datetime64 正在做正确的事情。所以我会留下帖子，以防它有用。

从 numpy 1.7.0 开始，传入 np.datetime64 的秒数被解释为在本地时区中。有没有一种干净快速的方法可以将 unix utc 秒数导入 np.datetime64？我有 50M 的数组，似乎应该有办法告诉 np.datetime64 我的秒值是 UTC，不是吗？

```
datetime.datetime.utcfromtimestamp(1338624706)
datetime.datetime(2012, 6, 2, 8, 11, 46)  # this is the time I'm looking for

np.datetime64(1338624706, 's')
numpy.datetime64('2012-06-02T01:11:46-0700')  # Darn you ISO!  Off by 7 hours

dt64 = np.datetime64(1338624706, 's')
dt64.astype(datetime.datetime)
datetime.datetime(2012, 6, 2, 8, 11, 46)  # Wait, did it do the right thing?

# This seems like the best option at the moment,
# but requires building datetime.datetime objects:
dt64 = np.datetime64(datetime.datetime.utcfromtimestamp(1338624706))
numpy.datetime64('2012-06-02T01:11:46.000000-0700') # Show this
dt64.astype(datetime.datetime)
datetime.datetime(2012, 6, 2, 8, 11, 46)  # Looks like it worked 
```

我真的不想诉诸字符串操作。我很高兴能够将 unix utc ints 或浮点数组直接转换为正确的 dt64。

[https://stackoverflow.com/a/13704307/417578](https://stackoverflow.com/a/13704307/417578)暗示 numpy 1.8.0 可能会做我想做的事，但是有什么可以在 1.7.0 中使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:36:44.023

这是 pandas 中的另一种方式（它可以正确处理不同版本的 numpy datetime64 中的怪癖，所以这在 numpy 1.6.2 中有效） - 我认为你可能需要当前的 master （0.11-dev）

```
# obviously replace this by your utc seconds
# need to convert to the default in pandas of datetime64[ns]
z = pd.Series([(1338624706 + i)*1e9 for i in range(50)],dtype='datetime64[ns]')

In [35]: z.head()
Out[35]: 
0   2012-06-02 08:11:46
1   2012-06-02 08:11:47
2   2012-06-02 08:11:48
3   2012-06-02 08:11:49
4   2012-06-02 08:11:50
Dtype: datetime64[ns]

# turn it into a DatetimeIndex and localize
lidx = pd.DatetimeIndex(z).tz_localize('UTC')

<class 'pandas.tseries.index.DatetimeIndex'>
[2012-06-02 08:11:46, ..., 2012-06-02 08:12:35]
Length: 50, Freq: None, Timezone: UTC

# now you have a nice object to say convert timezones
In [44]: lidx.tz_convert('US/Eastern')
Out[44]: 
<class 'pandas.tseries.index.DatetimeIndex'>
[2012-06-02 04:11:46, ..., 2012-06-02 04:12:35]
Length: 50, Freq: None, Timezone: US/Eastern 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T17:35:04.040

也许我误解了这个问题，但时区不只是显示问题吗？

```
utc_time = datetime.datetime.utcnow()
print utc_time
dt64 =  np.datetime64(utc_time)
print dt64
print dt64.astype(datetime.datetime)

2013-02-24 17:30:53.586297
2013-02-24T11:30:53.586297-0600
2013-02-24 17:30:53.586297 
```

时间没有以任何方式“改变”：

```
some_time = datetime.datetime.utcfromtimestamp(1338624706)
dt64 = np.datetime64(1338624706,'s')
print dt64.astype(int64)
1338624706 
```

这是从 numpy 1.7 开始的。

# python - 获取行上的所有字段值

> ID：15053792
> 
> 赞同：1
> 
> 时间：2013-02-24T16:25:28.183
> 
> 标签：python, google-app-engine

我正在使用下面的代码从一行中获取所有值。

```
from google.appengine.ext import db
from python_lib.models import Field

field = Field.all()[0]
names = Field.properties()

for key in names:
  print field.get(key) 
```

但它给出了以下错误，

```
BadKeyError: Invalid string key name. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:52:20.930

您在此代码中混淆了太多不同的 api。

```
for key in names:
   print field.get(key) 
```

您的 get() 调用无效，因为您实际上是在尝试调用类方法以从数据存储中获取实体 - 请参阅此方法的文档 [https://developers.google.com/appengine/docs/python/datastore/模型类#Model_get](https://developers.google.com/appengine/docs/python/datastore/modelclass#Model_get)。

要从字段实例（您的对象）中按名称获取属性，您应该使用`getattr`

如在

```
for key in names:
    print getattr(field,key) 
```

或全部交替使用`get_value_for_datastore(model_instance)`属性对象，该对象与属性名称一起从 properties() 调用返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:40:58.390

这是你想要的吗？

代码：

```
from google.appengine.ext import db

class Field(db.Model):
  author = db.StringProperty()
  content = db.StringProperty(multiline=True)
  date = db.DateTimeProperty(auto_now_add=True)

a = Field(author="me")
a.put() 
```

编辑：

```
field = Field.all()
for f in field:
    print f.author
    print f.content

props = Field.properties()

print props
for vals in props:
  print vals 
```

输出：

```
<__main__.Field object at 0xb8c9e4c>
{'content': <google.appengine.ext.db.StringProperty object at 0xb7c0aec>, 'date':     <google.appengine.ext.db.DateTimeProperty object at 0xb7c06cc>, 'author':     <google.appengine.ext.db.StringProperty object at 0xb7c0f6c>}
content
date
author 
```

# jsp - 为什么chrome浏览器打开一个url，发送两个请求？

> ID：15053793
> 
> 赞同：1
> 
> 时间：2013-02-24T16:25:33.277
> 
> 标签：jsp, google-chrome, servlets, spring-mvc

我的应用程序基于 servlet2.5、springmvc3.2、tiles 2.2.2

我找到，

当我打开一个网址时，

```
http://127.0.0.1:8880/feilong/member/login.htm 
```

在我的控制器中，代码非常简单：

```
@RequestMapping(value = "/member/login.htm",method = RequestMethod.GET)
public String loginEntry(){
    return "feilong.login";
} 
```

`IE(9.0.8112),`只发送一个请求

但是`chrome(21.0.1180.89)`浏览器发送两个`duplicate`请求

这个，有时候验证码不匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T13:35:22.733

谢谢大家

那是因为

```
<link href="${static_domain}/css/??login.css?${v}" type="text/css" rel="stylesheet" /> 
```

**这个href不存在**

# laravel - Laravel Eloquent 一对多关系

> ID：15053798
> 
> 赞同：0
> 
> 时间：2013-02-24T16:26:09.133
> 
> 标签：laravel, one-to-many, relationship, eloquent, laravel-3

我在让 Laravel 的 Eloquent ORM 返回关系数据时遇到了真正的问题。

# 我的迁移（数据库模式）：

```
Schema::table('users', function($table)
{
    $table->engine = 'InnoDB';
    $table->create();

    $table->increments('id')->unsigned();
    $table->string('firstname');
    $table->string('surname');
    $table->string('email')->unique();
    $table->string('password')->unique();
    $table->string('phone')->nullable();
    $table->text('about')->nullable();
    $table->timestamps();
});

Schema::table('files', function($table)
{
    $table->engine = 'InnoDB';
    $table->create();

    $table->increments('id')->unsigned();
    $table->string('filename');
    $table->string('title');
    $table->text('description')->nullable();
    $table->string('keywords')->nullable();
    $table->integer('category_id')->unsigned();
    $table->integer('file_type_id')->unsigned();
    $table->integer('user_id')->unsigned();
    $table->timestamps();
}); 
```

# 楷模

## 文件.php

```
<?php

class File extends Eloquent
{

    public static $timestamps = true;

    public function user()
    {
        return $this->belongs_to('User');
    }

} 
```

## 用户.php

```
<?php

class User extends Eloquent
{
    public static $timestamps = true;

    public function files()
    {
        return $this->has_many('File');
    }
} 
```

## 路由.php

```
// everything else in my routes.php is as it was when downloaded
Route::get('users', function()
{
    echo '<pre>';

    // this works
    $users = User::all();
    print_r($users);

    // this doesn't work
    print_r($users->files);

    // this doesn't work
    $files = User::find(1)->files;
    print_r($files);
}); 
```

# 错误：

> 未处理的异常
> 
> 信息：
> 
> 试图获取非对象位置的属性：
> 
> C:\wamp\www\l3_mlib\application\routes.php 第 51 行堆栈跟踪：
> 
> #0 C:\wamp\www\l3_mlib\laravel\laravel.php(42): Laravel\Error::native(8, '尝试获取 p...', 'C:\wamp\www\l3_.. .', 51) #1 C:\wamp\www\l3_mlib\application\routes.php(51): Laravel{closure}(8, '试图获取 p...', 'C:\wamp\www\ l3_...', 51, Array) #2 [内部函数]: {closure}() #3 C:\wamp\www\l3_mlib\laravel\routing\route.php(163): call_user_func_array(Object(Closure) , 数组）#4 C:\wamp\www\l3_mlib\laravel\routing\route.php(124): Laravel\Routing\Route->response() #5 C:\wamp\www\l3_mlib\laravel\laravel. php(167): Laravel\Routing\Route->call() #6 C:\wamp\www\l3_mlib\public\index.php(34): require('C:\wamp\www\l3_...' ) #7 {主要}

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T10:51:26.013

我对一个名为 Task 的模型也有同样的问题，它也是一个 Laravel 类。

在 application/config/application.php 中有一些删除命名空间的类别名。您可以注释掉文件别名，然后它不会与您的冲突。

如果你需要在任何时候使用 Laravel File 类，你可以通过它的命名空间名称来引用它，例如

`Laravel\\File::get('path/to/file');`

希望这可以帮助，

担

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T11:04:35.450

我认为问题出在您的迁移模式中，您没有设置外键，所以 laravel 无法获取对象数据，使用时

```
 $files = User::find(1)->files; 
```

这就是为什么它返回错误：尝试获取非对象位置的属性

将此添加到您的文件迁移中，看看它是否有效

```
 $table->integer('user_id')->unsigned()->unique('user_id', 'files_user_id');
 $table->foreign('user_id')->references('id')->on('users'); 
```

并且您可以使用命名空间来避免类名冲突

# java - 免费画线 java2d 应用程序连接每个新绘图的线

> ID：15053802
> 
> 赞同：1
> 
> 时间：2013-02-24T16:26:47.563
> 
> 标签：java, swing, drawing, graphics2d, paintcomponent

我正在构建一个可以识别用鼠标绘制的线条并创建音乐的应用程序。我是 java2d 的新手，所以这是我遇到的问题：

*   当您绘制，然后再进行另一幅绘图时，前一个绘图的最后一个点连接到新绘图的第一个点。我无法弄清楚如何解决这个问题。下面是代码。

*   另一个问题是：我想将每个绘图笔划（从 mousePressed 到 mouseReleased）存储到 Shape 类型的 ArrayList 中，我该如何进入呢？

我想指出正确的方向，因为我无法在网上找到有用的信息。谢谢！

```
public class DrawBoard extends JPanel implements MouseListener,
        MouseMotionListener {

    public JLabel status;
    public Point pstart, pfinish;
    private Shape currentShape = null;
    private ArrayList<Point> points = new ArrayList<Point>();
    private ArrayList<Shape> lines = new ArrayList<Shape>();

    public DrawBoard() {

        Dimension size = getPreferredSize();
        size.setSize(1024, 800); // w, h
        setPreferredSize(size);
        setOpaque(false);
        status = new JLabel("default");
        add(status, BorderLayout.SOUTH);

        addMouseListener(this);
        addMouseMotionListener(this);

    }

    @Override
    public void mouseClicked(MouseEvent e) {
        status.setText(String.format("Clicked at %d,%d", e.getX(), e.getY()));
    }

    // Where the drawing happens
    @Override
    public void mousePressed(MouseEvent e) {
        status.setText("you pressed down the mouse");
        this.pstart = e.getPoint();

    }

    @Override
    public void mouseDragged(MouseEvent e) {
        status.setText("you draged the mouse");
        points.add(e.getPoint());
        repaint();
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        status.setText("you release the mouse click");
        pfinish = e.getPoint();
    }

    // End of where the drawing happens

    @Override
    public void mouseEntered(MouseEvent e) {
        status.setText("you entered the area");
    }

    @Override
    public void mouseExited(MouseEvent e) {
        status.setText("mouse exited the area");
    }

    @Override
    public void mouseMoved(MouseEvent e) {
        // throw new UnsupportedOperationException("Not supported yet.");
    }

    public void paint(Graphics g) {
        super.paint(g);
        Graphics2D g2 = (Graphics2D) g;
        g2.setColor(Color.BLACK);
        g2.setStroke(new BasicStroke(5));

        for (int i = 0; i < points.size() - 2; i++) {

            Point p1 = points.get(i);
            Point p2 = points.get(i + 1);

            g2.drawLine(p1.x, p1.y, p2.x, p2.y);
        }

    }
} 
```

我已经使用 BufferedImage 对其进行了修改，它可以正常绘图，现在唯一不起作用的是 clear 方法，我尝试了不同的方法，但都没有奏效。我的新代码如下：

```
 public class DrawBoard extends JPanel implements MouseListener, MouseMotionListener{

public JLabel status;
private JLabel imgLabel;
public Point pstart, pfinish;
private Shape currentShape = null;
private List<Point> points = new ArrayList<Point>();
private List<BufferedImage> lines = new ArrayList<BufferedImage>();

private static final int BI_WIDTH = 1024;
private static final int BI_HEIGHT = 800;

private BufferedImage bImage = new BufferedImage(BI_WIDTH, BI_HEIGHT,
        BufferedImage.TYPE_INT_ARGB);

public DrawBoard(){  

   Graphics2D g2d = bImage.createGraphics();
   g2d.dispose();

    Dimension size = getPreferredSize();
    size.setSize(1024,800); //w, h
    setPreferredSize(size);
    status =  new JLabel("default");
    add(status, BorderLayout.SOUTH);
    addMouseListener(this);
    addMouseMotionListener(this);  

     imgLabel = new JLabel(new ImageIcon(bImage)) {
     @Override
     protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        paintInLabel(g);
     }
  };
     imgLabel.setOpaque(false);
     setOpaque(false);
      add(imgLabel, BorderLayout.CENTER);

}

private void paintInLabel(Graphics g) {
  Graphics2D g2d = (Graphics2D) g;
  g2d.setColor(Color.BLUE); // this colour is when mouse is pressed
  g2d.setStroke(new BasicStroke(5));
  if (points.size() < 2) {
     return;
  }
  for (int i = 1; i < points.size(); i++) {
     int x1 = points.get(i - 1).x;
     int y1 = points.get(i - 1).y;
     int x2 = points.get(i).x;
     int y2 = points.get(i).y;
     g2d.drawLine(x1, y1, x2, y2);
  }
 }

@Override
public void mouseClicked(MouseEvent e) {
    status.setText(String.format("Clicked at %d,%d", e.getX(), e.getY()));
}

// Where the drawing happens
@Override
public void mousePressed(MouseEvent e) {
    status.setText("you pressed down the mouse");
    this.pstart = e.getPoint();
    points.add(e.getPoint());

}

@Override
public void mouseDragged(MouseEvent e) {
  status.setText("you draged the mouse");
  points.add(e.getPoint());
  imgLabel.repaint();
}

@Override
public void mouseReleased(MouseEvent e) {
    status.setText("you release the mouse click");
    Graphics2D g2d = bImage.createGraphics();
    g2d.setColor(Color.blue); // this is the final colour
    g2d.setStroke(new BasicStroke(5));

     if (points.size() >= 2) {
        for (int i = 1; i < points.size(); i++) {
           int x1 = points.get(i - 1).x;
           int y1 = points.get(i - 1).y;
           int x2 = points.get(i).x;
           int y2 = points.get(i).y;
           g2d.drawLine(x1, y1, x2, y2);
        }
     }
     g2d.dispose();

     points.clear();
     imgLabel.repaint();

}
// End of where the drawing happens

@Override
public void mouseEntered(MouseEvent e) {
   status.setText("you entered the area");
}

@Override
public void mouseExited(MouseEvent e) {
   status.setText("mouse exited the area");
}

@Override
public void mouseMoved(MouseEvent e) {
    //throw new UnsupportedOperationException("Not supported yet.");
}

public void clearDrawBoard() {

    imgLabel.setIcon(null);
}

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T16:30:03.503

一些解决方案和建议：

*   不要从一个单一`List<Point>`的，因为没有办法知道一条线在哪里结束，另一条线从哪里开始。
*   考虑在完成后将每一行绘制到 BufferedImage 并在您的 JComponent 中的 paintComponent 方法中显示该 BufferedImage。您可以将它放在`mouseReleased(...)`方法中的 BufferedImage 中。
*   或者考虑创建一个`List<List<Point>>`，以便您可以根据需要遍历每一行。您将在方法中将新的添加`List<Point>`到原始列表中`mouseReleased(...)`。
*   考虑使用你的`List<Shape>`并用可以绘制的 Line2D 对象填充它。Line2D 将被添加到`List<Shape>`方法中`mouseReleased(...)`。
*   另外：您不应该覆盖`paint(...)`而是`paintComponent（...）。
*   另外：不要忘记 @Override 注释以更安全地编码。

例如，请[在此处](https://stackoverflow.com/a/14585809/522444)查看我的代码和答案。

# matlab - 在matlab中选择所需的行

> ID：15053806
> 
> 赞同：0
> 
> 时间：2013-02-24T16:27:18.760
> 
> 标签：matlab

我有 9 列 14470 行的数据，第一列用 0 或 1 填充。零表示没有测量，整行不符合我的兴趣....有人可以帮我写一个循环当第一列存在时，遍历所有行并过滤数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:33:01.940

你不需要循环，记住 Matlab 是一种面向矩阵的编程语言，应该避免循环。我不会给你答案，我想你可以自己弄清楚，这很容易。本[教程](http://code.google.com/p/yagtom/)将有所帮助。

玩得开心。

# android - 如何重新启动monkeyrunner连接？

> ID：15053808
> 
> 赞同：0
> 
> 时间：2013-02-24T16:27:38.097
> 
> 标签：android, monkeyrunner

我的monkeyrunner有问题。第一次运行会工作，但后续不会。它只会挂起并说“Monkeyrunner 唤醒命令”

我认为重新启动连接可能会解决问题。有没有办法重新启动monkeyrunner连接？

# qt - QFile：无法从 PHYSICALDRIVE 检索大小

> ID：15053812
> 
> 赞同：0
> 
> 时间：2013-02-24T16:27:54.720
> 
> 标签：qt, qfile

我编写了一个最初被认为是用于分析硬盘映像的工具。现在我正在尝试使用此工具对计算机系统进行实时分析，这意味着我的工具会尝试访问物理驱动器。

我在 QT 中实现了我的工具，使用 QFile 类访问图像。我交出的不是图像，而是物理驱动器，在 Windows 下它是 \.\PHYSICALDRIVE0。

我首先想知道我没有收到任何错误，我可以打开设备，我可以寻找，获得位置，几乎所有东西。我唯一遇到的问题是使用 size() 检索驱动器大小。

一些代码示例：

```
QFile file( "\\.\PHYSICALDRIVE0" );
file.open( QIODevice::ReadOnly );

file.size(); //returns 0 
```

我对 QT 并不太深入，可能这很容易。我要感谢所有知道原因的人。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:17:22.677

[`QFileInfo`](http://qt-project.org/doc/qt-4.8/qfileinfo.html#details)也许可以帮助你。听起来好像允许在 Windows 分区的该部分打开只读文件，即使它不存在。调用`GetLastError()`可能会提供更多信息，为什么返回文件大小为零。

使用`QFileInfo`，您可以在打开之前检查以确保它存在。

您最终可能需要一些特定于平台的调用才能使用物理驱动器：

[卷到物理驱动器](https://stackoverflow.com/questions/3824221/volume-to-physical-drive)

看起来可能有一些示例代码可以在 SourceForge 上使用[PartMod查看分区。](https://sourceforge.net/p/partmodproject/code/27/tree/trunk/)

作为查询文件夹大小的附带说明，我认为它必须由操作系统缓存在某处，或者在许多情况下必须在查询时计算。我知道在 Windows 中查看文件夹属性或在 OSX 上获取信息时似乎会发生这种情况。

此外，查看[卷到物理驱动器](https://stackoverflow.com/questions/3824221/volume-to-physical-drive)的答案，那里有一个用于范围长度的字段。我想这就是你要找的。

希望有帮助。

# ios - Restkit 0.2 postObject 总是返回 request.body=(null)

> ID：15053813
> 
> 赞同：3
> 
> 时间：2013-02-24T16:28:03.490
> 
> 标签：ios, restkit

我正在用 restkit 0.2 敲打我的头并发布对象。我正在尝试使用映射的 requestDescriptor 发布一个对象，但在我的请求中总是得到一个 request.body=(null) 。我目前完全陷入困境。

我正在使用以下代码进行映射

```
// Construct a request mapping for our class
RKObjectMapping *requestMapping = [RKObjectMapping requestMapping];
[requestMapping addAttributeMappingsFromDictionary:@{
 @"command": @"requestedCommand" ,
 @"payload": @"payloadForCommand"
 }];
RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:requestMapping objectClass:[ShoppingListAPI class] rootKeyPath:nil];
[manager addRequestDescriptor:requestDescriptor];

// create the object
ShoppingListAPI *shoppingListRequest = [[ShoppingListAPI alloc] init];
shoppingListRequest.payload = payload;
shoppingListRequest.command = @"getShoppingLists"; 
```

并尝试发布它

```
[manager postObject:shoppingListRequest
                                path:@"shoppinglistWebservice.html"
                                parameters:nil
                                 success:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
                                            DLog(@"We object mapped the response with the following result: %@", result);
                                    }
                                failure:^(RKObjectRequestOperation *operation, NSError *error) {
                                        DLog(@"Hit error: %@", error);

                                }]; 
```

从日志中我得到以下信息

```
T restkit.network:RKHTTPRequestOperation.m:150 POST 'http://www.myhost.com/shoppinglistWebservice.html': 
request.headers={
Accept = "application/json";
"Accept-Language" = "de, en, fr, ja, nl, it, es, pt, pt-PT, da, fi, nb, sv, ko, zh-Hans, zh-Hant, ru, pl, tr, uk, ar, hr, cs, el, he, ro, sk, th, id, ms, en-GB, ca, hu, vi, en-us;q=0.8";
"Content-Type" = "text/html; charset=utf-8";
"User-Agent" = "myapp/1.0 (iPhone Simulator; iOS 6.0; Scale/2.00)";
}
request.body=(null) 
```

我按照 RKObjectManager.h 中的示例实现没有成功。request.body 保持为空。它不应该将我的对象显示为 JSON 字符串吗？映射工作正常，即

```
Mapped attribute value from keyPath 'command' to 'requestedCommand'. Value: getShoppingLists 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T13:56:39.860

```
RKRequestDescriptor *reqDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:mapping objectClass:objectClass rootKeyPath:path];
[objectManager addRequestDescriptor:reqDescriptor]; 
```

用于映射`[mapping inverseMapping]`

对于对象类`[Someclass class]`。路径大多可以为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-23T11:25:21.807

I don't know if you managed to solve this, but I finally worked out why I was unable to post - it was very frustrating:

I needed to add this:

```
objectManager.requestSerializationMIMEType=RKMIMETypeJSON; 
```

to get the request to post as JSON.

Problem solved from that point on. Can't work out why this isn't a more widespread answer

# actionscript-3 - 签名的 AIR 包与签名的本机安装程序

> ID：15053814
> 
> 赞同：1
> 
> 时间：2013-02-24T16:28:07.593
> 
> 标签：actionscript-3, apache-flex, air

我使用 Flex SDK 4.6 和 Flashbuilder 4.6。在 Windows 7 上。如果我创建一个签名的本机安装程序，它会安装并运行得很好。如果我创建了一个签名的空气包，它会安装但似乎正在运行（我在任务管理器中看到了该进程）但我没有看到任何东西，就像它正在隐形运行一样。有人知道如何解决这个问题吗？可能是什么原因？如果 .air 应该在任何具有 AIR 运行时的 PC 上运行，我们为什么需要本机安装程序？（普通的本机安装程序，而不是捕获的运行时）。有小费吗？

# php - preg 替换包含方括号的字符串

> ID：15053821
> 
> 赞同：0
> 
> 时间：2013-02-24T16:28:27.277
> 
> 标签：php, regex, preg-replace

我有一个这样的字符串：`[name-123456]`.

我试图用一些预定义的字符串替换这个字符串的匹配。这是我到目前为止所拥有的：

```
preg_replace('~\['.$string_to_be_replaced.'\]~', $code_to_replace_it_with, $content); 
```

目前这会引发错误，我不知道如何删除方括号（即使它们是字符串的一部分）。我如何确保那些在正则表达式中被删除，以便`[name-123456]`被替换为`stringofcode`？

编辑：

```
$string_to_be_replaced = preg_quote($string_to_be_replaced, "~"); 
$content = preg_replace('~\['.$string_to_be_replaced.'\]~', $str_to_replace_with, $content); 
```

这只是返回 [name-123456] ：p

vardump 产生：`string(16) "\[name\-123456\]"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:31:38.073

您的第一个问题可能是您没有将结果分配回去：

```
$content = preg_replace('~...~', $rpl.., $content); 
```

那么你也应该事先逃避`$string_to_be_replaced`使用。无论如何，在您的搜索字符串中都是[`preg_quote`](http://php.net/preg_quote)必需的。`-`

```
$string_to_be_replaced = preg_quote($string_to_be_replaced, "~"); 
```

顺便说一句，还会处理`[`方`]`括号。

如果您不进行任何断言或复杂匹配，`str_replace()`则可能是另一种选择。

# matlab - 未定义的函数'insertObjectAnnotation'

> ID：15053822
> 
> 赞同：1
> 
> 时间：2013-02-24T16:28:30.083
> 
> 标签：matlab, matlab-cvst

我最近安装的`matlab R2012a` 时候我输入`ver`我看到

```
Computer Vision System Toolbox                        Version 5.0        (R2012a) 
```

连同其他工具箱。我想这意味着工具箱已安装？当我尝试跑步时

```
videoOut = insertObjectAnnotation( double(videoFrame), 'rectangle', bbox, 'Face'); 
```

类似的问题[“matlab中未定义函数'insertObjectAnnotation'中的错误”](https://stackoverflow.com/questions/13867635/error-in-undefined-function-insertobjectannotation-in-matlab)建议使用`double`但是当我运行它时我得到

`Undefined function 'insertObjectAnnotation' for input arguments of type 'double'.`

所以我跑`which insertObjectAnnotation`之后我得到`'insertObjectAnnotation' not found.`

这是什么意思，我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:02:19.120

该函数在 R2012b 中`insertObjectAnnotation`被[引入 Matlab](http://www.mathworks.com/help/vision/release-notes.html)。因此，它在您的 Matlab 版本中不可用。

# perl - 为什么即使我安装的 perl 是 5.14，我也必须指定“使用功能：5.1x”？

> ID：15053823
> 
> 赞同：8
> 
> 时间：2013-02-24T16:28:32.333
> 
> 标签：perl

我的机器上安装了 5.14.2，但是当我尝试使用`say`关键字执行打印语句时，它给了我错误。

我已经使用 use 关键字使程序运行无误。

```
#!/usr/bin/perl
use feature ':5.10';
say "hello"; 
```

与 5.010 相比，5.14.2 是最新的，所以它应该默认启用所有这些功能，对吗？那么使用`use`关键字指定版本有什么意义呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T16:39:09.760

Perl 试图保持向后兼容性。现有脚本很可能有名为`say`. 关于 Perl 的某个未来版本是否应该停止这些努力并简化其内部结构，正在进行大量讨论。例如，参见[命名和编号 perl](http://rjbs.manxome.org/rubric/entry/1989)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T16:36:49.150

它可以防止与用 Perl 编写的现有程序发生冲突。

例如，假设我为 Perl 5.6 编写了一个程序，它定义了一个名为`say`.

```
use strict;
use warnings;
sub say { print 1; }
say(); 
```

这工作正常（输出*1*），它仍然适用于包含该`say`功能的 perls。

现在让我们启用本机`say`，看看会发生什么：

```
use v5.14;
use strict;
use warnings;
sub say { print 1; }
say(); 
```

现在它因 *Use of uninitialized value $_ in say at - line 5.* 而失败

您需要`use feature`或`use v5.xx`这样才能安全地加载新功能，即当作者知道他想使用它们时。

# swing - 画布重绘应该自己调用

> ID：15053828
> 
> 赞同：0
> 
> 时间：2013-02-24T16:28:51.790
> 
> 标签：swing, canvas, jpanel, jtabbedpane

我有一个带有 jTabbedPane 的应用程序。jTabbedPane 中有两个选项卡（JPanel）。第一个选项卡包括画布，第二个选项卡包括简单的 JLabel。按钮将矩形绘制到画布中。

在那之前一切都很好。但是，在切换选项卡时，画布会丢失所有内容。它应该自己重新粉刷。

更改选项卡后应该存在矩形。你对这个问题有任何想法吗？

我的按钮代码在这里：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    Graphics g = canvas1.getGraphics();
    g.drawRect(10, 10, 100, 100);
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:36:14.100

首先，您不应该将 AWT 组件放在 Swing 组件中。使用 JComponent 或 JPanel 而不是 Canvas。

其次，不，它不应该重新粉刷自己。单击按钮时，您应该简单地将应该绘制的内容存储在某个变量中，并且`paintComponent()`应该覆盖该方法以绘制存储在该变量中的内容。这样，每次重新绘制组件时，它都会重新绘制最后存储在此变量中的内容。

例如：

```
public class RectangleComponent extends JComponent {

    private boolean shouldPaintRectangle = false;

    public void setShouldPaintRectangle(boolean b) {
        this.shouldPaintRectangle = b;
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        if (shouldPaintRectangle) {
            g.drawRect(10, 10, 100, 100);
        }
    }
} 
```

通常，您永远不应该询问组件的图形并在其上绘画。相反，您应该`paintComponent()`使用作为参数传递的 Graphics 覆盖和绘制组件。

# jquery - 克隆后jQuery datepicker不工作

> ID：15053829
> 
> 赞同：1
> 
> 时间：2013-02-24T16:29:05.393
> 
> 标签：jquery, datepicker, clone

我已经搜索了 SO 并搜索了关于克隆 div 的解决方案，其中一个包含 jQuery Datepicker。我尝试了几次修改“新”克隆代码的尝试，但结果为负。如果有人可以看看并指出我正确的方向，我将不胜感激。

如果您需要更多信息，没问题。`enter code here`

在此先感谢，杰克

```
 $(document).ready(function(){

    $('.my_date').datepicker({    //Datepicker
        dateFormat: 'mm-dd-y',
    }); 

    $('#clonetrigger').click(function(){
        var yourclass=".clonable";              
        var clonecount = $(yourclass).length;   
        var newid = Number(clonecount) + 1;     

        $(yourclass+":first").fieldclone({      
            newid_: newid,                      
            target_: $("#formbuttons"),         
            insert_: "before",                  
            limit_: 4                           
        });
        return false;
    });

});

//The Plugin Script
(function($) {

    $.fn.fieldclone = function(options) { 

        //==> Options <==//
        var settings = {
            newid_ : 0,
            target_: $(this),
            insert_: "before",
            limit_: 0
        };
        if (options) $.extend(settings, options);           

        if( (settings.newid_ <= (settings.limit_+1)) || (settings.limit_==0) ){ 

            //==> Clone <==//
            var fieldclone = $(this).clone();
            var node = $(this)[0].nodeName;
            var classes = $(this).attr("class");

            //==> Increment every input id <==//
            var srcid = 1;
            $(fieldclone).find(':input').each(function(){
                var s = $(this).attr("name");           
                $(this).attr("name", s.replace(eval('/_'+srcid+'/ig'),'_'+settings.newid_)); 
            });

            //==> Locate Target Id <==//
            var targetid = $(settings.target_).attr("id");
            if(targetid.length<=0){
                targetid = "clonetarget";
                $(settings.target_).attr("id",targetid);
            }       

            //==> Insert Clone <==//
            var newhtml = $(fieldclone).html().replace(/\n/gi,"");
            newhtml = '<'+node+' class="'+classes+'">'+newhtml+'</'+node+'>';

            eval("var insertCall = $('#"+targetid+"')."+settings.insert_+"(newhtml)"); 

            newSection.find(".my-date").datepicker();   //Datepicker
        }
    };

})(jQuery); 
```

# ios - UITableView 中的奇怪行为 - 一个单元格显示不同

> ID：15053830
> 
> 赞同：0
> 
> 时间：2013-02-24T16:29:12.260
> 
> 标签：ios, uitableview

我的应用程序中的一个 UITableView 有问题。我将它设置为每个其他表格，但一个单元格始终具有白色背景而不是 [UIColor clearColor]。这就是我实现的方式`tableView:cellForRowAtIndexPath:`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdent = @"NewSessionCell";

    UITableViewCell *cell = [self.tableSubjects dequeueReusableCellWithIdentifier:cellIdent];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdent];
    }

    [cell setAutoresizesSubviews:NO];
    [cell setBackgroundColor:[UIColor clearColor]];

    // set text color and font
    [cell.textLabel setTextColor:[UIColor whiteColor]];
    [cell.textLabel setFont:[UIFont systemFontOfSize:18.0]];

    // set clear background for selected cell
    UIView *backView = [[UIView alloc] initWithFrame:CGRectZero];
    backView.backgroundColor = [UIColor clearColor];
    [cell setSelectedBackgroundView:backView];

    // set highlight text color to dark gray
    float colValue = 0.2;
    [cell.textLabel setHighlightedTextColor:[UIColor colorWithRed:colValue green:colValue blue:colValue alpha:1]];

    // set title
    [cell.textLabel setText:[(self.subjects)[indexPath.row] caption]];

    return cell;
} 
```

这与应用程序中的所有其他表格完全相同，但在此特定表格中，一个单元格始终为白色，如下面的屏幕截图所示。

这发生在我的 iPhone 4S 以及模拟器中。我试图从手机/模拟器中删除应用程序，重新启动 XCode，清理并重建解决方案，没有任何改变。

![带有白色单元格的表格的屏幕截图](../Images/fe7b4ca394ccb13079e120b02b6c83cf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:14:00.167

我不确定这是如何或为什么会这样，但问题与`setBackgroundColor:`方法有关。如果我完全删除它，问题仍然存在，但是将其设置为任何颜色，除了*不会*`[UIColor clearColor]`更改背景颜色但单元格显示正确。

# html - Appcache清单不起作用

> ID：15053832
> 
> 赞同：0
> 
> 时间：2013-02-24T16:29:17.720
> 
> 标签：html, html5-appcache

我有以下 appcache 清单：

```
CACHE MANIFEST

# Cache Manifest timestamp: 1361723106
CACHE:
offline.html
offline2.html
offline.manifest.php

NETWORK:
*

FALLBACK:
/ offline.html 
```

我在本地安装的服务器上使用它。因此，当我加载链接到此清单文件的 index.html 文件时，Chrome 中的控制台显示所有文件都已正确缓存。当我现在关闭本地服务器并尝试再次访问 index.html 文件时，我会看到该 index.html 文件的内容。我期待被“转发”到offline.html。我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:01:09.610

尽管您说的是“index.html”文件，但我假设您正在访问这样的资源：`http://yourlocalservername/`.

链接到 appcache 清单的资源（在本例中为“/”）始终包含在应用程序缓存中。回退适用于不在缓存中的资源，因此您得到的结果是预期的。

在访问先前缓存的资源时显示“离线指示器”的唯一方法是确保缓存的资源包含实际检查浏览器是否离线的 javascript 代码。您可以检查`navigator.onLine`和/或检查`XMLHttpRequest`您的服务器是否可以访问（并且正常运行）。

# ejb - 托管 Bean 的 EJB 可见性

> ID：15053833
> 
> 赞同：0
> 
> 时间：2013-02-24T16:29:23.360
> 
> 标签：ejb

我有 Enterprise Java Bean，它是有状态的，它包含当前用户实例我想从几个不同的烘焙 bean（SessionScoped 托管 bean）中获取这个实例，但是当我使用时：

```
@EJB
UserSessionBean usb;

(...)
usb.getUser(); 
```

我在 ManagedBean 中收到空指针异常（似乎每个 managedbean 都在获取 UserSessionBean EJB 的新实例。为什么会这样？我认为该 bean 的一个实例将在该会话的所有 Bean 之间共享......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T13:00:30.167

如果 UserSessionBean 是实现类还是接口？
我认为您应该使用该接口来创建 EJB 的实例。

还可以查看 @statefull 和 @singlton 注释。

# python - 在 Python pandas 中拆分和连接数据帧以使用 rpy2 进行绘图

> ID：15053834
> 
> 赞同：3
> 
> 时间：2013-02-24T16:29:25.143
> 
> 标签：python, numpy, pandas, rpy2

我有一个关于 Python 中的 pandas 数据框的问题：我有一个大数据框`df`，我将它分成两个子集，`df1`并且`df2`. `df1`并且`df2`一起不构成所有`df`，它们只是它的两个互斥子集。我想用 rpy2 在 ggplot 中绘制它，并根据它们是否来自`df1`或显示在图中的变量`df2`。ggplot2 需要一个融化的数据框，所以我必须创建一个新的数据框，其中有一列说明每个条目是否来自`df1`or `df2`，以便可以将此列传递给 ggplot。我试着这样做：

```
# add labels to df1, df2
df1["label"] = len(df1.index) * ["df1"]
df2["label"] = len(df2.index) * ["df2"]
# combine the dfs together
melted_df = pandas.concat([df1, df2]) 
```

现在它可以绘制为：

```
# plot parameters from melted_df and colour them by df1 or df2
ggplot2.ggplot(melted_df) + ggplot2.ggplot(aes_string(..., colour="label")) 
```

我的问题是是否有一种更简单、更快捷的方法来做到这一点。ggplot 需要不断熔化/不熔化 dfs，总是手动将熔化的形式添加到 df 的不同子集似乎很麻烦。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:03:02.487

当然，您可以使用以下方法进行简化：

```
df1['label'] = 'df1' 
```

（而不是`df1["label"] = len(df1.index) * ["df1"]`。）

如果您发现自己经常这样做，为什么不创建自己的函数呢？（像这样）：

```
plot_dfs(dfs):
    for i, df in enumerate(dfs):
        df['label'] =  'df%s' % i+1 # note: this *changes* df
    melted_df = pd.concat(dfs)

    # plot parameters from melted_df and colour them by df1 or df2
    ggplot2.ggplot(melted_df) + ggplot2.ggplot(aes_string(..., colour="label"))

    return # the melted_df or ggplot ? 
```

# c++ - 该声明在哪个编译器下有效？

> ID：15053839
> 
> 赞同：0
> 
> 时间：2013-02-24T16:29:47.417
> 
> 标签：c++

我一直在尝试使用此声明，但无论是在 Visual Studio 2012 还是 CodeBlocks（使用 GCC）上，它都不会构建。

（来自[http://netghost.narod.ru/gff2/graphics/summary/fli.htm](http://netghost.narod.ru/gff2/graphics/summary/fli.htm)）

```
typedef struct _ColormapChunk
{
  CHUNKHEADER Header;        /* Header for this chunk */
  WORD NumberOfElements;     /* Number of color elements in map */
  struct _ColorElement       /* Color element (one per NumberOfElements) */
  {
   BYTE SkipCount;           /* Color index skip count */
   BYTE ColorCount;          /* Number of colors in this element */
   struct _ColorComponent    /* Color component (one /'ColorCount') */
   {
    BYTE Red;                /* Red component color */
    BYTE Green;              /* Green component color */
    BYTE Blue;               /* Blue component color */
   } ColorComponents[ColorCount];
  } ColorElements[NumberOfElements];
} COLORMAPCHUNK; 
```

Visual Studio：错误 C2327：'_ColormapChunk::_ColorElement::ColorCount'：不是类型名称、静态或枚举器

CodeBlocks：错误：无效使用非静态数据成员'_ColormapChunk::_ColorElement::ColorCount'

在这些问题上，解释了在 C++ 11 下是可能的：

[为什么我不能在类中初始化非常量静态成员或静态数组？](https://stackoverflow.com/questions/9656941/why-i-cant-initialize-non-const-static-member-or-static-array-in-class)

[声明另一个成员时可以使用一个成员的大小吗？](https://stackoverflow.com/questions/12508771/can-you-use-the-sizeof-one-member-when-declaring-another-member)

所以在 CodeBlocks 我勾选了这个选项：

*让 g++ 遵循 C++11 ISO 语言标准 [-std=c++11]*

在 VS 上我找不到这样的选项，在 CodeBlocks 上它仍然没有编译。

这个声明可以这样使用还是需要一些更改？如果是这样，哪些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T16:32:30.613

该文档是描述文件格式的*类 C语法。*由于“可变长度”字段，它故意不可编译。

# mysql - 使用多个语句的 MySQL 存储过程存在问题

> ID：15053842
> 
> 赞同：1
> 
> 时间：2013-02-24T16:30:07.750
> 
> 标签：mysql, stored-procedures

我在使用 MySQL 存储过程时遇到了非常糟糕的情况，我无法在数据库中创建此过程（MySQL 5.5.27）

我想知道为什么它拒绝我的变量声明、多选和 if else（希望是一些代码错误）我正在粘贴我的代码！

```
DELIMITER $$

DROP PROCEDURE IF EXISTS EditEnterprise

$$

CREATE PROCEDURE  EditEnterprise(    
    IN pEnterpriseId                VARCHAR(32),    
    IN pEnterpriseName              VARCHAR(64)    
) 

/* declare the new variables */    
DECLARE nEnterpriseId               VARCHAR(32);    
DECLARE nEnterpriseName             VARCHAR(64); 

/* declare the old variables */    
DECLARE oEnterpriseId               VARCHAR(32);    
DECLARE oEnterpriseName             VARCHAR(64);

BEGIN 

SET autocommit = 0;    

/* get the old variables */    
SELECT     
    Enterprise_ID = oEnterpriseId,    
    Enterprise_Name = oEnterpriseName    
FROM     
    enterprise    
WHERE    
    Enterprise_ID = pEnterpriseId;    

/* set the variables with the new inputs */  
IF pEnterpriseName = NULL    
    SET nEnterpriseName = oEnterpriseName    
ELSE IF pEnterpriseName = ''    
    SET oEnterpriseName = NULL    
ELSE
    SET nEnterpriseName = pEnterpriseName    

UPDATE enterprise    
SET     
    Enterprise_Name = nEnterpriseName    
WHERE Enterprise_ID = pEnterpriseId;

COMMIT;

END $$

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:40:31.163

`DECLARE`在Mysql （与 Oracle 不同）中，`BEGIN`

您的代码应该是：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS EditEnterprise$$

CREATE PROCEDURE  EditEnterprise(
    IN pEnterpriseId                VARCHAR(32),
    IN pEnterpriseName              VARCHAR(64)
) 
BEGIN 
/* declare the new variables */
DECLARE nEnterpriseId               VARCHAR(32);
DECLARE nEnterpriseName             VARCHAR(64);

/* declare the old variables */
DECLARE oEnterpriseId               VARCHAR(32);
DECLARE oEnterpriseName             VARCHAR(64);

SET autocommit = 0;

/* get the old variables */
SELECT 
    Enterprise_ID := oEnterpriseId,
    Enterprise_Name := oEnterpriseName
FROM 
    enterprise
WHERE
    Enterprise_ID = pEnterpriseId;

/* set the variables with the new inputs */

IF pEnterpriseName IS NULL THEN
    SET nEnterpriseName = oEnterpriseName;
ELSEIF pEnterpriseName = '' THEN
    SET oEnterpriseName = NULL;
ELSE
    SET nEnterpriseName = pEnterpriseName;
END IF;

UPDATE enterprise SET 
    Enterprise_Name = nEnterpriseName
WHERE Enterprise_ID = pEnterpriseId;

COMMIT;

END$$

DELIMITER ; 
```

我还添加了缺失的`;`,`THEN`和`END IF`关键字。另外，请注意，您可能在此行有错字：

```
SET oEnterpriseName = NULL; 
```

你可能的意思是：

```
SET nEnterpriseName = NULL; 
```

* * *

现在我认为你应该重新考虑你的存储过程。事实上，所有这些都可以在一个 SQL 查询中完成。你真的需要一个存储过程吗？除非您有限制性拨款政策，否则这可能是多余的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T03:50:38.303

SP中有一些错误，应该是这样的

```
DELIMITER $$
DROP PROCEDURE IF EXISTS EditEnterprise
$$
CREATE PROCEDURE  EditEnterprise(
    IN pEnterpriseId                VARCHAR(32),
    IN pEnterpriseName              VARCHAR(64)
)

BEGIN

/* declare the new variables */
DECLARE nEnterpriseId               VARCHAR(32);
DECLARE nEnterpriseName             VARCHAR(64);

/* declare the old variables */
DECLARE oEnterpriseId               VARCHAR(32);
DECLARE oEnterpriseName             VARCHAR(64);

SET autocommit = 0;

/* get the old variables */
SELECT 
    @oEnterpriseID := Enterprise_ID,
    @oEnterpriseName := Enterprise_Name
FROM 
    enterprise
WHERE
    Enterprise_ID = pEnterpriseId;

/* set the variables with the new inputs */
IF pEnterpriseName = NULL THEN  
    SET @nEnterpriseName = @oEnterpriseName;
ELSEIF pEnterpriseName = '' THEN   
    SET @oEnterpriseName = NULL;
ELSE
    SET @nEnterpriseName = pEnterpriseName;
END IF;

UPDATE enterprise
SET 
    Enterprise_Name = nEnterpriseName,
    Enterprise_Established_Date = nEnterpriseCreateDate,
    Enterprise_Description = nEnterpriseDetails,
    Enterprise_Type = nEnterpriseType,
    Enterprise_Status = nEnterpriseStatus
WHERE Enterprise_ID = pEnterpriseId;
COMMIT;

END $$
DELIMITER ; 
```

需要指出的一些错误

*   它的 ELSEIF 而不是 ELSE IF 用于多个条件

*   在声明一个变量“DECLARE myvar VARCHAR(32)”之后，如果我们不使用 SET 命令，我们需要使用 := 为其赋值。

# android - 带有 wrap_content 的视图的默认宽度和高度

> ID：15053843
> 
> 赞同：2
> 
> 时间：2013-02-24T16:30:14.827
> 
> 标签：android, android-view, android-ui

当我创建一个自定义`View`并通过调整大小来绘制它时`View.onSizeChanged()`，默认大小是`View`多少？我的布局已将`android:layout_width`and设置`android:layout_height`为`wrap_content`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:39:03.130

默认大小为 0。除非它有子视图（并且派生自定义 onLayout 的布局类），在这种情况下，默认大小是其子视图的总和。如果要在不仅仅是子视图集合的自定义视图上使用 wrap_content，则需要覆盖 onLayout 和/或 onMeasure。

# jquery - 使用相对位置 div 重新调整大小

> ID：15053847
> 
> 赞同：1
> 
> 时间：2013-02-24T16:30:40.490
> 
> 标签：jquery, html, css, jscript

我一直在玩这个有点，不能完全弄清楚所以......

我有一个本质上是滑动侧边栏的东西。

初始状态如下所示。

```
#sidebar {
    position: fixed,
    width: 200px
} 
```

另一种状态是：

```
#sidebar {
    position: fixed,
    width: 200px,
    left: -190px
} 
```

我希望另一个在它的右边，填充屏幕上的剩余空间。这也应该是动态的，所以当#sidebar 被切换时，它会一直调整大小以填充空间。

注意：#sidebar 的 css 更改也使用 $.animate 进行动画处理，因此它应该在侧边栏重新调整大小时重新调整大小。

有没有用 CSS 做到这一点的好方法。或者，是否有一个用于滑入/滑出侧边栏的好的 jscript/jquery 库。我看了看，但找不到，所以我开始自己滚动。

我能想到的唯一其他方法是使用 jscript 手动重新调整另一个大小，同时重新定位#sidebar。但这似乎过头了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:43:29.387

这是一个例子：

CSS：

```
#sidebar
{
    position: fixed;
    width: 200px;
    background-color:#9cf;
    left:0;
}
#sidebar.tucked { left: -190px; }
#content
{
    margin-left:200px;
}
#content.tucked { margin-left:10px; } 
```

Javascript：

```
$(function()
{
    $('#sidebar').on("click", function()
    {
        $('#sidebar, #content').toggleClass("tucked", 1000);
    });
}); 
```

小提琴：http: [//jsfiddle.net/w9aWp/](http://jsfiddle.net/w9aWp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T16:45:18.527

我根据我从事的类似项目整理了这个小提琴：http: [//jsfiddle.net/DrdHJ/](http://jsfiddle.net/DrdHJ/)

基本上我只有两列：

```
<div id="sidebar">

    <a class="resize" data-width="300">Large</a>
    <br>
    <a class="resize" data-width="200">Small</a>

</div>

<div id="main"></div> 
```

`#sidebar`是您的“滑动”列，`#main`是包含内容的主要块。

然后对于 CSS，我有以下内容：

```
html, body { width: 100%; height: 100%; }

#sidebar { 
    width: 200px;
    height: 100%;
    float: left;
    background-color: red;
}

#main {
    width: auto;
    height: 100%;
    margin-left: 200px;
    background-color: blue;
} 
```

需要注意的重要一点是，`margin-left`on`#main`是保持不变的。

然后对于 JavaScript，我有以下内容：

```
$('.resize').on('click',function(){

    var width = $(this).data('width');

    $('#sidebar').css('width',width+'px');
    $('#main').css('margin-left',width+'px');

}); 
```

它监听事件以调整大小，然后根据单击的链接的属性调整 的宽度`#sidebar`和左边距的偏移量。这显然可以调整以替换with 。`#main``data-width``css()``animate`

# php - PHP 数组无法访问

> ID：15053850
> 
> 赞同：-2
> 
> 时间：2013-02-24T16:31:01.033
> 
> 标签：php, mysql, arrays

基本上，我正在尝试使用我找到的类从数据库中获取用户数据，它正在解析数组中的所有数据，如下面的函数所示：

```
public function Get($field = NULL) {
        if ($field == NULL)
        {
            $data = array();
            while ($row = mysql_fetch_array($this->last_query))
            {
                $data[] = $row;
            }
        } 
        else
        {
            $row = mysql_fetch_array($this->last_query);
            $data = $row[$field];
        }
        return $data;
} 
```

这是我用来调用这个函数的 PHP 代码

```
if($_SERVER['REQUEST_METHOD'] == 'POST'){
    if($_SESSION['csrfToken'] == $_POST['csrfToken']) {
        $email = $_POST['email'];
        $password = $Security->Salt($Security->secParam($_POST['password']));
        $DB->Query("SELECT * FROM `table` WHERE `email` = '$email' AND `password` = '$password'");
        if($DB->num_rows() > 0) {
            $results = $DB->Get();
        } else {
            echo "Account not found";
        }
    }
} 
```

如果我在 $results 上执行 var_dump，它会显示以下内容

```
array(1) { 
    [0]=> array(8) { 
        [0]=> string(1) "1" ["id"]=> string(1) "1" 
        [1]=> string(35) "email@email.com" ["email"]=> string(35) "email@email.com" 
        [2]=> string(32) "4f14dfef1efe0de64e2b176eac6051cd" ["password"]=> string(32) "4f14dfef1efe0de64e2b176eac6051cd" 
        [3]=> string(1) "1" ["status"]=> string(1) "1" 
    } 
} 
```

我怎样才能访问这些数据？我尝试通过执行以下操作来调用它

```
$email = $results['email'];
echo $email; 
```

但它没有显示任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:36:01.393

即使在这种情况下只有一个结果（我猜？）该数组支持多个。

因此，找到第一个结果，然后从中获取电子邮件：

```
echo $results[0]['email'];
//   ^^^^^^^^^^^
//   first result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:33:46.263

您需要跟踪数组的工作方式。首先你有 array(1)，然后进入另一个 vars，如“email”或 1。

```
array(1) {  <---- THIS IS ARRAY OCCURED FOR FIRST "0" ARRAY. 
```

关于什么

```
 this
              \/
echo $results[0]["email"]; ? 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-24T16:38:31.273

```
if($_SERVER['REQUEST_METHOD'] == 'POST' && $_SESSION['csrfToken'] == $_POST['csrfToken']) {
    $password = $Security->Salt($Security->secParam($_POST['password']));
    $password = $DB->quoteStr($password);
    $email = $DB->quoteStr($_POST['email']);
    $DB->Query("SELECT * FROM `table` WHERE `email` = $email AND `password` = $password");
    return $DB->GetRow();
}

public function GetRow() {
    return mysql_fetch_array($this->last_query);
}
public function quoteStr($str) {
    return "'".mysql_real_escape_string($str)."'";
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-24T16:56:11.337

[Marin Sagovac](https://stackoverflow.com/users/1195557/marin-sagovac)的问题就是答案。

为了进一步分解，您的 var_dump 输出显示 $results 是一个嵌套数组。输出的第一部分：

```
array(1) { 
[0]=> 
```

显示 $results 由一个包含 1 个元素的数组组成，索引为 0，因为这是 PHP 开始索引的地方。这是 Marin 回复的 $results[0] 部分。

$results 数组的元素 0 由一个包含 8 个元素的数组组成。

```
[0]=>array(8) { 
[0]=> string(1) "1" ["id"]=> string(1) "1"  
[1]=> string(35) "email@email.com" ["email"]=> string(35) "email@email.com" 
```

尽管只有 4 个实际结果，即索引 1-4，但每个结果都存在两次，因此可以通过索引或键访问它们。与索引相反，可以通过唯一键访问的数组称为关联数组。

因此，在这种情况下，两者都将返回相同的值：

```
echo $results[0]["email"];
echo $results[0][1]; 
```

[print_r](http://php.net/manual/en/function.print-r.php)函数也可以工作，而不是 var_dump 。

# ios - CALayer 帧值即使在从超级层中移除后也会导致动画

> ID：15053854
> 
> 赞同：0
> 
> 时间：2013-02-24T16:31:26.293
> 
> 标签：ios, uiview, uiviewcontroller, calayer, quartz-core

进入 CALayer 世界：

我正在创建一个无论设备方向如何都需要保持在视图中间的层。有人可以告诉我为什么我的图层在从旧位置旋转后会动画，即使我将它从超级图层中移除？我知道 frame 和 borderWidth 属性是可动画的，但是即使从 superLayer 中删除它们也可以动画吗？

如果从 superLayer 中删除不会重置图层属性，因为图层对象尚未释放（好吧，我可以理解），我如何模仿新显示图层的行为，以便边框不会像从旋转后的旧位置。

我创建了这个示例项目 - 如果您愿意，可以剪切和粘贴。您只需要链接石英核心库。

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()
@property (nonatomic,strong) CALayer *layerThatKeepAnimating;
@end

@implementation ViewController

-(CALayer*) layerThatKeepAnimating
{
  if(!_layerThatKeepAnimating)
  {
    _layerThatKeepAnimating=[CALayer layer];
    _layerThatKeepAnimating.borderWidth=2;
  }
return _layerThatKeepAnimating;
}

-(void) viewDidAppear:(BOOL)animate
{    
self.layerThatKeepAnimating.frame=CGRectMake(self.view.bounds.size.width/2-50,self.view.bounds.size.height/2-50, 100, 100);
  [self.view.layer addSublayer:self.layerThatKeepAnimating];
}

-(void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
  [self.layerThatKeepAnimating removeFromSuperlayer];
}

-(void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
  self.layerThatKeepAnimating.frame=CGRectMake(self.view.bounds.size.width/2-50,self.view.bounds.size.height/2-50, 100, 100);
  [self.view.layer addSublayer:self.layerThatKeepAnimating];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:52:00.740

听起来很奇怪，答案是将代码移入

willRotateToInterfaceOrientation 到视图WillLayoutSubviews

```
-(void) viewWillLayoutSubviews
{
    self.layerThatKeepAnimating.frame=CGRectMake(self.view.bounds.size.width/2-50,self.view.bounds.size.height/2-50, 100, 100);
    [self.view.layer addSublayer:self.layerThatKeepAnimating];
} 
```

看起来这里的任何图层“重绘”都是在没有动画的情况下发生的，即使图层属性是可动画的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:05:06.863

问题不是你想的那样；当您从超级视图中删除该层时，它实际上并没有被取消，因为您保留了对它的强引用。您的代码不会在 getter 中输入 if 语句来创建新层，因为它在第一次之后永远不会为零：

```
if(!_layerThatKeepAnimating)
  {
    _layerThatKeepAnimating=[CALayer layer];
    _layerThatKeepAnimating.borderWidth=2;
  } 
```

因此，要么将您对 vc 中层的引用更改为弱：

```
@property (nonatomic, weak) CALayer * layerThatKeepAnimating; 
```

或通过以下方式明确删除它：

```
-(void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
  [self.layerThatKeepAnimating removeFromSuperlayer];
  self.layerThatKeepAnimating = nil;
} 
```

我建议您使用第一个选项，因为当您向视图添加图层（或子视图）时，您已经获得了一个强大的参考。这就是为什么总是建议这样做：

```
@property (weak, nonatomic) IBOutlet UIView *view; 
```

但不是（强，非原子）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-13T14:01:42.917

```
[self.sublayerToRemove removeFromSuperlayer];
self.sublayerToRemove = nil; 
```

# java - 如何重置 JTable

> ID：15053855
> 
> 赞同：2
> 
> 时间：2013-02-24T16:31:33.060
> 
> 标签：java, swing, jtable, jpanel, jscrollpane

我有一个关于`JScrollPane`和 的问题`JTable`。

我已将 a 添加`JTable`到 a `JScrollPane`，并将 the 添加`JScrollPane`到`JPanel`. 当我单击“显示”按钮时，`JTable`将填充数据库中的内容。

我还有另一个按钮`reset`，单击它会删除 和 的`JTable`内容`JScrollPane`。它应该是这样做的，但是发生的情况是，即使在单击按钮之后， the`JTable`和 the 的所有内容`JScrollPane`仍然存在。

我用过`revalidate()`,`reinstantiate()`等，但没用。我如何使它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T21:50:57.107

假设您使用的是 DefaultTableModel，那么您只需执行以下操作：

```
model.setRowCount(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:39:07.700

为了从 JTable 中删除一行，您需要从底层[TableModel](http://java.sun.com/javase/6/docs/api/javax/swing/table/TableModel.html)中删除目标行。[例如，如果您的 TableModel 是DefaultTableModel](http://java.sun.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html)的一个实例，您可以通过执行以下操作删除一行：

```
((DefaultTableModel)myJTable.getModel()).removeRow(rowToRemove); 
```

**更新 2**

要知道行并从 jtable 中删除

```
 int rows = myJTable.getRowCount();
 for(int i=0;i<rows;i++)
 ((DefaultTableModel)myJTable.getModel()).removeRow(i); 
```

# date - 从groovy中的月份名称获取月份编号

> ID：15053856
> 
> 赞同：3
> 
> 时间：2013-02-24T16:31:33.680
> 
> 标签：date, groovy

是否有内置函数或 API 可用于将月份名称（如 FEB、2 月）转换为月份编号 02？

我正在从视图传递到控制器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T16:46:04.630

调用`Date.parse`with`MMM`作为格式字符串。这将为您提供一个 Date 对象，该对象提供对月份编号的访问。例子：

```
def d = Date.parse('MMM', 'Feb')
def num = d.format('MM') as int
assert num == 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T16:40:32.243

你可以做：

```
String monthString = 'Feb'

int month = Calendar.instance.with {
  time = new Date().parse( "MMM", monthString )
  it[ MONTH ]
}

// Feb is 1 of course, not 2 as in your question
assert month == 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T16:38:01.680

您可以使用以下常规解析函数将月份名称解析为日期`Date`：

```
new Date().parse("MMM", "Feb") 
```

# ios - 了解iOS中用户位置的后台跟踪

> ID：15053859
> 
> 赞同：2
> 
> 时间：2013-02-24T16:31:42.343
> 
> 标签：ios, background, core-location, cllocationmanager

当应用程序进入后台时，我需要不断获取用户的位置更新，正如我在 Apple 的文档中发现的那样，这是允许实现的长期运行的后台任务之一。当通知位置更新时，我还需要进行一些处理和网络调用以向服务器发送一些信息。概括地说，我想做的是这样的：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
   bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
      [application endBackgroundTask:bgTask];
      bgTask = UIBackgroundTaskInvalid;
   }];

   // Background task        
   dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
      NSLog(@"Background time remaining: %f seconds (%d mins)",
     [[UIApplication sharedApplication] backgroundTimeRemaining], 
     (int)([[UIApplication sharedApplication] backgroundTimeRemaining] / 60));

      // Need to get data from database here

      // Finished
      if (bgTask != UIBackgroundTaskInvalid) {
         [application endBackgroundTask:bgTask];
         bgTask = UIBackgroundTaskInvalid;
      }

   });

   // Start location manager
   locationManager = [[CLLocationManager alloc] init];
   if ([CLLocationManager locationServicesEnabled]) {          
      locationManager.delegate = self;
      locationManager.distanceFilter = 20;
      locationManager.desiredAccuracy = kCLLocationAccuracyBest;
      [locationManager startUpdatingLocation];
   }
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
   bgTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
      [[UIApplication sharedApplication] endBackgroundTask:bgTask];
      bgTask = UIBackgroundTaskInvalid;
   }];

   dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

      // Want to perform some data processing here, including concurrent tasks 
      // and several network calls to get and send data to server

      [self locationProcessingCompleted];

   });
}

- (void)locationProcessingCompleted
{
   // Check results. If needed, some more data processing and several network 
   // calls to send data to server

   // Close background task
   if (bgTask != UIBackgroundTaskInvalid) {
      [[UIApplication sharedApplication] endBackgroundTask:bgTask];
      bgTask = UIBackgroundTaskInvalid;
   }
} 
```

我没有找到任何关于位置服务的长期运行后台任务的代码示例，对此我有几个问题：

a) 是否有必要在`dispatch_async`队列中执行所有后台代码？换句话说，是否所有代码都`applicationDidEnterBackground:`异步执行，包括位置管理器设置？

b)`[[UIApplication sharedApplication] backgroundTimeRemaining]`返回一个很长的值。这个时间不应该是10分钟左右吧？

c）我想做：执行初始有限长度任务，开始位置更新，然后每次`didUpdateToLocation:`触发时执行一些其他有限长度任务。我已经设置了in的`location`值。我的方法正确吗？我是否会无限期地更新位置，然后我是否可以在每次收到更新时执行少于 10 分钟的有限长度任务？`UIBackgroundModes``Info.plist`

拜托，我需要帮助解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:37:15.477

您所要做的就是在“所需的后台模式”下添加“用于位置更新的应用程序寄存器”，您可以在文本编辑器中编辑 plist 文件并添加以下代码，也可以使用 xcode 添加所需的后台模式。

```
<key>UIBackgroundModes</key>
<array>
    <string>location</string>
</array> 
```

将调用 didUpdateToLocation 方法（即使您的应用程序在后台）。您可以在此方法调用的基础上执行任何操作...

Xcode 的快照

![Xcode 的快照](../Images/4131cab45c7acfa149e1f804c0f7a426.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T00:21:11.913

免责声明：我为 Cintric 工作

我们还希望能够在后台准确跟踪用户的位置（即使在应用程序被杀死之后）。我们花了很长时间解决这个问题，特别是关注电池消耗。

我们发布了一篇很棒的博客文章，介绍了我们如何解决它。[http://www.blog.cintric.com/?p=121](http://www.blog.cintric.com/?p=121)并且还免费提供拖放 SDK 解决方案。只需一行代码，您就可以让它在后台持续跟踪位置，并且只使用 1% 的电池。此外，您可以将一个类设置为它的委托，以便您可以将信息发送到您的服务器（包括在后台，而无需使用后台任务 api）。

您可以下载 .framework 文件，将其拖到您的项目中并使用一行代码进行初始化： `[CintricFind initWithApiKey:@"YOUR_API_KEY_HERE" andSecret:@"YOUR_SECRET_HERE"];`

您可以免费获得 API 密钥。这里有解释一切的文档：[https ://www.cintric.com/docs/ios](https://www.cintric.com/docs/ios)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:58:56.753

根据您提供的代码，您在 applicationDidEnterBackground 上分配 LocationManager，我建议您在 didFinishLaunchingWithOptions 方法中分配 LocationManager，然后在 applicationDidEnterBackground 方法中调用 startUpdatingLocation 方法。

您可能还需要在 applicationWillEnterForeground 方法中调用 stopUpdatingLocation （如果您不需要在应用程序处于前台时接收位置更新）。

提示：不要长时间以最佳精度启用 GPS，因为它会很快耗尽您的电池（根据我的经验，在 3 到 4 小时内）。

# android - 滚动视图不起作用

> ID：15053861
> 
> 赞同：1
> 
> 时间：2013-02-24T16:32:09.943
> 
> 标签：android, android-layout, user-input

（此处的所有屏幕截图：http: [//imgur.com/a/uSQEe](http://imgur.com/a/uSQEe)）您好，我正在为《使命召唤：黑色行动 2》开发完整指南。我已经基于并使用 ActionBarSherlockLibrary 和 SlidingMenu 库构建`ScrollViews`了`GridViews`布局: 它在 Android 4.0+ 中运行良好。但我对旧版本 Android 中的 Scroll（ScrollViews 和 GridViews）有疑问。 **首先，我在我的 Corby 智能手机（Android 2.2）上对其进行了测试，而 ScrollView 根本不起作用。其次，我在 Android 2.3 模拟器上对其进行了测试：同样的故障。**

这是此活动基于 GridView 的 Java 代码

```
 public class MainActivity extends SherlockActivity {
        final String pacchetto_app_prenium = Strings.PreniumPackage;
    final String prenium = Strings.prenium;
    final String free = Strings.free;
    private String LicenzaCaricata;

    private MissionsGridviewAdapter mAdapter1;
    private ArrayList<String> listMaps1;
    private ArrayList<Integer> listImages1;
    private GridView gridView1;

    private static SlidingMenu menu;

    final static String pyrrhycvictory  = "Pyrrhic Victory";
    final static String celerium  = "Celerium";
    final static String oldwounds  = "Old Wounds";
    final static String timeandfate  = "Time And Fate";
    final static String fallenangel  = "Fallen Angel";
    final static String karma  = "Karma";
    final static String sufferwithme  = "Suffer With Me";
    final static String achillesveil  = "Achille's Veil";
    final static String odysseus  = "Odysseus";
    final static String cordisdie  = "Cordis Die";
    final static String judgmentday  = "Judgment Day";
    final static String strikeforcetraining  = "(SF) Strike Force Training";
    final static String fobspectre  = "(SF) FOB Spectre";
    final static String shipwreck  = "(SF)Shipwreck";
    final static String ied  = "(SF)I.E.D.";
    final static String secondchange  = "(SF)Second Change";
    final static String dispatch  = "(SF)Dispatch";

    String valoreOttenuto;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.c_missions);
        prepareList();

        AdView adView = (AdView) this.findViewById(R.id.adView);
        adView.loadAd(new AdRequest());

        menu = new SlidingMenu(context);
        menu.setMode(SlidingMenu.LEFT);
        menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
        menu.setShadowWidthRes(R.dimen.shadow_width);
        menu.setShadowDrawable(R.drawable.shadow);
        menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
        menu.setFadeDegree(0.35f);
        menu.attachToActivity(activity, SlidingMenu.SLIDING_CONTENT);
        menu.setMenu(R.layout.main_slidingmenu);

        gridView1 = (GridView) findViewById(R.id.gridView1);
        mAdapter1 = new MissionsGridviewAdapter(this, listMaps1, listImages1);
        gridView1.setAdapter(mAdapter1);

        gridView1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {
                valoreOttenuto = mAdapter1.getItem(position);
                if (valoreOttenuto.equals(pyrrhycvictory)) {
                    startClasse(CMpyrrhicVictory.class);
                } else if (valoreOttenuto.equals(celerium)) {
                    startClasse(CMcelerium.class);
                } else if (valoreOttenuto.equals(oldwounds)) {
                    startClasse(CMoldwounds.class);
                } else if (valoreOttenuto.equals(timeandfate)) {
                    Controllo(CMtime_and_fate.class);
                } else if (valoreOttenuto.equals(fallenangel)) {
                    Controllo(CMfallenangel.class);
                } else if (valoreOttenuto.equals(karma)) {
                    Controllo(CMkarma.class);
                } else if (valoreOttenuto.equals(sufferwithme)) {
                    Controllo(CMsufferwithme.class);
                } else if (valoreOttenuto.equals(achillesveil)) {
                    Controllo(CMachillesveil.class);
                } else if (valoreOttenuto.equals(achillesveil)) {
                    Controllo(CMachillesveil.class);
                } else if (valoreOttenuto.equals(cordisdie)) {
                    Controllo(CMcordisdie.class);
                } else if (valoreOttenuto.equals(judgmentday)) {
                    Controllo(CMjudgmentday.class);
                } else if (valoreOttenuto.equals(strikeforcetraining)) {
                    Controllo(CMSstrikeforcetraining.class);
                } else if (valoreOttenuto.equals(fobspectre)) {
                    Controllo(CMSfobspectre.class);
                } else if (valoreOttenuto.equals(shipwreck)) {
                    Controllo(CMSshipwreck.class);
                } else if (valoreOttenuto.equals(ied)) {
                    Controllo(CMSied.class);
                } else if (valoreOttenuto.equals(secondchange)) {
                    Controllo(CMSsecondchange.class);
                } else if (valoreOttenuto.equals(dispatch)) {
                    Controllo(CMSdispatch.class);}
            }
        });

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        getSupportActionBar().setSubtitle("Campaign/");
        getSupportActionBar().setTitle("Missions");

        // START SLIDING MENU CONTROL
        Button c_missions = (Button) findViewById(R.id.c_missions);
        c_missions.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                             menu.toggle();
            }
        });

        Button c_intels = (Button) findViewById(R.id.c_allintels);
        c_intels.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                startClasse(Cintels.class);
            }
        });

        Button m_classes = (Button) findViewById(R.id.m_classes);
        m_classes.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                startClasse(Mclasses.class);
            }
        });

        Button m_scorestreaks = (Button) findViewById(R.id.m_scorestreaks);
        m_scorestreaks.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                startClasse(Mscorestreaks.class);
            }
        });

        Button m_maps = (Button) findViewById(R.id.m_maps);
        m_maps.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                startClasse(Mmaps.class);
            }
        });

        Button m_ranks = (Button) findViewById(R.id.m_ranks);
        m_ranks.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                startClasse(Mranks.class);
            }
        });

        Button m_emblems = (Button) findViewById(R.id.m_emblems);
        m_emblems.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                startClasse(Memblems.class);
            }
        });

        Button m_callingcards = (Button) findViewById(R.id.m_callingcards);
        m_callingcards.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                startClasse(Mcallingcards.class);
            }
        });

        Button z_weapons = (Button) findViewById(R.id.z_weapons);
        z_weapons.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                startClasse(Zweapons.class);
            }
        });

        Button z_maps = (Button) findViewById(R.id.z_maps);
        z_maps.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                startClasse(Zmaps.class);
            }
        }); };

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getSupportMenuInflater().inflate(R.menu.mainactivity_actionbar, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
                        menu.toggle();
            break;
        case R.id.settings_button:
            startClasse(SettingsActivity.class);
            break;
        case R.id.buy_button:
            BuyPRO();
            break;
        default:
            return super.onOptionsItemSelected(item);
        }
        return true;
    }

    private void startClasse(Class<?> ClasseDaAvviare) {
        Intent intent = new Intent(this, ClasseDaAvviare);
        startActivity(intent);
    }

    private void BuyPRO() {
        startActivity(new Intent(Intent.ACTION_VIEW,
                Uri.parse(Strings.LinkProMarket)));
    }

    private void Dialogo() {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(Strings.DialogTitle);
        builder.setIcon(R.drawable.icona)
                .setMessage(Strings.DialogMessage)
                .setCancelable(true)
                .setPositiveButton(Strings.DialogPositiveButtonText,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                BuyPRO();
                            }
                        })
                .setNegativeButton(Strings.DialogNegativeButtonText,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                dialog.cancel();
                                finishActivity(0);
                            }
                        });

        AlertDialog alertDialog = builder.create();
        alertDialog.show();
        ;
    }

    public void prepareList() {
        listMaps1 = new ArrayList<String>();

        listMaps1.add(pyrrhycvictory);
        listMaps1.add(celerium);
        listMaps1.add(oldwounds);
        listMaps1.add(timeandfate);
        listMaps1.add(fallenangel);
        listMaps1.add(karma);
        listMaps1.add(sufferwithme);
        listMaps1.add(achillesveil);
        listMaps1.add(odysseus);
        listMaps1.add(cordisdie);
        listMaps1.add(judgmentday);
        listMaps1.add(strikeforcetraining);
        listMaps1.add(fobspectre);
        listMaps1.add(shipwreck);
        listMaps1.add(ied);
        listMaps1.add(secondchange);
        listMaps1.add(dispatch);

        listImages1 = new ArrayList<Integer>();
        listImages1.add(R.drawable.m1);
        listImages1.add(R.drawable.m2);
        listImages1.add(R.drawable.m3);
        listImages1.add(R.drawable.m4);
        listImages1.add(R.drawable.m5);
        listImages1.add(R.drawable.m6);
        listImages1.add(R.drawable.m7);
        listImages1.add(R.drawable.m8);
        listImages1.add(R.drawable.m9);
        listImages1.add(R.drawable.m10);
        listImages1.add(R.drawable.m11);
        listImages1.add(R.drawable.m12);
        listImages1.add(R.drawable.m13);
        listImages1.add(R.drawable.m14);
        listImages1.add(R.drawable.m15);
        listImages1.add(R.drawable.m16);
        listImages1.add(R.drawable.m17);
    }
} 
```

布局的XML代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="@string/pub_id" >
    </com.google.ads.AdView>

    <GridView
        android:id="@+id/gridView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth"
        tools:listitem="@android:layout/simple_list_item_2" >
    </GridView>

</LinearLayout> 
```

GridView 适配器 (MissionsGridviewAdapter) 的代码`

```
import java.util.ArrayList;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class MissionsGridviewAdapter extends BaseAdapter {
    private ArrayList<String> listCountry;
    private ArrayList<Integer> listFlag;
    private Activity activity;

    public MissionsGridviewAdapter(Activity activity, ArrayList<String> listCountry,
            ArrayList<Integer> listFlag) {
        super();
        this.listCountry = listCountry;
        this.listFlag = listFlag;
        this.activity = activity;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return listCountry.size();
    }

    @Override
    public String getItem(int position) {
        // TODO Auto-generated method stub
        return listCountry.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public static class ViewHolder {
        public ImageView imgViewFlag;
        public TextView txtViewTitle;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder view;
        LayoutInflater inflator = activity.getLayoutInflater();

        if (convertView == null) {
            view = new ViewHolder();
            convertView = inflator.inflate(R.layout.c_missions_gridviewrow, null);

            view.txtViewTitle = (TextView) convertView
                    .findViewById(R.id.textView1);
            view.imgViewFlag = (ImageView) convertView
                    .findViewById(R.id.imageView1);

            convertView.setTag(view);
        } else {
            view = (ViewHolder) convertView.getTag();
        }

        view.txtViewTitle.setText(listCountry.get(position));
        view.imgViewFlag.setImageResource(listFlag.get(position));
        return convertView;
    }

} 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T11:53:53.660

一个建议，使用 strings.xml 来存储您的静态字符串。

# c# - 一般重新加载或刷新 WebBrowser 控件和表单

> ID：15053864
> 
> 赞同：3
> 
> 时间：2013-02-24T16:32:16.577
> 
> 标签：c#, winforms, webbrowser-control

我有`Form`以编程方式创建的控件。其中之一是`WebBrowser`显示验证码图像。然后用户在文本框中输入验证码，如果错误，表单应该用新的验证码图像刷新。然后我再次尝试`Form.Refresh()`调用`DisplayCaptcha()`，但它没有用，所以我在这个（简化的）代码中解决了它：

```
public partial class Form3 : Form
{

    public Form3()
    {
        InitializeComponent();
        DisplayCaptchas();
    }

    private void DisplayCaptcha()
    {
        string captcha = "<style>html, body{{padding:0; margin:0 }}</style>" + 
            "<img src=\"http://www.reddit.com/captcha/{0}.png\"></img>";

            WebBrowser webBrowserNofap = new WebBrowser();
            webBrowserNofap.DocumentText = String.Format(captcha, iden);
            ......//rest of the code

    }

    private void button1_Click(object sender, EventArgs e)
    {

        if (wrongCaptcha)
        {
            this.Close();
            Form3 form3 = new Form3(); //this is how I solved the refreshing
            form3.Show();
        }
        else
        {
            Form4 form4 = new Form4();
            this.Close();
            form4.Show();
        }
    }
} 
```

它有效，但这并不是真正令人耳目一新。我当时正在考虑`DisplayCaptcha()`再次删除控件，但不知道该怎么做。简而言之，除了关闭然后重新加载之外还有其他解决方案`Form`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T16:46:00.993

尝试这个：

```
using System;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            webBrowser1.Navigate("about:blank");
            webBrowser1.Document.Write("<html><head><style>html, body{{padding:0; margin:0 }}</style></head><body><div id='divMain'>&nbsp;</div></body></html>");
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Random r = new Random();
            int number = 0;
            number = r.Next(0, 999999);
            string captcha = "<img src=\"http://www.reddit.com/captcha/{0}.png\"></img>";

            webBrowser1.Document.GetElementById("divMain").InnerHtml = string.Format(captcha, number);
        }
    }
} 
```

每次单击按钮时，您都应该得到一个新图像。你可以把它放在你想刷新的地方。

# android - 未知权限 com.android.vending.BILLING

> ID：15053868
> 
> 赞同：3
> 
> 时间：2013-02-24T16:32:32.110
> 
> 标签：android, android-permissions

我正在尝试在我的应用程序中设置应用内计费功能。到目前为止，我遵循了本指南：

[http://developer.android.com/training/in-app-billing/preparing-iab-app.html](http://developer.android.com/training/in-app-billing/preparing-iab-app.html)

但是，当我指定计费权限时

```
<uses-permission android:name="com.android.vending.BILLING" /> 
```

LogCat 中出现以下消息：

```
Unknown permission com.android.vending.BILLING in package org.noi.activity 
```

每次我开始我的申请。

正如我上面提到的，我在我的 AndroidManifest.xml 中注册了 Billing 权限，就像在[教程](http://developer.android.com/training/in-app-billing/preparing-iab-app.html#SetPermission)中一样：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="org.noivr.activity"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:targetSdkVersion="17" android:minSdkVersion="9"/>
    <uses-permission android:name="com.android.vending.BILLING" />
    <uses-permission android:name="android.permission.CALL_PHONE"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
...
</manifest> 
```

我还将[应用内计费库复制](http://developer.android.com/training/in-app-billing/preparing-iab-app.html#AddLibrary)到我的项目中，该项目现在具有以下结构：

*   com.android.vending.billing
*   com.android.vending.billing.util
*   org.noi.activity
*   org.noi.impl
*   org.noi.const

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:16:37.270

你在模拟器上测试吗？

必须安装最新版本的 Google Play。

**编辑：**

不，这是不可能的。

> 您不能使用 Android 模拟器来测试应用内结算。您用于测试的设备必须运行标准版本的 Android 1.6 或更高版本的平台（API 级别 4 或更高版本），并安装最新版本的 Google Play 应用程序。

[资源](https://developer.android.com/google/play/billing/billing_testing.html)

Google Play 应用程序仅授权给设备制造商。事实上，你可以在互联网上找到盗版的 Google Play 应用程序，但并不推荐。

# android - 带有 Delphi 或 Lazarus 的手机 Android 应用程序

> ID：15053869
> 
> 赞同：4
> 
> 时间：2013-02-24T16:32:38.490
> 
> 标签：android, delphi, lazarus

使用*smart mobile studio*开发移动应用程序，我发现我还需要*手机间隙*才能将应用程序进一步部署到我的移动设备。
如果我只想在手机上分发我的移动应用程序，有没有更简单的方法来创建移动应用程序？我可以对拉撒路做同样的事情吗？将可执行文件带到 Android 手机是否更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:18:34.353

开发版 FPC 中有初步的 android 目标支持。没有拉撒路支持。

甚至有两种方法，一种是生成 JVM 代码，一种是本机路由。（Java 骨架使用的本机库）。

后一种（原生）似乎是最常用的一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:56:36.023

您可以将 Lazarus 配置为针对某些移动设备中的 ARM 处理器进行编译。

[在这里](http://wiki.freepascal.org/Setup_Cross_Compile_For_ARM)阅读

# c# - MediaElement 在暂停模式下设置位置

> ID：15053870
> 
> 赞同：0
> 
> 时间：2013-02-24T16:32:53.367
> 
> 标签：c#, wpf, silverlight, windows-phone

我使用这种方法在我的`MediaElement`：

```
TimeSpan t = TimeSpan.FromSeconds(newSecond);
System.Windows.Deployment.Current.Dispatcher.BeginInvoke(() =>
{
    mediaElement1.Position = TimeSpan.FromSeconds(newSecond);
}); 
```

当用户播放视频然后暂停并寻找新位置时，视频帧会停留在前一帧。

而且我想知道当我寻找新位置并且视频处于暂停模式时是否有可能，因此帧将移动到新位置并且不会等到我再次按下播放。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T17:40:04.350

您需要将`MediaElement`s[`ScrubbingEnabled`](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.scrubbingenabled.aspx)属性设置为 true

# sql - 日期之间的数据

> ID：15053873
> 
> 赞同：1
> 
> 时间：2013-02-24T16:33:26.033
> 
> 标签：sql, sql-server-2008, tsql

我在 SQL Server 表中有以下数据

```
 Id    Name   StartDate    EndDate
 1      A      2/2/2012     21/2/012
 2      B      3/2/2012     2/2/2014
 3      C      21/2/2012    3/3/2012
 4      D      1/1/2012     3/3/2012 
```

我想获取`Start Date`与`End Date`今天日期匹配的所有行

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:18:31.960

如果您的意思是要将*范围*与当前日期匹配，那么假设`StartDate`和`EndDate`are`date`类型，您可以尝试以下操作：

```
SELECT ...
FROM atable
WHERE CAST(GETDATE() AS date) BETWEEN StartDate AND EndDate
; 
```

以上与此基本相同：

```
SELECT ...
FROM atable
WHERE StartDate <= CAST(GETDATE() AS date)
    AND EndDate >= CAST(GETDATE() AS date)
; 
```

但是，如果优化器无法将第一个版本转换为第二个版本，则第一个版本可能会产生更差的查询计划。因此，如果性能至关重要，您应该先测试，然后再决定。

请注意，以上两个版本都假定它`EndDate`是包容性的。如果它是独占的，您可以采用第二个版本并稍微修改它：

```
SELECT ...
FROM atable
WHERE StartDate <= CAST(GETDATE() AS date)
    AND EndDate >  CAST(GETDATE() AS date)
; 
```

您可以进一步简化为：

```
SELECT ...
FROM atable
WHERE StartDate <= GETDATE()
    AND EndDate >  GETDATE()
; 
```

但这可能会使用隐式转换，这可能会影响性能，尽管我不能确定在多大程度上，甚至更不确定你是否可以接受。同样，您需要测试和比较。一般来说，我会从一个更简单的版本开始，并记住当我对目前的表现不（或不再）满意的情况下的替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T16:40:26.783

根据我对“开始日期和结束日期与今天日期匹配的数据”的理解，您似乎想要获取 StartDate 和 EndDate 等于今天的所有数据。

这是查询：

```
SELECT *
FROM TableName
WHERE StartDate = cast(getDate() As Date) AND EndDate = cast(getDate() As Date); 
```

# c# - 便携式应用数据库

> ID：15053874
> 
> 赞同：1
> 
> 时间：2013-02-24T16:33:31.360
> 
> 标签：c#, database

到目前为止，我使用的是 Sql Server *2005*和*2008 ，为了便于移植，我使用了 Access。*我听说过 Sql Compact 版本，并且阅读它的最大支持大小是*4GB*，有没有办法增加最大大小？或者有替代数据库来做同样的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:38:16.620

你试过[火鸟](http://www.firebirdnews.org/docs/fb2min.html)RDBMS

*   **完全支持存储过程和触发器**

*   **完全符合 ACID 的交易**

*   **参照完整性**

*   **多代架构**

*   **占用空间非常小**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T16:57:28.890

对于关系数据库，您可以查看[SQLite](http://www.sqlite.org/)。这里有一个 ADO.Net 提供程序[。](http://system.data.sqlite.org)

如果您对出色的 NoSQL 数据库感兴趣，我强烈推荐[RavenDB](http://ravendb.net/)，它包含嵌入式模式。

# ios - 将 UIGestureRecognizer 添加到 UITableViewCell

> ID：15053876
> 
> 赞同：2
> 
> 时间：2013-02-24T16:33:35.400
> 
> 标签：ios, uigesturerecognizer, runtime-error, uiswipegesturerecognizer

我使用[http://www.raywenderlich.com/21842/how-to-make-a-gesture-driven-to-do-list-app-part-13](http://www.raywenderlich.com/21842/how-to-make-a-gesture-driven-to-do-list-app-part-13)向我的单元格添加手势识别器，这样我就可以将它们从左向右移动，但我收到此错误：

```
[UISwipeGestureRecognizer translationInView:]: unrecognized selector 
```

我什至不使用滑动识别器，所以我现在不知道该怎么做。

```
UIGestureRecognizer* recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
recognizer.delegate = self;
[self addGestureRecognizer:recognizer]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:19:39.793

看起来你`gestureRecognizerShouldBegin`被要求使用一个手势而不是`UIPanGestureRecognizer`被要求使用您创建显然，您可以通过更改您`gestureRecognizerShouldBegin`的单元子类来测试它是否是平移手势来解决症状：

```
-(BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)gestureRecognizer
{
    if ([gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]])
    {
        CGPoint translation = [gestureRecognizer translationInView:gestureRecognizer.view];

        if (fabsf(translation.x) > fabsf(translation.y)) {
            return YES;
        }
        return NO;
    }

    return NO;
} 
```

不过，上述修复只是解决了症状。真正的问题是你的`UIGestureRecognizerDelegate`方法如何，`gestureRecognizerShouldBegin`除了`UIPanGestureRecognizer`. 可能还有其他手势在起作用（例如，如果您实现了一个`canEditRowAtIndexPath`返回`YES`，它启用了滑动手势），但我看不出您的自定义单元格将如何被识别为该滑动手势的代表。

我可以重现您的问题的唯一方法是手动向单元格（或表格或视图）添加滑动手势。我知道你说你没有使用滑动手势，但也许是在 Interface Builder 或类似的东西中意外添加的？我不知道，因为我无法重现您描述的症状。如果最坏的情况发生，您可以压缩您的项目并与我们分享，我很乐意快速浏览一下。

# c++ - CRC-24Q理解发现代码

> ID：15053883
> 
> 赞同：2
> 
> 时间：2013-02-24T16:34:26.297
> 
> 标签：c++, crc

我需要将 CRC-24Q 校验和添加到我正在构建的 RTCM 消息中。我从 C 中的另一个来源找到了一些代码。但是我剪切/粘贴到 CodeBlocks 中进行查看。编译器在每个函数 crc24q_hash、crc24q_sign 和 crc24q_check 中都给出了多重定义 ERROR。我真的想弄清楚如何创建一个函数来创建一个校验和，只是为了测试它反转它，看看我是否做得对。这是我找到的c代码。

```
#include <stdbool.h>
#include "crc24q.h"

#if 0
/*
 * The crc24q code table below can be regenerated with the following code:
 */
#include <stdio.h>
#include <stdlib.h>

unsigned table[25];

#define CRCSEED   0           /* could be NZ to detect leading zeros */
#define CRCPOLY   0x1864CFB   /* encodes all info about the polynomial */

static void
crc_init(unsigned table[256])
{
    unsigned i, j;
    unsigned h;

    table[0] = CRCSEED;
    table[1] = h = CRCPOLY;

    for (i = 2; i < 256; i *= 2) {
        if ((h <<= 1) & 0x1000000)
            h ^= CRCPOLY;
        for (j = 0; j < i; j++)
            table[i+j] = table[j] ^ h;
    }
}

int main(int argc, char *argv[])
{
    int i;

    crc_init(table);

    for (i = 0; i < 256; i++) {
        printf("0x%08X, ", table[i]);
        if ((i % 4) == 3)
            putchar('\n');
    }

    exit(0);
}
#endif

static const unsigned crc24q[256] = {
    0x00000000, 0x01864CFB, 0x028AD50D, 0x030C99F6,
    0x0493E6E1, 0x0515AA1A, 0x061933EC, 0x079F7F17,
    0x08A18139, 0x0927CDC2, 0x0A2B5434, 0x0BAD18CF,
    0x0C3267D8, 0x0DB42B23, 0x0EB8B2D5, 0x0F3EFE2E,
    0x10C54E89, 0x11430272, 0x124F9B84, 0x13C9D77F,
    0x1456A868, 0x15D0E493, 0x16DC7D65, 0x175A319E,
    0x1864CFB0, 0x19E2834B, 0x1AEE1ABD, 0x1B685646,
    0x1CF72951, 0x1D7165AA, 0x1E7DFC5C, 0x1FFBB0A7,
    0x200CD1E9, 0x218A9D12, 0x228604E4, 0x2300481F,
    0x249F3708, 0x25197BF3, 0x2615E205, 0x2793AEFE,
    0x28AD50D0, 0x292B1C2B, 0x2A2785DD, 0x2BA1C926,
    0x2C3EB631, 0x2DB8FACA, 0x2EB4633C, 0x2F322FC7,
    0x30C99F60, 0x314FD39B, 0x32434A6D, 0x33C50696,
    0x345A7981, 0x35DC357A, 0x36D0AC8C, 0x3756E077,
    0x38681E59, 0x39EE52A2, 0x3AE2CB54, 0x3B6487AF,
    0x3CFBF8B8, 0x3D7DB443, 0x3E712DB5, 0x3FF7614E,
    0x4019A3D2, 0x419FEF29, 0x429376DF, 0x43153A24,
    0x448A4533, 0x450C09C8, 0x4600903E, 0x4786DCC5,
    0x48B822EB, 0x493E6E10, 0x4A32F7E6, 0x4BB4BB1D,
    0x4C2BC40A, 0x4DAD88F1, 0x4EA11107, 0x4F275DFC,
    0x50DCED5B, 0x515AA1A0, 0x52563856, 0x53D074AD,
    0x544F0BBA, 0x55C94741, 0x56C5DEB7, 0x5743924C,
    0x587D6C62, 0x59FB2099, 0x5AF7B96F, 0x5B71F594,
    0x5CEE8A83, 0x5D68C678, 0x5E645F8E, 0x5FE21375,
    0x6015723B, 0x61933EC0, 0x629FA736, 0x6319EBCD,
    0x648694DA, 0x6500D821, 0x660C41D7, 0x678A0D2C,
    0x68B4F302, 0x6932BFF9, 0x6A3E260F, 0x6BB86AF4,
    0x6C2715E3, 0x6DA15918, 0x6EADC0EE, 0x6F2B8C15,
    0x70D03CB2, 0x71567049, 0x725AE9BF, 0x73DCA544,
    0x7443DA53, 0x75C596A8, 0x76C90F5E, 0x774F43A5,
    0x7871BD8B, 0x79F7F170, 0x7AFB6886, 0x7B7D247D,
    0x7CE25B6A, 0x7D641791, 0x7E688E67, 0x7FEEC29C,
    0x803347A4, 0x81B50B5F, 0x82B992A9, 0x833FDE52,
    0x84A0A145, 0x8526EDBE, 0x862A7448, 0x87AC38B3,
    0x8892C69D, 0x89148A66, 0x8A181390, 0x8B9E5F6B,
    0x8C01207C, 0x8D876C87, 0x8E8BF571, 0x8F0DB98A,
    0x90F6092D, 0x917045D6, 0x927CDC20, 0x93FA90DB,
    0x9465EFCC, 0x95E3A337, 0x96EF3AC1, 0x9769763A,
    0x98578814, 0x99D1C4EF, 0x9ADD5D19, 0x9B5B11E2,
    0x9CC46EF5, 0x9D42220E, 0x9E4EBBF8, 0x9FC8F703,
    0xA03F964D, 0xA1B9DAB6, 0xA2B54340, 0xA3330FBB,
    0xA4AC70AC, 0xA52A3C57, 0xA626A5A1, 0xA7A0E95A,
    0xA89E1774, 0xA9185B8F, 0xAA14C279, 0xAB928E82,
    0xAC0DF195, 0xAD8BBD6E, 0xAE872498, 0xAF016863,
    0xB0FAD8C4, 0xB17C943F, 0xB2700DC9, 0xB3F64132,
    0xB4693E25, 0xB5EF72DE, 0xB6E3EB28, 0xB765A7D3,
    0xB85B59FD, 0xB9DD1506, 0xBAD18CF0, 0xBB57C00B,
    0xBCC8BF1C, 0xBD4EF3E7, 0xBE426A11, 0xBFC426EA,
    0xC02AE476, 0xC1ACA88D, 0xC2A0317B, 0xC3267D80,
    0xC4B90297, 0xC53F4E6C, 0xC633D79A, 0xC7B59B61,
    0xC88B654F, 0xC90D29B4, 0xCA01B042, 0xCB87FCB9,
    0xCC1883AE, 0xCD9ECF55, 0xCE9256A3, 0xCF141A58,
    0xD0EFAAFF, 0xD169E604, 0xD2657FF2, 0xD3E33309,
    0xD47C4C1E, 0xD5FA00E5, 0xD6F69913, 0xD770D5E8,
    0xD84E2BC6, 0xD9C8673D, 0xDAC4FECB, 0xDB42B230,
    0xDCDDCD27, 0xDD5B81DC, 0xDE57182A, 0xDFD154D1,
    0xE026359F, 0xE1A07964, 0xE2ACE092, 0xE32AAC69,
    0xE4B5D37E, 0xE5339F85, 0xE63F0673, 0xE7B94A88,
    0xE887B4A6, 0xE901F85D, 0xEA0D61AB, 0xEB8B2D50,
    0xEC145247, 0xED921EBC, 0xEE9E874A, 0xEF18CBB1,
    0xF0E37B16, 0xF16537ED, 0xF269AE1B, 0xF3EFE2E0,
    0xF4709DF7, 0xF5F6D10C, 0xF6FA48FA, 0xF77C0401,
    0xF842FA2F, 0xF9C4B6D4, 0xFAC82F22, 0xFB4E63D9,
    0xFCD11CCE, 0xFD575035, 0xFE5BC9C3, 0xFFDD8538,
};

unsigned int crc24q_hash(unsigned char *data, int len)
{
    unsigned int crc = 0;

    for (int i = 0; i < len; i++) {
        crc = (crc << 8) ^ crc24q[data[i] ^ (unsigned char)(crc>>16)];
    }

    crc = (crc & 0x00ffffff);

    return crc;
}

#define LO(x)     (unsigned char)((x) & 0xff)
#define MID(x)    (unsigned char)(((x) >> 8) & 0xff)
#define HI(x)     (unsigned char)(((x) >> 16) & 0xff)

void crc24q_sign(unsigned char *data, int len)
{
    unsigned crc = crc24q_hash(data, len);

    data[len]   = HI(crc);
    data[len+1] = MID(crc);
    data[len+2] = LO(crc);
}

bool crc24q_check(unsigned char *data, int len)
{
    unsigned crc = crc24q_hash(data, len-3);

    return (((data[len-3] == HI(crc)) &&
             (data[len-2] == MID(crc)) &&
             (data[len-1] == LO(crc))));
} 
```

所以我很困惑是否有任何函数为消息构建校验和，或者它们是否生成校验和以与消息中发送的比较？我还注意到变量被简单地描述为无符号但没有任何其他描述，如 int。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:19:32.690

因此，它将用于消息：

```
// message is in data[0..len-1]
crc24q_sign(data, len);
// send signed message in data[0..len+2] 
```

在另一端：

```
// receive message in data[0..len+2]
if (!crc24q_check(data, len + 3))
    throw error; 
```

注意这个接口`len`在两端使用不一致。检查时需要多三个。

# c++ - 从 HWND 确定 MFC 对象的类型

> ID：15053884
> 
> 赞同：0
> 
> 时间：2013-02-24T16:34:26.547
> 
> 标签：c++, winapi, mfc

对于[这个问题](https://stackoverflow.com/questions/15030811/preventing-mouse-wheel-scrolling-of-controls)，我决定覆盖`PreTranslateMessage`主窗口的功能`CMainFrame`以检查是否`WM_MOUSEWHEEL`已发送消息，如果已发送并且消息的目标是组合框，则阻止消息被发送。

但是，我在确定消息的目标是否是组合框时遇到问题，这是我目前正在尝试的：

```
BOOL CMainFrame::PreTranslateMessage( MSG* pMsg )
{
      CWnd* pWnd = CWnd::FromHandle( pMsg->hwnd );
      if( pWnd )
      {
            if( pMsg->message == WM_MOUSEWHEEL )
            {
                    CRuntimeClass* pRuntimeClass = pWnd->GetRuntimeClass();
                    bool bIsCombo = pRuntimeClass->IsDerivedFrom( RUNTIME_CLASS(CComboBox) ) || pWnd->IsKindOf( RUNTIME_CLASS(CComboBox) );

                    if( bIsCombo && !reinterpret_cast<CComboBox*>(pWnd)->GetDroppedState() )
                         return TRUE;
            }
       }

       return CFrameWndEx::PreTranslateMessage( pMsg );

} 
```

但是，这不起作用，因为运行时类似乎总是`CWnd`，所以我很想知道是否有办法让它工作？使用`dynamic_cast`from `CWnd*`to`CComboBox*`似乎也不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:55:20.720

`GetClassName`，这就是上面 Obvlious 船长显示的可行解决方案，并且会做你想做的事。

当然，*理智*的解决方案（我在您链接到的问题中显示）是简单地创建一个派生类，并以您认为适合您的应用程序的任何方式`CComboBox`处理那里。`WM_MOUSEWHEEL`然后，您可以使用派生类，而不是`CComboBox`简单地更改`CComboBox`为`CNoScrollComboBox`或任何您命名的类。

这真的很简单，为您省去了**很多麻烦**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T17:50:58.190

如果父窗口没有子类化组合框`CComboBox`（或其他合适的 CWnd 派生类），MFC 将返回一个指向临时 CWnd 对象的指针。您在这里有两个选择。创建父级时（在`OnCreate`on 中`OnInitDialog`）对组合框窗口进行子类化 - 或 - 在处理鼠标滚轮消息时调用`GetClassName()`并检查目标窗口的类型。

# symfony - 部署我的 Symfony 应用程序，出现 404 css 相关错误

> ID：15053885
> 
> 赞同：3
> 
> 时间：2013-02-24T16:34:27.770
> 
> 标签：symfony

我转移到生产环境，因为我的开发和生产服务器是相同的，我认为从一个环境到另一个环境的通道只是使用 app.php 而不是 app-dev.php。这样做我得到了一些与 css 文件相关的 404 错误，所以我相信由于 css 是由 assctic 处理的，所以这个问题可能与缓存有关吗？但我不知道如何处理这个问题。

我可以通过 ssh 访问我的服务器，但仅使用 ftp 的解决方案也很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T17:40:14.957

您需要运行转储资产文件的命令：

```
php app/console assetic:dump --env=prod --no-debug 
```

[http://symfony.com/doc/current/cookbook/assetic/asset_management.html#dumping-asset-files-in-the-prod-environment](http://symfony.com/doc/current/cookbook/assetic/asset_management.html#dumping-asset-files-in-the-prod-environment)

如果您之前使用过`prod`环境，您可能想要清除缓存：

```
php app/console cache:clear --env=prod --no-debug 
```

`app/cache`或者，如果您只想使用 FTP 客户端，则可以简单地删除文件夹中的所有内容。

# c# - 设计此解决方案的更合适方法是什么？

> ID：15053890
> 
> 赞同：1
> 
> 时间：2013-02-24T16:34:44.430
> 
> 标签：c#, linq

我目前正在处理一些有效的代码。真的归结为我是否应该让所有这些？盲目的？演员表。

我有一堂课：

```
public abstract class Trigger
{
  // no logic, just three automatic properties
} 
```

继承自：

```
// there are several classes like this that store different things like strings,
// int,floats, enums, etc,etc.
public class ActivateOnTimeDelay : Trigger
{
   // More automatic properties and possibly fields.
} 
```

然后我将这些类放入`List<Trigger>`

并在另一个类中以反向 for 循环遍历列表

```
if (currentMission.ActiveTriggers.Count > 0)
{
  for (int i = currentMission.ActiveTriggers.Count - 1; i >= 0; i--)
  {
   ActivateOnDeathDelay activateOnDeathD = currentMission.ActiveTriggers[i] as    ActivateOnDeathDelay;
   ActivateOnDeathImmediate activateOnDeathI = currentMission.ActiveTriggers[i] as ActivateOnDeathImmediate;
   ActivateOnFinishDelay activateOnFinishD = currentMission.ActiveTriggers[i] as ActivateOnFinishDelay;
   ActivateOnFinishImmediate activateOnFinishI = currentMission.ActiveTriggers[i] as ActivateOnFinishImmediate;
   ActivateOnFinishMass activateOnFinishM = currentMission.ActiveTriggers[i] as ActivateOnFinishMass;
   ActivateOnTimeDelay activateOnTimeD = currentMission.ActiveTriggers[i] as ActivateOnTimeDelay;
   ActivateOnTimeImmediate activateOnTimeI = currentMission.ActiveTriggers[i] as ActivateOnTimeImmediate;

   DisplayDialog displayDialog = currentMission.ActiveTriggers[i] as DisplayDialog;
   SpawnEnemy spawnEnemy = currentMission.ActiveTriggers[i] as SpawnEnemy;

   if (activateOnDeathD != null)
   {
     // do logic
   }

   // more null checks for each possible item that may be created this loop pass. 
```

当一个触发器被使用时，它会从列表中移除，并且它的 ID 被放置到一个`HashSet<string>`UsedTriggers 中，一些触发器会监视它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T16:41:32.360

一般来说，这里应该发生的是`Trigger`（或者可能是一个`ITrigger`接口）公开了每种具体类型的触发器适当地实现的抽象方法。这样你就不需要投射，你只需做类似的事情

```
for (int i = currentMission.ActiveTriggers.Count - 1; i >= 0; i--)
{
    // Run() is an abstract method on Trigger
    currentMission.ActiveTriggers[i].Run();
} 
```

或者，使用 LINQ 可能会更好（提高可读性）：

```
foreach (var trigger in currentMission.ActiveTriggers.Reverse())
{
    trigger.Run();
} 
```

# mongodb - 尝试连接到 mongodb 服务器时无法识别 mongo 命令

> ID：15053893
> 
> 赞同：85
> 
> 时间：2013-02-24T16:35:32.690
> 
> 标签：mongodb

我正在关注 docs.mongodb.org 上的教程，我已经完成了第一个教程，即在 Windows 机器上安装 mongodb。我现在处于开始 mongodb 开发的第二阶段。

我被困在本节的第一阶段，它指示我输入`mongo`系统提示符。当我这样做时，我只会收到一条错误消息，内容如下：

```
'mongo' is not recognized as an internal or external command, operable program or batch file 
```

我知道这可能很简单，我做错了，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2017-01-06T14:28:49.473

## 您需要将 Mongo 的`bin`文件夹添加到“路径”环境变量中

以下是在 Windows 10 上的操作：

1.  找到 Mongo 的**bin**文件夹。

如果你不确定它在哪里，它可能在`C:\Program Files\MongoDB\Server\3.4\` *3.4 中是当时最新的稳定版本，这对你来说可能会有所不同。*

它应该如下所示：

[![这是 3.4 版 Mongo 的 bin 文件夹的样子，重要的是它是包含 mongod.exe 的任何文件夹。](../Images/e48f4e7c46d364b252c8165247520f50.png)](https://i.stack.imgur.com/L6dPo.png) *请注意，这是 mongo.exe 和 mongod.exe 的路径。将此文件夹添加到 Path 变量是告诉 Windows 在您在 cmd 中运行某些内容时在此文件夹中搜索与您的命令匹配的可执行文件。搜索从当前工作目录开始，如果它没有找到您的 exe，则继续搜索 Path 中的所有路径，直到找到它或它没有找到它，它会给您看到您看到的错误。*

2.  将路径复制到 bin 文件夹。应该是`C:\Program Files\MongoDB\Server\3.4\bin\`（*或您使用的任何版本*）

3.  按`win`，输入`env`，Windows 会提示“编辑系统环境变量”，点击它。

[![如何找到系统环境变量。](../Images/27d05ba5d2694a25c8c277956ed545b4.png)](https://i.stack.imgur.com/HPY3m.png)

4.  在高级选项卡上，单击“环境变量”

[![系统属性中的高级选项卡包含环境变量。](../Images/295301341f61b3267580b83f6b6df2f8.png)](https://i.stack.imgur.com/FQVaY.png)

5.  突出显示“路径”变量，单击“编辑”：

[![您想编辑 Path 变量以将 Mongo 的 bin 文件夹添加到其中。](../Images/3a1e9d09db66d6bf0ddb497fcdfc7781.png)](https://i.stack.imgur.com/z9zOC.png)

6.  这将弹出“编辑环境变量”窗口，单击“新建”

[![将新文件夹添加到 Path 变量](../Images/f669132fbaef0702b8f40dd2a7532234.png)](https://i.stack.imgur.com/upZkl.png)

7.  这将在文件夹列表中开始一个新行：

[![Path 变量中的新行。](../Images/eff24a12bfcb81f54549ee7b51c65066.png)](https://i.stack.imgur.com/cV7yh.png)

8.  将路径粘贴到 bin 文件夹。确保它以这样的结尾`\`：

[![粘贴 bin 文件夹的位置。](../Images/81460f2f0c66768382f6ce7a4133af2c.png)](https://i.stack.imgur.com/tdpjo.png)

9.  按“确定”、“确定”、“确定”

现在您应该能够在命令窗口中的任何位置`mongod`运行。`mongo`

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-02-24T19:27:15.180

您需要`mongod`先在一个 cmd 窗口中运行，然后打开另一个并键入`mongo`. 确保您也更新了 Windows Path 环境变量，这样您就不必导航到包含所有 mongo 二进制文件的目录来启动应用程序。要更新 Path 变量：

转到控制面板>系统和安全>系统>高级系统设置>环境变量>导航到路径变量点击编辑并添加`;C:\mongodb`到路径（或任何目录名称是MongoDB所在的位置（分号分隔每个目录） .

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-04-12T18:03:01.767

可能为时已晚，但为了面临同样问题的其他人（比如我）。这都是关于路径变量末尾的小“\”。当您在 PATH windows 变量的末尾插入 MongoDB 的 bin 目录的路径时，不要忘记将“\”（反斜杠）放在末尾，这告诉 windows 它是一个目录而不是名为 bin 的可执行文件...例如 I:\Program Files\MongoDB\Server\3.0\bin **\**

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-03-14T03:18:06.500

好像，环境变量设置不正确。

转到 mongodb 安装文件夹并获取可执行文件（mongo.exe、mongod.exe 等）的位置。（在我的情况下）类似的东西：

```
C:\Program Files\MongoDB\Server\3.2\bin 
```

然后去：

```
Panel > System & Security > System > Advanced System Settings > Environment Variables 
```

找到`PATH`变量并编辑它的值。然后添加`C:\Program Files\MongoDB\Server\3.2\bin`，不要忘记用 . 分隔每个值`;`。现在确认并退出。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-06-04T19:24:34.443

如果仍然无法为您工作，那么只需关闭所有命令提示符，然后再次打开并从任何地方运行 mongo、mongoimport、mongodb，因为在设置路径变量后应该重新启动命令提示符。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-09-30T06:56:45.003

您需要在正确的目录中，即

```
C:\Program Files\MongoDB\bin 
```

并且您要安装的路径必须是正确的

IE

```
mongod --dbpath 
C:\Users\Name\Documents\myWebsites\nodetest1 
```

您的项目文件夹中还必须存在一个名为“data”的文件夹。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-01-04T06:01:38.620

如需添加环境变量，请在 bin 后添加**\ ，如下所示**

```
C:\Program Files\MongoDB\Server\3.2\bin\ 
```

然后在命令提示符下尝试以下代码从数据文件夹的父文件夹运行 mongo 服务器。

```
mongod -dbpath ./data 
```

就我而言，我无法从命令提示符（正常模式）运行 mongo。您应该**以管理员身份运行**。它也适用于 git bash。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-10-08T09:22:03.447

这对我有用：

```
.\mongod  --dbpath c:\...... 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-03T12:32:29.130

在使用 MongoDB 之前，您必须在本地运行它才能做到这一点：

*   转到`bin`您将在以下位置找到的文件夹`C:\Program Files\MongoDB\Server\4.2\bin`
*   打开`mongod.exe`. 将打开一个带有服务器详细信息的新终端。
*   打开`mongo.exe`. 将打开允许您与数据库交互的外壳。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-07-02T19:26:34.697

首先，确保您已设置环境变量。1.右键我的电脑 2.属性 3.高级系统设置 4.环境变量 5.编辑PATH变量。并将 ;"C:\mongoDb\bin\" 添加到 PATH 变量中。

引号中的路径可能因您的安装目录而异。不要忘记最后一个'\'，因为它是我的主要问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-04-10T13:08:21.830

除了有一个`Path`变量，目录`C:\data\db`是强制性的。

创建这个，错误将得到解决。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-11-08T06:04:11.673

`MongoDb`在环境路径中添加bin 路径`\`为我工作

这是我的系统路径

```
C:\ProgramData\Oracle\Java\javapath;
...
...
Other path variables
...
;C:\Users\hitesh.sahu\AppData\Local\Android\sdk\platform-tools
;C:\Program Files\MongoDB\Server\3.2\bin\ 
```

确保：-

*   环境路径之间不得有空格
*   环境路径必须由`;`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-27T16:45:37.797

只需在终端中使用`mongotop`而不是。`mongod`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-08-15T05:47:38.817

大多数情况下，这不起作用，因为您没有设置路径，在我的情况下，我也没有设置路径。所以这可以通过以下步骤解决：

1.  转到控制面板

2.  点击系统和安全

3.  然后点击系统

4.  点击高级系统设置

5.  点击环境变量

6.  单击用户变量中的路径

7.  编辑路径

8.  添加新路径

9.  （从本地磁盘复制路径 c /program files/mongodb/bin），它应该类似于这个 C:\Program Files\MongoDB\Server\5.0\bin

10.  将其粘贴在那里并单击确定

11.  关闭 vs 代码并重新打开它

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-06-28T03:51:00.823

1.开始使用 MongoDB，以管理员权限打开 CMD 并输入：“C:\Program Files\MongoDB\Server\4.2\bin\mongo.exe”

2.创建数据目录（打开另一个 cmd 终端） cd C:
md "\data\db" 3\. 要启动 mongo DB 数据库，在 cmd 中键入以下行：“C:\Program Files\MongoDB\Server\4.2 \bin\mongod.exe" --dbpath="c:\data\db" （--dbpath 选项指向您的数据库目录。）[您也可以先执行步骤 2 和 3，然后执行步骤 1]

参考：https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2016-06-30T15:05:06.717

在 mongodb 的 bin 路径末尾提出斜杠“/”解决了我的问题。

# iphone - 旋转时设置tableview属性

> ID：15053894
> 
> 赞同：0
> 
> 时间：2013-02-24T16:35:41.247
> 
> 标签：iphone, ios, xcode, rotation, tableview

我想设置我的`tableview`属性，例如`Height`旋转设备时。当设备处于纵向模式时，我需要将 height 属性设置为 320。但是如果设备旋转到`landscape`模式，我需要设置为较低的值。我不知道该怎么做，如果我需要创建一个属性`IBOutlet`或者我需要为 tableview 创建一个标识符。

该应用程序设置为使用`iOS6`，特别是 iphone。我真的很感激任何帮助。

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:45:41.350

好吧，如果您有 UITableViewController，则不必手动调整它的大小，iOS 会为您完成。如果您不使用 Autolayout，则可以像这样设置调整大小的属性：

```
[tableView setAutoresizingMask:UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:51:07.867

使用 UIViewController (UITableViewController) 为您处理此问题。它是免费的。不要尝试手动布局您的 tableView。只需创建一个 UITableViewController 实例并使用

```
- (id)initWithStyle:(UITableViewStyle)style 
```

如果您不熟悉（模型-）视图-控制器设计模式，我建议您阅读苹果是如何实现它的。这是链接：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)

# css - CSS：输入标签外观不一致（Firefox 和 Safari）

> ID：15053896
> 
> 赞同：0
> 
> 时间：2013-02-24T16:35:49.993
> 
> 标签：css, firefox, input

我试图弄清楚为什么我的输入标签在 Firefox 和 Safari 中看起来相当不均匀。看看这个截图：

![http://oi48.tinypic.com/347uwxx.jpg](../Images/558137fd5fccfe00443fb69acc7d88a5.png)

我使用 Firebug 和 Safari 开发者工具来了解发生了什么。似乎 Firefox 为每个边框添加了另外 1 个像素，这导致另外 4 个像素，这使得输入看起来更大且烦人。再加上文字在 Firefox 中看起来有点高。是因为额外的像素吗？或者是其他东西？

无论如何，我很想得到一些关于为什么在 Firefox 中添加这些像素的指示。

```
#signup-form form input[type="text"], input[type="password"] {
    height:20px;
    padding:2px 4px;
    width:300px;
    color:#a1a1a1;
    font-style:italic;
    display:block;
    margin:10px 0px 0px 0px
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:11:03.670

设置`border-width: 2px;`。元素在浏览器和操作系统中的呈现方式不同，这只是 Web 开发人员必须忍受的。表单元素比其他元素更受此影响。

# node.js - nodejs如何动态加载资源javascript文件

> ID：15053897
> 
> 赞同：1
> 
> 时间：2013-02-24T16:35:57.017
> 
> 标签：node.js

我有一个在 nodejs 服务器上运行的资源加载器 JS 文件。我想放入一堆资源加载器将在初始化时加载到数组中的资源 js 文件。

```
 // resource loader js file
    var Resources = (function () {

    var resources = {};

    function Resources(){
    ... loading code here

    // example of use after loading
    resources[key].doStuff();
    }
})();
module.exports.Resources = Resources; 
```

在同一目录中，开发人员可以根据需要放入新的 resource.js 文件。

```
// resource file
var ResourceA = (function () {

function ResourceA(){
... loading code here

// example of use after loading
  ResourceA.prototype.doStuff= function () {
        // do stuff
    };

})(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T16:58:28.273

我不确定你的意思，但如果你想要在服务器端的一个文件夹中加载一堆模块，我构建了这个小函数来做到这一点。

```
var path = require('path'),
    walk = require('walk');

function findModules(opts,done){
    var walker  = walk.walk(opts.folder, { followLinks: false }),
        modules = [];

    walker.on('file', function(root, stat, next) {
        var current = path.join(root, stat.name),
            extname = path.extname(current);

        if(extname === '.js' && (opts.filter === undefined || opts.filter(current))){
            var module = require(current);
            modules.push(module);
        }

        next();
    });

    walker.on('end', function() {
        done(modules);
    });
} 
```

然后，你这样称呼它：

```
findModules({
    folder: 'path/to/folder',
    filter: undefined // either undefined or a filter function for module names
}, function(modules){
    // continue
}); 
```

安装**[步行](https://npmjs.org/package/walk)**：

```
npm install walk --save 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-07T00:46:03.327

新的和更简单的：

**安装**

```
npm install eloader 
```

**用法**

```
const eloader = require('eloader');
const db = require('db');

eloader.add('db', db)
       .add('list', [2,8]
       .run(__dirname + '\\routes\\'); 
```

**Git** [https://github.com/augustoeliezer/eloader](https://github.com/augustoeliezer/eloader)

# ruby-on-rails - 在 Rails 应用程序/脚手架中无限嵌套添加/编辑表单的好方法是什么？

> ID：15053911
> 
> 赞同：4
> 
> 时间：2013-02-24T16:37:23.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, nested-forms, simple-form, rails-admin

### 概述/型号

例如，假设您有一个相当大的系统，其中包含非常通用的模型（我们将在此示例中使用三个）

*   位置（通用地址字段、类型、line1、line2、towncity 等）
*   公司（通用公司字段、类型、名称等）
*   联系人（通用联系人字段、类型、姓名、职位等）

### 示例（+ rails_admin 屏幕截图）

我发现在制作这样的系统时，我总是遇到同样的问题。例如，我单击公司上的添加按钮（所以我现在已经加载了部分表单等），我在添加公司的过程中发现我需要的位置不在系统中。我想快速打开一个模式窗口，添加位置，然后通过 jquery 或类似的方式更新选择。太好了，没有什么太难的了，它已经在 rails_admin 这样的系统中完成了（见下面的截图）：

[http://www.server1-breakfrom.com/nestedaddexample.jpg](http://www.server1-breakfrom.com/nestedaddexample.jpg)

当处理一层嵌套时，这一切都很好，一般来说，当处理这种情况时，一切都很好（因为你可以在能力中编程）。但是，我正在做一个系统，它本身几乎需要成为一个框架，因为我在超过 50% 的模型中都需要它。我需要能够在模型/控制器中动态添加各种​​选项并让表单动态生成相关按钮。

### 其他问题

1.  模式内部/顶部的模式 - 添加联系人时，单击以添加他们的公司，在此新公司添加表单中，然后您要添加位置：繁荣，模式顶部的模式。
2.  jquery 附加到选择的文本 - 您需要知道如何更新选择元素，并可能在屏幕上找到所有相关的选择元素。添加公司可能会使用其 ID 和名称，但位置可能需要使用 ID 以及 line1、line2 和 towncity 作为文本。
3.  模态中的验证（但我假设我们可以使用某种 jquery，因为我们已经非常依赖它）

### 扩大问题

所以，除了这个问题：我是否把事情复杂化了，是否有一个容易解决的问题（我必须强调这 3 个模型纯粹是例子，我有很多模型需要参考一家公司，这不仅仅是一个联系人，所以“只需根据需要对其进行编程”，将无法正常工作！）。

或者，我应该只是拆开 rails_admin 并取出我需要的位吗？（同样，他们还没有解决多重嵌套问题，所以我觉得从头开始可能会更好？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:50:21.203

我遇到了类似的情况。我的解决方案在您的场景中可能存在性能问题，它不适合我，但它是一个低并发使用系统，总共只有 300 个用户。

我所做的是使用一个 MEGA AJAX 视图/表单！并根据需要使用 JavaScript 显示/隐藏。此技术要求您不要使用表单标签助手（即 text_field_tag 而不是 f.text_field），您必须控制元素名称。

因此，开始创建一个包含您最终需要的所有表单的单一视图。您必须区分它们，因此将每一个都放在具有唯一 ID 的 div 元素中。

```
<%= form_for @mega, :remote=>true do %>
  <div id='main_part'>
    <%= render :partial => "main_part", :object=>@mega  %>
  </div
  <div id='subpart1'>
    <%= render :partial => "subpart1" , :object=>@foobar , :locals=>{:id=>@foobar.id} %>
  </div
  <div id='subpart2'>
    <%= render :partial => "subpart2" , :object=>@barfoo , :locals=>{:id=>@barfoo.id} %>
  </div
<% end %> 
```

表单部分示例，注意区分提交按钮：

```
<%= label_tag "main_part[name]" ,"Name" %>
<%= text_field_tag "main_part[name]" , main_part.name %>
<%= submit_tag "UPDATE", :name=>'main_part' %>

<%= hidden_tag_field "subpart1_id" , id %>
<%= label_tag "subpart1[city]" ,"City" %>
<%= text_field_tag "subpart1[city]" , subpart1.city%>
<%= submit_tag "ADD", :name=>'subpart1' %> 
```

所以现在你需要一个大型控制器，因为这个表单发布到单个控制器操作。这个控制器看起来像一个普通的控制器，只适用于你的顶级模型，但它需要为所有模型做家务。

该控制器操作必须确定单击了哪个提交按钮，即

```
def update
  if params[:main_part]
    # since I controlled the parameter naming I know what's in params[:main_part] 
    # which is main_part[:name]
    @mega = MainThing.find(params[:id])
    @mega.attributes = params[:main_part]
    @mega.save
    # only for main_part is the id valid,  in every other case you have to 
    # manually extract the id
  elsif params[:subpart1]
    @subpart1_id = params[:subpart1_id]
    @foobar = FooBar.find(@subpart1_id)
    @foobar.attrubutes = params[:subpart1]
    @foobar.save
  else
  end
end 
```

由于 mega 表单是 remote=>true，因此您需要创建一个 javascript 文件来重新加载所有表单部分，因此在 app/views/megas/update.js.erb 中：

```
$('#main_part').html('<%= escape_javascript(render :partial=> "main_part", :object=>@mega) %>');
$('#subpart1').html('<%= escape_javascript(render :partial=> "subpart1", :object=>@foobar :locals=>{:id=>@foobar.id) %>'); 
```

现在这是性能问题的来源。如果您注意到，如果我运行该 javascript，它将期望定义所有这些实例变量，因此各种部分将呈现刷新任何由于更新而获得新值的选择标签. 在我的情况下，我只是将它们全部加载到之前的过滤器中，即

```
class MegaController < ApplicationController
  before_filter :load, :only=>[:edit]
  def load
     @mega = Mega.find(params[:id])
     @foobar = @mega.foobar
     @barfoo = @foobar.barfoo
  end 
```

但是您也可以不这样做，而是创建单独的 javascript 文件并专门在控制器中呈现它们，即

```
def update
  if params[:main_part]
    # do whatever...
    render :action=>'update_set1', :handler=>[:erb], :formats=>[:js]
  elsif params[:subpart1]
    # do whatever
    render :action=>'update_set1', :handler=>[:erb], :formats=>[:js]        
  elsif params[:subpart2]
    # do whatever
    render :action=>'update_set2', :handler=>[:erb], :formats=>[:js]        
  end
end 
```

文件 app/views/mega/update_set1.js.erb 只会更新受@mega 或@foobar 更新影响的部分，update_set2.js.erb 将更新受@barfoo 更新影响的部分。

最后一点，你的表单是远程=>真，你怎么退出？假设你有：

```
<%= submit_tag 'Cancel', :name=>'cancel' %> 
```

然后在控制器中，您将执行以下操作：

```
 def update
   if params[:cancel]
      render :js=> "window.location = '/'"
   else
      # whatever....
   end
 end 
```

最后一步是添加 javascript 以根据需要显示/隐藏表单 div，这是留给读者的练习....

更新

```
class Mega < ActiveRecord::Base
   def self.get_param_name
      self.class.name
   end

   def self.get_id_name
      "#{self.class.name}_id"
   end
end

class MyModel < Mega
end 
```

然后在一个大型控制器中：

```
def edit
   @mymodel = MyModel.find(params[MyModel.get_id_name])
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:07:40.467

### 解决问题

经过大量测试并仔细阅读了 RadBrad 提交的代码后，我偶然发现了一个 Gem，其答案几乎完全符合我对问题/短语“动态嵌套表单（使用 jQuery）”的期望。对于原始问题，“无限”似乎是一个糟糕的选择，但希望这个文本能让这个问题在搜索引擎上得到更好的选择。

### 宝石

该宝石被称为茧，可以在这里找到：[https ://github.com/nathanvda/cocoon](https://github.com/nathanvda/cocoon)

### 附加功能

作为奖励，它是使用 jQuery 构建的，与 simple_form、formtastic 兼容，并且非常适合 Twitter Bootstrap！

### 补充笔记

我还没有完全测试它，而且说实话，验证看起来已经是一个小问题，但如果我发现任何不能按预期工作的东西，我会进一步更新这个答案。

Cocoon 提供的示例 github 项目已经过时，您需要在 Gem 文件中进行大量重新调整才能使它们工作（但它是可行的！）。请放心，主要 Gem（在撰写本文时）是最新的。

# android - 使用 nanohttpd 从 android sd 卡直接访问文件

> ID：15053914
> 
> 赞同：1
> 
> 时间：2013-02-24T16:37:30.447
> 
> 标签：android, nanohttpd

有没有办法从桌面访问安卓手机的sd卡​​文件？我写了一个应用程序，其中 /mnt/sdcard/ 中有一个名为 video.mp4 的文件。活动开始时，我已经启动了一个 nanohttp 服务器（http），其工作目录是 /mnt/sdcard。那么为什么我不能从 vlc 播放器访问 'protocol://xxxx:port/video.mp4' 呢？我在 apache web 服务器中成功检查了这个。我的应用程序对外部存储具有读/写权限。

```
private class MyHTTPD extends NanoHTTPD {
    public MyHTTPD() throws IOException {
        super(PORT, Environment.getExternalStorageDirectory());
    }
.......
.......
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:42:01.150

从 Android 端做一些推送调用可能会更好。“手机上的服务器”可以通过无线方式工作，但通常会被 GSM 提供商禁用（呼叫必须来自手机端）。

# visual-studio-2010 - 从 Visual Studio 外部构建 Visual Studio 项目时如何“摆脱”$(SolutionDir)

> ID：15053915
> 
> 赞同：23
> 
> 时间：2013-02-24T16:37:34.873
> 
> 标签：visual-studio-2010, msbuild

我想从 Visual Studio 外部通过 MSBuild 构建一个 .vcxproj。问题是 .vcxproj 文件中有很多 $(SolutionDir) 出现，显然只有在加载解决方案时才能正确设置。

当我用实际的绝对路径替换 $(SolutionDir) 时，它可以工作。但是其他机器上的其他人正在使用相同的项目文件，所以这不是一个解决方案。

是否有解决此问题的解决方案或破解方法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-24T16:43:29.073

您可以通过传递参数参数来设置变量：

```
/p:SolutionDir=path 
```

因此，您可以创建一个构建脚本来设置环境并相应地执行 MSBuild，而不是编辑解决方案文件，而将 Visual Studio 文件保留用于开发工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-18T14:05:00.183

您可以使用相对路径。

我不确定问题中的 Visual Studio 2010，但它保证自 Visual Studio 2012 起就可以工作。

如果项目文件夹位于解决方案文件夹下，则相对路径为`..\\`.

顺便说一句，这可以与[Grant Thomas 的 answer](https://stackoverflow.com/questions/15053915/how-to-get-rid-of-solutiondir-when-building-visual-studio-project-from-outs/15053967#15053967)中的参数参数结合使用。

```
<SolutionDir Condition="$(SolutionDir) == '' Or $(SolutionDir) == '*Undefined*'">..\</SolutionDir> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-01-29T15:10:58.460

明确传递`SolutionDir`作为参数的解决方案对我来说是不够的。

也就是说，如果我要构建的项目具有不同构建配置的依赖项，则构建失败并出现`This project doesn't contain the Configuration and Platform combination of <my target configuration>`错误。

这是有道理的，因为我没有为依赖项指定目标配置，因此它试图定位与我正在构建的项目相同的配置，而他们没有（在我的情况下）。

由于解决方案文件包含解决方案中所有项目的构建配置（给定一些解决方案配置），我们想利用这个解决方案来解决这个问题。幸运的是，MSBuild 允许我们构建一个解决方案并将一个特定的目标项目作为参数传递，这只会导致该项目被构建（连同它的依赖项）。

```
msbuild MySolution.sln /t:MyProject 
```

# firebug - Firebug 重复 404 错误

> ID：15053930
> 
> 赞同：0
> 
> 时间：2013-02-24T16:39:18.103
> 
> 标签：firebug

只是想知道为什么萤火虫总是重复 404 消息？

我只在我的文档中调用了一次图像，但我总是收到两次消息。

[![](../Images/14961d5995924d569cdd2947e46e3f57.png "由 imgur.com 主办")](https://imgur.com/rq1YG5I)

这是HTML：

```
<body class='view content'>
    <div id="container">

        <h1>Test 7 Commercial &nbsp;/&nbsp; <span>commercial</span></h1>

        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer sem nisi, mollis pellentesque fringilla eu, vulputate sit amet leo. Nullam vel augue id sapien facilisis vestibulum. Mauris molestie suscipit est id volutpat. Aliquam erat volutpat. Phasellus orci sem, rutrum reas.<br />
<br />
ulputate sit amet leo. Nullam vel augue id sapien facilisis vestibulum. Mauris molestie suscipit est id volutpat. Aliquam erat volutpat. Phasellus orci sem, rutrum qulputate sit amet leo. Nullam vel augue id sapien facilisis vestibulum. Mauris molestie suscipit est id volutpat. Aliquam erat volutpat. Phasellus orci sem, rutrum.</p>

        <div class="heart">
            <img src="images/heart.pngs" class="hearty" /> 
            <a href="#"><img src="images/facebook.png" id="facebook" class="sm_icon" alt="" /></a>  
            <a href="#"><img src="images/twitter.png" id="twitter" class="sm_icon" alt="" /></a>    
            <a href="#"><img src="images/pinterest.png" id="pinterest" class="sm_icon" alt="" /></a>    
            <a href="#"><img src="images/google.png" id="google" class="sm_icon" alt="" /></a>  
        <!--heart--></div>
    <!--container--></div>
</body> 
```

# ios - SQL 查询由于某种原因无法正常工作

> ID：15053933
> 
> 赞同：1
> 
> 时间：2013-02-24T16:39:33.223
> 
> 标签：ios, objective-c, xcode, sqlite

我正在为排行榜系统编写此查询。它需要返回与目标分数相关的下一个最接近的目标。出于某种原因，我的 sql 查询不起作用。

这是我的查询：

```
[NSString stringWithFormat:@"SELECT * FROM Children WHERE Completed > '%d' OR ( Completed = '%d' AND 'Current Stickers' > '%d')",completecount,completecount, stickercount]; 
```

completecount = 此人完成目标的次数stickercount = 此人拥有的贴纸数量。两者都是整数所以我希望查询返回完成它的人比这个人更多，或者它的次数是否相同，并且他们是否有比他们更多的贴纸。

数据库布局：

```
NSString *sql = [NSString stringWithFormat:
                 @"CREATE TABLE IF NOT EXISTS '%@' ('%@'"
                 "TEXT PRIMARY KEY, '%@' TEXT, '%@' TEXT, '%@' TEXT, '%@' INTEGER, '%@' INTEGER, '%@' TEXT, '%@' INTEGER, '%@' INTEGER, '%@' INTEGER, '%@' INTEGER);", tableName, field1, field2, field3, field4, field5, field6, field7, field8, field9, field10, field11]; 
```

字段名称：

```
[self createTable:@"Children" withField1:@"Name" withField2:@"Password" withField3:@"House" withField4:@"Sticker Collection" withField5:@"Tickets Gathered" withField6:@"Tickets Removed" withField7:@"Last Ticket Scanned" withField8:@"Current Tickets" withField9:@"Completed" withField10:@"Complete" withField11:@"Current Stickers"]; 
```

这是实际的查询：

```
sqlite3_stmt *statement;
if (sqlite3_prepare_v2(Childdb, [sql UTF8String], -1, &statement, nil)==SQLITE_OK) {
    while (sqlite3_step(statement)==SQLITE_ROW) {
          char *field1 = (char *) sqlite3_column_text(statement, 0);
          NSString *field1Str = [[NSString alloc]initWithUTF8String:field1];
        char *field2 = (char *) sqlite3_column_text(statement, 8);
        NSString *field2Str = [[NSString alloc]initWithUTF8String:field2];
        char *field3 = (char *) sqlite3_column_text(statement, 10);
        NSString *field3Str = [[NSString alloc]initWithUTF8String:field3];
          NSLog(@"Name:%@",field1Str);
        NSLog(@"this is completecount: %@", field2Str);
        NSLog(@"this is stickcount: %@",field3Str); 
```

所以真正的问题是，尽管查询设置它仍然返回无效记录。看这个例子：

这个人的名字是斯图尔特：

```
2013-02-24 16:35:55.409 TableViewStory[15672:907] stickercount = 3
2013-02-24 16:35:55.410 TableViewStory[15672:907] completecount = 0
2013-02-24 16:35:55.412 TableViewStory[15672:907] Name:Oliver
2013-02-24 16:35:55.413 TableViewStory[15672:907] this is completecount: 1
2013-02-24 16:35:55.414 TableViewStory[15672:907] this is stickcount: 0
2013-02-24 16:35:55.415 TableViewStory[15672:907] Name:Rupert
2013-02-24 16:35:55.416 TableViewStory[15672:907] this is completecount: 2
2013-02-24 16:35:55.417 TableViewStory[15672:907] this is stickcount: 0
2013-02-24 16:35:55.418 TableViewStory[15672:907] Name:Emily
2013-02-24 16:35:55.419 TableViewStory[15672:907] this is completecount: 0
2013-02-24 16:35:55.420 TableViewStory[15672:907] this is stickcount: 0
2013-02-24 16:35:55.421 TableViewStory[15672:907] Name:Stuart
2013-02-24 16:35:55.423 TableViewStory[15672:907] this is completecount: 0
2013-02-24 16:35:55.424 TableViewStory[15672:907] this is stickcount: 3 
```

看看这个，它甚至在结果中显示自己 ^ 在这里。不仅如此，它甚至显示了 Emily 的完整计数但不比 Stuart 更多的贴纸，而且 Emily 仍然被检索到。这里发生了什么？

Ege Akpinar 要求删除部分 where 子句：

```
 NSString *sql = [NSString stringWithFormat:@"SELECT * FROM Children WHERE Completed > %d",completecount]; 
```

结果：

```
2013-02-24 17:37:22.626 TableViewStory[15814:907] This is the sticker count: 4
2013-02-24 17:37:22.627 TableViewStory[15814:907] This is the complete count: 0
2013-02-24 17:37:22.629 TableViewStory[15814:907] Name:Oliver
2013-02-24 17:37:22.629 TableViewStory[15814:907] this is completecount: 1
2013-02-24 17:37:22.630 TableViewStory[15814:907] this is stickcount: 0
2013-02-24 17:37:22.631 TableViewStory[15814:907] Name:Rupert
2013-02-24 17:37:22.632 TableViewStory[15814:907] this is completecount: 2
2013-02-24 17:37:22.633 TableViewStory[15814:907] this is stickcount: 0 
```

完全删除 where 子句：

```
NSString *sql = [NSString stringWithFormat:@"SELECT * FROM Children"]; 
```

结果：

```
2013-02-24 17:38:42.698 TableViewStory[15829:907] This is the sticker count: 4
2013-02-24 17:38:42.699 TableViewStory[15829:907] This is the complete count: 0
2013-02-24 17:38:42.700 TableViewStory[15829:907] Name:Oliver
2013-02-24 17:38:42.701 TableViewStory[15829:907] this is completecount: 1
2013-02-24 17:38:42.702 TableViewStory[15829:907] this is stickcount: 0
2013-02-24 17:38:42.703 TableViewStory[15829:907] Name:Rupert
2013-02-24 17:38:42.704 TableViewStory[15829:907] this is completecount: 2
2013-02-24 17:38:42.705 TableViewStory[15829:907] this is stickcount: 0
2013-02-24 17:38:42.707 TableViewStory[15829:907] Name:Emily
2013-02-24 17:38:42.708 TableViewStory[15829:907] this is completecount: 0
2013-02-24 17:38:42.709 TableViewStory[15829:907] this is stickcount: 0
2013-02-24 17:38:42.710 TableViewStory[15829:907] Name:Stuart
2013-02-24 17:38:42.711 TableViewStory[15829:907] this is completecount: 0
2013-02-24 17:38:42.712 TableViewStory[15829:907] this is stickcount: 4 
```

将括号放在语句上：

```
 NSString *sql = [NSString stringWithFormat:@"SELECT * FROM Children WHERE (Completed > %d) OR (Completed = %d AND 'Current Stickers' > %d)",completecount,completecount, stickercount]; 
```

这是结果：

```
2013-02-24 17:59:33.987 TableViewStory[15898:907] This is the sticker count: 4
2013-02-24 17:59:33.988 TableViewStory[15898:907] This is the complete count: 0
2013-02-24 17:59:33.990 TableViewStory[15898:907] Name:Oliver
2013-02-24 17:59:33.991 TableViewStory[15898:907] this is completecount: 1
2013-02-24 17:59:33.992 TableViewStory[15898:907] this is stickcount: 0
2013-02-24 17:59:33.993 TableViewStory[15898:907] Name:Rupert
2013-02-24 17:59:33.994 TableViewStory[15898:907] this is completecount: 2
2013-02-24 17:59:33.995 TableViewStory[15898:907] this is stickcount: 0
2013-02-24 17:59:33.996 TableViewStory[15898:907] Name:Emily
2013-02-24 17:59:33.997 TableViewStory[15898:907] this is completecount: 0
2013-02-24 17:59:33.998 TableViewStory[15898:907] this is stickcount: 0
2013-02-24 17:59:33.999 TableViewStory[15898:907] Name:Stuart
2013-02-24 17:59:34.000 TableViewStory[15898:907] this is completecount: 0
2013-02-24 17:59:34.002 TableViewStory[15898:907] this is stickcount: 4 
```

现在尝试当前贴纸>：

```
NSString *sql = [NSString stringWithFormat:@"SELECT * FROM Children WHERE 'Current Stickers' > %d",stickercount]; 
```

结果与斯图尔特：

```
2013-02-24 18:05:27.855 TableViewStory[15942:907] This is the sticker count: 4
2013-02-24 18:05:27.856 TableViewStory[15942:907] This is the complete count: 0
2013-02-24 18:05:27.857 TableViewStory[15942:907] Name:Oliver
2013-02-24 18:05:27.858 TableViewStory[15942:907] this is completecount: 1
2013-02-24 18:05:27.860 TableViewStory[15942:907] this is stickcount: 0
2013-02-24 18:05:27.861 TableViewStory[15942:907] Name:Rupert
2013-02-24 18:05:27.862 TableViewStory[15942:907] this is completecount: 2
2013-02-24 18:05:27.863 TableViewStory[15942:907] this is stickcount: 0
2013-02-24 18:05:27.864 TableViewStory[15942:907] Name:Emily
2013-02-24 18:05:27.865 TableViewStory[15942:907] this is completecount: 0
2013-02-24 18:05:27.866 TableViewStory[15942:907] this is stickcount: 0
2013-02-24 18:05:27.867 TableViewStory[15942:907] Name:Stuart
2013-02-24 18:05:27.868 TableViewStory[15942:907] this is completecount: 0
2013-02-24 18:05:27.870 TableViewStory[15942:907] this is stickcount: 4 
```

这让我觉得stickcount有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:08:40.923

我认为您的错误可能是您使用数字引号。删除参数周围的引号。

因此而不是`Completed > '%d'`使用`Completed > %d`（当然还有其他参数）

当您使用引号时，它很可能会将您的字符串转换为一个数字，这可以解释为什么会出现意外结果。

# mysql - 按日历周的 SQL 销售报告

> ID：15053941
> 
> 赞同：1
> 
> 时间：2013-02-24T16:40:24.703
> 
> 标签：mysql, sql, zen-cart

我已经在谷歌上搜索了几个小时......认为这很容易，但显然不适合我:)

我有两个表中的销售数据，我想为特定项目生成每周销售报告。为此，我不关心美元价值，只关心单位数量。“周”是日历周（无论开始日是什么，我不在乎）或只是从当前返回的 7 天块（所以第 1 周是最后 7 天，第 2 周是 8 - 15 天前，等等) - 以更容易的为准。我只是想监控一段时间内的销售趋势。最好它可以跨越多年，例如，如果它是 1 月的第一周，它就不会只显示一个记录。

数据来自 ZenCart。相关的表/列结构在这里：

```
Table "orders" has columns: orders_id, date_purchased

Table "orders_products" has columns: orders_id, products_id, product_quantity 
```

我遇到麻烦的地方是连接和语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:29:18.747

这满足了我的需求：

```
SELECT o.date_purchased, CONCAT(YEAR(o.date_purchased), LPAD(WEEK(o.date_purchased), 2, '0')) as weekyear, op.products_id, SUM( op.products_quantity )
FROM orders_products op
LEFT JOIN orders o ON op.orders_id = o.orders_id
WHERE op.products_id = 331
GROUP BY weekyear
ORDER BY weekyear 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:16:40.953

如果您有某些`date/datetime/timestamp`列，则可以[`week`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)在 where 子句中使用该函数

```
select week(now()) as week, sum(units) as total
from sales
where week(sales_date) = week(now()); 
```

或前一周

```
select week(now()) - 1 as week, sum(units) as total
from sales
where week(sales_date) = week(now()) - 1; 
```

从第 52/53 周到第 0/1 周，您必须注意这一年。

[SQLFiddle](http://www.sqlfiddle.com/#!2/63a89/4/1)用于测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-06T21:08:34.870

为了照顾年终包装。例如，`week(12/30/2018)=52`两者`week(12/31/2018)=52`都被视为 2018 年的第 52 周。2019 年的第一天从星期二开始。您可以编写如下案例陈述，将 12/30/2018 和 12/31/2018 移至 2019 年的第一周。这样您将有一个完整的 7 天周进行比较：

```
case when order_date in ( '2018-12-30', '2018-12-31')
     then 0
     else week(order_date)
end as order_week 
```

# javascript - 为什么我的 Kendo Tree 没有显示我的 JSON 数据？

> ID：15053952
> 
> 赞同：-1
> 
> 时间：2013-02-24T16:41:08.150
> 
> 标签：javascript, json, asp.net-mvc, kendo-ui, kendo-treeview

我无法获得剑道树来显示我一生的任何数据！我有一个返回这个 JSON 结构的 WebApi：

```
"Id":3,
"ParentId":0,
"FieldName":"",
"Value":"",
"OperationId":7,
"Children":[{
     "Id":4,
     "ParentId":3,
     "FieldName":"",
     "Value":"",
     "OperationId":8,
     "Children":[{
         "Id":5,
         "ParentId":4,
         "FieldName":"xyz",
         "Value":"abcd",
         "OperationId":5,
         "Children":null,
         "HasChildren":false
          },    
         "Id":6,
         "ParentId":4,
         "FieldName":"asdf",
         "Value":"somedata",
         "OperationId":5,
         "Children":null,
         "HasChildren":false
         }],
   "HasChildren":true},{.....blah blah you get the picture 
```

我的JS如下：

```
var Tree;
var Root;

$(document).ready(function () {
    Root = new kendo.data.HierarchicalDataSource({
            transport: {
                read: {
                    url: "@Url.Action("GetData", "MyController")",
                    dataType: "json",
                    type: "POST",
                    data: { 'someId': 1 }
                }
            },
            schema: {
                model: {
                    id: "Id",
                    hasChildren: "HasChildren"
                }
            }
        });

        Tree = $("#treeview").kendoTreeView({
            dataSource: Root,
            dataValueField: "Id",
            dataTextField: "OperationId",               
        });
    }); 
```

我在这里做错了什么？Fiddler 和 chrome 从带有 json 数据的 WebApi 调用中显示出良好的结果。当页面加载时，Kendo 树控件会显示 Loading 微调器，然后它会变为空白。我已经认真地花了几个小时在这上面。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:05:49.303

我认为演示 @ [http://demos.kendoui.c](http://demos.kendoui.com/web/treeview/remote-data.html) ​​om/web/treeview/remote-data.html应该向您展示您需要知道的一切，以便将它放入包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:45:45.660

HasChildren 属性似乎是 Children 属性的子属性。它不是直接脱离层次结构中的顶级对象，类似于与您的架构定义冲突的 ID。这可能是罪魁祸首吗？

# c# - 如何从客户端计算机连接到 SQL Server？

> ID：15053954
> 
> 赞同：0
> 
> 时间：2013-02-24T16:41:33.083
> 
> 标签：c#, sql-server

大家好，我对我开发的项目有疑问和困惑，如果您帮助我改进我的项目，我将非常高兴。

我在 VS2010 中使用 C# 工作，我的数据库附加在 Sql Server 2008 中。我的应用程序应该在 LAN 中工作，所以我正在考虑制作这个应用程序的两个版本，第一个版本将包括数据库和 sql 服务器（当然还有winforms），第二个将只包含dotNet框架，它应该连接到另一台机器上安装的数据库。是否可以。如果是这样，怎么办？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T16:44:44.283

是的，这是可能的。将连接字符串的“数据源”更改为“服务器的 IP 地址”

假设在您安装了 sql server 的机器上，您正在使用此连接字符串

```
"data source=localhost;initial catalog=databasename;uid=sa;pwd=password" 
```

然后在客户端系统中你需要像这样改变它

```
"data source=IpAddressOfTheServer;initial catalog=databasename;uid=sa;pwd=password" 
```

注意：服务器和客户端都可以访问连接字符串中包含服务器 IP 地址的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:15:57.653

如果您的 (c# ) 代码中的连接字符串已设置，则将连接字符串的“数据源”更改为“服务器的 IP 地址”，另一种方式在 StartUp Project 中通过以下格式更改（App Config 或 WebConfig）中的连接字符串：

```
 <configuration>  
  <connectionStrings>
   <add name="DB" connectionString="Data Source=192.168.10.5;
    Initial Catalog=SafetyDB;Persist Security Info=True;User ID=sa;
    Password=a1234$; connection timeout=5000" />
</connectionStrings> 
```

# ios - Apple Mach-O Librarian 编译 CocoaPods 时出错

> ID：15053956
> 
> 赞同：0
> 
> 时间：2013-02-24T16:41:39.107
> 
> 标签：ios, xcode, compiler-errors

我可以很好地运行我的 iOS 应用程序，但是当我存档它时，我收到了这个错误消息

```
 Libtool "/Users/segiddins/Library/Developer/Xcode/DerivedData/Random_Rainbow-czqebqncxgyefwepjkdltmqvzrhx/Build/Intermediates/ArchiveIntermediates/Sometimes Red, Sometimes Blue/IntermediateBuildFilesPath/Pods.build/Release-iphoneos/Pods.build/Objects-normal/armv7/libPods.a" normal armv7
    cd "/Users/segiddins/Dropbox/Dev/Random Rainbow/Pods"
    setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/local/heroku/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/Library/Frameworks/Python.framework/Versions/3.3/bin:/opt/local/bin:/Users/segiddins/bin:/Users/segiddins/.npm:/usr/local/go/bin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool -static -arch_only armv7 -syslibroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk "-L/Users/segiddins/Library/Developer/Xcode/DerivedData/Random_Rainbow-czqebqncxgyefwepjkdltmqvzrhx/Build/Intermediates/ArchiveIntermediates/Sometimes Red, Sometimes Blue/BuildProductsPath/Release-iphoneos" -filelist "/Users/segiddins/Library/Developer/Xcode/DerivedData/Random_Rainbow-czqebqncxgyefwepjkdltmqvzrhx/Build/Intermediates/ArchiveIntermediates/Sometimes Red, Sometimes Blue/IntermediateBuildFilesPath/Pods.build/Release-iphoneos/Pods.build/Objects-normal/armv7/Pods.LinkFileList" -framework Foundation -o "/Users/segiddins/Library/Developer/Xcode/DerivedData/Random_Rainbow-czqebqncxgyefwepjkdltmqvzrhx/Build/Intermediates/ArchiveIntermediates/Sometimes Red, Sometimes Blue/IntermediateBuildFilesPath/Pods.build/Release-iphoneos/Pods.build/Objects-normal/armv7/libPods.a"

/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: can't open file list file: /Users/segiddins/Library/Developer/Xcode/DerivedData/Random_Rainbow-czqebqncxgyefwepjkdltmqvzrhx/Build/Intermediates/ArchiveIntermediates/Sometimes Red (No such file or directory)
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool failed with exit code 1
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:57:44.723

“有时是红色，有时是蓝色”对于开发环境中的文件来说是一个非常糟糕的名称。注意错误：
“有时红色（没有这样的文件或目录）”
并注意它是部分文件名，可能名称中的“，”会导致问题。

最佳实践：不要在文件名中使用空格 - 或其他“有趣”符号，使名称可发音。

一个相当激进的解决方案：
创建一个新项目，将文件拖到上面（使用好名称）并进行任何必要的设置。可能有更简单的方法，但鉴于 SO 的性质，这是最容易描述的。

# javascript - 如何创建浏览器扩展以在 Firefox 和 Google Chrome 中显示类似信息栏的 HTML 表单横幅？

> ID：15053959
> 
> 赞同：4
> 
> 时间：2013-02-24T16:41:58.340
> 
> 标签：javascript, google-chrome-extension, firefox-addon, forms, banner

我想创建一个浏览器扩展程序，它将在 Google Chrome 或 Firefox 网络浏览器中显示一个持久的类似信息栏的横幅。此横幅应将网站向下推，以免阻止网站中的任何内容。

我想在信息栏横幅中放置一个 HTML 表单，其中包含一些单选按钮、文本框、下拉框和用于提交 HTML 表单数据的按钮。我想让信息栏横幅在网页上持久存在，即用户可以浏览到其他网页，但信息栏横幅将留在浏览器窗口的顶部。

当用户单击按钮并提交 HTML 表单时，信息栏应该向上弹跳，然后向下弹跳以显示带有新 HTML 表单的新信息栏。

有谁知道是否可以在 Google Chrome 或 Firefox 浏览器中创建这种信息栏横幅？

我已经搜索了浏览器 API，但到目前为止我只找到了[Google Chrome 信息栏](http://dev.chromium.org/user-experience/infobars)功能。它似乎只能显示 1 行通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-02T15:04:34.050

就 Google Chrome 而言，截至 2014 年，[`chrome.infobars`](https://developer.chrome.com/extensions/infobars.html)Chrome 中终于有了可用的 API。

有关更多详细信息，请参阅

*   [如何在谷歌浏览器中制作工具栏？](https://stackoverflow.com/questions/6681697/how-to-make-a-toolbar-in-google-chrome/17279590#17279590)

*   [chrome.infobars Chome Toolbar API 发布时间表](https://stackoverflow.com/q/21512026/1122270)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:11:22.223

*   谷歌浏览器; [您需要将脚本](https://stackoverflow.com/q/6681697/1615483)注入当前文档 - 您不能将其放入 chrome 中。[**在此处**](http://developer.chrome.com/extensions/content_scripts.html)阅读有关 Google Chrome 内容脚本的更多信息。

*   火狐；可以，但必须用[XUL](https://developer.mozilla.org/en/docs/XUL)编写（类似于 XHTML）；看到这样的[**教程**](http://www.borngeek.com/firefox/toolbar-tutorial/)。

如果您想要两者都适用的东西，请沿着内容脚本路线走，因为它可以很容易地作为[**userscript**](http://userscripts.org/about/installing)移植到 FireFox 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-11T20:07:17.493

您可以在 content.js 中使用以下内容

```
var newSpan = document.createElement("newSpan");
newSpan.id = "newSpan";
newSpan.style.fontSize = "25px";
newSpan.style.fontWeight = "bold";
newSpan.textContent = "******Banner******"
newSpan.style.color = "red";
var elemDiv = document.createElement('div');
elemDiv.style.cssText = 'width:100%;height:10%;background:rgb(255,255,255);text-align: center;';
elemDiv.appendChild(newSpan);

window.document.body.insertBefore(elemDiv, window.document.body.firstChild); 
```

# facebook - Facebook“喜欢”给我网站的标志，但我希望出现不同的图像

> ID：15053960
> 
> 赞同：0
> 
> 时间：2013-02-24T16:41:59.133
> 
> 标签：facebook, facebook-like, facebook-likebox

当我点击我网站上的链接按钮时，我会在 Facebook 上收到我喜欢某样东西的通知，同时我的网站徽标会出现。但是我希望不显示网站的徽标，而是显示产品的图像。

我正在使用此 URL [https://developers.facebook.com/docs/reference/plugins/like/上的步骤 1 按钮](https://developers.facebook.com/docs/reference/plugins/like/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:48:27.417

您需要查看开放图形元标记，尤其是图像标记。`og:image`.

标签的完整示例及其工作方式可以在此处找到[http://developers.facebook.com/docs/opengraphprotocol/](http://developers.facebook.com/docs/opengraphprotocol/)但您需要的一般要点是：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
    <title>My Movie Website</title>
    <meta property="og:title" content="My Movie Website"/>
    <meta property="og:type" content="movie"/>
    <meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
    <meta property="og:image" content="http://mymovies.com/images/logo.png"/>
    <meta property="og:site_name" content="My Movies"/>
    <meta property="fb:admins" content="USER_ID"/>
    <meta property="og:description"
          content="Some content description blah..."/>
    ...
  </head>
  ...
</html> 
```

通过设置这个标签，它应该告诉 Facebook 要加载的图像。您可以在此处通过 Facebooks 工具在线测试此[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

# highcharts - Highcharts columnrange 具有奇怪的列高度/宽度

> ID：15053962
> 
> 赞同：0
> 
> 时间：2013-02-24T16:42:24.753
> 
> 标签：highcharts, highstock

我正在尝试为所有列创建一个具有固定宽度（范围）的柱形图（Highcharts）。我有大约 300 列，我想将它们实际绘制为线条，这就是为什么我为它们中的每一个分配一个非常小的范围 (0.001)。

数据格式基本是这样的：[numberId, min, max]。

但是，有时高度显示正确......但有时它以奇怪的高度出现，甚至所有列都不相同。我尝试了许多不同的方法，但我没有找到问题所在。

这是 jfiddle [http://jsfiddle.net/deSSf/3/](http://jsfiddle.net/deSSf/3/)（如果您调整图表区域的大小，您可能会看到效果）。小提琴实际上是在使用 HighStock，但是这个图表应该来自 highcharts lib。

我有截图，但不能发。

代码非常简单：

```
 chart: {
        renderTo: 'container',
        type: 'columnrange',
    },

    series: [{
        data: [[1,0,0.001],......]]
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:00:11.627

Highcharts 和 Highstock 之间存在巨大差异。在 Highstock 中，您可以访问[dataGrouping](http://api.highcharts.com/highstock#plotOptions.series.dataGrouping.approximation)，当图表上显示很多点时，它会收集数据和分组。

禁用它以获得工作示例：http: [//jsfiddle.net/deSSf/4/](http://jsfiddle.net/deSSf/4/)

```
 dataGrouping: {
                enabled: false
            } 
```

# java - 单击单选按钮时如何烤消息

> ID：15053969
> 
> 赞同：1
> 
> 时间：2013-02-24T16:43:40.553
> 
> 标签：java, android, json, android-intent

我正在开发一个测验，其中随机显示 50 个问题和 3 个选项（单选按钮），并且我正在使用 json 数组来存储问题。我的问题是如何在用户单击单选按钮（其中一个选项）告诉用户他/她是错误的或正确的之后显示敬酒消息。请帮助我如何实现这一目标。

太感谢了。非常感谢您的帮助！

这是我的代码：

```
private void showQuestion(int qIndex, boolean review) {
    try {
        JSONObject aQues = Question1.getQuesList().getJSONObject(
                qIndex);
        String quesValue = aQues.getString("Question");
        if (correctAns[qIndex] == -1) {
            String correctAnsStr = aQues.getString("CorrectAnswer");
            correctAns[qIndex] = Integer.parseInt(correctAnsStr);
        }

        question.setText(quesValue.toCharArray(), 0, quesValue.length());
        answers.check(-1);
        answer1.setTextColor(Color.BLACK);
        answer2.setTextColor(Color.BLACK);
        answer3.setTextColor(Color.BLACK);
        JSONArray ansList = aQues.getJSONArray("Answers");
        String aAns = ansList.getJSONObject(0).getString("Answer");
        answer1.setText(aAns.toCharArray(), 0, aAns.length());
        aAns = ansList.getJSONObject(1).getString("Answer");
        answer2.setText(aAns.toCharArray(), 0, aAns.length());
        aAns = ansList.getJSONObject(2).getString("Answer");
        answer3.setText(aAns.toCharArray(), 0, aAns.length());
        Log.d("", selected[qIndex] + "");
        if (selected[qIndex] == 0)
            answers.check(R.id.option1);
        if (selected[qIndex] == 1)
            answers.check(R.id.option2);
        if (selected[qIndex] == 2)
            answers.check(R.id.option3);

        setText();
        if (quesIndex == (Question1.getQuesList().length() - 1))
            next.setEnabled(false);

        if (quesIndex < (Question1.getQuesList().length() - 1))
            next.setEnabled(true);

        if (review) {
            Log.d("review", selected[qIndex] + "" + correctAns[qIndex]);

            if (selected[qIndex] != correctAns[qIndex]) {
                if (selected[qIndex] == 0)
                    answer1.setTextColor(Color.RED);
                if (selected[qIndex] == 1)
                    answer2.setTextColor(Color.RED);
                if (selected[qIndex] == 2)
                    answer3.setTextColor(Color.RED);
            }
            if (correctAns[qIndex] == 0)
                answer1.setTextColor(Color.GREEN);
            if (correctAns[qIndex] == 1)
                answer2.setTextColor(Color.GREEN);
            if (correctAns[qIndex] == 2)
                answer3.setTextColor(Color.GREEN);
        }
    } catch (Exception e) {
        Log.e(this.getClass().toString(), e.getMessage(), e.getCause());
    }
}

private void setAnswer() {
    if (answer1.isChecked())
        selected[quesIndex] = 0;
    if (answer2.isChecked())
        selected[quesIndex] = 1;
    if (answer3.isChecked())
        selected[quesIndex] = 2;

    Log.d("", Arrays.toString(selected));
    Log.d("", Arrays.toString(correctAns)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T16:49:07.133

```
RadioGroup mRadioGroup = (RadioGroup) findViewById(R.id.myRadioGroup);        
    mRadioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() 
    {
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            // check if the answer is right or wrong and Toast accordingly
        RadioButton radioButton = (RadioButton) findViewById(checkedId);
            //check the answer value corresponding to the checkedId RadioButton
        Toast.makeText(mContext, "...." , Toast.LENGTH_LONG).show();
        }
    }); 
```

# backbone.js - Backbonejs - 过滤模型中的集合

> ID：15053972
> 
> 赞同：0
> 
> 时间：2013-02-24T16:44:00.497
> 
> 标签：backbone.js, underscore.js

我有一系列车辆范围。每个 Range 都有一个 VehicleModels 数组，其中包含该范围内的模型。IE

**骨干模型和集合：**

```
App.Models.Range = Backbone.Models.extend({});
App.Collections.Ranges = Backbone.Collection.extend({
   model: Range
}); 
```

**JSON：**

```
[{
    "Name": "Range A",
    "VehicleModels": [
        {
            "Name": "1.2",
            "Fuel": "Petrol"
        },
        {
            "Name": "1.3",
            "Fuel": "Petrol"
        },
        {
            "Name": "1.6",
            "Fuel": "Petrol"
        }
    ]
},
{
    "Name": "Range B",
    "VehicleModels": [
        {
            "Name": "x1",
            "Fuel": "Diesel"
        },
        {
            "Name": "x2",
            "Fuel": "Diesel"
        },
        {
            "Name": "x3",
            "Fuel": "Diesel"
        }
    ]
}] 
```

如何过滤集合以返回范围而不是具有与过滤条件匹配的属性的 VehicleModel。即返回具有燃料属性等于“汽油”的车辆模型的所有范围。很容易通过模型属性过滤集合，例如：

```
filterByFuel: function(fuel){
   return this.models.where({'Fuel': fuel});
} 
```

或者

```
filterByFuel: function(fuel){
   return this.models.filter(function(vehicle) {
                     return vehicle.get('Fuel') === fuel;
                });
} 
```

但需要在每个 Range 中搜索 VehicleModel 集合，如果匹配则返回**Range 。**

非常感谢提示。

**编辑**

我有以下似乎可行的方法，但很好奇是否有更好的方法。下划线“包含”功能似乎是正确的，但无法让它工作：

```
 models = models.filter(function(range) {
                if (_.where(range.get('VehicleModels'), { 'Fuel': params.fuel }).length > 0)
                    return range;
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T16:51:06.050

首先，Backbone 不会将嵌套对象视为单独的集合。它们只是数组。

所以当你这样做时：

`this.model.get("VehicleModels")`

你只会得到一个`Array`类型对象而不是一个`Backbone.Collection`.

要过滤普通数组，您应该使用下划线的`filter`方法。

`_.filter( this.model.get("VehicleModels"), function(mod) { /* your condition */ } );`

# c - if条件下的C宏

> ID：15053975
> 
> 赞同：0
> 
> 时间：2013-02-24T16:44:10.357
> 
> 标签：c, macros

我在这里遇到的一个非常简单的问题。

我有一个全局变量的小宏，它在我的 Header 中定义，如下所示：

```
extern bool uart_message_received;
#define get_uart_message_rec() uart_message_received; 
```

在我的 C 文件中，我想像这样访问文件：

```
 bool uart_message_received = 0;
 void foo(void)
 {
       bool test;
       test = get_uart_message_rec();  // Works fine

       if(get_uart_message_rec()==0)    // Doesn't work
       {
          //...
       } 
 } 
```

我有点困惑为什么条件`if`不起作用。我做错了什么，还是我违反了一些 C 指令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T16:46:21.490

删除末尾的冒号：

```
#define get_uart_message_rec() uart_message_received; 
```

因为它变成：

```
if(**uart_message_received;**==0)    // Doesn't work
{
    //...
} 
```

当预处理器基本上确实在您的代码上查找/替换时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T16:46:24.860

```
#define get_uart_message_rec() uart_message_received
                                                 // ^ no semicolon 
```

宏替换将按原样替换文本，包括`;`您的情况。在这种情况下会导致语法错误`if`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T16:47:01.210

您的宏末尾有一个分号 - 删除它，它会很好。请注意，宏确实替换了所写的内容，因此您的宏扩展自：

```
if(get_uart_message_rec()==0) 
```

到：

```
if(uart_message_received; ==0) 
```

这应该会使编译器出错。

【写得太慢了！】

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-24T16:47:05.300

这是因为你在宏的末尾有一个分号。

在实际编译器看到文本之前，宏被*原样*替换，因此替换后的语句如下所示：

```
if(uart_message_received;==0) 
```

# c# - 实现数据库搜索

> ID：15053978
> 
> 赞同：2
> 
> 时间：2013-02-24T16:44:31.403
> 
> 标签：c#, mysql, sql, search, select

我使用 mysql 作为存储数据的数据库。

我有一个带有文本框、单选按钮、组合框等的窗体；人们在其中提供有关自己的个人信息，例如（名字、姓氏、性别、生日日期、电话、父亲姓名等等）。（共 40 个字段）

我想做一个搜索按钮。使用此按钮，我想填写一些字段，然后按搜索按钮打开一个新窗口，其中包含所有具有相同个人信息的人。我实现了为一个字段做一个搜索按钮（例如仅按名称搜索）。

但是当我选择使用多个字段进行搜索时，我遇到了问题。例如，我选择搜索所有姓名为：Chris、昵称：Dung、性别：Male、Birth_Country：UK 等的人，但是当我推送搜索时，它会返回一个与搜索数据无关的窗口。有人可以帮我吗？

更改后我为搜索按钮制作的代码是：

```
public MySqlDataAdapter da;
public DataSet ds;
public string sTable = "data";

private void anazitisi_button_Click(object sender, EventArgs e)
        {
            Form2 form2 = new Form2();
            try
            {
                conn = openconnectio.GetConn();

                string radiob = null;                               
                if (radioButton1.Checked == true)
                {
                    radiob = radioButton1.Text;
                }
                else if(radioButton2.Checked == true)
                {
                    radiob = radioButton2.Text;
                }

                StringBuilder Query = new StringBuilder("SELECT * FROM data d INNER JOIN country c ON d.id_data = c.id_country WHERE 1=1 ");
                if (!String.IsNullOrEmpty(textBox1.Text))
                    Query.Append(" AND name like '" + textBox1.Text + "'");
                if (!String.IsNullOrEmpty(textBox2.Text))
                    Query.Append(" AND lastname like '" + textBox2.Text + "'");
                if (!String.IsNullOrEmpty(radiob))
                    Query.Append(" AND sex like '" + radiob + "'");
                if (!String.IsNullOrEmpty(maskedTextBox1.Text))
                    Query.Append(" AND birthdate like '" + maskedTextBox1.Text + "'");
                if (!String.IsNullOrEmpty(maskedTextBox2.Text))
                    Query.Append(" AND phone_number like '" + maskedTextBox2.Text + "'");

                MySqlDataAdapter da = new MySqlDataAdapter(Query.ToString(), conn);
                ds = new DataSet();
                da.Fill(ds, sTable);
                conn.Close();
            }
            catch (MySql.Data.MySqlClient.MySqlException ex)
            {
                MessageBox.Show(ex.Message);

            }
            finally
            {
                DataGridView dg1 = new DataGridView();
                form2.Controls.Add(dg1);
                dg1.Dock = DockStyle.Fill;

                dg1.Refresh();
                dg1.DataSource = ds;
                dg1.DataMember = sTable;

                form2.Show();

                if (conn != null)
                {
                    conn.Close();
                }
            }
        } 
```

当我评论该代码时，我的搜索结果很好：（
生日代码）并且我当然不用作搜索。

```
 //if (!String.IsNullOrEmpty(maskedTextBox1.Text))
        //    Query.Append(" AND birthdate like '" + maskedTextBox1.Text + "'"); 
```

但是当我使用（生日代码）时，我得到的结果只有一个空白行。
**我认为**因为生日 maskedTextbox 有一个掩码：00/00/0000 有什么
建议吗？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:56:01.527

我认为您应该考虑三件事
**1-**您可以在查询中将**OR**替换为**And**
我的意思是而不是使用

```
da = new MySqlDataAdapter(
"SELECT * FROM data INNER JOIN country ON id_data = id_country 
 WHERE name like '" + textBox1.Text + 
"'OR lastname like '" + textBox2.Text + 
"'OR sex like '" + radiob + 
"'OR birthdate like '" + maskedTextBox1.Text + 
"'OR phone
_number like '" + maskedTextBox2.Text + "' ;", conn); 
```

您可以使用

```
 da = new MySqlDataAdapter(
 "SELECT * FROM data INNER JOIN country ON id_data = id_country 
 WHERE name like '" + textBox1.Text + 
 "'AND lastname like '" + textBox2.Text + 
 "'AND sex like '" + radiob + 
 "'AND birthdate like    '" + maskedTextBox1.Text + 
 "'AND phone_number like '" + maskedTextBox2.Text + "' ;", conn); 
```

**2-**您必须根据您的文本框构建查询字符串，否则查看它们是否有任何值，如下所示：

```
StringBuilder Query = "SELECT * FROM data INNER JOIN country ON id_data = id_country 
     WHERE 1=1 ";
if(!String.IsNullOrEmpty(textBox1.Text))
  Query.Append(" AND name like '" + textBox1.Text);
.... 
```

**3-** [Sql 注入漏洞](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T17:47:35.507

我的天啊 ！！！一些编程！

where 子句必须由 and/or ,... 其他子句创建，所以 ,

存在两种解决方案：在服务器端按以下定义存储过程：
您必须注意以下 AND/OR 的位置：

```
CREATE  PROCEDURE [dbo].[dbo_Bank_SELByFields] 
(
  @ID  nvarchar(50)  = NULL , 
  @BankName   nvarchar(50)  = NULL , 
  @BankCode   nvarchar(50)  = NULL , 
  @Address   nvarchar(50)  = NULL , 
  @BranchCode   nvarchar(50)  = NULL  
)
AS 
SELECT * FROM  dbo.Bank WHERE 
( 
 (@ID  IS NULL OR ID = @ID) AND
 (@BankName  IS NULL OR BankName =@BankName) AND
 (@BankCode  IS NULL OR BankCode =@BankCode) AND
 (@Address  IS NULL OR Address =@Address) AND
 (@BranchCode  IS NULL OR BranchCode =@BranchCode)  
) ORDER BY BankCode

//---you know call the Sp  . OK? 
```

以及您的业务层代码中的其他解决方案：如果您使用实体框架等 ORM，非常容易通过 IQueryable 对象，您可以使用以下方法：

```
 var selectByEnyCondition=(from c in ctx.customer ...);
 //---- you must add by below way : 
 if(!(String.IsNullOrEmpty(txtName.Text)))
 {
    selectByEnyCondition.Where(.....);
 }
 if(!String.IsNullOrEmpty(sex))
 {
  selectByEnyCondition= opportunites.Where(.....);
 }
 //------ 
 /* **** beacuse you use by ADO.NET technique you should use StringBuilder -->*/
  StringBuilder query;
  query.add("SELECT * FROM BankTbl WHERE ");

  if(!(String.IsNullOrEmpty(txtName.Text))){ 
   query.Add("Name Like {0}",txtName.Text); 

  //-----now continue for build your criteria 
```

国王守卫
再见......

# internet-explorer-8 - Angularjs 指令的 IE 8 特定问题

> ID：15053980
> 
> 赞同：3
> 
> 时间：2013-02-24T16:44:49.887
> 
> 标签：internet-explorer-8, angularjs

这是对我在一个更大的应用程序中遇到的问题的简要再现。我似乎无法找到解决方案。如果您在 IE8 中运行此指令，则该`ui-popup`指令不起作用，并且脚本调试器控制台会显示错误消息`"TypeError: Object doesn't support this property or methodundefined"`。

我试图剥离尽可能多的指令、控制器和代码。

[jsFiddle 链接](http://jsfiddle.net/xf2BX/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:49:32.103

如果您将 angularjs 降级到 1.0.3，它可以在 ie8 中使用。

**编辑** Angular 1.0.5 也可以。

# matlab - 使用 Matlab 分割音频文件

> ID：15053986
> 
> 赞同：0
> 
> 时间：2013-02-24T16:45:24.937
> 
> 标签：matlab

如何使用 MATLAB 将音频文件拆分为多个部分？就像我有一个由钢琴的十个二十个音符组成的音频文件一样，我需要将其拆分为单个音符并将每个音符存储在一个单独的变量中。是否有可能用 MATLAB 做到这一点，如果可以的话怎么做？谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:47:46.650

如果您想直观地进行拆分，您可以尝试文件交换中提供的“简单音频编辑器”。

[http://www.mathworks.com/matlabcentral/fileexchange/19873-simple-audio-editor](http://www.mathworks.com/matlabcentral/fileexchange/19873-simple-audio-editor)

我是这个程序的作者。让我知道是否有什么不适用于此。

您还可以尝试使用像 audacity 这样的免费音频编辑器，并将单个片段导出到音频文件。您可以在 MATLAB 中分别阅读每一部分。

如果您希望自动实现这一点，您可能需要在信号处理组中提出这个问题。

# php - 通过 PHP 从 XML 中获取数据

> ID：15053993
> 
> 赞同：0
> 
> 时间：2013-02-24T16:46:07.950
> 
> 标签：php, xml-parsing

我在 XML 文件中有大量数据，但是在通过我的 PHP 代码获取数据时，网页进入处理然后挂起。XML 中有超过 17,000 条记录（与城市名称相关的数据）。我收到了一些建议，我应该按状态过滤数据，但无法实施该建议。

```
<?php
$q = $_GET["q"];
$xmlDoc = new DOMDocument();
$xmlDoc->load('http://aayam.co/wp-content/themes/squirreltheme/ifsc/cd_catalog.xml');

$x = $xmlDoc->getElementsByTagName('CITY');

for ($i = 0; $i <= $x->length - 1; $i++) {
    // Process only element nodes
    if ($x->item($i)->nodeType == 1) {
        if ($x->item($i)->childNodes->item(0)->nodeValue == $q) {
            $y = ($x->item($i)->parentNode);
        }
    }
}

$cd = ($y->childNodes);

for ($i = 0; $i < $cd->length; $i++) {  
    // Process only element nodes
    if ($cd->item($i)->nodeType == 1) {
        echo "<b style='color:green;'>" . $cd->item($i)->nodeName . ":</b> ";
        echo "<div style='color:green;'>" . $cd->item($i)->childNodes->item(0)->nodeValue . "        </div>";
        echo "<br>";
    }
} 
```

# servlets - 如何从 servlet 获取 JSF2.0 sessionMap 引用

> ID：15053996
> 
> 赞同：1
> 
> 时间：2013-02-24T16:46:24.580
> 
> 标签：servlets, jsf-2

下面的代码片段是我正在使用的。

```
ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
  Map<String, Object> sessionMap = externalContext.getSessionMap();
  sessionMap.put("User",user); 
```

现在我怎样才能从普通的“servlet”中获得高于“sessionMap”-“key”的值？像这样的代码会在`(User)session.getAttribute("User");`我的 servlet 中运行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T11:05:12.377

在 servlet 中，请求 / 会话 / 应用程序属性可从`doGet(HttpServletRequest request, HttpServletResponse response)`/`doPost(HttpServletRequest request, HttpServletResponse response)`方法中获得：

```
//request attributes
String string = (String)request.getAttribute("username");
//session attributes
String string = (String)request.getSession().getAttribute("username");
//application attributes
String string = (String)getServletContext().getAttribute("beanName"); 
```

当请求由 处理时`FacesServlet`，属性可用：

```
//request attributes
String string = (String)FacesContext.getCurrentInstance().getExternalContext().getRequestMap().get("username");
//session attributes
String string = (String)FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("username");
//application attributes
String string = (String)FacesContext.getCurrentInstance().getExternalContext().getApplicationMap().get("username"); 
```

## 推荐阅读

*   [BalusC 在 JSF 2.0 中的通信：托管 bean 范围](http://balusc.blogspot.ru/2011/09/communication-in-jsf-20.html#ManagedBeanScopes)；
*   [JSF - 按名称获取托管 bean](https://stackoverflow.com/questions/2633112/jsf-get-managed-bean-by-name/2633733#2633733)。