# StackOverflow 问答 12525000-12525999

# logging - 使用 goaccess 进行 nginx 日志分析

> ID：12525001
> 
> 赞同：22
> 
> 时间：2012-09-21T05:55:08.673
> 
> 标签：logging, nginx, log-analysis, goaccess

我想用[goaccess](http://goaccess.prosoftcorp.com/)解析和分析 nginx 日志，并从分析的日志中获取报告。但是，当我运行`zcat -f access.log.*.gz | goaccess -a -c`命令时，它给了我以下错误：

```
GoAccess - version 0.5 - Jun 26 2012 04:30:08
An error has occurred
Error occured at: parser.c - process_log - 584
Message: No date format was found on your conf file. 
```

我试图将该行添加`date_format %D %T`到 .goaccessrc 文件中，但出现另一个错误：

```
GoAccess - version 0.5 - Jun 26 2012 04:30:08
An error has occurred
Error occured at: parser.c - process_log - 588
Message: No log format was found on your conf file. 
```

我认为它要求 nginx 使用的日期和日志格式。但我的 nginx 配置中没有任何日期或日志格式。

此外，我尝试使用以前版本的 goaccess（0.4.2 版本）并且该`zcat -f access.log.*.gz | goaccess -a -c`命令工作正常。它不要求任何日期或日志格式，我可以查看 goaccess 菜单，我可以查看任何想要的数据。

但是当我尝试使用`zcat -f access.log.*.gz | goaccess -a -c > report.html` 命令获取 html 报告时，它什么也没做。它只是等待和等待。（没有给出任何警告或错误）

注意：我已经检查过这个网页，如果你也想看看。

1.  [http://goaccess.prosoftcorp.com/faq](http://goaccess.prosoftcorp.com/faq)
2.  [http://wiki.nginx.org/HttpLogModule](http://wiki.nginx.org/HttpLogModule)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-19T12:24:24.440

得到它与以下工作`~/.goaccessrc`：

```
date_format %d/%b/%Y:%T %z
log_format %h - - [%d] "%r" %s %b "%R" "%u" 
```

我将 GoAccess 作为来自 wheezy 存储库的二进制包安装（无需重新编译源代码）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-23T20:48:57.710

假设您使用的是 CLF 格式字符串，我将使用它运行`goaccess`，`-c`然后`NCSA Combined Log Format`从配置菜单中进行选择。

![在此处输入图像描述](../Images/4ea117d4e8440b3b9b53ea7d3e0fe9a7.png)

`"$time_local"`在 nginx 中被替换为`"23/Aug/2010:03:50:59 +0000"`添加`date_format %d/%b/%Y`到您的 ~/.goaccessrc 中应该这样做。

**更新 1**：

从源代码安装 v0.5

1.  `Download`最新[版本](http://goaccess.io/download)

2.  `tar -xzvf goaccess-0.5.tar.gz`

3.  `cd goaccess-0.5/`

4.  `./configure --enable-utf8`

5.  `make`

6.  `sudo make install`

7.  `goaccess -a -c /var/log/apache2/access.log`

    注意：如果您已经安装了它，那么您可能只需要在使用前执行第 7 步`zcat`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-23T10:23:53.397

如果您不想使用全局选项，请使用`--no-global-config`goaccess 选项。我每天都使用它来处理我的日志文件：

```
grep --color=auto `date +"%d/%b"` /var/log/nginx/sitename.access.log | goaccess --no-global-config > report.html 
```

访问版本：0.8

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-14T08:05:19.780

我和你遇到了同样的问题！配置文件路径正确“/etc/goaccess.conf”尝试这样做

```
 echo "date_format %d/%b/%Y
> log_format %h %^[%d:%^] “%r” %s %b “%R” “%u” %T
> time_format %H:%M:%S" >> /etc/goaccess.conf 
```

再试一次，祝你成功

# php - PHP 中的 SimpleXML 对象读取

> ID：12525004
> 
> 赞同：-2
> 
> 时间：2012-09-21T05:55:28.987
> 
> 标签：php, xml

在`$val`我得到这个值`SimpleXMLElement Object ( [0] => 464)`。我如何将价值放在`[0]`ie`464`中。我尝试使用 foreach 但它不起作用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:14:35.493

```
<?php
$doc = new SimpleXMLElement('<foo>464</foo>');
$a = (int)$doc; // or (string)
print_r($doc);
print_r($a); 
```

印刷

```
SimpleXMLElement Object
(
    [0] => 464
)
464 
```

# android - 在android中记录url访问

> ID：12525009
> 
> 赞同：0
> 
> 时间：2012-09-21T05:56:18.883
> 
> 标签：android, url, logging

我希望创建一个可以保存所有url访问的android应用程序，包括输入的url或点击访问的url。有人可以给我一个提示吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:09:35.990

一般来说，如果没有根设备，这是不可能的。虽然 Lokesh 的回答暗示了使用浏览器历史记录的可能性，但实际上用户很可能只是使用了另一个浏览器。您也没有考虑人们通过使用显示来自这些 URL 的信息但未显式加载到`WebView`? （例如，Gas Buddy 应用程序。）要可靠地执行此操作，您将需要某种代理，它可以实际监控网络流量并记录它。但是，您应该注意，如果不植根设备，这种能力将是不可能的。

# ios - Webcore：CFNetwork Loader：程序收到错误信号

> ID：12525010
> 
> 赞同：1
> 
> 时间：2012-09-21T05:56:19.703
> 
> 标签：ios, ios5

我遇到以下崩溃，但不知道它是什么或从哪里开始查找

这只发生在 5.0 模拟器中。不在 6.0 或 5.1.1 模拟器上

任何帮助表示赞赏。

```
* thread #6: tid = 0x2903, 0x052fe95e libdispatch.dylib`_dispatch_retain + 4, stop reason = EXC_BAD_ACCESS (code=2, address=0x8)
frame #0: 0x052fe95e libdispatch.dylib`_dispatch_retain + 4
frame #1: 0x052fec26 libdispatch.dylib`dispatch_source_cancel + 18
frame #2: 0x0082c492 CFNetwork`_CFURLCacheDeallocate(void const*) + 64
frame #3: 0x0288b4e3 CoreFoundation`CFRelease + 291
frame #4: 0x007c11b1 CFNetwork`HTTPProtocol::~HTTPProtocol() + 459
frame #5: 0x0079a75d CFNetwork`CFClass::FinalizeObj(void const*) + 21
frame #6: 0x0288b4e3 CoreFoundation`CFRelease + 291
frame #7: 0x02941af0 CoreFoundation`__CFDictionaryStandardReleaseValue + 80
frame #8: 0x028a24b1 CoreFoundation`__CFBasicHashDrain + 241
frame #9: 0x0288b4e3 CoreFoundation`CFRelease + 291
frame #10: 0x007b2237 CFNetwork`SocketStream::~SocketStream() + 477
frame #11: 0x0079a75d CFNetwork`CFClass::FinalizeObj(void const*) + 21
frame #12: 0x0288b4e3 CoreFoundation`CFRelease + 291
frame #13: 0x007b1e0b CFNetwork`SocketStream::finalize(void const*) + 63
frame #14: 0x007b1dc6 CFNetwork`non-virtual thunk to SocketStream::finalize(void const*) + 29
frame #15: 0x007b1da1 CFNetwork`ReadStreamCallbacks::_finalize(__CFReadStream*, void*) + 37
frame #16: 0x028b301a CoreFoundation`__CFStreamDeallocate + 138
frame #17: 0x0288b4e3 CoreFoundation`CFRelease + 291
frame #18: 0x007bea6c CFNetwork`HTTPReadFilter::~HTTPReadFilter() + 128
frame #19: 0x0079a75d CFNetwork`CFClass::FinalizeObj(void const*) + 21
frame #20: 0x0288b4e3 CoreFoundation`CFRelease + 291
frame #21: 0x008502bc CFNetwork`non-virtual thunk to HTTPReadFilter::readStreamFinalize(__CFReadStream*) + 20
frame #22: 0x007bdf1c CFNetwork`CFNetworkReadStream::httpStreamFinalize(__CFReadStream*, void*) + 24
frame #23: 0x028b301a CoreFoundation`__CFStreamDeallocate + 138
frame #24: 0x0288b4e3 CoreFoundation`CFRelease + 291
frame #25: 0x007be70f CFNetwork`NetConnection::shutdownConnectionStreams() + 143
frame #26: 0x0084d1fc CFNetwork`NetConnection::closeStreamsIfPossibleOrSignalThatThatNeedsToBeDonePrettyPlease() + 42
frame #27: 0x007c285b CFNetwork`HTTPConnectionCacheEntry::removeUnauthConnection(__CFNetConnection*) + 179
frame #28: 0x00864d2d CFNetwork`HTTPConnectionCacheEntry::purgeIdleConnections(double) + 237
frame #29: 0x00861c1e CFNetwork`ConnectionCacheTLS::resetCacheForThisThread() + 120
frame #30: 0x007a9739 CFNetwork`ConnectionTimerTLS::_timerPurgeEntries(__CFRunLoopTimer*, void*) + 49
frame #31: 0x02953966 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
frame #32: 0x02953407 CoreFoundation`__CFRunLoopDoTimer + 551
frame #33: 0x028b67c0 CoreFoundation`__CFRunLoopRun + 1888
frame #34: 0x028b5db4 CoreFoundation`CFRunLoopRunSpecific + 212
frame #35: 0x028b5ccb CoreFoundation`CFRunLoopRunInMode + 123
frame #36: 0x00541e40 Foundation`+[NSURLConnection(Loader) _resourceLoadLoop:] + 398
frame #37: 0x004534e6 Foundation`-[NSThread main] + 76
frame #38: 0x00453457 Foundation`__NSThread__main__ + 1258
frame #39: 0x9176bed9 libsystem_c.dylib`_pthread_start + 335

#0  0x052bc95e in _dispatch_retain ()
#1  0x052bcc26 in dispatch_source_cancel ()
#2  0x018f1492 in _CFURLCacheDeallocate ()
#3  0x028494e3 in CFRelease ()
#4  0x018861b1 in HTTPProtocol::~HTTPProtocol ()
#5  0x0185f75d in CFClass::FinalizeObj ()
#6  0x028494e3 in CFRelease ()
#7  0x028ffaf0 in __CFDictionaryStandardReleaseValue ()
#8  0x028604b1 in __CFBasicHashDrain ()
#9  0x028494e3 in CFRelease ()
#10 0x01877237 in SocketStream::~SocketStream ()
#11 0x0185f75d in CFClass::FinalizeObj ()
#12 0x028494e3 in CFRelease ()
#13 0x01876e0b in SocketStream::finalize ()
#14 0x01876dc6 in virtual thunk to SocketStream::finalize(void const*) ()
#15 0x01876da1 in ReadStreamCallbacks::_finalize ()
#16 0x0287101a in __CFStreamDeallocate ()
#17 0x028494e3 in CFRelease ()
#18 0x01883a6c in HTTPReadFilter::~HTTPReadFilter ()
#19 0x0185f75d in CFClass::FinalizeObj ()
#20 0x028494e3 in CFRelease ()
#21 0x019152bc in non-virtual thunk to HTTPReadFilter::readStreamFinalize(__CFReadStream*) ()
#22 0x01882f1c in CFNetworkReadStream::httpStreamFinalize ()
#23 0x0287101a in __CFStreamDeallocate ()
#24 0x028494e3 in CFRelease ()
#25 0x0188370f in NetConnection::shutdownConnectionStreams ()
#26 0x019121fc in NetConnection::closeStreamsIfPossibleOrSignalThatThatNeedsToBeDonePrettyPlease ()
#27 0x0188785b in HTTPConnectionCacheEntry::removeUnauthConnection ()
#28 0x01929d2d in HTTPConnectionCacheEntry::purgeIdleConnections ()
#29 0x01926c1e in ConnectionCacheTLS::resetCacheForThisThread ()
#30 0x0186e739 in ConnectionTimerTLS::_timerPurgeEntries ()
#31 0x02911966 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ ()
#32 0x02911407 in __CFRunLoopDoTimer ()
#33 0x028747c0 in __CFRunLoopRun ()
#34 0x02873db4 in CFRunLoopRunSpecific ()
#35 0x02873ccb in CFRunLoopRunInMode ()
#36 0x035f6f90 in WebCore::runLoaderThread () 
```

# c++ - C++：专业化成员需要«template<>»语法

> ID：12525012
> 
> 赞同：5
> 
> 时间：2012-09-21T05:56:37.943
> 
> 标签：c++, static, g++

我究竟做错了什么？

```
template<class T>
class Binder
{
public:
    static std::vector< Binder< T >* > all;
    Node<T>* from;
    Node<T>* to;
    Binder(Node<T>* fnode, Node<T>* tonode)
    {
        from = fnode;
        to = tonode;
        Binder<T>::all.push_back(this);
    }
};

std::vector<Binder<int>*> Binder<int>::all = std::vector< Binder<int>* >(); //here it is 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T06:06:07.843

静态成员的定义被编译器解释为一种特化（实际上，它*是*一种特化：您正在给出一个特定于 的声明`T = int`）。这可以通过`template<>`在定义之前添加来解决。

在模板中定义静态成员有点麻烦：静态成员需要在标头之外定义，并且只有在您已经知道所有可能`T`的活页夹时才有可能。

例如，现在您正在为`T=int`. 现在，如果你开始`Binder<double>`在某个地方使用，静态成员将是一个未定义的引用。

# c# - 使用 Linklabel 图像获取没有任何文本的 onclick 事件

> ID：12525014
> 
> 赞同：1
> 
> 时间：2012-09-21T05:56:57.997
> 
> 标签：c#, winforms, linklabel

我在 C# winforms 中有一个链接标签。它没有文字，但有一张图片作为背景。有什么办法可以使用图像作为超链接来触发 onclick 事件？

我搜索了很多，我能找到的只是文本操作（比如将文本设置为透明的..等）。有没有实际使用文本的方法？另外，如果我可以获得链接标签的工具提示..它会更有帮助。

我希望这个问题不是太主流（我是 C# 新手）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:30:24.000

您可以在其中使用`button`a`image`并将其属性设置为`FlatStyle:Flat`外观`ImageLink`或使用`PictureBox`and 来显示工具提示，您可以使用在or`Tooltip`中调用新属性的工具。`button``PictureBox`

# html - 如何根据屏幕分辨率对齐 div

> ID：12525017
> 
> 赞同：0
> 
> 时间：2012-09-21T05:57:14.403
> 
> 标签：html, css

我正在尝试创建一个包含 8 个 div 的网站。每个 div 具有不同的高度（相同的宽度）。

div 应根据浏览器屏幕分辨率并排排列，方法如下：

```
 _________________________
|                         |
| ##### ##### ##### ##### |
| ##1## ##2## ##3## ##4## |
| #####       ##### ##### |
|       ##### ##### ##### |
| ##### ##6##       ##### |
| ##5## ##### ##7##       |
| #####             ##8## |
|_________________________| 
```

这个想法是，一旦用户的宽度变小，div 将按以下方式变为 3 列：

```
 ___________________
|                   |
| ##### ##### ##### |
| ##1## ##2## ##3## |
| #####       ##### |
|       ##### ##### |
| ##### ##5##       |  (There will be a scrollbar if needed)
| ##4## ##### ##### |
| #####       ##6## |
| ##### ##8## ##### |
| #####             |
|                   |
| ##7##             |
|___________________| 
```

如果用户有更宽的屏幕分辨率，将有 5 列

```
 _______________________________
|                               |
| ##### ##### ##### ##### ##### |
| ##1## ##2## ##3## ##4## ##5## |
| #####       ##### ##### ##### |
|       ##7## ##### #####       |
| #####       #####             |
| ##6##                         |
| #####       ##8##             |
|_______________________________| 
```

请注意，单元格和列之间的填充保持不变。

另请注意，div 的顺序应保持不变，这意味着如果您从左到右计数，则应保持 1-8 的顺序。

它应该支持IE8

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:59:42.143

将您的 div 设置为使用`display: inline-block;`这将确保每一行都不会交错。

then use css3 media queries to account for the various screen sizes.

tutorial about media queries. [http://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)

DEMO: [http://jsfiddle.net/tgdYq/](http://jsfiddle.net/tgdYq/) (resize the pane with the output)

as a quick example:

```
div {
    display: inline-block;
    width: 25%;
}

@media screen and (max-width: 420px) {
  div {
    width: 33%;
  }
}

@media screen and (min-width: 1200px) {
  div {
     width: 20%;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:03:07.470

Specify the width of the divs in %.

Example

HTML

```
<div class="wrapper">
<div class="dv">1</div>
<div class="dv">2</div>
<div class="dv">3</div>
<div class="dv">4</div>
<div class="dv">5</div>
<div class="dv">6</div>
<div class="dv">7</div>
<div class="dv">8</div>
</div>​ 
```

CSS

```
.wrapper{width:100%; 
background-color:red; 
overflow:auto; 
margin:0; padding:0}

.dv{width:25%; 
background-color:green; 
border:grey solid 1px; 
height:100px; float:left; 
display:table} 
```

​Demo here [http://jsfiddle.net/h5GeK/3/](http://jsfiddle.net/h5GeK/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:15:58.937

```
<html>
<head>
<style type="text/css">

    #main{
        width:100%;
        margin:auto;
}
.test{
    display:inline-block;
    width:300px;
    border:thin blue solid;

}
</style>
</head>
<body>
    <div id="main">
        <div class="test">Blah Blah Blah</div>
        <div class="test">Blah Blah BlahBlah Blah BlahBlah Blah Blah</div>
        <div class="test">Blah Blah BlahBlah Blah BlahBlah Blah Blah</div>
        <div class="test">Blah Blah BlahBlah Blah BlahBlah Blah BlahBlah Blah Blah
        Blah Blah BlahBlah Blah BlahBlah Blah BlahBlah Blah Blah</div>
        <div class="test">Blah Blah Blah</div>
        <div class="test">Blah Blah BlahBlah Blah BlahBlah Blah Blah</div>
        <div class="test">Blah Blah BlahBlah Blah BlahBlah Blah Blah</div>
        <div class="test">Blah Blah BlahBlah Blah BlahBlah Blah BlahBlah Blah Blah
        Blah Blah BlahBlah Blah BlahBlah Blah BlahBlah Blah Blah</div>
        <div class="test">Blah Blah Blah</div>
        <div class="test">Blah Blah BlahBlah Blah BlahBlah Blah Blah</div>
        <div class="test">Blah Blah BlahBlah Blah BlahBlah Blah Blah</div>
        <div class="test">Blah Blah BlahBlah Blah BlahBlah Blah BlahBlah Blah Blah
        Blah Blah BlahBlah Blah BlahBlah Blah BlahBlah Blah Blah</div>

    </div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T07:28:05.377

In that situation I prefer use `float: left` style. This allows divs automatically aligned one next to the other according the browser screen resolution.

```
<div class="div-container">
   <div>1</div>
   <div>2</div>
   <div>3</div>
   <div>4</div>
   <div>5</div>
   <div>6</div>
   <div>7</div>
   <div>8</div>
</div>​ 
```

Your styles can be:

```
#div-container
{
   width: 100%;
}

#div-container div
{
   float: left;
   width: 100px; //your fixed size
} 
```

Also there is a useful jQuery plugin: [http://masonry.desandro.com/](http://masonry.desandro.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T13:28:06.377

OK, there are a couple of considerations. 1/ Are you using media queries - I hope so - and you should be to get this done correctly. Use

```
    @media all and (max-width:640px){
    styles in here
    }
    @media all and (max-width:320px){
    styles in here
    }

```

Also The syles in here do need to be percentages - if you want 3 columns at say 320px but 4 colums at 640px use this

```
    @media all and (max-width:320px){
        div.column{/* 3 columns */
            width:33%; display-inline-block; padding:10px;
            -moz-box-sizing:border-box; -webkit-box-sizing:border-box; -moz-box-sizing:border-box;

        }
    }
    @media all and (max-width:640px){
        div.column{/* 4 columns */
        width:25%; display-inline-block; padding:10px;
        -moz-box-sizing:border-box; -webkit-box-sizing:border-box; -moz-box-sizing:border-box; 
        }
    }

```

DO NOT FORGET to use the "border-box" as this makes the box model include the paddings as the overall size rather than add to the box model and cause it to be too large for its parent container.

# c++ - 插入容器的对象必须在析构函数中清除？

> ID：12525019
> 
> 赞同：0
> 
> 时间：2012-09-21T05:57:15.790
> 
> 标签：c++, memory-leaks, containers

认为：

```
struct Foo
{
    int _b;
    std::string _name;
};

class Bar
{
public:
    vector<Foo>hold;
}; 
```

如果在析构函数上没有调用`hold.clear()`，是否意味着内存泄漏？我说的是对象，而不是指针，因为据我所知，`push_back`它会创建原始对象的副本；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:59:30.663

不，没有内存泄漏。当 a`Bar`超出范围时，它的数据成员`hold`将被销毁，并且由于`std::vector`设计良好，它所包含的所有元素都将被销毁。

```
struct Foo
{
    int _b;
    std::string _name;
    ~Foo() { std::cout << "Foo destructor"; }
};

class Bar
{
public:
    vector<Foo>hold;
};

int main()

{

  {
    Bar b;
    b.hold.push_back(Foo());
  } // Foo, vector<Foo> and b instances destroyed here

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:00:46.050

当一个对象被销毁时，它的所有成员也会被销毁。因此 Bar 的（自动生成的）析构函数将调用其持有成员的析构函数，该成员将调用其元素的析构函数。

总而言之：一切都会自动销毁。这是 C++ 中的保证：如果您按值操作对象，则可以保证当它们超出范围时它们将被销毁。您唯一需要明确销毁的是已在堆上分配的对象（即使用新对象）。

# android - 是 RTL - 支持 android 的 web 基础应用程序

> ID：12525022
> 
> 赞同：1
> 
> 时间：2012-09-21T05:57:34.430
> 
> 标签：android, iphone, html, css, web

我正在为阿拉伯语本地化开发移动 Web 应用程序，我们已经在该语言上做了很多页面，但是我有一个关于选择选项下拉的查询，这并不完美。

我们的要求是在左侧显示下拉箭头，而文本应在右侧。

我在本机浏览器（如 iPhone、三星 Galaxy S-3）上遇到特定设备的问题

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:58:41.257

我认为你唯一的选择是使用类似 jquery-UI 的东西。我需要用波斯语来完成这件事，而且我也没有运气......

# group-by - 狮身人面像，总和（@weight）/@count

> ID：12525023
> 
> 赞同：0
> 
> 时间：2012-09-21T05:57:35.360
> 
> 标签：group-by, sphinx

我有一个非常具体的查询，我目前正在使用 MySQL

我的表结构是：

```
id : INT, primary KeY, AUTO_INCREMENT
occupationID : INT
alias : VARCHAR(255) 
```

然后，我做一个

```
SELECT occupationID, (MATCH(alias) AGAINST ('Web Developer' IN NATURAL LANGUAGE MODE) / count(*)) as score FROM aliases group by occupationID order by score DESC LIMIT 0,2; 
```

此查询对每一行执行搜索，进行全面扫描，然后将匹配项除以其出现次数。这样，我得到了所有行的平均分数，从而达到了我需要的准确性。

这非常慢（20 秒），有 50k 记录表。（我并不感到惊讶，MySQL 全文非常慢......）。

使用 Sphinx，我想用这个查询建立一个索引：

```
select id,occupationID,alias, (SELECT count(*) from aliases AS A WHERE B.occupationID=A.occupationID) as nb   from aliases AS B 
```

然后做一个

```
$sphinx->setSelect("@id, sum(@weight)/nb as score");
$sphinx->setGroupBy("occupationID", GROUP_BY_ATTR, "score DESC"); 
```

和

```
$sphinx->query("Web Developer"); 
```

我这样做对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T14:36:36.087

大多。我发现的唯一奇怪之处是在原始 mysql 中，您按职业 ID 分组。但是在构建索引时，您使用 id 加入 - 这意味着计数将是具有相同 id 的数字，而不是示例职业 ID。

我也不确定 sum(@weight) 在 sphinx 中是否有效——理论上它应该有效，但是有一些奇怪的限制，所以如果不进行测试就无法确定。

# c# - 如何从 xml 读取和获取值

> ID：12525024
> 
> 赞同：-6
> 
> 时间：2012-09-21T05:57:39.717
> 
> 标签：c#, xml, xml-parsing

如何使用 c# 读取和获取“name”、“age”和“sex”的值？

```
<Details>
    <Name>xx</Name>
    <age>yy</age>
    <sex>zz</sex>
</Details> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T06:09:24.543

您可以使用[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387061.aspx)：

```
 var xdoc = XDocument.Parse(xml);
  var list = xdoc.Root.Descendants().Select(x => x.Value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T06:05:12.490

```
System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
doc.Load(@"c:\testapp\sample.xml");
// Root element
System.Xml.XmlElement root = doc.DocumentElement;
System.Xml.XmlElement nameElement =(System.Xml.XmlElement)root.ChildNodes[0];
string name = name.InnerText;
System.Xml.XmlElement ageElemnent =(System.Xml.XmlElement)root.ChildNodes[1];
string age = ageElemnent.InnerText;
System.Xml.XmlElement sexElemnent =(System.Xml.XmlElement)root.ChildNodes[2];
string sex= sexElemnent.InnerText; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:00:36.353

寻找 xml 解析器，

[http://msdn.microsoft.com/en-us/library/cc189056(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc189056(v=vs.95).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T06:03:31.260

1.  从您的 xml创建一个`XmlDocument`。读[这个](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)
2.  [使用 XmlDocument.SelectSingleNode](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.selectsinglenode.aspx)方法对该`XPath`文档进行查询。
3.  获取`InnerText`上面的结果表#2。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T06:05:39.900

您可以使用 ：

```
XmlDocument xml = new XmlDocument();

            string myXml=@"<Details>
                        <Name>xx</Name>
                        <age>yy</age>
                        <sex>zz</sex>
                        </Details>";
            xml.LoadXml(myXml);

            XmlNodeList xnList = xml.SelectNodes("/Details");
            foreach (XmlNode xn in xnList)
            {
                string name = xn["Name"].InnerText;
                string age = xn["age"].InnerText;
                string text = xn["sex"].InnerText;
                Console.WriteLine("Name: {0} {1} {2}", name, age, text);
            } 
```

***在问这个之前你应该得到一些信息***

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T06:30:22.387

还有 LINq to XML：

```
 XElement x = XElement.Load("In.xml");
        var details = new
        {
            Name = x.Element("Name").Value,
            Age = x.Element("age").Value,
            Sex = x.Element("sex").Value
        }; 
```

然后使用它，例如：

```
Console.WriteLine(details.Name);
Console.WriteLine(details.Age);
Console.WriteLine(details.Sex); 
```

# android - Android //intent.createChooser后对话框不可见看到黑屏

> ID：12525026
> 
> 赞同：-1
> 
> 时间：2012-09-21T05:57:43.633
> 
> 标签：android

**对话框在intent.createChooser 后不可见看到黑屏。**

并关闭电源按钮，出现对话框..

该问题出现在正常工作的 2.3 和 4.0 (ics) 版本上。

有人有想法么？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:05:18.333

尝试下一步：在某个按钮上单击插入下一个代码

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setCancelable(true);
                builder.setTitle("Title");
                builder.setInverseBackgroundForced(true);
                builder.setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                dialog.dismiss();
                            }
                        });
                builder.setNegativeButton("No",
                        new DialogInterface.OnClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                dialog.dismiss();
                            }
                        });
                AlertDialog alert = builder.create();
                alert.show(); 
```

这不是解决方案，只是尝试。检查它是否不起作用。所以你必须以这种方式搜索问题。

# iphone - 无法在点击时关闭键盘

> ID：12525030
> 
> 赞同：0
> 
> 时间：2012-09-21T05:58:10.700
> 
> 标签：iphone, objective-c, cocoa-touch, ios5

我试图在视图中的任何位置关闭键盘。这是我的代码

```
- (void)registerForNotifcationOfKeyboard
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWasShown:)
                                                 name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden:)
                                                 name:UIKeyboardWillHideNotification object:nil];
}

// Called when the UIKeyboardDidShowNotification is sent.
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    CGRect bkgndRect = activeField.superview.frame;
    bkgndRect.size.height += kbSize.height;
    [activeField.superview setFrame:bkgndRect];
    [scrollView setContentOffset:CGPointMake(0.0,kbSize.height/2 - activeField.frame.origin.y) animated:YES];
}

- (void) textFieldDidBeginEditing:(UITextField *)textField
{
    activeField = textField;
}

- (void) textFieldDidEndEditing:(UITextField *)textField
{
    activeField = nil;
}

-(BOOL) disablesAutomaticKeyboardDismissal
{
    return NO;
}

// Called when the UIKeyboardWillHideNotification is sent
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    scrollView.contentInset = contentInsets;
    scrollView.scrollIndicatorInsets = contentInsets;

}

- (void)viewDidLoad
{
    [self registerForNotifcationOfKeyboard];
     self.progressBar.hidden = YES;

    UIGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                initWithTarget:self action:@selector(dismissKeyboard)];
    [self.view addGestureRecognizer:tap];

    [super viewDidLoad];
}

-(void) dismissKeyboard
{
    [activeField resignFirstResponder];
} 
```

当我在任何地方按下水龙头时，这个函数`dismissKeyboard`确实被调用但它永远不会关闭键盘。

请如果有人有任何想法

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T06:17:36.260

这**总是**对我有用：

```
//if `dismissKeyboard` is located in your `UIViewController`'s sublass: 
-(void) dismissKeyboard
{
   [self.view endEditing:YES];
} 
```

来自 UIView 类参考：

```
 This method looks at the current view and its subview hierarchy for the text field that is currently the first responder.   
If it finds one, it asks that text field to resign as first responder. If the force parameter is set to **YES**, the text field is never even asked; it is **forced to resign**. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:03:43.123

我完全同意@Lukasz：使用视图的 endEditing 属性来关闭键盘

```
-(void) dismissKeyboard
{
  [self.view endEditing:YES]; //this will dissmiss keyboard;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:05:39.737

试试下面的代码。

在此之前在 .h 文件中使用 UITextFieldDelegate 。

在 .m 文件中

```
 textfieldname.delegate=self;

 - (BOOL)textFieldShouldReturn:(UITextField *)textField
{

    [textfieldname resignFirstResponder];

    return YES;

} 
```

上面的代码将在按下返回键时关闭键盘。在函数中使用下面的代码来关闭键盘。

```
[textfieldname resignFirstResponder]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T06:36:06.073

如果您想通过按视图内的任意位置来关闭键盘，那么您可以做两件事：

1：- 有一个 UIButton 具有 [UIColor clearColor] 并且等于视图的大小，并且在您关闭键盘的按钮的 IBAction 中。这不是一个好的做法，尽管它似乎有效。

2：- 转到身份检查器并将您的视图类更改为 UIControl 类，然后将 IBAction 添加到您的类以关闭您的键盘。

我希望这有帮助。干杯！！

# c# - 使用 c# 为 Salesforce 中的新联系人添加附件

> ID：12525032
> 
> 赞同：2
> 
> 时间：2012-09-21T05:58:16.183
> 
> 标签：c#, salesforce

我们需要为新联系人添加附件。我们正在使用 APEX 类来添加新联系人。我们能够创建新的联系人。我们需要维护联系人的订单信息。这对于可用字段/自定义字段是不可能的。因此，我们将尝试使用附件。一个客户可能有多个订单。您能否让我知道如何使用 c# 为联系人添加附件。

请找到以下代码片段：

```
Contact newContact = new Contact();

newContact.LastName = downloadInformation.Name;
newContact.Email = downloadInformation.Email;

try
{
    SforceService salesForce = new SforceService();
    MySFServiceService mySFServive = new MySFServiceService();
    mySFServive.SessionHeaderValue = new SForce.MyService.SessionHeader();

    LoginResult loginResult = salesForce.login("id", "password");
    mySFServive.SessionHeaderValue.sessionId = loginResult.sessionId;
    // UserRegistration is a method defined in our apex class.
    // parametter 1: contact object parameter
    // 2: account name
    mySFServive.UserRegistration(newContact, "Test Account");
}
catch (Exception ex)
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:34:34.100

将企业 WSDL 导入您的应用程序（看起来您已经拥有），然后创建附件对象的实例，将其主体设置为订单 blob，并将 parentId 设置为联系人的 ID。因此，您需要更新您的自定义 UserRegistration 调用以返回创建的contactId，然后您就可以这样做。

```
salesforce.SessionHeaderValue = new SforceService.SessionHeader();
salesforce.SessionHeaderValue.sessionId = loginResult.sessionId;
salesforce.Url = loginResult.serverUrl;
...
String contactId = mySFervive.UserRegistration(....);
Attachment a = new Attachment();
a.Body = readFileIntoByteArray(someFile);
a.parentId = contactId;
a.Name = "Order #1";

SaveResult sr = salesforce.create(new SObject [] {a})[0];
if (sr.success){ 
// sr.id contains id of newly created attachment
} else {
 //sr.errors[0] contains reason why attachment couldn't be created.
} 
```

# python - 在firefox下使用selenium时无法打开url

> ID：12525035
> 
> 赞同：0
> 
> 时间：2012-09-21T05:58:49.350
> 
> 标签：python, selenium

> **可能重复：**
> [selenium webdriver.get(url) 没有打开 url](https://stackoverflow.com/questions/7347494/selenium-webdriver-geturl-does-not-open-the-url)

我正在使用 selenium python 客户端，我的代码非常简单：

```
from selenium import webdriver

browser = webdriver.Firefox()
browser.get("http://www.google.com") 
```

我的火狐：15.0.1 操作系统：Ubuntu Python：2.6.5

它确实打开了Firefox，但没有打开谷歌，只是呆在那里什么都不做。

有什么帮助吗？

# xml - 查找不包含属性的节点？

> ID：12525037
> 
> 赞同：1
> 
> 时间：2012-09-21T05:58:55.547
> 
> 标签：xml, xquery, xml-attribute

我正在运行 XQuery 命令的 XML 文档的创建者`lang`在标题为英文的销售材料（书籍、唱片、CD 等）中将属性留在标题之外，因此很难找到英文标题。我正在寻找一种方法来定位不包含`xml:lang`属性的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T18:15:24.070

**仅使用**：

```
//title[not(@xml:lang)] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T05:58:55.547

添加包含该`not()`函数的 where 子句，以限制您的结果：

```
for $resulta in doc("test")//catalog/item/title
where $resulta[not(@xml:lang)] (: this line :)
return $resulta 
```

# r - 将方差分析表强制转换为表对象 R

> ID：12525044
> 
> 赞同：2
> 
> 时间：2012-09-21T05:59:36.010
> 
> 标签：r, anova, xtable

我正在运行很多 ANOVA 表，最终希望通过 xtable 包中的“xtable”函数运行它们以导出到 LaTeX。但是我需要为 xtable 提供一个表对象，它不会接受 ANOVA 对象。我基本上想将 ANOVA 表作为表对象。这是一些可重现的代码：

```
utils::data(npk, package="MASS")
npk.aovE <- aov(yield ~  N*P*K + Error(block), npk)
summary(npk.aovE) ## THIS IS THE TABLE I WANT AS A TABLE OBJECT 
```

我已经尝试了所有常见的嫌疑人（as.table、print 和 xtable(summary(npk.aoE))），但没有成功。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:07:12.553

通常人们想要的是通过以下方式获得的矩阵：

```
 coef( summary(npk.aovE) )  # which returns NULL 
```

正如帮助页面所说：“函数`coef`将提取具有标准误差、t 统计量和 p 值的系数矩阵。” 不幸的是，理论和实践并不总是一致的。该摘要对象实际上是两个数据框，其行为描述`?summary.aovlist`如下：

```
> summary(npk.aovE)[[2]]
          Df Sum Sq Mean Sq F value  Pr(>F)   
N          1 189.28  189.28  12.259 0.00437 **
P          1   8.40    8.40   0.544 0.47490   
K          1  95.20   95.20   6.166 0.02880 * 
N:P        1  21.28   21.28   1.378 0.26317   
N:K        1  33.14   33.14   2.146 0.16865   
P:K        1   0.48    0.48   0.031 0.86275   
Residuals 12 185.29   15.44                   
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
> summary(npk.aovE)[[1]]
          Df Sum Sq Mean Sq F value Pr(>F)
N:P:K      1   37.0   37.00   0.483  0.525
Residuals  4  306.3   76.57 
```

# ruby-on-rails - 如何对个人信息实施 256 位加密

> ID：12525056
> 
> 赞同：0
> 
> 时间：2012-09-21T06:01:26.353
> 
> 标签：ruby-on-rails, encryption

我们正在构建一个 Rails 应用程序，我们的一位客户询问我们是否使用行业标准的 256 位加密来确保个人信息的机密性。

是否有任何宝石可用于强制执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:15:44.913

首先强制在rails中使用ssl。可以在[http://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/中找到一个很好的总结如何做到这一点](http://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/)

其次，您必须配置您的网络服务器，以便它强制客户端使用 aes256 进行安全连接。如果您使用的是 apache，您可以从这里开始阅读[http://httpd.apache.org/docs/2.4/mod/mod_ssl.html](http://httpd.apache.org/docs/2.4/mod/mod_ssl.html)

应该是这样的。

# jquery - 枚举 JQuery 上的 $.each

> ID：12525060
> 
> 赞同：5
> 
> 时间：2012-09-21T06:01:59.333
> 
> 标签：jquery, enums, each

我在我的 Javascript 中定义了一个枚举，如下所示：

```
BankTypesEnum = {
        'Savings': '0',
        'HomeLoan': '1',
        'Current': '2',
       'salary': '3'
    } 
```

我想`$.each()`在此运行并与其他数据源的值进行比较。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T06:05:02.327

```
$.each(BankTypesEnum , function(key, value) { 
  alert(key + ': ' + value); 
}); 
```

根据您的需要编辑此代码，而不是 alert put compare 或您需要对键和值执行的任何其他操作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T06:09:13.547

你有必要使用 $.each() 吗？如果遍历它们是目的，您可以像这样简单地使用 for for in 循环：

```
var earnings=BankTypesEnum;
for(var myEarnings in earnings)
{
    //do something here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T06:08:17.047

试试这个

```
BankTypesEnum = {
    Savings: 0,
    HomeLoan: 1,
    Current: 2,
    salary: 3
}

$.each(BankTypesEnum, function(i, data) {
    console.log(i + ' - ' + data)
});​ 
```

检查[小提琴](http://jsfiddle.net/C3veS/1/)

# asp.net - 是否有任何使用.net 框架（最好是asp.net mvc）的真实世界开源backbone.js Web 应用程序

> ID：12525064
> 
> 赞同：2
> 
> 时间：2012-09-21T06:02:22.577
> 
> 标签：asp.net, asp.net-mvc, backbone.js

是否有任何使用backbone.js 的开源asp.net Web 应用程序，最好是那些具有在视图之间共享的复合视图和模型的应用程序。

拥有一些现实世界应用程序的源代码以更多地了解骨干网将是一件好事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:54:19.957

虽然[EpicWinHosting](http://epicwinhosting.com/)网络是真实世界，但它不是开源的。

但是，他们提供了一个非常[详细的博客](http://www.codethinked.com/building-epic-win-with-backbone-js)，其中包含您正在寻找的代码示例。

你见过[github 上的 Todo List 应用](https://github.com/kalpers/Todo-App--Backbone.js-and-ASP.Net-MVC)吗？

# c# - WPF 的流程图控制

> ID：12525069
> 
> 赞同：7
> 
> 时间：2012-09-21T06:03:21.953
> 
> 标签：c#, .net, wpf, flowchart

我需要设计一个可以创建/操作一个非常简单的算法流程图的控件。它只有条件（if、if、else）和赋值块。

我需要实现的一些关键功能是：

1.  用户可以在任何需要的地方自由添加/操作/删除条件和语句块。
2.  图表可以折叠/展开。（例如，如果我单击 b=3 赋值语句正下方的加号按钮，则下面的所有内容都将被折叠）

是否有任何可用于 .NET 的非专有控件可供我使用？如果不是，我应该采用哪些策略来解决这个问题？

![在此处输入图像描述](../Images/2f698de51da6fb765b6b047cb61beb52.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T17:38:59.437

您是否考虑过托管[WorkflowDesigner](http://msdn.microsoft.com/en-us/library/cc835242.aspx)？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T08:52:06.960

看看[图表设计器](http://www.codeproject.com/Articles/24681/WPF-Diagram-Designer-Part-4)。您应该能够使用它来获得灵感/帮助创建适合您需求的流程图控件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T13:10:46.557

另一个用于该工作的非免费 WPF 工具[http://www.nwoods.com/](http://www.nwoods.com/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-29T19:31:57.953

非专有是指免费吗？您可能想查看添加流程 [http://www.lassalle.com/](http://www.lassalle.com/)

它不是免费的，但非常值得。

# flash - 在存在嵌入式 Flash 对象的情况下，jQuery UI Slider 在 chrome 中滞后

> ID：12525084
> 
> 赞同：0
> 
> 时间：2012-09-21T06:04:31.103
> 
> 标签：flash, jquery-ui, jquery-plugins, lag, jquery-slider

我正在使用[LayerSlider](http://codecanyon.net/item/layerslider-the-parallax-effect-slider/full_screen_preview/922100) jQuery UI 插件，它是一个简单的图像滑块。单独测试时，滑块似乎在所有浏览器中都能正常工作。但我有一个菜单栏，它是一个嵌入式 swf flash 对象。如果我使用 swf 菜单下方的 jQuery 滑块，滑块似乎在 chrome 和 safari 中出现故障。它在任何情况下都可以在 FF 中正常工作。

这就是我所说的故障。在 FF 和 Chrome 中打开此链接。 [http://click-printit.co.uk/Test/](http://click-printit.co.uk/Test/)

在FF中，幻灯片很流畅，并且与底部的小进度条同步。在 Chrome 中，它完全不同步。

这是顶部没有 Flash 菜单的版本。 [http://click-printit.co.uk/Test/simple_slider.html](http://click-printit.co.uk/Test/simple_slider.html)

这似乎适用于所有浏览器。

如果我在后一个链接中插入这 4 行代码，滑块似乎在 Chrome 中不起作用。

```
<div>
            <object type="application/x-shockwave-flash" data="Menu.swf" width="953" height="38">
              <param name="quality" value="high" />
              <param name="wmode" value="transparent" />
              <param name="swfversion" value="6.0.65.0" />
            </object>
    </div> 
```

关于为什么只有当旁边有一个闪光灯物体时滑块才会失败的任何想法？并且只在 Chrome 和 Safari 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T00:02:42.010

以下是我在项目中使用的参数

```
 <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="window" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="true" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
                 <param name="base" value=" Flash/ShefBio/" /> 
```

但我认为你不应该使用 param value="transparent" param swfversion value="6.0.65.0" 我的代码适用于 ie,chrome 但它不能完全与 firefox 一起使用它实际上它不服从外部 css....

# ios - 为什么模拟器和设备上的 UITextView contentInset/padding 不同？

> ID：12525086
> 
> 赞同：4
> 
> 时间：2012-09-21T06:04:37.160
> 
> 标签：ios, layout, uitextview, padding

我正在我的设备上调试一个奇怪的文本换行问题，我已经追踪到`UITextView`从 XCode 4 开始对 contentInset 值进行了某种修改。

这是我用来展示此错误的示例代码：

```
NSString *message = @"How are you doing?";
CGSize messageDimensions = [message sizeWithFont:[UIFont systemFontOfSize:15.0]
                               constrainedToSize:CGSizeMake(self.view.frame.size.width,9999)
                                   lineBreakMode:UILineBreakModeWordWrap];
CGFloat xOffset = 20;
CGFloat yOffset = 20;

CGRect textViewFrame = CGRectMake(xOffset, yOffset, messageDimensions.width+16, messageDimensions.height+16);

self.textView = [[[UITextView alloc] initWithFrame:textViewFrame] autorelease];
self.textView.font = [UIFont systemFontOfSize:15.0];
self.textView.text = message;
self.textView.editable = NO;

[self.view addSubview:self.textView]; 
```

附件是在 iOS 5 模拟器和我的 iPhone 4 上运行代码的两个屏幕截图。

这是运行 iOS5 的 iPhone 4：

![设备](../Images/95d16da193a94e0c57b6ba99d3177a11.png)

下面是运行iOS5.0的模拟器：

![模拟器](../Images/51f298ba58bb8f9998ab83d3a1cc6c70.png)

如您所见，它包裹在一个中，而不是另一个。为了防止包装在我的 iOS4 设备上，我必须更改这一行：

```
CGRect textViewFrame = CGRectMake(xOffset, yOffset, messageDimensions.width+16, messageDimensions.height+16); 
```

填充 +17 而不是 +16。

谁能告诉我这是否是一个已知的错误，以及`UITextView`填充量是否是 UIKit 中某个我可以参考而不是硬编码的常量值？

谢谢！

# javascript - 为什么单击 div 时 document.execCommand 不起作用？

> ID：12525087
> 
> 赞同：8
> 
> 时间：2012-09-21T06:04:42.173
> 
> 标签：javascript, html

按钮和 div 都具有相同的“onclick”代码，但 execCommand 似乎只适用于按钮。按下 div 时有什么办法可以让它工作吗？

这是我的小提琴：http: [//jsfiddle.net/foreyez/ZzL8y/](http://jsfiddle.net/foreyez/ZzL8y/)

```
<button onclick="document.execCommand('bold',false,null);">Bold</button>
<div onclick="document.execCommand('bold',false,null);" style='border:1px solid black;width:50px;'>Bold</div>

<div id='input' contenteditable='true'>
    select some of this text and then hit one of the buttons above
</div> 
```

​</p>

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-21T06:51:59.497

您需要阻止`mousedown`div 上的事件，因为它会窃取焦点：

[更新的小提琴](http://jsfiddle.net/ZzL8y/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:46:16.270

请参阅此小提琴：- [http://jsfiddle.net/ZzL8y/4/](http://jsfiddle.net/ZzL8y/4/)
这不是完整的答案，但这些链接可能会对您有所帮助：-

1>[只为一个 div 设置 execcommand](https://stackoverflow.com/questions/5205544/set-execcommand-just-for-a-div)

2>[聚焦/单击时选择 contenteditable div 中的所有文本](https://stackoverflow.com/questions/3805852/select-all-text-in-contenteditable-div-when-it-focus-click)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-07T21:18:16.897

对于 Firefox，需要在 execCommand 之前设置 contenteditable = true。

对于 IE，没有必要。

# ruby-on-rails - Rails where In 不知道在哪里

> ID：12525090
> 
> 赞同：0
> 
> 时间：2012-09-21T06:04:56.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, where-in

`undefined method where`使用这些参数运行以下代码时，我不断收到错误消息。

谁能看到我做错了什么？

谢谢

```
 Parameters: {"category_ids"=>["1", "3", "4"]}

    @pieces = Piece.all
    @pieces = @pieces.where(:category_id => params[:category_ids]) if params[:category_ids].present?
    @pieces = @pieces.where(:brand_id => params[:brand_ids]) if params[:brand_ids].present?
    @pieces = @pieces.where(:color_id => params[:color_ids]) if params[:color_ids].present?
    @pieces = @pieces.where(:user_id => params[:friend_ids]) if params[:friend_ids].present? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:19:16.417

`User.all``Array`在`user objects`使用它时返回你一个这样`where`的错误 NoMethodError: undefined method `where' for Array

所以改用以下

```
@pieces = Piece.where(:category_id => params[:category_ids]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:09:49.770

它应该是：

`Piece.where(:category_id => params[:category_ids]) if params[:category_ids].present?`

# android - 在 ormlite 中找不到 com.j256.ormlite.field.DatabaseField

> ID：12525093
> 
> 赞同：2
> 
> 时间：2012-09-21T06:05:03.303
> 
> 标签：android, ormlite

我正在尝试在我的 android 应用程序中使用 ORM lite。在示例代码中有一个导入

```
import com.j256.ormlite.field.DatabaseField; 
```

但是，当 eclipse 没有看到这个导入时，我的项目也没有构建

```
The import com.j256.ormlite.field cannot be resolved 
```

我正在使用 ormlite-android-4.41.jar

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T06:11:35.783

引用 ORMLite 文档： [1.1 下载 ORMLite Jar](http://ormlite.com/docs/downloading)

> 要与 Android 应用程序一起使用，您应该下载 ormlite-android-4.41.jar 和 ormlite-core-4.41.jar 文件

# iphone - iPhone 5 4 英寸屏幕更新

> ID：12525094
> 
> 赞同：0
> 
> 时间：2012-09-21T06:05:09.557
> 
> 标签：iphone, xcode, user-interface, ios6, iphone-5

我正在为 iPhone 5 更新我的应用程序。现在我已经阅读了有关设置 Autosize 属性的主题，并且我已经完成了。

我的问题是关于我的一些元素。该应用程序的界面非常简单。它使用预定义的苹果背景（无自定义图像），并有 4 个标签和一个信息按钮。

其中两个标签很好，但另外两个和按钮与屏幕底部对齐，但使用自动调整大小会在它们和屏幕边缘之间创建 1/2 英寸的背景。

如果有任何方法可以让它们像那样停留在屏幕底部，但不必为 iPhone 5 创建一个全新的视图，将它们定位正确，并在需要时以编程方式选择它，因为这是一种有点过于复杂的方式为了两个标签和一个按钮。

已编辑

这是一些屏幕截图。

应该是这样的（iPhone 4S 3.5 英寸屏幕）

[链接的](http://imageshack.us/a/img641/6280/iossimulatorscreenshot2.png)

看起来像这样（iPhone 5 4 英寸屏幕）

[链接的](http://imageshack.us/a/img546/6280/iossimulatorscreenshot2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:11:44.330

要在使用 Autolayout 时获得预期的行为，在 Interface Builder 中，您需要选择底部的两个标签，然后转到

> 编辑器 -> 引脚 -> 底部空间到 Superview

这将确保底部间距符合预期。

# iphone - NSTask 实时监控输出

> ID：12525099
> 
> 赞同：0
> 
> 时间：2012-09-21T06:05:36.613
> 
> 标签：iphone, objective-c, macos, cocoa, nstask

我似乎无法监视我的 NSTask 命令的输出。据我了解，必须使用 NSNotificationCenter。我尝试运行的终端命令使用各种加密方法从我的安全服务器下载文件（在 Objective-c 中重写它会很痛苦）。我将需要监控结果，以便我可以收到已完成下载的百分比。

这是我到目前为止所拥有的

```
NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];

task = [[NSTask alloc]  init];
pipe = [[NSPipe alloc] init];

NSDictionary *defaultEnvironment = [[NSProcessInfo processInfo] environment];
NSMutableDictionary *environment = [[NSMutableDictionary alloc] initWithDictionary:defaultEnvironment];
[environment setObject:@"YES" forKey:@"NSUnbufferedIO"];
[task setEnvironment:environment];

[task setLaunchPath:[[NSBundle mainBundle] pathForResource:@"servDecryptor" ofType:nil]];
[task setArguments:[NSArray arrayWithArray:arguments]];
[task setStandardOutput:pipe];

fh = [pipe fileHandleForReading];

[nc addObserver:self
       selector:@selector(ready:)
           name:NSFileHandleReadCompletionNotification
         object:fh];
[nc addObserver:self
       selector:@selector(decFinished:)
           name:NSTaskDidTerminateNotification
         object:task];

[task launch];

[fh readInBackgroundAndNotify]; 
```

和

```
 //Ready method
    [[pipe fileHandleForReading] readInBackgroundAndNotify];
NSData *d;
d = [[note userInfo] valueForKey:NSFileHandleNotificationDataItem];

if ([d length] > 0) {
    NSString *s = [[NSString alloc] initWithData:d          encoding:NSUTF8StringEncoding];

} 
```

请注意：下载开始并继续进行，而无需进入我的第二种方法。但是，在下载完成并且该过程结束后，应用程序会崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:53:59.037

```
-(void)uploadData
{
setenv([@"PASSWORD" UTF8String], [mPassword UTF8String], 1);
[task setLaunchPath:executablePathRoot];
[task setArguments:array];
NSPipe *pipe = [NSPipe pipe];
NSPipe *errorPipe = [NSPipe pipe];
[task setStandardOutput:pipe];
[task setStandardError:errorPipe];
//keeps your log where it belongs
//[task setStandardInput:[NSPipe pipe]];

NSFileHandle *outFile = [pipe fileHandleForReading];
NSFileHandle *errFile = [errorPipe fileHandleForReading];

[task launch];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(terminated:)
                                             name:NSTaskDidTerminateNotification
                                           object:task];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(outData:)
                                             name:NSFileHandleDataAvailableNotification
                                           object:outFile];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(errData:)
                                             name:NSFileHandleDataAvailableNotification
                                           object:errFile];

[outFile waitForDataInBackgroundAndNotify];
[errFile waitForDataInBackgroundAndNotify];
NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];
while(!terminated) 
{
    if (![[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]) 
    {
        break;
    }
    [pool release];
    pool = [[NSAutoreleasePool alloc] init];
}
[pool release];

[self appendDataFrom:outFile to:output];
[self appendDataFrom:errFile to:error];
//[task waitUntilExit];
[task release];
}

-(void) outData: (NSNotification *) notification
{
NSLog(@"outData");
NSFileHandle *fileHandle = (NSFileHandle*) [notification object];
[self appendDataFrom:fileHandle to:output];
[fileHandle waitForDataInBackgroundAndNotify]; //Checks to see if data is available in a background thread.
}

-(void) errData: (NSNotification *) notification
{
NSLog(@"errData");
NSFileHandle *fileHandle = (NSFileHandle*) [notification object];
[self appendDataFrom:fileHandle to:output];
[fileHandle waitForDataInBackgroundAndNotify];
}

- (void) terminated: (NSNotification *)notification
{
NSLog(@"Task terminated");
[[NSNotificationCenter defaultCenter] removeObserver:self];
terminated =YES;
} 
```

# mahout - Mahout LDA 如何预测测试数据集上的主题？

> ID：12525104
> 
> 赞同：0
> 
> 时间：2012-09-21T06:05:52.017
> 
> 标签：mahout, lda, topic-modeling

从 apache Mahout 网站[https://cwiki.apache.org/MAHOUT/latent-dirichlet-allocation.html](https://cwiki.apache.org/MAHOUT/latent-dirichlet-allocation.html)我可以看到拟合 LDA 模型的过程并以 P("word" |“主题编号”）。但是，没有关于如何将经过训练的模型应用于测试数据来预测主题分布的信息。还是我们应该编写自己的程序来使用条件概率的输出来查找测试数据集上的主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T02:26:12.760

请查看 2009 年 Wallach 等人的出版物。人。[此处](http://dl.acm.org/citation.cfm?id=1553515)标题为“主题模型的评估方法” 。看一下第 4 节，它提到了三种计算 P(z|w) 的方法，一种基于重要性采样，另外两种称为“Chib-style estimator”和“left-to-right estimator”。

Mallet 实现了从左到右的估计方法。

# sql-server - SQL Server 2012 安装或添加全文搜索

> ID：12525106
> 
> 赞同：41
> 
> 时间：2012-09-21T06:05:59.940
> 
> 标签：sql-server, sql-server-2012, full-text-search

我在 SQL Server 2012 中工作，并且想使用 CONTAINS() 函数，但似乎我需要启用全文搜索才能使用它。如何在现有 SQL Server 2012 安装中启用/安装此功能？我需要的是步骤，因为我还没有找到有关此操作的步骤。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-21T13:16:45.723

**您可以通过更改程序和功能中的 SQL Server 程序**将全文添加到现有实例。请按照以下步骤操作。您可能需要原始磁盘或 ISO 才能完成安装。（根据 HotN 的评论：如果您有 SQL Server Express，请确保它是*带有高级服务*的 SQL Server Express 。）

方向：

1.  打开程序和功能控制面板。
2.  选择 Microsoft SQL Server 2012 并单击更改。
3.  当提示添加/修复/删除时，选择添加。
4.  通过向导前进，直到“功能选择”屏幕。然后选择全文搜索。

![步骤1](../Images/364b7ce1f21e3bc901cda45bcafae52c.png) ![第2步](../Images/2477f000d4e86f1f60daa2a8bbab6c7b.png)

![在此处输入图像描述](../Images/28e7a0dd91e767cf4168bf77422cac2b.png)

5.  在安装类型屏幕上，选择适当的 SQL Server 实例。

6.  继续完成向导的其余部分。

来源（附截图）：[http ://www.techrepublic.com/blog/networking/adding-sql-full-text-search-to-an-existing-sql-server/5546](http://www.techrepublic.com/blog/networking/adding-sql-full-text-search-to-an-existing-sql-server/5546)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:25:52.053

我认为以下链接可能会对您有所帮助-

[http://svenaelterman.wordpress.com/2012/04/14/step-by-step-enabling-semantic-search-on-sql-server-2012/](http://svenaelterman.wordpress.com/2012/04/14/step-by-step-enabling-semantic-search-on-sql-server-2012/)

# asp.net - 错误异常永远不会在客户端被捕获

> ID：12525108
> 
> 赞同：1
> 
> 时间：2012-09-21T06:06:23.333
> 
> 标签：asp.net, wcf, faultexception

我正在尝试在 WCF 服务中实现 FaultException。我参考了各种文章。然而，似乎 FaultExceptions 从未在客户端被捕获。我写过这样的代码，

服务合约 -

```
 [ServiceContract]
    public interface IService2
    {
        [OperationContract]
        [FaultContract(typeof(MyException))]
        [DebuggerStepThrough]
        MyException GetData(int value);
    }

    [DataContract]
    public class MyException 
    {
        [DataMember]
        public bool Result { get; set; }

        [DataMember]
        public string ErrorMessage { get; set; }

        [DataMember]
        public Exception MyInnerException { get; set; }

        [DataMember]
        public string ClientMessage { get; set; }
    } 
```

服务实施——

```
public class Service1 : IService2
    {

        public MyException GetData(int value)
        {
            MyException mx = new MyException();
            try
            {
                double a = 44;
                if (value == 0)
                {
                    throw new DivideByZeroException();
                }
                double res = a / value;
                mx.ClientMessage = "Everything is well";
                mx.Result = true;
                return mx;
            }
            catch (DivideByZeroException dvex)
            {
                mx.Result = true;
                mx.ClientMessage = "Divide by zero";
                mx.MyInnerException = dvex;
                mx.ErrorMessage = dvex.StackTrace;
                throw new FaultException<MyException>(mx, dvex.ToString());
            }                      

        }
    } 
```

客户端（aspx.cs 页面）-

```
try
            {
                FaultContractsDemo.ServiceReference1.Service2Client o = new ServiceReference1.Service2Client();
                MyException data = o.GetData(0);
                if (data.Result)
                    lblMessage.Text = "All is well";
            }
            catch (FaultException<MyException> ex)
            {
                lblMessage.Text = ex.Detail.ClientMessage;
            } 
```

服务层抛出异常，但客户端从未收到任何异常。我收到未处理的异常，例如，

> 基础连接已关闭：连接意外关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:41:10.327

我可以重现这个问题（在不同但非常相似的情况下）。问题是由这种组合引起的：

```
// Fault class:
[DataMember]
public Exception MyInnerException { get; set; }

// Just before throwing the FaultException
mx.MyInnerException = dvex; // <-- DivideByZeroException 
```

WCF 不喜欢对 DivideByZeroException 进行序列化，这是通过网络获取它所必需的。注释掉那行，事情可能会开始起作用。

除此之外，通常您不*希望*传递内部异常（至少：不是这样），因为这将被视为安全风险。但是有一个例外：这是在您进行调试时。在这种情况下，请参阅有关[IncludeExceptionDetailInFaults](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicedebugbehavior.includeexceptiondetailinfaults.aspx)的文章：这使您可以在客户端查看异常详细信息。

# macos - 如何使用ant在svn中提交单个文件

> ID：12525109
> 
> 赞同：0
> 
> 时间：2012-09-21T06:06:34.080
> 
> 标签：macos, file, svn, ant, commit

该文件已经在svn中，我在macos上对文件进行了一些更改，我想通过我的buildscript使用ant将它提交回svn。我知道单个文件提交的过程涉及

1.添加指定的文件和

2.提交指定的文件。

我的疑问是，如果文件已经存在于文件中，我们是否可以再次添加，因为我做了一些更改并且我只想提交该文件，并且不应该干扰目录中的其他文件。

我们如何在类似 Mac 的操作系统上做到这一点？过程是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T08:56:22.867

您可以使用此目标在 svn 中提交单个文件

```
<svnSetting
      svnkit="true"
      username="bingo"
      password="bongo"
      id="svn.settings"
  />
<svn refid="svn.settings">
    <commit file="your.file" />
</svn> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T19:29:35.637

如此[处所述](https://stackoverflow.com/questions/6037033/how-can-i-commit-a-single-file-using-svn-over-a-network)，您只能提交一个文件。您可以使用 Ant exec 命令来通过 ant 运行该 svn 命令行。

# hibernate - 基于日期选择记录的休眠查询？

> ID：12525111
> 
> 赞同：0
> 
> 时间：2012-09-21T06:06:58.617
> 
> 标签：hibernate, hql

我在数据访问层使用休眠，
所以我必须为以下 SQL 查询编写 HQL 查询。

> select * from MyTable where my_date >= '16-SEP-2012'

它工作正常.. 为此，我编写了 HQL 查询，如下所示，

> 从 MyTable 作为 NB where NB.my_date >=date

它抛出一个错误..

> 从 MyTable as NB where NB.my_date >=Mon Mar 07 00:00:00 IST 1 org.hibernate.hql.ast.QuerySyntaxException：意外令牌：Mar

如何为此编写 HQL 查询.. 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:19:34.730

尝试 :date，因为您当前的代码是语法错误。如果它仍然不起作用，请尝试使用 yyyy-MM-dd 格式 - 这可能是语言环境问题。还要确保正确设置参数，您没有包含代码的那部分。

# php - 有什么用 问问题

> ID：12525112
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, javascript, html, css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:12:21.950

浏览器将尝试`!/page_Home`在窗口视图中引入带有 id 的元素。`onhashchange`但开发人员通常使用它在 JavaScript 中使用事件（例如，导航）采取一些行动。我用来`hashchange`在我的网站上打开新应用程序。

[更多信息](http://danwebb.net/2011/5/28/it-is-about-the-hashbangs)

# oracle - 如何在 OBIEE 分析中更新 RPD 文件

> ID：12525118
> 
> 赞同：0
> 
> 时间：2012-09-21T06:07:40.673
> 
> 标签：oracle, business-intelligence

我是 OBIEE 的新手，正在寻找一种更新我的存储库文件 (RPD) 的方法，即我最初配置了一个 RPD，现在对 oracle 数据库中的某些视图进行了一些更改（添加到列上）。现在我可以做什么来更新我的 RPD 文件，以便我可以看到这个更改（我需要通过管理工具处理 RPD 文件）。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:39:22.653

您所要做的就是 1\. 修改 RPD 2\. 停止 BI 服务器 opmnctl stopproc ias-component=coreapplication_obis1 3\. 将修改后的 RPD 复制到 .../bifoundation/OracleBIServerComponent/coreapplication_obis1/repository。4.启动BI Server opmnctl startproc ias-component=coreapplication_obis1

就是这样，你完成了！

您可以毫无问题地在 Windows 和 Linux 之间移动 RPD，只要它是相同的 OBIEE 版本、补丁等。如果不是这种情况，那么您必须通过 OTN 上记录的升级过程来运行 RPD。

h,

# jquery - jqGrid自定义界面过滤

> ID：12525127
> 
> 赞同：-1
> 
> 时间：2012-09-21T06:08:43.730
> 
> 标签：jquery, jqgrid, postdata

我有一个 jqGrid，它有一个内置的过滤器，我也有我自己的用于过滤网格数据的界面。我的界面是一个加载在对话框中的 jsp 页面。我在导航器中有一个按钮。点击按钮会显示一个加载了我的jsp搜索inetrface的对话框..我不知道如何将值从我的搜索界面jsp对话框传递到网格操作类..我需要一个例子来清楚地解释如何使用我的jsp对话框中的postData来最初的 gid 动作类..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:48:02.090

如果我正确理解您的问题，您将通过`postData`使用方法（作为`postData`对象属性的函数）的使用来解决问题。查看[答案](https://stackoverflow.com/a/2928819/315935)以获取更多详细信息。

# jquery - 带有类别和多项选择的Jquery自动完成

> ID：12525140
> 
> 赞同：0
> 
> 时间：2012-09-21T06:09:50.160
> 
> 标签：jquery, jquery-autocomplete

是否已经有针对带有类别的 jquery 自动完成进行多项选择的解决方案。？我似乎找不到一个。

有谁知道是否已经有类似的东西..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:18:07.033

在 jQueryUI 演示和文档站点上，您可以找到[类别](http://jqueryui.com/demos/autocomplete/#multiple)的源代码以及[多项选择](http://jqueryui.com/demos/autocomplete/#multiple)

唯一留给您的是将这两个示例混合在一起并拥有自己的多选类别自动完成功能

# xml - 通过 XSL 连接 XML 的同一节点的两个或多个属性

> ID：12525143
> 
> 赞同：0
> 
> 时间：2012-09-21T06:10:28.690
> 
> 标签：xml, xslt

通过 XSL 转换将 XML 转换为 XML，我想在其中连接多个属性，例如：

示例案例：

```
<Sample>
  <Date Year="2012" Month="9" Day="21"/>
  <Time Hour="6" Minute="6" Second="6"/>
</Sample> 
```

所需输出：

```
<Sample>
  <Date>9/21/2012</Date>
  <Time>6:6:6</Time>
</Sample> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:31:29.977

这可以通过使用额外模板扩展标准 XSLT 标识转换来匹配您的**日期**和**时间**元素，并根据需要重新格式化它们来实现

例如，要匹配具有**Year**、**Month**和**Day属性的****Date**元素，您可以这样做。

 ******如果您可以保证所有**Date**元素都具有所需的三个属性，则可以将模板匹配简化为

```
<xsl:template match="Date"> 
```

您将为**Time**元素添加一个类似的模板。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="Date[@Year][@Month][@Day]">
      <Date><xsl:value-of select="concat(@Month, '/', @Day, '/', @Year)" /></Date>
   </xsl:template>

   <xsl:template match="Time[@Hour][@Minute][@Second]">
      <Time><xsl:value-of select="concat(@Hour, ':', @Minute, ':', @Second)" /></Time>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML 时，将输出以下内容：

```
<Sample>
   <Date>9/21/2012</Date>
   <Time>6:6:6</Time>
</Sample> 
```******

# javascript - 子目录中带有 express 的 ejs 部分

> ID：12525145
> 
> 赞同：0
> 
> 时间：2012-09-21T06:10:38.237
> 
> 标签：javascript, node.js, express, ejs

我有一个页面 ./views/account/index.ejs 包含来自 ./views/account/edit.ejs 的部分内容 - 但是当我从 ./ 调用它时出现“路径必须是字符串”的错误帐户/index.ejs

```
<%- partial('edit.ejs') %> 
```

我正在使用 express 3.x 和 express-partials

如果我包含位于基础 ./views/edit.ejs 的部分内容，则它可以工作。如何在子目录中包含部分内容？我试过`<%- partial('account/edit') %>`了，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:50:44.083

我有同样的问题。我已经在 express-partials 模块中修复了它并提出了拉取请求 - [https://github.com/publicclass/express-partials/pull/19](https://github.com/publicclass/express-partials/pull/19)。

所以只需安装最新的模块版本，你就完成了。

# jdeveloper - 如何将 JDE 解决方案报告上的发票编号转换为条形码

> ID：12525148
> 
> 赞同：0
> 
> 时间：2012-09-21T06:11:07.593
> 
> 标签：jdeveloper, jde, jdedwards, jdepend

我的 JDE 项目是将出现在 JDE 报告上的发票编号转换为条形码。你介意告诉我我是怎么做到的吗？因为我只是 JDE 软件的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:23:28.107

您需要包含在项目中的某种条形码 java 或 jde 库。然后使用库提供的 API 将数字转换为条形码。[ZXing](http://code.google.com/p/zxing/) 是我知道的 hte 库之一。但是，我从未将它与黑莓一起使用。

在“blackbaeery jde 条形码”之后的简单谷歌将为您提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:03:22.587

如果您安装条形码字体，您应该*将*任何字符转换为条形码。但是您应该定义您将使用的条形码类型。

[http://en.wikipedia.org/wiki/Barcode#Types_of_barcodes](http://en.wikipedia.org/wiki/Barcode#Types_of_barcodes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:14:05.557

对于 1 维码（如 EAN fe） - 您可以使用 lhoffman 推荐的条形码字体。- 通常您需要计算控制字符，将其添加到您的字符串中并以条形码字体在 BI Publisher 中输出。第二种方法 - 是一种解决方法 - 使用第三方 Web 应用程序将条形码生成为图像，并将图像包含在报告中（在运行时）。fe 为这样的库创建简单的包装器 - [http://barcode-coder.com/en/barcode-php-class-203.html](http://barcode-coder.com/en/barcode-php-class-203.html) 它应该接收发票号作为 url 的一部分并返回带有正确条形码的图像。类似： http:// *。*.*.*/barcode/12321312312.png 不应超过 5 行 php。并将其包含在 bi 发布者中，如下所示：[https ://blogs.oracle.com/xmlpublisher/entry/dynamic_images](https://blogs.oracle.com/xmlpublisher/entry/dynamic_images) 作为优势 - 您可以更好地控制条码并且可以使用二维条码。

# java - 切换两个变量的 int 值时，XOR 运算符会评估什么？

> ID：12525150
> 
> 赞同：1
> 
> 时间：2012-09-21T06:11:10.173
> 
> 标签：java, boolean, int, xor

> **可能重复：**
> [异或变量交换如何工作？](https://stackoverflow.com/questions/249423/how-does-xor-variable-swapping-work)

*我找到了一个在不*创建第三个变量的情况下 切换两个变量的值的解决方案，如下：

```
x ^= y;
y ^= x;
x ^= y; 
```

这是以布尔以外的方式使用异*或*运算符（“XOR”）（我假设它是*按位*的？）。最近学习了一些**离散数学**，我可以理解 XOR 运算符与真值表的用法：

```
.......................
    x  y  (x XOR y)
.......................
    T  T      F
    T  F      T
    F  T      T
    F  F      F 
```

当*两个*变量相等时，表达式的`(x XOR y)`计算结果为**假**，否则为**真。**但是当值不是布尔值时WTF？

* * *

***无论如何，如果我将 x 和 y 设置为*int*值而不是布尔值，则操作不是很简单。因此，例如 let`x = 3`和`y = 5`：

```
public class SwitchValues
{
    // instance methods
    public void SwitchBoolean(boolean x, boolean y)
    {
        System.out.println("The variable \"x\" is initially: " + x + ".\n" +
            "The variable \"y\" is initially: " + y + ".");
        x ^= y;
        System.out.println("x ^= y is equal to: " + x + ".");
        y ^= x;
        System.out.println("y ^= x is equal to: " + y + ".");
        x ^= y;
        System.out.println("x ^= y is now equal to: " + x + ".");

        System.out.println("The variable \"x\" is now: " + x + ".\n" +
            "The variable \"y\" is now: " + y + ".\n");
    } // end of SwitchBoolean

    public void SwitchInts(int x, int y)
    {
        System.out.println("The variable \"x\" is initially: " + x + ".\n" +
            "The variable \"y\" is initially: " + y + ".");
        x ^= y;
        System.out.println("x ^= y is equal to: " + x + ".");
        y ^= x;
        System.out.println("y ^= x is equal to: " + y + ".");
        x ^= y;
        System.out.println("x ^= y is now equal to: " + x + ".");

        System.out.println("The variable \"x\" is now: " + x + ".\n" +
            "The variable \"y\" is now: " + y + ".\n");
    } // end of SwitchInts

    // main method
    public static void main(String[] args)
    {
        SwitchValues obj = new SwitchValues();

        obj.SwitchBoolean(true, false);
        obj.SwitchInts(3, 5);

    } // end of main method
} // end of class SwitchValues 
```

...并且为 int 值打印的结果如下：

```
The variable "x" is initially: 3.
The variable "y" is initially: 5.
x ^= y is equal to: 6.
y ^= x is equal to: 3.
x ^= y is now equal to: 5.
The variable "x" is now: 5.
The variable "y" is now: 3. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T06:33:12.570

这就是操作的工作方式。首先，我们将用二进制写入您的数字：

3 = 011, 5 = 101

现在，当我们对它们进行异或运算时，我们得到一个数字，它表示两个原始数字之间哪些位不同。

011 xor 101 => 110，即十进制的 6。

现在我们取第二个数字和我们刚刚得到的差值异或

101 xor 110 => 011（十进制为 3），我们得到这些数字之间的差异，我们回到原来的第一个数字。现在我们再次取这个新数字并与我们最初得到的差异进行异或

011 xor 110 => 101（十进制5），我们得到了原来的第二个数字。

在[XOR Swap wiki](http://en.wikipedia.org/wiki/XOR_swap_algorithm)上，您可以看到更清晰的描述，并推断为什么这比在大多数现代架构和编译器上使用临时变量要慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T06:12:52.643

应用于数值类型时的 XOR 是逐位异或。因此，您可以获取原始真值表并将其并行应用于每个位。这应该有助于了解正在发生的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T06:17:38.240

其实你自己给了答案。您假设 int 上的 xor 是按位的，那是正确的。将数字转换为位表示，然后逐位应用异或。

3 是二进制的 11。5 是二进制的 101

```
011
101
--- xor
110 
```

110 是十进制的 6。

如果你想知道如何计算一个数字的二进制表示，你应该查看**霍纳的方法**。它很容易做到。***

# java - 如何避免使用 Document.createTextNode 对 <、> 和 & 进行编码

> ID：12525152
> 
> 赞同：5
> 
> 时间：2012-09-21T06:11:13.137
> 
> 标签：java, xml

```
class XMLencode 
{
  public static void main(String[] args) 
  {
    try{

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = factory.newDocumentBuilder();
    Document doc = docBuilder.newDocument();
    Element root = doc.createElement("roseindia");
       doc.appendChild(root);
    Text elmnt=doc.createTextNode("<data>sun</data><abcdefg/><end/>");
       root.appendChild(elmnt);
     TransformerFactory tranFactory = TransformerFactory.newInstance(); 
    Transformer aTransformer = tranFactory.newTransformer(); 
    Source src = new DOMSource(doc); 
    Result dest = new StreamResult(System.out); 
    aTransformer.transform(src, dest); 

    }catch(Exception e){
     System.out.println(e.getMessage());
         }
     }
} 
```

这是我上面的一段代码。生成的输出是这样的

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><roseindia>&lt;data&gt;sun&lt;/data&gt;&lt;abcdefg/&gt;&lt;end/&gt;</roseindia> 
```

我不希望对标签进行编码。我需要这种方式的输出。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><roseindia><data>sun</data><abcdefg/><end/></roseindia> 
```

请帮助我。

谢谢，莫汉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T12:12:36.760

**简答**

您可以利用`CDATA`XML 中的机制来防止字符被转义。下面是一个 DOM 代码示例：

```
doc.createCDATASection("<foo/>"); 
```

内容将是：

```
<![CDATA[<foo/>]]> 
```

* * *

**长答案**

下面是使用 DOM API 来利用 CDATA 部分的完整示例。

```
package forum12525152;

import javax.xml.parsers.*;
import javax.xml.transform.*;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import org.w3c.dom.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document document = db.newDocument();

        Element rootElement = document.createElement("root");
        document.appendChild(rootElement);

        // Create Element with a Text Node
        Element fooElement = document.createElement("foo");
        fooElement.setTextContent("<foo/>");
        rootElement.appendChild(fooElement);

        // Create Element with a CDATA Section
        Element barElement = document.createElement("bar");
        CDATASection cdata = document.createCDATASection("<bar/>");
        barElement.appendChild(cdata);
        rootElement.appendChild(barElement);

        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer t = tf.newTransformer();
        DOMSource source = new DOMSource(document);
        StreamResult result = new StreamResult(System.out);
        t.transform(source, result);
    }

} 
```

***输出***

`foo`请注意和元素的差异，`bar`即使它们具有相似的内容。我已经对运行演示代码的结果进行了格式化，以使其更具可读性：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<root>
    <foo>&lt;foo/&gt;</foo>
    <bar><![CDATA[<bar/>]]></bar>
</root> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T06:26:40.903

而不是这样写`doc.createTextNode("<data>sun</data><abcdefg/><end/>");`

您应该创建每个元素。

```
import javax.xml.parsers.*;
import javax.xml.transform.*;
import javax.xml.transform.dom.*;
import javax.xml.transform.stream.*;
import org.w3c.dom.*;
class XMLencode {
    public static void main(String[] args) {
        try {

            DocumentBuilderFactory factory = DocumentBuilderFactory
                    .newInstance();
            DocumentBuilder docBuilder = factory.newDocumentBuilder();
            Document doc = docBuilder.newDocument();
            Element root = doc.createElement("roseindia");
            doc.appendChild(root);

            Element data = doc.createElement("data");
            root.appendChild(data);
            Text elemnt = doc.createTextNode("sun");
            data.appendChild(elemnt);
            Element data1 = doc.createElement("abcdefg");
            root.appendChild(data1);

            //Text elmnt = doc.createTextNode("<data>sun</data><abcdefg/><end/>");
            //root.appendChild(elmnt);

            TransformerFactory tranFactory = TransformerFactory.newInstance();
            Transformer aTransformer = tranFactory.newTransformer();
            Source src = new DOMSource(doc);
            Result dest = new StreamResult(System.out);
            aTransformer.transform(src, dest);

        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-14T14:29:08.210

您可以使用 doc.createTextNode 并对转义字符使用解决方法（长）。

```
SOAPMessage msg = messageContext.getMessage();

header.setTextContent(seched); 
```

然后使用

```
Source src = msg.getSOAPPart().getContent(); 
```

要获取内容，将其转换为字符串

```
TransformerFactory tf = TransformerFactory.newInstance();
Transformer transformer = tf.newTransformer();
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
transformer.  setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
StreamResult result1 = new StreamResult(new StringWriter());
transformer.transform(src, result1); 
```

替换字符串特殊字符

```
String xmlString = result1.getWriter().toString()
.replaceAll("&lt;", "<").
replaceAll("&gt;", ">");
System.out.print(xmlString); 
```

带有固定转义字符的 dom 的相反字符串

```
DocumentBuilder db =  DocumentBuilderFactory.newInstance().newDocumentBuilder();
InputSource is = new InputSource();
is.setCharacterStream(new StringReader(xmlString));
Document doc = db.parse(is);
Source src123 = new DOMSource(doc); 
```

然后将其设置回肥皂消息 `msg.getSOAPPart().setContent(src123);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T23:55:37.970

莫汉，

您不能使用 Document.createTextNode()。该方法会转换（或转义）XML 中的字符。相反，您需要从 2 个 XML 构建两个单独的文档并使用*importNode*。

我像这样使用 Document.importNode() 来解决我的问题：

构建您的构建器：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = dbf.newDocumentBuilder();
Document oldDoc = builder.parse(isOrigXml); //this is XML as InputSource
Document newDoc = builder.parse(isInsertXml); //this is XML as InputSource 
```

接下来，构建要导入的元素/节点的 NodeList。从 NodeList 创建一个节点。使用 importNode 创建另一个要导入的节点。构建最终 XML 的最后一个节点，如下所示：

```
NodeList nl = newDoc.getElementByTagName("roseindia"); //or whatever the element name is
Node xmlToInsert = nl.item(0);
Node importNode = oldDoc.importNode(xmlToImport, true);
Node target = ((NodeList) oldDoc.getElementsByTagName("ELEMENT_NAME_OF_LOCATION")).item(0);
target.appendChild(importNode);

Source source = new DOMSource(target);
.... 
```

剩下的是标准的 Transformer - StringWriter 到 StreamResult 的东西来获得结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T06:21:04.790

不要使用`createTextNode`- 它的全部目的是在文档中插入一些文本（作为数据），而不是原始 XML 的片段。

`createTextNode`对文本和`createElement`元素使用组合。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T06:22:43.103

> 我不希望对标签进行编码。我需要这种方式的输出。

那么你*根本不需要*文本节点 - 这就是为什么`createTextNode`不适合你。（或者更确切地说，它工作正常 - 它只是没有做你想做的事）。您可能应该只解析您的 XML 字符串，然后将结果中的文档节点导入到您的新文档中。

当然，如果您事先知道元素，首先不要将它们表达为文本 - 使用 、 和 的混合`createElement`来`createAttribute`创建`createTextNode`结构`appendChild`。

[JDOM](http://jdom.org/)之类的东西完全有可能使这变得更简单，但这是基本方法。

# php - 如何在 sonata_type_collection 关联管理员中获取对象 ID

> ID：12525156
> 
> 赞同：1
> 
> 时间：2012-09-21T06:11:42.130
> 
> 标签：php, symfony, sonata-admin

我有一个带有 SonataAdminBundle 2.0 的 Symfony 2.0。这是我的一个管理员控制器的一种方法。

```
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
        ->add('name')
        ->add('events', 'sonata_type_collection', array(), array(
            'edit'      => 'inline',
            'inline'    => 'table'
        ))
    ;

    $this->getFormFieldDescription('events')
        ->setAssociationAdmin($this->getConfigurationPool() >getInstance('platform.admin.events'));
} 
```

并且我将 eventsAdmin 控制器与此方法相关联

```
protected function configureFormFields(FormMapper $formMapper)
{
    $currentObjectId = '' // this is what I want???

    $formMapper
        ->add('name')
        ->add('time')
        ->add('trigger')
    ;
} 
```

所以我的父母表格看起来像

**名称**：blablabla
**事件**：
1\. - delete1 - name1 - time1 - trigger
2\. - delete2 - name2 - time2 - trigger
3\. - delete3 - name3 - time3 - trigger

我想要的是在关联管理员中获取当前对象的 ID。“触发器”是一个选择框，它取决于当前对象 ID。我必须用它进行查询。

**Sonata\AdminBundle\Admin\Admin**中有一个方法**->getSubject()**但它总是返回第一个“事件”对象。

 **有什么建议么？**

# vb.net - vb.net - 如何使用 Treeview 中的文本框和组合框

> ID：12525158
> 
> 赞同：1
> 
> 时间：2012-09-21T06:12:14.740
> 
> 标签：vb.net, combobox, textbox, treeview

我正在寻找一些示例代码来展示如何使用`Textboxes`和`ComboBoxes`来自`Treeview`控件。

我希望`Textboxes`and`ComboBoxes`与标签文本内联。

这张图显示了我的想法：

![在此处输入图像描述](../Images/0189173bbcf300ce2c925b231a753972.png)

# login - 多个用户可以共享同一个 Google 帐户，还是违反规则？

> ID：12525162
> 
> 赞同：2
> 
> 时间：2012-09-21T06:12:29.920
> 
> 标签：login, federated-identity, google-account

多个用户可以共享同一个 Google 帐户，还是违反规则？我在问，因为我想确保多人不会在我的网站上共享使用联合登录的帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:46:18.940

> 每个 Gmail 帐户都旨在供个人用户使用。如果您有多个用户经常从不同位置访问同一个帐户，您可能会达到 Gmail 阈值，并且您的帐户将被暂时锁定。

来源：[谷歌帮助](http://support.google.com/a/bin/answer.py?hl=en&answer=33330)

# internet-explorer - Backbone.js 中的 console.log 不起作用

> ID：12525163
> 
> 赞同：0
> 
> 时间：2012-09-21T06:12:32.060
> 
> 标签：internet-explorer, backbone.js, console

我是一个新的backbone.js 学习者，我尝试按照hello world 教程来简单地在我的屏幕上显示一条消息。按照教程视频，我有一个问题，即函数 console.log('hello world'); 什么都不显示。这是我的代码：

```
<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <title> Learning about Bacjbone.js </title>
</head>
<body>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
  <script type="text/javascript" src="http://documentcloud.github.com/backbone/backbone-min.js"></script>
  <script type="text/javascript">

    Person = Backbone.Model.extend({
      initialize: function() {
      console.log('hello world');
      }
    });
    var person = new Person();
  </script>
</body>
</html> 
```

我错过了什么或做错了什么？请给我一些想法。非常感谢您的患者和任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:40:22.210

由于您是新用户，我无法说出您的经验水平；但是您是否感到困惑：

```
console.log('hello world') 
```

和：

`document.write('hello world')`?

如果您想检查该代码是否正常工作，您可以随时更改`console.log`为`alert`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T06:40:50.167

你的代码是绝对正确的。可能还有其他错误，我找不到。

如果它是特定于浏览器的，因为 console.log 仅在 FF 中有效。尝试在 jsfiddle 演示中提示如下消息。

请找到您的工作代码的演示：[这里](http://jsfiddle.net/umeshpatil86/MHp85/1/)

但尝试在工作 html+ java 脚本代码下运行。

```
 <html>
    <head>
    <meta charset="utf-8">
    <title>hello-backbonejs</title>
   <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
    <script type="text/javascript" src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script> 
    <script type="text/javascript">
    (function($){  
    Person = Backbone.Model.extend({    
          initialize: function() {
                          console.log('hello world');
          }
        });
    var person = new Person();
      })(jQuery);
    </script>
    </head>
    <body>
    </body>
    </html> 
```

# css-transitions - 这种过渡效果的名称是什么？

> ID：12525166
> 
> 赞同：0
> 
> 时间：2012-09-21T06:12:55.380
> 
> 标签：css-transitions, effect

这是链接[http://codecanyon.net/item/estro-jquery-ken-burns-swipe-effect-slider/full_screen_preview/235111](http://codecanyon.net/item/estro-jquery-ken-burns-swipe-effect-slider/full_screen_preview/235111)

该滑块中图像过渡的效果名称是什么？以及如何实现？是否同时放大和移动图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:16:07.843

该效果的名称是 Keb Burns（或平移和缩放效果）。我不认为你只能通过 css-transitions 来实现它。你应该使用一些 JavaScript/jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:26:18.640

看看这个[例子](http://dabblet.com/gist/3763579)。你应该`background-poistion,background-size`得到它的属性。我希望示例代码有助于获得它。

[和背景属性](http://www.css3.info/preview/background-size/)教程。

移动背景是基于`background-position`.

更改图像需要 jquery。

# silverlight - 无法将 System.Net.Http 包安装到 Windows Phone 7.1 Silverlight 项目中

> ID：12525168
> 
> 赞同：2
> 
> 时间：2012-09-21T06:13:28.353
> 
> 标签：silverlight, windows-phone-7, system.net, dotnet-httpclient

我使用 Nuget 安装“Microsoft ASP.NET Web API 客户端库”来获取最新的 System.Net.Http 程序集，用于 Windows Phone 7.1 XNA 和 Silverlight 项目。它可以很好地安装到我的 WP7.1 XNA 项目中，但不允许我将它安装到 WP7.1 Silverlight 项目中。我什至尝试将它直接从包管理器控制台安装到新创建的 WP7.1 Silverlight 项目中，并得到以下错误响应：

```
PM> Install-Package System.Net.Http 
Attempting to resolve dependency 'Microsoft.Net.Http (≥ 2.0.20710.0 && < 2.1)'.
You are downloading Microsoft.Net.Http from Microsoft, the license agreement to which is available at http://www.microsoft.com/web/webpi/eula/MVC_4_eula_ENU.htm. Check the package for additional dependencies, which may come with their own license agreement(s). Your use of the package and dependencies constitutes your acceptance of their license agreements. If you do not accept the license agreement(s), then delete the relevant components from your device.
Successfully installed 'Microsoft.Net.Http 2.0.20710.0'.
You are downloading System.Net.Http from Microsoft, the license agreement to which is available at http://www.microsoft.com/web/webpi/eula/MVC_4_eula_ENU.htm. Check the package for additional dependencies, which may come with their own license agreement(s). Your use of the package and dependencies constitutes your acceptance of their license agreements. If you do not accept the license agreement(s), then delete the relevant components from your device.
Successfully installed 'System.Net.Http 2.0.20710.0'.
Successfully uninstalled 'Microsoft.Net.Http 2.0.20710.0'.
Install failed. Rolling back...
Install-Package : Could not install package 'Microsoft.Net.Http 2.0.20710.0'. You are trying to install this package into a project that targets 'Silverlight,Version=v4.0,Profile=WindowsPhone71', but the  package does not contain any assembly references that are compatible with that framework. For more information, contact the package author.
At line:1 char:16
+ Install-Package <<<<  System.Net.Http
    + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

System.Net.Http 是否与 WP7.1 Silverlight 项目兼容，如果是，我怎样才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T16:55:01.967

Dan Roth（System.Net.Http Nuget 包的所有者）通过电子邮件回复：“System.Net.Http.dll 目前不支持 XNA、Phone 或 Silverlight。它仅支持 .NET 4（通过ASP.NET Web API）、.NET 4.5。和 Windows 8 中的 .NETCore 配置文件。” 这就是这个问题的不幸答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-27T16:26:47.463

正如 Dan 所指出的， System.Net.Http NuGet 包已被弃用，取而代之的是[Microsoft.Net.Http](http://nuget.org/packages/Microsoft.Net.Http)。对于后者[，我们发布了一个](http://blogs.msdn.com/b/bclteam/archive/2013/02/18/portable-httpclient-for-net-framework-and-windows-phone.aspx)允许以 Windows Phone 7.1 为目标的更新。

我们正在努力发布一个稳定的版本，但我们还没有确定日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T01:42:31.187

由于这在 google 上排名第一，因此 beta 包现在支持 windows phone 7.1 项目

安装用户包管理器控制台

PM> Install-Package Microsoft.Net.Http -Pre

[点击这里进入项目主页](http://nuget.org/packages/Microsoft.Net.Http/2.1.3-beta)

# php - PHP - 将 foreach 与数组一起使用

> ID：12525169
> 
> 赞同：0
> 
> 时间：2012-09-21T06:13:29.027
> 
> 标签：php, arrays, foreach

我正在努力获得正确的语法来解析数组中的值以与 foreach 循环一起使用。我有一个数组：

```
$contacts_array 
```

其中包含我需要搜索的一个或多个名称。数组如下所示：

```
Array
(
    [0] => PR1010

    [1] => PR1086
) 
```

如果我要使用已知数量的名称手动生成所需的 PHP 代码，它将如下所示，其中有 2 个名称可供搜索：

```
// Create first find request
$findreq1 =$fm->newFindRequest('Contacts');

// Create second find request
$findreq2 =$fm->newFindRequest('Contacts');

// Specify search criterion for first find request 
$findreq1->addFindCriterion('Name', $searchTerm);

// Specify search criterion for second find request 
$findreq2->addFindCriterion('Suburb', $searchTerm);;

// Add find requests to compound find command 
$request->add(1,$findreq1); 
$request->add(2,$findreq2); 
```

我需要为数组中的每个名称生成等效代码。我知道我需要使用类似的东西：

```
foreach($contacts_array as $contact_array => $value) 
{
} 
```

也：

```
$num = 1
$num++; } /* foreach record */ 
```

我只是不确定如何将这一切结合在一起，以便在我进行时增加 $findreq1 变量。到目前为止，我所有的尝试都会产生错误。如果有人能告诉我如何将它们结合在一起，那将不胜感激，因为我正在学习 PHP。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:26:31.100

```
<?php 
    for($i = 0; $i < count($contacts_array); $i++) { 
        ${'findreq' . ($i+1)} = $fm->newFindRequest('Contacts');
        ${'findreq' . ($i+1)}->addFindCriterion('Name', $contacts_array[$i]);
        $request->add($i+1, ${'findreq' . ($i+1)});
    }
?> 
```

阅读更多关于[PHP 中的动态变量名](https://stackoverflow.com/questions/9257505/dynamic-variable-names-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:30:27.973

你们打败了我。

```
 <?php
    $contacts = Array('PR1010','PR1086');
    //print_r($contacts);

    foreach ($contacts as $key => $value) {
    //echo "key: ".$key." - Value: ".$value."<br>";

    $findreq1 = $fm->newFindRequest('Contacts');
    $findreq1->addFindCriterion('Name', $value); // this is where the Array's value is passed too, it is looped for every value in the Array
    $request->add(1,$findreq1); 

    // do more here 
    }
    ?> 
```

# mongodb - 我可以按 MongoDB 匹配对象添加或排序吗？

> ID：12525170
> 
> 赞同：0
> 
> 时间：2012-09-21T06:13:30.530
> 
> 标签：mongodb, sorting

所以我有两个集合，Trait 和 Question。对于给定的用户，我遍历用户的特征，并且我想查询与缺失特征相对应的所有问题：

```
linq.From(missingTraits)
.ForEach(function(trait)
{
    match.$or.push({ "Trait": trait });
});

database.collection("Questions", function(err, collection)
{
    collection.find(match).limit(2).toArray(function(err, questions)
    {
        next(err, questions);
    });
}); 
```

这可行，但我希望对象按 Trait 文档上的字段排序（不在 Question 文档中）：

```
Traits
[
  { "Name": "Height", "Value": "73", "Importance": 15 },
  { "Name": "Weight", "Value": "230" "Importance": 10 },
  { "Name": "Age", "Value": "29", "Importance": 20 }
]

Questions
[
  { "Trait": "Height", "Text": "How tall are you?" },
  { "Trait": "Weight", "Text": "How much do you weight?" },
  { "Trait": "Age", "Text": "How old are you?" }
] 
```

所以在上面的例子中，如果所有三个特征都缺失，我只想带回年龄和身高（按此顺序）。是否可以以某种方式修改查询或匹配对象以促进这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:33:30.773

如果我理解你的问题是正确的，你想找到两个最重要的特征吗？如果您的`missingTraits`数组只是特征的名称（“Height”、“Weight”、“Age”），那么在将查询发送到 Questions 集合之前，您需要查询 Traits 集合以找到最重要的两个。

不幸的是，如果不单独调用 Traits 集合，仅修改 Questions 集合上的查询将无法工作，因为重要信息所在的位置。

像这样的查询

```
database.collection("Traits", function(err, collection)
{
    collection.find(match).sort({ Importance : -1 }).limit(2).toArray(function(err, traits)
    {
        // cache the traits to query the questions collection
    });
}); 
```

将为您提供与 $or 查询匹配的两个最重要的特征（所有匹配项，按重要性降序排序，限制为 2）。然后，您可以使用这些结果来查询 Questions 集合。

在这种情况下，告诉 Questions 集合以“Age”、“Height”顺序返回文档很困难，因此我建议缓存从 Traits 集合返回的特征的重要性顺序，然后对查询结果进行排序客户端提问。

以下是文档`sort()`：

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bsort%28%29%7D%7D](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bsort%28%29%7D%7D)

最后一件事：如果您`missingTraits`通过对 Traits 集合的数据库调用进行填充，那么应该可以将`sort()`逻辑放入该调用中，而不是向该集合添加第二个调用。

# c# - 如何在 EF IQueryable 中动态创建过滤器表达式？

> ID：12525173
> 
> 赞同：2
> 
> 时间：2012-09-21T06:13:56.803
> 
> 标签：c#, entity-framework, lambda, expression, iqueryable

假设我们有接口：

```
public interface ISystemCompany
{
    Guid SystemCompanyId { get; set; }
} 
```

我们也有`IQueryable<>`类型，它实现了`ISystemCompany`.

我们有特定的 SystemCompanyId 值：`432486bc-95f2-e111-be6e-74de2b99e249`

我们要编写函数，按此字段的值过滤 IQueryable。这是这样的功能示例：

```
public IQueryable FilterByValue(IQueryable listToFilter, Guid valueToFilter)
{
    var parameter = Expression.Parameter(typeof(object)); 
    // item
    var converted = Expression.Convert(parameter, typeof(ISystemCompany)); 
    // (ISystemCompany)item
    var member = Expression.Property(converted, "SystemCompanyId"); 
    // ((ISystemCompany)item).SystemCompanyId
    var comparison = Expression.Equal(member, Expression.Constant(valueToFilter)); 
    // ((ISystemCompany)item).SystemCompanyId == valueToFilter
    var expression = Expression.Lambda<Func<object, bool>>(comparison, new[] { parameter } ); 
    //item => ((ISystemCompany)item).SystemCompanyId == valueToFilter
    return ((IQueryable<object>)listToFilter).Where(expression); 
    // listToFilter.Where(((ISystemCompany)item).SystemCompanyId == valueToFilter)
} 
```

此函数不适用于 Entity Framework，因为它不支持延迟执行。我该如何改进它以引入这种支持？

# amazon-ec2 - 将目录从本地计算机上传到 ec2 服务器

> ID：12525176
> 
> 赞同：0
> 
> 时间：2012-09-21T06:14:17.183
> 
> 标签：amazon-ec2

我想知道如何设置 filezilla 或如何将文件上传到我的 ec2 服务器。每次我尝试设置 filezilla 时，它都会说：

```
 Error: Disconnected: No supported authentication methods available (server sent: publickey)
Error:  Could not connect to server 
```

每次我想访问时，我都必须去下载文件夹并使用 ssh -i **key.pem user@ipaddress 登录，因为我的 mac 不会自动从任何地方 ssh，因为我无法将它导入我的钥匙串。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:18:03.930

根据[FileZilla Docs](http://wiki.filezilla-project.org/Howto#SFTP_using_SSH2%3a_Key_based_authentication)，它应该是可能的：

> FileZilla 支持标准的 SSH 代理。如果您的 SSH 代理正在运行，则应设置 SSH_AUTH_SOCK 环境变量。

[这是](http://mah.everybody.org/docs/ssh)有关如何设置 ssh 代理的文档。

但是我个人使用[Cyber​​duck](http://cyberduck.ch/)作为 SFTP 客户端。在那里创建新连接时，您可以简单地选中“使用公钥授权”并提供密钥文件的路径。应该更容易设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:18:21.040

您可以使用 sshfs 将 ec2 实例目录融合到本地文件夹。因此，您必须执行以下步骤：

1.  在你的 Mac 上安装 sshfs。

2.  将您的 mac id_rsa.pub 密钥放在 ec2 实例的 .ssh/ 文件夹中的授权密钥中。这将允许您将 ec2 目录挂载到本地文件夹。此外，这将允许您在不使用 key.pem 的情况下通过 ssh 连接到 ec2 实例。

3.  使用以下命令挂载 ec2 实例：

`sshfs ubuntu@ec2-xx-xx-xx-xxx.compute-1.amazonaws.com: /<your new folder location>` 4.不要忘记给你的文件夹写权限，这样你就可以远程编辑它们。

希望能帮助到你。

# android - 弹出画廊的选定图像

> ID：12525180
> 
> 赞同：0
> 
> 时间：2012-09-21T06:14:42.660
> 
> 标签：android, image-gallery

![在此处输入图像描述](../Images/096a97a694d432b8887b8d027fbfae49.png)

我有一个使用画廊的 android 应用程序。每个画廊项目都由一个 imageview 和一个 textview 组成，以显示图像的标题。这个屏幕还包含一些其他组件，如页眉视图、页脚视图等......每个画廊项目都显示为一个固定的时间。

现在，如果用户点击某个项目，我想弹出画廊项目。（图像及其标题）。这个视图将浮动在屏幕上，如图所示。我怎样才能实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:44:44.787

创建一个包含所有必需组件布局的活动，然后在清单中为该活动使用以下代码

```
<activity
            android:name=".YourActivityName"
            android:theme="@style/AppTheme" /> 
```

`AppTheme`在哪里

```
<style name="AppTheme" parent="android:Theme.Dialog">
        <item name="android:windowNoTitle">true</item>
    </style> 
```

# asp.net-mvc - 为一对多关系更新相关字段的正确方法

> ID：12525181
> 
> 赞同：0
> 
> 时间：2012-09-21T06:14:53.820
> 
> 标签：asp.net-mvc, entity-framework, razor

发行者具有作为相关字段的 KeyEntity。我的代码有效，但我认为除了从数据库加载实体之外，必须有更好的方法来更新相关字段。ViewModeling 和模板应该有问题...在此先感谢。

操作视图模型

```
public class OpViewModel
{   
    public Connect.Models.Issuer Issuer { get; set; }
    public IEnumerable<SelectListItem> KeyEntities { get; set; }

    public OpViewModel() { } 
    public OpViewModel(Connect.Models.Issuer issuer, 
                        IEnumerable<Jose.Models.KeyEntity> key_entities)
    {   
        this.Issuer = issuer;
        this.KeyEntities = key_entities.Select(k =>
                        new SelectListItem()
                        {   
                            Selected = (k.Id == issuer.KeyEntity.Id),
                            Text = k.Id.ToString(),
                            Value = k.Id.ToString()
                        }); 
    }   
} 
```

Op/Edit.chtml（剃刀）

```
@model AdConnect.Models.OpViewModel
@using (Html.BeginForm()) {

    <div class="editor-field">
        @Html.DropDownListFor(model => model.Issuer.KeyEntity.Id,
                                Model.KeyEntities)
    </div>

} 
```

操作控制器

```
 [HttpPost]
    public ActionResult Edit(Models.OpViewModel obj)
    {   
        if (ModelState.IsValid)
        { 
            //  This works for most data fields of Issuer, but KeyEntity's Id 
            //  (dbo.Issuers.KeyEntity_Id) is not updated.
            //
            //  ctx.Entry(obj.Issuer).State = System.Data.EntityState.Modified

            //  So load Issuer and KeyEntity from the database and update.

            var issuer = ctx.Issuers.Find(obj.Issuer.Id);
            if (obj.Issuer.KeyEntity != null)
            {   
                 issuer.KeyEntity =
                    ctx.KeyEntities.Find(obj.Issuer.KeyEntity.Id);
            }   
            ctx.Entry(issuer).CurrentValues.SetValues(obj.Issuer);

            ctx.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(obj);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:24:23.543

我认为您对导航属性的工作方式有所了解。EF 可以自动填充它们，因此您无需在对象的构造函数中执行此操作。

[在这里](http://blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html)阅读我关于导航属性的文章。

同样就您的控制器更新代码而言，这样的更新的正常路径是：加载、修改、保存。

IE

```
var issuer = ctx.Issuers.Include(i=>i.KeyEntity).SingleOrDefault(i=>i.Id == obj.Issuer.Id);
issuer.Whatever = obj.Issuer.Whatever; //note prehaps you want something like CopyMatchinProperties here
ctx.SaveChanges(); 
```

# android - 在 VMware 中在 Ubuntu12.04 上构建 Android 源时出错

> ID：12525184
> 
> 赞同：0
> 
> 时间：2012-09-21T06:15:00.313
> 
> 标签：android, build, out-of-memory

自己搭建了android开发环境，从android开发网站下载了android4.1-cts源码，但是在搭建源码的时候报错如下：

```
host Java:ddmlib-tests (out/host/common/obj/JAVA_LIBRARIES/ddmlib-    tests_intermediates/classes)
host Java: swtmenubar (out/host/common/obj/JAVA_LIBRARIES/swtmenubar_intermediates/classes)
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
at java.util.Vector.<init>(Vector.java:111)
at java.util.Vector.<init>(Vector.java:124)
at org.antlr.analysis.DFA.createTransitionTableEntryForState(DFA.java:551)
at org.antlr.analysis.DFA.createStateTables(DFA.java:440)
at org.antlr.codegen.CodeGenerator.genLookaheadDecision(CodeGenerator.java:645)
at org.antlr.grammar.v3.CodeGenTreeWalker.block(CodeGenTreeWalker.java:2876)
at org.antlr.grammar.v3.CodeGenTreeWalker.rule(CodeGenTreeWalker.java:2382)
at org.antlr.grammar.v3.CodeGenTreeWalker.rules(CodeGenTreeWalker.java:1537)
at org.antlr.grammar.v3.CodeGenTreeWalker.grammarSpec(CodeGenTreeWalker.java:1441)
at org.antlr.grammar.v3.CodeGenTreeWalker.grammar_(CodeGenTreeWalker.java:461)
at org.antlr.codegen.CodeGenerator.genRecognizer(CodeGenerator.java:421)
at org.antlr.Tool.generateRecognizer(Tool.java:655)
at org.antlr.Tool.process(Tool.java:468)
at org.antlr.Tool.main(Tool.java:93)
make: *** [out/host/common/obj/JAVA_LIBRARIES/smali_intermediates/smaliLexer.java] Error 1
make: *** Waiting for unfinished jobs.... 
```

我找到了一些解决方案，比如改java -Xms16m -Xmx1024m，但是也不管用。我能做些什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:14:52.410

你有记忆问题。尝试 make -j1 构建代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:18:41.053

我找到了解决方案：找到 external/smali/smali/android.mk 更改添加 -Xm1024m 到 $(GEN): PRIVATE_CUSTOM_TOOL = java -jar $(ANTLR_JAR) -fo $(dir $@) $<。

# jquery - 字体完全加载后的jquery动画

> ID：12525185
> 
> 赞同：0
> 
> 时间：2012-09-21T06:15:03.850
> 
> 标签：jquery, fonts, jquery-animate

这个问题对某些人来说可能看起来很愚蠢，但我对我的客户提供的字体和相同的动画有疑问。

字体总计 1.55mb，包括所有格式。

现在的问题是，我正在使用 jquery animate 并且还使用了 complete: 函数，以便页面中的所有元素一个接一个地进行动画处理。

文本使用客户端发送的自定义字体。

**代码是这样的：**

```
.... complete: function () {
            $s('#right-inner-content').animate({        right: "0px",
                top: "22px"
            }, {
                duration: 1000,
                specialEasing: {
                    left: ''
                },
                complete: function () {
                    $s('#circle1').animate({
                        bottom: "170px",
                        left: "0"
                    }, {..... 
```

由于使用的字体，动画没有按需要运行，一旦我更改为“arial”等网络字体......然后动画表现流畅而不需要加载时间......

是否有任何选项可以解决此问题，因为客户希望使用具有相同动画效果的自定义字体。

任何帮助，将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T05:49:51.857

您的服务器上的字体正确吗？您是否使用 CSS @font-face 来定义元素的文本属性？[http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp](http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp) （我知道这不是最好的资源，但在这里很容易定义。）

如果您的样式标签在您的脚本标签之前，我相信应该没有问题。但也许是因为字体文件太大，你应该给它时间加载：

```
 window.setTimeout(customAnimation,100); 
```

谷歌浏览器的 Inspect Element -> Network 应该让您很好地了解文件需要多长时间才能完全执行此操作。

我还发现了这个： http: [//paulirish.com/2009/fighting-the-font-face-fout/](http://paulirish.com/2009/fighting-the-font-face-fout/)它指的是不同的问题，但应该有相同的结果。

注意 .ttf 仅适用于某些浏览器。例如。早期的 IE 使用 .eto。此外，由于字体非常不稳定，如果您只需要几个字符的字体，最好只使用图像。

# java - Intellij Idea 中类型迁移的用例是什么？

> ID：12525187
> 
> 赞同：3
> 
> 时间：2012-09-21T06:15:30.907
> 
> 标签：java, refactoring, intellij-idea, automated-refactoring

好的，所以我有这个变量声明

```
 private List<String> params; 
```

我想将参数的类型更改为：

```
private Collection<String> params; 
```

我`Refactor-->Type Migration (the combination of Ctrl+Shift+F6)`从上下文菜单中选择，但没有任何反应。

我的问题是：

1.  那么类型迁移的目的是什么？
2.  我将如何最有效地实现我需要实现的目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T06:30:09.763

这就是它的工作方式，但**文本**光标需要在内部`List<String>`而不是在引用的名称中，`params`因为您要重构类型而不是引用。

# jquery - gridview 中的每一行作为 Jquery Accordion 控件？

> ID：12525188
> 
> 赞同：0
> 
> 时间：2012-09-21T06:15:48.770
> 
> 标签：jquery, asp.net, gridview

我有一个网格视图，其中包含大行，所以我希望用户一次只能查看一行。为此，我想到了实施`Jquery Accordion control`. 我像这样编写网格控件

```
<asp:TemplateField>
<ItemTemplate>
    <div id="divItems" runat="server">
        <h3>
            <a href="#">
                <asp:Label ID="lblMemberNameHeader" runat="server">
                </asp:Label></a></h3>
        <div>
            <div id="dvROApplicantSection">
            </div>
        </div>
    </div>
</ItemTemplate> 
```

和

```
 $(document).ready(function () {
  $("[id$=divItems]").accordion();
  } 
```

呈现手风琴风格，但功能不起作用。我无法折叠任何行。

请帮帮我我在这里错过了什么。

感谢并感谢您的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:00:58.490

Accordian 控件需要单个父项来处理您需要展开/折叠的所有元素。当您使用`ItemTemplate`of 时`GridView`，它将在单独的`TD`. 我认为您应该改用`Repeater`控件。[在此处](http://msdn.microsoft.com/en-us/magazine/cc163780.aspx)阅读详细信息

这`Repeater`将允许对渲染的内容进行更多控制，而不是像`GridView`.

# php - java - 如何通过java脚本或jquery交换单击时选中的单选按钮？？？附上我的代码

> ID：12525190
> 
> 赞同：0
> 
> 时间：2012-09-21T06:15:56.020
> 
> 标签：php, javascript, jquery, radio-button

我在运行时创建了单选按钮，它的值、id 和名称与 1、2、3 等相同，但我想像这样交换它的值，

[http://jsfiddle.net/u8ySM/](http://jsfiddle.net/u8ySM/)

单选按钮显示为，

![在此处输入图像描述](../Images/ce9a3512f17c954ea1dc250d3fd1765d.png)

页面加载后它会是这样，当我更改收音机时，它会更改其收音机与前一个检查

我正在尝试我的代码在这里，

```
var selection=new Array(); 
 var allR = document.getElementsByTagName('input');
  var a=0;
  var b=0;
    for(var i=0; i<allR.length; i++){ 
        if(allR[i].type=='radio') { b++; }      
        if(allR[i].type=='radio' && allR[i].checked) { a++; } 
    }
var num=0;
alert(b);
    for(var j=1;j<=b ;j++)
{
//for(var i=0; i<alr.length; i++){ 
if(document.getElementsByName('j').checked)
{
selection[num]=j;
num++;
alert(j);
//}
}
} 
```

在这里，我在“b”变量中获取总单选按钮，然后将选中的收音机放入数组中，但不能交换选中的收音机？？？

希望得到你的建议

编辑：

html代码会是这样的，

```
<input type='radio' onclick='test(this.id);' name='Accounts' value='1' id=1 checked='checked'>1

<input type='radio' onclick='test(this.id);' name='Accounts' value='2' id=2>2

<input type='radio' onclick='test(this.id);' name='Accounts' value='3' id=3>3
<input type='radio' onclick='test(this.id);' name='Accounts' value='4' id=4>4
<br/>
<input type='radio' onclick='test(this.id);' name='Analytical Question' value='1' id=1>1
<input type='radio' onclick='test(this.id);' name='Analytical Question' value='2' id=2 checked='checked'>2

<input type='radio' onclick='test(this.id);' name='Analytical Question' value='3' id=3>3

<input type='radio' onclick='test(this.id);' name='Analytical Question' value='4' id=4>4
<br/>
<input type='radio' onclick='test(this.id);' name='Behavior Questions' value='1' id=1>1
<input type='radio' onclick='test(this.id);' name='Behavior Questions' value='2' id=2>2
<input type='radio' onclick='test(this.id);' name='Behavior Questions' value='3' id=3 checked='checked'>3

<input type='radio' onclick='test(this.id);' name='Behavior Questions' value='4' id=4>4
<br/>
<input type='radio' onclick='test(this.id);' name='Technical Questions' value='1' id=1>1

<input type='radio' onclick='test(this.id);' name='Technical Questions' value='2' id=>2

<input type='radio' onclick='test(this.id);' name='Technical Questions' value='3' id=3>3

<input type='radio' onclick='test(this.id);' name='Technical Questions' value='4' id=4 checked='checked'>4 
```

现在如何交换这个收音机检查值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:24:06.987

如果我理解正确，您想这样做：例如。如果您单击 row1 中的“2”，您希望在 row2 中选中“1”。

我为你准备了一个工作脚本，看看：http: [//jsfiddle.net/nb3j9/](http://jsfiddle.net/nb3j9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:37:19.197

检查这个[小提琴](http://jsfiddle.net/Vdj4u/3/)

代码看起来像这样

```
 $(function() {
    var arr = {
        'Accounts': '1',
        'Analytical_Question': '2',
        'Behavior_Questions': '3',
        'Technical_Questions': '4'
    }
    $('input:radio').on('click', function() {
        var grName = $(this).attr('name');
        var value = $(this).val();
        // Set the arr value here
        var currCheck = $('input[value=' + value + ']:checked');
        $.each(currCheck, function() {
            if ($(this).attr('name') != grName) {
                var temp = $(this).val();
                var teGrp = $(this).attr('name');
                var teVal = arr[grName];
                arr[teGrp] = teVal;
                arr[grName] = temp;
                $('input[name=' + teGrp + '][value=' + temp + ']').attr('checked', false);
                $('input[name=' + teGrp + '][value=' + teVal + ']').attr('checked', true);
            }
        });
    });
});​ 
```

[你的标记小提琴](http://jsfiddle.net/BwnjG/) ——确保名称属性之间没有空格

# java - Eclipse 不会读取我的设备

> ID：12525197
> 
> 赞同：0
> 
> 时间：2012-09-21T06:16:17.433
> 
> 标签：java, android, eclipse, device, samsung-mobile

我今天早些时候使用手机测试应用程序。我今天晚些时候将其插入以测试另一个，而 Eclipse 无法识别它。我到处找。我不确定为什么它不起作用。我使用的是三星 Galaxy S3 设备。所有驱动器均已正确安装和更新。并且调试已打开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:55:32.763

这不是 eclipse 的问题，adb（SDK 附带的 Android 调试桥）和底层驱动程序（安装 Samsung Kies 以获得正确的 S3 驱动程序）检测到设备，确保您安装了正确的驱动程序。然后它将成功检测。确保在设置 -> 开发人员选项中连接 USB 调试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:17:41.707

我只用我的手机测试了一天。一整天我都在连接手机，因为我在吐槽。我重新打开我的茶壶和中提琴，问题解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:08:03.563

通过 android sdk manager 安装 google usb 驱动程序

# iphone - iPhone 模拟器半透明黑屏并在 Xcode 4.4.1 中挂起

> ID：12525198
> 
> 赞同：1
> 
> 时间：2012-09-21T06:16:25.273
> 
> 标签：iphone, xcode, ios5, xcode4.4

我对 Xcode 4.4.1 有疑问。

当我在应用程序启动后按下我的应用程序的登录按钮时，我的模拟器变成半透明黑色并且没有任何正确的日志消息挂起。

有时应用程序或模拟器在我按下按钮后刚启动后挂起，或者有时它在几秒钟后挂起，我在应用程序中请求网络调用。

没有模式..没有要追踪的消息。尝试了很多事情，例如 Xcode 重启、系统重启和清除日志，以及像这样在库中删除临时 iPhone 模拟器文件。

我无法了解正在发生的事情。有没有人建议我解决这个问题。或者有人知道发生这种情况的原因吗？我的意思是它的应用程序问题，即代码或 Xcode 或 iPhone 模拟器应用程序问题。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:54:17.407

我昨天遇到了同样的问题。完成以下操作后，我得到了它的工作，不确定哪一步成功了。

*   重置模拟器内容。
*   退出模拟器
*   从 xcode 中删除项目的派生数据。
*   重启xcode。

# iphone - iphone 5屏幕分辨率问题

> ID：12525200
> 
> 赞同：-5
> 
> 时间：2012-09-21T06:16:50.123
> 
> 标签：iphone, iphone-5

我想为 Iphone 5 制作应用程序。我读到 iphone 5 的尺寸比 4s 小一点。我想知道我应该制作哪种尺寸的屏幕模型？导航栏、背景图像等多大的图像可以帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T08:16:35.397

SB，您可以检查[如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)回答您的大部分问题。

iphone 5 尺寸以磅为单位为 480/568。

因此，在设计应用程序时，您需要将其视为分辨率。

# regex - 查看跳过/忽略特定字符的字符串

> ID：12525209
> 
> 赞同：0
> 
> 时间：2012-09-21T06:17:56.713
> 
> 标签：regex

我正试图解决这个问题，谷歌和stackoverflow上的所有例子都没有帮助我理解。

我有这个字符串

`{{@test: mytest}}` `{{@test mytest}}`

我想从这两个例子中捕捉`test`和。`mytest`所以如果这发生在我的字符串中，两者都将返回相同的数组集。

这就是我到目前为止/正在尝试的

`/{{\s*@\s*(.*)\s*:\s*(.*)\s*}}/`

这将适用于第一个示例，但不适用于第二个示例。

所以我想也许答案是搜索跳过的字符串`:`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:23:22.543

您尚未明确定义您的标准，但假设您要匹配的文本可能不包含空格，您可以使用以下命令：

```
/{{\s*@\s*([^:\s]*)\s*:?\s*([^}\s]*)\s*}}/ 
```

*   `[^:\s]*`匹配既不包含冒号也不包含空格的字符串
*   `[^}\s]*`匹配既不包含右大括号也不包含空格的字符串
*   `:?`匹配一个可选的冒号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:26:22.857

试试`\{\{\s*@([^@:\s]+)\s*:?\s+([^}\s]+)\s*\}\}`。

**编辑：** Ack，Tim Pietzcker 打败了我。我们的表达方式之间存在一些细微的差异，但我认为任何一个都应该做你想做的事。我选择使用`+`而不是`*`在几个地方，我对你问题的解释使我相信必须至少有一个给定的字符。

**编辑2：**我的方法的一个优点是它不匹配`{{@testmy-test}}`。

# vb.net - 如何在 Visual Basic 2010 中使用 TextBox、ListBox 和 Button 搜索单词/字符串

> ID：12525214
> 
> 赞同：-2
> 
> 时间：2012-09-21T06:18:22.230
> 
> 标签：vb.net, visual-studio-2010, visual-studio

**你好程序员，大师，极客，**

请帮助我完成我的程序。我的程序是在 Visual Basic 2010 pro 中，我需要知道如何在 TextBox 和 ListBox 中搜索单词或字符串，有关我的问题的详细说明，我提供了下图：

![](../Images/e2a3221d128072714980c6592f329a3c.png)

如您所见，有一个文本框（在此处搜索）、按钮（搜索和清除）和列表框（带有计算机、程序员、程序、编程的词）。

我只需要知道如何搜索一个单词，例如我在文本框中输入一个单词“程序”（在此处搜索），当我单击按钮（搜索）时，单词“程序”必须在列表框的顶部而不是“计算机”和“程序员”这个词。这就是我想知道的，请帮我解决这个问题，我之所以问这个问题是因为我们在Visual Basic 2010中有一个最终项目，我选择创建一个简单的编程词典作为我的项目。

**先感谢您，**

马文/哈夸

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:23:29.517

我会用 C# 为你提供解决方案，所以如果你是 VB 开发人员，你必须通读并理解我写的内容；）我还包括了一些遗漏，所以它不会编译。哇哈哈。

```
 public class FooForm : Form {
     private Button _searchButton;
     private TextBox _searchFor;
     private ListBox _list;
     private void SearchButton_Click() {
         String searchFor = _searchFor.Text;
         foreach(Object item in _list.Items) {
             if( String.Equals( item.ToString(), searchFor, StringComparison.OrdinalIgnoreCase ) {
                 _list.SelectedItem = item;
                 break;
             }
         }
     }
 } 
```

# facebook - 在较小的屏幕/移动设备上删除 Facebook Likebox

> ID：12525218
> 
> 赞同：0
> 
> 时间：2012-09-21T06:18:45.047
> 
> 标签：facebook, responsive-design, facebook-likebox

有没有一种方法不显示并且重要的是不在具有特定屏幕尺寸（例如：不在智能手机上）或特定数据连接（不是 wifi）的设备上加载 Facebook Likebox，likebox 会显着减慢网站速度。

所以方法显示：无；是没有选择的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:46:47.753

目前没有办法（可靠地）查询数据连接类型。

我可以建议一种不同的方法吗？也许您可以使用 javascript 按需加载likebox，就像[techcrunch.com](http://techcrunch.com)或[enter.co](http://enter.co)那样。只有当您将鼠标悬停在某些占位符图像上时，这些网站才会加载社交按钮。

这样，您不仅可以优化移动屏幕，还可以优化所有设备。如果您仍然需要，您可以在加载按钮之前检查视口大小，或者在媒体查询中使用 display:none 以便不显示占位符图像 - 并且无法加载按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T04:45:03.000

为什么不是基于条件的简单回声？

对于连接，您可能会使用如下代码获得用户速度：[http ://www.emanueleferonato.com/2006/05/31/determine-connection-speed-with-php/](http://www.emanueleferonato.com/2006/05/31/determine-connection-speed-with-php/)

然后一个if语句如果速度在56k以上，输出likebox代码？

对于手机，在获得浏览器用户代理后，您将执行相同的操作。

# ruby-on-rails - Ruby on Rails 中 rss 提要的 xml 生成中的命名空间前缀和 cdata 标记

> ID：12525220
> 
> 赞同：9
> 
> 时间：2012-09-21T06:18:59.653
> 
> 标签：ruby-on-rails, ruby, xml, rss, nokogiri

我需要为大致如下所示的提要生成 xml：-

```
 <?xml version="1.0" encoding="iso-8859-1" ?>
<rss version="2.0" xmlns:g="http://base.google.com/ns/1.0" xmlns:atom="http://www.w3.org/2005/Atom">
<channel>
    <item>
        <g:id><![CDATA[id]]></g:id>
        <title><![CDATA[Product Name]]></title>
        <description><![CDATA[This should be a relatively detailed description with as little formatting as possible.]]></description>
        <g:brand>Brand X</g:brand>
        <g:sale_id>new</g:sale_id>
    </item>
    <item>
        Next product...
    </item>
</channel>
</rss> 
```

我的代码目前看起来像这样：-

```
xml=Builder::XmlMarkup.new(:indent => 3)
xml.instruct!
xml.rss("version" => "2.0" ,  "xmlns:g" => "http://base.google.com/ns/1.0" , "xmlns:atom" => "http://www.w3.org/2005/Atom"){
xml.channel{
# remove xml.namespace = xml.namespace_definitions.find{|ns|ns.prefix=="atom"}
sale_products.each do |sp|
  sid = (products_info[sp.product_id]["sale_id"]).to_s()
  xml.item {
    #xml.id{ |xml| xml.cdata!(products_info[sp.product_id].own_id) }
    #xml.g :id,{ xml.cdata!("sdaf") }
    xml.product_title{ |xml| xml.cdata!(products_info[sp.product_id].name) }
    xml.description{ |xml| xml.cdata!(ActionController::Base.helpers.strip_tags(products_info[sp.product_id].description)) }
    xml.item {
      xml.brand { |xml| xml.cdata!(products_info[sp.product_id].designer_1) }
      xml.sale_id{ |xml| xml.cdata!(sid) }
    }
  }

end
}
} 
```

我的问题是让命名空间前缀和 cdata 标记同时工作。

```
xml.g :id, "fdsafsad" 
```

这将获取命名空间前缀。

```
xml.product_title{ |xml| xml.cdata!(products_info[sp.product_id].name) } 
```

这会在值周围获取 cdata 标记。

```
xml.g :id,{ xml.cdata!("sdaf") } 
```

这无法解决问题。

我如何让命名空间前缀和 cdata 标记同时为同一个标记工作。我究竟做错了什么？

**编辑**：-我目前得到的输出是：-

```
<g:id>
   <![CDATA[10005-0003]]>
</g:id> 
```

我想要的输出应该只有 cdata 标签内的值（没有换行符等）：-

```
<g:id><![CDATA[10005-0003]]></g:id> 
```

请注意，我不想在创建标记时删除 :indent => 3 ，以便根据需要格式化其他标记。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-22T03:40:22.310

```
xml.tag!("g:id") { xml.cdata!("sdaf") } 
```

# javascript - iPhone 5 和全画布宽度

> ID：12525229
> 
> 赞同：0
> 
> 时间：2012-09-21T06:20:10.943
> 
> 标签：javascript, iphone, ios, iphone-5, impactjs

好的，所以我的 iPhone 5 到了（我住在澳大利亚，很幸运能在美国之前拥有它），我想做的第一件事就是使用[Impact JS](http://impactjs.com/)引擎为我的 2D 平台游戏充分利用**88**像素的额外宽度.

我无法理解如何实际修改画布宽度。

这是我以前使用的：

`ig.main('#canvas', MyGame, 60, 240, 160, 2);`

**现在，我认为将240**像素增加**44**像素会很容易（考虑到横向两侧各有**44像素）：**

`ig.main('#canvas', MyGame, 60, 284, 160, 2);`

但是，在上述代码更改后，我仍然在两侧看到**44像素的黑条。**

不确定我是否必须修改任何其他 Impact 引擎文件才能使其正常工作。我还没有玩够它，因为我现在正在工作，不应该真的在我的游戏上工作。我确定还有一些其他方面我必须修改才能使其正常工作。

顺便说一句，我正在使用[iOSImpact](http://impactjs.com/documentation/ios/overview)并将我的游戏直接部署到我的 iPhone 5，因此其中可能还有需要更新的文件。

我还注意到以下用于在移动设备之间进行检测的属性。我也需要`ig.ua.iPhone5`在这里投入一处房产。

```
ig.ua.pixelRatio = window.devicePixelRatio || 1;

ig.ua.viewport = {
    width: window.innerWidth,
    height: window.innerHeight
};

ig.ua.screen = {
    width: window.screen.availWidth * pixelRatio,
    height: window.screen.availHeight * pixelRatio
};

ig.ua.iPhone = /iPhone/i.test(navigator.userAgent);
ig.ua.iPhone4 = (iPhone && pixelRatio == 2);
ig.ua.iPhone5 = ??
ig.ua.iPad = /iPad/i.test(navigator.userAgent);
ig.ua.android = /android/i.test(navigator.userAgent);
ig.ua.webos = /hpwos/i.test(navigator.userAgent);
ig.ua.iOS = iPhone || iPad;
ig.ua.mobile = iOS || android || webos; 
```

我在以下内容上做了一个 console.log，这就是它返回的内容：

`ig.ua.viewport.width`= 640

`ig.ua.viewport.height`= 960

`ig.ua.screen.width`= 1280

`ig.ua.screen.height`= 1920

我对上述结果也有点困惑，特别是 ig.ua.viewport.width 返回**960**。我会认为它应该返回**1136**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:34:40.770

您的应用程序必须告诉操作系统它支持更高/更宽的屏幕。我认为这是[通过指定该大小的启动图像来](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)完成的。否则，您将在兼容模式下运行，而无法使用全屏

# android - Rails 3 网络应用程序 + Bootstrap Twitter + Phonegap

> ID：12525238
> 
> 赞同：1
> 
> 时间：2012-09-21T06:20:58.153
> 
> 标签：android, ios, ruby-on-rails-3, cordova, twitter-bootstrap

我已经阅读了很多文章，但我无法弄清楚。我有一个内置于 rails3 的完整网络应用程序，带有引导 twitter 响应 css。

现在我想把这个应用程序包装到 android 和 iOS 上，并带有电话间隙。我该怎么做

我不想使用 Jquery Mobile 创建另一个客户端，它将通过 Json 与 rails 3 后端交互。

*   是否有任何教程或解决方案将 Rails 3 Web 应用程序打包为 android 和 iOS 应用程序

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:11:50.780

不，没有教程或解决方案。这就是为什么：

> 问：PhoneGap 可以使用 PHP/ASP/JSF/Java/.NET 吗？
> 答：不可以。您只能使用 HTML、CSS 和 JavaScript

[资源](http://phonegap.com/about/faq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:25:20.200

您可以尝试 AppCan，它可以将现有网站转换为原生应用程序。

# c# - 实体框架代码优先事务

> ID：12525244
> 
> 赞同：0
> 
> 时间：2012-09-21T06:21:12.587
> 
> 标签：c#, entity-framework, entity-framework-4

我使用 Entity Framework 4 和 SqlServer CE 作为数据库。

因为SqlServer CE 不支持TransactionScope，所以不得不求助于使用BeginTransaction 和RollbackTransaction 方法。

我有两个 GRUD 函数可以在数据库中删除和创建行。

我想要实现的是这样的：

```
 using (var context = new MyContext())
                {
                    using (var tx = context.BeginTransaction()) 
                    { 
                       // grud functions
                       deleteRows();
                       addRows();

                       // do db stuff here... 
                       tx.Commit(); 
                    } 
                } 
```

但我在上下文中找不到 BeginTransaction。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:35:11.127

> 我该怎么做

我认为，您误解了`DbContext`. 它是实体的本地缓存 + 更改跟踪器。无论您对实体做什么，这些更改都只会通过上下文进行跟踪，而不会影响底层数据源。

这一切都会发生，直到您调用`SaveChanges`方法。此方法以事务方式将更改跟踪器中的更改应用到数据源，因此，您所做的所有更改都是一致的。

如果您以某种方式编写您的`deleteRows`and `addRows`，他们不会调用`SaveChanges`，并将`SaveChanges`call 放在这些方法之外的某个地方，您将获得所需的事务：

```
using (var context = new MyContext())
{
    // grud functions
    deleteRows(context);
    addRows(context);

    context.SaveChanges();
}

private void deleteRows(MyContext context) {}
private void addRows(MyContext context) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:39:31.350

在 ObjectContext 中，`BeginTransaction()`是 Connection 上的方法，而不是`ObjectContext` ~~但是，直接`DbContext`暴露`BeginTransaction`于底层连接。那么您可能没有使用 DbContext 吗？~~

尝试

```
context.Connection.BeginTransaction() 
```

# java - 识别 Web 应用程序的请求设备

> ID：12525245
> 
> 赞同：1
> 
> 时间：2012-09-21T06:21:36.053
> 
> 标签：java

我有一个 Web 应用程序，其中包含桌面和移动设备的 jsp 页面，位于 WEB-INF 侧的两个单独文件夹中，即**WEB-INF/desktop**和**WEB-INF/mobile**。根据请求设备，我想重定向到指定页面。如果请求设备是移动设备，它将被重定向到 WEB-INF/mobile/login.jsp 页面，否则它将被重定向到 WEB-INF/desktop/login.jsp 页面。所以我在这里的主要挑战是识别请求设备。谁能帮助我如何实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:25:25.693

尝试检查传入请求中的“User-Agent”标头

# ruby - 如何使用 JRuby 安装 GTK2

> ID：12525246
> 
> 赞同：1
> 
> 时间：2012-09-21T06:22:05.930
> 
> 标签：ruby, jruby

当我尝试在 Jruby 中安装 GTk2 gem 时，谁能帮我解决这个问题？

```
Check http://kenai.com/projects/jruby/pages/Home for alternatives.

checking for -Wall option to compiler... no

checking for -Waggregate-return option to compiler... no

checking for -Wcast-align option to compiler... no

checking for -Wextra option to compiler... no

checking for -Wformat=2 option to compiler... no

checking for -Winit-self option to compiler... no

checking for -Wlarger-than-65500 option to compiler... no

checking for -Wmissing-declarations option to compiler... no

checking for -Wmissing-format-attribute option to compiler... no

checking for -Wmissing-include-dirs option to compiler... no

checking for -Wmissing-noreturn option to compiler... no

checking for -Wmissing-prototypes option to compiler... no

checking for -Wnested-externs option to compiler... no

checking for -Wold-style-definition option to compiler... no

checking for -Wpacked option to compiler... no

checking for -Wp,-D_FORTIFY_SOURCE=2 option to compiler... no

checking for -Wpointer-arith option to compiler... no

checking for -Wswitch-default option to compiler... no

checking for -Wswitch-enum option to compiler... no

checking for -Wundef option to compiler... no

checking for -Wunsafe-loop-optimizations option to compiler... no

checking for -Wwrite-strings option to compiler... no

checking for rb_define_alloc_func() in ruby.h... IOError: Cannot run program "cc" (in directory "C:\jruby-1.6.8\lib\ruby\gems\1.8\gems\glib2-1.1.5\ext\glib2"):
CreateProcess error=2, The system cannot find the file specified

            popen at org/jruby/RubyIO.java:3613

           xpopen at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:323

             open at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:260

           xpopen at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:316

        egrep_cpp at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:538

        have_func at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:758

     checking_for at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:652

         postpone at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:286

             open at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:260

         postpone at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:286

             open at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:260

         postpone at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:282

     checking_for at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:651

        have_func at C:/jruby-1.6.8/lib/ruby/site_ruby/shared/mkmf.rb:755

  check_ruby_func at C:/jruby-1.6.8/lib/ruby/gems/1.8/gems/glib2-1.1.5/lib/mkmf-gnome2.rb:369

           (root) at C:/jruby-1.6.8/lib/ruby/gems/1.8/gems/glib2-1.1.5/lib/mkmf-
gnome2.rb:558

          require at org/jruby/RubyKernel.java:1062

           (root) at extconf.rb:15
*** extconf.rb failed ***

Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers.  Check the mkmf.log file for more details.  You may need configuration options.

Provided configuration options:

        --with-opt-dir

        --without-opt-dir

        --with-opt-include

        --without-opt-include=${opt-dir}/include

        --with-opt-lib

        --without-opt-lib=${opt-dir}/lib

        --with-make-prog

        --without-make-prog

        --srcdir=.

        --curdir

        --ruby=C:/jruby-1.6.8/bin/jruby    

Gem files will remain installed in C:/jruby-1.6.8/lib/ruby/gems/1.8/gems/glib2-1.1.5 for inspection.

Results logged to C:/jruby-1.6.8/lib/ruby/gems/1.8/gems/glib2-1.1.5/ext/glib2/gem_make.out 
```

我被这个问题毁了……实际上我想在 ruby​​ 中运行真正的多线程……我已经编写了一个在 ruby​​ 中使用 GTk 的应用程序……现在我想将该应用程序移植到 JRuby…… .

请帮帮我......之前有人把这个弄短了>>？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:14:00.853

这里的错误是你要么没有安装 C 编译器，要么如果你安装了它就找不到它

> IOError：无法运行程序“cc”

所以看起来 GTK 正在尝试构建原生扩展，而 Jruby 不太支持这些扩展。这篇博文讨论了他为使用来自 Jruby [https://wordpress.kaspernj.org/?p=85的 gtk+ 而编写的一些代码](https://wordpress.kaspernj.org/?p=85)

由于您要移植到 Jruby，因此您也可以直接使用 Java GTK 或直接使用 SWT。SWT [https://github.com/danlucraft/swt](https://github.com/danlucraft/swt)有一个 gem，其中包括一些简单的示例，但不确定它有多完整。

作为旁注，[Redcar 编辑器](http://redcareditor.com/)是用 Jruby + SWT 编写的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:37:50.660

您可以尝试 Gtk3 的 FFI 绑定。我自己从普通的 Ruby 和 JRuby 中都使用过它们。这些宝石被命名为“gir_ffi”和“gir_ffi-gtk”。

但是，您应该知道，目前在 MRI Ruby 下存在一些线程问题，您将不得不自己解决这些问题，就像我在这里所做的那样：

[https://github.com/kaspernj/gtk3assist/blob/master/lib/gtk3assist_threadding.rb](https://github.com/kaspernj/gtk3assist/blob/master/lib/gtk3assist_threadding.rb)

此外，这个库基本上是直接从 C 库中提取的，因此比普通的 Ruby GTK 库要复杂得多。我试图让它变得更简单一些，但要让它像 Ruby GTK2 库一样简单和简单，还有很长的路要走：

[https://github.com/kaspernj/gtk3assist/tree/master/lib](https://github.com/kaspernj/gtk3assist/tree/master/lib)

这可能是我们一直在等待的多 Ruby 和多操作系统 GUI 库 :-) 我已经让它在 Linux 和 Mac 下工作（还没有在 Windows 上尝试过）。

# xcode - XCode 4.5 中的最新 Clang 位置

> ID：12525247
> 
> 赞同：2
> 
> 时间：2012-09-21T06:22:07.943
> 
> 标签：xcode, clang, xcode4.5

我已将 XCode 更新到 4.5（使用 iOS 6）并安装了最新的命令行工具。在此之前，我总是有最新的 Clang 版本

```
/Applications/XCode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin 
```

（clang 和 clang++ 二进制文件），但现在，随着最后一次更新，它们消失了，我只有 gcc 和 llvm 的东西。我检查了整个 Mac 上的“clang”垃圾箱，并在其中找到了一个

```
/Applications/XCode.app/Contents/Developer/Toolchains/XCodeDefault.xctoolchain/usr/bin 
```

但为什么会这样？首先，为什么我在以前的文件夹中没有 clang，它总是在哪里，其次，它是使用这个 xctoolchain 文件夹作为“clang 的默认位置”的有效方式（例如，对于项目存储库中的 cmake）

**编辑**：对于 Xcode 5 及更多版本，clang 再次出现在 .xctoolchain 文件夹中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T06:30:31.240

如果你安装了“Xcode 的命令行工具”，你会在一个漂亮、直观的位置发出叮当声，比如“ `/usr/bin`”。

要了解它们，您可以通过 Xcode 的首选项进入，如下所示：

![通过 Xcode 安装命令行组件](../Images/c3a8a33a636d576c4b993dfac977adbb.png)

[或者您可以单击http://developer.apple.com/xcode](http://developer.apple.com/xcode)上的“寻找其他开发人员工具”链接，其中有一个磁盘映像和一个可以下载的安装程序。

这两个选项都安装完全相同的组件。

# php - 标头位置在我的 php 代码中不起作用

> ID：12525251
> 
> 赞同：30
> 
> 时间：2012-09-21T06:22:31.157
> 
> 标签：php, header

我有这个代码，为什么我的标题位置不起作用？它是在我的控制面板中更新、编辑和删除某些页面的一种形式...我在 form.php 的同一文件夹中有一个 index.php 文件...有什么帮助吗？（）我试图把标题放在后面编辑和删除...仍然转到表单页面而不是索引...

```
<?php
include "../../includes/site_includes.php";
//send
if ((isset($_POST["send"])) && ($_POST["send"] == 1)) {
    $pageid = $_POST["page_id"];
    $pagetitle = $_POST["page_title"];
    $nameinmenu = $_POST["page_menu_name"];
    $nameinurl = $_POST["page_name_url"];
    $link = $_POST["page_link"];
    $picture = $_POST["page_pic"];
    $desc = $_POST["page_desc"];
    $content = $_POST["page_content"];
}
if ((isset($_POST["act"])) && ($_POST["act"] == "add")) {
    $sql = insertpage();
    if ($result = $mysqli->prepare($sql)) {
        $result->bind_param("sssssss", $pagetitle, $nameinmenu, $nameinurl, $link, $picture, $desc, $content);
        $result->execute();
        $result->store_result();
        $rows = $result->num_rows;
    }
}
////edit
if ((isset($_GET["act"])) && ($_GET["act"] == "edit")) {
    $sql = getfrompages();
    if ($result = $mysqli->prepare($sql)) {
        $rekza = $_GET["id"];
        $result->bind_param("i", $rekza);
        $result->execute();
        $result->store_result();
        $rowsZ = $result->num_rows;
    }
    if ($rowsZ > 0) {
        $row = fetch($result);
        $pageid = $row[0]["page_id"];
        $pagetitle = $row[0]["page_title"];
        $nameinmenu = $row[0]["page_menu_name"];
        $nameinurl = $row[0]["page_name_url"];
        $link = $row[0]["page_link"];
        $picture = $row[0]["page_pic"];
        $desc = $row[0]["page_desc"];
        $content = $row[0]["page_content"];
    }
}
if ((isset($_GET["act"])) && ($_GET["act"] == "delete")) {
    $thedelid = $_GET["id"];
    $sql2 = delpage();
    if ($result2 = $mysqli->prepare($sql2)) {
        $result2->bind_param("i", $thedelid);
        $result2->execute();
        $result2->store_result();
        $rowsZ2 = $result2->num_rows;
    }
}
header('location: index.php');
exit();
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> pages add </title>
  <meta name="Generator" content="EditPlus">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
 </head>

 <body>
<form method="post" action="">
        <table>
            <tr>
                <td style="font-weight:bold;">title</td>
                <td><input type="text" name="page_title" value="<?=$pagetitle?>" /></td>
            </tr>
            <tr>
                <td style="font-weight:bold;">name in menu</td>
                <td><input type="text" name="page_menu_name" value="<?=$nameinmenu?>" /></td>
            </tr>
            <tr>
                <td style="font-weight:bold;">name in url</td>
                <td><input type="text" name="page_name_url" value="<?=$nameinurl?>" /></td>
            </tr>
            <tr>
                <td style="font-weight:bold;">link</td>
                <td><input type="text" name="page_link" value="<?=$link?>" /></td>
            </tr>
            <tr>
                <td style="font-weight:bold;">picture</td>
                <td><input type="text" name="page_pic" value="<?=$picture?>" /></td>
            </tr>
            <tr>
                <td style="font-weight:bold;">description</td>
                <td><textarea name="page_desc"><?=$desc?></textarea></td>
            </tr>
            <tr>
                <td style="font-weight:bold;">content</td>
                <td><textarea name="page_content"><?=$content?></textarea></td>
            </tr>
            <tr>
                <td colspan="2">
                <input type="hidden" name="send" value="1" />
                <input type="hidden" name="act" value="<?=$_GET["act"]?>" />
                <input type="hidden" name="page_id" value="<?=$pageid?>" />
                <input type="submit" value="add" /></td>
            </tr>
        </table>
</form>
 </body>
</html> 
```

**已解决：** 使用@Mihai Iorga 代码我添加了 ob_start();

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-21T06:24:06.070

那是因为你有一个输出：

```
?>
<?php 
```

导致空行输出。

*header() 必须在发送任何实际输出之前调用，无论是通过普通 HTML 标记、文件中的空行还是从 PHP*

合并所有 PHP 代码并确保文件开头没有任何空格。

如果您在下面有任何其他脚本，也在`header('location: index.php');`添加之后。`exit();`

还要在最后一个`if`.

如果有内容，也可以通过注入javascript来重定向：

```
<?php
    echo "<script>window.location.href='target.php';</script>";
    exit;
?> 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-09-21T06:40:42.103

尝试`ob_start();`在代码顶部添加，即在`include`语句之前。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-09-12T08:51:45.703

只需`ob_start();`在包含功能之前使用它会有所帮助

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-05-11T18:05:39.387

***删除空间***

正确：**header("Location: home.php");** 或**标头（“位置：home.php”）；**

不正确：标头（“位置：home.php”）；

删除 Location 和 : **-->** header("Location( **remove space** ): home.php");

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-02-05T06:41:30.913

函数 ob_start() 将打开输出缓冲。当输出缓冲处于活动状态时，不会从脚本发送输出（除了标题），而是将输出存储在内部缓冲区中。因此浏览器将不会收到任何输出，并且标头将起作用。此外，我们应该确保在代码顶部使用 header()。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-01-23T15:28:31.533

```
ob_start(); 
```

应该添加到第 1 行本身。像下面的例子

```
<?php
ob_start(); // needs to be added here
?>
<!DOCTYPE html>
<html lang="en">
// your code goes here
</html>
<?php
if(isset($_POST['submit']))
{ 
//code to save data in db goes here
}
header('location:index.php?msg=sav'); 
?> 
```

在 html 下添加它也不起作用。像下面

```
<!DOCTYPE html>
<html lang="en">
// your code goes here
</html>
<?php
ob_start(); // it doesnt work even if you add here
if(isset($_POST['submit']))
{ 
//code to save data in db goes here
}
header('location:index.php?msg=sav'); 
?> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-08T05:26:29.673

我使用以下代码，它对我来说很好。

```
if(!isset($_SESSION['user'])) {
       ob_start();
       header("Location: https://sitename.com/login.php");
       exit();
} else { 

// my further code 

} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-01-08T16:20:19.053

我的本地主机和共享服务器上有相同的应用程序。在我的本地主机上，重定向工作正常，而在这个共享服务器上却没有。我检查了 phpinfo，发现是什么原因造成的：

[![在此处输入图像描述](../Images/3b3efd21f188a28f6fcb72de4057a206.png)](https://i.stack.imgur.com/ZUmQ8.jpg)

在我的本地主机上，我有这个：

[![在此处输入图像描述](../Images/2029b412ef74be5e76153713c0d333ae.png)](https://i.stack.imgur.com/UGBzA.jpg)

所以我要求系统管理员增加这个值，在他这样做之后，一切正常。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-13T17:38:16.727

我花了一些时间才弄清楚：我的 php 文件是用 UTF-8 编码的。并且 BOM 阻止标题位置正常工作。在记事本++中，我将文件编码设置为“UTF-8 without BOM”，问题就消失了。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-21T05:50:03.530

对我来说只需添加 ob_start(); 在文件的开头。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-05-29T02:48:14.507

检查以下是否启用

bz、mbstring、intl、ioncube_loader 和 Json 扩展。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-09-21T06:42:21.403

`Location`它不应该是`location`：

```
header('Location: index.php'); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-02-11T10:47:08.770

在我的情况下，我使用函数“ob_start()”创建了新的配置文件，并将其添加到我的 .gitignore 文件中。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-01-25T08:09:01.910

我用这个

```
header("Location:comments.php"); 
```

它解决了..

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-05-05T16:36:41.257

在您的 HTML 代码中，您正在使用表单并将操作设置为“”，据我所知，这优先于表单中的标题。

我发现在表单中使用 action 元素而不是标题 Location 是一种选择。我假设您希望链接上有不同的选项，因此需要变量。

```
<?php $nextLink = "index.php"; ?>
<form method="post" action="<?php echo $nextLink; ?>"> 
```

我建议将变量放在 $_POST 之外以开始测试。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-06T18:07:16.090

就我而言，它是在 ?> 之后的额外空格

删除了空格，瞧，它起作用了。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-09-28T06:56:33.330

在我的情况下，我刚刚添加`ob_start();`了包含任何内容并且它有效！

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2019-06-15T12:49:54.717

创建 config.php 并放置它可以工作的代码

# ios - Rails：redirect_to 'myapp://' 从移动 safari 调用 iOS 应用程序

> ID：12525257
> 
> 赞同：1
> 
> 时间：2012-09-21T06:23:20.680
> 
> 标签：ios, ruby-on-rails, redirect, mobile-safari

我有一个本机 iOS 应用程序，可以通过`myiosapp://`. 我还有一个简单的 Rails 应用程序，当请求来自移动设备时，它应该重定向到本机应用程序。这就是我遇到问题的地方 - 我不能`redirect_to 'myiosapp://`

我想尽可能简短地描述这个问题，所以我制作了一个示例应用程序，它去除了不相关的信息，但复制了同样的问题。

这是我的路线.rb：

```
MyRailsApp::Application.routes.draw do
  root :to => 'redirect#index'
end 
```

这是redirect_controller.rb：

```
class RedirectController < ApplicationController
  def index
    if request_from_mobile?
      redirect_to "myiosapp://"
    else
      redirect_to "/default.html"
    end
  end

  private

  def request_from_mobile?
    request.user_agent =~ /Mobile|webOS/
  end
end 
```

每当我跑去`rails server`，`localhost::3000`我都会得到这个：

```
Started GET "/" for 127.0.0.1 at 2012-09-21 14:00:52 +0800
Processing by RedirectController#index as HTML
Redirected to motionapp://
Completed 302 Found in 0ms (ActiveRecord: 0.0ms)
[2012-09-21 14:00:52] ERROR URI::InvalidURIError: bad URI(absolute but no path): motionapp://
    /Users/dev/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/generic.rb:1202:in `rescue in merge'
    /Users/dev/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/generic.rb:1199:in `merge'
    /Users/dev/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpresponse.rb:220:in `setup_header'
    /Users/dev/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpresponse.rb:150:in `send_response'
    /Users/dev/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:110:in `run'
    /Users/dev/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

在发布此之前，我已经看到了许多类似的问题，但似乎没有一个更具体地说明我如何在 Rails 中实现它：

[如何从 Mobile Safari 重定向到本机 iOS 应用程序（如 Quora）？](https://stackoverflow.com/questions/9688319/how-to-redirect-from-mobile-safari-to-native-ios-app-like-quora)

[iphone网络应用程序自动重定向到应用程序](https://stackoverflow.com/questions/5182666/iphone-web-app-to-automatically-redirect-to-app)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T04:05:47.447

事实证明，目前有一个简单的解决方案足以满足我的应用程序的上下文。我只需要在 javascript 中处理重定向。仍然欢迎其他解决方案。:)

```
<html><head>
    <script type="text/javascript">
      var userAgent = window.navigator.userAgent;
      if (userAgent.match(/iPad/i) || userAgent.match(/iPhone/i)) {
        window.location = "myiosapp://"
      }
    </script>
  </head>
  <body>
    Some html page
  </body>
</html> 
```

# android - 从应用程序进行 SIP 呼叫时使用本机 SIP 拨号器

> ID：12525262
> 
> 赞同：0
> 
> 时间：2012-09-21T06:23:34.573
> 
> 标签：android, sip, voip, rtp, jain-sip

我正在为 SIP 开发 android 应用程序。我成功地使用 Jain -sip-stack 制作了 SIP 堆栈，但是为了拨打电话，我想将我的应用程序与 Native SIP 拨号器集成以拨打电话。这是默认设置，也可在 android 手机中使用。可以使用本机拨号器通过本机 SIP 拨号器进行 sip 呼叫。

任何帮助，将不胜感激..

谢谢！！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:49:53.740

是的，您可以使用本机拨号器拨打 sip 电话。

为此，您需要添加一个`BroadcastReceiver`类...如下所示...

```
public class Dialer extends BroadcastReceiver 
{

  @Override
  public void onReceive(Context context, final Intent intent) {     

      if (intent.getAction().equals("android.intent.action.NEW_OUTGOING_CALL")) {

      String phoneNumber = intent.getExtras().getString( "android.intent.extra.PHONE_NUMBER");

      // Call some function from here to make SIP Call using this phoneNumber.
      // Use this "phoneNumber" to your sip application & setResultData null.

      setResultData(null);

  } 

} 
```

您需要添加`<intent-filter>`到您的`AndroidManifest.xml`

```
<receiver android:name=".Dialer" android:enabled="true">
        <intent-filter>
            <action   android:name="android.intent.action.NEW_OUTGOING_CALL" />
        </intent-filter>
 </receiver> 
```

# android - 使用片段的 Android 功能区菜单

> ID：12525267
> 
> 赞同：4
> 
> 时间：2012-09-21T06:24:06.850
> 
> 标签：android, android-fragments, scrollview, ribbon, android-listfragment

我使用水平滚动视图对功能区菜单进行了编码。我的代码如下：

```
public class HorzScrollWithListMenuActivity extends Activity {

        MyHorizontalScrollView scrollView;
        View menu;
        View app;
        ImageView btnSlide;
        boolean menuOut = false;
        Handler handler = new Handler();
        int btnWidth;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState); 

            LayoutInflater inflater = LayoutInflater.from(HorzScrollWithListMenuActivity.this);
            scrollView = (MyHorizontalScrollView) inflater.inflate(R.layout.horz_scroll_with_list_menu, null);
            setContentView(scrollView); 

            menu = inflater.inflate(R.layout.horz_scroll_menu, null);
            app = inflater.inflate(R.layout.horz_scroll_app, null);
            ViewGroup tabBar = (ViewGroup) app.findViewById(R.id.tabBar);

            ListView listView = (ListView) app.findViewById(R.id.list);
            ViewUtils.initListView(this, listView, "Item ", 50, android.R.layout.simple_list_item_1);

            listView = (ListView) menu.findViewById(R.id.list);
            ViewUtils.initListView(this, listView, "Menu ", 30, android.R.layout.simple_list_item_1);

            btnSlide = (ImageView) tabBar.findViewById(R.id.BtnSlide);
            btnSlide.setOnClickListener(new ClickListenerForScrolling(scrollView, menu,app));

            final View[] children = new View[] { menu, app };

            // Scroll to app (view[1]) when layout finished.
            int scrollToViewIdx = 1;
            scrollView.initViews(children, scrollToViewIdx, new SizeCallbackForMenu(btnSlide));
        }

        /**
         * Helper for examples with a HSV that should be scrolled by a menu View's width.
         */
        static class ClickListenerForScrolling implements OnClickListener {
            HorizontalScrollView scrollView;
            View menu;
            View app;
            /**
             * Menu must NOT be out/shown to start with.
             */
            boolean menuOut = false;

            public ClickListenerForScrolling(HorizontalScrollView scrollView, View menu, View app) {
                super();
                this.scrollView = scrollView;
                this.menu = menu;
                this.app=app;
            }

            public void onClick(View v) {
                Context context = menu.getContext();
                String msg = "Slide " + new Date();
                Toast.makeText(context, msg, 1000).show();
                System.out.println(msg);

                int menuWidth = menu.getMeasuredWidth();

                // Ensure menu is visible
                menu.setVisibility(View.VISIBLE);

                if (!menuOut) {
                    // Scroll to 0 to reveal menu
                    int left = 0;
                    scrollView.smoothScrollTo(left, 0);

                } else {
                    // Scroll to menuWidth so menu isn't on screen.
                    int left = menuWidth;
                    scrollView.smoothScrollTo(left, 0);

                }
                menuOut = !menuOut;
                if(v.isPressed())
                {
                    v.setClickable(false);

                }

            }
        }

        /**
         * Helper that remembers the width of the 'slide' button, so that the 'slide' button remains in view, even when the menu is
         * showing.
         */
        static class SizeCallbackForMenu implements SizeCallback {
            int btnWidth;
            View btnSlide;

            public SizeCallbackForMenu(View btnSlide) {
                super();
                this.btnSlide = btnSlide;
            }

            public void onGlobalLayout() {
                btnWidth = btnSlide.getMeasuredWidth();
                System.out.println("btnWidth=" + btnWidth);
            }

            public void getViewSize(int idx, int w, int h, int[] dims) {
                dims[0] = w;
                dims[1] = h;
                final int menuIdx = 0;
                if (idx == menuIdx) {
                    dims[0] = w - btnWidth;
                }
            }
        }
    } 
```

**MyHorizo​​ntalScrollView.java**

```
public class MyHorizontalScrollView extends HorizontalScrollView {
    public MyHorizontalScrollView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(context);
    }

    public MyHorizontalScrollView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }

    public MyHorizontalScrollView(Context context) {
        super(context);
        init(context);
    }

    void init(Context context) {
        // remove the fading as the HSV looks better without it
        setHorizontalFadingEdgeEnabled(false);
        setVerticalFadingEdgeEnabled(false);
    }

    /**
     * @param children
     *            The child Views to add to parent.
     * @param scrollToViewIdx
     *            The index of the View to scroll to after initialisation.
     * @param sizeCallback
     *            A SizeCallback to interact with the HSV.
     */
    public void initViews(View[] children, int scrollToViewIdx, SizeCallback sizeCallback) {
        // A ViewGroup MUST be the only child of the HSV
        ViewGroup parent = (ViewGroup) getChildAt(0);

        // Add all the children, but add them invisible so that the layouts are calculated, but you can't see the Views
        for (int i = 0; i < children.length; i++) {
            children[i].setVisibility(View.INVISIBLE);
            parent.addView(children[i]);
        }

        // Add a layout listener to this HSV
        // This listener is responsible for arranging the child views.
        OnGlobalLayoutListener listener = new MyOnGlobalLayoutListener(parent, children, scrollToViewIdx, sizeCallback);
        getViewTreeObserver().addOnGlobalLayoutListener(listener);
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        // Do not allow touch events.
        return false;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        // Do not allow touch events.
        return false;
    }

    /**
     * An OnGlobalLayoutListener impl that passes on the call to onGlobalLayout to a SizeCallback, before removing all the Views
     * in the HSV and adding them again with calculated widths and heights.
     */
    class MyOnGlobalLayoutListener implements OnGlobalLayoutListener {
        ViewGroup parent;
        View[] children;
        int scrollToViewIdx;
        int scrollToViewPos = 0;
        SizeCallback sizeCallback;

        /**
         * @param parent
         *            The parent to which the child Views should be added.
         * @param children
         *            The child Views to add to parent.
         * @param scrollToViewIdx
         *            The index of the View to scroll to after initialisation.
         * @param sizeCallback
         *            A SizeCallback to interact with the HSV.
         */
        public MyOnGlobalLayoutListener(ViewGroup parent, View[] children, int scrollToViewIdx, SizeCallback sizeCallback) {
            this.parent = parent;
            this.children = children;
            this.scrollToViewIdx = scrollToViewIdx;
            this.sizeCallback = sizeCallback;
        }

        public void onGlobalLayout() {
            // System.out.println("onGlobalLayout");

            final HorizontalScrollView me = MyHorizontalScrollView.this;

            // The listener will remove itself as a layout listener to the HSV
            me.getViewTreeObserver().removeGlobalOnLayoutListener(this);

            // Allow the SizeCallback to 'see' the Views before we remove them and re-add them.
            // This lets the SizeCallback prepare View sizes, ahead of calls to SizeCallback.getViewSize().
            sizeCallback.onGlobalLayout();

            parent.removeViewsInLayout(0, children.length);

            final int w = me.getMeasuredWidth();
            final int h = me.getMeasuredHeight();

            // System.out.println("w=" + w + ", h=" + h);

            // Add each view in turn, and apply the width and height returned by the SizeCallback.
            int[] dims = new int[2];
            scrollToViewPos = 0;
            for (int i = 0; i < children.length; i++) {
                sizeCallback.getViewSize(i, w, h, dims);
                // System.out.println("addView w=" + dims[0] + ", h=" + dims[1]);
                children[i].setVisibility(View.VISIBLE);

                parent.addView(children[i], dims[0], dims[1]);
                if (i < scrollToViewIdx) {
                    scrollToViewPos += dims[0];
                }
            }

            // For some reason we need to post this action, rather than call immediately.
            // If we try immediately, it will not scroll.
            new Handler().post(new Runnable() {
                public void run() {
                    me.scrollBy(scrollToViewPos, 0);
                }
            });
        }
    }

    /**
     * Callback interface to interact with the HSV.
     */
    public interface SizeCallback {
        /**
         * Used to allow clients to measure Views before re-adding them.
         */
        public void onGlobalLayout();

        /**
         * Used by clients to specify the View dimensions.
         * 
         * @param idx
         *            Index of the View.
         * @param w
         *            Width of the parent View.
         * @param h
         *            Height of the parent View.
         * @param dims
         *            dims[0] should be set to View width. dims[1] should be set to View height.
         */
        public void getViewSize(int idx, int w, int h, int[] dims);
    }
} 
```

**ViewUtils.java**

```
public class ViewUtils {
    private ViewUtils() {
    }

    public static void initListView(Context context, ListView listView, String prefix, int numItems, int layout) {
        // By using setAdpater method in listview we an add string array in list.
        String[] arr = new String[numItems];
        for (int i = 0; i < arr.length; i++) {
            arr[i] = prefix + (i + 1);
        }
        listView.setAdapter(new ArrayAdapter<String>(context, layout, arr));
        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                Context context = view.getContext();
                String msg = "item[" + position + "]=" + parent.getItemAtPosition(position);
                Toast.makeText(context, msg, 1000).show();
                System.out.println(msg);
            }
        });
    }
} 
```

请告诉我如何提供滑动选项。

**如何使用片段做同样的项目（功能区菜单）？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:41:28.237

ActionBarSherlock 是构建此类应用程序的非常有用的库，

请先检查这个库，
[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

然后签出这个项目，
[https://bitbucket.org/owentech/abstabsviewpager/](https://bitbucket.org/owentech/abstabsviewpager/)

我希望它有助于解决您的问题。

快乐的编码...

# objective-c - 运行 iOS 应用程序的不同方式

> ID：12525268
> 
> 赞同：-5
> 
> 时间：2012-09-21T06:24:17.270
> 
> 标签：objective-c, ios, xcode, macos, ios-simulator

它有一个方法列表，以便我们可以运行和测试 iOS 应用程序？

这里的测试并不意味着单元测试或代码测试。假设从编码的角度来看，我的应用程序是 100% 完美的。现在我想使用该应用程序。该方法可以在模拟器、iPhone 设备、iPad 设备等上运行应用程序。

我们是否有可能采用不同的方法将应用程序安装在已[越狱](http://en.wikipedia.org/wiki/IOS_jailbreaking)和未越狱的 iOS 设备上。我的问题的目的是列出所有可能有助于测试或运行 iOS 应用程序的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T06:39:29.983

您可以使用 Xcode 4 对 iOS 应用程序进行单元测试。单元测试可提高生产力并提高代码质量。

[您可以在此处](http://developer.apple.com/library/ios/#DOCUMENTATION/DeveloperTools/Conceptual/UnitTesting/00-About_Unit_Testing/about.html)查看有关单元测试的更多详细信息。

[您可以在此处](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html#//apple_ref/doc/uid/TP40002143-CH3-SW5)查看有关设置逻辑单元测试的更多详细信息。

[此外，您还可以在此处](http://blog.testlabs.com/2009/08/top-10-tips-for-testing-iphone.html)查看测试 iPhone 应用程序的 10 大技巧。

**对于部署**，这些是无需越狱的可能方法：

1.  连接您的设备并将您的项目运行到设备而不是模拟器。

2.  创建 IPA 并通过 iTunes 安装

3.  创建 IPA 并通过[TestFlight安装](https://testflightapp.com)

或者[越狱](http://en.wikipedia.org/wiki/IOS_jailbreaking)你的iPhone，你可以使用[这个方法](http://itigerraj.blogspot.in/2012/09/install-apps-on-devices-without.html)（下面的答案）

# c# - 除法后的下一个更大的整数

> ID：12525270
> 
> 赞同：5
> 
> 时间：2012-09-21T06:24:19.317
> 
> 标签：c#

> **可能重复：**
> [如何对整数除法的结果进行四舍五入](https://stackoverflow.com/questions/17944/how-to-round-up-the-result-of-integer-division)

```
double d1=11, double d2=2
int i=d1/d2; 
```

我会是 5。但我希望它返回 6。（如果结果是 5.01，我也想要 6）我应该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T06:25:26.943

```
int i = (int)Math.Ceiling(d1/d2); 
```

# javascript - ember this.get Uncaught TypeError: Object # 没有方法'get'

> ID：12525274
> 
> 赞同：2
> 
> 时间：2012-09-21T06:24:24.693
> 
> 标签：javascript, jquery, ember.js

我试图让这段代码在 ember 中工作，但它不断给我“Uncaught TypeError: Object # has no method 'get'”在线 `this.get('element_id')[item.id] = true;`为什么它不能访问 element_id 哈希？

```
function() {
    return Ember.ArrayProxy.extend({
        box: null,
        content: [],
        element_id: {},

        init: function() {
            this._super();
            var items = this.get( 'box' ).getData();
            if ( items.get( 'length' ) ) {
                this.set( '[]', items );
            };

            // Initialize the hash
            items.forEach(function(item) {
                this.get('element_id')[item.id] = true;
            });             

        }
    });
} 
```

);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T06:35:07.353

使用[forEach](http://emberjs.com/api/classes/Ember.Array.html#method_forEach)方法时，您可以传递将`this`在上下文中设置的目标对象，如文档中所述：

> 请注意，除了回调之外，您还可以传递一个可选的目标对象，该对象将在上下文中设置为“this”。这是让您的迭代器函数访问当前对象的好方法。

所以你的代码现在应该是：

```
items.forEach(function(item) {
  this.get('element_id')[item.id] = true;
}, this); 
```

# visual-studio - Visual Studio 的 GUI 工具

> ID：12525276
> 
> 赞同：0
> 
> 时间：2012-09-21T06:24:28.767
> 
> 标签：visual-studio, user-interface

我需要一个帮助。我想开发一个具有 custom `titlesbar`、 custom `toolbar`、 custom`menubar`或类似的软件。那么有没有适用于 Visual Studio 的 GUI 开发工具？

# python - 在 python 的值中发送带有 & 字符的参数时出错？

> ID：12525279
> 
> 赞同：5
> 
> 时间：2012-09-21T06:24:55.540
> 
> 标签：python, arguments, centos, ampersand

我在 python 中处理 2 个脚本。第一个需要向第二个脚本发送一个值或一个参数。现在的问题是，每当我将值发送到第二个脚本时，第二个脚本都无法获取我发送的所有参数。我发送的值是一个 URL，它包含一个 & 符号。我注意到它一直在降低 & 的第一次出现的值。

例如，让我们坐下，我需要通过这个：

> [http://www.google.com/jfljflfjej&12345](http://www.google.com/jfljflfjej&12345)

第二个脚本只会收到这个：

> [http://www.google.com/jfljflfjej](http://www.google.com/jfljflfjej)

我需要做什么才能获得正确的值？还有哪些其他角色有与此相同的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T06:28:32.810

您需要在整个值周围加上引号，包括 & 号，因为它是一个特殊的 shell 字符。或者，您可以通过在它前面放置一个反斜杠来逃避它：

```
http://www.google.com/jfljflfjej\&12345 
```

& 符号向 shell 发出信号，您希望在后台模式下将命令置于该点。

以下任何字符[在 shell 中都是特殊的](http://www.vias.org/linux-knowhow/lnag_05_05_09.html)：

```
 \ ' " ` < > | ; <Space> <Tab> <Newline> ( ) [ ] ? # $ ^ & * = 
```

这些需要以相同的方式进行转义；使用反斜杠或在值周围加上引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T14:09:11.447

也许现在回答你有点晚了，但我遇到了同样的问题，我找到了一个简单的解决方案。

您可以使用函数 replace() 将每个 & 符号替换为 HTML '%26' 中的代码，如下所示。

```
url = http://www.google.com/jfljflfjej&12345
print url.replace('&', '%26') 
```

结果：

```
http://www.google.com/jfljflfjej%2612345 
```

这是编码的问题。

# jsp - Excel 工作表未在 Mozilla 中打开

> ID：12525280
> 
> 赞同：0
> 
> 时间：2012-09-21T06:25:03.300
> 
> 标签：jsp

我在 JSP 上有一个下载链接，可以下载一个 excel 文件。我写了一个简单的href如下：a href="${pageContext.request.contextPath}/templates/XLS_Temp_late.xls" target="_blank"> Link 我可以在IE9和Mozilla中下载excel文件我在本地测试。但是，当将相同的代码部署到服务器时，下载链接在 IE9 中可以正常工作，但在 Mozilla 中，它会在带有特殊字符的新浏览器窗口中打开。实际上打开/保存弹出窗口不会出现。

请提出我做错了什么。

嗨，汤姆，我没有得到我需要做的事情。对于那个很抱歉。您能否解释一下您建议我实施的更多内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:35:43.770

我问过同事这个问题，他说这种情况很可能是因为IE和mozilla内核代码不同所以你可以在IE下工作但是mozilla不支持这种方式，你应该问题截图发更好看，因为一样问题可能万种原因不能一概而论，希望我的回答对你有帮助你能明白

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:19:06.387

尝试连接一个带标签的资源包，下载就行了 原理扩展只要web服务器解析不了，一般保存到本地形式的http

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:32:09.073

我就这个问题问过同事，他说这种情况很可能是因为IE和mozilla内核代码不同所以你可以在IE下工作但是mozilla不支持这种方式，你应该问题截图发更好看，因为一样问题可能万种原因不能一概而论，希望你能帮忙。对不起我的英文不是很好，能看懂你的问题，但是英文表达不好，所以我用google翻译，希望你能理解

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T08:39:28.730

我就这个问题问过同事，他说这很可能是因为IE和mozilla使用了不同的内核，所以你的代码在IE中正常工作，但是mozilla不支持这种方式，你应该Screenshothair更好看，同样的问题可能万种原因不能一概而论，希望我的回答对你有帮助能理解

# php - 从表格中的表格过帐

> ID：12525284
> 
> 赞同：-1
> 
> 时间：2012-09-21T06:25:22.043
> 
> 标签：php, html, forms, html-table

我正在尝试从数据库中检索记录并将它们放入表中。我想要一个可以做一些处理的更新按钮。这是代码。它正确输出。但是更新按钮（图像）不起作用。请帮忙

```
<?php
echo "</br>";
echo "<table border='1'>
<tr>
<th>Order ID</th>
<th>Customer Number</th>
<th>Order Items</th>
<th>Transaction Time</th>
<th>Amount</th>
</tr>";
$con = mysql_connect('localhost', 'root', '');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("kaka", $con);

$sql="SELECT * FROM orders WHERE status = 'NRDY'";
$result2 = mysql_query($sql);
while($row1 = mysql_fetch_array($result2))
  {
  echo "<div class=\"update\"><form method='post' action=\"test.php\">\n";  
  echo "<tr>";
  echo "<td><input type='hidden' name='order_id' value='".$row1['order_id']."'>" .$row1['order_id']. "</td>";
  echo "<td><input type='hidden' name='cust_num' value='".$row1['cust_num']."'>" .$row1['cust_num']. "</td>";
  echo "<td><input type='hidden' name='items' value='".$row1['items']."'>" .$row1['items']. "</td>";
  echo "<td><input type='hidden' name='order_time' value='".$row1['order_time']."'>" .$row1['order_time']. "</td>";
  echo "<td><input type='hidden' name='order_id' value='".$row1['amount']."'>" .$row1['amount']. "</td>";
  //echo "<td>" . $row1['order_id'] . "</td>";
  //echo "<td>" . $row1['cust_num'] . "</td>";
  //echo "<td>" . $row1['items'] . "</td>";
  //echo "<td>" . $row1['order_time'] . "</td>";
  //echo "<td>" . $row1['amount'] . "</td>";
  echo "<td>" . "<input type=\"image\" src=\"images/update.png\" alt=\"Update Row\" class=\"update\" title=\"Update Row\">\n" . "</td>";
  echo "</tr>";
  echo "</form></div>";  
  }

 echo "</table>";
?> 
```

这是test.php

```
<?php
echo $_POST['order_id'];
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:27:32.980

使用[验证器](http://validator.w3.org)。不允许在表格行周围包裹 div 或表单。一些浏览器通过移动 div/form 使其位于表格之外（将内容留在后面）从这个错误中恢复。因此，您的输入不在表单内，因此不应期望执行任何操作。

# java - 有没有办法通过命令行将 JVM 参数传递给 Maven？

> ID：12525288
> 
> 赞同：132
> 
> 时间：2012-09-21T06:25:51.710
> 
> 标签：java, maven, jetty

> **可能重复：**
> [Maven Jetty 插件 - 如何控制 VM 参数？](https://stackoverflow.com/questions/2007192/maven-jetty-plugin-how-to-control-vm-arguments)

特别是，我想做这样的事情：

```
mvn -DjvmArgs="-Xmx2000m -Xms1000m -XX:PermSize=512m -XX:MaxPermSize=512m" jetty:run -Pmyprofile 
```

哦，我想这样做而不必修改 pom 文件或设置任何环境变量..等

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-09-21T06:32:51.437

我认为`MAVEN_OPTS`最适合你。见这里：[http ://maven.apache.org/configure.html](http://maven.apache.org/configure.html)

在 Unix 中：

> 添加`MAVEN_OPTS`环境变量以指定 JVM 属性，例如`export MAVEN_OPTS="-Xms256m -Xmx512m"`. 此环境变量可用于为 Maven 提供额外的选项。

Win中需要通过对话框设置环境变量

> 通过打开系统属性 ( `WinKey + Pause`) 添加 ... 环境变量，... 在同一个对话框中，`MAVEN_OPTS`在用户变量中添加环境变量以指定 JVM 属性，例如值`-Xms256m -Xmx512m`。此环境变量可用于为 Maven 提供额外的选项。

# emacs - 如何在条件下加载 yasnippets

> ID：12525293
> 
> 赞同：3
> 
> 时间：2012-09-21T06:26:33.840
> 
> 标签：emacs, elisp, yasnippet

我正在做一些 Drupal 编程，并为常用功能创建了 yasnippets：db_select、db_delete 等。

我只想在处理 Drupal 文件而不是普通 php 文件时加载它们。任务是这样的：

给定 yasnippet 文件列表和当前打开文件的路径

```
if(path contains '/sites/all/modules')
{
    load all the snippets from the list
} 
```

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:30:50.567

你有两个选择：

1.  创建一个名为 drupal-mode 的新模式，它继承 php-mode 的所有内容，然后为该模式定义片段，请查看Emacs 手册中的[派生模式](http://www.gnu.org/software/emacs/manual/html_node/elisp/Derived-Modes.html)以了解如何执行此操作
2.  向 find-file 挂钩添加一个函数，检查当前缓冲区是否在特定目录中，然后加载所需的片段

无论哪种方式，您都将根据当前目录或文件名做事。

## `find-file-hook`例子

我还没有测试过这段代码，但这个概念就在那里。您可能必须检查该`yas/load-directory-1`函数是否有其他内容或弄乱参数。

```
(defun load-drupal-snippets ()
  (when (string-match-p "/sites/all/modules" (file-name-directory (buffer-file-name)))
    (yas--load-directory-1 "/path/to/drupal/snippets/" 'php-mode 'text-mode)))

(add-hook 'find-file-hook 'load-drupal-snippets) 
```

# c# - “覆盖”外部库类的 ToString 或 DEbuggerDisplay

> ID：12525297
> 
> 赞同：2
> 
> 时间：2012-09-21T06:26:47.730
> 
> 标签：c#, visual-studio-2010, tostring, debuggerdisplay

我正在开发 XNA 的东西并使用他们的矩阵结构。调试时，矩阵显示的值类似于：

![在此处输入图像描述](../Images/6f8b291c849e4d288cee2025e799d2ab.png)

这不是超级方便阅读。我想要类似的东西：

```
{ R:{ 0; 0; 0 } S:{ 1; 1; 1 } T:{ 0; 0; 0 } } 
```

由于这个结构不是我的，我不能覆盖`ToString`方法，也不能覆盖`DebuggerDisplay`属性。

这种功能有简单的技术吗？我认为这是一个常见的要求。也许与 VisualStudio 本身有关作为最后的手段？

精度：我不是在寻找操作（好奇的 Matrix.Decompose()），只是在调试模式下在 Visual Studio（或其他人）中“渲染”这种类型的变量。

# android - AlertDialog setOnDismissListener 不工作

> ID：12525304
> 
> 赞同：17
> 
> 时间：2012-09-21T06:27:53.127
> 
> 标签：android, android-alertdialog

我的活动打开一个对话框。当它关闭时，我需要`ReloadTable()`执行该功能。所以我正在尝试使用`setOnDismissListener`但它没有被触发。有人可以帮助我做错什么吗？

谢谢！

```
AlertDialog.Builder builder;
AlertDialog alertDialog;
Context mContext = getApplicationContext();
LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(LAYOUT_INFLATER_SERVICE);
View layout = inflater.inflate(R.layout.transaction, null);
builder = new AlertDialog.Builder(new ContextThemeWrapper(TransactionsList.this , R.style.dialogwithoutdim));
builder.setView(layout);
alertDialog = builder.create();
alertDialog.setOnDismissListener(new OnDismissListener() {
    public void onDismiss(final DialogInterface dialog) {
        ReloadTable();
    }
});

builder.show(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-22T13:15:17.340

```
public class MyActivity extends Activity implements DialogInterface.OnCancelListener{
    @Override
    public void onCreate(Bundle state) {
       .....
       alertDialog.setOnCancelListener(this);
       alertDialog.show();
    }
    @Override
    public void onCancel(DialogInterface dialog) {
        dialog.dismiss();
        .....
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-23T12:01:20.903

您必须将 OnCancelListener 设置为 AlertDialog.Builder：

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                this);
alertDialogBuilder.setOnCancelListener(new DialogInterface.OnCancelListener() {
            @Override
            public void onCancel(DialogInterface dialog) {
                dialogmenu = false;
            }
        }) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-22T22:23:32.073

好的...我自己想通了。

我必须实现`DialogInterface.OnCancelListener`并添加该`onCancel()`方法。有效！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-21T07:06:48.990

在这种情况下，您应该使用`alertDialog.setOnCancelListener(listener)`, 并`alertDialog.setOnDismissListener`与`dismissDialog(id)`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-08-08T05:28:19.847

**使用以下代码**

```
final AlertDialog.Builder builder = new AlertDialog.Builder(MyActivity.this);
                final View dailogView = LayoutInflater.from(MyActivity.this).inflate(R.layout.dialog_layout, null);
                builder.setView(dailogView);
                final AlertDialog dialog=builder.create();
                dialog.show(); 
```

**解雇监听器**

```
 dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {
                    @Override
                    public void onDismiss(DialogInterface dialogInterface) {
                   // your code after dissmiss dialog     
                    }
                }); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-11-17T17:20:24.500

我发现了真正的问题。

您应该在对话框中调用 .show，而不是在构建器中。

试试看 ：）

# c# - 禁用datagridview中的按钮列

> ID：12525305
> 
> 赞同：12
> 
> 时间：2012-09-21T06:28:00.577
> 
> 标签：c#, datagridview

我有一个 4 列的数据网格视图，前 2 列是组合框列，第三列是文本框列，第 4 列是按钮列。在表单加载中，我必须禁用数据网格的整个按钮列，之后我应该选择前三列和保存后将这前三列保存在数据库中，特定行中的按钮列应启用。前三列应通过单击按钮保存在数据库中。请帮助我，我从很多天开始就遇到了这个问题，这是我使用的代码

```
private void SATAddTemplate_Load(object sender, EventArgs e)
{
           foreach (DataGridViewRow row in datagrdADDTEMP.Rows)
           {

               DataGridViewButtonCell btn = (DataGridViewButtonCell)row.Cells[3];
               btn.ReadOnly = true;
           }
}
 private void btnSaveSettings_Click(object sender, EventArgs e)
     {
           foreach (DataGridViewRow row in datagrdADDTEMP.Rows)
           {

               DataGridViewButtonCell btn = (DataGridViewButtonCell)row.Cells[3];
               btn.ReadOnly = false;
           }
     } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T07:18:30.797

这里有一些关于设置`Enabled`出现在`DataGridViewButtonColumn`.

您需要扩展`DataGridViewButtonColumn`以使用可禁用按钮创建您自己的 DataGridView 列。 [MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/ms171619.aspx)详细介绍了如何执行此操作。

这篇文章有很多代码，我鼓励你仔细看看，但你真正需要做的就是将文章中的以下类复制并粘贴到你的项目中：
-- DataGridViewDisableButtonColumn
-- DataGridViewDisableButtonCell

完成此操作后，您将能够将`DataGridViewDisableButtonColumn`s 添加到 DataGridView。使用`Enabled`自定义列中公开的公共属性来设置`Enabled`每个单元格的 Button 控件的属性。由于您要设置`Enabled`列中所有按钮的属性，您可以编写一个帮助方法，循环遍历 DataGridView 中的所有行并设置`Enabled`属性：

```
private void SetDGVButtonColumnEnable(bool enabled) {
    foreach (DataGridViewRow row in dataGridView1.Rows) {
        // Set Enabled property of the fourth column in the DGV.
        ((DataGridViewDisableButtonCell)row.Cells[3]).Enabled = enabled;
    }
    dataGridView1.Refresh();
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-02-03T16:53:30.743

这是对杰伊答案的补充。

根据要求，这是我用来创建可以禁用的按钮单元的代码。它包括双缓冲，以便用户滚动时按钮不会闪烁。

```
/// <summary>
/// Adapted from https://msdn.microsoft.com/en-us/library/ms171619.aspx. Double-buffering was added to remove flicker on re-paints.
/// </summary>
public class DataGridViewDisableButtonCell : DataGridViewButtonCell
{
    private bool enabledValue;

    public bool Enabled
    {
        get { return enabledValue; }
        set
        {
            if (enabledValue == value) return;
            enabledValue = value;
            // force the cell to be re-painted
            if (DataGridView != null) DataGridView.InvalidateCell(this);
        }
    }

    // Override the Clone method so that the Enabled property is copied. 
    public override object Clone()
    {
        var cell = (DataGridViewDisableButtonCell) base.Clone();
        cell.Enabled = Enabled;
        return cell;
    }

    // By default, enable the button cell. 
    public DataGridViewDisableButtonCell()
    {
        enabledValue = true;
    }

    protected override void Paint(
        Graphics graphics,
        Rectangle clipBounds,
        Rectangle cellBounds,
        int rowIndex,
        DataGridViewElementStates elementState,
        object value,
        object formattedValue,
        string errorText,
        DataGridViewCellStyle cellStyle,
        DataGridViewAdvancedBorderStyle advancedBorderStyle,
        DataGridViewPaintParts paintParts)
    {
        // The button cell is disabled, so paint the border, background, and disabled button for the cell. 
        if (!enabledValue)
        {
            var currentContext = BufferedGraphicsManager.Current;

            using (var myBuffer = currentContext.Allocate(graphics, cellBounds))
            {
                // Draw the cell background, if specified. 
                if ((paintParts & DataGridViewPaintParts.Background) == DataGridViewPaintParts.Background)
                {
                    using (var cellBackground = new SolidBrush(cellStyle.BackColor))
                    {
                        myBuffer.Graphics.FillRectangle(cellBackground, cellBounds);
                    }
                }

                // Draw the cell borders, if specified. 
                if ((paintParts & DataGridViewPaintParts.Border) == DataGridViewPaintParts.Border)
                {
                    PaintBorder(myBuffer.Graphics, clipBounds, cellBounds, cellStyle, advancedBorderStyle);
                }

                // Calculate the area in which to draw the button.
                var buttonArea = cellBounds;
                var buttonAdjustment = BorderWidths(advancedBorderStyle);
                buttonArea.X += buttonAdjustment.X;
                buttonArea.Y += buttonAdjustment.Y;
                buttonArea.Height -= buttonAdjustment.Height;
                buttonArea.Width -= buttonAdjustment.Width;

                // Draw the disabled button.                
                ButtonRenderer.DrawButton(myBuffer.Graphics, buttonArea, PushButtonState.Disabled);

                // Draw the disabled button text.  
                var formattedValueString = FormattedValue as string;
                if (formattedValueString != null)
                {
                    TextRenderer.DrawText(myBuffer.Graphics, formattedValueString, DataGridView.Font, buttonArea, SystemColors.GrayText, TextFormatFlags.PreserveGraphicsTranslateTransform | TextFormatFlags.HorizontalCenter | TextFormatFlags.VerticalCenter);
                }

                myBuffer.Render();
            }
        }
        else
        {
            // The button cell is enabled, so let the base class handle the painting. 
            base.Paint(graphics, clipBounds, cellBounds, rowIndex, elementState, value, formattedValue, errorText, cellStyle, advancedBorderStyle, paintParts);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T07:17:16.613

您可以使用此 MSDN 文章[MSDN 文章：DataGridView 中的禁用按钮](http://msdn.microsoft.com/en-us/library/ms171619%28v=vs.90%29.aspx)它使用一个用于 datagridview 按钮的类，并注意，只要您愿意处理它，就必须检查按钮的启用状态

# android - 图像未使用 jQuery 和 PhoneGap 在 Android 中显示，但在 iPhone 中同样有效

> ID：12525306
> 
> 赞同：1
> 
> 时间：2012-09-21T06:28:02.243
> 
> 标签：android, jquery, image, cordova

我花了一整天的时间才弄清楚这个问题。我正在开发一个 webapp（使用 Phonegap + HTML + jQuery + CSS）。它由一个屏幕组成，显示用户签名。我使用了与 iPhone 相同的 .js 文件，并且签名图像显示没有任何问题，但相同的代码在 Android 上不起作用（我尝试使用 Android 2.2.1、2.3.3、3.0 和 4.0）但没有任何效果。以下是我的 .js 文件中的代码片段：

```
SignatureButtonThumbComponent.prototype.setInitialValue = function () {
       var date, value;
       value = this.record.valueForField(this.config.key);
       //value = window.btoa(this.record.valueForField(this.config.key)); // Not Working
       console.log("Signature Value :  " + value);
       console.log("Signature Date value : " + date);
       date = this.record.valueForField(this.config.key_date);
       if (value !== 'undefined') {
          this.el.append("<button class='captured_signature_button'><img src='" + value + "'/></button>");
        if (date) {
             return this.el.append("<div class='signature_date'>" + (Formatter.timeFormattedNicely(date)) + "</div>");
                    }
                } else {
                    return this.el.append("<button class='big blue arrow_button' id='get_patient_signature'><span>" + this.config.button_label + "</span><span class='icons arrow_right'></span></button>");
                }
            }; 
```

**编辑：**以下是我的 logcat 输出：

```
09-21 12:01:19.562: D/PhoneGapLog(1362): Signature Date value : undefined
09-21 12:01:19.672: D/PhoneGapLog(1362): Signature Value :  undefined 
```

在想了一点之后，现在我在 logcat 中得到的是这样的： `09-21 16:33:27.947: D/PhoneGapLog(948): file:///android_asset/www/new_mobile.js: Line 15790 : Signature Value : data:,`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:44:29.417

经过一整天的运行，我终于找到了解决方案。基本上 Android 不支持`canvas`HTML5，尽管它声称相同。每当我试图保存`canvas`对象的油漆时，我都会得到输出的`data:,`意义。`null`这是一个不错的 js，您可以使用它来覆盖`canvas.toDataURL()`. 这个 js 的唯一缺点是保存图形的速度相对较慢。但就我的情况而言，它非常适合，我将它集成到我的 jquery 中。你可以在这里找到这个 js：[http ://code.google.com/p/todataurl-png-js/](http://code.google.com/p/todataurl-png-js/)

# android - android - 当我在选项卡中使用 onActivityResult() 时不会调用它（zxing 扫描仪）

> ID：12525316
> 
> 赞同：2
> 
> 时间：2012-09-21T06:29:10.610
> 
> 标签：android, zxing, android-tabs

我使用**zxing 扫描仪**来扫描条形码和二维码，因为它是开源的。它工作正常，除了在选项卡中意味着我在选项卡组中使用了相同的代码，但在这里它不起作用。问题是 onActivityResult() 没有被调用。我们该如何解决这个问题。

```
code 
```

**子活动**

```
public class ScannScreenActivity extends Activity 
{  
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        View viewToLoad = LayoutInflater.from(this.getParent()).inflate(R.layout.scan, null);
        this.setContentView(viewToLoad);

         mShowCamBut.setOnClickListener(new OnClickListener() {   
                public void onClick(View v) 
                {
                     IntentIntegrator integrator = new IntentIntegrator(ScannScreenActivity.this);
                     integrator.initiateScan();                 
                }                                             
            });
    }

    public void onActivityResult(int requestCode, int resultCode, Intent intent) 
    {
          IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
          if (scanResult != null)
          {

              System.out.println("ScannScreenActivity FormatName:"+scanResult.getFormatName());
              System.out.println("ScannScreenActivity Content:"+scanResult.getContents());
          }       
    }
} 
```

**活动组**

```
public class TabGroupActivity extends ActivityGroup 
{
   //......
  ........Some code

  protected void onActivityResult(int requestCode, int resultCode, Intent data) 
  {

      if (resultCode == Activity.RESULT_OK) 
      {       
          ScannScreenActivity activity = (ScannScreenActivity) getLocalActivityManager().getCurrentActivity();
          activity.onActivityResult(requestCode, resultCode, data);
      }
  }
} 
```

**日志**

```
09-21 11:45:32.448: D/memalloc(10723): /dev/pmem: Unmapping buffer base:0x5239b000 size:8560640 offset:7024640
09-21 11:45:32.458: D/memalloc(10723): /dev/pmem: Unmapping buffer base:0x51f79000 size:4280320 offset:2744320
09-21 11:45:33.949: W/IInputConnectionWrapper(10723): showStatusIcon on inactive InputConnection
09-21 11:45:33.999: W/IInputConnectionWrapper(10723): InputConnection = android.view.inputmethod.BaseInputConnection@40dc2da0, active client = false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:53:55.747

`IntentIntegrator`zxing 项目提供了该类的几种“风格” 。您应该使用`IntentIntegrator`而不是编写自己的代码。而且，您需要使用正确的版本。尝试`IntentIntegratorV30`让您将结果发送到片​​段而不是主要活动。我相信这是你需要的本质，因为你真的在使用片段，对吧？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T06:35:44.560

```
ScannScreenActivity activity = (ScannScreenActivity) getLocalActivityManager().getCurrentActivity(); 
activity.setResult(resultCode, data); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T06:43:56.793

我试过扫描我这样使用的 QR-code.source。mudh2an 可以提供帮助。

```
private void startScanner() {

    try {
        Intent intent = new Intent(Class1.this, CaptureActivity.class);
        intent.setAction(Intents.Scan.ACTION);
        intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
        startActivityForResult(intent, 1);
    } catch (Exception e) {
        e.printStackTrace()
    }
}

@Override
public void onActivityResult(int p_requestCode, int p_resultCode, Intent p_data) {
    try {
        switch (p_requestCode) {
            case 1:
                if (p_resultCode == RESULT_OK) {
                   System.out.println(p_data.getStringExtra("SCAN_RESULT"));
                }
                break;

            default:
                System.out.println("Scan Failed")
                break;
        }
    } catch (Exception e) {
        E.handle(this, e);
    } catch (Error e){
        E.handle(this, e);
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T06:48:37.533

据我所知，每当您为结果启动活动时，它都会调用 onActivityResult() 例如：

```
startActivityForResult(intent,KEY); 
```

然后在 onActivityResult 中：

```
protected void onActivityResult(int requestCode,int resultCode,Intent data){    
    switch(requestCode){
    case KEY:
        if(resultCode==Activity.RESULT_OK)  
            *do whatever you want to *
        }
} 
```

# django - 加载 django 管理模板时遇到问题

> ID：12525319
> 
> 赞同：0
> 
> 时间：2012-09-21T06:29:14.777
> 
> 标签：django, django-templates, django-admin

我对 Django 很陌生，按照他们的教程，我在加载自定义管理模板时遇到了问题（具体来说，我在[https://docs.djangoproject.com/en/1.4/intro/tutorial02/](https://docs.djangoproject.com/en/1.4/intro/tutorial02/)的底部遇到了问题）。

我已经更新了我的`TEMPLATE_DIRS`，所以它看起来像：

```
TEMPLATE_DIRS = (
    '/Users/myname/Developer/Eclipse/templates/admin',
) 
```

我也试过：

```
TEMPLATE_DIRS = (
        '/Users/myname/Developer/Eclipse/templates/admin/base_site.html',
    ) 
```

我存储此自定义模板的路径如下：

“/Users/myname/Developer/Eclipse/templates/admin”（直接从文件信息复制粘贴）

有人可以指出我做错了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:36:12.090

```
PROJECT_ROOT = os.path.dirname(__file__)
TEMPLATE_DIRS = (os.path.join(PROJECT_ROOT, "templates"),) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:22:08.410

除非您不将`admin`文件夹用于所有模板，否则请使用此文件夹（我想您想覆盖 admin templae。因此`admin`文件夹应该是模板文件夹的子文件夹）：

```
TEMPLATE_DIRS = (
    '/Users/myname/Developer/Eclipse/templates/',
) 
```

# c# - 如何使用 wkHtmltoPdf 从 C# 中的静态 html 文件生成 PDf 文件

> ID：12525322
> 
> 赞同：0
> 
> 时间：2012-09-21T06:29:41.960
> 
> 标签：c#, wkhtmltopdf

谁能建议如何在 C# 控制台应用程序中使用 wkhtmltopdf 从静态 html 文件生成 PDF 文件？

wkhtmltopdf - [http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

我已尝试下载 ibwkhtmltox-0.11.0_rc1 Windows 静态库 (i368)，但无法将其 dll 包含到我的 c# 控制台应用程序中。

任何代码示例都会有所帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T04:55:27.763

查看这个项目[github.com/gmanny/Pechkin](http://github.com/gmanny/Pechkin)，它是 wkhtmlpdf 的包装器，但由于它不作为可执行文件运行，您应该更容易让它在共享主机上运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T13:11:06.003

我正在通过 Pechkin 的 C# 端口使用 WkHtmlToPdf 进行中间实现 - 到目前为止，我看到了一些很好的结果（除了使用 SSL 从站点调用动态生成的 PDF 时出现的一个相当奇怪的问题），但是对于更基本的实现来说，它很棒！使用 NuGet 将 Pechkin 加入您的项目，然后使用以下代码！

```
byte[] pdf = new Pechkin.Synchronized.SynchronizedPechkin(
new Pechkin.GlobalConfig()).Convert(
    new Pechkin.ObjectConfig()
   .SetLoadImages(true)
   .SetPrintBackground(true)
   .SetScreenMediaType(true)
   .SetCreateExternalLinks(true), html);

using (FileStream file = System.IO.File.Create(@"C:\TEMP\Output.pdf"))
{
    file.Write(pdf, 0, pdf.Length);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T21:00:48.887

如果可以的话，我会建议使用 exe - 我认为它更简单。

例如，查看[我的另一个答案中的 Derp 类，](https://stackoverflow.com/questions/10292689/wkhtmltopdf-outputstream-download-diaglog/11991670#11991670)了解如何从 C# 运行 wkhtmltopdf exe。或者试试下面**未经测试**的代码（你的真实代码会更复杂，这只是一个演示/POC）。只需将 google.com 替换为您想要的 HTML 页面 - 您也可以使用本地文件。

```
var pi = new ProcessStartInfo(@"c:\wkhtmltopdf\wkhtmltopdf.exe");
pi.CreateNoWindow = true;
pi.UseShellExecute = false;
pi.WorkingDirectory = @"c:\wkhtmltopdf\";
pi.Arguments = "http://www.google.com gogl.pdf";

using (var process = Process.Start(pi))
{
    process.WaitForExit(99999);
    Debug.WriteLine(process.ExitCode);
} 
```

[（从https://stackoverflow.com/a/11992062/694325](https://stackoverflow.com/a/11992062/694325)重复回答）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-03T07:36:31.353

这将帮助你............尝试一次。

```
 protected static byte[] Convert(string wkhtmlPath, string switches, string html, string wkhtmlExe)
    {       
        // generate PDF from given HTML string, not from URL
        if (!string.IsNullOrEmpty(html))
        {               
            html = SpecialCharsEncode(html);
        }

        var proc = new Process();

        var StartInfo = new ProcessStartInfo();

        proc.StartInfo.FileName = Path.Combine(wkhtmlPath, wkhtmlExe);
        proc.StartInfo.Arguments = switches;
        proc.StartInfo.UseShellExecute = false;
        proc.StartInfo.RedirectStandardOutput = true;
        proc.StartInfo.RedirectStandardError = true;
        proc.StartInfo.RedirectStandardInput = true;
        proc.StartInfo.WorkingDirectory = wkhtmlPath;

        proc.Start();

        // generate PDF from given HTML string, not from URL
        if (!string.IsNullOrEmpty(html))
        {
            using (var sIn = proc.StandardInput)
            {
                sIn.WriteLine(html);
            }
        }

        var ms = new MemoryStream();

        using (var sOut = proc.StandardOutput.BaseStream)
        {                              
            byte[] buffer = new byte[4096];
            int read;

            while ((read = sOut.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
        }

        string error = proc.StandardError.ReadToEnd();

        if (ms.Length == 0)
        {
            throw new Exception(error);
        }

        proc.WaitForExit();

        return ms.ToString(); 
    }

    /// <summary>
    /// Encode all special chars
    /// </summary>
    /// <param name="text">Html text</param>
    /// <returns>Html with special chars encoded</returns>
    private static string SpecialCharsEncode(string text)
    {
        var chars = text.ToCharArray();
        var result = new StringBuilder(text.Length + (int)(text.Length * 0.1));

        foreach (var c in chars)
        {
            var value = System.Convert.ToInt32(c);
            if (value > 127)
                result.AppendFormat("&#{0};", value);
            else
                result.Append(c);
        }

        return result.ToString();
    }

} 
```

这里我们返回内存流，我们还需要添加header，content type

```
 public override void ExecuteResult(ControllerContext context)
    {
       // this.FileName = context.RouteData.GetRequiredString("action");

        var fileContent =  Convert(wkhtmltopdfPath, switches, null, wkhtmlExe);

        var response = this.PrepareResponse(context.HttpContext.Response);

        response.OutputStream.Write(fileContent, 0, fileContent.Length);
    }

    protected HttpResponseBase PrepareResponse(HttpResponseBase response)
    {
        response.ContentType = this.GetContentType();
        this.FileName = "YourFile.pdf";
        if (!String.IsNullOrEmpty(this.FileName))
        response.AddHeader("Content-Disposition", string.Format("attachment; filename=\"{0}\"", SanitizeFileName(this.FileName)));
        response.AddHeader("Content-Type", this.GetContentType());

        return response;
    } 
```

# objective-c - 无法使用“类”作为 NSDictionary 中的键

> ID：12525324
> 
> 赞同：20
> 
> 时间：2012-09-21T06:29:46.767
> 
> 标签：objective-c, class, nsdictionary

我正在尝试使用一个类作为`NSDictionary`. 我查看了[这个问题](https://stackoverflow.com/questions/730076/using-class-as-key-in-nsdictionary)的答案，我所拥有的几乎相同；我正在使用`setObject: forKey:`. 但是，XCode 抱怨说`Incompatible pointer types sending 'Class' to parameter of type 'id<NSCopying>'`. 我的电话是：

```
[_bugTypeToSerializerDictionary setObject: bugToStringSerializer 
                                forKey: [bugToStringSerializer serializedObjectType]]; 
```

`bugToStringSerializer`是`BugToStringSerializer`其具体实现实现的一个实例`serializedObjectType`。具体实现的示例如下所示：

```
- (Class) serializedObjectType {
    return [InfectableBug class];
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-21T06:43:57.543

（似乎类*确实符合*，`NSCopying`但它们的类型不是`id <NSCopying>`。）**编辑：**类不符合协议。当然，最重要的是类响应`copy`and`copyWithZone:`消息（这就是为什么在这种情况下您可以放心地忽略警告）。他们的类型*仍然*不是`id <NSCopying>`。）这就是编译器抱怨的原因。

如果您真的不想要那个丑陋的警告，只需执行显式类型转换：

```
[dictionary setObject:object forKey:(id <NSCopying>)someClass]; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-21T06:38:30.527

啊哈，我刚刚修复了我项目中的错误。

用这个：

```
NSStringFromClass([Someclass class]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-01T12:09:44.843

其他答案当然很有帮助，但在这种情况下，只使用[NSMapTable](https://developer.apple.com/library/mac/documentation/cocoa/reference/NSMapTable_class/Reference/NSMapTable.html)可能更有意义，它不像 NSDictionary 那样复制键，只是用强指针保留它（默认情况下，尽管可以更改）。

然后，您可以直接使用您的原始代码而无需修改。

```
NSMapTable *_bugTypeToSerializerDictionary = [NSMapTable new];
...
[_bugTypeToSerializerDictionary setObject: bugToStringSerializer
                                   forKey: [bugToStringSerializer serializedObjectType]]; 
```

它不那么hacky，并且更清楚地传达了程序员的意图。

对于额外的样式点，您可以给实例变量一个更合适的名称，例如`_bugTypeToSerializerMap`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T10:44:37.520

这是我常用的代码：

```
@{
    (id)[MyClass1 class] : @1,
    (id)[MyClass2 class] : @2,
    (id)[MyClass3 class] : @3,
    (id)[MyClass4 class] : @4,
}; 
```

但最近我发现了这种方法：

```
@{
    MyClass1.self : @1,
    MyClass2.self : @2,
    MyClass3.self : @3,
    MyClass4.self : @4,
}; 
```

# python - JSON 对象中存在的日期分组

> ID：12525328
> 
> 赞同：0
> 
> 时间：2012-09-21T06:30:18.263
> 
> 标签：python, json

所以我有很多从 Facebook API 返回的 JSON 对象，其中之一如下所示。

```
{
  "_id": ObjectId("503ded9103c4b72fef12aa2f"),
  "from": {
    "category": "Company",
    "name": "Fortis Healthcare",
    "id": "165708715950"
  },
  "pid": "165708715950_377424172280794",
  "like_count": NumberInt(0),
  "can_remove": false,
  "created_time": "2012-04-02T09:58:48+0000",
  "message": "For academic info check out http:\/\/www.fortishospitals.com\/about-fortis-hospitals\/academic-initiatives.html",
  "id": "165708715950_377424172280794_4682416",
  "user_likes": false
} 
```

我需要在这里做的是，我需要将属于他们月份的所有日期分组，并从这些对象中提取“消息”参数。如何对这些月份的日期进行分组？

# django - 如何在 Django 中建模这种基于时间的关系？（图片链接）

> ID：12525337
> 
> 赞同：2
> 
> 时间：2012-09-21T06:30:50.177
> 
> 标签：django, database-design

我在找出与 Django 建立以下关系的最佳方法时遇到了问题。

我目前有一个站点模型作为其他所有内容的主要模型。站点由两个基本构建块组成：ModuleSlot 和模块。ModuleSlot 是可以附加模块（我将在稍后描述）的东西。

然后我有一个名为 ModuleBase 的模型，它是可以附加到站点模块槽的模块的基本模型。模块是一个独立的网站，它本身就是功能性的——它对外部世界一无所知。ModuleBase 模型旨在被继承以创建新模块——示例模块是 Poll 模块和 Content 模块。关键是，我希望将来能够定义新类型的模块，所以这就是我选择基类方法的原因。下面的图片可能更好地描述了我刚刚写的内容。

![http://i.stack.imgur.com/Y1nUw.png](../Images/d2215fb9d30eaaa1db8119fd0d198423.png)

现在，我想把时间带入这个方案——ModuleSlot 的内容应该是及时的，这意味着模块和附加的投票/内容/等。应该能够在相同的、预定义的时间进行更改。例如，假设 ModuleSlot 当前绑定到 Content 模块。我希望 ModuleSlot 更改为指向 Poll 模块并显示一个特定的 Poll。这一切都应该在特定时间自动发生。

我该如何呈现这种关系？我一直在给这个，这就是我到目前为止所拥有的：我认为我应该创建某种 GenericContent 模型，然后由模块定义的各个内容类型继承，例如。PollModule 的 Poll 将从 GenericContent 继承，ContentModule 的 Content 也会这样做。我还应该为 ModuleSlot 介绍 TimeSpan。然后，在后端，我可以每分钟检查一个 ModuleSlot 是否需要更新，如果模块和附加内容应该更改，则进行更新。你们有什么感想？下面的凌乱图片（可能）描述了所描述的关系。

我不确定继承是否是正确的方法（GenericContent）。我也可以只存储 Poll/Content/etc 的 id。在 ModuleSlot 中，因为我所有的 id 都是相同的类型 - 因为我知道附加到 ModuleSlot 的模块，所以我可以向模块询问给定 id 的内容。

![http://i.stack.imgur.com/lFE1h.png](../Images/345d3f7da23caecf7fbab216e11fd729.png)

# android - LayoutInflater 每次都加载 xml 吗？

> ID：12525345
> 
> 赞同：4
> 
> 时间：2012-09-21T06:31:44.593
> 
> 标签：android, android-layout, android-inflate, performance

每次我们使用它加载视图时，LayoutInflater 是否都会加载 xml 布局资源？

```
View view = LayoutInflater.from(context).inflate(R.layout.resource, null); 
```

例如，如果我想创建 100 个具有相同布局 id 的视图，它会解析 100 次相同的 XML 文件还是有一些 android 框架的缓存系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:51:40.183

我猜是的，它加载了 100 次..因为每次执行相同的语句时..这就是为什么我们有不同的`adapter`并使用它们`getView`我们只创建/膨胀视图一次，然后在复制粘贴具有不同值的相同对象之后..我们让`viewholder`
你也应该这样做.. getView 方法中的[if..else](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

* * *

我正要发表评论，但由于它被复制的时间越来越长，如果我有任何相关信息，我稍后会尝试添加更多代码和解释

# nosql - Neo4j 的 Cypher 查询语言是开源的吗？

> ID：12525352
> 
> 赞同：2
> 
> 时间：2012-09-21T06:32:14.340
> 
> 标签：nosql, neo4j, cypher

Neo4j 的语言 Cypher 的状态如何？我真的很喜欢它，但我想避免 Neo4j 锁定。是否有像 Grmelin 中那样的其他 Cypher 界面？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T22:16:18.217

Cypher 完全是 OSS，请参阅[https://github.com/neo4j/community/tree/master/cypher](https://github.com/neo4j/community/tree/master/cypher)。现在有一个实现，但可能会有更多。现在让它成为标准还为时过早，我们仍在大量试验它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-15T14:25:20.890

查看[Pixy](https://github.com/lambdazen/pixy/wiki)，这是一种适用于任何与蓝图兼容的图形数据库的声明性图形查询语言。它建立在 Tinkerpop 软件堆栈的 Gremlin/Pipes 之上。

Pixy 通过将 PROLOG 样式的规则和目标转换为表示图遍历操作的 Gremlin 管道，在图数据库上实现复杂的模式匹配和逻辑编程。除了避免供应商锁定之外，它比Cypher有[一些额外的优势。](https://github.com/lambdazen/pixy/wiki/Advantages-over-Cypher)

Pixy 在 Apache 2.0 许可下可用。

# perl - 如何修改文件夹名称

> ID：12525353
> 
> 赞同：0
> 
> 时间：2012-09-21T06:32:16.263
> 
> 标签：perl

我的本地硬盘中有一堆文件夹。以下是文件夹名称：

```
3 ABC
abc movie (2002)  HDTVRip  576p  Hindi  Eng  BHATTI87
Bcd [2011].720p.BRRip.x264.[Dual Audio] [Hindi+English].by K@rtik [ExD Exclusive]
def (2007)
Gaf-DVDRip-AVI
Gadks Of Wc (2012) - DVDRip - 1CD - XviD - Subs - [xDM]
Kah - DVDScr - XviD - 1CDRip - [DDR]
kaslf.kasl .Ljasj [2007] - x264 - AAC - 1 CD DVDRip - ESubs - MDG 
```

我希望所有名称都有一些相似性，例如每个字符串之间应该有一个空格，即“Gadks Of Wc (2012) - DVDRip - 1CD - XviD - Subs - [xDM]”应该是
Gadks Of Wc (2012) DVDRip 1CD XviD Subs [xDM]。

我的逻辑是：

1.  读取每个文件夹名称
2.  将所有文件夹名称存储在列表中
3.  对每个名称进行拆分和加入等操作

下面是我的脚本：

```
#!/usr/bin/perl -w
use strict;

my $dir_name = "E:/movie";

opendir READ, $dir_name
    or die"Can not found it $!";

my @name = readdir(READ);
my (@split_name, $update_movie_name, $fix_movie_name);

foreach my $name (@name) {

   @split_name        = split /[\s+\/.\-]/,$name;
   $update_movie_name = movie_fun(@split_name); 
}

sub movie_fun {

    foreach my $movie (@split_name) {

        $fix_movie_name = join("",$movie);
    }

    return ($fix_movie_name);
} 
```

使用此脚本，我只能获得文件夹名称的最后一部分。我不知道我在哪里做错了。请帮我解决这个问题。这样我就可以进行下一步，即从名称中删除垃圾部分，即“（2012）-DVDRip-1CD-XviD-Subs-[xDM]”，（2007）等

如果任何机构可以给我任何其他方式来解决这个问题，那么也可以。

谢谢

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:58:27.497

```
#!/usr/bin/perl -w
use strict;

my $dir_name = "/movie";
opendir READ, $dir_name
    or die"Can not found it $!";

my @name = readdir(READ);

FOLDER:
foreach my $name (@name) {

    # process only directories (skip if folder name . or ..)
    next FOLDER if ( (not -d $dir_name.$name) || ($name =~ m{^\.+$}) );

    my @split_name  = split /[\s+\/.\-]/, $name;
    my $update_name = movie_fun(@split_name);

    printf "%s -> %s\n", $name, $update_name;
}

sub movie_fun {
    my @split_name = @_;

    return join '', @split_name;
} 
```

**输出**

```
3 ABC ->
3ABC

abc movie (2002)  HDTVRip  576p  Hindi  Eng  BHATTI87 ->
abcmovie(2002)HDTVRip576pHindiEngBHATTI87

Bcd [2011].720p.BRRip.x264.[Dual Audio] [Hindi+English].by K@rtik [ExD Exclusive] ->
Bcd[2011]720pBRRipx264[DualAudio][HindiEnglish]byK@rtik[ExDExclusive]

def (2007) -> 
def(2007)

Gaf-DVDRip-AVI ->
GafDVDRipAVI

Gadks Of Wc (2012) - DVDRip - 1CD - XviD - Subs - [xDM] ->
GadksOfWc(2012)DVDRip1CDXviDSubs[xDM]

Kah - DVDScr - XviD - 1CDRip - [DDR] ->
KahDVDScrXviD1CDRip[DDR]

kaslf.kasl .Ljasj [2007] - x264 - AAC - 1 CD DVDRip - ESubs - MDG ->
kaslfkaslLjasj[2007]x264AAC1CDDVDRipESubsMDG 
```

# visual-studio-2012 - VS2012：属性页未打开：对象引用未设置为对象的实例

> ID：12525354
> 
> 赞同：21
> 
> 时间：2012-09-21T06:32:19.133
> 
> 标签：visual-studio-2012, projects-and-solutions, nullreferenceexception

我使用的是 Visual Studio Premium 2012，版本 11.0.50727.1 RTMREL，Windows 7 Enterprise (SP1)。

当我右键单击解决方案并单击属性时，我得到一个显示空引用异常的弹出窗口（对象引用未设置为对象的实例）。

当我在 2010 年尝试相同时，它工作正常，打开了正常的解决方案属性页面，允许我设置启动顺序等。

此外，在 2012 年，View -> Property Pages 给出了相同的结果。

请告知如何解决这个问题，这是一个已知的错误吗？

**更新1：**尝试运行`devenv /resetsettings`以及`devenv /safemode`但问题仍然存在。还尝试了一个新的解决方案，问题仍然存在。

**更新2：**似乎禁用任何扩展，然后再试一次，解决了这个问题。重新启用扩展不会带来错误。

**更新 3：**如果您仍然遇到此问题，请在此处投票：[https ://connect.microsoft.com/VisualStudio/feedback/details/763961/cannot-open-property-pages-for-solution](https://connect.microsoft.com/VisualStudio/feedback/details/763961/cannot-open-property-pages-for-solution)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T13:30:43.563

这也发生在我身上。如果您安装了 ReSharper，请尝试禁用它（工具 -> 选项 -> ReSharper -> 常规 -> 暂停并重新启动 VS2012。如果您没有安装 ReSharper，恐怕我不知道。

在这里看到一些评论并亲自遇到后，似乎禁用 Re-Sharper 并不总能解决问题。但是，如果您禁用、重新启动、重新启用“其他”附加组件，问题最终会暂时消失。下次视觉工作室打开时，您可能会在同一个地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-26T06:10:52.930

就我而言，问题是特定于解决方案的。NuGet 导致此错误，但不是扩展本身，而是在 VS 加载时生成错误的 NuGet 包。当我打开 NuGet 包管理器控制台时，我看到一个带有错误描述的大红色文本。在我的例子中，它是 T4Scaffolding.Core 包，它又是 MVCMailer 的依赖项。

如果是这种情况，您可能会在 PM 控制台中看到哪个包生成错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T08:33:26.560

我在我的一个解决方案中遇到了这个问题，而其他人则没有。直到我添加了某个项目，导致问题的解决方案才这样做；之后，我无法再查看解决方案的属性或设置启动项目。

从解决方案中删除项目并没有解决它，“重置”的唯一方法是创建一个新的解决方案文件并将所有项目一一添加到其中。这使它再次工作，直到我重新添加了有问题的项目。

今天通过更新 NuGet 包管理器为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-06T01:48:10.817

这是我对这个问题的经验：（以管理员身份运行 VS2012，希望能整理出一些设置）。

我有两个 MVC 项目和其他项目的解决方案。如果我在不重启VS的情况下卸载了两个MVC项目，问题依然存在。重新启动VS后，两个项目没有加载，但显示在解决方案资源管理器中，问题消失了。重新加载两个项目，解决方案属性仍然有效，但重新启动后循环重新启动。

注意：没有加载两个 MVC 项目时，项目和解决方案文件没有区别。

# visual-studio-2012 - Visual Studio 2012 相同的标记突出显示

> ID：12525358
> 
> 赞同：1
> 
> 时间：2012-09-21T06:32:37.787
> 
> 标签：visual-studio-2012

与[Visual Studio 相同的标记突出显示](https://stackoverflow.com/questions/32494/visual-studio-identical-token-highlighting)连接，但 VS2012 需要此功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:08:05.147

对于 C#：工具 => 选项 => 环境 => 字体和颜色 => 突出显示参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T13:23:18.163

现在它可以在 VS 2013 中使用 Productivity Power Tools 2013

# c# - MVC - 添加 . 在资源文件中的字符串末尾使其不可见

> ID：12525361
> 
> 赞同：0
> 
> 时间：2012-09-21T06:33:08.693
> 
> 标签：c#, asp.net-mvc

在我的 MVC 应用程序中，我在我的字符串中放入了`CommonResourceFile`一个字符串

```
* indicates mandatory fields. 
```

我注意到这里有一件奇怪的事情。该字符串在视图中不可见。从末端移开`.`后，它变得可见。为什么这样？

**更新**

这是相关的视图代码：

```
<span>*</span> <%:Html.Label(CommonResource.MandatoryFields)%></div> 
```

**CommonResource.MandatoryFields**表示**必填字段。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:29:10.297

您的问题与资源文件无关。

您在滥用[Html.Label](http://msdn.microsoft.com/en-us/library/ee310185%28v=vs.98%29.aspx)帮助程序，因为它的参数**是属性表达式**，而不是您要显示的文本。

这就是为什么当您`.`的资源中有一个点时它会混淆，因为它会尝试将输入字符串解释为属性表达式（因此它会在点上分割等）。

所以不要使用`Html.Label`来显示任意文本而不是手动写出标签标签（或创建自己的助手）

```
<label><%: CommonResource.MandatoryFields ></label> 
```

# javascript - 预先创建所有主视图

> ID：12525364
> 
> 赞同：0
> 
> 时间：2012-09-21T06:33:35.343
> 
> 标签：javascript, mobile, sencha-touch, sencha-touch-2

我们的应用程序大约有 30 页。在应用程序启动时创建没有数据的所有视图页面是否有意义？或者在必要时更好地创建页面。移动设备界面的性能和响应能力如何？是的，创建 30 个包含完整内容的页面看起来很疯狂，但我们不能创建整个页面，而只能创建页面的基本结构（页面内容的容器）。当页面显示时，然后填充它的内容。也许它会更顺畅地在页面之间进行转换

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T18:31:35.727

不，不要这样做！

实际上，您应该尝试最小化移动（尤其是）浏览器必须处理的 DOM，并且用 30 页填充 DOM 很可能是它处理的噩梦（当然取决于每个页面的复杂性）。

我不太确定这句话是什么意思：

> 在第一个选项中，视图（列表，数据视图）可以与存储连接，并且会在存储加载时自动更新。

你能详细说明一下吗？

# tsung - 超出阶段持续时间，但并非所有用户都已启动

> ID：12525366
> 
> 赞同：0
> 
> 时间：2012-09-21T06:34:03.170
> 
> 标签：tsung

我已经用 tsung 测试了套接字。

tsung.xml：

```
<?xml version="1.0"?>
<!DOCTYPE tsung SYSTEM "/usr/local/share/tsung/tsung-1.0.dtd">
<tsung loglevel="notice" version="1.0">

  <!-- Client side setup -->
  <clients>
    <client host="localhost" use_controller_vm="true" maxusers="10000"/>
  </clients>

  <!-- Server side setup -->
<servers>
  <server host="127.0.0.1" port="5678" type="tcp"/>
</servers>

  <!-- to start os monitoring (cpu, network, memory). Use an erlang
  agent on the remote machine or SNMP. erlang is the default -->
  <!-- <monitoring>
    <monitor host="localhost"></monitor>
  </monitoring> -->

  <!-- <load duration="1" unit="minute" loop="3"> -->
  <load loop="3">
  <arrivalphase phase="1" duration="1" unit="minute">
    <!-- <users interarrival="0.001" unit="second"></users> -->
    <users arrivalrate="200" unit="second" />
  </arrivalphase>
 </load>
<!--
  <options>
   <option type="ts_http" name="user_agent">
    <user_agent probability="80">Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050513 Galeon/1.3.21</user_agent>
    <user_agent probability="20">Mozilla/5.0 (Windows; U; Windows NT 5.2; fr-FR; rv:1.7.8) Gecko/20050511 Firefox/1.0.4</user_agent>
   </option>
  </options>
 -->
  <!-- start a session for a http user. the probability is the
  frequency of this type os session. The sum of all session's
  probabilities must be 100 -->

 <sessions>
  <session probability="100" name="socket-example" type="ts_socket">
    <request>
      <socket></socket>
    </request>
  </session>
 </sessions>
</tsung> 
```

几乎在每个阶段，我都收到了报告：`Phase duration exceeded, but not all users were launched`，就像以下内容一样：

```
=INFO REPORT==== 21-Sep-2012::14:28:44 ===
    ts_config_server:(5:<0.50.0>) All remote beams started, sync 

=INFO REPORT==== 21-Sep-2012::14:28:44 ===
    ts_config_server:(5:<0.50.0>) New arrival phase 1 for client "localhost" (last ? true): will start 6000 users

=INFO REPORT==== 21-Sep-2012::14:28:44 ===
    ts_config_server:(5:<0.50.0>) New arrival phase 2 for client "localhost" (last ? true): will start 6000 users

=INFO REPORT==== 21-Sep-2012::14:28:44 ===
    ts_config_server:(5:<0.50.0>) New arrival phase 3 for client "localhost" (last ? true): will start 6000 users

=INFO REPORT==== 21-Sep-2012::14:28:44 ===
    ts_config_server:(5:<0.50.0>) New arrival phase 4 for client "localhost" (last ? true): will start 6000 users

=INFO REPORT==== 21-Sep-2012::14:28:44 ===
         ts_launcher:(5:<0.84.0>) Expected duration of first phase: 60.0 sec (6000 users) 

=INFO REPORT==== 21-Sep-2012::14:28:44 ===
         ts_launcher:(5:<0.84.0>) Activate launcher (6000 users) in 10019 msec 

=INFO REPORT==== 21-Sep-2012::14:29:54 ===
         ts_launcher:(5:<0.84.0>) Phase duration exceeded, but not all users were launched (440 users, 7.3% of phase) 
```

有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:47:41.543

您确定那是与该日志关联的 tsung.xml 吗？看起来您只指定了 1 个阶段，而日志显示 4 ......或者该循环是否同样地回收了第一个阶段，再循环 3 次？

不知道你对 Tsung 有多熟悉，我几周前才开始使用它，我发现它不是开玩笑的。非常强大。我不得不重新调整它，因为它可以非常邪恶地扩展、分配和强制增加负载。

看起来你已经把它设置得有点粗壮了。已经很晚了，我的数学从来都不是很好，但看起来你在一分钟内每秒都在爆破 200,000 个 http get。继续乘以 200,000 x 3 以获得每秒的最小数据包。那是你的意图吗？

我所做的就是将其一直降低到 1 个用户每秒 1 次到达 1 分钟，看看它是否会自行停止并感受它的加载能力

# red5 - Red5 1.0.0 rc2 flv 播放不工作

> ID：12525368
> 
> 赞同：0
> 
> 时间：2012-09-21T06:34:11.783
> 
> 标签：red5

我已经在 red5 服务器上很好地发布了我的记录文件，但它甚至在播放流期间挂起

默认流。

它只显示元信息但不播放任何东西

版本是 red5 1.0.0 rc2

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:48:40.440

抱歉，从这条信息片段来看，不太可能有人能回答这个问题。您可以简单地使用这些演示应用程序并修改它们以满足您的需要或准备示例代码和输出。

# sql - SQL Server SUM 问题

> ID：12525371
> 
> 赞同：1
> 
> 时间：2012-09-21T06:34:32.017
> 
> 标签：sql, sql-server, tsql

我正在尝试遍历一个表并获取`mins`列的总和，但是它总是告诉我这`mins`不是有效的列名

```
SELECT 
    acs.cid, 
    DATEDIFF (n, acs.StartTime, acs.EndTime ) as prepromomins,
    CASE 
        WHEN (p.multiplier is null) THEN DATEDIFF (n , acs.StartTime, acs.EndTime)
        ELSE (DATEDIFF ( n , acs.StartTime , acs.EndTime ) * p.multiplier) 
    END AS mins 
FROM 
    activecards as acs
    LEFT JOIN Promotions as p 
    ON acs.StartTime > p.StartTime and acs.EndTime < p.EndTime 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:58:54.463

试试这个：

```
SELECT SUM(DATEDIFF(n, acs.StartTime, acs.EndTime) * ISNULL(p.multiplier,1)) AS TotalMins
FROM activecards as acs
LEFT JOIN Promotions as p 
ON acs.StartTime > p.StartTime and acs.EndTime < p.EndTime 
```

# xslt - XSLT 如何忽略 {} 字符

> ID：12525374
> 
> 赞同：1
> 
> 时间：2012-09-21T06:34:40.130
> 
> 标签：xslt

我正在创建一个 xsl 文件。我想打印下面的代码作为输出

```
<li class="td-nav-flyout {position:'containerleft'}"> 
```

但是当我运行代码时 java 说“无法编译样式表”。

请帮忙。

提前致谢。

-Ritesh

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:35:52.943

使用以下内容：

```
<li class="td-nav-flyout {{position:'containerleft'}}"> 
```

通常，属性文本内的花括号允许您计算 XPath 表达式。有关完整信息，请参阅规范中的[属性值模板。](http://www.w3.org/TR/xslt#attribute-value-templates)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T06:37:27.910

xsl:attribute 元素呢？

```
<li>
   <xsl:attribute name="class">td-nav-flyout {position:'containerleft'}</xsl:attribute>
</li> 
```

# html - 如何在 IE 中的 HTML 选择下拉列表中设置字体系列？

> ID：12525375
> 
> 赞同：6
> 
> 时间：2012-09-21T06:34:52.640
> 
> 标签：html, css, internet-explorer, drop-down-menu, html-select

> **可能重复：**
> [更改 css font-family 以在选择标记中的单独选项](https://stackoverflow.com/questions/4672960/change-css-font-family-for-separate-options-in-select-tag)
> [Internet Explorer 中以粗体显示的样式选项](https://stackoverflow.com/questions/6655625/styling-options-in-bold-in-internet-explorer)

我无法在 IE8,9 中设置 HTML 选择下拉列表的字体系列。**它是错误/属性还是我做错了什么？**字体大小设置有效。这个例子太极端了，我真正的问题是我在页面和列表中有不同的字体。
我不关心IE7-。

**示例（[http://jsfiddle.net/SDcLX/11/](http://jsfiddle.net/SDcLX/11/)）：**

我有以下 HTML：

```
aaaaa
<div class="container">
skjhlks <select>
    <option class="courier">courier</option>
    <option>aa</option>
    <option style="font-family:impact;" selected="selected"  >bb</option>
</select>
</div> 
```

和 CSS

```
.container
  {
    font-size:30px;
    font-family:Lucida Handwriting;
   }
select
{
    font-family:inherit;
    font-size:inherit;
}

option.courier
 {
    font-family:courier;
 } 
```

FF 中的结果是：

![在此处输入图像描述](../Images/75b8a29e951eaf0b102117b2caf47a16.png)

在 IE 中：

![在此处输入图像描述](../Images/ce0abd97ad413c322a474286b09673f2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:10:00.360

该问题也是[Internet Explorer 中粗体样式选项的副本](https://stackoverflow.com/questions/6655625/styling-options-in-bold-in-internet-explorer)

显然 IE 使用操作系统来呈现控件。

也许你可以使用一个 js 小部件来代替[这个](http://lindekleiv.bitbucket.org/fontselector/#)小部件 ，它需要一个基本的选择，但用 jquery 对其进行转换。

# javascript - 用JS获取某种类型的父HTML元素

> ID：12525379
> 
> 赞同：1
> 
> 时间：2012-09-21T06:35:22.500
> 
> 标签：javascript, html

我的代码看起来像这样，特写：

```
<h2>
<span class="stuff">[<a id="someid">stuff</a>]</span> <span class="moreStuff">Another test</span>
</h2> 
```

我找到了一种方法来选择我的`a`元素，并为其附加一个 id。我现在需要做的是选择它的父`<h2>`元素，而不是`<span>`元素。我该怎么做（允许使用 JQuery）？

编辑：当我检索选定`<a>`的 s 时，我得到一个数组（我的页面上有很多这些结构）。当我尝试编写`myArray[someIndex].closest("h2")`时，它说该元素没有`closest()`方法。我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T06:37:04.477

一种方法是使用[`.parents()`](http://api.jquery.com/parents/)带有选择器的jQuery 方法。像这样的东西。

```
$("#someid").parents("h2"); 
```

**更新：**

您可以将该[`.closest()`](http://api.jquery.com/closest/)方法与选择器一起使用，以仅获取与选择器匹配的最接近的父级。

```
$("#someid").closest("h2"); 
```

**更新 2：**

使用纯 JavaScript 会做更多的工作。不确定它是否是最有效的，但一种方法是选择元素，然后通过属性`document.getElementById()`获取对其父级的引用。`parentNode`然后您必须检查它是否是一个`h2`元素，如果不是，则查看该元素的父节点，依此类推。

您可以检查 jQuery 源代码，看看他们是如何实现最接近的方法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:42:41.387

`<h2>`不是的父级，但`<a>`它是一个祖先，用于[`.closest()`](http://api.jquery.com/closest/)选择它

```
$("#someid").closest("h2"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T06:55:09.057

尝试使用[.parent()](http://api.jquery.com/parent/)将 DOM 树完全提升一倍或更高级别。

```
$("#someid").parent().parent(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-17T09:03:37.713

我只是需要同样的东西。这里有一个香草 javascript 变体：

```
function findParent(startElement, tagName) {
  let currentElm = startElement;
  while (currentElm != document.body) {
    if (currentElm.tagName.toLowerCase() == tagName.toLowerCase()) { return currentElm; }
    currentElm = currentElm.parentElement;
  }
  return false;
} 
```

# mysql - My-sql 查询中的 DECLARE 错误

> ID：12525383
> 
> 赞同：-1
> 
> 时间：2012-09-21T06:35:28.240
> 
> 标签：mysql, phpmyadmin

我有查询。我想在 phpmyadmin 上运行。

但是每当我运行时，我都会在声明时出错。我无法找出这是什么错误？

我想将这段代码作为来自 PHP 的查询运行吗？

```
-- Declare a cursor to hold the section information for a specified product
DECLARE section_cursor CURSOR FOR
SELECT DISTINCT cds_especee.sectid, cds_evocee.text, min
(displayorder) displayorder
FROM cds_especee
JOIN cds_evocee ON (cds_especee.sectid = cds_evocee.id)
-- Replace the prodid below with a valid prodid from your data set
WHERE cds_especee.prodid = 'S1522339'
GROUP BY cds_especee.sectid, cds_evocee.text
ORDER BY displayorder ASC
OPEN section_cursor
-- Fetching the first section into variable
FETCH NEXT FROM section_cursor
INTO @section, @sectionname, @order
WHILE @@FETCH_STATUS = 0
BEGIN
-- Print current section to the screen
PRINT '******'+@sectionname+'******'
-- Declare a cursor to hold the header and body information for the
specified product
-- Note that the WHERE statement limits the results to the headers and body falling under the current section
DECLARE espec_cursor CURSOR FOR
SELECT evoc1.text, evoc2.text, displayorder
FROM cds_especee
JOIN cds_evocee evoc1 ON (cds_especee.hdrid = evoc1.id)
JOIN cds_evocee evoc2 ON (cds_especee.bodyid = evoc2.id)
-- Replace the prodid below with a valid prodid from your data set
WHERE cds_especee.prodid = 'S1522339' AND
cds_especee.sectid = @section
ORDER BY displayorder ASC
OPEN espec_cursor
-- Fetching the first header and body into variable
FETCH NEXT FROM espec_cursor
INTO @hdr, @body, @order1
WHILE @@FETCH_STATUS = 0
-- Below is a loop that prints all the headers and bodies for the
current section
BEGIN
PRINT @hdr +': '+@body
FETCH NEXT FROM espec_cursor
INTO @hdr, @body, @order1
END
-- Clear out the espec_cursor as it will be repopulated with data for
the next section as the procedure loops
CLOSE espec_cursor
DEALLOCATE espec_cursor
-- Fetches the next section and returns to the top of the loop
FETCH NEXT FROM section_cursor
INTO @section, @sectionname, @order
PRINT ' '
PRINT ' '
END
-- Clear out the section_cursor as the procedure is over
CLOSE section_cursor
DEALLOCATE section_cursor 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:48:02.977

也许是关于 mysql 分隔符的东西。尝试像这样运行它：

```
DELIMITER $$
-- Declare a cursor to hold the section information for a specified product 
DECLARE section_cursor CURSOR FOR 
SELECT DISTINCT cds_especee.sectid, cds_evocee.text, min 
(displayorder) displayorder 
FROM cds_especee 
JOIN cds_evocee ON (cds_especee.sectid = cds_evocee.id) 
-- Replace the prodid below with a valid prodid from your data set 
WHERE cds_especee.prodid = 'S1522339' 
GROUP BY cds_especee.sectid, cds_evocee.text 
ORDER BY displayorder ASC 
OPEN section_cursor 
-- Fetching the first section into variable 
FETCH NEXT FROM section_cursor 
INTO @section, @sectionname, @order 
WHILE @@FETCH_STATUS = 0 
BEGIN 
-- Print current section to the screen 
PRINT '******'+@sectionname+'******' 
-- Declare a cursor to hold the header and body information for the 
specified product 
-- Note that the WHERE statement limits the results to the headers and body falling under the current section 
DECLARE espec_cursor CURSOR FOR 
SELECT evoc1.text, evoc2.text, displayorder 
FROM cds_especee 
JOIN cds_evocee evoc1 ON (cds_especee.hdrid = evoc1.id) 
JOIN cds_evocee evoc2 ON (cds_especee.bodyid = evoc2.id) 
-- Replace the prodid below with a valid prodid from your data set 
WHERE cds_especee.prodid = 'S1522339' AND 
cds_especee.sectid = @section 
ORDER BY displayorder ASC 
OPEN espec_cursor 
-- Fetching the first header and body into variable 
FETCH NEXT FROM espec_cursor 
INTO @hdr, @body, @order1 
WHILE @@FETCH_STATUS = 0 
-- Below is a loop that prints all the headers and bodies for the 
current section 
BEGIN 
PRINT @hdr +': '+@body 
FETCH NEXT FROM espec_cursor 
INTO @hdr, @body, @order1 
END 
-- Clear out the espec_cursor as it will be repopulated with data for 
the next section as the procedure loops 
CLOSE espec_cursor 
DEALLOCATE espec_cursor 
-- Fetches the next section and returns to the top of the loop 
FETCH NEXT FROM section_cursor 
INTO @section, @sectionname, @order 
PRINT ' ' 
PRINT ' ' 
END 
-- Clear out the section_cursor as the procedure is over 
CLOSE section_cursor 
DEALLOCATE section_cursor$$ 
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:11:41.140

您不能在简单的 MySQL 脚本中使用许多语句，包括 DECLARE、OPEN、FETCH、CLOSE。您应该为此目的创建一个源对象。例如，您可以使用存储过程来做到这一点。文档中有一个很好的例子 - [Cursors](http://dev.mysql.com/doc/refman/5.1/en/cursors.html)。

PRINT 也不是 MySQL 语句。

# java - 将 isElementPresent() 从 Selenium 1 迁移到 Selenium 2 时如何避免超时？

> ID：12525386
> 
> 赞同：2
> 
> 时间：2012-09-21T06:35:37.880
> 
> 标签：java, selenium, migration, webdriver, integration-testing

我正在尝试将 Java 代码从 Selenium 1 (RC) 迁移到 Selenium 2 (WebDriver)，看起来像这样：

```
1:  selenium.click(someButton);
2:  selenium.waitForPageToLoad();
3:  if (!selenium.isElementPresent(errorMessageElement)) {
4:     Assert.fail("Test failed! No error msg should be displayed on page.");
5:  } 
```

关键部分是第 3 行，我尝试根据[Rostislav Matl](http://rostislav-matl.blogspot.ch/2011/03/moving-to-selenium-2-on-webdriver-part.html)的建议将其转换为 Selenium 2 ：

```
3:  if (!driver.findElements(By.xpath(errorMessageElement)).size() > 0) { 
```

不幸的是，WebDriver 等待整个超时（在我的情况下为 60 秒）来检测该元素确实不**存在**。虽然这有效，但它引入了太多的时间开销......

Selenium 2 中是否有任何方法可以高效地检查当前在 Web 浏览器中显示的 HTML 页面上是否存在元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:30:55.117

这是一个两部分的答案

1.  **时间开销是正确的**：因为您希望确保该元素确实没有被渲染。也就是说，考虑到页面渲染时间、AJAX 元素等。我知道错误消息将与页面加载一起显示，但如果您想检查以几毫秒延迟显示的 ajax 元素的存在（或不存在），则超时很有用。

2.  **减少等待开销**的技巧：您仍然可以创建一种方法来临时重置隐式等待时间，如下所示

```
public boolean isElementNotPresent(By by) {
    boolean flag = true;
    driver.manage().timeouts().implicitlyWait(2, TimeUnit.SECONDS);
    if (!driver.findElements(by).size() > 0) {
        flag = false;
    } 
    driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);
    return flag;
} 
```

并在您要检查缺席的地方调用此方法，例如，第 3 行和第 4 行将是

```
if (!isElementNotPresent(By.xpath(xpathoferrorelement))) {
    Assert.fail("Test failed! No error msg should be displayed on page.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:00:32.853

尝试使用 FluentWait 类，很容易为您想要使用的条件进行配置：http: [//selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait .html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:08:14.580

当页面已经呈现时，我通常使用的几种方法（验证存在或不存在）。方法1：

```
input.findElements(By.xpath("//xpath")).size() > 0 
```

方法2：

```
driver.findElement(By.cssSelector(propertyKeysLoader(key))).isDisplayed() 
```

方法3：

```
public bool IsElementPresent(By selector)
{
    return driver.FindElements(selector).Any();
} 
```

如果您想渲染元素（以防页面上没有所有 AJAX），那么您最好使用 Arek 提到的 fluent wait 。

```
 public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                }
                }
);
                           return  foo;              }     ; 
```

在字符串中，`.pollingEvery(5, TimeUnit.SECONDS)`您可以设置任何迭代超时。很舒服。希望这对您有所帮助）

# openvms - 在 OpenVMS 中创建索引文件组织和相关文件组织

> ID：12525391
> 
> 赞同：-1
> 
> 时间：2012-09-21T06:36:07.737
> 
> 标签：openvms

如何更改 OpenVMS 中的文件组织属性？

我有一个文件 kishore.txt。

以下细节是文件的完整描述

```
$ dir/full kishore.txt

KISHORE.TXT;1                 File ID:  (38660,48,0)
Size:            2/16         Owner:    [SYSTEM]
Created:    12-SEP-2012 03:09:29.41
Revised:    12-SEP-2012 03:09:29.43 (1)
Expires:    <None specified>
Backup:     <No backup recorded>
Effective:  <None specified>
Recording:  <None specified>
Accessed:   <None specified>
Attributes: <None specified>
Modified:   <None specified>
Linkcount:  1
File organization:  Sequential
Shelved state:      Online
Caching attribute:  Writethrough
File attributes:    Allocation: 16, Extend: 0, Global buffer count: 0, No version limit
Record format:      Variable length, maximum 0 bytes, longest 69 bytes
Record attributes:  None
RMS attributes:     None
Journaling enabled: None
File protection:    System:RWED, Owner:RWED, Group:RE, World:
Access Cntrl List:  None
Client attributes:  None

Total of 1 file, 2/16 blocks. 
```

我已经使用命令更改了记录属性

```
set file/attribute=(RFM:VAR) kishore.txt 
```

该命令成功，但用于文件组织的相同命令不起作用。

文件组织目前是顺序的，但我的目标是更改文件组织：2）相对然后 3）索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:26:49.637

嗯，错过了……这可能是课堂练习吗？这个问题没有多大意义！

> > 如何更改 OpenVMS 中的文件组织属性？

你不能。时期。文件组织是一个非常永久的属性。这个名字说明了一切......这是文件（数据中的数据）的组织方式。

但是，您可以将一个组织的文件转换为另一个组织的另一个文件。通常为此使用 CONVERT 工具，该工具从输入文件中读取记录，并将它们一次一个地存储在输出文件中。输出文件可以使用某个程序预先创建，或者 convert 可以在 FDL 文件的指导下为您创建它。Google +site:hp.com openvms fdl。或者在 VMS 上，键入 $ HELP FDL。

> > 我有一个文件 kishore.txt。

如果你把它变成一个相对文件，记录应该如何编号。1 .. N 根据来源？

如果你把它变成一个索引文件，记录应该如何被键入？（识别，选择，...）。让我们说输入文件的每条记录中的前 10 个字节实际上是一个（唯一的？）键。那么，您可以创建一个 FDL 文件来描述它。有关完整示例 FDL 文件，请查看例如

```
 $ANALYZE /RMS/FDL/OUT=x.FDL SYS$LIBRARY:VMS$PASSWORD_DICTIONARY.DATA 
```

您可以使用非常简略的形式：

```
 $CONV/STAT/FDL="file; org ind; key 0; seg0_l 10" kishore.txt kishore.idx
```

这可能没什么意义...但是您可以将顺序输入文件更改为索引文件，该文件具有从位置 0 开始的 10 个字符的主键。这不会更改输入文件，它只是创建索引输出具有相同日期记录的文件，可能以不同的检索顺序（排序！）。

干杯，海因。

# android - 使用菜单按钮调用 onDestroy() 但在 android 中关闭应用程序时不使用后退按钮？

> ID：12525393
> 
> 赞同：0
> 
> 时间：2012-09-21T06:36:15.353
> 
> 标签：android

我希望当我使用设备上的后退按钮关闭应用程序时，我的线程应该

1.  向服务器发送数据。
2.  更新 GPS（纬度，经度）并获取通知（在特定位置）意味着不要调用 onDestroy() 但是当我使用设备上的菜单按钮关闭应用程序时，应用程序应该完全关闭并停止所有后台更新。（意味着应该调用 onDestroy() ）。

请帮助我，我是android新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:52:23.570

在您的活动中覆盖[onBackPressed()](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)以决定按下后退按钮时要执行的操作。并从您想要完成活动的任何地方调用[finish() 。](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)永远不要直接打电话`onDestroy()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:53:04.873

我认为您将不得不将删除代码的内容从`onDestroy()`更好的地方移开，因为您无法阻止`onDestroy()`在活动完成时被系统调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:53:25.340

请记住，`onDestroy`如果系统资源不足，则会调用它，但不是因为您关闭了应用程序。我认为更好的方法是`onBackPressed`在你的家庭活动中覆盖并实现你的逻辑，当你关闭应用程序时你想做什么。

# sql-update - android 内容提供程序中的 ContentUris.withAppendedId 方法我可以将参数的“id”部分留空吗？

> ID：12525395
> 
> 赞同：0
> 
> 时间：2012-09-21T06:36:24.817
> 
> 标签：sql-update, android-contentprovider

对于以下方法

```
 Uri uri = ContentUris.withAppendedId((MediaStore.Images.Media.EXTERNAL_CONTENT_URI, id); 
```

我已经阅读了很多示例，但没有一个示例告诉我如何处理参数的“id”部分，我不想分配哪一行，因为这会根据特定图像存储在哪一行而改变。所以我不能硬编码“id”。如何处理？我可以将 id 保留为 null 吗？

编辑

几分钟前我刚刚从一个网站[http://www.grokkingandroid.com/android-tutorial-using-content-providers/](http://www.grokkingandroid.com/android-tutorial-using-content-providers/)

```
 values.clear();
 values.put(Words.WORD, "Zaphod");
 Uri uri = ContentUris.withAppendedId(Words.CONTENT_URI, id);
 long noUpdated = resolver.update(uri, values, null, null) 
```

这是作者的引用，“由于我只更改了一条记录，所以一个带有附加 ID 的 URI 就足够了。但是如果你想更新多个值，你应该使用普通的 URI 和一个选择子句。”

所以他说要使用“正常的 URI 和选择子句”，那么我该怎么做呢？

这是我的选择声明：

```
 String selection = MediaStore.Images.Media.DATA + "='" + filename +"'"; 
```

其中“filename”是一个字符串变量，根据选择的图像而变化，例如，在本例中为 /mnt/sdcard/pic09.png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:10:57.517

我不确定我是否理解您的问题，但是关于当您询问如何执行正常的 URI 和选择子句时，“技巧”是使用内容提供者您不会将整个选择放在一个参数中：

```
String selection = MediaStore.Images.Media.DATA + "='" + filename +"'"; 
```

而是通过不同的输入变量引入选择类型、选择参数。例如，

```
 update where MediaStore.Images.Media.DATA equals filename 
```

变成：

```
update (uri, contentValues, String selection, String[] selectionArgs) 
```

其中 uri 指向表（而不是行）内容值指向 ContentValues 对象，您的新值选择必须包含要比较的字段 + 比较类型 + 问号，如

```
MediaStore.Images.Media.DATA + " = ?"; 
```

And selection arguments is an array with all the strings replacing question marks on your selection string, so in your case just

```
{filename} 
```

# java - 今天是一年中的第 n 天

> ID：12525396
> 
> 赞同：21
> 
> 时间：2012-09-21T06:36:28.690
> 
> 标签：java, android

我想获得天数.. 即 1 月 1 日是第 1 天 1 月 2 日是第 2 天 2 月 1 日是第 32 天，12 月 31 日是第 365 天或第 366 天，具体取决于闰年与否

我已经使用了各种技术，例如 date1 - date2 等……但似乎没有什么对我有用，我可能无法正确理解逻辑……我想要的是计算并添加过去的月份数加上运行月份的天数，即今天是 2012 年 9 月 21 日是天数（31（一月）+29（二月）+31（三月）+30（四月）+31（五月）+30（六月）+31（七月） +31（八月）+ 20（九月））=第 264 天，他们会继续加一，每天过去...谢谢

我的代码

```
int year = Calendar.getInstance().get(Calendar.YEAR);
            GregorianCalendar gc = new GregorianCalendar();
            gc.set(GregorianCalendar.DAY_OF_MONTH, 8);
            gc.set(GregorianCalendar.MONTH, GregorianCalendar.JUNE);
            gc.set(GregorianCalendar.YEAR, year);
            int numberofDaysPassed=gc.get(GregorianCalendar.DAY_OF_YEAR); 
```

numberofDaysPassed 给了我 160，不想要的结果

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-21T06:38:31.640

```
Calendar calendar = Calendar.getInstance();
int dayOfYear = calendar.get(Calendar.DAY_OF_YEAR); 
```

或使用 Joda-API

```
DateTime dt = new DateTime();  
int dayOfYear = dt.getDayOfYear(); 
```

如果您需要`'th'`零件，请使用 switch 语句

```
switch (dayOfYear > 20 ? (dayOfYear % 10) : dayOfYear) {
            case 1:  return dayOfYear + "st";
                     break;
            case 2:  return dayOfYear + "nd";
                     break;
            case 3:  return dayOfYear + "rd";
                     break;
            default:  return dayOfYear + "th";
                     break;   
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-12-17T16:02:24.227

# `LocalDate`

使用[`LocalDate`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)Java 8 及更高版本中内置的 java.time 包中的类。

获取日期：

```
int dayOfYear = LocalDate.now().getDayOfYear(); 
```

…并设置一年中的一天：

```
LocalDate localDate = LocalDate.now().withDayOfYear( 195 ); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T06:39:48.093

尝试将日历上的日期设置为问题中的日期，您要求 9 月 21 日，但您在代码中输入了 6 月 8 日。

这是给出 265 的更新代码：

```
 int year = Calendar.getInstance().get(Calendar.YEAR);
    GregorianCalendar gc = new GregorianCalendar();
    gc.set(Calendar.DAY_OF_MONTH, 21); // you asked for 21st Sept but put 8
    gc.set(Calendar.MONTH, Calendar.SEPTEMBER); // you aksed for 21st Sept but put JUNE
    gc.set(Calendar.YEAR, year);
    int numberofDaysPassed = gc.get(Calendar.DAY_OF_YEAR);
    System.out.println(numberofDaysPassed); 
```

顺便说一句，您不需要在日历上设置月份、日期等，它默认为“现在”......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-13T06:20:52.177

使用 Java 8，您可以这样做： `int n = LocalDate.now().get(ChronoField.DAY_OF_YEAR);`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-21T06:39:12.277

```
Calendar ca1 = Calendar.getInstance();    
int DAY_OF_YEAR=ca1.get(Calendar.DAY_OF_YEAR);
System.out.println("Day of Year :"+DAY_OF_YEAR); 
```

检查你的logcat中的结果..

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T06:42:53.863

```
DateTime dt = new DateTime();  
String dayOfYear = dt.getDayOfYear().toString();
String day = "";

if(dayOfYear.endsWith("1") && !dayOfYear.endsWith("11"))
    day = dayOfYear+"st";
else if(dayOfYear.endsWith("2") && !dayOfYear.endsWith("12"))
    day = dayOfYear+"nd";
else if(dayOfYear.endsWith("3") && !dayOfYear.endsWith("13"))
    day = dayOfYear+"rd";
else 
    day = dayOfYear+"th";

System.out.println("Day of year :- "+ day); 
```

# linux - 如何使用终端命令直接连接 Teamviewer？

> ID：12525400
> 
> 赞同：5
> 
> 时间：2012-09-21T06:37:21.327
> 
> 标签：linux, ubuntu-10.04, remote-desktop, putty, gnome-terminal

据我所知，我可以通过终端命令-“ **putty server_ip -l user_name -pw password** ”直接使用putty与服务器连接，之后无需输入用户名和密码。就像这样，我可以通过在终端中输入“ **teamviewer** ”来运行 teamviewer。但是任何人都可以告诉我如何将“合作伙伴 ID”和“密码”传递给“teamviewer”命令来直接连接它，就像我对腻子所做的那样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T06:40:04.143

根据[TeamViewer 文档](http://www.teamviewer.com/en/help/91-Gibt-es-Aufrufparameter-fuer-TeamViewer.aspx)，它是`teamviewer.exe -i <ID> --Password <Password>`

# erlang - Erlang shell 无法显示表达式的结果

> ID：12525402
> 
> 赞同：-1
> 
> 时间：2012-09-21T06:37:42.077
> 
> 标签：erlang, erlang-shell

> **可能重复：**
> [Erlang shell 问题](https://stackoverflow.com/questions/4061328/erlang-shell-problem)

我在我的 macbook pro 和带有 ubuntu 的笔记本电脑上安装了 erlang 5.9.2。但他们都没有同样的问题：

我打开终端并输入 erl，我可以看到 erlang 的版本，所以它运行良好。但是我输入了一个像 2 + 3 这样的表达式，我看不到结果。像这样

```
1>2 + 3
1>

1>a = 2 + 3
1>a
1> 
```

任何人都可以帮助解决这个问题吗？

多谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T06:40:41.200

a ha，erlang 需要 a`.`来表示表达式的结束。

```
1>2+3.
5 
```

# google-maps - 如何为谷歌地图中的标记提供数字

> ID：12525403
> 
> 赞同：0
> 
> 时间：2012-09-21T06:37:54.867
> 
> 标签：google-maps, google-maps-api-3

``在我的要求中，我有一组作为 json 对象传递给地图的路点。从这些航路点开始，开始和结束必须以字母显示，中间标记应以数字显示。我该如何实现这个场景？我还发现谷歌地图最多支持 8 个航点和一个起点和终点。有没有办法在我的地图上添加更多航点？我正在使用谷歌地图 DirectionsService 进行航点渲染。

我使用的代码是

```
 function calcRoute() {
    var start = wayPointArray[0];
    var end = wayPointArray[1];
    var waypts = [];

    for (var i = 2; i <= wayPointArray.length-1; i++) {
            waypts.push({
                location: wayPointArray[i],

                stopover: true
            });

    }
    var request = {
        origin: start,
        destination: end,
        waypoints: waypts,
        optimizeWaypoints: true,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function (response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
        }
    });
}

function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var mapOptions = {
        zoom: 6,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: false
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    directionsDisplay.setMap(map);
} 
```

wayPontArray 包含航点的所有纬度和经度。第一个和第二个将分别是开始和结束，所有其他都是航点。开始和结束应该是字母，即 A 和 B。中间的航路点应该是数字。

在此先感谢博尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:13:48.723

如果您知道航点的坐标，则可以使用带有数字或字母的自定义标记作为标签，[如下例所示](http://biostall.com/adding-number-or-letters-to-google-maps-api-markers)：

```
var marker = new google.maps.Marker({
    position: myLatlng, 
    map: map,
    icon: 'http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=A|FF0000|000000'
}); 
```

# drupal - 获取表头以使用寻呼机 url drupal 7

> ID：12525404
> 
> 赞同：0
> 
> 时间：2012-09-21T06:38:03.867
> 
> 标签：drupal, pagination, themes

我有一个独特的问题。在我的 drupal 站点中，我在预告片中显示了很多节点，对于每个节点，我使用的是带有寻呼机的表。问题是，在页面初始加载时，表格排序不起作用。但是，如果我使用寻呼机并移动到不同的页面然后返回，那么排序工作。

我调查了这个问题，发现在初始加载时，标题链接的 url 使用主链接，即：mysite.com/node?sort=asc&order=Name。单击寻呼机后，标题链接的 url 更改为：mysite.com/mycallbackfunction?_=1348208999187&page=1&nid=13&pager_id=1&sort=desc&order=Name

如果您注意到，url 显然是不同的，这没关系，但主要的是，在初始加载中缺少 nid。我希望表头使用寻呼机 url 或我指定的一些 url，因此在这两种情况下都会出现 nid，因为如果没有 nid，函数不会返回任何内容。

这是显示表格的 mycallbackfunction 中的相关代码：

```
 //Attach a theme table 
  $html = theme('table', array(
    'header' => $header,
    'rows' => $rows,
    'attributes' => array(
      "class" => array(
        "my_table_box"
      ),
      "cellspacing" => '0',
      "cellpadding" => '0'
  )));

//Pager theme
  $html .= theme('pager', array(
    'element' => $pager_id,
    'parameters' => array(
      'nid' => $nid,
      'pager_id' => $pager_id),
    'quantity' => ceil($count/5)
  )); 
```

希望有人可能对这个奇怪的问题有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:43:32.960

您可以在 theme('pager') 函数中传递自定义参数。

```
<?php
// e.g.
theme('pager', array('parameters' => array('nid' => $nid))
?>); 
```

如果您正在寻找其他东西，请告诉我。

祝你好运！

-伊姆兰

# c# - 我如何知道图片何时加载到 Picturebox

> ID：12525407
> 
> 赞同：6
> 
> 时间：2012-09-21T06:38:19.723
> 
> 标签：c#, .net

我有一些巨大的图像（7000*5000）要同时加载到我的程序中，我在图片框中一一显示。这些图像需要一些时间才能加载到[PictureBox](http://msdn.microsoft.com/en-us/library/5b4t5f7s.aspx)中。起初我将`Image`数组中的所有图像加载为`Bitmap`，然后我只是在 picturebox 中显示第一张图像`picturebox.Image = imageArray[0]`。所以我想显示等待光标，直到第一个图像显示在 Picturebox 中。有什么方法可以知道第一张图片何时显示在 Picturebox 上？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T06:50:24.617

您可以使用 PictureBox 事件：[`LoadProgressChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.loadprogresschanged.aspx)显示加载进度并[`LoadCompleted`](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.loadcompleted.aspx)在完成时执行某些操作。

```
private void pictureBox1_LoadProgressChanged(object sender, ProgressChangedEventArgs e)
{
    // animate a progressbar...
}

private void pictureBox1_LoadCompleted(object sender, AsyncCompletedEventArgs e)
{
    // done !
} 
```

为了使这项工作，您必须将`.WaitOnLoad`value 属性保持为 False，并且您必须使用其中一种`LoadAsync`方法。

# android - 如何在没有新的可运行线程的情况下使用 HTTPPost

> ID：12525413
> 
> 赞同：1
> 
> 时间：2012-09-21T06:38:39.323
> 
> 标签：android, json, http-post

我的内部有以下代码，`MainAcitivity`用于使用方法获取的用户名和密码登录到应用程序`jsnrqstr.sendRequest(username, password, URL);`

```
loginButton.setOnClickListener(
        new View.OnClickListener()
        {
            public void onClick(View view)
            {
                username = userNameBox.getText().toString();
                password = passwordBox.getText().toString();
                login_state = jsnrqstr.sendRequest(username, password, URL);
                if(login_state.equals("ok")){
                    details.setUserName(username);
                    details.setPassword(password);
                    Toast.makeText(MainActivity.this, "User Verified", Toast.LENGTH_LONG).show();
                    passwordBox.setText("");
                    Intent myIntent = new Intent(MainActivity.this, DashBoardActivity.class);
                    MainActivity.this.startActivity(myIntent);
                }else
                    Toast.makeText(MainActivity.this, "Login Unsuccessful", Toast.LENGTH_LONG).show();
                    passwordBox.setText("");
            }
        }); 
```

此方法使用以下代码接收来自 erlang 服务器的响应，该服务器使用 JSON 对象进行响应，我可以从中接收 login_state。代码`jsnrqstr.sendRequest(username, password, URL);`

```
public class JSONRequester {

String state;

public String sendRequest(final String userName, final String password, final String URL){

    new Thread(new Runnable() {
        public void run() {
            HttpClient client = new DefaultHttpClient();
            HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
            HttpResponse response;
            JSONObject json = new JSONObject();
            try{
                HttpPost post = new HttpPost(URL);
                post.setHeader("Content-type", "application/json");
                json.put("username", userName);
                json.put("password", password);
                StringEntity se = new StringEntity( json.toString());
                se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
                post.setEntity(se);
                response = client.execute(post);
                /*Checking response */
                if(response!=null){
                    String temp = EntityUtils.toString(response.getEntity()); //Get the data in the entity
                    //Log.v("response", temp);
                    JsonObject o = new JsonParser().parse(temp).getAsJsonObject();
                    Log.v("response", o.get("state").toString());
                    state = o.get("state").toString();
            }}
            catch(Exception e){
                e.printStackTrace();
                //createDialog("Error", "Cannot Estabilish Connection");
            }
        }
      }).start();
          return state;
} 
```

但我得到以下**空指针异常**@

```
if(login_state.equals("ok")){ 
```

这意味着我没有`login_state`正确返回上述方法的值。我认为这是因为当新的可运行线程返回值时为时已晚。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:41:37.840

如果您依赖返回值，您应该使用某种类型的回调，当线程完成时将开始执行您的代码。或者您可以启动新线程并等待它返回，然后再执行其他任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:26:35.653

问题出在两行之间:) - 这两个：

}）。开始（）;

**<== 这里！！！**

```
 return state; 
```

第二个过早执行，而您的线程仍在运行。并发是解决方案。

一种常见的 Android 特定模式是 AsyncTask - [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html) - 或其类似物（线程/处理程序等）

单击时，在 onPreExecute（sendRequest 之前的代码）中启动该过程：例如，打开一个进度对话框并进行初始化。您的线程代码进入 doInBackground 方法并设置状态变量。完成后，在 onPostExecute 中，关闭进度对话框，然后继续您的登录逻辑：`if(/*response*/ state!=null)`...

# iphone - 如何同时进行图像旋转和 3D 变换？

> ID：12525414
> 
> 赞同：0
> 
> 时间：2012-09-21T06:38:43.457
> 
> 标签：iphone

我正在开发图像编辑应用程序（调整大小、旋转、3d 变换）。如果我旋转图像然后进行 3D 变换。它将进入初始图像。否则我改变 3D 变换然后进行旋转，它也进入初始状态。

对于图像 3D 变换，我使用以下代码：

```
- (void)moveImage:(UIPanGestureRecognizer *)recognizer
{
        if ([recognizer respondsToSelector:@selector(translationInView:)]) {
            CGPoint translation = [(UIPanGestureRecognizer *)recognizer translationInView:recognizer.view.superview];

            CALayer *layer = self.layer;
            CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;
            rotationAndPerspectiveTransform.m34 = 1.0 / 500.0;
            rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, - self.xTranslation / 50.0 * M_PI / 180.0f, 0.0f, 1.0f, 0.0f);
            layer.transform = rotationAndPerspectiveTransform;
            rotationAndPerspectiveTransform.m34 = - 1.0 / 500.0;
            rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, - self.yTranslation / 50.0 * M_PI / 180.0f, 1.0f, 0.0f, 0.0f);
            layer.transform = rotationAndPerspectiveTransform;
        }
 } 
```

对于图像旋转，我使用以下代码：

```
- (void)rotateImage:(UIRotationGestureRecognizer *)recognizer
{
    if (state == RSImageViewStateResizing) {
        recognizer.view.transform = CGAffineTransformRotate(recognizer.view.transform, recognizer.rotation);
        recognizer.rotation = 0;
    }
} 
```

我该如何解决这个问题。随时欢迎您的建议、示例代码、示例项目、任何 App Store 应用程序。提前致谢。任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:48:33.430

使用 CAAnimationGroup 将多个动画合二为一

```
CAAnimationGroup *theGroup = [CAAnimationGroup animation];
theGroup.animations=[NSArray arrayWithObject:resizeAnimation, rotationAnimation, 3d transformAnimation];// add here your CAAnimation reference and CATransform3D reference
[layer addAnimation:theGroup forKey:@"animatePosition"]; 
```

# jsf-2 - Jsf 复合组件属性不起作用

> ID：12525420
> 
> 赞同：3
> 
> 时间：2012-09-21T06:39:08.100
> 
> 标签：jsf-2, composite-component

我正在尝试创建复合组件。我在节中定义了 4 个属性`composite:interface`。这是代码

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:composite="http://java.sun.com/jsf/composite">

<composite:interface >
    <composite:attribute name="id" />
    <composite:attribute name="maxlength" />
    <composite:attribute name="required"/>
    <composite:attribute name="value" />
</composite:interface>

<composite:implementation  xmlns:kc="http://java.sun.com/jsf/composite/components/kaysComposite">
        <p:inputTextArea id="#{cc.attrs.id}" value="#{cc.attrs.value}" maxlength="#{cc.attrs.maxlength}" required="#{cc.attrs.required}" counterTemplate="{0} /  #{cc.attrs.maxlength}" counter="#{cc.attrs.id}_counter"/>

        <h:outputText id="#{cc.attrs.id}_counter"/>
</composite:implementation>
</html> 
```

这是我使用我的组件的页面

```
 <kc:kaysInputTextArea id="gpAdres" value="#{someBean.variable}"   maxlength="250" required="true"/>
<p:message for="gpAdres" /> 
```

奇怪的部分是 required 属性不起作用，但其他部分工作正常。我找不到它为什么会这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:59:11.310

（不是一个真正的答案，但评论太长了。只是想分享一些可能有帮助的想法......请在适当的情况下编辑或替换）

你没有描述你遇到的行为，所以我猜组件内部的值不会随着你传入的值而改变。

我在相同的设置中遇到了类似的问题，但是当我直接传入“true”或“false”时（如您的示例所做的那样），它起作用了。只有当我交出一个 EL 表达式时，组件内部的值才不再设置，而不管表达式的计算结果如何。在我的情况下，我在属性上设置了一个明确的类型，例如`type="java.lang.Boolean"`删除这个定义就可以了。

我的猜测是，当强制属性期望 boolean 时，它无法处理 EL 并将其解析为 Boolean 的默认值（这似乎是真的，除非`default="false"`设置）。

通过不设置类型，组件似乎可以保留 EL 并将其传递给下一个目标，例如任何 h:tag 的渲染属性。

似乎不是您的确切问题，但也许有助于追踪问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T08:43:49.703

我也经历过一次组件的奇怪行为。原来是里面的值*id*有问题

```
<composite:attribute name="id" /> 
```

所以尝试将属性重命名为*ident*。也许其他通常命名的属性像`required`or`value`也是一个问题......

我遇到的具体，更有趣的情况如下：

```
<composite:attribute name="id" requred="true" /> 
```

工作。注意 中的错字`requred`。当我修复错字时，组件不再工作，抱怨我没有为 as required 标记`id`属性指定一个值，尽管我确实为此提供了一个值。解决方案是重命名复合属性：

```
<composite:attribute name="ident" required="true" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T10:39:00.870

只需尝试使用另一个属性：id 是为复合标签保留的，所以你应该试试这个：

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:composite="http://java.sun.com/jsf/composite">

<composite:interface >
    <composite:attribute name="inputTextId" />
    <composite:attribute name="maxlength" />
    <composite:attribute name="required"/>
    <composite:attribute name="value" />
</composite:interface>

<composite:implementation  xmlns:kc="http://java.sun.com/jsf/composite/components/kaysComposite">
        <p:inputTextArea id="#{cc.attrs.inputTextId}" value="#{cc.attrs.value}" maxlength="#{cc.attrs.maxlength}" required="#{cc.attrs.required}" counterTemplate="{0} /  #{cc.attrs.maxlength}" counter="#{cc.attrs.id}_counter"/>

        <h:outputText id="#{cc.attrs.inputTextId}_counter"/>
</composite:implementation>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-20T08:29:46.487

您可以使用这种方法。

```
<kc:kaysInputTextArea id="gpAdres" value="#{someBean.variable}"   maxlength="250" required="true" rendered="#{yourBooleanExpression}"/>
<kc:kaysInputTextArea id="gpAdres" value="#{someBean.variable}"   maxlength="250" required="false" rendered="#{!yourBooleanExpression}"/> 
```

这是黑客，但工作）

# c# - 我可以在 C# 项目中调用 Excel 插件的函数吗？

> ID：12525422
> 
> 赞同：2
> 
> 时间：2012-09-21T06:39:13.383
> 
> 标签：c#, xll

Excel 插件是用 C++ 编写的，但我没有源代码。

我可以在 Excel 电子表格上使用它的功能；我可以在 C# 中做同样的事情吗？

解决了：

谢谢大家，它通过以下代码工作：

```
excelFile = new Excel.Application();
//Set XLL path
excelFile.RegisterXLL("XLL Path"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:43:41.950

您的 XLL 是托管代码还是非托管代码？

据我所知，非托管 C++ XLL 文件实际上是一个导出 Excel 调用的特定方法的 DLL。

如果您的 XLL 有一个 .def 文件，也许您可​​以添加其他团队将调用的方法。

# jquery - jQuery：更改事件目标的 css

> ID：12525423
> 
> 赞同：2
> 
> 时间：2012-09-21T06:39:14.770
> 
> 标签：jquery, backbone.js

这是一个我无法让它工作的小提琴[http://jsfiddle.net/mjmitche/rAPcQ/22/](http://jsfiddle.net/mjmitche/rAPcQ/22/)

我有 html 用户单击一个按钮来添加朋友的名字

```
 <button id="add-friend">Add Friend</button>

<ul id="friends-list"> </ul> 
```

在列表中的每个名字旁边，都有一个丰富的跨度元素？用户可以点击表明此人是否有钱

```
Jim     [rich?] 
```

如果用户单击跨度，我希望更改名称的颜色。我还希望跨度（即丰富？）的html改变，以便用户可以来回切换

在我看来，我创建了一个这样的事件

```
events: {
      'click span.swap':  'swap',

    }, 
```

这样当用户单击跨度时，就会调用“交换”函数。

```
swap: function(e) {

    var spin = e.target;
    var tit =  $(spin).css('color');

    if (tit === 'blue') {

        $(spin).css('color', 'black');
        $(spin).html('poor?');

    } else {

        $(spin).css('color', 'blue');
        $(spin).html('rich?');

    } 
```

“swap”函数中的代码改变了被点击元素的css和html。它会改变

吉姆 [富有？] //最初是蓝色的

到

Jim [poor?] //'poor' 现在是黑色的

如果它已经切换过一次，然后让您能够切换。但是，“swap”函数中的代码不起作用，（即使它正在传递 jsLint）。

你能告诉我我做错了什么吗？

**更新**

如果您能告诉我如何更改人名的 css，则可以加分，该人名包含在同一函数中的“朋友”类中。

```
<span class="friend" style="color:pink">' + this.model.get('name') + '</span> &nbsp; &nbsp; <span class="swap" style="font-family:sans-serif; color:blue; cursor:pointer;">[rich?]</span> 
```

HTML

```
 <button id="add-friend">Add Friend</button>

<ul id="friends-list"> </ul> 
```

这是列表元素的容器，这些元素被添加，然后通过一个主干.js 视图单独添加

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:50:59.353

你有这个问题，因为计算的样式被转换为 rgb 颜色。

blue 变为 rgb(0, 0, 255) 并且您的条件语句不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:07:06.317

检查这个小提琴： http: [//jsfiddle.net/UJ4HN/](http://jsfiddle.net/UJ4HN/) （更新）

交换功能

```
swap: function(e) {

    var $spin = this.$('.swap');
    var $name = this.$('.friend');
    var text =  $spin.text();

    if (text.indexOf('rich') != -1) {

        $spin.css('color', 'black');
        $name.css('color', 'green');   //here color for name
        $spin.html('[poor?]');

    } else  {

        $spin.css('color', 'blue');
        $name.css('color', 'red');     //here color for name
        $spin.html('[rich?]');

    }
 }, 
```

# java - 获取没有 instanceOf 的实体子类

> ID：12525428
> 
> 赞同：3
> 
> 时间：2012-09-21T06:39:38.240
> 
> 标签：java, hibernate, entity, hierarchy

我有一个场景，我有一个在休眠中实现的实体层次结构。它是 InheritanceType.JOINED

父类：

```
@Entity 
@Table(name = "LOY") 
@Inheritance(strategy=InheritanceType.JOINED)
public class Loy implements Serializable 
```

子类边界

```
@Entity 
@Table(name = "LOY_BOUNDARY") 
@PrimaryKeyJoinColumn(name="ID")
public class LoyBoundary implements Serializable 
```

儿童班级百分比

```
@Entity 
@Table(name = "LOY_PERCENTAGE") 
@PrimaryKeyJoinColumn(name="ID")
public class LoyPercentage implements Serializable 
```

我有一个**Customer 实体类**，它**链接**到**@ManyToOne**中 的**Loy 实体类**。客户一次只能与一个 Loy 关联。

 **我想要实现的是，我想用唯一的 id（护照号码）**查询 Customer 类**，然后通过 Customer 实体中的 @ManyToOne 映射**获取特定 Customer 的 Loy 。**

我遇到的问题是我不知道 Loy 的哪个子类与客户相关联。

1.  我可以去 instanceOf 获取特定的子类，但我想尝试避免它。
2.  我还可以在子类实体中添加访问者模式，但不确定这是否是最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:38:52.070

我会和访客一起去。如果是延迟加载，则使用`instanceof`将不起作用`ManyToOne`，因为 Loy 的实际类型不会是您的任何子类，而是扩展 Loy 类的 Hibernate 代理。的确，Hibernate 无法从客户中的 loy 的 ID 中知道它指的是哪种 Loy。

无论如何，访问者更加OO和更清洁。**

# algorithm - 有序和无序（有根）树之间的区别

> ID：12525429
> 
> 赞同：8
> 
> 时间：2012-09-21T06:39:41.343
> 
> 标签：algorithm, tree

我正在阅读 Robert Sedwick 的算法。本书中的一些定义如下所示。

> 树（也是有序树）是连接到一系列不相交树的节点（称为根）。这样的序列称为森林。
> 
> 有根树（或无序树）是连接到多个有根树的节点（称为根）。（这样的多重集称为无序森林。

我对上述文字的问题是

1.  我很难理解上述定义。任何人都可以用例子解释一下。
2.  作者所说的不相交的树是什么意思？
3.  作者所说的多重有根树是什么意思？

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:56:26.937

1.  根据这个定义，树或多或少就是我们通常所理解的树：连接到有序（子）树序列的节点。这是一个递归定义：如果序列为空，则该节点称为*叶子，*如果不是，则序列中的每棵树也是“连接到有序（子）树序列的节点”。
2.  作者不相交的意思是子树没有共同的节点。
3.  该定义意味着有根树的子树不是按特定顺序排列的，它们可以重复。[多重集](http://en.wikipedia.org/wiki/Multiset)有点像允许多重的集。

有序树（第一个定义的“树”）具有特定顺序的子树，并且子树序列不能包含同一棵树两次，因为子树必须是不相交的。有根树没有这些限制；根据这个定义，一个根可能有一个子树两次，在一个类似于循环的结构中。

我没有塞德威克的书来检查这个定义是否或为什么有意义；更常见的定义或有根树将为子树使用正常集，而不是多重集。也许目的是允许节点与其子节点之间存在多个链接，同时不允许其他类型的循环，例如兄弟姐妹和堂兄弟之间的链接。

# android - Android - 使用 ViewPager 和 Fragments 进行时间和祖先导航

> ID：12525430
> 
> 赞同：1
> 
> 时间：2012-09-21T06:39:46.770
> 
> 标签：android, navigation, android-fragments, android-viewpager

对于我正在开发的音乐播放器，我正在尝试找出实现“祖先”和“临时”导航（使用向上按钮和后退按钮）的最佳方式。

目前，用户会看到一个viewpager，并且可以在三个主要片段（ArtistMain、AlbumMain 和SongMain）之间进行分页。在该视图中选择一个项目后，会发生片段事务，并且 viewpager 会消失，并被新片段（AlbumSub、Songsub 或播放器，取决于用户来自何处）替换。然后用户可以更深入地导航，直到选择一首歌曲，然后他们被带到“播放器”屏幕。

我想问题是：**如何实现所有这些条件导航？**

总的来说，我对 android 和编程还很陌生，而且我似乎无法想出一种有效的方法来实现这一点。目前，随着每个片段的出现，应用程序正在检查用户刚刚从哪里来，然后确定如果返回或回家，用户应该被带到哪里。这意味着我有一个像“fromArtistMain”，“fromAlbumSub”这样的布尔值，我正在检查像“fromSongSub && fromPlayer”这样的东西。这一切都变得有点混乱。

我画了一张图（在油漆中，对不起！！），来描绘我想要实现的导航。黄色代表“向上”按钮按下，红色是“返回”按钮按下，蓝色只是正常导航。绿色箭头表示视图分页：

![导航图](../Images/af98d20295909ae609ed04f53072693c.png)

欢迎任何建议。这可能需要一些我刚刚忽略的非常简单的东西。

谢谢你的时间。

编辑：

我一直在向后台堆栈添加片段，并使用 popBackStack() 调用，问题是弹出后台堆栈不一定是每种情况下的正确选项。

我目前有一大堆代码试图确定是否应该首先将事务添加到后台堆栈。

考虑以下情况：用户直接从“SongMain”中选择一首歌曲，并被带到“播放器”。现在应该（在我看来）使用主页按钮，将用户带到 SongSub（所选歌曲所属专辑中的歌曲列表）。现在，如果用户再次向上导航，他们将被带到“AlbumSub”，即该艺术家的专辑列表。这是一个片段事务，但添加到后台堆栈将意味着用户将在后台按下时降低一个级别（我认为这是出乎意料的）。所以在这种情况下，我不会将该特定事务添加到后台堆栈 - 看起来很好，但是有很多不同的情况，并且结合顶部需要进出可见性的 viewpager，代码变得真的凌乱。

所有这一切都意味着一大堆条件决定用户来自哪里以及他们到达那里的路径。

在主机活动中根据用户导航的位置设置一堆布尔值，然后检查这些布尔值以查看是否应将事务添加到后台堆栈中是否明智？这是我已经拥有的，但似乎效率很低。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:37:18.100

您正在查看的内容称为`Back stack`. 您可以在[developer.android.com](http://developer.android.com/guide/components/tasks-and-back-stack.html)上阅读更多相关信息。

如果您使用单个 Activity 来托管这些 Fragment 中的每一个，那么您可以修改您的代码以使用如下代码将您的 Fragments 显式添加到 Fragment Back 堆栈：

```
 FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();       
    transaction.replace(R.id.container, fragment);      
    transaction.addToBackStack("NameOfFragment");
    transaction.commit(); 
```

因此，如果您使用 Fragments 执行上述代码，如下所示：

```
Fragment1 -> Fragment2 -> Fragment3 -> Fragment4 
```

然后从`Fragment4`如果你调用这个方法：

```
getSupportFragmentManager().popBackStackImmediate(); 
```

然后`Fragment4`将完成并`Fragment3`重新启动。简单的。您可以通过单击按钮调用此行，也可以覆盖后退按钮的行为来调用它。

*请注意，在示例中，我使用`getSupportFragmentManager()`了 Compatibility Package 中的方法名称函数。如果您不使用兼容性包，则可以改为调用`getFragmentManager()`.*

**编辑**

您设想的导航问题是，在中途打破 backstack 范式意味着您的应用程序将与操作系统的其余部分“行为不同”。谷歌大体上不鼓励这种做法。但是话又说回来，出于非常相似的原因，我在我的应用程序中做了完全相同的事情:)。

当您沿着一条黄线“向上”导航时，您正在跟踪一个离散的链接（所以，`startActivity(new Intent(this, SongSub));`或其他），并且您希望它“打破”后堆。

在这个阶段，您可以决定如何前进：

*   您可以使用 SongSub 作为第 0 项来启动任务（backstack）。这是谷歌音乐应用程序所做的记忆，你是对的，这很烦人。当您按下返回时，它应该在技术上退出应用程序。玉。IMO，如果您处于明显的页面层次结构中，则应始终在退出应用程序时向下导航层次结构。

*   您可以使用 ArtistMain 作为第 0 个元素开始一个新任务，并在执行`commit`事务之前将层片段离散地放在顶部，实际上每次您“向上”而不是“返回”时都会创建一个新的后台堆栈（您的后台堆栈现在是 ArtistMain->ArtistSub ->宋子）。这就是我认为你想在这里问的问题。这是可能的，但它很混乱。

*   您可以创建一个更线性的结构（如果可能，这可能是最好的主意）。忽略 backstack 范式，让“back”和“up”无论你来自哪里**总是**上一个级别（Player 总是去 SongSub，SongSub 总是去 AlbumSub）。这将为用户提供最少混淆和最透明（以及最容易实现）的体验 - 用户将快速学习如何导航（以及按下多少“后退”）以到达他们想要的位置。

# windows - 批处理脚本中的“for i in `cat xx.txt`”

> ID：12525435
> 
> 赞同：0
> 
> 时间：2012-09-21T06:39:55.683
> 
> 标签：windows, for-loop, batch-file

我正在寻找一个批处理脚本选项，它相当于`cat xx.txt`unix 中的“for i in”。

脚本的逻辑是

xx.txt 有我将在脚本中取消的文件夹名称列表

```
for i in `cat xx.txt`
do
    cd "e:/test/$i/$yy/$mm/$DD"
done 
```

我可以为上面的批处理等效逻辑...

提前致谢

斯里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:00:09.110

当然：

```
for /f %%I in (xx.txt) do (
    cd e:\test\%%i\%yy%\%mm%\%DD%
) 
```

（这里我假设 variables`yy`和设置为有用的东西`mm`，`DD`您没有包含在代码示例中）。

您可能还需要使用`for /f`选项，具体取决于目录列表文件格式。用于`for/?`详细信息。

# xslt - XSLT 生成额外的换行符

> ID：12525438
> 
> 赞同：0
> 
> 时间：2012-09-21T06:40:19.140
> 
> 标签：xslt, line-breaks, value-of

在 XSLT 中，使用 ，它会在渲染值之前生成一个换行符，在它之后生成另一个换行符。这里有一个例子：

```
<xsl:when test="name(.) = 'Item'">
     "<xsl:value-of select="./Item/Data[last()]/text()"/>"
</xsl:when> 
```

渲染的结果是：

```
 "
                                             09/07/2012
" 
```

如您所见，它在结果值之前和之后放置了两个换行符，而所需的结果是：

```
"09/07/2012"
```

原始输入是：

这是原始输入，对此感到抱歉。

```
 <Item>
                                         <Item>
                                            <Data>105</Data>
                                            <Data>09/07/2012</Data>
                                         </Item>
                                      </Item> 
```

我在 Oracle Server Bus 中执行这个 XSLT

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T06:44:51.537

额外的空间~~是~~ *也可能*来自选定的文本。用于`normalize-space()`删除它。

```
<xsl:value-of select="normalize-space(./Item/Data[last()]/text())"/> 
```

**编辑**Overnuts`<xsl:text>`在引号周围使用是正确的，否则 Xslt 处理器将*在*开始 /结束引号*之后保留换行符。*但是，我仍然不明白为什么引号和你的`xsl:value-of`?之间会出现换行符。

我试过以下

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/xml" xml:space="default">
        <xsl:apply-templates select="*" />
    </xsl:template>

    <xsl:template match="*" xml:space="default">
        <xsl:choose>
            <xsl:when test="name(.) = 'Item'">
                <xsl:text>"</xsl:text>
                <xsl:value-of select="normalize-space(./Item/Data[last()]/text())"/>
                <xsl:text>"</xsl:text>
            </xsl:when>
        </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

使用此 XML 运行时：

```
<xml>
    <Item>
        <Item>
            <Data>105</Data>
            <Data>09/07/2012</Data>
        </Item>
    </Item>
</xml> 
```

生产`"09/07/2012"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T06:48:40.260

我想你可以试试：

一切都在一条线上（快速而肮脏）：

```
<xsl:when test="name(.) = 'Item'">"<xsl:value-of select="./Item/Data[last()]/text()"/>"</xsl:when> 
```

或使用这样的标签（**最佳实践**）：

```
<xsl:when test="name(.) = 'Item'">
  <xsl:text>"</xsl:text>
    <xsl:value-of select="./Item/Data[last()]/text()"/>     
  <xsl:text>"</xsl:text>
</xsl:when> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T15:41:12.280

Perhaps an implementation specific bug?

Using xsltproc all the above work as expected, although the expected results of bare newline+whitespace+quote+date+quote+newline+space is for the /external/ white-space to be copied as well. All the other examples produce the same 13 bytes, including a trailing newline.

Using libxml 20706, libxslt 10124 and libexslt 813 xsltproc was compiled against libxml 20701, libxslt 10124 and libexslt 813 libxslt 10124 was compiled against libxml 20701 libexslt 813 was compiled against libxml 20701

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T06:50:07.933

可能原始 XML 源包含这些换行符（缩进），尝试类似：

```
<xsl:value-of select="concat('~', normalize-space(./Item/Data[last()]/text()), '~')"/> 
```

# css - 修复了 IE8 中的定位和生成内容

> ID：12525441
> 
> 赞同：-1
> 
> 时间：2012-09-21T06:40:34.963
> 
> 标签：css, internet-explorer-8

我正在尝试从多个不同的 HTML 元素中组装一个固定位置的标题，并且出于定位原因，它们都不能在视口顶部提供颜色背景栏。我一直在尝试用生成的内容来弥补差异，它在 Firefox 和 IE9 中有效，但在 IE8 中遇到了麻烦。

这是一个例子：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title>IE8 Positioning Demo</title>
    <style type="text/css">
      html {
        margin: 0;
        padding: 0;
      }
      html:before {
        /* A gray bar across the top of the window */
        display: block;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 30px;
        background: #cccccc;
        content: " ";
      }
      body {
        margin-top: 35px;
      }
      h1 {
        /* Position the h1 on top of the gray bar */
        position: fixed;
        top: 0;
        margin: 0;
        font: 16px serif;
      }
    </style>
  </head>

  <body>
    <h1>Banner text</h1>

    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec
      a diam lectus. Sed sit amet ipsum mauris. Maecenas congue ligula
      ac quam viverra nec consectetur ante hendrerit. Donec et mollis
      dolor. Praesent et diam eget libero egestas mattis sit amet
      vitae augue. Nam tincidunt congue enim, ut porta lorem lacinia
      consectetur. Donec ut libero sed arcu vehicula ultricies a non
      tortor. Lorem ipsum dolor sit amet, consectetur adipiscing
      elit. Aenean ut gravida lorem. Ut turpis felis, pulvinar a
      semper sed, adipiscing id dolor. Pellentesque auctor nisi id
      magna consequat sagittis. Curabitur dapibus enim sit amet elit
      pharetra tincidunt feugiat nisl imperdiet. Ut convallis libero
      in urna ultrices accumsan. Donec sed odio eros. Donec viverra mi
      quis quam pulvinar at malesuada arcu rhoncus. Cum sociis natoque
      penatibus et magnis dis parturient montes, nascetur ridiculus
      mus. In rutrum accumsan ultricies. Mauris vitae nisi at sem
      facilisis semper ac in est.</p>
  </body>
</html> 
```

您将需要调整窗口大小（或多次复制/粘贴 lorem ipsum）以使页面滚动。IE8 将 h1 正确地视为`position: fixed`，但似乎将 html:before 视为`absolute`or `static`。

对于这种不一致，我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:15:14.673

> html：之前？严重地？你到底想完成什么？如果你想要一个横过窗口顶部的栏，把它作为第一个元素放在 . html 元素之前不应出现任何内容。

也许这就是他问题的根源。试试这个：http: [//jsfiddle.net/M314/JQaTG/](http://jsfiddle.net/M314/JQaTG/)

# c# - 如何在函数中发送数据网格

> ID：12525445
> 
> 赞同：0
> 
> 时间：2012-09-21T06:40:47.030
> 
> 标签：c#, excel-interop

我想将数据网格信息导出到 excel 文件。我的问题是我需要在要导出的每个窗口中重写相同的函数。是否可以将数据网格信息发送到主函数？

代码是：

```
private void button2_Click(object sender, EventArgs e)
    {
        string name = textBox1.Text;
        Excel.Application xlApp;
        Excel.Workbook xlWorkBook;
        Excel.Worksheet xlWorkSheet;
        object misValue = System.Reflection.Missing.Value;

        xlApp = new Excel.Application();
        xlWorkBook = xlApp.Workbooks.Add(misValue);
        xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
        int i = 0;
        int j = 0;

        for (i = 0; i <= dgvCostumers.RowCount - 1; i++)
        {
            for (j = 0; j <= dgvCostumers.ColumnCount - 1; j++)
            {
                DataGridViewCell cell = dgvCostumers[j, i];
                xlWorkSheet.Cells[i + 1, j + 1] = cell.Value;
            }
        }

        xlWorkBook.SaveAs(name + ".xls", Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
        xlWorkBook.Close(true, misValue, misValue);
        xlApp.Quit();

        releaseObject(xlWorkSheet);
        releaseObject(xlWorkBook);
        releaseObject(xlApp);

        MessageBox.Show("Excel file created , you can find the file c:\\my documents\\" + name + ".xls");

        textBox1.Text = "";
        textBox1.Visible = false;
        button1.Visible = true;
        label2.Visible = false;
    }
}

private void releaseObject(object obj)
    {
        try
        {
            System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
            obj = null;
        }
        catch (Exception ex)
        {
            obj = null;
            MessageBox.Show("Exception Occured while releasing object " + ex.ToString());
        }
        finally
        {
            GC.Collect();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:44:22.683

像这样的东西怎么样

```
private void DataGridViewToExcel(string name, DataGridView dgv)
{
    Excel.Application xlApp; 
    Excel.Workbook xlWorkBook; 
    Excel.Worksheet xlWorkSheet; 
    object misValue = System.Reflection.Missing.Value; 

    xlApp = new Excel.Application(); 
    xlWorkBook = xlApp.Workbooks.Add(misValue); 
    xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1); 
    int i = 0; 
    int j = 0; 

    for (i = 0; i <= dgv.RowCount - 1; i++) 
    { 
        for (j = 0; j <= dgv.ColumnCount - 1; j++) 
        { 
            DataGridViewCell cell = dgv[j, i]; 
            xlWorkSheet.Cells[i + 1, j + 1] = cell.Value; 
        } 
    } 

    xlWorkBook.SaveAs(name + ".xls", Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue); 
    xlWorkBook.Close(true, misValue, misValue); 
    xlApp.Quit(); 

    releaseObject(xlWorkSheet); 
    releaseObject(xlWorkBook); 
    releaseObject(xlApp);  
} 
```

然后您的按钮单击代码可以更改为类似

```
private void button2_Click(object sender, EventArgs e) 
{ 
        string name = textBox1.Text; 
        DataGridViewToExcel(name, dgvCostumers);

        MessageBox.Show("Excel file created , you can find the file c:\\my documents\\" + name + ".xls"); 

        textBox1.Text = ""; 
        textBox1.Visible = false; 
        button1.Visible = true; 
        label2.Visible = false; 
    } 
} 
```

# mysql - Mysql2 查询不适用于 Heroku

> ID：12525449
> 
> 赞同：0
> 
> 时间：2012-09-21T06:41:10.077
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, postgresql, activerecord

我有一个不能与 postgresql 一起使用的 mysql 查询：-

```
@events = Event.all_with_distance([current_user.geo_lat, current_user.geo_lng]).where("start > ?", Time.zone.now).order("distance").order("start DESC").where("title like ?", "%#{params[:q]}%")

def self.all_with_distance(origin)
    distance_sql = sql_for_distance(origin)
    select("#{table_name}.*, #{distance_sql} AS distance").select("`locations`.`geo_lat`, `locations`.`geo_lng`, `locations`.`name` as location_name").joins(:location).where("#{distance_sql} < 50")
  end 
```

这是我得到的错误：-

```
PG::Error: ERROR:  syntax error at or near "."
LINE 1: ...SIN(RADIANS(26.8465108)) * SIN(RADIANS(`locations`.`geo_lat`... 
```

生成的查询：-

```
SELECT events.*, (ACOS( SIN(RADIANS(26.8465108)) * SIN(RADIANS(`locations`.`geo_lat`)) + COS(RADIANS(26.8465108)) * COS(RADIANS(`locations`.`geo_lat`)) * COS(RADIANS(`locations`.`geo_lng`) - RADIANS(80.9466832)) ) * 6378.135)  AS distance, `locations`.`geo_lat`, `locations`.`geo_lng`, `locations`.`name` as location_name FROM "events" INNER JOIN "locations" ON "locations"."id" = "events"."location_id" WHERE ((ACOS( SIN(RADIANS(26.8465108)) * SIN(RADIANS(`locations`.`geo_lat`)) + COS(RADIANS(26.8465108)) * COS(RADIANS(`locations`.`geo_lat`)) * COS(RADIANS(`locations`.`geo_lng`) - RADIANS(80.9466832)) ) * 6378.135)  < 50) AND (start > '2012-09-21 06:40:18.964016') AND (title like '%%') ORDER BY distance, start DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:47:18.683

是的，Back Ticks 是 MySql 主义

用“”删除''后它工作正常。

这是更改后的查询：-

```
select("#{table_name}.*, #{distance_sql} AS distance").select('"locations"."geo_lat", "locations"."geo_lng", "locations"."name" as location_name').joins(:location).where("#{distance_sql} < 50") 
```

# python - 正则表达式在文本的各个部分匹配不同的符号相同的次数

> ID：12525453
> 
> 赞同：2
> 
> 时间：2012-09-21T06:41:22.180
> 
> 标签：python, regex, bioinformatics

我需要解析对树有用的 Newick 格式。它看起来像一系列括号、逗号和字母表示的节点：

```
(A,B,(C,D)E)F 
```

或者，再举一个例子：

```
(,(((,(,)),),)) 
```

`(,)`element 表示具有相同父节点的节点。为了我的目的（测量两片叶子之间的路径长度），我需要寻找这样的嵌套元素。

所以，我的问题是如何匹配不同的符号相同的次数？

例如，我想匹配`AB`字符串中的模式：

```
CCCAAABBACCCABCCAAABBBBBBACCCCCABBBABBCCAABB 
```

正则表达式应该返回：`['AABB','AB','AAABBB','AB','AB','AABB']`

每次重复的次数都不一样。所以`A{n}B{n}`行不通。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:45:51.280

您的问题是正则表达式**无法**做到的经典示例。

[http://en.wikipedia.org/wiki/Pumping_lemma_for_regular_languages](http://en.wikipedia.org/wiki/Pumping_lemma_for_regular_languages)在“引理的使用”部分有证明语言“a^nb^n”不是正则的（所以它不能被正则表达式识别）。

使用正则表达式，您只能为给定的最大值创建正则表达式`n`。但是大的表达式`n`可能需要很长时间才能评估。

PS。您的问题可以使用形式语法 (http://en.wikipedia.org/wiki/Formal_grammar) 或计数器自动机 (http://en.wikipedia.org/wiki/Counter_automaton) 来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-24T16:41:51.313

**示例：括号简化**

假设 O = 左括号，C = 右括号，X = 中间的某个表达式。

在某些情况下，如果左侧的 O 数量与右侧的 C 数量相同，我们只能简化。

我们仍然可以在这里使用 RegExp：

将 rx 放入一个循环中，只匹配一对 O 和一个 C，重复对前一个循环的输出进行操作，直到它完全减少/分解。

```
const EXAMPLES =
`
OC
OOOOCOCCOCXCC
X
OCX
OXC
OOXCC
OOXXCC
OXOXXCC
OOXCOXXCC
OXCOXC
OXXCOXXC
`;

const is = v=>null!=v;
for (let input of EXAMPLES.trim().split(/\r?\n/g)) {
    console.log('input', JSON.stringify(input));
    let replaced;
    do {
        replaced = false;
        input = input.replace(/(?:OC|O(X)C|^(O{1,99})(X{1,99}(?:O{1,99}X{1,99}){0,99})(C{1,99})$)/gm, (...m) => {
            replaced = true;
            let out, clen;
            debugger;
            console.log(' m', JSON.stringify(m));
            if (is(m[2])) {
                clen = Math.min(m[2].length, m[4].length);
                out = m[2].substr(clen) + m[3] + m[4].substr(clen);
            }
            else {
                out = m.slice(1,-2).map(v=>null==v?'':v).join('');
            }
            console.log(' replaceWith', JSON.stringify(out));
            return out;
        });
    } while (replaced);
    console.log('output', JSON.stringify(input)+'\n')
} 
```

**输出：**

```
input "OC"
 m ["OC",null,null,null,null,0,"OC"]
 replaceWith ""
output ""

input "OOOOCOCCOCXCC"
 m ["OC",null,null,null,null,3,"OOOOCOCCOCXCC"]
 replaceWith ""
 m ["OC",null,null,null,null,5,"OOOOCOCCOCXCC"]
 replaceWith ""
 m ["OC",null,null,null,null,8,"OOOOCOCCOCXCC"]
 replaceWith ""
 m ["OC",null,null,null,null,2,"OOOCXCC"]
 replaceWith ""
 m ["OOXCC",null,"OO","X","CC",0,"OOXCC"]
 replaceWith "X"
output "X"

input "X"
output "X"

input "OCX"
 m ["OC",null,null,null,null,0,"OCX"]
 replaceWith ""
output "X"

input "OXC"
 m ["OXC","X",null,null,null,0,"OXC"]
 replaceWith "X"
output "X"

input "OOXCC"
 m ["OOXCC",null,"OO","X","CC",0,"OOXCC"]
 replaceWith "X"
output "X"

input "OOXXCC"
 m ["OOXXCC",null,"OO","XX","CC",0,"OOXXCC"]
 replaceWith "XX"
output "XX"

input "OXOXXCC"
 m ["OXOXXCC",null,"O","XOXX","CC",0,"OXOXXCC"]
 replaceWith "XOXXC"
output "XOXXC"

input "OOXCOXXCC"
 m ["OXC","X",null,null,null,1,"OOXCOXXCC"]
 replaceWith "X"
 m ["OXOXXCC",null,"O","XOXX","CC",0,"OXOXXCC"]
 replaceWith "XOXXC"
output "XOXXC"

input "OXCOXC"
 m ["OXC","X",null,null,null,0,"OXCOXC"]
 replaceWith "X"
 m ["OXC","X",null,null,null,3,"OXCOXC"]
 replaceWith "X"
output "XX"

input "OXXCOXXC"
output "OXXCOXXC" 
```

# c# - 回发后如何保持.NET Socket对象连接打开？

> ID：12525454
> 
> 赞同：3
> 
> 时间：2012-09-21T06:41:21.730
> 
> 标签：c#, asp.net, sockets, postback

我正在一个 ASP.NET 站点上工作，该站点需要创建一个 Socket 并在当前会话的所有页面之间保持连接。我已将套接字创建并存储为会话对象，并在页面重定向后保持连接，但只要发生回发（例如单击按钮），连接就会关闭。即使在回发之后，有没有办法保持套接字连接打开，因为要求是整个会话使用单个连接并且重新连接套接字不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:04:20.340

会话状态很脆弱；实际上，如果您使用的是序列化会话状态提供程序（套接字不可序列化），您所描述的甚至都行不通。

所以：与其将*套接字*存储在会话中，不如将套接字放在其他地方——也许是一个同步的字典——并在会话中只存储它的一个*键*。例如：

```
public static class SocketStore
{
    static readonly Dictionary<string, Socket> socketStore
          = new Dictionary<string, Socket>();
    public static string Add(Socket socket)
    {
        if(socket == null) throw new ArgumentNullException("socket");
        string newKey = Guid.NewGuid().ToString();
        lock(socketStore) {
            socketStore.Add(newKey, socket);
        }
        return newKey;
    }
    public static Socket Get(string key)
    {
        if (string.IsNullOrEmpty(key)) throw new ArgumentNullException("key");
        Socket result;
        lock (socketStore)
        {
            if (!socketStore.TryGetValue(key, out result)) result = null;
        }
        return result;
    }
} 
```

在使用中，如果您还没有套接字（/key），请创建您的连接，使用 存储它`Add`，然后将密钥存储在会话中。获取时，您必须处理这种`null`情况，并且您还需要添加自己的同步，以防止来自同一会话的两个并发请求使用同一个套接字（完全合法）。

但是，作为附加说明：

*   您将需要一些额外的过程来清除废弃会话中的旧套接字，以及看起来健康的会话中的僵尸套接字
*   您将需要请求继续返回到同一台服务器 - 如果您在集群中，那么“粘性”负载平衡

# algorithm - 1 TB 数据中出现频率最高的词

> ID：12525455
> 
> 赞同：5
> 
> 时间：2012-09-21T06:41:32.223
> 
> 标签：algorithm, bigdata

我遇到了一个问题，我们必须在 TB 的文件或字符串中找到说最常用的 10 个单词。

我能想到的一种解决方案是使用哈希表（单词、计数）和最大堆。但是，如果单词是唯一的，则拟合所有单词可能会导致问题。我想到了另一种使用 Map-Reduce 的解决方案，方法是在不同的节点上拆分块。另一种解决方案是为所有单词构建一个 Trie，并在我们扫描文件或字符串时更新每个单词的计数。

以上哪一项是更好的解决方案？我认为第一个解决方案非常幼稚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T09:05:28.037

将可用内存分成两半。使用一个作为 4 位[计数布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter#Counting_filters)，另一半作为具有计数的固定大小哈希表。计数布隆过滤器的作用是过滤掉很少出现的具有高内存效率的单词。

对照最初为空的 Bloom 过滤器检查 1 TB 的单词；如果一个词已经存在并且所有的桶都设置为最大值 15（这可能部分或全部是误报），则通过它。如果不是，请添加它。

通过的单词被计算在内；对于大多数单词来说，这是每次看到它们的前 15 次。一小部分将更快地开始计算，从而为您的结果带来每个单词多达 15 次出现的潜在不准确性。这是布隆过滤器的限制。

当第一遍结束时，如果需要，您可以通过第二遍来纠正不准确之处。取消分配布隆过滤器，也取消分配不在第十个最频繁单词后面 15 次出现范围内的所有计数。再次检查输入，这次准确计算单词（使用单独的哈希表），但忽略第一次通过时未保留为近似获胜者的单词。

**笔记**

第一遍中使用的哈希表理论上可能会因输入的某些统计分布（例如，每个单词正好 16 次）或极其有限的 RAM 而溢出。由您来计算或尝试这是否真的会发生在您身上。

另请注意，桶宽度（上述描述中的 4 位）只是构造的一个参数。非计数 Bloom 过滤器（桶宽度为 1）可以很好地过滤掉大多数独特的词，但不会过滤掉其他很少出现的词。更宽的桶大小将更容易在单词之间产生串扰（因为桶会更少），并且它还会降低第一次通过后保证的准确度水平（在 4 位的情况下出现 15 次）。但是这些缺点直到某个时候在数量上是微不足道的，而我认为更积极的过滤效果对于将哈希表保持在非重复的自然语言数据的亚千兆字节大小是完全关键的。

至于布隆过滤器本身的数量级内存需求；[这些人](http://acl.ldc.upenn.edu/D/D07/D07-1049.pdf)的工作量低于 100 MB，并且应用程序更具挑战性（“完整”n-gram 统计，而不是阈值 1-gram 统计）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T09:10:53.293

使用 mergesort 按字母顺序对 TB 文件进行排序。在初始阶段，使用所有可用的物理 RAM 使用快速排序来对长时间运行的单词进行预排序。

这样做时，只用一个这样的单词和一个计数来表示一个连续的相同单词序列。（也就是说，您在合并期间添加计数。）

然后重新使用文件，再次使用带有快速排序预排序的合并排序，但这次是按计数而不是按字母顺序。

这比我的其他答案更慢但更容易实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T07:20:30.323

我能想到的最好的：

1.  将数据拆分为可以存储在内存中的部分。
2.  对于每个部分获得`N`最频繁的单词，您将获得`N * partsNumber`单词。
3.  再次阅读所有数据，计算你之前得到的单词。

它不会总是给你正确的答案，但它会在固定的内存和线性时间内工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-26T10:07:47.743

为什么你认为建造 Trie 结构不是最好的决定？用计数器标记所有子节点，就是这样！最大内存复杂度是 O(26 *longest_word_length)，时间复杂度应该是 O(n)，还不错吧？

# youtube-api - 使用 Youtube Data API 和 AP 崩溃

> ID：12525458
> 
> 赞同：1
> 
> 时间：2012-09-21T06:41:46.880
> 
> 标签：youtube-api

我已经下载了以下路径的示例代码 [http://www.codeproject.com/Articles/143669/Manage-YouTube-using-C-and-Youtube-API-1-6](http://www.codeproject.com/Articles/143669/Manage-YouTube-using-C-and-Youtube-API-1-6)

然后我已经安装了 YouTube_SDK_2.1.0.0.msi 现在我可以成功构建项目，但是当我想在 Youtube 中搜索视频时，videofeed 的 AtomFeed 会返回`Error=NoLinkedYouTubeAccount` 请告诉我发生了什么，我已经调查了几天在网络中。

示例代码列表如下

```
yousettings = new YouTubeRequestSettings("My AP", devkey, username, password);
yousettings.Credentials.AccountType = "GOOGLE";

.........

videofeed = yourequest.Get<Video>(new Uri(feedUrl)); 
```

videofeed 总是会返回失败，然后 Sample Ap 将崩溃，崩溃信息列表如下：

> `Google.GData.Client.GDataRequestException`附加信息中出现 未处理的类型异常 `Google.GData.Client.dll`：请求执行失败： [http ://gdata.youtube.com/feeds/api/standardfeeds/top_rated?time=today](http://gdata.youtube.com/feeds/api/standardfeeds/top_rated?time=today)

笔记：

1.  我已将 Youtube 帐户链接到 Google 帐户。
2.  我尝试修改 yousettings.Credentials.AccountType = "GOOGLE";
3.  FeedUri = "http://gdata.youtube.com/feeds/api/standardfeeds/top_rated?time=today"

# c# - 任务 .等待永远持续

> ID：12525460
> 
> 赞同：3
> 
> 时间：2012-09-21T06:41:59.417
> 
> 标签：c#, .net-4.5

C#，.Net 4.5。我有一个包含要处理的对象的队列。处理包括使用在对象的字段之一中指定的URL获取数据。在操作过程中，可以将新对象添加到队列中。当我尝试使用网络异步进行工作时，我遇到了一个问题。

这是一个最低限度的代码。

```
public partial class Form1 : Form
{
    private void button1_Click(object sender, EventArgs e)
    {
        string[] urls = { "http://www.stackoverflow.com/", 
                            "http://www.google.com/", 
                            "http://www.microsoft.com/" };
        int i = 0;
        Queue<MyClass1> queue = new Queue<MyClass1>();

        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(urls[i]);
        webRequest.Proxy.Credentials = CredentialCache.DefaultCredentials;
        queue.Enqueue(new MyClass1(urls[i], webRequest.GetResponseAsync()));

        while (queue.Count > 0)
        {
            MyClass1 o = queue.Dequeue();
            o.RespTask.Wait();
            Debug.Print("Url: {0}, bytes: {1}", o.Url, 
                o.RespTask.Result.ContentLength);

            i++;
            if (i < urls.Length)
            {
                webRequest = (HttpWebRequest)WebRequest.Create(urls[i]);
                webRequest.Proxy.Credentials = CredentialCache.DefaultCredentials;
                queue.Enqueue(new MyClass1(urls[i], webRequest.GetResponseAsync()));
            }
        } 
    }
}

public class MyClass1
{
    public MyClass1() { }
    public MyClass1(string url, Task<WebResponse> respTask)
    {
        Url = url;
        RespTask = respTask;
    }

    public string Url;
    public Task<WebResponse> RespTask;
} 
```

该代码挂在 o.RespTask.Wait(); 在循环的第三次迭代中。在此调用之前 o.RespTask.Status 具有值 WaitingForActivation 并且等待永远持续。我究竟做错了什么？

更新。我检查了 3 个盒子上的代码。在其中两个（Win7 32 位和 Win7 64 位）上，程序挂起。在第三个（Win7 64 位）上一切正常。在我看来，这很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:41:57.333

经过这样的修改，这段代码不再挂起：

```
...
Debug.Print("Url: {0}, bytes: {1}", o.Url, 
    o.RespTask.Result.ContentLength);

o.RespTask.Result.Close();

i++;
... 
```

我的错误是我没有注意对HttpWebResponse类的Close方法的调用是必须的。

# java - 如何使用itexpdf为pdf添加水印

> ID：12525467
> 
> 赞同：0
> 
> 时间：2012-09-21T06:43:04.743
> 
> 标签：java, itextpdf

我正在使用以下代码生成 pdf 文件，一切正常，但我需要在 pdf 文件中添加水印，还需要为 pdf 表中生成的行添加颜色。

```
response.setHeader("Content-disposition", "attachment; filename=\"" + reportName + ".pdf\"");
        response.setContentType("application/pdf");
        PdfWriter.getInstance(document,response.getOutputStream());

        try {
            document.open();
            addTitlePage(document, reportName,path);

           /* Image image = Image.getInstance(path+"images/abi.png");
            image.setAbsolutePosition(40f, 770f);
            image.scaleAbsolute(70f, 50f);
            document.add(image);*/

            //float[] colsWidth = {1.5f,3f,4f,4f,2f};

            List<Float> colsWidth = new ArrayList<Float>();
            int iterator = 1;
           while (iterator <= headerMap.size()) {
               if(iterator==1){
                   colsWidth.add(1.5f); 
               }else{
                colsWidth.add(3f); 
               }
                iterator++;
            }
           float[] floatArray = ArrayUtils.toPrimitive(colsWidth.toArray(new Float[0]), 0.0F);

           PdfPTable table = new PdfPTable(floatArray);
            table.setWidthPercentage(98);
            table.setHorizontalAlignment(Element.ALIGN_CENTER);

            PdfPCell c1 = new PdfPCell();
            for (Iterator it = headerMap.keySet().iterator(); it.hasNext();) {
                String headerName = (String) headerMap.get(it.next());
                c1 = new PdfPCell(new Phrase(headerName, headerFont));
                c1.setBackgroundColor(BaseColor.LIGHT_GRAY);
                table.addCell(c1);
            }
            table.setHeaderRows(1);
            table = custDAO.creadPDFTable(query, table);
            document.add(table);
            document.addAuthor(userViewModel.getUsername());
            document.addCreationDate();
            document.addCreator("POC");
            document.close();
            response.flushBuffer();
private static void addTitlePage(Document document, String reportName,String path) throws DocumentException, MalformedURLException, IOException {
        Paragraph preface = new Paragraph();
        addEmptyLine(preface, 1);
        /**
         * Lets write a big header
         */
        Paragraph paragraph = new Paragraph(reportName, titleFont);
        paragraph.setAlignment(Element.ALIGN_CENTER);
        document.add(paragraph);

        /**
         * Add one empty line
         */
        addEmptyLine(preface, 1);
        document.add(preface);
        Image image = Image.getInstance(path+"/"+"/abilogo.PNG");
        image.setAbsolutePosition(40f, 770f);
        image.scaleAbsolute(70f, 50f);
        document.add(image);

    }
    private static void addEmptyLine(Paragraph paragraph, int number) {
        for (int i = 0; i < number; i++) {
            paragraph.add(new Paragraph(" "));
        }
    } 
```

这是我用来创建的方法`pdftable.(rows)`

```
public PdfPTable creadPDFTable(String query,PdfPTable table){
        int numberOfColumns=0,sno=1;
        Connection connection = getConnection();
        if (connection != null) {
            try {
                PreparedStatement reportTablePS = connection.prepareStatement(query);
                ResultSet reportTable_rst = reportTablePS.executeQuery();
                ResultSetMetaData reportTable_rsmd = reportTable_rst.getMetaData();
                numberOfColumns = reportTable_rsmd.getColumnCount();
                while (reportTable_rst.next()) {
                    table.addCell(new PdfPCell(new Paragraph(String.valueOf(sno), textFont)));
                            for (int columnIterator = 1; columnIterator <= numberOfColumns; columnIterator++) {
                                 String column = reportTable_rst.getString(columnIterator);
                                 table.addCell(new PdfPCell(new Paragraph(column, textFont)));
                            }
                            sno++;
            }
            } catch (Exception ex) {
                ex.printStackTrace();
            }finally {
                try {
                    closeConnection(connection, null, null);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        }
        return table;
    } 
```

我主要关心的是添加水印并为行添加替代颜色。

请帮助解决这个问题，因为我很长时间无法解决这个问题。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T11:57:33.537

如果您想添加水印作为图像，您可以使用下面的代码。添加文本水印的另一种方法是使用注释。

```
PdfReader pdfReader = null;
    Stream outputStream = null;
    PdfStamper pdfStamper = null;

    try
    {
        pdfReader = GetPdfReaderObject();
        outputStream = new FileStream(filePathDestination, FileMode.Create, FileAccess.Write, FileShare.None);
        pdfStamper = new PdfStamper(pdfReader, outputStream);

            PdfLayer layer = new PdfLayer("watermark", pdfStamper.Writer);

            for (int pageIndex = 1; pageIndex <= pdfReader.NumberOfPages; pageIndex++) {
                pdfStamper.FormFlattening = false;
                iTextSharp.text.Rectangle pageRectangle = pdfReader.GetPageSizeWithRotation(pageIndex);
                PdfContentByte pdfData = pdfStamper.GetOverContent(pageIndex);

                pdfData.BeginLayer(layer);

                PdfGState graphicsState = new PdfGState();
                graphicsState.FillOpacity = 0.5F;
                pdfData.SetGState(graphicsState);
                pdfData.BeginText();

                iTextSharp.text.Image watermarkImage = iTextSharp.text.Image.GetInstance(System.Drawing.Image.FromFile(watermarkImagePath), ImageFormat.Png);

                float width = pageRectangle.Width;
                float height = pageRectangle.Height;

                watermarkImage.SetAbsolutePosition(width / 2 - watermarkImage.Width / 2, height / 2 - watermarkImage.Height / 2);

                pdfData.AddImage(watermarkImage);
                pdfData.EndText();
                pdfData.EndLayer();
            }
        }
        pdfStamper.Close();
        outputStream.Close();
        outputStream.Dispose();
        pdfReader.Close();
        pdfReader.Dispose();

    } catch (Exception e) {
        ....
    }
} 
```

如果要添加其他水印，请不要忘记删除水印。

# c# - 如何将参数从 javascript 传递到通用处理程序？

> ID：12525469
> 
> 赞同：2
> 
> 时间：2012-09-21T06:43:28.327
> 
> 标签：c#, javascript, asp.net

我从下面给出的javascript代码中调用了通用处理程序（ashx）；

```
var xmlHttpReq = createXMLHttpRequest();
            xmlHttpReq.open("GET", "hndlrCars.ashx, false);
            xmlHttpReq.send(null);
            xmlText = xmlHttpReq.responseText; 
```

但我必须将参数（下拉选择值）从 .aspx 传递给通用处理程序的“ProcessRequest”方法。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T06:44:53.507

您可以将其作为查询字符串参数传递：

```
var value = ...
xmlHttpReq.open('GET', 'hndlrCars.ashx?value=' + encodeURIComponent(value), false); 
```

并在处理程序内部从请求中检索它：

```
public void ProcessRequest(HttpContext context)
{
    string value = context.Request["value"];
    ...
} 
```

# c# - regasm.exe 不是有效的 win32 应用程序

> ID：12525472
> 
> 赞同：3
> 
> 时间：2012-09-21T06:43:43.057
> 
> 标签：c#, asp.net, visual-studio-2010

我想在网络上使用 Windows 应用程序，我找到了一篇文章，我在下面发布链接

[http://www.codeproject.com/Articles/14276/Using-Windows-Application-on-web](http://www.codeproject.com/Articles/14276/Using-Windows-Application-on-web)

在上面的文章中，我在第 10 步附近面临问题，其中指出：“现在通过使用“regasm.exe”创建 dll 的 CLSID 并将其放置在注册表中，exe 文件位于“C:\ WINDOWS\Microsoft.NET\Framework\v1.1.4322\"."

当我尝试从命令提示符访问 regasm.exe 时，我得到错误为“regasm.exe 不是有效的 win32 应用程序”

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T13:45:22.457

重新安装（修复）.NET Framework 4 有所帮助。（在这里找到：[http](http://social.msdn.microsoft.com/Forums/en-US/de1b5f77-8171-42b5-b8a4-2cf5611d06cf/regasmexe-is-not-a-valid-win32-application?forum=netfxtoolsdev) ://social.msdn.microsoft.com/Forums/en-US/de1b5f77-8171-42b5-b8a4-2cf5611d06cf/regasmexe-is-not-a-valid-win32-application?forum=netfxtoolsdev ）

# iphone - NSUserDefaults 或钥匙串更好地在 iPhone 应用程序中保存用户名和密码

> ID：12525474
> 
> 赞同：18
> 
> 时间：2012-09-21T06:43:45.960
> 
> 标签：iphone, nsuserdefaults, keychain

在我的 iphone 应用程序中，有一些机密数据，例如用户名、密码和一些网络服务的 url。哪一个更好 NSUserdefaults 或钥匙串。有人说 NSUserdefaults 不安全。为什么不安全？任何人都可以给出每种方法的优缺点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-21T06:51:15.157

NSUserDefaults 非常易于使用，每个键只存储一个值。但显然，这不是一种非常安全的方法，因为没有加密。

但是钥匙串是安全的，尽管它有点难以编码。您可以参考这些链接以使用钥匙串访问。

[http://log.scifihifi.com/post/55837387/simple-iphone-keychain-code](http://log.scifihifi.com/post/55837387/simple-iphone-keychain-code)

你也可以使用 Simon 设计的这个库

[https://github.com/goosoftware/GSKeychain](https://github.com/goosoftware/GSKeychain)

希望对你有帮助！！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-12T08:53:20.220

请注意，即使您的应用程序被删除，钥匙串数据仍将保留，但 NSUserDefaults 数据将随应用程序一起消失（NSUserDefaults 是应用程序沙箱的一部分，钥匙串是独立于应用程序的服务）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-21T06:47:19.623

NSUserDefaults 中存储的任何内容都可以（相对）轻松地打开和读取，无论是在设备上还是在（非加密）备份到 iCloud 或同步的 Mac 中。

[另一方面，钥匙串适用于证书和密码之类的东西](http://software-security.sans.org/blog/2011/01/05/using-keychain-to-store-passwords-ios-iphone-ipad/)。我已经链接了一篇题为“如何不在 iOS 中存储密码”的文章，该文章也提供了更多有用的细节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T06:47:34.260

Keychain 是更好的解决方案，因为它更安全，但无论如何，如果您将此类信息保存到 NSUserDefaults 中，您的用户不会有任何不同。如果有人入侵他们的设备，他们可以从 Keychain 获取信息，就像从 UserDefaults 获取信息一样。所以这个安全问题是夸夸其谈。但无论如何，好的编程风格是将这些数据保存到 Keychain 中！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T06:52:09.640

我建议您使用钥匙串。使用钥匙串，您可以以加密形式存储您的密码。看看 Apple 的[GenericKeychain](https://developer.apple.com/library/ios/#samplecode/GenericKeychain/index.html)示例。

与 Keychain 相比，NSUserDefaults 的安全性稍差一些。在 NSUserDefaults 中，如果特定键已知，则可以轻松访问数据。这不是钥匙串的情况。

**您还可以将 NSUserDefaults 转换为钥匙串。看看** [这里](https://stackoverflow.com/questions/2869242/converting-nsuserdefaults-to-keychain)。

# datagridview - 在gridview中使用linkbutton并将数据输出到jquery模态表单

> ID：12525475
> 
> 赞同：1
> 
> 时间：2012-09-21T06:43:46.163
> 
> 标签：datagridview, jquery-dialog, linkbutton

我有一个与数据库链接的gridview。网格视图中的数据（用户名（链接按钮）、电子邮件、地址和邮政编码）。所以，我想要的是当我点击其中一个用户名时，用户的详细信息将显示在 jquery 模态表单中。我怎么做？

# java - 使用 JasperReports 在报告中添加超链接

> ID：12525476
> 
> 赞同：0
> 
> 时间：2012-09-21T06:43:47.003
> 
> 标签：java, jsp, jasper-reports, scriptlet

我设计了带有超链接功能的*iReport的**jrxml*，但它不起作用（报告正在显示，但超链接不起作用）。

 *我正在使用这个*jsp*页面来显示报告：

```
<%
    //JasperPrint jasperPrint = (JasperPrint)session.getAttribute(ImageServlet.DEFAULT_JASPER_PRINT_SESSION_ATTRIBUTE);

    String filepath1 = request.getParameter("filepath"); 
    System.out.println("filepath:" + filepath1);
    String reportFile = filepath1;
    JasperDesign jasperDesign = JRXmlLoader.load(reportFile);
    JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);
    java.util.Map<String, Object> params = new java.util.HashMap<String, Object>();
    DateFormat formatter;
    Date date, endDate;   
    formatter = new SimpleDateFormat("dd-mm-yyyy");
    date = formatter.parse("11-08-2012");
    endDate = formatter.parse("13-08-2012");
    HashMap<String, Object> values = new HashMap<String, Object>();

        values.put("camp", "tps1"); 
    JdbcTemplate myJdbcTemplate = null;
    net.sf.jasperreports.engine.JasperPrint jasperPrint = null;
    try {
        myJdbcTemplate = DaoFactory.getJdbcTemplate();
        if (myJdbcTemplate == null) {
        }
        //new apps.dbase.DBaseLink().OpenLink()
        jasperPrint = net.sf.jasperreports.engine.JasperFillManager.fillReport(jasperReport, values, myJdbcTemplate.getDataSource().getConnection());
        session.setAttribute("jasperprint", jasperPrint);
        java.io.PrintWriter printWriter = response.getWriter();
    } catch (Exception e) {
        e.printStackTrace();
    }
    if (request.getParameter("reload") != null || jasperPrint == null) {

        values = new HashMap<String, Object>();
        values.put("camp", "tps1");       
        jasperPrint = net.sf.jasperreports.engine.JasperFillManager.fillReport(jasperReport, values, myJdbcTemplate.getDataSource().getConnection());
        session.setAttribute(ImageServlet.DEFAULT_JASPER_PRINT_SESSION_ATTRIBUTE, jasperPrint);
    }

    JRHtmlExporter exporter = new JRHtmlExporter();

    int pageIndex = 0;
    int lastPageIndex = 0;
    if (jasperPrint.getPages() != null) {
        lastPageIndex = jasperPrint.getPages().size() - 1;
    }

    String pageStr = request.getParameter("page");
    System.out.println("page::" + pageStr);
    try {
        pageIndex = Integer.parseInt(pageStr);
    } catch (Exception e) {
    }

    if (pageIndex < 0) {
        pageIndex = 0;
    }
    System.out.println("pageindex::" + pageIndex);
    System.out.println("lastpage::" + lastPageIndex);

    if (pageIndex > lastPageIndex) {
        pageIndex = lastPageIndex;
    }
     JasperExportManager.exportReportToHtmlFile(jasperPrint,"/home/tulsi/Desktop/hi.html");
    StringBuffer sbuffer = new StringBuffer();
    PrintWriter out1 = response.getWriter();
    exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
    exporter.setParameter(JRExporterParameter.OUTPUT_STRING_BUFFER, sbuffer);
    //exporter.setParameter(net.sf.jasperreports.engine.JRExporterParameter.OUTPUT_WRITER, printWriter);
    exporter.setParameter(JRHtmlExporterParameter.IMAGES_URI, "../servlets/image?image=");
    exporter.setParameter(JRExporterParameter.PAGE_INDEX, Integer.valueOf(pageIndex));
    exporter.setParameter(JRHtmlExporterParameter.HTML_HEADER, "");
    //exporter.setParameter(JRHtmlExporterParameter.BETWEEN_PAGES_HTML, "");
    exporter.setParameter(JRHtmlExporterParameter.HTML_FOOTER, "");

    exporter.exportReport();

%>

<html>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <head>
        <script>
            $("a#first").click(function() {
                var i1 = "0" ;
                var f =  $("input#filepath").val();

                $.ajax({
                    url: "viewer.jsp",
                   data:"page="+i1+"&filepath="+f ,
                    success: function(data){
                        $("#please").html(data);
                    }
                });
            });
            $("a#prev").click(function() {
                var i1 = $("input#pageIndex").val();
                var f =  $("input#filepath").val();
                i1 = parseInt(i1) - 1 ;

                $.ajax({
                    url: "viewer.jsp",
                   data:"page="+i1+"&filepath="+f ,
                    success: function(data){
                        $("#please").html(data);
                    }
                });

            });
            $("a#next").click(function() {

                var i1 = $("input#pageIndex").val();
                var f =  $("input#filepath").val();
                i1 = parseInt(i1) + 1 ;

                $.ajax({
                    url: "viewer.jsp",
                    data:"page="+i1+"&filepath="+f ,
                    success: function(data){
                        $("#please").html(data);
                    }
                });
            });
            $("a#last").click(function() {
                var i1 =  $("input#lastIndex").val();
                var f =  $("input#filepath").val();

                $.ajax({
                    url: "viewer.jsp",
                   data:"page="+i1+"&filepath="+f ,
                    success: function(data){
                        $("#please").html(data);
                    }
                });
            });
        </script>
    </head>
    <body text="#000000" link="#000000" alink="#000000" vlink="#000000">
        <div id="please" >
            <input type="hidden" id="pageIndex" value="<%=pageIndex%>" >
            <input type="hidden" id="lastIndex" value="<%=lastPageIndex%>" >
            <input type="hidden" id="filepath" value="<%=reportFile%>" >
            <%
                System.out.print("in ::" + pageIndex);
                if (pageIndex > 0) {
                    System.out.print("in if ");
            %>

            <a href="#"  id="first"  ><img alt="first" src="images/first.png" border="0"></a>
            <a href="#" id="prev"  ><img alt="pre" src="images/prev.png" border="0"></a></td>
                <%
                } else {
                    System.out.print("in else ");
                %>
        <img alt="first" src="images/first.png" border="0">
        <img alt="prev"  src="images/prev.png" border="0">
        <%
            }
            if (pageIndex < lastPageIndex) {
        %>
        <a  href="#" id="next" ><img alt="next" src="images/next.png" border="0"></a></td>
    <a href="#"  id="last"  ><img alt="last" src="images/last.png" border="0"></a></td>
        <%        } else {
        %>
<img alt="next" src="images/next.png" border="0">
<img alt="last" src="images/last.png" border="0">
<%    }
%>
<table  style=" width:200; border-style: solid; border: 1px; border-color: blue; "  >
    <tr><a href="DownloadAll?type=csv&filepath=<%= reportFile%>"  ><button> CSV</button></a></tr>
  <tr><a href="DownloadAll?type=pdf&filepath=<%= reportFile%>"  > <button>PDF</button></a></tr>
  <tr><a href="DownloadAll?type=xls&filepath=<%= reportFile%>"  > <button>XLS</button></a></tr>
  <tr><a href="DownloadAll?type=docx&filepath=<%= reportFile%>"  ><button>DOCX</button></a></tr>
</table>
<div>
    <%=sbuffer.toString()%>
</div>
</div>
</body>
</html> 
```

我认为问题出在***jasperPrint***对象中。

请指导我如何添加超链接功能。*

# internationalization - 检票口国际化：多个页面的多个属性文件？

> ID：12525477
> 
> 赞同：6
> 
> 时间：2012-09-21T06:43:53.853
> 
> 标签：internationalization, wicket

可用的 wicket 国际化示例具有以下文件结构

```
HomePage.java
HomePage.html
HomePage.properties
WicketApplication.java
HomePage_nl.properties 
```

现在，当创建具有多个 HTML 页面的项目时，例如我有 HomePage.html 和 Login.html，有没有一种方法可以将所有键值对保存在特定语言的单个属性中，或者我必须创建所有这些文件

```
HomePage.properties
HomePage_nl.properties
Login.properties
Login_nl.properties 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T08:06:46.597

Wicket 将尝试使用以下规则查找消息资源：

1.  *Wicket*将尝试查找从 开始的消息，`Page`并`Component`通过. 请注意，这是**自上而下的**搜索。*`Page`*

****   当在组件层次结构中找不到消息时，将在`Application`类中查找它。*** 

 ***在每个类中查找资源的方式如下：

1.  本地化搜索将语言环境附加到文件名 ( `Login_nl.properties`, then `Login.properties`)，就像 Java 的[`ResourceBundle`那样](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html#getBundle(java.lang.String,%20java.util.Locale,%20java.lang.ClassLoader))。

2.  **自下而上**通过*类层次结构*。这意味着如果在类中找不到资源，则会在其超类中一直搜索它，直到找到`java.lang.Object`.

因此，在您的特定情况下，如果`Login`是`Panel`inside `HomePage`，您只需在`HomePage(_nl).properties`. 此外，如果有特定的应用程序范围的消息，请记住您可以在`WicketApplication(_nl).properties`.

您可能会发现以下 Wicket wiki 页面：[关于 Wicket 国际化的一切](https://cwiki.apache.org/confluence/display/WICKET/Everything+about+Wicket+internationalization)有用的信息，它详细说明了这个问题。

> *（...）*。这可以通过首先查找组件层次结构（也称为页面层次结构）中每个父级的消息（按照上面的算法）来促进。每个组件都可以覆盖其子组件的消息，因此搜索从页面的属性开始，然后向下渗透到使用它的组件（是的，自上而下）。为了使覆盖特定于某个子组件，您可以在消息键前面加上子组件的 ID。有关详细信息，请参阅 ComponentStringResourceLoader。
> 
> 如果在页面层次结构中未找到消息，则会开始另一个搜索，该搜索将查看您的应用程序类及其超类。因此，Wicket 首先查看 MyApplication.properties（假设 MyApplication 是您的应用程序的名称），然后查看类层次结构，将 org.apache.wicket.Application 传递到 java.lang.Object。这就是 Wicket 提供许多默认 i18n 文本的方式。***

# c# - 使用 ListBox 过滤 Datagrid

> ID：12525480
> 
> 赞同：0
> 
> 时间：2012-09-21T06:43:57.690
> 
> 标签：c#, wpf, datagrid, checkbox, listbox

我有一个 ListBox 和一个 DataGrid，DataGrid 显示供应商提供的报价，而 ListBox 显示供应商列表。我想要实现的是选中/取消选中供应商列表中的供应商并过滤 DataGrid，这样 DataGrid 将只显示在 ListBox 中选中的供应商的报价。

我现在面临的困难是，

我有一个唯一的供应商列表

```
class Supplier
{
    bool IsChecked {get; set;}
    Person Supplier {get; set;}

}

ObservableCollections<Supplier> SupplierList; 
```

我有一份报价单

```
class Quote
{
    double Price {get; set;}
    Supplier Supplier{get; set;}
    Quote(double price, Supplier supplier)
    {
         Price = price;
         Supplier = supplier;
    }
}

ObservableCollections<Quote> QuoteList; 
```

QuoteList 绑定到DataGrid，而SupplierList 绑定到ListBox。

当我在 ListBox 中勾选/取消勾选 SupplierList 时，可以同时更改 Quote 中的 Suppliers 吗？以及如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:27:34.033

在这种情况下，您不需要生成 ObservableCollection，您不会被锁定为拥有一个物理列表而不仅仅是一个查询。

我建议您引入一个 SupplierQuoteQuery 类（有关 ViewModels 的更多信息，请参阅[MVVM 模式](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)）来支持此视图，它需要实现 INotifyPropertyChanged 以便您可以在过滤列表更改时提供建议。

当您的 IsChecked 更改时，您需要以某种方式通知 SupplierQuoteQuery 类，这应该会导致为新的 Property FilteredQuotes 调用 PropertyChanged。

```
public IEnumerable<Quote> FilteredQuotes { get {
  return from x in Quotes where x.Supplier.IsChecked select x; } } 
```

# c# - 实体框架，需要参考的奇怪行为，延迟加载

> ID：12525482
> 
> 赞同：0
> 
> 时间：2012-09-21T06:44:11.093
> 
> 标签：c#, entity-framework, ef-code-first

这适用于实体框架 4 (4.3.1) 和 5。

我有一个 User 类（与我的 Entity Framework MembershipProvider 一起使用）。为了简化，我删除了一些属性。实际的 User 来自 MVCBootstrap 项目，因此它与其他类不属于同一程序集。

```
public class User {
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid Id { get; set; }
    [Required]
    [StringLength(256)]
    public String Username { get; set; }
} 
```

然后我有这堂课：

```
public class NewsItem {
    public Int32 Id { get; set; }
    [Required]
    [StringLength(100)]
    public String Headline { get; set; }
    [Required]
    public virtual User Author { get; set; }
    [Required]
    public virtual User LastEditor { get; set; }
} 
```

然后我创建数据库上下文（用户的 DbSet 在 MembershipDbContext 中）：

```
public class MyContext : MVCBootstrap.EntityFramework.MembershipDbContext {
    public MyContext(String connectString) : base(connectString) { }
    public DbSet<NewsItem> NewsItems { get; set; }
} 
```

在创建数据库时运行此代码会给我这个异常：

> 在表“WebShop”上引入 FOREIGN KEY 约束“FK_dbo.WebShop_dbo.User_LastEditor_Id”可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。无法创建约束。请参阅以前的错误。

所以我改变了数据库上下文：

```
public class MyContext : MVCBootstrap.EntityFramework.MembershipDbContext {
    public MyContext(String connectString) : base(connectString) { }
    public DbSet<NewsItem> NewsItems { get; set; }
    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Configurations.Add(new NewsItemConfiguration());
    }
} 
```

而这个配置：

```
public class NewsItemConfiguration : EntityTypeConfiguration<NewsItem> {
    public NewsItemConfiguration() {
        HasRequired(n => n.Author).WithOptional();
        HasRequired(n => n.LastEditor).WithOptional();
    }
} 
```

或者这是错的？

无论如何，当我运行代码时，会创建数据库，并且数据库看起来还可以（查看外键约束等）。

但是，然后我从上下文中获取 10 个最新的 NewsItem，并开始将它们加载到视图模型中，其中一部分是访问 NewsItem 上的 Author 属性。执行此操作的控制器需要永远加载，并且在很长一段时间后会失败。在调试模式下运行时，我在这段代码中得到一个异常：`this.AuthorId = newsItem.Author.Id;`，然后我得到的异常是这样的：

> 发生关系多重性约束违规：EntityReference 不能有多个相关对象，但查询返回多个相关对象。这是一个不可恢复的错误。

这可能是我做错了一些简单而愚蠢的事情，我确定我已经在多个站点上运行了类似的代码，所以..是什么原因造成的？我的模型错了吗，是数据库上下文，还是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:55:32.577

这部分

> 在表“WebShop”上引入 FOREIGN KEY 约束“FK_dbo.WebShop_dbo.User_LastEditor_Id”可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。无法创建约束。请参阅以前的错误。

实际上是 SQL Server 问题（以及许多其他 RDBMS 的问题）。解决多个级联路径是一个复杂的问题，SQL Server 决定只是放弃而不尝试。看

[外键约束可能导致循环或多个级联路径？](https://stackoverflow.com/questions/851625/foreign-key-constraint-may-cause-cycles-or-multiple-cascade-paths)

您试图将模型配置为在删除 NewsItem 时删除子 Author 和 LastEditor 对象。SQL Server 不会这样做。

*想一想……这就是你想要的吗？* 看来您希望取消 Author 和 LastEditor 与 NewsItem 的关联，而不是从数据库中删除它们。

您的对象模型需要 NewsItem 和 Author 之间以及 NewsItem 和 LastEditor 之间的 1:1 关系。我不确定*这*在代码中指的是什么

```
this.AuthorId = newsItem.Author.Id; 
```

但在我看来，你应该反过来做任务，例如

```
newsItem.Author = myAuthorInstance; 
```

或者，如果您在模型中包含外键属性，并且您之前保存了作者实例并具有 Id：

```
newsItem.AuthorId = myAuthorInstance.Id; 
```

如果您共享生成的数据库架构（相关部分），这将更容易诊断问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:09:27.007

用户可以是多个新闻项目的作者。此外，用户可以是多个新闻项目的编辑。
因此，关系必须是“一对多”：

```
public class NewsItemConfiguration : EntityTypeConfiguration<NewsItem> {
    public NewsItemConfiguration() {
        HasRequired(n => n.Author).WithMany();
        HasRequired(n => n.LastEditor).WithMany();
    }
} 
```

# android - 如何创建一个线程以 3 秒间隔刷新数据

> ID：12525484
> 
> 赞同：0
> 
> 时间：2012-09-21T06:44:35.623
> 
> 标签：android

我需要一个线程（它执行 httppost，并在 3 秒间隔内解析答案 xml 并刷新列表视图以设置从解析的 xml 的更改）

我已经尝试过这段代码

定时器 timer = new Timer(); timer.scheduleAtFixedRate(

```
 new TimerTask() {

        public void run() {

            try {

                httpPostList(url);
                saxParseList();
                                    list.invalidateViews();

                Thread.sleep(1000);

            } catch (Exception ie) {

            }

        }

    }, 1000, 1000 * 30); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:49:45.517

感谢您创建一个包含 AsyncTask 的服务。异步任务是普通 Java 任务的 Android 同义词，可在此处找到文档：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

服务是后台进程，看到这个文档：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:42:20.737

最后我使用“异步任务”完成了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:55:49.113

尝试使用处理程序：

```
 Handler handler;

 @Override
 public void onCreate(Bundle savedInstanceState) {
     // ...
     handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            updateUI();
        }
    };

    Thread thread = new Thread() {
        @Override
        public void run() {
            while(true) {
                Message msg = new Message();
                handler.sendMessage(msg);
                try {
                    sleep(3*1000); // 3 seconds
                } catch (InterruptedException e) {
                }
            }                       
        }
    };
    thread.start();
 }

 private synchronized void updateUI() {
     // ...
 } 
```

# javascript - 到达页面末尾时（滚动时）如何将固定 div 向上移动 200px？

> ID：12525486
> 
> 赞同：0
> 
> 时间：2012-09-21T06:44:45.580
> 
> 标签：javascript, jquery, html, css, position

我有一个包含两列（侧边栏）的页面。

左边是固定的（包含谷歌广告），即使我向下滚动页面也保持不变。

右侧包含帖子并且相对定位，因此可以滚动。

但是我在右栏（侧边栏）之后有一个页脚。

此页脚的宽度为页面的 100%。

问题是当我滚动到底部时，页脚会转到左侧边栏。

**当我向下滚动时从页面末尾到达 200px 时，我想将左侧边栏 200px 移动到顶部。**

并在滚动回到顶部时返回。

```
<div id="main">
    <div id="left">Google Ads here</div>
    <div id="right">Content posts here</div>
</div>
<div id="footer">
    footer here
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:16:15.560

您可以使用 jQuery 滚动。大多数网站都使用它来为其网站加载内容。

```
 $(window).scroll(function(){  

        if($(window).scrollTop() + $(window).height() >= $(document).height() - 200){
            setLeftBarPosition();
        }
    });

   function setLeftBarPosition(){
    // your code to set position of lefftbar

  } 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-21T06:54:48.520

您可以使用纯 CSS 而不是 javascript 来做到这一点。

阅读[本文](http://davidwalsh.name/css-fixed-position)了解详情。演示[在这里](http://davidwalsh.name/demo/css-fixed-position.php)

# asp.net-mvc-3 - 在 ASP.NET MVC 3 中注册 HttpHandler 并获得 404 Not Found 错误

> ID：12525488
> 
> 赞同：2
> 
> 时间：2012-09-21T06:44:52.277
> 
> 标签：asp.net-mvc-3, web-config, httphandler

我为测试目的制作了一个自定义处理程序，如下所示：

```
namespace MVCHttpHandlerProject
{
    public class SomeHandler : IHttpHandler
    {
        public bool IsReusable
        {
            get { return true; }
        }

        public void ProcessRequest(HttpContext context)
        {
            context.Response.Write("SomeHandler test");
        }
    }
} 
```

然后我添加到我的**web.config**下一行：

`<httpHandlers> <add path="SomeHandler.axd" verb="*" type="MVCHttpHandlerProject.SomeHandler, MVCHttpHandlerProject" /></httpHandlers>`

并且在`<system.webServer>`

`<handlers> <add path="SomeHandler.axd" verb="*" type="MVCHttpHandlerProject.SomeHandler, MVCHttpHandlerProject" name="SomeHandler.axd"/> </handlers>`

`routes.IgnoreRoute("{resource}.axd/{*pathInfo}");`我的 Global.asax.cs 没有被修改，看起来与在 RegisterRoutes 方法中生成时完全相同。

不过，当我尝试访问“http://localhost/Home/SomeHandler.axd”时，会出现“*找不到资源*”错误。为什么？我错过了什么？我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:49:38.703

您应该请求`http://localhost/SomeHandler.axd`而不是`http://localhost/Home/SomeHandler.axd`. 没有`Home`。

# visual-c++ - 如何使用 Visual C++ 中缺少的 .dsw 文件编译项目

> ID：12525497
> 
> 赞同：1
> 
> 时间：2012-09-21T06:46:00.327
> 
> 标签：visual-c++

我是 Vc++ 的新手，在尝试编译项目时我无法找到 .dsw 文件，不知何故我需要重新创建一个 .dsw 文件以便我可以编译项目，如何做到这一点，我是否需要将所有文件添加到新工作区并重新创建它或任何其他方式来实现这一点。请提出一种实现这一点的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:59:46.677

DSW 文件扩展名是一个工作区文件，它包含 Microsoft Visual ++ 开发软件的工作区设置。

如果您错过了这个文件，那么您应该创建新的工作区并将文件添加到其中。

# php - Mysql外键约束，删除时更新（分配所有链接到另一个）

> ID：12525501
> 
> 赞同：3
> 
> 时间：2012-09-21T06:46:27.033
> 
> 标签：php, mysql, foreign-key-relationship

我可能从错误的角度来处理问题，所以如果我的技术有误，请纠正我。

我正在使用 php 在网站上创建来宾用户。当有人访问该网站时，会自动创建一个访客用户。但是，如果该人登录到“普通”帐户（非访客），那么该人在访客帐户中所做的任何事情都会转移到新帐户。

例如，有人未经身份验证就访问了一个网站，将商店中的产品添加到他的购物车中，然后登录。我需要将购物车中的物品从旧用户（客人）转移到新用户。

但是，在与来宾用户帐户链接的每个表中查找每个项目然后全部更改它们将太耗时（并且可能太耗费资源）。对？

但是我有限制！耶！如果我更新来宾用户 ID，所有约束都会改变。极好！**但是如果我需要将它们分配给另一个用户 ID 怎么办？我该怎么做？**

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:53:32.367

我正在使用会话数组来管理它，以前我是通过数据库表来做的，但是太繁琐了。

当用户将任何产品添加到购物车时，如果他已登录，则插入订单表，如果没有，则添加会话数组。现在，当客人登录系统时，检查会话数组，如果它不为空，则在用户订单表中添加所有条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:51:49.703

您不能完全按照您的建议进行操作，因为用户行（对于登录用户）可能已经存在。唯一的选择是遍历每个表并在那里更新 UserID，就像你建议的那样。这样做的可行性取决于他们作为来宾用户可以做什么。如果只有一两张桌子，就这样吧。

但是，每个问题都可以通过另一层抽象来解决，对吧？在真实用户表和其他所有表之间放置另一个表（我将其称为“伪用户”）。将其他所有内容链接到这个新表，并使用“伪用户”链接到用户表。当来宾用户登录时，只需更改 pseudousers 表中的 UserID 即可。

我的意思是：

```
+---------+ +------------+ +--------+
| 用户|----|伪用户|----| 推车 |
+---------+ +------------+ +--------+
                   |            
                   | +-------+
                   |------------| ... |
                                +-------+

```

创建来宾用户时，会在用户和伪用户中创建一个新行。当他们登录时，更新 Pseudousers 中的 UserID 以指向该用户，然后您可以安全地删除 Users 中的来宾用户行（它不再使用）。

希望有人能想出一个比“伪用户”更好的名字。

# jquery - 错误的元素在单击时关闭列表

> ID：12525503
> 
> 赞同：0
> 
> 时间：2012-09-21T06:47:04.990
> 
> 标签：jquery, list, click, slidetoggle

我有这个代码：http: [//jsfiddle.net/xFxD3/1/](http://jsfiddle.net/xFxD3/1/)

但是当单击“li”元素时，列表会关闭。只有当您单击“跨度”元素之一时，它才应该关闭（单击此处 1，单击此处 2）。

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:49:47.667

尝试这个

```
$('.test').click(function() { 
    $(this).parent().find('.toggle').slideToggle("fast");
});
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:52:08.093

点击绑定在父`<li>`标签而不是`<span>`标签上。

这是更新的小提琴[http://jsfiddle.net/xFxD3/3/](http://jsfiddle.net/xFxD3/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:56:28.673

尝试这个

```
$('.test').click(function() { 
    $(this).next('.toggle').slideToggle("fast");
}); 
```

JSfiddle [http://jsfiddle.net/xFxD3/1/](http://jsfiddle.net/xFxD3/1/) ​</p>

# c# - AJAX 面板不适用于初始全局 RouteTable

> ID：12525505
> 
> 赞同：0
> 
> 时间：2012-09-21T06:47:06.837
> 
> 标签：c#, asp.net, ajax, routing

**操作系统：** Windows 7 Home Premium
**编译器：** Visual Studio 2012
**语言：** ASP.net C# 4
**附加说明：**使用`Master`带有脚本管理器的页面。`Content`页面有面板`AJAX`。

在我的`Global.asax`中，我有一个路由这些地址的路由表：

```
//Site
routes.MapPageRoute("", "{address}", "~/{address}.aspx");   
routes.MapPageRoute("", "{address}/{resource}", "~/{address}/{resource}.aspx"); 
```

这允许我剪掉页面的 .aspx 部分，并使 URL 看起来更令人愉悦。

当我第一次运行我的站点时（重新启动编译 PC 后），所有`AJAX`面板都停止工作。任何自动完成扩展器、按钮、文本框等都会失去它们的`AJAX`能力。

我意识到这是问题所在，所以我编辑了上面的代码。正如预期的那样，该站​​点恢复了自身以解决该`AJAX`问题。

但是，在前面的解决方案之后，我没有编辑第一段代码，却发现我所有的`AJAX`面板仍然可以工作。所以，我真的必须注释掉代码，重新加载网站，然后取消注释页面的代码才能开始工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:59:38.240

您需要添加一个管理资源扩展的路由。

以下代码解决了我的问题：

```
void Application_Start(object sender, EventArgs e)
{
    RegisterRoutes(RouteTable.Routes);
}

public static void RegisterRoutes(RouteCollection routes)
{
    //Make sure to add this BEFORE any other routes.
    routes.Ignore("{resource}.axd/{*pathInfo}");

    //Site
    routes.MapPageRoute("", "{address}", "~/{address}.aspx");
    routes.MapPageRoute("", "{address}/{resource}", "~/{address}/{resource}.aspx");
} 
```

感谢[这篇文章](http://www.telerik.com/community/forums/aspnet-ajax/ajax/system-web-routing-and-asp-net-ajax-client-side-framework-failed-to-load.aspx)。

# wpf - wpf树视图布局

> ID：12525506
> 
> 赞同：1
> 
> 时间：2012-09-21T06:47:09.797
> 
> 标签：wpf, layout, treeview

我的布局有问题。

在初始窗口中，一切都按预期进行。

![初始窗口](../Images/a38e744a9bca136787cf4e58d69dacc9.png)

单击父项或子项之一时，所有内容都向右对齐。我不想要那种情况。这是截图：

![单击父项](../Images/396b9ea7d81c5701d6598777820d099c.png)

![子项被点击](../Images/2170843df75bab40f70f1db1609176fc.png)

有人可以帮助我吗？

**XAML**布局模板：

“文本块”样式

```
 <Style x:Key="textBlock" TargetType="{x:Type TextBlock}">

            <Setter Property="FontFamily" Value="Verdana"></Setter>
            <Setter Property="FontSize" Value="12"></Setter>
        </Style> 
```

物品布局：

```
<HierarchicalDataTemplate 
                        DataType="{x:Type models:EntityViewModel}" ItemsSource="{Binding Children}" >
                        <Grid Margin="0,0,3,0">
                            <TextBlock Style="{StaticResource textBlock}" TextWrapping="Wrap" Width="{Binding ActualWidth, ElementName=EntityTree}">
                                <Hyperlink NavigateUri="{Binding Url}" RequestNavigate="Hyperlink_RequestNavigate">
                                    <TextBlock Text="{Binding ID}"></TextBlock>
                                </Hyperlink>
                                <TextBlock Text="{Binding TypeName}"></TextBlock>
                                <TextBlock Text="{Binding Explanation}"></TextBlock>
                            </TextBlock>
                        </Grid>
                    </HierarchicalDataTemplate> 
```

父布局：

```
 <HierarchicalDataTemplate 
                    DataType="{x:Type models:ParentViewModel}" ItemsSource="{Binding Children}">
                    <Grid Margin="0,0,3,0">
                    <TextBlock Style="{StaticResource textBlock}" TextWrapping="Wrap" Width="{Binding ActualWidth, ElementName=EntityTree}" >
                            <TextBlock Text="{Binding ParentName}"/>
                            <Run Text=" kategorisinde toplam "></Run>
                            <TextBlock Text="{Binding ItemsCount}"></TextBlock>
                            <Run Text=" adet kayıt"></Run>
                        </TextBlock>
                        </Grid>
                </HierarchicalDataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:27:23.473

这可能也是由于 EntityViewModel DataTemplate 中 TextBlock 的宽度的绑定。我假设，EntityTree 是整个 TreeView 的名称。您强制 TextBlock 的宽度大于整个 TreeView，因为它在第二级缩进，这会导致 TreeView 尝试使整个 Textblock 可见并强制向右滚动。尝试在第一种方法中设置固定宽度，小于或等于可用宽度

# iis - system.webServer/fastCgi/application 在 web.config 中不起作用

> ID：12525508
> 
> 赞同：7
> 
> 时间：2012-09-21T06:47:15.083
> 
> 标签：iis, webmatrix, msdeploy, web-platform-installer

如何[按照文档](http://www.iis.net/configreference/system.webserver/fastcgi/application#005)`web.config`在 MSDeploy 的文件中注册 IIS FastCGI 应用程序？

我正在尝试构建一个简单的测试 MS Web 部署包，可由 Web 平台安装程序通过[自定义提要](http://blogs.iis.net/kateroh/archive/2009/10/24/web-pi-extensibility-custom-feeds-installing-custom-applications.aspx)安装。我正在尝试在包中注册一个 FastCGI 应用程序，`web.config`因为 [文档表明是可能的](http://www.iis.net/configreference/system.webserver/fastcgi/application#005)。您可以在[下面或 github 中查看 web.config 文件](https://github.com/rpatterson/iiswsgi/blob/9b64c08fffdd8a3110e976160037576f907bdc96/sample.msdeploy/IISWSGISampleApp/web.config)：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <fastCgi>
      <application fullPath="C:\Python27\python.exe" arguments="-u C:\Python27\Scripts\iiswsgi-script.py" monitorChangesTo="C:\Python27\Scripts\iiswsgi-script.py" maxInstances="1" />
    </fastCgi>
... 
```

当通过 Web 平台安装程序安装然后通过 Web Matrix/IIS Express 进行测试时，这不起作用。但是，只要我在[批处理文件](https://github.com/rpatterson/iiswsgi/blob/9b64c08fffdd8a3110e976160037576f907bdc96/install.cmd)`appcmd.exe`中运行如下命令：[`install.cmd`](https://github.com/rpatterson/iiswsgi/blob/9b64c08fffdd8a3110e976160037576f907bdc96/install.cmd)

```
set IIS_BIN=%ProgramFiles%\IIS Express
"%IIS_BIN%\appcmd.exe" set config -section:system.webServer/fastCgi /+"[fullPath='%SystemDrive%\Python27\python.exe',arguments='-u %SystemDrive%\Python27\Scripts\iiswsgi-script.py',maxInstances='1',monitorChangesTo='%SystemDrive%\Python27\Scripts\iiswsgi-script.py']" /commit:apphost 
```

... FastCGI 应用程序运行良好。IOW，似乎中的`<fastCGI><application>`元素`web.config`没有生效，但它们在 IIS 中生效，`applicationhost.config`即使文档表明这在`web.confg`.

有没有办法让它在特定的应用程序中工作（通过`web.config`或其他方式）而不更改全局 IIS 配置？

我在 Windows 7 Professional、Web Platform Installer 4.0 和 Web Matrix 2.0 RC 下执行所有这些操作，它们的 about 对话框显示：

```
Version 2.0 RC
WebMatrix: 7.1.1587.0
IIS Express: 8.0.8298.0
.NET Framework: 4.0.30319.17379 built by: FXBETAREL
Web Deploy: 7.1.1516.0
SQL Server Compact: 4.0.8854.1
Web Platform Installer: 7.1.1586.1
ASP.NET Web Pages: 2.0.20505.0
ASP.NET Web Pages: 1.0.20105.407 
```

所有这一切背后的代码都[在 GitHub 上的 IISWSGI 中](https://github.com/rpatterson/iiswsgi)，[使用此提交](https://github.com/rpatterson/iiswsgi/commit/9b64c08fffdd8a3110e976160037576f907bdc96)进行测试。要重现我正在使用的环境，请参阅[IISWSGI 文档](https://github.com/rpatterson/iiswsgi#sample-package)。

# javascript - 如何制作弹窗广告

> ID：12525510
> 
> 赞同：-2
> 
> 时间：2012-09-21T06:47:17.160
> 
> 标签：javascript, html, popup

想知道如何弹出窗口广告以及如何制作它们。因此，当访问者访问一个网站时，它会自动在一个新的弹出窗口中打开一个页面以供第一次点击。我真的很想学习这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-06T10:29:42.917

尝试这个

```
<script>
window.open('http://www.yourdomain.com/yourad.html','popupad','width=200,height=150')
</script> 
```

或者

对于 Internet Explorer

我会弹出

```
<script>

var newPopup=window.open("","PopupWindow","height=250,width=250");
var popContent='<HTML><HEAD><TITLE>GetSmart</TITLE></HEAD><BODY MARGINWIDTH=0 MARGINHEIGHT=0 LEFTMARGIN=0 TOPMARGIN=0 BOTTOMMARGIN=0>';
popContent+= '<a target="_blank" href="http://DomainURL"><img src="http://www.yourdomain.com/ads/yourimage.gif" height=250 width=250 border=0></a>';
popContent+='</BODY></HTML>';
newPopup.document.write(popContent);
newPopup.document.close();
newPopup.focus();
</script> 
```

或者

网景代码

```
<script>
var newPopup=window.open("","PopupWindow","height=250,width=250");
var popContent='<HTML><HEAD><TITLE>GetSmart</TITLE></HEAD><BODY MARGINWIDTH=0 MARGINHEIGHT=0 LEFTMARGIN=0 TOPMARGIN=0 BOTTOMMARGIN=0>';
popContent+= '<a target="_blank" href="http://DomainURL"><img src="http://www.yourdomain.com/ads/yourimage.gif" height=250 width=250 border=0></a>';
popContent+='</BODY></HTML>';
newPopup.document.write(popContent);
newPopup.document.close();
newPopup.focus();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:34:39.340

你可以这样做：

```
<body onload="window.showModalDialog('http://www.google.com');"> 
```

页面加载后，用户可以选择允许或阻止弹出窗口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:50:05.430

您可以使用 JavaScript 方法打开一个新窗口`window.open(URL)`，但不能保证用户会允许它。这就是弹出窗口拦截器的用途。

**编辑：** W3Schools 有更多关于[Window open() Method](http://www.w3schools.com/jsref/met_win_open.asp)的信息。

# ios - 如何在 UIImageView 的左上角和右下角创建 UIButton

> ID：12525512
> 
> 赞同：2
> 
> 时间：2012-09-21T06:47:20.593
> 
> 标签：ios, uiimageview, uibutton, rounded-corners, cornerradius

我希望在 imageview 的左上角和右下角创建删除按钮。但它看起来不像我需要的。

![在此处输入图像描述](../Images/8ab70ead97da03a36ff6accc0fbedd2f.png)

我希望两个按钮都应该放在**红色边框的角落**

要创建按钮，我使用了下面的代码

```
 UIImageView * tappedView = (UIImageView *)[recognizer view];

[tappedView.layer setBorderColor: [[UIColor redColor] CGColor]];
[tappedView.layer setBorderWidth: 2.0];
tappedView.layer.cornerRadius = 10;
tappedView.layer.masksToBounds = NO;

UIButton *deleteBtn = [UIButton buttonWithType:UIButtonTypeCustom];
deleteBtn.frame = CGRectMake(0, 0, 20, 20);

[deleteBtn setImage:[UIImage imageNamed:@"close.png"]forState:UIControlStateNormal];

deleteBtn.layer.shadowColor = [[UIColor blackColor] CGColor];
deleteBtn.layer.shadowOffset = CGSizeMake(0,4);
deleteBtn.layer.shadowOpacity = 0.3;
[tappedView addSubview:deleteBtn];
[deleteBtn addTarget:self action:@selector(deleteProperties:) forControlEvents:UIControlEventTouchUpInside];

UIButton *zoomBtn = [UIButton buttonWithType:UIButtonTypeCustom];
zoomBtn.frame = CGRectMake(tappedView.frame.size.width, tappedView.frame.size.height, 20, 20);

[zoomBtn setImage:[UIImage imageNamed:@"close.png"]forState:UIControlStateNormal];

zoomBtn.layer.shadowColor = [[UIColor blackColor] CGColor];
zoomBtn.layer.shadowOffset = CGSizeMake(0,4);
zoomBtn.layer.shadowOpacity = 0.3;
[tappedView addSubview:zoomBtn];
[zoomBtn addTarget:self action:@selector(ZoomIn:) forControlEvents:UIControlEventTouchUpInside]; 
```

请指导我。

我想要这样![在此处输入图像描述](../Images/0129b38c3f01ea53ab89790122fbe2dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:08:57.327

只需使用按钮的框架：例如

```
deleteBtn.frame = CGRectMake(-5, -5, 20, 20); 
```

和

```
zoomBtn.frame = CGRectMake(tappedView.frame.size.width - 20, tappedView.frame.size.height - 20, 20, 20); 
```

因为前 2 个数字是坐标 x 和 y，并且框架相对于包含的视图框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:57:41.753

只需使用 zoomBtn.center 而不是 zoomBtn.frame - 这样，您不必考虑按钮的大小 - 它适用于任何大小的按钮。

```
// Create the button's frame - doesn't matter the x & y
CGRect btnFrame = CGRectMake(0.0f, 0.0f, 20.0f, 20.0f);

zoomBtn.frame = btnFrame;

// Set the zoomBtn center to the bottom right corner
zoomBtn.center = CGPointMake(tappedView.frame.size.width, tappedView.frame.size.height);

deleteBtn.frame = btnFrame;

// Set the deleteBtn center to the top left corner
deleteBtn.center = CGPointMake(0.0f, 0.0f); 
```

# parameters - Solr schema.xml 和很多参数

> ID：12525514
> 
> 赞同：0
> 
> 时间：2012-09-21T06:47:26.410
> 
> 标签：parameters, solr, indexing

我将在 solr 中索引我们的产品数据库，但我有一个疑问。我们的产品由超过 1000 个参数描述，每个参数大约 20 个。我们有 100 000 种产品。参数不同，有些是字符串，有些是精确数字，有些是数字但需要支持范围。所以，我的问题是：我应该为 schema.xml 中的每个参数准备单独的字段吗？我们希望使用这些参数作为过滤器来缩小搜索结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T06:55:05.143

您可以为每种类型定义动态字段并在客户端使用该类型，而不是定义架构中的所有字段。

例如：对于整数类型，定义以下动态字段。

```
<dynamicField name="*_i"  type="integer"  indexed="true"  stored="true"/> 
```

然后将您的整数字段创建为`fieldName_i`.

有关更多信息，请查看[Solr wiki](http://wiki.apache.org/solr/SchemaXml#Dynamic_fields)。

# math - 知道附近的地理坐标

> ID：12525516
> 
> 赞同：1
> 
> 时间：2012-09-21T06:47:33.353
> 
> 标签：math

我正在使用地理坐标（纬度、经度）。我有墙的每个角落的坐标。

我想知道左下角右侧 10 厘米的点的坐标。我不确定这是否可能。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:53:46.047

## Simple method

Since latitude and longitude are a system of coordinates on a non-Euclidian surface (spherical 2-space), they are pretty awkward to work with directly.

I'd suggest the following. Convert your two coordinates to 3D Cartesian vectors:

```
z = R * sin(latitude);
Rcoslat = R * cos(latitude);
x = Rcoslat * cos(longitude);
y = Rcoslat * sin(longitude); 
```

with `R = 6378 km` the (mean) radius of the Earth. Note that most trig functions in most computer languages take their argument in **radians**, so you'll have to multiply any degrees you have by `pi/180` before taking their `sin()` or `cos()`.

Doing this for both coordinates of a side of the wall gives you two vectors

```
v1 = (x1 y1 z1)
v2 = (x2 y2 z2) 
```

The difference between these vectors will give you the proper direction to go in:

```
v3 = v1-v2  (if v1 is your leftmost coordinate)
v3 = v2-v1  (if v2 is your leftmost coordinate) 
```

The length of `v3` is the width of your wall. Extend it by 10cm to get a new vector:

```
L  = sqrt( v3x*v3x + v3y*v3y + v3z*v3z )  (width of the wall)
v4 = v3/L * (L+10cm) = v3 * (1 + 10cm/L) 
```

Note that you'll have to do some unit juggling there, since if you take `R` in kilometers, `L` will be in kilometers, too.

Now that you have the new vector, you can convert it back to latitude/longitude:

```
hypotxy   = hypot( v4x, v4y)
latitude  = atan2( v4z, hypotxy )
longitude = atan2( v4y, v4x ) 
```

Where `atan2` is the four-quadrant arctangent, and `hypot(a,b)` is just a fairly standard way to compute `sqrt(a*a+b*b)` with a greatly reduced risk of numerical over/underflow. Note again that the output of `atan2` in most computer languages will be in **radians**, so if you want your latitude/longitude in degrees, you'll have to multiply the outcome by `180/pi`.

## Any more accurate method

The method above makes a few errors due to some simplifications that are hardly noticeable on small scales (like your ordinary everyday wall). But of your wall is actually the Great Wall of China, then you'll find that these errors become pretty unacceptable.

The errors made are due to these assumptions:

1.  Latitude and longitude are coordinates on a sphere. Usually, they're not. If they come from a GPS receiver of some quality, they describe coordinates on the [reference ellipsoid](http://en.wikipedia.org/wiki/Reference_ellipsoid) of the Earth. The conversion between *these* coordinates and a Cartesian vector is slightly more involved.

2.  The difference vector `v3` is just that, a vector. A vector is a straight line segment, while the actual line connecting the points `v1` and `v2` is slightly curved (because the Earth is not flat). Extending `v3` to find `v4` will therefore introduce an error. You'll actually have to extend the *curved* line. Again, this can be done simply (by assuming the Earth is a sphere again, and using cross and dot products), or more accurately (by extending the line on the Earth's reference ellipsoid).

These corrections are pretty specific and can get very long and very ugly, so I'll leave it at this. I think the "simple method" above suffices for your need anyway.

Nevertheless, if you ever need to do it with more accuracy: If you're smart, you'll use some existing Geo software library for it. If you're smarter, you'll look up all the formulas and relevant information and make the implementation yourself, discover that your implementation has errors and side effects, correct them and learn from this again :)

# javascript - 使用 jQuery 检查 img src 是否为空

> ID：12525518
> 
> 赞同：6
> 
> 时间：2012-09-21T06:47:45.757
> 
> 标签：javascript, jquery, html, image

我有以下 HTML：

```
 <div class="previewWrapper" id="thumbPreview3">
  <div class="previewContainer">
   <img src="" class="photoPreview" data-width="" data-height=""><span>3</span>
  </div>
 </div> 
```

我有以下不工作的 JQUERY。

```
 if($('div.previewWrapper div.previewContainer img').attr('src') == '') {
      alert('got me');
    } 
```

谁能告诉我我错过了什么。当 src 为空时如何使单击事件起作用。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T06:50:17.250

您应该在文档就绪功能中进行验证

```
$(document).ready(function(){
   if($('div.previewWrapper div.previewContainer img').attr('src') == '') { 
      alert('got me'); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T06:49:49.577

试试这个代码：

```
$(document).ready(function(){
    if ($("div.previewWrapper div.previewContainer img[src=='']").click(function()){
          alert('got me');
        }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T06:51:00.783

您应该像这样将其包装在 document.ready 函数中

```
$(document).ready(function(){

if($('div.previewWrapper div.previewContainer img').attr('src') == '')
     {
      alert('got me');
    }

}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T06:53:55.643

请检查这个似乎在[这里工作](http://jsfiddle.net/muthusamy/EQrWs/)

```
<div class="previewWrapper" id="thumbPreview3">
  <div class="previewContainer">
   <img src="" class="photoPreview" data-width="" data-height=""><span>3</span>
  </div>
</div>
<input type="button" id=click value =" Click me" />

$(function () {

    $("#click").click(function () {

        if ($('div.previewWrapper div.previewContainer img').attr('src') == '') {
            alert('got me');
        }
    });

});​ 
```

# ios5 - Tabgroup 无法在钛工作室中使用 IOS 6 模拟器打开

> ID：12525524
> 
> 赞同：1
> 
> 时间：2012-09-21T06:48:20.513
> 
> 标签：ios5, ios-simulator, titanium-mobile, ios6

我是 Titanium Studio 移动开发的新手。我使用的是 tabgroup 控制器，它在 IOS 模拟器 5.1 版上运行良好。但是当我升级到 IOS 6 时，当我尝试运行相同的代码时，我得到了以下错误，

```
Script Error = -[UITabBarController setSelectedViewController:] only a view controller in the tab bar controller's list of view controllers can be selected. at app.js (line 45). 
```

这是我的代码：

```
var tabGroup = Titanium.UI.createTabGroup(); 

var win = Titanium.UI.createWindow({  
    navBarHidden: true,
    tabBarHidden: true,
    url:'example.js',
});

var tab1 = Titanium.UI.createTab({  
    height: 30,
    window:win,
});

tabGroup.addTab(tab1);  

tabGroup.addEventListener('open', function(){
    tabGroup.setActiveTab(tab1);
})

tabGroup.open(); 
```

请告诉我是否可以做些什么来解决它。或者如果我可以将模拟器降级到 5.1，因为我在运行配置中没有找到 IOS 模拟器 5.1。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:23:27.490

这可以通过将您的 Titan SDK 更新到最新版本来解决。（目前 2.1.3 RC2 [http://developer.appcelerator.com/blog/2012/09/titanum-2-1-3-rc2-is-released-with-additional-fixes-for-ios-6-and- iphone-5.html](http://developer.appcelerator.com/blog/2012/09/titanum-2-1-3-rc2-is-released-with-additional-fixes-for-ios-6-and-iphone-5.html) )

我有同样的问题，这为我解决了这个问题。

# wcf - 在 WCF 数据服务和添加服务引用生成的客户端之间共享 POCO 类型

> ID：12525528
> 
> 赞同：2
> 
> 时间：2012-09-21T06:48:57.127
> 
> 标签：wcf, service, reference, poco

我有一个 WCF 数据服务层，它公开了 POCO T4 模板生成的 POCO 实体。这些 POCO 实体是在他们自己的项目（即 Company.ProjectName.Entities）中创建的，因为我想尽可能地分享它们。

我在另一个项目（Company.ProjectName.Clients）中有一组接口，它们通过向 Company.ProjectName.Entities.dll 添加程序集引用来引用这些 POCO 类型。这些接口的实现之一是 .NET 客户端，我想使用 WCF 数据服务客户端库来使用该服务。

我使用了添加服务引用来添加服务引用。这会生成服务使用的 DataServiceContext 客户端类和 POCO 实体。但是，由 Add Service Reference 实用程序生成的这些 POCO 类型现在具有不同的命名空间（即 Company.ProjectName.Clients.Implementation.WcfDsReference）。

这意味着接口中定义的 POCO 类型不能被实用程序生成的类型使用，而无需强制转换或映射。

即假设我有：

```
 1\. POCO Entity:     Company.ProjectName.Entities.Account
 2\. Interface:       interface IRepository<Company.ProjectName.Entities.Account>{....}
 3\. Implementation:  ServiceClientRepository : IRepository<Company.ProjectName.Entities.Account>
 4\. WcfDsReference:  Company.ProjectName.Clients.Implementation.WcfDsReference
          &          Company.ProjectName.Clients.Implementation.WcfDsReference.Account

   Let's say I want to create a DataServiceQuery query on the Account, I won't be able to do this:

   var client = new WcfDsReference(baseUrl);
   var accounts = client.CreateQuery<Company.ProjectName.Entities.Account>(...)

      OR:         client.AddToAccounts(Company.ProjectName.Entities.Account)

   , because the CreateQuery<T>() expects T to be of type            &       Company.ProjectName.Clients.Implementation.WcfDsReference.Account 
```

我目前要做的是将正确的实体传递给 CreateQuery 方法，并且必须将结果映射回接口可以理解的类型。（可以使用映射器，但似乎不是一个好的解决方案。）

所以问题是，有没有办法让 Add Service Reference 实用程序生成使用 Company.ProjectName.Entities 命名空间中的 POCO 类型的方法？

我正在考虑的一种解决方案是不使用该实用程序来生成 DataServiceContext 和其他类型，而是创建我自己的。

另一种解决方案是更新`IRepository<T>`界面以使用实用程序生成的 POCO 类型。但这听起来有点骇人听闻。

有没有人提出过更好的解决方案，或者有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T16:47:41.503

好的，在开始赏金几个小时后，我发现了为什么它没有按预期工作。

事实证明，共享过程非常简单。需要做的就是用[`[DataServiceKey]`](http://msdn.microsoft.com/en-us/library/system.data.services.common.dataservicekeyattribute.aspx)属性标记模型类。[本文](http://www.codeproject.com/Articles/135490/Advanced-using-OData-in-NET-WCF-Data-Services)在“公开另一个数据模型”部分中很好地解释了该过程

考虑到这一点，我想做的是以下几点：

1.  将模型放在单独的类库项目 C 上，与 web 应用程序项目 A 和 B 共享
2.  在项目 A 上创建数据服务
3.  在项目 B 上添加服务引用
4.  从服务引用中删除生成的模型代理，并更新它以使用我在项目 C 中的模型类
5.  将 DataServiceKey 属性添加到模型，指定正确的键

当我尝试这个时它不起作用，给我以下错误：

> 客户端和服务之间存在类型不匹配。{MyType} 类型不是实体类型，但响应负载中的类型表示实体类型。请确保客户端上定义的类型与服务的数据模型匹配，或者更新客户端上的服务引用。

此问题是由项目 C（使用 System.Data.OData 程序集上的库存实现）和调用服务的客户端项目 B（使用[包](http://www.nuget.org/packages/Microsoft.Data.Services.Client/)中的 Microsoft.Data.OData 程序集）之间的版本不匹配引起的. 通过匹配两端的版本，它第一次工作。

毕竟，一个问题仍然存在：服务引用过程仍然没有检测到要共享的模型，这意味着代理正在像往常一样创建。这导致我选择退出自动服务集成机制，而是迫使我继续使用我自己的一个简单类作为 Wcf 数据服务的客户端。基本上，它是通常自动生成的类的一个经过大量修剪的版本：

```
using System;
using System.Data.Services.Client;
using System.Data.Services.Common;
using Model;

public class DataServiceClient : DataServiceContext
{
    private readonly Lazy<DataServiceQuery<Unit>> m_units;

    public DataServiceClient(Uri _uri)
        : base(_uri, DataServiceProtocolVersion.V3)
    {
        m_units = new Lazy<DataServiceQuery<Unit>>(() => CreateQuery<Unit>("Units"));
    }

    public DataServiceQuery<Unit> Units
    {
        get { return m_units.Value; }
    }
} 
```

这很简单，因为我只在只读模式下使用该服务。不过，我仍然希望使用服务引用功能，这可能会避免未来的维护问题，正如在这个简单案例中硬编码的 EntitySet 名称所证明的那样。目前，我正在使用这个实现并完全删除了服务引用。

如果有人可以分享解决方法，我真的很希望看到它与服务参考方法完全集成，但是这种自定义方法对于我们当前的需求是可以接受的。

# database - 获取最后一个非空记录的条件

> ID：12525530
> 
> 赞同：1
> 
> 时间：2012-09-21T06:49:13.340
> 
> 标签：database, hibernate, criteria, criteria-api

我有一个每日记录表，其中记录按日期存储。我正在使用休眠标准来访问数据。我如何通过提供日期范围来获取记录连续存在的最后日期（日期连续性）。例如，假设记录从 21-09-2012 到 25-09-2012 ，再次从 27-09-2012 到 31-09-2012。我想使用标准形成一个查询来获取日期 25-09-2012 的记录，因为对于 26-09-2012 没有记录（通过日期 ge 21-09-2012 和日期 le 31-09-2012）。我想知道记录持续存在的最后日期。假设该表具有三个字段 - 1.recordId (AI) 2.date 3.Integer 记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:28:38.367

我认为 HQL 在 Hibernate 中会是更好的方法：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:07:33.007

它不是您问题的正确解决方案。但这可能是特定于场景的。如何获取日期范围的数据然后在日历上显示。如果对应的值为空，则更改日期的颜色。

# java - 我的将双精度转换为小数点后 2 位的方法无法正常工作

> ID：12525534
> 
> 赞同：2
> 
> 时间：2012-09-21T06:49:31.590
> 
> 标签：java, double, decimal, conventions, decimal-point

> **可能重复：**
> [Java 中是否有 toPrecision() 的等价物？](https://stackoverflow.com/questions/12054006/is-there-an-equivalent-for-toprecision-in-java)

我创建了一个方法，该方法假设将数字限制为小数点后 2 位，但它的作用是将数字显示为小数点后 2 位，然后显示零。

此外，从下面的数字计算中，我可以注意到它错误地舍入了数字。数字应该是`478.03 129.06 348.97`。

这里有什么问题？

PS。我只是在遵循伪代码，我不能导入任何东西`import java.io.*;`

我的输出：

```
Employee's Last Name: dfsdfsdf
Employment Status (F or P): p
Hourly Pay Rate: 8.35
Hours Worked: 51.5
-------------------------------------------------------
Name    Status      Gross   Taxes   Net
dfsdfsdf    Part Time       478.040000  129.070000  348.970000 
```

我输入所有数据然后尝试输出它的代码：

```
private static void outputData(String name, char status, double pay) 
{
    if (status == "p".charAt(0))
    {
        System.out.println("-------------------------------------------------------");
        System.out.println("Name\tStatus\t\tGross\tTaxes\tNet");
        System.out.printf("%s\tPart Time\t\t%f\t%f\t%f\n\n", 
                name, 
                roundDouble(pay), 
                roundDouble(calculateTaxes(pay)), 
                roundDouble(pay - calculateTaxes(pay)));
    }
    else if (status == "f".charAt(0))
    {
        System.out.println("-------------------------------------------------------");
    }
} 
```

更多代码是应该进行转换的方法：

```
private static double roundDouble(double number) 
{
    return Double.parseDouble(String.format("%.2f", number));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T06:54:02.903

你可以`NumberFormat`试试

```
double value = 478.03123456789;
NumberFormat nf = NumberFormat.getNumberInstance();
nf.setMaximumFractionDigits(2);

System.out.println(nf.format(value)); 
```

输出`478.03`

ps - 它也可能有助于获得原始值；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:58:52.527

尝试这样做：

```
private static double roundDouble(double number) 
{
    return java.lang.Math.round((number * 100) / 100.0));
} 
```

# jquery - JSON.stringify() 替代和 JSON2.js

> ID：12525536
> 
> 赞同：4
> 
> 时间：2012-09-21T06:49:42.397
> 
> 标签：jquery, json, stringify

我正在尝试对接受一个字符串参数的函数进行 WCF 调用。当我从 jQuery 传递参数时，我使用 JSON.stringify(parameters)，其中参数是一个名称：值集合，其中包含我要传递的参数。

我的疑问是

1.  在我的 IE 版本中，没有定义 JSON。因此，我使用了 JSON2.js 库并将其包含在我网站的母版页中。
2.  我仍然遇到同样的消息。JSON 在 IE 上未定义。

好吧，它在谷歌浏览器上完美运行。

PS - 这一切都在 .NET 上。

脚本名称是`json2.js`. 我在 jQuery 中传递的值是

```
data:JSON2.stringify(parameters),
contentType: "application/json2; charset=utf-8",
dataType: "json2" 
```

我正在使用 IE8。（很抱歉之前没有提供这个细节，只是添加了）

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T06:51:42.490

而不是`JSON2.stringify(parameters)`你应该使用`JSON.stringify(parameters)`. 还要确保您已将[json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)脚本包含到您的站点中。

如果您使用的是 IE8，则根本不需要 json2.js，因为它本身就支持`JSON.stringify`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:56:25.517

您`json2`在理想情况下应该使用的所有地方都在使用`json`

请将您的 ajax 调用更改为

```
data:JSON.stringify(parameters),
contentType: "application/json; charset=utf-8",
dataType: "json" 
```

在不相关的旁注中，您可以像这样省略`charset`和`dataType`更改调用

```
data:JSON.stringify(parameters),
contentType: "application/json;", 
```

# matlab - MATLAB中可变长度向量的向量

> ID：12525544
> 
> 赞同：1
> 
> 时间：2012-09-21T06:50:16.987
> 
> 标签：matlab

我想在一个数组中总结几个**不同大小的向量。**每次其中一个向量从我的程序中退出时，我都想将它附加到我的数组中。像这样：

```
array = [array, vector]; 
```

最后我想让这个数组成为一个函数的输出。但它给了我错误的结果。这可以用 MATLAB 实现吗？

谢谢和亲切的问候，达米安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T07:53:21.777

好的，鉴于我们正在处理不同大小的列向量，您不能将它们全部放在一个数值数组中，因为数值数组必须是矩形的。如果你真的想把它们放在数值数组中，那么数组的列长度需要是最长向量的长度，你必须用 NaN 填充较短的向量。

鉴于此，正如 chaohuang 在评论中暗示的那样，更好的解决方案是使用一个单元格数组，并在每个单元格中存储一个向量。问题是你事先不知道会有多少向量。我知道这个问题的常用方法如下（但如果有人有更好的主意，我很想学习！）：

```
UpperBound = SomeLargeNumber;
Array = cell(1, UpperBound);
Counter = 0;
while SomeCondition
    Counter = Counter + 1;
    if Counter > UpperBound
        error('You did not choose a large enough upper bound!');
    end
    %#Create your vector here
    Array{1, Counter} = YourVectorHere;

end
Array = Array(1, 1:Counter); 
```

换句话说，事先选择一些你确定不会在循环中超过的上限，然后在循环完成后将单元格数组缩小到合适的大小。另外，我已经设置了一个错误陷阱，以防您选择的上限太小！

哦，顺便说一句，我刚刚在你的问题中提到了“总结几个向量”这个词。这是一个比喻，还是你真的想在`sum`某个地方进行手术？

# android - 如何在android项目中编译aidl文件？

> ID：12525546
> 
> 赞同：6
> 
> 时间：2012-09-21T06:50:25.527
> 
> 标签：android, aidl

嗨，谁能告诉我在项目树中放置aidl文件的位置以及如何在项目源中使用它。如果我构建 apk，aidl 文件会被编译吗？如何在eclipse中使用它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T06:52:25.770

> AIDL（Android 接口定义语言）类似于您可能使用过的其他 IDL。它允许您定义客户端和服务都同意的编程接口，以便使用进程间通信 (IPC) 相互通信

**在哪里放置aidl文件？**

> 将aidl 文件保存在托管服务的应用程序和绑定到服务的任何其他应用程序的源代码中（在 src/ 目录中）。

**如果我构建 apk，aidl 文件会被编译吗？**

> 编译项目时，项目会自动在 gen 文件夹中生成一个文件。

在[这里](http://developer.android.com/guide/components/aidl.html)查看更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-23T16:19:31.207

除了前面的答案，您还可以只构建 AIDL 文件。

**Android Studio 3.0.1**（Android Studio 2.xx 应该是一样的）：

***查看***->***工具窗口***-> ***Gradle***

右键单击***compileDebugAidl*** ->***运行***

[![仅编译 AIDL。 右键单击并执行](../Images/52b14341c6753097cebef667d942487f.png)](https://i.stack.imgur.com/otegs.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-18T21:25:25.007

如果有人在使用 Gradle 构建系统时想知道在哪里放置 AIDL 文件（因为文档仍然告诉您将其放置在 中`src/`）：

**在 Gradle 下，您必须放入 AIDL 文件`src/main/aidl/`才能自动检测到它。**

在构建过程中，Java 接口和存根实现被放入*build/generated/source/aidl/{debug,release}/*，否则[Chirag Raval](https://stackoverflow.com/users/614807/chirag-raval)提供的信息仍然是正确的。

# java - 从今天开始删除日期或星期或月份的代码

> ID：12525557
> 
> 赞同：3
> 
> 时间：2012-09-21T06:51:29.873
> 
> 标签：java, date, calendar

我需要根据以下条件获取日期，

从当前日期开始，如果用户仅选择日期（1-31），则必须从当前日期中减去它并获得新日期。

如果用户选择周数（1-53），那么我们必须从当前日期数周数中删除选定的周数数并获得一个新日期。

如果用户只选择月份（1-12），那么我们必须从当前日期月份中删除选定的月份数并获取新日期。
日期检查示例代码..

```
Calendar today=Calendar.getInstance();  
int month=today.MONTH;  

int year=today.YEAR;  
today.clear();  
today.set(year, month,dateOfMonth);
date=today.getTime(); 
```

任何逻辑都受到高度赞赏。
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:00:18.723

```
java.util.Calendar cal = java.util.Calendar.getInstance();
cal.setTime(currentDate);
if (inDays) {
  cal.add(Calendar.DATE, -n);
} else if (inWeeks) {
  cal.add(Calendar.WEEK_OF_YEAR, -n);
} else if (inMonths) {
  cal.add(Calendar.MONTH, -n);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:55:38.637

您可以使用以下方法实现所有这些：

```
java.util.Calendar.add(int, int) 
```

例如：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DAY_OF_MONTH, -10); // substracts 10 days from 'now' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:59:55.180

使用[乔达时间](http://joda-time.sourceforge.net/)。

在日期中添加天数：http: [//joda-time.sourceforge.net/apidocs/org/joda/time/Days.html#plus](http://joda-time.sourceforge.net/apidocs/org/joda/time/Days.html#plus(int) (int )

# asp.net - 应用程序对象不能在 ASP.NET 网页中使用

> ID：12525561
> 
> 赞同：0
> 
> 时间：2012-09-21T06:51:43.890
> 
> 标签：asp.net

如何在网页中使用 Application 对象？

我认为它应该类似于 Session 对象。但是当我使用应用程序时，它会显示参考

```
System.Net.Mime.MediaTypeNames.Application 
```

显然，这不是我要找的那个。

它在 .NET 4 中被丢弃了吗？

如果是，我应该用什么来替换 Application 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:54:33.823

```
<% 
    this.Application["test"] = "some value";
%> 
```

WebForm 内部应该可以工作。在它背后的代码中是同样的故事：

```
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        this.Application["test"] = "some value";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:54:59.527

你指的是这个吗

[Page.Application 属性](http://msdn.microsoft.com/en-us/library/aabkk236%28v=vs.110%29.aspx)

> 获取当前 Web 请求的 HttpApplicationState 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:59:43.867

如果您尝试从 ASP.NET 页面访问它，它应该可以工作。`Application`是`Page`返回的属性[`HttpApplicationState`](http://msdn.microsoft.com/en-us/library/system.web.httpapplicationstate%28v=vs.100%29.aspx)。

```
protected void Page_Load(object sender, EventArgs e)
{
    if(Page.Application["Foo"] != null)
    {
        // ... 
    }
} 
```

如果要从静态上下文访问它，可以使用[`HttpContext.Current`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.current.aspx)：

```
if (HttpContext.Current.Application["Foo"] != null){ } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T06:56:29.933

[Application](http://msdn.microsoft.com/en-us/library/aabkk236%28v=vs.110%29.aspx) ( HttpApplicationState) 属性非常重要。

似乎您有一些引起混淆的参考资料。

在页面上的 CS 代码中，您应该能够使用它

```
this.Application["key"] = myObject; 
```

# windows-8 - 在 WinRT / Win8 中替换文件会引发 UnauthorizedAccessException

> ID：12525567
> 
> 赞同：3
> 
> 时间：2012-09-21T06:52:13.133
> 
> 标签：windows-8, windows-runtime

每隔一段时间，StorageFiles 就会被锁定，并且在尝试覆盖它们时我会收到 UnauthorizedAccessException。我无法复制它，它只会随机发生。这是创建文件的代码：

```
using (var stream = new MemoryStream())
{
    // ...populate stream with serialized data...

    StorageFile file;
    Stream fileStream;

    try
    {
        file = await folder.CreateFileAsync(fileName, CreationCollisionOption.ReplaceExisting);
    }
    catch (UnauthorizedAccessException ex)
    {
        Debug.WriteLine("Access denied on file {0}", fileName);
        return;
    }

    fileStream = await file.OpenStreamForWriteAsync();

    using (fileStream)
    {
        stream.Seek(0, SeekOrigin.Begin);
        await stream.CopyToAsync(fileStream);
        await fileStream.FlushAsync();
    }
} 
```

一旦文件开始抛出 UnauthorizedAccessException，它总是会抛出它。好像系统已锁定文件，我无法触摸它。我必须卸载应用程序并重建。

当我在文档中打开文件时，我可以在那里看到该数据。一切都很好。写得很成功。

谁能看到我的代码有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-08T15:06:08.453

当同时从代码中的两个不同点访问同一个文件时，可能会出现这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T20:30:23.290

您是否将文件令牌保存在将来的访问列表中？我在加载文件并稍后尝试保存更新时遇到了这个问题。一旦我开始使用未来的访问列表，问题就消失了。

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.accesscache.storageitemaccesslist](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.accesscache.storageitemaccesslist)

# c++ - Qt - 禁用单元格编辑

> ID：12525572
> 
> 赞同：5
> 
> 时间：2012-09-21T06:52:33.257
> 
> 标签：c++, qt

我有一个`QTableView`（基于模型的）并且我想禁用特定单元格的编辑功能，比如说第 0 行第 1 列。

我怎样才能做到这一点？请注意，我仍然希望启用此行中的其他单元格进行编辑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T06:56:37.940

如果您使用的是自定义表格模型，则可以实现该`Qt::ItemFlags QAbstractItemModel::flags ( const QModelIndex & index ) const`方法并返回一组标志，其中`Qt::ItemIsEditable`未为您不想编辑的单元格设置标志。假设`MyTableModel`继承自`QAbstractTableModel`：

```
Qt::ItemFlags MyTableModel::flags ( const QModelIndex & index ) const {
    Qt::ItemFlags flags = Qt::NoItemFlags;

    if (index.row() == 0 && index.column() == 1) {
       return flags;
    }
    return flags | Qt::ItemIsEditable;
} 
```

# iphone - 具有离线路线的离线 iPhone 地图

> ID：12525573
> 
> 赞同：6
> 
> 时间：2012-09-21T06:52:33.430
> 
> 标签：iphone, dictionary, routing, routes, offline

我正在开发一个 iPhone 应用程序：

*   离线地图
*   离线路由

喜欢：mtrip，offMap ...
[http://www.offmaps.com/](http://www.offmaps.com/)

我研究了很多（routeme，navit ...）：
[https ://github.com/route-me/route-me](https://github.com/route-me/route-me)

但我找不到**离线路由**的任何框架或好的解决方案。
任何人都可以提出一些想法，使用框架（免费或付费）吗？

非常感谢

> > [http://www.routino.org](http://www.routino.org)是解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:56:08.703

这已经很晚了，但我想我会在这里筹码，因为没有其他人有。

您可能想看看 Waze 的离线路由算法：[http](http://www.waze.com/wiki/index.php/How_Waze_calculates_routes) ://www.waze.com/wiki/index.php/How_Waze_calculates_routes 。 **我必须警告你，他们的开源实现是在*GPL v2*下。**

# wcf - 使用 ixmlserializable 进行 WCF API 版本控制

> ID：12525574
> 
> 赞同：2
> 
> 时间：2012-09-21T06:52:42.127
> 
> 标签：wcf

这些天我正在 WCF 中进行 API 版本控制。我已经阅读了许多有关执行此操作的最佳实践的文章。我要了解的最重要的事情是确定 API 中的更改在新版本中是中断还是非中断。关于更改对 stackoverflow [WCF API 部署版本控制的影响的非常好的文章/讨论](https://stackoverflow.com/questions/8703854/wcf-api-deployment-versioning)

为了实现自定义序列化要求，我选择了 ixmlserializable 技术。现在我的问题是，在这种情况下，破坏和非破坏概念将保持不变？如果不是，请帮助我找出在这种情况下实现 API 版本控制的方法。

我的理解是，在工作 ixmlserializable 时，新的更改总是会中断，因为 ReadXml 方法实现了手动构造对象的方式。

请让我知道我的理解是否正确以及在这种情况下如何进行。在这方面的任何帮助都将是非常可观的。

/里兹万

# android - Bambuser ffmpeg - “arm-linux-androideabi-gcc 无法创建可执行文件。”

> ID：12525578
> 
> 赞同：7
> 
> 时间：2012-09-21T06:52:56.190
> 
> 标签：android, gcc, ffmpeg, ubuntu-11.10, android-ndk-r5

我知道这可能是某些问题的重复。但是这些线程的答案对我没有帮助。

我正在尝试使用 Bambuser 的 ffmpeg 为 android 编译 ffmpeg 库。
我下载[了客户端版本 1.3.7 到 1.6.0 的存档。](http://bambuser.com/r/opensource/ffmpeg-4f7d2fe-android-2011-03-07.tar.gz)从 bambuser 。

我按照 REAME 中给出的说明进行操作。
在运行 ./build.sh 我遇到了以下错误

```
arm-linux-androideabi-gcc is unable to create an executable file.
C compiler test failed.

If you think configure made a mistake, make sure you are using the latest
version from SVN.  If the latest version fails, report the problem to the
ffmpeg-user@mplayerhq.hu mailing list or IRC #ffmpeg on irc.freenode.net.
Include the log file "config.log" produced by configure as this will help
solving the problem. 
```

这是ffmpeg的**config.log**的最后几行

```
mktemp is /bin/mktemp
check_ld
check_cc
BEGIN /tmp/ffconf.qflVj27Q.c
    1   int main(void){ return 0; }
END /tmp/ffconf.qflVj27Q.c
arm-linux-androideabi-gcc --sysroot=/home/chaitanya/android/android-ndk-r5b/platforms/android-8/arch-arm -c -o /tmp/ffconf.gc6um0Ki.o /tmp/ffconf.qflVj27Q.c
arm-linux-androideabi-gcc: error trying to exec 'cc1': execvp: No such file or directory
C compiler test failed. 
```

在**tmp**中，我没有找到任何相关文件夹或文件，因为 config.log 说“ffconf.qflVj27Q.c”。

我在1.Ubuntu
11.10 2.OpenJDK
6
3.android-ndk-r5b上这样做

**注意**：
我只在 Eclipse 中安装了 API-10。（如果重要的话：D）

这可能是什么解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-25T17:17:09.837

面对同样的问题时，我终于发现了我的设置问题...查看 arm-build.sh 脚本，我开始关注该脚本。注意“TOOLCHAIN=...”路径。

最初的路径是：TOOLCHAIN=`echo $NDK/toolchains/arm-linux-androideabi-4.6/prebuilt/*-x86`

当我去验证这条路径是否存在时，我注意到它不存在。我认为原因是我有一个**64 位**版本。

我的路径实际上是： .../toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86_64

我最终做的是复制文件夹，并将其重命名为“linux-x86”，现在一切都在编译。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T13:06:38.787

今天早上我也遇到了这个问题，并尝试了针对类似问题提出的解决方案。但是没有一个解决方案对我有用。

但最后我解决了。就我而言，这是 Android NDK 包的问题。我的系统是 64 位 ubuntu，我的 ndk pkg 也是 linux-64 位。但是当我使用 ndk-linux-x86 时，这个问题就解决了。我希望这可能对其他人有所帮助。

# c++ - 链接器输入文件未使用 c++ g++ make 文件

> ID：12525579
> 
> 赞同：4
> 
> 时间：2012-09-21T06:52:58.263
> 
> 标签：c++, makefile, g++, static-libraries, gnu

我无法弄清楚是什么导致了我在制作项目时不断遇到的这个错误：

```
i686-apple-darwin11-llvm-g++-4.2: -lncurses: linker input file unused because linking not done 
```

我的 make 文件如下所示：

```
CC = g++

LIB_FLAGS = -l ncurses

FLAGS = $(LIB_FLAGS)

DEPENDENCIES = window.o element.o

# FINAL OUTPUTS
main: main.cpp $(DEPENDENCIES)
    $(CC) $(FLAGS) -o main.out main.cpp $(DEPENDENCIES)

# MODULES
window.o: main.h classes/window.cpp
    $(CC) $(FLAGS) -c classes/window.cpp

element.o: main.h classes/element.cpp
    $(CC) $(FLAGS) -c classes/element.cpp

# CLEAN
clean:
    rm -rf *.o
    rm main.out 
```

一切都可以编译，但我只是好奇导致此错误消息的原因及其含义..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T06:58:52.887

您将链接器选项与 一起传递给编译器调用`-c`，这意味着不执行链接，因此`-l`未使用选项。在您的情况下，您`LIB_FLAGS`不应该在 中`FLAGS`，而是在`main: ...`规则中指定：

```
main: main.cpp
        $(CC) $(FLAGS) $(LIB_FLAGS) ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T07:16:02.887

编译（-c 标志）源文件时不要给出链接标志。查看这个示例 makefile（与 makefile 文档中的非常相似）

```
CPP = g++
CPPFLAGS =-Wall -g
OBJECTS = main.o net.o
PREFIX = /usr/local

.SUFFIXES: .cpp .o

.cpp.o:
        $(CPP) $(CPPFLAGS) -c $<

.o:
        $(CPP) $(CPPFLAGS) $^ -o $@

main: $(OBJECTS)
main.o: main.cpp
net.o: net.cpp net.h

.PHONY:
install: main
        mkdir -p $(PREFIX)/bin
        rm -f $(PREFIX)/bin/main
        cp main $(PREFIX)/bin/main

clean:
        rm -f *.o main 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T06:59:01.600

正如已经提到的，您在编译阶段传递了与链接器相关的标志。通常你需要不同的标志来编译和链接，例如

```
CC = g++

CPPFLAGS = -Wall -g -c -o $@

LDFLAGS = -l ncurses -o $@

DEPENDENCIES = main.o window.o element.o

# FINAL OUTPUTS
main: $(DEPENDENCIES)
    $(CC) $(LDFLAGS) $(DEPENDENCIES)

# MODULES
main.o: main.h main.cpp
    $(CC) $(CPPFLAGS) main.cpp

window.o: main.h classes/window.cpp
    $(CC) $(CPPFLAGS) classes/window.cpp

element.o: main.h classes/element.cpp
    $(CC) $(CPPFLAGS) classes/element.cpp

# CLEAN
clean:
    -rm main $(DEPENDENCIES) 
```

# sql - 在 VBA 代码中运行更新查询

> ID：12525583
> 
> 赞同：5
> 
> 时间：2012-09-21T06:53:29.410
> 
> 标签：sql, vba, ms-access-2010

我正在尝试使用 Access 制作一个小型库存程序，但我没有太多知识，到目前为止我所做的一切都是通过谷歌搜索。我已经设法编写代码来使用未绑定的表单存储数据，现在我想通过在未绑定表单中为另一个表输入的数据来更新表的某些特定字段。有问题的 2 个表是 Transaction 和 Stock。库存有 3 个字段 PartNo、Location 和 Qty。我希望从库存移出的位置中扣除库存数量，并将其添加到要到达的位置。

表中的样本数据`Stock`

```
Stock_PartNo    Stock_Location  Stock_Qty
2288            SAWRH001        85
2288            SAWRH002        54
3214            SAWRH003        544
4567            SAWRH001        32
5555            SAWRH002        128
5555            SAWRH005        874
5678            SAWRH002        321
6544            SAWRH004        465
6666            SAWRH003        45
6666            SAWRH004        87
7777            SAWRH003        365
7890            SAWRH002        352
8765            SAWRH005        57
8888            SAWRH004        54
9999            SAWRH005        21 
```

这是我的未绑定表单代码：

```
Private Sub Command39_Click()

Dim db As Database, rsCust As Recordset

    Set db = CurrentDb
    Set rsCust = db.OpenRecordset("Transaction", DB_OPEN_DYNASET)

        rsCust.AddNew
        rsCust("Trans_PartNo") = Me!Combo52
        rsCust("Trans_Desc") = Me!Text19
        rsCust("Trans_Disp") = Me!Text21
        rsCust("Trans_Recv") = Me!Text23
        rsCust("Trans_Qty") = Me!Text25
        rsCust("Trans_Date") = Me!Text29
        rsCust.Update

        MsgBox "Material transfer information has been updated"

        Call ClearControls

    rsCust.Close
    db.Close
End Sub 
```

这些数据将存储在一个名为 Transaction 的表中，该表只是从一个地方移动到另一个地方的记录历史记录。我想要的是表 Stock 应该使用这个表格来更新，所以如果 PartNo 2288 从 SAWRH001 转移到 SAWRH005 那么它应该自动更新表 Stock。据我了解，我需要嵌入一个 SQL 查询，但我不知道如何在 VBA 中做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T10:34:11.370

带参数：

```
Dim db As Database
Dim qdf As QueryDef

Set db = CurrentDb
sSQL = "UPDATE Stock SET Stock_Qty = Stock_Qty + [p1] " & _
     " WHERE Stock_PartNo = [p2] AND Stock_Location = [p3]"

''Temporary query
Set qdf = db.CreateQueryDef("", sSQL)
''No need to worry about quotes etc
qdf.Parameters("p2") = Me!Combo52

''Subtract
qdf.Parameters("p1") = Me.Text25 * -1
qdf.Parameters("p3") = Me.From
qdf.Execute dbFailOnError

''Add
qdf.Parameters("p1") = Me.Text25
qdf.Parameters("p3") = Me.To
qdf.Execute dbFailOnError 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:41:38.157

```
db.Execute "UPDATE Transaction SET Stock_Qty = Stock_Qty - " & Val(Me!Text25) _
& " WHERE Stock_PartNo = '" & Me!Combo52 _
& "' AND Stock_Location = '" & fromLocation & "'", dbFailOnError

db.Execute "UPDATE Transaction SET Stock_Qty = Stock_Qty + " & Val(Me!Text25) _
& " WHERE Stock_PartNo = '" & Me!Combo52 _
& "' AND Stock_Location = '" & toLocation & "'", dbFailOnError 
```

[请参阅此处](http://msdn.microsoft.com/en-us/library/bb243015%28v=office.12%29.aspx)的链接以获取示例代码。

# php - PHP文件上传归档以打开流

> ID：12525590
> 
> 赞同：0
> 
> 时间：2012-09-21T06:54:00.077
> 
> 标签：php, linux

```
function uploadFile() {
            global $attachments;
            while(list($key,$value) = each($_FILES[images][name]))
            {
            if(!empty($value))
            {
            $filename = $value;
            //the Array will be used later to attach the files and then remove them from server ! array_push($attachments, $filename);
            $dir = "/home/blah/Music/$filename";
            chmod("/home/blah/Music",0777);
            $success = copy($_FILES[images][tmp_name][$key], $dir);
            }
            //
            }
            //
            if ($success) {
            echo " Files Uploaded Successfully<BR>";
  //
  }else {
     exit("Sorry the server was unable to upload the files...");
        }
                                //
        } 
```

尝试上传文件，然后使用 PHP Mailer 将其作为邮件附件发送

错误：

```
Warning: copy(/home/blah/Music/Aerial_view_of_Yamuna_Expressway.jpeg): failed to open stream: Permission denied in /opt/lampp/htdocs/UI/user/joinmeeting.php on line 292 
```

**更新 ：**

```
blah@my001server:~$  ls -la for /home/blah/Music
ls: cannot access for: No such file or directory
/home/blah/Music:
total 8
drwxr-xr-x  2 blah blah 4096 Jul  4 10:20 .
drwxr-xr-x 67 blah blah 4096 Sep 21 10:18 .. 
```

为什么我的 linux 系统不允许复制文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:55:33.327

检查目标文件夹的权限。
设置777再试一次

`$ chmod 777 folder`

因此，正如我们现在看到的，您没有为 Music 文件夹设置写权限。
从控制台手动设置，而不是从 php 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:58:38.550

尝试使用 move_uploaded_file (http://php.net/manual/en/function.move-uploaded-file.php) 而不是复制：

```
move_uploaded_file($_FILES[images][tmp_name][$key], $dir); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:17:08.287

好的，您的编辑有点奇怪。

```
blah@my001server:~$  ls -la for /home/blah/Music
ls: cannot access for: No such file or directory
/home/blah/Music:
total 8
drwxr-xr-x  2 blah blah 4096 Jul  4 10:20 .
drwxr-xr-x 67 blah blah 4096 Sep 21 10:18 .. 
```

该命令是错误的，因为它实际上是：

```
blah@my001server:~$  ls -la /home/blah/Music 
```

你应该跑步。

但是好的，我看到了一个问题。`.`表示整个文件夹的文件没有权限`www-data`。这意味着您的 Linux 发行版的默认网络用户可能无法访问这些文件。

由于 PHP 在 webuser 下运行，`www-data`Linux 不允许它`cp`或`vi`或`gedit`（或其他任何东西）它不拥有任何东西。

你可以试试：

```
sudo chown /home/blah/Music www-data 
```

反而。这应该给予一些权限来`www-data`控制目录中的文件。

当然，这会引发更大的问题。理想情况下，由于安全需要，您希望断开任何上传目录或任何与实际 Web 服务器的连接。

# android - 应用程序中使用的静态图像的内存不足异常

> ID：12525593
> 
> 赞同：0
> 
> 时间：2012-09-21T06:54:04.943
> 
> 标签：android

假设我有 10 个活动，每个活动都包含一个静态图像，我正在完成并开始一个新的活动，左右单击箭头。![在此处输入图像描述](../Images/02a01ab0a202035d2bb218762833b467.png)

图像位于可绘制文件夹中，并且尺寸有点大，据我所知，如果一个活动完成，那么它正在使用的所有内存都会被释放（这就是我进行这么多活动的原因），但它没有发生。

如果不断点击左右按钮，应用程序会冻结并崩溃（内存不足异常）。

有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:04:34.390

1-使用以下方法加载您的图像：

`BitmapFactory.decodeResource(res, id, opts);`

使用 inSampleSize in`Options`重新缩放图像。

2- 回收您的位图`onDestroy()`。

# database - 在 postgresql 8.4 中用 group by 子句解释计划问题

> ID：12525597
> 
> 赞同：0
> 
> 时间：2012-09-21T06:54:23.710
> 
> 标签：database, postgresql, explain, postgresql-8.4, sql-execution-plan

下面给出了详细的解释，这与用分组问题的解释计划有关。

表：web_categoryutfv1_24hr_ts_201209
列：“5mintime”，类别，命中，字节，appid
行：871
索引：“web_categoryutfv1_24hr_ts_201209_idx”btree（“5mintime”）

我正在运行以下查询：

```
select count(*) over () as t_totalcnt,
       max(hits) over () as t_maxhits,
       max(bytes) over () as t_maxbytes,
       *
from (
  select category,
         sum(hits) as hits,
         sum(bytes) as bytes
  from (
    select "5mintime",
           category,
           hits,
           bytes,
           appid,
           0 as tmpfield
    from web_categoryutfv1_24hr_ts_201209
    where "5mintime" >= '2012-09-12 00:00:00'
    and   "5mintime" < '2012-09-19 00:00:00'
  ) as tmp
  where "5mintime" >= '2012-09-12 00:00:00'
  and   "5mintime" <= '2012-09-18 23:59:59'
  and   appid in ('')
  group by category
  order by hits desc
) as foo limit 10 
```

我从 t_totalcnt 变量中得到总行返回 55。现在我分析`web_categoryutfv1_24hr_ts_201209`了表并再次使用说明运行相同的查询

我得到以下执行计划：

```
-> 限制（成本=31.31..31.61 行=10 宽度=580）
-> WindowAgg（成本=31.31..32.03*行=24*宽度=580）
-> 子查询扫描 foo (cost=31.31..31.61 ***rows=24*** width=580)
      -> 排序（成本=31.31..31.37*行=24*宽度=31）
            排序键：(sum(web_categoryutfv1_24hr_ts_201209.hits))
            -> HashAggregate（成本=30.39..30.75*行=24*宽度=31）
                  -> web_categoryutfv1_24hr_ts_201209 上的 Seq 扫描（成本=0.00..27.60 行=373 宽度=31）
                      过滤器： (("5mintime" >= '2012-09-12 00:00:00'::timestamp without time zone) AND ("5mintime" < '2012-09-19 00:00:00'::timestamp without时区) AND ("5mintime" >= '2012-09-12 00:00:00'::timestamp without time zone) AND ("5mintime" <= '2012-09-18 23:59:59'::没有时区的时间戳) AND ((appid)::text = ''::text))

```

现在我得到了解释计划输出 HashAggregate (cost=30.39..30.75 ***rows=24*** width=31) 它说 rows=24 而实际上总行返回应该是 55。当我从查询中删除 group by 子句时，我得到了 373 行解释计划输出以及实际查询执行。

所以我想知道查询中的解释计划和分组子句是否存在问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:05:15.443

执行计划中显示的行是***估计值***。只要它们在正确的大小范围内，一切都很好。如果它们完全关闭，通常意味着您的统计数据已过时。

删除 group by 会更改预期的行数作为 group by 将减少它们是有道理的。

所以我认为那里没有任何问题。

您可以使用`explain analyze`来比较执行计划中的实际值和实数。

# microcontroller - FAT16 目录

> ID：12525600
> 
> 赞同：4
> 
> 时间：2012-09-21T06:54:37.703
> 
> 标签：microcontroller, directory-structure, fat16

我正在开发一个低级应用程序，它在资源受限的微控制器上使用 FAT16 文件系统结构，这需要我编写自己的自定义访问代码。我已经研究过使用 Petit FAT 和 FatFS 等库，但不幸的是，我认为这两种库都不适合我的需求。不过，它们已成为 FAT 工作原理的有用参考。

我仍然遇到问题的一个领域是子目录条目。

据此[，](http://www.maverick-os.dk/FileSystemFormats/FAT16_FileSystem.html#DirectoryEntryStructure)目录条目能够指向 1 个启动集群。对于数据文件，这只是第一个数据簇。对于目录，这是子目录的起始簇（可能是另一个目录条目）。

如果从根目录到基本文件只有 1 个目录路径，这可以正常工作，但我不明白这如何允许您分支到任何给定目录下的多个文件/目录。

前任。目录结构：

```
- root dir 1
    - sub dir 1
        - file 1
    - sub dir 2
        - file 2
- root dir 2
    - sub dir 3 
```

根据我对FAT16结构的理解，

紧随 FAT 的将是第一个根目录条目的簇，其中包含`root dir 1`. 然后，第一个集群字段将包含 的集群地址`sub dir 1`，谁的第一个集群字段将包含 的集群地址`file 1`，谁的第一个集群指向数据集群。

然后，第二个根目录条目将在包含`root dir 2`. 它的第一个簇将指向 的簇`sub dir 3`，谁的第一个簇将指向一个空簇（如 FAT 中标记的那样）。

我在这里想念什么？我想不出一种从根目录条目向下导航到`sub dir 2`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:35:48.507

首先，为了消除混淆，一个目录条目不占用单个簇。正如您从源代码中看到的那样，单个目录条目只有 32 个字节，其中簇的大小可能在 4KB 到 64KB 之间，具体取决于您使用的磁盘大小/FAT 版本。因此，FAT 之后的内容实际上是一个目录条目**表**。

对于子目录，您可以在父目录条目中找到其目录条目表的起始簇。它们不一定被打包到磁盘的开头。

为了进一步解释，让我们看一下原始示例的略微修改版本：

```
\ (root)
    - dir 1
        - sub dir 1
            - file 1
        - sub dir 2
            - file 2
    - dir 2
        - sub dir 3 
```

遍历`sub dir 2`：

1.  找到根目录条目表，该表包含在 FAT 之后的簇中；
2.  `dir 1`从根目录条目表中查找条目，并得到它的起始簇；
3.  `dir 1`从上面获得的集群中加载目录条目表；
4.  查找条目`sub dir 2`并获取其起始簇；
5.  加载上面得到的集群；

然后你现在应该有`sub dir 2`.

# jakarta-ee - CDI 在验证器中不起作用

> ID：12525608
> 
> 赞同：2
> 
> 时间：2012-09-21T06:55:06.103
> 
> 标签：jakarta-ee, servlets, entity, cdi, validation

我想将 Servlet 上下文注入到放置在实体中的验证器中。但是返回null...

例子：

```
@Entity
class Test{
@TestValidator()
int something;
}

TestValidator implements ConstraintValidator{
@Context ServletContext ctx
} 
```

场景是动作来自facelet。然后根据用户的操作调用托管 bean 的操作。我想将该操作的 ServletContext 传递给 Entity 类中注释的 Validator 但返回 null 。我认为 Servlet Context 是应用程序范围的。

问题：有没有办法在验证器中访问该 Servlet 上下文？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:56:05.407

我创建了一个名为 ContextListener 的类，它实现了 ServletContextListener

我创建了一个静态字段和方法来访问验证器中的 ServletContext

```
 public class ContextListener implements ServletContextListener {
        @Override
        public void contextInitialized(ServletContextEvent sce) { 
            sc = sce.getServletContext();
        }
        @Override
        public void contextDestroyed(ServletContextEvent sce) { 
        }
        private static ServletContext sc;

        public static ServletContext getServletContext(){
            return sc;
        }
    }

    TestValidator implements ConstraintValidator{ 
     ServletContext sc = ContextListener.getServletContext(); 
    } 
```

但请务必分享任何优雅的答案。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T07:24:50.367

不是一个真正的答案，但太多的评论：

您的代码示例看起来有点零散。你确定你创建了一个验证器吗？这将导致代码看起来像这样：

```
public class MyClass {

@Inject
MyValidator validator;

...

} 
```

此外，您必须小心实体 bean - 它们有自己独立的生命周期，并且不鼓励在那里使用注入。

# ember.js - 定义类时如何绑定Attr类

> ID：12525619
> 
> 赞同：2
> 
> 时间：2012-09-21T06:55:46.920
> 
> 标签：ember.js

鉴于我想绑定一些类，但这个元素也应该定义其他类。我寻找一些解决方案，但没有找到任何东西。

[http://jsfiddle.net/eTcDu/16/](http://jsfiddle.net/eTcDu/16/)

有人知道这个问题的任何解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T06:58:50.347

在写完问题后我再次找到了我的解决方案：

[将动态类附加到具有静态类的视图](https://stackoverflow.com/questions/9506206/append-a-dynamic-class-to-a-view-having-a-static-class)

```
{{bindAttr class=":staticStyle view.someProperty:dynamicStyle}} 
```

# iphone - 是否有反对 goto 的性能原因？

> ID：12525622
> 
> 赞同：2
> 
> 时间：2012-09-21T06:55:54.020
> 
> 标签：iphone, objective-c, ios, c, ipad

GOTO，它在设备上执行和运行时会影响性能吗？

在目标 C 中使用 GOTO 是一种好习惯还是使用它是不好的做法？

而且，什么时候使用 GOTO 语句是一个不错的选择？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T06:59:50.523

A`goto`只是一个跳跃，因此它对性能的影响几乎为零。这是一种不好的做法，因为它会损害代码的可读性；你几乎可以不用它。`goto`在前面的问题中描述了一些有意义的使用案例，只需[搜索 goto](https://stackoverflow.com/search?q=goto)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T07:00:09.200

使用 go to 语句通常是一种不好的做法，尤其是在面向对象的语言中（您可以轻松地以 OO 方式实现相同的目的），但不是从性能的角度来看，而是从代码可读性的角度来看。 ..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T07:08:41.657

BAD 和 GOOD 实践中没有任何内容，这取决于您的要求。如果你有相同的代码要执行，你可以说循环然后你可以使用`goto`. 好吧，这是一个关于此的小例子，我认为它可以消除您的疑问。

声明任何`label`名称，`hello`然后`label`您可以使用`goto`如下语句调用它 -

```
hello:
    NSLog(@"Print hello!");
    goto hello; 
```

这将打印“打印你好！” 一次又一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T08:06:59.663

不影响性能，只是为了良好的结构和可读性，这是专业编程的重要特征。但有时，在循环太深的情况下，使用 goto 可能有助于缓解复杂性，但您想在触发某些条件时跳出。即便如此，也可以通过其他方式避免。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T09:50:19.377

原则上，只需存在于函数中`goto` *即可影响性能。*

`goto`性能差异几乎总是不明显的，除了会稍微扰乱优化器并影响性能之外，还有很多事情。但是，如果您有兴趣，可以检查发出的代码是否存在差异。

在 goto[*] 的源和目标中，相同的寄存器必须用于相同的事情，这是发出代码的基本要求。这限制了编译器优化代码时的寄存器分配。这样的约束可能根本没有影响，它们可能会减慢速度或导致发出额外的代码。如果他们加快了速度，那只能是偶然的，因为编译器的启发式方法在应用于无约束版本时实际上是不正确的。

对于计算的 goto（GNU 扩展），效果可能更明显，您可以在其中将标签存储在变量中并转到变量。在这种情况下，每个可能的目标都必须与每个可能的源共享一个寄存器状态。

（通常）不会对性能*产生*影响的是`goto`块的开始或结束与等效的`break`or `continue`or `else`。这对优化器来说都是一样的：编译器将你的代码分解成所谓的“基本块”，它们之间有跳转和条件跳转。它通常不关心跳转的原因是否为 a `goto`，无论哪种情况，它都必须正确获取寄存器状态。这就是为什么几乎任何编程结构都可以被只考虑发出指令的人描述为“变相的 goto”。

[*] 更准确地说——在 goto 处可能有一个隐式的 zap，这意味着一些寄存器在源处用于一件事，而在目标处根本不使用。但是您不能拥有一些目标期望包含特定值（如变量的当前值）而源不包含特定值的寄存器。因此，如果之前是这种情况，然后您添加了 goto，则目标需要停止期待它，或者源需要将它放在那里。通常，任何一个都需要额外的代码来在寄存器和堆栈之间混洗值。

# actionscript-3 - AS3：折线图有问题

> ID：12525626
> 
> 赞同：0
> 
> 时间：2012-09-21T06:56:20.800
> 
> 标签：actionscript-3, flash, actionscript, graph, vector

我写的一些代码有点问题。基本上，它的作用是采用 3 个不断变化的值，并以累积折线图的形式将它们绘制成图表。它几乎可以工作，除了我在整个舞台上画出了这条奇怪的线，而且我不知道问题出在哪里。完整代码如下，您可以通过将其粘贴到闪存中来运行它。

```
import flash.display.Shape;
import flash.display.MovieClip;
import flash.display.Sprite;
import flash.utils.Timer;

var y1:Array = new Array();
var y2:Array = new Array();
var y3:Array = new Array();
var avg:Array = new Array();

var y1Shape:Shape = new Shape();
var y2Shape:Shape = new Shape();
var y3Shape:Shape = new Shape();
var avgShape:Shape = new Shape();

var container:Sprite = new Sprite();

var scale:uint = 1;

var redrawGraph:int = setInterval(reDraw,500);

var y1Int:int = 0;
var y2Int:int = 0;
var y3Int:int = 0;

container.addChild(y1Shape);
container.addChild(y2Shape);
container.addChild(y3Shape);
container.addChild(avgShape);
this.addChild(container);

function reDraw():void
{
    y1Shape.graphics.clear();
    y2Shape.graphics.clear();
    y3Shape.graphics.clear();
    avgShape.graphics.clear();

    y1Shape.graphics.lineStyle(1, 0x0066FF, 1);
    y1Shape.graphics.beginFill(0x0066FF, 0.5);
    y2Shape.graphics.lineStyle(1, 0x009900, 1);
    y2Shape.graphics.beginFill(0x009900, 0.5);
    y3Shape.graphics.lineStyle(1, 0x990000, 1);
    y3Shape.graphics.beginFill(0x990000, 0.5);
    avgShape.graphics.lineStyle(1, 0x000000, 1);

    y1Int = rand();
    y2Int = rand();
    y3Int = rand();

    trace(y1Int, y2Int, y3Int);

    y1.unshift(y1Int);
    y2.unshift(y2Int);
    y3.unshift(y3Int);
    popOut(y1);
    popOut(y2);
    popOut(y3);

    var i:uint,sum:uint,aLength:uint,len:uint = y1.length,max:int = 0,height_:int = 400;
    scale = 10;
    for (i=0; i<len; i++)
    {
        max = Math.max(y1[i] + y2[i] + y3[i],max);
    }

    for (i=0; i<len; i++)
    {
        sum +=  y1[i] + y2[i] + y3[i];
    }

    avg.unshift(Math.round(sum/len));

    /*--------------------------------MATCHED GRAPH------------------------------------------*/
    var y1_commands:Vector.<int> = new Vector.<int>();
    var y1_coord:Vector.<Number>= new Vector.<Number>();
    var y1_coord_rev:Vector.<Number> = new Vector.<Number>();
    y1_commands.push(1);
    y1_coord.push(400,height_);

    for (i=0; i<len; i++)
    {
        y1_commands.push(2);
        y1_coord.push((400-i*scale),height_-(Math.round((y1[i]/max)*height_)));
        y1_coord_rev.unshift((400-i*scale),height_-(Math.round((y1[i]/max)*height_)));
    }
    for (i=len; i>0; i--)
    {
        y1_commands.push(2);
        y1_coord.push(400 - i*scale,height_);
    }
    y1_commands.push(2);
    y1_coord.push(400,height_);

    /*--------------------------------MATCHED GRAPH------------------------------------------*/

    /*----------------------------------BUSY GRAPH-------------------------------------------*/
    var y2_commands:Vector.<int> = new Vector.<int>();
    var y2_coord:Vector.<Number>= new Vector.<Number>();
    var y2_coord_rev:Vector.<Number> = new Vector.<Number>();
    y2_commands.push(1);
    y2_coord.push(400,height_-(Math.round((y1[i]/max)*height_)));

    for (i=0; i<len; i++)
    {
        y2_commands.push(2);
        y2_coord.push((400-i*scale),height_-(Math.round(((y1[i]+y2[i])/max)*height_)));
        y2_coord_rev.unshift((400-i*scale),height_-(Math.round(((y1[i]+y2[i])/max)*height_)));
    }
    for (i=len; i>0; i--)
    {
        y2_commands.push(2);
        y2_coord.push(400 - i*scale, height_-(Math.round((y1[i]/max)*height_)));
    }
    y2_commands.push(2);
    y2_coord.push(400,height_-(Math.round((y1[i]/max)*height_)));

    /*----------------------------------BUSY GRAPH-------------------------------------------*/

    /*----------------------------------VAC GRAPH-------------------------------------------*/
    var y3_commands:Vector.<int> = new Vector.<int>();
    var y3_coord:Vector.<Number>= new Vector.<Number>();
    var y3_coord_rev:Vector.<Number> = new Vector.<Number>();
    y3_commands.push(1);
    y3_coord.push(400,height_-(Math.round(((y1[i]+y2[i])/max)*height_)));

    for (i=0; i<len; i++)
    {
        y3_commands.push(2);
        y3_coord.push((400-i*scale),height_-(Math.round(((y1[i]+y2[i]+y3[i])/max)*height_)));
        y3_coord_rev.unshift((400-i*scale),height_-(Math.round(((y1[i]+y2[i]+y3[i])/max)*height_)));
    }
    for (i=len; i>0; i--)
    {
        y3_commands.push(2);
        y3_coord.push(400 - i*scale, height_-(Math.round(((y1[i]+y2[i])/max)*height_)));
    }
    y2_commands.push(2);
    y2_coord.push(400,height_-(Math.round(((y1[i]+y2[i])/max)*height_)));

    /*----------------------------------BUSY GRAPH-------------------------------------------*/
    //y3Shape.graphics.drawPath(y3_commands, y3_coord);
    y2Shape.graphics.drawPath(y2_commands, y2_coord);
    y1Shape.graphics.drawPath(y1_commands, y1_coord);

}

function popOut(a:Array):void
{
    if (a.length >=Math.ceil(400/scale))
    {
        a.pop();
    }
}

function rand():int
{
    return Math.floor(Math.random() * (1 + 5 - 0) + 0);
} 
```

y3Shape 被注释掉，直到 y2Shape 的问题得到解决（同时绘制这两个问题只会使问题更难解决）。

有什么想法可以解决吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:34:59.080

如果您在 附近插入跟踪向量`.drawPath`，您会看到类似的内容：

```
trace(y2_commands); // 1,2,2,2,2
trace(y2_coord); // 400,171,400,57,390,NaN,400,171,400,57 
```

因此，NaN（非数字）意味着您在坐标计算中存在错误。

附言。`y1[i]`在第一次计算 BUSY GRAPH 时未定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:40:58.860

您似乎正在使用 beginFill()，当您绘制未循环的路径时，Flash 需要您的路径循环以便用某些东西填充它。因此，它通过在起点添加一条线并填充它来隐式循环它。为了获得不重叠的路径，请在路径中添加两个点，该点将位于 X 轴上 0 点的正下方，一个位于图形上最后一个点的正下方，一个位于图形上第一个点的正下方。

实际上，您已经安装了它们，但由于某种原因，您放置的不是 2 个点，而是一大堆 em，而且那条线的高度位置显然是错误的。您的代码指出：

```
for (i=len; i>0; i--)
{
    y2_commands.push(2);
    y2_coord.push(400 - i*scale, height_-(Math.round((y1[i]/max)*height_)));
} 
```

你应该有：

```
for (i=len; i>0; i--)
{
    y2_commands.push(2);
    y2_coord.push(400 - i*scale, height_);
} 
```

甚至更好：

```
y2_commands.push(2);
y2_commands.push(2);
y2_coord.push(400 - len*scale, height_);
y2_coord.push(400, height_); 
```

# partial-views - mvc ajax 开始表单和渲染部分验证打开

> ID：12525638
> 
> 赞同：1
> 
> 时间：2012-09-21T06:57:19.773
> 
> 标签：partial-views, renderpartial

我正在使用 ajax 开始表单中的视图。我搜索一件事，结果是正确的，然后警告不渲染部分视图。但它不能正确查看空白页并查看我的部分视图。谢谢

我的观点

```
 @using (Ajax.BeginForm("AjazKullanici", new AjaxOptions { UpdateTargetId = "trBilgiler", HttpMethod = "Post" }))
    {
        <tr>
            <td style="width: 20%">
                T.C. Kimlik No :
            </td>
            <th align="left">
                @Html.TextBoxFor(model => model.TcNo)
                @Html.ValidationMessageFor(model => model.TcNo)
                <input type="submit" id="btnBilgiGetir" value="Bilgi Getir" class="Button" width="75px" />
            </th>
        </tr>
    }
    <tr id="trBilgiler">
        @{Html.RenderPartial("BilgilerKullanici");}
    </tr> 
```

我的控制器

```
 public ActionResult AjazKullanici()
    {

        ViewData["dropGizliSoru"] = _db.EHASTANEGIZLISORUs;
        return View();
    }

    [HttpPost]
    public PartialViewResult AjazKullanici(YeniKullaniciModel model)
    {
        if (model.TcNo != null)
        {
            var userKontrol = _db.KULLANICIBILGILERIs.Where(x => x.KULLANICIKOD == model.TcNo);
            if (userKontrol.Any())
            {
                Response.Write("<script langauge='javascript'>alert('Girmiş Olduğunuz T.C. Kimlik Numarasına Ait Kullanıcı Kaydı Vardır.')</script>");
                return PartialView();
            }
            else
            {

                return PartialView("BilgilerKullanici",model);

            }
        }
        return PartialView();
    } 
```

# java - 为什么我的十进制到二进制程序在末尾添加了额外的数字？

> ID：12525641
> 
> 赞同：1
> 
> 时间：2012-09-21T06:57:46.710
> 
> 标签：java, binary, decimal

我正在编写一个程序，它采用一个名为 decimalInput 的整数（目前是一个用于测试目的的文字）并将其转换为一个名为 binaryOutput 的字符串，它是二进制形式的十进制数。我正在使用[本指南（第一个）](http://www.wikihow.com/Convert-from-Decimal-to-Binary)来解释如何完成从十进制到二进制的转换。到目前为止，这是我的代码：

```
public class ToBin {
public static void main(String[] args) {
    int decimalInput = 19070;
    String binaryOutput = "";
    while (decimalInput > 0) {
        if (decimalInput % 2 == 0) {
            binaryOutput = "0" + binaryOutput;
            decimalInput = decimalInput / 2;
        }
        else {
            binaryOutput = "1" + binaryOutput;
            decimalInput = decimalInput / 2;
        }
    }
    System.out.println(binaryOutput);
    }
} 
```

对于我拥有的当前文字（19070），我的程序返回字符串“100101001111110”。然而，这是不正确的。我的程序应该返回“10010100111”。因此，出于某种原因，我的程序在末尾添加了一个额外的字符串“1110”。起初我想，好吧，也许我在某个地方搞砸了数学。所以我试着检查数学，它看起来没问题。然后我尝试将文字 decimalInput 更改为较小的数字，特别是 156，它返回字符串“10011100”，这是正确的输出。

我尝试将 decimalInput 更改为键入 long 以查看是否有帮助，但没有。

我所知道的是，由于某种原因，更大的数字正在使我的程序崩溃。我不知道为什么。

我将不胜感激任何帮助，因为这真的让我很沮丧。这也适用于一个类，所以尽管我想使用 toBinaryString()，但我无法这样做。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T07:02:09.353

我会用 toBinaryString 来检查你的结果

```
int decimalInput = 19070;
System.out.println(Integer.toBinaryString(decimalInput)); 
```

印刷

```
100101001111110 
```

你的程序也是如此，所以它是正确的！

注意：您的程序根本不会显示负数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:18:56.437

**回答第二个问题**

“你能想出如何修复你的程序，让它处理负数吗？”

正如我在其他评论中所建议的那样，我将使用位移运算符。

if 语句会变成这样：

`if (decimalInput & 0x01 == 0) { // If the least significant bit is set`

而“师”会变成这样：

`decimalInput = decimalInput >>> 1; // Shifting all bits one to the right`

这可以帮助您了解正在发生的事情：

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

# avr - atmega8 程序大小限制？

> ID：12525642
> 
> 赞同：1
> 
> 时间：2012-09-21T06:57:49.457
> 
> 标签：avr, atmega

我是atmega8的新手。我将一些旧的 freesacle 代码转换为 atmega8。但似乎我的芯片不能容纳超过 2400 字节的代码？下面是结果，当代码为 2412 字节时……一切都变得一团糟。

avrdude 下面的代码来自“cat /dev/ttyUSB0”。我的调试信息。

```
avrdude: verifying ...
avrdude: 2412 bytes of flash verified
avrdude: safemode: Fuses OK
avrdude done.  Thank you.

55432111001-0000 6Gn�H(�h�X0443234554321190 6Gn�H        (�h�X0443234554321100-FD-90-6F55432111001-0000 6Gn�H    (�h�X0443234554321190 6Gn�H(�h�X0443234554321100-FD-90-6F^C 
```

但是如果我减少了代码（只有音频数据），我得到了正确的结果。

```
avrdude: verifying ...
avrdude: 2312 bytes of flash verified
avrdude: safemode: Fuses OK
avrdude done.  Thank you.

AVR-IrDA-Tone-Audio start.
version 1.2
--IrDA--    Bin: 1001-0000      Hex: 90     Complete Hex: 00-FD-90-6F 
```

所有 hfuse、lfuse、lock 位都是原始值。我的代码可能是 6k，带有一些音频数据。

如果是由于引导闪存部分？

补充：------------------------------------------------ --------------------------------------------------

我现在把水晶换成8M。

```
● ll h8-*
-rw-rw-r-- 1 eexp eexp 933  9月 22 00:27 h8-reduce.c
-rw-rw-r-- 1 eexp eexp 14K  9月 22 00:26 h8-org.c

● cp h8-org.c h8.c

● avr.sh main.c
......
avrdude: 5272 bytes of flash verified 
```

现在一切都变得一团糟。

```
● cp h8-reduce.c h8.c

● avr.sh main.c
.....
avrdude: 1872 bytes of flash verified 
```

现在一切正常，但我几乎丢失了所有音频数据。

下面是h8.c。

```
● head h8.c
const unsigned char h8[] =
{
    36,14,0,0,129,129,128,129,130,127,126,128,128,127,128,130,131,128,127,127,127,126,127,129,130,130,129,129,128,128,128,128,128,126,126,129,128,127,127,130,133,130,126,126,129,128,125,127,128,129,128,127,129,128,127,127,127,128,128,129,127,127,129,128,130,130,128,128,127,126,128,128,128,130,129,128,129,126,126,125,127,132,130,127,126,129,131,127,127,133,133,127,122,125,129,130,127,127,130,129,
    126,125,127,128,129,128,128,128,128,127,127,129,128,129,129,128,126,127,129,127,128,127,128,130,129,129,128,128,127,127,129,130,128,128,129,129,127,127,128,128,128,128,128,128,126,126,129,129,127,129,130,130,126,126,128,128,127,128,131,130,127,126,126,128,129,125,128,130,131,128,126,129,128,129,125,126,130,129,131,130,131,129,125,128,129,131,130,127,130,129,127,128,127,129,128,126,126,127,128,126,
    127,127,128,128,128,127,127,127,127,127,129,128,129,128,128,129,129,128,128,129,128,128,128,129,0xff,
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:10:34.670

我猜你正在将音频数据加载到内存中。变量声明，如

```
 char* data = "somerandomdata"; 
```

将所有数据放入 SRAM 中，而 mega8 中只有 1kbyte 的 SRAM（其中还包含堆栈等）。

如果锁定位处于其原始状态，则引导加载程序机制不应导致此错误。

您应该将音频数据指定为程序空间，以下是说明如何：

[Avr LibC PGM 空间](http://www.nongnu.org/avr-libc/user-manual/group__avr__pgmspace.html)

这是您的代码的外观：h4.c

```
 #include <avr/pgmspace.h>

       const unsigned char h4[] PROGMEM = { 18,7,0,0,128,128,128,127,127,129,129,127,126,128,130,129,128,129,127,127,128,12‌​8,132,127,129,126,128,128,127,127,127,129,127,127,130,129,127,127,129,130,129,125‌​, 
```

您需要调整您的 set_audio 函数，每次读取指针 h4 都应以这种方式完成：例如更改

```
 value = *h4_copy++; 
```

到

```
 value = pgm_read_byte(h4_copy); h4_copy++; 
```

# android - NoClassDefFoundError + C2DMessaging

> ID：12525644
> 
> 赞同：1
> 
> 时间：2012-09-21T06:57:53.013
> 
> 标签：android, android-c2dm, noclassdeffounderror

我上周将我的 android sdk 更新到 4.0 (14)，现在当我尝试使用 C2DMessaging 类时出现以下错误：

java.lang.NoClassDefFoundError: com.google.android.c2dm.C2DMessaging

有人已经看到这个错误了吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:56:16.563

在您的项目构建路径中添加**gcm.jar(client side) 。**

# cakephp - 验证具有相同名称的多个字段

> ID：12525645
> 
> 赞同：0
> 
> 时间：2012-09-21T06:58:19.657
> 
> 标签：cakephp, cakephp-2.1

我有一个看起来像这样的视图文件：

```
<?php
    echo $this->Form->create('ModelName');
        echo $this->Form->input('ModelName.0.firstField');
        echo $this->Form->input('ModelName.0.secondField');
        echo $this->Form->input('ModelName.1.firstField');
        echo $this->Form->input('ModelName.1.secondField');
    echo $this->Form->end();
?> 
```

我的问题是，如何验证这些数据？我没有保存，所以调用 save 或 saveAll 方法对我来说似乎毫无意义。我只想在处理数据之前验证数据并将结果显示给用户。

当前使用会发生什么：

```
<?php
    if ($this->request->is('post')) {
        $this->ModelName->set($this->request->data);
        if ($this->ModelName->validates()) {
            echo $this->Session->setFlash('Success');
        } else {
            echo $this->Session->setFlash('Failure');
        }
    }
?> 
```

即使我输入肯定会失败的数据，它是否总是成功。我也试过：

```
<?php
    if ($this->request->is('post')) {
        if ($this->ModelName->validateMany($this->request->data)) {
            echo $this->Session->setFlash('Success');
        } else {
            echo $this->Session->setFlash('Failure');
        }
    }
?> 
```

并且总是返回成功，但这可能是因为我不知道如何正确使用 validateMany。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:22:28.173

`Model::set`用于将单个数据集/记录分配给模型的当前实例。因此，您可能只验证 POST 数据中的第一组数据。您将不得不遍历 POST 数据中的每条记录，将其遍历`Model::set`到模型数据，然后调用`Model::validates`.

代替上述方法 or `Model::validateMany`，尝试使用`Model::saveAll`而不实际保存。

[http://api20.cakephp.org/class/model#method-ModelsaveAll](http://api20.cakephp.org/class/model#method-ModelsaveAll)

> validate：设置为 false 以禁用验证，设置为 true 以在保存之前验证每条记录，“first”以在保存任何记录之前验证所有记录（默认），或“only”以仅验证记录，但不保存它们。

```
<?php
    if ($this->request->is('post')) {
        if ($this->ModelName->saveAll($this->request->data, array('validate' => 'only'))) {
            echo $this->Session->setFlash('Success');
        } else {
            echo $this->Session->setFlash('Failure');
        }
    }
?> 
```

# c# - Selenium 可以检测您的 .net 应用程序部署到哪个端口

> ID：12525648
> 
> 赞同：1
> 
> 时间：2012-09-21T06:58:29.190
> 
> 标签：c#, asp.net-mvc, selenium

我最近开始将 Selenium 用于我正在处理的 .net 项目。
它似乎工作得很好，但显然你必须提供一个 URL，`http://localhost:55555`或者你正在测试你的应用程序的任何地址。
我的问题是我的团队 Visual Studio 中不同人的计算机部署到本地主机上的不同端口号，因此每次要通过测试，他们都必须找出计算机在本地部署的端口并在测试中更改它。
有谁知道我可以自动检测端口号的方法，这样就不需要为每个人的计算机进行更改？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:23:45.230

我不认为你可以用 Selenium 做到这一点，因为端口号是由 VS 在启动期间随机设置的。但是，解决问题的常见方法是让每个人都使用相同的测试端口。[这篇文章](https://stackoverflow.com/questions/5738451/how-to-get-a-web-service-to-use-a-fixed-port-number-when-using-the-visual-studio)展示了如何做到这一点。

# php - 在 IIS 中使用 PHP 重新启动 Apache

> ID：12525650
> 
> 赞同：1
> 
> 时间：2012-09-21T06:58:35.313
> 
> 标签：php, iis-7, exec, apache2.2

我正在尝试使用 bat 文件重新启动我的 Apache2.2 网络服务器，该文件由在 IIS 中使用 exec() 运行的 PHP 调用，Apache 和 IIS 在同一台服务器中。

PHP 代码

`exec("cmd /c restart.bat");`

蝙蝠文件

`"PATH_TO_APACHE\bin\httpd.exe" -k restart -n Apache2.2`

当我通过 http 加载我的 php 以重新启动时，我的 Apache 错误日志文件中出现“无法打开日志”错误。

我的大多数搜索结果都说存在端口 80 冲突，但是当我执行 netstat 时没有，我的 IIS 正在侦听不同的端口。双击 .bat 文件可以工作，但从 PHP 运行它会出错。有任何想法吗？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:08:48.737

IIS 在指定用户的上下文下运行所有​​可执行脚本，通常这是 IUSR_[MACHINENAME] 帐户。可以在池配置中的 IIS 配置中更改此帐户。

您遇到的问题可能是不允许该用户访问日志文件位置。

为了追查这个问题，我会： 1.（危险，仅用于测试）：将 IUSR 帐户放在本地管理员组中。再次测试。如果它有效，你就知道这是一个权限问题。2.尝试使用runas命令以IUSR用户运行cmd.exe并在控制台窗口中执行你的命令，这样你就可以看到所有的错误信息并且更容易测试。3.允许IUSR写入apache日志位置。

一个完全不同的尝试是在 PHP 中创建一个标记文件，如果该标记文件存在，则使用以管理员身份运行的计划任务重新启动 apache。这样你就不需要给 IUSR 账户更多的权限并且有一个单独的代码来处理重启。

# iphone - iOS - HelveticaNeueLTStd-LtCn 垂直对齐

> ID：12525652
> 
> 赞同：0
> 
> 时间：2012-09-21T06:58:38.590
> 
> 标签：iphone, ios, uitableview, uifont

我在我的 iPhone 应用程序中使用了一种名为 HelveticaNeueLTStd-LtCn 的字体，但我发现该字体的垂直对齐方式很奇怪。文本下方有填充：

![在此处输入图像描述](../Images/aea7ec15032f0ffb026dcbfb575aa721.png)

结果是表格视图单元格的底部填充大于顶部。我能做些什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:45:39.377

我通过使用自己的单元格并向下移动标签解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T09:42:31.290

请检查这篇文章以修复它[http://www.andyyardley.com/2012/04/24/custom-ios-fonts-and-how-to-fix-the-vertical-position-problem/](http://www.andyyardley.com/2012/04/24/custom-ios-fonts-and-how-to-fix-the-vertical-position-problem/)

1.下载并安装“Apple Font Tool Suite”

2.生成字体设置xml文件

```
ftxdumperfuser -t hhea -A d font.ttf 
```

3.更改输出xml中的以下“ascender”和“descender”设置。

```
ascender="975"
descender="-227" 
```

4.调整字体文件

```
ftxdumperfuser -t hhea -A f font.ttf 
```

您的字体文件将垂直居中。

# sql - MS Access 表单中的 SQL 语法

> ID：12525664
> 
> 赞同：1
> 
> 时间：2012-09-21T06:59:07.427
> 
> 标签：sql, parameters

我有一个 SQL 语法问题，我已经苦苦挣扎了好几天。

我创建了一个名为 MS Access 2010 的表单`IP Country Form`，我希望将其插入到一个名为`Country`Country 的 TextBox 中，该文本框是从以下查询获得的，该查询查询一个名为的表，该表`IPLocation`包含根据 IP 编号的国家和字段：

```
IPNS IPNE CY2(2 letter Country Code) CY3(3 Letter country Code) Country (full Country Name) 
```

表行如下所示：

```
IPNS     | IPNE     | CY2 | CY3 | COUNTRY
19791872 | 19922943 | TH  | THA | THAILAND 
```

该表单根据 IP 地址计算 IP 编号并将其放置在名为 的文本框中`IPNumber`，然后我在 SQL 查询中使用该文本框来获取与其对应的国家/地区。

我目前的查询是：

```
SELECT IPLocation.IPNS, IPLocation.IPNE, IPLocation.CY2, IPLocationCY3, IP.Location.Country 
  FROM IPLocation 
 WHERE (((IPLocation.IPNS)<" & [Forms]![IP Country Form]![IPNumber]) 
   And ((IPLocation.IPNE) > " & [Forms]![IP Country Form]![IPNumber])) 
```

IPNS、IPNE 和 IPNumber 一样是数字

本质上，该查询旨在查找 IPNumber 位于 IPNS 和 IPNE 之间的国家。

任何帮助将非常感激。

我使用的测试查询：

```
Set rst = dbs.OpenRecordset("
                 SELECT IPLocation.IPNS, IPLocation.IPNE, IPLocation.CY2, IPLocation.CY3,
                        IPLocation.Country 
                   FROM IPLocation 
                  WHERE (((IPLocation.IPNS)>19791871) 
                    AND ((IPLocation.IPNE)<19922944))
           ") 
```

工作正常并返回正确的国家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:31:30.320

`AND`在您在代码上使用的查询中，您在子句上反转了比较运算符。

`IPLocation.IPNS)` **>** `" & [Forms]![IP Country Form]![IPNumber]`

`IPLocation.IPNE)` **<** `" & [Forms]![IP Country Form]![IPNumber]`

应该：

```
SELECT IPLocation.IPNS, IPLocation.IPNE, IPLocation.CY2, IPLocationCY3,
       IP.Location.Country 
  FROM IPLocation 
 WHERE (((IPLocation.IPNS) > " & [Forms]![IP Country Form]![IPNumber]) 
   And ((IPLocation.IPNE) < " & [Forms]![IP Country Form]![IPNumber])) 
```

# google-apps-script - 创建谷歌文档档案

> ID：12525666
> 
> 赞同：0
> 
> 时间：2012-09-21T06:59:22.870
> 
> 标签：google-apps-script

我正在运行以下代码。它说

> **UrlFetchApp.fetch()**中的意外错误

 **```
function archive(){
 var oauthConfig = UrlFetchApp.addOAuthService("docs");
  oauthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oauthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope=https://docs.google.com/feeds/");
  oauthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oauthConfig.setConsumerKey(consumerkey);
  oauthConfig.setConsumerSecret(consumerSecret);

    var requestData = {

    "method": "POST",
    "headers": { "GData-Version": "3.0" },
    "oAuthServiceName": "docs",
       "payload":getPayload(),
    "oAuthUseToken": "always"
  };

 var url='https://docs.google.com/feeds/default/private/archive'
  var result = UrlFetchApp.fetch(url, requestData);

  }
function getPayload() {

var xml='<?xml version="1.0" encoding="UTF-8"?>'+
  '<atom:entry xmlns="http://www.w3.org/2005/Atom" xmlns:docs="http://schemas.google.com/docs/2007">'+
  '<docs:archiveConversion source="application/vnd.google-apps.document" target="application/msword"/>'+
  '<docs:archiveConversion source="application/vnd.google-apps.spreadsheet" target="text/csv"/>'+
  '<docs:archiveConversion source="application/pdf" target="application/pdf"/>'+
  </atom:entry>';
   Logger.log(xml)
   return xml;
  }

If you have another way to do this, please let me know asap.

Thank you in advance!! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:17:51.857

我可以分享我目前使用 UrlFetchApp.fetch() 的经验

在今天之前，我的脚本（在几张纸上）工作正常，但今天它给出了一个错误。经过一些修补后，我通过将 url 中的 https 更改为 http 来重新运行。

这很可能与您的问题巧合，我不声称知道，但我发布以防万一。

（*在我的情况下，错误报告为：*

> [意外错误：https://theURLcalled...(line44)]

*其中第 44 行是代码*
`var response = UrlFetchApp.fetch(url)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:19:07.533

以下示例可能对您有所帮助。这些示例使用 Google OAuth 和 UrlFetch

[https://sites.google.com/site/appsscripttutorial/urlfetch-and-oauth/get-the-document-list-of-a-domain-user](https://sites.google.com/site/appsscripttutorial/urlfetch-and-oauth/get-the-document-list-of-a-domain-user) https://sites.google.com/site/appsscripttutorial/urlfetch -and-oauth/share-docs-between-domain-users [https://sites.google.com/site/appsscripttutorial/applications/doodle-for-your-domain](https://sites.google.com/site/appsscripttutorial/applications/doodle-for-your-domain)**

# android - 更改 Android ActionBar UP/Home 按钮的向下状态颜色

> ID：12525668
> 
> 赞同：0
> 
> 时间：2012-09-21T06:59:34.383
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ABS，我基本上只是想知道是否有任何属性可以让我覆盖我按下按钮的默认蓝色。我的应用程序全是红色的，这是一个让我很头疼的小细节。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:00:13.840

主题属性将`actionBarItemBackground`允许您更改操作项选择器。

如果您将它与 ActionBarSherlock 一起使用，请确保提供一个带前缀和不带`android:`前缀的条目。

# c++ - 从图中删除一条边

> ID：12525669
> 
> 赞同：0
> 
> 时间：2012-09-21T06:59:34.867
> 
> 标签：c++, boost, graph, boost-graph, edges

我想从使用 Boost 图形库生成的图形中删除一些边。

我使用 Boost`boost::mt19937`生成从 1 到 N（顶点数）的随机数，如下所示，并添加随机边。

```
#include "stdafx.h"
#include <ctime>
#include <iostream>
#include <utility>                   // for std::pair
#include <algorithm> 
#include <time.h>
#include <boost/graph/adjacency_list.hpp>
#include "boost/graph/topological_sort.hpp"
#include <boost/graph/graph_traits.hpp>
#include <boost/graph/graphviz.hpp>
#include "boost/generator_iterator.hpp"
#include "boost/random.hpp"

// ----------------------------------------------
// Reading the number of vertices from the user.
//-----------------------------------------------

int read_int(std::string const & initmsg, std::string const & repeatmsg)
{
    std::cout << initmsg;

    for (std::string line; std::getline(std::cin, line); )
    {
        std::istringstream iss(line);
        int res;

        if (iss >> res >> std::ws && iss.get() == EOF) { return res; }

        std::cout << repeatmsg;
    }

    std::cerr << "Unexpected end of input! Aborting.\n";
    std::exit(1);
}

int main()
{
    using namespace std;
    using namespace boost;
    typedef boost::mt19937 RNGType;

    //Assignign a property value to first vertex, (i.e) the name
    typedef property<vertex_name_t, std::string> VertexNameProperty;

    // Defifning the type of gprah(undirected)
    typedef adjacency_list< listS, vecS, undirectedS, VertexNameProperty > undigraph;

    // a vertex iterator to iterate through the vertex to get the property vale
    typedef graph_traits<undigraph>::vertex_iterator vertex_iter;
    std::pair<vertex_iter, vertex_iter> vp;

    int const N = read_int("Number of vertices: ",
        "I did not understand, try again. Number of vertices: ");   

    // Creating a instance g of unigraph undirected graph
    undigraph g;

    //Assigining property(name) to graph vertex
    property_map<undigraph, vertex_name_t>::type
        name = get(vertex_name, g);
    typedef graph_traits<undigraph>::vertex_descriptor Vertex;
    Vertex u1;
    u1=add_vertex(g);
    name[u1] = "Controller";

    // Creatng other vertices in the graph by iterating
    for(Vertex p = 1; p <= N-1; ++p)
    {
        p=add_vertex(g);
    }

    // Priting out the controller
    vp = vertices(g);
    std::cout << "The name of the first vertex is " << name[*vp.first]<<" and the output graph is:" <<std::endl;

    // --------------------------------------------------------------
    // Generating a random edges from a vertex, maximum edges are four
    //    Using Mersenne twister- A Pseudo random generator algorithm
    //     Mersenne twister gives un-distributed random numbers
    //----------------------------------------------------------------

    RNGType rng( time(0) );
    boost::uniform_int<> one_to_four( 1, (N-1) );
    boost::variate_generator< RNGType, boost::uniform_int<> >gen(rng, one_to_four);
    for(int i =0; i<(N-1); i++)
    {
        int k = 0;
        while(k<(N-1))
        {  
            int n  = gen();
            // Adding edges onto graph

            if(!boost::edge(i, n, g).second && !boost::edge(n, i, g).second)
                {
                add_edge(i, n, g);
                k++;
                }

        }
        // removing edges that direct to same vertex graph
    }   

    write_graphviz(cout, g);
    return 0;
} 
```

但是如果我有以下 4 个顶点，我会得到上面的输出：

```
graph G
0;
1;
2;
3;
4;
0--1 ;
0--2 ;
0--2 ;
0--2 ;
1--3 ;
2--1 ;
2--4 ;
3--2 ;
3--2 ;
3--4 ;
} 
```

但可以看出，边缘`(0,2) and (3,2)`是重复的。对于较大的图，有时例如：`(1,3) and (3,1)`exists 并且它们都与无向图相同。如何删除这些顶点。我知道 Boost 有一个叫做 的东西`remove_edge_if()`，但是我没有找到任何精确的例子来支持我的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:21:54.563

正如它应该。您在不检查源节点和结束节点的情况下获取一堆随机数并为它们添加边，因此存在一些重复和一些循环路径也就不足为奇了。

我建议改变

```
add_edge(i, n, g)
k++ 
```

至

```
if(!has_edge(i,n,g))
{
    add_edge(i, n, g)
    k++
} 
```

如果您只想要一对节点之间的一条边而不管方向：

```
if(!has_edge(i,n,g) && !has_edge(n,i,g))
{
    add_edge(i, n, g)
    k++
} 
```

我还建议不要添加边缘，然后再删除它们。所以我会删除你的检查`(i == i)`（无论如何它**永远不会**是假的），并`(i != n)`在调用`add_edge`.

## 编辑后

这个：

```
for(Vertex p = 1; p <= N-1; ++p)
{
    p=add_vertex(g);
} 
```

很可能会出错。您正在迭代，`p`但也在`p`进行时进行编辑。不过可能不是。另外，您是否`N`在任何阶段输出以检查其价值？

## 尝试运行后

它没有元素，它在生成图形时挂起。我想那是因为你的`while(k<(N-1))`. 您试图让每个节点都`N-1`连接到其他节点。但同时，您不会接受与已连接到当前节点的节点的连接。当您尝试为第二个节点生成边时，它无法连接到自身或第一个节点（已经连接到它），因此最多有 (N-2) 个连接。但是你一直等到它被发现`N-1`，这永远不会发生。

我尝试将其更改为`while(k<(N/2))`，这似乎对我有用。

# ruby-on-rails - 带有查询参数的获取请求的 Rails 路由

> ID：12525672
> 
> 赞同：0
> 
> 时间：2012-09-21T06:59:45.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, restful-url

我需要一个路由来接受`reports#show`带有附加`:query`参数的请求，但我不知道如何编写它。在我看来，它需要响应这个链接：

```
= link_to report_path(query: params[:query]) do 
```

配置/路由.rb

```
 resources :reports do
    resources :chapters
    resources :pages
  end 
```

尝试了以下变化：`get '/reports/:id/:query', :as => 'reports_query'`但我不断得到：

```
Routing Error

No route matches {:action=>"show", :controller=>"reports", :query=>"europe"} 
```

项目主要是 RESTful，但我会在这一点上采用任何可行的方法。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T12:10:04.343

我在这里遇到了同样的问题，我[`default`](http://guides.rubyonrails.org/routing.html#defining-defaults)在定义路线时使用参数解决了它。

`get :twitter_form, defaults: { form: "twitter" }, as: :twitter_form, to: "campaigns#show"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:18:29.433

您应该使用这样的代码定义查询路线

```
# routes.rb
resources :reports do
  get ':query', to: 'reports#show', on: :member, as: :query
end 
```

它将生成您可以使用的路径助手

```
= link_to 'Query Report', query_report_path(@report, query) 
```

# jquery - 如何在 jQuery 中获取 rel 值？

> ID：12525674
> 
> 赞同：0
> 
> 时间：2012-09-21T06:59:46.563
> 
> 标签：jquery, jquery-ui, drag-and-drop, rel

我使用 jQuery UI 拖放功能来选择相册中的图像。在 rel 参数中存储的图像 ID，我需要在图像删除后复制到输入元素。

这是图像列表。使用可拖动

```
<img src="01.jpg" title="image 01" rel="10" />
<img src="02.jpg" title="image 02" rel="11" />
<img src="03.jpg" title="image 03" rel="12" /> 
```

放在这里：

```
<div id="dropzone">
    <div id="imgcontainer"></div>
    <input type="text" name="img_id" id="img_id" />
</div> 
```

可放置的 JS 代码在这里：

```
$('#dropzone').droppable({
    hoverClass: 'bgSelected',
    drop: function(event, ui) {
        $(this).html(''); // to remove any other stuffs
        var img = ui.draggable;
        $('<img src="'+img.prop('src')+'" title="'+img.prop('title')+'">').appendTo( $(this) );
        $('<input type="text" name="img_id" id="img_id" value="'+img.prop('rel')+'" />').appendTo( $(this) );
    },
}); 
```

并且 img.prop('rel') 返回空字符串。我尝试使用 img.attr('rel')，但它返回一个对象元素。如何获得“rel”值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:03:50.210

你可以使用`attr`insted of prop。喜欢 ..

```
$(function() {
  $('#dropzone').droppable({
    hoverClass: 'bgSelected',
    drop: function(event, ui) {
         var img = ui.draggable;
        //alert($(ui.draggable));
        var id =img.attr('rel');

    $(this).html(''); // to remove any other stuffs

     $('<img src="'+img.prop('src')+'" title="'+img.prop('title')+'">').appendTo( $(this) );
      $('<input type="text" name="img_id" id="img_id" value="'+id+'" />').appendTo( $(this) );
    },
  }); 
```

这是一个小提琴链接[http://jsfiddle.net/fLJuB/19/](http://jsfiddle.net/fLJuB/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:21:26.560

如果您使用 ui.draggable 在对象中获取其他属性，也许您可​​以使用一些 jquery 选择器。例如，如果`img.prop('src')`返回src属性权，您可以使用它来选择带有jquery属性选择器的图像

```
alert($('img[src="' + img.prop('src') + '"]').attr('rel')); 
```

编辑：嗨，这很好用->[链接](http://jsfiddle.net/fLJuB/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:03:30.047

```
alert($("#img").attr("rel")); 
```

如果你使用 .attr("rel")。**文本（）**它不会工作。

# ps3 - SPU 指令指针

> ID：12525678
> 
> 赞同：0
> 
> 时间：2012-09-21T07:00:04.947
> 
> 标签：ps3, spu

我一直在搜索整个手册，但找不到任何提及指令指针的内容。我需要这个用于我正在编写的 SPU 程序。也许它有不同的名字？谁能告诉我如何访问要执行的指令的地址？在此先感谢您的帮助。更新：显然它被称为程序计数器，但我如何从我的 SPU 程序中访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:42:02.460

如果只想获取指令指针，可以在汇编中进行：

```
brsl r<n>, .+4 
```

这会将下一条指令的地址加载到寄存器`r<n>`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:08:16.280

似乎您可以通过执行[`spe_context_run`](http://moss.csc.ncsu.edu/%7Emueller/cluster/ps3/SDK3.0/docs/accessibility/libspe/cplsrunc/spe_context_run.html)操作来获取下一条指令：

`int spe_context_run(spe_context_ptr_t spe, unsigned int *entry, unsigned int runflags, void *argp, void *envp, spe_stop_info_t *stopinfo)`

> `entry`
> 
> 输入：入口点，即 SPU 指令指针的初始值，SPE 程序应在该处开始执行。如果entry的值为SPE_DEFAULT_ENTRY，则从加载的SPE镜像中获取SPU主程序的入口点。这通常是初始化函数 crt0 的本地存储地址（参见 Cell Broadband Engine Programming Handbook, Objects, Executables, and SPE Loading）。
> 
> 输出：SPU 停止执行时的 SPU 指令指针，即将执行的下一条指令的本地存储地址。
> 
> 例如，此参数可用于允许 SPE 程序“暂停”并向 PPE 线程请求某些操作，例如执行 I/O 操作。完成此 PPE 端操作后，您可以继续 SPE 程序再次调用 spe_context_run 而无需更改条目。

# ruby - 为什么在这个 Ruby 脚本中会打印两次“hello”？

> ID：12525682
> 
> 赞同：2
> 
> 时间：2012-09-21T07:00:14.197
> 
> 标签：ruby

我决定尝试在 Ruby 中的方法中定义方法并写下：

```
def foo
  def bar
    puts "hello"
  end
  bar
end 
```

这个定义，我跑了`foo`，“你好”按我的预期打印了。但是我然后尝试`foo.bar`了 - 它打印了两次“你好”。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T07:06:43.430

`foo.bar`等于`foo().bar()`所以你首先调用`foo`包含`bar`所以它在这里执行一次，然后再`bar`执行一次。最后`bar`被调用两次。

```
def foo
  puts 'foo called'
  def bar
    puts 'bar called'
    puts "hello"
  end
  bar
end
foo.bar
#=> foo called
#=> bar called
#=> hello
#=> bar called
#=> hello 
```

我不明白的是这意味着结果`foo`是`nil`可以调用`bar`。

```
>> nil.bar
#=> hello 
```

这怎么可能？

**编辑**：正如一些答案中所解释的，嵌套方法包含在类范围内，因此在 foo 内部或外部声明 bar 没有任何区别。

Matz 也[表示](http://www.rubyist.net/~matz/20101113.html)可能会从 Ruby2.0 更改

这是他写的例子：

```
class Foo
  def foo
    def bar
      #omited
    end
    bar # can be called
  end

  def quux
    bar # cannot be called
  end
end 
```

**edit-Ruby2.0**：最终没有实现。所以它保持不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T07:27:33.667

在 Ruby 中，有一个隐藏变量并没有引起太多关注。我不知道它叫什么，但我称它为当前类。这个变量是目标`def`

当你进入 时`foo`，它不会改变这个变量，你仍然在同一个班级。因此，当您在 foo 中定义另一个方法时，该方法将被定义在与 foo 定义相同的类上。

在这种情况下，您在顶级对象 main 上定义 foo。Main 的当前类变量设置为 object，因此您在此处定义的任何方法都将在任何对象中可用。

由于你做的最后一件事是返回 bar 的结果，而 bar 返回 nil（b/c puts 返回 nil），那么`foo.bar`is `nil.bar`。而且由于您在 Object 上定义了 bar，因此即使 nil 也会继承此方法。

有趣的是，酒吧是公开的。由于 foo 是在 main 中定义的，并且 main 将其范围设置为私有，我本来希望 bar 也是私有的，但我想一旦你进入不同的范围，状态肯定会丢失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T07:05:55.160

你的意思是放`class foo`？似乎调用 foo.bar 调用函数 foo 然后调用函数 bar。呼叫`nil.bar`也会打印出“你好”。

# jsp - 检测多次出现的自定义 JSP 标记

> ID：12525688
> 
> 赞同：0
> 
> 时间：2012-09-21T07:00:36.637
> 
> 标签：jsp, tags, taglib, custom-tags

我正在编写一个自定义标记库（1.2），其中包含循环标记和嵌套标记。有谁知道在第一个循环标记内是否有办法知道稍后在 JSP 中是否有更多相同的循环标记出现？

例子 ：

```
<tt:myLoopTag>
    <%--  
       Normally, if "myLoopTag" was the only one tag in the JSP, 
       I would do some stuff in the doEndTag method
    --%>
</tt:myLoopTag>

...

<tt:myLoopTag>
    <%--
       But I have a second "myLoopTag" here, so I would like to do
       some stuff in the doEndTag method of this tag, not in the first one
    --%>
</tt:myLoopTag> 
```

希望我足够清楚..

注意：不幸的是，我认为[这篇](https://stackoverflow.com/questions/1789373/custom-jsp-tag-detect-existence-of-other-instances)文章对我没有用......

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:20:39.647

我认为这不太可能。如果您查看为 JSP 页面（例如，在 tomcat/work 中）生成的 Java 代码，您就会明白原因。

JSP 页面被编译成 Servlet，它们按顺序写入 JspWriter 流。为了使您尝试做的事情成为可能，Java 代码必须能够“提前”查看稍后将在 Servlet 中执行的代码，或者需要追溯更改已经写入JspWriter 流。从技术上讲，其中一个或另一个*可能*是可行的，但如果是的话，我怀疑它会涉及很多黑客行为。

值得考虑为什么需要这样做。如何发布您的实际目标的详细信息，看看是否有人可以提出替代方法？

# c# - 从没有 COM 的 VBScript 调用 .NET 应用程序。可能的？

> ID：12525689
> 
> 赞同：1
> 
> 时间：2012-09-21T07:00:38.800
> 
> 标签：c#, .net, vba, com, vbscript

我有一个第三方应用程序，我可以在其中通过 VBScript 编写脚本。现在我想从中调用一个正在运行的 .NET 应用程序。如果我想用 COM 做到这一点，我必须使用`ExeComServer`. 问题是这在我的工作流程中是不可能的。由于强名称，COM+ 服务器也是不可能的。

我不得不将一个对象从 VBScript 转发到 .NET。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:19:25.783

如果 COM 不适合您，您可以尝试使用 VBScript 中的套接字，但您会遇到各种问题。您可以购买一些基于第 3 方 COM 的套接字库，但我从未使用过，因此我不推荐其中任何一个。您的 .NET 应用程序还必须进行大量修改以侦听端口并与您的脚本进行通信——这将是一些工作。

我能想到的另一个可能的选择是在 .NET 中创建一个支持 COM 的 .dll，它为您实现套接字逻辑并与您的 .NET 应用程序对话。然后，您可以从 VBScript 创建此对象的实例并通过 COM 与它对话。然后，您的 .dll 将使用套接字与 .NET .exe 对话。这会在套接字的末端为您提供 2 个 .NET 对象 - 在 .NET 中实现这一点更容易。你仍然需要改变你的主 .exe 来监听一个套接字。

这有点复杂，因为 VBScript 被设计为使用 COM - 您不使用 COM 的要求是您可以做的限制因素。（即使我的想法会涉及一个 COM 对象，但至少它会消除对 EXE COM 服务器的要求。）可能有更简单的选择——这只是我的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:53:12.983

One way to call a running .NET application would be to expose a WCF service from the .NET application. VBScript can call web services, e.g. using the XMLHTTP object.

On the other hand, you also said:

> I had to forward an object from VBScript to .NET.

If by this you mean marshal a COM object, I don't think you have any alternative but to use COM.

# selenium - 如何在 Selenium Webdriver 中使用属性文件

> ID：12525690
> 
> 赞同：0
> 
> 时间：2012-09-21T07:01:00.653
> 
> 标签：selenium, selenium-rc, selenium-webdriver

```
 //Reading data from property file :

      String username = prop.getProperty("username");
      String password = prop.getProperty("password");
           @Test
public void testValidCredentials()  {
obj.loginAs("username","password"); 
```

}

public HomePage loginAs(String username, String password) {

```
 driver.findElement(By.id("id1")).sendKeys(username);
    driver.findElement(By.id("id2")).sendKeys(password);
    driver.findElement(By.id("id3")).click();
    return new HomePage(driver); 
```

}

**我试图做的是将用户名和密码传递给 loginAs 方法，但是当我传递它时，它会插入作为用户名的电子邮件和密码作为密码，而不是我从我的属性文件中读取的内容。** **属性文件**：用户名 = r@t.com 密码 = 1234

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:44:01.260

问题可能出在这一行

```
obj.loginAs("username","password"); 
```

将其更改为

```
obj.loginAs(username,password); 
```

即用户名，密码不带引号。

# java - 没有 context.openFileOutput 的 FileOutputStream(file,append) 的 Context.MODE_WORLD_READABLE 权限

> ID：12525693
> 
> 赞同：1
> 
> 时间：2012-09-21T07:01:43.703
> 
> 标签：java, android, file

我正在尝试添加`Context.MODE_WORLD_READABLE permission to FileOutputStream(file,append)`只能在`context.openFileOutput(name,Context.MODE_WORLD_READABLE)`但我不需要 openFileOutput 因为我无法创建子目录而且我需要追加模式`true`。

我能做些什么？？？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:06:35.300

而不是使用 openFileOutput / openFileInput 您可以通过 /data/data/（包名称）等路径从应用程序沙箱的内部存储访问文件/目录，并且在此路径上您可以执行任何能够创建目录或文件的操作。同样在这种情况下，您将能够使用文件可写模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:29:38.053

简短回答：像往常一样使用 FileOutputStream，然后关闭它，然后调用 File.setReadable。

在这里查看更多详细信息：[java set file permissions to 777 while creating a file object](https://stackoverflow.com/questions/6233541/java-set-file-permissions-to-777-while-creating-a-file-object)

# jquery - 试图理解，jQuery .css 如何在原生 javascript 中发挥作用？

> ID：12525695
> 
> 赞同：0
> 
> 时间：2012-09-21T07:02:04.723
> 
> 标签：jquery, jquery-selectors, javascript

外部 CSS 文件...

```
#externalClass { font-family: arial; } 
```

HTML 文件...

```
<a href="#" id="externalClass">Link</a> 
```

JavaScript 文件...

```
console.log(jQuery("#externalClass").css("font-family")); 
```

我得到“arial”，但无法理解它在本机 javascript 中是如何工作的（即使在 IE6/7/8/9 中）？

有人可以解释一下吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:05:32.167

它使用[`getComputedStyle()`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)（带有必要的后备，例如[`currentStyle()`](http://msdn.microsoft.com/en-us/library/ie/ms535231%28v=vs.85%29.aspx)）来计算`font-family`值。

[来源](https://github.com/jquery/jquery/blob/master/src/css.js#L285)。

当您想知道图书馆如何实现某些目标时，最好的方法是查看源代码，如果您无法理解它，那么谷歌更多或在这里询问:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:18:57.510

DOM 元素存在`style`属性，您可以在其中获取或设置所需的 CSS 样式。在你的情况下 -`document.getElementById("externalClass").style.fontFamily`

# c# - 获取功能以了解文件夹中文件的插入

> ID：12525697
> 
> 赞同：3
> 
> 时间：2012-09-21T07:02:08.860
> 
> 标签：c#

在 C# 中如何知道文件已插入到文件夹中。我在 C# 中需要这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:04:32.697

使用 FileSystemWatcher 类来完成这个任务。

请参考

[http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

[http://www.codeproject.com/Articles/2157/A-NET-File-System-Watcher](http://www.codeproject.com/Articles/2157/A-NET-File-System-Watcher)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:05:01.917

您可以使用 System.IO 命名空间中 File 类的 Exists 方法来确定指定文件是否存在：

```
bool System.IO.File.Exists(string path) 
```

例如：

```
using System;
using System.IO;

class Program
{
    static void Main()
    {
    // See if this file exists in the SAME DIRECTORY.
    if (File.Exists("TextFile1.txt"))
    {
        Console.WriteLine("The file exists.");
    }
    // See if this file exists in the C:\ directory. [Note the @]
    if (File.Exists(@"C:\tidy.exe"))
    {
        Console.WriteLine("The file exists.");
    }
    // See if this file exists in the C:\ directory [Note the '\\' part]
    bool exists = File.Exists("C:\\lost.txt");
    Console.WriteLine(exists);
    }
} 
```

# qt - ischecked 函数

> ID：12525699
> 
> 赞同：1
> 
> 时间：2012-09-21T07:02:16.757
> 
> 标签：qt

我对复选框使用了“ischecked”功能，它可以正常工作。我对按钮使用了相同的功能。按钮的默认状态是“未选中”，因此在这种情况下它工作正常，但是当我转到按钮的属性并将状态更改为选中并尝试像这样处理它时

```
if(ui->Button->isChecked()==Qt::Checked)
{
ui->label_2->setPixmap(QPixmap::fromImage(image));
ui->frame_10->setMinimumHeight(image.size().height() + 20);
} 
```

然后我可以在对话框中看到没有任何变化。为什么会这样？我应该怎么做才能使它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:13:14.910

创建按钮后，将按钮的“可检查”属性设置为 true：

```
Button->setCheckable(true); 
```

在[QAbstractButton::checkable()](http://doc-snapshot.qt-project.org/4.8/qabstractbutton.html#checkable-prop)：

> 此属性保存按钮是否可检查。**默认情况下，该按钮是不可检查的。**

# java - 二维条码检测和图像分割

> ID：12525700
> 
> 赞同：1
> 
> 时间：2012-09-21T07:02:22.097
> 
> 标签：java, image-processing, zxing, barcode-scanner

我正在研究二维条码阅读器 java ZXing 库。是否可以从具有多个条码的图像中识别二维条码？我必须首先将检测到的二维条码拆分为矩阵形式，然后对其进行解码。例如，我们有一个图像，它有 16 个不同的条形码，如 4*4 矩阵，该图像的所需输出将是：

```
 ROW      Column       Barcode output

(1,1)    1          1           784AS877
(1,2)    1          2           74AS5774
..
..
.. 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:55:57.197

当然。您始终可以`Reader`通过使用 中的裁剪参数告诉法线只查看图像的一个区域`LuminanceSource`。如果您知道这些盒子在哪里，那就最好了——遍历这些区域，一次一个地扫描和检查它们。

但是您还会发现支持自动尝试在`com.google.zxing.multi`包中的图像中查找多个条形码。使用那里的专用`Reader`包装器尝试自动找到它们。它对条形码的位置做了一些假设，在这种网格情况下可能无法正常工作，但您可以尝试。

# c# - 如何在 C# 中制作动态树视图？

> ID：12525701
> 
> 赞同：1
> 
> 时间：2012-09-21T07:02:24.743
> 
> 标签：c#, xml, dynamic, treeview

我正在开发一个系统，并且我有一个必须包含来自对象的项目结构的树视图。这个结构看起来像这样：

```
Project
 |- Module1
 |    |- Xml1
 |    |    |- Element
 |    |    |- Element
 |    |    |    |- Element
 |    |    |    |- Element
 |    |    |    |    |- Element
 |    |    |    |
 |    |    |    |- Element
 |    |    |
 |    |    |- Element
 |    |
 |    |- Xml2
 |         |- Element
 |
 |- Module2
      |- Xml1
           |- Element 
```

ETC..

现在，当我想将 Xml 文件添加到模块时很容易，因为我知道它上面有 2 个节点。c# 中的（项目，模块）：

```
public void AddXmlToTree(string xmlFile)
{
     projectTreeView.Nodes[0].LastNode.Nodes.Add(xmlFile);
} 
```

注意：我使用 LastNode 因为我按树的顺序添加它们。

现在的问题是：每个元素都可以有另一个元素，所以它基本上是无限的。我不能只做一百万种这样的方法。我需要一些别的东西，也许是一些递归方法。

我想我需要获取最后添加的元素对象的节点，以便我可以将下一个元素节点添加到这个我只是不知道如何获取它。

我希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:18:05.830

根本没有测试，但可以用作方向：

```
private void AddNodesRecursive(TreeNode parent, object childData)
{
    string strChildNode = string.Empty;
    XmlElement childDoc = null;
    if (parent != null)
    {
        if ((childData as string) != null)
        {
            parent.ChildNodes.Add(new TreeNode((childData as string)));
            return;
        }
        childDoc = childData as XmlElement;
        if (childDoc != null)
        {
            TreeNode subParent = new TreeNode(childDoc.InnerText);
            parent.ChildNodes.Add(subParent);
            foreach (XmlElement grandChild in childDoc.ChildNodes)
                AddNodesRecursive(subParent, grandChild);
        }
    }
} 
```

# asp.net-mvc-3 - JQuery 模态弹出按钮

> ID：12525702
> 
> 赞同：0
> 
> 时间：2012-09-21T07:02:27.893
> 
> 标签：asp.net-mvc-3

我需要一个使用 jquery 的按钮的模式弹出窗口。我曾为动作链接使用模态弹出窗口，但我只需要它与按钮一起使用。

我用于操作链接的 jquery：

```
 <%: Html.ActionLink("Create", "Create_By_SupAdmin", null, new { @class = "openDialog", 
data_dialog_id = "newPostDialog", data_dialog_title = "Create New Profile" }) %> 
```

是：

```
$(document).ready(function () {
    $('.openDialog').live('click', function (e) {
        e.preventDefault();
        $('<div></div>')
            .addClass('dialog')
            .attr('id', $(this)
            .attr('data-dialog-id'))
            .appendTo('body')
            .dialog({
                title: $(this).attr('data-dialog-title'),
                close: function () {
                    $(this).remove()
                    window.location.reload()
                    },
                modal: true,
                width: 500
            })
            .load(this.href);
    });
}); 
```

**问题**

我需要对按钮应用相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:06:10.357

您可以使用[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)。如果你让它与 ActionLink 一起工作，它与按钮相同。为对话框定义一个按钮和一个占位符：

```
<input type="button" id="btn" value="Show modal" />
<div id="dialog"></div> 
```

​​​

然后订阅按钮的点击事件并显示对话框：

```
$('#btn').click(function() {
    $('#dialog').dialog().html('some contents');
});​ 
```

这是一个[现场演示](http://jsfiddle.net/rRhDx/)。

* * *

现在您已经展示了您的代码，这里是如何调整它以使用按钮：

```
<input type="button" value="Create" class="openDialog" data-dialog-id = "newPostDialog", data-dialog-title="Create New Profile" data-url="<%= Url.Action("Create_By_SupAdmin") %>" /> 
```

接着：

```
$(document).ready(function () {
    $('.openDialog').live('click', function (e) {
        e.preventDefault();
        $('<div></div>')
            .addClass('dialog')
            .attr('id', $(this).attr('data-dialog-id'))
            .appendTo('body')
            .dialog({
                title: $(this).attr('data-dialog-title'),
                close: function () {
                    $(this).remove();
                    window.location.reload();
                },
                modal: true,
                width: 500
            })
            .load($(this).attr('data-url'));
    });
}); 
```

# ms-access - 主窗体文本框引用 Microsoft Access 子窗体中的组合框

> ID：12525704
> 
> 赞同：0
> 
> 时间：2012-09-21T07:02:46.403
> 
> 标签：ms-access, combobox, textbox

与 Microsoft 访问有关的快速问题。我才用了大约一个星期，所以我不知道很多。

我有一个表格，里面有一个子表格。在子表单中有一个组合框。当用户在子表单组合框中选择一个值时，我希望主表单的文本框显示用户从组合框中选择的内容。

我不认为这应该很难做到，我只是不知道代码应该是什么。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:46:56.727

您可以使用子窗体组合的更新后事件并将主窗体称为`Me.Parent`. 您的代码可能如下所示：

```
 Me.Parent.txtTextBox = Me.cboCombo 
```

# sql-server - 我想在 Sql 中像 21-Sep-12 这样的日期

> ID：12525707
> 
> 赞同：2
> 
> 时间：2012-09-21T07:03:07.517
> 
> 标签：sql-server, sql-server-2008

我已经搜索过，但我没有在 sql 中得到像 21-Sep-12 日期格式这样的格式。我得到了所有其他格式，但我没有得到这种类型的 Format.so，我怎样才能在 Date 中得到这样的格式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T07:06:27.713

您应该在 UI/Report 端进行格式化。

为什么需要这种格式？

但如果你必须尝试

```
SELECT REPLACE(CONVERT(VARCHAR(9), GETDATE(), 6), ' ', '-') AS [DD-Mon-YY] 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/4587/0)

[这是一个很好的格式列表](http://www.sql-server-helper.com/tips/date-formats.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:07:41.147

```
SELECT REPLACE(CONVERT(VARCHAR(9), GETDATE(), 6), ' ', '-') AS [DD-Mon-YY] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T07:18:32.683

```
 Declare @dt datetime=getdate()
 select REPLACE(convert(varchar(20),@dt,6),' ','-') 
```

# javascript - 如何在 ruby on rails 中清理“内联 JavaScript”？

> ID：12525708
> 
> 赞同：0
> 
> 时间：2012-09-21T07:03:18.873
> 
> 标签：javascript, ruby-on-rails

我正在专门用 ruby​​ on rails 开发一个应用程序，我发现 ruby​​ gem“sanitize”对于清理用户输入非常有用，但它不会删除内联 javascript，这使得它相当无用

我已经完成了[这些](https://stackoverflow.com/questions/8923695/how-best-to-sanitize-fields-in-ruby-on-rails)，但这并没有清理内联 javascript

有没有更好的方法（任何宝石左右）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:07:18.310

那么你可以设置一个白名单进行清理，只允许特定的标签和属性，所以我想你已经得到了你想要的东西：

```
Sanitize.clean(html, :elements => ['a', 'span'],
    :attributes => {'a' => ['href', 'title'], 'span' => ['class']},
    :protocols => {'a' => {'href' => ['http', 'https', 'mailto']}}) 
```

摘自 [http://wonko.com/post/sanitize](http://wonko.com/post/sanitize)

# vba - VBA - 从整数放入 X 轴计数器计时器中的 Excel 图表

> ID：12525715
> 
> 赞同：1
> 
> 时间：2012-09-21T07:03:52.730
> 
> 标签：vba, charts

在我的 Excel 图表中，Xaxis 显示当前顺序整数以 10 的倍数表示秒，如下所示：10 20 30 40 50 60 70 80 90 100 等等。如何在这个 Xaxis 分钟和秒中显示如下：00:00 00:10 00:20 00:30 00:40 00:50 01:00 01:10 01:20 01:30 等等？我使用下面的 VBA 来生成图表。

```
Sub NewChart()
'Create a chart

    Sheets(1).Select 'Select the active Sheet

    ActiveSheet.Shapes.AddChart.Select
    ActiveChart.ChartType = xlXYScatter

    LastLine = Sheets(2).Range("A" & Rows.Count).End(xlUp).Row

    Dim MaxScale As Integer
    Dim MTotal As Integer
    Dim Aprox As Integer
    Dim vName As String
    vName = Sheets(2).Range("B3")

    Dim Qx As Integer
    Qx = LastLine - 1
    Dim Rangg As Integer
    Rangg = (LastLine * 10) - 60
    MTotal = Rangg
    MaxScale = Rangg + 20

        With ActiveChart
        .ChartType = xlXYScatter
        'Set data source range.
        .SetSourceData Source:=Sheets(2).Range("A5:A" & Qx & ",B5:B" & Qx & ",E5:E" & Qx & ",H5:H" & Qx & ", K5:K" & Qx & ", N5:N" & Qx & ", Q5:Q" & Qx) ', 'PlotBy:=xlRows
        .HasTitle = True
        .ChartTitle.Text = vName '"2-7μm"

        'The Parent property is used to set properties of the Chart.
        With .Parent
          .Top = 2
          .Left = 2
          .Width = 540
          .Height = 252
          .Name = "2micron"
        End With

    ActiveChart.Legend.Select
            With Selection.Format.TextFrame2.TextRange.Font
                .NameComplexScript = "Tahoma"
                .NameFarEast = "Tahoma"
                .Name = "Tahoma"
            End With

        .Axes(xlCategory).MajorTickMark = xlInside
        .Axes(xlCategory).MinorTickMark = xlInside
        .Axes(xlCategory, xlPrimary).Select
        .Axes(xlCategory, xlPrimary).TickLabels.Font.Size = 5
        .Axes(xlCategory, xlPrimary).TickLabels.Font.Name = "Tahoma"
        .Axes(xlCategory, xlPrimary).TickLabels.Font.Bold = msoTrue
        .Axes(xlCategory, xlPrimary).HasTitle = True
        .Axes(xlCategory, xlPrimary).AxisTitle.Characters.Text = "Time (seconds)"
        .Axes(xlCategory, xlPrimary).AxisTitle.Font.Size = 11
        .Axes(xlCategory, xlPrimary).AxisTitle.Font.Bold = msoTrue
        .Axes(xlCategory, xlPrimary).AxisTitle.Font.Name = "Tahoma"
        .Axes(xlCategory, xlPrimary).MinorUnitIsAuto = False
        .Axes(xlCategory, xlPrimary).MajorUnit = 300
        .Axes(xlCategory, xlPrimary).MinorUnit = 60
        .Axes(xlCategory, xlPrimary).MaximumScale = MaxScale
        .Axes(xlCategory, xlPrimary).MinimumScale = 0
        .Axes(xlCategory, xlPrimary).HasMajorGridlines = True
        .Axes(xlCategory, xlPrimary).HasMinorGridlines = True
        .Axes(xlCategory).Format.Line.ForeColor.RGB = RGB(0, 0, 0)

        .Axes(xlValue).MajorTickMark = xlInside
        .Axes(xlValue).MinorTickMark = xlInside
        .Axes(xlValue, xlPrimary).Select
        .Axes(xlValue, xlPrimary).HasMajorGridlines = True
        .Axes(xlValue, xlPrimary).HasMinorGridlines = True
        .Axes(xlValue, xlPrimary).TickLabels.Font.Size = 11
        .Axes(xlValue, xlPrimary).TickLabels.Font.Name = "Tahoma"
        .Axes(xlValue, xlPrimary).TickLabels.Font.Bold = msoTrue
        .Axes(xlValue, xlPrimary).HasTitle = True
        .Axes(xlValue, xlPrimary).AxisTitle.Characters.Text = "Y axis Legend"
        .Axes(xlValue, xlPrimary).AxisTitle.Font.Size = 11
        .Axes(xlValue, xlPrimary).AxisTitle.Font.Name = "Tahoma"
        .Axes(xlValue, xlPrimary).AxisTitle.Font.Bold = msoTrue
        .Axes(xlValue).Format.Line.ForeColor.RGB = RGB(0, 0, 0)

        .Legend.IncludeInLayout = False
        .Legend.Select
        Selection.Position = xlTop
        Selection.Font.Size = 11
        Selection.Font.Name = "Tahoma"
        Selection.Font.Bold = msoTrue

        ActiveSheet.Shapes("2micron").ScaleWidth 1, msoFalse, _
            msoScaleFromTopLeft

        ActiveChart.SetElement (msoElementChartTitleAboveChart)
        ActiveChart.ChartTitle.Select
        Selection.Left = 2
        Selection.Top = 2
        Selection.Format.TextFrame2.TextRange.Font.Size = 13.2
        Selection.Format.TextFrame2.TextRange.Font.Name = "Tahoma"
        Selection.Format.TextFrame2.TextRange.Font.Bold = msoTrue
        ActiveChart.Legend.Select
        Selection.Left = 180
        Selection.Top = 2
            With Selection.Format.Line
                .Visible = msoTrue
                .ForeColor.ObjectThemeColor = msoThemeColorAccent1
                .ForeColor.TintAndShade = 0
                .ForeColor.Brightness = 0
            End With
        ActiveChart.PlotArea.Select
        Selection.Top = 22
        Selection.Left = 20
        Selection.Height = 207
        Selection.Width = 540
        Selection.Border.LineStyle = xlSolid
        Selection.Border.Color = vbBlack
        Selection.Interior.Color = vbWhite
        End With

Call f_l2m1(1, 8, RGB(0, 176, 240))
Call f_l2m1(2, 3, RGB(255, 0, 0))
Call f_l2m1(3, 1, RGB(255, 0, 255))
Call f_l2m1(4, 2, RGB(153, 0, 255))
Call f_l2m1(5, 4, RGB(153, 0, 255))
Call f_l2m1(6, 9, RGB(146, 208, 80))

Range("a22").Select
End Sub

Sub f_l2m1(LineNo, MStyle, vRGB)

With ActiveSheet.ChartObjects("2micron").Chart

                    ActiveChart.SeriesCollection(LineNo).Select
                    With Selection
                        .MarkerStyle = MStyle
                        .MarkerSize = 7
                        .MarkerForegroundColor = vRGB
                    End With
                    Selection.Format.Fill.Visible = msoFalse
                    Selection.Format.Line.Visible = msoFalse
                    Selection.Format.Line.ForeColor.RGB = vRGB
End With
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:40:04.630

将您的数据从整数秒转换为实际时间：除以 86400（60 秒/分钟*60 分钟/小时*24 小时/天）

使用数字格式 MM:SS

确保图表是 XY 图表。X 轴应该从数据中获取 MM:SS 格式，但如果不是，您可以通过格式化轴来格式化它。

# xml - 用整棵树复制 xml 元素

> ID：12525717
> 
> 赞同：0
> 
> 时间：2012-09-21T07:04:18.063
> 
> 标签：xml

是否可以与所有父母一起从 xml 中复制一个元素？

如：

```
<root>
  <child>child1</child>
  <child>
    <subchild>subchild21</subchild>
  </child>
</root> 
```

到：

```
<root><child><subchild>subchild21 
```

或同等的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:34:14.577

为此放置一些ID`<subchild>`并创建新的xml它将起作用

```
XDocument myXMLDocument = XDocument.Load("File.xml");
XElement mychildElement = myXMLDocument.Element("child");
XElement myFirstchildElement = mychildElement.Element("subchild");
XElement myNewchildElement = new XElement(myFirstchildElement);
XAttribute myChildId = myNewParentElement.Attribute("id");
mychild.Value = "subchild";
myFirstchileElement.AddAfterSelf(myNewchildElement);
myXMLDocument.Save("NewFile.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:56:00.197

只是为了将来参考，您可以使用 Web 浏览器的 DOM 实现类似的功能：

```
var o = document.getElementsByTagName("subchild")[0];
var _xmlstr = o.innerText;
while( o ){
   _xmlstr = "<"+o.tagName.toLowerCase()+">"+_xmlstr; 
   o = o.parentNode;
}; 
```

结果：

`<root><child><subchild>subchild21`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:39:10.027

Notepad++ 和 XML 工具做到了！

这是可能的

```
Ctrl + Alt + Shift + P 
```

并称为 XPath

# python - 规范化 pandas 中的数据

> ID：12525722
> 
> 赞同：141
> 
> 时间：2012-09-21T07:04:23.710
> 
> 标签：python, pandas, numpy

假设我有一个熊猫数据框`df`：

我想计算数据框的列平均值。

这很简单：

```
df.apply(average) 
```

然后按列范围 max(col) - min(col)。这又很容易：

```
df.apply(max) - df.apply(min) 
```

现在对于每个元素，我想减去其列的平均值并除以其列的范围。我不知道该怎么做

非常感谢任何帮助/指针。

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-09-21T07:14:15.117

```
In [92]: df
Out[92]:
           a         b          c         d
A  -0.488816  0.863769   4.325608 -4.721202
B -11.937097  2.993993 -12.916784 -1.086236
C  -5.569493  4.672679  -2.168464 -9.315900
D   8.892368  0.932785   4.535396  0.598124

In [93]: df_norm = (df - df.mean()) / (df.max() - df.min())

In [94]: df_norm
Out[94]:
          a         b         c         d
A  0.085789 -0.394348  0.337016 -0.109935
B -0.463830  0.164926 -0.650963  0.256714
C -0.158129  0.605652 -0.035090 -0.573389
D  0.536170 -0.376229  0.349037  0.426611

In [95]: df_norm.mean()
Out[95]:
a   -2.081668e-17
b    4.857226e-17
c    1.734723e-17
d   -1.040834e-17

In [96]: df_norm.max() - df_norm.min()
Out[96]:
a    1
b    1
c    1
d    1 
```

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2016-05-13T00:48:06.180

如果你不介意导入`sklearn`库，我会推荐[这个](https://web.archive.org/web/20160520170701/http://chrisalbon.com:80/python/pandas_normalize_column.html)博客上讨论的方法。

```
import pandas as pd
from sklearn import preprocessing

data = {'score': [234,24,14,27,-74,46,73,-18,59,160]}
cols = data.columns
df = pd.DataFrame(data)
df

min_max_scaler = preprocessing.MinMaxScaler()
np_scaled = min_max_scaler.fit_transform(df)
df_normalized = pd.DataFrame(np_scaled, columns = cols)
df_normalized 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2015-10-21T03:10:46.473

你可以使用`apply`它，它更整洁一点：

```
import numpy as np
import pandas as pd

np.random.seed(1)

df = pd.DataFrame(np.random.randn(4,4)* 4 + 3)

          0         1         2         3
0  9.497381  0.552974  0.887313 -1.291874
1  6.461631 -6.206155  9.979247 -0.044828
2  4.276156  2.002518  8.848432 -5.240563
3  1.710331  1.463783  7.535078 -1.399565

df.apply(lambda x: (x - np.mean(x)) / (np.max(x) - np.min(x)))

          0         1         2         3
0  0.515087  0.133967 -0.651699  0.135175
1  0.125241 -0.689446  0.348301  0.375188
2 -0.155414  0.310554  0.223925 -0.624812
3 -0.484913  0.244924  0.079473  0.114448 
```

`groupby`此外，如果您选择相关的列，它也可以很好地工作：

```
df['grp'] = ['A', 'A', 'B', 'B']

          0         1         2         3 grp
0  9.497381  0.552974  0.887313 -1.291874   A
1  6.461631 -6.206155  9.979247 -0.044828   A
2  4.276156  2.002518  8.848432 -5.240563   B
3  1.710331  1.463783  7.535078 -1.399565   B

df.groupby(['grp'])[[0,1,2,3]].apply(lambda x: (x - np.mean(x)) / (np.max(x) - np.min(x)))

     0    1    2    3
0  0.5  0.5 -0.5 -0.5
1 -0.5 -0.5  0.5  0.5
2  0.5  0.5  0.5 -0.5
3 -0.5 -0.5 -0.5  0.5 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-05T18:27:26.403

稍微修改自：[Python Pandas Dataframe: Normalize data between 0.01 and 0.99?](https://stackoverflow.com/questions/36102348/python-pandas-dataframe-normalize-data-between-0-01-and-0-99/43811382#43811382) 但从一些评论中认为这是相关的（对不起，如果考虑转贴......）

我希望在常规的基准百分位数或 z 分数中进行自定义归一化是不够的。有时我知道总体的可行最大值和最小值是多少，因此想要定义它而不是我的样本，或者不同的中点，或其他任何东西！这通常对于重新缩放和规范化神经网络的数据很有用，您可能希望所有输入都在 0 和 1 之间，但您的某些数据可能需要以更自定义的方式缩放......因为百分位数和标准差假设您的样本涵盖人口，但有时我们知道这不是真的。在热图中可视化数据时，它对我也非常有用。所以我构建了一个自定义函数（在此处的代码中使用了额外的步骤以使其尽可能可读）：

```
def NormData(s,low='min',center='mid',hi='max',insideout=False,shrinkfactor=0.):    
    if low=='min':
        low=min(s)
    elif low=='abs':
        low=max(abs(min(s)),abs(max(s)))*-1.#sign(min(s))
    if hi=='max':
        hi=max(s)
    elif hi=='abs':
        hi=max(abs(min(s)),abs(max(s)))*1.#sign(max(s))

    if center=='mid':
        center=(max(s)+min(s))/2
    elif center=='avg':
        center=mean(s)
    elif center=='median':
        center=median(s)

    s2=[x-center for x in s]
    hi=hi-center
    low=low-center
    center=0.

    r=[]

    for x in s2:
        if x<low:
            r.append(0.)
        elif x>hi:
            r.append(1.)
        else:
            if x>=center:
                r.append((x-center)/(hi-center)*0.5+0.5)
            else:
                r.append((x-low)/(center-low)*0.5+0.)

    if insideout==True:
        ir=[(1.-abs(z-0.5)*2.) for z in r]
        r=ir

    rr =[x-(x-0.5)*shrinkfactor for x in r]    
    return rr 
```

这将采用 pandas 系列，甚至只是一个列表，并将其标准化为您指定的低点、中心点和高点。还有缩水的因素！允许您从端点 0 和 1 缩小数据（在 matplotlib 中组合颜色图时我必须这样做：[Single pcolormesh with more one colormap using Matplotlib](https://stackoverflow.com/questions/43761430/single-pcolormesh-with-more-than-one-colormap-using-matplotlib/43790899#43790899)）所以您可能会看到代码是如何工作的，但基本上说您在样本中有值 [-5,1,10]，但希望基于 -7 到 7 的范围进行归一化（因此任何高于 7 的值，我们的“10”都被有效地视为 7），中点为 2，但将其缩小以适合 256 RGB 颜色图：

```
#In[1]
NormData([-5,2,10],low=-7,center=1,hi=7,shrinkfactor=2./256)
#Out[1]
[0.1279296875, 0.5826822916666667, 0.99609375] 
```

它还可以将您的数据翻过来……这可能看起来很奇怪，但我发现它对热图很有用。假设您想要更接近 0 而不是高/低的值的颜色更深。您可以根据 insideout=True 的规范化数据进行热图：

```
#In[2]
NormData([-5,2,10],low=-7,center=1,hi=7,insideout=True,shrinkfactor=2./256)
#Out[2]
[0.251953125, 0.8307291666666666, 0.00390625] 
```

所以现在最接近中心的“2”，定义为“1”是最高值。

无论如何，如果您希望以其他可能对您有用的应用程序的方式重新调整数据，我认为我的应用程序是相关的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-01T21:58:23.240

这是按列执行的方式：

```
[df[col].update((df[col] - df[col].min()) / (df[col].max() - df[col].min())) for col in df.columns] 
```

# php - 如何将图像从 Android 应用程序上传到网络服务器到特定文件夹

> ID：12525725
> 
> 赞同：2
> 
> 时间：2012-09-21T07:04:30.493
> 
> 标签：php, android, file-upload

如何将图像从android移动到Web服务器上的指定文件夹

这是我的安卓代码

```
package com.example.bitmaptest;

import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.util.Base64;
import android.util.Log;

public class Upload extends Activity {
InputStream is;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Bitmap bitmapOrg=BitmapFactory.decodeResource(getResources(),R.drawable.a1);
    ByteArrayOutputStream bao = new ByteArrayOutputStream();
    bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);
    byte[] ba = bao.toByteArray();
    String ba1 = Base64.encodeToString(ba, 0);
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("image", ba1));

    try {

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(
                "http://0.0.0.7:80/android/base.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

}
} 
```

这是我的 php 脚本

```
$uploadedFile = $_FILES['image']['name'];

$uploadedType = $_FILES['image']['type'];

$temp = $_FILES['image']['tmp_name'];

$error = $_FILES['image']['error'];

if ($error > 0) {
die("File could not be uploaded. $error");
}
else {
    move_uploaded_file($temp, "images/".$uploadedFile);
    echo "Upload Complete. ".$uploadedType;
} 
```

当我在android中发送时，httppost可以工作，它显示在wireshark中但文件是空的。没有图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:13:50.663

文件上传功能：

```
private void doFileUpload(){
    HttpURLConnection conn = null;
    DataOutputStream dos = null;
    DataInputStream inStream = null; 
    String exsistingFileName = "/sdcard/six.3gp";
    // Is this the place are you doing something wrong.
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary =  "*****";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1*1024*1024;
    String urlString = "http://192.168.1.5/upload.php";
    try
    {
        Log.e("MediaPlayer","Inside second Method");
        FileInputStream fileInputStream = new FileInputStream(new File(exsistingFileName) );
        URL url = new URL(urlString);
        conn = (HttpURLConnection) url.openConnection();
        conn.setDoInput(true);
        // Allow Outputs
        conn.setDoOutput(true);
        // Don't use a cached copy.
        conn.setUseCaches(false);
        // Use a post method.
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Connection", "Keep-Alive");
        conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
        dos = new DataOutputStream( conn.getOutputStream() );
        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + exsistingFileName +"\"" + lineEnd);
        dos.writeBytes(lineEnd);
        Log.e("MediaPlayer","Headers are written");
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        while (bytesRead > 0)
        {
            dos.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
        BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null) 
            tv.append(inputLine);
        // close streams
        Log.e("MediaPlayer","File is written");
        fileInputStream.close();
        dos.flush();
        dos.close();
    }
    catch (MalformedURLException ex)
    {
        Log.e("MediaPlayer", "error: " + ex.getMessage(), ex);
    }
    catch (IOException ioe)
    {
        Log.e("MediaPlayer", "error: " + ioe.getMessage(), ioe);
    }

    //------------------ read the SERVER RESPONSE
    try {
        inStream = new DataInputStream ( conn.getInputStream() );
        String str;            
        while (( str = inStream.readLine()) != null)
        {
            Log.e("MediaPlayer","Server Response"+str);
        }
        /*while((str = inStream.readLine()) !=null ){

        }*/
        inStream.close();
    }
    catch (IOException ioex){
        Log.e("MediaPlayer", "error: " + ioex.getMessage(), ioex);
    }
} 
```

# perl - 具有多行的变量。删除 perl 中的前两行

> ID：12525728
> 
> 赞同：1
> 
> 时间：2012-09-21T07:04:39.640
> 
> 标签：perl, unix, solaris

我有一个 sql 查询的结果。它返回大约 10 行，如下所示：

如果我在我的 perl 脚本中执行以下操作。

```
print $result 
```

它给了我输出：

```
 key       value                            
 ----------- ------------------------------ 
  1428116300 0003000                        
   560779655 0003001                        
   173413463 0003002                        
      315642 0003003                        
  1164414857 0003004                        
   429589116 0003005 
```

我只想删除前两行。并将每一行的其余部分存储在一个数组中。任何人都可以告诉我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:08:09.423

有类似的东西：

```
my @lines = split /\n/, $result;
splice @lines,0,2; 
```

* * *

说明：

`split /\n/, $result`正在将您的变量切割成一系列行。

`grep /^[\s\d]+$/`正在过滤这个数组，并且只保留单行空格或数字的元素（从而删除前两行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:12:53.193

数据无关的小迂回方式：如果你在文件中打印 $result，你可以

```
use Tie::File;

tie @lines, Tie::File, $file or die "can't update $file: $!";
delete $lines[1];
delete $lines[2]; 
```

（未经测试）

# c# - 如何转换为通用代码？

> ID：12525730
> 
> 赞同：0
> 
> 时间：2012-09-21T07:04:44.803
> 
> 标签：c#, treeview

我正在尝试制作一个按以下顺序包含项目的树视图。

```
+ Continent
    + Country
        + Province
            + Territory 
```

而且，我有一个通用类来保存 treeView Items 数据。

```
public class TreeViewContinents
{
    public List<TreeViewContinents> Children { get; set; }    
    public TreeViewContinents Parent { get; set; }    
    public string Name { get; set; }    
    public string Content { get; set; }
} 
```

**数据：**

```
private readonly List<Dictionary<string, object>> continentsList = new List<Dictionary<string, object>>();

/*
continentsList[0] - "Continent", "Asia"
                    "Country", "Afghanistan"
                    "Province", "Kabul"
                    "Territory", "Bagrami"
                    "Language", "aaa"
                    "Culture", "bbb"
                .
                .               
                .
                .

continentsList[n] - "Continent", "North America"
                    "Country", "Canada"
                    "Province", "Ontario"
                    "Territory", "Ottawa"
                    "Language", "aaa"
                    "Culture", "bbb

*/ 
```

基于需要生成哪些treeView Items 的字符串数组。

```
var treeViewItemNames = new[] { "Continent", "Country", "Province", "Territory" }; 
```

**代码：**

```
List<object> Continents = this.continentsList.Where(
                            p_oDict => p_oDict.ContainsKey(treeViewItemNames[0]))
                            .Select( p_oDict => p_oDict[treeViewItemNames[0]])
                            .Distinct()
                            .ToList();

var topItems = new List<TreeViewContinents>();

foreach (object continent in Continents)
{
    var level1Items = new TreeViewContinents { Name = treeViewItemNames[0], Content = continent.ToString() };

    List<object> Countries = this.continentsList.Where(
                            p_oDict => p_oDict.ContainsKey(treeViewItemNames[0])
                            && p_oDict.ContainsKey(treeViewItemNames[1])
                            && p_oDict[treeViewItemNames[0]].Equals(continent)
                            .Select( p_oDict => p_oDict[treeViewItemNames[1]])
                            .Distinct()
                            .ToList();

    Countries.Sort((p_oU1, p_oU2) => string.Compare(p_oU1.ToString(), p_oU2.ToString(), StringComparison.Ordinal));
    foreach (object country in Countries)
    {
        var level2Items = new TreeViewContinents { Name = treeViewItemNames[1], Content = country.ToString(), Parent = level1Items };
        level1Items.Children.Add(level2Items);

        List<object> Provinces = this.continentsList.Where(
                               p_oDict => p_oDict.ContainsKey(treeViewItemNames[0])
                                        && p_oDict.ContainsKey(treeViewItemNames[1])
                                          && p_oDict.ContainsKey(treeViewItemNames[2])
                                          && p_oDict[treeViewItemNames[0]].Equals(continent)
                                          && p_oDict[treeViewItemNames[1]].Equals(country))
                                          .Select( p_oDict => p_oDict[treeViewItemNames[2]]).Distinct()
                                        .ToList();

        Provinces.Sort((p_oU1, p_oU2) => string.Compare(p_oU1.ToString(), p_oU2.ToString(), StringComparison.Ordinal));
        foreach (object province in Provinces)
        {
            var level3Items = new TreeViewContinents { Name = treeViewItemNames[2], Content = province.ToString(), Parent = level2Items };
            level2Items.Children.Add(level3Items);

            List<object> Territories = this.continentsList.Where(
                               p_oDict => p_oDict.ContainsKey(treeViewItemNames[0])
                                        && p_oDict.ContainsKey(treeViewItemNames[1])
                                        && p_oDict.ContainsKey(treeViewItemNames[2])
                                        && p_oDict.ContainsKey(treeViewItemNames[3])
                                        && p_oDict[treeViewItemNames[0]].Equals(continent)
                                        && p_oDict[treeViewItemNames[1]].Equals(country)
                                        && p_oDict[treeViewItemNames[2]].Equals(province)).Select(
                                        p_oDict => p_oDict[treeViewItemNames[3]])
                                        .Distinct()
                                        .ToList();
            Territories.Sort((p_oU1, p_oU2) => string.Compare(p_oU1.ToString(), p_oU2.ToString(), StringComparison.Ordinal));
            foreach (object territory in Territories)
            {
                var level4Items = new TreeViewContinents { Name = treeViewItemNames[3], Content = territory.ToString(), Parent = level3Items };
                level3Items.Children.Add(level4Items);
            }
        }
    }

    topItems.Add(level1Items);
} 
```

在上面的代码中，我有四个 foreach 循环来构建树视图。是否可以编写一个循环来基于变量生成树视图`treeViewItemNames`，以便将来如果我更改变量

```
var treeViewItemNames = new[] { "Continent", "Country", "Territory" }; 
```

它应该像这样生成treeView

```
+ Continent
    + Country
        + Territory 
```

请提出想法/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:13:43.063

我建议遍历continentsList 元素。

```
 var treeViewItemNames = new[] { "Continent", "Country", "Province", "Territory" };

     var topItems = new List<TreeViewContinents>();

     foreach (var continent in continentsList)
     {
         List<TreeViewContinents> currentLevel = topItems;
         TreeViewContinents parentItem = null;
         foreach (var sectionTitle in treeViewItemNames)
         {
             String value = Convert.ToString(continent[sectionTitle]);
             TreeViewContinents currentItem = currentLevel.FirstOrDefault(tree => tree.Content == value);
             if (currentItem == null)
             {
                 currentItem = new TreeViewContinents { Name = sectionTitle, Content = value };
                 currentItem.Children = new List<TreeViewContinents>();
                 if (parentItem != null)
                 {
                     currentItem.Parent = parentItem;
                 }
                 currentLevel.Add(currentItem);
             }
             parentItem = currentItem;
             currentLevel = currentItem.Children;
         }
     } 
```

这段代码的问题是没有对项目进行排序，但我们可以对生成的 TreeViewContinents 列表进行排序。这是用于排序的递归方法：

```
public List<TreeViewContinents> SortTreeView(List<TreeViewContinents> treeViewList)
{
    foreach (var item in treeViewList)
    {
        if (item.Children.Count > 0)
        {
            item.Children = SortTreeView(item.Children);
        }
    }
    return treeViewList.OrderBy(it => it.Content).ToList();
} 
```

您可以在 topItems 列表已满后使用它：

```
topItems = SortTreeView(topItems); 
```

# wpf - 如何在 wpf-mvvm 应用程序中将电话号码文本显示为 Numéro de téléphone

> ID：12525733
> 
> 赞同：1
> 
> 时间：2012-09-21T07:05:07.903
> 
> 标签：wpf, mvvm

我正在开发一个 WPF-MVVM 应用程序来支持多语言（全球化），如下所示：

1.  我创建了一个资源管理器：

    ```
    ResourceManager rm = new System.Resources.ResourceManager("MultiLang.string", 
                                              Assembly.GetExecutingAssembly()); 
    ```

2.  我创建了两个 resx 文件，例如 string.fr.resx、string.en.resx，如下所示：

    在 string.fr.resx 中，我创建了一个属性：

    ```
    Name:User_PhoneNo_Label
    Value:Num\u00e9ro de t\u00e9l\u00e9phone 
    ```

3.  现在例如，如果用户从列表中选择法语，我正在尝试显示 User_PhoneNo_Label 的值，如下所示：

    ```
    Thread.CurrentThread.CurrentUICulture = new CultureInfo(sLangCode);
    Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(sLangCode);
    User_PhoneNo_Label = rm.GetString("User_PhoneNo_Label"); 
    ```

    这里的 sLangCode 是基于用户选择的 fr 或 en 等代码。

4.  法语中 User_PhoneNo_Label 的值应显示为“Numéro de téléphone”，但现在将显示为“Num\u00e9ro de t\u00e9l\u00e9phone”。

请让我知道这个问题的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:10:36.807

只需将要显示的文本作为资源字符串的值。

# iphone - 在 iPhone 应用程序中扫描票证

> ID：12525740
> 
> 赞同：1
> 
> 时间：2012-09-21T07:05:37.440
> 
> 标签：iphone, ios5, barcode-scanner

我想扫描票证图像以在票证验证时自动检索其信息。有没有办法通过一些代码来做到这一点。下面提到了显示如何进行扫描的链接。

[http://www.youtube.com/watch?v=LAEj9pbZZy8](http://www.youtube.com/watch?v=LAEj9pbZZy8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:07:57.233

您可以使用[libzbar](https://github.com/H2CO3/libzbar-ios)扫描各种类型的条形码和二维码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:55:43.577

Zbar 是解决问题的方法。

[http://zbar.sourceforge.net/download.html](http://zbar.sourceforge.net/download.html)

# java - 客户端既作为客户端又作为服务器 - JAVA

> ID：12525742
> 
> 赞同：0
> 
> 时间：2012-09-21T07:05:53.570
> 
> 标签：java

我有一个有趣的问题。我正在尝试建立对等连接，这意味着客户端进程既充当服务器又充当客户端。理想情况下，它应该有一个客户端套接字（Socket 类）和一个服务器套接字（Server Socket 类）。现在我尝试使用这个概念，但它不起作用。请看一下：

```
 public static void main(String argv[]) throws Exception
  {

  Socket clientSocket = null;

  BufferedReader inFromUser = new BufferedReader( new InputStreamReader(System.in));
  DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());

 System.out.println("Enter the server port u want to be assigned to this peer:"); 
 sentence = inFromUser.readLine(); 
 System.out.println("writing current port to client = "+ sentence);
 outToServer.writeBytes("p~"+sentence + "\n" );

 int serverport = Integer.parseInt(sentence);

ServerSocket server = new ServerSocket(serverport);
Socket client;
//client 
System.out.println("enter port no of the server port of an other peer:");
               int msg=Integer.parseInt(inFromUser.readLine());
               clientSocket = new Socket("localhost", msg);
                outToServer = new DataOutputStream(clientSocket.getOutputStream());
               outToServer.writeBytes("hi");

    while(true)
    {
         //server port listens infinitely and spawns new thread
          System.out.println("inside true");
       client = server.accept();
      Thread serverThread = new Thread(new acceptconnection1(client));
        serverThread.start();

    }}}

class acceptconnection1 implements Runnable {
 BufferedReader inFromClient, inn; 
 DataOutputStream ds;
 Socket socket;
  int peersocket;

 String clientSentence;

         int serverport ;

    Socket clientSocket = null;
acceptconnection1 (Socket socket,) throws IOException{

this.socket = socket;

 inn = new BufferedReader (new InputStreamReader(System.in));
      inFromClient =new BufferedReader(new InputStreamReader(socket.getInputStream()));
  ds = new DataOutputStream(socket.getOutputStream());
}

@Override
public void run () {

        String cs,a;
    try {
            System.out.println("waiting for connection ");

             if(( clientSentence = inFromClient.readLine())!=null)
             {

            System.out.println("Message from other peer" + clientSentence);

             }

    } catch (IOException ex) {
        Logger.getLogger(acceptconnection1.class.getName()).log(Level.SEVERE, null, ex);
    }}} 
```

输出：当我创建两个客户端进程时，

o / p of client1：输入您要分配给此对等方的服务器端口：1111将当前端口写入客户端= 1111 hi输入您要连接的端口号：2222 inside true inside true等待连接

输入您要分配给此对等方的服务器端口：2222 将当前端口写入客户端 = 2222 hi 输入您要连接的端口号：1111 inside true inside true 等待连接

发生的事情是他们都在等待连接。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:14:18.037

你有一个死锁条件。为此，首先创建 ServerSocket，以便 Socket 可以与之对话。创建将连接但在接受之前不执行任何操作的 Socket。然后接受连接。

顺便说一句：您不需要创建两个连接来让流量双向通过。建立连接后，您可以将该连接用作客户端-服务器或服务器-服务器或任何其他连接。

# pyside - 有什么方法可以下载 pyside 的在线文档，然后转换成 CHM 文件？

> ID：12525743
> 
> 赞同：5
> 
> 时间：2012-09-21T07:05:53.270
> 
> 标签：pyside

pyside 的在线文档在这里 [http://www.pyside.org/docs/pyside/index.html](http://www.pyside.org/docs/pyside/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-09T11:14:14.013

更新版本 (v1.2.1)。

[https://web.archive.org/web/20140809021949/http://seanfisk.com/pyside-docs/pyside/](https://web.archive.org/web/20140809021949/http://seanfisk.com/pyside-docs/pyside/)

[https://www.mail-archive.com/pyside@qt-project.org/msg01654.html](https://www.mail-archive.com/pyside@qt-project.org/msg01654.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-01T09:18:21.950

我为[PySide 1.0.7 Reference](http://srinikom.github.io/pyside-docs/)找到了它，它托管在 github 上：

[https://github.com/srinikom/pyside-docs/archive/gh-pages.zip](https://github.com/srinikom/pyside-docs/archive/gh-pages.zip)

[（法国网站上](https://deptinfo-ensip.univ-poitiers.fr/ENS/pyside-docs/)也有1.1.0版本， 但是没找到下载链接。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-26T04:17:37.643

网上的一切都可以镜像，所以首先使用[httrack](https://www.httrack.com/)或 wget 之类的工具进行镜像。

使用 httrack 将所有资源从[http://pyside.github.io/docs/pyside/](http://pyside.github.io/docs/pyside/)下载到 CWD：

```
httrack http://pyside.github.io/docs/pyside/ \
−−robots=0 \
−−user−agent "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:52.0) Gecko/20100101 Firefox/52.0" \
--verbose \
+*.js +*.css +*.png +*.gif +*.jpeg +*.jpg \ 
```

如果您想要一种可以在任何地方打开和阅读的跨平台格式，我建议使用 EPUB。[calibre](https://calibre-ebook.com/download)能够轻松地将 HTML 转换为 EPUB、mobi、PDF 和其他流行格式。首先将下载的资源添加到 calibre 库中。您只需要添加主页 Calibre 将跟随链接

```
calibredb add index.html 
```

然后打开口径并将其转换为您想要的任何格式

[![口径转换](../Images/66ad370d94b2b77f68c4b3e9248247f5.png)](https://i.stack.imgur.com/ppAIH.png)

给猫剥皮的方法不止一种。当您在硬盘上获取数据时，您可以使用许多工具来改进演示文稿，例如使用[SIGIL](https://sigil-ebook.com/)修改 calibre 生成的 epub 您也可以使用[Pandoc](https://pandoc.org/)或其他商业和免费/开源工具来进行转换和修改。

# php - PHP SESSION 数组最终出错

> ID：12525745
> 
> 赞同：0
> 
> 时间：2012-09-21T07:06:01.680
> 
> 标签：php, session

快速 PHP 问题。我对 PHP 有点陌生，所以请多多包涵。

为什么这会导致 500 服务器错误？

```
<?php
//session start
session_start();

//one time ticket is issued
$ticket = md5(uniqid(mt_rand),TRUE);

//put var ticket in SESSION array which is used in next page.
$_SESSION['ticket'][] = $ticket;

...

$_SESSION['ticketPOST'] = $_POST['ticket'];

...

//functionize htmlspecialchars
function h($string) {
    return htmlspecialchars($string, ENT_QUOTES);
}

?> 
```

在下面的同一个文件中，我写了这样的东西：

```
<form action="brahbrah.php" method="post">
<input type="hidden" name="ticket" value="<?php echo h($ticket); ?>">
<input type="submit" name="indexForm" value="preview">
</form> 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T07:07:56.807

```
$ticket = md5(uniqid(mt_rand()),TRUE); 
```

mt_rand 是一个函数，你忘了放`()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:12:31.650

请参阅此链接： http: [//php.net/manual/en/function.mt-rand.php](http://php.net/manual/en/function.mt-rand.php)

试试这个代码：

```
<?php
//session start
session_start();

//one time ticket is issued
$ticket = md5(uniqid(mt_rand()),TRUE);

//put var ticket to SESSION array which is used in next page.
$_SESSION['ticket'][] = $ticket;

...
?> 
```

`mt_rand`必需的`()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:08:13.740

设置
错误报告（E_ALL）；
ini_set('display_errors', true);

看看有什么错误

# mfc - 如何使用 MBCS 来支持没有代码页的语言？

> ID：12525752
> 
> 赞同：0
> 
> 时间：2012-09-21T07:06:41.777
> 
> 标签：mfc, locale

MFC 应用程序需要在对话框中使用编辑 ctrl 来编辑泰米尔语。但是我发现泰米尔语在 Windows 中没有代码页（是的，没有泰米尔语系统区域设置），并且 Unicode 选项不适合我的情况。

看到有人的想法，[使用 SetParent 将 HWND 嵌入到外部进程中](https://stackoverflow.com/questions/170800/embedding-hwnd-into-external-process-using-setparent)

我想创建另一个使用 UNICODE 选项构建的应用程序，将其窗口嵌入到对话框中，但失败了。查看 MSDN，SetParent 需要父子窗口在一个应用程序中。

那么，我该如何实施呢？

@MSalters

我通过覆盖虚拟 BOOL CWinThread::PumpMessage() 解决了它，强制消息循环使用 W 版本 API。

```
BOOL CtamildlgApp::PumpMessage()
{
    _AFX_THREAD_STATE *pState = AfxGetThreadState();

    if ( !::GetMessageW( &( pState->m_msgCur ), NULL, NULL, NULL ) )
    {
        // Note: prevents calling message loop things in 'ExitInstance'
        // will never be decremented
        return FALSE;
    }

    // process this message

    if ( pState->m_msgCur.message != WM_KICKIDLE )
    {
        ::TranslateMessage( &( pState->m_msgCur ) );
        ::DispatchMessageW( &( pState->m_msgCur ) );
    }

    return TRUE;
} 
```

然后 CreateWindowExW(... MSFTEDIT_CLASS ...)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:35:59.210

泰米尔语确实比平时更难。但仍有一件事很明显：使用 Unicode，而不是 MBCS。在内部，所有 Windows 函数都是 Unicode。MBCS 包装器使用当前代码页将多字节编码转换为 UTF-16。例如，当您调用时`MessageBoxA("Some String")`，当前代码页用于将其转换为`MessageBoxW(L"Some String")`.

现在，这直接意味着您不能调用`MessageBoxA("Narrow Tamil String")`，因为没有代码页可以将其转换为适当的宽字符串。您必须直接调用 Unicode 函数`MessageBoxW("Narrow Tamil String")`。

MFC 不能神奇地解决这个问题。它可以为某些调用提供更好的语法，将 Win32 惯用语包装在类、构造函数和析构函数中。但它不能凭空创建缺失的代码页。

# java - 保存画布只保存背景不保存绘图

> ID：12525753
> 
> 赞同：2
> 
> 时间：2012-09-21T07:06:42.650
> 
> 标签：java, android, view, android-canvas

我有一个画布，我正在显示来自媒体商店的图片作为它的背景，然后我在上面画画。我想保存背景+在它上面绘制的内容，但我只能保存背景，这对我来说没用。我试图了解我做错了什么。我基本上按照人们[在这里](https://stackoverflow.com/questions/2174875/android-canvas-to-jpg)的建议做了，但没有帮助。

这是我拥有的代码：编辑：这次我在这里上传了所有代码

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.io.RandomAccessFile;
import java.nio.MappedByteBuffer;
import java.nio.channels.FileChannel;
import java.nio.channels.FileChannel.MapMode;
import java.util.ArrayList;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.Path;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.os.Handler;
import android.os.Message;
import android.provider.MediaStore;
import android.view.Display;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.widget.Toast;

public class CanvasDrawingActivity extends  Activity   {
private ArrayList<Path> _graphics = new ArrayList<Path>();
private Paint mPaint;
public static final int GET_FROM_GALLERY = 1;
public static final int IMAGE_CAPTURE = 0;
public static final int SELECT_IMAGE_FROM_DEVICE = 1;
public Bitmap myBitmap;
public int isFirstTime = 0;
public DrawingPanel mPanel;
static int id = 1;
public Uri fileUri ;

@Override
public void onCreate(Bundle savedInstanceState) {
    mPanel = new DrawingPanel(this);
    mPanel.setId(findId());
    super.onCreate(savedInstanceState);
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    //https://stackoverflow.com/questions/10937659/android-image-doesnt-save-using-native-camera-app-on-nexus-s
    File f = new File(Environment.getExternalStorageDirectory().getPath(), String.format("%d.jpg", System.currentTimeMillis()));
    fileUri= Uri.fromFile(f);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);

    startActivityForResult(intent, IMAGE_CAPTURE);
    setContentView(R.layout.main);
}

public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.save:
        savePicture();
        return true;
    case R.id.clear:
        // startActivity(new Intent(this, Clear.class));
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

public void savePicture(){
    long now = System.currentTimeMillis();
    OutputStream fos;
    try {
        fos = new FileOutputStream(String.format(Environment.getExternalStorageDirectory().getAbsolutePath()+"/edited_%d.jpg",now));
        myBitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos); 
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    finish();  //close the activity. 
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    //Detects request codes
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == IMAGE_CAPTURE && resultCode == RESULT_OK) {
        Uri result; 
        result = fileUri;
        //refresh storage
        sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory())));
        try {
            myBitmap = MediaStore.Images.Media.getBitmap(this.getContentResolver(), result);
            startDrawing();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    else if (resultCode == Activity.RESULT_CANCELED){

    }
}

public void startDrawing(){
    setContentView(mPanel);
    mPaint = new Paint();
    mPaint.setDither(true);
    mPaint.setColor(0xFFFFFF00);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(3);
}

public int findId(){  
    View v = findViewById(id);  
    while (v != null){  
        v = findViewById(++id);  
    }  
    return id++;  
}

class DrawingPanel extends SurfaceView implements SurfaceHolder.Callback {
    private DrawingThread _thread;
    private Path path;

    public DrawingPanel(Context context) {
        super(context);
        setDrawingCacheEnabled(true);
        getHolder().addCallback(this);
        _thread = new DrawingThread(getHolder(), this);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        synchronized (_thread.getSurfaceHolder()) {
            if(event.getAction() == MotionEvent.ACTION_DOWN){
                path = new Path();
                path.moveTo(event.getX(), event.getY());
                path.lineTo(event.getX(), event.getY());
            }else if(event.getAction() == MotionEvent.ACTION_MOVE){
                path.lineTo(event.getX(), event.getY());
                if(_graphics.size() > 0) {
                    _graphics.remove(_graphics.size() - 1);
                }
                _graphics.add(path);
            }else if(event.getAction() == MotionEvent.ACTION_UP){
                path.lineTo(event.getX(), event.getY());
                _graphics.remove(_graphics.size() - 1);
                _graphics.add(path);
            }
            return true;
        }
    }

    //Source: http://thinkandroid.wordpress.com/2009/12/25/resizing-a-bitmap/
    public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
        int width = bm.getWidth();
        int height = bm.getHeight();
        float scaleWidth = ((float) newWidth) / width;
        float scaleHeight = ((float) newHeight) / height;
        // create a matrix for the manipulation
        Matrix matrix = new Matrix();
        // resize the bit map
        matrix.postScale(scaleWidth, scaleHeight);
        // recreate the new Bitmap
        Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);
        return resizedBitmap;
    }

    /**
     * Converts a immutable bitmap to a mutable bitmap. This operation doesn't allocates
     * more memory that there is already allocated.
     * 
     * @param imgIn - Source image. It will be released, and should not be used more
     * @return a copy of imgIn, but muttable.
     */
    public Bitmap convertToMutable(Bitmap imgIn) {
        try {
            //this is the file going to use temporally to save the bytes. 
            // This file will not be a image, it will store the raw image data.
            File file = new File(Environment.getExternalStorageDirectory() + File.separator + "temp.tmp");

            //Open an RandomAccessFile
            //Make sure you have added uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"
            //into AndroidManifest.xml file
            RandomAccessFile randomAccessFile = new RandomAccessFile(file, "rw");

            // get the width and height of the source bitmap.
            int width = imgIn.getWidth();
            int height = imgIn.getHeight();
            Config type = imgIn.getConfig();

            //Copy the byte to the file
            //Assume source bitmap loaded using options.inPreferredConfig = Config.ARGB_8888;
            FileChannel channel = randomAccessFile.getChannel();
            MappedByteBuffer map = channel.map(MapMode.READ_WRITE, 0, imgIn.getRowBytes()*height);
            imgIn.copyPixelsToBuffer(map);
            //recycle the source bitmap, this will be no longer used.
            imgIn.recycle();
            System.gc();// try to force the bytes from the imgIn to be released

            //Create a new bitmap to load the bitmap again. Probably the memory will be available. 
            imgIn = Bitmap.createBitmap(width, height, type);
            map.position(0);
            //load it back from temporary 
            imgIn.copyPixelsFromBuffer(map);
            //close the temporary file and channel , then delete that also
            channel.close();
            randomAccessFile.close();

            // delete the temp file
            file.delete();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 

        return imgIn;
    }

    @Override
    public void onDraw(Canvas canvas) {
        Display display = getWindowManager().getDefaultDisplay();
        int width = display.getWidth();
        int height = display.getHeight();
        myBitmap = getResizedBitmap(myBitmap, height, width);

        if (isFirstTime<3){
            myBitmap = convertToMutable(myBitmap);
            canvas.drawBitmap(myBitmap, 0, 0, null);
            isFirstTime++;
        }

        for (Path path : _graphics) {
            //canvas.drawPoint(graphic.x, graphic.y, mPaint);
            canvas.drawPath(path, mPaint);
        }
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub

    }

    public void surfaceCreated(SurfaceHolder holder) {          
        // TODO Auto-generated method stub
        _thread.setRunning(true);
        _thread.start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        boolean retry = true;
        _thread.setRunning(false);
        while (retry) {
            try {
                _thread.join();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }
    }
}

class DrawingThread extends Thread {
    private SurfaceHolder _surfaceHolder;
    private DrawingPanel _panel;
    private boolean _run = false;

    public DrawingThread(SurfaceHolder surfaceHolder, DrawingPanel panel) {
        _surfaceHolder = surfaceHolder;
        _panel = panel;
    }

    public void setRunning(boolean run) {
        _run = run;
    }

    public SurfaceHolder getSurfaceHolder() {
        return _surfaceHolder;
    }

    @Override
    public void run() {
        Canvas c;
        while (_run) {
            c = null;
            try {
                c = _surfaceHolder.lockCanvas(null);
                synchronized (_surfaceHolder) {
                    if (c!=null)
                        _panel.onDraw(c);
                }
            } finally {
                // do this in a finally so that if an exception is thrown
                // during the above, we don't leave the Surface in an
                // inconsistent state
                if (c != null) {
                    _surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }
}

} 
```

这是 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:id="@+id/main_view">
</LinearLayout> 
```

和 menu.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@+id/save"
    android:title="Save"/>
<item
    android:id="@+id/clear"
    android:title="Clear"/>
</menu> 
```

任何帮助，将不胜感激。谢谢！！

编辑：我让它工作！这里是！

```
@Override
public void onCreate(Bundle savedInstanceState) {
    mPanel = new DrawingPanel(this);
    mPanel.setId(findId());
    super.onCreate(savedInstanceState);
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    //https://stackoverflow.com/questions/10937659/android-image-doesnt-save-using-native-camera-app-on-nexus-s
    File f = new File(Environment.getExternalStorageDirectory().getPath(), String.format("%d.jpg", System.currentTimeMillis()));
    fileUri= Uri.fromFile(f);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);

    startActivityForResult(intent, IMAGE_CAPTURE);
    setContentView(R.layout.main);
}

public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.save:
        savePicture();
        return true;
    case R.id.clear:
        // startActivity(new Intent(this, Clear.class));
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

public void savePicture(){
    long now = System.currentTimeMillis();
    OutputStream fos;
    try {
        //SAVE THIS ONE- replicate all paths
        Canvas canvas = new Canvas(myBitmap);
        for (Path path : _graphicsToSave)
        {
            canvas.drawPath(path, mPaint);
        }

        fos = new FileOutputStream(String.format(Environment.getExternalStorageDirectory().getAbsolutePath()+"/edited_%d.jpg",now));
        myBitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos); 
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    finish();  //close the activity. 
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    //Detects request codes
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == IMAGE_CAPTURE && resultCode == RESULT_OK) {
        Uri result; 
        result = fileUri;
        //refresh storage
        sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory())));
        try {
            myBitmap = MediaStore.Images.Media.getBitmap(this.getContentResolver(), result);

            //resize the picture to match the screen size
            Display display = getWindowManager().getDefaultDisplay();
            int width = display.getWidth();
            int height = display.getHeight();
            myBitmap = getResizedBitmap(myBitmap, height, width);
            startDrawing();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    else if (resultCode == Activity.RESULT_CANCELED){

    }
}

//Source: http://thinkandroid.wordpress.com/2009/12/25/resizing-a-bitmap/
public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
    int width = bm.getWidth();
    int height = bm.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);
    return resizedBitmap;
}

public void startDrawing(){
    setContentView(mPanel);
    mPaint = new Paint();
    mPaint.setDither(true);
    mPaint.setColor(0xFFFFFF00);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(3);
}

public int findId(){  
    View v = findViewById(id);  
    while (v != null){  
        v = findViewById(++id);  
    }  
    return id++;  
}

class DrawingPanel extends SurfaceView implements SurfaceHolder.Callback {
    private DrawingThread _thread;
    private Path path;

    public DrawingPanel(Context context) {
        super(context);
        setDrawingCacheEnabled(true);
        getHolder().addCallback(this);
        _thread = new DrawingThread(getHolder(), this);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        synchronized (_thread.getSurfaceHolder()) {
            if(event.getAction() == MotionEvent.ACTION_DOWN){
                path = new Path();
                path.moveTo(event.getX(), event.getY());
                path.lineTo(event.getX(), event.getY());
            }else if(event.getAction() == MotionEvent.ACTION_MOVE){
                path.lineTo(event.getX(), event.getY());
                if(_graphics.size() > 0) {
                    _graphics.remove(_graphics.size() - 1);
                }
                _graphics.add(path);
            }else if(event.getAction() == MotionEvent.ACTION_UP){
                path.lineTo(event.getX(), event.getY());
                _graphics.remove(_graphics.size() - 1);
                _graphics.add(path);
                _graphicsToSave.add(path);
            }
            return true;
        }
    }

    @Override
    public void onDraw(Canvas canvas) {

        if (isFirstTime<3){
            canvas.drawBitmap(myBitmap, 0, 0, null);
            isFirstTime++;
        }

        for (Path path : _graphics) {
            canvas.drawPath(path, mPaint);
        }
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub

    }

    public void surfaceCreated(SurfaceHolder holder) {            
        // TODO Auto-generated method stub
        _thread.setRunning(true);
        _thread.start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        boolean retry = true;
        _thread.setRunning(false);
        while (retry) {
            try {
                _thread.join();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }
    }
}

class DrawingThread extends Thread {
    private SurfaceHolder _surfaceHolder;
    private DrawingPanel _panel;
    private boolean _run = false;

    public DrawingThread(SurfaceHolder surfaceHolder, DrawingPanel panel) {
        _surfaceHolder = surfaceHolder;
        _panel = panel;
    }

    public void setRunning(boolean run) {
        _run = run;
    }

    public SurfaceHolder getSurfaceHolder() {
        return _surfaceHolder;
    }

    @Override
    public void run() {
        Canvas c;
        while (_run) {
            c = null;
            try {
                c = _surfaceHolder.lockCanvas(null);
                synchronized (_surfaceHolder) {
                    if (c!=null)
                        _panel.onDraw(c);
                }
            } finally {
                // do this in a finally so that if an exception is thrown
                // during the above, we don't leave the Surface in an
                // inconsistent state
                if (c != null) {
                    _surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:20:58.853

```
View mView;
mView.setDrawingCacheEnabled(true);

Bitmap newimg = mView.getDrawingCache(); 
```

请获取位图并尝试保存该位图。让我知道您需要更多帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:47:40.383

> 要绘制一些东西，您需要 4 个基本组件：一个用于保存像素的位图、一个用于承载绘制调用（写入位图）的画布、一个绘图图元（例如 Rect、Path、文本、位图）和一个绘图（用于描述绘图的颜色和样式）。

您当前粘贴的代码代码显示您正在保存 myBitmap，但它没有显示您是否将 myBitmap 设置为用于绘图的位图。可能不是完整的代码。
我能想到这个问题的唯一原因是你没有在你保存的位图上绘图。这是我为手指画创建的代码的[链接。](http://pastebin.com/GupRGvUY)你可以参考这段代码来了解位图是如何提供给画布的，以及路径是如何在位图上绘制的。

# c# - 如何密码保护数字签名的pdf？

> ID：12525755
> 
> 赞同：0
> 
> 时间：2012-09-21T07:06:46.807
> 
> 标签：c#, asp.net, pdf, itextsharp

我正在使用 c#、itextsharp 创建和签名 pdf。现在我使用此代码进行密码保护。

有人能告诉我为什么会这样吗？

谢谢..

```
string passprotectedfile = filename;

using (Stream input = new FileStream(signedfile, FileMode.Open, FileAccess.Read,
                                     FileShare.Read))
{
    using (Stream output = new FileStream(passprotectedfile, FileMode.Create, 
                                          FileAccess.Write, FileShare.None))
    {
        PdfReader reader = new PdfReader(input);
        PdfEncryptor.Encrypt(reader, output, true, regno.ToString(), "",
                             PdfWriter.ALLOW_SCREENREADERS);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:13:55.930

数字签名的全部意义在于确保没有人篡改文件的内容。通过添加密码，您正在修改它，因此应用的数字签名不再有效，这就是错误消息告诉您的内容。您需要在修改 PDF 文件后对其进行签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T06:40:46.437

```
private void Generatedigitalsignatureandpassprotected(string filepath, string filepass)
    {
        Document _document = new Document();

        _document.Title = "PdfDigitalSignature - Sample";
        _document.Author = "dbAutoTrack Ltd, USA";
        _document.Creator = "dbAutoTrack.PDFWriter";
        PDFDigitalSignature digitalSignature = new PDFDigitalSignature();
        //  digitalSignature.X509Certificate = new X509Certificate2(MapPath("../data/DigitalSignature.pfx"), "password", X509KeyStorageFlags.MachineKeySet |X509KeyStorageFlags.PersistKeySet | X509KeyStorageFlags.Exportable););
        string executingFolder = System.IO.Path.GetDirectoryName(Application.ExecutablePath);
        var digitalsignaturefilepath = "E:\\wwwroot\\NaveenWindowsAppFile\\WindowsFormsApplication1\\digitalsignaturefile\\DigitalSignature.pfx";
        digitalSignature.X509Certificate = new X509Certificate2(digitalsignaturefilepath, "password", X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.PersistKeySet | X509KeyStorageFlags.Exportable);
        digitalSignature.Date = DateTime.Now;
        digitalSignature.Location = "Location ";
        digitalSignature.Reason = "Reason ";
        digitalSignature.ContactInfo = "Convert Digital Code by Cstech";
        digitalSignature.DetachSignature = false;
        digitalSignature.RootTrusted = false;
        _document.DigitalSignature = digitalSignature;
        //password protection code//
        SecurityManager _securityManager = new SecurityManager();
        _securityManager.Encryption = Encryption.Use128BitKey;
        _securityManager.OwnerPassword = filepass;
        _securityManager.UserPassword = filepass;
        _securityManager.AllowCopy = true;
        _securityManager.AllowEdit = true;
        //end//
        //Assign SecurityManager to the Document.
        _document.SecurityManager = _securityManager;
        PDFFont _font1 = new PDFFont(StandardFonts.TimesRoman, FontStyle.Regular);
        dbAutoTrack.PDFWriter.Page page1 = new dbAutoTrack.PDFWriter.Page(PageSize.A4);
        PDFGraphics graphics1 = page1.Graphics;

        PdfSignatureField signatureField = graphics1.AddDigitalSignature("name", new RectangleF(50, 50, 150, 75), _font1, 8f);
        signatureField.DigitalSignature = digitalSignature;
        _document.Pages.Add(page1);

        using (FileStream outFile = new FileStream(filepath, FileMode.Create, FileAccess.ReadWrite))
        {
            _document.Generate(outFile);
        }
    } 
```

# interactive - 盈透证券交易平台未在带有 OpenJDK 的 Ubuntu 下启动

> ID：12525757
> 
> 赞同：0
> 
> 时间：2012-09-21T07:06:58.763
> 
> 标签：interactive, ubuntu-12.04, broker

在 Ubuntu 12.04 下启动 IBs TWS 时出错。我查看了标准输出，发现了以下日志消息。我检查了语言环境和 tz 设置，但无法解决。

```
22:22:47:443 AWT-EventQueue-0: ERROR - No time zones could be retrieved from the OS
java.lang.Exception
    at twslaunch.jutils.fc.b(fc.java:354)
    at twslaunch.jutils.fc.s(fc.java:344)
    at twslaunch.jutils.gb.a(gb.java:147)
    at twslaunch.jutils.gb.f(gb.java:308)
    at feature.date.fc.<init>(fc.java:190)
    at feature.date.gc.<init>(gc.java:142)
    at feature.date.dc.<init>(dc.java:141)
    at feature.date.dc.<init>(dc.java:128)
    at feature.date.dc.<init>(dc.java:116)
    at jtscomponents.pq.<init>(pq.java:341)
    at jtscomponents.JTSDateCellEditor.newDateTimeEditorInstance(JTSDateCellEditor.java:340)
    at jcolumn.fc.run(fc.java:51)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at twslaunch.jtscomponents.j.a(j.java:74)
    at twslaunch.feature.welcome.j.h(j.java:425)
    at twslaunch.feature.welcome.j.a(j.java:408)
    at jclient.pl.<init>(pl.java:2628)
    at jconnection.b.h(b.java:181)
    at jconnection.b.e(b.java:56)
    at jconnection.a.b(a.java:199)
    at jconnection.rb.run(rb.java:158)
    at twslaunch.jutils.ec.a(ec.java:483)
    at jconnection.b.a(b.java:156)
    at jconnection.b.c(b.java:140)
    at jconnection.b.a(b.java:56)
    at jconnection.qb.run(qb.java:101)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:06:58.763

解决方案是重新安装`OpenJDK`并清除当前 java 安装的所有文件。我只是偶然发现了这个。所以希望这有助于其他人节省一些时间。

```
sudo apt-get purge openjdk-\* icedtea-\* icedtea6-\*
sudo aptitude install openjdk-7-jdk 
```

原因至今不明白。我也尝试删除所有 TWS 设置，但没有奏效。引用的 tws.xml（在某些论坛中也找不到）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T14:41:48.193

我知道这是一个非常古老的问题，但由于它并不为人所知（足够），我想补充一点，IB/TWS 不支持 OpenJDK。您必须使用 Oracle JDK。

# android - 如何为列表视图添加选框效果？

> ID：12525760
> 
> 赞同：0
> 
> 时间：2012-09-21T07:07:09.357
> 
> 标签：android, android-layout

我在 ArrayList 中有我的朋友列表，我正在尝试使用 ArrayAdapter 和 rowlayout.xml 在列表视图中显示它

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:id="@+id/rowlayout"
android:padding="10dp"
> 
```

现在我想给它添加选框效果。我想永远滚动这个列表视图。为此，我添加了以下代码

```
android:ellipsize="marquee"
android:focusable="true"
android:focusableInTouchMode="true"
android:freezesText="true"
android:marqueeRepeatLimit="marquee_forever"
android:paddingLeft="15dip"
android:paddingRight="15dip"
android:scrollHorizontally="true"
android:singleLine="true" 
```

但是这段代码停止了我的 Listview 的 OnLongClickListner 效果。

我不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:10:11.063

```
 android:ellipsize="marquee"
            android:gravity="left"
            android:lines="1"
            android:scrollHorizontally="true" 
```

android:singleLine 已被贬低，可聚焦 - 也不需要

此布局适用于一个新的示例项目：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:ellipsize="marquee"
        android:marqueeRepeatLimit="marquee_forever"
        android:paddingLeft="15dip"
        android:paddingRight="15dip"
        android:scrollHorizontally="true"
        android:text="12312312321321312312321321312311321321321312321312312123132132132" />

</RelativeLayout> 
```

# javascript - 在文本框中输入文本时显示消息

> ID：12525764
> 
> 赞同：0
> 
> 时间：2012-09-21T07:07:35.893
> 
> 标签：javascript, asp.net

我有一个要求，当用户在文本框中输入文本时，我想显示一条消息（不是警报框，这是 asp：lable），即如果用户在文本框中输入“x”，那么我想在完成后不显示一条消息text 而不是像 ontextchanged 事件。如果用户清理文本框，那么我不想显示消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:16:26.710

您可以使用以下三个最适合您的 JavaScript 事件之一，
onkeydown
onkeypress
onkeyup
要了解这些事件之间的区别，请参阅此链接

[http://www.bloggingdeveloper.com/post/KeyPress-KeyDown-KeyUp-The-Difference-Between-Javascript-Key-Events.aspx](http://www.bloggingdeveloper.com/post/KeyPress-KeyDown-KeyUp-The-Difference-Between-Javascript-Key-Events.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:34:32.413

你可以尝试这样的事情：

你的文本框：

```
<asp:TextBox ID="TextBox1" runat="server" onKeyUp="my_function(this);"></asp:TextBox> 
```

您的函数`my_function()`定义如下：

```
<script type="text/javascript">
    function my_function(el) {
        var val = this.value;
        if(val && val!="") {
            // Hide your message
            // ....

        } else {
            // Show your message
            // ....

        }
    }
</script> 
```

希望这可以帮助

# java - 使用 JAXB 创建具有属性和动态值的 XML

> ID：12525765
> 
> 赞同：2
> 
> 时间：2012-09-21T07:07:40.140
> 
> 标签：java, xml, xml-parsing, jaxb, jaxb2

我想使用 JAXB 创建一个 XML。它应该具有属性，其值必须来自相应类中定义的属性。

当前输出将属性作为子标签，而不是作为主标签中的属性。

我想要的 XML 的结构如下。

```
<?xml version="1.0" encoding="UTF-8"?>
<company>
    <department name="hr">
        <branch name="hr-recruitment">
            <manager> Manasa </manager>
            <phone>992222222</phone>
            <salary> 20000 </salary>
        </branch>
        <branch name="hr-finance">
            <manager> Sunder </manager>
            <phone>993333332</phone>
            <salary> 50000 </salary>
        </branch>
    </department>
    <department name="transport">
        <branch name="transport-employee">
            <manager> Raman </manager>
            <phone>888888888</phone>
            <salary> 30000 </salary>
        </branch>
        <branch name="transport-goods">
            <manager> Sheela </manager>
            <phone>99999999</phone>
            <salary> 75000 </salary>
        </branch>
    </department>
</company> 
```

以下是标有 JAXB 注释的 3 个类：

1) 公司.class

```
@XmlRootElement(name = "tarang")
public class Company {

    private List<Department> listDepartments;

    public Company(List<Department> listDepartments) {
        this.listDepartments = listDepartments;
    }

    public Company() {

    }

    @XmlElementRef
    public List<Department> getListDepartments() {
        return listDepartments;
    }

    public void setListDepartments(ArrayList<Department> listDepartments) {
        this.listDepartments = listDepartments;
    }

} 
```

2) 部门.class

```
@XmlRootElement(name = "department")
public class Department {

    private String strDepartmentName;

    private List<Branch> listBranchs;

    public Department(String strDepartmentName, List<Branch> listBranchs) {
        this.strDepartmentName = strDepartmentName;
        this.listBranchs = listBranchs;
    }

    public Department() {

    }

    @XmlElement(name = "name")
    public String getStrDepartmentName() {
        return strDepartmentName;
    }

    public void setStrDepartmentName(String strDepartmentName) {
        this.strDepartmentName = strDepartmentName;
    }

    @XmlElementRef
    public List<Branch> getListBranchs() {
        return listBranchs;
    }

    public void setListBranchs(List<Branch> listBranchs) {
        this.listBranchs = listBranchs;
    }

} 
```

3) 分支.class

```
@XmlRootElement(name = "branch")
public class Branch {

    private String strName;
    private String strManagerName;
    private String strPhone;
    private int intSalary;

    public Branch(String strName, String strManagerName, String strPhone,
            int intSalary) {
        this.strName = strName;
        this.strManagerName = strManagerName;
        this.strPhone = strPhone;
        this.intSalary = intSalary;
    }

    public Branch() {
        // TODO Auto-generated constructor stub
    }

    @XmlElement(name = "name")
    public String getStrName() {
        return strName;
    }

    public void setStrName(String strName) {
        this.strName = strName;
    }

    @XmlElement(name = "manager")
    public String getStrManagerName() {
        return strManagerName;
    }

    public void setStrManagerName(String strManagerName) {
        this.strManagerName = strManagerName;
    }

    @XmlElement(name = "phone")
    public String getStrPhone() {
        return strPhone;
    }

    public void setStrPhone(String strPhone) {
        this.strPhone = strPhone;
    }

    @XmlElement(name = "salary")
    public int getIntSalary() {
        return intSalary;
    }

    public void setIntSalary(int intSalary) {
        this.intSalary = intSalary;
    }

} 
```

我目前的设计包含 3 个类。

1) 公司 2) 部门 3) 分公司

关系是：

```
1) class Company -has a- List of Departments.
2) class Department -has a- name (String).
3) class Department -has a- List of Branches.
4) class Branch -has a- name (String)
5) class Branch -has a- manager (String)
6) class Branch -has a- phone (String)
7) class Branch -has a- salary (String) 
```

当前输出为：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <tarang>
        <department>
            <branch>
                <salary>50000</salary>
                <manager>Manasa</manager>
                <name>hr-recruitment</name>
                <phone>999999999</phone>
            </branch>
            <branch>
                <salary>40000</salary>
                <manager>Sundar</manager>
                <name>hr-finance</name>
                <phone>888888888</phone>
            </branch>
            <name>hr</name>
        </department>
        <department>
            <branch>
                <salary>30000</salary>
                <manager>Raman</manager>
                <name>transport-employee</name>
                <phone>7777777777</phone>
            </branch>
            <branch>
                <salary>20000</salary>
                <manager>Sheela</manager>
                <name>transport-goods</name>
                <phone>6666666666</phone>
            </branch>
            <name>tranport</name>
        </department>
    </tarang> 
```

部门名称和分支名称未作为属性附加。请建议我在课程中进行更正，我必须在其中`@xmlattribute`应用注释才能获得所需的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T07:22:55.440

`@XmlAttribute`应在您的`Department`类中添加到字段声明中，如下所示：

```
@XmlAttribute(name = "name")
private String strDepartmentName; 
```

有关 XmlAttribute 注释的更多详细信息，请参见[此处](http://jaxb.java.net/jaxb20-ed/api/javax/xml/bind/annotation/XmlAttribute.html)。

# java - Java IO 性能 XOR 与 2 个文件

> ID：12525767
> 
> 赞同：5
> 
> 时间：2012-09-21T07:07:42.390
> 
> 标签：java, performance, io, xor

我的 Java IO 性能有一些问题。

首先，我在这里阅读了关于我试图实现的性能的提示。

但这是我的问题：

对于小文件（最大 400MB），它非常快。但是我将使用的真实文件大约是 30 GB。有了这些，它会像地狱一样慢下来。

它的作用：取 2 个文件，进行独占或编写一个新文件。

BTW：不用担心文件最后会被剪掉。那只是为了修正一个我还没有发现的小错误。

我希望有人给我小费。谢谢。

问候蒂莫

```
import java.io.File;
import java.io.IOException;
import java.io.RandomAccessFile;
import java.nio.ByteBuffer;
import java.nio.channels.FileChannel;

public class main {
    public static void main(String[] args) throws IOException {

        final long start = System.currentTimeMillis();
        // Init. FileChannel1
        final File file1 = new File("/home/tmann/Downloads/test/1.zip");
        final RandomAccessFile fis1 = new RandomAccessFile(file1, "rw");
        final FileChannel ch1 = fis1.getChannel();

        // Init. FileChannel2
        final File file2 = new File("/home/tmann/Downloads/test/2.zip");
        final RandomAccessFile fis2 = new RandomAccessFile(file2, "rw");
        final FileChannel ch2 = fis2.getChannel();
        // Init FileChannel3
        final File file3 = new File("/home/tmann/Downloads/test/32.zip");
        final RandomAccessFile fis3 = new RandomAccessFile(file3, "rw");
        final FileChannel ch3 = fis3.getChannel();
        // Init ByteBuffer1

        final ByteBuffer bytebuffer1 = ByteBuffer.allocate(65536);
        // Init ByteBuffer2
        final ByteBuffer bytebuffer2 = ByteBuffer.allocate(65536);
        // Init ByteBuffer3
        final ByteBuffer bytebuffer3 = ByteBuffer.allocate(65536);

        int byte1 = 0;
        int byte2 = 0;

        final byte[] array1 = bytebuffer1.array();
        final byte[] array2 = bytebuffer2.array();
        final byte[] array3 = bytebuffer3.array();

        int count = 0;

        while (byte1 != -1) {
            byte1=ch1.read(bytebuffer1);
            byte2=ch2.read(bytebuffer2);
                while (count < byte1) {
                        array3[count] = (byte) (array1[count] ^ array2[count]);
                        count++;
                                        }

           bytebuffer3.put(array3);

            bytebuffer1.flip();
            bytebuffer2.flip();
            bytebuffer3.flip();

                while (bytebuffer3.hasRemaining()) {
                        ch3.write(bytebuffer3);
                                                    }

            bytebuffer1.clear();
            bytebuffer2.clear();
            bytebuffer3.clear();

        }

        fis3.setLength(fis3.length()-59858);
        final long endvar = System.currentTimeMillis();
        System.out.println((500.0 / ((endvar - start) / 1000f)) + "MB/s");

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:13:45.650

为什么需要一个 RandomAccessFile 来顺序读取它？

您是否尝试过在 FileInputStream 上使用简单的 BufferedInputStream ？

# java - Servlet 与 REST

> ID：12525771
> 
> 赞同：30
> 
> 时间：2012-09-21T07:07:56.977
> 
> 标签：java, rest, servlets

我需要在服务器端创建 5 个方法来处理二进制数据。远程客户端是小程序和 JavaScript。客户端将向服务器发送文件，服务器必须解析这些文件，然后以 XML/JSON 的形式返回响应。

所以我很困惑 - 在这种情况下使用 REST 服务是一种好习惯吗？还是我应该使用 servlet？

我的同事告诉我：

> “创建仅由一个应用程序使用的 REST 服务是不好的。只有在许多应用程序使用时才必须创建 REST。REST 与 servlet 相比有一些缺点：REST 比 servlet 慢；更难编写比 servlet 更安全的 REST”

但是，我看到使用 Servlet 的一些缺点：我需要发送一个我想调用的函数名（即作为额外的 HTTP 参数发送函数名），然后在`doPost`方法内部执行以下切换：

```
switch(functionName) {
 case "function1":
   function1(); 
   break;
 case "function2"
   function2(); 
   break;
//.... more `case` statements....

} 
```

在 REST 的情况下，我可以简单地为不同的功能使用不同的 URL。此外，在 REST 的情况下，从服务器返回 JSON/XML 更方便。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-21T07:11:34.980

您在这里混淆了两种范式：

*   REST 是一种软件架构“风格”；
*   Servlet 是一种服务器端技术。

例如，您可以使用 Servlet 实现类似 REST 的服务。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-21T07:36:38.733

好吧，我不同意您的同事的意见，即仅由一个应用程序使用 rest 是不好的，因为您将来可能会决定让不同的应用程序使用相同的 rest api。如果我是你，我会选择纯 REST。为什么？

1.  如果您使用一些框架来实现休息（比如说[apache cxf](http://cxf.apache.org/docs/restful-services.html)或[jersey](http://jersey.java.net/)），您会得到很多开箱即用的东西 - 您编写 POJO 您会得到休息，您可以获得序列化和反序列化，例如 JSON 对象开箱即用（最终您将需要实现一些 JsonProviders，但这没什么大不了的）。

2.  工作起来很直观（如果您设计好其余 API）。

3.  JavaScript 客户端非常容易使用（特别是如果您使用 JQuery 或类似的东西）

但是，这在很大程度上取决于您到底想做什么，如果您有一些强大的事务逻辑，其余的可能会非常棘手。如果您只打算执行 POST 请求（不使用其他 HTTP 方法），您可能希望使用 Servlet，因为您不必使用其他框架并产生更多依赖项。请注意，REST 或多或少是一个架构概念，它与 Servlet 技术并不矛盾，如果您足够固执，您可以仅使用 servlet 制作一个 REST API :-)。希望我有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-19T17:42:03.710

首先，你说的是两种不同的范式。这有点像苹果和橘子。

REST 是一种服务风格，它使用 HTTP 操作（GET、PUT 等）来读取和写入资源的状态。将资源视为“名词”和“事物”。

另一方面，Servlet 是 Sun Microsystems 最初提供的一种软件规范，用于将 HTTP 请求连接到自定义 Java 代码。Servlet 经常用方法调用来说话：“动词”和“动作”。

由于您的问题暗示您正在寻求处理输入->输出方法，因此只需一个普通的 servlet 就可以完成这项工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-21T07:31:33.660

我在使用 Jersey 和创建 REST 服务时看不到任何问题。我知道我是一个 REST 塔利班人，但是使用 JAX-RS 实现这种架构真的很简单，所以......为什么不呢？

您的同事说：“只有在许多应用程序使用它时才必须创建 REST”，但我不明白这是怎么回事。为什么我不能为单个应用程序创建 REST 服务？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-21T08:51:10.643

听起来你的同事正在应用过早的优化。如果您可以使用 JAX-RS 库快速编写它，那么就这样做......如果它被证明是瓶颈，那么您是否花时间将其重写为 servlet。

以我的经验，JAX-RS 的性能开销不足以证明在*问题很好地映射到 JAX-RS 的情况下直接在 servlet 中编写等效的开发和维护开销是合理的*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T07:25:48.700

根据您的容器版本，Jersey（或任何其他 JAX-RS 实现）仍将使用 Servlet 将请求分派到适当的处理程序。

如果您的应用程序是真正的 RESTful，那么 JAX-RS 将满足您的需求。否则，请考虑使用 FrontController 来解释请求并将其转发给适当的处理程序。

另外，不要将 XML 或 JSON 与 REST 混淆。您将在大多数（如果不是全部）JAX-RS 实现中免费获得这些，但这些实现仍将内容编组委托给其他库（例如 JAXB）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-08T06:14:37.443

这是类似的链接。他用简单的servlet [http://software.danielwatrous.com/restful-java-servlet/](http://software.danielwatrous.com/restful-java-servlet/)

# sql - 带有触发更新查询的触发器的 SQLBulk Copy

> ID：12525773
> 
> 赞同：1
> 
> 时间：2012-09-21T07:07:58.307
> 
> 标签：sql, triggers, sqlbulkcopy

我已经使用`SQLBulkCopy`.

代码对我来说运行良好。

但我必须触发基于触发器的插入。

在触发器中，我在另一个表中插入记录`Inserted`

这也很好用。

但是，如果我正在检查另一个表是否已经有我试图插入和更新该记录的记录，那么这对我不起作用。

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:24:54.487

如果您使用的是 SQL Server 2008，请在触发器中使用 Merge 语句

例子：

```
MERGE INTO dbo.Table1 AS t
USING dbo.inserted AS i
        ON t.id= i.id
WHEN MATCHED THEN
    UPDATE SET
      t.col1= i.col1,
      t.col2= i.col2
WHEN NOT MATCHED THEN 
      INSERT (col1, col2)
      VALUES (i.col1, i.col2) 
```

# android - 在 Android 平板电脑上调试 Android 移动应用

> ID：12525777
> 
> 赞同：2
> 
> 时间：2012-09-21T07:08:13.693
> 
> 标签：android, debugging, mobile, tablet

我想知道是否可以在 Android 平板电脑上调试 Android 移动应用程序，但不能全屏调试 - 屏幕中间的实际尺寸与带有 iPhone 应用程序的 iPad 一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T09:20:42.737

这取决于应用程序内屏幕的布局设置。如果父布局（带有 xmlns 属性的布局）的宽度和高度属性设置为“match_parent”/fill_parent，则应用程序也将占据平板电脑的整个屏幕。如果您不希望全屏将其设置为“wrap_content”。

# jquery - 如何检查字符串是否为有效的 HTML 格式

> ID：12525779
> 
> 赞同：2
> 
> 时间：2012-09-21T07:08:27.937
> 
> 标签：jquery, html

我的要求是，在 Web 表单上，如果我选择一些字符串，单击按钮我应该能够知道我选择的字符串是否采用有效的 HTML 语法

```
 function chkhtml() {
            var code = $("<table><td>");
        code.each(function () {
           if($(this).html())
           {
            alert('success')
           } 
           else
           {
            alert('fail');
           }
        })
    } 
```

假设我写了上面的代码，它应该提醒我假但它会提醒我

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-21T07:11:56.133

```
var code = $("<div id='foo'>1</div><div id='bar'>2</div>");
code.each(function() {
    alert( $(this).html() ); //returns 1 if HTML 
}) 
```

我认为这是使用 HTML 和 J-Query 的可能解决方案。

# c# - 我们如何使用 C# 中的 API 将文件上传到机架空间云容器中

> ID：12525782
> 
> 赞同：0
> 
> 时间：2012-09-21T07:08:44.183
> 
> 标签：c#, api, httpwebrequest, rackspace-cloud

我想使用 C# 中的 API 将文件上传到机架空间云容器中，并且我使用的是 .net 4.0 版本。那么，我如何为此创建 webrequest。即使我成功地创建了具有相同请求的容器，但我无法在我的容器中创建对象。

我尝试将文件上传到容器中的次数，但我不断收到诸如未经授权访问之类的错误，我的代码如下所示：

```
HttpWebRequest request = WebRequest.Create(new Uri(authInfo.StorageUrl + "/TestContainer/myfile.txt")) as HttpWebRequest;
request.Method = "PUT";
request.Headers["X-Auth-Token"] = MyToken;
byte[] data = System.IO.File.ReadAllBytes(@"D:\myfile.txt");
request.ContentLength = data.Length;
//request.Headers["Content-Length"] = "512000";
var response = request.GetResponse(); 
```

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T14:17:19.097

您尚未将字节写入请求流。做这样的事情：

```
Stream reqStream = request.GetRequestStream();

reqStream.Write(fileBytes, 0, fileBytes.Length);

reqStream.Close();

Webresponse response = request.getresponse(); 
```

# c# - 从文本框复制后，重音字符无法正确显示

> ID：12525787
> 
> 赞同：2
> 
> 时间：2012-09-21T07:09:18.030
> 
> 标签：c#, wpf

我正在使用下面的代码从某些控件中复制文本。请注意文本可以是西班牙语或英语。稍后我将在富文本框中显示它。

```
Clipboard.Clear();
MyDocBodyControl.Range.Copy();
html = Convert.ToString(Clipboard.GetData(DataFormats.Html)); 
```

但是当我在富文本框中显示它们时，重音字符没有正确显示。如果我使用任何其他格式`Text`，那么我得到正确的重音字符。但我必须使用 HTML 格式，因为我有一些样式添加了复制的文本。

有什么方法可以用 HTML 数据格式正确显示重音字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:43:10.947

设置正确的编码？UTF-8/Unicode/... ? 还可以查看这些主题：[如何将 Unicode 字符转换为其 ASCII 等效字符](https://stackoverflow.com/questions/138449/how-to-convert-a-unicode-character-to-its-ascii-equivalent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-23T21:28:34.677

**DataFormats.Html** [规范](http://www.i18nqa.com/debug/utf8-debug.html)声明它以 UTF-8 编码。但是 .NET 4 Framework 及更低版本中存在一个错误，它实际上读取为 UTF-8 和**Windows-1252**。

你得到分配错误的编码，这会导致有趣/坏的字符，例如'Å'，'â€¹'，'Å''，'Å½'，'Å¡'，'Å“'，'Å¾'，' Å¸','Â','Â¡','Â¢','Â£','Â¤','Â¥','Â¦','Â§','Â¨','Â ©'

例如，“€”在 Windows-1252 中被错误地编码为“€”。

在这个专门的网站上的完整解释 [调试图表将 Windows-1252 字符映射到 UTF-8 字节到 Latin-1 字符](http://www.i18nqa.com/debug/utf8-debug.html)

但是通过使用[转换表](http://www.i18nqa.com/debug/utf8-debug.html)，您不会丢失任何 UTF-8 字符。您可以从 DataFormats.Html 获取原始的原始 UTF-8 字符。（注意：Ppm 解决方案在失败时默认为 ASCII，您会丢失编码信息！）

此外，Chrome 添加了 Apple-converted-* 字符，这些字符在剪辑中显示为例如 'Â'，但[声称](https://www.chromestatus.com/feature/5756335865987072)已被删除。

Soln：创建翻译词典并进行搜索和替换。

# extjs - 在控制器 ExtJS 中定义监听器

> ID：12525788
> 
> 赞同：8
> 
> 时间：2012-09-21T07:09:24.117
> 
> 标签：extjs, controller, listener

我得到了`tabpanel`- 它是`main`表单（视图）。在此`tabpanel`我定义了不同的选项卡 - `xtype:'panel'`。

所以，我有一个`main`（控制器）、`main`视图和一些选项卡视图。选项卡的视图在视图中被引用`main`。

我想在控制器中定义`activate`一些孩子的事件监听器。`panel``main`

我怎样才能做到这一点？

`main`控制器：

```
Ext.define('KP.controller.account.apartment.Main', {
    extend: 'Ext.app.Controller',

    views: ['account.apartment.Main',
        'account.apartment.Requisites'
    ],

    models: ['account.apartment.Requisites'
    ],
    stores: ['account.apartment.Requisites'
    ],

    init: function () {

    }
}); 
```

`main`观点：

```
Ext.define('KP.view.account.apartment.Main', {
    extend: 'Ext.window.Window',
    alias: 'widget.ApartmentData',

    height: 566,
    width: 950,
    activeItem: 0,
    layout: {
        type: 'fit'
    },
    autoShow: false,

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {            
            items: [
                {
                    xtype: 'tabpanel',
                    activeTab: 0,
                    deferredRender: true, 

                    items: [                        

                        {
                            xtype: 'RequisitesApartment'
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    }

}); 
```

子`panel`RequisitesApartment（查看）：

```
Ext.define('KP.view.account.apartment.Requisites', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.RequisitesApartment',

    id: 'panel_accountrequisites',
    height: 350,
    width: 1124,
    autoScroll: true,
    layout: {
        type: 'fit'
    },

    listeners: {
        activate: function () {           
               ....load data....
               ...this listeners I want to push in 'main' controller...            
        }
    },

    initComponent: function () {
        var me = this;

        var grid_store = Ext.create('KP.store.account.apartment.Requisites');

        Ext.applyIf(me, {
            dockedItems: [
                {
                    xtype: 'gridpanel',
                    height: 260,
                    autoScroll: true,
                    dock: 'bottom',
                    store: grid_store,
                    id: 'r_gridFlatParams',
                    forceFit: true,

                    columns: [
                        ...some columns....
                    ],
                    viewConfig: {
                }
            }
            ]
        });

        me.callParent(arguments);
    }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T08:21:41.053

将其直接注册为责任控制器中的**[控件](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-control)**

这是一个带有工作查询的示例。当然，您只需要查询，但我认为这是一个很好的例子。自定义 cfg 属性 ident 可以轻松找到每个选项卡。在下面的示例中，您将在每个面板中指定一个 tabConfig 并在那里定义标识。

```
Ext.create('Ext.tab.Panel', {
    width: 400,
    height: 400,
    renderTo: document.body,
    items: [{
        title: 'Foo',
        tabConfig: {
            ident: 'foo'
        },
    }, {
        title: 'Bar',
        tabConfig: {
            ident: 'bar',
            title: 'Custom Title',
            tooltip: 'A button tooltip'
        }
    }]
});

console.log(Ext.ComponentQuery.query('tabpanel tabbar tab[ident=foo]')[0]);
console.log(Ext.ComponentQuery.query('tabpanel tabbar tab[ident=bar]')[0]); 
```

另一种方法是使用可以查询的 css id，`'#my-name'`但我建议使用自定义的，如上面的示例

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T11:00:46.843

好吧，我应该把这段代码放在'main'（控制器）中：

```
 this.control({
        'ApartmentData tabpanel RequisitesApartment': {
            activate: function () {
                console.log('hello!');                
            }
        }
    }); 
```

问题出在我使用的错误选择器中。正确的选择器是：

```
 'ApartmentData tabpanel RequisitesApartment' 
```

有'ApartmentData'（定义为a `alias: 'widget.ApartmentData'`） - 是'window' xtype - 主要形式。tabpanel - 在“窗口”中带有选项卡的面板，以及“apartServList”（定义类似`alias: 'widget.RequisitesApartment'`） - 一些面板。

谢谢[你](https://stackoverflow.com/users/701988)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:38:46.577

正确的做法是将配置对象传递给成员函数**控件**到*控制器* **初始化**函数中。来自 Sencha 文档：*控制函数可以轻松地监听视图类上的事件并使用处理函数执行一些操作。*

直接来自 extjs 文档的简单示例：

```
Ext.define('MyApp.controller.Users', {
extend: 'Ext.app.Controller',

init: function() {
    this.control({
        'viewport > panel': {
            render: this.onPanelRendered
        }
    });
},

onPanelRendered: function() {
    console.log('The panel was rendered');
}
}); 
```

希望这可以帮助。干杯

# unix - Unix .pid 文件自动创建？

> ID：12525790
> 
> 赞同：0
> 
> 时间：2012-09-21T07:09:29.140
> 
> 标签：unix, pid

> **可能重复：**
> [在 Unix 上正确处理 PID 文件的参考](https://stackoverflow.com/questions/688343/reference-for-proper-handling-of-pid-file-on-unix)

unix 中的 .pid 文件是否由操作系统在进程运行时自动创建，或者该进程是否应该以编程方式创建一个 .pid 文件，如 "echo $$ > myprogram.pid" ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:12:41.377

后者是正确的——一个进程必须创建 .pid 文件（操作系统不会这样做）。`pid`文件经常被守护进程用于各种目的。例如，它们可用于防止进程多次运行。它们也可以用来使控制进程（例如`apache2ctl`）知道向哪个进程发送信号。

# jquery - Jquery.get() 中的问题：成功回调函数被调用两次

> ID：12525791
> 
> 赞同：0
> 
> 时间：2012-09-21T07:09:30.407
> 
> 标签：jquery

成功回调函数被调用了两次，无法理解这种行为。

```
$.get("getDetails", {
selCity : $("#selCity")[0].value}, function(data) {
alert("reached here");
$("#myform").html("");
$("#myform").html(data);
initiateDatePicker();
}); 
```

以下语句执行两次：

```
alert("reached here");
    $("#myform").html("");
    $("#myform").html(data);
    initiateDatePicker(); 
```

上面的代码有什么问题？还是 MI 遗漏了什么？

谢谢， 希哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:19:57.910

正如@Musa 所指出的，这个问题是因为警报。用 console.log 替换 alert 以进行调试。

# javascript - 将 HTML 页面上的元素集与类“配对”

> ID：12525792
> 
> 赞同：0
> 
> 时间：2012-09-21T07:09:33.673
> 
> 标签：javascript, jquery, html

这是对[这个](https://stackoverflow.com/questions/12525379/get-the-parent-html-element-of-certain-type-with-js)问题的跟进。我的页面上有很多结构，看起来有点像这样：

```
<h2>
<span class="stuff">[<a href="whatever">stuff</a>]</span> <span class="moreStuff">Another test</span>
</h2> 
```

我想在其中的每一个中“配对” the`<a>`和 the `<h2>`，例如给他们相同的班级，这样当我选择 an 时，`<a>`我也可以选择“corresponding” `<h2>`。我将如何去做（与前面的问题一样，JQuery 非常受欢迎）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:18:37.873

第一次回答我自己的问题：我会使用这样的东西：

```
$("my selector").each(function(i) {
    $(this).attr("class", "pair" + i);
    $(this).closest("h2").attr("class", "pair" + i);
} 
```

# php - 301重定向-我的情况是apache还是php？

> ID：12525794
> 
> 赞同：1
> 
> 时间：2012-09-21T07:09:50.853
> 
> 标签：php, apache, .htaccess, header, http-status-code-301

我有一个博客 www.SITE_NAME.com，它托管在 blogger.com 上，它已经有将近 4 年的历史了，并且搜索引擎排名更好。大部分流量来自谷歌。现在我正在用drupal 重新设计我的网站。

所以我想将所有带有 301 的旧链接重定向到新页面，因为我有近 700 个页面，我想要应用一些逻辑（在某些情况下我想手动重定向）。使用 Apache 或 php 哪个更好？或者有什么其他建议？

注意：因为我的旧网站在 blogger.com 中，所以它的路径是这样的`www.SITE_NAME.com/2007/08/music.html`，我的新路径就像`www.SITE_NAME.com/DYNAMIC_PATH`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:14:21.903

如果我们谈论的是性能，那么 .htaccess/apache 肯定会更好/更快。如果您想在重定向上实现一些逻辑，那么使用标头可能会更容易使用 php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:46:05.107

这些脚本应该放在 .htaccess 文件中。

```
//*301 Redirect: xyz-site.com to www.xyz-site.com

RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !^www.xyz-site.com$ [NC]
RewriteRule ^(.*)$ http://www.xyz-site.com/$1 [L,R=301]

//*301 Redirect: www.xyz-site.com to xyz-site.com

RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !^xyz-site.com$ [NC]
RewriteRule ^(.*)$ http://xyz-site.com/$1 [L,R=301]

//*301 Redirect: Redirecting Individual pages

Redirect 301 /previous-page.html http://www.xyz-site.com/new-page.html 
```

或者你可以使用

使用 PHP 重定向

```
<?php
Header( "HTTP/1.1 301 Moved Permanently" );
Header( "Location: http://www.xyz-site.com" );
exit(0);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T07:25:00.923

绝对使用 301。它让搜索引擎知道该站点已永久移动，并且应该将任何“链接权重”从旧 URL 转移到新 URL。[从Google 网站管理员](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=83105)那里查看此信息

这是关于[重定向大量链接的](https://productforums.google.com/forum/#!topic/webmasters/mhaJ1g3VqCg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T07:37:08.227

抱歉，我还不能发表评论。如果域是相同的，你应该“图片”相同的网站结构（相同的永久链接），我想使用这样的东西：

[http://drupal.org/project/blogger_importer](http://drupal.org/project/blogger_importer)

那么你根本不应该使用任何重定向。

# mono - iPhone 5 分辨率和 MonoDevelop

> ID：12525799
> 
> 赞同：0
> 
> 时间：2012-09-21T07:10:16.633
> 
> 标签：mono, xamarin.ios, monodevelop, iphone-5

今天，我收到了来自 Apple Developer Support 的这封电子邮件：

> 如果您要为 iPhone 5 和 iPod touch（第 5 代）更新您的应用程序，您必须提供额外的屏幕截图以支持 App Store 的新屏幕尺寸。新的屏幕截图尺寸为：
> 
> *   640 x 1136（纵向）
> *   640 x 1096（纵向）
> *   1136 x 640（横向）
> *   1136 x 600（横向）

但是没有支持此分辨率（在 iPhone 应用程序选项中）的 MonoDevelop 版本（无 alpha 或 beta 版本）。在这种情况下，我可以做些什么来提交符合图标的申请？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T07:48:24.773

这与 MonoDevelop 无关。对于 iPhone 3，应用程序的图标仍然必须是低分辨率，对于 iPhone 4(S) 和 iPad 3，应用程序的图标必须是“Retina”分辨率。这封邮件是关于 App Store 中显示的屏幕截图。您可以使用 Xcode Organizer 截取您的应用程序的屏幕截图。登录[itunesconnect.apple.com 后](http://itunesconnect.apple.com)，您可以为您的（提交的）应用上传这些屏幕截图。

# android - 显示大量图像而不将它们存储为字节数据？

> ID：12525801
> 
> 赞同：0
> 
> 时间：2012-09-21T07:10:28.357
> 
> 标签：android, bitmap, byte, inputstream

我一直在对图像和其他东西使用各种延迟加载技术。它有效，但我想知道是否有更好的方法让某人知道从服务器/网络服务/不需要太多内存或时间来下载的任何东西。我问的原因是因为我有一个海外开发人员要求我为一个项目重建一个 web 服务，并要求我允许他们只使用一个 url 来获取图像。我的想法是，无论是 url 还是服务的帖子，结果仍然必须通过输入流返回，无论是虚拟的还是存储在硬盘中，它都会占用相同的内存。他的问题让我有点困惑，所以出于好奇我在这里问......有没有办法在不使用输入流的情况下获取图像？我想这就像一个卡路里免费图像哈哈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:09:16.567

您可以将大图像拼接成小图像并丢弃大图像。这就是缩略图在图像程序中的工作方式。

# c# - 在asp.net c#中带有ajax控件和文本框的Web服务

> ID：12525804
> 
> 赞同：0
> 
> 时间：2012-09-21T07:11:05.070
> 
> 标签：c#, asp.net, web-services

我正在尝试使用此代码访问 Web 服务。我还添加了一个带有文本框控件的默认页面，但在运行时只有文本框可见。我还在网络配置中添加了一个具有正确路径的数据库，但它仍然无法正常工作。请帮帮我。我正在尝试从我的机​​器 IP 地址访问它，但它返回错误。有必要安装吗？

```
public static List<string> getinfo(string prefixText)
    {
        SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["constr"].ToString());
        conn.Open();
        SqlCommand cmd = new SqlCommand("select*from raj where firstname like +'%'", conn);
        cmd.Parameters.AddWithValue("@firstname", prefixText);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataTable dt = new DataTable();
        da.Fill(dt);
        List<string> firstname = new List<string>();
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            firstname.Add(dt.Rows[i][0].ToString());
        }
        return firstname;
    } 
```

运行时它不会返回任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:34:58.040

你错过`@firstname`了命令

```
SqlCommand cmd = new SqlCommand("select*from raj where firstname like '%'+@firstname
+'%'", conn); 
```

或者第二种方式..

```
SqlCommand cmd = new SqlCommand("select*from raj where firstname like @firstname", conn);         
cmd.Parameters.AddWithValue("@firstname", "%"+prefixText+"%"); 
```

**编辑：-** 试试这个代码..使用 SqlReader....

```
SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["constr"].ToString());
     conn.Open();
SqlCommand cmd = new SqlCommand("select*from raj where firstname like  @firstname", conn);
     cmd.Parameters.AddWithValue("@firstname","%"+prefixText+"%");        
     List<string> firstname = new List<string>();

     using (SqlDataReader reader = cmd.ExecuteReader())
     {
         while (reader.Read())
         {
            firstname.Add(reader[0].ToString());
         }             
         reader.Close();
     }
     connection.Close(); 
     return firstname; 
```

# c++ - cdecl inet_ntop(int,void const *,char *,unsigned int)" 在函数 _main 中引用

> ID：12525805
> 
> 赞同：0
> 
> 时间：2012-09-21T07:11:06.520
> 
> 标签：c++, inet

我在我的代码中使用 inet_ntop 来获取离线捕获文件的 IP 地址。我收到错误

`error LNK2019: unresolved external symbol "char const*__cdecl inet_ntop(int,void const *,char *,unsigned int)" (?inet_ntop@@YAPBDHPBXPADI@Z) referenced in function _main`

```
 ddd.cpp : Defines the entry point for the console application.
        //

#include "stdafx.h"
#include <string>
#include <iostream>
#include <pcap.h>
#include <ether.h>
#include <ip.h>
#include <ipnet.h>
#include <ipproto.h>
#include <tcp.h>
#include <udp.h>
#include <ethertype.h>
#include <tcpdump-stdinc.h>

using namespace std;

void PrintPacket(pcap_pkthdr * header, const u_char *data);
void PrintData(u_int startOctet, u_int endOctet, const u_char *data);
u_short get_ethertype_value(const u_char *data);
char * get_ethertype(const u_int16_t ethertype);

static u_int packetCount = 0;

#define SIZE_ETHERNET 14

int main(int argc, char *argv[])
{

string file = "C:\\Users\\legendkiller\\Documents\\Visual Studio 2010\\Projects\\new.pcap"; 
char errbuff[PCAP_ERRBUF_SIZE];
pcap_t * pcap = pcap_open_offline(file.c_str(), errbuff);
struct pcap_pkthdr *header;
const u_char *data;
while (int returnValue = pcap_next_ex(pcap, &header, &data) >= 0)
{

    PrintPacket(header, data);

    printf("Packet Details\n");

    const struct ether_header *ethernet;
    const struct ip* ipHeader;
    char sourceIp[INET_ADDRSTRLEN];
    char destIp[INET_ADDRSTRLEN];

    ethernet = (struct ether_header*)(data);

    // Print Destination Mac Address
    printf("Dst MAC: ");
    PrintData(0,5,ethernet->ether_dhost);

    // Print Source Mac Address
    printf("Src MAC: ", ethernet->ether_shost);
    PrintData(0,5,ethernet->ether_shost);

    // Print EtherType
    u_short ethertype = ntohs(ethernet->ether_type);
    printf("Ethertype: %s (%#.4x)\n", get_ethertype(ethertype), ethertype);
    ipHeader = (struct ip*)(data + sizeof(struct ether_header));
      inet_ntop(IPH_AF_INET, &(ipHeader->ip_src), sourceIp, INET_ADDRSTRLEN);
      inet_ntop(IPH_AF_INET, &(ipHeader->ip_dst), destIp, INET_ADDRSTRLEN);

    printf("sourceIp : %s\n", sourceIp);
    printf("destIp :%s\n",destIp);

    printf("\n\n");
} 
```

}

# javascript - 使用 jquery 加载外部页面

> ID：12525815
> 
> 赞同：0
> 
> 时间：2012-09-21T07:11:55.143
> 
> 标签：javascript, ajax, jquery

我正在尝试使用 jQuery 将外部页面加载到当前页面中，而用户不会看到页面加载。

当我调用页面“info.php”时，它被加载到`#content`div 中。这就是脚本应该做的事情。问题是在包含脚本和 div 的主页中`#content`，我已经有一些代码，我希望它在有人访问该页面时执行，而不是从任何外部页面调用。这是可行的，但是当我单击菜单中的一个链接时，我无法返回到初始内容。

这是我的代码的一个例外：

```
<script>
$(function() {
   $('#nav a').click(function() {
    var page = $(this).attr('href');
    $('#content').load(page + '.php');
    return false;
    });
});
</script>

<ul id="nav">
<li><a href="#">Page1</a></li>
<li><a href="about">About</a></li>
<li><a href="contact">Contact</a></li>
<li><a href="info">Info</a></li>
</ul>

<div id="content">
Here I have some code that I wanted to be attributed to the "Page1"
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:22:48.740

我对 load() 不是很熟悉，但在这种情况下，我认为您应该使用 ajax 来加载页面而不刷新。

```
var page = $(this).attr('href');
$.ajax({
  url: page + '.php',
  success: function(data)
  {
     $('#content').html(data);
  }
}) 
```

编辑：你说“当我点击菜单中的一个链接时，我无法返回到初始内容”，你的意思是你在 div #content 中有一些代码并且 onclick 你已经覆盖了它的内容?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:36:09.783

这是示例：

```
$(function()
{
   var content = $('#content');

   $('#nav a').click(function(e) {
       e.preventDefault();
       var page = $(this).attr('href');

       content.children().hide();
       var pageContent = content.find("#" + page);
       if(pageContent.length > 0)
       {
           pageContent.show();
       }
       else // put ajax here
       {
           content.append($('<div>').attr('id', page).text('New page ' + page));
       }
   });
}); 
```

演示：[jsfiddle.net/3jLjw/](http://jsfiddle.net/3jLjw/)

# mercurial - 是否可以将分支从存储库移动到 mercurial 中的另一个存储库？

> ID：12525817
> 
> 赞同：0
> 
> 时间：2012-09-21T07:12:14.370
> 
> 标签：mercurial

假设我在存储库中有一个分支，其中有几个历史变更集，如下所示。

```
== repository1 ==
( init)A -> B -> C -> D - E -> ...  (default branch)
                  \ 
                   \ -> C'1 -> C'2 -> C'3 -> ....  (branch1) 
```

现在，我想将 branch1 移动（移植）到另一个单独的存储库，如下所示。

```
== repository1 ==
(init)A -> B -> C -> D - E -> ...  (default branch)
                  \ 
                   \ -> C'1 -> C'2 -> C'3 -> ....  (branch1)

== repository2 ==
 (init)C'1 -> C'2 -> C'3 -> ...  (default branch) 
```

有谁知道该怎么做？谢谢。

**更新：**
在不包括其祖先的情况下转移部分存储库似乎有点奇怪。我遇到的情况是，我们开始开发一个大项目有一段时间了，为项目付钱的人希望能够分别、单独和独立地开发项目的某些组件。因为他们认为组件非常适合作为独立产品或小型开源项目，因此他们不希望在存储库中留下任何不相关的历史代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:33:00.123

你自己用过这个词：你需要[`hg transplant`](http://mercurial.selenic.com/wiki/TransplantExtension).

开始一个新的回购，然后做`hg transplant -s <original_repo> -b branch1`. 认为应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:57:51.763

移植扩展（如前所述）可能是最好的，但您还应该查看[转换扩展](http://mercurial.selenic.com/wiki/ConvertExtension)。虽然它名义上是用于从其他版本控制系统转换为 mercurial，但它对于从一个 Mercurial 存储库“转换”到另一个存储库也很有用，它对过滤和选择的支持非常精细。

根据您想要做什么，“转换”可能是也可能不是最直接的表达方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:17:43.813

顺序`(init)C'1 -> C'2 -> C'3 -> ... (default branch)`没有意义。`C'1`需要它的祖先！一个简单的克隆应该抓住你想要的东西。

```
$ hg clone repository1 clonerepo -r C'3 
```

*Clonerepo*现在包含 just `(init)A -> B -> C -> C'1 -> C'2 -> C'3`，它可能（也可能不是）是您想要的。

# git - 为什么不克隆 svn 分支？

> ID：12525818
> 
> 赞同：0
> 
> 时间：2012-09-21T07:12:22.130
> 
> 标签：git, google-chrome, version-control, git-svn, git-branch

svn repo 上有很多分支：

```
svn ls http://src.chromium.org/svn/
PRESUBMIT.py
branches/
codereview.settings
releases/
trunk/ 
```

在我使用 git svn clone 克隆它之后**，我的 git svn repo 上没有 svn 分支，为什么？**

```
git svn clone -s --revision=157076   http://src.chromium.org/svn/
mirror0@lab:~/chrome/g/chrome_g$ git branch -a
* master
  remotes/trunk
mirror0@lab:~/chrome/g/chrome_g$ git branch -r
  trunk 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T17:20:29.463

git svn has some [commandline options](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html) which control how the svn-layout looks like. See the blog-post at [http://www.jukie.net/bart/blog/svn-branches-in-git](http://www.jukie.net/bart/blog/svn-branches-in-git) for more information about handling branches, specifically there are options to specify where trunk, branches and tags are, i.e. "-T trunk -b branches -t tags".

In your case it seems branches were created at the root folder directly, not sure if git svn supports this non-standard usage of branches...

# websphere - Websphere 集群在哪里？

> ID：12525826
> 
> 赞同：0
> 
> 时间：2012-09-21T07:13:30.067
> 
> 标签：websphere, websphere-7

我已经为 Windows 下载了 WAS 8.5 trail，以便为应用服务器迁移做准备；正如 IBM 红皮书中所述，我找不到可用于管理 WAS 集群的选项**Servers > Clusters 。**
我是否需要下载其他产品，或者只是将其集群在没有许可证的情况下不可用？这可能是一个遗憾，因为我需要在决定我们是否可以摆脱我们目前在另一个应用程序服务器上遇到的其他问题之前在 WAS 集群上测试一个应用程序。
谢谢马克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:48:07.150

您需要 ND（网络部署）版本才能访问集群选项

# ruby-on-rails - 当我使用 SSO 时，我想要用户特定的会话 ID？

> ID：12525827
> 
> 赞同：0
> 
> 时间：2012-09-21T07:13:38.927
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在使用 SSO，当用户从门户注销时采取行动，那么不同门户上的所有其他会话和同一用户都应该过期，因为它是 SSO。请帮助我使用 Rails 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:24:57.873

一种实现是使用[http://code.google.com/p/rubycas-server/](http://code.google.com/p/rubycas-server/)

# objective-c - Objective-C 块语法

> ID：12525828
> 
> 赞同：5
> 
> 时间：2012-09-21T07:13:45.120
> 
> 标签：objective-c, syntax, objective-c-blocks

Obj-C 块是我最近第一次使用的东西。我试图理解以下块语法：

在头文件中：

```
@property (nonatomic, copy) void (^completionBlock)(id obj, NSError *err); 
```

在主文件中：

```
-(void)something{

id rootObject = nil;

// do something so rootObject is hopefully not nil

    if([self completionBlock])
        [self completionBlock](rootObject, nil); // What is this syntax referred to as?
} 
```

我感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T07:17:59.690

***块是对象。***

在您的方法中，您正在检查块是否不为零，然后您正在调用它并传递两个必需的参数......

请记住，块的调用方式与 ac 函数的调用方式相同...

下面我将声明一分为二，以便您更好地理解：

```
[self completionBlock]  //The property getter is called to retrieve the block object
   (rootObject, nil);   //The two required arguments are passed to the block object calling it 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T07:33:35.990

它是一个块属性，您可以在运行时设置一个块。

这是要设置的语法

因为它是void类型，所以在类中你可以通过下面的代码设置一个方法

```
self.completionBlock = ^(id aID, NSError *err){
    //do something here using id aID and NSError err
}; 
```

使用以下代码，您可以调用之前设置的方法/块。

```
if([self completionBlock])//only a check to see if you have set it or not
{
        [self completionBlock](aID, nil);//calling
} 
```

# css - 如何找到css工件？

> ID：12525832
> 
> 赞同：0
> 
> 时间：2012-09-21T07:13:53.170
> 
> 标签：css

> **可能重复：**
> [如何清理大型网站中的样式？](https://stackoverflow.com/questions/8120048/how-to-clean-up-styles-in-a-large-web-site)

我通常直接用 html/css 做模型，随着时间的推移会得到一些很难找到的 css 工件。不会产生错误，只是浪费空间。

是否有任何工具/浏览器插件来查找 css 工件（从未在页面上应用的规则）。

//编辑//

*我猜“规则”有点模糊，我说的是不存在的 id 和类，而不是单个 css-attributes*。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:19:51.370

您可以使用

> Dust-Me 选择器

[查找未使用的 CSS](https://addons.mozilla.org/en-US/firefox/addon/dust-me-selectors/) 一个 FireFox 的附加组件

还有在线工具

> [http://unused-css.com/](http://unused-css.com/)

# jquery - jQuery如何以很小的延迟将一个类一个一个地添加到一个元素中？

> ID：12525842
> 
> 赞同：1
> 
> 时间：2012-09-21T07:14:33.597
> 
> 标签：jquery, element, delay, each, addclass

jQuery如何在单击#button时以很小的延迟将一个类一个一个地添加到一个元素中？不要一次为所有元素添加类。我想一个一个地做。请帮忙。提前致谢。

```
<ul id="scroll-set">
<li class="  imVisible">Brentwood</li>
<li class="imVisible ">Antioch</li>
<li class=" imVisible">Pittsburg</li>
<li class=" imVisible">Concord</li>
<li class="imVisible ">Walnut Creek</li>
<li class=" imVisible">Danville</li>
<li class=" imVisible">San Ramon</li>

</ul>
<div id="button"> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T07:26:26.640

***[工作演示。](http://jsfiddle.net/vbwtW/)***

```
$('#button').click(function() {
  $('#scroll-set li').each(function(i) {
    var $li = $(this);
    setTimeout(function() {
      $li.addClass('imVisible');
    }, i*100); // delay 100 ms
  });
}); 
```

* * *

[***反向版本。***](http://jsfiddle.net/vbwtW/2/)

```
$('#button').click(function() {
  $($('#scroll-set li').get().reverse()).each(function(i) {
    var $li = $(this);
    setTimeout(function() {
      $li.addClass('imVisible');
    }, i*100); // delay 100 ms
  });
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T07:20:59.303

您可以使用`setInterval`：

```
$(function(){
  var el = $('li');
  var index = 0;
  var timer = window.setInterval(function(){
    if  (index < el.length) {
      el-eq(index++).addClass('imVisible');
    } else {
      window.clearInterval(timer);
    }
  }, 500);
}); 
```

演示：http: [//jsfiddle.net/bdUxa/](http://jsfiddle.net/bdUxa/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T07:19:22.020

延迟执行 settimeout 并按索引设置类名，它应该可以工作。

```
var i=0;
function changeClass()
{
    if(i<document.getElementById("scroll-set").childNodes.length)
    {
        document.getElementById("scroll-set").childNodes[i].className= "whateverclassname";
        i++;
        setTimeout(changeClass,1000);
    }
} 
```

让我知道它是否有效。

# actionscript-3 - 书签不再有效

> ID：12525847
> 
> 赞同：0
> 
> 时间：2012-09-21T07:15:28.690
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4, flex4.5

我正在为高级数据网格进行缩进和缩进。我有一组函数在对底层数据进行操作时可以正常工作，但是在对数据网格的选定项目进行操作时会抛出“错误：书签不再有效”。

```
Error: Bookmark no longer valid.
    at ListCollectionViewCursor/seek()[E:\dev\hero_private\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:2429]
    at mx.collections::HierarchicalCollectionViewCursor/get current()[E:\dev\hero_private\frameworks\projects\advancedgrids\src\mx\collections\HierarchicalCollectionViewCursor.as:220]
    at mx.collections::HierarchicalCollectionViewCursor/collectionChangeHandler()[E:\dev\hero_private\frameworks\projects\advancedgrids\src\mx\collections\HierarchicalCollectionViewCursor.as:1152]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at mx.collections::HierarchicalCollectionView/collectionChangeHandler()[E:\dev\hero_private\frameworks\projects\advancedgrids\src\mx\collections\HierarchicalCollectionView.as:1485]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at mx.collections::ListCollectionView/dispatchEvent()[E:\dev\hero_private\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:1024]
    at mx.collections::ListCollectionView/handlePropertyChangeEvents()[E:\dev\hero_private\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:1449]
    at mx.collections::ListCollectionView/listChangeHandler()[E:\dev\hero_private\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:1316]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at mx.collections::XMLListAdapter/itemUpdateHandler()[E:\dev\hero_private\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:623]
    at mx.collections::XMLListAdapter/itemUpdated()[E:\dev\hero_private\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:366]
    at mx.collections::XMLListAdapter/xmlNotification()[E:\dev\hero_private\frameworks\projects\framework\src\mx\collections\XMLListAdapter.as:725]
    at Function/<anonymous>()[E:\dev\hero_private\frameworks\projects\framework\src\mx\utils\XMLNotifier.as:93]
    at com.ibm.ilog.elixir.gantt::GanttChartBase/setItemField()[/data/flex/tools/branches/release-3.5/enterprise/build/product_build/trial_target/installers/enterprise/trial-sources/library/gantt/gantt/src/flex/com/ibm/ilog/elixir/gantt/GanttChartBase.as:1506]
    at com.ibm.ilog.elixir.gantt::GanttChartBase/commitTaskItem()[/data/flex/tools/branches/release-3.5/enterprise/build/product_build/trial_target/installers/enterprise/trial-sources/library/gantt/gantt/src/flex/com/ibm/ilog/elixir/gantt/GanttChartBase.as:1458]
    at com.ibm.ilog.elixir.gantt::TaskChart/commitTaskItem()[/data/flex/tools/branches/release-3.5/enterprise/build/product_build/trial_target/installers/enterprise/trial-sources/library/gantt/gantt/src/flex/com/ibm/ilog/elixir/gantt/TaskChart.as:1250]
    at com.ibm.ilog.elixir.gantt::GanttSheet/commitItem()[/data/flex/tools/branches/release-3.5/enterprise/build/product_build/trial_target/installers/enterprise/trial-sources/library/gantt/gantt/src/flex/com/ibm/ilog/elixir/gantt/GanttSheet.as:10242]
    at com.ibm.ilog.elixir.gantt::GanttSheet/resizeSummaryTask()[/data/flex/tools/branches/release-3.5/enterprise/build/product_build/trial_target/installers/enterprise/trial-sources/library/gantt/gantt/src/flex/com/ibm/ilog/elixir/gantt/GanttSheet.as:10399]
    at com.ibm.ilog.elixir.gantt::GanttSheet/resizeSummaryTasks()[/data/flex/tools/branches/release-3.5/enterprise/build/product_build/trial_target/installers/enterprise/trial-sources/library/gantt/gantt/src/flex/com/ibm/ilog/elixir/gantt/GanttSheet.as:10302]
    at com.ibm.ilog.elixir.gantt::GanttSheet/taskCollection_collectionChangeHandler()[/data/flex/tools/branches/release-3.5/enterprise/build/product_build/trial_target/installers/enterprise/trial-sources/library/gantt/gantt/src/flex/com/ibm/ilog/elixir/gantt/GanttSheet.as:9573]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at mx.collections::HierarchicalCollectionView/nestedCollectionChangeHandler()[E:\dev\hero_private\frameworks\projects\advancedgrids\src\mx\collections\HierarchicalCollectionView.as:1594]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at mx.collections::ListCollectionView/dispatchEvent()[E:\dev\hero_private\frameworks\projects\framework\src\mx\collections\ListCollectionView.as:1024]
    at mx.collections::HierarchicalCollectionView/xmlNotification()[E:\dev\hero_private\frameworks\projects\advancedgrids\src\mx\collections\HierarchicalCollectionView.as:1816]
    at Function/<anonymous>()[E:\dev\hero_private\frameworks\projects\framework\src\mx\utils\XMLNotifier.as:93]
    at com.indven.epm.project.util::CommandsUtil$/movNode()[D:\flash builder workspace\trunk\Sources\FlexSources\src\com\indven\epm\project\util\CommandsUtil.as:346]
    at com.indven.epm.project.util::CommandsUtil$/moveUpNode()[D:\flash builder workspace\trunk\Sources\FlexSources\src\com\indven\epm\project\util\CommandsUtil.as:270]
    at com.indven.epm.project.util::CommandsUtil$/changeNodeHierarchy()[D:\flash builder workspace\trunk\Sources\FlexSources\src\com\indven\epm\project\util\CommandsUtil.as:109]
    at com.indven.epm.project.task.view::TaskDetails/moveUp()[D:\flash builder workspace\trunk\Sources\FlexSources\src\com\indven\epm\project\task\view\TaskDetailsHandler.as:1231]
    at com.indven.epm.project.task.view::TaskDetails/___TaskDetails_Button11_click()[D:\flash builder workspace\trunk\Sources\FlexSources\src\com\indven\epm\project\task\view\TaskDetails.mxml:55]`enter code here` 
```

# android - 自定义圆形视图

> ID：12525851
> 
> 赞同：14
> 
> 时间：2012-09-21T07:15:45.690
> 
> 标签：android, android-layout, custom-controls, custom-component

我想制作可以在 android 上运行的图像中提到的菜单。

![循环菜单列表](../Images/ab5a58f1d8c6552672e0c203970be22c.png)

如果您在左半圈看到图像，则会显示。我想在旋转后旋转这个圆圈，它将显示其他隐藏的菜单。中央主菜单的右侧子菜单也会显示。

# android - 相机和相框 Android

> ID：12525852
> 
> 赞同：0
> 
> 时间：2012-09-21T07:15:50.757
> 
> 标签：android, camera, surfaceview

我是 android progamming 的新手，我想了解如何使用相机制作简单的应用程序并将其保存在 sdcard 中，但是在相机中有框架布局，所以当我用那个相机拍摄时，我的 sdcard 中也会显示带框架的图片。我已经搜索了带有表面的相机并保存到 SD 卡中，但是框架没有保存在该图片中的问题.. 任何人都可以帮助我教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:54:58.393

执行此操作的简单方法是拍摄包含图像和框架的布局的快照。快照返回您可以保存的位图。
以下是如何实现这一目标：

```
//here root layout is the layout containing the frame and the image
rootLayout.setDrawingCacheEnabled(true);
// bitmap containing frame and image
Bitmap snapBmp = root.getDrawingCache();

// now you can save this bitmap
... 
... 
```

# xml - xslt 无重复组的子组

> ID：12525853
> 
> 赞同：2
> 
> 时间：2012-09-21T07:15:55.947
> 
> 标签：xml, xslt

在对 xslt 进行了大约 3 小时的修补后，

我有以下输出

```
 <?xml version="1.0" encoding="UTF-8"?>
<tops>
<topCategory name="cat1">
    <top name="ninja" tuckedIn="0">
        <part path="ninja_abdomen.png" bodyPart="abdomen"/>
        <part path="ninja_humerus_l.png" bodyPart="humerus_l"/>
    </top>
    <top name="ninja" tuckedIn="0">
        <part path="ninja_abdomen.png" bodyPart="abdomen"/>
        <part path="ninja_humerus_l.png" bodyPart="humerus_l"/>
    </top>
    <top name="pirate" tuckedIn="0">
        <part path="pirate_humerus_l.png" bodyPart="humerus_l"/>
    </top>
</topCategory>
<topCategory name="cat2">
    <top name="monk" tuckedIn="1">
        <part path="monk_head.png" bodyPart="head"/>
    </top>
    <top name="monkey" tuckedIn="1">
        <part path="monkey_thorax.png" bodyPart="thorax"/>
        <part path="monkey_neck.png" bodyPart="neck"/>
    </top>
    <top name="monkey" tuckedIn="1">
        <part path="monkey_thorax.png" bodyPart="thorax"/>
        <part path="monkey_neck.png" bodyPart="neck"/>
    </top>
</topCategory>
</tops> 
```

问题是我有重复`<top>`的 s 我只想`<top>`为每个名称输入一个 s 条目。我相信我非常接近解决方案，但无法弄清楚。

原始的xml文件

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<tops>
    <top path = "ninja_abdomen.png" bodyPart = "abdomen" name = "ninja" tuckedIn = "0" topCategory= "cat1"/>
    <top path = "ninja_humerus_l.png" bodyPart = "humerus_l" name = "ninja" tuckedIn = "0" topCategory= "cat1"/>
    <top path = "pirate_humerus_l.png" bodyPart = "humerus_l" name = "pirate" tuckedIn = "0" topCategory= "cat1"/>
    <top path="monk_head.png" bodyPart="head" name="monk" tuckedIn="1" topCategory="cat2"/>
    <top path="monkey_thorax.png" bodyPart="thorax" name="monkey" tuckedIn="1" topCategory="cat2"/>
    <top path="monkey_neck.png" bodyPart="neck" name="monkey" tuckedIn="1" topCategory="cat2"/>
</tops> 
```

和 xslt 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="xml" indent = "yes"/>

<xsl:key name="eachTopCategory" match="tops/top" use="@topCategory"/>
<xsl:key name="eachTopName" match="tops/top" use="@name"/>
<xsl:key name="eachTop" match="tops/top" use="concat(@topCategory,'|', @name)"/>
<xsl:key name="eachPart" match="tops/top" use="concat(@bodyPart,'|' ,@name,'|',@topCategory)"/>

<xsl:template match="tops">
    <tops>
        <xsl:apply-templates select="top[generate-id(.)=generate-id(key('eachTopCategory',@topCategory)[1])]"/>
    </tops>
</xsl:template>

<xsl:template match="top">
    <topCategory>
        <xsl:attribute name="name">
            <xsl:value-of select="@topCategory" />
        </xsl:attribute>
        <xsl:for-each select="key('eachTopCategory',@topCategory)">
            <xsl:call-template name="sortTops"/>
        </xsl:for-each>
    </topCategory>
</xsl:template>

<xsl:template name="sortTops">
    <top>
        <xsl:attribute name="name">
            <xsl:value-of select="@name" />
        </xsl:attribute>
        <xsl:attribute name="tuckedIn">
            <xsl:value-of select="@tuckedIn" />
        </xsl:attribute>
        <xsl:for-each select="key('eachTop', concat(@topCategory,'|', @name))">
        <xsl:call-template name="sortParts"/>
        </xsl:for-each>
    </top>
</xsl:template>

<xsl:template name="sortParts">
    <part>
        <xsl:attribute name="path">
            <xsl:value-of select="@path" />
        </xsl:attribute>
        <xsl:attribute name="bodyPart">
            <xsl:value-of select="@bodyPart" />
        </xsl:attribute>
    </part>
</xsl:template>

</xsl:stylesheet> 
```

我的预期输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<tops>
<topCategory name="cat1">
    <top name="ninja" tuckedIn="0">
        <part path="ninja_abdomen.png" bodyPart="abdomen"/>
        <part path="ninja_humerus_l.png" bodyPart="humerus_l"/>
    </top>
    <top name="pirate" tuckedIn="0">
        <part path="pirate_humerus_l.png" bodyPart="humerus_l"/>
    </top>
</topCategory>
<topCategory name="cat2">
    <top name="monk" tuckedIn="1">
        <part path="monk_head.png" bodyPart="head"/>
    </top>
    <top name="monkey" tuckedIn="1">
        <part path="monkey_thorax.png" bodyPart="thorax"/>
        <part path="monkey_neck.png" bodyPart="neck"/>
    </top>
</topCategory>
</tops> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T07:56:53.110

我认为您只需要在这里使用两个**xsl:key**元素来进行 Muenchian 分组。一个用于按“类别”分组，第二个用于按“类别”和“名称”的串联分组

```
<xsl:key name="eachTopCategory" match="tops/top" use="@topCategory"/>
<xsl:key name="eachTop" match="tops/top" use="concat(@topCategory,'|', @name)"/> 
```

您已经正确地将模板应用到按不同类别名称分组

```
<xsl:apply-templates 
   select="top[generate-id()=generate-id(key('eachTopCategory',@topCategory)[1])]" /> 
```

但是在与此匹配的模板中，您需要匹配不同的“名称”记录，但在所选类别内。这是您使用连接键的地方：

```
<xsl:apply-templates 
   select="key('eachTopCategory',@topCategory)
      [generate-id()=generate-id(key('eachTop',concat(@topCategory,'|', @name))[1])]" 
      mode="top"/> 
```

请注意**模式**的使用，因为您最终会得到多个匹配**顶级**元素的模板。然后，在与这些**顶级**元素匹配的模板中，您将获得如下所示的各个部分

```
<xsl:apply-templates 
   select="key('eachTop',concat(@topCategory,'|', @name))" mode="part"/> 
```

这是完整的 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="eachTopCategory" match="tops/top" use="@topCategory"/>
   <xsl:key name="eachTop" match="tops/top" use="concat(@topCategory,'|', @name)"/>

   <xsl:template match="tops">
      <tops>
         <xsl:apply-templates select="top[generate-id()=generate-id(key('eachTopCategory',@topCategory)[1])]" mode="category"/>
      </tops>
   </xsl:template>

   <xsl:template match="top" mode="category">
      <topCategory name="{@topCategory}">
         <xsl:apply-templates select="key('eachTopCategory',@topCategory)[generate-id()=generate-id(key('eachTop',concat(@topCategory,'|', @name))[1])]" mode="top"/>
      </topCategory>
   </xsl:template>

   <xsl:template match="top" mode="top">
      <top name="{@name}" tuckedIn="{@tuckedIn}">
         <xsl:apply-templates select="key('eachTop',concat(@topCategory,'|', @name))" mode="part"/>
      </top>
   </xsl:template>   

   <xsl:template match="top" mode="part">
      <part path="{@path}" bodyPart="{@bodyPart}" />
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML 时，将生成以下内容

```
<tops>
   <topCategory name="cat1">
      <top name="ninja" tuckedIn="0">
         <part path="ninja_abdomen.png" bodyPart="abdomen"/>
         <part path="ninja_humerus_l.png" bodyPart="humerus_l"/>
      </top>
      <top name="pirate" tuckedIn="0">
         <part path="pirate_humerus_l.png" bodyPart="humerus_l"/>
      </top>
   </topCategory>
   <topCategory name="cat2">
      <top name="monk" tuckedIn="1">
         <part path="monk_head.png" bodyPart="head"/>
      </top>
      <top name="monkey" tuckedIn="1">
         <part path="monkey_thorax.png" bodyPart="thorax"/>
         <part path="monkey_neck.png" bodyPart="neck"/>
      </top>
   </topCategory>
</tops> 
```

请注意，如果您能够使用 XSLT2.0，这可以简化，因为它具有特殊的分组命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T08:01:10.050

很难相信这是我独立于蒂姆想出的！对我来说，这似乎是相同的解决方案。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />

<xsl:key name="eachTopCategory" match="top" use="@topCategory"/>
<xsl:key name="eachTop" match="top" use="concat(@topCategory,'|', @name,'|',@tuckedIn)"/>

<xsl:template match="/*">
  <tops>
    <xsl:apply-templates select="top[
      generate-id()=generate-id(key('eachTopCategory',@topCategory)[1])]" mode="category"/>
   </tops>
</xsl:template>

<xsl:template match="top" mode="category">
  <topCategory name="{@topCategory}">
    <xsl:apply-templates select="key('eachTopCategory',@topCategory)[
      generate-id()=generate-id(key('eachTop',concat(@topCategory,'|', @name,'|',@tuckedIn))[1])]" mode="top"/>
  </topCategory>
 </xsl:template>

<xsl:template match="top" mode="top">
  <top  name="{@name}" tuckedIn="{@tuckedIn}">
    <xsl:apply-templates select="key('eachTop',concat(@topCategory,'|', @name,'|',@tuckedIn))" mode="part" />
  </top>
 </xsl:template>

<xsl:template match="top" mode="part">
  <part path="{@path}" bodyPart="{@bodyPart}" />
 </xsl:template>

</xsl:stylesheet> 
```

# api - 如何在不使用mapview的情况下连接google api

> ID：12525855
> 
> 赞同：1
> 
> 时间：2012-09-21T07:16:06.443
> 
> 标签：api, xcode4, google-places-api

我对 Xcode 非常陌生，但我想要完成的是，当您打开应用程序时，我们被要求填写我们对食物的口味，然后单击 co 按钮后，我必须获取我周围的当前食物地点列表还有我在列表中的当前位置。我没有自己的数据库来存储我试图使用谷歌来实现这个功能的位置。我只从这里找到了这段代码。

```
 -(void) queryGooglePlaces: (NSString *) googleType {
        // Build the url string to send to Google. NOTE: The kGOOGLE_API_KEY is a constant that should contain your own API key that you obtain from Google. See this link for more info:
        // https://developers.google.com/maps/documentation/places/#Authentication
        NSString *url = [NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/json?location=%f,%f&radius=%@&types=%@&sensor=true&key=%@", currentCentre.latitude, currentCentre.longitude, [NSString stringWithFormat:@"%i", currenDist], googleType, kGOOGLE_API_KEY];

        //Formulate the string as a URL object.
        NSURL *googleRequestURL=[NSURL URLWithString:url];

        // Retrieve the results of the URL.
        dispatch_async(kBgQueue, ^{
            NSData* data = [NSData dataWithContentsOfURL: googleRequestURL];
            [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
        });
    }

-(void)fetchedData:(NSData *)responseData {
    //parse out the json data
    NSError* error;
    NSDictionary* json = [NSJSONSerialization 
                          JSONObjectWithData:responseData 

                          options:kNilOptions 
                          error:&error];

    //The results from Google will be an array obtained from the NSDictionary object with the key "results".
    NSArray* places = [json objectForKey:@"results"]; 

    //Write out the data to the console.
    NSLog(@"Google Data: %@", places);
}

-(void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated {
    //Get the east and west points on the map so you can calculate the distance (zoom level) of the current map view.
    MKMapRect mRect = self.mapView.visibleMapRect;
    MKMapPoint eastMapPoint = MKMapPointMake(MKMapRectGetMinX(mRect), MKMapRectGetMidY(mRect));
    MKMapPoint westMapPoint = MKMapPointMake(MKMapRectGetMaxX(mRect), MKMapRectGetMidY(mRect));

    //Set your current distance instance variable.
    currenDist = MKMetersBetweenMapPoints(eastMapPoint, westMapPoint);

    //Set your current center point on the map instance variable.
    currentCentre = self.mapView.centerCoordinate;
} 
```

实际上，就像我之前提到的那样，我不想在我的应用程序中使用 MapView。我只想在 UITableView 中列出餐厅的名称及其图像。代码和解释更可取。感谢您的亲切指导。

# javascript - 谷歌翻译参数表格

> ID：12525856
> 
> 赞同：1
> 
> 时间：2012-09-21T07:16:10.453
> 
> 标签：javascript, html, forms, google-translate

如何使用 html 表单检测输入中插入的语言以翻译成其他语言？使用希伯来语（iwrit）-英语语言。

```
<form action="http://translate.google.com/translate_t" target="_blank">
   <input type="text" name="text">
   <input type="hidden" value="hp" name="prev">
   <input type="hidden" value="iw" name="hl">
   <input type="hidden" value="y" name="js">
   <input type="hidden" value="" name="file">
   <input type="hidden" value="iw" name="sl">
   <input type="hidden" value="en" name="tl">
   <input type="hidden" value="#" name="history_state0">
   <input type="submit" value="Translate">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T07:30:20.013

假设您需要实时更新而不是在表单提交时更新，您将需要在文本框翻译更改时发出某种请求（[http://api.jquery.com/change/](http://api.jquery.com/change/)），然后对表示语言的表格。

至于功能本身，谷歌有一个翻译 API ( [https://developers.google.com/translate/v2/libraries](https://developers.google.com/translate/v2/libraries) )。在那里你会找到一个 JavaScript 接口，它应该为你处理所有繁重的工作。

我希望这会有所帮助。

# ios - 更改为 iOS6 后应用程序崩溃 - ucol_getVersion

> ID：12525857
> 
> 赞同：14
> 
> 时间：2012-09-21T07:16:22.947
> 
> 标签：ios, crash, ios6, crash-reports

我对更新的 ios-app 有疑问。上周三（在 iphone 主题演讲之前），该应用程序已提交审核。针对 iOS6-beta、iOS5、iOS4 进行了测试。-> 没问题。针对 iOS5 SDK 编译

现在，我收到了很多崩溃报告（系统：bugsense），仅限 iOS6。

精简版：

**SIGSEGV 类：信号文件：ucol_getVersion +**

符号化后，崩溃报告仍然不可读：

```
- 0 libicucore.A.dylib 0x318e4570 ucol_getVersion + -1
- 1 TextInput 0x36ee7fa9 _ZN2KB8WordTrie4loadERKNS_6StringE + 280
- 2 TextInput 0x36ee1495 + 16
- 3 TextInput 0x3724bcb3 + 58
- 4 TextInput 0x3724bc51 + 44
- 5 TextInput 0x36ed8f6d _ZN14TIInputManager17load_dictionariesERKN2KB6StringES3_b + 24
- 6 TextInput 0x36ee9fc1 + 220
- 7 TextInput 0x36ee9c07 + 502
- 8 UIKit 0x32c08f7f + 162
- 9 UIKit 0x32c07fd3 + 402
- 10 UIKit 0x32c07be7 + 378
- 11 UIKit 0x32c064b9 + 464
- 12 UIKit 0x32c061ab + 150
- 13 UIKit 0x32c68975 + 388
- 14 UIKit 0x32c65845 + 528
- 15 UIKit 0x32c65541 + 104
- 16 UIKit 0x32c63f47 + 406
- 17 UIKit 0x32c63d6f + 30
- 18 UIKit 0x32c636af + 34
- 19 APP 0x000186ff 0x1000 + 95999
- 20 APP 0x00093a93 0x1000 + 600723
- 21 Foundation 0x33ac7ef5 + 16
- 22 Foundation 0x33a079f1 + 200
- 23 Foundation 0x33a0790d + 60
- 24 CFNetwork 0x388ff5df + 26
- 25 CFNetwork 0x388feccb + 54
- 26 CFNetwork 0x38927133 + 18
- 27 CoreFoundation 0x361f974d CFArrayApplyFunction + 176
- 28 CFNetwork 0x38927593 + 74
- 29 CFNetwork 0x3888b15d + 188
- 30 CoreFoundation 0x36288683 + 14
- 31 CoreFoundation 0x36287ee9 + 212
- 32 CoreFoundation 0x36286cb7 + 646
- 33 CoreFoundation 0x361f9ebd CFRunLoopRunSpecific + 356
- 34 CoreFoundation 0x361f9d49 CFRunLoopRunInMode + 104
- 35 Foundation 0x339f678f + 254
- 36 APP 0x0007e4c9 0x1000 + 513225
- 37 Foundation 0x33a923db + 102
- 38 libdispatch.dylib 0x3535611f + 10
- 39 libdispatch.dylib 0x3535a961 + 252
- 40 libdispatch.dylib 0x3535aac1 + 84
- 41 libsystem_c.dylib 0x3605ea11 + 360 
```

有没有人有同样的问题？我怎样才能找到崩溃？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-21T13:11:07.997

我有同样的问题。对我来说，当我尝试显示 UIAlertView 时，应用程序崩溃了。

原来所有与UI相关的绘图功能都需要在UI线程上完成（我已经知道了，我想我只是有点草率）。太糟糕了，错误信息很神秘。

此线程可能对您有所帮助： [https ://devforums.apple.com/message/728324](https://devforums.apple.com/message/728324)

鉴于您发布的堆栈跟踪中有 UIKit 类，我猜这也是您的问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-02T10:55:49.813

这个问题很容易解决。只需在此代码之间输入您的代码：

```
dispatch_async(dispatch_get_main_queue(), ^{
// Create and show your alert view here      
}); 
```

亚历克斯

# java - 为什么这段代码在 netbeans 中抛出 ClassCastException 而它在 eclipse 中运行良好

> ID：12525861
> 
> 赞同：0
> 
> 时间：2012-09-21T07:16:44.367
> 
> 标签：java, hibernate, netbeans, classcastexception, runtimeexception

//运行时异常在netbeans中调用以下代码时发生运行时异常。在日食中工作正常。

```
 public List<Ticket> findOpenTickets() {
            Session session = null;

            try {
                session = getSession();
                Criteria criteria = session.createCriteria(getReferenceClass());
                            criteria.add(Restrictions.eq(Ticket.PROP_CLOSED, Boolean.FALSE));
                List list = criteria.list();
                return list;
            } finally {
                closeSession(session);
            }
        } 
```

异常堆栈跟踪是

```
java.lang.ClassCastException: java.lang.Boolean cannot be cast to java.lang.Short
at org.apache.derby.client.net.NetStatementRequest.buildFDODTA(Unknown Source)
at org.apache.derby.client.net.NetStatementRequest.buildSQLDTAcommandData(Unknown Source)
at org.apache.derby.client.net.NetStatementRequest.writeOpenQuery(Unknown Source)
at org.apache.derby.client.net.NetPreparedStatement.writeOpenQuery_(Unknown Source)
at org.apache.derby.client.am.PreparedStatement.writeOpenQuery(Unknown Source)
at org.apache.derby.client.am.PreparedStatement.flowExecute(Unknown Source)
at org.apache.derby.client.am.PreparedStatement.executeQueryX(Unknown Source)
at org.apache.derby.client.am.PreparedStatement.executeQuery(Unknown Source)
at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)
at org.hibernate.loader.Loader.getResultSet(Loader.java:1787)
at org.hibernate.loader.Loader.doQuery(Loader.java:674)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
at org.hibernate.loader.Loader.doList(Loader.java:2213)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
at org.hibernate.loader.Loader.list(Loader.java:2099)
at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:94)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569)
at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283)
at com.model.dao.TicketDAO.findOpenTickets(TicketDAO.java:154)
at com.util.TicketActiveDateSetterTask.run(TicketActiveDateSetterTask.java:29)
at com.main.Application.initDatabase(Application.java:160)
at com.main.Application.start(Application.java:91)
at com.main.Main.main(Main.java:12) 
```

我无法解决这个异常。因为一切似乎都很好，所以相同的代码在 Eclipse 中运行良好，但会产生运行时异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:49:46.743

检查您的 hibernate.dialect 是否正确？它必须是你的数据库..

# javascript - MVC3 - 如何在 javascript 中动态设置 facebook 应用程序 ID？

> ID：12525864
> 
> 赞同：1
> 
> 时间：2012-09-21T07:16:55.977
> 
> 标签：javascript, facebook, asp.net-mvc-3, build

我有一个使用许多 facebook api 调用的 MVC3 Web 应用程序。当我测试时，我正在使用一个 facebook 应用程序 ID，但会在产品中使用另一个（这将在构建过程中被交换）。

理想情况下，我想将应用程序 ID 放在 web.config 文件中，以便在构建过程中轻松交换它，以便 ID 只在一个地方。但是，我看不到将 id 从 app.config 获取到需要它的多个 javascript 函数的优雅方法。我查看了将其读入 _AppStart.cshtml 文件中的变量，但不确定这是否正确，因为这意味着将值读入 ac# 对象，然后将其作为字符串传递给在每个页面加载之前调用的 javascript 函数和闻起来有点不对劲。

我仍在学习 javascipt，所以我不确定这件事“应该”如何完成。任何指针都会很棒。

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:34:14.713

所以，我刚刚遇到了这个处理我的问题。我以为在问这个问题之前我已经用尽了谷歌，但显然不是;-) [integration-facebook-login-button-in-aspnet-mvc-4-application](http://blue-and-orange.net/articles/facebook/integrating-facebook-login-button-in-aspnet-mvc-4-application/)

# delphi - TListview CustomDrawItem 改变字体

> ID：12525866
> 
> 赞同：1
> 
> 时间：2012-09-21T07:16:59.360
> 
> 标签：delphi, delphi-7, vcl

我有一个列表视图，如果用户双击它，我想将项目的字体颜色更改为 clRed。但是，如果用户双击另一个项目，所有其他项目都应该返回黑色字体颜色，并且新的双击项目更改为 clRed - 依此类推。

我在这里有这段代码：

```
var
 CurrentProfile : String; // Global var that stores the caption of the double clicked item.

procedure TForm1.ListView1DblClick(Sender: TObject);
begin
 if ListView1.Selected <> NIL then CurrentProfile := ListView1.Selected.Caption;
end;

procedure TForm1.ListView1CustomDrawItem(
Sender: TCustomListView; Item: TListItem; State: TCustomDrawState;
var DefaultDraw: Boolean);
begin
 if item.Caption = CurrentProfile then begin
  Sender.Canvas.Font.Color := clRed;
 end else begin 
  Sender.Canvas.Font.Color := clBlack; // if not change it back to black
 end;
end; 
```

使用此代码，每个双击的项目都保留在 clRed 中。为什么它没有变回 clBlack？请帮忙。先感谢您。

PS.：我用的是delphi7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:20:17.537

双击事件处理程序需要强制重绘。`ListView1.Invalidate`在该处理程序的末尾调用。这将强制列表视图上的绘制周期。

```
procedure TForm1.ListView1DblClick(Sender: TObject);
begin
  if ListView1.Selected <> NIL then 
  begin
    CurrentProfile := ListView1.Selected.Caption; 
    ListView1.Invalidate;
  end;
end; 
```

# c# - WP7资源字典中的Uri

> ID：12525867
> 
> 赞同：1
> 
> 时间：2012-09-21T07:17:13.930
> 
> 标签：c#, windows-phone-7, xaml, expression-blend, resourcedictionary

我在主题文件夹中的 wp7 项目中定义了一个资源字典，名称为 darktheme.xaml

```
<ResourceDictionary
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:System="clr-namespace:System;assembly=mscorlib"
  xmlns:sys="clr-namespace:System;assembly=System">

    <sys:Uri x:Key="AppBarSettingsImage">/Images/dark/Settings.png</sys:Uri>
    <sys:Uri x:Key="AppBarTimingsImage" >/Images/dark/Timings.png</sys:Uri>

</ResourceDictionary> 
```

我称这是我的 App.xaml 像这样

```
<Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Themes/DarkTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources> 
```

我将所有图像作为构建动作 Content 和 CopyIfnewer 并将我的主题构建动作作为页面

一旦我运行我的项目，它就会抛出未处理的异常来加载资源字典。但是当我在我的主题（资源字典）中注释掉这段代码时，它就开始工作了。

```
<sys:Uri x:Key="AppBarSettingsImage">/Images/dark/Settings.png</sys:Uri>
<sys:Uri x:Key="AppBarTimingsImage" >/Images/dark/Timings.png</sys:Uri> 
```

实际上，我正在设置这些 uri 来设置我的 appbar iconuri 属性以使用我的这些静态资源进行设置。如此处讨论的 [WP7 Image Uri as StaticResource](https://stackoverflow.com/questions/5470941/wp7-image-uri-as-staticresource)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T21:39:36.947

不幸的是，您不能将（使用静态资源）绑定到 ApplicationBarIconButton。它不是 Silverlight 控件，它只是与 Windows Phone 7 操作系统进行低级互操作的包装对象。所以它不能被数据绑定。

我可以建议两个选项来做到这一点。

第一个也是更简单的一个：您可以从代码隐藏中对其进行操作。在这里您也可以访问您的资源字典，它只是我的一个工作示例（带有硬编码字符串）。

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    //this.AppBarButton1.IconUri = new Uri("/Images/dark/Timing.png"); //WRONG NullReferenceException
    var button1 = this.ApplicationBar.Buttons[1] as ApplicationBarIconButton;
    button1.IconUri = new Uri(@"./Images/dark/Timing.png", UriKind.Relative);
} 
```

第二个需要更多编码：您可以实现自己的 ApplicationBarIconButton。您需要从**ApplicationBarMenuItem**派生并实现**Microsoft.Phone.Shell.IApplicationBarIconButton**。之后，您可以将 DependencyProperty 添加到您自己的控件中，例如：

```
public Uri IconUri
    {
        get { return (Uri)GetValue(IconUriProperty); }
        set { SetValue(IconUriProperty, value); }
    }

// Using a DependencyProperty as the backing store for IconUri.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty IconUriProperty =
    DependencyProperty.Register(
        "IconUri",
        typeof(Uri),
        typeof(ApplicationBarIconButton),
        new PropertyMetadata(default(Uri), (d, e) => ((ApplicationBarIconButton)d).IconUriChanged((Uri)e.NewValue)));

private void IconUriChanged(Uri iconUri)
{
    var button = SysAppBarMenuItem as Microsoft.Phone.Shell.IApplicationBarIconButton;
    button.IconUri = iconUri;
} 
```

我希望它可以帮助你。

# php - ModX: 2 snippets on same page interacting with each other

> ID：12525876
> 
> 赞同：-1
> 
> 时间：2012-09-21T07:18:06.693
> 
> 标签：php, variables, code-snippets, modx, modx-revolution

I have 2 snippets (below). The issue is the if statemnt `if ($loggedin != NULL){` in the 2nd snippet doesnt pass even if the variable is not null. Its like the `$loggedin` variable in the 1st snippet doesnt apply to it. If I combine the 2 snippets into 1 they work fine.

Does anyone know how to make 2 snippets 'talk' to each other? (ps, running Revo 2.1.3)

```
<?php
$loggedin = "";
if (!isset($_SESSION['user_id'])) {
 // redirect to login page
}
else {
$loggedin = "true";
} 
```

2nd:

```
<?php
if ($loggedin != NULL){
echo  "logged in";
}
else {
echo  "error";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:53:03.423

First off, you are not passing the $loggedin variable to the second snippet, do this normally with a post or session variable.

Second, there is an easier way to check, these are straight out of Bob's guides.:

```
There are various methods. One easy method is to use this code:

if ($modx->user->get('username') == '(anonymous)') {
    /* user is not logged in */
}    
Here is the official method for seeing if the user is logged in 
to the current context:

if ($modx->user->hasSessionContext($modx->context->get('key'))) {
    /* user is logged in */
}    
If you know the name of the current context (e.g., web), 
you can use this method. The name of the context is required:

if $modx->user->isAuthenticated('web') {
    /* user is logged in to web context */
} 
```

that is if you need to roll your own authentication for some reason. ~ Otherwise, the login/register extra will do all of this for you.

*****UPDATE***** Two pass variables from one snippet to another in the same resource you can set/get placeholders:**

 **```
<?php
// snippet one

$modx->setPlaceholder('output','Place holder set!');

<?php
// snippet two

$myvar = $modx->getPlaceholder('output');

echo 'this is the value of "output": '.$myvar; 
```**

# c# - 导出到 Excel 的 TableRow 样式

> ID：12525877
> 
> 赞同：0
> 
> 时间：2012-09-21T07:18:15.393
> 
> 标签：c#, asp.net, .net

我有以下代码用于导出到 gridview 的 excel。我将 gridview 行添加到 System.Web.UI.WebControls.Table 中。现在，我需要将背景颜色应用于导出的 excel 中的标题和数据行（有两个标题行）。

我累了以下。它没有提供预期的结果。

当前解决方案的问题

1.  一个标题行没有背景颜色
2.  着色应用于没有数据的单元格（单元格“H”、“I”等）

我们怎样才能纠正它？

![在此处输入图像描述](../Images/9f912e3920cfc7d5f04403a9dcbdf22e.png)

注意：我正在尝试学习导出功能。所以，请不要建议使用任何第三方控件。我只是在探索这种方法的所有特性。

我正在使用以下代码将标题分组添加到原始网格视图。

```
protected void gvCustomers_RowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Header)
    {
        System.Text.StringBuilder sbNewHeader = new StringBuilder();
        sbNewHeader.AppendFormat("&nbsp;</th>" +
            "<th colspan='2' class='tableColGroupAssociate'>Associate Info <a href='#' class='associateHide'> Hide </a> </th>" +
            "<th colspan='2' class='tableColGroupTransaction'>Financial Info <a href='#' class='financialHide'> Hide </a> </th>" +
            "<th colspan='2' class='tableColGroupDailyTax'>Tax Info <a href='#' class='dailyTaxHide'> Hide </a> </th>"
            + "</tr>");
        sbNewHeader.AppendFormat("<tr class='{0}'><th>{1}", this.gvCustomers.HeaderStyle.CssClass, e.Row.Cells[0].Text);
        e.Row.Cells[0].Text = sbNewHeader.ToString();
    }
} 
```

完整代码

```
public static void Export(GridView gv)
{
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", "MyExcelFile.xls"));
    HttpContext.Current.Response.ContentType = "application/ms-excel";

    using (StringWriter stringWriter = new StringWriter())
    {
        using (HtmlTextWriter tetxWriter = new HtmlTextWriter(stringWriter))
        {

            System.Web.UI.WebControls.Table tableControl = new Table();
            tableControl.GridLines = gv.GridLines;

            //Before the next step - we can remove any controls inside the gridview and replace with literal control

            //  Add the header row to the table
            if (gv.HeaderRow != null)
            {
                TableRow tableRow = gv.HeaderRow;
                tableRow.Style[System.Web.UI.HtmlTextWriterStyle.BackgroundColor] = "Orange";
                tableControl.Rows.Add(gv.HeaderRow);
            }

            //  Add each of the data rows to the table
            foreach (GridViewRow row in gv.Rows)
            {
                TableRow tableRow = row;
                tableRow.Style[System.Web.UI.HtmlTextWriterStyle.BackgroundColor] = "Yellow";
                tableControl.Rows.Add(row);
            }

            //  Render the table into the htmlwriter
            tableControl.RenderControl(tetxWriter);

            //  Render the htmlwriter into the response
            HttpContext.Current.Response.Write(stringWriter.ToString());
            HttpContext.Current.Response.End();

        }
    }
} 
```

**编辑**

根据 Ankit 的评论，我尝试了以下方法；结果仍然不如预期。

```
 if (gv.HeaderRow != null)
            {
                TableRow tableRow = gv.HeaderRow;

                foreach (TableCell cell in tableRow.Cells)
                {
                    cell.Style[System.Web.UI.HtmlTextWriterStyle.BackgroundColor] = "Orange";
                }
                tableControl.Rows.Add(gv.HeaderRow);
            } 
```

![在此处输入图像描述](../Images/d1d7dff4037fde215cbc96c5f1beb94c.png)

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:29:50.290

如果您想更好地控制您的 excel 文件的编写方式，请查看[ClosedXML](http://closedxml.codeplex.com/)

添加表格很简单

```
var wb = new XLWorkbook();
wb.Worksheets.Add(myDataTable);
wb.SaveAs("MySheet.xlsx"); 
```

使用 API，您可以编写如下代码：

```
var rngTable = ws.Range("B2:F6");
rngTable.FirstCell().Style
    .Font.SetBold()
    .Fill.SetBackgroundColor(XLColor.CornflowerBlue)
    .Alignment.SetHorizontal(XLAlignmentHorizontalValues.Center); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:26:51.957

我想出了一个办法……为了其他人的利益，我会把它贴在这里：

参考：

1.  [ASP.NET Excel 导出编码问题](https://stackoverflow.com/questions/1679656/asp-net-excel-export-encoding-problem)

![在此处输入图像描述](../Images/1253f7a5942a878a8493620bec7dd40c.png)

其他注意事项：新建表时可以使用TableSection定义表头

```
 newRow.TableSection = TableRowSection.TableHeader; 
```

**代码**

//更改了用于为 HTML 渲染添加动态标题的逻辑：

```
protected void gvCustomers_RowCreated(object sender, GridViewRowEventArgs e)
{

    if (e.Row.RowType == DataControlRowType.Header)
    {
        GridViewRow newHeaderRow = new GridViewRow(-1, -1, DataControlRowType.Header, DataControlRowState.Normal);

        TableCell cell1 = new TableHeaderCell();
        cell1.ColumnSpan = 1; //e.Row.Cells.Count;
        cell1.Text = "";

        TableCell cell2 = new TableCell();
        cell2.ColumnSpan = 2;
        cell2.Text = "One";

        TableCell cell3 = new TableCell();
        cell3.ColumnSpan = 2;
        cell3.Text = "Two";

        TableCell cell4 = new TableCell();
        cell4.ColumnSpan = 2;
        cell4.Text = "Three";

        newHeaderRow.Cells.Add(cell1);
        newHeaderRow.Cells.Add(cell2);
        newHeaderRow.Cells.Add(cell3);
        newHeaderRow.Cells.Add(cell4);

        ((GridView)sender).Controls[0].Controls.AddAt(0, newHeaderRow);
    }

    if (e.Row.RowType == DataControlRowType.Header)
    {

        //System.Text.StringBuilder sbNewHeader = new StringBuilder();
        //sbNewHeader.AppendFormat("&nbsp;</th>" +
        //    "<th colspan='2' class='tableColGroupAssociate'>Associate Info <a href='#' class='associateHide'> Hide </a> </th>" +
        //    "<th colspan='2' class='tableColGroupTransaction'>Financial Info <a href='#' class='financialHide'> Hide </a> </th>" +
        //    "<th colspan='2' class='tableColGroupDailyTax'>Tax Info <a href='#' class='dailyTaxHide'> Hide </a> </th>"
        //    + "</tr>");
        //sbNewHeader.AppendFormat("<tr class='{0}'><th>{1}", this.gvCustomers.HeaderStyle.CssClass, e.Row.Cells[0].Text);
        //e.Row.Cells[0].Text = sbNewHeader.ToString();

    }

} 
```

//导出逻辑 - 再次应用类似的逻辑

```
public static void Export(GridView gv)
{
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", "MyExcelFile.xls"));
    HttpContext.Current.Response.ContentType = "application/ms-excel";

    //Response.ContentEncoding = System.Text.Encoding.Unicode;
    //Response.BinaryWrite(System.Text.Encoding.Unicode.GetPreamble());

    using (StringWriter stringWriter = new StringWriter())
    {
        using (HtmlTextWriter tetxWriter = new HtmlTextWriter(stringWriter))
        {

            System.Web.UI.WebControls.Table tableControl = new Table();
            tableControl.GridLines = gv.GridLines;

            //  Add the header row to the table
            if (gv.HeaderRow != null)
            {
                ReplaceControlForExport(gv.HeaderRow);

                #region Dynamic Frrst Header Row

                TableRow newRow = new TableRow();

                TableCell cell1 = new TableHeaderCell();
                cell1.ColumnSpan = 1; 
                cell1.Text = "";

                TableCell cell2 = new TableCell();
                cell2.ColumnSpan = 2;
                cell2.Text = "One";

                TableCell cell3 = new TableCell();
                cell3.ColumnSpan = 2;
                cell3.Text = "Two";

                TableCell cell4 = new TableCell();
                cell4.ColumnSpan = 2;
                cell4.Text = "Three";

                newRow.Cells.Add(cell1);
                newRow.Cells.Add(cell2);
                newRow.Cells.Add(cell3);
                newRow.Cells.Add(cell4);

                foreach (TableCell cell in newRow.Cells)
                {
                    cell.Style[System.Web.UI.HtmlTextWriterStyle.BackgroundColor] = "Purple";
                }
                tableControl.Rows.Add(newRow);

                #endregion 

                TableRow originalHeaderRow = gv.HeaderRow;
                foreach (TableCell cell in originalHeaderRow.Cells)
                {
                    cell.Style[System.Web.UI.HtmlTextWriterStyle.BackgroundColor] = "Orange";
                }
                tableControl.Rows.Add(originalHeaderRow);
            }

            //  Add each of the data rows to the table
            foreach (GridViewRow row in gv.Rows)
            {
                ReplaceControlForExport(row);

                TableRow tableRow = row;
                foreach (TableCell cell in tableRow.Cells)
                {
                    cell.Style[System.Web.UI.HtmlTextWriterStyle.BackgroundColor] = "Yellow";
                }
                tableControl.Rows.Add(row);
            }

            //  Render the table into the htmlwriter
            tableControl.RenderControl(tetxWriter);

            //  Render the htmlwriter into the response
            HttpContext.Current.Response.Write(stringWriter.ToString());
            HttpContext.Current.Response.End();

        }
    }
  }

 private static void ReplaceControlForExport(Control mainControlElement)
 {
    for (int i = 0; i < mainControlElement.Controls.Count; i++)
    {
        Control currentControl = mainControlElement.Controls[i];

        if (currentControl is LinkButton)
        {
            mainControlElement.Controls.Remove(currentControl);
            mainControlElement.Controls.AddAt(i, new LiteralControl((currentControl as LinkButton).Text));
        }
        else if (currentControl is ImageButton)
        {
            mainControlElement.Controls.Remove(currentControl);
            mainControlElement.Controls.AddAt(i, new LiteralControl((currentControl as ImageButton).AlternateText));
        }
        else if (currentControl is HyperLink)
        {
            mainControlElement.Controls.Remove(currentControl);
            mainControlElement.Controls.AddAt(i, new LiteralControl((currentControl as HyperLink).Text));
        }
        else if (currentControl is DropDownList)
        {
            mainControlElement.Controls.Remove(currentControl);
            mainControlElement.Controls.AddAt(i, new LiteralControl((currentControl as DropDownList).SelectedItem.Text));
        }
        else if (currentControl is CheckBox)
        {
            mainControlElement.Controls.Remove(currentControl);
            mainControlElement.Controls.AddAt(i, new LiteralControl((currentControl as CheckBox).Checked ? "True" : "False"));
        }

        //Recursive Call
        if (currentControl.HasControls())
        {
            ReplaceControlForExport(currentControl);
        }
    }
} 
```

# java - 通过 PDFBox 访问图像的“替代文本”

> ID：12525883
> 
> 赞同：3
> 
> 时间：2012-09-21T07:18:36.160
> 
> 标签：java, pdf, accessibility, pdfbox

[有没有办法使用PDFBox](http://pdfbox.apache.org/)为特定图像提取“替代文本” ？

我有一个 PDF 文件，如[http://www.w3.org/WAI/GL/2011/WD-WCAG20-TECHS-20110621/pdf.html#PDF1](http://www.w3.org/WAI/GL/2011/WD-WCAG20-TECHS-20110621/pdf.html#PDF1)所述，在图像中添加了替代文本。使用 PDFBox，我可以通过 PDFDocument.getDocumentCatalog().getAllPages() [iterator] .getResources.getImages() 通过对象模型找到图像本身（PDXObjectImage）的方法，但我看不到任何从图像中获取的方法本身到它的替代文本。

可以在[http://dl.dropbox.com/u/12253279/image_test_pass.pdf](http://dl.dropbox.com/u/12253279/image_test_pass.pdf)找到一个小的示例 PDF（带有指定了一些替代文本的单个图像） （它应该说“这是图像的替代文本。”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:50:01.593

I do not know how/if this can be done with PDFBox, but I can tell you that this feature is related to the sections of the PDF Spec called Logical Structutre/Tagged PDF, which is not fully supported in every PDF tool out-there.

Assuming it is supported by the tool you are using, you will have to follow 4 main steps to retrieve this information (I will use the sample PDF file you posted for the following explanation).

Assuming you have access to the internal structure of the PDF file, you will need to:

1- Parse the page content and find the MCID number of the Tag element that wraps the image you are interested in.

Page content:

```
BT
/P <</MCID 0 >>BDC 
/GS0 gs
/TT0 1 Tf
0.0004 Tc -0.0028 Tw 10.02 0 0 10.02 90 711 Tm
(This is an image test )Tj
EMC 
ET
/Figure <</MCID 1 >>BDC 
q
106.5 0 0 106.5 90 591.0599976 cm
/Im0 Do
Q
EMC 
```

Your image: ![enter image description here](../Images/6ef2af23a34da2ca40acfeac7e771da8.png)

2- In the page object, retrieve the key StructParents. ![enter image description here](../Images/1d8c815421f1713eeea6cc7938273aae.png)

3- Now retrieve the Structure Tree (key StructTreeRoot of the Catalog object, which is the root object in every PDF file), and inside it, the ParentTree.

4- The ParentTree starts with an array where you can find pairs of elements (See Number Trees in the PDF Spec for more details). In this specific tree, the first element of each pair is a numeric value that corresponds to the StructParents key retrieved in step 2, and the second element is an array of objects, where the indexes correspond to the MCID values retreived in step 1\. So, You will search here the element that corresponds to the MCID value of your image, and you will find a PDF object. Inside this object, you will find the alternate text.

![enter image description here](../Images/69ef6ddbc34e34a3dbabe1883fd5d887.png)

Looks easy, isn't it?

*Tools used in this answer:
PDF Vole (based on iText)
Amyuni PDF Analyzer*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T23:54:14.637

PDFBox 邮件列表中的 Eric 给我发了以下内容，虽然我还没有测试过...

* * *

你好，

对于您的测试文件，这是一种访问“/Alt”条目的方法：

```
 PDDocument document = PDDocument.load("image_test_pass.pdf");
    PDStructureTreeRoot treeRoot =
        document.getDocumentCatalog().getStructureTreeRoot();

    // get page for each StructElement
    for (Object o : treeRoot.getKids()) {
        if (o instanceof PDStructureElement) {
            PDStructureElement structElement = (PDStructureElement)o;
            System.out.println(structElement.getAlternateDescription());
            PDPage page = structElement.getPage();
            if (page != null) {
                page.getResources().getImages();
            }
        }
    } 
```

请参阅 PDF 规范[http://www.adobe.com/devnet/acrobat/pdfs/PDF32000_2008.pdf](http://www.adobe.com/devnet/acrobat/pdfs/PDF32000_2008.pdf)尤其是 §14.6、§14.7、§14.9.3 和 §14.9.4 以了解所有规则找到“/ Alt”条目。似乎有几种方法可以定义此信息。

BR，埃里克

# jquery - 获得类“活动”时如何禁用单击jquery

> ID：12525885
> 
> 赞同：1
> 
> 时间：2012-09-21T07:18:36.443
> 
> 标签：jquery, sizzle

我想在`div.button ol.control li`有类时禁用点击`active`。已经用了`.bind()`，但是还是不行，求大神帮忙，谢谢！

这是我的脚本[http://jsfiddle.net/surya31/HcaBS/](http://jsfiddle.net/surya31/HcaBS/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:22:15.053

```
$('your-selector').click(function(){
    if($(this).hasClass('active'))
        return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:20:19.963

您不需要禁用，您可以在选择器中显式否定它：

```
$('div.button ol.control li:not(.active)').click(function(){ ... 
```

# windows-8 - WinRT / Win8 中的多个 HTTP 请求

> ID：12525887
> 
> 赞同：1
> 
> 时间：2012-09-21T07:18:43.290
> 
> 标签：windows-8, windows-runtime

是否可以在 WinRT 中同时发送两个以上的 HTTP 请求？我正在尝试从服务器加载多个 JSON 文档，而 HttpWebRequest 在第二次调用后无法响应。这是一个示例片段，说明了这一点：

```
protected async override void OnNavigatedTo(NavigationEventArgs e)
{
    const string url = "http://www.bom.gov.au/fwo/IDV60901/IDV60901.94868.json";
    const int iterations = 3;

    var tasks = new List<Task>();
    var ticks = DateTime.Now.Ticks;

    for (var i = 0; i < iterations; i++)
    {
        // Create unique URL by appending a generated number.
        var uniqueUrl = string.Format("{0}?v={1}", url, (i + ticks));

        // Create the request.
        var request = WebRequest.CreateHttp(uniqueUrl);

        // Create the async task and store it for later.
        var task = request.GetResponseAsync();

        tasks.Add(task);
    }

    // Await all tasks in collection.
    await Task.WhenAll(tasks);

    Debugger.Break(); // <----- This will never break when iterations > 2
} 
```

将此代码放在空白的***MainPage.xaml.cs 中***并使用迭代值。如果将其设置为 2，则它可以工作。高于此，它将失败。

**注意**:: 测试时不要使用 Fiddler。Fiddler 做了一些有趣的事情，它允许所有这些连接通过。我不知道如何也不知道为什么。你可以自己测试一下。如果您在 fiddler 打开的情况下运行上面的代码，则成功。

**注意**:: 这不是真正的代码。我只是用这个例子来说明这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:49:15.143

我没有尝试`WebClient`在 WinRT 中使用 API，我只使用了`HttpClient`API（我在我的应用程序中使用得非常广泛）。

此代码有效：

```
const string url = "http://www.bom.gov.au/fwo/IDV60901/IDV60901.94868.json";
const int iterations = 10;

var tasks = new List<Task<HttpResponseMessage>>();
var ticks = DateTime.Now.Ticks;

for (var i = 0; i < iterations; i++)
{
    // Create unique URL by appending a generated number.
    var uniqueUrl = string.Format("{0}?v={1}", url, (i + ticks));

    var handler = new HttpClientHandler();

    var client = new HttpClient(handler)
                        {
                            BaseAddress = new Uri(uniqueUrl)
                        };

    var task = client.GetAsync(client.BaseAddress);

    tasks.Add(task);
}

// Await all tasks in collection.
await Task.WhenAll(tasks); 
```

尽管您需要对所有响应进行异步读取，但取出响应正文有点乏味，如下所示：

```
var responseTasks = tasks.Select(task => task.Result.Content.ReadAsStringAsync());

await Task.WhenAll(responseTasks); 
```

然后您可以遍历`responseTask`对象并获取它们的结果。

# ruby - 橡胶不启动

> ID：12525888
> 
> 赞同：0
> 
> 时间：2012-09-21T07:18:46.740
> 
> 标签：ruby, api

当我在控制台上运行 ruber 时，我得到了以下信息：

```
`require': cannot load such file -- korundum4 (LoadError) 
```

我已经安装了 korundum4 和任何其他 ruby​​ 绑定。我用rvm。

我用：`Kubuntu 12.04`

在 IRB 上是同样的错误，当我`require "korundum4"`. 我`$LOAD_PATH`的系统：

```
["/usr/local/lib/site_ruby/1.9.1", "/usr/local/lib/site_ruby/1.9.1/x86_64-linux", "/usr/local/lib/site_ruby", "/usr/lib/ruby/vendor_ruby/1.9.1", "/usr/lib/ruby/vendor_ruby/1.9.1/x86_64-linux", "/usr/lib/ruby/vendor_ruby", "/usr/lib/ruby/1.9.1", "/usr/lib/ruby/1.9.1/x86_64-linux"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:39:49.070

我找到了更好的解决方案：

`gem install qtbindings`

适用于 Qt4 和 rvm。

## 我的新解决方案：

### 依赖项.sh

```
#!/bin/bash

if [[ $USER -eq 'root' ]]; then
  exit 1
fi

sudo apt-get install libqt4-core libqt4-dev automoc ruby2.0-dev

wget http://rubyforge.org/frs/download.php/71843/qt4-qtruby-2.1.0.tar.gz
tar -xvzf qt4-qtruby-2.1.0.tar.gz
cd qt4-qtruby-2.1.0

rvm install 2.0.0
rvm use 2.0.0
rvm gemset gui
rvm use 2.0.0@gui

sed 's/Config::/RbConfig::/' cmake/modules/FindRuby.cmake > cmake/modules/FindRuby.cmake1
sed 's/ruby19/ruby19 ruby2 ruby20 ruby200 ruby2.0/' cmake/modules/FindRuby.cmake1 > cmake/modules/FindRuby.cmake2
mv cmake/modules/FindRuby.cmake2 cmake/modules/FindRuby.cmake

sed 's/Config::/RbConfig::/' cmake/modules/FindRUBY.cmake > cmake/modules/FindRUBY.cmake1
sed 's/ruby19/ruby19 ruby2 ruby20 ruby200 ruby2.0/' cmake/modules/FindRUBY.cmake1 > cmake/modules/FindRUBY.cmake2
mv cmake/modules/FindRUBY.cmake2 cmake/modules/FindRUBY.cmake

mkdir build
cd build

cmake ..
make
sudo make install

sudo ldconfig /usr/local/lib
sudo chown -R $USER:$USER $MY_RUBY_HOME

cd ../.. 
```

之后你可以这样做：

### 应用程序.rb

```
require 'rubygems'
require 'eventmachine'
require 'Qt4'

app = Qt::Application.new(ARGV)
hello_button = Qt::PushButton.new("Hello EventMachine")
hello_button.resize(100,20)
hello_button.show

EventMachine.run do
  EM.add_periodic_timer(0.01) do
    app.process_events
  end
end 
```

### 宝石文件

```
source 'http://rubygems.org'

gem 'eventmachine' 
```

这样您就可以将 ruby​​ 2.0.0 与 Smoke 和 Qt4 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:42:36.243

如您所见，Ruby 加载了安装在 RVM 中的 gem。如果您想使用系统范围的库运行您的应用程序，您需要使用以下命令将 RVM 切换到系统 Ruby：

```
$ rvm use system 
```

或阅读此[https://rvm.io/integration/qtruby/](https://rvm.io/integration/qtruby/)如何集成 QtRuby int RVM（我没有对此进行测试）。

# python - Python regex - 减少模式中的冗余？

> ID：12525889
> 
> 赞同：2
> 
> 时间：2012-09-21T07:18:56.553
> 
> 标签：python, regex, functional-programming

我们正在编写一个 Python 脚本来解析应用程序日志文件。

大多数日志文件将遵循类似的格式：

```
09:05:00.342344343 [DEBUG] [SOME_APPLICATION] [SOME_FUNCTION] Lorem ipsum dolor sic amet 
```

我们有各种正则表达式来解析通过的不同类型的日志行，并将相关字段剥离到 Python 正则表达式组（时间戳、日志级别、原始应用程序/函数以及有效负载中的字段）。

我将这些正则表达式中的每一个都存储在一个字典中：

```
foobar_patterns = {
    'pattern1': re.compile(r'blahblahblah'),
    'pattern2': re.compile(r'blahblahblahblah'),
} 
```

然而，显然每种模式之间存在相当多的重叠——用于提取时间戳、日志级别等的正则表达式是共享的。

有没有办法消除这种冗余？你能以某种方式从一个通用模板构建不同的正则表达式字符串吗？

扩展 - 我遍历文件中的行，然后对于每个给定的行，遍历每个编译的正则表达式。然后基于此，有不同的函数来处理每种情况 - 例如，如果我们检测到某种类型的消息，我们可能需要向前搜索三行以找到另一行，并从中提取一个字段。

我也在考虑在 foobar_patterns 字典中存储一个函数，然后当我们遇到匹配时，执行它。

这是一种 Pythonic 的做事方式吗？

干杯，维克多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:35:25.077

```
MONTH = r'(?P<month>Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)'
DAY = r'(?P<day>\d{2})'
TIME = r'(?P<hour>\d{2}):(?P<minute>\d{2}):(?P<second>\d{2})'
SPC = r'\s'
HOST = r'(?<host>\w+)'
PREFIX = SPC.join(MONTH, DAY, TIME, HOST)
foobar_patterns = {
    'pattern1': re.compile(PREFIX + r'\s(?<payload>blahbla hbla h blah)'),
    'pattern2': re.compile(PREFIX + r'\s(?<payload>bla h blahbla hblah)'),
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:48:50.163

您是否考虑过 Parsing 两次？例如，第一步提取、、、然后`timestamp`解析有效负载？您可能需要做一些缓存，也许首先构建一个已解析日志对象的列表，然后评估分离的日志消息（这样更容易跳过前面的 3 行（就像您提到的那样可能是必要的），而无需两次解析行）`level``Application``Function`

或者，您可以使用字符串连接：

伪代码：

```
basePattern = "\[\w+\]\[\w+\]\[\w+\]"
foobar_patterns {
 'payloadPattern1':'asdf',
 'payloadPattern2':'asdff',
}
for patternKey in foobar_patterns:
    foobar_patterns[patternKey] = re.compile(basePattern + foobar_patterns[paternKey]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T08:45:22.617

在构建复杂的正则表达式时，我经常使用“语法”方法。首先，您将“语法”定义为字典，例如：

```
logfile_grammar = {
    'spaces':  '\s+',
    'mname':   '(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)',
    'month':   r'\d\d',
    'day':     r'\d\d',
    'year':    r'\d{4}',
    'date':    '(?P<date>($year-$month-$day)|($day $spaces $mname $spaces $year))',
    'payload': '(?P<payload>.+)',
    # more stuff
    'line':    '$date $spaces $payload'
} 
```

如您所见，`$xxx`右侧指的是左侧的键（符号）。然后你把这个语法翻译成一个正则表达式：

```
def compile_grammar(grammar):
    g = dict(grammar)
    for _ in range(16):
        c = False
        for k, v in g.items():
            w = re.sub(r'\$(\w+)', lambda m: g[m.group(1)], v)
            if w != v:
                g[k] = w
                c = True
        if not c:
            return g
    raise ValueError('too much recursion')

g = compile_grammar(logfile_grammar)    
line_regex = re.compile(g['line'], re.X) 
```

现在，`line_regex`是一个可以处理任何可能的日志行的正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T07:24:57.233

如果有很多重叠，请考虑使用一次提取所有字段的单个正则表达式：

```
r'(?P<timestamp>\w*) \[(?P<level>\w*)\] \[(?P<application>\w*)\] ...' 
```

与此正则表达式匹配时，生成的匹配对象将具有一个`groupdict()`您可以从中提取命名组的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T07:39:25.840

怎么样：

```
import re

line = '09:05:00.342344343 [DEBUG] [SOME_APPLICATION] [SOME_FUNCTION] Lorem ipsum dolor sic amet'

ts_pattern = r'\d\d:\d\d:\d\d\.\d+'
name_pattern = r'\[\w+\]'

patterns = [('timestamp', ts_pattern),
            ('log_level', name_pattern),
            ('app_name', name_pattern),
            ('func_name', name_pattern),
            ('payload', '.*$')]

line_pattern = r'\s+'.join('(?P<%s>%s)' % (name, pattern) for name, pattern in patterns)

regex = re.compile(line_pattern)

matches = regex.match(line)

print matches.groupdict() 
```

这会给你：

```
{'timestamp': '09:05:00.342344343', 'log_level': '[DEBUG]', 'payload': 'Lorem ipsum dolor sic amet', 'func_name': '[SOME_FUNCTION]', 'app_name': '[SOME_APPLICATION]'} 
```

# c - 在 C 中手动实现舍入函数

> ID：12525891
> 
> 赞同：1
> 
> 时间：2012-09-21T07:19:01.057
> 
> 标签：c, floating-point, rounding

我编写了一个 C 程序（它是我项目的一部分）来将浮点值四舍五入到用户指定的给定精度。功能是这样的

```
 float round_offf (float num, int precision) 
```

我在这个程序中所做的是将浮点数转换为字符串，然后对其进行处理。

但是有没有办法让数字本身保持浮动并实现相同。

例如。num = 4.445 prec = 1 结果 = 4.4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T07:24:12.517

当然有。非常简单：

```
#include <math.h>

float custom_round(float num, int prec)
{
    int trunc = round(num * pow(10, prec));
    return (float)trunc / pow(10, prec);
} 
```

编辑：在我看来你想要这个，因为你认为你不能在格式字符串中具有动态精度。显然，您可以：

```
int precision = 3;
double pie = 3.14159265358979323648; // I'm hungry, I need a double pie
printf("Pi equals %.*lf\n", precision, pie); 
```

这打印`3.142`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:25:42.750

是的：

```
float round_offf(float num, int precision)
{
  int result;
  int power;

  power = pow(10, precision + 1);
  result = num * power;
  if ((result % 10) > 5)
    result += 10;
  result /= 10;
  return ((float)result / (float)power);
} 
```

# function - （简单）Matlab：找到零点（fzero）

> ID：12525893
> 
> 赞同：1
> 
> 时间：2012-09-21T07:19:14.437
> 
> 标签：function, matlab

我是 Matlab 的新手，我应该使用这个函数来找到所有 3 个零点。

fm（我的文件可以找到函数）

```
function fval = f(x)
% FVAL = F(X), compute the value of a test function in x
fval = exp(-x) - exp(-2*x) + 0.05*x - 0.25; 
```

所以很明显我写了“type f”来读取我的函数，但是我尝试像 fzero ('f', 0) 那样做，我得到 ans 0.4347，我假设这是我的 3 个零点中的 1 个，但是如何找到其他 2 ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:28:24.877

来自[fzero 文档](http://www.mathworks.nl/help/matlab/ref/fzero.html)

> `x = fzero(fun,x0)`试图在 附近找到零乐趣`x0`，如果`x0`是标量。`fun`是一个函数句柄。fzero 返回的值`x`靠近 fun 更改符号的点，如果搜索失败，则返回 NaN。在这种情况下，搜索会在搜索间隔扩大直到找到 Inf、NaN 或复数值时终止。

所以它不能自己找到全零，只有一个！哪一个取决于您输入的`x0`.

如果您知道间隔，这是一个如何找到更多零的示例。然而，它只是重复调用`fzero`区间中的不同点（如果您的离散化过于粗糙，那么仍然可能会错过零），更聪明的技术显然会更快：

[http://www.mathworks.nl/support/solutions/en/data/1-19BT9/index.html?product=ML&solution=1-19BT9](http://www.mathworks.nl/support/solutions/en/data/1-19BT9/index.html?product=ML&solution=1-19BT9)

正如您在文档和上面的示例中所见，调用 fzero 的正确方法是使用函数句柄 ( `@fun`)，因此在您的情况下：

```
zero1 = fzero(@f, 0); 
```

从[该信息](http://www.wolframalpha.com/input/?i=exp%28-x%29+-+exp%28-2%2ax%29+%2B+0.05%2ax+-+0.25%3B)中，您还可以看到实际的根`0.434738`位于`1.47755`和`4.84368`。因此，如果您使用 0.4、1.5 和 4.8 调用 fzero，您可能会从中得到这些值（fzero 的收敛取决于它使用的算法以及您提供的函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:47:42.447

只是为了补充 Gunther Struyf 的回答：Stephen Morris 的文件交换中有一个很好的功能，称为[FindRealRoots](http://www.mathworks.cn/matlabcentral/fileexchange/15122-real-roots-on-interval)。此函数在任何间隔上找到任何函数的所有根的近似值。

它通过用切比雪夫多项式逼近函数来工作，然后计算该多项式的根。这显然只适用于连续、平滑和表现良好的函数，但你给出的函数似乎具有这些品质。

你会像这样使用它：

```
%# find approximate roots
R = FindRealRoots(@f, -1, 10, 100);

%# refine all roots thus found
for ii = 1:numel(R)
    R(ii) = fzero(@f, R(ii)); end 
```

# google-chrome - 如何将扩展升级到清单 v2 并保持向后兼容？

> ID：12525896
> 
> 赞同：0
> 
> 时间：2012-09-21T07:19:22.393
> 
> 标签：google-chrome, google-chrome-extension, version, manifest

我想将我的所有扩展升级到版本 2，但仍然向后兼容仍然安装旧版本 chrome 的人。

由于当前不支持多个清单版本，我想知道哪个是支持的最低版本的 Chrome`"manifest_version": 2`及其属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:17:22.610

清单 v2 是在[Chrome 18](http://developer.chrome.com/extensions/whats_new.html#18)中引入的。使用 Manifest 版本 2 为扩展添加了[几个要求](http://developer.chrome.com/trunk/extensions/manifestVersion.html#manifest-v1-changes)，最重要的是：

1.  默认[内容安全策略](https://developer.chrome.com/extensions/contentSecurityPolicy.html#restrictions)不允许通过扩展上下文中的标签加载外部 JavaScript 文件`<script>`，并且不允许执行通过字符串创建的 JavaScript 代码：内联事件侦听器、内联脚本`eval`等
    。损坏功能的后果是 JSONP和基于评估的模板引擎。这些可以通过使用普通的跨站 AJAX 和[沙盒](http://developer.chrome.com/extensions/manifest.html#sandbox) ^(Chrome 21+)来解决。
2.  该[`web_accessible_resources`](http://developer.chrome.com/extensions/manifest.html#web_accessible_resources)字段在一个空列表中启动，因此默认情况下所有资源都被列入黑名单。
3.  清单条目变得不可用（由+或`"background_page"`取代）。`"background"``"scripts"``"page"`

Manifest 2 还允许使用一些 API，[例如`chrome.storage`API](https://stackoverflow.com/questions/11427340/is-localstorage-synchronization-for-chrome-extensions-already-available/11428934#11428934)。当清单 v2 被省略时，[此消息](https://i.stack.imgur.com/JIbbk.png "'storage' 要求清单版本至少为 2")将出现在您的扩展程序下方。

除了最后一点之外，所有这些要求都导致 Chrome 扩展的编码指南更加严格（与 manifest v1 相比）。

1.  任何符合 CSP 的代码也适用于 manifest v1。
2.  所有扩展程序的来源都被列入白名单，因此普通网页可以访问。
3.  `"background": {"scripts": ["..."]}`(and `"page"`)与 Chrome 17 及更低**版本向后不兼容**，因为它是[在 Chrome 18 中引入的](http://developer.chrome.com/extensions/whats_new.html#18)。改为使用`"background_page": "background.html"`。

*仅*当您不使用后台页面时，才能使用适用于所有 Chrome 版本的扩展程序。在其他情况下，无法实现这种混合（清单 v1+v2 兼容）扩展。

如果您打算分发两个不同的扩展，`"minimum_chrome_version": "18"`请在清单文件中进行设置。不要忘记提及旧浏览器的扩展位置。

# spring-security - 使用自定义过滤器后持续记住我的身份验证

> ID：12525901
> 
> 赞同：0
> 
> 时间：2012-09-21T07:19:54.953
> 
> 标签：spring-security, remember-me

我在 Spring Roo 环境中使用 Spring-Security 3.1.RELEASE。我已经更改了登录机制，以便它可以与 JSON-Response 一起使用。为此，我创建了两个类（scala），即

```
class JsonSuccessHandler extends SimpleUrlAuthenticationSuccessHandler {
 override def onAuthenticationSuccess(request: HttpServletRequest, response: HttpServletResponse, authentication: Authentication) = {
  val responseWrapper = new HttpServletResponseWrapper(response);
  val out = responseWrapper.getWriter
  out.write("{success: true}")
  out.close
 }
}

@Repository class JsonEntryPoint extends AuthenticationEntryPoint {
 def commence(request: HttpServletRequest, response: HttpServletResponse, ae: AuthenticationException) = {
  response.sendError(HttpServletResponse.SC_UNAUTHORIZED, "Unauthorized")
 }
} 
```

application-security.xml 中的条目如下：

```
<http use-expressions="true" entry-point-ref="jsonAuthenticationEntryPoint">
  <custom-filter ref="myFilter" position="FORM_LOGIN_FILTER"/>
  <custom-filter ref="rememberMeFilter" position="REMEMBER_ME_FILTER"/>

  <logout logout-url="/resources/j_spring_security_logout"/>

  <intercept-url pattern="/backend/**" access="isAuthenticated()" />
  <intercept-url pattern="/resources/**" access="permitAll" />
  <intercept-url pattern="/admin/**" access="hasRole('ROLE_ADMIN')" />
  <intercept-url pattern="/**" access="permitAll" />
</http>

<beans:bean id="rememberMeFilter" class="org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter">
  <beans:property name="rememberMeServices" ref="rememberMeServices"/>
  <beans:property name="authenticationManager" ref="authenticationManager" />
</beans:bean>

<beans:bean id="rememberMeServices" class="org.springframework.security.web.authentication.rememberme.JdbcTokenBasedRememberMeServices">
  <beans:property name="userDetailsService" ref="userServiceDb"/>
  <beans:property name="tokenRepository" ref="tokenRepository"/>
  <beans:property name="key" value="reservation" />
</beans:bean>

<beans:bean id="tokenRepository" class="org.springframework.security.web.authentication.rememberme.JdbcTokenRepositoryImpl">
 <beans:property name="dataSource" ref="dataSource"/>
</beans:bean>

<beans:bean id="myFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
  <beans:property name="authenticationManager" ref="authenticationManager" />
  <beans:property name="authenticationSuccessHandler" ref="mySuccessHandler" />
  <beans:property name="rememberMeServices" ref="rememberMeServices" />
  <beans:property name="usernameParameter" value="email" />
  <beans:property name="passwordParameter" value="password" />
</beans:bean>
<beans:bean id="mySuccessHandler" class="JsonSuccessHandler"/>
<beans:bean id="jsonAuthenticationEntryPoint" class="JsonEntryPoint" /> 
```

身份验证工作正常，所以我可以成功登录，并且还记得我数据已成功存储到数据库中（表 persistent_logins）。但是当我重新启动服务器时，会话按预期删除，记住我的功能应该可以完成它的工作。不幸的是，它因以下日志数据而失败：

```
[INFO] Started Jetty Server
17:19:15.867 [qtp1943091306-38] DEBUG o.s.security.web.FilterChainProxy - / at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
17:19:15.875 [qtp1943091306-38] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - No HttpSession currently exists
17:19:15.875 [qtp1943091306-38] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - No SecurityContext was available from the HttpSession: null. A new one will be created.
17:19:15.877 [qtp1943091306-38] DEBUG o.s.security.web.FilterChainProxy - / at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter'
17:19:15.878 [qtp1943091306-38] DEBUG o.s.security.web.FilterChainProxy - / at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
17:19:15.878 [qtp1943091306-38] DEBUG o.s.security.web.FilterChainProxy - / at position 4 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
17:19:15.878 [qtp1943091306-38] DEBUG o.s.security.web.FilterChainProxy - / at position 5 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
17:19:15.879 [qtp1943091306-38] DEBUG o.s.security.web.FilterChainProxy - / at position 6 of 10 in additional filter chain; firing Filter: 'RememberMeAuthenticationFilter'
17:19:15.879 [qtp1943091306-38] DEBUG o.s.s.w.a.r.PersistentTokenBasedRememberMeServices - Remember-me cookie detected
17:19:15.895 [qtp1943091306-38] DEBUG o.s.jdbc.core.JdbcTemplate - Executing prepared SQL query
17:19:15.895 [qtp1943091306-38] DEBUG o.s.jdbc.core.JdbcTemplate - Executing prepared SQL statement [select username,series,token,last_used from persistent_logins where series = ?]
17:19:15.896 [qtp1943091306-38] DEBUG o.s.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
17:19:15.922 [qtp1943091306-38] DEBUG o.s.jdbc.datasource.DataSourceUtils - Returning JDBC Connection to DataSource
17:19:15.938 [qtp1943091306-38] DEBUG o.s.s.w.a.r.PersistentTokenBasedRememberMeServices - Refreshing persistent login token for user 'physio1@physio-termin.at', series 'oLmZMQbnFsfyTziANriMKw=='
17:19:15.939 [qtp1943091306-38] DEBUG o.s.jdbc.core.JdbcTemplate - Executing prepared SQL update
17:19:15.944 [qtp1943091306-38] DEBUG o.s.jdbc.core.JdbcTemplate - Executing prepared SQL statement [update persistent_logins set token = ?, last_used = ? where series = ?]
17:19:15.944 [qtp1943091306-38] DEBUG o.s.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
17:19:15.984 [qtp1943091306-38] DEBUG o.s.jdbc.core.JdbcTemplate - SQL update affected 1 rows
17:19:15.992 [qtp1943091306-38] DEBUG o.s.jdbc.datasource.DataSourceUtils - Returning JDBC Connection to DataSource
17:19:15.996 [qtp1943091306-38] DEBUG o.s.jdbc.core.JdbcTemplate - Executing prepared SQL query
17:19:15.996 [qtp1943091306-38] DEBUG o.s.jdbc.core.JdbcTemplate - Executing prepared SQL statement [select email username, password, isactive enabled from principal where email = ?]
17:19:15.996 [qtp1943091306-38] DEBUG o.s.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
17:19:16.001 [qtp1943091306-38] DEBUG o.s.jdbc.datasource.DataSourceUtils - Returning JDBC Connection to DataSource
17:19:16.013 [qtp1943091306-38] DEBUG o.s.jdbc.core.JdbcTemplate - Executing prepared SQL query
17:19:16.013 [qtp1943091306-38] DEBUG o.s.jdbc.core.JdbcTemplate - Executing prepared SQL statement [select p.email username, a.authority from principal p inner join principal_authority apa on p.id = apa.principal_id inner join authority a on a.id = apa.authorities_id where p.email = ?]
17:19:16.013 [qtp1943091306-38] DEBUG o.s.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
17:19:16.015 [qtp1943091306-38] DEBUG o.s.jdbc.datasource.DataSourceUtils - Returning JDBC Connection to DataSource
17:19:16.021 [qtp1943091306-38] DEBUG o.s.s.w.a.r.PersistentTokenBasedRememberMeServices - Remember-me cookie accepted
17:19:16.036 [qtp1943091306-38] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.springframework.context.annotation.internalScheduledAnnotationProcessor'
17:19:16.042 [qtp1943091306-38] DEBUG o.s.s.w.a.r.RememberMeAuthenticationFilter - SecurityContextHolder not populated with remember-me token, as AuthenticationManager rejected Authentication returned by RememberMeServices: 'org.springframework.security.authentication.RememberMeAuthenticationToken@2fb6ff6b: Principal: org.springframework.security.core.userdetails.User@d45302c2: Username: physio1@physio-termin.at; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_PHYSIOTHERAPEUT; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_PHYSIOTHERAPEUT'; invalidating remember-me token
org.springframework.security.authentication.ProviderNotFoundException: No AuthenticationProvider found for org.springframework.security.authentication.RememberMeAuthenticationToken
    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:196) ~[spring-security-core-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:102) ~[spring-security-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323) [spring-security-web-3.1.0.RELEASE.jar:3.1.0.RELEASE] 
```

我错过了什么？我不明白为什么会抛出 ProviderNotFoundException。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:44:12.760

您快完成了，身份验证工作正常，您忘记添加[`RememberMeAuthenticationProvider`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/RememberMeAuthenticationProvider.html). 如果您使用安全命名空间来创建 AuthenticationManager，只需`<authentication-provider>`在此处添加单独的：

```
<authentication-manager>
  <authentication-provider ref="yourRegularAuthenticationProvider" />
  <authentication-provider ref="rememberMeAuthenticationProvider" />
</authentication-manager>

<beans:bean id="rememberMeAuthenticationProvider" class="org.springframework.security.authentication.RememberMeAuthenticationProvider">
  <beans:property name="key" value="reservation" />
</beans:bean> 
```

# xml - 我们如何修改和访问参数的值？

> ID：12525911
> 
> 赞同：1
> 
> 时间：2012-09-21T07:20:30.900
> 
> 标签：xml, xslt

我有一个案例如下。我正在合并 2 个 xml 文件。我比较了两个文件中特定类型的节点，并检查它们的某些特定属性是否相同。如果该属性相同，则合并该节点，如果不合并，则复制文件一的节点。请看下面的逻辑

```
for-each(file1/nodes)
   boolean variable var set to false
   for-each (file2/nodes)
      when(some_condition)
      var = true
   /for-each
   if(var = false)
      do-something
/for-each 
```

我的问题是我无法设置和保留这个变量。由于我对 xslt 非常陌生，因此我需要帮助才能使用 xslt 完成此任务。

```
<xslt:for-each select="$file1_coverage/packages/package">
<xslt:variable name="file1_package_name" select="@name" />
<!-- I want to declare a boolean variable and set it false-->
<xslt:for-each select="$file2_coverage/packages/package">
    <xslt:variable name="file2_package_name" select="@name" />
    <xslt:choose>
        <xslt:when test="$file1_package_name=$file2_package_name">
            <!-- Set the boolean variable to true-->
            <package>
                <xslt:attribute name="branch-rate">
                    <xslt:value-of select="(($file1_package_branch_rate * $file1_package_branch_total) + ($file2_package_branch_rate * $file2_package_branch_total)) div ($file1_package_branch_total + $file2_package_branch_total)" />
                </xslt:attribute>
            </package>
        </xslt:when>
</xslt:for-each>
<xslt:when test="boolean Variable is false">                                
        <package>
            <xslt:copy-of select="$file1_package/@*" />
            <xslt:copy-of select="$file1_package/*" />
        </package>
</xslt:when>
</xslt:for-each> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:57:20.203

您不需要布尔变量。改为使用两个循环。在第一个中，您处理所有匹配的条目，在第二个中，条目不匹配。

```
<xslt:for-each select="$file1_coverage/packages/package">
    <xslt:variable name="file1_package_name" select="@name" />
    <!-- handle all matching entries -->
    <xslt:for-each select="$file2_coverage/packages/package">
            <xslt:variable name="file2_package_name" select="@name" />
        <xslt:choose>
                <xslt:when test="$file1_package_name=$file2_package_name">
                    <package>
                        <xslt:attribute name="branch-rate">
                                <xslt:value-of select="(($file1_package_branch_rate * $file1_package_branch_total) + ($file2_package_branch_rate * $file2_package_branch_total)) div    
                            ($file1_package_branch_total + $file2_package_branch_total)" />
                    </xslt:attribute>
                </package>
            </xslt:when>
        <xslt:choose>
    </xslt:for-each>
    <!-- … and now the not matching entries -->
    <xslt:for-each select="$file2_coverage/packages/package">
            <xslt:variable name="file2_package_name" select="@name" />
        <xslt:choose>
                <xslt:when test="not ($file1_package_name=$file2_package_name)">
                    <package>
                    <xslt:copy-of select="$file1_package/@*" />
                      <xslt:copy-of select="$file1_package/*" />
                </package>
            </xslt:when>
        <xslt:choose>
    </xslt:for-each>
</xslt:for-each> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:46:16.773

您`booleanVariable`在第一个之后超出范围`xsl:when`- 它的范围仅在`xsl:when`

**定义布尔变量的正确且有用的方法是**：

```
<xsl:variable name="vboolVar">
 <xsl:choose>
   <xsl:when test="some-condition">true</xsl:when>
   <xsl:otherwise></xsl:otherwise>
 </xsl:choose>
</xsl:variable> 
```

然后在其父元素范围内的任何位置使用此变量。

**当然，可以通过以下方式定义相同的**：

```
<xsl:variable name="vboolVar" select="some-condition"/> 
```

# asp.net-mvc-3 - 如何在 MVC3 中授权不同的登录 URL？

> ID：12525912
> 
> 赞同：1
> 
> 时间：2012-09-21T07:20:55.200
> 
> 标签：asp.net-mvc-3

大家好，我有两个登录名，但是如何使用 authorize 分配这些登录 URL？

这是我的网络配置：

```
 <location path="Home">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>  
  </location>

 <authentication mode="Forms">
      <forms loginUrl="~/Home/Login" timeout="2880" />
    </authentication> 
```

那么如何创建第二个 loginurl 呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T07:26:40.847

表单身份验证中不能有 2 个登录 url。如果您需要实现此功能，您可以编写自定义`[Authorize]`属性，然后覆盖[HandleUnauthorizedRequest](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.handleunauthorizedrequest%28v=vs.108%29.aspx)方法，您可以在其中重定向到相应的登录 url。

例如：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    private readonly string _controller;
    private readonly string _action;
    public MyAuthorizeAttribute(): this("account", "logon")
    {
    }

    public MyAuthorizeAttribute(string controller, string action)
    {
        _controller = controller;
        _action = action;
    }

    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        var values = new RouteValueDictionary(new
        {
            controller = _controller,
            action = _action,
            returnurl = filterContext.HttpContext.Request.Url.PathAndQuery
        });
        filterContext.Result = new RedirectToRouteResult(values);
    }
} 
```

进而：

```
public class SomeController
{
    [MyAuthorize]
    public ActionResult Foo()
    {
        return View();
    }

    [MyAuthorize("account", "someotherlogonaction")]
    public ActionResult Bar()
    {
        return View();
    }
} 
```

# objective-c - 旋转后平移手势行为不正确

> ID：12525922
> 
> 赞同：6
> 
> 时间：2012-09-21T07:21:24.583
> 
> 标签：objective-c, uigesturerecognizer, uipangesturerecognizer

我有与以下链接类似的问题

[为什么我在rotae之后使用“pan”会使视图相反？](https://stackoverflow.com/questions/11707001/why-i-use-pan-after-rotae-will-make-view-go-opposite-way)

但是，这个链接也没有解决我的问题。我对同一个 UIImage 使用平移、捏合和旋转手势。当我旋转该图像并执行平移时，它会随机平移（有时它与平移方向相反。我还将锚点设置为（0.5,0.5））。但是，如果我只使用平移（即在旋转之前），它将按预期表现良好。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T11:02:38.617

终于解决了这个问题......您只需要更改下面的代码 `CGPoint translation = [gesture translationInView:gesture.view];`以`CGPoint translation = [gesture translationInView:[gesture.view superview]];`呈现在 UIPanGestureRecognizer 方法中。

或点击以下链接 [http://cs354dory.wordpress.com/code-examples/pinch-pan-and-rotate/](http://cs354dory.wordpress.com/code-examples/pinch-pan-and-rotate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:48:50.923

我也解决了

只需将这两行代码放入旋转函数中即可。

```
gestureRecognizer.view.transform = CGAffineTransformRotate(gestureRecognizer.view.transform, gestureRecognizer.rotation);
gestureRecognizer.rotation = 0; 
```

# css - 位置中的Opera最大高度错误：绝对+溢出：自动元素？

> ID：12525927
> 
> 赞同：2
> 
> 时间：2012-09-21T07:21:49.903
> 
> 标签：css, overflow, opera, css-position, w3c

我最近在 Opera 中遇到了一个问题，当子元素具有更多内容但设置了 max-height 时，它尝试在 position:absolute+overflow:auto parent 上显示滚动条。

为了说明这个场景，查看这个演示：http: [//jsfiddle.net/kMZKm/12/](http://jsfiddle.net/kMZKm/12/)

将定位元素更改为具有固定高度，或将内部元素更改为使用`height:100%`而不是`max-height:100%`，都不会触发 Opera 中的滚动条。

其他浏览器，如 Chrome、Firefox 或 IE，在这两种情况下都不显示滚动条。

**我想知道这是否是 Opera 中的错误（出现在版本 11 和 12 中），或者只是 w3c 规范中未定义的场景？**

（overflow:auto parent with max-height children 似乎违反直觉，但该设置实际上对于 javascript 滚动等非常有用，Opera 的行为会导致报告子元素的意外高度，从而破坏自定义滚动）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T16:55:25.773

> 如果缩小，滚动条也会出现在其他浏览器中。[更改日志](http://www.opera.com/docs/changelogs/windows/1150b/)可能是原因：溢出中的空间导航：隐藏框不滚动

# javascript - 如何使用 express req 对象获取请求路径

> ID：12525928
> 
> 赞同：208
> 
> 时间：2012-09-21T07:21:52.120
> 
> 标签：javascript, node.js, express

我正在使用 express + node.js 并且我有一个 req 对象，浏览器中的请求是 /account 但是当我登录 req.path 时，我得到'/' --- 而不是'/account'。

```
 //auth required or redirect
  app.use('/account', function(req, res, next) {
    console.log(req.path);
    if ( !req.session.user ) {
      res.redirect('/login?ref='+req.path);
    } else {
      next();
    }
  }); 
```

req.path 是 / 什么时候应该是 /account ??

* * *

## 回答 #1

> 赞同：297
> 
> 时间：2012-09-21T08:51:04.213

在我自己玩了一下之后，你应该使用：

`console.log(req.originalUrl)`

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-05-19T11:17:33.537

在某些情况下，您应该使用：

```
req.path 
```

这将为您提供路径，而不是完整的请求 URL。例如，如果您只对用户请求的页面感兴趣，而不是 url 的各种参数：

```
/myurl.htm?allkinds&ofparameters=true 
```

req.path 会给你：

```
/myurl.html 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2019-05-30T15:12:18.013

作为补充，这里是一个从文档扩展的示例，它很好地包含了您在所有情况下使用 express 访问路径/URL 所需了解的所有内容：

```
app.use('/admin', function (req, res, next) { // GET 'http://www.example.com/admin/new?a=b'
  console.dir(req.originalUrl) // '/admin/new?a=b' (WARNING: beware query string)
  console.dir(req.baseUrl) // '/admin'
  console.dir(req.path) // '/new'
  console.dir(req.baseUrl + req.path) // '/admin/new' (full path without query string)
  next()
}) 
```

基于：[https ://expressjs.com/en/api.html#req.originalUrl](https://expressjs.com/en/api.html#req.originalUrl)

**结论：**正如[c1moore 的回答](https://stackoverflow.com/a/44788142/4465895)所说，使用：

```
var fullPath = req.baseUrl + req.path; 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-06-19T08:08:26.527

**8 年后更新：**

`req.path`已经在做我在这里提到[的完全相同的事情。](https://github.com/expressjs/express/blob/b400814d000613745673e39a6e1cd294a69a2677/lib/request.js#L416)我不记得这个答案如何解决问题并被接受为正确答案，但目前**它不是有效答案**。请忽略这个答案。感谢@mhodges 提到这一点。

**原答案：**

如果您想真正获得没有查询字符串的“路径”，您可以使用`url`库来解析并仅获取 url 的路径部分。

```
var url = require('url');

//auth required or redirect
app.use('/account', function(req, res, next) {
    var path = url.parse(req.url).pathname;
    if ( !req.session.user ) {
      res.redirect('/login?ref='+path);
    } else {
      next();
    }
}); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-04-22T01:38:12.480

它应该是：

`req.url`

表达 3.1.x

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-10-03T08:13:37.940

```
//auth required or redirect
app.use('/account', function(req, res, next) {
  console.log(req.path);
  if ( !req.session.user ) {
    res.redirect('/login?ref='+req.path);
  } else {
    next();
  }
}); 
```

> req.path 是 / 什么时候应该是 /account ??

原因是 Express 减去了您的处理程序函数的挂载路径，`'/account'`在这种情况下。

他们为什么这样做呢？

因为它更容易重用处理函数。您可以创建一个处理函数来执行不同的操作`req.path === '/'`，`req.path === '/goodbye'`例如：

```
function sendGreeting(req, res, next) {
  res.send(req.path == '/goodbye' ? 'Farewell!' : 'Hello there!')
} 
```

然后你可以将它挂载到多个端点：

```
app.use('/world', sendGreeting)
app.use('/aliens', sendGreeting) 
```

给予：

```
/world           ==>  Hello there!
/world/goodbye   ==>  Farewell!
/aliens          ==>  Hello there!
/aliens/goodbye  ==>  Farewell! 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2017-06-27T19:14:47.677

对于 4.x 版，您现在可以使用`req.baseUrl`除了`req.path`来获取完整路径。例如，OP 现在会执行以下操作：

```
//auth required or redirect
app.use('/account', function(req, res, next) {
  console.log(req.baseUrl + req.path);  // => /account

  if(!req.session.user) {
    res.redirect('/login?ref=' + encodeURIComponent(req.baseUrl + req.path));  // => /login?ref=%2Faccount
  } else {
    next();
  }
}); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-08-17T22:45:21.710

> req.route.path 为我工作

```
var pool = require('../db');

module.exports.get_plants = function(req, res) {
    // to run a query we can acquire a client from the pool,
    // run a query on the client, and then return the client to the pool
    pool.connect(function(err, client, done) {
        if (err) {
            return console.error('error fetching client from pool', err);
        }
        client.query('SELECT * FROM plants', function(err, result) {
            //call `done()` to release the client back to the pool
            done();
            if (err) {
                return console.error('error running query', err);
            }
            console.log('A call to route: %s', req.route.path + '\nRequest type: ' + req.method.toLowerCase());
            res.json(result);
        });
    });
}; 
```

执行后，我在控制台中看到以下内容，并且在我的浏览器中得到了完美的结果。

```
Express server listening on port 3000 in development mode
A call to route: /plants
Request type: get 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2021-10-20T14:15:03.710

### 1.直接从主文件（app.js / index.js）调用：

```
app.get('/admin/:foo/:bar/:baz', async (req, res) => {
    console.log(req.originalUrl);
    console.log(req.url);
    console.log(req.path);
    console.log(req.route.path);
    console.log(req.baseUrl);
    console.log(req.hostname);
    console.log(req.headers.host) // OR req.header('host'));
    console.log(req.protocol);

    res.sendStatus(200);
}); 
```

接口调用：

```
http://localhost:3000/admin/a/b/c 
```

输出

> `/admin/a/b/c` (originalUrl)
> `/admin/a/b/c` (url)
> `/admin/a/b/c` (path)
> `/admin/:foo/:bar/:baz` (route.path) (baseUrl)
> (
> `localhost` hostname)
> `localhost:3000` (headers.host (hostname with port number))
> `http` (protocol)

* * *

### 2.从模块调用：

应用程序.js

```
const express = require('express');
const app = express();

...

const users = require('./users');
app.use('/api/users', users); 
```

用户.js

```
const express = require('express');
const router = express.Router();

...

router.get('/admin/:foo/:bar/:baz', async (req, res) => {
    console.log(req.originalUrl);
    console.log(req.url);
    console.log(req.path);
    console.log(req.route.path);
    console.log(req.baseUrl);
    console.log(req.hostname);
    console.log(req.headers.host) // OR req.header('host'));
    console.log(req.protocol);

    res.sendStatus(200);
}); 
```

接口调用：

```
http://localhost:3000/admin/a/b/c 
```

输出

> `/api/users/admin/a/b/c` (originalUrl)
> `/admin/a/b/c` (url)
> `/admin/a/b/c` (path)
> `/admin/:foo/:bar/:baz` (route.path) (baseUrl)
> `/api/users` (
> `localhost` hostname)
> `localhost:3000` (headers.host (hostname with port number))
> `http` (protocol)

# maven - 非公共工件的 Maven 存储库托管？

> ID：12525929
> 
> 赞同：39
> 
> 时间：2012-09-21T07:21:53.830
> 
> 标签：maven, repository, hosting, nexus

是否有一些托管解决方案，无论是付费还是免费，为非公共工件提供明确的 Maven 存储库托管，最好是支持？

这些是我知道的替代方案：

*   使用凭据托管在您自己的公共服务器上
*   对于开源项目，有[免费的 sonatype 托管](http://www.sonatype.com/people/2009/11/a-year-of-providing-free-maven-repository-hosting/)
*   [在亚马逊](https://stackoverflow.com/questions/850570/maven-s3-wagon-provider)上托管
*   它可以托管[在 github](http://cemerick.com/2010/08/24/hosting-maven-repos-on-github/)、[google 代码](http://www.beeworks.be/hosting-maven-repository-google-code/)或其他一些 VCS 托管上

但是，所有这些都需要一些维护开销，而不仅仅是使用存储库管理器（不仅仅是使用 nexus）和/或不是真正完全受支持的解决方案，或者不适用于闭源项目。

如果我需要一个可以在互联网上获得但它是“私人”的解决方案，因为它应该仅供公司人员使用，是否还有其他替代方案？我在这里假设没有已经公开的服务器，因此拥有一个仅用于 maven 工件托管的新服务器似乎有点大。我有点惊讶我无法找到商业替代品。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-08-20T14:29:45.963

我是[mymavenrepo.com](https://mymavenrepo.com/)的开发人员- 这是非常简单的 maven 托管，非常适合个人使用和小公司

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T08:41:54.777

Jfrog 将其工件存储库管理器作为云服务提供。

就个人而言，一些默认配置选择（“修复”元数据等）完全是错误的，但您可以将其配置为做正确的事情。

（全面披露：jfrog 和 sonatype 都是 cloudbees（我的雇主）的合作伙伴）

编辑：他们提供[30 天的试用期](https://www.jfrog.com/artifactory/free-trial/#Cloud)，他们的定价可以在[这里](https://www.jfrog.com/artifactory/buy-now/#Cloud)看到。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-19T14:01:55.270

[JitPack](http://jitpack.io/private)是一种服务，可以轻松托管非公共（私有）Maven 工件。

它的工作方式是从源代码构建您的私有 Git 存储库并发布生成的工件。只有您和有权访问 Git 存储库本身的人才能访问这些工件，例如您公司中的人员。

您使用它的方式是添加存储库并将您的依赖项指向 Git Repo：

1.  添加存储库：

```
<repository>
    <id>jitpack.io</id>
    <url>https://jitpack.io</url>
</repository> 
```

2.  添加依赖

```
<dependency>
    <groupId>com.github.User</groupId>
    <artifactId>Repository</artifactId>
    <version>Tag</version>
</dependency> 
```

[文档](https://jitpack.io/docs/PRIVATE/)中的更多信息和身份验证。他们的定价可以在他们的[定价页面](https://jitpack.io/private#subscribe)上看到。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-29T17:28:41.010

我也一直在寻找这个并且遇到了这个链接[https://blog.openshift.com/nexus-repository-manager-in-the-cloud-for-free-with-openshift/](https://blog.openshift.com/nexus-repository-manager-in-the-cloud-for-free-with-openshift/)它解释了如何设置OpenShift 上的 Nexus 应用程序。我按照此页面中列出的步骤进行了操作，并且很快就启动并运行了它。您可以禁用“匿名”用户以删除公共访问并设置您自己的用户。它可以绑定到您拥有的 LDAP。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-14T07:07:42.933

似乎有一个名为[deps](https://www.deps.co)的服务即将在 2017 年开放。从他们的描述来看，这听起来像是我问题的答案，但我们必须看看结果如何。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-24T23:33:05.897

Nexus Repository 在云中没有商业产品，但任何包含运行 Java 应用程序功能的托管服务器都是合适的。周围有很多。像 CA 这样的其他合作伙伴会自动将其包含在他们为客户提供的堆栈中。

您需要管理的唯一开销是安装和运行 Nexus Repository。然而，这是微不足道的，可以在几分钟内完成。

根据您的使用情况，您甚至可以在无人需要时关闭的虚拟机上运行它。例如，一天 24 小时内 .. 如果您的开发和 CI 服务器只需要 12 小时 .. 其余时间关闭 VM。你也可以轻松地自动化这一切。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-09T10:32:48.740

这可能被认为是一种促销，但我们刚刚在 Deveo 发布了对在云中托管 Maven 存储库的支持。[除了发布博客文章](http://blog.deveo.com/whats-new-in-deveo-3-17/)之外，还没有其他可用信息。然而，定价应该比 jFrog 提供的更友好。

免责声明：我隶属于该公司。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-10-13T04:33:35.667

DropBox 是另一种可能的选择，请参阅[https://code.google.com/p/peter-lavalle/wiki/MavenOnDropBox](https://code.google.com/p/peter-lavalle/wiki/MavenOnDropBox)

# php - 警告：无法修改标头信息 - 标头已由

> ID：12525931
> 
> 赞同：-4
> 
> 时间：2012-09-21T07:21:58.303
> 
> 标签：php, html

> **可能重复：**
> [无法修改标头信息 - 标头已发送，为什么会发生标](https://stackoverflow.com/questions/1827314/cannot-modify-header-information-headers-already-sent-why-its-happening)
> [头已由 PHP 发送](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我网站上所有页面上的错误。

```
 Warning: Cannot modify header information - headers already sent by (output started at        
    /home/payaim/public_html/directyourmoney/common.htm:3) in /home/payaim/public_html/directyourmoney/common.htm on line 75

Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at /home/payaim/public_html/directyourmoney/common.htm:3) in /home/payaim/public_html/directyourmoney/common.htm on line 5228

Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /home/payaim/public_html/directyourmoney/common.htm:3) in /home/payaim/public_html/directyourmoney/common.htm on line 5228

Warning: Cannot modify header information - headers already sent by (output started at /home/payaim/public_html/directyourmoney/common.htm:3) in /home/payaim/public_html/directyourmoney/common.htm on line 5232

Warning: Cannot modify header information - headers already sent by (output started at /home/payaim/public_html/directyourmoney/common.htm:3) in /home/payaim/public_html/directyourmoney/common.htm on line 5272 
```

以上警告是在我网站上的所有页面上给出的。我删除了反映标题标签的空格和回声，我也搜索过，但一点运气都没有。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:55:57.173

The below could both cause the issue you are posting about...

```
<html>
<head>
<title>blah</title>
<body>
    <?php

            session_start();
        header("Location: http://www.google.com");
        exit();
    ?>
</body>
</html> 
```

or as Matei Mihai said

```
<?php
    $some_value = 'something';

    echo $some_value;

    session_start();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:23:47.977

如果您需要更具体的帮助，请给我们您的代码。

但是，这意味着您正在尝试修改标头（例如使用`header`函数或`setcookie`one` 之后您已经发送了一些 html 行。这是不允许的。

在您的情况下，您正在尝试启动一个新会话，并且此操作需要发送一个 cookie。这就是为什么在[文档](http://php.net/manual/en/function.session-start.php)中明确指出如果要开始新会话，则应`session_start`在页面顶部添加。

如果要修改标题，则必须在打印其他任何内容之前进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:24:37.920

`session_start()`任何 html 输出后都不能使用

这将起作用：

```
<?php
    session_start();
    $some_value = 'something';
?> 
```

这将**不起作用**：

```
<?php
    $some_value = 'something';

    echo $some_value;

    session_start();
?> 
```

# java - 系统架构 - Java 后端、数据库、移动应用

> ID：12525932
> 
> 赞同：2
> 
> 时间：2012-09-21T07:22:06.923
> 
> 标签：java, database, mobile, architecture

我正在用 Spring、Hibernate 和 RDBMS 构建 Java 后端有一段时间了。此外，我还经常为 iOS 和 Android 开发移动应用程序。

因此，我拥有一整套技术可用于这项任务，但我正在寻找更先进的技术，以更好地满足要求。我对此有一些想法，但我最好先解释一下我当前的系统是如何工作的，然后我希望我即将推出的系统是什么样子。

**目前使用**

*   Spring框架将所有东西连接在一起
*   使用实体 bean 休眠以实现持久性
*   MySQL 或其他作为 RDBMS
*   使用 Dozer 创建的 DTO 对象
*   用于公开服务的 RESTful API
*   DTO 以 JSON 格式传输

此设置有效。但我有一种感觉，就是工作量太大，使用其他技术可以让生活变得更简单。

**我在找什么**

在移动网站上，我想接收我可以轻松缓存的当前屏幕的数据。JSON 是已经序列化的东西，可以很容易地在移动应用程序中保存到磁盘，而无需使用另一个数据库。那么问题来了，我怎样才能将数据存储在后端，以便我可以更轻松地接收它，而不使用实体 bean、DTO 和 Dozer 在它们之间进行转换？难道没有另一个已经提供 JSON 的数据库解决方案吗？例如，像 OrientDB 或 Neo4J 这样的图形数据库呢？

我绝对想使用 Java 和 Spring，并且我愿意替代 Hibernate、RDBMS 和实体 bean 和 DTO。

期待您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:22:32.677

1.  您当前的设计（*此设置有效*）具有良好系统应具备的细节。**分层**和良好**的关注点分离**。
2.  如果我正确理解您的要求，那么您的论点是，如果我的最终数据格式是 JSON，那么为什么不以 JSON 格式存储数据，这将使您摆脱中间层的大量管道代码/工作。
3.  它将直接使您能够从存储中获取数据并将其传递给请求的客户端。简而言之，这些就是您的要求。如果我错了，请纠正我。
4.  现在 JSON 更多的是文本符号，而不是存储格式。Jason 通常被 MVC 架构的 View 层使用，因为它很容易使用 Javascript 在屏幕上呈现。
5.  鉴于终端客户端将是移动应用程序，您使用直接提供 JSON 的 NoSQL DB 的推理是可信的。
6.  整体架构看起来不错，并且针对移动访问进行了高度优化。
7.  现在出现在 NoSQL JSON 存储上，以下是支持 JSON 接口的 Document Store NoSQL DB

    一世。[沙发数据库](http://couchdb.apache.org/)

    ii. [JasDB](http://www.oberasoftware.com/)

    iii. [架构自由数据库](http://schemafreedb.com/)

8.您可以评估其中任何一个以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:53:56.523

*（完全披露——我是一名 BaaS 提供商 Kinvey 的工程师）*

您可能会考虑的一种选择是使用后端即服务。大多数 BaaS 提供商都使用 JSON 通过网络传输数据，这听起来很符合您的要求。

此外，您通常会获得很多常用的移动应用程序功能（即推送通知、文件存储和 CDN 基础设施、用户管理等）。如果您正在构建多个应用程序，每个应用程序都有自己的后端，这可能特别有用；而不是每次都重新发明轮子，只需启动一个新的后端。

最后但重要的一点是定价。很大程度上取决于您的用例，但据我所知，BaaS 提供商通常比在 AWS 或其他云提供商上推出自己的解决方案便宜得多，尤其是因为大多数提供商都提供免费套餐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-20T11:36:25.030

尽管这个问题有点老了，但也许是 RDBMS 的一个快速替代方案：MongoDB。它是一个文档级锁定的文档数据库。它的扩展性*非常好*。

要点：**它使用 JSON 作为其文档存储**（实际上是二进制 JSON 又名 BSON，但这只是一个超集）。将文档插入数据库就像

```
db.collection.insert(JSON); 
```

在 mongo shell 和

```
DBObject bson = (DBObject) JSON.parse(JSONstr);
collection.insert(bson); 
```

在java驱动程序中。

# java - 运行 servlet 时出错（apache tomcat 找不到 .properties 文件）

> ID：12525936
> 
> 赞同：0
> 
> 时间：2012-09-21T07:22:40.207
> 
> 标签：java, tomcat, servlets, web.xml, eclipse-indigo

任何其他 servlet 在 eclipse-apache/tomcat 集成上运行良好。但是当我在其中一个类中添加一个属性文件时，我得到了这个错误-

HTTP 状态 500 - 类型异常报告

消息描述：服务器遇到内部错误 () 阻止它完成此请求。

例外

> java.io.FileNotFoundException: xyz.properties(系统找不到指定的文件) java.io.FileInputStream.open(Native Method) java.io.FileInputStream.(Unknown Source) java.io.FileInputStream.(Unknown Source) xyz .DatabaseConnection(DatabaseAccess.java:23) xyz.HelloServlet.doGet(HelloServlet.java:22) javax.servlet.http.HttpServlet.service(HttpServlet.java:621) javax.servlet.http.HttpServlet.service(HttpServlet.java :722)

我是否必须在 web.xml 文件中进行某种修改以让它知道 xyz.properties 文件存在的位置？

PS - 文件和包名称已被“xyz”审查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-02T15:03:39.827

您不需要编辑 web.xml。

```
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
Properties properties = new Properties();
properties.load(classLoader.getResourceAsStream("xyz.properties")); 
```

这假定 xyz.properties 文件位于 classes 文件夹中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T07:58:10.187

I think the property file is not in the classpath. Please try putting the properties file `WEIB-INF/classes` folder and see if this resolves this issue.

# java - (Array|Linked)BlockingQueue 的 `offer` 性能不错，但为什么 `take` 太慢了？

> ID：12525937
> 
> 赞同：2
> 
> 时间：2012-09-21T07:22:45.253
> 
> 标签：java, clojure

我有一个 Clojure 网络应用程序，基本结构是这样的：

*   服务器有一个 LinkedBlockingQueue 或 ArrayBlockingQueue（我都试过了）
*   多个线程接受网络连接，并`offer`工作到队列
*   队列中的一个线程`take`在无限循环中处理所取的每个项目

我注意到`take`调用的严重性能问题：

*   线程`offer`以非常快的速度进入队列，队列很快将它们全部带走
*   队列中的一个工作线程`take`以非常慢的速度（比速度慢 200 多倍`offer`）
*   CPU 使用率非常低 - 所以工作人员根本不忙

在不使用队列的情况下，在基准测试情况下，相同的工作负载能够最大化 CPU 使用率并以令人满意的速度完成。

那么在这种情况下使用的最佳排队技术是什么？

这是我的代码（少于 100 行）；

[https://github.com/HouzuoGuo/Aurinko/blob/master/src/Aurinko/core.clj](https://github.com/HouzuoGuo/Aurinko/blob/master/src/Aurinko/core.clj)

编辑，我的观察细节：

*   我对请求处理速度进行了基准测试，它在不使用队列的情况下每秒处理大约 8,000 个请求。
*   我让服务器程序在排队请求时打印一条调试消息，并在完成处理请求时打印另一条消息。
*   我制作了一个简单的客户端程序，每秒向服务器发送大约 1,000 个请求。
*   服务器及时将所有请求排队，队列变成数千个元素。
*   根据调试消息，Worker（请求处理器）似乎每秒仅处理大约 150 个请求。

编辑：

感谢大家的帮助。我已经确认阻塞队列不是导致性能问题的原因。虽然我没有发现我的应用程序中的性能瓶颈，但一定有一个地方。

最终编辑：

谢谢大家。性能瓶颈是由网络 IO 而不是阻塞队列引起的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:33:53.410

您所看到的最可能的解释是队列为空导致`take()`等待。如果队列不为空，它可能会非常快。

我假设在 clojure 中的性能类似于 Java 中的性能。

```
public static void main(String... args) throws InterruptedException {
    int runs = 20000;
    BlockingQueue<Integer> queue = new ArrayBlockingQueue<Integer>(runs + 1);
    BlockingQueue<Integer> queue2 = new LinkedBlockingQueue<Integer>(runs + 1);
    for (int i = 0; i < 10; i++) {
        testQueue(runs, queue);
        testTake(runs, queue);
        testQueue(runs, queue2);
        testTake(runs, queue2);
    }
}

private static void testQueue(int runs, BlockingQueue<Integer> queue) {
    long start = System.nanoTime();
    for (int i = 0; i < runs; i++)
        queue.offer(1);
    long time = System.nanoTime() - start;
    System.out.printf(queue.getClass().getSimpleName() + ": Average time to offer was %,d ns%n", time / runs);
}

private static void testTake(int runs, BlockingQueue<Integer> queue) throws InterruptedException {
    long start = System.nanoTime();
    for (int i = 0; i < runs; i++)
        queue.take();
    long time = System.nanoTime() - start;
    System.out.printf(queue.getClass().getSimpleName() + ": Average time to take was %,d ns%n", time / runs);
} 
```

最后打印

```
ArrayBlockingQueue: Average time to offer was 34 ns
ArrayBlockingQueue: Average time to take was 39 ns
LinkedBlockingQueue: Average time to offer was 78 ns
LinkedBlockingQueue: Average time to take was 54 ns 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T12:42:07.423

您声明：“CPU 使用率非常低 - 所以工作人员根本不忙”。您还说：“我已经确认阻塞队列不是导致性能问题的原因。虽然我没有发现我的应用程序中的性能瓶颈，但一定有一个地方存在。”

如果这两个陈述都是正确的，则可能是您的工作线程花费大量时间等待 I/O。如果是这样，有一个简单的解决方案：运行多个工作线程！

或者可能存在*其他*一些并发瓶颈（不是工作队列）。

你为什么不做以下事情：制作一个小测试程序，将大约 1,000 个项目推送到工作队列中，然后开始运行在工作线程上运行的相同代码。当队列为空时，它应该退出。分析该程序。（你的开发机器上设置了分析器吗？我喜欢使用 JIP。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:28:54.853

你确定 LinkedBlocingQueue 和 ArrayBlockingQueue 的结果是一样的吗？基于这两种数据结构的不同，从队列中提供和获取元素的效率是不同的。

# python - 如何在 CentOS 中将命令从计算机发送到另一台计算机？

> ID：12525940
> 
> 赞同：0
> 
> 时间：2012-09-21T07:22:52.570
> 
> 标签：python, centos

我需要将命令从一台计算机发送到另一台计算机（均在 CentOS 中运行）。它必须是自动化的，所以我需要编写一个脚本或程序来做到这一点。

例如，计算机 A 会将这个命令发送到计算机 B

> python insertDB.py

当 COMPUTER B 接收到这个，它需要自动运行 COMPUTER A 发送的命令。

我该怎么做？是否有可能以非常简单的方式在 python 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:27:56.387

像这样的东西？[RPyC：透明、对称的分布式计算](https://rpyc.readthedocs.io/en/latest/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:55:56.690

您也可以尝试[pexpect](http://sourceforge.net/projects/pexpect/)。虽然 rpyc 可能是一个更好的选择。

# drawing - 有没有办法比较两张手绘图？

> ID：12525941
> 
> 赞同：0
> 
> 时间：2012-09-21T07:22:53.767
> 
> 标签：drawing, compare, html5-canvas

对于一个实验，我们正在寻找一种方法来自动比较两张手（鼠标）绘制的图像。例如，这些图片是在 HTML5 画布元素上绘制的，我们需要一些方法来查看图片是否大致匹配。

所以，如果有人画了一栋房子，我们需要测试第二张图是否看起来像第一张房子。图像中究竟是什么并不重要，但我们只需要知道这两个图像是否相似。即，我们想知道绘制图片的人是否可以重绘大致相同的图片。线条的确切方向、图像的大小或图片在画布上的位置都无关紧要。

有没有一个图书馆或项目可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:27:32.320

是的，一点没错

> 使用Face.com 和 imagemagick 提供 [的](http://www.imagemagick.org/api/compare.php)[API](http://faceapi.com)

它可能对您的要求有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:03:05.210

最终，我们没有找到完全相同的库，因此我们修改了原始项目的目标，并将需要进行的比较众包。

您可能暂时也可以使用[Mechanical Turk](https://www.mturk.com/mturk/welcome)或类似的东西，具体取决于您希望为此支付多少费用。

我认为研究人员目前正在研究上述问题的技术解决方案。

# vba - 如何在excel中检测粘贴事件

> ID：12525942
> 
> 赞同：7
> 
> 时间：2012-09-21T07:22:54.207
> 
> 标签：vba, excel

我需要检测excel的粘贴命令。当用户单击鼠标左键单击弹出的菜单上的粘贴时，是否有任何解决方法可以告诉我们。如果用户单击粘贴菜单项，这需要我执行一个过程。任何帮助，将不胜感激。

问候， 阿米特

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-02-17T17:03:17.097

从 Excel VBA 借用[如何检测是否将某些内容粘贴到 Worksheet](https://stackoverflow.com/q/27818152/1366033)中。该`Workbook_SheetChange`事件将针对页面上的任何更改事件触发，包括粘贴。

在此事件中，您可以通过查看撤消列表历史记录中的最新条目来检查最后一次更改是否是粘贴：

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
  Dim lastAction As String

  ' Get the last action performed by user
  lastAction = Application.CommandBars("Standard").Controls("&Undo").List(1)

  ' Check if the last action was a paste
  If Left(lastAction, 5) = "Paste" Then

    ' Do Stuff Here

  End If
End Sub 
```

# javascript - 检查时如何通过其标签名称获取单选按钮名称和ID？

> ID：12525950
> 
> 赞同：1
> 
> 时间：2012-09-21T07:23:50.590
> 
> 标签：javascript

我的代码在这里我计算所有单选按钮和选中单选按钮，

```
var selection=new Array(); 
 var allR = document.getElementsByTagName('input');
  var a=0;
  var b=0;
    for(var i=0; i<allR.length; i++){ 
        if(allR[i].type=='radio') { b++; }      
        if(allR[i].type=='radio' && allR[i].checked) { a++; } 
    } 
```

如何通过标签名称获取单选按钮名称及其 id ???

希望得到你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:27:06.507

因此，当您将元素集合存储在 allR 中时，您可以通过 getAttribute 方法获取 id 和名称，因为 id 和名称只是通常的属性

```
element.getAttribute('id') element.getAttribute('name') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:28:06.203

像这样使用它

```
<script>
var rad = document.getElementbyId('rad_id').value;
</script>
<input type="radio" id="rad_id" value="my value"> 
```

它的结果将是

```
`my value` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:28:27.530

试着放

```
alert(allR[i].getAttribute('id') + ', ' + allR[i].getAttribute('name')); 
```

循环内

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T07:29:24.523

使用它来获取名称：`allR[i].name`. 您可以通过类似的方式获取 ID：`allR[i].id`.

# php - Mongodb php认证。Mongo/admin.php 在哪里？

> ID：12525952
> 
> 赞同：0
> 
> 时间：2012-09-21T07:23:53.920
> 
> 标签：php, mongodb, authentication

I.
我是 mongodb 的新手，看起来很酷。

出于安全原因，我将 mongod 配置为使用`auth = true`.

现在，根据[http://www.mongodb.org/pages/viewpage.action?pageId=589836](http://www.mongodb.org/pages/viewpage.action?pageId=589836)，身份验证§，

> 要访问管理功能，您必须使用 MongoAuth（登录到特定数据库）或 MongoAdmin（对所有数据库的 root 访问权限）。这些不包含在内置 PHP 扩展中，因此您必须包含或需要文件 Admin.php 和 Auth.php。它们位于 php/Mongo/ 下的下载源代码中。假设您的包含路径上有 php/，您可以说：
> 
> ```
> include "Mongo/Admin.php";
> ... 
> ```

我在 /var/share/php、/var/share/php/PEAR 中搜索过，没有找到 Admin 和 Auth.php...

1.  这些文件是否包含在常见的 PEAR 安装中？（假设一个常见的安装是`sudo pecl install mongo`）
2.  如果没有，如何安装它们？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:04:53.440

我认为您对身份验证感到困惑。

默认情况下，无论有没有这些添加的类，Mongo 都会以经过身份验证的用户身份登录。

您引用的类是管理类和服务器控制类。它们有效地提供对所有内容的 root 访问权限。

只需将用户名和密码添加到您的 MongoDB 连接字符串以进行身份​​验证就足够了，您不需要这些类。一个例子：

```
mongodb://root:awesome_password@localhost:27017 
```

这将在 PHP 驱动程序中启动默认身份验证。

# iphone - IOS 5 内置的用于 JSON 解析的 API 是否可以在低版本手机上使用？

> ID：12525953
> 
> 赞同：0
> 
> 时间：2012-09-21T07:24:03.123
> 
> 标签：iphone, ios, xcode, json, parsing

IOS 5 有一些新的内置 API 使得 JSON 的读写变得非常容易。如果我正在使用这些 API 构建应用程序，它是否可以在具有较低版本 IOS 的设备上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:36:40.833

不，因为它不可用。仅限 iOS 5 的类和方法仅适用于 iOS 5 及更高版本。

在它的文档中[`NSJSONSerialization`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)指出它的可用性为“在 iOS 5.0 及更高版本中可用”。

您可以随时检查课程是否可用，例如：

```
if ([NSJSONSerialization class]) {
   // Yes the class is available.
} 
```

# backbone.js - Backbone Marionette 和 jQuery 插件 (jCarousel)

> ID：12525954
> 
> 赞同：0
> 
> 时间：2012-09-21T07:24:04.623
> 
> 标签：backbone.js, jcarousel

我坚持在 Backbone Marionette 应用程序中设置 jCarousel jquery 插件。使用纯主干，我找到了使用 onShow 函数的解决方案。但这在 Marionette 中不起作用这是 Marionette 的代码：

```
 $(document).ready(function(){

                MyApp = new Backbone.Marionette.Application();

                MyApp.addRegions({
                   TagsRegion: "#mycarousel"
                });

                MyApp.Tag = Backbone.Model.extend({
                });

                MyApp.TagCollection = Backbone.Collection.extend({
                    model: MyApp.Tag,
                    url: 'json/photos.json'
                });
                MyApp.TagItemView = Backbone.Marionette.ItemView.extend({
                    template: "#tag-template",
                    tagName: 'li'
                });

                MyApp.TagCollectionView = Backbone.Marionette.CollectionView.extend({
                    itemView: MyApp.TagItemView,
                    tagName: 'ul'
                });

                MyApp.addInitializer(function(options){
                    var tagCollection = new MyApp.TagCollection();
                    var tagCollectionView = new MyApp.TagCollectionView({
                        collection: tagCollection
                    });

                    tagCollection.fetch();
                    MyApp.TagsRegion.show(tagCollectionView);
                });

        MyApp.start();

        });//END jQUERY

    </script> 
```

然后我试图找到一个解决方案如何在插件中构建......

```
 var PluginView = Backbone.View.extend({
          el:$('#mycarousel'),
          onShow: function(){
           this.$el.jcarousel({
                scroll: 1,
                auto: 13,
                wrap: "circular",
                size: 5,  
         initCallback: function mycarousel_initCallback(carousel) {
             $('.jcarousel-control a').bind('click', function () {
             carousel.scroll($.jcarousel.intval($(this).text()));
                 return false; 
          });
         },
         itemVisibleInCallback: {
             onAfterAnimation: function (c, o, i, s) {
                 i = (i - 1) % $('#mycarousel li').size();
                 $('.jcarousel-control a').removeClass('active').addClass('inactive');
                 $('.jcarousel-control a:eq(' + i + ')').removeClass('inactive').addClass('active');
             }
         }

      }); //jcarousel end
   } //onShow function end

}); //PluginView End

    var plug_view = new PluginView();
     plug_view.render();

     if (plug_view.onShow){
       plug_view.onShow();
     }; 
```

问题是轮播基于 UL，带有一堆 li-tags，插件和 marionette 同时生成自己的 li-tags。因此，a 有空的 carousel-li-tags 和 marionette-generated-li-tags，其中包含要在 carousel-li-tags 中使用的所有图像和其他内容。

如果有人帮助找到这种情况的任何解决方案以及一般的木偶中的 jquery-plugins，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:01:18.313

如果您使用 Marionette ItemView，则会在视图呈现到 DOM 后触发 onShow 方法。然后你会：

```
MyApp.TagsRegion.show(ItemViewGoesHere); 
```

这将呈现您的项目视图，一旦内容呈现到 DOM，您的 onShow 方法将被调用，您可以将 jQuery 插件呈现到视图中的元素。

# jquery-ui - 没有任何作用！jquery冲突magento

> ID：12525958
> 
> 赞同：2
> 
> 时间：2012-09-21T07:24:27.933
> 
> 标签：jquery-ui, magento

我正在尝试在我的主页上使用基于 jquery UI 的转换滑块。我尝试了不同的 jquery 插件，但我总是在控制台中收到错误：jQuery is not a function 或一些与 jQuery 相关的函数错误。我尝试过的插件有 Lof JSliderNews 1.0、featured-content-slider 等。

即使在网络上关注了几篇文章之后，我也无法使插件工作。Jquery 部分不起作用。我在 jquery.noConflict 中使用了轮播和其他插件，但这次没有任何效果！

这就是我正在做的事情：

```
jQuery.noConflict();

jQuery(document).ready(function(){
    jQuery("#featured > ul").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 5000, true);
}); 
```

我还尝试在包含的脚本中用 jQuery 替换所有 $ ，但这在 magento 中也不起作用。请帮忙，我需要尽快完成这个项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:30:58.683

您是否尝试过将所有 jQuery 内容放入函数并将`window.jQuery`变量映射为参数？像这样：

```
(function($){
  //... do your jQuery thing here
})(jQuery); 
```

**顺便说一句**：“jQuery 不是函数”也可能暗示您忘记将 jQuery 库加载到您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:41:45.070

您是否启用了“JS文件合并”？如果是，请尝试禁用它，清除缓存并重试。当我遇到一个类似的问题时，它曾经帮助过我。

问候

# android - 类属性如何作用于片段和常规视图？

> ID：12525960
> 
> 赞同：0
> 
> 时间：2012-09-21T07:24:33.973
> 
> 标签：android, android-fragments, android-view

为什么`fragment`有属性`class`而an`ImageView`没有？为什么我们需要这个`class`属性？例如，考虑：

```
<fragment class="com.expample.testfragment.Title"
      android:id="@+id/title"
      android:layout_weight="1"
      android:layout_width="0dp"
      android:layout_height="match_parent"
/> 
```

并且：

```
<ImageView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Img1"  
    android:layout_width="150dp" 
    android:layout_height="150dp"
    android:scaleType="fitXY" 
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:17:16.720

> 为什么 Fragment 具有属性 class=""

您需要它来指定在布局中代表该片段的类的路径（以`fragment`声明类的包的形式和类的实际名称`fragment`）（以便系统可以为您实例化它，构建 UI 等）。

> 但 ImageView 没有？

您可以为`ImageView`（或其他视图）设置类属性，但它将被忽略，拥有它没有任何意义，系统知道在哪里可以找到视图。

该`class`属性可用于在布局中声明自定义视图，如下所示：

```
<view class="package.here.to.custom.view.CustomView" <!-- other attributes --> /> 
```

如果您将自定义视图声明为另一个类中的嵌套类，这将很有用。

# c++ - 如何在box2d中进行碰撞连接

> ID：12525962
> 
> 赞同：0
> 
> 时间：2012-09-21T07:24:43.553
> 
> 标签：c++, ios, box2d, collision

我在联系侦听器的 BeginContact 函数中检测到碰撞..

```
void MagneteListener::BeginContact(b2Contact* contact)
{
// I detect 2 needed bodies.
... 
b2RevoluteJointDef revDef;
revDef.lowerAngle = 0.0;
revDef.upperAngle = 0.0;
revDef.enableLimit = true;
revDef.collideConnected = false;
revDef.Initialize(body1, body2, body1->GetWorldCenter());
_world->CreateJoint(&revDef);
// End create joint
} 
```

结果程序因错误而崩溃

断言失败：(IsLocked() == false)，函数 CreateJoint，

如果我在下一个世界步骤之前碰撞后与这两个物体创建关节，它会很好。

```
_world->Step(dt, velocityIterations, positionIterations); 
```

那么问题是有什么办法可以在碰撞时联合海峡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:19:31.173

您应该将创建关节所需的信息存储在程序中的某个位置，并在`b2World::update`函数返回时使用它

# c++ - 使用 OpenGL 版本 3+ 来渲染文本/UI

> ID：12525968
> 
> 赞同：1
> 
> 时间：2012-09-21T07:25:04.190
> 
> 标签：c++, opengl

我正在寻找一个使用 OpenGL 3+ 来呈现文本/UI 控件的库。是否有任何示例/免费库（最好是 LGPL、MIT 等）来演示如何做到这一点。

我不喜欢使用 GLUT，最后我检查了一下，FTGL 没有使用 OpenGL 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:58:50.530

我不确定[SFML](http://www.sfml-dev.org)是否使用 OpenGL 3+ 来渲染文本，但我知道使用它比 GLUT 更有价值。它可以使用类将文本输出到窗口上`sf::Text`。查看 2.0 版本的文档。此外，许可证声明可以“按原样”免费使用，只是为了感谢作者。最重要的是它是便携的。

还有一个[CEGUI](http://www.sfml-dev.org/wiki/en/tutorials/cegui)库与 SFML 结合创建 GUI 元素的教程。它可能已经足够好了，不幸的是我没有尝试过。

# android - 缺少 AndroidManifest.xml

> ID：12525969
> 
> 赞同：61
> 
> 时间：2012-09-21T07:25:05.090
> 
> 标签：android, eclipse

我在 Eclipse 中创建了一个 android 应用程序项目，每当我尝试运行该应用程序时，它都会抛出一条错误消息，提示`AndroidManifest.xml`文件丢失。这是什么原因？

我正在使用带有 android-sdk 的 eclipse，ADT 版本是 20。在 SDK 管理器中，我只安装了 android 2.2 API 级别。这是那个错误的问题吗？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-03-30T13:12:47.163

删除`bin`项目中的文件夹和您的库依赖项。然后重新运行应用程序。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-09-21T07:34:06.840

您应该清理并刷新您的项目一次。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-10T08:55:12.557

我可以通过手动删除 bin 目录以及 gen 目录，右键单击项目并选择 Android Tools->Fix Project Properties，然后使用 Project->Build All 来解决此问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-28T19:35:45.030

重新启动您的 Eclipse 并确保自动检查构建。它一直对我有用。希望这对某人有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-09T15:19:04.550

我关闭了所有与我尝试运行的项目无关的项目（在项目资源管理器中右键单击项目，然后选择关闭项目），问题神奇地消失了（没有明显的原因）。然后，即使我重新打开关闭的项目，问题也没有出现。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-09T11:58:10.010

我将AndroidManifest.xml放在appcomatv7中并粘贴到项目中并解决了问题

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-19T08:41:38.737

单击项目 -> 刷新 (F5) -> 转到菜单栏中的“项目” -> 清理。这个对我有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-03T20:05:35.387

我遇到了同样的问题，但不明白为什么 - 删除了 /bin、/gen、修复 AVD 等的所有内容，但仍然无济于事。

/bin 让我想到了——

我以前曾使用[此](https://stackoverflow.com/questions/443169/exclude-folders-from-eclipse-search/443220#443220)建议将 /bin 从资源过滤器中排除（以从搜索中删除结果）....

我删除了 /bin 的过滤器，瞧......

有趣的是，这只在我想在 Eclipse 中调试或运行时才影响到我——我可以毫无问题地导出一个工作的 APK，但调试失败了。

希望这可以帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-05T12:31:42.513

更新后我在android studio中遇到了问题，它通过Tools -> Android ->sync with gradle file工作

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-09T23:11:11.310

（什么对我有用）

1 - 复制文件`build.gradle` 2 - 将复制的文件放到 android 文件夹 [example MyApp/android]

# c - 可移植的 32 位整数编码以与 8 位设备通信

> ID：12525973
> 
> 赞同：1
> 
> 时间：2012-09-21T07:25:40.493
> 
> 标签：c, encoding, portability, 8-bit

我需要与没有 nthol 功能的 8 位设备通信。也不可能使用协议缓冲区库。

无论运行什么架构（不同的字节序，不同的位数），以下 C 函数都会产生相同的输出字符串：

```
void encode(uint32_t input, unsigned char* buf, int buf_len) {
  assert(sizeof(uint32_t) <= buf_len);
  buf[0] = input >> 24 & 0xFF;
  buf[1] = input >> 16 & 0xFF;
  buf[2] = input >> 8 & 0xFF;
  buf[3] = input & 0xFF;
} 
```

以下函数将正确读取此类编码字符串并在所有架构上产生相同的结果：

```
void decode(const unsigned char* buf, int buf_len, uint32_t* output) {
  assert(sizeof(uint32_t) <= buf_len);
  *output = buf[0];
  *output <<= 8;
  *output |= buf[1];
  *output <<= 8;
  *output |= buf[2];
  *output <<= 8;
  *output |= buf[3];
} 
```

是否有可能在 8 位处理器上 32 位整数由于某种原因无法正确处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:29:19.363

是的，它会起作用。无论机器具有哪种字节序或字长，C 移位运算符都会做正确的事情。

只需记住在与此协议通信的所有程序中执行完全相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:42:29.433

是的，看起来不错。一些评论：

1.  当代码依赖于这一事实时，您应该使用`uint8_t`而不是假设`unsigned char`是 8 位。
2.  使用局部变量进行接收会更简洁（imo），因此您不必一直通过指针切换`output`。
3.  您可能只返回解码后的值，使`decode()`函数更简洁。

-

```
 uint32_t decode(const uint8_t *buf, size_t buf_len) {
   uint32_t out = 0;
   assert(sizeof out <= buf_len);
   out |= buf[0];
   out <<= 8;
   out |= buf[1];
   out <<= 8;
   out |= buf[2];
   out <<= 8;
   out |= buf[3];
   return out;
 } 
```

# testing - 录制脚本 - 由于单一协议而导致“找不到页面”？

> ID：12525978
> 
> 赞同：0
> 
> 时间：2012-09-21T07:25:56.127
> 
> 标签：testing, loadrunner

我发现了一个我不完全理解的奇怪问题。当我只使用一个协议运行 LoadRunner 时，浏览器（开始录制时）会运行，但会显示“找不到页面”（好像没有设置代理一样）。怎么来的？协议指定将捕获哪些流量，但我假设只是不记录未指定的流量。但是为什么浏览器在单一协议中找不到页面，而在多个协议中却可以呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:58:52.780

我发现单协议模式（我假设这里是网络）有些不稳定，并且不能一直工作。解决方法是使用多协议模式，但只选择 Web (HTTP/HTML)。这工作得更好。

造成这种情况的实际原因尚不清楚，但至少试一试！

至于其他问题：

当您调用 IE 进行录制时，请检查您的代理设置是否正确。您的问题听起来有点像代理问题，但如果上述方法均无效，请发布更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:01:54.063

超过 90% 的记录问题可以跟踪到环境项目，特别是您是否在 LR 版本和浏览器版本/制造商之间进行了正确匹配，以及您**是否**使用正确的凭据登录，**以及**您是否加载了任何冲突的软件包，例如防病毒软件，这可能会影响录制机制。

从哪儿开始？

1.  确保您使用管理凭据登录
2.  禁用本地运行的任何防病毒软件
3.  根据您的 LoadRunner 版本的要求验证您的浏览器制造商和版本

# sql - MSSql (Compact) DELETE-Query with JOIN

> ID：12525979
> 
> 赞同：5
> 
> 时间：2012-09-21T07:26:07.930
> 
> 标签：sql, left-join, sql-server-ce, sql-delete

我有这个查询。我想从 AgentsResultLinks-Table 中删除所有没有指向 Results-Table 中实体的链接的实体。我想要一个单一查询的解决方案。我收到由“*”引起的错误。

```
DELETE AgentResultLinks.*
FROM AgentResultLinks LEFT JOIN Results 
ON AgentResultLinks.ResultID = Results.ID
WHERE Results.ID IS NULL 
```

有人可以帮我将此查询转换为紧凑型数据库的 vaid mssql 查询吗？性能非常重要。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T07:27:37.583

只需`.*`从`AgentResultLinks.*`

```
DELETE Agent
FROM AgentResultLinks Agent 
LEFT JOIN Results R
       ON Agent.ResultID = R.ID
WHERE R.ID IS NULL; 
```

请参阅`DELETE`语法：[DELETE (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189835.aspx)

[请参阅 SQLFiddle 示例](http://sqlfiddle.com/#!3/2e30b/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T08:06:47.543

```
DELETE FROM AgentResultLinks 
where ResultID not in(select distinct ID from Results) 
```

# nlp - 查找相似/相关文本算法

> ID：12525980
> 
> 赞同：4
> 
> 时间：2012-09-21T07:26:08.497
> 
> 标签：nlp, artificial-intelligence, similarity

我在 stackoverflow 和 Google 中搜索了很多，但没有找到最好的答案。实际上，我打算开发一个新闻阅读器系统，从网络上爬取和收集新闻（使用爬虫），然后，我想在网站中找到相似或相关的新闻（为了防止在网站上显示重复的新闻）

我认为最好的活生生的例子是谷歌新闻，它从网络上收集新闻，然后分类并找到相关的新闻和文章。这就是我想做的。

这样做的最佳算法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:48:06.680

一个相对简单的解决方案是为每个文档计算一个 tf-idf 向量 (en.wikipedia.org/wiki/Tf*idf)，然后使用这些向量之间的余弦距离 (en.wikipedia.org/wiki/Cosine_similarity) 作为估计文章之间的语义距离。

这可能会比 Levenstein 距离更好地捕捉语义关系，并且计算速度要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:20:36.310

这是一个：[http ://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

```
public static SqlInt32 ComputeLevenstheinDistance(SqlString firstString, SqlString secondString)
{
    int n = firstString.Value.Length;
    int m = secondString.Value.Length;
    int[,] d = new int[n + 1,m + 1];

    // Step 1
    if (n == 0)
    {
        return m;
    }

    if (m == 0)
    {
        return n;
    }

    // Step 2
    for (int i = 0; i <= n; d[i, 0] = i++)
    {
    }

    for (int j = 0; j <= m; d[0, j] = j++)
    {
    }

    // Step 3
    for (int i = 1; i <= n; i++)
    {
        //Step 4
        for (int j = 1; j <= m; j++)
        {
            // Step 5
            int cost = (secondString.Value[j - 1] == firstString.Value[i - 1]) ? 0 : 1;

            // Step 6
            d[i, j] = Math.Min(Math.Min(d[i - 1, j] + 1, d[i, j - 1] + 1), d[i - 1, j - 1] + cost);
        }
    }
    // Step 7
    return d[n, m];
} 
```

这对于手头的任务很方便：[http ://code.google.com/p/boilerpipe/](http://code.google.com/p/boilerpipe/)

另外，如果您需要减少要分析的单词数，请尝试以下操作：http: [//ots.codeplex.com/](http://ots.codeplex.com/)

我发现 OTS 在情感分析中非常有用，我可以将句子的数量减少到一个小的常用短语和/或单词列表中，并据此计算整体情绪。这同样适用于相似性。

# rows - 将 mysql_fetch_array 多行插入到表中

> ID：12525982
> 
> 赞同：1
> 
> 时间：2012-09-21T07:26:23.440
> 
> 标签：rows

我非常喜欢 php。我已经通过教程了解了这些。现在我正在努力完成最后一部分。

这是脚本的第一部分：它查找可用于具有 movid=$get_movie[id] 的电影的奖项列表

```
$award=mysql_fetch_array(mysql_query("SELECT * FROM award WHERE movid=$get_movie[id]")); 
```

然后我有这个来检查奖项列表是否已添加到电影中或未添加到用户个人资料中

```
$award_exists=mysql_fetch_array(mysql_query("SELECT award_id FROM userawards WHERE user_id=$user AND mov_id=$get_movie[id]")); 
```

如果奖励不存在于用户个人资料中，请将其添加到用户个人资料中，否则不要添加。

```
if(empty($award_exists['award_id'])) { mysql_query("INSERT INTO userawards (user_id, mov_id, award_id) VALUES ($user, $get_movie[id], $award[id])") or die (mysql_error);
} else if($award['id'] !=$award_exists['award_id']){ mysql_query("INSERT INTO userawards (user_id, mov_id, award_id) VALUES ($user, $get_movie[id], $award[id])") or die (mysql_error); }  else if($award['id'] =$award_exists['award_id']){ } 
```

例如，对于电影 3，我假设准备将 5 个奖项添加到用户配置文件中，但我只能将其中一个奖项插入用户配置文件。

我在 foreach 和 while 周围搜索，在过去的 5 个小时里我一直在尝试实现它。我就是做不到。有人可以帮帮我。

太感谢了

# javascript - 我什么时候写 myFunction 而不是 myFunction() 来调用函数

> ID：12525984
> 
> 赞同：0
> 
> 时间：2012-09-21T07:26:28.300
> 
> 标签：javascript, function

我已经看到，主要是在事件处理程序中，称为 Pascal 风格的函数，即没有括号。`myFunction`和之间有区别`myFunction()`吗？如果有，那是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:29:31.827

当你想调用一个函数时，你总是使用括号。

当您希望它成为回调函数时使用不带括号的原因是您不想在将其分配给事件时调用该函数。当事件被触发时，事件将调用该函数。

您可以像传递任何其他值一样传递函数引用，并在要调用它时使用括号。例子：

```
function test() {
  alert('test');
}

var x = test; // got the reference
var y = x; // copying it around
y(); // calling the function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:37:44.390

myFunction 是函数对象，可以像任何其他对象/变量一样传递，通常作为回调。myFunction() 调用一个没有任何参数的函数，这个表达式的值就是 myFunction 函数返回的值。

Pascal 风格的函数不是没有括号的函数。Pascal 风格的函数表示首字母不大写的函数名称。根据某些约定，只有构造函数的首字母应该大写，因为将构造函数作为常规函数（没有 new）调用，而将常规函数作为构造函数调用会引发难以发现的严重错误。

# java - 如何从以前的活动中通知当前活动

> ID：12525985
> 
> 赞同：1
> 
> 时间：2012-09-21T07:26:29.840
> 
> 标签：java, android, android-intent

我有两个活动。我有一个活动，我需要获取 facebook 朋友数据、他们的事件，并将所有这些数据保存到数据库中，然后显示一个包含特定信息的页面，但这一切都需要很多时间。所以在做这一切之前，我将一个意图转移到另一个活动中，所以活动#1 在后台创建解析器并将其保存在数据库中。但是现在我需要在所有计算完成后通知我的 Activity #2，以便我也可以启用一些 UI 按钮来显示现在存储在数据库中的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:55:10.030

If you really need both of those Activities (because you don't need Activity#1 if it's only task is to download data), then `AsyncTask` will be no good, since it's designed to be attached to a specific `Activity`.

What you'd rather do is to start a `Service` (with `AsyncTask` in it or even better, an `IntentService`). When it finishes its job you could do something like this:

```
Intent finish = new Intent(com.mypackage.intent.ACTION_DOWNLOADCOMPLETE);
sendBroadcast(finish); 
```

And in your Activity#2 listen to this broadcast with [`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html).

# vb.net - 使用linq反转对象列表中的对象列表

> ID：12525989
> 
> 赞同：0
> 
> 时间：2012-09-21T07:26:43.950
> 
> 标签：vb.net, asp.net-mvc-3, linq, linq-to-objects

我有一个类类型酒店的列表，其中包含其他类房间的列表。现在，当我执行降序排序时，我按降序对酒店进行排序，但我还必须使用 linq 在内部按价格对房间列表进行排序。下面是类结构的草图

```
class Hotel
       - property hotelname (string)
       - property rooms  (list of rooms)

class rooms
      - property roomdesc (string)
      - property roomcharge (decimal) 
```

我现在以下面的方式应用了降序和升序代码。

```
lstHotels.OrderByDescending(Function(hotel) hotel.Rooms(0).roomcharge).ToList() 
```

这会根据房间费用对酒店进行降序排序。第 0 个索引房间总是成本最低。同样使用降序排序，我还想对房间列表进行排序。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:49:13.827

Depending what result you want, you could just need `.ThenBy`:

Firstly, here is the LINQ expression I'm using:

```
From hotel In lstHotels
    From room In hotel.Rooms
    Order By hotel.Room(0).roomcharge Descending,
             room.roomcharge Descending 
```

Using LINQpad I get this:

```
lstHotels.SelectMany(Function(hotel) hotel.Rooms, _
            Function(hotel,room) New With{.hotel=hotel, .room=room}) _
     .OrderByDescending(Function(hr) hr.hotel.Rooms(0).roomcharge) _
     .ThenByDescending(Function(hr) hr.room.roomcharge) 
```

(but this is untested -- it is based upon the `AsQueryable` output from a slightly different dataset already coded for another SO answer).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:35:13.443

假设您有这些课程：

```
public class Hotel
{
    public string Name { get; set; }
    public List<Room> Rooms { get; set; } // List<Room> to keep it simple, 
                                          // you could/should expose it 
                                          // in a better way
}

public class Room
{
    public string Description { get; set; }
    public decimal Charge { get; set; }
} 
```

我认为正确的方法不是对`Rooms`成员进行排序，而是进行 Linq 查询，通过匿名类型在新数据结构中投射所需的排序：

```
var report = from o in offers
             orderby o.Name descending
             select new 
             { 
                o.Name, 
                Rooms = from r in o.Rooms
                        orderby r.Charge
                        select r 
             }; 
```

这样，您就有了匿名类型的枚举，其中第一个成员是酒店的名称，第二个成员是按您想要的方式排序的房间的枚举。您可能希望根据自己的喜好在投影中公开整个酒店实例，替换`o.Name`为。`Hotel = o`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:38:35.203

如果我正确理解了这个问题，你想颠倒酒店房间的顺序，如果是这样，那么你可以试试这个。

```
Dim hotelList as List(Of Hotel) =  lstHotels.OrderByDescending(Function(hotel) hotel.Rooms(0).roomcharge).ToList()

hotelList.ForEach(AddressOf OrderRooms)

Sub OrderRooms(ByVal hotel As Hotel)
       hotel.Rooms.Reverse()
End Sub 
```

可能会有所帮助。

# asp.net-ajax - EnableEmbededScript 关闭时配置 Asp.net Telerik 编辑器对话框

> ID：12525991
> 
> 赞同：1
> 
> 时间：2012-09-21T07:26:55.080
> 
> 标签：asp.net-ajax, telerik, telerik-editor

我在网站中使用了 asp.net Telerik RadEditor 控件并将该网站托管在共享托管服务器中，我必须禁用`Telerik.EnableEmbeddedScripts`标志并在页面中添加所需的脚本，但 RadEditor 的对话框不起作用。

我的网站托管在 FastHost 共享托管服务器中。Telerik 的其他控件运行完美。Telerik 的版本是 2011.3.1115.35

谁能建议如何在任何共享托管服务器上启用对话框以进行编辑器控制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:10:36.370

我的建议是使用启用的 CDN 脚本进行测试或配置您自己的自定义 CDN 提供程序，它将[自动导入对话脚本](http://www.telerik.com/help/aspnet-ajax/cdn-custom-provider.html)

如果禁用脚本，您将需要创建一个处理程序文件[EditorDialogScripts.zip](http://www.telerik.com/ClientsFiles/85bd9dee-7a45-4048-b926-9f0eafd80445_258584-EditorDialogScripts.zip) - 该文件是旧文件，为 Q1 SP2 2009 创建）包含 RadEditor 的对话框脚本，并通过 RadEditor ( ) 的 DialogsScriptFile 属性导入它`DialogsScriptFile="~/Scripts/EditorDialogScripts.ashx"`，这是一个耗时且不简单的过程。

您可以使用 Firebug 或 Fiddler 查看对话框中加载了哪些文件。

# asp.net-mvc - Spring.Net，Nhibernate，ASP.NET MVC3 CannotLoadObjectTypeException

> ID：12525992
> 
> 赞同：3
> 
> 时间：2012-09-21T07:26:58.877
> 
> 标签：asp.net-mvc, nhibernate, spring.net

```
[CannotLoadObjectTypeException: Cannot resolve type [Jtx.Service.Implement.UserManager,Jtx.Service] for object with name 'UserManager' defined in assembly [Jtx.Web, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null], resource [Jtx.Web.Config.Controllers.xml] line 3]
   Spring.Objects.Factory.Support.AbstractObjectFactory.ResolveObjectType(RootObjectDefinition rod, String objectName) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Objects\Factory\Support\AbstractObjectFactory.cs:1100
   Spring.Objects.Factory.Support.DefaultListableObjectFactory.PreInstantiateSingletons() in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Objects\Factory\Support\DefaultListableObjectFactory.cs:472
   Spring.Context.Support.AbstractApplicationContext.Refresh() in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Context\Support\AbstractApplicationContext.cs:1017
   Spring.Context.Support.WebApplicationContext..ctor(WebApplicationContextArgs args) in c:\_prj\spring-net\trunk\src\Spring\Spring.Web\Context\Support\WebApplicationContext.cs:125
   Spring.Context.Support.WebApplicationContext..ctor(String name, Boolean caseSensitive, String[] configurationLocations) in c:\_prj\spring-net\trunk\src\Spring\Spring.Web\Context\Support\WebApplicationContext.cs:82
   _dynamic_Spring.Context.Support.WebApplicationContext..ctor(Object[] ) in c:\_prj\spring-net\trunk\src\Spring\Spring.Web\Caching\AspNetCache.cs:126
   Spring.Reflection.Dynamic.SafeConstructor.Invoke(Object[] arguments) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Reflection\Dynamic\DynamicConstructor.cs:116
   Spring.Context.Support.RootContextInstantiator.InvokeContextConstructor(ConstructorInfo ctor) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Context\Support\ContextHandler.cs:563
   Spring.Context.Support.ContextInstantiator.InstantiateContext() in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Context\Support\ContextHandler.cs:508
   Spring.Context.Support.ContextHandler.InstantiateContext(IApplicationContext parentContext, Object configContext, String contextName, Type contextType, Boolean caseSensitive, String[] resources) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Context\Support\ContextHandler.cs:351
   Spring.Context.Support.WebContextHandler.InstantiateContext(IApplicationContext parent, Object configContext, String contextName, Type contextType, Boolean caseSensitive, String[] resources) in c:\_prj\spring-net\trunk\src\Spring\Spring.Web\Context\Support\WebContextHandler.cs:127
   Spring.Context.Support.ContextHandler.Create(Object parent, Object configContext, XmlNode section) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Context\Support\ContextHandler.cs:289 
```

**服务.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net">
  <object id="UserManager" type="Jtx.Service.Implement.UserManager,Jtx.Service" parent="BaseTransactionManager">
    <property name="CurrentRepository" ref="UserRepository"/>
  </object>
</objects> 
```

**用户管理器.cs**

```
using System.Collections.Generic;
using System.Linq;
using Jtx.Domain.Entity;

namespace Jtx.Service.Implement
{
    public class UserInfoManager : GenericManagerBase<User>, IUserManager
    {
        public IList<User> LoadAllByPage(out long total, int page, int rows, string order, string sort)
        {
            ...
        }
        private string HashCode(string key)
        {
            ...
        }

        public override object Save(User entity)
        {
            ...
        }

        public User Get(string account)
        {
            ...
        }

        public User Get(string account, string password)
        {
            ...
        }

        public void Update(User entity, string password)
        {
            ...
        }
    }

} 
```

![在此处输入图像描述](../Images/faf4c14f7d5b7f73d3d1f9d4c973eb47.png)

![在此处输入图像描述](../Images/a3bd2226e3783bae9c850578dd467619.png)

**网页配置**

```
 <!--spring-->
  <spring>
    <parsers>
      <parser type="Spring.Data.Config.DatabaseNamespaceParser, Spring.Data"/>
      <parser type="Spring.Transaction.Config.TxNamespaceParser, Spring.Data"/>
    </parsers>
    <context>
      <!--Dao-->
      <resource uri="assembly://Jtx.Dao/Jtx.Dao.Config/DaoBase.xml" />
      <resource uri="assembly://Jtx.Dao/Jtx.Dao.Config/Dao.xml" />
      <!--Service-->
      <resource uri="assembly://Jtx.Service/Jtx.Service.Config/ServiceBase.xml" />
      <resource uri="assembly://Jtx.Service/Jtx.Service.Config/Service.xml" />
      <!--Web-->
      <resource uri="assembly://Jtx.Web/Jtx.Web.Config/Controllers.xml" />
      <resource uri="config://spring/objects"/>
    </context>
    <objects xmlns="http://www.springframework.net"/>
  </spring> 
```

我在 vs2010 的 asp.net mvc3 项目中使用 spring.net 1.3.2 和 NHibernate 3.2。我调试的时候，只有`<resource uri="assembly://Jtx.Service/Jtx.Service.Config/Service.xml" />`报错。当你把这句话去掉，然后再次调试一切ok。但是我查了一下没有发现任何错误。同时，我在 Spring.net 中引用了[CannotLoadObjectTypeException](https://stackoverflow.com/questions/4508104/cannotloadobjecttypeexception-in-spring-net)，也没有发现错误。

这个问题似乎有点混乱，我想尽可能精确并尽可能多地提供信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:59:59.497

service.xml 中的类型是`type="Jtx.Service.Implement.UserManager,Jtx.Service"`，而 usermanager.cs 中的类型是`UserInfoManager`。您看得出来差别吗：

```
xml : Jtx.Service.Implement.UserManager
code: Jtx.Service.Implement.UserInfoManager 
```

将xml更改为`type="Jtx.Service.Implement.UserInfoManager, Jtx.Service"`应该可以解决问题。

当使用带有 xml 配置的 spring.net 时，这类事情总是会发生。通常，（巨大的）异常的第一行给出了最好的提示。在我看到您的 xml 中的错误之前，我不得不寻找一分钟。

# android - 带有 inJustDecodeBounds=true 的 BitmapFactory.decodeStream 始终返回 100x100

> ID：12525994
> 
> 赞同：1
> 
> 时间：2012-09-21T07:26:59.980
> 
> 标签：android, bitmap

这是我的安卓代码：

```
InputStream input = getAssets().open("photo.jpg");
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeStream(input, null, options);
System.out.println("### img size: " + options.outWidth + "x" + options.outHeight); 
```

但我发现无论我的图像有多大，它总是打印：

```
### img size: 100x100 
```

哪里错了？

* * *

**更新**

重新部署我的应用程序后它工作正常，但我没有修改任何内容。这很奇怪，但我想把这个问题留在这里，也许有一天它会再次出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:35:52.617

//读取位图尺寸和类型

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeResource(getResources(), R.id.myimage, options);
int imageHeight = options.outHeight;
int imageWidth = options.outWidth;
String imageType = options.outMimeType; 
```

[参考这里：](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#read-bitmap)

//你没有指定对象名称

```
InputStream input = getAssets().open("photo.jpg"); 
```

BitmapFactory 类提供了几种解码方法`(decodeByteArray(), decodeFile(), decodeResource()`等）用于从各种来源创建位图。

# javascript - 带有坐标地理的画布

> ID：12525996
> 
> 赞同：0
> 
> 时间：2012-09-21T07:27:01.930
> 
> 标签：javascript, html

我需要在画布上绘图，然后将该点作为地理坐标（纬度、经度）发送。有画布吗？我需要画布的背景是白色的，所以我需要不同于地图的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:32:25.930

您需要改进问题的措辞方式。如果您使用 Google Maps API，您可以使用叠加层在地图上显示任何信息，这些信息可能具有您需要的白色背景。

检查[https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)

# c# - 如何设置图表栏的宽度？

> ID：12525997
> 
> 赞同：11
> 
> 时间：2012-09-21T07:27:04.193
> 
> 标签：c#, winforms, charts

我正在使用 Visual Studio 2010 用 C# 编写 Winforms 应用程序。我正在使用常规工具箱中的图表控件来查看我的 SQL 数据库中的数据。如您所见，酒吧非常宽。是否有一些属性或方法可以使其更小并固定？

![http://priv.hiphotos.baidu.com/album/s%3D308%3Bq%3D90/sign=131a1ec68bd4b31cf43c92bbbfed5642/d4628535e5dde711c9184673a7efce1b9c166168.jpg?psign=de6394777d1ed21b3ae15fd4ad4712a551da81cb3bdb1fb1](../Images/4568df2c753314137c90c9dab0d01c7c.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-21T09:01:01.450

我做了一个*绑定三个值*并设置**dataPointCustomProperties**`PixelPointWidth`的小示例。

 **```
int[] liste = new int[] { 1, 2, 3 };//, 4, 5, 6, 7 };
chart1.Series["Series1"].Points.DataBind(liste, "sampleData", "count", "Tooltip=count");
// dataPointCustomProperties
chart1.Series["Series1"]["PixelPointWidth"] = "1"; 
```

将导致此图表

![图表栏宽度 1px](../Images/815f3b4b63efdc07f6fc3f821db165e6.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-01T09:23:18.817

您可以使用以下代码：

```
Chart1.Series["Series1"]["PixelPointWidth"] = "15"; 
```

谢谢你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-11T03:58:55.283

您还可以`PixelPointWidth`在报表设计器中设置如下。

1.  单击图表系列，按下`F4`以显示属性。
2.  更改`PixelPointWidth`in`CustomAttributes`节点。

![设置 PixelPointWidth](../Images/992bb203b62cf838d08e6a08b59b8599.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-24T21:00:20.490

同样问题的VB.NET版本：

```
Dim EL As New Series
EL.ChartType = SeriesChartType.Column
EL.Name = "Series name"
EL.SetCustomProperty("PixelPointWidth", "1")
EL.Points.AddXY(x, y)
Chart1.Series.Add(EL) 
```

使用图表属性无法访问此自定义属性。如果该属性未初始化，则图表条的宽度是**随机的！**.**

# maven - 有没有办法通过 settings.xml 禁用 maven-deploy-plugin 的部署目标

> ID：12525999
> 
> 赞同：10
> 
> 时间：2012-09-21T07:27:07.213
> 
> 标签：maven, jenkins, artifactory

我尝试将其添加到 settings.xml；

```
<properties>
    <maven.deploy.skip>true</maven.deploy.skip>
</properties> 
```

但这没有用。mvn deploy -Dmaven.skip.deploy=true 似乎工作正常。另外我假设将上述标签添加到 pom.xml 也可以。有没有办法使用 settings.xml 来实现这一点？

我想要这样做的原因是强制人们生成 Jenkins 工作必须使用 Jenkins 的方法来部署工件，而不是使用部署目标。Jenkins 的方法只有在整个构建成功时才会部署工件，但是即使其余的构建即将失败，部署目标也可以部署工件。除了阻止普通用户在 Jenkins 中创建和配置作业之外，我愿意接受有关实现此目的的其他方法的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:02:29.423

想出如何使用 settings.xml 做到这一点。必须在活动配置文件中插入我提到的标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T07:44:00.383

如果确实对您有用，那么一种解决方法应该`-Dmaven.skip.deploy=true`是：

在您的 Jenkins 作业配置中，转到 Build 单击 Advanced... 并`-Dmaven.skip.deploy=true`在 MAVEN_OPTS 字段中输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-26T20:33:57.093

经过长时间的战斗，以下内容对我有用。

```
 -Dskip.deploy=true 
```

以下没有奏效。

```
-Dmaven.skip.deploy=true
-Dmaven.deploy.skip=true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-15T16:27:07.327

我发现它适用于

> -Dmaven.deploy.skip=true

代替

> -Dmaven.skip.deploy=true