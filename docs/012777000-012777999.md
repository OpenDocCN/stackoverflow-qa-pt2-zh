# StackOverflow 问答 12777000-12777999

# mysql - 获取mysql中表的最后访问时间

> ID：12777008
> 
> 赞同：0
> 
> 时间：2012-10-08T07:18:54.830
> 
> 标签：mysql, sql

有什么方法可以知道对表执行最后一个 select 语句的时间？我正在使用 InnoDB 存储引擎。

我尝试过以下查询：

```
select update_time,table_name from information_schema.tables where table_schema='databasename'; 
```

..但我`NULL`在`update_time`专栏中收到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:22:21.380

除非您手动更新`last_accessed`表上的 -field，否则我最好的选择是添加查询日志记录并解析日志文件。

我用谷歌搜索并发现了这些相关的问题：

[上次访问 mysql 表是什么时候？](https://stackoverflow.com/questions/5762539/when-was-the-last-time-a-mysql-table-was-accessed)

[您如何获得 MySQL 数据库的最后访问（和/或写入）时间？](https://stackoverflow.com/questions/2344467/how-do-you-get-the-last-access-and-or-write-time-of-a-mysql-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T05:25:29.893

从 INFORMATION_SCHEMA.TABLES 中选择 UPDATE_TIME，其中 TABLE_SCHEMA = 'dbname' AND TABLE_NAME = 'tabname'`

# eclipse - 禁用 Eclipse 错误对话框

> ID：12777015
> 
> 赞同：3
> 
> 时间：2012-10-08T07:19:50.180
> 
> 标签：eclipse, popup

当我在 Eclipse 中进行更改并按下保存按钮时，会弹出一个对话框，显示“出现问题”。由于发展原因，这些发生的错误对我来说并不重要，所以我的问题是有可能禁用这个弹出窗口真的很烦人吗？弹出窗口如下所示： ![在此处输入图像描述](../Images/0edcc88caf1321a740a5de2a87cbc6a8.png)

# asp.net-mvc-3 - 如何在 LINQ 查询中解决这个问题？

> ID：12777021
> 
> 赞同：0
> 
> 时间：2012-10-08T07:20:09.257
> 
> 标签：asp.net-mvc-3, linq

我正在研究 MVC3 项目。我需要帮助编写 Linq 表达式。我的模型是这样的。

**模型类**

```
 public int Id { get; set; }
    public int DetCount { get; set; } 
```

我需要做这样的事情，

```
DetCount = (from sel in db.PoDetails where sel.PoId == Id select sel).Count();  // Id is current model Id. 
```

根据父表 ID，我需要获取子表记录数。

**例子**

父表

```
 Id                  Name

  1                   XYZ
  2                   ABC 
```

子表

```
Id         P_Id

 1          1
 2          1
 3          2

DetCount = (from sel in db.child where sel.P_Id == Id select sel).Count(); // if Id= 1 
```

**结果**

```
DetCount = 2; 
```

我已经编写了类似这样的代码。

**代码**

```
model = ...
select new porders
                     {
                         Id = p.Id,  //This Id is passed to next statement for DetCount.
                         DetCount = (from sel in db.PoDetails where sel.PoId == Id select sel).Count();    // I need to pass value from another linq query.
                      } 
```

请帮助我。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:35:14.403

```
 var result = select new porders
                 {
                     Id = p.Id,
                     PODate = p.Date.Value,
                     RefNo = p.RefNo,
                     Status = resloc.Description,
                     Supplier = resstat.Name,
                     DetCount = db.PoDetails
                      .Select(p => p.sel)
                        .Where(sel.PoId == asd.Id).Count() 
                  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:07:55.917

这只是你想要的计数吗？如果是这样，这应该工作：

```
var DetCount = db.PoDetails.Where(sel=>sel.PoId == Id).Count();  // Id is current model Id. 
```

干杯:)

# delphi - 是什么导致 TeeChart PieSerie 被截断？

> ID：12777022
> 
> 赞同：1
> 
> 时间：2012-10-08T07:20:27.327
> 
> 标签：delphi, delphi-xe2, teechart

我有一个`DBChart`5`PieSerie`就可以了。注意最后一个饼图是如何被截断的。我能做些什么来避免这种情况吗？我正在使用 TeeChart Standard v2011.03.32815 VCL；除了更改颜色主题外，我没有更改图表的任何属性。 ![当 5 个图表一起绘制时](../Images/4e78577787114984522690414329438e.png) ![只有相关图表可见时](../Images/8e08ef8bfdf472a97d0634e500c1ca06.png)

这是包含`DBChart`

```
object frmAdminStats: TfrmAdminStats
  Left = 0
  Top = 0
  Width = 730
  Height = 610
  BiDiMode = bdRightToLeft
  DoubleBuffered = True
  ParentBiDiMode = False
  ParentDoubleBuffered = False
  TabOrder = 0
  object DBChart1: TDBChart
    Left = 0
    Top = 0
    Width = 730
    Height = 610
    AllowPanning = pmNone
    Foot.Font.Name = 'Tahoma'
    SubFoot.Font.Name = 'Tahoma'
    SubTitle.Font.Name = 'Tahoma'
    Title.Font.Name = 'Tahoma'
    Title.Text.Strings = (
      '')
    Title.Visible = False
    BottomAxis.LabelsFont.Name = 'Tahoma'
    BottomAxis.Title.Font.Name = 'Tahoma'
    DepthAxis.LabelsFont.Name = 'Tahoma'
    DepthAxis.Title.Font.Name = 'Tahoma'
    DepthTopAxis.LabelsFont.Name = 'Tahoma'
    DepthTopAxis.Title.Font.Name = 'Tahoma'
    LeftAxis.LabelsFont.Name = 'Tahoma'
    LeftAxis.Title.Font.Name = 'Tahoma'
    Legend.Font.Name = 'Tahoma'
    Legend.ResizeChart = False
    Legend.TextStyle = ltsPlain
    Legend.Title.Font.Name = 'Tahoma'
    Legend.Transparent = True
    Legend.Visible = False
    Panning.MouseWheel = pmwNone
    RightAxis.LabelsFont.Name = 'Tahoma'
    RightAxis.Title.Font.Name = 'Tahoma'
    TopAxis.LabelsFont.Name = 'Tahoma'
    TopAxis.Title.Font.Name = 'Tahoma'
    View3DOptions.Elevation = 315
    View3DOptions.Orthogonal = False
    View3DOptions.Perspective = 0
    View3DOptions.Rotation = 360
    Zoom.Allow = False
    OnAfterDraw = DBChart1AfterDraw
    OnBeforeDrawChart = DBChart1BeforeDrawChart
    Align = alClient
    TabOrder = 0
    OnClick = DBChart1Click
    ColorPaletteIndex = 13
    object Series1: TPieSeries
      LegendTitle = #1580#1606#1587#1740#1578
      Cursor = crHandPoint
      Marks.Arrow.Visible = True
      Marks.Callout.Brush.Color = clBlack
      Marks.Callout.Arrow.Visible = True
      Marks.Visible = True
      Title = #1580#1606#1587#1740#1578
      XValues.Order = loAscending
      YValues.Name = 'Pie'
      YValues.Order = loNone
      OnClick = Series1Click
      ExplodeBiggest = 15
      Frame.InnerBrush.BackColor = clRed
      Frame.InnerBrush.Gradient.EndColor = clGray
      Frame.InnerBrush.Gradient.MidColor = clWhite
      Frame.InnerBrush.Gradient.StartColor = 4210752
      Frame.InnerBrush.Gradient.Visible = True
      Frame.MiddleBrush.BackColor = clYellow
      Frame.MiddleBrush.Gradient.EndColor = 8553090
      Frame.MiddleBrush.Gradient.MidColor = clWhite
      Frame.MiddleBrush.Gradient.StartColor = clGray
      Frame.MiddleBrush.Gradient.Visible = True
      Frame.OuterBrush.BackColor = clGreen
      Frame.OuterBrush.Gradient.EndColor = 4210752
      Frame.OuterBrush.Gradient.MidColor = clWhite
      Frame.OuterBrush.Gradient.StartColor = clSilver
      Frame.OuterBrush.Gradient.Visible = True
      Frame.Visible = False
      Frame.Width = 4
      OtherSlice.Legend.Visible = False
      PiePen.Visible = False
      RotationAngle = 75
    end
    object Series2: TPieSeries
      Cursor = crHandPoint
      Marks.Arrow.Visible = True
      Marks.Callout.Brush.Color = clBlack
      Marks.Callout.Arrow.Visible = True
      Marks.Visible = True
      SeriesColor = clRed
      Title = #1576#1740#1605#1607' '#1711#1586#1575#1585#1575#1606
      XValues.Order = loAscending
      YValues.Name = 'Pie'
      YValues.Order = loNone
      OnClick = Series1Click
      ExplodeBiggest = 15
      Frame.InnerBrush.BackColor = clRed
      Frame.InnerBrush.Gradient.EndColor = clGray
      Frame.InnerBrush.Gradient.MidColor = clWhite
      Frame.InnerBrush.Gradient.StartColor = 4210752
      Frame.InnerBrush.Gradient.Visible = True
      Frame.MiddleBrush.BackColor = clYellow
      Frame.MiddleBrush.Gradient.EndColor = 8553090
      Frame.MiddleBrush.Gradient.MidColor = clWhite
      Frame.MiddleBrush.Gradient.StartColor = clGray
      Frame.MiddleBrush.Gradient.Visible = True
      Frame.OuterBrush.BackColor = clGreen
      Frame.OuterBrush.Gradient.EndColor = 4210752
      Frame.OuterBrush.Gradient.MidColor = clWhite
      Frame.OuterBrush.Gradient.StartColor = clSilver
      Frame.OuterBrush.Gradient.Visible = True
      Frame.Visible = False
      Frame.Width = 4
      OtherSlice.Legend.Visible = False
      PiePen.Visible = False
      RotationAngle = 75
    end
    object Series3: TPieSeries
      LegendTitle = #1576#1740#1605#1607' '#1711#1586#1575#1585#1575#1606' '#1605#1705#1605#1604
      Cursor = crHandPoint
      Marks.Arrow.Visible = True
      Marks.Callout.Brush.Color = clBlack
      Marks.Callout.Arrow.Visible = True
      Marks.Visible = True
      Title = #1576#1740#1605#1607' '#1711#1586#1575#1585#1575#1606' '#1605#1705#1605#1604
      XValues.Order = loAscending
      YValues.Name = 'Pie'
      YValues.Order = loNone
      OnClick = Series1Click
      ExplodeBiggest = 15
      Frame.InnerBrush.BackColor = clRed
      Frame.InnerBrush.Gradient.EndColor = clGray
      Frame.InnerBrush.Gradient.MidColor = clWhite
      Frame.InnerBrush.Gradient.StartColor = 4210752
      Frame.InnerBrush.Gradient.Visible = True
      Frame.MiddleBrush.BackColor = clYellow
      Frame.MiddleBrush.Gradient.EndColor = 8553090
      Frame.MiddleBrush.Gradient.MidColor = clWhite
      Frame.MiddleBrush.Gradient.StartColor = clGray
      Frame.MiddleBrush.Gradient.Visible = True
      Frame.OuterBrush.BackColor = clGreen
      Frame.OuterBrush.Gradient.EndColor = 4210752
      Frame.OuterBrush.Gradient.MidColor = clWhite
      Frame.OuterBrush.Gradient.StartColor = clSilver
      Frame.OuterBrush.Gradient.Visible = True
      Frame.Visible = False
      Frame.Width = 4
      OtherSlice.Legend.Visible = False
      PiePen.Visible = False
      RotationAngle = 75
    end
    object Series4: TPieSeries
      Cursor = crHandPoint
      Marks.Arrow.Visible = True
      Marks.Callout.Brush.Color = clBlack
      Marks.Callout.Arrow.Visible = True
      Marks.Visible = True
      Title = #1662#1586#1588#1705#1575#1606
      XValues.Order = loAscending
      YValues.Name = 'Pie'
      YValues.Order = loNone
      OnClick = Series1Click
      ExplodeBiggest = 15
      Frame.InnerBrush.BackColor = clRed
      Frame.InnerBrush.Gradient.EndColor = clGray
      Frame.InnerBrush.Gradient.MidColor = clWhite
      Frame.InnerBrush.Gradient.StartColor = 4210752
      Frame.InnerBrush.Gradient.Visible = True
      Frame.MiddleBrush.BackColor = clYellow
      Frame.MiddleBrush.Gradient.EndColor = 8553090
      Frame.MiddleBrush.Gradient.MidColor = clWhite
      Frame.MiddleBrush.Gradient.StartColor = clGray
      Frame.MiddleBrush.Gradient.Visible = True
      Frame.OuterBrush.BackColor = clGreen
      Frame.OuterBrush.Gradient.EndColor = 4210752
      Frame.OuterBrush.Gradient.MidColor = clWhite
      Frame.OuterBrush.Gradient.StartColor = clSilver
      Frame.OuterBrush.Gradient.Visible = True
      Frame.Visible = False
      Frame.Width = 4
      OtherSlice.Legend.Visible = False
      PiePen.Visible = False
      RotationAngle = 75
    end
    object Series5: TPieSeries
      Cursor = crHandPoint
      Marks.Arrow.Visible = True
      Marks.Callout.Brush.Color = clBlack
      Marks.Callout.Arrow.Visible = True
      Marks.Visible = True
      Title = #1576#1582#1588' '#1607#1575
      XValues.Order = loAscending
      YValues.Name = 'Pie'
      YValues.Order = loNone
      OnClick = Series1Click
      ExplodeBiggest = 15
      Frame.InnerBrush.BackColor = clRed
      Frame.InnerBrush.Gradient.EndColor = clGray
      Frame.InnerBrush.Gradient.MidColor = clWhite
      Frame.InnerBrush.Gradient.StartColor = 4210752
      Frame.InnerBrush.Gradient.Visible = True
      Frame.MiddleBrush.BackColor = clYellow
      Frame.MiddleBrush.Gradient.EndColor = 8553090
      Frame.MiddleBrush.Gradient.MidColor = clWhite
      Frame.MiddleBrush.Gradient.StartColor = clGray
      Frame.MiddleBrush.Gradient.Visible = True
      Frame.OuterBrush.BackColor = clGreen
      Frame.OuterBrush.Gradient.EndColor = 4210752
      Frame.OuterBrush.Gradient.MidColor = clWhite
      Frame.OuterBrush.Gradient.StartColor = clSilver
      Frame.OuterBrush.Gradient.Visible = True
      Frame.Visible = False
      Frame.Width = 4
      OtherSlice.Legend.Visible = False
      PiePen.Visible = False
      RotationAngle = 75
    end
  end
  object qStats: TADOQuery
    Connection = dmLabData.ADOConnection
    ExecuteOptions = [eoAsyncExecute]
    Parameters = <>
    Left = 48
    Top = 40
  end
  object tmAdminStats: TJvTimer
    Enabled = False
    Interval = 5000
    OnTimer = tmAdminStatsTimer
    Left = 48
    Top = 112
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:47:40.807

恐怕这是一个已知问题，您可以[在此处](http://www.teechart.net/support/viewtopic.php?f=3&t=9180&p=55440&hilit=TV52013467#p55415)阅读。这不是一个微不足道的问题，可能需要对该系列进行彻底的重新设计才能解决。

# coldfusion - cfform 无法初始化

> ID：12777025
> 
> 赞同：0
> 
> 时间：2012-10-08T07:20:50.837
> 
> 标签：coldfusion, http-status-code-404, cfform

我正在检查coldfusion中的cfform标签，代码很简单：

```
<cfform name="testFrm" format="Flash">
    <cfinput type="text" name="abc" value ="">
</cfform> 
```

但运行时显示：“NetworkError: 404 Not Found - .../1405338045.mxml.cfswf”

无法显示表格。

这里有人遇到这个错误吗？你能帮我解决这个问题吗，我对此没有任何线索？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:35:37.443

我怀疑您没有 /CFIDE 虚拟目录映射，如果要使用`<cfform>`.

如果没有该映射，可以使用为需要工作`<cfajaximport>`的资源文件指定替代位置。`<cfform>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-14T08:32:55.987

如果您使用的是 CF11，请打开 web.xml 文件

{CF11}\cfusion\wwwroot\WEB-INF\web.xml 并取消注释任何与 SWF 或 CFForm 相关的配置。重新启动 CF 并重试。

有一个客户端有很多需要 Flash 表单的遗留代码，这为客户端修复了 404 的“mxml.cfswf”文件，所以我想我会在这里发布，以便其他人搜索这个主题。

# soapui - 如何删除soap ui中的许多测试用例？

> ID：12777031
> 
> 赞同：0
> 
> 时间：2012-10-08T07:21:27.293
> 
> 标签：soapui

我的**Soap UI**项目中有大约 50 个测试用例，但只有 40 个测试用例有效，我想删除所有剩余的测试用例，而不是禁用它。我试过删除它，但它只能一个一个地删除。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:09:25.203

整个soapUI 项目存储为一个XML 文件。单击项目，您将在屏幕左下方看到文件位置。它的名称应以 xxx-soapui-project.xml 结尾

在项目 XML 文件中搜索“testCase”，删除测试用例并保存。最后，您需要重新打开soapUI 或刷新项目。

# html - 溢出其容器 div 两侧的文本

> ID：12777034
> 
> 赞同：7
> 
> 时间：2012-10-08T07:21:36.417
> 
> 标签：html, css

我在包含 div 中的文本从应该自动自动换行的两侧溢出。

```
html {
  padding: 0;
  margin: 0;
}

body {
  background: #E4E4E4;
  height: 100%;
  width: 100%;
}

#main {
  display: block;
  background: white;
  width: 960px;
  margin: 0 auto;
  position: relative;
  padding: 5px 5px;
}
```

```
<body>
  <div id="main">
    <p>jjfaljfejjfkadjf;lj;jmvwutpvwjfjdsjfklsdkdfjklsjfkljwjeiojfklslfkjsvfoiwjeorfjviw nfwvfjojwkdsklflskjfvwiernvejveurvnwejfkdsjwjjrfjiowjeionvkjlksjdfkljkljdwijiodjfiovnwjoiejoijfiojkjsljfdkjslfiejskdklfjlksjfeijskdjfklsjkldjfwjnfklsjfwoevjnwfdjshfk
      fsdkjfsjdfkjksjdfkjsljfdkljskl
    </p>
  </div>

</body>

</html>
```

这是显示的内容：

![截屏](../Images/4c9ec289efcca78598ae414036658430.png)

我读过其他问题，但没有一个能解决我的问题。问题是文本不会溢出 div 的底部。这与我为 div 设置的宽度有关吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T07:28:31.313

这会将您的文本包装在 div 中，即使您的字符串是完整的（这就是我假设您的意思）。

```
.wordwrap {  
   white-space: pre-wrap;      /* Webkit */    
   white-space: -moz-pre-wrap; /* Firefox */     
   white-space: -pre-wrap;     /* Opera <7 */    
   white-space: -o-pre-wrap;   /* Opera 7 */     
   word-wrap: break-word;      /* IE */ 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T07:29:35.667

我明白你的意思，最后的 K 与 Chrome 中 div 的边缘略微重叠。

我建议删除您的填充中的第二个 5px 并且只需：

```
padding:  5px; 
```

还添加：

```
word-wrap:break-word; 
```

这样你就可以在整个 div 周围获得 5px 的填充，并且你的内容将被包装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T07:33:46.247

问题是你有一个很长的词。您可以按照他们所说的使用`word-wrap: break-word;`，也可以隐藏文本。

您可以使用文本溢出，即：

```
p {
  text-overflow: ellipsis;
} 
```

在哪里：

`text-overflow: clip|ellipsis|string;`

[更多信息](http://www.w3schools.com/cssref/css3_pr_text-overflow.asp)

# algorithm - 有向图中通过某个顶点的最短路径

> ID：12777035
> 
> 赞同：1
> 
> 时间：2012-10-08T07:21:39.917
> 
> 标签：algorithm

假设我们有一个具有正边权重的强连通有向图 G (V,E)，并且 V0 属于 V。编写一个算法来找到所有节点对之间通过 V0 的最短路径

一个面试题。显然我们可以使用需要 O(VE) 的 Bellman-Ford。

但是，必须存在更好的解决方案。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:55:26.967

我认为您甚至可以使用 Dijkstra 的算法。运行一次以找到从 V0 到所有其他顶点的最短路径，然后再次找到从每个其他顶点到 V0 的最短路径（这与在具有反向边的图上运行常规 Dijkstra 相同）。然后对于任何对 (V1,V2) 连接从 V1 到 V0 以及从 V0 到 V2 的路径。

# c# - WinForms 中的 Timer Tick 事件和线程

> ID：12777039
> 
> 赞同：1
> 
> 时间：2012-10-08T07:21:52.660
> 
> 标签：c#, winforms, multithreading, timer, thread-safety

我有一个名为 的计时器`SendTimer`，间隔为 30 秒。

```
protected void SendTimer_Tick(object sender, eventArgs e)
{
      SendTimer.Enabled = false;

      TransferMoney();

      System.Threading.Thread.Sleep(15000);

      GenerateTransactions();

      SendTimer.Enabled = true;
} 
```

我希望一个线程同时正确调用滴答事件。不是同时通过 2 个线程。但正如我在我的日志中看到的，它似乎是由一个线程调用的，而另一个线程正在运行。任何的想法？因为我分别禁用和启用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:41:28.380

Windows Forms [Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)根据定义是单线程的。它与多线程无关，因为它通过[WM_TIMER](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644902%28v=vs.85%29.aspx)消息流逝，被发送到当前 GUI 线程消息队列。

所以这：

> 不是同时通过 2 个线程

是不正确的，因为即使你有多个线程，WinForms Timer 也与此无关。

# java - 2个类加载器之间的交互

> ID：12777040
> 
> 赞同：1
> 
> 时间：2012-10-08T07:21:53.467
> 
> 标签：java, classloader

说，我在同一个 JVM 中有两个类加载器，CL1 和 CL2。

CL1 加载 A 类 & CL2 加载 B 类

现在，A 想要访问 B。但我不想在 CL1 中再次加载 B。A（在 CL1 中加载）是否可以访问 B（在 CL2 中加载）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:25:17.337

如果 CL2 是 CL1 的父级，那么没问题。如果 Cl2 和 Cl1 以某种方式像 OSGi 一样连接，那么它们也可以相互认识。如果您自己编写 Cl2 和/或 CL1，那么您可以设置这样的链接。否则，除了使用反射或在 CL1 和 CL2 上方加载的公共接口外，它们无法“了解”彼此。

# iphone - 使用图像创建 HTML 文件

> ID：12777041
> 
> 赞同：0
> 
> 时间：2012-10-08T07:21:54.127
> 
> 标签：iphone, html, ios, xcode, uiwebview

我使用图像源以编程方式创建了一个 HTML 文件。图像存储在文档目录中。问题是当我将图像源路径作为文档目录路径时，图像不会显示在 Windows 中。

所以，我选择第二个选项是只给出图像的名称而不是整个路径。然后它在 Mac 和 Windows 上运行良好，但现在图像不会显示在设备的 UIWebView 上。

然后我选择在 Safari 中打开 UIWebView 中的 HTML 文件，但由于 URL 变为 NULL，Safari 无法打开。

我打开 Safari 的代码如下：

> NSLog(@"%@",documentsDirectory);
> 
> ```
> NSString *urlStr = [NSString stringWithFormat:@"%@/AccReport1.html",documentsDirectory];
> NSLog(@"urlStr :: %@",urlStr);
> NSURL *url1=[[NSURL alloc]init ];
> url1 = [NSURL fileURLWithPath:urlStr];
> NSLog(@"url :: %@",url1);
> [[UIApplication sharedApplication]openURL:url1]; 
> ```

我想邮寄包含图像的 HTML 文件。这些 HTML 文件和图像存储在文档目录中。我想在 windows 浏览器、mac 浏览器和 iphone 的 safari 中显示这个带有图像的 HTML 文件。

这该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:51:57.437

解决问题的一种简单方法是将图像和 HTML 文件保存在同一目录中，并仅按名称在 HTML 文件中引用这些图像，如果将它们放在文件夹中，则提供完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:57:09.950

图像未显示，因为 HTML 代码中指定的图像路径不是文档目录路径。

我建议您可能必须构造一个 html 字符串，然后让 uiwebview 加载该字符串

```
 NSString *htmlString = [NSString stringWithFormat:@"<html><body><img src=\" %@/image.png  \"></img></body></html>",documentsDirectoryPath];

[webView loadHTMLString:htmlString baseURL:nil]; 
```

# c# - 从 C# 中 Windows 媒体播放器上播放的视频中获取图像

> ID：12777042
> 
> 赞同：2
> 
> 时间：2012-10-08T07:21:57.057
> 
> 标签：c#, .net, image

在我的 Windows 应用程序中，我使用 Windows Media Player dll 播放视频。

在我的表单中，我有一个按钮可以拍摄当前视频帧的照片。

我做了很多测试和代码检查，但我无法找出为什么拍摄当前帧会失败。

我尝试了这段代码，但生成的图像是黑色的：

```
private Graphics g = null;

private void btnTakePicture_Click(object sender, EventArgs e)
{
    if (!string.IsNullOrEmpty(axWMVMovie.URL))
    {
        axWMVMovie.Ctlcontrols.pause();
        if (saveFileDialog1.ShowDialog() == DialogResult.OK)
        {
            System.Drawing.Image ret = null;
            try
            {
                Bitmap bitmap = new Bitmap(axWMVMovie.Width, axWMVMovie.Height);
                {
                    g = Graphics.FromImage(bitmap);
                    {
                        Graphics gg = axWMVMovie.CreateGraphics();
                        {
                            timerTakePicFromVideo.Start();
                        }
                    }

                    using (MemoryStream ms = new MemoryStream())
                    {
                        bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
                        ret = System.Drawing.Image.FromStream(ms);
                        ret.Save(saveFileDialog1.FileName);
                    }
                }
            }
            catch
            {
            }
        }
    }
}

private void timerTakePicFromVideo_Tick(object sender, EventArgs e)
{
    timerTakePicFromVideo.Stop();

    g.CopyFromScreen(axWMVMovie.PointToScreen(new System.Drawing.Point()).X, 

    axWMVMovie.PointToScreen(new System.Drawing.Point()).Y, 0, 0,

    new System.Drawing.Size(axWMVMovie.Width, axWMVMovie.Height));
} 
```

我之所以使用`Timer`，是因为当用户选择保存路径时，函数会从用户指定的文件中获取图像`save file dialog`。视频格式为 WMV。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:11:17.513

我拿走了*你的代码*并*修改*了它。我把捕捉照片的代码放了一点，现在它可以工作了。我**在 saveFileDialog 弹出之前**创建*了图片*，因此您实际上只会得到图片而不是图片中的 saveFileDialog。

 **```
if (!string.IsNullOrEmpty(axWindowsMediaPlayer1.URL))
{
    axWindowsMediaPlayer1.Ctlcontrols.pause();

    System.Drawing.Image ret = null;
    try
    {
        // take picture BEFORE saveFileDialog pops up!!
        Bitmap bitmap = new Bitmap(axWindowsMediaPlayer1.Width, axWindowsMediaPlayer1.Height);
        {
            Graphics g = Graphics.FromImage(bitmap);
            {
                Graphics gg = axWindowsMediaPlayer1.CreateGraphics();
                {
                    //timerTakePicFromVideo.Start();
                    this.BringToFront();
                    g.CopyFromScreen(
                        axWindowsMediaPlayer1.PointToScreen(
                            new System.Drawing.Point()).X,
                        axWindowsMediaPlayer1.PointToScreen(
                            new System.Drawing.Point()).Y,
                        0, 0,
                        new System.Drawing.Size(
                            axWindowsMediaPlayer1.Width,
                            axWindowsMediaPlayer1.Height)
                        );
                }
            }
            // afterwards save bitmap file if user wants to
            if (saveFileDialog1.ShowDialog() == DialogResult.OK)
            {
                using (MemoryStream ms = new MemoryStream())
                {
                    bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
                    ret = System.Drawing.Image.FromStream(ms);
                    ret.Save(saveFileDialog1.FileName);
                }
            }
        }
    }
    catch (Exception ex)
    {
        Debug.WriteLine(ex.Message);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-18T17:45:01.690

使用先前的答案，避免获取捕获控件的技巧是在捕获之前执行此操作：

```
string uimode_previus = axWindowsMediaPlayer2.uiMode;
axWindowsMediaPlayer2.uiMode = "none"; 
```

然后当捕获完成后，将`uimode`背面设置为`previous`这样：

```
axWindowsMediaPlayer2.uiMode = uimode_previus ; 
```

这样，您只能从当前帧获得实际拍摄。这是一个小解决方法，但它可以完成工作。

这是工作示例

```
private void button8_Click_1(object sender, EventArgs e)
{
  string uimode_previus = axWindowsMediaPlayer2.uiMode;
  axWindowsMediaPlayer2.uiMode = "none";

  if (!string.IsNullOrEmpty(axWindowsMediaPlayer2.URL))
  {
    ret = null;
    try
    {
      // take picture BEFORE saveFileDialog pops up!!
      Bitmap bitmap = new Bitmap(axWindowsMediaPlayer2.Width, axWindowsMediaPlayer2.Height);
      {
        Graphics g = Graphics.FromImage(bitmap);
        {
          Graphics gg = axWindowsMediaPlayer2.CreateGraphics();
          {
            //timerTakePicFromVideo.Start();
            this.BringToFront();
            g.CopyFromScreen(axWindowsMediaPlayer2.PointToScreen(
                             new System.Drawing.Point()).X,
                             axWindowsMediaPlayer2.PointToScreen(
                             new System.Drawing.Point()).Y,
                             0, 0,
                             new System.Drawing.Size(
                             axWindowsMediaPlayer2.Width - 0,
                             axWindowsMediaPlayer2.Height - 0)
                            );
          }
        }
        // afterwards save bitmap file if user wants to
        try
        {
          using (MemoryStream ms = new MemoryStream())
          {
            string rute = axWindowsMediaPlayer2.URL.ToString().Replace(".", "Review_."); // 
            bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
            ret = new Bitmap(System.Drawing.Image.FromStream(ms));
            ret.Save(rute.Replace(".mp4", ".Png"));
          }

          // open captured frame in new form
          TeamEasy.ShowPictureForm spf = new ShowPictureForm();
          spf.ImagePictureBox.Image = ret;
          spf.ShowDialog();
        }
        catch (Exception ex)
        {
          Debug.WriteLine(ex.Message);
        }
      }
    }
    catch (Exception ex)
    {
      Debug.WriteLine(ex.Message);
    }
  }

  axWindowsMediaPlayer2.uiMode = uimode_previus;
  // restore the UImode of player
} 
```**

# java - 如何在 SWT、Java 中管理多个启动画面

> ID：12777053
> 
> 赞同：2
> 
> 时间：2012-10-08T07:22:52.127
> 
> 标签：java, swt, splash-screen

我的 SWT 编写的应用程序中有一些闪屏。其中一些提供反馈，一些提供用户控件。

我需要以不同的顺序显示这些闪屏。

例如：

1.  徽标闪屏
2.  正在连接...屏幕
3.  登录用户控件屏幕
4.  登录...屏幕

等等

**问题：**

管理屏幕的常用方法是什么。是否有一种设计模式可以有效地显示新屏幕/隐藏所有以前的屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:06:53.950

如果您希望一次只显示一个窗口，SWT`StackLayout`可能是您的正确选择。基本上，所有屏幕都在一个窗口内，而 StackLayout 只显示其中一个。

# javascript - 切片与主干.js 源代码中的普通参考

> ID：12777055
> 
> 赞同：1
> 
> 时间：2012-10-08T07:23:00.690
> 
> 标签：javascript, backbone.js

在 Backbone.js 源代码（Collection - "add" 方法）中，有以下行：

```
add: function(models, options) {
  ...
  models = _.isArray(models) ? models.slice() : [models]; 
```

为什么作者要复制数组而不是仅仅

```
add: function(models, options) {
  ...
  models = _.isArray(models) ? models : [models]; 
```

非常感谢
沃尔夫冈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:36:12.253

它用于通过更改传递给代码中其他地方的集合构造函数的数组来防止意外的集合修改 - 似乎不太可能，但如果发生这种情况，调试将是一场噩梦。

由于数组是作为引用传递的——在一个地方改变它也会改变集合上的模型数组，但是由于它会发生在集合逻辑之外，集合等的长度不会改变，删除模型事件也不会触发

# java - 如何将实例变量传递给 Quartz 作业？

> ID：12777057
> 
> 赞同：30
> 
> 时间：2012-10-08T07:23:02.573
> 
> 标签：java, quartz-scheduler

我想知道如何在 Quartz 中从外部传递实例变量？

下面是我想写的伪代码。如何将 externalInstance 传递给此作业？

```
public class SimpleJob implements Job {
        @Override
        public void execute(JobExecutionContext context)
                throws JobExecutionException {

            float avg = externalInstance.calculateAvg();
        }
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-08T13:23:25.107

您可以将您的实例放在 schedulerContext 中。当您要安排作业时，在此之前您可以执行以下操作：

```
getScheduler().getContext().put("externalInstance", externalInstance); 
```

您的工作类别如下所示：

```
public class SimpleJob implements Job {
    @Override
    public void execute(JobExecutionContext context)
            throws JobExecutionException {
        SchedulerContext schedulerContext = null;
        try {
            schedulerContext = context.getScheduler().getContext();
        } catch (SchedulerException e1) {
            e1.printStackTrace();
        }
        ExternalInstance externalInstance =
            (ExternalInstance) schedulerContext.get("externalInstance");

        float avg = externalInstance.calculateAvg();
    }
} 
```

如果您使用的是 Spring，您实际上可以使用 Spring 的支持来注入整个 applicationContext，就像在[链接中回答的那样](https://stackoverflow.com/questions/12707383/data-retrival-using-quartz "关联")

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-08T07:37:44.153

在使用触发器调度作业时，您将定义`JobDataMap`添加到`JobDetail`. 该 JobDetail 对象将出现在`JobExecutionContext`传递给`execute()`您的`Job`. 因此，您应该想办法通过`JobDataMap`. HTH。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-07T13:49:04.290

将对象添加到 JobDataMap：

```
JobDetail job = JobBuilder.newJob(MyJobClass.class)
                          .withIdentity("MyIdentity",
                                        "MyGroup")
                          .build();
job.getJobDataMap()
   .put("MyObject",
        myObject); 
```

从 JobDataMap 访问数据：

```
var myObject = (MyObjectClass) context.getJobDetail()
                                      .getJobDataMap()
                                      .get("carrier"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-13T10:38:26.243

通过创建一个界面并在其中`HashMap`放置所需信息来解决此问题。

在你的 Quartz`Job`类中实现这个接口，这个信息将是可访问的。

在`IFace`

```
Map<JobKey,Object> map = new HashMap<>(); 
```

在`Job`

```
map.get(context.getJobDetail().getKey()) =>  will give you Object 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-11T13:00:02.077

Quartz 有一种使用 setter 从 JobDataMap grep 参数的简单方法

我正在使用 Quartz 2.3，我只是使用 setter 来获取传递的实例对象

例如我创建了这个类

```
public class Data implements Serializable {
    @JsonProperty("text")
    private String text;

    @JsonCreator
    public Data(@JsonProperty("b") String text) {this.text = text;}

    public String getText() {return text;}
} 
```

然后我创建了这个类的一个实例并将它放在 JobDataMap 中

```
JobDataMap jobDataMap = new JobDataMap();
jobDataMap.put("data", new Data(1, "One!"));
JobDetail job = newJob(HelloJob.class)
                .withIdentity("myJob", "group")
                .withDescription("bla bla bla")
                .usingJobData(jobDataMap) // <!!!
                .build(); 
```

我的工作课看起来像这样

```
public class HelloJob implements Job {
    Data data;

    public HelloJob() {}

    public void execute(JobExecutionContext context)
            throws JobExecutionException
    {
        String text = data.getText();
        System.out.println(text);
    }

    public void setData(Data data) {this.data = data;}
} 
```

*   注意：字段和setter必须匹配key

`One!`此代码将在您安排作业时打印。

就是这样，干净高效

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-31T13:23:18.597

这是 的责任`JobFactory`。默认`PropertySettingJobFactory`实现将根据在 schdeuler 上下文、触发器和作业详细信息中找到的属性调用任何 bean-setter 方法。因此，只要您实施了适当的`setContext()`setter 方法，您就应该能够执行以下任何操作：

```
scheduler.getContext().put("context", context); 
```

或者

```
Trigger trigger = TriggerBuilder.newTrigger()
  ...
  .usingJobData("context", context)
  .build() 
```

或者

```
JobDetail job = JobBuilder.newJob(SimpleJob.class)
  ...
  .usingJobData("context", context)
  .build() 
```

或者，如果这还不够，您可以提供自己的`JobFactory`类来实例化 Job 对象，但您可以随意。

# objective-c - 在目标 C 中从 url 播放 youtube 电影

> ID：12777061
> 
> 赞同：0
> 
> 时间：2012-10-08T07:23:27.830
> 
> 标签：objective-c, ios, uitableview, video

我有一个包含 youtube 网址的表格视图。

```
http://www.youtube.com/v/M67PNWvKdg0&autoplay=1 
```

我正在尝试使用以下代码播放视频文件。我还导入了媒体框架。

```
 Video *video = [self.fetchedResultsController objectAtIndexPath:indexPath];
        NSURL *urlString=[NSURL URLWithString:video.url];
        //NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                             //pathForResource:@"Video1" ofType:@"mp4"]];

        MPMoviePlayerViewController *playercontroller = [[MPMoviePlayerViewController alloc]
                                                         initWithContentURL:urlString];

        [self presentMoviePlayerViewControllerAnimated:playercontroller];

        playercontroller.moviePlayer.movieSourceType = MPMovieSourceTypeFile;

        [playercontroller.moviePlayer play];

        playercontroller = nil; 
```

它现在所做的是弹出一个电影播放器​​，然后立即返回到我的桌面视图。有谁知道问题是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:56:15.293

您无法通过媒体播放器播放 youtube 视频。您只有两种解决方案：通过外部应用程序打开链接（只需打开它，iOS 将运行 Safari 或 YouTube.app，如果已安装），或者您可以使用 UIWebView 实现自己的视图并在 WebView 中打开链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T07:59:57.087

你在 iOS 6 上工作吗？我发现通过 MPMoviePlayerController 播放 Youtube 视频有困难，所以我发现[这](http://www.cocoacontrols.com/controls/lbyoutubeview)非常有用。

这只有 MPMoviePlayerController ......这也适用于版本 < iOS 6。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:31:39.293

可能这个[链接](https://stackoverflow.com/questions/5117617/embedding-youtube-videos-on-ios)会帮助你，还有一件事是视频只能在设备上播放，不能在模拟器上测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T02:35:24.033

还有另一种方法，但你必须有点冒险。您可以使用第三方 rtsp 框架，其中有几个。

然后你需要链接到 m.youtube.com，这是 rtsp 版本的 youtube，Android 和其他手机可以让你访问。

如果您尝试在 iphone 上的 safari 中打开此链接，页面将重定向到 h264 链接。您可以在 uitableview 中打开 url 并更改用户代理标签。或者简单地将您想要的链接复制到表格中。

现在是否所有 youtube 视频都自动转换为 h264，有一次我记得它们是 rtsp 页面的子集。

如果您有 Android 设备，您可以很容易地在 web 视图中访问此页面。

在这里检查这个链接。

[http://streammore-tv.tumblr.com/post/34794206547/welcome](http://streammore-tv.tumblr.com/post/34794206547/welcome)

# c# - 检查 RegistryKey 编辑的权限

> ID：12777068
> 
> 赞同：0
> 
> 时间：2012-10-08T07:24:15.740
> 
> 标签：c#, .net

> **可能重复：**
> [检查注册表权限而不抛出异常](https://stackoverflow.com/questions/1431783/check-registry-permission-without-throwing-exception)

检查 RegistryKey 编辑的权限如何更正确？现在我写这样的代码：

```
RegistryKey regKey = null;
try {
    regKey = Registry.LocalMachine.OpenSubKey("Software", true);
}
catch (SecurityException ex) {
    Console.WriteLine("SecurityException: {0}", ex.Message);
}
catch (Exception ex) {
    Console.WriteLine("Exception: {0}", ex.Message);
}
if (null == regKey)
    Console.WriteLine("Registry key not exists, or you have not necessary permission for edit it.");
else
    Console.WriteLine("Registry key successfully opened. You have necessary permission for edit it."); 
```

但是异常对性能影响非常大。我可以在没有 try/catch 的情况下检查它吗？

最好的问候，安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:06:55.343

您应该仅在初始化时阅读注册表设置。不要在每种方法中读取注册表设置。那么异常的性能损失应该不会显着影响整个程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:35:01.483

你检查过 RegistryPermission 类吗？在进行任何注册表操作之前，您应该调查您是否真的拥有该权限。就像是：

```
 try
    {
        var permission = new RegistryPermission(RegistryPermissionAccess.Read, @"PATH\TO\YOUR\KEY");
        permission.Demand();

// your code here

    }
    catch (System.Security.SecurityException ex)
    {
        // Handle exc
    } 
```

成功后您将继续，但是，如果缺少权限，则会发生异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T07:58:22.797

> 但是异常对性能影响非常大。

你有没有分析过？除了一个非常人为的情况之外，我无法想象任何其他的情况。

# c# - 自定义代码的自定义文件夹

> ID：12777072
> 
> 赞同：1
> 
> 时间：2012-10-08T07:24:53.093
> 
> 标签：c#, asp.net, .net, webforms

我们正在对我们的应用程序进行重组，目前的想法是将代码分解为核心库代码 + 为我们的开发人员定制的代码。

我正在考虑有一个默认为空的文件夹（即“自定义”）的可能性，当开发人员需要从现有的 asp 页面或新页面自定义任何代码时，他们只需将它们放入文件夹中它会起作用。例子：

可以说核心文件夹存储默认的asp页面。

```
core\customer\createCustomer.asp <-- the default page 
```

而当开发者想要覆盖该页面时，他需要将该asp页面复制到自定义文件夹中，例如

```
custom\customer\createCustomer.asp <-- modified asp page 
```

应用程序将自动加载自定义文件夹中的那个，而不是核心文件夹中的那个。

这在 C# 中可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:47:57.380

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ff649096.aspx)解释了如何使用`IHttpModule`实现来拦截 HTTP 请求并执行自定义操作（它们指出了日志记录，但是由于您正在拦截请求，因此您不妨获取一些不同的内容，例如您的“自定义”代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:39:10.613

您可以使用[VirtualPathProvider](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx)加载与“实际请求的文件”不同的文件。例如，这也适用于 IIS 和缓存。

基本上，您继承`VirtualPathProvider`并覆盖`FileExists`,`GetFile`和`DirectoryExists`,`GetDirectory`方法（链接页面中有一个示例）。然后，在您的 AppInitialize 中，注册提供程序

```
HostingEnvironment.RegisterVirtualPathProvider(sampleProvider); 
```

顺便说一句，不要忘记有一个不同的（不可编辑的）页面，以便用户可以恢复所做的任何更改，以恢复可以说的潜在错误编辑。我可能会有一个简单的版本控制系统，并在用户进行更改时使用提交，并允许用户恢复到以前的变更集。

# .net - Opera 和 BlackBerry 上的 ADFS 不起作用？

> ID：12777075
> 
> 赞同：1
> 
> 时间：2012-10-08T07:24:59.947
> 
> 标签：.net, opera, single-sign-on, adfs

是否可以让 ADFS 在 Opera 和/或 Blackberry 上运行。我收到错误：

> 您的客户端无法进行基本身份验证，或者您提供了错误的用户名或密码。

在 Firefox/Chrome/Android/IE 上一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T14:43:06.847

[根据http://technet.microsoft.com/en-us/library/ff678034(v=WS.10).aspx，Opera/Blackberry](http://technet.microsoft.com/en-us/library/ff678034(v=WS.10).aspx)未列为经过测试的浏览器

但是，一种选择是通过使表单成为首选处理程序来强制每个人使用基于表单的身份验证。此方法应允许任何浏览器支持 AD FS。

你最终会编辑 web.config 如下所示

```
<localAuthenticationTypes>
  <add name="Forms" page="FormsSignIn.aspx" />
</localAuthenticationTypes> 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ee895365.aspx 。](http://msdn.microsoft.com/en-us/library/ee895365.aspx)

然而，这意味着对于可能使用 AD FS 服务器的任何公司网络计算机都没有集成身份验证。

# windows - 获取用户信息的 Windows 批处理命令

> ID：12777081
> 
> 赞同：0
> 
> 时间：2012-10-08T07:25:43.203
> 
> 标签：windows, batch-file

我想使用批处理检索用户信息。我需要的是用户所属的组和该用户的安全设置的信息。我找不到任何可以帮助我实现这一目标的命令。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:55:00.230

您可以解析来自`net user /domain <user>`或`gpresult /r`命令的输出。

# git - POSIX 文件“。” 作为别名导致“CFURLGetFSRef 已通过此 URL，它没有方案”警告

> ID：12777082
> 
> 赞同：6
> 
> 时间：2012-10-08T07:25:46.417
> 
> 标签：git, merge, applescript, araxis

我正在使用 Araxis 提供的 applescripts，以便我可以使用 Merge 来处理我的“git diff HEAD”命令。

但是，自从升级到 Mountain Lion 后，每次运行命令时，都会收到警告：

```
CFURLGetFSRef was passed this URL which has no scheme 
(the URL may not work with other CFURL routines): . 
```

在脚本中，似乎导致问题的原因是

```
set _file2 to (POSIX path of (POSIX file "." as alias)) & _file2 
```

当我硬编码路径而不是使用`"."`时，警告消失了。我已经尝试过 pre-pending `file:///`，但`POSIX path of`正在考虑将其中一个斜杠作为转义字符，因此路径变为`file:/Users/...`，然后生成一个错误，因为它具有未知的模式（因为第二个斜杠已被删除）。所以，我的问题是，获取`POSIX file`当前位置的正确方法是什么（现在，在山狮）？

**添加完整脚本**

```
#!/usr/bin/osascript
# This script is required to reorder the parameters sent by Git, so that they may be passed into the Merge Applescript API
on run args
  tell application "Araxis Merge"
    set _file1 to item 2 of args as text
    set _file2 to item 5 of args as text  

    if not _file1 starts with "/"
      set _file1 to (POSIX path of (POSIX file "." as alias)) & _file1
    end if

    if not _file2 starts with "/"
      set _file2 to (POSIX path of (POSIX file "." as alias)) & _file2
    end if

    set _document to compare {_file1, _file2}

    tell _document
      activate
    end tell
    repeat while exists _document
      delay 1
    end repeat
  end tell
end run 
```

**工作解决方案**（*感谢@adayzdone*）

```
#!/usr/bin/osascript
# This script is required to reorder the parameters sent by Git, so that they may be passed into the Merge Applescript API
on run args
  tell application "Araxis Merge"
    set _file1 to item 2 of args as text
    set _file2 to item 5 of args as text  

    if not _file1 starts with "/"
      set _file1 to (POSIX path of (POSIX file (do shell script "pwd") as alias)) & _file1
    end if

    if not _file2 starts with "/"
      set _file2 to (POSIX path of (POSIX file (do shell script "pwd") as alias)) & _file2
    end if

    set _document to compare {_file1, _file2}

    tell _document
      activate
    end tell
    repeat while exists _document
      delay 1
    end repeat
  end tell
end run 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T08:56:34.757

osascript 每次在 10.8 上将[相对路径转换为别名](https://stackoverflow.com/questions/11902524/applescript-posix-filenames-and-mountain-lion)时都会显示警告。

```
$ touch test.txt
$ osascript -e 'POSIX file "test.txt" as alias'
2012-12-19 09:43:49.300 osascript[16581:707] CFURLGetFSRef was passed this URL which has no scheme (the URL may not work with other CFURL routines): test.txt
alias HD:private:tmp:test.txt 
```

这是转换路径的另一种方法：

```
osa() {
    osascript - "$PWD" "$@" <<'END'
on run argv
repeat with f in items 2 thru -1 of argv
if f does not start with "/" then set f to item 1 of argv & "/" & f
posix file f as alias
end
end
END
}

osa ~/Documents/ 1.txt 
```

您也可以只重定向标准错误。

```
osa() {
    osascript - "$@" <<END 2> /dev/null
on run argv
POSIX file (item 1 of argv) as alias
end
END
}
osa test.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T16:06:17.990

> 我需要的是运行命令的shell当前目录的路径

这对你有用吗？

```
set xxx to do shell script "pwd" 
```

# mysql - 查询同一个数据库时 MySQL 备份中断

> ID：12777083
> 
> 赞同：0
> 
> 时间：2012-10-08T07:25:50.067
> 
> 标签：mysql, powershell

我正在使用 Powershell 脚本进行 MySQL 备份。一切正常，但是当我查询同一个数据库时，它挂断了。如何在备份进行时锁定数据库？

**&cmd /c $MySQL_Dump_Path -h $mysql_server -port=$mysql_port -u $mysql_user --password=$mysql_password --routines --single-transaction --quick --no-autocommit --no-tablespaces $dbname| 输出文件 -FilePath ".\Backup\$Dump" -编码 UTF8**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:31:37.820

您可以在转储期间添加 --lock-tables 或真正的暴力方式 --lock-all-tables。

见[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_lock-all-tables](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_lock-all-tables)

编辑：但是只要转储正在运行，这就会锁定对系统的查询调用。

# cordova - 无法使用 PhoneGap 在 Windows Phone 中加载 jQuery 移动模板

> ID：12777084
> 
> 赞同：0
> 
> 时间：2012-10-08T07:25:50.783
> 
> 标签：cordova, jquery-mobile, windows-phone, templating

我有一个使用 PhoneGap 开发的移动应用程序。我正在使用 jQuery 移动模板。该应用程序适用于 iOS 和 Android。在 WP7.5 中，如果我通过 Internet Explorer 导航到网页，应用程序运行正常，没有问题。

但是当我在 PhoneBuilder 中构建 xap 并将其部署到我的 WP7.5 时，我使用的所有模板都不起作用。在屏幕上我可以看到：“无法加载模板页脚。HTTP 状态代码：0”。

我是否必须做一些特别的事情才能看到模板？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:20:57.827

请检查我在这里给出的答案[jQuery Mobile - 使用 PhoneGap 和 WP7.5 加载页面时出错 - 安全问题？](https://stackoverflow.com/questions/8237595/jquery-mobile-error-loading-pages-using-phonegap-and-wp7-5-issue-with-securi/12620460#12620460)因为这可能是您正在经历的。

解决方案是在属性对话框中将您的额外文件标记为“内容”，重新构建并重新部署，然后一切正常。

# php - 如何使用 php include 优化网站的可编辑内容？

> ID：12777087
> 
> 赞同：1
> 
> 时间：2012-10-08T07:26:03.567
> 
> 标签：php, include

我遇到了一个问题，很难以简单的方式提出这个问题。

我正在制作网站，我想优化它以减少服务器请求，并让网站在编辑方式上保持灵活性：* 我可以在其中一些“很少可编辑的内容”（徽标、菜单、背景、页脚等）* 和其他一些可以经常编辑的内容（文本区域、画廊等）

我正在考虑在小型 php 和平中完成所有这些，然后使用 php include。问题是我将不得不创建很多小文件。当网站有越来越多的文件时，这将是很多服务器请求，并且会带来很多麻烦。

有没有更好的方法来管理“很少编辑”的网站和正常内容？

如果不是，也许我可以以某种方式将至少“很少可编辑”的内容组合在一个文件中？像页眉、菜单和页脚？并将其与一个包含一起使用？

我不擅长 php，但我想如果答案很好，我会管理它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:32:55.853

在 php 脚本中使用“include”或“require”不会产生服务器请求。它仅适用于文件系统级别。如果您使用一个文件，即“index.php”并将其余文件包含在该脚本中，您将只有一个来自客户端的请求（当然，图像、javascript 等除外）。

# php - 在 WordPress 中将 mod_rewrite 规则添加到 .htaccess

> ID：12777090
> 
> 赞同：0
> 
> 时间：2012-10-08T07:26:23.077
> 
> 标签：php, mod-rewrite, wordpress

我正在尝试在不直接修改*.htaccess*文件的情况下修改 WordPress 中的 mod 重写规则。根据这个网页似乎是可能的：[Adding mod_rewrite Rules to .htaccess in WordPress](http://kovshenin.com/2009/adding-mod_rewrite-rules-to-htaccess-in-wordpress/)。我按照说明创建了一个插件，如下所示。我将文件名保存为*sample-mod-rewrite.php*。

```
/* Plugin Name: Sample Mod Rewrite  */

add_action('generate_rewrite_rules', array(&$this, 'generate_rewrite_rules'));
add_filter('mod_rewrite_rules', array(&$this, 'mod_rewrite_rules'));
function generate_rewrite_rules() {
    global $wp_rewrite;
    $non_wp_rules = array(
        'simple-redirect/?$plugin_name' => 'http://google.com',
        'one-more-redirect/?$plugin_name' => 'http://yahoo.com'
    );

    $wp_rewrite->non_wp_rules = $non_wp_rules + $wp_rewrite->non_wp_rules;
}
function mod_rewrite_rules($rules) {
    $rules = preg_replace('/^(RewriteRule ^.*+/?$)plugin_name (/)(.*) ([QSA,L])$/im', '1 3 [R=301,L]', $rules);
    return $rules;
} 
```

它应该如何工作？激活插件后，当我访问*http://siteurl/simple-redirect/?sample-mod-rewrite*或*http://siteurl/simple-redirect/?sample-mod-rewrite.php*浏览器只显示 404 错误, “找不到对象！” 我想我一定做错了什么。

该部分`array(&$this, 'generate_rewrite_rules')`看起来像传递一个类方法，但网页没有说明任何有关创建类的信息。这应该很简单。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T07:47:36.343

由于您的插件不使用类，因此您应该使用：

```
add_action('generate_rewrite_rules', 'generate_rewrite_rules');
add_filter('mod_rewrite_rules', 'mod_rewrite_rules'); 
```

中使用的正则表达式`mod_rewrite_rules`并不是真正正确的，但我不能给你一个更好的，因为我不知道你真正想要实现什么。

并且不要忘记重新生成您的`.htaccess`文件。

**编辑**：

要重新生成您的`.htaccess`文件，您只需访问您的永久链接设置。

该函数`generate_rewrite_rules`将添加以下规则`.htaccess`：

```
RewriteRule ^simple-redirect/?$plugin_name /wordpress/http://google.com [QSA,L]
RewriteRule ^one-more-redirect/?$plugin_name /wordpress/http://yahoo.com [QSA,L] 
```

而`mod_rewrite_rules`函数的目标是纠正这些规则，你可以试试：

```
$rules = preg_replace('#^(RewriteRule \^.*/\?\$)plugin_name .*(http://.*) \[QSA,L\]#mi', '$1 $2 [R=301,L]', $rules); 
```

那么规则将是：

```
RewriteRule ^simple-redirect/?$ http://google.com [R=301,L]
RewriteRule ^one-more-redirect/?$ http://yahoo.com [R=301,L] 
```

所以访问`siteurl/simple-redirect/`将重定向到`google.com`...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T16:22:27.443

我正在发布工作完整的代码。我把它包在一个班级里。

```
/* Plugin Name: Sample Mod Rewrite  */

add_action('generate_rewrite_rules', array(new custom_mod_rewrite, "generate_rewrite_rules"));

class custom_mod_rewrite {
    function __construct() {
        $this->wp_rewrite = & $GLOBALS["wp_rewrite"];
    }
    function generate_rewrite_rules() {

        $non_wp_rules = array(
            'simple-redirect/?$plugin_name' => 'http://google.com',
            'one-more-redirect/?$plugin_name' => 'http://yahoo.com'
        );

        $this->wp_rewrite->non_wp_rules = $non_wp_rules + $this->wp_rewrite->non_wp_rules;
        add_filter('mod_rewrite_rules', array(&$this, "mod_rewrite_rules"));
    }
    function mod_rewrite_rules($rules) {
        return preg_replace('#^(RewriteRule \^.*/)\?\$plugin_name .*(http://.*) \[QSA,L\]#mi', '$1 $2 [R=301,L]', $rules);
    }
} 
```

# java - 在 Java 中存储大量文件的 RGB 值

> ID：12777091
> 
> 赞同：2
> 
> 时间：2012-10-08T07:26:25.327
> 
> 标签：java, algorithm

我正在用 Java 制作照片马赛克。我有一组瓷砖。我必须处理每个图块并将其 [R,G,B] 值存储在某些数据结构中。基本上，我希望它采用以下形式：

```
for eachTile in Directory:
calculateRGB;
store in HashMap(key is image name, value is a list of R,G,B value) in the form { (image1:[R,G,B]), (image2:[R,G,B], ...} 
```

完成此操作后，我必须将目标图像分解为多个单元格。每个单元格的大小与图块的大小相同。现在，我必须处理每个单元格并计算其 RGB。在此之后，我必须将其与瓷砖进行比较以找到最佳匹配。

现在，匹配很棘手，因为我已经计算了每个单元格和每个图块之间的欧几里得度量以找到最佳匹配。因此，如果我有 n 个图块和 m 个单元格，我的算法将运行 n^2.m 次。

有没有更好的方法来做到这一点？还是我必须执行计算密集型算法来比较图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:15:42.507

您可以构建八叉树[http://en.wikipedia.org/wiki/Octree](http://en.wikipedia.org/wiki/Octree)或 KD-tree [http://en.wikipedia.org/wiki/Kd-tree](http://en.wikipedia.org/wiki/Kd-tree)，以有效地找到最近的邻居。

# jquery - 防止 Google 将特定内容编入索引

> ID：12777093
> 
> 赞同：1
> 
> 时间：2012-10-08T07:26:28.757
> 
> 标签：jquery, html

我有一些内容我想阻止谷歌索引，因为它在几个网站上重复。

我知道我可以使用`robots.tx`t 文件来执行此操作，但其 URL 上不存在内容。

让我解释一下内容：

当用户单击一个按钮`jquery.load()`时，将加载一个带有此内容的 DIV，该内容被带到页面的前面（z-index），有点像弹出窗口。主要的两部分是加入和帮助部分。

我有办法防止索引吗？

它有点像防止索引 DIV 或防止索引按钮单击。

* * *

开始的页面上没有内容...

它在一个单独的 PHP 文件中，如果用户单击链接/按钮，jquery 会请求该文件。

单击该按钮/链接后，它将加载到驻留在 DOM 中的 DIV 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:33:40.783

大多数搜索引擎在索引时不执行 javascript。所以你的延迟加载的内容不会被索引。如果您的 div 出现在 html 代码中并且稍后会变得可见，那就另当别论了。

正如 Stan 指出的（见评论），谷歌搜索索引器可以执行 javascript。但是，我无法找到适当的文档或 Google 的官方声明（如果有人应该找到，请发表评论）。因为它没有正确记录并且 Stan 的消息来源说**某些**js / AJAX 内容将被索引，所以我只能建议不要依赖动态内容的索引。没有办法预测或验证结果。

如果您希望您的内容被正确编入索引，那么正确（兼容）的方法是：

*   创建无需 javascript 即可显示内容的页面
*   创建 XML 站点地图并通过[Google 网站管理员工具提交](http://www.google.com/webmasters/tools/)

通过为您想要索引的每个内容设置单独的页面，您可以非常精细地控制哪些内容已编入索引，哪些内容未编入索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:31:50.717

所以我能从中得到什么，你不希望一个页面被谷歌索引，所以在他们的文档中有点说，但是这里有一个链接比我能更好地描述它

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=93710](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=93710)

和一些代码

```
<meta name="robots" content="noindex"> 
```

如果您将此添加到您不想编入索引的页面中，则此代码对谷歌“机器人”说不要索引此页面:-D

# unit-testing - 为什么这个 TestNG 测试通过了，尽管没有调用 mock 方法？

> ID：12777095
> 
> 赞同：0
> 
> 时间：2012-10-08T07:26:39.257
> 
> 标签：unit-testing, testing, testng, jmock

我使用 TestNG 和 jMock 进行单元测试，但是 TestNG 有问题。当我期望调用模拟对象方法时，它将测试标记为已通过，但事实并非如此！

```
public class SomeTestTest {

  Mockery mocker = new Mockery();

  SomeInterface someInterface = mocker.mock(SomeInterface.class);

  @Test
  public void testName() throws Exception {
    mocker.checking(new Expectations() {{
      oneOf(someInterface).someMethod();
    }});
  }
} 
```

这是我得到的报告

```
Custom suite
Total tests run: 1, Failures: 0, Skips: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:30:46.087

您错过了对[`Mockery.assertIsSatisfied()`](http://www.jmock.org/javadoc/2.5.1/org/jmock/Mockery.html#assertIsSatisfied%28%29).

该调用告诉 jMock您*何时*期望满足所有期望。否则，它不会知道您希望在代码中的哪一点进行验证。

[入门文章](http://www.jmock.org/getting-started.html)中也对此进行了说明。

# oracle - 免费的预言机 ERD 工具

> ID：12777115
> 
> 赞同：-1
> 
> 时间：2012-10-08T07:28:32.140
> 
> 标签：oracle, erd

有没有免费的 oracle 的 ERD 工具？特别是，我需要一些可以根据列名猜测关系的东西（所以如果在一个表中一个列被命名为 CO_ID 而在另一个表中，这应该标记为一个关系）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:30:20.317

试用 Oracle Datamodeler [http://www.oracle.com/technetwork/developer-tools/datamodeler/downloads/datamodeler-087275.html](http://www.oracle.com/technetwork/developer-tools/datamodeler/downloads/datamodeler-087275.html)

# javascript - Javascript 模块化

> ID：12777119
> 
> 赞同：1
> 
> 时间：2012-10-08T07:28:51.673
> 
> 标签：javascript, jquery, extjs, modularity

我正在研究以 Java / OSGi 模块化风格构建 Javascript 应用程序的可能性。我确信我无法真正达到 OSGi 提供的那种灵活性，但我至少需要达到以下列表：

*   将 javascript 代码拆分为模块，每个模块将放在自己的 git 存储库中
*   理想情况下，模块之间的依赖关系尽可能少，并且模块之间绝对没有循环依赖关系
*   有 2 个或更多将使用上述模块的“主要”javascript 应用程序

如果我设法设置上述内容，那么我可能希望能够将模块组织为层，例如：具有多个模块的核心层、ui 层、应用程序层。

是否有任何 javascript 库可以帮助构建上述设置？在javascript中可能有这样的事情吗？

注意：当我说 javascript 时，我实际上并不是指普通的 javascript。我将至少在 UI 部分使用像 ExtJS 或 jQuery 这样的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:37:31.970

Checkout [RequireJS](http://requirejs.org/docs/whyamd.html)一个异步模块定义的实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T14:30:01.483

由于这个问题得到了回答，javascript 现在具有类和模块的本机实现，可以为您提供所需的东西，而无需使用 3rd 方库。

js 模块允许您拥有一个模块或代码并从中导入方法（或所有内容）（有点像 python 和 ruby​​）

```
// utilities.js
function something () {
 // some great code 
}

export function util() {
  something();
}

//import a method
import {util} from "utilities.js";

// or import everything
import "utilities.js"; 
```

你可以在这里找到更多关于[es6 模块的信息](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import)

js 类是 js 中原型结构的语法糖，可以像在更传统的 OOP 语言中一样使用

```
class MyClass {
  constructor() {
    // constructor code
  }

  add() {
    // some method
  }
}

var myObject = new MyClass(); 
```

你可以在这里找到更多关于[es6 类的信息](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes)

# objective-c - UITableView reloadData 崩溃并出现错误 [__NSCFConstantString objectForKey:]

> ID：12777121
> 
> 赞同：1
> 
> 时间：2012-10-08T07:28:55.810
> 
> 标签：objective-c, ios, json, uitableview

我正在解析来自服务器的数据并在我的应用程序中显示这些数据。此数据是 JSON 数据，如下所示：

```
{"getMessages":[{"msgid":"1","message":"Hello.","dateposted":"2012-08-28"}]} 
```

那是可以发送消息的时候，但是，如果没有消息可用，JSON 将如下所示：

```
{"status":"No messages available"} 
```

在我的应用程序中，我`NSJSONSerialization`用来解析 JSON。这是我的做法：

```
if ([data length] > 0)
{
   NSDictionary *parsedData = [NSJSONSerialization JSONObjectWithData:data options
   NSJSONReadingMutableContainers error:nil];

   if (![parsedData objectForKey:@"getMessages"])
   {
      [self.messageArray addObject:@"No Messages"];
   }
   else
   {
      self.messageArray = (NSMutableArray *)[parsedData objectForKey:@"getMessages"];
   }
} 
```

可以看到，当 parsedData 没有`getMessages`key 时，会添加`No Messages`in `self.messageArray`，但如果有 key ，则会添加与其相关的值。

`self.messageArray`是我用来填充`messageTable`. 在下载的最后，我把代码`[messageTable reloadData]`.

问题是这样的：如果 parsedData 包含 key ，则重新加载表有效`getMessages`。但是，如果未找到密钥，则重新加载表会崩溃。

这是我的`tableView:cellForRowAtIndexPath`方法：

```
NSString *tableIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:tableIdentifier];

if (cell == nil)
    cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:tableIdentifier] autorelease];
if (tableView == messageTable) //I do this since there is another table I am using
{
    NSString *string = [NSString stringWithFormat:@"%@", [self.messageArray objectAtIndex:0]];

    if ([string isEqualToString:@"No Messages"])
    {
        cell.textLabel.text = string;
    }
    else
    {
        NSDictionary *dict = [self.messageArray objectAtIndex:indexPath.row];
        cell.textLabel.text = [NSString stringWithFormat:@"%@", [dict objectForKey:@"message"]];
    }
} 
```

在`messageTable`中，我首先检查 的第一个索引`self.messageArray`是否等于字符串“No Messages”，这是为了让用户知道无法检索到任何消息。如果字符串不相等，它将假设数组中的数据是一个字典，因此，它将被解析以显示消息。

在使用断点和日志之后，我意识到在**重新加载**表时会发生崩溃。我在方法的开头插入了一个断点和一个日志，`tableView:cellForRowAtIndexPath`但它甚至没有到达那里。我尝试检查的内容，`self.messageArray`它确实包含“无消息”。

崩溃告诉我这个错误：`[__NSCFConstantString objectForKey:]: unrecognized selector sent to instance 0x10ed84`

我知道这个错误告诉我我正在调用`objectForKey`NSString 中的方法，但我真的不知道为什么。有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:53:12.753

尝试这个

```
[self.messageArray removeAllObjects];
[self.messageArray addObject:[parsedData setObject:@"No Messages" forKey:@"getMessages"]]; 
```

大多数情况下字典没有设置键..只需检查..

还，

```
NSDictionary *diction = [self.messageArray objectAtIndex:0];
NSString *string = [NSString stringWithFormat:@"%@", [diction objectForKey:@"getMessages"]]; 
if ([string isEqualToString:@"No Messages"])
{
    cell.textLabel.text = string;
}
else
{
    NSDictionary *dict = [self.messageArray objectAtIndex:indexPath.row];
    cell.textLabel.text = [NSString stringWithFormat:@"%@", [dict objectForKey:@"message"]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:40:14.017

首先**确保**messageArray被定义为**NSMutableArray ...如果你****不时**重新加载你的 parsedData 然后试试这个

 **```
if (![parsedData objectForKey:@"getMessages"])
{
    [self.messageArray removeAllObjects];
    [self.messageArray addObject:@"No Messages"];
}
else
{
    [self.messageArray removeAllObjects];
    self.messageArray = [[parsedData objectForKey:@"getMessages"] mutableCopy];
} 
```**

# alignment - Access 2007 中的控件自动对齐

> ID：12777130
> 
> 赞同：0
> 
> 时间：2012-10-08T07:29:38.113
> 
> 标签：alignment, ms-access-2007

我在 Access 2007 中创建了一个显示联系人数据和个人数据的表单。此数据在后端分离，也应在前端分离。所以我创建了一个带有两个选项卡的选项卡控件。如果用户单击联系人，则应显示数据电话、传真和电子邮件。如果用户单击数据，则应显示标题、名字和姓氏并与左侧对齐。

![带有数据的选项卡控件](../Images/049d8dce5cb997d531e8c0bfc053ccf8.png)

现在的问题是，当我在 vba 中将电话、传真和电子邮件的可见性设置为 false 并将宽度设置为“0”时，元素标题、名字和姓氏仍保留在右侧。如何设置表单中元素的对齐方式，以便它们与左侧对齐（在元素电话、传真和电子邮件之前的位置）？

另外，当我在设计模式下拖动它们时，我希望它们不在同一个地方。在其他形式中，行为是这样的，这意味着当我将一个元素拖到另一个元素上时，它们并排排列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:31:26.587

答案很简单：您可以将文本框的布局设置为“表格”。然后生成一个额外的标题，例如，您可以将其布局为图片上的标题。因为文本框现在是表格，它们会自动与您在属性“水平锚点”和“垂直锚点”中放置的方向对齐。

# php - 如何避免多系统进入

> ID：12777134
> 
> 赞同：0
> 
> 时间：2012-10-08T07:29:55.760
> 
> 标签：php, mysql

`yy-dd-auto-increment`我需要以类似值的形式显示和插入具有 SQL 自动递增数的随机数。

我的问题是，如果我一次使用两个系统插入详细信息，那么它会插入相同的自动增量。

# coding-style - 一些编程语言条件表达式中的编码风格

> ID：12777135
> 
> 赞同：1
> 
> 时间：2012-10-08T07:30:02.470
> 
> 标签：coding-style, conditional-statements

对于下面这些条件表达式之间的区别，我有点困惑：

```
if( 1 == a) { 
   //something
} 
```

和

```
if( a == 1 ) {
   //something
} 
```

我在我下载的一些脚本中看到了上面的那个，我想知道它们之间有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:32:00.857

该`constant == variable`语法通常用于避免错误输入`==`为`=`. 当然，当你有`constant == function_call_retuning_nothing_modifiable`.

除此之外没有区别，除非您有一些奇怪的运算符覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T07:35:13.373

许多编程语言允许将赋值`a = 1`用作表达式，从而使以下代码在语法上有效（假设整数可用于条件，例如在 C 或许多脚本语言中）：

```
if (a = 1) {
    // something
} 
```

这是很少需要的，并且可能导致意外行为。如果`1 == a`使用，则不会发生此错误，因为`1 = a`它是无效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T07:37:54.120

好吧，我不确定这个技巧。一般来说，我们可以说等号是可交换的。因此，a = b 意味着 b = a。但是，当您有 == 或 === 时，这在某些情况下不起作用，例如当您在右侧有一个范围时：5 === (1..10) vs. (1..10) === 5。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T08:38:57.940

前者被创造了一个[尤达条件](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)。

使用 if(constant == variable) 而不是 if(variable == constant)，例如 if(1 == a)。因为这就像说“如果天空是蓝色的”或“如果男人是高的”。

# nhibernate - 如何使用 NHibernate 中的同一列映射 3 个引用？

> ID：12777141
> 
> 赞同：1
> 
> 时间：2012-10-08T07:30:52.393
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有以下票务类：

```
public class Ticket {
  public virtual int Id { get; set; }
  public virtual Type Type { get; set; }
  public virtual Status Status { get; set; }
  public virtual State State { get; set; }
} 
```

映射到具有以下映射的旧数据库中的表：

```
public TicketMap()
{
    Table("TICKET");
    LazyLoad();
    Id(x => x.Id)
        .GeneratedBy.TriggerIdentity()
        .Column("ID")
        .Access.Property()
        .Not.Nullable();
    References(x => x.Type)
        .Class<Type>()
        .Cascade.None()
        .LazyLoad()
        .Columns("TYPE_ID");
    References(x => x.Status)
        .Class<Status>()
        .Cascade.None()
        .Columns("STATUS_ID", "TYPE_ID");
    References(x => x.State)
        .Class<State>()
        .Cascade.None()
        .LazyLoad()
        .Columns("STATE_ID", "TYPE_ID");
} 
```

问题是当我尝试保存带有状态和状态的票证时，NHibernate 不知道要使用哪个 TYPE_ID 并且无法保存实体。

State 和 Status 类都有复合键（我知道这是一种不好的做法，但如上所述，它是旧数据库，我无法创建代理键）。

我有办法让这个参考工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:33:47.077

一种可能的方法是将这些属性设为只读。在 xml 配置中（xml 映射是我所知道的世界）它看起来像这样（其他两种 ref 类型相同：Type、State）：

```
<many-to-one name="Status" insert="false" update="false" >
  <column name="STATUS_ID" />
  <column name="TYPE_ID" />
</many-to-one>
... 
```

然后创建受保护的人工属性

```
<property name="StatusId" column="STATUS_ID" insert="true" update="true" />
<property name="StateId" column="STATE_ID" /><!-- above insert and update attr are redundant -->
<property name="TypeId" column="TYPE_ID" /> 
```

这些属性应在 Ticket 实体上声明为受保护。通过一些内部逻辑，它们可以根据选定的状态、状态或类型设置为适当的值。

我们得到的是对查询引擎的完全访问权限，因为所有 3 种引用类型都可以用于过滤。并且插入/更新也可以工作，因为 NHibernate 完全知道要使用哪个值。

# excel - 使用 axapta X++ 在 Excel 中旋转文本

> ID：12777147
> 
> 赞同：1
> 
> 时间：2012-10-08T07:31:15.433
> 
> 标签：excel, axapta, dynamics-ax-2009

我需要按以下方式在 Excel 中显示 Axapta 的输出。 ![Excel 视图](../Images/0f8100a906905c43796597ca31b70623.png)

请协助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:45:38.300

我在我的基础 Excel 类中添加了以下方法，并且能够获得解决方案。

```
public void setCellProperty(int _r1, int _c1,int _r2, int _c2,
       int _orientation = 0,
       int _horizontalAlignment = 1,
       int _verticalAlignment = 1,
       boolean _wrapText = False,  
       boolean _addIndent = False,
       int     _indentLevel = 0,
       boolean _shrinkToFit = False,
       int     _readingOrder = 0, 
       boolean _mergeCells = False)
{
    COM cell1,cell2;
    str range;
    ;
    cell1        = null;
    cell2        = null;
    cell1 = worksheet.cells();
    this.variant2COM(cell1, cell1.item(_r1,_c1));
    cell2 = worksheet.cells();
    this.variant2COM(cell2, cell2.item(_r2,_c2));
    range   =strfmt("%1:%2",cell1.address(),cell2.address());
    cellRange   =worksheet.Range(range);
    cellRange.Mergecells(_mergeCells); 
    cellRange.IndentLevel(_indentLevel);
    cellRange.AddIndent(_addIndent);
    cellRange.Orientation(_orientation);
    cellRange.VerticalAlignment(_verticalAlignment);
    cellRange.HorizontalAlignment(_horizontalAlignment);
} 
```

变量`_orientation`决定倾斜度，对于上述情况，通过`orientation=90`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:42:40.777

请参阅[此博客](http://www.dynamics-blog.com/2011/05/exporting-data-to-excel-from-axapta-x.html)以了解如何导出到 Excel。

“旋转文本”是一个文本格式选项，[其他人](http://forums.devx.com/showthread.php?122610-Rotate-text-box&s=3708ee48768160b6fb17643d2ea93230)也在[苦苦挣扎](https://stackoverflow.com/questions/6059666/how-to-rotate-text-in-excel-spreadsheet-cell-using-openxml-and-c-sharp)。它归结为是否有一个 Excel API，它可以做到这一点。

对不起，我不能再帮你了。

# java - 根据 Jtextfield 输入从 Jtable 中选择一行

> ID：12777148
> 
> 赞同：0
> 
> 时间：2012-10-08T07:31:15.713
> 
> 标签：java, swing, jtable, jtextfield

我有一个 JTable 以这种格式显示内容：

```
Part Number    Quantity   Price
SD1131            7       1,000
SD6534            6       2,000 
```

在同一帧上，我有一个 JTextfield(txtNo)。我需要这样当用户在 JTextfield 上键入零件号时，在 JTable 上选择相应的记录。到目前为止，我只能根据这样的行号选择记录：

```
txtNo.addFocusListener(new FocusAdapter() {
            public void focusLost(FocusEvent e) {

                int index1 = 0;
                int index2 = 0;
                try {
                    index1 = Integer.valueOf(txtNo.getText());
                    tbStore.setRowSelectionInterval(index2, index1);
                } catch (Exception ae) {
                    ae.printStackTrace();
                }
            }
        }); 
```

如何根据 JTextfield 的输入实现相同的方法来选择 JTable 行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T08:43:20.147

您需要在表格中找到部件号等于在文本字段中输入的部件号的项目。采取的步骤：

*   阅读文本字段的内容
*   搜索匹配元素的索引`TableModel`
*   `JTable`使用该方法将该索引转换为相应的行索引`convertRowIndexToView`（考虑排序，过滤，...）
*   使用 的`setRowSelectionInterval`方法`JTable`选择该行

作为替代方案，您可以使用`JXTable`内置搜索功能的 SwingX 项目。SwingX 库还包括一个组件，它允许搜索这样的`JXTable`（参见`JXSearchPanel`和`JXSearchField`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T08:39:41.063

您应该询问 TableModel 并找出哪一行包含您要查找的零件号：

```
for(int i=0;i<tbStore.getRowCount();i++) {

    // 0 is for the column Part number
    if(tbStore.getValueAt(i, 0).equals(Integer.valueOf(txtNo.getText())) {
        tbStore.setRowSelectionInterval(i, i);
        break;
    }
} 
```

警告：我没有测试过这段代码，但它至少应该给你基本的想法。

# php - 表单提交不起作用

> ID：12777149
> 
> 赞同：0
> 
> 时间：2012-10-08T07:31:18.770
> 
> 标签：php, templates, symfony1, form-submit

我在提交表单时遇到问题我正在使用带有 symfony 1.1 的 html5，

**我的代码片段**

```
<?php echo form_tag('module_name/AcitonName',array('name' =>'abc', 'id'=>'xyz')) ?> 
    <!-- some fields -->
    <input type="submit" value="submit"  data-theme="b" id="form-sub">
<?php echo '</form>' ?> 
```

我在模板文件中有这段代码，但是当我提交时什么都没有发生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T07:33:15.887

如果这是问题所在，则可能是您没有`</form>`在浏览器中回显您的内容。利用

```
<?php echo '</form>'; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:35:20.767

你错过了一个分号：

```
<?php echo '</form>'; ?> 
```

如果这只是一个错字而不是实际问题，那么您的开始`<form>`标签是什么样的？

# android - Android - 使用 itext 在 pdf 上绘制文本

> ID：12777150
> 
> 赞同：1
> 
> 时间：2012-10-08T07:31:20.160
> 
> 标签：android, pdf

在我的申请中，我展示了一份 pdf 的考试表格，用户可以在该 pdf 上回答。

这就像在线填写表格一样。用户可以在相应问题前面的 pdf 上回答。

当用户回答时，我如何在该 pdf 上绘制答案文本？

谁能帮帮我？我怎样才能做到这一点 ？任何链接？

谢谢。

# gwt - GWT 属性文件配置

> ID：12777151
> 
> 赞同：1
> 
> 时间：2012-10-08T07:31:22.687
> 
> 标签：gwt, gxt

我是 GWT 的新手，面临一个问题。

我们如何在启动时获得用于初始配置的 .properties 文件。我想在 GWT App 中创建一个。

此外，GWT 有客户端和服务器包。

我想在客户端包中设置配置，因为所有配置都属于客户端。

我的实际需要，

我有一个 textArea 只占用固定数量的字符，长度在我的属性文件中定义，如下所示。

所以我必须阅读一个属性文件进行验证。

我的属性

```
smsConstraintEnabled=true
smsConstraintCharLimit=160 
```

我发现很少有链接，但都在谈论关于语言环境的属性文件，我在语言环境方面没有任何需要，但需要简单的键值配置。

我希望在启动时或在入口点本身加载此文件，然后我可以在任何客户端包类中使用它进行验证。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T07:48:30.167

使用`Constants`接口。它是在考虑 I18N 的情况下构建的，但在这种情况下也可以正常工作，在这种情况下，您可以为单个语言环境提供常量值，即默认值（因此用于编译应用程序的每个语言环境）。

然而，这意味着文件是在编译时*读取*的，而不是在运行时读取的（即，每次更改属性文件时都必须重新编译应用程序）。

如果您想要更*动态*的东西，请在服务器端读取文件并将信息传递给客户端。最简单且开销最小的方法是使用*[动态主机页面](https://developers.google.com/web-toolkit/articles/dynamic_host_page)*。要*读取*客户端代码中的值，请使用`Dictionary`(and `Integer.parseInt`et al.) 或使用[JSNI](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)（可能使用[覆盖类型](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay)）。

# matlab - 如何从图像中删除背景而不在MATLAB中匹配背景

> ID：12777152
> 
> 赞同：-2
> 
> 时间：2012-10-08T07:31:32.970
> 
> 标签：matlab, background

如何在不匹配背景的情况下从图像中删除背景。例如，如果我想从下面的图像中删除背景，则不应给出删除背景示例背景图像。 ![在此处输入图像描述](../Images/123e9c3fa71cd3e15327fd08abec2f21.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T07:45:30.347

我认为这个问题没有简单的答案。首先，您应该找到一种方法来告诉 Matlab 背景是什么。阅读[分割](http://en.wikipedia.org/wiki/Segmentation_%28image_processing%29)（将图像分成连贯的部分）。

通常，您将对不同类型的图像使用不同的方法。例如，如果图像上总是有人脸，您可以利用人脸识别技术并通过某种边缘检测等来支持它们。

# ios - FBFriendPickerViewController 中的自定义 UITable

> ID：12777153
> 
> 赞同：0
> 
> 时间：2012-10-08T07:31:36.053
> 
> 标签：ios, facebook, uitableview

我想知道有没有什么办法可以完全替换FBFriendPickerViewController的UITableView或者修改当前的。我需要反转桌子上的颜色（白色标签，黑色背景），但我无法做到这一点。到目前为止，我能够替换表格的背景，但没有其他工作。

我试过类似的东西：

```
self.myFriendPicker = [[FBFriendPickerViewController alloc] init];
self.myFriendPicker.delegate = self;
[self.myFriendPicker loadData];
[self.myFriendPicker clearSelection];
self.myFriendPicker.allowsMultipleSelection = NO;
self.myFriendPicker.view.frame = CGRectMake(30, 50, 250, 340); 
```

然后我尝试创建一个带有红色背景的新 UITableView 来尝试一下，看看它是否有效。

```
 UITableView *tbView = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 100, 100) style:UITableViewStylePlain];
tbView.backgroundColor = [UIColor redColor];
self.myFriendPicker.tableView = tbView; 
```

它没有用，我会很感激一些建议。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:49:15.947

我最终实现了我自己的 fabecookfriendpicker 作为 uitableview 的子视图。显示你的朋友列表不是一个大问题，但即使这不是一个简单的任务，因为你需要延迟加载图像等等。

您有更多机会使用方法自定义视图。但是您也可以尝试子类化 FBFriendPickerViewController 本身

# wcf - 如何在 wcf rest 中为一个接口提供两个端点？

> ID：12777157
> 
> 赞同：1
> 
> 时间：2012-10-08T07:31:42.080
> 
> 标签：wcf

我正在研究 wcf rest webservices。其中一个接口有两个公共方法。我需要在 https 绑定中访问一种方法，另一种使用 http。如何在 global.asx 中为这两个绑定设置端点。请告诉我。

我的 globlal.asx 声明如下：

```
 RouteTable.Routes.Add(new ServiceRoute("records", new WebServiceHostFactory(), typeof(serviceclassname))); 
```

# android - Android：同一布局中的多个图像

> ID：12777160
> 
> 赞同：2
> 
> 时间：2012-10-08T07:31:57.217
> 
> 标签：android

我正在为我 2 岁的孩子设计一个简单的数字抽认卡屏幕。布局很简单，有一个标题标题，一个图像（抽认卡说 1）。当我单击图像（或屏幕上的任何位置）时，它应该转到下一个图像（抽认卡 2），依此类推，直到 10 点。我的问题 - 我需要定义 10 个布局吗？10个活动？android 编码新手 - 感谢任何帮助。

```
public void numberClick(View v) {   
        ImageView portrait = (ImageView) findViewById(R.id.numberImage);

        switch(v.getId()){
            case R.drawable.numberone:
                portrait.setImageResource(R.drawable.numbertwo);

            case R.drawable.numbertwo:
                portrait.setImageResource(R.drawable.numberthree);

        } 
```

更新代码

```
public class numberActivity extends Activity {

ImageView portrait;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.number);

portrait = (ImageView) findViewById(R.id.numberImage);

}

public void numberClick(View v) {   
    switch(v.getId()){
            case R.drawable.numberone:
                portrait.setImageResource(R.drawable.numbertwo);
                break;

            case R.drawable.numbertwo:
                portrait.setImageResource(R.drawable.numberthree);
                break;

        }

} 
```

}

但结果仍然不存在 - 图像不切换。

使用监听器更新代码

```
public class numberActivity extends Activity {

ImageView portrait;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.number);

portrait = (ImageView) findViewById(R.id.numberImage);

portrait.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {   
        switch(v.getId()){
            case R.drawable.numberone:
                portrait.setImageResource(R.drawable.numbertwo);
                break;

            case R.drawable.numbertwo:
                portrait.setImageResource(R.drawable.numberthree);
                break;

        }

}});
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:44:31.157

您可以使用一个图像视图进行简单布局的一项活动。单击只需为此图像视图设置新图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:37:37.007

Jasma 首先我很欣赏你的事业。在 Android 中，有两种方法可以做到这一点。

1.  使用意图和活动。
2.  使用现代方式（片段）

这些是在用户交互上创建新布局的可能性。您可以拥有任意数量的片段和活动。你可以在这里阅读更多关于这个[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)和这里[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# cordova - Symbian/Phonegaps-1.10 | TypeError：表达式'localStorage'[null]的结果不是对象

> ID：12777164
> 
> 赞同：0
> 
> 时间：2012-10-08T07:32:03.797
> 
> 标签：cordova, symbian, nokia-wrt

我明白了

> TypeError：表达式'localStorage'[null]的结果不是对象

当我尝试访问 Symbian/Phonegap 应用程序上的 localStorage 时，这与之前发生的错误有关：

> TypeError：表达式“window.widget.preferenceForKey”[undefined] 的结果不是函数。发生在一行中`var pref = window.widget.preferenceForKey(Storage.PREFERENCE_KEY);`

```
function Storage() {
    this.available = true;
    this.serialized = null;
    this.items = null;

    if (!window.widget) {
        this.available = false;
        return;
    }
    var pref = window.widget.preferenceForKey(Storage.PREFERENCE_KEY);

    //storage not yet created
    if (pref == "undefined" || pref == undefined) {
        this.length = 0;
        this.serialized = "({})";
        this.items = {};
        window.widget.setPreferenceForKey(this.serialized, Storage.PREFERENCE_KEY);
    } else {
        this.serialized = pref;'({"store_test": { "key": "store_test", "data": "asdfasdfs" },})';
        this.items = eval(this.serialized);
    }
} 
```

看来我需要解决本地存储我不知道该怎么做。任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:44:39.613

我自己实际上一直在努力解决这个问题。

一个简单的解决方法是避免一起使用preferenceForKey，而是使用preference。

```
<script>
    var value = "Information to be stored";
    var key = "key";
    widget.preference["key"] = value;
 </script> 
```

您可以稍后检索此信息。

```
<script>
    var value = widget.preference["key"];
    alert(value);
</script> 
```

希望这可以帮助！

# c#-4.0 - 企业库5.0新库

> ID：12777165
> 
> 赞同：3
> 
> 时间：2012-10-08T07:32:09.147
> 
> 标签：c#-4.0, enterprise-library

我正在使用企业库 5.0 建立数据库连接。设置配置文件后，我试图通过这行代码创建一个新的数据库实例：

```
 Database db = DatabaseFactory.CreateDatabase(); 
```

但我收到此错误：

尝试获取类型数据库密钥的实例时发生激活错误""

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T10:18:32.087

您需要添加对它的引用并将它们标记为在本地复制（请参阅此处如何操作：http: [//msdn.microsoft.com/en-us/library/t1zz5y8c](http://msdn.microsoft.com/en-us/library/t1zz5y8c(v=vs.90).aspx) (v=vs.90).aspx ）

# matlab - 需要详细解释“在赋值 A(I) = B 中，B 和 I 中的元素数量必须相同”

> ID：12777167
> 
> 赞同：2
> 
> 时间：2012-10-08T07:32:19.707
> 
> 标签：matlab

到目前为止，我没有任何想法来理解这个错误的意思。如果有的话，我想我可以在我的 matlab 编程中解决这个问题。

如果有人可以帮助我解释发生了什么并举个例子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T07:51:39.370

If`I`是一个逻辑矩阵

```
I = 
    1 0 1 1 0 
```

并且`A`是一个相同大小的数组，

```
A = 
    5 3 8 1 2 
```

然后

```
>> A(I) 
ans = 
    5 8 1 
```

即，`I`用作. 中元素的掩码`A`。您也可以将其用于分配：

```
>> A(I) = 4
A = 
    4 3 4 4 2 
```

（标量赋值），或

```
>> A(I) = [1 NaN 3]
A = 
    1 3 NaN 3 2 
```

（数组分配）。如果您尝试执行类似的操作，则会收到错误消息

```
>> A(I) = [ 7 6 5 4 8 7 6 8 7 9 4 3 2] 
```

即，`A(I)`指的是与`[7 6 5 4 8 7 6 8 7 9 4 3 2]`包含不同数量的元素。这*仅*在分配标量或空值时有效

```
A(I) = []      %# valid 
A(I) = 4       %# valid
A(I) = [1 2 3] %# valid, numel(A(I)) == numel([1 2 3])
A(I) = [1 2]   %# NOT VALID, numel(A(I)) != numel([1 2]) 
```

# django - 如何在模型中使用动态字段？

> ID：12777168
> 
> 赞同：0
> 
> 时间：2012-10-08T07:32:24.047
> 
> 标签：django, django-models

我想**在 django 中使用动态字段**意味着我有一个模型，它的一个模型是在另一个模型中指定的。

我希望我能通过例子向你解释。

我有一个型号名称**产品**，每次上传新产品时，我们都必须为其设置一些属性，并且在**第二张表**中指定了这些属性，这意味着在这个产品型号中，一个字段是动态的，它取决于第二张表。如果我在其他表中选择“x”，则该字段显示在此处，如果我选择“y”，则该字段将显示在此处，因此基于该产品 ID 和属性 ID，我可以在第三个表中指定属性值，以便将来我可以为指定的产品获取该值。

我已经尝试了很多，但我不知道如何在 django 中使用动态字段，所以任何人都可以让我知道如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:09:52.383

我建议您为此目的使用 django-json-field ( [https://github.com/derek-schaefer/django-json-field](https://github.com/derek-schaefer/django-json-field) )。它仅使用数据库中的一个 Text 字段，但您可以像访问 python 对象一样访问 json 中的对象：

```
json = JSONField() #in your model
json = "{'attributes':{'colour':'blue','size':'2'}, 'image-height':'200px'}" # in your db
{{product.json.attributes}} #in your template
product.json.attributes #in your views 
```

这是制作许多“django”字段的好方法，同时仅将其存储在 db 中的一个 Text 字段中。

这种方法的缺点是不能有效地使用数据库搜索字段，但是如果您有几十个产品，您可以在视图中通过python进行过滤。

# json - Catalyst 中的 Restful Web 服务

> ID：12777169
> 
> 赞同：0
> 
> 时间：2012-10-08T07:32:26.463
> 
> 标签：json, web-services, perl, rest

谁能告诉我如何在 Perl 中发送 JSON 请求以及如何在催化剂中访问 JSON 请求对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:42:49.953

要开始这个过程，我会看看这个线程：[Perl JSON::RPC::Client using LWP::Agent](https://stackoverflow.com/questions/8716904/perl-jsonrpcclient-using-lwpagent)

这提供了两种方法 json rpc，我过去使用过这个方法和使用 LWP 的定制方法，我没有尝试过类似的方法。

告诉我们你是怎么做的，最好的问候休·巴纳德

# oracle - 数字格式转换

> ID：12777170
> 
> 赞同：2
> 
> 时间：2012-10-08T07:32:31.870
> 
> 标签：oracle, plsql

我有这样的货币金额值；

```
22200000 
```

我想将此数字转换为；

```
22,2  (Number format) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T07:40:39.740

使用`to_char()`功能。例子

```
to_char(3510.78, '$9,999.00') 
```

会回来

```
 $3,510.78 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T08:05:40.917

我找到了答案：SELECT TO_CHAR (22200000 / 1000000, '999,999,999,999.99') FROM dual

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-09T20:22:54.860

您可以使用 Oracle 内置函数 round()。

> ROUND 函数接受一个数字并返回另一个四舍五入到小数点右侧指定位数的数字。如果您不指定该数字，ROUND 将返回一个四舍五入到最接近整数的数字

例如：

```
 select 1/3, round(1/3, 2) from dual;

       1/3 ROUND(1/3,2)
---------- ------------
.333333333          .33 
```

更多信息：[在 PL/SQL 中使用数字](http://www.oracle.com/technetwork/issue-archive/2011/11-nov/o61plsql-512011.html)

# c# - 如何在 C#/XAML 中的 Windows 商店应用程序中绑定多行导致单个数据绑定

> ID：12777177
> 
> 赞同：0
> 
> 时间：2012-10-08T07:33:03.140
> 
> 标签：c#, xaml, data-binding, microsoft-metro, windows-runtime

我的数据库表（名称：标签）是这样的

```
TagID       TagName
-------------------------
1       Home
2       Work
3       Office
4       Study
5       Research 
```

我有一个列表视图，它的数据模板包含两个文本块。一个是笔记名称，另一个是标签。

```
lvRecentNotes.ItemsSource = db.Query<NoteDetails>("select NoteName from NoteDetails", ""); 
```

`Note_Tag`表用于保存`NoteID`，`TagID` 现在我想要这样的单个文本块中的结果

`Home, Study, Research`

那么如何通过数据绑定来实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:42:08.537

您需要使用数据绑定值转换器。使用转换器，您可以获取行中的每个值，然后根据需要连接并返回连接后的字符串。

参考：http: [//msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)

代码示例：假设您有一个名为 Note 的模型类，它具有 Name 和 Tags 参数。

```
public class Note
{
    public string Name { get; set; }
    public string Tags { get; set; }
}

public class NoteItemConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        if (value is Note)
        {
            Note note = value as Note;

            // Return a value based on parameter (when ConverterParameter is specified)
            if (parameter != null)
            {
                string param = parameter as string;
                if (param == "name")
                {
                    return note.Name;
                }
                else if (param == "tags")
                {
                    return note.Tags;
                }
            }

            // Return both name and tags (when no parameter is specified)
            return string.Format("{0}: {1}", note.Name, note.Tags);
        }

        // Gracefully handle other types
        // Optionally, throw an exception
        return string.Empty;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        return value;
    }
} 
```

然后你可以设置你的 ItemsSource

```
ObservableCollection<Note> notes = ... // Obtain your list of notes
lvRecentNotes.ItemsSource = notes; 
```

在 XAML 中，将转换器添加为页面资源。

```
<Page.Resources>
    <local:NoteItemConverter x:Key="NoteItemConverter"/>
</Page.Resources> 
```

然后绑定到数据模板中的项目。

```
<!-- Display only the name for the note -->
<TextBlock Text="{Binding Item, Converter={StaticResource NoteItemConverter}, ConverterParameter=name}"/>

<!-- Display only the tags for the note -->
<TextBlock Text="{Binding Item, Converter={StaticResource NoteItemConverter}, ConverterParameter=tags}"/>

<!-- Display both the name and the tags for the note -->
<TextBlock Text="{Binding Item, Converter={StaticResource NoteItemConverter}}"/> 
```

请注意，“绑定项”是指列表中的每个单独元素。您需要根据数据源的定义方式对其进行必要的修改。

# ios - 通用应用的子视图

> ID：12777183
> 
> 赞同：0
> 
> 时间：2012-10-08T07:33:29.913
> 
> 标签：ios, ios-simulator, ios-universal-app, subviews

我在 iPhone 的代码集中有一个通用应用程序和子视图的框架，我看到将 iPad 模拟器放置的子视图大小相同。因此 iPad 我必须重写所有框架或是否有快捷方式？这是代码。

```
 -(void) layoutPortrait {

self.imageView= [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bar_V.png"]];
self.imageView.frame= CGRectMake(0, 0, 320, 80);
self.labelTitle.frame =CGRectMake(14, 103, 91, 54);
self.buttonFavorites.frame= CGRectMake(109, 485, 33, 33);
self.buttonHome.frame =CGRectMake(14, 485, 33, 33);
self.buttonMap.frame=CGRectMake(61, 485, 33, 33);

 }

 -(void) layoutLandscape {

self. imageView= [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bar_O.png"]];
self.imageView.frame= CGRectMake(0,0,568,65 );
self.labelTitle.frame =CGRectMake(20,92,165,48);
self.buttonFavorites.frame= CGRectMake(107,237,33,33);
self.buttonHome.frame =CGRectMake(11,237,33,33);
self.buttonMap.frame=CGRectMake(59,237,33,33);

 }

 - (void)viewDidLoad
{
[super viewDidLoad];
self.navigationController.navigationBar.hidden=YES;
// Do any additional setup after loading the view from its nib.

//orientazioni
UIInterfaceOrientation deviceOrientation= self.interfaceOrientation;

if(deviceOrientation == UIInterfaceOrientationPortrait || deviceOrientation== UIInterfaceOrientationPortraitUpsideDown) {
    [self layoutPortrait];

}
else if (deviceOrientation== UIInterfaceOrientationLandscapeRight){
    [self layoutLandscape];

}
else if (deviceOrientation==UIInterfaceOrientationLandscapeLeft){

    [self layoutLandscape];

}

[self.view addSubview:self.labelTitle];
[self.view addSubview:self.imageView];
[self.view addSubview:self.buttonFavorites];
[self.view addSubview:self.buttonHome];
[self.view addSubview:self.buttonMap];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:21:22.107

有两种方法可以解决这个问题。

首先，您可以创建特定于 iPad 和 iPhone 5 的框架。

其次，您使视图根据父视图或其他子视图自动调整大小。这是通过自动调整大小完成的。一个很好的链接，描述了这一点：[iOS 5 iPhone Rotation, View Resizing and Layout Handling](http://www.techotopia.com/index.php/IOS_5_iPhone_Rotation,_View_Resizing_and_Layout_Handling)

我注意到您的代码使用了旧的视图布局方式，即检测界面方向，然后根据该方式布局框架。更好的方法，自 iOS 6 以来被大力强调，是使用 layoutSubviews() 和同伴。

# windows-phone-7 - windows phone 7中的amr录音

> ID：12777184
> 
> 赞同：1
> 
> 时间：2012-10-08T07:33:30.113
> 
> 标签：windows-phone-7, recording, amr

如何在 windows phone 上录制和 AMR 音频剪辑？

Microphone 仅提供 PCM 样本，在写入文件之前需要将其转换为 AMR。

如何进行这种转换？如果有人有任何示例代码，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:43:35.803

我认为没有任何可用于 WP7 的库可以做到这一点。现有的 .Net 库使用本机代码或第三方库来执行转换。

因此，您可以选择实现自己的转换库（听起来像是一个不错的开源项目！），或者设置一个使用现有库执行转换的 Web 服务。

要执行第一个选项，您可能会从[OpenCode-arm](http://sourceforge.net/projects/opencore-amr/)之类的库开始，并将代码转换为 C#。有时这种转换非常简单，而有时它们可​​能非常复杂。但大多数情况下，如果您有时间，可以进行转换。

更快的替代方法是设置一个 Web 服务，您可以在其中上传返回 AMR 数据的 PCM 数据。在此服务中，您可以使用可用于 .Net 和其他平台的现有库之一。

你没有说你需要 AMR 文件做什么。如果您打算将其发送到某个地方，那么也许您可以发送 PCM 数据并在服务器端进行转换？

**编辑：**

如果您选择设置一个 Web 服务，一个简单的 shell 可以说明它的工作原理是设置一个托管转换方法的类并实现一个执行转换的公共方法：

```
[ServiceContract]
public class ConvertService
{
  [OperationContract]
  public byte[] ConvertPcmToAmr(byte[] pcmData)
  {
     // Do the conversion here and return the data
  }
} 
```

# iphone - pdf和epub笔记、书签和亮点功能

> ID：12777185
> 
> 赞同：1
> 
> 时间：2012-10-08T07:33:40.240
> 
> 标签：iphone, ios

我想开发允许用户在特定文本上创建注释的 iPhone 应用程序，用户可以为页面添加书签并保存突出显示的文本。我怎样才能做到这一点 。我知道 PSPDFKit 但它不是免费的，有人知道任何免费资源吗？或其他方式我可以做到这一点。

我已经突出显示了 pdf 和 epub 文件的文本，但是如何保存突出显示的文本以及如何为页面添加书签？

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:23:43.167

使用 core-text 来渲染文本。并检查 EGOTextView 作为突出显示的示例。

# java - 哪个代码段执行得好（在分配变量时处理内存）+ java

> ID：12777191
> 
> 赞同：0
> 
> 时间：2012-10-08T07:34:10.327
> 
> 标签：java, android, memory-management

代码示例 1：下面的代码段处理大尺寸位图..

```
 //  Here reusing same variable "bitmap"  

    // Decode the JPEG file into a Bitmap 
    Bitmap bitmap = BitmapFactory.decodeFile(photoDir.getAbsolutePath(), bmOptions);

    //Re-sizing 
    Matrix mtx = new Matrix();
    bitmap =Bitmap.createScaledBitmap(bitmap, targetW, targetH,true);
    mtx.postRotate(90);

    // Rotating Bitmap
    bitmap = Bitmap.createBitmap(bitmap, 0, 0, targetW, targetH, mtx, true);
    imgPhoto.setImageBitmap(bitmap ); 
```

代码示例 2：

```
 //Here i used different variables

    // Decode the JPEG file into a Bitmap 
    Bitmap orginalBitmap = BitmapFactory.decodeFile(photoDir.getAbsolutePath(), bmOptions);

    //Re-sizing 
    Matrix mtx = new Matrix();
    Bitmap resizedBitmap =Bitmap.createScaledBitmap(orginalBitmap , targetW, targetH,true);
    mtx.postRotate(90);

    // Rotating Bitmap
    Bitmap rotatedBitmap= Bitmap.createBitmap(resizedBitmap , 0, 0, targetW, targetH, mtx, true);

    imgPhoto.setImageBitmap(rotatedBitmap); 
```

问题：哪个代码段在内存和速度等方面更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:44:32.010

我想这些都应该是一样的，对吧？我的意思是变量存在于堆栈中，这里的堆影响会很明显。在这种情况下，3 个变量的大小可以忽略不计，就像我们以最纯粹的形式说 32 位指针 + 另一个 32 位元数据一样。3 `long`s vs 1 `long`，你无法分辨出大多数现代机器的区别（即使是最低规格的安卓手机也不应该看到明显的影响）。

如果您想要更有效地使用内存，我认为从所有这些中获得的最大收益是，如果在第二个使用 3 个单独的变量时，您可以回收旧的位图并只保留在图像视图。这将更有效地使用内存。由于`byte[]`方面的原因，位图很昂贵。这些不是随机分配，它们是连续的内存块，当您分配更多`byte[]`不同大小的内存时，它们会变得非常稀少。所以回收将在那里有很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:25:49.610

*原则上*，它不应该有任何区别。如果唯一的引用是不再实际使用的本地引用，那么一个好的 JVM 将使对象可被垃圾回收，这样您的两个代码示例的所有意图和目的都是相同的。

我想知道你是不是想发明一个不存在的理论问题？如果您实际上在实践中遇到了性能问题，那么请分析一下。如果没有，不要太担心。

# jquery - 在（动态生成的）对应表单域之间复制数据

> ID：12777192
> 
> 赞同：0
> 
> 时间：2012-10-08T07:34:11.720
> 
> 标签：jquery, forms, dynamic

**编辑：**我已经克隆了 div。我所需要的只是一个选择器，它将选择表单字段和已经克隆并具有相同类的容器。因此，有一组 Div 和 Form 字段，其中包含 Question1、Question3、Question7 等类。我需要 #div 中 Form Question1 的值是 #another div 中 div question1 的 .html() 。需要一个可以为 Question1、Question3、Question4 和所有其他存在的 Question# 类执行此操作的函数。**END EDIT** 我有一个设置，点击一个名为 Add Questions 的按钮会克隆一组表单字段，还有一组（隐藏的）空容器，如`<h2></h2>`表单字段及其对应的容器具有相同的类，但在不同的 div 中（div 具有不同的 id），并且它们是页面上唯一具有该类的字段。我需要做的是这样的事情。生成后，用户填写表格。需要使用 .html() 将这些数据填充到相应的容器（具有相同类的容器）中。像这样，但它需要对类与问题#类似的所有字段执行此操作：

```
var form = $("#divcontainer .sameclass[#]").val();
        $('#anotherdiv .sameclass[#]').html(form); 
```

动态生成的表单和容器具有诸如`"question1, question2"`etc 之类的类，但它们的顺序可能不正确并且可能会跳过数字。所以它可能是`"question1 for the first form and container and question7 for next form field and container`“
有一些通配符或我可以使用的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:39:57.867

试试这个..怎么样..不要得到确切的代码明白我的意思

```
 $("divcontainer").each(function (i) {
    var yourclass = $(this).attr("class");
    var form = $("#divcontainer " + yourclass).val();
    $("#anotherdiv  " + yourclass).html(form);
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:44:12.120

这和你要找的一样吗？

[http://jsfiddle.net/UE9Mg/](http://jsfiddle.net/UE9Mg/)

# php - 重定向到维护页面...如何选择页面

> ID：12777193
> 
> 赞同：1
> 
> 时间：2012-10-08T07:34:14.420
> 
> 标签：php, .htaccess

所以我设法将所有网址重定向到特定页面进行维护。这行得通。我的问题是我不希望所有网址都进行维护......只有两个......

当用户单击以下网址（包括子文件夹等）时，我如何重定向：

```
http://www.mysite.com/discography/
http://www.mysite.com/songbook/ 
```

这是我可以正常工作的代码（我允许我的本地主机 IP 地址和我的实时站点上的 IP 地址绕过规则）：

```
RewriteCond %{REMOTE_ADDR} !^99\.999\.99\.999
RewriteCond %{REMOTE_ADDR} !^0\.0\.0\.0
RewriteCond %{REQUEST_URI} !/maintenance.php$ [NC]
RewriteRule .* /maintenance.php [R=307,L] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T07:40:03.263

只需相应地调整`RewriteCond`与 URI 匹配的 ：

```
RewriteCond %{REQUEST_URI} ^/(discography|songbook)/ [NC] 
```

# php - 如何在 PHP 中将 $foo->bar 嵌入到字符串中

> ID：12777194
> 
> 赞同：-1
> 
> 时间：2012-10-08T07:34:15.917
> 
> 标签：php

我是 PHP 新手，

`echo "$foo->bar"`似乎按预期工作

`echo "this is {$foo->bar}"`也可以

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:36:51.580

假设您想将文本`$foo->bar`按字面意思编码为 PHP 字符串，那么您需要像这样对其进行转义：

```
"\$foo->bar" 
```

或使用单引号：

```
`$foo->bar` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T07:38:49.237

你也可以这样做：

```
echo $foo->bar; 
```

因为您正在回显一个变量，所以您不需要引号。所以你可以连接或使用双引号（就像你一样）：

```
echo 'text ' . $foo->bar . ' text';

echo "text $foo->bar text"; 
```

# web - 如何监控特定网站的带宽使用情况？

> ID：12777195
> 
> 赞同：15
> 
> 时间：2012-10-08T07:34:19.613
> 
> 标签：web, monitor, bandwidth

我想在一台计算机上安装一个应用程序来监控浏览特定网站时使用的带宽。有没有可以做到这一点的应用程序？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T07:36:30.223

例如，您可以使用 Chrome 开发工具执行此操作。还可以监控响应时间等。对于 Chrome，您可以在这里查看：[https ://developers.google.com/chrome-developer-tools/docs/network](https://developers.google.com/chrome-developer-tools/docs/network)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T07:36:07.337

你的浏览器？

如今，大多数（全部？）浏览器都带有内置的开发工具，特别是您可以查看所有网络流量的工具，包括“总”行，该行将向您显示网站在该网站上发送/接收的流量加载/使用中。

例如，在 IE > 8（可能是 9）中，按 F12，单击“网络”，单击“开始捕获”并刷新此页面。在底部，您将看到发送/接收数据的 2 个数字。在实际显示中，您将看到每个单独资源的带宽使用情况以及接收数据所花费的时间，大多数情况下您可以向下钻取并查看与抓取资源相关的各种其他信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-20T06:29:04.653

在 Firefox 中，这非常简单。

首先，加载网站，然后按`F12`。

单击`Network`并重新加载。

您将在浏览器中看到完全加载该网站所需的总数据。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-18T18:22:53.090

IE、Chrome 和 Firefox 都有很好的内置网络和性能监控工具，通过 F12 键。很好的是，您可以在以下 3 种浏览器中的任何一种中以相同的方式使用这些工具：

*按 F12，单击网络选项卡，然后单击播放按钮。*

性能选项卡也很有用。

**互联网浏览器 11**

[https://docs.microsoft.com/en-us/microsoft-edge/devtools-guide/network](https://docs.microsoft.com/en-us/microsoft-edge/devtools-guide/network)

**铬合金**

[https://developers.google.com/web/tools/chrome-devtools/network-performance/](https://developers.google.com/web/tools/chrome-devtools/network-performance/)

**火狐**

[https://developer.mozilla.org/en-US/docs/Tools/Network_Monitor](https://developer.mozilla.org/en-US/docs/Tools/Network_Monitor)

**苹果浏览器**

我手边没有 Safari，所以我无法确认 F12 是否可以工作，而是您点击 Safari 菜单，然后是首选项，然后是高级，然后选择“在菜单栏中显示开发菜单”，然后关闭/退出。

[https://developer.apple.com/safari/tools/](https://developer.apple.com/safari/tools/)

# c - 在 C 中使用 Do While 循环时出现奇怪的问题

> ID：12777200
> 
> 赞同：-1
> 
> 时间：2012-10-08T07:34:49.903
> 
> 标签：c, loops, do-while

当我尝试移动我的 Do 循环或添加另一个循环来嵌套它时，我遇到了一个奇怪的问题。我将 DO 放在您在下面看到的地方，它可以很好地循环：

```
{
    float numbers[MAX_DATA];
    printf("Please Eneter the Amount of Numbers You Would Like to Use\n");
    scanf("%d",&amount);
    if (amount>MAX_DATA)
    {
        printf("Your entry was too big");
    }
    else
    {
        input(numbers,amount);
        do
        {
            printf("\nStatistical Calculator Menu\n");
            printf("\n(1) Mean\n(2) Standard Deviation\n(3) Range\n(4) Restart/Exit\n");
            scanf("%d",&input2);
            if (input2==1)
            {
                mean(numbers,amount);
            }
            else if (input2==2)
            {
                standard(numbers,amount);
            }
            else if (input2==3)
            {
                range(numbers,amount);
            }
            else if(input2==4)
            {
                printf("Would You Like to (5)Restart or (6)Quit?");
                scanf("%d",&input2);
            }
        }
        while(input2!=4);
    }
    getch();
    return 0;
} 
```

但是如果我把它放在这里或者添加一个额外的 do 循环来嵌套它，我会得到一个“expect while before getch”错误。

```
{
    int amount=0;
    int input2;
    do
    {
        float numbers[MAX_DATA];
        printf("Please Eneter the Amount of Numbers You Would Like to Use\n");
        scanf("%d",&amount);
        if (amount>MAX_DATA)
        {
            printf("Your entry was too big");
        }
        else
        {
            input(numbers,amount);
            printf("\nStatistical Calculator Menu\n");
            printf("\n(1) Mean\n(2) Standard Deviation\n(3) Range\n(4) Restart/Exit\n");
            scanf("%d",&input2);
            if (input2==1)
            {
                mean(numbers,amount);
            }
            else if (input2==2)
            {
                standard(numbers,amount);
            }
            else if (input2==3)
            {
                range(numbers,amount);
            }
            else if(input2==4)
            {
                printf("Would You Like to (5)Restart or (6)Quit?");
                scanf("%d",&input2);
            }
        }
        while(input2!=4);
    }
    getch();
    return 0;
} 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:38:50.680

请学习如何使用缩进（C 代码美化器）。

您的缩进和逻辑流程完全不同。

首先，为什么第一个 if 是缩进的，而对应的 else 应该在同一级缩进。

错误的原因是 do 循环是 if 语句的“else”部分的一部分。但是您缩进它，就好像您希望它始终执行一样。

# asp.net - 使用 ASP.Net Web 应用程序读取 Outlook .msg 文件的 Htmlbody

> ID：12777201
> 
> 赞同：1
> 
> 时间：2012-10-08T07:34:50.473
> 
> 标签：asp.net, iis-7, outlook

在我们的网络应用程序中，我们的客户用于附加 .msg（outlook 电子邮件）作为参考。

我想做的是在 .aspx 页面中显示 .msg 文件的 html 正文

下面的代码在 VS 2010 IDE 上运行良好，但是当我在同一台机器上部署时，出现以下错误，

请帮我

```
 Public Shared Function GetMessageHTML(ByVal MsgPath As String) As String

    Dim app As Microsoft.Office.Interop.Outlook.Application = Nothing
    Dim session As Microsoft.Office.Interop.Outlook.NameSpace = Nothing
    Dim mail As Microsoft.Office.Interop.Outlook.MailItem = Nothing
    Dim HtmlBody As String = String.Empty
    Dim NewHTMLBody As String = String.Empty

    Try
        app = New Microsoft.Office.Interop.Outlook.Application()
        session = app.Session
        mail = DirectCast(session.OpenSharedItem(MsgPath.Trim()), Microsoft.Office.Interop.Outlook.MailItem)
        HtmlBody = mail.HTMLBody

        TryCast(mail, Microsoft.Office.Interop.Outlook._MailItem).Close(Microsoft.Office.Interop.Outlook.OlInspectorClose.olDiscard)

        TryCast(app, Microsoft.Office.Interop.Outlook._Application).Quit()
        Try
            My.Computer.FileSystem.WriteAllText(HtmlFName, NewHTMLBody, False)
        Catch ex As Exception
            Return "File Write Exception " & ex.Message
        End Try

    Catch ex As System.Exception
        Return "Read Exception " & ex.Message
    Finally
        If mail IsNot Nothing Then
            System.Runtime.InteropServices.Marshal.FinalReleaseComObject(mail)
        End If
        If session IsNot Nothing Then
            System.Runtime.InteropServices.Marshal.FinalReleaseComObject(session)
        End If
        If app IsNot Nothing Then
            System.Runtime.InteropServices.Marshal.FinalReleaseComObject(app)
        End If
    End Try

    Return HtmlFName
End Function 
```

上面的代码读取 .msg 文件并将 html 正文内容保存到新的 .html 文件中，然后我在 IFrame 中显示新的 html。

我正在使用带有 VS 2010 的 Windows 7，它在开发环境中运行良好，但是当我在本地主机（同一台机器）上发布时，我遇到了错误

![错误](../Images/2d7ce9b04f54f7377be4ac43a28ba283.png)

谁能指导我如何解决这个问题？我已将物理文件夹的完全权限授予用户 IIS_IUSRS

# c - 未定义 InterlockedBitTestAndReset64()

> ID：12777202
> 
> 赞同：2
> 
> 时间：2012-10-08T07:34:52.983
> 
> 标签：c, visual-studio-2010, visual-c++

我需要在我的项目中使用 InterlockedBitTestAndReset64() 但它似乎没有被定义。我查看了 WinNT.h，但由于以下预处理器语句，定义是灰色的：

" #if 定义(_M_AMD64) && !defined(RC_INVOKED) && !defined(MIDL_PASS) "

和

" #if 定义(_M_IA64) && !defined(RC_INVOKED) && !defined(MIDL_PASS) "

我不知道这是什么意思。

**我需要在我的项目属性中设置任何开关吗？**

我在 Windows7 x64 上，并且正在使用 Visual Studio 2010 Professional。我的 CPU 是 Intel Core2 Quad Q9450。

编辑：PS。我应该提到其他 64 位函数，如 InterlockedAnd64 和 InterlockedOr64 工作正常。InterlockedBitAndTestSet64、InterlockedBitTestAndReset64 似乎是个例外。

谢谢，卡尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T08:18:30.027

_M_AMD64 宏是在您以 x64 平台为目标时定义的。_M_IA64 宏是在您以 Itanium 为目标时定义的。两者都是 64 位处理器。在 32 位处理器上不支持这种原子操作。您当然可以使用您拥有的处理器和操作系统来定位 x64。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:10:54.033

我设法通过使用 InterlockedOr64 和常规 AND 运算符解决了这个问题，我认为结果很好。

示例：代替 InterlockedBitTestAndSet64(...)：

```
LONGLONG pattern = 0x0000000000001000;
bool result = InterlockedOr64(ptrToLonglong, pattern) & pattern; 
```

而不是 InterlockedBitTestAndReset64(...)：

```
LONGLONG pattern = 0x0000000000001000;
bool result = InterlockedAnd64(ptrToLonglong, ~pattern) & pattern; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:18:57.630

听起来您**没有**为 x64 目标编译，所有 *64 函数仅适用于 x64 目标。

# html - 如何安装 aptana 3 作为 myeclipse 10.1 的插件

> ID：12777207
> 
> 赞同：1
> 
> 时间：2012-10-08T07:35:06.253
> 
> 标签：html, aptana3, myeclipse

我现在使用 MyEclipse 10.1 版本进行 Web 开发，现在我需要安装 aptana 3.2 作为 MyEclipse 的插件，并且我使用“MyEclipse 配置中心 --> 软件”成功安装了 aptana 2。如何将其更新到 3.2 或最新版本以支持 HTML5 标签？

# java - 如何检查PC是否支持蓝牙？

> ID：12777208
> 
> 赞同：6
> 
> 时间：2012-10-08T07:35:11.660
> 
> 标签：java, swing, bluetooth, installation

我的任务是用 Swing (Java) 开发桌面应用程序。在安装之前（或期间），我需要检查 PC 是否具有蓝牙功能，等等。

是否有配置文件，可以在哪里完成，还是我必须在代码中完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T07:42:28.970

[使用像bluecove](http://code.google.com/p/bluecove)这样的java 蓝牙库来检查现有 pc 是否有蓝牙。

# cocoa-touch - 应用内购买 - 是否可以维护基于组的产品

> ID：12777215
> 
> 赞同：0
> 
> 时间：2012-10-08T07:35:34.200
> 
> 标签：cocoa-touch, ipad, cocoa

我有数百种产品。我们可以按组拆分产品。每个组可以有不同的定价层。例如，group1 -> tier1、group2 -> tier2、group3 -> tier3 等。一个组中的所有产品应该是相同的定价层。

是否可以实施基于组的定价层？而且，我想维护产品状态信息（购买与否）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:34:19.963

我不相信你可以。这是一个好主意，因为它可以节省大量时间，但我认为如果您的 IAP 已经上线，您必须手动更改每一个。

如果您要添加新项目，您至少可以使用 CSV 文件使用 Application Loader 上传它们，我想您可以根据您的组自动生成。

# java - Amazon AWA - 未发现类 Def 异常

> ID：12777220
> 
> 赞同：0
> 
> 时间：2012-10-08T07:35:59.700
> 
> 标签：java, netbeans, amazon-s3

我已部署到云 glassfish 服务器并收到此错误。java.lang.NoClassDefFoundError: com/amazonaws/AmazonClientException

我无权访问 CLASS_PATH，因为它是云环境。我可以配置任何 glassfish 设置吗？它在我的机器上本地工作。

初始化引用的类时引发错误

```
 import com.amazonaws.AmazonClientException;
 import com.amazonaws.AmazonServiceException;
 import com.amazonaws.auth.BasicAWSCredentials;
 import com.amazonaws.services.s3.AmazonS3;
 import com.amazonaws.services.s3.AmazonS3Client;
 import com.amazonaws.services.s3.model.*; 
```

Maven 依赖。

```
<dependency>
<groupId>com.amazonaws</groupId>
<artifactId>aws-java-sdk</artifactId>
<version>1.3.22</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:52:35.837

我没有使用过 Maven 和 Glassfish 组合，但我确实遇到了与 Tomcat 相同类型的问题。

我的问题是我没有配置 Eclipse 开发环境来打包 Tomcat 服务器的 Maven 依赖项。要为 Eclipse 执行此操作，请使用属性 ->“部署程序集”。单击“添加”并选择“构建路径实体”，然后选择“Maven 依赖项”。

这将允许 Eclipse WTP 将 Maven 依赖项推送到 Tomcat 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T07:12:17.377

我有同样的问题，这有点令人沮丧。@nadnavillus 的回答帮助了我。但变化不大。如果您正在使用 Eclipse。

转到，***项目属性->“部署程序集”-> 转到“添加”-> 选择 AWS SDK 库***。前提是您已在系统上下载了 Amazon SDK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-04T22:15:36.140

尝试从命令行构建它（mvn clean install）。在从 Eclipse 构建它时，我遇到了与其他依赖项类似的问题。

# python - 如何在 Python 中使用 Zipfile 压缩具有扁平目录结构的文件？

> ID：12777222
> 
> 赞同：15
> 
> 时间：2012-10-08T07:36:03.373
> 
> 标签：python, python-2.7

我正在使用该`ZipFile`包在 Python 中压缩文件。这是我的代码：

```
archive = zipfile.ZipFile(join(settings.ARCHIVES_DIR, 'test.zip'), "a")

for pdffile in glob.glob(join(settings.IBILLING_DIR, '*.pdf')):
    archive.write(pdffile)

archive.close() 
```

我面临的问题是创建的 ZIP 文件包含目录结构。添加的文件以完整路径添加，这意味着提取存档的用户最终也将获得目录结构。我想将文件添加到 ZIP 但没有任何目录结构。

我怎样才能做到这一点？我没有在文档中找到此信息。

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-08T07:38:56.333

首先添加

```
import os 
```

然后将该`archive.write`行修改为：

```
archive.write(pdffile, os.path.basename(pdffile)) 
```

这指定每个 pdf 应写入 zip 文件，其路径仅相当于您从中读取它的路径的文件名部分（通过为[call指定](http://docs.python.org/library/zipfile.html#zipfile.ZipFile.write)[arcname 参数`write()`](http://docs.python.org/library/zipfile.html#zipfile.ZipFile.write)）。

但是请注意，这意味着如果您在不同的目录中有两个同名的 PDF 文件，一个会覆盖另一个。

# ruby-on-rails - 为什么我的 XML 未能添加多个标签？

> ID：12777224
> 
> 赞同：0
> 
> 时间：2012-10-08T07:36:16.290
> 
> 标签：ruby-on-rails, ruby, xml, xsd

我在我的 Ruby on Rails 代码中创建了 XML，并使用带有 UTF-16 编码的 XSD 对其进行了验证。

在 XML 中，当我插入一个名称时，它可以工作，但对于多个名称，它会引发错误：

```
<city>
    <groups>
      <name></name> 
    </groups>...........It's working fine
</city>

<city>    
    <groups>
      <name></name> 
      <name></name>
    </groups>...........It's raise error
<city>

"FAILED: Error: Element 'name': This element is not expected. at :107." 
```

在 XML 中插入多个标签是否有任何限制？

这是我的 XSD：

```
<?xml version="1.0" encoding="utf-16"?>                              
              <xsd:element name="city">                                           
                <xsd:complexType>
                  <xsd:sequence>
                    <xsd:element name="groups">
                      <xsd:complexType>
                        <xsd:sequence>
                          <xsd:element name="name" type="xsd:string" />
                         </xsd:sequence>
                      </xsd:complexType>
                    </xsd:element>
                  </xsd:sequence>
                </xsd:complexType>
              </xsd:element> 
```

这是模型：

```
 xml.tag!("city"){
              grp = map_groups(city.groups)
              grp.each { |grp_code|
               xml.groups{
                    xml.name("john")
               }
              } unless grp.empty?
             } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:43:01.737

您的 XSD 不允许多个名称。

尝试更改 `<xsd:element name="name" type="xsd:string" />` 为 `<xsd:element name="name" type="xsd:string" maxOccurs="unbounded"/>`

# android - ActionBarSherlock 中的 ItemBackground

> ID：12777225
> 
> 赞同：1
> 
> 时间：2012-10-08T07:36:17.523
> 
> 标签：android, android-actionbar, actionbarsherlock

我想自定义 ActionBarSherlock。因此，我尝试使用具有透明背景的 ActionButton 选择器。这是选择器代码：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
            android:state_pressed="true"
            android:drawable="@drawable/nav_bouton_recherche_pushed"/>
    <item
            android:drawable="@drawable/nav_bouton_recherche"/>
</selector> 
```

这是菜单代码：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
            android:id="@+id/selection_menu_search"
            android:icon="@drawable/search_button_selector"
            android:title="@string/action_bar_search"
            android:showAsAction="always"
            />
</menu> 
```

当我按下任何操作按钮时，其背景变为蓝色。我试图将默认背景更改为透明。这是我的风格：

```
<style name="Theme.MyStyle" parent="Theme.Sherlock.Light">
     <item name="actionBarStyle">@style/Widget.MyStyle.ActionBar</item>
     <item name="android:actionBarStyle">@style/Widget.MyStyle.ActionBar</item>
     <item name="android:actionBarItemBackground">@android:color/transparent</item>
</style> 
```

我遇到了以下问题：如果我在应用程序启动后立即按下操作按钮，那么它可以正常工作！但是后来，如果我按下溢出按钮，那么当我按下它时，动作按钮将停止更改可绘制对象。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:42:23.113

在 XML 文件中只有属性 android:icon 允许您使用图标，但不能使用选择器，并且应该在代码中创建此菜单。覆盖在其中创建所需菜单的 onCreateOptionsMenu。

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    SubMenu subMenu = menu.addSubMenu("one");
    subMenu.add("one_one");
    MenuItem item = subMenu.getItem();
    item.setIcon(R.drawable.test_selector);
    item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    return super.onCreateOptionsMenu(menu);
} 
```

测试选择器：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item
    android:drawable="@drawable/test_shape_pressed"
    android:state_pressed="true"/>
<item
    android:drawable="@drawable/test_shape"
    android:state_pressed="false"/> 
```

# jquery - blockUI 有效，但第二次调用它时出错

> ID：12777227
> 
> 赞同：0
> 
> 时间：2012-10-08T07:36:21.503
> 
> 标签：jquery, typeerror, blockui

我对这个 blockUI 插件有一个奇怪的事情。

这是我用来调用块的函数：

```
function runBlockUI(selector,width)
{
    $.blockUI({ 
        message: $(selector),
        centerY: 0, 
        css: { 
            top:  '30px', 
            left: ($(window).width() - width) /2 + 'px', 
            width: width + 'px',
            height: '550px'}
    });
    $('.blockOverlay').attr('title','Klik om venster te sluiten');
    $('.blockOverlay').click($.unblockUI);
} 
```

问题是该函数被 3 个不同的选择器调用。使用 2 可以完美运行。但与另一个它只工作一次。关闭并调用该功能后，我收到以下错误（在萤火虫中）：

```
TypeError: $.blockUI is not a function 
```

我对此很困惑，希望有人能帮助我！提前致谢！

格茨

**！！！解决了！！！**

问题已解决。我太笨了，我没有看到这个哈哈。该功能适用​​于 2 个项目。但是对于不工作的消息 div 包含一个 html 文件的 load() 函数。我太笨了

```
<script type="text/javascript" src="jquery.js"></script> 
```

在加载的 html 中。此负载确实“取消设置”了 blockUI 插件。删除了 js 包含，它现在可以工作了！感谢您的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:47:36.993

看起来这条线是问题所在..

```
$('.blockOverlay').click($.unblockUI); 
```

您正在为单击事件分配方法而不是函数..

```
$('.blockOverlay').click(function() {$.unblockUI() } ); // Supposed to be called this way 
```

此外，您每次调用函数时都会分配点击事件..将此行移出函数调用..

# android - ListSelector 颜色更改（在选择列表时）并且还为 Spinner 放置文本颜色（黑色）不起作用

> ID：12777230
> 
> 赞同：2
> 
> 时间：2012-10-08T07:36:34.437
> 
> 标签：android, android-layout, listview, spinner, android-spinner

您好，我想将默认橙色更改为红色，同时从下面的微调器中选择列表项是我的代码

要将文本放在微调器列表的中间并删除选择中的单选按钮，我已经制作了自定义适配器

```
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.range, R.layout.middle_text_spinner);
spBAFirst.setAdapter(adapter); 
```

现在 middle_text_spinner 的 xml 文件在下面...

```
<TextView
xmlns:android="http://schemas.android.com/apk/res/android"
style="?android:attr/spinnerItemStyle"
android:singleLine="true" 
android:layout_width="fill_parent"
android:textColor="@color/tabDark"
android:layout_height="wrap_content"
android:gravity="center" /> 
```

现在微调器的图像如下

![微调器](../Images/7b73acacdc7245839f18e1fca2f7ef04.png)

首先，我想将此中间文本的颜色更改为**白色**而不是**黑色**

但是**当列表打开时所有文本必须是黑色和白色背景但在某些电话文本会变成白色**

![在此处输入图像描述](../Images/00c9ab0bd5ec491bb9bd924a994449f1.png)

现在我想在选择列表时将**默认颜色橙色**更改为**红色**

我已经用 Google 搜索了，但选择时无法更改颜色

我尝试过使用**listSelector**但无法完成和使用**下面也是我的代码**

 **这是在可绘制文件夹 btn_red_color.xml 文件中

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:state_enabled="false" android:state_focused="true"
    android:drawable="@color/red" />
   <item android:state_pressed="true"
    android:drawable="@color/red" />
   <item android:state_focused="true"
    android:drawable="@color/red" />
</selector> 
```

并将此值设置为微调器**列表选择器**

```
 <Spinner
  android:id="@+id/spBAFirst"
   style="@style/my_cust_text"
   android:layout_width="100dp"
   android:layout_height="35dp"
   android:background="@drawable/blue_button"
   android:listSelector="@drawable/btn_red_color" /> 
```

而 my_cust_text 样式是

```
 <style name="my_cust_text">
    <item name="android:layout_width">0dp</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:ellipsize">marquee</item>
    <item name="android:lines">1</item>
    <item name="android:maxLines">1</item>
    <item name="android:layout_weight">1</item>
    <item name="android:entries">@+array/range</item>
    <item name="android:layout_marginLeft">-3dip</item>
    <item name="android:layout_marginRight">-3dip</item>
    <item name="android:gravity">center</item>
</style> 
```

但它不起作用:(请任何人帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T05:25:42.300

我已经通过这种方式找到了解决方案，您肯定可以完成 90% 的工作 :) 您可以显示**红色突出显示**的颜色

![在此处输入图像描述](../Images/5561c2939224b88b739258213e49c727.png)

使 CustomAdapter 称为 MySpinnerAdapter...

```
 MySpinnerAdapter adapter = new MySpinnerAdapter(MySettings.this);
  spBAFirst.setAdapter(adapter);

 static class ViewHolder {
    TextView text;
}

private class MySpinnerAdapter extends BaseAdapter {

    private LayoutInflater mInflater;
    String[] array;

    public MySpinnerAdapter(Context context) {
        mInflater = LayoutInflater.from(context);
        array = getResources().getStringArray(R.array.range);
    }

    @Override
    public int getCount() {
        return array.length;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    // A view to hold each row in the list
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.middle_text_spinner, null);
            holder = new ViewHolder();
            holder.text = (TextView) convertView.findViewById(R.id.spinnerText);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.text.setText(array[position]);
        convertView.setBackgroundResource(R.drawable.btn_red_color);
        return convertView;
    }
} 
```

将此文件放入可绘制文件夹 btn_red_color.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_enabled="false" android:state_focused="true"
    android:drawable="@color/white" />
  <item android:state_pressed="true"
    android:drawable="@color/red" />
  <item android:state_focused="true"
    android:drawable="@color/red" />
</selector> 
```

Spinner的xml文件是这样的

```
 <Spinner
                    android:id="@+id/spBAThird"
                    style="@style/my_cust_text"
                    android:layout_width="100dp"
                    android:layout_height="35dp"
                    android:background="@drawable/blue_button"
                    android:cacheColorHint="@color/red"
                    android:textColor="@color/white" /> 
```

Middle_text_spinner.xml 文件如下

```
 <?xml version="1.0" encoding="utf-8"?>
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/spinnerText"
style="?android:attr/spinnerItemStyle"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center"
android:singleLine="true"
android:textColor="@color/tabDark" /> 
```

所以享受:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:40:29.383

查看此线程： [Android ListView Selector Color](https://stackoverflow.com/questions/2038040/android-listview-selector-color) [ListView item background via custom selector](https://stackoverflow.com/questions/2562051/listview-item-background-via-custom-selector) [http://www.geekmind.net/2009/10/android-custom-listview-selector.html](http://www.geekmind.net/2009/10/android-custom-listview-selector.html)**

# postgresql - 用查询结果替换字符串 postgresql

> ID：12777231
> 
> 赞同：4
> 
> 时间：2012-10-08T07:36:41.570
> 
> 标签：postgresql, psql

我有一个查询，结果总是只返回一个元素。我想将此查询的结果附加到可以用于进一步处理的字符串中

例子

`select id from ids where some_condition`

我想将此 id 附加到一个字符串中

like `result_(id)_table`，其中 id 必须用从前一个查询返回的 id 替换（这本质上是另一个表）

最后，我应该能够执行如下查询

```
select * from result_id_table 
```

其中，“result_id_table”是 id 被适当替换的表的名称

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T07:56:50.253

使用字符串连接：

```
-- Demo table structure
CREATE TABLE dummy ( id integer primary key, blah integer not null);
INSERT INTO dummy(id, blah) VALUES (1,1);

-- Single-valued query
SELECT id FROM dummy WHERE blah = 1;

-- Formatted with string concatenation
SELECT 'result_'||(id::text)||'_table' FROM dummy WHERE blah = 1;

-- Formatted using the `format` function
SELECT format('result_%s_table', id) FROM dummy WHERE blah = 1; 
```

如果您正在收集其他信息，请使用子查询组合成字符串

```
SELECT 'result_'||(SELECT id FROM dummy WHERE blah = 1)||'_table'
FROM .... WHERE ... 
```

或使用连接。

您的编辑建议您希望将其用作表名。这可能意味着您的设计很糟糕。代替：

```
CREATE TABLE sometable_1 ( id integer primary key, ...);
CREATE TABLE sometable_2 ( id integer primary key, ...);
CREATE TABLE sometable_3 ( id integer primary key, ...);
...
CREATE TABLE sometable_n ( id integer primary key, ...); 
```

你几乎总是更好：

```
CREATE TABLE sometable(
     id integer not null,
     discriminator integer not null,
     primary key (id, discriminator),
     ...
); 
```

或每个模式表。如果由于某种原因您坚持使用这种方法，您可以使用 PL/PgSQL 的`EXECUTE`语句来运行动态 SQL，例如：

```
EXECUTE format('SELECT * FROM sometable_%s WHERE blah = ?', 
            quote_ident((SELECT id FROM dummy WHERE blah = 1))
        )
USING 2; 
```

查询“sometable_1”中“blah = 2”的行。手册中的更多信息，请参阅[`EXECUTE ... USING`](http://www.postgresql.org/docs/current/static/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)。

在 PostgreSQL 的常规 SQL 中根本不可能做到这一点。在应用程序或 PL/PgSQL 中执行此操作。可以使用PL/PgSQL块，但是如果您在所有事情上都依赖它，`DO`性能将会很*糟糕。*

立即修复您的设计，以免为时已晚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-31T00:17:43.407

我在 Redshift 上使用 Postgres，遇到了尝试在 etl 中使用动态日期并找到解决方案的问题。

使用变量值的一种正确方法是使用`f' '`：

```
query = f''' select * from table where date >= '{my_date}' order by date ''' 
```

Disclaimer: this is not a secure solution, but you could alter it to use sqlalchemy `text` and `bindparam`--- [Docs on sqlalchemy](https://docs.sqlalchemy.org/en/13/core/sqlelement.html).

# javascript - 光滑的网格内联编辑整行

> ID：12777242
> 
> 赞同：0
> 
> 时间：2012-10-08T07:37:24.467
> 
> 标签：javascript, jquery, gridview, datagrid, slickgrid

我想创建一个功能，例如单击编辑整行。 ![网格像我想要的东西](../Images/50dcc1aa8c1ed351be674375d5ec8bfb.png)

那么有没有像 SlickGrid 这样的插件....

# c# - 是否有可以显示彩色减肥进度的 Microsoft DataVisualization 图表

> ID：12777251
> 
> 赞同：1
> 
> 时间：2012-10-08T07:37:54.247
> 
> 标签：c#, data-visualization

我正在使用最新的 Microsoft 数据可视化库 (3.5) 来生成某些图表，以显示一个人在一段时间内的减肥进度。我要展示的是一个使用范围图显示其损失（或收益）的图表。使用这个库实际上很容易做到这一点，但我不确定如何生成如下图表：

![在此处输入图像描述](../Images/0c678f15756624c4220d634ad01a4fe1.png)

我遇到的问题是试图在体重增加时显示红色尖峰。当我将颜色应用于特定系列点时，颜色是从该点到下一个点。不在中间。

那么，图片讲一千个单词，我如何才能产生类似于上图所示的输出？

谢谢，

# c - C.usleep 中的时间延迟

> ID：12777254
> 
> 赞同：14
> 
> 时间：2012-10-08T07:38:02.247
> 
> 标签：c, timedelay, usleep

我正在开发游戏服务器，它是用 C 语言编写的。我需要开发一个具有一定频率（每秒 50 次）的循环来执行算法。问题是我无法将程序暂停一个确切的时间间隔 - 20000 微秒。函数`usleep(20000)`运行大约 30000 微秒。结果总是比预期的多 10000 微秒。

这是我的简单代码示例：

```
#include <stdio.h>
#include <time.h>
#include <unistd.h>

int main( int argc, char ** argv )
{

        const unsigned long long nano = 1000000000;
        unsigned long long t1, t2;

        struct timespec tm;

        for(;;)
        {

                clock_gettime( CLOCK_REALTIME, &tm );
                t1 = tm.tv_nsec + tm.tv_sec * nano;

                usleep( 20000 );

                clock_gettime( CLOCK_REALTIME, &tm );
                t2 = tm.tv_nsec + tm.tv_sec * nano;

                printf( "delay: %ld\n", ( t2 - t1 ) / 1000 );
        }

        return 0;

} 
```

它运行的结果是：

```
$ ./a.out
delay: 29233
delay: 29575
delay: 29621
delay: 29694
delay: 29688
delay: 29732
delay: 29709
delay: 29706
delay: 29666
delay: 29702
delay: 29702
delay: 29705
delay: 29789
delay: 29619
delay: 29785
delay: 29634
delay: 29692
delay: 29708
delay: 29701
delay: 29703 
```

我也尝试使用函数`select()`，但结果与使用`sleep()`.

请向我解释一下我的代码有什么问题。

ps：

```
$ uname -a
FreeBSD home.com 9.0-RELEASE FreeBSD 9.0-RELEASE #0: Tue Jan  3 07:46:30 UTC 2012     root@farrell.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC  amd64 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T07:41:50.077

根据对clock_gettime的调用，不要休眠20000微秒，而是休眠直到您想再次运行为止

IE：

```
usleep( lasttime+20000-now ); // But make sure you don't sleep when the result is negative 
```

不是你的代码有问题，而是实际调用睡眠、读取时间等需要时间，而且系统无论如何都无法睡眠确切的时间，除非它是其确切时钟周期的倍数

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-08T07:51:34.480

非实时系统上的休眠函数不能保证在指定的确切时间段内休眠；在繁忙的系统上，只有在时间片开始时才会唤醒进程。或者，[正如手册页所说](http://www.unix.com/man-page/FreeBSD/3/usleep/)，“系统活动可能会将睡眠时间延长一个不确定的量”。

接近 10 毫秒的量听起来像是`kern.hz`频率降低到 100，[正如一些人建议的 VM 设置](https://serverfault.com/questions/422790/does-kern-hz-still-have-any-relevance-in-freebsd-if-dynamic-tick-mode-is-enabl)。

这个问题的经典解决方法是 Ofir 提供的解决方法：不是指定固定的睡眠间隔，而是指定剩余的睡眠时间。平均而言，您的循环将每 20 毫秒运行一次，这是您最可能想要实现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-26T14:24:55.587

在`usleep`函数 1000000 = 1 秒。

尝试相应地更改您的代码。所以：

```
usleep(1000000) // generates 1 second delay 
```

# visual-studio-2010 - VS2010 - 代理的 NuGet 错误 - “ttp”方案

> ID：12777259
> 
> 赞同：0
> 
> 时间：2012-10-08T07:38:27.570
> 
> 标签：visual-studio-2010, nuget

我在使用 NuGet 包管理器时遇到问题。我正在选择“工具”菜单，然后选择“管理 NuGet 包以获取解决方案”。NuGet 版本为 2.1.31002.9028。

从“在线”或“更新”选项中选择任何内容时，我在主要痛苦中看到一个错误，显示为“ServicePointManager 不支持使用**ttp**方案的代理”。

注意“ttp”部分......肯定应该是“http”。我会在哪里改变这个。在 Internet Explorer 设置中，代理服务器没有前缀（我无法更改它，因为它已被锁定）。我尝试按照此处的建议通过编辑 devenv.exe.config 手动添加代理：[https](https://stackoverflow.com/a/10829550) ://stackoverflow.com/a/10829550 但不高兴。

有谁知道 ServicePointManager 还会在哪里获取这个 URL？

谢谢，

詹姆士。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:18:57.883

我已经通过返回 1.7.30402.9028 解决了这个问题：http: [//nuget.codeplex.com/downloads/get/382255](http://nuget.codeplex.com/downloads/get/382255)

我最初尝试了 1.8 版，但收到了与不支持的加密类型有关的错误，因此转到 1.7。

# c# - 使用 C# 将 XML 转为 MySQL

> ID：12777263
> 
> 赞同：1
> 
> 时间：2012-10-08T07:38:47.117
> 
> 标签：c#, mysql, xml, database, loading

我需要一个最快的解决方案来将数据从 XML 文件传输到 MySQL 表。我有一个包含多个表的 XML 文件，如下所示：

```
<?xml version="1.0" standalone="yes"?>
<RawData xmlns="">
  <Table1>
    <ID_Table1>1</ID_Table1>
    <Name>Victor</Name>
  </Table1>
  <Table2>
    <ID_Table2>1</ID_Table2>
    <Quantity>10</Quantity>
  </Table2>
</RawData> 
```

在VS2010中，我有来自MySql db的DataSource和Table1和Table2的DataTables和TableAdapters。我的目标是读取 XML 文件并将其数据直接传递给这些 DataTables：

```
myDSDataSet eDS = (myDSDataSet)this.FindResource("myDS"); // Declared in XAML

OpenFileDialog dlg = new OpenFileDialog();
dlg.Filter = "XML Files|*.xml";
dlg.Title = "Select a XML File";

Nullable<bool> result = dlg.ShowDialog();

if (result == true)
{                  
 mt1TableAdapter mt1_TA = new mt1TableAdapter();
 mt2TableAdapter mt2_TA = new mt2TableAdapter();
 manager = new TableAdapterManager();       

 xmlDS = new DataSet();
 dt = null;

 try
 {                     
   xmlDS.ReadXml(dlg.FileName,XmlReadMode.InferTypedSchema);

   for (int i = 0; i < xmlDS.Tables.Count; i++)
   {                          
     dt = xmlDS.Tables[i].Copy();

     eDS.Tables[eDS.Tables.IndexOf(xmlDS.Tables[i].TableName)].Merge(dt);                           
   }

   mt1_TA.Update(eDS.mt1);
   mt2_TA.Update(eDS.mt2);

   MessageBox.Show("Loading complete.");
 }
 catch (Exception error)
 {
    MessageBox.Show("ERROR: " + error.Message);
 }              
} 
```

但执行此代码后，我遇到了 2 个大问题： 1\. 如果数据类型不同，我会遇到异常（在 DataSource 字段中是 DateTime，XML 字段被读取为字符串） 2\. 调用 TableAdapter.Update() 需要很长时间才能将数据保存到db（15k 行需要 10-15 分钟）

所以......我的问题是，有人可以帮我解决这两个问题，或者给我一些指导，什么是将 XML 数据保存到 mysql 的最快和最好的方法。

注意： - 我使用的是 VS2010 和 MySQL 5.1。- XML 文件需要从外部源加载。- XML 有其 xmlns，但为简单起见，此处省略。- 我尝试将 MySQL 升级到 5.6 并使用 LOAD XML，但我无法在存储过程中使用此命令。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:58:06.303

好的，我已经解决了这个问题。在这里发布以防其他人遇到此问题。以下解决方案使用预定义模式的表结构和 BackGroundWorker 进行数据处理。想法是使用 StringBuilder（生成大字符串的最快方法）将新读取的数据输入到 MySQL 表中。StringBuilder 变量采用所有 sql 表达式并在 DB 上以单个“go”执行（大大减少了处理时间！）。

```
StringBuilder sqlCommand = new StringBuilder();

DataSet xmlDS = new DataSet();

try
{
   xmlDS.ReadXmlSchema(shemaPath); 
   xmlDS.ReadXml(dlg.FileName, XmlReadMode.ReadSchema);           

   sqlCommand.Clear();
   sqlCommand.Append("START TRANSACTION;");  

    for (int i = xmlDS.Tables.Count-1; i >= 0; i--)
    {
       if (xmlDS.Tables[i].Rows.Count > 0) 
          sqlCommand.Append("DELETE FROM " + xmlDS.Tables[i].TableName + "; ");
    }   

    int brojacDataTable = 0;             

    foreach (DataTable dataTable in xmlDS.Tables) 
    {
        brojacDataTable++;
        if (dataTable.Rows.Count > 0)
        {    
          sqlCommand.Append(" INSERT INTO " + dataTable.TableName + " VALUES");

          int brojacDataRows = 0;
          foreach (DataRow dataRow in dataTable.Rows)
          {
             brojacDataRows++;
             sqlCommand.Append("(");

             for (int i = 0; i < dataRow.ItemArray.Length; i++)
             {
                if (!System.DBNull.Value.Equals(dataRow.ItemArray[i]))
                {
                  if (dataRow.ItemArray[i] is System.DateTime) sqlCommand.Append("'" +((DateTime)dataRow.ItemArray[i]).ToString("yyyy-MM-dd") + "'");
                  else sqlCommand.Append("'" + dataRow.ItemArray[i].ToString() + "'");
                }
                else sqlCommand.Append("null");

               if (i < dataRow.ItemArray.Length - 1) sqlCommand.Append(",");
             }

            if (brojacDataRows < dataTable.Rows.Count) sqlCommand.Append("),");
            else sqlCommand.Append(");");
           }
        }
     }

  sqlCommand.Append("COMMIT;"); 
```

最后，经过一些测试，上传大约 30 个包含 200.000 多条记录的表的总时间不到 20 秒：D

# php - Yelp API 支持为业务页面撰写评论

> ID：12777268
> 
> 赞同：0
> 
> 时间：2012-10-08T07:39:03.390
> 
> 标签：php, javascript, yelp

Yelp 是否提供 API 支持以在业务页面上撰写评论？有没有办法从其他网站写评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T07:43:54.600

不，而且不太可能永远存在。

*完全披露：我在 Yelp 工作了 2 年多。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T05:06:49.483

所以，Yelp 仍然没有为其他网站的评论提供 API。有一种方法可以从您的网站撰写评论。只需制作一个指向您的 yelp 评论的内部 iframe。

链接到业务评论页面的最简单方法。

1.  在 Yelp 上查找业务。
2.  点击商家名称旁边的写评论。（它将带您到实际页面写评论）。
3.  现在只需复制并使用 url 在您的网站上创建调用链接。

就是这样。

# javascript - Javascript 图像窗口

> ID：12777272
> 
> 赞同：0
> 
> 时间：2012-10-08T07:39:17.783
> 
> 标签：javascript, gallery

对不起标题，我想不出更好的标题。

我需要的是某种方式在同一个窗口中使用 Javascript 打开重新调整大小的图像，有点像 Facebook 的工作方式。我已经准备好库代码，所以我不需要功能齐全的 java 脚本库。

这是我想要它做的事情：

*   跨所有浏览器工作
*   点击打开全尺寸图片
*   打开的窗口永远不能大于屏幕大小，因此如果用户打开的图像大于他的屏幕，它将被裁剪
*   当用户单击窗口的 X 按钮或在窗口外单击时，窗口关闭

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:43:42.860

jquery 会更好地帮助你做到这一点。

检查[这个](http://leandrovieira.com/projects/jquery/lightbox/)

脸[书](https://github.com/defunkt/facebox)也会帮助你。

# java - Java中的动态数组列表

> ID：12777274
> 
> 赞同：3
> 
> 时间：2012-10-08T07:39:31.283
> 
> 标签：java, arraylist

我对java有一个疑问，我们可以创建动态的`ArrayList`还是`String[]`在for循环中。例如，在我的应用程序中有类别字段（不是静态的，从服务器获取），我想根据类别的大小创建`ArrayList`或`String[]`对象。如何`ArrayList`在循环中创建动态？

我的代码如下：

```
for(int i =0; i<20; i++)
{
    ArrayList <String> list(i) = new ArrayList<String>();
} 
```

我们可以创建这样的对象吗？基于类别位置，我可以调用列表（位置）之类的列表项，我们可以像这样java吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T07:42:01.357

`ArrayList`是一个动态数组，即您可以添加新元素，例如，

```
ArrayList <String> list = new ArrayList<String>();
for(int i =0; i<20; i++)
{
 list.add("string"+i);
} 
```

> 我可以调用列表（位置）之类的列表项，我们可以像这个 java 一样吗？

ArrayList 具有`get(position)`从位置获取对象的方法。

```
String str1 = list.get(0);//0th position 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T07:41:50.747

整点`ArrayList`是你不必担心大小。随着更多项目的添加，它将动态调整自身大小。您可以查看以下代码的源[代码](http://www.docjar.com/html/api/java/util/ArrayList.java.html)`add`：

```
410       public boolean add(E e) {
411           ensureCapacityInternal(size + 1);  // Increments modCount!!
412           elementData[size++] = e;
413           return true;
414       } 
```

`ensureCapacityInternal`：

```
183       private void ensureCapacityInternal(int minCapacity) {
184           modCount++;
185           // overflow-conscious code
186           if (minCapacity - elementData.length > 0)
187               grow(minCapacity);
188       } 
```

和`grow`：

```
204       private void grow(int minCapacity) {
205           // overflow-conscious code
206           int oldCapacity = elementData.length;
207           int newCapacity = oldCapacity + (oldCapacity >> 1);
208           if (newCapacity - minCapacity < 0)
209               newCapacity = minCapacity;
210           if (newCapacity - MAX_ARRAY_SIZE > 0)
211               newCapacity = hugeCapacity(minCapacity);
212           // minCapacity is usually close to size, so this is a win:
213           elementData = Arrays.copyOf(elementData, newCapacity);
214       } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T08:42:43.930

如果我明白你想做什么，我会做如下。（顺便说一句，如果这是正确的，描述你想要做的事情的术语是“嵌套数组列表”，而不是“动态数组列表”。数组列表（就像其他人已经指出的那样）默认情况下是动态的）。

```
List<List<String>> lists = new Arraylist<List<String>>();

for(int i = 0; i < getNumCategoriesFromServer(); i++){
    lists.add(new ArrayList<String>());
} 
```

现在你可以做，例如：

```
lists.get(0).add(someItemFromCategoryZero);
lists.get(j).add(someItemFromCategoryJ); 
```

`list.get(i)`将返回 category 的列表`i`。

您还可以创建一个 ArrayList 数组，但这并不能确保编译时的类型安全。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-08T08:11:22.700

您是否尝试创建一个每个元素都是 ArrayList 的数组？如果是这样，

```
ArrayList[] list = new ArrayList[20];
for(int i=0; i<20; i++)
{
    list[i] = new ArrayList<String>();
} 
```

# php - 如何通过cpanel手动检查mysql_connect()函数的参数

> ID：12777275
> 
> 赞同：-1
> 
> 时间：2012-10-08T07:39:32.097
> 
> 标签：php, mysql, cpanel

当我需要为`mysql_connect()`方法指定正确的参数值时，我经常遇到困难。即**IP**（服务器IP或`localhost`）、用户名和密码的正确值。有没有办法直接在 cPanel 中测试参数值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:45:02.040

您当然可以从 cpanel 的 MySQL 数据库部分找到 IP、数据库名称和用户名。但是，它不会向您显示密码。但是，您可以管理数据库、用户、权限等。

在大多数情况下，您的数据库服务器将在同一台服务器上。所以IP应该是相同的或本地主机。如果它在另一个 IP 中有数据库服务器，提供商肯定会提前通知您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:43:25.693

除非您将 MySQL 安装在不同的机器/服务器中，否则主机将是`localhost`. 在极少数情况下，您可能需要将其编写为`127.0.0.1`.

用户名应列在 cPanel 数据库页面的“用户”部分。

如果您不知道密码，您只能更改它。

# html - 我的网站无法在 Ipad 上运行，我该如何解决一些小问题？

> ID：12777276
> 
> 赞同：0
> 
> 时间：2012-10-08T07:39:36.047
> 
> 标签：html, css, ipad

我有一个在每个浏览器中都能正常工作的网站。我在 Ipad 中遇到了一些问题。我尝试了很多模拟器，但没有一个能奏效。

他们的问题是他们有一些小问题。有人可以帮助我如何解决它们。

我有 css 知识来修复它们，但我没有 ipad。我试过模拟器，我的设计师也告诉我他们已经检查过了，但模拟器并没有告诉我真正 ipad 的问题。

现在有人有任何想法在没有 ipad 的情况下解决它。我的意思是我该如何解决它。有人请帮助我。我只是想得到一些东西来告诉我用户在我的网站上看到的问题。这样，在进行更改后，我可以验证它是否已解决。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:49:41.080

你听说过响应式网页设计吗？Twitter Bootstrap 可能是一个很好的解决方案。只需单击此链接[http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

另一种你可以使用 CSS 媒体查询来检测设备的屏幕。也可以点击这里了解。[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

# c# - LINQ to Entities 不支持指定类型成员“状态”

> ID：12777284
> 
> 赞同：0
> 
> 时间：2012-10-08T07:40:26.663
> 
> 标签：c#, asp.net-mvc, linq

我有一个名为 PanContent 的课程

```
public class PanContent
    {        
        public int Id { get; set; }           
        public string Description { get; set; }
        public string Content { get; set; }            

        public PanContentStatus Status { get; set; }
        public ActivityId ActivityId { get; set; }       
    } 
```

我有一个枚举类型 PanContentStatus

```
public enum PanContentStatus
    {
        Active = 0,
        Partial,
        Inactive,
        Deleted
    } 
```

我正在尝试在我的控制器中使用它

```
public ActionResult Index()
    {
        var db = new TlDbContext();
        var status = PanContentStatus.Partial;

        var content = db.PanContents.Where(p => p.Status == status).FirstOrDefault();
        if (content != null)
        {
            return View(content);
        }
        else
        {
            return View();
        }
    } 
```

然后在我看来使用它

```
@model IEnumerable<Sample.Models.PanContent>
<script type="text/javascript">
    var model = @Html.Raw(Json.Encode(Model));
    for (var m in model) {
                console.log(m.Content);
            }
</script> 
```

但我收到错误“LINQ to Entities 不支持指定的类型成员'状态'。仅支持初始化程序、实体成员和实体导航属性。”

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:45:54.263

你得到这个的原因是因为你的 LINQ 查询被转换为 SQL 查询，并且因为你已经指定`Status`了带有属性的`[NotMapped]`属性，它在表模式中找不到列，因此产生错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:45:36.033

您应该映射您的 SmsContentStatus 实体或使用一些也应该映射的 statusId。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:18:53.140

如果您没有使用 EF 5.0（以前的版本不能直接使用枚举）

改变你的模型

添加新属性

```
public int StatusValue { get; set; } 
```

然后将另一个更改为

```
[NotMapped]
public SmsContentStatus Status 
{ 
   get {return (SmsContentStatus)StatusValue;}
   set {StatusValue = Convert.ToInt32(value); }
} 
```

然后在所有 linq to entity 查询中，使用`int`属性 ( `StatusValue`)

```
var status = SmsContentStatus.Partial;
var content = db.SmsContents.Where(p => p.StatusValue == (int)status).FirstOrDefault();
//or rather db.SmsContents.FirstOrDefault(p => p.StatusValue == (int)status);
//but that's a detail. 
```

**编辑**

如果您的视图必须代表一个列表，请将您的查询更改为

```
var content = db.SmsContents.Where(p => p.StatusValue == (int)status); 
```

如果它必须代表单个对象，请将视图的模型更改为

```
@model Sample.Models.SmsContent 
```

# jquery - 捕获坐标并在其上显示 div

> ID：12777288
> 
> 赞同：1
> 
> 时间：2012-10-08T07:40:49.960
> 
> 标签：jquery, html

我有一个主 div，我想在单击它时捕获的坐标上放置更多 div。它工作正常，它改变了 div 的顶部和左侧位置，但问题是当我再次单击主 div 时，它会拖动第一次单击时已经显示的 div。我希望在第一次单击时显示的 div 在我再次单击主 div 时停止移动。帮助真的很感激。

代码 ：

```
 $(document).ready(function(){
    $("#main_div").click(function(event, ui){

    var x = event.pageX-document.getElementById("main_div").offsetLeft;
    var y = event.pageY-document.getElementById("main_div").offsetTop;

    document.pointform.form_x.value = x;
    document.pointform.form_y.value = y;

    $("#container-5").css({"top":y,"left":x});
    $("#EDate").css({"top":y,"left":x});

 });
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:50:14.677

如果您只想删除事件处理程序，可以使用以下[`unbind()`](http://api.jquery.com/unbind/)方法：

```
$(document).ready(function(){
    $("#main_div").click(function(event, ui){

    var x = event.pageX-document.getElementById("main_div").offsetLeft;
    var y = event.pageY-document.getElementById("main_div").offsetTop;

    document.pointform.form_x.value = x;
    document.pointform.form_y.value = y;

    $("#container-5").css({"top":y,"left":x});
    $("#EDate").css({"top":y,"left":x});

    // and here we unbind it
    $(this).unbind('click');

   });
}); 
```

根据您的评论：

```
$(document).ready(function(){
    $("body").click(function(event, ui){
    var i = 0;
    if($(this).data("index"))
      i = $(this).data("index");
    else
      $(this).data("index", i = 0);

    var x = event.clientX;
    var y = event.clientY;

    if($("#container-" + i)[0])
        $("#container-" + i).css({"top":y,"left":x});
    else
        $(this).unbind("click");

    $(this).data("index",i+1);

   });
});​ 
```

演示： http: [//jsfiddle.net/Sn9Xx/show](http://jsfiddle.net/Sn9Xx/show)
来源：http: [//jsfiddle.net/Sn9Xx/](http://jsfiddle.net/Sn9Xx/)

# c# - 反序列化过程中的异常

> ID：12777289
> 
> 赞同：0
> 
> 时间：2012-10-08T07:40:50.700
> 
> 标签：c#, oop, c#-4.0

我写了一个有几个类的dll。其中之一称为数据设计。

```
[Serilizible]
public class DataDesign
    {
        [NonSerialized]
        HorizantalFields _horizantalFields;
        [NonSerialized]
        VerticalFields _verticalFields;
        [NonSerialized]
        GeneralDataDesignViewType _dataDesignView;
        [NonSerialized]
        Dictionary<FieldTemplateType, string> _templateTable;
        [NonSerialized]
        public List<string> ProcessedData;

        List<IField> _fields; 
    } 
```

当我在我的应用程序中使用这个 dll 时，我在反序列化过程中遇到了问题。序列化以成功告终。但是在反序列化中我有一个例外。

例外是

> “无法找到程序集 'AnalyzingData, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'。”

AnalyzingData 是 dll 的名称。

```
DeSerilizeClass()
{
                    BinaryFormatter bin = new BinaryFormatter();
                    dataDesign=new DataDesign();

                    DataDesign dd= (DataDesign)bin.Deserialize(stream);
}

Serilize()
{
                    using (FileStream sr = new FileStream(String.Format(@"{0}\{1}", Parameters.SavedConfigurationsDirectory, dataDesignName),FileMode.CreateNew, FileAccess.Write))
                    {
                        BinaryFormatter bin = new BinaryFormatter();
                        bin.Serialize(sr, this);
                    }
} 
```

//这个数据设计类

我该如何解决这个问题？

微软视觉工作室2010。Windows 7 感谢您的关注！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T07:46:10.713

反序列化的任何进程都需要访问您的 AnalyzingData Dll，即它需要位于该应用程序的 bin 文件夹中或可以从中加载它的其他位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T07:46:23.853

`BinaryFormatter`序列化图中的*具体*对象。即使您将某些内容公开为`IField`,`BinaryFormatter`也只是查看实际`SomeTypeOfField : IField`实例。这意味着要反序列化此数据，您需要序列化数据时正在使用的程序集。听起来当您序列化时，它从`AnalyzingData`程序集中获取了一些类型（在图中）。这意味着要*反序列*化此数据，您将再次需要此程序集。

有一些复杂的方法`Binder`可以使用 .

或者，只需 find`AnalyzingData.dll`并添加对它的引用，以便它与您的应用程序一起部署（也将 copy-local 设置为 true）。

# android - 安卓中的按键事件

> ID：12777290
> 
> 赞同：1
> 
> 时间：2012-10-08T07:41:05.230
> 
> 标签：android, keyevent

我想知道如何在 android 中使用 onKeyDown 事件。

因为我想制作一个应用程序，所以每当我在 editText 中输入任何内容时，Textview 都会自动更新并显示我输入的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:59:21.950

我坚持认为，在您的情况下，更好的选择是将[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)用于 EditText。您可以使用[addTextChangedListener()](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)设置 EditText 的侦听器，并将 EditText 中的文本附加到 TextView。[以下](http://iamvijayakumar.blogspot.in/2012/06/android-edittext-textwatcher-example.html)是如何将 TextWatcher 用于 EditText。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:54:09.337

这是方法

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        //Your stuff
        return super.onKeyDown(keyCode, event);
    } 
```

您可以在那里检查 keyCode 或 KeyEvent。

在我之前开发的一个项目中，我使用了一种可运行的方法来检查 Edittext。

# html - CSS3 Box，如何停止自动调整内容大小？

> ID：12777295
> 
> 赞同：1
> 
> 时间：2012-10-08T07:41:41.110
> 
> 标签：html, css

这是一个[小提琴](http://jsfiddle.net/h2Ya8/6/)，可以看到我的问题！[http://jsfiddle.net/h2Ya8/6/](http://jsfiddle.net/h2Ya8/6/)
与 CSS 相关的[如何填充剩余空间（1 div 和更小的 div）](https://stackoverflow.com/questions/12489918/css-how-to-fill-remaining-space-1-div-with-smaller-divs/)

**我只在 Google Chrome 上使用/测试它，因为它将在带有 Google Chrome 的机器上运行**

我有 10 行，每行 6 个盒子。这些盒子占据了所有可用空间。
当我只放入适合盒子的内容时，它工作正常。但是当内容大于盒子可以处理时，盒子会调整大小以适应内容。

我想阻止盒子调整大小并始终保持不变，无论放入什么内容。
（目前我正在使用带有 div 的 div，但我想用盒子替换它，因为它会自动填充可用空间，）
（我需要用图像和文字填充这些框）

带 Div 的电流输出 ![收银台中的产品](../Images/d81707c6fd9fef6de6a3d270cf829f14.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:46:49.657

我找到了解决办法！

`height:100%;`
`width:100%`在产品 css中的行css

[小提琴](http://jsfiddle.net/h2Ya8/31/)显示了这一点！[http://jsfiddle.net/h2Ya8/31/](http://jsfiddle.net/h2Ya8/31/)

感谢所有的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:05:13.730

您只需指定整个页面具有一定的大小：

```
 #page {
    width: 1024px;
    height: 768px;
} 
```

如果你想要“盒子”，这里`<div class="product">`有一个固定的大小，你应该将它的 CSS 设置为：

```
 .product {
    width: 100px;
    height: 80px;
    border: etc...; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:08:17.893

您只需为#page:overflow:auto 指定宽度和高度。

IE，

```
#page {
    width: 1024px;
    height: 768px;
    overflow: auto;
} 
```

# python - 具有多线程、javascript 和 Windows 支持的 Python 无头浏览器

> ID：12777298
> 
> 赞同：2
> 
> 时间：2012-10-08T07:41:54.227
> 
> 标签：python, browser, selenium, mechanize, headless

我尝试了以下但无济于事

*   机械化/斜纹。不支持 Javascript
*   硒。不是无头的
*   鬼。不支持 Windows

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:21:08.750

通过让 Python 为 Phantom 生成 Javascript 来执行，我在使用[Phantom JS方面取得了很好的成功。](http://phantomjs.org/)它现在还具有交互式 REPL，因此您应该能够使用 Python 来驱动 REPL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T00:36:37.460

[Spynner](http://pypi.python.org/pypi/spynner)基于 PyQt 并声称支持 Webkit 的所有功能。

# macos - 在 Mono Mac 上 P/Invoke 到 .framework 文件中

> ID：12777299
> 
> 赞同：0
> 
> 时间：2012-10-08T07:41:58.617
> 
> 标签：macos, mono, mac-frameworks

我正在移植一些我们在 Windows 上的 C# 代码，以便通过 Mono 在 Mac 上使用。在我们的代码中，我们 P\Invoke 进入一个非托管 C++ dll。不幸的是，我们的构建过程只能在 Mac 上给出一个框架文件，而不是一个 dylib 文件。

当我为 Mono 移植代码时，一切正常，但 P\Invoke 进入框架文件。我尝试将框架文件添加到 /Library/Frameworks 文件夹中，该文件夹应该位于默认搜索路径中，但我不断收到 DllNotFound 异常。根据[Mono Interop Guide](http://www.mono-project.com/Interop_with_Native_Libraries)，Mono 添加 .so 作为在 Mac 上搜索的扩展名存在问题。所以我尝试添加一个配置文件并将目标作为 .framework 文件提供，但我仍然遇到了同样的异常。Mono 指南提到使用框架执行 P\Invoke 变得更加复杂，但没有提及确切的问题或如何解决它们。

有人知道如何在 Mono 上 P\Invoke 到框架中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:04:37.737

You can put your framework inside the generated app bundle, see my answer to this question: [Setting path of the Native Library for DllImport on Mono for Mac](https://stackoverflow.com/questions/12834141/setting-path-of-the-native-library-for-dllimport-on-mono-for-mac)

Also make sure to set the framework's installation directory relative to your application directory (ie. `@executable_path/../Frameworks`) in XCode's build configuration; see [https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Tasks/CreatingFrameworks.html](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Tasks/CreatingFrameworks.html).

This is especially important when bundling more than one framework - for instance, if if you P/Invoke into some method in `A.framework` which depends on `B.framework`.

# android - Android 布局管理器显示错误

> ID：12777301
> 
> 赞同：2
> 
> 时间：2012-10-08T07:42:06.590
> 
> 标签：android, eclipse, layout, editor

我有一个非常奇怪的问题要解决。使用布局管理器数周后，它突然“停止”工作。虽然我读过其他问题声称它没有显示任何内容，即使我尝试了那里提到的一些解决方案，我的布局管理器也不是空的。实际上，它的标题是 Android 菜单，正如我所见，我可以在这里建立一个菜单。

请注意，即使在我的旧项目中，也不会显示一个布局。此外，如果我手动编辑 xml 文件，将自动添加一个新行：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"></menu> 
```

我认为这不是错误，而是我找不到的设置。

# android - Android 字符串资源 - 需要包含 '%' 字符

> ID：12777304
> 
> 赞同：10
> 
> 时间：2012-10-08T07:42:14.897
> 
> 标签：android, string

那么如何在字符串资源中包含“%”字符呢？

**有效的**

```
<string name="my_string">Total discount boundary:\nmin=%1$s nmax=%2$s</string> 
```

**无效的**

```
<string name="my_string">Total discount boundary:\nmin=%1$s % nmax=%2$s %</string> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-08T07:57:01.283

您应该能够使用`%%`获取百分号而不被解析为字符串格式字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T00:29:06.800

添加 formatted="false" 帮助了我。这个

```
<string name="parser_error_convert" formatted="false">Parser error, line %d, \'%s\', cannot convert \'%s\'</string> 
```

适用于我的琴弦，我希望它对您的琴弦也有帮助。双倍 %% 没有帮助，因为您将得到 %% （而不是 %）作为结果。

这个问题取决于插件版本，我使用的是 Android Developer Studio 23.0.2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T07:50:41.460

对我来说，它工作得很好。我使用 Eclipse Android 插件，我可以毫无问题地添加一个包含 % 符号的字符串。你用什么工具？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-08T07:46:28.560

尝试这个

```
<string="my_string" format="false">bla bla bla</string> 
```

# java - 执行 swapCursor() 时如何处理 ConcurrentModificationException？

> ID：12777308
> 
> 赞同：1
> 
> 时间：2012-10-08T07:42:26.260
> 
> 标签：java, android, android-listview, concurrentmodification, android-support-library

[我在从FragmentActivity](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)向前和向后导航时收到异常，其中包含 ListView 和从自定义 Loader 加载的数据（它是从本地 sqlite 数据库加载），并且不知道如何处理它......

这是一个堆栈跟踪：

```
Uncaught exception: Unable to destroy activity {com.snyer.bestprice/com.snyer.bestprice.PriceTracerActivity}: java.lang.RuntimeException: Unable to destroy activity {com.snyer.bestprice/com.snyer.bestprice.CartFragmentActivity}: java.util.ConcurrentModificationException
java.lang.RuntimeException: Unable to destroy activity {com.snyer.bestprice/com.snyer.bestprice.PriceTracerActivity}: java.lang.RuntimeException: Unable to destroy activity {com.snyer.bestprice/com.snyer.bestprice.CartFragmentActivity}: java.util.ConcurrentModificationException
    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3106)
    at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3171)
    at android.app.ActivityThread.access$2100(ActivityThread.java:132)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1071)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:150)
    at android.app.ActivityThread.main(ActivityThread.java:4293)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.RuntimeException: Unable to destroy activity {com.snyer.bestprice/com.snyer.bestprice.CartFragmentActivity}: java.util.ConcurrentModificationException
    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3106)
    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:2994)
    at android.app.LocalActivityManager.dispatchDestroy(LocalActivityManager.java:625)
    at android.app.ActivityGroup.onDestroy(ActivityGroup.java:85)
    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3088)
    ... 11 more
Caused by: java.util.ConcurrentModificationException
    at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:576)
    at android.database.DataSetObservable.notifyInvalidated(DataSetObservable.java:42)
    at android.widget.BaseAdapter.notifyDataSetInvalidated(BaseAdapter.java:54)
    at android.support.v4.widget.CursorAdapter.swapCursor(CursorAdapter.java:352)
    at com.snyer.bestprice.CartFragmentActivity.onLoaderReset(CartFragmentActivity.java:412)
    at android.support.v4.app.LoaderManagerImpl$LoaderInfo.destroy(LoaderManager.java:337)
    at android.support.v4.app.LoaderManagerImpl.doDestroy(LoaderManager.java:773)
    at android.support.v4.app.FragmentActivity.onDestroy(FragmentActivity.java:318)
    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3088)
    ... 15 more 
```

`mCartCursorAdapter.swapCursor(null);`此代码片段 (CartFragmentActivity.java:412)行发生异常：

```
public void onLoaderReset(Loader<Cursor> loader) {
    switch (loader.getId()) {
    case LOADER_CART_LIST_ID:
        mCartListCursorAdapter.swapCursor(null);
        break;

    case LOADER_CART_CONTENTS_ID:
        mCartCursorAdapter.swapCursor(null);
        break;
    }
} 
```

在这里可以做些什么来消除这个异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T13:04:14.883

sdk 源提供了一个很好的提示作为评论：

在 Android 4.0.4 中是：

```
public void notifyInvalidated() {
    synchronized(mObservers) {
        for (int i = mObservers.size() - 1; i >= 0; i--) {
            mObservers.get(i).onInvalidated();
        }
    }
} 
```

在早期版本中，它是：

```
 synchronized (mObservers) {
        for (DataSetObserver observer : mObservers) {
            observer.onInvalidated();
        }
    } 
```

4.0.4 源对 onChange 方法的相同更改有以下评论：

```
// since onChanged() is implemented by the app, it could do anything, including
// removing itself from {@link mObservers} - and that could cause problems if
// an iterator is used on the ArrayList {@link mObservers}.
// to avoid such problems, just march thru the list in the reverse order. 
```

我不知道以任何非法方式操纵观察者的 ArrayList。由于这在以后的 API 中得到了解决，而且我想不出对我的应用程序有任何影响，我想我只是简单地忽略带有日志条目或类似内容的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:19:54.210

可能是`onLoaderReset()`在后台线程上被`Loader`. 尝试使用`runOnUiThread()`或类似机制将您的`swapCursor()`调用移至主应用程序线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T16:35:43.087

最快的方法是`DataSetObservable`从“正确”版本的 sdk 复制到您的应用程序并使用它。`DataSetObservable`应该是这样的：

```
public class DataSetObservable extends Observable<DataSetObserver> {
/**
 * Invokes {@link DataSetObserver#onChanged} on each observer.
 * Called when the contents of the data set have changed.  The recipient
 * will obtain the new contents the next time it queries the data set.
 */
public void notifyChanged() {
    synchronized(mObservers) {
        // since onChanged() is implemented by the app, it could do anything, including
        // removing itself from {@link mObservers} - and that could cause problems if
        // an iterator is used on the ArrayList {@link mObservers}.
        // to avoid such problems, just march thru the list in the reverse order.
        for (int i = mObservers.size() - 1; i >= 0; i--) {
            mObservers.get(i).onChanged();
        }
    }
}

/**
 * Invokes {@link DataSetObserver#onInvalidated} on each observer.
 * Called when the data set is no longer valid and cannot be queried again,
 * such as when the data set has been closed.
 */
public void notifyInvalidated() {
    synchronized (mObservers) {
        for (int i = mObservers.size() - 1; i >= 0; i--) {
            mObservers.get(i).onInvalidated();
        }
    }
} 
```

在您的情况下，您也应该从源代码中复制 BaseAdapter 。并将它的 android 更改`DataSetObservable`为您的应用程序`DataSetObservable`。

# mysql - 我无法在 Windows 中更改 mysql 的 datadir

> ID：12777310
> 
> 赞同：0
> 
> 时间：2012-10-08T07:42:33.967
> 
> 标签：mysql, xampp

我正在尝试将 datadir 更改为 mysql 安装（xampp），以将其放在云目录中，例如 dropbox o Google Drive 开发数据库。

我遵循的步骤是：

*   关闭mysql服务器。
*   从 C:\xampp\mysql\data 复制所有文件和目录并将它们放在我的云目录中 (C:\users\Dani\Google Driver_web_development\web-mysql-databases)
*   打开`my.ini`文件`c:\xampp\mysql\bin\`并更改这些变量：

    datadir = "C:/Users/Dani/Google Drive/_web_development/web-mysql-databases" by datadir = "C:/xampp/mysql/data"

    innodb_data_home_dir = "C:/Users/Dani/Google Drive/_web_development/web-mysql-databases" by innodb_data_home_dir = "C:/xampp/mysql/data"

    innodb_log_group_home_dir = "C:/Users/Dani/Google Drive/_web_development/web-mysql-databases" by innodb_log_group_home_dir = "C:/xampp/mysql/data"

    plugin_dir = "C:/Users/Dani/Google Drive/_web_development/web-mysql-databases/lib/plugin/" by plugin_dir = "C:/xampp/mysql/data"

*   保存更改并再次启动服务。

*   MYSQL 无法继续运行。

注意：当我将所有文件放在原来的位置 ( `c:\xampp\mysql\data`) 时，一切正常。并且我的数据目录中没有生成日志。

我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:21:22.427

对于所有有同样问题的人。

如果 mysql 的东西在 Google Drive 文件夹上，这不起作用，我不知道为什么。另一方面，这适用于例如 Dropbox 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T08:14:41.793

我的情况是，Windows 7 和 MySQL 5.5，当我将权限更改为 Google Drive 文件夹时，它起作用了。我提供了与 Dropbox 文件夹相同的权限，确实 Google Drive 中缺少一些用户，例如 SYSTEM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T09:43:10.087

我知道这很旧，但这可能会有所帮助。

我想问题出在“Google Drive”文件夹名称中的空间中，我做了同样的事情，但使用 GoogleDrive 作为文件夹名称并且它有效。

# java - 我将如何解决这个类加载器问题？

> ID：12777311
> 
> 赞同：2
> 
> 时间：2012-10-08T07:42:35.583
> 
> 标签：java, classloader, urlclassloader

让我先说我在 Java 方面不是最好的，所以我可能错过了一些非常简单的东西......

我正在开发一个插件系统，并且在 Eclipse 中一切正常，但当我实际在它之外启动小程序时却没有。

我正在尝试`.class`从目录加载文件并执行它，我知道它为什么不起作用我只是不知道该怎么做才能解决它。

问题是 Eclipse 在类路径中引用了小程序本身，但它没有在 eclipse 之外的类路径中被引用，我无权访问`-cp`or `-classpath`，我只能通过旨在加载的启动器启动它具有固定类路径的 jar。

关于如何解决这个问题的任何想法？

**装载机代码：**

```
final ClassLoader loader = new URLClassLoader(new URL[] { new File("C:/Plugin/Directory/").toURI().toURL() });
final Class<?> c = loader.loadClass("PluginFile");
Object s = c.newInstance();
s.getClass().getMethod("onLoad").invoke(s); 
```

插件代码：

```
import net.plugintest.pluginsystem.*;

public class PluginFile extends ClientPlugin
{
    private String Author = "Plugin Author";
    private String Description = "Plugin Description"
    private Player p = new Player();

    @Override
    public void onLoad() 
    {
        p.talk("Testing");
    }
} 
```

这个问题已经困扰我一个星期了，我不知道该怎么办。：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:59:31.300

我不确定，但尝试为您创建的类加载器提供父类加载器，例如：

```
ClassLoader parent = Thread.currentThread().getContextClassLoader();
// or
// ClassLoader parent = getClass().getClassLoader();
ClassLoader loader = new URLClassLoader(new URL[] { new File("C:/Plugin/Directory/").toURI().toURL() }, parent); 
```

# asp.net - 如何在LINQ中根据日期和时间查询数据

> ID：12777312
> 
> 赞同：0
> 
> 时间：2012-10-08T07:42:37.150
> 
> 标签：asp.net, linq

我正在使用 LINQ 在 asp mvc 中实现服务层。例如，有像 Stackoverflow 这样的用户、帖子和投票。每个用户都有从赞成票和反对票中获得的声誉。

该投票表具有以下属性： id 、 postTypeId 、 voteTypeId 、 creationDate 、 VoterId

此 Post 表具有以下属性：id、userId ....

和用户表包括：id

对于每个upvote 2标记，对于每个downvote 1标记减少

**我需要如何使用 Linq 编写查询如何查询，以显示声誉变化：每个日期的声誉、时间和日期，无论是赞成票还是反对票和相关帖子**

这些是我要使用的属性，

```
var jointable = from vote in _dataContext.Votes
    join post in _dataContext.Posts on vote.PostId equals post.Id
    where vote.VoterId== id
    select new
    {  
        vote.Id,
        vote.CreationDate,
        vote.PostId,
        vote.VoteTypeId,
        post.PostTypeId,
        post.Title,
        post.IsAnonymous 
    }; 
```

在此之后，有人可以帮我查询这些属性以将它们作为对象返回吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T18:11:49.667

您已经拥有的并不遥远，您只需要日期范围条件，即

```
var startDate = ...; // assume this will be selected from the UI
// assuming we are working with UTC (if you aren't, you should be)
startDate = startDate.ToUniversalTime();
var endDate = startDate.AddHours(24); // include full 24 hour day
var jointable = from vote in _dataContext.Votes
    join post in _dataContext.Posts on vote.PostId equals post.Id
    where vote.VoterId == id && vote.CreationDate >= startDate && vote.CreationDate < endDate
    select new
    {  
        vote.Id,
        vote.CreationDate,
        vote.PostId,
        vote.VoteTypeId,
        post.PostTypeId,
        post.Title,
        post.IsAnonymous 
    }; 
```

# voip - Mumble/Murmur 服务器端录音

> ID：12777316
> 
> 赞同：4
> 
> 时间：2012-10-08T07:42:56.993
> 
> 标签：voip, live-streaming, recording, game-development

我们将 Mumble 服务器用于 Twitch.TV 直播和其他与游戏相关的目的。我想设置一个服务器端的每用户录制。为什么，您可能会问 - 答案很简单 - 我们制作我们在 YouTube 上发布的视频。我们为 Mumble 使用不同的计算机，因此我们可以录制纯游戏音频并在后期视频中混合我们的声音。

那甚至可以在服务器端进行吗？我需要修改源代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:00:51.310

Murmur 不会在服务器端解码音频流量，而只会决定哪些流应该被复制到其他用户（在其他一些任务中，比如加密和东西，这对你的问题的上下文没有任何意义）。因此，将语音流量记录到某些 mp3 音频流中并不是一件容易的事，并且需要对 murmur 源代码进行大量更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T10:41:51.193

我现在正在尝试实现一个侦听器机器人。我用 python 编写了它，重用了 frymaster 的 eve 机器人。它位于此处：[https ://github.com/PartiPirate/mumbleBroadcasterBot/blob/master/lib/mumble-bot.py](https://github.com/PartiPirate/mumbleBroadcasterBot/blob/master/lib/mumble-bot.py)

它现在无法运行，我已经评论了第 315 行缺少的内容。

如果有人（或认识具有）强大的 Python 技能并精通二进制数据操作，那将有助于实现这个机器人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T14:51:06.280

可以在与服务器相同的机器上运行一个 mumble 客户端实例，并使用它来记录任何内容。这意味着您将有一个机器人用户在频道中闲置。

# algorithm - 存储一长串随机数的最佳方法是什么？

> ID：12777317
> 
> 赞同：-1
> 
> 时间：2012-10-08T07:43:13.040
> 
> 标签：algorithm, list, numbers

我正在寻找一种算法，它可以存储一长串（可能是数千个）随机数并有效地检索它们。通常，该解决方案不需要对数据进行任何排序，即数字在生成时存储，并且所需的存储空间应小于此类数字的数组/散列所需的存储空间。可以将新号码添加到列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:46:14.430

尝试实现任何[伪随机生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)。您所需要的一切 - 只需存储初始种子（必须是随机的）。但是，当然 - 访问伪随机序列的任何元素都将具有 O(N) 复杂度。这只是[时空权衡](http://en.wikipedia.org/wiki/Space%E2%80%93time_tradeoff)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:48:45.443

@Stemm 有一个很好的想法，就是将种子存储到伪随机数生成器 (prng) 中。还需要对数字进行计数，以便您知道调用 prng 多少次来检索它们。

如果您无权访问种子或数字是随机的，那么您可能有另一种选择。如果你的数字是整数，不是很大，并且你知道没有重复，那么考虑将它们存储为位。因此，例如，如果您的最长值适合 2 字节 int，则可以使用 1 位存储该值。一些例子：

0 = 1。

4 = 10000 二进制或 10 十六进制。

10 = 10000000000 二进制。

如果最大值是 65535，这是可以容纳在 16 位无符号整数内的最大值，那么保存所有值的内存量可以计算为 65536 / 8 = 8192 字节。如果您使用的是 Java，请查看`[java.util.BitSet](http://download.oracle.com/javase/6/docs/api/java/util/BitSet.html)`或`[java.math.BigInteger](http://download.oracle.com/javase/6/docs/api/java/math/BigInteger.html)`类以帮助执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:48:41.313

如果这些数字是真正随机的，或者即使它们来自您不知道种子的足够好的 RNG，则无法压缩它们。对于特定的压缩方案，您可能会很幸运并得出一组可压缩的数字，但此类事件的概率总是很小。

这来自于 count 参数（又名 pigeonhole 参数），没有足够的长度小于的位串`n`来编码每个长度的字符串`n`。流行的压缩方案通过利用只有一小部分输入字符串是可能的这一事实来解决这个问题。然后这个小集合（例如英文文本、可执行二进制文件等）可以在较短的字符串上完全编码。

对于完全随机的字符串，没有这样的后门，因此不可能进行有意义的压缩。

# android - 如何保存地图以供离线查看

> ID：12777320
> 
> 赞同：4
> 
> 时间：2012-10-08T07:43:19.863
> 
> 标签：android, offline, android-maps

对于我目前正在开发的应用程序，我想保存地图以供离线查看。由于谷歌地图现在支持保存地图，谁能告诉我是否真的可以在我们的应用程序上实现相同的功能，是否有任何特定的 API 可以做到这一点？任何信息都会有帮助

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:52:14.503

MapView 和 Android 地图应用程序是两个独立的野兽。MapViews 我什至不认为使用与谷歌地图相同的渲染器。通过查看您的 data/data/ 目录可以看出，每个应用程序都有一些“离线使用”。例如，查看一些地图后，您会在该目录中找到一些缓存的切片。但是，这主要是对平移和缩放的优化。它不能真正用作真正的离线地图支持的功能，因为缓存会很快弹出图块。

不支持真正的离线地图。Google Maps 的功能尚未移植到 MapView 或 Android 应用程序中的任何 Map sdk。自 2009 年以来，该库的 api 甚至没有更新 :( 真的很伤心。

# perl - 如何将sql结果写入csv文件

> ID：12777325
> 
> 赞同：0
> 
> 时间：2012-10-08T07:43:40.347
> 
> 标签：perl, sql-server-2008

我有两个表，如 A 和 B。表 A 具有列名称。具有列公司名称的表 B。

这是我的代码：

```
$query1 = "SELECT Name FROM A"; 
$query2 = "SELECT Company Name FROM B"; 

$statement1 = $connection->prepare($query1);    
$statement2 = $connection->prepare($query2);

$statement1->execute();
$statement2>execute();

while ( ($name) = $statement->fetchrow_array) {
    push (@Name, $name);    
} 
while ( ($companyname) = $statement->fetchrow_array) {
    push (@companyName, $companyname);  
}

open (FH, ">>Output.csv") or die "$!"; 
```

我需要像这样在csv文件中写入数据

```
Name   CompanyName

xxx     yyyy

xxx     yyyy

xxx     yyyy

xxx     yyyy

xxx     yyyy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:49:38.513

您可以`JOIN`在 SQL 查询中使用 a 来执行此操作。你不需要做两个`SELECT`陈述。

```
'SELECT a.Name, b.CompanyName FROM A a JOIN B b ON a.MailId = b.MailId' 
```

* * *

这是一个完整的例子：

```
#!/usr/bin/perl
use strict; use warnings;
use DBI;

my $dbh = DBI->connect("put:dsn:here");
my $sth = $dbh->prepare('SELECT a.Name, b.CompanyName FROM A a JOIN B b ON a.MailId = b.MailId');

open my $fh, '>>', 'Output.csv' or die "Could not open file Output.csv: $!";
print $fh qq{Name\tCompanyName\n};

$sth->execute;
while (my $res = $sth->fetchrow_hashref) {
  print $fh qq{$res->{'Name'}\t$res->{'CompanyName'}\n};
}
close $fh; 
```

# iphone - iphone 的 GameCentre 成就问题

> ID：12777328
> 
> 赞同：0
> 
> 时间：2012-10-08T07:43:47.253
> 
> 标签：iphone, ios, cocos2d-iphone, game-center

我已经做了所有事情并将游戏中心集成到我的游戏中，我的游戏是一个跑步游戏，所以我在我的游戏中添加了一些成就，比如最好的跑步者（500米），极限跑步者（1000米），王者跑步者（2000米）喜欢那。

一切正常，但问题是，如果用户跑了 500 米，它将解锁成就板上的最佳跑步者徽章。但如果用户像这样跑 501 或 510 或 540，我没有更新成就，我需要解锁这个徽章用户跑了 500 - 999 米。我尝试了很多来解决这个问题，但没有运气。

我的代码是它的更新分数方法

```
int dismetr = self.currentScore >= 500;

    self.currentScore = dismetr;

    [self checkAchievements]; 
```

我在这里静态地将值设置为 500

并在switch case方法中

```
- (void) checkAchievements
{

    NSString* identifier = NULL;
    double percentComplete = 0;
    switch(self.currentScore)
    {

            case 500:
                {
                    if (self.currentScore >= 500) {
                    NSLog(@"ACHIVEMENT 500");
                    identifier= kAchievement500meter ;
                    percentComplete= 100.0;
                    break;

                }
            }

        case 1000:
    // onother statments
        }

  if(identifier != NULL)
    {
        [self.gameCenterManager submitAchievement: identifier percentComplete: percentComplete];
    }
} 
```

无论如何它都不会更新分数。但是如果我把

它的更新分数方法

```
int dismetr = 500;

    self.currentScore = dismetr;

    [self checkAchievements]; 
```

在这种方法中

```
- (void) checkAchievements
{

    NSString* identifier = NULL;
    double percentComplete = 0;
    switch(self.currentScore)
    {

            case 500:
                {

                    NSLog(@"ACHIVEMENT 500");
                    identifier= kAchievement500meter ;
                    percentComplete= 100.0;
                    break;

            }

        case 1000:
    // onother statments
        }

  if(identifier != NULL)
    {
        [self.gameCenterManager submitAchievement: identifier percentComplete: percentComplete];
    }
} 
```

它正在正确更新分数..我能做些什么来解决这个问题。请帮助我做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:48:53.967

您正在执行`switch`on `self.currentScore`，因此您正在检查确切的值。您确实应该在`if-else`-construct 中执行此操作，该结构会检查 是否`currentScore`在特定范围内。

像这样：

```
- (void) checkAchievements
{

    NSString* identifier = NULL;
    double percentComplete = 0;

    if(self.currentScore >= 500 && self.currentScore < 1000) {
        NSLog(@"ACHIVEMENT 500");
        identifier= kAchievement500meter ;
        percentComplete= 100.0;
    }

    // onother statments

    if(identifier != NULL)
    {
        [self.gameCenterManager submitAchievement:identifier
                                  percentComplete:percentComplete];
    }
} 
```

# facebook - 按下按钮后登录窗口显示为白色

> ID：12777330
> 
> 赞同：2
> 
> 时间：2012-10-08T07:43:53.590
> 
> 标签：facebook, ios5, xcode4.3, xmppframework

我正在使用 facebook sdk-2010 创建一个 ios facebook 应用程序。其中 Graph-Api 用于获取朋友列表。XMPP 用于聊天。在 facebook 登录窗口中输入用户名和密码后，登录窗口不会消失，并且有时无法登录。有时登录窗口不会在模拟器中出现。从上周开始，有时应用程序会显示以上问题。该应用程序运行正常，直到上周。今天早上我用相同的代码运行了该应用程序，但现在我收到这些错误，检查时网络连接可用。如果有任何人有想法，请帮助我 ![在这里我附上错误的屏幕截图](../Images/b1b2c7a5aaceac9152a5e9f073374703.png)

# domain-driven-design - DDD和数据导出系统

> ID：12777333
> 
> 赞同：5
> 
> 时间：2012-10-08T07:44:06.807
> 
> 标签：domain-driven-design

我是 DDD 的初学者，在架构方面遇到了一点问题。

我们的系统必须能够以各种格式（Excel、Word、PDF 和其他更奇特的格式）导出业务数据。

在您看来，哪一层必须负责检索源数据、以目标格式导出它们并为用户准备最终结果的整个过程？我在域和应用程序职责之间感到困惑。

关于导出子系统，实现及其通用接口契约是否应该属于基础设施层？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T10:50:37.960

既不是应用程序层，也不是域层或任何其他“层”。DDD 不是分层架构。在这个主题上搜索 mor 的洋葱架构或端口和适配器模式。

现在到你问题的核心。您面临的问题是单独的有界上下文，应该转到系统的单独组件。让我们称之为报告。由于这只是一个表示问题，没有领域逻辑——DDD 不适合它。只需制作一些 SQL 视图，使用 NHibernate、LINQ2SQL、EF 甚至普通的 DataReaders 读取它们，然后使用 Builder 模式构建您的 Word/任何文档。没有聚合、存储库、服务或任何其他 DDD 构建块。

您可能想要更进一步，让应用程序中的所有数据表示都由单独的组件处理。那是CQRS。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T07:59:31.483

我通常尽可能采用简单的方法。

域代码实现了您域的语言 - 名词、动词等。

应用程序代码使用这种语言创作诗歌。

因此，在您的示例中，输出的构造是应用程序关注的问题，而应用程序将讨论的位的构造（因为您没有提及）将是域关注的问题。

例如，如果报告包含销售数据，则日期、账单、订单等内容将在域中抽象地构建，而应用程序将关注使用这些数据生成文档。

# lotus-notes - mailto lotus notes 与 mail toaddress 相关的问题

> ID：12777334
> 
> 赞同：2
> 
> 时间：2012-10-08T07:44:07.097
> 
> 标签：lotus-notes, mailto

我试图在我们的网站上设置 mailto。

我写了如下代码

```
<a href="mailto:mail.us.asc@gmail.com&subject=Profil%20anfordern&body=Guten Tag Herr Peter ManiIhr kundenfreundliches Angebot, mit einem einzigen Klick mehr über eine Bewerbung zu erfahren, nehme ich gerne an. Bitte senden Sie mir weitere Informationen zum Profil.Kand-Nr. 3055, PersonalleitungVielen Dank und freundliche Grüsse">mail us</a> 
```

当有人按下链接“给我们发邮件”时，在 Lotus Notes 中，文本会直接显示在电子邮件地址所在的位置。

mail.us.asc@gmail.com&subject=Profil anfordern&body=Guten Tag Herr Peter ManiIhr kundenfreundliches Angebot, mit einem einzigen Klick mehr über eine Bewerbung zu erfahren, nehme ich gerne an。Bitte senden Sie mir weitere Informationen zum Profil.Kand-Nr. 3055, PersonalleitungVielen Dank und freundliche Grüsse

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T07:53:18.137

使用`?`而不是`&`标记 mailto 链接的参数开始：

```
<a href="mailto:mail.us.asc@gmail.com?subject=Profil%20anfordern&body=Guten Tag Herr Peter ManiIhr kundenfreundliches Angebot, mit einem einzigen Klick mehr über eine Bewerbung zu erfahren, nehme ich gerne an. Bitte senden Sie mir weitere Informationen zum Profil.Kand-Nr. 3055, PersonalleitungVielen Dank und freundliche Grüsse">mail us</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:13:38.840

您必须使用该字符`?`作为 URL 地址的参数。

此[链接](http://rumkin.com/tools/mailto_encoder/custom.php)可以帮助您并简化您编写 url 以使用电子邮件地址编码器的工作。我还在 Lotus Notes 上进行了测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:53:14.963

按照 Per 和 Muthu 的描述替换`?`而不是适用于 Windows 上的 Lotus Notes 8.5.3。`&`

编码

```
<a href="mailto:infobot@example.com?subject=Profil%20anfordern&body=Guten Tag Herr Peter ManiIhr kundenfreundliches Angebot, mit einem einzigen Klick mehr über eine Bewerbung zu erfahren, nehme ich gerne an. Bitte senden Sie mir weitere Informationen zum Profil.Kand-Nr. 3055, PersonalleitungVielen Dank und freundliche Grüsse">Mail 2</a> 
```

结果，在单击链接后，在生成的 Lotus Notes 邮件中： ![屏幕截图 Notes 客户端与生成的邮件](../Images/6b06dbb2b1f64fea4adb4fc27c1d4cc8.png)

如果用 替换第一个后仍有问题`&`，`?`请更详细地描述问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T07:53:48.523

未测试。我认为您需要`?`为第一个查询字符串添加。而不是`&subject`更改为`?subject`并尝试

```
<a href="mailto:mail.us.asc@gmail.com?subject=Profil%20anfordern&body=Guten Tag Herr Peter ManiIhr kundenfreundliches Angebot, mit einem einzigen Klick mehr über eine Bewerbung zu erfahren, nehme ich gerne an. Bitte senden Sie mir weitere Informationen zum Profil.Kand-Nr. 3055, PersonalleitungVielen Dank und freundliche Grüsse">mail us</a> 
```

# c#-4.0 - itext 对角线上的多行文本

> ID：12777337
> 
> 赞同：0
> 
> 时间：2012-10-08T07:44:22.523
> 
> 标签：c#-4.0, itext

我如何在对角线上添加带有**itext的多行文本。**这意味着如果文本对于第一个对角线（最大对角线）来说太大，它应该移动到下一个或以上对角线等等，以查看所有文本。

我已经计算了对角线的文本角度并用于`pdfcontentbyte`标记，但如果我的文本比对角线长，则其他不适合对角线的单词不会显示。我想我必须做一些数学运算，或者我看到了一些带有`setsimplecolumn`和块的东西，但这将显示我的文本水平对齐。如果有人有一些想法？谢谢，当然需要一些代码示例。

![我想要这样的东西（图片模拟pdf），黑线将是文本，如果文本更大，它可以超过三行，它是动态的](../Images/0ce0bcef80fa51595c5c61b06ea7759f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:14:08.927

如果我错了，请不要开枪，但根据您的描述，我认为您在谈论“不规则列”。见[http://itextpdf.com/examples/iia.php?id=67](http://itextpdf.com/examples/iia.php?id=67)

这种类型的列不是矩形。基本上，您定义左边框的坐标（可以是对角线）和右边框的坐标。然后在这两行之间插入文本。

如果这不是您的意思，也许您想斜着写文字。在这种情况下，您仍然可以使用 ColumnText，但您需要更改坐标系，以便文本不是从左到右的水平线，而是从上到下（或从下到上）的对角线。使用该方法更改坐标系`concatCTM`。

# java - 使用 JOptionPane 和 JFrame 的程序中的对话框未显示我的代码中的内容

> ID：12777356
> 
> 赞同：1
> 
> 时间：2012-10-08T07:45:53.937
> 
> 标签：java, swing, fonts

该对话框根据ASCII显示前面一个字符的所有内容，在通过dos运行程序时遇到同样的问题。

请有人帮帮我！

```
import javax.swing.JOptionPane;
import javax.swing.JDialog;
import javax.swing.UIManager;

class MyFirstGUI {
    public static void main(String[] args) {

        JDialog.setDefaultLookAndFeelDecorated(true);
        System.out.println(UIManager.getLookAndFeel().getName());
        String first = JOptionPane.showInputDialog("Enter the first number");
        String second = JOptionPane.showInputDialog("Enter the second number");

        int n = Integer.parseInt(first);
        int m = Integer.parseInt(second);
        int sum = n + m;

        JOptionPane.showMessageDialog(null, "sum = "+sum, "Sum of 2 numbers", JOptionPane.PLAIN_MESSAGE);

    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:48:30.120

Here is what I get from running your code (with 1 and 5):

![Step 1](../Images/bb4c472b7969ee719f1a224d56f373cd.png)

![Step 2](../Images/9b53d6041fa5a70ab5c6410ce96d7e83.png)

![Step 3](../Images/0e0c8f0def4d6ffe6164c3aa35b88693.png)

So there must be something else. Have you make sure that your class files are up-to-date?

# ruby-on-rails - 如何正确地从两个表中收集信息并在 rails 的一个控制器中使用它们？

> ID：12777359
> 
> 赞同：0
> 
> 时间：2012-10-08T07:45:58.037
> 
> 标签：ruby-on-rails

我有两个名为`users`and的表`billing`。在`users`我有通常的信息，而在`billing`（包含`user_id`供参考的字段）中，我有每个用户每月的余额之类的东西。我的问题来自当我想列出每月余额时。在每月余额页面上，我想显示用户姓名、当月余额和其他杂项信息，但是该`billing`表仅包含用户的 ID。

起初我试过

```
@mondetail = Billings.find_by_date(201204) #April's billing period
@customer = Users.find_by_id(mondetail.user_id) 
```

这对一个用户来说很好，但是当我想显示来自多个用户的两个表中的信息时，我应该怎么做呢？或者我最好在表格中添加一个`user_name`字段？`billing`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:00:09.220

您不需要在控制器中查找用户信息。你可以从`Billing`模型中得到它。（奇怪的是模型是复数）

```
# controller
@mondetail = Billings.includes(:user).find_by_date(201204)

# view
<% @mondetail.each |mondetail| %>
 <%= mondetail.user.name %><br />
 <%= number_to_currency mondetail.balance %>
<% end %> 
```

它可以工作，`includes`但你应该避免[N + 1 查询](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)问题

# javascript - Javascript & 对象 & 函数

> ID：12777369
> 
> 赞同：2
> 
> 时间：2012-10-08T07:46:43.073
> 
> 标签：javascript, dom

我有一个名为`hello()`.

然后我检索一个DOM元素`x = document.getElementById("test");`

我怎样才能使这个函数表现得像`x.hello();`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:49:33.783

好吧，如果你需要给一个元素添加一个函数，你必须修改它的原型：

```
Element.prototype.hello = function() {
} 
```

无论您选择它，它都适用于任何元素。

假设你想改变元素的样式，它会是这样的：

```
Element.prototype.hello = function() {
    this.style.color = 'blue';
} 
```

正如下面评论中所讨论的，这不一定是一个好主意。这是一篇讨论原因的博客文章：http: [//perfectionkills.com/whats-wrong-with-extending-the-dom/](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)

因此，您可以做的是创建一个在 Elements 上运行的实用程序类。

它是什么样子的？

```
var DOM = {};
DOM.hello = function (element, worldParam) {
    element.style.color = worldParam;
} 
```

等等等等。

所以，为了使用它，你会这样做：

```
DOM.hello(document.getElementById('#test')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T07:50:22.070

如果你想为页面上的每个 DOM 元素添加一个`hello()`，**你**应该修改它的原型：

```
Element.prototype.hello = hello; 
```

但我不会建议你这样做，因为你的更改会影响页面上几乎所有的 js 代码。

如果您想将 a 添加`hello()`到此**特定**元素，只需分配它：

```
x.hello = hello; 
```

`this`现在`hello()`将指`x`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T07:49:31.083

```
x = document.getElementById("test");
x.prototype.hello = function() { // your function } 
```

现在你可以使用 x.hello()。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T07:51:19.143

看看[这个](http://jsfiddle.net/9t746/)。

该链接为您提供了 jsfiddle 上的示例脚本。

# ruby-on-rails - Rails + 将模型绑定到表单中的 jQuery Mobile 组件

> ID：12777370
> 
> 赞同：0
> 
> 时间：2012-10-08T07:46:43.073
> 
> 标签：ruby-on-rails, forms, jquery-mobile

我正在使用 Rails 和 jQuery Mobile 开发移动网络应用程序。我有一个名为“事件”的 rails 模型以及相应的控制器和视图（通过脚手架生成）。现在我正在使用已生成的表单创建一个新事件。我想稍微改变一下这种形式，但仍然与 rails 模型兼容。

这是它现在的样子：

```
<%= form_for(@event) do |f| %>      
      <div class="field">
        <%= f.label :priority %><br />
        <%= f.number_field :priority %>
      </div>
      <div class="actions">
        <%= f.submit %>
      </div>
<% end %> 
```

我猜，脚手架视图正在使用某种默认的帮助程序类。但我想将 f.number_field 更改为 jQuery 移动滑块，在 html 中如下所示：

```
<label for="slider-1">Input slider:</label>
<input type="range" name="slider-1" id="slider-1" value="60" min="0" max="100" /> 
```

现在，我如何将 rails 模型与 jQuery 滑块结合起来，以便当用户单击提交时，clips_controller 会收到一个包含已使用滑块调整的优先级的剪辑模型？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:56:30.443

您可以使用[range_field](http://apidock.com/rails/ActionView/Helpers/FormHelper/range_field)辅助方法

而不是这个：

```
<%= f.number_field :priority %> 
```

用这个：

```
<%= f.range_field :priority, :min => 0, :max => 100 %> 
```

# c# - 在数据集中分组并更新同一数据集

> ID：12777375
> 
> 赞同：0
> 
> 时间：2012-10-08T07:47:07.000
> 
> 标签：c#, ado.net, dataset

我有一个像 -

```
 Currency        amount

    USD         1245
    INR         564
    USD         45645
    INR         5676
    JPY         5677 
```

我想按货币分组并汇总金额并更新相同的数据集。

最终的数据集应该像 -

```
Currency     Amount  
USD           46890
INR           6240
JPY           5677 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:53:02.407

您可以使用`Linq-To-DataTable`和`Enumerable.GroupBy`：

```
var grouped = table.AsEnumerable()
                   .GroupBy(r => f.Field<String>("Currency"))
                   .Select( g => new  { 
                            Currency = g.Key, 
                            Amount = g.Sum(r => r.Field<int>("amount")) 
                   });

var table2 = table.Clone(); // you can also just use the original table, i just didn't want to merge the data here
foreach(var grp in grouped)
{
    var newRow = table2.Rows.Add();
    newRow.SetField("Currency") = grp.Currency;
    newRow.SetField("amount") = grp.Amount;
} 
```

现在您可以使用 a[`DataAdapter`](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx)从`DataTable`.

# android - 如何绘制 ImageView 的反射？

> ID：12777376
> 
> 赞同：1
> 
> 时间：2012-10-08T07:47:11.937
> 
> 标签：android, image, coverflow

我的android应用程序中有一个coverflow小部件[链接](http://www.inter-fuser.com/2009/12/android-reflections-with-bitmaps.html)。我在coverflow小部件内使用自定义的imageview，在图像上有边框和一些文本。

我想显示图像视图的反射**而不是图像**。这怎么可能。？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:33:04.130

请参考此内容并根据需要进行修改。 [关联](http://tomtheguvnor.wordpress.com/2012/01/19/creating-a-reusable-fading-reflection-view-effect-in-android/)

# svn - Atlassian 的 FishEye 有什么好的替代品吗？

> ID：12777379
> 
> 赞同：20
> 
> 时间：2012-10-08T07:47:32.860
> 
> 标签：svn, atlassian-fisheye

[我是FishEye](http://www.atlassian.com/software/fisheye/overview)的忠实粉丝，不幸的是我被绑定到一个商业项目，而 FishEye 根本不在预算之内。有没有好的替代品，具有相同的功能？SCM 后端是一个[颠覆性](http://subversion.apache.org/)的存储库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T09:32:26.180

**2015 年更新：** Sventon 是[`d(ead|ormant)`](https://sventonblog.blogspot.se/)，但它仍然可以在[github 上的最后安息地获得](https://github.com/sventonsvn/sventon)。

Fisheye 的非商业替代品是开源项目[Sventon（链接到 archive.org 上的最后一个活动快照）](https://web.archive.org/web/20141012221329/http://sventon.org:80/)。到目前为止，我已经对其进行了简短的测试安装，并且对您设置它的速度感到非常惊讶。它只是一个`.war`放入 Tomcat 6 容器的文件。尽管如此，仍然没有做太多事情，但它看起来很有希望并且非常快。

这是他们主页上的功能列表：

*   浏览和下载目录和文件
*   许多语言的源代码语法高亮显示，包括 Java、HTML、XML、C、Groovy、Pascal/Delphi、VisualBasic、C# 和 JavaScript。
*   查看日志并指责单个文件
*   区分您的存储库文件，或查看它们的属性
*   显示路径之间的差异。
*   支持多个存储库
*   支持多种身份验证方法，包括基于用户的
*   与 JIRA、Hudson、Luntbuild 和 TortoiseSVN 集成
*   使用“最新提交”功能轻松跟踪更改
*   闪电般的快速搜索，可即时查找文件或日志消息，包括 CamelCase 搜索
*   目录结构扁平化，以便快速找到您要查找的目录
*   浏览存档文件
*   查看存储在存储库中的图像文件的缩略图
*   通过电子邮件提交通知
*   上下文敏感的 RSS 提要支持
*   立即在存储库中找到锁定的文件
*   用于处理条目的方便托盘

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:34:09.507

如果 PHP 在第一步没有引起拒绝，你可以在[WebSVN](http://www.websvn.info/)上看到，[feature-list](http://www.websvn.info/features/)与 Sventon 没有太大区别

# java - 插入、选择和更新查询会降低整个服务器的速度

> ID：12777383
> 
> 赞同：1
> 
> 时间：2012-10-08T07:47:41.923
> 
> 标签：java, mysql, database, jdbc

我有一个处理超过 10000000 个数据的应用程序。

MainTable 有超过 10000000 条数据

我正在尝试将数据从主表插入到子表中

```
INSERT INTO SubTable(Value1,Value2)
SELECT Value1,Value2 FROM MainTable
GROUP BY Value1_ID; 
```

在子表中执行某些处理后..我再次将新值更新到主表中

```
UPDATE MainTable inf,SubTable in
SET inf.Value1=in.Value1, inf.Value2=in.Value2
WHERE inf.Value1_ID= in.Value1_ID; 
```

运行此查询时，整个服务器变得非常慢，它会停止整个其他事务。我在这里使用 JDBC 驱动程序管理器连接。如何避免这种情况？如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:05:40.263

如果您只需要偶尔执行一次，您可以设置一个小脚本，每隔几秒/分钟左右**按批次更新一次，而不是在一次更新中更新整个表。**其他进程将在两次更新之间自由执行查询。
例如，通过每分钟更新一批 100,000 行，如果您的表具有正确的索引，则需要 1~2 小时，但对性能的影响要小得多。

另一种解决方案是**在服务器上的活动最低时**（可能在周末？）进行更新，这样您就不会对其他进程产生太大影响。

# android - android捕获的图像是纵向的

> ID：12777386
> 
> 赞同：4
> 
> 时间：2012-10-08T07:47:48.907
> 
> 标签：android, camera, portrait

在我的应用程序中，我需要从我的手机图库页面上传一些图片。

我正在使用三星 Galaxy ace，并且我使用手机的默认相机以纵向模式拍摄了一些图像。捕获后，我在我的应用程序中打开了这些图像并尝试在图像视图中显示它。以纵向模式拍摄的图像在图像视图中似乎是横向的。

使用`exifInterface.getAttribute(ExifInterface.TAG_ORIENTATION)`i 检查图像方向值是否为 6。

使用以下代码，我在图像视图中以纵向模式显示图像，

```
 Matrix matrix = new Matrix();
                       matrix.postRotate(90);
                       bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(HomePage._uri));
                       bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
                       i.setImageBitmap(bitmap); 
```

但是在上传图像并在我的应用程序的另一个活动中检索它之后，它似乎再次处于横向模式。如何上传肖像本身的图像？

`I have captured in Portrait , i have showed it in portrait by myself, while uploading it i need it to be in portrait itself, so that when i am retrieving it i can view it in portrait mode`,

如何做到这一点，（为了捕捉我在我的应用程序中使用相机，我在应用程序外使用手机默认相机捕捉）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:07:58.720

我找到了从图库中获取图像并上传的解决方案。从图库中选择的某些图像可能看起来是旋转的，在这种情况下，以下解决方案效果很好

从图库中选择图像

```
Intent intent = new Intent(Intent.ACTION_PICK,  android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
        intent.setType("image/*");
        startActivityForResult(intent, 2); 
```

接下来在 onActivityResult

```
public void onActivityResult(int requestCode, int resultCode, final Intent data) 
    {
        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode == Activity.RESULT_OK )
        {
            f(requestCode == 2)
            {   
                try 
                {
                String [] proj = { MediaStore.Images.Media.DATA };  
                Cursor cursor = managedQuery(data.getData(), proj, null, null, null);  
                int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);  
                cursor.moveToFirst();  
                pathInput = cursor.getString(column_index); 

                Appconstants.f = Environment.getExternalStorageDirectory() + "/tmp_siva.jpg";
                ImageUtils.resampleImageAndSaveToNewLocation(pathInput, Appconstants.f);
                }
                catch (Exception ex) 
                {
                Log.e("Exception ex @ try catch",""+ex);
                }
            }
            }             
    } 
```

这是 ImageUtils 类

```
public class ImageUtils 
{
     private ImageUtils() 
     {
     }

     public static void resampleImageAndSaveToNewLocation(String pathInput, String pathOutput) throws Exception 
     {
         Bitmap bmp = resampleImage(pathInput, 800);

         OutputStream out = new FileOutputStream(pathOutput);
         bmp.compress(Bitmap.CompressFormat.JPEG, 100, out); 
    }

    public static Bitmap resampleImage(String path, int maxDim) throws Exception 
    {        
        BitmapFactory.Options bfo = new BitmapFactory.Options(); 
        bfo.inJustDecodeBounds = true; 
        BitmapFactory.decodeFile(path, bfo); 

        BitmapFactory.Options optsDownSample = new BitmapFactory.Options();
        optsDownSample.inSampleSize = getClosestResampleSize(bfo.outWidth, bfo.outHeight, maxDim);

        Bitmap bmpt = BitmapFactory.decodeFile(path, optsDownSample);

        Matrix m = new Matrix(); 

        if (bmpt.getWidth() > maxDim || bmpt.getHeight() > maxDim) 
        {           
            BitmapFactory.Options optsScale = getResampling(bmpt.getWidth(), bmpt.getHeight(), maxDim);
            m.postScale((float)optsScale.outWidth  / (float)bmpt.getWidth(), (float)optsScale.outHeight / (float)bmpt.getHeight()); 
            }

        int sdk = new Integer(Build.VERSION.SDK).intValue(); 
        if (sdk > 4) 
        {
            int rotation = ExifUtils.getExifRotation(path);
            if (rotation != 0) 
            { 
                m.postRotate(rotation); 
            }
        }

        return Bitmap.createBitmap(bmpt, 0, 0, bmpt.getWidth(), bmpt.getHeight(), m, true); 
    }

    private static BitmapFactory.Options getResampling(int cx, int cy, int max) 
    {
        float scaleVal = 1.0f;
        BitmapFactory.Options bfo = new BitmapFactory.Options();
        if (cx > cy) 
        {
            scaleVal = (float)max / (float)cx;
        }
        else if (cy > cx) 
        {
            scaleVal = (float)max / (float)cy;
        }
        else 
        {
            scaleVal = (float)max / (float)cx;
        }
        bfo.outWidth  = (int)(cx * scaleVal + 0.5f);
        bfo.outHeight = (int)(cy * scaleVal + 0.5f);
        return bfo;
    }

    private static int getClosestResampleSize(int cx, int cy, int maxDim) 
    {
        /*Log.e("cx",""+cx);
        Log.e("cy",""+cy);*/
        int max = Math.max(cx, cy);

        int resample = 1;
        for (resample = 1; resample < Integer.MAX_VALUE; resample++) 
        {
            if (resample * maxDim > max) 
            {
                resample--;
                break;
            }
        }

        if (resample > 0) 
        {
            return resample;
        }
        return 1;
    }

    public static BitmapFactory.Options getBitmapDims(String path) throws Exception 
    {
        BitmapFactory.Options bfo = new BitmapFactory.Options(); 
        bfo.inJustDecodeBounds = true; 
        BitmapFactory.decodeFile(path, bfo); 
        return bfo;
    }
} 
```

这是Exif类

```
public class ExifUtils 
{
    private ExifUtils() 
    {
    }

    public static int getExifRotation(String imgPath) 
    {
        try 
        {
            ExifInterface exif = new ExifInterface(imgPath);
            String rotationAmount = exif.getAttribute(ExifInterface.TAG_ORIENTATION);
            if (!TextUtils.isEmpty(rotationAmount)) 
            {
                int rotationParam = Integer.parseInt(rotationAmount);
                switch (rotationParam) 
                {
                    case ExifInterface.ORIENTATION_NORMAL:
                        return 0;
                    case ExifInterface.ORIENTATION_ROTATE_90:
                        return 90;
                    case ExifInterface.ORIENTATION_ROTATE_180:
                        return 180;
                    case ExifInterface.ORIENTATION_ROTATE_270:
                        return 270;
                    default:
                        return 0;
                }
            } 
            else 
            {
                return 0;
            }
        }
        catch (Exception ex) 
        {
            return 0;
        }
    }
} 
```

在图库中选择的图像被检查是纵向还是横向类型，并被旋转并保存在 sdcard 中的新路径中。为避免 OOM 问题，它已调整大小。

# delphi - 在运行时获取数值而不是日期值

> ID：12777390
> 
> 赞同：2
> 
> 时间：2012-10-08T07:48:16.680
> 
> 标签：delphi, date, datetimepicker

我在运行时获取“DateTimePciker.Date”的数值。但我想要像'08/10/2012'这样的价值。如何获取 DATE 值而不是数值？

显示运行时图片：

* * *

![在此处输入图像描述](../Images/5e1660ebd6d5f1db0a06b95efda509e4.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T07:51:01.453

`TDateTime`在旧的 Delphi 版本中未按预期显示。`TDateTime`是浮点类型，调试器显示浮点值是完全正常的。`DateTimeToStr()`如果您需要查看值，您可以考虑使用转换它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T09:29:39.073

Delphi`TDateTime`类型在[文档](http://docwiki.embarcadero.com/Libraries/XE3/en/System.TDateTime)中是这样描述的：

> **TDateTime**类继承了一个 val 数据成员（声明为双精度），它保存日期时间值。**TDateTime**值的整数部分是自 1899 年 12 月 30 日以来经过的天数。TDateTime 值的小数部分**是**一天中的时间。

在`System.pas`类型中声明如下：

```
TDateTime = type Double; 
```

你的价值`41188.668981`是一个完全有效的`TDateTime`价值。它表示一个时间点，即`41188.668981`Delphi 日期时间纪元之后的几天。调用`DateTimeToStr()`将其转换为人类可读的形式。如果您只想查看日期部分，不想查看时间，请`DateToStr()`改用。

```
Writeln(DateTimeToStr(41188.668981));
Writeln(DateToStr(41188.668981)); 
```

这导致了这个输出

```
2012 年 6 月 10 日 16:03:19
2012 年 6 月 10 日

```

总之，您的代码完全按预期运行。您看到的值正是您对 a 的期望值`TDateTime`。如果您需要以文本格式表示日期时间值，请使用适当的转换函数。

# php - nginx + proxy pas - 504 网关超时，1 分 30 秒后超时。尝试了 proxy_read_timeout 但没有运气

> ID：12777394
> 
> 赞同：3
> 
> 时间：2012-10-08T07:48:31.923
> 
> 标签：php, django, nginx, webserver

这是我的配置：

```
location / {
    proxy_pass http://localhost:8003/;
    proxy_connect_timeout 3600s;
    send_timeout 3600s;
    proxy_read_timeout 3600s;
    include /etc/nginx/proxy_params;
} 
```

但是，我在 1min 30 seconds 后收到 504 Gateway Timeout 错误。但是按照我上面的配置不行，是什么原因？我怎样才能让它工作更多秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-05-19T20:05:44.553

我知道 OP 可能早就从这个问题上移开了，但是超时设置应该在`server`or`http`块中*而不是*在`location`块中。例子：

```
server {
    proxy_connect_timeout 3600s;
    send_timeout 3600s;
    proxy_read_timeout 3600s;

    location / {
        proxy_pass http://localhost:8003/;
        include /etc/nginx/proxy_params;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-13T18:35:26.347

**如果您的 NGINX实例**和目标（proxy_pass）之间有一个 NAT 网关，[这个答案](https://stackoverflow.com/a/62351959/9956279)可能会有所帮助。

# c# - 在 ListView 中使用 Column ImageKey 来模拟 Windows 资源管理器样式排序

> ID：12777395
> 
> 赞同：1
> 
> 时间：2012-10-08T07:48:38.710
> 
> 标签：c#, winforms, listview

我有一个 winforms 应用程序（C#、.NET 3.5，但最终迁移到 4.0），它使用 ListView 以与 Windows 资源管理器类似的样式呈现附件（文件/Web 链接）。

此功能已受到应用程序用户的好评。已向 edxpand 发出请求，以包括通过单击列标题对详细信息视图进行排序（与 Windows 资源管理器中相同）

![Windows 资源管理器排序](../Images/ea5b0111129e65f81e43d213273f8f3a.png)

这是我的目标排序风格（使用三角形字形指示排序方向）

通过使用列 ImageKey 属性，我已经接近实现这一目标。

```
if (lvAttachments.ListViewItemSorter != null)
     {
        lvAttachments.Sort();

        if (lvwColumnSorter != null)
        {
           if (lvwColumnSorter.Order == System.Windows.Forms.SortOrder.Ascending)
              lvAttachments.Columns[lvwColumnSorter.SortColumn].ImageKey = "sortAsc";
           if (lvwColumnSorter.Order == System.Windows.Forms.SortOrder.Descending)
              lvAttachments.Columns[lvwColumnSorter.SortColumn].ImageKey = "sortDesc";
        }
     } 
```

不幸的是，图像出现在文本的左侧，而不是右侧。

![在此处输入图像描述](../Images/7c0eb9d85ba01dd834fdc01bd4b98197.png)

ColumnHeader TextAlign 属性设置为 Left，设计器中可用的其他属性很少，似乎没有任何用处。

有谁知道在左对齐时是否可以使图像出现在文本的右侧，或者我将不得不使用另一种方法？

我遇到的一个选项是在标题文本中使用 unicode 字形。但是，如果可能，我宁愿避免这种情况，因为 unicode 字形不是特别好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:20:34.150

我知道如何做到这一点的唯一方法是通过 PInvoke：

```
 [StructLayoutAttribute(LayoutKind.Sequential)]
    internal struct LV_COLUMN
    {
        public UInt32 mask;
        public Int32 fmt;
        public Int32 cx;
        public String pszText;
        public Int32 cchTextMax;
        public Int32 iSubItem;
        public Int32 iImage;
        public Int32 iOrder;
    }

    [DllImport("User32", EntryPoint = "SendMessage", CharSet = CharSet.Auto)]
    internal static extern IntPtr SendLVColMessage(IntPtr hWnd, UInt32 msg, UInt32 wParam, ref LV_COLUMN lParam);

    internal const uint LVCF_FMT = 0x1;
    internal const uint LVCF_IMAGE = 0x10;
    internal const int LVCFMT_IMAGE = 0x800;
    internal const int LVCFMT_BITMAP_ON_RIGHT = 0x1000;

    // Get the old format flags
    col.mask = LVNative.LVCF_FMT;
    LVNative.SendLVColMessage(lvSessions.Handle, LVNative.LVM_GETCOLUMN, (UInt32)iCol, ref col);

    // Set the new format flags
    col.mask = LVNative.LVCF_FMT | LVNative.LVCF_IMAGE;
    col.fmt |= LVNative.LVCFMT_IMAGE | LVNative.LVCFMT_BITMAP_ON_RIGHT;
    col.iImage = (bAscending) ? (int)SessionIcons.SortAscending : (int)SessionIcons.SortDescending;
    LVNative.SendLVColMessage(lvSessions.Handle, LVNative.LVM_SETCOLUMN, (UInt32)iCol, ref col); 
```

# analytics - 谷歌分析插件不工作 wordpress

> ID：12777402
> 
> 赞同：0
> 
> 时间：2012-10-08T07:49:02.127
> 
> 标签：analytics

我已经在我的网站上安装了 GA 插件。我输入了UA代码manulla。但是，当我查看源代码时，它显示的脚本如下...

```
<div class="right-content"> 
        <script type="text/javascript">//&lt;![CDATA[
        // Google Analytics for WordPress by Yoast v4.2.7 | http://yoast.com/wordpress/google-analytics/
        ..... 
```

它超过一个星期，但没有任何显示。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:02:47.663

尝试激活插件并插入您的跟踪代码。不要自定义您的页脚或任何东西。为什么要把它放在页脚？因为性能？

# iphone - 如何在 Apple 地图上启用两指旋转

> ID：12777404
> 
> 赞同：1
> 
> 时间：2012-10-08T07:49:04.543
> 
> 标签：iphone, ios, ios6, ios6-maps

如何启用我们在 iOS6 的新 Apple 地图中看到的双指旋转功能？

有人做过吗？我可以找到文档中的内容吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:38:53.323

无法使用 进行轮换[`MKMapView`](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)，这在官方 API 中不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T08:05:58.807

这是不可能的。苹果记录的 API 不包括两指旋转，这里是文档：[双指](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T14:31:12.823

做就是了：

```
 [mapView setRotateEnabled:YES]; 
```

编辑：（这是iOS7中的新内容，只是把它放在这里以防有人找到这个线程并需要答案）

# php - 从数据库中获取后如何检查字段是否为空？

> ID：12777409
> 
> 赞同：0
> 
> 时间：2012-10-08T07:49:14.507
> 
> 标签：php

我将图像存储在一列中，我只想在表格中的图像字段为空时隐藏 img 标签。

```
$imgResult= explode('**',$resultArray['mediaGallery']);
if(empty($imgResult)===true){
    echo "<script type=\"text/javascript\">
          $(document).ready(function(e) {
              $('.display').css('display','none');
          });
          </script>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:55:48.943

我认为你应该检查`if($imgResult == null)`而不是`empty`. 因为即使您选择的表字段中没有任何内容，该变量也不会为空；它将被设置为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:05:46.817

一种更好的方法：-

```
if( true == is_null( $imgResult ) ) {
} 
```

# qt - 当 UI 屏幕“加载”时会发生什么？

> ID：12777411
> 
> 赞同：2
> 
> 时间：2012-10-08T07:49:22.290
> 
> 标签：qt, user-interface, qml

我一直在研究基于 Qt/qml 的 UI。

我使用了屏幕的“动态加载需求”之类的东西。（使用加载器元素）

优点：启动时无需加载所有屏幕，提高系统启动时间。

缺点：当屏幕必须稍后加载时，这需要时间，并且在那一刻用户响应能力下降。

我的问题是，当我说加载 UI 屏幕时，实际上“加载”到了内存中的是什么？

我的意思是，如果它的 C++ 代码，我会像创建一些动态对象一样理解它。我无法在 UI 屏幕方面对其进行可视化？是否就像我在制作该 UI 时使用的图像被加载到内存中以进行不同的操作一样？

添加到前面的问题，当我“卸载”屏幕时会发生什么？

加载和卸载的 CPU 要求是否相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:05:38.487

当声明性引擎加载 qml 文件时，有一个非常好的和详细的解释：

[http://www.kdab.com/qml-engine-internals-part-1-qml-file-loading/](http://www.kdab.com/qml-engine-internals-part-1-qml-file-loading/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:58:23.507

当使用 loader 加载 QML 对象时，程序实际上会在 QML 文件中的每个元素的内存中创建一个对象（调用该元素类的构造函数）。您可以将文件中的任何 QML 元素视为相应的 c++ 类。当您卸载这些视图时，将调用每个元素的析构函数。所以最后一个问题的答案是加载和卸载的 CPU 要求会有所不同。

# c# - 如何在javascript中访问动态创建的对象？

> ID：12777418
> 
> 赞同：1
> 
> 时间：2012-10-08T07:49:51.307
> 
> 标签：c#, javascript, asp.net, dynamic

我创建了一个动态表，我想在 javascript 中访问创建的对象之一。例如：如何处理动态创建的按钮？

```
<script type="text/javascript">
function myJavaScriptFunction()
{ 
 //How do I know here which button triggered the function?
}
</script>

<table>
<% for (var i=0; i<10; i++) { %> 
  <tr class="rowcell">
   <td class="datacell">
   <input type="button" id='<%="button-no-"+i%>' value="myButton" onclick="myJavaScriptFunction()"/>
   </td>
 </tr>
<% } %>
</table> 
```

提前谢谢你/约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:52:29.940

将按钮元素作为参数传递给函数

```
<script type="text/javascript">
function myJavaScriptFunction(button)
{ 
 //button triggered the function
}
</script>

<table>
<% for (var i=0; i<10; i++) { %> 
  <tr class="rowcell">
   <td class="datacell">
   <input type="button" id='<%="button-no-"+i%>' value="myButton" onclick="myJavaScriptFunction(this)"/>
   </td>
 </tr>
<% } %>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T07:53:07.450

将参数映射为对象：

```
function myJavaScriptFunction(object)
{ 
 //How do I know here which button triggered the function?
    var id = object.id;
} 
```

在您的 HTML 中，您需要执行以下操作：

```
onclick="myJavaScriptFunction(this)" 
```

这是你调用函数的地方，你把`this`关键字作为参数传入。

关键字`this`指的是执行调用的任何 HTML 元素，即您单击的任何按钮。该对象具有`id`您在函数中定义为的属性`object.id`。属性的值`id`基本上是输入标签的“id”字段。

把它们放在一起，你会得到：

```
<script type="text/javascript">
function myJavaScriptFunction(object) // You're defining the function as having a parameter that it accepts. In this case, it accepts an object.
{ 
   alert(object.id); // Alert the object's id.
   // Do what you want with object.id
}
</script>

<table>
<% for (var i=0; i<10; i++) { %> 
  <tr class="rowcell">
   <td class="datacell">
   <input type="button" id='<%="button-no-"+i%>' value="myButton" onclick="myJavaScriptFunction(this)"/>
   </td>
 </tr>
<% } %>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T07:54:52.783

```
<script type="text/javascript">
function myJavaScriptFunction(button)
{ 
   alert($(button).attr('id')); // gets the id of the button that called the function
}
</script>

<table>
<% for (var i=0; i<10; i++) { %> 
  <tr class="rowcell">
   <td class="datacell">
   <input type="button" id='<%="button-no-"+i%>' value="myButton" onclick="myJavaScriptFunction(this)"/>
   </td>
 </tr>
<% } %>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T07:52:16.950

在javascript中，像这样

```
var elem = document.getElementById("button-no-1"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T07:52:54.637

您可以按如下方式更改代码：

```
<input type="button" id='<%="button-no-"+i%>' value="myButton" onclick="myJavaScriptFunction('<%="button-no-"+i%>')"/>

<script type="text/javascript">
function myJavaScriptFunction(buttonId)
{ 
 //How do I know here which button triggered the function?
}
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T07:53:30.070

您应该知道按钮 ID：

```
var button = document.getElementById("button-no-1"); 
```

# authentication - 登录后 Joomla 重定向

> ID：12777420
> 
> 赞同：2
> 
> 时间：2012-10-08T07:49:58.443
> 
> 标签：authentication, redirect, joomla, joomla2.5

`onUserAuthenticate`我在事件帮助下为 Joomla 2.5 编写了一个小型授权插件（类） 。看起来像：

```
class plgauthenticationAuth extends JPlugin{

    public function plgauthenticationAuth($subject, $config){
        parent::__construct($subject,$config);
    }

    public function onUserAuthenticate($credentials, $options, $response){
//my code 
```

我如何从这里设置重定向到自定义 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:08:04.247

试试这个

```
$mainframe = JFactory::getApplication();
$redirct = 'your url';
$mainframe->redirect($redirct); 
```

# java - servlet mysql 不在语句中

> ID：12777421
> 
> 赞同：0
> 
> 时间：2012-10-08T07:49:58.950
> 
> 标签：java, mysql, database, servlets

我正在创建一个执行 sql 查询的 servlet，它的基本版本可以工作，但是当我添加 NOT IN 语句时，它会返回一个空指针异常。我宁愿它不这样做，而是显示一条消息，说他们不能注册一个主题。

这是相关的表格

```
user - id, name, password

subject - id, name, user_id

lab - id, time, room, capacity, subject_id

user_lab - id, user_id, lab_id 
```

我要写的是一个声明，如果用户尚未注册实验室，请打印`subject.name, lab.time, lab.room`

```
 HttpSession session = request.getSession(true);
        //Set data you want to send back to the request (will be forwarded to the page)
        //Can set string, int, list, array etc.

     String id = request.getParameter("id"); 
     System.out.println("beej");
     int user_id = 0; 

     if(id != null && (!id.equals("")) ) { 
     user_id= Integer.parseInt(id); 
     } 

     String sql = "SELECT l.id,s.name,l.day,l.time,l.room" +
              " FROM subject s, lab l " +
                " WHERE" +
                " s.id = l.subject_id"+
                            " AND l.id "+"NOT IN"+
                "SELECT l.id"+
                " FROM lab ll, user_lab ul" +
                "WHERE"+"l.id ="+"ul.lab_id" + "AND ul.user_id="+(Integer)session.getAttribute("id");

      try{
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");

        System.out.println(session.getAttribute("id"));

          Statement stmt = con.createStatement();
          ResultSet res = stmt.executeQuery(sql);
          System.out.println(res);
          ArrayList<String> list1 = new ArrayList<String>();
          ArrayList<String> list2 = new ArrayList<String>();
          if (res.next()){
              do{
                   list1.add(res.getString(1));
                   list2.add(res.getString(2)+" "+res.getString(3)+" "+res.getString(4)+" "+res.getString(5));

              }while(res.next());

          String[] arr1 = list1.toArray(new String[list1.size()]);
          String[] arr2 = list2.toArray(new String[list2.size()]);
          System.out.println(list2);
          request.setAttribute("res1", arr1);
          request.setAttribute("res2", arr2);
          request.setAttribute("user_id", user_id);

          }

      }catch (SQLException e) {
        } 
        catch (Exception e) {
        } 

        //Decides what page to send the request data to
        RequestDispatcher view = request.getRequestDispatcher("Student_enrol.jsp");
        //Forward to the page and pass the request and response information
        view.forward(request, response); 

org.apache.jasper.JasperException: java.lang.NullPointerException
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:534)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:457)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    Student_enrol.sendBack(Student_enrol.java:104)
    Student_enrol.doGet(Student_enrol.java:40)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause 

java.lang.NullPointerException
    org.apache.jsp.Student_005fenrol_jsp._jspService(Student_005fenrol_jsp.java:95)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    Student_enrol.sendBack(Student_enrol.java:104)
    Student_enrol.doGet(Student_enrol.java:40)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:52:06.357

`NOT IN`在和之间添加一个空格`SELECT`

```
" s.id = l.subject_id"+
" AND l.id "+"NOT IN  " +     // <== here
"SELECT l.id"+ 
```

你的子查询应该是这样的

```
SELECT..
FROM...
WHERE l.id NOT IN
(
   SELECT..
   FROM...
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:43:37.877

您还需要在“WHERE”周围和“AND”之前使用一些空格

```
"WHERE"+"l.id ="+"ul.lab_id" + "AND ul.user_id="+(Integer)session.getAttribute("id"); 
```

应该

```
" WHERE "+"l.id ="+"ul.lab_id" + " AND ul.user_id="+(Integer)session.getAttribute("id"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T10:37:42.447

对您的代码进行以下更改：

```
 if (res.next()){
          do{
               list1.add(res.getString(1));
               list2.add(res.getString(2)+" "+res.getString(3)+" "+res.getString(4)+" "+res.getString(5));

          }while(res.next());
      String[] arr1 = list1.toArray(new String[list1.size()]);
      String[] arr2 = list2.toArray(new String[list2.size()]);
      System.out.println(list2);
      request.setAttribute("res1", arr1);
      request.setAttribute("res2", arr2); 
```

至：

```
 String[] arr1 = null;
  String[] arr2 = null;
  while(res.next()){
       list1.add(res.getString(1));
       list2.add(res.getString(2)+" "+res.getString(3)+" "+res.getString(4)+" "+res.getString(5));
      arr1 = list1.toArray(new String[list1.size()]);
      arr2 = list2.toArray(new String[list2.size()]);
          }
  request.setAttribute("res1", arr1);
  request.setAttribute("res2", arr2); 
```

这是因为当您尝试打印一个空的 list2 或访问 list1 和 list2 时，它会抛出错误。为了避免这种情况，仅在行存在时才使用它们。

如 John Woo 所述，还可以在查询中的单词之间添加空格 :)

# android - 版权保护对免费应用有意义吗？

> ID：12777423
> 
> 赞同：4
> 
> 时间：2012-10-08T07:50:03.160
> 
> 标签：android, copy-protection, lvm

我的免费应用程序在设备上占用了 2 倍的空间，因为它在 Google Play 中启用了复制保护。

我没有启用这个。我想知道是否有必要。2x 空间非常负面，我想禁用它。

我也知道不推荐使用复制保护，而是鼓励使用 LVM，但我不知道这是否适用于我的用例。也许我只需要禁用复制保护。

除了想要保护代码之外，可能没有其他理由？但我不认为我有任何异常的、优秀的代码，只有好的编程和一些聪明的技巧:)

那么，在我的情况下，使用复制保护/LVM 或者我只是禁用它是否有意义？

为了保护代码有点可能只能用 ProGuard 混淆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:56:40.563

尤其是在很容易生根设备并无论如何复制它的情况下，混淆是您的朋友，特别是如果复制保护使您的应用程序更大。无论如何，复制保护免费应用程序有点毫无意义，不是吗？我只是禁用它，如果您担心，请混淆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T08:00:22.387

复制保护和混淆都不会有助于对抗具有一定技能和廉价时间的坚定攻击者。如果没有人复制我的免费应用程序，我会更加担心和尴尬（基本上我没有问题，除非有人试图窃取版权 - 但我通过编程赚钱，所以应用程序是我的展示）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T07:59:26.053

复制保护通常用于防止未经授权的复制，这基本上意味着 1 购买 10 安装。如果您的应用程序是免费的，那么使用任何类型的复制保护都是没有意义的，因为您并不真正关心人们从哪里获得您的应用程序。因此，在像您这样的免费应用程序的情况下，过时的 Play 机制、LVL 或任何其他类型的东西都没有任何用处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T08:00:10.453

使用良好编程和聪明技巧的人通常渴望与社区分享他们的知识。隐藏它们不会让你既不快乐也不富有。

我认为使用任何类型的保护都没有什么意义。

# jquery - 如何用on函数替换jquery live

> ID：12777424
> 
> 赞同：-1
> 
> 时间：2012-10-08T07:50:02.890
> 
> 标签：jquery, events, live

我有这个代码

```
$(".myclass").on("click", function(e){

    alert('Hello');

}); 
```

现在它不适用于动态添加的元素

我如何使用像直播功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T07:56:29.630

要像 live 一样使用它，您必须使用**["delegation"](http://api.jquery.com/on/#direct-and-delegated-events)**，这意味着您将处理程序附加到从一开始就存在的父元素，例如：

```
$(document).on('click', '.myclass', function(e){

    alert('Hello');

}); 
```

请注意**[文档](http://api.jquery.com/on/)**中的内容：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。

此外，如果您担心性能问题，请尝试将处理程序附加到尽可能“低”的位置：

> 在文档树顶部附近附加许多委托事件处理程序会降低性能。每次事件发生时，jQuery 必须将该类型的所有附加事件的所有选择器与从事件目标到文档顶部的路径中的每个元素进行比较。为了获得最佳性能，请将委托事件附加到尽可能靠近目标元素的文档位置。避免过度使用 document 或 document.body 来处理大型文档的委托事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T07:54:49.350

在页面加载时附加`on`到 DOM 中存在的元素，并委托给`.myclass`，例如：-

```
$('#classContainer').on('click', '.myclass', function(e) {
  alert('Hello');
}); 
```

[http://api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T07:53:36.510

您需要`jQuery version 1.7`在代码中包含以上内容..

因为您正在动态添加委托事件所需的元素..

```
$("body").on("click",'.myclass', function(e){

    alert('Hello');

}); 
```

事件未附加到关联单击事件后添加的元素。这就是您需要将事件添加到父容器的原因，父容器由于事件冒泡而将事件添加到子事件中。

# c# - 从 C# 错误运行 Oracle 存储过程

> ID：12777431
> 
> 赞同：1
> 
> 时间：2012-10-08T07:50:22.257
> 
> 标签：c#, oracle, stored-procedures

我是甲骨文的新手。我创建了一个存储过程来获取表数据。

```
create or replace
procedure GETLATESTNEWS(cv_results in out sys_refcursor)
as
begin
open cv_results for
select news from tbl_newsdetails;
EXCEPTION
 WHEN OTHERS THEN
  ROLLBACK;
  RAISE_APPLICATION_ERROR(-99999,'Not Inserted due to :'||SQLERRM);  
end; 
```

程序编译成功。但是在我的 .net 代码中，我遇到了错误

```
ORA-06550: line 1, column 7:
PLS-00306: wrong number or types of arguments in call to 'GETLATESTNEWS'
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

我的 .net 代码是

```
con.ConnectionString = constring;
con.Open();
OracleCommand cmd = new OracleCommand();
cmd.Connection = con;
cmd.CommandText = "GETLATESTNEWS";
cmd.CommandType = CommandType.StoredProcedure;
rdr = cmd.ExecuteReader(); 
```

可能是什么问题？我可以使用插入存储过程插入。但是选择不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:33:50.237

尝试添加：

```
cmd.Parameters.Add("cv_results", OracleDbType.RefCursor).Direction = ParameterDirection.Output; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:09:13.663

我用过它，它对我有用

```
OracleCommand oraCommand = new OracleCommand();
oraCommand.Connection = oraConnection;
oraCommand.CommandType = CommandType.StoredProcedure;
oraCommand.CommandText = "procedurename";
OracleParameter oraParameter = new OracleParameter(":result", OracleDbType.RefCursor, ParameterDirection.ReturnValue);
oraCommand.Parameters.Add(oraParameter);
oraCommand.ExecuteNonQuery();

OracleDataAdapter oraDataAdapter = new OracleDataAdapter(oraCommand);
Oracle.DataAccess.Types.OracleRefCursor refCursor = (Oracle.DataAccess.Types.OracleRefCursor)oraParameter.Value;
OracleDataReader reader = refCursor.GetDataReader(); 
```

但是如果您将存储过程作为 ref_cursor 返回。

# ios5 - 具有默认渐变和线条的自定义 UINavigationBar 图像

> ID：12777432
> 
> 赞同：0
> 
> 时间：2012-10-08T07:50:25.160
> 
> 标签：ios5, uinavigationbar, customization, appearance

我想使用**自定义图形**作为 UINavigationBar 背景：

```
[[UINavigationBar appearance]
    setBackgroundImage:[UIImage imageNamed:@"tile"]
    forBarMetrics:UIBarMetricsDefault]; 
```

工作正常，除了我丢失了**默认渐变、标题栏顶部的白线和底部**的黑线。任何想法如何让他们回来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:46:13.090

放弃并**在纹理中添加渐变和线条**。当然，这意味着我必须将纹理高度硬编码为 44 像素 == 垂直方向的导航栏大小。

对解决方案不满意，但它确实可以正常工作。

# wordpress - Wordpress 菜单项未保存

> ID：12777433
> 
> 赞同：1
> 
> 时间：2012-10-08T07:50:25.637
> 
> 标签：wordpress

我在使用 WP 时遇到问题，我在本地主机 (MAMP) 上开发了主题，外观 > 菜单中的一切看起来都不错，我有 8 个顶级菜单项，每个都有 5-10 个子项。当我将主题上传到服务器上时，想要添加菜单项并单击保存 - 新项目未保存。总的来说，现在我有 18 个菜单项（顶级和子级别），并且不能添加任何新的。

它与`max_vars`PHP配置有关吗？我试图将`POST`max_vars 大小增加到 4096，但没有用。有人有线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:13:34.417

我刚刚解决了同样的问题。我有 90 个菜单项，不能再添加了。我在这张 Wordpress 支持票上找到了答案：

[http://core.trac.wordpress.org/ticket/14134](http://core.trac.wordpress.org/ticket/14134)

问题是 apache 配置限制了 POST 项目的数量。每个菜单项都算作一个 POST 项，因此解决方案就像增加最大 Post Limit 一样简单。由于我的网站托管在共享服务器上，这就像添加`php_value max_input_vars 10000`到我的 .htaccess 文件一样简单。我相信你也可以在你的 php.ini 文件中改变它。希望这可以帮助！

# javascript - 如何与 Chrome 打包应用程序中的沙盒窗口通信？

> ID：12777434
> 
> 赞同：3
> 
> 时间：2012-10-08T07:50:33.980
> 
> 标签：javascript, iframe, google-chrome-extension, security, sandbox

最近谷歌引入了**沙盒**来增强其安全模型。他们[建议](http://developer.chrome.com/trunk/apps/sandboxingEval.html)使用**postMessage**作为与沙盒窗口通信的方式。但是要发布消息，我需要从后台页面发送第一条消息：

```
// in background page:
chrome.app.runtime.onLaunched.addListener(function() {
  chrome.app.window.create('index.html', { // index.html is sandboxed
    'width': 800,
    'height': 500
  }, function(myWin) {
      // myWin is ready, I want to post a message
      console.log(myWin); // This is never called after version 23.0.1246, an error is thrown
  });
}); 
```

这在版本中运行良好，`23.0.1246`但在下一次更新中停止工作，并且从未返回。现在，这种技术在 dev 和 beta 中都会引发错误（在 和 上测试过`24.0.1284`）`23.0.1271.17`。

我准备了一个显示错误的最小 Chrome 打包应用程序（在启动应用程序后的后台页面控制台中）：[https ://github.com/losomo/sandbox_test](https://github.com/losomo/sandbox_test)

我已经提交了一个[错误报告](http://code.google.com/p/chromium/issues/detail?id=147481)，但不能再等几个月才能有人阅读它，我需要在一个月内使用该应用程序。我该如何解决这个问题？我可以看到使用沙盒**iframe的**[示例](https://github.com/GoogleChrome/chrome-app-samples/tree/master/sandbox)仍然有效。有没有办法在不使用 iframe 的情况下使用沙盒并且仍然能够与页面通信？

 **这是清单：

```
{
  "name": "Sandbox test",
  "description": "Sandbox test",
  "manifest_version": 2,
  "minimum_chrome_version": "23",
  "version": "0.0.1",
  "app": {
    "background": {
      "scripts": ["background.js"]
    }
  },
  "sandbox": {
     "pages": ["index.html"]
  },
  "permissions": [
    "app.window"
  ]
} 
```

和 index.html 页面：

```
<!doctype html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
</head>
<body>
    Hi
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T07:59:02.340

可以在 Chrome 打包应用程序中使用带有弹出窗口的 postMessage。但是，您尝试使用的方法仅适用于非沙盒页面，因为您依赖于受保护的 chrome API。

相反，诀窍是使用 window.open 打开沙盒弹出窗口。更重要的是，这不是侥幸，根据这个[Chromium Issue](http://code.google.com/p/chromium/issues/detail?id=148520)，window.open 应该在沙盒页面中工作，而且确实如此！

**清单.json：**

在清单中，我不确定你想用 app.window 做什么。[它未在Manifest Permissions Documentation](http://developer.chrome.com/apps/declare_permissions.html)中列出，因此我将其删除。此外，您没有启用“背景”权限。我不确定您尝试执行的操作是否需要它，但如果您需要应用程序在后台运行并持续存在，文档确实需要它：

```
{
  "name": "Sandbox test",
  "description": "Sandbox test",
  "manifest_version": 2,
  "minimum_chrome_version": "21",
  "version": "0.0.1",
  "app": {
    "background": {
      "scripts": ["background.js"]
    }
  },
  "sandbox": {
     "pages": ["index.html"]
  },
  "permissions": [
    "background"
  ]
} 
```

**索引.html：**

请记住，沙盒页面无法访问 chrome API，因此我们包含了 sandbox.js 来注册一个 postmessage 监听器。请参阅下一节。

```
<!doctype html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <script type="text/javascript" src="sandbox.js"></script>
</head>
<body>
    Hi. This page is sandboxed and cannot access chrome APIs! 
</body>
</html> 
```

**沙盒.js：**

该文件包含在 index.html 页面中：

```
// register a postmessage listener in index.html sandbox
window.addEventListener("message", function(event) {
    console.info("message received in sandbox: " + event.data.message);    
}); 
```

**背景.js：**

请记住，您不能依赖 Chrome API 与沙箱进行通信！所以我们必须使用 window.open 而不是 chrome.app.* API：

```
console.log("running in background... waiting for you to click the Sandbox App icon in chrome://newtab");    

// as soon as the launch icon is clicked, this fires
window.addEventListener("DOMContentLoaded", function() {

    // use window.open to create a popup
    sandboxWin = window.open("index.html","SANDBOXED!","height=800,width=500");       

    // fire a postMessage event to the sandbox. Inspect the sandbox and see the 
      // message in the console.
    sandboxWin.postMessage({"message":"It works!!"}, "*");

}); 
```

*这是在 Ubuntu 10.04 上的 Chromium 每日构建中测试的：版本 24.0.1309.0 (164508)。这应该与用于 Windows/Mac Canary 构建的版本非常接近，后者本质上也是重新命名的每日构建。*

我怀疑您引用的文档（确实建议使用此方法）可能已被弃用。看来谷歌正在朝着不同的方向发展。查看[Sandbox Iframe mainpage.js](https://github.com/GoogleChrome/chrome-app-samples/blob/master/sandbox/mainpage.js)，在与沙盒 iframe 通信时，他们使用了相同的技术，即使用 DOM postMessage API 而不是 Chrome API！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T04:55:25.443

我只是把[这个要点](https://gist.github.com/vjpr/8681912)放在一起，它允许 RPC 在`sandbox <-> unsandboxed`. （也就是说，任何一个都可以公开方法）。

它基于`JSON-RPC`.

享受！

另请查看：[http ://a.shinynew.me/post/37199320546/chrome-packaged-apps-and-the-csp-dilemma](http://a.shinynew.me/post/37199320546/chrome-packaged-apps-and-the-csp-dilemma)**

# android - 在我的应用程序中禁用多指触摸

> ID：12777435
> 
> 赞同：22
> 
> 时间：2012-10-08T07:50:36.570
> 
> 标签：android, android-layout, android-intent, android-emulator, android-fragments

我的应用程序使用一个 Activity 来托管多个片段。每次在手机屏幕上显示一个片段。每个片段的视图由几个图像图标组成。

目前，用户可以用两根手指**同时**按下两个图标（每个手指按下一个图标）。**我想**在我的应用程序上禁用此多点触控功能，以允许**一次仅按下一个图标生效**。

**我尝试了以下方法：**

**方式1：**在我的应用主题中，我添加了：

```
<item name="android:windowEnableSplitTouch">false</item> 
```

**方式2：**在Android Manifest xml中，我添加了：

```
<uses-feature android:name="android.hardware.touchscreen.multitouch" android:required="false" /> 
```

**方式3：**在我的活动中：

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    if(event.getPointerCount() > 1) {
        System.out.println("Multitouch detected!");
        return true;
    }
    else
       return super.onTouchEvent(event);
    } 
```

不幸的是，我的解决方案都不起作用。那么，**如何**在我的应用程序中禁用多点触控功能？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-26T15:52:21.800

例如：您有多个按钮，并且您只想选择一个按钮。**在**按钮的父级（不是根，只是子级的父级）中，在其 xml 参数中添加

> 安卓：splitMotionEvents="假"

就是这样。例子：

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:splitMotionEvents="false" <-----------!!!
    >

    <Button
    android:id="@+id/button_main_1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="button1" />

    <Button
    android:id="@+id/button_main_2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="button2" />

    <Button
    android:id="@+id/button_main_3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="button3" />
</LinearLayout> 
```

顺便提一句。当您有 2 个线性布局，每个布局有 3 个按钮时，您应该在这两个布局中设置此 splitMotionEvents，**并在**这 2 个线性布局的父级中设置。否则，您将只能单击每个布局的一个按钮（然后总和 = 2）。我希望你能明白。:)

没有其他解决方案对我不起作用或太蹩脚。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-03-25T13:00:05.420

是的，我也曾经遇到过这个问题，我发现**android:splitMotionEvents="false"**的解决方案 仅适用于引导布局的子级。

**示例**：

就像您创建两个布局 A 和 B 并且在 A 中您有两个按钮 b1,b2 在 B 中您有两个按钮 b3,b4

A 和 B 都在父布局中所以首先你必须清楚这些按钮不是父布局的直接子元素

在父布局中只有两个孩子 A 和 B

如果您将**android:splitMotionEvents="false"**添加到父布局，那么多点触控将不适用于布局 A 和布局 B，但它将适用于每个按钮 b1、b2、b3、b4，因为它们不是父布局的直接子级

所以，如果你希望多点触控也不能在这些按钮上工作，那么你必须分别将**android:splitMotionEvents="false"**这个添加到每个布局中

有一些情况：

1). 如果您只在布局 A 上添加**android:splitMotionEvents="false"**，则您不能同时触摸按钮 b1 和按钮 b2，但您可以同时触摸按钮 b1 或 b2 和按钮 b3 或 b4。

2）。与案例 1 正好相反。

3）。但是如果你在两个布局上都添加了**android:splitMotionEvents="false"**，那么你就不能同时触摸屏幕上的任何两个按钮。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:splitMotionEvents="false" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:splitMotionEvents="false" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="b1" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="b2" />
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:splitMotionEvents="false" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="b3" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="b4" />
</LinearLayout> 
```

我想它可能对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T08:06:45.280

您可以将用户 a 放在`GestureOverlayView`整个屏幕上，并且只允许较低的视图处理第一个触摸事件。

您必须在这个透明视图上设置一个 onTouchListener，它执行如下操作：

```
gestureOverlayView.setOnTouchListener(new View.OnTouchListnener(){
    @Override
    public boolean onTouch(View v, MotionEvent e){
       // True means the event is ignored by the overlayed views 
       return e.getPointerCount() > 1 ? true : false;
    }
} 
```

# windows-mobile - Microsoft Device Emulator 的存储卡驱动程序的替代方案

> ID：12777440
> 
> 赞同：1
> 
> 时间：2012-10-08T07:50:56.280
> 
> 标签：windows-mobile, emulation, driver, sd-card

我们大量使用 Microsoft Device Emulator 来开发和测试我们的移动应用程序（VS 2008 SP1、.NET CF 2.0 和 3.5，模拟器版本 9.0.21022.8）。我们的项目从映射到开发机器的本地文件夹的模拟存储卡开始。这样我们就可以非常快速地部署、测试和调试更改，并且不受可用内部存储空间的限制。

可悲的是，存储卡驱动程序在访问大量文件时似乎非常不稳定，在访问位于共享文件夹上的资源时会抛出随机`FileNotFoundException`s 和s。`UnauthorizedAccessException`

以下演示代码将使用不同的值`i`（从 8 到 > 100）随机崩溃`UnauthorizedAccessException`。在内部存储上创建文件时，代码不会崩溃。

```
private const string PATH = @"\Storage Card\Temp\";

private void button1_Click(object sender, EventArgs e)
{
  if (!Directory.Exists(PATH))
  {
    Directory.CreateDirectory(PATH);
  }

  for (int i = 0; i < 1000; i++)
  {
    using (var stream = File.Create(Path.Combine(PATH, string.Concat(i, ".tmp"))))
    {

    }
  }
} 
```

例子：

![未授权访问异常](../Images/7e4b62e1951a3965e81c1ed483d22cfa.png)

我详尽地搜索了网络，发现有些人正在为同样的问题而苦苦挣扎，但没有找到任何解决方案。

我已经尝试过的：

*   使用 FAT32 格式的卷进行共享
*   以管理员身份执行所有程序
*   大幅减少共享文件夹中的文件数量
*   使用了 RAM 磁盘驱动程序进行测试（效果很好，但不能直接从开发机器访问）
*   将模拟设备的 RAM 增加到 256 MB
*   测试了所有可用的不同模拟器图像（不会改变任何东西）
*   冷启动或热启动模拟器设备

我的问题是：

*   Microsoft Device Emulator 上的共享文件夹是否有任何替代方法？
*   有没有办法修复内置机制的行为（例如注册表设置）？
*   是否可以在模拟设备上安装另一个驱动程序来解决此问题？

# gwt - 调度传入 RPC 调用时出现异常

> ID：12777443
> 
> 赞同：0
> 
> 时间：2012-10-08T07:51:12.770
> 
> 标签：gwt, tomcat, gwt-rpc

我尝试在 Windows 上开发 GWT 应用程序。当我在 ubuntu 中将项目运行到 netbeans 时，运行我的 GWT 应用程序时，tomcat 日志中出现错误。请帮我？

```
 org.apache.catalina.core.ApplicationContext log 

    SEVERE: Exception while dispatching incoming RPC call
    com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract com.vision.mil.client.dto.LoginDTO com.vision.mil.client.rpc.LoginService.processLogin(com.vision.mil.client.dto.MsUserDTO)' threw an unexpected exception: javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
    Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown database 'vision-mil2'
    Error Code: 1049
        at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
        at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
        at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
        at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
        at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:58:55.493

“未知数据库‘vision-mil2’。”

似乎尚未创建数据库。

确保数据库目录没有只读权限，并确保该数据库是真正创建的。

# javascript - 遍历主 div 内的其他 div 时，div onmouseover 丢失

> ID：12777451
> 
> 赞同：1
> 
> 时间：2012-10-08T07:52:06.040
> 
> 标签：javascript, onmouseover

我有一个`li`，其他一些元素，比如`divs`，`inputs`在这个里面`li`，以及gridview里面的所有东西。

我有一个`onmouseover="calcRoute();"`。`li`

*`PROBLEM`*：我注意到在内部元素上悬停`divs`并从元素div出来到父元素`div`会导致`calcRoute();`再次执行，即再次绑定谷歌地图，这会导致由于地图重新绑定而闪烁。

*`TRIED`*:`onmouseenter`和`onmouseleave`, 但它不会在所有浏览器中都支持

```
<li onmouseover="calcRoute(8.4572136,76.94017529999996);return false; ">
  <div class="li-inner">

   <input type="image" name="ctl00$ContentPlaceHolder1$FESearchListingControl1$dlPhotoView$ctl01$imgPhotoView" id="ctl00_ContentPlaceHolder1_FESearchListingControl1_dlPhotoView_ctl01_imgPhotoView" src="../UploadedImages/House2469-22-8-2012.jpg" style="height:142px;width:219px;border-width:0px;">
   <div class="title">

   <a id="ctl00_ContentPlaceHolder1_FESearchListingControl1_dlPhotoView_ctl01_lblPropName" href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$FESearchListingControl1$dlPhotoView$ctl01$lblPropName','')">Halloween</a>
    <div class="star"></div>
    </div>
    <div class="address">
        <div class="left-location">

        <span id="ctl00_ContentPlaceHolder1_FESearchListingControl1_dlPhotoView_ctl01_lblDistrict">Trivandrum</span>

        </div>
        <div class="right-price"><span class="WebRupee">Rs</span>
            <span id="ctl00_ContentPlaceHolder1_FESearchListingControl1_dlPhotoView_ctl01_lblPrice">500.00</span>
        </div>    
    </div>
  </div>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:03:19.953

您可以将 id 附加到 li 元素并将此 id 传递给 calcRoute 函数。

```
onmouseover="calcRoute(8.4572136,76.94017529999996, this.id); 
```

然后，在这个函数中，你可以为这个 li 元素设置一个标志，它之前被悬停过。

```
var hoveredItems = {}; // this is a global object

function calcRoute(x,y,id) {
 // put this control on top so that recurring operations will be prevented from being run.
 if(hoveredItems[id]) return;
 else hoveredItems[id] = true; 
 ..
} 
```

也许这有帮助...

# json - 在 AWS::CloudFormation::Init 下指定多个“源”的 JSON 格式是什么？

> ID：12777454
> 
> 赞同：2
> 
> 时间：2012-10-08T07:52:14.800
> 
> 标签：json, amazon-web-services

根据[AWS CloudFormation 文档](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/aws-resource-init.html#aws-resource-init-sources)，我只是`,`为多个 zip 文件添加了一个并添加了更多源。

当我启动堆栈时，只有最后一个源（zip 文件）被下载并解压缩到正确的位置，所有其他的都被忽略了。

可能我的 JSON 是错误的。任何人 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:55:48.420

我收到了 AWS 的回复。

您不能拥有相同类型的两个键，例如，两个键上方是“C:\folder1\folder2\”和“C:\folder1\folder2\”。它们一定是不同的。

因此，我将“C:\folder1\folder2\”之一更改为“C:\folder1\folder2\folder3”，并更改了我的 zip 文件以适应此更改，以便最终内容位于正确的文件夹结构中。

# profiling - 为什么浮点运算被认为是昂贵的？

> ID：12777455
> 
> 赞同：3
> 
> 时间：2012-10-08T07:52:15.903
> 
> 标签：profiling, flops

我读到 gprof（函数分析）和其他分析方法可以返回在程序执行过程中发生的浮点操作的数量，因此想知道为什么 Flops 比常规操作昂贵得多？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T08:15:39.373

我假设您在谈论 x86，但以下很多内容同样适用于其他架构

浮点运算很昂贵，因为对浮点数的运算比对整数的运算要昂贵得多。就是这么简单。整数的格式使得加法和减法在硬件中实现起来非常简单。浮点数（几乎总是）在[IEEE 754](http://en.wikipedia.org/wiki/IEEE_floating_point)中实现，它将数字存储为符号、指数和尾数，这允许表示非常大和非常小的数字，但它是以运算速度为代价的。如果数字只有 3 位小数，则可以使用整数，最后除以 3；广泛的精度使事情复杂化。

话虽如此，现代处理器在浮点数方面比以前更好。浮点数学最初是在一个可选的协处理器上实现的——特别是[英特尔 80387——](http://en.wikipedia.org/wiki/X87)它只能通过特殊指令来访问。您将值压入 x87 堆栈，执行操作，然后将其弹出回硬件寄存器。很慢，因为它不得不离开处理器。更重要的是，使用这些特定操作变得“有风险”，因为您无法确定处理器是否存在——如果不存在，您的程序将工作，但它会使用模拟协处理器的软件例程。如果你是一个游戏开发者，你不能依赖，比如说，[平方根](http://en.wikipedia.org/wiki/Fast_inverse_square_root)速度快，您可以自己完成工作，并且您在所有系统上的运行速度都一样快——在某些系统上运行速度不会稍快，而在其他系统上运行速度则慢得多。

如今，处理器具有为性能而设计的[特殊浮点运算](http://en.wikipedia.org/wiki/Streaming_SIMD_Extensions)，更重要的是，保证存在。所以它们非常快，虽然浮点运算不可避免地比整数运算慢，但它们通常不足以解决问题——尤其是以错误和复杂性为代价的。更重要的是，[这个答案](https://stackoverflow.com/a/2550851/52721)表明，在大多数情况下，它是一种洗涤。

无论如何，性能现在已经足够好，以至于老格言开始了——程序员的时间比机器时间更重要，而且你肯定会花更多的时间来编写一些避免浮点数的花哨算法，而不是仅仅使用他们。

# asp.net-mvc - 如何在编辑具有空值的条目时从数据库中获取值

> ID：12777458
> 
> 赞同：0
> 
> 时间：2012-10-08T07:52:22.250
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

**错误消息：** ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

如果 fileupload 具有空值（不更改），我想从数据库中获取 Image Url。我的意思是如果我改变 smallImage 而不是改变 LargeImage，那么它应该从 DB 中获取 largeImage 值。

```
[HttpPost]
    public ActionResult Edit(Blog blog, HttpPostedFileBase smallImage, HttpPostedFileBase largeImage)
    {
        if (ModelState.IsValid)
        {
            if (smallImage != null)
            {
                blog.SmallImage = smallImage.ContentLength + "_" + smallImage.FileName;
                string filepath = Path.Combine(Server.MapPath("~/Content/Blog/"), smallImage.ContentLength + "_" + smallImage.FileName);
                smallImage.SaveAs(filepath);
            }
            else
            {
                blog.SmallImage = db.Blogs.Find(blog.ID).SmallImage;
            }
            if (largeImage != null)
            {
                blog.LargeImage = largeImage.ContentLength + "_" + largeImage.FileName;
                string filepath = Path.Combine(Server.MapPath("~/Content/Blog/"), largeImage.ContentLength + "_" + largeImage.FileName);
                largeImage.SaveAs(filepath);
            }
            else
            {
                blog.LargeImage = db.Blogs.Find(blog.ID).LargeImage;
            }
            blog.PostDate = Convert.ToDateTime(DateTime.Now.ToShortDateString());
            db.Entry(blog).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(blog);
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T07:56:32.513

看起来这里的问题是您两次加载同一个博客。

而是加载一次，如下所示：

```
Blog existingBlog = db.Blogs.Find(blog.ID);
if (smallImage != null)
            {
                blog.SmallImage = smallImage.ContentLength + 
                                        "_" + smallImage.FileName;
                string filepath = Path.Combine(Server.MapPath("~/Content/Blog/"),
                           smallImage.ContentLength + "_" + smallImage.FileName);
                smallImage.SaveAs(filepath);
            }
            else
            {
                blog.SmallImage = existingBlog.SmallImage;
            }
            if (largeImage != null)
            {
                blog.LargeImage = largeImage.ContentLength + "_" +
                                     largeImage.FileName;
                string filepath = Path.Combine(Server.MapPath("~/Content/Blog/"),
                                                 largeImage.ContentLength + "_" +
                                                 largeImage.FileName);
                largeImage.SaveAs(filepath);
            }
            else
            {
                blog.LargeImage = existingBlog.LargeImage;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:03:15.727

你们都在加载博客的副本

```
 db.Blogs.Find(blog.ID) 
```

并将另一个具有相同 id 的内容附加到上下文中

```
db.Entry(blog).State = EntityState.Modified; 
```

意味着您在上下文中有 2 个相同博客的副本（不允许）。

我建议用视图模型替换回发的那个，比如

```
public ActionResult Edit(BlogViewModel viewModel, HttpPostedFileBase smallImage, HttpPostedFileBase largeImage)
{
    if (!ModelState.IsValid)
    {
        return View(viewModel);
    }
        var blog =  db.Blogs.Find(viewModel.ID);
        if (smallImage != null)
        {
            blog.SmallImage = smallImage.ContentLength + "_" + smallImage.FileName;
            string filepath = Path.Combine(Server.MapPath("~/Content/Blog/"), smallImage.ContentLength + "_" + smallImage.FileName);
            smallImage.SaveAs(filepath);
        }

        if (largeImage != null)
        {
            blog.LargeImage = largeImage.ContentLength + "_" + largeImage.FileName;
            string filepath = Path.Combine(Server.MapPath("~/Content/Blog/"), largeImage.ContentLength + "_" + largeImage.FileName);
            largeImage.SaveAs(filepath);
        }

        blog.Title = viewModel.Title;
        blog.Body = viewModel.Body; //etc

        db.SaveChanges();
        return RedirectToAction("Index");
} 
```

# java - 使用自定义版本的工件而不是来自 repo 的工件构建 maven 项目

> ID：12777462
> 
> 赞同：1
> 
> 时间：2012-10-08T07:52:38.473
> 
> 标签：java, maven, jboss, maven-3

我是 maven 新手，对于小问题感到抱歉：**需要使用我的 artifact 版本而不是来自 repo 的版本来构建 maven 项目**。

**更详细：** 我从 github 下载了 jboss 源代码并使用 maven 3 构建它们。太棒了！我需要对名为“picketbox”的 jboss 依赖项进行一些更改。现在它是 jboss 的“pom.xml”中的一个工件。

我在 my_picketbox.jar 文件中构建了自己的纠察箱版本。**我如何告诉 maven 使用我的 .jar 而不是来自 repo 的那个？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:01:53.017

也许我遗漏了一些东西，但是如果您明确地重命名了工件，那么只需在相关的 JBoss POM 文件中替换`picketbox`为。`my_picketbox`

```
<dependency>
    <groupId>...</groupId>
    <artifactId>my_picketbox</artifactId>
    <version>...</version>
</dependency> 
```

当然，您可以通过`mvn install`'ing 确保您的工件在您的本地存储库中。

干杯，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T08:04:17.937

我会使用 maven-install 插件安装 jar 文件。

[http://maven.apache.org/plugins/maven-install-plugin/install-file-mojo.html](http://maven.apache.org/plugins/maven-install-plugin/install-file-mojo.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T08:18:51.217

首先，将您的 Picketbox 版本安装到本地 Maven 存储库中。如果您的自定义版本是 Maven 项目，您可以通过运行

```
mvn install 
```

如果您的自定义 Picketbox 版本不是 Maven 项目，请将 Jar 本身安装到您的本地 Maven 存储库中，如下所示：

```
mvn install:install-file -Dfile=my_picketbox.jar -DgroupId=org.picketbox -DartifactId=my_picketbox -Dversion=2.3 -Dpackaging=jar 
```

然后通过将此代码段添加到您正在构建的 JBoss 项目的文件中来更改 JBoss 所依赖的 Picketbox 的版本`pom.xml`（用这个替换对 pocketbox 的现有依赖项）：

```
<dependency>
    <groupId>org.picketbox</groupId>
    <artifactId>my_picketbox</artifactId>
    <version>2.3</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T08:03:10.187

```
<dependency>
    <groupId>xxx</groupId>
    <artifactId>xxx</artifactId>
    <version>x.x.x</version>
    <scope>system</scope>
    <systemPath>${project.basedir}/lib/xxxx.jar</systemPath>
</dependency> 
```

这允许您引用未存储在本地而不是 Maven 中心的库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T08:08:03.137

Maven 采用 POM 文件中指定的内容；请注意，包括您所写的依赖项在内的 POM 可能会被埋得很深，甚至不会在您下载的源代码中。

在您的项目树中搜索有问题的工件并将其版本号替换为您的版本。如果这没有帮助，请按照 Nils 在另一个答案中所说的那样做，但请记住在**原始版本**中安装工件（您可能必须先在本地存储库中找到它并删除它）。

# ios - -[NSURL _CFURLRequest]：发送到实例的无法识别的选择器

> ID：12777472
> 
> 赞同：2
> 
> 时间：2012-10-08T07:53:15.017
> 
> 标签：ios, json, nsurlconnection, google-places-api, jsonkit

我在我的程序中使用 JSONKit 来解析 google places api，但我的应用程序崩溃并出现以下错误 **-[NSURL _CFURLRequest]: unrecognized selector sent to instance**

```
 NSString* URL = [NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/json?location=28.632808,77.218276&radius=500&types=atm&sensor=false&key=AIzaSyDHft2g5IDshIpXS17uOtZzkqGGgj-p1RQ"];

NSError* error = nil;
NSURLResponse* response = nil;

NSURLRequest *URLReq = [NSURL URLWithString:URL];
//[request setURL:URL];
//[request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
//[request setTimeoutInterval:30];

NSData* data = [NSURLConnection sendSynchronousRequest:URLReq returningResponse:&response error:&error];

if (error)
{
    NSLog(@"Error performing request %@", URL);
    NSLog(@"%@", [error localizedDescription]);
    return;
}

NSDictionary *json = [data objectFromJSONData];

NSArray *places = [json objectForKey:@"results"];

NSLog(@"Google Data: %@", places); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T08:04:37.490

您设置的“ `NSURLRequest`”不正确，应该[`requestWithURL:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLRequest/requestWithURL:)改用。

代替

```
NSURLRequest *URLReq = [NSURL URLWithString:URL]; 
```

做

```
NSURLRequest * urlReq = [NSURLRequest requestWithURL: [NSURL URLWithString: URL]]; 
```

另外，一个快速的 FYI：Objective C 约定是对变量和 ivars 使用小写字母。使用大写字母作为您的班级名称。换句话说，将“ `URLReq`”更改为“ `urlReq`” ，将“”更改`URL`为“ `url`”（甚至更好，更具体的内容，例如“ `googlePlaceURL`”）。

# objective-c - ios 6 App 正在旋转，即使使用 shouldAutorotate:NO

> ID：12777474
> 
> 赞同：6
> 
> 时间：2012-10-08T07:53:27.053
> 
> 标签：objective-c, rotation, ios6

从 iOS6 开始，我在旋转方面遇到了很大的问题。我实现了所有新的旋转方法（shouldAutorotate、preferredInterfaceOrientationForPresentation、supportedInterfaceOrientation），但所有视图仍在旋转。有趣的是，视图保持它们的大小，而窗口的其余部分（在景观中）是黑色的。

这就是我实现它的方式，有什么问题吗？

```
#pragma mark -
#pragma mark - InterfaceOrientation iOS 5 
//Deprecated in iOS 6
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark -
#pragma mark - InterfaceOrientation iOS 6

- (BOOL)shouldAutorotate{
    return NO;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
    return UIInterfaceOrientationPortrait;
}

- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T08:14:11.257

我通过为导航控制器创建一个类别解决了这个问题：

```
@implementation UINavigationController (iOS6fix)

-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
}

@end 
```

感谢大家的回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:05:42.880

我也有，即使我把它调成NO，它也会旋转。

两种选择：

1.  转到您的项目设置并更改可能的方向

2.  删除 AUTOROTATE 的所有方法。即使它们设置为 NO，它们也会为我旋转。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T21:38:21.333

我在 UIViewController 上使用了以下类别，仅在 iOS5 和 6 上具有横向。也许它可以帮助某人。

```
#import <UIKit/UIKit.h>

@implementation UIViewController (iOS6fix)

-(BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeLeft;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
}

@end 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-08T08:19:53.147

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{
    //Make sure your window to assgin the view controller object to rootViewController, Please don't add controller view as a sub view on window.
    self.window.rootViewController = viewController;
} 
```

# jquery - 在 MVC 应用程序中的 jquery post 回调中，图像未加载到移动设备中

> ID：12777480
> 
> 赞同：0
> 
> 时间：2012-10-08T07:54:04.263
> 
> 标签：jquery, asp.net-mvc

我有下面的 jquery`post`方法，其中有一个回调函数，它将图像加载到 img 标签。如果 bytearray 的大小更大，则不会加载图像，`iPad`但对于小型数组，它会加载。

```
$.post(url, info, function (id) {
     $('#imgPDFView').attr('src', '/Report/Render?ReportId=' + id);
}); 
```

渲染方法`FileStreamResult`从 MVC 控制器返回我。

Render 方法从报表服务器创建一个字节数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T07:42:46.030

我通过用 iframe 替换 img 标签解决了这个问题。

```
$('#imgPDFView').attr('src', '/Report/Render?ReportId=' + id); 
```

我仍然遇到图像宽度为 100% 的问题，我在加载 iframe 后解决了如下问题

```
var $iFrame = $('#imagePDFView');
$iFrame.load(function () {
     var $img = $(window.frames[0].document).find('img');
     if ($img.length > 0) {
         $img.attr('style', 'width:100%');
     }
}); 
```

# c++ - 通过 ARM NEON 组件对元素乘法进行最大优化

> ID：12777483
> 
> 赞同：8
> 
> 时间：2012-10-08T07:54:15.277
> 
> 标签：c++, optimization, assembly, arm, neon

我正在为双 Cortex-A9 处理器优化两个一维数组的元素乘法。Linux 在板上运行，我使用的是 GCC 4.5.2 编译器。

所以以下是我的 C++ 内联汇编函数。src1、src2 和 dst 是 16 字节对齐的。

更新：可测试代码：

```
void Multiply(
    const float* __restrict__ src1,
    const float* __restrict__ src2,
    float* __restrict__ dst,
    const unsigned int width,
    const unsigned int height)
{
    int loopBound = (width * height) / 4;
    asm volatile(
        ".loop:                             \n\t"
        "vld1.32  {q1}, [%[src1]:128]!      \n\t"
        "vld1.32  {q2}, [%[src2]:128]!      \n\t"
        "vmul.f32 q0, q1, q2                \n\t"
        "vst1.32  {q0}, [%[dst]:128]!       \n\t"
        "subs     %[lBound], %[lBound], $1  \n\t"
        "bge      .loop                     \n\t"
        :
        :[dst] "r" (dst), [src1] "r" (src1), [src2] "r" (src2),
        [lBound] "r" (loopBound)
        :"memory", "d0", "d1", "d2", "d3", "d4", "d5
    );
}

//The following function describes how to test the element wise multiplication
void Test()
{
    const unsigned int width = 1024, height = 1024;
    float* src1 __attribute__((aligned(16))) = new float[width * height];
    float* src2 __attribute__((aligned(16))) = new float[width * height];
    float* dst __attribute__((aligned(16))) = new float[width * height];
    for(unsigned int i = 0; i < (width * height); i++)
    {
        src1[i] = (float)rand();
        src2[i] = (float)rand();
    }
    Multiply(src1, src2, dst, width, height);

    std::cout << dst[0] << std::endl;
} 
```

1024*1024 值的计算大约需要 0.016 秒。（两个线程 - 每个线程计算数组的一半）。天真的解释，一次迭代的计算需要 122 个周期。这似乎有点慢。但瓶颈在哪里？

我什至尝试了`pld`在 L2 缓存中预加载元素的命令，通过每次迭代计算多达 20 个值并重新排序指令以使处理器不等待内存来“展开”循环。我没有得到那么快的加速（最多快 0.001 秒）。

您对加快计算速度有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T21:32:17.660

我对NEON了解不多。但是，我认为您的数据依赖性会导致性能问题。我建议你用一些负载来启动循环，然后将它们放在*multiply*和*store*之间。我认为*商店*可能会阻塞，直到*乘法*完成。

```
 asm volatile(
    "vld1.32  {q1}, [%[src1]:128]!      \n\t"
    "vld1.32  {q2}, [%[src2]:128]!      \n\t"
    ".loop:                             \n\t"
    "vmul.f32 q0, q1, q2                \n\t"
    "vld1.32  {q1}, [%[src1]:128]!      \n\t"
    "vld1.32  {q2}, [%[src2]:128]!      \n\t"
    "vst1.32  {q0}, [%[dst]:128]!       \n\t"
    "subs     %[lBound], %[lBound], $1  \n\t"
    "bge      .loop                     \n\t"
    :
    :[dst] "r" (dst), [src1] "r" (src1), [src2] "r" (src2),
    [lBound] "r" (loopBound)
    :"memory", "d0", "d1", "d2", "d3", "d4", "d5
); 
```

这样，您应该能够将负载与乘法*并行。*您将需要过度分配源数组或更改循环索引并进行最终的乘法和存储。如果 NEON 操作不影响条件代码，您也可以重新排序*潜艇*并提前放置。

**编辑：**事实上，*Cortex A-9 媒体处理引擎*文档建议交错 ARM 和 NEON 指令，因为它们可以并行执行。此外，NEON 指令似乎设置了*FPSCR*而不是 ARM *CPSR*，因此重新排序`subs`会减少执行时间。您还可以*缓存*对齐循环。

# c# - 添加日期时间？DataMemberto DataContract - 现有客户端因“可空对象必须有值”而失败

> ID：12777484
> 
> 赞同：1
> 
> 时间：2012-10-08T07:54:34.357
> 
> 标签：c#, .net, wcf, datetime, nullable

我想在不破坏现有客户端的情况下向 WCF DataContract 添加更多 DataMembers。这就是为什么我将它们添加为可为空的 DateTime 对象，但是客户端因“可为空的对象必须具有值”而失败。

我明白这与`DateTime? something = (DateTime?) null;`. 我怎样才能在不改变所有现有客户的情况下完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:13:48.270

```
[DataMember(IsRequired = false)] 
```

# iphone - 通过 ABAddressBookGetPersonWithRecordID 获取 NULL

> ID：12777485
> 
> 赞同：1
> 
> 时间：2012-10-08T07:54:36.743
> 
> 标签：iphone, objective-c, ipad

我正在使用`ABAddressBookGetPersonWithRecordID` 以获取持续记录。但是返回的值是`NULL`. 我在地址簿中有三个联系人，但它返回 Null。我正在 iOS 5 模拟器上测试代码。我使用的代码如下所示。

```
for(int counter = 1;counter <= ABAddressBookGetPersonCount(addressBookRef); counter++)
{
    ABRecordRef person = ABAddressBookGetPersonWithRecordID(addressBookRef, (ABRecordID)counter);
    NSNumber *recordId = [NSNumber numberWithInteger:ABRecordGetRecordID(person)];
    NSLog(@"record id is %@",recordId);

    if (person == NULL)
    {
        continue;
    }
    else
    {
        [VCard generateVCardStringWithRecID:counter];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:16:55.687

尝试以下代码以从电话簿中获取人员的所有信息

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
{
    ABAddressBookRef addressBook = ABAddressBookCreate();

    int i;
    NSString *strName = @"";
    NSString* company = @"";
    NSString *address = @"";
    NSString *suburb = @"";
    NSString *postalcode = @"";
    NSString *state = @"";
    NSString *country = @"";
    NSString *mobile = @"";
    NSString *phone = @"";
    NSString *emailid = @"";

    strName = (NSString *)ABRecordCopyCompositeName((ABRecordRef) person);
    CFStringRef name = ABRecordCopyCompositeName((ABRecordRef) person);
    company  = (NSString *)ABRecordCopyValue((ABRecordRef) person, kABPersonOrganizationProperty);

    NSArray*  allPeople = (NSArray *)ABAddressBookCopyPeopleWithName(addressBook,name);
    CFRelease(name);

    for (i = 0; i < [allPeople count]; i++)
    {
        ABRecordRef record = [allPeople objectAtIndex:i];

        ABMutableMultiValueRef multiValue = ABRecordCopyValue(record, kABPersonAddressProperty);
        for(CFIndex i=0; i<ABMultiValueGetCount(multiValue); i++)
        {
            NSString* HomeLabel = (NSString*)ABMultiValueCopyLabelAtIndex(multiValue, i);
            if([HomeLabel isEqualToString:@"_$!<Home>!$_"])
            {
                CFDictionaryRef dict = ABMultiValueCopyValueAtIndex(multiValue, i);
                address = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressStreetKey)];
                suburb = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressCityKey)];
                postalcode = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressZIPKey)];
                state = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressStateKey)];
                country = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressCountryKey)];

                CFRelease(dict);
            }
            CFRelease(HomeLabel);
        }
        CFRelease(multiValue);
    }
    CFRelease(allPeople);

    ABMultiValueRef phones =(NSString*)ABRecordCopyValue(person, kABPersonPhoneProperty);
    NSString* mobileLabel = nil;
    for(CFIndex i = 0; i < ABMultiValueGetCount(phones); i++)
    {
        mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, i);
        if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel])
        {
            mobile = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
            NSLog(@"phone   %@",mobile);
        }
        else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel])
        {
            phone = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
            NSLog(@"phone   %@",phone);

            CFRelease(mobileLabel);
            break ;
        }
        CFRelease(mobileLabel);

    }
    CFStringRef value, label;
    ABMutableMultiValueRef multi = ABRecordCopyValue(person, kABPersonEmailProperty);
    CFIndex count = ABMultiValueGetCount(multi);
    if (count == 1)
    {
        value = ABMultiValueCopyValueAtIndex(multi, 0);
        emailid = (NSString*) value;
        NSLog(@"self.emailID   %@",emailid);
        CFRelease(value);
    }
    else
    {
        for (CFIndex i = 0; i < count; i++)
        {
            label = ABMultiValueCopyLabelAtIndex(multi, i);
            value = ABMultiValueCopyValueAtIndex(multi, i);

            // check for Work e-mail label
            if (CFStringCompare(label, kABWorkLabel, 0) == 0)
            {
                emailid = (NSString*) value;
                NSLog(@"self.emailID   %@",emailid);
            }
            else if(CFStringCompare(label, kABHomeLabel, 0) == 0)
            {
                emailid = (NSString*) value;
                NSLog(@"self.emailID   %@",emailid);
            }

            CFRelease(label);
            CFRelease(value);
        }
    }
    CFRelease(multi);

        }

    CFRelease(phones);
    CFRelease(addressBook);
    [self dismissModalViewControllerAnimated:YES];

    return NO;

} 
```

# java - 使用 JNA Jar 及其方法时产生运行时错误

> ID：12777492
> 
> 赞同：-1
> 
> 时间：2012-10-08T07:55:11.983
> 
> 标签：java, swing, transparency

我想使用 Java 透明 JFrame。我正在使用 JNA JAR 它是平台。我试过这段代码：

```
WindowUtili.setWindowTransperncey(this,true); 
```

但它会引发以下错误：`Runtime Error ClassNotFound`

我想知道上述错误的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:04:30.527

你得到一个`ClassNotFound`异常，因为`WindowUtili`它不是一个类，这个类被调用[`WindowUtils`](http://jna.java.net/javadoc/platform/com/sun/jna/platform/WindowUtils.html)。

此外，您想要的方法是[`setWindowTransparent`](http://jna.java.net/javadoc/platform/com/sun/jna/platform/WindowUtils.html#setWindowTransparent%28java.awt.Window,%20boolean%29)，而不是`setWindowTransperncey`。

# mysql - 如何使用以下模式编写此查询？

> ID：12777494
> 
> 赞同：0
> 
> 时间：2012-10-08T07:55:24.887
> 
> 标签：mysql

我的数据库架构如下：

```
Teams(teamID,teamName,home,leagueName)
Games(gameID,homeTeamID,guestTeamID,date) 
```

我如何查询（使用 SQL）`teamID`团队与 team1 但不与 team2 对抗的所有 s。'team1 和 team2 是列中的一些数据值`teamName`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:12:50.903

> 球队与 team1 比赛但未与 team2 比赛的所有 teamID

```
SELECT t1.teamName AS 'Home', t2.TeamName AS 'Guest', g.Date
FROM
(
   SELECT *
   FROM Games
   WHERE (homeTeamID  = 'Team 1' OR guestTeamID  =  'Team 1')
     AND (homeTeamID <> 'Team 2' OR guestTeamID <> 'Team 1')
) g ON t.teamID = hg.homeTeamID
INNER JOIN teams t1 ON g.homeTeamID  = t1.teamId 
INNER JOIN teams t2 ON g.guestTeamID = t2.teamId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:00:08.610

假设没有`HomeTeam`或就没有游戏`GuestTeam`。试试这个，

```
SELECT  a.gameID,
        b.TeamName AS HomeTeam,
        c.TeamName AS GuestTeam,
        a.`date`
FROM    GAMES a
        INNER JOIN Teams b
            ON a.homeTeamID = b.teamID
        INNER JOIN Teams c
            ON a.guestTeamID = c.teamID
WHERE   (
            b.TeamName = 'Team1' AND
            c.teamName <> 'Team2'
        )
        OR
        (
            c.TeamName = 'Team1' AND
            b.teamName <> 'Team2'
        ) 
```

# android - 嵌套 JSON 对象长度

> ID：12777496
> 
> 赞同：1
> 
> 时间：2012-10-08T07:55:44.293
> 
> 标签：android, json

我有以下 JSON 字符串。

```
{
  "data": [
    {
      "city_id": "1",
      "city_name_eng": "Multan",
      "0": {
        "category_id": "1",
        "city_id": "1",
        "category_name_eng": "Mango",
        "0": {
          "product_id": "1",
          "category_id": "1",
          "product_name_eng": "Mango1"
        },
        "1": {
          "product_id": "2",
          "category_id": "1",
          "product_name_eng": "Mango2"
        },
        "2": {
          "product_id": "3",
          "category_id": "1",
          "product_name_eng": "Mango3"
        },
        "3": {
          "product_id": "4",
          "category_id": "1",
          "product_name_eng": "Mango1"
        }
      },
      "1": {
        "category_id": "2",
        "city_id": "1",
        "category_name_eng": "Shoes"
      },
      "2": {
        "category_id": "3",
        "city_id": "1",
        "category_name_eng": "Bank"
      }
    },
    {
      "city_id": "2",
      "city_name_eng": "Lahore",
      "3": {
        "category_id": "4",
        "city_id": "2",
        "category_name_eng": "Food"
      },
      "4": {
        "category_id": "5",
        "city_id": "2",
        "category_name_eng": "Computer"
      },
      "5": {
        "category_id": "6",
        "city_id": "2",
        "category_name_eng": "Mobile"
      }
    }
  ]
} 
```

我想要 JSONObject 的长度。基本上，第一个对象`"city_id": "1"` 有 4 个嵌套的 JSONObjects 和 2 个值，即 city_id 和 city_name_eng。当我使用`objJSON.length()`时，它给了我 6 的长度。但相反，我想要 4 个嵌套的 JSONObjects，我怎样才能在运行时得到它？（嵌套的 jsonobjects 是 3 还是 4 或任何数字）

如何区分嵌套的 JSONObjects 和键值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:20:42.793

如果该网站是您自己的，那么我建议修改代码以在适当的地方返回`JSONArray`s。

否则，`jsonObj.keys()`将返回一个`Iterator`用于迭代键并解析对象的方法。

# c# - 如何在 C# 中使用 Word 文档向其传输数据？

> ID：12777504
> 
> 赞同：0
> 
> 时间：2012-10-08T07:56:23.683
> 
> 标签：c#, ms-word

我需要将可能的数据发送到 Word 文档。我找到了一个这样的样本：

```
public class CCWordApp 
{
    private Microsoft.Office.Interop.Word.ApplicationClass oWordApplic; // a reference to Word application
    private Microsoft.Office.Interop.Word.Document oDoc;                    // a reference to the document

    public CCWordApp()
    {
        // activate the interface with the COM object of Microsoft Word
        oWordApplic = new Microsoft.Office.Interop.Word.ApplicationClass();
    }

    // Open a file (the file must exists) and activate it
    public void Open( string strFileName)
    {
        object fileName = strFileName;
        object readOnly = false;
        object isVisible = true;
        object missing = System.Reflection.Missing.Value;
                    object bookmarkName="bookmarkname";
        oDoc = oWordApplic.Documents.Open(ref fileName)

        oDoc.Activate();

      if (oWordDoc.Bookmarks.Exists(bookmarkName.ToString())) 
        { 
          Bookmark bookmark = oWordDoc.Bookmarks.get_Item(ref bookmarkName);
          bookmark.Range.Text="My Text";   
          bookmark.Select(); 
        } 

    }
} 
```

此示例工作正确，但取决于该文件必须存在。我将我的 word 文件作为字节 [] 存储在数据库中。如何使用此 COM 对象打开我的 word 文件？

# android - Dx 处理外部库需要很长时间

> ID：12777506
> 
> 赞同：1
> 
> 时间：2012-10-08T07:56:29.023
> 
> 标签：android, dependencies, dx

我的 Android 应用程序使用了大量非平凡的外部库。这些库都是用 Java 编写的，只是简单地添加到构建路径中。

从 Eclipse 中启动应用程序需要很长时间，大约 5 分钟。这非常令人沮丧！

我启用了详细的 android 构建输出。这表明构建过程正在迭代`*.class`外部库中的所有文件。我得到了数百条这样的行：

```
...
Dx processing android/support/v4/app/FragmentTransaction.class...
Dx processing android/support/v4/app/FragmentManagerImpl$3.class...
Dx processing android/support/v4/app/LoaderManagerImpl.class...
...
Dx processing com/prosysopc/ua/client/ServerStatusListener.class...
...
Dx processing org/opcfoundation/ua/core/BrowseNextRequest.class...
... 
```

（这只是一个小样本，我又得到了数百个`*.class`）

我不太确定 Dx 工具在这里做什么，但它肯定很烦人！

更糟糕的是，每次启动都会重复这个过程，没有缓存，没有任何东西......

可能的想法：

*   这个地方有缓存吗？在哪里？也许它是只读的，因此不会持续存在？
*   我可以完全禁用我的开发版本的“DX 处理”步骤吗？

任何可能的解决方案或至少想法？这真的让我发疯;-)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T22:19:59.580

dx 工具能够合并 dex 文件。因此，一种选择是将这些库预先转换为 dex 格式，并让 dx 将它们与您的主要应用程序类合并。

默认的 ant 构建脚本似乎不支持这个工作流，我怀疑 eclipse 构建也有类似的东西。您将不得不手动执行一些步骤，或者调整 ant 构建脚本。

一些注意事项：

1.  要让 dx 识别和合并一个库，它需要是一个包含 classes.dex 文件的 jar/apk/zip
2.  您仍然需要原始的 java jar，以便您可以针对它们进行编译。您需要防止将 java jars 传递给 dx，并改为传递 dex jars。
3.  如果您使用 proguard 之类的东西，事情会变得更加“有趣” :)

我将把所有这些工作和 hackiness 是否值得由你来决定。

# c# - WCF 服务的 ASP.NET 中的模拟

> ID：12777510
> 
> 赞同：2
> 
> 时间：2012-10-08T07:56:39.570
> 
> 标签：c#, asp.net, wcf

我在同一个 web.config 中有一个带有 ASP.NET 站点和 WCF 服务的 WebService。到目前为止，我可以通过设置在 WCF 服务中使用 ASP.NET 模拟

```
<system.web>
    <compilation targetFramework="4.0" debug="false"/>
    <!-- switch custom errors of-->
    <identity impersonate="true"/>
    <customErrors mode="Off"/>
</system.web> 
```

但是，现在（出于其他原因-> ASP.NET 部分的无 Cookie 会话状态）我必须设置

```
aspNetCompatibilityEnabled="true" 
```

选项为假。有了这个，我失去了对 WCF 服务的 ASP.NET 模拟。我的 WCF 服务之一需要对服务器上的 IO 操作进行模拟...我想知道如何通过直接在 WCF 服务配置上定义它来获得与以前相同的模拟。

我尝试过（不成功）是设置

```
[OperationBehavior(Impersonation = ImpersonationOption.Required)] 
```

关于 WCF 服务中方法的实现，然后指定

```
<endpoint address="" binding="wsHttpBinding" contract="IService">
  <identity>
    <servicePrincipalName value="HOST/YourMachineName" />
    <dns value="" />
  </identity>
</endpoint> 
```

在 web.config 中（显然我的服务具有正确的值），如[http://msdn.microsoft.com/en-us/library/ff650591.aspx](http://msdn.microsoft.com/en-us/library/ff650591.aspx)中所述。

但是，在此之后无法再调用 WCF 服务......它告诉我 WsHttpBinding 不为合同提供身份。

我错过了什么重要的东西吗？

编辑：错误信息的翻译：

: 合同操作“{0}”需要 Windows 身份才能自动模拟。代表调用者的 Windows 身份不是通过为合同 ('{3}'、'{4}' 的绑定 ('{1}'、'{2}') 提供的。

（原来的错误信息是德语...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:18:33.523

尝试添加与此类似的内容

```
<system.serviceModel>
        <behaviors>
            <endpointBehaviors>
                <behavior name="DelegationBehaviour">
                    <clientCredentials>
                        <windows allowNtlm="false" allowedImpersonationLevel="Delegation"></windows>
                    </clientCredentials>
                    <dataContractSerializer maxItemsInObjectGraph="4194304"></dataContractSerializer>
                </behavior>
            </endpointBehaviors>
        </behaviors>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_SampleWebService" >
                    <readerQuotas maxArrayLength="16384" maxBytesPerRead="4096" maxDepth="32" maxNameTableCharCount="16384" maxStringContentLength="8192"></readerQuotas>
                    <security mode="TransportCredentialOnly">
                        <message algorithmSuite="Default" clientCredentialType="UserName"></message>
                        <transport clientCredentialType="Windows" proxyCredentialType="None" realm=""></transport>
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://server/WebServices/Service/Service.svc" behaviorConfiguration="DelegationBehaviour" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_SampleWebService" contract="SampleWS" name="BasicHttpBinding_SampleEndpoint"></endpoint>
        </client>
    </system.serviceModel> 
```

这是服务器端代码

```
 <system.serviceModel>
    <services>
      <service behaviorConfiguration="CustomBehavior" name="CustomWebService">
        <endpoint address="" behaviorConfiguration="" binding="basicHttpBinding" bindingConfiguration="basicHttpBinding_Service" contract="WebService"/>
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
        <binding name="basicHttpBinding_Service" maxReceivedMessageSize="4194304" receiveTimeout="00:30:00">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows"/>
            <message clientCredentialType="UserName"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="CustomBehavior">
          <dataContractSerializer maxItemsInObjectGraph="4194304" ignoreExtensionDataObject="True"/>
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true"/>
          <serviceAuthorization impersonateCallerForAllOperations="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

以及通过我们的 WebMethods 获得这些

```
<WebMethod(), OperationContract(), OperationBehavior(Impersonation:=ImpersonationOption.Required)> _ 
```

为我们工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:31:34.140

好吧，最后我只是让绑定使用 Windows 身份验证：

```
 <security mode="TransportWithMessageCredential">
        <message  negotiateServiceCredential="false" clientCredentialType="Windows" algorithmSuite="Default"/>
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
 </security> 
```

并在客户端传递了一个特定的 Windows 用户/密码组合：

```
channelFactory.Credentials.Windows.ClientCredential = new NetworkCredential(@"", "", "");
channelFactory.Credentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation; 
```

此外，我必须在 Web 服务的代码中专门使用新模拟的用户：

```
 using (var imp = ServiceSecurityContext.Current.WindowsIdentity.Impersonate())
 {
     // do IO here
 } 
```

好吧，实际（潜在）问题仍然存在：

> 如何正确模拟 ASP.NET 功能...

目前我对解决方案没意见，但是我感觉我错过了关于 ASP.NET 模拟的重要一点。

非常感谢 Iain，虽然它不是完全正确的答案，但它至少让我走上了正确的轨道！

# scala - Scala中的定义顺序很重要吗？

> ID：12777513
> 
> 赞同：1
> 
> 时间：2012-10-08T07:56:43.543
> 
> 标签：scala, compiler-construction, companion-object

在查找隐式时，Scala 编译器会在其他地方查找相关类的各个部分的伴生对象。但是，显然，如果在类本身中使用隐式转换（如果它是在伴随对象之前定义的），则它无法执行此查找。我能做的最小的例子是：

```
trait Counter[A] {
  def count(a: A): Int
}

object Foo {
  def foo[A](a: A)(implicit c: Counter[A]) = c.count(a)
}

case class Bar(id: Int) {
  import Foo._

  def count = foo(this)
}

object Bar {
  implicit object BarCounter extends Counter[Bar] {
    def count(b: Bar) = b.id
  }
} 
```

这无法编译说`could not find implicit value for parameter c: Counter[Bar]`- 我使用的是 Scala 2.9.1。

有趣的事情（由 rjsvaljean 建议）是，如果我们颠倒顺序 - 也就是说，我们`object Bar`之前定义`case class Bar`- 一切编译得很好。

> 这是编译器错误吗？或者我遗漏了一些关于 Scala 范围规则的内容？

我还应该提到，这个问题只出现在隐式解决方案中。如果我们显式地传递`BarCounter`对象，一切都编译得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:56:50.423

这似乎是一个实际的编译器错误。我已经把它贴在[这里了](https://issues.scala-lang.org/browse/SI-6515)。

# .net - 如何在 Windows 窗体中实现三列布局？

> ID：12777514
> 
> 赞同：0
> 
> 时间：2012-10-08T07:56:43.853
> 
> 标签：.net, winforms, tablelayoutpanel

我正在努力在 Windows 窗体中实现三列布局，具有固定大小的中心列和两个自动调整大小的侧列，因此当窗体调整大小时，中心列始终位于中心，两侧列始终占一半每个剩余空间。

我已经使用 TableLayoutPanel 进行了尝试，但是一旦我将中间列设置为固定并且将外部两列设置为自动调整大小，其中一个侧列就会从设计器中消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:01:48.270

Autosize 将根据列内控件所需的空间自动调整。如果该列是空的，那么它将从设计器中消失，因为它是 0px

我认为你需要使用 %

例子：

Column0 - 50% Column1 - 400px Column2 - 50%

可能有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:15:09.690

它与 TableLayoutPanel 完美搭配。将 TableLayoutPanel Dock 设置为 DockStyle.Fill

Coloum0 30% Coloum1 40% Coloum2 30%

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:50:18.567

将两侧栏设置为 50% 并将中间栏设置为固定大小应该可以解决问题。

# performance - 哪种模式在性能方面会更好

> ID：12777515
> 
> 赞同：1
> 
> 时间：2012-10-08T07:56:46.570
> 
> 标签：performance, mongodb, schema, compare

我正在为 MongoDB 创建架构，我有两种用于 Gender 集合的架构。我想知道哪个更适合读取数据（集合可能包含数百万条记录，所以我现在无法实际评估，所以请不要“说尝试样本数据”）

一种是数组类型：

```
"gender": [{
            "GenderType":M/F/U,
            "total:logins": 12,
            "totaluser": 20,
            "newuser": 11
     },
     {
           "GenderType":M/F/U,
           "total:logins": 12,
           "totaluser": 20,
           "newuser": 11
     },
     {
          "GenderType":M/F/U,
          "total:logins": 12,
          "totaluser": 20,
          "newuser": 11
     }
] 
```

其次是对象类型。

```
"gender": {
     "male": {
          "total:logins": 12,
          "totaluser": 20,
          "newuser": 11
     },
     "female": {
          "total:logins": 11,
          "totaluser": 10,
          "newuser": 10
     }
     "unknown": {
          "total:logins": 11,
          "totaluser": 10,
          "newuser": 10
     }
} 
```

优先事项

1.  表现
2.  贮存
3.  可维护性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:31:18.963

当您说“读取”数据时，它可能取决于您希望执行的查询类型。您是一直在阅读整个文档，还是打算过滤掉性别类型并对内容进行数学运算？数组通常需要 MapReduce 或聚合框架来处理某些类型的查询。这在大型集合上可能会很昂贵，而处理“女性”对象的集合可以更加声明性地编写和处理。

你能详细说明你想对数据做些什么吗？你可能会得到更明确的答案。

# iphone - 如何在 iphone 上连接和读/写文件到本地计算机？

> ID：12777519
> 
> 赞同：0
> 
> 时间：2012-10-08T07:57:02.987
> 
> 标签：iphone, ios, networking, connection, local

我的本地网络连接有问题。我正在编写一个 iphone 应用程序，我需要将文件读/写到计算机。两台设备连接在同一个网络上。

如果可能，我想获取连接的计算机 ip 列表，选择其中一个并读/写 pdf、doc、txt 等文件。如果不可能，我将编写我想要连接的计算机 ip。没有问题，两种解决方案都可以。

但是我不知道得到电脑的ip后我该怎么办？我在本地找到[了这个](http://mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/)聊天客户端/服务器，但我觉得它很复杂。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:10:46.443

您需要在计算机上运行一个服务器，该服务器可以显示文件并允许读取和创建文件。

最简单的方法是在计算机上运行 webdav 服务，Apache 为此提供了 mod_dav 模块。

然后 iPhone 应用程序成为客户端。我建议为此目的使用[霓虹灯。](http://www.webdav.org/neon/)它是一个 C 库，可在远程 webdav 服务器上提供列表、读取和写入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:48:05.773

我就是这样做的。

1) 找到您要连接的计算机的网络地址。为此，您可以使用[Bonjour](http://en.wikipedia.org/wiki/Bonjour_%28software%29)。由于 Bonjour 为您处理地址解析，因此设置非常容易。

*   您只需通过“NSNetService”类发布服务（例如 _myprotocol._tcp），该类可在 iOS 和 OS X（Windows 也是）上使用 - 在您的情况下，您将在您的计算机上发布该服务。
*   然后你用类搜索服务`NSNetServiceBrowser`。
*   找到服务后，您就可以解决它。这实际上为您提供了其他设备的网络名称。

2) 通过 tcp 套接字连接到另一台设备。CocoaAsyncSocket库非常擅长这一点[。](https://github.com/robbiehanson/CocoaAsyncSocket)该项目还包括一些示例。一个示例已经提供了 bonjour 服务器和客户端实现。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T08:39:19.643

我找到了我想要的。解决方案在[这里](https://github.com/38leinaD/tango)

# svn - 有没有直接的方法来找出给定文件是否受 svn 版本控制？

> ID：12777525
> 
> 赞同：0
> 
> 时间：2012-10-08T07:58:28.457
> 
> 标签：svn

> **可能重复：**
> [如何从 svn 获取所有未版本控制文件的列表？](https://stackoverflow.com/questions/216049/how-do-i-get-a-list-of-all-unversioned-files-from-svn)

如何确定具有给定路径的文件是在 svn 版本控制下还是从构建生成的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T08:01:02.373

运行`svn st`（从顶级目录），当前不受版本控制的所有文件都`?`在文件名前标有 a。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:01:44.450

如果您检查 SVN，它将显示最近添加的类似 + 的内容。如果您没有自己创建该文件，则可以将其视为是从构建中生成的。

或者您可以运行此处已解释的检查 svn 命令：[如何从 SVN 获取所有未版本控制文件的列表？](https://stackoverflow.com/questions/216049/how-do-i-get-a-list-of-all-unversioned-files-from-svn)

# ios6 - iPod4 (iOS6) 显示错误的 iPhone5 启动图像

> ID：12777527
> 
> 赞同：3
> 
> 时间：2012-10-08T07:58:39.987
> 
> 标签：ios6, splash-screen, ipod, iphone-5, uilaunchimagefile

在我的 iPhone 应用程序的 XCode 项目中，我添加了以下启动图像：

*   默认~iphone.png
*   默认~iphone@2x.png
*   默认~iphone-568h@2x.png

在 iPhone4、iPhone4s 和 iPhone5 上显示了正确的启动图像。XCode 的项目摘要还告诉我，启动图像一切正常。

但是，如果我在 iPod4 上启动应用程序，则会显示 iPhone5 初始屏幕 (Default~iphone-568h@2x.png) 而不是 iPhone4 屏幕 (Default~iphone.png)。我的 iPod 上安装了 iOS6。

任何想法，这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:40:20.703

上面的文件名称错误。他们应该是：

*   默认~iphone.png
*   默认@2x~iphone.png
*   默认-568h@2x~iphone.png

但是为文件提供正确的名称是不够的。你应该：

*   查看应用程序的 info.plist 文件，是否设置了正确的启动图像
*   错误命名的图像 Def​​ault~iphone-568h@2x.png 可以保留在应用程序包中，即使您删除并重新安装应用程序也是如此。因此，上述更改可能无效。
*   为了防止这种情况，我不得不删除我的应用程序，清理并重新编译我的 XCode 项目并重新启动我的设备。之后一切正常。

# java - 在不终止服务的情况下更改 ScheduledThreadPoolExecutorService 的延迟

> ID：12777528
> 
> 赞同：2
> 
> 时间：2012-10-08T07:58:39.843
> 
> 标签：java, daemon, scheduler, executorservice, threadpoolexecutor

顾名思义，我们有一个守护进程框架，它使用 Executor 服务来调度守护进程。

```
java.util.concurrent.ScheduledThreadPoolExecutor.scheduleWithFixedDelay(Runnable 
     command, long initialDelay, long delay, TimeUnit unit) 
```

在运行时，我想更改两次运行`Runnable`类之间的延迟，而不终止我们的应用程序。

是否可以？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:37:11.807

> 事先不知道最小粒度

在这种情况下，您需要取消计划并重新添加。

```
private Future future = null;
private long periodMS = 0;

public void setPeriod(long periodMS) {
   if (future != null && this.periodMS == periodMS) return;
   if (future != null) future.cancel(false);
   scheduledExecutorService.scheduleWithFixedDelay(task, periodMS/2, periodMS, TimeUnit.MILLI_SECONDS);
} 
```

或者您可以让任务自行重新安排。

```
private long periodMS;

public void start() {
  scheduledExecutorService.schedule(this, periodMS, TimeUnit.MILLI_SECONDS);
}

public void run() {
   try {
       task.run();
   } catch(Exception e) {
       // handle e
   }
   start();
} 
```

这样，周期可以在每次运行时更改。

# iphone - 当应用程序进入后台或手机被锁定时如何获取位置？

> ID：12777529
> 
> 赞同：5
> 
> 时间：2012-10-08T07:58:47.660
> 
> 标签：iphone, ios

我正在尝试`locationManager`获取我的位置并将其更新到我的网络服务。

```
- (void)locationManager:(CLLocationManager *)manager 
didUpdateToLocation:(CLLocation *)newLocation 
fromLocation:(CLLocation *)oldLocation {
    //some code here
} 
```

这很正常，但是如果我的应用程序进入后台或手机屏幕被锁定，则可能会暂停更新位置。无论如何，我如何获得位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:42:54.330

我建议您设置一个处理程序，例如此示例：

[TTLLocationHandler](https://github.com/dsdavids/TTLocationHandler)

为所需的新近度和准确性配置处理程序。为通知“LocationHandlerDidUpdateLocation”设置一个监听器。将您的代码上传到在收到该通知时调用的方法中。

如果您不需要细粒度的细节，我建议您在后台使用显着LocationChange 监控的电池节省选项。在这种情况下，您不需要在 info.plist 中添加后台模式，也不会不必要地浪费资源。该应用程序将被唤醒，并且您的方法仅在用户发生重大移动时调用。处理程序中有可配置的选项，要求在后台和/或前台进行持续监控，并设置新近度和准确度阈值。

请参阅 LMPinTracker 类，了解如何响应并将数据保存到 Web 或本地。有关使用的讨论，请参阅线程[Invoke get current coordinates every few seconds without NSTimer](https://stackoverflow.com/questions/12841017/invoke-get-current-coordinates-every-few-seconds-without-nstimer/12842463#12842463)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:09:26.430

阅读关于它的完整博客文章：[iPhone 背景 GPS：精确到 500m，对于步行交通来说还不够](http://longweekendmobile.com/2010/07/22/iphone-background-gps-accurate-to-500-meters-not-enough-for-foot-traffic/#more-480)

这是一个教程：[iOS多任务处理：后台位置](http://mobile.tutsplus.com/tutorials/iphone/ios-multitasking-background-location/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:51:12.300

将此密钥添加到您的应用程序列表

```
Required background modes 
```

将其标记为数组，并在其上`item0`添加此值

```
App registers for location updates 
```

该应用程序现在也将在后台获取位置数据。

# python - 在 python 中使用 networkx 创建树数据

> ID：12777533
> 
> 赞同：6
> 
> 时间：2012-10-08T07:59:05.023
> 
> 标签：python, python-2.7, networkx

我正在尝试创建一个具有 1111 个节点的树，并且其组织结构使得节点 1 有 10 个子节点（2 到 11），节点 2 有 10 个子节点（12 到 21）等等......这样每个节点都有 10 个子节点根级别有 1 个节点，有 10 个子节点，每个子节点有 10 个子节点，这 100 个节点中的每一个都有 10 个子节点，每个子节点有 1000 个叶节点。节点总数为 1111。

```
import networkx as nx
G = nx.Graph()
L1 = [1]
L2 = [x for x in range(2,12)]
L3 = [x for x in range(12,112)]
L4 = [x for x in range(112,1112)]

G.add_node(1)
G.add_nodes_from(L1)
G.add_nodes_from(L2)
G.add_nodes_from(L3)
G.add_nodes_from(L4) 
```

现在我想添加边缘使用`G.add_edges_from([(x,y) for x in L1 for y in L2])`which is OK 对于第一级，但我该如何为其他级别做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T11:07:05.160

您可以在一行中实现“开箱即用”的预期结果：

```
import networkx as nx

G = nx.balanced_tree(10,10) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T17:28:43.147

您可以将图的创建概括为**任意深度**和**任意数量的每个内部节点的子节点**。

如果您从 0 开始对级别进行编号（即根节点代表级别 0），则每个级别包含 n 个^(级别)节点。
n 是每个内部节点上的子节点数。

因此，您可以识别每个级别上第一个和最后一个节点的索引。
例如，在 n = 10 的情况下，级别 0、1、2、3 的最后一个节点是
10 ⁰ =
1、10 ⁰ + 10 ¹ = 11、10
0 ^+ 10 ¹ + 10 ² = 111、10 ⁰ +
10 ¹ + 10 ² + 10 ³ = 1111。

要查找给定节点的子节点索引，您需要获取该级别上最后一个节点的索引并添加偏移量。
如果给定节点是该级别上的第一个（最左侧）节点，则偏移量为 0。
如果它是该级别上的最后一个节点，则偏移量为 (n ^(level) - 1) * n。
然后 (n ^(level) - 1) 是该级别上的前驱节点的数量。
通常，偏移量计算为 [该级别上的前驱节点数] * n。

这个概念在代码中被覆盖为`offset = ulim + i * n + 1`.
我添加`1`了能够在以下循环`0 - (n-1)`而不是 from中循环`1 - n`。

```
import networkx as nx

n = 10  # the number of children for each node 
depth = 3 # number of levels, starting from 0

G = nx.Graph()
G.add_node(1) # initialize root

ulim = 0
for level in range(depth): # loop over each level
  nl = n**level # number of nodes on a given level
  llim = ulim + 1 # index of first node on a given level 
  ulim = ulim + nl # index of last node on a given level
  for i in range(nl): # loop over nodes (parents) on a given level
    parent = llim + i
    offset = ulim + i * n + 1 # index pointing to node just before first child
    for j in range(n): # loop over children for a given node (parent)
      child = offset + j
      G.add_node(child)
      G.add_edge(parent, child)

      # show the results
      print '{:d}-{:d}'.format(parent, child),
    print ''
  print '---------' 
```

* * *

这是输出`depth = 3`：`n = 3`

```
1-2 1-3 1-4 
---------
2-5 2-6 2-7 
3-8 3-9 3-10 
4-11 4-12 4-13 
---------
5-14 5-15 5-16 
6-17 6-18 6-19 
7-20 7-21 7-22 
8-23 8-24 8-25 
9-26 9-27 9-28 
10-29 10-30 10-31 
11-32 11-33 11-34 
12-35 12-36 12-37 
13-38 13-39 13-40 
--------- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T09:26:59.237

想出了答案

```
import networkx as nx
G = nx.Graph()
L1 = [1]
L2 = [x for x in range(2,12)]
L3 = [x for x in range(12,112)]
L4 = [x for x in range(112,1112)]

G.add_node(1)
G.add_nodes_from(L1)
G.add_nodes_from(L2)
G.add_nodes_from(L3)
G.add_nodes_from(L4)
G.add_edges_from([(x,y) for x in L1 for y in L2])
temp2 = []
temp = []
temp2.extend(L4)
temp.extend(L3)
for i in range(1,11,1):
    G.add_edges_from([x,temp.pop()] for x in L2)
    G.add_edges_from([y,temp2.pop()] for y in L3)

print G.nodes()
print G.edges()
print G.number_of_nodes()
print G.number_of_edges()
print G.neighbors(1)

try:
    diameter_of_myGraph =nx.shortest_path_length(G)
    #print diameter_of_myGraph
except nx.NetworkXNoPath:
    print 'No path'

try:
    avg_distance_of_myGraph =nx.average_shortest_path_length(G)
    print avg_distance_of_myGraph
except nx.NetworkXNoPath:
    print 'No path' 
```

# google-maps - 从谷歌地图地址获取经度和纬度值

> ID：12777541
> 
> 赞同：0
> 
> 时间：2012-10-08T07:59:48.150
> 
> 标签：google-maps, geolocation, location

我有一个谷歌地图 API，它提供谷歌地图地址。这是获取谷歌地图 API 的代码：

```
<input name="add" type="text" id="address" class="required" style="width: 500px;">
            <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places&language=en-AU"></script>
            <script>
                var autocomplete = new google.maps.places.Autocomplete($("#address")[0], {});

                google.maps.event.addListener(autocomplete, 'place_changed', function() {
                var place = autocomplete.getPlace();
                console.log(place.address_components);
                });
            </script>
        <!--code for Google address API--> 
```

现在我还想要输入地址的经度和纬度。任何人都知道如何获得输入地址的经度和纬度值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:42:16.420

您可以使用该地点的几何对象来获取 lat 和 lng。如果我输入有效的目的地并从自动完成选项中选择一个，则以下内容适用于我。

```
<input name="add" type="text" id="address" class="required" style="width: 500px;">
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places&language=en-AU"></script>
<script>
    var autocomplete = new google.maps.places.Autocomplete(document.getElementById('address'));

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
        var place = autocomplete.getPlace();
        var geometry = place.geometry;
        var location = geometry.location;
        var latitude = location.lat();
        var longitude = location.lng();
        console.log(latitude);
        console.log(longitude);
    });
</script> 
```

甚至只是：

```
var place = autocomplete.getPlace();
var latitude = place.geometry.location.lat();
var longitude = place.geometry.location.lng(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:09:00.743

我得到了答案：

```
 <script>

        function cordinate()
        {
            geocoder = new google.maps.Geocoder(); // creating a new geocode object
            // getting the address value
            address1 = document.getElementById("address").value;
            //alert(address1);
                if (geocoder)
            {
            geocoder.geocode( { 'address': address1}, function(results, status)
            {
            if (status == google.maps.GeocoderStatus.OK)
            {
            //location of address (latitude + longitude)
            var location1 = results[0].geometry.location;
            document.getElementById("cor").value = location1;

            //alert(location1);
            } else
            {
            alert("Geocode was not successful for the following reason: " + status);
            }
            });

            }//end of If

        }
        </script>
        <!--code for google address cordinates-->
        <input type="hidden" name="cor" id="cor"> 
```

# html - 显示没有任何内容的div？

> ID：12777544
> 
> 赞同：-4
> 
> 时间：2012-10-08T07:59:52.497
> 
> 标签：html, css

有两个问题。

1.  首先，如果 div 上没有设置高度，并且其中没有包含任何元素，它们根本不会显示吗？

2.  其次，根据第一个问题，如果我想将一个 div 显示为身体高度的 90% 并且水平和垂直居中，即使里面没有内容，需要什么 css？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:03:20.230

欢迎来到定位的魔力，自动计算高度：

```
#myemptydiv{
    position:absolute;
    top: 5%;    // height gets calculated automatically
    bottom: 5%;
    width: 600px;
    margin: auto;
} 
```

所以，回答你的第一个问题：不，至少如果没有使用定位的隐式高度。第二个问题由上面给出的代码回答。

也可以看看：

*   [W3C：CSS2.1：9.3 定位方案。](http://www.w3.org/TR/CSS21/visuren.html#positioning-scheme)
*   [W3C: CSS3 basic box model: 9\. 计算宽度、高度和边距](http://www.w3.org/TR/css3-box/#Calculating)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:06:35.013

要使 div（或任何块元素）完全居中，您应该结合使用绝对定位和负边距。看这里：在此处[输入链接描述](http://jsfiddle.net/TALAA/1/)。尝试调整窗口大小：它的定位是自动发生的。

```
div {
    width: 90%;  /* Can be a non-percentual number */
    margin-left: -45%; /* negative value of element's width/2 | Can be a non-percentual number */
    margin-top: -45%; /* negative value of element's height/2 | Can be a non-percentual number */
    height: 90%;  /* Can be a non-percentual number */
    position: absolute;
    top: 50%; /* must always be 50% */
    left: 50%; /* must always be 50% */
    border: 1px solid;
}​ 
```

当然，当您只使用百分比值时，更容易进行数学运算：50% - 45% = 5%（正如 Zeta 的帖子所建议的那样），但我使用这种方法来证明这适用于非百分比值好。[例子](http://jsfiddle.net/TALAA/3/)。

```
div {
    width: 320px;
    margin-left: -160px; /* negative value of element's width/2 */
    margin-top: -120px; /* negative value of element's height/2 */
    height: 240px;
    position: absolute;
    top: 50%; /* must always be 50% */
    left: 50%; /* must always be 50% */
    border: 1px solid;
}​ 
```

当一个元素没有特定的高度并且没有内容时，你不会看到它，不。它将具有自动宽度（通常为 100%）但没有高度。您可以通过添加边框使其可见：http: [//jsfiddle.net/TALAA/2/](http://jsfiddle.net/TALAA/2/)

# postgresql - FDW 似乎锁定了外部服务器上的表

> ID：12777550
> 
> 赞同：1
> 
> 时间：2012-10-08T08:00:09.440
> 
> 标签：postgresql, postgresql-9.1

我尝试使用外部表来链接 2 个 postgresql 数据库

一切都很好，我可以检索我想要的所有数据

唯一的问题是数据包装器似乎锁定了外部服务器中的表，当我对代码进行单元测试时这很烦人

如果我不执行任何选择请求，我可以初始化数据并截断本地服务器中的表和远程服务器中的表，但是我执行一个选择语句远程服务器上的截断命令似乎处于死锁状态

你知道我怎样才能避免这个锁吗？

谢谢

[编辑]

我使用这个数据包装器来链接 2 个 postgresql 数据库：http: [//interdbconnect.sourceforge.net/pgsql_fdw/pgsql_fdw-en.html](http://interdbconnect.sourceforge.net/pgsql_fdw/pgsql_fdw-en.html)

我使用 db1 的 table1 作为 db2 中的外部表

当我在 db2 中的 foreign_table1 中执行选择查询时，db1 中的 table1 有一个 AccessShareLock 查询非常简单：select * from foreign_table1

锁永远不会释放，所以当我在单元测试结束时执行截断命令时，会发生冲突，因为截断添加了 AccessExclusiveLock

我不知道如何释放第一个 AccessShareLock 但我认为它会由包装器自动完成......

希望这有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:32:31.977

AccessExclusiveLock 和 AccessShareLock 通常不会显式获取。它们是通过某些正常语句自动获得的。请参阅[锁定](http://www.postgresql.org/docs/current/static/explicit-locking.html)- 锁定列表说明哪些语句获取哪些锁定，其中显示：

> **访问共享**
> 
> 仅与 ACCESS EXCLUSIVE 锁定模式冲突。
> 
> SELECT 命令在引用的表上获取此模式的锁。一般来说，任何只读取表而不修改它的查询都会获取这种锁定模式。

这意味着您的第一个事务尚未提交或回滚（从而释放其锁），因此第二个事务不能`TRUNCATE`表，因为`TRUNCATE`requires `ACCESS EXCLUSIVE`which 与`ACCESS SHARE`.

确保第一个事务提交或回滚。

顺便说一句，“外部”数据库实际上是本地数据库，即您是否使用 pgsql_fdw 作为 dblink 的替代品来模拟自主事务？

# compiler-errors - 'RUSAGE_THREAD' 未在此范围内声明

> ID：12777554
> 
> 赞同：0
> 
> 时间：2012-10-08T08:00:14.320
> 
> 标签：compiler-errors

我正在尝试使用 makefile 通过终端使用 Android ndk 7 构建 C++ 程序并收到此错误消息。

```
'RUSAGE_THREAD' was not declared in this scope 
```

'RUSAGE_THREAD' 使用 -

```
#include <sys/time.h>
#include <sys/resource.h> 
```

这也包含在文件中。有人可以帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:16:34.763

利用：

```
#define __USE_GNU /* required before including  resource.h */

#include <sys/resource.h> 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-04T16:38:34.670

我遇到了类似的问题，必须在`_GNU_SOURCE`上面定义`<sys/resource.h>`：

```
#define _GNU_SOURCE
#include <sys/resource.h> 
```

我知道我迟到了几年，但希望这会对某人有所帮助。

# wix - 如何使用 WiX 工具集创建仅升级的 MSI 文件？

> ID：12777559
> 
> 赞同：1
> 
> 时间：2012-10-08T08:00:26.557
> 
> 标签：wix, windows-installer

我有一个为 Windows（包）创建产品安装程序的[WiX项目。](http://en.wikipedia.org/wiki/WiX)`.msi`现在我有一个场景，我需要创建一个更新包（在 Windows 上），该更新包仅在产品安装在客户端计算机上时才有效，但在任何其他情况下它都会退出。

我很可能需要 WiX 中的升级功能 ( `<Upgrade ... />`)，但我该怎么做呢？

# maven - JBAS015893：遇到无效的类名

> ID：12777560
> 
> 赞同：22
> 
> 时间：2012-10-08T08:00:34.557
> 
> 标签：maven, deployment, jboss, war

我目前正在清理我的项目和相关的错误/警告。每次我将 Maven 项目部署到 JBoss AS 7.1.1.Final 时，我都会收到很多警告。

我发现很多帖子/评论说只是忽略或隐藏这些警告。

好的，警告只是警告，但是应该可以解决警告的*原因*，而不是仅仅隐藏或忽略这些警告（因为我认为：现在是什么警告，在其他时候可能会成为错误）

```
09:51:55,145 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) JBAS015876: Starting deployment of "oce2.war"
09:51:56,241 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.ConfigurableArchiveImpl' for service type 'org.jboss.shrinkwrap.spi.Configurable'
09:51:56,242 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.GenericArchiveImpl' for service type 'org.jboss.shrinkwrap.api.GenericArchive'
09:51:56,244 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'extension=.jar' for service type 'org.jboss.shrinkwrap.api.GenericArchive'
09:51:56,245 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'archiveFormat=UNKNOWN' for service type 'org.jboss.shrinkwrap.api.GenericArchive'
09:51:56,246 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.serialization.ZipSerializableViewImpl' for service type 'org.jboss.shrinkwrap.api.serialization.SerializableView'
09:51:56,248 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.spec.JavaArchiveImpl' for service type 'org.jboss.shrinkwrap.api.spec.JavaArchive'
09:51:56,249 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'extension=.jar' for service type 'org.jboss.shrinkwrap.api.spec.JavaArchive'
09:51:56,250 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'archiveFormat=ZIP' for service type 'org.jboss.shrinkwrap.api.spec.JavaArchive'
09:51:56,251 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.exporter.tar.TarExporterImpl' for service type 'org.jboss.shrinkwrap.api.exporter.TarExporter'
09:51:56,253 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'extension=.tar' for service type 'org.jboss.shrinkwrap.api.exporter.TarExporter'
09:51:56,254 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.importer.zip.ZipImporterImpl' for service type 'org.jboss.shrinkwrap.api.importer.ZipImporter'
09:51:56,255 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'extension=.jar' for service type 'org.jboss.shrinkwrap.api.importer.ZipImporter'
09:51:56,256 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.importer.tar.TarImporterImpl' for service type 'org.jboss.shrinkwrap.api.importer.TarImporter'
09:51:56,258 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'extension=.tar' for service type 'org.jboss.shrinkwrap.api.importer.TarImporter'
09:51:56,259 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.spec.WebArchiveImpl' for service type 'org.jboss.shrinkwrap.api.spec.WebArchive'
09:51:56,260 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'extension=.war' for service type 'org.jboss.shrinkwrap.api.spec.WebArchive'
09:51:56,261 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'archiveFormat=ZIP' for service type 'org.jboss.shrinkwrap.api.spec.WebArchive'
09:51:56,262 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.exporter.tar.TarGzExporterImpl' for service type 'org.jboss.shrinkwrap.api.exporter.TarGzExporter'
09:51:56,264 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'extension=.tar.gz' for service type 'org.jboss.shrinkwrap.api.exporter.TarGzExporter'
09:51:56,265 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.serialization.ZipSerializableViewImpl' for service type 'org.jboss.shrinkwrap.api.serialization.ZipSerializableView'
09:51:56,266 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.importer.ExplodedImporterImpl' for service type 'org.jboss.shrinkwrap.api.importer.ExplodedImporter'
09:51:56,268 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.exporter.ExplodedExporterImpl' for service type 'org.jboss.shrinkwrap.api.exporter.ExplodedExporter'
09:51:56,270 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.spec.EnterpriseArchiveImpl' for service type 'org.jboss.shrinkwrap.api.spec.EnterpriseArchive'
09:51:56,271 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'extension=.ear' for service type 'org.jboss.shrinkwrap.api.spec.EnterpriseArchive'
09:51:56,272 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'archiveFormat=ZIP' for service type 'org.jboss.shrinkwrap.api.spec.EnterpriseArchive'
09:51:56,274 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.spec.ResourceAdapterArchiveImpl' for service type 'org.jboss.shrinkwrap.api.spec.ResourceAdapterArchive'
09:51:56,276 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'extension=.rar' for service type 'org.jboss.shrinkwrap.api.spec.ResourceAdapterArchive'
09:51:56,278 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'archiveFormat=ZIP' for service type 'org.jboss.shrinkwrap.api.spec.ResourceAdapterArchive'
09:51:56,279 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.importer.tar.TarGzImporterImpl' for service type 'org.jboss.shrinkwrap.api.importer.TarGzImporter'
09:51:56,280 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'extension=.tar.gz' for service type 'org.jboss.shrinkwrap.api.importer.TarGzImporter'
09:51:56,281 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015893: Encountered invalid class name 'implementingClassName=org.jboss.shrinkwrap.impl.base.exporter.zip.ZipExporterImpl' for service type 'org.jboss.shrinkwrap.api.exporter.ZipExporter' 
```

编辑：

我已经找到了解决方案 - 只是总是忘记保存 pom 文件并认为它不起作用。

我在 pom 文件中添加了 shrinkwrap 依赖项：

```
<dependency>       
    <groupId>org.jboss.shrinkwrap</groupId>
    <artifactId>shrinkwrap-api</artifactId>
</dependency>
<dependency>
    <groupId>org.jboss.shrinkwrap</groupId>
    <artifactId>shrinkwrap-impl-base</artifactId>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-23T07:08:24.770

In my case most of the warnings "JBAS015893: Encountered invalid class name..." went away after I have set the correct scope for all dependencies regarding arquillian and shrinkwrap to "test", e.g.

```
<dependency>
 <groupId>org.jboss.shrinkwrap.descriptors</groupId>
 <artifactId>shrinkwrap-descriptors-spi</artifactId>
 <scope>test</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T00:40:51.987

看看OP的编辑，

将这些依赖项添加到 pom 中：

```
<dependency>       
    <groupId>org.jboss.shrinkwrap</groupId>
    <artifactId>shrinkwrap-api</artifactId>
</dependency>
<dependency>
    <groupId>org.jboss.shrinkwrap</groupId>
    <artifactId>shrinkwrap-impl-base</artifactId>
    <scope>test</scope>
</dependency> 
```

# android - 当我尝试将照片推送到 android 模拟器时，我无法在相册中看到照片

> ID：12777564
> 
> 赞同：0
> 
> 时间：2012-10-08T08:00:51.590
> 
> 标签：android, gallery, android-mediascanner

我是 Android 新手，现在尝试从内容提供商检索联系人照片（拇指指甲）并将其设置到我的应用程序中。但为此，当我在 AVD 上运行时，我将一些 .png 照片推送到我的 2.2 版本中。现在我尝试与照片创建联系人，但画廊显示“未找到媒体”，因此我被困在这里。
请帮助我让照片在画廊中可见。

注意：我知道以下事实：

1.  我已经重新启动了我的 AVD 以强制 Media Scanner 进行初始模型。
2.  我还通过 Eclipse 框架的文件资源管理器视图看到了 .png 文件。
3.  但奇怪的是，我无法从手机中提取文件。
4.  我已借助该链接[获取 Android 中图库文件夹的路径，](https://stackoverflow.com/questions/4458752/get-the-path-of-a-gallery-folder-in-android)以了解 Media Scanner 的一般视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:55:39.057

我相信这是因为应用程序不知道里面是否有图像`/data`。

尝试将您的图像放入：

```
/mnt/sdcard/Pictures 
```

# javascript - 有没有办法按国家/地区聚类谷歌地图标记？

> ID：12777565
> 
> 赞同：6
> 
> 时间：2012-10-08T08:00:59.597
> 
> 标签：javascript, google-maps, markerclusterer

我目前正在使用[MarkerClustererPlus](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/)来聚类我的标记。（欢迎任何其他建议）而且我想知道是否有一种方法可以按大洲或国家进行聚类，而不是按邻近度。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-12T12:16:01.407

尝试使用此代码进行基于区域的聚类..

```
var keys = [];
var markerCluster = [];
var markers = new Object();
var map;

function initialize(){
var mapProp = {
  center:center,
  zoom:5,
  mapTypeId:google.maps.MapTypeId.ROADMAP
  };
  map=new google.maps.Map(document.getElementById("googleMap")
  ,mapProp);

 //styling cluster image..
  var clusterStyles = [
  {
    opt_textColor: 'black',
    url: 'images/cluster.png',
    height: 56,
    width: 55
  },
  {
     opt_textColor: 'black',
     url: 'images/cluster2.png',
     height: 53,
     width: 52
  }
  ];

  //cluster marker options..
  var mcOptions = {
             // gridSize: 16,
             styles: clusterStyles,
             maxZoom: 15
                 };
 function initialize(){
 var mapProp = {
  center:center,
  zoom:5,
  mapTypeId:google.maps.MapTypeId.ROADMAP
 };
  map=new google.maps.Map(document.getElementById("googleMap")
  ,mapProp);

 //styling cluster image..
  var clusterStyles = [
  {
    opt_textColor: 'black',
    url: 'images/cluster.png',
    height: 56,
    width: 55
  },
  {
     opt_textColor: 'black',
     url: 'images/cluster2.png',
     height: 53,
     width: 52
  }
  ];

  //cluster marker options..
  var mcOptions = {
            // gridSize: 16,
            styles: clusterStyles,
            maxZoom: 15
             };
  //fetching lat long from data base
  <?php echo "addmarker(lat,lng); ?>"
  for(var k in markers) keys.push(k);
            for(var i = 0; i < keys.length; i++)
            {
                markerCluster[i] = new MarkerClusterer(map,      markers[keys[i]],mcOptions);
            }
 }
 function addmarker(lat, lng)
 {
     var provnce;
     var mycenter = new google.maps.LatLng(lat,lng);
     var marker = new google.maps.Marker({
        position:mycenter,
        title:infoName,
        id: count++
        // animation:google.maps.Animation.BOUNCE
        });
    //clustering markers based on region..
    $.ajax({ url:'https://maps.googleapis.com/maps/api/geocode/json?  latlng='+lat+','+lng+'&sensor=true',
         async: false,
         success: function(data){
                        // console.log(data.results[0]);
                        // return;
             for (var i=0; i<data.results[0].address_components.length; i++)
             {
                 if (data.results[0].address_components[i].types[0] == "administrative_area_level_1") {
                         //this is the object for province
                         provnce = data.results[0].address_components[i]['long_name'];
                     }
             }
             provnce = provnce.split(" ",1);
             if(markers.hasOwnProperty(provnce))
             {
               markers[provnce].push(marker);
             }
             else
             {
               markers[provnce] = new Array();
               markers[provnce].push(marker);
             }
             // console.log(markers);
             }
         });
 } 
```

# maven - Visual Maven 依赖关系图

> ID：12777575
> 
> 赞同：1
> 
> 时间：2012-10-08T08:02:17.710
> 
> 标签：maven, build, dependencies

我有一个复杂的多模块项目。当我从命令行运行时，循环依赖没有问题。当我从[Bamboo](http://www.atlassian.com/software/bamboo/overview)运行时，我得到一个循环依赖，并且构建永远不会结束。它永远围绕着建筑循环。有谁知道一个很好的可视化 maven 依赖关系图工具，我可以用它来查看依赖关系。我使用 intelliJ，这为我提供了每个模块的依赖关系图，但我想一起查看多个模块的所有依赖关系。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:03:47.770

Eclipse 提供依赖关系图，虽然我不确定它是否会聚合所有模块。也许值得尝试一下！

# java - Javascript 和 JSP 未重新加载

> ID：12777590
> 
> 赞同：1
> 
> 时间：2012-10-08T08:04:01.767
> 
> 标签：java, javascript, jsp

大家好，在我们的 jsp 页面上进行一些表单验证。

当您在容量字段中输入任何值或非数字值时，我会出现警告框。但是点击“确定”后，页面被重定向到一个错误：

```
HTTP Status 500 - For input string: "" 
```

或在容量字段中输入“a”时

```
HTTP Status 500 - For input string: "a" 
```

我将如何重新加载页面而不是将我带到错误页面？

我已经尝试了许多内置的 Javascript 函数，但仍然指向错误页面，例如 location.reload() 等。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Mars University Lab System</title>
    <link rel="stylesheet" href="style.css" type="text/css" media="screen">
</head>

<body>
<jsp:include page="headerLecturer.jsp"/>
<script>

function chkNumeric(strString)
                   //  check for valid numeric strings  
                   {
                       var strValidChars = "0123456789.-";
                       var strChar;
                       var blnResult = true;

                       if (strString.length == 0) return false;

                       //  test strString consists of valid characters listed above
                       for (i = 0; i < strString.length && blnResult == true; i++)
                          {
                                strChar = strString.charAt(i);
                                if (strValidChars.indexOf(strChar) == -1)
                             {
                             blnResult = false;
                             }
                          }
                       return blnResult;
                   }

                 function validateForm()
                 {
                    var capacity=document.forms["createLabs"]["capacity"].value;
                    var day=document.forms["createLabs"]["day"].value;
                    var time=document.forms["createLabs"]["time"].value;
                    var room=document.forms["createLabs"]["room"].value;

                    if (capacity==null || capacity=="")
                      {
                            alert("Capacity must be filled out");
                            document.createLabs.capacity.focus();
                            return false;
                      }
                    else if(day==null || day=="")
                     {
                            alert("Day must be filled out");
                            document.createLabs.day.focus();
                            return false;
                     }
                     else if(time==null || time=="")
                     {
                            alert("Time must be filled out");
                            document.createLabs.time.focus();
                            return false;
                     }
                     else if(room==null || room=="")
                     {
                            alert("Room must be filled out");
                            document.createLabs.room.focus();
                            return false;

                    }
                    else if (chkNumeric(document.createLabs.capacity.value) == false) 
                    {
                            alert("Please check - non numeric value!");
                            document.createLabs.room.focus();
                            return false;

                    }
                    else if (chkNumeric(document.createLabs.room.value) == false) 
                    {
                            alert("Please check - non numeric value!");
                            document.createLabs.room.focus();
                            return false;
                    }

                            var link2 = document.getElementById('submit');

                                link2.onclick = function ()     
                                {
                                    if( confirm("Please fill in all the required fields") )
                                    {
                                        window.location.reload();
                                    }
                                    return false;
                                }

}

</script>

<tr>
<td>
</td>
</tr>

<tr>
<td>
<div id = "centrecontent">
<br>
<h3>Create Labs</h3>
<%String[] list1 = (String[])request.getAttribute("res1"); %>
<%String[] list2 = (String[])request.getAttribute("res2"); %>

        <form name ="createLabs" ACTION="CreateLab" method="post">

        Subject: <select name="subject_id">
        <%
        for(int i=0; i<list1.length; i++)  
        {
            //for(int m=0; m<list2.length;i++)
            //{
                out.println("<option value="+list1[i]+"> "+list2[i]+" </option>");

        //}
            out.println("list1:"+list1[0]);
            }
            %>
        </select><br><br>
        Capacity: <input type="text" name="capacity"/><br /><br>
        <input type="hidden" name="spots_left"/>
        Day: <input type="text" name="day"/><br /><br>
        Time (HH:MM:SS): <input type="time" name="time"/><br /><br>
        Room: <input type="text" name="room"/><br /><br>
        <input type=SUBMIT value="Submit" name="Submit" onClick="validateForm()" />

    </form>
</div>

<jsp:include page="footer.jsp"/>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:17:43.227

问题来自服务器端，所以问题在于javascript函数中的验证

我更改了 validateForm 但没有检查。

也许会有所帮助

```
 function validateForm()
         {
            var capacity=document.forms["createLabs"]["capacity"].value;
            var day=document.forms["createLabs"]["day"].value;
            var time=document.forms["createLabs"]["time"].value;
            var room=document.forms["createLabs"]["room"].value;

            if (capacity === undefined)
              {
                    alert("Capacity must be filled out");
                    document.createLabs.capacity.focus();
                    return false;
              }

                if(day === undefined)
             {
                    alert("Day must be filled out");
                    document.createLabs.day.focus();
                    return false;
             }

                 if(time === undefined)

             {
                    alert("Time must be filled out");
                    document.createLabs.time.focus();
                    return false;
             }

                 if(room === undefined)

             {
                    alert("Room must be filled out");
                    document.createLabs.room.focus();
                    return false;

            }

                if ( isNaN(capacity))
                {
                     alert("Please check - non numeric value!");
                    document.createLabs.room.focus();
                    return false;
                }

                    if ( isNaN(room))
                {
                     alert("Please check - non numeric value!");
                    document.createLabs.room.focus();
                    return false;
                }

                if(room === undefined)
            {
                    alert("Please check - non numeric value!");
                    document.createLabs.room.focus();
                    return false;
            }

                    var link2 = document.getElementById('submit');

                        link2.onclick = function ()     
                        {
                            if( confirm("Please fill in all the required fields") )
                            {
                                window.location.reload();
                            }
                            return false;
                        }

                            } 
```

此外，您需要为“onsubmit”事件放置 validateForm 触发器

```
<form name ="createLabs" ACTION="CreateLab" method="post" onsubmit="return validateForm()">

        Subject: <select name="subject_id">
        <%
        for(int i=0; i<list1.length; i++)  
        {
            //for(int m=0; m<list2.length;i++)
            //{
                out.println("<option value="+list1[i]+"> "+list2[i]+" </option>");

        //}
            out.println("list1:"+list1[0]);
            }
            %>
        </select><br><br>
        Capacity: <input type="text" name="capacity"/><br /><br>
        <input type="hidden" name="spots_left"/>
        Day: <input type="text" name="day"/><br /><br>
        Time (HH:MM:SS): <input type="time" name="time"/><br /><br>
        Room: <input type="text" name="room"/><br /><br>
        <input type="submit" value="Submit" name="Submit"   />

    </form> 
```

# redirect - Magento 重定向问题

> ID：12777600
> 
> 赞同：0
> 
> 时间：2012-10-08T08:04:59.370
> 
> 标签：redirect, geoip

我来自印度，我们有一个基于 magento 的网站。它有两家商店，一家面向世界，一家面向印度。两者分别是这样的：http: [//mysite.com](http://mysite.com)和[http://mysite.com/in](http://mysite.com/in)。

我担心的是如果我检测到用户 geoip 并相应地将印度访问者重定向到印度站点会发生什么。我是否可以访问管理部分，或者它也将在末尾使用**/in重定向。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:42:57.913

您可以使用 .htaccess 重定向除您的 IP 之外的所有人。

# php - 将 PHP 对象或数组从一个站点传递到另一个站点？

> ID：12777604
> 
> 赞同：1
> 
> 时间：2012-10-08T08:05:31.140
> 
> 标签：php, parameter-passing, xml-rpc, json-rpc

在 PHP 中，如何将一个对象（实际上是一个数组）从一个站点传递到另一个站点（通过不丢失其原始对象结构和值）？

*   如何从主机站点传递/发送
*   不要从目标站点拉取

我想通过不使用`HTML`和 web 表单直接从自动化脚本传递。
有什么建议，请。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T08:07:26.153

最好的方法是使用`json_encode()`：

```
file_get_contents('http://www.example.com/script.php?data='.json_encode($object)); 
```

另一方面：

```
$content = json_decode($_GET['data']); 
```

或使用 cURL 发送

```
$url = 'http://www.example.com/script.php';
$post = 'data='.json_encode($object);
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);
curl_exec($ch); 
```

另一方面：

```
$content = json_decode($_POST['data']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:07:47.520

您可以将其转换为 JSON，然后将其转换回 PHP 对象。当它是一个数组时，这很容易。您可以在其他网站上使用`json_encode($array)`和。`json_decode($json)`我会通过 POST 发送数据，因为 GET[的长度限制： GET 请求的长度是否有限制？](https://stackoverflow.com/questions/266322/http-uri-get-limit)

# f# - 使用回车键提交

> ID：12777605
> 
> 赞同：3
> 
> 时间：2012-10-08T08:05:32.740
> 
> 标签：f#, websharper

当按下 keydown 事件时，是否有一种惯用的方式触发我的 formlet 的提交操作？

我应该退回到 DOM 操作，还是有一些`Enhance`我可以使用的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:05:01.763

不幸的是，目前没有标准的方法来做到这一点。不过，我们确实打算在未来的版本中添加它，作为`Enhance`组合器或作为`Enhance.WithCustomSubmit*`.

[我们在创建FPish](http://fpish.net)时实际上遇到了同样的问题，我们使用以下解决方法：

```
[<JavaScript>]
let TriggerOnEnter (formlet : Formlet<'T>) =
    formlet
    |> Formlet.MapElement (fun elem ->
        let e = JQuery.JQuery.Of(elem.Body)
        e.Keypress(fun _ k ->
            // Opera uses charCode
            if k?keyCode = 13 || k?charCode = 13 then
                JavaScript.SetTimeout (fun _ ->
                    e.Find("input[type=button]").Trigger("click").Ignore
                ) 100 |> ignore
            k.StopPropagation()
        ).Ignore
        elem
    ) 
```

请注意，它会触发表单中的第一个按钮，因此您可能需要调整 jQuery 选择器以使其真正触发提交按钮。

# javascript - 从 treestore 获取整个 json 字符串

> ID：12777607
> 
> 赞同：0
> 
> 时间：2012-10-08T08:05:40.493
> 
> 标签：javascript, extjs4

我有一个树库，它被添加到 extjs 中的甘特图中。

在我做了一些修改之后，我想取回 json 字符串，不仅仅是修改后的记录，而是整个字符串。

树库 API 可以在[这里](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.TreeStore)找到。

似乎您可以只从商店询问日期，但不能从树店询问日期。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:31:14.137

在 NodeInterface 上使用 'cascadeBy' - 在 API 中检查它（它被装饰到 Model 类上）。对于每个节点，获取您想要的数据并将其推送到一个数组或创建一个树结构 - 无论您喜欢哪个。要对完整记录进行编码，只需执行 Ext.encode(model.data)。

# web-applications - Google 驱动器、CORS 和 Range 标头

> ID：12777611
> 
> 赞同：2
> 
> 时间：2012-10-08T08:05:59.877
> 
> 标签：web-applications, google-api, cors, google-drive-api

我正在尝试使用它的 API 从 Google 驱动器请求数据。我正在处理的应用程序是一个网络应用程序，所以它在其他域上，我必须使用 CORS。Google 驱动器根据他们的文档 API 支持 CORS。

我的应用程序在 Google 驱动器上存储了足够大的文件，并且在大多数情况下，该应用程序不需要整个文件，而只需要其中的一部分。这就是我尝试使用“范围”标头进行部分下载的原因。

问题是 Google API 响应我的浏览器预检请求，我不能在 CORS 请求中使用 Range 标头 - 只允许 Authorization 标头：

```
Request header - Access-Control-Request-Headers: authorization,range
Response header - Access-Control-Allow-Headers: authorization 
```

在该浏览器阻止 GET 请求之后，故事就结束了。显然这是 API 中的一个错误。

有谁知道在这种情况下我能做什么（避免预检，要求谷歌解决这个问题，使用一些技巧）以及如何做到这一点？

# gwt - 如何在 GWT Mobile Phonegap 中显示菜单弹出窗口

> ID：12777619
> 
> 赞同：1
> 
> 时间：2012-10-08T08:06:47.340
> 
> 标签：gwt, cordova

我正在使用[gwtmobile](http://gwtmobile.com/)来实现 iOS 应用程序，并且我想使用像 Facebook.app 这样的菜单对话框（当您单击以显示通知时），因此，我可能会插入一些类似菜单的内容并进行处理。

有一些我可以使用的库吗？

# jquery - 来自 IIS 的缓慢响应时间

> ID：12777620
> 
> 赞同：5
> 
> 时间：2012-10-08T08:06:49.550
> 
> 标签：jquery, asp.net, iis-7

也许这不属于stackoverflow（？）

我有一个在 IIS7 上运行的经典 ASP.NET 网络表单站点。问题是即使是静态资源的响应时间也非常慢。在某些情况下，提供 250k css 文件需要 2 秒以上。

还有一个包含用于测试目的的 json 数据的静态文本文件。如果我手动请求该文件，该文件大约需要 10-20 毫秒。如果从网页（JQuery ajax 调用）请求相同的文件，则相同的文件需要 300 毫秒才能获取，并且根据 firebug，它的所有服务器等待时间。

提供文件时，是不是 ASP.NET 会做一些时髦的事情？有什么想法会导致这种奇怪的行为吗？

（在 vs.net devserver 本地运行同一个站点不会出现同样的问题）

[编辑] 一些更新

文本文件具有查询字符串参数以避免本地缓存。每次查询字符串参数更改时，加载需要 300 毫秒。使用相同的参数请求相同的文件会将其缩短到 20 毫秒（firebug 和 webinspector 都表示该文件是通过网络加载的，而不是从本地缓存中接收的）

什么会导致这种情况？

即使没有任何查询字符串参数，静态图像也会表现得很奇怪。由 jquery 加载的图像需要 3-400 毫秒 .. 手动请求相同的图像需要 20 毫秒（没有任何缓存）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:22:32.660

从这个开始

[启用静态内容的 HTTP 压缩 (IIS 7)](http://technet.microsoft.com/en-us/library/cc754668%28v=ws.10%29.aspx)

[针对静态内容调整 IIS 7](http://www.ckode.dk/server-configuration/tuning-iis-7-for-static-content/)

# javascript - 如何使用 Enquire.Js？

> ID：12777622
> 
> 赞同：1
> 
> 时间：2012-10-08T08:06:59.050
> 
> 标签：javascript, jquery, enquire.js

**[Enquire.js](http://wickynilliams.github.com/enquire.js/)** 是一个 Javascipt，它为 Javascripts 重新创建 CSS 媒体查询。这意味着您可以将 Javascript 包装在媒体查询中。（就像您在媒体查询中包装 CSS 一样）。

我不太确定如何使用它。[本教程](http://css-tricks.com/enquire-js-media-query-callbacks-in-javascript/)是这样说的：

```
enquire.register("max-width: 960px", function() {
  // put your code here
}); 
```

但是，当我遵循这一点时，我的代码将停止工作。

[这是](http://jsfiddle.net/PnR2w/1/)一些没有 Enquire.JS 的 Jquery 选项卡的示例。它工作正常。

[这是](http://jsfiddle.net/ZH25x/2/)相同的选项卡，但添加了 Enquire.JS。现在它停止工作。

我已经尝试了不同的代码变体，但它们都不起作用。我究竟做错了什么？

我认为您可能已将 Jquery Tab 代码放在单独的文件中，然后从 Enquire.Js 中链接到该文件，但我不确定您将如何做到这一点。（虽然知道它会很方便，因为我想它会让你的脚本更可重用）。

PS。这不是对 Enquire.Js 的批评。我知道问题完全在于我对 Javascript 的不熟练！我确实花了几个小时寻找解决方案，但找不到任何东西。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T21:35:45.980

**编辑：** enquire.js v2 现已推出，文档包括[工作示例](http://wicky.nillia.ms/enquire.js/#Examples)

我知道你在 GitHub 上问过我关于更好的文档的一般情况，但我在这里遇到了这个问题，所以我想我也会尝试帮助你解决这里遇到的具体问题。

您的原始代码是这样的：

```
enquire.register("max-width: 500px", function() {

    $(document).ready(function() {
        $("#tabs").tabs();
    });

}).listen(); //note: as of enquire.js v2 listen() has been deprecated 
```

这里有一些小问题，我现在将解释。最明显的是您已将文档就绪回调*放置*在 match 函数中。虽然这实际上可能工作得很好，但将所有查询代码都放在 ready 回调中会被认为是更好的做法：

```
$(document).ready(function() {

    enquire.register("max-width: 500px", function() {
        $("#tabs").tabs();
    }).listen(); //note: as of enquire.js v2 listen() has been deprecated

}); 
```

这是一种更好的方法，因为您不必在每个匹配函数中添加注册回调（如果您有多个处理程序或多个查询。

第二个更微妙的问题是您的媒体查询不被认为是有效的。任何[媒体查询功能都](http://www.w3.org/TR/css3-mediaqueries/#media1)必须用括号括起来。此外，您通常希望指定媒体设备（此处简要介绍：http: [//www.w3.org/TR/css3-mediaqueries/#background](http://www.w3.org/TR/css3-mediaqueries/#background)），通常您会选择`screen`网站。然后，您正在测试的媒体设备和媒体查询功能由一个分隔`and`：

```
$(document).ready(function() {

    enquire.register("screen and (max-width: 500px)", function() {
        $("#tabs").tabs();
    }).listen();

}); //note: as of enquire.js v2 listen() has been deprecated 
```

这应该是修复代码所需的全部内容。你可以在这里看到一个完整的例子：http: [//jsfiddle.net/WickyNilliams/3nXce/](http://jsfiddle.net/WickyNilliams/3nXce/)

希望有帮助:)

# .net - .net 中的相邻日期时间格式

> ID：12777629
> 
> 赞同：-1
> 
> 时间：2012-10-08T08:07:37.613
> 
> 标签：.net, datetime

> **可能重复：**
> [根据 YYYYMMDD 等格式化 .NET DateTime 的最简单方法是什么？](https://stackoverflow.com/questions/406487/whats-the-simplest-way-to-format-a-net-datetime-according-to-yyyymmdd-or-the-l)

.net 中是否有任何相邻的日期时间格式，例如 20121008（作为今天的日期）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:10:07.270

您可以使用[`custom DateTime format`](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)：

```
DateTime today = DateTime.Today;
string formattedDate = today.ToString("yyyyMMdd"); 
```

# c# - 数组作为属性和索引器

> ID：12777631
> 
> 赞同：4
> 
> 时间：2012-10-08T08:07:53.487
> 
> 标签：c#, arrays, properties, indexer

我在一个使用方法运行某个操作的类中有两个私有数组。调用此方法后，将用结果填充这两个数组。制作这些数组属性不是一个好习惯，所以我计划有一个单独的属性来返回私有数组的克隆。

1) 返回数组克隆的开销是多少？在每种情况下都不明显吗？

2) 如果只有一个数组，我可以使用索引器。是否有一种特定的机制可以为一个类中的多个数组使用索引器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:10:54.263

我认为您的意思是“开销”或“成本”而不是“超载”。无论如何，在计算上`O(1)`它取决于数组的大小，但一般来说，如果数组复制少于一千个元素左右，它是一种廉价的操作。

如果您不打算修改数组，那么您可以通过将它们包装成`ReadOnlyCollection<T>`这样来公开您的私有数组：

```
private TWhatever[] _array;
public ReadOnlyCollection<TWhatever> Elements { get; private set; }

public ClassConstructor() {
    _array = new TWhatever[1000];
    this.Elements = new ReadOnlyCollection<TWhatever>( _array );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T08:13:14.927

克隆数组是内存分配；影响将直接取决于数组的大小。

索引器只是一种方法；另一种方法可能是只添加一个方法，例如`GetName(int index)`and `GetValue(int index)`（例如，如果您的数组是名称/值）。唉，C# 中没有内置的命名索引器。

如果性能很重要，并且您需要访问多个值，那么另一种方法是使用一种方法将值复制到调用者提供的数组中，例如`GetNames(string[] names, int offset) { this.names.CopyTo(names, offset); }`. 这可以通过允许调用者分配*单个*缓冲区，然后使用它从多个对象获取值 - 或者如果您添加一些参数（用于计数等）来批量获取值而不是单独获取值。不过，这是否必要/有用在很大程度上取决于具体情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T08:19:37.847

也许有可能做这样的事情

```
KeyValuePair this[int i] { get { /* code */ } private set{ /* code */ } } 
```

# css - Highcharts 样式、图例和自定义字体

> ID：12777635
> 
> 赞同：2
> 
> 时间：2012-10-08T08:08:07.740
> 
> 标签：css, highcharts, custom-font

`Highcharts`将**自定义字体**应用于图例项时，我在样式化图例项时遇到问题。实际上，项目彼此如此接近`itemMarginBottom`并且`itemMarginTop`无法正常工作。

这是我的`Highcharts`代码的一部分：

```
legend: {
    enabled: true,
    y: 20,
    align: 'right',
    verticalAlign: 'top',
    margin: 30,
    width: 200,
    borderWidth: 0,
    itemMarginTop: 15,
    itemMarginBottom: 15,
    itemStyle: {
            color: '#000',
            fontFamily: 'MuseoS500'
    }
}, 
```

这是传说中的截图：

![在此处输入图像描述](../Images/40a8e4f5e63c0018ea415cd047754071.png)

**我丑陋的解决方案：**

我解决了这个问题，如下所示，但遗憾的是硬编码：

```
// it is for the text's in the legend, I'll start from 0 and will
// increase by 10, so it's adding 10 pixels extra space to the next one
var z = 0;    

// this is for tiny-lines near the texts in legend, they starts from 14
// and increasing by 14 also ...
var p = 14;

// loop through <text> tags, which are texts in the lgened
$('.highcharts-legend > text').each( function (i) {

    // they have 'x' and 'y' attribute, I need to work on 'y' obviously
    y = parseInt($(this).attr('y'));

    // increasing 'y' value ...
    $(this).attr('y', y + z);

    // next element is <path>, the colorful lines ...
    $(this).next().attr('transform', 'translate(30,' + p + ')');

    // increasing the values, for the next item in the loop ...
    z = z + 10;
    p = p + 10 + 14;

}); 
```

我知道这很愚蠢，但我无法以任何其他方式解决这个问题，我不得不让它们以某种方式工作。我也很乐意听到你的想法...... :)

补丁后的新传奇：

![在此处输入图像描述](../Images/eae63b41b96fd21826f37ba067ac7a71.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:40:26.007

[Highchart 文档](http://api.highcharts.com/highcharts#legend.lineHeight)说有一个名为`lineHeight`但自 Highcharts 2.1 以来已弃用的属性

[Highcharts](http://www.highslide.com/forum/viewtopic.php?f=9&t=8553&sid=1f4cd06d9516600891899ea77ed0b616)官方论坛的帖子也证实了这一点。因此，您可以破解源代码以根据需要更改高度，或者在图表渲染后尝试使用 javascript 更正项目高度。

此外，还有一个名为`itemStyle`允许为图例项设置 CSS 的属性。

例如`paddingBottom: '10px'`

检查示例：

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/legend/lineheight/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/legend/lineheight/)

# java - 接口不在列中

> ID：12777639
> 
> 赞同：0
> 
> 时间：2012-10-08T08:08:19.237
> 
> 标签：java, eclipse, swing, user-interface, layout

我目前正在编写产品系统，并且正在设计界面。我的问题是，接口不在列中。![在此处输入图像描述](../Images/e542f8e7866e7e3b0972408891e60e4c.png)我希望它与我的代码代码放在一个列中，最好在“suche nach waren”行中再添加一个按钮 这是代码：

```
GroupLayout tLayout = new GroupLayout(mainFrame.getContentPane());
mainFrame.getContentPane().setLayout(tLayout);
tLayout.setAutoCreateGaps(true);
tLayout.setAutoCreateContainerGaps(true);

tLayout.setHorizontalGroup(tLayout.createSequentialGroup()
        .addGroup(tLayout.createParallelGroup()
                .addComponent(tLabel0))
        .addGroup(tLayout.createParallelGroup()
                .addComponent(tLabel1)
                .addComponent(tLabel2)
                .addComponent(tLabel3)
                .addComponent(tLabel4))
        .addGroup(tLayout.createParallelGroup()
                .addComponent(tTextField1)
                .addComponent(tTextField2)
                .addComponent(tTextField3)
                .addComponent(tCombo)
                .addComponent(tButton1))
        .addGroup(tLayout.createParallelGroup()
                .addComponent(tTable))
        );

tLayout.setVerticalGroup(tLayout.createSequentialGroup()
        .addComponent(tLabel0)
        .addGroup(tLayout.createParallelGroup()
                .addComponent(tLabel1)
                .addComponent(tTextField1))
            .addGroup(tLayout.createParallelGroup()
                .addComponent(tLabel2)
                .addComponent(tTextField2))
        .addGroup(tLayout.createParallelGroup()
                .addComponent(tLabel3)
                .addComponent(tTextField3))
        .addGroup(tLayout.createParallelGroup()
                .addComponent(tLabel4)
                .addComponent(tCombo))
        .addGroup(tLayout.createParallelGroup()
                .addComponent(tButton1))
        .addGroup(tLayout.createParallelGroup()
                .addComponent(tTable))); 
```

我的代码有什么问题？我很感激你的回答！

PS.：我不想使用布局编辑器，因为这是我的第一次，我想了解 SWING！

PPS.:

```
|Geben sie bitte die Kriterien für die Suche an:  
|Name:            (textfield)  
|Maximaler Preis: (textfield)  
|Alter des Kunden:(textfield)  
|Kategorie:       (Combo)  
|                 (Button)  
|Table.... 
```

除了上面的标签和桌子，一切都在正确的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:41:39.107

GridBagLayout 示例...

![在此处输入图像描述](../Images/6f86b6e63b1b4def0d6806cc68fc2072.png)

你真的应该把`JTable`里面放一个 JScrollPane，它会为你处理标题，但是干草

```
public class TestLayout {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new FormPane());
                frame.setSize(600, 300);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected static class FormPane extends JPanel {

        public FormPane() {
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            gbc.anchor = GridBagConstraints.WEST;

            add(new JLabel("Geben sie bitte die Kriterien für die Suche an:"), gbc);

            gbc.gridwidth = 1;
            gbc.gridy++;
            add(new JLabel("Name:"), gbc);
            gbc.gridy++;
            add(new JLabel("Maximaler Preis:"), gbc);
            gbc.gridy++;
            add(new JLabel("Alter des Kunden:"), gbc);
            gbc.gridy++;
            add(new JLabel("Kategorie:"), gbc);

            gbc.gridx++;
            gbc.gridy = 1;
            add(new JTextField(10), gbc);
            gbc.gridy++;
            add(new JTextField(10), gbc);
            gbc.gridy++;
            add(new JTextField(10), gbc);
            gbc.gridy++;
            add(new JComboBox(), gbc);
            gbc.gridy++;
            add(new JButton("Click me"), gbc);

            gbc.gridy++;
            gbc.gridx = 0;
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            gbc.fill = GridBagConstraints.HORIZONTAL;

            DefaultTableModel model = new DefaultTableModel(
                            new Object[][] {
                                {"id", "Name", "Price", "Something", "Something", "Something"},
                                {"NA", "NA", "NA", "NA", "NA", "NA"}
                            },
                            new Object[]{"id", "Name", "Price", "Something", "Something", "Something"});

            add(new JTable(model), gbc);

        }
    }
} 
```

# php - 表单不发布过滤字段的数据？

> ID：12777641
> 
> 赞同：-1
> 
> 时间：2012-10-08T08:08:23.247
> 
> 标签：php, html, ajax

我正在从数据库中获取类别及其子类别。并在使用下拉列表选择类别 bu 后过滤子类别。在我提交表单时选择后，子类别的值为0，表单不发布所选值。

```
<?php 
    if(isset($_POST) && $_POST['submit'] == "Add")
    {
        extract($_POST);
        $scat_id = $regions['scat_id'];
        echo $sqlpa = "INSERT INTO products(mcat_id, scat_id)VALUES('$mcat_id', '$scat_id')";   
            $resultpa = mysql_query($sqlpa);

    }
  ?>
<script type="text/javascript">
    function getregions(mcat_id) {
      if (mcat_id=="") {
         document.getElementById("region").innerHTML="";
         return;
      }
      if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
         xmlhttp=new XMLHttpRequest();
      } else {// code for IE6, IE5
         xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
           document.getElementById("region").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","getregions.php?mcat_id="+mcat_id,true);
    xmlhttp.send();
    }
    </script>
    <form action="" method="post" name="p_add" id="p_add">
     <table> 
```

```
 <tr>
         <td>Select Category</td>
         <td><select name="mcat_id" id="mcat_id" onchange="getregions(this.value);">
                <option value="">Select</option>
                 <?php 
              if(!empty($resultm)) {
                 foreach($resultm as $rm) {
             ?>
                <option value="<?php echo $rm['mcat_id']; ?>"><?php echo $rm['mcat_name'];?> (<?php echo $rm['mcat_id']; ?>)</option>
                 <?php 
                         }
                      }
                 ?>
           </select>
           </td>
         </tr>
         <tr>
           <td>Select Sub-Category</td>
           <td>
             <div id="region">
           <select name="scat_id" id="scat_id">
             <option value="">Please Select</option>
           </select>
         </div>
           </td>
         </tr>
         <tr>
            <td>&nbsp;</td>
            <td><input type="submit" name="submit" value="Add" /></td>
         </tr>       
   </table>
 </form> 
```

-->这个页面是getregions.php，过滤完成的地方：

```
<?php 
   include "../conn.php";
   $mcat_id=$_GET['mcat_id'];
   $sql = "SELECT * FROM sub_category WHERE mcat_id = '".$mcat_id."'";
   $res = mysql_query($sql);
   while($row = mysql_fetch_array($res)) {
    $rec[] = $row ;
   }
?>
<select name="scat_id" id="scat_id">
    <option value="">Please Select</option>
<?php 
foreach($rec as $regions) {
?>
   <option value="<?php echo $regions['scat_id'];?>"><?php echo $regions['scat_name'];?></option>
<?php 
}
?>
</select> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-08T08:41:14.760

就在插入查询之前，我需要写

```
 $scat_id = $_post['scat_id']; 
```

这将获得发布的价值。

# android - 显示请求行 HttpPost

> ID：12777646
> 
> 赞同：0
> 
> 时间：2012-10-08T08:09:58.853
> 
> 标签：android, httpclient

我正在尝试向服务器发送 Post 请求，但它正在向我发送数据错误。我想检查我发送的确切请求行。基本上我在做：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(SERVER);
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("data1", data1));
nameValuePairs.add(new BasicNameValuePair("data2", data2));
....
httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

(here I want to see my request, something like: 
'data1=data1&data2=data2' http://[server.url] )

HttpResponse response = httpClient.execute(httpPost);
HttpEntity entity = response.getEntity(); 
```

谢谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:15:34.773

尝试

```
String url = "http://serverurl";
for(int i =0;i<nameValuePairs.size;i++)
{
url = url+"?"+nameValuePairs.get(0).getName()+"="+nameValuePairs.get(0).getValue();
}
Log.v("your url is",url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:32:59.327

post.getEntity().getContent().read(); 使用此代码读取您在 HttpPost 中设置的整个实体作为请求参数。为了将其打印到日志，请使用此方法将 InputStream 转换为 String

```
public static String convertStreamToString (InputStream is) {

    BufferedReader reader = new BufferedReader( new InputStreamReader( is ) );
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append( line + "\n" );
        }
    }
    catch (IOException e) {
        Log.d( "IOException", "Error occured during convertString " + e.getMessage() );
        e.printStackTrace();
    }
    finally {
        try {
            is.close();
        }
        catch (IOException e) {
            Log.d( "IOException", "Error occured on closing buffer " + e.getMessage() );
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

然后写 Log.d("RequestEntity",convertStreamToString(post.getEntity().getCotent());

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:38:51.807

删除您的最后一行： (getEntity) 并改为执行此操作：

```
HttpResponse response = httpClient.execute(httpPost);
BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

StringBuilder builder = new StringBuilder();
String line = "";
while ((line = reader.readLine()) != null) {
    builder.append(line);
}

Strong html = builder.toString(); 
```

# python - iteritems 不返回所有字典项

> ID：12777648
> 
> 赞同：0
> 
> 时间：2012-10-08T08:10:09.487
> 
> 标签：python, django

我正在使用 iteritems() 遍历字典以在 Django 中创建对象。但是，我发现创建对象的数量与字典对象的数量不同。

在进一步探索时，我发现字典的 iteritems() 方法只返回 197 个元组，而字典本身包含 269 个项目。

```
data = {...}
print len(data) #output: 269
for k, v in data.iteritems():
    Category.objects.create(name=k).save()
len(Category.objects.all()) #output: 197 
```

型号定义：

```
class Category(models.Model):
    name = models.CharField(max_length=100) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:52:08.220

首先，我不建议您使用`len(Category.objects.all())`来计数对象。相反，您应该使用

```
Category.objects.count() 
```

这不是风格问题，而是效率问题。后者使用 SQL COUNT，因此对象的数量不是由 python 而是由您的数据库（mysql、sqlite 等）计算的

我无法评论为什么你得到 192 个对象，而不是 267 个。我猜这是因为你的`create`函数得到了一些不可用的参数——可能`k`不是字符串，或者它的长度可能超过 100 个字符。

您能否调查哪些元素未保存并提供此信息？

# entity-framework - WF4 TransactionScope 包含几个带有 EF4 数据库更新的自定义活动

> ID：12777649
> 
> 赞同：3
> 
> 时间：2012-10-08T08:10:18.660
> 
> 标签：entity-framework, transactions, workflow-foundation-4

我创建了几个自定义活动来更新我的数据库中的表（在本例中为 SQL Server Compact），使用带有 POCO 的实体框架 4。

如果我在 WF4 TransactionScope 活动中放置了多个这些，我会遇到问题：EF 在第一个活动完成后释放数据库连接，并且当下一个数据库活动尝试进行数据库更新时，会建立一个新连接向上。此时抛出异常。

```
System.Activities.WorkflowApplicationAbortedException : The workflow has been aborted.
 ----> System.Data.EntityException : The underlying provider failed on Open.
 ----> System.InvalidOperationException : The connection object can not be enlisted in transaction scope. 
```

我是否必须在整个事务范围内保持 EF 连接打开？我怎样才能做到这一点？为此创建一个明确的自定义活动，还是有标准方法？

**我当前的解决方法**是这样的：我创建了一个新的代码活动来创建我们的 ObjectContext 并明确调用 dbContext.Connection.Open()。它返回 ObjectContext，然后将其保存在工作流变量中。那个作为 InArgument<> 传递给所有与 DB 相关的活动。在我的数据库活动中，如果传入了这个 ObjectContext，我会使用它，否则我会创建一个新的。

这确实有效，但我对这个解决方案不满意：它需要新的 InArgument 用于每个与 ​​DB 相关的活动。在工作流设计器中，我必须在事务范围内插入特殊的 OpenDatabaseConnection 活动，然后确保将正确的变量传递到所有 DB 活动中。这似乎非常不雅且容易出错，特别是如果其他团队成员必须使用这些数据库活动。

有什么更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:27:25.937

问题在于，当您在同一事务范围内打开第二个连接时，会尝试将该事务提升为分布式事务（即使由于您连接到同一个数据库而没有任何分布式事务）。SQL Server CE 不支持这种情况。

我要做的是创建一个自定义的“容器”活动来打开（和关闭）连接并使其可用于子活动。这仍然不是最佳的，但至少你不再需要传递`InArgument`'s 。您将获得以下活动树：

```
TransactionScope
    InitializeConnection
        Sequence
            CustomDataActivity1
            CustomDataActivity2
            CustomDataActivity3 
```

`InitializeConnection`是一个[`NativeActivity`](http://msdn.microsoft.com/en-us/library/system.activities.nativeactivity.aspx)用于[`NativeActivityContext.Properties`](http://msdn.microsoft.com/en-us/library/system.activities.nativeactivitycontext.properties.aspx)将连接（或`ObjectContext`）暴露给子活动的。

确保实施正确的错误处理，以确保始终关闭连接。

**注意**：完整的 SQL Server 仅通过称为[MSDTC](http://technet.microsoft.com/en-us/library/cc771686%28WS.10%29.aspx)（Microsoft 分布式事务协调器）的 Windows 服务支持分布式事务。您可以在“本地服务”中找到这个。由于 SQL Server CE 是一个应该能够完全独立运行的数据库，因此它不依赖于 MSDTC 是有道理的。因此它不支持分布式事务。

# c# - 如何加入字符串数组但首先删除数组中的空元素？

> ID：12777650
> 
> 赞同：16
> 
> 时间：2012-10-08T08:10:25.103
> 
> 标签：c#, arrays, join, string

我正在使用以下内容：

```
return string.Join("\n", parts); 
```

Parts 有 7 个条目，但其中两个是空字符串“”。我怎样才能先删除这两个条目，然后加入剩下的五个？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-08T08:12:10.333

您可以`Where`在 LINQ 中使用来选择不为空的字符串：

```
 return string.Join("\n", parts.Where(s => !string.IsNullOrEmpty(s))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-02T12:28:29.803

另一种方法是使用 StringSplitOptions.RemoveEmptyEntries：

例如

```
string yourString = "The|quick||brown|||fox|is|here";
char[] delimiter = new char[] { '|' };

string result = string.Join(",", yourString.Split(delimiter, StringSplitOptions.RemoveEmptyEntries)); 
```

这给出了：

> 快，棕色，狐狸，是，在这里

@Stefan Steiger：

```
string yourString = "echo 'foo' | sed '/foo/d;'"; 
```

这给出了：

> echo 'foo' , sed '/foo/d;'

这是我所期望的。[请参阅它的 dotnetfiddle](https://dotnetfiddle.net/9B4R9A)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T08:24:25.383

尝试使用`LINQ`

```
string[] hello = new string[] { "ads", "zxc", "wer", "", "wer", "", "243" };
string newString = string.Join("\n", hello.Where(x => x.Trim().Length != 0));
MessageBox.Show(newString); 
```

或者

```
return string.Join("\n", hello.Where(x => x.Trim().Length != 0)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-14T08:40:03.237

要在 .NET 2.0（无 LINQ）中执行此操作，例如针对 ReportingServices 而无需为其编写函数：

C＃

```
string a = "", b = "b", c = "", d = "d", e = "";
string lala = string.Join(" / ",
    string.Join("\u0008", new string[] { a, b, c, d, e }).Split(new char[] { '\u0008' }, System.StringSplitOptions.RemoveEmptyEntries)
);

System.Console.WriteLine(lala); 
```

VB.NET

```
Dim a As String = "", b As String = "b", c As String = "", d As String = "d", e As String = ""
Dim lala As String = String.Join(" / ", String.Join(vbBack, New String() {a, b, c, d, e}).Split(New Char() {ControlChars.Back}, System.StringSplitOptions.RemoveEmptyEntries))

System.Console.WriteLine(lala) 
```

这假设您的字符串中没有出现退格字符（通常应该是正确的，因为您不能简单地通过键盘输入此字符）。

# java - 我的 assertEquals 有什么问题？

> ID：12777651
> 
> 赞同：-6
> 
> 时间：2012-10-08T08:10:28.533
> 
> 标签：java, junit

仍然得到红色条。AssertEquals 有什么问题？

```
public void testFindEmployeeByID() {
    StubEmployeeRepositoryImpl result = new StubEmployeeRepositoryImpl(dataSource);
    List<Employee> emp = result.findEmployeesByName("John", "X");
    assertEquals("John"+"X", result.findEmployeesByName("John", "X"));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T08:12:41.123

可能 assertEquals 不知道如何比较`List`和`String`......

# java - 文本文件比较

> ID：12777652
> 
> 赞同：2
> 
> 时间：2012-10-08T08:10:39.410
> 
> 标签：java

我正在实现用于比较 java 中的两个文本文件的工具。文本文件仅包含数字、字母数字和键盘符号。将一个文件与另一个文件进行比较，找出拼写、标点或缺失文本错误。

例子：

```
Original word: Her
 Error Word: hor   
It is spelling error

Original word: Miss
 Error Word: miss 
It is Punctuation error 
```

无需使用字典，因为拼写也与原始文件进行比较。如果原始文件中的单词是她，而第二个文件中的单词是 hor，则会产生拼写错误，但问题是拼写、标点符号或缺失文本的分类做得不好

如果有任何功能或工具可以解决我的问题，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:15:55.410

您需要实现一个字典[Trie 数据结构](http://en.wikipedia.org/wiki/Trie)。这是进行拼写更正的唯一方法，结果可预测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:27:48.393

由于我无法在原始帖子下发表评论，因此我将在此处要求澄清。

问题是“如何判断一个单词是否丢失”？例如，如果您有以下行：

“我的名字是罗伊，这里有一堆其他的文字”

“我的名字罗伊，这是一堆其他的文字”

因为第二行少了“is”这个词，程序就报一堆拼写错误而不是漏词错误？

# asp.net-mvc - 如何从 IDictionary 创建 aDropDown 列表列表 在 ASp.Net Mvc3 中使用 Razor

> ID：12777655
> 
> 赞同：0
> 
> 时间：2012-10-08T08:10:49.830
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

如何在 ASp.Net Mvc3 中使用 Razor 从 IDictionary 创建一个下拉列表？我=正在尝试以下代码但没有成功。

```
 public IDictionary<string, string> CandidatesList = new Dictionary<string, string>();

    Html.DropDownListFor(modal => modal.CandidatesList, new SelectList(Model.CandidatesList, "Value", "Key")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:12:41.233

不要将下拉列表绑定到与第二个参数相同的属性。您必须将其绑定到模型上的原始类型属性：

```
@Html.DropDownListFor(
    model => model.SelectedCandidateKey, 
    new SelectList(Model.CandidatesList, "Value", "Key")
) 
```

where`SelectedCandidateKey`必须是视图模型上的字符串属性，它将保存选定的项目键。

这样想：当您需要 ASP.NET MVC 中的下拉列表时，您必须在视图模型上声明 2 个属性：

1.  将保存所选值的原始类型属性
2.  `IEnumerable<SelectListItem>`将保存所有可用值的属性

# c# - MySQL Insert 语句中的 where 条件

> ID：12777656
> 
> 赞同：0
> 
> 时间：2012-10-08T08:10:51.317
> 
> 标签：c#, mysql

我可以在插入语句中使用 where 条件吗？？？？我已经这样编码了，它向我显示了一个错误调用 MySQLException 未处理，您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'WHERE RegistrationID='3'' 附近使用正确的语法。我的代码：-

```
MySqlCommand cmd1 = new MySqlCommand("INSERT INTO registration(DueAmount) VALUES ('"+textBox5.Text + "') WHERE RegistrationID='"+textBox2.Text+"'",connection); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:13:12.697

`INSERT`没有`WHERE`子句的正确语法。我想你想要`UPDATE`而不是`INSERT`,

```
UPDATE registration 
SET DueAmount = 'txt5'
WHERE RegistrationID = 'txt2' 
```

`WHERE`您可以使用的唯一方法`SELECT`是在使用`INSERT INTO....SELECT`语句时。

还有一件事，因为您正在使用`ADO.NET`，请确保将查询参数化以避免`SQL Injection`使用 ，并使用`USING`语句。

```
string query = "UPDATE  registration 
                SET     DueAmount = @dateAmount
                WHERE   RegistrationID = @RegID"
using (MySqlCommand cmd1 = new MySqlCommand(query,connection))
{
    cmd1.CommandType = CommandType.Text;
    cmd.Parameters.AddWithValue("@dateAmount", textBox5.Text);
    cmd.Parameters.AddWithValue("@RegID", textBox2.Text);

    // other codes
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:32:27.770

您正在混合两种不同的陈述。

*   语句更新`UPDATE`表中的现有行。
*   一条`INSERT`语句在您的表中添加一个新行。

我认为您想使用`UPDATE`语句并修改现有行。

```
MySqlCommand cmd1 = new MySqlCommand("
UPDATE Registration Set DueAmount= '"+textBox5.Text 
+ "' WHERE RegistrationID='"+textBox2.Text+"'",connection); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:12:58.940

`INSERT`没有`WHERE`意义。 `INSERT`总是插入一个新行。如果该记录不存在，您可能正在寻找`REPLACE INTO`哪个插入或更新，如果它基于其主键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T08:14:36.210

`INSERT`将新行放入数据库。你不能换行`WHERE`sth is sth。但是你可以`UPDATE`。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T08:15:37.753

您需要使用 UPDATE 语句。

tHS 语法类似：“更新注册 SET DueAmount = '”+ textBox5.Text +“'WHERE RegistrationID='”+textBox2.Text+“'”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T08:21:44.177

你可以试试`Update`

```
var query = "UPDATE Registration SET DueAmount= $Paremeter1 WHERE RegistrationID = $Paremeter2";
var cmd1 = new MySqlCommand(query, connection);

cmd1 .Parameters.AddWithValue("$Paremeter1", textBox5.Text);
cmd1 .Parameters.AddWithValue("$Paremeter2", textBox2.Text); 
```

# c# - 如何避免双重铸造？

> ID：12777659
> 
> 赞同：3
> 
> 时间：2012-10-08T08:11:00.207
> 
> 标签：c#, interface, casting

我得到了以下类层次结构：

`MssqlDataSource<T>`: `DataSource<T>`: `IDataSource<T>`:`IQueryable<T>`

在`MssqlDataSource`课堂上我得到了财产：

```
private Table<T> Table { get { return (Table<T>)(IQueryable<T>)this; } } 
```

并且双重转换（`this`to[`IQueryable`](http://msdn.microsoft.com/en-us/library/bb351562.aspx)然后 to [`Table`](http://msdn.microsoft.com/en-us/library/bb358844.aspx)）不能简化为`(Table<T>)this`或仅仅`this`因为我收到编译错误。

* * *

```
private Table<T> Table { get { return (Table<T>)this; } } 
```

产生： ![投射错误](../Images/f40c2333a2b109527f2d50113d33bed9.png)

* * *

那么如何解决呢？如何只使用一个转换（或者最好不使用）来避免编译错误？为什么会出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:28:40.763

据此：

```
MssqlDataSource<T>:DataSource<T>:IDataSource<T>:IQueryable<T> 
```

`MssqlDataSource<T>`不继承自`Table<T>`.

为什么要进行这种铸造？

# php - PHP/MySQL Concat 到单个列并更新表中的其他列

> ID：12777660
> 
> 赞同：0
> 
> 时间：2012-10-08T08:11:06.680
> 
> 标签：php, mysql

我试图只对列进行新的更新`updates`并更新其余列中的值，但我遇到了一些我似乎无法锻炼的障碍。

我的 SQL 如下所示：

```
$query="Update tickets SET product='$product',
        p='$p',
        i='$i',
        summary='$summary',
        workaround='$workaround',
        concat(updates,'$additional_update'),
        status='$status',
        raised_by='$raised_by',
        updated_by_user='$updated_by' WHERE id='$id'"; 
```

该`updates`列就像一个评论列，其中新的更新旨在附加到现有文本中。

我在网络服务器上遇到的错误：

```
Update tickets SET product='T-Box', p='00000817766', i='-', summary='Testing update field
\r\nAdding an update\r\ntesting if null works for update', workaround='n/a', concat(updates,' ','test2@18:53:17:second update/n'), status='Open', raised_by='No', updated_by_user='test2' WHERE id='223' 
```

直接在 MySQL 中运行查询：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(updates,'test2@18:53:17:second update/n'), status='Open', raised_by='No', updat' at line 1 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:14:15.380

您需要指定`concat(updates,'$additional_update')`要设置此语句的值的位置。

```
Update tickets 
SET    product = '$product',
       p = '$p',
       i = '$i',
       summary = '$summary',
       workaround = '$workaround',
       updates = CONCAT(updates,'$additional_update'),  // <== see this
       status = '$status',
       raised_by = '$raised_by',
       updated_by_user = '$updated_by' 
WHERE id = '$id' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:13:45.977

试试这个：

```
$query="Update tickets SET product='$product',
        p='$p',
        i='$i',
        summary='$summary',
        workaround='$workaround',
        updates=concat(updates,'$additional_update'),
        status='$status',
        raised_by='$raised_by',
        updated_by_user='$updated_by' WHERE id='$id'"; 
```

# c# - 在带有文本参数的存储过程中是否可以进行 sql 注入？

> ID：12777667
> 
> 赞同：1
> 
> 时间：2012-10-08T08:11:43.730
> 
> 标签：c#, sql, sql-server

我在我的存储过程中使用这样的查询

```
SET @Statement =
'SELECT Id,Title,Content,Status,ROW_NUMBER()
        OVER (ORDER BY ' + @Sort + ') AS StudentReport

         FROM YearBook

        WHERE ' + @Criteria + ')

         AS ArticleNumber

        WHERE StudentReport> ' + CONVERT(NVARCHAR, @StartRowIndex) + ' AND

        StudentReport<= (' + CONVERT(NVARCHAR, @StartRowIndex + @MaximumRows); 
```

只想知道是否可以对这个存储过程进行sql注入。如果是，我该如何预防？需要帮忙 ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:24:13.587

是的，这是可能的。很容易，甚至。尝试设置

```
@Criteria = "\r\nGO\r\nexec sp_addlogin 'hacker', 'broken'\r\nGO"; 
```

该批次将产生错误，但中间的部分仍然会运行，因此欢迎您的新登录。

* * *

进行查询的正确方法可能是这样的。

```
CREATE PROC FindSomething
  @StartRowIndex int,
  @MaximumRows int,
  @Sort int, -- 1-4 representing the columns, say in a dropdown
  @Id int,
  @Content varchar(max),
  @Title varchar(max),
  @Status int
AS
SELECT Id,Title,Content,Status
FROM
(
    SELECT Id,Title,Content,Status,
           ROW_NUMBER() OVER (ORDER BY
               CASE when @Sort = 1 then Id
                    when @Sort = 4 then Status
                    end,
               CASE when @sort = 2 then Title
                    when @sort = 3 then Content
                    end) AS StudentReport
    FROM YearBook
    WHERE (@id is null or @id = Id)
      AND (@Content is null or @Content = Content)
      AND (@Title is null or @Title = Title)
      AND (@status is null or @Status = Status)
) Numbered
WHERE StudentReport >= @StartRowIndex
  AND StudentReport <= @StartRowIndex + @MaximumRows
OPTION (RECOMPILE);
GO 
```

在此处阅读有关动态搜索的更多信息：[www.sommarskog.se/dyn-search.html](http://www.sommarskog.se/dyn-search.html)

注意：我在排序中将 1/4 和 2/3 分开，因为 CASE 语句的每个分支都必须产生相同的类型，或者是兼容的。int/varchar 在 case 语句中是非常糟糕的组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:16:57.033

假设以上是您正在构建的字符串，然后使用`EXEC`or `sp_executesql`then **Yes**执行，则可以进行 SQL 注入。

如何防止它取决于您要做什么。也许你需要重新考虑你的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:32:40.793

是的，它会的。你仍然可以做一些事情来帮助防御它

例如，`@Sort`是一个列名，因此您可以正确地对其进行转义（并确保如果有人试图将某些东西注入其中，它将不起作用，因为它已被正确转义。为此，请使用[QUOTENAME](http://msdn.microsoft.com/en-us/library/ms176114.aspx)。

```
QUOTENAME(@Sort) 
```

`@Criteria`更困难，因为您实际上期望 SQL 代码上的片段，因此很难确定什么是有效的，什么是恶意的。您可能想重新考虑您在这里尝试做什么。如果您必须使用 Criteria，请确保设置了安全模型，以便只有绝对需要它的应用程序才能访问执行此操作的存储过程。确保在发送 SQL 之前在应用程序中进行验证，以确保它所做的任何事情都不会造成破坏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T11:49:06.620

看起来您正在尝试使用分页创建一个非常通用的搜索存储过程。这些很难仅在 t-sql 中正确实现，并且由于分支逻辑或您需要添加的其他支持存储过程，可能会成为维护的难题……

我将开始研究纯 sql 方法之外的其他选项。使用 orm 或 micro orm 会有很大帮助。实际上，看看 Sam Saffron 想出了什么...

[http://samsaffron.com/archive/2011/09/05/Digging+ourselves+out+of+the+mess+Linq-2-SQL+created](http://samsaffron.com/archive/2011/09/05/Digging+ourselves+out+of+the+mess+Linq-2-SQL+created)

# string - 将两个字符串连接在一起

> ID：12777669
> 
> 赞同：7
> 
> 时间：2012-10-08T08:11:49.300
> 
> 标签：string, haskell, functional-programming, concatenation, string-concatenation

我想使用将两个字符串连接在一起的 Haskell 定义我自己的中缀运算符。但是，我想添加一个额外的子句，其中运算符将连接两个字符串中的重叠元素。所以一个例子是

```
"eagle" myinfix "eagleeyes" = "eagleeyes"
"water" myinfix "book" = "waterbook"
"need" myinfix "education" = "needucation" 
```

我已经想出了如何返回字符串中的重叠部分：

```
check x y = head $ filter (`isPrefixOf` y) (tails x) 
```

但我不知道如何将其纳入。有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T08:22:51.963

你正在以稍微错误的方式去做。

```
(+++) :: Eq a => [a] -> [a] -> [a]
xs     +++ ys | xs `isPrefixOf` ys = ys
(x:xs) +++ ys                      = x : (xs +++ ys) 
```

也就是说，你并不真正关心重叠是什么，你只关心你是否达到了它。

* * *

这是另一个没有显式递归的解决方案。

```
(++++) :: Eq a => [a] -> [a] -> [a]
xs ++++ ys = prefix ++ ys
  where (prefix, _) : _ = filter (\(_, overlap) -> overlap `isPrefixOf` ys) $ zip (inits xs) (tails xs) 
```

在这里，我们开始寻找重叠，就像在你的一样`check`，但是我们没有保留重叠，而是产生了`xs`不*重叠*的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:05:46.467

```
overlapConcat :: (Eq a) => [a] -> [a] -> [a]
overlapConcat s t = s ++ drop (length $ check s t) t 
```

这不会像提供的其他版本那么快，因为它将执行两次 pass over s，但我认为它更具可读性，并且具有直观意义。

# java - 不使用证书的加密 RMI 通信

> ID：12777670
> 
> 赞同：0
> 
> 时间：2012-10-08T07:24:33.227
> 
> 标签：java, ssl, rsa, rmi, elgamal

我需要在同一台主机上创建两个 java 进程以安全通信。我不需要对流程进行身份验证，因此我不想使用证书。

我想在服务器和客户端生成一个随机密钥，使用 Elgamal 在进程之间交换密钥；跨进程建立公共对称密钥；然后安全地通信。

据我所知，这可以通过实现 RMIServerSocketFactory 和 RMIClientSocketFactory 接口来建立如上所述的对称密钥来完成。

是否已经有一个实现来做到这一点？

或者有没有办法配置 SslRMIServerSocketFactory 和 SslRMIClientSocketFactory 开始使用 ElGamal 作为密钥交换协议

ElGamal 是 RSA 的首选，因为 ElGamal 将为每次握手生成随机对称密钥，而 RSA 每次都会生成静态密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:53:17.393

> 我需要在同一台主机上创建两个 java 进程以安全通信。我不需要对流程进行身份验证，因此我不想使用证书。

不幸的是，你的推理从一开始就有缺陷。无论通信渠道多么“坚固”，如果您想秘密交换数据，您总是希望确保与目标方进行通信。为此，需要以一种或另一种形式进行身份验证。

理论上，您可以取消证书并使用 PSK 密码套件（这将有效地包括身份验证步骤）。默认情况下，Oracle/OpenJDK JRE 不支持此功能。此外，如果您假设您的证书的私钥会被泄露（正如您的[另一个问题](https://stackoverflow.com/q/12775391/372643)所建议的那样），那么预共享密钥也可能会发生同样的问题。

# c++ - 从四元数查看矩阵

> ID：12777675
> 
> 赞同：7
> 
> 时间：2012-10-08T08:12:31.373
> 
> 标签：c++, math, camera, directx, quaternions

我目前正在构建自己的四元数相机。据我所知，您只需要一个四元数即可完全指定相机的方向（如果我错了，请纠正我）。那么，我将如何创建视图矩阵？顺便说一句，我使用 C++ 作为编程语言。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-08T13:19:34.980

首先是一些警告。你会在网上和关于这个主题的文献中看到很多明显相互矛盾的公式。大多数冲突只是显而易见的。有一些是真正的冲突，但那是因为有人弄错了数学。问题是没有单一的正确方法可以做到这一点。您需要知道如何使用四元数和矩阵，源如何使用它们，以及如何纠正这些明显的差异。

**旋转与变换**
你的相机有一个与之关联的参考框架，底层空间也是如此。您的矩阵是表示相机从基础空间到相机方向的物理旋转，还是表示将基础空间中表示的向量转换为相机框架的矩阵？（或者别的什么；这里有四个选择。）这些选择是相关的；变换矩阵是旋转矩阵的转置。变换和旋转是共轭运算。同样的概念也适用于四元数。您使用的是转换四元数还是旋转四元数？这些又是相关的概念；一个是另一个的共轭。

**左右四元数**
给定一个单位四元数*q*来变换或旋转向量*v*，一些使用*qvq* ^*来变换/旋转向量，其他使用*q* ^* *vq*。哪种形式是正确的？两者都是。这两种形式的区别仅在于非共轭四元数是在要转换/旋转的向量的左侧（*qvq* ^*）还是右侧（*q* ^* *vq*）。

**列向量与行向量**
大多数人使用列向量，但有些人使用行向量。在这里，您遇到了矩阵的左右问题。*列向量通过Mv*变换/旋转，矩阵位于向量的左侧；通过*vM*的行向量，右侧的矩阵。

**影响**
你必须小心阅读文献。关于从四元数形成矩阵，您需要注意构造矩阵的非对角元素时的符号变化。一种配方的加法/减法可能会变成另一种配方的减法/加法。

**左变换四元数到行向量变换矩阵**
我使用左变换四元数和变换矩阵，并将向量表示为行向量。我还将四元数*q*表示为包含实数标量部分*q [s]*和向量虚数部分*q [v]*。给定这些表示，从四元数生成矩阵的计算是（伪代码）：

```
// Compute the cosine of the rotation angle.
cost = 2.0*qs*qs - 1.0;

// Construct the diagonal of the matrix:
// T_ii = cost + 2qv_i^2
for (i = 0; i < 3; ++i) {
   T[i][i] = cost + 2.0*qv[i]*qv[i];
}

// Construct off-diagonal transformation matrix elements:
//   T_ij = 2 (qv_i qv_j - eps_ijk qs qv_k), where eps is the Levi-Civita symbol
for (k = 0; k < 3; ++k) {
   i = (k+1)%3;
   j = (i+1)%3;
   T[i][j] = 2.0*(qv[i]*qv[j] - qs*qv[k]);
   T[j][i] = 2.0*(qv[i]*qv[j] + qs*qv[k]);
} 
```

您可能想要扩展这些循环。第一个循环扩展为三个语句，后者为六个。您不需要在后一个循环的扩展中计算*i*和*j*；循环的扩展使它们成为固定数量。

**替代表示**
上面的这些警告并不像看起来那么糟糕。你需要确保我的陈述与你的一致。赔率是 50-50，它不是。如果不是，只需将分配交换到非对角线元素。`T[i][j]`使用for的计算，`T[j][i]`反之亦然。如何判断：

*   *从s* =1开始。
*   如果使用旋转四元数而不是变换四元数，则将*s*乘以-1。
*   如果使用右四元数而不是左四元数，则将*s*乘以-1。
*   如果使用旋转矩阵而不是变换矩阵，则将*s*乘以-1。
*   如果使用行向量而不是列向量，则将*s*乘以-1。

*如果s*的最终值为1，请使用我的公式。如果为 -1，只需将分配交换为`T[i][j]`和`T[j][i]`。或者您可以将加法改为减法，将减法改为加法。

**最后一个问题**
上述计算适用于标量部分不接近于零的情况。如果我们有无限精度的算术，它将在任何地方都有效。您可能希望对非常接近零或 180 度的旋转使用单独的计算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T08:47:05.963

维基百科知道：[四元数和空间旋转](http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation#Using_quaternion_rotations)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T16:13:33.673

我建议使用[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page) C++ 库来表示您的四元数和矩阵。当你有一个四元数对象时，你可以简单地调用`.toRotationMatrix()`它来获得一个 3x3 矩阵。

另一个可能有用的库是[glm](http://glm.g-truc.net/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T16:02:57.657

可配置数学库 ( [http://cmldev.net/](http://cmldev.net/) ) 是一个非常轻量级的库，可以为您进行计算。它是一个头文件库，因此集成到您的代码中应该不成问题。此功能 ( [http://cmldev.net/?p=196](http://cmldev.net/?p=196) ) 也可能对您有所帮助。

# collections - 使用 ValueInjector 映射类的步骤

> ID：12777676
> 
> 赞同：0
> 
> 时间：2012-10-08T08:12:35.633
> 
> 标签：collections, mapping, valueinjecter

快速解决以下代码不会发生映射的问题。有人可以解释为什么吗？或者我应该怎么做才能进行映射？

```
var parent = new Parent();
parent.ChildOne.Add(new ChildOne() { Name = "Child One" });
parent.ChildTwo.Add(new ChildTwo() { Name = "Child Two" });
AnotherParent anotherParent = new AnotherParent();

anotherParent.InjectFrom<LoopValueInjection>(parent); 
```

必修课如下

### 另一个孩子一

```
 public class AnotherChildOne
    {
        public string Name { get; set; }
    } 
```

### 另一个孩子二

```
 public class AnotherChildTwo
    {
        public string Name { get; set; }

    } 
```

### 另一个家长

```
public class AnotherParent
    {
        public ICollection<AnotherChildOne> ChildOne { get; set; }

        public ICollection<AnotherChildTwo> ChildTwo { get; set; }

        public AnotherParent()
        {
            ChildOne = new Collection<AnotherChildOne>();
            ChildTwo = new Collection<AnotherChildTwo>();
        }

    } 
```

### 孩子二

```
public class ChildTwo
    {
        public string Name { get; set; }

    } 
```

### 孩子一

```
 public class ChildOne
    {
        public string Name { get; set; }
    } 
```

### 家长

```
 public class Parent
    {

        public ICollection<ChildOne> ChildOne { get; set; }

        public ICollection<ChildTwo> ChildTwo { get; set; }

        public Parent()
        {
            ChildOne = new Collection<ChildOne>();
            ChildTwo = new Collection<ChildTwo>();
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T06:17:33.057

我相信默认情况下 Value Injector 只会注入具有相同名称的相同类型的属性。`CloneInjection`您可以通过对 Value Injector 文档中的示例进行调整来解决此问题，[如下](https://stackoverflow.com/a/10842907/1207991)所述，代码如下：

```
public class CloneInjection : ConventionInjection
{
    protected override bool Match(ConventionInfo c)
    {
        return c.SourceProp.Name == c.TargetProp.Name && c.SourceProp.Value != null;
    }

    protected override object SetValue(ConventionInfo c)
    {
        //for value types and string just return the value as is
        if (c.SourceProp.Type.IsValueType || c.SourceProp.Type == typeof(string)
            || c.TargetProp.Type.IsValueType || c.TargetProp.Type == typeof(string))
            return c.SourceProp.Value;

        //handle arrays
        if (c.SourceProp.Type.IsArray)
        {
            var arr = c.SourceProp.Value as Array;
            var clone = Activator.CreateInstance(c.TargetProp.Type, arr.Length) as Array;

            for (int index = 0; index < arr.Length; index++)
            {
                var a = arr.GetValue(index);
                if (a.GetType().IsValueType || a.GetType() == typeof(string)) continue;
                clone.SetValue(Activator.CreateInstance(c.TargetProp.Type.GetElementType()).InjectFrom<CloneInjection>(a), index);
            }
            return clone;
        }

        if (c.SourceProp.Type.IsGenericType)
        {
            //handle IEnumerable<> also ICollection<> IList<> List<>
            if (c.SourceProp.Type.GetGenericTypeDefinition().GetInterfaces().Contains(typeof(IEnumerable)))
            {
                var t = c.TargetProp.Type.GetGenericArguments()[0];
                if (t.IsValueType || t == typeof(string)) return c.SourceProp.Value;

                var tlist = typeof(List<>).MakeGenericType(t);
                var list = Activator.CreateInstance(tlist);

                var addMethod = tlist.GetMethod("Add");
                foreach (var o in c.SourceProp.Value as IEnumerable)
                {
                    var e = Activator.CreateInstance(t).InjectFrom<CloneInjection>(o);
                    addMethod.Invoke(list, new[] { e }); // in 4.0 you can use dynamic and just do list.Add(e);
                }
                return list;
            }

            //unhandled generic type, you could also return null or throw
            return c.SourceProp.Value;
        }

        //for simple object types create a new instace and apply the clone injection on it
        return Activator.CreateInstance(c.TargetProp.Type)
            .InjectFrom<CloneInjection>(c.SourceProp.Value);
    }
} 
```

如果你包含上面的`CloneInjection`代码，你会想要这样做：

```
anotherParent.InjectFrom<CloneInjection>(parent); 
```

代替：

```
anotherParent.InjectFrom<LoopValueInjection>(parent); 
```

# c++ - realloc：没有足够的空间

> ID：12777681
> 
> 赞同：0
> 
> 时间：2012-10-08T08:12:42.623
> 
> 标签：c++, windows, memory, memory-management

Windows 7、64 位、MinGW 工具集，以下代码：

```
m_data = reinterpret_cast<SampleType *>(realloc(m_data, m_size + v));  
if (NULL == m_data){  
    perror ("realloc failed");  
    exit(-1);  
} 
```

失败并显示消息`realloc failed: Not enough space`
即使我再询问 100 个字节，它也会发生。而且无论我是使用 malloc（带有相应的指针重新分配）还是 realloc。我总是一样。
计算机报告超过 1GB 的可用内存。

以上是该方法的片段。下面是它的完整代码。关键是，当方法的 m_data 等于
时，此方法第一次分配内存，并在后续调用中扩大它。所以，请看下面 `this``NULL`

```
Wave & operator+= (const Wave wave){
    if (NULL != m_data){
        m_data = reinterpret_cast<SampleType *>(realloc(m_data, m_size + wave.DataSize()));
        if (NULL == m_data){
        perror ("realloc failed");
        exit(-1);
        }
    } else {
        m_data = reinterpret_cast<SampleType *>(malloc(wave.DataSize()));
        m_size = 0; // just for sure
    }
    /* this code fragment I used instead of realloc's one to prove that realloc is not a root of error cause
    SampleType *t_buf = reinterpret_cast<SampleType *>(malloc(m_size + wave.DataSize()));
    if (!t_buf) {perror ("malloc failed"); exit(-1);}
    memcpy (t_buf, m_data, m_size);
    free (m_data);
    m_data = t_buf;
    */
    memcpy (m_data + m_size, wave.SampleBuffer(), wave.DataSize());
    m_size += wave.DataSize();
    return *this;
}; 
```

因此，第一次使用 malloc 分配内存。不要怀疑。

调试器会话跟踪。

```
Breakpoint 2, _fu17___ZSt4cout () at ../sound_windows/Sound.h:192  
192             if (NULL != m_data){  
(gdb) print *this  
$2 = {static CHANNEL_NUMBER = <optimized out>, m_format = {wFormatTag = 1, nChannels = 2,nSamplesPerSec = 44100, nAvgBytesPerSec = 176400, nBlockAlign = 4,  
    wBitsPerSample = 16, cbSize = 18}, m_duration = 0, m_data = 0x0, m_size = 0}  
(gdb) cont  
Continuing.  

Breakpoint 2, _fu17___ZSt4cout () at ../sound_windows/Sound.h:192  
192             if (NULL != m_data){  
(gdb) print *this  
$3 = {static CHANNEL_NUMBER = <optimized out>, m_format = {wFormatTag = 1, nChannels = 2,nSamplesPerSec = 44100, nAvgBytesPerSec = 176400, nBlockAlign = 4,  
    wBitsPerSample = 16, cbSize = 18}, m_duration = 0.00451559993, m_data = 0x75d9e0, m_size = 800}  
(gdb) cont  
Continuing.  
tried to allocate 800+100 bytes  
realloc failed: Not enough space  
[Inferior 1 (process 6132) exited with code 037777777777] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:21:20.933

错误的根本原因是由于内存管理函数中的内存寻址混乱而导致堆栈破坏。例如，在以下代码行中

```
memcpy (m_data + m_size, wave.SampleBuffer(), wave.DataSize()); 
```

`m_data + m_size`意味着不是它的本意，因为它`m_data`指向一个两字节大小的类型，而`m_size`它的大小以字节为单位。因此`m_data + m_size`，指针不是偏移到终点，`m_data`而是偏移到两倍远的距离。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T10:00:48.407

我怀疑现有`m_data`的没有直接分配给`malloc`. `realloc`只重新分配最初分配的块`malloc`。

这是因为它使用了堆内部数据结构的知识。如果块不是来自堆，如果你很幸运，你会收到一条消息，如果你不走运，你的程序就会崩溃。

“空间不足”消息只是分配失败的一般返回。

***编辑：***在扩展版本中，您是否`m_data`在`NULL`构造函数中初始化？这不会自动发生，如果你不这样做，它通常会包含一个垃圾值。

换句话说，分支`if (NULL != m_data){`永远不会被击中，因为`NULL`除非你初始化它，否则 m_data 不会开始。

# ios - 在 UIScrollView 问题中旋转 UIImageView

> ID：12777688
> 
> 赞同：2
> 
> 时间：2012-10-08T08:13:09.987
> 
> 标签：ios, uiscrollview, uiimageview, rotation

我必须像照片应用程序一样实现旋转工作。有`UIImageView`里面一个`UIScrollView`。当设备旋转时，我希望图像像照片一样旋转到横向。如果图像是横向的，那么它将`UIScrollView`用旋转动画填充整个宽度。当下面的代码

```
[UIView animateWithDuration:0.36
               animations:^(void){
                [_imageView setTransform:CGAffineTransformMakeRotation(M_PI*90/180)];
                 _imageView.frame = CGRectMake(0, 0, 480, 320); //set the frame after the rotate
                self.contentSize = CGSizeMake(480, 320); //set the content-size of the scrollview
               }
               completion:^(BOOL complete){
               }]; 
```

但这不起作用。发生旋转，但位置`_imageView`不正确，或者图像没有填满宽度。即使我在转换之前更改了订单框架和内容大小，仍然不正确。

拥有这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T06:34:45.733

WWDC 2010[视频：使用滚动视图设计应用程序](https://developer.apple.com/videos/wwdc/2010/)向您展示了如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:00:15.660

在我看来，正确的答案是根本不要自己为旋转设置动画。

如果你按照最新的`iOS 6`指导方针工作，那么你只需重新安排你的`views`方法。`ViewController``layoutSubviews()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T18:06:52.440

@CoDEFRo 所指的源码与下面类似，但这里我把它放到了 UIScrollView 的委托方法 scrollViewDidScroll: 中。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {   
    CGSize boundsSize = scrollView.bounds.size;
    CGRect frameToCenter = self.imageView.frame;

    if (frameToCenter.size.width < boundsSize.width)
        frameToCenter.origin.x = (boundsSize.width - frameToCenter.size.width) / 2;
    else
        frameToCenter.origin.x = 0;

    if (frameToCenter.size.height < boundsSize.height)
        frameToCenter.origin.y = (boundsSize.height - frameToCenter.size.height) / 2;
    else
        frameToCenter.origin.y = 0;

    self.imageView.frame = frameToCenter;
} 
```

# javascript - 如何将数据发送到另一个页面而不将其附加到 url 中？

> ID：12777691
> 
> 赞同：2
> 
> 时间：2012-10-08T08:13:17.333
> 
> 标签：javascript, javascript-events

我有一个场景，当用户单击链接时，他被定向到一个页面，我想在其中添加代码以获取变量并重定向到另一个页面。

.ie 用户点击`<a href="sample.tpl">click here</a>`

在 sample.tpl 我想写一个代码把他重定向到另一个页面

```
<script>
window.location="http://mydomain.com/?page_id=10" 
```

**但出于安全原因，我也想在这个新链接上发送一个变量而不将其附加到 url**

我怎样才能通过一些安全的程序来做到这一点。

如果不清楚，请向我提问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T08:15:34.693

您可以创建一个带有 的表单`method="post"`，一个`hidden`带有您要传递的值的输入和一个`submit`样式为常规链接的按钮（如果您还想手动发送表单）。

`submit()`然后只需通过该方法手动或以编程方式提交表单

* * *

示例（页面加载后 3 秒后自动重定向） [http://jsbin.com/avacoj/1/edit](http://jsbin.com/avacoj/1/edit)

html

```
<form method="post" action="http://mydomain.com/" id="f">
   <input type="hidden" name="page_id" value="10">
   <noscript><button type="submit">Continue</button></noscript> /* see below */
</form> 
```

JS

```
window.onload = function() {
  var frm = document.getElementById('f');
  setTimeout(function() {
      frm.submit();
  }, 3000);
}; 
```

作为旁注，您可以考虑在标签`submit`内插入一个按钮，`<noscript></noscript>`以便即使用户设备上没有 js 也可以进行重定向，因此页面仍然可以访问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T08:20:31.370

除了 Fabrizio 的回答，有人编写了一个 javascript 函数，它允许您构建表单并`POST`在运行时通过它发送。

`POST`就像`GET`（变量附加到 url）除了变量是通过标头发送的。仍然可以伪造`POST`请求，因此您必须对数据执行某种验证。

```
function post_to_url(path, params, method) {
    method = method || "post"; // Set method to post by default, if not specified.

    // The rest of this code assumes you are not using a library.
    // It can be made less wordy if you use one.
    var form = document.createElement("form");
    form.setAttribute("method", method);
    form.setAttribute("action", path);

    for(var key in params) {
        if(params.hasOwnProperty(key)) {
            var hiddenField = document.createElement("input");
            hiddenField.setAttribute("type", "hidden");
            hiddenField.setAttribute("name", key);
            hiddenField.setAttribute("value", params[key]);

            form.appendChild(hiddenField);
         }
    }

    document.body.appendChild(form);
    form.submit();
} 
```

像这样使用：

```
post_to_url("http://mydomain.com/", {'page_id':'10'}, "post"); 
```

**来源：** [JavaScript 发布请求，如表单提交](https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit#answer-133997)

# java - 将键和值从一个映射复制到另一个映射

> ID：12777692
> 
> 赞同：1
> 
> 时间：2012-10-08T08:13:26.850
> 
> 标签：java, list, map, set

我正在尝试将键和值从一个映射 map1 复制到另一个映射 map2 中。地图 1 中的值存储在集合中，地图 2 应将地图 1 的值存储在列表中。每个中的键应该在两个映射中映射相同。

我可以遍历 map1 中的键，然后将这些键添加到映射 2。并有另一个内部 for 循环将每个集合的元素添加到 map2 的列表中，但我不确定这是否是正确的方法，或者甚至正确。

```
public static <K, V> void changeSetToList (Map<K, Set<V>> map1, Map<K, List<V>> map2) {
for (Map.entry<K, Set<V>> entry : m1.keys()) 
  for (List<V> l : m1.values()) 
      m2.put(entry.getKey(), l.getValue()); 
```

}

我还没有编译或测试它。无法访问计算机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:28:11.600

您可以遍历`Map`并使用[new ArrayList(Collections)](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#ArrayList%28java.util.Collection)构造函数从存储在原始 Map 中的 List 创建一个 List `Set`..并将其放入 new Map ..

```
 Map<String, Set<String>> givenMap = new HashMap<String, Set<String>>();
    Map<String, List<String>> newMap = new HashMap<String, List<String>>();

    Set<String> newSet = new HashSet<String>();
    newSet.add("rohit");

    givenMap.put("a", newSet);
    givenMap.put("b", newSet);
    givenMap.put("c", newSet);

    for (String str: givenMap.keySet()) {
        newMap.put(str, new ArrayList<String>(givenMap.get(str)));
    }

    for(String str:newMap.keySet()) {
        System.out.println(newMap.get(str));
    } 
```

**如果您想使用通用方法..**您需要将您的方法更改为：-

```
public static <K, V> void changeSetToList (Map<K, Set<V>> givenMap, 
        Map<K, List<V>> newMap) {

    for (K str: givenMap.keySet()) {
        newMap.put(str, new ArrayList<V>(givenMap.get(str)));
    }

    for(K str:newMap.keySet()) {
        System.out.println(newMap.get(str));
    }
} 
```

# sql - 从多个表中复制字段以创建新表

> ID：12777693
> 
> 赞同：2
> 
> 时间：2012-10-08T08:13:32.667
> 
> 标签：sql, oracle10g

如何通过仅复制多个表中的列来创建表？

> 例如。t1 与字段 (A1,A2,A3)
> 
> ```
> t2 with fiedls (D1,D2,D3)
> 
> t3 with fields (Z1,Z2,Z3) 
> ```

现在我必须**只使用字段而不是**上述三个表中的值来创建一个新表，即

> new_tbl (A1,A2,A3,D1,D2,D3,Z1,Z2,Z3)

我该怎么做？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:16:00.343

试试这个：

```
create table new_tbl as
select * 
from   t1
join   t1 on 1=2
join   t3 on 1=2 
```

条件 1=2 始终为假.. 所以它不会返回任何数据，但列标题..

# iphone - 当我使用 malloc 时，仪器看起来很奇怪

> ID：12777696
> 
> 赞同：0
> 
> 时间：2012-10-08T08:13:38.097
> 
> 标签：iphone, objective-c, xcode, instruments

我创建了一个项目并使用 Instrument 来观看实时字节。我做了以下事情：

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
        char *byte = (char *)malloc(10000000);
    } 
```

Instruments 中的活动字节保持在 650KB。

Instrument无法观察malloc方法的分配？

还是苹果不限制这个分配的大小？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:50:56.257

如果您从不使用`malloc`分配的内存，编译器可以完全优化分配。

# c++ - 使用参数化函数 c++

> ID：12777701
> 
> 赞同：3
> 
> 时间：2012-10-08T08:13:48.533
> 
> 标签：c++, function, function-pointers

说我有一个 C++ 函数

```
int foo(int x, int y){
   return x+y ;
} 
```

有没有办法创建这个函数的“参数化”版本？

我的意思是，从 foo() 开始，我想定义将 y 固定为特定值的函数指针，相当于创建函数 foo2() ，如下所示：

```
int foo2(int x){
  return foo(x,2);
} 
```

如果不使用函数指针，则可以替代具有类似行为的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T08:15:39.750

您可以使用修复（或*[curry](http://en.wikipedia.org/wiki/Currying)*）函数参数[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind).

例如，`foo2`可以是

```
auto foo2 = std::bind(foo, std::placeholders::_1, 2); 
```

你可以这样理解：

调用`foo2`类似于调用，`foo`其中第一个参数是调用的第一个参数，`foo2`第二个参数是`2`.

可以使用 lambda 函数来完成：

```
auto foo2 = [] (int x) { return foo(x, 2); } 
```

**[看上面的实际操作](http://ideone.com/d2JPi)**。

最后，如果您不能使用 C++11，那么还有等效的[`boost::bind`](http://www.boost.org/doc/libs/1_51_0/libs/bind/bind.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:19:35.057

您可以使用 std::bind 例如：

```
std::bind2nd (std::ptr_fun (foo), arg2) (arg1) // replace second argument
std::bind1st (std::ptr_fun (foo), arg1) (arg2) // replace/bind first argument 
```

您还可以将其分配给变量：

```
auto fun = std::bind1st (std::ptr_fun (foo), 2);
auto fun = std::bind2nd (std::ptr_fun (foo), 2); 
```

或者如果您的编译器不支持 C++11

```
typedef std::binder1st<std::pointer_to_binary_function<int, int, int>> fun_type;
fun_type fun = std::bind1st (std::ptr_fun (foo), 2); // foo (2, arg2);

typedef std::binder2nd<std::pointer_to_binary_function<int, int, int>> fun_type2;
fun_type2 fun = std::bind2nd (std::ptr_fun (foo), 2); // foo (arg1, 2); 
```

然后调用它

```
fun (arg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:18:41.057

您可以使用重载函数

```
int foo(int x) {
    return foo(x,2);
} 
```

并且您将具有相同的名称...或默认参数解决方案...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T08:19:14.257

函数指针不支持任何类型的东西。事实上，它们*所*支持的只是指向静态函数。永远不要将它们用于回调，`std::function`而是使用它们或模板。

您可以使用`std::bind`或 lambda 来实现此目标。但是你不会得到一个函数指针，只有一个函数对象，你可以通过适当的抽象（模板或`std::function`）使用它。

# ffmpeg - 在ffmpeg解码器中获取丢失的帧号

> ID：12777702
> 
> 赞同：1
> 
> 时间：2012-10-08T08:13:48.707
> 
> 标签：ffmpeg, h.264

当使用 ffmpeg 进行解码时，它会跳过一些帧并且没有解码它们。我想获得丢失的帧号，因为它们在原始文件中。

# java - 如何使用 java 在 Xml 上使用 SELECT 查询

> ID：12777707
> 
> 赞同：0
> 
> 时间：2012-10-08T08:14:13.053
> 
> 标签：java, xml

我有一个 xml 文件，其中包含来自不同表的数据。这些表相互链接。

我想从 xml 访问记录。

我可以在 Xml 文件上编写 SQL 选择查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:32:44.687

不，您不能将 SQL 用于 XML 文件。将数据移动到关系存储或使用分层查询语言。

在这样一个模糊的问题之后，您所能期待的只是一堆随机关键字（如 XQuery、eXist、XPath、Oracle XML Db、MarkLogic、Jaxen）。可能它们都与您手头可能遇到的任何问题无关。

# iphone - 将通过 AUFilePlayer 播放的音频保存到外部文件

> ID：12777714
> 
> 赞同：0
> 
> 时间：2012-10-08T08:14:38.763
> 
> 标签：iphone, ios, ipad, core-audio

在我的 iOS 应用程序中，我正在播放一些短波文件，最后尝试将我播放的所有内容导出到单个音频文件，例如 WAV 或 CAF 文件。我已经设法使用 AUFilePlayer 进行播放。如何将通过 AUFilePlayer 播放的音频保存到 WAV 或 CAF 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T16:18:16.967

您可能需要查看 ExtAudioFile API。这公开了一个名为的函数`ExtAudioFileWrite`，该函数旨在与您的音频单元传递的数据很好地结合起来。ExtAudioFileWrite 的签名如下：

```
OSStatus ExtAudioFileWrite (
   ExtAudioFileRef        inExtAudioFile,
   UInt32                 inNumberFrames,
   const AudioBufferList  *ioData
); 
```

这与音频单元渲染回调非常吻合，如下所示：

```
OSStatus (*AURenderCallback)(
    void * inRefCon,
    AudioUnitRenderActionFlags * ioActionFlags,
    const AudioTimeStamp * inTimeStamp,
    UInt32 inBusNumber,
    UInt32 inNumberFrames,
    AudioBufferList * ioData
); 
```

注意 shared`UInt32 inNumberFrames`和`AudioBufferList * ioData`args。

因此，您的工作流程可能是：

1.  设置一个 ExtAudioFile 用于写入
2.  设置您的 AUGraph 以呈现音频
3.  捕获您的 AudioUnits 正在传递的 AudioBufferLists

3 需要更多关于如何设置您的应用程序的知识，因此我无法真正为您提供太多帮助。如果您希望将音频发送到扬声器并写入文件，您可能需要使用`AUGraphAddRenderNotify`，它会在渲染发生时通知您（并让您挂钩自己的 AURenderCallback 来编写到您的 ExtAudioFile）。

如果您以这种方式做事（即在渲染回调中），请确保使用`ExtAudioFileWriteAsync`这样您就不会阻塞渲染线程。

# java - 如何休眠（）和临时释放监视器？

> ID：12777715
> 
> 赞同：0
> 
> 时间：2012-10-08T08:14:41.687
> 
> 标签：java, multithreading, sleep, wait

我需要睡一段给定的时间并在这段时间内释放监视器。如何做到这一点？可能是等待一些计时器或什么的？

**更新**

我正在实现声音处理，如果时间非常先进，需要延迟流读/写。我认为有两种一般的方法：（1）等待大进步（2）有特殊的监视器和计时器来锁定它，直到时间到来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:21:45.273

您可以使用 wait() 但它只释放一个监视器，而不是监视器。

根据您的问题，它提出了一些设计问题。理想情况下你

*   不应该一次锁定多台显示器。
*   不应该使用等待/通知，而是使用并发库。
*   不应该等待任意时间。
*   不应该暂时释放锁。您可以使用其他模型来避免需要这样做。例如演员模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:24:01.933

我不确定此功能当前是否可用。原因是

1）一旦你的线程释放了锁，你不能保证在过去的时间（比如 x 秒）之后你肯定会得到锁。JVM 本身并不是这样设计的。

2) Wait() 方法被重载以接受以毫秒为单位的时间，但实现仅确保在调用 wait 时立即释放锁。它不保证您会在经过时间后取回锁。

为什么需要这样的功能？我假设您必须做一些不需要的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:30:08.750

方法 sleep() 不需要获取锁，那么你想释放什么？你如何锁定监视器？

# onclick - 使用 LinkBut ton onclick 函数触发锚标记 vb.net

> ID：12777716
> 
> 赞同：2
> 
> 时间：2012-10-08T08:14:46.207
> 
> 标签：onclick, anchor, datalist, linkbutton

如您所知，Fancybox 带有锚标记，我目前正在使用 vb.net 处理数据列表项目 当我单击链接按钮时，我想获取命令参数并将其设置为会话，然后打开 fancybox。由于fancybox对锚标签有自己的限制，它只适用于数据列表的第一项所以我想这样做，当我点击链接按钮时，我会通过会话并触发锚标签后面的代码。这是链接按钮的 button_click 的代码隐藏

```
Protected Sub Button1_Click(sender As Object, e As System.EventArgs)

    'Dim addJobRequest As Button = sender
    ' Dim jobID As String = addJobRequest.CommandArgument
    ' addJobtoRequest(jobID)

    Dim button As LinkButton = sender
    Dim itegerr As Integer = button.CommandArgument
    Session("jobID") = itegerr
    Return
    'From here, I need a code that can trigger anchor tag

End Sub 
```

这是锚标记的代码

```
<a id="fancybox-manual-b" href="javascript:;"> 
```

Ps 我已经尝试过linkbutton href 功能，但它不起作用。

# ios - 使用 IOS6 在 iPad 上呈现 UIActionSheet 时崩溃

> ID：12777717
> 
> 赞同：1
> 
> 时间：2012-10-08T08:14:47.487
> 
> 标签：ios, objective-c, ipad, uikit, uiactionsheet

我在装有 iOS 5 的 iPad 上展示了 UIActionSheet，没有任何问题。现在，在我的 iPad 上安装了 iOS 6 后，应用程序在执行相同操作时会崩溃。我不知道如何解决这个问题，因为我的代码没有改变并且堆栈跟踪很难理解。有人遇到同样的问题吗？

我的初始化代码`UIActionSheet`：

```
UIActionSheet *menu = [[[UIActionSheet alloc] initWithTitle:NSLocalizedString(@"ExportMethod", @"") delegate:self cancelButtonTitle:NSLocalizedString(@"Cancel", @"") destructiveButtonTitle:nil otherButtonTitles:NSLocalizedString(@"ExportMethodMail", @""), NSLocalizedString(@"ExportMethodiTunes", @""), nil] autorelease];
self.actionSheet = menu; 
```

呈现`UIActionSheet`：

```
[self.actionSheet showFromBarButtonItem:self.navigationItem.rightBarButtonItem animated:YES]; 
```

我还尝试了其他可能的调用：

```
[self.actionSheet showInView:self.view];
[self.actionSheet showFromTabBar:self.tabBarController.tabBar];
[self.actionSheet showFromRect:self.view.bounds inView:self.view animated:YES]; 
```

但是，该应用程序总是在此行崩溃并显示以下消息：

```
Thread 6: EXC_BAD_ACCESS (code = 1, adress = 0xcc) 
```

如果我在没有调试器的情况下运行应用程序，我会得到以下堆栈跟踪：

```
 Thread 5 Crashed:
 0   libicucore.A.dylib             0x39620570 ucol_getVersion + 0
 1   TextInput                      0x36aed21a   KB::WordTrie::dictionary_versions_ok(KB::ReadOnlyDataFile const*) const + 62
 2   TextInput                      0x36aecfa4 KB::WordTrie::load(KB::String const&) + 276
 3   TextInput                      0x36ae6490 <redacted> + 12
 4   TextInput                      0x36e50cae <redacted> + 54
 5   TextInput                      0x36e50c4c <redacted> + 40
 6   TextInput                      0x36addf68 TIInputManager::load_dictionaries(KB::String const&, KB::String const&, bool) + 20
 7   TextInput                      0x36aeefbc <redacted> + 216
 8   TextInput                      0x36aeec02 <redacted> + 498
 9   UIKit                          0x356ccf7a <redacted> + 158
 10  UIKit                          0x356cbfce <redacted> + 398
 11  UIKit                          0x356cbbe2 <redacted> + 374
 12  UIKit                          0x356ca4b4 <redacted> + 460
 13  UIKit                          0x356ca1a6 <redacted> + 146
 14  UIKit                          0x3593001c <redacted> + 264
 15  UIKit                          0x3593045c <redacted> + 568
 16  UIKit                          0x3593468c <redacted> + 564
 17  UIKit                          0x35934a94 <redacted> + 136
 18  UIKit                          0x35934e5e <redacted> + 250
 19  EasyTag                        0x0002365e -[GameDetailController exportGameAsCSV] (GameDetailController.m:598) 
```

该`exportGameAsCSV`方法`UIActionSheet`是提出的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T09:03:40.460

谢谢你的回答。问题是我不在 UI 线程中。根据苹果的文档：

```
Important The UIKit classes are generally not thread safe. All drawing-related operations should be performed on your application’s main thread. 
```

下面的代码解决了这个问题：

```
dispatch_async(dispatch_get_main_queue(), ^{

    [self.actionSheet showFromBarButtonItem:self.navigationItem.rightBarButtonItem animated:YES];

 }); 
```

# javascript - 使用 javascript 实例化新的元素类

> ID：12777719
> 
> 赞同：0
> 
> 时间：2012-10-08T08:14:56.163
> 
> 标签：javascript, jquery, css, html

如何使用 javascript 实例化现有的 div 元素？可以说我有：

```
 <div class="container">
    <div class="myclass">TROLL FACE</div>
    </div> 
```

我想使用 javascript 在“容器”类中创建尽可能多的“myclass”元素。我怎样才能做到这一点？

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:19:01.060

您可能需要[.clone](http://api.jquery.com/clone/)方法。

```
var ele = $('.myclass');

for (var i = 0; i < 5; i++) {
    ele.clone().appendTo('.container');
} 
```

***[现场演示。](http://jsfiddle.net/ekTrM/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:16:34.167

```
var container = $('.container');
for (var i = 0; i < 5; i++) {
    container.append('<div class="myclass">TROLL FACE</div>');
} 
```

您可以使用该[`.append()`](http://api.jquery.com/append/)方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T08:18:22.790

有或没有 JQuery：

```
for (var i = 0; i < howMany; ++i) {
    // pure js
    var div = document.createElement('div')
    div.classList.add('myclass')
    somePlace.appendChild(div)

    // jquery
    $("<div></div>").addClass('myclass').appendTo(somePlace)
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T08:24:42.323

试试这个

```
<div class="container">
    <div class="myclass">TROLL FACE</div>
</div>

var $container = $('.container');
var $myclass = $('.container').html();

var mycount ; // Your count

for(var i =0;i< mycount ; i++){
   $container.append($myclass)
} 
```

# jquery - jquery 拖动，忽略覆盖（绝对）定位的元素

> ID：12777721
> 
> 赞同：0
> 
> 时间：2012-10-08T08:15:01.713
> 
> 标签：jquery, events, drag, css-position

请检查这个[FIDDLE](http://jsfiddle.net/Rzbut/7/)

这是html

```
<div id="wrapper">
    <div class="button_area"></div>
    <div class="icon"></div>
<div>​ 
```

该图标位于 button_area 的顶部。

现在我必须拖动 .button_area: $('.button_area').draggable({});

如果我单击该区域并开始拖动它会起作用

但是如果我点击 .icon （位于该区域的顶部）并开始拖动，什么也不会发生......

对于 firefox 和 chrome，我在 stackoverflow 中找到了一个解决方案 gere，非常简单，只需在 .icon 中添加一个简单的 css url 就可以了。

```
.icon{
    pointer-events: none;
} 
```

问题是这不适用于歌剧，也不适用于即。

让它跨浏览器工作的最佳解决方案是什么（我不介意ie6、7和8）......

# asp.net - 如何在asp中更改确认的标题

> ID：12777725
> 
> 赞同：1
> 
> 时间：2012-10-08T08:15:10.203
> 
> 标签：asp.net, title

在删除 asp.net 网页中的项目之前，我添加了一个确认对话框。这是我的编码。

```
OnClientClick="return confirm('Are you sure you want to delete this Contact Record?');" 
```

它给出的默认标题为**“本地主机上的页面：49456 说：”** 我需要更改此对话框的默认标题。我的默认浏览器是 Google chrome。有人可以帮我吗？？？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:26:11.637

像这样提供所需的标题。

```
 OnClientClick="return confirm('Are you sure you want to delete this Contact Record?','Your Title'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T04:09:22.467

注意：调整页面标题时 - 如果 aspx 页面将其设置为“”，则无法在此处更改。因此，在 .aspx 页面中将其设置为空字符串以外的内容；例如：

```
 Page.Title = "Some New Title"; 
```

# android - StateListDrawable 行为奇怪

> ID：12777745
> 
> 赞同：0
> 
> 时间：2012-10-08T08:17:33.820
> 
> 标签：android, statelistdrawable

我有这个 StateListDrawable：

```
GradientDrawable gd = new GradientDrawable(Orientation.TOP_BOTTOM, new int[] {
            firstColor, secondColor });
StateListDrawable sld = new StateListDrawable();
sld.addState(new int[] { android.R.attr.state_pressed },
            new ColorDrawable(onClickColor));
sld.addState(StateSet.WILD_CARD, gd); 
```

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android" >

    <RelativeLayout
        android:id="@+id/actionBar"
        android:layout_width="fill_parent"
        android:layout_height="48dp"
        android:baselineAligned="true" 
        android:descendantFocusability="afterDescendants">

        <ImageButton
            android:id="@+id/actionButtonBack"
            android:layout_width="48dip"
            android:layout_height="48dip"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true" />

        <ImageButton
            android:id="@+id/actionButton3"
            android:layout_width="48dip"
            android:layout_height="48dip"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@+id/actionButton2" />

        <ImageButton
            android:id="@+id/actionButton2"
            android:layout_width="48dip"
            android:layout_height="48dip"
            android:layout_alignParentTop="true"
            android:layout_alignWithParentIfMissing="true"
            android:layout_toLeftOf="@+id/actionButton1" />

        <ProgressBar
            android:id="@+id/actionButton1"
            android:layout_width="48dip"
            android:layout_height="48dip"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_alignWithParentIfMissing="true"
            android:padding="4dip" />

        <TextView
            android:id="@+id/tvTitle"
            android:layout_width="wrap_content"
            android:layout_height="48dip"
            android:layout_alignParentTop="true"
            android:layout_alignWithParentIfMissing="true"
            android:layout_toLeftOf="@+id/actionButton3"
            android:layout_toRightOf="@+id/actionButtonBack"
            android:gravity="center"
            android:textSize="14dip"
            android:textStyle="bold" />
    </RelativeLayout>

</merge> 
```

然后我像这样设置drawable：

```
tv.setClickable(false);
tv.setTextColor(textViewColor);
actionBack.setBackgroundDrawable(sld);
action2.setBackgroundDrawable(sld);
action3.setBackgroundDrawable(sld);
tv.setBackgroundDrawable(sld);
pb.setBackgroundDrawable(sld); 
```

当我单击 actionBack 按钮时，整个布局变成我拥有的颜色，如 onClickButton。

我只是希望它表现得好像我按下了一个常规 xml 定义的可绘制按钮。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:24:00.670

这是因为 'tv' 的 layout_width (TextView with id android:id="@+id/tvTitle") 是 'wrap_content' 所以当一个颜色被应用到这个视图时它需要整个边界你要么需要硬编码TextView 的 layout_width 或将颜色应用为具有硬编码宽度的 ShapeDrawable。希望这能解决您的问题。

# gwt - ListGrid 列自动适应布局

> ID：12777747
> 
> 赞同：0
> 
> 时间：2012-10-08T08:17:37.847
> 
> 标签：gwt, smartgwt

```
ListGrid listGrid = new ListGrid();

listGrid.setWidth100();

listGrid.setFields(f1, f2);
vlayout.addMember(listGrid);

listGrid.setAutoFitFieldsFillViewport(false);
listGrid.setAutoFitFieldWidths(false);
listGrid.setCanAutoFitFields(false);

ListGridField[] listGridFields = listGrid.getFields();
for (ListGridField listGridField : listGridFields) {
  listGridField.setAutoFitWidth(true);
} 
```

我有这条线，但是当我调整放置 listGrid 的窗口大小时，这些字段不会调整大小并适合新的宽度。

有人可以帮我使这个 listGrid 的字段宽度适合窗口吗？

然后，如果我把这个：

```
ListGridField[] listGridFields = listGrid.getFields();
for (ListGridField listGridField : listGridFields) {
  listGridField.setWidth("100%");
} 
```

当我第一次调整窗口大小时，它解决了这个问题。但是调整一个字段的大小会在最后一个字段和 listGrid 的边框之间产生一个间隙。

有没有办法解决这个问题？

**摘要：**
有没有办法让 listGrid 通过调整窗口大小自动调整大小？
有没有办法让 listGrid 的字段总是适合 listGrid 的大小，而 listGrid 的大小总是适合其父级的宽度？

是否有可能得到这个结果：http: [//jsfiddle.net/lnplnp/kJLGd/](http://jsfiddle.net/lnplnp/kJLGd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:23:29.697

```
listGrid.setWidth("100%"); 
```

你试过这个吗？如果它没有填满窗口检查父约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:29:58.880

最后我试过了`listGridField.setWidth("100%");`

所以答案是：

```
ListGridField[] listGridFields = listGrid.getFields();
for (ListGridField listGridField : listGridFields) {
  listGridField.setWidth("100%");
}
listGrid.getField("FIELDNAME").setWidth(30); 
```

为至少一个字段分配固定宽度，响应我的期望。

*它在大多数情况下都有效，但有时这种方法无法正常工作。我无法描述确切的情况。如果我发现它不起作用的原因，我将编辑此响应。*

# forms - HTML 要求表单中的只读输入

> ID：12777751
> 
> 赞同：53
> 
> 时间：2012-10-08T08:17:46.470
> 
> 标签：forms, html, google-chrome, readonly, required-field

我正在制作表格。在一个`input`标签上是一个`OnClick`事件处理程序，它打开一个弹出窗口，您可以在其中选择一些东西，然后它会自动填充`input`标签。

该输入标签也是`readonly`，因此只会输入正确的数据。

这是标签的`input`代码：

```
<input type="text" name="formAfterRederict" id="formAfterRederict" size="50" required readonly="readonly" OnClick="choose_le_page();"  /> 
```

但是该`required`属性在 Chrome 中不起作用。但该字段是必需的。

有人知道我怎样才能让它工作吗？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2014-09-05T22:18:01.053

我有和你一样的要求，我想出了一个简单的方法来做到这一点。如果您希望“只读”字段也为“必需”（基本 HTML 不支持），并且您懒得添加自定义验证，那么只需使用 jQuery 使该字段只读：

**改进**

在评论中形成建议

```
<input type="text" class="readonly" autocomplete="off" required />

<script>
    $(".readonly").on('keydown paste focus mousedown', function(e){
        if(e.keyCode != 9) // ignore tab
            e.preventDefault();
    });
</script> 
```

致谢：@Ed Bayiates、@Anton Shchyrov、@appel、@Edhrendal、@Peter Lenjo

**原来的**

```
<input type="text" class="readonly" required />

<script>
    $(".readonly").keydown(function(e){
        e.preventDefault();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-08T08:24:27.240

`readonly`字段不能具有该`required`属性，因为通常假定它们已经具有某些值。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-12-29T10:01:13.687

删除`readonly`和使用功能

```
<input type="text" name="name" id="id" required onkeypress="return false;" /> 
```

它可以按您的意愿工作。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-10-08T08:28:26.780

这是设计使然。根据[官方 HTML5 标准草案](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#the-readonly-attribute)，“如果在`readonly`输入元素上指定了属性，则该元素将被[禁止进行约束验证](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#barred-from-constraint-validation)。” （例如，它的值不会被检查。）

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2019-02-01T02:01:58.343

`Required`并且`readonly`不要一起工作。

但`readonly`可以用以下结构代替：

```
 <input     type="text"
                onkeydown="return false;"
                style="caret-color: transparent !important;"                   
                required> 
```

1)`onkeydown`将停止对数据的操作

2)`style="caret-color: transparent !important;"`将隐藏光标。

3）`style="pointer-events: none;"`如果您的输入没有任何事件，您可以添加，但这不是我的情况，因为我使用了`Month Picker`. 我`Month picker`在点击时显示一个对话框。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-02-15T18:50:38.050

是的，有解决此问题的方法。我从[https://codepen.io/fxm90/pen/zGogwV](https://codepen.io/fxm90/pen/zGogwV)网站找到它。

解决方法如下。

**HTML 文件**

```
<form>
  <input type="text" value="" required data-readonly />
  <input type="submit" value="Submit" />
</form> 
```

**CSS 文件**

```
input[data-readonly] {
  pointer-events: none;
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-01-17T12:45:34.380

如果有人只想从 html 中执行此操作，这对我有用。

```
<input type="text" onkeydown="event.preventDefault()" required /> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-13T17:42:19.227

我认为这应该有所帮助。

```
<form onSubmit="return checkIfInputHasVal()">
    <input type="text" name="formAfterRederict" id="formAfterRederict" size="50" required readonly="readonly" OnClick="choose_le_page();"  />
</form>

<script>
     function checkIfInputHasVal(){
        if($("#formAfterRederict").val==""){
             alert("formAfterRederict should have a value");
             return false;
        }
     }
</script> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-14T12:50:25.840

您可以为您的模板执行此操作：

`<input required onfocus="unselect($event)" class="disabled">`

这对于你的 js：

```
unselect(event){
    event.preventDefault();
    event.currentTarget.blur();
} 
```

对于用户，输入将同时被禁用和需要，前提是您有一个用于禁用输入的 css 类。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-04-18T21:34:33.177

基于答案@KanakSinghal，但没有阻止所有键和阻止`cut`事件

```
$('.readonly').keydown(function(e) {
  if (e.keyCode === 8 || e.keyCode === 46)  // Backspace & del
    e.preventDefault();
}).on('keypress paste cut', function(e) {
  e.preventDefault();
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input type="text" class="readonly" value="test" />
```

PS有人知道`cut`事件转化为`copy`事件吗？

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-04T01:32:32.920

**required 和 readonly 不能一起工作**。

**尽管**您可以像这样进行两个输入：

```
<input id="One" readonly />
<input id="Two" required style="display: none" /> //invisible 
```

并将值更改`Two`为 input 中的值`One`。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-11-12T19:33:48.123

我有同样的问题，最后我使用了这个解决方案（使用 jQuery）：

```
form.find(':input[required][readonly]').filter(function(){ return this.value === '';}) 
```

除了 form.checkValidity() 之外，我还以某种方式测试了上述搜索的长度：

```
let fcnt = $(form)
    .find(':input[required][readonly]')
    .filter(function() { return this.value === '';})
    .length;

if (form.checkValidity() && !fcnt) {
   form.submit();
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-08-03T15:51:17.000

```
 function validateForm() {
    var x = document.forms["myForm"]["test2"].value;
    if (x == "") {
      alert("Name missing!!");
      return false;
    }
  }
```

```
 <form class="form-horizontal" onsubmit="return validateForm()" name="myForm" action="" method="POST">
   <input type="text"  name="test1">
    <input type="text" disabled name="test2">
    <button type="submit">Submit</button>
</form>
```

# html - 更改列表项的外观，使它们看起来像表格一样的列

> ID：12777752
> 
> 赞同：-4
> 
> 时间：2012-10-08T08:17:49.517
> 
> 标签：html, css, html-lists

我有一个 li 标签列表，每个项目都有一个标题和描述。

```
<ul>
  <li>$title[0] $description[0]</li>
  <li>$title[1] $description[1]</li>
  ...
  <li>$title[n] $description[n]</li>
</ul> 
```

我希望它们对齐，以便它们看起来像表格中的列，如下例所示：

```
$title[0]    $description[0]
$title[1]    $description[1]
...
$title[n]    $description[n] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:28:09.670

~~我从您的问题中假设您有一个 li 元素列表，并且对于每个您想要输出的 textn 元素，其中 n 是列表中项目的从一开始的索引。如果是这样怎么...~~

 ~~```
$("li").each(function(i) { 
  $(this).text("text"+(i+1)); 
}); 
```~~ 

**编辑**针对您更新的问题，您可以使用类似...

```
$("li").each(function() { 
  // Use regular expressions to extract the numerical index from the text... 
  // This appears to be what you intend from your question
  var index = $(this).text().replace(/title(\d+)/, "$1");
  // Append an element containing the description to the li element
  $(this).append("<span class=\"col2\">description-" + index + "</span>"); 
}); 
```

然后使用 CSS 来定位，比如......

```
/* Used to stop float overflowing the list item */
li { overflow: hidden; }
/* Float the col2 element to the right with a consistent width so
 * all col2 elements appear aligned */
li .col2 { float: right; width: 25%; } 
```

 ~~**编辑**忽略上面的 JavaScript，我认为你只需要 HTML 和 CSS。要使列表显示为表格...

```
<li>
    <span class="col1">Title 1</span>
    <span class="col2">Description 1</span>
</li> 
```

然后使用浮动来定位项目，它的工作方式与表格的工作方式不同，表格自动划分空间的方式，但它可能会产生您需要的效果。上面的 CSS 示例是一种方法，您可以使用相反的浮动...

```
li { overflow: hidden; /* Row level styling */ }
li .col1 { float: left; width: 75%; }
li .col2 { float: right; width: 25%; } 
```

或者您可以将浮动堆叠在一起

```
li { overflow: hidden; /* Row level styling */ }
li .col1 { float: left; width: 25%; }
li .col2 { float: left; width: 50%; }
li .col3 { float: left; width: 25%; } 
```

我做了一个小提琴...... [http://jsfiddle.net/g8Xkp/](http://jsfiddle.net/g8Xkp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:21:13.107

您的意思是要删除列表的列表样式吗？然后像这样使用CSS：

```
ul {
   list-style: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:23:25.350

这将允许您修改`LI`列表中每个元素的文本。如果您有多个列表，则应调整选择器以定位特定列表，因为目前这将定位`LI`页面中的所有元素。（即`$('li.menu')`）

```
$('li').each(function(index, element){ 
   //Amend each element here
   $(element).text('new text');
}); 
```~~

# php - 从 MongoDB 切换到 Cassandra？

> ID：12777754
> 
> 赞同：1
> 
> 时间：2012-10-08T08:18:01.153
> 
> 标签：php, mongodb, cassandra

我目前正在研究 PHP 中的“简单”社交网络样式。我称它为“简单”，因为它不是经典的示例类型网站；我只是尽量保持简单；

所以我*基本上*在 MongoDB 上并且有两个集合结构：用户表，类似于

```
{ user:'test', pass:'123456', name:'foobar', info:'hello' } 
```

和一个帖子表：

```
{ user:'test', message:'this is a test post' } 
```

我简化了这一切，使第一眼看起来更易读。

如前所述，我目前正在使用 MongoDB，运行良好，但是，我只是阅读了一些有关 Cassandra 的信息，并且想知道它是否是一个更好的选择，因为它具有更简单的扩展功能（我基本上可以自己做，而不必依赖MongoLab 或 MongoHQ）；

但我不确定这是否是一个好主意，因为我正在使用动态查询。

不考虑消息传递和关系，我为此使用 Redis；切换只会与用户注册、搜索和他们的帖子有关。

如果我应该继续使用 Mongo，或者我是否可以*考虑*改变，有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:37:24.117

您最好通过分叉您当前的代码库并克隆环境来决定这一点。

然后从替代数据存储的实现开始。

您已经命名了要研究的某些点，因此请一个接一个地处理这些点。

然后，您将体验您概述/预期更改的方式是否真的有效，以及随之而来的价格。

保留一份工作日志，在其中写下您所做的步骤以及您的经验。

# java - 如何获取字体的行高，例如在 JTextArea 中？

> ID：12777758
> 
> 赞同：3
> 
> 时间：2012-10-08T08:18:25.567
> 
> 标签：java, swing, fonts, jtextarea, fontmetrics

我需要从一条线的基线到基线到下一个文本行的距离，与 JTextArea 中的布局相同。为此，我只有一种具有指定字体大小的字体。

我的问题是，在字体上，我只能得到 LineMetrics 或 FontMetrics，并且它们都有不同大小的线条（getAscent/getHeight/getDescent），具体取决于当前文本 - 例如，如果有 letter `f`，则上升更大，并且如果有`g`，我有血统。

有没有办法获得“全局”字体高度属性？所以我将能够正确地在 Graphics2D 上绘制文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:38:31.907

从 JavaDoc 为[`FontMetrics.getHeight()`](http://docs.oracle.com/javase/6/docs/api/java/awt/FontMetrics.html#getHeight%28%29)：

> 获取此字体中一行文本的标准高度。这是相邻文本行的基线之间的距离。它是领先 + 上升 + 下降的总和。由于四舍五入，这可能与 getAscent() + getDescent() + getLeading() 不同。无法保证以该距离间隔的文本行是不相交的；如果某些字符超出标准上升或标准下降度量，则此类行可能会重叠。

因此，如果您的字体实现正确，这应该是您应该放置在两行文本之间的距离。

# asp.net - 关闭 .net 服务中的所有功能

> ID：12777762
> 
> 赞同：2
> 
> 时间：2012-10-08T08:18:39.727
> 
> 标签：asp.net, web-services

我有 ASP.NET Web 服务项目。如果当前时间在 00:00 和 01:00 之间，我必须“关闭”（返回 void 或 null）此服务中的所有方法。最好的方法是什么？可能是 global.asax 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:32:52.127

您可以在**Global.asax**上的**Application_BeginRequest**上执行此操作，只需检查是否是 Web 服务，然后如果不允许，您只需削减它的时间。

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
   string cTheFile = HttpContext.Current.Request.Path;
   string sExtentionOfThisFile = System.IO.Path.GetExtension(cTheFile);
   // here you can check what file you wish to cut, ether by file, ether by extention
   if (sExtentionOfThisFile.Equals(".asmx", StringComparison.InvariantCultureIgnoreCase))
   {
     // and here is the time limit.
     if(DateTime.UtcNow.Hour >= 0 && DateTime.UtcNow.Hour <= 1)
     {
        HttpContext.Current.Response.TrySkipIisCustomErrors = true;
        HttpContext.Current.Response.StatusCode = 403;
        HttpContext.Current.Response.End();
        return ;    
    }    
  }
} 
```

# node.js - node.js setInterval 不起作用

> ID：12777773
> 
> 赞同：4
> 
> 时间：2012-10-08T08:19:20.640
> 
> 标签：node.js, socket.io, setinterval

使用 node.js，我试图`server_time`每秒向所有客户端发送电流。因此，我想用它`setInterval()`来向所有客户端发出事件并发送时间，但它不起作用。我是`setInterval`在正确的地方定义了函数还是错过了其他东西？

```
var http = require("http");
var socketIO = require('socket.io');
var connect = require('connect');

//keep track of every connected client
var clients = {};

//create Server 
var httpServer = connect.createServer(
    connect.static(__dirname)
).listen(8888);

//socket
var io = socketIO.listen(httpServer);
io.sockets.on('connection', function (socket) {

    //add current client id to array
    clients[socket.id] = socket;
    socket.on('close', function() {
        delete clients[socket.fd]; // remove the client.
    });

    //send news on connection to client
    socket.emit('news', { hello: 'world' }); 

    //this one works fine!
    //send server time on connection to client
    socket.emit("server_time", { time: new Date().toString() });

});

//this doesn't work!
// Write the time to all clients every second.
setInterval(function() { 
    var i, sock;
    for (i in clients) {
        sock = clients[i];
        if (sock.writable) { // in case it closed while we are iterating.
            sock.emit("server_time", {
                console.log("server_time sended");
                time: new Date().toString()

            });
        }
    }
}, 1000);       //every second 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:24:52.627

我可以建议一个解决问题的解决方法/改进。将客户添加到[聊天室](https://github.com/LearnBoost/socket.io/wiki/Rooms)。在某处：

```
io.sockets.on('connection', function (socket) { 
```

添加一个

```
socket.join('timer'); 
```

那么 setIntervall 将是

```
setInterval(function() { 
    io.sockets.in('timer').emit("server_time", { time: new Date().toString() })
}, 1000); 
```

希望这对你有用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:02:24.953

问题是以下功能：

```
if (sock.writable) { // in case it closed while we are iterating.
  sock.emit("server_time", {
    // console.log("server_time sended"); // get rid of this line -> invalid code
    time: new Date().toString()
  });
} 
```

`sock.writable`是`undefined`，因此该`emit`事件永远不会发送。将属性设置为`true`on connection 和`false`on close。

# iphone - 使用 UILocalNotification 时如何更改徽章默认颜色？

> ID：12777779
> 
> 赞同：0
> 
> 时间：2012-10-08T08:19:52.870
> 
> 标签：iphone, ipad, ios5

> **可能重复：**
> [如何将 IOS 徽章通知颜色从默认红色更改为其他颜色？](https://stackoverflow.com/questions/11468748/how-to-change-ios-badge-notification-colour-from-default-red-to-other-colours)

我正在开发 iOS 应用程序，我在其中使用徽章进行用户通知，但我无法更改徽章默认颜色，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:25:41.437

该组件将允许您在应用程序的任何地方放置一个类似 iOS 徽章的东西。所以它现在不仅限于 UITabBar 或应用程序图标。

您可以更改其颜色、大小、设置是否有阴影、闪烁、更改其字体颜色和大小等。

查看此链接可能对您有所帮助....

[http://www.binpress.com/app/badges-view-for-ios/338](http://www.binpress.com/app/badges-view-for-ios/338)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:23:58.063

如果您要询问主屏幕上应用程序图标上带有数字的徽章，那么您就不走运了。红色是你得到的。IIRC 同样适用于标签栏徽章。

# coffeescript - Coffeescript 中的 Ember 计算属性

> ID：12777782
> 
> 赞同：17
> 
> 时间：2012-10-08T08:20:12.913
> 
> 标签：coffeescript, ember.js

我想在 Coffeescript 中实现以下 Javascript 代码

```
App.ItemView = Ember.View.extend({
    classNameBindings: ['itemId'],
    itemId: function() {
        console.log(this.get('content'));
        return "item-%@".fmt(this.get('content.id'));
    }.property('content.id'),
    templateName: 'item'    
}); 
```

这是我到目前为止在咖啡脚本中的内容：

```
App.ItemView = Ember.View.extend(
    classNameBindings: ['itemId']

    itemId: ->
        console.log this.get('content')
        contentId = this.get('content.id')
        "item-#{contentId}");
    .property('content.id')

    templateName: 'item'    
) 
```

我得到：

```
Error: Parse error on line 11: Unexpected '.' 
```

问题似乎与`.property('content.id')` . 我不知道这如何转化为 Coffeescript。如何在 Coffeescript 中正确实现此视图？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-08T08:25:21.370

已经很久了，但我认为应该这样写：

```
App.ItemView = Ember.View.extend(
  classNameBindings: ['itemId']

  itemId: (->
    console.log this.get('content')
    contentId = this.get('content.id')
    "item-#{contentId}");
  ).property('content.id')

  templateName: 'item'    
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T18:21:27.607

```
itemId: (->
  content = @get 'content'
  if content
    return 'item-%@'.fmt(content.get 'id')
  null
).property('content.id') 
```

您必须保护计算属性免受可能尚未定义的值的影响。也就是说，如果内容对象上已经有一个 id 属性，那么您的代码就可以了。如果内容未定义，那么您将无法查找其 ID 属性，并且您可能会看到投诉。

你也可以使用

```
itemId: Ember.computed(->
  ..
).property('content.id') 
```

以及观察者的类似模式。事实上，观察者也可以在没有条件的情况下完成同样的事情：

```
itemId: null

contentIdChanged: (->
  @set 'itemId', 'item-%@'.fmt(@get 'content.id')
).observes('content.id') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-03T11:57:16.027

我喜欢用`Ember.computed`.

```
itemId: Ember.computed 'firstName', 'lastName', ->
  "#{@get('firstName')} #{@get('lastName')}" 
```

# jquery - Telerik 网格的 Jquery 未定义

> ID：12777783
> 
> 赞同：0
> 
> 时间：2012-10-08T08:20:13.480
> 
> 标签：jquery, for-loop, telerik, grid, undefined

我收到用于 Telerik 网格实现的 javascript 错误“JQuery undefined”，我不明白同样的原因。我确实包含了所有可能的 JQuery 文件，但仍然出现 Javascript 错误。

下面是我实现的示例代码。

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.js")" type="text/javascript"></script>

@(Html.Telerik().Grid(Model.Employee)
                                                    .HtmlAttributes(new { style = "width:100%;" })
                                                .Name("Employee")
                                                .DataKeys(keys =>
                                                {
                                                    keys.Add(m => Id);

                                                })

                                                .Columns(columns =>
                                                {

                                                    columns.Bound(p => p.Name).Title("Name")
                                                        .HeaderHtmlAttributes(new { width = "110px", style = "text-align:center;font-weight:bold;height:auto" })
                                                    .HtmlAttributes(new { width = "110px", style = "text-align:left;height:auto" });
                                                    columns.Bound(p => p.ReportedStatus).ClientTemplate("<#= ReportedStatus(data) #>").Title("Reported")
                                                         .HeaderHtmlAttributes(new { width = "130px", style = "text-align:center;font-weight:bold;height:auto" })
                                                    .HtmlAttributes(new { width = "130px", style = "text-align:center;height:auto" });
                                                    columns.Bound(p => p.status).Title("status").ClientTemplate("<#=status(data) #>")
                                                        .HeaderHtmlAttributes(new { width = "130px", style = "text-align:center;font-weight:bold;height:auto" })
                                                    .HtmlAttributes(new { width = "130px", style = "text-align:center;height:auto" });
                                                    columns.Bound(p => p.Hrs).Title("Hrs")
                                                        .HeaderHtmlAttributes(new { width = "150px", style = "text-align:center;font-weight:bold;height:auto" })
                                                    .HtmlAttributes(new { width = "150px", style = "text-align:center;height:auto" });
                                                    columns.Bound(l => l.Location).ClientTemplate("<#= Location(data) #>").Title("Location")
                                                         .HeaderHtmlAttributes(new { width = "200px", style = "text-align:center;font-weight:bold;height:auto" })
                                                    .HtmlAttributes(new { width = "200px", style = "text-align:center;height:auto" });
                                                    columns.Bound(l => l.Role).ClientTemplate("<#= Role(data) #>").Title("Role")
                                                        .HeaderHtmlAttributes(new { width = "150px", style = "text-align:center;font-weight:bold;height:auto" })
                                                    .HtmlAttributes(new { width = "150px", style = "text-align:center;height:auto" });

                                                }).Footer(false)
                                                                          )
<script type="text/javascript" src="@Url.Content("~/Scripts/telerik.common.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/telerik.textbox.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/telerik.grid.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.validate.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/telerik.draganddrop.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/telerik.window.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/telerik.grid.editing.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/telerik.upload.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/telerik.menu.js")"></script>

@(Html.Telerik().ScriptRegistrar()
                 .jQuery(false)
                 .DefaultGroup(group => group
                 .Add("telerik.examples.min.js")
                 .Add("telerik.grid.js")
                 .Compress(false)
                 .Combined(true))
                 .OnDocumentReady(
                 @<text> prettyPrint();
</text>)
) 
```

请让我知道我在这里为这个 JQuery 错误做错了什么。

提前致谢， Maanoj

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:26:06.413

看起来您没有正确包含文件。如果你的字符串中有双引号，解析器会认为它是字符串的结尾，而不是正确地解释字符串。您需要转义它们或在内部使用**单引号**。.

代替

```
src="@Url.Content("~/Scripts/jquery-1.7.1.js")" 
```

尝试

```
src="@Url.Content('~/Scripts/jquery-1.7.1.js')"

         OR
src="@Url.Content(\"~/Scripts/jquery-1.7.1.js\")" 
```

您也可以通过转义双引号来实现相同的目的，因为解析器可能认为它是介于 " " 之间的字符串的结尾

# perl - Perl：Log4Perl 调用 log4perl 以防出现未处理的错误

> ID：12777789
> 
> 赞同：2
> 
> 时间：2012-10-08T08:20:39.173
> 
> 标签：perl, fatal-error, log4perl

log4Perl 中是否有一种方法可以强制我的程序即使在 eval 子句之外也可以记录致命错误？我也想在任何未处理的程序终止的情况下调用 log4perl。最好我想在我的标准模块中添加相关的错误处理程序，该模块加载了我所有的 Perl 程序。
Perl 版本目前是 5.8，但我很快就会升级。
这是给定答案的测试代码。我在屏幕上既没有看到 DIE，也没有看到 die.txt 被创建。

```
 use Log::Log4perl qw(get_logger);
$a->test();
$SIG{__DIE__} = sub {
 warn "DIE";
 open DIE,">die.txt";
 print DIE "died\n";
 close DIE;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T10:22:47.080

看起来像常见问题解答 [如何确保我的应用程序在意外死亡时记录一条消息？](http://search.cpan.org/perldoc/Log%3a%3aLog4perl%3a%3aFAQ#How_can_I_make_sure_my_application_logs_a_message_when_it_dies_unexpectedly?)

```
use Log::Log4perl qw(get_logger);

$SIG{__DIE__} = sub {
    if($^S) {
        # We're in an eval {} and don't want log
        # this message but catch it later
        return;
    }
    local $Log::Log4perl::caller_depth =
          $Log::Log4perl::caller_depth + 1;
    my $logger = get_logger("");
    $logger->fatal(@_);
    die @_; # Now terminate really
}; 
```

有关更多信息，请参见[perlipc](http://perldoc.perl.org/perlipc.html)

# iphone - iPhone 如何像在相机应用程序中一样获得照片拍摄效果？

> ID：12777793
> 
> 赞同：0
> 
> 时间：2012-10-08T08:20:51.000
> 
> 标签：iphone, camera, core-animation

我说的是当用户按下按钮拍照时的效果，它会缩小并移动到工具栏？这一般是如何实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:30:17.333

所以收缩动画是由

```
 [UIView beginAnimations:@"animationShrink" context:NULL];
    [UIView setAnimationDuration:kSlideInAnimationDuration];

    flipFlopContainer.transform = CGAffineTransformMakeScale(0.01, 0.01);
    [UIView setAnimationDelegate:self];
    [UIView    setAnimationDidStopSelector:@selector(shrinkAnimationFinished:)];
    [UIView commitAnimations]; 
```

在 shrinkAnimationFinished 方法中的此动画之后，您需要定义要遵循的路径并更改视图的位置，以适应该路径。

有关该动画，请参见以下线程

[使用核心动画 (CAKeyFrameAnimation) 调整和移动 UIView](https://stackoverflow.com/questions/1887156/resize-and-move-a-uiview-with-core-animation-cakeyframeanimation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:34:14.600

您可以通过缩放（应用变换）和移动（动画位置）图像来创建它。

[我在这篇博](http://ronnqvist.tumblr.com/post/23234805389/unobtrusive-hints-of-joy)文中写了一个类似的动画（iPhone 上 Safari 的后台打开动画）。并非所有代码都是必需的，但其中的某些部分对您尝试制作的动画很有用。

* * *

你应该

*   计算比例因子使图像大小合适
*   计算您想要为图像设置动画的路径。
*   使用计算的比例因子为比例设置动画
*   沿路径设置位置动画（使用 CAKeyframeAnimation）

由于您同时制作两个动画，因此您可以从使用 CAAnimationGroup 中受益。

由于您正在动画到工具栏，这可能是视图层次结构的另一部分，而不是图像所在的位置，您可能需要使用类似的方法

```
- (CGRect)convertRect:(CGRect)rect toView:(UIView *)view 
```

和

```
- (CGPoint)convertPoint:(CGPoint)point toView:(UIView *)view 
```

转换不同视图之间的坐标。

# dom - 在Javascript中为DOM对象列表中的每个项目添加onclick属性

> ID：12777794
> 
> 赞同：1
> 
> 时间：2012-10-08T08:20:51.920
> 
> 标签：dom, javascript-events

我正在尝试为我的日常网站功能而远离 jQuery，并且我在 onclick 事件上遇到了一些麻烦。我想组合一个像 jQuery's 这样的函数`.click()`，但简单地使用`document.getElementsByTagName`和添加一个 func onclick 是行不通的。

那么问题是如何添加一个函数来触发 onclick 到通过查询返回的列表对象中的所有元素`document.getElementsByTagName('h4')`

干杯

编辑：以防万一有人发现这个并想要一些代码，这就是我所做的：

```
var headings = document.getElementsByTagName('h4')

for (var g in headings) {
    headings[g].onclick = function() {
        //code
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:24:50.250

您需要遍历列表并将事件传递给每个项目。我认为没有更简单的方法可以做到这一点，希望您需要一个像 jQuery 这样的库或者您编写自己的 eventManager ...

# android - 固定位置在android浏览器中不起作用

> ID：12777795
> 
> 赞同：0
> 
> 时间：2012-10-08T08:20:54.383
> 
> 标签：android

现在固定位置在我的移动 android 浏览器中不起作用可以对这个问题有任何帮助，[请参阅我的链接](http://www.creativecorp.in/tcg/index.html)

请为我在 Chrome 中使用 Ripple 的不同设备提供在线移动测试的良好解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:26:19.827

您要在哪个版本的 Android 浏览器中修复该位置？并非在每个版本中都支持固定位置。你可以看看[这里](http://caniuse.com/#search=fixed)。

# message - 如何防止消息在消息子文件中消失？

> ID：12777807
> 
> 赞同：0
> 
> 时间：2012-10-08T08:22:09.300
> 
> 标签：message, ibm-midrange

我有一个 RPG 程序 A 和一个 CL 程序 B。A 接受来自显示文件的一些用户输入并将其用作 B 的入口参数。b 处理入口参数，如果有错误消息将被接收并重新发送B 以便使用消息子文件将其显示在显示文件的底部。这种消息显示机制起作用但并不完全，因为发送的消息只能在很短的时间内被浏览，然后它就从显示文件中消失了。这个问题的原因是什么？如何阻止消息消失？

这是程序 B 中的示例代码：

```
DCLF FILE(ECSWIFP1)
MONMSG MSGID(CPF0000) EXEC(GOTO CMDLBL(ERROR))

OVRDBF FILE(ECSWIFP1) TOFILE(ECSWIFP1) SHARE(*YES)
OPNQRYF FILE(ECSWIFP1) QRYSLT(&QRYSTR)
RCVF 
CLOF FILE(ECSWIFP1)
DLTOVR FILE(ECSWIFP1)

RTVDTAARA DTAARA(&E4LIBN/&E4OBJN) RTNVAR(&DTARVAL)
GOTO CMDLBL(END)

ERROR:
CLOF FILE(ECSWIFP1)
MONMSG MSGID(CPF4520)
DLTOVR FILE(ECSWIFP1)
MONMSG MSGID(CPF9841)

MSG:
RCVMSG MSGTYPE(*ANY) MSGDTA(&MSGDTA) MSGID(&MSGID)
IF COMD(%SST(&MSGID 1 3)) *NE 'CPF') THEN(GOTO CMDLBL(MSG))
SNDPGMMSG MSGID(&MSGID) MSGF(QCPFMSG) MSGDTA(&MSGDTA) MSGTYPE(*STATUS) TOPGMQ(*EXT)

END:
ENDPGM 
```

以下是用于显示消息的显示文件 DDS 的一部分：

```
 A          R MSG                       SFL
 A                                      SFLMSGRCD(24)
 A            S0MSGK                    SFLMSGKEY
 A            S0PGMQ                    SFLPGMQ
 A          R MSGCTL                    SFLCTL(MSG)
 A                                      OVERLAY
 A                                      SFLDSP
 A                                      SFLINZ
 A                                      SFLSIZ(0005)
 A                                      SFLPAG(0001)
 A            S0PGMQ                    SFLPGMQ 
```

假设根据查询字符串没有匹配的记录，那么RCVF导致CPF0864被发送出去，这个消息可以毫无问题地显示在屏幕上。

但是如果找到了一条记录，并且在RTVDTAARA命令中使用了字段值，而这个命令的失败（例如data area not found）会导致我上面描述的问题，就是接收到的消息只能在一个短时间然后消失。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:23:22.153

典型的顺序是

```
write msgctl
write bottom
exfmt main 
```

确保在消息子文件之后显示的任何记录格式都指定了 OVERLAY。如果没有 OVERLAY，'bottom' 将擦除消息子文件，而 'main' 将擦除 'bottom'。

[应用显示编程](http://publib.boulder.ibm.com/infocenter/iseries/v6r1m0/topic/rzakc/sc415715.pdf)是一个古老但有用的参考。

编辑在看到 CL 和 DDS 之后。

我相信这个问题是由于`SNDPGMMSG MSGTYPE(*STATUS)`. 状态消息是特殊的，通常不会进入子文件消息队列。信息中心的[消息](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=/rbam6/wmsgs.htm)部分包含有关不同消息类型的更多信息。

在 CL PGMB 中，将 SNDPMMSG 更改为`MSGTYPE(*DIAG) TOPGMQ(*PRV)`. 这会将异常消息作为诊断消息抛出给调用者（给 PGMA）。仔细检查您在需要它的 DDS 中是否有 OVERLAY - 我上面的示例将是底部和主要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-08T20:25:53.643

该序列起作用并在屏幕上显示消息子文件的消息

典型的顺序是

```
write msgctl
write bottom
exfmt main 
```

确保在消息子文件之后显示的任何记录格式都指定了 OVERLAY。如果没有 OVERLAY，'bottom' 将擦除消息子文件，而 'main' 将擦除 'bottom'。C

# javascript - Chrome 扩展程序中的消息传递问题

> ID：12777810
> 
> 赞同：0
> 
> 时间：2012-10-08T08:22:27.657
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试将消息从我的内容脚本传递到我的背景页面。执行内容脚本时会出现此错误：

```
Uncaught TypeError: Cannot call method 'sendRequest' of undefined 
```

内容脚本：

```
function injectFunction(func, exec) {
    var script = document.createElement("script");
    script.textContent = "-" + func + (exec ? "()" : "");
    document.body.appendChild(script);
}

function login() {

    chrome.extension.sendMessage({greeting: "hello"}, function(response) {
        console.log(response.farewell);
    });

    var d = window.mainFrame.document;
    d.getElementsByName("email")[0].value = "I need the response data here";
    d.getElementsByName("passwort")[0].value = "Here too.";
    d.forms["login"].submit();
}

injectFunction(login, true); 
```

背景：

```
 chrome.extension.onMessage.addListener(
 function(request, sender, sendResponse) {
      if (request.greeting == "hello")
      sendResponse({farewell: "goodbye"});
 }); 
```

清单.json：

```
{
    "name": "Sephir Auto-Login",
    "version": "1.0",
    "manifest_version": 2,
    "description": "Contact x@x.com for support or further information.",
    "options_page": "options.html",
    "icons":{
        "128":"icon.png"
    },
    "background": {
        "scripts": ["eventPage.js"]
    },
    "content_scripts": [
        {
          "matches": ["https://somewebsite/*"],
          "js": ["login.js"]
        }, 
        {
          "matches": ["somewebsite/*"],
          "js": ["changePicture.js"]
        }
    ],
     "permissions": [
        "storage",
        "http://*/*",
        "https://*/*",
        "tabs"
    ]
} 
```

这些是谷歌文档中的示例，因此它们*应该可以*工作。

有什么帮助吗？我完全迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:42:23.883

问题是您对脚本执行环境的误解造成的。阅读[Chrome 扩展代码 vs 内容脚本 vs 注入脚本](https://stackoverflow.com/questions/9915311/chrome-extension-code-vs-content-scripts-vs-injected-scripts/9916089#9916089)以获取更多信息。准确地说，您正在使用[这种方法的一种形式](https://stackoverflow.com/questions/9515704/building-a-chrome-extension-inject-code-in-a-page-using-a-content-script/9517879#9517879)*在网页的上下文中*执行代码。网页无权访问`chrome.extension`API。

我建议重写您的代码以*不*使用注入脚本，因为在这种情况下没有必要。

```
function login() {

    chrome.extension.sendRequest({greeting: "hello"}, function(response) {
        console.log(response.farewell);
    });

    var d = document.getElementById('mainFrame').contentDocument;
    d.getElementsByName("email")[0].value = "I need the response data here";
    d.getElementsByName("passwort")[0].value = "Here too.";
    d.forms["login"].submit();
}

login(); 
```

`*`仅当框架位于同一原点时才有效。否则，您需要[此方法](https://stackoverflow.com/questions/11325415/access-iframe-content-from-a-chromes-extension-content-script/11326942#11326942)才能正确执行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:38:53.337

`sendRequest`并且`onRequest`已[弃用](http://codereview.chromium.org/9965005/)。您需要使用[sendMessage](http://developer.chrome.com/extensions/extension.html#method-sendMessage)和[onMessage](http://developer.chrome.com/extensions/extension.html#event-onMessage)。

此外，您正在向 DOM 注入函数，这使其在内容脚本上下文之外运行，因此`chrome.extension`API 不再可用于该函数。

# c# - 返回的 WCF JSON 的顺序

> ID：12777812
> 
> 赞同：0
> 
> 时间：2012-10-08T08:22:42.583
> 
> 标签：c#, json, wcf, serialization

我有一个从序列化对象返回一些 JSON 的 WCF 服务：

```
public class Response
{
    public string Token { get; set; }
    public int UserId { get; set; }
    ...
} 
```

我为这个类添加了一些额外的属性，但现在一些实现失败了，因为它们读起来像：

```
string[] ResultLoginValues = e.Result.ToString().Split(','); 
```

并且它按字母顺序返回，而不是按旧顺序返回，最后是新属性。

有什么办法可以更改订单，还是应该重写客户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:44:41.653

有关解决方案，请参阅[WCF DataContract DataMember 订单](https://stackoverflow.com/questions/3816478/wcf-datacontract-datamember-order)

# mysql - 在 Rails 中使用数字和文本对字符串进行排序

> ID：12777813
> 
> 赞同：3
> 
> 时间：2012-10-08T08:22:49.827
> 
> 标签：mysql, sql, ruby-on-rails-3, sqlite, ancestry

在我的数据库中，我有一个包含等级的名称列的表，例如 1.grade、2.grade 等等。当数字达到 10 或更多时，排序不会按我的意愿进行，因为 10.grade 在排序记录集中排在 2.grade 之前。我知道这是因为字符串排序不同于整数排序。问题是如何以数字方式对这些字符串进行排序。

因为成绩记录是使用 ancestry 插件构建的树的一部分，所以我必须将整个排序代码放入 :order => "(一些对结果进行排序的代码)" 中。

我试过了`:order => "CAST(SUBSTRING_INDEX(name, '.') AS SIGNED)"`。但这不起作用。

我在开发环境中使用 SQLite，在生产环境中使用 MySQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:30:23.187

尝试这个：

替换常数值'。用空字符串对你的列进行等级'，然后你得到数值。将相同的内容转换为 int

```
order by cast(replace(name,'. grade','') as int) 
```

**编辑**：

根据您的评论，如果它始终不是“等级”，那么请尝试

```
order by cast(left(name,LOCATE('.',name,1)-1) as  UNSIGNED) 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!2/37813/1)

# windows - Windows VSS 服务

> ID：12777817
> 
> 赞同：1
> 
> 时间：2012-10-08T08:23:07.253
> 
> 标签：windows, driver, volume, snapshot, volume-shadow-service

我是一个新手，我正在开发一个跟踪文件创建/写入/修改的驱动程序。现在我被告知要处理卷快照。我看过 Windows SDK 附带的 VSS 代码。但是我被告知要在内核级别使用 VSS，这意味着我必须找出如何通过我的驱动程序使用或通信 Windows 卷快照服务。请有人对此提供一些意见并尝试帮助我，因为我在谷歌上搜索了很多卷快照，但没有从那里得到太多帮助。我应该在内核级别实现 VSS Writer 还是其他什么来使用 Windows VSS 服务的功能。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:49:54.910

我认为您应该实施 VSS 硬件提供程序。

*   获取开发文档

    [http://msdn.microsoft.com/en-us/library/windows/desktop/aa381601(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381601(v=vs.85).aspx)

*   获取示例代码

    1.  您需要安装 Microsoft SDK--例如--7.1

    2.  假设 SDK 安装在默认路径下，访问路径 C:\Program Files\Microsoft SDKs\Windows\v7.1\Samples\winbase\vss\vsssampleprovider 在这里可以找到示例代码。

祝你好运！

# android - any.do 之类的 android 应用程序是使用 eclipse(java+xml) 构建的吗？

> ID：12777819
> 
> 赞同：0
> 
> 时间：2012-10-08T08:23:17.537
> 
> 标签：android

我有很多应用程序都有很棒的 GUI，比如 Any.do、来自 doubletwist 的闹钟等。我想知道这些应用程序是否使用 java 和 xml 使用标准 eclipse 方式开发。我无法弄清楚如何使用 eclipse xml 开发这种类型的 GUI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:14:17.077

所有具有良好 UI 的 Android 应用程序都使用 java 和 xml。唯一的区别是好的应用程序需要大量的工作，有时还需要一些 Android 元素的自定义实现。

迎合不同形式因素的 xml 文件是实现丰富应用程序的最佳方式（实际上我认为没有其他有效方式）：
-它们允许您尽可能地将布局与代码分开。
- 它们允许您独立处理特定的外形尺寸。

此外，优秀的应用程序通常会重新实现一些基本的 UI 元素。例如，在 Flipboard 中操作栏的实现允许他们对其应用翻转效果，这是基本的 ActionBar 无法做到的。

Any.do 刚刚更新，我还没有检查过这个最后一个版本，但是我最后一次尝试这个应用程序时，他们的实现并不是很好。ActionBar 中的按钮过于狭窄，并且它们的自定义 ActionBar 非常慢（超过 1 秒才能确认点击）。

额外的想法：有时这些设计精美的应用程序往往会忽略至少一些 Android 约定。这是一个非常糟糕的主意：你可以创建一个非常漂亮的应用程序，但如果它的 UI 元素与用户在其他 Android 应用程序中遇到的完全不同，它只会让应用程序的整体使用变得混乱。恕我直言，创建出色应用程序（无论是视觉上还是功能上）的最佳方法是使用 Holo 作为需要丰富的设计基础，并且不要：
-仅仅因为您认为它是与平台的设计约定完全相反的东西好的。
- 以完全不同的方式使用基本的 android 设计块，它会完全混淆你的用户。
- 应用其他平台约定。
- 制定自己的规则，因为“您通过在 ios、android 和您的网站上使用相同的设计来强化您的品牌”。你只是懒惰。

一个好的起点显然[是官方设计网站](http://developer.android.com/design/index.html)。[android niceties](http://androidniceties.tumblr.com/)是一个很好的灵感来源。[Holo Everywhere](http://www.holoeverywhere.com/)和[Android UI UX](http://androiduiux.com/)是非常有趣的网站，可以让您了解如何改进现有应用程序。

# php - Wialon 远程 API 登录

> ID：12777825
> 
> 赞同：0
> 
> 时间：2012-10-08T08:23:36.287
> 
> 标签：php, session, request

我的代码：

```
<?php
   if(isset($_GET['login']) && isset($_GET['login']) && isset($_GET['password'])){
      $_login_url = "http://testing.wialon.com/wialon/ajax.html?svc=core/login&params={user:%s,password:%s}";
      $login = $_GET['login'];
      $password = $_GET['password'];    
      $handle = fopen(sprintf($_login_url, $login, $password), "r");
      $line = fgets($handle);
      fclose($handle);
      $responce = explode(",",$line);
      if(count($responce) < 2) {
         echo "Invalid user or password";
      } else {
         $sessid = explode(":",$responce[1]);
         $lastid = str_replace("\"","",$sessid[1]);
         echo "http://testing.wialon.com/index.html?sid=".$lastid."";
      }
  }
?> 
```

当我使用托管脚本的服务器访问此脚本时，一切正常，会话是使用我的 IP 地址生成的。

但是当我使用另一台计算机访问它时，任何尝试登录脚本的用户都会使用服务器 IP 地址生成会话。我可以使用用户 IP 地址发送请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:45:37.783

不，您不能使用用户 IP 地址发送请求。

`HTTP_X_FORWARDED_FOR`但是，您也许可以通过使用请求标头[或类似](https://stackoverflow.com/a/2031935/89771)文件来指示该请求是代表另一个 IP 执行的，但无需查看他们的文档（这似乎不是公开可用的）我不能确定其中。你需要问他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T06:59:34.837

这是一个旧线程，但是，让我投入两分钱。有两种新的 wialon 身份验证方法 Token login 和通过传递 athorization hash 。第二种方法最适合跨服务器维护会话。

[http://sdk.wialon.com/wiki/en/kit/remoteapi/apiref/core/create_auth_hash](http://sdk.wialon.com/wiki/en/kit/remoteapi/apiref/core/create_auth_hash)

[http://sdk.wialon.com/wiki/en/kit/remoteapi/apiref/token/token](http://sdk.wialon.com/wiki/en/kit/remoteapi/apiref/token/token)

//从这里获取令牌[http://hosting.wialon.com/login.html?client_id=wialon&access_type=-1&activation_time=0&duration=0&flags=1](http://hosting.wialon.com/login.html?client_id=wialon&access_type=-1&activation_time=0&duration=0&flags=1) // 您应该拥有来自 wialon 的现有用户名并具有 SDK 访问权限

```
 $params = "{'token':'$token','operateAs','$username'}";

        $baseurl = "http://hst-api.wialon.com/wialon/ajax.html";
        $url = "$baseurl?params=".urlencode($params)."&svc=token/login";
        $o = json_decode(file_get_contents($url),true);  
        $sid = $o['eid']; 
```

# sql-server - 根据条件将多条记录插入表中

> ID：12777826
> 
> 赞同：0
> 
> 时间：2012-10-08T08:23:36.483
> 
> 标签：sql-server

我有一个名为`customer`where columns的主表

```
MainCustID   AssocativeCustID
11           22
33           33
45           56
38           90
56           1234
356          356 
```

现在我需要根据条件将此值记录插入另一个表

*   如果`MainCustID`和`AssocativeCustID`相同，则只有 1 个条目将进入另一个名为的表`collection`（即`MainCustID`条目）

*   如果`MainCustID`and`AssocativeCustID`不同，则 2 个条目将进入名为`collection`( `MainCustID`and `AssocativeCustID`)的表中

我怎样才能实现这个概念？

我知道这可以基于游标来完成，有没有其他方法可以实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:29:40.453

您可以将其分解为三个子任务：

```
insert into Collection
    select MainCustID
    from Customer
    where MainCustID = AssocativeCustID;
insert into Collection
    select MainCustID
    from Customer
    where MainCustID <> AssocativeCustID;
insert into Collection
    select AssocativeCustID
    from Customer
    where MainCustID <> AssocativeCustID; 
```

1.  首先插入所有`MainCustID`等于`AssocativeCustID`
2.  然后所有`MainCustID`不等于的地方`AssocativeCustID`
3.  然后在另一边，所有`AssocativeCustID`不等于的地方`MainCustID`

这是一个**演示**：[http ://sqlfiddle.com/#!2/60026/1/0](http://sqlfiddle.com/#!2/60026/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:43:42.510

如果不使用**游标**，您需要运行这两个插入查询：-

```
insert into collection values (select MainCustId from customer where MainCustID = AssocativeCustID);

insert into collection values (select MainCustId,AssocativeCustID from customer where MainCustID <> AssocativeCustID); 
```

# nosql - SQL 类似于在表中查询具有多个键的数据库

> ID：12777829
> 
> 赞同：0
> 
> 时间：2012-10-08T08:23:45.663
> 
> 标签：nosql, rdbms, secondary-indexes

我们知道在传统的 RDBMS 系统中有主键的概念。此主键基本上用于在此特定键上为表中的记录建立索引，以便更快地检索。我知道有像 Cassandra 这样的 NOSQL 存储提供辅助键索引，但是有一种方法或现有的 DB 遵循与传统 RDBMS 系统完全相同的模式（即，将 DB 拆分为各种表以保存不同类型的数据）但是提供 2 个或更多键的索引。

一个用例的例子是：

10 个不同的人的姓名和年龄之间存在一对一的映射关系。现在，如果我将这些信息保存在一个以人名作为主键的表中，那么检索给定人名的年龄比检索给定人年龄的姓名要快。如果我可以索引这两列，那么第二种情况也会更快。使用传统 RDBMS 执行此操作的另一种方法是让 2 个表具有相同的数据，不同之处在于其中一个中的主键是名称，而另一个中的主键是年龄，但这会浪费在大量记录的情况下占用大量空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:07:06.300

很遗憾，很长一段时间没有对这个问题作出回应。在所有这些研究中，我发现[FastBit Index](http://crd-legacy.lbl.gov/~kewu/fastbit/doc/html/ "快比特")作为对表中记录的几乎每一列进行索引的合理解决方案之一。它还为查询数据提供类似 SQL 的语义，并在查询数百万行数据（GB 量级）时提供几毫秒量级的性能。

请建议是否有任何其他 NOSQL 或 SQL DB 可以提供具有良好性能水平的类似功能。

# visual-studio-2010 - 如何在 Visual Studio 中“转到定义 (F12)”的外部代码？

> ID：12777843
> 
> 赞同：8
> 
> 时间：2012-10-08T08:24:33.727
> 
> 标签：visual-studio-2010, visual-studio

我的 Visual Studio 2010 中有 ac# 解决方案 A。我添加了解决方案 B 的 dll 作为参考。我已经用“调试”构建了解决方案 B。

如果我在调试模式下运行解决方案 A，我可以调试解决方案 B（步入 F11）并查看代码。那很好。如果我没有处于调试模式并且我“转到定义 (F12)”的外部代码 Visual Studio 打开一个没有方法主体/逻辑的文件:-( 它看起来像一个接口。

是否可以在编辑模式下“转到定义（F12）”外部代码？我需要插件吗？

我不想编辑外部代码。我只想阅读逻辑并设置断点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-20T06:06:01.657

这种情况只发生在非调试模式下。当您要调试和设置断点时，最好同时在 Debug 中运行。

在调试模式下运行两者。

# c# - 在屏幕末尾使用鼠标滚动滚动查看器，如 Windows 开始菜单

> ID：12777844
> 
> 赞同：2
> 
> 时间：2012-10-08T08:24:38.293
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

> **可能重复：**
> [有没有办法在 Windows 8 Metro 应用程序中获得推送滚动功能？](https://stackoverflow.com/questions/9579343/is-there-a-way-to-get-push-to-scroll-functionality-in-windows-8-metro-apps)

当鼠标光标到达屏幕末尾时，新的 Windows 8 开始菜单会水平滚动。

如何使滚动查看器以相同的方式工作？

```
<ScrollViewer Style="{StaticResource HorizontalScrollViewerStyle}">
 ...
</ScrollViewer> 
```

# java - JFreeChart ChartPanel 根据内容更改调整大小

> ID：12777852
> 
> 赞同：0
> 
> 时间：2012-10-08T08:25:03.650
> 
> 标签：java, layout, resize, jfreechart, chartpanel

我正在使用`ChartPanel`JFreeChart (1.0.14) 中的一个来显示一些图。布局由[MigLayout](http://www.miglayout.com/)处理，一切正常。但是，我不时有奇怪的行为。当图发生变化时，面板的最小尺寸有时会发生变化。我没有在我的代码中设置它，而是将所有内容留给 MigLayout。

不幸的是，我无法在 SSCCE 中重现此行为，尤其是第一个 S。但在我的应用程序中，当我只是更改渲染器以显示其中一个的较粗线时，也会发生这种情况`XYSeries`。

所以我的问题：

*   **是否可以根据显示的内容在 JFreeChart 的代码中更改布局参数？**
*   **如果是这样，是否可以关闭此行为？**因为除了 MigLayout 之外，我不希望其他任何东西来处理布局参数......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:12:40.270

好的，我发现了问题所在。我`ChartPanel`的`TabbedPane`与其他选项卡在一起。这些其他选项卡之一还包含图表。其中一张图表具有对数范围轴。现在我输入了包含负值的数据，这些数据不能以对数方式显示，轴的反应是尽可能地在两个方向上缩小。这导致了极长的轴标签 ( `0.0000000[..]00001 and 10000[..]0000`)。这导致 MigLayout 为该面板提供了更多空间，并递归地要求选项卡式窗格提供更多空间。因此，我的其他选项卡也增加了选项卡式窗格。

安静奇怪且难以弄清楚... ;) 感谢垃圾神您愿意提供帮助。:)

# c# - SVN 的 Nuget DLL 位置问题

> ID：12777854
> 
> 赞同：1
> 
> 时间：2012-10-08T08:25:05.133
> 
> 标签：c#, nuget

我们有一个 .csproj 正在由许多人开发。

不幸的是，nuget 已将其“包”安装在每个用户机器上的不同位置，这意味着当另一个用户执行 SVN“更新”时，他们的项目将无法编译，因为 .csproj 文件的“提示路径”元素指向不同位置的 dll。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:36:08.343

使用 NuGet[包还原功能](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)，不要将包提交到源代码管理。
这允许 NuGet 客户端应用程序按需下载包。下载的包将位于解决方案文件夹中，因此，对包内容的引用将在任何机器上工作。

# git - git 恢复特定的提交，避免合并

> ID：12777855
> 
> 赞同：5
> 
> 时间：2012-10-08T08:25:05.547
> 
> 标签：git

我想删除 git 存储库上的特定提交，以便能够删除应用于我的软件的“修复”。

那里有一个 EMC ：

```
#!/bin/bash
rm -rf TEST .git
mkdir TEST
git init
echo "info 1" > TEST/file.txt
git add TEST/
git commit -m "Initial Commit"
echo "info 2" >> TEST/file.txt
git add TEST/
git commit -m "Commit Fix 1 on file"
echo "info 3" >> TEST/file.txt
git add TEST/
git commit -m "Commit Fix 2 sur file" 
```

file.txt 的结果将是

```
info 1
info 2
info 3 
```

我想获取没有“info 2”行的文件。git revert 会产生冲突，我想避免管理这些冲突。也就是说，像提交“Commit Fix 1 on file”这样的操作永远不会追加。

我在没有任何卢克的情况下尝试了 revert 或 rebase，所以如果您有其他想法，我会很高兴得到一些帮助。

真挚地，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:30:13.337

要恢复特定提交，您需要使用 标识`hash`提交的`git log`，然后使用`git revert <commit>`来创建删除这些更改的新提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:39:12.103

```
$ git reset HEAD^^
$ change your file to delete the info 2
$ git add .
$ git commit -m "Commit Fix 2 sur file" 
```

# javascript - 使用JQUERY缩小中心图像？

> ID：12777861
> 
> 赞同：2
> 
> 时间：2012-10-08T08:25:39.297
> 
> 标签：javascript, jquery, html, css

我想为图像设置动画并将其准确地保持在当前打开的窗口的中心。我尝试了以下方法，但它不起作用，请建议如何改进代码以使其正常工作。

```
 // get image dimensions
   var h = $(this).height();
   var w = $(this).width();

    //get div dimensions
    var div_h =$('#imgContainer').height();
    var div_w =$('#imgContainer').width();

    var  pY = Math.round((div_h - h) / 2) + 'px';
    var  pX = Math.round((div_w - w) / 2) + 'px';

    $(this).animate({
        opacity:"1", 
        top: pY+"px",
        left: pX+"px",
        zoom: '500%'
    }, 'medium') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:40:04.067

这实际上取决于您的标记的其余部分。您的代码以这种方式为我工作：

（[**查看演示**](http://jsfiddle.net/gionaf/FEQxA/)）

HTML：

```
<div id="imgContainer">
<img src="your-image.jpg">
</div>​ 
```

CSS：

```
html, body, #imgContainer {
    width:100%; height:100%;
}
#imgContainer > img {
    position:absolute; top:0; right:0; bottom:0; left:0;
    margin:auto;
    width:200px;
    max-width:100%;
    max-height:100%;
} 
```

jQuery：

```
$('#imgContainer > img').on('click',function(){
   var h = $(this).height();
   var w = $(this).width();

    //get div dimensions
    var div_h =$('#imgContainer').height();
    var div_w =$('#imgContainer').width();

    var  pY = Math.round((div_h - h) / 2) + 'px';
    var  pX = Math.round((div_w - w) / 2) + 'px';

    $(this).animate({
        opacity:"1", 
        zoom: '500%'
    }, 1000)

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:28:19.280

您可以使用[jQuery 缩放插件](http://www.jacklmoore.com/zoom)。以下是使用示例：

```
// Example:
$(document).ready(function(){
    $('a.photo').zoom({url: 'photo-big.jpg'});
});

// Using ColorBox with Zoom
$(document).ready(function(){
    $('a.photo').zoom({
        url: 'photo-big.jpg', 
        callback: function(){
            $(this).colorbox({href: this.src});
        }
    });
}); 
```

# php - Phpmailer AddBcc 不工作

> ID：12777862
> 
> 赞同：20
> 
> 时间：2012-10-08T08:25:40.390
> 
> 标签：php, phpmailer

我正在使用 phpmailer 发送电子邮件，除了密件抄送和抄送详细信息未显示邮件外，收件人可以正常接收邮件。有人可以提出解决方案。代码是

```
require_once("PHPMailer_v5.1/class.phpmailer.php");
require_once("PHPMailer_v5.1/language/phpmailer.lang-en.php");              
$mailer = new PHPMailer();
$mailer->IsSMTP();              
$mailer->SMTPAuth = true;                   
$mailer->SMTPSecure = "tls";
$mailer->Host = 'smtp.gmail.com';
$mailer->Port = 587;                
$mailer->Username = "myuserid";
$mailer->Password = "mypassword";
$mailer->FromName = $fromname;
$mailer->From = "myuserid";             
$mailer->AddAddress("to@gmail.com",$toname);                
$mailer->Subject = $subject;                
$mailer->Body =$content;                
$mailer->AddCC("something@gmail.com", "bla");               
$mailer->AddBCC("foo@gmail.com", "test");
if(!$mailer->Send())
{
echo "Message was not sent";
}
else
echo "mail sent"; 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-08T08:55:40.603

用于

```
$mailer->AddBCC("foo@gmail.com", "test");
$mailer->AddCC("something@gmail.com", "bla"); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-08T08:49:57.907

您永远不会看到密件抄送的详细信息。这就是他们是密件抄送详细信息的目的。即使是密件抄送的收件人也不会在收件人中看到自己的姓名。

PS：你注意到你写`addBCC`而不是`AddBCC`（大写`A`）？

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-06-27T16:07:23.810

从 phpMailer 函数参考：

> 添加“密件抄送”地址。注意：此功能适用于 win32 上的 SMTP 邮件程序，而不适用于“邮件”邮件程序。

这可能会导致您的问题。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-07-13T03:20:43.497

[PHPMailer 不发送 CC 或 BCC](https://stackoverflow.com/questions/14691373/phpmailer-not-sending-cc-or-bcc?answertab=votes#tab-top)

老问题，但我最终在这里寻找答案。刚刚在别处了解到这些功能 AddCC 和 AddBCC 仅适用于 win32 SMTP

尝试使用：

$mail->addCustomHeader("BCC: mybccaddress@mydomain.com"); 请参阅[http://phpmailer.worxware.com/?pg=methods](http://phpmailer.worxware.com/?pg=methods)

希望这对某人有帮助，干杯！

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-05-17T13:57:37.587

它是加密件抄送

```
$email->addBCC('my@email.com', 'My Name'); 
```

请参阅第 934 行的 PHPMailer.php（当前版本 6.0.5）（[https://github.com/PHPMailer/PHPMailer/blob/master/src/PHPMailer.php#L934](https://github.com/PHPMailer/PHPMailer/blob/master/src/PHPMailer.php#L934)）：

```
/**
 * Add a "BCC" address.
 *
 * @param string $address The email address to send to
 * @param string $name
 *
 * @return bool true on success, false if address already used or invalid in some way
 */
public function addBCC($address, $name = '')
{
    return $this->addOrEnqueueAnAddress('bcc', $address, $name);
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-06-11T07:57:58.340

密件抄送永远不会显示；只有 TO 和 CC

BCC=密件抄送

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-22T01:04:20.850

这是最新版本的一个工作示例，在 Office 365 上，我使用它从共享文件夹发送电子邮件...

```
<?
    use PHPMailer\PHPMailer\PHPMailer;
    use PHPMailer\PHPMailer\Exception;
    require_once('./phpmailer/Exception.php');
    require_once('./phpmailer/PHPMailer.php');
    require_once('./phpmailer/SMTP.php');
    //*  Working Example As Of 09/21/2019  - Sends From Shared Mailbox With Mailbox Member
    function SendO365EmailTLS($options)
    {
        $from =          isset($options['from'])          ? $options['from']          : false;
        $recipients =    isset($options['recipients'])    ? $options['recipients']    : false;
        $ccRecipeints =  isset($options['ccrecipients'])  ? $options['ccrecipients']  : [];
        $bccRecipients = isset($options['bccrecipients']) ? $options['bccrecipients'] : [];
        $attachments =   isset($options['attachments'])   ? $options['attachments']   : [];
        $credentials =   isset($options['credentials'])   ? $options['credentials']   : false;
        $subject =       isset($options['subject'])       ? $options['subject']       : '';
        $body =          isset($options['body'])          ? $options['body']          : '';
        if(!$from)        throw new Exception('Cannot send email with blank \'from\' field');
        if(!$recipients)  throw new Exception('Cannot send email, no recipients specified!');
        if(!$credentials) throw new Exception('Cannot send email, credentials not provided!');
        $mail = new PHPMailer;
        foreach($recipients as $recipient)       $mail->addAddress(   $recipient[   'email'],   $recipient['name']);
        foreach($ccRecipeints as $ccRecipient)   $mail->addCC(        $ccRecipient[ 'email'], $ccRecipient['name']);
        foreach($bccRecipients as $bccRecipient) $mail->addBCC(       $bccRecipient['email'],$bccRecipient['name']);
        foreach($attachments as $attachment)     $mail->addAttachment($attachment[  'path' ],  $attachment['name']);
        $mail->setFrom($from['email'], $from['name']);
        $mail->Username = $credentials['username'];
        $mail->Password = $credentials['password'];
        $mail->Host = 'smtp.office365.com';
        $mail->Subject = $subject;
        $mail->SMTPSecure = 'tls';
        $mail->Body    = $body;
        $mail->SMTPAuth = true;
        $mail->isHTML(true);
        $mail->Port = 587;
        $mail->isSMTP();
        $success = $mail->send();
        return $success;
    }
//  $options = ['from'=>          ['email'=>'', 'name'=>''],
//              'recipients'=>   [['email'=>'', 'name'=>'']],
//              'ccrecipients'=> [['email'=>'', 'name'=>'']],
//              'bccrecipients'=>[['email'=>'', 'name'=>'']],
//              'attachments'=>  [['path'=>'./attachments/file1.jpg','name'=>'1.jpg'],
//                                ['path'=>'./attachments/file2.jpg','name'=>'2.jpg'],
//                                ['path'=>'./attachments/file3.jpg','name'=>'3.jpg']],
//              'credentials'=>   ['username'=>'','password'=>''],
//              'subject'=>        'Email Subject Line',
//              'body'=>           '<h1>Email Body</h1><p>HTML!!!</p>'];
//  $success = SendO365EmailTLS($options);
//  echo $success ? 'Email Sent':'Email Not Sent';
//  die(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-26T12:55:51.407

$mail->addCC('cc@example.com');//碳副本 $mail->addBCC('bcc@example.com');//盲碳副本

请阅读此 [https://github.com/PHPMailer/PHPMailer](https://github.com/PHPMailer/PHPMailer)

* * *

## 回答 #9

> 赞同：-15
> 
> 时间：2013-09-16T20:40:36.800

要操作 clausla BCC AddCC 必须先于 nuloy 隐藏电子邮件将到达您的收件人否则会发生 nuna 示例：    

```
$ mail-> AddCC ("");
$ mail-> AddBCC ("mail @ domain") 
```

# java - 通过 API 在 IronMQ 中创建用户

> ID：12777865
> 
> 赞同：1
> 
> 时间：2012-10-08T08:25:51.047
> 
> 标签：java, iron.io, ironmq

我正在尝试为我正在开发的应用程序设置消息队列服务。

我已经尝试过 AWS SQS，但它并不能真正满足我们的需求，主要是因为 FIFO 和有限的消息持久性问题。

所以我转向 IronMQ，看看它是如何工作的，但我已经遇到了通过 java API 创建用户的问题。

没有专门的课程，似乎没有人关心这一点。有人知道怎么做吗？我必须编写自己的 API 吗？

编辑：正如 manveru 指出的，我说的是代币，而不是用户。另一个问题是关于设置“管理员”以外的其他权限，但我想我稍后会面对它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:55:31.617

目前，我们的 API 不支持创建新的访问令牌。不过，我认为它可能非常强大（例如，在构建过程中为每个服务器生成一个令牌）。

我在我们的全球问题跟踪器中[创建了一个问题。](https://github.com/iron-io/issues/issues/24)如果您愿意，您可以按照它在这方面发生变化时收到通知。我们现在有很多工作要做，所以很遗憾，我什至无法猜测时间表。:(

希望有帮助！

# html - 如何使用css在表格中设置第n个td的样式

> ID：12777868
> 
> 赞同：-1
> 
> 时间：2012-10-08T08:26:00.903
> 
> 标签：html, css, css-selectors

我有一个有 10 列的表。我如何编写为`TD`2 或 7 位置的所有 s 设置样式的 css 类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T08:27:02.990

就像是：

```
tr td:nth-child(2), tr td:nth-child(7) {
    /* style here */
} 
```

[IE8 不支持](http://www.quirksmode.org/css/contents.html#t38)它。但这里有一个非常好的 polyfill：[ie9.js](http://code.google.com/p/ie7-js/)。

备择方案：

1.  使用 jQuery
2.  为每个 2nd 和 7th td 添加一个自定义类

# c++ - 如何模拟没有类的函数？

> ID：12777874
> 
> 赞同：1
> 
> 时间：2012-10-08T08:26:10.733
> 
> 标签：c++, googletest, gmock

我想模拟一个不是类成员的自由函数。

它在 in 中声明`.h`，其定义在`.cpp`.

如何模拟此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:32:23.540

创建模拟函数定义，不要链接原始 .cpp 文件。

这被称为[Link Seam](http://www.informit.com/articles/article.aspx?p=359417&seqNum=3)，正如 Michael Feathers 在[有效使用遗留代码](http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052)中所描述的那样。

# android - Android ffmpeg 保存和附加 h264 流式视频

> ID：12777876
> 
> 赞同：1
> 
> 时间：2012-10-08T08:26:19.867
> 
> 标签：android, ffmpeg, append, h.264, rtsp

我需要保存由来自两个不同来源的两个视频流生成的视频文件。我在 tcp/ip 上使用 rtsp，视频是用 h264 编码的。我需要先从第一个来源录制视频，然后再继续使用第二个来源。所以我尝试的是声明两个 AVFormatContext 实例，初始化两者，`avformat_open_input(&context, "rtsp://......",NULL,&options)` 然后读取帧`av_read_frame(context,&packet)` 并将它们写入视频文件`av_write_frame(oc,&packet);` 它可以很好地保存来自第一个源的视频，但是如果例如我从第一个上下文中保存了**y**帧，当我尝试从第二个上下文中读取并保存帧在同一文件中时，对于我要保存的前**y帧，****`av_write_frame(oc,&packet2);` 将重新调整 -22**，并且不会将帧添加到文件中。

我认为问题在于上下文变量记住了读取了多少帧，并且它为每个读取的数据包提供了一个标识号，以确保它不会被写入两次。但是当我使用新的上下文时，这些标识号会重置，AVOutputFormat 或 AVFormatContext 也会保留他们期望接收的包的 ID，并且在他们收到具有该 ID 的包之前不会写入任何内容。现在我想知道如何解决这种不便。我找不到该 id 的任何设置器，或任何重用相同上下文的方法。我想修改 ffmpeg 源，但它们非常复杂，我找不到我要找的东西。另一种方法是将两个视频保存在两个不同的文件中，但是，我不知道之后如何附加它们，因为 ffmpeg 只能附加用 mpeg 编码的视频，而重新编码视频并不是一个真正的选择，因为这需要很多时间。此外，我找不到任何其他功能方式来附加两个用 h264 编码的 mp4 视频。

我很高兴听到任何关于这个问题的有用的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:50:16.280

如果要保存原始 h.264 流，为什么不简单地存储两个单独的流，然后使用系统命令 system("cat file1 file2 > finalfile") 在命令行上单独连接文件块

如果您的输出是以下之一，您可以使用 cat 直接附加

1.  具有相同编解码器的传输流 [ts]
2.  .mpg 文件
3.  原始 h.264 文件
4.  具有完全相同编码标头的原始 mpeg4 文件 [标头中提到的相同尺寸、配置文件和工具集]
5.  H.263 流

您不能直接连接 mp4 文件或 3gpp 文件。

# javascript - Openlayers 循环遍历 json 数组并使用 as javascript 输出结果

> ID：12777879
> 
> 赞同：0
> 
> 时间：2012-10-08T08:26:44.603
> 
> 标签：javascript, jquery, json, openlayers

Connection.php 文件，它使用 json 存储数据库连接代码：

```
<?php
    $username = "root";
    $password = "";
    $database = "roadmap";
    $url = "localhost";

    $con = mysql_connect($url, $username , $password);
    if (!$con) {
       die('Could not connect:' . mysql_error());
    }

    mysql_select_db($database, $con) ;
    $data = array();
    // query your DataBase here looking for a match to $input
    $query = mysql_query("SELECT * FROM students");
    while ($row = mysql_fetch_assoc($query)) {
       $json = array();
       $json['Id'] = $row['Id'];
       $json['Lon'] = $row['Lon'];
       $json['Lat'] = $row['Lat'];
       $data[] = $json;
    }
    header("Content-type: application/json");
    echo json_encode($data);
    mysql_close($con);
?> 
```

在单独的文件 index.php 中：

```
$.getJSON("connection.php", function(data) {
    addMarker( data[0].Lon,data[0].Lat ,data[0].desc);
    addMarker(-0.13264,51.50918 , );
    addMarker( -0.12498,51.50807 , );
    center = bounds.getCenterLonLat();
    map.setCenter(center, map.getZoomForExtent(bounds) - 1);
    zoom = map.getZoom();   
}); 
```

这目前会提取 json 数据，我必须将它用于从数据库中分配零件的每个单独的部分，例如**data[0].lon**将获得数据库中第一条记录的经度条目。

因为我将与相当多的条目一起工作。我想遍历 json 数组，然后输出所有记录：

```
addMarker( RECORD 1 );

addMarker( RECORD 2 );

addMarker( RECORD 3 ); 
```

谁能帮我这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:31:48.610

使用这样的东西

```
$.each(data, function(i,row){
  addMarker( row['Lon'],row['Lat'] ,row['desc'])
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:33:17.410

您可以使用 $.each 循环来迭代您的 json .. 试试这个

试试这个

```
function(data){

    $.each(data, function(i){

        console.log('Record ' + i + ' : Longitude - ' + data[i].Lon + '  . Latitude  - ' + data[i].Lat + '. Description - ' + data[i].desc    )
    });
} 
```

[检查小提琴](http://jsfiddle.net/nDNaR/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:36:05.270

您可以使用 for 循环：

```
$.getJSON("connection.php", function(data) {
  for(var i = 0; i < data.length; ++i) {
    addMarker(data[i].Lon, data[i].Lat, data[i].desc);
  }
  addMarker(-0.13264,51.50918 , );
  addMarker( -0.12498,51.50807 , );
  center = bounds.getCenterLonLat();
  map.setCenter(center, map.getZoomForExtent(bounds) - 1);
  zoom = map.getZoom();
}); 
```

或者像其他答案一样使用 jQuery`each`函数。

# wpf - 使用较低分辨率屏幕时如何重新设置 WPF 应用程序的样式

> ID：12777890
> 
> 赞同：2
> 
> 时间：2012-10-08T08:27:58.377
> 
> 标签：wpf, themes

我正在开发一个 WPF 应用程序，它将用于几种不同的 PC 类型。第一种更像是带有双高分辨率显示器的开发机器；第二个是大约800x600的手持触摸屏。

使用 MVVM 模式，我开发了一些不同的视图，它们根据选择的模式显示或多或少的信息。一般来说，布局可以很好地扩展。

我也有一些对话框，但目前这些对话框已针对高分辨率模式进行了优化。不幸的是，这些按钮在触摸屏上显得非常小，很难可靠地按下。

我想知道如何动态地重新设置对话框的样式。我想要一个应用程序设置来设置屏幕类型，从而控制样式。例如，如果屏幕是触摸屏，那么所有按钮和菜单都将具有更大的默认尺寸。

主题是要走的路吗？如果是这样，有人可以指点我一个好的教程吗？（不仅使用现有主题，还创建它们）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:19:09.270

为了改变风格，我做了以下事情：

1.  为我想要的每种类型的主题创建一个样式表。
2.  将整个项目中的所有样式引用设置为**DynamicResource**而不是“StaticResource”。
3.  使用 ResourceDictionaries 的操作。

在此示例中，我有高、中和低质量的主题。我的样式表路径是：

*   /Assets/Styles/GlobalStylesLow.xaml
*   /Assets/Styles/GlobalStylesMed.xaml
*   /Assets/Styles/GlobalStylesHigh.xaml

操作代码如下：

```
/// <summary>
/// Level of graphics quality enum.
/// </summary>
public enum GraphicsQuality
{
    /// <summary>
    /// Low
    /// </summary>
    Low = 0,

    /// <summary>
    /// Medium
    /// </summary>
    Medium = 1,

    /// <summary>
    /// High
    /// </summary>
    High = 2
}

/// <summary>
/// Sets the Application Resource Dictionaries based on selection.
/// </summary>
/// <param name="quality">The quality.</param>
/// <param name="onRedraw">The on redraw.</param>
public static void UpdateStyles(
    Enums.GraphicsQuality quality = Enums.GraphicsQuality.High, Action onRedraw = null)
{
    // Reset resource dictionaries
    Application.Current.Resources.MergedDictionaries.Clear();

    // Base style path
    const string basePath = "/<project_base>;component/Assets/Styles";

    // Evaluate global quality
    switch (quality)
    {
        case Enums.GraphicsQuality.High:
            LoadStyle(basePath + "/GlobalStylesHigh.xaml");
            break;

        case Enums.GraphicsQuality.Medium:
            LoadStyle(basePath + "/GlobalStylesMed.xaml");
            break;

        case Enums.GraphicsQuality.Low:
            LoadStyle(basePath + "/GlobalStylesLow.xaml");
            break;
    }

    // Redraw
    if (onRedraw != null)
    {
        onRedraw();
    }
}

/// <summary>
/// Loads a specific style by Uri.
/// </summary>
/// <param name="stylePath">The style path.</param>
private static void LoadStyle(string stylePath)
{
    var dic = new ResourceDictionary
    {
        Source = new Uri(stylePath, UriKind.Relative)
    };
    Application.Current.Resources.MergedDictionaries.Add(dic);
} 
```

当存在更改样式表的条件时，请调用**UpdateStyles**。

**注意：** onRedraw参数只是更新样式后执行的最后一个操作**。**在某些情况下，您可能希望通过

```
this.InvalidateVisual 
```

如果您在 UI 正确更新方面遇到问题，请从 UI 中获取。

# java - 为什么我的 Java 会话值拒绝更新？

> ID：12777894
> 
> 赞同：0
> 
> 时间：2012-10-08T08:28:13.720
> 
> 标签：java, ajax, jsp, session, servlets

我在这里有一个奇怪的问题，我不知道是否有人知道可能导致它的原因。我正在开发一个使用 AJAX 更新网页的 Java EE（Servlet 和 JSP）Web 应用程序项目。当我在我的本地主机服务器（我使用 Tomcat 7.0.26）上测试它时，它运行良好。但是当我在托管服务器上运行相同的应用程序时，某些值或页面本身拒绝正确更新。这些值存储在会话属性中，当输入它们时，它们会通过 AJAX 请求发送到 servlet，就像我说的那样，它们在我的本地主机上按预期工作，但在我订阅的托管服务器上，有错误。请问有人知道那里发生了什么吗？该网站是[http://www.optdesolver.com](http://www.optdesolver.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:37:24.950

我能想到很多事情

1.  您的服务器配置。会话超时设置多长时间？
2.  您的应用程序有一个文件缓存。
3.  您的浏览器有一些文件缓存。
4.  您没有正确部署项目。
5.  您的服务器中有多个实例。
6.  您必须重新启动服务器才能使其刷新其内容。

我建议您在 html 中使用某种版本号来验证这不是缓存相关的问题。

我希望这有帮助。

# android - 如何在从手机菜单返回应用程序时检查 android 中的互联网可用性

> ID：12777901
> 
> 赞同：2
> 
> 时间：2012-10-08T08:28:43.297
> 
> 标签：android

在我的 UI 中，我在按钮单击列表器中检查网络可用性

```
NewButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if(isInternetAvailable)
                {
                Intent intent = new Intent(FeaturedListActivity.this,
                        NewJewelsActivity.class);
                startActivity(intent);
                finish();
                }
                else
                {
                    MyAlertDialog.ShowAlertDialog(FeaturedListActivity.this, "", "Check Network Connection.", "OK");    
                }
            }
        }); 
```

我使用以下代码检查网络可用性

```
public boolean isNetworkAvailable() {
          ConnectivityManager connectivityManager= (ConnectivityManager) getSystemService(getApplicationContext().CONNECTIVITY_SERVICE);
            NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
            return activeNetworkInfo != null; 
```

现在我的问题是，当我在 wifi 处于关闭状态的情况下启动应用程序时，条件将起作用并显示“检查网络连接”对话框。现在我按下手机的中心按钮并打开 wifi 并从我离开的地方返回屏幕。现在 wifi 处于开启状态，它仍然显示“检查网络连接”。如果我重新启动应用程序，它将不显示对话框。我该如何解决？

```
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:34:15.693

您应该使用广播接收器来通知您的应用程序有关网络状态的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:33:58.797

当用户单击确定按钮时，您应该关闭对话框并将他引导至设置无线和网络屏幕。你应该做一个`startActivityForResult`，当用户再次访问应用程序时，`onActivityResult()`将调用你可以处理你的代码的地方。`onActivityResult()`您可以再次检查互联网是否存在，如果不存在，则只需显示祝酒词。在按钮上单击，您可以使用直接启动无线设置屏幕

```
 startActivityForResult(new Intent(Settings.ACTION_WIRELESS_SETTINGS),0); 
```

# java - 字符串 split() 覆盖空格和 "(" 和 ")"

> ID：12777905
> 
> 赞同：2
> 
> 时间：2012-10-08T08:28:57.533
> 
> 标签：java, string, split

我有一个`String`

```
String testString = "IN NEWYORK AND (OUT FLORIDA)" ; 
```

我想在数组中拆分这个字符串：

```
String testArray[] = testString.split("\\s()"); 
```

我希望结果是：

```
testArray[0] = "IN";
testArray[1] = "NEWYORK";
testArray[2] = "AND";
testArray[3] = "(";
testArray[4] = "OUT";
testArray[5] = "FLORIDA";
testArray[6] = ")"; 
```

但是，我得到的输出是：

```
testArray[0] = "IN";
testArray[1] = "NEWYORK";
testArray[2] = "AND";
testArray[3] = "(OUT";
testArray[4] = "FLORIDA)"; 
```

它在空格上拆分，但不在 "(" 和 ")" 上，我希望 "(" 和 ")" 作为单独的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:46:21.770

试试下面的：

```
String testArray[] = testString.split("\\s|(?<=\\()|(?=\\))"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:50:50.907

split() 需要删除分隔符。使用 StringTokenizer 并指示它保留分隔符。

```
 StringTokenizer st = new StringTokenizer("IN NEWYORK AND (OUT FLORIDA)", " ()", true);
    while (st.hasMoreTokens()) {
        String t = st.nextToken();
        if (!t.trim().equals("")) {
            System.out.println(t);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:45:19.163

```
String test = "IN NEWYORK AND (OUT FLORIDA)";
// this can for sure be done better, hope you get the idea
String a = test.replaceAll("(", "( ");
String b = a.replaceAll(")", " )";

String array[] = b.split("\\s"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T08:54:58.047

如果你想用字符串拆分来做到这一点，那么可怕的正则表达式`\s+|((?<=\()|(?=\())|((?<=\))|(?=\)))`几乎是不可避免的。这个正则表达式基于[这个](https://stackoverflow.com/questions/2206378/how-to-split-a-string-but-also-keep-the-delimiters)问题，顺便说一句，它几乎可以工作。

最简单的方法是按照@acerisara 的建议用空格包围括号，或者按照@user1030723 的建议使用StringTokenizer

# mercurial - 如何在上游设置 Mercurial

> ID：12777906
> 
> 赞同：22
> 
> 时间：2012-10-08T08:28:57.393
> 
> 标签：mercurial, push, pull

我为新项目创建了本地 hg 存储库：`hg init ; hg addremove`，然后创建了空的上游存储库，并在那里推送了第一个版本：`hg push https://remoterepo`。

现在，我想将其设置`https://remoterepo`为默认上游，所以我可以只做 hg 推/拉而不给它。

我很惊讶谷歌没有用“set mercurial upstream”给我一个直接的答案，我也没有在这里找到直接的答案。那么，为了所有使用 SO 作为操作指南的人的利益，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-08T08:39:23.773

您可以通过添加上游 URL 来做到这一点，`/project/.hg/hgrc`如下所示：

```
[paths]
default = ssh://test@bitbucket.com/repos/something
upstream = ssh://test@bitbucket.com/repos/something_else 
```

现在`upstream`是 repo 的别名`something_else`，您可以从中提取或推送到：

```
hg pull upstream
hg push upstream 
```

* * *

[参考](http://www.selenic.com/mercurial/hgrc.5.html#paths)

[hg 帮助网址](http://www.selenic.com/hg/help/urls)：

> URL 都可以存储在您的配置文件中，并在 [paths] 部分下使用路径别名，如下所示：
> 
> ```
>  [paths]
>   alias1 = URL1
>   alias2 = URL2
>   ... 
> ```
> 
> 然后，您可以将别名用于任何使用 URL 的命令（例如 `hg pull alias1`将被视为 `hg pull URL1`）。
> 
> 两个路径别名是特殊的，因为它们在您不向命令提供 URL 时用作默认值：
> 
> 1.  默认
> 2.  默认推送

# actionscript-3 - Flash 拖动奇怪的行为

> ID：12777915
> 
> 赞同：0
> 
> 时间：2012-10-08T08:29:46.997
> 
> 标签：actionscript-3, flash, actionscript

我有一个想要拖动的精美影片剪辑（其中包含文本和其他影片剪辑）

我只能拖动影片剪辑的内部部分，但不能拖动整个影片剪辑。

我不工作的例子：

[http://www.internetmotors.lv/temp/testgame_5.swf](http://www.internetmotors.lv/temp/testgame_5.swf)

[http://www.internetmotors.lv/temp/testgame_5.fla](http://www.internetmotors.lv/temp/testgame_5.fla) (cs5)

代码：

```
drag_1.addEventListener(MouseEvent.MOUSE_DOWN, clickToDrag);
function clickToDrag(event:MouseEvent):void
{
    event.target.startDrag();
}

stage.addEventListener(MouseEvent.MOUSE_UP, releaseToDrop);
function releaseToDrop(event:MouseEvent):void
{
    event.target.stopDrag();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:43:54.577

回答我自己的问题：

看来我需要使用 event.currentTarget.startDrag();

而不是： event.target.startDrag();

# java - Netbeans matisse，自定义按钮图标属性错误

> ID：12777917
> 
> 赞同：2
> 
> 时间：2012-10-08T08:29:49.710
> 
> 标签：java, swing, netbeans, matisse

我创建了一个自定义`JButton`覆盖`setIcon`.

```
public class TestButton extends JButton {

    public TestButton() {
        super();
    }

    @Override
    public void setIcon(Icon icon) {
        super.setIcon(icon);
        imgToBufferedImg(Toolkit.getDefaultToolkit().createImage("test.png"));
    }
} 
```

这是*imgToBufferedImg*方法。

```
public BufferedImage imgToBufferedImg(Image image) {
    if (image == null) {
        return null;
    }
    if (image instanceof BufferedImage) {
        return ((BufferedImage) image);
    } else {
        BufferedImage bufferedImage = new BufferedImage(
                image.getWidth(null),
                image.getHeight(null),
                BufferedImage.TYPE_INT_ARGB);

        Graphics g = bufferedImage.createGraphics();
        g.drawImage(image, 0, 0, null);
        g.dispose();

        return bufferedImage;
    }
} 
```

我在 Matisse 中添加了这个组件，没问题，但是，当我尝试设置按钮的图标属性时，我得到了错误：

> 无法将值写入属性“图标”

问题似乎来自于*imgToBufferedImg*，因为如果我删除了对这个方法的调用，我可以设置属性`setIcon`。我的图像转换方法有什么问题？

编辑：

以下测试成功：

```
try {
    imgToBufferedImg(ImageIO.read(new FileInputStream("test.png")));
} catch (IOException ex) {
    Exceptions.printStackTrace(ex);
} 
```

我也刚刚发现问题是由以下原因引起的：

```
((ImageIcon) icon).getImage(); 
```

在 UI 准备就绪时运行此代码（例如使用`SwingUtilities.invokeLater`）似乎可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:02:24.827

问题可能出在`Toolkit#createImage()`. `ImageIO.read()`可能会更好。此外，看起来您正在丢弃`imgToBufferedImg()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T08:44:52.730

没有理由

*   `BufferedImage`在里面创建`JButtons setIcon()`，你会在那里设置（for `JButton`）`Icon`，`ImageIcon`

*   这`BufferedImage`（应该是`Icon`，`ImageIcon`）是在添加到之后创建的`JButton`

* * *

但

*   方法可以是`BufferedImage to Icon, ImageIcon`

*   怎么了`JButton#setIcon()`

*   [你也可以使用paintComponent()](https://stackoverflow.com/a/7115766/714968)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:23:28.093

感谢被抨击的评论：

*工具包“操作可以异步执行”。当您尝试渲染时，您的图像可能不完整。*

我能够弄清楚问题所在。直接从`setIcon`方法中，我从图标请求图像：

```
((ImageIcon) icon).getImage() 
```

但这张图绝对是不完整的。普京我在事件调度线程中的逻辑成功了。

```
SwingUtilities.invokeLater(new Runnable() {

    @Override
    public void run() {
        //requesting icon images here
    }
} 
```

# c++ - 从 C++ 中的 txt 文件中读取特定行

> ID：12777920
> 
> 赞同：0
> 
> 时间：2012-10-08T08:30:05.177
> 
> 标签：c++, file, io

所以，我找到了我想要读取的文件的特定行，但是我得到的却不起作用：

```
 string str;
int target = 0;
ifstream record;

record.open("Record.txt");
target = std::count(std::istreambuf_iterator<char>(record), std::istreambuf_iterator<char>(), '\n') - 8;
cout << target << endl;

for(int lineNum = 0; lineNum <= target; lineNum++)
{
    getline(record, str);
    if(lineNum == target)
    {
        cout <<"the id: "<< str << endl;
    }
} 
```

在上面，我使用 std::count 来计算文件的行数。我知道我总是想从底部开始阅读第 8 行，所以我将目标设置为那个。接下来，我遍历每一行直到目标时间，并检查我是否在目标行。如果是这样，然后cout线路。

但是，它并没有给我任何东西。对于一个有 22 行的文件，我得到以下输出：

```
14
the id: 
```

有人可以指出我做错了什么或给我一些提示吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:34:25.773

`record`流将在`eof()`调用之后，`std::count()`但代码*从不*检查返回值，`std::getline()`所以不知道它失败了：**总是检查读取操作的返回值**。这意味着`str`永远不会填充，因此在`"thid id: "`消息之后不会打印任何内容。

您需要重置流或重新打开它。

# javascript - mongodb 删除过期信息的查询

> ID：12777928
> 
> 赞同：0
> 
> 时间：2012-10-08T08:30:40.407
> 
> 标签：javascript, mongodb

基本上我有一个查询

> return Images.find({'tags': tag}, {'sort': {'created_time': -1}, 'limit': 6})

它的作用是获取标签中带有标签的最新 6 个文档。现在我们知道，在此之后匹配的任何其他标签都不需要了。有没有办法在 6 个之后删除与标签匹配的其他图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:54:14.973

所以你基本上是在问如何删除超过 6 个？

您可以取消限制。这样，您将从那里得到一个完整的光标，您可以继续超过第 6 个元素并根据需要继续删除。

# wpf - 依赖属性“级联”绑定

> ID：12777932
> 
> 赞同：1
> 
> 时间：2012-10-08T08:31:05.187
> 
> 标签：wpf, xaml, binding, dependency-properties

我对 WPF/XAML 比较陌生，遇到了一个我不知道如何解决的问题。

我将用一个例子来描述我的问题。我需要开发一个应用程序，它将显示网球场以及这些球场上的球员照片和姓名。我创建了两个用户控件：`TennisCourt`和`TennisPlayer`. 该`TennisCourt`控件包含 4 个`TennisPlayer`控件实例。

`TennisPlayer`有一个类型为 的 DP `Player`，其中包含玩家的姓名和照片。

`TennisCourt`有 4 个类型的 DP `Player`：Player1、Player2、Player3、Player4。

每个`TennisPlayer`实例都有其 Player 依赖属性绑定到包含的 Player1..4 依赖属性之一`CourtControl`。

我的 ViewModel 有几个 Player 类型的对象，当然还实现了`INotifyPropertyChanged`. 每当任何玩家更新时，`OnPropertyChanged`都会被调用。

我现在的问题是：当我在我的虚拟机中创建播放器对象时，`OnPropertyChanged`会被调用，并且它会遍历：`VM -> TennisCourt.PlayerX -> TennisPlayer.Player`. 我第一次调用它时效果很好。但是，玩家照片是异步获取的，在该操作完成后，`OnPropertyChanged`再次调用VM中的for each player对象。

现在，在做了一些测试之后，我注意到（`TennisCourt`）行中的第一个控件确实收到了`PropertyChanged`通知，并且它再次从 VM 获取对象。但是，由于 Player 对象实际上并没有改变（引用是对同一个对象，它只是对象中的一个字段发生了变化），该`TennisCourt.PlayerX`属性似乎没有引发其内置`OnPropertyChanged`事件，因此绑定`TennisCourt.PlayerX -> TennisPlayer.Player`没有任何效果，并且该`TennisPlayer.Player`字段不会更新。如果我决定实际更改 VM 中的 Player 对象，它确实会更新，但这不是我想要做的。

我做错什么了吗？这种级联绑定不是一个好习惯吗？起初我`TennisCourt`没有任何 DP，每个`TennisPlayer.Player`都直接绑定到 VM.Player。这工作得非常好，直到我创建了第二个实例`TennisCourt`并希望它显示不同的玩家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:41:16.680

仅使用带有 INotifyPropertyChanged 的​​属性，并且没有依赖属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:02:44.400

`DependancyProperty`是静态的，因此您法庭的所有实例都将获得相同的财产。

# mysql - 用 MySQL 计数

> ID：12777934
> 
> 赞同：0
> 
> 时间：2012-10-08T08:31:20.897
> 
> 标签：mysql

有没有办法在 MySQL 更新查询中计算 Int？

目前我有

```
UPDATE mails SET uid = 4275 
```

我想要类似的东西

```
UPDATE mails SET uid = (4275++) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:37:23.117

你想做这样的事情吗？

```
SELECT @i:=425;

UPDATE mails SET uid = @i:=@i+1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:32:05.897

如果您需要更新表以使每个表增加`uid`1，那么您可以这样做：

```
 UPDATE mails 
   SET uid = uid + 1; 
```

但是，如果您需要将每个值`uid`增加一个增量值，请尝试以下操作：

```
SET @counter = 0; 
UPDATE mails m1
INNER JOIN
(
    SELECT *, (@counter := @counter +1) as counter
    FROM mails
) m2 ON m1.uid = m2.uid
SET m1.uid = m1.uid + m2.counter 
```

如果你想从 4275 开始计数，只需将计数器设置为`SET @counter = 4275`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T08:34:38.723

更新邮件 SET uid = uid + x

x 表示任何数字

我没有正确回答您的问题，但我只是按照我的理解回答

更新邮件 SET uid = uid + 1

即通过lastuid + 1增加当前uid

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T08:35:45.397

`UPDATE mails SET uid = uid +1`将为每个 uid 列添加 1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T08:35:49.390

尝试

```
UPDATE mails SET uid = uid+1
where uid = 4275 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-08T08:38:32.400

您可以保留自己的柜台

```
declare @curr_uid integer; 
SET @curr_uid = 4275; -- initial uid

update mails
set uid = @curr_uid , @curr_uid = @curr_uid + 1 
```

# 3d - 如何将非网格 3D 数据描绘为热图？

> ID：12777936
> 
> 赞同：2
> 
> 时间：2012-10-08T08:31:51.293
> 
> 标签：3d, gnuplot, heatmap

我有 3 列数字 x、y、z，其中 x 和 y 是坐标，z 是强度。我想将数据表示为 gnuplot 中的热图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:46:51.020

您可以设置`dgrid3d`填写缺失值：

```
set dgrid3d
splot 'input.txt' with pm3d 
```

# ruby-on-rails - 我们可以将 XML 编码从 utf-8 更改为 utf -16 吗？

> ID：12777941
> 
> 赞同：0
> 
> 时间：2012-10-08T08:32:21.027
> 
> 标签：ruby-on-rails, xml, utf-8, xsd, utf-16

我编写了一个使用 UTF-8 编码生成 XML 的代码。我总是使用 XSD 文件验证 XML。在相同的代码中，我需要 UTF-16 编码。因为我的 XSD 文件之一是 UTF-16 编码。但在我现有的代码中，它不被接受。它给出了以下错误。

```
FAILED: Fatal error: Document labelled UTF-16 but has UTF-8 content at filepath/standard.xsd:1. 
```

在 XSD 的第 1 行定义了这个标签`<?xml version="1.0" encoding="utf-16"?>`

如何使用 utf-8 编码对其进行验证？

有没有办法将 UTF-16 更改为 UTF-8 编码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:41:24.550

您可以使用 Iconv将编码从**utf16 更改为 utf-8**

[通过系统从 Ruby 1.8.7 调用 iconv 将文件从 utf-16 转换为 utf-8](https://stackoverflow.com/questions/7123049/call-iconv-from-ruby-1-8-7-through-system-to-convert-a-file-from-utf-16-to-utf-8)

当您编写新文件时，您可以将第一行替换为新标题，例如

```
<?xml version="1.0" encoding="utf-8" ?> 
```

[Ruby - 打开文件，查找和替换多行](https://stackoverflow.com/questions/4048678/ruby-open-file-find-and-replace-multiple-lines)

如果您以其他方式需要它，请更改函数中的结束。

# c - 在 C 中链接库

> ID：12777950
> 
> 赞同：1
> 
> 时间：2012-10-08T08:32:45.333
> 
> 标签：c, compilation, linker, static-libraries, geany

> **可能重复：**
> [为什么必须在 C 中链接数学库？](https://stackoverflow.com/questions/1033898/why-do-you-have-to-link-the-math-library-in-c)

我正在使用 GCC 编译器（在 Linux 上）学习 C。

我最近从 using Code::Blocks 转移到 using `Geany`，我注意到它`Geany`不会自动链接到任何所需的库。例如，当我`#include <math.h>`在 Code::Blocks 中使用时，它会在我编译时自动链接到相应的数学库中。但是，`Geany`不这样做，我必须手动添加构建命令，例如`-lm`数学库，以使编译工作。

但是，我注意到包含`string.h`标头并使用其中的函数可以很好地编译，而无需在字符串库中进行链接。这是为什么？是`string.h`标题本身定义了所有功能吗？有人可以解释为什么有些图书馆似乎需要链接，而另一些则不需要。

类似地，有没有人有经验告诉`Geany`自动链接所需的库？这将使编译变得容易得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:34:47.550

所有库都需要链接。但是，`string.h`标头中的库函数是 C 库的一部分，默认情况下链接到所有 C 程序，除非您另有要求。相比之下，数学库函数默认不链接，因为许多 C 程序不需要它们，而且链接器并不总是经过优化。

> 在古老的系统上，如果数学函数包含在 libc 中，那么编译所有程序会更慢，输出的可执行文件会更大，运行时需要更多的内存，这对大多数根本不使用这些数学函数的程序没有好处。这些天来，我们对共享库有很好的支持，即使是静态链接，标准库也被设置为可以丢弃未使用的代码，所以这些都不再是很好的理由了。
>     --[为什么一定要在 C 中链接数学库](https://stackoverflow.com/questions/1033898/why-do-you-have-to-link-the-math-library-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:38:32.950

在大多数系统上，只有数学库的函数被分成`libm.so`or `libm.a`（因为它很大）。其他头文件中声明的函数存在于`libc.so`or`libc.a`中，它始终由 GCC（而不是 IDE！）自动链接。

但是，也有一些例外，因为 C 标准没有定义库的组织方式。在某些 linux 系统上，这些`time_*`函数被提取到一个单独的库`librt.so`（或 .a）中。在 Mac OS X 上，所有 C 标准库都`libSystem.dylib`与 CommonCrypto 和一些 BSD API（例如 libkern）一起放入。

# android - Android：mp4 H.264 - 不支持基带

> ID：12777951
> 
> 赞同：1
> 
> 时间：2012-10-08T08:32:46.887
> 
> 标签：android, mp4

Android < 3.0 不支持 H.264 基带的 mp4 视频播放。

但是，它也不会推送错误消息，因为它可以播放声音（没有视频）。我想添加一个适当的错误/异常处理程序。如果出现禁用视频播放的问题，如何获得通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:34:24.697

另一种方法是检查 android 版本。

如果版本低于 3.0，则抛出异常。

# java - 将 MySql 查询转换为 JPA 命名查询

> ID：12777957
> 
> 赞同：0
> 
> 时间：2012-10-08T08:33:14.400
> 
> 标签：java, mysql, sql, jpa, openjpa

我有一个`MySql`这样的查询：

```
select AK.*, max(AA.activityDate) 
from AssessmentKey AK 
join AssessmentActivity AA on AA.ASSESSMENTKEY_ID = AK.id 
group by AK.id having max(AA.activityDate) <=  '2012-10-02 17:30:55' 
```

有没有办法转换成 in `JPA` `NamedQuery`. 我正在使用`OpenJPA`.

如果我直接放入：

```
@NamedQuery(name = "AssessmentActivity.findByDate", 
  query = "select AK.*, max(AA.activityDate) from AssessmentKey AK 
           join AssessmentActivity AA on AA.ASSESSMENTKEY_ID = AK.id 
           group by AK.id having max(AA.activityDate) <=  '2012-10-02 17:30:55'") 
```

错误显示在这里：`select AK.*`那`identifier expected, got "*"`也不喜欢`on`，这里说：

![在此处输入图像描述](../Images/07aa583af6b2123941c4d00ec7a99586.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:41:33.447

第一个问题：你应该在这里替换`AK.*`你`AK`只需要实体别名。

第二个问题：连接语法不是那样的。您应该编写：`join`并浏览对象引用，例如：AK.assesmentActivity 并使用`where`关键字而不是`on`

这是关于连接的提示：[JPQL 连接](https://stackoverflow.com/questions/3730625/jpa-join-in-jpql)

请记住：您在 ORM 中处理实体及其属性，而不是数据库外键和列。

（ps：也许你想写一个`NativeQuery`？那里你可以使用原生 SQL 语法）

编辑：（根据您的评论）所以您必须从 AA 开始查询：

```
select AK from AssesmentActivity AA join AssesmentKey AK where AA.assesmentKey = AK ... 
```

这样你就可以加入他们。

# ios - 如何使用“滚动”过渡样式在 UIPageViewController 的页面之间滚动需要两根手指？

> ID：12777965
> 
> 赞同：1
> 
> 时间：2012-10-08T08:33:56.740
> 
> 标签：ios, uigesturerecognizer, uipageviewcontroller

我正在开发一个永远不会提交到 App Store 的 iOS 6 应用程序。

我试图`UIPageViewController`让用户在四个不同的视图控制器之间从左到右滑动。这很好用，但是为了允许与每个视图控制器进行正常的单指交互，我需要两根手指在`UIPageViewController`.

文档建议我应该能够通过自定义在我的属性中`UIGestureRecognizer`找到的对象来做到这一点。但是，当设置为时，此属性似乎是一个空数组。`gestureRecognizers``UIPageViewController``transitionStyle``UIPageViewControllerTransitionStyleScroll`

如果我将属性更改为`transitionStyle`包含`UIPageViewControllerTransitionStylePageCurl`对象`UIGestureRecognizer`，我可以随意自定义它们。

是否有任何（记录或其他）方法可以使用滚动转换类型来实现我想要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T18:10:37.540

如果它解决了你的问题，我已经用这段代码解决了这个问题。带有滚动转换的 UIPageViewController 是使用 UIScrollView 实现的，它是控制器主视图的子视图，UIScrollViewController 有一个 panGesture 属性用于处理平移的触摸，因此：

```
for (UIView* view in [editor.view subviews]) {
    if ([view  isKindOfClass:[UIScrollView class]])
    {
        UIScrollView* scrollView = (UIScrollView*)view;
        scrollView.panGestureRecognizer.minimumNumberOfTouches = 2;
    }
} 
```

这解决了问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T00:54:52.693

UIPageViewController.h 有以下评论：

```
// Only populated if transition style is 'UIPageViewControllerTransitionStylePageCurl'.
@property(nonatomic, readonly) NSArray *gestureRecognizers; 
```

不知道为什么它不在文档中。

# transactions - JBoss 5.1 中的最大事务超时是多少

> ID：12777968
> 
> 赞同：1
> 
> 时间：2012-10-08T08:34:00.890
> 
> 标签：transactions, timeout, jboss5.x

我注意到在 JBoss 5.1 中尝试将事务超时设置为 90000 时的特殊性，特别是在 transaction-jboss-beans.xml 中设置 transactionTimeout 时：

`<property name="transactionTimeout">90000</property>`

这会引发将值设置为 10800 时看不到的各种错误。

我似乎在任何地方都找不到这个属性的记录，我想知道 90000 是否太高，如果是，最大值是多少。

# java - 在 5000 多个文本文件中搜索特定字符串。

> ID：12777969
> 
> 赞同：1
> 
> 时间：2012-10-08T08:34:03.680
> 
> 标签：java, c++, file, search

我解决产品的错误。客户已发送一束日志文件。我需要在这些日志文件中搜索特定字符串。日志文件数量超过五千。

**我不能使用 grep，因为我正在使用 Windows 机器。**

我在这里有什么选择？我正在考虑用 java 编写一个程序，在其中打开目录中的每个文本文件并搜索特定模式。但是我找不到一个可以一个接一个地打开每个文件的api。

你能建议我一个解决方案吗？我也可以用 C++ 或 C# 编写代码，以某种方式可以在那里构建解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T08:35:18.597

我建议安装 Cygwin 并使用 grep

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T08:38:51.853

如果您只需要手动执行此操作，那么只需安装任何合适的编辑器（我的建议是[http://notepad-plus-plus.org/](http://notepad-plus-plus.org/)），并使用它的 find-in-files 功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T08:41:02.293

如何从命令提示符使用 findstr 命令。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T09:11:34.737

这适用于 Windows XP。我不知道最新的版本。

单击 Windows 开始按钮 单击搜索 将打开一个新窗口。在左下角，单击“单击此处以使用 Windows Search Companion” 将打开另一个窗口。在标有“文件中的单词或短语”的文本框中，输入您要查找的内容。在最底部标记为“查找”的组合框中，选择“浏览...”并选择包含所有日志文件的文件夹。点击“搜索”等待结果...

注意：有 2 个搜索程序。第一个仅查找已编入索引的内容，这就是您应该使用第二个搜索程序的原因。

祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T14:09:44.133

珀尔。在目录中的每个文件中搜索字符串大约需要三行代码。你可以在半小时内学会足够多的 Perl 来做到这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T18:08:35.093

考虑一下[VIM 编辑器](http://www.vim.org/download.php)，它在处理大文件时非常棒。可以在 Cygwin 下使用，也可以在 Windows 上使用。使用[备忘单](http://www.viemu.com/a_vi_vim_graphical_cheat_sheet_tutorial.html)快速学习。

# android - Android：GSM 信号强度？

> ID：12777972
> 
> 赞同：1
> 
> 时间：2012-10-08T08:34:16.833
> 
> 标签：android, get, set, gsm, signal-strength

我在网上搜索，我知道要获得信号强度。它正在工作。但是“设置”信号强度是什么意思。那可能吗？

# javascript - Javascript 生成的 HTML 也会打印“未定义”

> ID：12777975
> 
> 赞同：0
> 
> 时间：2012-10-08T08:34:33.900
> 
> 标签：javascript, html

我正在尝试使用从 last.fm API 中提取的艺术家姓名和图像制作一个菜单。目前，它可以很好地生成图像和名称列表，除了它在列表顶部打印“未定义”。我已经尝试注释掉使用艺术家姓名/图像填充元素的部分，并让它生成元素，但它仍然打印未定义。我对它所说的未定义完全感到困惑。

首先，它进行 AJAX 调用以获取所需的信息：

```
 if (window.XMLHttpRequest) { // Non-IE browsers
httpRequest = new XMLHttpRequest();
}
else if (window.ActiveXObject) { // IE 8 and older
httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
}

httpRequest.open("GET", 'http://ws.audioscrobbler.com/2.0/?method=chart.gettopartists&api_key=b25b959554ed76058ac220b7b2e0a026&format=json', true);

httpRequest.onreadystatechange = function () {
var done = 4, ok = 200;
// Parse the JSON into JavaScript immediately on receipt
if (httpRequest.readyState == done && httpRequest.status == ok) {
  artistList = JSON.parse(httpRequest.responseText); 
```

然后它处理该信息并生成它用 inner.HTML 实现的 HTML

```
var artistsAndImage = {};

for (var i=0; i < artistList["artists"]["artist"].length; i++) {
var name = artistList["artists"]["artist"][i]["name"];
artistsAndImage[name] = artistList["artists"]["artist"][i]["image"][0]["#text"];
};
var code;
// Generate HTML for sidebar with artist names and iamges
for (var name in artistsAndImage) {
nameid = name.
      replace(/ /g, "_").
      replace(/&/g, ":amp").
      replace(/\+/g, ":plus");
code += "<element id=\"" + nameid + "\" onclick=\"details(this)\">\n<p style = \"cursor:default\">\n <img src=\"" + artistsAndImage[name] + "\" alt=\"alt\" width = \"50\" height = \"50\">\n" + name + "\n</p> </element>\n";
};
 document.getElementById("sidebar").innerHTML = "<div style = \"padding:20px\">" + code + "</div>"; 
```

“未定义”来自哪里，我该如何解决？您可以在此处查看上传的页面的当前化身：http: [//test.yukot.corp.he.net/](http://test.yukot.corp.he.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:37:01.637

`var code;`用空字符串实例化你的：

```
var code = ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:44:06.513

乍一看，我可以看到出现的三个可能原因`undefined`，要么`artistList["artists"]["artist"][i]["image"][0]["#text"]`并不总是存在（这一行`artistsAndImage[name] = artistList["artists"]["artist"][i]["image"][0]["#text"];`）
，然后，你定义了一个变量，，`code`但它的值（自动）设置为`undefined`，你不初始化它到一个字符串：`var code = '';`应该解决这个问题。
另一种解释是您循环遍历对象，而不检查您正在处理的属性是否在实例本身上定义：

```
var code = ''; //initialize code to empty string
for (var name in artistsAndImage)
{
    if (artistsAndImage.hasOwnProperty(name))
    {
        code += 'First string';
        //only process those that are instance properties
    }
} 
```

可以肯定的是，您也可以检查`undefined`:

```
var code = '';
for (var name in artistsAndImage)
{
    if (artistsAndImage.hasOwnProperty(name) && artistsAndImage[name] !== undefined)
    {
        //only process those that are instance properties
    }
} 
```

在你的控制台中试试这个：

```
var code;//code is set to undefined
code += 'part of a string';
console.log(code);//logs: undefinedpart of a string 
```

# r - 根据图表中图例向量的长度改变图例中文字的大小

> ID：12777976
> 
> 赞同：2
> 
> 时间：2012-10-08T08:34:35.743
> 
> 标签：r, plot, legend

我必须绘制 20 个图并在每个图中水平放置一个图例。

我为第一个情节给出了以下命令：

```
plot(x=1:4,y=1:4)
legend("bottom",legend = c("a","b","c","d"),horiz=TRUE,text.font=2,cex=0.64) 
```

然后对于我尝试的第二个情节：

```
plot(x=1:2,y=1:2)
legend("bottom",legend = c("a","b"),horiz=TRUE,text.font=2,cex=0.64) 
```

但是因为传递给图例参数的字符向量的大小不同，所以我得到的图例大小不同。

由于我必须绘制许多不同大小的图例，因此我想以自动化的方式进行。

有没有办法可以固定所有图中图例的大小并使其适合图形大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:16:23.677

`par(cex=.64)`一开始就足够了

```
op <- par(cex=.64)  # this fix the legend size for all plots
plot(x=1:4,y=1:4)
legend("bottom",legend = c("a","b","c","d"),horiz=TRUE,text.font=2) # no need to set cex anymore
plot(x=1:2,y=1:2)
legend("bottom",legend = c("a","b"),horiz=TRUE,text.font=2)
par(op) # At end of plotting, reset to previous settings 
```

# android - 需要在单击应用程序图标时在 android 应用程序中恢复相同的视图

> ID：12777977
> 
> 赞同：3
> 
> 时间：2012-10-08T08:34:36.660
> 
> 标签：android, android-layout

我是android开发的新手。我正在开发一个 android 应用程序，其中我的视图很少，比如登录视图、视图 A、视图 B、视图 C 和视图 D 等。

我的初始视图是登录视图。用户输入他们的凭据，如果它们有效，将显示视图 A（针对特定用户角色）。

现在，用户单击手机主页按钮，现在我的应用程序正在后台模式下运行。

当用户点击我的应用程序图标时，它会显示登录视图。但实际上我需要显示视图 A。

为什么会这样？我没有找到任何错误堆栈跟踪。谁能告诉我我做错了什么。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:06:11.197

当应用程序重新启动时，再次调用 onCreate。如果你想保存你的状态，你应该使用 SharedPreferences 并将它们保存在 onPause 中。然后在 onResume 中调用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:18:19.870

您可以做几件事。通常你会覆盖 onSaveInstanceState(Bundle savedInstanceState)，例如

[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)

但是，当然，在您的情况下，您必须注意登录状态应该有效多长时间等。

# objective-c - MPMoviePlayerViewController 不工作

> ID：12777979
> 
> 赞同：1
> 
> 时间：2012-10-08T08:34:37.863
> 
> 标签：objective-c, automatic-ref-counting, mpmovieplayercontroller, modalviewcontroller

我一直在互联网上漫游以寻求解决方案，我真的不知道我在做什么错。几天以来我一直遇到这个问题。我将视频保存在应用程序应该可以访问的以下路径（对吗？）

```
//NSDocumentDirectory doesn't work either.
NSArray *newPath = NSSearchPathForDirectoriesInDomains(NSMoviesDirectory,
                                                       NSUserDomainMask, YES);
NSString *moviesDirectory = [NSString stringWithFormat:@"%@/WebSurg", 
                                                     [newPath objectAtIndex:0]];
// Check if the directory already exists
if (![[NSFileManager defaultManager] fileExistsAtPath:moviesDirectory]) {
    // Directory does not exist so create it
    [[NSFileManager defaultManager] createDirectoryAtPath:moviesDirectory 
                      withIntermediateDirectories:YES attributes:nil error:nil];
} 
```

我在应用程序的 tableView 中显示了这个目录的内容。点击一行时，它应该播放视频。但事实并非如此。它向我展示了 MPMoviePlayerViewController 模式视图，然后在大约 1 秒后将其隐藏。这是我用来播放它的代码：我尝试了两种获取路径的方法都无济于事。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSArray *moviesPath = NSSearchPathForDirectoriesInDomains(NSMoviesDirectory, 
                                                              NSUserDomainMask, YES);
    NSString *moviesDirectory = [NSString stringWithFormat:@"%@/WebSurg", 
                                                       [moviesPath objectAtIndex:0]];
    NSString *movie = [self.tableData objectAtIndex:indexPath.row];
    NSString *moviePath = [NSString stringWithFormat:@"%@/%@", 
                                                         moviesDirectory, movie];
    NSURL *movieURL = [NSURL fileURLWithPath:moviePath]; 
    NSLog(@"MOVIEPATH: %@", moviePath);

    NSString *alternatePath = [NSString stringWithFormat:@"%@/%@", 
                                            [[NSBundle mainBundle] resourcePath], movie];
    NSURL *alternateMoviePath = [NSURL fileURLWithPath:moviePath];
    movieViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:alternateMoviePath];
    movieViewController.moviePlayer.movieSourceType= MPMovieSourceTypeFile;
    NSLog(@"Movie Load State: %d", [[movieViewController moviePlayer] loadState]);
    NSLog(@"Alternate movie Path: %@", alternatePath);
    [self presentMoviePlayerViewControllerAnimated:movieViewController];
    [movieViewController.moviePlayer play];
    [self checkAndPlay];
}

- (void) checkAndPlay {
    if ([[self.movieViewController moviePlayer] loadState] == MPMovieLoadStateUnknown) { 
        [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:
                               @selector(checkAndPlay) userInfo:nil repeats:NO];
    } else {
        [self.movieViewController setModalTransitionStyle:
                                   UIModalTransitionStyleCrossDissolve];
        [self presentModalViewController:movieViewController animated:YES];
    }
} 
```

这些是控制台的结果：

```
2012-10-08 10:14:52.392 WebsurgTemplates[3722:17903] MOVIEPATH: /Users/THISISME/Library/Application Support/iPhone Simulator/5.0/Applications/E075DBE3-BFEA-4F6A-9DFA-2CC912E14863/Movies/WebSurg/FirstVideo.mp4
2012-10-08 10:14:52.459 WebsurgTemplates[3722:17903] Movie Load State: 0
2012-10-08 10:14:52.460 WebsurgTemplates[3722:17903] Alternate movie Path: /Users/THISISME/Library/Application Support/iPhone Simulator/5.0/Applications/E075DBE3-BFEA-4F6A-9DFA-2CC912E14863/WebsurgTemplates.app/FirstVideo.mp4 
```

我将不胜感激任何建议和帮助！

**更新**

到目前为止，我没有任何进展。我设法将一些其他数据记录到控制台，这些信息可能有助于解决这个问题。我试图制作一个空白项目，将视频的直接下载作为播放视频的链接，但它不起作用。发生的事情完全一样。jaydee3 说可能是因为我可能无法访问 NSMoviesDirectory。所以我改为 NSDocumentDirectory 但这并没有解决问题。我检查了该文件是否存在以及它的保存格式，以便播放器可以读取它。还是不行。我不知道我做错了什么。再次感谢您的建议/帮助。

这里是调试的结果。更完整：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:moviePath]) {
    NSLog(@"FILE EXISTS");
    CFStringRef fileExtension = (__bridge CFStringRef) [moviePath pathExtension];
    CFStringRef fileUTI = UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension, fileExtension, NULL);

    if (UTTypeConformsTo(fileUTI, kUTTypeImage)) NSLog(@"It's an image");
    else if (UTTypeConformsTo(fileUTI, kUTTypeMovie)) NSLog(@"It's a movie");
    else if (UTTypeConformsTo(fileUTI, kUTTypeText)) NSLog(@"It's text");
}

RESULTS
[6343:17903] MOVIEPATH: /Users/myname/Library/Application Support/iPhone Simulator/5.0/Applications/E075DBE3-BFEA-4F6A-9DFA-2CC912E14863/Documents/FirstVideo.mp4
[6343:17903] FILE EXISTS
[6343:17903] It's a movie 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:20:39.403

好的，所以我设法解决了问题并找到了罪魁祸首。

简而言之，这是因为下载的电影没有正确保存（我目前正在调查可能的原因）。正因为如此，播放器试图播放一个存在的文件，格式和名称都正确，但它是空的。我通过在下载、传输和播放后记录所有文件大小发现了这一点。

现在更具描述性的问题是我正在将电影下载到`NSCachesDirectory`然后将其保存到`NSDocumentDirectory`. 我发现这个是因为我开始怀疑它是否真的找到了该文件以及该文件是否“可食用”。它现在可以很好地播放电影，因为我将它直接下载到`NSDocumentDirectory`. 现在我必须解决以防万一连接中断。作为保存`NSCachesDirectory`自动解决。我对这方面的建议持开放态度。这是无法将数据从 to 传输的`NSCachesDirectory`代码`NSDocumentDirectory`：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains
                // HERE I changed NSCachesDirectory to NSDocumentDirectory fixed it
                            (NSDocumentDirectory, NSUserDomainMask, YES);
NSString *cachesDirectory = [paths objectAtIndex:0];
NSString *downloadPath = [cachesDirectory stringByAppendingPathComponent:
                                                  @"DownloadedVideo.mp4"];
NSArray *newPath = NSSearchPathForDirectoriesInDomains
                                  (NSDocumentDirectory, NSUserDomainMask, YES);
NSString *moviesDirectory = [NSString stringWithFormat:@"%@", 
                                                [newPath objectAtIndex:0]];
self.downloadOperation = [ApplicationDelegate.mainDownloader downloadVideoFrom:
                                    @"http://www.blablabla.web/iphone/download.php"                                    
                                            toFile:downloadPath]; 
```

# visual-studio-2010 - F# 子文件夹错误

> ID：12777989
> 
> 赞同：0
> 
> 时间：2012-10-08T08:34:55.397
> 
> 标签：visual-studio-2010, f#

如果我在 F# 项目中添加两个具有相同名称的子文件夹，则会收到此错误：

![F# 文件夹错误](../Images/46c0b1b3a650f1e6af3c0df3690c2c06.png)

文件夹结构为：

```
 <ItemGroup>
    <Compile Include="Test\File1.fs" />
    <Compile Include="SubFolder\Test\File2.fs" />
  </ItemGroup> 
```

有谁知道解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:25:29.787

确保你的项目中没有

```
<ItemGroup>
    <Compile Include="Folder1\File1.fs" />
    <Compile Include="SubFolder\Test\File2.fs" />
    <Compile Include="Folder1\another.fs" />
</ItemGroup> 
```

但反而

```
<ItemGroup>
    <Compile Include="Folder1\File1.fs" />
    <Compile Include="Folder1\another.fs" />
    <Compile Include="SubFolder\Test\File2.fs" />
</ItemGroup> 
```

（连续文件夹提及）

这会导致已报告的错误。如果您可以隔离并重现错误，请将其发送至 fsbugs@microsoft.com，该团队真的很关心这些 pb。

# java - 使用 Hibernate 保存列表更改

> ID：12777995
> 
> 赞同：3
> 
> 时间：2012-10-08T08:35:21.393
> 
> 标签：java, database, hibernate

我有一个名为 Token 的对象。它有 id、name 和 value。将一些数据保存到数据库后，我已将它们加载到网页中

```
_____________________________________________
|____name____|____value____|____operation____|
   tkn1          10               ×
   tkn2          20               × 
```

该`×`标志使我现在可以从服务器集合中删除令牌。我添加了值为 30 的令牌 tkn3 并删除`tkn2`了，因此该表将是：

```
_____________________________________________
|____name____|____value____|____operation____|
   tkn1          10               ×
   tkn3          30               × 
```

随着对集合的这些更改，我如何将它们反映到数据库中如何确定删除的记录和添加的记录？

我应用了两种解决方案：

1.  我在业务逻辑层比较了旧数据和新数据，并找到了然后发送到数据库的两个列表之间的差异，第一个包含添加的令牌，第二个包含要删除的令牌的 ID。
2.  我向对象添加了一个名为 status 的标志。当我添加标志为 NEW 时，我删除时我只是将标志设置为 DELETE，在 DB 层中，我一个接一个地遍历集合并检查标志。如果是 NEW 那么添加记录，如果 DELETE ，删除它，如果 SAVED （没有更改）我不做任何更改..

我的问题：

*   这种方式是否适合完成这项任务..？
*   是否有模式来完成这项任务？
*   Hibernate 可以帮助我做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:48:03.827

• 这种方式是否适合完成这项任务..？不

• 是否有模式来完成这项任务？是的

• Hibernate 可以帮助我做到这一点吗？Hibernate 使用 List 属性的 Cascade Attribute 为这种情况提供了解决方案

参考 [http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/collections.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/collections.html)

[http://www.mkyong.com/hibernate/hibernate-cascade-example-save-update-delete-and-delete-orphan/](http://www.mkyong.com/hibernate/hibernate-cascade-example-save-update-delete-and-delete-orphan/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:23:47.403

打击实体应该可以解决您的问题。

```
@Entity
public class MyEntity {

private static enum Status {
    NEW,
    PERSISTENT,
    REMOVED
}

@Id
private Long id;

private String name;
private int value;

@Transient
private Status uiStatus = Status.NEW;

public Long getId() {
    return this.id;
}

public String getName() {
    return this.name;
}

public Status getUiStatus() {
    return this.uiStatus;
}

public int getValue() {
    return this.value;
}

@PostLoad
public void onLoad() {
    this.uiStatus = Status.PERSISTENT;
}

public void setId(Long id) {
    this.id = id;
}

public void setName(String name) {
    this.name = name;
}

public void setUiStatus(Status uiStatus) {
    this.uiStatus = uiStatus;
}

public void setValue(int value) {
    this.value = value;
}
} 
```

# java - 发送 http post 请求不起作用

> ID：12777996
> 
> 赞同：0
> 
> 时间：2012-10-08T08:35:27.180
> 
> 标签：java, php, android, http-post

我正在制作一个 android 应用程序并在模拟器上运行它。当我发送 http post 请求时，服务器上的所有 post 参数都是空的。这是android应用程序中的代码：

```
public void run() {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(page);

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
        InputStreamReader inreader = new InputStreamReader(response.getEntity().getContent());
        BufferedReader reader = new BufferedReader(inreader);
        String line = "";
        while((line = reader.readLine()) != null){
            System.out.println(line);
        }

    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    }
} 
```

这是服务器上的代码：

```
<?php
print_r($_POST);
?> 
```

当我在模拟器上运行它时，它返回一个空的 php 数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:51:41.310

将 www 放入请求 url 中就解决了。有一个 htaccess 文件可以更正所有没有 www 的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T08:42:20.930

Volley 库（来自 google 的 sim-official）更好，http、https 等 [https://developers.google.com/live/shows/474338138](https://developers.google.com/live/shows/474338138)

这里有一个非常小的示例：
[https ://github.com/ogrebgr/android_volley_examples /blob/master/src/com/github/volley_examples/Act_SimpleRequest.java](https://github.com/ogrebgr/android_volley_examples/blob/master/src/com/github/volley_examples/Act_SimpleRequest.java)

这里有和你一样的问题：[Optimizing HTTP requests in android](https://stackoverflow.com/questions/18226697/optimizing-http-requests-in-android/18226899#18226899)

# android - 当textview为android调用setText方法时如何发出重绘事件？

> ID：12777997
> 
> 赞同：0
> 
> 时间：2012-10-08T08:35:26.677
> 
> 标签：android, events, textview, redraw

我们通常像这样**编写内部 OnClickListener**：

```
new OnClickListener (){
   void onClick(View v){
              if(v.getId()==R.id.textView1){
                 (TextView) findViewById(R.id.textView1).setText("123456789.......");
                }
    }
 } 
```

如果 textView1 视图**layout_width**和**layout_height**是**wrap_content**。在处理点击事件之后，可能需要重新测量和重新绘制 textView1 视图及其父视图。如何知道某些视图需要重新测量和重绘？有人提供事件链调度的更多详细信息吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:40:30.090

TextView 的setText 方法调用invalidate，导致remeasure 和redraw。