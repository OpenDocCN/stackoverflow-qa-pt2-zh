# StackOverflow 问答 14183000-14183999

# vb.net - 需要帮助减去 DateTimePicker

> ID：14183002
> 
> 赞同：1
> 
> 时间：2013-01-06T14:19:47.077
> 
> 标签：vb.net

我需要减去`DateTimePicker1 - DateTimePicker2`

```
DateTimePicker1 get infornet from The man who ran the software
DateTimePicker2 get infornet from The man who ran the software 
```

Datetimekiper 就像 ( `HH:mm d/M/y`)

日期是因为它可能需要 4 天。

所以小时可以是 72- 96

我只需要小时数和分钟数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:25:41.860

您需要处理`DateTime`值，而不是控件本身。

尝试这样的事情：

`Dim x = DateTimePicker1.value - DateTimePicker2.value`

然后这`x`将具有时间跨度，因此您可以获得这样的总小时数：

`Dim hours = x.TotalHours`

# android - 从网站加载数据时向我的应用程序添加进度条

> ID：14183003
> 
> 赞同：0
> 
> 时间：2013-01-06T14:19:52.507
> 
> 标签：android, android-asynctask

我有一个像这样扩展活动的简单类

```
public class About extends Activity
{
  private ProgressDialog pdia;
  private TextView tvAbout;
  private WebView vwAbout;
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.about);

    vwAbout = (WebView)findViewById(R.id.vwViewAbout);
    String content = new String();
    try {
        URL url = new URL("http://xxx.prodevAbout.txt");
        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
        String str;
        while ((str = in.readLine()) != null)
        {
            content+=str + "\n";
            vwAbout.loadData(content, "text/html", null);
        }
        in.close();
    } catch (Exception e)
    {
        vwAbout.loadData("error message", "text/html", null);
    }
  }
} 
```

我想要做的是我想在从网站加载内容时添加一个进度条，我找到了这段代码

```
 private ProgressDialog pdia;

 @Override
 protected void onPreExecute(){ 
    super.onPreExecute();
         pdia = new ProgressDialog(yourContext);
         pdia.setMessage("Loading...");
         pdia.show();    
 }

 @Override
 protected void onPostExecute(String result){
    super.onPostExecute(result);
         pdia.dismiss();
 } 
```

并添加了此代码，但无法解决 onPreExecute 方法我该怎么办？

谢谢;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:24:25.013

> 添加了此代码，但无法解决 onPreExecute 方法我该怎么办？

`onPreExecute`未解决，因为这是方法，`AsyncTask`因此需要扩展`AsyncTask`类以使用 onPreExecute 使用 AsyncTask 更改当前代码：

```
public class About extends Activity
{
   [...your code here...]
  public void onCreate(Bundle savedInstanceState)
  {

   [...your code here...]
   // execute AsyncTask as 
    new LongOperation(About.this).execute("");
  }
  [...your code here...]

   public class WebapiOperation extends AsyncTask<String, Void, String> {
     Context context;
     WebapiOperation(Context context){
     this.context=context;
    }
      @Override
      protected void onPreExecute() {
         // show ProgressDialog here
         pdia = new ProgressDialog(context);
      }
      @Override
      protected String doInBackground(String... params) {

             // make web service access task here
            return null;
      }      

      @Override
      protected void onPostExecute(String result) {  
            // ProgressDialog here
      }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:25:11.537

我在我的应用程序中添加进度对话框的方式（到目前为止我从未遇到任何问题）是这样的：

```
Runnable runable = new Runnable() {

        @Override
        public void run() {

            SofiaLiveCafeActivity.this.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                    if (Build.VERSION.SDK_INT > Build.VERSION_CODES.HONEYCOMB){
                        progressDialog = new ProgressDialog(SofiaLiveCafeActivity.this, ProgressDialog.THEME_HOLO_LIGHT);
                    } else {
                        progressDialog = new ProgressDialog(SofiaLiveCafeActivity.this);
                    }
                    progressDialog.setMessage("Loading! Pleasе wait...");
                    progressDialog.setIndeterminate(true);
                    progressDialog.show();
                }
            });

            // CONNECT TO SERVER AND DOWNLOAD DATA

            SofiaLiveCafeActivity.this.runOnUiThread(new Runnable() {

            @Override
            public void run() {

                    progressDialog.dismiss();

                }
            });
            }
        }
    };
    new Thread(runable).start(); 
```

# php - 使用分隔符迭代（foreach）的正确方法

> ID：14183005
> 
> 赞同：-1
> 
> 时间：2013-01-06T14:20:07.390
> 
> 标签：php, foreach

如果返回的项目不止一个，下面的 foreach 构造就可以正常工作。但是，如果仅显示一项，则分隔符 | 仍在保留。

我下面的代码有什么问题？

```
<?php 
foreach ($array->items as $item) {
       $len = count($item);
            if ($i < $len) {    
               print '<a href="' . $item->link . '">' . $item->title . '</a>' . ' | ';
            }

            else {  
               print '<a href="' . $item->link . '">' . $item->title . '</a>';
            }
        $i++;               
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T14:23:59.810

```
$echos=array();
foreach ($array->items as $item) {
    $echos[]= '<a href="' . $item->link . '">' . $item->title . '</a>';
}
print implode(' | ', $echos); 
```

# php - jquery/js 和 php 通信问题

> ID：14183014
> 
> 赞同：0
> 
> 时间：2013-01-06T14:21:07.463
> 
> 标签：php, javascript, jquery, ajax

我正在使用 jquery/JS 和 PHP 进行简单的客户端/服务器通信。它工作正常，直到 a`'.'`包含在数据中。

尝试使用以下标题：

*   `asdf-wq1 --> works`
*   `test1 --> works`
*   `bigip1.local --> '.' is replaced with '_'`

我已经将该`escape()`函数添加到我的代码中，但结果是一样的。

```
function xy(){
    for (var i = 0; i < nodes.length; i++) {
        var xy = escape(nodes[i].title) +"=" +escape(nodes[i].translate.x + "/" + nodes[i].translate.y);

        $.ajax({
            url: 'save_layout.php',
            data: xy,
            dataType: "text",
            type: 'post',
            success: function(output) {
                $("#output").html(output);
            },
            error: function (response, status, error) {
                alert("error" + response.responseText);
            }
        });
    }
} 
```

PHP：

```
foreach($_POST as $name=>$value) {
     echo "$name $value \n";
} 
```

Firebug 输出请求：

```
发布 http /frontend/save_layout.php

200 正常 186 毫秒   
jquery....min.js (Zeile 4)
HeaderPostAntwortHTML
参数application/x-www-form-urlencoded
bigip1.local 470/390

奎尔
bigip1.local=470/390

```

Firebug 输出（响应）：

```
bigip1_local 470/390

```

正如你所看到的——它似乎被正确地发送到了服务器，但在服务器上一读到我们的`$_POST`——`'.'`就`'_'`突然出现了。

希望有人可以在这里帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:44:10.233

您不应`data`手动将其转换为字符串。jQuery 就是这样做的。只需将对象而不是字符串传递给 Ajax 函数。

而且你永远不应该（**永远！**）使用`escape()`. 此功能已损坏，没有理由使用它。`encodeURIComponent()`如果您出于某种原因必须进行手动 URL 编码，请使用它。

```
function xy(nodes) {
    $.each(nodes, function (i, node) {
        $.post("save_layout.php", {
            title: node.title,
            x: node.translate.x,
            y: node.translate.y
        })
        .done(function (output) {
            $("#output").html(output);
        })
        .fail(function (response, status, error) {
            alert("error" + response.responseText);
        });
    });
} 
```

还要注意我对您的代码所做的一些其他更改，以使其在 jQuery 的上下文中更加惯用：

*   `nodes`是作为参数而不是全局变量传入的事实。这使得函数更加独立。
*   使用`$.each()`替换你的 for 循环。
*   使用显式`$.post()`而不是更通用的`$.ajax()`.
*   *所有数据都作为值*而不是键传递的事实。每个请求的键`title`, `x`,都是相同的。`y`这使服务器端（*和*客户端）的事情变得更容易。
*   可以附加到的使用和回调，因为它们`.done()`的性质是一个*承诺*。你可以[阅读更多关于](http://api.jquery.com/category/deferred-object/)[和 promises](http://api.jquery.com/category/deferred-object/)的内容，或者直接接受它——一种在 jQuery 中使用 Ajax 回调的非常方便的方法。`.fail()``.post()``.get()``.ajax()`*[`$.Deferred`](http://api.jquery.com/category/deferred-object/)*

 *您可能想要考虑将代码重构为对所有对象发出*一个*Ajax 请求，而不是对每个对象发出一个请求。HTTP 请求需要时间，最好将它们结合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:28:33.320

1.  不推荐使用逃逸。更好地使用 encodeURIComponent。
2.  你的情况只是使用 jQuery 功能

    ```
    for (var i = 0, l = nodes.length; i < l; i++) {

        var data = {};
        data[nodes[i].title] = nodes[i].translate.x + "/" + nodes[i].translate.y;

        $.ajax({
            url: 'save_layout.php',
            data: data,
            dataType: "text",
            type: 'post',
            success: function(output) {
                $("#output").html(output);
            },
            error: function (response, status, error) {
                alert("error" + response.responseText);
            }
        });

    } 
    ```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-06T14:26:34.537

在您的 javascript 代码中，您可以尝试使用

```
JSON.stringify(values); 
```

然后只是 json_decode() 在你的 php.ini 中。*

# wordpress - 在 WordPress 中显示特定类别的标签

> ID：14183021
> 
> 赞同：0
> 
> 时间：2013-01-06T14:22:38.773
> 
> 标签：wordpress, tags, tag-cloud

我正在使用下面的代码尝试显示与“html”类别中的帖子相关联的标签列表

```
<ul>
    <?php
        query_posts('category_name=bikes');
        if (have_posts()) : while (have_posts()) : the_post();
             if( get_the_tag_list() ){
                echo $posttags = get_the_tag_list('<li>','</li><li>','</li>');
            }
         endwhile; endif; 
         wp_reset_query(); 
    ?>
</ul> 
```

虽然我在运行它时没有看到任何结果，但我已经检查过并且有很多标签与该类别中的帖子相关联。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:33:18.937

您必须删除，`$posttags =`因为您不想分配变量但输出它

```
<ul>
    <?php
        query_posts('category_name=bikes');
        if (have_posts()) : while (have_posts()) : the_post();
           if( get_the_tag_list() ){
              echo get_the_tag_list('<li>','</li><li>','</li>');
           }
        endwhile; endif; 
        wp_reset_query(); 
    ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-01T21:36:41.650

获得所需结果的更好方法是根本不使用 query_posts。相反，使用新查询添加到您的循环中。如果我的类别被命名为摄影，我会使用这个：

```
<ul>
    <?php $photographyTags = new WP_Query(array('category_name' => 'photography')); ?>

    <?php if($photographyTags->have_posts()) : while($photographyTags->have_posts()) : $photographyTags->the_post(); ?>
    <?php
        if( get_the_tag_list() ){
            echo get_the_tag_list('<li>','</li><li>','</li>');
        }
    ?>
    <?php endwhile; endif; ?>
    <?php wp_reset_postdata(); ?>
</ul> 
```

# mysql - 每 1 分钟运行一次 php 脚本的 Cron 未连接到数据库

> ID：14183022
> 
> 赞同：0
> 
> 时间：2013-01-06T14:22:40.613
> 
> 标签：mysql, database, cron

我添加了以下 cron 命令，它运行良好。

```
php -q /home/****/***.com/****/check.php 
```

但是当我尝试添加数据库连接时

```
 define("DB_SERVER", "localhost");
 define("DB_USER", "system");
 define("DB_PASS", "***");
 define("DB_NAME", "system");

 mysql_connect(DB_SERVER, DB_USER, DB_PASS) or die(mysql_error());
 mysql_select_db(DB_NAME) or die(mysql_error()); 
```

或包含一个 db.php 文件 cron 停止运行，一旦我删除它数据库连接它再次工作，我不会收到任何错误。

完整代码

```
 define("DB_SERVER", "localhost");
 define("DB_USER", "system");
 define("DB_PASS", "***");
 define("DB_NAME", "system");

 mysql_connect(DB_SERVER, DB_USER, DB_PASS) or die(mysql_error());
 mysql_select_db(DB_NAME) or die(mysql_error()); 
 $result44 = mysql_query("SELECT * FROM table ") or die(mysql_error()); 
  while ($row = mysql_fetch_array($result44)) {
    if(time_elapsed_string($row['lastConnection']) >= 60){
    //mysql_query("UPDATE table SET powerStatus='-1' WHERE  id='".$row['id']."'") or die (mysql_error());

    }else{
        //mysql_query("UPDATE table SET powerStatus='1' WHERE  id='".$row['id']."'") or die (mysql_error());

    }
} 
```

为什么添加数据库连接时它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T16:58:30.837

请用：-

```
require_once(__DIR__."/../settings.php"); // PHP >=5.3
require_once(dirname(__FILE__)."/../settings.php"); // PHP <5.3 
```

参考：[通过 cron 运行的 PHP 脚本未连接到数据库](https://stackoverflow.com/questions/7514623/php-script-run-via-cron-does-not-connect-to-database)

# iphone - iOS 二进制本地化

> ID：14183023
> 
> 赞同：0
> 
> 时间：2013-01-06T14:22:45.590
> 
> 标签：iphone, ios, localization, ios6, app-store-connect

最近我通过引入西班牙语和德语翻译更新了我的 iOS 应用程序。将二进制文件上传到 iTunes Connect 后，在二进制详细信息页面上显示：

```
Localizations: ( "ca", "cs", "da", "de", "en", "es", "fi", "fr", "he", "hu", "it", "ja", "ko", "nb", "nl", "pl", "pt", "ru", "sk", "sv", "zh-Hans", "zh-Hant" ) 
```

而不仅仅是：

```
Localizations: ( "en", "es", "de" ) 
```

在更新获得批准后，我希望仅英语、西班牙语和德语在 iTunes 中显示为可用语言。目前的情况是正常的还是我必须改变一些东西？

**注意：**按照标准做法添加本地化：en.lproj、es.lproj 和 de.lproj 文件夹以及相应的 Localization.string 文件。一切都在 iPhone 模拟器和测试设备上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:24:06.570

第三方库倾向于将自己的本地化内容粘贴到您的二进制文件中。检查您没有使用第三方库，如果是，请检查他们的资源。您可能需要从那里清除那些额外的本地化。

# node.js - 正确的持久性技术

> ID：14183024
> 
> 赞同：3
> 
> 时间：2013-01-06T14:22:49.423
> 
> 标签：node.js, mongodb, redis, key-value-store, nosql

我们有一个在 nodejs 中运行的应用程序服务器，我们正在尝试替换我们当前的持久性技术（MySQL）。我们正在考虑几个 nosql 选项，例如 CouchDB、MongoDB、Redis、Riak 等。数据的大小不会很大（最大 1 Gb），单个服务器解决方案就可以了。

我们正在开发自己的转换/查询语言，为了有效地工作，我们的持久性技术最重要的要求是它在数据结构上的导航速度非常快；检索记录/文档/节点，查找它链接到的记录，然后检索其中一些。这是在 1 次转换中递归完成的，典型的转换将递归检索大约 100.00 条记录。

我看到了 3 个可能的解决方案方向

1) 使用 NoSQL 产品作为简单的键值存储，不要使用它们的任何高级功能，如聚合、过滤等（也许索引除外），并为每条记录逐一发送请求。

2）使用过程中的键值存储（Alfred？）（我认为这更有效，但这只是直觉，尚未进行实际测量）。

3）我们的转换引擎是用javascript编写的，并且转换本身被定义为一个复杂的JSON结构，所以我们可以将转换引擎存储为一个支持Javascript的nosql产品（如MongoDB）中的视图，并且每次我们想要做一个转换，我们发送 JSON 结构，让 nosql 服务器进行转换。

你能想到的最好的方向/产品是什么？

克，

科恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:28:01.760

Couchbase 不在您的列表中，但可以满足您的要求、Key/Value JSON 数据存储、极快且可扩展的性能。类似于 memcached（RAM 速度性能），但具有持久性后端。它实际上是从 memcached -> membase 服务器（具有持久性的分布式 memcached）-> Couchbase（许多新功能，包括索引和搜索）演变而来的。可以扩展到每秒数百万次操作。拥有许多大客户（即 Orbitz、Zynga、LinkedIn）和企业支持的开源软件。

[http://www.couchbase.com/](http://www.couchbase.com/)

# javascript - 在 AngularJS 中设置应用程序范围的 HTTP 标头

> ID：14183025
> 
> 赞同：47
> 
> 时间：2013-01-06T14:23:07.890
> 
> 标签：javascript, mvvm, angularjs

有没有办法在`$httpProvider`外面设置标题`angular.module('myApp', []).config()`？

登录用户后，我从服务器获取了一个 Auth-Token，我需要将它作为 HTTP 标头添加到所有后续请求中。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-11-29T23:08:42.620

**您可以为 angular 1.0.x**使用默认标题：

```
$http.defaults.headers.common['Authentication'] = 'authentication'; 
```

或请求 angular **1.1.x+**的拦截器：

```
myapp.factory('httpRequestInterceptor', function () {
  return {
    request: function (config) {

      // use this to destroying other existing headers
      config.headers = {'Authentication':'authentication'}

      // use this to prevent destroying other existing headers
      // config.headers['Authorization'] = 'authentication';

      return config;
    }
  };
});

myapp.config(function ($httpProvider) {
  $httpProvider.interceptors.push('httpRequestInterceptor');
}); 
```

由于工厂/服务是单例的，因此只要在服务实例化后不需要动态更改“身份验证”值即可。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-01-06T14:49:22.377

```
$http.defaults.headers.common['Auth-Token'] = 'token'; 
```

它似乎`headers()`规范了键名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-14T10:40:51.887

添加到@Guria 和@Panga 的上述回复

```
config.headers['X-Access-Token'] = $window.sessionStorage.token; 
```

可以在标头中使用 x-access-token 作为 JWT(jsonwebtoken)。当用户第一次进行身份验证时，我将 JWT 存储在会话存储中。

# linux - Xen二进制重写方法

> ID：14183029
> 
> 赞同：0
> 
> 时间：2013-01-06T14:23:21.797
> 
> 标签：linux, virtualization, xen

在全虚拟化中，guest OS 的 CPL 是什么？在半虚拟化中，来宾操作系统的 CPL 为 1（环 1）在完全虚拟化中是否相同？

而且我听说有些x86特权指令不容易处理，因此需要“二进制重写”方法......

这种“二进制重写”是如何发生的？我知道在虚拟化中，CPU 不是模拟的。那么管理程序如何在 CPU 执行二进制指令代码之前更改它们？他们是否预测内存上的下一条指令并在 CPU 到达之前更新内存内容？如果这是真的，我认为管理程序代码（执行二进制重写）每次都需要在执行客户操作系统的某些指令之前拦截 CPU。我认为这是荒谬的。

具体解释将不胜感激。先感谢您..！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:43:40.610

如果完全虚拟化是指硬件支持的虚拟化，那么来宾的 CPL 与它在裸机上运行时的 CPL 相同。

Xen 从不重写二进制文件。

这是VMWare（据我所知）。据我所知（但我从未见过 VMWare 源代码），该方法基本上包括对需要以不同方式运行的代码进行运行时修补——通常，这涉及用其他东西替换现有的操作码——要么导致虚拟机管理程序的陷阱，或“做正确的事”的替换代码集。如果我理解这在 VMWare 中是如何工作的，那就是管理程序通过单步执行一个块来“学习”代码，然后应用二进制补丁或将该部分标记为“清晰”（不需要更改）。下次执行此代码时，它已经被修补或清除，因此它可以“全速”运行。

在 Xen 中，使用半虚拟化（环形压缩），操作系统中的代码已被修改以了解虚拟化环境，因此可以“信任”理解某些事情。但是管理程序仍然会捕获例如对页表的写入（否则有人可能会编写一个恶意内核模块来修改页表以映射到另一个客户的内存中，等等）。

HVM 方法确实拦截了某些指令 - 但其余代码以正常全速运行，这要归功于现代处理器中的硬件支持，例如 AMD 中的 SVM 和 Intel 处理器中的 VMX。ARM 在其最新型号的处理器中拥有类似的技术，但我不确定它的名称是什么。

我不确定我是否已经回答了你所有的问题，如果我遗漏了什么，或者不够清楚，请随时问...

# hadoop - 如何管理 Hadoop 集群

> ID：14183034
> 
> 赞同：0
> 
> 时间：2013-01-06T14:24:04.017
> 
> 标签：hadoop

我正在运行 4 个节点的 hadoop 集群，我正在询问远程管理该集群的任何方法

例如

从我的笔记本电脑管理集群

*   执行 MapReduce 任务
*   禁用或启用数据节点

有没有办法远程做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T01:08:33.267

如果您使用的是 Cloudera 发行版，Cloudera Manager webapp 会让您这样做。其他发行版可能有类似的控制应用程序。这将为您提供每个节点的控制权。

对于执行 MR 任务，您通常会设置通常从外部节点提交作业，指向正确的 JobTracker 和 NameNode。所以我不确定你还在那里要求什么。

# php - 删除所有文件，包括超过 3 个月 PHP 的子目录中的文件

> ID：14183035
> 
> 赞同：0
> 
> 时间：2013-01-06T14:24:05.303
> 
> 标签：php

我的网络服务器上有一个“缓存”文件夹，用于存储 .html 文件，文件结构如下：

```
cache > user@gmail.com > several .html files. 
```

我需要一个 PHP 脚本来浏览用户文件夹中的所有子目录并删除超过 3 个月的文件。

到目前为止，我有这个脚本：

```
$DIR = '/cache/';
if ($handle = opendir($DIR)) {

    while (false !== ($file = readdir($handle))) {
        if ( filemtime($DIR.$file) <= time()-60*60*24*120 ) { //120 days?
           unlink($DIR.$file);
        }
    }

    closedir($handle);
} 
```

但它不处理子目录。它也给了我错误，因为它试图取消链接目录..

更新：尝试添加计数功能：

```
<?php

rrmdir(/www/deletecontentsofthisfolder/);
echo $count . ' files deleted!';

function rrmdir($dir,$count=0) 
{
    if (is_dir($dir)) 
    {
        $objects = scandir($dir);
        foreach ($objects as $object) 
        {
            if ($object != "." && $object != "..") 
            {
                if (filetype($dir."/".$object) == "dir") rrmdir($dir."/".$object,$count);
                if (filemtime($dir."/".$object) <= time()-60*60*24*120) @unlink($dir."/".$object); count++
            }
        }
        reset($objects);
        //rmdir($dir);
    }
return $count;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T14:32:01.937

```
function rrmdir($dir) 
{
    if (is_dir($dir)) 
    {
        $objects = scandir($dir);
        foreach ($objects as $object) 
        {
            if ($object != "." && $object != "..") 
            {
                if (filetype($dir."/".$object) == "dir") rrmdir($dir."/".$object);
                if (filemtime($dir."/".$object) <= time()-60*60*24*120) @unlink($dir."/".$object);
            }
        }
        reset($objects);
        //rmdir($dir);
    }
} 
```

# jquery - Jquery 点击事件问题（使用切换）

> ID：14183036
> 
> 赞同：2
> 
> 时间：2013-01-06T14:24:06.123
> 
> 标签：jquery

基本上我有一个名为#main-minicab-service、#main-courier-service 和#main-removal-service 的三个div（按钮）。单击这些按钮时，它们会显示相应的页面并隐藏以下 div：#img-onlinebooking、#main-online-booking 和 #main-onlinebooking-logo

当您再次单击该按钮时，它会再次显示#main-online-booking div。虽然这在一定程度上是有效的，但是当您（例如）单击 minicab 服务按钮然后单击 courier 按钮时，它不起作用。

为了让您了解我要实现的目标，我将向您展示一张图片：

![在此处输入图像描述](../Images/8690eafa56336b3381ec4d702e3af960.png)

基本上，我想要发生的是，如果您单击`minicab service`按钮，它会显示`#main-minicab-service`div。如果`minicab service`再次单击该按钮，则会显示三个在线预订 div。这部分工作正常，但是，如果我`minicab service`先单击按钮然后单击`courier service`按钮，它会`#main-courier-service`再次显示选项卡。但是，如果我然后单击该`minicab service`按钮，它将显示在线预订选项卡，我希望它显示#main-minicab-service` div。

我认为唯一需要修复的部分是我希望它仅在单击两次相同按钮时才显示在线预订 div，否则显示被单击的 div。

我希望这是有道理的，这是我现在拥有的 jquery：

```
 /*  Click Events for Buttons */

        /* Courier */

      $("#img-courier").toggle(
        function(){ 

        $('#main-removal-service').hide();
        $('#main-minicab-service').hide();
        $('#img-onlinebooking').fadeOut('slow');
        $('#main-online-booking').fadeOut('slow');
        $('#main-onlinebooking-logo').fadeOut('slow');
        $('#main-courier-service').delay(600).fadeIn('slow');},

        function(){
        $('#main-removal-service').hide();
        $('#main-minicab-service').hide();
        $('#img-onlinebooking').show();
        $('#main-online-booking').show();
        $('#main-onlinebooking-logo').show();
        $('#main-courier-service').hide();
      });

       /* Minicab */

      $("#img-minicab").toggle(
        function(){ 

        $('#main-removal-service').hide();
        $('#main-courier-service').hide();
        $('#img-onlinebooking').fadeOut('slow');
        $('#main-online-booking').fadeOut('slow');
        $('#main-onlinebooking-logo').fadeOut('slow');
        $('#main-minicab-service').delay(600).fadeIn('slow');},

        function(){
        $('#main-removal-service').hide();
        $('#main-courier-service').hide();
        $('#img-onlinebooking').show();
        $('#main-online-booking').show();
        $('#main-onlinebooking-logo').show();
        $('#main-minicab-service').hide();

      });

      /* Removal */

      $("#img-removal").toggle(
        function(){ 

        $('#main-minicab-service').hide();
        $('#main-courier-service').hide();
        $('#img-onlinebooking').fadeOut('slow');
        $('#main-online-booking').fadeOut('slow');
        $('#main-onlinebooking-logo').fadeOut('slow');
        $('#main-removal-service').delay(600).fadeIn('slow');},

        function(){
        $('#main-minicab-service').hide();
        $('#main-courier-service').hide();
        $('#img-onlinebooking').show();
        $('#main-online-booking').show();
        $('#main-onlinebooking-logo').show();
        $('#main-removal-service').hide();

      }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:29:12.960

你的代码耦合太紧了。在您的代码中，每个元素都必须了解其他元素。您已经看到只有 3 个元素的大问题。如果你有 50 个元素而不是 3 个元素，那将是一场真正的灾难。您必须重做您的代码以更加模块化。将此作为起点：

```
 var allCourierElements = $(".myCourierElement");
    var allCabElements = $(".myCabElement");
    var allWhateverElements = $(".myWhateverElement");
    var allElements = $(".myElement");

    //so in your html, a valid cab element to be hidden or shown
    // would be, for instance:
    //<div class= "myElement myCabElement"></div>

    function func1(event)
    {

       allElements.hide();
       allCourierElements.show();

    }

    function func2(event)
    {

       allElements.hide();
       allCabElements.show();

    }

    function func3(event)
    {

       allElements.hide();
       allWhateverElements.show();

    }

    $("#img-courier").on('click', func1);
    $("#img-minicab").on('click', func2);
    $("#img-whatever").on('click', func3);
    //and so on 
```

# facebook - 通过 API 的 Facebook 智能好友列表

> ID：14183041
> 
> 赞同：3
> 
> 时间：2013-01-06T14:25:06.217
> 
> 标签：facebook, http, facebook-graph-api

尝试通过 API 在**智能**（自动生成）好友列表中检索好友，但未返回任何数据。

通过图形浏览器：`/<friendlist id>?fields=members`

如果这是一个自定义列表（不是自动生成的），则返回：

```
{
  "id": "<friendlist id>", 
  "members": {
    "data": [
      {
        "id": "<friend id>", 
        "name": "<name>"
      }
    ]
  }
} 
```

但是，使用自动生成的列表，我似乎只得到了 id 而没有成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:24:38.750

这似乎是*智能列表*的一个已知错误：

[http://developers.facebook.com/bugs/471978009483097/](http://developers.facebook.com/bugs/471978009483097/)

# javascript - JQuery Mobile 可折叠不适用于 div

> ID：14183046
> 
> 赞同：0
> 
> 时间：2013-01-06T14:25:49.307
> 
> 标签：javascript, jquery

我对 JQuery 和 Javascript 都很陌生。我有一个提要，我想将这些提要显示在可折叠 div 中作为可折叠 div。我有以下 Javascript 文件：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script> 
<script type="text/javascript">
    google.load("feeds", "1");
    google.setOnLoadCallback(showFeed);

    function showFeed() {
      var feed = new google.feeds.Feed("http://www.varzesh3.com/rss");
      feed.setNumEntries(10);
      feed.load(function(result) {
        if (!result.error) {
          var container = document.getElementById("headlines");
          for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];
            var di = document.createElement("div").setAttributeNode("data-role", "collapsible");
            di.innerHTML = '<h3>' + entry.title + '</h3>';
            di.innerHTML += '<p>' + entry.contentSnippet + '</p>';
            container.appendChild(di);
          }
        } else {
            var container = document.getElementById("headlines");
            container.innerHTML = '<li>Get your geek news fix at site</li>';
        }
      });
    }
</script>

<body>
    <div data-role="collapsible-set" id="headlines"></div> 
</body> 
```

这应该获取我所有的提要名称并将它们放在一个可折叠的 div 中，它确实做到了，但它将名称显示为纯 HTML 文本而不是 JQuery Mobile 可折叠 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:48:43.187

@AML，这更像是评论而不是答案，因为不要分析您的整个代码，但我会放在这里以进行格式化。

在行中：

```
var di = document.createElement("div").setAttributeNode("data-role", "collapsible"); 
```

您不需要将指针（di）指向新创建的元素，而是获取 setAttributeNode（...）的结果，您需要将代码分成两行，如下所示：

```
var di = document.createElement("div");
di.setAttribute("data-role", "collapsible"); 
```

* * *

setAttributeNode 有一个问题其实就是 setAttribute。现在正在工作，请参阅[http://pannonicaquartet.com/test/feeds.html](http://pannonicaquartet.com/test/feeds.html)

```
<head> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
<style type="text/css">
    .collapsible{
        display : none;
    }
    h3{
        background-color : lightgray;
    }
</style>
    <script src="https://www.google.com/jsapi" type="text/javascript"></script>
<script type="text/javascript">
    google.load("feeds", "1");

    function showFeed() {
      var feed = new google.feeds.Feed("http://www.varzesh3.com/rss");
      feed.load(function(result) {
        if (!result.error) {
          var container = document.getElementById("headlines");
          for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];
            var div = document.createElement("div");
            div.onclick = function(evt){
                var elP = this.children[1];
                if(elP.style.display == 'inline'){
                   elP.style.display = 'none';
                }else{
                   elP.style.display = 'inline';
                }
            };
            div.innerHTML = '<h3>' + entry.title + '</h3>';
            div.innerHTML += '<p class="collapsible">' + entry.contentSnippet + '</p>';
            container.appendChild(div);
          }
        }
      });
    }

    google.setOnLoadCallback(showFeed);

</script> 
```

# algorithm - 了解算法的时间复杂度

> ID：14183049
> 
> 赞同：2
> 
> 时间：2013-01-06T14:26:11.603
> 
> 标签：algorithm, complexity-theory, big-o

我刚刚开始学习大 O 概念。我学到的是，如果函数 f 小于或等于函数 g 的另一个常数倍数，则 f 为 O(g)。

现在我遇到了一个示例，其中大小为“n”的字符串采用“2n”（输入大小的两倍）算法步骤。所以他们说所花费的时间是 O(2n)，但是他们按照这个说法说 As O(2n)=O(n)，时间复杂度是 O(n)。

我不明白这一点。由于 2n 总是大于 n，那么我们怎么能忽略 2 的倍数呢？任何小于或等于 2n 的都不一定小于 n！

这是否意味着我们在某种程度上将 n 和 2n 等同起来？听起来很混乱。请以最简单的方式澄清，因为我只是这个概念的初学者。此致 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:01:44.433

Big-O and related notations are intended to capture the aspects of algorithm performance that are most inherent to the algorithm, independent of how it is being run and measured.

Constant multipliers depend on the unit of measurement, seconds vs. microseconds vs. instructions vs. loop iterations. Even measured in the same units they will be different if measured on different systems. The same algorithm may take 20n instructions in one instruction set, 30n instructions on another. It may take 0.5n microseconds on one, 10n microseconds on another.

Many of the basic algorithm complexities you will see in the literature were calculated decades ago, but remain meaningful across significant changes in processor architecture and even more significant changes in performance.

Similar considerations apply to start-up and similar overheads.

A `f(n)` is `O(n)` if there exist constants N and c such that, for all `n>=N, f(n) <= cn`. For f(n) = 2n the constants are `N=0` and `c = 2`. The first constant, N, is about ignoring overhead, the second, c, is about ignoring constant multipliers.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T14:38:59.400

*... As 2n will always be greater than n, how can we ignore the multple of 2 then? ...*

Simply put, with growing `n` the multiplier loses its importance. The *asymptotic* behavior of a function describes what happens when `n` gets large.

Maybe it helps to consider not just `O(n)` and `O(2n)`, because they are in the same class, but to contrast it with some [other common classes](http://en.wikipedia.org/wiki/Time_complexity#Table_of_common_time_complexities). Example: Any `O(n^2)` algorithm will take longer than any `O(n)`, **in the long run** (in the short run, their running times might even be reversed). Say you have two algorithms, one with linear time complexity of `100n` and another with `8n^2`. The quadratic algorithm will be faster for all `n =< 12`, but slower for all `n > 12`.

This property – that for **any** fixed nonnegative `c` and `d` you'll find an `n`, so that `cn < dn^2` – constitues a part of the hierarchy of time complexities.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T14:50:45.893

正如您在第一段中提到的那样，执行算法所需的时间与输入大小的恒定倍数成正比。您可以将 O(n) 视为 O(C*n)，其中 C 是任何*常数*乘数。

# python - python找不到属性Thread

> ID：14183050
> 
> 赞同：0
> 
> 时间：2013-01-06T14:26:12.023
> 
> 标签：python, multithreading

我的python代码是这样的：

```
#!/usr/bin/env python
import threading
from time import sleep,ctime
loops=[4,2]

def loop(nloop,nsec):
    print 'start loop',nloop,'at:',ctime()
    sleep(nsec)
    print 'loop',nloop,'done at:',ctime()

def main():
    print 'starting at:',ctime()
    threads=[]
    nloops = range(len(loops))

    for i in nloops:
        t = threading.Thread(target = loop, args = (i,loops[i]))
        threads.append(t)
    for i in nloops:
        threads[i].start()
    for i in nloops:
        threads[i].join()
    print 'all Done at:',ctime()
if __name__ == '__main__':
    main() 
```

但python输出是：

```
t = threading.Thread(target = loop, args = (i,loops[i]))
AttributeError: 'module' object has no attribute 'Thread'
Exception AttributeError: '_shutdown' in <module 'threading' 
```

我重新安装了python，但这个问题仍然存在，如何解决？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-06T14:27:28.327

我敢打赌你有一个名为 的本地文件`threading.py`，它掩盖了系统`threading`模块。

您可以通过打印来验证这一点`threading.__file__`：

```
import threading
print threading.__file__ 
```

获取正在导入的模块的文件路径。

重命名或删除它以解决此问题。

# jekyll - 同时运行多个 jekyll 应用

> ID：14183051
> 
> 赞同：4
> 
> 时间：2013-01-06T14:26:22.600
> 
> 标签：jekyll, foreman

我想知道是否可以同时运行多个 jekyll 应用程序。我已经安装了工头，但是当另一个已经在运行时，它似乎无法更改应用程序端口。

目前我必须在 Procfile 中手动设置 jekyll 端口

```
web: jekyll --server 5000 
```

无论如何可以自动执行此操作吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-20T20:34:24.573

我想我有点晚了，但这里是那些有同样问题的人的答案。与 Ruby on Rails 一样，`--port 3000`可以使用该命令。所以它看起来像这样：

```
$ jekyll serve --port 8888 
```

**编辑：**`port: 8888`如文档中所述，您也可以简单地在文件中添加选项`_config.yml`。

### 新生成的文件如下所示：

```
name: Your New Jekyll Site
pygments: true
port: 8888 
```

*此处以 8888 端口为例*

### 延伸阅读：

*   [Jekyll 配置](http://jekyllrb.com/docs/configuration/#serve-command-options)

* * *

> 这些只是一些可用的配置选项。许多配置选项可以在命令行上指定为标志，或者（更常见）它们可以在源目录根目录的 _config.yml 文件中指定。Jekyll 将在运行时自动使用该文件中的选项。例如，如果您将以下行放在`_config.yml`文件中：
> 
> ```
> source:      _source
> destination: _deploy 
> ```
> 
> 那么以下两个命令将是等价的：
> 
> ```
> $ jekyll build
> $ jekyll build --source _source --destination _deploy 
> ```

所以使用命令行

```
jekyll serve --port 8888 
```

相当于放入`port: 8888`您的_config.yml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:15:08.220

当然。正如您的问题已经暗示的那样，只需在不同的服务器端口上运行不同的实例（使用 5000 而不是默认的 4000）。请记住，如果您不想在运行命令中指定服务器（以及所有[其他命令行选项](https://github.com/mojombo/jekyll/wiki/Configuration)），则可以在文件中指定它。`_config.yml`请澄清我是否误解了这个问题。

# android - 在android中设置主页按钮的操作

> ID：14183052
> 
> 赞同：1
> 
> 时间：2013-01-06T14:26:26.983
> 
> 标签：android

如何更改 android 中主页按钮的工作？我想在单击主页按钮时执行一些操作，然后该应用程序应该进入后台。我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:30:36.830

编写您自己的主屏幕。当用户按下 HOME 时，他们将可以选择运行您的应用程序或内置主屏幕。他们可以选择只选择一次，或者从现在开始将任一应用程序设置为默认应用程序。许多人会想知道为什么您决定决定实施主屏幕。

大多数开发人员关心他们的活动移动到后台的任何情况，在这种情况下，您可以使用生命周期方法（例如`onPause()`，，`onStop()`）或尝试`onUserLeaveHint()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:31:40.907

您是否尝试过覆盖 onKeyDown()

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_HOME) {
        // ENTER CODE HERE
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T14:38:43.363

我这样做：

```
/* Handles item selections */
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:    
                    //You can do whatever you want here       
            Intent homeInt = new Intent(this, SomeActivity.class);
            startActivity(homeInt);
            return true;
        }
        return false;
    } 
```

# iphone - 如何在 iOS 应用中添加文本区域

> ID：14183056
> 
> 赞同：3
> 
> 时间：2013-01-06T14:26:52.617
> 
> 标签：iphone, ios6, uitextfield, uitextview

我是 iPhone 应用程序的新手。我想添加文本区域。我知道如何添加 textField，但是有人可以帮助我如何在我的 iPhone 应用程序中使用 Textare？

我想，我可以增加文本字段的高度并使其成为多行，但是该选项不存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T14:30:36.613

您不能增加 UITextField 的高度。为此，您需要使用 UITextView。在您获得 UITextField 的界面构建器中，还有一个 UITextView 选项。您可以在 iPhone 中使用与 UITextField 相同的 UITextView。UITextView 用于多行

```
UITextView  *txt = [[UITextView  alloc]init];

//set frame

//add on view

[self.view addSubView:txt];

[txt release]; 
```

我希望这可以解决您的问题[TextView 的示例代码](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_uitextview_uitextviewdelegate_2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-07T10:49:57.900

```
UITextView  *txt = [[UITextView  alloc]initwithframe:CGRectMake(x, y, width,height)];

[self.view addSubView:txt];

[txt release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T21:23:36.197

您可以通过单击`Mainstoryboard.storyboard`或`viewController.xib`并拖动来简单地做到这一点`UITextView`这将允许多行文本。如果您需要访问 Textview，请键入：

```
.h file

{
  IBOutlet UIITextView *textView;
}

 @property (nonatomic, strong) IBOutlet UITextView* textView;

.m file
@synthesize textView; 
```

编辑

获取用户数据，在故事板中连接插座，

然后使用：

```
-(void)getUserText{
NSLog@"%@", self.textView);

} 
```

这应该打印出用户在 textView 中输入的任何内容。

# c++ - 当你有一个虚拟析构函数时，基类指针中的“删除这个”会删除派生类对象吗？

> ID：14183057
> 
> 赞同：3
> 
> 时间：2013-01-06T14:27:15.067
> 
> 标签：c++, oop, object, virtual-destructor

我有一个三层深的类层次结构，如下所示：

```
class A {
public: 
    virtual ~A() {}

}

class B : public A {
public:
    virtual ~B() {}
    void foo(E *e) {
        e->remove(this);
    }
}

class C : public B {
public:
    ~C() {}
}

class E {
public:
    void remove(A *a) {
        delete a;
    }
} 
```

好的，所以我想知道的是当我`foo()`调用`C`. 它是要删除整个对象还是只删除对象的一部分，`B`并将`A`部分留`C`在内存中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T14:33:46.347

> 它是要删除整个对象还是只删除对象的 B 和 A 部分，而将 C 部分留在内存中？

不。它会“做正确的事”（即删除最派生的子对象，运行其所有析构函数等）提供`A`（即指针指针的静态类型 you `delete`）具有虚拟析构函数（如果类`A`有一个虚拟析构函数，它的所有后代也有它）。这也适用于多重继承。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T14:41:00.903

`delete`将始终释放指向的整个对象的内存。但是，这不适用于被调用的析构函数：它将尝试调用要删除的对象的静态类型的析构函数。在多态场景中，这通常不是您想要的。考虑一下：

```
struct Base { };

struct Derived : Base
{
    int* i;

    Derived() : i(new int) { }

    ~Derived() { delete i; }
}

void bad()
{
    Base* b = new Derived;
    delete b;
} 
```

`bad()`导致内存泄漏，因为`Derived`s 析构函数永远不会被调用。这是因为 b 的静态类型是`Base*`，因此`Base::~Base`会被调用。中没有定义析构函数`Base`，因此执行编译器提供的默认实现，在这个特定示例中什么都不做。

但是，这不适用于您的示例：您将根类的析构函数设为虚拟，因此所有派生类的析构函数都将作为析构函数调用的一部分执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T14:34:45.190

多亏`A`了代码中的虚拟析构函数才能正确地销毁`C`.

# google-app-engine - 如何仅为特定文件夹部署我的 GAE 项目？

> ID：14183061
> 
> 赞同：3
> 
> 时间：2013-01-06T14:27:53.783
> 
> 标签：google-app-engine, deployment

我想知道如何仅为特定文件夹部署我的 Google App Engine 项目？

例如，如果我的项目源文件夹是“src”，并且在这个 src 文件夹中有很多子文件夹。说，我有 css、app、images 和 js 文件夹，但我只想将 css、app 和 images 文件夹部署到 GAE，我希望 GAE 在部署期间忽略 js 文件夹，有什么办法可以这样做在 app.yaml 文件中设置？

谢谢！

乔尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T14:52:11.310

Have a look at `skip_files`

[Skipping Files](https://developers.google.com/appengine/docs/python/config/appconfig#Skipping_Files)

> Files in your application directory whose paths match a static_dir path or a static_files upload path are considered to be static files. All other files in the application directory are considered to be application program and data files.
> 
> The skip_files element specifies which files in the application directory are not to be uploaded to App Engine. The value is either a regular expression, or a list of regular expressions. Any filename that matches any of the regular expression is omitted from the list of files to upload when the application is uploaded.

# asp.net - 拒绝访问端口“COM4”

> ID：14183063
> 
> 赞同：0
> 
> 时间：2013-01-06T14:28:07.623
> 
> 标签：asp.net, iis, serial-port

我正在使用 arduino（一些微控制器），并制作了一个 ASP.net 页面与它进行通信。我将arduino连接到串口COM4。当我运行 ASP.net 网站时，我收到以下错误：

异常详细信息：System.UnauthorizedAccessException：对端口“COM4”的访问被拒绝。

ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 和 IIS 7 上的网络服务，以及 IIS 7.5 上配置的应用程序池标识），如果应用程序不是模拟的，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。

要授予 ASP.NET 对文件的访问权限，请在资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的复选框。

现在我知道这听起来像是解决方案就在那里：“授予asp.net访问...”但我不知道他们在谈论什么文件！那么请有人指出解决方案吗？PS：我首先做了一个 Windows 窗体应用程序，它工作。所以没有其他东西使用COM4。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:25:53.603

忽略 Web 应用程序应该与服务器上的 COM 端口通信这很奇怪，问题如下：默认情况下，IIS 中的 ASP.NET 应用程序在低权限用户下运行（如错误消息中所指定）。不允许该用户访问该端口。
控制台应用程序在启动它的用户下运行。我假设那是你，你是机器上的管理员。

要让 ASP.NET 执行相同的打开 IIS（开始 - 运行 - inetmgr），请选择“应用程序池”，选择运行 Web 应用程序的应用程序池，单击“高级设置”，将“身份”字段设置为你的用户。重新启动应用程序池并启动 Web 应用程序。

# flash - 如何通过坐标单击按钮来移动影片剪辑

> ID：14183065
> 
> 赞同：0
> 
> 时间：2013-01-06T14:28:22.037
> 
> 标签：flash, loops, actionscript-2, coordinates, game-physics

我在 AS2 中遇到问题，我正在制作一个 Flash 游戏，通过单击一个按钮，您应该能够向上移动一个电影剪辑。这里的问题是我知道该怎么做：

```
 on(press){
example._y-=10;
} 
```

但我想逐渐向上移动它，就像一个坐标一个坐标直到它达到十，给一点动画。我也不想要任何补间动画，因为影片剪辑已经与其他东西共享代码，所以不要让它变得复杂。我尝试了循环，但效果不佳，这是代码：

```
on (press) {

    var i = 1;
    while (i < 10)
    {
        _root.example._y-=1;
        i++;
    }
} 
```

我实际上不擅长循环，我只是把它从互联网上取下来。因此，也许您可​​以帮助我纠正循环代码，或者您可以通过使用任何其他技术来帮助我，但无论如何，它一定与补间动画无关，它应该只改变特定的变量影片剪辑。

如果您想要我正在创建的文件，请回复，谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:53:13.697

If you change the _y property repeatedly in a while loop you will not see the change as an animation (flash will run the code and update the screen when the script has finished, so it will jump to the end position immediately).

Instead, you can change the value on each new frame until the new position has been reached:

```
on (press) {
    var moveCount = 10;

    _root.example.onEnterFrame = function() {
        moveCount--;

        if (moveCount > 0) {
            this._y--;
        } else {
            delete this.onEnterFrame;
        }
    }
} 
```

Also, it is highly recommended that you don't have a lot of code in the on(press) handler but create a new function and call that instead. Makes it easier to reuse and maintain the code.

# java - Java并发修改

> ID：14183070
> 
> 赞同：2
> 
> 时间：2013-01-06T14:28:50.437
> 
> 标签：java, concurrency

我有以下代码：

```
System.out.println(dislist.size());

for (int k = 0; k < 10; k++) {
    System.out.println(k + dislist.get(k).first + dislist.get(k).second);

    if (!dislist.get(k).first.equals(Nodename)) {
        if (dislist.get(k).first.equals(myfirst) ||
            dislist.get(k).first.equals(mysecond) ||
            dislist.get(k).second.equals(myfirst) ||
            dislist.get(k).second.equals(mysecond)) {
                dislist.remove(k);                    
            }
        }
    }
} 
```

问题是：开头的打印清楚地说`dislist.size()`是 10。但是，我得到一个数组越界异常，告诉我列表的大小不超过 6。是的，我确实将新对象添加到在此之前列出几行。我猜当循环开始时还没有完成。有没有办法强制 Java（在同一方法中）仅在列表中确实有 10 个对象时才开始循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T14:32:25.087

当您迭代它时，您正在从 List 中删除元素。这就是尺寸发生变化的原因。

`dislist.remove(k);`

创建一个新列表，然后将要删除的每个元素添加到其中。循环完成后，使用`disList.removeAll(listOfElementsToRemove)`一次将它们全部删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T14:40:53.667

```
Iterator<YourClass> iter = dislist.iterator();
while (iter.hasNext()) {
     YourClass obj = iter.next();
     if (/* your expression */) {
          iter.remove();
     }
} 
```

# javascript - 删除所有标记并使用过滤器替换为新集

> ID：14183075
> 
> 赞同：0
> 
> 时间：2013-01-06T14:29:09.210
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

您好我正在尝试创建一个 jquery/javascript 函数，该函数将作为标题状态删除我的所有标记`var markersArray`并在我的 php 脚本中请求以呈现新标记。我很难做到这一点，因为我不擅长 JS，所以这是我的代码。

我在页面上有 3 个过滤器是**选择元素** 这里是我的 JS 脚本

```
 $('#lgu,#category,#type').change(function(){ 

       google.maps.Map.prototype.clearOverlays = function() {
       for (var i = 0; i < markersArray.length; i++ ) {
       markersArray[i].setMap(null);
       }
       }
var lgu = $('#lgu').val();
var category = $('#category').val();
var type = $('#type').val();
        $.get('xmlquery.php', { input: lgu, input2: category, input3:                                       type},function(data){

downloadUrl("xmlspitter.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      markersArray.push(marker);
      bindInfoWindow(marker, map, infoWindow, html);
    }
    });
    });

    function bindInfoWindow(marker, map, infoWindow, html) {
    google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
    });

    }

    function downloadUrl(url, callback) {
    var request = window.ActiveXObject ?
    new ActiveXObject('Microsoft.XMLHTTP') :
    new XMLHttpRequest;

    request.onreadystatechange = function() {
    if (request.readyState == 4) {
    request.onreadystatechange = doNothing;
    callback(request, request.status);
    }
    };

    request.open('GET', url, true);
    request.send(null);
    }

    }); 
```

将不胜感激任何帮助。

**请注意**，我是 JS 的菜鸟，这意味着我也是调试它的菜鸟，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:08:16.123

您的更改回调将创建一个函数（使用函数扩展 google.maps.Map-prototype）`clearOverlays()`，但您不会在某处调用此函数，例如：

```
 map.clearOverlays() 
```

……所以什么也没有发生。

但我根本看不出有任何理由在这里创建函数，只需运行循环：

```
$('#lgu,#category,#type').change(function(){

  for (var i = 0; i < markersArray.length; i++ ) {
    markersArray[i].setMap(null);
  }

  /* continue with your code*/

}); 
```

# stata - 在 Stata 中使用 ttest 和 sdtest 运行 foreach 循环

> ID：14183079
> 
> 赞同：1
> 
> 时间：2013-01-06T14:29:39.867
> 
> 标签：stata

我需要在Stata中循环运行`ttest`许多变量（a，b，c，d）`foreach`

我尝试：

```
foreach var in varlist 'a-d'{
ttest 'var', by(c)
} 
```

和

```
foreach var of varlist `a-d'{
ttest `a-d', by(c)
} 
```

但是这些代码模式只适用于其他测试，而不适用于`ttest`和`sdtest`.

我的错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T06:15:26.617

这是一个适用于两组均值 t 检验的样本

```
foreach v of var var2-var6 {
ttest `var', by(var1)
} 
```

# php - 将 C# 中的 \n 转换为 PHP 中的新行

> ID：14183083
> 
> 赞同：0
> 
> 时间：2013-01-06T14:30:18.330
> 
> 标签：php, mysql, sql

我正在重新写这个 agian，因为人们似乎不明白我想要什么。

我正在展示一个包含我的 SQL 数据库中的信息的表格。当我插入我的 SQL 数据库时，我添加

```
\n 
```

所以当我“绘制”数据库时，我可以将其替换为

```
<br> 
```

它将添加一个新行。这是我累的地方，它似乎不起作用：

![我替换字符串的图像](../Images/e6085c0dd105e43086cc0f755127448e.png)

但这似乎不起作用，它不会替换字符串，但是如果我将 '$row['Info']' 替换为“Hello \n Test”之类的东西，它会将 hello 和 Test 打印到单独的行上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:42:05.910

在您的字符串替换函数中，替换

```
"\n" 
```

和

```
"\\n" 
```

由于转义取消了第一个。

# c++ - c++ fstream和seekp

> ID：14183086
> 
> 赞同：2
> 
> 时间：2013-01-06T14:30:33.697
> 
> 标签：c++, fstream

如果我在文件末尾执行搜索然后写入会发生什么？我想要发生的是文件将自动扩展到 seekp 位置的大小。如果是这样，它是否还通过向磁盘写入任何内容来填充文件旧结尾和新位置之间的空间，或者是刚刚分配的空间。

但是，如果它不扩展文件，我怎么能相当有效地完成呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:41:16.893

`seekp()`超过文件末尾然后写入是完全可以接受的。该文件确实会被扩展。

是否会为该漏洞分配磁盘空间取决于文件系统。有些文件系统（例如`ext3`）支持稀疏文件，有些则不支持。

# authentication - 验证 x509 客户端证书

> ID：14183089
> 
> 赞同：0
> 
> 时间：2013-01-06T14:30:53.060
> 
> 标签：authentication, spring-security, x509certificate

我正在使用弹簧安全性处理登录页面。该页面需要为用户提供一个选项来使用他们的证书而不是用户名和密码。但是我陷入以下情况：

假设您在浏览器中安装了由 XYZ 公司签署的证书。现在服务器（受信任的 XYZ）想要验证证书......但问题是：

Q1。服务器如何“请求”浏览器提供“正确的证书”（假设您的浏览器中安装了多个证书）？

Q2。是否可以在登录页面上有一个按钮，以便用户仅在单击该按钮时才能发送他的证书？

Q3。假设服务器收到了您的证书，服务器能否仅通过查看证书链（由 XYZ 公司签名）说“是的，您有证据证明您是谁”？

谢谢，

来自安全新手:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T00:24:11.607

这个有可能。您所要做的就是设置一个需要客户端证书的 ssl 站点。浏览器开箱即用地支持这一点，大多数提供内部证书存储，即显示来自操作系统的用户证书存储。您应该查阅您的服务器框架文档，了解如何在 ssl 连接上打开客户端证书要求。

至于 q2，您可以有两个网站，即您的应用程序和您的身份验证提供程序。该应用程序显示按钮，这将重定向到您需要客户端证书的身份验证提供程序。然后，身份验证提供者使用任何 sso 协议（oauth2、saml）将用户身份返回给应用程序。

至于证书验证，您可以验证链或在服务器端在用户名和证书指纹之间进行映射。

# if-statement - 在处理中执行后如何阻止 if 函数执行？

> ID：14183090
> 
> 赞同：0
> 
> 时间：2013-01-06T14:31:22.673
> 
> 标签：if-statement, for-loop, collision-detection, processing

我有一个 if 函数，每次 2 个对象相互重叠时执行，结果是 HP 应该只减少 1，但是只要它们重叠，HP 的值就会不断减少，所以它会从 3 直接变为0。

```
int HP = 3;

void collision ()
{
  for(int i = 0; i < balls.length; i++) 
  {
    if (dist(balls[i].bx,balls[i].by,X,Y)< 15)
    {
      HP-=1;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:34:26.987

```
int HP = 3;

void collision ()
{
   bool check = false;
   for(int i = 0; i < balls.length; i++) 
   {
      if ((dist(balls[i].bx,balls[i].by,X,Y)< 15) && check == false)
      {
         HP-=1;
         check = true;
      }
   }
} 
```

选择：

```
int HP = 3;

void collision ()
{
   for(int i = 0; i < balls.length; i++) 
   {
      if ((dist(balls[i].bx,balls[i].by,X,Y)< 15))
      {
         HP-=1;
         break;
      }
   }
} 
```

选择

每次循环只有一次：

```
int HP = 3;

void collision () {
   int temp = 0;
   for(int i = 0; i < balls.length; i++) {
      if ((dist(balls[i].bx,balls[i].by,X,Y)< 15)) {
         temp += 1;
      }
   }
   if (temp > 0) {
      HP = HP - 1;
   }
} 
```

# entity-framework - VS 2010 Web 应用程序中的 ASP.NET Web Api CRUD 操作

> ID：14183092
> 
> 赞同：0
> 
> 时间：2013-01-06T14:31:32.747
> 
> 标签：entity-framework, jquery, asp.net-web-api, crud

我试图在 VS 2010 Web 应用程序中进行 ASP.NET Web Api CRUD 操作，但为什么结果没有从源表中返回所有整行。

这是我的代码：

路线/Globax.asax

```
protected void Application_Start(object sender, EventArgs e)
        {
            RouteTable.Routes.MapHttpRoute(
            name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}", // browse with localhost:7031/api/product
                //routeTemplate: "{controller}/{id}",  // browse with localhost:7031/product
                 defaults: new { id = System.Web.Http.RouteParameter.Optional }
      ); 
```

控制器/ProductController.cs：

```
 public class ProductController : ApiController
    {
        NorthwindEntities db = new NorthwindEntities();

        public List<Product> GetAll()
        {
            return db.Products.ToList<Product>();// ;
        } 
```

查看/查看Product.aspx：

```
 <script src="Script/jquery-1.7.1.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(function () {
        $('#<%= cviewproduct.ClientID %>').click(function (e) {
            getProducts();
            e.preventDefault();
        });

    });

    function getProducts() {
        $.getJSON("/api/product",
                function (data) {
                    $.each(data, function (key, val) {
                        //var str = val.ProductName;
                        // alert(str);

                        var row = '<tr> <td>' + val.ProductName + '</td><td>' + val.ProductID + '</td><tr/>';

                        $(row).appendTo($('#tblproduct'));

                    });
                });
    }
</script> 
```

波纹管是产品控制器通过' [http://localhost:7031/api/product](http://localhost:7031/api/product) '的结果：

![在此处输入图像描述](../Images/7c60f6ef74d25bd20fee223703710962.png)

波纹管是 getProducts() 函数的结果：

![在此处输入图像描述](../Images/9e5758f5b727f33562590671ae49b480.png)

请帮我。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:07:45.253

当您执行时`$.getJSON("/api/product", ...`，您不会像发布的那样返回 XML。您将返回 JSON。

作为第一步，我建议您下载并安装[Fiddler2](http://www.fiddler2.com/fiddler2/version.asp)。打开它，然后使用 Composer 选项卡对`http://localhost:7031/api/product`. 这应该会向您显示返回的 JSON，这将与 XML 不同。将该 JSON 发布到您的原始问题中，我们应该能够提供进一步的帮助。

我的猜测是 JSON 格式不正确。您的 WebApiConfig.cs 类是什么样的？

**更新**

是的，有更好的方法。首先，创建一个 ApiModel（ApiModel 之于 WebAPI，ViewModel 之于 MVC）：

```
public class ProductApiModel
{
    public int ProductId { get; set; }
    public string ProductName { get; set; }
} 
```

现在，从控制器返回这个而不是实体：

```
public class ProductController : ApiController
{
    public IEnumerable<ProductApiModel> GetAll()
    {
        var products = db.Products
            .OrderBy(x => x.ProductID)
            .Select(x => new ProductApiModel
            {
                ProductId = x.ProductID,
                ProductName = x.ProductName
            });
        return products;
    }
} 
```

如果你使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)，你可以让你的控制器代码更短一点：

```
public class ProductController : ApiController
{
    public IEnumerable<ProductApiModel> GetAll()
    {
        var entities = db.Products.OrderBy(x => x.ProductID);
        var models = Mapper.Map<ProductApiModel[]>(entities);
        return models;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:06:30.800

经过一番研究，我终于发现（请纠正我，如果我错了）：JavaScriptSerializer 无法从实体与其他实体（产品和类别）之间的关系序列化整个对象树。

所以..我对我的代码做了一些修改，结果和预期的一样

* * *

**控制器/ProductController.cs：**

**从 ：**

```
public class ProductController : ApiController
{
    NorthwindEntities db = new NorthwindEntities();

    public List<Product> GetAll()
    {
        return db.Products.ToList<Product>();// ;
    } 
```

**到 ：**

```
public class ProductController : ApiController
{

   public string GetAll()
    {
        var product = db.Products.OrderBy(x => x.ProductID).Select(x => new
                     {
                         ProductId = x.ProductID,
                         ProductName = x.ProductName
                     });
        return JsonConvert.SerializeObject(product);
    } 
```

* * *

**查看/查看Product.aspx：**

**从 ：**

```
function getProducts() {
        $.getJSON("/api/product",
                function (data) {
                    $.each(data, function (key, val) {
                        var row = '<tr> <td>' + val.ProductName 
            + '</td><td>' + val.ProductID + '</td><tr/>';
                        $(row).appendTo($('#tblproduct'));

                    });
                }); 
```

**到 ：**

```
$.getJSON("/api/product",
                function (data) {
                    var obj = $.parseJSON(data);
                    $.each(obj, function (key, val) {
                        var row = '<tr> <td>' + val.ProductId 
        + '</td><td>' + val.ProductName + '</td><tr/>';
                        $(row).appendTo($('#tblproduct'));
                    });
                }); 
```

* * *

或者……有没有比这更好的方法，

如果我仍然想传递一个实体对象而不是一个字符串对象（List GetAll ()... 而不是 GetAll string ()....）

问候，

安德里安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:42:42.237

所以..这是我的最终工作代码

**楷模 ：**

命名空间 MyLabs1.Models

```
{
    public class ProductApi
    {
        [Key]
        public Int32 ProductID { get; set; }
        public string ProductName { get; set; }
    }
} 
```

**控制器/ProductController.cs：**

```
public IEnumerable<ProductApi> getall()
    {
        Mapper.CreateMap<Product, ProductApi>();
        var entities = db.Products.OrderBy(x => x.ProductID).ToList();
        var models = Mapper.Map<ProductApi[]>(entities);
        return models;
    } 
```

**或者**

```
public List<ProductApi> GetAll()
{
    var products = db.Products
        .OrderBy(x => x.ProductID)
        .Select(x => new ProductApi
        {
            ProductID = x.ProductID,
            ProductName = x.ProductName
        }).ToList();
    return products;
} 
```

**查看/查看Product.aspx：**

> ```
> function getProducts() {
>     $.getJSON("/api/product",
>             function (data) {
>                 $.each(data, function (key, val) {
>                     var row = '<tr> <td>' + val.ProductName + '</td><td>' + val.ProductID + '</td><tr/>';
>                     $(row).appendTo($('#tblproduct'));
>                 });
>             });
>    } 
> ```

**希望这对其他人有帮助**

问候，

安德里安

# jquery - jQuery验证器不适用于重复字段

> ID：14183094
> 
> 赞同：-1
> 
> 时间：2013-01-06T14:31:34.947
> 
> 标签：jquery, knockout.js, jquery-validate

我在我的 MVC 应用程序中使用[http://bassistance.de/jquery-plugins/jquery-plugin-validation/进行验证。](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

我有一个按要求标记的重复文本输入（使用敲除绑定）：

```
<form id="myForm" class="validate_form" method="get" action="">

<input type="text" class="required error txtOrder" maxlength="4000" 
placeholder="Please enter your order..." data-bind="{ attr: { 
id: viewModel.orderID }}" /> 
```

1.  有 10 行。
2.  我单击“保存”并阻止表单，说该字段是必需的。
3.  我在错误消息旁边的字段中输入了一些文本，将其他 9 行留空。
4.  我单击“保存”，验证器认为表单现在有效并允许提交表单。

我究竟做错了什么？还是 jQuery 验证器不适用于淘汰赛？如果是这样，是否有一个外观专业的 jQuery 插件可以用于淘汰赛？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:38:39.130

`input` shown has no `name` which is required to submit field and validator plugin uses `name` to identify fields also

# c# - 从数据库中的一系列 Kw 读数（当时的 kw 值）确定每日 Kwh 值的正确方法是什么

> ID：14183100
> 
> 赞同：4
> 
> 时间：2013-01-06T14:32:13.107
> 
> 标签：c#, sql, math, physics

我有一个设备可以读取电气设备的 kw 值，以在特定时间测量它们的（能量消耗率）。然后将这些值发送到轮询器（它会定期向设备询问这些值），并插入到数据库中。

例子：

```
一读 - 10 千瓦，下午 1.01
第二次阅读 - 1.23pm 15 千瓦
第三次阅读 - 11 千瓦，下午 1.30

```

如您所见，轮询间隔不是固定的，因此可以在不同时间将值插入数据库。为简单起见，我们可以想象数据库只是一个有 2 列的表，[time] 和 [kw_value]。

这实际上是一个两部分的问题：

1.  我如何从这些读数（全天的能源消耗）中获得每日千瓦时值？我的数学很差，所以我不知道从这些值中获取每日千瓦时值的正确方法是什么。

    我想把所有的值加起来得到平均值，但我妈妈说我应该画出一整天所有读数的图表，然后得到绘制线下方的区域（有点像得到积分图），然后它会给我一天消耗的总功率。然后我应该使用这个值除以一整天的持续时间（以小时为单位）以获得千瓦时，对吗？

2.  如何使用数据库执行此操作？如果一天有数千个读数（来自多个电气设备，在这种情况下我们有 3 列 - [time]、[kw_value]、[deviceid]），我应该如何计算这个，我应该加载所有值内存（我正在使用 C#）并从那里计算或者我可以使用 SQL 来计算这个吗？

编辑：感谢大家指出 kw 和 kwh 之间的区别。我的原始问题犯了一个大错误，因此进行了此编辑。重申一下，该设备在特定时间读取 kw 值（以千焦耳/秒为单位的能耗率），并在数据库中给出这些值的列表/图表，确定 kwh（总能耗）的正确方法是什么) 给定的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:29:31.987

你肯定不会得到准确的千瓦时值。由于轮询频率如此之低，您最终可能会在估计使用量和实际使用量之间产生非常大的差异。你举这个例子：

```
1st reading - 10 kW at 1.01pm
2nd reading - 15 kW at 1.23pm
3rd reading - 11 kW at 1.30pm 
```

在没有其他信息的情况下，唯一合理的做法是平均每对读数并乘以时间。从 1.01 到 1.23 是 22 分钟，或 0.367 小时。该期间的平均读数为 (10 + 15)/2 或 12.5 kW，估计使用量为 (12.5 * 0.367) 或 4.58 kWh。

不过，这种方法存在一些明显的漏洞。如果*实际*消耗是：

```
10 kW at 1.01pm
 0 kW at 1.02pm // machine turned off
15 kW at 1.23pm // machine turned back on
11 kW at 1.29pm 
```

您在 1.01 和 1.23 期间的实际使用量是 10 kW 一分钟，或 0.16 kWh。

这些数字可能会在另一个方向上相差类似的数量。也就是说，您的计算可能非常低而不是非常高。

如果这是合理的，我会做一个 SQL 查询，返回按机器排序的数据，然后按时间排序。所以你得到：

```
machine1, 1.01 am, reading
machine1, 1.20 am, reading
... etc. ...
machine2, 1.03, reading
machine2, 2.15, reading 
```

因此，机器 1 的所有读数都按时间顺序呈现给您，然后是机器 2，依此类推。

您当然可以使用 ORDER BY 和 GROUP BY 编写查询，以正确的顺序返回所有读数。然后，您可以使用 a`SqlDataReader`按顺序移动结果，计算每个时期的消耗（使用上面显示的平均计算），并对每台机器的结果求和。我不太了解 SQL 是否可以编写一个查询来为您完成所有计算并返回一个结果集，例如：

```
machine1, start time, end time, total power consumed
machine2, start time, end time, total power consumed
etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:00:33.453

此查询查找每一行的前一行。然后对于每个间隔，它假设整个间隔从一开始就具有 kwh 值。

```
; with  numbered as 
        (
        select  *
        ,       row_number() over (partition by deviceid order by time) rn
        from    YourTable
        )
select  deviceid
,       sum(t0.kwh_value * datediff(s, t0.[time], t1.[time])/3600)
from    numbered t1
join    numbered t0
on      t1.deviceid = t0.deviceid
        and t1.rn = t0.rn + 1
group by
        deviceid 
```

您可以修改查询以计算间隔的使用平均千瓦时：

```
,       sum((t1.kwh_value + t0.kwh_value)/2 * datediff(s, t0.[time], t1.[time])/3600) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:38:24.833

我的解决方案试图处理天间隔和测量间隔的重叠：

```
public class Measurement
        {
            public DateTime t;
            public double kwh;

            public Measurement(string t, double kwh)
            {
                this.t = DateTime.Parse(t);
                this.kwh = kwh;
            }
        }

        public static double getPowerConsumption(IEnumerable<Measurement> measurements, DateTime day)
        {
            DateTime never = DateTime.MinValue;
            DateTime tomorrow = day.AddDays(1);
            DateTime prev = never;
            double kwh = 0;

            foreach (Measurement m in measurements)
            {
                if (m.t >= day)
                //  measurement in our after or day
                {
                    if (m.t >= tomorrow)
                    {
                        if ((prev != never) && (prev < m.t))
                        {
                            //  add portion up to midnight
                            kwh += m.kwh * (tomorrow.Ticks - prev.Ticks) / (double)(m.t.Ticks - prev.Ticks);
                        }
                        break;
                    }
                    else if ((prev != never) && (prev < day) && (prev < m.t))
                    {
                        kwh += m.kwh * (m.t.Ticks - day.Ticks) / (double)(m.t.Ticks - prev.Ticks);
                    }
                    else
                    {
                        kwh += m.kwh;
                    }
                }
                prev = m.t;
            }

            return kwh;
        }

        static void Main(string[] args)
        {
            DateTime myDay = new DateTime(2012, 11, 2);
            List<Measurement> measurements = new List<Measurement>() { new Measurement("01.11.2012 23:30", 10), 
                                                                       new Measurement("02.11.2012 10:00", 1), 
                                                                       new Measurement("02.11.2012 23:30", 5), 
                                                                       new Measurement("03.11.2012 10:00", 6) };
            double kwh = getPowerConsumption(measurements, myDay);

            Console.WriteLine("Powerconsumption for " + myDay.ToShortDateString() + " was " + kwh.ToString("#.##") + "kWh");
        } 
```

# sql-server - SQL - 使用分层模型设计电话簿数据库（主客户端）

> ID：14183104
> 
> 赞同：2
> 
> 时间：2013-01-06T14:32:44.540
> 
> 标签：sql-server, database-design

我刚加入这个网站，这是我的第一个问题，我希望我的问题符合 StackOverflow 问题政策。

我正在设计一个具有以下能力的电话簿数据库

*   联系人有 2 种类型（公司或个人）->ContactType
*   我希望每个联系人都拥有尽可能多的电子邮件、电话号码和地址。
*   而且我想指定哪个 Person 在哪个 Company 工作，因此我不仅可以显示 Company 联系方式的详细信息，还可以显示其员工列表及其在该公司中的工作及其联系人（CoEmpJob 表）

我设计了一个 db 图，如下面的链接所示，它的结构是否良好，或者我能以更好的方式实现我想要的吗？

提前致谢。

[我的电话簿设计](http://i50.tinypic.com/2a83vyv.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:36:58.187

就设计而言，您缺少一些东西，例如 Companies 表和 ContactTypes 表。CoEmpJob 表中似乎没有链接到 Contacts 表的外键。

在 Phones 表中，我个人不会使用前缀字段（除非您希望按电话前缀显示联系人），在这种情况下，每个电话号码都保证是唯一的，在这种情况下，PhoneNum 字段将成为主键，而PhoneID 字段是不必要的 - 但您可能会遇到夫妻在同一个数据库中的情况；虽然他们几乎可以肯定有不同的手机号码，但他们几乎可以肯定共享同一个家庭电话号码！在这种情况下，您的设计是正确的。

我不知道有多少人拥有多个地址（如果有的话，我认为很少），这意味着地址表的字段可以移动到联系人表中。

（添加）关于公司，如果您*想指定哪个 Person 在哪个 Company 工作*，那么您将需要一个公司表（缺失）和一个连接表（CoEmpJob）。在现实世界中，这种设计还需要更多的表——连接表可以显示哪些联系人与哪些公司相关联以及他们当前的工作是什么，但人们会更换工作（和公司），因此这样的设计不会存储任何历史记录. 此外，习惯上将人员（员工）连接到一个部门 - 一个人可能一次连接到多个部门，这意味着您将需要另一个连接表。这可能会变得非常复杂——这取决于你想要什么。

您的评论表明您希望将公司数据存储在联系人表中 - 这是一个非常糟糕的主意；他们应该分开。

# ios - 从核心数据关系中获得最大价值

> ID：14183105
> 
> 赞同：1
> 
> 时间：2013-01-06T14:32:47.177
> 
> 标签：ios, core-data, nsfetchrequest

我在网上搜索这个问题的答案，但不幸的是，我认为我在核心数据过程中不够流利，无法真正包含正确的关键字组合。

我有两个实体......`Users`并且`Bookmarks`具有一对多的关系。

`Users`: `string:firstName`, `string:lastname`,`string:iconImage` 与`Bookmarks`- 逆关系

`Bookmarks`: `string:title`, `string:url`, `string:content`, `image:Binary Data`,`order:Integer32` 与`Users`- 逆关系

我的目标是查询特定用户的书签并找到 key:order 的最高数字，这样当我添加新书签时，它将比最大值大一个。我已经看过 Apple 示例，它有效且有意义，但我需要更多。该示例返回该实体中所有记录的最大值。

```
-(NSNumber*) getNextBookmarksOrderForUser:(NSManagedObjectID*)userID
{
    NSNumber *highOrder;
    Users *user =[self getUserByID:userID];

    if (user)
    {
        NSExpression *keyPathExpression     = [NSExpression expressionForKeyPath:@"order"];
        NSExpression *highestOrderingNumber = [NSExpression expressionForFunction:@"max:" arguments:[NSArray arrayWithObject:keyPathExpression]];
        NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc]init];
        [expressionDescription setName:@"maxOrdering"];
        [expressionDescription setExpression:highestOrderingNumber];
        [expressionDescription setExpressionResultType:NSDecimalAttributeType];

        NSEntityDescription *entity = [NSEntityDescription entityForName:@"Bookmarks" inManagedObjectContext:[_dataContext managedObjectContext]];

        NSFetchRequest *request = [[NSFetchRequest alloc]init];        
        [request setEntity:entity];
        [request setPropertiesToFetch:[NSArray arrayWithObject:expressionDescription]];
        [request setResultType:NSDictionaryResultType];

        NSError *error = nil;
        NSArray *objects = [[_dataContext managedObjectContext] executeFetchRequest:request error:&error];

        if(objects == nil) {
            // Handle the error
        }
        else {
                if ([objects count] > 0) {

                highOrder = [NSNumber numberWithInt:[[[objects objectAtIndex:0] valueForKey:@"maxOrdering"]intValue]];

            NSLog(@"Highest ordering number: %@", highOrder);               
            }   
        }        

        return highOrder;
    }

    return nil;
} 
```

因此，如果我有两个用户，一个有 10 个书签，另一个有 25 个书签，上面的代码将始终返回 25。我尝试添加一个谓词：

```
NSPredicate *byUser = [NSPredicate predicateWithFormat:@"self == %@", user];
[request setPredicate:byUser]; 
```

有没有人有什么建议？我知道我可以为用户返回所有书签并编写代码来找到我的价值，但我想以最有效的方式来做。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:55:03.647

从我的评论

我认为您应该使用这样的谓词，`[NSPredicate predicateWithFormat:@"users == %@", user];`因为您正在查询`Bookmarks`.

# php - Android 和 PHP 之间的安全通信

> ID：14183109
> 
> 赞同：-2
> 
> 时间：2013-01-06T14:33:23.463
> 
> 标签：php

我的客户希望我开发一个与 Android 设备通信的 php 应用程序。我只想允许来自我的客户应用程序的请求。我想到了密钥交换，但它不安全。我不关心数据加密我只希望我的客户端应用程序与我的 php 应用程序通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:36:48.197

一个简单的蒸汽密码可能是帮助你的唯一方法，这取决于你想要的安全程度。你也可以检查一下用户代理，如果你让它难以猜测，那么你至少没问题，直到有人反编译了 android 应用程序或检查了数据包信息。问题在于，由于 Android 应用程序能够被反编译，因此您永远不会那么安全。

# java - 在 Java 中防止实例化的正确方法

> ID：14183110
> 
> 赞同：5
> 
> 时间：2013-01-06T14:33:40.777
> 
> 标签：java, oop, coding-style, semantics

如果我们想防止在 Java 中实例化对象，我们可以使用几种方法，其中最明显的是：

1.  抽象关键词
2.  私有/受保护的构造函数

假设类不包含抽象方法，我们使用**抽象**关键字来防止创建对象。这种方法是否不正确（我的意思不是语法正确，而是语义）？或者在这种情况下最好使用私有构造函数？

谢谢

**UPD** 类将是其他类的基类，尽管它不包含抽象方法。在我的例子中，它包含一些“AbstractTestBase”，其中包含一些通用数据和实用方法，可供某些集成/单元测试组使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T14:49:20.337

由于您想将该类用作子类，因此“带有私有构造函数的最终类”的建议显然不起作用，因此您必须采用“抽象”方式。从“抽象类”的定义来看，这是合法的，因为定义准确地说明了您想要的内容：

> 抽象类是被声明为抽象的类——它可能包含也可能不包含抽象方法。抽象类不能被实例化，但它们可以被子类化。
> 
> [http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)

# javascript - 在不使用 jQuery 的情况下使用顺序选项值填充淘汰赛下拉列表

> ID：14183114
> 
> 赞同：1
> 
> 时间：2013-01-06T14:34:27.317
> 
> 标签：javascript, backbone.js, knockout.js

我正在尝试使用淘汰赛填充下拉列表。我用来填充 optionsText 的数组是一个 JSON 对象数组。我需要 optionsValue 是数组中对象的索引或序号。

我的 viewModel 中有以下代码：

```
 self.job.submitOptionsArray = this.collection.toJSON();
    this.job.applyPreset = ko.observableArray(self.job.submitOptionsArray); 
```

在我看来：

```
<select name="" id="applyPreset" data-bind="options: applyPreset, optionsText: 'name', optionsValue: '???', value: somfn"></select> 
```

我需要一个不使用 jQuery 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:56:35.077

除了使用选项绑定之外，您可能会发现在您的情况下使用 foreach 绑定手动创建选项更有益。

例如：

```
<select data-bind="value: someValue, foreach: options">
    <option data-bind="text: title, attr: {value: $index()}"></option>
</select>
<div data-bind="text: someValue"></div> 
```

你的选择可以是任何东西，我只是用这个测试了它：

```
self.options = ko.observableArray([{
   title: "Some text",
   otherData: "someOtherData",
   evenMore: "even more Data"
 }, {
   title: "Some text 2",
   otherData: "someOtherData",
   evenMore: "even more Data"
 }, {
   title: "Some text 2",
   otherData: "someOtherData",
   evenMore: "even more Data"
 }]); 
```

如果要包含标题，只需将 foreach 绑定移动到虚拟元素中，然后在其余选项上方手动添加一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:09:34.990

您可以格式化您的对象，以便根据您的收藏获得索引。您可以通过手动订阅执行一次或每次更改阵列时执行此操作。

```
this.job.applyPreset = ko.observableArray(self.job.submitOptionsArray);
this.job.applyPreset.subscribe(function(arrayValue) {
    var index = 0;
    ko.utils.arrayForEach(arrayValue, function(arrayItem){
        arrayItem.index = index++;
    })
}) 
```

用作`index`你的`optionsValue`，你已经设置好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T14:53:41.317

You will have to fix that yourself, the optionsValue can only point to a member on the object. If you do not supply the optionsValue the value will be the object itself.

If the object has an id member use that, or use a computed observable with a write method that writes the actual index instead of the object a underlying observable..

# php - 将数据从控制器传递到模型

> ID：14183115
> 
> 赞同：1
> 
> 时间：2013-01-06T14:34:34.833
> 
> 标签：php, mysql, codeigniter

我无法使用 Codeigniter 将数据从我的控制器传递到我的模型。我在浏览器控制台上收到内部服务器错误，但已将其范围缩小到上述问题。

这是我的代码：

**控制器**

```
public function get_results() {
        $numOfDraws = $this->input->post('numOfDraws');
        $data = $this->lotto_model->get_results($numOfDraws);
        echo json_encode($data);
    } 
```

**模型**

```
 public function get_results($numOfDraws)
        {
            $query = $this->db->query('SELECT * FROM lotto ORDER BY id DESC LIMIT "$numOfDraws"');
            return $query->result();
        } 
```

如果我硬编码`LIMIT`查询成功。我知道这`$numOfDraws`等于控制器中的正确值。

任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:40:34.057

First of all variable injection into a string only works with double quotes, not with single quotes. Secondly your current code is open to SQL injection.

CodeIgniter provides functionality to prevent this:

```
$query = $this->db->query('SELECT * FROM lotto ORDER BY id DESC LIMIT ?', array($numOfDraws)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T14:44:33.510

您的查询是单引号的，因此它不会解析变量，您生成的 SQL 字面意思是：

```
SELECT * FROM lotto ORDER BY id DESC LIMIT "$numOfDraws" 
```

如果您想要更简洁的语法、抽象和更好的安全性，只需使用 CI 的“ActiveRecord”类：

```
public function get_results($numOfDraws)
{
    return $this->db
        ->limit($numOfDraws)
        ->order_by('id', 'DESC')
        ->get('lotto')
        ->result();
} 
```

或者修复原始查询的一种方法：

```
$query = $this->db
    ->query('SELECT * FROM lotto ORDER BY id DESC LIMIT '.(int) $numOfDraws); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T14:38:02.970

尝试这个 -

```
 $query = $this->db->query("SELECT * FROM lotto ORDER BY id DESC LIMIT $numOfDraws");
        return $query->result(); 
```

# javascript - Dropbox 上传程序无法调用未定义的方法“提交”

> ID：14183116
> 
> 赞同：1
> 
> 时间：2013-01-06T14:34:44.057
> 
> 标签：javascript, jquery, wordpress, dropbox

我的 Wordpress 网站中的 Dropbox 上传器存在一些问题。

它给了我“未捕获的类型错误：无法调用未定义的方法”提交“在这行：

```
$('#fileupload')
        .bind('fileuploadstop', function (e, data) {
           //window.location.href = 'http://hiphopsmurf.com';
             $('#multimages', top.document).val(upfiles);
             parent.document.forms["multi_image"].submit();
             //parent.tb_remove();
        }); 
```

这是整个文档代码：

```
$(function () {
    'use strict';

    // Initialize the jQuery File Upload widget:
    $('#fileupload').fileupload();

    // Enable iframe cross-domain access via redirect option:
    $('#fileupload').fileupload(
        'option',
        'redirect',
        window.location.href.replace(
            /\/[^\/]*$/,
            '/cors/result.html?%s'
        )
    );

    if (window.location.hostname === 'blueimp.github.com') {
        // Demo settings:
        $('#fileupload').fileupload('option', {
            url: '//jquery-file-upload.appspot.com/',
            maxFileSize: 5000000,
            acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,
            process: [
                {
                    action: 'load',
                    fileTypes: /^image\/(gif|jpeg|png)$/,
                    maxFileSize: 20000000 // 20MB
                },
                {
                    action: 'resize',
                    maxWidth: 1440,
                    maxHeight: 900
                },
                {
                    action: 'save'
                }
            ]
        });
        // Upload server status check for browsers with CORS support:
        if ($.support.cors) {
            $.ajax({
                url: '//jquery-file-upload.appspot.com/',
                type: 'HEAD'
            }).fail(function () {
                $('<span class="alert alert-error"/>')
                    .text('Upload server currently unavailable - ' +
                            new Date())
                    .appendTo('#fileupload');
            });
        }
    } else {
        $('#fileupload').fileupload('option', {
            //maxFileSize: 5000000,
            maxFileSize: 1048576,
            //acceptFileTypes: /(\.|\/)(gif|jpe?g|png|psd)$/i,
            acceptFileTypes: /(\.|\/)(doc|docx|gif|jpg|jpeg|pdf|png|psd|tif|tiff)$/i,
            singleFileUploads: true,
            sequentialUploads: true,
            autoUpload: true,
                    });

        var upfiles = "";
        $('#fileupload')
        //.bind('fileuploaddrop', function (e, data) {$.each(data.files, function (index, file) {alert('Added file: ' + file.name);});})
        //.bind('fileuploaddrop', function (e, data) {$.each(data.files, function (index, file) { upfiles += file.name + ",";});})
        .bind('fileuploaddone', function (e, data) {$.each(data.files, function (index, file) { upfiles += file.name + ",";});})
        .bind('fileuploadchange', function (e, data) {/* ... */})

        //fail: function (e, data) {data.submit();}
        //.fileupload({fail: function (e, data) {alert('FAIL');}});
        ;

       $('#fileupload')
        .bind('fileuploadstop', function (e, data) {
           //window.location.href = 'http://hiphopsmurf.com';
             $('#multimages', top.document).val(upfiles);
             parent.document.forms["multi_image"].submit();
             //parent.tb_remove();
        });

    }

}); 
```

我对 Java 脚本有一周的兴趣，因此将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:38:11.890

通常，在使用 JavaScript / jQuery 时，当您收到“方法未定义”错误时，您的选择器存在问题。

我会使用 jQuery 选择器来提交表单。尝试用这个替换问题行：

```
$('#multi_image').submit(); 
```

（假设您的表单具有“multi_image”的 id 属性）。

# c++ - 如何使用 LibSoX 混合两个 wav 文件

> ID：14183120
> 
> 赞同：1
> 
> 时间：2013-01-06T14:34:56.267
> 
> 标签：c++, c, windows, visual-studio-2010, sox

我正在尝试在 Windows 上使用 LibSoX 混合两个 wav 文件。我可以通过使用以下命令从命令行使用 sox 来做到这一点：

> sox -m f1.wav f2.wav out.wav

但是，我想以编程方式使用 C/C++ 函数并与 LibSoX 链接。我已经成功构建了 LibSoX，并尝试了不涵盖两个音频文件“混合”的示例程序。

以前有人做过吗？如果您可以使用 LibSoX 调用提供代码片段或至少一些指针来执行此操作，那就太好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:15:00.783

想分享我为上述问题制定的解决方案（解决方法）。基本上，混合不会作为导出的函数调用公开。混合当然可以通过命令行完成，因此可能有两种解决方案：1）通过程序生成进程（sox.exe）和 2）通过 libsox。我需要一个基于 libsox 的解决方案，因为该函数将调用混合函数，但无法生成进程（约束）。所以我将主要功能功能从 sox 移到了我导出的 libsox 中的一个新方法:) 。所以现在我可以将相同的命令行开关传递给我的函数，并使用 libsox 完成工作！理想情况下，这将是一种“解决方法”，直到 Chris Bagwell 从 libsox 公开混合（和其他缺失的）功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-31T17:32:07.350

虽然这是一个老问题，但我最近遇到了同样的问题。为了在您的代码中使用 sox.c main 方法，您需要在调用后重置所有全局变量。sox.c 旨在运行一次然后退出。为此，您可以添加如下所示的功能。然后你可以重命名 main，sox_main_private 并且事情基本上可以使用命令行调用直接通过调用 sox_main() 手动构建你的 argv 数组

```
// reset the globals so that multiple calls can be made to sox_main
static void cleanup_globals(void)
{
    file_count = 0;
    input_count = 0;
    output_count = 0;
    current_input = 0;

    input_wide_samples = 0;
    read_wide_samples = 0;
    output_samples = 0;
    input_eof = sox_false;
    output_eof = sox_false;
    user_abort = sox_false;
    user_skip = sox_false;
    user_restart_eff = sox_false;
    success = 0;

    files = NULL;
    user_efftab = NULL;
    user_efftab_size = 0;
    effects_chain = NULL;
    save_output_eff = NULL;
    user_effargs_size = NULL;  /* array: size of user_effargs for each chain */
    nuser_effects = NULL;  /* array: number of effects in each chain */
    current_eff_chain = 0;
    eff_chain_count = 0;
    very_first_effchain = sox_true;
    effects_filename = NULL;
    play_rate_arg = NULL;
    norm_level = NULL;
}

int sox_main(int argc, char *argv[])
{
#if DEBUG
    printf("sox_main:\n");
    int i = 0;
    while (i < argc) {
        printf("%s ", argv[i]);
        i++;
    }
    printf("\n");
#endif
    sox_main_private(argc, argv);
    cleanup_globals();
    return 0;
} 
```

# c# - WPF StoryBoard.Completed 事件未触发

> ID：14183121
> 
> 赞同：18
> 
> 时间：2013-01-06T14:35:03.330
> 
> 标签：c#, .net, wpf, storyboard

在关闭主窗口之前我有一个动画，如下面的代码所示。问题是`StoryBoard.Completed`没有开火。任何线索是什么原因造成的？

**代码**

```
DoubleAnimation dblAnimX = new DoubleAnimation(1.0, 0.0, new  Duration(TimeSpan.FromSeconds(0.5)));
dblAnimX.SetValue(Storyboard.TargetProperty, this);

DoubleAnimation dblAnimY = new DoubleAnimation(1.0, 0.0, new Duration(TimeSpan.FromSeconds(0.5)));
dblAnimY.SetValue(Storyboard.TargetProperty, this);

Storyboard story = new Storyboard();
Storyboard.SetTarget(dblAnimX, this);
Storyboard.SetTarget(dblAnimY, this);
Storyboard.SetTargetProperty(dblAnimX, new PropertyPath("RenderTransform.ScaleX"));
Storyboard.SetTargetProperty(dblAnimY, new PropertyPath("RenderTransform.ScaleY"));

story.Children.Add(dblAnimX);
story.Children.Add(dblAnimY);
story.Begin(this);

story.Completed += (o, s) => { this.Close(); }; 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-06T15:17:13.000

在调用 Begin 之前添加 Completed 处理程序：

```
story.Completed += (o, s) => Close();
story.Begin(this); 
```

* * *

此行为的原因是 Completed 处理程序附加到在 Begin 期间创建的内部 Clock 对象。[请参阅Completed](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.media.animation.timeline.completed.aspx)中的备注部分：

> 尽管此事件处理程序似乎与时间线相关联，但它实际上注册了为此时间线创建的时钟。有关详细信息，请参阅时序事件概述。

# c# - 以当前形式存在控制？

> ID：14183122
> 
> 赞同：6
> 
> 时间：2013-01-06T14:35:10.873
> 
> 标签：c#, winforms

我需要找出当前形式中是否存在具有某些名称的组件。我在字符串变量中有组件的名称，如果它不存在，我需要创建它。我使用此代码

```
Control c = Controls.Find(New, true)[0];   //najiti komponenty

        if (c == null) {} 
```

但它给了我错误，索引超出了数组的范围。我知道这段代码很糟糕，但我不知道写得好，谷歌也不帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T14:37:32.243

[`Find`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.find%28v=vs.80%29.aspx)方法返回一个控件数组，即`Control[]`. 您正在尝试访问空数组的第一个元素，从而导致`IndexOutOfRangeException` 您应该尝试：

```
Control[] controls = Controls.Find(New, true); 
if (controls.Length > 0) 
{
    //logic goes here
}
else 
{
    //no components where found
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-06T14:46:00.497

尝试使用 Control.ContainsKey() 方法，（在我的示例中传递一个包含控件名称而不是引用文本的字符串变量）：

```
if (!this.Controls.ContainsKey("MyControlName"))
{
    // Do Something
} 
```

# php - facebook 访问令牌随机过期

> ID：14183125
> 
> 赞同：0
> 
> 时间：2013-01-06T14:35:19.920
> 
> 标签：php, facebook, codeigniter, facebook-graph-api

我通过 Javascript 登录，并使用以下方法检查 facebook cookie 并从中提取 signed_request：

```
function get_facebook_cookie($app_id, $app_secret) {
        $access_token = null;
        $expires = null;

        $signed_request = (isset($_COOKIE['fbsr_' . $app_id])) ? $this->parse_signed_request($_COOKIE['fbsr_' . $app_id], $app_secret) : NULL;

        if (!is_null($signed_request)) {
            $url = "https://graph.facebook.com/oauth/access_token?client_id=".$app_id."&redirect_uri=&client_secret=".$app_secret."&code=$signed_request[code]";

            $access_token_response = $this->getDataFromUrl($url);           
            parse_str($access_token_response);
            $signed_request["access_token"] = $access_token;

            if($expires == 0){ $signed_request["expires"] = 0; }else{ $signed_request["expires"] = time() + $expires; }
        }
        return $signed_request;
    } 
```

getDataFromUrl() 函数：

```
function getDataFromUrl($url) {
        $ch = curl_init();
        $timeout = 5;
        curl_setopt($ch,CURLOPT_URL,$url);
        curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
        curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
        $data = curl_exec($ch);
        curl_close($ch);
        return $data;
    } 
```

在第一次响应时，我成功获得了**access_token**和**expires**属性，但在下一次请求时我丢失了它们，无论是页面刷新还是导航到另一个页面。

是否有解决方案或替代方法来实现它？我究竟做错了什么？

# wcf-data-services - 替换 IExpandProvider

> ID：14183134
> 
> 赞同：2
> 
> 时间：2013-01-06T14:36:21.460
> 
> 标签：wcf-data-services

我正在尝试使用 NHibernate 创建 OData WCF 服务，我想`$expand`在查询中使用。我发现了一个 interface `IExpandProvider`，我猜它就是（曾经）用于此目的。但它说`The IExpandProvider interface is deprecated.`目前实施扩展的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:36:34.947

从 V2 开始，不推荐使用 IExpandProvider，因为它不支持新的查询选项，例如 $select。“新”方式是实现 IQueryable。所有查询选项都转换为 LINQ 表达式树。如果您想了解有关如何完成此操作的更多详细信息，请参阅本系列：http: [//blogs.msdn.com/b/vitek/archive/2010/02/25/data-services-expressions-part-1-intro。 .aspx](http://blogs.msdn.com/b/vitek/archive/2010/02/25/data-services-expressions-part-1-intro.aspx) _ 谈论 $expand 的部分在这里：http: [//blogs.msdn.com/b/vitek/archive/2010/07/15/data-services-expressions-part-9-expansions.aspx](http://blogs.msdn.com/b/vitek/archive/2010/07/15/data-services-expressions-part-9-expansions.aspx)

# perl - IO::File 使用了多少个开放式后端？

> ID：14183143
> 
> 赞同：1
> 
> 时间：2013-01-06T14:38:03.647
> 
> 标签：perl, file-io

[IO::File#METHODS](http://perldoc.perl.org/IO/File.html#METHODS)中描述的内置`open`函数、基本的 Perl 开放运算符和三参数开放运算符都是同一个功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T15:18:11.280

是和不是。

`open`内置在 中描述[`perldoc -f open`](http://perldoc.perl.org/functions/open.html)。此功能非常适合进行实际的、面向文本的工作。它可以使用 PerlIO 层对输入流进行自动解码或编码。

Perl 有另一种打开文件的方法，称为[`sysopen`](http://perldoc.perl.org/functions/sysopen.html). 这本质上是一个非常薄的 C's 包装器`fdopen`，包含所有的陷阱和问题。在 Perl 中，`sysopen`被称为

```
sysopen FILEHANDLE, FILENAME, MODE[, PERMS] 
```

现在，[`IO::File`](https://metacpan.org/module/IO%3a%3aFile)为打开文件提供了一个面向对象的接口，并且继承自`IO::Handle`. 该`open` *方法*包含以下[代码](https://metacpan.org/source/GBARR/IO-1.25/lib/IO/File.pm)：

```
sub open {
  @_ >= 2 && @_ <= 4 or croak 'usage: $fh->open(FILENAME [,MODE [,PERMS]])';
  my ($fh, $file) = @_;
  if (@_ > 2) {
    my ($mode, $perms) = @_[2, 3];
    if ($mode =~ /^\d+$/) {
      defined $perms or $perms = 0666;
      return sysopen($fh, $file, $mode, $perms);
    } elsif ($mode =~ /:/) {
      return open($fh, $mode, $file) if @_ == 3;
      croak 'usage: $fh->open(FILENAME, IOLAYERS)';
    } else {
      return open($fh, IO::Handle::_open_mode_string($mode), $file);
    }
  }
  open($fh, $file);
} 
```

如您所见，它是 and 的包装器`open`，`sysopen`因此可以肯定地说此方法与核心不同`open`；-) 此外，文档（您链接到的）也这么说。

# database - Removing Duplicate Records from table based on a column

> ID：14183150
> 
> 赞同：0
> 
> 时间：2013-01-06T08:29:12.373
> 
> 标签：database

> **Possible Duplicate:**
> [Removing Duplicate row from a table based on one column](https://stackoverflow.com/questions/14183706/removing-duplicate-row-from-a-table-based-on-one-column)

I created a table with multiple inner joins from 4 tables but the results brings back duplicate records. Here is code that I am using

```
 DataSet quotetobepostedlist = DataRepository.Provider.ExecuteDataSet(System.Data.CommandType.Text,
      "Select  tblLoadStop.LoadID
           , tblCustomer.CustomerID
           ,tblLoadMaster.Salesperson
           ,OriginationState
           , DestinationState
           ,LoadRate
      FROM tblLoadMaster 
      INNER JOIN tblLoadSpecifications ON tblLoadSpecifications.LoadID=tblLoadMaster.LoadID  
      INNER JOIN  tblLoadStop ON tblLoadStop.LoadID=tblLoadMaster.LoadID 
      INNER JOIN tblStopLocation ON tblStopLocation.StopLocationID=tblLoadStop.StopLocationID  
      INNER JOIN tblCustomer ON tblCustomer.CustomerID =tblLoadMaster.CustomerID 
      WHERE tblLoadMaster.Phase LIKE '%2%' 
      ORDER BY tblLoadMaster.LoadID DESC;"); 
```

This is the result that I get

```
Load ID   Customer   Salesperson     Origin  Destination     Rate    
13356     FedEx           Alex           Duluth    New York     300
13356     FedEx           Steve          Florida   Kansas       400 
```

I only want the first row to show,

```
13356     FedEx           Alex           Duluth    New York     300 
```

and remove the bottom row,

```
13356     FedEx           Steve          Florida   Kansas       400 
```

# javascript - jeditable close new when other opened

> ID：14183153
> 
> 赞同：0
> 
> 时间：2013-01-06T14:39:56.210
> 
> 标签：javascript, jquery, jeditable

I am trying to edit jeditable js in order to add some functionality I have my own onblur() function. what i want to do is to close new jeditable if already one is opend

my code is :

```
t = setTimeout(function() {
     var focusedElem=$(document.activeElement);
         if(focusedElem.is("textarea"){
        **//what should i write in order to cancel the new one 
             $(e.target).focus(); //return the focus to the old one
         }
         else
             reset.apply(form, [settings, self]);
           }, 500); 
```

I am trying to make the code generic and user friendly, thats why i dont want any user that use my plugin to write id for each element. so please dont give answers that use id.

i have tried to write the following raws but any of them is making error reset.apply(form, [settings, focusedElem]); reset.apply(form, [settings, $(focusedElem)]);

more than that i don't want to trigger on a cancel button (maybe he is not want to add it(user friendly))

# c# - Parse string and return only the information between bracket symbols. C# Winforms

> ID：14183154
> 
> 赞同：1
> 
> 时间：2013-01-06T14:40:05.437
> 
> 标签：c#, winforms

I would like to parse a string to return only a value that is in between bracket symbols, such as `[10.2%]`. Then I would need to strip the `"%"` symbol and convert the decimal to a rounded up/down integer. So, `[10.2%]` would end up being `10`. And, `[11.8%]` would end up being 12.

Hopefully I have provided sufficient information.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:46:41.090

```
Math.Round(
    double.Parse(
       "[11.8%]".Split(new [] {"[", "]", "%"}, 
       StringSplitOptions.RemoveEmptyEntries)[0])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T14:45:58.117

为什么不使用正则表达式？

在此示例中，我假设括号内的值始终是带小数的双精度数。

```
string WithBrackets = "[11.8%]";
string AsDouble = Regex.Match(WithBrackets, "\d{1,9}\.\d{1,9}").value;
int Out = Math.Round(Convert.ToDouble(AsDouble.replace(".", ",")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T14:46:32.703

使用正则表达式 (Regex) 在一个括号内查找所需的单词。这是您需要的代码：使用 foreach 循环删除 % 并转换为 int。

```
List<int> myValues = new List<int>();
foreach(string s in Regex.Match(MYTEXT, @"\[(?<tag>[^\]]*)\]")){
   s = s.TrimEnd('%');
   myValues.Add(Math.Round(Convert.ToDouble(s)));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T14:50:52.843

```
var s = "[10.2%]";
var numberString = s.Split(new char[] {'[',']','%'},StringSplitOptions.RemoveEmptyEntries).First();
var number = Math.Round(Covnert.ToDouble(numberString)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T14:51:16.417

如果您可以确保括号之间的内容是 <decimal>% 的形式，那么这个小函数将返回第一组括号之间的值。如果需要提取多个值，则需要对其进行一些修改。

```
public decimal getProp(string str)
{
    int obIndex = str.IndexOf("["); // get the index of the open bracket
    int cbIndex = str.IndexOf("]"); // get the index of the close bracket
    decimal d = decimal.Parse(str.Substring(obIndex + 1, cbIndex - obIndex - 2)); // this extracts the numerical part and converts it to a decimal (assumes a % before the ])
    return Math.Round(d); // return the number rounded to the nearest integer
} 
```

例如`getProp("I like cookies [66.7%]")`给出[`Decimal`](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)数字 67

# c++ - pointer to pointer to constant

> ID：14183158
> 
> 赞同：1
> 
> 时间：2013-01-06T14:40:48.347
> 
> 标签：c++, pointers, constants

I have a function `const void* getData()` which returns a pointer to constant data `const void*` I need to write a wrapper to this function that gets an (output) argument in which it should return the above pointer.

```
void wrapGetData([type] ppData) {
*ppData = getData();
} 
```

What should be the `[type]`? void ** is not sutable,since getData() returns pointer to the const

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T14:42:51.010

如果`getData()`返回`void const *`，那么`[type]`应该是`void const * &`：

```
void wrapGetData(void const * & ppData) 
{
    ppData = getData();
} 
```

请注意，这`&`是必需的，`ppData`输出参数也是如此。

您可以将此函数称为：

```
void const * output;

wrapGetData(output); 
```

这与您必须将函数调用为的其他解决方案有点不同：

```
wrapGetData(&output); //if [type] = const void ** 
```

请注意，`const void*`和`void const*`是同一件事。所以不要与语法混淆。

* * *

这与您必须将函数调用为的其他解决方案有点不同：

```
wrapGetData(&output); //if [type] = const void ** 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T14:44:35.547

`const void**`：

```
const void *getData() {
  return nullptr;
}

void wrapGetData(const void** ppData) {
  *ppData = getData();
}

int main() {
  const void *p;
  wrapGetData(&p);
} 
```

# entity-framework - How should I seed data to many to many relation in Entity Framework Code first 5.0

> ID：14183163
> 
> 赞同：16
> 
> 时间：2013-01-06T14:41:22.287
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

I am having my first steps in EF 5.0 I have a many to many relationship. Movie can Have multiple Types and Type can have multiple Movies

```
public class Movie
{
    public int MovieId { get; set; }
    [Required]
    public string Name { get; set; }

    public virtual ICollection<Type> Types { get; set; }
}

public class Type
{
    public int TypeId { get; set; }
    public string MovieType { get; set; }

    public virtual ICollection<Movie> Movies { get; set; }
} 
```

When I generated the Database it creates many-to-many between Movie and type

So, What should i do to seed this many to many table? I tried many solution posted here but it didn't works.

Also, is this the best way to Generate a Many-To-Many Relation using EF code first

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-06T14:51:30.130

Just create a few movies and a few types and create relationships by adding some of those types to the `Movie.Types` collection (or the other way around), for example:

```
protected override void Seed(MyContext context)
{
    var movie1 = new Movie { Name = "A", Types = new List<Type>() };
    var movie2 = new Movie { Name = "B", Types = new List<Type>() };
    var movie3 = new Movie { Name = "C", Types = new List<Type>() };

    var type1 = new Type { MovieType = "X" };
    var type2 = new Type { MovieType = "Y" };

    movie1.Types.Add(type1);

    movie2.Types.Add(type1);
    movie2.Types.Add(type2);

    movie3.Types.Add(type2);

    context.Movies.Add(movie1);
    context.Movies.Add(movie2);
    context.Movies.Add(movie3);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-20T02:53:12.130

You need a joining table to implement a many-to-many relationship.

For example, think of a scenario where students can enroll in multiple courses and a course can have mutiple students.

Class structure would look like,

```
class Course
{  
  public int Id { get; set; }
  public string Name { get; set; }

}

class Student
{  
  public int Id { get; set; }
  public string Name { get; set; }

}

class CourseStudent
{  
  public int Id { get; set; }
  public int CourseId { get; set; }
  public int StudentId { get; set; }
  public Course Course { get; set; }
  public Student Student { get; set; }
} 
```

To seed data, just create instances of the **CourseStudent** class and AddOrUpdate on the DbSet.

```
 var course1 = new Course { Name = "course1" };
    var course2 = new Course { Name = "course2" };

    var student1 = new Student { Name = "student1" };
    var student2 = new Student { Name = "student2" };

context.CourseStudents.AddOrUpdate(r => r.Id,
                new CourseStudent { Course = course1, Student = student1 },
                new CourseStudent { Course = course1, Student = student2 },
                new CourseStudent { Course = course2, Student = student1 },
                new CourseStudent { Course = course2, Student = student2 }); 
```

# android - TabWidget 中的按钮

> ID：14183166
> 
> 赞同：1
> 
> 时间：2013-01-06T14:42:12.617
> 
> 标签：android, tabwidget

我试图在 TabWidget 中放置一个按钮，这意味着我想查看所有选项卡，最右边的将是一个按钮。
我不能用 xml 来做（如果有人能告诉我怎么做会很有帮助）所以我通过代码添加了按钮。问题是按钮没有被点击，我听到设备发出点击声但没有任何反应，我没有看到`OnClickListener`被调用。
你能看看代码并告诉我我做错了什么吗？
此代码在`onCreate()`我的活动中。

```
TabWidget tabWidget = (TabWidget)findViewById(android.R.id.tabs);

Button button = new Button(this);
button.setBackgroundResource(R.drawable.settings);
button.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT));
button.setClickable(true);
button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        LogWrapper.d(TAG, "************************************");
        startActivity(new Intent(MyActivity.this, SettingsActivity.class));
    }
});
tabWidget.addView(button); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:11:48.687

我有一个解决方案，我不知道它是否是最好的，但它可以提供。

我已经构建了带有单个按钮的 xml 文件，将其充气并将其添加到 TabWidget，这似乎可行。

settings_button.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/settingsButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/settings" >
    </Button>

</LinearLayout> 
```

我的活动.java

```
TabWidget tabWidget = (TabWidget)findViewById(android.R.id.tabs);

View layout = LayoutInflater.from(this).inflate(R.layout.settings_button, null);
Button button = (Button)layout.findViewById(R.id.settingsButton);
button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        LogWrapper.d(TAG, "*****************************************************");
        startActivity(new Intent(MyActivity.this, SettingsActivity.class));
    }
});
layout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
tabWidget.addView(layout); 
```

Anyway, this is my solution offer. After checking it, it doesn't look good a button in the TabWidget. I'll think what to do with it.

# android - RECEIVE_SMS 广播接收器不工作？

> ID：14183168
> 
> 赞同：1
> 
> 时间：2013-01-06T14:42:23.233
> 
> 标签：android

我已经查看了所有“常见”错误，但我没有犯过（不幸的是）。

我一生都无法弄清楚为什么（至少），我没有收到日志消息！

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.liamwli.spyware.usertrack"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="10" />

    <permission
        android:name="com.liamwli.spyware.usertrack.permission.PREFS"
        android:description="@string/permdisc"
        android:label="Prefs"
        android:logo="@drawable/ic_launcher"
        android:protectionLevel="signature" >
    </permission>

    <uses-permission android:name="com.liamwli.spyware.usertrack.permission.PREFS" />

    <permission
        android:name="com.liamwli.spyware.usertrack.permission.CONFIG"
        android:description="@string/permdiscconfig"
        android:label="Config"
        android:logo="@drawable/ic_launcher"
        android:protectionLevel="signature" >
    </permission>

    <uses-permission android:name="com.liamwli.spyware.usertrack.permission.CONFIG" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.SEND_SMS" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".ProcessSMS"
            android:excludeFromRecents="true"
            android:label="@string/app_name" >
        </activity>
        <activity android:name=".Launcher" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ActivityConfig"
            android:excludeFromRecents="true"
            android:exported="true"
            android:label="@string/app_name"
            android:permission="com.liamwli.spyware.usertrack.permission.CONFIG" >
        </activity>
        <activity
            android:name=".Prefs"
            android:permission="com.liamwli.spyware.usertrack.permission.PREFS" >
            <intent-filter>
                <action android:name="com.liamwli.spyware.usertrack.PREFS" />

                <category android:name="android.intent.cetagory.PREFERENCE" />
            </intent-filter>
        </activity>

        <receiver
            android:name=".CodeReceive"
            android:enabled="true"
            android:excludeFromRecents="true"
            android:exported="true" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SECRET_CODE" />

                <data android:scheme="android_secret_code" />
            </intent-filter>
        </receiver>
        <receiver
            android:name=".ReceiveSMS"
            android:enabled="true"
            android:exported="true" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

接收短信.java：

```
package com.liamwli.spyware.usertrack;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.telephony.SmsMessage;
import android.util.Log;

public class ReceiveSMS extends BroadcastReceiver {

    SharedPreferences prefs;
    SharedPreferences.Editor edit;

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        Log.d("User Track", "SMS Received!");

        prefs = PreferenceManager.getDefaultSharedPreferences(context);
        edit = prefs.edit();

        Bundle myBundle = intent.getExtras();
        SmsMessage[] messages = null;
        String strMessage = "";

        if (myBundle != null) {
            Object[] pdus = (Object[]) myBundle.get("pdus");
            messages = new SmsMessage[pdus.length];

            for (int i = 0; i < messages.length; i++) {
                messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                if (messages[i].getMessageBody().toString()
                        .equals(prefs.getString("cbp_pass", null))) {

                    Log.d("User Track", "Message Equals Password!");
                    Intent start = new Intent(context, ProcessSMS.class);
                    start.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    start.putExtra("Sender",
                            messages[i].getOriginatingAddress());
                    context.startActivity(start);

                }

            }

        }
    }
} 
```

我什至没有收到“收到短信！” 日志消息，它告诉我这根本不起作用。

第二个问题是，我怎样才能让 SMS 绕过 SMS 应用程序并直接进入我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:48:38.170

你没有`android.permission.RECEIVE_SMS`权限。添加

```
<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

到你的清单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T17:15:58.030

这适用于我，因为 API 级别 23。我们需要在运行时请求权限。希望这可以帮助任何有类似问题的人。 [https://stackoverflow.com/a/35462909/4544780](https://stackoverflow.com/a/35462909/4544780)

# java - 单个泛型参数同时接受两种不同的类型

> ID：14183170
> 
> 赞同：0
> 
> 时间：2013-01-06T14:42:48.060
> 
> 标签：java, generics, parameters

在以下场景中，我有一个接受 2 个 E 型数组的方法。我的理解是，这个 E 参数意味着两个数组都可以是任何类型，但它们必须相同（正如我从[这个](https://stackoverflow.com/questions/1759549/java-generics-multiple-generic-parameters)问题中得出的那样）。我已经用两个数组进行了测试，一个整数和一个双精度，但我没有收到任何错误。我收到的输出是“14”，这是两个数组的组合大小，没有抛出任何错误。

有人可以解释一下为什么会这样吗？

```
public static <E> void showCombinedLength(E[] array1, E[] array2){
    System.out.println(array1.length + array2.length);
}

public static void main(String[] args) {
    Integer[] integerArray = {1, 2, 3, 4, 5, 6, 7};
    Double[] doubleArray = {1.1, 2.2, 3.3, 4.4, 5.5, 6.6, 7.7 };
    PrintArray.showCombinedLength(integerArray, doubleArray);
} 
```

输出：

> 14

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:47:25.877

当您在方法定义中定义单个泛型类型时，您只能将该方法与两个相同类型的数组一起使用。

但是，在 java 中，数组类型是协变的，因此 Integer[] 和 Double[] 都是 Object[] 的子类（它们也是 Number[] 的子类）。所以你的代码会一直编译，不需要指定多个类型参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T14:45:39.117

您的数组都是对象数组。调用它

```
PrintArray.<Integer>showCombinedLength(integerArray, doubleArray); 
```

并且编译器将拒绝编译。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-06T14:46:23.793

Java 在 1.5 版中引入了泛型。由于向后兼容，Java 字节码不知道某些方法是通用的，而另一种则不是。这就是为什么编译后你的方法真的是：

`public static void showCombinedLength(Object[] array1, Object[] array2)`

所有泛型类型都真正更改为`Object`. 所以两者`Integer[]`都是具有方法`Double[]`的对象数组。`length`这就是此代码有效的原因。

# javascript - jQuery/Javascript 交互式时区地图

> ID：14183173
> 
> 赞同：1
> 
> 时间：2013-01-06T14:43:14.470
> 
> 标签：javascript, jquery, svg, jquery-svg

我看过：http: [//jvectormap.com/](http://jvectormap.com/)

我想自己做一些类似的事情，基本上是一张具有不同区域（用于时区）的世界地图，当鼠标悬停时，它可能会变灰，并且显然带有相关的值。

但是，我对如何做到这一点完全感到困惑。

我听说过 SVG 并尝试了一两件事，但如果有人能指出我正确的方向，我很乐意提供帮助。

通常我不会问这么平凡的问题，但我真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-10T11:30:13.980

对于任何偶然发现这个问题的人：

[Timezonepicker](http://timezonepicker.com/?w=1024&base=gray)是一个非常好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:58:42.790

也许你可以试试[mapper.js](http://www.netzgesta.de/mapper/)。第二个演示（总统演示）展示了如何将鼠标悬停在地图外的对象上以突出显示地图中的区域。

# python - 为 mac 安装 TortoiseHg：没有名为 mercurial 的模块

> ID：14183180
> 
> 赞同：2
> 
> 时间：2013-01-06T14:44:18.193
> 
> 标签：python, mercurial, python-2.7, tortoisehg

我正在尝试按照以下说明为 Mac 安装 TortoiseHg：[https ://bitbucket.org/tortoisehg/thg/wiki/developers/MacOSX#!alternative-install-via-macports](https://bitbucket.org/tortoisehg/thg/wiki/developers/MacOSX#!alternative-install-via-macports)

我正在尝试按照有关“替代方案：通过 Homebrew 安装”的说明进行操作，但遇到了问题。

当我`./thg log`按照说明执行时，TortoiseHg 正在启动。但是，当我尝试从 python 脚本创建应用程序时，会创建应用程序，但是当我启动它时它会崩溃。

这是输出：

```
Traceback (most recent call last):
  File "/Users/fabienhenon/Documents/thg-mac-app/dist/TortoiseHg.app/Contents/Resources/__boot__.py", line 316, in <module>
    _run()
  File "/Users/fabienhenon/Documents/thg-mac-app/dist/TortoiseHg.app/Contents/Resources/__boot__.py", line 311, in _run
    exec(compile(source, path, 'exec'), globals(), globals())
  File "/Users/fabienhenon/Documents/thg-mac-app/dist/TortoiseHg.app/Contents/Resources/main.py", line 28, in <module>
    imp.load_source("thg", SCRIPT_DIR + "/bin/thg")
  File "/Users/fabienhenon/Documents/thg-mac-app/dist/TortoiseHg.app/Contents/Resources/bin/thg", line 56, in <module>
    from mercurial import demandimport
ImportError: No module named mercurial
2013-01-06 12:25:17.436 TortoiseHg[406:707] TortoiseHg Error
logout

[Opération terminée] 
```

当我输入：`hg --version`我有以下输出：

```
Mercurial Distributed SCM (version 2.4.2+20130102)
(see http://mercurial.selenic.com for more information)

Copyright (C) 2005-2012 Matt Mackall and others
This is free software; see the source for copying conditions. There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

有人可以帮我解决这个问题吗？

谢谢您的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T17:06:57.193

我找到了解决此问题的解决方案。

从我收到的错误消息中，脚本找不到名为 mercurial 的模块。我是 Python 新手，所以我必须进行一些研究以了解模块导入的工作原理，并且我发现了一些关于使用`'sys'`模块动态导入模块的信息。

我的解决方案是编辑 tortoisehg 源代码（错误来自的文件）以动态添加我的 mercurial 模块的路径，`'sys.path'`以便程序知道在哪里可以找到 mercurial 模块。

这是代码（在“thg”python文件中，第56行（如错误所述））：

```
import sys
sys.path.append("/Library/Python/2.7/site-packages") 
```

您必须在此行之前添加此代码：

```
from mercurial import demandimport 
```

并且路径必须与您的 mercurial 文件夹的位置相对应。

# c# - 从数据库中删除列数据

> ID：14183181
> 
> 赞同：0
> 
> 时间：2013-01-06T14:44:25.387
> 
> 标签：c#, asp.net, sql-server

在我的数据库中，我有用户名、密码、地址、城市...等。使用此代码，它会从数据库中删除整行：

```
SqlCommand cmd = new SqlCommand("Delete from customer_registration where username='"+ Session["username"] +"'",del); 
```

我的数据库与数据： [Db](http://postimage.org/image/atblleck3/)

如何删除某些列数据，或将其设置回*NULL*？ [D b](http://postimage.org/image/xeucx6r6z/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T14:46:19.627

你可以这样更新你的记录

```
update your_table
set some_column = NULL
where id = 123 
```

# unit-testing - 隔离框架和模拟框架的区别

> ID：14183182
> 
> 赞同：10
> 
> 时间：2013-01-06T14:44:27.640
> 
> 标签：unit-testing, frameworks, mocking

术语“隔离框架”和“模拟框架”有什么区别？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-04-20T11:07:58.753

我觉得公认的答案是错误的，模拟框架也是隔离框架。

[Roy Oshroves 书“单元测试的艺术”的](http://www.manning.com/osherove2/)第 5.1 节说

> *隔离框架*是一组可编程的 API，可以更轻松地创建模拟和存根对象。隔离框架使开发人员无需编写重复代码来测试或模拟对象交互。
> 
> 这个定义可能听起来有点乏味，但它需要是通用的，以便包含各种隔离框架。大多数语言都存在隔离框架，这些语言都有与之关联的单元测试框架。例如，C++ 有 mockpp 等框架，Java 有 jMock 和 EasyMock 等。.NET 有 NMock、Moq、Typemock Isolator 和 Rhino Mocks。

在他的[博客文章](http://osherove.com/blog/2012/10/14/the-three-values-of-a-good-isolation-framework.html)中，他提到

> 隔离框架（模拟框架......但这是一个可怕的名字。模拟这个词已经重载）

所以他们通常指的是同一件事。隔离框架可用于启动模拟，但它也适用于其他*测试替身*。隔离框架将是模拟框架的一部分的超集。

[测试替身](http://xunitpatterns.com/Test%20Double.html)是一个总称

*   测试存根
*   假物体
*   测试间谍和
*   模拟对象

这四种类型来自 Lasse Koskela 的《[有效单元测试](https://rads.stackoverflow.com/amzn/click/com/1935182579)》一书。Martin Fowler 和 Gerard Meszaros[列出了五种类型](http://www.martinfowler.com/bliki/TestDouble.html)：

*   虚拟对象
*   假物体
*   存根
*   间谍和
*   嘲笑

但区别是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:00:44.583

这两个术语经常互换使用，但有一个重要的区别。*在我看来，存根*和*模拟*之间存在类似的区别。*Stub* ie **Isolation Framework**只提供预定义的输出，从而将“测试”与具有复杂内部状态、响应时间慢等的外部系统隔离开来。*Mock* ie **Mock Frameworks**不仅在需要时提供预定义的输出，而且还预先编程了期望形成他们期望接收的呼叫的规范。因此，mock 会跟踪其使用情况，如果使用不当，“测试”将失败。但是存根只提供预定义的输出。

您可以在[Martin Fowler 的 Mocks Aren't Stubs 文章中找到更多信息](http://martinfowler.com/articles/mocksArentStubs.html#TheDifferenceBetweenMocksAndStubs)

# c++ - 多映射查询 - 我们存储具有多个值的键的顺序

> ID：14183186
> 
> 赞同：0
> 
> 时间：2013-01-06T14:44:45.527
> 
> 标签：c++, stl, multimap

> **可能重复：**
> [stl 的多图如何插入尊重排序？](https://stackoverflow.com/questions/1595270/how-does-the-stls-multimap-insert-respect-orderings)

我有一个多图如下 - `multimap<string,string> myMultiMap;`

```
myMultiMap[sKey] = s1;
myMultiMap[sKey] = s2;
myMultiMap[sKey] = s3; 
```

我按顺序添加 s1,s2,s3。稍后，我可能会传递一个值 1,2,3 并基于该值获取它的值。

例如，如果我通过 '1'，我应该返回 s1。

如果我这样做 -`iterator = myMultiMap.equal_range(sKey);` 获取迭代器列表中第一个元素的值。

这行得通吗？迭代器是否按照插入的顺序存储键的值（如果有多个值）？

请给个建议。

thx - 阿南德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:57:14.383

在 C++11 中，检索顺序似乎与插入顺序相同（参见此处：[http](http://en.cppreference.com/w/cpp/container/multimap) ://en.cppreference.com/w/cpp/container/multimap ）

我在 GCC 4.7.1 上尝试了以下简短程序，它满足了这一期望：

```
#include <iostream>
#include <map>
#include <algorithm>

using namespace std;

int main()
{
    multimap<string, string> m;
    m.insert({"a", "x"});
    m.insert({"a", "y"});
    m.insert({"a", "z"});

    auto r = m.equal_range("a");
    for_each(r.first, r.second, [] (decltype(*(r.first))& p) { cout << p.second << endl; });

    return 0;
} 
```

PS：请注意，`std::multimap`没有`operator []`

# php - 使用 $_POST 变量时 MySQL 查询不起作用

> ID：14183188
> 
> 赞同：1
> 
> 时间：2013-01-06T14:44:52.210
> 
> 标签：php, mysql, wordpress, variables, post

> **可能重复：**
> [如何在 MySQL 插入语句中包含 PHP 变量](https://stackoverflow.com/questions/7537377/how-to-include-a-php-variable-inside-a-mysql-insert-statement)

我想按名称选择 Wordpress 类别的类别 ID。奇怪的是，如果我手动定义类别，它一切正常。

echo 命令给了我类别名称，最后我在变量 $catid 中获得类别 ID。

但是，如果我通过表单发送它，则 echo 命令会为我提供与手动定义时完全相同的类别名称，但 MySQL-Command 不起作用，这意味着 $catid 变量保持为空。

这里有没有人有一个想法，因为我无法理解为什么它在直接定义时有效，但在通过表单发布完全相同的字符串时无效。下面的代码示例是我的代码的一部分，其中 $category 变量通过表单传递。如果我要取消注释手动变量并注释 post 变量，它将全部工作。

```
// $category = "Manual"; // manually defined

$category = $_POST['category']; //defined through a form

echo $category;

$connect = mysql_connect(localhost,abc,def); 

if (!$connect) {
    die('Could not connect: '.mysql_error());
}

mysql_select_db("abc");
$queryresult = mysql_query("SELECT * FROM `wp_terms` WHERE `name`='$category' LIMIT 0,1");

while($row = mysql_fetch_array( $queryresult )) {
     $catid = $row[term_id];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:51:48.103

It's a good idea to confirm the contents of your post data, something like this:

```
print_r($_POST); die; 
```

That will allow you to see if your variable is even present in the submission, my bet is either you aren't passing it, or it's coming through under another name (Maybe even a typo).

It's difficult to answer this question without the form and the processing code, but you can at-least de-bug your data, by dumping variable contents to screen.

Hope this helps.

PS: This is wasting resources:

```
echo "$category"; 
```

You can use this:

```
echo $category; 
```

PPS: Best to clean your variables to prevent SQL injection, this code is very dangerous:

```
$category = $_POST['category'];
mysql_query("SELECT * FROM `wp_terms` WHERE `name`='$category' LIMIT 0 , 1"); 
```

If your variable is passing from PPOST correctly, try de-bugging your SQL query like so:

```
$query = sprintf("SELECT * FROM wp_terms WHERE name='%s' LIMIT 0,1", $category);
print_r($query); die; 
```

Then if you have some interface for your database running, try throwing your query through it and checking for errors and results (Just to confirm your retrieval statement).

If this works fine, then you know it's something to do with your SQL connect statements for sure, and you'll need to find your PHP version and dump out the value of $connect. Are you running this code on a shared hosting environment, or your own private server?

# .net - RDLC 部分格式化

> ID：14183192
> 
> 赞同：1
> 
> 时间：2013-01-06T14:45:06.807
> 
> 标签：.net, reporting, rdlc

![样本报告图](../Images/c22382e400b9a61941dc0ba4b6dd0f8c.png)

嗨朋友们，我需要对表格的字段应用部分格式（主要是粗体）。我动态创建数据表并将其应用于 rdlc 报告。我使用 VS2010 和 .Net 4.0。我在网上看到了使用 html 占位符的建议，但找不到好的教程。任何帮助表示赞赏。我已经包含了我想要实现的示例图像，其中每一行都是来自数据表行的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:41:10.630

使用 html 语法并不难。

字符串（来自源）必须是这样的：

`The patient should take aspirin <b>325 mg</b>`

在占位符属性中，您必须检查该`HTML - Interpret HTML tags as styles`选项。

[这里是](http://msdn.microsoft.com/en-us/library/cc627491.aspx)来自 msdn 库的步骤

# javascript - Typeof 根据括号进行不同的评估

> ID：14183195
> 
> 赞同：0
> 
> 时间：2013-01-06T14:45:12.610
> 
> 标签：javascript, typeof

我有以下代码示例：

```
Application.Polyfills.prototype.prettifyCode = function(enable, js_lib, css_lib) {
    return Modernizr.load([{
        test : enable,
        yep : [ css_lib, js_lib ],
        complete: function() {
            return window.prettyPrint && prettyPrint();
        }
    }]);
}; 
```

如果我做一个`console.log(typeof this.prettifyCode)`，其中`this`指的是`Application.Polyfills`，我得到`function`，但如果我做了`console.log(typeof this.prettifyCode())`我得到`undefined`。有人能告诉我为什么会这样吗？我该如何解决它，以便在两种情况下得到相同的结果，因为大多数时候函数需要参数，所以我需要使用括号？

更具体地说，我有一个方法：

```
Application.Polyfills.prototype.callPolyfills = function(array) {
    for (var i = array.length - 1; i >= 0; i--) {
        console.log(typeof array[i]);
        (typeof array[i] === "function") ? array[i].apply(this, [ this ]) : console.log('Index [' + i + ']: Invalid [ Function Required ]') ;
    };
}; 
```

上面的方法用于调用我放置在数组中的所有函数，如下所示：

```
this.callPolyfills([
        self.polyfillize([
            {
                test : [Modernizr.localstorage, Modernizr.sessionstorage],
                polyfill : [self.polyfills_url.storage_polyfill_url]
            },
            {
                test : [Modernizr.json],
                polyfill : [self.polyfills_url.json_polyfill_url]
            }
        ]),
        self.prettifyCode(self.prettify, self.libraries_url.google_code_prettyfier.css, self.libraries_url.google_code_prettyfier.js),
        self.consoleAvoidError()
    ]); 
```

对其中的所有未知变量进行抽象，我想看看我在该数组中调用的内容是否实际上是一个函数，因为我现在已经在尝试检查该`callPolyfills`方法。但它失败了，因为它`undefined`每次都返回，即使它是一个函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:47:09.407

`typeof this.prettifyCode()`正在检查返回值的类型`this.prettifyCode()`；这是`undefined`。

`typeof this.prettifyCode`但是，正在检查`prettifyCode`成员的类型是什么`this`；这是一个`function`

您不应该*希望*这些相同。*它们可能*相同的唯一方法是返回一个函数，但两者和都将是`this.prettifyCode`这一事实毫无意义。`typeof this.prettifyCode()``typeof this.prettifyCode``function`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T15:12:04.500

^(将此添加为新答案，因为这两个答案根本不相关)

* * *

你的功能`callPolyfills`是正确的；这就是您要传递`callPolyfills`的问题（您传递的是您不想调用的函数的*结果数组，而不是函数本身）。*

```
function foo() {
    return "hi";
};

var bar = foo; // stores a reference to the function foo in `bar`, but doesn't call foo.
var baz = foo(); // calls foo and stores the result of the function ("hi") in baz. 
```

你在做什么（除了令人困惑的论点之外，还有）`self`：`this`

```
callPolyfills([
    foo(),
    foo(),
    foo()
]); 
```

...即`callPolyfills`多次说“嗨”，但实际上并没有传递你想要的东西。

你应该通过的是；

```
callPolyfills([
    foo,
    foo,
    foo
]); 
```

但是，这会阻止您为函数指定参数；在这种情况下，最简单的方法是将这些函数包装在匿名函数中。

```
this.callPolyfills([
  function () { 
    self.polyfillize([{
      test: [Modernizr.localstorage, Modernizr.sessionstorage],
      polyfill: [self.polyfills_url.storage_polyfill_url]
    }, {
      test: [Modernizr.json],
      polyfill: [self.polyfills_url.json_polyfill_url]
    }]);
  }, function () {
    self.prettifyCode(self.prettify, self.libraries_url.google_code_prettyfier.css, self.libraries_url.google_code_prettyfier.js);
  },
  self.consoleAvoidError
]); 
```

...但是我不确定您真正获得了*什么*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T15:15:13.393

也许不是在 callPolyfills 中显式调用你的 polyfill，你可以改变你的方法？像这样：

```
this.callPolyfills([
    [self.polyfillize, [
        {
            test : [Modernizr.localstorage, Modernizr.sessionstorage],
            polyfill : [self.polyfills_url.storage_polyfill_url]
        },
        {
            test : [Modernizr.json],
            polyfill : [self.polyfills_url.json_polyfill_url]
        }
    ]],
    [self.prettifyCodeself.prettify, self.libraries_url.google_code_prettyfier.css, self.libraries_url.google_code_prettyfier.js],
    self.consoleAvoidError
]); 
```

那么你会像这样检查：

```
Application.Polyfills.prototype.callPolyfills = function(array) {
    for (var i = array.length - 1; i >= 0; i--) {
        if (typeof array[i] == "function") {
            // call with no arguments
            array[i].apply(this);
        }
        else if (typeof array[i].shift() == "function") {
            // call with arguments
            array[i].apply(this, array[i]);
        }
        else {
            // Invalid [ Function Required ]') ;
        }
    };
}; 
```

# c++ - 在 Windows 上的 OpenTLD 安装中构建 INSTALL 项目时出错？

> ID：14183211
> 
> 赞同：0
> 
> 时间：2013-01-06T14:46:54.293
> 
> 标签：c++, visual-studio-2010, cmake

*   ***openTLD 主项目***的构建没有错误。
*   ***INSTALL 项目***出现此错误：

> ```
> Error 1   error MSB3073: The command "setlocal
> "E:\CMake 2.8\bin\cmake.exe" -DBUILD_TYPE=Release -P cmake_install.cmake
> if %errorlevel% neq 0 goto :cmEnd
> :cmEnd
> endlocal & call :cmErrorLevel %errorlevel% & goto :cmDone
> :cmErrorLevel
> exit /b %1
> :cmDone
> if %errorlevel% neq 0 goto :VCEnd
> :VCEnd" exited with code 1\. C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets 113 
> ```

这是***openTLD 项目***( [LINK](https://github.com/gnebehay/OpenTLD/zipball/master) )。所有其他项目均已构建且没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-23T08:46:24.163

你必须打电话

```
setlocal "E:\CMake 2.8\bin\cmake.exe" -DBUILD_TYPE=Release -P cmake_install.cmake 
```

在命令行上查看更多有用的错误消息。在您的情况下，您收到错误，因为它没有以足够的权限启动。

=>**运行`INSTALL build with administrative privileges`**

# php - 字符串中的 URL 检测

> ID：14183221
> 
> 赞同：2
> 
> 时间：2013-01-06T14:47:30.193
> 
> 标签：php, regex, preg-match

> **可能重复：**
> [Linkify Regex 函数 PHP Daring Fireball 方法](https://stackoverflow.com/questions/10002227/linkify-regex-function-php-daring-fireball-method)

我正在尝试从字符串中获取 URL，我有这个

```
$link_count = count(explode('http',$post));
if($link_count > 0){
    preg_match_all("#https?://[^.\s]+\.[^\s]+#ix", $note, $matches);
    foreach(){} etc..
} 
```

这里的问题是我也希望能够检测到这样的 URL； [http://www.link.com](http://www.link.com)或 www.link.com 或 link.com 附注：我在这里搜索过类似的问题，但我还没有看到解决所有这些类型的 URL 的问题。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:11:50.737

尝试

```
"/\b((http(s)?:\/\/)?(www\.[a-zA-Z0-9\/\\\:\?\%\.\&\;=#\-\_\!\+\~\,]*))/is 
```

正如马里奥所说，没有协议前缀的链接在技术上不是链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T14:52:40.380

试试这个正则表达式：

```
#(https?://)?([a-z0-9-]+\.)+[a-z0-9]+/?#i 
```

# jquery - $() 和 jQuery() 是一回事吗？

> ID：14183222
> 
> 赞同：-1
> 
> 时间：2013-01-06T14:47:40.047
> 
> 标签：jquery

> **可能重复：**
> [jQuery中符号$的含义是什么？](https://stackoverflow.com/questions/1049112/what-is-the-meaning-of-symbol-in-jquery)
> [$ 与 jQuery](https://stackoverflow.com/questions/2212602/versus-jquery)

我对 jQuery 有点陌生，但已经用它做了一些事情。但是我从未使用过 jQuery() 函数，我很好奇它的目的是什么。

这些是一样的吗？

```
jQuery("body") 

$("body") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T14:49:27.887

$ 是 jQuery 的别名。您可以使用其中一种。

`jQuery.noConflict();`如果发生冲突，您可以停用 $

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-06T14:49:50.117

从源代码：

```
// Expose jQuery to the global object
window.jQuery = window.$ = jQuery; 
```

所以是的，它是一样的。但是你有两个访问权限，这样你就可以避免冲突。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-06T14:59:13.287

要成为解决答案第二部分的唯一答案：

[`jQuery.data()`](http://api.jquery.com/jQuery.data)需要一个元素作为第一个参数，它指示您希望为哪个元素检索或设置信息。

[`.data()`](http://api.jquery.com/data)对 jQuery 对象进行操作，并在内部调用`jQuery.data()`，将 jQuery 对象中包含的元素作为第一个参数[[source]](https://github.com/jquery/jquery/blob/1.8.3/src/data.js#L280)传递。

* * *

TLDR：

```
jQuery.data(document.body, 'foo', 'bar') === $(document.body).data('foo', 'bar'); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-06T14:51:23.067

是的，它们是相同的，请参见[此处](http://api.jquery.com/jQuery/)：

> 在上面列出的第一个公式中，jQuery() — 也可以写成 $() (...)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-06T15:03:01.940

[这是来自jQuery 论坛](http://forum.jquery.com/topic/basics-what-s-the-difference-between-and-jquery-and-other-n00b-qs)的一个很好的解释。

> $ 和 jQuery 都指向 window.jQuery 对象，所以它们是一回事。一些脚本使用 jQuery 而不是 $ 的原因是为了防止与其他库发生冲突，例如原型或 jquery 的不同版本，它们都使用 $ 变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T14:49:44.840

基本上，它是一个别名。通常它用于避免与使用相同 $ 的其他库（例如 Prototype）发生冲突。$ 只是一个名称 - JavaScript 中的名称可以包含美元符号，并且可以仅包含一个美元符号。

看看[这个答案](https://stackoverflow.com/questions/2212602/jquery-vs-jquery)或[这个](https://stackoverflow.com/questions/1180213/the-dollar-sign)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-06T14:57:35.443

作为答案的补充，.data 和 jQuery.data() 函数是互补的，因为 (.data) 之一被应用在 jQuery 对象中，即选择操作的结果。例子：

```
$( "#someId" ).data( "foo" ); 
```

另一种是更通用的方法。它们都用于将任意数据关联到 DOM 元素（并读取 HTML5`data`属性）。看看文档描述：

[jQuery.data()](http://api.jquery.com/jQuery.data/)

[。数据（）](http://api.jquery.com/data/)

# codeigniter - CodeIgniter 可选参数

> ID：14183231
> 
> 赞同：12
> 
> 时间：2013-01-06T14:49:03.677
> 
> 标签：codeigniter, routing, routes

我正在尝试在 CI 中使用路由来创建注册表单

`signup`被重新路由到`user/signup`

但我的注册功能可以包含一个参数：`function signup($type = 1)`

如何通过路由使其成为可选？我试过`$route['signup/?(:num)'] = 'user/signup/$1';`了，但是去的时候`/signup`我得到一个 404，只能`/signup/1/`工作。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-06T14:52:35.553

表达这一点的最清晰方法可能是声明两条路线：

```
$route['signup'] = "user/signup";
$route['signup/(:num)'] = "user/signup/$1"; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-04-18T11:44:03.457

对于其他在适当时候阅读本文的人-我相信答案应该是`$route['signup/?(:num)?']`使数字也成为可选的。我在其他事情上也有类似的问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-08-26T22:51:24.590

@Ukuser32 的答案的问题在于它允许像 signup69 这样的 URI 被接受，在这种情况下这可能是无害的，但在一般情况下是不可取的。只需将斜线与捕获的 :num 一起放入

```
$route['signup(/:num)?'] = "user/signup$1" 
```

请注意，如果您有多个可选段，则需要嵌套它们....

# java - Android Oracle 数据库 JDBC6

> ID：14183235
> 
> 赞同：0
> 
> 时间：2013-01-06T14:49:28.440
> 
> 标签：java, android, oracle, jdbc, connection

您好我想创建到我的 Oracle 数据库的连接。我以前使用过 ojdbc14.jar，一切正常，但连接应该是安全的，我想加密文件。所以我决定现在使用 ojdbc5.jar。jar 是我的“libs”文件夹

从 jdbc14 更改为 jdbc6 的原因我想使用属性在我的数据库和我的设备之间进行安全的数据交换

早些时候我也尝试过 jdbc5，但是我只得到了一个 java Heap Size 错误。

```
public class MainActivity extends Activity
{

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        jdbccoonect connect = new jdbccoonect();
        connect.execute();

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private class jdbccoonect extends AsyncTask<Void, Integer, Boolean>
    {

        @Override
        protected Boolean doInBackground(Void... params)
        {
            // TODO Auto-generated method stub
            String username = "scott";
            String password = "tiger";
            try
            {
                Log.d("HI","HI");
                Class.forName("oracle.jdbc.OracleDriver");
                            //Class.forName("oracle.jdbc.driver.OracleDriver");

                /*Connection conn = DriverManager
                        .getConnection("jdbc:oracle:thin://@10.10.0.9:1521/service",
                                        username, password);*/

                Log.d("HI","HI");
            }
            catch (ClassNotFoundException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

    }

} 
```

错误：

```
01-05 22:27:56.814: D/HI(1610): HI
01-05 22:27:57.005: E/dalvikvm(1610): Could not find class 'javax.management.MBeanServer', referenced from method oracle.jdbc.driver.OracleDriver.registerMBeans
01-05 22:27:57.005: W/dalvikvm(1610): VFY: unable to resolve check-cast 716 (Ljavax/management/MBeanServer;) in Loracle/jdbc/driver/OracleDriver;
01-05 22:27:57.005: D/dalvikvm(1610): VFY: replacing opcode 0x1f at 0x002d
01-05 22:27:57.005: I/dalvikvm(1610): Could not find method java.lang.management.ManagementFactory.getPlatformMBeanServer, referenced from method oracle.jdbc.driver.OracleDriver.registerMBeans
01-05 22:27:57.005: W/dalvikvm(1610): VFY: unable to resolve static method 3734: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
01-05 22:27:57.005: D/dalvikvm(1610): VFY: replacing opcode 0x71 at 0x0080
01-05 22:27:57.015: I/dalvikvm(1610): Could not find method java.lang.management.ManagementFactory.getPlatformMBeanServer, referenced from method oracle.jdbc.driver.OracleDriver.registerMBeans
01-05 22:27:57.015: W/dalvikvm(1610): VFY: unable to resolve static method 3734: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
01-05 22:27:57.015: D/dalvikvm(1610): VFY: replacing opcode 0x71 at 0x0094
01-05 22:27:57.015: I/dalvikvm(1610): Could not find method java.lang.management.ManagementFactory.getPlatformMBeanServer, referenced from method oracle.jdbc.driver.OracleDriver.registerMBeans
01-05 22:27:57.015: W/dalvikvm(1610): VFY: unable to resolve static method 3734: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
01-05 22:27:57.015: D/dalvikvm(1610): VFY: replacing opcode 0x71 at 0x00a8
01-05 22:27:57.015: I/dalvikvm(1610): Could not find method java.lang.management.ManagementFactory.getPlatformMBeanServer, referenced from method oracle.jdbc.driver.OracleDriver.registerMBeans
01-05 22:27:57.015: W/dalvikvm(1610): VFY: unable to resolve static method 3734: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
01-05 22:27:57.015: D/dalvikvm(1610): VFY: replacing opcode 0x71 at 0x00bc
01-05 22:27:57.015: I/dalvikvm(1610): Could not find method java.lang.management.ManagementFactory.getPlatformMBeanServer, referenced from method oracle.jdbc.driver.OracleDriver.registerMBeans
01-05 22:27:57.015: W/dalvikvm(1610): VFY: unable to resolve static method 3734: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
01-05 22:27:57.015: D/dalvikvm(1610): VFY: replacing opcode 0x71 at 0x00d1
01-05 22:27:57.025: W/dalvikvm(1610): VFY: unable to resolve exception class 712 (Ljavax/management/JMException;)
01-05 22:27:57.025: W/dalvikvm(1610): VFY: unable to resolve exception class 712 (Ljavax/management/JMException;)
01-05 22:27:57.025: W/dalvikvm(1610): VFY: unable to resolve exception class 712 (Ljavax/management/JMException;)
01-05 22:27:57.025: W/dalvikvm(1610): VFY: unable to find exception handler at addr 0xfa
01-05 22:27:57.025: W/dalvikvm(1610): VFY: rejected Loracle/jdbc/driver/OracleDriver;.registerMBeans ()V
01-05 22:27:57.025: W/dalvikvm(1610): VFY: rejecting opcode 0x0d at 0x00fa
01-05 22:27:57.025: W/dalvikvm(1610): VFY: rejected Loracle/jdbc/driver/OracleDriver;.registerMBeans ()V
01-05 22:27:57.025: W/dalvikvm(1610): Verifier rejected class Loracle/jdbc/driver/OracleDriver;
01-05 22:27:57.035: W/System.err(1610): java.lang.ClassNotFoundException: oracle.jdbc.OracleDriver
01-05 22:27:57.055: W/System.err(1610): at java.lang.Class.classForName(Native Method)
01-05 22:27:57.055: W/System.err(1610): at java.lang.Class.forName(Class.java:234)
01-05 22:27:57.055: W/System.err(1610): at java.lang.Class.forName(Class.java:181)
01-05 22:27:57.055: W/System.err(1610): at at.security.jdbcsecuritydemo.MainActivity$jdbccoonect.doInBackground(MainActivity.java:51)
01-05 22:27:57.055: W/System.err(1610): at at.security.jdbcsecuritydemo.MainActivity$jdbccoonect.doInBackground(MainActivity.java:1)
01-05 22:27:57.065: W/System.err(1610): at android.os.AsyncTask$2.call(AsyncTask.java:185)
01-05 22:27:57.065: W/System.err(1610): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
01-05 22:27:57.065: W/System.err(1610): at java.util.concurrent.FutureTask.run(FutureTask.java:138)
01-05 22:27:57.065: W/System.err(1610): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
01-05 22:27:57.065: W/System.err(1610): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
01-05 22:27:57.075: W/System.err(1610): at java.lang.Thread.run(Thread.java:1019)
01-05 22:27:57.085: W/System.err(1610): Caused by: java.lang.VerifyError: oracle.jdbc.driver.OracleDriver
01-05 22:27:57.085: W/System.err(1610): ... 11 more
01-05 22:27:57.205: D/gralloc_goldfish(1610): Emulator without GPU emulation detected. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:54:50.473

Android 的 Java 与 Oracle 的 Java 不同。主要区别之一是与 Java 标准版 (SE) 不同的类库。

In your case that means that `ojdbc6.jar` won't run in Android's Java environment because certain Java SE classes are required but not available on Android. The error message mentions `javax.management.MBeanServer`. But I'm pretty sure that's not the only one.

I don't think you can make `ojdbc6.jar` work on Android. It's already surprising that `ojdbc14.jar` works. So stay with it, or redesign your app to go via an intermediary server.

# jquery - 可以看到 json 在开发人员工具中返回，但它没有进入我的 $.ajax 函数

> ID：14183236
> 
> 赞同：0
> 
> 时间：2013-01-06T14:49:31.563
> 
> 标签：jquery, ajax, json, jqplot

我有一个 jqplot 条形图，并且在条形图上附加了一个 onclick 事件。当我调用 ajax 函数时，它似乎一切正常，但我没有得到任何数据。alert('Success') 正在触发，但 ret 仍然为空。我可以在开发人员工具中看到这个并看到 json 回来了，但它没有进入 ret。我究竟做错了什么？

```
 $('#chartMonthly').bind('jqplotDataClick', 
            function (ev, seriesIndex, pointIndex, data) {
    $('#info1').html('series: '+seriesIndex+', point: '+pointIndex+', data: '+data);
    var ret = null;
    var url = 'wmHours.php';
    var obj = {};
    obj.m = "1";
    obj.d = "4";
    obj.y = '2013';
    $.ajax({
        async: false,
        url: url,
        type: 'post',
        data: obj,
        dataType:"json",
        success: gotData(ret)
        });  // End ajax

    }); // End function (ev, seriesIndex, pointIndex, data), end bind

function gotData(ret){

    alert('Success!');

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:52:03.327

试试这个：

```
$('#chartMonthly').bind('jqplotDataClick', 
            function (ev, seriesIndex, pointIndex, data) {
    $('#info1').html('series: '+seriesIndex+', point: '+pointIndex+', data: '+data);
    //var ret = null;  remove this line as it is useless here
    var url = 'wmHours.php';
    var obj = {};
    obj.m = "1";
    obj.d = "4";
    obj.y = '2013';
    $.ajax({
        //async: false,  you shouldn't do this!!!
        url: url,
        type: 'post',
        data: obj,
        dataType:"json",
        success: function(ret){gotData(ret);}
        });  // End ajax

    }); // End function (ev, seriesIndex, pointIndex, data), end bind

function gotData(ret){

    alert('Success :'+ret);

} 
```

顺便说一句，对任何 ajax 请求设置 async: false 确实是个坏主意！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T14:59:26.873

更改`success: gotData(ret)`为`success: gotData`。

您只想提供回调处理程序名称，除非您将调用包装在匿名函数中

# git - git-ftp resmo git-ftp.log

> ID：14183240
> 
> 赞同：3
> 
> 时间：2013-01-06T14:49:40.520
> 
> 标签：git, upload, ftp, git-ftp

我正在使用 resmo 的 git-ftp。 [https://github.com/resmo/git-ftp](https://github.com/resmo/git-ftp)。当我像这样运行第一个 init 命令（以及带有 push 的 olso）时

```
git ftp init -vv -u xxxxxxx@aruba.it -p - ftp.mydomain.com 
```

有一个致命的问题

```
There are 1 files to sync:
[1 of 1] Buffered for upload 'index.php'.
Uploading ...
fatal: Could not upload file: '.git-ftp.log'., exiting...
fatal: Could not upload., exiting... 
```

完整的共鸣在这里[http://jsfiddle.net/ehijon/PHwpw/](http://jsfiddle.net/ehijon/PHwpw/)

确保我在“.git”本地文件夹中设置了配置文件：

```
[git-ftp]
user = xxxxxxx@aruba.it
url = ftp://ftp.mydomain.com
password = xxmypassxx
deployedsha1file = public/.git-ftp.log 
```

在我使用 777 权限在远程设置“公共”文件夹但在本地我没有这个文件（.git-ftp.log）之后......我该怎么做才能创建它？

我试图在远程手动创建它，只是为了知道我是否有权限并且我可以。

ftp 用户和密码正确。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:07:28.490

好的，经过大量测试，我发现了愚蠢的问题。Aruba.it（意大利主机）在根目录中创建一个子目录，如下所示：

```
~/www.mydomain.com/public/... 
```

所以只需在 url 参数中设置 ftp 之后的文件夹：

```
url = ftp://ftp.mydomain.com/www.mydomain.com/public 
```

...我希望这可以帮助某人

# php - Strpos() 返回意外的字符串

> ID：14183246
> 
> 赞同：1
> 
> 时间：2013-01-06T14:50:08.303
> 
> 标签：php, strpos

我一生都无法弄清楚为什么这不起作用。

```
$value="http://www.google.com/trends/hottrends/atom/feed?pn=p1";

$startvar="http://";
$endvar="/";

$start = strpos($value,$startvar);

$end = strpos($value,$endvar,$start) + 8;

$results = substr($value,$start,$end-$start);
echo $results; 
```

无论我做什么，它总是会返回我不想要的 http://。我只想要 www.google.com。我在另一个领域使用它，它的行为与我想要的完全一样。如果我使用数字起点而不是 $startvar，我确实可以做到这一点，但这不一定总是有效。

我敢肯定，我错过了一些简单的事情。

谢谢布鲁斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:53:23.420

您需要跳过整个`$startvar`令牌才能到达字符串的下一位。 `strpos`返回匹配的开始。

```
$start = strpos($value,$startvar) + strlen($startvar); 
```

尽管您还需要确保`strpos`尚未返回，但如果未找到`false`，它将执行此操作：`$startvar`

```
$pos = strpos($value, $startvar)
if ($pos !== false)
{
   $start = $pos + strlen($startvar)
   //... other steps here...
} 
```

如果您的目标只是解析 URL，您可以使用 PHP 函数[parse_url](http://php.net/manual/en/function.parse-url.php)，这将使您的生活更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:42:34.310

为什么不使用

```
$value="http://www.google.com/trends/hottrends/atom/feed?pn=p1";
list($a,$b,$c) = split('[/]',$value);

echo'<br/>a = ',$a;
echo'<br/>b = ',$b;
echo'<br/>c = ',$c; 
```

你会发现这`$c`就是你的答案。

# javascript - 无法在wordpress中调用javascript函数

> ID：14183247
> 
> 赞同：1
> 
> 时间：2013-01-06T14:50:09.980
> 
> 标签：javascript, wordpress, function

这可能是基本的，但是这个问题需要我几个小时才能弄清楚，而且我还没有找到任何解决方案。我正在使用 Wordpress 3.5，并且在此文件夹中有一个名为 general.js 的外部 javascript 文件：wp-content/themes/[folder_name]/js。在 general.js 中，我编写了一个名为 hideError 的函数，基本上是为了隐藏从我的文本框中弹出的错误标签。

```
(function($) {
function hideErrorLabel(i) {
    //codes for handling label
}
})(jQuery); 
```

我这样称呼它：

```
<span class="component-wrapper" onmouseover="hideErrorLabel(0)">
    <input type="text" name="txtName" size="10" />
    <label for="txtName" class="error">All field must be filled.</label>
</span> 
```

我传递了一个参数，因为这些文本框是数组。奇怪的是，它给了我javascript错误“未定义hideErrorLabel”。什么地方出了错？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:52:50.080

```
(function($) {
 /* code */
})(jQuery); 
```

将确保`/* code */`在解析 DOM 后执行您提供的内容。`hideErrorLabel`但是，当解析器尝试插入`onmouseover`属性时，这将阻止定义。

为了解决这个问题，您还应该在以下部分中使用修改您的事件*处理*程序`/* code */`：

```
(function($) {
function hideErrorLabel(i) {
    //codes for handling label
}

$('.component-wrapper').on('mouseover',hideErrorlabel);
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T15:00:22.180

只需删除该 javascript 代码的第一行和最后一行。你隐藏了你的功能！在任何脚本标签中公开声明它。

```
<script type="text/javascript>
function hideErrorLabel(i) {
  //codes for handling label
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T15:10:03.593

发生这种情况有几个原因，最安全但不是最简单的答案是将事件绑定移动到代码中。您也可以使用委托，如果您只是想确定函数的范围，则不需要索引。如果您确实需要索引，您可以隐式获取位置或使用数据集值通过 PHP 显式提供一个。

听起来你只需要这样的东西：

```
(function($) {
  $(function() {
    $(document).on('mouseover', '.component-wrapper', function(event) {
      var $wrapper = $(event.currentTarget);
      $wrapper.find('.error').hide();
    });
  });
})(jQuery); 
```

但是您可以调整它以调用外部函数或根据需要提供额外的逻辑。

# java - 在Java中用'\\'替换单个'\'

> ID：14183248
> 
> 赞同：13
> 
> 时间：2013-01-06T14:50:10.177
> 
> 标签：java, regex, string, patternsyntaxexception

如何用 替换`'\'`单个`'\\'`？当我运行时`replaceAll()`，我收到此错误消息。

```
Exception in thread "main" java.util.regex.PatternSyntaxException:
                           Unexpected internal error near index 1 \
                                                                  ^
    at java.util.regex.Pattern.error(Pattern.java:1713)
    at java.util.regex.Pattern.compile(Pattern.java:1466)
    at java.util.regex.Pattern.<init>(Pattern.java:1133)
    at java.util.regex.Pattern.compile(Pattern.java:823)
    at java.lang.String.replaceAll(String.java:2190)
    at NewClass.main(NewClass.java:13)
Java Result: 1 
```

我的代码：

```
public class NewClass {
    public static void main(String[] args) {
        String str = "C:\\Documents and Settings\\HUSAIN\\My Documents\\My Palettes";
        str = str.replaceAll("\\", "\\\\");
        System.out.println(str);
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-06T14:54:02.123

[`String.replaceAll(String,String)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29) 是正则表达式。
[`String.replace(String,String)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29) 会做你想做的。

以下...

```
String str = "C:\\Documents and Settings\\HUSAIN\\My Documents\\My Palettes";
System.out.println(str);
str = str.replace("\\", "\\\\");
System.out.println(str); 
```

生产...

> C:\Documents and Settings\HUSAIN\My Documents\My Palettes
> C:\\Documents and Settings\\HUSAIN\\My Documents\\My Palettes

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-06T14:52:24.983

`\`也是正则表达式中的特殊字符。这就是为什么你应该这样做：

```
 str = str.replaceAll("\\\\", "\\\\\\\\"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-06T14:52:50.460

您必须首先`\`为字符串转义，然后为正则表达式转义，这将是`\\\\`每个斜杠。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T14:55:13.137

在 String 文字中，`\`必须用另一个`\`. 而在一个reges中，a`\`也必须被另一个转义`\\`。所以，你必须每`\`四次逃跑一次：`\\\\`.

另一种方法是使用`Pattern.quote("\\")`（用于正则表达式）和`Matcher.quoteReplacement("\\\\")`替换字符串。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-06T14:55:37.660

您可以使用`Pattern.quote`它来让您更轻松地转义该值，例如：

```
str = str.replaceAll(Pattern.quote("\\"), Matcher.quoteReplacement("\\\\")); 
```

或者，您可以使用`String.replace`：

```
str = str.replace("\\", "\\\\"); 
```

请参阅：[Pattern.quote](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)、[String.replace](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)和[Matcher.quoteReplacement](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#quoteReplacement%28java.lang.String%29)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-14T22:42:49.177

```
filePath = filePath.replaceAll(Matcher.quoteReplacement("\\"), Matcher.quoteReplacement("\\\\")); 
```

这个工作完美。

```
OUTPUT:
filePath = C:\abc\ 
```

# c++ - normal_distribution 不是 std 的成员

> ID：14183249
> 
> 赞同：-3
> 
> 时间：2013-01-06T14:50:24.973
> 
> 标签：c++

谁能告诉我如何摆脱这个错误？我需要生成正态分布。但没有什么对我有用。

我试图用 C++ 编写代码。但显示：

> 错误 1 ​​错误 C2039：“mt19937”：不是“std”的成员。
> 
> normal_distribution 不是 std 的成员

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:53:16.693

Your forgot to include `random`, the header defining the mt19937 ("Mersenne Twister") generator.

Here is a complete example:

```
edd@max:/tmp$ cat cxx12_random.cpp 

// use 'g++ -std=c++0x -o cxx12_random cxx12_random.cpp'

#include <random>
#include <iostream>

int main(int argc, char *argv[]) {

  std::mt19937 engine(42);
  std::normal_distribution<> normal(0.0, 1.0);

  for (int i=0; i<5; i++) {
    std::cout << normal(engine) << std::endl;
  }
}
edd@max:/tmp$ g++ -std=c++0x -o cxx12_random cxx12_random.cpp
edd@max:/tmp$ ./cxx12_random 
-0.550234
0.515433
0.473861
1.36845
-0.916827
edd@max:/tmp$ 
```

Note that I enabled the newer C++ extensions via `-std=c++0x`. You may have to do the same with your compiler.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T14:55:02.560

I think this is only available in c++11\. does your compiler support it?

# c# - 将数据从 WCF 绑定到 MVVM 客户端始终为空

> ID：14183258
> 
> 赞同：1
> 
> 时间：2013-01-06T14:51:38.510
> 
> 标签：c#, wcf, mvvm, windows-8

我正在制作我的第一个 Windows 8 客户端。这也是我第一次使用异步方法来加载属性，所以如果这是一个菜鸟问题，请原谅我。

我有一个 WCF 服务，并从 Visual Studio 中客户端的拆分页面模板开始（但我几乎要替换所有内容）。

当我将数据直接放入“SplitPage”代码中的视图时，所有内容都已正确加载并显示出来。但是，当我尝试使用 MVVM 时，该属性在绑定时没有任何项目。由于WCF，它是获取数据的异步调用是问题的原因吗？是否可以在返回属性之前确保它们的数据返回（属性本身似乎无法标记为异步）？

这是我所做的：

出于测试目的，我放置了一个 ListView（代码显示为 listbox，但我在 XAML 中使用了 listview）并将以下代码添加为在 OnNavigatedTo 处理程序中调用的异步方法：

```
private async void GetUsersList()
{
   ServiceClient client = new ServiceClient();
   List<UserDTO> _users = (await client.GetUsersAsync()).ToList();
   foreach(UserDTO user in _users)
   {
      UserListBox.Items.Add(new UserView(user));
   }
   TestStack.Children.Add(new UsersView());
} 
```

这工作正常，当页面加载时 UserListBox 包含 UserViews。

然后，我尝试进入一个完整的 MVVM 模式，并制作了一个 UsersViewModel 和 UsersView（复数）以及一个存储库，该存储库在其构造函数中使用从我的 WCF 服务中提取的 UserDTO 的 ObservableCollection 初始化属性 Users。这就是上述消息的最后一行所做的就是将视图设置为页面上的堆栈面板。

视图和视图模型在资源文件中粘合在一起：

```
<DataTemplate x:Key="vm:UsersViewModel">
    <vw:UsersView />
</DataTemplate> 
```

绑定与我习惯的有点不同，因为显然 .Net 4.5 不再具有 DataTemplates 上的 x:Type 属性。

加载数据的存储库部分如下所示：

```
 private ObservableCollection<UserDTO> _users = new ObservableCollection<UserDTO>();
    private ServiceClient _client = new ServiceClient();

    public UserRepository()
    {
        GetUsers();
    }

    public async void GetUsers()
    {
        var tempList = await _client.GetUsersAsync();
        foreach(UserDTO item in tempList)
        {
            _users.Add(item);
        }
    } 
```

UsersViewModel 的构造函数唯一要做的就是创建存储库的实例并将 UserViewModel 项加载到其可观察的 UserViewModel 集合中：

```
public UsersViewModel()
{
   _repo = new UserRepository();
   foreach (UserDTO item in _repo.Users)
   {
      _users.Add(new UserViewModel(item.Id));
   }
} 
```

我已经尝试将输出语句放在任何地方，并且确实“getter”属性返回了一个空列表，即使直接在 SplitPage 代码中的相同代码返回了我已经在 WCF 提供的数据库中的测试项目。它可以像代码运行的线程一样简单吗？也许 SplitPage 正在 UI 线程上运行对 WCF 的调用，因此在数据异步调用返回之前不会发生绑定，但是由于某种原因使用 MVVM，数据绑定会在后台线程上加载数据时立即发生？如果是这样，当数据最终确实出现在属性中时，它是 ObservableCollection 的事实不应该通知 UI 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:31:20.107

`async`方法在完成执行之前返回。您没有看到任何用户，因为`GetUsers`返回到`UserRepository`构造函数，该`UsersViewModel`构造函数在加载用户之前返回构造函数。

我最喜欢的解决方案是异步工厂方法，例如`UserRepository`：

```
private UserRepository()
{
}

private async Task InitializeAsync()
{
    var tempList = await _client.GetUsersAsync();
    foreach(UserDTO item in tempList)
    {
        _users.Add(item);
    }
}

public static async Task<UserRepository> Create()
{
    var ret = new UserRepository();
    await ret.InitializeAsync();
    return ret;
} 
```

工厂方法方法的最大好处`async`是您永远不会获得尚未初始化的实例。

但是，在某些情况下，您*必须*使用公共构造函数而不是`async`工厂方法，例如 IoC/DI 或数据绑定。

在这种情况下，我发现以下模式很有帮助：

```
public MyConstructor()
{
  Initialized = InitializeAsync();
}

public Task Initialized { get; private set; }
private async Task InitializeAsync()
{
  // asynchronous initialization here
} 
```

您可以像这样将它应用到您的存储库：

```
private ObservableCollection<UserDTO> _users = new ObservableCollection<UserDTO>();
private ServiceClient _client = new ServiceClient();

public UserRepository()
{
    Initialized = InitializeAsync();
}

public Task Initialized { get; private set; }
private async Task InitializeAsync()
{
    var tempList = await _client.GetUsersAsync();
    foreach(UserDTO item in tempList)
    {
        _users.Add(item);
    }
} 
```

然后，您可以在依赖类中使用相同的模式：

```
public UsersViewModel()
{
    _repo = new UserRepository();
    Initialized = InitializeAsync();
}

public Task Initialized { get; private set; }
private async Task InitializeAsync()
{
    // Wait for the repository to initialize
    await _repo.Initialized;

    foreach (UserDTO item in _repo.Users)
    {
        _users.Add(new UserViewModel(item.Id));
    }
} 
```

附带说明：作为一般规则，您应该避免`async void`. 您可能会发现我的[`async`/`await`介绍](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)很有帮助。

# javascript - Function that copies an object with its properties?

> ID：14183260
> 
> 赞同：0
> 
> 时间：2013-01-06T14:51:41.817
> 
> 标签：javascript, function, copy

I need to create a function which copies and object and outputs all object properties with a document.write.

I created such a function, but I get [object Object] as a result and I cannot understand why.

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
    <script type="text/javascript">
        /********* GLOBAL VARIABLES *********/
        var BR = "<br />";
        var ES = " ";

        /********* FUNCTIONS *********/

        function compare(album0, album1) {

            //This seems to do exactly what's needed... but sadly I dont have time to test every possible scenario.
            var sameTracks = true;
            for (var i = 0; i < album0.length; i++) {
                if (!(album0.tracks[i] === album1.tracks[i])) sameTracks = false;
            }
            for (var i = 0; i < album1.length; i++) {
                if (!(album0.tracks[i] === album1.tracks[i])) sameTracks = false;
            }

            if (
            album0.artistName === album1.artistName && album0.albumTitle === album1.albumTitle && album0.releaseYear === album1.releaseYear && album0.ifHQ === album1.ifHQ && album0.tracks.length === album1.tracks.length && sameTracks === true) {
                return true
            }
            else {
                return false
            };
        }

        function copy(album1) //the copy function
        {

            //properties will be copied over from original album1 into copy
            var albumCopy = 
            {
                artistName: "",
                albumTitle: "",
                releaseYear: 0,
                ifHQ: "",
                tracks: undefined
            };
            //copies original object values item for item into duplicate album
            for (var key in albumCopy) 

            {
            albumCopy[key] = album1[key];
            }
            return albumCopy;
        }

        /********* MAIN *********/
        function main() {

            var album = new Array(2)

            for (var i = 0; i < album.length; i++) //ok, so basically this loop is responsible for creating the album objects...
            {
                album[i] = {
                    artistName: "",
                    albumTitle: "",
                    releaseYear: 0,
                    ifHQ: "",
                    tracks: undefined //tracks here
                };

                album[i].artistName = prompt("What is the artist's name?");
                album[i].albumTitle = prompt("What is the album title?");
                album[i].releaseYear = parseFloat(prompt("What is the album's release year"));
                album[i].ifHQ = prompt("Is the album high quality? Y/N");

                while (!(album[i].ifHQ === "Y" || album[i].ifHQ === "N" || album[i].ifHQ === "YES" || album[i].ifHQ === "NO")) //to handle bad input
                {
                    album[i].ifHQ = prompt("You have entered an invalid response. Is " + album[i].title + " a ifHQ album, Y/N?");
                    album[i].ifHQ = album[i].ifHQ.toUpperCase();
                }

                if (album[i].ifHQ === "Y") {
                    album[i].ifHQ = true;
                }
                else {
                    album[i].ifHQ = false;
                }

                album[i].tracks = new Array(2); // the tracks property of each album object is an array of tracks... 

                for (var j = 0; j < album[i].tracks.length; j++) {
                    album[i].tracks[j] = prompt("Enter track " + (j + 1));
                }
            }

            for (var key in album[0]) //and these for... in loops navigate through properties for these objects to output what was stored in them
            {
                document.write(key + ": " + album[0][key] + " ");
                document.write(BR);
            }
            for (var key in album[1]) {
                document.write(key + ": " + album[1][key] + " ");
                document.write(BR);
            }

            var same = compare(album[0], album[1]);
            document.write("The status of both albums being identical is" + ES + same + BR);
            var copiedAlbum = copy(album[1]);
            document.write(copiedAlbum);
        }

        // This line calls main, don't change it:
        main();

    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:26:18.567

要复制对象，您可以使用[Object.create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)方法，然后您可以使用循环对象`for in`并可以使用输出属性`document.write`，例如，您可以使用

```
// For older browser's suppoet
if (typeof Object.create !== 'function') {
    Object.create = function (o) {
        function F() {}
        F.prototype = o;
        return new F();
    };
}

// an object
var album1={
    artistName: "",
    albumTitle: "",
    releaseYear: 0,
    ifHQ: "",
    tracks: undefined
};
// create a new object from album1/copy
var newAlbum=Object.create(album1);
// output the properties
for(var i in newAlbum) document.write(i+'<br />'); 
```

[**例子**](http://jsfiddle.net/c8RpA/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:34:02.457

作为对我的评论的跟进，这里有一个更好的方法来做你想做的事情：

```
// This code defines an "Album" class
function Album(artistName, albumTitle, releaseYear, ifHQ) {
    this.artistName = artistName;
    this.albumTitle = albumTitle;
    this.releaseYear = releaseYear;
    this.ifHQ = ifHQ;
    this.tracks = [];
};

// Album.prototype contains all methods available to Album objects
Album.prototype.addTrack = function(trackName) {
    this.tracks.push(trackName);
};

// alternative to compare() function
Album.prototype.equals = function(album) {
    if (this.artistName != album.artistName) return false;
    if (this.albumTitle != album.albumTitle) return false;
    if (this.releaseYear != album.releaseYear) return false;
    if (this.tracks.length != album.tracks.length) return false;

    for (var i = 0, len = this.tracks.length; i < len; i++) {
        if (this.tracks[i] != album.tracks[i]) return false;
    }

    return true;
};

// create our own custom toString method
Album.prototype.toString = function() {
    var str = "";
    str += "Artist: " + this.artistName;
    str += "Album: " + this.albumName;
    // you get the idea
    return str;
};

// MAIN
// create albums
var albums = []

var queen = new Album("Queen", "Queen", 1973, true);
var queen2 = new Album("Queen", "Queen II", 1974, true);
albums.push(queen, queen2);

var albumsAreTheSame = queen.equals(queen2); // test if queen == queen2

document.write(queen); // queen.toString() is automatically called 
```

这段代码明显不完整

# windows-8 - Missing TestContext.WriteLine Win8 Library Unit Test

> ID：14183267
> 
> 赞同：0
> 
> 时间：2013-01-06T14:52:14.763
> 
> 标签：windows-8, mstest

I am creating Unit Tests for a Win8 Library and noticing that the TestContext.Writeline method is not an Intellisense option. Is there a Win8 specific reason for this? Could be a Visual Studio bug? Thanks for participating in this thread.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:46:30.617

我认为您正在寻找一种属于不同单元测试框架的方法。对于常规的[.NET](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.testtools.unittesting.testcontext%28v=vs.110%29.aspx)应用程序，您将使用`Microsoft.VisualStudio.TestTools.UnitTesting`包含`WriteLine`.

对于 Windows 应用商店应用程序，单元测试项目引入了`Microsoft.VisualStudio.TestPlatform.UnitTestFramework`. 这里有[一些文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/ff770525.aspx)，但我没有找到命名空间/类的 MSDN 参考页面。

FWIW，`WriteLine`这个类的缺失是[通过 Connect 报告](http://connect.microsoft.com/VisualStudio/feedback/details/750514/vs-2012-rc-testcontext-missing-attributes)的，并按设计关闭。

# javascript - Google Maps Coordinates Incorrect

> ID：14183275
> 
> 赞同：0
> 
> 时间：2013-01-06T14:52:58.977
> 
> 标签：javascript, xml, google-maps

> **Possible Duplicate:**
> [Why am i not getting exact Longitude when i click on a marker?](https://stackoverflow.com/questions/13307066/why-am-i-not-getting-exact-longitude-when-i-click-on-a-marker)

I get data from mysql by xml. Everything is ok. but when i wrote this coordinates with javascript it show me additional numbers.. where it can take this numbers?

like that:

it show me this lat long.. : `(40.992638, 47.860474*00000007*),(40.992252, 47.860619*00000004*)`

but my lat longs like that: `(40.992638 47.860474 ) (40.992252 47.860619)`

what is: **`**00000007 & 00000004 ?**`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:12:53.143

纬度和经度在 javascript 中表示为[双精度浮点数](http://en.wikipedia.org/wiki/Floating_point)（所有数字都是）。当您将字符串转换为双精度浮点数时，它会将其转换为最接近的值，这并不总是完全相同。第 14 位的差异可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:51:28.373

好的。谢谢各位帮忙。我解决了以下问题：

在 MySQL 中可能 lat long 类型是 float(10,6) 我将其更改为文本。所有经纬度坐标我再次写为 12 符号并且它工作..

对不起我的英语不好..

# class - python 2.7中的静态函数错误

> ID：14183276
> 
> 赞同：0
> 
> 时间：2013-01-06T14:53:02.717
> 
> 标签：class, static, python-2.7

我在 python 中使用静态函数时遇到问题。我有一个带有我的静态函数的类

```
class CFileSystemOperations(object):
    ....
    ....
    def getRepositoryDirectory():
        ......
        return sRepositoryDirectory            
    getRepositoryDirectory = staticmethod(getRepositoryDirectory) 
```

然后我有另一个带有调用静态函数的类，我尝试了 2 个解决方案

```
class CMusicOrganizerView(object):
    ....
    def __init__(self):
        ....
        #first solution
        sGuessedRepositoryTextfield = CFileSystemOperations().getRepositoryDirectory()
        #second solution
        sGuessedRepositoryTextfield = CFileSystemOperations.getRepositoryDirectory() 
```

这里有错误：

> sGuessedRepositoryTextfield = CFileSystemOperations().getRepositoryDirectory() TypeError: 'module' object is not callable
> 
> sGuessedRepositoryTextfield = CFileSystemOperations.getRepositoryDirectory() AttributeError：“模块”对象没有属性“getRepositoryDirectory”错误：模块：musicOrganizer 无法导入（文件：/..../musicOrganizer.py）。

有任何想法吗？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:55:17.757

您将模块与其中包含的类混淆了。采用

```
CFileSystemOperations.CFileSystemOperations().getRepositoryDirectory() 
```

（并为您的模块提供更好的名称；它们不必像您在 Java 中那样匹配包含的类名）*。*

# php - Yahoo api bbauth: Invalid (missing) src or appid

> ID：14183277
> 
> 赞同：3
> 
> 时间：2013-01-06T14:53:05.277
> 
> 标签：php, authentication, yahoo

I'm trying to load yahoo users' emails (but I'm stuck on the auth step):

```
define("APPID", 'dj***NQ--');
define("SECRET", '3***7');

// Include the proper class file
$v = phpversion();

if ($v[0] == '4') {
    include("includes/yahoo/ybrowserauth.class.php4");
} elseif ($v[0] == '5') {
    include("includes/yahoo/ybrowserauth.class.php5");

} else {
    die('Error: could not find the bbauth PHP class file.');
}
$authObj = new YBBauthREST(APPID, SECRET);
//echo APPID;
// If Yahoo! isn't sending the token, then we aren't coming back from an
// authentication attempt
if (empty($_GET["token"])) {
    // You can send some data along with the authentication request
    // In this case, the data is the string 'some_application_data'
    echo 'You have not signed on using BBauth yet<br /><br />';
    echo '<a href="'.$authObj->getAuthURL('some_application_data', true).'">Click here to authorize</a>';
    return;
} 
```

But I get this error in the yahoo landing page:

> Invalid (missing) src or appid

So I'm guessing here is the problem?

```
echo '<a href="'.$authObj->getAuthURL('some_application_data', true).'">Click here to authorize</a>'; 
```

Should I replace 'some_aplication_data' with something else?

**Edit:**

I've also tried:

```
$callback = YahooUtil::current_url()."?in_popup";  
$auth_url = YahooSession::createAuthorizationUrl(APPID, SECRET, $callback);
echo '<a href="'.$auth_url.'">Click here to authorize</a>'; 
```

But it won't create the link or show errors (script dies).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:19:59.197

由于您使用的是基于浏览器的身份验证，因此您需要确保您正在注册您的应用程序。您需要从[https://developer.apps.yahoo.com/wsregapp/](https://developer.apps.yahoo.com/wsregapp/)获取您的应用程序 ID 和密码。这与创建 OAuth 项目的位置不同。BBAuth 只有应用程序 ID 和密码。

在您的情况下，问题似乎在于您的应用程序 ID 无效。考虑到其他答案和讨论，您似乎创建了一个 OAuth 项目而不是基于浏览器的身份验证项目。

关于您的问题“我应该用其他东西替换'some_aplication_data'吗？”。根据文档，您可能想用 session_id() 替换“some_aplication_data”。

编辑

我已经使用上述建议测试了您的代码，并且它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:10:29.783

You can generate the auth URL in this way

```
$callback = YahooUtil::current_url()."?in_popup";  
$auth_url = YahooSession::createAuthorizationUrl(CONSUMER_KEY, CONSUMER_SECRET, $callback); 
```

REFERENCE [http://developer.yahoo.com/oauth/guide/oauth-userauth.html](http://developer.yahoo.com/oauth/guide/oauth-userauth.html)

# javascript - Certificate Upload in ASP.NET MVC3

> ID：14183278
> 
> 赞同：1
> 
> 时间：2013-01-06T14:53:14.057
> 
> 标签：javascript, asp.net, file-upload, ssl-certificate

I am developing an ASP.NET MVC3 app. I have a page where I allow the user to upload a certificate. I was thinking of 2 options:

1.  Encode the Certificate file to Base64 string in JavaScript and send it as a parameter in POST to the Server
2.  Use some jQuery library to upload the cert (like a normal file upload)

It is a SSL Cert (I assume the size of SSL Certs should be in KBs. Am I right?). Since POST data's max size is 4MB by default, I am preferring option 1\. Are there any other gotchas? Is there a recommended way to do this?

Thanks, Sornakumar S

# python - Python - 在重新启动之间保存程序的状态？

> ID：14183288
> 
> 赞同：4
> 
> 时间：2013-01-06T14:54:41.780
> 
> 标签：python, wxpython, save, restart

我想知道如何保存程序当前设置，以便在程序重新启动或计算机重新启动时保持不变，除非另有说明。比如windows默认程序便签，它把文字保存在里面，这样即使在电脑关机后也可以使用。

您可以导入某种模块吗？我的程序基本上是一个任务列表程序，您可以在其中将内容添加到列表中，并使用 wxPython 复选框将其勾选。即使在程序退出后，是否有任何可能的方法来保持它的状态？

如果有人可以向我展示我的代码示例，我将不胜感激，别担心，我不会只是简单地复制它并完成它。对我来说，这将被视为一种学习体验，以便我将来可以使用它。谢谢。

这是我的程序：

```
import wx, sys,os

mylist = []

class test(wx.Frame):

def __init__(self, parent, id):

    self.count = 1
    #Frame
    wx.Frame.__init__(self,parent,id,'List',size = (200,500))
    #Panel
    self.panel = wx.Panel(self)
    item = wx.TextEntryDialog(None, "List Title")
    if item.ShowModal() == wx.ID_OK:
        print 'here'
        answer = item.GetValue()
        mylist.append(answer)
        print mylist
        windtitle = wx.StaticText(self.panel, -1, answer, (10,10))
        windtitle.SetForegroundColour("blue")

    addButton = wx.Button(self.panel, label = "+ Add", pos=(40,450), size = (60,-1))
    finishButton = wx.Button(self.panel, label = "Finish", pos=(110,450), size = (60,-1))

    self.Bind(wx.EVT_BUTTON, self.addtomenu, addButton)
    self.Bind(wx.EVT_BUTTON, self.finish, finishButton)

def finish(self, event):
    self.Destroy()
    sys.exit()

def addtomenu(self,event):

    newitem = wx.TextEntryDialog(None, "New Item")
    if newitem.ShowModal() == wx.ID_OK:
        count = len(mylist)+1
        print count
        yaxis = 20*count
        if count == 21:
            wx.StaticText(self.panel, -1, "List To Full", (10, yaxis))
        else:
            answer = newitem.GetValue()
            mylist.append(answer)
            print mylist
            self.Bind(wx.EVT_CLOSE, self.closewindow)
            wx.CheckBox(self.panel, -1, answer, (10,yaxis), size = (200,-1)) 

def closewindow(self, event):
    self.Destroy()

if __name__ == "__main__":
    app=wx.PySimpleApp()  #Blood
    frame = test(parent=None, id = -1)  #Skin
    frame.Show()
    app.MainLoop()  #Heart 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T15:02:17.530

这是一个如何将程序状态保存在 JSON 文件中的示例。您已经有一个`finish`在程序退出或 Finish 按钮关闭时调用的方法。我们现在可以使用它来调用`save`将状态保存到 JSON 文件的方法。

```
def finish(self, event):
    self.save()
    self.Destroy()
    sys.exit()

def save(self):
    windtitle = self.windtitle.GetLabelText()
    checkboxes = [{'checked': child.IsChecked(),
                   'label': child.GetLabel()}
                  for child in self.panel.GetChildren()
                  if isinstance(child, wx.CheckBox)]
    data = {
        'windtitle':windtitle,
        'checkboxes':checkboxes,
        }
    with open(CONFIGFILE, 'w') as f:
        json.dump(data, f) 
```

以下是读取 JSON 数据以重构 GUI 的方法：

```
def load(self):
    if os.path.exists(CONFIGFILE):
        with open(CONFIGFILE, 'r') as f:
            data = json.load(f)
        title = data['windtitle']
        self.windtitle = wx.StaticText(self.panel, -1, title)
        self.vbox.Add(self.windtitle)
        for checkbox in data['checkboxes']:
            label = checkbox['label']
            cb = wx.CheckBox(
                self.panel, -1, checkbox['label'])
            self.vbox.Add(cb)                
            cb.SetValue(checkbox['checked'])
    else:
        self.create_windtitle()
    self.create_buttons() 
```

* * *

例如：

```
import wx, sys, os
import json

CONFIGFILE = os.path.expanduser('~/tasklist.json')
class test(wx.Frame):
    def __init__(self, parent, id):
        frame = wx.Frame.__init__(self, parent, id, 'List', size = (200,500))
        self.panel = wx.Panel(self)
        self.panelbox = wx.BoxSizer(wx.VERTICAL)                

        self.vbox = wx.BoxSizer(wx.VERTICAL)        
        self.load()

        self.panelbox.Add(self.vbox)        
        self.panelbox.Add(self.buttonbox)

        self.panel.SetSizer(self.panelbox)
        self.panelbox.Fit(self)

        self.Bind(wx.EVT_BUTTON, self.addtomenu, self.addButton)
        self.Bind(wx.EVT_BUTTON, self.finish, self.finishButton)
        self.Bind(wx.EVT_CLOSE, self.finish)

    def create_buttons(self):
        self.buttonbox = wx.BoxSizer(wx.VERTICAL)                
        self.addButton = wx.Button(
            self.panel, label = "+ Add")
        self.finishButton = wx.Button(
            self.panel, label = "Finish")
        self.buttonbox.Add(self.addButton)
        self.buttonbox.Add(self.finishButton)

    def create_windtitle(self):
        item = wx.TextEntryDialog(None, "List Title")
        if item.ShowModal() == wx.ID_OK:
            answer = item.GetValue()
            self.windtitle = wx.StaticText(self.panel, -1, answer)
            self.windtitle.SetForegroundColour("blue")

    def addtomenu(self, event):
        newitem = wx.TextEntryDialog(None, "New Item")
        if newitem.ShowModal() == wx.ID_OK:
            if len(self.mylist) > 5:
                wx.StaticText(self.panel, -1, "List To Full")
            else:
                answer = newitem.GetValue()
                cb = wx.CheckBox(self.panel, -1, answer)
                self.vbox.Add(cb)
        self.panelbox.Fit(self)

    def finish(self, event):
        self.save()
        self.Destroy()
        sys.exit()

    @property
    def mylist(self):
        return [ child.GetLabel()
                 for child in self.panel.GetChildren()
                 if isinstance(child, wx.CheckBox) ]

    def save(self):
        windtitle = self.windtitle.GetLabelText()
        checkboxes = [{'checked': child.IsChecked(),
                       'label': child.GetLabel()}
                      for child in self.panel.GetChildren()
                      if isinstance(child, wx.CheckBox)]
        data = {
            'windtitle':windtitle,
            'checkboxes':checkboxes,
            }
        with open(CONFIGFILE, 'w') as f:
            json.dump(data, f)

    def load(self):
        if os.path.exists(CONFIGFILE):
            with open(CONFIGFILE, 'r') as f:
                data = json.load(f)
            title = data['windtitle']
            self.windtitle = wx.StaticText(self.panel, -1, title)
            self.vbox.Add(self.windtitle)
            for checkbox in data['checkboxes']:
                label = checkbox['label']
                cb = wx.CheckBox(
                    self.panel, -1, checkbox['label'])
                self.vbox.Add(cb)                
                cb.SetValue(checkbox['checked'])
        else:
            self.create_windtitle()
        self.create_buttons()

if __name__ == "__main__":
    app = wx.PySimpleApp()  #Blood
    frame = test(parent = None, id = -1)  #Skin
    frame.Show()
    app.MainLoop()  #Heart 
```

* * *

顺便说一句，不要使用显式位置来在 GUI 中放置小部件。那条路通向疯狂。如果使用位置（例如`pos = (10,yaxis)`），随着 GUI 的增长，修改布局变得越来越困难。每个元素的位置都依赖于其他元素的位置，并且很快变得无法管理。

每个 GUI 框架都提供了一些更明智的方法来实现漂亮的布局。我不是很熟悉`wxpython`，但它似乎使用`BoxSizers`. 我上面使用的布局非常简陋。我确信通过对 wxpython 布局设计模式的一些研究可以实现更好的布局。

* * *

有时我需要找出一个小部件的所有属性和方法是什么。例如，我不知道如何询问 Panel 它包含哪些 Checkboxes。我使用这个函数找到了它：

```
def describe(obj):
    for key in dir(obj):
        try:
            val = getattr(obj, key)
        except AttributeError:
            continue
        if callable(val):
            help(val)
        else:
            print('{k} => {v}'.format(k = key, v = val))
        print('-'*80)

describe(self.panel) 
```

这是我在 utils_debug 中的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T14:56:43.987

您可能希望将按钮的状态存储在列表或字典等数据集合中，然后您可以编组或序列化数据

例如

```
my_button_states = {"button1":True}
import json
with open("states.json", 'w') as output:
    json.dump(my_button_states, output) 
```

稍后只需将 json 重新加载回程序并通过循环遍历 dict 来设置按钮

例如

```
with open("states.json") as fp:
    my_button_states = json.loads(fp)
# inside your frame or something.... idk where you put them.
for button, state in my_button_states.iteritems():
    setattr(self, button, state) 
```

您可以使用[`json`](http://docs.python.org/2/library/json.html)或某些人可能会建议[`pickle`](http://docs.python.org/2/library/pickle.html)，但这`json`可能是更好的选择。

使用您的代码，您可能想做类似的事情

```
json.dump(mylist, output) 
```

当然在我的例子中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-10T13:16:16.813

只是一个简短的通知。我想知道是否有内置的解决方案——毕竟，我们大多数人迟早都会面临这个问题。

事实证明，有一个叫做[PersistenceManager](https://wxpython.org/Phoenix/docs/html/wx.lib.agw.persist.html)的东西可以用来简单地保存和恢复状态。

注意，我没有使用它只是偶然发现的。

# c - 根据订购数量修改库存数量

> ID：14183289
> 
> 赞同：0
> 
> 时间：2013-01-06T14:54:43.963
> 
> 标签：c

我有一个名为 AddOrder() 的方法，用户可以在其中创建订单。当系统要求用户输入产品名称时，系统会从 products.dat 文件中获取特定记录。然后询问用户产品数量并确认订单。确认订单记录后，我希望系统更新 products.dat 文件中的库存数量，从中减去该特定产品的产品数量。不幸的是，库存数量保持不变。这是我的代码。

```
void addOrder()
{
    FILE *pfp;
    order o1;
    product p;
    char ProductName[100];
    int found = 0;
    int choice = 0;
    int tmpStock = 0;
    double pPrice = 0.0;
    int choice2 = 0;

    ofp=fopen("orders.dat","ab");
    pfp=fopen("products.dat", "rb");

    printf("\n========================================================\n\n");
    printf("\t\t Adding an Order\n\n");
    printf("========================================================\n\n");

    do
    {
        printf("Enter CustomerID: \n");
        scanf("%s",&o1.CustomerID);
    }while(!findCustomer(o1.CustomerID));

    printf("Enter Product Name: \n");
    scanf("%s", ProductName);

    while(1)
    {
    fread(&p,sizeof(p),1,pfp);

    if(feof(pfp))
    {
    break;
    }
    if(strcmp(ProductName,p.ProductName)==0)
    {
        found = 1;
        tmpStock = p.QuantityInStock;
        pPrice = p.price;

    }
    }
    if(found == 0)
    {
        printf("The Product was not found!\n");
        OrdersSubMenu();
    }

    printf("Enter Product Quantities: \n");
    scanf("%d", &o1.ProductQuantities);

    if(o1.ProductQuantities > tmpStock)
    {
        printf("You have axeceeded available stock! Available Stock: %d\n", tmpStock);
        printf("Do you want to enter product quantity again(press 1)\n");
        printf("or order a different product(press 2)?\n");
        scanf("%d", &choice);

        if(choice == 1)
        {
             printf("Enter Product Quantities: \n");
             scanf("%d", &o1.ProductQuantities);
        }
        else
        if(choice == 2)
        {
            OrdersSubMenu();
        }
    }
    else
    {

        printf("Product Quantity is available\n");
    }

    o1.TotalOrderPrice = o1.ProductQuantities * pPrice;
    printf("Total Order Price: %.2f\n", o1.TotalOrderPrice);

    printf("Do you want to confirm order? If yes press 1, if no press 2: \n");
    scanf("%d", &choice2);

    if(choice2 == 1)
    {
        fwrite(&o1,sizeof(o1),1,ofp);

    }
    else
        if(choice2 == 2)
    {
        OrdersSubMenu();
    }

    printf("Order record was added to the system!\n");

    tmpStock = tmpStock-o1.ProductQuantities;
    p.QuantityInStock =tmpStock;

    fclose(ofp);
    fclose(pfp);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:15:19.727

*我希望系统更新 products.dat 文件中的库存数量*

但是您只是打开 products.dat 进行读取访问`pfp=fopen("products.dat", "rb");`。

您的`fwrite`声明是 to `ofp`，它打开到另一个文件：`ofp=fopen("orders.dat","ab");`

该变量`ofp`未声明，因此至少缺少一行代码，否则将无法编译。更新：由于某种原因`ofp`，它已经成为全球性的，但为什么呢？尽管如此，这不应该影响功能（假设是一个线程）。

编辑：要写入和写入文件，请使用“r+b”模式打开它。您需要找到您想要更新其库存的产品，然后*将当前文件位置向后移动*；

```
fseek(pfp, -sizeof(product), SEEK_CUR); 
```

然后`fwrite`是新产品记录。注意 sizeof 上的 - 符号：我们正在将当前文件位置移动到我们刚刚读取的记录的开头。

# c# - WinRT - 在控件中显示动画 GIF

> ID：14183296
> 
> 赞同：5
> 
> 时间：2013-01-06T14:55:10.710
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我需要在我的 Metro 应用程序中显示一个动画 GIF，但我找不到任何允许它的控件。（我试过了`Image`，`MediaElement`并且`MediaPlayer`来自播放器框架）

是否有可能以某种方式显示动画 GIF？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:10:35.800

您可以通过使用 .NET Framework 中的 BitmapDecoder 类本机实现此目的。我的博客上有一个例子，它展示了如何实现一个 AnimationControl，它能够显示来自资源 gif 文件的动画 GIF。查看：[http ://www.henrikbrinch.dk/Blog/2013/02/21/Windows-8---GIF-animations--the-RIGHT-way](http://www.henrikbrinch.dk/Blog/2013/02/21/Windows-8---GIF-animations--the-RIGHT-way)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T07:22:09.777

虽然我没有检查它是否有效，并且由于空域问题它可能对您不起作用 - 您可以尝试将您的 gif 托管在 WebView 控件中。这可能比 Norbert 和 Carl 提出的其他更好的解决方案要容易得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-09T23:31:45.553

我刚刚发布了一个库来播放动画 GIF：[XamlAnimatedGif](https://github.com/XamlAnimatedGif/XamlAnimatedGif)。`Image`您只需要在标准控件上设置附加属性：

```
<Image gif:AnimationBehavior.SourceUri="/Images/animated.gif" /> 
```

（xmlns 映射是`xmlns:gif="using:XamlAnimatedGif"`）

在 WPF、Windows 8.1 和 Windows Phone 8.1 上工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T15:00:18.667

这不能在本地完成，但您可以查看

[http://imagetools.codeplex.com/](http://imagetools.codeplex.com/)

你想要的。你也可以检查这个

[http://blogs.msdn.com/b/jstegman/archive/2009/09/08/silverlight-3-sample-updates.aspx](http://blogs.msdn.com/b/jstegman/archive/2009/09/08/silverlight-3-sample-updates.aspx)

其中包含一个 GIF 解码器库

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-06T15:56:48.113

在这里你有一个很好的教程如何将 gif 插入 Metro Style 应用程序：

[http://advertboy.wordpress.com/2012/05/08/animated-gifs-in-xamlc/](http://advertboy.wordpress.com/2012/05/08/animated-gifs-in-xamlc/)

但最简单的方法是使用这个项目：

[http://imagetools.codeplex.com/](http://imagetools.codeplex.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-19T10:58:08.017

正如@Filip Skakun 所说的`WebView`方法有效。当然它是“黑客”，但所有这些库和动态解码都很慢，动画闪烁（至少在 Windows Phone 中）。使用 WebView 使您能够托管具有透明背景的动画 gif。要使用 WebView gif 渲染方法在您的项目中创建 html 页面：

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>gif rendering</title>
    <script type="text/javascript">
        function SetImageSource(image, source) {
            document.getElementById(image).src = source;
        };
    </script>

<style type="text/css">
    html, body
    {
        -ms-content-zooming:none;
        -ms-overflow-style: none;
        -ms-scroll-translation: none;
        -ms-touch-select: none;
        overflow: hidden;
        zoom: 100%;
    }
</style>
</head>
<body>
<img id="gifPlaceholder" src=""/>

<script>
    SetImageSource("gifPlaceholder", window.top.location.search.substring(1));
</script>
</body>
</html> 
```

CSS 很重要——因为它禁用了 WebView 的缩放/滚动/触摸移动（这在大多数情况下是不可取的）。将动画 gif 添加到同一个文件夹（html 所在的位置）。Xml代码：

```
<WebView Name="gifRendererWebView" 
         Source="ms-appx-web:///pathToHtmlInProject.html?gifName.gif"
         DefaultBackgroundColor="Transparent"/> 
```

唯一的缺点是你在`WebView`占据的区域“失去了手势”（你不能使用`WebViewBrush`，因为你会失去动画）。

# java - 在 Swing 消息框中启用文本突出显示

> ID：14183299
> 
> 赞同：8
> 
> 时间：2013-01-06T14:55:27.133
> 
> 标签：java, swing, joptionpane

假设我正在使用以下代码在我的简单 Swing 应用程序中提示错误消息：

```
JOptionPane.showMessageDialog(null, message, "Error", JOptionPane.ERROR_MESSAGE); 
```

有什么方法可以让用户突出显示文本部分（用于复制/粘贴目的）？

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T15:15:22.800

try this

```
 JTextArea textarea= new JTextArea("add your message here");
 textarea.setEditable(true);
 JOptionPane.showMessageDialog(null, textarea, "Error", JOptionPane.ERROR_MESSAGE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T15:08:41.517

JOptionPane 可以用任何对象构造，而不仅仅是字符串消息。因此，您可以构造一个 JTextArea 并将其作为您的消息传递给 JOptionPane。那应该允许复制粘贴。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-10T03:11:55.760

如果您反对默认 JTextArea 显示的白色背景，您可以将 JTextArea 背景颜色设置为等于 JOptionPane 的背景颜色。

```
String title = "foo";
String message = "Select me";

JTextArea msg = new JTextArea(message);
JOptionPane pane = new JOptionPane(msg, JOptionPane.INFORMATION_MESSAGE);
msg.setBackground(pane.getBackground());
JDialog dialog = pane.createDialog(null, title);
dialog.setVisible(true); 
```

# mysql - SQL - 将多行合并为一行

> ID：14183311
> 
> 赞同：0
> 
> 时间：2013-01-06T14:57:03.040
> 
> 标签：mysql

在尝试从我的 MYSQL DB 创建数据馈送时，我遇到了以下情况。实际情况中涉及更多表格，但我想保持简短并专注于手头的问题。我有两个表（products_options_values、products_options）和一个中间表（products_options_values_to_products_options）。（为表格的格式道歉，但我认为您可以区分每个字段的值。）

```
TABLE:  products_options_values<br>
products_options_values_id | products_options_values_name <br>
28 9-11<br>
52 Black<br>
53 In-Line<br>

TABLE: products_options_values_to_products_options<br>
products_options_values_to_products_options_id | products_options_id | products_options_values_id<br> 
    31  2   28<br>
    56  1   52<br>
    57  3   53<br>

TABLE: products_options<br>
products_options_id | products_options_name <br>
    1           Color<br>
    2           Size<br>
    3           Style<br> 
```

我正在尝试编写具有以下结果的 SQL 语句：来自各种 TABLES 的有关产品的字段，其中 products_options_name 作为字段名称和对应的 products_options_values_name 以及同一行中的相应值。例如：

```
Product_ID   Product_Name       MPN Price   Color   Size    Style
00001   Acme Rollerskates   A99 99.99   Black   9-11    In-Line 
```

有关如何在 MYSQL 中实现此结果的任何帮助？感谢您的考虑和努力。标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:27:34.070

我不确定你是否听说过 Magento，但这类似于他们的 EAV 设置。基本上，如果您想将行转换为列，您必须反复向每个行值左连接一次字段值表。我将在下面做一个简化版本。

```
products table:
[id, product_name]
1, product 1
2, product 2
3, product 3

product_fields table:
[id, product_id, field_name, field_value]
1, 1, color, red
2, 2, color, blue
3, 3, color, black
4, 1, size, XL
5, 2, size, XL
6, 3, size, XL

SELECT 
    p.product_name,
    table1.field_value AS color,
    table2.field_value AS size
FROM
    products AS p LEFT JOIN product_fields AS table1 ON
        p.id = table1.product_id AND
        table1.field_name='color'
    LEFT JOIN product_fields AS table2 ON
        p.id = table2.product_id AND
        table1.field_name='size' 
```

通常会使用 id 而不是 join 子句中的字段名称，但您应该明白这一点。sql server 还提供了一个 PIVOT 函数，可以满足您的需要。我不相信有一个 Mysql 等价物，但你可以调查一下。

编辑：bluefeet 的回答模拟了 sql server 的 PIVOT 函数。在 2005 年之前，sql server 也必须这样做。他的回答是在我回答的时候发布的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:17:40.690

要将您提供的表转换为这种格式，您基本上是在执行*数据透视*，但 MySQL 没有数据透视函数。因此，您需要使用带有`CASE`语句的聚合函数来复制它：

```
select 
  max(case when po.products_options_name = 'Color' 
      then pov.products_options_values_name else null end) Color,
  max(case when po.products_options_name = 'Size' 
      then pov.products_options_values_name else null end) Size,
  max(case when po.products_options_name = 'Style' 
      then pov.products_options_values_name else null end) Style
from products_options po
left join products_options_values_to_products_options pv
  on po.products_options_id = pv.products_options_id
left join products_options_values pov
  on pv.products_options_values_id = pov.products_options_values_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c6922/2)

结果是：

```
| COLOR | SIZE |   STYLE |
--------------------------
| Black | 9-11 | In-Line | 
```

看来您仍然需要加入包含产品详细信息的表，如`product_id`、`product_name`、`price`等。

我无法从您提供的表结构中看出您在哪里加入此数据，但查询将是这样的：

```
select p.product_id,
  p.product_name,
  p.MPN,
  p.price,
  max(case when po.products_options_name = 'Color' 
      then pov.products_options_values_name else null end) Color,
  max(case when po.products_options_name = 'Size' 
      then pov.products_options_values_name else null end) Size,
  max(case when po.products_options_name = 'Style' 
      then pov.products_options_values_name else null end) Style
from products p  --- add join to the main products table
left join products_options po
  on p.product_id = po.products_options_id
left join products_options_values_to_products_options pv
  on po.products_options_id = pv.products_options_id
left join products_options_values pov
  on pv.products_options_values_id = pov.products_options_values_id
group by p.product_id, p.product_name, p.MPN, p.price 
```

# mysql - 不正确的字符串值：插入时列的“\xCC_a”

> ID：14183314
> 
> 赞同：1
> 
> 时间：2013-01-06T14:57:13.970
> 
> 标签：mysql

我正在尝试运行 sql 查询，但出现以下错误：

```
Incorrect string value: '\xCC_a' for column 
```

破坏 mysql 查询的 CSV 文件行：

```
Juan Gordon,GarcÃ_a,noman@gmail.com,,,,,,,,,,y, 
```

SQL 错误：

```
<p>Error Number: 1366</p><p>Incorrect string value: '\xCC_a' for column 'last_name' at row 1</p><p>INSERT INTO `phppos_people` (`first_name`, `last_name`, `email`, `phone_number`, `address_1`, `address_2`, `city`, `state`, `zip`, `country`, `comments`) VALUES ('Juan Gordon', 'Garc�_a', 'noman@test.com', '', '', '', '', '', '', '', '')</p><p>Filename: /Library/WebServer/Documents/phppos/PHP-Point-Of-Sale/models/person.php</p><p>Line Number: 75</p>  </div> 
```

姓氏是`varchar(255) utf8_unicode_ci`

```
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_unicode_ci'; 
```

示例 CSV 代码

```
?>

last_name = GarcÌ_a 
```

更新：我刚刚了解到，在 excel 中将文件另存为 .csv 时，编码为：Westren (Mac OS Roman)，以 CR 作为换行符。

我认为文件编码可能会导致问题。但我需要支持它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T18:56:47.660

导出到 Mac OS Roman 的唯一 Excel 显然是 OSX 的 MS Excel。不幸的是我没有这个所以我无法检查如何使用正确的字符集导出

你现在有两个选择

**a)例如，使用[iconv](http://ss64.com/bash/iconv.html)将 CSV 转换为 UTF-8**

```
iconv -f MACROMAN -t UTF8 < yourfile.csv > yourfile-utf8.csv 
```

**b) 在导入之前将连接字符集设置为文件的字符集**

```
SET NAMES macroman; 
```

在 codeigniter 中，这看起来像这样

```
$this->db->simple_query('SET NAMES \'macroman\''); 
```

导入完成后，不要忘记将其设置回来

```
$this->db->simple_query('SET NAMES \'utf8\''); 
```

**解释：**

如果您的连接字符集是 UTF-8，那么您的数据库将不包括 UTF-8 编码的数据。如果您将连接字符集设置为`macroman`并且您写入的列是 UTF-8，MySQL 会自动为您转换。

> 来自[http://dev.mysql.com/doc/refman/5.5/en/charset-connection.html](http://dev.mysql.com/doc/refman/5.5/en/charset-connection.html)
> 
> SET NAMES 'charset_name' [COLLATE 'collat​​ion_name']
> 
> SET NAMES 指示客户端将使用什么字符集将 SQL 语句发送到服务器。因此，SET NAMES 'cp1251' 告诉服务器，“来自该客户端的未来传入消息在字符集 cp1251 中。” 它还指定服务器用于将结果发送回客户端的字符集。（例如，如果您使用 SELECT 语句，它指示用于列值的字符集。）

在我的freeBSD 机器上，MySQL 已经编译了macroman 字符集，我想你也会有这个。

```
mysql> SELECT * FROM information_schema.COLLATIONS WHERE CHARACTER_SET_NAME = 'macroman';
+---------------------+--------------------+----+------------+-------------+---------+
| COLLATION_NAME      | CHARACTER_SET_NAME | ID | IS_DEFAULT | IS_COMPILED | SORTLEN |
+---------------------+--------------------+----+------------+-------------+---------+
| macroman_general_ci | macroman           | 39 | Yes        | Yes         |       1 |
| macroman_bin        | macroman           | 53 |            | Yes         |       1 |
+---------------------+--------------------+----+------------+-------------+---------+ 
```

另请参阅[http://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html](http://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html)

希望这可以帮助

# php - 如何使用 cURL 签署使用 sfGuardUser 的 Symfony 项目？

> ID：14183317
> 
> 赞同：2
> 
> 时间：2013-01-06T14:57:54.127
> 
> 标签：php, curl, symfony-1.4

我需要使用 curl 命令登录系统，但我不知道如何跳过 CSRF 身份验证。

我尝试了以下但没有奏效：

```
curl -d "form_username_input_name=username&form_passowrd_input_name=password" url 
```

我如何实现我想要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T08:28:09.950

我认为您需要创建一个专用于 cURL 登录的单独登录。您将无法绕过 CSRF 保护（实际上这就是它的制作原因）。

所以，

*   扩展应用中的默认`sfGuardAuth`模块
*   创建一个名为（例如）的新动作`executeLoginCurl`
*   使用默认的 sfGuard 验证器执行验证`sfGuardValidatorUser`
*   然后调用`$this->getUser()->signIn(...)`以登录用户

我建议您使用保护措施来避免其他应用程序卷曲此模块/操作并尝试强制登录。例如，您可以对 IP 进行此操作的限制。

# php - 需要数组格式化帮助？

> ID：14183318
> 
> 赞同：1
> 
> 时间：2013-01-06T14:57:54.240
> 
> 标签：php, arrays, codeigniter

我有两个数组。现在我想比较两个数组中的一些元素，基于我需要将一个数组元素填充到新数组中。

```
 Array1: $days this is an array of elements between two dates.

$days = Array
       (
         [0] => 2012-06-23
         [1] => 2012-06-24
         [2] => 2012-06-25
         [3] => 2012-06-26
         [4] => 2012-06-27
         [5] => 2012-06-28
         [6] => 2012-06-29
         [7] => 2012-06-30
         [8] => 2012-07-01
         [9] => 2012-07-02
         [10] => 2012-07-03
         [11] => 2012-07-04
         [12] => 2012-07-05
         [13] => 2012-07-06
         [14] => 2012-07-07
         [15] => 2012-07-08
         [16] => 2012-07-09
         [17] => 2012-07-10
         [18] => 2012-07-11
         [19] => 2012-07-12
         [20] => 2012-07-13
         [21] => 2012-07-14
         [22] => 2012-07-15
         [23] => 2012-07-16
        )

 Array2: $summary is the array which i am getting from the database..

 $summary = Array
 (
    [0] => Array
    (
        [date] => 2012-06-23 
        [no_of_posts] => 1
    )

    [1] => Array
    (
        [date] => 2012-06-24 
        [no_of_posts] => 2
    )

    [2] => Array
    (
        [date] => 2012-06-25 
        [no_of_posts] => 1
    )

    [3] => Array
    (
        [date] => 2012-06-26 
        [no_of_posts] => 1
    )

    [4] => Array
    (
        [date] => 2012-06-27
        [no_of_posts] => 1
    ) 
```

现在从这两个数组中，我需要一个数组，它告诉我在这个日期有很多次帖子，如果没有针对某个日期的帖子，那么它应该为零。我试过这样......

```
 $result = array();
   foreach($summary as $key=>$s) {
       foreach($days as $d) {
          if($s['date'] == $d) {
               $result[$d] = $s['no_of_posts'];
          } else {
               $result[$d] = 0;
          }
      }
   } 
```

我知道我找不到错误…………任何想法。

输出数组需要如下所示.....

```
 $result = Array
            Array
       (
         [2012-06-23] = 1
         [2012-06-24] = 2
         [2012-06-25] = 1
         [2012-06-26] = 1
         [2012-06-27] = 1
         [2012-06-28] = 0
         [2012-06-29] = 0
         [2012-06-30] = 0
         [2012-07-01] = 0
         [2012-07-02] = 0
         [2012-07-03] = 0
         [2012-07-04] = 0
         [2012-07-05] = 0
         [2012-07-06] = 0
         [2012-07-07] = 0
         [2012-07-08] = 0
         [2012-07-09] = 0
         [2012-07-10] = 0
         [2012-07-11] = 0
         [2012-07-12] = 0 
         [2012-07-13] = 0
         [2012-07-14] = 0
         [2012-07-15] = 0
         [2012-07-16] = 0
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:05:40.000

最快的方法是遍历数据库结果并创建一个按日期索引的值数组：

```
$summaryTotals = array();
foreach($summary as $dbSummary) {
    $summaryTotals[$dbSummary['date']] = $dbSummary['no_of_posts'];
} 
```

然后遍历您的日期数组，输入摘要数组中匹配的值，如下所示：

```
$dayValues = array();
foreach($days as $day) {
    if(isset($summaryTotals[$day])) {
        $dayValues[$day] = $summaryTotals[$day];
    } else {
        $dayValues[$day] = 0;
    }
} 
```

dayValues 数组现在应该是您所追求的。我相信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:08:30.213

试试这个方法：

```
 $newArr = array();

    foreach($summary as $key=>$s) {
      $newArr[$s['date']] = $s['no_of_posts'];
    }

    $newDays = array_fill_keys(array_values($days),'0');

    $newData = $newDays + $newArr;

    print_r ($newData); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-06T15:26:22.763

19 => '2012-07-12', 20 => '2012-07-13', 21 => '2012-07-14', 22 => '2012-07-15', 23 => '2012- 07-16', ); $summary = array ( 0 => array ( 'date' => '2012-06-23', 'no_of_posts' => 1 ),

```
 1 => array
        (
            'date' => '2012-06-24' ,
            'no_of_posts' => 2
            ),

        2 => array
        (
            'date' => '2012-06-25', 
            'no_of_posts' => 1
            ),

        3 => array
        (
            'date' => '2012-06-26' ,
            'no_of_posts' => 1
            ),

        4 => array
        (
            'date' => '2012-06-27',
            'no_of_posts' => 1
            )
        );

    $result = array();
    foreach($summary as $key=>$s) {
        foreach($days as $d) {
            if($s['date'] == $d) {
                $result[$d] = $s['no_of_posts'];
            } else if(!isset($result[$d])){
                $result[$d] = 0;
            }
        }
    } 
```

# php - PHP脚本不会显示错误，只是一个空白页

> ID：14183324
> 
> 赞同：2
> 
> 时间：2013-01-06T14:59:15.020
> 
> 标签：php, error-handling

> **可能重复：**
> [如何在 PHP 中获取有用的错误消息？](https://stackoverflow.com/questions/845021/how-to-get-useful-error-messages-in-php)

我的脚本中的简单错误不会显示在屏幕上，只会显示在`error.log`. 我找不到在屏幕上显示它们的方法。这里还能做什么？

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);
  knaller!
?> 
```

使用 PHP 版本 5.3.14-1~dotdeb.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:07:51.743

好的，我之前使用过搜索但没有找到正确的答案，现在它显示为“相关”...

这是故事：

*   Glavic，这些建议都没有改变任何东西。
*   相关文章“[无法显示 PHP 错误](https://stackoverflow.com/questions/13762089/cannot-get-php-errors-to-display?rq=1)”的解决方案是将有疑问的文件包含在另一个设置了 error_reporting 的文件中。通过马里奥斯的评论，我也理解了为什么这会有所帮助。

那很快-谢谢大家！:)

# shell - 如何使用 shell 脚本查找和替换属性文件中的属性？

> ID：14183326
> 
> 赞同：2
> 
> 时间：2013-01-06T14:59:19.930
> 
> 标签：shell

我的属性文件有属性 WLS_Home={Path to server} 如何用我在脚本变量中的另一个路径替换它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:05:37.067

您可以使用 sed：

```
sed '/^WLS_Home=/s@=.*$@='"$new_path"@g 
```

其中 new_path 是包含新路径的变量。您不想在 中`/`用作分隔符`sed`，因为它可能会出现在路径中。您可以使用 shell 重定向（即 ）覆盖原始文件`sed ... file > tmp-file && mv tmp-file file`，或者`-i`如果您`sed`支持该非标准功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T15:09:22.127

```
#!/bin/bash

new_path="/the/new/path"
sed -i "s%WLS_Home=.*%WLS_Home=$new_path%g" my_properties.file 
```

不要`/`用作`sed`分隔符，否则这会给您带来一些错误，因为您的路径中有一些错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:00:50.083

只需使用`sed`.

`sed -i 's/Path_to_server/new_path_to_server/g' file`

# ember.js - Emberdata 模型似乎没有填充响应

> ID：14183333
> 
> 赞同：1
> 
> 时间：2013-01-06T15:00:12.430
> 
> 标签：ember.js

我正在尝试制作一个简单的文件浏览器应用程序，但这让我很头疼。我试图将它移植到带有 FixtureAdapter 的 jsfiddle 中：http: [//jsfiddle.net/Rolus/bB2mr/23/](http://jsfiddle.net/Rolus/bB2mr/23/)

（我不确定我是否在小提琴中正确定义了固定装置，这是我第一次使用这个适配器。）

我试图让应用程序（在路由器中）做的是向服务器请求一个包含 3 个“子”文件的“根”文件（目录）。然后服务器返回包含这 3 个“子”文件的响应：

```
{
    "file":{
        "uri":"L3Rlc3QvdGVzdDA=",
        "size":1000,
        "children":["dGVzdC90ZXN0MC90ZXN0MS5ibGE=",
                    "dGVzdC90ZXN0MC90ZXN0Mi5ibGE=",
                    "dGVzdC90ZXN0MC90ZXN0My5ibGE="]
    }
} 
```

（URI 是 base64 编码的。）然后我要求它获取孩子，并且应用程序发出第二个请求（如预期的那样），该请求返回以下响应：

```
{
    "files" : [
        {
            "uri":"dGVzdC90ZXN0MC90ZXN0MS5ibGE=",
            "size":1,
            "children":[]
        },
        {
            "uri":"dGVzdC90ZXN0MC90ZXN0Mi5ibGE=",
            "size":2,
            "children":[]
        },
        {
            "uri":"dGVzdC90ZXN0MC90ZXN0My5ibGE=",
            "size":3,
            "children":[]
        }]
} 
```

然而，在这个过程中，我注意到了两件事：

第一：即使'root'模型似乎知道它的'children'（它提出了我期望它提出的请求）它似乎不知道它自己的'uri'或'size'，因为添加了这个didLoad方法到模型：

```
didLoad: function () {
    console.log("id: "+ this.id + " " + this.get("uri") + this.get("size"));
} 
```

结果将以下内容打印到控制台：

```
id: L3Rlc3QvdGVzdDA= nullnull 
```

其次，它似乎忽略了我将主键更改为“uri”`DS.JSONSerializer._primaryKey(App.File)`返回“id”的努力。我正在尝试几种不同的方法来更改模型中的 primaryKey。

在发出第二个请求后，又有 3 个 didLoad 行输出到控制台：

```
id: dGVzdC90ZXN0MC90ZXN0MS5ibGE= nullnull
id: dGVzdC90ZXN0MC90ZXN0Mi5ibGE= nullnull
id: dGVzdC90ZXN0MC90ZXN0My5ibGE= nullnull 
```

我的视图更新为 3 个空行（“文件名：”，请参阅小提琴中的模板），但它永远不会填充响应数据。

此时脚本终于遇到了错误：

```
Uncaught TypeError ('hash' undefined): Cannot call method 'hasOwnProperty' of null ember-data.js:6246
    DS.JSONSerializer.DS.Serializer.extend.extractId 
```

这似乎是由第二次响应后 JSONSerializer 的第 4 次迭代引起的，而响应数组中只有 3 个项目，所以第 4 次迭代“哈希”显然为空，问题是它为什么要进行第 4 次迭代。

我希望我在这里的胡言乱语是有道理的。只看小提琴可能是最简单的。我真的希望有人能发现其中的一些错误，因为我真的没有想法了。

我正在使用 emberjs v1.0.0-pre.2-123-ga352c48 和 ember-data 修订版 11。

提前致谢。

# iframe - Joomla 2.5 自定义模块在一个会话中只加载一次

> ID：14183336
> 
> 赞同：0
> 
> 时间：2013-01-06T15:00:26.933
> 
> 标签：iframe, joomla, module, preloader

我只是在每个页面上可见的 joomla 自定义 html 模块中创建 iframe soundclouds 播放器模块。问题是，当我浏览我的网页模块播放器时，每次我更改菜单页面时都会停止播放音乐。

我想知道是否有任何选项可以只为会话或任何其他方式加载我的模块一次？

# c# - 从 WPF C# 中的另一个 exe 窗口跟踪移动

> ID：14183339
> 
> 赞同：2
> 
> 时间：2013-01-06T15:00:45.893
> 
> 标签：c#, wpf, plugins, itunes

我正在寻找一种方法来跟踪另一个窗口（在我的情况下是 iTunes）的移动（调整大小、移动）。我目前正在开发一个 iTunes 插件，我想让我的 WPF 插件在拖动、调整大小等时粘在 iTunes 窗口上。Windows SDK 的 iTunes COM 提供了最大化和最小化的事件，不幸的是没有调整窗口大小和移动窗口的事件。我也看到人们`SetParent`在其他 win32 应用程序上使用，但我不认为这适用于我的情况。

谢谢

# google-maps-api-3 - MVC4 asp.net 在视图中访问 kml 文件

> ID：14183353
> 
> 赞同：1
> 
> 时间：2013-01-06T15:02:20.490
> 
> 标签：google-maps-api-3, asp.net-mvc-4, visual-studio-2012, kml

我在 Visual Studio 2012 中的 MVC4 项目中遇到问题。我在 symfony2 中构建了一个后台，在那里我可以显示谷歌地图，其中包含从 kml 文件加载的多边形。

现在我正在尝试在 asp.net (C#) 中做同样的事情......但我的代码似乎无法访问 kml 文件。

我没有使用模型视图控制器系统来访问我的文件，也许这就是问题所在......

我在我的项目中创建了一个名为“Kmls”的目录，并将我的 kml 粘贴在那里（1.kml，2.kml，...）这是我的观点代码：

```
@model IEnumerable<SocialGeo.Models.district>
@{
   ViewBag.Title = "Index";
}

<h3>Choose a district first</h3>

<ul class="allDistricts" data-kml="">
    @foreach (var item in Model) {
        @Html.ActionLink(item.district_name, "DistrictNews", new { id=item.district_id})
    }
</ul>

<script type="text/javascript">
  $(document).ready(function () {
    var myOptions = {
        center: new google.maps.LatLng(51.087633, 3.711569),
        zoom: 11,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    var paths =
    {
        imagePath: "@Url.Content("~/Kmls/10.kml")"
    }

    $("section").append('<div class="mapscanvas" id="map_canvas' + 0 + '"></div>');

    map = new google.maps.Map(document.getElementById("map_canvas" + 0), myOptions);

    geoXml = geoXML3.parser({ map: map, singleInfoWindow: true, zoom: false });
    //var jej = @HttpContext.Current.Server.MapPath("~/Kmls/10.kml")

    geoXml.parse(paths.imagePath);

});
</script> 
```

当我在 Firefox 中运行应用程序（调试）时，我在控制台中收到以下错误：

```
GET: http://localhost:53760/Kmls/10.kml 404NotFound
HTTP error 404 retrieving /Kmls/10.kml in polys.js (line 990)
Unable to retrieve /Kmls/10.kml 
```

我看到了地图，但没有看到我需要的多边形。

我也必须为此使用控制器吗？这是我正在调用的控制器操作：

```
public ActionResult Index()
{
    var districts = db.districts.Include(d => d.city);
    return View(districts.ToList()); 
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:01:48.500

我认为您的问题可能是为了在 Google 地图中加载 KML 文件（至少对于免费版本），它需要是 Web 可访问的（即您提供的 URL 需要可从网络访问，而不仅仅是在本地访问您的开发/生产服务器）。因此“/Kmls/10.kml”不是有效的 URL，需要类似“ [http://myserver/KML](http://myserver/KML) ”的内容。

正如下面的评论中所提供的，这里是一个类似回答问题的链接：[Google Maps API and KML File LocalHost Development Options](https://stackoverflow.com/questions/6092110/google-maps-api-and-kml-file-localhost-development-options)

# database - Hibernate Entity Manager：结果集映射

> ID：14183355
> 
> 赞同：0
> 
> 时间：2013-01-06T15:02:22.877
> 
> 标签：database, hibernate, ibatis, entitymanager, hibernate-entitymanager

我是 Hibernate 的新手，我是 iBATIS 的粉丝，但是我的新工作环境迫使我使用 Hibernate。在我工作场所的当前场景中，有许多复杂的选择查询，我觉得 hibernate 不能很好地处理。

所以我想写我自己的原生 SQL 选择查询，有很多很多的连接和条件。到现在为止还挺好。

我正在使用 EntityManager 来触发查询并返回结果集。示例代码将如下所示：

```
String sqlQuery="select COL_1, COL_2 from MY_TABLE_NAME";
Query q=em.createNativeQuery(sqlQuery,);
List resultList=q.getResultList(); 
```

请记住，这只是一个代码示例。我想有一种方法可以将本例中的结果集（COL_1 和 COL_2）映射到我的具有两个（或更多）字段的 JAVA 类。

另请注意，此 JAVA 类不能是链接到表的实体，因此我需要一种方法将我的任何 JAVA 类定义为 resultClass，就像我们在 iBATIS 中所做的那样。

有什么办法吗？所以我只是在某处为任何 JAVA 类定义一个映射，查询的结果集会自动映射到我的 JAVA 类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:30:01.133

```
String sqlQuery="select COL_1, COL_2 from MY_TABLE_NAME";
Query q=em.createNativeQuery(sqlQuery,MY_TABLE_NAME.class);
List<MY_TABLE_NAME> resultList=q.getResultList(); 
```

在 IDE 调试模式下查看变量，你会得到你想要的。

# c# - 将字符串转换为 BigInteger

> ID：14183356
> 
> 赞同：13
> 
> 时间：2013-01-06T15:02:27.287
> 
> 标签：c#, string, parsing, type-conversion, biginteger

我有以下代码创建一个非常大的数字 ( `BigInteger`)，然后将其转换为`string`.

```
// It's a console application.
BigInteger bi = 2;
for (int i = 0; i < 1234; i++)
{
   bi *= 2;
}
string myBigIntegerNumber = bi.ToString();
Console.WriteLine(myBigIntegerNumber); 
```

我知道转换为`int`我们可以使用`Convert.ToInt32`并转换为`long`我们使用`Convert.ToInt64`，但是转换为`BigInteger`呢？

如何将 a `string`（代表一个非常长的数字）转换为`BigInteger`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-06T15:04:48.123

使用[`BigInteger.Parse()`](http://msdn.microsoft.com/en-us/library/dd268285.aspx)方法。

> 将指定样式的数字的字符串表示形式转换为其 BigInteger 等效项。

```
BigInteger bi = 2;
for(int i = 0; i < 1234; i++)
{
    bi *= 2;
}

var myBigIntegerNumber = bi.ToString();
Console.WriteLine(BigInteger.Parse(myBigIntegerNumber)); 
```

您也可以检查[`BigInteger.TryParse(`](http://msdn.microsoft.com/en-us/library/dd268301.aspx)) 方法与您的对话是否成功。

> 尝试将数字的字符串表示形式转换为其等效的 BigInteger，并返回一个指示转换是否成功的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-25T08:14:10.433

这是另一种更快的方法`BigInteger.Parse()`

```
public static BigInteger ToBigInteger(string value)
{
    BigInteger result = 0;
    for (int i = 0; i < value.Length; i++)
    {
        result = result * 10 + (value[i] - '0');
    }
    return result;
} 
```

# jquery - jQuery Lightbox 杀死其他 JQ 脚本

> ID：14183359
> 
> 赞同：0
> 
> 时间：2013-01-06T15:02:38.123
> 
> 标签：jquery, lightbox

我想在我的响应式布局及其工作上使用 jQuery Lightbox。但其他 JQ 脚本：Tynenav 和滑块在添加 jQuery Lightbox 后不起作用。我知道 JQ 冲突的 chack：“只需将 $.noConflict(). 添加到 jQuery 库”在 JQ 行之后。但我以这种方式在我的 fuctions.php 中注册 JQ

```
if (!is_admin())
{ 
    wp_deregister_script('jquery');
    wp_register_script('jquery'("http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"), false);
    wp_enqueue_script('jquery');
} 
```

我应该把 $.noConflict() 放在哪里以及我应该采取什么额外的措施来避免 JQ 脚本中的冲突。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:16:43.763

新版本 jQuery 打破其他 jQuery 插件的说法推断 jQuery 已经存在于页面中。

如果它是在没有使用`wp_enqueue_script`ie 硬编码到模板的情况下添加的，它不会注销。添加新版本的 jQuery 会覆盖 jQuery 对象，并且会清除任何先前加载的注册到初始 jQuery 对象的插件。

过去，许多 wordpress 主题开发人员`noConflict()`在 jQuery.js 文件的最后直接调用。

对于初学者来说，在浏览器控制台或浏览器的源代码视图中查看脚本的清单和顺序。同样在浏览器控制台中列出抛出的任何错误。

jQuery 必须在任何依赖插件或使用 jQuery 的代码之前加载。

# android - Android How to call invalidate in SurfaceView

> ID：14183360
> 
> 赞同：2
> 
> 时间：2013-01-06T15:02:38.400
> 
> 标签：android, graphics, surfaceview, invalidation

I have created a class from SurfaceView.I wanted it that when i touch on the screen then the screen will be refreshed by calling invalidate() function. But in my implementation invalidate () is not called when i touched on the screen.

Here is my code.

```
public class GameBoard extends SurfaceView implements Callback {

private SurfaceHolder holder;

int clicked =0;

public GameBoard(Context context) 
{
     super(context);
     holder = getHolder();
     holder.addCallback(this);

     setFocusable(true);
     requestFocus();
}

@Override
public void surfaceCreated(SurfaceHolder holder) 
{
    Canvas c = holder.lockCanvas(null);
    onDraw(c);
    holder.unlockCanvasAndPost(c);

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) 
{
    // TODO Auto-generated method stub

}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) 
{ 

}

public boolean onTouchEvent(MotionEvent event) 
{ 
    int action = event.getAction();

    if (action==MotionEvent.ACTION_UP)
    {

        clicked++;

//          Canvas c = holder.lockCanvas(null);
//          onDraw(c);
//          holder.unlockCanvasAndPost(c);

        invalidate();

    }

    return true;
}

 @Override
 protected void onDraw(Canvas canvas) 
 {
       canvas.drawColor(0xFF00ff00);    

        Paint p = new Paint();
        p.setTextSize(20);
        p.setColor( Color.RED );

        p.setAntiAlias(true);

        canvas.drawText(""+clicked, 100, 500, p);  

 }

} 
```

# c# - 如何使用 Dotnetzip 库从 zip 中删除包含文件的特定文件夹？

> ID：14183361
> 
> 赞同：2
> 
> 时间：2013-01-06T15:02:38.477
> 
> 标签：c#, dotnetzip

我需要删除一个名为“META-INF”的文件夹。它包含一些文件。如何在不输入所有名称的情况下删除该文件夹以及其中的所有文件？我无法提取所有文件，删除包含所有文件的目录，然后再次打包 zip，因为 zip 有很多文件（~1800）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:18:40.320

我用这个：

```
 int x;
 for (x = 0; x < zip.Count - 1; x++)
 {
     ZipEntry e = zip[x];
     if (e.FileName == "META-INF/")
     {
         zip.RemoveEntry(e.FileName);
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:40:39.400

你可以使用这样的东西：

```
var matches = fileSelector.SelectEntries(yourZipFile,"META-INF");
for(int i = 0;i < matches.Length; ++i)
{
    yourZipFile.RemoveEntry(matches[i].FileName);
} 
```

# python - python binary version doesnt match rpm version

> ID：14183362
> 
> 赞同：0
> 
> 时间：2013-01-06T15:02:44.840
> 
> 标签：python, linux

I have installed manually python (2.7.3). Whoc do I update the rpm version

usr/bin/python -V:

Python 2.7.3

rpm -qf /usr/bin/python:

python-2.6.5-3.el6.x86_64

any suggestions?

linux version: RH6.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:37:41.513

你安装不正确。而不是`make install`你应该运行`make altinstall`. 这将与现有版本并行安装新版本的 Python，并创建一个新的可执行文件，`$PREFIX/bin`其名称`python`后跟已安装的次要 Python 版本，例如`python2.7`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:47:26.290

`/usr/bin/`在called中创建一个符号链接`python2.7`，指向您安装新 Python 的位置并使用它。

不要尝试在 redhat box 上升级或强制使用默认 python，因为许多其他工具将停止工作。

# winforms - 在 Winforms 中选中 DataGridView 中的组合框

> ID：14183366
> 
> 赞同：1
> 
> 时间：2013-01-06T15:02:57.560
> 
> 标签：winforms, combobox

我在 winforms 中搜索 DataGridView 的 CheckComboBox 列，但没有任何结果。是否有在网络中（自由地）实现这些东西的书面类？我找到了一些其他自定义列，并且我找到了 CheckComboBox 实现，但我未能将它们连接在一起并使它们正常工作...... :( 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T22:37:27.680

我不认为你能找到一个，因为 CheckBoxComboBox 不是很常见，但你可以自己写一个。这是一个[自定义 CheckedListBoxColumn](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/6c68a44c-c4ab-4caf-94e9-249ec63a90d0)的示例，可帮助您入门。

如果您遇到困难，请按照这篇文章指导您完成[创建自定义 DataGridView 列](http://www.code-magazine.com/Article.aspx?quickid=0707061)的过程。

# android - 在 android 上如何使用支持 ESC/POS 命令集的 USB 打印机？

> ID：14183367
> 
> 赞同：2
> 
> 时间：2013-01-06T15:02:56.547
> 
> 标签：android, printing, usb

在 android 上如何使用支持 ESC/POS 命令集的 USB 打印机？我发现了 Epson SDK for android [http://pos.epson.com/mobilesdks/index.htm](http://pos.epson.com/mobilesdks/index.htm)但它似乎只支持 WIFI 和 BT 打印机。这不是我的情况，我只需要处理 USB 连接。欢迎任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:03:52.283

看看 Star Micronics 打印机，它们的 SDK 支持 USB。

# java - 关于用于关闭流的 close 方法（）

> ID：14183371
> 
> 赞同：3
> 
> 时间：2013-01-06T15:03:31.263
> 
> 标签：java, stream

今天，当我在编写某种 servlet 时，它正在将一些信息写入我硬盘上的某个文件中，我正在使用以下代码来执行写入操作

```
 File f=new File("c:/users/dell/desktop/ja/MyLOgs.txt");
        PrintWriter out=new PrintWriter(new FileWriter(f,true));
        out.println("the name of the  user is "+name+"\n");
        out.println("the email of the user is "+ email+"\n");
        out.close();             //**my question is about this statement** 
```

当我不使用该语句时，servlet 编译良好，但它没有向文件写入任何内容，但是当我包含它时，则成功执行了写入操作。我的问题是：

1.  为什么当我不包含该语句时数据没有写入文件（即使我的 servlet 编译时没有任何错误）？
2.  流的关闭操作在多大程度上是可观的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T15:06:34.750

调用`close()`会导致所有数据被刷新。您已经构建了 a`PrintWriter`而没有启用自动刷新（其中一个构造函数的第二个参数），这意味着您必须手动调用`flush()`，这`close()`对您有用。

关闭还可以释放打开文件所使用的任何系统资源。尽管 VM 和操作系统最终会关闭该文件，但最好在完成后关闭它以节省计算机内存。

您也可以将其`close()`放在一个`finally`块内以确保它**总是**被调用。如：

```
PrintWriter out = null;
try {
    File f = new File("c:/users/dell/desktop/ja/MyLOgs.txt");
    out = new PrintWriter(new FileWriter(f,true));
    out.println("the name of the  user is "+name+"\n");
    out.println("the email of the user is "+ email+"\n");
} finally {
    out.close();
} 
```

请参阅：[PrintWriter](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html#PrintWriter%28java.io.Writer,%20boolean%29)

Sanchit 还提出了一个很好的观点，即让 Java 7 VM 在您不需要时自动关闭流。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T15:06:03.490

当你`close`a`PrintWriter`时，它会将所有数据刷新到你想要数据去的任何地方。它不会自动执行此操作，因为如果每次您写入某些内容时它都会执行此操作，那么效率会非常低，因为写入不是一个简单的过程。

您可以使用 实现相同的效果`flush();`，但您应该始终关闭流 - 请参见此处：[http](http://www.javapractices.com/topic/TopicAction.do?Id=8) ://www.javapractices.com/topic/TopicAction.do?Id=8和此处：[http ://docs.oracle.com/ javase/tutorial/jndi/ldap/close.html](http://docs.oracle.com/javase/tutorial/jndi/ldap/close.html)。使用完流后，请始终调用`close();`流。此外，为了确保它**始终**关闭，无论异常情况如何，您都可以这样做：

```
try {
    //do stuff
} finally {
    outputStream.close():
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T15:12:51.140

Streams automatically flush their data before closing. So you can either manually flush the data every once in a while using `out.flush();` or you can just close the stream once you are done with it. When the program ends, streams close and your data gets flushed, this is why most of the time people do not close their streams!

Using Java 7 you can do something like this below which will auto close your streams in the order you open them.

```
public static void main(String[] args) {
  String name = "";
  String email = "";
  File f = new File("c:/users/dell/desktop/ja/MyLOgs.txt");
  try (FileWriter fw = new FileWriter(f, true); PrintWriter out = new PrintWriter(fw);) {
    out.println("the name of the  user is " + name + "\n");
    out.println("the email of the user is " + email + "\n");
  } catch (IOException e) {
    e.printStackTrace();
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T15:05:52.567

这是因为`PrintWriter`缓冲您的数据是为了不为每次写入操作重复进行 I/O 操作（这非常昂贵）。当您调用`close()`Buffer 时会刷新到文件中。您也可以`flush()`在不关闭流的情况下调用强制写入数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-06T15:07:19.757

`PrintWriter`缓冲要写入的数据，并且在其缓冲区已满之前不会写入磁盘。调用`close()`将确保刷新所有剩余数据并关闭`OutputStream`.

`close()`语句通常出现在`finally`块中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T15:20:35.490

**当我不包含该语句时，为什么没有将数据写入文件？**

当进程终止时，非托管资源将被释放。对于 InputStreams 这很好。对于 OutputStreams，您可能会丢失缓冲数据，因此您至少应该在退出程序之前刷新流。

# javascript - javascript重新加载页面：如何找到罪魁祸首

> ID：14183375
> 
> 赞同：2
> 
> 时间：2013-01-06T15:03:49.217
> 
> 标签：javascript

我有一个页面不断重新加载，大约每 45 秒一次。如果我在浏览器中禁用 javascript，页面将停止重新加载 - 所以我怀疑某些 javascript 是罪魁祸首。但是有大量分散在各种 .js 文件中，其中一些是压缩的。所以我很难通过 JS 源来寻找罪魁祸首。

我正在寻找有关如何找到原因的想法 - 无需阅读（和理解）所有 JS 源代码。

我试过在 Firebug 中使用 Break on Next。它总是在 jquery.min.js 内部中断——但堆栈中没有历史记录，所以我不知道是谁调用了 jQuery。

网页是[http://www.sarasotasailingsquadron.org/](http://www.sarasotasailingsquadron.org/)

其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:52:55.140

好的，所以我发现了你的问题的一部分。我不能完全找到它的起源，但也许这会对你有所帮助。

我无法在 Chrome 下完全重现您的问题，但每隔一分钟左右，我就会看到对您主页的请求。根据 Chrome 的开发者工具，该请求是在 jQuery 中发起的。（这并不意味着 jQuery 是罪魁祸首……这只是意味着发出请求的任何代码都是使用 jQuery 来完成的。）

在控制台中，有一条可疑的错误消息：

> 资源解释为图像，但使用 MIME 类型 text/html 传输：“http://www.sarasotasailingsquadron.org/”。

调用堆栈将其降至`$.transition`. 这似乎与您的图像过渡标题“硬币滑块”有关。

我浏览了您的代码并没有看到参考，但在某个地方我怀疑您正在尝试将您的主页作为图像加载到该标题中。也许您有一些无效的 HTML 或图像的空 URL 使其无法填充完整的请求 URL 或其他东西。无论如何，这应该可以帮助您找到确切的来源。

# actionscript-3 - 在 MVC 中使用某种工厂类（实例创建者）

> ID：14183378
> 
> 赞同：0
> 
> 时间：2013-01-06T15:04:05.237
> 
> 标签：actionscript-3, model-view-controller, puremvc

我正在尝试使用一个名为 Factory 的集中类来集中构建所有视图实例。已经在模型内部实例化了工厂类。但后来，这种结构开始产生问题。所以在这里问。这样的“工厂”类应该放在 mvc 的什么地方。他们应该如何与模型、视图和控制器交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:50:49.263

使用 MVC 结构并不意味着您需要忘记其他最佳实践。这只是一种将应用程序结构化为 3 层（或在 RL 的情况下为 4 层）的方式，这很有意义并推动您编写干净的代码。

模型永远不应该做任何与视图相关的事情。生成显示对象的工厂应放置​​在视图层中。何时以及如何实例化、初始化和使用该工厂取决于许多因素。由于您使用的是 DI/IOC 框架，因此实例化的明显选择是设置注入规则。至于哪些部分将使用工厂，有多种可能性：它可以由上下文视图中介传递到上下文视图。或者你可以选择专门的命令来完成繁重的工作。或者您可以将其用法封装在一个单独的类中，该类监听系统事件并做出相应的响应（一种无视图中介）

一件小事：`Factory`这个类的名称太笼统了。它根本没有传达任何意图。您应该为您的类选择有意义的描述性名称。如果工厂创建视图实例，至少它的名称中应该包含“视图”。您必须找到一个足够具体的名称，但不依赖于某个实现。这在一定程度上取决于班级运作的级别。

# javascript - 访问javascript字典时作为变量的键

> ID：14183380
> 
> 赞同：5
> 
> 时间：2013-01-06T15:04:12.620
> 
> 标签：javascript, variables, dictionary, key

我正在尝试将用于转换多个 div 的 css 值存储在字典中，以便在单击 div 时访问它们（div id 是 dict 的键）。

我的字典：

```
css_dict = {
    'keyA' : ['10px, 15px', '20px', '10px'],
    'keyB' : ['20px, 30px', '10px', '20px'],
    'keyA' : ['30px, 55px', '25px', '30px'],
} 
```

我需要像这样访问它（变量而不是键）：

```
css_dict.var[0] 
```

我想做什么的jsFiddle：http: [//jsfiddle.net/tKFka/25/](http://jsfiddle.net/tKFka/25/)

我无法弄清楚或找到正确的语法来使它工作......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-06T15:05:51.617

使用`[]`而不是点。

```
var var1 = 'keyA';
css_dict[var1][0]; 
```

# ajax - AutoMapper UseValue、ResolveUsing 或 MapFrom 重用来自先前调用的值。是缓存还是什么？

> ID：14183382
> 
> 赞同：0
> 
> 时间：2013-01-06T15:04:44.460
> 
> 标签：ajax, dynamic, asp.net-mvc-4, automapper, generic-collections

我有一种情况，从第二次调用和后续调用（Ajax GET 调用）开始，`AutoMapper`正在重用以前的值（第一次调用的值来自于操作链接中的点击）。这就像一个“缓存”问题......

```
public virtual ActionResult List(int assessmentId, int? chapterId, bool? isMenuClick)
{

    Mapper.CreateMap<Element, AssessmentQuestionViewModel>().
    ForMember(dest => dest.AssessmentId, opt => opt.MapFrom(e => assessmentId));

    ...

} 
```

我使用`UseValue`,`ResolveUsing`还是`MapFrom`在上面的`opt =>`lambda 中都没有关系。行为是相同的，也就是说，它重用了先前调用的值。

`AssessmentId``Element`源类型 ( )中不存在属性。这样，我尝试分配`AssessmentId`一个在随后调用我拥有此代码的方法期间“可能”动态更改的值。`assessmentId`是我的 ASP.NET MVC 操作方法中的一个参数，如上面方法签名中所示。

`List`然后我在action 方法中调用这段代码：

```
var questions =
    Mapper.Map<IEnumerable<Element>, IEnumerable<AssessmentQuestionViewModel>>
     (Database.Elements.Where(e => !elementIds.Contains(e.ElementId) &&
                              e.Standard.ChapterId == chapterId)); 
```

第一次，没问题`questions`，也就是说，所有`AssessmentQuestionViewModel`对象都`AssessmentId`按照定义正确设置了属性`CreateMap`。

从第 2 次调用开始，它重用了第 1 次`assessmentId`调用中的第一次调用，它搞乱了我的业务逻辑，因为我希望它映射`AssessmentId`到`assessmentId`作为参数传递给`List`方法的更新。

只是为了确定：我在代码中设置了一个断点，我可以看到`assessmentId`参数的值是正确的。只是返回的映射对象`questions`在属性中有错误的值`AssessmentId`- 一个与当前值不同的`assessmentId`值。据我了解，这些值应该相等，因为我要求 AutoMapper 使用该当前值进行映射。

我有 AutoMapper 2.2.1-ci9000（预发行版），但我用以前的版本对此进行了测试，我看到了同样的行为。我更新了售前赛，认为这种“不当行为”会消失。

我认为这是一个错误。如果我错了或者我试图以不受支持的方式使用它，请纠正我。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T15:33:36.710

我认为这里的问题是您尝试创建相同类型的多个映射 - AutoMapper 不支持。每次`List`调用您的操作时，您都会创建一个新映射（具有不同的`ForMember(...)`子句）。AutoMapper 不会抛出异常，它只是忽略重复的映射，所以您在这里看到的不是错误，而是预期的行为。

`ForMember`*实际上在每个*地图上都会调用，但是，您在这里遇到范围问题，因为您的变量被硬编码到表达式中。作为一种解决方法，您可以执行以下操作：

```
public class MyController
{
    public MyController()
    {
        // define mapping once, but make assessment expression dynamic
        Mapper.CreateMap<Element, AssessmentQuestionViewModel>().
            ForMember(dest => dest.AssessmentId, opt => opt.MapFrom(e => GetCurrentAssessmentId()));
    }

    private int GetCurrentAssessmentId()
    {
        return (int)TempData["AssessmentId"];
    }

    public ActionResult List(int assessmentId, ...)
    {
        // store current assessment temporarily
        TempData.Add("AssessmentId", assessmentId);
        // execute mapping
        var questions = Mapper.Map<IEnumerable<Element>, IEnumerable<AssessmentQuestionViewModel>>
 (Database.Elements.Where(e => !elementIds.Contains(e.ElementId) &&
                          e.Standard.ChapterId == chapterId));
    }
} 
```

不过，我会说，你跳过了很多圈才能让它工作，在没有 AutoMapper 帮助的情况下手动设置属性会简单得多，例如

```
var questions = Mapper.Map<IEnumerable<Element>, IEnumerable<AssessmentQuestionViewModel>>(...);
foreach (var q in questions)
{
    q.AssessmentId = assessmentId;
} 
```

# matlab - 有什么区别 | 和 || 在 MATLAB 中？

> ID：14183385
> 
> 赞同：5
> 
> 时间：2013-01-06T15:04:51.690
> 
> 标签：matlab, logical-operators, short-circuiting

MATLAB中的逻辑运算符`|`和逻辑运算符有什么区别？`||`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T15:15:50.740

I'm sure you've read the documentation for the [short-circuiting operators](http://www.mathworks.co.uk/help/matlab/ref/logicaloperatorsshortcircuit.html), and for the [element-wise operators](http://www.mathworks.co.uk/help/matlab/ref/logicaloperatorselementwise.html).

One important difference is that element-wise operators can operate on arrays whereas the short-circuiting operators apply only to scalar logical operands.

But probably the key difference is the issue of short-circuiting. For the short-circuiting operators, the expression is evaluated from left to right and as soon as the final result can be determined for sure, then remaining terms are not evaluated.

For example, consider

```
x = a && b 
```

If `a` evaluates to `false`, then we know that `a && b` evaluates to `false` irrespective of what `b` evaluates to. So there is no need to evaluate `b`.

Now consider this expression:

```
NeedToMakeExpensiveFunctionCall && ExpensiveFunctionCall 
```

where we imagine that `ExpensiveFunctionCall` takes a long time to evaluate. If we can perform some other, cheap, test that allows us to skip the call to `ExpensiveFunctionCall`, then we can avoid calling ExpensiveFunctionCall.

So, suppose that `NeedToMakeExpensiveFunctionCall` evaluates to `false`. In that case, because we have used short-circuiting operators, `ExpensiveFunctionCall` will not be called.

In contrast, if we used the element-wise operator and wrote the function like this:

```
NeedToMakeExpensiveFunctionCall & ExpensiveFunctionCall 
```

then the call to `ExpensiveFunctionCall` would never be skipped.

In fact the [MATLAB documentation](http://www.mathworks.co.uk/help/matlab/ref/logicaloperatorsshortcircuit.html), which I do hope you have read, includes an excellent example that illustrates the point very well:

```
x = (b ~= 0) && (a/b > 18.5) 
```

In this case we cannot perform `a/b` if `b` is zero. Hence the test for `b ~= 0`. The use of the short-circuiting operator means that we avoid calculating `a/b` when `b` is zero and so avoid the run-time error that would arise. Clearly the element-wise logical operator would not be able to avoid the run-time error.

For a longer discussion of short-circuit evaluation, refer to the [Wikipedia article](http://en.wikipedia.org/wiki/Short-circuit_evaluation) on the subject.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T15:11:34.527

**Logical Operators**

MATLAB offers three types of logical `operators` and `functions`:

*   `|` is Element-wise — operate on corresponding elements of logical arrays.
    **Example:** vector inputs `A` and `B`

    A = [0 1 1 0 1]; B = [1 1 0 0 1];

    A | B = 11101

*   `||` is Short-circuit — operate on scalar, logical expressions

    Example:

    `||` : Returns logical 1 (true) if either input, or both, evaluate to true, and logical 0 (false) if they do not.

    **Operand:** logical expressions containing scalar values.

    `A` || `B` (B is only evaluated if A is false)

    `A = 1;` `B = 0;`

    `C =(A || (B = 1));`

    `B` is `0` after this expression and `C is 1`.

*   Other is, Bit-wise — operate on corresponding bits of integer values or arrays.
    [**reference link**](http://www.mathworks.in/help/matlab/matlab_prog/operators.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:14:16.423

`|` represents `OR` as a [logical operator](http://www.mathworks.com/help/matlab/ref/logicaloperatorselementwise.html). `||` is also a logical operator called a [short-circuit OR](http://www.mathworks.com/help/matlab/matlab_prog/operators.html#f0-39129)

The most important advantage of short-circuit operators is that you can use them to evaluate an expression only when certain conditions are satisfied. For example, you want to execute a function only if the function file resides on the current MATLAB path. Short-circuiting keeps the following code from generating an error when the file, myfun.m, cannot be found:

```
 comp = (exist('myfun.m') == 2) && (myfun(x) >= y) 
```

Similarly, this statement avoids attempting to divide by zero:

```
x = (b ~= 0) && (a/b > 18.5) 
```

You can also use the `&&` and `||` operators in `if` and `while` statements to take advantage of their short-circuiting behavior:

```
if (nargin >= 3) && (ischar(varargin{3})) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T15:09:39.473

`||`用于标量输入

`|`在 if/while 语句中接受数组输入

从[来源](http://www.mathworks.in/help/matlab/ref/logicaloperatorsshortcircuit.html)： -

> 始终使用 && 和 || 需要短路时的操作员。使用元素运算符（& 和 |）进行短路可能会产生意想不到的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T15:16:28.737

短路`||`意味着，只有在表达式中必要时才会评估参数。在我们的示例中，`expr1 || expr2`如果`expr1`计算结果为`TRUE`，则无需计算第二个操作数 - 结果将始终为`TRUE`。如果您有一长串短路运算符`A || B || C || D`并且您的第一个评估为真，那么其他人将不会被评估。

如果您将 Element-wise logical 替换`|`为，`A | B | C | D`则将评估所有元素，而不管先前的操作数如何。

# powershell - UnauthorizedAccessException 在远程文件服务器上使用 Copy-Item

> ID：14183386
> 
> 赞同：9
> 
> 时间：2013-01-06T15:05:15.560
> 
> 标签：powershell, powershell-3.0

我正在尝试将大约 10 个文件夹复制到一个远程文件共享上，每个文件夹都包含一个 ~3KB .txt 文件，并有几秒钟的延迟。我正在使用`Copy-Item`这样的 Powershell：

```
try
{
    Copy-Item -Path $source -Destination $destination -Recurse -ErrorAction Stop
}
catch
{
    Write-Error $_.Exception.ToString()
} 
```

运行脚本的用户对文件服务器共享和本地源具有读取、写入和执行权限。

首次运行时，目标文件夹为空。一切正常。在第二次运行时，文件和文件夹已经存在。因此，在运行上面的代码之前，我首先使用以下方式运行检查`Test-Path`，如果文件夹存在，则使用`Remove-Item`如下方式删除：

```
try
{
    if(Test-Path -Path $path -ErrorAction Stop)
    {
         Remove-Item -Recurse -Path $path -ErrorAction Stop
    }
}
catch
{
    Write-Error $_.Exception.ToString()
} 
```

没有其他人编辑这些文件。但是，当运行脚本十几次时，偶尔，由于我不明白的原因，我在复制时突然收到一些文件夹的**UnauthorizedAccessException**错误。确切的错误是：

> System.UnauthorizedAccessException：访问被拒绝 ---> System.ComponentModel.Win32Exception：访问被拒绝在 Microsoft.PowerShell.Commands.FileSystemProvider.NativeDirectoryExists（字符串路径）中的 System.Management.Automation.SessionStateInternal.IsItemContainer（CmdletProvider providerInstance，字符串路径，CmdletProviderContext语境

**请注意：在远程文件服务器上的旧文件删除成功完成后，我收到了这些错误。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-10T09:44:54.967

这是一篇已有多年历史的帖子，但也许可以从中受益。您不必事先删除。您可以只使用`-Force`覆盖现有文件。

```
try
{
    Copy-Item -Path $source -Destination $destination -Recurse -ErrorAction Stop -Force
}
catch
{
    Write-Error $_.Exception.ToString()
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-07-14T04:50:34.390

您可能需要尝试以管理员身份运行命令行。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-11T19:32:18.450

Masi，Powershell 复制项功能并不是真正的 IMO。为什么不在这里使用 robocopy/Powershell 混合？

例子：

```
$source = "C:\temp"

$destination ="\\\RemoteServer\Temp"

robocopy $source $destination /s /mt:8 
```

# php - phpwebsockets yii 实现

> ID：14183387
> 
> 赞同：2
> 
> 时间：2013-01-06T15:05:27.983
> 
> 标签：php, html, yii, websocket, yii-extensions

我正在尝试使用 php 实现 websocket 并作为 yii 的扩展，以便我可以为我的 web 应用程序创建类似通知的功能

下面链接中的代码是我的起点：

[http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/](http://www.flynsarmy.com/2012/02/php-websocket-chat-application-2-0/)

它在我当地的 xampp 中完美运行。

我尝试将其转换为我遵循的 Yii 扩展步骤..

1.  我已将 PHPWebSocket.php 类放在 yii 扩展文件夹中。
2.  我创建了一个控制器 websocket 和一个动作 startserver 和一个动作索引（用于聊天界面以测试上面链接中的示例）

这是代码片段

```
<?php

Yii::import("ext.websocket.PHPWebSocket");

class WebSocketController extends Controller {

    public $layout = '//layouts/empty';

    public function actionStartServer() {

        set_time_limit(0);

        function wsOnMessage($clientID, $message, $messageLength, $binary) {
            global $Server;
            $ip = long2ip($Server->wsClients[$clientID][6]);

            // check if message length is 0
            if ($messageLength == 0) {
                $Server->wsClose($clientID);
                return;
            }

            //The speaker is the only person in the room. Don't let them feel lonely.
            if (sizeof($Server->wsClients) == 1)
                $Server->wsSend($clientID, "There isn't anyone else in the room, but I'll still listen to you. --Your Trusty Server");
            else
            //Send the message to everyone but the person who said it
                foreach ($Server->wsClients as $id => $client)
                    if ($id != $clientID)
                        $Server->wsSend($id, "Visitor $clientID ($ip) said \"$message\"");
        }

// when a client connects
        function wsOnOpen($clientID) {
            global $Server;
            $ip = long2ip($Server->wsClients[$clientID][6]);

            $Server->log("$ip ($clientID) has connected.");

            //Send a join notice to everyone but the person who joined
            foreach ($Server->wsClients as $id => $client)
                if ($id != $clientID)
                    $Server->wsSend($id, "Visitor $clientID ($ip) has joined the room.");
        }

// when a client closes or lost connection
        function wsOnClose($clientID, $status) {
            global $Server;
            $ip = long2ip($Server->wsClients[$clientID][6]);

            $Server->log("$ip ($clientID) has disconnected.");

            //Send a user left notice to everyone in the room
            foreach ($Server->wsClients as $id => $client)
                $Server->wsSend($id, "Visitor $clientID ($ip) has left the room.");
        }

        $Server = new PHPWebSocket();
        $Server->bind('message', 'wsOnMessage');
        $Server->bind('open', 'wsOnOpen');
        $Server->bind('close', 'wsOnClose');

        $Server->wsStartServer('127.0.0.1', 9300);
    }

    public function actionIndex() {
        $this->render('index');
    }

} 
```

我使用 php 创建 websocket 的方法是正确的还是不可能这样做..

我只想使用 php 来实现相同的功能，因为我更喜欢使用 node.js 或任何其他脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:28:26.643

将 PHP 与 Apache 一起使用时，对 PHP 的每个请求（通常）都会创建新的进程/线程。由于 Web 套接字（在某种程度上）是永久连接，因此这些 PHP 请求会持续相当长的一段时间。每个进程都占用服务器上的内存。因此，我认为这是可能的，如果您一次有很多（甚至不是很多）用户在线，您的服务器可能会崩溃或拒绝请求。

Node.js 方法不同——每个连接不需要单独的进程，因此它可以一次处理许多活动连接。

您可以将 Node.js 与 PHP 一起使用，使用队列或其他一些通信机制将这两者连接起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T22:25:23.987

以防万一其他人偶然发现这一点。

我一直在寻找一种方法来自己实现对 Yii 应用程序的实时事件。

在上面的评论中，提到[了这个关于 HTML5 SSE](http://www.yiiframework.com/wiki/329/real-time-display-of-server-push-data-using-server-sent-events-sse/)的 (Yii) 教程。由于它看起来很简单，但如果您需要支持较旧的浏览器和移动设备，这还不够。

> **浏览器支持也可以在 IE 中工作吗？** Internet Explorer 和 Android 浏览器（所有版本）不支持开箱即用的服务器发送事件。旧版本的 Firefox (< 6)、Chrome (< 6)、Safari (< 5)、iOS Safari (< 4) 或 Opera (< 11) 也不行。

另一个解决方案是一个相当新的[Yii 节点套接字](http://www.yiiframework.com/extension/yii-node-socket/)扩展。它基于node.js socket.io 库，使用[elephant.io](http://elephant.io/)通过php 与服务器通信。最重要的是，扩展似乎（我只使用了一个月）写得很好。它同时支持 Linux 和 Windows，使用 CLI 执行命令，甚至还提供了自己的数据库驱动程序。

仍然欢迎其他解决方案。

# java - Cookie 仅在返回的页面上可用，在其他页面上不可用

> ID：14183390
> 
> 赞同：0
> 
> 时间：2013-01-06T15:05:40.547
> 
> 标签：java, jsp, servlets

我有一个简单的jsp登录页面，我正在尝试实现“记住me2功能。jsp的页面代码：

```
 String username = "";
    Cookie[] vec = request.getCookies();
    for(int i=0; vec!=null && i<vec.length; i++)
    {
        if(vec[i].getName().equals("userNameCookie")&&!vec[i].getValue().equals(""))
        {
            username = vec[i].getValue();
        }   
    } 
```

表单参数被发送到 servlet 控制器，控制器创建 cookie 并将其添加到响应中，然后控制器将请求转发到其他页面。

我的问题是，返回登录页面后，控制器添加到响应中的 cookie 不存在。实际上，cookie 存在于控制器将请求转发到的页面中。

这是控制器的代码：

```
String username = request.getParameter("username");
            String password = request.getParameter("password");
            Cookie cookie = new Cookie("userNameCookie", username);
            cookie.setMaxAge(7 * 24 * 60 * 60);
            response.addCookie(cookie);
getServletConfig().getServletContext().getRequestDispatcher("/WEB-INF/products.jsp").forward(request, response); 
```

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:16:01.380

You must probably [specify a path](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html#setPath%28java.lang.String%29) for your cookie. IIRC, if you don't specify one, the cookie is only valid for the URL the cookie comes from.

Also, your remember-me cookie is really insecure. Any user could authenticate himself as someone else by simply sending a cookie with the other user's name. You should make the cookie random and very hard to guess, and associate each random cookie with the user it has been generated for, in the database.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:31:55.117

用户第一次发送请求消息时，您在servlet中创建的cookie已经存储在响应对象中，而不是在jsp中的请求对象中。您无法从 servlet 转发到的 jsp 中的请求对象中获取 cookie。因为 Web 容器在向客户端代理发送响应消息之前处理转发。客户端在收到响应消息时只存储 cookie。

如果客户端重新发送请求，也许它会完成。

# php - PHP 请求生命周期

> ID：14183397
> 
> 赞同：9
> 
> 时间：2013-01-06T15:06:00.763
> 
> 标签：php, zend-framework, vm-implementation

好的，所以我对 PHP VM 的了解相对幼稚，最近我一直在想一些事情。特别是在 PHP 中 Web 应用程序的请求生命周期是什么样的。我在[这里](http://php.find-info.ru/php/016/ch20lev1sec5.html)找到了一篇文章，给出了很好的解释，但我觉得故事必须**有**更多内容。

根据文章的解释，每次向服务器发出请求时都会解析并执行脚本！这对我来说似乎很疯狂！

我正在尝试通过编写一个利用许多 PHP 5.3/5.4 功能的微型框架来学习 PHP。因此，我开始思考**静态**的含义以及静态类变量的实际存在时间。我希望我的应用程序可以有一个*设置*阶段，该阶段能够将其结果缓存到具有*静态*属性的类中。但是，如果在每个请求上解析和执行整个脚本，我看不出如何避免为每个服务器请求运行应用程序初始化步骤！

我真的希望我在这里遗漏了一些重要的东西......任何见解都非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T15:09:21.577

> 根据文章的解释，每次向服务器发出请求时都会解析并执行脚本！这对我来说似乎很疯狂！

不，那篇文章是准确的。缓存解析/编译结果的方法有很[多种](http://en.wikipedia.org/wiki/List_of_PHP_accelerators)，但每次都会完整*执行脚本。*跨请求不保留类或静态变量的实例。从本质上讲，每个请求都会获得一个全新的、从未执行过的应用程序副本。

> 我看不到如何避免为每个服务器请求运行应用程序初始化步骤！

你不能，也不应该。您需要为每个请求将您的应用程序初始化为某个空白状态。您可以序列化一堆数据`$_SESSION`，这些数据在请求*中*持久化，但您不应该这样做，直到您发现确实需要这样做。

> 我真的希望我在这里遗漏了一些重要的东西......

你似乎什么都不担心。世界上每个 PHP 站点都默认以这种方式工作，并且绝大多数都不需要担心性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:10:29.147

A static variable, like any other PHP variable only persists for the life of the script execution and as such does not 'live' anywhere. Persistence between script executions is handled via [session handlers](http://php.net/manual/en/book.session.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:09:29.490

不，你没有错过任何东西。如果您需要保持某些应用程序状态，则必须使用 DB、文件、Memcache 等来完成。

如果你不习惯这听起来很疯狂，它有时对扩展和其他事情很有好处——你将你的状态保存在其他一些服务中，这样你就可以轻松地运行几个 PHP 服务器实例。

# php - 如何在 beforeSave、beforeValidate、afterSave 等中正确调用 parent::

> ID：14183399
> 
> 赞同：4
> 
> 时间：2013-01-06T15:06:22.520
> 
> 标签：php, yii

在 Yii 文档中，我们经常可以阅读“确保调用父实现以便正确引发事件”。对于 beforeSave、beforeValidate、afterSave ...

在 Yii 博客教程中，我看到了：

```
protected function beforeSave()
{
    if(parent::beforeSave())
    {
        ...
        return true;
    }
    else
        return false;
} 
```

if 函数是怎么回事？

我也只是简单地看到：

```
protected function afterSave()
{
    parent::afterSave();
    ...
} 
```

和：

```
protected function beforeValidate()
{
    ...
    return parent::beforeValidate();
} 
```

为什么有时将 parent::function 调用包装在 if 函数中？
如果我只调用 parent::function(); 有关系吗？一开始还是最后归还？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T15:54:46.347

这取决于你想做什么。

您应该知道 beforeSave 和 beforeValidate 方法可以通过返回 true 或 false 来影响进一步的保存/验证过程，无论 afterSave 和 afterValidate - 不能。您还应该知道，您不仅可以拥有一个事件处理程序，还可以拥有任意数量的事件处理程序，使用[attachEventHandler](http://www.yiiframework.com/doc/api/1.1/CComponent#attachEventHandler-detail)方法附加。因此，考虑到这一点，当您有多个事件处理程序时，在使用 beforeSave 和 beforeValidate 方法时，调用父函数的位置确实很重要。在其他情况下则不然。

例如，您的模型中有 beforeSave() 处理程序，并且您还在另一个类中订阅了此事件（这一切都基于[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)，我建议您阅读它以更深入地了解事件）。当您实现 beforeSave() 方法时，您*必须*调用 parent::beforeSave() 以使其他事件处理程序工作。如果您出于某种原因决定不保存模型，您可以选择 - 是否运行其他事件处理程序。因此，您可以立即返回 false 而不会触发其他事件处理程序（并且可能会节省一些资源）。

如果您认为自己的 beforeSave() 处理程序不如其他附加的处理程序重要，那么您应该首先调用 parent::beforeSave()，检查它的结果（就像您在第一个示例中所做的那样）并根据其他事件处理程序执行您的代码决定去做。

通常，您的模型中不会有额外的事件处理程序（如果有，您可能应该自己理解您的问题），因此您始终可以在 return 语句中调用父方法，就像在上一个示例中一样。如果您想中断保存或验证，请改为返回 false。

# haskell - 在 Haskell cabal 中使一个可执行文件依赖于另一个可执行文件

> ID：14183400
> 
> 赞同：2
> 
> 时间：2013-01-06T15:06:24.833
> 
> 标签：haskell, dependencies, cabal, haskell-platform

如何使 cabal 文件中的一个可执行文件依赖于同一项目中的另一个可执行文件？

我有一个构建两个可执行文件的 cabal 文件。其中一个可执行文件是生成第二个可执行文件所依赖的 Haskell 源代码文件的代码生成器。我如何告诉 cabal 在第二个之前编译和运行第一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T22:05:21.383

它们需要是单独的项目 - 两个 .cabal 文件。

参见例如 gtk2hs 预处理器 - [http://hackage.haskell.org/package/gtk2hs-buildtools](http://hackage.haskell.org/package/gtk2hs-buildtools)

# maven - Maven 插件，用于生成可执行的 Web 应用程序（war->executable jar-war）

> ID：14183405
> 
> 赞同：4
> 
> 时间：2013-01-06T15:07:09.763
> 
> 标签：maven, web-applications, jetty, war, executable-jar

我有一个生成 .war 文件的 Maven 项目。

我想将 maven 配置为生成一个可执行 jar，该 jar 嵌入了一个 servlet 容器（jetty、tomcat 或其他）以及我的 war 应用程序，并生成一个可以使用以下命令运行我的 web 应用程序的可执行 jar：

```
java -jar mywebapp.war 
```

是否有一个 Maven 插件来获取这样的工件？

目前我正在使用[jetty-runner](http://webtide.intalio.com/2008/04/jetty-runner/)运行我的应用程序的测试版本，这对于测试来说非常令人满意，但对于重新分发来说不如它是一个可执行的战争（就像在 jenkins 中）那样方便。

### 更新

@jesse-mcconnell：我不想更改我的 Web 应用程序中的一行（除了 pom.xml）来实现结果。只需以不同的方式打包我的战争，并使其可在选择的应用服务器下部署，并且能够将其作为可执行战争运行。

一个完美的解决方案还应该让我能够选择嵌入哪个应用服务器，还可以指定可执行文件本身中包含的所有需要​​的配置文件。

@khmarbaise：我知道 jenkins，我很久以前就检查过代码，它使用 winstone servlet 容器，并将 Main.class 放入可从 http 访问的战争中（我认为这是错误的）

一个完美的解决方案可能会引发一场包含以下内容的战争：

```
├── META-INF 
│   └── MANIFEST.MF (Main-Class: WEB-INF.container.classes.Main)
└── WEB-INF
    ├── web.xml
    ├── classes
    ├── lib
    └── container
        ├── lib (jetty.jar/tomcat.jar/whatever.jar)
        ├── etc (configuration files for the container)
        └── classes
            └── Main.class 
```

1.  Main.class 应该使用 etc 配置作为默认配置，但能够在命令行（端口、上下文等）覆盖公共参数或指定新配置。
2.  Main.class 应该能够从容器内部加载容器 jar 和配置（或提取到 tmp.dir 中）并启动应用服务器。

这就是我要做的。

最后，您有一个正常的战争，可以部署在任何应用服务器中，并能够以独立的方式运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:18:38.743

Tomcat Maven 插件可以看看这里[http://tomcat.apache.org/maven-plugin-2.0/executable-war-jar.html](http://tomcat.apache.org/maven-plugin-2.0/executable-war-jar.html)

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T16:17:15.567

使用 maven jar 插件在清单中设置 Main-Class，然后编写一个类似于此的 main 方法（或调用类似这样的代码）：

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded/OneServletContext.java？ h=jetty-8](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded/OneServletContext.java?h=jetty-8)

您可以注册您的 servlet 并相应地连接 webapp。

在 jar 文件中正确捆绑 war 文件的问题是，您需要一个专门的部署器，该部署器了解从 jar 中部署 war 文件，而不是常见的事情。所以创建一个超级类型的罐子可能是更好的方法。此外，实际 WebAppContext 的一个重要原因是类加载器隔离，在这些情况下这有点没有意义。

您可以使用 maven-dependency-plugin 解压您需要的各种依赖项。您可以使用其他插件，例如 maven-uberjar-plugin（我认为这就是名称），但您可以简单地使用 maven-dependency-plugin + 类似于上述的自定义主类来完成。

我喜欢这种方法，因为你最终得到了一个可以在 eclipse 中运行的 main 方法，它可以启动整个应用程序并让你也可以调试整个事情，这通常是一个胜利。

编辑：对于后代，jetty 还发布了一个名为 jetty-runner 的工件，允许直接从命令行运行战争文件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T16:05:28.900

不，我知道，但请检查支持直接从命令开始的[詹金斯源代码，就像您期望的那样。](https://github.com/jenkinsci/jenkins/blob/master/war/pom.xml)

# asp.net-mvc - 在整个 Web 应用程序中保存经过身份验证的用户信息和角色的方法？

> ID：14183414
> 
> 赞同：0
> 
> 时间：2013-01-06T15:08:25.280
> 
> 标签：asp.net-mvc, windows-authentication

在整个应用程序中（登录后）保存经过身份验证的用户信息和角色的最佳方法是什么？我想避免使用会话。我想保存用户信息，如名字、姓氏、电子邮件、部门等。这将是 MVC 3 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:10:04.937

你应该使用内置`Membership Provider`的`MVC`

# datetime - 特定日期的 Twitter API 用户信息

> ID：14183415
> 
> 赞同：0
> 
> 时间：2013-01-06T15:08:25.710
> 
> 标签：datetime, twitter

我最近了解到我可以使用以下 API 参数访问 twitter 用户信息：例如。[http://api.twitter.com/1/users/show.xml?screen_name=barackobama](http://api.twitter.com/1/users/show.xml?screen_name=barackobama)

如何获取ex的用户信息。前任巴拉克奥巴马 2012 年 9 月 12 日？

子问题：有没有办法将这些信息直接输入到excel中？我有一个包含 20 个用户名的电子表格，我想在他们名字旁边的单元格中列出他们的关注者数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:54:31.990

不会。Twitter 只会返回最后约 3,200 条推文。如果这超出了您的时间范围，那么您就不走运了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:08:22.953

您可以检索从今天到上周发布的用户推文。您可以查看搜索 api 限制以了解限制。您可以使用日期查询进行搜索，但最多只能搜索一周前。

[https://dev.twitter.com/docs/using-search](https://dev.twitter.com/docs/using-search)

# entity-framework-5 - EF 5.0 新对象：assign foreign key 属性未设置外键 id，或添加到集合中

> ID：14183423
> 
> 赞同：3
> 
> 时间：2013-01-06T15:09:35.387
> 
> 标签：entity-framework-5

EF 5.0，在现有数据库工作流上使用代码优先。数据库在 SalesOrderLine 上有您的基本 SalesOrder 和 SalesOrderLine 表以及*所需*的外键，如下所示；

```
public class SalesOrder
{
    public SalesOrder()
    {
        this.SalesOrderLines = new List<SalesOrderLine>();
    }

    public int SalesOrderID { get; set; }
    public int CustomerID { get; set; }
    public virtual Customer Customer { get; set; }

    public virtual ICollection<SalesOrderLine> SalesOrderLines { get; set; }
}

public class SalesOrderLine
{
    public SalesOrderLine()
    {
    }
    public int SalesOrderLineID { get; set; }
    public int SalesOrderID { get; set; }

    public virtual SalesOrder SalesOrder { get; set; }
}
public SalesOrderLineMap()
{
    // Primary Key
    this.HasKey(t => t.SalesOrderLineID);
    // Table & Column Mappings
    this.ToTable("SalesOrderLine");
    this.Property(t => t.SalesOrderLineID).HasColumnName("SalesOrderLineID");
    this.Property(t => t.SalesOrderID).HasColumnName("SalesOrderID");

    // Relationships
    this.HasRequired(t => t.SalesOrder)
        .WithMany(t => t.SalesOrderLines)
        .HasForeignKey(d => d.SalesOrderID);
} 
```

现在根据这个页面：http: [//msdn.microsoft.com/en-us/data/jj713564](http://msdn.microsoft.com/en-us/data/jj713564)

...我们被告知：

> 以下代码通过将外键设置为 null 来删除关系。请注意，外键属性必须可以为空。
> 
> course.DepartmentID = null;
> 
> *注意：如果引用处于添加状态（在本例中为课程对象），则在调用 SaveChanges 之前，引用导航属性不会与新对象的键值同步。不会发生同步，因为对象上下文不包含添加对象的永久键，直到它们被保存。如果您必须在设置关系后立即使新对象完全同步，请使用以下方法之一。*
> 
> **通过将新对象分配给导航属性。以下代码创建**课程和部门之间的关系。如果对象附加到上下文中，则课程也被添加到department.Courses 集合中，并且课程对象上的对应外键属性设置为部门的键属性值。
> 
> course.Department =部门；

...听起来不错！

现在我的问题：我有以下代码，但两个断言都失败了 - 为什么？

```
 using (MyContext db = new MyContext ())
    {
        SalesOrder so = db.SalesOrders.First();
        SalesOrderLine sol = db.SalesOrderLines.Create();
        sol.SalesOrder = so;

        Trace.Assert(sol.SalesOrderID == so.SalesOrderID);
        Trace.Assert(so.SalesOrderLines.Contains(sol));
    } 
```

两个对象都附加到上下文中——不是吗？在此之前我需要执行 SaveChanges() 吗？如果是这样，这似乎有点愚蠢，当将新对象添加到外键集合时，我需要手动设置对象上的所有引用，这很烦人。

- 更新 -

我应该将格特的答案标记为正确，但我对此不太满意，所以我会等一两天。...原因如下：

以下代码也不起作用：

```
SalesOrder so = db.SalesOrders.First();
SalesOrderLine sol = db.SalesOrderLines.Create();
db.SalesOrderLines.Add(sol);

sol.SalesOrder = so;
Trace.Assert(so.SalesOrderLines.Contains(sol)); 
```

唯一有效的代码*是*：

```
SalesOrder so = db.SalesOrders.First();
SalesOrderLine sol = db.SalesOrderLines.Create();

sol.SalesOrder = so;
db.SalesOrderLines.Add(sol);

Trace.Assert(so.SalesOrderLines.Contains(sol)); 
```

...换句话说，您必须先设置所有外键关系，然后在连接任何关系和外键字段之前调用 TYPE.Add(newObjectOfTYPE) 。这意味着从 Create 完成到您执行 Add() 为止，对象基本上处于半生不熟的状态。我（错误地）认为，因为我使用了 Create()，并且由于 Create() 返回了一个子类动态对象（而不是使用返回 POCO 对象的“new”），所以关系连线将被处理我。对我来说也很奇怪，您可以在使用*new*运算符创建的对象上调用 Add() 并且它会起作用，即使该对象不是子类类型......

换句话说，这将起作用：

```
 SalesOrder so = db.SalesOrders.First();
    SalesOrderLine sol = new SalesOrderLine();

    sol.SalesOrder = so;
    db.SalesOrderLines.Add(sol);

    Trace.Assert(sol.SalesOrderID == so.SalesOrderID);
    Trace.Assert(so.SalesOrderLines.Contains(sol)); 
```

...我的意思是，这很酷，但这让我想知道；如果在任何一种情况下都必须添加（）对象，如果你想正确地附加它，那么使用“Create（）”而不是 new 有什么意义呢？

**对我来说最烦人的是以下失败；**

```
SalesOrder so = db.SalesOrders.OrderBy(p => p.SalesOrderID).First();
SalesOrderLine sol = db.SalesOrderLines.Create();

sol.SalesOrder = so;
db.SalesOrderLines.Add(sol);

 // NOTE: at this point in time, the SalesOrderId field has indeed been set to the SalesOrderId of the SalesOrder, and the Asserts will pass...
Trace.Assert(sol.SalesOrderID == so.SalesOrderID);
Trace.Assert(so.SalesOrderLines.Contains(sol));

sol.SalesOrder = db.SalesOrders.OrderBy(p => p.SalesOrderID).Skip(5).First();

 // NOTE: at this point in time, the SalesOrderId field is ***STILL*** set to the SalesOrderId of the original SO, so the relationships are not being maintained! 
// The Exception will be thrown!
if (so.SalesOrderID == sol.SalesOrderID)
    throw new Exception("salesorderid not changed"); 
```

...这对我来说似乎完全是废话，让我觉得 EntityFramework，即使在第 5 版中，也像是米纸桥上的雷区。为什么上面的代码无法在 SalesOrder 属性的第二次分配上同步 SalesOrderId？我在这里缺少什么重要技巧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:24:40.860

我找到了我要找的东西！（一路上学到了不少东西）

我*认为*EF 在其动态代理中生成的是“更改跟踪代理”。这些代理类的行为更像是从 ADO.Net 实体数据模型中派生的旧 EntityObject 部分类。

通过对动态生成的代理类进行一些反思（感谢我在这篇文章中找到的信息：http: [//davedewinter.com/2010/04/08/viewing-generated-proxy-code-in-the-entity-framework /](http://davedewinter.com/2010/04/08/viewing-generated-proxy-code-in-the-entity-framework/) )，我看到我的关系属性的“get”被覆盖以执行延迟加载，但“set”根本没有被覆盖，所以当然在调用 DetectChanges 之前什么都没有发生，并且 DetectChanges 正在使用“与快照比较”检测更改的方法。

进一步挖掘最终将我引向了这对内容丰富的帖子，我向使用 EF 的任何人推荐它们：http: [//blog.oneunicorn.com/2011/12/05/entity-types-supported-by-the-entity-框架/](http://blog.oneunicorn.com/2011/12/05/entity-types-supported-by-the-entity-framework/)

[http://blog.oneunicorn.com/2011/12/05/should-you-use-entity-framework-change-tracking-proxies/](http://blog.oneunicorn.com/2011/12/05/should-you-use-entity-framework-change-tracking-proxies/)

不幸的是，为了让 EF 生成变更跟踪代理，必须执行以下操作（引用自上文）：

> *   您的类必须遵循以启用更改跟踪代理的规则非常严格和限制性。这限制了您定义实体的方式，并阻止使用私有属性甚至私有 setter 之类的东西。规则是： 类必须是公开的而不是密封的。**所有属性都必须具有公共/受保护的虚拟 getter 和 setter。**集合导航属性必须声明为 ICollection<T>。它们不能是 IList<T>、List<T>、HashSet<T> 等。
>     
>     
> *   因为规则非常严格，很容易出错，结果是您不会获得更改跟踪代理。例如，缺少一个虚拟，或者将一个 setter 设置为内部。

...他继续提到有关变更跟踪代理的其他内容以及为什么它们可能表现出更好或更差的性能。

在我看来，更改跟踪代理类会很好，因为我来自 ADO.Net 实体模型世界，我已经习惯了这种方式，但我也有一些相当丰富的类，我'不确定我是否能够满足所有标准。此外，第二个要点让我相当紧张（尽管我想我可以创建一个循环遍历所有实体的单元测试，对每个实体执行 Create(0，然后测试 IEntityWithChangeTracker 接口的结果对象）。

通过在我的原始示例中将我的所有属性设置为虚拟，我确实得到了 IEntityWithChangeTracker 类型的代理类，但我感觉有点......我不知道......“脏”......因为使用它们，所以我认为我只需要接受它，并记住在做作业时始终设置我的关系的双方。

无论如何，感谢您的帮助！

干杯，克里斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:06:56.957

不，`SalesOrderLine sol`不附加到上下文（尽管它是由 a 创建的`DbSet`）。你必须做

```
db.SalesOrderLines.Add(sol); 
```

`ChangeTracker`让它以一种执行的方式附加到上下文中`DetectChanges()`（`DbSet.Add()`是触发 this 的方法之一），因此也执行*关系 fixup*，它设置`sol.SalesOrderID`并确保`so.SalesOrderLines`包含新对象。

所以，不，您不需要执行`SaveChanges()`，但必须将对象添加到上下文中并且必须已触发*关系修复。*

# java - 没有从 actionlistener 正确调用 repaint()

> ID：14183426
> 
> 赞同：1
> 
> 时间：2013-01-06T15:09:45.150
> 
> 标签：java, swing, actionlistener, repaint

我的问题是关于如何让 repaint() 在从方法执行时正常工作，或者更具体地说是从 actionlistener 执行。为了说明我的观点，当从初始 go() 执行 moveIt() 方法时，会按预期调用 repaint() 并且您会看到圆形幻灯片。当从按钮 ActionListener 调用 moveIt() 时，圆圈从开始位置跳到结束位置。我在调用 repaint() 之前和 repaint() 中包含了一个 println 语句，您可以看到 repaint() 在启动时被调用了 10 次，并且只有在按下按钮时调用了一次。- 提前感谢你的帮助。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class SimpleAnimation {
int x=70;
int y=70;
MyDrawPanel drawPanel;

public static void main(String[] args) {
    SimpleAnimation gui = new SimpleAnimation();
    gui.go();
}
public void go(){
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    drawPanel = new MyDrawPanel();
    JButton button = new JButton("Move It");
    frame.getContentPane().add(BorderLayout.NORTH, button);
    frame.getContentPane().add(BorderLayout.CENTER, drawPanel);
    button.addActionListener(new ButtonListener());
    //frame.getContentPane().add(drawPanel);
    frame.setSize(300,300);
    frame.setVisible(true);
    // frame.pack();  Tried it with frame.pack with same result.
    moveIt();
}//close go()
public void moveIt(){
    for (int i=0; i<10; i++){
            x++;
            y++;
            drawPanel.revalidate();
            System.out.println("before repaint"); //for debugging
            drawPanel.repaint();            
        try{
            Thread.sleep(50);
        }catch (Exception e){}
    }
}//close moveIt()
class ButtonListener implements ActionListener{

    public void actionPerformed(ActionEvent arg0) {
        // TODO Auto-generated method stub
            moveIt();   
    }
}//close inner class
class MyDrawPanel extends JPanel{
    public void paintComponent(Graphics g){
        System.out.println("in repaint"); //for debugging
        g.setColor(Color.white);
        g.fillRect(0, 0, this.getWidth(), this.getHeight());

        g.setColor(Color.blue);
        g.fillOval(x, y, 100, 100);
    }
}//close inner class
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:20:38.187

您正在 EDT（事件调度线程）上执行长时间运行的任务（睡眠）。因此，当 EDT 处于睡眠状态时，它无法更新 UI，并且重绘无法按预期工作。

要纠正这种情况，请始终睡在单独的线程上。

在这种情况下使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)或[Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

查看[这篇](https://stackoverflow.com/questions/182316/java-swing-libraries-thread-safety)文章以获取有关如何以线程安全的方式访问 Swing 组件的更多信息。

**更新：** [这个](http://foxtrot.sourceforge.net/docs/freeze.php)页面解释得更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T15:20:48.523

调用块和`Thread.sleep`导致GUI“冻结”。您可以在此处使用[Swing 计时器。](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)`ActionListener``EDT`

# sass - Sass：用一个逗号合并两个列表

> ID：14183430
> 
> 赞同：1
> 
> 时间：2013-01-06T15:10:12.793
> 
> 标签：sass

我目前正在编写一个 mixin，它可以让我使用多层盒子阴影来制作 3d 盒子效果。

返回的结果代码如下所示：

```
.someclass {
  box-shadow: 1px 0 1px #203891, 0 1px 1px #3852B1, 2px 1px 1px #203891,
  1px 2px 1px #3852B1, 3px 2px 1px #203891, 2px 3px 1px #3852B1;
} 
```

此代码取自 css-tricks 的按钮。

我需要帮助以逗号分隔附加/加入列表：

给定以下两个列表：

```
$bottom: 1px 0 1px $bottomcolor
$right: 0 1px 1px $rightcolor 
```

我想加入他们以获得：

```
$joined: 1px 0 1px $bottomcolor, 0 1px 1px $rightcolor 
```

这是我在使用 Sass 的内置列表函数时得到的结果：

```
append($bottom, $right, comma) => 1px, 0, 1px, red, 0 1px 1px red

join($bottom, $right, comma) => 1px, 0, 1px, red, 0, 1px, 1px, red 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:10:12.793

刚刚意识到为什么上面的代码不起作用，因为 $bottom 和 $right 不是 2D 列表，只有 1D 列表....

我最终像这样解决了我的mixin：

```
@import compass

=boxeffect($depth, $bottomcolor, $rightcolor)

   $layers: 1px 0 1px $bottomcolor, 0 1px 1px $rightcolor

   @for $i from 1 through $depth
       $layers: append($layers, (#{$i + 1}px #{$i}px 1px $bottomcolor), comma)
       $layers: append($layers, (#{$i}px #{$i + 1}px 1px $rightcolor), comma)

   +box-shadow($layers)

.test
   +boxeffect(2, #222222, #333333) 
```

结果是：

```
/* line 18, ../sass/temp.sass */
.test {
  -webkit-box-shadow: 1px 0 1px #222222, 0 1px 1px #333333, 2px 1px 1px #222222, 1px 2px 1px #333333, 3px 2px 1px #222222, 2px 3px 1px #333333;
  -moz-box-shadow: 1px 0 1px #222222, 0 1px 1px #333333, 2px 1px 1px #222222, 1px 2px 1px #333333, 3px 2px 1px #222222, 2px 3px 1px #333333;
  box-shadow: 1px 0 1px #222222, 0 1px 1px #333333, 2px 1px 1px #222222, 1px 2px 1px #333333, 3px 2px 1px #222222, 2px 3px 1px #333333;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T12:56:52.650

这也有效：

```
$cat: ();
$a: 1px 0px url(http://domain.com);
$b: 0px 1px #bbb;
$cat: append( unquote( $a ), $b, comma ); 
```

希望这可以帮助。

# diff - Failing to diff some subdirectories' files

> ID：14183434
> 
> 赞同：1
> 
> 时间：2013-01-06T15:10:21.063
> 
> 标签：diff

I am using the diff command to compare directory and subdirectories' files like so:

```
 diff -bBE ./dir/* ../parent/dir/* >> diff.txt 
```

But I am getting that :

```
 diff: extra operand `./dir/somefile' 
```

The two directory and subdirectories' files are structured exactly the same way but their content is different. I don't know what I am missing.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:12:24.140

`*` is expanded by the shell, becoming (potentially) multiple arguments to `diff`. Just get rid of the `*`s; `diff` already knows how to handle directories.

# r - 与 TIFF 相比，SVG 质量差

> ID：14183439
> 
> 赞同：5
> 
> 时间：2013-01-06T15:10:55.127
> 
> 标签：r, graphics, svg

我有一个 Filled.contour 图，我想将其保存为 SVG（或 EPS）以供发布。但是我发现 SVG 的质量明显比 TIFF 差。SVG 文件中的绘图似乎有一些白框/线条/矩形，当我以 TIFF 格式保存文件时，这些白框/线条/矩形不会出现。在 TIFF 格式中，颜色过渡更加平滑，并且不会出现白色矩形

有没有办法避免这种情况？我试过 Linux 和 Mac，得到了相似的结果

下面是显示问题的 TIFF 文件和 SVG 文件的屏幕截图。

![国际电影节](../Images/ebfb92865f650a3dc61021a5a648a87d.png) ![SVG 截图](../Images/165d52590894d6f876c34c080fa133ce.png)

生成图的代码如下：

```
x <- 1:5
y <- 1:5
z <- matrix(outer(x,y,"+"),nrow=5)
filled.contour(x,y,z)
filled.contour(x,y,z,color.palette=rainbow)
z2 <- z
z2[5,5] <- Inf
filled.contour(x,y,z2,col=rainbow(100),nlevels=100) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T15:38:27.847

信不信由你，这是一个抗锯齿神器。

[http://r.789695.n4.nabble.com/Suppressing-internal-grid-in-filled-contour-td867081.html](http://r.789695.n4.nabble.com/Suppressing-internal-grid-in-filled-contour-td867081.html)

在 linux 上，我可以重现您的问题，但是当我将在 linux 中创建的完全相同的文件传递到我正在运行的 Windows 操作系统虚拟机中时 - SVG 图像看起来很好，所以这是查看软件和抗锯齿设置的问题，不是R输出。

我希望这能解决你的问题。

# linux - 在 Vim 中同时写入两个寄存器

> ID：14183440
> 
> 赞同：3
> 
> 时间：2013-01-06T15:10:54.900
> 
> 标签：linux, vim, copy-paste, vim-registers

我正在使用：

```
set clipboard=unnamed 
```

这样剪切和复制的选择就会进入`*`寄存器，该寄存器可以方便地链接到`x`剪贴板（我使用的是 Linux）。

我希望它也可以在`+`寄存器中获得鼠标中键粘贴并`Ctrl-V`在其他应用程序中给出相同的结果。`xclip`我想这可能与和之间的区别有关`xclip -selection c`。

现在我的解决方法是：

```
noremap Y "+y 
```

这样我就可以`Yy`复制当前行进行`+`注册，然后在某些应用程序中使用 Ctlr-V。但是我必须提前考虑是否会使用鼠标或 Ctrl-V。

当我拉动或用鼠标选择一些文本时，有没有办法让`+`和寄存器具有相同的值？`*`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T00:28:16.640

我想你想

```
:set clipboard+=unnamed,unnamedplus 
```

从帮助：

> unnamedplus “未命名”标志的一种变体，它使用剪贴板寄存器“+”（|quoteplus|）而不是寄存器“*”用于除 yank 之外的所有操作。当包含“未命名”时，Yank 应将文本复制到寄存器“+”和“*”中。

请注意，您需要一个相当新的 Vim 7.3（补丁级别 151？）来获取此选项值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:25:34.880

正如评论中所讨论的，这是一个解决方案：

```
vnoremap Y ygv"+y 
```

但是，这不起作用，只能反过来：

```
vnoremap Y "+ygvy 
```

这是它的作用：

`noremap Y`：映射到 Y 键，使用键绑定的默认行为。`:h noremap`
`"+y`: 拉入`+`寄存器。
`gv`：重新选择以前的视觉选择。
`y`: 正常拉入`*`寄存器（在 Linux 中）。

很高兴我能帮你解决它。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:10:39.930

开箱即用，您可以安装[`autocutsel`](http://www.nongnu.org/autocutsel/)使两个剪贴板同步的。

# dll - 获取 Qt 5 附加插件的路径

> ID：14183441
> 
> 赞同：8
> 
> 时间：2013-01-06T15:11:01.400
> 
> 标签：dll, plugins, cmake, qt5

在一个 Qt 4 项目中，我使用 Inno Setup 构建了一个 Windows 安装程序。所需的库（qsqlite.dll、qjpeg4.dll 等）包含在带有 CMake 变量（例如`QT_QSQLITE_PLUGIN_RELEASE`或）的脚本中`QT_QJPEG_PLUGIN_RELEASE`。

例如： setup.iss.in ：

```
[Files]
Source: "myapp.exe"; DestDir: {app}
Source: "${QT_QSQLITE_PLUGIN_RELEASE}"; DestDir: {app}/sqldrivers
Source: "${QT_QJPEG_PLUGIN_RELEASE}"; DestDir: {app}/imageformats 
```

现在项目应该迁移到 Qt5。一切正常，但我找不到预定义的变量来获得这些插件路径的 Qt5 等效项。当然，我可以对它们进行硬编码，但我正在寻找一种以干净和独立的方式定义它的方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-24T21:22:02.420

Qt5 不再依赖 CMake 模块文件来查找 Qt5 安装，而是提供了自己的 CMake 配置文件，它将 Qt5 库设置为导入的 CMake 目标。要获取 Qt 模块库文件的实际路径，请查询`LOCATION`模块的 CMake 目标或其配置特定变体`LOCATION_<Config>`版本的属性，例如：

```
find_package(Qt5Core)
get_target_property(QtCore_location_Release Qt5::Core LOCATION_Release)

find_package(Qt5Widgets)
get_target_property(QtWidgets_location_Release Qt5::Widgets LOCATION_Release) 
```

如果您知道插件的 CMake 目标名称（我尚未验证），此策略可能也适用于 Qt 插件。

另请参阅[Qt5 CMake 手册](http://doc.qt.io/qt-5/cmake-manual.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-18T09:01:23.610

从 Qt 5.2 开始，插件也可用作 IMPORTED 目标：

[http://doc.qt.io/qt-5/cmake-manual.html#imported-targets](http://doc.qt.io/qt-5/cmake-manual.html#imported-targets)

[https://codereview.qt-project.org/#change,63100](https://codereview.qt-project.org/#change,63100)

从 IMPORTED 目标读取 LOCATION 属性，而不是特定于配置的 LOCATION_ 属性。CMake 将处理配置部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T18:21:57.067

基于 steveire 的回答，这就是你如何获得 QSqlite 和 QJpeg 插件的绝对路径：

```
find_package(Qt5Gui)
find_package(Qt5Sql)

get_target_property(qsqlite_loc Qt5::QSQLiteDriverPlugin LOCATION_Release)
message("QSqlite DLL: ${qsqlite_loc}")

get_target_property(qjpeg_loc Qt5::QJpegPlugin LOCATION_Release)
message("QJpeg DLL: ${qjpeg_loc}") 
```

# gnuplot - I want to plot only some values from a data file

> ID：14183442
> 
> 赞同：3
> 
> 时间：2013-01-06T15:11:01.450
> 
> 标签：gnuplot

I want to plot only some values from a data file My problem is: I only want to plot the lines that are the value of some column set to some value ( run_id == 0101). Is there a gnuplot command, that makes you select the lines you want to plot?

like

```
 plot 'FTSE100.txt' using 'ATimeOnMarket' :'AAnualisedROI' 
```

when, and only when, column: 'run_id' has the value '0101'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T21:27:25.730

看起来您可以使用三元运算符来过滤文件：

```
plot 'FTSE100.txt' using (column("ATimeOnMarket")):((column("run_id) == 101)?column("AAnualisedROI"):NaN) 
```

您可能可以使用宏使其更容易阅读：

```
set macro
ATimeOnMarket = "column('ATimeOnMarket')"
run_id = "column('run_id')
AAnualisedROI = "column('AAnualisedROI'))

plot 'FTSE100.txt' u (@ATimeOnMarket):((@run_id == 101) ? @AAnualisedROI : NaN) 
```

# php - How redirect output of a sandbox program to a calling PHP file?

> ID：14183444
> 
> 赞同：1
> 
> 时间：2013-01-06T15:11:04.640
> 
> 标签：php, gcc, sandbox

I am trying to execute a c code in a sandbox. I am using the libsandbox 0.3.5. This is how I go about it: 1) The PHP file uses shell_exec to compile the sandbox first

```
 shell_exec("gcc -o sandbox Sandbox.c -lsandbox"); 
```

2) Then I also compile the program to be sandboxed

```
 shell_exec("gcc -static -o 19 19.c"); 
```

3) Then I execute the programs

```
shell_exec("./sandbox ./19<inputFile>outputFile"); 
```

The above code takes the stdin from inputFile and writes output to outputFile for the 19 program. The sandbox program returns "OK", "RF", "TL", "ML", etc. I want the output of the sandbox program to be received into a string in the PHP file that calls it. How do I do it?

Another problem that I am facing is that the ouptputFile is not getting created despite sufficient privileges.

Also, will executing the C program in the sandbox ensure security? As in, is that sufficient or do I need to take more precautions?

# c++ - '\0' 是什么意思？

> ID：14183445
> 
> 赞同：25
> 
> 时间：2013-01-06T15:11:11.450
> 
> 标签：c++

我无法理解以下代码中两个不同位置的 '\0' 的含义：

```
string x = "hhhdef\n";
cout << x << endl;
x[3]='\0';
cout << x << endl;
cout<<"hhh\0defef\n"<<endl; 
```

结果：

> hhhdef
> 
> 呵呵
> 
> 呵呵

谁能给我一些指示？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-06T15:16:55.500

C++`std::string`是“计数的”字符串——即，它们的长度存储为整数，并且它们可以包含任何字符。当您将第三个字符替换为`\0`没有什么特别之处时 - 它会像任何其他字符一样打印（特别是，您的控制台会忽略它）。

相反，在最后一行中，您正在打印一个 C 字符串，其结尾由`\0`找到的第一个字符串决定。在这种情况下，`cout`继续打印字符，直到找到 a `\0`，在您的情况下，它位于第三个 之后`h`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-06T15:16:34.153

C++ 有两种字符串类型：

内置的 C 风格的以空字符结尾的字符串实际上只是字节数组和*不*以空字符结尾的 C++ 标准库`std::string`类。

 *打印以空字符结尾的字符串会打印所有内容，直到第一个空字符为止。打印 a`std::string`会打印整个字符串，而不管其中间的空字符如何。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-06T15:15:48.040

`\0`是 NULL 字符，你可以在你的 中找到它`ASCII table`，它的值为 0。

它用于确定 C 样式字符串的结尾。

但是，C++ 类`std::string`将其大小存储为整数，因此不依赖它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-06T15:16:43.527

您在这里以两种不同的方式表示字符串，这就是行为不同的原因。

第二个更容易解释；这是一个 C 风格的原始字符数组。在 C 风格的字符串中，`'\0'`表示*空终止符*；它用于标记字符串的结尾。因此，任何处理/显示字符串的函数都会在碰到它时立即停止（这就是你的最后一个字符串被截断的原因）。

第一个示例是创建一个完整的 C++`std::string`对象。这些没有赋予任何特殊含义`'\0'`（它们没有空终止符）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-03T07:55:12.620

被`\0`视为`NULL`字符。它用于在 C 中标记字符串的结尾。

在 C 中，string 是一个指针，指向以`\0`结尾的字符数组。因此，以下将是 C 中字符串的有效表示。

```
char *c =”Hello”;    // it is actually Hello\0
char c[] = {‘Y’,’o’,’\0′}; 
```

'\0' 的应用在于确定字符串的结尾。例如：查找字符串的长度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-06T05:27:25.707

\0 基本上是一个空终止符，在 C 中用于终止字符串字符的结尾，简单来说，它的值为空字符基本上给编译器指示这是字符串字符的结尾让我举个例子 -当我们写 printf("Hello World"); /* Hello World\0 在这里我们可以清楚地看到 \0 充当 null ，在注释中艰难地打印字符串会给出相同的输出。*

# batch-file - 在 bat 脚本中使用空格，不带引号

> ID：14183446
> 
> 赞同：17
> 
> 时间：2013-01-06T15:11:15.590
> 
> 标签：batch-file

我需要跑步

```
start cmd.exe /k "C:\Program Files (x86)\Mozilla Firefox\sdk\bin\activate & cd d:\home\name\addon\ & cfx run" 
```

问题是第一个路径有空格（`Program Files`）。我不能使用引号，因为它们已经用于完整命令。

如何在此命令中使用空格？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-06T16:25:28.240

谁说当 /C 命令已经被引用时，你不能在 exe 路径周围添加引号？它工作正常！:-)

```
start cmd.exe /k ""C:\Program Files (x86)\Mozilla Firefox\sdk\bin\activate" & cd d:\home\name\addon\ & cfx run" 
```

/C 命令周围的外引号在执行之前被删除，只留下你的 exe 路径周围的引号。您可以在帮助中阅读有关 CMD 进程如何引用的信息。只需在命令提示符下键入`CMD /?`或`HELP CMD`。它确实令人困惑。

```
If /C or /K is specified, then the remainder of the command line after
the switch is processed as a command line, where the following logic is
used to process quote (") characters:

    1\.  If all of the following conditions are met, then quote characters
        on the command line are preserved:

        - no /S switch
        - exactly two quote characters
        - no special characters between the two quote characters,
          where special is one of: &<>()@^|
        - there are one or more whitespace characters between the
          two quote characters
        - the string between the two quote characters is the name
          of an executable file.

    2\.  Otherwise, old behavior is to see if the first character is
        a quote character and if so, strip the leading character and
        remove the last quote character on the command line, preserving
        any text after the last quote character. 
```

您的命令有超过 2 个引号，因此遵循选项 2。

如果您的 exe 名称包含特殊字符`&`，例如`this&that.exe`. 这会导致问题，因为最初解析 START 命令时未引用 exe 名称。这可以通过转义文件名中的问题字符来解决。

```
start cmd.exe /k ""this^&that.exe" & echo something else" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T15:17:33.263

您可以尝试使用旧的 DOS 编写风格，其中每个路径段最多有 8 个字符，例如：

```
C:\Progra~1\Mozill~1\ 
```

~1 是按字母顺序排列的：

```
C:\DisIsMyDirAlpha
C:\DisIsMyDirBeta
C:\DisIsMyDirGamma 
```

这些是：

```
C:\DisIsM~1
C:\DisIsM~2
C:\DisIsM~3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:31:58.660

对第一条路径使用引号并使用以下命令对其进行转义`^`：

```
start cmd.exe /k "^"C:\Program Files (x86)\Mozilla Firefox\sdk\bin\activate^" & cd d:\home\name\addon\ & cfx run" 
```

* * *

**编辑：**

关于@dbenham 的评论：
有趣。转义`^`确实对我有用，尽管我的实际命令略有不同，因为我用我想到的第一个命令对其进行了测试。

这适用于我的机器（Windows XP SP 3）：

```
start cmd.exe /k "xcopy ^"C:\Program Files\Windows Live\Messenger\license.rtf^" c:\" 
```

我还阅读了有关使用双引号进行转义的信息`""`，但这对我上面的示例不起作用。
再说一次，我不是批处理文件专家，并且`cmd.exe`在您使用时可能表现不同`&`（我以前从未听说过）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-15T17:22:55.617

```
start cmd.exe /k "" "C:\Program Files (x86)\Mozilla Firefox\sdk\bin\activate & cd d:\home\name\addon\ & cfx run" 
```

在文件路径之前添加这两个额外的引号。这通常对我有用。祝你好运 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-04T16:47:00.423

这适用于 Win 7 Home：`start cmd.exe /c "C:\RemoveDrive\RemoveDrive G:"`

我无法让 Win 7 Pro 运行路径中有任何空格的 .bat 文件或作为可执行文件的一部分（“RemoveDrive :G”）。所以我制作了 RunEjectG.bat 来运行 EjectG.bat。

这是一种解决方法，但我不能花更多时间来解决问题。注意：`/c`开关在运行 bat 后关闭 cmd 窗口，`/k`开关使 cmd 窗口保持打开状态。

# algorithm - Frequent Itemsets & Association Rules - Apriori Algorithm

> ID：14183447
> 
> 赞同：6
> 
> 时间：2013-01-06T15:11:32.830
> 
> 标签：algorithm, data-mining, apriori

I'm trying to understand the fundamentals of the Apriori (Basket) Algorithm for use in data mining,

It's best I explain the complication i'm having with an example:

Here is a transactional dataset:

```
t1: Milk, Chicken, Beer
t2: Chicken, Cheese
t3: Cheese, Boots
t4: Cheese, Chicken, Beer
t5: Chicken, Beer, Clothes, Cheese, Milk
t6: Clothes, Beer, Milk
t7: Beer, Milk, Clothes
```

The **minsup for the above is 0.5 or 50%.**

Taking from the above, my number of **transactions is clearly 7**, meaning for an itemset to be "frequent" it must have a count of *4/7*. As such this was my Frequent itemset 1:

**F1:**

```
Milk = 4
Chicken = 4
Beer = 5
Cheese = 4
```

I then created my candidates for the second refinement (C2) and narrowed it down to:

**F2:**

```
{Milk, Beer} = 4
```

This is where I get confused, if I am asked to display *all* frequent itemsets do I write down all of `F1` and `F2` or just `F2`? `F1` to me aren't "sets".

I am then asked to create association rules for the frequent itemsets I have just defined and calculate their "confidence" figures, I get this:

```
Milk -> Beer = 100% confidence
Beer -> Milk = 80% confidence
```

It seems superfluous to put `F1`'s itemsets in here as they will all have a confidence of 100% regardless and don't actually "associate" anything, which is the reason I am now questioning whether `F1` are indeed "frequent"?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:47:22.140

如果支持合适的话，大小为 1 的项集被认为是频繁的。**但**在这里你必须考虑**最小阈值**。例如，如果您的示例中的**最小阈值为****2**，则**`F1`**不会考虑。但如果**最小阈值**是**1**，那么你必须这样做。

您可以在[这里](http://en.wikipedia.org/wiki/Apriori_algorithm)和[这里](http://www2.cs.uregina.ca/~dbd/cs831/notes/itemsets/itemset_apriori.html)查看更多想法和示例。

希望我有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T22:33:10.657

如果最小支持阈值 (minsup) 是 4 / 7，那么如果它们出现在 7 个事务中不少于 4 个事务中，则应该在频繁项集中包含单个项目。因此，在您的示例中，您应该包括它们：

牛奶 = 4 鸡肉 = 4 啤酒 = 5 奶酪 = 4

对于关联规则，它们具有 X ==> Y 的形式，其中 X 和 Y 是不相交的项集，并且通常假设 X 和 Y 不是空集（这是 Apriori 假设的）。因此，您至少需要两个项目来生成关联规则。

# android - 用于更改背景文本的按钮

> ID：14183457
> 
> 赞同：0
> 
> 时间：2013-01-06T15:12:33.880
> 
> 标签：android

大家好，我对此很陌生，可能需要一些帮助，这很简单，

我需要在此代码中添加什么

```
 public class main extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tv2 = (TextView) findViewById(R.id.textView2);
    Button b = (Button) findViewById(R.id.button1);

    b.setOnClickListener(new OnClickListener() {
           @Override
           public void onClick(View v) {
               TextView tx = (TextView) findViewById(R.id.textView2);
               tx.setText("Hello");
           }
    });
    }
    } 
```

为了做到这一点，当按下按钮时，如果我标记了字符串、string1、string2 等，它会将文本视图更改为我的 strings.xml 列表中的随机字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:54:28.957

您为什么不创建`string-array`并使用它，如下所示：

试试这种方式：

> ```
> Resources res = this.getResources();
>   final String[] capital = res.getStringArray(R.array.list);
>   Button next=(Button)findViewById(R.id.button1);
>    button1.setOnClickListener(new OnClickListener() {
>     @Override
>     public void onClick(View v) {
>         if(count<capital.length-1)
>         tv2.setText(capital[count]);
>         count++;
>     }
> }); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:26:30.643

```
public class main extends Activity {
        /** Called when the activity is first created. */

        String[] myStrings;
        int currentText;
        @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TextView tv2 = (TextView) findViewById(R.id.textView2);
        Button b = (Button) findViewById(R.id.button1);
        currentText = 0;
        setListeners();

        myStrings = new String [200];
        myStrings[0] = "String1";
        myStrings[1] = "String2";
    }

    public void changeText(){
        tv2.setText(myStrings[currentText[);
        currentText++;

    }

    public void setListeners(){
        b = (Button) findViewById(R.id.textView2);
                b.setOnTouchListener(new OnTouchListener() {

                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                        changeText();

                        return false;
                    }
                });
    }
} 
```

我没有测试这段代码。我希望这可以帮助你！

# file - FAT System Identification of free space and structure of entry files?

> ID：14183458
> 
> 赞同：0
> 
> 时间：2013-01-06T15:12:41.277
> 
> 标签：file, memory, operating-system, system, fat

Been seaching google for a good explanation for how FAT systems identify free space and the structure of FAT Entry files.

Alot of the explanations ive found are quite hard to follow can anyone help brief sum these up?

i understand that clusters are marked as unused but is this within the root directory or data region? and is the information on clusters status just marked in a table?

I haven't managed to gain any knowledge on the structure of the entry files either, just that they use chains to keep the clusters together

Anyone help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:01:59.037

可以认为文件系统具有三 (3) 种类型的数据：文件数据、文件元数据和文件系统元数据。文件数据是文件或目录的内容。文件元数据告诉我们文件数据在磁盘上的存储位置。文件系统元数据告诉我们文件系统如何分配文件系统中使用的块。

然而，FAT 文件系统并没有保持如此清晰的线条。它的磁盘结构经常模糊这些区别。

文件分配表 (FAT) 本身模糊了文件元数据和文件系统元数据的界限。也就是说，FAT 条目既标识了可以找到下一个文件（或目录）数据簇的簇号，也向文件系统指示了由 FAT 索引标识的簇是否可用（或不可用）。 ）。正如您在问题中指出的那样，这形成了一个链条。一个特殊的标记（具体值不在我的记忆中）表明由索引标识到 FAT 中的簇是链中的最后一个簇。

基于 FAT 的文件系统中的目录条目既是文件数据又是文件元数据。它们读起来像文件，它们的条目是“文件数据”。但是，它们的条目也被解释为文件元数据，因为它们包含文件属性（权限、文件大小和起始簇号——它是 FAT 的索引）。

根目录是 FAT 文件系统上的一个特殊目录。如果没记错的话，它也没有“。” 也没有“..”条目。在 FAT12 和 FAT16 系统上，根目录的大小是在格式化磁盘时指定的，因此是固定大小的——但是，它的簇仍然在 FAT 中标记。在 FAT32 上，根目录大小未在格式化时设置，并且可以增长。根目录的起始簇存储在文件系统元数据结构之一的一个特殊字段中（因为我正在记忆中，这个结构的名称让我难以理解）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-06T15:31:25.123

这是一篇相当长的文章，其中包含大量有关胖文件系统的信息。它应该提供您需要的所有详细信息。

[http://en.wikipedia.org/wiki/File_Allocation_Table](http://en.wikipedia.org/wiki/File_Allocation_Table)

# powerpoint - 如何在 PowerPoint 演示文稿中添加幻灯片编号

> ID：14183462
> 
> 赞同：-1
> 
> 时间：2013-01-06T15:13:20.487
> 
> 标签：powerpoint

我想知道如何将幻灯片编号（当前页/总页数）添加到我的 Powerpoint 演示文稿中。知道如何实现吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:22:32.777

按照此链接中指示的说明添加页数/总数： http: [//office.microsoft.com/en-us/powerpoint-help/show-the-slide-number-and-total-number -of-slides-on-every-slide-HA010242545.aspx](http://office.microsoft.com/en-us/powerpoint-help/show-the-slide-number-and-total-number-of-slides-on-every-slide-HA010242545.aspx)

> 1.  在视图选项卡上的演示视图组中，单击幻灯片母版，然后单击幻灯片母版缩略图。
>     
>     
> 2.  在“插入”选项卡的“文本”组中，单击“文本框”，然后拖动以在您希望幻灯片编号出现在幻灯片上的位置绘制文本框。
>     
>     
> 3.  光标仍在文本框中，在插入选项卡上的文本组中，单击幻灯片编号。
>     
>     
> 4.  在文本框中，将光标放在 <#> 之前，然后键入“ **Slide** ”。
>     
>     
> 5.  将光标放在 <#> 之后，然后键入 ' **of x** ' ，其中 x 等于演示文稿中的幻灯片总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:15:32.583

在插入菜单上，单击“幻灯片编号”

# android - AlarmManager stops firing Broadcast Receiver

> ID：14183467
> 
> 赞同：0
> 
> 时间：2013-01-06T15:13:53.630
> 
> 标签：android

I use AlarmManager to update my clock widget at top of every minute using a broadcast receiver. This is the code I use to set the alarm in widget onEnabled:

```
am.setRepeating(AlarmManager.RTC, 0, 60000, PendingIntent.getBroadcast(context, 0, new Intent(context, ReceiverClockUpdate.class), 0)); 
```

and this code to stop it in onDisabled:

```
am.cancel(PendingIntent.getBroadcast(context, 0, new Intent(context, ReceiverClockUpdate.class), 0)); 
```

I have many reports that the clock stops updating after some times (Maybe 1 hour or even 1 day) or it updates with delays. The most reported devices are Galaxy S3, Galaxy S2 and Galaxy Note.

I don't know and have no clues why this happen. Does AlarmManager stops working after some times or there is an Exception in my code which prevents it from working.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:24:39.127

使用 RTC_WAKEUP .. 仅使用 RTC 手机睡眠时，闹钟管理器不会触发，它只会在手机唤醒时触发闹钟，打乱了 60 秒的间隔。

RTC_WAKEUP 会在触发时唤醒手机睡眠模式，不会弄乱间隔，另外，您需要使用 BOOT_COMPLETED 动作来进行闹钟，因为当手机关机时，再开机，它不会有闹钟设置。 .

我认为你需要做一些算法，因为这就是我所做的..

如果手机关机 3 分钟，然后再开机，你需要类似的东西

```
if(alarmtime < currenttime)
{
compute how many minutes have passed..
then make a variable of the minute that has passed.

variable = 3;
i = 0;
while(i<3)
{
update the clock one time
i++;
}

} 
```

您需要将闹钟时间保存在存储中，最好是 SharedPref

更新：第一个代码是警报，第二个是服务。在这种情况下，警报将确定已经过去了多少分钟，然后有相应的计数器。这段代码只检查到 3 分钟，只需通过循环或其他方式添加变量

```
 public void onReceive(Context context, Intent intent) 
     {   
         PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
         PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "");
         wl.acquire();

         Toast.makeText(context, "A day has passed by.", Toast.LENGTH_LONG).show(); 

         wl.release();
         context.startService(new Intent(context, MySim.class));

        SharedPreferences a = context.getSharedPreferences("mPref",0);
        SharedPreferences.Editor editor = a.edit();

     }

 public void SetAlarm(Context context)
 {

     //retrieve alarms and getting current time
     SharedPreferences a = context.getSharedPreferences("mPref",0);

     long iFirst = a.getLong("first", System.currentTimeMillis()+(60*1000));
     long iSecond = a.getLong("second", System.currentTimeMillis()+(120*1000));
     long iThird = a.getLong("third", System.currentTimeMillis()+(180*1000));
     long currenttime = System.currentTimeMillis();
     SharedPreferences.Editor editor = a.edit();

     //editor passed =1 ililipat sa checkclassroom sa tunay na game
     //seting passed
     if(currenttime >= iFirst && currenttime < iSecond)
     {
         editor.putInt("passed", 1);
     }
     if(currenttime >= iSecond && currenttime < iThird)
     {
         editor.putInt("passed", 2);
         iFirst = iSecond;

     }
     if(currenttime >= iThird)
     {
         editor.putInt("passed", 3);
         iFirst = iThird;
     }
        editor.commit();

AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);

     Intent i = new Intent(context, Alarm.class);
     PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);

     am.setRepeating(AlarmManager.RTC,iFirst,60*1000, pi); 
 } 
```

这是服务：

```
 int passed = a.getInt("passed", 1);
            int counter = 1;
            while(counter <= passed)

            {
            //do the updating of the clock
            counter++;
            }

            editor.putLong("first", System.currentTimeMillis()+60 * 1000);
            editor.putLong("second", System.currentTimeMillis()+120 * 1000);
            editor.putLong("third", System.currentTimeMillis()+180 * 1000);
            editor.putInt("passed", 1);
            editor.commit();
        } 
```

# database - 如果在数据库建模期间忽略弱实体会出现什么问题？

> ID：14183468
> 
> 赞同：3
> 
> 时间：2013-01-06T15:13:57.447
> 
> 标签：database, database-design, erd

当我进行数据库建模时，我从不使用弱实体，到目前为止一切似乎都很好。我通常通过给每个实体一个主（自动生成）键来忽略整个问题。

但是，我遇到了一些[帖子](http://www.siue.edu/~dbock/cmis450/3-ermodel.htm)，其中提到如果某些实体的存在完全依赖于其他实体，则它们应该是弱的。

但另一方面，有些人将弱实体称为不具备足够属性来形成主键的集合。好吧，这意味着我的数据库中的所有实体在我给它们自动递增键之前一开始都很弱。

有人可以概述弱实体的重要性以及不使用它们的后果是什么？为什么我们不给每个实体一个自动生成的主键并让它变得强大呢？

**更新：**

也许有人可以解释为什么弱实体应该由父实体的主键+标识符来标识，而不是创建代理键并使用外键将其与父实体相关联（更新和删除时的级联更改）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:35:46.907

以包含多个订单行项目的订单为例。弱实体将是存储在自己的表中的各个行项目。它们的主键可以是订单的主键，加上一个简单的整数（例如 1、2、3，仅在订单内是唯一的）。因此，它们实际上并没有自己的主键作为唯一编号列，它们的键跨越两列，并且只有这种方式是唯一的。

如果订单被删除，则应删除订单行项目 - 它们单独存在没有意义。正是这种联系使它们变得脆弱——一件事被删除应该删除另一件事。

如果您为每个订单项目提供自己的主键，您仍然需要将它们关联回订单项目，这意味着为订单项目放置一个外键，或者拥有一个交叉引用表。（您可能还需要知道订单中的行项目编号，这意味着添加一个简单的整数列......此时您已经添加了足够多的键，没有自动生成的键。）对于设计模式在拥有的子项目中，这些选择中的任何一个都有点矫枉过正。

使用复杂主键还强制了订单和订单项之间的关系，因为此架构不允许您不能将订单项分配给多个订单。

另一个考虑因素是您可以根据订单项目主键对订单和订单行项目进行分片，因为两个表都有该键。（基于主键的分片通常比常规列更容易。）

* * *

分层遏制并不总是您想要的。但是，这是一种常见的模式，很高兴能清楚地了解它，在这种情况下可以使用复合键。在这里，使用带有订单项的订单项作为子项（即包含），我们不仅是说订单项相对于订单是一对多的，而且订单项是拥有的并且不独立于订单而存在 -该行项目组成以创建单个订单对象。

为此，我们明确不会为（所有）订单项（作为一个组）管理单独的键空间，而是借用和扩展订单的键空间。我们没有要求系统为行项目维护一个单独的键空间，并手动（即不太正式地）维护与订单的外键关系，并且还单独维护一个整数行项目（与订单外引用），我们可以要求系统确保整个组合键的唯一性，其中包括订单中的行项目号。

当然，您将无法添加与订单无关的订单项，但此外，使用复合子键，您也无法添加与另一个重叠的订单项（例如不会让您为同一订单添加两个订单项 #3）。

这迫使订单项的生产者和消费者将它们视为包含在订单中和订单的一部分，而不是作为独立的项目，或者换句话说，通过订单来引用订单项，或者换句话说, 通过引用其中一个订单项来“免费”获得对订单的引用。（并且由于您还可以将顺序作为此类外键的一部分引用，因此您也可以单独使用复合外键的该顺序部分来分组或加入。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:48:09.483

我最近参与了一个项目，该项目必须管理大量用于湖泊读数的数据样本。在这个项目中，我们有类似于以下的表格，其中`records`是按位置和上传者收集的湖泊读数，并`samples`包含实际的湖泊读数——比如温度和强度。

```
CREATE TABLE records(
    email TEXT REFERENCES users(email),
    lat DECIMAL,
    lon DECIMAL,
    depth TEXT,
    upload_date TIMESTAMP,
    comment TEXT,
    PRIMARY KEY (upload_date,email)
);

CREATE TABLE samples(
    date_taken TIMESTAMP,
    temp DECIMAL,
    intensity DECIMAL,
    upload_date TIMESTAMP,
    email TEXT,
    PRIMARY KEY(date_taken,upload_date,email),
    FOREIGN KEY (upload_date,email) REFERENCES records(upload_date,email)
); 
```

`samples`被建模为一个弱实体，依赖于`records`. 如您所知，这意味着所有外键都继承自`records`并用于标识`samples`. 但是如果我们决定把它变成一个实体会发生什么？好吧，你可以用几种不同的方式来看待它，要么：

1.  正如您所建议的，主键 from`records`将不存在`samples`，我们将不得不分配某种任意的自动增量类型 ID。每条记录都包含数千个样本，用户将样本视为他们在现场记录的记录的一部分。他们希望按记录浏览样本，因此我们将有一个非常大的 `samples`表，没有明显的映射到他们在现实生活中所属的记录。

2.  或者我们根本不将其*建模*为弱实体，而是认识到它需要能够用`records`一行来标识自己，所以我们分配一个`upload_date`and `email`。如果我们将这两个条目设为外键，那么我们只是在没有意识到的情况下创建了一个弱实体。如果我们不这样做，那么我们的应用程序层必须负责检查以确保每个`upload_date`和`email`也存在于 中`records`，而不是由数据库执行。

在这种情况下，创建`samples`一个弱实体（在其主键中包括外键）是最简单的选择（也是最有意义的）。

**概括**

当实体在现实生活中实际上很弱时，您应该将实体建模为弱。如果您有一个实体需要不同键的一部分来标识自己（具有作为其主键一部分的外键），那么它可能很弱。

你能改造系统以避免使用弱实体吗？可能，如果我们想要有未关联的样本，那么我们需要能够将它们设为空`upload_date`，`email`这意味着它们不会在主键中，也不会是弱实体。我们将不得不做我在 1 中描述的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:13:54.880

主键必须是唯一的。永远。这里的所有都是它的。如果表中的数据不能自然地提供，您将创建一个代理键。

现在那些是什么。自然键由一个或多个现有列组成，而代理键是额外添加的列，通常是自动增量的。

自然键的一个很好的例子是`countries`表中的 ISO 国家代码。在此处添加自动增量列将一无所获。相反，您可以避免在某些查询中加入国家/地区表，因为您已经拥有 ISO 代码。

一个不好的，一个`contacts`表中的名称（或多个列）。这就是为什么在这种情况下最好使用代理键。

我就是这么想的，而且我很少（如果有的话）遇到任何有问题的布局问题。

一个实用的提示：你永远不会在`UPDATE`构成主键的列上运行。您将删除该行并使用新值重新插入它。这可以为您省去很多麻烦。

# vba - How to check if code that is run belongs to active sheet

> ID：14183469
> 
> 赞同：1
> 
> 时间：2013-01-06T15:14:12.063
> 
> 标签：vba, excel-2010

I have written some code for an excel spreadsheet. This sub has been added to the ribbon using the standard customizations found in File -> Options -> Customize Ribbon. What is funny though, is that the customization will run the Sub on the EXACT EXCEL FILE that the Sub is written in, i.e. the original.

My users copy the excel file and make adjustments and then run the sub (by clicking the customized button in the ribbon), which then opens the ORIGINAL template file and runs the code. This actually works fine - and I like it because it runs the TEMPLATE code on the ACTIVE sheet. But the only problem is it is also OPENING the original template file. How do I get it to close? Remember it is not the ActiveSheet anymore.

One possible answer is to check if the template is open, then close it (using a static reference), but I would prefer something a little more elegant than that.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:12:58.590

您应该能够使用`ThisWorkbook`.

* * *

此外，如果您将工作簿的代码作为 .xlam 而不是 .xlsm 提供，它将被打开，但不会有窗口，因此用户不会看到它。

* * *

不确定您是否已经在使用它，但在为 .xlam 添加功能区按钮时，您可能还想使用“仅用于此工作簿”。（以 .xlam 格式交付允许您将工作簿中的按钮安装到功能区中，而无需依赖文件路径，也不需要您的用户也安装按钮（他们安装的是 .xlam）。）

# tridion - 在 Tridion 2011 SP1 的存储扩展中未调用 DAO 类中的已实现方法

> ID：14183472
> 
> 赞同：2
> 
> 时间：2013-01-06T15:14:32.127
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, tridion-storage-extension

我实现的方法没有从 DAO 类中调用。

我创建了名为 search_dao_bundle.xml 的捆绑 xml，如下所示，并放置在相同的位置，即我的 cd_storage_xml 所在的 tridion_home/config。

```
<?xml version="1.0" encoding="UTF-8"?>
<StorageDAOBundles>
<StorageDAOBundle type="persistence">
    <StorageDAO typeMapping="PublishAction" class="com.tridion.storage.extension.search.JPAPublishActionDAO" />
</StorageDAOBundle>
</StorageDAOBundles> 
```

之后，我将捆绑条目添加到我的 cd_storage_conf.xml 中，如下所示：

```
<StorageBindings>
    <Bundle src="search_dao_bundle.xml"/>
</StorageBindings> 
```

在下面我创建了我的新存储类型，如下所示：

```
<Storage Type="persistence" Id="searchdb" dialect="MSSQL" Class="com.tridion.storage.persistence.JPADAOFactory">
    <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120" />
    <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
        <Property Name="serverName" Value="********" />
        <!--Property Name="portNumber" Value="1433" /-->
        <Property Name="databaseName" Value="********" />
        <Property Name="user" Value="********" />
        <Property Name="password" Value="********" />
    </DataSource>
</Storage> 
```

在那之后，我在下面做了项目映射

```
<ItemTypes defaultStorageId="defaultdb" cached="false"> 
    <Item typeMapping="PublishAction" cached="false" storageId="searchdb" />
</ItemTypes> 
```

我重新启动了我的部署服务在我的核心日志中出现了以下异常

**下面是我从 Mihai Code 中获取的示例 DAO 类：**

```
package com.tridion.storage.extension.search;

import java.util.HashMap;
import java.util.Map;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;
import com.tridion.broker.StorageException;
import com.tridion.storage.extension.search.PublishActionDAO;
import com.tridion.storage.persistence.JPABaseDAO;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@Component("JPAPublishActionDAO")
@Scope("prototype")
public class JPAPublishActionDAO extends JPABaseDAO implements PublishActionDAO
{
    private static Logger log = LoggerFactory.getLogger(JPAPublishActionDAO.class);
    public JPAPublishActionDAO(String storageId, EntityManagerFactory entityManagerFactory, String storageName) 
    {
        super(storageId, entityManagerFactory, storageName);        
        log.debug("Constructor of JPAPublishActionDAO- storageId:"+storageId);
        log.debug("Constructor of JPAPublishActionDAO- entityManagerFactory:"+entityManagerFactory.isOpen());       
        log.debug("Constructor of JPAPublishActionDAO- storageName:"+storageName);
    }

     public JPAPublishActionDAO(String storageId, EntityManagerFactory entityManagerFactory, EntityManager entityManager, String storageName) 
     {       
            super(storageId, entityManagerFactory, entityManager, storageName);         
     }

     public PublishAction store(PublishAction publishAction) throws StorageException 
     {
         log.debug("JPAPublishActionDAO store");
         //System.out.println("\n******************** From Store *************************************");
            PublishAction entity = (PublishAction) super.create(publishAction);
            return entity;
     }

     @SuppressWarnings("unchecked")
    public PublishAction findByPrimaryKey(long publishActionId) throws StorageException 
     {
            log.debug("JPAPublishActionDAO findByPrimaryKey");
            StringBuilder queryBuilder = new StringBuilder();
            queryBuilder.append("select c from PublishAction c where c.id = :id");

            @SuppressWarnings("rawtypes")
            Map queryParams = new HashMap();
            queryParams.put("id", Long.valueOf(publishActionId));
            log.debug("JPAPublishActionDAO findByPrimaryKey -> queryBuilder- " +queryBuilder.toString());
            return (PublishAction) super.executeQuerySingleResult(queryBuilder.toString(), queryParams);
     }

     @SuppressWarnings("unused")
    public PublishAction update(PublishAction publishAction) throws StorageException 
     {
            log.debug("JPAPublishActionDAO update");
            PublishAction existingPublishAction = findByPrimaryKey(publishAction.getId());

            log.debug("JPAPublishActionDAO update -> existingPublishAction- " +existingPublishAction.toString());
            if (existingPublishAction != null) 
            {
                   return (PublishAction) super.update(publishAction);
            } 
            else 
            {
                   throw new StorageException("Could not find publish action in storage to update!!!");
            }
     }

     public void remove(long publishActionId) throws StorageException 
     {
            log.debug("JPAPublishActionDAO remove");
            PublishAction foundPublishAction = findByPrimaryKey(publishActionId);
            log.debug("JPAPublishActionDAO remove -> foundPublishAction- " +foundPublishAction.toString());
            if (foundPublishAction != null) 
            {
                   super.remove(foundPublishAction);
            }
     }
} 
```

我能够看到我的构造函数被调用，即我在我的核心文件日志中获取这些日志

```
log.debug("Constructor of JPAPublishActionDAO- storageId:"+storageId);
log.debug("Constructor of JPAPublishActionDAO- entityManagerFactory:"+entityManagerFactory.isOpen());       
log.debug("Constructor of JPAPublishActionDAO- storageName:"+storageName); 
```

但是我没有得到任何用其他方法写的日志，比如方法**public PublishAction store** log.debug("JPAPublishActionDAO store");

log.debug("JPAPublishActionDAO findByPrimaryKey");

log.debug("JPAPublishActionDAO 更新");

可能是什么原因，我有与给出的示例代码相同的名称（PublishAction.java）和接口类（PublishActionDAO.java）的实体类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:35:41.380

PublishAction 类型不是默认的 Tridion 类型之一，这意味着默认情况下不会使用它。为了使用您的 DAO，您需要在部署过程中以某种方式调用它，通常是从 Deployer 模块。你能检查一下你是如何以及在哪里使用这个 PublishActionDAO 的吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T17:22:59.623

我不能在评论中发布格式化代码，因此这个新答案。

@sea_gull 是对的——你确实需要调用新的 DAO。之所以这样，是因为它是一种新类型，所以 Content Delivery 存储机制不知道如何处理它。您必须以某种方式调用它（可能来自部署程序模块，但不一定）。我使用了一个单元测试来调用它（只是为了证明它有效）。

这是我用来调用存储扩展的示例单元测试代码：

```
package com.tridion.extension.search.test;

import static org.junit.Assert.fail;

import java.util.Date;

import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.tridion.broker.StorageException;
import com.tridion.storage.StorageManagerFactory;
import com.tridion.storage.extension.search.PublishAction;
import com.tridion.storage.extension.search.PublishActionDAO;

/**
 * @author Mihai Cadariu
 */
public class DAOTestCase {

    private final Logger log = LoggerFactory.getLogger(DAOTestCase.class);

    /**
     * Test method for
     * {@link com.tridion.storage.extension.search.PublishActionDAO#store(com.tridion.storage.search.PublishAction)}.
     */
    @Test
    public void testDAO() {
        try {
            log.debug("Get PublishActionDAO");
            PublishActionDAO publishActionDAO = (PublishActionDAO) StorageManagerFactory.getDefaultDAO("PublishAction");

            log.debug("Create new PublishAction bean");
            PublishAction publishAction = new PublishAction();
            publishAction.setAction("testStore action");
            publishAction.setContent("testStore content");
            publishAction.setTcmUri("testStore tcmUri");
            publishAction.setUrl("testStore url");
            publishAction.setCreationDate(new Date());

            // Store
            log.debug("Store bean");
            publishAction = publishActionDAO.store(publishAction);
            log.debug("Stored bean " + publishAction);
            long id = publishAction.getId();

            // FindByPrimaryKey
            log.debug("Find PublishAction by PK=" + id);
            publishAction = publishActionDAO.findByPrimaryKey(id);
            log.debug("Found bean " + publishAction);

            if (publishAction == null) {
                log.error("Cannot find bean");
                fail("TestFindByPrimaryKey failed: cannot retrieve object with pk " + id);
            }

            log.debug("Modifying bean content");
            String content = publishAction.getContent();
            content += "\r\nMODIFIED " + new Date();
            publishAction.setContent(content);

            // Update
            log.debug("Update bean");
            publishActionDAO.update(publishAction);

            // Remove
            log.debug("Remove bean");
            publishActionDAO.remove(id);
        } catch (StorageException se) {
            log.debug("TestDAO failed: Exception occurred " + se);
            fail("TestDAO failed: Exception occurred " + se);
            se.printStackTrace();
        }
    }
} 
```

如果您从 Deployer 扩展中调用代码，这是我使用的示例代码：

```
public class PageDeployModule extends PageDeploy {

    private final Logger log = LoggerFactory.getLogger(PageDeployModule.class);

    public PageDeployModule(Configuration config, Processor processor) throws ConfigurationException {
        super(config, processor);
    }

    /**
     * Process the page to be published
     */
    @Override
    protected void processPage(Page page, File pageFile) throws ProcessingException {
        log.debug("Called processPage");

        super.processPage(page, pageFile);
        processItem(page);
    }

    private void processItem(Page page) {
        log.debug("Called processItem");
        try {
            SearchConfiguration config = SearchConfiguration.getInstance();
            String externalUrl = config.getExternalAccessUrl() + page.getURLPath();
            String internalUrl = config.getInternalAccessUrl() + page.getURLPath();

            PublishAction publishAction = new PublishAction();
            publishAction.setAction("Publish");
            publishAction.setTcmUri(page.getId().toString());
            publishAction.setUrl(externalUrl);
            publishAction.setContent(Utils.getPageContent(internalUrl));

            PublishActionDAO publishActionDAO = (PublishActionDAO) StorageManagerFactory.getDefaultDAO("PublishAction");
            publishAction = publishActionDAO.store(publishAction);
            log.debug("Stored bean " + publishAction);
        } catch (StorageException se) {
            log.error("Exception occurred " + se);
        }
    }
} 
```

您可以对 PageUndeploy 使用相同的方法，将操作标记为“取消发布”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:18:44.613

需要更多信息：1）您在想要调用这些方法时实际发布的内容 - 动态 CP 或页面

2) 您从哪里收到此代码？我在您的代码中没有看到任何“创建”方法...您从哪里收到此代码

在您之前与“未加载命名 Bean”错误相关的帖子中；Nuno 提到了由 Pankaj Gaur（即我）发起的关于 Tridion 论坛（也给出了那里的论坛链接）的讨论......你提到了吗？

请注意，如果您的构造函数被调用，那么至少您的配置没有问题；它是您发布的类型中的代码或不匹配。

另请注意，如果您尝试在不进行任何更改的情况下重新发布某些内容，则存储扩展可能不会被加载（或者方法可能不会被调用）；所以我在调试期间的建议，总是在对演示文稿进行一些更改后发布。

我希望它有帮助，否则将框架代码与 JAR 文件一起共享，我会尝试

# performance - Yii: render process

> ID：14183478
> 
> 赞同：0
> 
> 时间：2013-01-06T15:15:00.930
> 
> 标签：performance, yii, render

I would like to know if someone could explain me what happens exactly when we call a "render".

Let me introduce you my problem:

**This is my action:**

```
public function actionIndex()
{
    $new_user = new CustomUser;
    $new_person = new CustomPerson;

    $tab_person = $this->getListPerson();
    $this->render('index',array('tab'=>$tab_person,
                                'user'=>$new_user,
                                'person'=>$new_person));
} 
```

**And this is my index view:**

```
.
. 
.
</p> <br/>   
<?php $this->renderPartial('person-form', array('person'=>$person,
                                                'user' =>$user ));
?> 
```

So my problem is that the loading page time is very long. If I put a

> die("die");

just befor the render in my actionIndex or at the end of my view (after the renderPartial) the execution is very fast. I'll see "die"(and my index page if I put the statement at the end of it) after 0.3 second. But if I put it after my render or I don't put it, then my page is going to be loaded correctly but in 4-5 secondes.

So I think I didn't understand very well what happens after a render. I repeat if I stop the execution at the end of my view page it's very fast, but at the end of my action it's very slow. I thought about js and css, but after looking into I didn't see anything and Firebug shows me that these files are loaded very quickly. And if I put the "die()" statment at the end of my layout main.php it's very fast as well.

![enter image description here](../Images/ced3dab9e3147406a911f50b7be4c5c4.png)

So I know that render will show the page and wrap it in the layout but is there another thing which maybe could make the action very slow?

If anybody has an idea about my problem I would be very grateful.

Sorry if I did mistakes, English is not my mothertongue.

Thank you for reading me, have a good day :)

Michaël

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:08:16.620

这可能看起来令人困惑的一个原因是它可能不是缓慢的“渲染”。可能是加载模型和关系很慢，但默认情况下它们是延迟加载的。这意味着在请求它们的代码被命中之前不会查询数据库，这通常在视图中。

这可以解释为什么渲染速度很慢。所以就像其他人说的那样，您需要在页面或日志中启用日志记录到萤火虫。然后，您可以检查任何慢查询或组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T01:59:11.183

据我了解，它不应加载较慢。也许您在页面上加载了其他内容。尝试在屏幕上启用日志：[http](http://www.yiiframework.com/wiki/58/sql-logging-and-profiling-in-firebug-yii-1-1/) ://www.yiiframework.com/wiki/58/sql-logging-and-profiling-in-firebug-yii-1-1/ 。查看视图渲染后是否执行了任何操作。

# jsf-2 - Update sibling component in JSF 2 / Primefaces

> ID：14183479
> 
> 赞同：2
> 
> 时间：2013-01-06T15:15:07.350
> 
> 标签：jsf-2, primefaces

I have the following component tree on my page

```
form
    tabView
        datatable
        dialog 
```

Now I want to update the dialog component when a row is selected in the datatable.

I tried something like:

```
<p:ajax event="rowSelect" update="@parent:detailsView" oncomplete="detailsViewDialog.show()" /> 
```

where detailsView is the id of a panelGroup within the p:dialog.

Only having update="@parent" works but is it not a solution to always reload the whole table only to display the dialog.

Can anybody give me a hint?

Regards, Florian

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T15:29:58.117

数据表本身就是一个`NamingContainer`组件，因此很难使用相对的客户端 ID。您基本上需要指定绝对客户端 ID：

```
<p:ajax ... update=":formId:tabViewId:detailsView" /> 
```

或者，您也可以通过属性将 with ID 绑定到[`UIComponent`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html)视图`detailsView`并在属性中使用：`binding``UIComponent#getClientId()``update`

```
<p:ajax ... update=":#{detailsView.clientId}" />
...
<h:panelGroup id="detailsView" binding="#{detailsView}"> 
```

# objective-c - Labels do not appear in Mac Retina devices

> ID：14183483
> 
> 赞同：3
> 
> 时间：2013-01-06T15:15:20.263
> 
> 标签：objective-c, macos, cocos2d-iphone

I received couple of screenshots from a user indicating that the `CCMenuItemFont` and `CCLabelTTF` do not appear on a Macbook retina device. All the images in the application are correctly shown while the text doesn't appear correctly.

A code sample of one of the labels:

```
 CCLabelTTF *label=[CCLabelTTF labelWithString:answer fontName:@"Helvetica" fontSize:30];
    [label setColor:ccc3(255, 255, 255)];
    [label setPosition:ANSWER_POSITION];
    [self addChild:label]; 
```

I am using two languages in the application. The english words appear as a small wave while the others don't appear at all. A screenshot to show an english word: ![Incorrectly displayed label](../Images/370ef9091094d5bec03e463136a1c442.png)

Unfortunately, I don't have access to a Retina device, and the following method is not working for me to debug the problem: [How to simulate a retina display (HiDPI mode) in Mac OS X 10.8 Mountain Lion on a non-retina display?](https://stackoverflow.com/questions/12124576/how-to-simulate-a-retina-display-hidpi-mode-in-mac-os-x-10-8-mountain-lion-on)

Any ideas how to solve this problem? Thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T18:00:37.007

问题出在我使用的 cocos2d 版本（2.0V）中。使用 2.1 或应用此链接中提到的解决方案： [解决方案](http://www.cocos2d-iphone.org/forum/topic/36096)

对两种语言都有效的解决方案是在 CCTexture2D 中添加以下行：

```
[[NSAffineTransform transform] set]; 
```

# java - Accessing a public static arrayList of a Thread Class from another Thread's Class

> ID：14183485
> 
> 赞同：0
> 
> 时间：2013-01-06T15:15:21.487
> 
> 标签：java, swing

I am trying to access the

```
public static List<ChatThread> Chat_list of my ChatThread Class 
```

from the run() method of my Client Class but i keep getting an empty array(Infact it throws an exception at that point : `Exception in thread "Thread-2" java.lang.NullPointerException`)

and am very certain that that arrayList exists and is not empty(Because i did a test on the arrayList in my ChatThread Class). Just take a look at my code. Please I need your help on what to do.

Thanks.

This is the class containing the arrayList :

```
public class ChatThread extends Thread {

private Socket sc;
private String cherry_name;
private String passwd;
public static List<ChatThread> Chat_list = new ArrayList<ChatThread>(); //THE STATIC ARRAY LIST
private BufferedReader br;
private BufferedWriter bw;
public ChatThread(Socket sc){
    try {
        this.sc=sc;
        System.out.println(sc);
        br = new BufferedReader(new InputStreamReader(sc.getInputStream()));
        bw = new BufferedWriter(new OutputStreamWriter(sc.getOutputStream()));
        String help = br.readLine();
        this.cherry_name=help.split("@")[0];
        this.passwd=help.split("@")[1];
        System.out.println(this.cherry_name);
        System.out.println(this.passwd);
        Chat_list.add(this); //This is where i add it to the arrayList
        if(Chat_list.isEmpty()) //This is where i did the test
            System.out.println("I am empty");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void run(){
//Comparaison of information with that in the database    
try{
                    bw.write("success");
                    bw.newLine();
                    bw.flush();

            while(true){

            }
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
         catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    }

public Socket getSc() {
    return sc;
}   

public String getCherry_name() {
    return cherry_name;
}

} 
```

> As for the Client class :

```
public class Client extends Thread {
private Socket socket;
private BufferedReader br;
private BufferedWriter bw;
 private ChatThread th;
 private String cherry_name;
 public Client(String cherry_name,String passwd){
 try
 {
     socket = new Socket("127.0.0.1", 8888);
     this.cherry_name=cherry_name;
     br = new BufferedReader(new InputStreamReader(socket.getInputStream()));
     bw = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
     bw.write(cherry_name+"@"+passwd);
     bw.newLine();
     bw.flush();
 }
catch (IOException e) {
            // TODO Auto-generated catch block
            System.out.println("Erreur lors de la lecture du socket");
            e.printStackTrace();
        }
 }
 @SuppressWarnings("deprecation")
public void run()
 { 
        try {
            String help = br.readLine();
     if(help.equals("failed")){
         this.notify();
         this.destroy();
         socket.close();
         }
     else{
         if(ChatThread.Chat_list.isEmpty()) System.out.println("Empty array!!!"); //This is where it says the array is empty whereas it wasn't the case in the ChatThread Class
         for(ChatThread ct : ChatThread.Chat_list){
                    if(cherry_name.equals(ct.getCherry_name())){
                        th=ct;
                        break;
                    }
         }
         while(true){

         }

         }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            System.out.println("Error whilst reading from the socket");
            e.printStackTrace();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            System.out.println("Interruption");
            e.printStackTrace();
        }

    }

public Socket getSocket() {
    return socket;
} 
} 
```

And my server class :

```
public class Server {

public static void main(String[] args) {
    try {
    ServerSocket server =new ServerSocket(8888);
    Socket sc;
    System.out.println("Server Started");
    while(true){
            sc=server.accept();
            System.out.println("New Connection");
            new ChatThread(sc).start();
    }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
}
} 
```

A main class to instantiate the Client class :

```
public class help {

public static void main(String[] argv)  {

new Client("Jerry","Smith").start(); 
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:24:11.177

对两个线程之间共享的可变对象的每次访问都必须以同步的方式进行访问。不同步会导致您看到的可见性和连贯性问题。

你不应该公开`ArrayList`这样的东西（即使没有多个线程，公共静态可变对象已经是一种非常糟糕的做法）。相反，您应该将其封装在您自己的对象中，并确保每次访问都正确同步。

如果没有看到任何代码行，很难给出更具体的建议。

# delphi - 如何使用 DSPack 从 MemoryStream 渲染视频？

> ID：14183497
> 
> 赞同：2
> 
> 时间：2013-01-06T15:16:01.553
> 
> 标签：delphi, video, directshow, dspack

我可以在 Delphi 2010 中使用 TFilterGraph 和 TVideoWindow 从文件系统渲染视频。我想从 MemoryStream 渲染视频，而不是直接从文件系统渲染视频。这是概念：

1.  将视频存储在数据库 blob 字段中。

2.  将 blob（视频）读入 MemoryStream。

3.  使用 DSPack 渲染 blob（视频）。

如何告诉 FilterGraph 使用 MemoryStream 而不是文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T20:47:47.073

Ciuly 的网络角发布了一个工作演示，回答了您问题的最后一部分： [http ://www.ciuly.com/delphi/multimedia/using-directshow-with-dspack-play-multimedia-content-from-stream/](http://www.ciuly.com/delphi/multimedia/using-directshow-with-dspack-play-multimedia-content-from-stream/)

至于其他两部分，加载和读取数据库 blob 字段：

```
//add a file stream to a blob field
MemoryStream:= TMemoryStream.Create;
try
  MemoryStream.LoadFromFile(VideoFileName);
  MemoryStream.Position:= 0;
  ClientDataSet1.Edit;
  ClientDataSet1YOURBLOBFIELD.LoadFromStream(MemoryStream);
  ClientDataSet1.Post;
finally
  MemoryStream.Free;
end;

//read a memory stream from a blob field
MemoryStream:= TMemoryStream.Create;
try
  ClientDataSet1YOURBLOBFIELD.SaveToStream(MemoryStream);
  MemoryStream.Position:= 0;
  //do your magic with the memory stream here
finally
  MemoryStream.Free;
end; 
```

# wordpress - 向管理侧边栏显示自定义元框不起作用

> ID：14183498
> 
> 赞同：1
> 
> 时间：2013-01-06T15:16:04.247
> 
> 标签：wordpress

我创建了一个自定义元框来在管理区域的帖子显示中显示一些内容，并希望它显示在侧边栏中，而不是在所见即所得编辑器下方。我在上下文中添加了“side”，但没有任何反应！我已经玩了好几个小时了，但没有任何运气。

这是我的代码：

```
function add_custom_meta_box() {
    add_meta_box (
        'custom_meta_box',
        'Custom Meta Box Title',
        'show_custom_meta_box',
        'post',
        'side',
        'high'
    );
}
add_action('add_meta_boxes', 'add_custom_meta_box');

function show_custom_meta_box() {
    // here i have all the code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:11:30.253

改编自此[Q&A](https://wordpress.stackexchange.com/q/64512/12615)，以下将强制自定义元框进入侧栏中的第二个位置。

检查评论并注意`admin_init`.
它仅在用户自己没有重新排列位置时才有效。注册新用户时，为他设置位置，作为钩子`admin_init`并附`user_register`加到相同的回调函数。

```
// This fires at **every** page load, a better hook must be found
add_action( 'admin_init', 'set_user_metaboxes_so_14183498' ); 

// This fires when a new user is created
add_action( 'user_register', 'set_user_metaboxes_so_14183498' );  

function set_user_metaboxes_so_14183498( $user_id = null ) 
{
    // This is the metakey we will need to update  
    $meta_key = 'meta-box-order_post';

    // So this can be used without hooking into user_register
    if( !$user_id )
        $user_id = get_current_user_id(); 

    // Set the default order if it has not been set yet by the user. 
    // These are WP handles, PLUS our custom meta box handle
    if ( ! get_user_meta( $user_id, $meta_key, true ) ) 
    {
        $meta_value = array(
            'side' => 'submitdiv,custom_meta_box,formatdiv,postimagediv',
            'normal' => 'postcustom,commentsdiv,slugdiv,revisionsdiv',
            'advanced' => '',
        );
        update_user_meta( $user_id, $meta_key, $meta_value );
    }
} 
```

# android - 没有这样的桌子

> ID：14183505
> 
> 赞同：0
> 
> 时间：2013-01-06T15:16:33.157
> 
> 标签：android, sqlite

我正在尝试使用 SQLliteDatabase 创建一个基本数据库，但它一直给我这个错误。我被**卡了很长时间**，我想我犯的错误很简单，但我找不到。**如果有人可以提供帮助，那就太好了**

```
01-06 15:07:47.885: I/Database(1824): sqlite returned: error code = 1, msg = no such table: webpages
01-06 15:07:47.904: E/Database(1824): Error inserting id=1 phone=10001 name=Ivan
01-06 15:07:47.904: E/Database(1824): android.database.sqlite.SQLiteException: no such table: webpages: , while compiling: INSERT INTO webpages(id, phone, name) VALUES(?, ?, ?); 
```

这是我使用的代码

```
public class DatabaseHandler extends SQLiteOpenHelper {
    /**
     * The name of the database
     */
    private static final String DATABASE_NAME = "Weboff.db";

    /**
     * The name of the (only) table.
     */
    private static final String TABLE_NAME = "webpages";

    /**
     * The name of the first column (ID)
     */
    private static final String COL_ID = "id";

    /**
     * The name of the second column (NAME)
     */
    private static final String COL_NAME = "name";

    /**
     * The name of the third column (PHONENUMBER)
     */
    private static final String COL_PHONE = "phone";

    /**
     * A constructor which builds a DatabaseHandler object. Note that calling
     * the constructor does not create a database. This does not happen until
     * the first call to getReadableDatabase() or getWriteableDatabase()
     * 
     * @param context
     *            In this case, a reference to LecturerActivity
     */
    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, 1);
    }

    /**
     * This method is called when the database is created for the first time.
     * This is where the creation of tables and the initial population of the
     * tables should happen.
     */
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_NAME + "("
                + COL_ID + " INTEGER PRIMARY KEY," + COL_NAME + " TEXT,"
                + COL_PHONE + " TEXT" + ")";
        db.execSQL(CREATE_CONTACTS_TABLE);
    }

    /**
     * Called when the database needs to be upgraded. Only relevant when you
     * have multiple versions of the database scheme in play.
     * 
     */
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldNum, int newNum) {
        // Drop older table if exist and create fresh
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }

    /**
     * Use this method to add a Lecturer to the database.
     * 
     * @param lecturer
     *            the Lecturer you want to add
     */
    public void addLecturer(Lecturer lecturer) {
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(COL_ID, lecturer.getID());
        values.put(COL_NAME, lecturer.getName());
        values.put(COL_PHONE, lecturer.getPhoneNumber());
        db.insert(TABLE_NAME, null, values);
        db.close();
    }

    /**
     * Use this method to get all of the Lecturers in the database.
     * 
     * @return a list of Lecturer objects, one per row
     */
    public List<Lecturer> getAll() {
        List<Lecturer> list = new ArrayList<Lecturer>();
        String selectQuery = "SELECT  * FROM " + TABLE_NAME;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        if (cursor.moveToFirst()) {
            do {
                Lecturer lecturer = new Lecturer(cursor.getInt(0),
                        cursor.getString(1), cursor.getString(2));
                list.add(lecturer);
            } while (cursor.moveToNext());
        }
        return list;
    }

    /**
     * Use this method to remove all of the Lecturers from the database. This is
     * useful when experimenting. After dropping all tables, the initial state
     * of the database is re-created.
     */
    public void removeAll() {
        SQLiteDatabase db = this.getWritableDatabase();
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }

    /**
     * This method removes one lecturer from the database.
     * 
     * @param lecturer
     *            the Lecturer to remove
     */
    public void deleteLecturer(Lecturer lecturer) {
        SQLiteDatabase db = this.getWritableDatabase();
        db.delete(TABLE_NAME, COL_ID + " = ?",
                new String[] { String.valueOf(lecturer.getID()) });
        db.close();
    }

    /**
     * This method updates the data stored in the database for one Lecturer.
     * 
     * @param lecturer
     *            the Lecturer to update
     * @return the number of rows affected
     */
    public int updateLecturer(Lecturer lecturer) {
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(COL_NAME, lecturer.getName());
        values.put(COL_PHONE, lecturer.getPhoneNumber());
        return db.update(TABLE_NAME, values, COL_ID + " = ?",
                new String[] { String.valueOf(lecturer.getID()) });
    }

    /**
     * This method gets a single Lecturer from the database, using the ID field
     * as a key
     * ;
     * @param id
     *            the ID of the Lecturer we want
     * @return a Lecturer object
     */
    public Lecturer getLecturer(int id) {
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.query(TABLE_NAME, new String[] { COL_ID, COL_NAME,
                COL_PHONE }, COL_ID + "=?",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor != null) {
            cursor.moveToFirst();
        }
        Lecturer lecturer = new Lecturer(Integer.parseInt(cursor.getString(0)),
                cursor.getString(1), cursor.getString(2));
        return lecturer;
    }
}

public class Lecturer {

    /**
     * The ID assigned to the lecturer. Starts at 1.
     */
    private int ID;

    /**
     * The full name of the lecturer.
     */
    private String name;

    /**
     * The internal phone number of the lecturer. 4 digits.
     */
    private String phoneNumber;

    /** Builds a new Lecturer object
     * 
     * @param ID The ID assigned to the lecturer.
     * @param name The full name of the lecturer
     * @param phoneNumber The internal phone number of the lecturer
     */
    public Lecturer(int ID, String name, String phoneNumber){
        this.ID = ID;
        this.name = name;
        this.phoneNumber = phoneNumber;
    }

    /**
     * Get the full name of the lecturer
     * 
     * @return the lecturers full name
     */
    public String getName(){
        return this.name;
    }

    /**
     * Set the name of the lecturer
     * 
     * @param name the lecturers full name
     */
    public void setName(String name){
        this.name = name;
    }

    /**
     * Get the phone number of the lecturer
     * 
     * @return the lecturers full name
     */
    public String getPhoneNumber(){
        return this.phoneNumber;
    }

    /**
     * Set the phone number of the lecturer
     * 
     * @param name the lecturers phone number
     */
    public void setPhoneNumber(String phoneNumber){
        this.phoneNumber = phoneNumber;
    }

    /**
     * Get the ID of the lecturer
     * 
     * @return the lecturers ID
     */
    public int getID() {
        return ID;
    }

    /**
     * Set the ID of the lecturer
     * 
     * @param name the lecturers ID
     */
    public void setID(int iD) {
        ID = iD;
    }
}

And in the onCreate method 

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);

        regularExpresionStrings();

        dh = new DatabaseHandler(this);
        dh.addLecturer(new Lecturer(1, "Ivan", "10001"));

          Log.d("Database: ", "Listing all lecturers..");
          List<Lecturer> list = dh.getAll();  
          for (Lecturer lr : list) {
                String log = "ID:" + lr.getID() +" Name: " + lr.getName() + " Phone: " + lr.getPhoneNumber();
                Log.d("Database: ", log); 
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:30:52.877

详细来说，游标需要一个_id，您可能不需要将“id”更改为“_id”，只需将id查询为_id即可。

字符串 [] 列 = 新字符串 [] {"id AS _id"};

这将使查询找到“id”为“_id”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:07:04.227

如果你使用`Cursor`，你的桌子必须有`column = "_id"`，而不是`"id"`

# date - Google电子表格中过去日期和当前日期之间的天数

> ID：14183512
> 
> 赞同：52
> 
> 时间：2013-01-06T15:17:01.593
> 
> 标签：date, google-sheets, datediff

我想计算过去日期和当前日期之间经过的天数。我过去的日期是格式`dd/mm/yyyy`格式。我使用了下面提到的公式，但给出了正确的输出。

```
=DAYS360(A2,TODAY())
=MINUS(D2,TODAY()) 
```

在上面的公式`A2`= `4/12/2012`(dd/mm/yyyy) 中，我不确定 TODAY 是否以`dd/mm/yyyy`格式返回。我曾尝试使用工具栏上的 123 按钮，但没有运气。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2016-01-09T16:59:15.310

以下似乎对我很有效：

```
=DATEDIF(B2, Today(), "D") 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-03-02T10:34:36.960

`DAYS360`不计算您想要的，即两个日期之间经过的天数 - 有关详细信息，请参阅本文末尾**。**

`MINUS()`应该可以正常工作，只是不是您尝试的方式，而是相反：

```
=MINUS(TODAY(),D2) 
```

您也可以使用简单的减法 ( `-`)：

```
=TODAY()-D2 
```

我制作[了@DrCord 的示例电子表格的更新副本](https://docs.google.com/spreadsheet/ccc?key=0ArgUEpK3Wj2tdFBHZEJTejZNcnRXc1dDVXY0M1N3TkE)来说明这一点。

> 你确定你想要DAYS360吗？这是金融部门用于简化债券计算的专门功能。它假设一年 360 天，有 12 个月，每个月 30 天。如果你真的想要实际的日子，你每年会失去 6 天。 [[资源]](http://www.pcreview.co.uk/forums/days360-function-problem-t1767018.html#post5258664)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-01T09:12:31.050

由于这是谷歌对此的最佳答案，而且比我预期的要容易得多，所以这是简单的答案。只需从 date2 中减去 date1。

如果这是您的电子表格日期

```
 A            B
1 10/11/2017  12/1/2017 
```

`=(B1)-(A1)`

结果为 51，这是 Google 电子表格中过去日期和当前日期之间的天数

只要是谷歌表格能识别的日期格式，直接减去就可以了。

要为当前日期执行此操作，只需使用该`=TODAY()`功能。

`=TODAY()-A1`

虽然今天效果很好，但您不能直接在公式中使用日期，您应该引用包含日期的单元格。

`=(12/1/2017)-(10/1/2017)`结果为 0.0009915716411，而不是 61。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-09T18:31:40.237

我用了你的想法，发现了差异，然后除以 365 天。工作了一个款待。

```
=MINUS(F2,TODAY())/365 
```

然后我将单元格属性更改为不显示小数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-06T16:18:25.793

如果您同时使用这两个公式，它将不起作用...这是一个简单的电子表格，它可以工作： [https](https://docs.google.com/spreadsheet/ccc?key=0AiOy0YDBXjt4dDJSQWg1Qlp6TEw5SzNqZENGOWgwbGc) ://docs.google.com/spreadsheet/ccc?key=0AiOy0YDBXjt4dDJSQWg1Qlp6TEw5SzNqZENGOWgwbGc 如果您仍然得到问题我需要知道你得到什么类型的错误结果。

Today() 返回一个数字整数值：返回当前计算机系统日期。当您的文档重新计算时，该值会更新。TODAY 是一个没有参数的函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-02-24T13:56:03.957

以下对我有用。请注意 TODAY() 不能是函数中的第一个参数，否则它将不起作用。

```
=DATEDIF( W2, TODAY(), "d") 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-03-11T23:04:11.637

1.  Today() 确实以 DATE 格式返回值。

2.  选择您的“剩余天数字段”并将此公式粘贴到字段 =DAYS360(today(),C2)

3.  转到格式>数字>更多格式>自定义数字格式，然后选择没有十进制数字的数字。

我测试过，它至少在 2015 年 3 月的新版表格中有效。

# objective-c - 尽管使用 [[UITabBar appearance] setSelectionIndicatorImage:SomeCustomImage]; 如何使标签栏中的选定图标“闪亮”

> ID：14183514
> 
> 赞同：1
> 
> 时间：2013-01-06T15:17:11.450
> 
> 标签：objective-c, uitabbar

实际上它默认是闪亮的。但是，我的许多标签栏都没有闪亮的图标。

我想知道我做错了什么，它没有发光？

我环顾四周，发现消除闪亮光泽图像的一种方法是

[[UITabBar 外观] setSelectionIndicatorImage:SomeCustomImage];

这就是发生的事情。我使用自定义选择器图像。好吧，如果我仍然想要那个自定义选择器图像并且我仍然想要闪亮的外观呢？

![在此处输入图像描述](../Images/aaed71e1210be2c82c45e0241703a7cb.png)

我查看代码并没有发现任何区别。

我将图像色调设置为默认值，但它仍然没有光泽。

注意：我发现了问题

其他标签栏使用自定义选择的图像

[[UITabBar 外观] setSelectionIndicatorImage:SomeCustomImage];

这消除了光泽。

那么，我如何使用 setSelectionIndicatorImage 并保持闪亮的光泽外观。

# php - 创建唯一的回发地址以通过 PHP 接收对 POST 提交的响应

> ID：14183516
> 
> 赞同：0
> 
> 时间：2013-01-06T15:17:20.767
> 
> 标签：php, web-applications

我知道这是一个基本的理解问题，但作为一个新手，如果有人愿意为我澄清这一点，我会很高兴。

现在，我的网站适用于单个用户，我。答案出现在reply.php 页面中，我在该页面中解析数据并将其保存到我的数据库中。

对于多个用户，我的读数指向必须使用“会话”，其中每个会话都可以设置一个用户 ID 和其他有用的个性化信息，这些信息存储在 cookie 中。

我的问题是：我可以使用诸如会话数据之类的唯一标识符来为该用户创建一个唯一地址以将其重定向到吗？如果没有，我用什么？

我在网上看到一个例子，表明类似`www.site.com/replies/dfb97g`或`www.site.com/replies.php?dfb97g

我想澄清一下如何进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:39:05.733

这样做没有意义...

**使用 SESSION 和 GET**

用户填写一个发布到的表单`reply.php`

回复.php

```
<?php 
session_start();
$_SESSION['userid'] = strtotime('now'); # don't use this as a user id, it's just an example

#add something to db using generated userid

header("location: replies.php?userid=".$_SESSION['userid']);
?> 
```

回复.php

```
<?php
#session_start(); don't even need it

# get something from db where userid=".$_GET['userid'];

# output something
?> 
```

**正常使用 SESSION**

用户填写一个发布到的表单`reply.php`

回复.php

```
<?php 
session_start();
$_SESSION['userid'] = strtotime('now'); # don't use this as a user id, it's just an example

#add something to db using generated userid

header("location: replies.php");
?> 
```

回复.php

```
<?php
session_start(); 

# get something from db where userid=".$_SESSION['userid'];

# output something
?> 
```

当您在会话中使用该变量时，无需传递该变量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-06T15:29:34.170

所以你是对的，会议会在这里帮助你。我解释的最简单方法是给你一个代码示例。

```
<?php
  session_start();
  if (!isset($_SESSION['userid'])) {
    $_SESSION['userid'] = rand();
  }
  echo "Hello User ".$_SESSION['userid']."<br/>\n";
  echo "Custom URL: http://www.example.com/replies.php?".$_SESSION['userid']."<br/>\n";
?> 
```

`[session_unset()][1]`并且`[session_destroy()][2]`是您需要使用的一些有用功能。在使用它们之前，您需要先使用`session_start()`它们！

如果您有任何问题，请告诉我。祝你好运！

# emacs - Emacs 打开目录

> ID：14183517
> 
> 赞同：1
> 
> 时间：2013-01-06T15:17:24.633
> 
> 标签：emacs

Emacs 允许打开目录并选择文件。在目录中向上或向下移动一个步骤后，控件将移动到另一个拆分窗口。我的问题如何在同一个窗口中进行控件？

鉴于此，如何在特定的拆分窗口中打开文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:45:59.810

如果您正在使用`dired`，您可以使用`^`包含一个向上的目录和`i`包含一个子目录。`<`使用和在目录条目之间跳转`>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:27:23.133

在`dired-mode`中，您可以在点位于目录上方时按`i`( `dired-maybe-insert-subdir`) 将该目录的内容插入同一缓冲区（而不是打开新缓冲区）。

在打开了多个目录的缓冲区中，当点位于打开的子目录中时按`C-M-p`( `dired-prev-subdir`) 可跳转到缓冲区中的先前目录。

您提到您想通过右键单击将子目录插入到 dired 缓冲区中。这里有一些代码可以做到这一点：

```
(add-hook 'dired-mode-hook
          (lambda ()
            (local-set-key [mouse-3]
                           (lambda (click)
                             (interactive "e")
                             (goto-char (posn-point (event-start click)))
                             (call-interactively #'dired-maybe-insert-subdir))))) 
```

# php - 将两个 JavaScript 变量传递给 PHP 变量

> ID：14183519
> 
> 赞同：2
> 
> 时间：2013-01-06T15:17:33.577
> 
> 标签：php, javascript, variables, global-variables

我试图将两个 JavaScript 变量传递给 PHP 变量。

```
function myFunction(){
  var one = 'one';
  var two = 'two';
} 
```

在做了我的研究之后，我几乎得出了我将不得不使用 AJAX 的结论，比如

```
window.location.href = "myphpfile.php?one=" + one;
window.location.href = "myphpfile.php?two=" + two; 
```

但是我在使用 PHP 中获取变量时遇到了麻烦

```
$_GET['one']
$_GET['two'] 
```

我也对我是否两次调用 php 脚本感到困惑。有没有一种工作方式来传递两个变量？我找到了几种通过一种但没有通过两种的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T15:19:45.513

以下将在单个请求中发送两个变量

```
window.location.href = "myphpfile.php?one=" + one + "&two=" + two; 
```

但 window.location.href 不是 AJAX 请求。调用上述代码将导致浏览器位置更改为 myphpfile.php。

请参阅[此页面](http://www.switchonthecode.com/tutorials/simple-ajax-php-and-javascript)了解如何开始使用 AJAX，或者您可以考虑使用[jQuery](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T15:25:09.973

如果您只想“触发并忘记”这些变量，则不需要 AJAX。常用方法（不优雅，但有效）是使用隐藏框架：

```
<iframe id="MyFrame" style="display: none;"></iframe> 
```

然后在您的代码中：

```
function myFunction(){
    var one = 'one';
    var two = 'two';
    document.getElementById("MyFrame").src = "myphpfile.php?one=" + encodeURIComponent(one) + "&two=" + encodeURIComponent(two);
} 
```

这将导致 PHP 接收请求，但是如果您想读取和解析结果，您最好使用“真正的”AJAX。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T15:24:56.257

如果您只想将变量发送到另一个页面，请使用：

```
 window.location.href = "myphpfile.php?one=" + one + "&two=" + two; 
```

如果你想要ajax请求：

```
 $.ajax({
               url: "myphpfile.php",
               method: 'get',
               data : {one:"one",two:"two"},
              success:function() {
              alert("hi to all");
              }); 
```

# file-conversion - pdf/a-1 到任何光栅图像格式

> ID：14183526
> 
> 赞同：-1
> 
> 时间：2013-01-06T15:18:54.773
> 
> 标签：file-conversion, pdfa

我正在寻找一个非常简单的从 pdf/a-1 到任何图像格式的 C 或 C++ 开源转换器。我见过类似 mupdf 的东西，但是 200 多个源文件对于我的应用程序来说太多了。pdf/a-1 是 pdf 的子集，所以我希望找到比 mupdf 等通用 pdf 转换器更简单的东西。我不需要在屏幕上显示。有任何建议，BR Tommaso

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:26:31.460

PDF 是一种复杂的格式，即使使用 PDF/A-1 子集也是如此。我怀疑你能找到比 MuPDF 更小的东西。

# c# - 在C#模板中调用方法

> ID：14183528
> 
> 赞同：2
> 
> 时间：2013-01-06T15:19:32.733
> 
> 标签：c#

我尝试使用模板方法（foo1）中的方法（foo2），编译器说他不知道属于该类（T）的这个方法（foo2）。

什么是正确的语法，哪个编译器接受它？

```
private void foo1<T>(T instance)
{
    instance.foo2();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T15:24:18.227

您应该像下面的代码片段一样对泛型类型创建约束：

```
private void foo1<T>(T instance) where T : IFoo
{ 
    instance.foo2(); 
}

interface IFoo
{
    void foo2();
} 
```

其中定义，[封闭的泛型类型](https://stackoverflow.com/questions/2173107/what-exactly-is-an-open-generic-type-in-net)只能从`IFoo`接口派生。但是你为什么不坚持使用下面给出的非通用版本呢？

```
private void foo1(IFoo instance) 
{ 
    instance.foo2(); 
}

interface IFoo
{
    void foo2();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T15:22:34.173

您正在使用对泛型类型没有任何约束的泛型方法。

这意味着它可以是*任何*对象。编译器抱怨是因为大多数对象没有`foo2`方法。

`foo2()`如果您希望能够在泛型参数上调用该方法，则需要将泛型类型约束为具有方法的类型。

或者，不要使用泛型，而是传入已`foo2`定义的抽象类型。

# java - 如果第一个坐标为 0,0，则paint方法在 jFrame 之外绘制

> ID：14183529
> 
> 赞同：4
> 
> 时间：2013-01-06T15:19:37.970
> 
> 标签：java, swing, jframe, paintcomponent

在这种情况下，第一个坐标应该是 0,0 而不是 8,30。我在做什么错（我正在使用 NetBeans）

![](../Images/4f7a5e4df00eebf0a2921e1e6128d2f3.png)

```
import java.awt.Color;
import java.awt.Graphics;
public class TEST extends javax.swing.JFrame {

@Override
public void paint(Graphics g){
    super.paint(g);
    g.setColor(Color.blue);
    g.drawRect(8, 30, 200, 200);
    repaint();
}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T15:24:51.313

在框架中添加一个`JPanel`并在其中绘画。框架的坐标包括装饰（标题栏、边框等）。它看起来像这样：

```
public class Test extends JFrame {
    public static void main(String[] args) {
        new Test();
    }
    private Test() {
        add(new MyPanel());
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(600, 600);
        setVisible(true);
    }
    private class MyPanel extends JPanel {
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(Color.blue);
            g.drawRect(8, 30, 200, 200);
        }
    }
} 
```

另外，不要打电话`repaint();`。`paint();`这将导致无限循环并冻结整个程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T16:09:25.883

问题是您的`paint(..)`方法没有考虑到`JFrame` `Insets`by 调用`getInsets`which as [docs state](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#getInsets%28%29)：

> 如果已在此组件上设置了边框，则返回边框的插图。

此代码工作正常：

```
import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        createAndShowGui();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void createAndShowGui() {
        JFrame frame = new JFrame() {
            @Override
            public void paint(Graphics g) {
                super.paint(g);
                g.setColor(Color.blue);
                g.drawRect(0 + getInsets().left, 0 + getInsets().top, 200, 200);
            }
        };
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.pack();
        frame.setVisible(true);
    }
} 
```

但这不是最佳做法。

而是添加`JPanel`和`JFrame`覆盖不要忘记调用作为被覆盖方法中`paintComponent(Graphics g)`的第一次调用，而不是在那里绘制（不要忘记覆盖并返回正确的 s，以便适合其绘图/图形内容）这个问题将不再存在，因为添加在*contentPane*上的正确坐标如下：`JPanel``super.paintComponent(g)``getPreferredSize()``Dimension``JPanel``JPanel`

 *```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        createAndShowGui();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void createAndShowGui() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel() {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                Graphics2D g2d = (Graphics2D) g;
                g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
                g2d.setColor(Color.blue);
                g2d.drawRect(0, 0, 200, 200);
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 300);
            }
        };

        frame.add(panel);

        frame.pack();
        frame.setVisible(true);
    }
} 
```

以上包括`Graphics2D`和RenderingHints 即抗锯齿。只是为了一些更好看的图纸:)*

# python - 带有 cython 的 numpy 数组

> ID：14183533
> 
> 赞同：7
> 
> 时间：2013-01-06T15:19:49.537
> 
> 标签：python, numpy, cython

我正在尝试将一些 python 代码移植到 cython，但遇到了一些小问题。

下面您会看到代码的代码片段（简化示例）。

```
cimport numpy as np
cimport cython
@cython.boundscheck(False) # turn of bounds-checking for entire function
@cython.wraparound(False)
@cython.nonecheck(False)
def Interpolation(cells, int nmbcellsx):
    cdef np.ndarray[float,ndim=1] celle
    cdef int cellnonzero
    cdef int i,l
    for i in range(nmbcellsx):
          celle = cells[i].e
          cellnonzero = cells[i].nonzero
          for l in range(cellnonzero):
               celle[l] = celle[l] * celle[l] 
```

我不明白为什么最里面的循环没有完全转换为 C 代码（即最后一行，celle[l] = ...），请参阅以下输出`cython -a feedback`：

![在此处输入图像描述](../Images/37a0396aabe8200df2f7c222ffd58ca9.png)

我在这里想念什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:47:29.250

我终于意识到，在函数的最后一个简单的“返回 0”可以解决这个问题。但是，这种行为对我来说似乎很奇怪。这实际上是一个错误吗？

# mysql - Liquibase 将错误的 baseTableSchemaName 放入 addForeignKeyConstraint

> ID：14183540
> 
> 赞同：1
> 
> 时间：2013-01-06T15:20:54.653
> 
> 标签：mysql, liquibase

我有两个具有相同用户名和密码的数据库，我想生成 SQL 指令以将第一个数据库（skryb）升级到第二个（skryb1）：

```
call liquibase --driver=com.mysql.jdbc.Driver ^
      --classpath=../lib/mysql-connector-java-5.1.20-bin.jar ^
      --url="jdbc:mysql://localhost:3306/skryb" ^
      --username=skryb ^
      --password=skryb ^
      --referenceUrl="jdbc:mysql://localhost:3306/skryb1" ^
      --referenceUsername=skryb ^
      --referencePassword=skryb ^
      --changeLogFile=1.xml ^
      diffChangeLog 

call liquibase --driver=com.mysql.jdbc.Driver ^
      --classpath=../lib/mysql-connector-java-5.1.20-bin.jar ^
      --url="jdbc:mysql://localhost:3306/skryb" ^
      --username=skryb ^
      --password=skryb ^
      --changeLogFile=1.xml ^
      updateSQL > 1.sql 
```

在 1.xml 里面有一个生成的 xml 标签：

```
<changeSet author="steve (generated)" id="1357484117018-4">
    <addForeignKeyConstraint baseColumnNames="messageDetails_id" baseTableName="messageline" baseTableSchemaName="skryb1" constraintName="FK2F5B707BF7C835B8" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="messagedetails" referencedTableSchemaName="skryb1" referencesUniqueColumn="false"/>
</changeSet> 
```

为什么 baseTableSchemaName 和 referencedTableSchemaName 在这里是一样的？生成的 SQL 也是错误的：

```
ALTER TABLE `skryb1`.`messageline` ADD CONSTRAINT `FK2F5B707BF7C835B8` FOREIGN KEY (`messageDetails_id`) REFERENCES `skryb1`.`messagedetails` (`id`) ON UPDATE NO ACTION ON DELETE NO ACTION; 
```

（我不想更新skryb1，我想更新skryb。其余的sql指令不引用skryb1。）

# python - 如果它们具有相同的名称，为什么 python 会找到模块而不是包？

> ID：14183541
> 
> 赞同：10
> 
> 时间：2013-01-06T15:21:05.073
> 
> 标签：python, import, module, package, sys.path

这是我的目录结构：

```
/home/dmugtasimov/tmp/name-res
    root
        tests
            __init__.py
            test_1.py
        __init__.py
        classes.py
        extra.py
        root.py 
```

文件内容： **root/tests/_ *init* _.py**

```
import os, sys
ROOT_DIRECTORY = os.path.abspath(os.path.join(os.path.dirname(__file__),
                                             '../..'))
if not sys.path or ROOT_DIRECTORY not in sys.path:
    sys.path.insert(0, ROOT_DIRECTORY)
# These imports are required for unittest to find test modules in package properly
from root.tests import test_1 
```

**根/测试/test_1.py**

```
import unittest
from root.classes import Class1
class Tests(unittest.TestCase):
    pass 
```

**root/_ *init* _.py** - 空的
**root/classes.py**

```
import os, sys
ROOT_DIRECTORY = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
if not sys.path or ROOT_DIRECTORY not in sys.path:
    sys.path.insert(0, ROOT_DIRECTORY)

print 'sys.path:', sys.path
print 'BEFORE: import root.extra'
import root.extra
print 'AFTER: import root.extra'

class Class1(object):
    pass

class Class2(object):
    pass 
```

**根/extra.py**

```
class Class3(object):
    pass 
```

**根/根.py**

```
import os
import sys
ROOT_DIRECTORY = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
if not sys.path or ROOT_DIRECTORY not in sys.path:
    sys.path.insert(0, ROOT_DIRECTORY)
from classes import Class2 
```

* * *

我得到以下输出：

```
$ python -m unittest tests.test_1
sys.path: ['/home/dmugtasimov/tmp/name-res', '', '/usr/local/lib/python2.7/dist-packages/tornado-2.3-py2.7.egg', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info', '/usr/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages/PIL', '/usr/lib/python2.7/dist-packages/gst-0.10', '/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/python2.7/dist-packages/ubuntu-sso-client']
BEFORE: import root.extra
sys.path: ['/home/dmugtasimov/tmp/name-res', '', '/usr/local/lib/python2.7/dist-packages/tornado-2.3-py2.7.egg', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info', '/usr/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages/PIL', '/usr/lib/python2.7/dist-packages/gst-0.10', '/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/python2.7/dist-packages/ubuntu-sso-client']
BEFORE: import root.extra
Traceback (most recent call last):
 File "/usr/lib/python2.7/runpy.py", line 162, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
 File "/usr/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
 File "/usr/lib/python2.7/unittest/__main__.py", line 12, in <module>
    main(module=None)
 File "/usr/lib/python2.7/unittest/main.py", line 94, in __init__
    self.parseArgs(argv)
 File "/usr/lib/python2.7/unittest/main.py", line 149, in parseArgs
    self.createTests()
 File "/usr/lib/python2.7/unittest/main.py", line 158, in createTests
    self.module)
 File "/usr/lib/python2.7/unittest/loader.py", line 128, in loadTestsFromNames
    suites = [self.loadTestsFromName(name, module) for name in names]
 File "/usr/lib/python2.7/unittest/loader.py", line 91, in loadTestsFromName
    module = __import__('.'.join(parts_copy))
 File "tests/__init__.py", line 9, in <module>
    from root.tests import test_1
 File "/home/dmugtasimov/tmp/name-res/root/tests/__init__.py", line 9, in <module>
    from root.tests import test_1
 File "/home/dmugtasimov/tmp/name-res/root/tests/test_1.py", line 3, in <module>
    from root.classes import Class1
 File "/home/dmugtasimov/tmp/name-res/root/classes.py", line 9, in <module>
    import root.extra
 File "/home/dmugtasimov/tmp/name-res/root/root.py", line 6, in <module>
    from classes import Class2
ImportError: cannot import name Class2 
```

原来问题是python解释器用来搜索包或模块的顺序：

```
$ python -vv -m unittest tests.test_1
…skipped...
import root.classes # precompiled from /home/dmugtasimov/tmp/name-res/root/classes.pyc
sys.path: ['/home/dmugtasimov/tmp/name-res', '', '/usr/local/lib/python2.7/dist-packages/tornado-2.3-py2.7.egg', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info', '/usr/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages/PIL', '/usr/lib/python2.7/dist-packages/gst-0.10', '/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/python2.7/dist-packages/ubuntu-sso-client']
BEFORE: import root.extra
# trying /home/dmugtasimov/tmp/name-res/root/root.so
# trying /home/dmugtasimov/tmp/name-res/root/rootmodule.so
# trying /home/dmugtasimov/tmp/name-res/root/root.py
# /home/dmugtasimov/tmp/name-res/root/root.pyc matches /home/dmugtasimov/tmp/name-res/root/root.py
…skipped... 
```

* * *

根据 python 文档[http://docs.python.org/2/tutorial/modules.html#the-module-search-path](http://docs.python.org/2/tutorial/modules.html#the-module-search-path)：“当一个名为 spam 的模块被导入时，解释器首先搜索一个内置模块那个名字。如果没有找到，它会在变量 sys.path 给出的目录列表中搜索名为 spam.py 的文件。”</p>

这意味着 python 应该查看 sys.path 索引 0 条目，获取路径 '/home/dmugtasimov/tmp/name-res' 并找到名为 root 的包，然后在此包中搜索名为 extra 的模块。但它会在 /home/dmugtasimov/tmp/name-res/root/ 目录中搜索模块根目录，然后尝试在其中找到名为 extra 的内容。它会发生什么？它不与官方文件相矛盾吗？还是搜索包的规则与搜索模块的规则不同？如果是这样，这些规则是否包含在文档中的某个地方？

## **更新**

我把它放在这里是为了更好的格式。
为了进一步调查，请执行以下操作：

1.  删除 root.pyc
2.  将 root.py 重命名为 root2.py
3.  运行 python -vv -m unittest tests.test_1

> ```
> # trying /home/dmugtasimov/tmp/name-res/root/root.so
> # trying /home/dmugtasimov/tmp/name-res/root/rootmodule.so
> # trying /home/dmugtasimov/tmp/name-res/root/root.py
> # trying /home/dmugtasimov/tmp/name-res/root/root.pyc
> # trying /home/dmugtasimov/tmp/name-res/root/extra.so
> # trying /home/dmugtasimov/tmp/name-res/root/extramodule.so
> # trying /home/dmugtasimov/tmp/name-res/root/extra.py 
> ```

似乎 python 仅在最初的 4 次尝试中忽略 sys.path。

## **更新 2**

简化版：

```
/home/dmugtasimov/tmp/name-res3/xyz
    __init__.py
    a.py
    b.py
    t.py
    xyz.py 
```

文件**init** .py、b.py 和 xyz.py 为空
文件 a.py：

```
import os, sys
ROOT_DIRECTORY = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
if not sys.path or ROOT_DIRECTORY not in sys.path:
    print 'sys.path is modified in a.py'
    sys.path.insert(0, ROOT_DIRECTORY)
else:
    print 'sys.path is NOT modified in a.py'

print 'sys.path:', sys.path
print 'BEFORE import xyz.b'
import xyz.b
print 'AFTER import xyz.b' 
```

文件 t.py：

```
import os, sys
ROOT_DIRECTORY = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
if not sys.path or ROOT_DIRECTORY not in sys.path:
    print 'sys.path is modified in t.py'
    sys.path.insert(0, ROOT_DIRECTORY)
else:
    print 'sys.path is NOT modified in t.py'

import xyz.a 
```

跑：

```
python a.py 
```

输出：

> ```
> sys.path is modified in a.py
> sys.path: ['/home/dmugtasimov/tmp/name-res3', '/home/dmugtasimov/tmp/name-res3/xyz',
>  '/usr/local/lib/python2.7/dist-packages/tornado-2.3-py2.7.egg',
>  '/home/dmugtasimov/tmp/name-res3/xyz', '/usr/lib/python2.7',
>  '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk',
>  '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload',
>  '/usr/local/lib/python2.7/dist-packages',
>  '/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info',
>  '/usr/lib/python2.7/dist-packages',
>  '/usr/lib/python2.7/dist-packages/PIL',
>  '/usr/lib/python2.7/dist-packages/gst-0.10',
>  '/usr/lib/python2.7/dist-packages/gtk-2.0',
>  '/usr/lib/python2.7/dist-packages/ubuntu-sso-client']
> BEFORE import xyz.b
> AFTER import xyz.b 
> ```

跑：

```
python -vv a.py 
```

输出：

> ```
> import xyz # directory /home/dmugtasimov/tmp/name-res3/xyz
> # trying /home/dmugtasimov/tmp/name-res3/xyz/__init__.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/__init__module.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/__init__.py
> # /home/dmugtasimov/tmp/name-res3/xyz/__init__.pyc matches /home/dmugtasimov/tmp/name-res3/xyz/__init__.py
> import xyz # precompiled from /home/dmugtasimov/tmp/name-res3/xyz/__init__.pyc
> # trying /home/dmugtasimov/tmp/name-res3/xyz/b.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/bmodule.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/b.py
> # /home/dmugtasimov/tmp/name-res3/xyz/b.pyc matches /home/dmugtasimov/tmp/name-res3/xyz/b.py
> import xyz.b # precompiled from /home/dmugtasimov/tmp/name-res3/xyz/b.pyc 
> ```

跑：

```
python t.py 
```

输出：

> ```
> sys.path is modified in t.py
> sys.path is NOT modified in a.py
> sys.path: ['/home/dmugtasimov/tmp/name-res3', '/home/dmugtasimov/tmp/name-res3/xyz',
>  '/usr/local/lib/python2.7/dist-packages/tornado-2.3-py2.7.egg',
>  '/home/dmugtasimov/tmp/name-res3/xyz', '/usr/lib/python2.7',
>  '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk',
>  '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload',
>  '/usr/local/lib/python2.7/dist-packages',
>  '/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info',
>  '/usr/lib/python2.7/dist-packages',
>  '/usr/lib/python2.7/dist-packages/PIL',
>  '/usr/lib/python2.7/dist-packages/gst-0.10',
>  '/usr/lib/python2.7/dist-packages/gtk-2.0',
>  '/usr/lib/python2.7/dist-packages/ubuntu-sso-client']
> BEFORE import xyz.b
> Traceback (most recent call last):
>   File "t.py", line 9, in <module>
>     import xyz.a
>   File "/home/dmugtasimov/tmp/name-res3/xyz/a.py", line 11, in <module>
>     import xyz.b
> ImportError: No module named b 
> ```

跑：

```
python -vv t.py 
```

输出：

> ```
> import xyz # directory /home/dmugtasimov/tmp/name-res3/xyz
> # trying /home/dmugtasimov/tmp/name-res3/xyz/__init__.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/__init__module.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/__init__.py
> # /home/dmugtasimov/tmp/name-res3/xyz/__init__.pyc matches /home/dmugtasimov/tmp/name-res3/xyz/__init__.py
> import xyz # precompiled from /home/dmugtasimov/tmp/name-res3/xyz/__init__.pyc
> # trying /home/dmugtasimov/tmp/name-res3/xyz/a.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/amodule.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/a.py
> # /home/dmugtasimov/tmp/name-res3/xyz/a.pyc matches /home/dmugtasimov/tmp/name-res3/xyz/a.py
> import xyz.a # precompiled from /home/dmugtasimov/tmp/name-res3/xyz/a.pyc
> # trying /home/dmugtasimov/tmp/name-res3/xyz/os.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/osmodule.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/os.py
> # trying /home/dmugtasimov/tmp/name-res3/xyz/os.pyc
> # trying /home/dmugtasimov/tmp/name-res3/xyz/sys.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/sysmodule.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/sys.py
> # trying /home/dmugtasimov/tmp/name-res3/xyz/sys.pyc
> # trying /home/dmugtasimov/tmp/name-res3/xyz/xyz.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/xyzmodule.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/xyz.py
> # /home/dmugtasimov/tmp/name-res3/xyz/xyz.pyc matches /home/dmugtasimov/tmp/name-res3/xyz/xyz.py
> import xyz.xyz # precompiled from /home/dmugtasimov/tmp/name-res3/xyz/xyz.pyc
> #   clear[2] __file__
> #   clear[2] __package__
> #   clear[2] sys
> #   clear[2] ROOT_DIRECTORY
> #   clear[2] __name__
> #   clear[2] os
> sys.path is modified in t.py
> sys.path is NOT modified in a.py
> sys.path: ['/home/dmugtasimov/tmp/name-res3', '/home/dmugtasimov/tmp/name-res3/xyz',
>  '/usr/local/lib/python2.7/dist-packages/tornado-2.3-py2.7.egg',
>  '/home/dmugtasimov/tmp/name-res3/xyz', '/usr/lib/python2.7',
>  '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk',
>  '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload',
>  '/usr/local/lib/python2.7/dist-packages',
>  '/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info',
>  '/usr/lib/python2.7/dist-packages',
>  '/usr/lib/python2.7/dist-packages/PIL',
>  '/usr/lib/python2.7/dist-packages/gst-0.10',
>  '/usr/lib/python2.7/dist-packages/gtk-2.0',
>  '/usr/lib/python2.7/dist-packages/ubuntu-sso-client']
> BEFORE import xyz.b
> Traceback (most recent call last):
>   File "t.py", line 9, in <module>
>     import xyz.a
>   File "/home/dmugtasimov/tmp/name-res3/xyz/a.py", line 11, in <module>
>     import xyz.b
> ImportError: No module named b 
> ```

如您所见，两种情况下 sys.path 是相同的：

```
sys.path: ['/home/dmugtasimov/tmp/name-res3', '/home/dmugtasimov/tmp/name-res3/xyz', '/usr/local/lib/python2.7/dist-packages/tornado-2.3-py2.7.egg', '/home/dmugtasimov/tmp/name-res3/xyz', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info', '/usr/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages/PIL', '/usr/lib/python2.7/dist-packages/gst-0.10', '/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/python2.7/dist-packages/ubuntu-sso-client'] 
```

但行为不同。对于 a.py，python 首先搜索包 xyz，然后搜索其中的模块 b：

> ```
> import xyz # directory /home/dmugtasimov/tmp/name-res3/xyz
> # trying /home/dmugtasimov/tmp/name-res3/xyz/__init__.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/__init__module.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/__init__.py
> # /home/dmugtasimov/tmp/name-res3/xyz/__init__.pyc matches /home/dmugtasimov/tmp/name-res3/xyz/__init__.py
> import xyz # precompiled from /home/dmugtasimov/tmp/name-res3/xyz/__init__.pyc
> # trying /home/dmugtasimov/tmp/name-res3/xyz/b.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/bmodule.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/b.py
> # /home/dmugtasimov/tmp/name-res3/xyz/b.pyc matches /home/dmugtasimov/tmp/name-res3/xyz/b.py
> import xyz.b # precompiled from /home/dmugtasimov/tmp/name-res3/xyz/b.pyc 
> ```

换句话说：

1.  在目录 sys.path[0] -> FOUND 中搜索 PACKAGE xyz
2.  在 PACKAGE xyz -> FOUND 中搜索模块 b
3.  继续执行

对于 t.py，它在与 a.py 本身相同的目录中搜索模块 xyz，然后在模块 xyz 中找不到模块 b：

> ```
> # trying /home/dmugtasimov/tmp/name-res3/xyz/xyz.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/xyzmodule.so
> # trying /home/dmugtasimov/tmp/name-res3/xyz/xyz.py
> # /home/dmugtasimov/tmp/name-res3/xyz/xyz.pyc matches /home/dmugtasimov/tmp/name-res3/xyz/xyz.py
> import xyz.xyz # precompiled from /home/dmugtasimov/tmp/name-res3/xyz/xyz.pyc 
> ```

换句话说：

1.  在与 a.py（或 sys.path[1] ？）相同的目录中搜索 MODULE xyz -> FOUND
2.  在 MODULE xyz 中搜索 MODULE b -> 未找到
3.  导入错误

因此，看起来“import xyz.b”是否会有所不同，具体取决于 a.py 最初是如何作为脚本加载或从另一个模块导入的。

## **更新 3**

我提交了文档修复提案：http: [//bugs.python.org/issue16891](http://bugs.python.org/issue16891)

## **更新 4**

UPDATE 2 中描述的行为原因现在对我来说完全清楚了。

[http://docs.python.org/2/tutorial/modules.html#intra-package-references](http://docs.python.org/2/tutorial/modules.html#intra-package-references)

> 6.4.2\. 包内引用
> 
> 子模块通常需要相互引用。例如，环绕模块可能使用回声模块。事实上，这种引用非常普遍，以至于 import 语句首先在包含包中查找，然后再查找标准模块搜索路径。因此，环绕模块可以简单地使用 import echo 或 from echo import echofilter。如果在当前包（当前模块是其子模块的包）中找不到导入的模块，则导入语句会查找具有给定名称的顶级模块。

对于“python a.py”，“a”不被视为包中的模块，但对于“python t.py”，“a”被视为包“xyz”中的模块。因此，在第一种情况下，它根据 sys.path 搜索，但在第二种情况下，它在同一个包（即“xyz”）中搜索名为“xyz”的模块（换句话说，“xyz.xyz”）

您可以轻松查看是否像这样更改 a.py：

文件 a.py：

```
import os, sys
ROOT_DIRECTORY = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
if not sys.path or ROOT_DIRECTORY not in sys.path:
    print 'sys.path is modified in a.py'
    sys.path.insert(0, ROOT_DIRECTORY)
else:
    print 'sys.path is NOT modified in a.py'

print 'sys.path:', sys.path
print '__package__', __package__
print 'BEFORE import xyz.b'
import xyz.b
print 'AFTER import xyz.b' 
```

我的输出是：

> ```
> ~/tmp/name-res3/xyz $ python a.py
> sys.path is modified in a.py
> sys.path: ['/home/dmugtasimov/tmp/name-res3', '/home/dmugtasimov/tmp/name-res3/xyz',
>  '/usr/local/lib/python2.7/dist-packages/tornado-2.3-py2.7.egg',
>  '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2',
>  '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old',
>  '/usr/lib/python2.7/lib-dynload',
>  '/usr/local/lib/python2.7/dist-packages',
>  '/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info',
>  '/usr/lib/python2.7/dist-packages',
>  '/usr/lib/python2.7/dist-packages/PIL',
>  '/usr/lib/python2.7/dist-packages/gst-0.10',
>  '/usr/lib/python2.7/dist-packages/gtk-2.0',
>  '/usr/lib/python2.7/dist-packages/ubuntu-sso-client']
> __package__ None
> BEFORE import xyz.b
> AFTER import xyz.b
> ~/tmp/name-res3/xyz $ python t.py
> sys.path is modified in t.py
> sys.path is NOT modified in a.py
> sys.path: ['/home/dmugtasimov/tmp/name-res3', '/home/dmugtasimov/tmp/name-res3/xyz',
>  '/usr/local/lib/python2.7/dist-packages/tornado-2.3-py2.7.egg',
>  '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2',
>  '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old',
>  '/usr/lib/python2.7/lib-dynload',
>  '/usr/local/lib/python2.7/dist-packages',
>  '/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info',
>  '/usr/lib/python2.7/dist-packages',
>  '/usr/lib/python2.7/dist-packages/PIL',
>  '/usr/lib/python2.7/dist-packages/gst-0.10',
>  '/usr/lib/python2.7/dist-packages/gtk-2.0',
>  '/usr/lib/python2.7/dist-packages/ubuntu-sso-client']
> __package__ xyz
> BEFORE import xyz.b
> Traceback (most recent call last):
>   File "t.py", line 9, in <module>
>     import xyz.a
>   File "/home/dmugtasimov/tmp/name-res3/xyz/a.py", line 12, in <module>
>     import xyz.b
> ImportError: No module named b 
> ```

感谢@JF Sebastian 指出正确的文档位置。

## **更新 5**

似乎还有另一个问题。如果有兴趣，请在此处关注评论：http: [//bugs.python.org/issue16891](http://bugs.python.org/issue16891)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T22:36:39.360

我简化了问题中的示例，以证明只有**四种解决方案**是可能的：

*   显式相对导入`from . import some_module`或更多逗号`from ..`
*   相对导入（如果在包“xyz”中使用，则不带“xyz”）
*   绝对导入使用`from __future__ import absolute_import`（或使用 Python 3）
*   切勿在其中的任何路径中重复包的顶级可导入名称。

什么解决方案是最好的？这取决于个人对 Python 2 或 3 的偏好。只有最后一个对所有 Python 都很好且通用。这真是一个有用的问题。

* * *

**xyz/tests/__init__.py**：`import xyz.tests.t`

**xyz/测试/t.py**：

```
import sys
print('sys.path = %s' % sys.path) # see that the parent of "xyz" is on sys.path
print("importing xyz.tests")
import xyz.a 
```

**xyz/a.py：**

```
# solution A: absolute_import by __future__  (or use Python 3)
#from __future__ import absolute_import
print("importing xyz.a")
# solution B: explicit relative import
#from . import b    # and remove "import xyz.b"
# solution C: relative import (not recommended)
#import b           # and remove "import xyz.b"
import xyz.b 
```

**xyz/b.py**：`print("imported xyz.b")`

**xyz/xyz.py**：`print("Imported xyz.xyz !!!")`

**xyz/__init__.py** : 空文件

* * *

一切可能的失败，例如

```
parent_of_xyz=...  # The parent directory of "xyz" - absolute path
cd $parent_of_xyz
python -m xyz.tests.t
PYTHONPATH=$parent_of_xyz/xyz python -m unittest tests
PYTHONPATH=$parent_of_xyz     python xyz/tests/t.py 
```

像这样的消息

```
Imported xyz.xyz  !!!
...
ImportError... 
```

**如果应用了任何解决方案（未注释），则所有三个示例都有效。**

它可以在不使用任何子目录的情况下更加简化。

**编辑：** 我昨天尝试了很多测试，但我从不同版本中不一致地编写了它。对不起，答案无法重现。现在它是**固定**的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T19:53:12.473

当相同的模块以不同的名称可用时，不要修改`sys.path`它会导致问题。见[陷阱为粗心](http://www.python.org/dev/peps/pep-0395/#traps-for-the-unwary)。

在代码中使用绝对或显式相对导入并从项目目录运行脚本。使用全名运行测试：

```
$ python -munittest root.tests.test_1 
```

一些包确实在`sys.path`内部进行了修改，例如，查看如何`twisted`使用[`_preamble.py`](https://github.com/powdahound/twisted/blob/master/bin/_preamble.py)或 pypy 的[`autopath.py`](https://bitbucket.org/pypy/pypy/src/a299cd0a893f/pypy/tool/autopath.py?at=default). 您可以决定它们的缺点（引入晦涩的导入问题）是否值得（允许运行脚本的更多方式）。避免修改`sys.path`用作库的代码，即，将其限制为测试模块和命令行脚本。

# python - 如何在python中使用没有参数的方法？

> ID：14183545
> 
> 赞同：2
> 
> 时间：2013-01-06T15:21:44.940
> 
> 标签：python, python-2.7

如果我这样定义一个类`a`和一个方法`b`：（在 Python2.7 中）

```
class a:
    def b():
        print("hello") 
```

我也不能调用这个方法

```
 a.b() 
```

也不：

```
a_instance = a(); a_instance.b() 
```

我的问题是：

（1）有没有办法调用b？

(2) 有没有这种用法有意义的情况？

(3) 我认为 b 既不是 a`static method`也不是 a `instance method`。是`b`一个`class method`？如果不是，应该命名`b`为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:24:34.013

`b`是一种静态方法。只需添加`@staticmethod`装饰器。

```
class a:
    @staticmethod
    def b():
        print("hello") 
```

此外，你不应该真的这样做，但如果你想在`b()`不改变班级的情况下打电话，你可以这样做`a().b.__func__()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T15:25:40.643

或[`classmethod`](http://docs.python.org/3/library/functions.html#classmethod)将类对象作为第一个实例的装饰器。

> 有没有办法调用b？

是的，您可以将其设为静态方法或实例方法并相应地调用它。下面我将其设为静态方法，因此您可以在任何实例上或直接在类对象上调用它`a`

```
class a:
    @classmethod
    def b(cls):
        print("hello")

a.b() #'hello' 
```

> 有没有这种用法有意义的情况？

有什么用途？静态方法？是的，这取决于您的架构。类方法可以用作工厂函数吗？返回类的新实例。

> 我认为 b 既不是静态方法也不是实例方法。是ba类方法吗？如果不是，应该将什么命名为b？

我也认为不是。我相信它只是在类体内定义的一个函数

我对在类中定义一个函数感到困惑，并[在这里问了一个类似的问题](https://stackoverflow.com/questions/11600716/assigning-class-variable-dynamic-value-from-inside-a-classs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:54:47.153

以防万一这不明显：

```
class a:
   def b(self):   # a normal "instance method" -- note "self"
       print("hello")

aa = a()   #  an instance

aa.b()     # call with no parameters 
```

在这里，`b`没有参数，因为`self`在类的实例上调用时是隐含的。

# c++ - 为什么 int*[] 衰减为 int** 而不是 int[][]？

> ID：14183546
> 
> 赞同：34
> 
> 时间：2013-01-06T15:21:53.020
> 
> 标签：c++

我试图了解类型衰减的本质。例如，我们都知道数组在特定上下文中衰减为指针。我的尝试是了解二维数组如何`int[]`等同于但如何与预期的指针类型不对应。`int*`这是一个测试用例：

```
std::is_same<int*, std::decay<int[]>::type>::value; // true 
```

这会按预期返回 true ，但这不会：

```
std::is_same<int**, std::decay<int[][1]>::type>::value; // false 
```

为什么这不是真的？我终于找到了一种让它返回 true 的方法，那就是将第一个维度设为指针：

```
std::is_same<int**, std::decay<int*[]>::type>::value; // true 
```

并且该断言适用于任何具有指针但最后一个是数组的类型。例如 ( `int***[] == int****; // true`)。

我可以解释为什么会这样吗？为什么数组类型与预期的指针类型不对应？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-06T15:22:49.757

> 为什么会`int*[]`衰变成`int**`而不是`int[][]`？

因为用它做指针运算是不可能的。

例如，`int p[5][4]`表示（长度为 4 的数组`int`）的数组。不涉及指针，它只是一个连续的 size 内存块`5*4*sizeof(int)`。当您要求特定元素时，例如`int a = p[i][j]`，编译器实际上是这样做的：

```
char *tmp = (char *)p           // Work in units of bytes (char)
          + i * sizeof(int[4])  // Offset for outer dimension (int[4] is a type)
          + j * sizeof(int);    // Offset for inner dimension
int a = *(int *)tmp;            // Back to the contained type, and dereference 
```

显然，它只能这样做，因为它知道“内部”维度的大小。转换为`int (*)[4]`保留此信息；它是一个指向（长度为 4 的数组`int`）的指针。但是， an`int **` *不会*；它只是一个指向（指向`int`）的指针。

有关此问题的另一种看法，请参阅 C 常见问题解答的以下部分：

*   [*6.18：当我将一个二维数组传递给一个需要指向指针的函数时，我的编译器报错了。*](http://c-faq.com/aryptr/pass2dary.html)
*   [*6.19: 在编译时宽度未知的情况下，如何编写接受二维数组的函数？*](http://c-faq.com/aryptr/ary2dfunc2.html)
*   [*6.20: 将静态和动态分配的多维数组传递给函数时，如何互换使用它们？*](http://c-faq.com/aryptr/ary2dfunc3.html)

（这都是针对 C 的，但这种行为在 C++ 中基本不变。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-06T17:37:07.053

C 并不是真正“设计”为一种语言；取而代之的是，根据需要添加功能，努力不破坏早期的代码。在开发 C 语言的时代，这种进化方法是一件好事，因为这意味着在大多数情况下，开发人员可以在语言可能需要做的所有事情都完成之前获得早期改进的好处。不幸的是，数组和指针处理的发展方式导致了各种规则，回想起来，这些规则很不幸。

在今天的 C 语言中，有一个相当丰富的类型系统，并且变量具有明确定义的类型，但事情并非总是如此。声明`char arr[8]`；将在当前范围内分配 8 个字节，并`arr`指向其中的第一个。编译器不会知道它`arr`代表一个数组——它会代表一个 char 指针，就像任何其他`char*`. 据我了解，如果有人声明`char arr1[8], arr2[8];`了 ，那么该声明`arr1 = arr2;`将是完全合法的，在概念上有点等同于`char *st1 = "foo, *st2 = "bar"; st1 = st2;`，但几乎总是代表一个错误。

数组分解为指针的规则源于数组和指针实际上是同一事物的时代。从那时起，数组已经被认为是一种独特的类型，但是这种语言需要在本质上与它们不兼容的日子保持兼容。在制定规则时，应该如何处理二维数组的问题不是问题，因为没有这样的东西。人们可以做类似的事情`char foo[20]; char *bar[4]; int i; for (i=0; i<4; i++) bar[i] = foo + (i*5);`，然后`bar[x][y]`以与现在使用二维数组相同的方式使用，但编译器不会以这种方式看待事物——它只是将`bar`其视为指向指针的指针。如果想让 foo[1] 指向与 foo[2] 完全不同的某个地方，那么完全可以合法地这样做。

当两个二维数组被添加到 C 中时，没有必要保持与早期声明二维数组的代码的兼容性，因为没有。虽然可以指定`char bar[4][5];`生成与使用 显示的代码等效的代码`foo[20]`，在这种情况下 a`char[][]`可以用作 a `char**`，但人们认为就像分配数组变量一样，在 99% 的情况下都是错误的，如果这是合法的，那么数组行的重新分配也是如此。因此，C 中的数组被认为是不同的类型，它们自己的规则有点奇怪，但它们就是这样。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-06T15:24:35.457

因为`int[M][N]`和`int**`是不兼容的类型。

但是，`int[M][N]`可以衰减成`int (*)[N]`类型。所以以下内容：

```
std::is_same<int(*)[1], std::decay<int[1][1]>::type>::value; 
```

应该给你`true`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-06T15:30:12.670

二维数组不存储为指向指针的指针，而是存储为连续的内存块。

声明为类型的对象`int[y][x]`是一个大小的块，`sizeof(int) * x * y`而类型的对象`int **`是指向`int*`

# android - Android：将对象从活动传递到服务

> ID：14183551
> 
> 赞同：4
> 
> 时间：2013-01-06T15:22:36.667
> 
> 标签：android, service, android-activity

我按照这个链接将[数据从活动传递到服务](http://android-coding.blogspot.it/2011/11/pass-data-from-activity-to-service-via.html)，以了解数据从活动到服务 Android 的传递。问题是我需要将一个复杂的对象传递给服务。我怎样才能完成这项任务？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T15:30:19.980

您可以使您的复杂对象实现`Serializable`or`Parcelable`然后您可以使用`putExtra(String name, Serializable value)`or将其传递给 Service`putExtra(String name, Parcelable value)`

[在这里](http://blog.logicexception.com/2012/09/a-parcelable-tutorial-for-android.html)你可以找到一个实施教程，`Parcelable`在[这里](http://www.vogella.com/articles/JavaSerialization/article.html) `Serializable`你可以找到一个。

如果您不熟悉其中任何一个，我建议您使用“Serializable”，因为它更简单且非常直接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T15:55:16.330

传入自定义对象有点复杂。您可以将类标记为 Serializable 并让 Java 来处理。但是，在 android 上，使用 Serializable 会严重影响性能。解决方案是使用 Parcelable。

参考例子：

[http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)

[http://prasanta-paul.blogspot.com/2010/06/android-parcelable-example.html](http://prasanta-paul.blogspot.com/2010/06/android-parcelable-example.html)

# javascript - 如何使用 ajax 和 python 使 d3.js 强制有向图交互？

> ID：14183555
> 
> 赞同：3
> 
> 时间：2013-01-06T15:23:06.560
> 
> 标签：javascript, python, ajax, d3.js, force-layout

我正在尝试在 d3.js 中创建一个力有向图交互式。我创建了显示它的 html，还编写了生成内容的 python 脚本。但我不能让它一起工作。

我可以从浏览器调用 python 脚本，它返回有效的 json 但我如何将它放入 d3？

不知何故，它总是调用带有结果附加 ( `*GET http://localhost/vici/[object%20Object] 404 (Not Found)*`) 的 url，但警报显示 python 脚本的结果。

这是我的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8>
    <script type="text/javascript" src="d3.v2.js?2.1.3"></script>
    <script src="jquery-1.8.3.js"></script>
    <style type="text/css">
        circle {
          stroke-width: 1.5px;
        }

        line {
          stroke: #999;
        }

        text {
          font: 10px sans-serif;
          pointer-events: none;
        }
    </style>
  </head>
  <body>
      <script type="text/javascript">

          $(document).ready(function() {

              $.ajax({
                  type: "GET",
                  url: "/vici/kellner.py/display",
                  contentType: "application/json; charset=utf-8",
                  dataType: "json",
                  data: {name: 302,level: 2}
              })

              .success(function(pyjson) {
              alert(pyjson);
              var data = pyjson;
                var w = 960,
                    h = 600,
                    r = 6;

                var svg = d3.select("#d3vis").append("svg:svg")
                    .attr("width", w)
                    .attr("height", h);

                d3.json(pyjson, function(json) {
                  var force = d3.layout.force()
                    .nodes(json.nodes)
                    .links(json.links)
                    .gravity(.02)
                    .distance(50)
                    .charge(-400)
                    .size([w, h])
                    .start();

                  var link = svg.selectAll("line.link")
                    .data(json.links)
                    .attr("class", "link")
                    .enter().append("svg:line");

                  var node = svg.selectAll(".node")
                    .data(json.nodes)
                    .enter().append("g")
                    .attr("class", "node")
                    .call(force.drag);

                  node.append("image")
                    .attr("xlink:href", function(d) { return d.avatar })
                    .attr("x", -8)
                    .attr("y", -8)
                    .attr("width", function(d) { return d.avatarWidth })
                    .attr("height", function(d) { return d.avatarHeight });

                  node.append("text")
                    .attr("dx", 12)
                    .attr("dy", ".70em")
                    .text(function(d) { return d.avatarName });

                  node.append("svg:title")
                    .text(function(d) { return d.author; }, function(d) { return d.institute; } );

                  force.on("tick", function() {
                    link.attr("x1", function(d) { return d.source.x; })
                        .attr("y1", function(d) { return d.source.y; })
                        .attr("x2", function(d) { return d.target.x; })
                        .attr("y2", function(d) { return d.target.y; });

                    node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
                  });

                });

              }); 
          });
    </script>

    <div id="d3vis"></div>
  </body>
</html> 
```

但不仅如此：单击节点后如何让 d3 重新加载？每个节点都有一个名称（“作者”：“某个名称”），我的 python 脚本可以搜索该名称并返回一个新结果。

我已经搜索了这个并发现了一些东西（例如[，从动态 json 数据更新力导向图上的链接](https://stackoverflow.com/questions/11400241/updating-links-on-a-force-directed-graph-from-dynamic-json-data)）看起来真的很好，我想要做什么，但我不明白，所以我不能修改它我的需要。（数据来自哪里，或者我可以在哪里调用我的 python 脚本来提供数据？）

我只需要将 json 放入 d3 并在单击节点时更改图形。

我是 Java Script 的新手，因此我们将不胜感激任何帮助。

编辑：这里还有一些测试数据：

```
{
"nodes": [
    {"institute": "None", "avatarWidth": "16", "avatar": "img/user.png", "avatarHeight": "16", "author": "Some Name"}, 
    {"institute": "None", "avatarWidth": "16", "avatar": "img/user.png", "avatarHeight": "16", "author": "Some Name"}, 
    {"institute": "None", "avatarWidth": "16", "avatar": "img/user.png", "avatarHeight": "16", "author": "Some Name"}, 
    {"author": "Main Name", "institute": "None", "avatarName": "Main Name", "avatar": "img/main.png", "avatarHeight": "24", "avatarWidth": "24"}, 
    {"institute": "None", "avatarWidth": "16", "avatar": "img/user.png", "avatarHeight": "16", "author": "Some Name"}
    ], 
"links": [
    {"color": "red", "source": 0, "target": 2, "weight": 1}, 
    {"color": "orange", "source": 1, "target": 2, "weight": 1}, 
    {"color": "yellow", "source": 2, "target": 3, "weight": 1}, 
    {"color": "yellow", "source": 2, "target": 4, "weight": 1}
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:54:30.680

好的，显然*d3.json(pyjson, function(json) {*行是“坏”行。这是 d3 试图发出自己的 ajax 请求吗？

无论如何，我删除了它，它现在似乎正在工作。此外，我单击一个节点重新加载的想法也不是很理想，因为您必须能够将它们拉动并且单击会阻止它。

这是我的功能代码以供将来参考：（以及其他有同样问题的人）

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8>
    <script type="text/javascript" src="d3.v2.js?2.1.3"></script>
    <script src="jquery-1.8.3.js"></script>
    <style type="text/css">
        circle {
          stroke-width: 1.5px;
        }

        line {
          stroke: #999;
        }

        text {
          font: 10px sans-serif;
          pointer-events: none;
        }
    </style>
  </head>
  <body>
      <script type="text/javascript">

          $(document).ready(function() {

              $.ajax({
                  type: "GET",
                  url: "/vici/kellner.py/display",
                  contentType: "application/json; charset=utf-8",
                  dataType: "json",
                  data: {name: 302,level: 2}
              })

              .done(function(pyjson) {

                var w = 960,
                    h = 600,
                    r = 6;

                var svg = d3.select("#d3vis").append("svg:svg")
                    .attr("width", w)
                    .attr("height", h);

                var force = d3.layout.force()
                  .nodes(pyjson.nodes)
                  .links(pyjson.links)
                  .gravity(.02)
                  .distance(50)
                  .charge(-400)
                  .size([w, h])
                  .start();

                var link = svg.selectAll("line.link")
                  .data(pyjson.links)
                  .attr("class", "link")
                  .enter().append("svg:line");

                var node = svg.selectAll(".node")
                  .data(pyjson.nodes)
                  .enter().append("g")
                  .attr("class", "node")
                  .call(force.drag);

                node.append("image")
                  .attr("xlink:href", function(d) { return d.avatar })
                  .attr("x", -8)
                  .attr("y", -8)
                  .attr("width", function(d) { return d.avatarWidth })
                  .attr("height", function(d) { return d.avatarHeight });

                node.append("text")
                  .attr("dx", 12)
                  .attr("dy", ".70em")
                  .text(function(d) { return d.avatarName });

                node.append("svg:title")
                  .text(function(d) { return d.author; }, function(d) { return d.institute; } );

                force.on("tick", function() {
                  link.attr("x1", function(d) { return d.source.x; })
                      .attr("y1", function(d) { return d.source.y; })
                      .attr("x2", function(d) { return d.target.x; })
                      .attr("y2", function(d) { return d.target.y; });

                  node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
                }); //End of force.on("tick", function() {

              }); //End of .done(function(pyjson) {
          }); //End of $(document).ready(function() {
    </script>

    <div id="d3vis"></div>
  </body>
</html> 
```

# zend-framework2 - 在 Zend Framework 2 会话中添加类似数组的数据

> ID：14183556
> 
> 赞同：0
> 
> 时间：2013-01-06T15:23:50.880
> 
> 标签：zend-framework2

我想知道如何实现以下目标：

我有一个工厂创建的这个会话容器：

```
 $container = new Container('Fans');
        $container->setExpirationSeconds('219867583');
        return $container; 
```

然后我在我的控制器中创建一个实例，如下所示：

```
$this->sessionService = $this->getServiceLocator()->get('SessionService'); 
```

现在我想在 Session 中添加一些东西：

这个工作正常：

```
$this->sessionService->team = 'TEST'; 
```

但我想要实现的是以下

```
$this->sessionService->team[0] = 'Team Name 0' // This doesn't work;
$this->sessionService->team[1] = 'Team Name 1' // This doesn't work;
\Zend\Debug\Debug::dump($this->sessionService->team); 
```

输出如下所示：

```
<pre>string(9) "TEST" </pre> 
```

我不知道我是否误解了什么或做错了什么。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:40:34.640

这是`__get()`PHP 中神奇功能的问题。因为`Zend\Session`用于`__get()`提供对会话变量的访问，所以您不能像访问数组一样访问它们。什么有效，如下：

```
$team = array();
$team[0] = 'Team Name 0';
$team[1] = 'Team Name 1';
$this->sessionService->team = $team; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:40:31.997

使用数组怎么样？

```
$teams = array();
$session->teams = $teams;
$session->teams[0] = 'blubb'; 
```

如果您首先将其指定为字符串，则它将保持为字符串。将其设为数组并将其用作数组；）

# php - 生成pdf文件后页面未重定向到控制器

> ID：14183561
> 
> 赞同：1
> 
> 时间：2013-01-06T15:24:30.400
> 
> 标签：php, codeigniter, dompdf

我使用 Codeigniter 作为 PHP 框架和 DOM PDF 来生成 pdf 文件。我的控制器中有以下代码。

```
 // Some other codes

 include_once('dompdf/dompdf_config.inc.php');
 $dompdf = new DOMPDF();
 $base_path = $_SERVER['DOCUMENT_ROOT'];
 $dompdf->load_html($html);
 $dompdf->render();
 $dompdf->stream("invoice_$studentid.pdf");

 redirect("my_Controller"); 
```

问题是在生成 pdf 文件后它没有重定向到控制器。你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:47:54.850

`$dompdf->stream`正在将 PDF 发送到浏览器。*您也*不能发送重定向标头。您试图对一个请求输出两个响应，这是不可能的。

这似乎不应该是一个问题。当用户单击链接下载 PDF 时，浏览器将停留在用户所在的任何页面上。如果您真的希望它们被迫在其他地方使用（您可能不这样做，这与下载链接在其他地方的工作方式非常不同），您可以使用 JavaScript 做一些事情。

# javascript - Javascript 软滚动

> ID：14183562
> 
> 赞同：0
> 
> 时间：2013-01-06T15:24:31.997
> 
> 标签：javascript, html, scroll, click, dom-events

我正在开发一个脚本来滚动智能手机中的页面（触摸屏幕）。我在 jQuery 和 jscrollto [script](http://userscripts.org/scripts/show/155708)中做过，但我想用纯 Javascript 来做。这是我的代码：

```
// ==UserScript==
// @name        touchNavigation
// @namespace   here
// @include     http://*

// @version     0.1
// @grant       none

// ==/UserScript==

document.body.addEventListener("mousedown", mouseDown);
document.body.addEventListener("mouseup", mouseUp)
var y0=0;
var y1=0;
var diferencia=0;

function mouseDown(event)
{
  y0=event.clientY;
}

function mouseUp(event)
{
    var i;
    y1=event.clientY;
    diferencia=y1-y0;

    if(diferencia>0){
        i=-10;
        while(diferencia>0){
            setTimeout(desplazamiento, 250, i);
            diferencia+=i;
        }
    }else{
        i=10;
        while(diferencia<0){
            setTimeout(desplazamiento, 250, i);
            diferencia+=i;
        }
    }

}

function desplazamiento(diferencia){

    window.scrollBy(0,diferencia);

} 
```

该脚本有效。但位移是一步到位的。它应该更柔和。

这部分可能有什么问题？

```
 if(diferencia>0){
            i=-10;
            while(diferencia>0){
                setTimeout(desplazamiento, 250, i);
                diferencia+=i;
            }
        }else{
            i=10;
            while(diferencia<0){
                setTimeout(desplazamiento, 250, i);
                diferencia+=i;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:29:01.910

来自 userscript 的 ivan 提交了代码以在 javascript 中轻柔地滚动。你可以在这里看到。

[http://userscripts.org/scripts/show/155832](http://userscripts.org/scripts/show/155832)

我不知道如何工作，但工作完美。

# android - 资源/原始、资产或 SD 卡？

> ID：14183563
> 
> 赞同：1
> 
> 时间：2013-01-06T15:24:32.937
> 
> 标签：android, resources

我正在开发一个包含大量图像、视频和其他资源的应用程序。存储所有这些信息的合适位置是什么？我可以看到以编程方式原始文件夹可能是最容易处理的，但是正确的策略是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T15:36:28.163

*   资产对于已经压缩的项目来说真的很糟糕——当你构建你的应用程序时，这些项目将被尝试压缩，这会对性能产生影响。也在减压。
*   如果您提前拥有图像，则 Res / raw 是一个不错的选择，特别是如果您不想在启动应用程序后下载它们，从而让用户等待。
*   SD卡应该给你最大的空间。但是，您要么需要从网上下载资源，我想不出一种方法将它们与应用程序一起运送，然后将它们移动到 sdcard。当您从 Internet 下载资源时，请确保将它们存储在以下子文件夹中：

    ```
    private File getResourceFilePath(String ralativePath, Context context) {
        if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {
            return new File(context.getExternalFilesDir(null), ralativePath);
        } else {
            return new File(context.getFilesDir(), ralativePath);
        }
    } 
    ```

否则，您将面临资源在用户设备库中可用的风险等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:34:14.387

请记住，如果您将其存储在 res 或 raw 文件夹中，它将包含在您的 apk 文件中，这将使您的编译和上传到 Play 商店的时间更长，也使用户从 Play 商店下载和更新的时间更长。

如果媒体是相当静态的并且超过几兆，则将其制作为一个 zip 文件，该文件可以在旁边下载并存储在一个单独的文件夹中，供用户选择。这样，您可以在更新应用程序的同时更新媒体。

如果您走 zip 文件路线，您应该查看 google play 的 APK 扩展文件支持。[http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html)

请注意，如果您使用扩展，其他商店（亚马逊、Nook 等）仍需要在您的应用程序中下载 zip 文件支持。

-詹姆士

# c++ - 强制关闭文件描述符以使 pclose() 不会阻塞的方法？

> ID：14183572
> 
> 赞同：2
> 
> 时间：2013-01-06T15:25:29.153
> 
> 标签：c++, centos, infinite-loop, popen, pclose

我正在使用 popen() 创建一个管道，并且该过程正在调用第三方工具，在极少数情况下我需要终止该工具。

```
::popen(thirdPartyCommand.c_str(), "w"); 
```

如果我只是抛出一个异常并展开堆栈，我的展开尝试在我不再需要其结果的第三方进程上调用 pclose()。但是，pclose() 永远不会返回，因为它在 Centos 4 上使用以下堆栈跟踪阻塞：

```
#0  0xffffe410 in __kernel_vsyscall ()
#1  0x00807dc3 in __waitpid_nocancel () from /lib/libc.so.6
#2  0x007d0abe in _IO_proc_close@@GLIBC_2.1 () from /lib/libc.so.6
#3  0x007daf38 in _IO_new_file_close_it () from /lib/libc.so.6
#4  0x007cec6e in fclose@@GLIBC_2.1 () from /lib/libc.so.6
#5  0x007d6cfd in pclose@@GLIBC_2.1 () from /lib/libc.so.6 
```

有什么方法可以在调用 pclose() 之前强制调用成功，这样我就可以通过编程方式避免这种情况，即我的进程挂起等待 pclose() 成功，而它永远不会成功，因为我已经停止向popen()ed 进程并希望丢弃它的工作？

在尝试关闭它之前，我是否应该以某种方式将文件结尾写入 popen()ed 文件描述符？

请注意，第三方软件正在分叉自己。在 pclose() 挂起的地方，有四个进程，其中一个已失效：

```
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
abc       6870  0.0  0.0   8696   972 ?        S    04:39   0:00 sh -c /usr/local/bin/third_party /home/arg1 /home/arg2 2>&1
abc       6871  0.0  0.0  10172  4296 ?        S    04:39   0:00 /usr/local/bin/third_party /home/arg1 /home/arg2
abc       6874 99.8  0.0  10180  1604 ?        R    04:39 141:44 /usr/local/bin/third_party /home/arg1 /home/arg2
abc       6875  0.0  0.0      0     0 ?        Z    04:39   0:00 [third_party] <defunct> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:52:06.110

我在这里看到两个解决方案：

*   整洁的一个：你`fork()`，`pipe()`和`execve()`（当然是家庭中的任何`exec`人......）“手动”，然后由你决定是否让你的孩子成为僵尸。（即是否`wait()`为他们）
*   丑陋的一个：如果您确定在任何给定时间只有一个此子进程在运行，则可以在调用... **yuk**`sysctl()`之前检查是否有任何进程使用此名称运行。`pclose()`

 **我强烈建议在这里使用简洁的方法，或者您可以询问负责修复第三方工具中的无限循环的人哈哈。

祝你好运！

编辑：

**对于你的第一个问题**：我不知道。*对如何使用 shoud 按名称查找进程进行了`sysctl()`*一些研究，告诉你你需要知道什么，我自己从来没有把它推到这么远。

**对于您的第二个和第三个问题**：基本上是++++`popen()`的包装。`fork()``pipe()``dup2()``execl()`

`fork()`复制进程，`execl()`用新的图像替换复制的进程的图像，`pipe()`处理进程间通信并`dup2()`用于重定向输出......然后`pclose()`将`wait()`导致复制的进程死亡，这就是我们在这里的原因。

如果您想了解更多信息，您应该查看[这个答案](https://stackoverflow.com/questions/14170647/fork-father-child-communication/14171149#14171149)，我最近解释了如何使用标准 IPC 执行简单的分叉。在这种情况下，它只是有点复杂，因为您必须使用`dup2()`将标准输出重定向到您的管道。

您还应该查看`popen()/pclose()`源代码，因为它们当然是开源的。

最后，这是一个简短的例子，我不能比这更清楚：

```
int    pipefd[2];

pipe(pipefd); 
if (fork() == 0) // I'm the child
{
    close(pipefd[0]);    // I'm not going to read from this pipe
    dup2(pipefd[1], 1);  // redirect standard output to the pipe
    close(pipefd[1]);    // it has been duplicated, close it as we don't need it anymore
    execve()/execl()/execsomething()... // execute the program you want
}
else // I'm the parent
{
    close(pipefd[1]);  // I'm not going to write to this pipe
    while (read(pipefd[0], &buf, 1) > 0) // read while EOF
        write(1, &buf, 1);
    close(pipefd[1]);  // cleaning
} 
```

和往常一样，请记住阅读手册页并检查所有返回值。

再次，祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-23T07:44:42.110

另一个解决方案是杀死你所有的孩子。如果您知道您拥有的唯一子进程是在您这样做时开始的进程`popen()`，那么这很容易。否则，您可能需要做更多工作或使用`fork()`+`execve()`组合，在这种情况下，您将知道第一个孩子的 PID。

每当您运行子进程时，它的 PPID（父进程 ID）就是您自己的 PID。阅读当前正在运行的进程列表并收集那些拥有其`PPID = getpid()`. 重复循环查找其 PPID 等于您孩子的 PID 之一的进程。最后，您构建了一整棵子进程树。

*由于您的子进程最终可能会创建其他子*进程，为了确保安全，您需要通过发送`SIGSTOP`. 这样他们将停止创造新的孩子。据我所知，你不能阻止`SIGSTOP`它的行为。

因此，该过程是：

```
function kill_all_children()
{
  std::vector<pid_t> me_and_children;

  me_and_children.push_back(getpid());

  bool found_child = false;
  do
  {
    found_child = false;
    std::vector<process> processes(get_processes());
    for(auto p : processes)
    {
      // i.e. if I'm the child of any one of those processes
      if(std::find(me_and_children.begin(),
                   me_and_children.end(),
                   p.ppid()))
      {
         kill(p.pid(), SIGSTOP);
         me_and_children.push_back(p.pid());
         found_child = true;
      }
    }
  }
  while(found_child);

  for(auto c : me_and_children)
  {
    // ignore ourselves
    if(c == getpid())
    {
      continue;
    }
    kill(c, SIGTERM);
    kill(c, SIGCONT);  // make sure it continues now
  }
} 
```

不过，这可能不是关闭管道的最佳方式，因为您可能需要让命令有时间来处理您的数据。所以你想要的是仅在超时后执行该代码。因此，您的常规代码可能如下所示：

```
void send_data(...)
{
  signal(SIGALRM, handle_alarm);
  f = popen("command", "w");
  // do some work...
  alarm(60);  // give it a minute
  pclose(f);
  alarm(0);   // remove alarm
}

void handle_alarm()
{
  kill_all_children();
} 
```

-- 关于，位置由你决定，如果你担心或之后的工作也可能失败`alarm(60);`，它也可以放在甚至无法到达，因为子进程永远循环。）`popen()``popen()``pclose()`

请注意，这`alarm()`可能不是世界上最好的主意。您可能更喜欢使用睡眠由 a`poll()`或`select()`fd 制成的线程，您可以根据需要唤醒它。这样线程将`kill_all_children()`在睡眠后调用该函数，但您可以向它发送一条消息以提早唤醒它并让它知道`pclose()`按预期发生。

注意：我离开了`get_processes()`这个答案的实现。您可以从图书馆`/proc`或与`libprocps`图书馆一起阅读。我的[snapwebsites 项目](https://snapwebsites.org/)中有[这样的实现](https://github.com/m2osw/snapwebsites/blob/master/libsnapwebsites/src/snapwebsites/process.cpp)。它被称为。你可以从那门课上收获。`process_list`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-24T10:23:55.423

我正在使用 popen() 来调用不需要任何标准输入或标准输出的子进程，它只运行一小段时间来完成它的工作，然后它会自行停止。可以说，调用这种类型的子进程应该使用 system() 来完成？无论如何，之后使用 pclose() 来验证子进程是否干净地退出。

在某些条件下，这个子进程会无限期地继续运行。pclose() 永远阻塞，所以我的父进程也被卡住了。CPU 使用率达到 100%，其他可执行文件被饿死，我的整个嵌入式系统崩溃了。我来这里寻找解决方案。

**@cmc 的解决方案 1**：将 popen() 分解为 fork()、pipe()、dup2() 和 execl()。这可能只是个人喜好问题，但我不愿意自己重写完美的系统调用。我最终会引入新的错误。

**@cmc 的解决方案 2**：使用 sysctl() 验证子进程是否确实存在，以确保 pclose() 将成功返回。我发现这以某种方式回避了 OP @WilliamKF 的问题 - 肯定有一个子进程，它只是变得没有响应。放弃 pclose() 调用不会解决这个问题。[顺便说一句，在@cmc 写这个答案的 7 年里， sysctl() 似乎已经被弃用了。]

**@Alexis Wilke 的解决方案 3**：杀死子进程。我最喜欢这种方法。当我手动介入以使我垂死的嵌入式系统复苏时，它基本上自动化了我所做的事情。我顽固地坚持 popen() 的问题是我没有从子进程中得到 PID。我一直在徒劳地尝试

```
waitid(P_PGID, getpgrp(), &child_info, WNOHANG); 
```

但我在 Debian Linux 4.19 系统上得到的只是 EINVAL。

所以这就是我拼凑起来的。我正在按名称搜索子进程；我可以走一些捷径，因为我确信只有一个进程具有此名称。具有讽刺意味的是，命令行实用程序**ps**被另一个 popen() 调用。这不会赢得任何优雅奖，但至少我的嵌入式系统现在仍然可以运行。

```
FILE* child = popen("child", "r");
if (child)
{
    int nr_loops;
    int child_pid;
    for (nr_loops=10; nr_loops; nr_loops--)
    {
        FILE* ps = popen("ps | grep child | grep -v grep | grep -v \"sh -c \" | sed \'s/^ *//\' | sed \'s/ .*$//\'", "r");
        child_pid = 0;
        int found = fscanf(ps, "%d", &child_pid);
        pclose(ps);
        if (found != 1)
            // The child process is no longer running, no risk of blocking pclose()
            break;
        syslog(LOG_WARNING, "child running PID %d", child_pid);
        usleep(1000000); // 1 second
    }
    if (!nr_loops)
    {
        // Time to kill this runaway child
        syslog(LOG_ERR, "killing PID %d", child_pid);
        kill(child_pid, SIGTERM);
    }
    pclose(child); // Even after it had to be killed
} /* if (child) */ 
```

我以艰难的方式了解到，我必须将每个 popen() 与 pclose() 配对，否则我会堆积僵尸进程。我发现在直接杀死后需要这样做很值得注意；我认为这是因为根据联机帮助页， popen() 实际上启动了**sh -c**，其中包含子进程，而周围的**sh**变成了僵尸。**

# c++ - 通过在运行时指定键和值数据类型来创建 std::map 实例

> ID：14183574
> 
> 赞同：1
> 
> 时间：2013-01-06T15:25:30.423
> 
> 标签：c++

如何通过在运行时中指定键和值数据类型来创建如下的 c++ stl std::map(s)。

```
std::map<keyT, valueT> 
```

keyT 和 valueT 数据类型将在运行时确定，我想根据不同的数据类型创建几个地图实例。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:50:09.703

C++ 模板只是类和/或函数的蓝图。

在你的程序中有模板定义，并不意味着编译器会为它们生成代码。

编译器只会在模板被**实例化**的情况下生成代码，即当您通过用真实数据/类类型替换参数来使用模板时。

因为没有这些信息，编译器就无法生成代码。要真正建造房屋，您将需要砖头和砂浆，而不仅仅是蓝图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:10:45.283

您可能会发现[`boost::any`](http://www.boost.org/doc/libs/release/doc/html/any.html)对这项任务很有用，例如

```
typedef std::map<int, boost::any> MyIntMap; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:48:35.480

你实际上可以声明一个带有模板参数的映射，该模板参数基于具有 decltype 的其他变量类型（在 c++11 中）请参阅此页面[http://www.cprogramming.com/c++11/c++11-auto-decltype- return-value-after-function.html](http://www.cprogramming.com/c++11/c++11-auto-decltype-return-value-after-function.html)但是，如果您指的是 c++98，它们是正确的，在这种情况下，这是不可能的

# ruby-on-rails - Rails - 无法显示上传到 Amazon S3 的图像

> ID：14183576
> 
> 赞同：0
> 
> 时间：2013-01-06T15:25:41.353
> 
> 标签：ruby-on-rails, ruby, image, amazon-s3, paperclip

我有这两个模型：

**用户：**

```
has_many :commercials, :dependent => :destroy, :inverse_of => :user 
```

**商业的：**

```
 belongs_to :user, :inverse_of => :commercials

  has_attached_file :image,
    :styles => { :medium => "400x400",
                 :thumb  => "50x50>" } 
```

我刚刚上传了一张图片，图片已成功上传到 Amazon S3 并保存到数据库中。但是如何显示呢？

我试过了：

```
<%= image_tag @user.adverts(:medium) %> 
```

或者

```
<%= image_tag @user.adverts.medium.url %> 
```

但以上都不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:38:06.107

不是`adverts`，但是`commercials`？所以它不应该是这样的：

```
@user.commercials.first.image.url 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:35:04.293

假设`foo`为商业实例的名称

```
<%= image_tag foo.image.url(:medium) %> 
```

# php - Codeignighter 购物车问题

> ID：14183579
> 
> 赞同：0
> 
> 时间：2013-01-06T15:25:53.653
> 
> 标签：php, codeigniter, cart

我正在框架之上编写一个小型购物**车工具。**`codeignighter`使用内置的购物车类，我想更新已经添加到购物车的产品价格。

这类似于结帐点的优惠券。我提供 5 美元折扣的特定产品的当前价格。

对我来说，下面的代码看起来不错，但它没有更新价格。

有谁知道为什么？

```
 foreach ($this->cart->contents() as $item) {
      if($item['id'] == 1) {
          $item['price'] = $item['price'] - 5;
          $this->cart->update($item);
      }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:39:50.147

要使 cart->update 函数起作用，您需要将 rowid 传递给它。尝试：

```
foreach ($this->cart->contents() as $items) {
      if($items['id'] == 1) {
          $rowid = $items['rowid'];

          $data = array(
             'rowid' => $rowid,
             'price' => $items['price']-5
          );
          $this->cart->update($data);
      }

 } 
```

# java - ArrayList的二维arrayList

> ID：14183580
> 
> 赞同：0
> 
> 时间：2013-01-06T15:25:53.590
> 
> 标签：java, arraylist, dimensional

我对多个 ArrayList 的航点有疑问。我有一艘船。一艘船有航路点。

```
public static ArrayList<Waypoint> _waypoints = new ArrayList<>(); 
```

添加一个新的航点，我使用

```
 Screen._waypoints.add(
                        new Waypoint(
                           12,20
                        )
                   );
 Screen._waypoints.add(
                        new Waypoint(
                           15,50
                        )
                   );
 Screen._waypoints.add(
                        new Waypoint(
                           17,90
                        )
                   ); 
```

这意味着：

1.  船 -> 12,20
2.  船 -> 15,50
3.  船 -> 17,90

我修改了我的游戏，并添加了船只类型，这意味着每种类型的船只都有不同的航路点。

我修改了航点初始化。

```
public static ArrayList<ArrayList<Waypoint>> _waypoints = new ArrayList<ArrayList<Waypoint>>(); 
```

我想创建这个结构：
船 -> 木材 -> 航点数组列表
例如，我有两种类型的船 -> 木材和海盗船。

船 -> 木头

1.  船 -> 12,20
2.  船 -> 15,50
3.  船 -> 17,90

船 -> 海盗

1.  船 -> 12,20
2.  船 -> 15,50
3.  船 -> 17,90

要获取我想使用的木材的arrayList：

```
waypoints.get("wood"); 
```

我不知道如何使用arrayList的二维arrayList来实现它

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:30:54.523

您正在寻找一个[`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html).

```
public static Map<String, List<Waypoint>> wayPoints = new HashMap<String, List<Waypoint>>(); 
```

虽然，更好的方法是创建自己的`ShipType`类并在船上存储航点列表。很有可能，您将拥有更多特定于一种船型的属性。这使您可以将它们整合到一个类中，从而实现更易于管理的设计。

```
public class ShipType {
    private List<Waypoint> wayPoints = new ArrayList<Waypoint>();
    /* ... */
} 
```

然后，您`Ship`的 s 可以有一个`ShipType`而不是“只是”他们船型的名称。

```
public class Ship {
    private ShipType type;
    /* ... */
} 
```

然后，只需保留`Map`您`ShipType`的 s 即可正确构建您`Ship`的 s。

```
public static Map<String, ShipType> ships = new HashMap<String, ShipType>();
// Register ship types
ships.put("wood", new WoodShipType());
// Construct a ship
Ship myShip = new Ship();
myShip.setType(ships.get("wood")); 
```

或者，您可以使用`enum`带有重载的方法来表示固定数量的船舶类型，并完全摆脱该`static`集合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T15:31:07.933

使用一个怎么样`Map`？

```
Map<String, List<WayPoint>> wayPoints = new HashMap<String, List<WayPoint>>();
wayPoints.put("wood", new ArrayList<WayPoint>()); 
```

然后通过以下方式获取木材的arrayList：

```
List<WayPoint> woods = wayPoints.get("wood"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T15:35:42.977

您可以使用`HashMap`

```
 public  HashMap<String,ArrayList<Waypoint>> waypoints=new HashMap<String,ArrayList<Waypoint>>();

waypoints.put("wood",array list objetct); //insertion

ArrayList<Waypoints> obj=waypoints.get("wood"); 
```

# vb.net - VB.NET 碎片整理完成通知

> ID：14183582
> 
> 赞同：1
> 
> 时间：2013-01-06T15:26:18.347
> 
> 标签：vb.net, defragmentation

当 Windows 7 碎片整理完成时，是否有事件或其他方式可以通知 VB.NET 程序（以便程序可以指示 PC 关闭）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:22:12.693

您应该能够使用[EventLog.EntryWritten](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.entrywritten.aspx)事件来监视事件。在 Windows 7 上，`Application`日志中的事件`Source = "Defrag"`可能指示碎片整理完成。然后您可以检查 id - 应该是 258，并且描述会说类似`The disk defragmenter successfully completed defragmentation on (C:)`.

这是我家用电脑的屏幕截图，以证明上述内容：

![在此处输入图像描述](../Images/0de1186ce4825ba22f7e5688c5813694.png)

# android - android, seekbar drawable, 什么 id/background, id/secondaryProgress 和 id/progress 代表什么？

> ID：14183584
> 
> 赞同：3
> 
> 时间：2013-01-06T15:26:28.577
> 
> 标签：android, seekbar

我正在尝试制作自定义`seekbar`背景。在示例中，我可以发现它是通过 3 层的层列表完成的。图层的 ID 为：

`@android:id/background
@android:id/secondaryProgress
@android:id/progress`

每个项目实际上是做什么的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T15:39:33.603

`secondaryProgress`是条中可选的附加进度。它主要用于显示缓冲进度，就像您从流式视频中了解的那样。

`progress`并且`background`实际上应该是不言自明的。`progress`是主要进度，已加载的部分，`background`是 的背景`SeekBar`，仍需要加载的部分。

# javascript - 当我尝试运行该页面时，它在 for 循环中给了我一个错误“预期：”

> ID：14183588
> 
> 赞同：-1
> 
> 时间：2013-01-06T15:27:14.057
> 
> 标签：javascript

我使用谷歌可视化 api！我知道所有 Google 可视化构造都接受 Javascript 对象 google.visualization.DataTable 的实例，该实例可以通过以下两种方式之一进行实例化。

所以我使用第二种方式，在这种方式中，我的数据表是用某种结构的 JSON 构造并使用特定属性的。问题是如您所见，我想使用 for 循环添加特定数量的行，当我尝试这样做时，它给了我上面提到的错误

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
      <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <title>
          Google Visualization API Sample
        </title>
        <script type="text/javascript" src="http://www.google.com/jsapi"></script>
        <script type="text/javascript">
          google.load('visualization', '1', {packages: ['table']});
        </script>
        <script>

        function drawVisualization()
        {
         var data = new google.visualization.DataTable
         (
           {
           cols: [
           {id: 'task',  label: 'Task',          type: 'string'},
           {id: 'hours', label: 'Hours per Day', type: 'number'},
            {id: 'E',   label: 'Action',          type:  'string'}
                  ],
                  for (i=0;i<3;i++) 
                  {
                    rows: [ 
                    {c:[{v: 'Work'},     {v: 5},     {v: '<input type="button" value="my button" onclick="alert(\'I was clicked!\');"/>'}]},
                    {c:[{v: 'Eat'},      {v: 2}]}
                           ]                     
                   }
             }         

         );

        visualization = new google.visualization.Table(document.getElementById('table'));
        visualization.draw(data, null);
        }
      google.setOnLoadCallback(drawVisualization);
        </script>
        </head>
        <body>
        <div id="table"></div>
        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:01:12.293

您的语法无效。您需要逐步构建对象，首先是静态部分，然后使用 for 循环添加其余部分：

```
var rawData = {
    cols: [
        {id: 'task',  label: 'Task',          type: 'string'},
        {id: 'hours', label: 'Hours per Day', type: 'number'},
        {id: 'E',     label: 'Action',        type:  'string'}
    ],
    rows: []
};

for (var i = 0; i < 3; i++)  {
    rawData.rows.push({
        c:[{v: 'Work'}, {v: 5}, {v: '<input type="button" value="my button" onclick="alert(\'I was clicked!\');"/>'}]
    });
    rawData.rows.push({
        c:[{v: 'Eat'}, {v: 2}, {v: ''}]
    });
}

var data = new google.visualization.DataTable(rawData); 
```

# android - Android - 带有不同选项卡的对话框

> ID：14183589
> 
> 赞同：2
> 
> 时间：2013-01-06T15:27:21.310
> 
> 标签：android, android-tabhost, android-alertdialog

如何创建具有不同布局选项卡的警报对话框？

我试图创建一个扩展 DialogFragment 的警报对话框**，**但是我无法扩展**tabhost**，那么如何从对话框布局中获取 tabhost 以在不同的选项卡上执行操作？

# javascript - 为什么getjson只能在firefox中工作

> ID：14183591
> 
> 赞同：0
> 
> 时间：2013-01-06T15:27:38.343
> 
> 标签：javascript, json

这些是代码：

```
var url = "basic.json";

$.getJSON(url, function(data) {
    var items = [];

    $.each(data.CaseResult, function(key, val) {

        items.push('<li id="' + key + '">' + val + '</li>');
        alert(items);
    });

    $('<ul/>', {
        'class': 'my-new-list',
        html: items.join('')
    }).appendTo('body');

}); 
```

我使用本地文件“basic.json”，这适用于firefox，`jquery 1.3.2-min.js`但也不是`jquery 1.8.2.js`。它在 chrome、IE 和两个 js 文件中都不起作用。为什么？之后，我尝试了这些代码`jquery 1.8.2.js`，它可以工作

```
 var url = "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20WHERE%20symbol%3D'COL'&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys";

$.getJSON(url, function(data) {
    var items = [];

    $.each(data.query.results.quote, function(key, val) {

        items.push('<li id="' + key + '">' + val + '</li>');
    });

    $('<ul/>', {
        'class': 'my-new-list',
        html: items.join('')
    }).appendTo('body');

}); 
```

谁能告诉我不同​​版本的 jquery 文件有什么区别，为什么一个有效而另一个无效？以及为什么没有Firefox浏览器的本地json文件不起作用？这么奇怪。

# ios - 像 The Magazine 中一样滑动 UIViews

> ID：14183597
> 
> 赞同：1
> 
> 时间：2013-01-06T15:28:07.767
> 
> 标签：ios, uiview, slide

我想知道这里是否有人知道我如何在我的应用程序中滑动视图。当我在一个视图中时，我想滑动到另一个视图，例如“The Magazine”中的视图。（见图）

希望有人能帮助我。

图片：

![在此处输入图像描述](../Images/95bf953c19b2c345b9dcea2c75496f91.png) [http://bildr.no/view/1361377](http://bildr.no/view/1361377)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:08:42.807

据我所知，没有“固定”过渡可以滑过。我已经这样实现了：

```
-(void)SlideInController:(RDSlideController *) next {
    next.presentingVC = self;
    next.view.frame = CGRectMake(self.view.frame.origin.x + 320, self.view.frame.origin.y, self.view.frame.size.width, self.view.frame.size.height);
    [self.view.window addSubview:next.view];
    [UIView animateWithDuration:slideTime animations:^{
        next.view.frame = self.view.frame;
    } completion:^(BOOL finished) {
        self.view.window.rootViewController = next;
    }];
}

-(void)SlideOut {
    RDSlideController *prev = self.presentingVC;
    prev.view.frame = self.view.frame;
    [self.view.window insertSubview:prev.view belowSubview:self.view];
    [UIView animateWithDuration:slideTime animations:^{
        self.view.frame = CGRectMake(self.view.frame.origin.x + 320, self.view.frame.origin.y, self.view.frame.size.width, self.view.frame.size.height);
    } completion:^(BOOL finished) {
        self.view.window.rootViewController = prev;
    }];
} 
```

在此示例中，我创建了一个控制器类 (RDSlideController)，它是我的其他控制器的超类，因此它们都将具有 presentingVC 属性并可以访问我编写的各种滑入和滑出（以及向上和向下）方法。这应该让您了解如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:47:02.080

看一眼`UIPageViewController`

这是文档的[链接。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)从 iOS5 开始，它支持页面卷曲过渡。在 iOS6 中，他们添加了幻灯片，就像您在屏幕截图中一样。

如果您需要支持早期版本，您很可能需要创建自己的动画（使用`CAAnimation`）。

# python - 如何为`int`重新定义`__add__`方法？

> ID：14183599
> 
> 赞同：0
> 
> 时间：2013-01-06T15:28:10.030
> 
> 标签：python, operators

我想重新定义`__add__`方法，`int`以便使用如下：

```
 >> 1+2
 => "1 plus 2"

 >> (1).__add__(2)
 => "1 plus 2" 
```

我试过这个：

```
 >>> int.__add__ = lambda self, x: str(self)+" plus " + str(x) 
```

但是，它会引发异常：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: can't set attributes of built-in/extension type 'int' 
```

有没有人知道为什么我不能重新定义这样的`__add__`方法？还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:33:30.240

创建自己的类，它覆盖类的`__add__`方法`int`。

```
In [126]: class myint(int):
    def __add__(self,a):
        print "{0} plus {1}".format(self,a)
   .....:         

In [127]: a=myint(5)

In [128]: b=myint(6)

In [129]: a+b
5 plus 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-23T20:05:51.903

虽然不是最佳实践，但您可以使用[forbiddenfruit](https://github.com/clarete/forbiddenfruit)覆盖该`__add__`方法。用法：

```
>>> from forbiddenfruit import curse
>>> curse(int, '__add__', lambda x, y: f"{x} plus {y}")
>>> 1 + 2
'1 plus 2' 
```

# haskell - libspotify：music_delivery 回调未触发

> ID：14183600
> 
> 赞同：2
> 
> 时间：2013-01-06T15:28:23.913
> 
> 标签：haskell, spotify, ffi

我已经成功地从播放列表中加载了一个 Spotify 曲目（通过将曲目名称跟踪到屏幕上来验证），将其传递给使用`sp_session_player_load`and播放`sp_session_player_play(sess, 1)`。

但是我的`music_delivery`回调永远不会被调用（我有一些跟踪显示它是什么时候）。libspotify [FAQ](https://developer.spotify.com/technologies/libspotify/faq/)似乎暗示它将由 API 内的内部线程调用，我不需要调用`sp_session_process_events`来启动流式传输。

我的应用程序是单线程的，所以我假设我的代码中没有锁定问题。

* * *

资料来源：

libspotify Haskell 绑定： [https](https://github.com/mrehayden1/libspotify) ://github.com/mrehayden1/libspotify （您需要安装 libspotify 才能编译：[https](https://developer.spotify.com/technologies/libspotify/#download) ://developer.spotify.com/technologies/libspotify/#download ）

应用代码： [https ://github.com/mrehayden1/harmony](https://github.com/mrehayden1/harmony)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:51:22.437

一些想法：

> 我不需要调用`sp_session_process_events`来开始流式传输。

这有点正确，但是，您*必须*`sp_session_process_events`在收到回调时触发`notify_main_thread`——这来自另一个线程，因此您需要正确地将其委托回您的主线程以进行调用。

既然你提到你只有一个线程，请确保你没有在某个地方的紧密循环中旋转——比如`while (!sp_track_is_loaded(track)) {}`——因为 libspotify 中的很多工作都在你调用的线程中进行，这样做会导致 libspotify不能做任何工作，一切都将陷入停顿。

> 传递它以使用`sp_session_player_load`and播放`sp_session_player_play(sess, 1)`。

这些调用的结果是什么？加载元数据与加载播放不同，因此您可能会`SP_ERROR_IS_LOADING`从播放调用中恢复过来。此外，由于某些其他原因，该曲目可能无法播放，因此错误很重要。

* * *

如果您仍然遇到问题，则问题可能出在绑定或代码中的其他地方。查看 libspotify 附带的点唱机示例，以获取播放的示例 C 实现。

# android - IO 异常处理：26

> ID：14183602
> 
> 赞同：0
> 
> 时间：2013-01-06T15:29:23.147
> 
> 标签：android, android-maps

我使用了 debug.keystore 以及一个新的密钥库，但我一直收到同样的错误。我看到很多关于这个问题的帖子，但找不到任何解决方案。

这是我的 map.xml

```
 <?xml version="1.0" encoding="utf-8"?>
     <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:orientation="vertical" >

    <com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="07QY1V71kePjxTjGCtnM7cgrccxWizYevUYKFig"
        android:clickable="true" >
    </com.google.android.maps.MapView>

   </RelativeLayout> 
```

这是我的 manifest.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.bombil.aawaz"
 android:versionCode="1"
 android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="10" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

 <uses-permission android:name="android.permission.INTERNET" />

 <uses-permission android:name="android.permission.INTERNET" />

<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />

<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />

<!-- Creates a custom permission so only this app can receive its messages. -->
<permission
    android:name="com.bombil.aawaz.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.bombil.aawaz.permission.C2D_MESSAGE" />

<!-- This app has permission to register and receive data message. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<!-- Network State Permissions to detect Internet status -->
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<!-- Permission to vibrate -->
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <uses-library android:required="true" 
        android:name="com.google.android.maps"></uses-library>"

    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.bombil.aawaz.Registration"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen"
        android:screenOrientation="portrait"

    >
        <intent-filter>
            <action android:name = "com.bombil.aawaz." />
            <category android:name="android.intent.category.DEFAULT"/>

        </intent-filter>

    </activity>

    <activity
        android:name="com.bombil.aawaz.TraceLocation"
        android:label="@string/app_name"

    >
        <intent-filter>
            <action android:name = "com.bombil.aawaz.TraceLocation" />
            <category android:name="android.intent.category.DEFAULT"/>

        </intent-filter>

    </activity>

    <activity
        android:name="com.bombil.aawaz.HelpMe"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen"
       android:screenOrientation="portrait"
    >
        <intent-filter>
            <action android:name = "com.bombil.aawaz.HelpMe" />
            <category android:name="android.intent.category.DEFAULT"/>

        </intent-filter>

    </activity>

    <activity
        android:name="com.bombil.aawaz.HelpAlert"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen"
        android:screenOrientation="portrait"
    >
        <intent-filter>
            <action android:name = "com.bombil.aawaz.HelpAlert" />
            <category android:name="android.intent.category.DEFAULT"/>

        </intent-filter>

    </activity>

     <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver"
               android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.bombil.aawaz" />  
        </intent-filter>   
    </receiver>

    <service
        android:name=".GCMIntentService">
    </service>

    <activity
        android:name="com.bombil.aawaz.AlertWidget"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen"

    >
        <intent-filter>
            <action android:name = "com.bombil.aawaz.AlertWidget" />
            <category android:name="android.intent.category.DEFAULT"/>

        </intent-filter>

    </activity>

      </application>

   </manifest> 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T09:31:19.073

已解决，debug key 只能在通过 eclipse 调试时使用，而当你想使用 apk 时，你需要使用 release key。释放键在调试模式下也不起作用。

# sql - 将 select 语句的结果分配给变量

> ID：14183604
> 
> 赞同：0
> 
> 时间：2013-01-06T15:29:38.733
> 
> 标签：sql, sql-server-2008

如何在 Sql Server 中为变量分配 SELECT 的结果？

这是我的尝试：

```
CREATE PROCEDURE x
AS 
BEGIN

DECLARE @MyVar integer
DECLARE @sql nvarchar(150), @v nvarchar(50)
Set @v = 'mytable' 
--SET @sql = 'SELECT INTO ' + @MyVar + 'count(*) FROM ' + @v 
SET @sql = 'Set ' + @MyVar + '= SELECT count(*) FROM ' + @v 
EXEC sp_executesql @sql
print @MyVar
END 
```

> *将 varchar 值“Set”转换为数据类型 int 时转换失败。*

任何有关学习语法的建议也会很有用。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:35:13.327

您可以使用如下`OUTPUT`参数`sp_executesql`。

```
DECLARE @MyVar INTEGER
DECLARE @sql NVARCHAR(MAX),
        @v   SYSNAME

SET @v = N'mytable'
SET @sql = N'SELECT @MyVar = count(*) FROM ' + QUOTENAME(@v)

EXEC sp_executesql
  @sql,
  N'@MyVar INT OUTPUT',
  @MyVar = @MyVar OUTPUT

PRINT @MyVar 
```

[RE：“关于学习语法的建议”除了在线书籍](http://msdn.microsoft.com/en-gb/library/ms188001.aspx)之外，我真的没有其他书籍，但您应该阅读[动态 SQL 的诅咒和祝福](http://www.sommarskog.se/dynamic_sql.html)以了解为什么`QUOTENAME`重要。

# java - 使用构造函数和 if 子句更改我正在读取的文本文件

> ID：14183608
> 
> 赞同：0
> 
> 时间：2013-01-06T15:30:05.550
> 
> 标签：java, if-statement, constructor, java.util.scanner

我试图从一个文本文件转到另一个，并使其依赖于用户正确输入的文本。这个想法是我从一个文本文件中显示一些故事文本，用户在文本框中键入指令（“进入入口”，单击相邻按钮，程序检查文本是否与相关短语“进入入口”匹配"，然后如果匹配，从另一个文件显示故事的下一部分。我想我真的很接近。

这是文本检查器的构造函数：

```
public void textCheck (String typedInText) {
    Scanner keyboard = new Scanner(System.in);
    textField.setText(typedInText); 
```

这是 if 子句——据我所知，粗体字是唯一错误的部分。我不确定我错过了什么，但我尝试了“typedInText”和“String typedInText”，但它们没有用。

```
if (mf.textCheck**(String)** == "proceed to the entrance") {
    reader.close();
    Scanner reader2 = new Scanner("(Start) Front Gate.txt");
    while (reader2.hasNextLine()) {
        String line = reader.nextLine();
        mf.displayText(line);
        }
} else {
mf.displayText("I`m sorry, could you say that again?"); //I hope this is right
} 
```

mf.textCheck 的参数中需要用什么代替 String？

我做对了吗？它感觉不是最干净的方法，但我觉得它是有道理的。

（我也希望SSCCE是对的，如果不是很抱歉）

谢谢

# asp.net - Asp.Net：gridview 是在数据库中显示数据的唯一方法吗？

> ID：14183610
> 
> 赞同：0
> 
> 时间：2013-01-06T15:30:13.910
> 
> 标签：asp.net

网格是在数据库中显示数据的唯一方法吗？

我想在标签中显示数据..我这可能适用于下面的代码.. ??

protected void cnt_btn_Click（对象发送者，EventArgs e）

```
{
    con = new SqlConnection(Str);
    con.Open();
    cmd = new SqlCommand("select Count(emp_id) from emp_tbl", con);
    dr = cmd.ExecuteReader();
    gridview.DataSource = dr;
    gridview.DataBind();
    con.Close();
} 
```

上面的代码为gridview显示成功运行..但我想在标签工具中显示计数..我试过这样

//lable.Text = Convert.ToString(dr);

//lable.DataBind();

但这是错误的..请让我摆脱这个问题...谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T02:06:09.003

你为什么不这样做：

```
lable.Text = dr.GetInt32(0).ToString(); 
```

# node.js - Mongoose 总是返回一个空数组 NodeJS

> ID：14183611
> 
> 赞同：32
> 
> 时间：2013-01-06T15:30:17.793
> 
> 标签：node.js, mongodb, mongoose

我尝试使用`find`and`findOne`并且两者都没有返回文档。在返回时返回`find`一个空数组。在这两种情况下也是如此。`findOne``null``err``null`

这是我的连接：

```
function connectToDB(){
    mongoose.connect("mongodb://localhost/test"); //i have also tried 127.0.0.1
    db = mongoose.connection;
    db.on("error", console.error.bind(console, "connection error:"));
    db.once("open", function callback(){
        console.log("CONNECTED");
    });
};
```

这是我的架构：

```
var fileSchema = mongoose.Schema({
    hash: String,
    type: String,
    extension: String,
    size: String,
    uploaded: {type:Date, default:(Date.now)},
    expires: {type:Date, default:(Date.now()+oneDay)}
});
var Model = mongoose.model("Model", fileSchema);
```

我的查询在这里：

```
Model.find({},function(err, file) {
    console.log(err)
    console.log(file);  
});
```

我可以将内容上传到数据库并通过[RockMongo](http://rockmongo.com/)查看它们，但之后我无法获取它们。这是我第一次使用 MongoDB，所以我认为我只是缺少一些基础知识。任何朝着正确方向的推动都会很棒！

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-06T15:55:01.800

调用`mongoose.model`建立模型所绑定的集合的名称，默认为[复数](http://mongoosejs.com/docs/guide.html#collection)的小写模型名称。所以用你的代码，那将是`'models'`. 要将模型与`files`集合一起使用，请将该行更改为：

```
var Model = mongoose.model("Model", fileSchema, "files"); 
```

或者

```
var Model = mongoose.model("file", fileSchema); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-26T18:13:34.983

简单地为了避免复数复杂性使用这个：

```
var Model = mongoose.model("Model", fileSchema, "pure name your db collection"); 
```

这很令人困惑。[至少对我来说。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-28T22:52:44.597

有同样的问题。上面的解决方案对我不起作用。即使未找到查询，我的应用程序也永远不会返回错误。它返回空数组。所以我把它放在我的代码中：

```
if(queryResult.length==0) return res.status(404).send("not found"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-06T11:46:34.210

这个问题可能是因为您正在创建一个**mongoose 模型**而没有指定**集合的​​名称**。

尝试改变：`const Model = mongoose.model("Model", fileSchema);`

对此：`const Model = mongoose.model("Model", fileSchema, "NameOfCollection");`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-30T10:38:45.187

```
const growingUnit= mongoose.model('Growing Unit', growingUnitSchema); 
```

我故意在“成长单元”中有一个空间，它总是返回空数组。删除该空间以成为“GrowingUnit”是我的场景所需的修复。

```
const growingUnit= mongoose.model('Growing Unit', growingUnitSchema); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-23T15:31:31.013

**一般的“hello world”问题**（有时这个问题与猫鼬无关）。

1.  检查**集合**是否**真的**为空（[mongoDB atlas](https://www.mongodb.com/cloud/atlas) screenshot）。

[![在此处输入图像描述](../Images/cce79f92cd98c678c535b846e8bc1e59.png)](https://i.stack.imgur.com/TL0zh.png)

2.  在您的集合查询命令中检查小的拼写差异（Like`listing`而不是）。`listings`

3.  检查您是否使用正确`URI`的连接（例如，您尝试从存在`localhost`但使用`mongoDB cluster`（云）的集合中检索数据 - 或 - 与连接字符串 URI 相关的任何其他问题）。 [https://docs.mongodb.com/manual/reference/connection-string/](https://docs.mongodb.com/manual/reference/connection-string/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-18T09:25:26.690

对我来说，问题是`.skip(value)`，我正在通过`page=1`而不是`page=0`。由于我的记录很少，我总是得到空数组。

# javascript - 动态分配 ng-model

> ID：14183614
> 
> 赞同：82
> 
> 时间：2013-01-06T15:30:24.200
> 
> 标签：javascript, angularjs

我正在尝试从对象数组生成一组复选框。我的目标是让复选框动态地将它们的 ng-model 映射到将提交到数组中的新对象的属性。

我的想法是

```
<li ng-repeat="item in items">
    <label>{{item.name}}</label>
    <input type="checkbox" ng-model="newObject.{{item.name}}">
</li> 
```

这不起作用，可以在这个 JSFiddle 上看到：

[http://jsfiddle.net/GreenGeorge/NKjXB/2/](http://jsfiddle.net/GreenGeorge/NKjXB/2/)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-01-06T15:46:50.713

这应该会给你想要的结果：

```
<input type="checkbox" ng-model="newObject[item.name]"> 
```

这是一个工作 plunk：[http ://plnkr.co/edit/ALHQtkjiUDzZVtTfLIOR?p=preview](http://plnkr.co/edit/ALHQtkjiUDzZVtTfLIOR?p=preview)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-07-02T08:00:09.020

**编辑** 正如在使用 ng-change 的评论中正确指出的那样，需要事先存在“虚拟”ng-model。然而，应该注意的是，显然在 1.3 中，框架已经提供了所需的选项。请查看下面的[https://stackoverflow.com/a/28365515/3497830](https://stackoverflow.com/a/28365515/3497830)！ **/编辑**

以防你像我一样在一个简单的案例中遇到更复杂的任务，这是我想出的将任意表达式动态绑定到 ng-model 的解决方案：[http ://plnkr.co/edit/ccdJTm0zBnqjntEQfAfx?p =预览](http://plnkr.co/edit/ccdJTm0zBnqjntEQfAfx?p=preview)

方法：我创建了一个指令 dynamicModel，它采用标准的角度表达式，对其进行评估并通过 ng-model 和 $compile 将结果链接到范围。

```
var app = angular.module('plunker', []);

app.controller('MainCtrl', function($scope) {
  $scope.data = {};
  $scope.testvalue = 'data.foo';
  $scope.eval = $scope.$eval;
});

var app = angular.module('plunker', []);

app.controller('MainCtrl', function($scope) {
  $scope.data = {};
  $scope.testvalue = 'data.foo';
  $scope.eval = $scope.$eval;
});

app.directive('dynamicModel', ['$compile', function ($compile) {
    return {
        'link': function(scope, element, attrs) {
            scope.$watch(attrs.dynamicModel, function(dynamicModel) {
                if (attrs.ngModel == dynamicModel || !dynamicModel) return;

                element.attr('ng-model', dynamicModel);
                if (dynamicModel == '') {
                    element.removeAttr('ng-model');
                }

                // Unbind all previous event handlers, this is 
                // necessary to remove previously linked models.
                element.unbind();
                $compile(element)(scope);
            });
        }
    };
}]); 
```

用法很简单 dynamic-model="angularExpression" 其中 angularExpression 生成一个字符串，用作 ng-model 的表达式。

我希望这可以避免有人不得不提出这个解决方案的麻烦。

问候，贾斯图斯

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-06T12:09:51.113

使用 Angular 1.3，您可以使用`ng-model-options`指令来动态分配模型，或绑定到表达式。

这是一个 plunkr：[http ://plnkr.co/edit/65EBiySUc1iWCWG6Ov98?p=preview](http://plnkr.co/edit/65EBiySUc1iWCWG6Ov98?p=preview)

```
<input type="text" ng-model="name"><br>
<input type="text" ng-model="user.name" 
ng-model-options="{ getterSetter: true }"> 
```

更多信息在`ngModelOptions`这里：[https ://docs.angularjs.org/api/ng/directive/ngModelOptions](https://docs.angularjs.org/api/ng/directive/ngModelOptions)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-08T08:33:01.937

这是我支持更深层次表达的方法，例如'model.level1.level2.value'

```
<input class="form-control" ng-model="Utility.safePath(model, item.modelPath).value"> 
```

其中 item.modelPath = 'level1.level2' 和 Utility(model, 'level1.level2') 是返回 model.level1.level2 的效用函数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-13T18:24:17.187

```
<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<body>

    <div ng-app="myApp" ng-controller="myCtrl">
        <form name="priceForm" ng-submit="submitPriceForm()">
            <div ng-repeat="x in [].constructor(9) track by $index">
                <label>
                    Person {{$index+1}} <span class="warning-text">*</span>
                </label>
                <input type="number" class="form-control" name="person{{$index+1}}" ng-model="price['person'+($index+1)]" />

            </div>
            <button>Save</button>
        </form>
    </div>

    <script>
        var app = angular.module('myApp', []);
        app.controller('myCtrl', function ($scope) {
            $scope.price = [];
            $scope.submitPriceForm = function () {
                //objects be like $scope.price=[{person1:value},{person2:value}....]
                console.log($scope.price);
            }
        });
    </script>
</body>
</html>
```

# ios - 滚动我的表格视图时值会发生变化

> ID：14183618
> 
> 赞同：0
> 
> 时间：2013-01-06T15:30:53.533
> 
> 标签：ios, uitableview

当我向上或向下滚动时，我的 tableview 会更改值。它似乎使用了表格其他部分的相同值。我想这是我的单元格创建中的一个错误，这是代码。请告诉我我做错了什么，谢谢！

编辑添加完整代码

```
//global indexpath to remember which cell tapped
NSIndexPath *globalPath;
@interface SearchViewController ()

@end

@implementation SearchViewController

//Load implementation once per launch
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self linkInputTableToDelegate];
    _temporaryResultsArray =[[NSMutableArray alloc]init];
    _flurryArray=[[NSMutableArray alloc]init];
    _numberOfSections=6;
}

-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:NO];
    [InputTable reloadData];

    textFromUserDefaults=[[[HelperMethods alloc]init]getObjectUserDefault:@"textFiltered"];
    [self addTextToFlurryArrayForFlurryAndSavedLists:_textFromUserDefaults];

}
-(void)viewDidDisappear:(BOOL)animated{

}

- (IBAction)searchButtonPressed:(UIButton *)sender {
     self.tabBarController.selectedIndex = 1;
}

//Makes the input table respond to delegate table view methods
-(void)linkInputTableToDelegate{
    _inputTable.dataSource=self;
    _inputTable.delegate=self;
}

-(void)performSearch:(NSString*)text{
    //do search
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    int numberOfRows=_numberOfSections;

    //Rows for iPhone 4
    if ([[UIScreen mainScreen]bounds].size.height==480) {
        numberOfRows=numberOfRows;
        //Rows for iPhone 5
    }else if ([[UIScreen mainScreen]bounds].size.height==568){
        numberOfRows=numberOfRows+1;
    }
    return numberOfRows;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    //In reality groups are created with 1 row inside, this is to allow spacing between the rows

    return 1;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *kCellID = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellID];

    if (!cell) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellID];
    }

    //Is the cell the same as the one clicked when going to ingredient filter
    BOOL cellIndexPathSameAsSelected=[self isCellIndexSameAsPreviousClicked:indexPath];

    cell.textLabel.textColor=[UIColor blackColor];
    if (cellIndexPathSameAsSelected && _textFromUserDefaults!=nil) {

        if (![cell.textLabel.text isEqualToString:_textFromUserDefaults]) {

            cell.textLabel.text=_textFromUserDefaults;
            [self performTextSearch:_textFromUserDefaults];
        }

    }
    return cell;
}

//Compares the previous clicked cell with the cell now selected
-(BOOL)isCellIndexSameAsPreviousClicked: (NSIndexPath*)cellPath{

    if (cellPath.row == globalPath.row && globalPath.section==cellPath.section) {
        return YES;
    }
    else{
        return NO;
    }
}

- (void)updateTableViewWithExtraRow :(NSIndexPath*)rowSelected{
    NSLog(@"number of sections =%i",_numberOfSections);
    if (rowSelected.section == _numberOfSections) {
        _numberOfSections ++;
    }
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellText = [tableView cellForRowAtIndexPath:indexPath].textLabel.text;
    [[[HelperMethods alloc]init]saveObjectToUserDefaults:cellText :@"textFiltered"];
    globalPath = indexPath;
    [self updateTableViewWithExtraRow:indexPath];
}

-(void)addTextToFlurryArrayForFlurryAndSavedLists:(NSString*)text{
    if ([_flurryArray count]==0 &&[text length]>0) {
        [_flurryArray addObject:text];
    }
    for (int i=0;i<[_flurryArray count];i++) {
        NSString *textInArray=[_flurryArray objectAtIndex:i];
        if (![textInArray isEqualToString:text]) {
            [_flurryArray addObject:text];
        }

    }
    NSLog(@"Total number of saved items = %i",[_flurryArray count]);
}

// Dispose of any resources that can be recreated.
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:39:17.770

问题是您仅在满足这些条件时才更改单元格中的文本。例如，当您的`cellIndexPathSameAsSelected`is时`NO`，您将单元格保持不变。所以你也应该在`else`那里添加一个并做一些设置。

**编辑：**

```
if (cellIndexPathSameAsSelected && _textFromUserDefaults!=nil) {

    if (![cell.textLabel.text isEqualToString:_textFromUserDefaults]) {

        cell.textLabel.text=_textFromUserDefaults;
        [self performTextSearch:_textFromUserDefaults];
    }

} else {
    cell.textLabel.text = [NSString string];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:38:37.167

通话后`[tableView dequeueReusableCellWithIdentifier:kCellID];`，您必须使用以下语句检查您的单元格是否真的可以重复使用：

```
if (!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:...];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:12:51.060

你应该做这样的事情

```
static NSString *kCellID = @"Cell";

// Acquire the cell if possible. 
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellID];
if (cell == nil) // Not possible to re-use cell, so create a new cell
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellID];
} 
```

# javascript - javascript：对于数组中的每个项目：创建 div，移动 div 并在时间段后删除 div

> ID：14183620
> 
> 赞同：2
> 
> 时间：2013-01-06T15:31:00.433
> 
> 标签：javascript, arrays, loops, time

我有一份名单；我想一一显示这些名字。该名称应该出现在容器的顶部，然后移至底部，然后消失。同时，下一个名字应该出现在容器的顶部，开始移动，......等等。

我还不是那样：我仍然需要创建使 div 移动的代码；我稍后会这样做，为此创建一个单独的函数可能更容易。

我很清楚我试图实现这一目标的方式很可能太麻烦了，但我只是一个初学者......所以我做了：

```
function myNamesFunction() {} {

  var y = 0;
  for (y = 0; y < document.getElementById("namelistID").getElementsByTagName('div').length;y++)

 {

 var vinden2 = document.getElementById("namelistID").getElementsByTagName('div')[y];

 {

  var div = document.createElement("div");
  div.innerHTML = (document.getElementById("namelistID").getElementsByTagName('div')[y].innerHTML);

  setTimeout(function () {
    document.getElementById("namecontentbox").appendChild(div)[y];
  }, 0000);
  setTimeout(function () {
    document.getElementById("namecontentbox").removeChild(div)[y];
  }, 2000);

 }

 }

} 
```

html代码是：

```
<div id="namelistID" style="display: none;">
  <div class="nameofperson">Person1</div>
  <div class="nameofperson">Person2</div>
  <div class="nameofperson">Person3</div>
  <div class="nameofperson">Person4</div>
</div>
<div id="namecontentbox"></div> 
```

现在的问题是，由于我添加了“settimeout”，似乎只有数组中的最后一项被创建和删除。如何从第一个开始，然后让每个项目出现和消失？

（关于如何继续（或重新启动......）的任何其他建议也非常受欢迎）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:34:27.663

这是一个经典问题，因为`y`' 值会随着您提供的函数`setTimeout`被调用而改变。

经典的解决方案是`y`在循环中使用闭包进行保护：

```
 for (y = 0; y < document.getElementById("namelistID").getElementsByTagName('div').length;y++) {
    (function(y){
      // use y
    })(y);
  } 
```

这个函数是新`y`变量的作用域，当它立即执行时，它会保护此时的值`y`。

如果您希望一个接一个地执行超时，而不是同时执行，请增加 time ：

```
 setTimeout(function () {
    document.getElementById("namecontentbox").removeChild(div)[y];
  }, 2000*(y+1)); 
```

# c++ - 在 VS 2010 C++ 中编译项目时出错

> ID：14183621
> 
> 赞同：3
> 
> 时间：2013-01-06T15:31:01.097
> 
> 标签：c++, visual-studio-2010, compilation

我正在尝试在 VS 2010 中编译我创建的一个项目，一个软件管理程序。在 VS6 和 VS2005 中，它可以完美编译。

1 - 视觉工作室 6 2 - 视觉工作室 2005 3 - 视觉工作室 2010

原始版本有一些我想稍后修复的错误，但首先我需要它来编译。

使用 VS 6 和 VS 2005 可以完美编译。

我添加了与每个需要它的文件（.cpp）相对应的库**#pragma comment(lib, "bufferoverflowU.lib" )**

但是，它没有用 bufferoverflowU.lib 解决任何问题

**错误是：**

```
1>------ Operación Volver a generar todo iniciada: proyecto: Gestion_v1, configuración: Release Win32 ------
1> StdAfx.cpp
1> WDoS.cpp
1> Helpers.cpp
1> Gestion.cpp
1> WWW.cpp
1>WWW.cpp(141): warning C4018: '<' : no coinciden signed/unsigned
1>WWW.cpp(136): warning C4101: 'dwTmp' : variable local sin referencia
1>WWW.cpp(481): warning C4244: '=' : conversion from 'DWORD' to 'char'; possible loss of data
1>WWW.cpp(482): warning C4244: '=' : conversion from 'DWORD' to 'char'; possible loss of data
1> Generando código...
1>LINK : warning LNK4108: /ALIGN specified without /DRIVER; image may not run
1>WDoS.obj : error LNK2019: unresolved external symbol ___security_cookie referenced in function "unsigned long __stdcall WDoS_HTTP(void *)" (?WDoS_HTTP@@YGKPAX@Z)
1>Gstion.obj : error LNK2001: unresolved external symbol ___security_cookie
1>WWW.obj : error LNK2001: unresolved external symbol ___security_cookie
1>WDoS.obj : error LNK2019: unresolved external symbol @__security_check_cookie@4 referenced in function "unsigned long __stdcall WDoS_HTTP(void *)" (?WDoS_HTTP@@YGKPAX@Z)
1>Gestion.obj : error LNK2001: unresolved external symbol @__security_check_cookie@4 
1>WWW.obj : error LNK2001: unresolved external symbol @__security_check_cookie@4
1>.\Release/Gestion_v1.exe : fatal error LNK1120: 2 unresolved externals
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T18:30:57.350

您未解决的外部是使用[`/GS`](http://msdn.microsoft.com/en-us/library/8dbf701c.aspx "/GS（缓冲区安全检查）")（缓冲区安全检查）编译器标志编译的结果，但没有链接到 CRT（`/NODEFAULTLIB`）。如果`/GS`未指定，则默认启用。您可以尝试通过指定来禁用缓冲区安全检查`/GS-`。

或者，您可以尝试添加您需要的代码片段。在Visual Studio 附带的 CRT 源中`__security_cookie`声明`<process.h>`和定义。`<gs_cookie.c>`由于您还明确指定`WinMain`了入口点并且不依赖 CRT 来执行所需的初始化，因此您必须[`__security_init_cookie`](http://msdn.microsoft.com/en-us/library/ms235362.aspx "__security_init_cookie")自己调用。可能还有更多内容可以编译，但这应该作为一个起点。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-06T18:17:31.323

确保您的项目未设置为 unicode。您的图书馆可能会有所不同。
尝试：项目属性->配置属性->常规->字符集=未设置

好的，试试这个问题：
[error LNK2001: unresolved external symbol](https://stackoverflow.com/a/5090609/47733)

# domain-driven-design - 设计 DTO 和 DO 服务层

> ID：14183625
> 
> 赞同：1
> 
> 时间：2013-01-06T15:31:28.263
> 
> 标签：domain-driven-design, dto, service-layer

我正在设计一个需要尽可能灵活的新的大型应用程序。
我选择主要使用 DDD 进行设计。
我的问题是关于将 DTO 对象转移回我的服务层中的 DO 对象。

即：这是我映射到数据库的域对象（使用 ORM）

```
public class Cat  
{  
    int ID {get; set;}  
    string Name {get; set;}
    string BloodType {get; set;}
    string Color {get; set;}

    void Run(){...}
    void Purr() {...}
} 
```

只有服务器操作需要方法和一些属性。
这就是我为这种猫类型设计另一个数据传输对象的原因：

```
public class CatDTO 
{  
    int ID {get; set;}  
    string Name {get; set;}
} 
```

在中间，我将设置一个对象映射器来将我的 DO 转换为 DTO（反之亦然）。
当客户想要更新猫的名字时，他会调用这样的服务

```
public void UpdateCat(CatDTO cat)  
{
   // What will happen here?
   Cat serverCat = Mapper.GetCat(CatDTO);

   CatDao.SaveOrUpdate(serverCat);
} 
```

当映射器将 DTO 对象转换回 DO 时，它必须命中 DB 以填充 Cat 对象的缺失属性（血型等）服务器端的其余部分无法使用 Cat 对象，因为它依赖于那些缺失的属性（即使我只是尝试更新数据库中的数据，我的 ORM 也会将血型字段更新为空字符串！）
我搜索了这个问题并且在网上找不到任何解释（或者至少有人像我一样被这个问题困扰）
我设计它的方式错误吗？也许我错过了我的 DDD 中的某些内容？
谢谢，帕维尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T20:42:17.563

此用例的通常工作流程是：按 ID 检索映射的域对象，应用 DTO 指定的更新，提交工作单元。您所说的 DAO 通常在 DDD 中称为存储库。代码应该更像：

```
public void UpdateCat(CatDTO catDto)  
{
   Cat cat = this.catRepository.Get(cat.ID);
   cat.Name = catDto.Name;
   this.catRepository.Commit();
} 
```

这`Commit`一步可以有多种方式。它可以是显式保存，也可以在`UpdateCat`方法之外提交工作单元。此工作流程也适用于所有相关场景。通常，域行为涉及检索适当的实体，在该实体上调用某些行为，然后将结果更改提交到数据库。

此外，DTO 不应直接映射回现有实体。相反，最好将它们视为表示要应用于现有实体的更改，并且代码应该反映这一点。这部分是因为现有实体由存储库“拥有”，并且存储库负责重构，而不是 DTO 映射器。

# c - 执行函数后程序似乎冻结了？

> ID：14183630
> 
> 赞同：0
> 
> 时间：2013-01-06T15:33:13.903
> 
> 标签：c

我正在做一个客户订单应用程序。基本上它是一个数据库（如 e-bay），客户必须在系统中注册才能购买产品。我目前遇到的问题是当我来修改客户时。

基本上，当我运行程序时，我有一个菜单。我选择客户，我有一个子菜单，我选择修改客户数据。然后它要求我输入一个 id，程序会检查它是否有效。如果 ID 号有效，它会继续让您选择要修改的标准。修改该标准后，它会打印出~~~ITEM EDITED~~~ 然后就像冻结一样。之后什么都没有发生，我必须自己终止程序。

输入无效 ID 时也会发生这种情况。发生这种情况时，它会打印出主菜单，当我输入一个数字以从主菜单中选择时，什么也没有发生。

我尝试自己解决，但找不到问题。我尝试使用`exit(0)`而不是`break;`在案件之后使用，但发生了同样的问题。下面是修改函数的代码。只是为了让您知道我有一个包含所有必要信息的头文件，例如结构声明。

```
modify_customer()
{
setvbuf(stdout, NULL, _IONBF, 0);
setvbuf(stderr, NULL, _IONBF, 0);

char another;
int flag = 0;
int choice;
char x[8];

FILE *pCust;
int size;

printf("\nENTER CUSTOMER ID NUMBER: ");
//fflush(stdout);
scanf("%s",x);

flag = checkcustomer(x);

if(flag==0)
{
    pCust=fopen("customer.txt","r+b");
    rewind(pCust);

    while(fread(&cust,sizeof(cust),1,pCust))
    {
        if(strcmp(cust.id,x)==0)
        {
            printf("\nid ==> %s",cust.id);
            printf("\nname ==> %s",cust.name);
            printf("\nsurname ==> %s",cust.surname);
            printf("\naddress ==> %s",cust.address);
            printf("\nDO YOU WANT TO EDIT THIS REDORD [Y/N]: ");
            scanf("%s", &another);
            fflush(pCust);

            if(another=='Y'|| another=='y')
            {
                printf("\n(1) EDIT ID NUMBER");
                printf("\n(2) EDIT NAME");
                printf("\n(3) EDIT SURNAME");
                printf("\n(4) EDIT ADDRESS");

                printf("\nenter choice (1) - (4) to edit: ");
                //fflush(stdout);
                scanf("%d",&choice);

                switch(choice)
                {
                case 1 : printf("\nEDIT RECORD [ID]");
                         printf("\nenter new customerID:");
                         scanf("%s",cust.id);
                         size = sizeof(cust);
                         fseek(pCust,-size,SEEK_CUR);
                        fwrite(&cust,sizeof(cust),1,pCust);
                         break;

                case 2 : printf("\nEDIT RECORD [NAME]");
                         printf("\nenter new name: ");
                         //fflush(stdout);
                         scanf("%s",cust.name);
                         size = sizeof(cust);
                         fseek(pCust,-size,SEEK_CUR);
                        fwrite(&cust,sizeof(cust),1,pCust);
                         break;

                case 3 : printf("\nEDIT RECORD [SURNAME]");
                         printf("\nenter new surname: ");
                         //fflush(stdout);
                         scanf("%s",cust.surname);
                         size = sizeof(cust);
                         fseek(pCust,-size,SEEK_CUR);
                        fwrite(&cust,sizeof(cust),1,pCust);
                         break;

                case 4 : printf("\nEDIT RECORD [ADDRESS]");
                         printf("\nenter new address: ");
                         //fflush(stdout);
                         scanf("%s",cust.address);
                         size = sizeof(cust);
                         fseek(pCust,-size,SEEK_CUR);
                        fwrite(&cust,sizeof(cust),1,pCust);
                         break;
                }
                printf("\n~~~ITEM EDITED~~~");
                break;
            }
            else
            {
                printf("\nRECORDS ARE NOT MODIFIED");
                customer_menu();
            }
        }
    }
}
if(flag==1)
{
    printf("\nITEM DOES NOT EXIST. TRY AGAIN");
    main_menu();
}
fflush(stdout);
getch();
fclose(pCust);

return 0;
} 
```

# javascript - 基于 id、class、href 或 name 中的关键字的 javascript 类查找元素

> ID：14183631
> 
> 赞同：1
> 
> 时间：2013-01-06T15:33:18.863
> 
> 标签：javascript

我创建了一个类，以便我可以根据元素 id、类、名称或 href 中的关键字查找特定元素。如果找到匹配项，则将其推送到数组中。我设法让它自己工作，但是当我把它变成一个类时，它不会将任何元素推送到数组中。它似乎在一定程度上起作用，因为它找到了所有`a`元素，但它与关键字不匹配。这里似乎有什么问题？

**HTML**

```
<a href="linka.html" id="poll-answer-8234" class="ca" name="poll_430" value="8234">
<a href="linka.html" id="poll-answer-9234" class="ca" name="poll_430" value="9234">  
<a href="linkb.html" id="survey-answer-7866" class="cb" name="poll_430" value="7866">
<a href="linkb.html" id="survey-answer-8998" class="cb" name="poll_430" value="8998">
<a href="linkc.html" id="quiz-answer-7866" class="cc" name="poll_430" value="7866">
<a href="linkc.html" id="quiz-answer-8998" class="cc" name="poll_430" value="8998"> 
```

**JS**

```
function nodeBulder(parameters) {
    this.selecter = parameters.selecter;
    this.targets = [];
    this.nodes = document.getElementsByTagName(parameters.tag);
    this.keyword = parameters.keyword;
    this.build = function () {
        switch (this.selecter) {
            case "byid":
                var count, node;
                for (count = 0; count < this.nodes.length; count++) {
                    node = this.nodes[count].id.indexOf(this.keyword);
          console.log(node);
                    if (node === 0) {
                        this.targets.push(this.nodes[count]);
                    }
                }
                break;
            case "byname":
                var count, node;
                for (count = 0; count < this.nodes.length; count++) {
                    node = this.nodes[count].name.indexOf(this.keyword);
                    if (node === 0) {
                        this.targets.push(this.nodes[count]);
                    }
                }
                break;
            case "byclass":
                var count, node;
                for (count = 0; count < this.nodes.length; count++) {
                    node = this.nodes[count].className.indexOf(this.keyword);
                    if (node === 0) {
                        this.targets.push(this.nodes[count]);
                    }
                }
                break;
            case "byhref":
                var count, node;
                for (count = 0; count < this.nodes.length; count++) {
                    node = this.nodes[count].href.indexOf(this.keyword);
                    if (node === 0) {
                        this.targets.push(this.nodes[count]);
                    }
                }
                break;
        }
    }
    this.random = function () {
        return this.targets[Math.floor(Math.random() * this.targets.length)];
    }
}

var idTest = new nodeBulder({ selecter: "byid", tag: 'a', keyword: 'poll-answer' });
var classTest = new nodeBulder({ selecter: "byclass", tag: 'a', keyword: 'cc' });

console.log(idTest.targets);
console.log(classTest.targets); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:48:00.410

问题是，您没有调用 build 方法。

```
function nodeBulder(parameters) {
    this.selecter = parameters.selecter;
    this.targets = [];
    this.nodes = document.getElementsByTagName(parameters.tag);
    this.keyword = parameters.keyword;
    this.build = function () {
        switch (this.selecter) {
            case "byid":
                var count, node;
                for (count = 0; count < this.nodes.length; count++) {
                    node = this.nodes[count].id.indexOf(this.keyword);
          console.log(node);
                    if (node === 0) {
                        this.targets.push(this.nodes[count]);
                    }
                }
                break;
            case "byname":
                var count, node;
                for (count = 0; count < this.nodes.length; count++) {
                    node = this.nodes[count].name.indexOf(this.keyword);
                    if (node === 0) {
                        this.targets.push(this.nodes[count]);
                    }
                }
                break;
            case "byclass":
                var count, node;
                for (count = 0; count < this.nodes.length; count++) {
                    node = this.nodes[count].className.indexOf(this.keyword);
                    if (node === 0) {
                        this.targets.push(this.nodes[count]);
                    }
                }
                break;
            case "byhref":
                var count, node;
                for (count = 0; count < this.nodes.length; count++) {
                    node = this.nodes[count].href.indexOf(this.keyword);
                    if (node === 0) {
                        this.targets.push(this.nodes[count]);
                    }
                }
                break;
        }
    }
    this.random = function () {
        return this.targets[Math.floor(Math.random() * this.targets.length)];
    }
}

var idTest = new nodeBulder({ selecter: "byid", tag: 'a', keyword: 'poll-answer' });
idTest.build();
var classTest = new nodeBulder({ selecter: "byclass", tag: 'a', keyword: 'cc' });
classTest.build();

console.log(idTest.targets);
console.log(classTest.targets); 
```

在这里查看[演示](http://jsfiddle.net/Uz8wQ/)

# maven - maven 存储库代理混淆

> ID：14183636
> 
> 赞同：0
> 
> 时间：2013-01-06T15:33:59.413
> 
> 标签：maven, settings, nexus

我正在使用 maven 3.0（带有 nexus 设置）来构建我的项目并且正在构建失败：

```
Caused by: org.sonatype.aether.transfer.ArtifactNotFoundException: Could not find artifact directory:apacheds-core:jar:${apacheds_version} in central (http://localhost:8081/nexus/content/repositories/central)
at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:945)
at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:940) 
```

我的基本困惑是：**当 maven 在 pom.xml 中看到依赖项时，它如何在远程存储库中查找工件**？

我目前的理解是：

1.  它将首先查看本地 repo ( .m2/repository )。

2.  如果在那里**没有**找到，那么它将尝试在**存储库**标签下的 settings.xml 中指定的存储库中搜索。 **问题**：它是否尝试所有提到的存储库。**还是只是第一个**？下面我提到了 5 个 repos：maven 是逐个搜索所有这些还是只搜索第一个？

`<repositories> <repository> <id>central</id> <url>http://localhost:8081/nexus/content/repositories/central</url> </repository> <repository> <id>remote</id> <url>http://localhost:8081/nexus/content/repositories/remote-proxy-nexus-central</url> </repository> <repository> <id>thirdParty</id> <url>http://localhost:8081/nexus/content/repositories/thirdparty</url> </repository> <repository> <id>codehaus</id> <url>http://localhost:8081/nexus/content/repositories/codehaus-snapshots</url> </repository> <repository> <id>public</id> <url>http://localhost:8081/nexus/content/groups/public</url> </repository> </repositories>`

我最后的困惑是关于 settings.xml 中的代理部分。这些位置是什么：

```
 <proxy>
  <id>remote-proxy-nexus-central</id>
  <active>true</active>
  <protocol>http</protocol>
  <host>repo1.maven.org/maven2</host>
  <port>8080</port>

</proxy> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:49:03.747

我可以告诉你，我们使用本地 Nexus，并且我们所有的用户在他们的 settings.xml 中都有以下内容：

```
<mirror>
    <id>our-mirror</id>
    <name>Org Public Mirror</name>
    <url>http://host/nexus/content/groups/public</url>
    <mirrorOf>*</mirrorOf>
</mirror> 
```

这会导致 maven 的任何调用都转到 Nexus 以获取依赖项。您对 Maven 首先查看本地 .m2 是正确的。

Nexus 代理了许多存储库，并拥有所有存储库的联合（对于调用它的 maven 进程）。这意味着开发人员的本地 maven 只知道一个存储库：Nexus。Nexus 将在其代理/托管存储库之一中提供所有需要的依赖项 ID。

至于 Proxy，我们有一个组织代理，但是 Nexus 在 org 中（它有代理配置为允许访问外部世界），所以 maven 不需要这个特定的配置。

我希望这可以为您提供一些入门信息。

我强烈建议您查看与 Nexus/Maven 相关的配置： http: [//www.sonatype.org/](http://www.sonatype.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:20:50.783

将 Maven 与 Nexus 结合使用的正确设置记录在 Repository Management with Nexus 一书中。示例 settings.xml 在[这里](http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html)。阅读描述并注意您需要为中央存储库添加覆盖以启用快照。

完成此操作后，您无需在 settings.xml 中配置代理，因为它可以在您的本地网络中使用而无需代理（通常）。相反，您可以在 Nexus 中配置代理设置，以便它反过来可以访问您正在代理的 Central 等存储库。全局代理配置[在此处](http://www.sonatype.com/books/nexus-book/reference/configxn-sect-customizing-server.html#_default_http_proxy_settings)记录，如果需要，您还可以为每个代理存储库配置细节，例如，如果您需要代理存储库的用户名/密码，因为它是私有的..

# yii - Yii - 从 DB 生成页面元信息

> ID：14183641
> 
> 赞同：0
> 
> 时间：2013-01-06T15:34:22.920
> 
> 标签：yii, tags, seo, meta

我需要有关从数据库生成元标记并将它们设置在不同控制器操作中的帮助。

我在 DB 中有一个表，我在其中存储每个控制器操作的元信息（关键字、描述）。我想在每个动作中选择这个值，并使用`registerMetaTag()`.

我想知道的是这些查询会对页面加载时间产生多大影响，以及是否有更好的方法来做到这一点？

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:20:36.337

如果您的数据库是传统设置的，这几乎不会引起注意。它将为每个查询增加 10,000 分之一秒的加载时间。

但是，对于此类低频数据，您应该大量缓存，因为您知道它不会经常更改。这意味着性能影响可以忽略不计，因为它是从文件/内存存储/内存表中提取的，具体取决于缓存的设置方式。

当然，这都是一个概括，但问题也是如此。如果您有任何特殊设置或更具体的优化问题，只需发表评论或提出新问题。

**PS**
不要微优化。去做吧，分析影响，决定是否需要性能改进，以及到什么程度。

[http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)

# serialization - ViewScoped Bean 中 SessionScope 的 ManagedProperty - 瞬态？

> ID：14183643
> 
> 赞同：6
> 
> 时间：2013-01-06T15:34:29.663
> 
> 标签：serialization, jsf-2, managed-bean, transient

我有这种 JSF Beans 结构：

```
@ManagedBean
@ViewScoped
public class ViewBeany implements Serializable {

....
    @ManagedProperty(value='#{sessionBeany})
    transient private SessionBeany sessionBeany;
...

    public getSessionBeany() { ... };
    public setSessionBeany(SessionBeany sessionBeany) { ... };

} 
```

原因`transient`是会话 bean 有一些不可序列化的成员，不能被序列化。

这行得通吗？
如果没有，我该如何解决无法序列化`SesionBeany`但必须将其保留为视图范围 bean 下的托管属性的问题？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-06T15:49:09.040

这行不通。如果视图范围的 bean 被序列化，`transient`则跳过所有字段。JSF 在反序列化后不会重新注入托管属性，因此您最终会得到一个视图范围的 bean，而没有会话范围的 bean 属性，这只会导致 NPE。

在这个特定的结构中，最好的办法是在 getter 中引入延迟加载，并通过 getter 而不是直接字段访问来获取会话 bean。

```
private transient SessionBeany sessionBeany;

public SessionBeany getSessionBeany() { // Method can be private.
    if (sessionBeany == null) {
        FacesContext context = FacesContext.getCurrentInstance();
        sessionBeany = context.getApplication().evaluateExpressionGet(context, "#{sessionBeany}", SessionBeany.class);
    }

    return sessionBeany;
} 
```

# html - iOS上滚动iframe解决了，但是iframe页面显示不完整

> ID：14183647
> 
> 赞同：7
> 
> 时间：2013-01-06T15:35:22.183
> 
> 标签：html, cordova, iframe, web-applications, jquery-plugins

我正在尝试在 iOS 上滚动 iframe，我成功了，它滚动得很好，参考：

[http://home.jejaju.com/play/iframe-scroll.html](http://home.jejaju.com/play/iframe-scroll.html)

[http://areaaperta.com/nicescroll/demo.html](http://areaaperta.com/nicescroll/demo.html)

但是，所有解决方案都有一个问题：iframe 页面没有完全显示......

我在我的 iphone 和 ipad 上进行了测试，iframe 页面显示不稳定。 ![在此处输入图像描述](../Images/e8aab74c0461589e36cb92b210783889.png)

任何的想法？

例子：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9;FF=3;chrome=1;OtherUA=4" />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.1.js"></script>
    <script type="text/javascript">
    $(function(){
        if (/iPhone|iPod|iPad/.test(navigator.userAgent))
            $('iframe').wrap(function(){
                var $this = $(this);
                return $('<div />').css({
                    width: $this.attr('width'),
                    height: $this.attr('height'),
                    overflow: 'scroll',
                    '-webkit-overflow-scrolling': 'touch'
                });
            });
    })
    </script>
    <title>Untitled</title>
</head>
<body>
stuff
<div>
<iframe src="iframe-scroll-long.html" height="500" width="500"></iframe>
</div>
more stuff
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-25T14:12:16.437

这个解决方案有点 hack，但是在 iOS 上已经过测试并且可以正常工作：

```
<div style="width: 760px; height: 500px; overflow: scroll !important;-webkit-overflow-scrolling:touch !important;">
    <object type="text/html" data="HTTP://YOURPAGE.URL" style="width:1000px; height:10000px;">
    </object>       
</div> 
```

基本上，由于滚动在 DIV 中可以正常工作，因此您可以使用 object 标记嵌入页面代码。问题是，由于同源策略，您无法确定目标页面的尺寸。我发现设置一个巨大的页面大小是完全可行的（没有注意到延迟或波动......只是空白）

您可以轻松确定客户端操作系统并将此代码添加到 iOS 设备。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T20:40:05.200

我发现 div 与“绝对”风格的组合和 nicescroll 确实修复了choppines。

您必须在 iframe 加载的页面上加载 nicescroll。在同一页面中，用 div 包装所有内容（绝对样式）

```
 #content {   position:absolute; } 
```

使用包装的 div 内容加载 nicescroll。

```
 $(document).ready(function() {
    $("html").niceScroll("#content"); 
  }); 
```

链接到演示页面，因此您可以查看代码：[http ://areaaperta.com/nicescroll/demo/iframe6.html](http://areaaperta.com/nicescroll/demo/iframe6.html)

自动，使用 iOS 原生滚动，在其他平台上你会激活 nicescroll。

我在装有 iOS 5.1 的 iPad 上进行了测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T03:54:57.223

尝试添加`-webkit-transform:translate3d(0,0,0)` 到 iframe 样式和其中的所有元素以强制硬件加速 - 应该减少波动。

在主页样式中：

```
iframe {  -webkit-transform:translate3d(0,0,0); } 
```

在 iframe 样式中：

```
p { -webkit-transform:translate3d(0,0,0); } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-29T11:33:21.633

我发现这是框架内相对定位的内容的问题。删除时摆脱这种行为`position: relative;`

# visual-c++ - MSVC 2010 - 在 x64 中构建时出现错误 0xc000007b

> ID：14183649
> 
> 赞同：1
> 
> 时间：2013-01-06T15:36:26.810
> 
> 标签：visual-c++

标题非常简单 - 在 x64 中构建时我根本无法运行任何东西，并且我收到一个带有此错误代码的消息框。你知道这里可能有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:30:33.063

这是`STATUS_INVALID_IMAGE_FORMAT`，您可以在 ntstatus.h SDK 头文件中找到这些错误代码。

它肯定与构建 x64 代码密切相关。只要您的程序依赖于 32 位代码，尤其是在 DLL 中，您就会得到这个状态码。您的程序在启动时尝试加载 DLL 时将无法启动，64 位进程不能包含任何 32 位代码。或者相反，一个 32 位进程试图加载一个 64 位 DLL。

查看程序的所有依赖项，尤其是您链接的导入库。一切都必须针对 x64 构建。您可以使用 SysInternals 的 ProcMon 实用程序来查找无法加载的 DLL，这在这是一个 DLL Hell 问题时很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:45:08.557

只是对上述正确答案的补充：还检查您的 .manifest-files (resp.#pragma comment(linker,"/manifestdependency...) 并确保您有 32 位的 processorArchitecture='x86' 和 processorArchitecture= 'amd64' 用于 x64 代码。

# c# - 在 excel 中启用自定义任务窗格的滚动

> ID：14183652
> 
> 赞同：0
> 
> 时间：2013-01-06T15:36:34.417
> 
> 标签：c#, excel, vsto

我正在开发 excel 插件，我已将 WPF 控件添加到 excel 中的自定义任务窗格中，当将自定义窗格停靠在左侧时，窗格末尾的某些控件不显示。我想为自定义任务窗格应用滚动，我该如何实现

这是我的代码

```
 CustomerPane ctp = new CustomerPane();

 CustomTaskPane _customerTaskPane = Globals.ThisAddIn.CustomTaskPanes.Add(new 
 WpfPanelHost{ Child = ctp }, "Customers"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:39:38.543

我解决了我的问题，我将滚动查看器添加到 WPF 用户控件并解决了我的问题

```
 <ScrollViewer VerticalScrollBarVisibility="Auto"> 
         //content here 
   </ScrollViewer> 
```

# java - 为什么我在 androidmanifest.xml 中使用 configchanges 声明的 adactivity 出现此错误

> ID：14183656
> 
> 赞同：0
> 
> 时间：2013-01-06T15:37:17.980
> 
> 标签：java, android, android-activity, android-manifest, admob

**安卓2.1**

**googleAdmobAdsAsdk6.2.1.jar**

当我在我的应用程序中测试我的广告时出现我的问题 --> 错误 --> 你必须在 androidmanifest.xml 中使用 configchanges 声明 adactivity

我正在尝试添加这样的完整活动

```
 <activity android:name="com.google.ads.AdActivity"
      android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

**找我这个错误**

```
 error: Error: String types not allowed (at 'configChanges' with value 'keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize'). 
```

**AndroidManifest.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <!--
   Licensed to the Apache Software Foundation (ASF) under one
   or more contributor license agreements.  See the NOTICE file
   distributed with this work for additional information
   regarding copyright ownership.  The ASF licenses this file
   to you under the Apache License, Version 2.0 (the
   "License"); you may not use this file except in compliance
   with the License.  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing,
   software distributed under the License is distributed on an
   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
   KIND, either express or implied.  See the License for the
   specific language governing permissions and limitations
   under the License.
    -->
    <manifest 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:windowSoftInputMode="adjustPan"
  package="com.afrogfx.VerbTenses" 
  android:versionName="1.1" 
  android:versionCode="5" >

<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:resizeable="true"
    android:anyDensity="true"
    />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application android:icon="@drawable/icon" android:label="@string/app_name" android:allowBackup="true" >

    <activity android:name="VerbTenses" android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar"
            android:configChanges="orientation|keyboardHidden|keyboard">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <!-- AdMobActivity definition -->
    <activity android:name="com.google.ads.AdActivity"
android:configChanges="keyboard|keyboardHidden|orientation|"/>

</application>

<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="17"/>
    </manifest> 
```

**主要活动.java**

```
 /*
   Licensed to the Apache Software Foundation (ASF) under one
   or more contributor license agreements.  See the NOTICE file
   distributed with this work for additional information
   regarding copyright ownership.  The ASF licenses this file
   to you under the Apache License, Version 2.0 (the
   "License"); you may not use this file except in compliance
   with the License.  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing,
   software distributed under the License is distributed on an
   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
   KIND, either express or implied.  See the License for the
   specific language governing permissions and limitations
   under the License.
    */

    package com.afrogfx.VerbTenses;

    import android.app.Activity;
    import android.os.Bundle;
    import com.google.ads.*;

    import org.apache.cordova.*;

    @SuppressWarnings("unused")
    public class VerbTenses extends DroidGap
    {
private static final String AdMob_Ad_Unit = "a150d4ba1fd9a78";
private AdView adView;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    super.setIntegerProperty("splashscreen", R.drawable.splash);
    super.loadUrl("file:///android_asset/www/overview.html");

    //admob
    adView = new AdView(this, AdSize.BANNER, AdMob_Ad_Unit_HERE); 
    super.root.addView(adView); 
    AdRequest request = new AdRequest();
    //request.setTesting(false);
    adView.loadAd(request);
}
    } 
```

**布局 Main.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
    <TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
/>
    </LinearLayout> 
```

**日志猫**

```
 01-06 17:15:48.105: I/dalvikvm(283): Could not find method android.webkit.WebView.<init>, referenced from method org.apache.cordova.CordovaWebView.<init>
    01-06 17:15:48.105: W/dalvikvm(283): VFY: unable to resolve direct method 417: Landroid/webkit/WebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
    01-06 17:15:48.105: D/dalvikvm(283): VFY: replacing opcode 0x70 at 0x0001
    01-06 17:15:48.105: D/dalvikvm(283): VFY: dead code 0x0004-005b in Lorg/apache/cordova/CordovaWebView;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;IZ)V
    01-06 17:15:48.395: I/CordovaLog(283): Changing log level to DEBUG(3)
    01-06 17:15:48.395: I/CordovaLog(283): Found preference for useBrowserHistory=true
    01-06 17:15:48.436: D/CordovaLog(283): Found preference for useBrowserHistory=true
    01-06 17:15:48.436: I/CordovaLog(283): Found preference for exit-on-suspend=false
    01-06 17:15:48.436: D/CordovaLog(283): Found preference for exit-on-suspend=false
    01-06 17:15:48.505: D/JsMessageQueue(283): Set native->JS mode to 2
    01-06 17:15:48.505: I/CordovaWebView(283): Disabled addJavascriptInterface() bridge since Android version is old.
    01-06 17:15:48.525: D/DroidGap(283): DroidGap.init()
    01-06 17:15:48.544: D/CordovaWebView(283): >>> loadUrl(file:///android_asset/www/overview.html)
    01-06 17:15:48.544: D/PluginManager(283): init()
    01-06 17:15:48.614: D/CordovaWebView(283): >>> loadUrlNow()
    01-06 17:15:48.645: E/Ads(283): The android:configChanges value of the com.google.ads.AdActivity must include screenLayout.
    01-06 17:15:48.645: E/Ads(283): The android:configChanges value of the com.google.ads.AdActivity must include uiMode.
    01-06 17:15:48.645: E/Ads(283): The android:configChanges value of the com.google.ads.AdActivity must include screenSize.
    01-06 17:15:48.654: E/Ads(283): The android:configChanges value of the com.google.ads.AdActivity must include smallestScreenSize.
    01-06 17:15:48.654: E/Ads(283): You must have AdActivity declared in AndroidManifest.xml with configChanges.
    01-06 17:15:49.284: D/DroidGap(283): Resuming the App
    01-06 17:15:49.435: D/dalvikvm(283): GC_FOR_MALLOC freed 3187 objects / 290448 bytes in 101ms
    01-06 17:15:49.515: D/DroidGap(283): onMessage(onPageStarted,file:///android_asset/www/overview.html)
    01-06 17:15:49.585: D/SoftKeyboardDetect(283): Ignore this event
    01-06 17:15:49.704: D/SoftKeyboardDetect(283): Ignore this event
    01-06 17:15:50.444: D/dalvikvm(283): GC_FOR_MALLOC freed 1079 objects / 131560 bytes in 120ms
    01-06 17:15:50.465: D/webviewglue(283): nativeDestroy view: 0x26b710
    01-06 17:15:57.385: D/CordovaLog(283): ReferenceError: Can't find variable: setpagenum
    01-06 17:15:57.385: D/CordovaLog(283): file:///android_asset/www/overview.html: Line 35 : ReferenceError: Can't find variable: setpagenum
    01-06 17:15:57.385: E/Web Console(283): ReferenceError: Can't find variable: setpagenum at file:///android_asset/www/overview.html:35
    01-06 17:15:57.396: D/Cordova(283): onPageFinished(file:///android_asset/www/overview.html)
    01-06 17:15:57.396: D/DroidGap(283): onMessage(onNativeReady,null)
    01-06 17:15:57.405: D/DroidGap(283): onMessage(onPageFinished,file:///android_asset/www/overview.html)
    01-06 17:15:59.479: D/DroidGap(283): onMessage(spinner,stop) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:23:56.747

您需要将所有 7 项放入：

1.  键盘
2.  键盘隐藏
3.  方向
4.  屏幕布局
5.  用户界面模式
6.  屏幕尺寸
7.  最小屏幕尺寸

### 例如：

```
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T15:47:42.717

错误地添加了一个**“|”** **android:configChanges**中的额外内容，这就是它读取为 String 的原因，所以请删除它。

```
<activity android:name="com.google.ads.AdActivity"
android:configChanges="keyboard|keyboardHidden|orientation|"/> 
```

请删除这个**“|”** 最后一个字符，然后写成..

```
<activity android:name="com.google.ads.AdActivity"
android:configChanges="keyboard|keyboardHidden|orientation"/> 
```

完成这个清理项目后，希望它对你有用..:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:45:33.433

Just try to change the `minSdkVersion=17` in your `Manifest` file.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T15:47:18.943

尝试将`project.properties`文件中的项目目标更改为

`# Project target.`

`target=android-13`

# kendo-ui - 如何使用此 JSON 绑定到 Kendo UI Grid

> ID：14183659
> 
> 赞同：0
> 
> 时间：2013-01-06T15:37:25.610
> 
> 标签：kendo-ui

此 JSON 从现有服务器返回，可能不会更改 - 使用 JSONLint 检查为有效。自动绑定对此不起作用，我无法使用网格：

```
[
{
    "SearchResult":{
        "assets":[
            {
                "agent":"6.1.0",
                "id":1,
                "model":"Gateway1",
                "modelId":2,
                "name":"Name",
                "serialNumber":"Serial01",
            },
            {
                "agent":"M2M",
                "id":2,
                "model":"Gateway1",
                "modelId":3,
                "name":"Name",
                "serialNumber":"Serial02"
            }
        ],
        "searchCriteria":{
            "paginationEnabled":false,
            "rowsPerPage":-1,
            "startRow":-1,
            "totalAvailableRows":-1,
            "alternateId":{
                "@xsi.nil":"true"
            },
            "modelNumber":{
                "@xsi.nil":"true"
            },
            "name":"*",
            "serialNumber":{
                "@xsi.nil":"true"
            }
        }
    }
}
] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T17:03:26.860

[您应该在DataSource 的 schema](http://docs.kendoui.com/api/framework/datasource#schema-object)中指定包含数据的数组。

请记住，DataSource 适用于平面数组。要显示“资产”，请尝试以下操作：

```
schema: {
  data: function(rawData) { 
    return rawData[0].SearchResult.assets;
  }
} 
```

这是一个工作示例：http: [//jsbin.com/opocib/3/edit](http://jsbin.com/opocib/3/edit)

# grammar - SRGS / SISR 是否支持开放域变量？

> ID：14183660
> 
> 赞同：0
> 
> 时间：2013-01-06T15:37:33.183
> 
> 标签：grammar, voicexml

我的问题是关于语音识别语法规范语言：[http ://en.wikipedia.org/wiki/Speech_Recognition_Grammar_Specification](http://en.wikipedia.org/wiki/Speech_Recognition_Grammar_Specification)

我想知道是否可以定义带有开放域变量的句子，例如“我想从 {city1} 到 {city2}”这样的句子，但没有定义 {city1} 的所有可能值和 {city2}。语法处理器应该检测用户句子是否匹配模式，如果匹配，则将这些变量的实际分配发送到下一个模块。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:20:12.780

SRGS 不支持有时称为通配符的内容。您将需要定义您希望系统理解的所有城市。您将为列出所有城市的城市定义一个规则，然后您的基本短语“我想从#cities 到#cities”将引用该规则。这在[SRGS 规范](http://www.w3.org/TR/speech-grammar/#S3.1)中进行了讨论。

# php - 程序函数与静态方法。哪个更好或避免两者？

> ID：14183661
> 
> 赞同：2
> 
> 时间：2013-01-06T15:37:34.533
> 
> 标签：php, oop, static, dependency-injection

我只是在浏览 Codeigniter 的一些核心文件，我发现它使用了一些你可能称之为分散在各处的程序函数，比如在核心类中的某处获取配置类的实例，而不是将其注入到它的对象中只是

```
$config =& get_config(); 
```

我不是专家，但这样做不是很糟糕吗？对我来说，似乎让应用程序具有不必要的全局状态。

据我所见，它几乎与做类似的事情完全相同

```
$config = App::loadClass('config'); 
```

第二种方法比第一种方法更糟吗？我认为这可能是因为当以第二种方式调用它时，`App`类需要存在（并被定位）并以第一种方式调用它，不需要特定的类并且不需要包含类文件，因此要求较少。

我正在制作自己的框架，并且到目前为止一直避免使用任何静态的东西，但是当我查看领先框架的代码以获得想法或帮助时，我看到到处都是静态的东西，我想知道为什么？

您会认为领先的框架会编码得更好一些，或者使用全局方法可能不像许多人认为的那样有害，您怎么看？

在我的框架中，我必须将这个`$config`对象注入到许多类和一个`$logger`对象中，`$messages/$language`以及一个等等。我使用依赖注入容器和工厂，但与仅仅做相比还是有点痛苦

```
$config = App::loadClass('config');
$someSetting = $config->setting('some.setting');
Logger::write('debug', 'some message'); 
```

如果我要使用静态方法，我应该使用过程方法（Codeigniter 示例）还是嵌入在类中的方法？还是您强烈建议不要使用它们？

任何意见将非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:27:15.497

> 我不是专家，但这样做不是很糟糕吗？对我来说，似乎让应用程序具有不必要的全局状态。

正确的。应该避免这种情况。它不仅引入了全局状态，而且还发出了`strict`警告：

> 严格的标准：只有变量应该通过引用分配......

第二种方法比第一种方法更糟吗？不要认为它更糟，因为至少你没有得到“严格标准”的警告。但是您仍然真的想避免这种情况。> 我正在制作自己的框架，并且到目前为止一直避免使用任何静态的东西，但是当我查看领先框架的代码以获得想法或帮助时，我看到到处都是静态的东西，我想知道为什么？这是因为大多数流行的框架都很糟糕。他们不仅引入了糟糕的编码实践，而且通常还会告诉您它使用的是 MVC 结构（大多数显然不是）。> 你会认为领先的框架会编码得更好一点，或者使用全局方法可能不像很多人认为的那样有害，你怎么看？同样，这些框架充满了 WTF。如果你真的认为你想研究一个流行的框架，你应该研究 Symfony 2 或 Zend FW 2。不是因为它们以正确的方式做所有事情，而是因为它们是最好的（流行的）恕我直言。> 在我的框架中，我必须将这个 $config 对象注入到许多类和一个 $logger 对象和一个 $messages/$language 等等。依赖注入是解决这个问题的正确方法（至少如果您要采用 OOP 方法）。但是，如果你的类有很多依赖项，你可能不得不停下来想一想你的类可能做的太多了。也就是他们有[太多的责任]（http://en.wikipedia.org/wiki/Single_responsibility_principle）。> 如果我' 我要使用静态方法我应该使用程序方法（Codeigniter 示例）还是嵌入在类中的方法？还是您强烈建议不要使用它们？强烈建议反对两者。正如您在介绍全局状态中所述。让测试变得痛苦。并且与过程编程比 OOP 有更多的关系。*PS 在我看来，我给了你两个最好的 FW。如果你想知道 CodeIgniter 和 Cake 是最差的。* 为了完成这篇文章，来自 [PHP 聊天室](https://chat.stackoverflow.com/transcript/11?m=6055399#6055399) 的一些相关消息由 [ Lusitanian](https://chat.stackoverflow.com/users/1477526/lusitanian): > *Microframework* (n): 少量废话。另请参阅 *Framework* (n)：大量废话。正如您在介绍全局状态中所述。让测试变得痛苦。并且与过程编程比 OOP 有更多的关系。*PS 在我看来，我给了你两个最好的 FW。如果你想知道 CodeIgniter 和 Cake 是最差的。* 为了完成这篇文章，来自 [PHP 聊天室](https://chat.stackoverflow.com/transcript/11?m=6055399#6055399) 的一些相关消息由 [ Lusitanian](https://chat.stackoverflow.com/users/1477526/lusitanian): > *Microframework* (n): 少量废话。另请参阅 *Framework* (n)：大量废话。正如您在介绍全局状态中所述。让测试变得痛苦。并且与过程编程比 OOP 有更多的关系。*PS 在我看来，我给了你两个最好的 FW。如果你想知道 CodeIgniter 和 Cake 是最差的。* 为了完成这篇文章，来自 [PHP 聊天室](https://chat.stackoverflow.com/transcript/11?m=6055399#6055399) 的一些相关消息由 [ Lusitanian](https://chat.stackoverflow.com/users/1477526/lusitanian): > *Microframework* (n): 少量废话。另请参阅 *Framework* (n)：大量废话。//chat.stackoverflow.com/transcript/11?m=6055399#6055399) by [Lusitanian](https://chat.stackoverflow.com/users/1477526/lusitanian): > *Microframework* (n): 一个小的废话的数量。另请参阅 *Framework* (n)：大量废话。//chat.stackoverflow.com/transcript/11?m=6055399#6055399) by [Lusitanian](https://chat.stackoverflow.com/users/1477526/lusitanian): > *Microframework* (n): 一个小的废话的数量。另请参阅 *Framework* (n)：大量废话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T15:49:36.903

在我看来，CodeIgniter 是一个低质量的 PHP 框架，例如在 Zend Framework 或 Symfony 之下。另外我认为静态函数在 OOP 中有其特定的作用，例如可以在实现注册表模式时使用，用于日志等。关于程序函数，我强烈建议不要在 OOP 应用程序中使用它们。

# java - 如何为在 JTextField 中输入的文本调整对齐方式

> ID：14183663
> 
> 赞同：12
> 
> 时间：2013-01-06T15:37:42.233
> 
> 标签：java, swing, jtextfield

我想将文本的对齐方式设置为正确。实际上这些字段与货币有关，所以如果从右开始，它会看起来不错。

```
PreparedStatement stmt1 = con.prepareStatement("select sum(tv)as totalsum from mut_det WHERE rm_id = ?");
            ResultSet rs1;
            String rm1 = tf_rm_id.getText().trim();
            stmt1.setInt(1, Integer.parseInt(rm1));
            rs1 = stmt1.executeQuery();
            while (rs1.next()) {
                String text = rs1.getString("totalsum");
                tf_rsfig.setText(text);

            } 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-06T15:38:58.267

```
jTextField.setHorizontalAlignment(SwingConstants.RIGHT); 
```

( [JavaDoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingConstants.html#RIGHT) )

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T15:40:16.450

这应该将您在 JTextField 中输入的所有文本右对齐：

```
JTextField.setHorizontalAlignment(SwingConstants.RIGHT); 
```

# ruby-on-rails - Rails remote_ip 始终为 127.0.0.2

> ID：14183665
> 
> 赞同：0
> 
> 时间：2013-01-06T15:37:48.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用rails 3。我想获取客户端IP。我正在使用这个方法：request.remote_ip 并且总是得到 127.0.0.2。为什么 ？（也在 TorProject 上测试过）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:03:04.120

这将取决于您从哪里进行测试。如果它正在生产中，并且您正在从外部计算机（与服务器不在同一网络上）尝试此操作，它应该可以工作。否则是的，它应该是某种代理或网关翻译地址。

# c - 将变量保存为宏名称并在许多宏功能中使用

> ID：14183668
> 
> 赞同：0
> 
> 时间：2013-01-06T15:37:51.817
> 
> 标签：c, macros

我想将参数保存到宏名称中，然后将其用于另一个宏函数。

我正在寻找类似的东西

```
#define MACRO1(X) MACRO_NAME = X

#define MACRO2(Y) Y = MACRO_NAME;

1int main()
{
    int a = 2, b;

    MACRO1(a);
    ...
    MACRO2(b)

} 
```

有可能吗？正确的方法是什么？

我上面给出的代码只是我想要的一个例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:44:30.803

预处理器只进行文本替换，它不“运行”代码。它所做的只是根据定义的宏（和`#include`指令等）转换代码，然后将其交给编译器。

你上面的例子意味着编译器会看到：

```
int a = 2, b;

MACRO_NAME = a;
...
b = MACRO_NAME; 
```

这不会构建，因为没有名为`MACRO_NAME`. 你的问题有点不清楚，你应该澄清你想要做什么，为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:11:09.220

我想您需要按以下方式更改代码。声明 MACRO_NAME 一个 int 变量；因此，第一个宏调用的内联替换将使用“MACRO_NAME=a”之类的代码，并且可以毫无问题地编译。

```
 #define MACRO1(X) MACRO_NAME = X
 #define MACRO2(Y) Y = MACRO_NAME;

 int main() {
    int a = 2, b;
    int MACRO_NAME;
    MACRO1(a);
    MACRO2(b)
} 
```

# java - Swing JTextPane 编译错误

> ID：14183669
> 
> 赞同：-1
> 
> 时间：2013-01-06T15:37:52.340
> 
> 标签：java, swing, user-interface, compiler-errors

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package texteditor;
//import java.awt.*;
import javax.swing.*;
/**
 *
 * @author 
 */
public class TextEditor {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        JFrame window = new JFrame("Text Editor");
        //JMenuBar menuBar = window.getJMenuBar();

        //Create menu bar
        JMenuBar menuBar= new JMenuBar();
        //File Menu
        JMenu fileMenu = new JMenu("File");
        fileMenu.add(new JMenuItem("Save"));

        menuBar.add(fileMenu);
        window.setJMenuBar(menuBar);

        JTextPane textArea= new JTextPane();

        Document d= textArea.getDocument();

        window.add(textArea);

        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setVisible(true);
    }
} 
```

## 错误

```
Exception in thread "main" java.lang.RuntimeException: Uncompilable
source code - cannot find symbol   symbol:   class Document  
location: class texteditor.TextEditor   at
texteditor.TextEditor.main(TextEditor.java:33) Java Result: 1 BUILD
SUCCESSFUL (total time: 2 seconds) 
```

**如何解决？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:42:03.403

`Document`使用的 in包含`JTextPane`在单独的`text`包中。添加导入：

```
import javax.swing.text.Document; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T15:41:57.140

线程“main”java.lang.RuntimeException 中的异常：无法编译的源代码 -**找不到符号 symbol：class Document**

您需要导入一个名为 Document 的适当类。

# jquery - Jquery JSON解析返回未定义

> ID：14183676
> 
> 赞同：2
> 
> 时间：2013-01-06T15:38:34.350
> 
> 标签：jquery, json

我正在尝试解析 JSON 字符串，但是当我这样做时，我得到了未定义。

```
var codes = jQuery.parseJSON(response);

$.each(codes, function (key, value) {
  alert(value.Display);
}); 
```

这是`codes`上面变量的内容：

```
["{ Display = string1, Sell = string2 }", 
 "{ Display = string1, Sell = string2 }"] 
```

警报返回值。显示为`undefined`。我期待“String1”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T15:41:24.003

这不是一个有效的 JSON 字符串。
正确的字符串如下所示：

```
'{ "Display": "string1", "Sell": "string2" }' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T15:43:29.000

你不能。数组中没有`Display`属性，它是一个包含两个字符串的数组。

字符串类似于 JSON，但不足以解析。

如果您使字符串遵循 JSON 标准，您可以将数组中的每个项目解析为一个对象，然后您可以访问该`Display`属性：

```
var response = '["{ \\"Display\\": \\"string1\\", \\"Sell\\": \\"string2\\" }", "{ \\"Display\\": \\"string1\\", \\"Sell\\": \\"string2\\" }"]';

var codes = jQuery.parseJSON(response);

$.each(codes, function (key, value) {
  var obj = jQuery.parseJSON(value);
  alert(obj.Display);
}); 
```

演示：http: [//jsfiddle.net/Guffa/wHjWf/](http://jsfiddle.net/Guffa/wHjWf/)

或者，您可以使整个输入遵循 JSON 标准，以便您可以将其解析为对象数组：

```
var response = '[{ "Display": "string1", "Sell": "string2" }, { "Display": "string1", "Sell": "string2" }]';

var codes = jQuery.parseJSON(response);
console.log(codes);
$.each(codes, function (key, value) {
  alert(value.Display);
}); 
```

演示：http: [//jsfiddle.net/Guffa/wHjWf/1/](http://jsfiddle.net/Guffa/wHjWf/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-18T22:32:09.550

**我意外地对我的数组数据进行了两次 json 编码，从而得到了这个错误。**

像这样：

```
$twicefail = '{"penguins" : "flipper"}';
return json_encode( $twicefail ); 
```

然后在我看来，我是这样捡起来的：

```
var json_data = jQuery.parseJSON(my_json_response);

alert(json_data.penguins);      //Here json_data.penguins is undefined because I
                                //json_encoded stuff that was already json. 
```

**更正后的代码如下：**

```
$twicefail = '{"penguins" : "flipper"}';
return $twicefail; 
```

然后在我看来，像这样选择它：

```
var json_data = jQuery.parseJSON(my_json_response);

alert(json_data.penguins);     //json_data.penguins has value 'flipper'. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-01T11:04:37.027

你可以很容易地试试这个：

```
var json = jQuery.parseJSON(response);
//get value from response of json
var Display = json[0].Display; 
```

您只需要 [0] 来指定数据，因为这是默认参数（未设置）。
这个对我有用！

# sql-server - 使用 CTE 作为块循环？

> ID：14183678
> 
> 赞同：0
> 
> 时间：2013-01-06T15:38:49.687
> 
> 标签：sql-server, sql-server-2008, common-table-expression

*除了 `while loop`和`Cursors`*

如何使用 CTE 表进行`n` **块**操作？

例如 ：

```
WITH cte AS (
                SELECT 1 AS n
                UNION ALL 
                SELECT n+1
                FROM   cte
                WHERE   n+1<= 10
            )

    INSERT INTO tbl1 (id) select n from cte   --till here it's all ok.
    INSERT INTO tbl2 (id) select n from cte --{notice tbl2} .fail here ( cause cte usages must come right after the decleration) 
```

但是有什么我可以做的，所以第二行也包括在内吗？

*ps（除了将其保留为临时表）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:45:03.683

一般来说你不能。

它仅对下一条语句有效。如果您想为多个语句重用*定义*或自己将其具体化为临时表/表变量以重用*结果*，则可以定义具有相同定义的视图。

对于您问题中的特定情况，您可以在一个声明中完成所有操作。

```
WITH cte
     AS (SELECT 1 AS n
         UNION ALL
         SELECT n + 1
         FROM   cte
         WHERE  n + 1 <= 10)
INSERT INTO tbl1
            (id)
OUTPUT      INSERTED.id
INTO tbl2(id)
SELECT n
FROM   cte 
```

# ios - iOS 应用程序开发工具

> ID：14183680
> 
> 赞同：-3
> 
> 时间：2013-01-06T15:39:04.880
> 
> 标签：ios

我是 iOS 应用程序开发的初学者。我需要一些关于开发工具和版本的信息，我应该用来开发应该在 IOS 4 及更高版本中运行并且应该在 iPhone 和 iPad 上运行的应用程序。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:42:08.770

如果您从 Mac App Store 下载 Xcode，它应该具有最新的 SDK，并且应该是最新版本的 Xcode。这是你要找的吗？最新版本的 Xcode 将让您在所有已发布的版本中进行开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T15:51:58.030

首先你需要一个安装了 OSX 的 MAC。

然后，您必须下载[Xcode](https://developer.apple.com/xcode/)的最新版本。之后打开 XCode 并按创建一个新项目。

因此，为 iOS4 开发的一些注意事项：

*   如果您选择可以使用情节提要的模板（例如主从应用程序），则取消选择“使用情节提要”选项。iOS4 不支持情节提要。
*   您可以使用自动引用计数
*   选择通用选项为 iPhone 和 iPad 开发

你应该有这样的东西：

![在此处输入图像描述](../Images/5ea87db86ea73fb851b66cfacdde0628.png)

# android - Android：外部菜单类

> ID：14183685
> 
> 赞同：0
> 
> 时间：2013-01-06T15:39:24.650
> 
> 标签：android, class, external

我是 Java 和 Android 开发的新手。我制作简单的应用程序仅用于学习目的。我已经学会了如何制作菜单按钮功能等，但是在每个类文件中编写这段代码很奇怪：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case 1:
            try {
                Class activityClass1 = Class.forName("com.epicandroidapp.MenuActivity");
                Intent activityIntent1 = new Intent(MainActivity.this, activityClass1);
                startActivity(activityIntent1);
                return true;
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            }
        case 2:
            return true;
        case 3:
            try {
                Class activityClass2 = Class.forName("com.epicandroidapp.AboutActivity");
                Intent activityIntent2 = new Intent(MainActivity.this, activityClass2);
                startActivity(activityIntent2);
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            }
            return true;
        case 4:
            try {
                Class activityClass3 = Class.forName("com.epicandroidapp.VersionActivity");
                Intent activityIntent3 = new Intent(MainActivity.this, activityClass3);
                startActivity(activityIntent3);
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            }
            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

我找不到任何教程或类似的东西。那么是否有可能使用一些外部文件，就像一些构造函数或其他东西？

感谢您的回答马克西米利安库利科夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:44:36.920

您可以在 switch 语句中为每种情况使用这个更小的代码：

```
startActivity(new Intent(MainActivity.this, com.epicandroidapp.MenuActivity.class)); 
```

或者如果您导入该类：

```
import com.epicandroidapp.MenuActivity;

startActivity(new Intent(MainActivity.this, MenuActivity.class)); 
```

**编辑：**如果您的意思是整个代码，那么您需要使用 XML 资源，如本教程中所述：http: [//developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)

例如，您创建一个包含菜单的 xml 文件（将其保存在 res/menu/filename.xml 中）：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/item1"
          android:icon="@drawable/item1"
          android:title="@string/item1"/>
</menu> 
```

然后在你的`onCreateOptionsMenu`你做：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.filename, menu);
    return true;
} 
```

在您的`onOptionsItemSelected`方法中，您用于`getItemId`获取所选菜单项的 id，例如：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.item1:
            startActivity(new Intent(MainActivity.this, MenuActivity.class));
            return true;

        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

请注意，所有这些示例代码均来自有关菜单的 android 教程。

# ios - 在自定义 UICollectionView 中出列时返回错误的单元格

> ID：14183687
> 
> 赞同：4
> 
> 时间：2013-01-06T15:39:32.770
> 
> 标签：ios, uicollectionview

我正在使用自定义布局构建 UICollectionView。

布局为 3x4，水平滚动。我得到了单元格的布局和页面滚动工作得很好。

我的预期结果是这样的：

![在此处输入图像描述](../Images/9defd3472b54d3c3414dddedc6f0a960.png)

（可在[http://www.tinyuploads.com/images/0EVQnT.png](http://www.tinyuploads.com/images/0EVQnT.png)获得）

但是，滚动时似乎错误的单元格正在出队，而我的实际结果是：

![在此处输入图像描述](../Images/0b2a33afb22aee353385f55b19004474.png)

（可在[http://www.tinyuploads.com/images/8lvJId.png](http://www.tinyuploads.com/images/8lvJId.png)获得）

此外，当我滚动回第一页时，“A”不再位于第一个位置。

我的数据源和委托方法如下所示：

```
#pragma mark - UIViewController Life Cycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.collectionView.backgroundColor = [UIColor colorWithWhite:0.25f alpha:1.0f];
    self.alphabet = [NSMutableArray arrayWithObjects:@"A", @"B", @"C", @"D", @"E", @"F", @"G", @"H", @"I", @"J", @"K", @"L", @"M", @"N", @"O", @"P", @"Q", @"R", @"S", @"T", @"U", @"V", @"X", @"Y", @"Z", nil];
    self.colors = [NSMutableArray arrayWithObjects:[UIColor colorWithRed:(135/255.0) green:(175/255.0) blue:(88/255.0) alpha:1], [UIColor colorWithRed:(65/255.0) green:(124/255.0) blue:(185/255.0) alpha:1], [UIColor colorWithRed:(201/255.0) green:(189/255.0) blue:(64/255.0) alpha:1],  nil];

    [self.collectionView reloadData];
}

#pragma mark - UICollectionView datasource

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{

    return self.alphabet.count;

}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{

    NSString *title = [self.alphabet objectAtIndex:indexPath.row];
    UIColor *backgroundColor = [self.colors objectAtIndex:indexPath.row % 3];

    CategoryCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:CategoryCellIdentifier forIndexPath:indexPath];

    cell.title.text = title;
    cell.backgroundColor = backgroundColor;
    [cell setNeedsLayout];

    return cell;

}

#pragma mark - UICollectionViewDelegate

- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath{

    NSLog(@"You touched: %d", indexPath.row);
} 
```

我怀疑我应该如何考虑部分。正如你在这里看到的，我只有一个部分包含我的所有项目（字母表的内容）。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T17:25:57.663

W据我所知，看起来子类可能没有正确实现。这是一个使用内置水平流布局的示例，您可以使用它来修改代码。

注意：此示例假设您在情节提要中设置了正确的大小，并且您将拥有 3 列乘 4 行。

```
@interface ViewController ()
@property (nonatomic, strong) NSMutableArray* alphabet;
@property (nonatomic, strong) NSMutableArray* colors;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.collectionView.backgroundColor = [UIColor colorWithWhite:0.25f alpha:1.0f];
    self.alphabet = [NSMutableArray arrayWithObjects:@"A", @"B", @"C", @"D", @"E", @"F", @"G", @"H", @"I", @"J", @"K", @"L", @"M", @"N", @"O", @"P", @"Q", @"R", @"S", @"T", @"U", @"V", @"W", @"X", @"Y", @"Z", nil];
    self.colors = [NSMutableArray arrayWithObjects:[UIColor colorWithRed:(135/255.0) green:(175/255.0) blue:(88/255.0) alpha:1], [UIColor colorWithRed:(65/255.0) green:(124/255.0) blue:(185/255.0) alpha:1], [UIColor colorWithRed:(201/255.0) green:(189/255.0) blue:(64/255.0) alpha:1],  nil];

    [self.collectionView reloadData];
}
#pragma mark - UICollectionView datasource

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{
    // Full pages
    NSInteger count = self.alphabet.count /12 + (self.alphabet.count % 12 > 0 ? 1 : 0);
    count *= 12;
    return count;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{

    NSInteger row = indexPath.row % 4;
    NSInteger col = indexPath.row / 4;
    NSInteger page = col /3 * 12;
    col = col % 3;
    NSInteger ii = row*3+col + page;

    NSString *title = ii >= self.alphabet.count ? nil : [self.alphabet objectAtIndex:ii];
    UIColor *backgroundColor = [self.colors objectAtIndex:col];

    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
    UILabel* label = (UILabel*)[cell viewWithTag:1]; // label added in storyboard
    label.text = title;
    cell.backgroundColor = backgroundColor;
    [cell setNeedsLayout];
    cell.hidden = title == nil;
    return cell;

}

#pragma mark - UICollectionViewDelegate

- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath{

    NSLog(@"You touched: %d", indexPath.row);
}
@end 
```

# c# - 在 Gtk# 应用程序中将全局异常处理程序放在哪里？

> ID：14183688
> 
> 赞同：1
> 
> 时间：2013-01-06T15:39:34.153
> 
> 标签：c#, exception-handling, error-handling, gtk#

我已经使用 MonoDevelop 开始了新的 Gtk# 解决方案。现在我可以在哪里放置**全局**异常处理程序，该处理程序向用户弹出带有堆栈跟踪等的对话框？是否有任何现有的库可以做到这一点？

类似[https://exceptionreporter.codeplex.com/](https://exceptionreporter.codeplex.com/)

主要.cs：

```
using System;
using Gtk;

namespace foobar
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            Application.Init ();
            MainWindow win = new MainWindow ();
            win.Show ();
            Application.Run ();
        }
    }
} 
```

主窗口.cs：

```
using System;
using Gtk;

public partial class MainWindow: Gtk.Window
{   
    public MainWindow (): base (Gtk.WindowType.Toplevel)
    {
        Build ();
    }

    protected void OnDeleteEvent (object sender, DeleteEventArgs a)
    {
        Application.Quit ();
        a.RetVal = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:02:14.350

你可以使用[`GLib.ExceptionManager.UnhandledException`事件](http://docs.go-mono.com/monodoc.ashx?link=E%3aGLib.ExceptionManager.UnhandledException)。

它[的类型参数`GLib.UnhandledExceptionArgs Class`](http://docs.go-mono.com/monodoc.ashx?link=T%3aGLib.UnhandledExceptionArgs)包含一个[`ExitApplication`属性](http://docs.go-mono.com/monodoc.ashx?link=P%3aGLib.UnhandledExceptionArgs.ExitApplication)，可用于控制应用程序是否应因异常而退出。

# delphi - 为什么在指定为替换时 TPerlRegEx 不能正确处理回车换行 (CR LF)

> ID：14183692
> 
> 赞同：7
> 
> 时间：2013-01-06T15:40:33.047
> 
> 标签：delphi

我尝试使用 TPerlRegEx 类用新行替换空格。

```
with RegExp do
begin
  Subject:=Memo1.Lines.Text;
  RegEx:=' ';
  Replacement:='\r\n';
  ReplaceAll;
  Memo1.Lines.Text:=Subject;
end; 
```

问题在于它将 \r\n 替换视为文字文本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T15:49:11.017

利用`#13#10`

```
program Project29;

{$APPTYPE CONSOLE}

uses
  SysUtils, PerlRegEx;

var RegEx: TPerlRegEx;

function CStyleEscapes(const InputText:string):string;
var i,j: Integer;

begin
  SetLength(Result, Length(InputText));
  i := 1; // input cursor
  j := 1; // output cursor
  while i <= Length(InputText) do
    if InputText[i] = '\' then
      if i = Length(InputText) then
        begin
          // Eroneous quotation...
          Result[j] := '\';
          Inc(i);
          Inc(j);
        end
      else
        begin
          case InputText[i+1] of
            'r', 'R': Result[j] := #13;
            'n', 'N': Result[j] := #10;
            't', 'T': Result[j] := #9;
            '\':
              begin
                Result[j] := '\';
                Inc(j);
                Result[j] := '\';
              end;
            else
              begin
                Result[j] := '\';
                Inc(j);
                Result[j] := InputText[i+1];
              end;
          end;
          Inc(i,2);
          Inc(j);
        end
    else
      begin
        Result[j] := InputText[i];
        Inc(i);
        Inc(j);
      end;
  SetLength(Result, j-1);
end;

begin
  RegEx := TPerlRegEx.Create;
  try

    RegEx.RegEx := ' ';
    RegEx.Replacement := CStyleEscapes('\t\t\t');;
    RegEx.Subject := 'FirstLine SecondLine';
    RegEx.ReplaceAll;
    WriteLn(RegEx.Subject);

    ReadLn;

  finally RegEx.Free;
  end;
end. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-06T18:00:25.803

> 我真的很想知道为什么它没有按预期进行匹配。

文本中`\`转义序列的处理在. 如果您查看代码，您会发现没有产生回车和换行字符的序列。实际上都是关于反向引用的。`Replacement``TPerlRegEx.ComputeReplacement``ComputeReplacement`

正则表达式的匹配阶段的处理由PCRE代码执行。但是，替换阶段是纯 Pascal 代码。并且很容易检查代码以了解它的作用。它不会按照您的想法和期望去做。

结论是您无法使用转义序列指定所需的字符。我认为您需要设计自己的规则来转义不可打印的字符并将这些规则应用到`OnReplace`事件处理程序中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T08:22:09.817

编辑，因为我今天学到了一些新东西。

我前一段时间遇到了与问题相同的问题，并得出了错误的结论
~~`TRegEx`根本不做任何 C 风格的[反斜杠转义扩展](http://en.wikipedia.org/wiki/C_syntax#Backslash_escapes)~~.

正确的结论应该是*在字符串参数*
*`TRegEx`中没有做C风格的[反斜杠转义扩展](http://en.wikipedia.org/wiki/C_syntax#Backslash_escapes)`replacement`，我应该研究是否在`pattern`字符串参数*中做。

我知道对字符转义机制的支持[因开发工具而异](http://en.wikipedia.org/wiki/Escape_character#ASCII_escape_character)。

*例如，C、C#、Java、Perl、PHP、Ruby、bash 等等都进行反斜杠转义扩展。
但是由于 Delphi 编译器（因为它不是 C 风格的编译器）没有。
它会将[Pascal 样式的转义](https://stackoverflow.com/questions/254407/how-do-i-include-a-newline-character-in-a-string-in-delphi)（如`#13#10`, 或`^M^J`）扩展为 CRLF。*

所以我今天做了这项研究（感谢 David 指出我最初的错误），并提出了两个示例（[一个在 Delphi 中](http://besharp.codeplex.com/SourceControl/changeset/view/97420#2376115)，[一个在 C# 中](http://besharp.codeplex.com/SourceControl/changeset/view/97420#2376152)），它们的功能基本上可以做到这一点：

*   显示已知 CRLF 字符串的模式匹配结果，以及包含字符串的模式
*   显示用字符串替换空格

然后通过以下方式调用示例函数：

*   源代码中的字符串是反斜杠转义的 \r\n 字符串，因此可能会被编译器解析
*   将字符放在一起的字符串，因此它成为反斜杠转义的 \r\n 字符串运行时可能会被 RegEx 引擎解析

从两个示例的输出中，您可以看到：

*   Delphi 编译器不解析 \r\n 字符串
*   C# 编译器会解析 \r\n 字符串
*   Delphi 和 C# 中的 RegEx 引擎在运行时解析模式 \r\n 字符串（`RegEx` [文档](http://www.regular-expressions.info/reference.html)）
*   Delphi 和 C# 中的 RegEx 引擎在运行时不解析替换 \r\n 字符串（`RegEx` [文档](http://www.regular-expressions.info/refreplace.html)）

建议仍然有效：

*所以要么使用 Pascal 风格的转义，要么使用 Cosmin 写的C[风格](https://stackoverflow.com/users/282676/cosmin-prund)的[反斜杠扩展函数。](https://stackoverflow.com/questions/14183692/why-are-carriage-return-line-feed-cr-lf-not-properly-handled-by-tperlregex-whe/14183779#14183779)*

附带说明：使用任何扩展功能时，您应该记住它会改变文本的含义。Delphi 用户可能不会期望 C 风格的字符串扩展。

# c# - ASP.Net 网站中的反射

> ID：14183693
> 
> 赞同：1
> 
> 时间：2013-01-06T15:40:34.783
> 
> 标签：c#, asp.net, reflection

我一直在使用 Visual Studio Addin 项目一段时间。这个插件的目的是告诉我在我的许多项目中使用了哪些存储过程。

我通过将我的所有项目（包括 Business 和 DataAccess 项目）加载到一个解决方案中来实现这一点，然后使用 EnvDTE 遍历解决方案的项目以获取特定的代码项。

这样我就可以识别调用各种存储过程的方法，而且效果很好。

然后为了确定哪些方法正在调用我的 DataAccess 项目中的各种方法，我使用反射为每个项目加载程序集：

```
foreach (EnvDTE.Project proj in this._solution.Projects) {
    assembly = System.Reflection.Assembly.LoadFrom(GetAssemblyPath(proj));
}

private string GetAssemblyPath(EnvDTE.Project vsProject)
{
    string assemblyPath = "";
    string fullPath = vsProject.Properties.Item("FullPath").Value.ToString();
    string outputPath = vsProject.ConfigurationManager.ActiveConfiguration.Properties.Item("OutputPath").Value.ToString();
    string outputDir = System.IO.Path.Combine(fullPath, outputPath);
    string outputFileName = vsProject.Properties.Item("OutputFileName").Value.ToString();
    assemblyPath = System.IO.Path.Combine(outputDir, outputFileName);

    return assemblyPath;
} 
```

这个系统适用于大多数项目，但现在我遇到了一个问题，我无法解决它......

是否可以为网站项目使用这种反射程序集加载。它失败了：

```
vsProject.ConfigurationManager.ActiveConfiguration.Properties.Item("OutputPath") 
```

由于网站没有与 dll og WinForms 项目相同的输出路径...

我需要使用反射，因为无法单独使用 EvnDTE 识别对重载方法的调用。通过反射，我可以获得方法体的指令，从而识别正在调用哪个重载方法。

EnvDTE 在 WebSite 项目中工作得很好，但不幸的是反射不能。:(

通过使用 EnvDTE，我只能获取方法的文本内容。

有谁知道该怎么做才能让这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:13:49.157

它失败了，因为网站项目没有创建可访问并包含所有信息的输出程序集 dll。这是由网络服务器动态创建的。

我无法绕过它，我的解决方案是简单地将我的网站项目转换为 WebApplication 项目。

这些是实际的普通项目，并且有一个我可以访问的预编译程序集 dll。

感谢您的意见...

# javascript - 如何从 javascript 模块模式中的函数原型访问私有属性？

> ID：14183694
> 
> 赞同：2
> 
> 时间：2013-01-06T15:40:36.723
> 
> 标签：javascript, properties, module, prototype, private

我一直在寻找一种使用构造函数模块模式访问私有属性的方法。我想出了一个可行的解决方案，但不确定这是最佳的。

```
mynamespace.test = function () {
    var s = null;

    // constructor function.
    var Constr = function () {
        //this.s = null;

    };

    Constr.prototype.get = function () {
        return s;
    };

    Constr.prototype.set = function (s_arg) {
        s =  s_arg;
    };

    // return the constructor.
    return new Constr;
};

var x1 = new mynamespace.test();
var x2 = new mynamespace.test();
x1.set('x1');
alert('x1 get:' + x1.get()); // returns x1
x2.set('x2');
alert('x2 get:' + x2.get()); // returns x2
alert('x1 get: ' + x1.get()); // returns x1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:15:47.793

```
mynamespace.Woman = function(name, age) {
    this.name = name;

    this.getAge = function() {
        // you shouldn't ask a woman's age...
        return age;
    };

    this.setAge = function(value) {
        age = value;
    };
};

var x1 = new mynamespace.Woman("Anna", 30);
x1.setAge(31);
alert(x1.name); // Anna
alert(x1.age); // undefined
alert(x1.getAge()); // 31 
```

这与您的解决方案之间的区别在于，您的解决方案每次调用 namespace.test() 时都会生成一个新的 Consr。这是一个微妙的区别，但这仍然是首选。

区别之一是您可以使用：

```
x1 instanceof mynamespace.Woman 
```

而在您的解决方案中，x1 的类型与 x2 不同，因为它们使用不同的 Consr。

# html - 以易于阅读的格式显示 html 文章

> ID：14183696
> 
> 赞同：0
> 
> 时间：2013-01-06T15:40:45.963
> 
> 标签：html, readability

我查看了[可读性 api](http://readability.com/developers/api)，它对于在 html 网页上以干净的格式显示数据很有用。我将 URL 传递给[http://www.readability.com/read?url=](http://www.readability.com/read?url=)以显示数据。我最初被定向到一个页面，我可以选择使用可读性来查看信息有没有什么方法可以直接以简洁的方式查看内容而无需通过实际的重定向？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-06T18:55:01.397

看看 Readability 的 API：[http](http://www.readability.com/developers/api)
://www.readability.com/developers/api在你实现你的代码之前，你必须在他们的网站上创建一个 API Key。

# c# - 在多个 Web 服务方法中调用一个通用方法并使用泛型方法

> ID：14183697
> 
> 赞同：-2
> 
> 时间：2013-01-06T15:40:57.787
> 
> 标签：c#

我最近问了一个关于在 C# 中对泛型类型调用方法的问题：在 C#[中调用模板中的方法](https://stackoverflow.com/questions/14183528/calling-method-in-template-in-c-sharp)

我遇到的问题是我无法操作要为其创建通用函数的类型。这些类型是一些具有相同方法的 WebServices 的 SoapClients。有什么解决方案可以让我避免复制代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:19:34.367

如果我对您的理解正确，您有几种无法更改的类型，它们不共享任何接口但有一些共同的方法。并且您想编写一个为任何类型调用此通用方法的方法。

为此，我认为您有两种选择：

1.  为每个类创建一个包装器，它确实实现了一个公共接口。然后，您将在您的方法中使用该接口并将包装器作为参数提供给它。
2.  用于`dynamic`调用方法。使用`dynamic`，您不必实现任何接口，但这也意味着您将丢失所有编译时类型检查（和自动完成）。

# regex - 正则表达式在 Go 中不起作用

> ID：14183704
> 
> 赞同：3
> 
> 时间：2013-01-06T15:41:37.123
> 
> 标签：regex, go

原谅我是一个正则表达式的业余爱好者，但我真的很困惑为什么这不是一段代码在 Go 中不起作用

```
package main

import (
    "fmt"
    "regexp"
)

func main() {
    var a string = "parameter=0xFF"
    var regex string = "^.+=\b0x[A-F][A-F]\b$"
    result,err := regexp.MatchString(regex, a)
    fmt.Println(result, err)
}
// output: false <nil> 
```

这似乎在python中工作正常

```
import re

p = re.compile(r"^.+=\b0x[A-F][A-F]\b$")
m = p.match("parameter=0xFF")
if m is not None:
    print m.group()

// output: parameter=0xFF 
```

我要做的就是匹配输入是否为格式`<anything>=0x[A-F][A-F]`

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T15:52:12.273

您是否尝试过使用原始字符串文字（使用反引号而不是引号）？像这样：

```
var regex string = `^.+=\b0x[A-F][A-F]\b$` 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-06T15:48:34.510

您必须转义`\`in[解释文字字符串](http://golang.org/ref/spec#String_literals)：

```
var regex string = "^.+=\\b0x[A-F][A-F]\\b$" 
```

但实际上`\b`（单词边界）在您的表达中似乎没有用。

没有它们也可以工作：

```
var regex string = "^.+=0x[A-F][A-F]$" 
```

[示范](http://play.golang.org/p/ePNmOdigZf)

# c# - 基于一列从表中删除重复行

> ID：14183706
> 
> 赞同：0
> 
> 时间：2013-01-06T15:41:50.227
> 
> 标签：c#, asp.net, sql

我创建了一个包含 4 个表的多个内部连接的表，但结果带回了重复记录。这是我正在使用的代码

```
SELECT   tblLoadStop.LoadID,
         tblCustomer.CustomerID,
         tblLoadMaster.BillingID,
         tblLoadMaster.LoadID,
         tblLoadMaster.PayBetween1,
         LoadStopID,
         tblLoadMaster.Paybetween2,
         tblStopLocation.StopLocationID,
         tblStopLocation.city,
         tblStopLocation.state,
         tblStopLocation.zipcode,
         tblLoadSpecifications.LoadID,
         tblLoadSpecifications.LoadSpecificationID,
         Picks,
         Stops,
         Typeofshipment,
         Weight,
         LoadSpecClass,
         Miles,
         CommodityList,
         OriginationCity,
         OriginationState,
         DestinationCity,
         DestinationState,
         LoadRate,
         Status,
         CompanyName,
         Customerflag,
         tblCustomer.CustomerID,
         tblCustomer.AddressLine1,
         tblCustomer.City,
         tblCustomer.State,
         tblCustomer.Zipcode,
         CompanyPhoneNumber,
         CompanyFaxNumber,
         SCAC,
         tblLoadMaster.Salesperson,
         Change,
         StopType
FROM     tblLoadMaster
            INNER JOIN tblLoadSpecifications 
                  ON tblLoadSpecifications.LoadID = tblLoadMaster.LoadID
            INNER JOIN tblLoadStop
                   ON tblLoadStop.LoadID = tblLoadMaster.LoadID
            INNER JOIN tblStopLocation
                   ON tblStopLocation.StopLocationID = tblLoadStop.StopLocationID
            INNER JOIN tblCustomer
                   ON tblCustomer.CustomerID = tblLoadMaster.CustomerID
WHERE    tblLoadMaster.Phase LIKE '%2%'
ORDER BY tblLoadMaster.LoadID DESC; 
```

这是我得到的结果

```
Load ID   Customer   Salesperson     Origin  Destination     Rate    
-------------------------------------------------------------------------
13356     FedEx           Alex           Duluth    New York     300
13356     FedEx           Steve          Florida   Kansas       400 
```

我只想显示第一行，

```
13356     FedEx           Alex           Duluth    New York     300 
```

并删除底行，

```
13356     FedEx           Steve          Florida   Kansas       400 
```

tblLoadStop 表具有来自 tblloadMaster 表的具有重复 LoadID 的重复记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:56:16.223

如果您使用的是 SQL Server 2005 及更高版本（您在这方面不够具体），则一种方法是使用 CTE（通用表表达式）。

使用此 CTE，您可以按某些标准（即您的）对数据进行分区，`LoadID`并让 SQL Server 为每个“分区”从 1 开始为您的所有行编号，按某些标准排序（您不太清楚**如何**决定在您的问题中保留哪一行，忽略哪一行）。

所以尝试这样的事情：

```
;WITH CTE AS
(
   SELECT 
       LoadID, Customer, Salesperson, Origin, Destination, Rate,
       RowNum = ROW_NUMBER() OVER(PARTITION BY LoadID ORDER BY tblLoadstopID ASC) 
   FROM 
       dbo.tblLoadMaster lm
     ......
   WHERE
      lm.Phase LIKE '%2%'
)
SELECT 
   LoadID, Customer, Salesperson, Origin, Destination, Rate
FROM 
   CTE
WHERE
   RowNum = 1 
```

在这里，我只为每个“分区”（即每个）选择“第一个”条目- 按您需要在 CTE 中定义`LoadId`的某些标准排序（*更新：*排序- 正如您所提到的）。`tblLoadstopID`

这是否接近你正在寻找的东西？

# android - Android 服务退出留下 imp。数据开放

> ID：14183713
> 
> 赞同：0
> 
> 时间：2013-01-06T15:43:03.727
> 
> 标签：android, android-intent, broadcastreceiver, android-service, intentfilter

我面临一个严重的问题。在`service`我的任务完成后，我正在打开 Wifi 连接并关闭它。因为，`service`在任何时候退出我都面临一个问题，其中连接打开并保持打开状态。

有没有办法可以在我使用时处理这个问题，`START_STICKY`或者我只能以编程方式处理它？

**编辑**：我可以在几个接收者之间分享我的意图信息（`BroadcastReceiver`）。例如，我将编写另一个接收器用于操作`android.net.wifi.wifi_state_changed`，而我现有的接收器是用于`android.intent.action.PHONE_STATE`. 如果可以实现，我可以做点什么。

**EDIT2**：我的代码如下：

```
public class CallReceiver extends BroadcastReceiver {
    private static final String LOG_TAG = "CallReceiver";
    private static final String CALL_ACTION = "android.intent.action.PHONE_STATE";

    @Override
    public void onReceive(Context context, Intent callIntent)
    {
        Log.d(LOG_TAG, "----------------Inside onReceive of CallReceiver----------------");

        if (callIntent.getAction().equals(CALL_ACTION))
        {

            try
            {
                Intent myIntent = new Intent(context, MyService.class);
                context.startService(myIntent);
            }
            catch (Exception e)
            {
                e.printStackTrace();
                Log.d(LOG_TAG,"----------------Exception occured while starting service----------------");
            }
        }
    }
}

public class MyService extends Service {
    private Context context;
    private static final String LOG_TAG = "MyService";
    private Thread thread = null;

    public MyService() 
    {
        super();
        Log.d(LOG_TAG, "----------------Inside Email Service constructor----------------");
    }

    public int onStartCommand(Intent myIntent, int flags, int startId)
    {
        Log.d(LOG_TAG, "----------------Email Service Command Started----------------");
        try
        {
            context = getApplicationContext();
            if(thread == null || !thread.isAlive())
            {
                thread = new Thread(new MyRunnable("Email Sender", myIntent));
                thread.start();
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
            Log.d(LOG_TAG,
                  "----------------Exception occured in Email Service onStartCommand----------------");
        }
        return START_REDELIVER_INTENT;
    }

    class MyRunnable implements Runnable {
        String name;
        Intent myIntent;

        public MyRunnable(String name, Intent myIntent) {
            this.name = name;
            this.myIntent = myIntent;
        }

        @Override
        public void run()
        {
            try
            {
                doStuff(emailIntent);
            }
            catch (NumberFormatException e)
            {
                e.printStackTrace();
                Log.d(LOG_TAG, e.getMessage());
            }
            catch (InterruptedException e)
            {
                e.printStackTrace();
                Log.d(LOG_TAG, e.getMessage());
            }
            catch (Exception e)
            {
                e.printStackTrace();
                Log.d(LOG_TAG, e.getMessage());
            }
            finally
            {
                stopSelf();
            }
        }
    }

    private void doStuff(Intent emailIntent) throws InterruptedException, Exception
    {
        if (context != null)
        {
            boolean isWifiConnection = false;

            try
            {
                // Check if WiFi connection is available ,if yes try opening it;
                // Attempt to open WiFi connection
                isWifiConnection = Utility.isEnableWifiSuccessful(getApplicationContext());
                Log.d(LOG_TAG, "----------------Wifi conn enabled = " + isWifiConnection
                               + "----------------");

                if (isWifiConnection)
                {
                    // Do more stuff
                }
            }
            catch (Exception e)
            {
                e.printStackTrace();
                throw e;
            }
            finally
            {
                // Code never reaches here !! Somehow, the service stops and by
                // the time the service stops,
                // WiFi has been enabled
                try
                {
                    if (isWifiConnection)
                    {
                        Utility.isDisableWifiSuccessful(getApplicationContext());
                    }
                }
                catch (Exception e)
                {
                    e.printStackTrace();
                    Log.d(LOG_TAG,
                          "----------------Error occured while closing network connections----------------");
                }
            }
        }
        else
        {
            Log.d(LOG_TAG, "----------------Context is null----------------");
        }
    }

    @Override
    public IBinder onBind(Intent intent)
    {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

现在，如果我有另一个接收器作为 NetworkReceiver

```
public class NetworkReceiver extends BroadcastReceiver {

    private static final String ACTION = "android.net.wifi.WIFI_STATE_CHANGED";
    private static final String LOG_TAG = "NetworkReceiver";

    @Override
    public void onReceive(Context context, Intent networkIntent)
    {
        if(networkIntent.getAction().equals(ACTION))
        {
            Log.d(LOG_TAG, "----------------Inside Network Receiver----------------");
            //Do something which will keep track who has opened the WiFi connection
        }
    }
} 
```

然后可以共享信息，并可以`myIntent`阅读该信息。`networkIntent``MySerivce`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:50:52.553

内存太低时服务退出，因为你已经在使用START_STICKY，一旦内存资源可用，服务将重新启动。我相信您可能需要检查连接是否已打开并且您已完成任务，然后您已使用 stopSelf() 停止服务。

希望这可以帮助。

谢谢，拉梅什

# zend-framework - 在 Symfony 2 中包含 Zend

> ID：14183714
> 
> 赞同：1
> 
> 时间：2013-01-06T15:43:11.290
> 
> 标签：zend-framework, symfony

我在 Symfony 2 IN PRODUCTION 中包含 Zend 框架时遇到问题，因为当我在本地使用它时没有问题......

我刚刚在我的生产服务器上提交了我的工作，我有这个错误：

致命错误：找不到类“Zend_Gdata_AuthSub”

Zend Framework 的任何类都有这个错误......这是我的自动加载，对 localhost 有好处：

```
<?php
use Doctrine\Common\Annotations\AnnotationRegistry;

$loader = require __DIR__.'/../vendor/autoload.php';

// intl
if (!function_exists('intl_get_error_code')) {
    require_once __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php';

    $loader->add('', __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs');
    $loader->add('Zend_', __DIR__.'/../vendor/zf/library');
}

AnnotationRegistry::registerLoader(array($loader, 'loadClass'));
set_include_path(__DIR__.'/../vendor/zf/library'.PATH_SEPARATOR.get_include_path());
return $loader;
?> 
```

包含路径可能有问题，但我不知道为什么...

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T01:56:17.900

如果您想使用 Composer 从 ZF2 中提取您需要的组件，那么您可以使用[Zend Framework 站点 Composer 信息页面上的信息](http://framework.zend.com/downloads/composer)

例如，您可以将这样的代码添加到您的 composer.json 文件以启用存储库：

```
"repositories": [
    {
        "type": "composer",
        "url": "https://packages.zendframework.com/"
    }
],

"require": {
"zendframework/zend-config": "2.0.*",
"zendframework/zend-http": "2.0.*"
}, 
```

您将要提取的软件包的名称放在“require”部分下，可用软件包的列表位于我提供的链接中，因此您可以在那里查看名称。当你去安装依赖项时，你可以使用这个命令：

```
php composer.phar install 
```

这有帮助吗？:-)

# lua - 捕获对 Lua 中不存在的函数的调用

> ID：14183715
> 
> 赞同：2
> 
> 时间：2013-01-06T15:43:17.070
> 
> 标签：lua, mocking, metatable

我想创建一个简单的模拟表，它会告诉我试图从中调用什么。

我的第一次尝试是：

```
local function capture(table, key)
    print("call to " .. tostring(table) .. " with key " .. tostring(key))
    return key
end

function getMock()
    mock = {}
    mt = { __index = capture }
    setmetatable(mock, mt)

    return mock
end 
```

现在用

```
t = getMock()
t.foo 
```

按我的预期打印：

```
call to table: 002BB188 with key foo 
```

但试图打电话：

```
t.foo("bar") 
```

给出：

```
call to table: 002BB188 with key foo
lua: test.lua:6: attempt to call field 'foo' (a string value) 
```

现在我有两个问题：

1.  如何避免异常，即。我究竟做错了什么？
2.  如何也捕获方法参数（在这种情况下为“bar”）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T16:09:37.353

您需要从 __index 处理程序返回一个函数，而不是字符串：

```
local function capture(table, key, rest)
    return function(...)
               local args = {...}
               print(string.format("call to %s with key %s and arg[1] %s",
                                   tostring(table), tostring(key),
                                   tostring(args[1])))
           end
end

-- call to table: 0x7fef5b40e310 with key foo and arg[1] nil
-- call to table: 0x7fef5b40e310 with key foo and arg[1] bar 
```

您收到错误是因为它正在尝试调用结果，但它目前是关键。

# jquery - jQuery Isotope：引入时发现超过 100% 宽度块的空槽

> ID：14183716
> 
> 赞同：1
> 
> 时间：2013-01-06T15:43:25.983
> 
> 标签：jquery, jquery-masonry, jquery-isotope

我打算迎合固定高度和不同宽度的块：25%、50%、75% 和 100%。在引入 100% 宽度的块之前，一切似乎都很好。似乎 100% 宽度的块上方的空白空间没有被填满。同位素 jquery 是否在这种用例中起作用？我目前正在使用砌体进行布局模式。

有没有好心人可以在这个问题上帮助我？

# c - Unix 中的信号处理

> ID：14183718
> 
> 赞同：0
> 
> 时间：2013-01-06T15:43:32.993
> 
> 标签：c, unix, signals

我正在学习 Unix 中的信号处理，并且很难理解`SIG_SETMASK`它们`o_set`是`sigprocmask()` 什么，它们是做什么的？

我了解它`set`包含要阻止或解除`SIG_BLOCK`阻止的信号列表，并阻止列表中的信号并`SIG_UNBLOCK`解除阻止它们。

```
sigprocmask(SIG_SETMASK,&set,& o_set); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:48:12.670

[Linux 联机帮助页](http://www.kernel.org/doc/man-pages/online/pages/man2/sigprocmask.2.html)很好地解释了这一点。

如果该参数不为空，则信号掩码的先前值存储在最后一个参数（旧集）中。

`SIG_SETMASK`设置当前信号集。我不确定还有什么要说的 -`SIG_BLOCK`并将`SIG_UNBLOCK`当前信号掩码与第二个参数结合起来，`SIG_SETMASK`无论当前值如何都设置它。

[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sigprocmask.html)是这样解释的：

> `SIG_BLOCK`
> 结果集应是当前集和集指向的信号集的并集。 `SIG_SETMASK`
> 结果集应为 set 所指向的信号集。
> `SIG_UNBLOCK`
> 结果集应为当前集与集所指向的信号集的补集的交集。

# android - 我如何通过 java 代码移动 adView

> ID：14183721
> 
> 赞同：0
> 
> 时间：2013-01-06T15:43:46.577
> 
> 标签：android, admob

如何从文件 .java 中移动（在屏幕上）adview（使用 java 代码）？我无法通过 xml 移动它，因为我在使用 xml 的 admob jar 时遇到了麻烦，所以我从我的 Main.java 添加了广告。

我尝试了很多方法，如 setGravity、setY、setX 等，但它们都需要 API11，我希望我的应用程序可以在 Gingerbread (API10) 上运行。现在 adView 位于屏幕顶部。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:58:05.823

`LayoutParams`如果您使用的是`RelativeLayout`. 以下是如何将广告放置在带有 id 的按钮下方`some_android_button_id`：

```
RelativeLayout layout = (RelativeLayout) findViewById(R.id.myrelativelayoutid);
RelativeLayout.LayoutParams adParams =
    new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT,
                                    LayoutParams.WRAP_CONTENT);
adParams.addRule(RelativeLayout.BELOW, R.id.some_android_button_id);
layout.addView(adView, adParams); 
```

另请注意，您仍然可以将您的广告包含在 XML 中。不幸的是，它只是用 SDK 的 v6.2.1 打破了 Eclipse 中的 WYSIWYG 编辑器 - 在您的实际应用程序中没有例外。

# php - 正则表达式获取具有 rel='nofollow' 属性的锚标记

> ID：14183723
> 
> 赞同：0
> 
> 时间：2013-01-06T15:44:01.853
> 
> 标签：php, regex

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)

我想在 html 源代码中找到反向链接。请参阅下面的代码。但我想找到没有`rel='nofollow'`属性的锚标签。

例子：

```
<a href='http://domain.com/abd/ff/' rel='nofollow'> 
```

正则表达式：

```
if(preg_match("/<a(.*)href=[\"']".$match_pattern."(\/?)[\"'](.*)>(.*)<\/a>/", $part)){...} 
```

功能：

```
function check_back_link($remote_url, $your_link) {
  $match_pattern = preg_quote(rtrim($your_link, "/"), "/"); 
  $found = false;
  if($handle = @fopen($remote_url, "r")){
    while(!feof($handle)){
      $part = fread($handle, 1024);
      if(preg_match("/<a(.*)href=[\"']".$match_pattern."(\/?)[\"'](.*)>(.*)<\/a>/", $part)){
        $found = true;
        break;
      }
    }
    fclose($handle);
  }
  return $found;
} 
```

# android - 两个活动之间的黑屏

> ID：14183725
> 
> 赞同：3
> 
> 时间：2013-01-06T15:44:16.467
> 
> 标签：android, android-activity

我正在开发一个应用程序，在其中播放动画后，会启动一个交互式活动。动画和活动背景的最后一帧相同，因此可以隐藏从动画到交互式活动的过渡。但是当我从一个活动切换到另一个活动时，会出现黑屏（几分之一秒）。我也试过 overridePendingTransition(0,0) 。但它不起作用。

我怎样才能避免这种情况。任何帮助将不胜感激。

谢谢

# performance - select condition from cdef$ where rowid=:1 query elapsed time is more

> ID：14183729
> 
> 赞同：1
> 
> 时间：2013-01-06T15:44:34.880
> 
> 标签：performance, oracle, oracle11g

在 Db 跟踪中，有一个查询需要很长时间。有人可以解释它的含义。似乎这是非常通用的 oracle 查询，不涉及我的自定义表。

```
select condition from cdef$ where rowid=:1; 
```

在 trc 文件（DB 跟踪）的多个地方发现了相同的查询，其中一个有大量的经过时间。那么，避免花费这么长时间的解决方案是什么。我使用的是 11g 版本的 oracle。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:53:42.937

没错，这是 Oracle 递归 SQL 的一个示例，它针对数据字典运行的语句以支持我们的应用程序 SQL。该特定语句是 Oracle 运行以获取 CHECK 约束的搜索条件的查询。如果您在带有检查约束的表中插入或更新行，您会看到很多。

实际的语句运行时间不会太长，因此它不太可能成为性能问题的根源。除非您运行大量带有硬编码值的插入语句。Oracle 将在每次解析新的插入或更新语句时运行该查询。如果您不使用绑定变量，那将变得昂贵。

# python - Python中循环导入方法的奇怪输出

> ID：14183731
> 
> 赞同：0
> 
> 时间：2013-01-06T15:44:38.123
> 
> 标签：python, oop, dynamic, module, package

同一目录中有两个模块。

我正在使用 Python 3.2

一个是`a.py`这样的：

```
import b
class orig:
    def test(self):
        print("hello")

o = orig()
o.test() 
```

另一个是`b.py`这样的：

```
from a import orig
orig.test=lambda self: print("wrong") 
```

当我运行这样的命令时：

```
python a.py 
```

我希望`hello`在输出中只看到一个，但是，我`hello`在输出中看到两个。每个都`hello`在一个单独的行中。

另外，我很困惑python如何处理两个模块相互导入的情况。

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:08:44.160

当你直接运行 python 脚本时，就像你正在做的那样`python a.py`，python 解释器不会*猜测*该文件的模块路径应该是什么；它只是创建一个名为`__main__`并运行它的模块。

另一个微妙之处在于，每次 python 遇到导入时，它*首先*创建模块并将其存储在其中，`sys.modules`以便同一模块的所有其他导入生成相同的模块对象。只有留下面包屑后，它才会开始执行实现该模块的 python 代码。

所以这就是发生的事情，一步一步，你`python a.py`在你的shell控制台输入，python创建一个`__main__`模块并开始评估那个文件。

```
the file being parsed
  |
  |       the module being imported       
  |         |     
./a.py  __main__  1:  import b 
```

好的，所以发生的第一件事就是`a.py`导入一些东西。它以前从未导入过，因此它搜索路径并找到`b.py`；由于我们仍在尝试导入另一个文件，因此我将缩进一点以显示这一点。

```
 ./b.py  b  1:  from a import orig 
```

发生的第一件事`b.py`是它尝试导入`a`. 但`a`也从未进口过；当python搜索路径时，它发现`a.py`

```
 ./a.py  a  1:  import b 
```

看起来很熟悉; 但 b*已*被导入；这`b`将是同一个（仍在导入过程中！

```
 ./a.py  a  2:  class orig:
        ./a.py  a  3:      def test(self):
        ./a.py  a  4:          print("hello")
        ./a.py  a  5:  
        ./a.py  a  6:  
        ./a.py  a  7:  o = orig()
        ./a.py  a  8:  o.a() 
```

行。一个类被创建，实例化，并出现一些输出； `a`现在已完成导入；这很好，因为`b`使用了 from 导入，这意味着`orig`现在需要存在，否则导入将失败。

```
 ./b.py  b  2:  orig.test=lambda self: print("wrong") 
```

`b`猴子补丁`a.orig`（注意；不是`__main__.orig`）。 `b`现在也完成了导入。

```
./a.py  __main__  2:  class orig:
./a.py  __main__  3:      def test(self):
./a.py  __main__  4:          print("hello")
./a.py  __main__  5:  
./a.py  __main__  6:  
./a.py  __main__  7:  o = orig()
./a.py  __main__  8:  o.a() 
```

现在`__main__`正在定义一个类，实例化它并打印一些输出。另请注意，这是 class 的定义`__main__.orig`，而不是`a.orig`b 修改的。

希望这能消除一些困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:00:13.573

您将得到两行输出，因为您执行 a.py 两次：一次作为主程序，一次将其导入 b。避免循环导入，绝对不要导入你的主程序。

导入主程序的另一个副作用：您现在实际上`orig`在该程序中命名了两个类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:12:14.117

就在第二个@TokenMacGuy 和@Ned：如果您将 a.py 的结尾替换为：

```
if __name__ == "__main__":
    o = orig()
    o.test() 
```

你只会得到一个“你好”。

而且，确实：避免循环依赖！

# rest - REST 嵌套集合

> ID：14183732
> 
> 赞同：1
> 
> 时间：2013-01-06T15:44:44.440
> 
> 标签：rest

从 REST 的角度来看，使用资源嵌套集合的最佳方式是什么？让我们考虑一下用户和文章。/api/users 和 /api/articles 资源可通过 PUT、POST、GET、DELETE 方法访问，但显示用户文章的最佳方式是什么？

我看到两种方法：

1）用户的结构有名称为文章的数组，其中保留了用户的所有文章ID。因此，为避免多个 by-id 请求 /api/articles 将支持以下形式的多个 id 请求：GET /api/articles?ids=1,2,3,4,33

2) 具有这种形式的分页支持的附加视图方法： GET /api/users/:userId/articles

他们每个人都有优点和缺点，但他们中的哪一个更受欢迎，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T20:46:40.470

我无法评论通常首选的方式是什么。我认为使用 userId (2) 的命名空间看起来更好，就像“网络”应该是一样的。

仅通过查看此资源模式对我来说就很有意义，您可以为该特定用户添加 CRUD 文章。

当您的用户有 1.000.0000 篇文章时，传递逗号分隔的文章 ID 可能会变得很丑陋，并且它看起来像一个带有参数数组的函数调用。

所以我投票给2）。

# java - TimerTask 问题

> ID：14183734
> 
> 赞同：0
> 
> 时间：2013-01-06T15:44:54.860
> 
> 标签：java, swing, timer, delay, timertask

看看这个代码块：

```
public Reminder() {

    a[0]=1000;
    a[1]=3000;
    a[2]=1000;
   a[3]=5000;
    timer = new Timer();

  timer.schedule(new RemindTask(),0,  a[i]);

  }
 //////////////////////
   class RemindTask extends TimerTask  {

    public void run() {

  point =point +arr[i].length();

     doc.setCharacterAttributes(0,point+1, textpane.getStyle("Red"), true);
     i++;

    }
    } 
```

我希望在每个任务之后更改延迟，因此时间存储在一个数组中。执行时`i++`（指向数组的指针），时序没有变化；随后的延迟率与第一个延迟值相同。为什么它不改变？

**编辑：**

如果需要，这是一个 SSCCE：

```
import java.awt.Color;
import java.lang.reflect.InvocationTargetException;
import java.util.Timer;
import java.util.TimerTask;
import java.awt.Toolkit;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.text.DefaultStyledDocument;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

public class Reminder {
static   JFrame frame;
Toolkit toolkit;
Timer timer;
int point=0;
static   StyledDocument doc;
 static   JTextPane textpane;
 String[] arr={"Tes"," hiiii"," what"," happpn"};
public int i=0;
long[] a=new long[4];
public Reminder() {

    a[0]=1000;
    a[1]=3000;
    a[2]=1000;
   a[3]=5000;
    timer = new Timer();

  timer.schedule(new RemindTask(),0,  a[i]);

 }

 class RemindTask extends TimerTask  {

    public void run() {

  point =point +arr[i].length();

     doc.setCharacterAttributes(0,point+1, textpane.getStyle("Red"), true);
     i++;

    }
  }
 public static void newcompo()
{

    JPanel panel = new JPanel();
    doc = (StyledDocument) new DefaultStyledDocument();
  textpane = new JTextPane(doc);
    textpane.setText("Test hiiii what happpn");
    javax.swing.text.Style style = textpane.addStyle("Red", null);
    StyleConstants.setForeground(style, Color.RED);
           panel.add(textpane);
    frame.add(panel);
    frame.pack();

 }
  public static void main(String args[]) throws InterruptedException,   InvocationTargetException {
      SwingUtilities.invokeAndWait(new Runnable() {

        public void run() {
            frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            frame.setVisible(true);

           newcompo();
        }
    });

 Reminder aa=  new Reminder();

  }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T16:15:54.460

使用 Swing 时，最好使用`javax.swing.Timer`over `javax.util.Timer`。这将为您提供`setDelay`方法：

```
timer = new Timer(0, new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {
        if (i > a.length) { // check when to stop
            timer.stop();
            return;
        }

        point = point + arr[i].length();
        doc.setCharacterAttributes(0, point + 1, textpane.getStyle("Red"), true);
        i++;

        // Change delay period
        timer.setDelay(a[i]);
    }
});
timer.setDelay(a[0]);
timer.start(); 
```

这将要求您更改延迟数组的类型`a`，从

```
long[] a = new long[4]; 
```

对此：

```
int[] a = new int[4]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:11:47.830

在您的 run() 中，您需要取消旧计时器并重新运行一个新计时器，例如（未经测试）：

```
public void run() {
   ...
timer.cancel(); // Terminate the timer thread.
timer = new Timer();
timer.schedule(new RemindTask(), 0, a[i]);
} 
```

当然，最好指定初始延迟：

```
timer.schedule(new RemindTask(), a[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:14:11.063

第二种方法是安排你的 run() 每秒，但在不是执行下一个操作的时候返回而不做任何事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T15:48:27.277

尝试将变量声明`i`为 volatile。

# java - Is there a disadvantage to large buffers?

> ID：14183737
> 
> 赞同：0
> 
> 时间：2013-01-06T15:45:19.307
> 
> 标签：java, android, networking, io, buffer

In experimenting with transferring files over networks in Java, I've found that buffers > 64k give best performance. However from what I've seen googling around (such as [here](https://stackoverflow.com/a/237495/1492861)), most people recommend smaller buffers of 8-32k because it can fit in the CPU cache. Is that factor important when transferring large volumes of data? Would it be better to sacrifice better network throughput and go with the smaller buffer? (this includes Android devices too, perhaps any low power device)

# java - GWT can't find .gwt.xml

> ID：14183739
> 
> 赞同：0
> 
> 时间：2013-01-06T15:45:22.637
> 
> 标签：java, gwt, ant

I'm trying to run GWT through an ant build, because I want to implement it in my java project. My build.xml looks like this:

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="test-exporter" default="devmode">

<property name="lib" location="war/WEB-INF/lib"/>

<path id="gwt.classpath">
    <fileset dir="${lib}">
        <include name="*.jar"/>
    </fileset>
</path>

<target name="devmode">
    <java failonerror="true" fork="true" classname="com.google.gwt.dev.DevMode">
        <classpath refid="gwt.classpath"/>
        <jvmarg value="-Xmx1024M"/>
        <jvmarg value="-XX:MaxPermSize=256m" />
        <jvmarg value="-XX:+UseCompressedOops" />
        <arg value="-startupUrl"/>
        <arg value="Test.html"/>
        <arg line="-bindAddress" />
        <arg line="0.0.0.0" />
        <arg value="com.test.Test"/>
    </java>
</target>

</project> 
```

But when I'm trying to run this, GWT says that it can't find my /com/test/Test.gwt.xml. The Test.gwt.xml file is located in package com.test so it should be able to find it. Do I have to add the .xml to the classpath aswell? Running it with the Eclipse plugin works, but I'm really looking to run it through ant build

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:47:10.393

您没有指定`<pathelement location="src"/>`. 请参阅下面正确的 build.xml。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <project name="test-exporter" default="devmode" >

    <property name="lib" location="war/WEB-INF/lib"/>

    <path id="gwt.classpath">
        <fileset dir="${lib}">
            <include name="*.jar"/>
        </fileset>
    </path>

    <target name="devmode">
        <java failonerror="true" fork="true" classname="com.google.gwt.dev.DevMode">
            <classpath>
            <pathelement location="src"/>
            <path refid="gwt.classpath" />
            </classpath> 
            <jvmarg value="-Xmx1024M"/>
            <jvmarg value="-XX:MaxPermSize=256m" />
            <arg value="-startupUrl"/>
            <arg value="Test.html"/>
            <arg line="-bindAddress" />
            <arg line="0.0.0.0" />
            <arg />
            <arg value="com.test.Test"/>
        </java>
    </target>

    </project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:35:20.823

这是一个有效的`devmode`目标：

```
 <target name="devmode" depends="javac" description="Run development mode">
   <java failonerror="true" fork="true" classname="com.google.gwt.dev.DevMode">
     <classpath>
       <pathelement location="src"/>
       <path refid="project.class.path"/>
       <pathelement location="../../validation-api-1.0.0.GA.jar" />
       <pathelement location="../../validation-api-1.0.0.GA-sources.jar" />
     </classpath>
     <jvmarg value="-Xmx256M"/>
     <arg value="-startupUrl"/>
     <arg value="Showcase.html"/>
     <arg line="-war"/>
     <arg value="war"/>
     <!-- Additional arguments like -style PRETTY or -logLevel DEBUG -->
     <arg line="${gwt.args}"/>
     <arg value="com.google.gwt.sample.showcase.Showcase"/>
   </java>
 </target> 
```

您没有指定 GWT 参数，您必须根据您的项目对其进行修改。还有一些很好的 GWT 项目`samples`在 GWT 分发 zip 文件的文件夹中配置了 ant。

# asp.net-mvc - Entity Framework and foreign key relationships producing slow sql performance

> ID：14183740
> 
> 赞同：2
> 
> 时间：2013-01-06T15:45:27.717
> 
> 标签：asp.net-mvc, sql-server-2008, entity-framework-5

I have normalized a Country/region/city database into multiple tables. City has a foreign key to region which has a foreign key to country.

The `CITY` table includes 2 additional columns for finding the associated numerical `IPAddress`. As you can imagine the city table has over 4 million records (representing the cities in the world which maps back to a region and then a country).

`CITY`, `REGION`, `COUNTRY` are entities that I have mapped with Entity Framework power tools, that all have a name column (that represents a `cityname`, `regionname`, `countryname`, respectively), and a primary key IDENTITY column that is indexed.

Let's say I have a table / entity called `VisitorHit` that has the following columns:

```
id as int (primary key, identity)
dateVisited as datetime 
FK_City as int (which has a many to one relationship to the CITY entity) 
```

In code I use the `VisitorHit` entity like:

```
var specialVisitors = VisitorRepository.GetAllSpecialVisitors();
var distinctCountries = specialVisitors.Select(i => i.City.CityName).Distinct().ToArray(); 
```

now the `GetAllSpecialVisitors` returns a subset of the actual visitors (and it works pretty fast). The typical subset contains approximately 10,000 rows. The `Select Distinct` statement takes minutes to return. Ultimately I need to further delimit the `distinctCountries` by a date range (using the `visitorhit.datevisited` field) and return the count for each `distinctCountry`.

Any ideas on how I could speed up this operation?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:01:52.493

您是否查看过 SQL Profiler 以了解为此生成了什么 SQL。我的第一个猜测（因为您没有发布 的​​代码`GetAllSpecialVisitors`）是您延迟加载 City 行，在这种情况下，您将产生对数据库的多次调用（每个实例一个`specialVisitors`）以获取城市。您可以在调用中急切加载城市`GetAllSpecialVisistors()`。

使用`.Include("City")`或`.Include(v=>v.City)`

例如像这样的东西：

```
var result = from hit in context.VisitorHits
             where /* predicates */
             .Include(h =>h.City) 
```

就像我说的，您需要查看 SQL Profiler 向您显示的内容，以了解实际发送到 SQL Server 的 SQL。但是当我遇到这样的问题时，事实证明这是最常见的原因。

如果您尝试自己在 SSMS 中编写查询并且效果很好，那么另一种解决方案可能是编写视图并在视图上查询。当 Entity Framework 生成无法有效工作的笨重查询时，我有时会这样做。

# mysql - MySQL create table fails due to foreignkey

> ID：14183741
> 
> 赞同：1
> 
> 时间：2013-01-06T15:45:32.193
> 
> 标签：mysql, indexing, foreign-keys

This seems to be a very common problem but I can't seem to find an answer despite of all the posts and pseudotutorials I have read in the last 2 days :/

The project I am currently working on forces me to learn how to use MySQL and I seem to have run into a problem concerning ForeignKeys or Indexes.

> > I have these creates:
> > [http://paste.ubuntu.com/1503473/](http://paste.ubuntu.com/1503473/)

Edit: Inserting crutial part here cause the link above might die sometime:

```
 CREATE TABLE user_book (
        userid  Varbinary(16),
        bookid Varbinary(16),

        PRIMARY KEY(userid, bookid),

        INDEX(userid),
        FOREIGN KEY(userid)  REFERENCES user,

        INDEX (bookid),
        FOREIGN KEY(bookid) REFERENCES book

    )ENGINE=INNODB;

    Made the same mistake at user_chapter. 
```

But sql throws an error at Table "user_book":
#1005 - Can't create table 'mangressdb.user_book' (errno: 150)

It would be really great if you could help me out here as I am close to crying. It is probably just a very stupid mistake on my part but I can't find it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:04:13.637

看起来您在 DDL 中遇到了名称冲突。尝试明确指定要用于外键的父表列：

```
CREATE TABLE user_book (
    userid  Varbinary(16),
    bookid Varbinary(16),

    PRIMARY KEY(userid, bookid),

    INDEX(userid),
    FOREIGN KEY(userid)  REFERENCES user (userid),

    INDEX (bookid),
    FOREIGN KEY(bookid) REFERENCES book (bookid)

)ENGINE=INNODB; 
```

您还需要显式指定`user_chapter`表的父列名称。

# java - JRadio Buttons are "Hiding" in GridBagLayout

> ID：14183743
> 
> 赞同：3
> 
> 时间：2013-01-06T15:45:36.360
> 
> 标签：java, swing, jpanel, gridbaglayout, jradiobutton

Please have a look at the following code

```
package normal;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Form extends JFrame
{
    private JLabel heightLabel, weightLabel, waistLabel, neckLabel, hipsLabel,genderLabel,valuesLabel,bfPercentageLabel;
    private JLabel logoLabel; 

    private ImageIcon logo;

    private JTextField heightTxt, weightTxt, waistTxt, neckTxt, hipsTxt;

    private JRadioButton maleRadio, femaleRadio, inchesRadio, cmRadio;
    private ButtonGroup genderGroup, valuesGroup;

    private JComboBox percentageCombo;

    private JPanel centerPanel, northPanel, southPanel;

    public Form()
    {
        //Declaring instance variables  
        heightLabel = new JLabel("Height: ");
        weightLabel = new JLabel("Weight: ");
        waistLabel = new JLabel("Waist: ");
        neckLabel = new JLabel("Neck: ");
        hipsLabel = new JLabel("Hips: ");
        genderLabel = new JLabel("Gender: ");
        valuesLabel = new JLabel("Values in: ");

        logoLabel = new JLabel();
        logo = new ImageIcon(getClass().getResource("/images/calc_logo_final_2_edit.gif"));
        logoLabel.setIcon(logo);

        heightTxt = new JTextField(10);
        weightTxt = new JTextField(10);
        waistTxt = new JTextField(10);
        neckTxt = new JTextField(10);
        hipsTxt = new JTextField(10);

        maleRadio = new JRadioButton("Male");
        femaleRadio = new JRadioButton("Female");
        genderGroup = new ButtonGroup();
        genderGroup.add(maleRadio);
        genderGroup.add(femaleRadio);

        inchesRadio = new JRadioButton("Inches");
        cmRadio = new JRadioButton("Centimeters");
        valuesGroup = new ButtonGroup();
        valuesGroup.add(inchesRadio);
        valuesGroup.add(cmRadio);

        percentageCombo = new JComboBox();
        percentageCombo.addItem("No Value is Set");

        this.add(createNorthPanel(),"North");
        this.add(createCenterPanel(),"Center");
        this.setResizable(false);
        this.pack();
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    private JPanel createNorthPanel()
    {
        northPanel = new JPanel();
        northPanel.setLayout(new FlowLayout());

        northPanel.add(logoLabel);

        return northPanel;
    }

    private JPanel createCenterPanel()
    {
        centerPanel = new JPanel();

        GridBagLayout gbl = new GridBagLayout();
        GridBagConstraints gbc = new GridBagConstraints();

        centerPanel.setLayout(gbl);

        //creating a jpanel for gender radio buttons
        JPanel genderPanel = new JPanel();
        genderPanel.setLayout(new FlowLayout());
        genderPanel.add(genderLabel);
        genderPanel.add(maleRadio);
        genderPanel.add(femaleRadio);

        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(heightLabel,gbc);

        gbc.gridx = 2;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(heightTxt,gbc);

        gbc.gridx = 3;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(weightLabel,gbc);

        gbc.gridx = 4;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(weightTxt,gbc);

        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(waistLabel,gbc);

        gbc.gridx = 2;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(waistTxt,gbc);

        gbc.gridx = 3;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(neckLabel,gbc);

        gbc.gridx = 4;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(neckTxt,gbc);

        gbc.gridx = 5;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(hipsLabel,gbc);

        gbc.gridx = 6;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(hipsTxt,gbc);

        gbc.gridx = 1;
        gbc.gridy = 3;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(genderLabel,gbc);

        gbc.gridx = 2;
        gbc.gridy = 3;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(maleRadio,gbc);

        gbc.gridx = 3;
        gbc.gridy = 3;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,-10,0,0);
        centerPanel.add(femaleRadio,gbc);

        gbc.gridx = 1;
        gbc.gridy = 4;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(50,5,0,0);
        centerPanel.add(valuesLabel,gbc);

        return centerPanel;

    }
} 
```

As you can see, the JRadio button "female" is hiding a part of it, and once you move your cursor, it shows up completely. I guess this is happening because it is using minus spacing in "insets".

However I did it like that to reduce the gap between 2 radio buttons. Male is in `gridx = 2`, and female is in `gridx = 3`, which is a massive space between the buttons.So I used minus space in insets to reduce the space, unfortunately it came like this.

I tried adding the JLabel, maleRadio and femaleRadio into a seperate JPanel which is having `flowlayout`, and put it into `gbc.gridx = 2; gbc.gridy = 3;`. It made everything worst by matching all the cells in `gridy = 3` into the width of new JPanel.

Please help me to reduce the gap between these 2 JRadio buttons, without having any issue. Thank you.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T16:39:03.177

*   不要扩展`JFrame`而是创建一个实例并使用它。

*   我还看到您将单选按钮添加到面板，但您没有添加面板，而是将单选按钮重新添加到`centerpanel`？选择一种方式失去另一种方式（尽管我认为这可能是在试图解决问题时发生的？）

*   最重要的[SSCCE](http://sscce.org)是可编译的（通过正确的语法并且没有编译错误）和可运行的（通过**main 方法**并且*没有运行时异常*（除非这是问题：P）-就像您阅读图像一样-请找到一种包含资源的方法，即链接到带有徽标的 URL，或者使方法返回与徽标大小相同的简单图像，或者干脆将其省略）。

问题在这里：

```
 gbc.gridx = 3;
    gbc.gridy = 3;
    gbc.fill = GridBagConstraints.BOTH;
    gbc.insets = new Insets(15, -10, 0, 0);
    centerPanel.add(femaleRadio, gbc); 
```

-10 绝对不应该存在（可能是拼写错误？），因为这会导致它重叠，或者在这种情况下*重叠*另一个组件，而不是使用大于或等于 0 的任何值：

```
 gbc.gridx = 3;
    gbc.gridy = 3;
    gbc.fill = GridBagConstraints.BOTH;
    gbc.insets = new Insets(15, 10, 0, 0);
    centerPanel.add(femaleRadio, gbc); 
```

这会给我们：

![在此处输入图像描述](../Images/66bd5ebd45693ca41b7c83080dabc12f.png)

**更新：**

同样重要的是要注意`GridBagContsraints`像`gridx`etc 从 0 而不是 1 开始。

+1 对@Gagandeeps balis 评论重用已设置且在 中相同的值`GridBagConstraints`，这是您的代码，其中包含所有讨论的修复：

```
import java.awt.FlowLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import javax.swing.ButtonGroup;
import javax.swing.ImageIcon;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

class Form {

    private JLabel heightLabel, weightLabel, waistLabel, neckLabel, hipsLabel, genderLabel, valuesLabel, bfPercentageLabel;
    private JLabel logoLabel;
    private ImageIcon logo;
    private JTextField heightTxt, weightTxt, waistTxt, neckTxt, hipsTxt;
    private JRadioButton maleRadio, femaleRadio, inchesRadio, cmRadio;
    private ButtonGroup genderGroup, valuesGroup;
    private JComboBox percentageCombo;
    private JPanel centerPanel, northPanel, southPanel;

    public Form() {
        //Declaring instance variables  
        heightLabel = new JLabel("Height: ");
        weightLabel = new JLabel("Weight: ");
        waistLabel = new JLabel("Waist: ");
        neckLabel = new JLabel("Neck: ");
        hipsLabel = new JLabel("Hips: ");
        genderLabel = new JLabel("Gender: ");
        valuesLabel = new JLabel("Values in: ");

        logoLabel = new JLabel();
        //logo = new ImageIcon(getClass().getResource("/images/calc_logo_final_2_edit.gif"));
        //logoLabel.setIcon(logo);

        heightTxt = new JTextField(10);
        weightTxt = new JTextField(10);
        waistTxt = new JTextField(10);
        neckTxt = new JTextField(10);
        hipsTxt = new JTextField(10);

        maleRadio = new JRadioButton("Male");
        femaleRadio = new JRadioButton("Female");
        genderGroup = new ButtonGroup();
        genderGroup.add(maleRadio);
        genderGroup.add(femaleRadio);

        inchesRadio = new JRadioButton("Inches");
        cmRadio = new JRadioButton("Centimeters");
        valuesGroup = new ButtonGroup();
        valuesGroup.add(inchesRadio);
        valuesGroup.add(cmRadio);

        percentageCombo = new JComboBox();
        percentageCombo.addItem("No Value is Set");

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(createNorthPanel(), "North");
        frame.add(createCenterPanel(), "Center");
        frame.setResizable(false);
        frame.pack();
        frame.setVisible(true);

    }

    private JPanel createNorthPanel() {
        northPanel = new JPanel();
        northPanel.setLayout(new FlowLayout());
        northPanel.add(logoLabel);

        return northPanel;
    }

    private JPanel createCenterPanel() {
        centerPanel = new JPanel(new GridBagLayout());

        GridBagLayout gbl = new GridBagLayout();
        centerPanel.setLayout(gbl);

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15, 5, 0, 0);

        gbc.gridx = 0;
        gbc.gridy = 0;
        centerPanel.add(heightLabel, gbc);
        gbc.gridx = 1;
        centerPanel.add(heightTxt, gbc);
        gbc.gridx = 2;
        centerPanel.add(weightLabel, gbc);
        gbc.gridx = 3;
        centerPanel.add(weightTxt, gbc);

        gbc.gridx = 0;
        gbc.gridy = 1;
        centerPanel.add(waistLabel, gbc);
        gbc.gridx = 1;
        centerPanel.add(waistTxt, gbc);
        gbc.gridx = 2;
        centerPanel.add(neckLabel, gbc);
        gbc.gridx = 3;
        centerPanel.add(neckTxt, gbc);
        gbc.gridx = 4;
        centerPanel.add(hipsLabel, gbc);
        gbc.gridx = 5;
        centerPanel.add(hipsTxt, gbc);

        gbc.gridx = 0;
        gbc.gridy = 2;
        centerPanel.add(genderLabel, gbc);
        gbc.gridx = 1;
        centerPanel.add(maleRadio, gbc);
        gbc.gridx = 2;
        centerPanel.add(femaleRadio, gbc);

        gbc.gridx = 0;
        gbc.gridy = 3;
        gbc.insets = new Insets(50, 5, 0, 0);
        centerPanel.add(valuesLabel, gbc);

        return centerPanel;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Form();
            }
        });
    }
} 
```

# visual-studio-2010 - Can Visual Studio Command Window 2010 commands be executed in a script

> ID：14183744
> 
> 赞同：1
> 
> 时间：2013-01-06T15:45:40.677
> 
> 标签：visual-studio-2010, automation, command-window

I've just learned about Visual Studio 2010's [Command Window](http://msdn.microsoft.com/en-us/library/c785s0kz.aspx), and am hoping it might be able to automate a short set of tedious steps.

**Is it possible to put several Command Window commands into a file and execute them?**

The scenario I have in mind is:

*   open a particular source file (hard-coded path is known)
*   set a breakpoint at a particular (fixed) line number in that file

I want to be able to do this easily in a given, open solution - without having to go to the line number by hand, and set the breakpoint by hand.

(The line is the point where a null smart-pointer is dereferenced, and so is a very common location for breakpoints.)

**Edit - possible alternatives**

*   [Recording a macro](http://msdn.microsoft.com/en-us/library/7kyhdt1z%28v=vs.100%29.aspx) - I almost mentioned in the original post that I'd considered a macro, but I was wanting to version-control the commands, and macros are binary files, so not amenable to version control
*   [Creating an add-in](http://msdn.microsoft.com/en-us/library/80493a3w%28v=vs.100%29.aspx) - Creating source-code and a DLL, to run some simple commands seems unnecessarily complex to me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T21:13:07.527

Visual Studio 2010 和更新版本提供了一种内置机制来回答问题中的特定场景，即一种在特定文件的特定行中轻松设置断点的方法。

该机制在[VS 2010 Debugger Improvements (BreakPoints, DataTips, Import/Export)](http://weblogs.asp.net/scottgu/archive/2010/04/21/vs-2010-debugger-improvements-breakpoints-datatips-import-export.aspx)中有很好的描述。

此屏幕截图的 VS 2010 将断点导出到 XML 文件 - 然后您可以与其他开发人员共享，或稍后重新加载：

![在此处输入图像描述](../Images/ce2ad4eafd3687464ed52fa998711863.png)

还有一个相应的“从文件导入断点”按钮。

# memory - What's the meaning of this?(size and offset)

> ID：14183745
> 
> 赞同：0
> 
> 时间：2013-01-06T15:45:54.073
> 
> 标签：memory, interrupt, i386, gdt

Loading/Storing

The IDT is loaded using the LIDT assembly instruction. It expects the location of a IDT description structure:

![enter image description here](../Images/d31ed8b0730387de5245aabedff8c123.png)

The offset is the virtual address of the table itself. The size is the size of the table subtracted by 1\. This structure can be stored to memory again with the SIDT instruction.

It's in [http://wiki.osdev.org/Interrupt_Descriptor_Table](http://wiki.osdev.org/Interrupt_Descriptor_Table)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T08:52:58.487

IDT 描述符是六字节宽的结构，包含对*加载 IDT 条目*和中断检查很重要的信息。

假设您已将 PIC 中断映射到 interrupt `0x40`，并且您的 IDT 包含`0x3F`条目（其大小为`0x1F8`）。每个中断条目都有 8 个字节，所以当 IF（中断标志）被设置并且 IMR（中断屏蔽寄存器，过滤中断的东西）在它的第一个中断上没有屏蔽时，PIC 将发出信号它想要触发打断。处理器询问：“好的，它的编号是多少？”，PIC 回答“0x40”。处理器将计算中断入口的偏移量（从表的开头）并将其与 IDT 描述符结构的第一个字进行比较。如果它大于 IDT 描述符中的值，则会引发异常（我认为它是#GP）。

IDT 描述符结构中的偏移量是指向 IDT 开头的 4 字节地址（不是物理的，分页的）。添加从中断号计算的偏移量会将处理器引导到 IDT 条目的地址。

# android - onReceive 函数从未调用过

> ID：14183747
> 
> 赞同：0
> 
> 时间：2013-01-06T15:45:56.980
> 
> 标签：android

我没有成功注册或使用我的`broadCastReceiver`.

这是我的代码：

```
 public class ReciverChangeProgress extends BroadcastReceiver{

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub
        android.util.Log.e("ReciverChagne", "IReciver");
    }

}

public ReciverChangeProgress reciverChangeProgress;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.e("ReciverChange","onCreate");
    setContentView(R.layout.activity_progress);
    progressBar= (ProgressBar) findViewById(R.id.progressBar1);
    Log.e("ReciverChange","setProgress");
    progressBar.setProgress(UploadService.lastPercent);
    IntentFilter intentFilter=new IntentFilter("commoshe");
    registerReceiver(reciverChangeProgress,intentFilter);
    android.util.Log.e("ReciverChagne", "register");
    sendBroadcast(new Intent("commoshe"));
    android.util.Log.e("ReciverChagne", "Use");

} 
```

当我运行 Activity 时，这是 LogCat： `ReciverChange, onCreate ReciverChange, setProgresS ReciverChange, regiseter ReciverChange, use`

但是 onReceive 函数从未调用过。

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:02:54.287

我成功了。

我忘了这个：

`reciverChangeProgress=new ReciverChangeProgress();`

我们需要将新对象设置为我们的 broadcaseReceiver 的新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:03:58.737

```
reciverChangeProgress=new ReciverChangeProgress(); 
```

***`onReceive()`永远不会被调用。因为从未发送过广播。您刚刚注册接收 BroadCastReceiver***

***要发送广播，请尝试使用正确的这些方法`IntentFilter`***

```
Intent intent = new Intent("commoshe");
sendBroadcast(intent); 
```

希望它可以帮助你！

# php - ajax/php 中的错误

> ID：14183755
> 
> 赞同：1
> 
> 时间：2013-01-06T15:47:10.467
> 
> 标签：php, ajax

嘿家伙即时试图添加到我的网站一些 ajax 代码。我知道 php，但 ajax 对我来说是新的，所以我在 w3schools.com 上使用了一个示例并更改了其中的一部分。当我使用我的脚本时，萤火虫给了我这个错误：`TypeError: document.getElementById(...) is null`。所以我做错了什么我不知道你能帮我吗？这是我的代码：

```
function showOptionen(str)
{
if (str=="")
  {
  document.getElementById("Optionen").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
//Here in this line is the error:
    document.getElementById("Optionen").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","bezeichnungs-optionen.php?q="+str,true);
xmlhttp.send();
} 
```

我检查了我`bezeichnungs-optionen.php`的，结果是：`<option value="DELL Notebook">DELL Notebook</option>`所以一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:12:54.633

许多浏览器会拒绝`innerHTML`导致无效标记。

由于您要返回一个`<option>`标签，请确保您的“Optionen”是一个`<select>`或`<optgroup>`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:05:16.727

您可以尝试在页面加载后调用函数 showOptionen(testStr) ，如下所示：

```
window.onload = function (){
    showOptionen(testStr);
} 
```

似乎在调用该函数时该元素不存在，因此它可能尚未加载。

您总是可以使用 jQuery 库，它简化了许多 javascript 操作，包括 ajax。

# php - 不错的 url 传递变量

> ID：14183759
> 
> 赞同：2
> 
> 时间：2013-01-06T15:47:35.760
> 
> 标签：php, jquery, zend-framework, url-rewriting, seo

如果我不想更改漂亮的链接，将变量从一个页面传递到另一个页面的最佳方法是什么？我在 php 中使用 Zend Framework 路由器。

可以说我有一个列表页面

```
<a href='/nice-link1/'>link1</a>
<a href='/nice-link2/'>link2</a>
<a href='/nice-link3/'>link3</a> 
```

但我需要传递一个状态参数，例如（？previous_search=dog）。我不想向爬虫和用户公开与此不同的网址：

```
<a href='/nice-link1/'>link1</a> 
```

因为用户可以共享链接。但同时我需要 /nice-link1/ 页面中的 previous_search 变量。我也想避免会话变量。我在想jquery，但我不确定。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T20:35:20.467

我个人会使用 Zend_Session_Namespace 来存储变量并使它们远离 URL。

[http://framework.zend.com/manual/1.12/en/zend.session.html](http://framework.zend.com/manual/1.12/en/zend.session.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T15:52:36.657

1.  将您的数据保存为 cookie。[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

2.  通过本地存储保存您的数据。[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

3.  让您的链接实际上是使用 POST 提交的表单，以便变量不会出现在 URL 字符串中。[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.1](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.1)

在您的情况下，我会推荐 cookie 路线。它非常适合保存您希望在页面上响应的用户特定数据，例如以前的搜索。

# java - Java - 我应该用 int、long 还是 Integer 表示用户 ID？

> ID：14183761
> 
> 赞同：8
> 
> 时间：2013-01-06T15:47:42.463
> 
> 标签：java

当我需要对用户 ID 进行数值比较时，我应该执行以下操作：

```
int numeric_user_id = Integer.valueOf("1234343"); 
```

还是将其放入长整数或将其保留为整数更好？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T16:28:06.733

唯一标识符不应带有任何特殊的语义含义；**曾经**。UUID 或 GUID 类型仅为实体标识符而设计，因此您不会向它们推断任何语义含义，这就是使它们不透明的原因。

许多实际好处之一是在将数据导入和导出到不同数据库时它们永远不会发生冲突，*即；开发、质量保证、生产*或在集群中使用时。如果您使用普通的旧数字，尤其是自动递增的数字，每个数据库将有不同的用户使用相同的数字，并且几乎不可能防止欺骗和其他*不良数据*潜入不同的系统。UUID/GUID 解决方案完全避免了此类问题。

> 有很多理由不将 id 用于除 id 之外的任何东西。当您拥有超过 30000 个 beta 用户时会发生什么，当您想将某些人踢出 beta 用户程序时会发生什么，当...时会发生什么？

至于将 id 用于识别 beta 用户等业务逻辑，请不要为此使用 id，使用另一个属性标志来识别它们。你可以有一个布尔标志、一个枚举或其他标志，甚至可以将他们是 beta 用户这一事实与他们加入 beta 程序时通过一个`nullable timestamp`, 将它们标记为这样，但最终可能是泄漏问题导致灵活性降低；但在某些情况下可能是合适的。

```
public interface Identifiable {

    public UUID getUUID();
}

public interface BetaUser extends Identifiable {

    public boolean isBetaUser();
    public Date    joinedBetaProgramOn();
} 
```

`int`, `long`, 和其他`number`类型只能用于*数学*；不适用于与数学问题无关的身份管理或业务逻辑。

*如果您想获取`nth`系统的用户，则按加入日期对它们进行排序并从列表中获取它们的索引*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T16:16:23.027

我建议使用 Long （一个对象，而不是原语），正是因为它允许空值。在对瞬态用户对象（复制、克隆等）进行操作时，您可能会需要这样做。

但是，如果您要将它们保存在数据库中，请使 userId 列不为空（最好将其设为主键）。

使用 Long 而不是 Integer，这样您将来就不必担心溢出。

不要比较 userId 或尝试将它们用于任何逻辑目的（例如找出谁是 beta 用户） - 将它们保留为不透明的标识符。如果您需要知道谁是 beta 用户，请引入数据（例如 accountType）来跟踪它。

正如其他人所提到的，UUID 是另一种完全可以接受的方式，并且具有本质上相当不透明的好处（尽管不完全），几乎强制执行“不解释用户 ID”规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T15:52:54.810

我会说把它变成一个长的原语。原因是，假设您永远不希望它为 null，那么您将永远不会遇到“getUserId()”方法返回 null 用户 ID 并且错误未被捕获的意外情况。

如果将其存储为 long vs. Long 或 Integer，系统会立即将其检测为运行时错误。

如果你将它存储在一个实际的对象中，比如 Long，它可能是 null。如果这是一个错误，您的代码可能会在以后以不可预测的、可能具有破坏性的方式失败。最好尽早发现错误。

如果它可以为 null 并且您使用真实对象，请务必编写代码来处理 null 情况。

至于 int 与 long，您将不得不根据您是否认为它会超过 int 的大小来做出决定。

这也假设您唯一的选择是正常的数字类型。也许还有另一种更适合此类 ID 的数据结构，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T16:12:50.053

在这种情况下，最好的方法是使用单独的原始类型而不是整数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-28T10:06:24.630

int 的最大值是 2,147,483, 647，超过 20 亿。在大多数情况下， int 应该绰绰有余。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T17:09:07.787

奇怪的是仍然没有答案主张**int**。作为自动递增的主键，足以满足 99.99% 的所有应用程序。此外，用户参考资料很多（创建者、最后编辑者……），因此与 long 相比，节省一点是很好的。

如果您有用户注释和其他历史项目等内容，Long 将用作主键。

规则：**不久**就从**int**开始，因为对 java 源和数据库的修改很容易。

# android - 围绕给定点 2D 沿圆圈移动

> ID：14183765
> 
> 赞同：2
> 
> 时间：2013-01-06T15:48:02.637
> 
> 标签：android, math, opengl-es, rotation

我想在给定点周围的圆圈上移动一个对象。我在 Android 上使用 OpenGL，我的视口是横向模式下的屏幕分辨率 (1280 * 800)。我要旋转对象的点是例如 (500, 300)，这是用户按下的位置。我也有所需圆的半径 r。总结一下，我有圆心、半径和角度（我想在游戏循环的每次迭代中移动对象的量）

到目前为止，我试过这个：

```
this.setPosX(((float)Math.cos(angle)*radius + center.x) * width);
this.setPosY(((float)Math.sin(angle)*radius + center.y) * height); 
```

这将沿省略号而不是圆形创建运动...

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T15:57:59.170

它产生一个椭圆，因为圆圈没有高度。试试这个

```
this.setPosX(((float)Math.cos(angle)*radius ) + center.x);
this.setPosY(((float)Math.sin(angle)*radius ) +center.y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T15:59:21.717

该公式不正确，因为您将围绕圆的点的正确值乘以其他没有意义的不同值。

想想你有`c(x,y)`哪个是中心，你需要移动一个由 给出的值`r(cos(angle)*radius, sin(angle)*radius)`。

你得到的是`p(x + cos(angle)*radius, y + sin(angle)*radius)`.

如果您将这两个坐标乘以其他两个值（`width`并且`height`在您的公式中），您将更改圆形或中心的因子，因此您最终不仅会得到一个椭圆，而且会得到一个改变其中心的椭圆。

所以：

*   圆圈：`p(c.x + cos(angle)*r, y + sin(angle)*r)`
*   椭圆：`p(c.x + cos(angle)*w, y + sin(angle)*h)`
*   你的公式：（`p((c.x + cos(angle)*r)*w, (c.y + sin(angle)*r)*h)`这没有意义）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T15:55:37.220

只需删除最后的宽度和高度因素。如果你想要一个圆，你不能将坐标与不同的因子相乘。

# r - match.fun 为函数内部定义的函数提供错误

> ID：14183766
> 
> 赞同：2
> 
> 时间：2013-01-06T15:48:03.090
> 
> 标签：r

尝试应用于`match.fun`其他函数中定义的函数时出现错误。

```
x <- matrix(rnorm(10*100), nrow=100) # data sample
descStats <- function(x, stats = c("n", "min", "max", "srange", "mean", "median", "sd")) {
  n <- function(x, ...) sum(!is.na(x), ...)
  srange <- function(x, ...) max(x, ...) - min(x, ...)
  fun <- function(x) {
    result <- vapply(stats, function(z) match.fun(z)(x, na.rm=TRUE), FUN.VALUE=numeric(1))
  }
  if (is.vector(x)) {
    result <- fun(x)
  }
  if (is.matrix(x) || is.data.frame(x)) {
    result <- t(apply(x, 2, fun))
  }
  return(result)
}
descStats(x)
## Error in get(as.character(FUN), mode = "function", envir = envir) : 
##   object 'n' of mode 'function' was not found 
```

如果我在 descStats 函数之外定义它工作正常`n`。`srange`

```
n <- function(x, ...) sum(!is.na(x), ...)
srange <- function(x, ...) max(x, ...) - min(x, ...)
descStats2 <- function(x, stats = c("n", "min", "max", "srange", "mean", "median", "sd")) {
  fun <- function(x) {
    result <- vapply(stats, function(z) match.fun(z)(x, na.rm=TRUE), FUN.VALUE=numeric(1))
  }
  if (is.vector(x)) {
    result <- fun(x)
  }
  if (is.matrix(x) || is.data.frame(x)) {
    result <- t(apply(x, 2, fun))
  }
  return(result)
}
descStats2(x)
##         n       min      max   srange        mean      median        sd
##  [1,] 100 -2.303839 2.629366 4.933205  0.03711611  0.14566523 1.0367947
##  [2,] 100 -1.968923 2.169382 4.138305 -0.03917503  0.02239458 0.9048509
##  [3,] 100 -2.365891 2.424077 4.789968 -0.08012138 -0.23515910 1.0438133
##  [4,] 100 -2.740045 2.127787 4.867832  0.03978241  0.15363449 0.9778891
##  [5,] 100 -1.598295 2.603525 4.201820  0.23796616  0.16376239 1.0428915
##  [6,] 100 -1.550385 1.684155 3.234540 -0.11114479 -0.09264598 0.8260126
##  [7,] 100 -2.438641 3.268796 5.707438  0.02948100 -0.05594740 1.0481331
##  [8,] 100 -1.716407 2.795340 4.511747  0.22463606  0.16296613 0.9555129
##  [9,] 100 -2.359165 1.975993 4.335158 -0.33321888 -0.17580933 0.9784788
## [10,] 100 -2.139267 2.838986 4.978253  0.15540182  0.07803265 1.0149671 
```

它的另一种使用方式`eval(call(FUN, args))`。例如。

```
descStats3 <- function(x, stats = c("n", "min", "max", "srange", "mean", "median", "sd")) {
  n <- function(x, ...) sum(!is.na(x), ...)
  srange <- function(x, ...) max(x, ...) - min(x, ...)
  fun <- function(x) {
    result <- vapply(stats, function(z) eval(call(z, x, na.rm=TRUE)), FUN.VALUE=numeric(1))
  }
  if (is.vector(x)) {
    result <- fun(x)
  }
  if (is.matrix(x) || is.data.frame(x)) {
    result <- t(apply(x, 2, fun))
  }
  return(result)
}
descStats3(x)
##         n       min      max   srange        mean      median        sd
##  [1,] 100 -2.303839 2.629366 4.933205  0.03711611  0.14566523 1.0367947
##  [2,] 100 -1.968923 2.169382 4.138305 -0.03917503  0.02239458 0.9048509
##  [3,] 100 -2.365891 2.424077 4.789968 -0.08012138 -0.23515910 1.0438133
##  [4,] 100 -2.740045 2.127787 4.867832  0.03978241  0.15363449 0.9778891
##  [5,] 100 -1.598295 2.603525 4.201820  0.23796616  0.16376239 1.0428915
##  [6,] 100 -1.550385 1.684155 3.234540 -0.11114479 -0.09264598 0.8260126
##  [7,] 100 -2.438641 3.268796 5.707438  0.02948100 -0.05594740 1.0481331
##  [8,] 100 -1.716407 2.795340 4.511747  0.22463606  0.16296613 0.9555129
##  [9,] 100 -2.359165 1.975993 4.335158 -0.33321888 -0.17580933 0.9784788
## [10,] 100 -2.139267 2.838986 4.978253  0.15540182  0.07803265 1.0149671
identical(descStats2(x), descStats3(x))
## [1] TRUE 
```

为什么`descStats`不工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T14:42:53.930

编写自己的`match.fun`. 我调用了我的函数`fget`以表明它是`get`专门为函数设计的版本，因此遵守函数的常规范围规则。（如果您不确定它们是什么，请考虑以下代码`c <- 10; c(c, 5)`：）

```
#' Find a function with specified name.
#'
#' @param name length one character vector giving name
#' @param env environment to start search in.
#' @examples
#' c <- 10
#' fget("c")
fget <- function(name, env = parent.frame()) {
  if (identical(env, emptyenv())) {
    stop("Could not find function called ", name, call. = FALSE)
  }

  if (exists(name, env, inherits = FALSE) && is.function(env[[name]])) {
    env[[name]]
  } else {
    fget(name, parent.env(env))
  }
} 
```

实现是一个简单的递归函数：基本情况是`emptyenv()`，每个环境的最终祖先，并且对于沿父堆栈的每个环境，我们检查是否`name`存在一个名为的对象，并且它是一个函数。

它适用于@nograpes 提供的简单测试用例，因为环境默认为调用环境：

```
fun <- function(x) {
  n <- sum
  fget('n')(x)
}
fun(10)
# [1] 10 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T16:24:41.120

这是一个范围问题。查看 match.fun 的代码，您会得到答案。

`match.fun`范围是 `envir <- parent.frame(2)`

`get`范围在 `envir = as.environment(-1) = parent.frame(1)`

我认为我们不能将 envir 作为参数传递。一种解决方案是使用@nograpes （不安全）提出的 get 或破解`match.fun`和更改

`envir <- parent.frame(2)`至 `envir <- parent.frame(1)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T16:10:13.833

由于我还不完全理解的原因，如果您使用`get`而不是`match.fun`，一切正常。

```
x <- matrix(rnorm(10*100), nrow=100) # data sample
descStats <- function(x, stats = c("n", "min", "max", "srange", "mean", "median", "sd")) {
  n <- function(x, ...) sum(!is.na(x), ...)
  srange <- function(x, ...) max(x, ...) - min(x, ...)
  fun <- function(x) {
    # get added here.
    result <- vapply(stats, function(z) get(z)(x, na.rm=TRUE), FUN.VALUE=numeric(1))
  }
  if (is.vector(x)) {
    result <- fun(x)
  }
  if (is.matrix(x) || is.data.frame(x)) {
    result <- t(apply(x, 2, fun))
  }
  return(result)
}
descStats(x) 
```

# java - 如何在 GImage 上运行布尔测试

> ID：14183767
> 
> 赞同：1
> 
> 时间：2013-01-06T15:48:04.530
> 
> 标签：java, object-properties

初学者问题。. . 我想对 GImage 对象运行布尔测试，但我不知道如何。例如，如果我的 GImage 正在显示“image1.jpg”文件，我想做'a'。但如果它显示其他任何内容，我想做'b'。这些图像是由我的程序的不同部分随机选择的。我能看到的唯一方法是创建一个占位符字符串变量，我在更改 GImage 时随时修改它（然后我可以对占位符变量执行测试），但我确定不是最好的做我想做的事。例如，下面的方法可以工作，但因为我的实际程序有很多相关的 GImage 对象和可能的图像，这种方法会非常笨拙：

```
GImage image1 = new GImage("bar.jpg", 0, 0);
int var1 = 0;
GImage image2 = new GImage("sunset.jpg", 100, 0);
int var2 = 1;
GImage image3 = new GImage("bar.jpg", 200, 0);
int var3 = 0;
if (var1 == 0) {
    // returns true
}
if (var2 == 0) {
    // returns false
}
if (var3 == 0) {
    // returns true
} 
```

我只是在学习编程，所以可能有一个明显的解决方案，但我似乎找不到它。如果有一种方法可以返回 GImage 显示的文件名，那似乎可以满足我的需要，但我找不到这样的方法。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:59:58.967

您可以将图像包装在您自己的类中，该类包含适当的属性。

又快又脏：

```
class MyImage
{
    private String resourceName;
    private GImage gImage;

    public MyImage(String resourceName,int x, int y){
        this.resourceName = resourceName;
        this.gImage = new GImage(resourceName,x,y)
    }

    public String getResourceName()
    {
        return resourceName;
    }

    //.
    //.
    //.
}

public static final String RES_IMG_SUNSET = "sunset.jpg";

//.
//.
//.

MyImage image1 = new MyImage("bar.jpg", 0, 0);
MyImage image2 = new MyImage(RES_IMG_SUNSET, 100, 0);
MyImage image3 = new MyImage("bar.jpg", 200, 0);

if(image2.getResourceName().equals(RES_IMG_SUNSET))
{
} 
```

您可能希望拥有某种独特的资源名称，因此您可以使用规范化的规范文件名或 URI。另一种方法是为这些名称定义一个全局常量，如上例所示。当然，GImage 必须支持该格式。

# php - 在 Heroku 服务器上找不到 /tmp 目录的绝对路径

> ID：14183769
> 
> 赞同：-1
> 
> 时间：2013-01-06T15:48:15.400
> 
> 标签：php, facebook, heroku

我正在 Facebook 上开发一个应用程序，它要求用户将他们的图片上传到我的服务器上，我可以将其发布在他们的页面上。我无法将那张图片发布到 Facebook，但是如果只有消息存在，它就会很好地发布。我感觉问题出在 heroku 的 /tmp 目录，因为它以与普通 php 不同的方式处理上传的文件。我不知道绝对路径是服务器（MYAPP.herokuapp.com/tmp）还是apps.facebook。 com/tmp.Do 我需要在那里显式创建一个 tmp 文件夹，如果是这样的话。如何？这是我的“POST”代码片段：

```
 $allowedExts = array("jpg", "jpeg", "gif", "png");
   $extension = end(explode(".", $_FILES["uploadedfile"]["name"]));
   if ((($_FILES["uploadedfile"]["type"] == "image/gif")
   || ($_FILES["uploadedfile"]["type"] == "image/jpeg")
   || ($_FILES["uploadedfile"]["type"] == "image/png")
   || ($_FILES["uploadedfile"]["type"] == "image/pjpeg"))
   && ($_FILES["uploadedfile"]["size"] < 20000)
   && in_array($extension, $allowedExts))
   {
         if ($_FILES["uploadedfile"]["error"] > 0)
          { 
            echo "invalid picture ..please try again";
          }
         else
          {
            echo "successful";
          }
   }
   else
   {
     echo "invalid picture ..please try again";
   }
   $ext=explode("image/", $_FILES["uploadedfile"]["type"]);
   foreach($ext as $e)
   {
     $v .=$e ;
   }
   $path ='https://apps.facebook.com/pagecron'.$_FILES['uploadedfile']['tmp_name'].'.'                 
   .$v;
   $parameters = array('message' => $_POST['message'],
                      'picture' => $path,
                      'link' => $_POST['link'],
                      'name' => $_POST['name'],
                      'caption' => $_POST['caption'],
                      'description' => $_POST['description']
                     ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:58:07.160

你可以使用这个：

```
if(session_id()){}
else{session_start();}
$facebook->setFileUploadSupport("http://" . $_SERVER['SERVER_NAME']);
$x=realpath($_FILES['source']['tmp_name']);
$parameters = array('message' => $_POST['message'],'source' =>'@' . $x );
$parameters['access_token'] = $_SESSION['active']['access_token'];
$check=$facebook->api('/me/photos','POST',$parameters); 
```

# android - 如何让按钮停留在屏幕底部

> ID：14183781
> 
> 赞同：0
> 
> 时间：2013-01-06T15:49:24.383
> 
> 标签：android

大家好，我对我的按钮感到非常沮丧，我该如何让它保持在屏幕底部，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="TextView" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="TextView" />

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Button" />

 </LinearLayout> 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:55:34.063

你可以通过用这样的替换来做到这`LinearLayout`一点`RelativeLayout`：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    /* this puts the textview at the top of the relative layout  */
    android:layout_alignParentTop="true"
    android:text="TextView" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    /* this puts the textview1 at the bottom of the first textview  */
    android:layout_below="@id/textView1"
    android:text="TextView" />

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    /* this puts the button at the bottom of the RelativeLayout  */
    android:layout_alignParentBottom="true"
    android:text="Button" />

 </RelativeLayout> 
```

如果您复制并粘贴代码，请删除注释行，因为在 xml 中不起作用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:08:34.317

在文本视图和按钮之间添加权重为 1 的空视图。此视图将扩展未使用的空间，将按钮保持在底部。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="TextView" />

<View
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:layout_weight="1" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="TextView" />

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Button" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:18:54.100

请复制此代码并使用，它将起作用...

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="TextView" />
</LinearLayout>

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Button" />

</LinearLayout> 
```

# android - 无法在 RelativeLayout 中定义 TextView 位置

> ID：14183785
> 
> 赞同：0
> 
> 时间：2013-01-06T15:49:57.397
> 
> 标签：android, android-layout

当我在 RelativeLayout、'textA'、'textB' 和 'textC' 中声明 3 个 TextView 时。textC 应出现在 textB 下方。但是在运行时，textC 显示在不正确的位置（在屏幕的左上角）。我不知道 textC 能否使用 android:layout_below 到 textB。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="match_parent" >
    <TextView
        android:id="@+id/textA"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_alignParentLeft="true"
        android:text="This is TextA : " />
    <TextView
        android:id="@+id/textB"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/textA"
        android:layout_alignBaseline="@id/textA"
        android:text="this is textB" />
    <TextView
        android:id="@+id/textC"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/textB"
        android:text="This is TextC" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:13:27.733

你也可以改变

```
android:layout_below="@id/textA" 
```

转文字C

完整的示例如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent" android:layout_height="match_parent" >
<TextView
    android:id="@+id/textA"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_alignParentLeft="true"
    android:text="This is TextA : " />
<TextView
    android:id="@+id/textB"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/textA"
    android:layout_alignBaseline="@+id/textA"
    android:text="this is textB" />
<TextView
    android:id="@+id/textC"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textB"
    android:layout_below="@+id/textA"
    android:text="This is TextC" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:09:18.673

只需对以下内容进行更改`TextView3`：

> ```
>  <TextView
>     android:id="@+id/textC"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_alignRight="@+id/textB" 
>     android:layout_below="@+id/textA"
>     android:text="This is TextC" /> 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:38:52.660

它不能对使用 alignBaseline 对其他元素的元素使用垂直对齐。然后在这种情况下，在“textB”中将 alignBaseline 更改为 alignTop，就像代码中一样。

```
<TextView
    android:id="@+id/textB"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/textA"
    android:layout_alignTop="@id/textA"
    android:text="this is textB" /> 
```

使用这种方式，它将支持 textB 的多行。

# android - android中带有Json-c的YouTube数据api

> ID：14183786
> 
> 赞同：0
> 
> 时间：2013-01-06T15:49:57.457
> 
> 标签：android, json, youtube-api, gdata, json-c

我正在尝试向 youtube 创建一个请求并尝试解析我得到的 json-c 结果。代码不工作并抛出异常。我哪里错了？请帮助

MainActivity.java

```
 try{
        HttpClient client = new DefaultHttpClient();

        HttpUriRequest request = new HttpGet("https://gdata.youtube.com/feeds/api/videos?v=2&alt=jsonc&category=autos&max-results=1&orderby=relevance&q="+searchTerm);

        HttpResponse response = client.execute(request);

        String jsonString = StreamUtils.convertToString(response.getEntity().getContent());

        JSONObject json = new JSONObject(jsonString);

        JSONArray jsonArray = json.getJSONObject("data").getJSONArray("items");

        JSONObject jsonObject = jsonArray.getJSONObject(0);

        String title = jsonObject.getString("title");
        Toast.makeText(getApplicationContext(), title, Toast.LENGTH_LONG).show();
        }
        catch(Exception e)
        {
            Log.d("YOUTUBE", e.getMessage());

        } 
```

StreamUtils.java

```
 public class StreamUtils {
  public static String convertToString(InputStream inputStream) throws IOException     {
    if (inputStream != null) {
        Writer writer = new StringWriter();

        char[] buffer = new char[1024];
        try {
            Reader reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"), 1024);
            int n;
            while ((n = reader.read(buffer)) != -1) {
                writer.write(buffer, 0, n);
            }
        } finally {
            inputStream.close();
        }
        return writer.toString();
    } else {
        return "";
    }
} 
```

}

LOGCAT 的输出

```
01-06 21:15:00.328: E/AndroidRuntime(810): java.lang.RuntimeException: Unable to start    activity ComponentInfo{com.example.allinonedata/com.example.allinonedata.MainActivity}:   java.lang.NullPointerException: println needs a message
 01-06 21:15:00.328: E/AndroidRuntime(810):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059) 
```

# python - 如何将上下文管理器用于实例变量

> ID：14183788
> 
> 赞同：8
> 
> 时间：2013-01-06T15:50:07.753
> 
> 标签：python, destructor, with-statement

我如何将 Contextmanager 用于实例变量？例如，假设我有一些`Connection`课程，必须在销毁时关闭。如果我要将它实现为 ContextManager，我可以做到。

```
with Connection() as c:
    c.write('FOO')
    c.ask('BAR?') 
```

它会在销毁时自动关闭。但是如果我想在`__init__`另一个类中使用它，例如下面的例子呢？

```
class Device(object):
    def __init__(self):
        self.connection = Connection()  # Must be closed on destruction. 
```

我不希望它在构造函数退出时关闭，它应该在对象被销毁时死掉。我可以使用`__del__`，但这有它的缺点。习惯于 C++ 中的 RAII 让我感到困惑。

那么在这种情况下最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T16:02:09.797

您应该`self.connection.close`在您的`Device.close()`方法中调用，然后安排在您的程序中正确调用它，也许使用上下文管理器。

`__del__`永远不值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-30T00:49:11.697

```
from contextlib import contextmanager

@contextmanager
def connection():
    conn = Conn()
    try:
        yield conn
    finally:
        conn.close()

class Conn(object):
    def close(self):
        print('Closing')

class Device(object):
    def __init__(self, conn):
        self.conn = Conn()

with connection() as conn:
    d = Device(conn) 
```

# javascript - Javascript小游戏

> ID：14183790
> 
> 赞同：2
> 
> 时间：2013-01-06T15:50:29.127
> 
> 标签：javascript, html

现在我正在学习一些 Javascript，但由于我的技能很低，现在遇到了很多问题。我需要一些帮助来解决这段代码中的几个问题。

我正在尝试编写一个名为“打鱼”的游戏。它有一个计时器，得分和点击。Onlclick鱼应该消失，分数将增加1分。计时器限制为 60 秒。

这是整个代码。

```
<html>  
<head>  
    <title>  
        Hit the fish!
    </title>  
    <style>
        table{
            margin-left: auto;
            margin-right: auto;
            width: 70%;
            height: 90%;
            background-color:#66ff00;
        }
        #playground input{
            position: inherit;
            height: 100px;
            width: 100px;
            margin-left: 20px;
            margin-right: 20px;
            margin-bottom: 20px;
        }
        #input {
            height:40px;
        }
        #area {
            background-color:#888;
            position:absolute;
            left:0px;
            right:0px;
            top:50px;
            bottom:0px;
        }
        #area button {
            width:150px;
            height:30px;
            position:absolute;
        }
        .red {
            color:red;
        }

    </style>

    <script language="Javascript">
        function one () {
            document.play.one.value="";
            // get the counter element
            var score = document.getElementById("score");
            // get it's value
            var value = parseInt(score.innerHTML);
            // increase it
            value = value + 1;
            // write the new value back
            score.innerHTML=value;
        }

        function two () {
            document.play.two.value="";
            // get the counter element
            var score = document.getElementById("score");
            // get it's value
            var value = parseInt(score.innerHTML);
            // increase it
            value = value + 1;
            // write the new value back
            score.innerHTML=value;
        }

        function three () {
            document.play.three.value="";
            // get the counter element
            var score = document.getElementById("score");
            // get it's value
            var value = parseInt(score.innerHTML);
            // increase it
            value = value + 1;
            // write the new value back
            score.innerHTML=value;
        }

        function four () {
            document.play.four.value="";
            // get the counter element
            var score = document.getElementById("score");
            // get it's value
            var value = parseInt(score.innerHTML);
            // increase it
            value = value + 1;
            // write the new value back
            score.innerHTML=value;
        }

        function five () {
            document.play.five.value="";
            // get the counter element
            var score = document.getElementById("score");
            // get it's value
            var value = parseInt(score.innerHTML);
            // increase it
            value = value + 1;
            // write the new value back
            score.innerHTML=value;

        }

        function six () {
            document.play.six.value="";
            // get the counter element
            var score = document.getElementById("score");
            // get it's value
            var value = parseInt(score.innerHTML);
            // increase it
            value = value + 1;
            // write the new value back
            score.innerHTML=value;
        }

        function seven () {
            document.play.seven.value="";
            // get the counter element
            var score = document.getElementById("score");
            // get it's value
            var value = parseInt(score.innerHTML);
            // increase it
            value = value + 1;
            // write the new value back
            score.innerHTML=value;
        }

        function eight () {
            document.play.eight.value="";
            // get the counter element
            var score = document.getElementById("score");
            // get it's value
            var value = parseInt(score.innerHTML);
            // increase it
            value = value + 1;
            // write the new value back
            score.innerHTML=value;
        }

        function nine () {
            document.play.nine.value="";
            // get the counter element
            var score = document.getElementById("score");
            // get it's value
            var value = parseInt(score.innerHTML);
            // increase it
            value = value + 1;
            // write the new value back
            score.innerHTML=value;
        }

        function count()
        {         
            stop();
            // get the counter element
            var counter = document.getElementById("counter");
            // get it's value
            var value = parseInt(counter.innerHTML);
            // increase it
            value = value + 1;
            // write the new value back
            counter.innerHTML=value;
            // limitation
            if(value===60){
                alert("Time Out!");
                clearInterval(countTimer);
                document.getElementById("counter").innerHTML="0";
                document.getElementById("score").innerHTML="0";
            }
        }

        function start () {
            stop();
            var countTimer = setInterval("count()",1000);
            document.play.four.value=">(  °3°)";
            document.play.three.value=">(  °3°)"; 
            setTimeout("nextone ()");
            var score = document.getElementById("score");
        }
        function score(){
            // get the counter element
            var score = document.getElementById("score");
            // get it's value
            var value = parseInt(score.innerHTML);
            // increase it
            value = value + 1;
            // write the new value back
            score.innerHTML=value;
        }
        function nextone () {
            document.play.four.value="";
            document.play.five.value=">(  °3°)"; 

            setTimeout("nexttwo ()",400);
        }

        function nexttwo () {
            document.play.three.value=""; 
            setTimeout("nextthree()",400);
        }

        function nextthree () {
            document.play.seven.value=">(  °3°)";
            document.play.one.value=">(  °3°)";
            document.play.six.value=">(  °3°)"; 
            setTimeout("nextfour ()",700);
        }

        function nextfour () {
            document.play.one.value="";
            document.play.six.value="";
            document.play.two.value=">(  °3°)"; 
            setTimeout("nextfive ()",700);
        }

        function nextfive () {
            document.play.seven.value="";
            document.play.two.value="";
            document.play.four.value=">(  °3°)"; 
            setTimeout("nextsix ()",800);
        }

        function nextsix () {
            document.play.eight.value=">(  °3°)";
            document.play.two.value=">(  °3°)"; 
            setTimeout("nextseven ()",700);
        }

        function nextseven () {
            document.play.eight.value="";
            document.play.five.value=">(  °3°)"; 
            setTimeout("nexteight ()",400);
        }

        function nexteight () {
            document.play.nine.value=">(  °3°)"
            document.play.four.value=">(  °3°)"; 
            setTimeout("nextnine ()",500);
        }

        function nextnine () {
            document.play.five.value="";
            document.play.four.value="";
            document.play.one.value=">(  °3°)"; 
            setTimeout("nextten ()",200);
        }

        function nextten () {
            document.play.three.value=">(  °3°)";
            document.play.six.value=">(  °3°)"; 
            setTimeout("nexteleven ()",600);
        }

        function nexteleven () {
            document.play.one.value="";
            document.play.seven.value=">(  °3°)"; 
            setTimeout("nexttwelve ()",500);
        }

        function nexttwelve () {
            document.play.two.value=">(  °3°)";
            document.play.nine.value=">(  °3°)"; 
            setTimeout("nextthirteen ()",700);
        }

        function nextthirteen () {
            document.play.one.value=">(  °3°)";
            document.play.nine.value="";
            document.play.seven.value=""; 
            setTimeout("start ()",600);
        }

        function stop () {
            clearInterval(countTimer);
            document.play.one.value="";
            document.play.two.value="";
            document.play.three.value="";
            document.play.four.value="";
            document.play.five.value="";
            document.play.six.value="";
            document.play.seven.value="";
            document.play.eight.value="";
            document.play.nine.value="";
        }
        function reset()
        {
            document.getElementById("counter").innerHTML="0";
            document.getElementById("score").innerHTML="0";
        }

        // get the counter element
        var score = document.getElementById("score");
        // get it's value
        var value = parseInt(score.innerHTML);
        // increase it
        value = value + 1;
        // write the new value back
        score.innerHTML=value;

    </script> 
</head>  

<body>
    <div id="input">
        <button onclick="start()">start</button>
        <button onclick="stop()">stop</button>
        <button onclick="reset()">reset</button>
        <div style="font-size:10em" id="counter">0</div><br>
        <p>Your score:</p><div style="font-size:5em" id="score">0</div>
        <script>
            var countTimer = setInterval('count()',1000);
        </script>
    </div>
    <div id="playground">
        <table border=100 cellpadding=0 cellspacing=0>
            <tr>
                <td>
                    <form name="play">
                        <center>  
                            <INPUT TYPE="button" NAME="one" OnClick="one ()" id="one" value="      ">  
                            <INPUT TYPE="button" NAME="two" OnClick="two ()" id="two" value="      ">  
                            <INPUT TYPE="button" NAME="three" OnClick="three ()" id="three" value="      ">
                            <br>  
                            <INPUT TYPE="button" NAME="four" OnClick="four ()" id="four" value="      ">  
                            <INPUT TYPE="button" NAME="five" OnClick="five ()" id="five" value="      ">  
                            <INPUT TYPE="button" NAME="six" OnClick="six ()" id="six" value="      ">
                            <br>  
                            <INPUT TYPE="button" NAME="seven" OnClick="seven ()" id="seven" value="      ">  
                            <INPUT TYPE="button" NAME="eight" OnClick="eight ()" id="eight" value="      ">  
                            <INPUT TYPE="button" NAME="nine" OnClick="nine ()" id="ten" value="      ">
                            <br>
                            </td>
                            </tr>
                            </table>  
                            </div>
                            </body>  
                            </html> 
```

问题是计数器在 20 - 30 后速度过快，点击按钮后鱼并没有消失，分数上也没有加分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:43:10.583

没有特别的顺序...

(1) 计数器的问题在于您调用它的方式以及存储`countTimer`变量的位置。因为您希望多个函数能够访问`countTimer`，所以您应该以它们都可以访问它的方式声明它；最简单的方法是让它成为一个全局变量，你可以这样做

```
var countTimer; 
```

在脚本的顶部，而*不是*`var`在引用其他地方时使用`countTimer`。您`start`从 function 调用该函数`nextThirteen`，然后 start 再次设置计时器。这实际上是在旧计时器之上设置了一个新计时器，这就是计数似乎加快的原因。

(2) 您的 html 也是无效的，这可能会导致一些问题；确保关闭`form`and`center`标签。（无论如何，您[不应该再使用该`center`标签）。](http://jsfiddle.net/6daVU/)

(3) 您的代码在`head`页面加载之前，但大部分代码会立即运行。所以下面一行：

```
var score = document.getElementById("score"); 
```

（在任何函数之外）由于尚未写入元素分数而导致错误。避免这种情况的最简单方法是将脚本放在页面正文的末尾。

(4) 函数`one`, `two`,`three`需要与表单中的输入具有不同的名称。这就是为什么所有按钮都不起作用的原因。

了解更多信息时的一些一般要点：

*   避免重复。不需要所有的一、二、三函数等。您可以使用循环或单个事件处理程序来找出按下了哪个按钮。
*   使用浏览器的控制台检查正在产生的错误。您的代码导致错误*object is not a function*，[搜索这](https://stackoverflow.com/questions/5959045/typeerror-object-is-not-a-function)就是我发现按钮不起作用的原因。
*   阅读有关[变量范围的信息](https://stackoverflow.com/questions/500431/javascript-variable-scope)

# c# - 从 Dynamics CRM 2011 插件调用 System.Diagnostics.Trace

> ID：14183791
> 
> 赞同：7
> 
> 时间：2013-01-06T15:50:31.530
> 
> 标签：c#, asp.net, iis-7, dynamics-crm-2011, system.diagnostics

想知道你们中是否有人对我遇到的以下问题有任何想法。

这是一些超级简单的插件代码。

```
namespace Demo.DebugTraceBlog
{
    public class TraceAndDebugDemo : IPlugin
    {
        public void Execute(IServiceProvider serviceProvider)
        {
            Trace.WriteLine("Started Plugin");    
            Trace.WriteLine("Plugin Working");    
            Trace.WriteLine("Ending Plugin");                
        }
    }
} 
```

我正在使用 DebugView (http://goo.gl/YRfus) 查看正在写入的 Trace 消息。当我将此代码作为在沙箱中运行的插件执行时，我得到了我期望的结果：DebugView 中出现三行，如果我将 VS 附加到沙箱工作进程，我会看到三行写入输出窗口。现在，当我将隔离模式更改为无，并让它在 W3WP.EXE 进程中运行时，我没有得到任何输出到 DebugView，当我附加到 W3WP.EXE 时，我可以设置一个断点来验证它是否正在运行，但我没有获取输出窗口的任何输出。

知道为什么会发生这种情况，以及我如何才能覆盖原因并强制非沙箱执行按预期工作。我可以猜测它与在 CRM IIS 进程内部运行有关，并且 CRM 正在抑制 Trace 写入——我专门使用 Trace 而不是 Debug 来试图避免这个问题，但没有运气。

我知道我可以使用 ITracingService 但这不符合我当前的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T07:55:58.957

（猜测）将此添加到您的配置文件中。如果它有效，那么您的问题是 .NET 跟踪在另一个应用程序域上时它的默认侦听器存在一些问题。

更改`D:\Log\MyApp\Program`为 ASP.NET 具有完全访问权限的路径。

```
...
<system.diagnostics>
<switches>
...
</switches>
<sources>
...
</sources>
<trace autoflush="true">
  <listeners>
    <clear />
    <add name="defaultListener" type="Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL"
         initializeData="FileLogWriter"
         Append="true"
         AutoFlush="true"
         BaseFileName="program"
         CustomLocation="D:\Log\MyApp\Program"
         DiskSpaceExhaustedBehavior="DiscardMessages"
         Encoding="Unicode"
         IncludeHostName="false"
         LogFileCreationSchedule="Daily"
         location="Custom"
         MaxFileSize="900000000000" />
    <add name="programConsoleListener" type="System.Diagnostics.ConsoleTraceListener" />
  </listeners>
</trace>
</system.diagnostics>
... 
```

# sql-server - 如何将二进制文件插入二进制 SQL 列？

> ID：14183792
> 
> 赞同：0
> 
> 时间：2013-01-06T15:50:34.237
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个 SQL Server 2008 数据库，其中包含一个包含`image`列的表。

知道如何编写查询以将 bin 文件插入图像字段吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:02:26.673

完全同意`marc_s`。

但是您的查询将是这样的。

```
INSERT yourtable(ImageColumn)
SELECT image FROM
OPENROWSET(BULK, 'filename.png', SINGLE_BLOB) AS blobtable(image) 
```

# mongodb - MongoDB 使用动态名称重命名集合

> ID：14183793
> 
> 赞同：0
> 
> 时间：2013-01-06T15:50:40.120
> 
> 标签：mongodb

我正在将大量数据写入临时集合，完成后我想重命名它，但我只有在运行时才有名称。

重命名命令为：

```
db.some_collection_temp.renameCollection('some_collection'); 
```

我不知道`some_collection`名字，我把它放在一个变量中，所以我这样做：

```
db[collName + '_temp'].renameCollection(collName); 
```

那行不通

错误：`TypeError: Cannot call method 'renameCollection' of undefined`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:13:53.053

在 MongoJS 中，您可以调用[`rename`](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#rename)集合：

```
db.collection(collName + '_temp').rename(collName, function (err, collection){
    ...
}); 
```

# javascript - 如何根据文本框的值更改边框颜色？使用 javascript

> ID：14183794
> 
> 赞同：1
> 
> 时间：2013-01-06T15:50:42.113
> 
> 标签：javascript

我有一个默认为红色边框的文本框。

聚焦时， (:focus) 边框变为绿色。

当文本框中有1个或多个字符时，边框变为蓝色（使用此js）

```
function CheckText()

{

    var elem = document.getElementById('sendto');

    if(elem)

      {      
      if(elem.value.length != 0)
      elem.style.borderColor = '#3366CC';
      }

} 
```

我遇到的问题是，如果我在盒子变成蓝色后从盒子中删除所有字符，它会保持蓝色并且不会变回红色。输入单元格后， :focus green 也不再起作用。

任何人都可以帮忙吗？

这是我的盒子的 HTML 代码：

```
<input id="sendto" name="sendto" type="text" class="sendsubempty" onBlur="CheckText()" value="<? 
  if(!$sendto){ 
  echo"";
  }else{
  echo"$sendto";
  }
  ?>" maxlength="50" /> 
```

信息：class-sendsubempty 有一个红色边框。

如果在 javascript 中更容易使用，我有单独的蓝色和绿色边框类。

请帮忙 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:01:30.437

这是实现此效果的更优雅的方法：

[http://jsfiddle.net/elias94xx/eqKqS/](http://jsfiddle.net/elias94xx/eqKqS/)

**HTML**

```
<textarea id="test"></textarea> 
```

**CSS**

```
#test { border-color: red; }
#test:focus { border-color: green !important; outline: none; } 
```

**JS**

```
document.getElementById("test").addEventListener("keydown", controlBorderColor, false);
document.getElementById("test").addEventListener("keyup", controlBorderColor, false);

function controlBorderColor() {
  if (this.value.length == 0) { this.style.borderColor = "red"; }
  else { this.style.borderColor = "blue"; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:05:36.240

我同意洛里斯的观点。但这并不完全正确。

```
function CheckText()

{

    var elem = document.getElementById('sendto');

    if(elem)
    {      
      if(elem.value.length === 0)
      {
        elem.style.borderColor="";
      }
      else{
        elem.style.borderColor="#3366CC";
      }
    }

} 
```

这是 jsbin：http: [//jsbin.com/welcome/70238/edit](http://jsbin.com/welcome/70238/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:55:27.763

函数 CheckText 应更改为：

```
 {      
      if(elem.value.length == 0)
      elem.style.borderColor = '#3366CC';
  } 
```

至：

```
 {
    if(elem.value.length){ elem.style.borderColor=""; }
    else{ elem.style.borderColor="#36c"; }
  } 
```

# android - 保存游戏存档的不同方法？

> ID：14183798
> 
> 赞同：0
> 
> 时间：2013-01-06T15:51:38.530
> 
> 标签：android

从我查找的内容来看，有多种保存文件的方法（在我的例子中是游戏文件）。我想知道在应用程序中保存最理想的是什么。将需要多个 (5+) 游戏保存。理想情况下，我希望将它们存储为文本文件。我可以使用共享偏好来做到这一点吗？或者我应该使用 SQLite 还是只使用内部存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:54:57.233

这取决于数据结构和要保存的数据量。
例如，如果您需要保存一些原始数据类型，如高分、当前级别，那么`SharedPreferences`应该没问题。

另一方面，如果您有大量数据，那么将它们保存在文件或数据库中可能会更合适。

# c - 当我尝试声明指针并通过 malloc 获取它时，gcc 期望表达式

> ID：14183801
> 
> 赞同：-1
> 
> 时间：2013-01-06T15:52:04.347
> 
> 标签：c, pointers, gcc, malloc

./drzwoposzukiwanbinarnych.c:84:24: 错误: â)â 标记之前的预期表达式

```
char getNewSlowo(){
    slowa *wyraz = (wyraz*) malloc(sizeof(slowa)); //LINE WITH ERROR
    scanf("%s",wyraz->slowo);
    return wyraz->slowo;
} 
```

我想做什么？

所以，我有一个结构：

```
typedef struct node{
char *word;
unsigned int arity;
struct node *left,*right,*parent;
}baza; 
```

我想让那个指针字指向-下面定义的char slowo[30]。

```
typedef struct word{
    char slowo[30];
}slowa; 
```

我坚持的一点是这个问题顶部的错误。我对编码感到非常厌倦，现在我的头脑完全过热，所以我的问题可能没有很好地形成，如果是这种情况，我很抱歉。

但为什么我要这样做呢？我在将全局定义的单词分配给指针时遇到问题，我注意到当我将一个新单词读入该全局定义的单词时，结构（指针）中的单词也发生了变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:53:12.800

只需移除演员表`(wyraz*)`，一切都会好起来的。如果您坚持保留它（尽管它是不必要的并且通常被认为是有害的），则应该保留它`(slowa *)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:56:48.600

这：

```
slowa *wyraz = (wyraz*) malloc(sizeof(slowa)); 
```

有不匹配的指针。最好这样写：

```
slowa *my_slowa = malloc(sizeof *my_slowa); 
```

这[消除了无意义的强制](https://stackoverflow.com/a/605858/28169)转换，并使用`sizeof`运算符确保分配的字节数与指针的类型相匹配。

在我看来，像这样的代码是一个很好的论据，因为它永远不会有这个演员表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:57:37.647

**类型转换称为类型**转换而不是**变量名**转换是有原因的。您要做的是将刚刚声明的变量的名称用作类型名称，这当然没有意义。如果您打算丢弃 的返回值`malloc()`，则应使用类型，而不是变量名：

```
slowa *wyraz = (slowa *)malloc(sizeof(slowa)); 
```

但是，在 C 中，[**您不应该强制转换 malloc 的返回值。**](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)`sizeof(*ThePointer)`此外，如果您使用它而不是`sizeof(TheType)`仅在类型发生变化的情况下使用它会更不容易出错。总而言之，写这个：

```
slowa *wyraz = malloc(sizeof(*wyraz)); 
```

# python - raise StopIteration 和生成器中的 return 语句有什么区别？

> ID：14183803
> 
> 赞同：45
> 
> 时间：2013-01-06T15:52:10.850
> 
> 标签：python, generator, stopiteration

我很好奇生成器中使用`raise StopIteration`和`return`语句之间的区别。

例如，这两个功能之间有什么区别吗？

```
def my_generator0(n):
    for i in range(n):
        yield i
        if i >= 5:
            return

def my_generator1(n):
    for i in range(n):
        yield i
        if i >= 5:
            raise StopIteration 
```

我猜测更“pythonic”的方式是第二种方式（如果我错了，请纠正我），但据我所知，两种方式都会引发`StopIteration`异常。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-06T15:56:44.023

没有必要明确地 raise `StopIteration`，因为这是一个简单的`return`语句对生成器函数所做的 - 所以是的，它们是相同的。但不，只是使用`return`更 Pythonic。

来自：[http](http://docs.python.org/2/reference/simple_stmts.html#the-return-statement) ://docs.python.org/2/reference/simple_stmts.html#the-return-statement （对 Python 3.2 有效）

> 在生成器函数中，return 语句不允许包含 expression_list。在这种情况下，一个简单的返回表示生成器已经完成，并将导致 StopIteration 被引发。

或者正如@Bakuriu 指出的那样——Python 3.3 的生成器语义略有变化，因此以下更合适：

> 在生成器函数中，return 语句指示生成器已完成并将引发 StopIteration。返回的值（如果有）用作构造 StopIteration 的参数并成为 StopIteration.value 属性。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-05-13T14:23:40.743

截至 2014 年底`return`是正确的，并且`raise StopIteration`对于终止发电机是在折旧计划中。详情请参阅[PEP 479](https://www.python.org/dev/peps/pep-0479/)。

> # 抽象的
> 
> 此 PEP 建议对生成器进行更改：当`StopIteration`在生成器中引发时，将其替换为`RuntimeError`. （更准确地说，这发生在异常即将从生成器的堆栈帧中冒出时。）因为更改是向后不兼容的，所以该功能最初是使用`__future__`语句引入的。
> 
> # 验收
> 
> 该 PEP 于 11 月 22 日被 BDFL 接受……</p>
> 
> # 基本原理
> 
> 生成器和 StopIteration 的交互目前有点令人惊讶，并且可以隐藏晦涩的错误。意外的异常不应导致行为的细微改变，而应引起嘈杂且易于调试的回溯。目前，在生成器函数中意外引发的 StopIteration 将被驱动生成器的循环构造解释为迭代的结束。
> 
> …</p>

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-06T16:00:16.687

没错，它们是等价的，除了一个是可读的而另一个是晦涩的。这可以追溯到生成器的第一个版本（PEP 255，在“规范：返回”下），随后的增强（例如协程）并没有改变这一点。3.3 `yield from`(PEP 380) 将其扩展`return <expr>`为 的语法糖`raise StopIteration(<expr>)`，但这并没有改变 . 的含义`return;`。

# windows-phone - 如何永久更改 Windows Phone 上的用户代理？

> ID：14183805
> 
> 赞同：4
> 
> 时间：2013-01-06T15:52:12.070
> 
> 标签：windows-phone, user-agent

我想更改我的网络浏览器控件的用户代理。我可以做这个：

```
webbrowserTest.Navigate(new Uri("http://mywebsite.com"), null, "User-Agent: myuseragent"); 
```

问题是用户代理只对一个请求有效，对子请求或重定向无效。如何永久更改此用户代理？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-07T15:34:23.900

因为它是密封类，所以我认为没有某种方法可以拦截 HttpRequest 的创建，我通常会避免这种想法，因为您以后可以有其他请求，不需要 UserAgent/其他标头。这里最简单的事情可能是在单独的静态类中创建扩展方法，例如：

```
public static class WebBrowserExtensions
{
    public static void NavigateWithUserAgent(this WebBrowser webBrowser, Uri uri)
    {
        webBrowser.Navigate(uri, null, "User-Agent: myuseragent");
    }
} 
```

然后只需调用：

```
new WebBrowser().NavigateWithUserAgent(new Uri("http://mywebsite.com")); 
```

希望这可以帮助。

# javascript - 垂直菜单 css3

> ID：14183806
> 
> 赞同：1
> 
> 时间：2013-01-06T15:52:14.613
> 
> 标签：javascript, html, css, menu

我坚持使用子菜单创建垂直菜单：

```
<ul>
    <li>Home</li>
    <li>Pages
        <ul>
            <li>Subpage</li>
            <li>Subpage 2</li>
        </ul>
    </li>
    <li>Contact</li>
</ul> 
```

单击“页面”菜单应类似于以下内容：

![在此处输入图像描述](../Images/4a820f5b503bb741edcb30c2bb8c0b00.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:07:51.830

基本机制可以这样实现：

```
ul li ul {
  display: none;
  margin-left: 20px;
}

li:hover ul {
  display: block;
} 
```

jsFiddle：http: [//jsfiddle.net/elias94xx/sCXus/](http://jsfiddle.net/elias94xx/sCXus/)

* * *

如果不使用图像，要在上面的图像中实现效果有点棘手，但我得到了一个不错的示例：

![css 菜单树](../Images/3c306db3316cb5493485a1dce7249397.png)

jsFiddle：http: [//jsfiddle.net/elias94xx/sCXus/5/](http://jsfiddle.net/elias94xx/sCXus/5/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-06T16:16:41.570

尝试这个

1.  使用这个 CSS：

    ```
    ul{
        list-style:none;
    }
    ul li ul{
        list-style:none;
        display:none;
    } 
    ```

2.  应用 jQuery 库和这个函数：

    ```
    $(document).ready(function(){
        $("ul li").click(function(){
            $(this).children('ul').show();
        });
    }); 
    ```

# jquery - 使用 jQuery getJSON 添加到 JSON 文件

> ID：14183807
> 
> 赞同：0
> 
> 时间：2013-01-06T15:52:20.160
> 
> 标签：jquery, json

目前我有一个 HTML 文件：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>JSON Sample</title>
</head>
<body>
    <div id="placeholder"></div>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script>
  $.getJSON('data.json', { "firstName":"Matt", "lastName":"Jam", "joined": { "month":"July", "day":12, "year":2012 },  function(data) {
        var output="<ul>";
        for (var i in data.users) {
            output+="<li>" + data.users[i].firstName + " " + data.users[i].lastName + "--" + data.users[i].joined.month+"</li>";
        }

        output+="</ul>";
        document.getElementById("placeholder").innerHTML=output;
  });
    </script>
</body>
</html> 
```

和一个 data.json 文件：

```
{"users":[
        {
            "firstName":"Ray",
            "lastName":"Villalobos",
            "joined": {
                "month":"January",
                "day":12,
                "year":2012
            }
        },
        {
            "firstName":"John",
            "lastName":"Jones",
            "joined": {
                "month":"April",
                "day":28,
                "year":2010
            }
        }
]} 
```

我的问题是 - 我必须向 JSON 文件添加什么才能返回我通过 jquery getJSON 函数传递的信息？( `"firstName":"Matt", "lastName":"Jam", "joined": { "month":"July", "day":12, "year":2012 },`)

# c# - 编辑包含 lambda 表达式的方法后如何继续调试？

> ID：14183810
> 
> 赞同：7
> 
> 时间：2013-01-06T15:52:41.040
> 
> 标签：c#, debugging, lambda

通常，当某个方法在其中某处包含 lambda 表达式时，如果您编辑该方法，Visual Studio 会说：

> 修改包含 lambda 表达式的“方法”将阻止调试会话在启用编辑并继续时继续。

有没有办法避免这个错误？

就我而言，我有一个类，其构造函数接受`Action`.

```
Button(Texture2D t2d, Vector2 v2, Action onPress)
...
Button b = new Button(t2d, new Vector2(40, 60), () => { MainStatic.t = t; }); 
```

关于此问题的其他信息：

*   [http://blogs.msdn.com/b/visualstudioalm/archive/2014/11/12/support-for-debugging-lambda-expressions-with-visual-studio-2015.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2014/11/12/support-for-debugging-lambda-expressions-with-visual-studio-2015.aspx)
*   [http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/4079440-edit-continue-allow-the-modification-of-lambdas](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/4079440-edit-continue-allow-the-modification-of-lambdas)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-06T18:09:52.477

更新：在用户多次请求此功能后，Visual Studio 2015 中添加了所需功能。这个答案和问题现在已经过时了。

* * *

> 有没有办法避免这个错误？

是的。从方法中删除 lambda。或者，不要编辑方法。

> 有没有办法在不从方法中删除 lambda 并仍然编辑方法的情况下避免此错误？

不**，错误信息不是在骗你。**

如果你好奇的话，这样做的原因是因为 lambda 被编译为嵌套类的方法，而 lambda 封闭的局部变量成为该类的字段。编辑并继续功能会在您编辑当前方法时即时重写它，但即使是简单的编辑也会导致对这些嵌套类进行复杂的更改。调试器团队没有花费大量精力让 E&C 为这种场景工作，从而从其他更有价值的功能中窃取资源，而是简单地将其定为非法。

# mysql - MySQL：如何将列别名与特定的 JOIN 子句相关联

> ID：14183817
> 
> 赞同：3
> 
> 时间：2013-01-06T15:53:08.450
> 
> 标签：mysql, sql, join, left-join

我的查询使用几个`LEFT JOIN`s 从多个表中提取结果。它目前工作正常。但是，我现在必须从同一个表列中获取两个不同的字段（但匹配不同的条件）。我不知道如何确保从正确的 LEFT JOIN 中分配了正确的列别名。有道理？

因此，例如...

```
SELECT table1.user_id, table2.value AS school, table2.value AS language  FROM table1  
LEFT JOIN table2 ON table2.user_id = table1.user_id AND table2.key = 'school'
LEFT JOIN table2 ON table2.user_id = table1.user_id AND table2.key = 'language' 
```

我需要具有相应的列别名`JOIN`。我该怎么做呢？

作为参考，这是我的原始查询（没有辅助 JOIN）：

```
SELECT wsat_ib.user_id, wpjb_resume.id resume_id, wpjb_resume.firstname, wpjb_resume.lastname, 
     wsat_ib.overall_score, wsat_ib.account_score, wsat_ib.econ_score, wsat_ib.math_score,
     wsat_ib.logic_score, wsat_ib.fsanaly_score, wsat_ib.corpval_score, wsat_ib.end_time, 
     GROUP_CONCAT(DISTINCT wp_usermeta.meta_value) AS target_employers, wpjb_field_value.value AS school, 
     GROUP_CONCAT(wpjb_application.job_id) AS applications FROM  `wsat_ib` 
    LEFT JOIN wp_usermeta ON wsat_ib.user_id = wp_usermeta.user_id
    LEFT JOIN wpjb_resume ON wsat_ib.user_id = wpjb_resume.user_id
    LEFT JOIN wpjb_field_value ON wpjb_resume.id=wpjb_field_value.job_id AND wpjb_field_value.field_id=3
    LEFT JOIN wpjb_application ON wpjb_application.user_id = wsat_ib.user_id 
    WHERE (wp_usermeta.meta_key = 'target_employer' AND (wp_usermeta.meta_value = 'public' OR wp_usermeta.meta_value=1523) AND wpjb_resume.is_active =1) AND (wpjb_resume.firstname='Xu' OR wpjb_resume.lastname='Xu') 
    GROUP BY wsat_ib.user_id, resume_id, wpjb_resume.firstname, wpjb_resume.lastname, wsat_ib.overall_score, wsat_ib.account_score, wsat_ib.econ_score, wsat_ib.math_score, wsat_ib.logic_score, wsat_ib.fsanaly_score, wsat_ib.corpval_score, wsat_ib.end_time, wpjb_field_value.value
     ORDER BY overall_score DESC LIMIT 0, 20; 
```

这是我实施以下解决方案的早期尝试。我已将 JOIN 添加`AS school`到 JOIN 子句中，但尚未为该表添加第二个 JOIN。出于某种原因，此版本不返回任何结果。

```
SELECT wsat_ib.user_id, wpjb_resume.id resume_id, wpjb_resume.firstname, wpjb_resume.lastname, 
 wsat_ib.overall_score, wsat_ib.account_score, wsat_ib.econ_score, wsat_ib.math_score,
 wsat_ib.logic_score, wsat_ib.fsanaly_score, wsat_ib.corpval_score, wsat_ib.end_time, 
 GROUP_CONCAT(DISTINCT wp_usermeta.meta_value) AS target_employers, wpjb_field_value.value AS school, 
 GROUP_CONCAT(wpjb_application.job_id) AS applications FROM  `wsat_ib` 
LEFT JOIN wp_usermeta ON wsat_ib.user_id = wp_usermeta.user_id
LEFT JOIN wpjb_resume ON wsat_ib.user_id = wpjb_resume.user_id
LEFT JOIN wpjb_field_value AS school ON wpjb_resume.id=wpjb_field_value.job_id AND wpjb_field_value.field_id=3
LEFT JOIN wpjb_application ON wpjb_application.user_id = wsat_ib.user_id 
WHERE (wp_usermeta.meta_key = 'target_employer' AND (wp_usermeta.meta_value = 'public' OR wp_usermeta.meta_value=1523) AND wpjb_resume.is_active =1) AND (wpjb_resume.firstname='Xu' OR wpjb_resume.lastname='Xu') 
GROUP BY wsat_ib.user_id, resume_id, wpjb_resume.firstname, wpjb_resume.lastname, wsat_ib.overall_score, wsat_ib.account_score, wsat_ib.econ_score, wsat_ib.math_score, wsat_ib.logic_score, wsat_ib.fsanaly_score, wsat_ib.corpval_score, wsat_ib.end_time, wpjb_field_value.value
 ORDER BY overall_score DESC LIMIT 0, 20; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T15:56:36.303

```
LEFT JOIN table2 as t2 ON t2.id = ...
                ^^^^^^^ 
```

`as`可以省略，如：

```
LEFT JOIN table2 t2 ON t2.id = ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T16:38:10.717

您还需要给表起别名，而不仅仅是列。

```
SELECT table1.user_id, schools.value AS school, languages.value AS language
FROM table1  
LEFT JOIN table2 AS schools ON schools.user_id = table1.user_id
    AND schools.key = 'school'
LEFT JOIN table2 AS languages ON languages.user_id = table1.user_id
    AND languages.key = 'language' 
```

如果一个表在查询中出现多次，您可以将每种外观类型视为一个实例。您需要命名表的每个实例以消除歧义。

# javascript - 为什么我的 jQuery 函数会触发两次？

> ID：14183819
> 
> 赞同：4
> 
> 时间：2013-01-06T15:53:28.930
> 
> 标签：javascript, jquery, html

所以我正在尝试创建一个小型个人使用的 jQuery 插件。我已经完成了函数，但是 setInterval() 函数由于某种原因触发了两次，我似乎不知道为什么。起初它似乎没有触发两次，但我通过测试（在间隔的每个触发器上添加一个警报）知道它触发了两次，在[这里](http://dans.comuv.com/tests.php)的例子中你可以看到它逐渐变得越来越快（大约 2分钟它会非常快）这是它发射两次的结果。

有人可以帮我解决这个问题吗？

Javascript代码：

```
(function( $ ) {

  $.fn.imageSwap = function(img) {
  var src = this.attr("src");
  var id = this;
  id.fadeToggle("fast", function(){
  id.attr("src", img);
  id.fadeToggle("fast");
  });
  return this;
  };

 })( jQuery );

(function( $ ) {

  $.fn.slideShow = function(array, time) {
  var i = -1;
  var num = array.length;
  var id=this;

  var interval = setInterval(function(){
  i++
  if(i>(num)-1){i=0}
  id.imageSwap(array[i]);
  },time);

  }; 
```

页面代码：

```
<script>

$("#slideshow").slideShow([
"http://www.rta.nsw.gov.au/licensing/images/dkt_faqs/number1.gif",
"http://www.rta.nsw.gov.au/licensing/images/dkt_faqs/number2.gif",
"http://www.rta.nsw.gov.au/licensing/images/dkt_faqs/number3.gif",
"http://www.rta.nsw.gov.au/licensing/images/dkt_faqs/number4.gif"
], 1000);

</script>

<img id="slideshow" src=""/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:15:37.747

我在这里缩小了问题范围，并注意到它只在我切换标签时发生。所以，一些搜索揭示了一些事情。

按照设计，Chrome 似乎会叠加`setInterval`调用。因此，当您返回非活动选项卡时，它恰好连续运行它们。

您可以在 SO 中的其他相关问题中看到一些解决方法：

*   [使用 setInterval 时，如果我在 Chrome 中切换标签并返回，滑块会疯狂追赶](https://stackoverflow.com/q/6183463/417685)
*   [当 Chrome 中的选项卡处于非活动状态时，如何使 setInterval 也起作用？](https://stackoverflow.com/q/5927284/417685)

# html - 将 HTML5 应用程序包装成适用于 Windows/Linux/Mac 的可执行文件

> ID：14183825
> 
> 赞同：3
> 
> 时间：2013-01-06T15:54:18.167
> 
> 标签：html, cross-platform, executable

我正在构建一个 HTML5 移动应用程序，我将用一个简单的 Web 视图将它封装在一个 Android 和一个 iOS 应用程序中。但是，我有一些用户使用我当前的 Adob​​e Air 应用程序（现在不受支持），我想向他们提供我正在构建的这个新应用程序。

我听说 Adob​​e Air 的 webkit 实现相当陈旧且不稳定。

是否有任何好的工具可以将本地浏览器（最好是 webkit）和我的应用程序包装在一个可执行文件中以供跨平台（PC）使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:46:49.640

我刚刚看到这个[http://appjs.org/](http://appjs.org/)，我很高兴看到 Alex 的 TideSDK 听起来也很棒！

Adobe AIR 可以做你想做的事，但我不支持那个解决方案：它很慢而且不是真正的跨平台，因为如果我是对的，他们会放弃对 Linux 的支持。

如果有人碰巧测试了其他人，欢迎反馈！

题外话：此外，我选择不再信任 Adob​​e 的技术选择。我们已经在移动设备上等待 Flash 多年了，他们放弃了这个想法。多年来，我们一直在等待 Mac 和 Linux 上的优化，但没人在意。几个月前的新炒作期望编译成 HTML5，据我所知，这只是一些流行语和一些旧的粗略 alpha 版本。

**编辑**

AppJS 已移动[http://appjs.com/](http://appjs.com/)

**编辑**

node-webkit 似乎现在绝对是必看的！[https://github.com/rogerwang/node-webkit](https://github.com/rogerwang/node-webkit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T22:16:38.963

最近阅读了一篇关于这个 sdk 的文章：[http](http://www.tidesdk.org/) ://www.tidesdk.org/ 。我还没有使用它 - 所以不能说它是否值得尝试并做你想做的事。

# mysql - 比较日期mysql

> ID：14183826
> 
> 赞同：0
> 
> 时间：2013-01-06T15:54:24.280
> 
> 标签：mysql, string-comparison, date-comparison

我的 sql 查询有一点问题。

在数据库中，我有发票的到期日。

保存为字符串 12-01-2013

现在我想将此日期与今天进行比较。但不工作。

这是解码。

include_once('config/connect.php');

连接数据库（）；

```
$name = $_GET['name'];

$date = date('d-m-Y');

$qry = "SELECT *, finished_invoice.date AS invoice_date FROM finished_invoice
    INNER JOIN customer 
    ON finished_invoice.customer = customer.customer_nr 
        WHERE finished_invoice.user = '".$_SESSION['id']."' 
    AND customer.company_name = '$name'
    AND expiry_date < '$date'
    AND finished_invoice.sent > '0'
    AND finished_invoice.paid = '0'   
    ORDER BY finished_invoice.id DESC" 
```

如果有人可以帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:00:59.777

而不是比较日期对象使用 strtotime() 函数来比较为字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:43:49.580

您正在将 PHP 日期格式 dmy 与 mysql 格式 ymd 进行比较，这就是您遇到问题的原因。
尝试使用这个：

```
 SELECT *, finished_invoice.date AS invoice_date FROM finished_invoice
        INNER JOIN customer 
        ON finished_invoice.customer = customer.customer_nr 
            WHERE finished_invoice.user = '".$_SESSION['id']."' 
        AND customer.company_name = '$name'
        AND expiry_date < STR_TO_DATE($date, '%d-%m-%Y')
        AND finished_invoice.sent > '0'
        AND finished_invoice.paid = '0'   
        ORDER BY finished_invoice.id DESC 
```

# php - 将 PHP 变量保存到 mysql 数据库

> ID：14183827
> 
> 赞同：0
> 
> 时间：2013-01-06T15:54:24.673
> 
> 标签：php, mysql

我在将已存储到变量中的数据保存到 mysql 数据库中时遇到问题。我可以毫无问题地连接到数据库，但是当我运行代码时，我得到一个空白页，并且没有任何内容保存到数据库中。

这是我要存储到表“链接”和列“标题”中的变量

```
$title="breakingbad"; 
```

这是我的完整代码。

```
<?php
$host="yourhosthere";
$username="yourusername";
$password="yourpassword";
$database="your database";
mysql_connect($host,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");
$title="breakingbad";
$query = "INSERT INTO links (title) VALUES('$title')");
mysql_query($query);
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:57:45.147

在不知道您的数据库表是如何设置的情况下，我认为这行分号之前的额外括号会导致致命错误，并且您可能关闭了错误消息：

```
$query = "INSERT INTO links (title) VALUES('$title')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T15:57:34.510

空白页意味着您没有错误报告。这意味着您没有看到正确的错误消息。

添加：

```
error_reporting(E_ALL);
ini_set('display_errors', true); 
```

到您的页面顶部。这将向您显示正确的错误。

您还有一个 mysql_select_db 的 @infront，它也可以解决错误。删除它。

（也切换到 mysqli_ 函数/对象，而不是使用已弃用的 mysql_。

完成上述操作后，您可能能够解决您的问题。如果没有，请添加实际的错误消息。

# php - 使用 jquery ajax 到 php 的 javascript 对象

> ID：14183837
> 
> 赞同：1
> 
> 时间：2013-01-06T15:55:19.007
> 
> 标签：php, javascript, jquery, ajax, json

我有一个像这样创建的数组或 javascript 对象： `arr[arr.length]=obj` 其中 obj 是一个经典的 JSON 字符串，例如`{"id":1}`.

所以`arr`似乎是一个 JavaScript 对象数组。

我可以像这样访问它： `arr[1]`, `arr[2]`. 它甚至可以像`alert(arr[1].id);`

如果我这样做：警报（JSON.stringify（arr））；我得到以下信息：

```
[{"id":"2305","col":"1"},{"id":"2308","col":"1"},{"id":"2307","col":"1"},{"id":"2306","col":"1"}] 
```

鉴于警报（arr）；给了我类似的东西：

```
[object Object],[object Object],[object Object],[object Object],[object Object] 
```

现在我需要使用 jQuery 的 AJAX 方法将它传递给 PHP 脚本。但似乎它只能得到组合字符串，如：

`{"id":"2305","col":"1"}`或者`{"id":"2305","col":"1","id":"2305","col":"1"}`

但是 JSON.stringify 成功地解析了 arr 对象，我之前的字符串示例似乎是一个有效的 JSON 字符串。我该如何传递给 PHP，我真的应该将结构的整个格式更改为像最后一个示例一样吗？

UPD：我忘了提到如果发送'{}，{}，{}'字符串而不是'{}'字符串，PHP的POST数组为空。

UPD：我重写了生成字符串的代码。现在我有一个这样的字符串：

```
{"2305":"1","2306":"1"} 
```

如果我直接将它传递给 PHP，它就可以工作，如下所示：

```
 $.post({url: '../getItems2Cart.php', data:{"2305":"1","2306":"1"} ,
       success: function(response){alert(response);}
   }); 
```

如果我这样发送，php 返回空 POST 数组：

```
$.post({url: '../getItems2Cart.php', data: JSON.stringify(str),.
       success: function(response){alert(response);}
}); 
```

为了清楚起见，alert 现在返回一个正确的 JSON：

```
alert('json str to php '+JSON.stringify(str));
//json str to php {"2305":"1","2306":"1"} 
```

啊..是的，str是一个javascript对象，而不是字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T16:00:44.283

可以发送 JSON 并用于`json_decode()`将其转换为 php 数组。

```
$.post('server/path', { jsonData: JSON.stringify(arr)}, function(response){
   /* do something with response if needed*/
}); 
```

在 php 中：

```
$arr=json_decode( $_POST['jsonData'] );
/* return first ID as test*/
echo $arr[0]['id'];
/* or dump whole array as response to ajax:*/
print_r($arr); 
```

# jquery - 隐藏 div 并显示另一个并更改链接类 Jquery

> ID：14183838
> 
> 赞同：1
> 
> 时间：2013-01-06T15:55:20.537
> 
> 标签：jquery

我今天大部分时间都在研究，但没有找到太多，所以我想知道你们是否可以提供帮助。

我有两个链接，我想用它们来控制两个 div。我想要它，以便在单击链接时显示相应的 div 并激活该链接上的“链接活动”类。单击另一个链接时，我希望旧 div 淡出，而与新链接相关的新 div 淡入并重新应用“链接活动”类。

HTML：

```
<a href="#walking" id="walking" class="link-active"><p>Dog Walking</p></a>
<a href="#grooming" id="grooming"><p>Dog Grooming</p></a>

<div class="walk"></div>
<div class="groom"></div> 
```

我知道这可能不是最好的描述，所以这里有一个帮助我的小提琴。

小提琴：http: [//jsfiddle.net/swift29/LUkk4/1/](http://jsfiddle.net/swift29/LUkk4/1/)

提前喝彩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:06:20.543

在您的文档就绪事件中，添加以下代码以实现所描述的行为

```
$('#walking').click(function()
{
   $('.groom').fadeOut(100, function() 
   {
        $('.groom').removeClass('link-active');
        $('.walk').fadeIn(100, function()
        {   
            $('.walk').addClass('link-active');
        });
   });
   //prevent default click event
   return false;
}); 
```

将相同的事件添加到另一个 div，只需替换 .walk 和 .groom 类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:09:00.013

此解决方案使用一个简单的函数来处理淡入/淡出。它试图尽可能地消除代码重复。

**Javascript**

```
$("#walking").click(function(){
    swap(this, "walk", "groom");
});

$("#grooming").click(function(){
  swap(this, "groom", "walk");
});

function swap(obj, active, inactive){
  $("." + inactive).fadeOut(500, function(){
      $("." + active).fadeIn().addClass("link-active");
  });
  $("#walking, #grooming").removeClass("link-active");
  $(obj).addClass("link-active");
} 
```

工作示例：http: [//jsfiddle.net/LUkk4/6/](http://jsfiddle.net/LUkk4/6/)

# php - 使用 codeigniter 和 javascript 将加密参数从视图传递到控制器错误

> ID：14183843
> 
> 赞同：1
> 
> 时间：2013-01-06T15:55:53.327
> 
> 标签：php, jquery, codeigniter, encryption

我正在尝试使用codeigniter和jquery构建一个登录表单，当客户端提交表单时我试图做的是jquery在传递和参数**ENCRYPTED**`window.location`时更改调用验证函数`controllers``username``password`

 **这是我的代码

```
window.location.href = "/resturant/codeigniter/index.php/welcome/checklogin/" +
<?php $this->load->library('encrypt');
echo $this->encrypt->encode("$('#username').val()"); ?> +
"/" + $("#password").val(); 
```

此代码不起作用。

我的问题是，这就是我们加密参数并通过 url 传递它们的方式吗？

**更新**

以下代码工作正常：

```
window.location.href = "/resturant/codeigniter/index.php/welcome/checklogin/" +
<?php echo "$('#username').val()"; ?> + "/" + $("#password").val(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:09:07.803

您正在以一种完全不可能的方式混合 PHP 和 JavaScript。PHP*在服务器上*执行，内容被发送到浏览器，然后，很*长一段*时间后，JavaScript 在客户端机器上运行。两者不能以这种方式互动。为了让 PHP 和 JavaScript 完全交互，必须通过 HTTP 请求在客户端和服务器之间发送数据。

在更大的方案中，您不能使用 PHP 中的服务器端加密来加密 JavaScript 中的客户端。如果您希望从 JavaScript 安全地与服务器进行通信，则需要使用 SSL。

如果您只是试图将用户名/密码保留在 URL 之外，则应该使用`POST`请求而不是`GET`请求。无论如何，您都应该为登录用户执行此操作。

**回复：你的更新**

问题在于，*纯属意外*，您的第二个示例输出了有效的 JavaScript，*恰好*为您提供了所需的结果。

也就是说，在您的第二个示例中：

```
window.location.href = "/resturant/codeigniter/index.php/welcome/checklogin/" +
<?php echo "$('#username').val()"; ?> + "/" + $("#password").val(); 
```

PHP`echo`正在输出一个包含 的静态字符串`"$('#username').val()"`，*而不是*`#username`字段*中尚不存在*的值，因为我们在 PHP 中，此时甚至没有涉及浏览器。PHP 的输出将如下所示，巧合的是，它可以正常工作：

```
window.location.href = "/resturant/codeigniter/index.php/welcome/checklogin/" +
$('#username').val() + "/" + $("#password").val(); 
```

但是，您的第一个示例完全被破坏了。这一行：

```
echo $this->encrypt->encode("$('#username').val()"); 
```

正在输出文字字符串的加密形式`"$('#username').val()"`；结果将是垃圾和 JavaScript 解析错误。

你*不能*像这样混合 PHP 和 JavaScript。**

# android - Android 位置不准确

> ID：14183849
> 
> 赞同：2
> 
> 时间：2013-01-06T15:56:46.007
> 
> 标签：android, location

我正在尝试获取当前用户的位置。我试图重构我的代码以获得更好的结果，但我只是在准确性方面不断获得荒谬的位置，它在 900-600 米之间。

我怎样才能获得更好的结果，以使其达到 50m 以内的精度？

这是我的代码：

```
package com.agam.mapslocation;

import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MapsActivity extends Activity {

    private static final int ONE_MINUTE = 1000 * 60 * 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_maps);

        final LocationManager locationManager = (LocationManager) this
                .getSystemService(Context.LOCATION_SERVICE);

        final EditText et = (EditText) findViewById(R.id.editText1);

        // Define a listener that responds to location updates
        LocationListener locationListener = new LocationListener() {
            public void onLocationChanged(Location l) {
                // Called when a new location is found by the network location
                // provider.
                Location gps = locationManager
                        .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                Location net = locationManager
                        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

                Location bestLocation = null;
                bestLocation = isBetterLocation(gps, net);
                bestLocation = isBetterLocation(bestLocation, l);
                if(bestLocation!=null)
                    displayLocation(et, bestLocation);
            }

            public void onStatusChanged(String provider, int status,
                    Bundle extras) {

            }

            public void onProviderEnabled(String provider) {
                if (provider.equals(LocationManager.GPS_PROVIDER)) {
                    et.setText("GPS ON!");
                }
            }

            public void onProviderDisabled(String provider) {
            }
        };

        // Register the listener with the Location Manager to receive location
        // updates
        locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
                0, locationListener);
    }

    public static void displayLocation(View v, Location l) {
        ((EditText) v).setText(String.format(
                "Long:%s,\nLat:%s,\nAccu:%s,\nTime ago:%s,\nProvider:%s",
                l.getLongitude(), l.getLatitude(), l.getAccuracy(),
                new java.util.Date().getTime() - l.getTime(), l.getProvider()));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_maps, menu);
        return true;
    }

    /**
     * Determines whether one Location reading is better than the current
     * Location fix
     * 
     * @param location
     *            The new Location that you want to evaluate
     * @param currentBestLocation
     *            The current Location fix, to which you want to compare the new
     *            one
     */
    protected Location isBetterLocation(Location location,
            Location currentBestLocation) {
        if (currentBestLocation == null) {
            // A new location is always better than no location
            return location;
        }

        // Check whether the new location fix is newer or older
        long timeDelta = location.getTime() - currentBestLocation.getTime();
        boolean isSignificantlyNewer = timeDelta > ONE_MINUTE;
        boolean isSignificantlyOlder = timeDelta < -ONE_MINUTE;
        boolean isNewer = timeDelta > 0;

        // If it's been more than two minutes since the current location, use
        // the new location
        // because the user has likely moved
        if (isSignificantlyNewer) {
            return location;
            // If the new location is more than two minutes older, it must be
            // worse
        } else if (isSignificantlyOlder) {
            return currentBestLocation;
        }

        // Check whether the new location fix is more or less accurate
        int accuracyDelta = (int) (location.getAccuracy() - currentBestLocation
                .getAccuracy());
        boolean isLessAccurate = accuracyDelta > 0;
        boolean isMoreAccurate = accuracyDelta < 0;
        boolean isSignificantlyLessAccurate = accuracyDelta > 200;

        // Check if the old and new location are from the same provider
        boolean isFromSameProvider = isSameProvider(location.getProvider(),
                currentBestLocation.getProvider());

        // Determine location quality using a combination of timeliness and
        // accuracy
        if (isMoreAccurate) {
            return location;
        } else if (isNewer && !isLessAccurate) {
            return location;
        } else if (isNewer && !isSignificantlyLessAccurate
                && isFromSameProvider) {
            return location;
        }
        return currentBestLocation;
    }

    /** Checks whether two providers are the same */
    private boolean isSameProvider(String provider1, String provider2) {
        if (provider1 == null) {
            return provider2 == null;
        }
        return provider1.equals(provider2);
    }
} 
```

注意：我强调静态位置，例如不要移动，因为它可能有助于答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T00:27:41.600

要获得准确的位置，您需要考虑两个因素：

1.  代码，例如

    *   使用正确的位置提供商（GPS 与网络）
    *   在您的应用中拥有正确的权限
2.  装置

    *   拥有合适的传感器（并非所有 Android 设备都有 GPS、Wifi 或电话）
    *   启用适当的传感器（例如，用户没有关闭 GPS）
    *   安装正确的 Google 服务（制造商决定）

这些将在下面讨论。

**代码**

确保您已遵循[Android 开发人员](http://developer.android.com/training/basics/location/locationmanager.html#TaskPickLocationProvider)的指导（感谢[Bill Gary](https://stackoverflow.com/users/943199/bill-gary)）

但请记住，代码只有在设备本身具有必要的硬件和配置时才能工作 - 见下文。

**设备**

要了解您的位置修复出了什么问题，了解您的设备如何定位自己*确实很有帮助。*位置是通过几种技术获得的：

1.  GPS芯片组

    *   最准确
    *   慢的
    *   需要在窗外或靠近窗户
    *   需要开启 GPS 芯片组
2.  WiFi 上可见的 MAC（通过查询中央数据库，例如 Google 的）

    *   通常非常准确（10-100m，取决于存在的 WiFi 数量以及它们是否曾被见过）
    *   蛮快
    *   需要打开wifi
    *   需要连接到 Internet 的数据连接（不一定是 WiFi）
    *   需要在设备上安装谷歌服务（一些便宜的设备可能没有这个）
3.  您正在使用的手机信号塔的位置（网络提供商）

    *   精确到数百米到公里
    *   通常是即时的
    *   需要开启电话

当您要求定位修复（不包括最后一个缓存的定位）时，一个好的 GPS 定位提供商实际上不仅仅关注 GPS：

1.  如果启用了 GPS 芯片组，它将开始 GPS 跟踪

    *   10 秒后，只有在获得修复后，LocationProvider 才会返回 GPS 位置
    *   稍后，设备会将设备的 GPS 位置以及可见的 WiFi MAC/名称发送给 Google，Google 会将其整合到他们的 WiFi AP 数据库中
2.  如果启用了 WiFi，它将开始扫描 Wifi 环境

    *   几秒钟后，当 WiFi 扫描完成时，它会将结果发送到 Google 的服务器
    *   大约一秒钟后，服务器返回位置修复

通常您可以在 Google 地图上看到这些效果，例如：当您启动它时，您会看到网络提供商提供的一个大的近似位置（手机信号塔），几秒钟后它会放大一个更精确的区域（WiFi )，最后您可能会获得 GPS 定位。

它总是值得的：

*   使用正确/通用的方法来[选择 LocationProvider](http://developer.android.com/training/basics/location/locationmanager.html#TaskPickLocationProvider)（而不是硬编码）
*   检查相关硬件传感器是否存在并启用
*   检查 Google 地图是否按照您的预期定位您的设备（如果您的设备没有配备 Google 地图，那么您没有 Google 服务，并且可能您有一个非常基本的仅 GPS 提供商）。
*   如果您怀疑 GPS 芯片组，请使用 GPS 应用程序详细了解它的功能和功能，例如[https://play.google.com/store/apps/details?id=com.eclipsim.gpsstatus2&hl= zh](https://play.google.com/store/apps/details?id=com.eclipsim.gpsstatus2&hl=en)

**编辑**

从您获得的基本结果来看，您似乎只有来自网络提供商的结果。所以，做：

*   检查GPS是否开启，
*   您的 GPS 接收器是否可以修复（例如使用 GPS 应用程序进行调试）和
*   在您的代码中进行一些调试（可能通过 logcat），这样您就可以看到**为什么**isBetterLocation() 方法决定一个位置而不是另一个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T20:37:35.273

您应该尽快将 locationListeners 设置为所有可用的位置提供程序并等待。设置侦听器要求提供者立即向您提供他们拥有的所有数据（minTime=0，minDistance=0）。使用 getLastKnownLocation 作为第一个位置近似值。在此期间，您将开始从不同的提供商处获取一些位置数据。您应该手动选择最适合您的情况（我想是最精确的）。尽可能长时间地等待（等待的时间越长，您可能会获得更好的位置值）。等待时间结束后，请选择您获得的最佳位置并开始使用它。如果 System 能够为您提供更好的价值，您可以继续收听位置更新并改进位置估计。

# objective-c - 如何在给定对象的情况下访问 NSMutableArray

> ID：14183852
> 
> 赞同：0
> 
> 时间：2013-01-06T15:57:15.693
> 
> 标签：objective-c, nsmutablearray

如果给我一个我知道在 an 中的对象，我`NSMutableArray`如何访问`NSMutableArray`该对象以及该对象的索引`NSMutableArray`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:04:02.810

不是直接的。至少，您需要对对象可能位于的所有可能数组的引用。这样，您可以向每个数组询问 objectAtIndex:。如果返回值不是 NSNotFound，则该对象在数组中。

当然，这可能很慢，并且是糟糕设计的标志。

一种解决方案是从您的对象引用数组。这将起作用，但您需要确保循环引用不会导致泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:01:17.653

您可以在数组上使用函数 indexOfObject:(id)object 并将您的对象作为参数传递以接收索引。

例如，让你的数组是 NSMutableArray *array 并且对象是 id obj。然后， int index = [数组 indexObObject:obj];

# jquery - 如何使用 Jquery 获取文档中最重的元素？

> ID：14183855
> 
> 赞同：-2
> 
> 时间：2013-01-06T15:57:32.090
> 
> 标签：jquery

如何获取文档中哪个元素的权重最大或需要更多时间来加载？在这种情况下，它是图像..

```
<html>

<body>

<p>This is light text</p>
<p>This is the heavy text </p>
<img src="http://www.lorempixel.com/400/400" alt="100" width="100" height='100' />
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:02:23.103

不，因为 DOM 元素没有“权重”。我怀疑您在谈论*size*，如字节大小，但仍然没有，因为这不是 HTTP 的工作方式。整个*HTML*文档作为一个文件下载，因此没有任何`<p>`元素比任何其他`<p>`元素“更大”；它们是作为同一个 HTTP 请求的一部分同时下载的，并且都不需要“更多时间来加载”。

如果您想查看构成页面的*实际*单独资源，您的浏览器可能有一种为您分析它的方法。Chrome 的开发者工具有一个非常有用的网络标签。

# gwt - GWT RequestFactory 的 EntityProxy 安全性

> ID：14183858
> 
> 赞同：0
> 
> 时间：2013-01-06T15:57:34.900
> 
> 标签：gwt, requestfactory

这个问题涉及 GWT 的 RequestFactory。

如果我的服务器域中有一个用户对象，它有一个 getPassword() 方法。我创建了一个没有这个 getPassword() 方法的 UserProxy（扩展了 EntityProxy）。这会创建一个安全整体吗？因为服务器域的 User 对象有一个密码作为它的字段，如果恶意用户会更改一些 javascript 并以巧妙的方式询问密码，**那么恶意用户会找回密码吗？**在我看来，没有任何检查可以防止从客户端调用 getPassword() 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:15:15.933

（`RequestFactoryServlet`实际上是`SimpleRequestProcessor`它使用的，但这只不过是一个实现细节）使用您的接口来确定哪些属性是可访问的（get 或 set）以及哪些服务方法是可调用的，因此确实没有人可以做某事的**风险**您没有通过代理或上下文接口公开。

# c# - 调整 SharpDX 精灵的大小和位置

> ID：14183861
> 
> 赞同：0
> 
> 时间：2013-01-06T15:57:50.590
> 
> 标签：c#, directx, textures, direct3d, sharpdx

我正在尝试调整 DirectX 纹理的大小并将其放在窗口的右上角。我正在使用精灵绘制纹理，这是我的代码（我使用的是 SharpDX）：

```
albumArtSprite.Begin();
NativeMethods.RECT rect;
NativeMethods.GetClientRect(device.CreationParameters.HFocusWindow, out rect);
float targetDimensions = 150f;
var matrix = Matrix.Scaling(targetDimensions / albumArtInformation.Width, targetDimensions / albumArtInformation.Height, 0f) *
Matrix.Translation(rect.Width - albumArtInformation.Width - 10f, 10f, 0f);
albumArtSprite.Transform = matrix;
albumArtSprite.Draw(albumArtTexture, new ColorBGRA(0xFFFFFFFF));
albumArtSprite.End(); 
```

出于某种原因，我得到了非常奇怪的结果，例如图像不在我想要的位置，它位于窗口的右上角，X 和 Y 轴上的偏移量为 10。这是我第一次使用 DirectX，所以我不能 100% 确定这个矩阵的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:49:49.437

最后，我在绘制图像之前使用了 Bitmap 和 Graphics 类来调整图像大小。

```
private static byte[] ResizeAlbumArt(byte[] originalAlbumArtData)
{
    using (var originalStream = new MemoryStream(originalAlbumArtData))
    {
        var original = new Bitmap(originalStream);
        var target = new Bitmap(AlbumArtDimensions, AlbumArtDimensions);

        using (var g = Graphics.FromImage(target))
        {
            g.SmoothingMode = SmoothingMode.HighQuality;
            g.InterpolationMode = InterpolationMode.HighQualityBicubic;
            g.PixelOffsetMode = PixelOffsetMode.HighQuality;
            g.DrawImage(original, 0, 0, target.Width, target.Height);
        }

        using (var outputStream = new MemoryStream())
        {
            target.Save(outputStream, ImageFormat.Bmp);
            return outputStream.ToArray();
        }
    }
} 
```

# javascript - 多态constructor.name属性访问

> ID：14183862
> 
> 赞同：1
> 
> 时间：2013-01-06T15:57:52.527
> 
> 标签：javascript

给定 JavaScript 代码：

```
function Parent() { ... }
function Child() { ... }

Child.prototype = new Parent();

// toString implementation on the parent object
Parent.prototype.toString = function() {
  return this.constructor.name;
}

// And the code:
alert(new Child()); 
```

...当想要的结果是返回“Child”字符串时将输出“Parent”（`constructor.name`父`toString`实现内部应该返回子构造函数名称）。

这在 JavaScript 中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:03:11.793

您在代码结果中看到的不一致是由两个原因引起的。首先，如果您检查了 Child 原型对象，那么`Object.getPrototypeOf(Child)`您`function Empty(){}`应该使用原型链来纠正原型对象分配，`Child.__proto__ = new Parent()`而不是。`Child.prototype = new Parent();`其次是**原型链**的问题。如果你看到`Object.getPrototypeOf(Child)`新分配后的结果，你会得到`[object Object]`（*如果你还没有定义 Parent 原型 toString() 方法。如果你有，那么它返回 Parent(Child prototype) 原型 toString() 方法*）这意味着 Child在它的原型属性中有一个**对象**。那么你有三个选择：

1.将 toString() 方法分配给子对象本身：

```
Child.toString = function(){ return this.name } 
```

在这种情况下，您不应该使用`this.constructor.name`，因为在原型分配之后，它的构造函数已更改为**Parent**。

2.定义子原型(Parent) toString()方法：

```
Child.__proto__.toString = function(){ return this.name } 
```

3.define Child prototype->prototype(Object) toString()方法：（*覆盖*）

```
Parent.prototype.toString = function(){ return this.name } 
```

**一些观察：**

1.我`__proto__`一开始使用赋值的原因是我想访问对象的构造函数的原始原型属性并对其进行更改。

2.我之所以使用`return this.name`这些方法是因为这些方法将从Child调用，所以它引用了Child Object。

3.我`__proto__`在**选项2**和**选项3**`prototype`中使用的原因是我们在Object构造函数更改时使用，并且在Object构造函数没有更改时使用。**`__proto__``prototype`**

 **4.测试`toString()`你应该使用的方法，`alert(Child)`而不是`alert(new Child())`。

这是一篇对原型有很大帮助的文章：

[http://yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/](http://yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/)

这个答案的所有方面都使用 Chrome JS 控制台进行了测试。**

# c# - 我将如何在 C# 中解析 pdf

> ID：14183872
> 
> 赞同：0
> 
> 时间：2013-01-06T15:58:50.970
> 
> 标签：c#, parsing, pdf

我想解析一个 pdf 并在该 pdf 中添加一些标签，以便我可以将其上传到一些论坛。我在考虑可能使用 c#（或者可能是 python）并让它读取 pdf 并在需要时插入标签。我从哪里开始？到目前为止，我可以将 pdf 转换为文本文件。但从那里我很难过。这是我到目前为止所拥有的：

```
 /*
         * Convert PDF To Text
         * *******************/

    using System;
    using System.Collections.Generic;
    using System.Drawing;
    using System.Windows.Forms;
    using System.Drawing.Printing;
    using System.IO;
    using System.Text;
    using System.ComponentModel.Design;
    using System.ComponentModel;
    using org.pdfbox.pdmodel;
    using org.pdfbox.util;

    namespace Test.iPdfToText
    {
        public partial class MainForm : Form
        {
            public MainForm()
            {
                InitializeComponent(); 
            }

            void Button1Click(object sender, EventArgs e)    
            {    
                PDDocument doc = PDDocument.load("C:\\pdftoText\\myPdfTest.pdf");
                PDFTextStripper stripper = new PDFTextStripper();
                richTextBox1.Text=(stripper.getText(doc));
            }

         }
    } 
```

# jquery - 我可以对 jQuery Week Calendar 插件应用限制吗？

> ID：14183878
> 
> 赞同：1
> 
> 时间：2013-01-06T15:59:42.967
> 
> 标签：jquery, jquery-plugins, calendar

我使用[jQuery 周历来](https://github.com/robmonie/jquery-week-calendar/)处理健身房的预订。问题是健身房使用 45 分钟长度的时间框架。如果用户预订，他可以在 07:15 或 08:00 或 08:45 或 09:30 等开始。

有什么方法可以限制预订吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T10:50:50.307

这是我的[演示链接](http://www.dropbox.com/s/jam2i3vy9u6kooy/jquery.weekcalendar.rar)，我在其中更改了逻辑

```
 getTimeslotTimes : function(date) { } 
```

`jquery.weekcalendar.js`根据我的要求在文件中。

因此，您可以根据需要更改此功能（45 分钟）时间段。

# ember.js - 将内容设置为 RecordArray 会引发无法对不在 DOM 中的 Metamorph 执行操作

> ID：14183879
> 
> 赞同：1
> 
> 时间：2013-01-06T15:59:58.880
> 
> 标签：ember.js, ember-data

我有一个管理客户列表的控制器。每个客户端都是一个 DS.Model。当我将控制器的内容设置为 App.Client.find() 的结果时，代码会引发以下异常，即 RecordArray。如果我将控制器的内容设置为空数组 [] 或者当我使用 Ember.Object 而不是 DS.Model 作为客户端对象时，我也不例外

```
Uncaught Error: Cannot perform operations on a Metamorph that is not in the DOM. 

APP.ClientsController = Ember.ArrayController.extend({});

APP.Client = DS.Model.extend({
number:DS.attr('number'),
firstname:DS.attr('string')})

APP.ClientsRoute = Ember.Route.extend({
setupControllers: function(controller) {
    controller.set('clients',APP.Client.find());            
});

APP.store = DS.Store.create({
revision: 11,
adapter: 'DS.FixtureAdapter'     
}); 
```

任何想法，我尝试调试源代码，当 Ember 检测到控制器内容的更改并触发 arrayWillChange 事件时代码失败

```
 arrayWillChange: function(content, start, removedCount) {
// If the contents were empty before and this template collection has an
// empty view remove it now.
var emptyView = get(this, 'emptyView');
if (emptyView && emptyView instanceof Ember.View) {
  emptyView.removeFromParent();
}

// Loop through child views that correspond with the removed items.
// Note that we loop from the end of the array to the beginning because
// we are mutating it as we go.
var childViews = get(this, 'childViews'), childView, idx, len;

len = get(childViews, 'length');

var removingAll = removedCount === len;

if (removingAll) {
  this.currentState.empty(this);
}

for (idx = start + removedCount - 1; idx >= start; idx--) {
  childView = childViews[idx];
  if (removingAll) { childView.removedFromDOM = true; }
  childView.destroy();
} 
```

},

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:22:38.730

原来是干扰外部脚本（DatatTable Jquery 插件）试图修改相同的 dom 结构 ember 的控制。

# javascript - JavaScript：数据属性问题

> ID：14183883
> 
> 赞同：0
> 
> 时间：2013-01-06T16:00:04.367
> 
> 标签：javascript, attributes, dataset

我想知道是否有人可以提供帮助 - 我有一个简单的 javascript：[http ://bnewton.co.uk/freelancer-files/js-fix/](http://bnewton.co.uk/freelancer-files/js-fix/)

我正在尝试在我的 JS 中使用数据集属性 - 它有效。但是，通常情况下，Safari 不喜欢它。但是，它可以在 FireFox 中使用。有谁知道我错过了什么？

或者，源代码：

```
<!DOCTYPE HTML>
<html>  
<head>
    <meta charset="UTF-8" />
    <title>TITLE GOES HERE</title>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script type="text/javascript">
        var products = [];
            products[0] = new Array ("Spandex Square Top Chair Cover", 2.60), // format: ("PRODUCT NAME", PRICE), 
            products[1] = new Array ("Metallic Spandex Chair Cover", 3.50),
            products[2] = new Array ("Spandex Square Top Chair Cover", 1.20),
            products[3] = new Array ("Spandex Lyrca - Cocktail Add-On", 1.15),
            products[4] = new Array ("Polyester Table Cover", 10),
            products[5] = new Array ("Spandex-Lycra Table Cover", 10),
            products[6] = new Array ("Spandex-Lycra Table Decoration Piece Add-On", 5),
            products[7] = new Array ("Ceiling Drapes", 30); // to add a new product simply duplicate this last line (and change the number)
    </script>
</head>
<body>
    <div id="emailForm">
      <h2>E-mail Me</h2>
      <form action="contact.php" method="post" name="form1" onSubmit="return validate(this)">
      <input type='hidden' name='subject' value='THIS IS A TEST SUBJET'/>
      <input type='hidden' name='recipient' value='user@domain.co.uk'/>
      <ol>
          <li>
              <label>First Name*</label>
              <input type="text" id="firstname" name="firstname"/>
              <label>Last Name*</label>
              <input type="text" id="lastname" name="lastname"/>
          </li>
          <li>
              <label>Address*</label>
              <input type="text" id="address" name="address"/>
          </li>
          <li>
              <label>Suburb*</label>
              <input type="text" id="suburb" name="suburb"/>
          </li>
          <li>
              <label>Postcode*</label>
              <input type="text" id="postcode" name="postcode"/>
          </li>
          <li>
              <label>Contact Number*</label>
              <input type="text" id="number" name="number"/>
          </li>
          <li>
              <label>E-Mail*</label>
              <input type="text" id="email" name="email"/>
          </li>
          <li>
            <label>Order Form</label>
          </li>     
       </ol>
        <fieldset id="user-selections">
        <script type="text/javascript">
            count = 0;
            function drawProduct(i) {
                document.write("<div id='product-line-"+i+"' class='-line'>");
                    document.write('<select class="product-'+i+'" name="PRODUCT" value="">');
                        document.write('<option onclick="clearLine('+count+');" selected>--- Order Items ---</option>');
                            for (i=0; i<products.length; i++) {
                                document.write("<option class='product-"+i+"' onclick='showPrice(this.dataset.count, "+i+");' data-count='"+count+"' value='"+products[i][0]+"'>"+products[i][0]+"</option>");
                                $('option.product-'+i).attr("price", products[i][1]);
                            }
                    document.write("</select> ");
                    document.write('<input class="product-price-'+count+'" type="text" name="PRICE" value="" readonly> x ');
                    document.write('<input class="product-qty-'+count+'" onKeyUp="updateQty(this.dataset.count, this);" data-count="'+count+'" type="text" name="QTY" value="0"> = ');
                    document.write("<input class='product-line-cost-"+count+"' type='text' name='LINE COST' readonly>");
                document.write("</div>");
                count++;
            }

            function clearLine(anchor) {
                $('div#product-line-'+anchor+' input:nth-child(2)').val("");
                $('div#product-line-'+anchor+' input:nth-child(3)').val("");
                $('div#product-line-'+anchor+' input:nth-child(4)').val("");
            }

            function showPrice(anchor, price) {
                clearLine(anchor);
                getPrice = $('option.product-'+price).attr("price");
                $('div#product-line-'+anchor+' input:nth-child(2)').val("$"+getPrice);
                return getPrice;
            }

            function updateQty(anchor, ele) {
                getQTY = $(ele).val();
                getPrice = $('div#product-line-'+anchor+' input:nth-child(2)').val().replace("$","");
                lineTotal = getQTY*getPrice;
                $('div#product-line-'+anchor+' input:nth-child(4)').val("$"+lineTotal);
            }

            function addMore() {
                if(count<15) {
                    var aFieldset=document.getElementsByClassName('-line');
                    var cloned=aFieldset[0].cloneNode(true); // fieldset containing select, input & input
                    var parent=aFieldset[0].parentNode; // form
                    // re-name
                    cloned.setAttribute("id", "product-line-"+count);
                    cloned.getElementsByTagName('select')[0].setAttribute("class", "product-"+count);
                    options = cloned.getElementsByTagName('option');
                        for (i=0; i<options.length;i++) {
                            options[i].setAttribute("data-count", count);
                        }
                    cloned.getElementsByTagName('input')[0].setAttribute("class", "product-price-"+count);
                    cloned.getElementsByTagName('input')[1].setAttribute("class", "product-qty-"+count);
                    cloned.getElementsByTagName('input')[1].setAttribute("data-count", count);
                    cloned.getElementsByTagName('input')[2].setAttribute("class", "product-line-cost-"+count);
                    var aInput=parent.getElementsByTagName('input');
                    var cInput=cloned.getElementsByTagName('input');
                    // insert clone
                    var oDiv=parent.getElementsByTagName('div')[0];
                    parent.insertBefore(cloned, oDiv);
                    clearLine(count);
                    count++;
                }
                else {
                    alert('Sorry, there is a maximum of 15 product lines allowed.');
                }
            }

            drawProduct(0);
        </script>
        </fieldset>
            <div style='float: right; margin-left: 415px;'>
                Grand Total: <input class='-total' type='text' name='total' value='' readonly>
            </div>
            <div>
            <button type="button" onclick="addMore()">+</button><button type="button" onclick="removeLast();">-</button>
            <button type="submit" name="submit">submit</button>
            </div>
        </script>
        </form>
    </div>
</body>
</html> 
```

# css - 如何使“文本溢出：省略号”在浮动 div 上工作？

> ID：14183887
> 
> 赞同：13
> 
> 时间：2013-01-06T16:00:20.150
> 
> 标签：css

我有两个按钮浮动到屏幕的相对两侧，如果屏幕缩小，我希望它们能很好地折叠。从视觉上看，这就是我想要的：

```
________________________________________________________________
|                                                               |
|   |LongTextButtonName|                 |LongTextButtonName|   | When the screen
|_______________________________________________________________| is large

_______________________________________
|                                      |
|   |LongTextBu...|  |LongTextBu...|   | When the screen is small
|______________________________________| 
```

不幸的是，现在我得到了这个：

```
________________________________________
|                                       |
|   |LongTextButtonName|                |
|                |LongTextButtonName|   | 
|_______________________________________| 
```

我想要一个纯 CSS 的解决方案。

这是我当前的 html 和 css（这是一个[小提琴](http://jsfiddle.net/UfxgZ/)）：

```
<div class="button-container">
  <div class="left-button"><a>LongTextButtonName</a></div>
  <div class="right-button"><a>LongTextButtonName</a></div>
</div>

.button-container {
  min-width:320px;
}
.button-container > div {
  border: 1px solid gray;
  background-color: orange;
  min-width: 160px;
  padding: 8px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.left-button {
  float: left;
}
.right-button {
  float: right;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-06T16:05:09.037

下面的小提琴基于以下工作：

*   容器需要一个宽度才能触发溢出和省略号。
*   为了让盒子不断折叠，我使用了百分比宽度。
*   考虑到我使用 CSS3 的填充`box-sizing:border-box;`

请注意，由于`box-sizing:border-box;`，此解决方案不适用于较旧的浏览器。

```
.button-container {
  min-width:320px;
}
.button-container > div {
  border: 1px solid gray;
  background-color: orange;
  max-width: 50%;
  padding: 8px;
  white-space: nowrap;
  overflow: hidden;
  box-sizing:border-box;
  text-overflow: ellipsis;
}
.left-button {
  float: left;
}
.right-button {
  float: right;
} 
```

[http://jsfiddle.net/UfxgZ/1/](http://jsfiddle.net/UfxgZ/1/)

# ruby-on-rails - 使用 Nested_attributes 显示模型，使用在另一个中捕获的 ID

> ID：14183893
> 
> 赞同：0
> 
> 时间：2013-01-06T16:00:49.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在显示书籍模型时尝试从作者模型中列出作者姓名。我不确定使用 Books 模型中保存的 Author_ID 从 Authors 模型中获取列的语法。

我的两种模型的架构：

```
CREATE TABLE "authors" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL);

CREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "author_id" integer); 
```

书籍的 index.html.erb：

```
<h1>Listing books</h1>

<table>
  <tr>
    <th>Title</th>
    <th>Author</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @books.each do |book| %>
  <tr>
    <td><%= book.title %></td>
    <td><%= book.author_id %></td>
    <td><%= link_to 'Show', book %></td>
    <td><%= link_to 'Edit', edit_book_path(book) %></td>
    <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Book', new_book_path %> 
```

当前输出

```
 Listing books

Title                                   Author          
Dirty Dozen                             2      Show    Edit    Destroy
Life and Times of Rich and Famous       1      Show    Edit    Destroy
Digby Manual                            4      Show    Edit    Destroy
Piano for Pros                          5      Show    Edit    Destroy
Pints and Pubs                          6      Show    Edit    Destroy 
```

我想使用一些东西来`<td><%= author.(book.author_id).name %></td>`使用作者的 ID 获取作者的名字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:11:29.817

在 Book 模型中：

```
class Book < ActiveRecord::Base
  belongs_to :author
  ... 
```

在作者模型中：

```
class Author < ActiveRecord::Base
  has_many :books
  ... 
```

在控制器索引操作中（避免 n+1 查询）

```
@books = Book.includes(:author).all # or your criteria 
```

最后

```
<td><%= book.author.name %></td> 
```

# xcode - Mogenerator 错误：跳过实体 MyObjectName (NSManagedObject)，因为它不使用自定义子类。

> ID：14183895
> 
> 赞同：24
> 
> 时间：2013-01-06T16:00:55.600
> 
> 标签：xcode, core-data, mogenerator

为什么我在运行 mogenerator 以生成我的 Core Data 模型对象的类文件时看到以下错误？

```
skipping entity MyObjectName (NSManagedObject) because it doesn't use a custom subclass. 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-06T16:03:08.000

通过确保填写数据模型检查器上的名称和类字段来解决此问题：

![数据模型检查器](../Images/b956c2d73b68967b1f165315ae9c911d.png)

# javascript - jQuery：元素列表上的交错动画

> ID：14183899
> 
> 赞同：3
> 
> 时间：2013-01-06T16:01:22.927
> 
> 标签：javascript, jquery, html, css

我有一个导航容器，里面有垂直排序的链接。我想要的是每个链接淡入并从左到右飞行。但是我不确定如何按顺序执行此操作？我有代码可以一次完成所有这些，但我想一次完成一个。或者至少让它们交错，所以动画触发之间会有一个任意延迟

代码：

```
$(document).ready(function(){
    $("#navigation a")
        .css({opacity:0,"margin-right":"10px"})
        .animate({opacity:1,"margin-right":"0"});
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T16:26:14.880

这是 $.queue 的完美用途。谢谢你的问题：你让我学会了如何更好地使用它来研究这个。

这是一个活生生的例子：http: [//jsfiddle.net/EJgEC/](http://jsfiddle.net/EJgEC/)

```
// Cache our jQuery-wrapped objects
var $navigation = $('#navigation'),
    $navigationLinks = $navigation.find('a');

// Set the initial state on navigation links for future animation
$navigationLinks.css({
  opacity: 0,
  "margin-left": "20px"
});

$navigationLinks.each(function (i, item) {
  var $item = $(item);

  // Add animations on each item to the fx queue on the navigation DOM element
  $.queue($navigation[0], 'fx', function () {
    var that = this;
    $item.animate({
      opacity: 1,
      "margin-left": "0"
    }, {
      complete: function () {
        // Fire the next item in the queue as the callback
        $.dequeue(that);
      }
    });
  });
});

// Start the navigation queue
$navigation.dequeue(); 
```

我还强烈建议阅读 $.queue：值得了解。[http://api.jquery.com/jQuery.queue/](http://api.jquery.com/jQuery.queue/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T16:25:57.993

**更新**

正如 Nate 在下面评论的那样，`arguments.callee`已弃用。虽然[不是每个人都同意这个问题](http://mir.aculo.us/2012/04/24/5-things-they-told-you-not-to-use-in-javascript/)，但应该避免一般不推荐使用的功能。感谢 Nate，以下将在不使用`arguments.callee`.

**工作示例：http:** [//jsbin.com/idizi/1359/edit](http://jsbin.com/idizi/1359/edit)

```
var paras = $('p'),
    i = 0;

// If using jQuery 1.3 or lower, you need to do 
// $(paras[i++] || []) to avoid an "undefined" error
function animateNav () {
    $(paras[i++]).fadeIn('fast', animateNav)
                 .css({opacity:0,"margin-left":"10px"})
                 .animate({opacity:1,"margin-left":"0"});
}

animateNav(); 
```

* * *

这将得到想要的结果。

**工作示例：http:** [//jsbin.com/idizi/1356/edit](http://jsbin.com/idizi/1356/edit)

```
var paras = $('p'),
        i = 0;

// If using jQuery 1.3 or lower, you need to do 
// $(paras[i++] || []) to avoid an "undefined" error
(function() {
  $(paras[i++]).fadeIn('fast', arguments.callee)
               .css({opacity:0,"margin-right":"10px"})
               .animate({opacity:1,"margin-right":"0"});
})(); 
```

通过[http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-easy-sequential-animations-in-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-easy-sequential-animations-in-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:09:05.137

```
$(document).ready(function(){
   var links =  $("#navigation a");
   var count = 0;

   var handle = setInterval(function(){
         $(links[count])
            .css({opacity:0,"margin-right":"10px"})
            .animate({opacity:1,"margin-right":"0"});
             count++;

             if(count==links.length){
                  clearInterval(handle);
              }                

    }, 5000);

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T22:12:31.170

这是一个不依赖 jQuery 的解决方案。

小提琴：http: [//jsfiddle.net/N9afT/](http://jsfiddle.net/N9afT/)

```
 function stagger(targets, interval, action){
    for (var i = 0, maxi = targets.length; i < maxi; i++) {
        (function(){
            var target = targets[i];
            setTimeout(function(){action(target);}, interval*i);
        })();
    }
   } 
```

例子：

```
stagger([1, 2, 3], 1000, function(val){console.log(val)}) 
```

但当然，它也可以应用于 jquery 目标。

```
stagger($(".element-class"), 1000, function(el){console.log(el)}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-09T11:09:49.023

我在这个话题上的 2 美分也是如此，因为我也在寻找一个想法。我为我的情况想出了这个：

```
// in On-Ready wrapper

$('nav li')
.hide(0)   // instant, no animation, 
.each(function (i) {
  $(this)
    .delay(i * 400)    // stagger the following animation
    .fadeIn("slow");
}); 
```

在上述问题的背景下，这看起来像

```
// in On-Ready wrapper

$('#navigation a')
.css({opacity: 0, marginRight: '10px'}) 
.each(function (i) {
  $(this)
    .delay(i * 400)    // stagger the following animation
    .animate({opacity: 1, marginRight: 0});
}); 
```

这行得通，因为`.each(cb(index))`给了我们每个孩子的索引，孩子们得到一个延迟和一个动画（按这个顺序）添加到他们的[FX-Queue](https://api.jquery.com/queue/) :)

顺便说一句，`.delay()`您可以使用`.animate({}, options={delay: 123})`延迟来设置它。

# c++ - 引用指针问题

> ID：14183902
> 
> 赞同：3
> 
> 时间：2013-01-06T16:01:51.153
> 
> 标签：c++, pointers, reference

我有一个关于指针引用、指针引用或任何你想调用它的问题，但首先是一些代码。一、抽象比较函数模板类：

```
template <class T> struct BinaryTrivalent {
    virtual BinaryTrivalent<T>* clone() const = 0;
    virtual int operator()(const T& lhs, const T& rhs) const = 0;
    int compare(const int a, const int b) const {
        if (a < b)
            return LESS_THAN;
        else if(a == b)
            return MATCH;
        return MORE_THAN;
    }
}; 
```

以及它的实际使用：

```
struct NodePCompare : public BinaryTrivalent<Node*> {
    NodePCompare* clone() const { return new NodePCompare(*this); }
    int operator()(const Node*& lhs, const Node*& rhs) const {
        return compare(lhs, rhs);
    }
}; 
```

该模板在实际类型上工作得很好，但它似乎没有`operator`像我期望的那样识别它并告诉我这`NodePCompare`是抽象的。
我过去曾遇到过这个问题，但我放弃了试图找出问题所在，只是将指针包装在另一种类型中。
我现在可以做同样的事情，但我想了解真正的问题是什么。
我一直在阅读`*&`在这种情况下的确切含义，除非我没有正确理解，否则这*应该*可以正常工作。
这个链接有助于理解它： http: [//markgodwin.blogspot.co.il/2009/08/c-reference-to-pointer.html](http://markgodwin.blogspot.co.il/2009/08/c-reference-to-pointer.html)

任何人的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T16:15:25.437

您的问题是签名并不真正匹配。

应该是这样的：

```
int operator()(Node* const & lhs, Node* const & rhs) const {
    return compare(lhs, rhs);
} 
```

问题是`const`最终应用的地方。`typedef Node * base_T_arg_t;`您可以通过在班级的私人部分中说，然后说以下内容来完成同样的事情：

```
int operator()(const base_T_arg_t &lhs, const base_T_arg_t &rhs) const {
    return compare(lhs, rhs);
} 
```

基本上，`const`before`*`不绑定到整个指针的类型，它绑定到 type `Node`。

的返回类型`clone`是红鲱鱼，原因有两个。首先，函数签名不包括其返回类型。因此，您绝对是在创建`clone`与原始签名匹配的定义，因此将覆盖它。

但是，如果您的返回类型不匹配，编译器通常会给您一个错误。除了有一个称为“[逆变](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)”的原则，它允许作为引用或指针的返回类型在函数被覆盖时成为派生类的引用或指针。

毕竟，指向派生类型的指针可以自由转换为指向基类型的指针。从某种意义上说，它们是等价的。

# c - 哲学家用餐

> ID：14183914
> 
> 赞同：3
> 
> 时间：2013-01-06T16:03:22.610
> 
> 标签：c, pthreads

所以我试图用一些信号量来解决哲学家的用餐问题..当我编译它时，我得到哲学家 1-5 正在思考，哲学家 1 饿了，他拿着叉子 5 和 1，哲学家 3 饿了，然后程序就停在那里......我不知道问题出在哪里。

```
#include<stdio.h>
#include<semaphore.h>
#include<pthread.h>

#define N 5
#define THINKING 0
#define HUNGRY 1
#define EATING 2
#define LEFT (i+4)%N
#define RIGHT (i+1)%N

sem_t mutex;
sem_t S[N];  
void * philospher(void *num);
void take_fork(int);
void put_fork(int);
void test(int);

int state[N];
int phil_num[N]={0,1,2,3,4};

int main()
{
    int i;
    pthread_t thread_id[N];
    sem_init(&mutex,0,1);
    for(i=0;i<N;i++)
        sem_init(&S[i],0,1);
    for(i=0;i<N;i++)
    {
        pthread_create(&thread_id[i],NULL,philospher,(void *)i);
        printf("Philosopher %d is thinking\n",i+1);
    }
    for(i=0;i<N;i++)
        pthread_join(thread_id[i],NULL);
}

void *philospher(void *num)
 {
    while(1)
    {
        int i;
      i = (int)num;
        sleep(1);
        //take_fork(i);

    sem_wait(&mutex);
    state[i] = HUNGRY;
    printf("Philosopher %d is Hungry\n",i+1);
     //test(i);

    if (state[i] == HUNGRY && state[LEFT] != EATING && state[RIGHT] != EATING)
    {
        sem_wait(&S[LEFT]);
        sem_wait(&S[RIGHT]);
        state[i] = EATING;
        sleep(2);
        printf("Philosopher %d takes fork %d and %d\n",i+1,LEFT+1,i+1);
        printf("Philosopher %d is Eating\n",i+1);
    }

    sem_post(&mutex);
    sleep(1);

        //put_fork(*i);

    sem_wait(&mutex);
    state[i] = THINKING;
    printf("Philosopher %d putting fork %d and %d down\n",i+1,LEFT+1,i+1);
    printf("Philosopher %d is thinking\n",i+1);
    sem_post(&S[LEFT]);
    sem_post(&S[RIGHT]);
    //test(LEFT);
    //test(RIGHT);
    sem_post(&mutex);

    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:10:01.297

我认为这是一个竞争条件。

您`state[RIGHT]`在工作函数中指的是，但不能保证所有线程都已创建，以便`state`在该点初始化数组。

# mysql - 如何使用 LIKE mysql 匹配列中的文本

> ID：14183915
> 
> 赞同：0
> 
> 时间：2013-01-06T16:03:52.713
> 
> 标签：mysql

我知道有这种情况的数据，但 SELECT 不返回任何数据：

```
SELECT *
FROM TABLE1
WHERE COL3 LIKE '%State: OH%' 
```

我错过了什么吗？还有另一种方法可以做到这一点吗？我也可以按每个州对数据进行分组吗？

任何帮助表示赞赏。

* * *

对不起，我认为内容有一些我看过的 html 标签。所以类似的声明应该是：

```
WHERE COL3 LIKE '%State: <b>OH</b>%' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:19:23.233

您认为您的数据符合您的条件，但运行查询表明您没有。您可以尝试的一件事是分析该列以查看确切内容：

```
SELECT COL3, COUNT(*) as freq
FROM TABLE1
GROUP BY COL3 
```

这将创建您的列的频率分布，并可能有助于您的数据发现。如果您看到具有“状态”的行，则可以使用`WHERE`子句进一步限制它：

```
SELECT COL3, COUNT(*) as freq
FROM TABLE1
GROUP BY COL3
WHERE COL3 LIKE '%State% 
```

它可能就像冒号后面不止一个“空白”一样简单。

# meteor - 为什么我的测试集合没有更新？

> ID：14183916
> 
> 赞同：1
> 
> 时间：2013-01-06T16:03:56.740
> 
> 标签：meteor

我正在自动订阅客户端上的集合。我的代码如下。我希望客户有更新的信息，但它永远不会更新。这个问题表现为一个按钮，除非我刷新页面，否则永远不会被消息替换。

实际上，我为“测试”集合拥有的一个文档应该在客户端将其 testCount 属性更新为 1，但除非我刷新页面，否则它永远不会发生。不应该更新吗？

**未安装自动发布包。**

在这一点上，我确信 Meteor 中存在错误，或者我只是不了解基本的东西。我即将安装meteor.js 的开发版本并弄清楚它或者干脆放弃，直到Meteor.js 可能真正起作用。:P

我的控制台日志：

```
Tests updated!
checking test
no test
Tests updated! Object {_id: "ea9f6002-74c7-4f37-9f10-0167b3b6f65a", testCount: 0}
checking test result
test.testCount 0 
```

我的服务器日志：

```
$ meteor reset;meteor
Project reset.
[[[[[ ~/Dropbox/projects/sphela-game/sphela ]]]]]

Running on: http://localhost:3000/
inserting new test
Connecting test, getting initial data.
Test added do nothing { testCount: 0, _id: 'ea9f6002-74c7-4f37-9f10-0167b3b6f65a' }
Connecting test, getting initial data.
Test added do nothing { testCount: 0, _id: 'ea9f6002-74c7-4f37-9f10-0167b3b6f65a' }
Running test.
Updating test to 1.
Test ran. { testCount: 1, _id: 'ea9f6002-74c7-4f37-9f10-0167b3b6f65a' }
Test added do nothing { testCount: 1, _id: 'ea9f6002-74c7-4f37-9f10-0167b3b6f65a' } 
```

我的html：

```
<head>   <title>Testing counts.</title> </head>

 <body>   {{> app}} </body>

 <template name="app">   
   {{#if testSuccess}}
     <h1>Test complete.</h1>
   {{else}}
     <button class="btn run-test">Run Test</button>
   {{/if}} 
 </template> 
```

我的 JavaScript：

```
var Tests = new Meteor.Collection('tests');

if (Meteor.isClient) {
  Meteor.startup(function() {
    Session.set('testCount', 0)
    Meteor.subscribe('connect');
  });
  Template.app.testSuccess = function() {
    var test;
    console.log('checking test result');
    test = Tests.findOne();
    if (!test) {
      console.log('no test', test);
      return false;
    }
    console.log('test.testCount', test.testCount);
    return test.testCount > 0;
  };
  Template.app.events({
    'click .run-test': runTest
  });
  function runTest(event) {
    Meteor.call('runTest');
    Session.set('testCount', 1);
  }
  Meteor.autorun(function() {
    console.log('Tests updated!', Tests.findOne());
  });
  Meteor.autosubscribe(function() {
    Meteor.subscribe('test-results', Session.get('testCount'));
  });
}

if (Meteor.isServer) {
  Meteor.startup(function() {
    test = Tests.findOne({})
    if (!test) {
      test = {
        testCount: 0
      };
      console.log('inserting new test');
      test._id = Tests.insert(test);
    } else {
      console.log('startup reset');
      test.testCount = 0;
      Tests.update({_id:test._id}, test);
    }
  });

  Meteor.publish('connect', function() {
    var test_;
    console.log('Connecting test, getting initial data.');
    test_ = Tests.findOne({});
    this.set('tests', test_._id, test_);
    this.complete();
    this.flush();
  });

  Meteor.publish('test-results', function(test) {
    var handle;
    handle = Tests.find({testCount: test}).observe({
      changed: _.bind(function(test) {
        console.log('Test changed', test._id, test.testCount);
        this.set('tests', test._id, test);
        this.flush();
      }, this),
      added: _.bind(function(test) {
        console.log('Test added do nothing', test);
        this.flush();
      }, this)
    });
    this.complete();
    this.flush();
    this.onStop(function() {
      handle.stop();
    });
  });
  Meteor.methods({
    runTest: function() {
      var test;
      console.log('Running test.');
      test = Tests.findOne({});
      test.testCount = 1;
      console.log('Updating test to 1.');
      Tests.update({_id: test._id}, test);
      console.log('Test ran.', Tests.findOne());
    },
  });
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T21:15:33.027

流星的 Naomi 实际上在 Google Group 邮件列表上为我回答了我的问题。我的问题的要点是两个订阅/发布返回的冲突结果集，一个被忽略了。

这实际上在文档中，我错过了：

> 如果多个订阅为某个属性发送冲突的值（相同的集合名称、文档 ID 和属性名称），则客户端上的值将是客户端激活的第一个订阅的值。（即使它不是第一个发送重复属性的人。）

答案是不要在相互冲突的多个发布语句中返回结果集。我想避免发回相同的集合将有助于避免这种情况。

Naomi 的完整答案如下[1]：

> 您看到的行为涉及基于 Meteor 中的观察编写自定义发布者的一些细节。
> 
> 在我看来，您所看到的是多个订阅如何工作的结果。这就是我认为正在发生的事情。初始发布，服务器发送下来“在收集测试中，有一个 id 为 ea9f6002-74c7-4f37-9f10-0167b3b6f65a 的对象，其中 testCount 为 0”会话变量计数为 0，因此我们订阅 test-results，其中 testCount 为 0。太好了，我们的本地版本的数据库已经认为，所有订阅都同意，无需更改。会话变量计数更新为 1。如果 testCount 为 1，则自动订阅并订阅测试结果。这意味着现在我们有两个发布者：'connect' 认为 ea9f6002-74c7-4f37-9f10-0167b3b6f65a 的 testCount 为 0（它永远不会更新，怎么会有不同的想法？“测试结果”得到“添加” 消息说 ea9f6002-74c7-4f37-9f10-0167b3b6f65a 的 testCount 为 1 （当你运行一个新的观察时，你会得到一个“添加”的消息，其中的所有内容。稍后，当事情发生匹配该光标更改） - 但它对添加的消息没有任何作用。看起来您期待的是“已更改”消息。这里的总体结果是，由于我们有一个发布者说 ea9f6002-74c7-4f37-9f10-0167b3b6f65a 的 testCount 为 0，并且没有发布者对此发表任何其他意见，因此客户认为 ea9f6002-74c7-4f37-9f10-0167b3b6f65a 有测试计数为 0。与该光标匹配的事物发生变化时的消息）-但它对添加的消息没有任何作用。看起来您期待的是“已更改”消息。这里的总体结果是，由于我们有一个发布者说 ea9f6002-74c7-4f37-9f10-0167b3b6f65a 的 testCount 为 0，并且没有发布者对此发表任何其他意见，因此客户认为 ea9f6002-74c7-4f37-9f10-0167b3b6f65a 有测试计数为 0。与该光标匹配的事物发生变化时的消息）-但它对添加的消息没有任何作用。看起来您期待的是“已更改”消息。这里的总体结果是，由于我们有一个发布者说 ea9f6002-74c7-4f37-9f10-0167b3b6f65a 的 testCount 为 0，并且没有发布者对此发表任何其他意见，因此客户认为 ea9f6002-74c7-4f37-9f10-0167b3b6f65a 有测试计数为 0。
> 
> 为确保客户端看到 testCount 为非 0，所有在集合中断言有关文档 ea9f6002-74c7-4f37-9f10-0167b3b6f65a 的任何发布者都必须说 testCount 为非 0，并具​​有适当的 set 和 flush 调用. 即使您在添加的观察回调中发送了 testCount 为 1 的消息，Meteor 也不保证客户端在订阅两个与文档值冲突的不同事物时看到的内容。
> 
> tl;dr 版本：观察游标在首次运行时为观察集中的所有内容获取一次添加的回调，即使这些项目已经在数据库中。当您有多个发布者在同一文档中发布相同的密钥时，客户端看到的版本将是其中之一，但如果发布者不同意，Meteor 不保证哪个版本。尽量不要让多个出版商对文件的内容产生不同意见，这只会造成混乱。

[1] [https://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/KBhXK6a44kY](https://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/KBhXK6a44kY)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:26:34.193

> 这个问题表现为一个按钮，除非我刷新页面，否则永远不会被消息替换。

运行代码并单击按钮时，按钮将替换为：

**测试完成。**

控制台显示：

```
checking test result testcount.js:10
test.testCount 1 
```

将您的 javascript 文件粘贴到我的 IDE 后，我注意到一个错误；该方法的右大括号后的逗号`runTest()`。但据我所知，在运行测试时它没有负面影响。

# android - webview 和本地 html

> ID：14183922
> 
> 赞同：0
> 
> 时间：2013-01-06T16:04:45.150
> 
> 标签：android

我已经放置了一个 webview，并通过此代码将它与本地 html 一起使用。现在，我想在这个 html 中添加图像，但我不知道这些图像放在哪里。有什么建议吗？

```
String html = "<html><body>Hello, World!</body></html>";
String mime = "text/html";
String encoding = "utf-8";

WebView myWebView = (WebView)this.findViewById(R.id.myWebView);
myWebView.getSettings().setJavaScriptEnabled(true);
myWebView.loadDataWithBaseURL(null, html, mime, encoding, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:11:43.047

在 in`assets/`文件夹中创建一个 html 页面。
此处描述了如何将图像添加到 html 文件[。](http://www.w3schools.com/html/html_images.asp)

然后在 WebView 中加载该页面：

```
webView.loadUrl("file:///android_asset/filename.html"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:15:12.260

如果要在 html 文件中添加图像，则需要进行如下更改：

> ```
> String html ="<html><body>Hello, World!" +
>             "<img src=\"C:/Users/Public/Pictures/Sample Pictures/pulpit.jpg\" alt=\"Pulpit rock\" width=\"304\" height=\"228\" /></body></html>"; 
> ```

谢谢。

# web - 点击 Facebook 的“喜欢”按钮不会显示在喜欢的人时间线/墙上

> ID：14183923
> 
> 赞同：1
> 
> 时间：2013-01-06T16:04:52.013
> 
> 标签：web, facebook-like

我在我的网站上添加了一个 facebook like 按钮（代码如下），但是当单击该按钮“喜欢”时，它不会显示在时间线上。我已经在各种帐户上进行了测试，确保相关设置正确。我相信这可能是因为网站名称中有一个连字符（即 www.site-name.co.uk），因为我不允许使用和关联的电子邮件地址（即 admin@site-name.co.uk）尝试创建 facebook 页面时（返回的响应类似于“这不是一个正确的电子邮件地址”）。

任何线索，好像我做错了什么？提前致谢。

我正在使用的代码：

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.band-scene.co.uk&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=false&amp;font&amp;colorscheme=dark&amp;action=like&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden;  height:35px;" allowTransparency="true"></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:08:01.710

点击“喜欢”按钮只会将该页面添加到用户个人资料上的“喜欢”部分，这可能会或可能不会显示在他们的时间线上。如果用户在喜欢时添加了评论，那么它将显示在他们的时间线上。

但是，当您使用的是 iframe 版本的 Like 按钮时，我不确定是否会为此显示 Comments 框。使用 fb:like 标记时，按钮下方会出现一个框，允许用户输入评论。

# c# - .net 优化中的调试与发布（分发给用户时的担忧）

> ID：14183924
> 
> 赞同：10
> 
> 时间：2013-01-06T16:05:02.247
> 
> 标签：c#, .net, vb.net, visual-studio

向公众分发`Debug`与构建版本是否存在任何安全或性能问题？`Release`

大多数时候，我只是将 .exe 文件打包到 Debug 文件夹中（连同所需的依赖项）并将其提供给用户。

有什么理由比另一个更喜欢分发一个吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T16:12:19.683

是的，当然有 - 安全和性能影响。

调试版本包含比发布版本更多的信息，并且许多编译器优化已针对调试版本关闭。

另请参阅此处的[调试/发布差异](https://stackoverflow.com/questions/367884/debug-release-difference)。

* * *

> 有什么理由比另一个更喜欢分发一个吗？

是的。如果您想拥有一个经过优化编译的更快的二进制文件，请使用`release`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-06T16:18:33.337

没有我能想到的安全问题。肯定存在性能问题，程序集的调试版本包含一个属性 (DebuggableAttribute)，该属性将始终阻止抖动优化器优化代码。这会对正在运行的程序的性能产生很大的影响。[此答案](https://stackoverflow.com/a/4045073/17034)中记录了抖动执行的优化。

您可能会遇到内存消耗问题。垃圾收集器将以不同的方式运行，使局部变量保持活动状态，直到方法体结束。这是一个极端情况，假设您使用真实数据，那么在测试应用程序时应该已经诊断出这样的问题。

特定于 VB.NET，发布 Debug 版本很容易导致程序在没有附加调试器的情况下在用户计算机上运行时崩溃并出现 OutOfMemoryException。它由于 WeakReferences 上的泄漏而失败，Edit+Continue 使用它来跟踪具有带有 WithEvents 关键字的事件处理程序的类。

如果您不需要抖动优化器产生的性能增强并且不发布 VB.NET 程序集，那么无需担心太多。

# computer-science - 关于计算机网络和有限自动机的问答解决书籍

> ID：14183926
> 
> 赞同：-1
> 
> 时间：2013-01-06T16:05:10.360
> 
> 标签：computer-science, finite-automata

我正在互联网上寻找有关数据计算机网络和有限自动机理论的问题和解决方案书籍，以提高我的问题解决能力，但找不到任何我需要的。

你在这里帮我吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:33:40.937

如果您的目标是 MCQ 书籍，那么以下书籍可以帮助您：

1.  GKPublishers GATE 图书
2.  [蒂莫西·威廉斯“计算机科学的 MCQ](http://www.tatamcgrawhill.com/html/9780071077699.html) ”

    **对于 Autometa：**

    跳工艺和厄尔曼，

    霍维茨和萨哈尼，

    彼得林茨

    **对于网络数字：**

    滕尼鲍姆，

    威廉·斯托林斯，

    冷冻

这些是最好的概念和数字书籍，但我不记得它们的标题。所以这里是作者的名字。希望这有所帮助。

# java - 单根层次结构使垃圾收集器的实现变得更加容易

> ID：14183929
> 
> 赞同：2
> 
> 时间：2013-01-06T16:05:24.273
> 
> 标签：java, oop

这是Java书中**Thinking 的名言**

> 单根层次结构使得实现垃圾收集器（它方便地内置在 Java 中）变得更加容易。必要的支持可以安装在基类中，因此垃圾收集器可以向系统中的每个对象发送适当的消息。如果没有单根层次结构和通过引用操作对象的系统，就很难实现垃圾收集器。

垃圾收集器如何向系统中的每个对象**发送**适当的消息。是的，每个类都派生自对象，但是该消息是如何发送的？

那是什么信息？

我们从中获得了什么？

* * *

**笔记**

这个问题与我[之前](https://stackoverflow.com/questions/14109983/does-unified-type-system-help-for-doing-garbage-collection)的问题不同..虽然我也没有找到任何正确的答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:10:13.237

我猜作者指的[`finalize()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#finalize%28%29)是每个对象都有的方法，它由垃圾收集器调用。发送消息 = 调用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T17:58:51.573

该类型`Object`包括一些“隐藏”字段，这些字段通知 GC 它需要了解的任何从`Object`. 我不知道为什么引用的文本使用术语“消息”，但是为了让 GC 知道如何处理一块内存，它必须知道那块内存代表什么。如果不同类型的对象有不同的标头，并且知道一块内存代表什么的唯一方法就是知道标识它的引用类型，那么 GC 的工作就会更加艰巨。

# python - os.walk 获取目录名称

> ID：14183930
> 
> 赞同：9
> 
> 时间：2013-01-06T16:05:25.813
> 
> 标签：python, os.walk

我有这样的文件结构：

```
d:\temp\random1\index.html
d:\temp\random2\index.html
d:\temp\random3\index.html 
```

我想获得在 python 中列出的路径。所以输出将是：

```
files = ['path': 'd:\temp\random1\index.html', 'directory': 'random1'] 
```

我正在使用这样的代码：

```
files = []
for dirpath, dirnames, filenames in os.walk('D:\\temp'):
    for fname in filenames:
        if fname.endswith(".md"):
            path = os.path.join(dirpath,fname)
            files.append({'path':path,'directory': dirpath}) 
```

但我不知道如何获取*目录*值。我用这段代码得到的是：

```
files = ['path': 'd:\temp\random1\index.html', 'directory': 'd:\temp\random1\'] 
```

如何在没有一些肮脏的黑客的情况下获取目录？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-06T16:13:04.057

尝试

```
dirname = dirpath.split(os.path.sep)[-1] 
```

# linux - 如何在 /etc/environment 中正确设置 JAVA_HOME

> ID：14183934
> 
> 赞同：14
> 
> 时间：2013-01-06T16:06:01.530
> 
> 标签：linux, bash, ubuntu, java-home

我正在尝试在系统范围内添加 JAVA_HOME 并将 JAVA_HOME/bin 添加到 PATH（Ubuntu 12.04）。如果我在 /etc/environment 的末尾添加以下 2 行，之后我将无法再登录。如果我将 2 行添加到 /etc/profile 一切正常。问题出在哪里？

```
export JAVA_HOME="/usr/lib/jvm/java-7-oracle"
export PATH="$PATH:$JAVA_HOME/bin" 
```

/etc/environment（第 1 行）中已经有以下行：

```
PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games" 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-04-30T09:23:42.660

写吧

```
JAVA_HOME="/usr/lib/jvm/java-7-oracle" 
```

在您的 /etc/environment 上，没有“导出”

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-06T16:15:24.857

`/etc/environment`应该包含一组作为键=值对给出的环境变量。它不是一个 shell 脚本，所以你不能使用其中的 shell 命令`export`。

# javascript - 如何从 Javascript 中的 URL 获取站点名称？

> ID：14183937
> 
> 赞同：0
> 
> 时间：2013-01-06T16:06:26.863
> 
> 标签：javascript, node.js, mongodb, serverside-javascript

有没有一种简单的方法可以从 URL 字符串中获取站点名称？

例子：

```
http://www.mysite.com/mypath/mypage -> www.mysite.com
http://mysite.com/mypath/mypage     -> mysite.com 
```

JS 代码在 mongodb CLI 端执行，**而不是**在浏览器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:11:50.513

试试这个：

```
url.href = "http://www.mysite.com/mypath/mypag";

url.protocol; // => "http:"
url.hostname; // => "example.com" // site name, you want 
```

具有页面的`window.document.location.href`url，并且`window.document.location.hostname`将具有站点名称。

所以，

```
console.log(window.document.location.hostname); // will log the sitename in the console 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:11:09.817

简单的。

```
window.location.hostname; //Domain name

$("title").text(); //Page name 
```

这也是

```
var loc = window.location;

var filename = loc.pathname.split("/");
filename = filename[pathname.length-1];

alert("Domain: "+loc.hostname);
alert("Filename: "+filename); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:04:56.077

您可以滥用锚点来从 URL 中获取所需的数据。:D

```
function getDomain(url) {
  var anchor = document.createElement('a');
  anchor.setAttribute('href', url);

  return anchor.hostname;
}

console.log(getDomain('http://www.mysite.com/mypath/mypage'));
console.log(getDomain('http://mysite.com/mypath/mypage')); 
```

[http://jsfiddle.net/Js76M/](http://jsfiddle.net/Js76M/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T18:42:35.260

这对我很有效：

urlString.split('/')[2]

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-06-28T16:06:55.660

我还需要从 url 获取域，以便在我的应用程序的参考部分仅显示域名。

我在这里找到了这个： [https ://developer.mozilla.org/en-US/docs/Web/API/URL/URL](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL)

> URL() 构造函数返回一个新创建的 URL 对象，表示由参数定义的 URL。
> 
> 如果给定的基本 URL 或生成的 URL 不是有效的 URL，则会引发 JavaScript TypeError 异常。

```
function getDomain(url) {
   return new window.URL(url).hostname;
} 
```

new URl(url) 返回具有以下属性的对象

```
hash: ""
host: "developer.mozilla.org"
hostname: "developer.mozilla.org"
href: "https://developer.mozilla.org/en-US/docs/Web/API/URL/URL"
origin: "https://developer.mozilla.org"
password: ""
pathname: "/en-US/docs/Web/API/URL/URL"
port: ""
protocol: "https:"
search: "" 
```

# c# - 将数字字符串扩展为单个数字

> ID：14183938
> 
> 赞同：3
> 
> 时间：2013-01-06T16:06:30.070
> 
> 标签：c#, string, numeric, expand

我正在开发一个接受数字字符串作为输入的 WinForms 应用程序。如果我的用户正在输入一个连续的数字范围，他/她可能会使用这样的速记符号来表示该范围：

```
12[3-5]5550[000-100] 
```

使用该示例，我需要将该字符串扩展为它包含的整个数字范围，如下所示：

```
1235550000
1235550001
1235550002
..........
1235550100

1245550000
1245550001
1245550002
..........
1245550100

1255550000
1255550001
1255550002
..........
1255550100 
```

除 0-9 外，字符串将仅包含 [、- 和 ]，它们是用于表示范围的字符。作为将示例字符串扩展为单个数字的过程的一部分，我也想验证该字符串。例如，必须有相同数量的 [ 和 ] 字符。在括号内，范围中的第一个数字必须小于范围中的第二个数字。这些类型的东西。

是否存在执行这种字符串操作的现有模式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T16:52:45.167

.net 中没有任何内置库可供您使用。考虑到您还需要验证，您的任务非常复杂。我创建了一个基于您的初始输入生成字符串的小型解决方案。请注意，这不是生产代码，我省略了一些检查。该代码仅显示了如何完成它的一种可能方式，并且可以接受批评。`Token`表示字符串的每个逻辑部分，在您的情况下是文字或范围说明符。

```
class Token
{
    public string Value { get; set; }

    public IEnumerable<string> GetAllValues()
    {
        if(IsRange(Value))
        {
            var rangeValues = Value.Split(new[] {'[', '-', ']'}, StringSplitOptions.RemoveEmptyEntries);
            //numeric format defines minimal string length. [01-10] will have numericFormat = "{0:00}"
            string numericFormat = CreateNumericFormat(rangeValues.ElementAt(0).Length);

            int[] ranges = rangeValues.Select(val => int.Parse(val)).ToArray();

            foreach (var val in GetRange(ranges[0], ranges[1]))
                yield return string.Format(numericFormat, val);
        }
        else
        {
            yield return Value;
        }
    }
    //validation is ommited
    private bool IsRange(string val)
    {
        return Value.Contains("-");
    }
    private string CreateNumericFormat(int minimalLength)
    {
        return "{0:"+new string('0', minimalLength)+"}";
    }
    private IEnumerable<int> GetRange(int minValue, int maxValue)
    {
        return Enumerable.Range(minValue, maxValue - minValue + 1);
    }
} 
```

现在使用非常简单：

```
var initial = "12[05-10]3[008-010]";

var regularExp = @"\[\s*\d+\s*-\s*\d+\s*\]|\d+";

List<Token> tokens = new List<Token>();

foreach (Match match in Regex.Matches(initial , regularExp ))
{
    tokens.Add(new Token {Value = match.Value});
}

IEnumerable<string> result = new []{""};//empty source for start

foreach(var token in tokens)
{
    result = from v1 in result
             from v2 in token.GetAllValues()
             select v1 + v2;
}
//Dump is LinqPad specific call
result.Dump(); 
```

印刷：

```
12053008 
12053009 
12053010 
12063008 
12063009 
12063010 
12073008 
12073009 
12073010 
12083008 
12083009 
12083010 
12093008 
12093009 
12093010 
12103008 
12103009 
12103010 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T16:55:23.080

解决方案可以分为两部分：

*   **提取将保持不变的输入部分：** 您可以使用[Regex.Split()](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)实现此目的，并为匹配模式提供类似“[[0-9]+-[0-9]+]”的内容。这实际上会将您的输入拆分为仅包含常量的数组。*   **执行相关范围的字典枚举**。您可以查看一些代码示例：[lexicographic permutation of the digits](http://www.mathblog.dk/project-euler-24-millionth-lexicographic-permutation/)

不幸的是，似乎没有任何直接的方法可以解决这个问题，您需要自己的逻辑

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T16:18:40.613

> 是否存在执行这种字符串操作的现有模式？

不，没有。

您将需要为此构建自己的解析器 - 它需要考虑范围在字符串中的位置，并且您需要决定如何表示此结构 - 取决于使用情况（如果整数列表可能不起作用列表太长并且值不能用`int`or表示`long`）。

# c++ - C++构造函数根据参数类型调用另一个构造函数

> ID：14183939
> 
> 赞同：6
> 
> 时间：2013-01-06T16:06:35.157
> 
> 标签：c++

我有这门课

```
class XXX {
    public:
        XXX(struct yyy);
        XXX(std::string);
    private:
        struct xxx data;
}; 
```

第一个构造函数（使用结构）很容易实现。第二个我可以以特定格式分割一个字符串，解析并提取相同的结构。

我的问题是，在java中我可以做这样的事情：

```
XXX::XXX(std::string str) {

   struct yyy data;
   // do stuff with string and extract data
   this(data);
} 
```

用于`this(params)`调用另一个构造函数。在这种情况下，我可以做类似的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T16:09:13.670

您正在寻找的术语是“[*构造函数委托*](http://en.wikipedia.org/wiki/C%2B%2B11#Object_construction_improvement)”（或更一般地说，“*链式构造函数*”）。在 C++11 之前，这些在 C++ 中不存在。但语法就像调用基类构造函数一样：

```
class Foo {
public:
    Foo(int x) : Foo() {
        /* Specific construction goes here */
    }
    Foo(string x) : Foo() {
        /* Specific construction goes here */
    }
private:
    Foo() { /* Common construction goes here */ }
}; 
```

如果你不使用 C++11，你能做的最好的事情就是定义一个私有帮助函数来处理所有构造函数共有的东西（尽管这对于你想放在初始化列表中的东西来说很烦人） . 例如：

```
class Foo {
public:
    Foo(int x) {
        /* Specific construction goes here */
        ctor_helper();
    }
    Foo(string x) {
        /* Specific construction goes here */
        ctor_helper();
    }
private:
    void ctor_helper() { /* Common "construction" goes here */ }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T16:09:07.147

是的。在 C++11 中，您可以做到这一点。它被称为[**构造函数委托**](http://en.wikipedia.org/wiki/C%2B%2B11#Object_construction_improvement)。

```
struct A
{
   A(int a) { /* code */ }

   A() : A(100)  //delegate to the other constructor
   {
   }
}; 
```

# mysql - SQL：数据库记录中的撇号，但不在查询字符串中

> ID：14183940
> 
> 赞同：1
> 
> 时间：2013-01-06T16:06:37.567
> 
> 标签：mysql, sql

我有一个书名数据库。

我根据页面 URL 中的查询字符串查询数据库。

例如，如果有一本书名为“Mike's Book”，则查询字符串将为“mikes-book”。在将变量传递给 MYSQL 查询之前，我执行了一些基本的清理工作，将“mikes-book”变成了“Mikes Book”。

查询失败，因为查询字符串不包含与数据库记录匹配的撇号。

现在，我正在使用这个查询：

```
"SELECT title FROM books WHERE title LIKE '$query_title'" 
```

如果 DB 记录中不存在撇号，则正确返回记录。但是当 DB 记录中有撇号时，返回 0 个结果。

关于我可以在这里做什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:10:28.523

出现问题的原因是您尝试反转有损转换（在创建 URL 时显然已删除 's）。解决此问题的一种简单方法是将转换后的值也保留在数据库中，然后查询该值（mikes-book）。更新名称时，也会同时更新转换后的值。

您还可以在 SQL 中重新实现转换函数并将每一行与转换后的值进行比较，但我强烈建议避免这样做。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:17:09.183

一种解决方案是使用`SOUNDEX`，但我认为这是一项昂贵的操作。

# http - 端口和进程

> ID：14183942
> 
> 赞同：1
> 
> 时间：2013-01-06T16:07:01.963
> 
> 标签：http, networking, tcp

每个进程的端口号是否唯一？是 1:1 的关系吗？如果不是，系统如何知道与流程传递响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:46:46.387

操作系统使用 4 个参数来识别 TCP 连接端点：

**本地端口，本地地址，远程端口，远程地址**

所以本地端口不需要是唯一的。它对于监听（即服务器）套接字通常是唯一的，因为监听套接字通常具有未绑定的远程端口和远程地址。但即使对于侦听套接字，如果一台机器有多个 IP 地址，您可以让一个进程在给定端口和一个 IP 地址上侦听，而其他一些进程在同一端口上侦听不同的 IP 地址。

对于连接的套接字，所有 4 个值都是绑定的，因此许多同时连接可以使用同一个本地端口。多亏了这一点，单台机器上打开的连接数不限于 64K，这将是相当有限的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:08:46.943

每个系统的端口号是唯一的：两个进程不能[重新]打开相同的端口号。

# php - 为 PHP 中的选定选项添加“选定”属性

> ID：14183945
> 
> 赞同：2
> 
> 时间：2013-01-06T16:07:20.863
> 
> 标签：php, jquery

我正在创建我的页面构建器，但选择框几乎没有问题。

**这就是我通过 jQuery 创建选择框的方式**

```
 var item_opts = '<select>'
        + '<option value="red">Red</option>'
        + '<option value="green">Green</option>'
        + '<option value="blue">Blue</option>'
        + '<option value="yellow">Yellow</option>'
    + '</select>'

$('.items_options').append(item_opts); 
```

**这就是我在 PHP 中的称呼**

```
<select>
  <?php if ( $pb_item['message_color'] == "red" ) { ?>
    <option selected="selected" value="red">Red</option>
    <option value="green">Green</option>
    <option value="blue">Blue</option>
    <option value="yellow">Yellow</option>
  <?php } elseif ( $pb_item['message_color'] == "green" ) { ?>
    <option value="red">Red</option>
    <option selected="selected" value="green">Green</option>
    <option value="blue">Blue</option>
    <option value="yellow">Yellow</option>
  <?php } elseif ( $pb_item['message_color'] == "blue" ) { ?>
    <option value="red">Red</option>
    <option value="green">Green</option>
    <option selected="selected" value="blue">Blue</option>
    <option value="yellow">Yellow</option>
  <?php } else { ?>
    <option value="red">Red</option>
    <option value="green">Green</option>
    <option value="blue">Blue</option>
    <option selected="selected" value="yellow">Yellow</option>
  <?php } ?>                      
</select> 
```

有没有比我更好的解决方案如何将参数“选定”添加到选定选项？

谢谢你的时间和你的建议:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T16:10:57.273

是的，有更好的解决方案

```
<select>
    <option <? ($pb_item['message_color'] == 'red'?'selected="selected"') ?> value="red">Red</option>
    <option <? ($pb_item['message_color'] == 'green'?'selected="selected"') ?> value="green">Green</option>
    <option <? ($pb_item['message_color'] == 'blue'?'selected="selected"') ?> value="blue">Blue</option>
    <option <? ($pb_item['message_color'] == 'yellow'?'selected="selected"') ?> value="yellow">Yellow</option>                   
</select> 
```

即使您可以通过 for 循环列出选项，例如：

```
$colors = array('blue', 'red', ..);
foreach($colors as $color) {
    echo "<option ".($pb_item['message_color'] == $color?'selected="selected"')."value='$color'>" . ucwords($color) . "</option>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-30T12:41:48.207

那些难以理解@vlcekmi3 以前选择的答案的人在这里有一些其他简单而肮脏的解释。

```
$colors = array(
    1 => 'blue', 
    2 => 'red', ..); //init your array with key & value

foreach($colors as $key => $color) { // a loop 

    //print <option value="red"
    echo "<option value=".$key; 

    //print selected if your selected value matched -
    //please check before you echo 'selected' add a space before that
    //you will thank me later
    if($pb_item['message_color'] == $color){ echo " selected"; } 

    // close option with print '>'
    echo '>'; 

    // print your color name
    echo $color; 

    //print </option>
    echo "</option>"; 

} 
```

我在这里解释的可能是一种肮脏的方式，但此代码将帮助您了解如何将价值返回到您的视图中。

# mysql - 在mysql中对不同类型的数据类型使用不同的表

> ID：14183946
> 
> 赞同：0
> 
> 时间：2013-01-06T16:07:22.937
> 
> 标签：mysql, database-design, relational-database, database-schema, sqldatatypes

我正在为成员管理创建一个数据库。我们有元素（用户），这些用户有属性（例如，姓氏、姓氏、出生日期）。现在，名称是文本，但出生日期是日期，所以我想将其存储在数据类型为“日期”的列中。因为用户的属性可能不同，所以我想要一个带有元素的表格、一个带有属性的表格以及一个将两者链接在一起的表格。但是，为了能够使用不同类型的数据类型，对于每种数据类型，我必须创建一个不同的表。你会得到这样的东西：

```
Table: Users
------------
user
1
2

table: properties
---------------------------------
property  propertyName   datatype
1         surname        text
2         lastname       text
3         date of birth  date

Table: PropertiesString
---------------------------
property   value
1          John
2          Tim
3          Smith
4          Jones

Table: PropertiesDate
-------------------------
property   value
1          04-11-1966
2          07-08-1971

table: userPropertiesLinked
-----------------------------
user   property propertyValue
1      1        1
1      2        3
2      1        2
2      2        4
2      3        1
1      3        2 
```

综上所述，我们有 2 个用户，John Smith (04-11-1966) 和 Tim Jones (07-08-1971)。

我的问题是：这是最好的方法吗？这个数据库的设置方式非常适合搜索，人们可以有多个属性，属性不会存储两次等。我遇到的问题是，一个表中的“属性”1 是 John，而在其他 04-11-1966。有没有办法使这些值唯一并自动递增，即使它们位于不同的表中？有没有办法将它们放在一个表中，而不会冒双重信息或空单元格的风险？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:59:28.550

我认为您可以考虑将外键与两个表连接但值相同，如下所示：

```
constraint PropertiesString_fk foreign key (value) references  PropertiesDate(or other table) value. 
```

至于自动递增，你可以这样想：

```
ALTER TABLE tablename DROP id;
ALTER TABLE tablename ADD id INT NOT NULL PRIMARY KEY AUTO_INCREMENT FIRST 
```

至于如何将它们放在一个表中，您可以使用命令“select”和“distinct”

# java - 在java中制作非均匀概率分布

> ID：14183948
> 
> 赞同：-1
> 
> 时间：2013-01-06T16:07:29.950
> 
> 标签：java, probability, non-uniform-distribution

我在 java 类中总共没有元素（比如 500 个），这将生成 3 个 diff 类型（A 型、B 型和 C 型）对象的群体，概率为 A=0.3，B=0.2，C =0.5。我找不到一个简单易用的解决方案，任何人都可以帮助我提供示例代码或一些参考

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:13:34.820

对于每个元素，生成一个介于 0 和 9 之间的随机整数 r。

```
If 0 <= r < 3 then Type A.
If 3 <= r < 5 then Type B.
If 5 <= r < 10 then Type C. 
```

# java - EventDispatchThread.run() 行：eclipse 中不可用错误

> ID：14183951
> 
> 赞同：3
> 
> 时间：2013-01-06T16:07:34.470
> 
> 标签：java, eclipse, swing, layout-manager

我是 Swing 新手，正在 Eclipse 中制作一个非常基本的事件处理程序。这是我写的代码：

```
public class SwingDemo2 {

JLabel jl;

public SwingDemo2() {
    JFrame jfr = new JFrame("Swing Event Handling");
    jfr.setSize(250, 100);
    jfr.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    jl = new JLabel();
    jl.setVisible(false);

    JButton jb1 = new JButton("OK");
    jb1.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
            jl.setText("You Pressed OK");
            jl.setVisible(true);
        }
    });

    JButton jb2 = new JButton("Reset");
    jb2.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
            jl.setText("You Pressed Reset");
            jl.setVisible(true);
        }
    });

    jfr.setLayout(new BorderLayout());
    jfr.add(jl, SwingConstants.NORTH);
    jfr.add(jb1, SwingConstants.EAST);
    jfr.add(jb2, SwingConstants.WEST);
    jfr.setVisible(true);
}

public static void main(String[] args) {
    // TODO Auto-generated method stub
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new SwingDemo2();
        }
    });
}

} 
```

Eclipse 提示我打开调试透视图，他向我显示错误：
`Thread [AWT-EventQueue-0] (Suspended (exception IllegalArgumentException))` `EventDispatchThread.run() line: not available [local variables unavailable]`

当我使用`FlowLayout`而不是`BorderLayout`.

我一直在尝试在门户网站上查找有关错误的信息，我遇到了[这个](https://stackoverflow.com/questions/5080912/java-error-eventdispatchthread-run-line-not-available-local-variables-unava)类似的问题。答案是在不解释问题的情况下更改一堆设置（这也无济于事）。请解释错误，以便我确保不再重复。提前谢谢！

注意：更新了错误信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T16:12:10.283

尝试使用

```
jfr.add(jl, BorderLayout.PAGE_START);
jfr.add(jb1, BorderLayout.LINE_START);
jfr.add(jb2, BorderLayout.LINE_END); 
```

Java Docs 的重要说明：

```
Before JDK release 1.4, the preferred names for the various areas were different, 
ranging from points of the compass (for example, BorderLayout.NORTH for the 
top area) to wordier versions of the constants we use in our examples. 
The constants our examples use are preferred because they are standard and 
enable programs to adjust to languages that have different orientations. 
```

有关 BorderLayout 的更多信息，请参阅[如何使用 BorderLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)

要真正知道为什么会出现该错误，我只是在代码中编写了这两行

```
System.out.println("SwingConstants.NORTH : " + SwingConstants.NORTH);
System.out.println("BorderLayout.PAGE_START : " + BorderLayout.PAGE_START); 
```

输出如下：

```
SwingConstants.NORTH : 1
BorderLayout.PAGE_START : First 
```

查看输出，您可以理解使用`SwingContants`over 的值有什么问题`BorderLayout Constraints`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T16:12:56.973

*   使用 `BorderLayout`代替`SwingConstant`s，`jfr.add(jl, BorderLayout.NORTH);`

*   `SwingConstants`为`TextLayout`, 不为`JComponents layout`

# windows - WinVerifyTrust 的安全性，或验证锁定文件的信任

> ID：14183952
> 
> 赞同：1
> 
> 时间：2013-01-06T16:07:43.877
> 
> 标签：windows, authenticode

我有一个加载外部 DLL（一种插件系统）的进​​程，我想验证加载的 DLL 是否使用 Authenticode 正确签名。在仔细[阅读 WinVerifyTrust](http://msdn.microsoft.com/en-us/library/windows/desktop/aa388208%28v=vs.85%29.aspx)和[LoadLibrary](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)（和朋友）的文档后，让我印象深刻的一件事是这两个操作都从文件路径到 DLL 工作。

在我看来，利用它来使我的程序加载一个未签名的 DLL 是非常可行的，方法是向程序提供一个签名的 DLL，导致成功并在调用执行`WinVerifyTrust()`之前立即用未签名的代码替换 DLL （这是一个`LoadLibrary()`硬竞争条件，但如果攻击者对文件系统有一些控制权，例如在使用网络文件系统时，它可以得到更好的控制）。

的 API`WinVerifyTrust()`似乎表明我可以在打开文件的句柄上运行验证过程。如果我可以打开文件，验证打开的文件句柄，然后从同一个文件句柄加载库 - 那么我将是安全的。不幸的是`LoadLibraryEx()`——这将是我实现这一点的主要嫌疑人——将其`hFile`参数记录为“保留供将来使用”。

我的下一个想法是将文件内容加载到内存中，然后从内存中加载 DLL，我找到了执行此操作的库[MemoryModule](https://github.com/fancycode/MemoryModule)。我想知道是否有一些现有的实现已经完成并结合了所有这些，并允许开发人员安全地验证和加载 DLL，这意味着我不必自己编写和维护它。

有什么建议么？

# c# - 在无标识号列中插入数据

> ID：14183961
> 
> 赞同：0
> 
> 时间：2013-01-06T16:08:38.153
> 
> 标签：c#, entity-framework-4.1

我的数据库中有一个表。

此表有一个名为 A 的列，该列不是实体或自动编号、唯一键或...

我使用 Entity Framework 4.1 从我的数据库创建了一个模型。

我的代码

```
 using (var contex = new testEntities())
        {
            Table_1 t = new Table_1();
            t.A = 1;
            contex.Table_1.Add(t);
            contex.SaveChanges();
        } 
```

我不想在我的表中使用身份号码或索引。当我想在其中插入一行时，它给了我这个错误：

```
Unable to update the EntitySet 'Table_1' because it has a DefiningQuery and no 
<InsertFunction> element exists in the <ModificationFunctionMapping> element to
support the current operation. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:26:03.367

您要么必须为表提供主键（您似乎不想这样做），要么需要提供一个函数来告诉 Entity Framework 如何将数据插入数据库。

我强烈建议你在你的表上放一个主键，除非你有很好的理由不这样做，而且在我这些年里，我想不出有很多例子是我想要一个没有主键的表。

如果您根本不需要主键，那么您可能会发现这篇文章对使用存储过程将数据插入数据库很有用：http: [//msdn.microsoft.com/en-us/data/gg699321.aspx](http://msdn.microsoft.com/en-us/data/gg699321.aspx)

# java - 在 BoxLayout 中居中 JButton，JTextField 填充

> ID：14183963
> 
> 赞同：1
> 
> 时间：2013-01-06T16:08:45.163
> 
> 标签：java, swing, jbutton, jtextfield, boxlayout

我已经`JDialog`为我的应用程序创建了简单的获取初始数据。元素 ( `JLabel`,`JTextField`和)在 . 内部`JButton`排列。（代码在最后）。到目前为止，它看起来像这样：`BoxLayout``BorderLayout`

![目前的安排](../Images/83c7f5a8aa2c57a7a0160c424100b21f.png)

我有两个问题：

1.  我想`JButton`在它的行中居中。我试过`startBtn.setAlignmentX(Component.CENTER_ALIGNMENT);`了，但它不能正常工作，出现混乱。

2.  我想添加一些左/右填充到`TextField`. [本主题](https://stackoverflow.com/questions/2286881/jtextarea-and-jtextfield-internal-padding-on-text)的第一个解决方案工作正常，但其他元素向右左填充值移动。

任何人都可以提示如何放置它吗？我是 Java 新手，不知道。

这是我`InitDialog`班级的代码：

```
public class InitDialog extends JDialog {

    JTextField dataTF;
    JButton startBtn;

    public InitDialog(JFrame owner) {

        super(owner, "Rozpocznij test", Dialog.ModalityType.DOCUMENT_MODAL);
        initUI();

    }

    public final void initUI() {

        System.out.println("InitDialog::initUI");

        JPanel outer = new JPanel(new BorderLayout());
        JPanel inner = new JPanel();

        outer.setBorder(new EmptyBorder(new Insets(20, 20, 20, 20)));

        JLabel msg = new JLabel("<html>Podaj ilości liczb w zestawach testowych<br />(przedzielone średnikiem):");
        inner.add(msg);
        inner.add(Box.createVerticalStrut(15));

        dataTF = new JTextField();
        dataTF.setBorder(null);
        dataTF.setText("50; 100; 200");
        inner.add(dataTF);
        inner.add(Box.createVerticalStrut(15));

        startBtn = new JButton("Rozpocznij test");
        inner.add(startBtn);

        inner.setLayout(new BoxLayout(inner, BoxLayout.Y_AXIS));
        outer.add(inner);
        add(outer);

        setSize(300, 180);

        //setDefaultCloseOperation(DISPOSE_ON_CLOSE);

        addWindowListener(new WindowAdapter() {
            @Override public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });

        setResizable(false);
        setLocationRelativeTo(getRootPane());

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:40:06.980

BoxLayout 对齐方式不是你想的那样。

为了得到你想要的，这是你需要的线

```
msg.setAlignmentX(Component.CENTER_ALIGNMENT); 
```

# php - php - 如何获取 Windows 的服务器时区？

> ID：14183973
> 
> 赞同：-1
> 
> 时间：2013-01-06T16:09:13.890
> 
> 标签：php, windows, timezone

如何使用 PHP 在 Windows 服务器上获取服务器时区？

对于 Linux：

```
$systemTimeZone = system('date +%Z'); 
```

*尼克斯系统：

```
$systemTimeZone = popen("date +%Z"); 
```

视窗：

```
$systemTimeZone = ??? 
```

greez & thx, 天空...

编辑：我知道 php 函数，如：

```
date_default_timezone_get()
date('T')
\DateTime::timezone 
```

但是 PHP 中的所有这些内置函数都引用了 php.ini 中的设置。我想知道操作系统中真正使用的时区。

我尝试使用 Windows 命令行工具

```
systeminfo 
```

但这会减慢调用和解析的速度。我有 testet 的另一个命令行工具是：

```
tzutil /g 
```

这不是我想要的时区格式，就我而言，我得到了这个：

```
$:> tzutil /g
W. Europe Standard Time 
```

对我有什么其他想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T16:11:38.540

内置函数呢？

[http://php.net/manual/en/function.date-default-timezone-get.php](http://php.net/manual/en/function.date-default-timezone-get.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-05T17:10:11.933

我刚刚遇到了同样的错误，并且没有找到比使用自制映射更好的解决方案。对于 Windows，我使用了这个：

```
// this array can be filled up with whatever you need
$timezones = array(
      'GMT' => 'Europe/London'
    , '0' => 'Europe/London'
    , '1' => 'Europe/London'
    , 'GMT Standard Time' => 'Europe/London'
    , '2' => 'Europe/Berlin'
    , 'W. Europe Standard Time' => 'Europe/Berlin'
);

// getting the timezone    
$timezone = exec('tzutil /g');

// and setting it accordingly
if( array_key_exists($timezone, $timezones)) {      
    echo("> timezone identified as " . $timezones[$timezone] . "\n");
    date_default_timezone_set($timezones[$timezone]);
} else {
    die("Unknown Timezone: " . $timezone);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:11:52.750

这将告诉您服务器时区缩写：

```
$systemTimeZone = date("T");
echo $systemTimeZone; 
```

例如 EST、MDT ...

# objective-c - 是：[self.window setRootViewController:top]; 真的需要吗？（iOS6 自动旋转）

> ID：14183979
> 
> 赞同：0
> 
> 时间：2013-01-06T16:10:12.063
> 
> 标签：objective-c, ios6

是：`[self.window setRootViewController:top];`真的需要吗？我正在使用 ECSlidingViewController 并且无法让它与 iOS6 自动旋转一起使用。在 ECSlidingViewController 类中，这是它添加子视图的方式：

```
[self.view addSubview: _topViewController.view]; 
```

我如何启用自动旋转方法，完全卡住了！？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:18:28.000

您要么需要设置窗口的根视图控制器，要么向其添加控制器的子视图。除非您尝试支持 iOS 3 或更早版本，否则您应该使用前者。所以简而言之，是的，`[self.window setRootViewController:top];`是需要的。

要为子控制器启用自动旋转，您需要使用子视图控制器方法，如下所示：

```
[_topViewController willMoveToParentViewController:self];
[self addChildViewController:_topViewController];
[self.view addSubview: _topViewController.view];
[_topViewController didMoveToParentViewController:self]; 
```

您可能还需要覆盖`-[shouldAutomaticallyForwardRotationMethods]`，但由于默认实现返回`YES`您可能不需要。

# mongodb - ram中使用的mongod清理内存

> ID：14183987
> 
> 赞同：0
> 
> 时间：2013-01-06T16:11:16.287
> 
> 标签：mongodb, ram, bigdata

我的 mongodb 中有大量数据。它充满了推文（50 GB），我的 Ram 是 8 GB。查询时它会检索所有推文，mongodb 开始填充内存，当它达到 8 GB 时，它开始将文件移动到磁盘。这是它变得非常慢wwww的部分。所以我将查询从跳过并开始使用索引更改。现在我有索引，我只向我的程序查询 8GB，保存文件中使用的最后一条推文的 id，程序停止。然后重新启动程序，它会从文件中获取推文的 id。但是 mogod 服务器仍然占用了前 8GB 的​​内存，将不再使用，因为我有最后一个索引。如何在不重新启动的情况下清理 mongo db 服务器的内存？

（跑赢）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:34:15.307

我对你这里的逻辑有点困惑。

> 所以我将查询从跳过并开始使用索引更改。现在我有索引，我只向我的程序查询 8GB，保存文件中使用的最后一条推文的 id，程序停止。

使用范围查询将无助于您必须分页的数据量（实际上它可能会因为索引而恶化），它只是通过使用索引进行大量跳过（如 42K+ 行跳过）使查询在服务器端更快。如果你和那个一样，`skip()`但是在索引中（没有覆盖的索引），那么你仍然在完全相同的分页中。

由于内存映射和您的工作集，它很慢。您拥有比 RAM 更多的数据，不仅如此，而且您使用的数据比 RAM 还多，因此您可能一直处于页面错误状态。

重新启动程序不会解决这个问题，也不会因为您的查询而清除其数据操作系统端（使用重新启动或特定命令）。您可能需要：

*   考虑您的查询，以便您的工作集更符合您的记忆
*   或者将您的数据分片到多台服务器上，这样您就不必建立您的主服务器
*   或获得更大的主服务器（moar RAM !!!!!!）

### 编辑

你的操作系统的 LRU 应该已经换出了旧数据，因为 MongoDB 正在使用其完全分配的批次，这意味着如果没有交换 8GB，那是因为你的工作集占用了全部 8GB（很可能在结尾）。

# android - 单击复选框更新列表项内容

> ID：14183988
> 
> 赞同：0
> 
> 时间：2013-01-06T16:11:23.530
> 
> 标签：android, android-listview

我有一个带有项目布局的自定义列表视图，左侧有一个复选框和 4 个文本视图，很像 astrid 任务管理器。 ![在此处输入图像描述](../Images/3dfcf0bcd3f8ee3b38fe425cbb6fb7d7.png)

我打算做的是在单击复选框时，文本视图必须更新它们的值。起初，我的问题是，在位置 1 选中复选框时，会在滚动时选中末尾或其他地方的复选框。在寻找解决方案时，我开始了解listview中的视图回收。我应用了像 viewholder 这样的概念，现在我能够保持复选框的状态。但是，在复选框单击时，我更改了文本视图并且更改不会持续存在，这意味着任何随机电视也显示相同的更改。

我在我的适配器中应用了一个复选框 onclicklistener。任何想法如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T10:15:16.987

您将希望在项目数据中而不是在视图持有者中保留项目的状态。视图持有者只是视图的一种便利，假设您回收视图，它会在不同时间显示许多不同的项目。在数据绑定期间，您需要绑定显示项目所需的所有状态，以避免随机数据出现在另一个列表项的视图中。

```
public class MyListAdapter extends BaseAdapter {

    // ....

    @Override
    View getView(final int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if (view == null) {
            view = inflate(R.layout.my_list_item_layout, parent, false);

            // View holder just prevents having to look up these values 
            // every time the view is reused.
            MyViewHolder holder = new MyViewHolder();
            holder.checkbox = (CheckBox) view.findViewById(R.id.check_box);
            holder.textview = (TextView) view.findViewById(R.id.text_view);
            view.setTag(holder);
        }

        final MyViewHolder holder = (MyViewHolder) view.getTag();
        final MyData data = (MyData) getItem(position);
        holder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                data.savedCheckboxState = isChecked;
                // now tell the view to rebind the data
                notifyDataSetChanged();
            }
        });

        holder.checkbox.setChecked(data.savedCheckboxState);
        holder.textview.setText(String.valueOf(data.savedCheckboxState));
        return view;
    }

    private static class MyViewHolder {
        CheckBox checkbox;
        TextView textview;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T10:34:18.343

您可以在这里参考我的完整代码，您可以做的是，将复选框状态存储在布尔数组中，然后您就不会遇到这个问题.....

[Android复选框多选问题](https://stackoverflow.com/questions/18673108/android-checkbox-multiselected-issue/18673407#18673407)

# c - 如何在结构数组中设置常量值？

> ID：14183999
> 
> 赞同：3
> 
> 时间：2013-01-06T16:11:59.437
> 
> 标签：c, arrays, structure

```
typedef struct all{
  int x;
  int ast[5];
}ALL;

ALL x[5];

int main(void){
  ALL y[5];
  // ...
} 
```

我将如何设置一个常量值，`ast[5]`以便所有数组变量都具有相同的值`ast[]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:17:36.013

```
typedef struct all {
  int x;
  int ast[5];
} ALL;

ALL x[5];
ALL constast = {0, {1, 2, 3, 4, 5}};

int main(void) {
  ALL y[5] = {[0] = constast, [1] = constast, [2] = constast,
              [3] = constast, [4] = constast};
  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:35:13.787

我从标签中假设问题是针对 C 而不是 C++。

您可以有一个函数来获取结构数组的大小并返回指向数组开头的指针，如下所示：

```
typedef struct my_struct{
    int i;
    int var[5];
} my_struct;

my_struct* init_my_struct(int size){
    my_struct *ptr = malloc(size * sizeof(struct));
    for(my_struct *i = ptr; (i - ptr) < size; i++)
        i->var = // whatever value you want to assign to it
            // or copy a static value to the the array element
} 
```

现在您可以通过这种方式在代码中使用它：

```
my_struct *my_struct_ptr = init_my_struct(5); // values inited as required 
```

这种方法的缺点是您正在从声明数组转向使用堆上的内存。
此外，您不能阻止某人创建特定大小的数组并以您想要的方式使用它并为其分配值。