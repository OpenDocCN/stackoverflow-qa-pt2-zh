# StackOverflow 问答 13140000-13140999

# delphi - Delphi 生成的 EWS SOAP 请求中的“属性未声明”错误

> ID：13140003
> 
> 赞同：1
> 
> 时间：2012-10-30T13:25:28.950
> 
> 标签：delphi, soap, delphi-xe2, exchangewebservices

[这是在EWS](http://msdn.microsoft.com/en-us/library/bb204119%28EXCHG.80%29.aspx)中调用 ResolveNames 的工作示例代码，我在从 Exchange Server 检索 WDSL 后使用[SoapUI生成：](http://www.soapui.org)

```
<?xml version="1.0"?>
<soapenv:Envelope 
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
  xmlns:typ="http://schemas.microsoft.com/exchange/services/2006/types" 
  xmlns:mes="http://schemas.microsoft.com/exchange/services/2006/messages">
<soapenv:Header><typ:RequestServerVersion Version="Exchange2010"/></soapenv:Header>
<soapenv:Body>
  <mes:ResolveNames ReturnFullContactData="1" SearchScope="ActiveDirectoryContacts">
    <mes:UnresolvedEntry>deve</mes:UnresolvedEntry>
  </mes:ResolveNames>
</soapenv:Body>
</soapenv:Envelope> 
```

这是我使用的裸 Delphi XE2 代码：

```
procedure TFrmTestEWS.BtnConnectClick(Sender: TObject);
var
   lESB        : ExchangeServicePortType;
   lResNames   : ResolveNames;
   lReqVersion : RequestServerVersion;
   lResResult  : ResolveNamesResponse;
   lServerVer  : ServerVersionInfo;
   lUnresolved : String;
begin
   lServerVer  := ServerVersionInfo.Create;
   lResNames   := ResolveNames.Create;
   lReqVersion := RequestServerVersion.Create;
   lUnresolved := 'Deve';
   with lResNames do
   begin
      ReturnFullContactData := true;
      SearchScope           := ResolveNamesSearchScopeType.ActiveDirectoryContacts;  // Scoped enums is on!
      ParentFolderIds       := nil;
      UnresolvedEntry       := lUnresolved;
   end;
   lReqVersion.Version := ExchangeVersionType.Exchange2010;
   lESB := (HTTPRIO1 as ExchangeServicePortType);
   lESB.ResolveNames(lResNames,
                     nil,              // Impersonation
                     nil,              // MailboxCulture
                     lReqVersion,
                     lResResult,
                     lServerVer); 
```

它生成：

```
<?xml version="1.0"?>
<SOAP-ENV:Envelope 
  xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
  xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<SOAP-ENV:Body xmlns:NS1="http://schemas.microsoft.com/exchange/services/2006/types">
  <ResolveNames xmlns="http://schemas.microsoft.com/exchange/services/2006/messages" ReturnFullContactData="true" NS1:SearchScope="ActiveDirectoryContacts">
    <UnresolvedEntry>deve</UnresolvedEntry>
  </ResolveNames>
  <MailboxCulture xsi:nil="true"/>
  <ExchangeImpersonation xsi:nil="true"/>
  <NS1:RequestServerVersion Version="Exchange2010"/>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我得到的错误：

请求模式验证失败：未声明“ [http://schemas.microsoft.com/exchange/services/2006/types:SearchScope ”属性。](http://schemas.microsoft.com/exchange/services/2006/types:SearchScope)

SearchScope 是 messages.xsd 中定义的属性：

```
<!-- ResolveNames request -->

<xs:complexType name="ResolveNamesType">
    <xs:complexContent>
        <xs:extension base="m:BaseRequestType">
            <xs:sequence>
                <xs:element name="ParentFolderIds" type="t:NonEmptyArrayOfBaseFolderIdsType" minOccurs="0"/>
                <xs:element name="UnresolvedEntry" type="t:NonEmptyStringType"/>
            </xs:sequence>
            <xs:attribute name="ReturnFullContactData" type="xs:boolean" use="required"/>
            <xs:attribute name="SearchScope" type="t:ResolveNamesSearchScopeType" default="ActiveDirectoryContacts"/>
        </xs:extension>
    </xs:complexContent>
</xs:complexType>

<xs:element name="ResolveNames" type="m:ResolveNamesType"/> 
```

在 types.xsd 中：

```
<!-- ResolveNames request -->

<xs:simpleType name="ResolveNamesSearchScopeType">
  <xs:restriction base="xs:string">
    <xs:enumeration value="ActiveDirectory"/>
    <xs:enumeration value="ActiveDirectoryContacts"/>
    <xs:enumeration value="Contacts"/>
    <xs:enumeration value="ContactsActiveDirectory"/>
  </xs:restriction>
</xs:simpleType> 
```

我认为 NS1:SearchScope="ActiveDirectoryContacts" 是不正确的，但是离开 NS1: out 会给出同样的错误。
也许将类型和消息的 Exchange xmlns 规范推迟到 SOAP-ENV:Body 是错误的原因？
此外，不在 SOAP_ENV:Header 中的 NS1:RequestServerVersion Version="Exchange2010" 看起来很可疑。

我查看了[一些](https://stackoverflow.com/questions/12176625/ews-the-required-attribute-traversal-is-missing) [谷歌结果](http://www.delphigroups.info/2/5/344800.html)，但无法让它工作。

基本上我的问题是：
如何在生成的代码中移动标签或 xmlns 属性直到它工作，而不必自己构建整个 SOAP？
如果这是不可能的，那么最好的方法是什么，以便我仍然可以从导入的类型库中受益？（像[这样](https://stackoverflow.com/questions/1327151/soap-request-with-attribute)的东西？）

谢谢
简

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:41:42.593

我决定不尝试修复特定的 XML 标记，而是完全控制输出的 SOAP 内容：
我只是在 TStringStream 中构建 XML，然后在 HTTPRIO.BeforeExecute 中将 TStringStream 内容放入 SOAPStream。
安装SOAPUI[后](http://www.soapui.org)，我可以导入 WDSL，然后“手动”生成和测试所需的 SOAP 调用。完成这些后，我将它们移动到 Delphi 代码中。
这给了我一个优势，即仍然可以访问 WDSL 生成的代码来解析结果（无需深入研究返回的 XML）。

这是代码，它显示了旧方法（BtnConnectClick）和新方法（BtnAlternateClick）。

```
unit uTestEWS;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.ComCtrls, Vcl.ExtCtrls,TypInfo, WinAPI.WinInet,
  Soap.Rio, Soap.InvokeRegistry, Soap.SOAPHTTPClient, Soap.SOAPHTTPTrans,
  services { = The file generated from the WDSL };

type
  TFrmTestEWS = class(TForm)
    HTTPRIO: THTTPRIO;
    Panel1: TPanel;
    MmoLog: TMemo;
    TV: TTreeView;
    MmoResult: TMemo;
    BtnConnect: TButton;
    BtnAlternate: TButton;
    Memo1: TMemo;
    Label1: TLabel;
    procedure HTTPRIOBeforeExecute(const MethodName: string;
      SOAPRequest: TStream);
    procedure HTTPRIOAfterExecute(const MethodName: string;
      SOAPResponse: TStream);
    procedure BtnConnectClick(Sender: TObject);
    procedure HTTPRIO1HTTPWebNode1BeforePost(const HTTPReqResp: THTTPReqResp;
      Data: Pointer);
    procedure BtnAlternateClick(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    FSoapData: TStringStream;
    procedure Res(Msg: String);
    procedure InitializeSoapData;
    procedure FinalizeSoapData;
  public
  end;

var
  FrmTestEWS: TFrmTestEWS;

implementation

{$R *.dfm}

procedure TFrmTestEWS.BtnConnectClick(Sender: TObject);
var
   lESB        : ExchangeServicePortType;
   lResNames   : ResolveNames;
   lReqVersion : RequestServerVersion;
   lResResult  : ResolveNamesResponse;
   lServerVer  : ServerVersionInfo;
begin
   lServerVer  := ServerVersionInfo.Create;
   lResNames   := ResolveNames.Create;
   lReqVersion := RequestServerVersion.Create;
   lResResult  := ResolveNamesResponse.Create;
   try
      try
         // 1\. Setup
(* Replaced by alternate, see BtnAlternateClick
         lUnresolved := 'deve';
         with lResNames do
         begin
            ReturnFullContactData := true;
            SearchScope           := ResolveNamesSearchScopeType.ActiveDirectoryContacts;  // Scoped enums is on!
            ParentFolderIds       := nil;
            UnresolvedEntry       := lUnresolved;
         end;
         lReqVersion.Version := ExchangeVersionType.Exchange2010;
*)
         // 2\. Execute
         lESB := (HTTPRIO as ExchangeServicePortType);
         lESB.ResolveNames(lResNames,
                           nil,              // Impersonation
                           nil,              // MailboxCulture
                           lReqVersion,
                           lResResult,
                           lServerVer);
         // 3\. Report
         MmoResult.Clear;
         Res('Server version:');
         with lServerVer do
         begin
            Res('  MajorVersion: ' + IntToStr(MajorVersion));
            Res('  MinorVersion: ' + IntToStr(MinorVersion));
            Res('  MajorBuildNumber: ' + IntToStr(MajorBuildNumber));
            Res('  MinorBuildNumber: ' + IntToStr(MinorBuildNumber));
            Res('  Version: ' + Version);
         end;
         // [ snip rest of code not relevant for this example]
      except
         on E:Exception do MmoResult.Text := E.Message;
      end;
   finally
      // 4\. Clean up
      lResResult.Free;
      lServerVer.Free;
      lReqVersion.Free;
      lResNames.free;
      LESB := nil;
   end;
end;

procedure TFrmTestEWS.FormCreate(Sender: TObject);
begin
   FSoapData := TStringStream.Create('',TEncoding.UTF8);
   FSoapData.Position := 0;
end;

procedure TFrmTestEWS.FormDestroy(Sender: TObject);
begin
  FSoapData.Free;
end;

procedure TFrmTestEWS.HTTPRIOAfterExecute(const MethodName: string;
  SOAPResponse: TStream);
var
   TS: TStringStream;
   S : String;
begin
   S := MmoLog.Text + #13#10#13#10 + 'Response:' + #13#10#13#10;
   TS := TStringStream.Create(S);
   TS.Position := Length(S);
   SOAPResponse.Position := 0;
   TS.CopyFrom(SOAPResponse,SOAPResponse.Size);
   TS.Position := 0;
   MmoLog.Lines.LoadFromStream(TS);
   TS.Free;
end;

procedure TFrmTestEWS.HTTPRIOBeforeExecute(const MethodName: string;
  SOAPRequest: TStream);
begin
   // 1\. Alternate approach
   SOAPRequest.Position := 0;
   FSoapData.Position := 0;
   SOAPRequest.CopyFrom(FSoapData,FSoapData.Size);
   SOAPRequest.Size := FSoapData.Size;
   // 2\. Logging
   MmoLog.Clear;
   MmoLog.Lines.Add('Request:' + #13#10#13#10);
   FSoapData.Position := 0;
   MmoLog.Lines.LoadFromStream(FSoapData);
end;

procedure TFrmTestEWS.InitializeSoapData;
begin
   FSoapData.Clear;
   FSoapData.WriteString('<soapenv:Envelope');
   FSoapData.WriteString('  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"');
   FSoapData.WriteString('  xmlns:typ="http://schemas.microsoft.com/exchange/services/2006/types"');
   FSoapData.WriteString('  xmlns:mes="http://schemas.microsoft.com/exchange/services/2006/messages">');
   FSoapData.WriteString('<soapenv:Header><typ:RequestServerVersion Version="Exchange2010"/></soapenv:Header>');
   FSoapData.WriteString('<soapenv:Body>');
end;

procedure TFrmTestEWS.FinalizeSoapData;
begin
   FSoapData.WriteString('</soapenv:Body>');
   FSoapData.WriteString('</soapenv:Envelope>');
end;

procedure TFrmTestEWS.BtnAlternateClick(Sender: TObject);
begin
   InitializeSoapData;
   FSoapData.WriteString('  <mes:ResolveNames ReturnFullContactData="1" SearchScope="ActiveDirectoryContacts">');
   FSoapData.WriteString('    <mes:UnresolvedEntry>deve</mes:UnresolvedEntry>');
   FSoapData.WriteString('  </mes:ResolveNames>');
   FinalizeSoapData;
   // Pick up from first attempt 'execute': 
   BtnConnectClick(Sender);
end;

procedure TFrmTestEWS.HTTPRIO1HTTPWebNode1BeforePost(
  const HTTPReqResp: THTTPReqResp; Data: Pointer);
const
   CONTENT_HEADER_EX2010 = 'Content-Type: text/xml; charset=utf-8';
begin
   // http://forum.delphi-treff.de/archive/index.php/t-31817.html
   // Need to exchange the Content-Type Header, because Exchange 2010 expects
   // 'Content-Type: text/xml; charset=utf-8' instead of
   // 'Content-Type: text/xml; charset="utf-8"' which is RFC conform and used by XE2
   HttpAddRequestHeaders(Data, PChar(CONTENT_HEADER_EX2010), Length(CONTENT_HEADER_EX2010), HTTP_ADDREQ_FLAG_REPLACE);
end;

procedure TFrmTestEWS.Res(Msg: String);
begin
   MmoResult.Lines.Add(Msg);
end;

end. 
```

# android - 如何在android中更改编辑文本颜色？

> ID：13140004
> 
> 赞同：0
> 
> 时间：2012-10-30T13:25:30.227
> 
> 标签：android, android-edittext

我不知道如何在焦点和按下时更改android中编辑文本的背景颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:27:00.213

使用选择器 xml 标记来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-23T02:41:27.600

**编辑文本选择器.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:drawable="@drawable/edit_text_focus"/>
    <item android:drawable="@drawable/edit_text_border" />
</selector> 
```

**activity_main.xml**

```
 <EditText
android:layout_width="match_parent"
android:layout_height="50dp"
android:background="@drawable/edit_text_selector"
android:hint="@string/password" /> 
```

# android - DownloadManager 文件的安全性

> ID：13140008
> 
> 赞同：0
> 
> 时间：2012-10-30T13:25:40.117
> 
> 标签：android, android-contentprovider

应用程序 1：我下载了一个文件`DownloadManager`

应用程序 2：我要求`DownloadManager`所有下载。我只得到我自己的发起，而不是来自`App 1`.

下载的文件有`Uri`：`content://downloads/my_downloads/id`

来自“应用程序 2”：我无法使用 this设置`ImageUri`a 。（我得到一个）`ImageView``Content Uri``FileNotFoundException`

现在我的问题是：如果我打开`Android Downloads App`并单击从`App 1`. 我可以使用系统上的任何图片查看器查看它。为什么不从 with `App 2`？

这是因为使用了`Intent`（`Action_VIEW`）吗？还是我错过了什么？

**编辑：**

显然，您可以`content://downloads/all_downloads/<some_id>`从任何其他应用程序获取文件。有没有办法限制应用程序访问这个文件？那么只有发起下载的app才能打开呢？

我在用着：

```
Request lRequest = new Request(Uri.parse(lDownloadUrl));
lRequest.setNotificationVisibility(Request.VISIBILITY_HIDDEN);
lRequest.setVisibleInDownloadsUi(false);

DownloadManager lDownloadManager = (DownloadManager)getSystemService(DOWNLOAD_SERVICE); 
long lEnqueueId = lDownloadManager.enqueue(lRequest); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:36:06.673

下载内容与查看内容不同。因此，文件 X 的下载是由应用程序 A 发起的这一事实并不意味着应用程序 A 能够查看它。如果您希望您的应用程序用于显示它，您应该添加`<intent-filter>`以便应用程序 A 可以显示在适用的查看器列表中。如果您希望您的应用程序成为显式查看器，则必须使用一些技巧，例如使用唯一的文件扩展名（并在您的`<intent-filter>`.

**编辑**

如果您查看 DownloadManager 的源代码，您会注意到下载相关字段的访问权限仅限于所有者。因此，应用程序 A 只能看到它自己开始的这些下载，而对应用程序 B 来说什么也看不到（并且最终，一旦下载到即 SDCard 目标，这些文件是“世界可读的”，这无关紧要）。这也解释了为什么应用程序 B 无法尝试通过使用内容提供程序来访问应用程序 A 的下载 - 根本没有您尝试引用的下载属于应用程序 B（这些是应用程序 B）。所以最后，如果你想“共享”下载，你必须以任何其他方式将下载相关数据传递给应用程序 B，而不是使用 DownloadManager（即用所有数据填充 Bundle 并将其传递给 B）。

# jquery - jQuery UI 自动完成将所选项目的描述添加到文本字段

> ID：13140009
> 
> 赞同：0
> 
> 时间：2012-10-30T13:25:41.517
> 
> 标签：jquery, ajax, json, jquery-ui, jquery-ui-autocomplete

对于自动完成文本框，我有以下内容，它可以正常工作：

```
 $('#material_number').autocomplete({
     source: function(request, response) {
         $.ajax({
             url: "index.cfm?action=leadtime.getmaterialleadtime&returnformat=json",
             dataType: "json",
             data: {
                 search: request.term,
                 maxRows: 10
             },
             success: function(data) {
                 response(data);
                 console.log();
                 //need to append material_description to a textbox here
             }
         })
     }
 }); 
```

我想要输出的 material_description 值返回到一个名为 txtMaterialDescription 的文本框。我查看了此站点上的不同示例，但无法使其正常工作。因此，当用户从自动建议列表中选择零件号时，描述字段会填充零件号说明。任何人都可以帮助我并指出我正确的方向吗？

非常感谢一如既往。

JC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:21:24.537

您需要捕获[`focus`](http://api.jqueryui.com/autocomplete/#event-focus)or[`select`](http://api.jqueryui.com/autocomplete/#event-select)事件：

```
focus: function(event, ui) {
    $("#textbox").val(ui.item.someProperty);
} 
```

现在，如果您的 JSON 数据由看起来像的对象组成，`{label: ..., value: ..., someProperty: ...}`那么您可以编写：

```
source: function(request, response) {
    $.ajax({
        url: "index.cfm?action=leadtime.getmaterialleadtime&returnformat=json",
        dataType: "json",
        data: {
            search: request.term,
            maxRows: 10
        },
        success: response
    });
} 
```

否则，您始终可以使用以下方式转换数据`jQuery.map`：

```
source: function(request, response) {
    $.ajax({
        url: "index.cfm?action=leadtime.getmaterialleadtime&returnformat=json",
        dataType: "json",
        data: {
            search: request.term,
            maxRows: 10
        },
        success: function(data) {
            response($.map(data, function(item) {
                return {
                    label: item.productName,
                    value: item.productCode,
                    someProperty: item.productDescription + item.productPrice
                }
            }));
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:29:53.897

您可以使用焦点选项并为重点项目加载详细信息，例如

```
 focus: function(event, ui) {
            $(this).val(ui.item.label);

 //do ajax call here  for currently focused element 
  // and on sucesss you can do the following

  //add your detail description here
            $("#tags").empty();
            $("#tags").append("Detailed for "+ui.item.label);

            return false;
        }, 
```

有关详细说明，您可以查看此处 - [jquery autocomplete example](http://fundapass.blogspot.in/2012/09/jquery-drop-down.html)

# python - SQLAlchemy 惰性声明式继承

> ID：13140012
> 
> 赞同：1
> 
> 时间：2012-10-30T13:25:51.100
> 
> 标签：python, orm, sqlalchemy, lazy-evaluation, declarative

我们有一些表在它们之间具有声明性继承，并且我们一直在尝试使继承“惰性”，这意味着我们不想急切地在父表上加入。

例如：

```
class Entity(Base):
    __tablename__ = 'entities'
    id = Column(Integer, primary_key=True)
    entity_type = Column(String, nullable=False)
    __mapper_args__ = {'polymorphic_on': entity_type, 'polymorphic_identity': 'entities'}

class Person(Entity):
    __tablename__ = 'persons'
    person_id = Column(None, ForeignKey('entities.id'), primary_key=True)
    name = Column(String, nullable=False)
    __mapper_args__ = {'polymorphic_identity': 'persons'} 
```

查询人时，sqlalchemy 总是在实体上加入。我希望这有点懒惰，我找不到任何方法来做到这一点。

但是，在查询实体时，如果该实体是个人，我仍然希望能够接收个人对象。这就是为什么我们不能简单地让 Person 与 Entity 有关系，或者使用一个有关系的 Mixin。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T02:47:44.623

这里的 Person 实体是 Entity->Person 的连接。如果您只想查询“实体”表开始，然后查询实体对象。如果您想要仅属于“Person”类型的实体对象，则在鉴别器上进行过滤：

```
persons = query(Entity).filter_by(entity_type='persons').all() 
```

以上将在不使用连接的情况下返回 Person 对象，并且当您访问特定于 Person 的属性时，将为每一行单独选择“persons”表。

编辑：好的，你想要它反过来。首先这是可能的方式，其次是我建议更改映射。

1.  您始终可以通过查询表从“人”中取回行：

    ```
    ptable = Person.__table__
    rows = query(ptable).filter(ptable.c.foo == 'bar').all() 
    ```

    这会给你返回元组，而不是 Person 对象。

2.  另一种可能有效的方法，虽然我还没有尝试过，而且相当不寻常，但它是对 Person 使用非主映射器：

    ```
    from sqlalchemy.orm import mapper
    nperson = mapper(Person, Person.__table__, non_primary=True)
    people = query(nperson).filter(nperson.c.foo == 'bar').all() 
    ```

3.  继承偏爱 Entity 表的原因是因为在类继承中，Person 被认为是 Entity 的一种特殊化——你得到的每个 Person 实际上只是一个 Entity，具有一些使其成为 Person 的额外特性。ORM 认为 Person 的主键是“entities.id”列。这是因为所有 Entity 子类的空间跨越了许多表，但完整的 Entity 主键集仍然完全是“entities.id”中的那些值。ORM 还需要在这里查看“entities.entity_type”列，以便查看对象的类型。如果 "persons" 加入了表 "employees" 并且你有`class Employee(Person)`，那么只查询 "persons" 表不仅不会给我们记录的主键（将 Persons 中的 FK 列放在一边），而且不会

    从语义上讲，这里的使用请求可能表明继承是不合适的。假设 Entity 有许多子类——Person、Animal、Vehicle，并且对于每一个子类表，它都是真正的“记录数据”，而特定于 Entity 的列实际上只是关联值，这建议将关系建模为人与实体之间一对一。此映射将为您提供所需的加载行为；针对 Person 的查询只会针对“persons”，并且访问 Person.entity 会发出一条 SQL 语句来获取相应的实体。

4.  另一个想法是，虽然我在这里看不到您的完整映射，但如果“实体”除了作为“所有对象的基础”之外实际上没有任何有意义的数据，恕我直言，就关系数据库。在 Python 中拥有基类很好，但我肯定没有与之对应的数据库表，它只会使查询和更新变得更加困难。

# jquery - jQuery 使用选定的类显示和隐藏多个 div

> ID：13140017
> 
> 赞同：8
> 
> 时间：2012-10-30T13:26:09.350
> 
> 标签：jquery, html, css, toggle

我需要能够根据“选择”的 href 类来显示和隐藏 div 我在下面有一些代码：

[http://jsfiddle.net/XwN2L/722/](http://jsfiddle.net/XwN2L/722/)

我需要删除上面小提琴中的“全部”选项。

所以基本上当一个href有选择的类时，会显示href的两个链接，然后当用户点击另一个href时，它会隐藏以前的链接并显示带有“selected”类的新链接

当他们单击链接时，所选类会发生变化，并且按钮会相应地隐藏和显示？

几乎只需要最后一点的帮助。

```
<div class="buttons">
 <a id="showall">All</a>
 <a class="showSingle" target="1">Div 1</a>
 <a class="showSingle selected" target="2">Div 2</a>
 <a class="showSingle" target="3">Div 3</a>
 <a class="showSingle" target="4">Div 4</a>
</div>

<div id="div1" class="targetDiv">
 <a href="#" class="button3">1a</a>
 <a href="#" class="button3">1b</a>
</div>

<div id="div2" class="targetDiv">
 <a href="#" class="button3">2a</a>
 <a href="#" class="button3">2b</a>
</div>

<div id="div3" class="targetDiv">
  <a href="#" class="button3">3a</a>
  <a href="#" class="button3">3b</a>
</div>

<div id="div4" class="targetDiv">popup COMPLETE</div>

<script>
 jQuery(function(){
    jQuery('.showSingle').click(function(){
          jQuery('.targetDiv').hide();
          jQuery('#div'+$(this).attr('target')).show();
     });
 });​
<script> 
```

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:32:21.193

您可以使用`data-*`属性：

```
<div class="buttons">
  <a  id="showall" data-target="all" >All</a>
  <a  class="showSingle" data-target="1">Div 1</a>
  <a  class="showSingle selected" data-target="2">Div 2</a>
  <a  class="showSingle" data-target="3">Div 3</a>
  <a  class="showSingle" data-target="4">Div 4</a>
</div> 
```

```
var $target = $('.targetDiv'); // caching object for better performance

$('.buttons a').click(function(e) {
    e.preventDefault();
    $(this).addClass('selected').siblings().removeClass('selected');
    var target = $(this).data('target');
    if (target === 'all') {
        $target.show();
    } else {
        $target.hide().filter('#div' + target).show();
    }
}); 
```

[http://jsfiddle.net/fKHsB/](http://jsfiddle.net/fKHsB/)

# android - 从 Eclipse 在我的手机上启动应用程序

> ID：13140020
> 
> 赞同：0
> 
> 时间：2012-10-30T13:26:17.607
> 
> 标签：android, eclipse, cordova, android-emulator

当我尝试运行我的手机差距测试应用程序时。我在下面收到此错误。我将手机插入计算机并打开了调试。下面的错误是否意味着我的手机没有运行正确的安卓版本？我有一台运行 android 4 的 Htc Evo。

我的项目设置为 android 4.1.2。

“未找到有效的兼容 AVD 或设备。连接设备或启动 AVD 后重新启动此配置。”

我做错了什么让这个在我的手机上调试？或者我如何设置枚举器以在我的 PC 上运行应用程序？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:27:36.123

您需要在计算机上安装 HTC 驱动程序才能看到设备。您应该能够在 HTC 的网站上找到它们。

编辑：如果他们没有驱动程序文件本身可供下载，您可以下载 HTC Sync 并开始安装。安装的第一步将安装驱动程序，如果您观看，您可以在此之后取消安装，这样您就只有驱动程序了。它可能是一个大文件，仅用于驱动程序下载，但至少您知道该文件来自 HTC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:31:20.600

在 DDMS 设备窗格中，如果您的设备可见，那么您有驱动程序，否则安装驱动程序。如果您在设备窗格中仍然有您的设备，那么您仍然可以在应用程序中检查您的最低 sdk 版本。如果这低于您的设备。然后在关闭 Eclipse 后从您的主文件夹中删除 .android 文件夹并重新开始。

# django - django-allauth：将多个社交帐户链接到单个用户

> ID：13140021
> 
> 赞同：20
> 
> 时间：2012-10-30T13:26:18.087
> 
> 标签：django, django-allauth

在测试 django-allauth 时，如果我使用不同的社交帐户登录和注销，它们似乎没有链接在一起（因为我无法通过查看 socialaccount_set.all.0、socialaccount_set.all.1 等来访问它们）。

有人可以解释如何将社交帐户链接在一起吗？

我确实看到了这篇文章：[如何使用 django-allauth 将多个社交身份验证提供者连接到同一个 django 用户？](https://stackoverflow.com/questions/13037644/how-do-i-connect-multiple-social-auth-providers-to-the-same-django-user-using-dj)这似乎让用户有责任首先使用一个社交帐户登录，然后为自己链接其他帐户。

当然，应该有一种方法可以做到这一点，而不会让用户承担责任？也许通过电子邮件地址？

有没有办法在现有用户的情况下做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-10-14T04:41:29.857

如果您的用户已经登录，我已经使用标签[provider_login_url](https://github.com/pennersr/django-allauth/#social-account-tags)并设置了属性成功连接了另一个帐户`process="connect"`。*这是放置在为经过身份验证的用户*显示的块中的代码片段：

```
{% load socialaccount %}
<p><a href="{% provider_login_url "facebook" process="connect" %}">Connect a facebook account</a></p>
<p><a href="{% provider_login_url "google" process="connect" %}">Connect a Google account</a></p> 
```

设置`SOCIALACCOUNT_QUERY_EMAIL=True`并且不要忘记在您的提供商范围内询问电子邮件：

```
SOCIALACCOUNT_PROVIDERS = \
    {'facebook':
         {'SCOPE': ['email', ],
          'AUTH_PARAMS': {'auth_type': 'reauthenticate'},
          'METHOD': 'oauth2',
          'LOCALE_FUNC': lambda request: 'pt_BR'},
     'google':
         {'SCOPE': ['https://www.googleapis.com/auth/userinfo.profile',
                    'email'],
          'AUTH_PARAMS': {'access_type': 'online'}
         },
} 
```

我还想知道是否可以使用电子邮件地址自动关联帐户。我可以在 socialaccount_socialaccount 表的“extra_data”列中看到 Google 和 Facebook 都发送了 `"verified_email": true`. 对我来说，自动关联登录和极大的可用性增强就足够了。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-15T21:06:02.577

> 当然，应该有一种方法可以做到这一点，而不会让用户承担责任？也许通过电子邮件地址？

要非常小心你如何做到这一点。您可能会打开一个巨大的安全漏洞。如果您不对用户承担一些责任，而只是自动链接具有相同电子邮件地址的帐户，则会引入以下攻击向量：

*   在您的网站上查找用户，找出他们的电子邮件地址（通常这很容易）
*   使用我的电子邮件在您的提供商之一创建帐户
*   验证电子邮件，添加他们的电子邮件，删除我的电子邮件（只需要你的一个提供商不做完整的角落案例来打开这个洞）
*   使用我的新宽松提供者帐户“注册”您的服务
*   自动分配给初始用户，访问他们的帐户

您可以采取措施降低这种风险，但即使所有提供商现在都需要电子邮件确认，第 3 方团队中的任何失误都会在您的安全性中打开这个漏洞。

也许你正在做的风险是值得的，只是请小心。对用户有点责任可能不是最糟糕的事情。

我已经看到它建议自动匹配的流程，然后要求您输入密码或与原始提供商之一重新进行身份验证以将新帐户添加到您的原始帐户。这些不会有同样的利用潜力，但有一些脑力激荡级别的极端情况和 UI 并发症。

# javascript - Spine.js 中的控制器间通信

> ID：13140026
> 
> 赞同：1
> 
> 时间：2012-10-30T13:26:35.490
> 
> 标签：javascript, ruby-on-rails, coffeescript, spine.js

是否可以在同一个 Spine.js 中有两个控制器：Apartments 和 Map。选择公寓时，有没有办法调用获取地图做某事？

```
# Apartments
class Show extends Spine.Controller
  events:
    'click [data-type=edit]': 'edit'
    'click [data-type=back]': 'back'

  constructor: ->
    super
    @active (params) ->
      @change(params.id)

  change: (id) ->
    @item = Apartment.find(id)
    @render()

  render: ->
    @html @view('apartments/show')(@item)
    # also update the map here. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:47:55.570

我想你有几个选择

# 使用路线

使用 Spine 的路由导航到公寓 url 并更新地图。[您可以在 Spine 的联系人示例](https://github.com/maccman/spine.contacts/blob/master/app/controllers/contacts.sidebar.coffee#L41)中看到一个示例。

在您的 index.coffee 上定义 /apartment 路线：

```
@路线
      '/公寓/：id'：（参数）->
        @apartmentList.active(参数)
        @map.show.active(参数)

```

在您的侧边栏/公寓列表控制器上，使用 @navigate 更改状态

```
  更改：（项目）=>
    @navigate '/公寓', 公寓.id

```

最后在您的地图控制器上捕获活动事件（[如这里](https://github.com/maccman/spine.contacts/blob/master/app/controllers/contacts.main.coffee#L13)）并更新地图

# 使用事件

选择公寓火灾事件时

```
Spine.trigger 'selectApartment'，item.id
```

然后在 Map 控制器上捕获此事件：

```
Spine.bind 'selectApartment'，onSelectAparmtnet
```

# javascript - 如何将 JavaScript 对象从 PascalCase 属性克隆到 camelCase 属性（在 JavaScript 中）？

> ID：13140027
> 
> 赞同：5
> 
> 时间：2012-10-30T13:26:35.200
> 
> 标签：javascript

当我序列化一个 ASP.NET MVC 表单时，我得到这个：

```
{
  DestinationId: "e96dd00a-b042-41f7-bd59-f369904737b6",
  ...
} 
```

但我想要这个，以便它符合 JS 编码约定：

```
{
  destinationId: "e96dd00a-b042-41f7-bd59-f369904737b6",
  ...
} 
```

如何获取对象并将每个属性的第一个字符小写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:38:53.507

简单的方法是对您的对象进行迭代：

```
var newObj = {};
for (var p in o) {
    newObj[p.substring(0,1).toLowerCase()+p.substring(1)] = o[p];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:47:45.317

还必须检查 hasOwnProperty，并删除以前的属性

```
var object = { DestinationId: "e96dd00a-b042-41f7-bd59-f369904737b6" }
for ( var prop in object ) {
  if ( object.hasOwnProperty( prop ) ) {
    object[ prop.substring(0,1).toLowerCase() + prop.substring(1) ] = object[ prop ];
    delete object[ prop ];
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-16T10:21:37.093

将这些东西当作字符串并使用 Reg exps power 不是更好吗？

`JSON.parse( JSON.stringify(z).replace( /(\"[^"])([^"]*\"\:)/g, function(all, head, tail) { return head.toLowerCase() + tail; } ) )`

# html - 标签的等价物

> ID：13140028
> 
> 赞同：0
> 
> 时间：2012-10-30T13:26:41.020
> 
> 标签：html, internet-explorer, tags, cross-browser

在 Internet Explorer 5.5、6 和 7 中，`<br>`标签占用了更多空间。

我正在处理动态隐藏/显示表格行。我在隐藏一行时遇到了一个问题，它旁边的行在`<br>`他们的数据中（*除非被`<br>`实验室证明为阴性，*否则被视为狂犬病），占用更多空间。

是否可以实现与`<br>`with`<div>`或`<p>`tag 相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:32:15.793

如果我理解正确，你只想`<br />`用 CSS 做一个。
这个问题已经回答了：

[如何在不使用 <br /> 的情况下从 css 给出换行符？](https://stackoverflow.com/questions/2703601/how-to-give-line-break-from-css-without-using-br)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T01:35:57.250

如果您仍然想知道，您可以这样做：

```
<style>
p {
white-space: pre;
}
</style>
<p>hello
How are you</p> 
```

这在 IE6 或 7 中不起作用我不知道 8

```
p span {
    Border: pre;
}
<p><span>hello my name is</span>Thomas</p> 
```

以上是另一种方法。它应该适用于所有浏览器

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T13:32:42.503

从语义的角度来看，没有。`<p>`并且`<div>`是包含文本的标签。但是当然，您可以使用`<p>`'s 或`<div>`'s 来实现看起来像`<br>`正在做的事情（*尽管您可能需要一些 CSS 使其看起来完全相同*）。

# flash - Flash 关键帧

> ID：13140032
> 
> 赞同：-2
> 
> 时间：2012-10-30T13:27:01.113
> 
> 标签：flash

在 Flash (AC3) 中，我能够离开关键帧 2 并降落在关键帧 6 上并返回到关键帧 2 我想要做的是将任何帧降落在 6 上并返回到我离开的帧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T22:56:05.853

```
private var frameILeft:int;

private function jumpToFrame6():void{
    frameILeft = currentFrame;
    gotoAndStop(6);
} 
```

转到第 6 帧：jumpToFrame6()。然后返回：gotoAndStop(frameILeft)。

# jquery - CSS3动画在webkit中不起作用

> ID：13140033
> 
> 赞同：1
> 
> 时间：2012-10-30T13:27:00.877
> 
> 标签：jquery, ajax, google-chrome, animation, preloader

我有一个动画在所有浏览器中都可以正常工作，但 webkit 除外。在 webkit 中，它只显示 1 个圆圈旋转，而其他所有 5 个圆圈都可以正常工作。动画预览在这里 - [http://cssload.net/windows8.html](http://cssload.net/windows8.html)

代码有什么问题？请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:07:19.027

做到了！

问题是您的 innerball 类的不透明度，在 google-chrome 中，它们需要在所有关键帧中设置。这种方法并没有破坏 safari 的效果。

```
@-webkit-keyframes orbit {
    0% {
        opacity: 1;
        z-index:99;
        -webkit-transform: rotate(180deg);
        -webkit-animation-timing-function: ease-out;
        }

    7% {
        opacity: 1;
        -webkit-transform: rotate(300deg);
        -webkit-animation-timing-function: linear;
        -webkit-origin:0%;
        }

   30% {
        opacity: 1;  
        -webkit-transform:rotate(410deg);
        -webkit-animation-timing-function: ease-in-out;
        -webkit-origin:7%;
        }

    39% {
        opacity: 1;  
        -webkit-transform: rotate(645deg);
        -webkit-animation-timing-function: linear;
        -webkit-origin:30%;
        }

    70% {
        opacity: 1;
        -webkit-transform: rotate(770deg);
        -webkit-animation-timing-function: ease-out;
        -webkit-origin:39%;    
        }

    75% {
        opacity: 1; 
        -webkit-transform: rotate(900deg);
        -webkit-animation-timing-function: ease-out;
        -webkit-origin:70%;    
        }

    76% {
        opacity: 0;
        -webkit-transform:rotate(900deg);
        }

    100% {
        opacity: 0;
        -webkit-transform: rotate(900deg);
        }

} 
```

这是小提琴：

[http://jsfiddle.net/q4wtm/27/](http://jsfiddle.net/q4wtm/27/)

# internet-explorer - Http Header 不同：Origin 导致 Google Cloud Storage 中 Internet Explorer 中的缓存失败

> ID：13140034
> 
> 赞同：1
> 
> 时间：2012-10-30T13:27:02.520
> 
> 标签：internet-explorer, http-headers, google-cloud-storage

我们设置了一个 Google Cloud Storage 存储桶，旨在提供网络字体。通过使用 CORS 设置，我们可以正确地为 IE 9、webkit、firefox 提供 woff 字体；eot 为 7 和 8 等。**缓存控制**设置为遥远的未来。在 webkit / mozilla 浏览器中的行为与预期的一样 - 字体被请求一次并缓存在客户端计算机上。

但是，**Vary: Origin**标头（似乎不可修改）导致 Internet Explorer 对每个页面请求发出 If-Modified-Since 请求，从而导致 304。来自 IE 的每页重新验证意味着存在闪存每个页面的无样式内容，因此我们不得不恢复使用我们自己的服务器，在那里我们可以更好地控制标题。

我们已经在本地复制了这个。我们的测试表明，无论是否使用 Access-Control-Allow-Origin 指令，字体文件是从同一来源还是从 cdn 提供都没有区别。关键问题完全是 Vary 标头，而 Goolge 的服务器将其设置为**Origin**。

这种行为在 IE7、IE8 和 IE9 中很常见。它可以通过 a) 将 Vary 标头更改为**Vary: Accept-Encoding**或 b)完全**删除**Vary 标头来解决，因此一切正常。

使用当前配置，Google Cloud Storage 无法用作字体文件的 cdn，这令人沮丧。

有什么方法可以控制 Vary 标头吗？这是可以考虑的事情吗？如果没有，是否有任何 CDN 支持该功能？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T01:56:47.577

您可以做两件事来删除`Vary: Origin`响应的标题：

1.  将您的[CORS 配置](https://developers.google.com/storage/docs/cross-origin)设置为允许所有来源：`<Origin>*</Origin>`.
2.  将对象放入禁用 CORS 的存储桶中（默认行为）。

否则，`Vary: Origin`标头对于正确的缓存行为是必要的，因为响应因来源而异。

# javascript - 让 $routeProvider 监听 $rootscope.$broadcast

> ID：13140035
> 
> 赞同：2
> 
> 时间：2012-10-30T13:27:03.660
> 
> 标签：javascript, angularjs

我已将此模块添加到我的应用程序中：[https ://github.com/witoldsz/angular-http-auth/blob/gh-pages/lib/http-auth-interceptor.js](https://github.com/witoldsz/angular-http-auth/blob/gh-pages/lib/http-auth-interceptor.js)

它在 401 响应上广播消息，非常方便！只是不确定如何让我的 $routeProvider 监听 $rootscope.$broadcast。我想重定向到 401 上的登录页面。

我的 $routeProvide 看起来像这样：

```
var app = angular.module('demoApp', ['http-auth-interceptor','tastypieModule'])
    .config(function($routeProvider) { $routeProvider.
        when('/', {controller:HomeCrtl, templateUrl:'partials/home.html'}).
        when('/sign-in', {controller:SiginInCtrl, templateUrl:'partials/sign-in.html'}).
        otherwise({redirectTo:'/'});
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:39:19.603

你不会让你的 $routeProvider 监听它。您只需在控制器中侦听它，然后使用 $location 将您的应用程序发送到适当的路由。

```
app.controller('MainAppCtrl', function($scope, $rootScope, $location) {
    $rootScope.$on('event:auth-loginConfirmed', function(){
          $location.path('/');
    });
}); 
```

编辑：由于您可能有很多控制器，因此您希望有一个父控制器来包装您的 ngView ...

```
<div ng-controller="MainAppCtrl">
    <div ng-view>
    </div>
</div> 
```

上面的控制器现在将出现在所有视图中，并且一定会注册您的侦听器。

# appdelegate - 启动故事板

> ID：13140038
> 
> 赞同：0
> 
> 时间：2012-10-30T13:27:15.177
> 
> 标签：appdelegate

我试图在我的应用程序启动时检测设备是否是 iPhone 5。如果设备是 iPhone，我想启动我的故事板，否则另一个故事板。我在 didFinishLaunchingWithOptions 方法中尝试了这段代码：

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
    UIStoryboard *storyBoard;

    CGSize result = [[UIScreen mainScreen] bounds].size;
    CGFloat scale = [UIScreen mainScreen].scale;
    result = CGSizeMake(result.width * scale, result.height * scale);

    if(result.height == 1136){
        storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone_5" bundle:nil];
        UIViewController *initViewController = [storyBoard instantiateInitialViewController];
        [self.window setRootViewController:initViewController];
    }
} 
```

它似乎工作但当应用程序启动时只有一个黑屏。我认为情节提要有问题（每个情节提要作为 2 个具有 2 个视图的视图控制器）。我有两个视图之一作为“初始视图控制器”，但总是有没有正确视图的背景屏幕。

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:29:39.547

你的代码看起来确实正确。我唯一一次在启动时出现黑屏是我不小心删除了 UIViewController 中的视图......不确定这是否有帮助。确保您的所有参考资料都是正确的。如果您删除、重命名或以其他方式更改了类、方法等的名称，这也可能导致问题。

# mysql - 在 JSP 页面上显示大量信息

> ID：13140039
> 
> 赞同：0
> 
> 时间：2012-10-30T13:27:17.947
> 
> 标签：mysql, arrays, file, jsp

我有一个 jsp 页面，其中数据直接从 mysql 数据库显示。由于数据量很大，jsp页面有时会显示白色的空白页面。是否有任何解决方案可以将来自数据库的信息临时存储在 ArrayList 或 File 中，并且在请求 jsp 页面时显示这些结果而不是请求 mysql 数据库。我正在使用 Apache Tomcat、MySQL 数据库和 jsp 来显示数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:05:44.460

解决了。

1.  将所有 SQL 统计信息复制到相应的 CSV 文件中，然后将它们存储在目录中。

2.  这些数据是从 JSP 页面调用的。结果是 JSP 页面现在显示统计信息的速度非常快。

3.  每 15 分钟 CSV 文件会使用新数据进行更新。

优点：每当请求 JSP 页面显示统计信息时，它不会向数据库发送繁重的请求，而是从 CSV 获取信息。这增强了性能。

# c# - NullReferenceException 未处理 - 如何解决它

> ID：13140040
> 
> 赞同：2
> 
> 时间：2012-10-30T13:27:23.217
> 
> 标签：c#

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection("Data Source=MANINOTEBOOK\\SQLEXPRESS;Integrated Security=SSPI;Initial Catalog=Casesheet");
    con.Open();
    SqlCommand cmd = new SqlCommand("select PatientID from FTR where PatientID='" + textBox1.Text + "'", con);
    textBox2.Text = cmd.ExecuteScalar().ToString();
    if (textBox2.Text == textBox1.Text)
    {
        Consultation cs = new Consultation(textBox1.Text);
        cs.Show();
    }
    else
    {
        MessageBox.Show("Data not found");
    }            
} 
```

当我编译这段代码时，我得到一个错误“NullReferenceException 未处理”。我不知道如何解决它。我需要检查“执行标量”命令中生成的值是否为空。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:31:23.063

最有可能引发的异常是`ToString`：

```
textBox2.Text = cmd.ExecuteScalar().ToString(); 
```

当在数据库中找不到具有该 ID 的患者时会发生这种情况，因为然后[`ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)返回 null。所以你应该检查null：

```
Object patID = cmd.ExecuteScalar();
if(patID != null)
{
    String patientID = patID.ToString();
    // ...
} 
```

**注意**：您不应该连接字符串来构建您的 sql 查询，而是使用它[`SqlParameters`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)来避免[**SQL-Injection**](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:31:36.263

```
cmd.ExecuteScalar() 
```

如果结果为空，这可以返回 null。你应该把它改成

```
 (cmd.ExecuteScalar() ?? "").ToString() 
```

所以如果它为空，则将其更改为空字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:35:13.473

.ToString() 和 Convert.ToString() 之间存在差异*

Convert.ToString() 处理空值，即如果您提供空输入，它将返回一个空字符串。

而您使用过的 .ToString() 会在传递空值时引发异常。

所以，你可以简单地选择改写你的代码，如下所示：

```
textBox2.Text = cmd.ExecuteScalar().ToString(); 
```

** 不是唯一的区别。在此处阅读更多内容：[Convert.ToString() 和 .ToString() 之间的区别](https://stackoverflow.com/questions/2828154/difference-between-convert-tostring-and-tostring)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:40:09.710

```
private void button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection("Data Source=MANINOTEBOOK\\SQLEXPRESS;Integrated Security=SSPI;Initial Catalog=Casesheet");
  try
  {
    con.Open();
    SqlCommand cmd = new SqlCommand("select PatientID from FTR where PatientID='" + textBox1.Text + "'", con);
    textBox2.Text = cmd.ExecuteScalar().ToString();
    if (textBox2.Text == textBox1.Text)
    {
        Consultation cs = new Consultation(textBox1.Text);
        cs.Show();
    }
    else
    {
        MessageBox.Show("Data not found");
    }    
  } 
   catch(NullReferenceException ex)
   {
   Console.Write(ex.message);
   }     
} 
```

您可以通过放置 try catch 块来捕获异常，如果您想找出生成的值，则在代码中放置断点。

# jquery - 如何使用 jQuery 去除 HTML 标签？

> ID：13140043
> 
> 赞同：78
> 
> 时间：2012-10-30T13:27:27.583
> 
> 标签：jquery

我想从字符串中删除 HTML 标签。例如假设我们有字符串：

```
 <p> example ive got a string</P> 
```

如何编写一个函数来删除`<p><p>`并仅返回“示例我有一个字符串”？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-10-30T13:28:43.667

使用[`.text()`](http://api.jquery.com/text/)功能：

```
var text = $("<p> example ive got a string</P>").text(); 
```

**更新**：正如 Brilliand 在下面指出的，如果输入字符串不包含任何标签并且您很不幸，它可能会被视为 CSS 选择器。所以这个版本更加健壮：

```
var text = $("<div/>").html("<p> example ive got a string</P>").text(); 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-10-30T13:30:41.910

最**安全的方法**是依靠浏览器 TextNode 来正确转义内容。这是一个例子：

```
function encodeHTML(dirtyString) {
  var container = document.createElement('div');
  var text = document.createTextNode(dirtyString);
  container.appendChild(text);
  return container.innerHTML; // innerHTML will be a xss safe string
}

document.write( encodeHTML('<p>some <span>content</span></p>') );
document.write( encodeHTML('<script><p>some <span>content</span></p>') );
```

这里要记住的是，当我们访问 html 字符串 ( `innerHTML`, `outerHTML`) 时，浏览器会转义 TextNodes 的特殊字符。相比之下，访问文本值 ( `innerText`, `textContent`) 将产生原始字符串，这意味着它们不安全并且可能包含 XSS。

如果您使用**jQuery**，那么 using`.text()`是安全且向后兼容的。请参阅此问题的其他答案。

如果您使用浏览器 <= Internet Explorer 8，纯 JavaScript 中最**简单的方法是：**

```
string.replace(/(<([^>]+)>)/ig,""); 
```

但是使用正则表达式解析 HTML 存在一些问题，因此这不会提供很好的安全性。此外，这仅处理 HTML 字符，因此它不是完全 xss 安全的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-13T12:18:45.000

这是获取 url 图像的示例，从某些项目中转义 p 标签。

试试这个：

```
$('#img').attr('src').split('<p>')[1].split('</p>')[0] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-11T15:04:55.317

如果你想保留元素的 innerHTML 并且只去除最外层的标签，你可以这样做：

```
$(".contentToStrip").each(function(){
  $(this).replaceWith($(this).html());
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-30T13:36:12.670

您可以使用现有的拆分功能

一个简单而不稳定的例子：

```
var str = '<p> example ive got a string</P>';
var substr = str.split('<p> ');
// substr[0] contains ""
// substr[1] contains "example ive got a string</P>"
var substr2 = substr [1].split('</p>');
// substr2[0] contains "example ive got a string"
// substr2[1] contains "" 
```

该示例只是向您展示拆分的工作原理。

# javascript - 无法从函数返回字符串

> ID：13140049
> 
> 赞同：2
> 
> 时间：2012-10-30T13:27:37.350
> 
> 标签：javascript, jquery

我有以下代码，它显示 2 个警报：

```
function GetDepartment(){
    var dept;

    $.ajax({
        type: 'POST',
        url: 'return_string.asmx/GetDepartment',
        data: '{}',
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        success: function( department ) {

            if( department.d[0] ) {

                dept = department.d[0].code;
                alert( dept );

            } else {

                alert ( "null" );

            }
        },
        error: function(xhr, status, error) {

             var err = eval("(" + xhr.responseText + ")");
             alert(err.Message) ;

        }
    });

    return dept;
}

alert( GetDepartment() ); 
```

显示第一个警报`undefined`并显示第二个警报`MKTG`

为什么显示第一个警报`undefined`，如何让两者都显示`MKTG`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T13:28:48.953

只有当您的 AJAX 调用是同步的时，它才会按照您希望的方式工作。为此，您可以`async: false`在 AJAX 调用中指定。

```
$.ajax({
    type: 'POST',
    url: 'return_string.asmx/GetDepartment',
    ...
    async: false, /* new */
    ...
}); 
```

更好的是，重构您的应用程序，以便 AJAX 调用可以异步进行而不会阻塞 UI 线程，并且可以发出回调以继续您的应用程序特定进程。

IE。就像是：

```
$.ajax({
    type: 'POST',
    url: 'return_string.asmx/GetDepartment',
    ...
    success: yourCallbackFunction,
    ...
});

// callback
function yourCallbackFunction(data) {
    // do stuff that depends on data
} 
```

# ruby - Ruby 打印当前可见性

> ID：13140050
> 
> 赞同：2
> 
> 时间：2012-10-30T13:27:42.050
> 
> 标签：ruby, scope, metaprogramming, visibility

因此，对于 ruby​​ 中的所有元编程内容（使用 1.9.3），我想有一种方法可以返回当前的可见性。让我们假设它被称为`visibility`.

```
class Foo
  puts visibility
  # => "public"

  private
  puts visibility
  # => "private"
end 
```

那么，什么`visibility`- 我如何获得 ruby​​ 解释器在找到新方法定义时使用的当前可见性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:56:11.883

AFAIK，没有现成的方法。但是，您可以使用类似于（未经测试）的东西来实现一个

```
class Class
  def visibility
    define_method(:__visibility_discovery__) { }
    visibility =
      if protected_method_defined? :__visibility_discovery__
        "protected"
      elsif private_method_defined? :__visibility_discovery__
        "private"
      else
        "public"
      end
    remove_method :__visibility_discovery__
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:45:10.873

在 Ruby 中，实例方法具有三个不同级别的可见性。

方法默认为`public`，您可能已经习惯了。如果您有权访问该对象，则您始终可以访问此方法。

`private`并且`protected`是相似的。它们只能由类和子类访问。不同之处在于`public`不能使用显式接收器调用方法。这意味着您不能`private`从同一类的另一个实例调用另一个方法的函数，而`protected`可以。

因此，如果您需要方法在您的类之外可用，请坚持使用`public`. 如果您的方法需要由该类的任何实例访问，例如一些自定义比较逻辑，请使用`protected`. 如果您的方法是在该类的实例之外不可见的任何内容，请使用`private`.

要真正回答您的问题，`visbility`是一种返回当前可见性状态的方法 - 无论是`public`、`private`还是`protected`.

# magento-1.6 - Magento：如何按添加顺序显示购物车中的项目

> ID：13140053
> 
> 赞同：0
> 
> 时间：2012-10-30T13:27:50.810
> 
> 标签：magento-1.6

我想按照添加的顺序显示购物车中的项目。但我找不到设置报价项目集合的代码。

在我的购物车 phtml 文件中，我正在使用 $allItems = $session->getQuote()->getAllItems();

得到所有的项目。

我如何对物品进行分类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:44:35.717

我发现解决方案将`setOrder('updated_at','desc')`app/code/core/Mage/Sales/Model/Quote.php 文件中的 getItemsCollection 函数放入对集合进行排序。

```
public function getItemsCollection($useCache = true)
    {
        if (is_null($this->_items)) {
            $this->_items = Mage::getModel('sales/quote_item')->getCollection()**->setOrder('updated_at','desc');**
            $this->_items->setQuote($this);
        }
        return $this->_items;
    } 
```

# scrapy - 从当前网页获取他们的网址时无法获取某些页面

> ID：13140055
> 
> 赞同：0
> 
> 时间：2012-10-30T13:28:05.450
> 
> 标签：scrapy

我写了一个基于 scapy0.14.4 的蜘蛛，我发现了一个奇怪的问题。

以下是我的蜘蛛。

parse_origin() 中注释的 url 是从 for 循环中获得的。但是注释的语句可以得到页面，而在yiled一个url的http请求时，花了很长时间但仍然无法得到页面。

```
class CrawlAmazon(BaseSpider):

    name = 'amazontest'

    def __init__(self):
        self.httpheaders = {
            'Connection'     : 'keep-alive',
            'Accept'         : '*/*',
            'Accept-encoding': 'gzip,deflate,sdch',
            'Accept-Language': 'en-US,en;q=0.8',
            'Accept-Charset' : 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
             'Referer'        : 'http://www.amazon.cn',
            'User-Agent'     : 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_2) '\
                               'AppleWebKit/535.19 (KHTML, like Gecko) '\
                               'Chrome/18.0.1025.45 Safari/535.19',
        }

        self.urls = [
            'http://www.amazon.cn/gp/search/ref=sr_hi_4?rh=n%'\
            '3A852803051%2Cn%3A%21852804051%2Cn%3A111054071%2Cn%'\
            '3A2133896051%2Cn%3A2133899051&bbn=2133899051&ie=UTF8&qid=1351595402',
             ]

    def start_requests(self):
        for url in self.urls:
            headers = self.httpheaders
            headers['Referer'] = 'http://www.google.com'
            yield Request(url, headers=headers, callback=self.parse_origin)

   def parse_origin(self, response):
        hxs = HtmlXPathSelector(response)
        body = response.body
        url_cur = response.url

        # headers = self.httpheaders
        # headers['Referer'] = url_cur
        # headers['Accept'] =  'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
        # url = 'http://www.amazon.cn/gp/search/other?rh=n%3A2029189051&'\
        #       'bbn=2029189051&pickerToList=brandtextbin&ie=UTF8&qid=1351597447&rd=1'
        # yield Request(url, headers=headers, callback=self.parse_brand)

        nodes_url = hxs.select('//a[contains(@href, "/gp/search/other")]')

        for node in nodes_url:
            url = node.select('@href').extract()[0]
            url = '%s%s' % ('http://www.amazon.cn', url)

            if re.search('brand', url):
                print 'YIELD NEW REQUEST'
                headers = self.httpheaders
                headers['Referer'] = url_cur
                headers['Accept'] = 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
                yield Request(url=url, headers=headers, callback=self.parse_brand)
                break

    def parse_brand(self, response):
        print 'IN PARSE_BRAND'
        url_cur = response.url

        body = response.body
        fn = '%s.txt' % (hashlib.md5(url_cur).hexdigest()[-8:], )
        with open(fn, 'ab+') as fp:
            fp.write(body) 
```

# php - 获取 codeigniter 页面输出并将其放置在非 codeigniter 站点上

> ID：13140057
> 
> 赞同：0
> 
> 时间：2012-10-30T13:28:09.300
> 
> 标签：php, codeigniter

嘿伙计们希望你能帮助我。

我正在一个网站上工作，该网站基本上有两个部分，一个在 codeigniter 中，一个在非 codeigniter 中（即在 magento 中）。

我知道这是一个坏主意，但现在为时已晚。

现在的事情是，我需要来自另一个站点上的 codeigniter 站点的特定页面的原样输出（该页面基本上是一个搜索页面）。我需要它作为 SEO 的后端解决方案，所以 iframe 不会这样做。

两个站点都托管在同一个域上。

我考虑使用 CURL 库来获取该页面的输出（在发送后或获取之后）并显示它，但我猜这会非常低效。

还有其他方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:36:44.767

更好的方法是在 xml、json 中获取页面答案并在 Magento 中“绘制”它。但据我了解你不能，所以你的机会是通过 cURL 调用或通过[缓冲输出](http://php.net/manual/en/function.ob-start.php)检索页面，你应该做一些基准来比较两种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:44:45.973

您可以使用 jQuery JSONP 进行跨域 Ajax。[jQuery JSON 文档](http://api.jquery.com/jQuery.getJSON/)

您也可以在其他页面上进行

```
<?php echo file_get_contents("http://...yoururl..."); ?> 
```

[file_get_contents 文档](http://php.net/manual/en/function.file-get-contents.php)

其他有用的东西也许**ob_start()**

**控制器中的示例：**

```
function search() {
  ob_start();
  /* Your Controller Code as normal */

  $saved_output = ob_get_clean();
  /* Now you have output in a variable as-is and you can send it out */
} 
```

# html - XPath 可以用来解析静态 HTML/JSP 页面吗

> ID：13140059
> 
> 赞同：1
> 
> 时间：2012-10-30T13:28:23.477
> 
> 标签：html, parsing, jsp, xpath

我需要解析静态 JSP/HTML 页面以在批处理模式下识别标签和标签。

程序将运行并读取给定 WAR 或文件夹中的视图文件并对其进行解析。由于它不在运行时 DOM 将不可用。

所以需要一些指示可以使用 XPath 完成吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:09:03.713

XPath 旨在仅用于 XML 文档。

因此，您必须寻找能够将 JSP/HTML 解析为 XML 文档的解析器。如果您使用的是 JSPX 而不是 JSP，那么您只需为此使用 Java SE 的内置 JAXP。

```
InputStream input = getInputStreamOfJspOrHtml();
Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(input);
// ... 
```

但是，如果您使用的是旧版 JSP，可能充满了*scriptlet*和/或格式不正确的 HTML（例如使用`<br>`而不是`<br/>`），它们根本不会验证为 XML，那么您最好的选择是使用宽松的 HTML 解析器这是对无效语法的宽容，例如[JTidy](http://jtidy.sourceforge.net/)。

```
InputStream input = getInputStreamOfJspOrHtml();
Document document = new Tidy().parseDOM(input, null);
// ... 
```

无论哪种方式，一旦`org.w3c.dom.Document`您掌握了 a，您就可以按照通常的方式在其上运行 XPath。

# java - java android中的Onclick按钮语言更改

> ID：13140061
> 
> 赞同：0
> 
> 时间：2012-10-30T13:28:33.720
> 
> 标签：java, android

我正在寻找一种方法来实现由按钮 onclick 触发的语言更改。我在适当的文件夹中创建了适当的 strings.xml（例如 res/values-en/）这是我的按钮代码：

```
Button setEN_bt = (Button) findViewById(R.id.setEN);        
setEN_bt.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Locale locale_en = new Locale("en"); 
            Locale.setDefault(locale_en);
            Configuration config_en = new Configuration();
            config_en.locale = locale_en;
            getBaseContext().getResources().updateConfiguration(config_en, getBaseContext().getResources().getDisplayMetrics());
        }
    }); 
```

所以基本上我用 onclick 改变了语言环境，但是页面之后没有刷新（为什么应该......:)）。有人可以告诉我如何刷新/重新加载活动吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:36:17.797

你可以试着打电话

```
view.invalidate(); 
```

在您想要重绘本身的视图上。

我不确定这是否会重新加载语言环境。如果没有，您可以通过为自己创建一个新的 Intent 来重新启动 Activity：

```
Intent intent = new Intent(this, Activity.class);
startActivity(intent); 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:01:27.790

您可以使用

startActivity(new Intent(CurrentActivity.this, CurrentActivity.class)); 结束（）; 并在 onclick 方法的最后使用 finish() 方法完成上一个活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-14T13:56:42.277

您可以调用以下命令，而不是调用 startActivity() 和 finish()

```
recreate(); // which is available from API Level 11. 
```

我在这里找到了这个答案，它有另一种针对较低 API 级别的好方法： [如何重新启动 Android 活动](https://stackoverflow.com/questions/1397361/how-do-i-restart-an-android-activity)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-07T18:42:44.900

**第一种方法**

```
 String languageToLoad  = "en";
     Locale locale = new Locale(languageToLoad); 
     Locale.setDefault(locale);
     Configuration config = new Configuration();
     config.locale = locale;
     context.getResources().updateConfiguration(config,context.getResources().getDisplayMetrics());

     Intent intent = new Intent(XYZ.this, XYZ.class);
     intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);//it will recreate it self with new language.
     startActivity(intent); 
```

更改语言环境后，您需要重新启动 Activity。

**第二种方法**

```
 mLocale = new Locale("en");
          Locale.setDefault(mLocale); 
          Configuration config = new Configuration();
          config.locale = mLocale;
          getBaseContext().getResources().updateConfiguration(config, 
          getBaseContext().getResources().getDisplayMetrics());
          MainActivity.this.setContentView(R.layout.activity_main);//reset layout 
```

但它会起作用`api>=11`

# php - 如何将输入值显示为其他值并仍然获得值？

> ID：13140064
> 
> 赞同：1
> 
> 时间：2012-10-30T13:28:52.137
> 
> 标签：php, html, css

我从用户输入值中获取分页号，如下所示：

```
$html .= "<input type='submit' name='next' value='$next_page_number' />"; 
```

我想将此输入值文本显示为箭头“→”。
我怎样才能做到这一点并仍然从中获取输入值`$_POST`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:30:57.357

使用隐藏输入来存储实际值，具有您当前分配给提交按钮的名称。

```
<input type='hidden' name='next' value='$next_page_number' />
<input type='submit' name='submit' value='Your arrow thing' /> 
```

从这个`$_POST`角度来看，它不知道也不关心这个值来源于什么样的输入。它只知道输入的名称和它所持有的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:35:20.253

# c# - 在 WinForms 应用程序中托管的 WPF UserControl 中调用 PrintDialog.ShowDialog()

> ID：13140069
> 
> 赞同：1
> 
> 时间：2012-10-30T13:29:10.490
> 
> 标签：c#, wpf, winforms, printdialog, windowsformsintegration

我有一个使用 System.Windows.Controls.PrintDialog 的 WPF UserControl：

XAML：

```
<UserControl x:Class="WpfControlLibrary1.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">    
   <Button Click="Button_Click"/>
</UserControl> 
```

代码隐藏：

```
namespace WpfControlLibrary1
{
   using System.Windows;
   using System.Windows.Controls;

   public partial class UserControl1 : UserControl
   {
      public UserControl1()
      {
         InitializeComponent();
      }

      private void Button_Click(object sender, RoutedEventArgs e)
      {
         var printer = new PrintDialog();
         printer.ShowDialog();
      }
   }
} 
```

如果我现在在 WPF 应用程序中使用此 UserControl，则 PrintDialog-Windows 将显示为模式对话框。（如 msdn 中所述）

但是，如果我在 Wondows-Forms 应用程序中使用 UserControl，则该对话框将显示为非模态对话框。

当我在 Windows-Forms 应用程序中托管用户控件时，任何人都知道如何将 PrintDialog 称为模式对话框？

谢谢你的期待rhe1980

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:42:12.560

此处描述的解决方案/解决方法（德语）：

[http://mobilesolutions.noser.com/2013/01/winforms-meets-wpf-meets-winforms-meets-wpf-2/](http://mobilesolutions.noser.com/2013/01/winforms-meets-wpf-meets-winforms-meets-wpf-2/)

# css - div 的高度 - 应该相等且灵活

> ID：13140077
> 
> 赞同：0
> 
> 时间：2012-10-30T13:29:24.430
> 
> 标签：css

我想要三列：

*   *左栏*（红色背景）
*   *中心柱*（黄色背景）
*   *右栏*（黑色背景）

HTML，像这样：

```
<div id="container">
    <div id="left_column">
        <p>text</p>
    </div>

    <div id="center_column">
        <p>loooooong text</p>
        <p>other text</p>
    </div>

    <div id="right_column">
    </div>
</div>​ 
```

**每列应具有相同的高度（灵活）**

我做了演示[http://jsfiddle.net/4hj4f/8/](http://jsfiddle.net/4hj4f/8/) - 但是这个 CSS 是错误的 - 列有不同的高度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:32:24.997

您可以将**display:table**用于此类功能。像这样写：

```
body, html{height:100%}
#container {
    height: 100%;   
   display:table;    
}

#left_column, #center_column, #right_column {
    display: table-cell;
    width: 200px;
    height: 100%;
    vertical-align:top;
} 
```

检查这个[http://jsfiddle.net/4hj4f/9/](http://jsfiddle.net/4hj4f/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:59:14.467

设置容器高度。它足以设置您的条件。

```
#container {
height: 500px;            
} 
```

演示：[小提琴](http://jsfiddle.net/4hj4f/12/)

# iphone - 我想为球制作弹性效果

> ID：13140078
> 
> 赞同：0
> 
> 时间：2012-10-30T13:29:29.833
> 
> 标签：iphone, objective-c, cocos2d-iphone, game-physics, box2d-iphone

我在 cocos2d 中有带有 box2d 的 staticbody 和 dynamicbody。动态体是球。我想像弹簧一样有弹性。像这个例子：[例子](http://www.youtube.com/watch?feature=player_embedded&v=TK27I0U4TRU&noredirect=1) 谢谢。请帮忙

**普通的** ![在此处输入图像描述](../Images/49f66834c3d5c73ffebd5203720cba59.png)

**异常** ![在此处输入图像描述](../Images/44ae8e166a9725dc8c5e5984fa26b70f.png)

**非常不正常**

![在此处输入图像描述](../Images/7712ac793da523c1044c1cb36bef984e.png)

请帮忙。为什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:11:55.870

您可以使用 box2d 使用软距离关节模拟柔体：沿着所需形状的轮廓排列身体，将它们与关节连接，在由身体位置定义的顶点上绘制纹理。[你可以在这里](http://www.uchidacoonga.com/2012/03/soft-body-physics-with-box2d-and-cocos2d-part-14/)找到教程。

# javascript - Javascript function not firing

> ID：13140079
> 
> 赞同：1
> 
> 时间：2012-10-30T13:29:32.353
> 
> 标签：javascript, jquery

I am trying to fire a function every 60 seconds.

Here is my current code:

```
<script>
$(document).ready(function() {
    setInterval(alertme, 600000);
});  

function alertme() {
    alert('1 minute has passed');
} 
</script> 
```

For some reason the function alertme is not being called.

Any ideas why?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:30:47.263

Interval parameter in the setInterval function is in milliseconds.

So 1 minute = 60 sec = 60 * 1000 millisec = 60000 millisec

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:31:01.800

There are 1,000ms in a second, not 10,000\. This will fire after 10 minutes, not 1.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:31:32.987

60 seconds = 60000 ms not 600000

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:31:08.110

600000 isn't one minute...

setInterval is in milliseconds.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T13:35:08.693

Here is correct code:

```
<script>
$(document).ready(function() {
    setInterval(alertme, 60000);
});  

function alertme() {
    alert('1 minute has passed');
} 
</script> 
```

# java - 在执行期间动态更改persistence.xml中的内容

> ID：13140082
> 
> 赞同：3
> 
> 时间：2012-10-30T13:29:35.360
> 
> 标签：java, jpa

由于某种原因，我需要在程序执行期间动态更改persistence.xml的内容，（使用JPA），我需要更改主机地址。这可能吗？
非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T14:30:49.693

您可以使用`createEntityManagerFactory(unitName, map)`方法来更改`Persistence Context`. 在我的示例中，`Persistence Unit Name`将是 dynamicJPA。

例子 ：

```
protected EntityManager getEntityManager(String driver, String url, String username, String password) {
    EntityManager em = null;
    Map properties = new HashMap();
    properties.put("javax.persistence.jdbc.driver", driver);
    properties.put("javax.persistence.jdbc.url", url);
    properties.put("javax.persistence.jdbc.user", username);
    properties.put("javax.persistence.jdbc.password", password);
    try {
        emf = Persistence.createEntityManagerFactory("dynamicJPA", properties);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return em = (EntityManager) emf.createEntityManager();
} 
```

您还可以使用`PersistenceUnitMetaData`.Reference`DataNucleus`动态[生成的 Persistence-Unit](http://www.datanucleus.org/products/datanucleus/jpa/persistence_unit.html)

# iphone - UIScrollView 不适用于 xcode 4.5 ios 6.0 中的任何组件

> ID：13140084
> 
> 赞同：1
> 
> 时间：2012-10-30T13:29:37.627
> 
> 标签：iphone, ios6

我尝试过使用`UIScrollView`contains`UITextfield`和其他组件。它在不包含任何组件（`UITextfield`）的情况下工作，但即使我只是在其上放置任何组件，它也无法工作。

我刚刚尝试使用此代码并将滚动视图属性映射到`UIScrollview`UI 组件。

任何人都可以帮助我摆脱这个问题。

```
- (void)viewDidAppear
{
.....
[scrollView setScrollEnabled:YES];
[scrollView setContentSize: CGSizeMake(320, 830)];
....
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:16:49.717

除了取消选中 Use Autolayout 之外，我还需要将模拟指标下的大小从 Retina 4 Full Screen 更改为 None 以使其工作。

# jquery - 随着页面滚动移动的固定位置页脚

> ID：13140091
> 
> 赞同：0
> 
> 时间：2012-10-30T13:30:04.047
> 
> 标签：jquery, scroll, footer, offset, sticky

我有一个单页 wordpress 网站，其中包含向下滚动页面的菜单项。目前我的页脚位于页面底部，但是我希望它从顶部向下大约 1500 像素，并且当您滚动经过它时，它会粘在浏览器窗口的底部。有人可以给我一些指导吗？

网站目前在这里举行： [网站链接](http://www.theres-a-thought.com/client-timmins)

谢谢，山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:34:42.107

1) 添加`position: fixed;`到`#custom_footer`;

2）添加一个`margin-bottom`大`#csp3_content`。

这对我有用：

```
#custom_footer {
  position: fixed;
  bottom: 0;
}

#csp3_content {
  margin-bottom: 1000px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:39:27.587

您是否尝试过添加样式`top:1500px;`和`position: fixed``#footer`

```
#footer {
 margin: 150px 0 0 0;
width: 960px;
float: left;
top: 1500px;
position: fixed;
color: white;
} 
```

# php - update database with new info but keep old info aswell

> ID：13140095
> 
> 赞同：0
> 
> 时间：2012-10-30T13:30:17.207
> 
> 标签：php, mysql, sql, database-design

How do you update a database with new info but keep old info aswell?

My aim is to have a favorites button that when clicked it will add the item id to a members favorites list so they could call something like fav.php?fav=janedoe and their favorites list be listed.

I know how to add the button and get the item id from database I just really need the mysql query I would run to update aswell as what the "type" would be when creating the database column I think.

info inside the row would then look like this

`1,12,14,15,34,46,74`

then if member wanted to add item 98 it would update to

`1,12,14,15,34,46,74,98`

adding 98 to the end.

I realise this is kind of a "can you do this for me" post, but I just haven't a clue where to start.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:33:36.217

You should create a new table called something like:

**`MembersFavoritePage:`**

*   `MemberId`.
*   `PageId`.
*   ...

Then whenever the user mark a page as a favourite page do an insert into this table.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:42:03.907

IF you do want to maintain the string you could do this in the query:

```
UPDATE `table`
SET `fav` = CONCAT(`fav`, ",98")
WHERE `id` = 1234; 
```

Or do the concat in PHP and just update with that - i.e. get existing string first - but that means 2 queries.

But the separate table is best as suggested by @MahmoudGamal. As this is difficult to 'remove' items from... you'd need to do the manipulation PHP-side.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:42:48.563

You should not save comma separated values in single column. It is a violation of [First normal form](http://en.wikipedia.org/wiki/1NF)

Check below answer for broader explanation:

[Is storing a delimited list in a database column really that bad?](https://stackoverflow.com/questions/3653462/is-storing-a-comma-separated-list-in-a-database-column-really-that-bad)

The best approach is to create separate table as suggested by @Mahmoud Gamal which is easy to maintain in long run.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T13:48:21.703

What about creating a table "favs" in which you can store the id and the user who added it to his favs'list?

```
ID | USER_ID
------------
5  | user_1
6  | user_1
8  | user_2
6  | user_2

select ID from favs where USER_ID = "user_1" 
```

this will get pages'id for user_1.

Remember you'll need to manage the insert/update/delete for this table, if the user needs to add/remove a fav page.

An easier solution could be having a favs pages field in the user's detail

```
USER_ID| FAVS
-------|-----
user_1 | 5*6
user_2 | 8*6 
```

By using this solution, you will able to easily parse the favs field and get info about the pages (in this case you'll just need to parse the string).

When you'll need to update or remove any page from a user favs'list, you can just parse the string, remove the page id you want to delete or append the new page to the string.

The cons in this case will be you will not be able to find a fav page easily (you'll end up using LIKE construct).

# javascript - 到达数组末尾后如何执行函数？

> ID：13140097
> 
> 赞同：0
> 
> 时间：2012-10-30T13:30:27.510
> 
> 标签：javascript, arrays, validation, for-loop, multidimensional-array

我有以下代码...

```
 var min_val = [{"id":"driverDOA","value":date_of_accident},etc etc...];//put validation elements in an array

       for (var i=0;i<min_val.length;i++)//loop through each element if array
        {
            var object = min_val[i];
            if(object.value == "" || object.value == null)//if element is null or empty then execute code
                {
                    document.getElementById(object.id).parentNode.innerHTML += '<div class="prompt accident">*</div>';
                    document.getElementById('accident-tab').innerHTML += '<div class="prompt accident">*</div>';
                    return false;
                }
            else
                {
                    $('.prompt accident').remove();
                                            sendAjaxRequest();
                }
        } 
```

基本上，我通过将所需的元素存储在数组中来验证表单。然后我循环遍历数组并检查是否有任何空值。如果用户留下了一个值，则该元素旁边和该部分的选项卡上会显示一个星号。

一旦用户填写了所有标记的表单元素，代码就会删除星号并发送 Ajax 请求。

然而，一旦找到一个空元素，它就会显示星号并停止。

我需要的是它每次循环遍历整个数组并显示所有星号。我有一种感觉，这将非常简单，但无法找到任何东西或弄明白。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:33:24.643

```
var hasError=false;
for (var i=0;i<min_val.length;i++)//loop through each element if array
        {
            var object = min_val[i];
            if(object.value == "" || object.value == null)//if element is null or empty then execute code
                {
                    document.getElementById(object.id).parentNode.innerHTML += '<div class="prompt accident">*</div>';
                    document.getElementById('accident-tab').innerHTML += '<div class="prompt accident">*</div>';
                    hasError= true;
                    //return false; // remove this...
                } else $('.prompt accident').remove();
        }
  if(!hasError) {
       sendAjaxRequest();
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:33:37.827

这里

将 return false 更改为`noerror=false`，添加`var noerror=true`到循环之前并以`return noerror`

像这样

```
var noerror=false, min_val = [{"id":"driverDOA","value":date_of_accident},etc etc...];//put validation elements in an array
$('.prompt accident').remove(); // reset
for (var i=0;i<min_val.length;i++) { //loop through each element if array
  var object = min_val[i];
  if(object.value == "" || object.value == null) { //if element is null or empty then execute code
    document.getElementById(object.id).parentNode.innerHTML += '<div class="prompt accident">*</div>';
    document.getElementById('accident-tab').innerHTML += '<div class="prompt accident">*</div>';
    noerror=false;
  }
 }
 if (noerror) {              
  sendAjaxRequest();
 }
 return noerror;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:32:52.970

不要`return false`。只是`continue`。

**编辑：**更好的解决方案是：

```
 var min_val = [{"id":"driverDOA","value":date_of_accident},etc etc...];//put validation elements in an array
       var valid = true; // I MADE A CHANGE HERE
       for (var i=0;i<min_val.length;i++)//loop through each element if array
        {
            var object = min_val[i];
            if(object.value == "" || object.value == null)//if element is null or empty then execute code
                {
                    document.getElementById(object.id).parentNode.innerHTML += '<div class="prompt accident">*</div>';
                    document.getElementById('accident-tab').innerHTML += '<div class="prompt accident">*</div>';
                    valid = false; // AND HERE
                }
            else
                {
                    $('.prompt accident').remove();
                                            sendAjaxRequest();
                }
        }
        return valid; // AND HERE 
```

# jquery - 向此函数 Jquery 添加回调

> ID：13140105
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:30:53.270
> 
> 标签：jquery

我需要添加这个函数fadeInBoxes(); 作为此点击函数的回调。我无法获得适合我一生的语法。因此，在完成所有这些工作之后，我想在上面加载我的函数。有任何想法吗？

```
$(".select").click(function(){
     fadeBoxes();
     var num = $(this).attr('rel');
     $("ul").roundabout("animateToChild", num);
     chageDots(num);
  }); 
```

完整代码

```
$(document).ready(function() {

     function chageDots(dot){
        for (var i = 0; i < 5; i++) {
           $("#dot0"+i).removeClass("active");

        };
        $("#dot0"+dot).addClass("active");
     };

     var images = ["img1.jpg","img1.jpg","img1.jpg","img1.jpg","img1.jpg"];

     for (var j = 0; j < 5; j++) {
        $("#img0"+j).css("background-image","url('"+images[j]+"')");
        $("#img0"+j).css("background-size","cover");
     };

     var fade_start=false;
     chageDots(0);

    $('ul').roundabout({          
        btnNext: '.next',          
        btnPrev: '.back',
        btnNextCallback: function() {
           var data = $(this).data("roundabout");
           var current_num = data.childInFocus;
           chageDots(current_num);
           fadeInBoxes();
        },
        btnPrevCallback: function() {
           var data = $(this).data("roundabout");
           var current_num = data.childInFocus;
           chageDots(current_num);
           fadeInBoxes();
        },
        clickToFocusCallback: function(){
           var data = $(this).data("roundabout");
           var current_num = data.childInFocus;
           chageDots(current_num);
           current_num.click == false;
           fadeInBoxes();
        }
     }); 

  $(".next").click(function() {
     fadeBoxes();
  });
  $(".back").click(function() {
     fadeBoxes();
  });
  $("li").click(function() {
     fadeBoxes();
  });

  $(".select").click(function(){
     fadeBoxes();
     var num = $(this).attr('rel');
     $("ul").roundabout("animateToChild", num);
     chageDots(num);

  });

  function fadeBoxes (){
     if(fade_start != true){
        fade_start = true;
        $("#mainBox").fadeOut("fast",function() {
         // Animation complete.
         fade_start = false;
        });
        $("#leftBox").fadeOut("fast",function() {
         // Animation complete.
         fade_start = false;
        });
        $("#rightBox").fadeOut("fast",function() {
         // Animation complete.
         fade_start = false;
        });
     } 
  };
  function fadeInBoxes (){
     $("#mainBox").fadeIn(200);
     $("#leftBox").fadeIn(100);
     $("#rightBox").fadeIn(100);
  }; 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:38:46.403

找这个：[jquery click callback](https://stackoverflow.com/questions/7394938/jquery-click-callback)
Pioul 说：点击事件立即触发，持续时间为0，因此没有任何回调。

# sql-server-2012 - SQL Server 2012 数据质量服务第三方参考文档

> ID：13140110
> 
> 赞同：2
> 
> 时间：2012-10-30T13:31:02.753
> 
> 标签：sql-server-2012, data-quality-services

他们是否有任何文档可以为 SQL Server 2012 的 DQS 第三方参考编写自己的服务？

我不会使用 Azure 数据市场，所以我只需要知道如何为参考创建自己的 Web 服务（配置菜单中的“第三方参考”-参考）。

我将 OData 与 WCF 一起使用，但是当我想在我的 DQS 客户端中添加服务时，它只说服务器正在关闭或帐户 ID、URI 错误。

我不知道帐户 ID 代表什么。

也许你们中的某个人有一个例子或一个想法。

谢谢

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:43:46.417

AFAIK，目前 [2012 年 12 月 10 日] - 我们不能有我们的参考数据集。我也有兴趣知道如何编写自己的服务。MSDN 线程：[http ://social.msdn.microsoft.com/Forums/en-US/sqldataqualityservices/thread/8e50dbd8-566e-4edc-a7f5-d3a0c3af9643](http://social.msdn.microsoft.com/Forums/en-US/sqldataqualityservices/thread/8e50dbd8-566e-4edc-a7f5-d3a0c3af9643)

# macos - 选择器喜欢 OS X 的自定义控件？

> ID：13140113
> 
> 赞同：5
> 
> 时间：2012-10-30T13:31:12.197
> 
> 标签：macos, cocoa, appkit

是否有[OSS](http://en.wikipedia.org/wiki/Open-source_software)自定义控件或源代码示例用于在 Mac OS X 上执行类似 iOS Picker 控件的操作（旋转桶的东西）？

![在此处输入图像描述](../Images/212d9d17d8fadabe26a2e5ed03c25af7.png)

[在http://www.cocoacontrols.com](http://www.cocoacontrols.com)等网站和网站上进行一些研究并没有发现任何结果。

我意识到该范例对于许多场景来说会很尴尬，但是对于我正在开发的休闲应用程序的屏幕空间（和设计）而言，它会是理想的。

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:04:23.623

您可能需要考虑自定义可用控件以创建旋转桶效果。没试过，但可能有点矫枉过正。我可能会考虑为内容使用带有文本的按钮（或带有自定义单元格的表格视图），和/或带有动画的滚动视图用于滚动事件。对于 Mac OS X 来说，这可能是一个有用的自定义，而无需考虑 UIPickerView 是为触摸屏设计的。

编辑：这可能是您想要的方向的开始。-> [https://gist.github.com/1558664](https://gist.github.com/1558664)

# python - Django：从模板调用视图

> ID：13140116
> 
> 赞同：0
> 
> 时间：2012-10-30T13:31:17.357
> 
> 标签：python, django, templates, view

如何在我的布局（模板）中调用视图？

例如：我网站的每个页面上都有一个表格。我需要为每个页面生成 CSRF 令牌，但我不想将生成代码放在每个视图上。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:03:16.650

在 Django 中，一旦你到达模板，我不相信你可以调用 Zend 的 Action Helper 的效果。显然，您可以对 Django 中公开的 url 进行 AJAX 调用并检索必要的数据。在这种情况下，您可以将 csrf 令牌提供给 ajax 调用，如下所示。

```
$.ajaxSetup({data: {csrfmiddlewaretoken: '{{ csrf_token }}' },}); 
```

我不是百分百确定，但您可以在[装饰器](https://docs.djangoproject.com/en/dev/topics/http/decorators/)（可以在处理请求之前将其应用于您选择的多个视图）或在[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)（应用于所有已处理的视图）中实现 Zend 的 Action Helper 之类的东西要求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:36:57.963

如果您的表单只是 HTML，那么只需拥有一个包含 HTML 的模板并包含来自其他模板的模板（或将其包含在您的基本模板中）。要生成 CSRF 令牌，您只需在模板中使用 {% csrf_token %}，如[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/中所述](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

如果你想生成 Django 表单的 HTML，那么你可以添加一个上下文处理器 - 在[https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)中解释- 那生成表单，然后所有模板都可以使用该表单。

```
def form_processor(request):
    form = Form()
    return { 'form': form.as_p() } 
```

模板：

```
<form>{% csrf_token %}{{ {{ form }}</form> 
```

# vba - VBA 复选框：需要一个优雅的解决方案

> ID：13140119
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:31:24.190
> 
> 标签：vba

我有一个 VBA 问题，我们正在寻找一个快速而优雅的解决方案。

问题与复选框有关：它们的选择和取消选择。

假设我们从一行四列数据开始（单元格 A1:A4：

```
A   B   Star    D 
```

我们有三个*未选中*的框： `Galaxy`, `Universe`, `Planet`。

检查后`Galaxy`，该行被动态复制（到下一个空行）

```
A   B   Star    D
A   B   Galaxy  D 
```

如果我们检查所有三个我们有：

```
A   B   Star    D
A   B   Galaxy  D
A   B   UniverseD
A   B   Planet  D 
```

现在，如果我们取消选中`Universe`.. 该行将自动省略为：

```
A   B   Star    D
A   B   Galaxy  D
A   B   Planet  D 
```

我喜欢这种设置的实时“如你所见”的感觉。有没有一种我不能用来编码的优雅方法？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:46:49.763

```
Function GetDataBasedOnSelection(ByVal galaxyChecked As Boolean, ByVal universeChecked As Boolean, _
ByVal planetChecked As Boolean) As Variant
Dim currentRow As Integer
Dim retVal(1 To 3, 1 To 4)

currentRow = 1
If galaxyChecked Then
    GoSub fillInCommonValuesInThisRow
    retVal(currentRow, 3) = "Galaxy"
    currentRow = currentRow + 1
End If

If universeChecked Then
    GoSub fillInCommonValuesInThisRow
    retVal(currentRow, 3) = "Universe"
    currentRow = currentRow + 1
End If

If planetChecked Then
    GoSub fillInCommonValuesInThisRow
    retVal(currentRow, 3) = "Planet"
    currentRow = currentRow + 1
End If

GetDataBasedOnSelection = retVal
Exit Function

fillInCommonValuesInThisRow:
    retVal(currentRow, 1) = "A"
    retVal(currentRow, 2) = "B"
    retVal(currentRow, 3) = ""
    retVal(currentRow, 4) = "D"
Return
End Function 
```

如何使用上述方法：

```
'Pass the actual selection (true if the checkbox is checked, false otherwise)
Range("A2:D4").Value = GetDataBasedOnSelection(True, False, True) 
```

# typo3 - 使用流体从 Tx_Extbase_Persistence_QueryResult 创建一个表

> ID：13140124
> 
> 赞同：0
> 
> 时间：2012-10-30T13:31:45.093
> 
> 标签：typo3, fluid, extbase

我正在使用typo3并学习它是如何工作的。我正在尝试用一些图片构建一张桌子，但我尝试过的所有方法都没有奏效。因此，我想就如何实现这一点提出一些建议。

这是我所拥有的：

在我的控制器上，我得到一个带有一组图片的[Tx_Extbase_Persistence_QueryResult ：](http://doxygen.frozenkiwi.com/typo3/html/d5/dd7/QueryResult_8php_source.html)

```
$fileElements = $fileElementRepository->getFileElementsByNumberOf($id,     $numberOfElements);

$this->view->assign('fileElements', $fileElements); 
```

这是我在 index.html 上对它们所做的：

```
<table>
<tr>
  <f:for each="{fileElements}" as="satArc">
<td>
   <f:image src="{satArc.filePath}" alt="{satArc.linkText}" />
</td>
  </f:for> 
```

目前我得到了所有可用的图片。因为我在标签内有 for 循环。但我想找到一种方法将它们分组为 4 张图片。但是我还没有弄清楚如何将queryResult分成4个元素组。

我希望这足够清楚，否则请询问。

谢谢阅读 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:33:35.650

您可以使用

```
<f:for each="{...}" as="...">
    <f:cycle values="{0:'', 1:'', 2:'', 3:1}" as="isLast">
       <f:if condition="{isLast} == 1">...</f:if>
   </f:cycle>
</f:for> 
```

因此，您可以关闭该行并开始一个新行。

# asp.net - 使用 STS 身份验证令牌使用 WCF Web 服务

> ID：13140125
> 
> 赞同：2
> 
> 时间：2012-10-30T13:31:48.433
> 
> 标签：asp.net, claims-based-identity, sts-securitytokenservice

我正在寻找一些我还没有找到的东西。你能否告诉我，如果有一种方法可以使用，STS 返回的令牌，以及声明感知的 WCF Web 服务。就像现在我正在尝试做的那样，我能够创建一个声明感知 WCF 服务，但是当我尝试在依赖方（已由 STS 验证）中调用它的功能时，它无法使用它。它给出了一个错误{“无法验证传入的策略。有关更多信息，请参阅事件日志。”}

任何帮助或建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:18:34.743

终于得到了我的问题的答案。现在，当涉及到使用声明感知 Web 服务时，我们应该有一个 Active STS 用于其身份验证。安全令牌服务有两种，一种是主动的，另一种是被动的。Active 用于验证 Web 服务，Passive 用于网站验证。

# canvas - 需要 AS3 Bitmapdata Canvas spritesheet 加载器帮助

> ID：13140126
> 
> 赞同：1
> 
> 时间：2012-10-30T13:31:48.713
> 
> 标签：canvas, for-loop, tiles, bitmapdata

我对 AS3 非常陌生，虽然我每天都阅读一些指南，但我还不是很了解所有基本语法。我正在使用这个 bitmapdata 画布将 spritesheets 加载到画布上，并使用 foo 循环，我试图让地图填充瓷砖，但我没有运气。

```
 for (var i:int = 0; i < columns; i++)
        {
            for (var j:int = 0; j < rows; j++)
            {
                smb3SpriteSheet = new SMB3(new SMB3SpriteSheet(), smb3XML.animation, 175);
                smb3SpriteSheet.x = startX;
                smb3SpriteSheet.y = startY;
                canvas.addSprite(smb3SpriteSheet);
                startX = startX + 16
            }
            startX = 0
            startY = startY + 16
        } 
```

此代码应该创建一个新的位图数据，它将添加到空白背景位图上，设置 x 和 y 坐标，然后向下移动一个空格并重复，但是当我编译时，唯一出现的图块是最后一个图块. 我在网上查看过，但没有找到有关以这种方式使用位图数据的信息。我应该用它来完成任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:45:49.890

我不知道 SMB3 类应该做什么，但我认为您收到最后一张图像只是因为每次在同一画布中尝试绘制时都调用您调用的精灵表。因此，每次调用画布时，实际上都是在用新内容替换当前内容，即使您正在创建新的 SMB3。您需要考虑一个显示对象不能有多个父对象。

因此，要使您的代码正常工作，您可以`Sprite`为每个图像使用单独的，这是绝对不推荐的，或者使用`BitmapData`并执行画布的图像绘制，然后才将 分配`Bitmap`给 Sprite。

您有几种方法可用于此操作。您可以使用`BitmapData`'s`copyPixels`或`draw`方法`clone`。

以下是与您的问题相关的两个资源：

[添加 Sprite 的多个实例？](https://stackoverflow.com/questions/6225689/adding-multiple-instances-of-a-sprite)

[显示精灵的另一个实例](https://stackoverflow.com/questions/6225561/show-another-instance-of-a-sprite)

# jquery - 无法使用 Ajax 和 jQuery Validate 提交表单

> ID：13140133
> 
> 赞同：2
> 
> 时间：2012-10-30T13:32:07.653
> 
> 标签：jquery, ajax, forms, post, jquery-validate

我承认，我是 AJAX 的新手，我一直只是以老式的方式提交表单，并在表单本身上有一个 post 操作，这很好。现在我正在尝试使用 jQuery validate 插件通过 AJAX 在 jQuery 中提交表单。

我还没有检查我的服务器端验证，我只是想确保我可以验证并提交我的客户端信息。我找不到将它们放在一起的单一资源。我可以找到很多关于使验证工作的信息，并且我找到了关于通过 AJAX 发布的信息，但我似乎无法将它们全部串在一起。

我的提交代码有点像这样：

```
$(function() {
$("#contactForm .submit-button").click(function() {
    var Name = $("#Name").val();
    var Phone = $("#Phone").val();
    var Email = $("#Email").val();
    var Message = $("#Message").val();
    var dataString = 'Name=' + Name + '&Phone=' + Phone + '&Email=' + Email + '&Message=' + Message;

    $.ajax({
    type: "POST",
    url: "scripts/contactengine.php",
    data: dataString,
    success: function(){
        $('#contactForm').fadeOut(1000);
              $('.thanks').fadeIn(1000);
    }
    });
    return false;

}); 
```

})

但是，似乎我必须使用 jQuery 验证的提交处理程序：

```
$("#myForm").validate({
rules: {
    command: 'required'
},

messages: {
    command: 'Please enter a command.'
},

submitHandler: function(form) {
    $(form).ajaxSubmit({
        success: function(data) { /* ... */ },
        url: form.action,
   }); 
```

我的问题是我已经尝试了几种不同的方法来将我的代码组合在一起，但我似乎无法创造任何魔法......我也进行了一些搜索，但我什么也没想到.

我希望有人可以帮助解释我需要做些什么才能将它组合在一起，如果有人可以推荐一个很好的资源来使用这种方法在 PHP 中进行服务器端验证，我将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:50:24.840

`.ajaxSubmit`使用 jQuery 表单插件。如果您没有包含它，您将收到一个脚本错误，您可以在任何浏览器控制台中看到该错误。`ajaxSubmit is not a funcion`将根据浏览器阅读或类似内容

您可以采取多种方法。

在验证插件之外定义您的提交处理程序并删除 submitHandler 选项：

```
$("#contactForm").submit(function() {
      var $form=$(this)
    /* don't need to manually code each key/value pair*/
    var data= $form.serialize()

    $.ajax({
    type: "POST",
    url: "scripts/contactengine.php",
    data: data,
    success: function(){
        $form.fadeOut(1000);
              $('.thanks').fadeIn(1000);
    }
    });
    return false;

}); 
```

或者在验证插件的 submitHandler 选项中调用自己的 ajax：

```
submitHandler: function(form) {
   var data= $(form).serialize()

        $.ajax({
        type: "POST",
        url: "scripts/contactengine.php",
        data: data,
        success: function(){
            $(form).fadeOut(1000);
                  $('.thanks').fadeIn(1000);
        }
        });
    return false;
} 
```

# c++ - Recursive function to create a text edit

> ID：13140134
> 
> 赞同：0
> 
> 时间：2012-10-30T13:32:09.493
> 
> 标签：c++, objective-c, ios, recursion

I have controls in my view. All objects have different width and height. I have an array of these objects. I need to write recursive function that will move to a new line my objects if they don't fit in the current line (something like in notepad or textedit).

I suppose we need to check current object from array in cycle and if it fits to width we don't do any operations and if it does not fit to width of current view (line) we should to make recursion. am I right? And move our object to new line while we have object in array.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:13:28.233

You can do it like this (assuming all starts at 0.0):

```
 NSArray* your_elements = ... //your elements in an NSArray (labels, buttons any type of views)

    CGFloat currentX = 0.0;
    CGFloat currentY = 0.0;

    CGFloat maxX = 320.0;
    CGFloat lineHeight = 12.0;

    for (UIView* some_view in your_elements) {
        CGRect newframe = some_view.frame;
        newframe.origin.x = currentX;
        newframe.origin.y = currentY;

        currentX += newframe.size.width;
        some_view.frame = newframe;

        if (currentX>maxX) {
            currentX = 0.0;
            currentY += lineHeight;
        }
    } 
```

# python - 查找包含特定字符串的 url

> ID：13140136
> 
> 赞同：0
> 
> 时间：2012-10-30T13:32:12.767
> 
> 标签：python, regex, web-scraping, beautifulsoup

我以前没有使用过 RegEx，每个人似乎都同意它对网页抓取和 html 尤其不利，但我不确定如何解决我的小挑战。

我有一个小的 Python 爬虫，可以打开 24 个不同的网页。在每个网页中，都有指向其他网页的链接。我想制作一个简单的解决方案来获取我需要的链接，即使网页有些相似，但我想要的链接却不是。

url 之间唯一的共同点似乎是一个特定的字符串：'uge' 或 'Uge'（uge 在丹麦语中表示周 - 周数每周都在变化，呵呵）。这不像 url 有一个共同的 ID 或类似的东西，我每次都可以用来定位正确的。

我认为可以使用 RegEx 浏览网页并找到所有包含“uge”或“Uge”的网址，然后打开它们。但是有没有办法使用 BS 来做到这一点？如果我使用 RegEx 来做，可能的解决方案会是什么样子？

例如，这是我想在不同网页中抓取的两个 url：

[http://www.domstol.dk/KobenhavnsByret/retslister/Pages/Uge45-Tvangsauktioner.aspx](http://www.domstol.dk/KobenhavnsByret/retslister/Pages/Uge45-Tvangsauktioner.aspx)

[http://www.domstol.dk/esbjerg/retslister/Pages/Straffesageruge32.aspx](http://www.domstol.dk/esbjerg/retslister/Pages/Straffesageruge32.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:47:07.793

这应该可以工作...... RegEx`uge\d\d?`告诉它查找“uge”后跟一个数字，可能还有另一个。

```
import re
for item in listofurls:
  l = re.findall("uge\d\d?", item, re.IGNORECASE):
  if l:
    print item #just do whatever you want to do when it finds it 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:36:11.687

或者只使用一个简单的 for 循环：

```
list_of_urls = ["""LIST GOES HERE"""]
for url in list_of_urls:
    if 'uge' in url.lower():
        # Code to execute 
```

正则表达式看起来像：`uge\d\d`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:37:14.267

是的，你可以用 BeautifulSoup 做到这一点。

```
from BeautifulSoup import BeautifulSoup
soup = BeautifulSoup(html_string)
# To find just 'Uge##' or 'uge##', as specified in the question:
urls = [el["href"] for el in soup.findAll("a", href=re.compile("[Uu]ge\d+"))]
# To find without regard to case at all:
urls = [el["href"] for el in soup.findAll("a", href=re.compile("(?i)uge\d+"))] 
```

# facebook - 如何获得准确的 Facebook 点赞数？

> ID：13140138
> 
> 赞同：2
> 
> 时间：2012-10-30T13:32:11.180
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-fql

我的网站上有 Facebook like 按钮，创建如下：

```
<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2fexample.com&layout=button_count&show_faces=false&width=110&action=like&colorscheme=light&height=35"
  scrolling="no" frameborder="0"
  allowTransparency="true">
</iframe> 
```

此刻的点赞数显示为`1,5 k`。我想得到喜欢的确切数量。

我试图查询`http://graph.facebook.com/?id=http%3A%2F%2Fexample.com`，但我得到的回应是：

```
{
   "id": "http://example.com",
   "shares": 349
} 
```

我也尝试过使用 FQL：

```
http://graph.facebook.com/fql?q=SELECT 
                                  like_count,total_count,click_count,commentsbox_count
                                FROM link_stat
                                WHERE url='http%3A%2F%2Fexample.com' 
```

回应是：

```
{
   "data": [
     {
       "like_count": 251,
       "total_count": 349,
       "click_count": 0,
       "commentsbox_count": 0
    }
  ]
} 
```

我怎样才能得到准确的计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:14:11.187

确切的计数是您在此处看到的 total_count。出于某种原因，Facebook 将评论和分享视为喜欢按钮。

不要忘记[http://example.com](http://example.com)不同于[https://example.com](https://example.com)和[http://www.example.com/](http://www.example.com/) 确保将所有这些别名加起来。

# javascript - 首先尝试 JavaScript 原型设计

> ID：13140141
> 
> 赞同：0
> 
> 时间：2012-10-30T13:32:23.360
> 
> 标签：javascript, prototype

我只是在涉及 JavaScript 原型的地方弄湿了，我遇到了一些麻烦。

我需要根据原型对象为我正在处理的系统创建`_LEAVE`一个`LEAVE`原型对象。该`_LEAVE`对象有一个名为 的函数`Ready`，该函数应在文档准备好时触发。该系统已经在它的一些旧代码中具有类似的功能，我正在努力保持它的统一。

这是我正在尝试的代码，但我不断收到错误消息：

```
var LEAVE = function () {

}

$(document).ready(function () {
    _LEAVE.Ready();
});

var _LEAVE = function (params) {

    this.Ready = function () {
        alert ("Leave Ready");
    };
}

_LEAVE.prototype = new LEAVE(); 
```

错误：

> SCRIPT438：对象不支持属性或方法“就绪”leave.js，第 6 行字符 5

我不确定我哪里出错了，因为这似乎是系统其他部分正在发生的事情。至少，类似的事情正在发生，但我正在努力将我的思想包裹在旧代码上......

任何人都可以给我任何建议，我将不胜感激！:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:36:07.653

我不确定我是否正确理解了您，但是您是否正在尝试创建对象的*实例*`LEAVE`？如果是这样，`LEAVE`需要是一个构造函数，并且`Ready`应该是一个方法`prototype`：

```
var LEAVE = function () {};
LEAVE.prototype.Ready = function () {
    alert("Leave Ready");
}; 
```

`LEAVE`现在，您可以通过使用运算符调用构造函数来实例化`new`：

```
var _LEAVE = new LEAVE(); // _LEAVE is an instance of LEAVE
$(document).ready(function () {
    _LEAVE.Ready(); // Ready is a method of `LEAVE.prototype`
}); 
```

声明为`prototype`对象属性的方法由所有实例共享。所以所有的实例`LEAVE`都会有一个`.Ready`可用的方法，但它们将共享内存中函数的一个副本（分配给 属性的副本`LEAVE.prototype`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:59:36.773

您在这里所做的只是从父 LEAVE 函数继承了子 _LEAVE 函数。但是如果要调用子类中的方法，则需要创建它的实例。所以你需要创建一个 _LEAVE 类的实例。只需添加这一行：

var **_LEAVE_OBJECT = 新的 _LEAVE();**

并使用**_LEAVE_OBJECT.Ready()**而不是 _LEAVE.Ready(); 在 $(document).ready 中。

修改后的代码：

```
var LEAVE = function () {

}

$(document).ready(function () {
 _LEAVE_OBJECT.Ready();
});

var _LEAVE = function (params) {
   this.Ready = function () {
    alert ("Leave Ready");
    };  
}
_LEAVE.prototype = new LEAVE();
var _LEAVE_OBJECT = new _LEAVE(); 
```

# asp.net - 使用 xmldatasource 对 Gridview 进行排序的最佳方法？

> ID：13140143
> 
> 赞同：2
> 
> 时间：2012-10-30T13:32:23.797
> 
> 标签：asp.net, .net, gridview, xmldatasource

我首先尝试使用 xmldatasource 并发现您无法对其进行排序。如果您尝试，您只会收到错误：“System.NotSupportedException：数据源不支持排序。”

```
 GridView1.AllowSorting = true;
    DataSet carsDataSet;
    string filePath = Server.MapPath("App_Data/cars.xml");
    carsDataSet = new DataSet();
    //Read the contents of the XML file into the DataSet
    carsDataSet.ReadXml(filePath);
    GridView1.DataSource = carsDataSet.Tables[0].DefaultView;
    GridView1.DataBind(); 
```

这会给我一个异常：“异常详细信息：System.Web.HttpException：未处理的 GridView 'GridView1' 触发事件排序。”

我的xml是这样的：

```
<Cars>
<car>
<id>11</id>
<make>Audi</make>
<model>A4</model>
<price>39000</price>
</car>
</Cars> 
```

那么解决这个问题的最佳方法是什么？或者我可以以某种方式处理排序事件吗？或者将xml数据加载到LINQ或类似的东西会更容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:50:50.397

好的，我为您找到了几个可能的答案。首先，如果您想专门使用 XmlDataSource，答案是使用 XSLT 文件来指定翻译，如本 QA 所示：

[如何正确地将 XSLT 参数传递给 XmlDataSource？](https://stackoverflow.com/questions/6046002/how-do-i-pass-a-xslt-parameter-to-a-xmldatasource-correctly)

或者，这篇文章描述了如何使用 XDocument 将 GridView 绑定到 LINQ 查询的结果以加载 XML 文件：

[http://forums.asp.net/t/1627778.aspx/1?Sort+results+from+XMLDataSource](http://forums.asp.net/t/1627778.aspx/1?Sort+results+from+XMLDataSource)

# android - 未使用 setSelection(0) 方法选择 Android 第一行

> ID：13140146
> 
> 赞同：0
> 
> 时间：2012-10-30T13:32:30.913
> 
> 标签：android, android-listview

经过多次尝试，我正在使用“mListView.setSelection(0);” 当列表出现时选择我的 ListView 中的第一行。但不知道为什么它不起作用。那么我怎样才能让第一行总是被点击呢？因为在我的应用程序中，左侧有一个列表视图，右侧有一个网络视图。所以我需要当我的应用程序启动时，第一行总是被选中，所以 webview 默认加载第一个元素的详细信息。listView 的数据是使用与 SQLite 数据库通信的游标适配器加载的。

这是我的代码的一部分： [代码](http://paste.org/56430)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:59:02.927

尝试为您的 ViewTreeObserver 设置一个 OnGlobalLayoutListener，它会在设置布局后立即设置选择。（记得在第一次调用的时候就移除监听器，避免重复调用。）

检查 android 源是否`setSelection(int)`正确处理未填充的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:02:51.793

您可以尝试使用[smoothScrollToPosition(int position)](http://developer.android.com/reference/android/widget/ListView.html#smoothScrollToPosition%28int%29)它应该适合您。

```
mListView.smoothScrollToPosition(0); 
```

# sql - 基于树形结构的返回查询

> ID：13140149
> 
> 赞同：1
> 
> 时间：2012-10-30T13:32:35.357
> 
> 标签：sql, sql-server

我希望返回一个完全像这样显示的查询：

根 1
--> 子 2
-----> 子 3
根 2
--> 子 4
----> 子 5

所以查询应该返回 Root 1 作为一行，---> Child 2 作为另一行。假设n个级别，并且为每个孩子放置“--->”格式。级别更高然后“---->”增加。

我的表定义是

**[NodeId、ParentId、名称、级别]**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:51:02.253

在 SQL Server 2008 及更高版本上，您可以使用 hierarchyId 数据类型快速实现所需的排序。您可以使用 REPLICATE() 来获取破折号。

```
;with cte as (
    select NodeId, ParentId, Name, 0 Level, '/' + cast(NodeId as varchar(max)) + '/' Hier
    from tbl1
    where ParentId is null
    union all
    select t.NodeId, t.ParentId, t.Name, Level+1, Hier + cast(t.NodeId as varchar(max)) + '/'
    from tbl1 t
    join cte c on t.ParentId = c.NodeId
)
select case when level=0
            then ''
            else replicate('-',level*2) + '>' end + Name
from cte
order by cast(Hier as hierarchyid); 
```

## [SQL小提琴](http://sqlfiddle.com/#!3/d7c38/2/0)

在早期的 SQL Server 2005 上，您可以使用零填充字符串模拟 hierarchyId 排序：

```
;with cte as (
    select NodeId, ParentId, Name, 0 Level, right(replicate('0',10)+cast(NodeId as varchar(max)),11) Hier
    from tbl1
    where ParentId is null
    union all
    select t.NodeId, t.ParentId, t.Name, Level+1, Hier + right(replicate('0',10)+cast(t.NodeId as varchar(max)),11)
    from tbl1 t
    join cte c on t.ParentId = c.NodeId
)
select case when level=0
            then ''
            else replicate('-',level*2) + '>' end + Name
from cte
order by Hier; 
```

# batch-file - 将文件夹路径作为变量 cmd 传递

> ID：13140152
> 
> 赞同：0
> 
> 时间：2012-10-30T13:32:44.157
> 
> 标签：batch-file, cmd

我想扫描一个文件夹，其路径由用户输入定义，最后应用 ffmpeg 将所有媒体文件信息存储到一个文本文件中。以下代码不起作用

```
@echo off
setLocal EnableDelayedExpansion
set /P "path=Enter folder path: "
dir %path% /B /O:N | findstr ".wmv$ .mpg$ .mkv$ .mpeg$ .mp4$ .avi$" >filename.txt
echo. >info.txt
for /f "tokens=* delims= " %%a in ('type filename.txt') do (
set in=%in%%%a
ffprobe "%path%!in!" 2>>info.txt
)
pause 
```

但是，如果我按如下方式剥离用户输入，代码是否有效？

```
@echo off
setLocal EnableDelayedExpansion
::set /P "path=Enter folder path: "
dir d:\Trainers\out\outt\ /B /O:N | findstr ".wmv$ .mpg$ .mkv$ .mpeg$ .mp4$ .avi$" >filename.txt
echo. >info.txt
for /f "tokens=* delims= " %%a in ('type filename.txt') do (
set in=%in%%%a
ffprobe "d:\Trainers\out\outt\!in!" 2>>info.txt
)
pause 
```

上面的脚本放在包含 ffprobe.exe 的文件夹中，它成功地在同一个目录中创建了两个 txt 文件注意这`d:\Trainers\out\outt\`是扫描媒体文件的目录而不是执行此 bat 文件的目录 ffprobe 的基本语法是

```
ffprobe "videofile" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T13:39:59.457

使用与路径不同的变量名。

`PATH`已经做了一些非常重要的事情。事实上，如此重要的是，您的更改正是脚本破坏的原因。

更具体地说，当您尝试仅使用文件名（根本没有路径）执行程序时，如果在工作目录中找不到该程序，`PATH`则会搜索环境变量的内容。我没有看到您收到的错误消息，但它可能无法执行 findstr，它是一个可执行文件，通常在`PATH`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T21:50:59.537

用户输入命令看起来像是错误的上下文。删除引号，它应该可以正常工作。不需要引号将提示与用户输入分开。

# android - Android - 如何避免系统的 onClick？

> ID：13140153
> 
> 赞同：0
> 
> 时间：2012-10-30T13:32:45.123
> 
> 标签：android, onclick, android-imageview

我有一个定义一些和设置事件的`GrinView`服装。当用户单击按钮时，它会显示一些橙色背景，如下面的 iimage。我怎样才能避免这种背景显示？`Adapter``ImageViews``onClick`
![背景显示](../Images/1d129ba38be0025b96e28eb67e7bd01b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:45:00.580

尝试设置

```
android:background="@null" 
```

在您的布局 xml 中。

你确定你在使用带有 onClickListener 的 ImageView 吗？如果您使用的是 ImageButton，请尝试将其更改为 ImageView（不会带来 onClick 动画）。

干杯

# ruby - 在 Ruby 中，如何将元素推送到范围的末尾？

> ID：13140155
> 
> 赞同：3
> 
> 时间：2012-10-30T13:33:01.167
> 
> 标签：ruby

有没有办法将元素推送到范围的末尾而不将其转换为数组然后返回范围？

```
r = 1..10
=> 1..10

r << 11
NoMethodError: undefined method `<<' for 1..10:Range

r.push 11
NoMethodError: undefined method `push' for 1..10:Range 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T13:39:31.027

范围只是一个区间。一个开始和一个结束。您不只是将值推送到 Range 的末尾。您可以将 Range 转换为数组

```
items = range.to_a
items << 11 
```

或者你创建一个新的范围..

```
Range.new(range.begin, 11) 
```

编辑：我们在范围上使用#begin 而不是#first 的原因是因为`first`从`last`范围构建一个新数组，我们不想要那个.. 我们只想要`begin`or`end`值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T13:40:08.343

你不能。Range 根本不是 Array、Set 或集合。它只是一个上限和下限的表示。您可以迭代一个，因为可以在上限和下限之间步进。您还可以将一个转换为一个数组（使用`Range#to_a`），它只是迭代并将值收集到一个数组中。

如果要扩大或缩小范围，请根据其`#begin`和创建一个新范围`#end`。

```
new_range = Range(old_range.begin, old_range.end + 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:48:50.760

您不能通过将下一个元素推送到范围来扩展范围。但是，您可以扩展 Range 类以支持以您需要的任何方式修改范围。

```
class Range
  def end_at(x)
    Range.new(self.begin, x)
  end

  def start_at(x)
    Range.new(x, self.end)
  end
end

# Initial Range
range = 1..10

# New end
p range.end_at(100)
# => 1..100

# New start
p range.start_at(5)
# => 1..5 
```

# c# - 如何从存根工厂返回的存根中引发事件？

> ID：13140170
> 
> 赞同：2
> 
> 时间：2012-10-30T13:33:39.817
> 
> 标签：c#, .net, events, nunit, rhino-mocks

我正在尝试对一个对视频文件进行多线程处理的类进行单元测试。被测试的类是ParallelTranscoder。

ParallelTranscoder 依赖于工厂为其队列中的每个项目创建一个新的转码器。所以我正在创建一个存根 IAsyncTranscoder 和一个存根 IAsyncTranscoderFactory。然后我将 transcoderStub 提供给工厂，以便在调用 transcoderFactoryStub.Create() 时分发它。

IAsyncTranscoder 需要在完成处理后引发事件，因此设置存根以在调用 TranscodeAsync() 时立即引发它的 FinishedEvent。

所有这些都在第一个测试方法中起作用，我只将一个项目排入队列。但是，在第二种测试方法中，它失败并显示以下消息：

> System.AggregateException ：发生一个或多个错误。
> ----> System.AggregateException : 发生一个或多个错误。
> ----> System.InvalidOperationException : 当模拟对象处于重放状态时，此操作无效。

引发异常的行似乎`transcoderStub.Raise(t => t.FinishedEvent += null,...`在 CreateTranscoderStub() 方法内部。

这是因为 Rhino Mocks 可能不是线程安全的，还是我做错了？（我是 Rhino Mocks 的新手）

不管是什么原因，有没有办法做到这一点？

```
[TestFixture]
class ParallelTranscoderTests {

    [Test]
    public void Transcode_FinishWithoutError_RaisesFinishedEvent() {

        var transcoderStub = CreateTranscoderStub();

        var transcoderFactoryStub = MockRepository.GenerateStub<IAsyncTranscoderFactory>();
        transcoderFactoryStub.Stub(stub => stub.Create()).Return(transcoderStub);

        bool transcodingFinishedEventWasRaised = false;

        var transcoderUnderTest = new ParallelTranscoder(concurrencyLevel: -1, transcoderFactory: transcoderFactoryStub);

        // Subscribe to the event and set a flag if it's called
        transcoderUnderTest.FinishedEvent += (sender, args) => { transcodingFinishedEventWasRaised = true; };

        transcoderUnderTest.EnqueueTranscodeItem(new TranscodeItem());
        transcoderUnderTest.Transcode();

        Assert.That(transcoderUnderTest.TranscodingFinished, Is.True);
        Assert.That(transcodingFinishedEventWasRaised, Is.True);
    }

    [Test]
    public void Transcode_TwoItemsFinishWithoutError_RaisesItemFinishedEventTwiceAndFinishedEventOnce() {

        var transcoderStub1 = CreateTranscoderStub();
        var transcoderStub2 = CreateTranscoderStub();

        var transcoderFactoryStub = MockRepository.GenerateStub<IAsyncTranscoderFactory>();

        transcoderFactoryStub.Stub(stub => stub.Create()).Return(transcoderStub1).Repeat.Once();
        transcoderFactoryStub.Stub(stub => stub.Create()).Return(transcoderStub2).Repeat.Once();

        int timesTranscodingFinishedEventWasRaised = 0;
        int timesItemFinishedEventWasRaised = 0;

        var transcoderUnderTest = new ParallelTranscoder(
                                            concurrencyLevel: -1,
                                            transcoderFactory: transcoderFactoryStub
                                      );

        transcoderUnderTest.FinishedEvent += (sender, args) => {
            timesTranscodingFinishedEventWasRaised++;
        };
        transcoderUnderTest.ItemFinishedEvent += (sender, args) => {
            timesItemFinishedEventWasRaised++;
        };

        transcoderUnderTest.EnqueueTranscodeItem(new TranscodeItem(){InFile = "item1_in", OutFile = "item1_out"});
        transcoderUnderTest.EnqueueTranscodeItem(new TranscodeItem(){InFile = "item2_in", OutFile = "item2_out"});

        transcoderUnderTest.Transcode();

        Assert.That(transcoderUnderTest.TranscodingFinished, Is.True);
        Assert.That(timesTranscodingFinishedEventWasRaised, Is.EqualTo(1));
        Assert.That(timesItemFinishedEventWasRaised, Is.EqualTo(2));

    }

    private static IAsyncTranscoder CreateTranscoderStub() {
        var transcoderStub = MockRepository.GenerateStub<IAsyncTranscoder>();
        transcoderStub.Stub(stub => stub.TranscodingFinished).Return(true);
        transcoderStub.Stub(stub => stub.TranscodeAsync()).WhenCalled(delegate {
            transcoderStub.Raise(t => t.FinishedEvent += null,
                                 transcoderStub,
                                 new TranscoderFinishedEventArgs
                                     (true, DateTime.Now,
                                      DateTime.Now, 0));
        });
        return transcoderStub;
    }
} 
```

# linux - 将 wpa_supplicant 链接到非默认 openssl 版本

> ID：13140173
> 
> 赞同：0
> 
> 时间：2012-10-30T13:33:58.527
> 
> 标签：linux, openssl, wpa

我想使用另一个版本的 openssl 编译 wpa_supplicant，然后是安装在构建系统上的那个。

为此，我在`.config`文件中设置了这些设置：

```
CFLAGS += -I/custom-openssl/include
LIBS += -L/custom-openssl/lib 
```

但是，它仍然链接到默认安装的 openssl 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:31:16.113

您的`-L`指令将被添加到库列表的*末尾*`.so`以在链接期间查找文件。

相反，要么控制加载程序在加载二进制文件（可以编译成二进制文件）时应该查看哪个目录，要么使用`LD_LIBRARY_PATH`环境变量更改要搜索的库列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:17:24.117

我也不得不设置`LIBS_p`。其他一切都很好。

# php - Wordpress - wp_rewrite 规则

> ID：13140182
> 
> 赞同：11
> 
> 时间：2012-10-30T13:34:38.980
> 
> 标签：php, wordpress

我正在尝试为 WordPress 编写一个插件，但我在 wp_rewrite 功能方面遇到了一些问题。

我想通过 URL 传递变量（例如：www.mysite.com/WordPress?variable=helloall）使一个页面显示为多个

但是我想保持永久链接结构完整，所以我希望 URL 显示为：

`www.mysite.com/WordPress/helloall`

然后我希望能够使用 slug 并使用它来搜索我的数据库。（就像你会使用 $_GET 如果我使用我首先提到的一般方法）

* * *

我在网上找到了一些教程，并且到目前为止还能够使其正常工作。我相信我的问题是由于对如何正确编写规则缺乏了解。

我用过这个教程：

[http://www.prodeveloper.org/create-your-own-rewrite-rules-in-wordpress.html](http://www.prodeveloper.org/create-your-own-rewrite-rules-in-wordpress.html)

而且我大部分时间都尝试使用相同的代码。我能够制定规则，但他们似乎不想为我工作

谁能告诉我正确的格式可以做到这一点？

## 编辑

这是我目前的功能

```
function add_rewrite_rules( $wp_rewrite ) 
{
    $new_rules = array
    (
        '(.?.+?)/(.+?)/page/?([0-9]{1,})/?$' => 'index.php?pagename='.
        $wp_rewrite->preg_index(1).'&varname='.
        $wp_rewrite->preg_index(2).'&page='.
        $wp_rewrite->preg_index(3),

        '(.?.+?)/(.*?)/?$' => 'index.php?pagename='.
        $wp_rewrite->preg_index(1).'&varname='.
        $wp_rewrite->preg_index(2)
    );
    // Always add your rules to the top, to make sure your rules have priority
    $wp_rewrite->rules = $new_rules + $wp_rewrite->rules;
} 
```

add_action('generate_rewrite_rules', 'add_rewrite_rules');

## 解决方案

我已经想通了，我打算将其发布为答案，但似乎我目前无法及时回答我自己的问题，因此我正在编辑原始帖子：

首先，我在上面发布的代码是正确的，但是它不起作用的原因是因为我没有刷新规则，我使用以下代码执行此操作：

```
function ebi_flush_rewrite_rules()
{
global $wp_rewrite;

$wp_rewrite->flush_rules();
}

add_action( 'init', 'flush_rewrite_rules'); 
```

我的新问题是我的代码运行得有点好，重定向所有页面而不是只重定向我想要的页面，这意味着不会显示任何子页面，这有点问题，但是我已经解决了一个小问题编辑：

```
function add_rewrite_rules( $wp_rewrite ) 
{
  $new_rules = array
  (
    '(testpage)/(.+?)/page/?([0-9]{1,})/?$' => 'index.php?pagename='.
    $wp_rewrite->preg_index(1).'&varname='.
    $wp_rewrite->preg_index(2).'&page='.
    $wp_rewrite->preg_index(3),

    '(testpage)/(.*?)/?$' => 'index.php?pagename='.
    $wp_rewrite->preg_index(1).'&varname='.
    $wp_rewrite->preg_index(2)
  );
  // Always add your rules to the top, to make sure your rules have priority
  $wp_rewrite->rules = $new_rules + $wp_rewrite->rules;
} 
```

所以我关于 wp_rewrite 功能的最终代码如下：

```
function add_rewrite_rules( $wp_rewrite ) 
{
$new_rules = array
(
    '(testpage)/(.+?)/page/?([0-9]{1,})/?$' => 'index.php?pagename='.
    $wp_rewrite->preg_index(1).'&varname='.
    $wp_rewrite->preg_index(2).'&page='.
    $wp_rewrite->preg_index(3),

    '(testpage)/(.*?)/?$' => 'index.php?pagename='.
    $wp_rewrite->preg_index(1).'&varname='.
    $wp_rewrite->preg_index(2)
);
// Always add your rules to the top, to make sure your rules have priority
$wp_rewrite->rules = $new_rules + $wp_rewrite->rules;
}

function query_vars($public_query_vars)
{
$public_query_vars[] = "varname";
return $public_query_vars;
}

function ebi_flush_rewrite_rules()
{
global $wp_rewrite;
$wp_rewrite->flush_rules();
}

add_action( 'init', 'flush_rewrite_rules');
add_action('generate_rewrite_rules', 'add_rewrite_rules');
add_filter('query_vars', 'query_vars'); 
```

我希望这可以在将来节省其他人的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T17:30:10.763

我想出了如何让它在特定页面名称上工作，这适用于将来遇到问题的任何人：

```
function add_rewrite_rules( $wp_rewrite ) 
{
    $new_rules = array
    (
        '(testpage)/(.+?)/page/?([0-9]{1,})/?$' => 'index.php?pagename='.
        $wp_rewrite->preg_index(1).'&varname='.
        $wp_rewrite->preg_index(2).'&page='.
        $wp_rewrite->preg_index(3),

        '(testpage)/(.*?)/?$' => 'index.php?pagename='.
        $wp_rewrite->preg_index(1).'&varname='.
        $wp_rewrite->preg_index(2)
    );
    // Always add your rules to the top, to make sure your rules have priority
    $wp_rewrite->rules = $new_rules + $wp_rewrite->rules;
}

function query_vars($public_query_vars)
{
    $public_query_vars[] = "varname";

    return $public_query_vars;
}

function ebi_flush_rewrite_rules()
{
    global $wp_rewrite;

    $wp_rewrite->flush_rules();
}

add_action( 'init', 'flush_rewrite_rules');
add_action('generate_rewrite_rules', 'add_rewrite_rules');
add_filter('query_vars', 'query_vars'); 
```

# python - lxml，反向解析

> ID：13140185
> 
> 赞同：1
> 
> 时间：2012-10-30T13:34:53.833
> 
> 标签：python, lxml

我正在解析一个大文件（> 9GB），并在 Python 中使用 lxml 的 iterparse 来解析文件，同时在我前进时进行清除。我想知道，有没有办法在清除时向后解析？我可以看到我将如何独立于 lxml 实现它，但使用这个包会很好。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:54:30.537

是的和不...

有一个“简单”的解决方案可以从“从头到尾”反向开始。但是有一个反向迭代器会一直运行到最后并在“清除引用”并优化读取的过程中。

方法 1：在其结构和节点上拆分文件，以便您可以解析您只想要的内容。

方法 2：在 [1] 处检查解析它的“智能”方式

我在我的情况下做了什么。我之前就知道，12gb 文件中的数据可能是最后 2gb。所以我使用unix命令来分割文件并只处理最后一个。

（这是一个丑陋的黑客，但在我的情况下很简单并且工作速度足够快，你也可以使用 tail 但我也想存档其他文件）

--> 真正的 python 大师会使用 file.seek() 但我认为 unix 命令更快

现在我使用第二种方法 [1]

[1] - [http://www.ibm.com/developerworks/xml/library/x-hiperfparse/](http://www.ibm.com/developerworks/xml/library/x-hiperfparse/)

我希望这可以帮助你我很难理解 xml 结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:02:21.670

`iterparse()`恐怕是严格向前的。如果你想反向读取一棵树，你必须向前读取它，同时以某种更容易向后解析的形式将它写入某个中间存储（无论是在内存中还是在磁盘上），然后读取它. 我不知道有任何流解析器允许从后到前解析 XML。

在我的脑海中，您可以使用两个文件，一个包含数据，另一个包含数据文件中记录的偏移量索引。一旦它被写入，这将使向后阅读变得相对容易。

# android - Viewing PDF in Android / Chrome

> ID：13140197
> 
> 赞同：2
> 
> 时间：2012-10-30T13:35:34.487
> 
> 标签：android, google-chrome, offline-caching, html5-appcache

I have a website caching pdfs offline with a .manifest-file. On the desktop version of Chrome the PDF can be viewed offline inside Chrome. But on the Android Chrome nothing happens when I'm trying to open the cached PDF. No error message, just nothing.

I'm guessing the android default pdf-reader can't find the cached pdf? Anyone who knows how I can view the PDF in Android Chrome?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T19:01:54.890

没错，浏览器在内置 PDF 支持方面有所不同。您可以探索的一种方法是使用[Mozilla 的 pdf.js](https://github.com/mozilla/pdf.js)，这是一个完全用 javascript 构建的 pdf 阅读器，几乎可以在任何地方使用。创建另一个调用 pdf.js 并加载 PDF 的网页，并确保所有这些都在您的缓存清单中，您应该一切顺利。

# wcf - 在 IIS 7 中托管多个 wcf 服务主机（.svc 文件）的最佳实践是什么

> ID：13140200
> 
> 赞同：1
> 
> 时间：2012-10-30T13:35:49.853
> 
> 标签：wcf, iis-7

我开发了三种类型的 wcf 服务，并为此创建了三个 .svc 文件，如下所示：

服务1.svc 服务2.svc 服务3.svc

在一个 asp.net 网站项目中。

那么如何在 IIS 7 上托管这些服务呢？

托管多个服务 (.svc) 文件的最佳做法是什么？

我看到了这个链接：

[我可以在 WCF 的 IIS 下的一个虚拟目录中拥有多个 .svc 文件吗？](https://stackoverflow.com/questions/2880465/can-i-have-multiple-svc-files-in-one-virtual-directory-under-iis-in-wcf)

我已经知道了，所以这是唯一可用的最佳实践。？或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:37:40.697

您将需要一个 .svc 文件来`ServiceHost`为每个特定的 Web 服务实例化。但是，您必须查看 IIS 的特定功能，例如“健康监控”、“进程回收”等。

配置服务时，请使用相对寻址（即，当您使用一个 .svc 公开多个端点时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:57:18.043

您可以在[MSDN](http://msdn.microsoft.com/en-us/library/ms733766.aspx)上查看如何使用 SVC 文件在 IIS 上托管 WCF 服务。

> 托管多个服务 (.svc) 文件的最佳做法是什么？

是的，您可以在 IIS 上托管多个服务。但是，如果您有**N 个服务**，则需要在您的**web.config上有****N 个 svc 文件**和**N 个服务合同**。

# android - 如何在 Android 应用程序和我的在线服务器之间发送和接收数据？

> ID：13140203
> 
> 赞同：-2
> 
> 时间：2012-10-30T13:36:01.977
> 
> 标签：android, database, http, synchronization, restful-architecture

我在共享服务器上有一个数据库。我阅读了很多关于 REST 的信息，并想用它来实现我的用户 android 应用程序和我的服务器之间的数据通信。我只是想使用 post 方法将数据发送到我的服务器。在服务器端，我知道如何使用 PHP 和 MySQL 接收和操作数据。接下来我想从我的服务器请求信息，以便将它存储在我的用户 android 应用程序中。所有这些都需要通过符合 REST 架构风格的 HTTP 来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:39:50.233

观看此视频： [开发 Android REST 客户端应用程序](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)

涵盖了您需要了解的所有内容。

# r - 有没有办法在R中独立地对矩阵的列进行排序？

> ID：13140204
> 
> 赞同：9
> 
> 时间：2012-10-30T13:36:03.390
> 
> 标签：r, matrix

我是 R 的新手，所以我真的需要一些帮助。我只想独立地对每一列进行排序。任何帮助表示赞赏！

```
 > mat <- matrix(c(45,34,1,3,4325,23,1,2,5,7,3,4,32,734,2),ncol=3)
 > mat
      [,1] [,2] [,3]
 [1,]   45   23    3
 [2,]   34    1    4
 [3,]    1    2   32
 [4,]    3    5  734
 [5,] 4325    7    2 
```

到

```
 [,1] [,2] [,3]
 [1,]    1    1    2
 [2,]    3    2    3
 [3,]   34    5    4
 [4,]   45    7   32
 [5,] 4325    23 734 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-30T13:37:39.400

就在这里！

```
apply(mat, 2, sort)
     [,1] [,2] [,3]
[1,]    1    1    2
[2,]    3    2    3
[3,]   34    5    4
[4,]   45    7   32
[5,] 4325   23  734 
```

# web-services - SmartGWT 加载 WSDL

> ID：13140208
> 
> 赞同：2
> 
> 时间：2012-10-30T13:36:10.070
> 
> 标签：web-services, wsdl, smartgwt

我正在尝试通过在服务器端编码来从我的 SmartGWT 程序中调用 Web 服务。但是，`XMLTools.LoadWSDL(WSDLurl,WSDLLoadCallback)`以下代码给了我一个错误：

代码 ：

```
XMLTools.loadWSDL("http://www.webservicex.net/uszip.asmx?WSDL",new WSDLLoadCallback(){

        //@Override
        public void execute(WebService webService) {
            System.out.println("********************In XMLTools");
            temp = webService;
        }               
      }); 
```

错误 ：

> java.lang.UnsatisfiedLinkError: com.smartgwt.client.data.XMLTools.loadWSDL(Ljava/lang/String;Lcom/smartgwt/client/data/WSDLLoadCallback;

相同的原因和可能的解决方案是什么？

谢谢！

# seo - 我们如何将站点地图发布到 Bing

> ID：13140214
> 
> 赞同：1
> 
> 时间：2012-10-30T13:36:24.073
> 
> 标签：seo, liferay, liferay-6

我想知道我们如何将站点地图发布到 Bing（搜索引擎）。

Liferay 默认支持 google 和 yahoo。除此之外，我还想添加 Bing。

任何帮助将非常感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:26:51.510

您必须创建一个 bing 网站管理员工具帐户并上传站点地图。或者将站点地图作为 mydomain.com/sitemap.xml 并且 bing 会自动找到它。您必须使用标准站点地图格式：

[http://www.sitemaps.org/protocol.html](http://www.sitemaps.org/protocol.html)

# html - Rails 邮件程序 mimepart 在消息正文中显示为文本

> ID：13140215
> 
> 赞同：8
> 
> 时间：2012-10-30T13:36:27.117
> 
> 标签：html, ruby-on-rails, mime, mailer

我正在使用 ActionMailer 发送测试邮件。正在呈现模板，并且正在正常发送邮件。唯一的问题是 mimepart 和其他标头数据由 Google 在消息正文中显示。

这是邮件的代码..

```
def testing

    mail(:to => "apoorvparijat@gmail.com",:subject => "html mailer", :content_type => "text/html") do |format|
          format.html { render 'testing' }
          format.text { render :text => "bing" }
    end
end 
```

这是收到的电子邮件。

```
----==_mimepart_508fd46252b8c_8023fe595835ad0479a6 Date: Tue, 30 Oct 2012 18:51:38 +0530     
Mime-Version: 1.0 Content-Type: text/plain; charset=UTF-8 Content-Transfer-Encoding: 7bit
Content-ID: <508fd46254ea7_8023fe595835ad0480b8@Apoorv-Parijats-MacBook-Pro-2.local.mail> 
bing ----==_mimepart_508fd46252b8c_8023fe595835ad0479a6 Date: Tue, 30 Oct 2012 18:51:38 
+0530 Mime-Version: 1.0 Content-Type: text/html; charset=UTF-8 Content-Transfer-Encoding:  
7bit Content-ID: <508fd46256465_8023fe595835ad04819c@Apoorv-Parijats-MacBook-Pro-
2.local.mail> Hi bing
column 1    column 2
----==_mimepart_508fd46252b8c_8023fe595835ad0479a6-- 
```

控制台的输出 -

```
 Loading development environment (Rails 3.2.2)
 1.9.3-p125 :001 > RankMailer.testing.deliver
 I, [2012-10-30T18:51:38.331238 #2050]  INFO -- :   Rendered rank_mailer/testing.html.erb           
 (1.8ms)
 I, [2012-10-30T18:51:38.333117 #2050]  INFO -- :   Rendered text template (0.0ms)
 I, [2012-10-30T18:51:45.824962 #2050]  INFO -- : 
 Sent mail to apoorvparijat@gmail.com (7484ms)
 D, [2012-10-30T18:51:45.825125 #2050] DEBUG -- : Date: Tue, 30 Oct 2012 18:51:38 +0530
 From: admin@rankdemon.com
 To: apoorvparijat@gmail.com
        Message-ID: <508fd462572ec_8023fe595835ad0482c0@Apoorv-Parijats-MacBook-Pro-2.local.mail>
    Subject: html mailer
    Mime-Version: 1.0
    Content-Type: text/html;
     charset=UTF-8
    Content-Transfer-Encoding: 7bit

    ----==_mimepart_508fd46252b8c_8023fe595835ad0479a6
    Date: Tue, 30 Oct 2012 18:51:38 +0530
    Mime-Version: 1.0
    Content-Type: text/plain;
     charset=UTF-8
    Content-Transfer-Encoding: 7bit
    Content-ID: <508fd46254ea7_8023fe595835ad0480b8@Apoorv-Parijats-MacBook-Pro-2.local.mail>

    bing

    ----==_mimepart_508fd46252b8c_8023fe595835ad0479a6
    Date: Tue, 30 Oct 2012 18:51:38 +0530
    Mime-Version: 1.0
    Content-Type: text/html;
     charset=UTF-8
    Content-Transfer-Encoding: 7bit
    Content-ID: <508fd46256465_8023fe595835ad04819c@Apoorv-Parijats-MacBook-Pro-2.local.mail>

    Hi bing

    <table style="border:1px solid red">
        <tr>
            <td>column 1</td>
            <td>column 2</td>
        </tr>
    </table>

    ----==_mimepart_508fd46252b8c_8023fe595835ad0479a6--

     => #<Mail::Message:70255316899740, Multipart: false, Headers: <Date: Tue, 30 Oct 2012 18:51:38 +0530>, <From: admin@rankdemon.com>, <To: apoorvparijat@gmail.com>, <Message-ID: <508fd462572ec_8023fe595835ad0482c0@Apoorv-Parijats-MacBook-Pro-2.local.mail>>, <Subject: html mailer>, <Mime-Version: 1.0>, <Content-Type: text/html>, <Content-Transfer-Encoding: 7bit>> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T12:45:14.900

不要`:content_type => "text/html"`在您的邮件方法中指定。由于您使用的是格式块，rails 会自动选择 mime 类型。

**更多细节：**

试试这个发送多部分电子邮件（即电子邮件的 html 和文本格式）。注意格式的顺序。

```
mail(:to => "apoorvparijat@gmail.com", :subject => "html mailer") do |format|
    format.text { render :text => "bing" }
    format.html { render 'testing' }
end 
```

# php - Silverstripe 会话变量仅在页面刷新时显示

> ID：13140216
> 
> 赞同：0
> 
> 时间：2012-10-30T13:36:29.513
> 
> 标签：php, silverstripe

我最初在 Silverstripe 论坛上问过这个问题。 [http://www.silverstripe.org/data-model-questions/show/21293](http://www.silverstripe.org/data-model-questions/show/21293)

我试图从各种谷歌位置广告中获取一个变量，以根据广告中的 ?number=xxx 更改电话号码。

该数字显示一个默认值，除非页面被刷新，然后显示变量值。

有没有更好的方法来显示变量编号而无需刷新页面？

在 page.ss

```
<% if phonenumber %>$phonenumber <% else %>0800 xxx xxx<% end_if %> 
```

在 page.php 中

```
public function Phonenumber() {
 ob_start();
  if (!isset($_SESSION)) {
   @session_start();
  }
  if (!isset($_SESSION['number'])){
   $phonenumber = $_GET['number'];
   $_SESSION['number'] = $phonenumber;
  }
 ob_end_flush();
return strip_tags (Session::get ('number'));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:02:27.143

正如 Benjamin Smith 建议的那样，您可以返回从 $_GET 中得到的数字，
尝试以下操作：

**php**：

```
public function Phonenumber() {
    if (isset($_GET['number']))
        $number = $_GET['number'];
    else
        $number = Session::get('number');
    $number = strip_tags($number);
    Session::set('number', $number);
    if ($number)
        return $number;
    else 
        return '0800 xxx xxx';
} 
```

**模板**：

```
$Phonenumber 
```

另外，我很确定您不需要使用 ob_start() 也不需要开始会话（silverstripe 已经在那时开始了会话）

# ios6 - iOS - 应用特定的通讯录

> ID：13140217
> 
> 赞同：2
> 
> 时间：2012-10-30T13:36:38.810
> 
> 标签：ios6

我想使用联系人应用程序的外观/功能在我的应用程序中显示公司员工列表。这些员工不应该被放入电话用户的通讯录中，而应该是一个独立的应用程序特定列表。

似乎 ABPeoplePickerNavigationController 是要走的路，我可以将 .addressBook 属性设置为我使用 ABAddressBookCreate() 创建的地址簿，但是当我在手机上运行它时，它会加载我所有的联系人，而不仅仅是我创建的那个作为我的应用程序中的测试。我创建的员工也会保存到手机的中央通讯簿中。

有没有办法创建一个不与中央通讯簿集成的独立通讯簿，以便我可以使用 ABPeoplePickerNavigationController？当您查看您的朋友列表时，Facebook 似乎在他们的应用程序中做了类似的事情。

我希望我不必从头开始构建它。周围有几个类似的问题，但没有确定的。

```
ABAddressBookRef addressBook;
CFErrorRef error = NULL;

addressBook = ABAddressBookCreate();

ABRecordRef aRecord = ABPersonCreate();
CFErrorRef anError = NULL;
bool didSet;

didSet = ABRecordSetValue(aRecord, kABPersonFirstNameProperty, CFSTR("Andy"), &anError);
if (!didSet) {/* Handle error here. */}

didSet = ABRecordSetValue(aRecord, kABPersonLastNameProperty, CFSTR("Aardvark"), &anError);
if (!didSet) {/* Handle error here. */}

CFStringRef firstName, lastName;
firstName = ABRecordCopyValue(aRecord, kABPersonFirstNameProperty);
lastName  = ABRecordCopyValue(aRecord, kABPersonLastNameProperty);

/* ... Do something with firstName and lastName. ... */
ABAddressBookAddRecord(addressBook, aRecord, &error);

CFRelease(aRecord);
CFRelease(firstName);
CFRelease(lastName);

ABAddressBookSave(addressBook, &error);

ABPeoplePickerNavigationController *picker =
[[ABPeoplePickerNavigationController alloc] init];
picker.addressBook = addressBook;
picker.peoplePickerDelegate = self;
[self presentModalViewController:picker animated:YES];
CFRelease(addressBook); 
```

# c# - 如何连接到默认邮件客户端并发送附件？

> ID：13140218
> 
> 赞同：0
> 
> 时间：2012-10-30T13:36:39.477
> 
> 标签：c#, javascript, asp.net, .net, scripting

我有以下选择

1.  使用`System.Net.Mail`命名空间并通过发送邮件`SMTPClient`
2.  专门连接到 Outlook 并添加附件
3.  在 javascript 中使用“MailTo”函数，该函数不添加“附件”

但是它们都不适合我的要求，我需要在用户系统的默认邮件客户端中添加附件。

有没有办法做到这一点？

MailTo 选项 - 我可以添加附件吗？

```
<asp:Button ID="btnSend" Text="Send" runat="server" onClientclick="OpenMail()" />

<script type="text/javascript" language="javascript">
function OpenMail()
{    
location.href='mailto:dummy@gmail.com?subject=Message Title&body=Message Content';   
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:07:49.397

如果文件在服务器上，那么您不能使用*客户端的*电子邮件程序自动将其作为附件发送。一些替代方案：

1.  让客户端填写“电子邮件表单”（发件人、收件人、消息等）并使用从服务器发送`SMTPClient`

2.  使用带有指向电子邮件中文件的*链接*`mailto:`的标签发送*`body`*

 *如果您尝试让用户下载文件，*然后*使用发送`mailto:`，则链接被破坏的机会太多。您不知道文件将下载到哪里，如果用户更改名称等。

为什么使用客户的电子邮件程序是一项硬性要求？*

# java - 为什么我的 AsyncTask 中需要 Looper？

> ID：13140226
> 
> 赞同：2
> 
> 时间：2012-10-30T13:37:08.827
> 
> 标签：java, android, android-asynctask, handler, looper

我想使用 AsyncTask 用服务器更新我的 db4o。在 doInBackground 方法中，我连接到服务器，更新 db4o，并安排一个挂起的意图。不修改 UI 或显示任何 toast。

最初，我有以下错误：

```
Can't create handler inside thread that has not called Looper.prepare() 
```

添加 Looper.prepare() 后，工作正常，但仅适用于五次更新（AsyncTask）。我读过这个主题：[AsyncTask threads never die (Android)](https://stackoverflow.com/questions/3077461/asynctask-threads-never-die-android)，我现在没有失败。当我进行第六次更新时，应用程序崩溃了：

```
FATAL EXCEPTION: AsyncTask #1
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:200)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
at java.lang.Thread.run(Thread.java:1019)
Caused by: java.lang.RuntimeException: Only one Looper may be created per thread
at android.os.Looper.prepare(Looper.java:74)
(...) 
```

![五 AsyncTask](../Images/1f69bae2f3d5ddb058a9c2d60163fa97.png)

我在文档中读到我需要 Looper.loop()，但是这样，应用程序崩溃了。

例子：

```
protected Integer doInBackground(Void... params) {
    Looper.prepare();

        update = new Update();
        update.checknewObjects();
        update.deleteOldObjects();
        update.updateObjects();
        Looper.loop();
} 
```

为什么我需要 Looper？为什么应用程序在五次更新后崩溃？我在哪里可以安排 Looper.loop()？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:01:40.537

如果您想安排任务，您应该使用 Timer 和 TimerTask，据我了解，我认为它们应该更适合您的需求。 [http://developer.android.com/reference/java/util/Timer.html](http://developer.android.com/reference/java/util/Timer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:10:19.503

如果你想使用`AsyncTask`所以使用它，你不应该将它与`Lopper`......

```
protected Integer doInBackground(Void... params) {} 
```

已经在后台线程上工作，没有理由调用 Lopper，为什么？

如果您的应用程序需要进行某种长时间的计算，那么`AsyncTask`它是一个非常好的工具，因为它提供了可以工作的方法`UI Thread`并允许`UI`随着一些工作进度进行更新，因为每个将使用您的应用程序的用户都应该知道该应用程序“正在做某事”（当需要超过 2-5 秒时）。

它也是通用的，并且提供了一些好处。

如果您不需要更新`UI`，只需使用例如`Handler`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:29:12.683

在 asynck 任务中，您不能在后台函数中使用循环。它给出错误

# c# - 获取位图 C# 的 RGB 值

> ID：13140235
> 
> 赞同：0
> 
> 时间：2012-10-30T13:37:35.633
> 
> 标签：c#, .net, windows

我有一个提取 8bit 值的方法（如下），尽管我对输出的印象如下：

```
010 020 030 = Specific Colour
135 250 250 = Specific Colour 
```

我有返回数组中的 8 位值的方法 - 由于所有 3 组 8 位相互对应以形成颜色，因此该方法是否应该不返回多维数组中的 8 位值（如上）？

当前方法：

```
 private static byte[] GetColorData(Bitmap bmp)
        {
            Rectangle rect = new Rectangle(0, 0, bmp.Width, bmp.Height);
            BitmapData bmpdata = bmp.LockBits(rect, ImageLockMode.ReadOnly, PixelFormat.Format24bppRgb);

            IntPtr ptr = bmpdata.Scan0;
            int bytes = bmpdata.Stride * bmp.Height;
            byte[] results = new byte[bytes];
            Marshal.Copy(ptr, results, 0, bytes);

            bmp.UnlockBits(bmpdata);
            return results;
        } 
```

当前方法输出：

```
100
101
000
255
250 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:57:47.153

位图的颜色值只是一个字节数组。应该如何对这些值进行分组取决于对这些值的解释。您的代码将图像显式转换为 24bpp RGB，因此由您来进行分组。

此外，您返回 a `byte[]`，根据定义，它只有一维。如果你想要一个三维数组，你需要自己创建一个并将值添加`results`到新的多维数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:00:41.990

当您以请求的方式读取像素数据时，您将获得作为字节数组请求的数据，每个字节三元组定义 1 个像素。

您可以为每个像素创建一个`Tuple<byte,byte,byte>`实例，您可以在其中对像素级别的值进行分组，并返回 a`ICollection<Tuple<byte,byte,byte>>`以这种分组方式获取所有像素。

# c# - 获取（415）不支持的媒体类型错误

> ID：13140236
> 
> 赞同：22
> 
> 时间：2012-10-30T13:37:36.577
> 
> 标签：c#, json, http, post, httpwebrequest

我要做的是我必须在给定的 URL 中发布 JSON 数据我的 JSON 看起来像

```
{
    "trip_title":"My Hotel Booking",
    "traveler_info":{
        "first_name":"Edward",
        "middle_name":"",
        "last_name":"Cullen",
        "phone":{
            "country_code":"1",
            "area_code":"425",
            "number":"6795089"
        },
        "email":"asdv@gmail.com"
    },
    "billing_info":{
        "credit_card":{
            "card_number":"47135821",
            "card_type":"Visa",
            "card_security_code":"123",
            "expiration_month":"09",
            "expiration_year":"2017"
        },
        "first_name":"Edward",
        "last_name":"Cullen",
        "billing_address":{
            "street1":"Expedia Inc",
            "street2":"108th Ave NE",
            "suite":"333",
            "city":"Bellevue",
            "state":"WA",
            "country":"USA",
            "zipcode":"98004"
        },
        "phone":{
            "country_code":"1",
            "area_code":"425",
            "number":"782"
        }
    },
    "marketing_code":""
} 
```

我的功能

```
string message = "URL";
_body="JSON DATA";
HttpWebRequest request = HttpWebRequest.Create(message) as HttpWebRequest;
if (!string.IsNullOrEmpty(_body))
{
    request.ContentType =  "text/json";
    request.Method =  "POST";

    using (var streamWriter = new StreamWriter(request.GetRequestStream()))
    {
        streamWriter.Write(_body);
        streamWriter.Flush();
        streamWriter.Close();
    }
}

using (HttpWebResponse webresponse = request.GetResponse() as HttpWebResponse)
{
    using (StreamReader reader = new StreamReader(webresponse.GetResponseStream()))
    {
        string response = reader.ReadToEnd();
    }
} 
```

当我发布它时；我收到一个错误

> “远程服务器返回错误：（415）不支持的媒体类型。”

任何人都对此有想法；我在哪里弄错了？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-30T13:44:28.493

尝试这个：

```
request.ContentType =  "application/json" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-02-06T07:18:12.957

**对于 WebAPI** >> 如果您是`calling this POST method from fiddler`，只需在标题中添加以下行。

```
Content-Type: application/json 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-12T03:01:27.683

正如其他人所回答的那样，问题出在 ContentType 上。应该是“应用程序/json”。

这是旧 WebRequest 的示例

```
var parameters = Newtonsoft.Json.JsonConvert.SerializeObject(obj);

var req = WebRequest.Create(uri);

req.Method = "POST";
req.ContentType = "application/json";

byte[] bytes = Encoding.ASCII.GetBytes(parameters);

req.ContentLength = bytes.Length;

using (var os = req.GetRequestStream())
{
    os.Write(bytes, 0, bytes.Length);

    os.Close();
}

var stream = req.GetResponse().GetResponseStream();

if (stream != null)
    using (stream)
    using (var sr = new StreamReader(stream))
    {
        return sr.ReadToEnd().Trim();
    }
return "Response was null"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-06T13:40:06.513

I renamed my project and updated all of the namespaces to correlate after which I got this exact same message. I realized that I had not updated the namespaces in the web.config (name and contract):

```
<system.serviceModel>
  <services>
    <service name="X.Y.Z.Authentication" behaviorConfiguration="ServiceBehaviour">
      <endpoint address="" binding="webHttpBinding" contract="X.Y.Z.IAuthentication" behaviorConfiguration="web" bindingConfiguration="defaultRestJsonp"></endpoint>
    </service>
  </...>
</..> 
```

Hope this helps anyone reading this.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T13:50:05.627

我不是 100% 确定，但我猜你必须将文本作为 byteArray 发送，试试这个：

```
req = (HttpWebRequest)HttpWebRequest.Create(uri);
        req.CookieContainer = cookieContainer;
        req.Method = "POST";
        req.ContentType = "text/json";
        byte[] byteArray2 = Encoding.ASCII.GetBytes(body);
        req.ContentLength = byteArray2.Length;
        Stream newStream = req.GetRequestStream();
        newStream.Write(byteArray2, 0, byteArray2.Length);
        newStream.Close(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-05T11:04:31.917

这是我为接受 json 数据的 web api 函数创建的代码示例

```
string Serialized = JsonConvert.SerializeObject(jsonData);
using (var client = new HttpClient())
{
    client.DefaultRequestHeaders.Accept.Clear();
    client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
    HttpContent content = new StringContent(Serialized, Encoding.Unicode, "application/json"); 
    var response = await client.PostAsync("http://localhost:1234", content);   
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-26T09:35:21.310

序列化您要传递的数据并对其进行编码。另外，提到 req.ContentType = "application/json";

“马丁”代码有效。

```
LoginInfo obj = new LoginInfo();

obj.username = uname;
obj.password = pwd;
var parameters = Newtonsoft.Json.JsonConvert.SerializeObject(obj);

var req = WebRequest.Create(uri);

req.Method = "POST";
req.ContentType = "application/json";

byte[] bytes = Encoding.ASCII.GetBytes(parameters);

req.ContentLength = bytes.Length;

using (var os = req.GetRequestStream())
{
    os.Write(bytes, 0, bytes.Length);

    os.Close();
}

var stream = req.GetResponse().GetResponseStream();

if (stream != null)
    using (stream)
    using (var sr = new StreamReader(stream))
    {
        return sr.ReadToEnd().Trim();
    } 
```

# c# - 正则表达式替换图片标签src属性值

> ID：13140237
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:37:36.633
> 
> 标签：c#, asp.net, regex

我有一个`string`包含文档的 html 代码。

里面可以有`multiple image tags`。

我想要做的是将img 标记的`src`属性值（即url）传递给C# 函数，并将该值替换为函数返回值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:58:00.230

正则表达式不适合解析 HTML 文件。HTML 不严格，格式也不规则。（例如：在非严格的 html中，**可以**有一个没有结束标签的标签）

使用[htmlagilitypack](http://htmlagilitypack.codeplex.com/)

你可以`htmlagilitypack`这样做

```
HtmlDocument doc = new HtmlDocument();
doc.Load(yourStream);

foreach(var item in doc.DocumentNode.SelectNodes("//img[@src]"))//select only those img that have a src attribute..ahh not required to do [@src] i guess
{
 item.Attributes["src"].Value=yourFunction(item.Attributes["src"].Value);
}
doc.Save("yourFile");//dont forget to save 
```

# cordova - 科尔多瓦（PhoneGap）电晕

> ID：13140243
> 
> 赞同：0
> 
> 时间：2012-10-30T13:37:58.480
> 
> 标签：cordova, coronasdk

嗨，使用 corona sdk 构建应用程序。我想知道是否可以将 PhoneGap/Cordova 与 Corona 一起使用。我有一个需要用户录制视频的应用程序，由于 Corona 在现阶段不支持此功能，我希望我可以使用 Cordova API 或其他允许我使用 Corona 录制视频的替代方案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:22:28.373

最近有一篇[Corona 博客文章](http://www.coronalabs.com/blog/2012/10/22/corona-phonegap-physics-android-notifications-and-more/)演示了在 Corona 应用程序中注入 Phonegap 功能。根据评论，它尚不可用，但即将推出！

# xml - XSLT 和文本格式

> ID：13140244
> 
> 赞同：1
> 
> 时间：2012-10-30T13:38:00.133
> 
> 标签：xml, templates, xslt, text, formatting

我正在制作一个 XSLT 模板，以便将 XML 转换为 LaTeX（然后是 HTML）。我认为 XSLT 不是为此而生的，但它确实有效。我唯一的问题是文本格式：如果在某些文本行中，我想使用**粗体**或*斜体*字，例如 HTML 中的语法是“< i ></ i >”，而 LaTeX 中的语法是“\textit{}”。

一种解决方案是将“i”声明为模板，但我不知道是否可以为每个遇到的文本块“自动”应用它（我不想在所有模板中显式调用它）

抱歉，我是这项技术的新手，也许存在非常简单的解决方案，但这次谷歌没有帮助我。

任何建议将不胜感激。

编辑：例如：

Xsl：

```
<xsl:template match="one">
<xsl:apply-templates select="two"/>
</xsl:template> 
```

XML：

```
<one>
<two>Some text with <i>italic</i> words</two>
</one> 
```

期望的输出：

```
"Some text with \textit{italic} words" 
```

我不想这样做：

```
<xsl:apply-templates select="i"/> 
```

在我所有的模板中

所以我正在寻找一种“全局”应用“i”模板的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:24:51.627

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="i">
     <xsl:text>\textit{</xsl:text>
     <xsl:apply-templates/>
     <xsl:text>}</xsl:text>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<one>
    <two>Some text with <i>italic</i> words</two>
</one> 
```

**产生了想要的正确结果：**

```
Some text with \textit{italic} words 
```

**说明**：

XSLT 处理模型使用许多[**内置模板**](http://www.w3.org/TR/1999/REC-xslt-19991116#built-in-rule)，如果 XSLT 程序员不提供与特定节点匹配的模板，则使用这些模板提供对任何 XML 文档的默认处理。

特别是，任何元素节点的内置模板，都会发布模板，`<xsl:apply-templates/>`以便将模板应用于其所有子节点。

任何文本节点的内置模板都是将此文本节点复制到输出。

这意味着我们不需要为节点提供任何模板，如果它必须完全按照相应的内置模板所做的事情。

只剩下一个`i`元素——所以我们提供了一个模板匹配`i`——它只是用“\textit{”和“}”包围了处理它的子元素的结果。

**请注意**：

完全有可能在不指定单个`<xsl:apply-templates>`、`<xsl:call-template>`、`<xsl:for-each>`、`<xsl:choose>`、`<xsl:when>`和的情况下表达复杂`<xsl:otherwise>`的变换`<xsl:if>`。

**这被称为[“推式”](https://dpxslfaq.xml.com/xsl/sect2/pushpull.html)** ，与广泛使用这些指令中的一个或任何一个的**[“拉式](https://dpxslfaq.xml.com/xsl/sect2/pushpull.html)****”相反。**

“push”风格表达了对问题的最具声明性的解决方案，而“pull-style”转换表达了更加“命令式”的解决方案。

**它符合 XSLT 的精神，并建议始终尝试生成尽可能多的“推送”代码**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:07:23.247

**编辑：我现在最后添加了一个完整的 XSL，基于 OP 的 XML 和 XSL**

这只是一个假设，因为——正如 Dimitre 在评论中所指出的——我们无法准确地看到您的 XSL、输入或所需的输出。但是，您可能想要这样的东西。

```
<xsl:template match="//i">
   <xsl:text>\textit{</xsl:text>
   <xsl:apply-templates select="@*|node()"/>
   <xsl:text>}</xsl:text>
</xsl:template>

  <!-- or with namespace -->

<xsl:template match="//*[namespace-uri()='http://www.w3.org/1999/xhtml' and local-name()='i']">
   <xsl:text>\textit{</xsl:text>
   <xsl:apply-templates select="@*|node()"/>
   <xsl:text>}</xsl:text>
</xsl:template>

<!-- assumes there is a copy happening like: -->
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template> 
```

将这样的模板添加到 XSL 中，应该会导致它为每个执行*在输入中找到。*

 *输出（当放入仅复制 HTML 文档的 XSL 时）如下所示：

```
<!-- before -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>test</title>
  </head>
  <body>
    <p>
      <i>This is Only a Test</i>
    </p>
  </body>
</html>

<!-- after -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>test</title>
  </head>
  <body>
    <p>
      \textit{This is Only a Test}
    </p>
  </body>
</html> 
```

如果你给我们更多，我会更新这个更具体。

**编辑：基于 OP 代码的完整示例（最终提供）**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="/">
    <xsl:apply-templates select="one"/>
  </xsl:template>

  <xsl:template match="one">
    <xsl:apply-templates select="two"/>
  </xsl:template>

  <xsl:template match="//i">
    <xsl:text>\textit{</xsl:text>
    <xsl:apply-templates select="@*|node()"/>
    <xsl:text>}</xsl:text>
  </xsl:template>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```*

# sas - SAS 中的自动导入

> ID：13140247
> 
> 赞同：3
> 
> 时间：2012-10-30T13:38:14.027
> 
> 标签：sas

我来自 SQL Server 背景，是使用 SAS 的新手。要将平面文件自动导入 SQL Server，我会使用 SQL Server Integration Services 包并通过 Management Studio 安排一个作业来获取和导入文件。

我如何在 SAS 中做同样的事情。我所做的研究表明，SAS Management Console 有一个调度插件，但我如何创建一个执行导入的作业？我在企业指南中这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:39:36.787

The job that does the import would presumably be a short SAS program that reads the file in. You would indeed manage that in EG, if that's what you're using to manage the general process flow (for servers I imagine it would be). You can either use an import wizard, write a PROC IMPORT statement, like:

```
proc import file="whatever.csv" out=dsetname dbms=csv replace;
run; 
```

if it is a CSV, or write a data step if it's not a delimited file (or, even if it is):

```
data dsetname;
infile "whatever.txt";
input
@1 varname $8.
@10 varname2 $5.
@16 varname3 4.
;
run; 
```

The latter is the most flexible, but does require knowing the data completely; a PROC IMPORT can read the header row from a delimited file and make reasonable guesses as to the width of fields.

# php - 使用 ajax/javascript/php 使用 db 创建动态文本框

> ID：13140248
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:38:18.043
> 
> 标签：php, javascript, html, ajax

我有两张桌子。company_details 和 company_specials。每个 company_details 可以有多个特价商品。[我在http://eurothermwindows.com/ed/admin.php](http://eurothermwindows.com/ed/admin.php)显示公司详细信息

在活动列中具有 0 的第一行和第四行来自 company_details，下面的行来自 company_specials。

目前，该代码允许动态修改 company_details 行，如该表中的 compid 所示。但是我希望它下面的行也可以动态修改，但它使用相同的 compid，我不确定如何在代码中将它们分开。

下面的代码是为 company_specials 生成的代码。我需要一种方法来唯一标识每一行并能够对其进行修改。 [http://pastebin.com/RAe9iwAP](http://pastebin.com/RAe9iwAP)

有人可以提供一些指导吗？我在想我可能需要唯一标识 company_specials 中的每个特价商品或设置某种指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:48:20.403

看来你在正确的轨道上。您确实需要唯一标识行。您可以在 company_specials 表中添加一个唯一 ID 并使用它。或者使用company_specials 表中每一行独有的其他一些属性组合（例如compid 和specdate 的连接）。任何适合您的信息结构的东西。我建议在您的特价表中添加一个唯一的 ID。

请务必将该唯一约束添加到您的数据库系统中，以防止输入无效数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:08:15.960

为您的数据库表添加唯一的 id，并为每条记录输出隐藏的文本字段，以指示其表来源及其 id。这将允许代码知道哪个表更新或删除了哪一行。插入新记录可以通过在每个组的末尾提供每种类型的空白记录来完成，因此每个组的末尾会有一个空白的特价记录，表的末尾会有一个空白的公司记录。

**在name='comp[<?php echo $comp_id?>][<?php echo $comp_field_name?>]'**和**name='spec[<?php echo $spec_id?>**形式的每个输入字段上放置一个唯一名称**][<?php echo $spec_field_name?>]'**这样当表格发布时，PHP 将看到两个数组，**$comp**和**$spec**。您可以使用

```
foreach ($comp as $id=>$row)
{
} 
```

并遍历每个 $row 以构建 SQL 更新或插入语句

```
foreach ($row as $fld=>$val)
{
} 
```

# django - 将特定类归属于 django-form 的每个字段

> ID：13140257
> 
> 赞同：3
> 
> 时间：2012-10-30T13:38:52.660
> 
> 标签：django, django-forms

我在 django 中有一个表单，我想将一个类归因于某些字段。那是因为我想在我的 css 代码中使用这些类，并且我不希望所有字段都具有相同的样式。

例如，我的表单有 2 个文本字段和一个按钮。我不想将文本字段的样式设置为彼此相同。我希望第一个从右到左，第二个从左到右。

我们可以使用`required_css_class = 'required'`，但它仅适用于必填字段，而不适用于我想要的每个字段。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T13:48:42.567

```
class CommentForm(forms.Form):
    name = forms.CharField(
                widget=forms.TextInput(attrs={'class':'special'}))
    url = forms.URLField()
    comment = forms.CharField(
               widget=forms.TextInput(attrs={'size':'40'})) 
```

更多[在这里](https://docs.djangoproject.com/en/1.4/ref/forms/widgets/#customizing-widget-instances)

# ruby-on-rails - 我的 Rails 应用程序根目录中名为 -e 的文件

> ID：13140260
> 
> 赞同：0
> 
> 时间：2012-10-30T13:39:04.473
> 
> 标签：ruby-on-rails

在我的根路径中（在哪里`Gemfile`），我有一个名为的文件`-e`，它是空的。我想知道这是由 Rails 还是插件创建的？或者只是我偶然创建的一个文件？

`Gemfile:`

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'bootstrap-sass', '2.0.4'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
end

gem 'annotate', '2.5.0', group: :development

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '4.1.0'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

（我希望不是后来的，不然我会觉得很傻）。

# vb.net - 输入字符串的格式不正确 - 来自 datareader 的列表

> ID：13140265
> 
> 赞同：0
> 
> 时间：2012-10-30T13:39:19.030
> 
> 标签：vb.net, list

我在将列表中的结果输出到字符串时遇到问题，并且“输入字符串的格式不正确”。

```
objConn = New SqlConnection(strConnection)
    objConn.Open()
    objCmd = New SqlCommand(strSQL, objConn)
    rsData = objCmd.ExecuteReader(0)

    If rsData.HasRows Then

        Do While (rsData.Read())

            SubjectNames.Add(rsData.GetString("Subject"))

        Loop

    End If

    rsData.Close()
    objConn.Close()

    Dim first As String = SubjectNames(0)
    Dim second As String = SubjectNames(1)

    html += "<p>" & first & "</p>"
    html += "<p>" & second & "</p>" 
```

现在我在添加到列表行时遇到错误，SP 中的主题字段是一个全文本字段，应该返回一个主题名称。

关于我做错了什么的任何想法（再次！）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:15:02.610

给出行的列索引而不是列名。

SubjectNames.Add(rsData.GetString(ColumnIndex)) // 0 或 1 或 2

希望这可以帮助

由于 GetString() 函数将只接受索引而不是列名

# iphone - 将存储数据的服务器地址放在哪里？

> ID：13140268
> 
> 赞同：0
> 
> 时间：2012-10-30T13:39:20.520
> 
> 标签：iphone, ios

我正在创建一个捕获视频并将其上传到服务器的应用程序我已经创建了捕获视频的代码，并且对于上传我正在研究[此代码](https://github.com/chetanbhalala)，但我不知道将我的服务器地址放在哪里来存储数据。

还有可能使用 FTP 存储视频，因为在我的公司 PHP 和 .NET 人员使用 FTP，我想知道我能够在我的 iPhone 应用程序中使用 FTP 上传视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:53:53.503

在[WebService.m](https://github.com/chetanbhalala/FIle-upload-on-server-using-iOS/blob/master/FileUploadDownload/FileUploadDownload/WebService/WebService.m)文件中，有一个占位符表示“您的 URL 字符串”，将其替换为您的实际服务器。

如果你想使用 FTP，你也可以使用支持 FTP 的网络库，特别是非常流行的[libcURL](http://curl.haxx.se/)库。

# javascript - html记住从下拉菜单中选择的选项导航到选定的选项

> ID：13140271
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:39:25.343
> 
> 标签：javascript, html

嘿，我正在开发一个在 HTML 中支持多语言的网站我为每个功能都有不同的页面现在说如果用户选择了特定的语言，比如说中文，并且在主页上并且想要导航到 CONTACTUS 页面，但是当 CONTACTUS 页面加载时，它会以 ENGLISH 加载，这是一种默认语言，如果用户选择了中文，这是错误的，应该只加载 CHINESE 的页面我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:49:49.777

一个选项是使用 SESSION 变量来记住选择，然后当用户打开新页面时，检查该变量并加载相应的语言。

另一种选择是使用 URL 参数来识别语言，例如 ?lang=ES。这对于搜索引擎索引更好。同样，当用户进入页面时，检查该变量并加载相应的语言。页面上的所有链接也应该有这个参数，以保持语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:42:26.363

将选择保存在 SESSION['LanguageName'] 中并在不同的页面上，检索 SESSION['LanguageName'] 中的值并相应地加载下拉列表和页面。

# codeigniter-2 - 带有分页错误的 Codeigniter 搜索

> ID：13140272
> 
> 赞同：1
> 
> 时间：2012-10-30T13:39:27.220
> 
> 标签：codeigniter-2

您好，我在 CI 中的搜索有问题。在第一页显示结果正常，但在第二页显示 1064 SQL 错误。

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'AND cpt_echip.cpt_echip_nr_inventar LIKE '%%' LIMIT 10 , 10' 附近使用正确的语法

这是代码（使用的函数）：

模型：

```
function search($start, $limit){
        $match = $this->input->post('search');
        $tip_echip = $this->input->post('cpt_tip_echip_nume');
        $q = $this->db->query("SELECT * FROM (cpt_echip)LEFT OUTER JOIN cpt_utl ON cpt_utl.cpt_utl_marca = cpt_echip.cpt_utl_marca WHERE cpt_echip.cpt_tip_echip_id = $tip_echip AND cpt_echip.cpt_echip_nr_inventar LIKE '%$match%' LIMIT $start , $limit");

        $rezultat = $q->result();

        return $rezultat;
    }

function num_filter(){
        $tip_echip = $this->input->post('cpt_tip_echip_nume');
        $this->db->where('cpt_tip_echip_id', $tip_echip);
        $q = $this->db->get('cpt_echip');
        $number = $q->num_rows();

        return $number;
    } 
```

控制器：

```
function search(){

        $data = $this->helpdesk_model->general();

        $start_row = $this->uri->segment(3);
        $per_page = 10;

        if(trim($start_row) == ""){
            $start_row = 0;
        }

        $config['base_url'] = base_url() . '/index.php/helpdesk/search/';

        $config['total_rows'] = $this->helpdesk_model->num_filter();
        $config['per_page'] = $per_page;
        $config['num_links'] = 10;
        $config['first_link'] = 'Prima pagina';
        $config['last_link'] = 'Ultima pagina';

        $this->pagination->initialize($config);

        $data['pagini'] = $this->pagination->create_links();
        $data['query'] = $this->helpdesk_model->search($start_row, $per_page);

        $this->load->view('rezultat', $data);
    } 
```

看法：

```
<table border="1">
            <tr>
                <th>Nr. Inventar</th>
                <th>Nume</th>
                <th>Utilizator</th>
            </tr>
            <?php foreach($query as $row): ?>
            <tr>
                <td><?php echo anchor('helpdesk/detalii_echipament/'.$row->cpt_echip_nr_inventar, $row->cpt_echip_nr_inventar, array('data-fancybox-type'=>'iframe', 'class'=>'fancybox')); ?></td>
                <td><?php echo $row->cpt_echip_nume; ?></td>
                <td><?php echo $row->cpt_utl_nume; ?></td>
            </tr>
            <?php endforeach; ?>
        </table>
        <?php echo $pagini; ?> 
```

没有搜索和过滤器，分页工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:15:57.153

这意味着 $_POST 数组为空。当您使用指向第二页的链接进行导航时，不会发布任何内容。您可以在首次提交时通过 url 传递搜索数据或存储在会话中并使用它。

只需使用 print_r($_POST) 检查 $_POST 数组中的内容。

# vba - VBA ADO 错误 3709

> ID：13140276
> 
> 赞同：0
> 
> 时间：2012-10-30T13:39:36.487
> 
> 标签：vba, excel, ado

我尝试连接到一个 excel 数据库（我知道它不是完美的数据库，但我不能使用访问，但我必须使用 excel 所以......）一切正常，直到出现：objRecordset.Open

我得到一个错误，我承认我不知道如何解决它

这是代码

```
Sub macromacro()
'On Error Resume Next

Const adOpenStatic = 3
Const adLockOptimistic = 3
Const adCmdText = &H1

'***** Creation de la connection *****
Set objConnection = CreateObject("ADODB.Connection")
Set objRecordset = CreateObject("ADODB.Recordset")

objConnection.Open "Provider=Microsoft.Jet.OLEDB.4.0;" _
& "Data Source=" & ThisWorkbook.Path & "\StatsLyon.xlsm;" _
    & "Extended Properties=""Excel 8.0;HDR=Yes;"";"

'***** Requête SQL *****
objRecordset.Open

Query = "Select SUM(NbCompteurElec) AS NombreTotal FROM [Feuil1$] ," _
& "objConnection, adOpenStatic, adLockOptimistic, adCmdText"

Feuil5.Cells(1, 3).Value = "NombreTotal"
Feuil5.Cells(1, 4).Value = objRecordset.Fields(NombreTotal).Value

objConnection.Close
Set objConnection = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:43:22.987

您需要将 ACE 与 *.xlsm 和 *.xlsx 一起使用：

```
objConnection.Open "Provider=Microsoft.ACE.OLEDB.12.0;" _
& "Data Source=" & ThisWorkbook.Path & "\StatsLyon.xlsm;" _
    & "Extended Properties=""Excel 8.0;HDR=Yes;"";" 
```

您可能还想使用

```
Extended Properties="Excel 12.0 Xml;HDR=YES"; 
```

有关详细信息，请参阅[http://www.connectionstrings.com/excel-2007](http://www.connectionstrings.com/excel-2007)。

然后：

```
objRecordset.Open "Select SUM(NbCompteurElec) AS NombreTotal FROM [Feuil1$]", _
objConnection, adOpenStatic, adLockOptimistic 
```

编辑重新评论

```
sSQL = "Select SUM(NbCompteurElec) AS NombreTotal FROM [Feuil1$] " _
     & "WHERE [DateMad] Between #" _
     & Format(date_deb,"yyyy/mm/dd") _
     & "# And #" & Format(date_fin,"yyyy/mm/dd") & "#"

objRecordset.Open sSQL, objConnection, adOpenStatic, adLockOptimistic 
```

日期的分隔符是 #
最好将日期格式化为年 (yyyy)、月、日，因为它永远不会模棱两可。

# visual-studio - 安装 VS Ultimate 后卸载 VS Express 是否安全？

> ID：13140278
> 
> 赞同：3
> 
> 时间：2012-10-30T13:39:39.853
> 
> 标签：visual-studio, installation, uninstallation, visual-studio-express

几天前，我为 C# 安装了 Visual Studio Express；昨天我安装了 Visual Studio Ultimate。既然我不再使用前者，那么卸载它是否安全？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T00:57:30.077

我在安装 Visual Studio 2012 Ultimate 后立即卸载了 Visual Studio Express 2012 for Web，它仍然可以正常工作。重新启动后也尝试过，只是为了确定。

# heroku - 找不到捆绑命令 heroku

> ID：13140285
> 
> 赞同：0
> 
> 时间：2012-10-30T13:40:09.187
> 
> 标签：heroku, bundler

我正在尝试在我的 heroku 应用程序中使用 ruby​​ 1.8.7，但该应用程序没有启动。Heroku 在控制台中显示以下错误：

```
2012-10-30T13:29:08+00:00 app[web.2]: bash: bundle: command not found 
```

`heroku run "bundle --version"`还返回未找到的命令：

```
heroku run "bundle --version"
Running `bundle --version` attached to terminal... up, run.1
bash: bundle: command not found 
```

关于这里可能出现什么问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-22T14:25:05.040

最新版本的代码将如下所示：

```
heroku config:add GEM_PATH=vendor/bundle/1.8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:45:34.640

您是否安装了新的 ruby​​ 版本？ruby 版本没有安装捆绑器的好机会，使用

```
heroku run 'gem install bundler' 
```

安装新的红宝石后！

# javascript - 原型在 jQuery 源代码中是什么意思？

> ID：13140292
> 
> 赞同：36
> 
> 时间：2012-10-30T13:40:50.140
> 
> 标签：javascript, jquery

例如，从 jQuery 1.2.6 复制：

```
jQuery.fn = jQuery.prototype = {
    init: function( selector, context ) {
        // Make sure that a selection was provided
        selector = selector || document;
        ..........
    },
}; 
```

我在这里读过一些文章，例如[JavaScript：.extend 和 .prototype 用于什么？](https://stackoverflow.com/questions/3781373/javascript-what-are-extend-and-prototype-used-for)并且知道可以在子类中使用原型来扩展某些方法。

但我无法理解上述 jQuery 片段中的用法。

是否有任何描述原型的规范文档？

谢谢。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-30T14:01:25.903

所有对象都有一个`prototype`属性。它只是一个对象，其他对象可以从中继承属性。您发布的代码段只是将具有某些属性（例如`init`）的对象分配给`prototype`of `jQuery`，并且别名`jQuery.prototype`to`jQuery.fn`因为`fn`键入更短且更快。如果您暂时忘记了 jQuery，请考虑以下简单示例：

```
function Person(name) {
    this.name = name;
}
Person.prototype.sayHello = function () {
    alert(this.name + " says hello");
};

var james = new Person("James");
james.sayHello(); // Alerts "James says hello" 
```

在这个例子中，`Person`是一个*构造*函数。它可以通过使用操作符调用来*实例化*`new`。在构造函数内部，`this`关键字引用实例，因此每个实例都有自己的`name`属性。

`prototype`of在`Person`所有实例之间共享。所以所有的实例`Person`都有一个`sayHello`他们*继承*自的方法`Person.prototype`。通过将`sayHello`方法定义为一个属性，`Person.prototype`我们可以节省内存。我们可以很容易地为每个实例提供`Person`它自己的方法副本（通过将其分配给`this.sayHello`构造函数内部），但这并不那么有效。

在 jQuery 中，当您调用该`$`方法时，您实际上是在创建一个实例`jQuery.prototype.init`（请记住`jQuery.fn === jQuery.prototype`）：

```
return new jQuery.fn.init(selector, context, rootjQuery); 
```

如果你看`jQuery.fn.init`：

```
jQuery.fn.init.prototype = jQuery.fn; 
```

所以实际上，您正在创建一个实例，`jQuery`该实例可以访问在 上声明的所有方法`jQuery.prototype`。如前所述，这比在`jQuery`.

# jquery - jQuery 可编辑字段在编辑时为“标签”，但在添加新字段时为“文本”

> ID：13140294
> 
> 赞同：0
> 
> 时间：2012-10-30T13:40:58.140
> 
> 标签：jquery, jquery-datatables

我有来自[Datatables](http://datatables.net)的 Editable ，我需要做的是在向表中添加新项目时使“浏览器”字段可编辑，例如不可编辑。编辑时“标记”。添加是通过按钮开始的，编辑是通过单击行开始的。所以我可以为这些操作添加一些东西，但我不知道我是否可以轻松地更改字段类型。

```
ediTable({ fields: [{ name: 'Engine', type: 'select',
        selectOptions: ENGINE_OPTIONS
    },
                { name: 'Browser', type: 'text' },
                { name: 'Version', type: 'label' },
                { name: 'Platform', type: 'label' },
                { name: 'Grade', type: 'select', selectOptions: ['A', 'B', 'C', 'D', 'X'] },
                { name: 'Active', type: 'checkbox', trueValue: 'Y', falseValue: 'N'}] 
```

我试图添加到按钮的代码但没有任何改变：

```
// edit the new row
emptyTable.ediTable('newRow', defaultData, { name: 'Browser', type: 'label' }); return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:57:54.193

事实证明，不能更改字段的类型，但要在添加新项目时使其可编辑，您可以检查`Row`参数，`onPreShowForm`然后更改字段的属性。

当传递`Row`为空时，我们知道显示表单以输入新行，当`Row`不为空时，我们显示表单以修改数据。

```
onPreShowForm: function (table, form, row) {
                $("#btn-new").addClass("ui-state-disabled");

                browserInput = $('input[name|="Browser"]');
                if (row) {
                    browserInput.addClass("ui-state-disabled");
                    browserInput.attr("disabled", "disabled");
                } else {
                    browserInput.removeClass("ui-state-disabled");
                    browserInput.removeAttr("disabled");
                }
            } 
```

# jquery - 使用 jQuery 向上或向下移动列表的位置

> ID：13140296
> 
> 赞同：0
> 
> 时间：2012-10-30T13:41:10.587
> 
> 标签：jquery, css

我有一个简单的列表，其中包含 1 行或更多行。

我有一个 JavaScript 变量，它代表整个列表应该被提升的行数。请注意，我不希望在列表中交换行。

例如，如果我将它提升 2 行，“第三”将定位在“第一”最初所在的位置，“第一”将定位在高两行。

理想情况下，我想要一个 jQuery 解决方案而不是原生 JavaScript 解决方案。谢谢

```
<ul id="myList">
 <li>First</li>
 <li>Second</li>
 <li>Third</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:04:46.670

检查这个**演示**：http: [//jsfiddle.net/n6UhP/1/](http://jsfiddle.net/n6UhP/1/)

这假设您的列表是绝对定位的。

```
var liHeight = $('#myList li:first').height(); 

function moveUpBy(_numLIs) {
    $('#myList').animate({
        top: ($('#myList').offset().top - _numLIs * liHeight) + 'px'
    }, 'fast');
}

function moveDownBy(_numLIs) {
    $('#myList').animate({
        top: ($('#myList').offset().top + (_numLIs + 1) * liHeight) + 'px'
    }, 'fast');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:49:58.997

如果您尝试通过手动交互更改列表项的顺序，我认为这`jQuery Sortable`将是最好的选择。

尝试这个：

[http://jqueryui.com/sortable](http://jqueryui.com/sortable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:11:04.417

如果你设置 main`UL`有相对位置，你可以使用 jQuery`position`方法来获取每个列表项的位置，并相应地调整负边距。

```
function moveList(itemIndex) {
    var top = 0 - $('#myList li').eq(itemIndex).position().top;
    $('#myList').animate({
        'margin-top': top
    })

} 
```

演示：http: [//jsfiddle.net/HcUhC/1/](http://jsfiddle.net/HcUhC/1/)

Demo使用了一个固定高度的父级`overflow: hidden`，可以改变不同视觉的溢出

# javascript - JavaScript MD5 校验和生成的性能

> ID：13140298
> 
> 赞同：1
> 
> 时间：2012-10-30T13:41:26.990
> 
> 标签：javascript, asp.net, performance, checksum

我正在尝试创建一个允许用户上传文件以及一些表单数据的[.NET](http://en.wikipedia.org/wiki/.NET_Framework)网站。为了验证上传文件的完整性，将传递客户端 JavaScript 校验和以与服务器生成的校验和进行比较。如果有 1-5 个文件以 1 Gbit/s 的速度上传，JavaScript 校验和生成性能是否会保持不变？

上传器基于项目*[ASP.NET Multiple File Upload With Drag & Drop and Progress Bar Using HTML5](http://www.codeproject.com/Articles/460142/ASP-NET-Multiple-File-Upload-With-Drag-Drop-and-Pr)*

# iphone - 在ScrollView中查找TextField相对于屏幕的坐标

> ID：13140300
> 
> 赞同：1
> 
> 时间：2012-10-30T13:41:38.093
> 
> 标签：iphone, ios

我有大量的`UITextField`内部`UIScrollView`，我想检查 `UITextField`相对于屏幕的坐标，在`textFieldDidBeginEditing`委托方法中，只有当键盘将隐藏`UITextField`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:52:16.110

您可以获得文本字段的绝对位置，如下所示：

```
 CGRect absoluteframe = [mytextfield convertRect:mytextfield.frame toView:[UIApplication sharedApplication].keyWindow]; 
```

然后使用它来测试它是否低于某个特定位置（例如键盘开始的位置），然后相应地滚动滚动视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:48:34.087

在 `textFieldDidBeginEditing`代表

```
 float y = scrollView.contentOffset.y + textField.frame.origin.y;
    float x = scrollView.contentOffset.x + textField.frame.origin.x;

NSLog(@"x Position is :%f , y position is : %f",x,y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-21T06:04:20.820

**斯威夫特 3 解决方案：**

```
let absoluteframe: CGRect = (activeField?.convert(activeField!.frame, to: UIApplication.shared.keyWindow))! 
```

# php - 通过 PHP 转义 html 然后通过 jquery 添加

> ID：13140301
> 
> 赞同：0
> 
> 时间：2012-10-30T13:41:37.877
> 
> 标签：php, jquery, html-entities

我在 php 变量中有以下 html（html 可能会有所不同）。我已经使用附加函数（jQuery）来添加这个 html，但总是失败......（由于 html 格式不正确）。我已经尝试过 htmlentities、html_entity_decode 和 htmlspecialchars 函数来格式化 html，但没有成功.... :( 任何朋友都知道如何转义这个 html。（通过 PHP 或 jquery 以及如何？？？？感谢您的回答）

```
<tr>
    <td class='paramlist_key'>
        <label id='ID' for='FOR' class='CLASS'>*AT</label>
    </td>
    <td class='CLASS_A'>
        <select id="19" name="Name" class="cc" title="" style="" size="">
            <option value="" >Select below</option>
            <option value="A" selected="selected">A</option>
            <option value="B">B</option>
        </select>
        <span id="mm" style="display:none;">&nbsp;</span>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:46:20.097

由于下一行，Javascript 代码执行可能会中断。尝试这个：

```
$('elementIdentification').before("< ?php echo str_replace('\r\n','',str_replace('\n','',$html)); ?>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:51:31.787

您需要将 HTML 转换为有效的 JavaScript 字符串，这意味着它必须是 1 行，并且必须转义所有 "-quotes 或 '-quotes，具体取决于您的外部样式在最终 JS 中的样式。所以类似于：

```
$html = str_replace("\n", "\\n", $html);
$html = str_replace('"', '\"', $html); 
```

或者更简单，只是`json_encode()`它并省略 JS 脚本本身中的引号，因为`json_encode()`将添加这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:44:03.870

您可能不需要 jQuery Append 来执行此操作，如果 HTML 被解码，您可以简单地回显它。

# ruby-on-rails-3.2 - 如何使用 Rails 3.2 和 Ruby 1.9.3 上的 Vestal 版本绕过 NoMethodError？

> ID：13140303
> 
> 赞同：1
> 
> 时间：2012-10-30T13:41:43.707
> 
> 标签：ruby-on-rails-3.2, vestal-versions

好的 - 我想我已经到处搜索了，我认为这应该是一个重复的问题，但是在查看并尝试了多种事情之后仍然没有基本的 vestal_versions （1.2.2）工作。我处于开发的早期阶段，因此我对其他在 Rails 3.2 和 Ruby 1.9.3 上实际工作的版本控制解决方案持开放态度。

回购所有者正在寻找另一个冠军（也许这应该告诉我一些事情，呵呵），所以如果没有一些 TLC，也许这是不可能的，但如果有人弄清楚了，我会很感激。

谢谢你的时间！

这是我的情况：

*   最大操作系统 X 10.8.2
*   mac 端口：ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin11]
*   导轨 3.2.8

在我的 Gemfile

```
stuff...
gem 'mysql2'
gem 'vestal_versions', :git => 'git://github.com/laserlemon/vestal_versions.git'
more stuff... 
```

bundle 告诉我我有： - 使用来自 git://github.com/laserlemon/vestal_versions.git 的vestal_versions (1.2.2) (在master)

我的模型：

```
class StoryPage < ActiveRecord::Base
  versioned

  belongs_to      :story

  attr_accessible :page_num, :title, :story_version, has_been_deleted, :content
end 
```

从我的控制器：

定义创建

```
 @story = current_user.stories.create(
      :name => params[:stories][:name] || 'New Story',
      :description => params[:stories][:description] || ''
    )

    # Add a blank page
    @story.story_pages.create(
        :title => 'New Page',
        :page_num => 1,
        :story_version => @story.version
    )
    @story.save

    respond_with(@story) do |format|
      format.html
      format.json
    end
  end 
```

错误输出包含：

```
> DEPRECATION WARNING: The InstanceMethods module inside
> ActiveSupport::Concern will be no longer included automatically.
> Please define instance methods directly in VestalVersions::Changes
> instead. (called from include at
> /Users/leo_odonnell/.bundler/ruby/1.9.1/vestal_versions-6273df533f85/lib/vestal_versions.rb:109)
>     # and more like that, then
>     NoMethodError (undefined method `class_inheritable_accessor' for #<Class:0x007fa59e5c9400>):
>       app/models/story_page.rb:2:in `<class:StoryPage>'
>       app/models/story_page.rb:1:in `<top (required)>'
>       app/controllers/stories_controller.rb:22:in `create' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T21:33:13.493

尝试：捆绑更新 rake

此外，如果您收到 MassAssignmentSecurity::Error 尝试此修复：[https ://github.com/laserlemon/vestal_versions/issues/86](https://github.com/laserlemon/vestal_versions/issues/86)

# java - 将 daos 自动连接到服务中，并将该服务自动连接到 Junit 测试类中

> ID：13140315
> 
> 赞同：1
> 
> 时间：2012-10-30T13:42:34.257
> 
> 标签：java, spring, mybatis

我正在尝试将 Dao 自动连接到服务和服务到 Junit 测试类中，但出现以下错误。

```
 productService:null
java.lang.NullPointerException
    at com.localbazaar.product.test.ProductServiceTest.test01_selectAuthor(ProductServiceTest.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:82)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

当我为 编写接口和实现时`ProductService`，服务对象正在打印，但作者对象为空。

谁能告诉我如何解决这个问题？

```
//DAO
package com.dao;

import com.domain.Author;

public interface AuthorMapper {

    int deleteByPrimaryKey(Integer authorId);
}

//service
package com.service;

@Service
public class ProductService{

    @Autowired
    private AuthorMapper authorMapper;
        public AuthorselectAuthorByPrimaryKey(Integer authorId) {
        Author author = null;
        try{
            author = authorMapper.selectAuthorByPrimaryKey(authorId);
        }catch(Exception e){}
        return author ;
    }
}
---------------------------------------------------------------------------------
// JUnit Test Class
@ContextConfiguration(locations = {"classpath:springTest/springcontext.xml"})
@Controller
public class ProductServiceTest extends   AbstractTransactionalJUnit4SpringContextTests {

        @Autowired
    private ProductService productService;

    @Test
    public void test01_selectAuthor(){
        try{
        System.out.println("productService:"+productService);
            Author author = productService.selectAuthorByPrimaryKey(1);
            System.out.println(author);
            System.out.println(author.getAuthorId());
            System.out.println(author.getSourceId());
            System.out.println(author.getName());
            System.out.println(author.getPersonalName());
            System.out.println(author.getRevision());
            System.out.println(author.getLastModified());
        }catch(Exception e){
            e.printStackTrace();
        }
    }   
}
----------------------------------------------------------------------------------

AuthoerMapper.xml

  <resultMap id="BaseResultMap" type="com.domain.Author" >
    <id column="author_id" property="authorId" jdbcType="INTEGER" />
    <result column="source_id" property="sourceId" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="personal_name" property="personalName" jdbcType="VARCHAR" />
    <result column="revision" property="revision" jdbcType="INTEGER" />
    <result column="last_modified" property="lastModified" jdbcType="VARCHAR" />
  </resultMap>

  <sql id="Base_Column_List" >
    author_id, source_id, name, personal_name, revision, last_modified
  </sql>

  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from author_t
    where author_id = #{authorId,jdbcType=INTEGER}
  </select>

  <select id="selectAuthorBySourceId" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    from author_t
    where source_id = #{sourceId,jdbcType=VARCHAR}
  </select>

  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from author_t
    where author_id = #{authorId,jdbcType=INTEGER}
  </delete>

  <insert id="insert" parameterType="com.domain.Author" >
    <selectKey resultType="java.lang.Integer" keyProperty="authorId" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into author_t (source_id, name, personal_name, 
      revision, last_modified)
    values (#{sourceId,jdbcType=VARCHAR}, #{name,jdbcType=VARCHAR}, #{personalName,jdbcType=VARCHAR}, 
      #{revision,jdbcType=INTEGER}, #{lastModified,jdbcType=VARCHAR})
  </insert>

  <insert id="insertSelective" parameterType="com.domain.Author" >
    <selectKey resultType="java.lang.Integer" keyProperty="authorId" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into author_t
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="sourceId != null" >
        source_id,
      </if>
      <if test="name != null" >
        name,
      </if>
      <if test="personalName != null" >
        personal_name,
      </if>
      <if test="revision != null" >
        revision,
      </if>
      <if test="lastModified != null" >
        last_modified,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="sourceId != null" >
        #{sourceId,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="personalName != null" >
        #{personalName,jdbcType=VARCHAR},
      </if>
      <if test="revision != null" >
        #{revision,jdbcType=INTEGER},
      </if>
      <if test="lastModified != null" >
        #{lastModified,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>

  <update id="updateByPrimaryKeySelective" parameterType="com.domain.Author" >
    update author_t
    <set >
      <if test="sourceId != null" >
        source_id = #{sourceId,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="personalName != null" >
        personal_name = #{personalName,jdbcType=VARCHAR},
      </if>
      <if test="revision != null" >
        revision = #{revision,jdbcType=INTEGER},
      </if>
      <if test="lastModified != null" >
        last_modified = #{lastModified,jdbcType=VARCHAR},
      </if>
    </set>
    where author_id = #{authorId,jdbcType=INTEGER}
  </update>

  <update id="updateByPrimaryKey" parameterType="com.domain.Author" >
    update author_t
    set source_id = #{sourceId,jdbcType=VARCHAR},
      name = #{name,jdbcType=VARCHAR},
      personal_name = #{personalName,jdbcType=VARCHAR},
      revision = #{revision,jdbcType=INTEGER},
      last_modified = #{lastModified,jdbcType=VARCHAR}
    where author_id = #{authorId,jdbcType=INTEGER}
  </update>

----------------------------------------------------------------------------------
//springcontext.xml

    <bean id="propertyConfigurer"
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location">
            <value>classpath:springTest/config.properties</value>
        </property>
    </bean>     

    <!-- define the mysql dataSource -->
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${driverClassName}" />
        <property name="url" value="${url}" />
        <property name="username" value="${username}" />
        <property name="password" value="${password}" />    
    </bean> 

    <!-- transaction manager -->
    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

     <aop:config>  
         <aop:advisor pointcut="execution(* com.service..*.*(..))" advice-ref="txAdvice"/>  
     </aop:config>
     <tx:advice id="txAdvice" transaction-manager="transactionManager">  
         <tx:attributes>  
             <tx:method name="get*" read-only="true"/>  
             <tx:method name="find*" read-only="true"/>  
             <tx:method name="*"  propagation="REQUIRED"/>  
        </tx:attributes>  
     </tx:advice>       

      <!-- enable component scanning and autowire (beware that this does not enable mapper scanning!) -->    
    <context:component-scan base-package="com.service" />

     <!-- define the SqlSessionFactory -->
    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="typeAliasesPackage" value="com.domain" />
        <property name="mapperLocations" value="classpath*:com/dao/*.xml" />
    </bean>

   <!-- scan for mappers and let them be autowired -->
    <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <property name="basePackage" value="com.dao" />
    </bean>

    <bean id="productService" class="com.service.ProductService" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:53:36.433

这`Exception`表明您的类路径中没有 CGLIB。您应该能够在[CGLIB SourceForge 页面上](http://cglib.sourceforge.net/)获得该 jar 。

# google-chrome - 检查网络响应是来自服务器还是来自 Chrome 缓存

> ID：13140318
> 
> 赞同：55
> 
> 时间：2012-10-30T13:42:39.150
> 
> 标签：google-chrome, caching, request, developer-tools

在 Google Chrome 中，您如何检查哪些文件来自浏览器缓存，哪些来自服务器？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-31T11:55:39.883

在 Chrome 开发者工具中切换到网络选项卡和大小列，它会给你下载内容的大小或说*（来自磁盘/内存缓存）*。

[![缓存请求](../Images/d54ea333ecb383e2dd639e2513c9f80a.png)](https://i.stack.imgur.com/koloU.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-12-07T23:15:40.163

**如果您看不到尺寸栏，那么您可能需要关闭此窗口**

[![关闭标题、预览、响应选项卡](../Images/4bf2c1a4de755f0ae345220d3c079660.png)](https://i.stack.imgur.com/KIIfL.jpg)

大小列将告诉您响应是来自缓存还是来自网络。

# delphi - 如何针对程序的其他窗口中的一些（但不是全部）创建对话框模式？

> ID：13140321
> 
> 赞同：1
> 
> 时间：2012-10-30T13:42:43.103
> 
> 标签：delphi, modal-dialog, delphi-xe2

> **可能重复：**
> [当另一个表单以模态方式显示时，如何制作未禁用的表单？](https://stackoverflow.com/questions/12953225/how-can-i-make-a-form-that-is-not-disabled-when-another-form-is-shown-modally)

假设我有一个包含三个表单的应用程序：一个引导用户完成工作流、向导风格的主表单；在向导的某些步骤中偶尔显示的模式窗口；第三个“信息”窗口可以随时显示，与用户在工作流程中的位置无关。

如何使模态窗口从主窗体中获取焦点，但始终保持信息窗口可用和响应？

`InfoFrame.Create(nil).Show`当模态表单显示时，使用主框架中最明显的信息窗口会导致信息窗口不可用。

奇怪的是，如果我从模态窗口创建并显示信息窗口，它将以所需的方式响应，并且在模态窗口被关闭后仍然存在。但是，当模态窗口再次显示时，信息窗口将被迫进入背景并变得无响应。

`ShowModal`即使调用了另一个表单的过程，如何使信息窗口始终可用？

[在我正在处理的实际应用程序中，实际上有来自大约十几个“工作流程”主窗口（其中许多也是模态）的数十个模态表单，但只有一个信息窗口（其中可能显示多个实例），我宁愿不必将对 ShowModal 的每次调用都更改为其他内容，尽管如果这是唯一的选择，我不反对包装或子类化调用。]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:51:27.050

不要使用`ShowModal`，而是禁用`MainForm`using`EnableWindow(MainForm.Handle, False)`并在之后再次启用它 using `EnableWindow(MainForm.Handle, True)`。您可能需要添加一些内容以确保正确的窗口始终位于顶部。

编辑：如果您不想更改`MainForm`或 modal 表单中的任何内容，您可以添加一个 Timer 到该`InfoFrame`表单不断启用自身：

```
procedure TInfoFrame.EnablerTimer(Sender: TObject);
begin
  if not IsWindowEnabled(Self.Handle) then
    EnableWindow(Self.Handle, True);
end; 
```

这样，`InfoFrame`即使在调用`ShowModal`另一种形式后也可以使用。

Edit2：正如@DavidHeffernan 所指出的，而不是在计时器中，放置此逻辑的更好位置是`WM_ENABLE`在`InfoFrame`. 不过，这个想法保持不变。

# vb.net - 2个集合同时循环

> ID：13140324
> 
> 赞同：0
> 
> 时间：2012-10-30T13:42:48.373
> 
> 标签：vb.net, collections

嗨，我正在使用结构和集合迈出第一步，我已经使用相同的结构创建了 2 个集合。

一个集合保存今年的数据，另一个保存去年的数据。

是否有可能同时遍历两者？

```
Structure dateControl

   Dim StartDate As Date
   Dim EndDate As Date
   Dim weekCount As Integer
   Dim YearWeek As Integer

End Structure

Dim LastYearStruct As dateControl

    For I = 1 To howmanyweeks

        LastYearStruct.StartDate = DateAdd(DateInterval.WeekOfYear, I - 1, dateFirstSunday)
        LastYearStruct.EndDate = DateAdd(DateInterval.Day, 7, LastYearStruct.StartDate)
        LastYearStruct.weekCount = I
        LastYearStruct.YearWeek = I

        lastYear.Add(LastYearStruct)

    Next

Dim ThisYearStruct As dateControl

    For I = 1 To howmanyweeks

        ThisYearStruct.StartDate = DateAdd(DateInterval.WeekOfYear, I - 1, dateFirstSunday)
        ThisYearStruct.EndDate = DateAdd(DateInterval.Day, 7, ThisYearStruct.StartDate)
        ThisYearStruct.weekCount = I
        ThisYearStruct.YearWeek = I

        ThisYear.Add(ThisYearStruct)

    Next 
```

我正在尝试类似的东西

对于今年和去年的每一件事

debug.print 东西

下一个

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:23:41.067

只需使用 For 循环

```
For i As Integer = 1 To lastYear.Length
    Dim lastYearThing = lastYear(i)
    Dim thisYearThing = thisYear(i)
    ' ...
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:19:31.070

您可以同时手动遍历集合。

```
 Dim lastYearEnumerator = lastYear.GetEnumerator()
    Dim thisYearEnumerator = ThisYear.GetEnumerator()
    Do While lastYearEnumerator.MoveNext AndAlso thisYearEnumerator.MoveNext
        Dim lastYearThing = lastYearEnumerator.Current
        Dim thisYearThing = thisYearEnumerator.Current

        ' do stuff with things
    Loop 
```

这将遍历两个集合，直到到达任一集合的末尾。

# css - 元素不服从我的 CSS（左/浮动）

> ID：13140327
> 
> 赞同：0
> 
> 时间：2012-10-30T13:42:56.910
> 
> 标签：css

我试图在`img`用户样式表的帮助下将所有网页的所有元素一直移动到可见屏幕之外的最右边。

```
img {
    //display:none !important;
    position: absolute !important;
    left:100% !important;
    //float:right !important;
    //clear:right !important;
} 
```

它大部分时间都有效，但有时却无效，[就像这里一样](http://i.imgur.com/9EOuN.png)。

我什至尝试了所有可能的设置组合，即使是注释掉的设置。似乎是什么问题？

编辑:: 如果我向左滚动一点，我希望仍然能够看到图像，这就是我使用 left:100% 的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:48:19.427

我建议尝试找到另一种方法，而不是将图像移出屏幕，但如果您*必须*将其移出屏幕，请尝试：

```
img{
   position:fixed!important;
   top:-99999999px;
   left:-99999999px;
} 
```

这应该使图像固定定位（相对于窗口）并将其移出屏幕。

# api - 在本地网络上使用 Google 地图 API

> ID：13140331
> 
> 赞同：3
> 
> 时间：2012-10-30T13:43:23.397
> 
> 标签：api, google-maps, mobile, local

我正在考虑开发一个具有以下功能的软件：

*   在桌面上运行，与其他软件（MS Flight Simulator）连接。
*   充当 Web 服务器，打开 TCP 套接字并接收 HTTP 请求，并返回 HTTP 响应（包括 Google Maps API）。
*   用户可以使用本地网络（例如 192.168.0.1:8080）上的移动设备（Android、iPhone、iPad...）的 Web 浏览器连接到该服务器，因此会显示 Google 地图。
*   它将是一个免费软件。
*   我还想在地图上添加 AdSense 库。

有类似的应用程序，例如 FSXFollow 或 FsMovMap。但是如果用户不必安装本机应用程序而只使用网络浏览器会更好。

我在使用方面发现了以下陈述：

9.1 对您的 Maps API 实施的免费、公开可访问性。

9.1.1 一般规则。

(b) 公共访问（无防火墙）。您的 Maps API 实施不得 (i) 仅在防火墙后运行；(ii) 仅在内部网络上（开发和测试阶段除外）；或 (iii) 在封闭社区中（例如，通过仅受邀访问）。

我想知道我是否可以使用它。如果没有，有没有办法获得许可？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:46:59.513

据我所知，如果您没有直接连接到 Internet（例如，使用 javascript 创建图表的那个），很多 Google API 都无法工作。

# android - 在安卓相机上实现连拍模式

> ID：13140333
> 
> 赞同：5
> 
> 时间：2012-10-30T13:43:27.107
> 
> 标签：android, camera

我正在尝试在 android 的相机上实现突发模式（目前在 ICS 上）我在网上搜索了一些关于此功能的文档并遇到了几个问题：

*   需要保存（可能在 asynctask 上）每个捕获的图像值，然后对其进行处理并将其保存在 sd 卡中

*   可能在以连续模式捕获图像时处理堆

到目前为止，这是我在调查这个问题时得到的第一印象，有人可以指导我在哪里可以获得更多信息、算法甚至源代码吗？

谢谢您的帮助。乌迪

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-20T06:58:32.517

您也可以将此代码作为基线检查：[https](https://github.com/rdasxy/android-burst-camera) ://github.com/rdasxy/android-burst-camera 。还要先检查一下：http: [//developer.android.com/guide/topics/media/camera.html](http://developer.android.com/guide/topics/media/camera.html)。供您预览使用`TextureView`（您需要将硬件加速添加到您的 AndroidManifest.xml），而不是`SurfaceView`. 如果您尝试将图片缓存在内存中，您可能会很快用完堆，特别是如果您将图片大小设置为较大的值。因此，在方法中收到数据后立即保存数据`pictureCallBack.onPictureTaken`通过使用例如AsynchTask。检查（测量！）设备内存的写入速度与 sdcard 写入速度的对比。首先保存到设备的内部存储器并在需要时将其移动到 sdcard 时，您可能会获得更高的整体处理性能。`largeHeap=true`还尝试通过添加到您的 android 系统为您提供更大的堆大小`AndroidManifest.xml`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T00:58:47.527

这个问题有点类似于[这个关于堆栈溢出](https://stackoverflow.com/questions/6889271/how-to-make-burst-mode-available-to-camera)的问题。该问题中的代码可能会有所帮助。

# javascript - 如何使用混合面板 API？

> ID：13140336
> 
> 赞同：9
> 
> 时间：2012-10-30T13:43:31.077
> 
> 标签：javascript, jquery, jsonp, mixpanel

我无法连接到 mixpanel。

我尝试使用正确的 api_key 和 api_secret，如下所示：

```
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js" />
    </script>
    <script type="text/javascript" src="faulty-labs-md5.js" />
    </script>
</head>
<body>
    <script type="text/javascript">
$(document).ready(function() {
    $("#btnTest").click(function() {

        var api_key = 'BigSecret';
        var api_secret = 'BigSecret2';
        var expire = new Date('2012', '12', '24').getTime() / 1000 + 3600;
        var from_date = $("#date1").val();
        var to_date = $("#date2").val();
        var sig = faultylabs.MD5("api_key=" + api_key + "expire=" + expire + "from_date=" + from_date + "to_date=" + to_date + api_secret);
        //var path = 'https://data.mixpanel.com/api/2.0/export?api_key=' + api_key + "&expire=" + expire + "&from_date=" + from_date + "&to_date=" + to_date;
        var path = 'https://data.mixpanel.com/api/2.0/export?api_key=' + api_key + "&expire=" + expire + "&from_date=" + from_date;
        path = path + "&sig=" + sig.toLowerCase();
        $.jsonp({
            type: 'GET',
            url: path,
            async: false,
            callback: to_date,  // sneaky bogus shenanigans
            callbackParameter: 'to_date', // more of same
            contentType: "application/json",
            dataType: 'jsonp',
            cache: true,
            success: function(json) {
                alert(json);
            },
            error: function(e) {
                console.log(e.message);
            }
        });
    });
});
    </script>
    <input type="text" id="date1" value="2012-10-29" />
    <input type="text" id="date2" value="2012-10-29" />
    <button onclick="return false" id="btnTest">Test</button>
</body>
</html> 
```

如您所见，我尝试将此 API 与 JSONP 一起使用，但我迷路了。有没有人了解mixpanel和JSONP？

先感谢您。

编辑：我添加了新版本的页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T01:27:04.687

在这里，我意识到了一些事情。我能够让它与我尝试过的所有其他端点一起工作，但“导出”。我很想相信这是原始数据导出端点特有的东西。通读他们的[文档](https://mixpanel.com/docs/api-documentation/exporting-raw-data-you-inserted-into-mixpanel)，原始数据端点是唯一不属于主要 API 的端点，因此需要不同的基本 URI“ [https://data.mixpanel.com/api/2.0](https://data.mixpanel.com/api/2.0) ”。所有其他端点“事件”、“分段”等都使用“ [https://mixpanel.com/api/2.0](https://mixpanel.com/api/2.0) ”。我已经记下了我在下面经历的步骤。我正在使用[jquery.MD5](https://github.com/gabrieleromanato/jQuery-MD5/blob/master/jquery.md5.js)库来实现 md5

```
$(function() {
  $("#test_request").click(function() {
    var api_secret, arg_keys, args, args_concat, end_point, key, 
    mixpanel_base_uri, sig, sorted_keys, _i, _len;
    args = {};
    end_point = "export";
    api_secret = "BIG_SECRET2";
    args.api_key = "BIG_SECRET";

    args.from_date = $("input[name=from_date]").val();
    args.to_date = $("input[name=to_date]").val();
    //using Math.floor to round to integer as api expects integer
    args.expire = Math.floor(new Date().getTime() / 1000 + 3600); 
    arg_keys = Object.keys(args);
    sorted_keys = arg_keys.sort();
    args_concat = "";

    //concatenating key value pairs
    for (_i = 0, _len = sorted_keys.length; _i < _len; _i++) {
      key = sorted_keys[_i];
      args_concat = "" + args_concat + key + "=" + args[key];
    }
    sig = $.md5(args_concat + api_secret);

    //merge signature property with args hash
    $.extend(args, {
      sig: sig
    });

    //export endpoint isn't part of the main api and data.mixpanel instead of just mixpanel.com
    DATA_URI = "https://data.mixpanel.com/api/2.0"
    DEFAULT_URI = "https://mixpanel.com/api/2.0"
    BASE_URI = end_point === "export" ? DATA_URI : DEFAULT_URI;
    $.getJSON("" + BASE_URI + "/" + end_point + "?callback=?", args, function(result) {
      alert("result is" + JSON.stringify(result));

    });
  });
}); 
```

我还为所有其他端点提出了一个可行的解决方案。这是链接 [http://jsfiddle.net/Dantheta/CmKQN/](http://jsfiddle.net/Dantheta/CmKQN/)

希望你觉得它有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T19:49:23.987

看了[这个 PHP](https://mixpanel.com/docs/api-documentation/a-tutorial-on-exporting-data)之后，我很确定你需要对你的 api 签名做一个 md5 散列。

导入一个 md5 库，比如[这个](https://github.com/gabrieleromanato/jQuery-MD5/downloads)

```
<script type="text/javascript" src="jquery.md5.min.js"></script> 
```

然后做这样的事情：

```
var sig = "api_key=" + api_key + "expire=" + expire + "from_date=" + from_date + "to_date=" + to_date + "bigsecret2";
sig = $.md5(sig); 
```

我正在尝试完成与您相同的事情，但不幸的是我仍然没有成功。

**编辑**- 这很粗糙。如果任何参数未使用 sig 散列，API 将失败。如果包含任何不属于 API 的参数，它也会失败。JsonP 添加了一个“回调”和一个“_”时间戳参数，以便它可以做它所做的事情，这会中断调用。`cache: true`您可以通过使用允许您重命名`callback`参数的特殊 jsonp 插件排除时间戳来解决此问题。在这里，我将其重`to_date`命名为并将回调函数命名为“2012-10-29”。这很疯狂，它仍然不起作用，因为回复不是有效的json。这是一系列无法​​评估的以换行符分隔的 json 对象，我仍然停留在这部分。这是我到目前为止所得到的：

```
<script type="text/javascript" src="jquery-1.8.2.js"></script>
<script type="text/javascript" src="jquery.md5.min.js"></script>
<script type="text/javascript" src="jquery.jsonp-2.4.0.js"></script>

<script>
    var events = document.getElementById("events");

    var api_key = "secret";
    var expire = "1351811239";
    var from_date = "2012-10-29";
    var to_date = "2012-10-29";

    var sig = "api_key=" + api_key + "expire=" + expire + "from_date=" + from_date + "to_date=" + to_date + "secret2";
    sig = $.md5(sig);

    var path = 'https://data.mixpanel.com/api/2.0/export?api_key=' + api_key + "&expire=" + expire + "&from_date=" + from_date;
    // to_date will be added later as the sneaky callback

    path = path + "&sig=" + sig;

    $.jsonp({
        type: 'GET',
        url: path,
        async: false,
        callback: to_date,  // sneaky bogus shenanigans
        callbackParameter: 'to_date', // more of same
        contentType: "application/json",
        dataType: 'jsonp',
        cache: true,
        success: function(json) {
            alert(json);
        },
        error: function(e) {
            console.log(e.message);
        }
    });

</script> 
```

最终，我举手编写了一个 C# 程序来访问 API 并为我吐出一个 CSV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T02:39:54.820

从文档中：

> 我们没有 JS 客户端库，但是我们在 API 后端实现了 jsonp。有关简要概述，请参阅 Wikipedia 文章。我们的 jsonp 参数是“回调”。签名计算时不使用该参数。

[https://mixpanel.com/docs/api-documentation/data-export-api#libs-js](https://mixpanel.com/docs/api-documentation/data-export-api#libs-js)

假设您正确计算签名，以下示例将起作用：

```
 $.getJSON('http://mixpanel.com/api/2.0/segmentation/?callback=?', {
            event: event,
            from_date: from_date,
            to_date: to_date,
            expire: expire,
            sig: sig,
            api_key: api_key
        }, function (result) {
            alert(result);
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T19:50:27.483

正如 Tyler 提到的，在将签名附加到请求 URL 之前，您需要对签名进行 MD5 哈希处理。

此外，如果您粘贴的是您的代码，那么您有一个错误：

`path = path + + "&sig=" + sig;`

应该：

`path = path + "&sig=" + sig`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T15:51:47.803

我已经尝试了很多东西，但我没有成功使用 jsonp 向 mixpanel 发送请求，因为它生成了新参数。没有人向我展示一个可行的解决方案，所以我想这个问题是无法解决的。如果有人向我展示了解决方案，我将很乐意删除此答案并接受他/她的答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-12T20:47:39.733

/export 端点似乎不支持 JSONP 回调。如果您计算您的签名并在没有回调且没有缓存破坏器（默认情况下通过 $.ajax 调用提供）的情况下调用 URL，您将获得结果。

# java - 在设置 WebViewCore 之前不支持 android EventHub.removeMessages(int what = 107)

> ID：13140338
> 
> 赞同：1
> 
> 时间：2012-10-30T13:43:34.347
> 
> 标签：java, android, listview, webview

您好，当我从 listview 活动启动 webview 时出现此错误。看到有趣的事情是，当我尝试启动 webview 两三次时它工作正常。收到此错误后。请给我完美的解决方案。

欢迎所有想法

```
10-30 18:53:06.966: W/webcore(20239): java.lang.Throwable: EventHub.removeMessages(int what = 107) is not supported before the WebViewCore is set up.
10-30 18:53:06.966: W/webcore(20239):   at android.webkit.WebViewCore$EventHub.removeMessages(WebViewCore.java:1671)
10-30 18:53:06.966: W/webcore(20239):   at android.webkit.WebViewCore$EventHub.access$7800(WebViewCore.java:920)
10-30 18:53:06.966: W/webcore(20239):   at android.webkit.WebViewCore.removeMessages(WebViewCore.java:1783)
10-30 18:53:06.966: W/webcore(20239):   at android.webkit.WebView.sendOurVisibleRect(WebView.java:2858)
10-30 18:53:06.966: W/webcore(20239):   at android.webkit.ZoomManager.setZoomScale(ZoomManager.java:586)
10-30 18:53:06.966: W/webcore(20239):   at android.webkit.ZoomManager.access$1700(ZoomManager.java:49)
10-30 18:53:06.966: W/webcore(20239):   at android.webkit.ZoomManager$PostScale.run(ZoomManager.java:977)
10-30 18:53:06.966: W/webcore(20239):   at android.os.Handler.handleCallback(Handler.java:605)
10-30 18:53:06.966: W/webcore(20239):   at android.os.Handler.dispatchMessage(Handler.java:92)
10-30 18:53:06.966: W/webcore(20239):   at android.os.Looper.loop(Looper.java:137)
10-30 18:53:06.966: W/webcore(20239):   at android.app.ActivityThread.main(ActivityThread.java:4340)
10-30 18:53:06.966: W/webcore(20239):   at java.lang.reflect.Method.invokeNative(Native Method)
10-30 18:53:06.966: W/webcore(20239):   at java.lang.reflect.Method.invoke(Method.java:511)
10-30 18:53:06.966: W/webcore(20239):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-30 18:53:06.966: W/webcore(20239):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-30 18:53:06.966: W/webcore(20239):   at dalvik.system.NativeStart.main(Native Method) 
```

# asp.net - CreateUserError 事件中的 CreateUserWizard 和 ActiveIndex

> ID：13140340
> 
> 赞同：2
> 
> 时间：2012-10-30T13:43:37.130
> 
> 标签：asp.net, createuserwizard

我有一个 CreateUserWizard，它有 4 个步骤，当发生错误时，在 CreateUserError 事件中，我想将当前步骤设置为第二步，所以我只是使用

```
 RegisterUser.ActiveStepIndex = 1; 
```

但是当发生错误时，向导停留在此代码的最后一步不起作用。有什么建议吗？

# jboss - @Startup @Singleton @PostConstruct 给出一个 RunTimeException （无法在新创建的 bean 实例上调用 PostConstruct）

> ID：13140344
> 
> 赞同：1
> 
> 时间：2012-10-30T13:43:49.367
> 
> 标签：jboss, singleton, startup, cdi, postconstruct

我正在尝试构建一个在启动时启动的 bean，以对我们拥有的数据进行迁移。它被注释为@Singleton @Startup bean，但@PostConstruct 失败了，但我不知道为什么。

这是代码：

```
@Startup
@Singleton
@DependsOn("SearchInitializer")
public class SearchMigrator {
    @Inject
    @Any
    private Instance<MigrationScenario> migrationScenarios;
    @Inject
    private SearchRepository repository;
    private List<MigrationScenario> sortedScenarioList;

    @PostConstruct
    public void doMigration() {
        (call run() on each MigrationScenario)
    }
} 
```

SearchInitializer 也是一个 @Startup @Singleton bean，在方法上带有 @PostConstruct 注释，并且运行良好（同样，在这个 bean 之前，所以 @DependsOn 工作正常）。SearchRepository 是一个@Stateless bean，它将进入数据库。

但是，如果我运行这段代码，我会得到这个异常：

```
Create: java.lang.RuntimeException: Could not invoke PostConstruct on the newly created bean instance 
```

有人知道我在做什么错吗？

**编辑**

附加信息：我怀疑“@Inject 私有 SearchRepository 存储库”是罪魁祸首。当我删除该存储库的注入时，它启动得很好。如果我不这样做，我会收到此错误：

```
16:10:39,531 ERROR [org.jboss.kernel.plugins.dependency.AbstractKernelController] Error installing to Start: name=startup-singleton-initiator:topLevelUnit=xxx-war.war,unit=xxx-war.war,bean=SearchInitializer aliases=[startup-singleton-initiator:bean=SearchInitializer,topLevelUnit=xxx-war.war,unit=xxx-war.war] state=Create: java.lang.RuntimeException: Could not invoke PostConstruct on the newly created bean instance
at org.jboss.ejb3.singleton.impl.container.SingletonEJBInstanceManagerImpl.create(SingletonEJBInstanceManagerImpl.java:137) [:1.0.2]
at org.jboss.ejb3.singleton.impl.container.SingletonEJBInstanceManagerImpl.get(SingletonEJBInstanceManagerImpl.java:152) [:1.0.2]
at org.jboss.ejb3.singleton.deployer.StartupSingletonInitiator.start(StartupSingletonInitiator.java:84) [:1.0.2]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_30]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [:1.6.0_30]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_30]
at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_30]
at org.jboss.reflect.plugins.introspection.ReflectionUtils.invoke(ReflectionUtils.java:60) [jboss-reflect.jar:2.2.1.SP1]
at org.jboss.reflect.plugins.introspection.ReflectMethodInfoImpl.invoke(ReflectMethodInfoImpl.java:168) [jboss-reflect.jar:2.2.1.SP1]
at org.jboss.joinpoint.plugins.BasicMethodJoinPoint.dispatch(BasicMethodJoinPoint.java:66) [jboss-reflect.jar:2.2.1.SP1]
at org.jboss.kernel.plugins.dependency.KernelControllerContextAction$JoinpointDispatchWrapper.execute(KernelControllerContextAction.java:257) [jboss-kernel.jar:2.2.0.SP2]
at org.jboss.kernel.plugins.dependency.ExecutionWrapper.execute(ExecutionWrapper.java:47) [jboss-kernel.jar:2.2.0.SP2]
at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dispatchExecutionWrapper(KernelControllerContextAction.java:125) [jboss-kernel.jar:2.2.0.SP2]
at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dispatchJoinPoint(KernelControllerContextAction.java:72) [jboss-kernel.jar:2.2.0.SP2]
at org.jboss.kernel.plugins.dependency.LifecycleAction.installActionInternal(LifecycleAction.java:202) [jboss-kernel.jar:2.2.0.SP2]
at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:54) [jboss-kernel.jar:2.2.0.SP2]
at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:42) [jboss-kernel.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654) [jboss-dependency.jar:2.2.0.SP2]
at org.jboss.deployers.plugins.deployers.DeployersImpl.change(DeployersImpl.java:1983) [:2.2.2.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:1076) [:2.2.2.GA]
at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:679) [:2.2.2.GA]
at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:380) [:6.1.0.Final]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_30]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [:1.6.0_30]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_30]
at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_30]
at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157) [:6.0.0.GA]
at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96) [:6.0.0.GA]
at org.jboss.mx.server.Invocation.invoke(Invocation.java:88) [:6.0.0.GA]
at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:271) [:6.0.0.GA]
at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:670) [:6.0.0.GA]
at org.jboss.system.server.jmx.MBeanServerWrapper.invoke(MBeanServerWrapper.java:138) [:6.1.0.Final]
at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1427) [:1.6.0_30]
at javax.management.remote.rmi.RMIConnectionImpl.access$200(RMIConnectionImpl.java:72) [:1.6.0_30]
at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1265) [:1.6.0_30]
at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1360) [:1.6.0_30]
at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:788) [:1.6.0_30]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_30]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [:1.6.0_30]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_30]
at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_30]
at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:303) [:1.6.0_30]
at sun.rmi.transport.Transport$1.run(Transport.java:159) [:1.6.0_30]
at java.security.AccessController.doPrivileged(Native Method) [:1.6.0_30]
at sun.rmi.transport.Transport.serviceCall(Transport.java:155) [:1.6.0_30]
at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535) [:1.6.0_30]
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790) [:1.6.0_30]
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649) [:1.6.0_30]
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [:1.6.0_30]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [:1.6.0_30]
at java.lang.Thread.run(Thread.java:662) [:1.6.0_30]
Caused by: java.lang.RuntimeException: java.lang.NullPointerException
at org.jboss.ejb3.singleton.aop.impl.AOPBasedSingletonContainer.invokeCallback(AOPBasedSingletonContainer.java:1065) [:1.0.2]
at org.jboss.ejb3.EJBContainer.invokePostConstruct(EJBContainer.java:1396) [:1.7.21]
at org.jboss.ejb3.singleton.aop.impl.AOPBasedSingletonContainer.postConstruct(AOPBasedSingletonContainer.java:762) [:1.0.2]
at org.jboss.ejb3.singleton.impl.container.SingletonEJBInstanceManagerImpl.create(SingletonEJBInstanceManagerImpl.java:133) [:1.0.2]
... 60 more
Caused by: java.lang.NullPointerException
at org.jboss.ejb3.EJBContainer.getApplicationException(EJBContainer.java:509) [:1.7.21]
at org.jboss.ejb3.singleton.aop.impl.ConstructionInvocationContextAdapter.getApplicationException(ConstructionInvocationContextAdapter.java:62) [:1.0.2]
at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.handleExceptionInOurTx(CMTTxInterceptor.java:163) [:0.0.2]
at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:251) [:0.0.2]
at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.requiresNew(CMTTxInterceptor.java:392) [:0.0.2]
at org.jboss.ejb3.tx2.impl.CMTTxInterceptor.invoke(CMTTxInterceptor.java:211) [:0.0.2]
at org.jboss.ejb3.tx2.aop.CMTTxInterceptorWrapper.invoke(CMTTxInterceptorWrapper.java:52) [:0.0.2]
at org.jboss.aop.joinpoint.ConstructionInvocation.invokeNext(ConstructionInvocation.java:80) [jboss-aop.jar:2.2.2.GA]
at org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:76) [:1.0.0.GA]
at org.jboss.aop.joinpoint.ConstructionInvocation.invokeNext(ConstructionInvocation.java:80) [jboss-aop.jar:2.2.2.GA]
at org.jboss.ejb3.core.context.CurrentInvocationContextInterceptor.invoke(CurrentInvocationContextInterceptor.java:47) [:1.7.21]
at org.jboss.aop.joinpoint.ConstructionInvocation.invokeNext(ConstructionInvocation.java:80) [jboss-aop.jar:2.2.2.GA]
at org.jboss.ejb3.interceptors.aop.InvocationContextInterceptor.setup(InvocationContextInterceptor.java:90) [:1.1.3]
at org.jboss.aop.advice.org.jboss.ejb3.interceptors.aop.InvocationContextInterceptor_z_setup_1631131631.invoke(InvocationContextInterceptor_z_setup_1631131631.java) [:]
at org.jboss.aop.joinpoint.ConstructionInvocation.invokeNext(ConstructionInvocation.java:80) [jboss-aop.jar:2.2.2.GA]
at org.jboss.aspects.currentinvocation.CurrentInvocationInterceptor.invoke(CurrentInvocationInterceptor.java:67) [:1.0.1]
at org.jboss.aop.joinpoint.ConstructionInvocation.invokeNext(ConstructionInvocation.java:80) [jboss-aop.jar:2.2.2.GA]
at org.jboss.ejb3.singleton.aop.impl.AOPBasedSingletonContainer.invokeCallback(AOPBasedSingletonContainer.java:1061) [:1.0.2]
... 63 more 
```

如果我通过引导过程进行调试，我会看到存储库实际上是代理的（这也通过堆栈跟踪中对 AOP 的引用得到支持）。

但仍然没有运气弄清楚它！任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:14:39.373

好的，我弄清楚了问题所在。实际上，我的回答将涵盖处理此类错误的一般方法。这个错误的问题在于 JBoss 本身：应用程序服务器**实际上吃掉了真正的错误**，并且只是在你的脸上抛出了 NullPointerException。

我为得到实际错误所做的只是暂时在我的代码中输入这个 hack，只是为了找出发生了什么：

```
@PostConstruct
public void doMigration() throws Throwable {
    try {
        runAllFoundScenarios();
    } catch (Throwable e) {
        System.out.println("Cause: " + e.getCause());
        System.out.println("Message: " + e.getMessage());
        System.out.println("Class: " + e.getClass());
        System.out.println("StackTrace: " + e.getStackTrace());
        throw e;
    }
} 
```

这样，我就能够通过查看日志来确定真正的原因，这使我能够真正解决这个问题。我可以在网络上到处找到有同样问题的人，但没有人发布过解决方法，所以我希望这个答案能帮助你找出真正发生的事情。

仅供参考，对我来说，这是注入存储库的 JPA 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T10:59:29.873

如 PosConstruct 注释 ( [PostConstruct javadoc](http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html) ) 中所述，使用 PostConstruct 注释的方法不允许启动检查异常。

所以，很自然的问题出现了，我们应该如何报告启动 bean 的问题？抛出一个简单的 RuntimeException 来跳过检查的异常限制，似乎不是正确的方法。这种做法用来表示懒惰的开发，许多质量代码分析工具会抱怨。顺便说一句，EJB 容器吞下了原始问题中已经提到的异常。

好吧，在浏览了一段时间后，我还没有找到实际的答案。[对于 EJB bean，在 EJBException 异常层次结构（ EJBException javadoc](http://docs.oracle.com/javaee/6/api/javax/ejb/EJBException.html)）中似乎有一个公平的选择。

对于常规的 CDI bean，我想我们可以选择一些 RuntimeException 子类，如[postconstruct 检查异常中所述](https://stackoverflow.com/questions/8740234/postconstruct-checked-exceptions)

# android - 片段和动画 android

> ID：13140354
> 
> 赞同：0
> 
> 时间：2012-10-30T13:44:34.137
> 
> 标签：android, android-layout

我有个问题。这可以为片段设置动画。这就是我的意思：我单击按钮并从右侧显示片段。当您阅读 pdf 时，就像您转到下一页一样。如果是怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:21:19.917

让 iO 像页面转换一样非常困难，但是如果您只是需要从一个页面滑动到另一个页面，您可以`ViewPager`从 android 支持库中查看视图。我认为这正是您正在寻找的。

编辑：[ViewPager](https://developer.android.com/reference/android/support/v4/view/ViewPager.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:33:56.973

您可能想阅读以下问题：

*   [片段标准过渡没有动画](https://stackoverflow.com/questions/7718111/android-fragment-standard-transition-not-animating)

*   [Android 片段和动画](https://stackoverflow.com/questions/4817900/android-fragments-and-animation)

# xml - antlr 解析 xml 丢失令牌匹配或重复匹配

> ID：13140363
> 
> 赞同：2
> 
> 时间：2012-10-30T13:44:51.640
> 
> 标签：xml, antlr, antlrworks

我是 ANTLR 的新手，并尝试在 ANTLRWorks1.4.3 中遵循语法。

```
grammar TextGra;
element :   starttag (element)* endtag
;
starttag:   '<' TAGNAME '>';
endtag  :   '</' TAGNAME '>';
TAGNAME :   ('a'..'z')|('A'..'Z')|('0'..'9');
WS  :   (' '|'\r'|'\n')+ {skip();} ; 
```

当尝试像这样解析简单的 xml 片段时

```
<a><b><c></c></b></a> 
```

丢失了最后两个 endtag 元素，如何处理这种情况？或者这是错误的方式？在我的情况下不能限制标记名称与其他 xml 解析代码相比。或者语法可以使用 $0 来引用以前匹配的标记吗？（如在正则表达式中）。在这种情况下，通过前一个匹配的开始标签来决定结束标签中的标签名。谢谢大家的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:25:30.690

我猜你正在使用 ANTLRWorks 的解释器：不要，它有问题。始终使用 ANTLRWorks 中包含的调试器（按`CTRL`+`D`启动调试器）。

我没有改变你的语法或输入，这是解释器产生的：

![在此处输入图像描述](../Images/c501ee53aca56bf3bd4f29643cb7b6db.png)

调试器产生了这个：

![在此处输入图像描述](../Images/34b0bd87c7622cdb1480d3175d33a23d.png)

# c# - 是否有返回 TimeZone 或基于坐标的偏移量的函数？

> ID：13140364
> 
> 赞同：2
> 
> 时间：2012-10-30T13:44:57.387
> 
> 标签：c#, timezone, coordinates, latitude-longitude, gmt

在给定坐标的情况下，是否有一个函数可以返回时区（或与某些“支点”如 GMT 或 UTC 的偏移量）？

IOW，我想（假设“TimeZoneType”是一个类或枚举左右）：

```
TimeZoneType timeZone = getTimeZoneForCoordinates(<latitude>, <longitude>); 
```

-或者：

```
int timeZoneDifferential = getTimeZoneOffsetFromUTCForCoordinates(<latitude>, <longitude>); 
```

我在 gis.stackexchange 上发布这个问题之间感到很痛苦。如果被告知，我将删除此问题并将其发布在此处...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:47:45.197

一个简单的问题，一个很大的答案：

能够做到这一点的公司寥寥无几。iphone 是我所知道的第一款可以从地理位置确定时区的设备。甚至我的 TomTom Navi 也无法做到这一点，我必须手动输入 TimeZone 偏移量。

在这里你将如何做到这一点。

1.  购买一些 xxx 欧元 navteq “WorldMaps”，或者使用 OpenStreetMap 以更便宜的价格购买。稍后进行一些转换，您将拥有世界每个国家/地区的多边形。这样的国家通常有 50.000 点或更多代表国家边界。

2.  一旦你有了这些多边形，你必须编写一个函数，为给定的（纬度/经度）提供 countryPolygonId（或 countryID）。
    (countryId = findCountry(lat, lon); // 使用多边形方法中的点

3.  一旦你有了国家，你必须找到下一个大城市：你需要有一个系统的 TimeZone 模块支持的城市列表（我认为这是一个规范，但我不确定。）

然后，您必须将 countryId、cityId 翻译为“Austria/Vienna”之类的字符串。这是您的时区，您可以使用 TimeZone zt = new TimeZone("Austria/Vienna"); 进行初始化

我希望这很有趣，但是这对实现和获取该任务的必要数据非常苛刻。
我已经针对不同的用例完成了第 1 步和第 2 步。

# javascript - 插入 html 地理位置地图时，javascript 代码不起作用

> ID：13140368
> 
> 赞同：2
> 
> 时间：2012-10-30T13:45:13.073
> 
> 标签：javascript, html, map, geolocation

大家好，我正在构建一个移动应用程序，我必须在其中放置地图并显示用户位置并显示用户可以去的其他一些地方但是当我将其插入它时不起作用，所以这是我的工作代码链接[http://jsfiddle .net/yV6xv/1066/](http://jsfiddle.net/yV6xv/1066/)和地图工作 maprkers 工作和地理定位也工作但是当我[http://jsfiddle.net/yV6xv/1067/](http://jsfiddle.net/yV6xv/1067/)它不起作用我认为这是一个很小的错误，我很抱歉问你这个但是你能纠正我的代码吗我确定这是一件小事：/

```
function initialize() {

    var locations = [
        ['<b>Cafee Bellagio</b> <a href="http://google.com">more info</a><br><br>Gothersgade 11<br>1123 København K<br>3314 5472<br><br><img src="https://twimg0-a.akamaihd.net/profile_images/644051119/CoffeeReviewLogo-100.jpg"></img><br><a href="http://google.com">Write a review</a> <a href="http://google.com">Get Directions</a>', 55.6911, 12.5939],
        ['<b>Cafee Nzsikvo</b> <a href="http://google.com">more info</a><br><br>Gothersgade 11<br>1123 København K<br>3314 5472<br><br><img src="https://twimg0-a.akamaihd.net/profile_images/644051119/CoffeeReviewLogo-100.jpg"></img><br><a href="http://google.com">Write a review</a> <a href="http://google.com">Get Directions</a>', 55.6883, 12.5597],
        ['<b>Cafee Bellagio</b> <a href="http://google.com">more info</a><br><br>Gothersgade 11<br>1123 København K<br>3314 5472<br><br><img src="https://twimg0-a.akamaihd.net/profile_images/644051119/CoffeeReviewLogo-100.jpg"></img><br><a href="http://google.com">Write a review</a> <a href="http://google.com">Get Directions</a>', 55.6832, 12.5714],
        ['<b>Cafee Bellagio</b> <a href="http://google.com">more info</a><br><br>Gothersgade 11<br>1123 København K<br>3314 5472<br><br><img src="https://twimg0-a.akamaihd.net/profile_images/644051119/CoffeeReviewLogo-100.jpg"></img><br><a href="http://google.com">Write a review</a> <a href="http://google.com">Get Directions</a>', 55.678272, 12.503643,],
        ['<b>Cafee Bellagio</b> <a href="http://google.com">more info</a><br><br>Gothersgade 11<br>1123 København K<br>3314 5472<br><br><img src="https://twimg0-a.akamaihd.net/profile_images/644051119/CoffeeReviewLogo-100.jpg"></img><br><a href="http://google.com">Write a review</a> <a href="http://google.com">Get Directions</a>', 55.713207, 12.526474,]
        ];

    var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 10,

        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1], locations[i][2]),
            map: map
        });

        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
                infowindow.setContent(locations[i][0]);
                infowindow.open(map, marker);
            }
        })(marker, i));
    }

    // Check if user support geo-location
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;
            var geolocpoint = new google.maps.LatLng(latitude, longitude);
                map.setCenter(geolocpoint );
            var mapOptions = {
                zoom: 8,
                center: geolocpoint,
                mapTypeId: google.maps.MapTypeId.HYBRID
            }
            // Place a marker
            var geolocation = new google.maps.Marker({
                position: geolocpoint,
                map: map,
                title: 'Your geolocation',
                icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png'
            });
        });
    }
}
google.maps.event.addDomListener(window, 'load', initialize);

kastelet.openInfoWindowHtml(
    'Hello, <strong>World!</strong>'
);​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:23:10.697

我可以在这里看到两个问题：

1.  您没有为地图设置中心，根据文档需要它：[https ://developers.google.com/maps/documentation/javascript/reference#Map](https://developers.google.com/maps/documentation/javascript/reference#Map)

2.  您的`#map`div 在`#page4`其中`height`未正确设置为显示地图画布

    *   设置to的高度`#page4`和内容，一切都会好的`#page4``100%`
    *   这将等同`html, body { height: 100% }`于 Google 的 SimpleMap 示例中的定义

请参见此处： http: [//jsfiddle.net/dJYRJ/](http://jsfiddle.net/dJYRJ/)（转到配置文件选项卡，即#page4）

***注意**：然后您需要稍微调整 CSS 以使地图正确显示*

# java - Deploy.jar 不适用于 Java 7

> ID：13140369
> 
> 赞同：1
> 
> 时间：2012-10-30T13:45:23.480
> 
> 标签：java, jar, java-7

我有一个在 Java SE 6 中构建的应用程序，我使用 jar deploy.jar 将浏览器上的代理定义获取到我的应用程序。在 Java 6 中，以下代码运行良好，但在 Java 7 中，相同的代码无法运行。注意：我为 JRE 7 附带的 jar 更改了 Deploy Jar，但它仍然不起作用

```
 BrowserProxyInfo browseProxyInfo = new BrowserProxyInfo();
browseProxyInfo.setAutoConfigURL(autoConfigURL);
browseProxyInfo.setType(ProxyType.AUTO);
    WIExplorerAutoProxyHandler wHandler = new WIExplorerAutoProxyHandler();
wHandler.init(browseProxyInfo);
    URL url = new URL(ConfigLoader.WS_URL + "atualizacao?wsdl");
com.sun.deploy.net.proxy.ProxyInfo[] proxyInfos = wHandler.getProxyInfo(url); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:27:22.357

您必须初始化用户配置文件才能使其在 JAVA 7 中工作。

```
sun.plugin.util.UserProfile

new UserProfile(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:00:03.747

这是官方API吗？可能不是。

尝试通过 java.net-package 获取信息。也许[ProxySelector](http://docs.oracle.com/javase/7/docs/api/java/net/ProxySelector.html)？（我没试过。）

# nginx - 如何匹配位置指令中的字符串数组？

> ID：13140371
> 
> 赞同：2
> 
> 时间：2012-10-30T13:45:29.583
> 
> 标签：nginx

只要 url 不仅匹配一个字符串，而且匹配字符串列表中的任何一个，我都想进入位置部分。

就像是：

```
location ['one', 'two', 'three'] {
    # do more stuff
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T14:18:18.590

您可以通过使用正则表达式位置来做到这一点：

```
location ~ "^/(one|two|three)/.*" {
  #do your stuff
} 
```

注意：如果您想要不区分大小写的匹配，请使用`~*`而不是`~`

# c# - 当涉及指针时，如何在 C# 应用程序中包含 C DLL？

> ID：13140374
> 
> 赞同：1
> 
> 时间：2012-10-30T13:45:44.937
> 
> 标签：c#, .net, c, pointers, dll

我一直在尝试在我的 C# 应用程序中包含一个 C DLL，用于 windows mobile 6.5，但我无法获得正确的行为。

我一直在尝试使用的功能如下（如头文件中所述）：

```
extern "C" __declspec (dllimport) BOOL Init (wchar_t *data); 
```

其中 data 是输入/输出参数。

我的代码，包括这个功能，是这样的：

```
[DllImport(@"ICCardReader.dll")]
public static extern int Init([MarshalAs(UnmanagedType.LPWStr)] ref string data); 
```

尽管在运行时调用此函数时编译器会接受这一点，但该函数具有不良行为（结果始终为假）。

所以我的问题，除了明显的“我做错了什么？”之外，是：当涉及指针时，如何在 C# 应用程序中包含 C DLL？

PSI 已经能够通过第三方应用程序验证 DLL 的正确性

**[编辑]**

感谢用户的建议，我将 Dllimport 更改如下：

```
public static extern int Init(StringBuilder data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:51:44.893

您可能想检查 BOOL 的定义。我怀疑这可能是由于 C 中缺少内置的 bool 而导致的其他类型定义。

可能值得尝试将您的 DllImport 更改为

```
[DllImport(@"ICCardReader.dll")]
public static extern int Init(StringBuilder data); 
```

并检查是否有一些整数值返回。

[编辑] 还尝试将输入更改为 StringBuilder

# heroku - Heroku Toolbelt 在多个帐户之间切换

> ID：13140375
> 
> 赞同：36
> 
> 时间：2012-10-30T13:45:53.330
> 
> 标签：heroku, heroku-toolbelt

我想知道使用 heroku 工具带在 heroku 帐户之间切换的最佳方式是什么。

我曾经有一个个人 heroku 帐户，它是我所有专业 heroku 应用程序的合作者。问题是当我想做一些对财务有影响的更改时：例如添加/删除插件，我不能作为合作者来做。
在 heroku toolbelt 之前，我习惯于更改文件的内容，`~/.heroku/credentials`但它不再存在于 toolbelt 中。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-11T12:25:14.183

您是否尝试过 heroku 帐户[插件](https://github.com/heroku/heroku-accounts)？

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-02-15T08:56:08.493

2017 年，Heroku 发布了[heroku-accounts](https://github.com/heroku/heroku-accounts)，这是工具带的一个附加组件，可以让人们从命令行快速切换帐户。像这样安装它：

`heroku plugins:install heroku-accounts`

然后添加一个帐户（在本例中为“工作”）：

`heroku accounts:add work`

此时，您需要提供要与“工作”别名关联的凭据。对您拥有的其他帐户执行相同操作。然后像这样在别名之间切换：

`heroku accounts:set work`

（对不起，僵尸这个问题。）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-12-07T19:26:04.870

您可以从命令行再次运行登录：

```
heroku login 
```

输入另一个帐户的新电子邮件和密码。

# oracle - 如何在生成的序列号中附加字符串

> ID：13140381
> 
> 赞同：2
> 
> 时间：2012-10-30T13:46:20.237
> 
> 标签：oracle, jpa

在我的应用程序中，我将 Struts2 用于 UI，将 JPA 用于 DAO 层。和Oracle 11G 数据库。

在我的数据库中，我创建了一个序列..

```
CREATE SEQUENCE  "PERK"."EMP_CODE_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 501 CACHE 500 NOORDER  NOCYCLE ; 
```

现在我的要求改变了。根据要求，我想将“TMP”附加到我生成的序列号。

例如：如果我的序列号是：1 那么它会给我 TMP000001。

为此，SQL 查询将是这样的..

```
select 'TMP'||lpad(EMP_CODE_SEQ.nextval,6, '0') test from dual; 
```

但是有什么方法可以在 JPA 中实现上述查询吗？ORACLE有什么办法可以改变输出顺序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:36:15.480

> ORACLE有什么办法可以改变输出顺序吗？

没有。Sequence 仅用于生成编号规则。所以你不能强迫它生成除数字之外的任何东西。为此，您将需要使用隐式或显式数据类型转换和连接来生成所需格式的字符串。作为替代方案，您可以使用`to_char`函数将序列生成的数字转换为左零填充字符串。

```
SQL> select to_char(sq_id.nextval, '000000') res
  2    from dual
  3  /

  RES
-------
 000004 
```

连接（bars 或 `concat' 函数）：

```
SQL> select 'TMP' || to_char(sq_id.nextval, '000000') res
  2    from dual
  3  /

RES
----------
TMP 000006

SQL> select concat('TMP',to_char(sq_id.nextval, '000000')) res
  2    from dual
  3  /

RES
----------
TMP 000007 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T05:12:04.460

我通过在 JPA setter 方法本身中编写逻辑解决了这个问题。这是 JPA 实体的示例。

```
@Entity
@Table(name = "MST_EMP")
public class MstEmp implements Serializable, IsEntity {
    private static final long serialVersionUID = 1L;

    @Id 
    @Column(name = "EMP_CODE")
    @SequenceGenerator( name = "appEmpSeq", sequenceName = "EMP_CODE_SEQ")  
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "appEmpSeq" )
    private String empCode;

    public MstEmp() {
    }

    public String getEmpCode() {
        return this.empCode;
    }

    public void setEmpCode(String empCode) {        
        this.empCode =  getSequencePrefix(empCode)+empCode;
    }

    /**
     * FUNCTION USED TO GENERATE SEQUENCE PREFIX: TEMP+"REQUIRED ZEROs"+EMP CODE
     * @param empCode
     * @return
     */
    public String getSequencePrefix(String empCode){
        String temp = "TEMP";
        if(empCode.length()<6){
            int zeroCount = 6 - empCode.length();

            for(int index=0;index<zeroCount;index++){
                temp = temp + "0";
            }
        }
        return temp;
    }
} 
```

这里..在设置员工代码时，它会调用一个函数来将所需的前缀连接到序列号。

# mysql - Node.js + libmysql-client + pingSync + setInterval = 头痛（真）；

> ID：13140384
> 
> 赞同：5
> 
> 时间：2012-10-30T13:46:24.157
> 
> 标签：mysql, node.js

我经历过一种让我发疯的行为，我无法解决它。

我有一个脚本可以打开几个 mysql 连接并将它们存储在一个数组中。为了防止 MySQL 关闭未使用的连接（该进程应该 24/7 运行），我使用 setInterval 频繁触发 pingSync()。这种方法在另一个项目中为我工作了好几个月，但在节点为 0.8.14 的新主机上，这种行为很奇怪。

```
setInterval(function () {
var count = 0;
console.log('---------------------------------------------------------');
console.log('Length: ');
console.log(connections.length);
connections.forEach(function(connection){
    var res = connection.pingSync();
    console.log('PING mysql '+count+ ' / '+(new Date().getTime()));
    console.log(res);
    count++;
});
console.log('---------------------------------------------------------');
}, 50000); 
```

预期结果：

```
---------------------------------------------------------
Length:
4
PING mysql 0 / 1351603868929
true
PING mysql 1 / 1351603868929
true
PING mysql 2 / 1351603868929
true
PING mysql 3 / 1351603868929
true
--------------------------------------------------------- 
```

我得到的结果：

**#1**

```
---------------------------------------------------------
Length:
4
PING mysql 0 / 1351603868929
true
4
PING mysql 0 / 1351603868929
true
PING mysql 1 / 1351603868929
true
PING mysql 2 / 1351603868929
true
PING mysql 3 / 1351603868929
true
--------------------------------------------------------- 
```

**#2**

```
---------------------------------------------------------
Length:
4
PING mysql 0 / 1351604113400
4
PING mysql 0 / 1351604113400
PING mysql 1 / 1351604113400
PING mysql 2 / 1351604113400
PING mysql 3 / 1351604113400
---------------------------------------------------------
PING mysql 2 / 1351604113400
PING mysql 3 / 1351604113400
---------------------------------------------------------
--------------------------------------------------------- 
```

看起来我的函数 - 或者我的部分函数 - 以随机顺序执行两次。

有谁知道什么可能导致这种行为？或者有什么建议如何找出造成这种混乱的原因？有时我会得到上面引用的预期结果……但大多数时候我得到的结果好坏参半。

编辑： setInterval() 函数只调用一次！（我已经检查了几十次）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:45:01.740

我过去曾经历过 setInterval 有时会以意想不到的方式执行某些事情。例如，如果函数运行时间超过设置的 setInterval。一个简单的解决方法是改用 setTimeout 并在函数结束时再次设置它。

```
var pingMysql = function () {
  var count = 0;

  console.log('---------------------------------------------------------');
  console.log('Length: ');
  console.log(connections.length);

  connections.forEach(function(connection){
    var res = connection.pingSync();

    console.log('PING mysql '+count+ ' / '+(new Date().getTime()));
    console.log(res);

    count++;
  });

  console.log('---------------------------------------------------------');
  setTimeout(pingMysql, 50000)
};

pingMysql(); 
```

尝试这样做，看看是否有帮助。

# ruby-on-rails - 带有发送按钮的 Rails 表单视图

> ID：13140386
> 
> 赞同：0
> 
> 时间：2012-10-30T13:46:29.113
> 
> 标签：ruby-on-rails, actionview, actionviewhelper

我的 _form.html.erb 中有一个由脚手架生成的表单

```
<%= form_for @survey do |f| %>

  <%= f.label :name %><br />
  <%= f.text_field :name %>
  <%= f.submit "Send", class: "btn btn-red span3" %>

<% end %> 
```

我的提交输入产生：

```
<input class="btn btn-red span3" name="commit" type="submit" value="Send"> 
```

我想生成一个按钮而不是一个输入。像这样：

```
<button class="btn btn-red span3" name="commit" type="submit">Send</button> 
```

任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:57:03.580

```
<%= content_tag :button, type: :submit, class: "btn btn-red span3" do %>
   Send
<% end %> 
```

生成以下 HTML

```
<button class="btn btn-red span3" type="submit">
   Send
</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:09:03.310

我发现了一个简单的方法

```
<%= button_tag "Send", class: "btn btn-red span3", name: "commit" %> 
```

产生：

```
<button class="btn btn-red span3" name="commit" type="submit">Send</button> 
```

# android - 无法创建媒体播放器

> ID：13140387
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:46:32.333
> 
> 标签：android, android-video-player

尝试使用媒体播放器播放视频时，出现此错误：

```
Unable to to create media player
D/MediaPlayer(13157): create failed:
D/MediaPlayer(13157): java.io.IOException: setDataSourceFD failed.: status=0x80000000 
```

有人可以在这里提出什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:31:56.043

```
AssetFileDescriptor afd = this.getAssets().openFd(mediaElementArray.getInteger.valueOf(index)));

myMediaplayer.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength()); 
```

这个有效..实际上在资产文件夹中，您存储的任何内容都保存为一个大的压缩块，因此您需要分配`afd.getStartOffset(),afd.getLength()`

还。因为它将告诉您请求的源从哪里开始以及它的长度是多少，这有助于它计算该大块中的有效请求文件。

或者其他原因可能是..您引用的文件格式不正确或可能已损坏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:15:29.530

`@onsurfaceCreate` 使用以下代码播放视频，现在我认为问题有点不同，因为相同的代码适用于低分辨率视频但对于高分辨率视频它提示我错误......“

```
 holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
            mediaPlayer = MediaPlayer.create(getApplicationContext(),
 R.raw.livewallpaper);          mediaPlayer.setDisplay(new
 VideoSurfaceHolder(holder));   

    mediaPlayer.start(); 
```

# testing - 我应该如何在 ember 中进行测试？

> ID：13140388
> 
> 赞同：4
> 
> 时间：2012-10-30T13:46:39.480
> 
> 标签：testing, ember.js, jasmine

javascript 和 ember 的新手，我之前没有在这种应用程序中构建测试。到目前为止，我正在使用茉莉和诗浓。

我正在为我的 ember 应用程序的模型构建单元测试，这很简单。一旦我到达控制器，我就遇到了问题。我没有为测试应用程序定义路由器，因为我只是单元测试模型。然而，当我为控制器添加测试时，Ember.Application.registerInjection 被调用（我知道这是 Ember 与路由器的自动化过程的一部分），但由于没有定义路由器而引发错误。

如果我定义了一个最小的路由器，ember 告诉我我必须在我的应用程序上定义一个 ApplicationView 或应用程序模板。我明白那个。

如果我只是想运行单元测试，那么随着测试的积累，在浏览器中定义和呈现我的常规应用程序的所有视图似乎会非常慢。我也意识到我确实需要在某个时候测试我的观点。

所以这让我问：

我如何有效地运行不依赖于视图层的单元测试？

涉及视图时如何进行集成测试？

我正在阅读“无头”测试，但不太了解如何去做，或者我应该使用什么。如果可能的话，我想坚持使用茉莉花。

一般方法，具体提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:32:08.760

我的方法是对模型进行单元测试，然后对其余部分进行集成测试。一般来说，对模型以外的任何东西进行单元测试变得很困难，因为有很多交互。最后，您想测试整个应用程序的行为，所以我对集成测试方法没意见。

# javascript - 升级到 1.3.5 后 JsTestDriver 测试中断

> ID：13140391
> 
> 赞同：4
> 
> 时间：2012-10-30T13:46:43.683
> 
> 标签：javascript, js-test-driver

从 1.3.4 升级到版本 1.3.5 后，引用未定义的变量会导致测试失败。任何建议如何禁用此行为？我认为它与 js 严格模式有关，它默认启用此功能，但无法找到禁用它的方法

JsTestDriver.conf 文件的一部分：

```
load:
  - program.js
  - dialog.js 
```

程序.js：

```
Program = {}; 
```

对话框.js：

```
Program.Dialog = {}; 
```

错误信息：ReferenceError: Program is not defined

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:05:49.297

您现在可能正在使用不同的浏览器进行捕获（或不同的浏览器设置，如在 IE 或严格模式下打开的控制台），现在抛出不同的异常，或者您的代码库可能从那时起发生了变化。

JsTestDriver 没有改变 1.3.5 的已定义/未定义变量处理的行为，因为它只是捕获浏览器的异常。

无论如何，jsTestDriver 不会导致测试**失败**，但会在引用未定义的变量时导致测试**错误。**

例如，对于代码库中的这段代码（假设`undef`是一个未定义的变量）：

```
if(undef) alert("foo"); 
```

*从命令行*运行测试时的 jsTestdriver 输出为：

```
Total 2 tests (Passed: 1; Fails: 0; Errors: 1) (1,00 ms)
  Chrome 23.0.1271.64 Windows: Run 2 tests (Passed: 1; Fails: 0; Errors 1) (1,00 ms)
    PersonTest.testWhoAreYou error (0,00 ms): ReferenceError: undef is not defined 
```

如您所见，测试套件中有 1 个错误，但有**0 个失败**。

**编辑**：对于您的情况，jsTestDriver 可能会在您的名称空间定义周围添加一个闭包。尝试这个

代替：

```
var Program = {}; 
```

利用：

```
window.Program = {}; 
```

因为`Program.Dialog`你不应该改变任何东西

请尝试以了解是否是原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-18T11:41:56.590

最佳实践是定义您自己的 undefined ( `jstestdriver.util.undefine;`)，或使用`void 0`.

# iphone - 当应用程序在 iOS 中的单独线程中处于活动状态时，定期从服务器轮询数据的最佳方法是什么？

> ID：13140392
> 
> 赞同：12
> 
> 时间：2012-10-30T13:46:43.263
> 
> 标签：iphone, ios, nsrunloop

我需要在我的 iOS 应用程序中定期从服务器轮询数据。我需要在线程中每 10 秒执行一次，以保持 UI 可用。用户登录时会触发此功能。我正在考虑使用`NSRunLoop`with`NSTimer`来实现此功能，并且可能用于`AFNetworking`获取 JSON 数据。

这是正确的方法吗？这应该使用 GCD 来完成吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-30T14:35:46.447

可能唯一必须在主线程之外完成的部分是请求本身。确定您需要一个请求并形成该请求可以在没有任何花哨的东西的情况下完成......

同意 H2CO3 的观点，轮询可能会成为你的服务器在野外有太多客户端的问题，但也同意你的观点，在所有情况下都不一定是错误。

设置定时器...

```
[NSTimer scheduledTimerWithTimeInterval:10.0
                                 target:self
                               selector:@selector(timerFired:)
                               userInfo:nil
                                repeats:YES]; 
```

运行请求...

```
- (void)timerFired:(NSTimer *)timer {

    NSURLRequest *request = // setup your request
    [NSURLConnection sendAsynchronousRequest:request 
                                       queue:[NSOperationQueue mainQueue]
                           completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    if (!error) {
       // change my model in an observable way, or
       // if we're in a vc, change my model and update the UI

       // if we want to stop polling, [timer invalidate];
    }
}]; 
```

NSTimer 定期触发。发生火灾时，一个方法（在主线程上）决定是否需要轮询（在您描述的情况下，如果在 10 秒内调用它，则始终为“是”）。形成请求， NSURLConnection sendAsynchronousRequest: 将请求的慢速部分移出主请求。当请求完成时， sendAsynch 上的块会在 main 上运行。

诀窍是需要设置应用程序的其他部分以观察模型的变化并更新视图。这可能就像在 sendAsynch 块中重新加载表一样简单，或者更复杂，例如设置将在模型更改时触发的 KVO。

# log4j - weblogic中具有多个log4j.xml的多个应用程序

> ID：13140393
> 
> 赞同：3
> 
> 时间：2012-10-30T13:46:46.820
> 
> 标签：log4j, weblogic

我在 Weblogic-Server 的一个域中部署多个应用程序 (ear)。每个应用程序都使用 log4j。我的愿望是用自己的 log4j.xml 配置每个应用程序。这可能吗？log4j.xml 应该在耳朵之外，这样我就可以在不重建耳朵的情况下对其进行编辑。

我习惯将 log4j.xml 放在 serverclasspath 中，然后在服务器启动时读取它。但是我没有可能为每个应用程序使用不同的 log4j.xml。

我认为这是一个类路径问题，因为 log4j 在类路径中搜索 log4j.xml。但我不知道，如何为不同的应用程序使用不同的类路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:03:02.320

我认为不可能为部署在同一 WebLogic 服务器上的不同应用程序提供不同的 log4j.xml 文件，除非 log4j.xml 文件与 ear 本身打包在一起。

那么，您是否可以为不同的应用程序使用不同的记录器？这样，不同的应用程序可以使用相同的 log4j.xml，但应用程序使用的记录器定义可能不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:01:57.120

嗯，当然可以，如果您自己从不同的文件（例如log4j-app1.xml和log4j-app2.xml）配置log4j。您可以为每个应用程序配置一个 servlet。请参阅[我制作的其他帖子](https://stackoverflow.com/a/13274643/365237)中的详细信息。

但是，我也建议将它们全部放在一个文件中，就像这里已经提出的那样。

# objective-c - uiscreen 亮度超过最大值

> ID：13140395
> 
> 赞同：0
> 
> 时间：2012-10-30T13:46:53.023
> 
> 标签：objective-c, ios, brightness, uiscreen

我知道可以通过代码更改 iphone 屏幕的亮度

```
[[UIScreen mainScreen] setBrightness:1.0]; 
```

但我想知道是否有可能超越 iPhone 中设置的最大亮度级别，并使屏幕更亮？

我正在考虑一个将屏幕用作某种光源的应用程序，但在上下文中我认为最大亮度是不够的。（iphone显然应该连接到电源，否则电池会在一小时内没电）

那么，这是否可能（我认为不可能，因为最大浮动为 1.0）并且苹果是否接受超出其自身设置的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:19:44.377

不能将亮度设置为高于 1.0。它将被剪裁为 1.0。当您尝试将其设置为更高的值并随后像这样读出时，您可以轻松地发现这一点：

```
[[UIScreen mainScreen] setBrightness:2.0];
NSLog(@"Brightness: %f",[UIScreen mainScreen].brightness); 
```

它将打印出：亮度：1.000000

# ios - 滚动表视图时禁用 TableViewCell 背景颜色

> ID：13140396
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:46:53.243
> 
> 标签：ios, uitableview, uibackgroundcolor

在我的应用程序中，我有一个 tableView，当它被选中时我更改了单元格的背景颜色，我将代码编写为

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.backgroundColor = [UIColor whiteColor];
} 
```

问题是当我滚动tableView时，单元格的背景颜色被禁用，白色不可见意味着背景颜色效果被移除。表格视图在滚动时重用了单元格，因此删除了单元格背景效果。我知道问题出在哪里，但我不知道如何处理这个问题并将所选单元格的背景颜色保持为白色，即使表格视图滚动也是如此。请告诉我这个问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:51:58.680

更改所选行背景的最佳方法是更改`selectedBackgorundView`​​创建单元格的时间。这样，你就不需要处理`didSelectRowAtIndexPath:`

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"myCellId";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        UIView *v = [[UIView alloc] init];
        v.backgroundColor = [UIColor whiteColor];
        cell.selectedBackgroundView = v; // Set a white selected background view. 
    }
    // Set up the cell...
    cell.textLabel.text = @"foo";
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:55:52.830

这是行不通的，因为单元格会被重复使用。因此，当单元格被重用时，您的 backgroundColor 可能会立即被覆盖。

您应该使用单元格背景视图。正如 Pulkit 已经写的那样。

# asp.net - 我在哪里可以找到 Web 服务器上缓存的 asp.net 页面？

> ID：13140399
> 
> 赞同：1
> 
> 时间：2012-10-30T13:47:04.460
> 
> 标签：asp.net, caching, iis

我添加`<%@ OutputCache Location="server" VaryByParam="*"%>`指令 asp.net 页面。Web 应用程序通过 Visual Studio Development Server、IIS Express 和 IIS 7.5 部署在本地计算机上。我在哪里可以找到机器上的缓存文件来验证是否生成不同版本的缓存页面取决于各种查询字符串组合？

谢谢，雅各布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:55:49.417

> 默认情况下，输出缓存将 ASP.NET 页面和用户控件的呈现标记存储在 Web 服务器的内存中。... 使用 ASP.NET 4，可以创建一个自定义输出缓存提供程序，将渲染的输出存储到其他地方 - 到磁盘、到云、到分布式缓存架构等。

样本 ：

```
public override void Set(string key, object entry, DateTime utcExpiry)
{
   var item = new DiskOutputCacheItem(this.GetSafeFileName(key), utcExpiry);

   WriteCacheData(item, entry);

   // Add item to CacheItems, if needed, or update the existing key, if it already exists
   lock (_lockObject)
   {
      if (this.CacheItems.ContainsKey(key))
         this.CacheItems[key] = item;
      else
         this.CacheItems.Add(key, item);
   }
} 
```

[http://www.4guysfromrolla.com/articles/061610-1.aspx](http://www.4guysfromrolla.com/articles/061610-1.aspx)

[http://www.codeguru.com/csharp/.net/net_asp/article.php/c19835/Creating-a-Custom-Output-Cache-Provider-in-ASPNET-4.htm](http://www.codeguru.com/csharp/.net/net_asp/article.php/c19835/Creating-a-Custom-Output-Cache-Provider-in-ASPNET-4.htm)

# mysql - SQL 插入不存在的值

> ID：13140401
> 
> 赞同：1
> 
> 时间：2012-10-30T13:47:12.600
> 
> 标签：mysql, sql

我正在尝试执行以下查询

```
INSERT INTO test (trans_id, voucher_id, trans_date, ledger_code_1,
                  company_code,trans_type, trans_amount) 
VALUES (1, 1,'2012/04/01','2001', '8523a95b-5425-46be-89ed-ebd592846845',
        'Payment', -30)   
WHERE NOT EXISTS(SELECT trans_id, ledger_code_1 
                 FROM test 
                 WHERE trans_id = 1 AND ledger_code_1 = '2001') 
```

它给出的错误。我哪里错了？

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以**在不存在的地方附近使用正确的语法（从 test where **trans_id = 1 and' 在第 1 行选择 trans_id，ledger_code_1**

还有其他解决方案吗？我有主键作为自动编号..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T13:50:28.187

请参阅[插入...选择语法](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)：

```
INSERT INTO test         
(trans_id,voucher_id,trans_date,ledger_code_1,company_code,trans_type, Trans_amount)
SELECT 1, 1,'2012/04/01','2001', '8523a95b-5425-46be-89ed-ebd592846845', 'Payment', -30 
from test
where not exists(
    select 1
    from test 
    where trans_id = 1             
        and ledger_code_1 = '2001'
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:04:14.500

您可能会考虑另一种方法。

从您的代码中可以看出，您正试图避免存在具有相同 trans_id 和 ledger_code_1 值的两条语句。如果这是对您的问题的正确陈述，则应使用 UNIQUE 索引保护这两个列（或在适当的情况下考虑将它们设为表的主键）。

如果这样做，您可以发出 INSERT 语句，而不必担心避免重复插入的逻辑。如果记录已经存在，您将不得不捕获异常。

这种方法的优点是*保证*您永远不会违反这两个列的数据完整性，即使您将来编写额外的 SQL 并忘记包含条件，或者如果您直接修改表中的数据。

缺点（除了必须捕获异常之外）是它仅在您 100%、从不、永远想要允许这些重复记录时才有效。如果您偶尔会这样做（例如，trans_id 1 是真的，但 trans_id 999 不是），那么您将无法在应用程序代码中应用完整性检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:54:26.293

```
 INSERT INTO test         
  (trans_id,voucher_id,trans_date,ledger_code_1,company_code,trans_type, Trans_amount)
   SELECT 1, 1,'2012/04/01','2001', '8523a95b-5425-46be-89ed-ebd592846845',
  'Payment', -30 
   where not exists(
   select trans_id=1,ledger_code_1='2001'     
      ) 
```

# jprofiler - jprofile问题websphere v6

> ID：13140402
> 
> 赞同：2
> 
> 时间：2012-10-30T13:47:15.020
> 
> 标签：jprofiler

我正在尝试将 Jprofile 与在 Linux 上运行的 WAS v6 一起使用，遵循 Jprofile 中的设置步骤，将代理 jar 复制到 linux 框，设置 jvm 参数和 LD_LIBRARY_PATH。但是当我尝试启动服务器时看到这个错误：

JVMCI158：无法加载“libjprofiler.so”，因为 libjprofiler.so：无法打开共享对象文件：没有这样的文件或目录 JVMCI098：xmloadJVMHelperLib jprofiler port=8849，失败

提前感谢您的帮助。

# spring-mvc - 嵌套平铺定义不起作用

> ID：13140404
> 
> 赞同：2
> 
> 时间：2012-10-30T13:47:29.390
> 
> 标签：spring-mvc, tiles2

我是瓷砖新手，只是希望让它们在以下范围 base.jsp 中工作

```
...<body id="pageBody">
<div id="container">
      <tiles:insertAttribute name="intro"/>
      <tiles:insertAttribute name="supportingText"/>
      <tiles:insertAttribute name="menu"/>
</div> 
```

...

intro.jsp 在哪里

```
 <div id="intro">
  <tiles:insertAttribute name="header" />
  <tiles:insertAttribute name="quickSummary" />
  <tiles:insertAttribute name="preamble" />
</div> 
```

所以简单来说，我希望有一个名为 intro 的 tile 定义，它将在名为 base.jsp 的 tile 定义中使用

在我的 tiles-defs.xml 我有：

```
<tiles-definitions>

<definition name="base" template="/WEB-INF/tiles/base.jsp">
    <put-attribute name="title" value="Template"/>
    <put-attribute name="content" value="/WEB-INF/tiles/header.jsp"/>
    <put-attribute name="footer" value="/WEB-INF/tiles/footer.jsp"/>
    <put-attribute name="intro" value="intro"/>
    <put-attribute name="menu" value="/WEB-INF/tiles/menu.jsp"/>
    <put-attribute name="resources" value="/WEB-INF/tiles/resources.jsp"/>
    <put-attribute name="supportingText" value="/WEB-INF/tiles/supportingText.jsp"/>
</definition>

<definition name="intro" template="/WEB-INF/tiles/intro.jsp">
    <put-attribute name="header" value="/WEB-INF/tiles/header.jsp"/>
    <put-attribute name="quickSummary" value="/WEB-INF/tiles/quickSummary.jsp"/>
    <put-attribute name="preamble" value="/WEB-INF/tiles/preamble.jsp"/>
</definition> 
```

所以我希望这会起作用，并且 header.jsp、quickSummary.jsp、preamble.jsp 的内容将在呈现的页面中可用。

相反，我得到了最终结果：

...`</head> <body id="pageBody"> <div id="container"> <div id="intro"> <tiles:insertAttribute name="header" /> <tiles:insertAttribute name="quickSummary" /> <tiles:insertAttribute name="preamble" /> </div> <div id="supportingText"> <tiles:insertAttribute name="content"/> <tiles:insertAttribute name="footer"/> </div> <div id="linkList"> <div id="linkList2">...`

在我的弹簧配置中，我有：

```
 <bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" p:definitions="/WEB-INF/tiles-defs/tiles-defs.xml" />
<bean id="tilesViewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver" p:basename="views" /> 
```

如果我想做的事情是可行的（听起来很常见，所以我猜是这样），如果是的话，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:37:17.850

添加`cascade="true"`到`put-attributes`cascade`header`和`quickSummary`嵌套`preamble`图块。

另请参阅[有关嵌套定义的文档](http://tiles.apache.org/framework/tutorial/advanced/nesting-extending.html)。

# android - 如何使用 Intellij 重新生成 android 资源文件 (R.java)

> ID：13140425
> 
> 赞同：3
> 
> 时间：2012-10-30T13:48:37.463
> 
> 标签：android, intellij-idea, r.java-file

我需要重新生成资源文件，我做了这些步骤，但它无济于事。

1.  右键单击项目
2.  点击强制重新生成 R.java 文件

清理项目是 eclipse 上的一个解决方案，但我刚刚开始在 intellij 上开发一个项目，但没有找到任何解决方案。任何人都知道如何在 intellij 上重新生成源文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:58:45.173

Intellij 版本的“clean”被称为“Rebuild Project”。它在构建菜单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T20:54:13.130

有两件事有效。

*   转到 gen/ 并删除 R.java
*   转到 gen/R.java 并更正包名称。检查 gen/ 中的其他文件。

在 IntelliJ 中，“Rebuild Project”功能与 Eclipse 的“clean project”不同。

toadsky 接受的答案（重建项目）在所有情况下都不正确。

重建项目不一定会重新生成 R.java 资源。在 IntelliJ 中重命名包后，我直接观察到了这一点。在搜索了我的所有资源并看到所有文件都有新的包名称后，我只有 R 错误。重建并没有解决它，然后我注意到生成的文件没有被重写并且具有旧的包名称。快速的解决方案是在生成的文件中重命名包，错误就消失了。

更改任何 xml 文件或清单文件，并没有像我读过的那样触发重新生成。

当我遇到这个问题并查看 gen/R.java 文件时，我发现它有一个已经过时的资源列表。但是，更正此过期文件上的包名称会立即修复 R 错误。

当我删除包含过时 R 列表和旧包名称的 R.java 时，它也解决了问题。IntelliJ 立即生成了一个新的 R.java 文件，其中不包含任何资源，并且没有 R 错误。

# .net - 使用 C++ 中的托管代码在控制台应用程序中接受参数

> ID：13140426
> 
> 赞同：0
> 
> 时间：2012-10-30T13:48:42.213
> 
> 标签：.net, c++-cli

我试图使用此代码来接受来自控制台应用程序的参数。不幸的是，出于某种奇怪的原因，我得到的只是布尔值。我不确定发生了什么。我想我可能会混合命名空间或其他东西。任何人？

```
#include "stdafx.h"

using namespace System;
using namespace System::Net;
using namespace System::IO;
using namespace System::Collections;
using namespace System::Text;

void uploadFile(String^ strFileName, String^ strServerName, String^ strUserName, String^         strPassword);
void prompt();

int main(int argc, char* argv[])
{
if (argc < 9)
{
    prompt();
}
else if (argc == 9)
{
    char* fileName;
    char* serverName;
    char* userName;
    char* password;

    for (int i = 1; i < argc; i++)
    {
        if (argv[i] == "-f")
            fileName = argv[i + 1];
        else if (argv[i] == "-s")
            serverName = argv[i + 1];
        else if (argv[i] == "-u")
            userName = argv[i + 1];
        else if (argv[i] = "-p")
            password = argv[i + 1];
        else
            prompt();
        Console::WriteLine(argv[i]);
    }
    String ^strFileName = gcnew String(fileName);
    String ^strServerName = gcnew String(serverName);
    String ^strUserName = gcnew String(userName);
    String ^strPassword = gcnew String(password);
    Console::WriteLine(argv[1]);
    Console::WriteLine(strFileName);
    uploadFile(strFileName, strServerName, strUserName, strPassword);
}
else
{
    prompt();
}
}

void uploadFile(String^ strFileName, String^ strServerName, String^ strUserName, String^ strPassword)
{
if (!strServerName->StartsWith("ftp://"))
{
    String^ host = "ftp://";
    host += strServerName;
    strServerName = host;
}
String^ path = Directory::GetCurrentDirectory();
WebClient^ wclient = gcnew WebClient();
wclient->Credentials = gcnew NetworkCredential(strUserName, strPassword);
String^ destFileName = path;
destFileName += strFileName;
Console::WriteLine(destFileName);
Console::WriteLine(strServerName);
/*array<Byte>^response = wclient->UploadFile(strServerName, destFileName);
if (response->Length > 0)
{
    ASCIIEncoding^ ascii = gcnew ASCIIEncoding;
    String^ decoded = ascii->GetString(response);
    Console::WriteLine("Response: {0}", decoded);
}*/
}
void prompt()
{
Console::WriteLine("Usage: ftpCLI.exe -f <filename> -s <server> -u <username> -p    <password>\n");
Console::ReadLine();
Environment::Exit(1);
} 
```

对于任何对此感兴趣的人来说，该计划已实施并完成了该决议。

```
#include "stdafx.h"
#include <string.h>

using namespace System;
using namespace System::Net;
using namespace System::IO;
using namespace System::Collections;
using namespace System::Text;

void uploadFile(String^ strFileName, String^ strServerName, String^ strUserName, String^     strPassword);
void prompt();

int main(int argc, char* argv[])
{
if (argc < 9)
{
    prompt();
}
else if (argc == 9)
{
    char* fileName;
    char* serverName;
    char* userName;
    char* password;

    for (int i = 1; i < argc; i++)
    {
        if (strcmp(argv[i], "-f") == 0)
            fileName = argv[i + 1];
        else if (strcmp(argv[i], "-s") == 0)
            serverName = argv[i + 1];
        else if (strcmp(argv[i], "-u") == 0)
            userName = argv[i + 1];
        else if (strcmp(argv[i], "-p") == 0)
            password = argv[i + 1];
        Console::WriteLine(argv[i]);
    }
    String ^strFileName = gcnew String(fileName);
    String ^strServerName = gcnew String(serverName);
    String ^strUserName = gcnew String(userName);
    String ^strPassword = gcnew String(password);
    Console::WriteLine(argv[1]);
    uploadFile(strFileName, strServerName, strUserName, strPassword);
}
else
{
    prompt();
}
}

void uploadFile(String^ strFileName, String^ strServerName, String^ strUserName, String^ strPassword)
{
if (!strServerName->StartsWith("ftp://"))
{
    String^ host = "ftp://";
    host += strServerName;
    strServerName = host;
}
String^ path = Directory::GetCurrentDirectory();
WebClient^ wclient = gcnew WebClient();
wclient->Credentials = gcnew NetworkCredential(strUserName, strPassword);
String^ destFileName = strServerName;
destFileName += "/" + strFileName;
array<Byte>^response = wclient->UploadFile(destFileName, strFileName);
if (response->Length > 0)
{
    ASCIIEncoding^ ascii = gcnew ASCIIEncoding;
    String^ decoded = ascii->GetString(response);
    Console::WriteLine("Response: {0}", decoded);
}
}
void prompt()
{
Console::WriteLine("Usage: ftpCLI.exe -f <filename> -s <server> -u <username> -p   <password>\n");
Console::ReadLine();
Environment::Exit(1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:54:26.487

在 CLR 控制台中，您的主要内容应该是：

```
int main(array<System::String ^> ^args) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:57:31.507

这个循环很麻烦：

```
for (int i = 1; i < argc; i++)
{
    if (argv[i] == "-f")
        fileName = argv[i + 1];
    else if (argv[i] == "-s")
        serverName = argv[i + 1];
    else if (argv[i] == "-u")
        userName = argv[i + 1];
    else if (argv[i] = "-p")
        password = argv[i + 1];
    else
        prompt();
    Console::WriteLine(argv[i]);
} 
```

可以说第一个参数是`-f`紧随其后的文件名。第一次运行循环，您将获得`-f`并提取文件名。但是，下一次迭代`argv[i]`将是您在第一次迭代中提取的文件名。

当您获得带有参数的参数（如`-f`）时，您需要增加`i`一次额外的时间。

**编辑：**正如heavd 所指出的，您遇到的实际问题可能是字符串的比较。您不能对原始 C 样式字符串使用相等运算符，您必须使用 eg [`strcmp`](http://en.cppreference.com/w/c/string/byte/strcmp)。

像这样：

```
if (strcmp(argv[i], "-f") == 0) { ... } 
```

# android - 以颜色（从红色到绿色）表示百分比值 (0-100)

> ID：13140429
> 
> 赞同：4
> 
> 时间：2012-10-30T13:48:45.397
> 
> 标签：android, colors

我有一个动态更新百分比（0 到 100 之间）的 Android 应用程序。该应用程序有两种特定颜色 - 浅红色 (#BD4141) 和浅绿色 (#719D98)。

我希望一个元素在给定百分比为 0 时具有浅红色背景，在给定百分比为 100 时具有浅绿色背景。中间百分比应该代表这两种颜色之间的柔和过渡颜色表示。

或者，我希望它从纯红色变为纯绿色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:27:58.667

*这段代码没有优化，但它做了它应该做的事情。*

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.screen_main);

        final SeekBar sb = (SeekBar) findViewById(R.id.seekBar);
        sb.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

            @Override
            public void onStopTrackingTouch(final SeekBar seekBar) {
            }

            @Override
            public void onStartTrackingTouch(final SeekBar seekBar) {
            }

            @Override
            public void onProgressChanged(final SeekBar seekBar,
                    final int progress, final boolean fromUser) {
                update(seekBar);
            }
        });
        update(sb);
    }

    private void update(final SeekBar sb) {
        final RelativeLayout layout = (RelativeLayout) findViewById(R.id.layout);

        final int colorStart = Color.parseColor("#BD4141");
        final int colorEnd = Color.parseColor("#719D98");

        layout.setBackgroundColor(interpolateColor(colorStart, colorEnd,
                sb.getProgress() / 100f)); // assuming SeekBar max is 100
    }

    private float interpolate(final float a, final float b,
            final float proportion) {
        return (a + ((b - a) * proportion));
    }

    private int interpolateColor(final int a, final int b,
            final float proportion) {
        final float[] hsva = new float[3];
        final float[] hsvb = new float[3];
        Color.colorToHSV(a, hsva);
        Color.colorToHSV(b, hsvb);
        for (int i = 0; i < 3; i++) {
            hsvb[i] = interpolate(hsva[i], hsvb[i], proportion);
        }
        return Color.HSVToColor(hsvb);
    }

} 
```

该答案基于[两种颜色之间的android颜色的问题和答案，基于百分比？](https://stackoverflow.com/questions/4414673/android-color-between-two-colors-based-on-percentage).

# wpf - TextOptions.TextFormattingMode 影响具有粗体字重的文本

> ID：13140431
> 
> 赞同：4
> 
> 时间：2012-10-30T13:48:49.887
> 
> 标签：wpf, xaml, c#-4.0

[我遇到了一个问题](https://stackoverflow.com/questions/13088971/setting-fontweight-to-bold-shrinks-text-size/13123422#13123422)，使某些文本粗体的字体粗细使其小于普通字体加权文本。我发现这是因为我将 TextFormattingMode 设置为“Display”；如果 TextFormattingMode 设置为“理想”，则不会出现此问题。

例如，下面的代码：

```
 <Label FontFamily="Calibri" FontSize="12" FontWeight="Bold" Content="This is some test text" TextOptions.TextFormattingMode="Ideal"/>
 <Label FontFamily="Calibri" FontSize="12" Content="This is some test text" TextOptions.TextFormattingMode="Ideal"/>
 <Label></Label>
 <Label FontFamily="Calibri" FontSize="12" FontWeight="Bold" Content="This is some test text" TextOptions.TextFormattingMode="Display"/>
 <Label FontFamily="Calibri" FontSize="12" Content="This is some test text" TextOptions.TextFormattingMode="Display"/> 
```

产生以下内容：

![XAML 运行时的结果](../Images/535c5ff704b877fbb27a8870da37fe78.png)

如果我将最后两个标签的字体大小提高到 14 左右，则粗体文本会比正常的加权文本大。

我的问题是：我可以使用一个设置来设置 12 点粗体文本，并将 TextFormattingMode 设置为“显示”，它的大小与正常加权文本相同/略大？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T21:15:27.820

问题不在于粗体文本太短，而在于普通文本太长。

这背后有历史，WPF 最初在 .NET 3.0 中发布，仅支持缩放文本的“理想”模式。此模式支持真正分辨率无关的文本缩放，在具有不同每英寸点数分辨率的各种显示设备上，一行文本将具有可预测的英寸长度。这没有得到很好的接受，它引起了 WPF 程序员的大量抱怨，他们不喜欢这样产生的模糊文本。这在您的屏幕截图中可见。请注意粗体字母 m 的左词干在理想模式下太胖，但在显示模式下却不是。

在 .NET 4.0 中，WPF 团队支持一种新的文本呈现方式，称为“显示”。它以 GDI 的方式呈现文本，应用字体提示规则来调整字母形状，使其与显示器的像素网格更好地重合。这往往会拉伸字母，尤其是当它们的词干只有一个像素时。点大小越小，这种情况就越明显。文本因此具有很高的可读性，但会丢失真正的分辨率无关渲染。

Winforms 也经历了类似的演变，从 Graphics.DrawString() 到 TextRenderer.DrawText()。

WPF 团队的这篇[博客文章有详细信息。](http://blogs.msdn.com/b/text/archive/2009/08/24/wpf-4-0-text-stack-improvements.aspx)

因此，您的问题的答案是否定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:50:58.543

不幸的是，您已经回答了您的问题。答案是不。我不确定为什么会这样。我看着它并在 SNOOP 中将其拉起，果然它变得更小了。

似乎 10.5 和 12.4 之间的所有字体设置都有这个问题。字体 8、9 或 10、10.4 和 12.5、13、14 没有。

听起来是时候联系微软了。提交一个错误。

此外，这与您的 Windows 显示设置有关。当我将显示设置从 100% 切换到 125% 时，问题发生了变化。现在它们看起来都差不多大小，而不是更小。

# android - 直播不可用时如何显示提示信息？

> ID：13140435
> 
> 赞同：1
> 
> 时间：2012-10-30T13:49:02.380
> 
> 标签：android, stream, message, alert

我开发了直播应用程序，但有时直播不可用 我想在不可用时显示错误或警报消息 我该怎么做？

这是我的创建功能：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);        
        if(getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE){           
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        }
        setContentView(R.layout.activity_shada);
        videoView = (VideoView) findViewById(R.id.myVideoView);                
        videoView.setVideoURI(Uri.parse(httpLiveUrl));       
        videoView.requestFocus();
        videoView.start();
        pro = ProgressDialog.show(this, "", "Loading....");
        videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                // TODO Auto-generated method stub
                pro.dismiss();                  
            }
        });               
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:57:47.013

[setOnErrorListener](http://developer.android.com/reference/android/widget/VideoView.html#setOnErrorListener%28android.media.MediaPlayer.OnErrorListener%29)呢？

# wordpress - 迁移 Wordpress，包括小部件和媒体文件

> ID：13140437
> 
> 赞同：0
> 
> 时间：2012-10-30T13:49:08.353
> 
> 标签：wordpress, migration

我在 localhost 上创建了一个 wordpress 网站，并希望将其迁移到客户端服务器。我如何转换内容、图像（媒体）和主题及其小部件。

希望我不必重新在网站上重新创建所有内容：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:53:59.790

1.  查看有关此问题的[Wordpress Codex](http://codex.wordpress.org/Moving_WordPress)以获取详细信息和可以帮助您的各种[工具。](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)
2.  确保您的主题和小部件没有直接引用旧域。如果这是您自己制作的主题/插件/小部件，您应该知道 Wordpress 具有引用您的 Wordpress 安装 URL 的[各种功能。](http://codex.wordpress.org/Function_Reference/site_url)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T17:17:50.977

你需要做几件事：

1.  安装 WP Migrate DB [http://wordpress.org/extend/plugins/wp-migrate-db/](http://wordpress.org/extend/plugins/wp-migrate-db/)并使用它将数据库导出为 gzip 文件
2.  将所有 Wordpress 文件上传到服务器，修改 wp-config.php 以匹配客户端的 MySql 服务器。如果已安装 WP，则仅上传 wp-content 中的内容
3.  访问客户端的 MySql 服务器（通常通过 phpMyAdmin）并导入包含您的数据库的 gzip 文件

要获取客户端服务器上的服务器路径（WP Migrate DB 会要求它），请使用站点 / 中的这个 php 片段：

```
<?php print_r(__DIR__) ?> 
```

应该是这样的。

干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T19:23:31.063

BackupBuddy 可能是最有效和最简单的方法。这是网址：[BackupBuddy](http://ithemes.com/purchase/backupbuddy/)

大量的文档和插件基本上可以为您完成一切。

# php - 在 PHP 中实现二维码 X 维

> ID：13140440
> 
> 赞同：0
> 
> 时间：2012-10-30T13:49:17.943
> 
> 标签：php, qr-code

我们使用调酒师打印二维码： [http ://www.seagullscientific.com/aspx/free-bar-code-label-printing-software-download.aspx](http://www.seagullscientific.com/aspx/free-bar-code-label-printing-software-download.aspx)

在 BarTender 中，我们可以指定 QR 码的 x 维度

![二维码二维码](../Images/33add27a31c790f25f211ff176b7b0d6.png)

我正在使用以下库来生成 QR 码。 [http://www.shayanderson.com/php/php-qr-code-generator-class.htm](http://www.shayanderson.com/php/php-qr-code-generator-class.htm)

但它使用谷歌图表生成二维码，我无法在谷歌图表中找到 x 维度的选项。

所以现在我想在 PHP 中实现这个 x 维功能。

如果有任何可用的开源解决方案或是否有任何付费解决方案，请指导我。

**[编辑]** 请考虑以下数据作为样本生成二维码。

123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789 123456789123456789123456789

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T09:34:42.190

我写了一个[开源 QR 生成器](https://github.com/edent/QR-Generator-PHP)。您可以准确指定您希望图像的像素宽度。

所以，你会写

`qr.php?d=YourCode&e=Q&t=J&size=500`

对于包含“YourCode”的 500x500px 代码。

那是你要找的吗？

# java - 如何操作树语法

> ID：13140443
> 
> 赞同：1
> 
> 时间：2012-10-30T13:49:23.490
> 
> 标签：java, dsl, antlr3, parser-generator, antlrworks

*****解析器语法协议*****.g**** 

 ***```
grammar protocol; 

options {
  language = Java;
  output = AST;
  ASTLabelType=CommonTree;
}

tokens{ 
TRANSITIONS;
PAIR;
}

@header {
package com.javadude.antlr3.x.tutorial;
}

@lexer::header {
  package com.javadude.antlr3.x.tutorial;
}

parse
 : transitions EOF!
   {
     CommonTree root = $transitions.tree;

     int count = root.getChildCount();

     Tree child1 = root.getChild(0);
     Tree child2 = root.getChild(1);
     Tree child3 = root.getChild(2);
     Tree child4 = root.getChild(3);

     System.out.println("root=" + root.getToken().getText() + " has " + count + " child nodes:");
     System.out.println(" - child1=" + child1.toStringTree());
     System.out.println(" - child2=" + child2.toStringTree());
     System.out.println(" - child3=" + child3.toStringTree());
     System.out.println(" - child4=" + child4.toStringTree());
   }
 ;
transitions
 : 'transitions' '=' INT pair+ ';' -> ^(TRANSITIONS INT pair+)
 ;
pair
 : '(' INT ',' INT ')' -> ^(PAIR INT INT)
 ;

INT 
    : ('0'..'9')+;
WHITESPACE
    : ('\t' | ' ' | '\r' | '\n' | '\u000C')+ {$channel = HIDDEN;}; 
```

*****树语法协议*****Walker.g**** 

 ***```
tree grammar protocolWalker;

options {
  language = Java;
  tokenVocab = protocol;   
  ASTLabelType = CommonTree;
}

@header {
package com.javadude.antlr3.x.tutorial;
}

transitions
 : ^(TRANSITIONS INT pair+) 
 {
 System.out.println("transitions=" + $INT.text);
 }
 ;

pair
 : ^(PAIR a=INT b=INT) 
 {
 System.out.println("pair=" + $a.text + ", " + $b.text);

 }
 ; 
```

**JAVA TEST RIG**
***协议test.java***

```
package com.javadude.antlr3.x.tutorial;
import org.antlr.runtime.*;
import org.antlr.runtime.tree.CommonTree;
import org.antlr.runtime.tree.CommonTreeNodeStream;
public class Protocoltest {

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception {
        //create input stream from standard input
        ANTLRInputStream input = new ANTLRInputStream(System.in);
        //create a lexer attached to that input stream
        protocolLexer lexer = new protocolLexer(input);
        //create a stream of tokens pulled from the lexer
        CommonTokenStream tokens = new CommonTokenStream(lexer);

        //create a parser attached to teh token stream
        protocolParser parser = new protocolParser(tokens);
        //invoke the program rule in get return value
        protocolParser.parse_return r =parser.parse();

        CommonTree t = (CommonTree)r.getTree();
        //output the extracted tree to the console
        System.out.println("\nAST is: " + t.toStringTree());

        //walk resulting tree; create treenode stream first
        CommonTreeNodeStream nodes = new CommonTreeNodeStream(t);
        //AST nodes have payloads that point into token stream
        nodes.setTokenStream(tokens);

        //create a tree walker attached to the nodes stream
        protocolWalker walker = new protocolWalker(nodes);

        //invoke the start symbol, rule parse
        walker.transitions();
        }
} 
```

**输入**

```
transitions = 3(5,0) (5,1) (5,2); 
```

**输出**

```
root=TRANSITIONS has 4 child nodes:
 - child1=3
 - child2=(PAIR 5 0)
 - child3=(PAIR 5 1)
 - child4=(PAIR 5 2)

AST is: (TRANSITIONS 3 (PAIR 5 0) (PAIR 5 1) (PAIR 5 2))
pair=5, 0
pair=5, 1
pair=5, 2
transitions=3 
```

**问题**
您可以在上面看到，在解析器语法（protocol.g）中，我可以将转换根的所有孩子存储为 child1、child2、child3 和 child4。另外，我已经打印了这些。在树语法中，我如何存储这些并可以对它们执行操作？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:04:08.383

> 我将实例化 java 类（将创建 java 对象），例如，树中的第一个数字将确定将创建多少个对象，然后，PAIR 5 0 将创建一个具有 2 个参数（5,0）的对象，PAIR 5 1 将创建带有 2 个参数 (5,1) 的第二个对象，PAIR 5 2 将创建带有 2 个参数 (5,2) 的第三个对象。

这是一种创建过渡并向它们添加对的简单方法，它只需要对`protocolWalker.g`. 不过，首先，这里是我将使用的虚拟对象`Transitions`和`Pair`类：

***过渡.java***

```
import java.util.ArrayList;

public class Transitions {
    private ArrayList<Pair> pairs = new ArrayList<Pair>();

    public void addPair(Pair pair){
        System.out.println(String.format("Added pair %s to transitions", pair));
        pairs.add(pair);
    }

    @Override
    public String toString() {
        return "Pairs: " + pairs;
    }
} 
```

***对.java***

```
public class Pair {
    private int a;
    private int b;

    public Pair(int a, int b){
        this.a = a;
        this.b = b;
    }

    @Override
    public String toString() {
        return String.format("(%d, %d)", a, b);
    }
} 
```

这是修改后的`protocolWalker.g`.

***protocolWalker.g（修改）***

```
tree grammar protocolWalker;

options {
  language = Java;
  tokenVocab = protocol;   
  ASTLabelType = CommonTree;
}    

@header {
    package com.javadude.antlr3.x.tutorial;
    import java.util.List;
    import java.util.ArrayList;
}

@members { 
  //stores all the transitions objects as they get processed
  private ArrayList<Transitions> allTransitions = new ArrayList<Transitions>();

  //returns all the transitions
  public List<Transitions> getAllTransitions() { 
    return allTransitions;
  }
}

transitions
@init { 
        //create a Transitions object when the rule is hit
        Transitions transitions = new Transitions();

        //store it to be accessed later.
        allTransitions.add(transitions);
      } 
 : ^(TRANSITIONS INT transitions_pair[transitions]+) //pass the object to transitions_pair for each PAIR encountered
 {
     System.out.println("transitions=" + $INT.text);
 }
 ;

transitions_pair[Transitions transitions]
 : ^(PAIR a=INT b=INT) 
 {
     System.out.println("pair=" + $a.text + ", " + $b.text);
     //make a call to the Transitions object that was passed to this rule.
     transitions.addPair(new Pair($a.int, $b.int));
 }
 ; 
```

（我重命名为`pair`，`transitions_pair`因为该规则现在与转换构建相关联。）该规则`transitions`调用`transitions_pair`，同时传递一个新`Transitions`对象。向接收到的对象`transitions_pair`添加一个新对象。`Pair``Transitions`

可以编写树解析器和令牌解析器中的规则以使用该`[ArgType argname,...]`方式接受对象。在这种情况下，更容易访问子`PAIR`树。

我添加了一个小改动来`Protocoltest.java`打印出存储的转换：

```
 ...
        //invoke the start symbol, rule parse
        walker.transitions();

        //get the stored transitions and print them out.            
        List<Transitions> transitions = walker.getAllTransitions();
        System.out.println(transitions);
        ... 
```

这是步行者的新输出：

```
pair=5, 0
Added pair (5, 0) to transitions
pair=5, 1
Added pair (5, 1) to transitions
pair=5, 2
Added pair (5, 2) to transitions
transitions=3
[Pairs: [(5, 0), (5, 1), (5, 2)]] 
```

以下是我所做的主要更改的回顾：

*   添加了一种从 walker 存储和返回转换的方法。
*   添加了在规则中创建`Transitions`对象的代码`transitions`。
*   添加了将对象传递给`transitions_pair`.
*   在测试器中添加了代码以从 walker 中检索转换并将它们打印出来。

我想一旦你实现了自己的`Transitions`课程，你就会准备就绪。******

# gwt - GWT 编辑器和 GXT 网格不发送新创建的代理实体，只有 NULL 值

> ID：13140447
> 
> 赞同：1
> 
> 时间：2012-10-30T13:49:31.083
> 
> 标签：gwt, gxt, gwt-editors

有没有人可以解决为什么我会通过包含 ListStoreEditor 子编辑器的 GXT 网格将空值保存到服务器实体上的 OneToMany 列表？

我已经按照 Sencha 示例 GridBindingExample 进行了操作。 [http://www.sencha.com/examples/#ExamplePlace:gridbinding](http://www.sencha.com/examples/#ExamplePlace:gridbinding)

```
public class MyEditor implements IsWidget, Editor<FooProxy> {
    interface Binder extends UiBinder<Widget, MyEditor> {}
    private static Binder uiBinder = GWT.create(Binder.class);

    public interface Driver extends SimpleBeanEditorDriver<MyProxy, MyEditor> {}    
    private Driver driver = GWT.create(Driver.class);

    private ListStore<BarProxy> store;
    ListStoreEditor<BarProxy> items;

    @Ignore
    @UiField(provided = true)
    Grid<BarProxy> grid;

    @Ignore
    @UiField
    ChildEditor childEditor;

    @Override
    public Widget asWidget() {
        MyProperties props = GWT.create(MyProperties.class);
        this.store = new ListStore<BarProxy>(props.key());

        List<ColumnConfig<BarProxy, ?>> columns = new ArrayList<ColumnConfig<BarProxy, ?>>();
        columns.add(new ColumnConfig<BarProxy, String>(props.itemName(), 300, "MyColumn"));

        this.grid = new Grid<BarProxy>(store,new ColumnModel<BarProxy>(columns));
        items = new ListStoreEditor<BarProxy>(store);

        Widget widget = uiBinder.createAndBindUi(this);
        driver.initialize(childEditor);

        childEditor.getCreateButton().addSelectHandler(new SelectHandler() {
            @Override
            public void onSelect(SelectEvent event) {
                RequestContext context = factoryProvider.get().barRequest();
                BarProxy entity = context.create(BarProxy.class);

                entity.setName("Eugene Qtest");
                entity.setAge(45);

                driver.edit(entity);
                store.add(driver.flush());  
            }       
        });

        return widget;  
    }
}

public class ChildEditor implements IsWidget, Editor<BarProxy> {
    interface Binder extends UiBinder<Widget, ChildEditor> {}
    private static Binder uiBinder = GWT.create(Binder.class);

    @UiField
    TextButton createButton;

    @Override
    public Widget asWidget() {
        return uiBinder.createAndBindUi(this);
    }

    public TextButton getCreateButton() {
        return createButton;
    }
} 
```

在我的代码中的上层演示者中，我正在调用：

```
RequestContext req = editorPresenter.getDriver().flush();
req.fire(); 
```

这确实保存了 GWT 编辑器捕获的所有数据元素。在我的数据库中，它确实在上面的代码中为网格创建了行，但是所有的值都是空的，所以当 RequestContext 触发时，持久化会在网格中返回一个空行。因此，没有外键可以将 OneToMany 关系中的实体关联回其父实体。

此外，我查看了对服务器的 JSON 请求和响应，看起来实体中没有发送任何值。它可能被混淆了，但它看起来好像其他值是纯文本的，所以我认为甚至没有传递代理实体值。

任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:43:31.780

```
 driver.edit(entity);
            store.add(driver.flush()); 
```

这些行是说“在编辑器中绘制新对象--好的，取其中放入的任何值并将其添加到商店”。我不确定这是你想要的。

稍后，您引用 an `editorPresenter`，但这似乎不在您的代码中，并且不清楚何时执行该刷新（甚至是初步`edit()`调用）并触发。您还制作了`Editor<BarProxy>`, 但该类型中没有允许编辑的子编辑器。

在您链接到的示例中，混合有两种不同的驱动程序。第一个通过将整个列表传递到 ListStore 来处理整个列表 - 这实际上并不是为了示例而需要的，但它可以帮助解释您如何将其绑定到更大的案例中，例如[http:/ /www.sencha.com/examples/#ExamplePlace:listpropertybinding](http://www.sencha.com/examples/#ExamplePlace:listpropertybinding)示例。该示例实际上应该被视为两个不同的编辑器，具有两个不同的驱动程序 - 在测试时更是如此。首先确保一个工作，并在 driver.flush() 之后返回正确的值，然后另一个。

正如我开始的那样，我认为您在调用后`driver.flush()`立即`edit`调用几乎可以肯定不是您想要的，（因为驱动程序将没有任何效果），所以从那里开始会很好。然后，如果这*是*您想要的，请测试当您在服务器上收到调用时，您将获取模型对象及其所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T02:35:55.093

在上述评论中科林的帮助下，我花了几天时间才弄清楚，谢谢！

网格填充的原因，但是当您在保存时刷新主编辑器时，值消失并且在网格中插入了一个空白行，因为您必须在编辑器上实现 HasRequestContext 接口以维护相同的 RequestContext 会话。下面是我修改后的代码。

```
public class MyEditor implements IsWidget, Editor<FooProxy>, HasRequestContext<FooProxy> {
    interface Binder extends UiBinder<Widget, MyEditor> {}
    private static Binder uiBinder = GWT.create(Binder.class);

    private RequestContext ctx;    

    private ListStore<BarProxy> store;
    ListStoreEditor<BarProxy> items;

    @Ignore
    @UiField(provided = true)
    Grid<BarProxy> grid;

    @Ignore
    @UiField
    ChildEditor childEditor;

    @Override
    public Widget asWidget() {
        MyProperties props = GWT.create(MyProperties.class);
        this.store = new ListStore<BarProxy>(props.key());

        List<ColumnConfig<BarProxy, ?>> columns = new ArrayList<ColumnConfig<BarProxy, ?>>();
        columns.add(new ColumnConfig<BarProxy, String>(props.itemName(), 300, "MyColumn"));

        this.grid = new Grid<BarProxy>(store,new ColumnModel<BarProxy>(columns));
        items = new ListStoreEditor<BarProxy>(store);

        Widget widget = uiBinder.createAndBindUi(this);
        driver.initialize(childEditor);

        childEditor.getCreateButton().addSelectHandler(new SelectHandler() {
            @Override
            public void onSelect(SelectEvent event) {
                RequestContext context = ctx.barRequest();
                BarProxy entity = context.create(BarProxy.class);

                entity.setName("Eugene Qtest");
                entity.setAge(45);

                ctx.edit(entity);
                store.add(entity);  
            }       
        });

        return widget;  
    }

    @Override
    public void setRequestContext(RequestContext ctx) {
        this.ctx = ctx;     
    }
} 
```

# javascript - 可以从ajax子调用父javascript函数吗？

> ID：13140454
> 
> 赞同：0
> 
> 时间：2012-10-30T13:49:56.267
> 
> 标签：javascript, ajax

我正在使用 ajax 来刷新 div 的内容。在该 ajax 脚本中，一个名为 myTasks 的新计数在会话变量 ( `$_SESSION['myTasks']`) 中创建。

同样在该 ajax 脚本中，在将会话值重新分配给新值之前，我正在对照会话值检查新值。如果新值大于会话变量中的值，我想播放铃声 - 长度约为 2 秒。我有以下代码可以播放铃声：

```
<audio src="./sounds/newTask.wav" id="newTaskSound" preload="auto"></audio> 
```

从它开始播放声音的意义上说，这工作得很好。但是，我的 ajax 计时器设置为每秒关闭一次，因此声音在播放中途被切断（充其量）......更多时候不是，只有四分之一的铃声正在播放。

我想做的是：如果新的 myTasks 计数大于会话变量，则在主页中调用一个 javascript 函数（同一个包含 ajax 调用函数）。

我的问题是：如何让 ajax“子”调用 html“父”函数？我尝试了几件事，例如：

```
<script type='text/javascript'>window.top.playNewTask.call();</script> 
```

但我什么也做不了。

有没有办法从 ajax 孩子调用 javascript 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:04:14.377

我希望看到更多您的代码，以便更好地了解您是如何执行此操作的。

如果您使用的是 iframe，则只能在页面的 url 和 iframe 匹配的情况下调用父（顶部）窗口中的函数。

否则，没有理由使用 window.top，因为这两个函数都在同一个文档范围内。

您还可以考虑为标签设置一个删除计时器-在 2（或 2.5，为了安全）秒后`<audio>`使用并删除此音频标签。`setTimeout`然后附加新的音频标签。这应该可以防止铃声被切断，如果每次检查时整数都增加，则会给你重叠的铃声。

您还可以使用 a`setTimeout`更改变量，并防止音频标签在播放完成之前被替换。

# emacs - 想在 ELisp 中创建重复行函数

> ID：13140462
> 
> 赞同：1
> 
> 时间：2012-10-30T13:50:22.843
> 
> 标签：emacs, elisp

作为学习 ELisp 的一部分，我正在尝试制作一个在当前行下方复制当前行的函数（复制该行）。到目前为止，我所拥有的效果很好，除了缓冲区的最后一行。如果在最后一行，则该行仅粘贴在行尾而不是在其下方。

这是我的代码：

```
(defun duplicate-line ()
  "duplicate the current line"
  (interactive)
  (save-excursion
    (kill-ring-save (line-beginning-position) (line-beginning-position 2))
    (goto-char (line-beginning-position 2)) ; goto the start of the next line
    (yank)
   )
  (next-line)
) 
```

有没有更好的方法来做到这一点？我也将不胜感激有关编写 elisp 的任何其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:57:41.213

你可以这样做：

```
(kill-whole-line)
(yank)
(yank) 
```

达到同样的效果。但是，也许，如果我要编写这样一个函数，我宁愿这样做，这样该行就不会被复制到 kill-ring 中。通常，如果我需要复制行，我不希望它在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:30:00.493

我猜这只有在最后一行不以换行符结尾时才会发生。

以下函数在必要时插入换行符，并避免使用 kill-ring。

```
(defun duplicate-line ()
  (interactive)
  (let* ((pos-end (line-beginning-position 2))
         (line    (buffer-substring (line-beginning-position) pos-end)))
    (goto-char pos-end)
    (unless (bolp) (newline))
    (save-excursion ;; leave point before the duplicate line
      (insert line)))) 
```

# mysql - 更改空表上的列类型需要很长时间

> ID：13140468
> 
> 赞同：0
> 
> 时间：2012-10-30T13:50:29.137
> 
> 标签：mysql

我有一个 MySQL 开发数据库，​​发现我的一个列太小（它是一个 tinyint；需要是一个 int）。由于它是开发数据库，​​因此我在更改之前清空了表。然后，我希望 alter 语句几乎立即返回，因为它不必更改任何记录。我在这里的假设显然是错误的——查询需要很长时间，我不得不取消它。我在这里想念什么？除了桌子，还有什么正在改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:56:33.987

解决了。事实证明，一个 SQLAlchemy 对象在这个表上持有某种锁。有趣的是，命令

```
show open tables 
```

没有显示锁。但是，杀死其他脚本允许修改表。

# html - 是否可以在 Concrete5 CMS 中预先定义一个区域的内容块？

> ID：13140475
> 
> 赞同：1
> 
> 时间：2012-10-30T13:50:57.873
> 
> 标签：html, content-management-system, block, concrete5

我正在为我的一个客户项目使用 Concrete5 CMS，但有一个问题（理想情况下）我希望能够以这样一种方式嵌套 HTML 结构，以便内容编辑器能够编辑网站而无需知道或编写任何 HTML。一个示例结构是...

```
<header class="page-header"><!-- Defined as a GlobalArea -->

    <div class="site-meta"><!-- Defined as a Block Group (Stack?) -->
        <p class="contact-info"><!-- Defined as a Block -->
            <!-- User editable content -->
        </p>
        ....other content...
    </div>

    <div class="branding"><!-- Defined as a Block group -->
        <div class="logo"><!-- Defined as a Block -->
            <!-- User editable content -->
        </div>

        <hgroup><!-- Custom wrapper of sub-blocks -->
            <h1 class="brandname"><!-- Defined as a Block -->
                <!-- User editable content -->
            </h1>

            <h2 class="tagline"><!-- Defined as a Block -->
                <!-- User editable content -->
            </h2>
        </hgroup>
    </div>

    <p class="description"><!-- Defined as a Block -->
        <!-- User editable content -->
    </p>
</header> 
```

如您所见，我需要在定义的内容“区域”（或分组区域）内将单独的用户可编辑内容“块”分组到更大的“元”块中。虽然我的理解是 Concrete5 不能以这种方式运行——即区域不能包含其他区域，块不能包含其他块。

在这种情况下，我想知道如何仅使用原始 php 代码从数据库中手动加载特定的内容块。通过这种方式，我希望能够为给定区域预定义内容块，并希望在 HTML 的特定结构中强制插入块。

感谢人们可以为我提供的任何和所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T23:11:38.343

具有嵌套区域的上层区域组真的有业务需求吗？这通常由模板处理。例如：

```
<header class="page-header">

    <div class="site-meta">
        <p class="contact-info">
           <?php
                $a = new Area('Contact Info');
                $a->display($c);
            ?>
        </p>
        <!-- ....other content... -->
    </div>

    <div class="branding">
        <div class="logo">
            <?php
                $a = new Area('Logo');
                $a->display($c);
            ?>
        </div>

        <hgroup>
            <h1 class="brandname">
                <?php
                    $a = new Area('Brand Name');
                    $a->display($c);
                ?>
            </h1>

            <h2 class="tagline">
                <?php
                    $a = new Area('Tag Line');
                    $a->display($c);
                ?>
            </h2>
        </hgroup>
    </div>

    <p class="description">
        <?php
            $a = new Area('Description');
            $a->display($c);
        ?>
    </p>
</header> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T21:27:51.800

看看免费的 Designer Content 插件......您可以创建嵌入了标记的自定义块。这将为您提供您要创建的标记的大部分方法。如有必要，您可以使用它创建的块代码并更精确地自定义您的自定义块。

[http://www.concrete5.org/marketplace/addons/designer-content/](http://www.concrete5.org/marketplace/addons/designer-content/)

# haskell - 如何将 Pandoc 内联数据类型转换为 Blaze HTML 数据类型

> ID：13140481
> 
> 赞同：2
> 
> 时间：2012-10-30T13:51:17.120
> 
> 标签：haskell, pandoc

Pandoc 在解析文档时包含一个元数据块。元数据块的标题部分是 [Inline] 类型，一种特定于 Pandoc 的标记数据类型。我正在尝试找到一种将其转换为 Html 的方法，以便我可以将该文本直接嵌入到传出 Html 文档的 Header 元素中。

进行这种转换需要什么功能或功能组合？

```
[Inline] -> Html

[Str "My", Space, Str "Title"] -> ("My Title" :: Html) 
```

*   内联是 Pandoc 中提供的内联标记的数据类型
*   Html 是 Blaze Html 提供的通用 Html 数据类型

在此期间，我将编写一个处理 Str 和 Space 的函数，但我知道我最终将需要处理所有内联构造函数的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:19:35.373

你想要的是这样的：

```
inlinesToHtml :: [Inline] -> Html
inlinesToHtml = writeHtml defaultWriterOptions . Plain 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:29:57.513

我发现只有几个辅助函数是 Pandoc 附带的（[Data.Text.Pandoc.Shared](http://hackage.haskell.org/packages/archive/pandoc/1.9.1.2/doc/html/Text-Pandoc-Shared.html#g:4)，在你的例子中，这个`stringify`函数就是你所需要的（这个函数确实注意到它删除了任何格式，我猜是对于进入标题元素的文本并不重要）。

```
inlineToHtml i = (Data.Text.Pandoc.Shared.stringify i) :: Html 
```

# r - 读取外部文件时出现库 twitteR 问题

> ID：13140483
> 
> 赞同：0
> 
> 时间：2012-10-30T13:51:29.603
> 
> 标签：r, file, twitter

我没有互联网连接，我只想使用 R 的库 twitteR 制作一个程序。为此，我下载了文件 rdmTweets.RData，它应该包含一组推特。该文件位于：[http ://www.rdatamining.com/data](http://www.rdatamining.com/data)

我尝试使用以下方法读取该文件：

```
 rdmTweets<-userTimeline("rdmTweets.RData",n=200) 
```

还直接转换为数据框：

```
 df<-do.call("rbind",lapply("rdmTweets.RData",as.data.frame) 
```

但是，根本没有结果。我的意思是它没有显示推特的任何信息。我试图像文件一样阅读它：

```
 rdm<-file("rdmTweets.RData","r")
  lines<-readLines(rdm) 
```

也没有结果。似乎我可以访问该文件的唯一方法是：

```
 rdmTweets<-userTimeline("rdatamining",n=200) 
```

但这意味着要有一个活跃的互联网连接。所以我的问题是我如何以一种可以获得其内容的方式读取该文件，就像我使用 userTimeline 一样？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T02:01:45.890

要读取 RData 文件，您需要使用*load()*。

运行下面的代码。第一行从文件加载数据对象*rdmTweets*，第二行将其转换为数据框。您还需要安装软件包 twitteR。

```
load("rdmTweets.RData")
df <- do.call("rbind", lapply(rdmTweets, as.data.frame)) 
```

# java - 如何模拟 Object.getClass？

> ID：13140487
> 
> 赞同：18
> 
> 时间：2012-10-30T13:51:50.443
> 
> 标签：java, mockito

我正在开发一个 Java 项目，想为我在 DTO 中的 .equals 方法编写单元测试。在 .equals 方法中，有一个 .getClass() 方法被两个被测对象调用。我想模拟这个，但我不知道它想要什么类型的对象。我试过，

`when(mockRoomInv.getClass()).thenReturn(RoomInv.class);`

但肯定没有做任何事情。getClass 的返回类型是什么，如何操作它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T14:01:35.440

最后`Object.getClass()`，您不能使用 Mockito 模拟该方法。我强烈建议您重构代码以另一种方式注入类。如果这不可能，您可以尝试[powermock](http://code.google.com/p/powermock/)，您可以在其中模拟任何最终方法。`Object.getClass()`有点特殊，所以一定要`MockGateway.MOCK_GET_CLASS_METHOD = true`在powermock中设置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T14:04:24.967

`Object.getClass()`是一种`final`方法，所以你不能用 Mockito 模拟它。

您可以使用[https://github.com/powermock/powermock](https://github.com/powermock/powermock)上的 Powermock（这是一个非常酷的工具；）来模拟`static`和`final`方法（就像这个）甚至方法。`private`

您可以将它与 Mockito 一起使用，如[Mockito wiki 文章中所述](https://github.com/powermock/powermock/wiki/Mockito)。在那里你会找到一些有用的例子。

# matlab - matlab：对齐 3D 形状

> ID：13140488
> 
> 赞同：1
> 
> 时间：2012-10-30T13:51:52.487
> 
> 标签：matlab, alignment

我正在寻找一种对齐 3D 形状的方法。我有矩阵 AB、A 和 B，每个都包含一个 3D 项目。矩阵 AB 由 A 和 B 组成。

我想找到 A 和 B 重建 AB 所需的转换（旋转、平移）。

您有任何方法或有用的功能可以帮助我吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:45:02.390

我想到了以下方法：

首先获得将处理相关自由度的变换矩阵。然后使用非线性优化来最小化二进制 3D 差异。关于自由度：每个对象在 (x,y,z) 位置和 (theta,phi,psi) 角度方向 (Euler)。所以有人会认为你需要 6+6=12 个自由度（或维度）来执行搜索。但是，维度较低，因为您有 2 个物体必须存在的约束，所以寻找**相对的就足够了**空间分离 (dx,dy,dz) 和相对角度差 (theta,phi,psi)。此外，我们可以询问形状是否存在对称性，例如，如果形状中的一个是球体，角度是不相关的，等等。所以对于每个自由度，我希望有一个相关的 3x3 变换矩阵，Rtheta，Rphi，Rpsi，Tx，Ty，Tz。其中 Rtheta 看起来像：

```
 Rtheta = [cos(theta)    0      -sin(theta)   0
           0             1              0     0
           sin(theta)    0       cos(theta)   0
           0             0              0     1]; 
```

这些矩阵可以组合成一个通用的旋转矩阵

```
 Rot=Rtheta*Rphi*Rpsi; 
```

并同样得到平移矩阵Trans=Tx*Ty*Tz，则

```
tform_Trans = maketform('affine', Trans);
tform_Rot = maketform('affine', Rot);
tform_RT = maketform('composite',tform_Rot,tform_Trans); 
```

并使用函数应用转换

```
 tformarray(A, tform_RT, R, TDIMS_A, TDIMS_B, TSIZE_B, TMAP_B, F) 
```

[在以下链接](http://blogs.mathworks.com/steve/2006/08/17/spatial-transformations-three-dimensional-rotation/)中查看更详细的说明。

# php - 数据库结构/设计：根据学期和年份开设的课程

> ID：13140493
> 
> 赞同：0
> 
> 时间：2012-10-30T13:52:08.140
> 
> 标签：php, mysql, database, database-design

我目前正在使用 PHP 和 MySQL 数据库。我目前正在为我的部门建立一个课程目录页面。我已经建立了一个名为`Courses`. 我的数据库表的其余结构遇到了问题。有在 期间教授的课程`fall`和在 期间教授的其他课程`spring`。此外，在这些课程中，有些课程每隔一年教授一次。我想建立一个表，然后我可以使用 PHP 来根据`semester`和自动更新`scholarly year`。更具体地说，我想展示`courses name`, `description`，以及它是否在`fall or semester`当年提供。该年未提供的任何课程都不会显示在页面中。

我将如何正确构建我的表格以符合上述要求？

**示例（课程编号、班级名称）：**

```
3210 Musical Theatre Styles I (Fall)
3220 Musical Theatre Styles II (Spring)
4500 Musical Theatre Showcase (Fall of year 2014) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:03:50.013

我会创建一个表来描述课程，包括课程代码、名称和所有其他相关信息，然后创建另一个表，将这些课程与课程的授课时间联系起来。

课程示例

```
id serial
course_code text
description text 
```

计划示例

```
id serial
course_id serial
year date
semester (look at @Mahmoud Gamals answer) 
```

因此，填充的数据库可以包含以下内容：

桌子`courses`

```
id course_code description
1  INF1000     "Basic programming"
2  INF1001     "More basic programming" 
```

表`course_dates`（0 为春季 1 为秋季）

```
id course_id year semester
1  1         2012 0
2  1         2013 1
3  2         2013 1 
```

这样，您就可以将教授课程的日期与课程信息分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:55:47.373

您将需要创建一个标志列。例如`int`表示类类型，0 表示`Fall`， 1 表示`Spring`， 2 表示`All of the year`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:58:45.597

添加更多细节。如果您希望它易于记忆，请使用 ENUM ('fall', 'spring'...)

```
id courseID courseName whenOffered everyOtherYear 
```

# date - 在一列中获取最大值（日期）的整个记录

> ID：13140494
> 
> 赞同：3
> 
> 时间：2012-10-30T13:52:08.243
> 
> 标签：date, ms-access, transactions, max

我正在尝试查询交易数据。我想获取最新日期交易的多个列。PONumber，供应商，每件商品的价格，最后一次购买。例如：

数据：

```
PONumber    Item    Vendor    Price    DateOrdered
1           ABC     Wal-Mart  1.00     10/29/12
2           ABC     BestBuy   1.25     10/20/12
3           XYZ     Wal-Mart  2.00     10/30/12
4           XYZ     HomeDepot 2.50     9/14/12 
```

期望的结果集：

```
PONumber    Item    Vendor    Price    DateOrdered
1           ABC     Wal-Mart  1.00     10/29/12
3           XYZ     Wal-Mart  2.00     10/30/12 
```

尝试在 DateOrdered 上使用 max 函数，但是当我包含供应商时，我得到了每个供应商和项目的最后一次购买（行太多）。我需要为每个项目提供一个记录。关于如何完成的任何想法？使用 MS Access 2007 和 ODBC 到 oracle 表。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:59:00.333

怎么样：

```
SELECT 
   tran.PONumber, 
   tran.Item, 
   tran.Vendor, 
   tran.Price, 
   tran.DateOrdered
FROM tran
WHERE tran.DateOrdered = (
   SELECT Max(DateOrdered) 
   FROM tran t 
   WHERE t.item=tran.item) 
```

tran 是你的桌子。

# perl - 遍历 Perl 数组的最有效方法是什么？

> ID：13140498
> 
> 赞同：1
> 
> 时间：2012-10-30T13:52:25.047
> 
> 标签：perl

我正在阅读一个我必须按小时、按分钟或按秒计算的有序文件。如果要求，我必须打印 0 次出现的时间（标准化输出）或跳过它们（非标准化输出）。输出显然必须是有序的。

我首先想到的是使用数组。当输出未标准化时，我大致相当于：

```
@array[10] = 100;
@array[10000] = 10000; 
```

并打印结果：

```
foreach (@array) {
  print if defined;
} 
```

有没有办法将迭代减少到仅在数组中定义的元素？在前面的示例中，这意味着只进行两次迭代，而不是使用`$#array`暗示的 10000 次。然后我还需要一种方法来知道循环中的当前数组索引。这样的事情存在吗？

我越来越多地考虑使用哈希来代替。使用哈希解决了我的问题，也消除了将 hh:mm:ss 时间转换为索引的需要，反之亦然。

或者你有更好的解决方案来解决这个简单的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T13:58:24.207

是的，使用哈希。如果您的键排序正确，您可以遍历哈希键的有序数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:10:26.330

您还可以只记住数组中的数字对：

```
#!/usr/bin/perl
use warnings;
use strict;

my @ar = ( [  10, 100 ],
           [ 100,  99 ],
           [  12,   1 ],
           [  13,   2 ],
           [  15,   1 ],
         );

sub normalized {
    my @ar = sort { $a->[0] <=> $b->[0] } @_;
    map "@$_", @ar;
}

sub non_normalized {
    my @ar = sort { $a->[0] <=> $b->[0] } @_;
    unshift @ar, [0, 0] unless $ar[0][0] == 0;
    my @return;
    for my $i (0 .. $#ar) {
        push @return, "@{ $ar[$i] }";
        push @return, $_ . $" . 0 for 1 + $ar[$i][0] .. $ar[$i + 1][0] - 1;
    }
    return @return;
}

print join "\n", normalized(@ar), q();
print "\n";
print join "\n", non_normalized(@ar), q(); 
```

# javascript - 角度选择中的选定选项

> ID：13140505
> 
> 赞同：4
> 
> 时间：2012-10-30T13:53:08.617
> 
> 标签：javascript, select, option, angularjs

我选择了 ng-repeat：

```
<select class="span5 ui-select2 id="goal_{{goal.id}}" multiple="multiple">
  <option ng-repeat="counterGoal in counterGoals" value="{{counterGoal.id}}">{{counterGoal.name}}</option>
</select> 
```

在`goal`模型中我有`counter_goal_ids`像`[1,2,3,4,5,6]`. 如何选择包含在 中的选项`goal.counter_goal_ids`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T14:09:34.580

尝试以下操作：

您可以使用模型中的[ng-selected](http://docs.angularjs.org/api/ng.directive%3angSelected)属性和自定义函数来选择选项

```
ng-selected="isInGoalIds({{counterGoal.id}})" 
```

在你的模型中，添加一个函数

```
$scope.isInGoalIds = function(id){
    angular.forEach($scope.counter_goal_ids, function(value, index){
      if(id == value){
        return true;
      }
    });
    return false;
} 
```

# ruby-on-rails - 如何在单独的选项卡中打开链接（按钮）？

> ID：13140509
> 
> 赞同：1
> 
> 时间：2012-10-30T13:53:24.450
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, cucumber

我有一个在同一个窗口中打开链接的按钮，但我需要通过编写一些脚本在单独的选项卡中打开它。我正在使用 Ruby，这是我的代码：

```
Given /^User clicks on the New User Link$/ do
    page.driver.browser.switch_to.window (page.driver.browser.window_handles.last)
    find(:xpath, "//*[@id='slideshow']/div[1]/div/a/img, ").click
end 
```

这段代码对我不起作用。如果您在此代码中发现任何错误，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:23:50.630

bgoad 在[那里](https://stackoverflow.com/a/9949850/841064)回答了你的问题。这里是：

```
def open_new_window(url)
  a = @driver.execute_script("var d=document,a=d.createElement('a');a.target='_blank';a.href=arguments[0];a.innerHTML='.';d.body.appendChild(a);return a", url)
  a.click
  @driver.switch_to.window(@driver.window_handles.last)
end 
```

注意：我没试过

# node.js - Telnet：Windows 7 上的 localhost 将无法连接到 localhost

> ID：13140511
> 
> 赞同：2
> 
> 时间：2012-10-30T13:53:34.667
> 
> 标签：node.js, localhost, telnet

我正在使用代码运行一个简单的 Node.JS 服务器：

```
require('http').createServer(function (req, res) {
  res.writeHead(200, { 'Content-Type': 'text/html; charset=utf-8' });
  res.end('<h1>Hi there world</h1>');
}).listen(3000); 
```

它按预期工作。当我输入“http://localhost:3000”时，会出现标题“Hi there world”。

但是，当我使用 telnet 时：

```
telnet localhost 3000 
```

我只收到消息：

```
Connecting To localhost... 
```

防火墙已关闭。Telnet 连接到外部主机没有任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:56:47.587

Well, I'd guess your node.js server is waiting for you to issue a GET request. When it is waiting after the message `Connecting to Localhost...`.

The telnet client doesn't visually indicate that it is connected. Just write your request and it should get entered.

Put your **GET** request in:

```
GET / HTTP 1.1 
```

# objective-c - 在 stringByReplacingOccurrencesOfString 之后，Objective-C 在调试器中出现奇怪的外观

> ID：13140515
> 
> 赞同：4
> 
> 时间：2012-10-30T13:53:40.350
> 
> 标签：objective-c, debugging, str-replace, lldb

我在 Mac OS X 和 Xcode 4.5.2 上执行这些行时：

```
NSString *asSrcFileName = @"chromebar.png"
NSString *asSrcExtName  = @".png"
NSString *asTempName    = [asSrcFileName stringByReplacingOccurrencesOfString:asSrcExtName withString:@""]; 
```

我在调试器中对我的变量有一个奇怪的看法。请参见矩形： ![在此处输入图像描述](../Images/b36a9f431f7ff989f9155c02b5d1fd89.png) 我希望 asTmp 在第三行之后是 @"chromebar"。到目前为止，我一直在使用**stringByReplacingOccurrencesOfString并且不知道出了什么问题。**不知何故，它看起来像是一个 unicode 问题。

有没有人可以给我一些启示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:22:11.877

您是否`asSrcTempName`在初始化变量后进行检查（显示当前执行点的绿线在初始化下方）？

否则，它可能只是未初始化的内存，而 lldb 显示之前运行的垃圾。

我无法在 Xcode 4.5.1 中重现您的问题。

# sql - 使用带有后备的右表对左外连接进行排序

> ID：13140518
> 
> 赞同：2
> 
> 时间：2012-10-30T13:53:53.797
> 
> 标签：sql, postgresql

我有两张桌子：

*   表 1 - ID，created_at
*   表 2，Id，table1_id，created_at

我想将所有 Table1 行包含在一个连接中，该连接获取最新的 Table2 记录（如果有，可能没有任何 table2 记录），并使用 Table2 上的 created_at 对结果进行排序。如果没有 Table2 记录，我希望能够将 Table1 中的 created_at 用于该记录的排序。

例子：

```
Table 1 (id, created_at)  
1, 100  
2, 200  
3, 300  
4, 400  

Table 2 (id, table1_id, created_at)  
1, 1, 500  
2, 1, 450  
3, 2, 350 
```

并且查询会给出结果 (t1.id, t1.created_at, t2.id, t2.created_at)

```
1, 100, 1, 500  
4, 400, --, --  
2, 200, 2, 350  
3, 300, --, -- 
```

我正在使用 Postgresql。完成此任务的最佳查询/方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:33:54.780

```
select t1.id, t1.created_at, t2.id, t2.created_at
from
    table1 t1 
    left outer join (
        select id, max(created_at) created_at
        from table2
        group by id
    ) t2 on t1.id = t2.id
order by coalesce(f2.created_at, f1.created_at) desc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:24:01.180

认为我想出了一个似乎有效的查询：

```
SELECT * FROM table1 AS t1 
LEFT OUTER JOIN table2 AS t2 ON (
    t2.t1_id = t1.id
    AND 
    t2.id = (SELECT tt2.id FROM table2 tt2 WHERE tt2.t1_id = t1.id ORDER BY created_at DESC LIMIT 1)
) ORDER BY COALESCE(f2.created_at, f1.created_at) DESC; 
```

不确定这是否是最好或最有效的方法，所以我仍然愿意接受建议。

# sql - 跨数据库的简单 SQL Server 查询运行速度极慢 R2

> ID：13140520
> 
> 赞同：1
> 
> 时间：2012-10-30T13:54:01.427
> 
> 标签：sql, sql-server, performance, tsql

我在本地机器上有两个数据库，连接到`localhost`. 它们每个都有大约 200 万行。我正在执行以下非常简单的连接，并且花了一分钟多的时间才能完成。

```
select distinct x.patid
    from [i 3 sci study].dbo.clm_extract as x
    left join [i 3 study].dbo.claims as y on y.patid=x.patid
    where y.patid is null 
```

当我查看执行计划时，我看到 join showplan 操作员有这样的说法 ![在此处输入图像描述](../Images/d0e0d77d996eb6fde134f07128a87ecc.png)

与两个表中的实际行数相比，为什么实际行数如此之高？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:21:18.200

将`LEFT JOIN`左侧的每一行与右侧的每一行匹配，然后过滤。假设`patid`在任一表中都不是唯一的，则可能的匹配组合的数量可能会非常高。

尝试以下操作：

```
SET NOCOUNT ON;
GO
CREATE TABLE #t1 (Id INT NOT NULL);
CREATE TABLE #t2 (Id INT NOT NULL);
GO

INSERT #t1 (Id)
VALUES (1);
GO 100

INSERT #t2 (Id)
SELECT Id FROM #t1;
GO 
```

现在看一下左连接查询表单的执行计划：

```
SELECT *
FROM #t1
LEFT OUTER JOIN #t2 ON #t1.Id = #t2.Id
WHERE #t2.Id IS NULL; 
```

查看执行计划，散列连接显示 10,000 个实际行（100 来自 #t1 x 100 来自 #t2）。这显示了使用以下任何 T-SQL 语法检查是否存在（或不存在）的优势：

```
SELECT #t1.Id
FROM #t1
WHERE NOT EXISTS (SELECT * FROM #t2 WHERE Id = #t1.Id);

-- #t2.Id must not contain any NULLs for this to be correct
SELECT #t1.Id
FROM #t1
WHERE Id NOT IN (SELECT #t2.Id FROM #t2);

-- Returns DISTINCT #t1 values
SELECT Id
FROM #t1
EXCEPT
SELECT Id 
FROM #t2; 
```

检查是否存在使发动机短路。这是由于反半连接。一旦找到第一个匹配项，它就会移动到下一个记录。有关更多详细信息，[请参阅此博客文章](http://explainextended.com/2009/09/15/not-in-vs-not-exists-vs-left-join-is-null-sql-server/)。

# javascript - 动态更新地图时Gmaps4rails侧边栏消失

> ID：13140521
> 
> 赞同：0
> 
> 时间：2012-10-30T13:54:04.967
> 
> 标签：javascript, ruby-on-rails, google-maps, gmaps4rails, sidebar

我正在使用滑块动态更新 Gmaps4rails 谷歌地图，但是每当我移动滑块并且标记由 replaceMarkers 函数更新时，侧边栏就会消失，我可以再次加载标记列表的唯一方法是刷新页。有谁知道解决这个问题的任何方法？

# c# - await vs Task.Wait - 死锁？

> ID：13140523
> 
> 赞同：242
> 
> 时间：2012-10-30T13:54:08.227
> 
> 标签：c#, task-parallel-library, deadlock, async-await

我不太明白 和 之间的`Task.Wait`区别`await`。

我在 ASP.NET WebAPI 服务中有类似于以下函数的东西：

```
public class TestController : ApiController
{
    public static async Task<string> Foo()
    {
        await Task.Delay(1).ConfigureAwait(false);
        return "";
    }

    public async static Task<string> Bar()
    {
        return await Foo();
    }

    public async static Task<string> Ros()
    {
        return await Bar();
    }

    // GET api/test
    public IEnumerable<string> Get()
    {
        Task.WaitAll(Enumerable.Range(0, 10).Select(x => Ros()).ToArray());

        return new string[] { "value1", "value2" }; // This will never execute
    }
} 
```

哪里`Get`会死机。

什么可能导致这种情况？当我使用阻塞等待而不是 时，为什么这不会导致问题`await Task.Delay`？

* * *

## 回答 #1

> 赞同：335
> 
> 时间：2012-10-30T14:19:07.200

`Wait`和`await`- 虽然在概念上相似 - 实际上是完全不同的。

`Wait`将同步阻塞，直到任务完成。因此，当前线程实际上被阻塞，等待任务完成。作为一般规则，您应该使用“`async`一直向下”；也就是说，不要阻塞`async`代码。在我的博客中，我详细介绍[了异步代码中的阻塞如何导致死锁](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)。

`await`将异步等待任务完成。这意味着当前*方法*“暂停”（其状态被捕获）并且该方法向其调用者返回一个不完整的任务。稍后，当`await`表达式完成时，该方法的其余部分被安排为延续。

您还提到了一个“合作块”，我假设您的意思是您正在`Wait`处理的任务可能在等待线程上执行。在某些情况下可能会发生这种情况，但这是一种优化。在许多情况下它*不会*发生，例如任务是否用于另一个调度程序，或者它已经启动或者它是非代码任务（例如在您的代码示例中：`Wait`无法`Delay`内联执行任务，因为没有代码为了它）。

您可能会发现我的[`async`/`await`介绍](http://blog.stephencleary.com/2012/02/async-and-await.html)很有帮助。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-12-06T13:52:53.120

根据我从不同来源阅读的内容：

**[`await`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/await)**表达式不会阻塞它正在执行的线程。相反，它会导致编译器注册该`async`方法的其余部分作为等待任务的延续。然后控制权返回给`async`方法的调用者。当任务完成时，它调用它的继续，并且`async`方法的执行从它停止的地方继续。

要等待单个[**`task`**](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task?view=netframework-4.7.2#WaitingForOne)完成，您可以调用其`Task.Wait`方法。对该`Wait`方法的调用会阻塞调用线程，直到单个类实例完成执行。无参数`Wait()`方法用于无条件等待直到任务完成。**`Thread.Sleep`**该任务通过调用该方法休眠两秒钟来模拟工作。

[这篇文章](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/async/index)也很好读。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-20T13:22:36.353

其他答案中没有给出一些重要的事实：

“异步等待”在 CIL 级别更复杂，因此会消耗内存和 CPU 时间。

如果等待时间不可接受，任何任务都可以取消。

在“异步等待”的情况下，我们没有处理此类任务的处理程序来取消它或监视它。

使用 Task 比“异步等待”更灵活。

任何同步功能都可以由异步包装。

```
public async Task<ActionResult> DoAsync(long id) 
{ 
    return await Task.Run(() => { return DoSync(id); } ); 
} 
```

“异步等待”会产生很多问题。我们现在不是在没有运行时和上下文调试的情况下会到达 await 语句。**如果未达到第一个等待，则所有内容都将被阻止**。有时甚至等待似乎到达仍然一切都被阻止：

[https://github.com/dotnet/runtime/issues/36063](https://github.com/dotnet/runtime/issues/36063)

我不明白为什么我必须忍受同步和异步方法或使用黑客的代码重复。

结论：手动创建任务并控制它们要好得多。Task 的处理程序给予更多的控制。我们可以监控任务并管理它们：

[https://github.com/lsmolinski/MonitoredQueueBackgroundWorkItem](https://github.com/lsmolinski/MonitoredQueueBackgroundWorkItem)

对不起我的英语不好。

# mysql - 如何更改 SQL 和 MySQL DBMS 中现有数据库的字符集？

> ID：13140524
> 
> 赞同：0
> 
> 时间：2012-10-30T13:54:11.863
> 
> 标签：mysql, sql, database

我正在管理一个由另一个程序员创建的网站。网页的内容从数据库（MySQL / SQL）加载——他使用 JOOMLA 进行设计。网页上显示了一些不应该出现的特殊字符（e toÂ theirÂ st）。我想在服务器（SQL 服务器）上将默认字符集更改为 UTF_8_general_ci。请问我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:46:29.633

您可以登录到服务器并从那里更改 SQL 表定义。如果您使用的是 cPanel，您需要选择的选项是 MYPhPAdmin。joomla 表的列表将在那里，通常带有前缀 jos_

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:43:09.007

更改 MySQL 数据库中所有表的排序规则可能会很耗时，具体取决于您拥有多少表。

```
That's why we recommend using the following PHP script for changing the collation for all tables at a time:

<?php

$execute_sql = false;

$host = 'host name';
$username = 'user_name';
$password = 'password';
$dbname = 'databse_name';

$db = new mysqli($host, $username, $password, $dbname);

//$connect = mysql_connect('localhost','root','Admin@123');
//$select_db = mysql_select_db('friends') or die('database not selected'.mysql_error());

$collation = 'CHARACTER SET utf8 COLLATE utf8_unicode_ci';
$collationPK = 'CHARACTER SET utf8 COLLATE utf8_bin';

$result = $db->query("SET foreign_key_checks = 0");

echo '<div>';

if($execute_sql) $db->query("ALTER DATABASE $dbname $collation");

$result = $db->query("SHOW TABLES");

$count = 0;
while($row = $result->fetch_assoc()) {
    $table = $row['Tables_in_'.$dbname];
    if($execute_sql) $db->query("ALTER TABLE $table DEFAULT $collation");
    $result1 = $db->query("SHOW FULL COLUMNS FROM $table");

    $alter = '';
    while($row1 = $result1->fetch_assoc()) {
        if (preg_match('~char|text|enum|set~', $row1["Type"])) {
            // support a different collation for primary keys
            if ($row1["Key"] == "PRI" || $row1["Key"] == "MUL") {
                $newCollation = $collationPK;
            } else {
                $newCollation = $collation;
            }
            // check if we actually need to change the collation
            $alter .= (strlen($alter)?", \n":" ") . "MODIFY `$row1[Field]` $row1[Type] $newCollation" . ($row1["Null"] ? "" : " NOT NULL") . ($row1["Default"] && $row1["Default"] != "NULL" ? " DEFAULT '$row1[Default]'" : "");
        }
    }
    if(strlen($alter)){
        $sql = "ALTER TABLE $table".$alter.";";
        echo "<div>$sql\n\n</div>";
        $db->query($sql);        
    }
    $count++;
}
echo '</div>';
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T07:50:05.387

老实说，如果说明了实际命令，那就更清楚了。

1.  只更新数据库中一个表的字符集。请执行下列操作：

    alter table `books`convert to character set utf8 collat​​e utf8_general_ci;

2.  要更改已创建的数据库的字符集，请执行以下操作：

    `set collation_database=utf8_general_ci`

3.  您还可以通过以下方式查看分配给每个表的字符集`show table status \G`

# php - 所有用户都可以访问的静态对象，例如 Application.cfc

> ID：13140525
> 
> 赞同：0
> 
> 时间：2012-10-30T13:54:17.870
> 
> 标签：php, coldfusion, application.cfc

这些年来我已经做了相当多的 PHP，但我目前正在学习 ColdFusion 并且遇到了该`Application.cfc`文件。

基本上这是一个创建一次的类（有一个过期日期）。该类处理传入用户并可以设置会话变量和静态内存对象，例如查询。例如，我可以从`Application.cfc`. 每个页面通常需要几秒钟的时间会使整个站点快速响应。

另一个例子（只是为了澄清）。如果我在`OnApplicationStart`此变量中放置一个设置为 0 的增量变量，则可以随着每个用户请求（多个用户）或在`OnSessionStart`不需要联系 SQL 数据库的情况下递增该变量，因为它始终位于此应用程序下的服务器内存中。

我想知道 PHP 是否有类似的文件或对象？可以创建一次并用于存储临时变量的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:03:16.610

PHP 运行时本身会根据每个 HTTP 请求从头开始初始化环境，因此它没有内置机制来执行此操作。当然，您可以将任何内容[序列化](http://php.net/manual/en/function.serialize.php)到公共存储中，然后将其读回并在每个请求上反序列化，但这与将其保存在内存中不同。

PHP 中的这种功能是通过外包给其他程序来实现的；[memcached](http://memcached.org/)和[APC](http://pecl.php.net/package/APC)是提供此类服务的两个最常用的程序，[它们](http://www.php.net/manual/en/book.memcached.php) [都](http://php.net/manual/en/book.apc.php)带有 PHP 扩展，可以简化它们的使用。

# php - php说成功但mysql没有更新

> ID：13140530
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:54:38.150
> 
> 标签：php, mysql

我正在尝试通过 PHP 更新 MySQL 数据库。我知道更新是成功的，但是 MySQL 没有被更新。我在 MySQL 中尝试了查询，它正在工作，但在那里但不是通过 PHP 页面。为什么？

```
<?php 
include("checksession.php"); 
$Id = $_POST['Id'];
$_SESSION['Id'] = $Id;

include("dbconnect.php");

$sql = "UPDATE part SET Available = 'Yes' WHERE Id = '$Id'";
$result = mysql_query($sql, $con);

if($result)
{
Header("Location: Item.php?eMsg=Made Available");
}
else
{
Header("Location: Item.php?eMsg=Unable to Make Available");
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:59:55.410

试试这个解决方案，使用本机函数[mysql_affected_rows()](http://php.net/manual/ru/function.mysql-affected-rows.php)：

```
$Request = mysql_query($sql, $con);
$Result = mysql_affected_rows(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:25:01.680

尝试这个：

> $sql = "UPDATE part SET Available = 'Yes' WHERE Id = '{$Id}'";

# excel - 从 Excel VBA 中的字符串中删除多余的逗号

> ID：13140533
> 
> 赞同：0
> 
> 时间：2012-10-30T13:54:43.693
> 
> 标签：excel, vba

我想将来自三个不同下拉列表的数据插入到我的电子表格中，但我遇到了一些困难。共有三个下拉菜单，称为 cbo_fac1、cbo_fac2 和 cbo_fac3。

* * *

以下是用例：

**用例 1** -`No preference`插入电子表格的结果

```
cbo_fac1 - No preference
cbo_fac2 - No preference 
cbo_fac3 - No preference 
```

**用例 2a** - 结果`value, ,`被插入到电子表格中。应该只是`value`

```
cbo_fac1 - Value
cbo_fac2 - No preference
cbo_fac3 - No preference 
```

**用例 2b** - 结果`, value,`被插入到电子表格中。应该只是`value`

```
cbo_fac1 - No preference
cbo_fac2 - Value
cbo_fac3 - No preference 
```

**用例 2c** - 结果`, , value`被插入到电子表格中。应该只是`value`

```
cbo_fac1 - No preference 
cbo_fac2 - No preference 
cbo_fac3 - Value 
```

**用例 3a** - 结果`value, value,`被插入到电子表格中。应该只是`value, value`

```
cbo_fac1 - Value
cbo_fac2 - Value 
cbo_fac3 - No preference 
```

**用例 3b** - 结果`, value, value`被插入到电子表格中。应该只是`value, value`

```
cbo_fac1 - No preference
cbo_fac2 - Value 
cbo_fac3 - Value 
```

**用例 3c** - 结果`value, , value`被插入到电子表格中。应该只是`value, value`

```
cbo_fac1 - Value
cbo_fac2 - No preference
cbo_fac3 - Value 
```

* * *

如何删除*用例 2a-3c*中的多余逗号？

到目前为止，这是我的代码：

```
If Me.cbo_fac1 <> "No preference" Then
cbo_fac1Entry = Me.cbo_fac1.Value
Else
cbo_fac1Entry = ""
End If

If Me.cbo_fac2 <> "No preference" Then
cbo_fac2Entry = Me.cbo_fac2.Value
Else
cbo_fac2Entry = ""
End If

If Me.cbo_fac3 <> "No preference" Then
cbo_fac3Entry = Me.cbo_fac3.Value
Else
cbo_fac3Entry = ""
End If

cbo_facEntry = cbo_fac1Entry & ", " & cbo_fac2Entry & ", " & cbo_fac3Entry

If cbo_facEntry = " , ," Then
cbo_facEntry = "No preference"
Else
End If
rng1.Offset(1, 15) = cbo_facEntry 
```

* * *

我试过插入这段代码：

```
if right(cbo_facEntry,1)="," then
   cbo_facEntry= left(len(cbo_facEntry)-1)
end if

if left(cbo_facEntry,1)="," then
   cbo_facEntry= right(len(cbo_facEntry)-1)
end if 
```

后：

```
If cbo_facEntry = ",," Then
cbo_facEntry = "No Preference"
Else
End If 
```

但这并没有太大区别，因为它不满足所有用例的要求，并且还返回无效的语法错误消息。

* * *

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:10:08.823

这是一个简单的片段：

```
Dim a(2) As String
a[0] = cbo_fac1
a[1] = cbo_fac2
a[2] = cbo_fac3

Dim I As Integer, result As String
For I = 0 To UBound(a)
    If a(I) <> "No Preference" Then
        If I = 0 Then
            result = a(I)
        Else
            result = result & "," & a(I)
        End If
    End If
Next 
```

我没有测试过这段代码，但你应该明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:00:12.947

您可以将这三行添加到您的代码中，而不是您尝试过的代码：

```
cbo_facEntry = Replace(cbo_facEntry, ", , ", ", ")
If Left(cbo_facEntry, 1) = "," Then cbo_facEntry = Right(cbo_facEntry, Len(cbo_facEntry) - 2)
If Right(cbo_facEntry, 2) = ", " Then cbo_facEntry = Left(cbo_facEntry, Len(cbo_facEntry) - 2) 
```

# java - 从将在 android 应用程序中具有全局范围的代码中设置语言环境

> ID：13140535
> 
> 赞同：0
> 
> 时间：2012-10-30T13:54:48.730
> 
> 标签：java, android

我有这个代码：

```
 Locale locale_en = new Locale("en"); 
            Locale.setDefault(locale_en);
            Configuration config_en = new Configuration();
            config_en.locale = locale_en;
            getBaseContext().getResources().updateConfiguration(config_en, getBaseContext().getResources().getDisplayMetrics()); 
```

它会改变语言环境，它工作得很好。问题是，当我更改活动区域设置时，新活动再次设置为默认值。这是示例代码：

```
Button o_nas_bt = (Button) findViewById(R.id.o_nas_bt_id);      
o_nas_bt.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            startActivity(new Intent("com.investwroclaw.ONASACTIVITY"));
        }
    }); 
```

我想更改整个应用程序的语言环境。有人可以在这里帮助我吗？

萨克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:09:58.723

好的。我有一个适用于我的特定情况的解决方案（意味着更改应用程序主页上的语言）。当我更改语言（这意味着更改语言环境）时，我使用 Intent 和以下代码重新启动活动：

```
 Intent intent = new Intent(InvestWroclawActivity.this, InvestWroclawActivity.class);
            startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T20:23:42.007

我实际上会考虑使用手机的语言环境。其实很简单

# java - 如何使用另一个线程停止从标准输入流扫描的线程？

> ID：13140537
> 
> 赞同：3
> 
> 时间：2012-10-30T13:54:55.970
> 
> 标签：java

我有一个线程，其中数据从标准输入流扫描为：

```
1\. Scanner scan = new Scanner(System.in);
2\. while(true)
3\. {
4\.   String str = scan.nextLine();
5\.   System.out.println(str);
6\. } 
```

我想用另一个线程停止这个线程。听说用 Thread.stop() 不好。使用一些布尔标志也无法解决它，因为指针（程序执行步骤）将始终位于第 4 行。 String str = scan.nextLine();

有什么办法可以停止线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:59:55.017

我认为这篇[文章](http://www.javaspecialists.eu/archive/Issue153.html)会对你有所帮助，它附带了一个解决问题的代码示例。您可以直接使用该代码，也可以编写一个新的可关闭 InputStream 类，将本文中描述的逻辑封装起来。

```
public class ConsoleInputReadTask implements Callable<String> {
  public String call() throws IOException {
    BufferedReader br = new BufferedReader(
        new InputStreamReader(System.in));
    System.out.println("ConsoleInputReadTask run() called.");
    String input;
    do {
      System.out.println("Please type something: ");
      try {
        // wait until we have data to complete a readLine()
        while (!br.ready()) {
          Thread.sleep(200);
        }
        input = br.readLine();
      } catch (InterruptedException e) {
        System.out.println("ConsoleInputReadTask() cancelled");
        return null;
      }
    } while ("".equals(input));
    System.out.println("Thank You for providing input!");
    return input;
  }
} 
```

# c# - 在继承的类中使用 ReactiveCommand 和 WhenAny

> ID：13140538
> 
> 赞同：1
> 
> 时间：2012-10-30T13:54:57.747
> 
> 标签：c#, .net, system.reactive, reactiveui

考虑使用 ReactiveUI 继承。我有带有 DoSomethingCommand 的基本 ViewModel 类。此命令的“CanExecute”取决于属性 Prop1

```
public class A : ReactiveObject
{
    public int Prop1 { get {...} set {...} }
    public ReactiveCommand DoSomethingCommand { get; private set; }

    public A()
    {
        IObservable<bool> canDoSomething = this.WhenAny(vm => vm.Prop1, p1 => CanDoSomething());
        DoSomethingCommand = new ReactiveCommand(canDoSomething);
        DoSomethingCommand.Subscribe(x => DoSomething());
    }

    protected virtual bool CanDoSomething()
    {
        return ...
    }
} 
```

在继承类中，此命令的“CanExecute”还取决于属性 Prop2

```
public class B : A
{
    public int Prop2 { get {...} set {...} }

    public B()
    {
        //Senseless code. For explanation only
        IObservable<bool> canDeleteExecute = this.WhenAny(vm => vm.Prop1, vm => vm.Prop2, (p1, p2) => CanDoSomething());
    }
} 
```

创建命令并使“CanExecute”依赖于基类和继承类的属性的最佳实践是什么？当然，当基类中的“CanExecute”变得另外依赖AnotherProp属性时，我希望继承的类不应该改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:36:21.500

我已经为WhenAny 编写了扩展类。要让它像 ReactiveUI 中的 WhenAny 一样，还有很多工作要做，但现在对我来说已经足够了。首先看用法：

```
public class A : ReactiveObject
{
    public A()
    {
        //Using almost like WhenAny from ReactiveUI
        CanExecuteObservable = this.WhenAny(() => AProp, CanExecute);
        Command = new ReactiveCommand(CanExecuteObservable);
        Command.Subscribe(x => Execute());
    }

    protected CanExecuteObservable CanExecuteObservable { get; private set; }
    public ReactiveCommand Command { get; private set; }

    protected virtual bool CanExecute()
    {
        return AProp > 10;
    }

    private int aProp = 10;
    public int AProp { get { return aProp; } set { this.RaiseAndSetIfChanged(x => x.AProp, value); } }
}

public class B : A
{
    public B()
    {
        //Add one more property dependency for CanExecute
        CanExecuteObservable.AddProperties(() => BProp);
    }

    private int bProp = 10;
    public int BProp { get { return bProp; } set { this.RaiseAndSetIfChanged(x => x.BProp, value); } }

    protected override bool CanExecute()
    {
        return base.CanExecute() && BProp > 100;
    }
} 
```

执行：

```
public static class WhenAnyExtensions
{
    public static CanExecuteObservable WhenAny(this IReactiveNotifyPropertyChanged obj,
        IEnumerable<Expression<Func<object>>> expressions, Func<bool> func)
    {
        return new CanExecuteObservable(obj, expressions, func);
    }

    public static CanExecuteObservable WhenAny(this IReactiveNotifyPropertyChanged obj, Expression<Func<object>> property1, Func<bool> func)
    {
        return obj.WhenAny(new[] { property1 }, func);
    }

    public static CanExecuteObservable WhenAny(this IReactiveNotifyPropertyChanged obj, Expression<Func<object>> property1, Expression<Func<object>> property2, Func<bool> func)
    {
        return obj.WhenAny(new[] { property1, property2 }, func);
    }

    //etc...
}

public class CanExecuteObservable : IObservable<bool>
{
    internal CanExecuteObservable(IReactiveNotifyPropertyChanged obj,
        IEnumerable<Expression<Func<object>>> expressions, Func<bool> func)
    {
        this.func = func;
        AddProperties(expressions);
        obj
            .Changed
            .Where(oc => propertyNames.Any(propertyName => propertyName == oc.PropertyName))
            .Subscribe(oc => Fire());
    }

    private readonly List<string> propertyNames = new List<string>();
    private readonly Func<bool> func;

    public void AddProperties(IEnumerable<Expression<Func<object>>> expressions)
    {
        foreach (var expression in expressions)
        {
            string propertyName = ReflectionHelper.GetPropertyNameFromExpression(expression);
            propertyNames.Add(propertyName);
        }
    }

    public void AddProperties(Expression<Func<object>> property1) { AddProperties(new[] { property1 }); }
    public void AddProperties(Expression<Func<object>> property1, Expression<Func<object>> property2) { AddProperties(new[] { property1, property2 }); }
    //etc...

    public void Clear()
    {
        propertyNames.Clear();
    }

    private readonly Subject<bool> subject = new Subject<bool>();

    private void Fire()
    {
        subject.OnNext(func());
    }

    public IDisposable Subscribe(IObserver<bool> observer)
    {
        return subject.Subscribe(observer);
    }
} 
```

在这种情况下，用于从表达式中获取属性名称的辅助类是无趣的：

```
public class ReflectionHelper
{
    public static string GetPropertyNameFromExpression<T>(Expression<Func<T>> property) 
    {
        var lambda = (LambdaExpression)property;
        MemberExpression memberExpression;

        if (lambda.Body is UnaryExpression) 
        {
            var unaryExpression = (UnaryExpression)lambda.Body;
            memberExpression = (MemberExpression)unaryExpression.Operand;
        } 
        else 
        {
            memberExpression = (MemberExpression)lambda.Body;
        }
        return memberExpression.Member.Name;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:52:13.310

为什么不在派生构造函数中替换它：

**更新**：这是一个考虑到原始版本的版本

```
public class A
{
    public ReactiveCommand SomeCommand { get; protected set; }

    public A()
    {
        SomeCommand = new ReactiveCommand(this.WhenAny(x => x.SomeProp, ...));
    }
}

public class B : A
{
    public A()
    {
        var newWhenAny = this.WhenAny(x => x.SomeOtherProp, ...);

        var canExecute = SomeCommand == null ?
            newWhenAny :
            SomeCommand.CanExecuteObservable.CombineLatest(newWhenAny,(oldCommand, whenAny) => oldCommand && whenAny);

        SomeCommand = new ReactiveCommand(canExecute);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T06:59:10.837

这正是您在上面想要的。但是要小心穿线。我还没有使它成为线程安全的，用于在组合值时添加和删除消息源。

您可以向集中器对象添加和删除消息源，并且可以观察集中器的真实值。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reactive.Disposables;
using System.Reactive.Subjects;

public class BoolObservableConcentrator : IObservable<bool>
{
    private readonly Dictionary<IObservable<bool>, bool> dict = new Dictionary<IObservable<bool>, bool>();

    public IDisposable Register(IObservable<bool> observable)
    {
        dict.Add(observable, false);
        var d = observable.Subscribe(value =>
        {
            dict[observable] = value;
            Fire();
        });
        return Disposable.Create(() =>
        {
            d.Dispose();
            dict.Remove(observable);
            Fire();
        });
    }

    private readonly Subject<bool> subject = new Subject<bool>();

    private void Fire()
    {
        subject.OnNext(dict.Values.All(x => x));
    }

    public IDisposable Subscribe(IObserver<bool> observer)
    {
        return subject.Subscribe(observer);
    }
} 
```

并对其进行测试：

```
using System;
using System.Reactive.Subjects;
using Microsoft.VisualStudio.TestTools.UnitTesting;

[TestClass]
public class UnitTest
{
    [TestMethod]
    public void TestMethod1()
    {
        var s0 = new BehaviorSubject<bool>(false);
        var s1 = new BehaviorSubject<bool>(false);

        bool l = false;

        var c = new BoolObservableConcetrator();

        var r0 = c.RegisterSource(s0);
        var r1 = c.RegisterSource(s1);

        var s = c.Subscribe(v => l = v);

        Assert.AreEqual(false, l);

        s0.OnNext(true);
        Assert.AreEqual(false, l);

        s1.OnNext(true);
        Assert.AreEqual(true, l);

        s0.OnNext(false);
        Assert.AreEqual(false, l);

        // Removing one of the message sources should update the result
        r0.Dispose();
        Assert.AreEqual(true, l);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T15:36:09.660

我会在我的基类中创建一个注册函数来使用 CombineLatest 注册 observables

```
 property IObservable<bool> CanDo;

    public IObservable<bool> RegisterCanDo( IObservable<bool> toRegister ){
            if ( CanDo == null ){
                    CanDo = toRegister;
            }else{
                    Cando = CanDo.CombineLatest(toRegister, (a,b) => a && b);
            }

    } 
```

所以现在任何你有一个你想要成为你的 CanDo 链的一部分的 observable 的地方你只需用 RegisterCanDo 添加它

```
 public class B : A
    {
        public int Prop2 { get {...} set {...} }

        public B()
        {
            //Senseless code. For explanation only
            IObservable<bool> canDeleteExecute = this.WhenAny(vm => vm.Prop1, vm => vm.Prop2, (p1, p2) => CanDoSomething());
            RegisterCanDo(canDeleteExecute);
        }
    } 
```

# python - Mercurial 和 python 2.6

> ID：13140539
> 
> 赞同：0
> 
> 时间：2012-10-30T13:54:59.900
> 
> 标签：python, mercurial, centos

我尝试使用“yum install mercurial”在centos vps-server上安装mercurial，但它说它需要python2.4才能安装它。我安装了python2.6。有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:27:50.257

你不应该弄乱你的系统 Python —— 难以置信你仍然可以登录。Python 2.4 是古老的，但它是在很多 CentOS 版本中使用的 - 由它的包管理安装的。也许你已经安装了一个“元包”，它将系统 Python 升级到 2.6，以及依赖它的所有东西（包括 yum）。

无论如何，2.4 对于安装 mercurial 来说是次优的。由于您的系统已经一团糟，您可以简单地将 mercurial 安装到您的系统 Python 中，而不是尝试使用 yum。

“sudo easy_install mercurial”——如果您没有 easy_install，请先尝试“yum install setuptools”。如果这不起作用，请在 pipy.python.org 上搜索 setuptools，手动安装 - 并认真考虑重建这台机器 - 你将不得不尽快完成。

# php - 如果在错误的“if”语句中，是否必须下载 php 包含？

> ID：13140541
> 
> 赞同：-8
> 
> 时间：2012-10-30T13:55:09.383
> 
> 标签：php, if-statement, include

我想知道我是否在 if 语句中包含一个 .php 文件（或任何文件），如下所示：

```
<?php
    $a = 1;
    if($a == 0) include 'somefile.php';
?> 
```

既然那将是错误的，那么 somefile.php 会完全由浏览器加载还是不会被加载，从而导致客户端必须下载的数据量较少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:56:45.173

First of all its not loaded by the browser but by php on the server. And no it will not be loaded when the condition is false.

As Jasper pointed out: Whatever you include in a php script has very little to do with how much is sent to the browser. Php interprets the code and creates html that is sent to the user's browser. You could have a 1000000 lines of codes file that just echoes "1" and the browser would get only a couple of kb of data. Even if 100 megs of php where processed.

It is pretty easy to test. Create a dummy.php file containing:

```
<?php echo 'hello world'; 
```

To test this:

```
if(true){ include("dummy.php");} //will echo hello world
if(false){ include("dummy.php");} //will not echo hello world 
```

To test it try it with passing true and the false to the if and you will see two different results.

Then include this file in an if statemant and see if it echoes hello world.

# iphone - 如何通过图像视图上的触摸事件进入详细视图？

> ID：13140544
> 
> 赞同：0
> 
> 时间：2012-10-30T13:55:15.740
> 
> 标签：iphone, objective-c, ios

我创建了一个照片幻灯片应用程序，其中数组中的图像显示在滚动视图中。我已经向它添加了触摸事件。触摸它应该是 UIimageView 上触摸图像的详细视图但我没有通过鼠标单击得到它（我在模拟器上运行它），但我通过 alt+鼠标单击得到它- 那时有两个点就像放大地图我知道那是正确的方法，那么我如何通过单击鼠标获得正确的触摸？

添加代码

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    scrollView.delegate = self;
    scrollView.scrollEnabled = YES;
    int scrollWidth = 120;
    scrollView.contentSize = CGSizeMake(scrollWidth,80);

    int xOffset = 0;
    imageView.image = [UIImage imageNamed:[imagesName objectAtIndex:0]];

    for(int index=0; index < [imagesName count]; index++)
    {
        UIImageView *img = [[UIImageView alloc] init];
        img.bounds = CGRectMake(10, 10, 50, 50);
        img.frame = CGRectMake(5+xOffset, 0, 160, 110);
        NSLog(@"image: %@",[imagesName objectAtIndex:index]);
        img.image = [UIImage imageNamed:[imagesName objectAtIndex:index]];
        [images insertObject:img atIndex:index];

        scrollView.contentSize = CGSizeMake(scrollWidth+xOffset,110);
        [scrollView addSubview:[images objectAtIndex:index]];

        xOffset += 170;
    }
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
     [self.nextResponder touchesBegan:touches withEvent:event];

     UITouch * touch = [[event allTouches] anyObject];

     for(int index=0;index<[images count];index++)
     {
         UIImageView *imgView = [images objectAtIndex:index];

         NSLog(@"x=%f,y=%f,width=%f,height=%f",     
  imgView.frame.origin.x,imgView.frame.origin.y,
  imgView.frame.size.width,imgView.frame.size.height);
  NSLog(@"x= %f,y=%f",[touch locationInView:self.view].x,[touch      
  locationInView:self.view].y) ;

         if(CGRectContainsPoint([imgView frame], [touch locationInView:scrollView]))
         {
             [self ShowDetailView:imgView];
             break;
         }
    }
}

-(void)ShowDetailView:(UIImageView *)imgView
{
    imageView.image = imgView.image;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:09:47.173

`touchesBegan:`我**强烈**建议您不要在方法中自己执行所有命中测试，而是使用`UITapGestureRecognizer`. 像这样修改你的代码：

```
- (void)viewDidLoad
{
    //...

    for(int index=0; index < [imagesName count]; index++)
    {
        UIImageView *img = [[UIImageView alloc] init];
        img.bounds = CGRectMake(10, 10, 50, 50);
        img.frame = CGRectMake(5+xOffset, 0, 160, 110);
        NSLog(@"image: %@",[imagesName objectAtIndex:index]);
        img.image = [UIImage imageNamed:[imagesName objectAtIndex:index]];
        [images insertObject:img atIndex:index];

        UITapGestureRecognizer *tapGR = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)]

        [img addGestureRecognizer:tapGR];
        img.userInteractionEnabled = YES;

        /...

    }
}

- (void)handleTap:(UIGestureRecognizer *)sender
{
     UIImageView *iv = sender.view;
     [self ShowDetailView:iv];
} 
```

# sql - 如何在 Sql Server 的 SELECT CASE 子句中使用 COUNT() 进行比较？

> ID：13140545
> 
> 赞同：9
> 
> 时间：2012-10-30T13:55:20.773
> 
> 标签：sql, sql-server, count, aggregate-functions, select-case

假设您想按照以下方式做一些事情：

```
SELECT CASE 
    WHEN (SELECT COUNT(id) FROM table WHERE column2 = 4) > 0
    THEN 1 ELSE 0 END 
```

基本上只在表中有一行或多行时返回 1，否则返回 0。必须有一个语法正确的方法来做到这一点。可能是什么？谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-30T13:57:08.577

问题：*当表中有一行或多行时返回 1，否则返回 0*：

在这种情况下，不需要`COUNT`. 取而代之的是 use `EXISTS`，它不是计算所有记录，而是在找到**任何**记录后立即返回，它的性能要好得多：

```
SELECT CASE 
    WHEN EXISTS (SELECT 1 FROM table WHERE column2 = 4)    
        THEN 1  
    ELSE 0 
END 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:04:37.743

Mahmoud Gammal 以一种有趣的方式发布了答案。不幸的是，答案被删除了，因为它返回了记录数而不是`1`. 这可以使用[函数来修复](http://msdn.microsoft.com/en-us/library/ms188420.aspx)[，`sign`](http://msdn.microsoft.com/en-us/library/ms188420.aspx)从而得到更紧凑的解决方案：

```
SELECT sign(count(*)) FROM table WHERE column2 = 4 
```

我发布这个是因为我发现它是一种有趣的方法。在生产中，我通常会得到接近 RedFilter 的答案。

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2012-10-30T13:59:40.630

你可以这样做：

```
SELECT CASE WHEN COUNT(ID) >=1 THEN 1 WHEN COUNT (ID) <1 THEN 0 END FROM table WHERE Column2=4 
```

参考：http: [//msdn.microsoft.com/en-us/library/ms181765.aspx](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

# grails - Grails 和 Spring Security UI - 没有下拉菜单

> ID：13140549
> 
> 赞同：1
> 
> 时间：2012-10-30T13:55:35.497
> 
> 标签：grails, configuration, spring-security

我遇到了 grails spring-security-ui 插件的问题。我按照文档（http://grails.org/plugin/spring-security-ui）中的所有说明进行操作，但无法获得可见的下拉菜单并无法登录管理控制台。

[链接到示例屏幕](http://postimage.org/image/9eidwyuc9/)

我是 Grails 和 Groovy 的新手，所以如果答案很简单，请不要大喊大叫 :)

任何帮助将不胜感激！

我的应用程序的一些配置：

**Grails**：2.1.1
**已安装模块**：日志记录 - 2.1.1
核心 - 2.1.1
i18n - 2.1.1数据源
- 2.1.1
编解码器 - 2.1.1
servlet - 2.1.1
groovyPages - 2.1.1
资源 - 1.1.6
springSecurityUi - 0.2
jquery - 1.8.0
databaseMigration - 1.1
mail - 1.0
famfamfam - 1.0.1
tomcat - 2.1.1
webxml - 1.4.1
urlMappings - 2.1.1
控制器 - 2.1.1
domainClass - 2.1.1
jqueryUi - 1.8.15
hibernate - 2.1 .1
mimeTypes - 2.1.1
服务 - 2.1.1
转换器 - 2.1.1
验证 - 2.1.1
过滤器 - 2.1.1
脚手架 - 2.1.1
springSecurityCore - 1.2.7.3
缓存 - 1.0.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T22:56:22.180

必须升级到 jQuery UI 的 1.8.24 版本。

# java - java - 如何从java中的html获取特定值？

> ID：13140552
> 
> 赞同：5
> 
> 时间：2012-10-30T13:55:39.430
> 
> 标签：java, html, extract

我正在开发一个显示黄金价格并为此创建图表的应用程序。
我发现一个[网站](http://www.todaysgoldrate.co.in/todays-gold-rate-in-pune/)定期为我提供这个黄金价格。我的问题是如何从 html 页面中提取这个特定值。
这是我需要提取的链接= [http://www.todaysgoldrate.co.in/todays-gold-rate-in-pune/](http://www.todaysgoldrate.co.in/todays-gold-rate-in-pune/)，这个html页面有以下标签和内容。

```
<p><em>10 gram gold Rate in pune = Rs.31150.00</em></p> 
```

这是我用于提取的代码，但我没有找到提取特定内容的方法。

```
public class URLExtractor {

private static class HTMLPaserCallBack extends HTMLEditorKit.ParserCallback {

    private Set<String> urls;

    public HTMLPaserCallBack() {
        urls = new LinkedHashSet<String>();
    }

    public Set<String> getUrls() {
        return urls;
    }

    @Override
    public void handleSimpleTag(Tag t, MutableAttributeSet a, int pos) {
        handleTag(t, a, pos);
    }

    @Override
    public void handleStartTag(Tag t, MutableAttributeSet a, int pos) {
        handleTag(t, a, pos);
    }

    private void handleTag(Tag t, MutableAttributeSet a, int pos) {
        if (t == Tag.A) {
            Object href = a.getAttribute(HTML.Attribute.HREF);
            if (href != null) {
                String url = href.toString();
                if (!urls.contains(url)) {
                    urls.add(url);
                }
            }
        }
    }
}

public static void main(String[] args) throws IOException {
    InputStream is = null;
    try {
        String u = "http://www.todaysgoldrate.co.in/todays-gold-rate-in-pune/";   
        //Here i need to extract this content by tag wise or content wise.... 
```

提前致谢.......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:35:15.750

您可以使用库之类的`Jsoup`

你可以从这里得到它 -->[下载 Jsoup](http://jsoup.org/download)

这是它的 API 参考 --> [Jsoup API 参考](http://jsoup.org/apidocs/)

使用 Jsoup 解析 HTML 内容真的很容易。

下面是一个示例代码，可能对您有帮助..

```
public class GetPTags {

           public static void main(String[] args){

             Document doc =  Jsoup.parse(readURL("http://www.todaysgoldrate.co.intodays-gold-rate-in-pune/"));
             Elements p_tags = doc.select("p");
             for(Element p : p_tags)
             {
                 System.out.println("P tag is "+p.text());
             }

            }

        public static String readURL(String url) {

        String fileContents = "";
        String currentLine = "";

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(new URL(url).openStream()));
            fileContents = reader.readLine();
            while (currentLine != null) {
                currentLine = reader.readLine();
                fileContents += "\n" + currentLine;
            }
            reader.close();
            reader = null;
        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e.getMessage(), "Error Message", JOptionPane.OK_OPTION);
            e.printStackTrace();

        }

        return fileContents;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:24:23.610

[http://java-source.net/open-source/crawlers](http://java-source.net/open-source/crawlers)

您可以使用其中的任何 api，但不要使用纯 JDK 解析 HTML，因为这太痛苦了。

# python - 从 Jamfile 调用 python 脚本

> ID：13140556
> 
> 赞同：3
> 
> 时间：2012-10-30T13:55:48.637
> 
> 标签：python, jam

我想从 Jamfile 调用 python 脚本来生成必要的源文件。

在 Makefile 中，它看起来有点像这样：

```
sourcefile.c:
    python script.py 
```

在 Jamfile 中存档此类内容的最优雅方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:33:21.147

果酱等价物是这样的：

```
actions CallScript
{
    python script.py
}

CallScript sourcefile.c ; 
```

根据您的应用程序的上下文，您可能需要做更多的事情。例如，如果脚本生成源文件并且您想要编译生成的源文件，则解决方案可能如下所示：

```
rule GenerateSource
{
    local source = [ FGristFiles $(1) ] ;
    MakeLocate $(source) : $(LOCATE_SOURCE) ;
    Clean clean : $(source) ;
    GenerateSource1 $(source) ;
}

actions GenerateSource1
{
    python script.py $(1)
}

GenerateSource sourcefile.c ;

Main foo : sourcefile.c ; 
```

# jquery - jQuery动画故障外部CSS

> ID：13140563
> 
> 赞同：1
> 
> 时间：2012-10-30T13:56:00.883
> 
> 标签：jquery, css, jquery-animate, external

我正在尝试使用 jQuery 通过单击菜单按钮来为整页（html）背景设置动画。我在 W3school TryIt Editor 中创建了一个小型试用版，并且成功了。但是，当我想在自己的网站上使用它时，它不起作用（并且 jQuery 通常停止工作 - 警报也不再显示）。有没有人可以帮助我解决这个问题？

这是 Firebug 给我的错误：

```
SyntaxError: missing ) after argument list
[Break On This Error]   

$('.html').animate(left:'0px')

script.js?mcplzp (line 32, col 35) 
```

这是我的实际 JS 代码：

```
$('.html').animate(left:'0px'

    (function ($, Drupal) {
        $("<link/>", {
       rel: "stylesheet",
       type: "text/css",
       href: "../css/pages.css"
    }).appendTo("head");

    if (jQuery) {  
        alert('jQuery is loaded!');  
        };

    $(document).ready(function()
    {
        $('.menu-704').click(function() 
            {
                $('.html').animate(left:'0px'
            });
    });

    $(document).ready(function()
    {
        $('.menu-797').click(function() 
            {
                $('.html').animate(left:'=+1250px'
            });
    });

    $(document).ready(function()
    {
        $('.menu-359').click(function() 
            {
                $('.html').animate(left:'=+1250px'
            });
    });

    $(document).ready(function()
    {
        $('.menu-796').click(function() 
            {
                $('.html').animate(left:'=+1250px'
            });
    });

    })(jQuery, Drupal); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:27:08.370

您可能想尝试以下，我已经测试过，它似乎工作。

1）你的动画方法应该这样调用：

```
$('.html').animate({left:'+=1250px'}) 
```

不像这样：

```
$('.html').animate(left:'=+1250px') 
```

您传递的 CSS 属性和值（在本例中为“左”定位）应包含在括号 {} 符号中。

2）尝试更换：

```
=+ 
```

和：

```
+= 
```

3) 如果您的目标是**html**元素，您可能不想在元素本身上使用“html”类。由于每个文档只有一个**html**元素，请尝试这样做：

```
$('html').click(etc... 
```

4) 如果您实施 1 - 3 中概述的更改，这应该可以解决您的问题。但是，一旦解决，您可能需要稍微清理一下代码，这肯定有助于下次调试问题。你只需要一个 $(document).ready(function(){}); 您将在其中设置所有 $('foo').click() 事件侦听器内容。

**所以代替这个：**

```
$(document).ready(function()
{
    $('.menu-797').click(function() 
    {
        $('.html').animate({left:'+=1250px'});
    });
});

$(document).ready(function()
{
    $('.menu-359').click(function() 
    {
        $('.html').animate({left:'+=1250px'});
    });
});

$(document).ready(function()
{
    $('.menu-796').click(function() 
    {
        $('.html').animate({left:'+=1250px'});
    });
}); 
```

**简化为：**

```
$(document).ready(function()
{
    $('.menu-797,.menu-359,.menu-796').click(function() 
    {
        $('.html').animate({left:'+=1250px'});
    });
}); 
```

# java - 从一个附加程序而不是另一个附加程序过滤记录器

> ID：13140565
> 
> 赞同：2
> 
> 时间：2012-10-30T13:56:05.813
> 
> 标签：java, logging, log4j, appender

我的日志记录配置中有两个`appenders`。`ERROR`其中之一发送有关事件的电子邮件。

我无法控制的一类垃圾`ERROR`邮件。所以我仍然希望有这些消息，但两者都没有`appenders`。

这是关于我的文件（简化为此处相关的内容，afaics）：

```
<appender name="Logfile">...</appender>
<appender name="sendMailOnError">...</appender>

<logger name="spammingClass">
    <level value="info"/>
</logger>

<root>
   <level value="debug"/>
   <appender-ref ref="Logfile"/>
   <appender-ref ref="sendMailOnError"/>
</root> 
```

所以，我的猜测是我可以在 sendMailOnError 中以某种方式排除 spammingClass 但我不知道如何。

顺便提一句。我使用 Java，但我不想为此编写自己的 Filter 类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:07:28.517

是的，通过为 指定附加程序`spammingClass`并将可加性设置为`false`：

```
<logger name="spammingClass" additivity="false">
    <level value="info"/>
    <appender-ref ref="Logfile"/>
</logger> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T14:08:33.920

您可以使用可加性，在您的示例中将 spammingClass 记录器更改为：

```
<logger name="spammingClass" additivity="false">
    <level value="info"/>
</logger> 
```

它会成功的。

# javascript - 无法在 Internet Explorer 中显示这个简单的 .hide() 代码

> ID：13140566
> 
> 赞同：1
> 
> 时间：2012-10-30T13:56:07.623
> 
> 标签：javascript, jquery, html

我一直在页面上尝试这段代码，它在 Chrome 和 Firefox 中运行良好。

但不是在 Internet Explorer 中，只会显示 if 条件中的警报功能。

```
$('#element-14').change(
 function(){
  $('.late').hide();
  $('.normal').hide();
  var tempDate= new Date();
  var dateViolatetmp = $('#element-14').val();
  var dateViolatearr = dateViolatetmp.split('/');
  var dateViolate= new Date(dateViolatearr[2],(parseInt(dateViolatearr[0],10)-1).toString(),dateViolatearr[1]);
  var one_day=1000*60*60*24;
  var tempDate_unixtime =tempDate.getTime() ;
  var dateViolate_unixtime =dateViolate.getTime();
  var dayDifference = Math.round((tempDate_unixtime/one_day)) - Math.round((dateViolate_unixtime/one_day));
  if(dayDifference<=30){    
    $('.normal').show();
    alert("ok1");
  }
  else{
    $('.late').show();
    alert("ok2");
  }
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:03:16.667

您是否使用此代码在控制台中看到了预期的所有值？我写`if(console)`条件的原因是因为我不确定它是否存在于 IE 中（否则不会让我感到惊讶（！）而且我没有安装它）。

```
$('#element-14').change(function() {
    if (console) console.log('#element-14 changed.');
    $('.late, .normal').hide();
    var arr = $('#element-14').val().split('/');
    if (console) {
        console.log('val:',$('#element-14').val());
        console.log('arr:',arr);
    }
    var dateV = new Date(parseInt(arr[2]), parseInt(arr[0])-1, arr[1]);
    if (console) console.log('dateV:',dateV);
    var one_day = 1000*60*60*24;
    var now = new Date();
    if (console) console.log('now:',now);
    var dayDiff = Math.round((now.getTime()-dateV.getTime()) / one_day);
    if (console) console.log('dayDiff:',dayDiff);
    $(dayDiff <= 30 ? '.normal' : '.late').show();
}); 
```

# ruby-on-rails - RAIL 应用程序上 /tmp/cache/assets 的权限

> ID：13140567
> 
> 赞同：5
> 
> 时间：2012-10-30T13:56:08.573
> 
> 标签：ruby-on-rails, permissions, assets, tmp

我有权限问题。在我的 rails 应用程序上使用 wickedpdf 进行打印，它会在 dir 中生成 tmp assets 文件`/tmp/cache/assets`。它写入的文件，就像这个文件一样`sprockets%2F2c9f9e326ac1c7cd3f07a1a3c9051874`，`owner="nobody"`因此`permissions="rw--------"`资产 wickedpdf 在打印时会出错。

可以用一个简单的方法来纠正这个问题，`chmod -R 777 /tmp`但我不能每次资产在`/tmp`没有权限的情况下生成一个新的子目录时都这样做。是否可以永久设置 tmp 目录及其子目录和具有所有权限的文件，也可以设置我的资产将来生成的新文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T15:55:50.060

您可以更改 temp/ 目录中所有文件和子目录的权限，

比如：chmod -R 777 /tmp/*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-02T08:32:46.960

如果您经常使用 puma 或 rails，可能会出现缓存问题。

`> puma`从切换到`> rails s`启动rails应用程序时，我遇到了同样的问题。

解决方案：您可以在 tmp/cache/ 路径中手动删除资产缓存

# javascript - 如何阻止for循环中的变量在JavaScript中通过引用传递

> ID：13140571
> 
> 赞同：1
> 
> 时间：2012-10-30T13:56:34.083
> 
> 标签：javascript

我正在分配包含链接在页面上的数字的 onclicks。这是我的代码：

```
var aTags = document.getElementsByTagName("a");

for (var t = 0; t < aTags.length; t++){

    var aTag = aTags[t];

    aTag.onclick = function(){setSubMenu(t);};

}

function setSubMenu(t){

    console.log("t: " + t);
    //The issue is t is always evaluating to the length of aTags
    //instead of the current tag. 

} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:59:06.030

将其包装在一个自动执行的闭包中：

```
for (var t = 0; t < aTags.length; t++)(function(t) {

    var aTag = aTags[t];

    aTag.onclick = function() { setSubMenu(t); };

})(t); 
```

# iphone - ios，代码重用问题，重用 viewController？

> ID：13140574
> 
> 赞同：1
> 
> 时间：2012-10-30T13:56:42.537
> 
> 标签：iphone, ios, model-view-controller, controller

我有一个视图控制器（A），它显示了从服务器下载的项目列表。

我有另一个带有分段控制的视图控制器（B）。
When second index of segmentedControl is selected, the view controller(B) shows a list of items in the same format as in the controller(A).
When first index of segmentedControl is selected, the view controller(B) shows the items in different format.

我希望 A 和 B 共享共同内容的代码。

我首先认为可以将所有与视图相关的代码移动到“common_view 类”并使用两个控制器中的视图类。
但是，事实证明有些代码与视图无关（例如从服务器下载东西，这是 mvc 模式的控制器部分）。

现在我很困惑，“共享控制器部分代码是个好主意吗？甚至可能吗？”

我可以将公共代码分解为 commonViewController，并从控制器（A）和控制器（B）实例化它，并将 commonViewController.view 添加为子视图。
但这真的可取吗？或者你有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:06:31.140

是的，当然..你可以。在这种情况下使用两个 NIBS。第一个 NIB 将由 ViewController A 和 ViewController B 的第一段使用。在 ViewController B 中选择第二段时 addSubView 的 viewControllerA 的 initsWithSecondNiB 名称。一旦你添加了它们, 在 vi​​ewcontrollerB 的两个段之间切换时通过显示/隐藏来控制它们的可见性

# mysql - MySQL 更新查询不起作用 #1064

> ID：13140582
> 
> 赞同：0
> 
> 时间：2012-10-30T13:56:56.983
> 
> 标签：mysql, sql, phpmyadmin, sql-update

谁能告诉我这个查询有什么问题？

```
UPDATE
    violetta.navi__stop
SET
    violetta.navi__stop.endHour = VB.endHour
FROM
    violetta.navi__stop AS V
INNER JOIN
    violetta_back.navi__stop AS VB
ON V.code = VB.code 
```

此代码示例适用于我的数据库：

```
SELECT
V.code, V.endHour
FROM
    violetta.navi__stop AS V
UNIQUE
    violetta_back.navi__stop AS VB
ON V.code = VB.code 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:01:33.367

试试这个：

```
UPDATE
    violetta.navi__stop v
INNER JOIN
    violetta_back.navi__stop AS VB
ON V.code = VB.code
SET
    v.endHour = VB.endHour 
```

# cakephp - 在 CakePHP 2.2 中为模型和控制器定义全局变量

> ID：13140588
> 
> 赞同：1
> 
> 时间：2012-10-30T13:57:13.533
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

目前我正在使用这样的东西：

```
//at bootstrap.php file
Configure::write('from', 'mymail@mydomain.com')

//at controllers or models files
$var = Configure::read('from') 
```

问题是，我想通过数据库管理该变量，以便能够以更简单的方式对其进行修改。

我正在考虑这样做，`AppModel`但它只能用于模型而不是控制器。

在这种情况下我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:09:48.733

您可以创建一个单独的模型/插件，该模型/插件将映射到数据库中的配置表。然后通过控制器和模型的`$uses`语句加载它。`App::import()`

```
class SystemSetting extends AppModel {

/**
 * Return a list of all settings
 *
 * @access public
 * @return array
 */
    public function getSettings() {        
        return $this->find('all');
    }
} 
```

然后，在您的控制器中：

```
class SomeController extends AppController {

    var $uses = array('SystemSetting');

    public function displaySettings() {
        $settings = $this->SystemSetting->getSettings();
        // .. your code
    }
} 
```

在模型中：

```
App::import('Model', 'SystemSettings.SystemSetting');
$settings = new SystemSetting();
$mySettings = $settings->getSettings(); 
```

这工作得很好。当然，您也可以在两者中加载设置`AppController`并`AppModel`遵循[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:08:41.370

1.  在您的 AppModel 中创建 getSettings
2.  在 AppController 你可以写这个方法：

    ```
    public function getSettings() {
        return $this->{$this->modelClass}->getSettings();
    } 
    ```

这样，getSettings() 方法可用于任何模型和任何控制器

任何模型调用：

```
$mysettings = $this->getSettings(); 
```

任何控制器调用：

```
$mysettings = $this->MODELNAME->getSettings(); 
```

# authentication - kohana Auth with automodeler ORM

> ID：13140592
> 
> 赞同：0
> 
> 时间：2012-10-30T13:57:24.513
> 
> 标签：authentication, kohana, kohana-orm, kohana-3.2, kohana-auth

这里是 kohana 的新手。我的实习任务是使用 kohana framework 3.2 制作登录系统。我还使用自动建模器 ORM 插入、更新和删除内容。我现在在使用 kohana auth 时遇到了一些麻烦。我已经导入了数据库结构，并在“用户”表中插入了一个用户，并在“roles_user”表中为他提供了一个角色。

还在 APP/config/ 中创建了一个 Auth.php 文件：

```
return array(

    'driver'       => 'AutoModeler_ORM',
    'hash_method'  => 'sha256',
    'hash_key'     => 'Somebiglonghaskeyofmixedcharacters102345567709',
    'lifetime'     => 1209600,
    'session_type' => Session::$default,
    'session_key'  => 'auth_user',
); 
```

在我的控制器中，我有一个登录功能，代码如下：

```
if ($_POST)
{
$post = $this->request->post();
$success = Auth::instance()->login($post['email'], $post['password']);

if ($success)
{
echo "Welcome!";
}
else
{
echo "Something goes wrong...";
}

} 
```

我已经激活了引导程序中的模块。

pastebin 链接到我的角色模型：[http](http://pastebin.com/bQYReETh) : //pastebin.com/bQYReETh pastebin 链接到我的用户模型： http: [//pastebin.com/ufzvKjmA](http://pastebin.com/ufzvKjmA)

问题是我总是进来。

有人知道发生了什么吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:12:31.040

@伍德，

也许添加 _constructor 会有所帮助。

```
public function __construct($id = NULL)
    {
        if ($id !== NULL)
        {
            $this->load(db::select_array($this->fields())->where($this->_table_name.'.username', '=', $id));
        }
        elseif ($this->id) // We loaded this via mysql_result_object
        {
            parent::__construct($id);
        }
    } 
```

# ruby-on-rails - 如何跳过rails中某些页面的content_for标签内容？

> ID：13140596
> 
> 赞同：0
> 
> 时间：2012-10-30T13:57:39.387
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, views, content-for

我有一个布局，我在其中使用 content_for 标记来呈现一些部分（用于侧边栏）。但是在几个页面上我不需要这个侧边栏。所以问题是：我怎样才能告诉rails不要为某些页面渲染任何东西？

我试图通过以下方式做到这一点，但没有任何结果：

```
<% content_for :sidebar do %>
  <%= render nothing: true %>
<% end %> 
```

刚刚报错

```
You invoked render but did not give any of :partial, :template, :inline, :file or :text option. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:02:13.190

不要在不想看到内容的视图中指定 content_for

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:04:23.343

```
 <%= render text: "&nbsp;" %> 
```

# ruby-on-rails - 关联不会保存在 before_validation 中

> ID：13140604
> 
> 赞同：0
> 
> 时间：2012-10-30T13:58:02.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在尝试使用 before_validation 回调来调整记录的子对象的数量，但由于某种原因，它没有按我期望的方式工作。

LineItem 类：

```
 before_validation :adjust_enrollment_count

 def adjust_enrollment_count
    if enrollments.size < quantity 
      (enrollments.size+1..quantity).each do |li|
        self.enrollments.build(variant: self.variant)
      end
      #self.save
    elsif enrollments.size > quantity
      enrollments.delete_if do |e| 
        enrollments.size > quantity
      end
    end
  end 
```

发生的情况是它创建了正确数量的 Enrollment 对象作为 LineItem 的子项，但 Variant 被设置为 nil（即使 LineItem 定义了一个变体）。

我尝试过的事情：

*   显式保存 line_item 或注册
*   “窥探”回调并手动运行代码（这实际上按我预期的方式工作！）
*   验证“self”指的是 LineItem 而不是闭包

我缺少关于回调生命周期的某些内容吗？随着 LineItem 数量的变化，是否有更好的方法来调整 Enrollment 对象的数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:39:29.003

可能`variant`不是`Enrollment`该类的可访问字段。试试这种方式（也缩短）

```
def adjust_enrollment_count
  while enrollments.size < quantity 
    self.enrollments.build(variant_id: self.variant) # note: variant_id
  end
  while enrollments.size > quantity
    enrollments.pop # or .shift to delete from the head of the list
  end
  # don't save in a lifecycle callback, or you'll get in an awful loop
end 
```

**编辑：不同的看法**

```
def add_enrollment
  enrollments.build(variant_id: variant)
end

def adjust_enrollment_count
  enrollments.slice!(quantity, enrollments.size)
  add_enrollment while enrollments.length < quantity
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:56:05.090

事实证明，这个问题是我没有在我的问题中概述的。我已经定义了以下内容：

```
class Enrollment < ActiveRecord::Base
  belongs_to :line_item

  attr_accessible :variant
  attr_accessor   :variant
end 
```

我认为 attr_accessor 正在创建一个名为 variant 的内存变量，该变量仅在页面加载时持续。我删除了它，它似乎解决了问题。

# r - 更改复合图例标题

> ID：13140606
> 
> 赞同：3
> 
> 时间：2012-10-30T13:58:03.780
> 
> 标签：r, ggplot2

如果我有以下数据并使用它绘制它，`ggplot2`我会得到：

```
a  <-c(0.3,0.3,0.3,0.3,0.3)
b  <-c(1:5,0.9,0.9,0.9,0.9,0.9)
c  <-c(1:5,0.5,0.5,0.5,0.5,0.5)
z  <-rep(1:5,5)
df <- data.frame(y=c(a,b,c),x=c(z),line=c(rep("1",5),
rep("2",5),rep("3",5),rep("2",5),rep("3",5)))

library(ggplot2)

a <- ggplot(df,aes(x=x,y=y,fill=line,shape=line,group=line)) +       
          geom_line(aes(linetype=line),size=1) +            
     scale_linetype_manual(values=c("dashed","solid", "dotdash")) +
          geom_point(size=3) + scale_shape_manual(values=c(25,23,21,25,23)) +    
     scale_fill_manual(values=c("red", "blue", "yellow","red", "blue")) 
```

如果我想指定图例的标题，我可以做很多事情，比如

```
a + labs(shape = "MY TITLE HERE")   # or

a <- ggplot(df,aes(x=x,y=y,fill=line,shape=line,group=line)) +       
          geom_line(aes(linetype=line),size=1) +            
     scale_linetype_manual(values=c("dashed","solid", "dotdash")) +
          geom_point(size=3) + scale_shape_manual(values=c(25,23,21,25,23),name="MY 
          TITLE HERE") +    
     scale_fill_manual(values=c("red", "blue", "yellow","red", "blue")) 
```

![在此处输入图像描述](../Images/83f2526d539bee60170a702314a1bc6d.png)

但是，所有这些选项都将复合图例分解为它们单独的映射参数。

如何使用 和更改图例标题来维护`linetype`复合图例`shape`？`fill`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T14:13:34.403

在`ggplot2`所有尺度中具有相同标签的都会被组合在一起，所以你需要这样做：

1.  （可选）使用您的标签创建一个变量，例如`scale_label`
2.  将相同的标签作为第一个参数传递给每个比例。

例如：

```
scale_label <- "My custom title"

a <- ggplot(df,aes(x=x,y=y,fill=line,shape=line,group=line)) +       
    geom_line(aes(linetype=line),size=1) +            
    scale_linetype_manual(scale_label, values=c("dashed","solid", "dotdash")) +
    geom_point(size=3) + 
    scale_shape_manual(scale_label, values=c(25,23,21,25,23)) +    
    scale_fill_manual(scale_label, values=c("red", "blue", "yellow","red", "blue")) 
    #scale_shape("Title")
print(a) 
```

![在此处输入图像描述](../Images/2672634f2396ff8bd97195f20db0236a.png)

# c# - 如何在 WPF/MVVM 模式中包含 Listener 类型类？

> ID：13140607
> 
> 赞同：0
> 
> 时间：2012-10-30T13:58:05.280
> 
> 标签：c#, wpf, mvvm

想象一下，您有一个 Listener 类，它将在应用程序启动时使用 Connect 方法连接到某个服务器，然后它开始收听消息，并在收到的每条消息上引发事件 OnRecievedMessage。根据这些消息，您需要更新视图模型，进而更新视图。更重要的是，您必须在新线程上运行 Listen() 方法才能不阻塞 UI，因此事件 OnRecievedMessage 也将在这个新线程上运行。

你将如何将这样的类合并到 WPF/MVVM 应用程序的结构中，以及如何将它与 viewmodel 连接起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:26:20.820

在这种情况下，我不会使用事件 - 我会公开`IObservable<T>` 因为 IObservable 将是一个对象，并且可以轻松地传递给/从您获得的函数中返回：

*   轻松地将其注入您的 Viewmodel
*   过滤/映射并分派到 UI 线程
*   更轻松地解开处理程序（Dispose 与“-=”）

所以不要传递你的“监听器”类——传递你在那里实现/公开的 IObservable！

确保查看[Rx-Framework](http://msdn.microsoft.com/en-us/data/gg577609.aspx)

# google-app-engine - Google App Engine 是否支持 xlrd？

> ID：13140613
> 
> 赞同：0
> 
> 时间：2012-10-30T13:58:23.750
> 
> 标签：google-app-engine

我在 Google Groups 和这里看到过在 Google App Engine 中使用 xlrd 的帖子：

[如何在 Appengine 上使用 xlrd 读取 excel 文件](https://stackoverflow.com/questions/10458388/how-do-you-read-excel-files-with-xlrd-on-appengine)

[https://groups.google.com/forum/?fromgroups=#!searchin/google-appengine-python/xlrd/google-appengine-python/lMix6vXhvtA/O_ExzkGhsKEJ](https://groups.google.com/forum/?fromgroups=#!searchin/google-appengine-python/xlrd/google-appengine-python/lMix6vXhvtA/O_ExzkGhsKEJ)

但是当我尝试将它添加到 app.yaml 文件时，它显示“不支持库 xlrd”。此外，在 3rd 方库列表中，我没有看到 xlrd。

[https://developers.google.com/appengine/docs/python/tools/libraries27](https://developers.google.com/appengine/docs/python/tools/libraries27)

但是其他人似乎在GAE上使用它，那么GAE是否支持它？在过去，我能够成功导入 numpy。这是 app.yaml。在 main.py 我有“import xlrd”。非常感谢你。

```
application: uploadsample
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1" 
- name: xlrd
  version: "0.7.3" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:00:30.167

你可以在你的应用程序中包含任何你想要的纯 python 第三方库。您没有在 app.yaml 中指定它们，这仅适用于 Google 在服务器上包含的第三方库。

xlrd 本身不受“支持”，但它应该可以工作。

# scala - 将 List[(List[Char, Int], String)] 分组到 List[(List[(Char, Int)], List[String])]

> ID：13140615
> 
> 赞同：0
> 
> 时间：2012-10-30T13:58:27.090
> 
> 标签：scala

我有一个`List[(List[(Char,Int)],String)]`这样的

```
val words = List((List(('a',1),('e',1),('t',1)),"ate"),
                 (List(('a',1),('e',1),('t',1)),"eat"),
                 (List(('a',1),('e',1),('t',1)),"tea")) 
```

它表示每个单词中每个字符的出现次数。

现在我想按出现次数对这个列表进行分组，以生成一个包含这样一个项目的列表

```
val grouped = List((List(('a',1),('e',1),('t',1)),(List("ate","eat","tea")))) 
```

我试过`words groupBy(i => i._1)`了，但它的输出是

```
(List((a,1), (e,1), (t,1)),List((List((a,1), (e,1), (t,1)),ate), (List((a,1), (e,1), (t,1)),eat), (List((a,1), (e,1), (t,1)),tea))) 
```

**注意**：我不想使用`for expression`nor ，我喜欢使用像and`for loop`这样的高阶函数。`map``flatMap`

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:11:32.820

```
words.groupBy(_._1).mapValues(_.map(_._2).toList.sorted).toList 
```

# python - 条件评估的 Python 性能

> ID：13140619
> 
> 赞同：2
> 
> 时间：2012-10-30T13:58:39.637
> 
> 标签：python, performance

我试图找出在评估条件语句（python 2.6.6）时否定布尔值是否有任何惩罚。我首先尝试了这个简单的测试（没有`else`分支）

```
>>> import timeit
>>> timeit.timeit("if not True: pass", number=100000)
0.011913061141967773
>>> timeit.timeit("if True: pass", number=100000)
0.018882036209106445 
```

所以我认为结果是有偏差的，因为 pass 语句可能会被转换为 noop ，这至少是*一些*操作。

我做了第二次尝试，得到了这些结果：

```
>>> timeit.timeit("a=False\nif not a: pass\nelse: pass", number=100000)
0.02387714385986328
>>> timeit.timeit("a=False\nif a: pass\nelse: pass", number=100000)
0.015386819839477539
>>> timeit.timeit("a=True\nif a: pass\nelse: pass", number=100000)
0.02389812469482422
>>> timeit.timeit("a=True\nif not a: pass\nelse: pass", number=100000)
0.015424966812133789 
```

我没想到会看到任何大的惩罚，但从这个结果来看，评估`else`分支似乎比隐式`then`分支便宜。而且差别很大！

所以第三次尝试返回这些结果：

```
>>> timeit.timeit("if True: a=1\nelse: a=1", number=100000)
0.022008895874023438
>>> timeit.timeit("if not True: a=1\nelse: a=1", number=100000)
0.022121906280517578 
```

最后我得到了预期的结果。虽然出于好奇，我最后一次尝试：

```
>>> timeit.timeit("if False: a=1\nelse: a=1", number=100000)
0.02385997772216797
>>> timeit.timeit("if not False: a=1\nelse: a=1", number=100000)
0.02244400978088379 
```

就是这样......我不知道为什么导致`then`分支的否定条件更快。

可能会发生什么？

所有这些结果都可以在我的计算机上重现，无论我运行它们多少次，我都会得到几乎相同的结果。

我认为第一个测试存在偏差，因为编译器可能已经`else: pass`完全删除了该部分。那可能吗？

可能所有这些结果都与 CPU 中的分支预测器有关吗？

还有其他可能的罪魁祸首吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-30T14:05:26.907

首先，“现实世界”新闻：如果您真的处于编写“if not”或“if ..pass else...”会影响应用程序性能的情况，我建议您进行一些认真的分析，并在本机代码中重写您的内部循环 - 使用 Cython 或 C（甚至其他选项，例如 Fortran - Python 擅长集成）。

否则，我会说这些是不相关的实现细节。用“dis”反汇编你的代码序列可以显示正在发生的事情——但是这个级别的优化在 Python 中没有任何实际价值——单个函数调用，即使是使用运算符隐式调用，也需要大约一个额外的数量级与执行`if`语句相比的时间。

这里：

```
>>> dis.dis(compile("if not True: pass", "None", "exec",))
  1           0 LOAD_NAME                0 (True)
              3 POP_JUMP_IF_TRUE         9
              6 JUMP_FORWARD             0 (to 9)
        >>    9 LOAD_CONST               0 (None)
             12 RETURN_VALUE        
>>> dis.dis(compile("if True: pass", "None", "exec",))
  1           0 LOAD_NAME                0 (True)
              3 POP_JUMP_IF_FALSE        9
              6 JUMP_FORWARD             0 (to 9)
        >>    9 LOAD_CONST               0 (None)
             12 RETURN_VALUE        
>>> 
```

As you can see, there is no difference in the bytecode generated for using "not" or not - but for the op of the jumping operator, which should take the same time in both cases.

# java - 我需要将 Apache POI 图片从 word 文档转换为 html 文件

> ID：13140622
> 
> 赞同：1
> 
> 时间：2012-10-30T13:58:53.613
> 
> 标签：java, html, image, ms-word, apache-poi

我有一些代码使用 Java Apache POI 库打开 Microsoft Word 文档并将其转换为 html，使用 Apache POI，它还获取文档上图像的字节数组数据。但我需要将此信息转换为 html 以写入 html 文件。任何提示或建议将不胜感激。请记住，我是一名桌面开发人员，而不是一名网络程序员，所以当你提出建议时，请记住这一点。下面的代码获取图像。

```
 private void parseWordText(File file) throws IOException {
      FileInputStream fs = new FileInputStream(file);
      doc = new HWPFDocument(fs);
      PicturesTable picTable = doc.getPicturesTable();
      if (picTable != null){
           picList = new ArrayList<Picture>(picTable.getAllPictures());
           if (!picList.isEmpty()) {
           for (Picture pic : picList) {
                byte[] byteArray = pic.getContent();
                pic.suggestFileExtension();
                pic.suggestFullFileName();
                pic.suggestPictureType();
                pic.getStartOffset();
           }
        }
     } 
```

然后下面的代码将文档转换为 html。有没有办法在下面的代码中将 byteArray 添加到 ByteArrayOutputStream 中？

```
private void convertWordDoctoHTML(File file) throws ParserConfigurationException, TransformerConfigurationException, TransformerException, IOException {
    HWPFDocumentCore wordDocument = null;
    try {
        wordDocument = WordToHtmlUtils.loadDoc(new FileInputStream(file));
    } catch (IOException ex) {
        Exceptions.printStackTrace(ex);
    }

    WordToHtmlConverter wordToHtmlConverter = new WordToHtmlConverter(DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument());
    wordToHtmlConverter.processDocument(wordDocument);
    org.w3c.dom.Document htmlDocument = wordToHtmlConverter.getDocument();
    NamedNodeMap node = htmlDocument.getAttributes();

    ByteArrayOutputStream out = new ByteArrayOutputStream();
    DOMSource domSource = new DOMSource(htmlDocument);
    StreamResult streamResult = new StreamResult(out);

    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer serializer = tf.newTransformer();
    serializer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
    serializer.setOutputProperty(OutputKeys.INDENT, "yes");
    serializer.setOutputProperty(OutputKeys.METHOD, "html");
    serializer.transform(domSource, streamResult);
    out.close();

    String result = new String(out.toByteArray());
    acDocTextArea.setText(newDocText);

    htmlText = result;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:18:08.837

查看[http://svn.apache.org/viewvc/poi/trunk/src/scratchpad/src/org/apache/poi/hwpf/converter/WordToHtmlConverter.java?view=markup&pathrev=1180740](http://svn.apache.org/viewvc/poi/trunk/src/scratchpad/src/org/apache/poi/hwpf/converter/WordToHtmlConverter.java?view=markup&pathrev=1180740) 它`org.apache.poi.hwpf.converter.WordToHtmlConverter`的 源代码JavaDoc 中的状态：

*此实现不会创建图像或指向它们的链接。这可以通过覆盖 {@link #processImage(Element, boolean, Picture)} 方法来改变*

如果您`processImage(...)`在第 790 行查看 AbstractWordConverter.java 中的该方法，看起来该方法正在调用另一个名为`processImageWithoutPicturesManager(...)`.

[http://svn.apache.org/viewvc/poi/trunk/src/scratchpad/src/org/apache/poi/hwpf/converter/AbstractWordConverter.java?view=markup&pathrev=1180740](http://svn.apache.org/viewvc/poi/trunk/src/scratchpad/src/org/apache/poi/hwpf/converter/AbstractWordConverter.java?view=markup&pathrev=1180740)

这个方法又被定义`WordToHtmlConverter`了，看起来很可疑就像您想要扩展代码的地方一样（第 317 行）：

```
@Override
protected void processImageWithoutPicturesManager(Element currentBlock,
    boolean inlined, Picture picture)
{
    // no default implementation -- skip
    currentBlock.appendChild(htmlDocumentFacade.document
    .createComment("Image link to '"
    + picture.suggestFullFileName() + "' can be here"));
} 
```

我认为你有开始将图像插入流程的地方。

创建转换器的子类，例如

```
 public class InlineImageWordToHtmlConverter extends WordToHtmlConverter 
```

然后覆盖该方法并将任何代码放入其中。

我还没有测试过，但从我理论上看它应该是正确的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-07T12:18:30.077

@user4887078 正如@Guga 所说，这很简单，我所做的只是查看 org.apache.poi.xwpf.converter.core.FileImageExtractor 和 ***瞧！*** 它确实可以按预期工作，尽管它可能仍需要一些重构和优化。

```
HWPFDocumentCore wordDocument = WordToHtmlUtils.loadDoc(is);

            WordToHtmlConverter wordToHtmlConverter = new WordToHtmlConverter(
                    DocumentBuilderFactory.newInstance().newDocumentBuilder()
                            .newDocument());
            wordToHtmlConverter.setPicturesManager(new PicturesManager() {
                @Override
                public String savePicture(byte[] bytes, PictureType pictureType, String s, float v, float v1) {
                    File imageFile = new File("pages/imgs", s);
                    imageFile.getParentFile().mkdirs();
                    InputStream in = null;
                    FileOutputStream out = null;

                    try {
                        in = new ByteArrayInputStream(bytes);
                        out = new FileOutputStream(imageFile);
                        IOUtils.copy(in, out);

                    } catch (FileNotFoundException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    } finally {
                        if (in != null) {
                            IOUtils.closeQuietly(in);
                        }

                        if (out != null) {
                            IOUtils.closeQuietly(out);
                        }

                    }
                    return "imgs/" + imageFile.getName();
                }
            });
            wordToHtmlConverter.processDocument(wordDocument);
            Document htmlDocument = wordToHtmlConverter.getDocument();
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            DOMSource domSource = new DOMSource(htmlDocument);
            StreamResult streamResult = new StreamResult(out);

            Transformer transformer = TransformerFactory.newInstance().newTransformer();
            transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
            transformer.setOutputProperty(OutputKeys.INDENT, "yes");
            transformer.setOutputProperty(OutputKeys.METHOD, "html");
            transformer.transform(domSource, streamResult);
            out.close();

            String result = new String(out.toByteArray());
            FileOutputStream fos = new FileOutputStream(outFile); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-22T01:42:56.243

使用这个应该很有用。

```
public class InlineImageWordToHtmlConverter extends WordToHtmlConverter{
    public InlineImageWordToHtmlConverter(Document document) {
        super(document);
    } 

    @Override
    protected void processImageWithoutPicturesManager(Element currentBlock, boolean inlined, Picture picture) {
        Element img = super.getDocument().createElement("img");
        img.setAttribute("src", "data:image/png;base64,"+Base64.getEncoder().encodeToString(picture.getContent()));
        currentBlock.appendChild(img);
    }
} 
```

# c# - 比较短语的反映

> ID：13140623
> 
> 赞同：0
> 
> 时间：2012-10-30T13:58:54.640
> 
> 标签：c#, reflection, parameters, comparison, phrase

也许我的问题很奇怪......我想知道是否可以对一个短语使用反射。

我试图与 C# 中的反射进行比较。到目前为止，我将属性的名称作为字符串传递，将值作为对象传递，就像这样：`Cmp("foo", "abc")`.
这样我必须检查`foo`类中是否存在属性，并检查值类型是否与属性类型匹配（在上面的示例中 foo 是字符串属性，值是字符串）。这种方法很好用！

我只是想知道是否可以将短语作为参数发送并用反射或类似的东西对其进行分析。
我的意思是，就像上面的例子一样，而不是像这样调用函数，而是像这样`Cmp("foo", "abc")`调用函数`Cmp(A.foo == "abc")`（`A`是具有属性的类`foo`），然后分析属性是`foo`并且值是`"abc"`。

我知道这听起来很奇怪，对我来说没有必要。它只是为了这个想法。
可能吗？

**编辑**
如果我不清楚，我已经写了`Cmp(string, string)`方法，它工作正常！
我只想知道是否有办法编写这样的`Cmp`方法：`Cmp(A.foo == "abc")`. 该参数是一个短语。

**编辑 2**
例如，您可以在 C 中执行类似的操作。您可以像这样创建宏：

```
#define Cmp(phrase) printf(##phrase) 
```

然后，如果您调用它`Cmp(A.foo == "abc")`，输出将是：

> A.foo == "abc"

就像将整个短语作为参数传递并对其进行分析。我知道宏是预编译的东西，我只想知道C#中是否有类似的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:04:26.920

此扩展方法遍历它所调用的对象的所有（可读、公共）属性，检查该属性上具有给定名称的属性并比较值。

```
public static class CmpExtension
{
    public static bool Cmp<T, TValue>(this T obj, string propertyName, TValue value)
        where TValue : class
    {
        var properties = obj.GetType().GetProperties()
                .Where(p => p.CanRead);

        foreach (var property in properties)
        {
            var propertyValue = property.GetValue(obj, null);

            var childProperty = property.PropertyType.GetProperties()
                .Where(p => p.CanRead)
                .FirstOrDefault(p => p.Name == propertyName);

            if (childProperty == null) continue;

            var childPropertyValue = childProperty.GetValue(propertyValue, null);

            return childPropertyValue == value;
        }

        return false;
    }
} 
```

通过使用它，您可以执行以下操作：

```
public class Foo
{
    public Bar Bar { get; set; }
}

public class Bar
{
    public string Value { get; set; }
}

public static void Main(string[] args)
{
    var foo = new Foo { Bar = new Bar { Value = "Testing" } };
    foo.Cmp("Value", "Testing"); // True
} 
```

要使用替代语法，请使用：

```
public static class CmpExtension
{
    public static bool Cmp<T>(this T obj, Func<T, bool> func)
    {
        return func(obj);
    }
} 
```

使用这个，你可以做到

```
 public static void Main(string[] args)
    {
        var foo = new Foo { Bar = new Bar { Value = "Testing" } };
        foo.Cmp(f => f.Bar.Value == "Testing"); // True
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:25:58.397

您可以使用[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)来描述表达式，例如`bar.Foo == "abc"`. 这是一个简单的示例，假设您有一个名为的类，该类`Bar`具有名为的属性`Foo`：

```
String FormatExpression<T>(Expression<Func<T, Boolean>> expression) {
  if (expression == null)
    throw new ArgumentNullException("expression");
  var body = expression.Body as BinaryExpression;
  if (body == null)
    throw new ArgumentException(
      "Expression body is not a binary expression.", "expression");
  return body.ToString();
} 
```

打电话

```
FormatExpression((Bar bar) => bar.Foo == "abc") 
```

将返回字符串

```
(bar.Foo == "abc") 
```

# ruby - Rails 3 Routing：资源操作和嵌套资源：path =>“/”

> ID：13140624
> 
> 赞同：3
> 
> 时间：2012-10-30T13:58:57.463
> 
> 标签：ruby, ruby-on-rails-3, routing

我想配置我的 Rails 路由，以便这些情况起作用：

```
/username           #=> { :controller => "houses",
                    #     :action => "index",
                    #     :user_id => "username" }

/username/housename #=> { :controller => "houses",
                    #     :action => "show",
                    #     :user_id => "username",
                    #     :id => "housename" }

/username/edit      #=> { :controller => "users",
                    #     :action => "edit",
                    #     :id => "username" } 
```

换句话说，我想`/:user_id`成为一个普通的用户资源，并为其拥有一个嵌套资源，它直接挂载在根目录上。所以，我想要`/username/housename`而不是`/username/houses/housename`. 我尝试使用`:path => "/"`嵌套资源，但这不知何故与其他操作发生冲突，例如`:edit。我迷路了——这能做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:55:25.417

您尝试做的事情会产生冲突，这就是 Rails 不允许您这样做的原因。

考虑一些用户 bob 有一个名为“edit”的房子的情况。在这种情况下，Rails 应该将“/bob/edit”路由到哪里？有两种可能：

```
{ :controller => "houses", :action => "show", :user_id => "bob", :id => "edit" } 
```

和：

```
{ :controller => "users", :action => "edit", :id => "bob" } 
```

因此，要回答您的问题，*因为*在您消除歧义之前，您无法完成您想要做的事情。

更新：

借用@sevenseacat的回答，我认为这应该做你想做的事，在路由 /bob/edit 将用户“bob”的编辑操作优先于名为“edit”的房子的显示操作的情况下：

```
resources :users, path: '/', only: :edit
resources :users, path: '/', only: :show do
  resources :houses, only: :show, path: ''
end 
```

我得到这些路线：

```
 edit_user GET /:id/edit(.:format)     users#edit
 user_house GET /:user_id/:id(.:format) houses#show
       user GET /:id(.:format)          users#show 
```

请注意，`edit_user`路径出现在路径*上方*`user_house`，这保证了在发生冲突时将获得优先权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:55:15.667

像这样的东西可能是你所追求的：

```
resources :users, path: '/', only: [:show, :edit] do
  resources :houses, only: [:show], path: ''
end 
```

`rake routes`告诉我：

```
user_house GET    /:user_id/:id(.:format)     houses#show
 edit_user GET    /:id/edit(.:format)         users#edit
           GET    /:id(.:format)              users#show 
```

# java - 找出某个字体中字符串的宽度

> ID：13140630
> 
> 赞同：8
> 
> 时间：2012-10-30T13:59:05.420
> 
> 标签：java, android, string, fonts

有什么方法可以计算出某个特定`String`的像素宽`Font`是多少？

在我的`Activity`中，有动态`String`的 s 放在了一个`Button`. 有时，`String`它太长，它被分成两条线，是什么让`Button`看起来很难看。但是，由于我不使用某种控制台`Font`，因此单个字符宽度可能会有所不同。所以写类似的东西没有帮助

```
String test = "someString";
if(someString.length()>/*someValue*/){
    // decrement Font size
} 
```

因为“mmmmmmmm”比“iiiiiiiii”宽。

或者，Android中是否有办法将某个特定`String`的内容放在一行中，以便系统`Font`自动“缩放”大小？

**编辑：**

由于 wsanville 的答案非常好，这是我动态设置字体大小的代码：

```
private void setupButton(){
    Button button = new Button();
    button.setText(getButtonText()); // getButtonText() is a custom method which returns me a certain String
    Paint paint = button.getPaint();
    float t = 0;
    if(paint.measureText(button.getText().toString())>323.0){ //323.0 is the max width fitting in the button
    t = getAppropriateTextSize(button);
    button.setTextSize(t);
    }
}

private float getAppropriateTextSize(Button button){
    float textSize = 0;
    Paint paint = button.getPaint();
    textSize = paint.getTextSize();
    while(paint.measureText(button.getText().toString())>323.0){
        textSize -= 0.25;
        button.setTextSize(textSize);
    }
    return textSize;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:08:41.253

您应该能够使用[Paint.setTypeface(](http://developer.android.com/reference/android/graphics/Paint.html#setTypeface%28android.graphics.Typeface%29) ) 然后[Paint.measureText()](http://developer.android.com/reference/android/graphics/Paint.html#measureText%28java.lang.String%29)。你会发现`Paint`课堂上的其他方法`setTextSize()`也可以提供帮助。

您关于缩放文本的后续问题已在[此问题](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)中得到解决。

# c++ - 如何将模板中具有非依赖名称的 msvc++ 代码移植到 Linux？

> ID：13140632
> 
> 赞同：4
> 
> 时间：2012-10-30T13:59:15.503
> 
> 标签：c++, templates

我可以处理移植平台相关的功能。我有一个问题，我在 Linux（clang 和 g++）上尝试的编译器不接受以下代码，而 msvc++ 编译器接受：

```
template <class T>
class Base {
protected:
    T Value;
};

template <class T>
class Derived : public Base<T> {
public:
    void setValue(const T& inValue){
        Value = inValue;
    }
};

int main(int argc, char const *argv[])
{
    Derived<int> tmp;
    tmp.setValue(0);
    return 0;
} 
```

g++ 错误：

```
main.cpp: In member function ‘void Derived<T>::setValue(const T&)’:
main.cpp:11:3: error: ‘Value’ was not declared in this scope 
```

`Value`我相信这是由于在第二类中使用了非依赖名称（ ）。[更多信息](http://eli.thegreenplace.net/2012/02/06/dependent-name-lookup-for-c-templates/)。

问题是我有一个非常大的代码库，其中经常使用这种类型的代码。我知道在查看标准时这是错误的。`this->`但是，不必`Base<T>::`在每次使用`Value`. `using Base<T>::Value;`当您使用大约 20 个基类成员时，即使在派生类的开头编写也是有问题的。

所以我的问题是：是否有适用于 Linux 的编译器允许这种代码（有或没有额外的编译器开关）？或者是否有**一些小**的修改可以让这段代码在 Linux 上编译？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T14:05:11.607

您必须说`this->Value`or `Base<T>::Value`，因为`Value`是从属名称。或者，添加`using Base<T>::Value;`到您的派生类定义中。没有办法解决这个问题。

Microsoft 编译器只是不符合标准，恐怕您的不幸是按照供应商的风格而不是已发布的 C++ 标准进行编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:28:25.783

您可以将 using 语句添加到派生类。这可能只会让你的生活复杂化：

```
template <class T>
class Derived : public Base<T> {
    using Base<T>::Value;
public:
    void setValue(const T& inValue){
        Value = inValue;
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:12:27.947

要回答您的问题，是的，有一个接受此代码的 Linux 编译器：英特尔 C++。使用版本 13.0.0.079 测试。您需要使用`-fpermissive`编译器标志。

不过，我同意 Kerrek SB 的观点；最好修复代码。不能保证英特尔 C++ 将保持当前行为。甚至不能保证微软的编译器会保留它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T14:32:27.647

Clang 支持[MSVC 的多个兼容性标志](http://clang.llvm.org/docs/UsersManual.html#c_ms)。

我相信这`-fdelayed-template-parsing`就是你正在寻找的那个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T14:06:01.693

如果您想在派生中使用值。你可以像下面这样重新定义它，所以你避免 this-> 或 Base::

```
using Base<T>::Value 
```

只需在 Derived 的定义中一次，您应该可以在任何地方使用它

**Edit1：**好的对不起，我删除了关于类和类型名关键字的第一部分

# c# - 如何防止URI中特殊符号的转换？

> ID：13140633
> 
> 赞同：0
> 
> 时间：2012-10-30T13:59:21.243
> 
> 标签：c#, unicode, uri

我试图使用 Win8-Searchbar 通过 http-Server 进行扫描。

```
string uriString = "http://myServer:myPort/?ItemList,SQLFilter=Title LIKE '%" + searchTerm + "%'";
Uri uri = new Uri(uriString); 
```

“%”、“”（空白）等特殊符号正在转换为“%25”、“%20”......

我怎样才能防止这些转变？http-Server 不理解它:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:58:00.287

据[w3schools](http://www.w3schools.com/tags/ref_urlencode.asp)称，

> URL 只能使用 ASCII 字符集通过 Internet 发送。
> 
> 由于 URL 通常包含 ASCII 集之外的字符，因此必须将 URL 转换为有效的 ASCII 格式。
> 
> URL 编码将不安全的 ASCII 字符替换为“%”，后跟两个十六进制数字。

这就是为什么会发生 URL 编码并且无法避免它的原因。

在服务器端，您需要使用[HttpUtility.UrlDecode](http://msdn.microsoft.com/en-us/library/system.web.httputility.urldecode.aspx)来解码字符串。

* * *

## 与问题无关，但非常重要：

在 URL 中暴露类似的东西`SQLFilter=Title LIKE '%" + searchTerm + "%'"`代表了一个巨大的安全问题。**任何人都可以修改它以在您的 DB 上运行任意语句**。

# android - 在主屏幕上创建列表视图

> ID：13140634
> 
> 赞同：-1
> 
> 时间：2012-10-30T13:59:24.373
> 
> 标签：android, android-layout

这是代码，这将打开一个带有名称的列表，但它在一个新窗口中。我想要做的是把这个列表放在主窗口上。我能做些什么？

![在此处输入图像描述](../Images/440b2dcddfaa084dc0275d3f217423fb.png)

```
 public class MainActivity extends ListActivity {

            String []name={"bill","gorg"};

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);

                //setContentView(R.layout.activity_main);

                setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,name));
            }

            @Override
            protected void onListItemClick(ListView l, View v, int position, long id) {
                // TODO Auto-generated method stub
                super.onListItemClick(l, v, position, id);
                Object o=this.getListAdapter().getItem(position);
                String keybord= o.toString();
                Toast.makeText(this, "you are select "+keybord, Toast.LENGTH_LONG).show();
            }

            @Override
            public boolean onCreateOptionsMenu(Menu menu) {
                getMenuInflater().inflate(R.menu.activity_main, menu);
                return true;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:51:08.393

When you say "main window" do you mean the home screen of an Android device? If that's what you are referring to, it's not exactly possible. The home screen is an application itself, that can link to other applications which you can see on your "desktop". If you want to be able to display a list of something, then you could create a widget along with your app and the widget could be displayed on one of the panels of a device's home screen.

If you want to create a widget that can be added to the home screen, check the [widget developer docs](http://developer.android.com/guide/topics/appwidgets/index.html)

# iphone - 从 xcode 发出 post 请求 iPhone->Server

> ID：13140635
> 
> 赞同：1
> 
> 时间：2012-10-30T13:59:24.863
> 
> 标签：iphone, post

我进行了很多搜索，但我找到的代码片段似乎都不适合我。我在 xcode 中有以下片段，可在我的 iPhone 应用程序中运行：

```
NSURL *url = [NSURL URLWithString:@"http://blah.blah.com/rec.php"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
NSData *body = [@"data=crap" dataUsingEncoding:NSUTF8StringEncoding];
NSString *bodyLength = [NSString stringWithFormat:@"%d", [body length]];
[request setValue:bodyLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];    
[request setHTTPBody:body];
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:NULL error:NULL]; 
```

rec.php 调用正常，但发布数据没有通过。条目 $_POST['data'] 为空。谁能让我知道我做错了什么？

# ios - iOS - 如何在特定帧停止 UIView 动画

> ID：13140637
> 
> 赞同：0
> 
> 时间：2012-10-30T13:59:29.117
> 
> 标签：ios, animation, frame

> **可能重复：**
> [取消 UIView 动画？](https://stackoverflow.com/questions/554997/cancel-a-uiview-animation)

我需要停止 UIView 动画。我知道我可以使用`[object.layer removeAllAnimations];`，但这不会停止动画，而是“跳过”它。所以，如果我的原始动画是：

```
[UIView animateWithDuration:8.0 delay:0.0 options:UIViewAnimationOptionAllowUserInteraction animations:^ (void) {
        [ingredient setFrame:CGRectMake(20, 200, 34, 45)];
    } completion:^ (BOOL finished) {
        NSLog(@"Completed");
    }]; 
```

对象成分将具有动画完成后的帧。相反，我希望对象在特定点停止，而动画不完整。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:05:00.083

如果您想暂停，但不打算重新开始，请尝试：

```
CALayer *objectPresentationLayer = [object.layer presentationLayer];
object.layer.transform = objectPresentationLayer.transform;
[object.layer removeAllAnimations]; 
```

如果您想暂停和恢复动画，请从 Apple 问答中查看： [https ://developer.apple.com/library/ios/#qa/qa2009/qa1673.html](https://developer.apple.com/library/ios/#qa/qa2009/qa1673.html)

# java - Java 中的内存分配翻倍

> ID：13140646
> 
> 赞同：1
> 
> 时间：2012-10-30T13:59:55.140
> 
> 标签：java, memory-management

我想知道如何确定java分配的内存。我有一个内存要求有限的程序。当我分配一个特定大小的数组时，我注意到 JVM 分配的内存是这个大小的两倍：

例如：在我分配一个数组之前：

```
runtime.totalMemory() 15 MB
runtime.freeMemory(): 14 MB 
```

此行之后： char [] xxx = new char[4 * 1024 * 1024];

```
runtime.totalMemory() 15 MB
runtime.freeMemory(): 6 MB 
```

因此，可用内存量从 14 MB 下降到 6 MB。即使我的阵列只有 4 MB。我尝试过不同的东西数组，它总是一样的。为什么java分配数组大小的两倍？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T14:02:39.303

char 是 16 位，*而不是*8位。有关详细信息，请参见[此处。](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

> char：char 数据类型是单个 16 位 Unicode 字符。它的最小值为“\u0000”（或 0），最大值为“\uffff”（或 65,535，包括在内）。

所以你正在分配`1024 * 1024 * 4 * 2`（2 字节 = 16 位）。在我看来还可以。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T14:02:54.467

`sizeof(char)`对于 Java 来说是 2 个字节，因此 400 万个元素的 char 数组替换了 8 个 mibibytes，这似乎是您从`freeMemory`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T14:03:05.950

在 Java 中，一个字符表示为 2 个字节的 unicode。

# javascript - 如何将 div 中的数据连接到 div 中具有多个 div 的字符串？

> ID：13140647
> 
> 赞同：0
> 
> 时间：2012-10-30T13:59:55.290
> 
> 标签：javascript, jquery

我有一个应用程序，其中有一个 div 和添加列按钮，当我单击添加列按钮时，列被添加到 div 中。现在我想要做的是在那个 div 列中有一些元素，比如`<ol>`和`<li>`，我想将它们分别连接成每个 div 的字符串，我该怎么做？

这是我的 div 中的列的外观：

```
<div id="columnholder">

    <div class="shoppingCart" id="shoppingCart1">
    <h2 class="ui-widget-header">Add Menu Items Here <img onclick="removecolumn(this.id)" style="float: right; cursor:pointer;" id="shoppingCart1" src="../Images/delete.png"></h2>
    <aside id="droppable" class="ui-widget-content">
    <ol class="ui-droppable">
      <li>Brand1
          <ol class="ui-droppable">
              <li>Add Sub Menu here</li>
               <li>Category2
                  <ol class="ui-droppable">
                     <li>Add Sub Menu here</li>
                     <li>Product2
                        <ol class="ui-droppable">
                             <li>Add Sub Menu here</li>
                                <li>Product4
                                  <ol class="ui-droppable">
                                       <li>Add Sub Menu here</li>
                                             <li>Product3
                                                <ol class="ui-droppable">
                                                   <li>Add Sub Menu here</li>
                                                       <li>Product3
                                                         <ol class="ui-droppable">
                                                            <li>Add Sub Menu here
                                                              </li>
                                                          </ol>
                                                     </li>
                                                </ol>
                                          </li>
                                    </ol>
                              </li>
                        </ol>
                   </li>
              <li>Product2
                 <ol class="ui-droppable">
                         <li>Add Sub Menu here</li>
                              <li>Product4<ol class="ui-droppable">
                                    <li>Add Sub Menu here</li>
                                         <li>Product4
                                             <ol class="ui-droppable">
                                                   <li>Add Sub Menu here</li>
                                                          <li>Product4
                                                             <ol class="ui-droppable">
                                                               <li>Add Sub Menu here 
                                                                  </li>
                                                               <li>Product4
                                                                  <ol class="ui-droppable">
                                                                        <li>Add Sub Menu here</li>
    </ol></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol></aside></div>

    <div class="shoppingCart" id="shoppingCart2">

    //data like above         

    <div>

    // there may be number of columns

    </div> 
```

我想要的是将它们连接成单独的字符串，就像“shoppingcart1”div中的数据应该以不同的方式连接，并且对于列持有人div中的其他div相同，任何人都可以在这里帮助我。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:13:58.140

```
$('.ui-droppable li').map(function() {
  return $(this).text().trim().replace(/\s+/, ' ');
}).get().join(" "); 
```

这应该让你跑步。现在您只需要更新此代码段即可提供您想要的任何内容。

# jquery - Jquery Tooltip 图像预览左上角放置导致错误

> ID：13140649
> 
> 赞同：0
> 
> 时间：2012-10-30T13:59:59.917
> 
> 标签：jquery, css, tooltip

我有一小排缩略图图像，我使用悬停效果滚动使用我在这里找到的 jquery 工具提示插件：http: [//cssglobe.com/easyest-tooltip-and-image-preview-using-jquery](http://cssglobe.com/easiest-tooltip-and-image-preview-using-jquery)。

该插件默认工作正常，但我无法成功控制预览图像的位置。（特别是 - 使预览显示在缩略图的左上角）

我的大部分图片都在页面的右侧，所以我需要预览显示在缩略图的左上角。当我在 javascript 中调整 y 或 x 偏移变量时，光标和预览图像开始闪烁，就像它们处于某种循环中一样。

这是CSS：

```
<style>
#screenshot{
    position:absolute;
    border:1px solid #ccc;
    background:#333;
    padding:5px;
    display:none;
    color:#fff;
    }
</style> 
```

这是Javascript：

```
this.screenshotPreview = function(){    
    /* CONFIG */

        xOffset = 10;
        yOffset = 30;

        // these 2 variable determine popup's distance from the cursor
        // you might want to adjust to get the right result

    /* END CONFIG */
    $("a.screenshot").hover(function(e){
        this.t = this.title;
        this.title = "";    
        var c = (this.t != "") ? "<br/>" + this.t : "";
        $("body").append("<p id='screenshot'><img src='"+ this.rel +"' alt='url preview' />"+ c +"</p>");                                
        $("#screenshot")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px")
            .fadeIn("fast");                        
    },
    function(){
        this.title = this.t;    
        $("#screenshot").remove();
    }); 
    $("a.screenshot").mousemove(function(e){
        $("#screenshot")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px");
    });         
};

// starting the script on page load
$(document).ready(function(){
    screenshotPreview();
}); 
```

这是我的 HTML：

```
<a href="#" class="screenshot" rel="/images_no/products_large/img_10.png" title="Available Drawer Knob Options"><img src="/images_no/products_small/img_10.png" border="0"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:33:32.223

尝试更改为#screenshot 的CSS 样式

```
#screenshot{
    position:absolute;
    border:1px solid #ccc;
    background:#333;
    padding:5px;
    display:none;
    color:#fff;
    margin-top:-300px; /* height of the container */
    margin-left:-480px; /* width of the container */
} 
```

# css - 从 Vimeo 嵌入视频会弄乱 CSS 位置：已修复 s 在我的页面上

> ID：13140655
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:00:20.630
> 
> 标签：css, vimeo

当我不嵌入来自 Vimeo 的视频时， position:fixed s 工作得非常好。任何人都知道为什么以及如何解决它？以前从来没有这样，只是最近。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:11:29.017

这个问题的讨论是否解决了您的问题？[Mac，野生动物园，背景位置：固定和 iframe？](https://stackoverflow.com/questions/9821568/mac-safari-background-positionfixed-and-iframe)

原始海报说：“我通过检测 Mac/Safari 并为使用该系统的人输出减少的功能来解决这个问题。”

我建议为导致问题的浏览器实现单独的 CSS。您能否提供有关该问题的更多详细信息？

# php - ArrayAccess/ArrayObject 不适用于 call_user_func_array() 等函数

> ID：13140657
> 
> 赞同：1
> 
> 时间：2012-10-30T14:00:29.940
> 
> 标签：php, magic-methods, arrayaccess

使用`ArrayAccess`or实现对象时`ArrayObject`，对于某些操作，它是一个完全正常的数组（例如`foreach()`语句）。然而，其他人并不那么容易被愚弄，并且仍然抱怨它是一个对象：

```
[E_WARNING] call_user_func_array() expects parameter 2 to be array, object given 
```

这让我觉得前后矛盾。有人可以解释这背后的原因吗？有没有解决的办法？

我需要它来支持后端代码。它需要一个数组（作为参数传递给`call_user_func_array()`），并且有时会修改它。但是，我需要将对数组所做的任何更改镜像到新变量，这就是为什么我尝试通过`ArrayAccess`对象来执行此操作（更多信息[here](https://stackoverflow.com/q/13137437/801042)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:04:48.200

Thye 函数名称非常明确，[文档中的描述说明了](http://www.php.net/manual/en/function.call-user-func-array.php)为什么它需要一个数组

解决方案是将对象包装在数组中

```
call_user_func_array('callback', array( $myObject)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:11:41.797

一般来说，您不能将`ArrayObject`or 和`ArrayAccess`implementationor 与操作数组的本机函数一起使用。您可以将它们与通常使用数组表示法进行遍历的语言结构一起使用。

# android - 内置drawable的Android无法缩放

> ID：13140658
> 
> 赞同：0
> 
> 时间：2012-10-30T14:00:37.167
> 
> 标签：android

我有一个可绘制的问题。我正在为平板电脑设计布局，但可绘制对象无法缩放。

这是它的样子：

![在此处输入图像描述](../Images/5821a807860f8d8516d67caf5a1634c4.png)

问题是右上角的删除drawable。我使用了内置的可绘制 ic_input_delete。

这是edittext和imagebutton的xml：

```
 <LinearLayout
    android:id="@+id/inputLayout"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_marginBottom="5dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="8dp"
    android:layout_weight="0.2"
    android:background="@android:drawable/edit_text"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/pinDisplay"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="0.85"
        android:background="@null"
        android:hint="@string/pincode_hint"
        android:padding="3dp"
        android:textSize="24sp" />

    <ImageButton
        android:id="@+id/backspace"
        style="@android:style/Widget.Button"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="center_vertical"
        android:layout_margin="3dp"
        android:layout_weight="0.15"
        android:gravity="center"
        android:src="@android:drawable/ic_input_delete" />
</LinearLayout> 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:17:58.227

尝试设置`android:scaleType`to`FIT_XY`或`CENTER_INSIDE`：

[http://developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

# android - 使用 Phonegap 2.0.0 在 Android 和 iPhone 上共享 Twitter 和 Facebook

> ID：13140659
> 
> 赞同：4
> 
> 时间：2012-10-30T14:00:37.120
> 
> 标签：android, iphone, facebook, cordova, twitter

我已经为 Android 和 iPhone 开发了一个使用 Phonegap 的应用程序。是否有如何使用 Phonegap 框架对功能进行编程，以将 URL 共享到 Android 和 iPhone 的 twitter 和 Facebook？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:51:09.487

您有几个用于 Phonegap 的混合插件，其中包括 twitter 和 facebook 以及其他社交服务：

*   [适用于 iOS 的 ShareKit](https://github.com/mohamedfasil/ShareKitPlugin-for-Phonegap-3.0)
*   [适用于 Android、iOS 和 WinPhone 的共享](https://github.com/EddyVerbruggen/SocialSharing-PhoneGap-Plugin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-04T05:41:41.783

这对 iOS 来说真是太神奇了。它与 Phonegap Cordova 2.3 一起使用

[https://github.com/bfcam/phonegap-ios-social-plugin](https://github.com/bfcam/phonegap-ios-social-plugin)

对于 Android，我使用的是 Android Share Plugin

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/Share](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Share)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:01:08.847

您可以在 IOS 上使用以下 Twitter 链接：[https](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/Twitter) ://github.com/phonegap/phonegap-plugins/tree/master/iPhone/Twitter 对于 Android：[http ://www.mobiledevelopersolutions.com/home/start/twominutetutorials /tmt5p1](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt5p1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T18:26:49.767

Phonegap 的规范 Facebook 插件在这里：[https ://github.com/davejohnson/phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect)

它正在（由 Facebook）更新以与最新的 iOS 和 Android SDK 兼容，因此建议...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-30T17:54:26.357

目前最好的跨平台社交分享小部件就是[这个](https://github.com/EddyVerbruggen/SocialSharing-PhoneGap-Plugin)，它也[可以在 PhoneGap Build 上使用！](https://build.phonegap.com/plugins/382)

它不仅支持通过原生分享小部件进行分享，还可以直接分享到 Facebook、Twitter、Pinterest 等。

# javascript - Web 服务器上的 jQuery 要求

> ID：13140660
> 
> 赞同：1
> 
> 时间：2012-10-30T14:00:40.760
> 
> 标签：javascript, jquery, visual-studio-2008, deployment, webserver

我在一家大公司工作，我猜我们有不同的环境：单元、系统和生产。我们最近使用 Entity FrameWork 和通用 jQuery 插件（如 Kinetics、jUnit、jQuery-UI 等）在 ASP.NET 中开发了一个网站。该项目是 VS2008 中的 Web 应用程序。

该网站在开发人员的计算机上本地运行没有任何问题。我们将它迁移到单位系统中，一些 jQuery 不起作用。然后我们迁移到系统环境中，看看我们是否遇到了同样的问题，并且 50% 的错误都消失了。当然，我们不想在没有稳定的 unit\system env 的情况下迁移到生产环境。

我的问题是，是否需要在我们的服务器上安装任何特定的东西以确保它像在开发计算机上一样完美运行？我们需要安装任何 IIS 设置或软件包吗？是 webconfig 的问题吗？在这一点上，我们需要任何我们需要的输入来解决这个问题并让网站尽快运行。

谢谢大家，我会整天在线及时回复。

**编辑**：这是在 DEV\Syst 中工作但在 UNIT 系统中不工作的代码的主要示例。我有多个这样的案例。从失败的网络方法之一添加代码（来自汤米的评论）：

```
<WebMethod()> Public Function getRessourcesList() As String 
    Dim serializer As New System.Web.Script.Serialization.JavaScriptSerializer 
    Dim listOfRessources = (From ress In GetALLRessources() 
                            Select New With {
                                .label = ("(" & ress.NO_EMPLY & ") " & ress.PR & " " & ress.NM_FAML).Replace("""", "\"""), 
                                .id = ress.NO_EMPLY
                            }).ToList 
    Dim response As String = serializer.Serialize(listOfRessources) 
    Return response 
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:01:59.023

jQuery 是一个前端框架，与服务器无关。只要您的服务器正确地提供文件（即不以任何方式修改它们），一切都应该以相同的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:04:22.850

如前所述，jQuery 只是一个客户端库。

但是，您的应用程序是否有可能部署到不同的路径（端口号、根文件夹等），这可能会导致任何 ajax 命令中的相对路径有所不同？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:02:22.333

jQuery 是一个客户端库，您编写的所有使用该库的代码都在客户端上运行（在标准设置中，所有其他条件都相同 - 我不涉及让 jQuery 以任何原因在服务器上运行）*。*

不，jQuery 没有服务器依赖项。

# c# - WinRT - OAuth2 获取访问令牌

> ID：13140663
> 
> 赞同：1
> 
> 时间：2012-10-30T14:01:22.610
> 
> 标签：c#, windows-8, windows-runtime, oauth-2.0, windows-store-apps

我正在尝试创建一个需要通过 OAuth2 进行身份验证的 Windows 应用商店应用。

首选方式应该是 WebAuthenticationBroker：

```
const string url = @"https://my.server.srv/mobile-auth/index.pl?"
                          + "client_id=CLIENTID"
                           + "&redirect_uri=https%3A%2F%2Fmy.server.srv
                           + "&response_type=code"

Uri startUri = new Uri(url);
Uri endUri = new Uri("https://my.server.srv");

WebAuthenticationResult webAuthenticationResult = await WebAuthenticationBroker.AuthenticateAsync(WebAuthenticationOptions.None, startUri, endUri);
if (webAuthenticationResult.ResponseStatus == WebAuthenticationStatus.Success)
{
    string token = webAuthenticationResult.ResponseData;
} 
```

但令牌是空的。应该有服务器响应，即

```
code=a-secret-code&expires_in=600&token_type=bearer 
```

传入 GET，它符合 OAuth2。

请问您知道如何获取这些参数吗？

**编辑：**已解决。它在将“https://localhost”作为redirect_uri / endUri 传递后开始工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:12:25.027

我建议你宁愿使用像 Hammock 这样的库。

通常对于 OAuth2，您首先发出请求以获取将与所有后续请求相关联的请求令牌。然后，您可以将该令牌与您的参数一起使用来执行身份验证请求，然后该请求将返回您可以操作的响应对象。

Flickr 可能有关于 OAuth 过程如何工作的最佳总结解释（带图片！） - [http://www.flickr.com/services/api/auth.oauth.html](http://www.flickr.com/services/api/auth.oauth.html)

祝你好运

# html - 如何使前一个 li 元素的背景图像消失

> ID：13140666
> 
> 赞同：1
> 
> 时间：2012-10-30T14:01:27.207
> 
> 标签：html, css, background, html-lists

`background-image:none`如您所见，在悬停 li 元素时，右侧的背景图像也会在属性的帮助下随之消失。然而，只有悬停的 li 消失了，但仍然可以看到前一个 li 的背景图像。虽然是未成年人，但我希望将其删除。谁能告诉我怎么做？。:)

由于我是新手，我不允许发布图像。检查网站[http://ashwin931996.webege.com/](http://ashwin931996.webege.com/) 非常感谢 btw

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:09:45.513

使用这个 jquery。在这里，我粘贴了完整的 html 代码。用这个。

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<link type="text/css" rel="stylesheet" href=""/>
<style type="text/css">
 #header ul {
    padding-top:1em;
      }

   #header ul li a.currentpage {
    color:white !important;
    background-color: #F96E5B !important;
   }

   #header ul li a {
    text-decoration: none;
    color:#676767;
    font-family: 'Oswald', sans-serif;
    font-size: 1em;
    float:right;
    line-height: 3em;
    padding-right: 1em;
    padding-left:1em;
       }

#header ul li a.active
{background-color: #F96E99;
color: white;}

</style>
</head>
<body>
<div id="header">
 <img id="logo" src="images/logo.jpg">
 <ul>
 <li>
<a class="one active" href="#">CONTACT</a>
</li>
<li>
<a class="two" href="#">GALLERY</a>
</li  class="one">
<li>
<a class="three" href="#">EVENTS</a>
</li>
<li>
<a class="four" href="#">HOME </a>
</li>
 </ul>          
 </div>
<script type="text/javascript">
$("#header ul li a").click( function() {
$("#header ul li a").removeClass("active");
$(this).addClass("active");
})
</script>

</body>
</html>​ 
```

演示：http: [//jsfiddle.net/PbMg2/2/](http://jsfiddle.net/PbMg2/2/)

# jquery - 为 div 中的两个背景设置动画

> ID：13140671
> 
> 赞同：0
> 
> 时间：2012-10-30T14:01:40.053
> 
> 标签：jquery

嗨，我有一个 div 有两个这样的背景：

```
<div class="colCenter" style="height: 750px; top: -25px; width: 72%; left: 18%; background-image: url('img/sfondi/portfolio.jpg'), url('img/sfondi/servizi.jpg');background-position: 0px 0px, 0px -1440px;">
</div> 
```

如果点击后我尝试动画它不起作用为什么？这是我的代码：

```
$(".colCenter").on("click", function() {
    $(".colCenter").animate({
          'backgroundPositionY': '1440px 0px'
    }, 1500, 'linear');
}); 
```

在动画中我已经尝试过：`'background-position': '0 1440px, 0 0px'`和`'backgroundPositionY': '1440px, 0px'`

我在 Firefox16 中工作，并且支持的不仅仅是 div 中的背景

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:43:17.497

# 为什么？

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)指出：

> 所有动画属性都应动画为**单个数值**

多个背景需要**多个**数值。jQuery 不“理解”您请求的动画。

# 那么，怎么做？

搜索一个解释你想要做的动画的 jquery 插件。

-或者-

根据*用例*，使用 CSS3 动画而不是 jQuery。

-或者-

使用 javascript 手动设置动画（定期设置背景位置，线性插值并不难）

# php - cakePHP时区和时差

> ID：13140673
> 
> 赞同：3
> 
> 时间：2012-10-30T14:01:40.763
> 
> 标签：php, cakephp, time, cakephp-2.0

在我的 CakePHP 2 应用程序中，我有时间错误。**我的Config/core.php中的**
**date_default_timezone_set**值是**Europe/Athens**。我成功使用了几个月。但是在 2012 年 10 月 28 日夏令时过后，我的代码给出了错误的时间值。

 ****当我把它放在我的控制器中时，我得到了正确的时间和日期。

```
public function dateTimeShow(){
    echo "date:".date('Y-m-d')."<br>";
    echo "time:".date('H:i:s')."<br>";
} 
```

但是**date('H:i:s')**值给出了正常的 time-2:00 值。我该如何调试或解决这个问题？
谢谢

编辑：当我打印出来`date_default_timezone_get()`我得到结果：**UTC**
当我打印出来`ini_get('date.timezone')`我得到结果：**欧洲/雅典**（这是正确的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:08:10.867

看看 php.net/setlocale

并在你的 Config/bootstrap.php 中使用类似的东西

```
// use nld_nld for windows machine
setlocale(LC_TIME, "nld_nld");
// use nl_NL for linux machine
//setlocale(LC_TIME, "nl_NL"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:44:26.363

几周后我发现了我的错误。我正在导入供应商的文件。它正在破坏我的时区值。我在更改供应商设置文件后修复了这个问题。****

# file - Zend 下载文件 Chrome

> ID：13140677
> 
> 赞同：0
> 
> 时间：2012-10-30T14:01:55.750
> 
> 标签：file, zend-framework, google-chrome, layout, download

当我使用下面的代码下载文件时，它在 IE、Firefox 中运行良好，但在 Chrome 中，您可以看到布局和视图在控制台中被发送回浏览器。状态设置为取消，整行是以红色突出显示。文件下载正常。

退出后；我尝试过各种标题选项，但无济于事

```
if ($request->isPost()) {

    $this->_helper->viewRenderer->setNoRender(true);
$this->_helper->layout()->disableLayout();

$file_fullpath = "C:/eclipse-php/workspace/Dartfire/uploads/data/logo.jpg";

$mtype = '';
// magic_mime module installed?
if (function_exists('mime_content_type')) {
    $mtype = mime_content_type($file_fullpath);
}
// fileinfo module installed?
else if (function_exists('finfo_file')) {
    $finfo = finfo_open(FILEINFO_MIME); // return mime type
    $mtype = finfo_file($finfo, $file_fullpath);
    finfo_close($finfo); 
}

$size = filesize($file_fullpath);

header('Content-Type: image/jpg');
header('Content-Disposition: attachment; filename="logo.jpg"');
readfile($file_fullpath);

exit; 

//header("Content-type: application/octet-stream");

        /*
$this->getResponse()
    ->setHeader('Content-Description', 'File Transfer', true)
        ->setHeader('Content-Type', $mtype, true) // change to application/pdf
        ->setHeader('Content-Disposition', "attachment; filename={$document->getFilename()}", true)
        ->setHeader('Content-length', $size, true)
        ->setHeader('Content-Transfer-Encoding', 'binary', true)
        ->setHeader("Content-type", "application/octet-stream")
        ->setHeader('Cache-control', 'private')
    ->appendBody(readfile($file_fullpath));
        //->sendHeaders();

//$this->getResponse()->sendResponse(); 
//Zend_Wildfire_Channel_HttpHeaders::getInstance()->flush();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:05:16.993

`header()`在将任何输出发送到浏览器之前，您必须进行任何调用。因此，在您的情况下，这需要在`readline()`通话之前完成。

# yii - YII 用于通知、警告等什么？

> ID：13140679
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:01:58.370
> 
> 标签：yii

我有一个完美的表格。如果填写并通过验证，它会将您带到另一个页面，该页面也是一个表单。但是，当用户转到此表单时，我想在顶部显示“警告”。我知道 drupal 有[drupal_set_message 功能](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/drupal_set_message/6)，但是 YII 必须完成类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:06:01.883

Yii 使用类似的东西

```
Yii::app()->user->setFlash('notice', 'This is your notice'); 
```

在视图中，您需要添加如下内容：

```
foreach(Yii::app()->user->getFlashes() as $key => $message) {
    echo '<div class="flash-' . $key . '">' . $message . "</div>\n";
} 
```

更多信息可以在这里找到：[http ://www.yiiframework.com/wiki/21/how-to-work-with-flash-messages/](http://www.yiiframework.com/wiki/21/how-to-work-with-flash-messages/)

# php - xml、soap 和 php

> ID：13140681
> 
> 赞同：2
> 
> 时间：2012-10-30T14:02:01.403
> 
> 标签：php, soap

我需要使用 Soap 和 php 发送一个 xml 请求。我想要的xml请求是这样的

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" >
    <soapenv:Header/>
    <soapenv:Body>
        <air:AirFareRulesReq AuthorizedBy="TESTANTON" TargetBranch="P7001111" FareRuleType="long" xmlns:air="http://www.travelport.com/schema/
air_v20_0" xmlns:com="http://www.travelport.com/schema/common_v17_0">
            <com:BillingPointOfSaleInfo OriginApplication="UAPI" />
            <air:FareRuleKey FareInfoRef="14T" ProviderCode="1G">
            </air:FareRuleKey>
        </air:AirFareRulesReq>
    </soapenv:Body>
</soapenv:Envelope> 
```

我为此编写的 php cod 是

创建属性数组

```
$fareopta = array();
$fareopta["BillingPointOfSaleInfo"]= array();
$fareopta["BillingPointOfSaleInfo"]["OriginApplication"]= "UAPI";
$fareopta["AirReservationSelector"] = array();
$fareopta["FareRuleLookup"]=array();
$fareopta["FareRuleKey"] = array();
$fareopta["AirPricingSolution"] = array();
$fareopta["FareRuleKey"]["FareInfoRef"] = $_GET['pricingKey'];
$fareopta["FareRuleKey"]["ProviderCode"] = "1G"; 
```

调用函数的代码

```
$client = new FareruleSoapClient(
    MY_ABSOLUTE_DIRECTORY . 
    "/uAPI_WSDLschema_Release-11.2.02-v11.2/air_v16_0/Air.wsdl"
);

$fareresult = $client->service($fareopta);

// code for FareruleSoapClient class

class FarerulesSoapClient extends SoapClient 
{

    function __construct($wsdlLocation)
    {   
        $trac["trace"]=1;
        $trac["use"]=SOAP_LITERAL;
        $trac["style"]=SOAP_DOCUMENT;
        $trac["compression"]=SOAP_COMPRESSION_ACCEPT | SOAP_COMPRESSION_GZIP | 5;
        //$trac["compression"]=SOAP_COMPRESSION_ACCEPT ;
        $trac["type_ns"]="";

        $trac["login"]=SOAP_CLIENT_USERNAME;
        $trac["password"]=SOAP_CLIENT_PASSWORD;
        $trac["location"]="https://emea.copy-webservices.travelport.com/B2BGateway/connect/uAPI/AirFareRulesService";
        $trac["action"]="http://localhost:8080/kestrel/AirFareRulesService";
        $trac["version"]="SOAP_1_1";

        parent::__construct($wsdlLocation, $trac);
    }

    function __doRequest($request, $location, $action, $version) 
    {

        $namespace1='"http://www.travelport.com/schema/air_v15_0"';
        $namespace2='"http://www.travelport.com/schema/common_v12_0"';
        $namespace3='"http://www.travelport.com/schema/common_v13_0"';

        $request=str_replace("<ns2:AirFareRulesReq","<ns2:AirFareRulesReq"." ".'TargetBranch="P107616"'." "."xmlns:ns2=".$namespace1,$request);

         return parent::__doRequest($request, $location, $action, $version);

        echo parent::__getLastRequest();
        echo parent::__getLastResponse();
    } 

    function __getLastRequest()
    {
        return parent::__getLastRequest();
    }
} 
```

但是每当我运行代码时，xml 请求都会作为另一个名为 AirRepriceReq 请求的请求进行。我认为这是因为 AirRepriceReq 和 AirFareRuleReq 都使用相同的服务。代码中提到（$fareresult = $client->service($fareopta);）。

我应该怎么做才能避免这种压倒一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T12:27:42.603

在创建 SoapClient 对象之前，我通过在我的代码中修改（限制）.wsdl 文件来绕过这个问题。

# c#-4.0 - Outlook 内存不足异常

> ID：13140685
> 
> 赞同：2
> 
> 时间：2012-10-30T14:02:12.867
> 
> 标签：c#-4.0, outlook

我收到此错误

> ```
> There is not enough free memory to run this program. Quit one or more
> programs, and then try again 
> ```

同时将邮件保存在本地。

此错误通常发生在有超过 40000 封邮件的机器上。我不断地解析 40000 封邮件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:18:31.080

不要使用 foreach - 将其转换为 oldschool

```
for (int counter = 1; counter <= Mapifolderfolder.items.Count; counter++)
{
   var item = Mapifolderfolder.items[counter];

   if ((item as MailItem) != null)
  { 
    .saveAs(filename+."msg")
   }
} 
```

# resources - ClassLoader.getSystemResource(...).getPath() 似乎返回错误的路径

> ID：13140690
> 
> 赞同：3
> 
> 时间：2012-10-30T14:02:26.900
> 
> 标签：resources, classloader

我正在尝试包装需要两个 *.db4o 数据文件的代码以便于使用。通过将文件放在 ${project_dir}/res/ 中并添加以下行，我已将数据文件添加到我的 eclipse .classpath 中：

```
<classpathentry kind="src" path="res"/> 
```

到我的.classpath。

然后，我为我的包装类定义了一个默认构造函数，它不接受任何参数，但会找到 *.db4o 文件的路径（我用来设置的编译代码需要这些路径）。我获取路径的方法是：

```
String datapath = ClassLoader.getSystemResource("resource_name").getPath(); 
```

当我在 Eclipse 中调试/运行我的代码时，这非常有用。但是，当我将其导出为 jar 时，我可以看到 *.db4o 文件以及我编译的代码在 jar 中，但返回“datapath”的路径是以下形式：

```
datapath = ${pwd}/file:${absolute_path_to_jar}!/{resource_name} 
```

jar 中的资源是否存在阻止绝对路径工作的东西？此外，为什么仅仅因为代码和资源位于 jar 文件中而导致行为不同？最后一点是，虽然我的应用程序旨在更广泛地使用（来自 PIG、python 等代码），但我正在从 Matlab 测试它，这是我获得分配给“数据路径”的奇数值的地方。

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:04:54.327

getSystemResource() 返回资源的 URL。如果您的资源被压缩在一个 jar 文件中，那么 URL 将指向它（使用“！”符号）。getPath() 返回 URL 的“路径”部分，并不总是一个实际的文件路径。URL 可以是许多事物之一，而不仅仅是一个文件。

# php - 作为视图结果的drupal 7内容类型字段

> ID：13140691
> 
> 赞同：3
> 
> 时间：2012-10-30T14:02:35.190
> 
> 标签：php, drupal, drupal-7, drupal-modules, content-type

Drupal 7：我正在寻找从视图结果生成的内容类型字段。

示例：我有一个课程内容类型和一个 course_outline 内容类型。在 course_outline 内容类型中，我想将数据库中可用的所有现有课程列为其字段之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:18:53.693

您将需要安装[实体 API 模块](http://drupal.org/project/entity)和[实体参考模块](http://drupal.org/project/entityreference)。

您可以查看[初学者的实体参考模块指南](http://drupal.org/node/1327954)以开始使用。

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T14:07:58.647

如果您正在寻找可以（通过 GUI）添加到内容类型以引用视图的字段，请查看[**viewfield 模块**](http://drupal.org/project/viewfield)

> Viewfield 提供了一个字段，该字段包含对 View 的引用，并在显示包含该字段的实体时呈现它。

但是，还有其他方法可以实现您想要的，包括使用实体引用（如本问题的其他答案中所述），或者您也可以编写自己的模块以在呈现节点时插入适当的视图。

# c# - 用户控制问题中的 Reportviewer

> ID：13140693
> 
> 赞同：1
> 
> 时间：2012-10-30T14:02:43.210
> 
> 标签：c#, asp.net, reporting-services

我有一个包含 ReportViewer 的用户控件（ascx）。我需要获取报告中的总页数（例如`RViewer.LocalReport.GetTotalPages()`）。我读到，这个值在 Reportviewer`PreRender`事件之后才可用。在此事件之后，在 aspx 页面中（包含此 ascx）；`Render`事件，我得到的值为 0。

我尝试将 Reportviewer 直接添加到另一个 aspx 页面。然后在`Render`那个 aspx 页面的情况下，我得到了 Total pages 的正确值。

为什么我不采用以前的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:02:37.790

您如何将用户控件添加到页面？在标记中？还是动态的？

鉴于报表查看器控件位于用户控件中，您如何通过用户控件将值向上传输到页面？

我相信（我可能错了）您的用户控件预渲染将在页面预渲染后触发。因此，如果您在页面的预渲染中通过用户控件到达您的报告查看器，则用户控件预渲染，因此 ReportViewer 预渲染还不会发生。

如果这是正确的，解决问题的一种方法是在用户控件的预渲染中引发一个事件，这将传递事件 args 中的页数。（您可以创建一个自定义事件参数类，或者可能重新使用 ReportViewer 命名空间中的一个。）您的页面将有一个处理此值的处理程序，并在处理程序中而不是在 pre -渲染事件处理程序。

# jquery - 是否有适用于触摸移动设备的 HTML5/jQuery Spherical Panorama 查看器

> ID：13140698
> 
> 赞同：5
> 
> 时间：2012-10-30T14:02:59.547
> 
> 标签：jquery, html, image-processing

我需要一个球形全景查看器才能放入 Webb 应用程序，最好是 HTML5 或 jQuery。用户必须能够使用手指在全景图上移动。

有没有人知道这样的东西是可用的，收取少量费用或更免费？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-09-01T20:08:58.013

这是一个老问题，但现在谁找到它（像我一样）：我认为 Pannellum 是一个很好的选择，它正在积极开发中 - [https://pannellum.org/](https://pannellum.org/) - [https://github.com/mpetroff/pannellum](https://github.com/mpetroff/pannellum)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:21:10.573

这就是你正在寻找的我认为：

[http://www.openstudio.fr/jquery.spherical.panorama/](http://www.openstudio.fr/jquery.spherical.panorama/)

# javascript - 画布，计算起点 20% 在线

> ID：13140699
> 
> 赞同：3
> 
> 时间：2012-10-30T14:03:00.490
> 
> 标签：javascript, html, canvas, drawing, line

[http://jsfiddle.net/psyketom/TUyJb/3/](http://jsfiddle.net/psycketom/TUyJb/3/)

我最近问了一个问题，根据百分比计算画布中一条线的端点：[画布，绘制一条线段](https://stackoverflow.com/questions/13135389/canvas-drawing-a-line-segment)

现在，我被困在如何计算从起点开始的行中的 X 百分比以用作实际起点。

在上面的小提琴中，我尝试镜像端点：

```
growth = 0.2;

// calculate line endpoint
current.x = start.x + (target.x - start.x) * growth;
current.y = start.y + (target.y - start.y) * growth;

// calculate line startpoint
scurrent.x = start.x + (start.x - target.x) * growth;
scurrent.y = start.y + (start.y - target.y) * growth; 
```

但这似乎并没有达到我想要的效果。

我真正的目标是制作一个函数，它会画一条线：

*   在点 x 的边界，到点 y
*   长度为 n
*   并从位置 z 开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:14:35.887

您所说的端点实际上是您的“起点”：

```
// calculate line "endpoint"
current.x = start.x + (target.x - start.x) * growth;
current.y = start.y + (target.y - start.y) * growth; 
```

这是一个返回航点的函数：

```
// start and end are points with .x and .y
// q is a number between 0.0 and 1.0
var waypoint = function (start, end, q) {

    return {
        x: start.x + (end.x - start.x) * q,
        y: start.y + (end.y - start.y) * q
    };
} 
```

现在你可以在任何你想要的地方计算航点：

```
var start = {x: 10, y: 20},
    end = {x: 120, y: 70},

    a = waypoint(start, end, 0.2),
    b = waypoint(start, end, 0.8); 
```

`a`并且`b`将从原始线的任一端指向 20%。

# php - 创建准确的圣经搜索

> ID：13140721
> 
> 赞同：1
> 
> 时间：2012-10-30T14:04:55.723
> 
> 标签：php

我正在创建一个圣经搜索。圣经搜索的问题在于人们经常输入不同类型的搜索，我需要将它们相应地分开。所以我认为最好的开始方法是删除所有空格，并在那里处理字符串。不同类型的搜索可能是：

`Genesis 1:1`- 创世记第 1 章第 1 节

`1 Kings 2:5`- 1 国王第 2 章第 5 节

`Job 3`- 工作第 3 章

`Romans 8:1-7`- 罗马书第 8 章第 1 至 7 节

`1 John 5:6-11`- 约翰一书第 5 章第 6 - 11 节。

我对不同类型的搜索并不太分阶段，但是如果有人能找到更简单的方法来做到这一点，或者知道这样做的好方法，那么请告诉我如何！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:32:46.060

这里最简单的做法是编写一个正则表达式来捕获文本，然后解析捕获的内容以查看您得到的内容。首先，假设您有测试平台：

```
$tests = array( 
    'Genesis 1:1' => 'Genesis Chapter 1, Verse 1',
    '1 Kings 2:5' => '1 Kings Chapter 2, Verse 5',
    'Job 3' => 'Job Chapter 3',
    'Romans 8:1-7' => 'Romans Chapter 8, Verses 1 to 7',
    '1 John 5:6-11' => '1 John Chapter 5, Verses 6 to 11'
); 
```

所以，你有，从左到右：

1.  书名，可选前缀为数字
2.  章号
3.  节数，可选，可选后跟一个范围。

因此，我们可以编写一个正则表达式来匹配所有这些情况：

```
((?:\d+\s)?\w+)\s+(\d+)(?::(\d+(?:-\d+)?))? 
```

现在看看我们从正则表达式中得到了什么：

```
foreach( $tests as $test => $answer) {
    // Match the regex against the test case
    preg_match( $regex, $test, $match);

    // Ignore the first entry, the 2nd and 3rd entries hold the book and chapter
    list( , $book, $chapter) = array_map( 'trim', $match);

    $output = "$book Chapter $chapter";

    // If the fourth match exists, we have a verse entry
    if( isset( $match[3])) {
        // If there is no dash, it's a single verse
        if( strpos( $match[3], '-') === false) {
            $output .= ", Verse " . $match[3];
        } else {
            // Otherwise it's a range of verses
            list( $start, $end) = explode( '-', $match[3]);
            $output .= ", Verses $start to $end";
        }
    }
    // Here $output matches the value in $answer from our test cases
    echo $answer . "\n" . $output . "\n\n";
} 
```

[您可以在此演示](http://viper-7.com/EJihDl)中看到它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:04:12.490

我知道这是疯话，但为什么不只是有一个包含 4 个字段的表单，以便他们可以指定：

1.  书
2.  章节
3.  起始诗句
4.  结尾诗[可选]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:17:56.057

我想我明白你在这里问什么。您想设计一种提取信息的算法（例如书名、章节、诗句）。

在我看来，这就像模式匹配（例如正则表达式）的工作，因为您可以定义模式，为所有有意义的场景提取数据并从那里开始工作。

实际上可能存在相当多的变体 - 也许您还应该看看自然语言处理。名称上的模糊字符串匹配可以提供更好的结果（例如，人们拼写错误的书名）。

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:22:15.283

尝试基于 preg_match_all 的东西，例如：

```
$ php -a
Interactive shell

php > $s = '1 kings 2:4 and 1 sam 4-5';
php > preg_match_all("/(\\d*|[^\\d ]*| *)/", $s, $parts);
php > print serialize($s); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T14:46:17.553

好吧好吧，我不太确定正则表达式，我还没有研究出来，所以我坚持使用更程序化的方法。我做了以下事情（这仍然是对我 5 年前编写的代码的巨大改进，这是我的目标）这似乎完美无缺：

你首先需要这个功能：

```
 function varType($str) {
        if(is_numeric($str)) {return false;}    
        if(is_string($str)) {return true;}  
    }

    $bible = array("BookNumber" => "", "Book" => "", "Chapter" => "", "StartVerse" => "", "EndVerse" => "");    
  $pos = 1; // 1 - Book Number
        // 2 - Book 
        // 3 - Chapter 
        // 4 - ':' or 'v'
        // 5 - StartVerse
        // 6 - is a dash for spanning verses '-'
        // 7 - EndVerse
    $scan = ""; $compile = array();
    //Divide into character type groups.    
    for($x=0;$x<=(strlen($collapse)-1);$x++)
    {   if($x>=1) {if(varType($collapse[$x]) != varType($collapse[$x-1])) {array_push($compile,$scan);$scan = "";}}
        $scan .= $collapse[$x];
        if($x==strlen($collapse)-1) {array_push($compile,$scan);}
    }
    //If the first element is not a number, then it is not a numbered book (AKA 1 John, 2 Kings), So move the position forward.
    if(varType($compile[0])) {$pos=2;}
    foreach($compile as $val)
    {   if(!varType($val)) 
        {   switch($pos) 
            {   case 1: $bible['BookNumber'] = $val;    break;      
                case 3: $bible['Chapter'] = $val;   break; 
                case 5: $bible['StartVerse'] = $val;    break; 
                case 7: $bible['EndVerse'] = $val;  break; 
            }
        } else {switch($pos) 
            {   case 2: $bible['Book'] = $val;      break;      
                case 4:     //Colon or 'v'
                case 6: break;  //Dash for verse spanning. 
            }}
        $pos++;
    } 
```

这将在最后为您提供一个名为“圣经”的数组，其中包含在 SQL 数据库或您可能想要的任何其他数据库上运行的所有必要数据。希望这对其他人有帮助。

# google-chrome - 为调整大小事件注册浏览器谷歌浏览器扩展

> ID：13140723
> 
> 赞同：0
> 
> 时间：2012-10-30T14:04:57.103
> 
> 标签：google-chrome, google-chrome-extension, browser

我是谷歌浏览器扩展开发的新手。我想注册我的扩展 javascript 来监听浏览器调整大小事件。我怎样才能做到这一点 ？

目前

```
window.addEventListener("load",myfunction,false); 
```

在扩展中，当我启动浏览器时，javascript 能够执行 myfunction

但

```
window.addEventListener("resize",customfunction,false); 
```

在浏览器窗口调整大小时不执行自定义功能..

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:34:02.223

您可以尝试的一件事是在内容脚本中使用以下内容：

```
window.onresize = function(event) {
     console.log("Resized");
}; 
```

每次调整窗口大小时，这都会将“调整大小”记录到控制台。考虑到这一点，您可以查看[Message Passing](http://developer.chrome.com/extensions/messaging.html)，您可以在调整窗口大小时使用它向您的`popup.js`（或其他后台脚本）发送消息，然后您可以相应地处理它。此外，显然添加此功能`chrome.windows.onResize`仍然是一个[正在进行的错误](http://code.google.com/p/chromium/issues/detail?id=44464)。

# android - 天气 XML 解析器不工作

> ID：13140726
> 
> 赞同：1
> 
> 时间：2012-10-30T14:05:04.763
> 
> 标签：android, xml, parsing

我一直在做 [新波士顿的天气教程](http://www.youtube.com/watch?v=Z1rtldBTzCE&feature=edu&list=PL2F07DBCDCC01493A&noredirect=1)

在 logcat 中，我看到以下错误：打开跟踪文件时出错：没有这样的文件或目录（2）。模拟器可以运行程序，但是当我在上方的编辑文本框中键入“stad”时，它不会从 URL 中返回任何内容。你能告诉我我做错了什么吗？这是我的三个类和 XML 文件。

```
package com.example.weatherxml;

import java.net.URL;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {

static final String baseURL =     "http://api.yr.no/weatherapi/seaapproachforecast/1.0/?location=";
TextView tv;
EditText city;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.activity_main);
   Button b = (Button)findViewById(R.id.activate);
   tv = (TextView)findViewById(R.id.textView1);
   city = (EditText)findViewById(R.id.city);
  //state = (EditText)findViewById(R.id.state);
  b.setOnClickListener(this);

  }

public void onClick(View v) {
    // TODO Auto-generated method stub
    String c = city.getText().toString();
    //String s = state.getText().toString();

    StringBuilder URL = new StringBuilder(baseURL);
    URL.append(c);
    String fullUrl = URL.toString();

    try{
        URL website = new URL(fullUrl);
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();
        HandlingXMLStuff doingWork = new HandlingXMLStuff();
        xr.setContentHandler(doingWork);
        xr.parse(new InputSource(website.openStream()));
        String information = doingWork.getInformation();
        tv.setText(information);
    }catch (Exception e){
    tv.setText("error");
    }

}
}

package com.example.weatherxml;

 import org.xml.sax.Attributes;
 import org.xml.sax.SAXException;
 import org.xml.sax.helpers.DefaultHandler;

 import android.app.Activity;
 import android.os.Bundle;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.TextView;

 public class HandlingXMLStuff extends DefaultHandler {

   private XMLDataCollected info = new XMLDataCollected();
   public String getInformation(){
   return info.dataToString();
                             }
@Override
public void startElement(String uri, String localName, String qName,
    Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub
    if (localName.equals("location")){
    String city = attributes.getValue("name");
    info.setCity(city);
}else if (localName.equals("windSpeed")){
String t = attributes.getValue("mps");
int temp = Integer.parseInt(t);
info.setTemp(temp);

}

 }
 }

 package com.example.weatherxml;

 public class XMLDataCollected {

int temp = 0; 
String city = null;

public void setCity(String c){
    city = c;
}
public void setTemp(int t){
    temp = t;
}
public String dataToString(){
    return "In " + city + " the Current windspeed is " + temp + "mps ";
}
}

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

<EditText
    android:id="@+id/city"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="fill_horizontal"
    android:ems="10"
    android:inputType="text"
    android:text="" />

<EditText
    android:id="@+id/state"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/city"
    android:layout_gravity="fill_horizontal"
    android:ems="10"
    android:inputType="text"
    android:text="" />

<Button
    android:id="@+id/activate"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="34dp"
    android:text="Generate" 
    tools:context=".MainActivity" />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:54:10.597

在我的网络浏览器中尝试**http://api.yr.no/weatherapi/seaapproachforecast/1.0/?location=montreal**

该页面如下：

> > 发生错误！
> 
> 生成了以下错误消息：
> 
> [2012 年 12 月 6 日星期四 23:50:06] [错误] 参数“位置”无效：蒙特利尔不是有效值。

API在这里说[链接](http://api.met.no/weatherapi/locationforecastlts/1.1/documentation)

> [http://api.met.no/weatherapi/locationforecastlts/1.1/?lat=60.10;lon=9.58](http://api.met.no/weatherapi/locationforecastlts/1.1/?lat=60.10;lon=9.58)

```
<weatherdata xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://api.met.no/weatherapi/locationforecastlts/1.1/schema" created="2012-12-06T23:52:35Z">
<meta>
<model name="YR" termin="2012-12-06T12:00:00Z" runended="2012-12-06T18:16:13Z" nextrun="2012-12-07T06:00:00Z" from="2012-12-07T00:00:00Z" to="2012-12-09T06:00:00Z"/>
<model name="EPS" termin="2012-12-06T12:00:00Z" runended="2012-12-06T21:54:51Z" nextrun="2012-12-07T09:45:00Z" from="2012-12-09T12:00:00Z" to="2012-12-16T06:00:00Z"/>
</meta>
<product class="pointData">
<time datatype="forecast" from="2012-12-07T00:00:00Z" to="2012-12-07T00:00:00Z">
<location altitude="485" latitude="60.1000" longitude="9.5800">
<temperature id="TTT" unit="celcius" value="-11.8"/>
<windDirection id="dd" deg="59.3" name="NE"/>
<windSpeed id="ff" mps="1.8" beaufort="1" name="Flau vind"/>
<humidity value="86.3" unit="percent"/>
<pressure id="pr" unit="hPa" value="1009.5"/>
<cloudiness id="NN" percent="28.8"/>
<fog id="FOG" percent="0.0"/>
<lowClouds id="LOW" percent="0.0"/>
<mediumClouds id="MEDIUM" percent="0.4"/>
<highClouds id="HIGH" percent="27.8"/>
<temperatureProbability unit="probabilitycode" value="0"/>
<windProbability unit="probabilitycode" value="0"/>
</location>
</time>
<time datatype="forecast" from="2012-12-06T23:00:00Z" to="2012-12-07T00:00:00Z">
<location altitude="485" latitude="60.1000" longitude="9.5800">
<precipitation unit="mm" value="0.0" minvalue="0.0" maxvalue="0.0"/>
<symbol id="LIGHTCLOUD" number="2"/>
</location>
</time> 
```

ETC...

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:49:57.933

解决方案编辑：

将此添加到您的清单中，除了您无法将小数解析为 int 之外，它将起作用。

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

///////////////////////////////////////// ///////////////////////////

1) 在您尝试通话之前，您是否记录了 fullUrl 以查看其是否正确？

```
 Log.e("URL:",fullUrl); 
```

2）我没有看到你的“doingWork”代码。（解析出来）

3）个人意见：除非你这样做是为了学习 xml，否则我会观看他的 json 视频并转到 worldweatheronline.com 并在那里注册一个 api 密钥。它将更少的代码和更快的速度。另外，您将成为一个更好的程序员，因为您将不得不通过修改他的代码来使解析器成为您自己。是的，它的工作，但最终它是值得的。

# matlab - 从matlab中的文件夹中删除内容

> ID：13140727
> 
> 赞同：4
> 
> 时间：2012-10-30T14:05:05.230
> 
> 标签：matlab, directory

在 matlab 代码中，我在当前工作目录中名为“results”的文件中的特定迭代后生成文件。当我想下次运行代码时，先前运行创建的文件也存在于结果文件夹中。在 CI 中会这样做

```
(void) system("rm -rf results/*"); 
```

每次代码开始执行时，如何删除文件夹“结果”的内容？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T14:07:52.387

`system('rm -rf results/*')`应该与您的 C 代码完全相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-30T09:51:19.287

`rmdir()`或者，您也可以使用带有参数的内置函数`s`来删除给定文件夹中的所有子文件夹和文件：

```
rmdir('results', 's') 
```

请注意，您的`results`文件夹也将被删除，因此您的代码需要再次创建一个空文件夹（请参阅 参考资料`mkdir()`）。

此外，我建议始终使用绝对文件路径。

# android - 将对象传递给另一个活动

> ID：13140731
> 
> 赞同：0
> 
> 时间：2012-10-30T14:05:18.610
> 
> 标签：android, android-activity

**情况**

在我的闹钟应用程序中，我`NewAlarmActivity`通过单击一个按钮来启动一个。在用户做出所有选择后，会设置警报并调用 `finish()。

**此事**

我创建了一个`LinearLayout`包含图像和文本的新对象。该布局必须添加到先前活动的屏幕（`LinearLayout`放置在 a中的另一个`ScrollView`），以便用户能够看到警报集。不知何故，我必须将该`LinearLayout`对象传递给第一个活动，并告诉它接收该对象并将其添加到屏幕上。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:09:56.947

你只需要阅读一些关于`startActivityForResult()`.

顺便说一句，恕我直言，您不应该`LinearLayout`在活动之间传输您的对象，这很难看。

[如何在 Android 上管理“startActivityForResult”？](https://stackoverflow.com/questions/10407159/android-how-to-manage-start-activity-for-result)

[开始活动并获得结果](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

*这个问题被问了无数次...*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:09:14.167

不，您不必这样做。尝试将数据存储到数据库中的方法，然后在进入该活动时，根据您拥有的数据构建布局。这比将布局从一个活动传递到另一个活动要好得多。

# html - Safari 在锚元素上忽略 width:0

> ID：13140733
> 
> 赞同：3
> 
> 时间：2012-10-30T14:05:30.597
> 
> 标签：html, css, safari

在Safari 以外的任何浏览器中查看[这个小提琴。](http://jsfiddle.net/NzscL/2/)您应该看到 3 个红色块彼此相邻，每个块的右侧有 5 个像素的边距。

如果您在 Safari 中查看[相同的小提琴](http://jsfiddle.net/NzscL/2/)，您会看到块之间的间距更大。似乎包含文本节点的宽度（尝试删除`overflow: hidden`）。

奇怪的是，我在任何地方都找不到有关此的任何信息。

有谁知道如何解决这个问题，以便 Safari 中的块看起来与任何其他浏览器一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:09:29.807

试着`font-size: 0px`让它在 Safari 中看起来一样。

# java - 如何在其他类中获取 JLabel 的值

> ID：13140734
> 
> 赞同：1
> 
> 时间：2012-10-30T14:05:30.287
> 
> 标签：java, swing, jbutton, jlabel

我在 class1 中设置了 JLabel 的值

```
 NewLabel.setText("xyz"); 
```

我可以使用读取 Jlabel 的值

```
 NewLabel.getText(); 
```

现在我想知道如何使用按钮单击获取 Class2 中 JLabel 的值

```
 public void actionPerformed(ActionEvent arg0){} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:00:00.277

在类 1 中创建一个返回 NewLabel 文本的方法（您可以通过将 NewLabel 的文本放入 String 对象中来实现，例如 str，然后返回 str）。

现在在类 2 中，创建类 1 的对象，（例如 Class1 cl1=new Class1();)。现在只需调用您在类 1 中创建的方法（例如，cl1.getNewLabelText()) .getNewLabelText() 是一个示例您可以为为类 1 创建的方法提供名称。

# django - 带有 django-ratings 的奇怪错误消息

> ID：13140752
> 
> 赞同：0
> 
> 时间：2012-10-30T14:06:42.973
> 
> 标签：django, django-ratings

我收到一条关于 [django-ratings][1] 的奇怪错误消息。以下在我的 urls.py 中：

```
url(r'^rate/(?P<object_id>\d+)/(?P<score>\d+)/', AddRatingFromModel(),{
    'app_label': 'spiceapp',
    'model': 'spice',
    'field_name': 'rating',
}), 
```

如果我导航到此页面：`/spiceapp/rate/1/2`，我会收到以下错误：

> 渲染时捕获 AttributeError：“AddRatingFromModel”对象没有属性“**名称**”

什么会导致这种情况发生？

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/spiceapp/rate/1/2/

Django Version: 1.3.1
Python Version: 2.7.2
Installed Applications:
['django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.humanize',
 'django.contrib.markup',
 'mptt',
 'treenav',
 'djangoratings',
 'django.contrib.databrowse',
 'pinax.templatetags',
 'django_facebook',
 'aiteo',
 'haystack',
 'notification',
 'staticfiles',
 'debug_toolbar',
 'mailer',
 'uni_form',
 'crispy_forms',
 'django_openid',
 'ajax_validation',
 'timezones',
 'emailconfirmation',
 'announcements',
 'pagination',
 'friends',
 'messages',
 'oembed',
 'groups',
 'threadedcomments',
 'wakawaka',
 'swaps',
 'tagging',
 'bookmarks',
 'photologue',
 'avatar',
 'flag',
 'microblogging',
 'locations',
 'django_sorting',
 'tagging_ext',
 'smuggler',
 'voting',
 'pinax.apps.signup_codes',
 'pinax.apps.analytics',
 'pinax.apps.blog',
 'pinax.apps.tribes',
 'pinax.apps.photos',
 'pinax.apps.topics',
 'pinax.apps.threadedcomments_extras',
 'about',
 'account',
 'waitinglist',
 'spiceapp',
 'bbauth',
 'profiles']
Installed Middleware:
['django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django_openid.consumer.SessionConsumer',
 'django.contrib.messages.middleware.MessageMiddleware',
 'groups.middleware.GroupAwareMiddleware',
 'pinax.apps.account.middleware.AuthenticatedMiddleware',
 'pinax.apps.account.middleware.LocaleMiddleware',
 'django.middleware.doc.XViewMiddleware',
 'pagination.middleware.PaginationMiddleware',
 'django_sorting.middleware.SortingMiddleware',
 'pinax.middleware.security.HideSensistiveFieldsMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware']

Template error:
In template /Users/nb/Desktop/myenv2/lib/python2.7/site-packages/debug_toolbar/templates/debug_toolbar/base.html, error at line 48
   Caught AttributeError while rendering: 'AddRatingFromModel' object has no attribute '__name__'
   38 :     </div>

   39 :     {% for panel in panels %}

   40 :         {% if panel.has_content %}

   41 :             <div id="{{ panel.dom_id }}" class="panelContent">

   42 :                 <div class="djDebugPanelTitle">

   43 :                     <a href="" class="djDebugClose">{% trans "Close" %}</a>

   44 :                     <h3>{{ panel.title|safe }}</h3>

   45 :                 </div>

   46 :                 <div class="djDebugPanelContent">

   47 :                     <div class="scroll">

   48 :                          {{ panel.content|safe }} 

   49 :                     </div>

   50 :                 </div>

   51 :             </div>

   52 :         {% endif %}

   53 :     {% endfor %}

   54 :     <div id="djDebugWindow" class="panelContent"></div>

   55 : </div>

   56 : 

Traceback:
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  178\.                 response = middleware_method(request, response)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/debug_toolbar/middleware.py" in process_response
  104\.                     smart_unicode(self.debug_toolbars[request].render_toolbar() + self.tag))
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/debug_toolbar/toolbar/loader.py" in render_toolbar
  78\.         return render_to_string('debug_toolbar/base.html', context)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/loader.py" in render_to_string
  183\.         return t.render(Context(dictionary))
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
  60\.     return self.nodelist.render(context)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py" in render_node
  73\.             result = node.render(context)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/defaulttags.py" in render
  227\.                 nodelist.append(node.render(context))
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/defaulttags.py" in render
  311\.             return self.nodelist_true.render(context)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in render
  744\.                 bits.append(self.render_node(node, context))
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py" in render_node
  73\.             result = node.render(context)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py" in render
  90\.             output = self.filter_expression.resolve(context)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in resolve
  510\.                 obj = self.var.resolve(context)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in resolve
  653\.             value = self._resolve_lookup(context)
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in _resolve_lookup
  698\.                             current = current()
File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/debug_toolbar/panels/request_vars.py" in content
  35\.             'view_func': '%s.%s' % (self.view_func.__module__, self.view_func.__name__),

Exception Type: TemplateSyntaxError at /spiceapp/rate/1/2/
Exception Value: Caught AttributeError while rendering: 'AddRatingFromModel' object has no attribute '__name__' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:30:09.803

这看起来像是[django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)中的一个老错误。您碰巧知道您使用的是哪个版本吗？因为该文件看起来像[这个提交](https://github.com/django-debug-toolbar/django-debug-toolbar/blob/4baa51e0be674428a2314e08efe43628184bc42a/debug_toolbar/panels/request_vars.py)中的那个。从那时起，对该文件进行了一些修复：例如，[这个](https://github.com/django-debug-toolbar/django-debug-toolbar/commit/f2aeaaa739c029cd6fed9cb9e50455b670a6b7ca)似乎专门解决了您的问题。

无论如何，您使用的版本似乎早于 2011 年 6 月 2 日。我会尝试更新您的环境。

# linux - 在linux中绑定wifi接口

> ID：13140753
> 
> 赞同：2
> 
> 时间：2012-10-30T14:06:46.953
> 
> 标签：linux, wifi, berkeley-sockets

我正在开发一个具有 LAN 和 WIFI 接口的基于 linux 的系统。但我必须只将我的套接字与 wifi 接口绑定。有什么通用的方法可以找出哪个接口是wifi，所以我可以用它来装我的插座吗？如果没有，我是否可以绑定并接收来自两个接口的请求？

目前，我正在使用 INADDR_ANY 进行绑定。我知道如何与 eth0 等特定接口绑定，但我找不到任何方法来确定 eth0 是否是 wifi 接口；至少在 C 中。使用 INADDR_ANY 我将接收发送到任何接口的数据包，但我的发送可能会尝试通过 LAN 接口发送它；这不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:44:09.100

这个片段可以帮助你，它比我想象的更复杂：

```
if (getifaddrs(&ifaddrs) < 0) {
my_loge(CRIT, "address detection failed");
return(0);
}

// zero
count = 0;

// unset all but CAP_HOST and CAP_ROUTER
sysinfo->cap &= (CAP_HOST|CAP_ROUTER);
sysinfo->cap_active &= (CAP_HOST|CAP_ROUTER);
// reset counter
sysinfo->physif_count = 0;

// mark all interfaces
TAILQ_FOREACH(netif, netifs, entries) {
netif->type = NETIF_OLD;
}

for (ifaddr = ifaddrs; ifaddr != NULL; ifaddr = ifaddr->ifa_next) {

// skip interfaces without addresses
if (ifaddr->ifa_addr == NULL) {
    my_log(INFO, "skipping interface %s", ifaddr->ifa_name);
    continue;
}

// only handle datalink addresses
if (ifaddr->ifa_addr->sa_family != NETIF_AF)
    continue;

// prepare ifr struct
memset(&ifr, 0, sizeof(ifr));
strlcpy(ifr.ifr_name, ifaddr->ifa_name, sizeof(ifr.ifr_name));

// skip non-ethernet interfaces
memcpy(&saddrll, ifaddr->ifa_addr, sizeof(saddrll));
if (saddrll.sll_hatype != ARPHRD_ETHER) {
    my_log(INFO, "skipping interface %s", ifaddr->ifa_name);
    continue;
}
index = saddrll.sll_ifindex;
memcpy(&saddrdl, ifaddr->ifa_addr, sizeof(saddrdl));
if ((saddrdl.sdl_type != IFT_BRIDGE) &&
    (saddrdl.sdl_type != IFT_ETHER)) {
if (saddrdl.sdl_type != IFT_ETHER) {
    my_log(INFO, "skipping interface %s", ifaddr->ifa_name);
    continue;
}
index = saddrdl.sdl_index;

// check for interfaces that are down
enabled = 0;
if (ioctl(sockfd, SIOCGIFFLAGS, (caddr_t)&ifr) >= 0)
    enabled = (ifr.ifr_flags & IFF_UP);

// detect interface type
type = netif_type(sockfd, index, ifaddr, &ifr);

if (type == NETIF_REGULAR) { 
    my_log(INFO, "found ethernet interface %s", ifaddr->ifa_name);
    sysinfo->physif_count++;
} else if (type == NETIF_WIRELESS) {
    my_log(INFO, "found wireless interface %s", ifaddr->ifa_name);
    sysinfo->cap |= CAP_WLAN;
    sysinfo->cap_active |= (enabled == 1) ? CAP_WLAN : 0;
} else if (type == NETIF_TAP) {
    my_log(INFO, "found tun/tap interface %s", ifaddr->ifa_name);
} else if (type == NETIF_BONDING) {
    my_log(INFO, "found bond interface %s", ifaddr->ifa_name);
} else if (type == NETIF_BRIDGE) {
    my_log(INFO, "found bridge interface %s", ifaddr->ifa_name);
    sysinfo->cap |= CAP_BRIDGE; 
    sysinfo->cap_active |= (enabled == 1) ? CAP_BRIDGE : 0;
} else if (type == NETIF_VLAN) {
    my_log(INFO, "found vlan interface %s", ifaddr->ifa_name);
} else if (type == NETIF_INVALID) {
    my_log(INFO, "skipping interface %s", ifaddr->ifa_name);
    continue;
} 
```

完整文件位于此处： [此处](https://www.google.it/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&ved=0CE8QFjAE&url=https://ladvd.googlecode.com/hg-history/default/src/netif.c&ei=EuePUL-fOcqP4gSov4HQBg&usg=AFQjCNFYAVRMLs_rrQF2DfYD5BEWFmTlUg&sig2=lTlohgdq9rvY6m6Wy-ixHA)

# java - 带有两个指针的 JSlider

> ID：13140754
> 
> 赞同：2
> 
> 时间：2012-10-30T14:06:47.700
> 
> 标签：java, swing, user-interface, jslider

我想为用户提供一种方便的方式从 swing gui 输入范围。我可以使用什么？一个完美的选择是带有两个指针的滑块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:21:04.573

[SwingX](http://java.net/projects/swingx/downloads/directory/releases)具有 JXMultiThumbSlider，这正是您正在寻找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:34:00.713

顺便说一句，RangeSlider 的这个实现对我来说更简单，但是如果你先实现 Renderer，swingx 的东西也应该可以工作。

[http://ernienotes.wordpress.com/2010/12/27/creating-a-java-swing-range-slider/](http://ernienotes.wordpress.com/2010/12/27/creating-a-java-swing-range-slider/)

# gwt - Gwt + adfs 组合

> ID：13140755
> 
> 赞同：0
> 
> 时间：2012-10-30T14:06:48.320
> 
> 标签：gwt, servlets, adfs2.0

我是 adfs 的新手，我想做的是在我的 gwt 项目中通过单击登录提供 afds 登录。基本上在我的 gwt 应用程序中单击登录按钮时，如果已建立，它应该从当前的 adfs 会话中获取用户，或者直接从 adfs 获取它。

我该怎么办？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T06:31:21.877

这可以通过使用 fedlet + adfs 的概念来实现。

# design-patterns - 具有多个存储选项的持久数据树的模式？

> ID：13140757
> 
> 赞同：0
> 
> 时间：2012-10-30T14:06:48.950
> 
> 标签：design-patterns, data-structures, tree, repository, persistence

我有一个现实世界的问题，我将尝试将其抽象为一个说明性示例。

所以想象一下我在树中有数据对象，父对象可以访问子对象，子对象可以访问父对象：

```
// Interfaces
interface IParent<TChild> { List<TChild> Children; }
interface IChild<TParent> { TParent Parent; }

// Classes
class Top : IParent<Middle> {}
class Middle : IParent<Bottom>, IChild<Top> {}
class Bottom : IChild<Middle> {}

// Usage
var top = new Top();
var middles = top.Children; // List<Middle>
foreach (var middle in middles) {
    var bottoms = middle.Children; // List<Bottom>
    foreach (var bottom in bottoms) {
        var middle = bottom.Parent; // Access the parent
        var top = middle.Parent; // Access the grandparent
    }
} 
```

所有三个数据对象都具有保存在两个数据存储（例如数据库和 Web 服务）中的属性，它们需要反映并与存储同步。有些对象只从 Web 服务请求，有些只向它写入。

**数据映射器**

我最喜欢的数据访问模式是[Data Mapper](http://msdn.microsoft.com/en-us/magazine/dd569757.aspx#id0400052)，因为它将数据对象本身与与数据存储的通信完全分开：

```
class TopMapper {
    public Top FetchById(int id) {
        var top = new Top(DataStore.TopDataById(id));
        top.Children = MiddleMapper.FetchForTop(Top);
        return Top;
    }
}

class MiddleMapper {
    public Middle FetchById(int id) {
         var middle = new Middle(DataStore.MiddleDataById(id));
         middle.Parent = TopMapper.FetchForMiddle(middle);
         middle.Children = BottomMapper.FetchForMiddle(bottom);
         return middle;
    }
} 
```

这样我可以每个数据存储有一个映射器，并从我想要的映射器构建对象，然后使用我想要的映射器将其保存回来。

这里有一个循环引用，但我想这不是问题，因为大多数语言只能存储对对象的内存引用，因此实际上不会有无限数据。

这样做的问题是，每次我想构造一个新的`Top`, `Middle`or时，它都需要在该对象的or属性`Bottom`中构建整个对象树，其中包含所有数据存储请求和所需的内存使用情况。在现实生活中，我的树比这里展示的要大得多，所以这是个问题。`Parent``Children`

**对象中的请求**

在此对象请求它们`Parent`的 s 和`Children`它们自己：

```
class Middle {
    private List<Bottom> _children = null; // cache
    public List<Bottom> Children {
        get {
            _children = _children ?? BottomMapper.FetchForMiddle(this);
            return _children;
        }
        set {
            BottomMapper.UpdateForMiddle(this, value);
            _children = value;
        }
    }
} 
```

我认为这是[存储库模式](http://msdn.microsoft.com/en-us/magazine/dd569757.aspx#id0400058)的一个例子。那是对的吗？

这个解决方案看起来很简洁——数据只在您需要时从数据存储中请求，然后如果您想再次请求它，它会存储在对象中，避免进一步的请求。

但是，我有两个不同的数据源。有一个数据库，但也有一个 Web 服务，我需要能够从 Web 服务创建一个对象并将其保存回数据库，然后从数据库再次请求它并更新 Web 服务。

这也让我感到不安，因为数据对象本身不再对数据源一无所知。我们引入了一个新的依赖项，更不用说循环依赖项了，这使得测试变得更加困难。这些对象现在掩盖了它们与数据库的通信。

**其他解决方案**

是否有任何其他解决方案可以解决多个商店问题，但也意味着我不需要每次都构建/请求所有数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:13:08.393

你真的在问两个不相关的问题。是的，存储库模式应该导致从商店中提取项目，其中项目本身（实体）对商店一无所知。因此，您通常拥有实现 CRUD 的存储库，并且每次您需要一个实体时，您都可以从那里获取它们。我不明白映射器的意义，也不明白你为什么需要那个中产阶级..？

第二个问题是如何处理可能不是一次全部构建的大树。由于您使用设计模式对此进行了标记，因此建议树类应该实现[Composite](http://en.wikipedia.org/wiki/Composite_pattern)而不是“映射器”，您应该有一个[Builder](http://en.wikipedia.org/wiki/Builder_pattern)是合适的。然后那个 Builder 必须能够分阶段构建事物。这是一个有趣的问题。[在依赖注入的世界中， OpenSessionInView](https://community.jboss.org/wiki/OpenSessionInView)使这更加复杂。

尝试考虑一个没有仅用于位置区分的类的版本，我认为 Composite 将使这成为可能。

# android - Android listview更新不刷新startactivity

> ID：13140761
> 
> 赞同：1
> 
> 时间：2012-10-30T14:06:54.280
> 
> 标签：android, listview

我正在开发一个看起来像 Facebook 的 Android 应用程序。`FeedsActivity.java`有一个显示用户提要的 ListView。单击 ListView 项目时，它会启动活动`ViewActivity.java`

`ViewActivity`显示一个目标提要。如果用户单击 中的点*赞按钮*，点`ViewAcitivity`赞数将被更新，然后如果用户单击返回按钮，`FeedsActivity`将显示。

我想在不刷新的情况下更新 ListView 项目的*类似*计数。

这是我的逻辑

**FeedsActivity.java**

```
onCreate(){
 // http request to get json feeds
 // parsing json
 // setAdapter
}

setOnItemClickListener(){
 // intent.putExtra() // FEED DATA
 // startActivity
} 
```

**ViewActivity.java**

```
public void goBack(View v){
 // intent.putExtra() // FEED DATA INCLUDE UPDATE LIKE COUNT
 // startActivityForResult()
} 
```

当我调用`startActivityForResult()`时`ViewActivity.java`， `onCreate()`会调用“FeedsActivity.java”，以便更新我的 ListView。（请求 json 提要和 setAdapter）:(

我只想更新点赞数，*例如*Facebook 应用。

有没有其他好办法？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:16:41.377

看看 你的适配器的[notifyDataSetChanged()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)。这个方法基本上告诉适配器提供的数据已经改变，它应该更新`ListView`. 所以这将使您`ListView`刷新并显示新数据

# php - 是否有任何代码自动保存用户按下到数据库的字符 - 没有发送按钮 -

> ID：13140764
> 
> 赞同：-3
> 
> 时间：2012-10-30T14:07:09.993
> 
> 标签：php, javascript, mysql, ajax, database

它可以是 JavaScript、Ajax 或 PHP。需要一个真正的代码部分或良好的指南。有链接吗？

目的：我正在计划一个键盘游戏，它使用用户按下的字符运行。如果用户按下按钮 a，我必须将此数据发送到 MySQL 数据库。这可能吗？如果是，使用哪个代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:10:07.570

如果您使用 jQuery 框架，您可以使用[keypress](http://api.jquery.com/keypress/)事件（如果您不使用 jQuery，您仍然可以使用[keypress 事件](http://www.w3schools.com/jsref/event_onkeypress.asp)，但 jQuery 更容易！）

从文档：

```
$("#target").keypress(function(event) {
  if ( event.which == 13 ) {
     event.preventDefault();
  }
} 
```

`e.which`将使您可以访问用户按下的键码。有了这个，您可以轻松地响应特定的按键。13 是 'enter' 的 javascript[键盘代码](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)因此，也许您想将所有输入保存到用户在键盘上键入的变量中，当输入输入时，您可以使用 ajax 发送该数据。jQuery 使这变得非常简单。

# php - .htaccess 奇怪的行为

> ID：13140765
> 
> 赞同：0
> 
> 时间：2012-10-30T14:07:17.363
> 
> 标签：php, apache, .htaccess, mod-rewrite

我目前正在将 Apache2 PHP5 生产实例迁移到本地环境。

在 .htaccess 文件中，我发现了以下重写规则：

```
RewriteRule ^profile/?$ profile.php 
```

这是工作。但是，当尝试访问 localhost/profile 时，我看到的是一个空页面，并且这个添加到了响应标头中

```
Content-Location:profile.class.php 
```

如果我将规则更改为 ^profile/?$ 以外的任何内容，请说 ^profil/?$ 一切正常。

什么会导致这种奇怪的行为、命名冲突、保留字？

这是来自 mod_rewrite 的日志

```
% tail -f rewrite.log                          
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9c00a0/subreq] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.php -> profile.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9c00a0/subreq] (3) [perdir /var/www/] applying pattern '^sign-up/?([a-f0-9]+)?/?([a-f0-9]+)?/?$' to uri 'profile.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9c00a0/subreq] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.php -> profile.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9c00a0/subreq] (3) [perdir /var/www/] applying pattern '^sign-out/?$' to uri 'profile.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9c00a0/subreq] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.php -> profile.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9c00a0/subreq] (3) [perdir /var/www/] applying pattern '^new-app/?(budget)?/?([A-Za-z0-9-]+)?/?$' to uri 'profile.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9c00a0/subreq] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.php -> profile.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9c00a0/subreq] (3) [perdir /var/www/] applying pattern '^profile/([a-f0-9]{50})/?([a-f0-9]{50})?/?' to uri 'profile.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9c00a0/subreq] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.php -> profile.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9c00a0/subreq] (3) [perdir /var/www/] applying pattern '^profile/?([a-z0-9-]+)?/?$' to uri 'profile.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9c00a0/subreq] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.php -> profile.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^sign-in/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^features/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^features/([a-z0-9-]+)/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^terms/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^(all|books|business|education|entertainment|finance|games|healthcare-and-fitness|lifestyle|medical|music|navigation|news|photography|productivity|reference|social-networking|sports|travel|utilities|weather)/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^(books|business|education|entertainment|finance|games|healthcare-and-fitness|lifestyle|medical|music|navigation|news|photography|productivity|reference|social-networking|sports|travel|utilities|weather)/([A-Za-z0-9-]+)/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^(books|business|education|entertainment|finance|games|healthcare-and-fitness|lifestyle|medical|music|navigation|news|photography|productivity|reference|social-networking|sports|travel|utilities|weather)/([A-Za-z0-9-]+)/invite/?([a-z0-9-]+)?/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^(books|business|education|entertainment|finance|games|healthcare-and-fitness|lifestyle|medical|music|navigation|news|photography|productivity|reference|social-networking|sports|travel|utilities|weather)/([A-Za-z0-9-]+)/(app-details|testers|test-reports|test-report|start|update|contact-tester)/?(\d+)?/?([a-z0-9-]+)?/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^forgot-password/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^connect-with-facebook/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^account/?(confirm-email|reset-password|send-confirmation-link)/?([A-Za-z0-9]+)?/?([_\.0-9a-zA-Z-%+]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+([a-zA-Z]{2,4}$))?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^public-scripts/?(add-device|propose-projects|generate-mass-payment|edit-device|your-devices|get-app-password|remove-device|beta-test-request|change-project-tester-status|download-udids|download-app|open-report|rate-report|reply|invite-search|invite-user|ignore-invite|uninvite|add-device-over-air|save-device-over-air|send-air-link|search-android-device)/?([A-Za-z0-9]+)?/?([A-Za-z0-9\.]+)?/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^rss/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] strip per-dir prefix: /var/www/profile.class.php -> profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (3) [perdir /var/www/] applying pattern '^feed/?$' to uri 'profile.class.php'
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9d20a0/initial] (1) [perdir /var/www/] pass through /var/www/profile.class.php
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9cd0a0/initial] (1) [perdir /var/www/] pass through /var/www/favicon.ico
192.168.0.31 - - [30/Oct/2012:16:18:31 +0100] [192.168.0.40/sid#7f930db80978][rid#7f930d9c12c0/initial/redir#1] (3) [perdir /var/www/] strip per-dir prefix: /var/www/404.php -> 404.php 
```

.htaccess

```
RewriteEngine on

RewriteRule ^sign-up/?([a-f0-9]+)?/?([a-f0-9]+)?/?$ sign-up.php?project_token=$1&invite_token=$2
RewriteRule ^sign-out/?$ sign-out.php
RewriteRule ^new-app/?(budget)?/?([A-Za-z0-9-]+)?/?$ new-app.php?stage=$1&app=$2
RewriteRule ^profile/([a-f0-9]{50})/?([a-f0-9]{50})?/? profile-other.php?token=$1&project=$2
RewriteRule ^profile/?([a-z0-9-]+)?/?$ profile.php?profile_menu_cat=$1
RewriteRule ^admin/?([a-z0-9-]+)?/?$ admin.php?profile_menu_cat=$1
RewriteRule ^faq/?(our-application|for-beta-testers|for-developers)?/?$ faq.php?app_cat=$1
RewriteRule ^get/?([A-Za-z0-9-]+)/?([a-z0-9]+)\.?(ipa|plist|apk)?/?$ download.php?url=$1&token=$2&$3
RewriteRule ^contact/?$ contact.php
RewriteRule ^sign-in/?$ sign-in.php
RewriteRule ^features/?$ features.php
RewriteRule ^features/([a-z0-9-]+)/?$ features.php?sub=$1
RewriteRule ^terms/?$ terms.php
RewriteRule ^(all|books|business|education|entertainment|finance|games|healthcare-and-fitness|lifestyle|medical|music|navigation|news|photography|productivity|reference|social-networking|sports|travel|utilities|weather)/?$ browse.php?category=$1

RewriteRule ^(books|business|education|entertainment|finance|games|healthcare-and-fitness|lifestyle|medical|music|navigation|news|photography|productivity|reference|social-networking|sports|travel|utilities|weather)/([A-Za-z0-9-]+)/?$ app.php?category=$1&app=$2&app_cat=$3&extra=$4

RewriteRule ^(books|business|education|entertainment|finance|games|healthcare-and-fitness|lifestyle|medical|music|navigation|news|photography|productivity|reference|social-networking|sports|travel|utilities|weather)/([A-Za-z0-9-]+)/invite/?([a-z0-9-]+)?/?$ invite.php?category=$1&app=$2&app_cat=invite&extra=$4

RewriteRule ^(books|business|education|entertainment|finance|games|healthcare-and-fitness|lifestyle|medical|music|navigation|news|photography|productivity|reference|social-networking|sports|travel|utilities|weather)/([A-Za-z0-9-]+)/(app-details|testers|test-reports|test-report|start|update|contact-tester)/?(\d+)?/?([a-z0-9-]+)?/?$ app.php?category=$1&app=$2&app_cat=$3&extra=$5&version=$4

RewriteRule ^forgot-password/?$ forgot-password.php
RewriteRule ^connect-with-facebook/?$ connect-with-facebook.php
RewriteRule ^account/?(confirm-email|reset-password|send-confirmation-link)/?([A-Za-z0-9]+)?/?([_\.0-9a-zA-Z-%+]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+([a-zA-Z]{2,4}$))?$ account.php?1=$1&2=$2&3=$3
RewriteRule ^public-scripts/?(add-device|propose-projects|generate-mass-payment|edit-device|your-devices|get-app-password|remove-device|beta-test-request|change-project-tester-status|download-udids|download-app|open-report|rate-report|reply|invite-search|invite-user|ignore-invite|uninvite|add-device-over-air|save-device-over-air|send-air-link|search-android-device)/?([A-Za-z0-9]+)?/?([A-Za-z0-9\.]+)?/?$ public-scripts.php?1=$1&2=$2&3=$3
RewriteRule ^rss/?$ rss.php
RewriteRule ^feed/?$ rss.php

ErrorDocument 404 /404.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:59:37.350

这听起来像 mod_negotiation 在不需要的时候做它的事情。该模块将尝试将请求 URI 的文件映射匹配到与请求文件“接近”的多个不同文件。您可以通过关闭该`Multiviews`选项来关闭它。从您看到该语句的 vhost/server 配置中将其删除`Options`，或者您可以尝试在您的 htaccess 中否定它：

```
Options -Multiviews 
```

# iphone - 过渡期间 UIView 动画的奇怪行为

> ID：13140775
> 
> 赞同：1
> 
> 时间：2012-10-30T14:07:44.197
> 
> 标签：iphone, ios, cocoa-touch, uikit, core-animation

我正在使用 segue（模态）从一个视图控制器导航到下一个视图控制器。但是，我使用的是自定义 segue，以便在转换发生时不涉及动画。相反，我在视图控制器（视图）内的子视图上有自己的动画。这里一切正常。但是，当我使用从呈现的视图控制器移回我的视图控制器时，会出现`dismissModalViewControllerAnimated:`一个小问题。以下是我从目标视图控制器调用方法的代码。

```
[UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationOptionTransitionCrossDissolve animations:^{

        [self dismissModalViewControllerAnimated:NO];

    } completion:nil]; 
```

`viewWillAppear`我在父视图控制器中有以下代码

```
-(void)viewWillAppear:(BOOL)animated{
    ContainerView *containerView = (ContainerView *)[[[self.view subviews]objectAtIndex:0] viewWithTag:CONTAINER_TAG];

    int i=0;    
    for (UIView *vw in containerView.subviews) {
        [vw setFrame:[[containerView.initialFrameArray objectAtIndex:i] CGRectValue]];
        i++;
    }      
} 
```

只要它处于纵向模式，这也适用于我所有的动画都可以正常播放。当它处于任何其他方向时，动画仍然有效，但整个视图会额外旋转，就好像整个设备的方向从纵向更改为当前方向一样。就好像父视图控制器（视图）的方向存储为纵向一样。并且当`dismissModalViewControllerAnimated:`被调用时，即使设备处于横向，整个视图也会旋转以再次进入横向视图。

在我关闭模态视图控制器之前，有什么方法可以将父视图控制器的方向（存储）更改为横向？

或者我在实现我的自定义动画时做错了什么？

# django - 使用 django 事务如何在提交发生时处理 IntegrityError

> ID：13140776
> 
> 赞同：1
> 
> 时间：2012-10-30T14:07:45.360
> 
> 标签：django, transactions

我想正确处理提交事务时可能会引发 IntegrityError 异常，乍一看，我看到了两种实现方式，但不确定两者是否正确，有人可以澄清两者是否正确，为什么？

**注意**：我正在使用 PostgreSQL

```
# alternative one
try:
  with transaction.commit_on_success():
    # db operation 1
    # db operation 2
except IntegrityError:
    transaction.rollback()

#alternative two
with transaction.commit_manually():
  sid = transaction.savepoint()
  # db operation 1
  # db operation 2
  try:
    transaction.savepoint_commit(sid)
  except IntegrityError:
    transaction.savepoint_rollback(sid) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:56:07.430

如果发生 IntegrityError，请使用 transaction.rollback() 回滚整个事务。如果您只想回滚部分事务，请使用 transaction.savepoint()。如果整个事务只有一个保存点，它将具有与 transaction.rollback() 相同的效果。

# environment-variables - 辅助 MSM 站点在 ExpressionEngine 中不起作用

> ID：13140779
> 
> 赞同：4
> 
> 时间：2012-10-30T14:07:50.397
> 
> 标签：environment-variables, expressionengine

我遇到了一些麻烦：我在登台服务器和实时服务器上都有一个 MSM 站点。我正在开发辅助站点，并且刚刚移至实时服务器。奇怪的是它无法连接到数据库。我的引导配置有这个 if 语句：

```
if($_SERVER['HTTP_HOST'] == 'www.domain.com' || $_SERVER['HTTP_HOST'] == 'en.domain.com') 
```

这似乎无法正确评估，因为 ExpressionEngine 无法加载站点首选项。所以为了测试，我在子域上创建了一个简单的 php 文件，它只是`$_SERVER['HTTP_HOST']`echoes ，并输出 en.domain.com。那么为什么这会在 vanille PHP 中正确评估，而不是在 ExpressionEngine 中呢？有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:39:08.463

Ok we found the problem. Apparently this server wasn't too happy about the use of `||` (double pipe) as OR, so we put it in its own separate elseif statement and now its working.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:28:23.153

每当我遇到这样的问题时，我都会投入 die('Conig File'); 确保正在处理配置文件。您显然会注意到配置文件是否正在被读取。一旦您可以验证它正在被读取，那么您就可以开始找出它没有被处理的原因。

# javascript - 文本框焦点在移动 safari 上自动跳转到下一个文本框（ios 5）

> ID：13140783
> 
> 赞同：0
> 
> 时间：2012-10-30T14:07:56.723
> 
> 标签：javascript, iphone, html, cordova, mobile

我有以下输入字段的表格。当我单击第一个文本框时，焦点转移到下一个文本框。我在 phonegap 中使用此代码并在 iphone（ios 5）上运行它。请帮帮我..

```
 <form id="createAccount" name="regForm">
            <input type="text" name="first_name" id="fname" placeholder="First Name" style="height:40px;" >
            <input type="text" name="last_name" id="lname" placeholder="Last Name" style="height:40px;">

            <input type="email" name="email" id="email" placeholder="Email" style="height:40px;">
            <input type="password" name="password" id="RegPassword" placeholder="Password" style="height:40px;">

         </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T23:08:35.253

首先尝试删除错误的内部表单，然后在每个输入上添加 tabindex。此外，您使用任何库吗？（jQuery ...？）

# php - jquery身份代码生成器

> ID：13140795
> 
> 赞同：-3
> 
> 时间：2012-10-30T14:08:37.547
> 
> 标签：php, jquery, html

这里的上下文：

在慈善舞会上，人们将登录一个网页，输入电子邮件和姓名，获得一个唯一的代码。使用该代码，他们将前往特别柜台并根据他们拥有代码和注册证明的事实获得感谢礼物。

我被要求构建一个简单的网页，该网页将生成一个字母数字代码链接并发送到任何电子邮件地址。即使对我来说也很容易。

我不知道该怎么做是：

如何创建另一个页面，人们可以在其中输入代码以查看它是否合法并将奖品授予领取它的人？

他们可能已经存在解决方案，但我没有找到它，我想在谷歌中选择了错误的单词。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:13:11.957

我认为最好的方法是在每次生成代码时将代码记录到某种数据库中，然后当人们去收集他们的礼物时，查询数据库以查看它是否是之前生成的代码. 如果是，你就知道它是合法的。

您还可以轻松扩展它以添加将代码标记为已用的功能，因此它们不能用于收集多个礼物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:51:27.380

如果您不想修改 SQL 或某些“真实”数据库，则可以使用简单的 XML 或 JSON“数据库”。只需创建一个文件并将一个空的 JSON 数组写入其中 ( `[]`)。如果要添加密钥，只需读出文件，通过使用将其转换为 php 数组`json_decode($file_content, true)`并将新密钥写入该数组。然后，您只需通过使用`json_encode($file_content)`并将结果写入文件将数组写回文件。

如果要检查输入的密钥，只需执行读取和转换操作，然后循环遍历数组以检查密钥。

这在大规模上太慢了，但对于一个小项目来说可能完全没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:48:15.243

如果您不想处理数据库，请像处理序列号一样处理它。生成 1 或 2 组序列化的数字（`0019 - 0001`、`0019 - 0002`、`0019 - 0003`等），然后使用这些数字集，生成 2 组或更多组数字，创建类似 ( `0019 - 0001 - 8276 - 7384`) 的内容。然后，当用户输入他们的数字时，取前两个数字并生成相同的数字，然后测试它们是否相等。这应该在服务器端完成，如果是在客户端（使用 javascript）完成，将很容易破解（只需打开控制台）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T14:25:47.757

考虑有关客户端身份代码生成器的问题的[jQuery GUID 帮助器插件。](http://archive.plugins.jquery.com/project/GUID_Helper)GUID 是一个**全局唯一标识符**。

但是您仍然需要决定如何存储已注册的礼品 ID，以及如何稍后检查它们是否有效。

# php - Facebook 开放图 - 分别标记“朋友”和“地点”

> ID：13140797
> 
> 赞同：1
> 
> 时间：2012-10-30T14:08:47.193
> 
> 标签：php, facebook, facebook-graph-api, facebook-opengraph

我正在尝试通过我的 php 代码中的打开图在 facebook 中发布一条消息，以下是我的 php 代码

```
$params = array('experience'=>$site_url.'comments.php?fb:app_id='.$app_id.'&og:type=parii_apps:experience&og:title=Experience at '.$ven_name.'&og:description='.$content.'&og:image='.$site_url.'venues/original/'.$ven_image.'&venue_id='.$venue_id.'&action=comment&status=venue&status_id='.$venue_id.'&user_id='.$user_id.'&content='.$content.'&act_id='.$act_id,'tags'=>$firend_ids);

$out = $facebook->api( '/'.$fb_user_id.'/app_name:action_type','post', $params); 
```

在我的 facebook 帖子中用于获取

[Sathia](https://www.facebook.com/sathia.moorthy.739)与[Ram](https://www.facebook.com/sathia.moorthy.739)、[Ganesh](https://www.facebook.com/sathia.moorthy.739)和其他 4 人分享了关于“AppName”的经验。

但我需要帖子如下

[Sathia](https://www.facebook.com/sathia.moorthy.739)在“Venue Name”与[Ram](https://www.facebook.com/sathia.moorthy.739)、[Ganesh](https://www.facebook.com/sathia.moorthy.739)和其他 4 人分享了关于“AppName”的经验。

我希望这个场地名称被标记（超链接），就像朋友的名字一样，但被标记到场地的 Facebook 页面，这样当任何人点击该帖子上的场地名称链接时，它都会被重定向到场地的 Facebook 页面。

如何得到这个，我的 php 代码中是否缺少任何东西。

# android - Android 错误：“无法创建 epoll 实例”或“无法创建唤醒管道”

> ID：13140798
> 
> 赞同：5
> 
> 时间：2012-10-30T14:08:51.187
> 
> 标签：android, timer, amazon-s3, android-asynctask, timertask

我有一个 Android 应用程序，它使用计时器每 5-10 秒调用一次 AsyncTask（使用 java.util.Timer 和 java.util.TimerTask）。AsyncTask 从 Amazon AWS S3 数据库获取图像数据，并为主 UI Activity 加载 ImageView。

这可以正常工作一两个小时，但随后我收到一条神秘的错误消息，应用程序被杀死。错误消息来自“Looper”并说：

```
Could not create epoll instance.  errno=24 
```

或者

```
Could not create wake pipe 
```

在网上搜索似乎表明问题可能与文件描述符有关（打开的文件描述符太多？）。我浏览了代码，但没有看到任何文件、流或连接未关闭的地方。

当应用程序被杀死时，logcat 会从 AndroidRuntime 收到一条消息，上面写着：

```
FATAL EXCEPTION: main 
```

有没有人知道这些消息，或者如何修复？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-28T08:17:30.290

可能的内存泄漏。使用[Leakcanary](https://anasmob.blogspot.in/2016/01/android-tutorial-use-leakcanary-to.html)来检测代码的确切部分正在创建它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-09T22:44:41.673

当我使用警报过快触发任务时，我的代码中出现了同样的错误。

我通过更改我的代码来修复它，以便它只被添加到警报中，以便在该方法的平均运行时间之后再次运行（加上一点额外的时间以防万一）。如果您添加任务的速度比它们完成执行的速度更快，那么您最终会填满 Looper，这会引发错误。

根据我的理解，Looper 本质上是一个由线程运行的事物队列。

# svn - 在不受版本控制的文件上设置 svn:ignore 属性

> ID：13140802
> 
> 赞同：1
> 
> 时间：2012-10-30T14:09:04.330
> 
> 标签：svn

我有一个想要添加到新的空 SVN 目录的项目。我已经将该 SVN 目录签出到项目的根目录中，现在需要在提交之前添加该目录中的所有文件。

但是，其中一个子目录 (./sites/default/files) 有一堆包含 20 GB 图像的文件夹。我不想将此文件夹添加到工作副本中。唉，我似乎无法在该目录上设置 svn:ignore 属性，因为它的父级尚未受版本控制——当我这样做时出现“不是工作副本”错误：

```
$ svn propset svn:ignore files .
svn: '.' is not a working copy 
```

暂时将该目录移到项目的父目录下是不可行的；代码库是针对我在游戏后期添加到 SVN 的实时站点。

**假设我不想逐一手动添加树中的每个目录，我将如何做我想做的事情？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:12:03.327

使用标志添加 ./sites/default 文件夹`--depth=empty`，然后您可以将文件目录添加到 svn:ignore。

```
svn add --depth=empty ./sites/default 
```

然后

```
svn propset svn:ignore files . 
```

# php - 如何对从数据库填充的选择框进行快速搜索或自动完成？

> ID：13140803
> 
> 赞同：0
> 
> 时间：2012-10-30T14:09:05.253
> 
> 标签：php, javascript, jquery, ajax

我有一个从数据库中填充的选择框，并且想做一个快速搜索或自动完成来搜索选择框中的元素。下面是我的代码：

```
 <?
           print("<table>");
        print("<tr>");
            print("<td>");
            //print("<div id='searchable-form' >");  //
            print("<div id='searchable'>Search: <input type='text' id='searchFILE' size='33' autocomplete='off' /></div>");
            print("<select name='lktyp' id='lktypSearch' size='10' >");
            //Create new SQL object
            $db = new NSC_SQL($db2config);
            $db->from($bllcust1,"BCUST#,BNAME");
            $db->order("BCUST#");
            $db->select();
            $results = $db->fetchAssoc();
            $db->dspSQL();
            foreach($results as $row)
            {
                $bcust = trim($row['BCUST#']);
                $bname = trim($row['BNAME']);
                print("<option value='$bcust'>$bcust ~ $bname</option>");
            }
            print("</select>");
            print("</div>");
            print("</td>");
        print("</tr>");
        print("<tr>");
            print("<td colspan='2' align='center'>");
            //print("<input type='submit' name='search' value='Search'>");
            print("<input type='button' value='Select' onclick='lkp();'>");
            print("<input type='button' name='cancel' value='Cancel' onClick='parent.$.fancybox.close();'>");
            print("</td>");
        print("</tr>");
    print("</table>"); 
```

?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:14:34.553

最简单的方法是实现[Jquery autocomplete](http://docs.jquery.com/Plugins/Autocomplete)。我不会为您编写代码，但如果您发现很难创建一个新问题，发布您尝试过的一些代码，有人会提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:24:25.653

已经提到的 jQuery 自动完成的两个不错的替代品是[Chosen](http://harvesthq.github.com/chosen/)和[Select2](http://ivaynberg.github.com/select2/)。这两个都需要 jQuery 或其他受支持的 JS 框架。jQuery 自动完成和 Select2 对远程数据集有很好的支持。

# excel - 检查不同工作簿中的两个范围（运行时错误 424）

> ID：13140805
> 
> 赞同：1
> 
> 时间：2012-10-30T14:09:11.650
> 
> 标签：excel, vba

我正在尝试检查 中的值是否`workbook1-sheet1-A`与`workbook2-sheet2-E`. 如果有匹配则`workbook1-sheet1-Y`接收一个`'x'`.

这是我到目前为止的代码，并且`Run time error 424 - Object required`在 if 循环中给了我错误。

```
Sub Check()
'
Application.ScreenUpdating = False

endRow = Range("A" & Rows.Count).End(xlUp).Row

wkbSLA = ("F:\Workbook2")

For i = 2 To endRow
    If Cells(i, 1).Value = wkbSLA.Sheets("Sheet2").Range("E2:E575").Value Then
        Range("Y" & i) = "x"
    End If
Next i

'
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:22:56.333

为确保您的代码执行您期望的所有操作，请确保您使用变量来限定您的对象。

此外，您不能`.Value`在多单元格范围内使用该属性。这可能就是您的错误所在。解决此问题的更好方法是使用`.Find`方法。

如果您编写类似这样的代码，它应该适合您……尽管您可能需要对其进行一些调整以满足您的需求。

```
Option Explicit

Sub Check()

Application.ScreenUpdating = False

Dim wkb1 as Workbook, wkb2 as workbook
Set wkb1 = Workbooks("workbook1")
Set wkb2 = Workbooks("F:\Workbook2") 
' -> do you need Workbooks.Open("F:\Workbook2") here? 
' Seems you may if the workbook you want to access is closed

Dim wks1 as Worksheet, wks2 as Worksheet
Set wks1 = wkb1.Sheets(1) 'may need to change this reference for your needs
Set wks2 = wkb2.Sheets("Sheet2")

With wks1

    Dim endRow as Long
    endRow = .Range("A" & Rows.Count).End(xlUp).Row

    Dim i as Long
    For i = 2 To endRow

        Dim rng as Range
        Set rng = wks2.Range("E2:E575").Find .Cells(i,1).Value lookat:=xlWhole

        If Not rng Is Nothing Then .Range("Y" & i) = "x"

    Next i

End With

End Sub 
```

# asp.net-mvc - 身份验证模式 Windows 不起作用

> ID：13140810
> 
> 赞同：3
> 
> 时间：2012-10-30T14:09:24.183
> 
> 标签：asp.net-mvc, iis, web-config, windows-authentication

当我尝试访问我的页面时，我只会被重定向到 login.aspx，这不是预期的。

我所追求的是一个 windows 登录弹出窗口，如果我当前登录的用户不被允许，我在其中进行身份验证，如果是，它直接进入应用程序。

我在 IIS6 网络服务器上运行 MVC4 项目（是的，我知道。）。

我在目录安全 - 身份验证和访问控制中禁用了“启用匿名访问”并检查了“集成 Windows 身份验证”。

我的 web.config 如下所示：

```
<authorization>
  <allow roles="DOMAIN\Role1"/>
  <deny users="*"/>
  <deny users="?"/>
</authorization>
<compilation targetFramework="4.0" debug="true"/>
<authentication mode="Windows">
</authentication> 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T09:33:15.973

通过找到这个 stackoverflow 问题，我终于想通了：
[ASP.NET MVC3 and Windows Auth on IIS keep redirecting to /Account/Login](https://stackoverflow.com/questions/5009565/asp-net-mvc3-and-windows-auth-on-iis-keeps-redirecting-to-account-login)

通过删除引用 WebMatrix.Data.dll 和/或 WebMatrix.WebData.dll 它按预期工作。

# javascript - 由不同的正则表达式匹配分隔的连接结果

> ID：13140815
> 
> 赞同：2
> 
> 时间：2012-10-30T14:09:46.930
> 
> 标签：javascript, regex, node.js

你好，我正在做一些事情，比如[如何用正则表达式替换句子中的引号内的点](https://stackoverflow.com/questions/13139162/how-to-replace-dots-inside-quote-in-sentence-with-regex/13139633#13139633)

```
var string = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. "Vestibulum interdum dolor nec sapien blandit a suscipit arcu fermentum. Nullam lacinia ipsum vitae enim consequat iaculis quis in augue. Phasellus fermentum congue blandit. Donec laoreet, ipsum et vestibulum vulputate, risus augue commodo nisi, vel hendrerit sem justo sed mauris." Phasellus ut nunc neque, id varius nunc. In enim lectus, blandit et dictum at, molestie in nunc. Vivamus eu ligula sed augue pretium tincidunt sit amet ac nisl. "Morbi eu elit diam, sed tristique nunc."';

// seperate the quotes
var quotes = string.match(/"(.)+?"/g);
var test = [];

// for each quotes
for (var i = quotes.length - 1; i >= 0; i--) {

    // replace all the dot inside the quote
    test[i] = quotes[i].replace(/\./g, '[dot]');
};

console.log(test); 
```

假设我们已经使用正则表达式进行了更改，但我坚持如何将它加入到现有的`var string`，因为我的结果是分开的`var test`？还是有更好的方法？

输出应该类似于

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。"Vestibulum interdum dolor nec sapien blandit a suscipit arcu balloon[dot] Nullam lacinia ipsum vitae enim consequat iaculis quis in augue[dot] Phasellus infantum congue blandit[dot] Donec laoreet, ipsum et vestibulum vulputate, risus augue commodo nisi, vel hendrerit sem justo sed mauris[dot]" Phasellus ut nunc neque, id varius nunc。在 enim lectus、blandit et dictum at、molestie in nunc。Vivamus eu ligula sed augue pretium tincidunt sat amet ac nisl。"Morbi eu elit diam, sed tristique nunc[dot]"

*ps 我不确定标题是否正确

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:13:49.953

您可以改为在 处拆分`"`，每隔一个数组元素进行替换，然后再次加入：

```
var parts = string.split('"');
for (var i = 1; i < parts.length; i += 2) {
    parts[i] = parts [i].replace(/\./g, '[dot]');
};
string = parts.join('"'); 
```

如果字符串以this 开头，`split`将在索引处创建一个空字符串，因为它应该适用于所有情况。`0``"`

请注意，尾随不匹配的边缘情况`"`将导致之后的每个点也`"`被替换。如果您不想这样做，只需将`for`条件更改为`i < parts.length - 1`。

[JSFiddle 演示](http://jsfiddle.net/j8TGr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:35:07.857

使用正则表达式但带有替换功能：

```
string.replace(/"[^"]+"/g, function(m) {return m.replace(/\./g,"[dot]")}) 
```

# actionscript-3 - Flash点击不打开链接

> ID：13140817
> 
> 赞同：3
> 
> 时间：2012-10-30T14:09:51.990
> 
> 标签：actionscript-3, flash, banner-ads

我用 Flash 创建了这个横幅，我需要点击它打开一个网页。

我使用了这个 Actionscript 3.0 代码...

```
link_btn.addEventListener(MouseEvent.CLICK, openurl);

function openurl(event:MouseEvent):void {
var url:URLRequest = new URLRequest("http://www.festivity.it");
navigateToURL(url, "_blank");
} 
```

但它不起作用！

为什么？！

我尝试在时间轴和按钮上设置它，但没有任何改变。

每当我单击按钮时……什么都没有发生，但有时会打开一条带有安全警报的消息。

谢谢。

基亚拉

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T14:51:54.167

*确保您的发布设置启用“本地播放安全”*的网络访问：

![发布设置](../Images/be1c73ab3dc9c0c8d1b36be0463781d8.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-20T02:23:21.407

我花了好几个小时来处理操作代码片段。我的脑袋几乎在流血，试图弄清楚为什么我的简单 Go-To-URL 操作脚本不起作用。十年来，我一直在使用旧版本的 Flash。“本地播放安全”设置是问题所在，在我访问的任何 Adob​​e 论坛中都没有提到它。多么令人沮丧的“功能”。

# java - Android onClickListener

> ID：13140818
> 
> 赞同：0
> 
> 时间：2012-10-30T14:09:56.057
> 
> 标签：java, android, sdk

已解决：将我的文件放在错误的文件夹中，我的愚蠢错误:)

任何人都知道为什么这不起作用？它只是没有做任何事情。我认为 Main XML 中的所有内容都已正确定义，但我觉得这里缺少一些东西。

我是 Java/Android 开发的新手，但我使用 VB.NET 很长时间了。

```
package com.example.myfirstapplication;

import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.os.Bundle;
import android.app.Activity;

public class Main extends Activity{

int counter;
Button add, sub;
TextView display;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    counter = 0;
    add = (Button) findViewById(R.id.bAddOne);
    sub = (Button) findViewById(R.id.bSubOne);
    display = (TextView) findViewById(R.id.tvDisplay);
    add.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            counter++;
            display.setText("Your total is " + counter);
        }
    });
    sub.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            counter--;
            display.setText("Your total is " + counter);
        }
    });
}
} 
```

提前致谢。

编辑：添加布局。认为不需要：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<TextView 
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:text="Your total is 0"
   android:layout_gravity="center" 
   android:textSize="45dp" 
   android:id="@+id/tvDisplay"/>
<Button 
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:text="Add 1"
    android:layout_gravity="center"
    android:textSize="20dp"
    android:id="@+id/bAddOne"    />
<Button 
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:text="Subtract 1"
    android:layout_gravity="center"
    android:textSize="20dp"
    android:id="@+id/bSubOne"/>
</LinearLayout> 
```

编辑：和清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myfirstapplication"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:55:21.753

行。一个快速的解决方法是将 Activity 的名称从 Main.java 更改为**MainActivity** .java。

```
package com.example.myfirstapplication;

 import android.view.View;
 import android.widget.Button;
 import android.widget.TextView;
 import android.os.Bundle;
 import android.app.Activity;

 public class MainActivity extends Activity{

      int counter;
      Button add, sub;
      TextView display;
      @Override
      public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);   
           setContentView(R.layout.activity_main);
          counter = 0;
          add = (Button) findViewById(R.id.bAddOne);
          sub = (Button) findViewById(R.id.bSubOne);
          display = (TextView) findViewById(R.id.tvDisplay);
          add.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                       counter++;
                       display.setText("Your total is " + counter);
                    }
               });
          sub.setOnClickListener(new View.OnClickListener() {

                   public void onClick(View v) {
                           counter--;
                            display.setText("Your total is " + counter);
                   }
         });
     }
} 
```

原因是在 AndroidManifest.xml 中，启动 Activity 被声明为 MainActivity：

```
 <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

它是在说： **android:name=".MainActivity"**的行中，并且

```
 <action android:name="android.intent.action.MAIN" />
 <category android:name="android.intent.category.LAUNCHER" /> 
```

说这是开始和主要的活动。

# javascript - JavaScript setDate() 返回无效日期

> ID：13140823
> 
> 赞同：1
> 
> 时间：2012-10-30T14:10:05.110
> 
> 标签：javascript, jquery, jquery-ui, date

所以，我有这个代码：

```
$('#end_date').click(function() 
{
    var start_date = new Date($('#start_date').val());
    var duration = parseInt($('#duration').val());

    var end_date = new Date();
    end_date.setDate(start_date + duration);

    $('#end_date').val($.datepicker.formatDate('yy-mm-dd', end_date));
}); 
```

我认为，应该从表单中获取开始日期，并在其中添加一些天数（持续时间），并在另一个文本字段中显示输出。但是，我得到的结果始终是 NaN-NaN-NaN，或者如果我删除格式，则只是 Invalid Date。

然而 ：

```
$('#end_date').val($.datepicker.formatDate('yy-mm-dd', start_date)); 
```

工作得很好。所以我认为问题不在于第三行。现在我很困惑。任何指针来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:13:24.660

`setDate`只需设置月份中的某一天，您可以使用`setFullYear`and`setMonth`或者您可以执行此操作。

```
$('#end_date').click(function() 
{
    var start_date = new Date($('#start_date').val());
    var duration = parseInt($('#duration').val());

    var end_date = new Date();
    end_date.setDate(start_date.getMilliseconds() + duration.getMilliseconds());

    $('#end_date').val($.datepicker.formatDate('yy-mm-dd', end_date));
}); 
```

希望 start_Date 和 duration 返回毫秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:16:08.947

根据[这个问题](https://stackoverflow.com/q/9989382/901048)，您应该尝试：

```
end_date.setDate(start_date.getDate() + duration); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:18:26.250

由于`setDate`仅设置月份中的某一天，您可以这样做：

```
var duration = parseInt($('#duration').val(), 10); // don't forget the radix!
var end_date = new Date();
end_date.setTime(start_date.getTime()); // makes end_date a copy of start_date
end_date.setDate(start_date.getDate() + duration); // changes the day of the month (and recomputes months and years) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:21:28.670

```
$('#end_date').click(function() 
{
    var start_date = new Date($('#start_date').val());
    var duration = parseInt($('#duration').val());

    var end_date = new Date();
    end_date.setTime(start_date.getTime() + (duration*24*60*60*1000));//convert duration to miliseconds

    $('#end_date').val($.datepicker.formatDate('yy-mm-dd', end_date));
}); 
```

这应该有效，将持续时间添加到 start_date 的时间并将该时间设置为 end_date

# shell - 如何通过 Unix 向网页提供输入

> ID：13140831
> 
> 赞同：0
> 
> 时间：2012-10-30T14:10:22.553
> 
> 标签：shell, unix, curl, web

我需要一些有关 Unix 脚本的帮助。我有一个需要每天手动验证的网页（URL）。我想自动化这个过程。

为了验证，我们需要在页面上提供一个通用输入并点击提交，它将引导您进入结果页面。我想通过 Unix 脚本对此进行测试。如何才能做到这一点 ？

非常欢迎以任何其他语言提出自动化建议。

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:12:01.613

看看 curl，它可以在 shell 脚本或交互模式下使用： http: [//curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)

# java - 编码测试在 Ant 中失败，但在 Eclipse 中有效

> ID：13140834
> 
> 赞同：3
> 
> 时间：2012-10-30T14:10:39.460
> 
> 标签：java, ant, utf-8, junit

我在 UTF-8 编码文件中有以下 junit 测试。

```
public class EncodingTest {

 private static byte[] utf8Bytes;

 private static byte[] utf8Bytes2;

 private static byte[] utf8Bytes3;

 static {
try {
    utf8Bytes = "åæø".getBytes("UTF-8");
    utf8Bytes2 = new byte[] { (byte) 0xc3, (byte) 0xa5, (byte) 0xc3, (byte) 0xa6, (byte) 0xc3, (byte) 0xb8 };
    utf8Bytes3 = "\u00E5\u00E6\u00F8".getBytes("UTF-8");
} catch (final UnsupportedEncodingException e) {
    assertTrue(false);
}

 }

 @Test
 public void testUTF8Encoding1() throws UnsupportedEncodingException {
assertTrue(Arrays.equals(utf8Bytes, utf8Bytes2));
 }

 @Test
 public void testUTF8Encoding2() throws UnsupportedEncodingException {
 assertTrue(Arrays.equals(utf8Bytes2, utf8Bytes3));
 }

 @Test
 public void testUTF8Encoding3() throws UnsupportedEncodingException {
 assertEquals(new String(utf8Bytes), new String(utf8Bytes2));
 }

 @Test
 public void testUTF8Encoding4() throws UnsupportedEncodingException {
 assertEquals(new String(utf8Bytes2), new String(utf8Bytes3));
 }
} 
```

测试在 ant 中失败，但在 eclipse 中有效。我正在使用的 ANT 任务如下：

```
<target
    name="test"
    depends="compile-tests"
    description="Test the full company tests" >

    <junit fork="yes" haltonfailure="yes" >
        <jvmarg value="-Dfile.encoding=UTF-8"/>
        <classpath>

            <path refid="test.classpath" />

            <fileset dir="war/WEB-INF/lib/" >

                <include name="*.jar" />
            </fileset>
        </classpath>

        <formatter
            type="plain"
            usefile="false" />
        <!-- to screen -->
        <!-- formatter type="plain" / -->
        <!-- to file -->

        <batchtest>

            <fileset
                dir="test/classes/"
                includes="**/*Test.class" />
        </batchtest>
    </junit>
</target> 
```

输出如下：

```
test:
[junit] Testsuite: com.company.appengine.EncodingTest
[junit] Tests run: 4, Failures: 2, Errors: 0, Time elapsed: 0,028 sec
[junit]
[junit] Testcase: testUTF8Encoding1 took 0,004 sec
[junit]     FAILED
[junit]
[junit] junit.framework.AssertionFailedError:
[junit]     at com.company.appengine.EncodingTest.testUTF8Encoding1(EncodingTest.java:42)
[junit]
[junit] Testcase: testUTF8Encoding2 took 0 sec
[junit] Testcase: testUTF8Encoding3 took 0,001 sec
[junit]     FAILED
[junit] expected:<[Ã¥Ã¦Ã¸]> but was:<[åæø]>
[junit] junit.framework.AssertionFailedError: expected:<[Ã¥Ã¦Ã¸]> but was:<[åæø]>
[junit]     at com.company.appengine.EncodingTest.testUTF8Encoding3(EncodingTest.java:52)
[junit]
[junit] Testcase: testUTF8Encoding4 took 0 sec 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:40:54.757

请首先确保`javac`知道您的源文件是用 utf-8 编码的。如果您使用[javac task](http://ant.apache.org/manual/Tasks/javac.html)进行编译，请提供`encoding`属性。

# applescript - 从 AppleScript 获取文件路径

> ID：13140836
> 
> 赞同：4
> 
> 时间：2012-10-30T14:10:48.460
> 
> 标签：applescript

我需要从 AppleScript 中获取所选文件夹的文件路径。我正在使用以下代码来执行此操作。

```
 --Display selection window
    set source_folder to choose folder with prompt "Please select directory."
    --Get the path of the folder
    set item_list to get the path of every disk item of source_folder 
```

我得到这样的文件路径：

文件：路径：到：该：fodler

我想要的是：

文件/路径/到/该/文件夹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:17:35.673

尝试：

```
set source_folder to choose folder with prompt "Please select directory."

tell application "System Events"
    set item_list to POSIX path of every disk item of source_folder
end tell 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:14:25.700

尝试获取[POSIX](http://en.wikipedia.org/wiki/POSIX)路径：

```
set item_list to get the POSIX path of every disk item of source_folder 
```

# visual-studio-2010 - Ipad 的 KendoUI

> ID：13140837
> 
> 赞同：0
> 
> 时间：2012-10-30T14:10:51.157
> 
> 标签：visual-studio-2010, kendo-ui

我想创建一个应用程序，其中包含针对 KendoUI 平板电脑的学生个人资料。该应用程序将具有本机外观（不是网站）。我可以使用 ASPX 页面创建应用程序，还是必须使用 .HTML 页面？最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:14:38.950

最终结果（无论您使用什么 Web 框架）始终是 HTML。Kendo UI 是一个客户端框架，这意味着您可以根据需要将 KendoUI 与 ASPX 或干净的 HTML 页面一起使用。这取决于开发人员，并且没有最佳实践。

但是我会为 ASP.NET MVC 框架说 +1 :)。

# java - 将 Java 转换为 XML 到 HTML

> ID：13140841
> 
> 赞同：-2
> 
> 时间：2012-10-30T14:11:12.563
> 
> 标签：java, xml, project, type-conversion

我决定为我最后一年的项目学习 XML。我想做的是获取一些 Java 源代码，将 Java 源代码转换为 XML，然后使用 XML 转换为另一种语言。我已经阅读了很多关于 XML、ebnf 和 bnf 以及其他各种技术的内容，但我很难理解它。我想知道是否有了解这个领域的人可以给我一些入门提示，例如我应该使用哪个软件来完成这个项目，我应该看什么来开始将 Java 转换为 XML 等等。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:24:03.080

您的项目实际上与 XML 几乎没有关系，更多的是与编写 Java 编译器有关，因为您的主要任务是将 Java 代码转换为中间、中性格式，然后从该格式转换为“另一种语言”。您的中间格式应该碰巧以 XML 结构表示，这无关紧要。

就像思想实验一样，从您的项目中删除中间格式并再次考虑它：

*将 Java 源代码转换为另一种语言*

一点都不琐碎。即使我们忽略诸如内存模型、类型转换/强制等问题——即使将基本的“hello world”Java 类转换为语法相似的语言（比如 C++），仅使用原始类型，仍然非常复杂。

如果您的唯一目标是学习 XML，那么我认为您的项目实在是太麻烦了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:34:05.203

正如爸爸已经提到的......这是一件相当复杂的事情，当它只是学习 XML 时，如果你想继续，你应该得到/创建一些东西来完成这件事。 ..

*   您应该获取/创建的第一件事是 java 解析器，它可以将 java 代码“分解”为运算符、参数等，您可以使用它们来构建您的 xml 表示

*   要实现的第二件事是创建一个完全描述基于 xml 的语言的模式（ xsd ）（或多或少像 BNF，但后来是 XML ）

例如，一段转换后的“Hello World”代码可能看起来像这样（尽管我更喜欢 ac# 的人）

```
<invokeMethod fullname="Console.WriteLine, mscorlib">
  <param type="System.String">Hello World!</param>
</invokeMethod> 
```

所以需要有一个“invokeMember”的模式定义，它需要一个全名属性和 0 个或更多参数元素......等等。

如果您了解了这一点，则需要创建一种“代码生成器”（如果我没记错的话，称为词法分析器），它将解析的 java 代码转换为符合模式的 XML。

然后你只做了一半...

您可以使用 xml 样式表最终将 XML 转换为另一种语言类型（这也是一项相当困难的任务）

仍然......这些只是让你开始的指针......如果你选择承担这个项目......我祝你好运:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:37:16.390

我认为您应该从解析 java 代码开始，并开始检测其中的结构（如代码块、控制语句等）。您使用的语言非常免费，我会选择以良好方式支持 XML 并且擅长字符串处理的语言。（我当然建议使用 Java :D）

在您没有这样做之前，我什至不会开始考虑 XML 本身。

顺便说一句：如果您将其作为一个有趣的项目来做，那没关系。否则：为什么管道 spacenoodle 需要这样的转换器？;)

# gwt - 自定义树节点 smartgwt

> ID：13140842
> 
> 赞同：1
> 
> 时间：2012-10-30T14:11:19.543
> 
> 标签：gwt, smartgwt, treenode, treegrid

我对 SmartGWT 非常缺乏经验，并且遇到以下问题：

我设法在树中创建了一个包含不同类型文档的库。

对于某些文档，我想显示三个图标，它们代表指向其他网站的链接，我还想在它们下面显示一些描述。

我尝试编写自己的 CustomTreeNode，还查看了 setCellFormatter() 并尝试覆盖它但没有运气。

你能给我一些提示和提示如何实现所需的功能以及我必须记住的内容吗？

或者除了 apidocs 和 smartclient 论坛之外，还有一些关于 smartGWT 的好教程或书籍吗？

非常感谢任何帮助！

这就是树应该看起来的样子：

[+]node1
[+]node2
[-]node3
    - documentEntry
[+]node4
[-]node5
    - 自定义documentEntry
       IMG IMG IMG
       描述文本

[+]节点6

**编辑：**感谢评论，我完成了将具有 3 种不同类型文档的树编码为叶子（.pdf、.txt 和指向网址的链接）。它们都有一个名称和不同的图标，并且在单击时都有不同的行为。但是我仍然有问题，我仍然需要实现另一个特殊的叶子，它由 3 个图标组成，代表 3 个网络链接和描述文本下方。图标必须是可点击的，并指向三个不同的网址。

**2.编辑**通过反复试验，我认为我更进一步。我创建了一个类 CustumTreeGrid，它覆盖了 Treegrid 的 createRecordComponent 方法，并在树叶上绘制了一个动态表单。现在我用文本 3 图标和链接填写此表单。这是解决我的问题的正确/好方法，还是有更好的方法来实现我想要的功能？我希望有一个人可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:42:21.247

也许还有其他方法，但这就是我所做的：

我做了我自己的类`MyTreeGrid`，扩展`TreeGrid`。

然后我设置`setShowRecordComponents(true)`，`setShowRecordComponentsByCell(true);`

我使用了方法：`createRecordComponent(ListGridRecord record, Integer col)`并覆盖了它，为一片叶子画了一个画布。画布包含 3 个按钮和三个图像以及一个描述文本。

# ruby - 如何找出所有数组元素是否符合某个条件？

> ID：13140853
> 
> 赞同：5
> 
> 时间：2012-10-30T14:12:04.153
> 
> 标签：ruby

我有一个大数组，我需要知道它的所有元素是否都可以被 2 整除。

我正在这样做，但它有点难看：

```
_true = true
arr.each { |e| (e % 2).zero? || _true = false }
if _true == true
    # ...
end 
```

如何在没有额外循环/分配的情况下做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-30T14:22:16.337

这会做。

```
arr.all?(&:even?) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-30T14:13:21.183

Ruby 为您提供保障。

```
if arr.all? {|e| (e % 2).zero?} 
```

`any?`如果您需要检查至少一个元素是否具有给定属性，还可以检查。

# javascript - 什么是杂项绑定？为什么他们给我一个端口错误？

> ID：13140857
> 
> 赞同：10
> 
> 时间：2012-10-30T14:12:21.253
> 
> 标签：javascript, google-chrome

我收到了这个错误，这似乎对任何事情都没有负面影响，但仍然......为什么？

铬控制台：

```
Port error: Could not establish connection. Receiving end does not exist.                                 miscellaneous_bindings:235
    chromeHidden.Port.dispatchOnDisconnect 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T14:16:56.853

你不必担心这些。它们不会影响您自己的代码。**它们源自您的 Chrome 扩展程序之一。**这通常发生在扩展程序试图建立与本地文件的连接时（例如使用`file:`协议时）。

# qt - Qt - 什么是样本缓冲区？

> ID：13140859
> 
> 赞同：2
> 
> 时间：2012-10-30T14:12:31.003
> 
> 标签：qt, opengl, buffer, qt4.7

我正在使用 Qt 学习 OpenGL 的基础知识，似乎示例缓冲区是 Qt 特定的，我并不真正了解它们为屏幕存储的信息。什么是样品缓冲液，它的用途是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:48:15.687

它们用于在 Qt 中进行[多重采样。](http://www.opengl.org/wiki/Multisampling)设置多重采样通常是特定于平台的（因为它需要具有多重采样支持的像素格式），但 Qt 允许您以独立于平台的方式执行此操作。要获得具有多重采样的 OpenGL 上下文，请在创建 QGLWidget 时传递启用了采样缓冲区的[QGLFormat 。](http://doc.qt.digia.com/stable/qglformat.html)

具体来说，[QGLFormat::setSampleBuffers](http://doc.qt.digia.com/stable/qglformat.html#setSampleBuffers)用于请求多重采样上下文，[QGLFormat::setSamples](http://doc.qt.digia.com/stable/qglformat.html#setSamples)用于设置首选样本数。

在您的 OpenGL 代码中，您还必须在渲染之前启用多重采样：

```
glEnable(GL_MULTISAMPLE); 
```

# python - 从二进制数据创建 gtk.gdk.Pixbuf

> ID：13140861
> 
> 赞同：1
> 
> 时间：2012-10-30T14:12:42.500
> 
> 标签：python, gtk, gdk, gdkpixbuf

我正在努力将二进制数据放入`gtk.gdk.pixbuf`.

这应该说明我的问题：

```
file = open("image.jpg", "rb")
//Ultimately this is going to come from a BLOB
binary = f.read()
//I created a pixbuf directly from the jpg 
//and took the rowstride values &c. from that
pixbuf = gtk.gdk.pixbuf_new_from_data(
    binary, gtk.gdk.COLORSPACE_RGB, False, 8 , 450, 640, 1352) 
```

这失败了：

`ValueError: data length (90825) is less then required by the other parameters (865280)`

我目前的解决方法是将二进制数据写入文件，然后`Pixbuf`从该文件创建一个。那感觉太hacky了。我正在从数据库中读取二进制数据，所以我真的需要一个可以直接从缓冲区创建 pixbuf 的解决方案。

我不明白为什么我只是`BLOB`从数据库中读取并将其写入文件会很容易 - 然后将文件作为 pixbuf 加载，但更难直接从缓冲区中获取！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:05:22.663

您正在尝试使用[仅用于 RGB-data](http://www.pygtk.org/docs/pygtk/class-gdkpixbuf.html#function-gdk--pixbuf-new-from-data)的方法处理 jpg-data 。

如果您想处理 jpgs，请使用此格式的加载器，如下[所示](http://bytes.com/topic/python/answers/29401-pygtk-creating-pixbuf-image-data)：

```
file = open("image.jpg", "rb")
binary = file.read()
loader = gtk.gdk.PixbufLoader("jpeg")
loader.write(binary)
loader.close()
pixbuf = loader.get_pixbuf() 
```

现在`pixbuf`包含，你需要什么。您的解决方法[自动使用了这样的加载程序](http://www.pygtk.org/docs/pygtk/class-gdkpixbuf.html#function-gdk--pixbuf-new-from-file)。

# jquery - 一个 UL 列表拆分为固定高度的多列

> ID：13140864
> 
> 赞同：3
> 
> 时间：2012-10-30T14:12:50.393
> 
> 标签：jquery, html, css, html-lists, multiple-columns

我想创建一个包含可变数量的 LI 元素的 UL 列表。我希望容器的高度最大为 500 像素。这意味着如果我有更多超过 500px 高度的 li 元素，我希望它变成 2 列。如果有更多，那么可以容纳 2 列，我希望它变成 3 列。我有足够的空间来修复最多 5 列，并且数据永远不会超过这个数量。

知道我该怎么做吗？任何jquery，css技巧？还是我需要处理每个场景服务器端才能做到这一点。

```
Example 1

    list entry    list entry 
    list entry    list entry
    list entry    list entry
    list entry    list entry
    list entry    

 Example 2
    list entry    list entry     list entry
    list entry    list entry     list entry
    list entry    list entry     list entry
    list entry    list entry
    list entry    list entry

 Example 3
    list entry    list entry     list entry     list entry
    list entry    list entry     list entry     list entry
    list entry    list entry     list entry     list entry
    list entry    list entry     list entry
    list entry    list entry     list entry 
```

如果没有一个 UL 就无法实现，那么我对此持开放态度。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:42:51.513

[http://jsfiddle.net/eaewX/1/](http://jsfiddle.net/eaewX/1/)

如果将每个列表封装在 a `<div>`、 setting `columns`、`column-width`或`column-count`on 中`<div>`，它将适当地将列表分成列。

编辑：它在 jsfiddle 中，但我应该澄清一下，您目前需要为这些属性使用浏览器扩展，即`-webkit-`，、`-moz-``-o-`

以供参考：

[https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multi-column_layouts](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multi-column_layouts)

[http://dev.w3.org/csswg/css3-multicol/#columns](http://dev.w3.org/csswg/css3-multicol/#columns)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:09:31.903

这是一个有效的解决方案

```
/* set max height of containers */
var maxHt=500;/* may need to adjust based on css*/

var $list=$('#startList')
var $container=$list.parent();

var $li=$list.find('li');

var totHt=0;    
var totItems=$li.length;
$li.each(function( idx){

    var ht=$(this).height();
    if( totHt + ht >= maxHt || idx==totItems-1){
        $('<ul>').append( $(this).prevAll().andSelf() ).appendTo( $container );
        totHt=0;
    }else{
        totHt += ht;
    }  

});

$list.remove() 
```

演示：http: [//jsfiddle.net/rzw64/3/](http://jsfiddle.net/rzw64/3/)

请注意，在 UL 上设置的高度需要比用于计算的最大高度多一点。额外的 CSS 将有助于或可以添加代码以获取父容器的动态高度以设置为`maxHt`允许

# typescript - Visual Studio 2012 的 TypeScript 插件立即给出错误

> ID：13140868
> 
> 赞同：0
> 
> 时间：2012-10-30T14:13:11.283
> 
> 标签：typescript

我下载并安装了 Visual Studio 2012 的 TypeScript[插件](http://www.microsoft.com/en-us/download/details.aspx?id=34790)，然后 Visual Studio 2012 甚至无法启动。它立即给出了一个消息框'.. 调用的目标......' 错误。

我必须卸载插件才能再次使用 Visual Studio 2012。

有没有人有类似的经历，有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T00:02:32.480

我也遇到了这个问题。对我来说，这是因为我的 Windows PATH 变量超过了 2047 个字符。这也破坏了 %windir% 路径扩展，因此我无法通过转到计算机 -> 属性 -> 高级 -> 环境变量来编辑我的 PATH 变量。解决方案是通过转到 C:\Windows\system32\ 并运行 systempropertiesadvanced.exe 来编辑我的系统 PATH 变量，从那里复制系统 PATH 变量，将其粘贴到您选择的文本编辑器中，将其拆分为分号，排序它按字母顺序，删除重复项和其他不需要的路径，直到我得到低于 2047 个字符，用分号重新加入所有行，然后将其粘贴回我的系统 PATH 变量中。有关更多信息，请参阅[此](http://blog.customizedev.com/index.php/exception-has-been-thrown-by-the-target-of-an-invocation/)内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:11:42.627

我没有任何问题，我遇到的唯一问题是安装后找不到模板。

我唯一的建议是重新尝试安装，看看你是否得到不同的结果。如果您仍然收到错误，请提供整个错误消息。

**更新**

好的，这里还有一些其他的东西可以尝试——我已经按照疼痛程度排列了它们！

1.  我不知道您从哪里安装 TypeScript，但一位同事提到他们遇到了问题，并通过将安装程序移动到桌面运行安装来解决它。我对此持怀疑态度，但它很容易做到。

2.  您的 Visual Studio 安装可能存在问题，该问题仅在某些情况下表现出来。您可以修复您的 VS 安装。

如果这些都不起作用，您可能需要在[http://typescript.codeplex.com上提出问题](http://typescript.codeplex.com)

# clojure - 使用 Clojure/Ring 提供二进制文件时出现间歇性错误

> ID：13140875
> 
> 赞同：2
> 
> 时间：2012-10-30T14:13:48.750
> 
> 标签：clojure, ring

我正在Clojure中为[Snowplow构建一个](http://snowplowanalytics.com/)[事件收集器](https://github.com/snowplow/snowplow/tree/feature/clj-collector/2-collectors/clojure-collector)（使用 Ring/Compojure），并且在使用 Ring 提供透明像素时遇到了一些麻烦。这是我发送像素的代码：

```
(ns snowplow.clojure-collector.responses
  (:import (org.apache.commons.codec.binary Base64)
           (java.io ByteArrayInputStream)))

(def pixel-bytes (Base64/decodeBase64 (.getBytes "R0lGODlhAQABAPAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==")))
(def pixel (ByteArrayInputStream. pixel-bytes))

(defn send-pixel
   []
    {:status  200
     :headers {"Content-Type"   "image/gif"}
     :body    pixel}) 
```

当我启动服务器时，我第一次点击路径时`send-pixel`，像素已成功传送到我的浏览器。但是第二次——以及之后的每一次——Ring 都没有发送任何正文（并且内容长度为 0）。重新启动服务器，它是相同的模式。

有几件事不是：

1.  我已经复制了这个`wget`，以确认间歇性不是浏览器缓存问题
2.  `"R01GOD..."`我在命令行 ( )生成了base64 字符串，`cat original.gif | base64`所以知道那里没有问题
3.  当像素发送成功时，我已经验证了它的内容是正确的 ( `diff original.gif received-pixel.gif`)

我是 Clojure 的新手——我猜我的代码中有一些令人尴尬的动态 gremlin，但我需要帮助来发现它！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T14:17:21.557

我在发布后不久就发现了 REPL 中的问题：

```
user=> (import (org.apache.commons.codec.binary Base64) (java.io ByteArrayInputStream))
java.io.ByteArrayInputStream
user=> (def pixel-bytes (Base64/decodeBase64 (.getBytes "R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==")))
#'user/pixel-bytes
user=> (def pixel (ByteArrayInputStream. pixel-bytes))
#'user/pixel
user=> (slurp pixel-bytes)
"GIF89a!�\n,L;"
user=> (slurp pixel-bytes)
"GIF89a!�\n,L;"
user=> (slurp pixel)
"GIF89a!�\n,L;"
user=> (slurp pixel)
"" 
```

所以基本上问题是`ByteArrayInputStream`在第一次通话后被清空了。可变数据结构！

`ByteArrayInputStream`我通过为每个响应生成一个新的来修复该错误，其中：

```
 :body    (ByteArrayInputStream. pixel-bytes)})) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-14T13:55:55.280

问题是您的`pixel`变量包含一个流。一旦读过，就不可能再读一遍。

此外，您不需要处理编码问题。Ring 也提供静态文件。只需返回：

```
(file-response "/path/to/pixel.gif") 
```

它也处理不存在的文件。[另请参阅文档](https://ring-clojure.github.io/ring/ring.util.response.html)。

# ruby-on-rails - 如何在 Rails 环境中运行测试套件

> ID：13140883
> 
> 赞同：1
> 
> 时间：2012-10-30T14:14:13.600
> 
> 标签：ruby-on-rails, ruby, testing

我正在使用[Finance](https://rubygems.org/gems/finance) gem，我遇到了一些代码在 Ruby on Rails 中运行时失败的问题。

我想通过在 Rails 环境中运行现有的测试套件来对此进行测试，但是，我不确定如何去做。我正在寻找的东西的效果

```
run_all_tests
inside_rails do
  run_all_tests_again
end 
```

在 my`Rakefile`或任何最合适的地方。

我在谷歌上找不到太多东西；任何帮助将不胜感激！

# php - 为什么 str_replace 不能正确替换这些扩展的 ascii 字符？

> ID：13140884
> 
> 赞同：0
> 
> 时间：2012-10-30T14:14:24.700
> 
> 标签：php, extended-ascii

这是一个 UTF-8 编码的源文件。我一定遗漏了一些明显的东西，但我已经尝试了我能想到的所有排列。

```
<?php

$bad =  array( chr(130), chr(145), chr(146), chr(147), chr(148), chr(150), chr(151), chr(173), chr(160) );
$good = array( chr( 44), chr( 39), chr( 39), chr( 34), chr( 34), chr( 45), chr( 45), chr( 45), chr( 32) );

print_r($bad);
print_r($good);

 $str = <<<EOF
    bad comma ‚
    bad quote ‘
    bad quote ’
    bad quote “
    bad quote ”
    bad dash –
    bad dash —
    bad dash ­
    bad space   

EOF;
    echo $str;
    $clean = str_replace($bad, $good, $str);
    echo "\n";
    echo( $clean); 
```

当我在浏览器中打开它并查看源代码时......

```
Array
(
    [0] => ‚
    [1] => ‘
    [2] => ’
    [3] => “
    [4] => ”
    [5] => –
    [6] => —
    [7] => ­
    [8] =>  
)
Array
(
    [0] => ,
    [1] => '
    [2] => '
    [3] => "
    [4] => "
    [5] => -
    [6] => -
    [7] => -
    [8] =>  
)
    bad comma â€š
    bad quote â€˜
    bad quote â€™
    bad quote â€œ
    bad quote â€
    bad dash â€“
    bad dash â€”
    bad dash Â­
    bad space   

    bad comma â€š
    bad quote â€˜
    bad quote â€™
    bad quote â€œ
    bad quote â€
    bad dash â€"
    bad dash â€"
    bad dash Â-
    bad space 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:25:16.317

ASCII、多字节和 UTF-8 之间是有区别的。

在您的情况下，这些字符是多字节字符。*“多字节”只是一种任意的非 UTF-8 编码。*

您可以先将它们转换为 UTF-8 或使用[mb_ereg_replace](http://php.net/manual/en/function.mb-ereg-replace.php)

大多数 PHP 开发人员对字符编码知之甚少，但它是使用 C/C++ 工作时最重要的事情之一。

# emacs - 在 emacs 中跳转到函数的开头

> ID：13140887
> 
> 赞同：14
> 
> 时间：2012-10-30T14:14:30.550
> 
> 标签：emacs

所以你在一个 300 行的函数中间，想知道函数声明在哪里。

你怎么做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-30T14:26:36.900

`M-C-a`跳转到当前函数的开头。

`M-C-e`跳转到当前函数的末尾

它适用于elisp 和c 派生语言（例如Java）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-30T14:27:48.047

通常，我`which-function`启用了次要模式，它在模式行上显示当前功能（在我的 emacs 配置中使用它）：

```
(require 'which-func)
(which-function-mode t) 
```

# c# - 在 Windows 手机中通过 HTTPS 下载文件

> ID：13140894
> 
> 赞同：0
> 
> 时间：2012-10-30T14:15:04.030
> 
> 标签：c#, silverlight, https, download, windows-phone

是否可以在 Windows 手机中通过 Https 下载文件，使用用户名和密码发布方法，我尝试了此代码，但它返回错误。请注意，urlLink 是一个“https://”链接。

```
 Uri uri = new Uri(urlLink);
        HttpWebRequest r = (HttpWebRequest)WebRequest.Create(uri);
        r.ContentType = "application/x-www-form-urlencoded";
        r.Method = "POST";
        string parameters = "username=admin&password=123";
        r.BeginGetRequestStream(delegate(IAsyncResult req)
        {
            var outStream = r.EndGetRequestStream(req);

            using (StreamWriter w = new StreamWriter(outStream))
              w.Write(parameters);

            r.BeginGetResponse(delegate(IAsyncResult result)
            {
                try
                {
                    HttpWebResponse response = (HttpWebResponse)r.EndGetResponse(result);

                    using (var stream = response.GetResponseStream())
                    {
                        using (StreamReader reader = new StreamReader(stream))
                        {

                        }
                    }
                }
                catch (Exception exc)
                {
                    string ee = exc.Message;

                }
            }, null);
        }, null); 
```

错误 ：

远程服务器返回错误：NotFound。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:13:14.490

因为它是`https`（使用`SSL`），所以电话需要先下载并安装服务器的证书，然后才能允许对其进行任何访问。

编辑：在这个答案中添加了我的评论，并删除了评论。

这是有关该主题的 MSDN 文档的链接[http://msdn.microsoft.com/en-us/library/ms731899.aspx](http://msdn.microsoft.com/en-us/library/ms731899.aspx)

如果证书是自签名的，您可以使用模拟器下载并安装它，前提是您已将证书上传到可以下载的地方。请注意，每次启动模拟器时都需要安装证书（但不是每次启动应用程序调试时）。

# html - 使用“<select>”时，Div 行为不正确；使用“</select>”时工作正常

> ID：13140902
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:15:39.567
> 
> 标签：html, css

我的代码如[http://jsfiddle.net/Lijo/PJcZQ/](http://jsfiddle.net/Lijo/PJcZQ/)所示。它有两个具有相似内容“GROUP1”和“GROUP2”的div——唯一的区别如下

第 1 组

```
 <div class="secondTextBox">
  <select name="ctl00$detailContentPlaceholder$ddlStatus" id="detailContentPlaceholder_ddlStatus" class="dropdownItem" style="width: 120px;">
  </select>
  </div> 
```

第 2 组

```
 <div class="secondTextBox">
 <input name="ctl00$detailContentPlaceholder$txtVal2" type="text" id="detailContentPlaceholder_txtVal2" style="width: 120px;" />
 </div> 
```

CSS

```
.searchValuesDiv
{
padding: 10px 0 0 20px;
margin:20px 0 20px 0px;
border:1px solid Cyan;
overflow:auto;
} 
```

第 1 组的行为与预期不符——包含按钮的 div 从错误的位置开始。

**注意**：从 jsFiddle 查看时，此问题不可重现。这可以在使用该代码创建 HTML 页面时重现。

1.  为什么会这样？[你能解释为什么当我使用“输入”元素时它没有问题吗？]
2.  我们怎样才能纠正它？

![在此处输入图像描述](../Images/394c884384a18445e95df82572869cad.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:23:16.607

你似乎在使用花车。如果您希望`.btnSearchDiv`元素从“新行”开始，只需将 a 添加`overflow: hidden;`到`.searchLine`元素中。没有它，这些元素将被折叠，因为它们包含浮动元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:23:04.403

..中缺少一个浮点数`.searchLine`。我希望它能解决您的问题

将css更改为：

```
.searchLine
{    
    float:left;
    width:auto;
    min-width:700px;
    height:auto;
    margin:1px 1px 1px 1px;
    padding: 0 0 0 0px;
} 
```

或者

```
.searchLine
{    
    clear:both;
    width:auto;
    min-width:700px;
    height:auto;
    margin:1px 1px 1px 1px;
    padding: 0 0 0 0px;
} 
```

# asp.net - asp.net 4.0 中的向导

> ID：13140910
> 
> 赞同：1
> 
> 时间：2012-10-30T14:16:14.170
> 
> 标签：asp.net, .net

我试图为我的 ASP.net 应用程序的第一次运行添加一个向导类型的查找

如何将向导添加到我的 ASP.net 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:34:20.700

关于这个主题有几十个教程。一个快速的谷歌得到这些例如：

[演练](http://weblogs.asp.net/sreejukg/archive/2012/01/21/walkthrough-wizard-control-in-asp-net.aspx)和 [使用控件](http://v4.aspnettutorials.com/controls/using-the-wizard-control-with-asp-net-4-0-and-vb/)

# android - 带有 AlertDialog 样式的对话框

> ID：13140915
> 
> 赞同：1
> 
> 时间：2012-10-30T14:16:42.500
> 
> 标签：android, dialog, android-alertdialog

在我的项目中，我需要使用自定义对话框而不是 AlertDialog。但是我对 Dialog 样式有两个问题：

1.  宽度太小
2.  我无法删除标题空间

所以，我需要

![在此处输入图像描述](../Images/4d4d303458816d5d8f83ebbd84537ca2.png)

但是得到：

![在此处输入图像描述](../Images/f6d3a4c35563d666045d68a97ae8d649.png)

调用代码：

```
Dialog dialog = new Dialog(this);
dialog.setContentView(R.layout.write_message);
dialog.show(); 
```

布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/message"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textMultiLine"
        android:minLines="3" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/send_message"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/send_message" />

</LinearLayout> 
```

如何解决这个问题？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:19:06.123

你有没有尝试过 ：

```
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE); //for the title space 
```

和

```
dialog.getWindow().setLayout(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT); //for the width 
```

如果需要，您可以在布局 xml 中添加填充

?

# c++ - 在声明 C++ 之后给出尺寸

> ID：13140922
> 
> 赞同：0
> 
> 时间：2012-10-30T14:16:55.427
> 
> 标签：c++, vector, initialization, declaration

我想在通过其他函数声明向量后给出向量的尺寸。
这是因为我之后会知道向量的维度。

有什么方法可以在不使用循环的情况下做到这一点。
例如

```
std::vector<std::vector<int>>my_vector;

........
........
........ 
```

在其他一些函数中，我将声明它的尺寸。

```
my_vector(2,5); 
```

类似的东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:20:46.837

`my_vector.resize(2, std::vector<int>(5));`

[活生生的例子。](http://liveworkspace.org/code/8a8da7129cb600e2539423fbb6167ec0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:19:49.247

```
my_vector = std::vector< std::vector<int> >(2, std::vector<int>(5)); 
```

或在 C++11 中，如 Xeo 所述：

```
my_vector = {2, std::vector<int>(5)}; 
```

我认为这种方法比调整大小要好，因为如果多次更改大小，最终可能会得到一个锯齿状矩阵：

```
my_vector.resize(1, std::vector<int>(3));
my_vector.resize(2, std::vector<int>(5)); 
```

现在第一行是 3 个元素，第二行是 5 个元素。

# java - 在 try/catch 完成之前，JFrame 不会重新绘制

> ID：13140924
> 
> 赞同：1
> 
> 时间：2012-10-30T14:16:58.010
> 
> 标签：java, swing, jframe

我有一个程序可以通过我在 main 中调用的函数来获取用户的输入。提交按钮附加了一个执行操作的方法。在删除输入文件并设置文本以通知用户后，我试图让它重新绘制屏幕。在使用自定义函数进行 try/catch 之后，它才会重新绘制。不知道我做错了什么，尽管它会按顺序执行？下面是附加到我的提交按钮的我的操作。一个注意事项是，如果我执行 frame.dispose() 或 setVisibility(false) 它将删除框架，任何帮助将不胜感激。谢谢！！

```
 button.addActionListener(new ActionListener (){

                public void actionPerformed(ActionEvent e) {
                    loc = FileLoc.getText();
                    name =  FileName.getText();

                    //inform user
                    area.setText("Attempting To Run Test....");
                    //backGroundPane contains the user input fields and button      
                    frame.remove(backGroundPane);
                    frame.repaint();

                    if(loc != null && name != null && 
                            !loc.equals("") && !name.equals(""))
                    {
                        try {
                            CallDrivers();
                        } catch (InterruptedException e1) {
                            System.out.println("Error Running Function");
                            //e1.printStackTrace();
                        }
                    }
                    else{
                        area.setText("There are Blank Fields");
                        System.out.println("test");
                    }
                }}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:18:32.780

您正在阻止 EDT（事件调度线程）。

事件分派线程负责分派所有 UI 事件，一次一个，按照发布的顺序。事件可以是：

*   按键事件（例如用户按下按键）
*   鼠标事件（例如用户移动鼠标）
*   调用事件（您调用 SwingUtilities.invokeLater() 或`JComponent.repaint()`例如）
*   绘制事件（绘制组件的请求）
*   动作事件（由发生的 InputEvent 触发的逻辑事件）

当您调用重绘时，您正在将一个事件推送到队列中，但只要当前事件（actionPerformed 之一）未完成，就不会发生重绘。这就是为什么您的重绘仅在您的 try/catch 完成后发生

在这里阅读更多：http: [//docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

# objective-c - 将控制台输出显示到应用程序中的控件

> ID：13140925
> 
> 赞同：0
> 
> 时间：2012-10-30T14:17:01.313
> 
> 标签：objective-c, nstextfield, nstextview

我的 Cocoa 应用程序有一个调试模式，它显示了我想在其中显示 NSLog 输出的附加窗口（就像 Xcode 中的控制台窗口一样）。我已经有一个自定义的 NSlog 方法，它也将输出保存到一个文件中。我应该使用 NSTextView 哪个控件？如何用新行在其中附加文本？日志可能很长，因此它也需要高效。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:47:06.620

我会使用 NSTextView。这将是最简单和最有效的。

```
[myTextView insertText: [NSString stringWithFormat: @"%@\r\n", yourStringTOAppend]]; 
```

# pagination - Magento 分页在自定义模块中不起作用

> ID：13140926
> 
> 赞同：0
> 
> 时间：2012-10-30T14:17:15.527
> 
> 标签：pagination, paging, toolbar, magento-1.7

我有一个非常复杂的问题（至少我是这么认为的）在 Magento 中实现自定义模块。我创建了一个模块，在默认目录中显示单个主要类别的产品。例如，

```
root catalog
  -main category
     -cat 1
     -cat 2
       -sub category 1
     -cat 3 
```

所以我需要做的是，在下拉列表中显示所有这些类别，当您选择任何一个类别时，将加载其所有产品。看起来很困难。我在模块的 list.phtml 文件中添加了代码以按类别下拉列表显示这种排序。我没有加载默认产品集合，而是加载了**主类别**，然后获取其所有子类别并填充下拉列表。我从下拉列表中获取了所选类别的产品集合。我的代码是这样的：

```
$baseCategory = Mage::getModel('catalog/category')->load(62);
$_productCollection = $baseCategory->getProductCollection()->addAttributeToSelect('*'); 
```

产品加载正常，但分页出现问题。分页代码如下：

```
$this->getToolbarHtml(); 
```

我使用了**$this->getToolbarHtml();** 而不是**$this**所以在分页中我还需要更改对象。我认为它不起作用。显示工具栏，但无论选择的每页产品数量如何，它始终显示所有产品。谁能告诉我如何让工具栏与我在 list.phtml 文件中更改的代码一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:52:53.660

我找到了一种不同的方法来完成我想要完成的任务。因此，我没有创建一个新模块，而是创建了一个新主题，因此只是覆盖了 list.phtml 文件。不再需要使用上面的代码。而且由于我使用的是默认目录对象，所以寻呼机也可以正常加载。

# maven-2 - 在 Maven 安装中并行运行任务

> ID：13140931
> 
> 赞同：1
> 
> 时间：2012-10-30T14:17:25.420
> 
> 标签：maven-2, maven-3, maven-install-plugin

我正在寻找方法来改善我的 Maven 构建的构建时间。

我按照这个建议（[加速 maven](http://bosy.dailydev.org/2009/02/speed-up-your-maven-build-four-times.html)）将目标文件夹重命名为不同的名称，然后继续安装目标，从而避免清理所需的时间。

然而，这给我留下了一个在某个阶段仍需要清理的文件夹。我希望我可以自动删除这个重命名的文件夹，作为与安装阶段并行运行的第二个进程。

我还没有找到任何关于它是否可能的信息。

为帮助喝彩，

弗格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:48:30.503

我不知道有一个开箱即用的功能可以做到这一点。此外，antrun 插件似乎没有分叉进程并并行运行的选项。

也许蚂蚁本身可以在构建脚本中做到这一点？

Maven 3 支持并行构建：[https](https://cwiki.apache.org/MAVEN/parallel-builds-in-maven-3.html) ://cwiki.apache.org/MAVEN/parallel-builds-in-maven-3.html - 这可能有助于加快速度（但取决于您使用的插件）。

# http-post - 在 C++ 中发布到 https 服务器之前添加客户端证书

> ID：13140933
> 
> 赞同：1
> 
> 时间：2012-10-30T14:17:42.690
> 
> 标签：http-post, client-certificates

我想将一些数据发布到 https 服务器，在此之前我需要添加客户端证书以进行信任验证。我已经在 C# 中完成了它，如下所示：-

```
X509Certificate cert = X509Certificate.CreateFromCertFile("Path to my .cer file");   //****** name of cer file is "ServerTrial.cer" ******//
Uri authURL = new Uri("https://myServer/post");
HttpWebRequest authRequest = (HttpWebRequest)WebRequest.Create(authURL);    //****** Here i add the server url ******//
authRequest.ClientCertificates.Add(cert);    //****** Here i add the client certificate ******//
authRequest.Method = "POST";    //****** Here i specify the method which is "POST" ******//

byte[] postBytes = "Data to be posted";
authRequest.ContentLength = postBytes.Length;
Stream requestStream = authRequest.GetRequestStream();
// now send it
requestStream.Write(postBytes, 0, postBytes.Length);   //****** Here I post the data to the Server ******//
requestStream.Close();

// grab the response
HttpWebResponse response = (HttpWebResponse)authRequest.GetResponse();      
StreamReader responseStream = new StreamReader(response.GetResponseStream());
string responseStr = responseStream.ReadToEnd(); 
```

所以最终我想要的是创建一个 http 对象，将服务器 url 添加到它，将客户端证书添加到它，然后最后将数据发布到服务器。现在我想在 C++ 中实现上述目标。我正在考虑将 openSSL 用于上述内容，但我对此知之甚少。有人可以指导我吗？

- 谢谢大家，sattu

# actionscript-3 - 更改菜单栏上的菜单项图标

> ID：13140936
> 
> 赞同：0
> 
> 时间：2012-10-30T14:17:51.197
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

我有一个菜单栏对象，其中一个菜单有子菜单。当我单击某些子菜单时，我想用它的图标替换所选子菜单图标的父级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:36:31.170

Flex 4/4.5 中的菜单栏仍然是 Flex 3 时代的 mx 组件。

菜单栏是数据驱动的，所以可以修改父菜单对应的数据项，改变其图标数据，将整个菜单数据重新赋值给组件。下面的伪代码可以表示所描述的逻辑：

```
private var _menuBarData:Object;
public var myMenuBar:MenuBar;

override protected function createChildren():void
{
    super.createChildren();

    if ( myMenuBar == null )
    {
        myMenuBar = new MenuBar();
        addChild(myMenuBar);
    }

    myMenuBar.dataProvider = _menuBarData;  // assume that _menuBarData is populated already
    myMenuBar.removeEventListener(MenuEvent.CHANGE, myMenuBar_change);
    myMenuBar.addEventListener(MenuEvent.CHANGE, myMenuBar_change);
}

private function myMenuBar_change( event:MenuEvent ):void
{
    var itemData:Object = event.item;

    if ( itemData == null )
    {
        return;
    }

    var iconData:Object = itemData[iconField];

    var parentData:Object = findParentData(itemData);
    if ( parentData )
    {
        parentData[iconField] = iconData;

        event.menuBar.dataProvider = _menuBarData;  // reassign _menuBarData as it is updated
    }
}

private function findParentData(itemData:Object):Object
{
    // traverse through _menuBarData object and find out the parent of itemData
    // this highly depends on how your data structure is designed
} 
```

# c# - 继续文本框中的最后一行

> ID：13140946
> 
> 赞同：0
> 
> 时间：2012-10-30T14:18:28.477
> 
> 标签：c#

如何通过单击按钮获取文本框中的最后一行。使用该代码，我得到第一行...

```
 private void btnProbe_Click(object sender, EventArgs e)
    {

       string[] first = txtRec.Text.Split(new char[] { '\n' }[0]);
       probe.Text = txtRec.Lines[0];
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:21:02.807

您不需要拆分字符串，只需使用：

```
private void btnProbe_Click(object sender, EventArgs e)
{
     if(txtRec.Lines.Length>1)        
        probe.Text = txtRec.Lines[txtRec.Lines.Length - 1];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:29:17.307

使用 LINQ，代码变得更加优雅：

```
var lastLineString = txtRec.Lines.Last(); 
```

** 请记住将 System.Linq 添加到您的使用中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:26:13.117

您只需计算行数就可以了：

```
txtRec.Lines[txtRec.Lines.Length - 1]; 
```

txtRec.Lines.Length 为您提供行数；因为数组计数从 0 开始，所以需要减去 1

另外，您不需要以“first”开头的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:23:53.413

您的第一行无用且令人毛骨悚然。

```
 private void btnProbe_Click(object sender, EventArgs e)
 {
   probe.Text = txtRec.Lines[txtRec.Lines.Length - 1];
 } 
```

# delphi - 如何突出显示 DBGrid 单元格？

> ID：13140947
> 
> 赞同：3
> 
> 时间：2012-10-30T14:18:29.020
> 
> 标签：delphi

我正在尝试以编程方式突出显示 TDBGrid 后代中的当前单元格。如果我执行 DBGrid.SetFocus，我会得到下面的组合框箭头，这对我来说没有充分突出显示。

编辑：

我已经在做 DBGrid.SelectedField := DataSource.FieldByName('Name');

为了将用户的注意力更多地吸引到相关区域，我设置了：

```
DBGrid.Columns[x].Title.Font.Style := [fsbold, fsunderline]; 
```

我设置了一个计时器，五秒钟后会：

```
DBGrid.Columns[x].Title.Font.Style := []; 
```

奇怪的是，随着时间的推移，单元格变为蓝色（如下所示）。*这就是我首先想要的亮点。*但是我对网格的了解还不够，不知道如何直接获得它。

我的问题：如何使网格单元格突出显示，如下面的蓝色示例所示？我以前从来没有做过这样的事情，所以我有点迷茫。这是一个 InPlaceEditor 功能吗？

我正在使用 TDBGrid 的后代，所以我不确定我看到的行为是 TDBGrid 固有的，还是只是在后代中（在这种情况下，我知道我的问题无法在这里回答。）

![两个控件](../Images/70ce868131f246dd67989b9e315652b1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:07:24.347

我一直在使用以下（D2007）使用该`DBGrid: OnDrawColumnCell`事件。

```
procedure TForm1.DBGridDrawColumnCell(Sender: TObject;
  const Rect: TRect; DataCol: Integer; Column: TColumn; State: TGridDrawState);
begin 
  //Make the column blue if the title is bold
  if (fsBold in Column.Title.Font.Style) then
    TDBGrid(Sender).Canvas.Brush.Color := $00fff0e1;

  //Set the selected row to white/bold text on blue background
  if (gdSelected in State) then
    begin
      TDBGrid(Sender).Canvas.Brush.Color := clHighlight;
      TDBGrid(Sender).Canvas.Font.Style := Font.Style + [fsBold];
      TDBGrid(Sender).Canvas.Font.Color := clHighlightText;
    end;

  //Update the grid
  TDBGrid(Sender).DefaultDrawColumnCell(Rect, DataCol, Column, State);
end; 
```

# android - 编辑列表视图

> ID：13140951
> 
> 赞同：1
> 
> 时间：2012-10-30T14:18:34.280
> 
> 标签：android, listview

我能够在列表视图中显示内容。但是我想编辑该内容，是否可以在 android 中进行，如果可以，该怎么做。我没有找到任何关于编辑列表视图项目的内容。下面的代码是显示列表视图

```
dataAdapter = new SimpleCursorAdapter(
                this, R.layout.row,
                cursor,
                columns,
                to);
        ListView listView = (ListView) findViewById(R.id.list);
        listView.setAdapter(dataAdapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:45:05.087

`SimpleCursorAdapter`绑定到一个`Cursor`. 因此更新`Cursor`（重新查询例如）的内容，然后用于`dataAdapter.notifyDataSetChanged()`刷新`ListView`.

# objective-c - 安排通知

> ID：13140955
> 
> 赞同：2
> 
> 时间：2012-10-30T14:18:43.467
> 
> 标签：objective-c, ios, xcode, push-notification

所以我在这里遇到了一个小问题。我的应用程序需要每天同时触发通知。它现在通过应用程序内部的代码来执行此操作。

但是，我想在我的服务器上安排这些通知，然后在设备上安排它们，直到该关闭为止。我读过推送通知，而且它们作为警报不可靠，所以我想这不是一个好主意。

所以我的问题是，是否可以让应用程序从服务器读取时间然后在本地安排它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:37:49.053

是的，只需使用`UILocalNotification`. 您不需要涉及推送通知。

# java - 解析套接字输入字符串

> ID：13140956
> 
> 赞同：0
> 
> 时间：2012-10-30T14:18:43.903
> 
> 标签：java, android

我希望从我的 telnet 套接字输入中解析“艺术家 - 标题”。现在它只显示最后一行是“END”。我做错了什么？我是 java.pls 的初学者，请帮助...

我的工作脚本：

```
try {
        Socket s = new Socket("10.0.2.2", 5555);

        BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
        BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream(), "ISO8859_1"));

        String on_air = "request.on_air" + System.getProperty("line.separator");
        out.write(on_air);
        out.flush();
        Log.i("TcpClient", "sent: " + on_air);
        String on_airin = in.readLine() + System.getProperty("line.separator");
        Log.i("TcpClient", "received: " + on_airin);
        String metadata = "ao.metadata "+ on_airin + System.getProperty("line.separator"); 
        out.write(metadata);
        out.flush();
        Log.i("TcpClient", "sent2: " + metadata);
        String metadatain = in.readLine() + System.getProperty("line.separator");
        Log.i("TcpClient", "received: " + metadatain);

        String line = in.readLine();
        while (line != null) {

            line = in.readLine();

            System.out.println(line);
            output = (TextView) findViewById(R.id.textView2);
            output.setText(line);

//tv.setText(online + formatedDate );
        output = (TextView) findViewById(R.id.textView1);

s.close();

    }} catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

我的 System.out.println [http://pastebin.com/SkfiPXar](http://pastebin.com/SkfiPXar)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:23:29.930

`readLine()`您在打印前执行额外的操作。折叠这三行：

```
String line = in.readLine();
while (line != null) {
    line = in.readLine(); 
```

进入

```
String line = null;
while ((line = in.readLine()) != null) { 
```

此外，看起来您关闭了`Socket`内部`while`循环，这可能会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:14:46.147

完整活动：

```
public class MainActivity extends Activity {

//TextView output; //textview to display the artist
TextView artist;
//TextView output; //textview to display the duration
TextView time;
/** Called when the activity is first created. */

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

    try {
        Socket s = new Socket("10.0.2.2", 5555);

        BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
        BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream(), "ISO8859_1"));

        //get audio estimated remaining time
        String milliseconds = "ao.remaining" + System.getProperty("line.separator");
        out.write(milliseconds);
        out.flush();
        Log.i("TcpClient", "sent: " + milliseconds);
        String milliseconds_in = in.readLine() + System.getProperty("line.separator");
        Log.i("TcpClient", "received: " + milliseconds_in);

        //get metadata stuff  
        String on_air = "request.on_air" + System.getProperty("line.separator");
        out.write(on_air);
        out.flush();
        Log.i("TcpClient", "sent: " + on_air);
        String on_airin = in.readLine() + System.getProperty("line.separator");
        Log.i("TcpClient", "received: " + on_airin);
        String metadata = "ao.metadata "+ on_airin + System.getProperty("line.separator"); 
        out.write(metadata);
        out.flush();
        Log.i("TcpClient", "sent: " + metadata);
        String metadatain = in.readLine() + System.getProperty("line.separator");
        Log.i("TcpClient", "received: " + metadatain);

        String closetelnet = "exit" + System.getProperty("line.separator"); 
        out.write(closetelnet);
        out.flush();
        Log.i("TcpClient", "sent: " + closetelnet);
        String closetelnetin = in.readLine() + System.getProperty("line.separator");
        Log.i("TcpClient", "received: " + closetelnetin);

        String line = null;
        while ((line = in.readLine()) != null) {

            System.out.println(line);
            artist = (TextView) findViewById(R.id.textView2);
            artist.setText(line);

            float seconds = Float.parseFloat(milliseconds_in);
            Date date = new Date((long)(seconds * 1000));
            SimpleDateFormat formater = new SimpleDateFormat("mm:ss");
            String formatedDate = formater.format(date);
            //android.util.Log.d("This will display:", formatedDate);

            time = (TextView) findViewById(R.id.textView1);
            time.setText(formatedDate);

    }   
        s.close();

    }catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

}

System.out [http://pastebin.com/G1P1HrvA](http://pastebin.com/G1P1HrvA)

# .net - LegacyUnhandledExceptionPolicy 不允许捕获（并吞下）ThreadAbortException？

> ID：13140961
> 
> 赞同：5
> 
> 时间：2012-10-30T14:18:55.733
> 
> 标签：.net, multithreading, threadabortexception

我正在使用 .NET 1.1 兼容模式进行未处理的异常处理。问题是当 LegacyUnhandledExceptionPolicy 设置为“1”（这是我想要的）时，我无法捕获和吞下 ThreadAbortException。

**示例代码：**

应用程序配置：

```
<configuration>
   <runtime>
      <legacyUnhandledExceptionPolicy enabled="1"/>
   </runtime>
</configuration> 
```

代码：

```
 class Program {

      static void Main(string[] args) {
         AppDomain.CurrentDomain.UnhandledException += _onBackgroundThreadCrash;
         var t = new Thread(_worker) { IsBackground = true };
         t.Start();
         Thread.Sleep(1000);
         t.Abort();
         Console.ReadLine();
      }

      private static void _worker() {
         try {
            while (true);
         } catch (ThreadAbortException) { 
            // expected thread exit, don't rethrow
         }
      }

      private static void _onBackgroundThreadCrash(object sender, UnhandledExceptionEventArgs e) {
         Console.WriteLine(e.ExceptionObject as Exception);
      }

   } 
```

当遗留异常处理为“0”（关闭）时，上面的代码会像预期的那样安静地吞下 ThreadAbortException。

但是，当遗留异常处理为“1”时，上面的代码将 ThreadAbortException 打印到控制台，这不是我所期望的。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T16:15:46.033

您无法捕获 ThreadAbortException，它总是在捕获后重新引发。您的问题有两种基本解决方案。

第一个是您重置中止请求：

```
catch (ThreadAbortException) {
    // expected thread abort request, reset it and exit thread
    Thread.ResetAbort();
} 
```

第二个是解决启用遗留异常处理时发生的另一件事。现在也针对非致命异常引发 AppDomain.UnhandledException 事件。像这样编写您的异常处理程序：

```
private static void _onBackgroundThreadCrash(object sender, UnhandledExceptionEventArgs e) {
    if (e.IsTerminating) {
        Console.WriteLine(e.ExceptionObject as Exception);
    }
} 
```

我不得不推荐第一个解决方案，你真的不希望终止线程的未处理异常根本不留下任何痕迹。

# java - 如何将 JMenuItem 对齐更改为右对齐

> ID：13140964
> 
> 赞同：6
> 
> 时间：2012-10-30T14:19:06.180
> 
> 标签：java, swing, alignment, jmenuitem

我用`netBeans`编辑器用java编写了一个程序。

我的表格有`jmenuBar`一些`jmenu`正确对齐。

例如`jmenu1`有一些`jmenuItem`，我想右对齐所有`jmenuitem`的文本。

当我将它们的水平对齐更改为右时，运行它时未显示文本。

```
menuItem1.setHorizontalAlignment(SwingConstants.RIGHT); 
```

我该怎么做？

[http://upcity.ir/images/18431917276667197781.jpg](http://upcity.ir/images/18431917276667197781.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:34:08.340

```
 JMenuItem item1 = new JMenuItem("Item 1");
    JMenuItem item2 = new JMenuItem("Item ________ 2");
    JMenuItem item3 = new JMenuItem("Item 3");

    item1.setHorizontalAlignment(SwingConstants.RIGHT);
    item3.setHorizontalAlignment(SwingConstants.CENTER); 
```

这个对我有用。问题可能在于项目的长度 - 它们是相同的，因此右对齐不可见。

# foursquare - Foursquare 场地 API：通过 client_id 使用无用户访问时没有结果

> ID：13140965
> 
> 赞同：0
> 
> 时间：2012-10-30T14:19:14.697
> 
> 标签：foursquare

`client_id`我正在使用和使用无用户访问 Foursquare API `client_secret`：

```
https://api.foursquare.com/v2/venues/search?ll=37.789565,-122.395487&v=20120608&client_secret=XXX&client_id=YYY 
```

并得到回应，但没有结果：

```
{"meta":{"code":200},"response":{"venues":[]}} 
```

经纬度在旧金山的SOMA，周围应该有很多场地。[而且，事实上，当使用来自API Explorer](https://developer.foursquare.com/docs/explore#req=users/self)的 OAuth 令牌而不是 client_id 和 client_secret请求相同的坐标时，我得到了很多结果。

```
https://api.foursquare.com/v2/venues/search?ll=37.789565,-122.395487&v=20120608&oauth_token=XXX 
```

然而事实上，当我将位置更改几个块时`ll=37.779129,-122.393333`，两个查询都得到相同的结果，所以我的`client_id`and没有任何问题`secret`。这完全超出了我的理解。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:44:30.470

好的，经过大量实验后，Foursquare API 中似乎存在一个错误（@akdotcom，如果您可以阅读此内容，请确认）。所以，基本上要求

```
37.789565,-122.395487 
```

没有返回任何场地，但是

```
37.7895651,-122.395487 
```

做。尾随零无济于事，但是附加`0000001`到纬度和经度似乎可以解决我的测试用例。我想他们的 URL 解析有一些奇怪的问题，但也许来自foursquare 的人可以启发我。

# php - 从弹出窗口中自动抓取链接并添加到输入中

> ID：13140966
> 
> 赞同：0
> 
> 时间：2012-10-30T14:19:23.560
> 
> 标签：php, javascript, jquery

我想知道是否有人可以帮助我。

我做了一个小提琴，所以你们可以很容易地理解我。

我有一个按钮和输入表单。

一旦页面完成加载，我想以某种方式从弹出窗口中获取该链接。我添加了 google 仅作为示例，但在实际示例中它是一个 php 文件。

因此，一旦页面完成加载，脚本就会抓取该链接并将其粘贴到输入表单中。

我不知道这是否可能，因为我什么都没有想到。既不是 php，也不是 jQuery。

任何知道是否可能的人都可以给我一些提示或示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:27:29.963

如果弹出窗口与触发它的页面位于同一域中，您可以使用：

```
var popup = window.open(); // popup code
alert(popup.location.href); 
```

另一方面，如果弹出窗口位于不同的域中，则由于跨站点脚本限制，您将无法访问其属性。

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

# objective-c - NSArray 按函数排序

> ID：13140967
> 
> 赞同：2
> 
> 时间：2012-10-30T14:19:26.313
> 
> 标签：objective-c, nsarray, sorting

我有一个`NSArray`包含几个`NSDictionary`实例。`NSDictionary`在其他字段中，每个都有一个名为的对象`rating`和一个`numberOfVotes`（两者都是`int`）。如何对数组进行排序，使其按`rating`/排序`numberOfVotes`？更一般地说，我可以通过执行上述操作对其进行排序吗？或者将每个操作的值添加到每个对象`NSDictionary`然后按此排序会更好吗？

谢谢

编辑 - 我添加了以下内容。仍然没有正确排序。一个问题：这是否适用于我的数组中的 2 个以上的对象。（对象的数量会有所不同）

```
 [sortedArray sortedArrayUsingComparator:^NSComparisonResult(id dict1, id dict2)
{
    MyObj *obj1 = (MyObj *)dict1;
    MyObj *obj2 = (MyObj *)dict2;

    int rating1 = obj1.rating.intValue;
    int rating2 = obj2.rating.intValue;

    int number1 = obj1.number_of_votes.intValue;
    int number2 = obj2.number_of_votes.intValue;

    double key1 = ((double)rating1)/number1;
    double key2 = ((double)rating2)/number2;

    if (key1 < key2)
    {
        return NSOrderedDescending;
    }

    if (key2 < key1)
    {
        return NSOrderedAscending;
    }
    return NSOrderedSame;

}]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:29:16.953

您可以定义一个自定义比较器以使用您正在寻找的那种复合排序键。如果没有充分的理由在字典中使用该排序键，则除了执行排序之外，不要向字典中添加项目。

```
array = [array sortedArrayUsingComparator: ^(id obj1, id obj2) {
    int rating1 = [[obj1 objectForKey:@"rating"] intValue];
    int numberOfVotes1 = [[obj1 objectForKey:@"numberOfVotes"] intValue];
    int rating2 = [[obj2 objectForKey:@"rating"] intValue];
    int numberOfVotes2 = [[obj2 objectForKey:@"numberOfVotes"] intValue];
    double key1 = ((double)rating1)/numberOfVotes1;
    double key2 = ((double)rating2)/numberOfVotes2;
    if (key1 > key2) {
        return (NSComparisonResult)NSOrderedDescending;
    }

    if (key1 < key2) {
        return (NSComparisonResult)NSOrderedAscending;
    }
    return (NSComparisonResult)NSOrderedSame;
}]; 
```

**注意：**该`sortedArrayUsingComparator:`方法不对数组进行就地排序；相反，它返回一个排序的*副本*。如果您想要就地排序，请使用`NSMutableArray`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:32:20.267

适当的方法是使用这样的块

```
NSArray *sortedArray;

sortedArray = [unsortedArray sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
    float first = [[(NSDictionary*)a objectForKey:@"rating"] floatValue]/
                      [[(NSDictionary*)a objectForKey:@"numberOfVotes"] floatValue];
    float second = [[(NSDictionary*)a objectForKey:@"rating"] floatValue]/
                      [[(NSDictionary*)a objectForKey:@"numberOfVotes"] floatValue];
return [[NSNumber numberWithFloat:first] compare: [NSNumber numberWithFloat:second]];
}]; 
```

您可能会找到更多比较方法：

[如何对包含自定义对象的 NSMutableArray 进行排序？](https://stackoverflow.com/questions/805547/how-to-sort-an-nsmutablearray-with-custom-objects-in-it)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:36:01.037

理想情况下，您应该使用具有和`NSDictionary`等属性的自定义对象替换。然后，您可以在此自定义对象上声明一个方法并用作选择器来对数组进行排序。`rating``numberOfVotes``compare:`

您可以使用块代码对对象进行排序，但将实现抽象为自定义对象会更简洁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:43:58.620

您可以在此处使用 NSSortDescriptor 进行排序，例如包含多个 NSDictionnaries 名称的数组是 dataArray。

```
 NSSortDescriptor * descriptor = [[NSSortDescriptor alloc] initWithKey:rating
                            ascending:YES];
 NSArray * keyArrray = [NSArray arrayWithObjects:descriptor, nil];
 NSArray * sortedArray = [dataArray sortedArrayUsingDescriptors:keyArrray]; 
```

在 NSSortDescriptor 的帮助下，我们可以对任何数据类型的键值对进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T14:35:04.110

过滤数据是计算中的基本任务之一。

您可以通过多种方式对其进行排序。

1.  [**NS谓词**](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)

    [您可以在此处](https://sites.google.com/a/pintailconsultingllc.com/objective-c-and-cocoa/Home/nspredicate-examples)查看示例

2.  [**NSSortDescriptor**](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSortDescriptor_Class/Reference/Reference.html)

    [您可以在此处](http://soulwithmobiletechnology.blogspot.in/2011/08/nssortdescriptor-example.html)查看示例

3.  **常用表达**

4.  **设置操作**

5.  **键值编码**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T14:27:35.127

您寻求的方法系列以`sortedArray`.

对于*函数*（它是多个选项之一），请参阅：`-[NSArray sortedArrayUsingFunction:context:]`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T14:29:01.477

*编辑*：如果要`rating`除以`numberOfVotes`，则必须按函数或比较器块进行排序，或者将字典替换为具有计算方法的模型对象`rating / numberOfVotes`。

使用[`NSSortDescriptor`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSortDescriptor_Class/Reference/Reference.html).

```
 NSArray *sorted = [array sortedArrayUsingDescriptors:[NSArray arrayWithObjects:
    [NSSortDescriptor sortDescriptorWithKey:@"rating" ascending:YES],
    [NSSortDescriptor sortDescriptorWithKey:@"numberOfVotes" ascending:YES],
    nil]
 ]; 
```

# asp.net-mvc-3 - 如何确保文件控件在 ASP.Net MVC Razor 部分视图中具有非空且有效的文件名？

> ID：13140978
> 
> 赞同：0
> 
> 时间：2012-10-30T14:20:10.127
> 
> 标签：asp.net-mvc-3, file-upload, razor, partial-views

我正在使用 Razor 视图开发 ASP.Net MVC 3 应用程序。

单击链接后，我打开一个 JQuery 对话框，其中包含一个部分视图。这个局部视图有一个带有文件输入控件的表单。

此表单绑定到模型。但由于没有 editorFor file( `HttpPostedFileBase`)，我手动放置了 HTML 文件输入控件。

仅当文件输入控件具有非空值并且是有效文件名时，如何确保用户可以提交表单？我使用 Html.BeginForm 来声明表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:38:07.447

你可以用javascript检查它：

```
$('form').submit(function(){
    var file = document.getElementById('fileinputname');
    value = file.value;
    if(/* check value here */)
       return false;
}) 
```

# apache - 不使用 HTTP 重定向内容

> ID：13140982
> 
> 赞同：2
> 
> 时间：2012-10-30T14:20:26.910
> 
> 标签：apache, .htaccess

我想让 apache 通过直接访问“http://url.com/something:PORT”来响应格式为“http://url.com/dir/ID”的服务器请求，其中 ID 由用户，并且 PORT 由 ID 确定（它们不是相同的值）。

我已经尝试过使用“重定向”，但这只是发送一个 HTTP 重定向，我的目标是将“http://url.com/something:PORT”的包含直接提供给“http://url.com/dir” /ID”。

这可能吗？

**编辑：**
示例：
请求者去`http://url.com/dir/ID`并且没有被重定向到`http://url.com/something:PORT`但获得的实际内容`http://url.com/something:PORT`就像原始请求到这里一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:37:34.703

您可以尝试安装 mod_rewrite 并将以下内容放入您的 .htaccess 或 httpd.conf ：

```
RewriteEngine On
RewriteBase /something/
RewriteRule ^(url.com/dir/*)$ http://url.com:$1 [R=301,L] 
```

这是一个 301“永久”重定向，它还会将搜索引擎中的链接 URL 更改为您的最终地址。更多信息[在这里](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。

您可能需要更改正则表达式以适应您的情况，我不能 100% 确定您正在寻找什么结果。如果您可以提供一些用户将访问的特定 URL 的示例以及您希望他们发送到的特定 URL，我可能会为您提供更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:20:26.820

尝试在文档根目录的 htaccess 文件中添加这些规则：

```
RewriteEngine On
RewriteRule ^/?dir/ID$ /something:PORT [L] 
```

如果您指的是实际位于另一台服务器上的资源`something:PORT`，则需要将请求发送到 mod_proxy 以便它可以为您反向代理。如果您没有打开 mod_proxy，那么您无能为力，也许可以找到一些 php 代理解决方案。

在 htaccess 中，您可以使用`P`标志调用 mod_proxy，例如：

```
RewriteEngine On
RewriteRule ^/?dir/ID$ http://something:PORT/ [L,P] 
```

# r - 使用 as.yearmon (zoo) 将字符值转换为月度数据时出错

> ID：13140983
> 
> 赞同：0
> 
> 时间：2012-10-30T14:20:29.130
> 
> 标签：r, zoo

当月份的值采用“Jan”或“January”等文本形式时，就会出现问题。例如，以下行

```
as.yearmon("Jan-2000", "%b-%Y") 
```

返回错误：

```
Error in charToDate(x) : > character string is not in a standard unambiguous format 
```

这里出了什么问题？

会话信息（）：

R 版本 2.15.1 (2012-06-22) 平台：x86_64-pc-mingw32/x64 (64-bit)

语言环境：[1] LC_COLLATE=Russian_Russia.1251 LC_CTYPE=Russian_Russia.1251 LC_MONETARY=Russian_Russia.1251 [4] LC_NUMERIC=C LC_TIME=Russian_Russia.1251

附加的基础包：[1] grid stats graphics grDevices utils datasets methods base

其他附加软件包：[1] RODBC_1.3-6 latticeExtra_0.6-24 lattice_0.20-10 gplots_2.11.0 MASS_7.3-22
[6] KernSmooth_2.23-8 caTools_1.13 bitops_1.0-4.1 gdata_2.12.0 gtools_2 .7.0
[11] RColorBrewer_1.0-5 xts_0.8-6 zoo_1.7-8

通过命名空间加载（未附加）：[1] tools_2.15.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:02:17.200

问题可能与 LC_TIME 语言环境设置有关（感谢 Joshua 询问 sessionInfo() 输出以提供解决方案）。因此，更改时间区域设置会有所帮助。

```
loc <- Sys.getlocale("LC_TIME") #save current locale for future restore
Sys.setlocale("LC_TIME", "C")
as.yearmon("Jan-2000", "%b-%Y") 
```

结果是

> [1] “2000 年 1 月”

# java - NoClassDefFoundError：将文件从 CommonsMultipartFile 映射到 byte[]

> ID：13140984
> 
> 赞同：0
> 
> 时间：2012-10-30T14:20:32.413
> 
> 标签：java, spring, portlet, dozer

我正在尝试使用推土机从 CommonsMultipartFile 映射到字节 []。

我知道我需要一个 customConverter 因为推土机对 CommonsMultipartFile 类型一无所知，所以我做到了：

```
 public class FileJtfConverter extends DozerConverter<CommonsMultipartFile, byte[]> {

    /**
     * Constructor
     */
    public FileJtfConverter() {
        super(CommonsMultipartFile.class, byte[].class);
    }

    @Override
    public final byte[] convertTo(CommonsMultipartFile a, byte[] b) {
        if (a != null) {
            return a.getBytes();
        }
        return null;
    }

    @Override
    public final CommonsMultipartFile convertFrom(byte[] b, CommonsMultipartFile a) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
    } 
```

还有我的推土机 xml 文件：

```
<mapping type="one-way">        
    <class-a>myPackage.ClassA
    </class-a>
    <class-b>myPackage.ClassB
    </class-b>
    ...
    <field custom-converter="es.xunta.formacion.sifo3.transporte.util.converter.FileJtfConverter">
       <a>anexo</a>
       <b>anexo</b>
    </field>
</mapping> 
```

其中 A 类和 B 类是：

```
public class ClassA{
    ...
    private CommonsMultipartFile anexo;
    ...
    public final CommonsMultipartFile getAnexo() {
    return anexo;
    }

    public final void setAnexo(CommonsMultipartFile anexo) {
    this.anexo = anexo;
    }
}

public class ClassB{
    ...
    protected byte[] anexo;
    ...
    public void setAnexo(byte[] value) {
    this.anexo = ((byte[]) value);
    }

    public byte[] getAnexoPago() {
        return anexoPago;
    }
} 
```

一切似乎都很好，但它抛出了一个异常：org.dozer.MappingException: java.lang.NoClassDefFoundError: org/apache/commons/fileupload/FileUploadException

这很奇怪，因为我已经在 pom.xml 文件中定义了依赖项......

```
 <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>                
    </dependency> 
```

有任何想法吗..？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:23:27.247

如果你使用 Spring MVC，你可以`CustomEditor`在你的方法中注册一个用`@InitBinder`.

已经有一个可以为您[`ByteArrayMultipartFileEditor`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/multipart/support/ByteArrayMultipartFileEditor.html)进行自动转换。`MultipartFile``byte[]`

```
@InitBinder
public void initBinder(WebDataBinder binder) {
    binder.registerCustomEditor(byte[].class, new ByteArrayMultipartFileEditor());
} 
```

您的域对象/表单可以直接保存`byte[]`而不是`MultipartFile`.

我相信你也可以对 Spring Portlet MVC 做同样的事情。

# date - 转换时间间隔并将其格式化为小时和分钟“hh：mm”

> ID：13140987
> 
> 赞同：0
> 
> 时间：2012-10-30T14:20:46.553
> 
> 标签：date

可能重复： [将 TimeSpan.TotalMilliseconds 转换为日期时间并将其格式化为小时：分钟](https://stackoverflow.com/questions/13057928/convert-timespan-totalmilliseconds-to-datetime-and-format-it-as-hourminute) [已编辑]

还

```
 Sent = u.DateSent,
                Reply = u.DateReply,

                ResponseTime = Reply - Sent
            }); 
```

这给我两个数据时间之间的时间差是 10 天，但我想计算时间间隔内的小时和分钟，（例如，如果 dateent 是 09/02/2011 2:00 pm ，而 dateReply 是 09/02 /2011 4:30 pm ，那么响应时间应该是 2:30 ）仍然没有弄清楚，任何人都有想法，要么在 linq 中格式化，要么在视图页面上进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:33:19.417

您可以将 ResponseTime 类型更改为 TimeSpan，然后执行以下操作：

```
DateTime dateSent = new DateTime(2012, 10, 30, 2, 0, 0);
DateTime dateReply = new DateTime(2012, 10, 30, 4, 30, 0);

TimeSpan difference = dateReply - dateSent;
Console.WriteLine("{0}:{1}", difference.Hours, difference.Minutes); 
```

我只是放了 Console.WriteLine，这样你就可以看到我是如何按照你想要的方式获得小时和分钟的。从毫秒开始，您可以创建一个新的 TimeSpan，将毫秒传递给构造函数，然后您可以再次在这个新创建的 TimeSpan 中获取 Hour/Minute。

我只是输入了硬编码的日期，这样您就可以根据您的示例实际查看使用情况。

我希望它有所帮助。

# php - Facebook服务器端登录问题

> ID：13140988
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:20:53.277
> 
> 标签：php, facebook, api, authentication, sdk

因此，正如标题所暗示的那样，我正在使用 Facebook php sdk 在我的网站上授权用户，我遇到的问题是，在登录几分钟后，我刷新页面 $user = $facebook->getUser() ; 消失了，页面认为我已注销，但如果我再次刷新，它会再次被授权。

索引.php

```
<?php
session_start(); 
include_once "facebook/fbaccess.php";
?> 
```

fbaccess.php

```
<?php
//Application Configurations
$app_id     = "xxxxxxxxxxxxx";
$app_secret = "XXXXXXXXXXXXXXXXXXXXX";
$site_url   = "http://xxxxxxxxx";

try{
include_once "facebook.php";
}catch(Exception $e){
error_log($e);
}
// Create our application instance
$facebook = new Facebook(array(
'appId'     => $app_id,
'secret'    => $app_secret,
'cookie' => true
));

// Get User ID
$user = $facebook->getUser();
// We may or may not have this data based 
// on whether the user is logged in.
// If we have a $user id here, it means we know 
// the user is logged into
// Facebook, but we don’t know if the access token is valid. An access
// token is invalid if the user logged out of Facebook.

$facebook->setExtendedAccessToken();
$access_token = $facebook->getAccessToken();

if($user){
//==================== Single query method ======================================
try{
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
    $_SESSION['fid'] = $user_profile['id'];
}catch(FacebookApiException $e){
    error_log($e);
    $user = NULL;
}
//==================== Single query method ends =================================
}

if($user){
// Get logout URL
$logoutUrl = $facebook->getLogoutUrl();
}else{
// Get login URL
$loginUrl = $facebook->getLoginUrl(array(
    'scope'         => 'publish_stream', 'offline_access',
    'redirect_uri'  => $site_url,
    ));
}

?> 
```

索引.php

```
<div id="mainMenu">
<?php if ($user) {echo '<a href="' . $logoutUrl . '"><h5>Logout</h5></a>';  }else{ echo '<a href="' . $loginUrl . '"><h5>Login</h5></a>';} ?>
</div> 
```

我正在使用本教程进行登录过程：http: [//25labs.com/tutorial-integrate-facebook-connect-to-your-website-using-php-sdk-v-3-xx-which-uses-graph-接口/](http://25labs.com/tutorial-integrate-facebook-connect-to-your-website-using-php-sdk-v-3-x-x-which-uses-graph-api/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:56:25.437

检查您的会话生命周期设置和 cookie。当您持续浏览您的网站或仅在一段时间不活动后是否存在相同的行为？

# iphone - UIViewController 持久性 - 将状态保存到内存中，并在应用程序终止时将其写入磁盘

> ID：13140989
> 
> 赞同：1
> 
> 时间：2012-10-30T14:20:54.987
> 
> 标签：iphone, ios, xcode, cocoa-touch, state-saving

我正在使用 NSCoding 来保存和恢复我的视图控制器。但是，每次推送或弹出视图控制器时，我都会将导航堆栈 + 视图控制器保存到磁盘。

这不节能，还有更好的方法。

想想`NSUserDefaults`。它将更改保存在内存中的某处（如果按原样重复调用，只需覆盖），当`synchronize`调用该方法时，它将它们写入磁盘。这是真正做到的，并且超级节能。

那么我可以实现这样的事情吗？每次调用将更改保存在内存中的某处以及`synchronize/writeToDisk`调用方法以清除内存缓存并将其写入磁盘时。任何想法将不胜感激！

我的想法是使用`NSCache`, 和 in `application:willResignActive`or`application:willTerminate`获取缓存中的对象并将其写入磁盘。

非常感谢！

# android - 如果为 2D 游戏制作，图形集的外观如何？

> ID：13140990
> 
> 赞同：1
> 
> 时间：2012-10-30T14:20:55.027
> 
> 标签：android, ios, 2d-games

我们为许多移动应用程序创建了图形，但这是我们的设计师第一次为 2D 游戏创建图形。

他应该像在移动应用程序项目中那样创建一个 Photoshop 文件，还是在创建 2D 游戏图形时有一些特定的东西？

我试图在网上找到答案，但在这个特定问题上我一无所获。我会很感激熟悉游戏编码回复的人，因为他可能已经收到了要在他的代码中实现的图形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:38:20.223

基本上大多数 2D 游戏都是基于图块的。

因此，您的设计师应该提供所有可能的工件和动画都可见的图形文件。

之后，您需要从这些图像中提取片段以创建可供您用于每个游戏关卡的游戏引擎使用的图块集。

用于平铺集编辑的编辑器的一个示例是著名的 Tiled，[http://www.mapeditor.org/](http://www.mapeditor.org/)。

然后游戏引擎负责定位给定关卡的瓦片集，并将可用的瓦片用于背景和角色动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:35:08.543

我会说这取决于您要使用的工具/框架...

如果你打算使用 cocos2d（非常好的 2D 手机游戏框架），那么你绝对应该看看 CocosBuilder（[http://cocosbuilder.com](http://cocosbuilder.com)），一个很好的设计师和开发者协作的编辑器。

# actionscript-3 - 如何完全删除已加载的 swf 并重新加载？（尝试重新开始游戏）

> ID：13140993
> 
> 赞同：0
> 
> 时间：2012-10-30T14:21:06.527
> 
> 标签：actionscript-3, flash, preloader

我有一个加载 swf 的预加载器，该 swf 创建了一堆侦听器、对象和影片剪辑。我希望所有这些都被销毁并重新创建。

我的预加载器的简化版本：

```
var request:URLRequest = new URLRequest("myfile.swf");
var myLoader:Loader = new Loader();
var urlLoader:URLLoader = new URLLoader();

urlLoader.addEventListener(Event.COMPLETE, function(event){ 
    stage.addChild(myLoader);
    myLoader.loadBytes(urlLoader.data);
});

urlLoader.dataFormat = URLLoaderDataFormat.BINARY;
urlLoader.load(request); 
```

当我尝试删除它时，我会这样做：

```
stage.removeChild(myLoader);
var child = loader.myLoader.content as Object;
SoundMixer.stopAll();
while(stage.numChildren > 0){
     stage.removeChildAt(0);
}
child.stop();
while(stage.numChildren > 0){
     stage.removeChildAt(0);
}
child=null;

System.gc();
myLoader.unloadAndStop(true);
System.gc();
myLoader.unload();
System.gc();
myLoader.loadBytes(urlLoader.data);
stage.addChild(loader.myLoader); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:32:36.170

在您加载的 SWF 中，您可以创建一个“destroy”方法，该方法将删除所有侦听器、销毁所有对象并重置所有数据。

您可以从父对象调用此方法（如果该方法是公共的），也可以`destroy`在从舞台中移除 SWF 时调用 (Event.REMOVED_FROM_STAGE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:41:15.330

您可以使用 js 重新加载 swf，这是执行此操作的简单方法。你可以检查[这个答案](https://stackoverflow.com/a/754904/948445)。

或者你必须在 swf 文件中做好对象和监听器管理和重置游戏。随着项目变得越来越大，这可能会很复杂。您需要删除所有引用和侦听器的发布方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T21:08:08.120

首先，您应该使用 Loader 类加载您的 swf，如下所示：

```
 var movie:MovieClip
        var loader:Loader = new Loader();
        loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadComplete);
        loader.load( new URLRequest("myfile.swf"));

        function loadComplete(event:Event):void
       {
        movie = loader.content as MovieCLip;
        addChild(movie);
       }

    //when reloading just remove the movie object from the stage

     removeChild(movie);
    SoundMixer.stopAll();
    //......
    //.
    //. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T23:01:25.487

我知道这是旧的，但我偶然发现它以供参考，并看到一些我认为应该提及的东西。

System.gc() - 虽然它是您可以访问的函数，但我所看到的一切都表明垃圾收集器不应该被您的代码调用，除非您使用了大量内存并立即需要它。垃圾收集器通常比您更清楚应该何时运行（[在 AS3 中强制垃圾收集？](https://stackoverflow.com/questions/192373/force-garbage-collection-in-as3)）。它不仅会影响您的应用程序的性能，还会影响在该浏览器或容器中运行的所有 Flash 应用程序的性能。

还有很多人在努力有效地使用 unloadAndStop()，因为它在各种情况下似乎相当不可靠（[使用 unloadAndStop() 方法卸载 swf，但视频声音仍然可以听到](https://stackoverflow.com/questions/5013942/unloading-swf-using-the-unloadandstop-method-but-video-sounds-remain-audible)）。

为彻底起见，我强烈建议您先从加载的 flash 对象中删除所有其他语言，然后再删除 flash 对象本身，而不是指望容器会为您处理它。这就是为什么 Flash 一开始就以内存泄漏着称。

在加载的 swf 中，添加在卸载时触发的代码。一种方法是将其添加到 swf：

```
this.addEventListener(Event.REMOVED_FROM_STAGE, doUnload) 
```

然后让 doUnload 函数执行以下操作：

使用 removeEventListener 有效地终止事件处理程序。您可以调用您创建的所有 addEventListener，也可以编写一个例程来遍历并通过遍历播放中的对象将它们全部删除。第一个选项更有效，因为它是独占的，但从理论上讲，第二个选项是您可以在应用程序之间记忆和复制的内容。

对变量使用 delete() 以使它们被垃圾收集器移除。注意：与许多语言不同，除非引用也被删除，否则引用的变量将不可删除。例如：

```
var a:int = 0;
var b:int = a;

delete(a); // b still exists and equals 0, a is not available to GC.
delete(b); // now both variables can be removed by GC. 
```

关于使用 removeChildAt(0) 还是单独删除子对象是否是一个好主意仍然存在混淆。第一个的好处是非常简单和直接，但这也给它一个警告，即编码人员不能完全理解它，并且可能会丢失类似于 unloadAndStop() 的东西。不如使用 removeChild 遍历对象树并毫无疑问或不确定地明确消除事物。

设置好后，添加卸载flash对象的函数会触发它的自删除，所以loader会保持简单整洁，重新加载flash很干净。

# r - 如何在R的列联表中放置小数点？

> ID：13140996
> 
> 赞同：0
> 
> 时间：2012-10-30T14:21:14.580
> 
> 标签：r, decimal

## 我的初始数据如下：

```
birth <- c(rep(1,50),rep(0,34))
birth <- factor(birth, levels=c(1,0),
         labels=c("Birth Complications","No Birth Complications")) 
mental.health <- c(rep(1,30),rep(2,26),rep(3,28)) 
mental.health <- factor(mental.health, levels=c(1,2,3), 
labels=c("Normal","Depressed","Schizophrenic")) 
table(mental.health,birth) 
```

* * *

但是当我尝试用小数替换每个单元格中的数字时（例如，从第一个单元格中的 30 到右下角单元格中的 30.5 和 6 到 6.5），R 说我的行和列的长度不相等。

这是我正在尝试但不工作的代码：

```
birth <- c(rep(.5,101),rep(0.5,68))  
birth <- factor(birth, levels=c(1,0), labels=c("Birth 
Complications","No Birth Complications")) 
mental.health <- c(rep(2,120),rep(2,52),rep(3,56)) 
mental.health <- factor(mental.health, levels=c(1,2,3), 
labels=c("Normal","Depressed","Schizophrenic")) 
table(mental.health,birth) 
```

我所做的是将 1 替换为 0.5，然后将该数字的频率从 50 更改为 101，从而使该数字的频率翻倍。非常感谢您的帮助。

# ios - 启动时禁用相机对焦

> ID：13140997
> 
> 赞同：0
> 
> 时间：2012-10-30T14:21:18.777
> 
> 标签：ios, ios6, avfoundation, camera-calibration

当我在装有 iOS 6 的 iPad 3 上启动相机时，相机会进行对焦操作。这就是我使用 AVFoundation 框架的方式：\

```
//
// AppDelegate.h
//

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) AVCaptureSession *session;
@property (strong, nonatomic) AVCaptureVideoPreviewLayer *captureVideoPreviewLayer;
@property (strong, nonatomic) AVCaptureDevice *device;
@property (strong, nonatomic) AVCaptureDeviceInput *input;
@property(nonatomic, strong) AVCaptureStillImageOutput *stillImageOutput;

@end

//
//  AppDelegate.m
//

@implementation AppDelegate
@synthesize session;
@synthesize captureVideoPreviewLayer;
@synthesize device;
@synthesize input;
@synthesize stillImageOutput;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    NSError *error = nil;

    if (([device hasMediaType:AVMediaTypeVideo]) &&
        ([device position] == AVCaptureDevicePositionBack) ) {
        [device lockForConfiguration:&error];
        if ([device isFocusModeSupported:AVCaptureFocusModeLocked]) {
            device.focusMode = AVCaptureFocusModeLocked;
            NSLog(@"Focus locked");
        }

        [device unlockForConfiguration];
    }

    session = [[AVCaptureSession alloc] init];
    session.sessionPreset = AVCaptureSessionPresetPhoto;

    captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
    [captureVideoPreviewLayer setAffineTransform:CGAffineTransformMakeRotation(-M_PI / 2)];

    input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
    if (!input) {
        // Handle the error appropriately.
        NSLog(@"ERROR: trying to open camera: %@", error);
    }
    [session addInput:input];

    stillImageOutput = [[AVCaptureStillImageOutput alloc] init];

    NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
    [stillImageOutput setOutputSettings:outputSettings];

    [session addOutput:stillImageOutput];
    [session startRunning];

    return YES;
} 
```

我专门将焦点锁定`AVDevice`在启动 ( `device.focusMode = AVCaptureFocusModeLocked;`) 上，但是当相机启动时，它会执行对焦操作。在我的应用程序中，出于相机校准的目的，我不希望这种情况发生。

如何避免在相机初始化时触发焦点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T05:09:19.617

```
-(void)disableAutoFocus
   {
    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    [device lockForConfiguration:nil];
    [device setTorchMode:AVCaptureTorchModeOff];
    [device setFlashMode:AVCaptureFlashModeOff];

     NSArray *devices = [AVCaptureDevice devices];
     NSError *error;
     for (AVCaptureDevice *device in devices) {
     if (([device hasMediaType:AVMediaTypeVideo]) &&
        ([device position] == AVCaptureDevicePositionBack) ) {
        [device lockForConfiguration:&error];
        if ([device isFocusModeSupported:AVCaptureFocusModeLocked]) {
            device.focusMode = AVCaptureFocusModeLocked;
            NSLog(@"Focus locked");
        }

        [device unlockForConfiguration];
    }
} 
```

}

# jsf-2 - Tomcat 7番石榴问题？

> ID：13140999
> 
> 赞同：0
> 
> 时间：2012-10-30T14:21:21.577
> 
> 标签：jsf-2, tomcat7, guava, myfaces

我正在开发一个 JSF2、MyFaces 和 Guava 网站。早些时候我将它部署在 Glassfish v3 服务器上没有问题。现在，当我尝试在我的 tomcat 7 服务器上部署它时出现这个奇怪的错误：

```
YYYY-MMM-DD HH:mm:ss org.apache.catalina.startup.ContextConfig checkHandlesTypes
VARNING: Unable to load class [com.google.common.base.Equivalences$Impl] to check against the @HandlesTypes annotation of one or more ServletContentInitializers.
java.lang.IncompatibleClassChangeError: Implementing class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2823)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1160)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1655)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:1988)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1951)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1840)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1808)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1794)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1214)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:828)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:302)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5148)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1525)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1515)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

到目前为止，我知道 Guava 库在启动时出了点问题。有没有人偶然发现过这个问题？