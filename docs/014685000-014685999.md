# StackOverflow 问答 14685000-14685999

# ios - 在signOutAndRemoveLocalData之后，反应式登录？

> ID：14685005
> 
> 赞同：0
> 
> 时间：2013-02-04T10:42:15.760
> 
> 标签：ios, simperium

我正在使用 Simperium 框架并尝试使用此方法手动注销

```
- (void)signOutAndRemoveLocalData:(BOOL)remove 
```

这工作正常，本地数据被删除，但现在我希望 loginViewController 再次“激活”，我该如何让它工作？任何的想法？

干杯安德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:56:39.053

`authenticateIfNecessary`您可以在您的 Simperium 对象上尝试该方法。如果用户当前未登录，则此方法应触发显示身份验证界面。

# opengl - OpenGL：屏幕上 3D 边界框的大小

> ID：14685009
> 
> 赞同：5
> 
> 时间：2013-02-04T10:42:44.060
> 
> 标签：opengl

我需要一种简单而快速的方法，通过使用 OpenGL 模型视图和投影矩阵以及 OpenGL 视口尺寸来找出屏幕上出现的 3D 边界框有多大（用于 LOD 计算）。

我的第一个意图是使用 gluProject() 在屏幕上投影所有 8 个框角，然后计算凸包的面积。此解决方案仅适用于完全在视锥内的边界框。

但是，如何才能在屏幕上显示未完全在观看范围内的盒子的覆盖区域？成像一个盒子，其中 7 个角在近平面后面，只有一个角在近平面前面，因此在视锥内。

我发现了另一个非常相似的问题[Screen Projection and Culling](https://stackoverflow.com/questions/3710393/screen-projection-and-culling-united)，但它并没有涵盖我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:21:15.117

如何使用查询并获取通过渲染的样本？

[http://www.opengl.org/wiki/Query_Object](http://www.opengl.org/wiki/Query_Object)并查看 GL_SAMPLES_PASSED，

这样您就可以测量渲染了多少片段并比较它以进行正确的 LOD 选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:45:57.440

为什么不手动将世界视图投影与顶点位置相乘？这将为您提供“标准化设备坐标”中的顶点，其中 -1 是屏幕的左下角，+1 是屏幕的右上角？

唯一的问题是，如果投影是透视的，您必须将顶点除以它们的第 4 个分量，即如果最终顶点是 (x,y,z,w)，您将除以 w。

以位置向量为例

```
v = {x, 0, -z, 1} 
```

给定垂直视角视图'a'和纵横比'r'，x'在标准化设备坐标（范围0 - 1）中的位置是这样的（这个公式直接取自图形编程书籍）：

```
x' = x *  cot(a/2) / ( r * z ) 
```

因此，给定参数的透视投影如下（以行主要格式显示）：

```
cot(a/2) / r     0      0    0
     0        cot(a/2)  0    0
     0           0      z1  -1
     0           0      z2   0 
```

当您将向量乘以投影矩阵时（假设世界，在此示例中视图矩阵是恒等式），您会得到以下结果（我仅计算新的“x”和“w”值，因为在此示例中它们很重要） .

v' = { x * cot(a/2) / r, newY, newZ, z }

所以最后，当我们将新向量除以其第四个分量时，我们得到

v' = { x * cot(a/2) / (r*z), newY/z, newZ/z, 1 }

所以 v'.x 现在是屏幕空间坐标 vx 这正是图形管道用来确定顶点在屏幕上的位置。

我之前使用过这种基本方法来计算屏幕上几何图形的大小。关于它的好处是，无论投影是透视投影还是正交投影，只要您除以向量的第 4 个分量（对于正交投影，第 4 个分量将为 1），数学就可以工作。

# c++ - Qwt 绘图自动缩放不起作用

> ID：14685010
> 
> 赞同：3
> 
> 时间：2013-02-04T10:42:44.850
> 
> 标签：c++, qt, qwt

我正在尝试使用 qt 4.8 和 qwt 6 绘制一些数据，但我的曲线不会在 plot ( [1](https://i.stack.imgur.com/5MSAk.png) ) 上缩放。

这就是我将曲线附加到绘图的方式：

```
curves[moduleIndex][channelIndex]->setSamples(samples, data);
curves[moduleIndex][channelIndex]->attach(plots[moduleIndex][channelIndex]); 
```

样本和数据是 QVectors 和 samples.size() 等于 data.size()

`plots[moduleIndex][channelIndex]->axisAutoScale(QwtPlot::xBottom)`返回 true，因此`autoScale`启用。

所以我错过了什么吗？

![qwt 绘图自动缩放](../Images/e0815fc59cb80d65c09219d3b297dc82.png)

**更新**：我认为问题是因为禁用轴

```
plots[i][j]->enableAxis(QwtPlot::yLeft, false);
plots[i][j]->enableAxis(QwtPlot::xBottom, false); 
```

但我已经评论了它并没有帮助。

![qwt 绘制带轴的自动缩放](../Images/c11666f41aa7eec6befc45f3887c2e03.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:50:57.090

我相信“自动缩放”已经在起作用。但是为了使轴看起来不错，它需要一个四舍五入的最大值，这会导致最后出现间隙。QwtPlot 的比例由 QwtScaleEngine 管理。您可以使用 QwtPlot::axisScaleEngine(...) 获得指向默认 scaleEngine 绘图的指针。将`Floating`属性设置为`true`将消除此差距，并使您的数据适合边界。请参阅文档：http: [//qwt.sourceforge.net/class_qwt_scale_engine.html](http://qwt.sourceforge.net/class_qwt_scale_engine.html)

前任：

```
plot.axisScaleEngine(QwtPlot::xBottom)->setAttribute(QwtScaleEngine::Floating,true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T16:25:53.090

设置 QwtScaleEngine::Floating + QwtPlotLayout::setAlignCanvasToScales( true ) 时，画布应与曲线的边界完美对齐。

# java - 通过运行 AsyncTask 处理方向变化

> ID：14685011
> 
> 赞同：8
> 
> 时间：2013-02-04T10:42:47.597
> 
> 标签：java, android, android-activity, android-asynctask

**用例：**

用户启动将加载验证码的应用程序。用户填写验证码并尝试下载一些信息。

**问题：**

如果用户在下载时旋转设备，`Activity`则会被破坏。在执行结束时，AsyncTask 试图更新被破坏`Activity`的对象，**结果**是**“视图未附加到窗口管理器”。**

**“错误”解决方案：**

我可以用 a 掩盖问题，`android:configChanges="orientation|keyboardHidden|screenSize"`但这样布局不会更新为横向。

*我在问什么：*

是否可以更改方向并更改传递给 Context 的“参考” `AsyncTask`？

这个[答案](https://stackoverflow.com/questions/2224676/android-view-not-attached-to-window-manager#6240320)建议检查对话框是否不为空，但这不是我要找的。

[在这里](https://stackoverflow.com/questions/1111980/how-to-handle-screen-orientation-change-when-progress-dialog-and-background-thre#4481297)，他建议使用 Wea​​kReference （[这里](https://stackoverflow.com/questions/4220625/android-context-leaks-in-asynctask#4220746)是关于如何使用它的一个很好的片段），但我不明白它是否是我正在寻找的。

更明确地说，这是我在 onPostExecute 中所做的：

```
@Override
protected void onPostExecute(Auto result) {
    progress.dismiss();
    new DownloaderCaptcha(context).execute("");
    ((EditText)context.findViewById(R.id.editTextCaptcha)).setText("");
    context.findViewById(R.id.progrBar).setVisibility(View.VISIBLE);
    context.findViewById(R.id.captcha).setVisibility(View.INVISIBLE);

    if(result != null) {
        Storage.storeHistory(context, result.getTarga().getValue());

        Intent i = new Intent(context, MenuActivity.class);
        i.putExtra("result", result);
        context.startActivity(i);
    } else {
        ErrorDialog.show(context, error);
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-30T16:52:00.377

以下是我的建议：

*   不要用来**解决**`android:configChanges`这个问题。

*   **也**不要使用`Activity#onRetainNonConfigurationInstance()`它来解决它（因为这种方法已被弃用）。

*   相反，请使用保留的工人`Fragment`。我最近[**发布了一篇文章**](http://www.androiddesignpatterns.com/2013/04/retaining-objects-across-config-changes.html)，描述了如何使用 reserved 处理配置更改`Fragment`。它很好地解决了保持`AsyncTask`跨旋转变化的问题。您基本上需要托管您的`AsyncTask`内部 a `Fragment`，调用`setRetainInstance(true)`，`Fragment`并通过保留`AsyncTask`的.`Activity``Fragment`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:51:49.280

> “错误”解决方案：
> 
> 我可以用 android:configChanges="orientation|keyboardHidden|screenSize" 来掩盖问题，但是这样布局不会更新为横向。

其实会的。

> android:configChanges 列出活动将自行处理的配置更改。当运行时发生配置更改时，默认情况下会关闭并重新启动 Activity，但使用此属性声明配置会阻止 Activity 重新启动。相反，活动保持运行并调用其 onConfigurationChanged() 方法。

看看[http://developer.android.com/guide/topics/manifest/activity-element.html#config](http://developer.android.com/guide/topics/manifest/activity-element.html#config)

您可以实现横向和纵向模式的布局，或者在配置更改时取消 AsyncTask。

# sql - STDDEV 不是可识别的内置函数名称

> ID：14685013
> 
> 赞同：0
> 
> 时间：2013-02-04T10:42:53.373
> 
> 标签：sql

当我尝试在 C# 中执行以下代码时，出现错误`STDDEV is not a recognized built-in function name`

```
select  gender
,       avg(value)
,       stddev(value)
from    YourTable
group by
        gender 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:45:24.223

You probably mean **[stdev](http://msdn.microsoft.com/en-us/library/ms190474.aspx)**, if you're using MS SQL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:45:43.227

You misspelled Standard Deviation function.

Standard Deviation is **STDEV()**

# uiviewcontroller - 使用 Xcode 4.6 在两个视图之间传递数据

> ID：14685014
> 
> 赞同：0
> 
> 时间：2013-02-04T10:43:02.733
> 
> 标签：uiviewcontroller, ios6

我正在学习 Object-C，我正在编写一个测试应用程序来学习。这是一个简单的应用程序，在第一个视图中我按下一个按钮，进入第二个视图（我使用 curl 动画）填充一个文本字段，然后按下一个按钮，在第一个视图中传递字段的内容。

所以我创建了两个视图，在第一个视图中放置了一个按钮和一个标签，并使用鼠标右键单击将按钮从第一个视图链接到第二个视图并拖动一条带有动作模态的线。

在第二个视图中，我编写了以下代码：

ViewController2.h

```
@property (weak, nonatomic) IBOutlet UITextField *firstTextField;
@property (strong, nonatomic) NSString *stringFromVC2;

- (IBAction)passTextToVC2Button:(id)sender; 
```

视图控制器2.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    self.firstTextField.delegate = self;
}

- (IBAction)passTextToVC2Button:(id)sender {
    ViewController *VC2 = [self.storyboard instantiateViewControllerWithIdentifier:@"wb_ViewController"];

    VC2.stringFromTextField1 = self.firstTextField.text;

    [self presentViewController:VC2 animated:YES completion:nil];
} 
```

该应用程序可以工作，但是当我按下 ViewController2 中的按钮并返回 ViewController 时，它不会为 Curl 动画设置动画，只是从页面底部出现一个新窗口（ViewController），位于 ViewController 下，打开卷曲动画。

我也尝试使用：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

代替：

```
[self presentViewController:VC2 animated:YES completion:nil]; 
```

在这种情况下，它会关闭第二个视图，但第一个视图中的标签不会与我在第二个视图中插入的文本一起显示。

正如我所说，我正在学习，所以我是初学者，请耐心等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:51:37.800

这样做的方法是定义一个您的第一个视图控制器符合的委托协议，并且您的第二个视图控制器可以发送一条消息以传回该值。

我不得不多次回答这个问题，所以我创建了一个非常简单的[示例项目](https://bitbucket.org/abizern/delegationexample/)来准确说明我的意思。下载它，看看如何将数据传回控制器堆栈。

**更新**

我已将示例更改为带有 ARC 和 Storyboards 的 iOS6 新项目。

# android - 使用 JsonReader 解析时 JsonArray 或 JsonObject 为空

> ID：14685015
> 
> 赞同：1
> 
> 时间：2013-02-04T10:43:05.143
> 
> 标签：android, json, android-parser, jsonreader

我正在尝试使用 JsonReader 解析 json。在解析时，我遇到了我的应用程序崩溃的 2 个场景。1）。当 JsonArray 包含另一个 JsonArrays 的集合并且其中一个为空时。我给出了一个场景，其中结果是一个数组，其中还有 21 个数组，最后一个数组为空。

```
"results": [(21)
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[...(5)],-
[(0)]
], 
```

2）。当 JsonArray 中有一组对象并且其中一个对象为空时。我已经附上了同样的例子。在这里，我有源作为我的 JsonArray，其中包含 21 个对象，其中 1 个为空。

```
"source": [(21)
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
{...},-
null
] 
```

我可以通过以下方式检查 a 中的某些单个元素何时为空

```
reader.peek()== JsonToken.NULL 
```

Logcat 中的错误输出：

```
02-04 16:10:02.425: E/AndroidRuntime(1203): FATAL EXCEPTION: pool-1-thread-2
02-04 16:10:02.425: E/AndroidRuntime(1203): java.lang.IllegalStateException: Expected BEGIN_OBJECT but was NULL at line 1 column 327992
02-04 16:10:02.425: E/AndroidRuntime(1203):     at com.google.gson.stream.JsonReader.expect(JsonReader.java:339)
02-04 16:10:02.425: E/AndroidRuntime(1203):     at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:322) 
```

我不知道如何检查我要解析的没有名称的数组或对象是否为 Null。

编辑：

代码：

```
public ResultObject parse(){
    try{
        if(reader != null ){
            resultObject    =    new ResultObject();
            reader.beginObject();
            Log.e("123", "inside try ");
            while (reader.hasNext()) {
                String name = reader.nextName();
                if (name.equalsIgnoreCase("id")) {
                    if(reader.peek()== JsonToken.NULL){
                        reader.skipValue();
                        id=    0;
                        Log.e("123", "parse result --------id----------" + id);
                        resultObject.setId(id);
                    }else{
                        id= reader.nextDouble();
                        Log.e("123", "parse result -------id----------" + id);
                        resultObject.setId(id);
                    }
                } else {
                    Log.e("123", "skip value");
                    reader.skipValue();
                }
            }

            reader.endObject();
        }
    }catch(IOException e){ 
        e.printStackTrace();
    }

    return resultObject;
} 
```

调用函数：

```
if (name.equalsIgnoreCase(SOURCE)) {
    if(reader.peek()== JsonToken.NULL){
        reader.skipValue();
    } else {
        resultObjectList = new ArrayList();
        resultObject    =    new ResultObject();
        reader.beginArray();
        while(reader.hasNext()){
            resultObject    =new ResultJsonUtil(reader).parse();
            if(resultObject!=null){
                resultObjectList.add(resultObject);
            }
        }

        reader.endArray();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:43:33.670

`reader.beginObject();`您的代码似乎在 崩溃。由于没有对象，Gson 抛出异常。

如果你不确定，接下来会发生什么，你可以用[`peek`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/stream/JsonReader.html#peek%28%29)

> 返回下一个令牌的类型而不使用它。

然后您可以根据检索到的调用正确的读取器方法[`JsonToken`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/stream/JsonToken.html)

```
if (reader.peek() != JsonToken.BEGIN_OBJECT) {
    // do something
} else {
    // parse object
    resultObject = new ResultObject();
    reader.beginObject();
    ...
} 
```

# hadoop - 蜂巢中的自动增量udf

> ID：14685018
> 
> 赞同：0
> 
> 时间：2013-02-04T10:43:11.897
> 
> 标签：hadoop, user-defined-functions, hive

我在 hive 中创建了一个 udf 以在 hive 中添加自动增量列。

```
import org.apache.hadoop.hive.ql.exec.UDF;

public class AutoIncrUdf extends UDF {
    int Value;

    public int evaluate() {
        Value++;
        return Value;
    }
} 
```

我`temp`在桌子上使用时 创建了一个临时函数

```
Select temp() from table1; 
```

它给出所有行：

```
 1
 1
 1
 1 
```

等等。但我希望它作为

```
1
2
3
4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-24T07:32:50.537

我认为最好在 hive 中使用以下代码进行自动增量 udf：

```
import org.apache.hadoop.hive.ql.exec.UDF;
import org.apache.hadoop.hive.ql.udf.UDFType;

@UDFType(deterministic = false)
public class AutoIncrementUDF extends UDF {

    int ctr ;

    public int evaluate() {
        ctr++;
        return ctr;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T07:03:46.590

它对我有用。

试试下面的：

[http://svn.apache.org/repos/asf/hive/trunk/contrib/src/java/org/apache/hadoop/hive/contrib/udf/UDFRowSequence.java](http://svn.apache.org/repos/asf/hive/trunk/contrib/src/java/org/apache/hadoop/hive/contrib/udf/UDFRowSequence.java)

CREATE TEMPORARY FUNCTION rowSequence AS .UDFRowSequence';

SELECT rowSequence(100) AS id, field1, field2 from 'table' where 'condition';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T00:46:47.287

它应该工作。每次调用都会创建一个 UDF 类的实例。也许尝试`static int Value;`.. GL

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T09:55:47.843

向您的类添加有状态属性：

```
@UDFType(stateful = true)
public class AutoIncrUdf extends UDF {
    ...
} 
```

需要添加注释`@UDFType(stateful = true)`，否则 Hive 列中的计数器值不会增加，它只会为所有行返回值 1，而不是实际的行号。这与您面临的问题相同。

# windows-phone-8 - 如何仅在 windows phone 8 应用程序中通过听筒播放音频

> ID：14685019
> 
> 赞同：5
> 
> 时间：2013-02-04T10:43:20.143
> 
> 标签：windows-phone-8, windows-phone-voip

我已经尝试过使用 AudioRoutingManager 类......但我得到了未授权访问异常。这是我的代码

```
 AudioRoutingManager audioRouting = AudioRoutingManager.GetDefault();
    public AudioRoutingEndpoint ChangeAudioRoute()
    {

       var currentEndPoint= audioRouting.GetAudioEndpoint();
       switch (currentEndPoint)
       {
           case AudioRoutingEndpoint.Earpiece:
           case AudioRoutingEndpoint.Default:
               return AudioRoutingEndpoint.Speakerphone;

           case AudioRoutingEndpoint.Speakerphone:
               return AudioRoutingEndpoint.Earpiece;

               default:
               throw new OperationCanceledException();
       }
    }

    public void SetAudioRoute()
    {
        audioRouting.SetAudioEndpoint(this.ChangeAudioRoute());
    } 
```

![在此处输入图像描述](../Images/c51f7ccff88cb7c9ab09f1dc78024f93.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T22:16:31.460

Windows.Phone.Media.Devices 命名空间中的 API 需要 ID_CAP_AUDIOROUTING 和 ID_CAP_VOIP 功能。（将此添加到您的清单中）

此外，只能在进行 VOIP 通话时更改音频路由。

此外，您需要在后台 VOIP 进程中进行音频路由，而不是在前台进程中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-24T18:40:56.280

老问题，但现在我知道答案了。

你需要做的两件事：

1.  将有问题的音频标记为“通信”

如何执行此操作取决于您使用的 API。它可以像 . 或者您可能必须使用 AudioClientProperties.eCategory = AudioCategory_Communications 的 AudioClientProperties 结构调用 IAudioClient2::SetClientProperties。

2.  将您的应用程序标记为“IP 语音”应用程序或“语音邮件”应用程序您应该将名为 WindowsPhoneReservedAppInfo.xml 的文件添加到您的项目中，其中包含以下内容：

    ```
     <?xml version="1.0" encoding="utf-8"?>
     <WindowsPhoneReservedAppInfo         xmlns="http://schemas.microsoft.com/phone/2013/windowsphonereservedappinfo">
       <SoftwareCapabilities>
         <SoftwareCapability Id="ID_CAP_VOIP" />
       </SoftwareCapabilities>
     </WindowsPhoneReservedAppInfo> 
    ```

在这里寻找更详细的解释：

[从 Windows Phone 8.1 通用应用程序向听筒播放音频](https://web.archive.org/web/20150416092356/http://blogs.msdn.com/b/matthew_van_eerde/archive/2015/03/05/playing-audio-to-the-earpiece-from-a-windows-phone-8-1-universal-app.aspx)

# oracle - 我在 oracle 9i 中编写了这个存储过程，它不正确，我需要正确的语法

> ID：14685020
> 
> 赞同：0
> 
> 时间：2013-02-04T10:43:20.107
> 
> 标签：oracle

在这里我创建了一个存储过程，但它在这里不工作是语法有问题任何人都可以帮助

```
CREATE OR REPLACE PROCEDURE MISSALESVSCOLLECTION

    ( 
        FROMDATE  IN  DATE, 
        TODATE IN DATE 
    ) 
AS 
BEGIN 
SELECT SUM(TBLORDERSTYLE.NQTY * TBLORDERSTYLE.NUNITPRICE/ 1000) AS TOTAL, TBLORDER.NPAYMODE, 
(SELECT SUM(NEXPAMOUNT) FROM TBLEXPLC WHERE DINVDATE BETWEEN  TO_DATE(FROMDATE) AND TO_DATE(TODATE) 
AND  (CEXPLCNO LIKE '%TT%'  OR CEXPLCNO LIKE '%SC%') 
) AS TT, 
(SELECT SUM(NEXPAMOUNT) FROM TBLEXPLC WHERE DINVDATE BETWEEN  TO_DATE(FROMDATE) AND TO_DATE(TODATE) 
AND  (CEXPLCNO NOT LIKE '%TT%'  OR CEXPLCNO NOT LIKE '%SC%' OR CEXPLCNO NOT LIKE '%MR#%') 
) AS LC, 
(SELECT SUM(TBLORDERSTYLE.NQTY * TBLORDERSTYLE.NUNITPRICE/ 1000) FROM TBLORDER 
INNER JOIN  
TBLORDERSTYLE   
ON 
TBLORDER.CORDERNO = TBLORDERSTYLE.CORDERNO  
WHERE TBLORDER.NPAYMODE = '3'  
AND  TBLORDER.CLCNO  LIKE '%MR#%'  
AND TBLORDER.DPICONFIRMDATE BETWEEN  TO_DATE(FROMDATE) AND TO_DATE(TODATE) 
)AS CASH 
FROM TBLORDER 
INNER JOIN  
TBLORDERSTYLE   
ON 
TBLORDER.CORDERNO = TBLORDERSTYLE.CORDERNO AND 
     TBLORDER.NPOSTFLAG = '1' AND  
    TBLORDER.DPICONFIRMDATE BETWEEN   TO_DATE(FROMDATE) AND TO_DATE(TODATE) 
GROUP BY TBLORDER.NPAYMODE 
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:16:38.677

您不能只选择 PL/SQL 中的结果集。你必须用它做点什么。当您有多行时，您需要用 . 将该选择括起来`for a in (your sql)`。即在你的情况下：

```
create or replace procedure missalesvscollection(fromdate in date, todate in date) 
as
begin
  for r_row in (select sum(tblorderstyle.nqty * tblorderstyle.nunitprice / 1000) as total,
         tblorder.npaymode,
         (select sum(nexpamount)
             from tblexplc
            where dinvdate between to_date(fromdate) and to_date(todate)
              and (cexplcno like '%TT%' or cexplcno like '%SC%')) as tt,
         (select sum(nexpamount)
             from tblexplc
            where dinvdate between to_date(fromdate) and to_date(todate)
              and (cexplcno not like '%TT%' or cexplcno not like '%SC%' or
                  cexplcno not like '%MR#%')) as lc,
         (select sum(tblorderstyle.nqty * tblorderstyle.nunitprice / 1000)
             from tblorder
            inner join tblorderstyle
               on tblorder.corderno = tblorderstyle.corderno
            where tblorder.npaymode = '3'
              and tblorder.clcno like '%MR#%'
              and tblorder.dpiconfirmdate between to_date(fromdate) and to_date(todate)) as cash
    from tblorder
   inner join tblorderstyle
      on tblorder.corderno = tblorderstyle.corderno
     and tblorder.npostflag = '1'
     and tblorder.dpiconfirmdate between to_date(fromdate) and to_date(todate)
   group by tblorder.npaymode)
   loop
     -- do something here.
   end loop;
end; 
```

在该循环中，您可以根据需要进行处理。如果您只想打印列，可以使用`DBMS_OUTPUT`如下：

```
dbms_output.put_line('total = ' || r_row.total);
dbms_output.put_line('npaymode= ' || r_row.npaymode); 
```

等等

如果您的想法是只想将该结果集返回给调用者，则可以返回一个 ref 游标。

即类似的东西：

```
create or replace function missalesvscollection(fromdate in date, todate in date) 
return sys_refcursor
as
  v_rc sys_refcursor;
begin
  open v_rc
  for
  select sum(tblorderstyle.nqty * tblorderstyle.nunitprice / 1000) as total,
         tblorder.npaymode,
         (select sum(nexpamount)
             from tblexplc
            where dinvdate between to_date(fromdate) and to_date(todate)
              and (cexplcno like '%TT%' or cexplcno like '%SC%')) as tt,
         (select sum(nexpamount)
             from tblexplc
            where dinvdate between to_date(fromdate) and to_date(todate)
              and (cexplcno not like '%TT%' or cexplcno not like '%SC%' or
                  cexplcno not like '%MR#%')) as lc,
         (select sum(tblorderstyle.nqty * tblorderstyle.nunitprice / 1000)
             from tblorder
            inner join tblorderstyle
               on tblorder.corderno = tblorderstyle.corderno
            where tblorder.npaymode = '3'
              and tblorder.clcno like '%MR#%'
              and tblorder.dpiconfirmdate between to_date(fromdate) and to_date(todate)) as cash
    from tblorder
   inner join tblorderstyle

      on tblorder.corderno = tblorderstyle.corderno
     and tblorder.npostflag = '1'
     and tblorder.dpiconfirmdate between to_date(fromdate) and to_date(todate)
   group by tblorder.npaymode;

  return v_rc;

end; 
```

# python - finding text between two specified words in Python, when one of the two words changes

> ID：14685032
> 
> 赞同：2
> 
> 时间：2013-02-04T10:44:00.443
> 
> 标签：python

Basically, I am trying to extract text between two strings within a loop as one of the two words changes after the information is extracted.

so for example, the string is:

```
string = alpha 111 bravo 222 alpha somethingA end, 333 bravo somethingB end 444 alpha 555 bravo 
```

So I want to extract the text between alpha and end and then bravo and end. I have quite a few of these unique words in my file so I have a list and a counter to go through them. See the code below:

```
string = 'alpha 111 bravo 222 alpha somethingA end, 333 bravo somethingB end 444 alpha 555 bravo'
words = ['alpha', 'bravo'] #there will be more words here
counter = 0
stringOut = ''
#going through the list of words
while counter < len(words):

    firstWord = words[counter]
    lastWord = 'end'
    data = string[string.find(firstWord)+len(firstWord):string.find(lastWord)].strip()
    #this will give the text between the first ocurrance of "alpha" and "end"
    #since I want just the smallest string between "alpha" and "end", I use another    
    #while loop
    #to see if firstWord occurs again

    while firstWord in data:

        ignore,ignore2,data = data.partition(str(firstWord))
        counter = counter + 1 

    stringOut += str(data) + str('\n')
print('output string is \n' + str(stringOut))
#this code gives the correct output for the text between the first word ("alpha") and 
#"end".
#but when the list moves to the next string "bravo", it takes the text between the 
#first "bravo"
#and the "end" that was associated with the information required for "alpha" 
#("somethingA") 
```

Any suggestions appreciated. Many thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:00:13.183

我将您的请求变成了一个方法/函数（迭代器）。我希望这可以帮助你 ：）

```
string = 'alpha 111 bravo 222 alpha somethingA end, 333 bravo somethingB end 444 alpha 555 bravo'
words = ['alpha', 'bravo']

def method(string, words, end_word):
    segments = string.split(end_word)
    counter = 0
    while counter < len(words):
        data = segments[counter].split(words[counter])[-1]
        counter += 1
        yield data.strip()

for r in method(string, words, 'end'):
    print r

>>> 
somethingA
somethingB 
```

注意：如果正在向前解析字符串并且永远不需要回头看，则此解决方案有效。

请注意，如果没有您的进一步输入，我不知道如何限制这一点，但目前，单词的长度必须等于或小于`'end_word'`字符串中的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:55:38.667

只需使用[正则表达式](http://docs.python.org/2/library/re.html)。

```
import re

string = 'alpha 111 bravo 222 alpha somethingA end, 333 bravo somethingB end 444 alpha 555 bravo'
words = ['alpha', 'bravo'] #there will be more words here

for word in words:
    expr = re.compile(r'.*' + word + '(.+?)end');
    out = expr.findall(string)
    print word + " => " + str(out[0]) 
```

输出：

```
>>> 
alpha =>  somethingA 
bravo =>  somethingB 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T08:17:26.027

使用您的新子集：

```
string = 'alpha bravo ... alpha charlie somethingAC end ... ... bravo delta somethingBD end alpha ... bravo ...'
words = ['alpha','bravo','charlie','delta']

def method(string, words, end_word, single=True):
    segments = string.split(end_word)
    for word in words:
        for segment in segments:
            if word in segment:
                data = segment.split(word)[-1]
                yield (word, data.strip())
                if single:
                    break 
```

注意新参数：`single`默认情况下，每个单词只会产生一个结果，但如果你愿意，它会在字符串的每个段中搜索每个单词，因为我不确定你想要什么，你以后可以随时删除它.

```
# each word only once
for r in method(string, words, 'end'):
    print r

>>> 
('alpha', 'charlie somethingAC')
('bravo', '... alpha charlie somethingAC')
('charlie', 'somethingAC')
('delta', 'somethingBD') 
```

和：

```
# each word for each segment
for r in method(string, words, 'end', False):
    print r   

>>>
('alpha', 'charlie somethingAC')
('alpha', '... bravo ...')
('bravo', '... alpha charlie somethingAC')
('bravo', 'delta somethingBD')
('bravo', '...')
('charlie', 'somethingAC')
('delta', 'somethingBD') 
```

作为奖励，我以列表理解的形式包含了这个生成器表达式：

```
def method1(string, words, end_word, single=True):
    return ([(word, segment.split(word)[-1]) for segment in string.split(end_word) if word in segment][:(1 if single else None)] for word in words) 
```

# java - QQWing 在我的 Android 应用程序中生成一个只有零的数独谜题

> ID：14685035
> 
> 赞同：1
> 
> 时间：2013-02-04T10:44:02.210
> 
> 标签：java, android, sudoku, qqwing

我是初学者程序员，我正在尝试使用我在此处找到的现有代码创建自己的数独生成器[http://ostermiller.org/qqwing/QQWing.java.html](http://ostermiller.org/qqwing/QQWing.java.html)我将它放在我的包中的单独文件中。

我不知道该怎么做。我试图用正确的数独数字填满我的棋盘，但它只填零。这是我的代码：

```
QQWing wing = new QQWing();

        try {
            wing.generatePuzzle();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

      // Create the layout
      TableLayout table = new TableLayout(this);

      TableLayout.LayoutParams lp = new TableLayout.LayoutParams(
              ViewGroup.LayoutParams.FILL_PARENT,
              ViewGroup.LayoutParams.FILL_PARENT);

              table.setLayoutParams(lp); // This line has no effect! WHYYYY?!
              table.setStretchAllColumns(true);
              EditText editText[][] = new EditText[9][9];
              for (int i = 0; i < 9; ++i)
              {
              TableRow row = new TableRow(this);
              for (int j = 0; j < 9; ++j)
              {
                  editText[i][j] = new EditText(this);

                    editText[i][j].setText(String.valueOf(wing.puzzle[i*9+j]));
                    editText[i][j].setWidth(50);
                    row.addView(editText[i][j]);
              }
              table.addView(row);
              } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-05T10:59:28.210

这是斯蒂芬·奥斯特米勒，QQWing 的作者。

我很高兴地报告此问题已在 QQWing 版本 1.3.3 中得到修复。Java API 已经改进了不少：

*   `Exception`不再抛出
*   随机数生成器自动初始化
*   已经放在`com.qqwing`包里了

这是`Test.java`使用QQWing的：

```
import com.qqwing.*;

public class Test {
    public static void main(String[] args){
        QQWing qq = new QQWing();
        qq.generatePuzzle();
        System.out.println(qq.getPuzzleString());
    }
} 
```

它可以像这样编译和运行：

```
$ javac -classpath qqwing-1.3.3.jar Test.java && java -classpath .:qqwing-1.3.3.jar Test
 . . 5 | 8 . . | 3 4 .
 . . 6 | . 7 . | . 2 1
 3 . 8 | 2 . . | . . .
-------|-------|-------
 . . . | 4 6 5 | . 1 .
 . . . | . . . | . . .
 . 7 . | 1 3 . | 6 8 .
-------|-------|-------
 . . . | . . . | 1 3 .
 . . 4 | . . . | 2 . .
 . . . | . . . | . 5 6 
```

[可以](http://qqwing.com/download.html) 从[QQWing 网站](http://qqwing.com/)下载最新版本的QQWing 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:19:52.873

这是因为您捕获了所有异常，并且应该避免这种情况。generatePuzzle() 抛出 NPE，因为 Random r 为空，因为源代码写得不好，不能仅通过实例化 QQWing 来使用。

像这样使用它开始：

```
QQWing.r = new Random();
QQWing wing = new QQWing(); 
```

# json - No JSON object could be decoded

> ID：14685040
> 
> 赞同：0
> 
> 时间：2013-02-04T10:44:30.933
> 
> 标签：json, python-2.6

while running this script i am getting the following error...

```
ERROR: getTest failed.  No JSON object could be decoded 
```

My code is:

```
import json
import urllib

class test:

    def getTest(self):
        try:
            url = 'http://www.exapmle.com/id/123456/'
            json_ = urllib.urlopen(url).read()
            self.id = json.loads(json_)
            print self.id
        except Exception, e:
            print "ERROR: getTest failed.  %s" % e
if __name__ == "__main__":
    ti = test()
    ti.getTest() 
```

while opening this url "[http://www.exapmle.com/id/123456/](http://www.exapmle.com/id/123456/)" in browser i am getting json format data, but why it is throwing an error?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:50:02.177

`json_`在调用之前打印`json.loads()`。如果您的 .json 中有错误`url`，`urllib`不一定会引发异常，它可能只是检索一些错误页面（如提供的 url），这是无效的 json。

# javascript - TinyMCE ignoring init options on submitting data

> ID：14685041
> 
> 赞同：1
> 
> 时间：2013-02-04T10:44:48.030
> 
> 标签：javascript, tinymce

got an odd issue here with tinyMCE.

What appears to be happening is that we have one or more instances of tinymce for multiple text areas on the page. For this debugging, we removed all but one instance so it is not getting confused with that and the problem is still persisting.

The problem is that when you load the page, configuration gets loaded correctly and I can see it in the debugger when we check verify_html, it is set to false as expected by the configuration. However when you use "edit html source" button, enter some sample data and click update, some tags get stripped out.

We are using the latest tinymce (3.5.8), I diffed what we use vs the one you can download and it is identical.

What I found so far was that when you initialsie tinymce and it comes to line 1964 (after using a js beautifier for debugging), it does this A = A || {}; So in the initial init, we get the correct options object for A. Where all the configuration parameters that we set are as expected and verify_html is set to false. Which in turn sets valid_elements to allow everything.

```
if (A.verify_html === false) {
            A.valid_elements = "*[*]" 
```

This works fine, however when we enter some html and click update, when we come to this line object A is empty and does not contain any of the options that we set. Which means that some html get parsed out. Has anyone encountered this issue in the past?

I am not very familiar with tinyMCE, so would appreciate some help with this issue, including the stack trace and options configuration, but I am pretty sure it is not related to options as they do not appear to be being picked up at all when it comes to be checking if A exists.

For the stack trace, here is the trace during init:

```
f.html.Schema (tiny_mce.js:1964)
k.create.initContentBody (tiny_mce.js:9863)
k.create.init (tiny_mce.js:9832)
k.create.render (tiny_mce.js:9666)
a.dom.ScriptLoader.loadScripts.d.length (tiny_mce.js:7221)
c.each (tiny_mce.js:110)
a.dom.ScriptLoader.loadScripts.o (tiny_mce.js:7220)
a.dom.ScriptLoader.loadScripts.d.length (tiny_mce.js:7215)
p (tiny_mce.js:7117) 
```

And stack trace during update to the text

```
f.html.Schema (tiny_mce.js:1964)
a.html.Serializer (tiny_mce.js:3358)
u (editor_plugin.js:1)
tinymce.create.objectToImg (editor_plugin.js:1)
tinymce.create.init.n.onPreInit.add.n.serializer.addNodeFilter.v (editor_plugin.js:1)
b.html.DomParser.f.parse (tiny_mce.js:3174)
k.create.setContent (tiny_mce.js:10372)
saveContent (source_editor.js:5)
onsubmit (source_editor.htm:33) 
```

init config:

```
tinyMCE.init({

    mode : "specific_textareas",
    editor_selector : "editorunfiltered",

    dialog_type                       : "modal",

    urlconvertor_callback :         "myURLConvertor",
    setup : function(ed) {
        ed.onPreProcess.add(function(ed, o) {
            if (o.node.nodeName.toLowerCase() == "body")
                o.getInner = true;
        });
    },
    verify_html : false,
    relative_urls : false
}); 
```

Code I am trying to submit into tinymce:

```
<object classid="clsid:D27CDB6E-AAAA-1111-2222-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="391" height="600">
    <param name="movie" value="/imapbuilder/loader.swf" />
    <param name="base" value="/imapbuilder/" />
    <param name="flashvars" value="datasource=ambassadors.xml" />
    <param name="loop" value="false" />
    <param name="menu" value="true" />
    <param name="quality" value="best" />
    <param name="wmode" value="transparent" />
    <param name="bgcolor" value="#ffffff" />
    <param name="allowScriptAccess" value="always" />
    <!--[if !IE]>-->
    <object type="application/x-shockwave-flash" data="/imapbuilder/loader.swf" width="391" height="600">
      <param name="movie" value="/imapbuilder/loader.swf" />
      <param name="base" value="/imapbuilder/" />
      <param name="flashvars" value="datasource=ambassadors.xml" />
      <param name="loop" value="false" />
      <param name="menu" value="true" />
      <param name="quality" value="best" />
      <param name="wmode" value="transparent" />
      <param name="bgcolor" value="#ffffff" />
      <param name="allowScriptAccess" value="always" />
    <!--<![endif]--><!--[if !IE]>-->
    </object>
<!--<![endif]-->
</object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:04:03.110

自版本 3.3 起，该参数`verify_html`不再可用。您将必须使用参数`valid_elements`并`valid_children`定义哪些 html 代码有效，哪些无效。

# ember.js - How to rollback relationship changes in EmberData

> ID：14685046
> 
> 赞同：8
> 
> 时间：2013-02-04T10:45:07.913
> 
> 标签：ember.js, ember-data, relationships

I have two models with parent-child relationship: training and exercise:

```
App.Training = DS.Model.extend({
  exercises: DS.hasMany('App.Exercise')
})

App.Exercise = DS.Model.extend({
  training: DS.belongsTo('App.Training')
}) 
```

I want to have a page where a training with all its related exercises is displayed. If the user presses the `Edit` button, the page becomes editable with the possibility of adding new exercises. I also want to have a `Cancel` button which discards all the changes made.

Here is my controller:

```
App.TrainingsShowController = Em.ObjectController.extend({
  editing: false,

  edit: function() {
    this.set('editing', true);
    transaction = this.get('store').transaction();
    transaction.add(this.get('model'));
    this.get('model.exercises').forEach(function(x){
      transaction.add(x);
    });
  },

  cancel: function() {
    this.set('editing', false);
    this.get('model.transaction').rollback();
  },

  save: function() {
    this.set('editing', false);
    this.get('model.transaction').commit();
  },

  addExercise: function() {
    this.get('model.exercises').createRecord({});
  }
}) 
```

There are four event handlers in the controller:

1.  `edit`: The user pressed the `Edit` button: a transaction is created, the page is put into "Editing" mode.
2.  `cancel`: The user pressed the `Cancel` button: transaction is rolled back and back to "Normal" mode.
3.  `save`: The user pressed the `Save` button: transaction is commited and back to "Normal" mode.
4.  `addExercise`: The user pressed the `Add exercise` button: a new exercise is created (in the same transaction) and added to the trainings.

The rollback functionality works fine except for newly created records: if I push the `Edit` button, add a new exercise and push the `Cancel` button, the newly created exercise stays on the page.

What is the best way to get rid of the discarded child record?

**UPDATE:**

I've created a jsFiddle to reproduce problem, but it worked. Unlike my application here I used `DS.FixtureAdapter`: [http://jsfiddle.net/tothda/LaXLG/13/](http://jsfiddle.net/tothda/LaXLG/13/)

Then I've created an other one using `DS.RESTAdapter` and the problem showed up: [http://jsfiddle.net/tothda/qwZc4/5/](http://jsfiddle.net/tothda/qwZc4/5/)

In the fiddle try: Edit, Add new and then Rollback.

I figured it out, that in case of the RESTAdapter when I add a new child record to a `hasMany` relationship, the parent record won't become dirty. Which seems fine, but when I rollback the transaction, the newly created child record stays in the parent's `ManyArray`.

I still don't know, what's the best way to handle the situation.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-11-28T07:54:45.953

在 Ember Data 中严重缺乏对 hasMany 和 belongsTo 关系的正确脏检查和回滚。它当前的行为方式通常被报告为错误。对于许多开发人员来说，这是一个很大的痛点，这里正在讨论如何解决这个问题：

[https://github.com/emberjs/rfcs/pull/21](https://github.com/emberjs/rfcs/pull/21)

在找到适当的解决方案之前，您可以使用以下方法解决此问题。

首先，您需要重新打开 DS.Model 并对其进行扩展。如果您使用全局变量，您可以将它（例如 DS.Model.reopen({})）放在任何地方，但如果您使用 Ember CLI，最好创建一个初始化程序（例如 ember g 初始化程序模型）：

```
import DS from 'ember-data';

export function initialize(/* container, application */) {

    DS.Model.reopen({

        saveOriginalRelations: function() {

            this.originalRelations = {};
            this.constructor.eachRelationship(function(key, relationship) {

                if (relationship.kind === 'belongsTo')
                    this.originalRelations[key] = this.get(key);

                if (relationship.kind === 'hasMany')
                    this.originalRelations[key] = this.get(key).toArray();

            }, this);
        },

        onLoad: function() {

            this.saveOriginalRelations();

        }.on('didLoad', 'didCreate', 'didUpdate'),

        onReloading: function() {

            if (!this.get('isReloading'))
                this.saveOriginalRelations();

        }.observes('isReloading'),    

        rollback: function() {

            this._super();

            if (!this.originalRelations)
                return;

            Ember.keys(this.originalRelations).forEach(function(key) {

                // careful, as Ember.typeOf for ArrayProxy is 'instance'
                if (Ember.isArray(this.get(key))) {
                    this.get(key).setObjects(this.originalRelations[key]);
                    this.get(key).filterBy('isDirty').invoke('rollback');
                    return;
                }

                if (Ember.typeOf(this.get(key)) === 'instance') {
                    this.set(key, this.originalRelations[key]);
                    return;
                }

            }, this);
        },

        isDeepDirty: function() {
            if (this._super('isDirty'))
                return true;

            if (!this.originalRelations)
                return false;

            return Ember.keys(this.originalRelations).any(function(key) {

                if (Ember.isArray(this.get(key))) {
                    if (this.get(key).anyBy('isDirty'))
                        return true;

                    if (this.get(key).get('length') !== this.originalRelations[key].length)
                        return true;

                    var dirty = false;
                    this.get(key).forEach(function(item, index) {
                        if (item.get('id') !== this.originalRelations[key][index].get('id'))
                            dirty = true;
                    }, this);

                    return dirty;
                }

                return this.get(key).get('isDirty') || this.get(key).get('id') !== this.originalRelations[key].get('id');

            }, this);
        }
    });
};

export default {
    name: 'model',
    initialize: initialize
}; 
```

上面的代码本质上存储了加载或更新时的原始关系，以便以后可以用于回滚和脏检查。

model.rollback() 现在应该回滚所有内容，包括 hasMany 和 belongsTo 关系。不过，我们还没有完全解决“isDirty”检查。为此，我们需要在模型的具体实现中重写 isDirty。之所以需要在这里做而我们不能在 DS.Model 中做一般的事情是因为 DS.Model 不知道要注意哪些属性变化。这是一个使用 Ember CLI 的示例。全局变量也可以使用相同的方法，只是您要将此类分配给 App.Book 之类的东西：

```
import DS from 'ember-data';

var Book = DS.Model.extend({

    publisher: DS.belongsTo('publisher'),

    authors: DS.hasMany('author'),

    isDirty: function() {
        return this.isDeepDirty();
    }.property('currentState', 'publisher', 'authors.[]', 'authors.@each.isDirty').readOnly()

});

export default Book; 
```

对于 isDirty 的依赖参数，请确保包含所有 belongsTo 关系，并为每个 hasMany 关系包含 'array.[]' 和 'array.@each.isDirty'。现在 isDirty 应该按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:44:08.780

这并不漂亮，但您可以通过手动弄脏父记录来强制它回滚：

```
parent.send('becomeDirty');
parent.rollback();
parent.get('children.length'); // => 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T13:58:13.373

@tothda 和其他读者关注。由于`Ember Data : 1.0.0-beta.10+canary.7db210f29a`父级仍然没有设计为在子级回滚时将`parentTraining.isDirty()`值设为*真。*Ember Data*确实*在属性更改时认为父记录是[脏](http://emberjs.com/api/data/classes/DS.Model.html#property_isDirty)的，但在数组发生更改时**不会（**[这允许 save()](https://github.com/emberjs/data/issues/1367#issuecomment-25146425)工作，因此您可以更新服务器上对父属性的任何更改）。`DS.hasMany`

对于提到的情况，您想要对`rollback()`新创建的子项执行 a 的解决方法是用您要丢弃的子记录上的`.rollback()`a替换。`.deleteRecord()`然后 Ember Data 会自动知道将其从`DS.hasMany`数组中删除，您可以轻拍自己的背部以完成回滚！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-15T16:16:34.363

派对迟到了，但我们开始吧：

我创建了一个插件来解决这个问题。只需打电话`rollbackRelationships()`，它就会回滚你所有的关系（**belongsTo** & **hasMany**）。查看 README 以获得更多选项。

[https://www.npmjs.com/package/ember-rollback-relationships](https://www.npmjs.com/package/ember-rollback-relationships)

# c# - 如何最好地处理因 AutoResetEvent.WaitOne() 而处于休眠状态的线程

> ID：14685047
> 
> 赞同：2
> 
> 时间：2013-02-04T10:45:15.140
> 
> 标签：c#, multithreading, dispose, autoresetevent, waitone

我有一个 Windows 服务，它以 5 个线程之一发送电子邮件（这样做是为了提高服务发送电子邮件的速度）：

```
private AutoResetEvent block;
private ThreadedQueue<Message> messageQueue;        

private void DoSend()
{
    try
    {   
        while(!this.disposing)
        {
            this.block.WaitOne();

            Message message = null; 
            if (this.messageQueue.TryDequeue(out message))
            {                       
                this.block.Set();
            }                   

            if(message != null)
            {
                this.Send(message);                 
            }
        }
    }
    catch(Exception ex)
    {
        // Log
    }
} 
```

我有一种`Queue`方法可以将一条或多条新消息添加到 messageQueue 并调用`block.Set()`，以便 5 个线程之一可以发送消息。当允许其中一个线程运行时，只要队列中有消息，`block.Set()`就会调用，以便下一条消息可以出队，并且 5 个线程中的另一个将工作发送它。以此类推，直到队列为空。这一切正常。

但是，当我处理我的对象时，我设置了处理变量，然后为每个线程：

```
if(thread.ThreadState == ThreadState.Running)
{
    thread.Join();
}
else if(thread.ThreadState == ThreadState.WaitSleepJoin)
{
    thread.Abort();
} 
```

大多数情况下，线程由于 s 而处于休眠状态`block.WaitOne`，因此上面的代码中止了线程。但是，这会导致记录线程中止异常。我可以将线程中止异常与其他异常分开捕获并选择不记录，但这似乎不是很干净。

在不导致过多日志记录的情况下清理这些线程的最佳方法是什么？

更新：

我已将以上内容更改为：

```
private ManualResetEvent block;
private ThreadedQueue<Message> messageQueue;        

private void DoSend()
{
    try
    {   
        while(!this.disposing)
        {
            this.block.WaitOne();

            Message message = null; 
            if (!this.messageQueue.TryDequeue(out message) && !this.disposing)
            {                       
                // There's nothing else to send for now to block the sending threads
                // unless we're disposing as we want the other threads to exit too
                this.block.Reset();
            }                   

            if(message != null)
            {
                this.Send(message);                 
            }
        }
    }
    catch(Exception ex)
    {
        // Log
    }
}

public void Dispose()
{           
    this.disposing = true;
    this.block.Set();           
    foreach(Thread thread in this.sendingThreads) {             
        thread.Join();
    }
    this.block.Dispose();
    this.sendingThreads = null;
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:18:51.820

你在玩一个非常危险的游戏。您的代码特别容易出现*死锁*。您将看到线程状态为 ThreadState.Running，并且线程在一微秒后调用 WaitOne()。您的 Join() 调用将死锁并且永远不会返回。

您可以通过释放 AutoResetEvent 来获取在 WaitOne() 调用中被阻止的线程以解除阻止。这将引发一个可预测的异常 ObjectDisposedException，您可以捕获它。使用另一个 ManualResetEvent 来通知线程退出。这样就不需要 Thread.Abort() 了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:50:56.980

请改用 BlockingCollection。它将生成可以理解、管理和调试的简单干净和简短的代码......

一个生产者五个消费者......线程101。

[http://msdn.microsoft.com/en-us/library/dd267312.aspx](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

# vb.net - trying to output more than one filenam into textbox vb.net

> ID：14685056
> 
> 赞同：0
> 
> 时间：2013-02-04T10:45:57.583
> 
> 标签：vb.net, textbox, multiline, opendialog

Apologies if this is really simple but I'm fairly new to programming. I've created a program that uses an open dialog box and outputs the names of the file to a textbox.

Where I'm having issues is trying to get the textbox to display more than one line as all it seems to be doing is writing one line in the textbox.

The code I'm using is below, could someone please advise what I need to change so that I can get this to work.

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click    
    Dim strFileName As String

    OpenFD.Multiselect = True
    OpenFD.InitialDirectory = "\\server\filename\"
    OpenFD.Title = "Open a Text File"
    OpenFD.Filter = "Text Files(.txt)|*.txt"
    Dim DidWork As Integer = OpenFD.ShowDialog()
    strFileName = OpenFD.FileName

    If DidWork = DialogResult.Cancel Then

        MsgBox("Cancel Button Clicked")

    Else

        strFileName = OpenFD.FileName
        TextBox1.Text = strFileName += 1

    End If
End Sub 
```

I've managed to get everything else to work correctly but it's just this one thing.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:00:11.953

```
Dim strFileName() As String

'...

Dim DidWork As Integer = OpenFD.ShowDialog()

If DidWork = DialogResult.Cancel Then
    MsgBox("Cancel Button Clicked")
Else
    strFileName = OpenFD.FileNames
    TextBox1.Multiline = True
    TextBox1.Text = ""

    For Each sFile as String in strFileName
        TextBox1.Text &= sFile & System.Enviroment.NewLine()
    Next
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:49:39.050

将[`TextBox.Multiline`](http://msdn.microsoft.com/en-us/library/12w624ff.aspxSX49sVet2gxtUQ&bvm=bv.41867550,d.bGE)属性设置为`True`

# usb - Communication between a BeagleBoard and an Arduino Pro Mini through an FTDI adapter

> ID：14685057
> 
> 赞同：0
> 
> 时间：2013-02-04T10:46:00.403
> 
> 标签：usb, arduino, beagleboard, ftdi

I'm working on a project in which i have to connect a [BeagleBoard](http://en.wikipedia.org/wiki/BeagleBoard) and an [Arduino Pro Mini](http://arduino.cc/en/Main/ArduinoBoardProMini) for communication.

I tried the *USB-FTDI* way. I have installed all kernel modules, *ftdi-sio* , *usbserial* module, but nothing appear in */dev*. I try it in [Ångström](http://en.wikipedia.org/wiki/%C3%85ngstr%C3%B6m_distribution) and Ubuntu. I wanted to use [I²C](http://en.wikipedia.org/wiki/I%C2%B2C), but I have to know electronics. Since the BeagleBoard's *GPIOS* output is 1.8 V, I need a level converter to communicate with the Arduino.

What do I have to do to make it working?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:38:21.597

对于 I²C，我可以想到两种现成的解决方案。

您可以将 SparkFun 的[PCA9306 电平转换器分线器](https://www.sparkfun.com/products/10403?)用于 I²C。从他们的网页引用：

> PCA9306 是一款双双向 I²C 总线和 SMBus 电压电平转换器，可在 1.0 V 至 3.6 V 的低侧和 1.8 V 至 5.5 V 的高侧工作。只需应用低侧和高侧参考电压分别连接到 VREF1 和 VREF2，连接您的 I/O 并将启用引脚驱动为高电平以打开双向电压转换，而无需使用方向引脚！

![在此处输入图像描述](../Images/9f2b1055d3204bdf933188d372f44d84.png)

* * *

或者您可以使用 SFE[逻辑电平转换器](https://www.sparkfun.com/products/8745)或类似电路，这是一种分立解决方案。对它的工作原理的解释更便宜，更微妙。

* * *

除了 FTDI，您是否能够从主机检测到任何[USB](http://en.wikipedia.org/wiki/Universal_Serial_Bus)从设备（鼠标、键盘等）？如果没有，那么这将是一个开始的地方。

# jquery - setTimeout() and remove() doesn't work as expected

> ID：14685061
> 
> 赞同：3
> 
> 时间：2013-02-04T10:46:07.747
> 
> 标签：jquery

I have this function:

```
function flash(msg) {
  var _id = $('#flash_notice__');
  if( _id.length > 0 ) {
   _id.html(msg); 
  } else {
    $('<div id="flash_notice__">'+ msg +'</div>').appendTo('body');
    //$('body').append('<div id="flash_notice__">'+ msg +'</div>');
  }
  setTimeout(function(){
    _id.fadeOut(500, function(){
      $(this).remove(); //or _id.remove();
    });
  }, 2500);
} 
```

First time (on refresh) the message (msg) remain on page, then when flash() run again, works good. I think, when _id exist .remove() it's working, but when is create the the message it's still on screen. What I'm doing wrong? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:49:30.900

你基本上已经回答了你自己的问题：

> 我认为，当 _id 存在时 .remove() 它正在工作，但是当创建消息时它仍然在屏幕上

如果您查看代码，则该变量`_id`仅在消息已经出现在屏幕上时才存在。在您创建它的情况下，该变量不指向任何内容：

```
var _id = $('#flash_notice__');
...
} else {
  $('<div id="flash_notice__">'+ msg +'</div>').appendTo('body');
} 
```

将您的代码更改为：

```
function flash(msg) {
  var _id = $('#flash_notice__');
  if( _id.length > 0 ) {
   _id.html(msg); 
  } else {
    _id = $('<div id="flash_notice__">'+ msg +'</div>').appendTo('body');
  }
  setTimeout(function(){
    _id.fadeOut(500, function(){
      $(this).remove(); //or _id.remove();
    });
  }, 2500);
} 
```

页面上已有元素的示例：http: [//jsfiddle.net/GyUhB/](http://jsfiddle.net/GyUhB/)
页面上没有元素的示例：http: [//jsfiddle.net/GyUhB/1/](http://jsfiddle.net/GyUhB/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T10:49:59.543

尝试 ：

```
function flash(msg) {
  var _id = $('#flash_notice__');
  if( !_id.length ) {
    _id = $('<div id="flash_notice__">'+ msg +'</div>').appendTo('body');
  } else {
   _id.html(msg).show();
  }
  setTimeout(function(){
    _id.fadeOut(500, function(){
      $(this).hide();
    });
  }, 2500);
} 
```

注意：`.hide()`不是`.remove()`，所以 _flash_notice 可以在下一轮重复使用。否则每次都会创建一个新的 _flash_notice。

# ruby-on-rails - 如何在 en.yml 上格式化带有“th”后缀的日期？

> ID：14685062
> 
> 赞同：3
> 
> 时间：2013-02-04T10:46:13.257
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我想在我的日期中添加“th”、“nd”后缀。这个问题解决了部分问题：[在 Ruby on Rails 中，如何格式化带有“th”后缀的日期，例如“Sun Oct 5th”？](https://stackoverflow.com/questions/165170/in-ruby-on-rails-how-do-i-format-a-date-with-the-th-suffix-as-in-sun-oct-5)

但我需要将它添加到 /config/en.yml 中。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:51:01.903

您可以将字符串传递给语言环境

```
en:
  foo: "it is the %{day} of %{month} today"

I18n.t('foo', day: Date.today.day.ordinalize, month: Date::MONTHNAMES[Date.today.month] ) 
```

# asp.net - css悬停在IE中不起作用

> ID：14685070
> 
> 赞同：-1
> 
> 时间：2013-02-04T10:46:37.200
> 
> 标签：asp.net, html, css, internet-explorer

我有一个文本框。当我将鼠标悬停在它上面时，使用 chrome，它工作正常。但是，似乎没有一个 IE 版本能够识别 hozer 效果。这是我的css文件。

```
.myOnlyTextbox
{
    background-color:White;
}

.myOnlyTextbox:focus
{
    background-color: #FFDFBF;
    font-weight: bold;
}
.myOnlyTextbox:disabled
{
    border-width: 0px;
    background-color: transparent;
    font-size: 14px;
}

.myOnlyTextbox:hover:enabled
{
    background-color: #FFB66C;
} 
```

这是我的主文件

```
<!DOCTYPE xhtml PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server" >

    <title></title>
   <link href="Styles/Site.css" rel="stylesheet" type="text/css" />

    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head> 
```

在子页面中，我使用的是这个标题：

```
asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
    <link href="../Styles/myTextbox.css" rel="stylesheet" type="text/css" />
    </asp:Content> 
```

在body标签中，我定义了这样的文本框。

```
<asp:TextBox ID="txtSearchByBowzerNo" runat="server" ValidationGroup="ByNo" 
                    CssClass="myOnlyTextbox"></asp:TextBox> 
```

如何在几乎所有浏览器中使用这个 css？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:02:45.907

也许尝试不使用多个伪元素：

```
.myOnlyTextbox:hover
{
    background-color: #FFB66C;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:56:44.510

IE < 9 不支持 :enabled 和 :disabled ；所以可能需要后备...尝试使用 selectivizr.js.... Internet Explorer 6-8 中的 CSS3 伪类和属性选择器。只需将脚本包含在您的页面中，剩下的就交给 selectivizr。 [http://selectivizr.com/](http://selectivizr.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:18:57.763

尝试将您的规则更改为以下内容

```
[disabled].myOnlyTextbox, [readonly].myOnlyTextbox
{
    border-width: 0px;
    background-color: transparent;
    font-size: 14px;
}

.myOnlyTextbox:hover
{
    background-color: #FFB66C;
} 
```

# java - 将密码传递给 Runtime.getRuntime().exec

> ID：14685074
> 
> 赞同：1
> 
> 时间：2013-02-04T10:47:00.340
> 
> 标签：java, postgresql, process, runtime.exec, postgresql-8.4

我正在尝试使用 Runtime.getRuntime().exec() 方法实现从 Java 代码重新启动 PostrgeSQL 服务器的功能。如果 PostgreSQL 服务器未启用 SSL，但如果 PostreSQL 服务器启用了 SSL，并且如果私钥使用密码加密，则该方法工作正常，则需要通过 passphase。我尝试使用以下代码来实现相同的功能，

```
 String postgreSQLRestartCMD = 
      "/u/postgreSQL/pg_ctl -D /u/postgreSQL/data restart -w";  
         //-w option waits until the passphase is sent
    final Process restartPosgreSQLServer = Runtime.getRuntime().exec(postgreSQLRestartCMD);
    PrintStream ps = new PrintStream(restartPosgreSQLServer.getOutputStream());
    ps.println("keyPassword"); // sending passphasse here
    new Thread(new Runnable() {
          @Override
               public void run() {
               try {
                    IOUtils.copy(restartPosgreSQLServer.getInputStream(), logWriter);
                   }
               catch (final IOException e) {
                     logWriter.println("Error occurred while reading InputStream.");
                     e.printStackTrace(logWriter);
                   }
            }
     }).start();
     new Thread(new Runnable() {
           @Override
               public void run() {
               try {
                    IOUtils.copy(restartPosgreSQLServer.getErrorStream(), logWriter);
                   }
                   catch (final IOException e) {
                      logWriter.println("Error occurred while reading ErrorStream.");
                      e.printStackTrace(logWriter);
                    }
                }
       }).start();
       int returnStatus = restartPosgreSQLServer.waitFor();
       if (returnStatus == 1) {
             logWriter.println("Error has occured while running PostgreSQL server.");
       } else {
              logWriter.println("PostgreSQL has started successfully.");
       } 
```

但是服务器没有启动。我正在尝试在 Linux 中。在控制台中，它被下面的行击中，我猜 passohase 没有正确发送。

```
 Enter PEM pass phrase: 
```

这哪里出错了，为什么没有发送 passphase？

## 编辑

进一步挖掘后，我发现 Runtime.getRuntime().exec(cmd) 正在创建新进程，我的 ps.println("password") 被传递给父进程。但我不确定，我的观察是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:36:37.980

您没有考虑到的是，在程序要求输入密码之前，它们会**刷新输入缓冲区**。否则，很容易读入额外的密码字符，用户在密码提示之前不小心输入了这些字符。

您必须提高代码的复杂程度才能分析进程的输出并`stdin`仅在实际见证密码提示后打印到它。

# openssl - Keytool 抱怨 X509 证书，即使它是有效的

> ID：14685076
> 
> 赞同：0
> 
> 时间：2013-02-04T10:47:05.187
> 
> 标签：openssl, x509, keytool

**TL；DR：** Keytool 拒绝导入有效期少于 1 天的证书

**长版：**我在使用 keytool 时遇到问题。我正在使用 openssl 创建一个自签名 CA 和 SUBCA 证书链以进行测试，但是稍后将其导入 keytool 时遇到了一些问题。

我正在通过以下方式创建 CA

> openssl rand -out ./private/.rand 1024
> 
> openssl genrsa -out ./private/cakey.pem -aes256 -rand ./private/.rand 2048
> 
> openssl req -days 365 -subj '/C=US/ST=SM/O=Company/OU=Org/CN=ROOT_CA/emailAddress=whatever@whatever.com' -x509 -new -key ./private/cakey.pem -out cacert.pem -config openssl.cnf

然后，我将以与上述完全相同的方式（不同的 CN）创建 SUB_CA 并使用 root ca certfificate 按以下方式对其进行签名

> openssl ca -startdate 120524100000Z -enddate 120524101500Z -in ../sub_ca/subcareq.pem -out ../sub_ca/cacert.pem -extensions v3_ca -config openssl.cnf

（注意上面的证书有效期只有15分钟）

直到这里一切都很好。当我尝试将两者都导入 JKS 时会出现此问题。根证书导入没有问题，但 SUB_CA 给出了以下问题

> keytool -import -trustcacerts -alias subca -file sub_ca/cacert.pem -keystore keystore.jks
> 
> > 输入密钥库密码：
> > 
> > 重新输入新的密码：
> > 
> > keytool 错误：java.lang.Exception：输入不是 X.509 证书

我不明白为什么它一直说它是一个完全有效的证书。如果我更改证书的开始日期和结束日期，而是在签名时给出**1 天**（-days 1）作为有效期，它会毫无问题地导入 jks。

keytool 是否有某种限制，它只能导入有效期超过 24 小时的 X509 或类似的东西？

# firefox - Paypal 沙盒 Firefox 问题

> ID：14685077
> 
> 赞同：2
> 
> 时间：2013-02-04T10:47:08.483
> 
> 标签：firefox, paypal, sandbox

我正在使用沙盒贝宝。在 Mozilla Firefox 中，一旦我完成交易，在被重定向到返回 url 页面之前，浏览器本身会显示一条消息，要求确认弹出窗口以继续进一步。如果我立即单击“继续”按钮，那么一切正常，但是如果我没有执行任何操作或在 10 秒后单击继续按钮，则页面会自动重定向，并且我没有收到任何从 paypal 发布的变量。此类问题在 Chrome 和 IE 中不存在。任何人都可以帮助我消除 Firefox 的这个问题吗？

# javascript - IE 提示 (.js) Javascript 文件下载而不是执行它

> ID：14685079
> 
> 赞同：0
> 
> 时间：2013-02-04T10:47:23.170
> 
> 标签：javascript, windows, internet-explorer, browser

给定一个 URL，例如：http://host:port/app/whatever.js

IE（Internet Explorer）尝试下载whatever.js，而不是在浏览器上呈现（或执行）它。我正在使用 IE8/WinXP

我怎样才能让 IE 渲染（/执行）.js 代替（而不是提示下载）？

（在 FireFox/Chrome 上，what.js 可以正确呈现，但在 IE 中不正确。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:15:55.200

我意识到 IE 表现出的行为是正确的——这是默认行为。如果直接在浏览器栏中输入.js 的URL，IE 会提示下载.js 文件。

但是如果 .js 是通过 HTML <script src="whatever.js"> 标签调用的，那么 JavaScript 就会被执行。

因此，实际上并没有渲染 .js 的情况。

# javascript - Express 500 TypeError：无法读取未定义的属性“get”

> ID：14685081
> 
> 赞同：0
> 
> 时间：2013-02-04T10:47:48.247
> 
> 标签：javascript, node.js, express

此示例取自 Node Cookbook，但使用的是 Express 3.1.0：

**应用程序.js**

```
var express = require('express')
  , routes = require('./routes')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());

  app.use(express.cookieParser('kooBkooCedoN'));
  app.use(express.session());
  app.use(require('./login'));

  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

// --------------------------
// MODIFICATION IS MADE HERE!
// --------------------------
app.configure(function(){
  app.use(function(req, res, next){
    res.locals.user = req.session.user;
    next();
  });
});

app.get('/', routes.index);
app.post('/', routes.index);
app.del('/', routes.index);
app.get('/:page', routes.index);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

我已经按照以下建议对代码进行了一些修改：将 [Express.js 2 迁移到 3，特别是 app.dynamicHelpers() 到 app.locals.use？](https://stackoverflow.com/questions/11580796/migrating-express-js-2-to-3-specifically-app-dynamichelpers-to-app-locals-use)

**登录.js**

```
var users = {'dave' : 'expressrocks'};

module.exports = function (req, res, next) { var method = req.method.toLowerCase(), //cache the method
    user = req.body.user,
    logout = (method === 'delete'),
    login = (method === 'post' && user),
    routes = req.app.routes.routes[method];

  if (!routes) { next(); return; }

  if (login || logout) {
    routes.forEach(function (route) {
      if (!(req.url.match(route.regexp))) {
        console.log(req.url);
        req.method = 'GET';
      }
    }); 
  }
  if (logout) {
    delete req.session.user; 
  }
  if (login) {
    Object.keys(users).forEach(function (name) {
      if (user.name === name && user.pwd === users[name]) {
        req.session.user = {
          name: user.name,
          pwd: user.pwd
        };
      }
    }); 
  }
  if (!req.session.user) { req.url = '/'; } 
  next(); 
}; 
```

**登录.jade**

```
if user
  form(method='post')
    input(name="_method", type="hidden", value="DELETE")
    p Hello #{user.name}!
      a(href='javascript:', onClick='forms[0].submit()') [logout]
else
  p Please log in
  form(method='post')
    fieldset
      legend Login
      p
        label(for="user[name]") Username:
        input(name="user[name]")
      p
        label(for="user[pwd]") Password:
        input(type="password", name="user[pwd]")

      input(type="submit") 
```

~~**来自终端的结果**~~日志

错误来自以下行： **routes = req.app.routes.routes[method];** 在*login.js中*

```
TypeError: Cannot read property 'get' of undefined
    at Object.module.exports [as handle] (/home/chiasyan/Desktop/login/login.js:8:35)
    at next (/home/chiasyan/Desktop/login/node_modules/express/node_modules/connect/lib/proto.js:199:15)
    at store.get.next (/home/chiasyan/Desktop/login/node_modules/express/node_modules/connect/lib/middleware/session.js:309:9)
    at /home/chiasyan/Desktop/login/node_modules/express/node_modules/connect/lib/middleware/session.js:333:9
    at /home/chiasyan/Desktop/login/node_modules/express/node_modules/connect/lib/middleware/session/memory.js:50:9
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

* * *

**更新：** 我改变了**routes = req.app.routes ~~.routes~~ [method];** 但仍然有一个小错误。

在*login.jade*中找不到*用户*变量（*用户在**login.js*中定义一次）

 ***```
ReferenceError: /home/chiasyan/Desktop/login/views/login.jade:1
  > 1| if user
    2|   form(method='post')
    3|     input(name="_method", type="hidden", value="DELETE")
    4|     p Hello #{user.name}!

user is not defined 
```

引自 Node Cookbook

> *在 routes/index.js 中，我们现在可以简单地拥有以下代码：*

**index.js**

```
exports.index = function (req, res) { 
  res.render('index', {title: 'Express'}); 
}; 
```

来自 Node Cookbook 的另一句话

> *由于我们不再使用路由，我们没有机会通过 req.session。用户通过 res.render。但是，我们可以使用动态助手来代替。动态助手可以访问 req 和 res 对象，它们在视图呈现之前被调用。我们传递给动态帮助对象的任何属性都作为局部变量推送到 Jade 视图。*

由于我不能再在 Express 3.* 中使用**动态助手**，所以在*app.js*中我已更改为：

```
app.configure(function(){
  app.use(function(req, res, next){
    res.locals.user = req.session.user;
    next();
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:06:54.413

我现在正在运行代码，但我不确定它是否是正确的方法。请告知是否应该进行任何纠正。

我修改了

```
app.configure(function(){
  app.use(function(req, res, next){
    res.locals.user = req.session.user;
    next();
  });
}); 
```

进入

```
app.use(function(req, res, next){
  res.locals.user = req.session.user;
    next();
}); 
```

并将其放在以下行之后

```
app.use(require('./login')); 
```

* * *

除了 Hector Correa 在这篇文章中给出的答案之外，这里是更正后的完整工作代码。

**应用程序.js**

```
var express = require('express')
  , routes = require('./routes')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());

  app.use(express.cookieParser('kooBkooCedoN'));
  app.use(express.session());
  app.use(require('./login'));

  app.use(function(req, res, next){
    res.locals.user = req.session.user;
    next();
  });

  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);
app.post('/', routes.index);
app.del('/', routes.index);
app.get('/:page', routes.index);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

**登录.js**

```
var users = {'dave' : 'expressrocks'};

module.exports = function (req, res, next) { var method = req.method.toLowerCase(), //cache the method
    user = req.body.user,
    logout = (method === 'delete'),
    login = (method === 'post' && user),
    routes = req.app.routes[method];

  if (!routes) { next(); return; }

  if (login || logout) {
    routes.forEach(function (route) {
      if (!(req.url.match(route.regexp))) {
        console.log(req.url);
        req.method = 'GET';
      }
    }); 
  }
  if (logout) {
    delete req.session.user; 
  }
  if (login) {
    Object.keys(users).forEach(function (name) {
      if (user.name === name && user.pwd === users[name]) {
        req.session.user = {
          name: user.name,
          pwd: user.pwd
        };
      }
    }); 
  }
  if (!req.session.user) { req.url = '/'; } 
  next(); 
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:52:27.993

您提到的行中有错误：

```
routes = req.app.routes.routes[method]; 
```

你应该使用

```
routes = req.app.routes[method]; 
```

顺便说一句，您对这段代码的结果进行检查的目的是什么？

**更新：**为了将用户信息传递给您的 Jade 视图，您需要在渲染调用中传递此信息。例如：

```
# Assuming you've got the user information in req.session.user 
console.log(req.session.user);
res.render('login', {user: req.session.user}); 
```***

# api - xbuf_frurl() 是否支持 HTTP_POST？

> ID：14685083
> 
> 赞同：3
> 
> 时间：2013-02-04T10:47:52.290
> 
> 标签：api, http-post, g-wan

到目前为止，我只看到了将 xbuf_frurl() 与 HTTP_GET 方法一起使用的示例。g-wan中的这个功能是否支持HTTP_POST？如果是这样，我如何传递 POST 数据？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:25:17.330

I think you'll need the curl library for this kind of request (look at [http://gwan.com/developers](http://gwan.com/developers) libraries part)

[http://curl.haxx.se/libcurl/c/](http://curl.haxx.se/libcurl/c/)

and here the g-wan sample

[http://gwan.com/source/curl.c](http://gwan.com/source/curl.c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:52:59.237

提供参数时`xbuf_frurl()`可以使用 G-WAN API 调用：`HTTP_POST``x-www-form-urlencoded`

```
xbuf_frurl(xbuf, "gwan.com", 80, HTTP_POST, "/?form", 1000, "&arg1=123&arg2=456"); 
```

顺便说一句，下一个版本带来了`HTTPS`使用 SSL 的标志：

```
xbuf_frurl(xbuf, "gwan.com", 443, HTTPS | HTTP_POST, "/?form", 1000, "&arg1=123&arg2=456"); 
```

这两个调用都比 libcURL 更简洁，并且以“不那么冗长”的方式（而不是一行代码）执行它似乎不太可能。

希望能帮助到你。

# javascript - jquery选择方法

> ID：14685085
> 
> 赞同：-3
> 
> 时间：2013-02-04T10:48:12.880
> 
> 标签：javascript, jquery

```
 <script>
            $("*", document.body).each(function () {//is document.body a context?
                var parentTag = $(this).parent().get(0).tagName;
                //Above statement is only selecting the body tag why?

                $(this).prepend(document.createTextNode(parentTag + " > "));
            });
    </script>
  </body>
</html> 
```

在上面的脚本中只选择body标签有什么理由吗？document.body也是一个上下文吗？因为document.body没有被引用，它会是一个上下文吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:25:51.997

我希望这些是您正在寻找的答案

```
> Is there any reason for selecting only body tag in the above script? 
```

它不会只选择 Bodytag，如果您在 Chrome 中运行此代码，您将看到标签

```
 $("*" ,document.body).each(function (idx, elem) {
 console.log(elem);
 }); 
```

> document.body 也是一个上下文吗？

是的，这里是[API LINK的一行](http://api.jquery.com/jQuery/#jQuery1)

> 因为 document.body 没有被引用，它会是一个上下文吗？

是的，这里是[API LINK的一行](http://api.jquery.com/jQuery/#jQuery1)

# wpf - 我应该如何在 WPF 中填充 ViewModel？

> ID：14685086
> 
> 赞同：1
> 
> 时间：2013-02-04T10:48:15.360
> 
> 标签：wpf, viewmodel

我是 WPF 的新手，我正在编写一个简单的测试应用程序来熟悉它。我的测试应用程序将检测我连接到计算机的所有操纵杆并显示有关它的信息。到目前为止，我有这个 ViewModel：

```
public class JoystickViewModel
{
    public ObservableCollection<Joystick> Joysticks { get; set; }

    public JoystickViewModel()
    {
        GetAttachedJoysticks();
    }

    private void GetAttachedJoysticks()
    {
        // populate Joysticks collection by using SlimDX
    }
} 
```

这是我的代码隐藏`MainWindow.xaml`：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        DataContext = new JoystickViewModel();
    }
} 
```

我的 XAML 用于`MainWindow`：

```
<Window ...>
    <Grid>
        <ComboBox ItemsSource="{Binding Joysticks}"
                  DisplayMemberPath="Information.ProductName"/>
    </Grid>
</Window> 
```

我遵循了一个教程，该教程也在其构造函数中填充了 ViewModel。

**我的问题是**，我应该如何填充 ViewModel？对我来说，我在 ViewModel 构造函数中填充集合似乎有点奇怪。这个逻辑应该在 MainWindow 的代码隐藏中吗？还是完全在其他地方？最终目标是不仅要填充此集合，还要定期更新以反映当前状态（用户插入新的操纵杆，拔下现有的操纵杆等......）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:52:07.857

后面的 MainWindow 代码绝对不是应该发生“业务”逻辑的地方，因为视图应该尽可能简单。

将获取/更新逻辑保留在视图模型中，这样您就可以轻松独立地对其进行测试。

从学习的角度来看，将关注点分开很重要：

*   View 绑定到 ViewModel，没有智能
*   ViewModel 了解如何获取模型
*   模型代表数据

在您的情况下，VM 知识目前是其构造函数内部的调用。稍后您可以更改它以调用一些 IJoystickDataService 接口，并使用 MVVM 框架连接所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:57:42.627

我会在 Model 类中拥有您的 JoySticks 可观察集合属性（以及填充它的代码）。视图模型只是将相同的属性暴露给视图以进行绑定。vm 应该尽可能薄 - 理想情况下只是公开模型中的属性以进行绑定，而不是执行任何类型的“业务”逻辑（即在您的情况下填充操纵杆信息）。

# c++ - 在 ReactOS 上运行 ELF 二进制文件

> ID：14685092
> 
> 赞同：3
> 
> 时间：2013-02-04T10:48:36.750
> 
> 标签：c++, c, compiler-construction, binaryfiles, react-os

请耐心回答，因为我对这一切都不熟悉，并且希望我的基础知识 100% 正确。我是一名机械工程师，所以不要苛刻。我正在学习一些非常基本的低级内容，并且有兴趣了解与编译器后端相关的概念。C/C++ 编译器输出可能是专门为计算机体系结构量身定制的机器代码。这也意味着如果两者都运行在相同的硬件上，例如 i7 处理器，它在 Windows 和 Linux 中应该是相同的。但是二进制格式的形式还有另一层区别。也就是说，我们在 Linux 上有 ELF（[Executable and Linkable Format](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)），在 Windows 上有 PE/COFF（[Portable Executable](http://en.wikipedia.org/wiki/Portable_Executable)）。

因此，我觉得 Linux 和 Windows 上的编译器的后端工作方式不同，并以 ELF 或 PE/COFF 格式发出二进制文件。

[ReactOS](http://www.reactos.org/en/index.html)是 Windows 的克隆，并且在一定程度上与 Windows 二进制兼容。

**理论上是否有可能在 ReactOS 中拥有一个能够理解 ELF 并正确加载它的 LOADER？**

我知道我们需要有一层将 Linux API 映射到 ReactOS API 的软件。如果存在这样的映射层，我的问题有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:22:36.600

装载机是不够的。

操作系统有自己的系统调用接口。我对Linux和Windows二进制API了解不多，上次我直接使用系统调用是MS-DOS。

在 MS-DOS 中，可以通过将函数代码加载到 AH 寄存器来调用 DOS 函数，然后调用 INT 21H。寄存器 AL 通常用作子功能或主要参数。例如，我可以回忆起如何退出程序：

```
 MOV AX,4C01H   ; funciton AH = $4C (exit), error code is AH = 1
    INT 21H
; program gets never here 
```

因此，其他操作系统提供其他时尚界面。例如，AmigaDOS 的 exec.library 的地址位于绝对地址 4（是的，$00000004），并且可以通过位于库“基”地址（-4、-8 等）的负偏移量的跳转表来访问库函数。其他库的指针可以通过使用 open 函数从 exec.library 中查询。

好的，MS-DOS 和 AmigaDOS 在不同的体系结构上运行，但它是操作系统调用可能不同的一个很好的例子。软件中断与第一个库提供的库地址。

有时，差异是一种运气。当不同的操作系统调用不干扰时，可以编写一个*wrapper*，它接收外来操作系统调用，并将它们转换为宿主操作系统。如果操作系统 API 仅在系统调用的参数顺序上有所不同，那将是完美的——但情况会更加困难。更简单的函数可以映射到其他操作系统的风格，但更复杂的函数 - 带有回调！- 更难。包装器不仅可以模拟功能，还可以模拟操作系统的错误。

无论如何，这个类型有一些好东西。

~~一个很好的例子是[CygWin](http://www.cygwin.com/)，它可以让你在 Win32 下运行 Linux 程序。当我最后一次使用它时，运行任何命令行东西都没有问题，即使使用线程、网络等。~~编辑：它需要重新编译和库，正如@fortran 所说。

对于 Linux，[WINE](http://www.winehq.org/)非常适合运行 Win32 应用程序。甚至还有使用 WINE 的商业软件的官方 Linux 版本！如果您的程序没有使用最新的 Windows API 调用，WINE 应该可以工作。

由于 Linux 和 BSD 都是与 POSIX 兼容的操作系统，因此存在像BSD 的[Linux 兼容层](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/linuxemu.html)这样的东西也就不足为奇了。

# c# - LINQ 上下文刷新错误

> ID：14685093
> 
> 赞同：0
> 
> 时间：2013-02-04T10:48:39.963
> 
> 标签：c#, linq-to-sql, sql-server-2012-express

我有 LINQ to SQL 类和一个`DataGrid`控件。我将 设置`DataSource`为`DataGrid`，`context.Users`然后使用`context.Users.InsertOnSubmit()`. 但是，`DataGrid`即使在显式调用之后，也不会刷新自身`Refresh()`。唯一的解决方案是重新创建上下文。

我使用过 LINQ to SQL，从未遇到过这个问题。现在我有**SQL server express 2012 和 VS 2012**，我曾经使用过 2010。这是一个已知的错误吗？

```
 DataClasses1DataContext context = new DataClasses1DataContext();

    public Form1()
    {
        InitializeComponent();
        dataGridView1.DataSource = context.Uzivatels;
    }

    private void button1_Click(object sender, EventArgs e)
    {

        context.Uzivatels.InsertOnSubmit(new Uzivatel() { Jmeno = "fdasfsa", Prijmeni = "fdfwe", Pohlavi = "m", Mesto_ID = 1 });
        context.SubmitChanges();

        dataGridView1.Refresh();
        // after this it will add row to database but not to dataGridView

    } 
```

# jquery - Ipad方向改变导致jquery触发多个功能

> ID：14685095
> 
> 赞同：0
> 
> 时间：2013-02-04T10:48:47.697
> 
> 标签：jquery, ipad, orientation

我正在一个网站上工作，我们正在尝试针对 ipad 的使用进行优化。当您将 ipad 的方向更改为横向时，网站的部分应隐藏以使其更易于阅读。一切正常，但是当您从纵向更改为横向并再次返回时，它似乎将先前的 jquery 函数“排队”并一个接一个地运行它们。

因此，如果您从 0 度更改为 90 度，它会触发 90 度功能。从 90 更改为 180 然后它会触发 90 和 180 功能。从 180 更改为 -90 并触发 90、180 和 -90 函数。

有谁知道它为什么这样做以及如何阻止它？

-Edit- 排队的功能是点击事件。这导致，当单击按钮时，目标 div 的高度像手风琴一样迅速增加和减少！

下面的代码：

```
jQuery(window).bind('orientationchange', function(e) {

          if(Math.abs(window.orientation) == 0){
              $('#slider').animate({height:'375px'});$('#top').animate({height:'445px'});$('#strap').animate({top:'445px'}, false);

              $("a.more-button").click(function(){
                  $('#slider').css({'height':'375px'});$('#top').css({'height':'445px'});$('#strap').css({'top':'445px'});
                  console.log('it fired 0');    
              });
              return false;
          }

          if(Math.abs(window.orientation) == 90){
            $("a.more-button").click(function(){
              $('#slider').animate({height:'0px'}); $('#top').animate({height:'130px'}); $('#strap').animate({top:'130px'}, false);
              console.log('it fired 90');   
            });

          $("#next-page").on("click", function(){
              $('#slider').animate({height:'375px'}); $('#top').animate({height:'445px'}); $('#strap').animate({top:'445px'}, false);
          });
          $("#prev-page").on("click", function(){
              $('#slider').animate({height:'375px'}); $('#top').animate({height:'445px'}); $('#strap').animate({top:'445px'}, false);
          });
          $(".menu-link").on("click", function(){
              $('#slider').animate({height:'375px'}); $('#top').animate({height:'445px'}); $('#strap').animate({top:'445px'}, false);
          });
          return false;
          }

          if(Math.abs(window.orientation) == -90){
              $("a.more-button").click(function(){
                  $('#slider').animate({height:'0px'}); $('#top').animate({height:'130px'}); $('#strap').animate({top:'130px'}, false);
                  console.log('it fired -90');  
              });

          $("#next-page").on("click", function(){
              $('#slider').animate({height:'375px'}); $('#top').animate({height:'445px'}); $('#strap').animate({top:'445px'}, false);
          });
          $("#prev-page").on("click", function(){
              $('#slider').animate({height:'375px'}); $('#top').animate({height:'445px'}); $('#strap').animate({top:'445px'}, false);
          });
          $(".menu-link").on("click", function(){
              $('#slider').animate({height:'375px'}); $('#top').animate({height:'445px'}); $('#strap').animate({top:'445px'}, false);
          });
          return false;
        }

          if(Math.abs(window.orientation) == 180){
              $('#slider').animate({height:'375px'});$('#top').animate({height:'445px'});$('#strap').animate({top:'445px'}, false);
              $("a.more-button").click(function(){
                  $('#slider').css({'height':'375px'});$('#top').css({'height':'445px'});$('#strap').css({'top':'445px'});
                  console.log('it fired 180');      
              });
              return false;
          }

  }, false); 
```

-编辑-解决方案！按照西蒙的建议，我用他的代码和另一个用户的混合代码解决了这个问题（谁没有留下他们的名字，所以我不能相信）。

```
$(window).bind("resize", function(){
    screenOrientation = ($(window).width() > $(window).height())? 90 : 0;

    $("a.more-button, #next-page, #prev-page, .menu-link").off(".MyClickEvents");

    if (screenOrientation === 90) {
        $("a.more-button").on("click.MyClickEvents", function () {
            $('#slider').animate({ height: '0px' }); $('#top').animate({ height: '130px' }); $('#strap').animate({ top: '130px' }, false);
            console.log('it fired 90');
        });

        $("#next-page").on("click.MyClickEvents", function () {
            $('#slider').animate({ height: '375px' }); $('#top').animate({ height: '445px' }); $('#strap').animate({ top: '445px' }, false);
        });
        $("#prev-page").on("click.MyClickEvents", function () {
            $('#slider').animate({ height: '375px' }); $('#top').animate({ height: '445px' }); $('#strap').animate({ top: '445px' }, false);
        });
        $(".menu-link").on("click.MyClickEvents", function () {
            $('#slider').animate({ height: '375px' }); $('#top').animate({ height: '445px' }); $('#strap').animate({ top: '445px' }, false);
        });
    } else {
      $('#slider').animate({ height: '375px' }); $('#top').animate({ height: '445px' }); $('#strap').animate({ top: '445px' }, false);
        console.log('portrait');
      $("a.more-button").on("click.MyClickEvents", function () {
          $('#slider').css({ 'height': '375px' }); $('#top').css({ 'height': '445px' }); $('#strap').css({ 'top': '445px' });
          console.log('it fired 0');
      });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:36:39.243

您正在绑定您的 click 事件处理程序，`orientationchange`以便它们排队。尝试将您的事件放在命名空间中，并`orientationchange`在重新绑定之前取消绑定此命名空间中的所有事件。她举个简单的例子：

```
// assume these are the events bound to different some buttons
$('#foo').on('click.myNS', ...);
$('#bar').on('keyup.myNS', ...);
$('#baz').on('dblclick.myNS', ...);    

// magic occurs here...
$('#foo, #bar, #baz').off('.myNS');

// ...and afterwards, the three binds from above are gone 
```

因此，在您的情况下，它将是：

```
jQuery(window).bind('orientationchange', function (e) {

    // First of all, we need to unbind previous events
    $("a.more-button, #next-page, #prev-page, .menu-link").off(".MyClickEvents");

    if (Math.abs(window.orientation) == 0) {
        $('#slider').animate({ height: '375px' }); $('#top').animate({ height: '445px' }); $('#strap').animate({ top: '445px' }, false);

        $("a.more-button").on("click.MyClickEvents", function () {
            $('#slider').css({ 'height': '375px' }); $('#top').css({ 'height': '445px' }); $('#strap').css({ 'top': '445px' });
            console.log('it fired 0');
        });
        return false;
    }

    if (Math.abs(window.orientation) == 90) {
        $("a.more-button").on("click.MyClickEvents", function () {
            $('#slider').animate({ height: '0px' }); $('#top').animate({ height: '130px' }); $('#strap').animate({ top: '130px' }, false);
            console.log('it fired 90');
        });

        $("#next-page").on("click.MyClickEvents", function () {
            $('#slider').animate({ height: '375px' }); $('#top').animate({ height: '445px' }); $('#strap').animate({ top: '445px' }, false);
        });
        $("#prev-page").on("click.MyClickEvents", function () {
            $('#slider').animate({ height: '375px' }); $('#top').animate({ height: '445px' }); $('#strap').animate({ top: '445px' }, false);
        });
        $(".menu-link").on("click.MyClickEvents", function () {
            $('#slider').animate({ height: '375px' }); $('#top').animate({ height: '445px' }); $('#strap').animate({ top: '445px' }, false);
        });
        return false;
    }

    if (Math.abs(window.orientation) == -90) {
        $("a.more-button").on("click.MyClickEvents", function () {
            $('#slider').animate({ height: '0px' }); $('#top').animate({ height: '130px' }); $('#strap').animate({ top: '130px' }, false);
            console.log('it fired -90');
        });

        $("#next-page").on("click.MyClickEvents", function () {
            $('#slider').animate({ height: '375px' }); $('#top').animate({ height: '445px' }); $('#strap').animate({ top: '445px' }, false);
        });
        $("#prev-page").on("click.MyClickEvents", function () {
            $('#slider').animate({ height: '375px' }); $('#top').animate({ height: '445px' }); $('#strap').animate({ top: '445px' }, false);
        });
        $(".menu-link").on("click.MyClickEvents", function () {
            $('#slider').animate({ height: '375px' }); $('#top').animate({ height: '445px' }); $('#strap').animate({ top: '445px' }, false);
        });
        return false;
    }

    if (Math.abs(window.orientation) == 180) {
        $('#slider').animate({ height: '375px' }); $('#top').animate({ height: '445px' }); $('#strap').animate({ top: '445px' }, false);
        $("a.more-button").on("click.MyClickEvents", function () {
            $('#slider').css({ 'height': '375px' }); $('#top').css({ 'height': '445px' }); $('#strap').css({ 'top': '445px' });
            console.log('it fired 180');
        });
        return false;
    }

}, false); 
```

# c# - 删除 cloudblockblob 及其所有子目录

> ID：14685099
> 
> 赞同：0
> 
> 时间：2013-02-04T10:49:12.053
> 
> 标签：c#, winforms, azure

我在一个项目中需要删除 Azure 存储中的 cloudblockblob 的功能。我已经有了我的 cloudblockblob，但我不知道如何删除 cloudblockblob 及其所有子目录和 blob。

这是我尝试过的：

```
blockBlob.DeleteIfExists(); 
```

但我不认为它有效...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:21:17.560

嗯，它已修复，我必须遍历子目录中的所有项目，然后删除子目录本身.. 解决了！感谢您查看此问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:13:02.647

您可以遍历所有子容器并删除它们，这将删除所有作为 blob 的子容器，而不是容器的子容器。

# c++ - 构造函数中的模板冲突

> ID：14685101
> 
> 赞同：2
> 
> 时间：2013-02-04T10:49:16.713
> 
> 标签：c++, templates, c++11

我有一个定义如下的结构：

```
struct A : public B, public C
{
    A(const B& b) : B(b), C()
    {}

    template<typename... Args>
    A(Args&&... args) : B(), C(std::forward<Args>(args)...)
    {}
};

int main()
{
   B b;

   A sample1(b);
   A sample2(3); // For example, B has a B(int) constructor.
} 
```

这不能正常工作，因为`A(b)`尝试使用第二个构造函数（非常量引用是首选选项，第一个构造函数是常量引用），但`B`没有任何`B(A&)`.

此外，我想`move`为 B 添加一个构造函数：

```
struct A : public B, public C
{
    A(const B& b) : B(b), C()
    {}

    A(B&& b) : B(std::move(b)), C()
    {}

    template<typename... Args>
    A(Args&&... args) : B(), C(std::forward<Args>(args)...)
    {}
}; 
```

现在，最后一步是融合前两个构造函数：

```
struct A : public B, public C
{
   template<typename fw_B>
   A(fw_B&& b) : B(std::forward<fw_B>(b)), C()
   {}

   template<typename... Args>
   A(Args&&... args) : B(), C(std::forward<Args>(args)...)
   {}
 }; 
```

问题：如果第一个版本导致冲突，那么最后一个版本（我的最终目的）很明显它也不起作用。我怎样才能实现这个目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:16:15.243

如果参数的类型可转换为，则可能的解决方案是仅[`std::enable_if`](http://en.cppreference.com/w/cpp/types/enable_if)包含[`std::is_convertible`](http://en.cppreference.com/w/cpp/types/is_convertible)第一个构造函数：`b``B`

```
template <
  class fw_B,
  class = typename std::enable_if<std::is_convertible<fw_B, B>::value, T>::type>
A(fw_B&& b) 
```

例如：

```
#include <iostream>
#include <type_traits>

struct B
{
    B() {}
    B(int) {}
};

struct C {};

struct A : B, C
{
    template <
      class T,
      class = typename std::enable_if<std::is_convertible<T, B>::value, T>::type> 
    A(T&& t) { std::cout << "A(T&&)\n"; }

    template <class... TArgs>
    A(TArgs&&... targs) { std::cout << "A(TArgs&&)\n"; }
};

int main()
{
    B b;

    A a1(b);
    A a2(4);
    A a3("hello");

    return 0;
} 
```

输出：

```
在＆＆）
在＆＆）
A(Targs&&)

```

[请参阅http://ideone.com/xJEjic](http://ideone.com/xJEjic)上的演示。

# android - 想法，安卓。通过id获取资源

> ID：14685104
> 
> 赞同：2
> 
> 时间：2013-02-04T10:49:23.160
> 
> 标签：android, intellij-idea

我开始使用 IntelliJ IDEA 进行 Android 开发。我在某些语言环境中收到以下异常：

```
02-04 12:13:38.518: ERROR/AndroidRuntime(1577): FATAL EXCEPTION: main
    android.content.res.Resources$NotFoundException: String resource ID #0x7f090132 
```

在 Eclipse 中，我可以查看 gen/R.java 并找到有关资源的假设。但在 IDEA 12 gen/R.java 文件中是空的。

是否可以使用 IDEA 通过 ID #0x7f090132 找到资源名称？

谢谢。

# java - 反射 IllegalArgumentException

> ID：14685105
> 
> 赞同：3
> 
> 时间：2013-02-04T10:49:28.323
> 
> 标签：java, reflection

我需要从一个类中获取私有字段并将它们设置为另一个类。

此代码非常适用于测试整数字段（写入 100500 值）：

```
//get objects, class firs...

for(int i =0; i<fields1.length; i++) {
    Field field1 = fields1 [i];
    Field field = fields [i];
    field.setAccessible(true);
    field.set(app,  new Integer(100500));       
} 
```

尽管如此，当我切换到未定义类型时（字段是不同类型的：日期、整数、字符串......

例如，第一类有日期，第二类有日期，我需要从另一个值复制一个值，但下一个字段在两个类中都是字符串）

```
for(int i =0; i<fields1.length; i++) {
    Field field1 = fields1 [i];
    Field field = fields [i];
    field.setAccessible(true);
    field.set(app,  field1);        
} 
```

我收到一个 IllegalArgumentException，例如，我无法从一个类中获取值并将其设置到另一个类中。

亲爱的社区，请给我一个提示 - 我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:59:30.430

对我来说，看起来你交出了字段引用而不是字段值：

```
for(int i =0; i<fields1.length; i++) {
        Field field1 = fields1 [i];
        Field field = fields [i];
        field.setAccessible(true);
        field.set(app,  field1.get(app1)); //or whatever object field1 is from        
        } 
```

虽然我不会那样做，因为订单是一件脆弱的事情......你可以使用[beanutils](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/BeanUtils.html#copyProperties%28java.lang.Object,%20java.lang.Object%29)来复制你的豆子，如果是的话，你想要实现什么

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:01:03.700

这应该适合您的需求：

```
public static <T> void copyDeclaredFields(T from, T to) throws Exception {
    Class<?> clazz = from.getClass();
    if (!clazz.equals(to.getClass())) {
        throw new IllegalArgumentException();
    }
    for (Field field : clazz.getDeclaredFields()) {
        Object value = field.get(from);
        field.set(to, value);
    }
} 
```

致电：

```
Item item1 = new Item();
// item1.set...
Item item2 = new Item();
copyDeclaredFields(item1, item2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T12:56:52.923

您的错误似乎与您尝试将*Field1*设置为 Field 的参数，而不是 Field1 的*值*有关。

```
field.set(app,  field1); 
```

应该改为

```
field.set(app,  field1.get(app1)); 
```

看[一个小的工作示例](https://ideone.com/IUS35Z)；

如果你改变

```
fieldDest.set(destination, fieldSrc.get(source)); 
```

至

```
fieldDest.set(destination, fieldSrc); 
```

你会得到这个问题的相同错误。

希望有帮助。

示例代码：

```
import java.util.*;
import java.lang.*;
import java.lang.reflect.*;

class Main
{

        public static void main (String[] args) throws java.lang.Exception
        {
            Source source = new Source();
        Destination destination = new Destination();

        Class sourceClassObject = source.getClass();
        Class destClassObject = destination.getClass();
        Field[] sourceFields = sourceClassObject.getDeclaredFields();
        Field[] destFields = destClassObject.getDeclaredFields();

        for (Field fieldSrc : sourceFields) {
            int mod = fieldSrc.getModifiers();  // get modifiers
            System.out.print("Source Field: " + Modifier.toString(mod) + " "
              + fieldSrc.getType() + " " + fieldSrc.getName());
            fieldSrc.setAccessible(true);
            System.out.println(" [" + fieldSrc.get(source) + "]");
            for (Field fieldDest : destFields){
                if (fieldDest.getType().equals(fieldSrc.getType()) && 
                    fieldDest.getName().equals(fieldSrc.getName())){
                    fieldDest.setAccessible(true);
                    fieldDest.set(destination, fieldSrc.get(source));
                }                
            }
        }

        destination.printValues();
    }

    static class Source{        

        public Source(){
            strField = "This is a String";
            intField = 42;
            dateField = new Date();
        }

        private String  strField;
        private Integer intField;
        private Date    dateField;
    }

    static class Destination{        
        private String  strField;
        private Integer intField;
        private Date    dateField;

        public void printValues(){
            System.out.println("Destination Field values: ");
            System.out.println("strField: " + strField);
            System.out.println("intField: " + intField);
            System.out.println("dateField: " + dateField);
        }
    }    
} 
```

# java - 如何将 JSP 变量值传递给这个 Struts 标记

> ID：14685106
> 
> 赞同：2
> 
> 时间：2013-02-04T10:49:28.667
> 
> 标签：java, jsp, struts2, struts, struts2-jquery

我想将 JSP 变量值设置为 struts 标签`<s:set var="" value="">`，在下面的代码中我必须设置`carbo`变量的值`<s:set name="c" value=" "/>`而不是常量值。

我怎样才能做到这一点？

```
<%! String carbo=""; %>

<%
String dish_name=(String)session.getAttribute("d");
String calories_qty=(String)session.getAttribute("a");

try {
    Class.forName("com.mysql.jdbc.Driver").newInstance();  
    Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/medical","root","root");  
    //Connection conn=dbConn.getConnection();
    Statement stmt = conn.createStatement();  
    System.out.println("jsp dish_name="+dish_name);
    System.out.println("jsp dish_name="+calories_qty);
    ResultSet rs = stmt.executeQuery("Select * from calories c,dishdetail d where  c.dishdetail_Id=d.id and d.dishName='"+dish_name+"' AND d.size='"+calories_qty+"' "); 

    while(rs.next()){
        carbo=rs.getString("carbo");
        //carbo=Float.parseFloat(rs.getString("carbo"));
    } 
    System.out.println("jsp carbo:"+carbo);
}
catch(Exception e){
    System.out.println("error:"+e);
}

%>

<s:set name="c" value="45" />

<p> carbo: <s:property  value="#c" /></p>

<sj:progressbar  cssStyle="width:20%; height:10px;" value="%{c}"  onCompleteTopics="reloadfifthlist" onChangeTopics="mychangetopic"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:18:29.700

我希望我能很好地理解你想要达到的目标，但我会同意

```
<s:set name="c" value="<%= carbo %>"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T20:11:32.050

最简单的方法

```
<s:set var="c"><%=carbo%></s:set>
<s:property value="#c" /> 
```

但是，与其在小脚本中编写应用程序逻辑，不如在动作中进行，您可以将这些变量直接放在动作类中。该动作可以将调度结果返回给 JSP。然后在为属性创建 getter 和 setter 之后，您可以使用 OGNL 表达式来引用操作属性。例如

```
@Action(value="name", results={
@Result(location = "/path/to/page.jsp")
})
class MyAction extends ActionSupport {
private String carbo;
//getters  and setters here

public String execute(){
  //your logic here

  return SUCCESS;
}

} 
```

那么你只需要引用这个动作属性

```
<s:property value="%{carbo}" /> 
```

# iphone - 如何将 UIScrollview 缩放到固定点？

> ID：14685111
> 
> 赞同：4
> 
> 时间：2013-02-04T10:49:34.467
> 
> 标签：iphone, ios, ipad, cocoa-touch, uikit

我正在创建一个用于显示时间线的控件。最初，它应该显示年份。当放大并`zoomScale`达到特定值时，它将显示各个月份的值，并且在下一个缩放级别中，它应该显示各个天的实际值。

我已经创建了一个`scrollview`并将`layers`（用于显示月/年值）添加到此。覆盖捏手势后，我可以进行缩放（*正常 UIScrollview 缩放*）。但我需要将其缩放到特定点。即，假设我正在缩放一月，我需要将其保持在相同的位置（*以创建像在一月内部移动的效果*）。有什么建议可以实现这一目标吗？

我的方法正确吗？否则请帮助我开始这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:50:23.117

根据您的要求使用以下方法，

```
- (void)zoomToRect:(CGRect)rect animated:(BOOL)animated 
```

只需使用您选择的框架或点调用上述方法，例如如果选择一月然后只需获取一月按钮或视图的点（位置），然后使用该框架调用上述方法。

有关更多信息，请参阅此链接[UIScrollView_Class](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

我希望这对你有帮助......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:53:22.310

这是它的样子：

```
@implementation UIScrollView (ZoomToPoint)

- (void)zoomToPoint:(CGPoint)zoomPoint withScale: (CGFloat)scale animated: (BOOL)animated
{
    //Normalize current content size back to content scale of 1.0f
    CGSize contentSize;
    contentSize.width = (self.contentSize.width / self.zoomScale);
    contentSize.height = (self.contentSize.height / self.zoomScale);

    //translate the zoom point to relative to the content rect
    zoomPoint.x = (zoomPoint.x / self.bounds.size.width) * contentSize.width;
    zoomPoint.y = (zoomPoint.y / self.bounds.size.height) * contentSize.height;

    //derive the size of the region to zoom to
    CGSize zoomSize;
    zoomSize.width = self.bounds.size.width / scale;
    zoomSize.height = self.bounds.size.height / scale;

    //offset the zoom rect so the actual zoom point is in the middle of the rectangle
    CGRect zoomRect;
    zoomRect.origin.x = zoomPoint.x - zoomSize.width / 2.0f;
    zoomRect.origin.y = zoomPoint.y - zoomSize.height / 2.0f;
    zoomRect.size.width = zoomSize.width;
    zoomRect.size.height = zoomSize.height;

    //apply the resize
    [self zoomToRect: zoomRect animated: animated];
}

@end 
```

看着它，应该很容易弄清楚它是如何工作的。如果您发现它有任何问题，请在评论中告诉我。
谢谢 ：）

来源：[http ://www.tim-oliver.com/2012/01/14/zooming-to-a-point-in-uiscrollview/](http://www.tim-oliver.com/2012/01/14/zooming-to-a-point-in-uiscrollview/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-10T09:47:28.647

我有同样的问题，
我有一张世界地图图像，我想将地图缩放到某个位置，印度
这就是我修复它的方法。
我在 CGRect(X,Y) [CGRect(500,300)]
和 DidLoad 中的以下代码方面发现了印度的位置

```
 [self.scrollViewForMap setZoomScale:2.0 animated:YES]; //for zooming
    _scrollViewForMap.contentOffset = CGPointMake(500,300); //for location 
```

这解决了我的问题。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-18T07:58:19.133

```
- (void)pinchDetected:(UIPinchGestureRecognizer *)gestureRecognizer {

if([gestureRecognizer state] == UIGestureRecognizerStateBegan) {
    // Reset the last scale, necessary if there are multiple objects with different scales
    lastScale = [gestureRecognizer scale];
}

if ([gestureRecognizer state] == UIGestureRecognizerStateBegan ||
    [gestureRecognizer state] == UIGestureRecognizerStateChanged) {

    CGFloat currentScale = [[[gestureRecognizer view].layer valueForKeyPath:@"transform.scale"] floatValue];

    // Constants to adjust the max/min values of zoom
    const CGFloat kMaxScale = 2.2;
    const CGFloat kMinScale = 0.64;

    CGFloat newScale = 1 -  (lastScale - [gestureRecognizer scale]);
    newScale = MIN(newScale, kMaxScale / currentScale);
    newScale = MAX(newScale, kMinScale / currentScale);
    CGAffineTransform transform = CGAffineTransformScale([[gestureRecognizer view] transform], newScale, newScale);
    [gestureRecognizer view].transform = transform;

    [gestureRecognizer setScale:1.0];

    lastScale = [gestureRecognizer scale];  // Store the previous scale factor for the next pinch gesture call
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-16T12:24:23.267

什么对我有用（**Swift 4**）：

```
func zoomIn(with gestureRecognizer: UIGestureRecognizer?) {
    guard let location = gestureRecognizer?.location(in: gestureRecognizer?.view)

    let rect = CGRect(x: location.x, y: location.y, width: 0, height: 0)
    scrollView.zoom(to: rect, animated: true)
} 
```

或者换句话说，创建一个`CGRect`宽度和高度为零的将导致缩放`UIScrollView`到矩形`origin``maximumZoomScale`

# java - 不幸的是，应用程序已停止（Android 开发）

> ID：14685114
> 
> 赞同：0
> 
> 时间：2013-02-04T10:49:44.160
> 
> 标签：java, android, android-notifications

我刚开始 android 开发 2 天，这是我无法解决的错误“不幸的是，[App] 已停止”。

这就是我打算用APP做的事情。

1.  显示将告诉用户按 ok 应用程序将开始制作日志文件的 UI。

2.  当按下 OK 按钮时，它将在后台运行（不需要 UI）并等待来自其他应用程序的通知，并将通知中的文本写入日志文件。

这是我的 AndroidManifest

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.notificationnotifier"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.notificationnotifier.GetNotification"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name="com.example.notificationnotifier.MonitorNotification"
            android:label="@string/app_name" android:exported="false">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

这是 GetNotification.java

```
public class GetNotification extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_get_notification);

        Button okButton = (Button) findViewById(R.id.OKButton);
        okButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent getNotification = new Intent("com.example.notificationnotifier.MonitorNotification");
                startActivity(getNotification); 
            }
        }) ;

        Button cancel = (Button) findViewById(R.id.Cancel);
        cancel.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                finish();
            }
        }) ;

    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
    }

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
    }  
} 
```

这是 MonitorNotification.java

```
import android.accessibilityservice.AccessibilityService;
import android.accessibilityservice.AccessibilityServiceInfo;
import android.view.accessibility.AccessibilityEvent;

public class MonitorNotification extends AccessibilityService{

    @Override
    public void onAccessibilityEvent(AccessibilityEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onInterrupt() {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onServiceConnected() {
        // TODO Auto-generated method stub
    //  super.onServiceConnected();
        AccessibilityServiceInfo info = new AccessibilityServiceInfo();
          info.feedbackType = 1;
              info.eventTypes = AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED;
          info.notificationTimeout = 100; 
          setServiceInfo(info);
    }
} 
```

这是 logcat [更新]

```
02-04 10:31:17.947: E/Trace(1108): error opening trace file: No such file or directory (2)
02-04 10:31:18.648: D/gralloc_goldfish(1108): Emulator without GPU emulation detected.
02-04 10:31:21.128: D/AndroidRuntime(1108): Shutting down VM
02-04 10:31:21.148: W/dalvikvm(1108): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
02-04 10:31:21.169: E/AndroidRuntime(1108): FATAL EXCEPTION: main
02-04 10:31:21.169: E/AndroidRuntime(1108): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.notificationnotifier/com.example.notificationnotifier.MonitorNotification}: java.lang.ClassCastException: com.example.notificationnotifier.MonitorNotification cannot be cast to android.app.Activity
02-04 10:31:21.169: E/AndroidRuntime(1108):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
02-04 10:31:21.169: E/AndroidRuntime(1108):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-04 10:31:21.169: E/AndroidRuntime(1108):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-04 10:31:21.169: E/AndroidRuntime(1108):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-04 10:31:21.169: E/AndroidRuntime(1108):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-04 10:31:21.169: E/AndroidRuntime(1108):     at android.os.Looper.loop(Looper.java:137)
02-04 10:31:21.169: E/AndroidRuntime(1108):     at android.app.ActivityThread.main(ActivityThread.java:4745)
02-04 10:31:21.169: E/AndroidRuntime(1108):     at java.lang.reflect.Method.invokeNative(Native Method)
02-04 10:31:21.169: E/AndroidRuntime(1108):     at java.lang.reflect.Method.invoke(Method.java:511)
02-04 10:31:21.169: E/AndroidRuntime(1108):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-04 10:31:21.169: E/AndroidRuntime(1108):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-04 10:31:21.169: E/AndroidRuntime(1108):     at dalvik.system.NativeStart.main(Native Method)
02-04 10:31:21.169: E/AndroidRuntime(1108): Caused by: java.lang.ClassCastException: com.example.notificationnotifier.MonitorNotification cannot be cast to android.app.Activity
02-04 10:31:21.169: E/AndroidRuntime(1108):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
02-04 10:31:21.169: E/AndroidRuntime(1108):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
02-04 10:31:21.169: E/AndroidRuntime(1108):     ... 11 more
02-04 10:31:23.268: I/Process(1108): Sending signal. PID: 1108 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:55:13.470

替换这一行：

```
Intent getNotification = new Intent("com.example.notificationnotifier.MonitorNotification"); 
```

通过这个：

```
Intent getNotification = new Intent(GetNotification.this,
        MonitorNotification.class); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:56:42.083

在清单文件中添加以下代码：

> ```
>  <service android:name=".MyAccessibilityService"
>      android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE">
>  <intent-filter>
>      <action android:name="android.accessibilityservice.AccessibilityService" />
>  </intent-filter>
>  . . .
> </service> 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:06:21.997

宣言

可访问性在 AndroidManifest.xml 中声明为任何其他服务，但它还必须指定它处理“android.accessibilityservice.AccessibilityService”Intent。未能声明此意图将导致系统忽略无障碍服务。此外，无障碍服务必须请求 BIND_ACCESSIBILITY_SERVICE 权限，以确保只有系统可以绑定到它。未能声明此意图将导致系统忽略无障碍服务。以下是一个示例声明：

```
 <service android:name=".MyAccessibilityService"
     android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE">
 <intent-filter>
     <action android:name="android.accessibilityservice.AccessibilityService" />
 </intent-filter>
 . . .
</service> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T14:08:49.057

我现在知道问题出在哪里了，我的朋友告诉我应该是 getNotification.java 中的 startService 而不是 startActivity

正确的称呼是

```
startService(getNotification); 
```

不是

```
startActivity(getNotification); 
```

我在 MonitorNotification.java 的类中扩展 AccesibilityService。:D

# performance - 使用 ssd 和 mmap 改进并发文件读取

> ID：14685115
> 
> 赞同：5
> 
> 时间：2013-02-04T10:49:47.743
> 
> 标签：performance, concurrency, mmap, solid-state-drive

我有大量的气象文件。太大，无法装入 ram。

我需要执行大量并发随机读取。所以，我认为 SSD + mmap 可以提高性能。

但是并发 mmap 读取是怎么回事？他们应该如何组织？

![在此处输入图像描述](../Images/53e2316ea8e1d3e531f5edccf6e214ad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:49:19.053

是否存在并发原因（线程之间共享数据结构和资源的争用）为什么要在不同线程中独立打开相同的文件？如果不是，那么我看不出这样做的理由。它只会使内核工作更加困难，因为它必须跟踪一堆不同的内存映射（每个线程一个），这些映射最终都映射到同一个对象，消耗更多的文件描述符（没什么大不了的，除非你有一个非常大的数字文件），并且当您多次映射相同的文件时会消耗更多的地址空间。

如果我了解在您的情况下文件大多不经常打开，阅读很多，然后不经常关闭，我认为您不会在线程之间有太多争用。因此，请为所有线程全局打开文件。

无论您是否在线程之间为打开文件的内部管理而争用，有一个最重要的原因是支持每个进程只映射每个文件一次，那就是如果您的备用地址只有 32 位。如果您处于 32 位模式，那么如果您的文件很大并且您想要映射其中的重要部分，那么地址空间是非常有限的资源。在这种情况下，您当然需要通过在两个不同的线程中浪费地映射同一个文件两次来节省地址空间。

# windows-phone - 由于 Hyper-V 错误，模拟器无法运行

> ID：14685120
> 
> 赞同：0
> 
> 时间：2013-02-04T10:50:33.533
> 
> 标签：windows-phone, hyper-v, windows-phone-emulator

我有这个错误信息：

> windows phone 模拟器需要 Hyper-V。您的 PC 缺少运行 Hyper-V 所需的以下先决条件：

几天以来，我无法在 Windows 8 手机模拟器上运行我的项目。我在互联网上搜索，仍然无法解决我的问题。每个人都说打开控制面板，然后单击关闭或打开 Windows 功能，然后选择 hyper-v 选项。当我单击关闭或打开 Windows 功能时，没有关于 Hyper-V 的选项。谁能帮我？

我的电脑功能：
windows-8 Professional (64Bit)
intel core i7 处理器
8Gb ram

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-28T06:14:41.783

第一步
1- 从 BIOS 开启 hyper-v

阅读：http: [//blogs.technet.com/b/canitpro/archive/2014/03/11/step-by-step-enabling-hyper-v-for-use-on-windows-8-1.aspx](http://blogs.technet.com/b/canitpro/archive/2014/03/11/step-by-step-enabling-hyper-v-for-use-on-windows-8-1.aspx)

2-从windows打开hyper-v

在“开始”屏幕上，滑动屏幕右侧并选择“搜索超级按钮”。

键入打开或关闭 Windows 功能并选择该项目。

选择并启用 Hyper-V。

如果之前未启用 Hyper-V，请重新启动计算机以应用更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:13:58.820

我将我的操作系统从 windows 8 pro 格式化为 windows 8 Enterprise，我很容易解决了我的问题。我知道这不是一个逻辑解决方案，但它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:14:53.630

为了运行 Windows Phone 8 模拟器，您需要在 PC 的 BIOS 中启用 Hyper-V 技术。请参阅有关如何执行此操作的[详细文章。](http://itproguru.com/expert/2012/07/configure-bios-before-installing-windows-server-2012-and-hyper-v/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T20:04:50.893

首先你必须从bios打开hyper-v，然后从windows特色列表重新启动hyper-v，然后就可以工作了..

# c - 无法将类型 int 分配给类型 int*

> ID：14685121
> 
> 赞同：2
> 
> 时间：2013-02-04T10:50:42.987
> 
> 标签：c, arrays, sorting, int

我正在尝试为一个函数编写一个代码，该函数获取一个值在 32 到 64 之间的数组（我们称之为 arr1），以及数组的大小（比如说大小 n）。该函数将以 O(n) 对数组进行排序。

我想这样做的方法是声明一个大小为 32 的第二个数组（我们称之为 arr2）并执行此操作：对于 0 和 n 之间的每个索引 i，我们将 1 放入 arr2 的点 [arr1[i]- 32]。因此，例如，如果对于当前 i，arr1[i]=40，那么我们将 1 放入 arr2 的 40-32、8 点。然后我们遍历 arr2，如果 arr2[i]==1 然后放入arr[j] 我输入 i+32, j++。理论上，现在应该对 arr1 进行排序。

我的问题是代码，当我将值分配给 arr2 时，我在“=”下​​方有一条小红线，当我将鼠标悬停在它上面时，它说“不能将 int 类型的值分配给 int* 类型”

```
void sort_array(int* arr1,int n)
{
    int i=0,j=0;
    int* arr2[32];
    for(i=0;i<32;i++)
        arr2[i]=0;
    for(i=0;i<n;i++)
        arr2[arr1[i]-32]=1;
    for(i=0;i<32;i++)
        if(arr2[i]==1)
        {
            arr1[j]=i+32;
            j++;
        }
} 
```

我还想听听是否有人对如何在 O(n) 中对该数组进行排序有更好的建议。quicksort 和 mergesort 是 nlog(n) 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:54:30.117

这是问题所在：

```
int* arr2[32]; 
```

这条线应该是

```
int arr2[32]; 
```

因为`arr2`包含计数器，而不是指针。这就是为什么分配失败`1`的元素。`arr2`

现在让我们讨论您的算法：您尝试的[*计数排序*](http://en.wikipedia.org/wiki/Counting_sort)实现将中断具有重复值的数组，因为无论您找到多少次，您都设置`arr2[arr1[i]-32]`为。`1`您应该将其更改为`arr2[arr1[i]-32]++`，并使用 count 将那么多计数值放入结果数组中。请参阅维基百科文章中的伪代码正确实现。

这是[一个比较各种排序算法性能的表格](http://en.wikipedia.org/wiki/Sorting_algorithm#Comparison_of_algorithms)。查找第二个表，其中包含非比较排序的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:54:50.303

```
int *arr2[32]; 
```

应该

```
int arr2[32]; 
```

**前者声明了一个由 32 个指针**组成的数组。

# java - 如何从 jnlp 文件中检索源代码

> ID：14685127
> 
> 赞同：3
> 
> 时间：2013-02-04T10:51:07.307
> 
> 标签：java, swing, jnlp

我已经`jnlp`从他们网站上提供的 oracle 教程中下载了一些文件作为示例。当它们运行时，还有什么方法可以从它们那里检索源代码？这真的会帮助我更好地理解他们的例子。

提前谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T15:32:32.290

给定一个`.jnlp`来自[*The Java Tutorials*](http://docs.oracle.com/javase/tutorial/)的文件，关注两个[*Java Web Start*](https://stackoverflow.com/tags/java-web-start/info)属性：

```
codebase="http://docs.oracle.com/javase/tutorialJWS/uiswing/components/ex6"
main-class="components.ColorChooserDemo"

```

并在网站上搜索`main-class`名称`codebase`，例如

```
http://www.google.com/#q=site:oracle.com+ColorChooserDemo 

```

瞧，[第一击](http://docs.oracle.com/javase/tutorial/uiswing/components/colorchooser.html)！

额外功能：大多数示例部分都有 HTML `name`, [`eg`](http://docs.oracle.com/javase/tutorial/uiswing/components/colorchooser.html#eg).

# c# - xpath 查询以选择具有和条件的节点

> ID：14685128
> 
> 赞同：-1
> 
> 时间：2013-02-04T10:51:12.900
> 
> 标签：c#, xml, xpath

```
<?xml version="1.0"?>  
<AppXmlLogWritter>  
  <LogData>  
    <LogID>235820130202134128634953894887814709273</LogID>  
    <LogDateTime>20130202134128</LogDateTime>  
    <LogType>Warning</LogType>  
    <LogFlag>PACSFlag</LogFlag>  
    <LogApplication>PACSLogApplication</LogApplication>  
    <LogModule>PACSLogModule</LogModule>  
    <LogLocation>PACSLogLocation</LogLocation>  
    <LogText>PACSLogText</LogText>  
  </LogData>  
  <LogData>  
    <LogID>2358201302021341286349538948878147093861</LogID>  
    <LogDateTime>20130202134128</LogDateTime>  
    <LogType>Error</LogType>  
    <LogFlag>PACSFlag</LogFlag>  
    <LogApplication>PACSLogApplication</LogApplication>  
    <LogModule>PACSLogModule</LogModule>  
    <LogLocation>PACSLogLocation</LogLocation>  
    <LogText>PACSLogText</LogText>  
  </LogData>      
</AppXmlLogWritter> 
```

获取具有 LogApplication 的节点以 'P' 和位置 <=1 和 >=2 开头

> /AppXmlLogWritter/LogData[LogApplication/text()[starts-with(. , 'P')]]和LogData[position()<=1 and position()>=2]

我已经写了上面的查询但失败了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:57:05.123

`/AppXmlLogWritter/LogData[starts-with(LogApplication, 'P') and (position()<=1 and position()>=2)]`

# javascript - Highcharts - 1 系列的不同符号

> ID：14685131
> 
> 赞同：-1
> 
> 时间：2013-02-04T10:51:30.450
> 
> 标签：javascript, highcharts

我找到了下面的代码。我想在 Highcharts 中为 1 serie 使用不同的符号，阈值 = 50。当 y 值小于 50 时，我想要绿色符号，当 y 值大于 50 时，我想要方形符号。

感谢您的帮助！

[http://jsfiddle.net/mhardik/YgxEB/1/](http://jsfiddle.net/mhardik/YgxEB/1/)

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'scatter',
            zoomType: 'xy'
        },
        title: {
            text: 'Scatter Graph Demo'
        },
        xAxis: {
            title: {
                enabled: true,
                text: 'Height (cm)'
            },
            startOnTick: true,
            endOnTick: true,
            showLastLabel: true
        },
        yAxis: {
            title: {
                text: 'Weight (kg)'
            }
        },
        tooltip: {
            formatter: function() {
                    return ''+
                    this.x +' cm, '+ this.y +' kg';
            }
        },
        plotOptions: {
            scatter: {
                marker: {
                    radius: 3,
                    symbol:myFunction(),
                }
            }
        },
        series: [{
            name: 'Points',
            color: 'rgba(223, 83, 83, .5)',
            data: [[161.2, 51.6], [167.5, 59.0], [159.5, 49.2], [157.0, 63.0], [155.8,   53.6]]

        }]
    });
});

});

function myFunction() {
if(true){
    return 'url(http://www.lib.udel.edu/ud/ill/images/green_marker.gif)';
} else{
    return 'square';
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T11:01:28.740

如果您稍微重新组织代码，您可以从数据数组开始，然后将其预处理为包含每个点的标记定义的对象文字：

```
data = $.map(data, function (point) {
    return {
        x: point[0],
        y: point[1],
        marker: {
            radius: 3,
            symbol: point[1] < 50 ?
                'url(http://www.lib.udel.edu/ud/ill/images/green_marker.gif)' :
                'square'
        }
    };
}); 
```

[http://jsfiddle.net/highcharts/YgxEB/10/](http://jsfiddle.net/highcharts/YgxEB/10/)

# objective-c - 使用 xcode 4.3.3 的 iPhone 5 兼容应用程序

> ID：14685138
> 
> 赞同：0
> 
> 时间：2013-02-04T10:51:47.217
> 
> 标签：objective-c, xcode4, iphone-5

我已经使用 xcode 4.3.3 完成了我的通用应用程序，但是当我在 iPhone 5 中运行应用程序时，我的应用程序在小屏幕中启动。我还将启动的图像更改为`Default-568h@2x.png`但完全一致。请帮帮我，我如何使用 iPhone 5 制作应用程序`xcode 4.3.3`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:06:35.740

Xcode 4.3.3 无法以 iOS 6 为目标，您需要更新到 Xcode 4.5 或更高版本。要运行 Xcode 4.5 或更高版本，您的 Mac 需要运行 OSX lion 或更高版本。

# php - 每次减一时如何回显星号

> ID：14685140
> 
> 赞同：1
> 
> 时间：2013-02-04T10:51:50.187
> 
> 标签：php, loops

我正在尝试的是这个

```
***
**
* 
```

我这样做是这样的：

```
<?php
    $val = '*';
    for($i=1; $i<=3; $i++) {
            if($i == 1) {
                echo '***<br>';
            } elseif($i == 2) {
                echo '**<br>';
            } elseif($i == 3) {
                echo '*';
        }
    }
?> 
```

现在确定这是一种笨方法......我想我需要在 for 循环中使用 while 循环，但不知道如何去做......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:59:19.710

```
<?php

for($i=3;$i>0;$i--)
{
echo str_pad("*", $i,"*");
echo "<br>";
}

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:02:11.530

你去：

```
function stringTree($val = '*', $k = 3) {
    for($i = $k; $i > 0; $i--) {
            echo str_repeat($val, $i).'<br>';
        }
    }
} 
```

然后对于您的具体示例，您可以调用：

```
stringTree('*', 3); 
```

这将输出：

```
***
**
* 
```

或者继续让它变得更大；例如：

```
stringTree('*', 6); 
```

将输出：

```
******
*****
****
***
**
* 
```

或轻松更改字符：

```
stringTree('.', 4); 
```

将输出：

```
....
...
..
. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:23:07.957

强制性的 1-liner，有很多方法可以做到这一点。

```
for($i=3; $i; print str_repeat("*", $i--) . '<br />'); 
```

为了好玩：[https ://codegolf.stackexchange.com/questions/4114/print-a-christmas-tree/6783#6783](https://codegolf.stackexchange.com/questions/4114/print-a-christmas-tree/6783#6783)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T10:57:45.633

使用`str_repeat`：

```
str_repeat('*', 4-$i) 
```

整个代码：

```
<?php
$val = '*';
for($i=1; $i<=3; $i++) {
    echo str_repeat($val, 4-$i) . '<br/>';
}
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T11:02:36.750

我将解释一种可以理解的方式，

```
 $val = '*'; // Your star
    $count= 3; // Number of lines
    for($i=0; $i<$count; $i++) {
            $num= $count-$i; //number of lines to come
            for($j=0; $j<$num; $j++) {
            echo "*";
    }
    echo "<br />";
    } 
```

输出

```
***
**
* 
```

[在这里测试](http://writecodeonline.com/php/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-04T11:00:47.690

```
for ($counter = 1; $counter <= 10; $counter++)
{
    // display star, counter number of times
    for ($star_counter = 1; $star_counter <= $counter; $star_counter++)
    {
        echo "*";
    }
    echo "<br/>";
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-04T11:00:51.497

```
<?php
    $val = '***';
    while($val != '')
        echo $val . '<br/>';
        $val = substr($val, 0, -1);
    }
?> 
```

这使您可以从任意数量的星星开始，并且不需要内部循环。

# sql - 如果我不知道要创建哪些列标题，如何将动态 SQL 放入 temptable？

> ID：14685145
> 
> 赞同：0
> 
> 时间：2013-02-04T10:52:14.830
> 
> 标签：sql, sql-server, dynamic, pivot, temp-tables

> **可能重复：**
> [如何从动态数据透视表中分配普通表？](https://stackoverflow.com/questions/14653278/how-can-i-assign-a-normal-table-from-a-dynamic-pivot-table)

我有这个查询：

```
DECLARE @Col NVARCHAR(MAX) = 
    (   SELECT  ', ' + QUOTENAME(CONVERT(VARCHAR, DATEADD(MONTH, DATEDIFF(MONTH, 0, CURRENT_TIMESTAMP) - (12 - Number), 0), 103)) + ' = [' + CAST(number AS VARCHAR) + ']'
        FROM    Master..spt_values
        WHERE   Type = 'P'
        AND     number BETWEEN 0 AND 12
        FOR XML PATH(''), TYPE
    ).value('.', 'NVARCHAR(MAX)')

DECLARE @SQL NVARCHAR(MAX) = 
        N'WITH Data AS
        (   SELECT  DACP_Id, DACP_Value, ResultCenters.RSL_CodDescr AS CentroResultado, Users.USR_EmpName Colaborador, Devices.DEV_NoArea+Devices.DEV_No as AreaNumero,
                    [MonthNum] = 12 - DATEDIFF(MONTH, DACP_Date, CURRENT_TIMESTAMP)
            FROM    DevicesAccompaniments INNER JOIN
                    Devices ON Devices.DEV_Id = DevicesAccompaniments.FK_DEV_Id INNER JOIN
                    ResultCenters ON ResultCenters.RSL_Id = Devices.DEV_RsltId INNER JOIN
                    Contracts ON Contracts.CNT_Id = Devices.DEV_ContrId INNER JOIN
                    Users ON Users.USR_Id = Devices.DEV_UsrId
            WHERE   DATEDIFF(MONTH, DACP_Date, CURRENT_TIMESTAMP) BETWEEN 0 AND 12 
        )   
        SELECT  CentroResultado, Colaborador, AreaNumero' + @Col + '
        FROM    Data
                PIVOT
                (   SUM(DACP_Value)
                    FOR MonthNum IN ([0], [1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12])
                ) pvt;' 
```

它创建了 12 列和关于我们当前日期过去 12 个月的附加信息，问题是我需要将此查询放入报告中，但我需要将列映射到带有 var @SQL 中的信息的临时表中，而不仅仅是执行'EXEC sp_executesql @SQL;' 这是从当前日期起过去 12 个月的示例小提琴：[http ://www.sqlfiddle.com/#!3/3205a/14](http://www.sqlfiddle.com/#!3/3205a/14)

欢迎任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:36:30.313

我有一个保存的脚本，它根据当前模式生成一个插入语句（使其适应我们数据库的未来版本）。这方面的基本思想是它合并来自一个表的数据（具有完全不同的模式，但我知道有相关数据）并使用目标表中的现有记录作为模板来填充缺失的数据。

我相信这个脚本比你需要的要复杂一些。但是，我认为您需要的所有工具都可以根据您的需要进行定制。

```
DECLARE @SourceID VARCHAR(50), @DestinationID VARCHAR(50), @TemplateID VARCHAR(50)
-- Replace with Source ID which has menus to convert
SELECT @SourceID = '<SCREENID>' 
-- Replace with Destination container ID which will contain the parent record for the new data.
SELECT @DestinationID = '<DestinationID >' 
-- ID of template record will will be used to fill in gaps in data.
SELECT @TemplateID = '<Template Record's ID>'

-- Initialize Cursor to gather schema about destination table.
---- This should make this script schema independent
DECLARE @ColumnBuilder NVARCHAR(4000),@ColumnTemp VARCHAR(50)
select @ColumnBuilder = ''

DECLARE ColumnCursor CURSOR LOCAL
FOR select Column_Name from INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '<DESTINATION TABLE NAME>' ORDER BY ORDINAL_POSITION

OPEN ColumnCursor

FETCH NEXT FROM ColumnCursor
INTO @ColumnTemp

WHILE @@FETCH_STATUS = 0
BEGIN

SELECT @ColumnBuilder = @ColumnBuilder + 'C.' + @ColumnTemp + ','

FETCH NEXT FROM ColumnCursor
INTO @ColumnTemp

END
CLOSE ColumnCursor
DEALLOCATE ColumnCursor
-- End Cursor

-- Modify some values, for example, we don't want to copy in the template's PK, instead we'll generate a newid()
SELECT @ColumnBuilder = SUBSTRING(@ColumnBuilder, 1,LEN(@ColumnBuilder)-1) -- get rid of last comma.

SELECT @ColumnBuilder = REPLACE(@ColumnBuilder,'C.TableID,','newid(),')
SELECT @ColumnBuilder = REPLACE(@ColumnBuilder,'C.ParentID,','''' + @DestinationID + ''',')
SELECT @ColumnBuilder = REPLACE(@ColumnBuilder,'C.ColumnINeverWantCopied,','NULL,')
SELECT @ColumnBuilder = REPLACE(@ColumnBuilder,'C.TranslateMe,','MI.TranslateableData,')
SELECT @ColumnBuilder = REPLACE(@ColumnBuilder,'C.Order,','MI.Order + C.Order,')
SELECT @ColumnBuilder = REPLACE(@ColumnBuilder,'C.EntryBy,','''TranslateScript'',')
SELECT @ColumnBuilder = REPLACE(@ColumnBuilder,'C.UpdateBy,','''TranslateScript'',')
SELECT @ColumnBuilder = REPLACE(@ColumnBuilder,'C.EntryDtm,','getdate(),')
SELECT @ColumnBuilder = REPLACE(@ColumnBuilder,'C.UpdateDtm,','getdate(),')

-- Set Label of new buttons
SELECT @ColumnBuilder = REPLACE(@ColumnBuilder,'C.Label,','
CASE WHEN MI.Alias IS NULL
THEN
CASE WHEN MI.CommandID = 7 THEN ''Dial''
WHEN MI.CommandID = 8 THEN ''Email''
ELSE S.Alias
END
ELSE MI.AlternateAlias
END,')

-- Build INSERT statement
SELECT @ColumnBuilder = 'INSERT INTO <Destination table> SELECT ' + @ColumnBuilder + ' from 
(<Source Table> MI LEFT JOIN <Source's Parent Table> S ON MI.ParentID = S.ParentID), <Destination table> C
WHERE MI.ParentID= ''' + @SourceID  + ''' AND C.TableID = ''' + @TemplateID  + ''' 
AND MI.CommandID NOT IN (25,43,32,11,45)'

-- Return whole generated statement, for debugging
SELECT @ColumnBuilder

-- Execute!
exec sp_executesql @ColumnBuilder 
```

# python - Raspberry-Pi 上的 PySerial 给我 [Errno 5] 和 [Errno 11]

> ID：14685146
> 
> 赞同：0
> 
> 时间：2013-02-04T10:52:19.423
> 
> 标签：python, raspberry-pi, pyserial

我正在尝试为我的 Raspberry Pi设置一个 IR Receiver Breakout ( [https://www.sparkfun.com/products/8554 )。](https://www.sparkfun.com/products/8554)我将接收器上的“输出”连接到 py 上的“RXD”引脚，并使用 PySerial 读取输入，

```
import serial
import time

ser = serial.Serial('/dev/ttyAMA0', 9600, timeout=1)

while True:
    print ser.read(ser.inWaiting())
    time.sleep(1) 
```

我尝试了不同的超时，使用 readlines 而不是 read，使用 read(1) 而不是 read(inWaiting)。无论我尝试什么，我都会遇到以下两个错误之一：

```
IOError: [Errno 5] Input/output error 
```

或者

```
IOError: [Errno 11] Resource temporarily unavailable 
```

编辑：更多信息

该程序起初工作了一段时间，几分钟后出现错误。不确定这是否重要，但以防万一，我尝试过使用不同的红外遥控器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:16:25.380

The problem was the IR receiver, i probably did something wrong and damaged it at some point since i'm a noob. I got a new one and now i no longer get the errors.

# c# - 如何在 C# 中解析 HTTP url？

> ID：14685147
> 
> 赞同：15
> 
> 时间：2013-02-04T10:52:27.123
> 
> 标签：c#, parsing, url

我的要求是解析 Http Urls 并相应地调用函数。在我当前的实现中，我使用嵌套的 if-else 语句，我认为这不是一种优化的方式。你能推荐一些其他有效的方法吗？

网址是这样的：

*   `server/func1`
*   `server/func1/SubFunc1`
*   `server/func1/SubFunc2`
*   `server/func2/SubFunc1`
*   `server/func2/SubFunc2`

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-05-20T19:02:06.793

[我认为您可以从System.Uri](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.URI%29;k%28DevLang-CSHARP%29&rd=true)类中获得很多用处。给它一个 URI，你可以按多种排列方式提取片段。

一些例子：

```
Uri myUri = new Uri("http://server:8080/func2/SubFunc2?query=somevalue");

// Get host part (host name or address and port). Returns "server:8080".
string hostpart = myUri.Authority;

// Get path and query string parts. Returns "/func2/SubFunc2?query=somevalue".
string pathpart = myUri.PathAndQuery;

// Get path components. Trailing separators. Returns { "/", "func2/", "sunFunc2" }.
string[] pathsegments = myUri.Segments;

// Get query string. Returns "?query=somevalue".
string querystring = myUri.Query; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-05T18:28:33.703

这可能是一个迟到的答案，但我发现自己最近试图解析一些 URL，我继续使用 和 的组合，`Uri`如此[处](https://stackoverflow.com/a/29434651/1145114)`System.Web.HttpUtility`所示，我的 URL 就像这样，所以这就是我所做的：`http://one-domain.com/some/segments/{param1}?param2=x....`

```
var uri = new Uri(myUrl);
string param1 = uri.Segments.Last();

var parameters = HttpUtility.ParseQueryString(uri.Query);
string param2 = parameters["param2"]; 
```

请注意，在这两种情况下，您都将使用`string`s，并且在使用段时会特别疲倦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-14T12:34:10.710

我将 Suncat2000 的答案中的拆分与字符串拆分相结合，以获得 URL 的有趣功能。我从另一个页面传入一个完整的 Uri，包括 https: 等作为导航参数 e.Parameter:

```
Uri playlistUri = (Uri)e.Parameter;
string youtubePlaylistUnParsed = playlistUri.Query;
char delimiterChar = '=';
string[] sections = youtubePlaylistUnParsed.Split(delimiterChar);
string YoutubePlaylist = sections[1]; 
```

这让我获得了 PLs__ 等形式的播放列表，以便在 Google API 中使用。

# java - GlassFish 部署异常“带有实体的球衣宁静”

> ID：14685148
> 
> 赞同：2
> 
> 时间：2013-02-04T10:52:28.227
> 
> 标签：java, rest, jakarta-ee, jersey, glassfish-3

带有 Netbeans IDE 的 glassfish 服务器 3.1.2 引发了以下异常。我正在尝试使用球衣和数据库中的实体（使用休眠）构建一个宁静的服务。netbeans 没有部署应用程序的问题出在哪里。

```
SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
      SEVERE: Missing dependency for method public void service.ClientXTicketAccordFacadeREST.remove(beans.ClientXTicketAccordPK) at parameter at index 0
      SEVERE: Method, public void service.ClientXTicketAccordFacadeREST.remove(beans.ClientXTicketAccordPK), annotated with DELETE of resource, class service.ClientXTicketAccordFacadeREST, is not recognized as valid resource method.
      SEVERE: Missing dependency for method public beans.ClientXTicketAccord service.ClientXTicketAccordFacadeREST.find(beans.ClientXTicketAccordPK) at parameter at index 0
      SEVERE: Method, public beans.ClientXTicketAccord service.ClientXTicketAccordFacadeREST.find(beans.ClientXTicketAccordPK), annotated with GET of resource, class service.ClientXTicketAccordFacadeREST, is not recognized as valid resource method.
      SEVERE: Missing dependency for method public void service.DomiciliationXEtatDossierFacadeREST.remove(beans.DomiciliationXEtatDossierPK) at parameter at index 0
      SEVERE: Method, public void service.DomiciliationXEtatDossierFacadeREST.remove(beans.DomiciliationXEtatDossierPK), annotated with DELETE of resource, class service.DomiciliationXEtatDossierFacadeREST, is not recognized as valid resource method.
      SEVERE: Missing dependency for method public beans.DomiciliationXEtatDossier service.DomiciliationXEtatDossierFacadeREST.find(beans.DomiciliationXEtatDossierPK) at parameter at index 0
      SEVERE: Method, public beans.DomiciliationXEtatDossier service.DomiciliationXEtatDossierFacadeREST.find(beans.DomiciliationXEtatDossierPK), annotated with GET of resource, class service.DomiciliationXEtatDossierFacadeREST, is not recognized as valid resource method.
      SEVERE: Missing dependency for method public void service.DomiciliationXStatutDomiciliationFacadeREST.remove(beans.DomiciliationXStatutDomiciliationPK) at parameter at index 0
      SEVERE: Method, public void service.DomiciliationXStatutDomiciliationFacadeREST.remove(beans.DomiciliationXStatutDomiciliationPK), annotated with DELETE of resource, class service.DomiciliationXStatutDomiciliationFacadeREST, is not recognized as valid resource method.
      SEVERE: Missing dependency for method public beans.DomiciliationXStatutDomiciliation service.DomiciliationXStatutDomiciliationFacadeREST.find(beans.DomiciliationXStatutDomiciliationPK) at parameter at index 0
      SEVERE: Method, public beans.DomiciliationXStatutDomiciliation service.DomiciliationXStatutDomiciliationFacadeREST.find(beans.DomiciliationXStatutDomiciliationPK), annotated with GET of resource, class service.DomiciliationXStatutDomiciliationFacadeREST, is not recognized as valid resource method.
      SEVERE: Missing dependency for method public void service.UserXAgenceFacadeREST.remove(beans.UserXAgencePK) at parameter at index 0
      SEVERE: Method, public void service.UserXAgenceFacadeREST.remove(beans.UserXAgencePK), annotated with DELETE of resource, class service.UserXAgenceFacadeREST, is not recognized as valid resource method.
      SEVERE: Missing dependency for method public beans.UserXAgence service.UserXAgenceFacadeREST.find(beans.UserXAgencePK) at parameter at index 0
      SEVERE: Method, public beans.UserXAgence service.UserXAgenceFacadeREST.find(beans.UserXAgencePK), annotated with GET of resource, class service.UserXAgenceFacadeREST, is not recognized as valid resource method.
    SEVERE: WebModule[/testservice]StandardWrapper.Throwable
    com.sun.jersey.spi.inject.Errors$ErrorMessagesException
        at com.sun.jersey.spi.inject.Errors.processErrorMessages(Errors.java:170)
        at com.sun.jersey.spi.inject.Errors.postProcess(Errors.java:136)
        at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:199)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:771)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:766)
        at com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:488)
        at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:318)
        at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)
        at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
        at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
        at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
        at javax.servlet.GenericServlet.init(GenericServlet.java:244)
        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1453)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1250)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5093)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:5380)
        at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
        at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
        at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
        at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
        at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
        at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
        at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
        at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
        at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
        at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:722)

    SEVERE: WebModule[/testservice]PWC1396: Servlet /testservice threw load() exception
    com.sun.jersey.spi.inject.Errors$ErrorMessagesException
        at com.sun.jersey.spi.inject.Errors.processErrorMessages(Errors.java:170)
        at com.sun.jersey.spi.inject.Errors.postProcess(Errors.java:136)
        at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:199)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:771)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:766)
        at com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:488)
        at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:318)
        at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)
        at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
        at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
        at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
        at javax.servlet.GenericServlet.init(GenericServlet.java:244)
        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1453)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1250)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5093)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:5380)
        at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
        at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
        at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
        at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
        at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
        at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
        at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
        at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
        at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
        at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:722)

    SEVERE: PWC1306: Startup of context /testservice failed due to previous errors
    SEVERE: ContainerBase.addChild: start: 
    org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: com.sun.jersey.spi.inject.Errors$ErrorMessagesException
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:5389)
        at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
        at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
        at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
        at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
        at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
        at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
        at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
        at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
        at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
        at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:722)
    Caused by: org.apache.catalina.LifecycleException: com.sun.jersey.spi.inject.Errors$ErrorMessagesException
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5103)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:5380)
        ... 39 more
    Caused by: com.sun.jersey.spi.inject.Errors$ErrorMessagesException
        at com.sun.jersey.spi.inject.Errors.processErrorMessages(Errors.java:170)
        at com.sun.jersey.spi.inject.Errors.postProcess(Errors.java:136)
        at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:199)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:771)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:766)
        at com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:488)
        at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:318)
        at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)
        at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
        at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
        at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
        at javax.servlet.GenericServlet.init(GenericServlet.java:244)
        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1453)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1250)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5093)
        ... 40 more

    WARNING: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: com.sun.jersey.spi.inject.Errors$ErrorMessagesException
    java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: com.sun.jersey.spi.inject.Errors$ErrorMessagesException
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:921)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2019)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
        at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
        at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
        at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
        at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
        at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
        at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
        at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
        at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
        at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:722)

    SEVERE: Exception while invoking class com.sun.enterprise.web.WebApplication start method
    java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: com.sun.jersey.spi.inject.Errors$ErrorMessagesException
        at com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
        at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
        at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
        at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
        at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
        at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
        at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
        at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
        at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:722)

    SEVERE: Exception while loading the app
    INFO: file:/C:/testservice/build/web/WEB-INF/classes/_testservicePU logout successful
    SEVERE: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: com.sun.jersey.spi.inject.Errors$ErrorMessagesException 
```

而 web.xml 是：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <servlet>
        <servlet-name>ServletAdaptor</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <description>Multiple packages, separated by semicolon(;), can be specified in param-value</description>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>service</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>ServletAdaptor</servlet-name>
        <url-pattern>/webresources/*</url-pattern>
    </servlet-mapping>
     <session-config>
        <session-timeout>
            30
        </session-timeout>
     </session-config>
    </web-app> 
```

# java - 为 Java 桌面应用程序创建安装程序

> ID：14685149
> 
> 赞同：29
> 
> 时间：2013-02-04T10:52:29.923
> 
> 标签：java, deployment, installation, desktop-application

我知道这个问题已经被问过很多次，并且一直有一个答案是关于使用可执行 jar 或使用 launch4j 或类似应用程序制作 .exe。

我可能听起来像个新手，但实际上我是。

我一直在尝试使用 Java 项目做一些事情。我已经成功地制作了一个可执行的 jar 和一个 .exe 文件。感谢您之前在 SO 中的回答 :)

但是，我想为 Windows 创建一个安装程序。就像，按 Next 2 - 3 次（显示所有条款和条件等），然后用户指定一个位置（如 C:\Program Files\New Folder\My App），然后是我的 .exe、lib 文件夹、img文件夹，其他重要文件夹与 .exe 文件一起粘贴到目标文件夹中，然后在桌面上创建快捷方式。

关于如何实现这一目标的任何指示？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-04T11:40:12.160

我已经使用[InnoSetup](http://www.jrsoftware.org/isinfo.php)很长时间了。它一直运作良好。它可以完成您需要的一切（解压缩文件、在桌面上放置快捷方式、开始菜单等）并生成我们习惯的安装程序。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-04T11:07:26.413

如果你想要免费和开源，你可以看看[IzPack](http://izpack.org/)。我们在工作中使用它来在我们的构建器中提供命令行支持。

您还可以查看[install4j](http://www.ej-technologies.com/products/install4j/overview.html)，它是我们之前尝试过的商业产品（但在花钱方面，您往往想知道自己得到了想要的东西；））

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-24T04:33:02.570

如果您使用的是 JDK 13 或更高版本，则可以使用 JDK 中名为`jpackage`.

[jpackage](https://docs.oracle.com/en/java/javase/15/jpackage/packaging-overview.html)可以为 Linux、Mac 和 Windows 操作系统创建安装程序。

[您可以使用jlink](https://docs.oracle.com/javase/9/tools/jlink.htm)创建特定的运行时。

jpackage 需要一些第三方免费软件来创建 Windows 包：

~~* 要创建`.exe`捆绑包，它使用 Wix~~

~~* 要创建`.msi`捆绑包，它使用 Inno~~

*   Wix 现在是创建`exe`和`msi`捆绑的唯一依赖项。

有关 jpackage 的所有详细信息都可以在[JEP 343: Packaging Tool](https://openjdk.java.net/jeps/343)中找到。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-04T11:50:51.340

**编辑：我将把它留在这里以供参考，但请注意：浏览器制造商删除了启动 JWS 和小程序所需的 Java 插件，并且两者都在 Java 9 中被弃用并从 API 中删除。**

使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)。

> 喜欢，按 Next 2 - 3 次（显示所有条款和条件等）

[`ExtensionInstallerService`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/ExtensionInstallerService.html)JNLP API 提供了这一点。这是一个[演示。的安装服务](http://pscode.org/jws/api.html#eis)。

> ..然后用户指定一个位置（如 C:\Program Files\New Folder\My App），..

`ExtensionInstallerService`提供了一种方法，该方法[`getInstallPath()`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/ExtensionInstallerService.html#getInstallPath%28%29)..

> 返回推荐安装程序安装扩展的目录。安装程序不需要安装在此目录中，这只是一个建议的路径。

这与您所要求的并不完全相同，但是我认为允许用户进行那种级别的控制通常是一个坏主意。

> 然后我的 .exe、lib 文件夹、img 文件夹、其他重要文件夹与 .exe 文件一起粘贴到目标文件夹中。

JWS 会在需要时自动安装 JNLP 中提到的资源。此外，如果服务器上的档案发生更改，它会更新资源。

> 然后在桌面上创建一个快捷方式。

JWS 可以在支持的系统上提供桌面快捷方式和菜单项。

例如

*   从[如何通过单击 Windows 上的图标来运行 Java 程序？](https://stackoverflow.com/questions/11323510/how-to-run-java-programs-by-clicking-on-their-icon-on-windows/11323662#11323662)
    ![](../Images/3c59a7150ccbe64641b45391650d1e08.png)
*   [这个答案](https://stackoverflow.com/a/13871972/418556)，它显示了一个 JWS 应用程序。安装在“程序和功能”中，桌面图标位于其左侧。
    ![](../Images/6bdd2492643aed64033aea6f27480ff8.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T11:31:54.463

几个月前我也有同样的情况。在尝试了很多之后。我建议 NSIS。[Eclipse EclipseNSIS](http://eclipsensis.sourceforge.net/)有一个不错的插件，带有一些模板。只需单击几下即可获得基本的安装程序，这很有帮助。如果生成的代码不够用，您可以通过编码完成其余工作，但大部分代码是由 EclipseNSIS 生成的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T09:42:06.927

您还可以使用[高级安装程序](http://www.advancedinstaller.com/)。由于您已经有一个 EXE 来启动您的 JAR，您不需要使用 Advanced Installer 的 Java Launcher 支持，您可以创建一个[Simple 项目](http://www.advancedinstaller.com/user-guide/tutorial-simple.html)，该项目在免费版中提供，因此您无需购买执照。

安装它并创建安装包最多需要 10 分钟，因为您会发现使用它非常容易学习。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-28T23:32:15.327

使用 Launch4j 创建 exe 文件。您必须提供 jre 文件夹的相对路径。接下来使用 Inno Setup 进行设置。您可以在安装程序中捆绑 jre。我用过它，它就像魔法一样工作。我可以显示细节。

# apache - 如何从我的专用服务器上的根访问权限中查找/访问帐户 public_html 目录 - WHM cpanel

> ID：14685150
> 
> 赞同：1
> 
> 时间：2013-02-04T10:52:39.580
> 
> 标签：apache, webserver, putty, whm

我有专用服务器并通过 ssh putty 进行 root 访问 - 我在服务器上设置了 1 个帐户，但我正在尝试锻炼如何从 root@ds-44498 [~]# public_html 访问该帐户的 public_html 目录在根是空的。

我正在尝试将文件从根目录复制到帐户 public_html 文件夹

我有 WHM - cpanel

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T18:52:46.277

已找到答案：在 /home/accountname/public_html/

谢谢

# ruby-on-rails - 使用原型设置请求标头

> ID：14685156
> 
> 赞同：1
> 
> 时间：2013-02-04T10:53:06.667
> 
> 标签：ruby-on-rails, jquery, prototypejs

我想将以下 jquery 代码重新制作为原型：

```
jQuery.ajax({ url:url,
          type: 'POST',
          beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token', jQuery('meta[name="csrf-token"]').attr('content'))},
          data: { 'value': value } , 
          success: function(response) {
          }
        }); 
```

我试过了，但是请求标头丢失了，我该如何设置它

```
new Ajax.Request(url , {
    parameters: { 'value': value },
    onSuccess: function(transport) {
    }
  }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:57:53.370

使用`requestHeaders`选项[http://prototypejs.org/doc/latest/ajax/](http://prototypejs.org/doc/latest/ajax/)

```
new Ajax.Request(url , {
  parameters: { 'value': value },
  requestHeaders: { 'X-CSRF-Token', ... },
  onSuccess: function(transport) {}
}) 
```

# javascript - Webapp UI 包

> ID：14685158
> 
> 赞同：0
> 
> 时间：2013-02-04T10:53:07.917
> 
> 标签：javascript, user-interface, web-applications, web-application-design

我正在创建一个单页 javascript webapp。如果我想制作这样的应用程序：

![在此处输入图像描述](../Images/cf36a0ffb1688a6cb92cde5598f9798f.png)

什么是可以让我最接近那里的 ui 包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:41:32.003

查看[Ext-JS](http://www.sencha.com/products/extjs/)。应该可以使用它来设计上述网页。虽然它基本上是 javascript，但涉及到不可忽视的学习曲线。尽管如今，它们提供了令人敬畏的文档，并且您可以在网络上获得许多基本示例。

# c# - Visual Studio 性能分析器：开括号上的行数

> ID：14685159
> 
> 赞同：0
> 
> 时间：2013-02-04T10:53:08.973
> 
> 标签：c#, performance, visual-studio, profiling

我正在尝试评估我正在编写的程序的性能。

我有一个方法：

```
public double FooBar(ClassA firstArg, EnumType secondArg)
{
    [...] 
```

如果我在 FooBar 的 VS 性能分析器中查看函数详细信息，我可以看到该方法占总时间的 14%（包括在内），而这 10% 用于方法本身的主体。我无法理解的是，看起来总时间的 6.5%（包括和不包括在内）都花在了这种方法的大括号上；它实际上是代码中最耗时的行（作为独占时间问题）。

该方法没有覆盖任何其他方法。分析是在调试配置中使用采样完成的，运行持续约 150 秒，其中 6.5% 对应于总共 48000 个样本中的 3000 多个样本。

有人可以解释一下这行发生了什么，是否有办法改善这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:04:15.163

在方法的第一个打开的花括号中显示了方法初始化所花费的时间。

在方法初始化期间，局部变量被分配和初始化。请注意，方法的所有局部变量都在执行之前初始化，如果在主体中间声明的话。

为了减少初始化时间，尝试将局部变量移动到堆中，或者，如果它们只是有时使用（如 if 分支内或返回后的变量），则将使用它们的代码段提取到另一个方法。

# algorithm - 具有特定约束的长度为 N 的密码数

> ID：14685160
> 
> 赞同：0
> 
> 时间：2013-02-04T10:53:09.333
> 
> 标签：algorithm, math, recursion, logic, combinatorics

考虑 26 个字母和 10 个数字的集合。

编写一个函数，返回长度为 N 的密码数量，其中至少包含 L 个小写字母、至少 U 个大写字母和至少 D 个数字。

函数签名**int cntPass(int N,int L,int U,int D)**

我的做法：

我试图使用递归来解决它，但我认为它是错误的。我的（错误）递归如下：

f(N,L,U,D)=f(N,L-1,U,D)+f(N,L,U-1,D)+f(N,L,U,D-1) [具有必要的基本条件，但它不起作用]。

我正在寻找更好的方法或不同的逻辑来解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T10:57:51.737

这只是一个简单的组合问题。结果是^N C [L] * ^(NL) C [U] * ^(NLU) C [D] * 26 ^L * 26 ^U * 10 ^D * 62 ^(N - U - L - D)，可以稍微简化为 26 ^(L + U) * 10 ^D * 62 ^(N - U - L - D) * N！/（U！* L！* D！*（N - L - U - D）！）。

我们在 N 个位置中为小写字符选择 L 个位置。然后在其余 N - L 个位置中为大写字母选择 U 个位置。并在其余 N - L - U 位中选择 D 位作为数字。剩下的就是一切。

L 小写字母每个有 26 个选项。U 大写字母也一样。D 位各有 10 个选项。对于其余的 (N - L - U - D)，我们可以为每个字符使用 26 + 26 + 10 个字符中的任何一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:32:50.857

@nhahtdh 的答案是完全正确的。但是，如果需要大量数字，计算组合因子可能会有点棘手（请参阅注释以了解这样做的好方法）。

这是一种不通过阶乘但使用递归来计算相同数字的方法：不考虑函数 int cntPass(int N,int L,int U,int D)，而是添加最后一个参数，它表示可以是 3 中任何一个的位数：

int cntPass(int N,int L,int U,int D,int A)

注意我们有 A = NLUD。现在，递归基于对第一个字符的选择：我们有 26 个小写字母选择，26 个大写字母选择，10 个数字选择。

现在，给定 N、L、U、D 和 A，可以

*   将小写字母作为第一个字符-> 26 种可能性。对于这些可能性中的每一种，我们对其余密码都有 cntPass(N-1,L-1,U,D,A) 可能性。注意如果L=0，这不起作用，**除非**A>0，即仍有一些字符可以自由选择。在这种情况下，我们也有 26 种可能性，每个可能性都有 cntPass(N-1,L,U,D,A-1)。
*   大写的同上
*   同上的数字。

为了结束递归，我们可以设置 N=1 时的可能性数量，或者等效地设置 N=0 时的数量（为符号 1）。

这是一个 Matlab 代码（使用 Matlab 进行快速测试），它使得它：

```
function [number]=Nword(N,LowerCase,UpperCase,Digit,Any)
number = 0;
if ( LowerCase > 0)
   number = number + 26*Nword( N-1, LowerCase-1, UpperCase, Digit, Any);
elseif (Any > 0)
    number = number + 26*Nword( N-1, LowerCase, UpperCase, Digit, Any-1);
end

if ( UpperCase > 0)
   number = number + 26*Nword( N-1, LowerCase, UpperCase-1, Digit, Any);
elseif( Any > 0)
    number = number + 26*Nword( N-1, LowerCase, UpperCase, Digit, Any-1);
end

if ( Digit > 0)
   number = number + 10*Nword( N-1, LowerCase, UpperCase, Digit-1, Any);
elseif( Any > 0)
    number = number + 10*Nword( N-1, LowerCase, UpperCase, Digit, Any-1);
end

if (number == 0)
   number = 1; 
end

return 
```

# c# - 从linkedin获取配置文件数据

> ID：14685165
> 
> 赞同：0
> 
> 时间：2013-02-04T10:53:30.177
> 
> 标签：c#, asp.net, web-services, api, linkedin

我只想从linkedIn 获取个人资料数据。我在谷歌上搜索了很多，但没有找到任何可以返回数据链接的端点。我可以通过传递用户或公司的个人资料 ID 来获取公共个人资料数据吗？请提供完成此任务的建议。提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:59:30.673

虽然不是一个直接的答案，但你检查过linkedin api 文档吗？[https://developer.linkedin.com/apis](https://developer.linkedin.com/apis)提供了一些关于从linkedin 用户那里收集一些数据的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:01:10.050

您可以通过此[Profile API](https://developer.linkedin.com/documents/profile-api)返回成员的 LinkedIn 个人资料。

[LinkedIn Developer Toolkit](http://linkedintoolkit.codeplex.com/)是一个用 C# 构建的开源库，用于在您的 .Net Web 应用程序中使用 LinkedIn® API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:24:09.303

在linkedin API 中使用的ID 与在linkedin 网站上使用的ID 不同。此外，每组 ID 对每个linkedin 应用程序都是不同的。这个措施是为了防止垃圾邮件发送者获取链接数据。

您要做的是执行特定的个人资料 API 搜索或公司 API 搜索，以获取所需的 ID，然后进行个人资料 API 调用或公司 API 调用，以检索您需要的详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:32:38.600

查看 LinkedIn 的 Spring.NET 社交扩展：

[http://www.springframework.net/social-linkedin/](http://www.springframework.net/social-linkedin/)

# jsf-2 - JSF2中两个日历之间的同步

> ID：14685168
> 
> 赞同：0
> 
> 时间：2013-02-04T10:53:32.227
> 
> 标签：jsf-2, primefaces

我有两个我想要的日历，当我在第一个 Schedule 中输入日期时，我会自动显示在第二个日历的文本区域中。我尝试使用此代码但没有结果：

```
<dd>
  <f:validateBean validationGroups="#{param['validationGroup']}">
    <p:calendar id="debutSortie" showOn="focus" locale="fr" pattern="dd/MM/yyyy"    value="#{AAA.dateDebut}" styleClass="datepicker">
      <p:ajax event="keyup" update="formDate:dateFin"/>
    </p:calendar>

    <h:graphicImage styleClass="js-datepicker-focus" width="19" height="19"
        alt="Voir le calendrier" value="/statique/images/pictos/picto_calendrier.png"/>
  </f:validateBean>
</dd>

<dt>
  <h:outputLabel for="finSortie_input">Date Fin : </h:outputLabel>
</dt>

<dd>
  <f:validateBean validationGroups="#{param['validationGroup']}">
    <p:calendar id="dateFin" showOn="focus" locale="fr" value="#{AAA.dateFin}"  pattern="dd/MM/yyyy" styleClass="datepicker">
    </p:calendar>

    <h:graphicImage styleClass="js-datepicker-focus" width="19" height="19" alt="Voir le calendrier" value="/statique/images/pictos/picto_calendrier.png"/>
  </f:validateBean>
</dd> 
```

* * *

我添加了这个方法来测试

```
public void dateChangedListener(DateSelectEvent event) {
    System.out.println("DateSelectEvent" +event.getDate());
} 
```

但我有这个错误信息：

```
 javax.faces.FacesException: Method not found: bean@31f8fd9.dateChangedListener(javax.faces.event.AjaxBehaviorEvent) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:21:13.927

Where are you telling the second calendar to update with the date of the first one? You're updating it, but with no value. The most straight forwarded way to do that is to call a listener into the server using ajax.

`<p:ajax event="dateSelect" update="formDate:dateFin" listener="#{AAA.dateChangedListener}"/>`

Handle it in this way:

```
public void dateChangedListener(){
   dateFin = new Date(dateDebut.getTime());
} 
```

In the ajax call just update the second date with the first value.

# java - AndroidRuntime 错误 - java.lang.ClassCastException

> ID：14685174
> 
> 赞同：1
> 
> 时间：2013-02-04T10:54:05.863
> 
> 标签：java, android, json, android-layout, android-intent

我在空闲时间学习 android，我正在尝试`MySQL DB`使用 android 从 android 上收集数据`Json`，但我在处理线程时遇到问题。

这是主要课程

```
package com.esoftarena.demotest;

public class DemoTestActivity extends Activity implements OnClickListener{
    /* Called when the activity is first created. */

    Intent intent;
    Button home,repot, settings, remind, savedata;
    EditText lecdeliver, lecbunked, comment;
    TextView showpercent, showremark;
    InputStream is = null;
    static String json = "";
    String url = "";
    int id = 3, nodeliver = 0 , nobunk = 0;
    JSONArray bunkInfo = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        home = (Button)findViewById(R.id.btnHome);
        repot = (Button)findViewById(R.id.btnReport);
        settings = (Button)findViewById(R.id.btnSettings);
        remind = (Button)findViewById(R.id.btnRemind);
        savedata = (Button)findViewById(R.id.btnsave);

        lecdeliver = (EditText)findViewById(R.id.txtlecdeliver);
        lecbunked = (EditText)findViewById(R.id.txtlecbunked);
        comment = (EditText)findViewById(R.id.txtnote);

        showpercent = (TextView)findViewById(R.id.lblshowpercent);
        showremark = (TextView)findViewById(R.id.lblshowremark);

        home.setOnClickListener(this);
        repot.setOnClickListener(this);
        settings.setOnClickListener(this);
        remind.setOnClickListener(this);
        savedata.setOnClickListener(this);

        url = "http://www.test.com/getbunk.php?getreuslt=true&userno="+id;

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            bunkInfo = json.getJSONArray("bunkinfo");

            // looping through All Contacts
            for(int i = 0; i < bunkInfo.length(); i++){
                JSONObject c = bunkInfo.getJSONObject(i);

                // Storing each json item in variable
                nodeliver = nodeliver + c.getInt("cl_delivered");
                nobunk = nobunk + c.getInt("cl_bunked");

            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        showpercent.setText(nodeliver);
        showremark.setText(nobunk);

        //Toast.makeText(this, "Welcome to page.", Toast.LENGTH_SHORT).show();
    }

    public void onClick(View clicked) {
        if(clicked == home) {
            //recipes = (ListView)findViewById(R.id.recipes);
            Toast.makeText(this, "You have Clicked Home", Toast.LENGTH_SHORT).show();
            Intent i = new Intent(DemoTestActivity.this, DemoTestHome.class);
            DemoTestActivity.this.startActivity(i);
            //Intent i = new Intent(SearchActivity.this, RecipeMethodActivity.class);
           // SearchActivity.this.startActivity(i);
         }else if(clicked == repot){
             Toast.makeText(this, "You have Clicked Report", Toast.LENGTH_SHORT).show();
             Intent i = new Intent(DemoTestActivity.this, DemoTestReport.class);
             DemoTestActivity.this.startActivity(i);
         }else if(clicked == settings ){
             Toast.makeText(this, "You have Clicked Settings", Toast.LENGTH_SHORT).show();
             Intent i = new Intent(DemoTestActivity.this, DemoTestSettings.class);
             DemoTestActivity.this.startActivity(i);
         }else if(clicked == remind ){
             Toast.makeText(this, "You have Clicked Remind Me", Toast.LENGTH_SHORT).show();
             Intent i = new Intent(DemoTestActivity.this, DemoTestRemind.class);
             DemoTestActivity.this.startActivity(i);
         }else if(clicked == savedata ){
            // Create a new HttpClient and Post Header
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://www.test.com/addbunk.php");

            try {
                // Add your data
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("add_new_bunk", "true"));
                nameValuePairs.add(new BasicNameValuePair("userno", "3"));
                nameValuePairs.add(new BasicNameValuePair("lec_delivered", lecdeliver.getText().toString()));
                nameValuePairs.add(new BasicNameValuePair("lec_bunked", lecbunked.getText().toString()));
                nameValuePairs.add(new BasicNameValuePair("comment", comment.getText().toString()));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

                //content = response.getEntity().getContent();
               // Toast.makeText(this, content , Toast.LENGTH_SHORT).show();

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                Toast.makeText(this, e.toString(), Toast.LENGTH_SHORT).show();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Toast.makeText(this, e.toString(), Toast.LENGTH_SHORT).show();
            }

            try {
                BufferedReader reader = new BufferedReader(new InputStreamReader(
                        is, "iso-8859-1"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                json = sb.toString();
            } catch (Exception e) {
                Log.e("Buffer Error", "Error converting result " + e.toString());
            }

            try {
                JSONObject userObject = new JSONObject(json);
                String msg = userObject.getString("msg");
                Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
            } catch(Exception ex){
                //don't forget this
            }

         }

    }
} 
```

这是 JsonParser

```
package com.esoftarena.demotest;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

这是 LogCat 列表

```
02-04 17:41:33.296: D/AndroidRuntime(324): Shutting down VM
02-04 17:41:33.296: W/dalvikvm(324): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-04 17:41:33.386: E/AndroidRuntime(324): FATAL EXCEPTION: main
02-04 17:41:33.386: E/AndroidRuntime(324): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.esoftarena.demotest/com.esoftarena.demotest.DemoTestActivity}: java.lang.ClassCastException: android.widget.LinearLayout
02-04 17:41:33.386: E/AndroidRuntime(324):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-04 17:41:33.386: E/AndroidRuntime(324):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-04 17:41:33.386: E/AndroidRuntime(324):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-04 17:41:33.386: E/AndroidRuntime(324):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-04 17:41:33.386: E/AndroidRuntime(324):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-04 17:41:33.386: E/AndroidRuntime(324):  at android.os.Looper.loop(Looper.java:123)
02-04 17:41:33.386: E/AndroidRuntime(324):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-04 17:41:33.386: E/AndroidRuntime(324):  at java.lang.reflect.Method.invokeNative(Native Method)
02-04 17:41:33.386: E/AndroidRuntime(324):  at java.lang.reflect.Method.invoke(Method.java:521)
02-04 17:41:33.386: E/AndroidRuntime(324):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-04 17:41:33.386: E/AndroidRuntime(324):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-04 17:41:33.386: E/AndroidRuntime(324):  at dalvik.system.NativeStart.main(Native Method)
02-04 17:41:33.386: E/AndroidRuntime(324): Caused by: java.lang.ClassCastException: android.widget.LinearLayout
02-04 17:41:33.386: E/AndroidRuntime(324):  at com.esoftarena.demotest.DemoTestActivity.onCreate(DemoTestActivity.java:60)
02-04 17:41:33.386: E/AndroidRuntime(324):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-04 17:41:33.386: E/AndroidRuntime(324):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-04 17:41:33.386: E/AndroidRuntime(324):  ... 11 more
02-04 17:41:59.676: I/Process(324): Sending signal. PID: 324 SIG: 9 
```

这是 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/lblwelcome"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/welcome"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btnHome"
            android:layout_width="75dp"
            android:layout_height="wrap_content"
            android:text="@string/home" />

        <Button
            android:id="@+id/btnReport"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/reports" />

        <Button
            android:id="@+id/btnSettings"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/settings" />

        <Button
            android:id="@+id/btnRemind"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/remindme" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/lbldelivered"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/lecdelivered"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/lblbunked"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.05"
            android:text="@string/lecturebunk"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/txtlecdeliver"
            android:layout_width="127dp"
            android:layout_height="wrap_content" >

            <requestFocus />
        </EditText>

        <EditText
            android:id="@+id/txtlecbunked"
            android:layout_width="132dp"
            android:layout_height="wrap_content"
            android:inputType="numberDecimal" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/lblpercent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.41"
            android:text="@string/curpercent"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/lblshowpercent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.41"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/lblremark"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.74"
            android:text="@string/lblremark"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/lblshowremark"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.74"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/lblyournote"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.29"
            android:text="@string/note"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <EditText
            android:id="@+id/txtnote"
            android:layout_width="189dp"
            android:layout_height="78dp"
            android:layout_weight="1.10"
            android:inputType="textPostalAddress|textShortMessage" />

    </LinearLayout>

    <Button
        android:id="@+id/btnsave"
        android:layout_width="76dp"
        android:layout_height="wrap_content"
        android:text="@string/save" />

</LinearLayout> 
```

谁能告诉我有什么问题？

# java - Java DataInputStream 与 System.in 的使用

> ID：14685175
> 
> 赞同：0
> 
> 时间：2013-02-04T10:54:10.693
> 
> 标签：java, datainputstream

一个简单的程序

```
 DataInputStream in = new DataInputStream(System.in);
    while(true)
        System.out.println(in.readUTF()); 
```

行为有些奇怪：它拒绝输出输入的文本......我使用终端输入一些文本，但输出中没有任何内容。它出什么问题了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T10:56:14.720

这一点都不奇怪。`readUTF`期望由 .编写的*非常具体*`DataOutputStream`的长度前缀格式。这不是您的终端将提供的。有关更多详细信息，请参阅中的文档[`DataInput.readUTF`](http://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html#readUTF%28%29)。

您通常应该只使用 a`Scanner`或创建一个`InputStreamReader`around`System.in`和 a `BufferedReader`around that，然后使用`BufferedReader.readLine()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:56:19.150

DataInputStream 用于读取二进制数据。readUTF 需要两个字节的无符号长度，后跟 UTF-8 中的字符。（如果你有兴趣，你可以阅读它的文档提示，提示）

我怀疑您打算使用的是旨在阅读文本的扫描仪。

```
Scanner in = new Scanner(System.in);
while(in.hasNextLine())
    System.out.println(in.nextLine()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:58:09.127

你可以试试吗

```
String str;
while((str = in.readUTF()) != null) {
     System.out.println(str);
} 
```

# wpf - 资源无法从 ResourceDictionaries 解析

> ID：14685176
> 
> 赞同：0
> 
> 时间：2013-02-04T10:54:16.530
> 
> 标签：wpf, xaml, resourcedictionary

我在解决 ResourceDictionaries 中的资源时遇到问题。

我决定将我相当大的 ResourceDictionary 重构为单独的字典文件，并组织到子文件夹中。

我在资源下有一个 ResourceLibrary.xaml：

```
<ResourceDictionary x:Class="MyProject.Resources.ResourceLibrary"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
   <ResourceDictionary.MergedDictionaries>
     <!-- Colours -->
     <ResourceDictionary Source="Colors/ConnectedCellColor.xaml" />
     <!-- Brushes -->
     <ResourceDictionary Source="Brushes/ConnectorCellBrush.xaml" />
     <!-- Control Templates -->
     <ResourceDictionary Source="ControlTemplates/ConnectorCellTemplate.xaml" />
     <!-- Base Styles -->
     <ResourceDictionary Source="BaseStyles/ConnectorBaseStyle.xaml" />
   </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

该类的存在是有原因的，在后面的代码中，我可以添加 [Export(typeof (ResourceDictionary))] 以便 MEF 可以找到它。

我有一个观点：（简化）

```
<UserControl x:Class="MyProject.ConnectorCellView"
         Style="{StaticResource ConnectorBaseStyle}"
</UserControl> 
```

连接器底座样式：

```
<ResourceDictionary>
   <Style x:Key="ConnectorBaseStyle" TargetType="UserControl">
      <Setter Property="Template" Value="{StaticResource ConnectorCellTemplate}" />
   </Style>
</ResourceDictionary> 
```

该模板具有 StaticResources 来尝试获取画笔和颜色。

所有这些 StaticResources 将不再解析。

我认为这可能是一个订单问题，但由于这些资源包含在我的主程序的插件中，我使用 MEF 和 ImportMany 来获取所有导出的 ResourceDictionaries，并在我的 Caliburn.Micro 引导程序中：

```
 public void OnImportsSatisfied()
  {
     foreach (ResourceDictionary resourceDictionary in ResourceDictionaries)
     {
        Application.Resources.MergedDictionaries.Add(resourceDictionary);
     }
  } 
```

（我在某处发现的巧妙技巧）

我实际上可以运行我的程序，当创建该视图时，它会在尝试设置样式时引发异常：

System.InvalidCastException
无法将“MS.Internal.NamedObject”类型的对象转换为 System.Windows.FrameworkTemplate 类型。

我发现与此相关的唯一信息与定义的订单资源有关，但是从我在 ResourceLibrary 中的订单来看，它应该可以工作。

抛出异常时，我可以检查 Application.Current.Resources.MergedDictionaries，并查看资源。

我尝试了各种在 ResourceLibrary 中指定 Source 的方法

```
<ResourceDictionary Source="/MyProject;component/Resources/BaseStyles/ConnectorBaseStyle.xaml" /> 
```

等，对找到它们没有影响。这些资源仅供插件代码使用。

似乎唯一可行的是将所有 StaticResources 更改为 DynamicResources

这对我来说没有意义，如果这是一个订单问题，为什么当它们都在同一个文件中时静态会起作用？

我的一些样式使用了 BasedOn，它们不适用于 DynamicResource。

你能帮我理解为什么会发生这种情况，以及如何让它发挥作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:18:23.907

这是一个排序问题，但与您的合并顺序无关 - 它与加载顺序有关。这基本上是加载 ResourceLibrary 字典时发生的情况：

1.  ConnectedCellColor 实例化
2.  ConnectedCellColor 加载到 ResourceLibrary
3.  ConnectorCellBrush 实例化
4.  ConnectorCellBrush 加载到 ResourceLibrary
5.  ConnectorCellTemplate 实例化
6.  ConnectorCellTemplate 加载到 ResourceLibrary
7.  ConnectorBaseStyle 实例化
8.  ConnectorBaseStyle 加载到 ResourceLibrary

这里的问题是，以前使用单个文件只有一个实例化步骤，现在您将其分解为多个步骤，每个步骤都是独立发生的。当实例化 ConnectorBaseStyle 时，ConnectorCellTemplate 已加载，但此时 ConnectorBaseStyle 不知道 ResourceLibrary 的内容。这`DynamicResource`不是问题，因为这些引用可以在第 8 步解决，但`StaticResource`需要在第 7 步立即解决。

最简单的解决方法是尽可能使用`Dynamic`。对于需要`Static`（例如`BasedOn`）的地方，您需要保证资源在实例化期间可用，例如，通过将 ConnectorCellTemplate 合并到 ConnectorBaseStyle 中，或者将所需的所有内容合并到对所有内容都可用的 App.xaml 中。当您获得更多文件并合并到多个位置时，这会使事情变得复杂且难以管理，但至少资源系统足够智能以识别重复项，因此在上述情况下，您仍然只能获得一个 ConnectorCellTemplate 实例，即使它正在两个地方合并。

# sharepoint - 共享点列表 - 相同的权限列表 - 不同的用户访问

> ID：14685180
> 
> 赞同：0
> 
> 时间：2013-02-04T10:54:38.557
> 
> 标签：sharepoint, sharepoint-2007

带有 12 月 CU 的 Sharepoint 2007 SP3。一个站点，两个列表。权限不会被继承，如下所示：

List1:
group1 - 贡献
group2 - 读取
门户所有者 - 完全控制

List2:
group3 - 贡献
group4 - 读取
门户所有者 - 完全控制

问题在于 List1 只能访问来自 group1、group2 和门户所有者的用户，但对于 List2，所有用户都具有读取权限！

如果我在同一个站点或新站点上创建一个新列表，那么无论权限列表中有什么内容，每个人都将拥有对其的读取权限。但是，如果我在列表中的某个项目上设置自定义权限，那么它应该可以正常工作。

此应用程序的中央管理中禁用匿名登录。Windows 日志一目了然。

还能是什么？

# xamarin.ios - 带有 xib 支持（和 monomac）的简单 mvvmcross monotouch

> ID：14685185
> 
> 赞同：0
> 
> 时间：2013-02-04T10:55:00.727
> 
> 标签：xamarin.ios, xamarin.android, monomac, mvvmcross

我用 INotifyPropertyChanged 和 ICommand 成功地尝试了 simpledroid。我想对 monotouch 和 xib 设计器做同样的事情，但没有 TouchDialog。有没有一种方法可以实现而不像 monodroid 那样从 mvx 类继承？现在支持 MonoMac 或 XaMac 中没有对话框的 MonoMac 是否可以做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:58:00.467

我明白你的目标是什么。

我认为您想通过一个基本的应用程序示例开始学习 MvvmCross for Monotouch，就像您可能对 SimpleDroid 所做的那样。我试图做同样的事情但没有成功。

为什么 ？因为在我看来 SimpleDialogTouch 是一个“高级”示例。当你学习 Monotouch 时，你使用 xib 来设计你的视图。但是该示例告诉您学习一种新工具“Monotouch Dialog”，它是一种以编程方式显示控件的方法。

您会收到这些错误，因为该示例仅为 Dialog 实现了 ViewModel，而不是为 xib 或经典绑定实现了 ViewModel。

最后，您将不得不深入研究 MvvmCross 来构建您自己的 SimpleTouch 实现。问题是您没有很多文档，但 Stuart 是初学者的最佳支持者，或者如果您不需要了解 MvvmCross 的地下，您可以切换到高级 Mvx 功能。有很多示例、教程和帖子可以调整 Mvx。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:06:36.663

> 有没有一种方法可以实现而不像 monodroid 那样从 mvx 类继承？

我不相信当前来源支持这一点。

正在努力分离 MvvmCross 中的数据绑定代码，以便可以更轻松地与其他框架一起使用 - 例如，我们也可以尝试移植 MvvmLight。这是我目前努力的重点。

如果你现在需要这个，那么我认为你可以很容易地自己创建这个简单的绑定——但你必须看看 SimpleDialog 版本做了什么——复制到XIB 版本 - [https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Dialog.Touch/Simple/MvxSimpleTouchDialogViewController.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Dialog.Touch/Simple/MvxSimpleTouchDialogViewController.cs)

但是......为什么不直接实现一个适当的可移植 MvxViewModel 呢？

> 现在支持 MonoMac 或 XaMac 中没有对话框的 MonoMac 是否可以做同样的事情？

Xamarin 的任何版本都不支持可移植库 - Jeff 非常友好地提供了一个非官方的安装程序 - 但它不是一个版本......

对于 MvvmCross MonoMac/XaMac 支持，有一个来自 @deapsquatter 的非 PCL 版本，但我不相信它有数据绑定。

我将为 MonoMac 或 XaMac 开发 PCL 和数据绑定版本——但这是在业余时间——还没有人提出客户项目来资助这项工作。如果您或任何人想协助此端口，那么非常欢迎您...但这将是一项技术性很强的工作-我打算“在幕后”进行更改-因此其他人最容易提供帮助的地方可能是在以后的工作中——添加更多视图、更多绑定、进行质量检查、制作样本等。

* * *

**注意**：“简单”绑定不是 MvvmCross 的未来，可能会从未来的版本中删除。然而，这只会在我分离出绑定代码之后才会发生，以便它可以与其他库一起使用——其中第一个可能是一个简单的绑定示例。

我个人认为使用这些所谓的简单绑定没有太大区别或优势......但也许我错过了一些东西......

# haskell - 为什么我不能在 Haskell 中比较任意长度的元组？

> ID：14685191
> 
> 赞同：7
> 
> 时间：2013-02-04T10:55:15.417
> 
> 标签：haskell, typeclass

我知道有[**长度为 2 到 15 的元组的**](https://stackoverflow.com/questions/2978389/haskell-tuple-size-limit)`Eq`预定义实例。[](https://stackoverflow.com/questions/2978389/haskell-tuple-size-limit)

 **为什么不将元组定义为某种递归数据类型，以便它们可以被分解，从而允许为 a 定义 `compare`与任意长度元组一起使用的函数？

毕竟，编译器确实支持任意长度的元组。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T15:27:30.137

您可能会问自己，通用比较函数的类型是什么。首先，我们需要一种编码组件类型的方法：

```
data Tuple ??? = Nil | Cons a (Tuple ???) 
```

真的没有什么是有效的，我们可以用它来代替问号。结论是常规的 ADT 是不够的，所以我们需要我们的第一个语言扩展 GADT：

```
data Tuple :: ??? -> * where
    Nil  :: Tuple ???
    Cons :: a -> Tuple ??? -> Tuple ??? 
```

然而，我们最终得到了问号。填补漏洞需要另外两个扩展，DataKinds 和 TypeOperators：

```
data Tuple :: [*] -> * where
    Nil  :: Tuple '[]
    Cons :: a -> Tuple as -> Tuple (a ': as) 
```

如您所见，我们需要三个类型系统扩展来对类型进行编码。我们现在可以比较吗？嗯，这并不是那么容易回答，因为实际上如何编写一个独立的比较函数远非显而易见。幸运的是，类型类机制允许我们采用简单的递归方法。但是，这一次我们不仅在值级别上递归，还在类型级别上递归。显然空元组总是相等的：

```
instance Eq (Tuple '[]) where
    _ == _ = True 
```

但是编译器再次抱怨。为什么？我们需要另一个扩展，FlexibleInstances，因为`'[]`它是一个具体类型。现在我们可以比较空元组，这并不是那么引人注目。那么非空元组呢？我们需要比较头部以及元组的其余部分：

```
instance (Eq a, Eq (Tuple as)) => Eq (Tuple (a ': as)) where
    Cons x xs == Cons y ys = x == y && xs == ys 
```

似乎有道理，但是砰！我们收到另一个投诉。现在编译器需要 FlexibleContexts，因为我们在上下文中有一个不完全多态的类型，`Tuple as`.

总共有五个类型系统扩展，其中三个只是为了表达元组类型，在 GHC 7.4 之前它们是不存在的。另外两个是需要比较的。当然有回报。我们得到了一个非常强大的元组类型，但是由于所有这些扩展，我们显然不能将这样的元组类型放入基础库中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T11:55:10.830

您始终可以根据二进制元组重写任何 n 元组。例如，给定以下 4 元组：

```
(1, 'A', "Hello", 20) 
```

您可以将其重写为：

```
(1, ('A', ("Hello", (20, ())))) 
```

将其视为一个列表，其中`(,)`扮演`(:)`（即“cons”）`()`的角色并扮演`[]`（即“nil”）的角色。使用这个技巧，只要你根据“二进制元组列表”来制定你的 n 元组，那么你可以无限期地扩展它，它会自动导出正确的`Eq`和`Ord`实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T11:12:42.353

`compare`is的类型[`a -> a -> Ordering`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3acompare)，这表明两个输入必须是相同的类型。根据定义，不同元组的元组是不同的类型。

但是，您可以通过使用[HLists 或 GADTs](http://www.haskell.org/haskellwiki/Heterogenous_collections)来解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-01T16:29:24.613

我只是想补充一下 ertes 的答案，即您不需要单个扩展来执行此操作。以下代码应符合 haskell98 和 2010 标准。除了单例元组之外，其中的数据类型可以一对一地映射到元组。如果你在二元组之后进行递归，你也可以实现这一点。

```
module Tuple (
    TupleClass,
    TupleCons(..),
    TupleNull(..)
    ) where

class (TupleClassInternal t) => TupleClass t

class TupleClassInternal t
instance TupleClassInternal ()
instance TupleClassInternal (TupleCons a b)

data (TupleClassInternal b) => TupleCons a b = TupleCons a !b deriving (Show)

instance (Eq a, Eq b, TupleClass b) => Eq (TupleCons a b) where
    (TupleCons a1 b1) == (TupleCons a2 b2) = a1 == a2 && b1 == b2 
```

你也可以只推导出方程式。当然，使用 TypeOperators 看起来会更酷一些，但是 haskell 的列表系统也有语法糖。**

# asp.net - Kendo Grid 将单元格值绑定到 KendoWindow

> ID：14685193
> 
> 赞同：0
> 
> 时间：2013-02-04T10:55:31.693
> 
> 标签：asp.net, kendo-ui, kendo-grid

我的 KendoGrid 有问题。

我在网格的最后一列中有一些命令。其中一个调用了删除函数，其中打开了一个新的 KendoWindow。现在我需要在窗口中显示该行的计算机名称（这是网格的一个字段）。

在删除功能中，我尝试通过以下方式获取数据：

```
function delete() {
        var grid = $("#grid").data("kendoGrid");
        var selectedRow = grid.selectedRow();
        var data = this.dataItem(selectedRow);
        var ComputerName = data.ComputerName;

        //initialize and open window 
        .
        .
    }; 
```

为了在窗口中显示它，我尝试了一个 ASP 数据绑定：

```
Computername:<span id="ComputerName" data-bind="text: ComputerName"></span> 
```

但它不起作用。我是这个话题的新手，所以如果我的想法没有任何意义，请道歉：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:42:26.217

使用窗口的**激活**事件将窗口的内容实际绑定到该数据项（在您的情况下称为数据）；

```
$('#windowName').data().kendoWindow.bind('activate',function(e){
   kendo.bind(this.element,kendo.observable(data))
}) 
```

# ruby - 在 irb 会话之间自动保存和重新加载 ruby 对象

> ID：14685195
> 
> 赞同：2
> 
> 时间：2013-02-04T10:55:34.360
> 
> 标签：ruby, serialization, marshalling, yaml, irb

可以方便`irb`地保存我的执行历史记录，以后可以通过 CTRL-R 查找访问。

问题，使用我的`.irbrc`或其他方式，有没有办法`irb`保存（在退出时，或在每个命令之后）我在交互模式下定义的对象、变量、类、方法等的状态，并让它们在下一个自动重新加载我什么时候开始irb？

一个痒痒的地方是能够**要求**在活动的 irb 会话期间安装 gems。

# c - C libcurl 强制“内容类型”

> ID：14685196
> 
> 赞同：1
> 
> 时间：2013-02-04T10:55:36.387
> 
> 标签：c, libcurl

我有带有 libcurl 的以下 C 代码将文件上传到我的网络服务器，几乎没问题，我需要上传的唯一问题是“Content-Type：application/vnd.ms-excel”，但它得到“Content-Type：application/ octet-stream”，尝试使用标头，但现在很幸运。在 PHP 中使用 curl 很容易，我只是这样做`curl_setopt($ch, CURLOPT_POSTFIELDS, array("importfile" => "@".$file_path . ";type=application/vnd.ms-excel"`并且工作正常。有什么帮助吗？想法？

```
#include <stdio.h>
#include <string.h>
#include <curl/curl.h>

int main(int argc, char *argv[])
{
  CURL *curl;
  CURLcode res;

  struct curl_httppost *formpost=NULL;
  struct curl_httppost *lastptr=NULL;
  struct curl_slist *headerlist=NULL;
  static const char buf[] = "Expect:";

  curl_global_init(CURL_GLOBAL_ALL);

  curl_formadd(&formpost, &lastptr, CURLFORM_COPYNAME, "importfile", CURLFORM_FILE, "document.csv", CURLFORM_END);
  curl_formadd(&formpost, &lastptr, CURLFORM_COPYNAME, "action", CURLFORM_COPYCONTENTS, "upload", CURLFORM_END);

  curl = curl_easy_init();
  headerlist = curl_slist_append(headerlist, buf);
  if(curl) {
    curl_easy_setopt(curl, CURLOPT_URL, "http://www.myhost.com/upload/upload.php");
    if ( (argc == 2) && (!strcmp(argv[1], "noexpectheader")) )
      curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headerlist);
    curl_easy_setopt(curl, CURLOPT_HTTPPOST, formpost);

    res = curl_easy_perform(curl);
    if(res != CURLE_OK)
      fprintf(stderr, "curl_easy_perform() failed: %s\n",
              curl_easy_strerror(res));

    curl_easy_cleanup(curl);

    curl_formfree(formpost);
    curl_slist_free_all (headerlist);
  }
  return 0;
} 
```

尝试将 HEADER 添加为“Content-Type：application/vnd.ms-excel”，但不正确，我得到：

```
Content-Type: application/vnd.ms-excel 
```

在标题中，但我需要：

```
------WebbbbFormBoundaryXaI1UTNwqAyKWvLT
Content-Disposition: form-data; name="importfile"; filename="document.csv"
Content-Type: application/vnd.ms-excel 
```

相反，我得到：

```
------WebbbbFormBoundaryXaI1UTNwqAyKWvLT
Content-Disposition: form-data; name="importfile"; filename="document.csv"
Content-Type: application/octet-stream 
```

谢谢各位帮忙，答案是：

```
curl_formadd(&formpost, &lastptr, CURLFORM_COPYNAME, "importfile", CURLFORM_FILE, "document.csv", CURLFORM_CONTENTTYPE, "application/vnd.ms-excel", CURLFORM_END); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:46:08.843

您正在寻找[curl_formadd](http://curl.haxx.se/libcurl/c/curl_formadd.html)的选项[CURLFORM_CONTENTTYPE](http://curl.haxx.se/libcurl/c/curl_formadd.html#CURLFORMCONTENTTYPE)。

# jquery - 单击“仅”所有输入文本未选中，当前文本应被选中

> ID：14685199
> 
> 赞同：0
> 
> 时间：2013-02-04T10:55:45.530
> 
> 标签：jquery

我将鼠标悬停在类上`".airportdetails"`，如果我单击整个 div 输入，则现在只显示文本

这是小提琴

[http://jsfiddle.net/VRE9n/4/](http://jsfiddle.net/VRE9n/4/)

```
$(document).ready(function () {
$(".airportdetails").mouseover(function() {
    $("li a", this).show();
}).mouseout(function(){
$("li a", this).hide();
});
})

$('.airportdetails').click( function() {
    var $newcheck = $(this).find(":checkbox");
    if (!$newcheck.prop("checked") ) {
        $newcheck.prop("checked", true);
    } else {
        $newcheck.prop("checked", false);
    }
});
$('.airportdetails input').click(
    function(event){
        event.stopPropagation();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:02:45.147

在点击功能的乞求处添加`$(":checkbox").prop("checked", false);`以查找任何已选中的框并取消选中它们。

```
$('.airportdetails').click( function() {
    $(":checkbox").prop("checked", false);
    var $newcheck = $(this).find(":checkbox");
    if (!$newcheck.prop("checked") ) {
        $newcheck.prop("checked", true);
    } else {
        $newcheck.prop("checked", false);
    }
}); 
```

[http://jsfiddle.net/VRE9n/5/](http://jsfiddle.net/VRE9n/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:07:02.263

试试这个代码：

```
$('.airportdetails').click( function() {
var $allcheck = $('.airportdetails ul li').find(":checkbox");
if (!$newcheck.prop("checked") ) {
    $(":checkbox").prop("checked", false);
    $newcheck.prop("checked", true);
} else {
    $newcheck.prop("checked", false);
}
}); 
```

# c# - 如何在 Windows 服务中启动控制台屏幕

> ID：14685203
> 
> 赞同：0
> 
> 时间：2013-02-04T10:55:58.363
> 
> 标签：c#, logging, windows-services

我使用 Tow 方法将我的应用程序（Windows 应用程序）记录到文件和控制台屏幕

```
public static void InitLogFile(string filename)
{

    FileStream fs = new FileStream(filename, FileMode.Create);
    Trace.Listeners.Add(new TextWriterTraceListener(fs));
    Trace.AutoFlush = true;

}
public static void InitConsole()
{
    Trace.Listeners.Add(new ConsoleTraceListener());
    Trace.AutoFlush = true;
} 
```

当我的 Windows 应用程序启动时，我使用此代码启动控制台屏幕

```
 [DllImport("kernel32.dll",EntryPoint = "GetStdHandle",SetLastError = true,CharSet = CharSet.Auto,
        CallingConvention = CallingConvention.StdCall)]
        private static extern IntPtr GetStdHandle(int nStdHandle);

        [DllImport("kernel32.dll",EntryPoint = "AllocConsole",SetLastError = true,CharSet = CharSet.Auto,
        CallingConvention = CallingConvention.StdCall)]
        private static extern int AllocConsole();

        private const int STD_OUTPUT_HANDLE = -11;
        private const int MY_CODE_PAGE = 437;

        void StartConsole()
        {
            AllocConsole();
            IntPtr stdHandle = GetStdHandle(STD_OUTPUT_HANDLE);
            var safeFileHandle = new SafeFileHandle(stdHandle, true);
            var fileStream = new FileStream(safeFileHandle, FileAccess.Write);
            var encoding = Encoding.GetEncoding(MY_CODE_PAGE);
            var standardOutput = new StreamWriter(fileStream, encoding) {AutoFlush = true};
            Console.SetOut(standardOutput);
        } 
```

**我的问题是：**

我将我的 Windows 应用程序转换`windows service` 为控制台日志屏幕不工作现在不出现如何让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:02:37.823

Windows 服务不像标准的 Windows 应用程序那样运行。当没有用户登录到计算机时它可能正在运行，那么控制台屏幕怎么会出现？

当作为服务运行时，您应该考虑写入 Windows 事件日志或其他一些日志记录机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:03:12.597

您看不到任何东西的原因是[Session 0 Isolation](http://blogs.technet.com/b/askperf/archive/2007/04/27/application-compatibility-session-0-isolation.aspx)。

但是，有一篇不错的 codeproject[文章](http://www.codeproject.com/Articles/35773/Subverting-Vista-UAC-in-Both-32-and-64-bit-Archite)将在用户会话中从服务运行应用程序。

只需将您的代码放入 exe 文件，然后使用链接中的项目启动 exe 文件。

# git - 如何将两个不同的目录推送到 git root 中

> ID：14685206
> 
> 赞同：1
> 
> 时间：2013-02-04T10:56:10.460
> 
> 标签：git, repository, directory

我目前正在一个包含两个根文件夹的网站上工作

```
 .root
     ./backoffice

     ./frontoffice 
```

这两个文件夹不同，但需要在同一级别，因此可以直接从网站的根目录（www.mywebsite.com/backoffice 或 www.mywebsite.com/frontoffice）访问它们

我想通过这样做将它们推送到同一个 git 存储库

*   创建存储库 mywebsite
*   在这个存储库中启动 git
*   在此存储库中添加存储库 /backoffice 和 /frontoffice
*   将所有内容推送到我的 git 仓库

问题是，如果我克隆这个 repo，我会得到一个名为 mywebsite 的文件夹，其中包含我想要的两个文件夹。而且我想直接拥有我决定执行 git clone 的两个文件夹，请问这怎么可能？

谢谢关心；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:13:40.357

您可以创建两个 git repos 而不是一个。
这样，您可以直接在需要它们的地方克隆它们。

如果您需要对它们进行分组（以便记住哪个版本`backoffice`与哪个版本的版本一起使用`frontoffice`），您可以创建第三个 repo `mywebsite`，并将前两个添加为[submodules](http://git-scm.com/book/en/Git-Tools-Submodules)。

# file-transfer - Webrtc 数据通道可以用于 Lync 和非 lync 用户之间的文件传输吗？

> ID：14685213
> 
> 赞同：0
> 
> 时间：2013-02-04T10:56:31.503
> 
> 标签：file-transfer, lync, webrtc, lync-server-2010

想象一下，如果处理信令和存在信息，如何使用 Webrtc 数据通道作为底层文件传输协议而不是 lync 自己的文件传输协议 (TFTP) 将文件从 lync 客户端（Web 应用程序）传输到非lync 客户端（启用了 webrtc 的 Web 应用程序）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:21:25.830

Lync 提供客户端可互操作的程序。通过这种方式，它可以很容易地连接到任何 Web 应用程序以获取存在信息。

```
Client interoperability example:
    Application:  http://lyncpresence.orbitone.com/
    Source: http://lyncwidget.codeplex.com/

Unified Program (includes interoperability of Lync server with all networks):
    http://technet.microsoft.com/en-us/library/gg398996.aspx
    http://technet.microsoft.com/en-in/office/ocs/bb735838.aspx
    http://technet.microsoft.com/en-us/lync/gg131938.aspx 
```

# python - 我可以在 Tornado 中包含一个扩展另一个模板的模板吗？

> ID：14685221
> 
> 赞同：7
> 
> 时间：2013-02-04T10:56:46.500
> 
> 标签：python, templates, include, tornado

在尝试做一些简单的事情时，我遇到了一个错误，比如包含一个扩展另一个模板的模板......我不确定这是一个不受支持的案例还是我做错了什么，因为它看起来很常见设想。

我设法编写的重现错误的最小代码是这样的：

## 测试.py

```
import tornado.template
loader = tornado.template.Loader(".")
templ = loader.load("t1.html") 
```

## t1.html

```
{% include "t2.html" %} 
```

## t2.html

```
{% extends "t3.html" %} 
```

## t3.html

```
{# empty #} 
```

跑步时`test.py`我在龙卷风中得到`NotImplementedError`提升`template.py`

我错过了什么还是这是一个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T13:48:29.183

啊，对不起，我太专注于缺少的块。

您所描述的内容不适用于 using `{% include %}`，但适用于我 using `{% module Template('t2.html', **args) %}`，这将在其自己的命名空间中呈现模板。模块设置由 自动完成`tornado.web.Application`，但不是使用示例中的最小模板加载器。

`{% extends %}`由于标签的实现方式，这种限制似乎存在。

# javascript - 用另一个 div jQuery 的内容替换 div 的内容

> ID：14685224
> 
> 赞同：3
> 
> 时间：2013-02-04T10:56:55.277
> 
> 标签：javascript, jquery, css

我想通过单击图像将 div 的内容替换为另一个 div 的内容（使用 css 隐藏）。但是，使用此处建议的一些方法，我似乎无法使其正常工作。

我的代码如下：

html

```
<h3>Recent Callaborations</h3>
    <div id="collaborations">
    <img class="rec1" src="http://domain.com/michaelscott/wp-content/uploads/2013/02/url.png"/>
    <div id="rec1">Some image caption that is hidden now and that will replace what is in the rec div below</div>
 </div>

<div id="rec-box" class="rec">
    this is the content that is to be replaced
</div> 
```

js

```
jQuery(document).ready(function() {
        jQuery(".rec1").click(function(event) {
            event.preventDefault() 
            jQuery('#rec-box').html($(this).next('#rec1')[0].outerHTML); 
          });
        }); 
```

css

```
#collaborations {
    width: 100%;    
    margin:0 0 10px 0;
    padding:0;
}

#collaborations img {
    display:inline-block;
}
.rec {
    background: #EDEDED;
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    padding: 10px;
}
#rec1, #rec2, #rec3, #rec4 {
    display:none;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T10:59:04.670

您只需要设置`html()`正确的`div`. 试试这个：

```
jQuery(document).ready(function() {
    jQuery(".rec1").click(function(event) {
        event.preventDefault() 
        jQuery('#rec-box').html(jQuery(this).next().html()); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T10:59:54.493

```
jQuery(document).ready(function() {
    jQuery(".rec1").click(function(event) {
        event.preventDefault() 
        jQuery('#rec-box').html(jQuery("#rec1").html()); 
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:00:13.157

[`outerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.outerHTML)您的原始代码似乎失败了，因为您使用属性（而不是[`innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)）捕获了整个隐藏元素，而不仅仅是其内容。这意味着新复制的内容仍然有`<div id='rec1'...>`，并且由于 css 规则仍然隐藏。

jQuery 的`html`方法既可以 get 也可以 set `innerHTML`，所以这里是正确的方法。

```
$(document).ready(function () {
  $(".rec1").click(function (event) {
    event.preventDefault();
    $('#rec-box').html($('#rec1').html()); //replaces with contents of #rec1
  });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T11:05:11.547

我更喜欢以下解决方案:)希望它有所帮助

**HTML**

```
<h3>Recent Callaborations</h3>
<div id="collaborations">
    <a href="#rec1" class="switchContent"><img class="rec1" src="http://cmagics.eu/michaelscott/wp-content/uploads/2013/02/url.png"/></a>
    <div id="rec1">Some image caption that is hidden now and that will replace what is in the rec div below</div>
 </div>

<div id="rec-box" class="rec">
    this is the content that is to be replaced
</div> 
```

**JavaScript**

```
$(document).ready(function() {

    switchContent   =   function(ev) {
        var el  =   $($(this).attr('href'));
        if(el.length == 1) {
            $('#rec-box').html(el.html());
        }
        ev.preventDefault();
    };

    $('.switchContent').on('click',switchContent);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-10T14:22:48.827

你需要`$("#rec").contents()`得到`.clone()`它

你需要`.append()`在`$('#rect-box')`拥有`.empty()`它之后

```
jQuery(function($) {
    $(".rec1").on('click',function(event) {
        event.preventDefault();
        $('#rec-box').empty().append(($('#rec1').contents().clone());
    });
}); 
```

# java - 在 servlet url 中放一个参数

> ID：14685227
> 
> 赞同：0
> 
> 时间：2013-02-04T10:57:06.063
> 
> 标签：java, jsp, servlets, parameter-passing

我有这样的代码和平：

```
<%
ArrayList<Utente> lista=null;
try{
    lista= (ArrayList<Utente>)request.getAttribute("lista");
}catch(Exception e){
    e.printStackTrace();
}
    if(lista!=null){                    
for(int i=0;i<lista.size();i++){                                                                                        out.print("<tr>");
                        out.print("<td>"+lista.get(i).getNome()+"</td>");
                        out.print("<td>"+lista.get(i).getCognome()+"</td>");
                        out.print("<td>"+lista.get(i).getPosizione()+"</td>");
                        out.print("<td>"+lista.get(i).getTelefono()+"</td>");
                        out.print("<td><img src='imm/view.png'>&nbsp"+
                                "<a href='' id='"+lista.get(i).getIdUtente()+"' class='view'>Vedi</a>&nbsp &nbsp" 
                                +"<img src='imm/mod.png'>&nbsp"+
                                "<a href='InfoUtente&id="+lista.get(i).getIdUtente()+"' id='"+lista.get(i).getIdUtente()+"' class='mod'>Modifica   </a>&nbsp &nbsp"+
                                 "<img src='imm/del.png'>&nbsp"+
                                "<a href='' id='"+lista.get(i).getIdUtente()+"' class='del' name='"+lista.get(i).getNome()+" "+lista.get(i).getCognome()+"'>Elimina   </a></td>");
                         }

                }
                        %> 
```

我现在要做的是在单击某个索引上的链接 Modifica 时调用 servlet InfoUtente。所以我想将 index 参数传递给 servlet。我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:03:58.407

就像你做的那样，除了查询字符串必须以 a`?`而不是 a开头`&`：

```
<a href='InfoUtente?id="+lista.get(i).getIdUtente()
                   ^-- here 
```

`&`用于分隔查询字符串内的参数。它必须是 HTML 转义的。因此，如果您要传递第二个参数，则需要生成以下 URL：

```
<a href='InfoUtente?id=" + theId + "&amp;foo=bar" 
```

请注意，从 Java 代码生成 HTML 不是一个好习惯。它会导致难以阅读、无法维护的代码。应该避免使用小脚本。您应该使用 JSTL 标记和 JSP EL 来做到这一点：

```
<c:forEach var="utente" items="${lista}">
    <tr>
        <td><c:out value="${utente.nome}"/></td>
        <td><c:out value="${utente.cognome}"/></td>
        <td><c:out value="${utente.posizione}"/></td>
        <td><c:out value="${utente.telefono}"/></td>
        <td>
           <img src="imm/view.png"/>&nbsp;
           <a href="" id="${utente.idUtente}" class="view">Vedi</a>
           &nbsp;&nbsp;
           <img src="imm/mod.png"/>&nbsp;
           <a href="<c:url value="InfoUtente">
                        <c:param name="id" value="${utente.idUtente}"/>
                    </c:url>" class="mod">Modifica</a>
           &nbsp;&nbsp;
           <img src="imm/del.png"/>&nbsp;
           <a href="" class="del" name="<c:out value="${utente.nome} ${utente.cognome}"/>">Elimina</a>
        </td>
    </tr>
</c:forEach> 
```

请注意结构如何更具可读性。另请注意

*   它是`&nbsp;`而不是`&nbsp`
*   您不能有多个具有相同 ID 的元素。这是无效的。
*   `<c:out>`允许转义特殊字符。因此，如果任何属性包含 a`<`或 a`>`或 a`&`例如，它不会导致无效的 HTML（或更糟：导致 XSS 攻击）
*   using`<c:url>`允许使用绝对路径而不是相对路径，而无需对上下文路径进行硬编码，并且它对参数进行 URL 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:01:22.777

编写一个 java 脚本函数并在特定字段更改的 onClick（或 onSubmit 等）上调用该函数。在该函数内部构建一个类似“page.html?param=value”的字符串。并将页面重定向到那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:16:56.347

我建议您使用 jsp 执行此操作，如下所示，关于您提到的问题，您必须提出？开始查询字符串而不是 &

检查下面的代码

```
<%
ArrayList<Utente> lista=null;
try{
lista= (ArrayList<Utente>)request.getAttribute("lista");
}catch(Exception e){
e.printStackTrace();
}
if(lista!=null){                    
for(Utente utente : lista){%>                                                                                               
<tr>
    <td><%=utente.getName()%></td>
    <td><%=utente.getCognome()%></td>
    <td><%=utente.getPosizione()%></td>
    <td><%=utente.getTelefono()%></td>
    <td>
          <img src='imm/view.png'>&nbsp
          <a href='' id='<%=utente.getIdUtente()%>' class='view'>Vedi</a>&nbsp &nbsp
           <img src='imm/mod.png'>&nbsp</a>
           <a href='InfoUtente?id=<%=utente.getIdUtente()%>' id='<%=utente.getIdUtente()%>' class='mod'>Modifica </a>&nbsp &nbsp
        <img src='imm/del.png'>&nbsp</a>  <!-- Here you have to put ? instead of & -->
         <a href='' id='<%=utente.getIdUtente()%>' class='del' name='<%=utente.getName()%>'>Elimina</a></td>
</tr>
<%}
}%> 
```

# php - 可以使用 PHP 在分配的领域之外应用 HTTP 基本身份验证吗？

> ID：14685230
> 
> 赞同：0
> 
> 时间：2013-02-04T10:57:21.303
> 
> 标签：php, basic-authentication, realm

我正在使用 PHP 在 Apache HTTP 服务器（2.2 版）上实现 HTTP 基本身份验证。我想用密码保护的唯一目录是我网站的主要公共 Web 根目录的子目录（例如，我们称受保护目录为“/private”，其领域为“Private”）。

如果可能的话，我希望已经在“私人”领域中通过身份验证的用户（并且*仅限*于这些用户）在网站的主页（以及任何其他网页，就此而言）查看自定义内容。

**我想知道的是，是否可以在不强制在我的域顶级的顶级登录提示的情况下执行此操作（例如[`www.jdclark.org`](http://www.jdclark.org/)，或者，就此而言，如果“私人”领域之外的任何其他 URI）？**

**编辑：**

我考虑过的一种实现上述目的的技术如下：当用户通过“/private”目录中的访问控制被认证到“Private”领域时，可以在 PHP 中设置会话 cookie。然后我可以检查这个 cookie 的存在（它可能包含会话 ID 或某种唯一的随机字符串），但是虽然我不宣称自己是 IT 安全专家，但这种方法感觉有点“骇人听闻” ,” 并且有些东西告诉我这是不安全的（例如，恶意用户使用 HTTP 标头来欺骗该 cookie 会很简单吗？）。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:30:35.160

检查是否存在 HTTP 身份验证标头并使用它来确定要显示的内容。

```
if (isset($_SERVER['PHP_AUTH_USER'])) {
    $username = $_SERVER['PHP_AUTH_USER'];
    $password = $_SERVER['PHP_AUTH_PW'];
    // validate login credentials
    $private = true; // or false if validation fails
}

if ($private) {
    // load special view
}
else {
   // load normal view
} 
```

如果用户尚未在其他地方登录，这不会提示用户登录。

如果您要在多个地方执行此操作，那么有一个可重用的类或文件提供一个函数来检查标头并验证凭据（`true`成功时返回，`false`失败时返回）而不是复制代码是有意义的.

# javascript - Javascript this 对象和绑定

> ID：14685231
> 
> 赞同：0
> 
> 时间：2013-02-04T10:57:23.517
> 
> 标签：javascript, jquery

```
new Something({
    events:{
        load: (function loopsiloop(){

            console.log(this);  // firstime this will be Something, but next call what its

            setTimeout(function(){
                console.log(this);
                $.ajax({
                    url: 'foo.htm',
                    context: this,
                    success: function( response ){
                        // do something with the response
                    },
                    error: function(){
                        // do some error handling.  you
                        // should probably adjust the timeout
                        // here.
                    },
                    complete: function(){
                        loopsiloop(); // recurse  //need to bind this here like loopsiloop().bind(this)
                    }
                });
            }.bind(this), 5000);
        }),
        click: function(){
            alert("clicked");
        }
    }

}) 
```

请仔细阅读代码并阅读注释，这里的问题是我需要`this`在`setTimeOut`函数中使用，所以我绑定`this`到`setTimeOut`，但是当我以递归方式调用函数时，值`this`将不一样

注意：-我不想将对象传递给函数并且不想使用`setIntervel`（[http://www.erichynds.com/javascript/a-recursive-settimeout-pattern/](http://www.erichynds.com/javascript/a-recursive-settimeout-pattern/)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:07:29.003

您的递归调用可以这样写：

```
complete: function() {
    loopsiloop.call(this);
} 
```

以确保第二次正确设置上下文。

也可以这样写，但不建议这样做，因为它会`.bind`在每次传递时一遍又一遍地调用：

```
complete: loopsiloop().bind(this)  // NB: no function wrap, just passes the ref 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:59:45.747

不要绑定也不要使用`this`. `var someVariable = this;`在调用之前设置`setTimeout`并让它保留在递归范围内（使用它而不是`this`在函数内部）。

# java - 是否可以从命令按钮调用此文件

> ID：14685232
> 
> 赞同：-1
> 
> 时间：2013-02-04T10:57:26.507
> 
> 标签：java, jsf, primefaces

我在调用 java 文件时遇到了一些问题，我创建了一个 java 文件

```
 @ManagedBean(name="pdfSearch")

public class pdfSearch {

    public String NewDestination;

    public void main(String[] args) throws IOException {

        File dir = new File(NewDestination);
        String[] extensions = new String[]{"pdf"};// Add more file formats here to disply, could use this later on to display to the user all the files they have uploaded
        System.out.println("Getting all .pdf files");
        List<File> files = (List<File>) FileUtils.listFiles(dir, extensions, true);
        for (File file : files) {
            System.out.println(file.getCanonicalPath());
        }

    }
} 
```

但我不能调用它从命令按钮运行

```
 <p:commandButton action="#{pdfSearch.main}" value="Search"  ajax="False"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:01:15.053

filter.finder 方法不是 JSF Action 方法。那是签名的一种方法

公共字符串方法名（）

这在股票标准的 JSF 中是行不通的。我会复习 JSF 文档中的操作方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:05:14.747

`.toLowerCase()`此外，如果您只想搜索小写文件，您还可以使用. 但这种情况并非如此。

例如，如果您想按字典顺序对它们进行排序，它只会使其将字母全部视为小写。

# ruby-on-rails - 从 Rails 应用程序发送电子邮件时，Net::SMTPUnknownError (could not get 3xx (550))

> ID：14685234
> 
> 赞同：2
> 
> 时间：2013-02-04T10:57:27.887
> 
> 标签：ruby-on-rails, actionmailer, google-apps, spf

我阅读了很多答案，我应该如何设置 SPF 记录，spf 文档，但我仍然收到此错误，我不知道为什么。

我有两台服务器，第一台服务器上有 example.com，第二台服务器在 account.example.com 下运行 rails 应用程序。

我设置 spf 记录：`"v=spf1 a mx ip4:ip-of-second-server include:_spf.google.com -all"`

我的 smtp 设置：

```
config.action_mailer.smtp_settings = {
  :address => 'smtp.gmail.com',
  :port => 587,
  :domain => 'example.com',
  :authentication => 'plain',
  :user_name => ENV['GMAIL_USERNAME'],
  :password => ENV['GMAIL_PASSWORD']
} 
```

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:32:28.903

我们在使用 gmail 帐户向我们发送通知的 Heroku 应用程序上遇到了类似的问题。不确定您的情况是否完全相同，但这就是我们恢复的方式。

当邮件数量激增时，Google 将别名标记为“超出发送限制”（请参阅[​​ http://support.google.com/a/bin/answer.py?hl=en&answer=166852](http://support.google.com/a/bin/answer.py?hl=en&answer=166852)），我们开始看到Heroku 日志中的 3xx 550 错误。

1.  我们通过 Gmail 重新启用了该帐户（请参阅[http://support.google.com/a/bin/answer.py?hl=en&answer=1071520](http://support.google.com/a/bin/answer.py?hl=en&answer=1071520)）
2.  我们为我们的域添加了 SPF 记录（请参阅[http://support.google.com/a/bin/answer.py?hl=en&answer=178723](http://support.google.com/a/bin/answer.py?hl=en&answer=178723)）

这解决了我们的 3xx 550 错误。

# database - 环大小变化时迁移 Riak 数据

> ID：14685236
> 
> 赞同：4
> 
> 时间：2013-02-04T10:57:34.530
> 
> 标签：database, nosql, riak

是微不足道的吗？我将使用 Bitcask 和文件备份（每个节点上的文件）。

假设我的初始环大小是 256，有 16 个节点。现在如果我需要扩展到 1024 的环，我可以设置 16 个配置为 1024 的环大小的新实例，将旧集群的备份文件复制到这 16​​ 个新实例中并启动 Riak 吗？Riak 能否获取这些旧数据？

我猜不是，因为一旦环大小发生变化，分区 ID 及其到各个节点的映射也可能会发生变化。但是还有什么其他方法吗？riak-backup 在这种情况下会起作用吗（当环大小发生变化时）？

我只想知道我所做的选择是否*足够*面向未来。显然，当需求急剧变化或用户群激增时，可能需要更改整个架构。但我确实希望能够在某个时候做出这些改变（对戒指尺寸）——当然需要付出一些努力，但是——这不是不可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:36:34.670

基于节点的文件备份很难将集群迁移到不同的环大小（这意味着，如果您只是备份每个节点上的 /data 目录，就像[备份 Riak](http://docs.basho.com/riak/latest/cookbooks/Backups/)中推荐的那样）。因为正如您所怀疑的，后端数据文件取决于节点和分区到给定环大小的映射。

你应该怎么做？

您必须使用以下两个工具之一来使用整个集群的“逻辑”备份：

1.  [riak-admin 备份](http://docs.basho.com/riak/latest/references/Command-Line-Tools---riak-admin/#backup)和恢复（实际上它适用于不同环大小的集群），或者
2.  [Riak 数据迁移](https://github.com/dankerrigan/riak-data-migrator)器

使用其中任何一个基本上都会将整个集群的内容转储到一个位置（因此显然要小心不要用完磁盘空间）。然后，您可以将其传输并恢复到具有不同环大小的新集群。

需要注意的事项：

*   只对非活动集群进行备份。意思是，要么关闭集群，要么至少确保在进行备份时没有新的写入发生在旧集群上。否则，如果您开始备份但仍有新的写入，则无法保证它们会进入备份的数据集。

*   在进行备份/恢复之前，请务必将 app.config 和自定义存储桶设置传输到新集群。

希望这会有所帮助。所以，这不是微不足道的（意思是，这需要一段时间并且需要大量的磁盘空间，但每当您传输大量数据时都是如此），但也不是非常复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-12T18:37:02.937

我知道这是一个老问题，但是使用 Riak 2.x 现在可以在不关闭集群的情况下动态调整环的大小：

```
riak-admin cluster resize-ring <new_size>

riak-admin cluster plan

riak-admin cluster commit 
```

注意：Riak 环的大小应始终为 2n 整数，例如 16、32、64 等。

[http://docs.basho.com/riak/latest/ops/advanced/ring-resizing/](http://docs.basho.com/riak/latest/ops/advanced/ring-resizing/)

# javascript - Jquery：在 google.com 上的按键上执行功能

> ID：14685244
> 
> 赞同：1
> 
> 时间：2013-02-04T10:58:00.990
> 
> 标签：javascript, jquery, google-chrome-extension

当按下“enter”键时，我正在尝试从 google.com 捕获搜索查询。

我正在使用以下代码来测试事件是否实际被触发：

```
$(document).keypress(function(e) {

    if(e.which == 13) {
        alert('You pressed enter!');
    }
}); 
```

当焦点在查询框中时，这不起作用，但工作正常，否则我认为这是因为自动完成 JS 没有冒泡事件？任何想法可能会发生什么，以及当焦点位于查询框上时如何触发 keypress 事件，在输入查询时就是这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:21:00.640

您可以尝试`$(window).on('keyup', function() {});`将相同的处理程序绑定到搜索输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:52:18.130

使用“hashchange”事件触发“自动完成JS”时触发

```
$(window).on("hashchange", function() {
    var query = getKeywordsFromUrl(document.location.href);
} );

function getKeywordsFromUrl(href) {
    var reStr = "google.com/search.*[&?]q=(.*?)(&.*)?$";
    var rx = new RegExp(reStr, 'm');
    if (rx.test(href)) {
        var parts = rx.exec(href);
        if (parts[1]) {
            var terms = decodeURI(parts[1]).split("+");
            return terms;
        }
    }
    return null;
} 
```

# c# - Winform 通过 TCP 消息加载图像

> ID：14685246
> 
> 赞同：0
> 
> 时间：2013-02-04T10:58:01.643
> 
> 标签：c#, winforms, tcp

我正在尝试通过 TCP 消息在我的 winform 中加载图像。

目前，我的程序设置为通过以下方式查看所需的目录。此行包含在我设置的 TCP 类中：

```
Image _imageName = Image.FromFile("C:\\Image\\"); 
```

我的 tcp 命令将发送以下字符串行：

```
IMG Cat 
```

前 3 个字母并不重要，但必须在其中。使用这个 tcp 命令，我设置了一个 switch 语句，它将根据前三个字母进行操作。因此，我的新 _image 名称行如下所示：

```
Image _imageName = Image.FromFile("C:\\Image\\" + splitString[1]); 
```

然后将_imageName 的值存储在一个名为Picture 的getter 中；

在我的 Image 类中，我将文件设置为如下所示：

```
PictureBox _picBox = new PictureBox();
_picBox.Image = Image.FromFile(_tcp.Picture); 
```

但是，我收到以下错误：

> “System.Drawing.Image.FromFile(string) 的最佳重载方法匹配有一些无效参数 参数 1: cannot convert 'System.Drawing.Image' to 'string;

突出显示的行是 _picBox.Image 行。我试过用谷歌搜索答案。将命令转换为图像和浮点数，更改我的吸气剂。但没有任何工作。

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:14:43.540

在这一行中，您试图从`Image`另一个`Image`实例中创建。

```
 PictureBox _picBox = new PictureBox();
_picBox.Image = Image.FromFile(_tcp.Picture); 
```

While`FromFile`方法接受`string`要加载的图像文件的路径。像这样修复它：

```
 PictureBox _picBox = new PictureBox();
_picBox.Image = _tcp.Picture; 
```

# asp.net - 使用表单身份验证时未加载 asp.net iis8 应用程序

> ID：14685248
> 
> 赞同：-1
> 
> 时间：2013-02-04T10:58:02.313
> 
> 标签：asp.net, forms, authentication

我正在使用表单身份验证。当我使用 Visual Studio 测试应用程序时，一切正常。但是当我在 IIS 中创建 VD 和应用程序并尝试浏览时，它只是挂断，浏览器无响应。非常紧急，请帮助授权拒绝用户 =“？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:00:25.467

您是否尝试过使用不同的浏览器浏览您的应用程序？您是如何配置 IIS 服务器的？虚拟目录的设置如何？

如果在您尝试加载应用程序时浏览器挂起，我们需要考虑几个因素：IIS 服务器设置/设置、数据库、Web 浏览器等。

# sql - 每个包含/扩展的 Django SQL 查询

> ID：14685250
> 
> 赞同：0
> 
> 时间：2013-02-04T10:58:04.887
> 
> 标签：sql, django

我正在使用Django来实现一个工程管理系统。我在某处犯了一些非常错误的事情，并且我的 SQL 查询计数在某些页面上非常高。

例如，我在一个简单的 ListView 中获得了 95 到 98 个 SQL 查询。所有的查询都是一样的：

```
SELECT * FROM "syncoor_codification" LIMIT 21 
```

它们总是返回相同的对象。我怀疑查询是由我的模型的 get_queryset() 函数触发的。

如果我使用 Django 调试工具栏，我可以看到查询是在模板内部触发的，如下所示：

```
{% extends 'syncoor/base.html' %}
{% extends 'syncoor/docs/base.html' %}
{% extends 'syncoor/docs/codifications/base.html' %}
{% include 'syncoor/js/jsp.js' %} 
```

我怎样才能摆脱这种额外的开销？

**编辑：**这是一个截图：

![针对 CSS 文件触发的查询](../Images/29727633296a4bcd0336e550ca09f264.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:29:37.820

In the picture you posted, the stack trace shows 2 things of note.

1.  The SQL calls are being performed inside a signal handler associated with django-debug-toolbar, specifically the TEMPLATE panel.

2.  The SQL call has it's limit clause set to REPR_OUTPUT_SIZE, Indicating that the template panel is trying to render a representation of a queryset.

This leads me to believe that you have passed a function or lazy object that returns a new queryset into the context at some point and it is this object that is being evaluated by the template panel. See if you can spot a bunch of Entity Objects in the context in the templates panel.

To confirm, try setting your settings like this.

```
DEBUG_TOOLBAR_PANELS = (
    'debug_toolbar.panels.version.VersionDebugPanel',
    'debug_toolbar.panels.timer.TimerDebugPanel',
    'debug_toolbar.panels.settings_vars.SettingsVarsDebugPanel',
    'debug_toolbar.panels.headers.HeaderDebugPanel',
    'debug_toolbar.panels.request_vars.RequestVarsDebugPanel',
   # 'debug_toolbar.panels.template.TemplateDebugPanel',
    'debug_toolbar.panels.sql.SQLDebugPanel',
    'debug_toolbar.panels.signals.SignalDebugPanel',
    'debug_toolbar.panels.logger.LoggingPanel',
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T11:28:58.340

看起来您的`base.html`模板中正在运行正在访问数据库的循环。这就是为什么从这些模板继承会生成查询。如果没有看到模板本身，很难说出确切的问题是什么，但这肯定是您可以找到答案的地方。

# shell - 排序命令没有按预期工作？

> ID：14685253
> 
> 赞同：1
> 
> 时间：2013-02-04T10:58:15.383
> 
> 标签：shell, sorting

我有这样的数据集

```
tack2@domain.com,2009-11-27
overflow@domain2.com,2009-11-27
overflow@domain2.com,2009-11-27 
```

当我运行命令以删除 column2 的所有相同条目时

```
sort -t ',' -k2 stars.txt -u 
```

它正在删除 column1 的条目，为了删除 column2 的重复条目，我必须输入`-k3`标志

```
sort -t ',' -k3 stars.txt -u 
```

谁能向我解释为什么会这样？为什么我必须在文件中的列中输入 +1 才能删除该列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:28:48.543

在我的系统中一切正常：

```
$ sort -t, -k1 -u 1.txt 
overflow@domain2.com,2009-11-27
tack2@domain.com,2009-11-27

$ sort -t, -k2 -u 1.txt 
tack2@domain.com,2009-11-27 
```

这可能是由于您的语言环境。你能用 LANG=C 重复命令吗？

```
$ LANG=C sort -t, -k1 -u 1.txt 
$ LANG=C sort -t, -k2 -u 1.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:28:27.460

这是典型的 awk 工作，不需要排序。我在这里添加一条短线，以防您想尝试一下。

```
awk -F, '!a[$2]++' file 
```

将完成这项工作。

# opengl-es-2.0 - 在 OpenGL ES 2.0 中禁用 mipmapping

> ID：14685260
> 
> 赞同：2
> 
> 时间：2013-02-04T10:58:25.807
> 
> 标签：opengl-es-2.0, mipmaps

我想在屏幕（OpenGL ES 2.0）上绘制一些相同的图形（具有相同的纹理）。这些数字在放大和缩小过滤器中会有所不同。以及不同状态的mipmapping。问题是：如果我在绘制任何图形时使用 mipmapping（如果我调用 glGenerateMipmap() 函数）我无法关闭 mipmapping 模式。如果我至少调用一次 glGenerateMipmap() 是否可以关闭 mipmapping 模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:58:04.010

`glGenerateMipmap`仅生成较小的 mipmap 图像（基于顶级图像）。但是，如果您不使用正确的 mipmap 过滤模式（通过`glTexParamteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_..._MIPMAP_...)`），这些 mipmap 不会用于过滤。因此，如果您不希望您的纹理 mipmap 被过滤，只需通过设置`GL_NEAREST`或`GL_LINEAR`作为缩小过滤器来禁用此特定纹理的它。同样不*调用*并不`glGenerateMipmap`意味着没有 mipmapping 正在进行。仍将使用可能的 mipmap 过滤器模式（这也是新创建的纹理的默认值），只是 mipmap 图像包含垃圾（或纹理实际上不完整，导致实现定义的行为，但通常是黑色纹理） .

同样，您不应该`glGenerateMipmap`在渲染之前调用每一帧。设置纹理的基础图像后调用一次。就像说它生成 mipmap 图像一样，它们在生成后不会消失。决定是否实际使用 mipmapping 的是纹理对象的过滤器模式。

# model - “被动”状态机 - 正确的术语？

> ID：14685267
> 
> 赞同：0
> 
> 时间：2013-02-04T10:58:52.090
> 
> 标签：model, uml, design-patterns, state-machine

我正在寻找我称之为“**被动状态机**”的逻辑结构的正确术语。

想象一下这个嵌入式设备：一些较低的程序层处理一个芯片卡阅读器，并通过确定三种状态来对用户输入做出反应：“卡入”、“卡出”、“卡错误”。在这里执行了足够的低级操作。称其为状态机。

下层将状态报告给**上层程序层**，上层程序层会对**变化**做出反应并与系统的其余部分进行通信，即发送消息、切换 LED 等。

这个*上层*的程序逻辑也可以像一个简化的状态机一样被建模（UML 2）：它有状态之间的转换，最重要的是**进入和退出动作**。状态与下层基本相同，但不是必需的（例如，可能会简化为“Card OK”、“Card not OK”）。

最大的不同是这个“上层状态机”不做任何**决定**——它只是对从下层得到的状态**做出反应并提供动作。**状态/转换/动作模型只是一种很好的方式，可以以一种安排良好的方式将逻辑可视化给读者（当然，告诉编译器要做什么......）。

或者，换一种说法：据我所知，在“真实”状态机中，*状态的*逻辑决定了要转换到的下一个状态。在“被动”变体中，一些*外部*实体做出决定，状态随之而来。结果：状态之间的*所有*转换都必须在上层中是可能的。

但这实际上是一个“有限状态*机*”（我想这里有一些活跃的东西）吗？或者有没有更好的术语来强调这个模型的被动特征？

编辑：感谢您的回复！两张图来说明。当然，两者都是状态机。但是我看到了一些质的差异：想象一下“较低级别”的 SM 直接接触硬件（阀门、传感器）并且知道它所反映的系统。例如，只有“正常”状态才能对“测试按钮”做出反应，其他状态不能。并非所有转换都是可能的。“更高级别”被认为是“愚蠢的”，并且应该只可视化/报告它从较低级别获得的输入。所以*所有*的转换都必须是可能的。状态切换逻辑对于所有状态都是相同的，并且将在状态*之外*实现（作为程序员思考）以避免冗余。它不决定，它只是执行进入/退出操作。

低等级： ![在此处输入图像描述](../Images/3feca77b15164c009928e196604d6fc7.png)

更高层次： ![在此处输入图像描述](../Images/3f85d1cfaef096186b8529c23743a629.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:28:18.693

我认为您只有一个分层状态机（状态图和 UML 确实支持）。也许如果您可以发布您的状态机图表，我们可以提供更好的意见，但听起来您的“较低级别”机器将被建模为“上层”中的（复合）状态。你有从那个状态到其他状态的转换，或者只是回到它自己？

所有 FSM 在某种意义上都是“被动的”。它们定义了一组有效状态、它们之间允许的转换以及导致转换发生的触发器（条件）以及转换期间发生的（可选）操作。你的上层状态机不遵循这个模型吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:25:20.580

从您的上一句到最后一句，我认为您误解了状态机。状态机不决定转换，但在接收到启用转换的`event`/时接受它们。`trigger`基本状态机实际上是被动的。如果一个状态没有`completion`转换，机器会一直等待，直到它收到可以将其移动到连接状态的触发器。

# ruby-on-rails - Mongoid 文档生存时间

> ID：14685271
> 
> 赞同：8
> 
> 时间：2013-02-04T10:59:02.067
> 
> 标签：ruby-on-rails, mongoid

有没有办法为文件设定时间，然后它会被销毁。我想创建每个会话临时的来宾用户，因此一周后文档会自动删除。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-19T23:56:48.033

MongoDB（2.2 及更高版本）实际上有一个特殊的索引类型，允许您在文档上指定 TTL（请参阅[http://docs.mongodb.org/manual/tutorial/expire-data/](http://docs.mongodb.org/manual/tutorial/expire-data/)）。数据库会为您删除过期的文档——不需要 cron 作业或任何东西。

Mongoid 支持此功能如下：

```
index({created_at: 1}, {expire_after_seconds: 1.week}) 
```

该`created_at`字段必须包含日期/时间信息。包含`Mongoid::Timestamps`在您的模型中以免费获得它。

更新：

如果您只想使文档的一个子集过期，那么您可以创建一个仅为该子集填充的特殊日期/时间字段。索引字段中没有值或非日期/时间值的文档永远不会过期。例如：

```
# Special date/time field to base expirations on.
field :expirable_created_at, type: Time

# TTL index on the above field.
index({expirable_created_at: 1}, {expire_after_seconds: 1.week})

# Callback to set `expirable_created_at` only for guest roles.
before_create :set_expire, if: "role == :guest"
def set_expire
  self.expirable_created_at = Time.now
  return true
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T11:04:29.403

首先，您应该添加`include Mongoid::Timestamps`到您的模型中。

其次，您应该添加一个 cron 作业或某种可以运行的工作人员（如果您不想要，也许您可​​以使用这个 gem [https://github.com/daddye/foreverb](https://github.com/daddye/foreverb)）

然后您可以轻松设置检查以查看宝石

```
if model.created_at > 1.week.ago
  model.destroy
end 
```

# ios - 可着色的引脚视图

> ID：14685273
> 
> 赞同：0
> 
> 时间：2013-02-04T10:59:05.793
> 
> 标签：ios, core-graphics, mapkit, quartz-graphics

有谁知道任何代码来绘制我们`MKPinAnnotationView`在常规中看到的引脚`UIView`？

其动机是删除我们目前与我们的应用程序捆绑在一起的数百个不同颜色的 pin 图像，以丢弃所有医学图像（常规`UIView`支持 - 非`MKMapView`）。我真正需要的只是以编程方式更改引脚颜色。

注意：我不是在谈论在`SMCalloutView`etc 中看到的标注。

这将在 MKMapView 之外使用。它们被放入普通的 UIView 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T05:32:02.493

这里有两种方法可以考虑：

1.  发送单个图钉图像 - 例如红色。使用核心图像`CIHueAdjust`过滤器将其更改为其他颜色。

2.  发送带有白色灯泡的 pin 图像和选择灯泡中像素的仅 alpha 通道蒙版图像。使用 Core Graphics 在运行时动态创建新的 pin 图像。您需要将白色灯泡引脚绘制到位图上下文中。然后使用蒙版图像设置上下文的剪贴蒙版。最后，用你想要的灯泡颜色填充上下文。

# class - 如何从其他类的 IsolatedStorage 中检索值？

> ID：14685274
> 
> 赞同：0
> 
> 时间：2013-02-04T10:59:06.340
> 
> 标签：class, windows-phone-7, boolean, isolatedstorage

我有两节课。首先是通过使用独立存储来存储来自 ToggleSwitchButton 的布尔值。

像这样...

```
 private void tglSwitch_Checked(object sender, RoutedEventArgs e)
    {
        System.IO.IsolatedStorage.IsolatedStorageSettings.ApplicationSettings["EnableLocation"] = true;  
    }
    private void tglSwitch_Unchecked(object sender, RoutedEventArgs e)
    {
        System.IO.IsolatedStorage.IsolatedStorageSettings.ApplicationSettings["EnableLocation"] = false;
    } 
```

第二类将使用第一类的布尔值来做某事。

像这样...

```
 if(booleanValFromFirst){
        //Do something
     }
     else{
        //Do something
     } 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:18:15.700

这是你想要的吗？

```
if ((bool)System.IO.IsolatedStorage.IsolatedStorageSettings.ApplicationSettings["EnableLocation"] == true) 
```

PS 我建议您为所有值创建一个类，存储在应用程序设置中并使用它。

像这样：

```
public static class SettingsManager
    {
        private static IsolatedStorageSettings appSettings;

        public static IsolatedStorageSettings AppSettings
        {
            get { return SettingsManager.appSettings; }
            set { SettingsManager.appSettings = value; }
        }

        public static void LoadSettings()
        {
            // Constructor
            if (appSettings == null)
                appSettings = IsolatedStorageSettings.ApplicationSettings;

            // Generate Keys if not created
            if (!appSettings.Contains(Constants.SomeKey))
                appSettings[Constants.SomeKey] = "Some Default value";

            // generate other keys             

       }
   } 
```

然后您可以使用该类实例

在您的启动类中将其初始化为`SettingsManager.LoadSettings();`

然后在任何课程中都可以调用它：

```
if ((bool)SettingsManager.AppSettings[Constants.SomeBoolKey])
     doSomething(); 
```

# javascript - 通过 jQuery 通知显示变量

> ID：14685275
> 
> 赞同：0
> 
> 时间：2013-02-04T10:59:06.343
> 
> 标签：javascript, jquery, notifications

在我的程序中，我使用这个[jquery](http://www.myjqueryplugins.com/jquery-plugin/jnotify)插件在 jsp 页面中显示通知。

我想要的是从 html 表中获取一个值并将其显示在通知内的文本中，我尝试如下

```
<script type="text/javascript">
            $(document).ready(function() { 
            var table = document.getElementById("item");
            for (var i = 1; i<= table.rows.length; i++) {
               val=table.rows[i].cells[1].innerText;
                    if(table.rows[i].cells[10].innerHTML >= table.rows[i].cells[15].innerHTML)
                        {
                            //alert(val);
                            jNotify(
                            ' Re-order level' ,
                        {
                            autohide:false,
                            TimeShown:3000,
                            HorizontalPosition:'center'
                        });
                        }    
                }
                });
        </script> 
```

代码中的变量`val`在消息框中得到警告，但不在`jNotify`通知中。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:06:11.033

如果我理解正确：

```
 jNotify(
                        ' Re-order level. Cell 15 value: [ '+ val +' ]',
                    {
                        autohide:false,
                        TimeShown:3000,
                        HorizontalPosition:'center'
                    }); 
```

会给你输出类似的东西

> 重新排序级别。单元格 15 值：[测试]

基本上：**+**字符允许您合并字符串。因此，您可以创建由以下两者组成的通知：文本和变量（或任何其他值）。它还强制一个类型，避免许多与对象相关的错误。如果由于某种原因你的 val 是空的，那么你会得到

> 重新排序级别。单元格 15 值：[ ]

但如果是这种情况，您需要查看选择器。因为其他一切都应该正常工作。

还可以使用[firebug net panel](https://getfirebug.com/wiki/index.php/Net_Panel)查看是否所有内容都已加载，然后您可以尝试使用[firequery](https://addons.mozilla.org/pl/firefox/addon/firequery/)和[firefinder](https://addons.mozilla.org/pl/firefox/addon/firefinder-for-firebug/)对其进行调试（这些都是非常基本的使用，因此我将跳过解释）。

# java - 如何检查另一个 Derby 实例是否已经启动？

> ID：14685278
> 
> 赞同：0
> 
> 时间：2013-02-04T10:59:29.203
> 
> 标签：java, database-connection, derby, javadb

我正在编写一些使用 Java DB（即 Apache Derby）作为数据库的 Java 应用程序。我使用以下方法连接到数据库：

```
Connection getConnection() throws SQLException {

        EmbeddedDataSource  ds =  new EmbeddedDataSource();
        ds.setDatabaseName(dbUri);
        ds.setPassword(password);
        ds.setUser(username);

        Connection conn = ds.getConnection();               
        conn.setSchema(schema); 

        return conn;            
    } 
```

这工作正常，但有时我得到以下异常：

```
java.sql.SQLException: Another instance of Derby may have already booted the database 
```

当我运行我的应用程序并且同时*SQuirreL SQL 客户端*连接到我的数据库时，就会发生这种情况。所以一切都按预期工作，但我希望能够在我的`getConnection()`方法中检查这一点。换句话说，我想检查是否有任何会话打开到我的数据库，例如，关闭它们、抛出我自己的异常或显示错误对话框。我不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T02:33:28.220

预防胜于治疗。IMO，捕获异常然后意识到它是重复的 Derby 服务器启动并不是一个理想的设计。最好是防止重复实例化。如果可能，您可以同步您的`getConnection()`方法或使其成为**单例类的一部分，或从启动/主类的****静态初始化程序块**加载嵌入式 Derby 驱动程序，该启动/主类仅由 JVM 加载一次，因此 Derby 将仅启动一次。在 main/startup 类中类似下面的东西应该可以解决问题：

```
static {
   try {
        Class.forName("org.apache.derby.jdbc.EmbeddedDriver"); 
   }
   catch(Exception e){
    .....
   }
} 
```

根据此处的链接[http://db.apache.org/derby/docs/10.3/devguide/tdevdvlp38381.html](http://db.apache.org/derby/docs/10.3/devguide/tdevdvlp38381.html)加载驱动程序应该启动 Derby 嵌入式系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:23:30.143

我将我的`getConnection()`方法修改为如下所示。它做我想要的：

```
 Connection getConnection() throws SQLException, DAOConnection {

        EmbeddedDataSource  ds =  new EmbeddedDataSource();
        ds.setDatabaseName(dbUri);
        ds.setPassword(password);
        ds.setUser(username);

        Connection conn = null;

        try {
            conn = ds.getConnection();
        } catch (SQLException e) {          

            // check if cannot connect due to "Another instance of 
                    // Derby may have already booted the database".
                    // The error code of this exception is 45000.

            if (e.getNextException().getErrorCode() ==  45000) {
                throw new DAOConnection(e.getNextException().getMessage());
            } 

            throw new SQLException(e);
        }

        conn.setSchema(schema);                         
        return conn;            
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T19:47:22.957

与其声明应用程序“抛出 SQLException”，不如使用“try”块来捕获 SQLException，然后检查异常并确定它是否是“Another instance of Derby”异常。

然后，您可以相应地从“getConnection”方法中抛出您自己的异常。

# c# - 通过分页从 AX 获取记录 [AX 2009]

> ID：14685281
> 
> 赞同：1
> 
> 时间：2013-02-04T10:59:37.003
> 
> 标签：c#, dynamics-ax-2009, business-connector

我试图一次从 AX 获取一定数量的记录。我想执行相当于：

```
SELECT * FROM (SELECT *, ROW_NUMBER() AS ROWNO
FROM TableName) 
    AS TableName WHERE ROWNO > startIndex 
AND ROWNO <= endIndex; 
```

目前，我正在从 AX 获取所有记录（使用 .net 业务连接器）：

```
axRecord.ExecuteStmt("select * from %1");
i = 0;
while(axRecord.Found)
{
 if(i<startIndex)
 {
  i++;
  continue;
 }
 // Perform operations
 i++;
 if(i==endIndex)
 {
   break;
 }
} 
```

仅使用业务连接器是否有更好的方法来做到这一点？请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:43:06.207

在 X++ 的内部 SQL 语法中，有一些关键字 ( `firstOnly, firstOnly10, firstOnly100, firstOnly1000`) 来限制将获取的行数。它可以与**RecId**字段结合使用来手动获取模拟分页的行组：

```
select firstonly10 inventTable // only fetch 10 rows
    index hint ItemIdx
    where inventTable.RecId > lastRecIdFetched // save last recId for each page
       && inventTable.itemId == itemId; 
```

您在 MSDN 上有完整的 select 语句语法参考：

[http://msdn.microsoft.com/en-us/library/aa656402.aspx](http://msdn.microsoft.com/en-us/library/aa656402.aspx)

# opengl-es - 静态不动的纹理

> ID：14685286
> 
> 赞同：0
> 
> 时间：2013-02-04T10:59:47.383
> 
> 标签：opengl-es, opengl-es-2.0, glsl

我有一个不断从右到左移动的平面，上面有重复的纹理。我的目标是在平面继续移动时使纹理保持在屏幕上的恒定位置。如何使用着色器做到这一点？或没有着色器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:06:02.030

如果您从纹理坐标中减去平面在 x,y 上的移动量（仍将其保持在 [0 1] 范围内，尽管如果您有重复纹理，则可能不是必需的），理论上应该使纹理保持静止，而飞机移动。也可能取决于飞机与相机的距离，只是玩弄它直到它看起来正确。

# c++ - C++11 中的异步构造函数

> ID：14685288
> 
> 赞同：20
> 
> 时间：2013-02-04T10:59:50.067
> 
> 标签：c++, asynchronous, c++11, constructor

有时我需要创建其构造函数需要很长时间才能执行的对象。这会导致 UI 应用程序中的响应性问题。

所以我想知道编写一个设计为异步调用的构造函数是否明智，方法是向它传递一个回调，它会在对象可用时提醒我。

下面是一个示例代码：

```
class C
{
public:
    // Standard ctor
    C()
    {
        init();
    }

    // Designed for async ctor
    C(std::function<void(void)> callback)
    {
        init();
        callback();
    }

private:
    void init() // Should be replaced by delegating costructor (not yet supported by my compiler)
    {
        std::chrono::seconds s(2);
        std::this_thread::sleep_for(s);
        std::cout << "Object created" << std::endl;
    }
};

int main(int argc, char* argv[])
{
    auto msgQueue = std::queue<char>();
    std::mutex m;
    std::condition_variable cv;
    auto notified = false;

    // Some parallel task
    auto f = []()
    {
        return 42;
    };

    // Callback to be called when the ctor ends
    auto callback = [&m,&cv,&notified,&msgQueue]()
    {
        std::cout << "The object you were waiting for is now available" << std::endl;
        // Notify that the ctor has ended
        std::unique_lock<std::mutex> _(m);
        msgQueue.push('x');
        notified = true;
        cv.notify_one();
    };

    // Start first task
    auto ans = std::async(std::launch::async, f);

    // Start second task (ctor)
    std::async(std::launch::async, [&callback](){ auto c = C(callback); });

    std::cout << "The answer is " << ans.get() << std::endl;

    // Mimic typical UI message queue
    auto done = false;
    while(!done)
    {
        std::unique_lock<std::mutex> lock(m);
        while(!notified)
        {
            cv.wait(lock);
        }
        while(!msgQueue.empty())
        {
            auto msg = msgQueue.front();
            msgQueue.pop();

            if(msg == 'x')
            {
                done = true;
            }
        }
    }

    std::cout << "Press a key to exit..." << std::endl;
    getchar();

    return 0;
} 
```

你觉得这个设计有什么缺点吗？或者你知道是否有更好的方法吗？

**编辑**

按照 JoergB 的回答的提示，我尝试编写一个工厂，负责以同步或异步方式创建对象：

```
template <typename T, typename... Args>
class FutureFactory
{
public:
    typedef std::unique_ptr<T> pT;
    typedef std::future<pT> future_pT;
    typedef std::function<void(pT)> callback_pT;

public:
    static pT create_sync(Args... params)
    {
        return pT(new T(params...));
    }

    static future_pT create_async_byFuture(Args... params)
    {
        return std::async(std::launch::async, &FutureFactory<T, Args...>::create_sync, params...);
    }

    static void create_async_byCallback(callback_pT cb, Args... params)
    {
        std::async(std::launch::async, &FutureFactory<T, Args...>::manage_async_byCallback, cb, params...);
    }

private:
    FutureFactory(){}

    static void manage_async_byCallback(callback_pT cb, Args... params)
    {
        auto ptr = FutureFactory<T, Args...>::create_sync(params...);
        cb(std::move(ptr));
    }
}; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-04T11:37:46.173

您的设计似乎非常具有侵入性。我看不出类必须知道回调的原因。

就像是：

```
future<unique_ptr<C>> constructedObject = async(launchopt, [&callback]() {
      unique_ptr<C> obj(new C());
      callback();
      return C;
}) 
```

或者干脆

```
future<unique_ptr<C>> constructedObject = async(launchopt, [&cv]() {
      unique_ptr<C> ptr(new C());
      cv.notify_all(); // or _one();
      return ptr;
}) 
```

或者只是（没有未来，但有一个带参数的回调）：

```
async(launchopt, [&callback]() {
      unique_ptr<C> ptr(new C());
      callback(ptr);
}) 
```

应该做的一样好，不是吗？这些还确保仅在构造完整对象时（从 C 派生时）调用回调。

将这些中的任何一个变成通用的 async_construct 模板不应该花费太多精力。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-04T11:09:14.620

封装你的问题。不要考虑异步构造函数，只考虑封装对象创建的异步方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T11:15:00.877

看起来您应该使用`std::future`而不是构建消息队列。 `std::future`是一个模板类，它保存一个值并且可以检索值阻塞、超时或轮询：

```
std::future<int> fut = ans;
fut.wait();
auto result = fut.get(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-04T11:19:28.263

我将建议使用线程和信号处理程序进行破解。

1) 产生一个线程来完成构造函数的任务。让我们称之为子线程。该线程将初始化您类中的值。

2）构造函数完成后，子线程使用kill系统调用向父线程发送信号。（提示：SIGUSR1）。接收到 ASYNCHRONOUS 处理程序调用的主线程将知道已创建所需的对象。

当然，您可以使用像 object-id 这样的字段来区分创建中的多个对象。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-04T17:39:11.613

我的建议...

仔细想想为什么你需要在构造函数中做这么长的操作。

我发现通常最好将对象的创建分成三个部分

a) 分配 b) 构造 c) 初始化

对于小物体，在一个“新”操作中完成所有三个操作是有意义的。但是，重量级的物体，你真的要分开舞台。弄清楚你需要多少资源并分配它。将内存中的对象构造为有效但为空的状态。

然后...对已经有效但为空的对象执行长时间加载操作。

我想我很久以前从一本书中得到了这种模式（也许是斯科特迈尔斯？）但我强烈推荐它，它解决了各种各样的问题。例如，如果您的对象是一个图形对象，您可以计算出它需要多少内存。如果失败，请尽快向用户显示错误。如果未将对象标记为尚未读取。然后您可以在屏幕上显示它，用户也可以对其进行操作等。使用异步文件加载初始化对象，当它完成时，在对象中设置一个标记为“已加载”的标志。当你的更新函数看到它被加载时，它可以绘制图形。

它也确实有助于解决诸如构造顺序之类的问题，其中对象 A 需要对象 B。你突然发现你需要在 B 之前制作 A，哦不！很简单，做一个空的 B，并将其作为引用传递，只要 A 足够聪明，知道 be 是空的，并在使用它之前等待它不是，一切都很好。

而且......不要忘记......你可以在破坏上做相反的事情。首先将您的对象标记为空，因此没有新的使用它（反初始化）释放资源，（破坏）然后释放内存（释放）

同样的好处也适用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-04T11:24:57.653

部分初始化的对象可能会导致错误或不必要的复杂代码，因为您必须检查它们是否已初始化。

我建议使用单独的线程进行 UI 和处理，然后使用消息队列在线程之间进行通信。让 UI 线程只处理 UI，这样它就会一直响应更快。

将请求创建对象的消息放入工作线程等待的队列中，然后在创建对象后，工作人员可以将消息放入 UI 队列中，指示对象现在已准备好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T23:39:13.927

这是另一种可供考虑的模式。它利用了这样一个事实，即在 future<> 上调用 wait() 不会使其无效。所以，只要你从不调用 get()，你就安全了。这种模式的权衡是，*每当*调用成员函数时，都会产生调用 wait() 的繁重开销。

```
class C
{
    future<void> ready_;

public:
    C()
    {
        ready_ = async([this]
        {
            this_thread::sleep_for(chrono::seconds(3));
            cout << "I'm ready now." << endl;
        });
    }

    // Every member function must start with ready_.wait(), even the destructor.

    ~C(){ ready_.wait(); }

    void foo()
    {
        ready_.wait();

        cout << __FUNCTION__ << endl;
    }
};

int main()
{
    C c;

    c.foo();

    return 0;
} 
```

# django - 为什么我的代码不显示验证表单错误消息？

> ID：14685290
> 
> 赞同：0
> 
> 时间：2013-02-04T11:00:03.290
> 
> 标签：django, django-forms

为什么我的代码不显示验证表单错误消息？我尝试这样的事情：

```
def index(request):
    if request.method == "POST":
        if request.POST['form-type'] == 'contact-form':
            form = AngebotForm(None, request.POST)
            if form.is_valid():
                form.save()
                msg = 'Good!'

                return render_to_response('index.html',{'msg':msg}, context_instance=RequestContext(request))

            else:
                form = AngebotForm()
        else:
            form = MessageForm(request.POST)
            if form.is_valid():
                form.save()
                msg = 'Good!'

                return render_to_response('index.html',{'msg':msg},context_instance=RequestContext(request))

            else:
                form = MessageForm()
    return render_to_response('index.html',{'a_form':AngebotForm(), 'm_form':MessageForm()},context_instance=RequestContext(request)) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:02:27.910

因为`else`部分原因是您正在重新初始化表单，这将失去当前的表单状态。

只需删除这些行：

```
else:
    form = MessageForm() 
```

最后，您的视图应如下所示：

```
def index(request):
    form = AngebotForm()
    m_form = MessageForm()
    if request.method == "POST":
        if request.POST['form-type'] == 'contact-form':
            form = AngebotForm(None, request.POST)
            if form.is_valid():
                form.save()
                msg = 'Good!'

                return render_to_response('index.html',{'msg':msg}, context_instance=RequestContext(request))
        else:
            m_form = MessageForm(request.POST)
            if m_form.is_valid():
                m_form.save()
                msg = 'Good!'

                return render_to_response('index.html',{'msg':msg},context_instance=RequestContext(request))

    return render_to_response('index.html',{'a_form':form, 'm_form':m_form},context_instance=RequestContext(request)) 
```

# sql - 如何从 SQL Server 获取显示房间一整天的日程安排的表？

> ID：14685296
> 
> 赞同：0
> 
> 时间：2013-02-04T11:00:13.563
> 
> 标签：sql, sql-server, database, sql-server-2005

我需要一个查询，给我带来一个像

```
7 AM | 7:30 AM | 8 AM   | 8:30 AM...........|6:30 PM|
----- --------- -------- ----- ............. -------
     | Booked  | Booked | Booked ...........|       | 
```

我的表名是：zUSM_RoomReservationInfo 这是表的结构和数据

```
ReservationID RoomId  StartDateTime           EndDateTime             
------------- ------- ----------------------- ----------------------- 
1             102     2013-02-01 10:00:00.000 2013-02-01 12:00:00.000 
2             201     2013-01-27 16:00:00.000 2013-01-27 17:00:00.000 
3             102     2013-02-01 14:00:00.000 2013-02-01 16:00:00.000 
```

通过提供一个日期和房间 ID 作为输入，它应该给我上面提到的表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:16:24.260

请试试：

```
DECLARE @RoomID NVARCHAR(10), @DtParam NVARCHAR(20), @dt1 DATETIME, @dt2 DATETIME, @Col NVARCHAR(MAX), @Query NVARCHAR(MAX)
select @RoomID='102', @DtParam='01-Feb-2013', @dt1='07:00', @dt2='17:00', @Col='', @Query=''

CREATE TABLE #table (DT DATETIME)

while @dt1<=@dt2
begin
    SET @Col=@Col+'['+CONVERT(CHAR(5), @dt1, 108)+'],'
    insert into #table values (@dt1)
    SET @dt1=dateadd(minute, 30, @dt1)
end

select @Col=LEFT(@Col, LEN(@Col) -1)

set @Query='select '+@Col+' From(
select DT, ReservationID From #table t1 left outer join (select * from zUSM_RoomReservationInfo
where RoomID='+@RoomID+' AND DATEADD(dd, 0, DATEDIFF(dd, 0, StartDateTime))=CONVERT(DATETIME, '''+@DtParam+'''))t2 on t1.DT
between CONVERT(CHAR(5), StartDateTime, 108) and CONVERT(CHAR(5), EndDateTime, 108)

)x pivot (count(ReservationID) for DT IN ('+  @Col+'))PIV'
exec (@Query)

drop table #table 
```

# f# - .fsproj 文件中的 AllowCrossTargeting

> ID：14685297
> 
> 赞同：5
> 
> 时间：2013-02-04T11:00:15.310
> 
> 标签：f#

有什么效果

```
<AllowCrossTargeting>true</AllowCrossTargeting> 
```

在 fsproj 文件中？我找不到任何关于它的文档

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:29:40.843

如果您在 F# 3.0 源中搜索`AllowCrossTargeting`，它只会出现在一个地方：[`fsharp/src/fsharp/Salsa/salsa.fs, line 686`](https://github.com/fsharp/fsharp/blob/master/src/fsharp/Salsa/salsa.fs#L686).

由于就 F# 而言，它似乎是一个只写属性，我猜测它与允许 F# 编译器在一个版本的 .NET 框架上运行同时针对另一个版本有关。除此之外，在 Google 中搜索属性名称只会显示`.fsproj`文件——所以它现在根本`AllowCrossTargeting`没有任何作用。

# ruby-on-rails - 使用 devise 和 Sunspot 时如何仅获取已确认的用户？

> ID：14685298
> 
> 赞同：4
> 
> 时间：2013-02-04T11:00:19.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我现在正在获取所有用户。
但是，我想排除未经确认的用户。
他们的`confirmed_at`属性为零。

我怎样才能？

```
@search = User.search do  
    fulltext params[:search]
    paginate :page => params[:page], :per_page => 10
end  

@users = @search.results 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T11:21:08.240

首先为您的用户模型添加一个范围：

```
scope :confirmed, where("confirmed_at IS NOT NULL") 
```

然后你只需要在搜索之前添加范围

```
@search = User.confirmed.search do  
  fulltext params[:search]
  paginate :page => params[:page], :per_page => 10
end 
```

**编辑：**

确实，经过测试，上面的解决方案似乎不起作用。范围似乎被忽略了。还有另一种解决方案：

在您的`User`模型中，您可能有这样的方法：

```
searchable do 
  text :lastname, :firstname
  ...
end 
```

您必须添加一个条件`searchable`：

```
searchable if: proc { |user| user.confirmed? } do 
  text :lastname, :firstname
  ...
end 
```

**编辑2：**

如果有时您想要确认的用户，有时是所有用户，还有另一种方法，但您也需要修改您的模型。

在您`User`的模型中：

```
searchable do 
  text :lastname, :firstname
  boolean :confirmed do
    confirmed_at != nil
  end
  ...
end 
```

然后在你的控制器中

```
@search = User.search do  
  fulltext params[:search]
  with(:confirmed, true) # true if you want confirmed users, false for unconfirmed and if you want all users you don't write this line
  paginate :page => params[:page], :per_page => 10
end 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-18T03:33:02.453

我用`User.where.not(confirmed_at: nil)`. 您可以在模型中创建范围以使其更容易：

```
class User < ApplicationRecord

  scope :confirmed, -> { where.not(confirmed_at: nil) }

end 
```

然后你可以使用`User.confirmed`

# html - 什么是 mp_trans_seo_url？

> ID：14685305
> 
> 赞同：1
> 
> 时间：2013-02-04T11:00:32.173
> 
> 标签：html, seo

我在查看 asos.com 时遇到了这个问题，我做了一些谷歌搜索，试图找出它是什么，但似乎没有任何信息。我只是想知道是否有人对他们为什么使用它有更好的想法？

这就是它在他们的代码中的显示方式：

```
<div class="title">
        <h1><span id="ctl00_ContentMainPage_ctlSeparateProduct_lblProductTitle"
class="product_title"><!--mp_trans_seo_url_title_start-->ASOS Canvas Backpacks
with Contrast Pockets<!--mp_trans_seo_url_title_end--></span></h1>
        <span><meta itemprop="name" content='ASOS Canvas Backpacks with Contrast
Pockets | ASOS'/></span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:35:39.813

它只是一个**HTML**注释；可能由像 PHP（或其他）这样的服务器端语言生成，指示变量的结果（在本例中为页面标题）的放置位置。

在他们选择的系统中，该变量可能被称为“mp_trans_seo_url_title”，并且那里的**HTML**注释指示它在哪里“开始”和“结束”它的输出。

就这些。这里没有任何可疑或不寻常的地方。

# bash - 从时间中删除秒数（awk，sed）

> ID：14685306
> 
> 赞同：3
> 
> 时间：2013-02-04T11:00:33.543
> 
> 标签：bash, unix, sed, awk, gnu

我有一个这样的文件：

```
XX1, 1.1,24.08.1994 13:00:00, 111,112,113
XX2, 1.2,24.08.1994 13:30:00, 121,122,123
XX3, NaN,22.08.1995 15:00,    131,132,133 
```

所以时间格式不一致。有些行的时间类似于 hh:mm:ss，有些行的时间格式为 hh:mm。我想删除秒并获得这样的文件：

```
XX1, 1.1,24.08.1994 13:00, 111,112,113
XX2, 1.2,24.08.1994 13:30, 121,122,123
XX3, NaN,22.08.1995 15:00, 131,132,133 
```

到目前为止我尝试的是

```
#!/bin/bash
sed 's@,\(..\):\(..\):\(..\) @,\1:\2 @' < time_fault > ./time_corrected 
```

和

```
#!/usr/bin/awk -f
BEGIN { RS="," ; FS=":"; ORS=","}
{ getline str
gsub(/*..:..:..*/,  $1":"$2 str) > time_corrected } 
```

但两者都没有工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T11:12:27.173

你几乎明白了。

```
sed 's@\(..\):\(..\):\(..\)@\1:\2@' 
```

给

```
XX1, 1.1,24.08.1994 13:00, 111,112,113
XX2, 1.2,24.08.1994 13:30, 121,122,123
XX3, NaN,22.08.1995 15:00,    131,132,133 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:07:04.230

看看这个，如果它适合你：

根据您的示例输入，这应该有效：

```
awk -F, 'split($0,a,":")>2{gsub(/:[0-9][0-9],/,",")}1' file 
```

测试

```
kent$  echo "XX1, 1.1,24.08.1994 13:00:00, 111,112,113
XX2, 1.2,24.08.1994 13:30:00, 121,122,123
XX3, NaN,22.08.1995 15:00,    131,132,133"|awk -F, 'split($0,a,":")>2{gsub(/:[0-9][0-9],/,",")}1'
XX1, 1.1,24.08.1994 13:00, 111,112,113
XX2, 1.2,24.08.1994 13:30, 121,122,123
XX3, NaN,22.08.1995 15:00,    131,132,133 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T11:13:22.343

只`sed`需要一个捕获组：

```
sed -re 's/([0-9]{2}:[0-9]{2}):[0-9]{2},/\1,/' -e 's/, +/, /g' file
XX1, 1.1,24.08.1994 13:00, 111,112,113
XX2, 1.2,24.08.1994 13:30, 121,122,123
XX3, NaN,22.08.1995 15:00, 131,132,133 
```

也许`awk`更好.. 如果需要，仅在第三个字段上应用替换，否则从第四个字段中删除额外的空格：

```
$ awk '{if ($3~/([0-9]{2}:){2}/) sub(/:[0-9]{2},/,",",$3);else sub(/ */,"",$4)}1'
XX1, 1.1,24.08.1994 13:00, 111,112,113
XX2, 1.2,24.08.1994 13:30, 121,122,123
XX3, NaN,22.08.1995 15:00, 131,132,133 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T11:14:02.190

我稍微调整了你的`sed`命令：

```
$ sed 's/ \(..:..\)[^,]*/ \1/g' file
XX1, 1.1,24.08.1994 13:00, 111,112,113
XX2, 1.2,24.08.1994 13:30, 121,122,123
XX3, NaN,22.08.1995 15:00,    131,132,133 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-04T11:41:58.107

单程：

```
 awk -F, '{$3=substr($3,0,16);}1' OFS=, file 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-04T11:25:08.263

```
awk -F, '{OFS=","}length($3)>16{$3=substr($3,0,16)}1' your_file 
```

测试如下：

```
> cat temp
XX1, 1.1,24.08.1994 13:00:00, 111,112,113
XX2, 1.2,24.08.1994 13:30:00, 121,122,123
XX3, NaN,22.08.1995 15:00,    131,132,133

> awk -F, '{OFS=","}length($3)>17{$3=substr($3,0,16)}1' temp
XX1, 1.1,24.08.1994 13:00, 111,112,113
XX2, 1.2,24.08.1994 13:30, 121,122,123
XX3, NaN,22.08.1995 15:00,    131,132,133 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-25T13:23:32.763

回答非常具体的标题：“从时间中删除秒数（awk，sed）”

删除`:..`模式的第二次出现对我有用：

是：13:06:20

`sed 's/:../ /2'`

现在：13:06

# image-processing - OpenCV 入侵检测

> ID：14685308
> 
> 赞同：5
> 
> 时间：2013-02-04T11:00:39.360
> 
> 标签：image-processing, opencv, differentiation

对于我的一个项目，我需要使用 OpenCV 处理图像差异。目标是检测区域中的入侵。

为了更清楚一点，这里是输入和输出：

输入：

*   参考图像
*   从大致相同的角度拍摄的第二张图像（可能是误差范围）

输出：

*   检测场景中的新对象。

奖金：

*   识别那些对象。

对我来说，最困难的部分是消除微小的差异（亮度、相机位置边距误差、树木的移动......）

我已经阅读了很多关于 OpenCV 图像处理（减法、腐蚀、阈值、SIFT、SURF...）的内容，并取得了一些不错的结果。

我想要的是您认为最好的步骤列表（人类，汽车......），以及执行每个步骤的算法。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:04:08.480

Track-by-Detect，人类跟踪器：

1.  您应用[Hog 检测器](http://docs.opencv.org/modules/gpu/doc/object_detection.html)来检测人类。
2.  您在前景蒙版上绘制一个相应的[矩形](http://docs.opencv.org/doc/tutorials/core/basic_geometric_drawing/basic_geometric_drawing.html)作为前景区域。
3.  您将此掩码传递给“ [OpenCV Video Surveillance / Blob Tracker Facility”](http://opencv.willowgarage.com/wiki/VideoSurveillance)

现在，您可以根据经过的人的 blob.{x,y} 值将其分组到公共/受限区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T04:11:26.223

去年我不得不处理这个问题。我建议使用一种自适应背景-前景估计算法来生成前景蒙版。

最重要的是，您添加一个斑点检测器和跟踪器，然后计算斑点和您的入侵区域之间是否发生交叉。

Opencv 在遗留代码中包含所有这些示例。当然，如果您愿意，您也可以使用您自己的或其他版本的这些。

链接： http: [//opencv.willowgarage.com/wiki/VideoSurveillance](http://opencv.willowgarage.com/wiki/VideoSurveillance) [http://experienceopencv.blogspot.gr/2011/03/blob-tracking-video-surveillance-demo.html](http://experienceopencv.blogspot.gr/2011/03/blob-tracking-video-surveillance-demo.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T18:24:50.937

如果相机是静态的，我肯定会从运行平均背景减法开始。然后您可以使用 findContours() 来查找入侵对象的位置和大小。如果您想检测在场景中四处走动的人，我建议您使用内置的 haar 分类器：

[http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html#cascade-classifier](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html#cascade-classifier)

您只需将 xml 替换为上半身分类器。

# android - 如何使用jobb工具Android创建OBB文件

> ID：14685315
> 
> 赞同：5
> 
> 时间：2013-02-04T11:00:50.993
> 
> 标签：android, apk-expansion-files

我的应用程序已经增长到超过 50mb，所以我现在需要使用扩展文件。在搜索时，我知道有不同的文件可以用作扩展文件，例如 zip、pdf 等。我正在尝试将我的数据放入 .obb 文件中，但我不知道如何创建这些文件并将这些文件中的数据。

**首先更新**
**：**

我发现该`jobb`工具用于创建 obb 文件。但我很困惑这个`$ jobb -d /temp/assets/ -o my-app-assets.obb -k secret-key -pn com.my.app.package -pv 11`命令是如何运行的。
我试图`($ jobb -d /temp/assets/ -o my-app-assets.obb -k secret-key -pn com.my.app.package -pv 11`在 cmd 上运行它，但我的 cmd 说 jobb 不能识别为内部或外部命令。

**第二：** 我可以在这些obb文件中放入哪些类型的文件？我在考虑布局，可绘制文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T13:16:54.983

> 我的 cmd 说 jobb 不能识别为内部或外部命令

将 /tools 添加到您的路径或代替`jobb`使用`path/to/sdk/tools/jobb.bat`

> 这些obb文件里放的是什么类型的文件

大的。比如drawables、sounds等。然后，例如，您可以使用此代码将drawable文件放入ImageView：

```
imageView.setImageBitmap(
    BitmapFactory.decodeFile(
        sm.getMountedObbPath("/path/to/obb/file") + 
        "path/to/file/in/obb.png") 
```

或者，播放声音：

```
mp.setDataSource(AcItem.this, 
    Uri.fromFile(new File(
        sm.getMountedObbPath("/path/to/obb/file") + 
        "path/to/file/in/obb.png"));
mp.prepare();
mp.start(); 
```

正如我所承诺的，GitHub 链接到我的 obb 管理器类：[https](https://github.com/uncleLem/AndroidUtils/blob/master/src/io/github/unclelem/androidutils/utils/ObbExpansionsManager.java) ://github.com/uncleLem/AndroidUtils/blob/master/src/io/github/unclelem/androidutils/utils/ObbExpansionsManager.java 我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-08T09:40:15.353

只需在命令提示符下写 Like this 并按 enter

```
C:\>C:\Development\Android\adt-bundle-windows-x86-20140321\sdk\tools\jobb -d C:\
Myworkspace\ImageTargets\assets\ -o Imagetargets.obb -k globe -pn com.ib.globeap
p.activity -pv 200 -v 
```

# c# - Windows Phone 如何使用 JSON.NET 将 json 响应与变量名绑定？

> ID：14685320
> 
> 赞同：0
> 
> 时间：2013-02-04T11:01:12.210
> 
> 标签：c#, silverlight, windows-phone-7, json.net

我在反序列化此 JSON 响应时遇到问题

```
{
  "posts": {
    "Pippo": {
      "text": "text1",
      "link": "link1"
    },
    "Pluto": {
      "text": "text2",
      "link": "link2"
    }
  }
} 
```

我正在使用这个模型

```
public class postModel
{
    public string text { get; set; }
    public string link { get; set; }
}

public class postFields
{
    public postModel post { get; set; }
}

public class RootObject
{
    public Dictionary<string, postFields> posts { get; set; }
} 
```

然后我以这种方式反序列化

```
var deserialized = JsonConvert.DeserializeObject<RootObject>(json); 
```

然后我停下来。我无法读取值，因为我尝试了这个

```
foreach (var value in deserialized)
            {
                new postModel
                {
                    text = value.Value.post.text,
                    link = value.Value.post.link
                };
            } 
```

然后我得到 NullReferenceException，因为 JSON 属性的名称不是“post”，而是 Pippo、Pluto 等。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:11:42.083

这个 json 是不可解析的，因为它不能被转换成任何具有这种“动态”键而不是键值对的类型。您应该使用的是[JObject](https://stackoverflow.com/questions/2246694/how-to-convert-json-object-to-custom-c-sharp-object)。

快速示例：

```
JObject j = JObject.Parse(json);

var lst = j["posts"][0].Select(jp => ((JProperty)jp).Name).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:48:07.623

您的项目中需要以下类：

```
namespace Newtonsoft.Json
{
    public class DictionaryConverter<tKey, tValue>: JsonConverter
    {
        public override bool CanRead { get { return true; } }
        public override bool CanWrite { get { return true; } }

        public override bool CanConvert( Type objectType )
        {
            if( !objectType.IsGenericType )
                return false;
            if( objectType.GetGenericTypeDefinition() != typeof( Dictionary<,> ) )
                return false;
            Type[] argTypes = objectType.GetGenericArguments();
            if( argTypes.Length != 2 || argTypes[ 0 ] != typeof( tKey ) || argTypes[ 1 ] != typeof( tValue ) )
                return false;
            return true;
        }

        public override object ReadJson( JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer )
        {
            do
            {
                if( JsonToken.StartObject != reader.TokenType )
                    break;
                Dictionary<tKey, tValue> res = new Dictionary<tKey, tValue>();

                while( reader.Read() )
                {
                    if( JsonToken.EndObject == reader.TokenType )
                        return res;
                    if( JsonToken.PropertyName == reader.TokenType )
                    {
                        tKey key = (tKey)Convert.ChangeType( reader.Value, typeof( tKey ), null );
                        if( !reader.Read() )
                            break;
                        tValue val = serializer.Deserialize<tValue>( reader );
                        res[ key ] = val;
                    }
                }
            }
            while( false );
            throw new Exception( "unexpected JSON" );
        }

        public override void WriteJson( JsonWriter writer, object value, JsonSerializer serializer )
        {
            if( null == value )
                return;
            Dictionary<tKey, tValue> src = value as Dictionary<tKey, tValue>;
            if( null == src )
                throw new Exception( "Expected Dictionary<{0}, {1}>".FormatWith( typeof( tKey ).Name, typeof( tValue ).Name ) );

            writer.WriteStartObject();
            foreach (var kvp in src)
            {
                string strKey = (string)Convert.ChangeType( kvp.Key, typeof( string ), null );
                writer.WritePropertyName( strKey );
                serializer.Serialize( writer, kvp.Value );
            }
            writer.WriteEndObject();
        }
    }
} 
```

然后，您通过以下方式修改您的 RootObject：

```
public class RootObject
{
    [ JsonProperty, JsonConverter( typeof( DictionaryConverter<string, postModel> ) ) ]
    public Dictionary<string, postModel> posts;
} 
```

然后一切都会按您的预期进行。

**更新：**这是我忘记的实用方法：

```
public static class SharedUtils
{
    public static string FormatWith( this string format, params object[] args )
    {
        if( format == null )
            throw new ArgumentNullException( "format" );
        return String.Format( format, args );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:06:05.233

感谢你们俩; 我这样解决了：

```
var main = JObject.Parse(json);

        foreach (var mainRoute in main.Properties()) // this is "posts"
        {
            foreach (var subRoute in mainRoute.Values<JObject>().SelectMany(x => x.Properties())) // this is "Pippo", "Pluto"
            {
                var deserialized = JsonConvert.DeserializeObject<postModel>(subRoute.Value.ToString());

                new postModel
                {
                    text = deserialized.text,
                    link = deserialized.link
                };
            }
        } 
```

# android - 更新列表视图中的进度条

> ID：14685322
> 
> 赞同：6
> 
> 时间：2013-02-04T11:01:16.660
> 
> 标签：android, android-asynctask, android-progressbar

我有一个场景，在我的聊天应用程序中我想发送照片，照片发送需要时间。我附加了一个进度条（水平）来显示在我的应用程序中发送照片的进度。但我无法更新进度条，因为它是自定义列表视图的项目。

这是我为进度条设置进度的异步任务，但我无法获得它。

```
 class SendPhotoToFriend extends AsyncTask<String, String, String>{

        String receiver,path = "";

        public SendPhotoToFriend(String path,String receiver) {
            // TODO Auto-generated constructor stub

            this.path = path;
            this.receiver = receiver;

        }

        @Override
        protected String doInBackground(String... arg0) {
            // TODO Auto-generated method stub

            ServiceDiscoveryManager sdm = ServiceDiscoveryManager
            .getInstanceFor(connection);

            if (sdm == null)
                sdm = new ServiceDiscoveryManager(connection);

            sdm.addFeature("http://jabber.org/protocol/disco#info");
            sdm.addFeature("jabber:iq:privacy");

            // Create the file transfer manager
            FileTransferManager manager = new FileTransferManager(
                    connection);
            FileTransferNegotiator.setServiceEnabled(connection, true);

            // Create the outgoing file transfer
            OutgoingFileTransfer transfer = manager
            .createOutgoingFileTransfer(receiver + "/Smack");

            System.out.println("Receiver of the file is "+receiver+"/smack");

            Log.i("transfere file", "outgoingfiletransfer is created");

            try {
                long total = 0;

                OutgoingFileTransfer.setResponseTimeout(30000);
                transfer.sendFile(new File(path), "Description");
                Log.i("transfere file", "sending file");
                while (!transfer.isDone()) {
                    //Thread.sleep(1000);

                    total+=transfer.getProgress();

                    publishProgress(""+(int)((total*100)/transfer.getFileSize()));

                    Log.i("transfere file", "sending file status "
                            + transfer.getStatus() + "progress: "
                            + transfer.getProgress());
                    if (transfer.getStatus() == org.jivesoftware.smackx.filetransfer.FileTransfer.Status.error) {
                        Log.i("transfere file", "Errorrr isss: "
                                + transfer.getError()+transfer.getPeer());
                        transfer.cancel();
                        break;
                    }
                }

            } catch (XMPPException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            Log.i("transfere file", "sending file done");

            return null;
        }

        @Override
        protected void onProgressUpdate(final String... values) {
            // TODO Auto-generated method stub
            super.onProgressUpdate(values);

            LayoutInflater inflater = (LayoutInflater)getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
            final View view =inflater.inflate(R.layout.user_chat_send_chat, null); 
            ProgressBar p_Bar = (ProgressBar)view.findViewById(R.id.progress_bar_image);
            p_Bar.setProgress(Integer.parseInt(values[0]));

            customAdapter1.notifyDataSetChanged();

        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
        }
    } 
```

进度条是自定义列表视图的视图，我想在运行时更新它。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T05:09:09.453

您在 onProgress 回调中膨胀 ProgressBar。这是绝对错误的。ProgressBar 应该在 AsyncTask 开始之前添加到视图中（膨胀和添加），然后在 AsyncTask 构造函数中将其变为可见。您还应该在 AsyncTask 中存储对 ProgressBar 的引用（或以其他方式在非静态内部类的范围内）。

最后你的 AsyncTask 应该是这样的（假设 ProgressBar 已经附加到视图）：

```
class SendPhotoToFriend extends AsyncTask<String, String, String> {

    String receiver,path = "";

    ProgressBar progress;

    public SendPhotoToFriend(String path, String receiver, ProgressBar progress) {
        this.path = path;
        this.receiver = receiver;
        this.progress = progress;
        this.progress.setVisibility(View.Visible); 
    }

    @Override
    protected String doInBackground(String... arg0) {
        // You're application logic...
        // ...
        publishProgress((int)((total*100)/transfer.getFileSize()));
        // ...
    }

    @Override
    protected void onProgressUpdate(final Integer... values) {
        this.progress.setProgress(values[0]); 
    }
} 
```

此外，您不需要（也不应该）调用`adapter.notifiyDataSetChanged()`onProgres-Callback。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:17:43.247

我想每个列表项视图都有一个进度条，如果是这种情况，您可以使用 getView 获取该位置的视图，然后调用：

```
 View view = customAdapter1.getView(position, convertView, parent);
        ProgressBar p_Bar = (ProgressBar)view.findViewById(R.id.progress_bar_image);
        p_Bar.setProgress(Integer.parseInt(values[0])); 
```

无需调用 customAdapter1.notifyDataSetChanged();

# c# - 实体框架中的重试策略

> ID：14685324
> 
> 赞同：1
> 
> 时间：2013-02-04T11:01:23.747
> 
> 标签：c#, sql-server, entity-framework

我想在我正在处理的项目中实施重试策略，该项目使用连接到 MSSQL 2012 的实体框架。我可以执行以下操作：

```
using (var model = new MyModel())
{
    for (var i = 0; i < 3; i++)
    {
        try
        {
            model.MyEntities.Where(x => x.Index < 1000);
            break;
        }
        catch (Exception ex)
        {
        }
    }
} 
```

但是在我想使用模型进行查询的任何地方都这样做非常麻烦。无论如何要在模型本身中实现这一点，这样我就不必担心了？

我想到的一种方法是使用 inherit`DbCommand`和 override`ExecuteScalar()`等`ExecuteNonQuery()`，以便他们重复调用基类的方法一定次数，但想知道是否有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:59:42.297

目前不可能“使用模型”。您必须手动实现它。如果您正在使用类似的东西，可以在 ie 存储库或某些“数据访问适配器”中。或者，如果您想成为硬核 :)，您当然可以创建自己的 IDbConnection、IDbCommand 等。

# eclipse - 将项目导入 Eclipse 时禁用 Maven 项目构建器

> ID：14685327
> 
> 赞同：3
> 
> 时间：2013-02-04T11:01:31.347
> 
> 标签：eclipse, maven, build, eclipse-plugin

每次我将一个新项目导入 Eclipse 时，我都会执行以下操作：

*   取消选中“解决工作区项目”
*   停用 maven buider (Project's **Properties -> Builders menu** )

我的目标是每次保存 POM 或修改 java 文件以及依赖项目上的任何其他构建时都避免完整构建。我还想保留我的自动 java builder。

同样，有一个全局选项可以离线工作（在**Window -> preferences -> Maven**中），有没有办法在每次导入项目时自动删除这些选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:00:51.343

您至少可以取消选中“ ”对话框`Resolve Workspace projects`中的高级“ ”选项。`Import Maven Projects`我不知道在不更改全局设置的情况下避免在导入后构建项目的任何可能性（如`Project -> Build Automatically`@gOVIL 所建议的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-24T14:51:32.953

右键单击项目 > 属性 > 构建器 > 取消选中 Maven 项目构建器。

[![在此处输入图像描述](../Images/dde80b7990a852a36162dbfed2b8cde7.png)](https://i.stack.imgur.com/4H6vf.png)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-04T11:24:54.970

尝试取消选中

项目 -> 自动构建。

# jquery - Jquery UI，对话框不起作用

> ID：14685329
> 
> 赞同：0
> 
> 时间：2013-02-04T11:01:39.067
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

测试 Jquery UI 并且不喜欢它。

这个[http://jsfiddle.net/FhjQy/4/](http://jsfiddle.net/FhjQy/4/)是复制、粘贴和（删除个人详细信息）。

请告诉我为什么单击拒绝图像时页面只是闪烁。这是为了调出我的模态表单对话框！！！

HTML：

```
<div id="comments_dialog" title="Reject an event">
        <form name="commentsForm" action="#" method="POST">
            <p>The Event: <span id="eventName"></span> is being rejected, you have the
                option to give a reason or any comments in the box below.</p>
            <p class="ui-icon ui-icon-alert"
            id="errorComment"></p>
            <textarea name="comments" id="comments" size="30"></textarea>
            <p>The Event: <span id="eventName"></span> will be removed from the system
                and will not go on to the calendar, any comments wiil be emailed to the
                event author.
                <br/>Click the button below.</p>
        </form>
    </div>
<TABLE WIDTH="100%" BORDER="1" CELLSPACING="0" CELLPADDING="4" DWCOPYTYPE="CopyTableRow"
BORDERCOLOR="#000066">
    <tr class="tableHeading">
        <td>Actions</td>
        <td>Event Name</td>
        <td>Event Description</td>
        <td>Date & Time</td>
    </tr>
    <tr class="tableRow<?=$num?>" class="1234">
        <td>
            <form name="actionTaken" class="1234" action="#" method="POST">
                <input type="hidden" name="submit_id" id="submit_id" value="1234" />
                <input name="approve" id="approve" value="Y" type="image" src="/control/images/tick-green.gif"
                />Approve
                <br/>
                <input name="edit" id="edit" value="Y" type="image" src="/control/images/edit.gif"
                />Edit & Approve
                <br/>
                <input name="reject" id="reject" value="Y" type="image" src="/control/images/cross-small.gif"
                />Reject & Comment</form>
        </td>
        <td class="event_name">Event Name</td>
        <td>Event Description</td>
        <td>Date Time</td>
    </tr>
</TABLE> 
```

JS：

```
$("#comments_dialog").dialog({
    autoOpen: false,
    resizable: true,
    modal: true,
    buttons: {
        "Confirm Event Rejection": function () {
            var comments = $("#comments").val();

            if ((comments !== "") || (comments !== undefined)) {

                var dataString = 'submit_id=' + submit_id + '&reject=' + reject + '&comments=' + comments;

                $.ajax({
                    type: "POST",
                    url: "/echo/html/",
                    data: dataString,
                    success: function (response) {
                        if (response == "rejectSuccess") {
                            $(this).dialog("close");
                            $("tr#" + submit_id).fadeOut(3000);

                            $("#blue").after("<div id=\"green\">The event has been rejected and deleted from the system. Your comments have been sent to the person that submitted the event.</div>");
                            window.setTimeout(hideNotify, 60000);
                            $("tr#" + submit_id).remove();
                        } else {
                            $("#errorComment").text("There was an error, please refresh the page and try again.");
                        }
                    },
                    error: function () {
                        $("#errorComment").text("There was an error, please refresh the page and try again.");
                    }
                });
                return false;
            } else {
                $('#errorComment').text("You need to give a feedback for this rejection!");
            }

        }
    },
    closeOnEscape: false
});

$("input#reject").click(function () {
        submit_id = $(this).parent().attr("class");
        reject = $(this).val();
        var event_name = $(this).parent().parent().find(".event_name").html();

        $("#eventName").text(event_name);

        $("#comments_dialog").dialog("open");
    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:06:37.487

似乎`input#reject`是在一个循环中（逐行）。使用类而不是 id ： id 标识 DOM 中的唯一元素。然后尝试`$('input.reject).click...`

# plot - 将 eps 转换为 pdf 时缺少标签

> ID：14685330
> 
> 赞同：0
> 
> 时间：2013-02-04T11:01:45.023
> 
> 标签：plot, export, pdf-generation, gnuplot, eps

我使用以下`gnuplot`脚本来绘制数据文件

```
reset
unset key
set size 1,1

set xrange [-10.1:11]
set yrange [-45:45]

set xlabel 'x'
set lmargin 6
set label 1 "~x{0.7.}" font "Helvetica, 20" at graph -0.1, graph 0.5

set xtics 2
set ytics 15

set mxtics 5
set mytics 5

plot "pss_data.dat" u 1:2 w dots lc rgb 'black'

set term postscript eps enhanced "Helvetica" 20 size 7in, 5in
set output 'plot.eps'
replot

reset
set terminal windows

quit 
```

导出的 .eps 文件如下。

![在此处输入图像描述](../Images/ff8cb8f16ddab4ac27d27dd64e38907d.png)

好吧，实际上这是使用 Adob​​e Acrobat XI 进行转换的相应 .pdf 文件。但是，.pdf 输出不仅包含绘图，还包含其上方所有不需要的黑色区域！为了摆脱白色区域，我使用了命令行

```
epstopdf plot.eps 
```

输出如下

![在此处输入图像描述](../Images/149300653500aa7f128698918b7c0490.png)

现在，白色区域已被删除，但 y 轴的标签也不见了！

有任何想法吗？我想在 .pdf 文件中只包含绘图（没有上面的白色区域），但标签位于 y 轴。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:24:25.380

您的边界框可能设置不正确。您可以尝试在您创建的 eps 上使用[epstool](http://www.ctan.org/pkg/epstool)：

```
epstool --bbox myeps.eps myneweps.eps 
```

那应该正确计算边界框，但给你一个零边距。如果您不能/不想安装它，请尝试手动调整边界框。.eps 文件顶部附近有一行，如下所示：

```
%%BoundingBox: 50 50 554 770 
```

这四个数字是输出的 y 偏移量、x 偏移量、y 最大值和 x 最大值（就边距而言，您可以将它们视为上、左、下、右）。您可以尝试减少第二个数字（增加左边距）以查看是否显示了您的 y 轴标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:27:30.397

我会通过使用 gnuplot 的 pdf 终端之一（我喜欢`pdfcairo`）来避免转换，并且只使用`ylabel`而不是`set label 1 ... at graph...`. 这是一个简单的脚本，您可以根据自己的目的进行修改：

```
set term pdfcairo enhanced font "Helvetica,20"
set output "test.pdf"
set ylabel "~x{0.7.}" rotate by 0  #default rotation is 90
set xlabel "x"
plot sin(x) 
```

最终，您的脚本所发生的事情是 gnuplot 将标签从可视画布上移开。由于某些原因，adobe 仍将标签放在（转换后的）输出上，但我会断言在这种情况下它们是错误的——（它们基本上忽略了您的边界框）。当然，您可以按照 andyras 的回答中的建议移动/调整边界框——但我认为这是一个非常老套的解决方案。

# php - 如何使用 composer 安装 Zend Framework 2 Tool

> ID：14685334
> 
> 赞同：6
> 
> 时间：2013-02-04T11:02:03.903
> 
> 标签：php, frameworks, zend-framework2

当使用作曲家引导时，我不知道如何运行 zf.php（Zend Framework 2 工具）。

首先，我根据文档引导 composer 和 zftool：

```
$ mkdir tmp && cd tmp
$ curl -s https://getcomposer.org/installer | php
$ ./composer.phar require zendframework/zftool:dev-master 
```

到目前为止，这工作正常。

但是当我尝试运行 zf.php 时，我得到了错误：

```
$ vendor/zendframework/zftool/zf.php 
PHP Warning:  require_once(/Users/seb/tmp/vendor/zendframework/zftool/vendor/autoload.php): failed to open stream: No such file or directory in /Users/seb/tmp/vendor/zendframework/zftool/zf.php on line 13

Warning: require_once(/Users/seb/tmp/vendor/zendframework/zftool/vendor/autoload.php): failed to open stream: No such file or directory in /Users/seb/tmp/vendor/zendframework/zftool/zf.php on line 13
PHP Fatal error:  require_once(): Failed opening required '/Users/seb/tmp/vendor/zendframework/zftool/vendor/autoload.php' (include_path='.:/opt/local/lib/php') in /Users/seb/tmp/vendor/zendframework/zftool/zf.php on line 13

Fatal error: require_once(): Failed opening required '/Users/seb/tmp/vendor/zendframework/zftool/vendor/autoload.php' (include_path='.:/opt/local/lib/php') in /Users/seb/tmp/vendor/zendframework/zftool/zf.php on line 13 
```

我究竟做错了什么？我在 Mac 上使用 PHP 5.3.21。

我还在我的 Debian VServer 上使用 PHP 5.4 对其进行了测试，同样的错误:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T12:18:58.810

您应该将 zf.php 复制到您的根目录并从那里运行它。

```
$ mkdir tmp && cd tmp
$ curl -s https://getcomposer.org/installer | php
$ ./composer.phar require zendframework/zftool:dev-master
$ cp vendor/zendframework/zftool/zf.php .
$ php zf.php 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-15T13:46:12.570

**在本地安装 Composer.phar**

如果你的机器上没有全局安装composer，你可以在项目本地安装。

在本地安装 Composer 只需在项目目录 ( [https://getcomposer.org/doc/00-intro.md](https://getcomposer.org/doc/00-intro.md) ) 中运行安装程序。

```
curl -sS https://getcomposer.org/installer | php 
```

**注意**：如果由于某种原因上述方法失败，您可以使用 php 下载安装程序：

```
php -r "readfile('https://getcomposer.org/installer');" | php 
```

**安装 ZF2**

```
git clone git://github.com/zendframework/ZendSkeletonApplication.git --recursive
cd ZendSkeletonApplication
php composer.phar self-update
php composer.phar install 
```

**安装 ZFTools（使用[Composer](http://getcomposer.org/)安装）**

```
php composer.phar require zendframework/zftool:dev-master
php composer.phar install 
```

**创建符号链接**

zf.php（Zend 工具）将安装在 vendor/bin 文件夹中。您可以使用 php vendor/bin/zf.php 运行它。

```
ln -s vendor/zendframework/zftool/zf2.bat zftools
chmod +x zftools
./zftools 
```

在这种情况下，我更喜欢符号链接，为了更新 zftools 存储库，我不需要再次复制文件。

**无需安装，使用 PHAR 文件**

使用 ZF 工具的另一种替代方法，无需创建脚本或别名，并下载 PHAR 格式。

```
wget https://packages.zendframework.com/zftool.phar --no-check-certificate
php zftool.phar  version
ZFTool - Zend Framework 2 command line Tool
The ZFTool is using Zend Framework 2.2.4 
```

或者您可以下载[zftool.phar](https://packages.zendframework.com/zftool.phar)并使用它。

注 1：**@akond**的回复非常好，我只是提供一个我喜欢使用的替代答案。

注 2：本示例是在使用 cygwin 的 Windows 机器上完成的。

**很好的教程安装（ZF2和ZF3）**

[入门：骨架应用程序](https://docs.zendframework.com/tutorials/getting-started/skeleton-application/)

参考：

[Zend 框架工具 (ZFTool)](http://framework.zend.com/manual/current/en/modules/zendtool.introduction.html)

# javascript - 样式并在浏览器的标签标题中显示当前日期

> ID：14685335
> 
> 赞同：-1
> 
> 时间：2013-02-04T11:02:04.120
> 
> 标签：javascript, html

如果您打开 Google 日历，您会在浏览器标签标题的左侧看到一个带有当前日期（数字）的蓝色方块

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:05:20.427

这是使用网站图标完成的。我的猜测是他们每天有一个网站图标，他们使用 javascript 更改网站图标的来源。您可以使用 getDay() 函数在 javascript 中获取当前日期：

```
var d = new Date();
var n = d.getDay(); 
```

然后使用日期选择图标。例如 day1.ico, ... , day31.ico 并使用 JavaScript 动态更改源

看到[这个帖子](https://stackoverflow.com/questions/260857/changing-website-favicon-dynamically/260876#260876)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:21:21.717

通过在头部包含 favicon 链接元素来开始您的文档：

 `````
<link id="favicon" rel="icon" type="image/png" href="ical-icon-complete.png" /> 
````  `“完整”版本是带有 31 的图标。接下来我们将使用 JavaScript 动态创建网站图标。

为动态网站图标使用画布

我们需要以下项目才能使此效果起作用：

一个不必存在于 DOM 中的画布，即 16×16 – 我们的图标大小, 即 04 是第 4 个就是这样。为了方便起见，我在链接元素中添加了一个 id，这样我就可以在图像准备好时更改 href。以下 JavaScript 可以包含在链接元素下方的任何位置：

 `````
(function () {
var canvas = document.createElement('canvas'),
ctx,
img = document.createElement('img'),
link = document.getElementById('favicon').cloneNode(true),
day = (new Date).getDate() + '';

if (canvas.getContext) {
canvas.height = canvas.width = 16; // set the size
ctx = canvas.getContext('2d');
img.onload = function () { // once the image has loaded
ctx.drawImage(this, 0, 0);
ctx.font = 'bold 10px "helvetica", sans-serif';
ctx.fillStyle = '#F0EEDD';
if (day.length == 1) day = '0' + day;
ctx.fillText(day, 2, 12);
link.href = canvas.toDataURL('image/png');
document.body.appendChild(link);
};
img.src = 'ical-icon.png';
}

})(); 
```` 

`重要的部分是代码运行的顺序。它创建一个图像元素，并挂钩一个 onload 事件处理程序。当这个 onload 事件运行时，它使用 ctx.drawImage(this, 0, 0) 将图像绘制到画布上。this 指的是 onload 事件所作用的图像，0, 0 是开始绘制的左上角位置。`

 `接下来我们为文本设置样式并绘制它。

最后使用 canvas.toDataURL 我们为链接设置一个新的 href。

你应该可以看到运行在这篇博文上的代码，如果你查看与这个页面相关的图标，它应该是带有正确日期的日历图标，如果你的浏览器支持画布 API（IE8 及以下不支持，所有其他浏览器都这样做）。

尝试更改日期以进行测试。````

# c# - 使用 LINQ 读取 C# XML

> ID：14685341
> 
> 赞同：-2
> 
> 时间：2013-02-04T11:02:26.330
> 
> 标签：c#, .net, xml, linq

我需要读取一个**XML 文件（大于 1 GB）**并将数据加载到数据库中。如果我使用**LINQ**，阅读会比使用`XmlReader`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:17:24.960

`XDocument`(LINQ to XML) 并且`XmlDocument`适用于较小的文件，它们是所谓的 DOM 解析器。这样做的原因是他们将完整的文档加载到内存中并对其进行解析。

`XmlReader`是一个[SAX 解析器](http://en.wikipedia.org/wiki/Simple_API_for_XML)，适用于大文件，因为只读取小块，并且在读取时检查格式是否正确。

哪些文件算作“小”和“大”实际上取决于某些因素，例如机器中安装的内存。

一般来说，对于任何大小合适的 XML 文件，`XmlReader`就原始执行时间而言，它应该是最快的解决方案，但它也是迄今为止最难实现和理解的 API。特别是对于使用此 API 的新手，实施时间明显高于使用其他 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-21T19:38:54.133

```
 public void validateIputXML(string inputXmlPath)
    {

        XmlDocument document = new XmlDocument();
        document.Load(inputXmlPath);
        XmlNodeList recipientItem = document.GetElementsByTagName("RECIPIENT");
        foreach (XmlNode childList in recipientItem)
        {
            string attibuteValue_TemplateID = getValue(childList,".//LETTER_HEADER/TEMPLATE_ID");
            string attibuteValue_ProviderName = getValue(childList,".//LETTER_BODY/PROVIDER_INFO/PROVIDER_NAME");
            string attibuteValue_ProviderAddress = getValue(childList,".//LETTER_BODY/PROVIDER_INFO/PROVIDER_ADDRESS1");
            string attibuteValue_ProviderNumber = getValue(childList,".//LETTER_BODY/PROVIDER_INFO/PROVIDERNPI");

            Report.Info(attibuteValue_TemplateID+"-->"+attibuteValue_ProviderName+"-->"+attibuteValue_ProviderAddress+"-->"+attibuteValue_ProviderNumber);
        }
    }

    public string getValue(XmlNode Xnode, string attributeName)
    {
        XmlNode innerNode = Xnode.SelectSingleNode(attributeName);
        string attributeValue = innerNode.InnerText;
        return attributeValue;
    } 
```

# php - 防止在浏览器中访问 php 文件

> ID：14685344
> 
> 赞同：-3
> 
> 时间：2013-02-04T11:02:28.843
> 
> 标签：php, linux

我正在使用 linux box 和 php。我安排了许多 cron 任务。如果有人直接尝试使用浏览器访问这些文件，我想阻止访问这些文件。我该怎么做呢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:03:41.830

*   不要将文件放在网络根目录下
*   需要身份验证/授权
*   通过 IP 地址限制访问

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:13:53.790

使用**.htaccess**的示例解决方案：

```
<Files "cronjobs.php">
  Order deny,allow
  Allow from allowedmachine.com
  Allow from localhost
  Deny from all
</Files> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:08:59.733

也许这个？[来源]：[https ://github.com/h5bp/html5-boilerplate/blob/master/.htaccess](https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess)

```
# "-Indexes" will have Apache block users from browsing folders without a
# default document Usually you should leave this activated, because you
# shouldn't allow everybody to surf through every folder on your server (which
# includes rather private places like CMS system folders).
<IfModule mod_autoindex.c>
  Options -Indexes
</IfModule> 
```

# php - preg_replace_callback 中有问题的模运算符

> ID：14685355
> 
> 赞同：0
> 
> 时间：2013-02-04T11:02:48.227
> 
> 标签：php, loops, modulo

已经很晚了，我无法弄清楚以下问题的模式（已简化）。问题在于过程功能。

```
<?php
function imcrement_image_id( $template ){
  return preg_replace_callback('/%image_id%/', 'process', $template );
}

function process( $match ){
    static $count = 0;
    $count++;
    $output = '';
    if( $count %2 == 0){
        $output =  'image-' . (--$count);
        $count++;
    } else {
    $output =  'image-' . $count;
    }
return $output;
}  
?> 
```

在此代码段中可以看到函数的应用。我试图在每个循环中替换**两次**`figure id="%image_id"`image_id ，以便`<a href="%image_id"`匹配。

```
<?php for ($i=0; $i <3 ; $i++): ?>
<?php ob_start(); ?>
<figure id="%image_id%">

          <a href="#%image_id%" >
              <img src="http://placehold.it/550x209">
              <figcaption>Caption</figcaption>
          </a>
          <p class="description">Quisque facilisis </p>  
</figure>
<?php $template .= ob_get_clean(); ?>
<?php endfor; ?>
// later...
echo $template; 
```

目前这段代码确实有效，但它会产生如下标记：

```
 <figure id="image-1">
 <a href="#image-1">
 ...
 <figure id="image-3">
 <a href="#image-3">
 ...
 <figure id="image-3">
 <a href="#image-3"> 
```

我希望它是`image-1 image-1, image-2 image-2, image-3 image-3`等等。指针总是很感激！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:14:37.587

尝试：

```
function process( $match ){
    static $count = 1;
    $count++;
    return 'image-' . floor($count/2);
} 
```

逻辑：

*   `$count`将是 2,3,4,5,6... 在`return`声明中
*   `$count/2`将返回 1, 1.5, 2, 2.5, 3...
*   `floor($count/2)`将返回 1, 1, 2, 2, 3...

# c# - 从内容刷新母版页内的更新面板

> ID：14685357
> 
> 赞同：0
> 
> 时间：2013-02-04T11:02:58.990
> 
> 标签：c#, updatepanel, master-pages

我的母版页的更新面板中保存了一个标签。我将在代码后面设置一个数字，该数字将显示在标签中。假设现在标签的文本是 50。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
<asp:Label ID="remarks" runat="server" Font-Bold="True" 
                            Font-Size="Small" ForeColor="Red" Width="28px"></asp:Label>  
       </ContentTemplate>
</asp:UpdatePanel> 
```

然后在其内容页面上，将有一个gridview。一旦我选择了gridview，masterpage上的标签数量将减少一。（示例编号现在为 49）

但是，只有当我选择 gridview PLUS 刷新整个页面时，这个数字才会减少。如果无论如何当我选择gridview时它只会刷新masterpage内的更新面板而不刷新整个网页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:12:42.343

您可以尝试使用 javascript 或 jQuery 来更新标签文本

看看这个： [http ://encosia.com/easily-refresh-an-updatepanel-using-javascript/](http://encosia.com/easily-refresh-an-updatepanel-using-javascript/)

[使用 JavaScript 或 jQuery 手动更新 UpdatePanel](https://stackoverflow.com/questions/3490457/update-an-updatepanel-manually-using-javascript-or-jquery)

# android - 在editText跨度中单击其删除按钮删除元素

> ID：14685362
> 
> 赞同：5
> 
> 时间：2013-02-04T11:03:14.063
> 
> 标签：android

```
final SpannableStringBuilder sb = new SpannableStringBuilder();
TextView tv = createContactTextView(contactName);
BitmapDrawable bd = (BitmapDrawable) convertViewToDrawable(tv);
bd.setBounds(0, 0, bd.getIntrinsicWidth(),bd.getIntrinsicHeight());

sb.append(contactName + ",");
sb.setSpan(new ImageSpan(bd), sb.length()-(contactName.length()+1), sb.length()-            1,Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
to_input.setText(sb);

public static Object convertViewToDrawable(View view) {
  int spec = MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
  view.measure(spec, spec);
  view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight());
  Bitmap b = Bitmap.createBitmap(view.getMeasuredWidth(), view.getMeasuredHeight(),
        Bitmap.Config.ARGB_8888);
  Canvas c = new Canvas(b);
  c.translate(-view.getScrollX(), -view.getScrollY());
  view.draw(c);
  view.setDrawingCacheEnabled(true);
  Bitmap cacheBmp = view.getDrawingCache();
  Bitmap viewBmp = cacheBmp.copy(Bitmap.Config.ARGB_8888, true);
  view.destroyDrawingCache();
  return new BitmapDrawable(viewBmp);

}

public TextView createContactTextView(String text){
  //creating textview dynamically
  TextView tv = new TextView(this);
  tv.setText(text);
  tv.setTextSize(20);
  tv.setBackgroundResource(R.drawable.oval);
  tv.setCompoundDrawablesWithIntrinsicBounds(0, 0,     R.drawable.ic_clear_search_api_holo_light, 0);
 tv.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
              Drawable co =  ((TextView) v).getCompoundDrawables()[2];

                if (event.getX() > v.getMeasuredWidth() - v.getPaddingRight()
                        - co.getIntrinsicWidth()) {
                            //tv.setText("");
                            Log.i(TAG, "clicked on delete button");
                    return true;
                } else {
                    return false;
                }
        }

});
  return tv;

} 
```

它将在 editText 内创建带有文本的 Spans 但我想删除 span 在单击该 span 中的删除按钮时。我在 createContactTextView 函数中为它编写了代码“tv.setOnTouchListener(new OnTouchListener() {................”，但它不起作用。 ![在此处输入图像描述](../Images/8d286cac65875354c5722de5c0a50864.png)}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-18T05:19:14.723

将 ImageSpan 和 ClickableSpan 设置为相同的开始和结束位置。

```
sb.setSpan(new ImageSpan(bd),startSpan ,endSpan , Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
sb.setSpan(new ClickableSpan() {
                    @Override
                    public void onClick(View widget) {
                       //  DeleteHere
                    }
                }, startSpan , endSpan , Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

同时删除你的触摸监听器，它不会工作！现在将 LinkMovement 设置为您的编辑文本。

```
editText.setMovementMethod(LinkMovementMethod.getInstance()); 
```

# java - 自动加载java静态块

> ID：14685365
> 
> 赞同：1
> 
> 时间：2013-02-04T11:03:30.110
> 
> 标签：java

至于 JDBC4 则要求 JDBC 驱动程序自动加载。它是通过添加一个静态块来制作的，该块驱动程序在 DriverManager 中注册。但是，当我在我的类中编写这样的块时，它仅在我创建此类的对象时执行。否则代码不会运行。

我的问题是：驱动程序如何自我初始化，当它们不是从应用程序代码创建时，但是当我使用它来获取数据库连接时它们在 DriverManager 中注册？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:15:00.717

JDBC4 规范的第 9.2 段规定，`Driver`实现**必须**`DriverManager`在类加载时注册自己，以便在`Driver`加载实现时静态初始化程序将自动注册驱动程序的实例。

`Driver`因此，只需通过 ( )加载实现`Class.forName("driverClassName")`，将使用`DriverManager`.

`DriverManager`或者，规范提供了一种通过系统属性从外部指定要加载（并因此注册）的驱动程序的方法`jdbc.drivers`（参见第 9.2.1 段）：

```
 java -Djdbc.drivers=com.acme.jdbc.AcmeJdbcDriver Test 
```

这些注册方法在旧的 JDBC3 实现中也可用。

JDBC4 引入了一种新的注册方法，利用了服务提供者机制：每个兼容的驱动程序都必须提供一个包含`META-INF/services/java.sql.Driver`文件的 jar。

（`DriverManager`on `DriverManager.getConnection()`calls ）使用`java.sql.Driver`服务提供者并加载指定的类，从而自动注册驱动程序。这消除了调用的需要`Class.forName`（参见第 9.2.1 段和第 3.1 段，第一个项目符号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:05:47.287

在以前版本的 JDBC 中，当使用 a 时，`DataSource`您经常会看到调用`Class.forName("driver.class")`

> 在以前的 JDBC 版本中，要获得连接，首先必须通过调用方法 Class.forName 来初始化 JDBC 驱动程序。此方法需要 java.sql.Driver 类型的对象。每个 JDBC 驱动程序都包含一个或多个实现接口 java.sql.Driver 的类。

该文件进一步指出：

> 在您的类路径中找到的任何 JDBC 4.0 驱动程序都会自动加载。（但是，您必须使用 Class.forName 方法手动加载 JDBC 4.0 之前的所有驱动程序。）

所以我假设正在扫描类路径以查找任何实现驱动程序接口的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:12:30.233

您可以使用[`ServiceLoader`](http://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html)Java 的工具来自动加载服务。

您需要在列出您的类的 JAR 中放置一个文件，然后 Java 会在需要该服务时自动加载它。查看 ServiceLoader 的文档以获取更多详细信息。

这个[类似问题](https://stackoverflow.com/questions/8072832/when-is-class-forname-needed-when-connecting-to-a-database-via-jdbc-in-a-web-app)的答案实际上是说这是 JDBC 使用的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T11:05:52.543

通常你`Class.forName`用来初始化类。

# excel - 将 PowerPivot Excel 文件发布到 SharePoint 时出现数据连接问题，如何解决？

> ID：14685366
> 
> 赞同：0
> 
> 时间：2013-02-04T11:03:32.577
> 
> 标签：excel, excel-2010, powerpivot

我的一位客户对 PowerPivot 的功能印象深刻，尤其是分析功能，但更重要的是发布功能。我的意思是能够将仪表板发布到 SharePoint 网站，之后可以直接在浏览器中体验，包括为最终用户进行筛选和切片。

当我们将 PowerPivot 结果发布到 SharePoint 网站时，对于触发数据连接刷新的任何操作，我们都会收到以下错误：

> 数据连接使用 Windows 身份验证，并且无法委派用户凭据

我对此进行了大量研究，似乎这是 SharePoint 方面的配置问题。请注意，尽管我们使用的是云托管的 SharePoint，因此环境不受我们控制。此外，甚至我们自己的团队都提到这是一个不会解除的安全限制。

因此，我不是在努力解决上述问题，而是一起避免它：

我的第一个实验是在没有 PowerPivot 的情况下构建一个“普通”Excel 文件。相同的数据，我设法建立了相同的支点。数据和枢轴都在​​同一个文件中，没有数据连接。发布它工作得很好。这次没有遇到错误，甚至可以通过切片器与报告进行交互。

作为第二个实验，我想遵循相同的方案，但这次使用的是 PowerPivot。根据 Excel 工作表中的数据，我在 PowerPivot 中创建了一个所谓的“链接表”。接下来，我创建了一些使用此表的数据透视表。数据透视表与原始数据位于同一个 Excel 文件中。当我将此文件发布到 SharePoint 时，在执行任何刷新数据连接的操作时，我会遇到之前提到的相同错误。即使数据和枢轴在同一个文件中，它仍然会弹出这个安全错误，这让我感到惊讶。

发布 PowerPivot 时如何解决此数据连接问题？我们希望同时拥有 PowerPivot 的分析能力以及 Excel 的丰富发布选项，而不会遇到数据连接问题。是否可以将 PowerPivot 文件“展平”为“普通”Excel，因为实验 #1 表明这可以正常工作。如何从 PowerPivot 中删除数据连接并告诉它只使用同一个文件中的 Excel 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:36:58.620

您是否安装了 PowerPivot for Sharepoint？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:53:06.920

是 Pivotstream 提供云服务吗？

# javascript - Emberjs v4 无法复制对象

> ID：14685367
> 
> 赞同：3
> 
> 时间：2013-02-04T11:03:32.953
> 
> 标签：javascript, ember.js

我正在将代码升级到 V4，但在复制对象时遇到了问题。我想我显然已经实现了 Em.Copyable 接口，但是 Em.Copy 对我不可用，所以我在控制台中收到错误。我做错了什么？我已经设置了一个简单的 jsfiddle 来显示我遇到的问题。我确定我只是遗漏了一些东西，但是文档已经完全改变，并且不再有过时的示例。

[例子](http://jsfiddle.net/7NhNM/)

拿这个对象：

```
App.Key = Em.Object.create(Em.Copyable, {
    first: 1,
    second: 2
}); 
```

这个事件（在 jsfiddle 中它是一个按钮，但它可以是任何东西）：

```
doClick: function () {
    var k = Em.copy(App.Key);
} 
```

收到以下错误消息并停止代码执行：

```
Error: assertion failed: Cannot clone an Ember.Object that does not implement Ember.Copyable 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T13:14:29.807

Ember Object.create() 最近发生了变化，它不再支持 mixins。有几种选择。最常见的是在扩展 ember 对象时添加 mixins。例如：

```
App.Key = Em.Object.extend(Em.Copyable);
App.key = Em.Object.create({
  first: 1,
  second: 2
}); 
```

如果你真的想在创建过程中使用 add mixins，你可以使用新的`createWithMixins`方法：

```
App.key = Em.Object.createWithMixins(Em.Copyable, {
  first: 1,
  second: 2
}); 
```

现在您的对象具有 Mixin，您会发现该示例仍然失败，并显示：`Object [object Object] has no method 'copy'`。这是因为 Em.Copyable mixin 实际上并没有提供实现——它只是向 Ember 发出信号表明您的对象支持该`copy`操作的一种方式。您仍然需要`copy`在您的类上实现该方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-11T12:48:03.633

您可以使用

```
App.Key = Ember.Map.create({
    first: 1,
    second: 2
}); 
```

创建默认模型，该模型将具有复制方法。

# email - 导出与搜索词匹配的公司 Gmail 电子邮件

> ID：14685375
> 
> 赞同：4
> 
> 时间：2013-02-04T11:03:57.617
> 
> 标签：email, gmail, email-client

我一直找不到允许我根据“棒球”等搜索词导出 Gmail 收件箱电子邮件的插件或工具。

最终，我想将所有电子邮件导出为 PDF。

我没有找到很多选项，我查看的一个是 MailExporter，但它似乎没有我需要的搜索能力。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T15:31:10.940

那里有很多选择。只需找到满足您的要求并在您的环境中工作的问题。我认为您不会找到完全符合您要求的插件或解决方案。最有可能的是，您将不得不将一些解决方案拼凑在一起。

**[将 Gmail 邮件导出为文本或 HTML 文件](https://webapps.stackexchange.com/questions/417/export-gmail-messages-to-text-or-html-files)**- 这个 WebApps 问题提供了一些很好的建议。我提取了更相关的答案。

*   [得到你的支持 - 得到你的支持：Gmail 备份](http://code.google.com/p/got-your-back/wiki/GettingStarted)

    > [Gmail 搜索的选择性备份](http://code.google.com/p/got-your-back/wiki/GettingStarted#Selective_Backups_With_Gmail_Searching)
    > 
    > GYB 支持使用 Gmail 风格的邮箱搜索进行选择性备份。例如，假设您只想备份重要或加星标的消息：
    > 
    > ```
    > gyb --email youremail@gmail.com --search "is:important OR is:starred" 
    > ```
    > 
    > 将导致 GYB 仅备份与该搜索查询匹配的消息。几乎所有 Gmail 搜索都可以与 GYB 一起使用。

*   通过[https://webapps.stackexchange.com/a/493](https://webapps.stackexchange.com/a/493)

    > 使用本地 POP 客户端，[我建议] Thunderbird。Outlook 对其本地数据存储使用专有格式。
    > 
    > 电子邮件保存为纯文本文件，每个文件夹一个文件。
    > 
    > > 这是正确的答案，除了使用 IMAP，这样您就可以提取所有带有特定标签的邮件（标签将显示为 [Gmail] 文件夹下的文件夹）。此外，如果您有大量电子邮件，请打开“高级 IMAP 控制”实验室功能，然后在“管理标签”下，关闭除您要下载的文件夹之外的所有文件夹的 IMAP 访问。

**其他选项**- 根据您的要求略有限制。

*   [Thunderbird 解决方案](http://pietro.open-lab.com/2011/10/26/how-to-export-e-mails-from-a-gmail-label/)通过这个[插件](https://addons.mozilla.org/it/thunderbird/addon/importexporttools/)。
*   [http://www.mailstore.com/en/mailstore-home.aspx](http://www.mailstore.com/en/mailstore-home.aspx)
*   [http://www.gmail-backup.com/](http://www.gmail-backup.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T12:19:14.793

有很多选择，但我认为可能对您有所帮助：

[http://www.openkm.com/en/modules-eng/mail-archiver.html](http://www.openkm.com/en/modules-eng/mail-archiver.html)

电子邮件归档有很多好处。最重要的是：

*   恢复丢失或意外删除的电子邮件
*   加快审计响应
*   保护知识产权
*   诉讼或内部调查中的“电子发现”。

我希望你有帮助

# python - 如何在 Python 中获取被调用方法的名称（动态添加）？

> ID：14685378
> 
> 赞同：0
> 
> 时间：2013-02-04T11:04:04.077
> 
> 标签：python, oop, methods

我有课：

```
class SimpleClass:
    def __init__(self):
        pass

    def init_levels(self):
        levels = get_levels_list()
        for level in levels:
            Transplant(foo, Simplelog, method_name=level) 
```

Transplant 是一个为类动态添加方法的类：

```
class Transplant:
    def __init__(self, method, host, method_name=None):
        self.host = host
        self.method = method
        self.method_name = method_name
        setattr(host, method_name or method.__name__, self)

    def __call__(self, *args, **kwargs):
        nargs = [self.host]
        nargs.extend(args)
        return apply(self.method, nargs, kwargs) 
```

Foo 是“移植”的函数：

```
def foo(self):
    return 
```

如何在 foo 中调用方法名称？

例如我执行：

```
simpleinst = SimpleClass()
simpleinst.init_levels() 
```

如何修改我的代码以在 foo 定义主体中调用方法名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:19:26.357

你必须明确地传递它：

```
class Transplant:
    def __init__(self, method, host, method_name=None):
        self.host = host
        self.method = method
        self.method_name = method_name or method.__name__
        setattr(host, method_name or method.__name__, self)

    def __call__(self, *args, **kwargs):
        nargs = [self.host, self.method_name]
        nargs.extend(args)
        return apply(self.method, nargs, kwargs) 
```

并扩展`foo`以接受它作为论据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:14:58.833

你看过[`getattr`](http://effbot.org/zone/python-getattr.htm)吗？

```
getattr(self, "method") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:17:48.357

您可以使用函数工厂来做到这一点`make_foo`：

关键步骤是重新定义函数的`func_name`属性：

```
foo.func_name = name 
```

* * *

```
class SimpleClass:
    def init_levels(self):
        levels = ['foo', 'bar']
        for level in levels:
            # Your original code defined this on `SimpleLog`. Did you mean `SimpleClass`?
            setattr(SimpleClass, level, make_foo(level))

def make_foo(name):
    def foo(self):
        print('{n} has been called'.format(n = foo.func_name))

    foo.func_name = name
    return foo

simpleinst = SimpleClass()
simpleinst.init_levels()
simpleinst.foo()
# foo has been called
simpleinst.bar()
# bar has been called 
```

# c# - 动画依赖属性

> ID：14685379
> 
> 赞同：3
> 
> 时间：2013-02-04T11:04:04.870
> 
> 标签：c#, windows-runtime, dependency-properties, winrt-xaml

我有一个注册依赖属性的自定义用户控件`HoverHeight`：

```
public sealed partial class VirtualPointer : UserControl
{
    public static readonly DependencyProperty HoverHeightProperty =
         DependencyProperty.Register("HoverHeight", typeof(double),
         typeof(VirtualPointer), new PropertyMetadata(1.0,OnHoverHeightChanged));

    public double HoverHeight
    {
        get { return (double)GetValue(HoverHeightProperty); }
        set { SetValue(HoverHeightProperty, value); }
    }
    ... 
```

我使用这个属性来计算`Margins`一些子控件的 ，并结合`IValueConverter`.

在使用此控件的页面中，我创建了一个`Storyboard`应该为属性设置动画的页面`HoverHeight`：

```
<Page ...>
    <Page.Resources>
        <Storyboard>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="virtualPointer" Storyboard.TargetProperty="HoverHeight">
                <LinearDoubleKeyFrame Value="1.0" KeyTime="0:0:0"/>
                <LinearDoubleKeyFrame Value="0.0" KeyTime="0:0:1"/>
                <LinearDoubleKeyFrame Value="1.0" KeyTime="0:0:2"/>
                <LinearDoubleKeyFrame Value="0.0" KeyTime="0:0:3"/>
                <LinearDoubleKeyFrame Value="1.0" KeyTime="0:0:4"/>
            </DoubleAnimationUsingKeyFrames>
            <!-- other DoubleAnimationUsingKeyFrames -->
        </Storyboard>
    </Page.Resources>
    <!-- ... -->
    <local:VirtualPointer Name="virtualPointer" HoverHeight="0.5"/>    
</Page> 
```

故事板包含其他按预期工作的动画。但是，当我启动情节提要时，`HoverHeight`值不会改变。既不会`OnHoverHeightChanged`调用处理程序，也不会调用具有新值的转换器。我可以使用属性设置器设置一个新值，该设置器又调用`OnHoverHeightChanged`处理程序，因此动画可能存在问题。

启动情节提要时没有产生输出或异常。

我在这里错过了什么吗？如何为自定义依赖属性设置动画？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T21:38:50.973

将动画的 EnableDependentAnimation 属性设置为 True。

默认情况下，从属动画根本不会在 Windows 8 上运行。默认情况下，它们是独立的动画（例如执行 GPU 变换的动画），因此您将无法在 UI 线程上收到更改通知。至少这是我的理解。

# django - Django DateField 不允许空白=True

> ID：14685380
> 
> 赞同：2
> 
> 时间：2013-02-04T11:04:05.247
> 
> 标签：django, validation, models

出于某种原因，即使 null=True 和 blank=True，如果我没有填写 application_due-field，我的表单仍然无法验证。

有任何想法吗？

```
application_due = models.DateField(_('Application Due'), null=True, blank=True) 
```

这是我的form.py：

```
application_due = forms.DateField(input_formats=['%d-%m-%Y', '%d/%m/%Y'], widget=DateInput(format='%d-%m-%Y', attrs={'placeholder': 'Application due (DD-MM-YYYY)'})) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T11:08:49.323

尝试将此属性添加到表单字段定义：

```
required=False 
```

# java - 并发访问对 HashSet 的影响

> ID：14685385
> 
> 赞同：0
> 
> 时间：2013-02-04T11:04:19.473
> 
> 标签：java, collections, synchronization, hashset

我遇到了一些阴暗的代码，其中 a`HashSet`被多个线程同时访问和修改，我想知道这可能会产生什么影响，考虑到 Javadoc 仅解释行为在并发下是“不确定的” , 不同步的访问。

具体来说，是否有可能调用`remove(element)`返回`true`，但调用的效果永远不会被其他线程看到（即，`contains(element)`总是会`true`在其他线程中返回）？

PS：只是为了让你放心，我知道这段代码很糟糕，我将用`HashSet`等效的同步集合替换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:06:19.677

多线程访问HashSet即可。

*   导致您所做的更改不会被另一个线程看到。
*   一个迭代器因 ConcurrentModifcationException 而失败。
*   进入 HashSet 代码中的无限循环的线程（很少见，但确实很糟糕）

注意：一个简单的替换是使用

```
Set<Type> set = Collections.newSetFromMap(new ConcurrentHashMap<Type, Boolean>()); 
```

# c# - 如何导航到另一个项目的视图

> ID：14685386
> 
> 赞同：4
> 
> 时间：2013-02-04T11:04:23.310
> 
> 标签：c#, windows-phone-7

我为 WinPhone 应用程序开发了一个库。这个库包含几个屏幕。

如果我想导航到同一个项目中的另一个视图，我可以使用如下代码：

```
NavigationService.Navigate(new Uri("/NewTaskPage.xaml", UriKind.Relative)); 
```

如何从另一个（相对）项目（例如我的库）导航到视图？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:19:26.367

您可以这样做：

```
NavigationService.Navigate(new Uri("/YOURPROJECTNAME;component/MainPage.xaml", UriKind.Relative)); 
```

# delphi - 如何在德尔福的天数中获得日期差异？

> ID：14685389
> 
> 赞同：4
> 
> 时间：2013-02-04T11:04:24.587
> 
> 标签：delphi, delphi-xe2

我有两个日期：1\. 2013 年 2 月 1 日 2\. 现在。因此，两个日期之间有 2 天的差异。如何以编程方式在 delphi 中获得这种不同的天数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T11:04:58.513

使用以下`DaysBetween`功能`DateUtils`：

```
var
  d1, d2: TDate;
begin

  d1 := EncodeDate(2013, 02, 01);
  d2 := EncodeDate(2013, 02, 04);

  ShowMessage(IntToStr(DaysBetween(d2, d1))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:07:14.680

这`TDateTime`是一种浮点格式，其中整数部分表示天数，而 zecimal 部分表示时间（作为 24 小时的一部分）。

所以如果你想得到一个从今天起两天后的日期，你只需添加`2`到原始日期。如果您有两个日期并且想要以天为单位计算距离，请`DaysBetween`按照 Andreas 的建议使用。

例子：

```
var D:TDateTime;
begin
  D := EncodeDate(2013, 2, 1);
  D := D + 2; // Adds two days.
end; 
```

你也可以使用`IncDay`函数 from`DateUtils`来做同样的事情；有人会说它更具可读性：

```
D := IncDay(D, 2); 
```

# jquery - Jquery渐变动画，进度条

> ID：14685395
> 
> 赞同：1
> 
> 时间：2013-02-04T11:04:56.733
> 
> 标签：jquery, css, scroll, linear-gradients

我有一个让我们说高度：15px 和宽度：300px，这将是渐变进度条动画的地方。

所以让我们说这里是文件：

```
<html>
  <body>
    <a href="#container3">Container 3</a>
    <div id="container1" style="width:100%;height:1000"></div>
    <div id="container2" style="width:100%;height:650"></div>
    <div id="container3" style="width:100%;height:480"></div>
    <div id="container4" style="width:100%;height:600"></div>
  </body>
</html> 
```

假设那里有一个固定位置的进度条。所以当你点击Container 3时，它会向下滚动到元素#container3，并且渐变进度条的宽度会随着文档向下滚动而增加，这意味着渐变进度条是相对于你滚动的高度而言的，并且会达到完整宽度，因为元素#container3 将到达屏幕顶部。滚动也可以手动完成，而不仅仅是单击 Container 3

-我如何为渐变（从左到右）背景颜色设置动画 -什么是 jquery 算法来获得相对于您滚动的高度的渐变宽度增加/减少。

非常感谢现场示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:10:36.813

渐变进度条的网址很少

[http://www.htmldrive.net/tags/show/progress+bar](http://www.htmldrive.net/tags/show/progress+bar) ,

[http://jqueryui.com/progressbar/#animated](http://jqueryui.com/progressbar/#animated)

[在元素上分层渐变](https://stackoverflow.com/questions/10267079/layering-gradients-on-element)

# java - 具有静态构造函数的类的多个实例

> ID：14685402
> 
> 赞同：0
> 
> 时间：2013-02-04T11:05:31.423
> 
> 标签：java

我有一种带有静态构造函数的“单例”实现的现有设计。我希望能够销毁并重新创建新实例。

这可以在不改变基础设计的情况下完成吗？

这是简化的原型：

```
public static void main(String[] args) {
     ClassA.doWork();
     ClassA.destruct();

     ClassA.doWork(); // <--I need new instance here
}

public class ClassA {
    private static ClassA inst = new ClassA();
    protected ClassA() {
        //init      
    }   
    public static void doWork(){
        //do work
    }   
    public static void destruct(){
        inst = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:19:32.723

如果您决定走这条路，并且不喜欢对每个方法进行空检查，您可以将“destruct”方法更改为“reset”：

```
    公共静态无效重置（）{
        inst = new ClassA();
    }

```

调用它而不是破坏。

但是，说真的，不要这样做......现在花时间重构这个烂摊子，否则它会回来咬你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:11:11.313

在方法中添加以下代码`doWork`：

```
public static void doWork()
{
    if(inst == null)
    {
        inst = new ClassA();
    }
    //do work
} 
```

或者

添加一个单独的方法来创建实例，（类似于你必须如何销毁）

```
public static ClassA init()
{
    if(inst == null)
    {
        inst = new ClassA();
    }
    return inst;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:14:43.387

在方法中创建一个实例，`doWork`例如：

```
 private static ClassA inst;
    public static void doWork() {
        if (inst == null) {
            inst = new ClassA();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T11:11:39.793

该方法`doWork`应该检查`null`实例并抛出一个`IllegalStateException`或创建一个新实例，`ClassA`然后执行以下逻辑：

```
 public static void doWork(){
            if (inst == null){
                // throw new IllegalStateException("instance has been destroyed");
                // or
                inst = new ClassA();
            }
            // doWork now
        } 
```

# excel - Excel if 条件

> ID：14685403
> 
> 赞同：0
> 
> 时间：2013-02-04T11:05:32.157
> 
> 标签：excel, if-statement

我`if`在 Excel 中做一个条件：

```
=IF(M1071="Si";1;0) 
```

我想在单元格中找到 Si 值并返回数字 1，否则返回 O。

然而，单元格不仅有`Si`，名称还有更多字符，例如`C8H20O2SSi2Si2`

知道如何搜索有的单元格`Si`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:11:13.373

使用这个：`=IF(ISERROR(FIND("Si";M1071));0;1)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:21:34.883

假设您有一个要过滤包含 的行的元素列表`Si`，您也可以直接使用自动过滤器。首先将自动过滤器应用于要过滤的范围（在*数据*选项卡->*排序和过滤器*->*过滤器*- 或按`Ctrl`- `Shift`- `L`）

在您要搜索的列中`Si`，单击顶行中的过滤箭头并选择*文本过滤器*->*包含...* - 并`Si`在此处输入。

# c - C语言中setjmp和longjmp的实际使用

> ID：14685406
> 
> 赞同：120
> 
> 时间：2013-02-04T11:05:43.620
> 
> 标签：c, setjmp

谁能解释我在嵌入式编程中实际使用的确切位置`setjmp()`和功能？`longjmp()`我知道这些是用于错误处理的。但我想知道一些用例。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-02-04T11:11:36.033

**错误处理**
假设嵌套在许多其他函数中的函数深处存在错误，并且错误处理仅在顶级函数中才有意义。

如果中间的所有函数都必须正常返回并评估返回值或全局错误变量以确定进一步的处理没有意义甚至是坏的，那将是非常乏味和尴尬的。

这是 setjmp/longjmp 有意义的情况。这些情况类似于其他语言（C++、Java）中的异常有意义的情况。

**协程**
除了错误处理之外，我还可以想到另一种情况，您需要在 C 中使用 setjmp/longjmp：

当您需要实现[协程](http://en.wikipedia.org/wiki/Coroutine)时就是这种情况。

这是一个小演示示例。我希望它满足 Sivaprasad Palas 对一些示例代码的要求，并回答 TheBlastOne 的问题 setjmp/longjmp 如何支持协同程序的实现（据我所知，它不基于任何非标准或新行为）。

**编辑：**
可能实际上*是*在调用堆栈中执行未定义的行为（请参阅`longjmp` *MikeMB*的评论；尽管我还没有机会验证这一点）。

```
#include <stdio.h>
#include <setjmp.h>

jmp_buf bufferA, bufferB;

void routineB(); // forward declaration 

void routineA()
{
    int r ;

    printf("(A1)\n");

    r = setjmp(bufferA);
    if (r == 0) routineB();

    printf("(A2) r=%d\n",r);

    r = setjmp(bufferA);
    if (r == 0) longjmp(bufferB, 20001);

    printf("(A3) r=%d\n",r);

    r = setjmp(bufferA);
    if (r == 0) longjmp(bufferB, 20002);

    printf("(A4) r=%d\n",r);
}

void routineB()
{
    int r;

    printf("(B1)\n");

    r = setjmp(bufferB);
    if (r == 0) longjmp(bufferA, 10001);

    printf("(B2) r=%d\n", r);

    r = setjmp(bufferB);
    if (r == 0) longjmp(bufferA, 10002);

    printf("(B3) r=%d\n", r);

    r = setjmp(bufferB);
    if (r == 0) longjmp(bufferA, 10003);
}

int main(int argc, char **argv) 
{
    routineA();
    return 0;
} 
```

下图展示了执行流程：
![执行流程](../Images/6604ea2b9fda4e1c02bbcb9c04a0a6df.png)

**警告说明**
使用 setjmp/longjmp 时请注意，它们对通常不考虑的局部变量的有效性有影响。
参照。我[关于这个话题](https://stackoverflow.com/questions/1393443/setjmp-longjmp-and-local-variables)的问题。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-04T11:42:14.613

理论上，您可以使用它们进行错误处理，这样您就可以跳出深度嵌套的调用链，而无需处理链中每个函数中的错误处理。

就像所有聪明的理论一样，当遇到现实时，它就会崩溃。您的中间函数将分配内存、获取锁、打开文件并执行各种需要清理的不同操作。所以在实践中`setjmp`/`longjmp`通常是一个坏主意，除非在非常有限的情况下你可以完全控制你的环境（一些嵌入式平台）。

根据我的经验，在大多数情况下，只要您认为使用`setjmp`/`longjmp`会起作用，您的程序就足够清晰和简单，以至于调用链中的每个中间函数调用都可以进行错误处理，或者它是如此混乱且无法修复，以至于您应该`exit`在遇到错误。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-04T11:48:22.530

`setjmp`和的结合`longjmp`是“超强`goto`”。小心使用。但是，正如其他人所解释的那样`longjmp`，当您想要`get me back to the beginning`快速摆脱令人讨厌的错误情况时，a 非常有用，而不必为 18 层函数返回错误消息。

但是，就像`goto`，但更糟糕的是，您必须非常小心如何使用它。A`longjmp`只会让您回到代码的开头。它不会影响在`setjmp`和 回到`setjmp`开始位置之间可能发生变化的所有其他状态。所以当你回到`setjmp`被调用的地方时，分配、锁、半初始化的数据结构等仍然被分配、锁定和半初始化。这意味着，您必须真正关心您执行此操作的地方，这样真的可以打电话`longjmp`而不会造成更多问题。当然，如果您接下来要做的是“重新启动”[在存储有关错误的消息之后，也许] - 例如，在您发现硬件处于错误状态的嵌入式系统中，那就没问题了。

我也见过`setjmp`/`longjmp`曾经提供非常基本的线程机制。但这是非常特殊的情况——绝对不是“标准”线程的工作方式。

编辑：当然可以添加代码来“处理清理”，就像 C++ 在编译代码中存储异常点然后知道什么给出了异常以及什么需要清理一样。这将涉及某种函数指针表并存储“如果我们从这里跳出，使用这个参数调用这个函数”。像这样的东西：

```
struct 
{
    void (*destructor)(void *ptr);
};

void LockForceUnlock(void *vlock)
{
   LOCK* lock = vlock;
}

LOCK func_lock;

void func()
{
   ref = add_destructor(LockForceUnlock, mylock);
   Lock(func_lock)
   ... 
   func2();   // May call longjmp. 

   Unlock(func_lock);
   remove_destructor(ref);
} 
```

使用这个系统，您可以“像 C++ 一样完成异常处理”。但它非常混乱，并且依赖于编写良好的代码。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-07-24T23:50:33.217

`setjmp`并且`longjmp`在单元测试中非常有用。

假设我们要测试以下模块：

```
#include <stdlib.h>

int my_div(int x, int y)
{
    if (y==0) exit(2);
    return x/y;
} 
```

通常，如果要测试的函数调用另一个函数，您可以声明一个存根函数供它调用，该函数将模仿实际函数为测试某些流所做的工作。但是，在这种情况下，函数调用`exit`不会返回。存根需要以某种方式模拟这种行为。 `setjmp`并且`longjmp`可以为您做到这一点。

为了测试这个功能，我们可以创建以下测试程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <setjmp.h>

// redefine assert to set a boolean flag
#ifdef assert
#undef assert
#endif
#define assert(x) (rslt = rslt && (x))

// the function to test
int my_div(int x, int y);

// main result return code used by redefined assert
static int rslt;

// variables controling stub functions
static int expected_code;
static int should_exit;
static jmp_buf jump_env;

// test suite main variables
static int done;
static int num_tests;
static int tests_passed;

//  utility function
void TestStart(char *name)
{
    num_tests++;
    rslt = 1;
    printf("-- Testing %s ... ",name);
}

//  utility function
void TestEnd()
{
    if (rslt) tests_passed++;
    printf("%s\n", rslt ? "success" : "fail");
}

// stub function
void exit(int code)
{
    if (!done)
    {
        assert(should_exit==1);
        assert(expected_code==code);
        longjmp(jump_env, 1);
    }
    else
    {
        _exit(code);
    }
}

// test case
void test_normal()
{
    int jmp_rval;
    int r;

    TestStart("test_normal");
    should_exit = 0;
    if (!(jmp_rval=setjmp(jump_env)))
    {
        r = my_div(12,3);
    }

    assert(jmp_rval==0);
    assert(r==4);
    TestEnd();
}

// test case
void test_div0()
{
    int jmp_rval;
    int r;

    TestStart("test_div0");
    should_exit = 1;
    expected_code = 2;
    if (!(jmp_rval=setjmp(jump_env)))
    {
        r = my_div(2,0);
    }

    assert(jmp_rval==1);
    TestEnd();
}

int main()
{
    num_tests = 0;
    tests_passed = 0;
    done = 0;
    test_normal();
    test_div0();
    printf("Total tests passed: %d\n", tests_passed);
    done = 1;
    return !(tests_passed == num_tests);
} 
```

在这个例子中，你使用在输入函数之前进行测试，然后在你调用`setjmp`的存根中直接返回你的测试用例。`exit``longjmp`

还要注意，redefined`exit`有一个特殊的变量，它会检查你是否真的想退出程序并调用`_exit`它。如果您不这样做，您的测试程序可能不会完全退出。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-02-04T16:27:27.350

既然您提到嵌入式，我认为值得注意的是一个**非用例**：当您的编码标准禁止它时。例如 MISRA (MISRA-C:2004:Rule 20.7) 和[JFS](http://www.jsf.mil/downloads/documents/JSF_AV_C++_Coding_Standards_Rev_C.doc) (AV Rule 20)：“不应使用 setjmp 宏和 longjmp 函数。”

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-12-23T21:21:29.783

我在 C 中使用和系统函数编写了一个[**类似 Java 的异常处理机制。**](https://github.com/meaning-matters/Except)它捕获自定义异常，但也捕获类似. 它具有异常处理块的无限嵌套，可以跨函数调用工作，并支持两种最常见的线程实现。它允许您定义具有链接时继承功能的异常类的树层次结构，并且该语句遍历该树以查看它是否需要捕获或传递。`setjmp()``longjmp()``SIGSEGV``catch`

这是使用此代码的示例：

```
try
{
    *((int *)0) = 0;    /* may not be portable */
}
catch (SegmentationFault, e)
{
    long f[] = { 'i', 'l', 'l', 'e', 'g', 'a', 'l' };
    ((void(*)())f)();   /* may not be portable */
}
finally
{
    return(1 / strcmp("", ""));
} 
```

这是包含大量逻辑的包含文件的一部分：

```
#ifndef _EXCEPT_H
#define _EXCEPT_H

#include <stdlib.h>
#include <stdio.h>
#include <signal.h>
#include <setjmp.h>
#include "Lifo.h"
#include "List.h"

#define SETJMP(env)             sigsetjmp(env, 1)
#define LONGJMP(env, val)       siglongjmp(env, val)
#define JMP_BUF                 sigjmp_buf

typedef void (* Handler)(int);

typedef struct _Class *ClassRef;        /* exception class reference */
struct _Class
{
    int         notRethrown;            /* always 1 (used by throw()) */
    ClassRef    parent;                 /* parent class */
    char *      name;                   /* this class name string */
    int         signalNumber;           /* optional signal number */
};

typedef struct _Class Class[1];         /* exception class */

typedef enum _Scope                     /* exception handling scope */
{
    OUTSIDE = -1,                       /* outside any 'try' */
    INTERNAL,                           /* exception handling internal */
    TRY,                                /* in 'try' (across routine calls) */
    CATCH,                              /* in 'catch' (idem.) */
    FINALLY                             /* in 'finally' (idem.) */
} Scope;

typedef enum _State                     /* exception handling state */
{
    EMPTY,                              /* no exception occurred */
    PENDING,                            /* exception occurred but not caught */
    CAUGHT                              /* occurred exception caught */
} State;

typedef struct _Except                  /* exception handle */
{
    int         notRethrown;            /* always 0 (used by throw()) */
    State       state;                  /* current state of this handle */
    JMP_BUF     throwBuf;               /* start-'catching' destination */
    JMP_BUF     finalBuf;               /* perform-'finally' destination */
    ClassRef    class;                  /* occurred exception class */
    void *      pData;                  /* exception associated (user) data */
    char *      file;                   /* exception file name */
    int         line;                   /* exception line number */
    int         ready;                  /* macro code control flow flag */
    Scope       scope;                  /* exception handling scope */
    int         first;                  /* flag if first try in function */
    List *      checkList;              /* list used by 'catch' checking */
    char*       tryFile;                /* source file name of 'try' */
    int         tryLine;                /* source line number of 'try' */

    ClassRef    (*getClass)(void);      /* method returning class reference */
    char *      (*getMessage)(void);    /* method getting description */
    void *      (*getData)(void);       /* method getting application data */
    void        (*printTryTrace)(FILE*);/* method printing nested trace */
} Except;

typedef struct _Context                 /* exception context per thread */
{
    Except *    pEx;                    /* current exception handle */
    Lifo *      exStack;                /* exception handle stack */
    char        message[1024];          /* used by ExceptGetMessage() */
    Handler     sigAbrtHandler;         /* default SIGABRT handler */
    Handler     sigFpeHandler;          /* default SIGFPE handler */
    Handler     sigIllHandler;          /* default SIGILL handler */
    Handler     sigSegvHandler;         /* default SIGSEGV handler */
    Handler     sigBusHandler;          /* default SIGBUS handler */
} Context;

extern Context *        pC;
extern Class            Throwable;

#define except_class_declare(child, parent) extern Class child
#define except_class_define(child, parent)  Class child = { 1, parent, #child }

except_class_declare(Exception,           Throwable);
except_class_declare(OutOfMemoryError,    Exception);
except_class_declare(FailedAssertion,     Exception);
except_class_declare(RuntimeException,    Exception);
except_class_declare(AbnormalTermination, RuntimeException);  /* SIGABRT */
except_class_declare(ArithmeticException, RuntimeException);  /* SIGFPE */
except_class_declare(IllegalInstruction,  RuntimeException);  /* SIGILL */
except_class_declare(SegmentationFault,   RuntimeException);  /* SIGSEGV */
except_class_declare(BusError,            RuntimeException);  /* SIGBUS */

#ifdef  DEBUG

#define CHECKED                                                         \
        static int checked

#define CHECK_BEGIN(pC, pChecked, file, line)                           \
            ExceptCheckBegin(pC, pChecked, file, line)

#define CHECK(pC, pChecked, class, file, line)                          \
                 ExceptCheck(pC, pChecked, class, file, line)

#define CHECK_END                                                       \
            !checked

#else   /* DEBUG */

#define CHECKED
#define CHECK_BEGIN(pC, pChecked, file, line)           1
#define CHECK(pC, pChecked, class, file, line)          1
#define CHECK_END                                       0

#endif  /* DEBUG */

#define except_thread_cleanup(id)       ExceptThreadCleanup(id)

#define try                                                             \
    ExceptTry(pC, __FILE__, __LINE__);                                  \
    while (1)                                                           \
    {                                                                   \
        Context *       pTmpC = ExceptGetContext(pC);                   \
        Context *       pC = pTmpC;                                     \
        CHECKED;                                                        \
                                                                        \
        if (CHECK_BEGIN(pC, &checked, __FILE__, __LINE__) &&            \
            pC->pEx->ready && SETJMP(pC->pEx->throwBuf) == 0)           \
        {                                                               \
            pC->pEx->scope = TRY;                                       \
            do                                                          \
            {

#define catch(class, e)                                                 \
            }                                                           \
            while (0);                                                  \
        }                                                               \
        else if (CHECK(pC, &checked, class, __FILE__, __LINE__) &&      \
                 pC->pEx->ready && ExceptCatch(pC, class))              \
        {                                                               \
            Except *e = LifoPeek(pC->exStack, 1);                       \
            pC->pEx->scope = CATCH;                                     \
            do                                                          \
            {

#define finally                                                         \
            }                                                           \
            while (0);                                                  \
        }                                                               \
        if (CHECK_END)                                                  \
            continue;                                                   \
        if (!pC->pEx->ready && SETJMP(pC->pEx->finalBuf) == 0)          \
            pC->pEx->ready = 1;                                         \
        else                                                            \
            break;                                                      \
    }                                                                   \
    ExceptGetContext(pC)->pEx->scope = FINALLY;                         \
    while (ExceptGetContext(pC)->pEx->ready > 0 || ExceptFinally(pC))   \
        while (ExceptGetContext(pC)->pEx->ready-- > 0)

#define throw(pExceptOrClass, pData)                                    \
    ExceptThrow(pC, (ClassRef)pExceptOrClass, pData, __FILE__, __LINE__)

#define return(x)                                                       \
    {                                                                   \
        if (ExceptGetScope(pC) != OUTSIDE)                              \
        {                                                               \
            void *      pData = malloc(sizeof(JMP_BUF));                \
            ExceptGetContext(pC)->pEx->pData = pData;                   \
            if (SETJMP(*(JMP_BUF *)pData) == 0)                         \
                ExceptReturn(pC);                                       \
            else                                                        \
                free(pData);                                            \
        }                                                               \
        return x;                                                       \
    }

#define pending                                                         \
    (ExceptGetContext(pC)->pEx->state == PENDING)

extern Scope    ExceptGetScope(Context *pC);
extern Context *ExceptGetContext(Context *pC);
extern void     ExceptThreadCleanup(int threadId);
extern void     ExceptTry(Context *pC, char *file, int line);
extern void     ExceptThrow(Context *pC, void * pExceptOrClass,
                            void *pData, char *file, int line);
extern int      ExceptCatch(Context *pC, ClassRef class);
extern int      ExceptFinally(Context *pC);
extern void     ExceptReturn(Context *pC);
extern int      ExceptCheckBegin(Context *pC, int *pChecked,
                                 char *file, int line);
extern int      ExceptCheck(Context *pC, int *pChecked, ClassRef class,
                            char *file, int line);

#endif  /* _EXCEPT_H */ 
```

还有一个 C 模块，其中包含用于信号处理和一些簿记的逻辑。

我可以告诉你，实施起来非常棘手，我几乎放弃了。我真的努力让它尽可能接近 Java。我发现仅使用 C 就能走多远令人惊讶。

如果你有兴趣，请给我留言。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-02-14T18:44:58.607

毫无疑问，setjmp/longjmp 最重要的用途是它充当“非本地 goto 跳转”。Goto 命令（在少数情况下您需要在 for 和 while 循环上使用 goto）在同一范围内最安全地使用。如果您使用 goto 跨范围（或跨自动分配）跳转，您很可能会破坏程序的堆栈。setjmp/longjmp 通过将堆栈信息保存在您要跳转到的位置来避免这种情况。然后，当您跳转时，它会加载此堆栈信息。如果没有这个特性，C 程序员很可能不得不转向汇编编程来解决只有 setjmp/longjmp 才能解决的问题。感谢上帝它存在。C 库中的所有内容都非常重要。你会知道什么时候需要它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-21T14:02:16.897

除了错误处理之外，您可以做的另一件之前没有提到的事情是以一种智能的方式在 C 中实现尾递归计算。

这实际上是如何在 C 中实现延续而不以延续传递样式转换输入代码。

# ios - 由于 CTFontRef 导致的内存泄漏

> ID：14685410
> 
> 赞同：0
> 
> 时间：2013-02-04T11:05:54.040
> 
> 标签：ios, memory, memory-leaks, ctfontref

我正在使用以下详细信息生成 PDF，在仪器中我遇到内存泄漏，任何人都知道为什么仪器指向`CTFontRef`100 perc 泄漏。？

```
NSMutableAttributedString *string = [[[NSMutableAttributedString alloc]
                                                 initWithString:textToDraw] autorelease];   
CTFontRef helveticaBold = CTFontCreateWithName(CFSTR("Helvetica-Bold"), 8.0, NULL);

[string addAttribute:(id)kCTFontAttributeName
                       value:(id)helveticaBold
                       range:NSMakeRange(0, [string length])]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T20:01:26.460

试试这个（假设 ARC）：

```
[string addAttribute:(NSString *)kCTFontAttributeName
               value:CFBridgingRelease(helveticaBold)
               range:NSMakeRange(0, [string length])]; 
```

# php - 在 HTML 表单与 MySQL DB 中处理特殊字符，如希腊字母

> ID：14685416
> 
> 赞同：0
> 
> 时间：2013-02-04T11:06:08.380
> 
> 标签：php, html, mysql

请帮我解决以下问题：

**配置：**

HTML 字符集：windows-1250

DB charset / collat​​ion: cp1250 COLLATE cp1250_czech_cs（我不能使用 UTF-8，因为我需要正确的 CZECH 排序规则、区分大小写等）

**问题：**

有时我需要将特殊字符（如希腊字母或 <tag>）存储到我的数据库中。如何设置将值从 HTML 表单存储到 DB 的过程，反之亦然 + 显示值，以便在 DB 和表单中没有 html 实体，或者在显示时总会有真实的字符（而不是实体）。

感谢4任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:25:36.187

鉴于要求，您的问题没有答案，因为您需要某种方式来转义 unicode 字符，因此您不妨使用 html 实体并将它们存储在数据库中。

这将与在输入上使用 php 过滤器函数和 FILTER_SANITIZE_SPECIAL_CHARS 一起很好地工作。

如果您不喜欢这样，请在数据库中使用 Unicode。

# ios - Facebook IOS SDK - 如何知道何时返回应用程序

> ID：14685417
> 
> 赞同：0
> 
> 时间：2013-02-04T11:06:08.567
> 
> 标签：ios, objective-c, facebook

我怎么知道，当用户授权应用程序时，SDK 会返回到我的应用程序？有什么活动知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:21:32.137

```
-(BOOL) application:(UIApplication *)application handleOpenURL:(NSURL *)url{} 
```

您还必须在 .plist 中设置 URL 方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:21:37.863

在你的 appdelegate

`- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation`

您可以检查 sourceApplication。

也在`applicationDidBecomeActive:`记得打电话`[FBSession.activeSession handleDidBecomeActive];`

# ruby - 如何单击元素的特定坐标

> ID：14685418
> 
> 赞同：9
> 
> 时间：2013-02-04T11:06:10.413
> 
> 标签：ruby, watir-webdriver

**我需要使用watir-webdriver**单击元素的特定坐标。使用**selemium-webdriver**它看起来像：

```
@driver.action.move_to(element, 30, 0).click.perform 
```

但是如何使用**watir**呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T14:31:59.717

我认为您必须直接访问 selenium-webdriver 驱动程序（假设`browser`是您的 watir-webdriver 浏览器）：

```
browser.driver 
```

要获取 watir-webdriver 元素的下划线 selenium-webdriver 元素，请使用`wd`（假设`element`您要单击的是 watir-webdriver 元素）：

```
element.wd 
```

把它们放在一起，你会做：

```
browser.driver.action.move_to(element.wd, 30, 0).click.perform 
```

# c# - 如何用 MVC ActionFilter（或其他东西）替换基本控制器？

> ID：14685423
> 
> 赞同：3
> 
> 时间：2013-02-04T11:06:21.953
> 
> 标签：c#, asp.net-mvc, model-view-controller, design-patterns, architecture

我正在尝试改进我的 MVC 设计。在每个页面上，我都需要读取一个 cookie 并基于它设置一个具有各种值的 User 对象（与身份验证无关）。

我目前所做的是让所有控制器都从 BaseController 继承，并在 BaseController 中使用 User 对象。

```
public class BaseController : Controller
{
    protected User thisUser { get; private set; }

    protected override void Initialize(System.Web.Routing.RequestContext requestContext)
    {
         // ... read cookie, set values of thisUser
    }
} 
```

这是一个糟糕的设计吗？我喜欢它只定义`User`一次，但我已经阅读了关于[ASP.NET MVC 中的基控制器类有哪些好的候选者的答案？](https://stackoverflow.com/questions/6119206/what-are-good-candidates-for-base-controller-class-in-asp-net-mvc)，如果有更好的方法，我愿意重做。但我绝对不想要一种意味着`User thisUser = new User();`在每个控制器上重复的方法，而且我看不出如果没有基本控制器我怎么能这样实现。我找不到以这种方式使用 ActionFilters 的好例子。

我还没有使用 DI 框架，但如果它解决了问题，我会。如果这意味着将`User`参数作为参数传递给每个控制器或动作，我不确定这是否是 DRY 赌注的改进。

我确定我缺少一些东西。任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:37:56.327

创建接口

```
interface ICustomPrincipal : IPrincipal
{
    int UserId { get; set; }
    string FirstName { get; set; }
    string LastName { get; set; }
} 
```

自定义主体

```
public class CustomPrincipal : ICustomPrincipal
{
    public IIdentity Identity { get; private set; }
    public bool IsInRole(string role) { return false; }

    public CustomPrincipal(string email)
    {
        this.Identity = new GenericIdentity(email);
    }

    public int UserId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

CustomPrincipalSerializeModel - 用于将自定义信息序列化到 FormsAuthenticationTicket 对象中的 userdata 字段中。

```
public class CustomPrincipalSerializeModel
{
    public int UserId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

登录方法 - 使用自定义信息设置 cookie

```
if (Membership.ValidateUser(viewModel.Email, viewModel.Password))
{
    var user = userRepository.Users.Where(u => u.Email == viewModel.Email).First();

    CustomPrincipalSerializeModel serializeModel = new CustomPrincipalSerializeModel();
    serializeModel.UserId = user.Id;
    serializeModel.FirstName = user.FirstName;
    serializeModel.LastName = user.LastName;

    JavaScriptSerializer serializer = new JavaScriptSerializer();

    string userData = serializer.Serialize(serializeModel);

    FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(
             1,
             viewModel.Email,
             DateTime.Now,
             DateTime.Now.AddMinutes(15),
             false,
             userData);

    string encTicket = FormsAuthentication.Encrypt(authTicket);
    HttpCookie faCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);
    Response.Cookies.Add(faCookie);

    return RedirectToAction("Index", "Home");
} 
```

Global.asax.cs - 读取 cookie 并替换 HttpContext.User 对象，这是通过覆盖 PostAuthenticateRequest 来完成的

```
protected void Application_PostAuthenticateRequest(Object sender, EventArgs e)
{
    HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];

    if (authCookie != null)
    {
        FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);

        JavaScriptSerializer serializer = new JavaScriptSerializer();

        CustomPrincipalSerializeModel serializeModel = serializer.Deserialize<CustomPrincipalSerializeModel>(authTicket.UserData);

        CustomPrincipal newUser = new CustomPrincipal(authTicket.Name);
        newUser.UserId = serializeModel.UserId;
        newUser.FirstName = serializeModel.FirstName;
        newUser.LastName = serializeModel.LastName;

        HttpContext.Current.User = newUser;
    }
} 
```

在 Razor 视图中访问

```
@((User as CustomPrincipal).Id)
@((User as CustomPrincipal).FirstName)
@((User as CustomPrincipal).LastName) 
```

要获得完整答案，请使用此主题： [ASP.NET MVC - Set custom IIdentity or IPrincipal](https://stackoverflow.com/questions/1064271/asp-net-mvc-set-custom-iidentity-or-iprincipal)

# qt - QApplication分段错误

> ID：14685425
> 
> 赞同：4
> 
> 时间：2013-02-04T11:06:24.213
> 
> 标签：qt, segmentation-fault, qt4.8

尝试创建`QApplication`对象时发生崩溃。这是我的代码：

```
#include <QLabel>
#include <QApplication>

int main(int argc, char* argv[])
{
    QApplication app(argc, argv);
    return app.exec();
} 
```

我正在使用 Qt 4.8.4 版和 MinGW 编译器。我的应用程序在运行`QCoreApplicationPrivate::processCommandLineArguments`方法时崩溃。谁能告诉如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T11:55:24.987

显然，此错误是由 Qt 二进制文件和您的编译器的二进制不兼容引起的。

从[这里](http://qt-project.org/wiki/MinGW)：

> 有针对 Qt 4 和 Qt 5 的 MinGW 的二进制安装程序。Qt 4 是使用 gcc 4.4 使用 aMinGW.org 工具链构建的。Qt 5 基于使用 gcc 4.7.2 的 MinGW 构建工具链 [sourceforge.net]。Qt 5 安装程序还自带工具链。

如果您使用的是 gcc 4.7（我认为这是最新 MinGW 的默认版本），则无法使用 Qt 4 预编译的二进制文件进行编译（嗯，您可以，但[它不起作用）。](http://qt-project.org/forums/viewthread/19806)

所以，要么将你的 gcc 降级到 4.4 版本，要么将 Qt 升级到最新（Qt 5）版本。

# java - 使用 java String.split 从文件中动态读取

> ID：14685427
> 
> 赞同：0
> 
> 时间：2013-02-04T11:06:35.167
> 
> 标签：java, string, dynamic, split

我有一个包含以下内容的文件：

```
Hello;my name;is Marco
I want;some cheese
Hi
this;is;a;test 
```

如您所见，我有一些用 . 分隔的单词`;`。行中的元素数量不是固定的，所以我需要一种动态的方式来读取每一行。我尝试使用`String split`方法，这样我正在阅读的每一行：

```
String supp = "";
while((supp = read.split(";")[i]) != null){
     i++;
}
System.out.println("Number of elements: " + i); 
```

但当然它不起作用（`ArrayIndexOutOfBoundsException`）。

**如何动态读取整个文件？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:09:22.350

`split`给你一个数组，所以你应该使用它：

```
String[] parts = read.split(";");
System.out.println("Number of elements: " + parts.length); 
```

您不应该使用索引检查数组的大小。每个数组都有`length`给你它的大小的字段。

如果您需要读取文件，您可以`BufferedReader`使用方便的方法来逐行读取文件。检查这个问题：[How to read a large text file line by line using Java?](https://stackoverflow.com/questions/5868369/how-to-read-a-large-text-file-line-by-line-in-java)

# regex - 查找以某个字母开头的所有单词

> ID：14685433
> 
> 赞同：4
> 
> 时间：2013-02-04T11:06:41.890
> 
> 标签：regex, string, r

我对 R 和正则表达式都非常生疏。我尝试阅读 R 的正则表达式帮助文件，但它根本没有帮助！

我有一个包含 3 列的数据框：

1.  词汇表，即在语料库中找到的 500 个最常见单词的列表
2.  计数，单词出现的次数，以及
3.  概率，计数除以所有字数的总数

该列表从最常见到最不常见排列，因此不按字母顺序排列。

我需要为所有以相同字母开头的单词拉出整行。（我不需要遍历所有字母，我只需要一个字母的结果。）

我不只是询问正则表达式，而是如何在 R 中编写它，以便我在一个新的数据框中得到结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T11:10:57.190

您可以使用`grep`：

```
df <- data.frame(words=c("apple","orange","coconut","apricot"),var=1:4)
df[grep("^a", df$words),] 
```

这将给出：

```
 words var
1   apple   1
4 apricot   4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:13:51.240

也许这对你有用。

```
# Creating some data
 set.seed(001)
    count <- sample(1:100, 6, TRUE)
    DF <- data.frame(vocabulary=c('action', 'can', 'book', 'candy', 'any','bar'),
                     count=count,
                     probability=count/sum(count)
                     )

# Spliting by the first letter
Split <- lapply(1:3, function(DF, i){
  DF[grep(paste0('^', letters[i]), DF$vocabulary),]
}, DF=DF)

Split
[[1]]
      vocabulary count probability
1     action    27  0.08307692
5        any    21  0.06461538

[[2]]
  vocabulary count probability
3       book    58   0.1784615
6        bar    90   0.2769231

[[3]]
  vocabulary count probability
2        can    38   0.1169231
4      candy    91   0.2800000 
```

如您所见，结果是一个列表，您可能希望`1:3`通过 with 更改 lapply 调用以`1:26`考虑所有字母。

请注意，结果是无序的，但这可以通过使用包中的`orderBy`函数轻松完成`doBy`

```
 lapply(Split, function(x) orderBy(~vocabulary, data=x ))
[[1]]
  vocabulary count probability
1     action    27  0.08307692
5        any    21  0.06461538

[[2]]
  vocabulary count probability
6        bar    90   0.2769231
3       book    58   0.1784615

[[3]]
  vocabulary count probability
2        can    38   0.1169231
4      candy    91   0.2800000 
```

# ajax - Chrome REST 客户端总是请求 GET 而不是 POST

> ID：14685439
> 
> 赞同：1
> 
> 时间：2013-02-04T11:07:01.687
> 
> 标签：ajax, node.js, rest

看起来我的 Chrome 上的所有 REST 客户端工具突然无法正确发送 POST 请求。即使我选择了 POST 选项，它们也会发送 GET 请求。

我正在使用 node.js 后端服务器开发一个 Web 应用程序。我总是使用 chrome 扩展“Postman - REST Client”来测试我的后端服务。例如，我有一个接收 POST 请求并返回一些结果的 /foo 处理程序，以及一个接收 GET 请求的 /bar 处理程序。我可以正确测试这些处理程序，直到昨天，当我对 /foo 的 POST 请求得到响应时：“Cannot GET /foo”，这通常发生在我向 /foo 发送 GET 请求时。当我向 /bar 发送 POST 请求（通常应该返回“Cannot POST /bar”）但没有收到错误消息但得到正确的 GET 结果时。

我在 Chrome 上尝试了其他一些 REST 客户端工具，例如“REST 控制台”、“高级 REST 客户端”，但它们都具有相同的行为。但是，我的前端网页可以通过 AJAX POST/GET 调用正确访问这些处理程序。我的后端服务器或 Chrome 浏览器有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-16T11:59:24.433

我有同样的问题。原因是我正在测试的网站只允许 https。所有普通的 http 请求都被重定向到 https URL（这是在网络服务器级别完成的）。此重定向导致其余客户端执行附加请求（这次是 GET 请求）。这是实际通过我的应用程序服务器但随后产生错误“方法 GET 不支持”的请求。

我所要做的就是将我使用的 URL 从 http 更改为 https。

# javascript - 使用 Webkit/JavascriptCore 将 C++ 函数连接到 Javascript 事件侦听器

> ID：14685442
> 
> 赞同：3
> 
> 时间：2013-02-04T11:07:03.247
> 
> 标签：javascript, webkit, javascriptcore

我正在使用 Webkit 插件工具`<video>`在嵌入式环境中实现标签。[（对于那些感兴趣的人，我受到了](http://mac-os-forge.2317878.n4.nabble.com/writing-NPAPI-plugins-for-lt-video-gt-tag-td177277.html)启发）

我成功地连接了我的插件的方法和属性，以映射 HTML5 标记应该在 Webkit 的[MediaPlayerPrivate](http://trac.webkit.org/browser/trunk/Source/WebCore/platform/graphics/MediaPlayerPrivate.h)类中公开的那些（我知道如何查询属性和调用简单的方法），但我现在想知道我的插件如何传回数据到 MediaPlayer 接口。

我的插件`addEventListener()`在 JavaScript 中实现了接口，所以我想我可以使用它将 MediaPlayer 客户端注册为 EventListener，但我不知道如何。

我想做的是这样的：

```
 Plugin                    WebKit
+--------------+         +-----------------------------+
|              |         |                             |
|          <-------------|-+addEventListener(callback) |
|              |         |                             |
|+----------+  |         |                             |
||          |  |         |                             |
|| onEvent  |  |         |                             |
|+----------+--------------> callback( EventData )     |
|              |         |                             |
+--------------+         +-----------------------------+ 
```

我不知道的是如何调用`addEventListener`插件的方法并将其传递给引用 C++ 中的静态回调的 JSObject。

你对如何做到这一点有任何想法吗？

（ASCII 绘图感谢[Asciiflow](http://www.asciiflow.com)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:01:21.577

对于那些感兴趣的人，解决方案是这样的：

```
// event name is the name of the event I want to subscribe to
// callback is a static function with the 'JSObjectCallAsFunctionCallback' prototype
JSObjectRef callbackObject = JSObjectMakeFunctionWithCallback(ctx, JSStringRef(), callback);
JSValue js_cb[3] = {
    toJS(state, (const JSValueRef)JSValueMakeString (ctx, JSStringCreateWithUTF8CString(eventName))),
    toJS(state, (const JSValueRef)callbackObject),
    toJS(state, (const JSValueRef)JSValueMakeBoolean(ctx, false))
};
ArgList args(js_cb, 3);

return invokeMethod("addEventListener", args); 
```

使用这段代码，每当我的插件对象广播一个事件时，我都会看到代码落在我的`callback`静态函数中。

现在我只需要找到一种方法来传递我需要的私有数据，以便我可以从这个静态函数修改运行时值。

# java - TextView 在一行中的文本对齐

> ID：14685443
> 
> 赞同：2
> 
> 时间：2013-02-04T11:07:03.620
> 
> 标签：java, android, textview

我是Android开发的初学者。我正在制作一个简单的应用程序，它显示一个带有突出显示文本的 TextView。这是我的工作。

[http://i.stack.imgur.com/U5OPe.png](http://i.stack.imgur.com/U5OPe.png) （我无法直接上传图片，因为我是 stackoverflow 的新手）

但其中有一个问题。似乎文本没有垂直对齐。我希望我的 TextView 显示如下图所示的文本。

[http://i.stack.imgur.com/1sUKd.png](http://i.stack.imgur.com/1sUKd.png)

这张图片是 Quote.fm iOS 应用程序的一部分。在此应用程序中，文本垂直对齐。

我已经搜索了这个问题的答案，但我只找到了类似的答案

```
 android:layout_gravity="center" 
```

或者

```
 android:gravity="center_vertical" 
```

等等。但这些是内容本身的对齐属性，不是吗？

有人知道如何实现类似 Quote.fm 的文本显示吗？

更新：我想我说了一些含糊的东西。让我再解释一下。

所以，我不希望我的文本（整个文本）在 TextView 中对齐。如果您看到两张图片的最后几行，您就可以分辨出区别。第一个的文本附加到其行的顶部，但第二个的文本没有。对不起我的英语不好。但这是我最好的解释。TT

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:51:05.770

对于您的 TextView，将重力定义为：

```
 android:gravity="center_vertical" 
```

它会起作用的。我认为您问题中的“center_vertically”是一个错字。

# apache - 使用 .htaccess php 重写 url

> ID：14685447
> 
> 赞同：0
> 
> 时间：2013-02-04T11:07:10.257
> 
> 标签：apache, .htaccess, url

我想将用户名作为 url 的一部分，url 应该是这样的

`domanin.com/username/profile.html`

`domanin.com/username/events.html`

`domanin.com/username/messages.html`

你能指导我怎么做吗？

如果我在网站上注册为 ali，那么 ali 应该是我的网址的一部分，例如

`domain.com/ali/profile.html`

`domain.com/ali/events.html`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:59:57.127

这就是我在用户可以注册的网站上执行此操作的方式，它在 php 中，但可以修改以获得您想要的。

```
RewriteEngine On

# Full path
RewriteBase /

# Rewrite all php files    
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

# Rewrite the user profile pages
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^user/([a-zA-Z0-9_-]+)$ profile.php?user=$1
RewriteRule ^user/([a-zA-Z0-9_-]+)/$ profile.php?user=$1 
```

第一个 RewriteBase 是您站点的根目录。“# Rewrite all php files”下的第二个 Rewrite 设置将从文件中删除所有 .php 文件扩展名。

第三个重写集是您感兴趣的。 Profile.php 是用户配置文件，而 ?user=$1 是注册用户名。当 URL www.domain.com/user/userName/ 被调用时，它实际上会从页面 profile.php?user=userName 获取数据。

您将不得不稍微修改一下以按照您的意愿工作，看看我在 php 中的情况，但谷歌上都有关于如何做到这一点的教程。

# c# - 从本地网络中的PC中的一个文件夹获取备份到服务器PC

> ID：14685451
> 
> 赞同：0
> 
> 时间：2013-02-04T11:07:25.463
> 
> 标签：c#, network-programming, backup

我们在本地网络中有一些计算机，他们的用户在这些计算机的指定文件夹中创建新文件或更新现有文件。现在我想每 24 小时将这个文件夹中的这些文件复制到服务器上。

我怎么能在 C# 中做到这一点？我想编写一个 C# 程序，这样做。以及我必须在本地计算机中进行哪些网络配置，以便服务器可以访问本地计算机中的指定文件夹？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:12:18.097

如果我理解正确的问题，您可以使用像颠覆这样的版本控制工具，或者使用工具在计算机之间同步文件夹，看看[这篇文章](http://lifehacker.com/372175/free-ways-to-synchronize-folders-between-computers)。

# qt - 使用 Qt Designer 的工具栏布局

> ID：14685456
> 
> 赞同：1
> 
> 时间：2013-02-04T11:07:32.877
> 
> 标签：qt, layout, qt-designer, qtoolbar

我使用 Qt Designer 来设计`.ui`文件并在我的 VS-Project 中编译它们。我们有一个从 QToolbar 派生的 Toolbar 类。

类初始化看起来像这样。

```
MyToolBar::ToolBar(QWidget* qWidgetParent) :
    ToolBar(qWidgetParent),
    mUiToolBar(new Ui::MyToolBar())
    {
        mUiToolBar->setupUi(this);
        //...
     } 
```

对于固定位置和尺寸，一切正常。但是，如果我开始使用自动格式化的布局，一切都会被破坏。在这种情况下，一切都在左上角。

任何想法在这种情况下会发生什么？在 QToolbar 中使用布局的正确方法是什么？

编辑：我已经从我的项目中复制了代码。在此 MyToolBar 是由 ToolBar 派生的，这是一个用于管理相同功能的类。ToolBar 是由 QToolBar 派生的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:32:34.767

我不认为 ToolBar 意味着有一个布局。你想达到什么目的？

看到应该在布局中的左上角位置的所有内容表明这些子小部件未添加到布局（使用`QLayout::addWidget(...)`）或布局未添加到父小部件（您的工具栏，使用`QWidget::setLayout(...)`）。

此外，您可能打算调用`QToolBar(qWidgetParent),`而不是`ToolBar(qWidgetParent),`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:57:57.403

您忘记调用`QToolBar::addWidget()`，但您将小部件的父级设置为小`QToolBar`部件。

这将在 (0,0) 位置（相对于父级）创建所有小部件，但不会像您期望的那样布局它们。

# c# - 如何检测从列表中删除或添加

> ID：14685457
> 
> 赞同：0
> 
> 时间：2013-02-04T11:07:42.013
> 
> 标签：c#, wpf, linq, entity-framework

现在，我有一个包含学生 ID 和学生姓名的数据库。

```
studentsCollection.Where(c => c.ID.Contains(":")); 
```

然后，我只想带那些ID中有“冒号”的学生。而且，当我只使用 where 子句时，我会收到类似“edititem is not allowed for this view”之类的错误。但是，当我把句子变成（下）

```
studentsCollection.Where(c => c.ID.Contains(":")).ToList(); 
```

添加 ToList 函数；它将能够编辑但不能更新甚至删除。

有谁知道我可以如何修改这个错误？

***如果没有足够的信息知道我在问什么，请告诉我，谢谢。***

-----**编辑**-----

下面是我的已选择更改功能。

*错误情况*：当我只使用 where 子句时，我会得到“edititem is not allowed for this view” 无法 *更新情况*：当我添加 ToList 函数时，我会工作；但是，我不会更新我的数据。

```
private void StudentsDataGrid_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            var selectedStudents = e.AddedItems[0] as Students;

            var studentsCollection = selectedStudents.Data;

            studentsCollection.AssociationChanged += ColumnsCollection_Changed;
            var studentsViewSource = ((CollectionViewSource)(this.FindResource("StudentsDataViewSource")));

            studentsViewSource.Source = studentsCollection.Where(c => c.ID.Contains(":")).ToList();
        }

        private void ColumnsCollection_Changed(object sender, System.ComponentModel.CollectionChangeEventArgs e)
        {
            if (e.Action == CollectionChangeAction.Remove)
            {
                studySystemEntities.Data.DeleteObject(e.Element as Data);
            }
            else if (e.Action == CollectionChangeAction.Add)
            {
                studySystemEntities.Data.AddObject(e.Element as Data);
            }
        } 
```

# android - 在 Android 中将日期值添加到 ArrayList

> ID：14685459
> 
> 赞同：0
> 
> 时间：2013-02-04T11:07:55.650
> 
> 标签：android, date, date-parsing

从 Web 服务中，我得到一个日期值，例如“2011-05-31T00:00:00.000+03:00”，我想将它添加到 arrayList(String) 中。如何将其解析为字符串并将其像“31.05.2011”一样写入数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:14:13.700

```
DateFormat df1 = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSXXX");
Date date = df1.parse("2011-05-31T00:00:00.000+03:00")

DateFormat df2 = new SimpleDateFormat("dd.MM.yyyy");
String newDateString = df2.format(date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:20:45.527

使用这个功能：

```
public String getMydate(String mydate){
    try{
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ", Locale.US);
        Date date = sdf.parse(mydate);

        SimpleDateFormat sdf2 = new SimpleDateFormat("dd.MM.yyyy", Locale.US);
        return sdf2.format(date);
    }catch(Exception e){
        return null;
    }
} 
```

并检查它：

```
 String val = "2011-05-31T00:00:00.000+03:00";
    String res = getMydate(val); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:09:34.737

使用`SimpleDateFormat`检查 API：http: [//developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

# php - htaccess 重写目录

> ID：14685460
> 
> 赞同：0
> 
> 时间：2013-02-04T11:08:03.917
> 
> 标签：php, .htaccess, moodle

我在我的一个新主机上使用 Moodle，但遇到了问题。我在根目录上使用 Wordpress，在目录中使用 Moodle。但是，如果我去[http://domain.com/Moodle/](http://domain.com/Moodle/)

我收到以下错误：

检测到访问不正确，此服务器只能通过“ [http://www.domain.co.uk/Moodle](http://www.domain.co.uk/Moodle) ”地址访问，抱歉。请通知服务器管理员。

现在，问题在于 Moodle 我只能做一些配置文件：

$CFG->wwwroot = ' [http://www.domain.co.uk/Moodle](http://www.domain.co.uk/Moodle) '; $CFG->dataroot = '/home/profiled/moodledata';

这是我最终确定的问题：

是否可以使用 HTACCESS 来制作它，以便如果他们去

```
http://domain.co.uk/Moodle 
```

它将它们重定向到

```
www.domain.co.uk/Moodle 
```

不影响根目录？

到目前为止，这是我发现的解决方法：

```
<IfModule rewrite_module>

Options Indexes FollowSymLinks +IncludesNOEXEC 
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.mydomain\.org$ [NC]
RewriteRule ^/?(.*)$ http://www.mydomain.org/$1 [L,R=301]

</IfModule> 
```

# oracle - `Exception WHEN WHEN OTHERS THEN RAISE` 有什么作用吗？

> ID：14685467
> 
> 赞同：19
> 
> 时间：2013-02-04T11:08:22.933
> 
> 标签：oracle, plsql, oracle10g

作为 PL/SQL 的新手，我一直在复制和粘贴以下触发器：

```
CREATE OR REPLACE TRIGGER FOO_TRG1
    BEFORE INSERT
    ON FOO
    REFERENCING NEW AS NEW OLD AS OLD
    FOR EACH ROW
BEGIN
    IF :NEW.FOO_ID IS NULL THEN
        SELECT FOO_SEQ1.NEXTVAL INTO :NEW.FOO_ID FROM DUAL;
    END IF;

    EXCEPTION
        WHEN OTHERS THEN RAISE;
END FOO_TRG1;
/
ALTER TRIGGER FOO_TRG1 ENABLE; 
```

我怀疑包含的异常处理代码根本不做任何事情，并且可以简单地被删除，因为如果出现问题，无论如何我都会收到一条错误消息。我对吗？

*（我猜这样的代码是进一步编辑先前代码的结果。）*

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-04T11:12:08.293

是的，该异常只会引发相同的错误。它还用于掩盖错误的实际行号。如果我是你，我会删除它。

例如：

```
SQL> declare
  2    v number;
  3  begin
  4    select 1 into v from dual;
  5    select 'a' into v from dual;
  6  exception
  7    when others
  8    then
  9      raise;
 10  end;
 11  /
declare
*
ERROR at line 1:
ORA-06502: PL/SQL: numeric or value error: character to number conversion error
ORA-06512: at line 9 
```

与：

```
SQL> declare
  2    v number;
  3  begin
  4    select 1 into v from dual;
  5    select 'a' into v from dual;
  6  end;
  7  /
declare
*
ERROR at line 1:
ORA-06502: PL/SQL: numeric or value error: character to number conversion error
ORA-06512: at line 5 
```

第一个中的行号指向 raise 而不是实际的行号。它可以使跟踪错误变得更加困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T12:54:15.737

它不仅没有做任何事情，而且已经接近犯罪。它基本上说“只是为了好玩，我将假装错误发生在这一行而不是真正的行。”

异常处理是整个语言中最容易被误解的方面。以上是很常见的，我认为它源于基本的误解，即“未处理的异常”是一件坏事（它几乎引出了一个问题——你为什么不处理它？）。如果只有 Oracle 使用术语“发生异常”或“遇到异常”，我们这些必须支持此代码的可怜人将拥有更少的“WHEN OTHERS”异常处理程序，这让我们的生活变得悲惨。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-28T14:30:03.943

正如@DazzaL 所指出的，它除了掩盖错误线之外什么都不做。但它作为一个提醒，告诉你上面的代码可以引发一个应该被处理但处理仍然未定义的异常。

在其他编程语言中，您可以自动创建一个 try/catch 块（例如在 Eclipse/Java、Netbeans/PHP 或 Visual Studio/C# 中），它是用一个 catch 创建的（如“当其他人”），默认行为是 throw再次是异常，而程序员决定在引发异常时应该做什么。

# ios - 从另一个应用程序获取用户名和密码

> ID：14685472
> 
> 赞同：1
> 
> 时间：2013-02-04T11:08:42.880
> 
> 标签：ios, login, uniqueidentifier

我正在开发一组要求用户使用密码登录的应用程序。每个帐户对所有应用程序都有效，因此用户只需注册一次。

当用户 A 下载应用程序 App1 时，他必须注册，因为他从未在任何这些应用程序中注册。然后他下载应用程序 App2，我希望能够检测到他已经使用了应用程序 App1。我知道该怎么做（[UIApplication canOpenURL:](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/canOpenURL:)消息）。但真正令人惊奇的是使用他在第一个应用程序中使用的相同凭据自动登录他（或者至少建议他可以这样做）。

我一直认为我们不能在不同的应用程序之间共享数据，但我已经看到[Evernote](http://itunes.apple.com/app/evernote/id281796108)和[Evernote Hello](http://itunes.apple.com/app/evernote-hello/id484359282)应用程序可以这样做。在以前的 iOS 版本中，我们可以使用[uniqueIdentifier](http://developer.apple.com/library/ios/documentation/uikit/reference/UIDevice_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instp/UIDevice/uniqueIdentifier)值，但现在已弃用。我想到的另一个解决方案是使用[推送通知令牌](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application:didRegisterForRemoteNotificationsWithDeviceToken:)，但我们不能完全确定这对于所有应用程序都是一样的，对吧？或者我们可以使用设备电话号码（如果是 iphone），但我也认为[Apple 不喜欢我们使用用户的电话号码](https://stackoverflow.com/questions/193182/programmatically-get-own-phone-number-in-iphone-os)。

做到这一点的最佳方法是什么？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:13:35.070

您可以使用共享钥匙串来存储用户名、密码等并在应用程序之间共享。

请参阅[http://useyourloaf.com/blog/2010/04/03/keychain-group-access.html](http://useyourloaf.com/blog/2010/04/03/keychain-group-access.html) 和苹果示例[https://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro。 html](https://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html)

这是最好的，因为，1）苹果负责安全。2）即使在应用程序删除后它也是持久的。3) 跨备份移植

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:14:18.627

如果您需要在 iOS 应用程序之间共享数据，则可以使用`UIPasteboard`. 这篇[博客文章](http://kmithi.blogspot.co.uk/2012/03/sharing-data-among-ios-applications.html)记录了一种方法。

# wordpress - Wordpress - 更新后简码仍然有效：S

> ID：14685473
> 
> 赞同：1
> 
> 时间：2013-02-04T11:08:43.307
> 
> 标签：wordpress, shortcode

我创建了一个网站并使用了在我的函数文件中创建的自定义简码。

我现在已经更新了几次网站，没有考虑它可能对短代码产生什么影响。现在我想添加到我已经拥有的简码中，但我当然找不到原始简码，因为更新覆盖了函数文件。

**那么为什么我的简码仍然有效？wordpress 是否会备份并从这个旧版本调用短代码，如果是这样，我在哪里可以找到它？**

如果有办法访问这些短代码似乎仍在使用的代码，它将为我节省大量尝试重新创建旧代码的时间。

如果我能找到它们，我已经吸取了教训，并将短代码存储在他们自己的页面中，这样它们就不会再次被覆盖。

问候本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:36:25.910

Wordpress 更新不会影响 wp-content 目录，因此您的主题的 functions.php 文件不会被 Wordpress 升级所触及，并且所有短代码仍将起作用。

例外情况是，如果它们依赖在 Wordpress 升级中已弃用的核心功能 - 但您似乎并非如此。

# javascript - 如果页面不支持拖放，则使用 Modernizer.js 进行重定向

> ID：14685477
> 
> 赞同：0
> 
> 时间：2013-02-04T11:08:56.600
> 
> 标签：javascript, jquery

我已经成功配置了modernizer.js 来判断页面是否支持拖放。最初我对其进行了配置，以便是否支持显示一个 div 并且如果不显示另一个效果很好，直到我发现在此页面上运行的两个 js 脚本不能很好地相互配合。

在这一点上，我决定如果他们的浏览器不支持拖放，最好的办法就是将用户重定向到另一个页面。

我遇到的问题是我的 javascript 还不是那么好（我正在开发中），虽然我已经设法将它配置为重定向为 if/else 语句的 else 部分，但我希望它只需使用 if 而不使用 else 进行重定向（如果您知道我的意思吗？）。

这是我目前拥有的...

```
window.onload = function() {
   if (window.FileReader && Modernizr.draganddrop){
      //code left from when it was showing hidden divs
      document.getElementById('yes').style.display = 'block';
      document.getElementById('page_blurb').style.display = 'block';
   }else{
      window.location = "http://www.dentaldigs.co.uk/image_upload_non5.php"

   }
}; 
```

这就是我想做的...

```
window.onload = function() {
   if (window.FileReader && Modernizr.draganddrop not true){
      window.location = "http://www.dentaldigs.co.uk/image_upload_non5.php"   
   }
}; 
```

我希望这是有道理的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:13:31.163

怎么样

```
if(!(window.FileReader && Modernizr.draganddrop)) 
```

作为条件？

# android - 广域网中的安卓网络

> ID：14685479
> 
> 赞同：0
> 
> 时间：2013-02-04T11:09:01.810
> 
> 标签：android, networking, jmdns

所以我正在使用 jmdns 创建服务，我可以从 aadress 192.168.0.101:9999/servicename 的局域网访问它们（注意 192.168.0.101 是我的 android 手机 localIP）。现在，如果我想从广域网访问它们，我必须在我的路由器中进行端口转发，对吗？有没有办法为 192.168.0.101:9999 进行一次转发，以便我可以从广域网 routerPublicIP:9999/servicename 访问我手机上的服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:24:42.833

您应该使用 upnp 协议。它允许您创建端口转发映射，前提是您的路由器支持 upnp。

这是各种 torrent 客户端为了接受来自其他对等方的连接而执行的操作。

# .net - 具有后台工作程序的多个表单实例

> ID：14685481
> 
> 赞同：1
> 
> 时间：2013-02-04T11:09:05.540
> 
> 标签：.net, vb.net, backgroundworker, multiple-instances, onpaint

我有两种形式：“主要”和“面板”。
主窗体包含 2 个按钮：“bt_panel1”和“bt_panel2”。
每个按钮的功能是：

```
Private Sub bt_panel1_Click(sender As System.Object, e As System.EventArgs) Handles bt_panel1.Click
    Dim panel1_run As New panel
    panel1_run.PANEL_NUM = 1
    panel1_run.Name = "panel1_run"
    panel1_run.Text = "PANEL 1"
    panel1_run.Show()
End Sub 
```

（关于 bt_panel2，“2”而不是“1”）

面板形式包含：

*   函数加载：

```
Private Sub panel_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    [...]
    'create 80 picturboxes 
    For i = 1 To 4
       For k = 1 To 20
          Dim picture As New PictureBox
          picture.Name = "pic" & i & "c" & k
          [...]
          Controls.Add(picture)
          AddHandler picture.Paint, AddressOf paintchar
       Next
    Next
    'start BackgroundWorker
     BackgroundWorker1.RunWorkerAsync()
End Sub 
```

*   一个后台工作者控件（它做一些不相关的事情）及其“RunWorkerCompleted”：

```
Private Sub BackgroundWorker1_RunWorkerCompleted(sender As System.Object, e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
    Dim temp As PictureBox
    Try
       For i = 1 To 4
           For k = 1 To 20
               'for each picturebox call refresh (paintchar)
                temp = Me.Controls.Item("pic" & i & "c" & k)
                temp.Refresh()
           Next
       Next
       'restart BackgroundWorker1 continuosly
       BackgroundWorker1.RunWorkerAsync()
    Catch ex As Exception
       MsgBox("Error BackgroundWorker1_RunWorkerCompleted" & vbCrLf & ex.Message)
    End Try
End Sub 
```

*   功能涂料：

```
Private Sub paintchar(sender As System.Object, e As System.Windows.Forms.PaintEventArgs)
   [...]
   Try
      e.Graphics.FillEllipse(Brushes.LawnGreen, New RectangleF(loc, size))
   Catch ex As Exception
        MsgBox("Error paintchar" & vbCrLf & ex.Message)
   End Try
End Sub 
```

**如果我只打开一个面板（在 Main 中按 bt_panel1 或 bt_panel2），一切正常。**
但是，如果我打开两个面板（在 Main 中按 bt_panel1 和 bt_panel2），应用程序没有响应，并且 panel2 完全空白（未绘制）。
应用程序没有响应（我无法关闭面板，也无法关闭 Main...我必须终止调试才能关闭）。
不调用异常。
未使用 ReportProgress 函数。
DoWork 函数从 SharedMemory 区域读取一些数据（panel1 和 2 的数据不同）

我认为问题在于 RunWorkerCompleted 中的“Me.Controls”没有引用到表单的相应实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:52:13.520

据我了解后台工作人员您无法从后台工作线程内部引用 UI 或其控件，因此您认为 me.cosntrols 语句在某种程度上存在错误可能是正确的。

# java - 使用itext在java swing中查看pdf？

> ID：14685486
> 
> 赞同：0
> 
> 时间：2013-02-04T11:09:25.033
> 
> 标签：java, swing, itext

> **可能重复：**
> [Java PDF 查看器](https://stackoverflow.com/questions/4437910/java-pdf-viewer)

我是java和itext的初学者。我正在尝试在我自己的应用程序中将 Pdf 文件作为图像读取......

据我了解，在 itext 中“读取 PDF 文件”开始创建文档并通过 PdfReader 类逐页读取 PDF，然后通过 PdfWriter 将读取的页面写入文档。最后，PDF 已保存到 Document。之后我无法将文档导入或显示到 Java Swing 组件？！请告诉我怎么做。

感谢您的任何回复和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:40:47.887

iText 不是 PDF 渲染器，它对您想要实现的目标没有任何用处。

# hibernate - 带有外连接的休眠 HQL 查询

> ID：14685489
> 
> 赞同：2
> 
> 时间：2013-02-04T11:09:39.470
> 
> 标签：hibernate, hql, hibernate-mapping, informix, outer-join

我想问一下如何将 OUTER 从 Informix 更改为 HQL 查询。目前面临错误`unexpected token:outer`

### SQL查询：

```
select a.SC_OB_PROFILE_CODE, b.SC_ORIG_SF_GROUP_CODE, f.SC_ORIG_SAC, 
f.SC_ORIG_FAC,b.SC_PROD_CONT_GROUP_CODE, d.SC_PROD_CONT_CODE, e.GP_CD, a.SC_ORIG_COUNTRY,
a.SC_DEST_COUNTRY, a.SC_DEST_SAC, a.SC_DEST_FAC, a.SC_SEND_DOW,
a.SC_OB_SORT_CODE, a.ORIG_OB_SORT_CODE, a.TARGET_OB_SORT_CODE, a.SC_TIMESTAMP
from SC_OB_TEMP_AUDIT2 a, SC_OB_ALLOCATION b, outer SC_FAC_GROUP f,
outer (SC_OB_PROD_GROUP d, GBL_PRODUCT e)
where a.SC_ORIG_COUNTRY = 'MY'
and a.EXPORT_FLAG = 'N'
and a.SC_OB_PROFILE_CODE = b.SC_OB_PROFILE_CODE
and a.SC_ORIG_COUNTRY = b.SC_ORIG_COUNTRY
and f.SC_ORIG_COUNTRY = b.SC_ORIG_COUNTRY
and b.SC_ORIG_SF_GROUP_CODE = f.SC_FAC_GROUP_CODE
and d.SC_ORIG_COUNTRY = b.SC_ORIG_COUNTRY
and b.SC_PROD_CONT_GROUP_CODE = d.SC_PROD_GROUP_CODE
and e.GP_CNT_CD = d.SC_PROD_CONT_CODE
order by a.SC_TIMESTAMP, a.SC_OB_PROFILE_CODE, a.SC_DEST_COUNTRY 
```

### HQL查询：

```
@SuppressWarnings("unchecked")
public List<LoginCountryEBean> getExportDetails(String country){
List<LoginCountryEBean> expDel = null;
Query q= em1.createQuery("select a.obProfileCode, b.sfGroupCode, f.orgSac," +
"f.sc_orig_fac,b.contGroupCode, d.prodContCode, e.gpCd, a.origCountry," +
"a.destCountry, a.destSac, a.destFac, a.sendDow, a.obSortCode, " +
"a.origObSortCode, a.targetObSortCode, a.timeStamp from AuditBean a, " +
"AllocationEBean b, **outer** FacGroupEBean f,**outer**(ProdGroupEBean d, glbProductEBean e)" +
"where a.origCountry :country and a.exportFlag = 'N' " +
"and a.obProfileCode = b.profileCode" +
"and a.origCountry = b.orgCountry" +
"and f.orgCountry = b.orgCountry" +
"and b.sfGroupCode = f.facGroupCode" +
"and d.orgCountry = b.orgCountry" +
"and b.contGroupCode = d.prodGroupCode" +
"and e.gpCntCd = d.prodContCode" +
"order by a.timeStamp, a.obProfileCode, a.destCountry");
q.setParameter("country", country);
expDel =  q.getResultList();    
return expDel; 

//
AllocationEBean
package com.dhl.gls.persistence.bean;

import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="SC_OB_ALLOCATION")
public class AllocationEBean implements Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name="sc_orig_country")
    private String orgCountry;

    @Id
    @Column(name="sc_orig_sf_group_code")
    private String sfGroupCode;

    @Id
    @Column(name="sc_prod_cont_group_code")
    private String contGroupCode;

    @Id
    @Column(name="sc_ob_profile_code")
    private String profileCode;

    public String getOrgCountry() {
        return orgCountry;
    }

    public void setOrgCountry(String orgCountry) {
        this.orgCountry = orgCountry;
    }

    public String getSfGroupCode() {
        return sfGroupCode;
    }

    public void setSfGroupCode(String sfGroupCode) {
        this.sfGroupCode = sfGroupCode;
    }

    public String getContGroupCode() {
        return contGroupCode;
    }

    public void setContGroupCode(String contGroupCode) {
        this.contGroupCode = contGroupCode;
    }

    public String getProfileCode() {
        return profileCode;
    }

    public void setProfileCode(String profileCode) {
        this.profileCode = profileCode;
    }

}

//
AuditEBean
package com.dhl.gls.persistence.bean;

import java.io.Serializable;
import java.util.Date;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="sc_ob_temp_audit2")
public class AuditBean implements Serializable
{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name="audit_Id")
    private long auditId;

    @Column(name="sc_ob_profile_code")
    private String obProfileCode = null;

    @Column(name="sc_orig_country")
    private String origCountry = null;

    @Column(name="sc_dest_country")
    private String destCountry = null;

    @Column(name="sc_dest_sac")
    private String destSac = null;

    @Column(name="sc_dest_fac")
    private String destFac = null;

    @Column(name="sc_send_dow")
    private String sendDow = null;

    @Column(name="sc_ob_sort_code")
    private String obSortCode = null;

    @Column(name="orig_ob_sort_code")
    private String origObSortCode = null;

    @Column(name="target_ob_sort_code")
    private String targetObSortCode = null;

    @Column(name="usr_id")
    private String userId = null;

    @Column(name="sc_timestamp")
    private Date timeStamp = null;

    @Column(name="export_flag")
    private String exportFlag = null;

    public String getObProfileCode() {
        return obProfileCode;
    }

    public String getOrigCountry() {
        return origCountry;
    }

    public String getDestCountry() {
        return destCountry;
    }

    public String getDestSac() {
        return destSac;
    }

    public String getDestFac() {
        return destFac;
    }

    public String getSendDow() {
        return sendDow;
    }

    public String getObSortCode() {
        return obSortCode;
    }

    public String getOrigObSortCode() {
        return origObSortCode;
    }

    public String getTargetObSortCode() {
        return targetObSortCode;
    }

    public Date getTimeStamp() {
        return timeStamp;
    }

    public String getExportFlag() {
        return exportFlag;
    }

    public void setObProfileCode(String obProfileCode) {
        this.obProfileCode = obProfileCode;
    }

    public void setOrigCountry(String origCountry) {
        this.origCountry = origCountry;
    }

    public void setDestCountry(String destCountry) {
        this.destCountry = destCountry;
    }

    public void setDestSac(String destSac) {
        this.destSac = destSac;
    }

    public void setDestFac(String destFac) {
        this.destFac = destFac;
    }

    public void setSendDow(String sendDow) {
        this.sendDow = sendDow;
    }

    public void setObSortCode(String obSortCode) {
        this.obSortCode = obSortCode;
    }

    public void setOrigObSortCode(String origObSortCode) {
        this.origObSortCode = origObSortCode;
    }

    public void setTargetObSortCode(String targetObSortCode) {
        this.targetObSortCode = targetObSortCode;
    }

    public void setTimeStamp(Date timeStamp) {
        this.timeStamp = timeStamp;
    }

    public void setExportFlag(String exportFlag) {
        this.exportFlag = exportFlag;
    }

    public long getAuditId() {
        return auditId;
    }

    public void setAuditId(long auditId) {
        this.auditId = auditId;
    }

    public String getUserId() {
        return userId;
    }

    public void setUserId(String userId) {
        this.userId = userId;
    }
}

//
prodGroupEBean
package com.dhl.gls.persistence.bean;

import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="SC_OB_PROD_GROUP")
public class ProdGroupEBean implements Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name="sc_orig_country")
    private String orgCountry;

    @Id
    @Column(name="sc_prod_cont_code")
    private String prodContCode;

    @Id
    @Column(name="sc_prod_group_code")
    private String prodGroupCode;

    public String getOrgCountry() {
        return orgCountry;
    }

    public void setOrgCountry(String orgCountry) {
        this.orgCountry = orgCountry;
    }

    public String getProdContCode() {
        return prodContCode;
    }

    public void setProdContCode(String prodContCode) {
        this.prodContCode = prodContCode;
    }

    public String getProdGroupCode() {
        return prodGroupCode;
    }

    public void setProdGroupCode(String prodGroupCode) {
        this.prodGroupCode = prodGroupCode;
    }

}

//
FacGroupEBean
package com.dhl.gls.persistence.bean;

import java.io.Serializable;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="SC_FAC_GROUP")
public class FacGroupEBean implements Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name="sc_orig_country")
    private String orgCountry;

    @Id
    @Column(name="sc_orig_sac")
    private String orgSac;

    @Id
    @Column(name="sc_orig_fac")
    private String orgFac;

    @Id
    @Column(name="sc_fac_group_code")
    private String facGroupCode;

    public String getOrgCountry() {
        return orgCountry;
    }

    public void setOrgCountry(String orgCountry) {
        this.orgCountry = orgCountry;
    }

    public String getOrgSac() {
        return orgSac;
    }

    public void setOrgSac(String orgSac) {
        this.orgSac = orgSac;
    }

    public String getOrgFac() {
        return orgFac;
    }

    public void setOrgFac(String orgFac) {
        this.orgFac = orgFac;
    }

    public String getFacGroupCode() {
        return facGroupCode;
    }

    public void setFacGroupCode(String facGroupCode) {
        this.facGroupCode = facGroupCode;
    }   
}

//
glsproductionEBean
package com.dhl.gls.persistence.bean;

import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="GBL_PRODUCT")
public class glbProductEBean implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name="gp_cd")
    private String gpCd;

    @Column(name="gp_cnt_cd")
    private String gpCntCd;

    @Column(name="gp_sort_cd")
    private String gpSortCd;

    @Column(name="gp_short_nm")
    private String gp_short_nm;

    @Column(name="hf_lk")
    private Long hfkl;

    @Column(name="pasdt_cd")
    private String pasdtCd;

    @Column(name="psd_cd")
    private Short psdCd;

    @Column(name="gp_geo_markt")
    private String gpGeoMarkt;

    @Column(name="gp_doc_ndoc_ind")
    private String gpDocNdocInd;

    public String getGpCd() {
        return gpCd;
    }

    public void setGpCd(String gpCd) {
        this.gpCd = gpCd;
    }

    public String getGpCntCd() {
        return gpCntCd;
    }

    public void setGpCntCd(String gpCntCd) {
        this.gpCntCd = gpCntCd;
    }

    public String getGpSortCd() {
        return gpSortCd;
    }

    public void setGpSortCd(String gpSortCd) {
        this.gpSortCd = gpSortCd;
    }

    public String getGp_short_nm() {
        return gp_short_nm;
    }

    public void setGp_short_nm(String gp_short_nm) {
        this.gp_short_nm = gp_short_nm;
    }

    public Long getHfkl() {
        return hfkl;
    }

    public void setHfkl(Long hfkl) {
        this.hfkl = hfkl;
    }

    public String getPasdtCd() {
        return pasdtCd;
    }

    public void setPasdtCd(String pasdtCd) {
        this.pasdtCd = pasdtCd;
    }

    public Short getPsdCd() {
        return psdCd;
    }

    public void setPsdCd(Short psdCd) {
        this.psdCd = psdCd;
    }

    public String getGpGeoMarkt() {
        return gpGeoMarkt;
    }

    public void setGpGeoMarkt(String gpGeoMarkt) {
        this.gpGeoMarkt = gpGeoMarkt;
    }

    public String getGpDocNdocInd() {
        return gpDocNdocInd;
    }

    public void setGpDocNdocInd(String gpDocNdocInd) {
        this.gpDocNdocInd = gpDocNdocInd;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:30:10.020

进行连接的语法是

```
select ... from Entity1 e1
[inner | left [outer]] join e1.entity2s e2
[inner | left [outer]] join e2.entity3s e3
... 
```

阅读[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:09:21.230

您遇到的问题是（过时的）旧式 Informix OUTER 连接表示法不被其他系统（例如 HQL）理解。这是原始 Informix 查询的稍微简化的版本：

```
select a.*, b.*, d.*, e.*, f.*
  from SC_OB_TEMP_AUDIT2 a,
       SC_OB_ALLOCATION b,
       outer SC_FAC_GROUP f,
       outer (SC_OB_PROD_GROUP d, GBL_PRODUCT e)
 where a.SC_ORIG_COUNTRY = 'MY'
   and a.EXPORT_FLAG = 'N'
   and a.SC_OB_PROFILE_CODE = b.SC_OB_PROFILE_CODE
   and a.SC_ORIG_COUNTRY = b.SC_ORIG_COUNTRY
   and f.SC_ORIG_COUNTRY = b.SC_ORIG_COUNTRY
   and b.SC_ORIG_SF_GROUP_CODE = f.SC_FAC_GROUP_CODE
   and d.SC_ORIG_COUNTRY = b.SC_ORIG_COUNTRY
   and b.SC_PROD_CONT_GROUP_CODE = d.SC_PROD_GROUP_CODE
   and e.GP_CNT_CD = d.SC_PROD_CONT_CODE
 order by a.SC_TIMESTAMP, a.SC_OB_PROFILE_CODE, a.SC_DEST_COUNTRY; 
```

首先，我通过使用`a.*`表示法从每个别名表名中选择列来简化选择列表，并且更清楚地公开了 FROM 子句的内容。

表（带有别名——但我将假装别名是表名）`a`并且`b`是内部连接的。那是外连接到`f`; 它也独立地外部连接到外部连接到的`d`结果`e`。为了重写它以便 HQL 有机会理解它，我们将不得不写一些接近这个的东西：

```
SELECT a.*, b.*, d.*, ef.*
  FROM sc_ob_temp_audit2 AS a
  JOIN sc_ob_allocation  AS b
    ON a.sc_ob_profile_code = b.sc_ob_profile_code
   AND a.sc_orig_country    = b.sc_ob_orig_country
 OUTER JOIN sc_fac_group AS f
    ON b.sc_orig_country       = f.sc_orig_country
   AND b.sc_orig_sf_group_code = f.sc_fac_group_code
 OUTER JOIN (SELECT e.*, f.*
               FROM sc_ob_prod_group AS d
              OUTER JOIN gbl_produce AS e
                 ON d.sc_prod_cont_code = e. gp_cnt_cd
            ) AS ef.*
    ON b.sc_orig_country         = ef.sc_orig_country
   AND b.sc_prod_cont_group_code = ef.sc_prod_group_code
 WHERE a.sc_orig_country = 'MY'
   AND a.export_flag     = 'N'
 ORDER BY a.sc_timestamp, a.sc_ob_profile_code, a.sc_dest_country; 
```

除了反转关键字与数据库对象的大小写之外，这是对原始查询的相当直接的翻译。`ef`您会注意到，在此修订版中，外部连接的子查询被赋予了别名。这是必要的；SQL 标准要求为此类子查询指定别名。因此，您可能会遇到模棱两可的列错误。您可以通过将`*`子查询中的符号替换为您要选择的确切列名集来解决这些问题。而且，当然，您需要再次将`*`选择列表中的符号替换为您想要的列集。

# php - PHP foreach 不适用于子数组

> ID：14685490
> 
> 赞同：1
> 
> 时间：2013-02-04T11:09:40.500
> 
> 标签：php, mongodb, foreach, arrays

我需要弄清楚如何做才能使以下工作。

我有一个带有子数组的数组

```
array (
  'session' => '1359964785.85203874781',
  'status' => 'cart',
  'items' => 
  array (
    'id' => '510bca8138fc5d6e38000000',
    'quantity' => '1',
  ),
) 
```

然后当我把那个数组认为我的 foreach

```
<?php
       $cart = Shop::get_cart();
       ;
            if($cart != NULL)
            { 
                foreach($cart[0]['items'] as $items)
                {
                    print $items['id'];
                ?>
                <tr>

                </tr>
                <?php
                }   
            }
       ?> 
```

我似乎无法访问项目的子数组。我想要做的就是这样称呼它

```
$items["id"];
$items["quantity"]; 
```

**编辑**

我通过以下代码从 MongoDB 获取数据

```
public function get_cart()
    {
        $collection = static::db()->redi_shop_orders;
        $cursor = $collection->find(array('session' => $_SESSION["redi-Shop"]));
        if ($cursor->count() > 0)
        {
            $posts = array();
            // iterate through the results
            while( $cursor->hasNext() ) {   
                $posts[] = ($cursor->getNext());
            }
            return $posts;
        }
    } 
```

当我打印出来时返回

```
Array ( [0] => Array ( [_id] => MongoId Object ( [$id] => 510f8eba38fc5d7d43000000 ) [session] => 1359964785.85203874781 [status] => cart [items] => Array ( [id] => 510bca8138fc5d6e38000000 [quantity] => 1 ) ) ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T11:11:10.620

你应该更换

```
foreach($cart[0]['items'] as $items) 
```

和

```
foreach($cart['items'] as $items) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:20:15.673

```
<?php
   $cart = array (
  'session' => '1359964785.85203874781',
  'status' => 'cart',
  'items' => 
  array (
 'id' => '510bca8138fc5d6e38000000',
'quantity' => '1',
 ),
);

        if($cart != NULL)
        { 
            foreach($cart['items'] as $items)
            {
                print $items['id'];
            ?>
            <tr>

            </tr>
            <?php
            }   
        }
   ?> 
```

# python - Pymongo光标不循环

> ID：14685492
> 
> 赞同：1
> 
> 时间：2013-02-04T11:09:45.627
> 
> 标签：python, pymongo

这有效-

```
cursor = collection.find(query).limit(10678)
for doc in cursor: print "entered loop" 
```

这不——

```
cursor = collection.find(query).limit(10679)
for doc in cursor: print "entered loop" 
```

它只是不进入循环。当然这个上限数对于不同的集合是不同的，这可能是因为每个文档的大小不同。那么 pymongo 中的游标是否有大小限制？
有什么线索吗？

# c# - 在 C# 中插入数据库时 遇到错误

> ID：14685493
> 
> 赞同：0
> 
> 时间：2013-02-04T11:09:46.070
> 
> 标签：c#, sql, insert

我正在向数据库中插入值，但是当要插入的值带有撇号（例如 Jo's）时出现错误。我该如何解决这个问题？这是我的代码

```
 SqlDataReader readerReference = cmd_Reference.ExecuteReader();

        int loginIndex = readerReference.GetOrdinal("a column");
        int DomCodeLoginIndex = readerReference.GetOrdinal("a column");
        int dom_domain = readerReference.GetOrdinal("dom_domaine"); 
        int emp_surname = readerReference.GetOrdinal("a column");
        int emp_name = readerReference.GetOrdinal("a column");
        int srv_name = readerReference.GetOrdinal("a column");
        int emp_model_tel = readerReference.GetOrdinal("a column");
        int emp_EntryDate = readerReference.GetOrdinal("a column");
        int emp_Telephone = readerReference.GetOrdinal("a column");
        int emp_Mobile = readerReference.GetOrdinal("a column");
        int emp_Email = readerReference.GetOrdinal("a column");

        string insert = "INSERT INTO EMP_tracking(emp_login, emp_dom_code, emp_domain,   emp_affectation_date, emp_surname" +
            ",emp_name, emp_service,emp_telephone_model" +
            ",emp_entry_date" +
            ",emp_telephone_number" +
            ",emp_cellphone_number" +
            ",emp_email) VALUES ('{0}',{1},'{2}','"+DateTime.Now.ToString("yyyy/MM/dd hh:mm:ss") +"','{3}','{4}','{5}','{6}','{7}','{8}','{9}','{10}')";

    string toInsert = string.Format(insert, readerReference.GetString(loginIndex),
                                            readerReference.GetInt32(DomCodeLoginIndex ), 
                                            readerReference.GetString(dom_domain),
                                            readerReference.GetString(emp_surname ),
                                            readerReference.GetString(emp_name), 
                                            readerReference.GetString(srv_name), 
                                            readerReference.GetString(emp_model_tel), 
                                            readerReference.GetDateTime(emp_EntryDate), 
                                            readerReference.GetString(emp_Telephone),
                                            readerReference.GetString(emp_Mobile), 
                                            readerReference.GetString(emp_Email)
                                   );      

    cmd_Insert.CommandText = toInsert;
    cmd_Insert.ExecuteNonQuery(); 
```

假设相关列是emp_login。解决方案将如何在其上实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:13:20.283

使用**[参数化查询](http://msdn.microsoft.com/en-us/library/c6tdby40.aspx)**，这将解决您的问题并将您从[SQL 注入中拯救出来](http://en.wikipedia.org/wiki/SQL_injection)

请参阅本教程：[C-Sharp 数据库参数化插入教程](http://www.vistadb.net/tutorials/insertrows-csharp.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:14:25.710

这个问题一遍又一遍地出现。您不应该使用连接创建 SQL 字符串 - 而是使用参数：

```
string insert = "INSERT INTO EMP_tracking(emp_login, emp_dom_code, emp_domain,   emp_affectation_date, emp_surname" +
        ",emp_name, emp_service,emp_telephone_model" +
        ",emp_entry_date" +
        ",emp_telephone_number" +
        ",emp_cellphone_number" +
        ",emp_email) VALUES (@emp_login, @emp_dom_code, //... etc.";

cmd_Insert.Parameters.AddWithValue("@emp_login", readerReference.GetString(loginIndex));
cmd_Insert.Parameters.AddWithValue("@emp_dom_code", readerReference.GetInt32(DomCodeLoginIndex));
//etc... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:12:35.227

您可以尝试用另一个撇号转义撇号。

这里有一个类似的问题： [如何插入包含撇号（单引号）的值？](https://stackoverflow.com/questions/1912095/how-to-do-a-sql-insert-with-a-value-with-an-apostrophe-in-it).

警告：SQL 注入警报。除非通过参数，否则不允许数据库操作。

# nsurlconnection - 如何知道 NSURLResponse 是否来自缓存？

> ID：14685500
> 
> 赞同：18
> 
> 时间：2013-02-04T11:10:16.273
> 
> 标签：nsurlconnection, nsurlrequest, nsurlcache, nsurlconnectiondelegate

我在特定文件夹上设置了 NSURLCache（../../Application Support/Offline 所以它不会被操作系统随机删除），然后我发送一个带有 NSURLRequestReturnCacheDataElseLoad 策略的 NSURLRequest。

如何判断由符合 NSURLConnectionDelegate 的类处理的响应来自缓存还是来自网络？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-17T11:07:20.697

关于这个问题的好文章：

[http://andrewmarinov.com/ioss-corenetwork-lying/](http://andrewmarinov.com/ioss-corenetwork-lying/)

基本上，从 NSHTTPURLResponse 状态码总是 200

因此，如果您确实需要知道，可以在发出请求之前检查该项目是否在缓存中

```
NSCachedURLResponse *cachedResponse = [[NSURLCache sharedURLCache] cachedResponseForRequest:request];
NSHTTPURLResponse *httpCacheResponse = (NSHTTPURLResponse *)cachedResponse.response; 
```

如果是这样，请保存修改后的“etag”或“modified-date”标头

```
NSString* etag = httpCacheResponse.allHeaderFields[@"etag"]; 
```

然后，在响应处理程序中检查 etag 或 modified-date 是否相同。如果是这样，则响应来自缓存！

# android - Android：来自 MotionEvent 的“getViewId（）”覆盖 dispatchTouchEvent（MotionEvent me）

> ID：14685504
> 
> 赞同：1
> 
> 时间：2013-02-04T11:10:30.920
> 
> 标签：android, android-layout

是否可以通过覆盖`dispatchTouchEvent`方法来获取单击/触摸的视图的 ID？！所以我需要它，比如 pEvent.getClickedViewId()。我只是有一些奇怪的 UI 行为，我想这是因为某些布局重叠。这就是为什么我要检查哪个视图在 TouchEvent 的前景中......

```
 @Override
 public boolean dispatchTouchEvent(MotionEvent pEvent) {

    Log.d("TOUCH EVENT","getCLickedViewid?!?!" );

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:29:46.313

此时您无法轻松获取视图，因为 dispatchTouchEvent 是在它被分派到任何视图之前被触发的。您必须弄清楚哪个视图将自己处理事件。

一种更常见的方法是通过 view.setOnTouchListener() 方法添加触摸侦听器，该方法会将视图传递给处理程序。但是，如果这适用于您的情况，因为此时事件已被调度，我不确定。

# ruby-on-rails - 无法使用嵌套表单和自定义类名批量分配受保护的属性

> ID：14685505
> 
> 赞同：0
> 
> 时间：2013-02-04T11:10:36.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, nested-attributes

我知道很多人已经遇到了同样的问题，但我没有找到适合我的特殊情况的解决方案。我有以下型号：

```
class Invoicing::CommercialDocumentLine < ActiveRecord::Base
  attr_accessible :commercial_document_line_details_attributes

  has_many :details, :class_name => "Invoicing::CommercialDocumentLineDetail", :foreign_key => :commercial_document_line_id
  accepts_nested_attributes_for :details
end 
```

和

```
class Invoicing::CommercialDocumentLineDetail < ActiveRecord::Base
  attr_accessible :description, :commercial_document_line_id

  belongs_to :commercial_document_line
end 
```

我有一个表格来更新一个`CommercialDocumentLine`允许用户添加一些细节的表格：

```
= simple_form_for line do |f|

  ## some code here which works great

  = f.simple_fields_for :commercial_document_line_details do |fd|
    = fd.input :description 
```

问题是我一直收到警告：

```
WARNING: Can't mass-assign protected attributes: commercial_document_line_details 
```

这是我的控制台日志：

```
"invoicing_commercial_document_line"=>{"article_id"=>"3", "unit_price"=>"200.0", "format_quantity"=>"2.0", "discount_rate"=>"0.0", "commercial_document_line_details"=>{"description"=>"awesome"}}, "commercial_document_id"=>"1", "id"=>"11"} 
```

事实是我对这里发生的事情有点困惑：如果我用我的形式替换

```
= f.simple_fields_for :commercial_document_line_details 
```

经过

```
= f.simple_fields_for :details 
```

那么表格将不会显示。如果我更换

```
attr_accessible :commercial_document_line_details_attributes 
```

经过

```
attr_accessible :details_attributes 
```

然后我有同样的错误。

我当然在这里遗漏了一些东西，但我无法弄清楚。
任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:17:29.480

如果您使用`= f.simple_fields_for :details`，它实际上是在获取 的详细信息列表`f.object`。对于新对象，这通常是空白的，因此您什么都看不到。这是正确的使用方法`fields_for`。您只需要在控制器中使用`@line.details.build`或在视图中使用`f.object.details.build`

# ruby-on-rails - 如何从多个地方重定向到上一页？

> ID：14685510
> 
> 赞同：2
> 
> 时间：2013-02-04T11:10:53.830
> 
> 标签：ruby-on-rails, ruby, routing

我可能在这里遗漏了一些非常简单的东西......

假设我有模型称为`Option`. 然后，我在视图中列出这些选项，其中启用/禁用按钮会导致控制器操作，然后启用或禁用特定`Option`的 .

如果列表只在一个地方，我只知道打电话`redirect_to`或`render`让用户返回正确的页面，因为只有一个。

如果同一个列表在多个地方怎么办？

意思是，如果只有一个控制器具有启用/禁用操作，我如何使该控制器“返回”用户到他们单击按钮的页面？

我想过将上一页保留在会话变量或其他东西中，但这似乎是错误的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T11:13:14.057

你可以使用`redirect_to :back`或`request.env['HTTP_REFERER']`

# java - 网格视图项的

> ID：14685519
> 
> 赞同：0
> 
> 时间：2013-02-04T11:11:14.377
> 
> 标签：java, android, xml

我`GridView`在我的应用程序中使用，我将列数设置为 2，它工作正常，但如果网格中的项目数大于 8 个项目，它开始重复第一个项目。

我想达到 14 个项目而不重复任何项目。谢谢！

这是我的gridview xml

```
 <GridView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:columnWidth="160dp"
    android:gravity="center"
    android:horizontalSpacing="10dp"
    android:numColumns="2"
    android:paddingTop="10dp"
    android:layout_below="@id/View1"
    android:stretchMode="columnWidth"
    android:verticalSpacing="20dp" /> 
```

！[这是屏幕截图，到达 (cotact 8) 后，它会重复 (cotact 1)、(cotact 2) ...等][1] 这是我的适配器

```
public View getView(int position, View convertView, ViewGroup parent)
    {

        View v;

        if (convertView == null) {  // if it's not recycled, initialize some attributes

            LayoutInflater li = (LayoutInflater) mContext.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
            v = li.inflate(R.layout.icon_launcher, null);

            TextView tv = (TextView)v.findViewById(R.id.icon_text); 
            ImageButton ib = (ImageButton)v.findViewById(R.id.icon_image);              
            LinearLayout icon = (LinearLayout)v.findViewById(R.id.icon_launcher);

            //icon.setLayoutParams(new GridView.LayoutParams(203,200));
            ib.setScaleType(ib.getScaleType().FIT_XY);          
            ib.setPadding(1,1,1,1);
            ib.setFocusable(false);
            ib.setClickable(false);          
            ib.setImageBitmap(BitmapFactory.decodeFile(mThumbIds.get(position)));

            tv.setText(mTextsIds.get(position));
 } else

        {
            v = (View) convertView;

        }

        return v;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:39:41.770

试试这个修复。

```
public View getView(int position, View convertView, ViewGroup parent) {

        if (convertView == null) { // if it's not recycled, initialize some
                                    // attributes

            LayoutInflater li = (LayoutInflater) mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = li.inflate(R.layout.icon_launcher, null);

        } 

        TextView tv = (TextView) convertView.findViewById(R.id.icon_text);
        ImageButton ib = (ImageButton) convertView.findViewById(R.id.icon_image);
        LinearLayout icon = (LinearLayout) convertView
                        .findViewById(R.id.icon_launcher);

        // icon.setLayoutParams(new GridView.LayoutParams(203,200));
        ib.setScaleType(ib.getScaleType().FIT_XY);
        ib.setPadding(1, 1, 1, 1);
        ib.setFocusable(false);
        ib.setClickable(false);
        ib.setImageBitmap(BitmapFactory.decodeFile(mThumbIds.get(position)));

                tv.setText(mTextsIds.get(position));
        return convertView;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:59:11.877

这是因为您的适配器正在重用视图。在您的代码中，您只有在**convertView**为空（被创建）时才能获得控件。

* * *

在某些项目 android 开始重用视图（convertView 不再为空）并且您的**getView**方法没有设置 textview 等之后。

* * *

您应该像@Glenn 建议的那样在“if (convertView == null)”方法之外设置内容（textview 等）。

# c# - 如何增加面板滚动条的大小？

> ID：14685521
> 
> 赞同：1
> 
> 时间：2013-02-04T11:11:21.687
> 
> 标签：c#, graphics, gdi+

如何增加`Panel`滚动条的大小？Panel 控件中没有任何可用于滚动条大小的属性。

我知道这可以在 .Net 中使用 GDI+ 来实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:12:03.687

您可以使用单独的控件[VScrollBar](http://msdn.microsoft.com/en-us/library/system.windows.forms.vscrollbar.aspx)和[HScrollBar](http://msdn.microsoft.com/en-us/library/system.windows.forms.hscrollbar.aspx) - 可以设置它们的宽度。您还可以编写自己的自定义滚动条，例如[Core Custom Scrollbar](http://www.codeproject.com/Articles/7791/Core-Custom-Scrollbar-Class)。

这两种解决方案都需要一些额外的工作，因为您将无法使用`Panel.AutoScroll`属性。您可以放置​​一个`VScrollBar`并将其用作“自定义可滚动面板”以获得更好的功能。`HScrollBar``UserControll`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:03:41.733

似乎 .Net 面板控件不提供此功能。

如果你想自己画你应该使用 GDI / GDI+ 另外，你仍然需要处理命中测试的事情来响应鼠标消息。

# ios - 带有自定义运行脚本和 xcodebuild 的“找不到命令”

> ID：14685522
> 
> 赞同：4
> 
> 时间：2013-02-04T11:11:34.420
> 
> 标签：ios, xcode, bash, xcodebuild, run-script

我正在运行一个自定义脚本，其中包含一个命令（ios-sim），bash 应该知道该命令（二进制文件位于 /usr/local/bin 中，$PATH 知道）。但是，当由 xcodebuild 调用时，控制台会记录“找不到命令”。

我可以手动执行命令，但我不知道为什么它在运行脚本中不起作用。我已经检查了用户，但正如我所料，这两次都是同一个用户......

调用 ios-sim 的行：

```
ios-sim launch $(dirname $TEST_HOST) $environment_args --args -SenTest All $test_bundle_path -v 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T11:16:19.983

与其依赖`$PATH`价值不明显的 ，不如使用整个路径到`ios-sim`.

编辑您的自定义脚本并更改：

```
ios-sim launch ... 
```

到

```
/usr/local/bin/ios-sim launch ... 
```

using`$PATH`可能很危险（可能是一个太强的词）的原因是它的设置位置并不明显。例如，Xcode 将使用在中配置的路径，`/etc/launchd.conf`并且`/usr/local/bin`可能已添加到`/etc/profile`or中`~/.bash_profile`。

*   是否会`launchd`使用其中的值`/etc/profile`，从而将其传递给 Xcode 使用？
*   由 Xcode 启动的脚本会使用`/etc/profile`或`~/.bash_profile`吗？

对这个环境的复杂和透彻的理解无疑会让你通过 调用你的命令`$PATH`，但是使用命令的完整路径是一种简单的方法，它总是有效的。

# jquery - 折叠表格的列

> ID：14685528
> 
> 赞同：0
> 
> 时间：2013-02-04T11:11:47.680
> 
> 标签：jquery

我确实有一个 5 列的表格。我想在单击图像时折叠表格的最后三列，然后在单击其他图像时再次出现。我已经编写了一些代码，但它不起作用，所以请指导我：

```
<img id="hide" src="assets/img/decrease_indent.png" />
        <img id="show" src="assets/img/increase_indent.png" />

<thead>
                <tr>
                    <th class="">Name</th>
                    <th class=""></th>
                    <th class="">Dur</th>
                    <th class="">Start</th>
                    <th class=""></th>
                </tr>
            </thead>
            <tbody data-bind="foreach:items">
                <tr  data-bind="value:id">
                    <td data-bind="text:"></td>
                    <td></td>
                    <td  data-bind="text:"></td>
                    <td data-bind="text:"></td>
                    <td data-bind="text:"></td>
                </tr>
            </tbody>

    <script type="text/javascript">
$(function(){
        $("#hide").live('click',function(){
        $("th:eq(2),th:eq(3),th:eq(4)td:eq(2),td:eq(3),td:eq(4)").hide();
        });
        $("#show").live('click',function(){
        $("th:eq(2),th:eq(3),th:eq(4)td:eq(2),td:eq(3),td:eq(4)").show();
        });
});
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:49:52.603

试试这个，

**[现场演示](http://jsfiddle.net/rajaadil/LTj2n/)**

```
//To hide
$('th:gt(2)').hide();
$('td:gt(2)').hide();

//To show
$('th:gt(2)').show();
$('td:gt(2)').show(); 
```

根据评论编辑

**[现场演示](http://jsbin.com/uzoker/2/edit)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:50:57.807

你错过了隐藏和显示`th:eq(4)`之间的逗号。`td:eq(2)`

[在jsFiddle](http://jsfiddle.net/Claudius/r5LuV/ "工作示例")可以看到基于您的代码的工作示例。

请注意，当您使用`.live`时，您不能使用最新版本的 jQuery。

# css - 正确定义 webfonts 的样式（字体样式/字体粗细）

> ID：14685530
> 
> 赞同：0
> 
> 时间：2013-02-04T11:11:54.290
> 
> 标签：css, fonts, webfonts, google-webfonts

我正在使用 Google Web Fonts，但我不完全确定如何正确定义`font-style`/ `font-weight`。

`normal`定义或`400`作为常规正文副本所需的字体粗细有什么区别？

我只是定义`font-style: italic;`或引用斜体字体吗？

**代码：**

```
<link href="http://fonts.googleapis.com/css?family=Gudea:400,700,400italic">
<style>
body {
    font: 1.25em/1.5 Gudea, Helvetica, Arial, sans-serif;
}
em {
    font-style: italic;

    /* or:
    font-style: normal;
    font-family: "Gudea Italic";
    */
}
strong {
    font-weight: bold;

    /* or:
    font-weight: 700;
    */
}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:06:43.317

这实际上取决于您使用的字体。例如，在 Helvetica 中，100 会很轻，正如外星人先生所说的那样。但是大多数字体没有光，所以 100 将是常规的。我真的认为，最后，你使用什么命名并不重要，因为“bold”、“regular”或“light”只是助记符。

在 Google WebFonts 中，权重是用数字衡量的，请查看您创建的 CSS 链接：*family=Gudea:400,700,400italic*。在这种情况下，很明显您有两个版本的类型：400（常规）和 400 斜体，以及 700（粗体）。每个低于 400 的数字都是常规的，每个高于 700 的数字都是粗体。中间的数字……你必须尝试一下。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:11:11.740

在哪里可以找到有关该主题的更多信息：[w3c font-boldness](http://www.w3.org/TR/CSS21/fonts.html#font-boldness)

它说什么：

> 'font-weight' 属性选择字体的粗细。值 '100' 到 '900' 形成一个有序序列，其中每个数字表示至少与其前一个一样暗的权重。关键字“normal”与“400”同义，“bold”与“700”同义。'normal' 和 'bold' 以外的关键字已被证明经常与字体名称混淆，因此为 9 值列表选择了数字比例。
> 
> p { 字体粗细：正常 } /* 400 */
> 
> h1 { font-weight: 700 } /* 粗体 */

# php - 检查 Yii 中是否存在文件

> ID：14685533
> 
> 赞同：7
> 
> 时间：2013-02-04T11:12:05.413
> 
> 标签：php, yii, file-exists

我正在创建一堆模块，它们都扩展了一个基本模块。但是，某些操作需要覆盖基本视图。在这种情况下，我想检查新模块的结构中是否有视图。如果是，请使用该视图，否则使用基本视图。现在，我的问题：

**有没有办法检查 Yii 中是否存在文件，使用典型的别名结构`application.views.user.basic_view`而不使用或导入它？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T12:01:55.020

未经测试，但是如何将别名解析为路径然后检查...

```
 echo is_file(Yii::getPathOfAlias('application.views.user.basic_view'))?'yes':'no'; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T11:38:07.197

尝试使用 Controller 或 CWidget 方法`getViewFile`

[http://www.yiiframework.com/doc/api/1.1/CController#getViewFile-detail](http://www.yiiframework.com/doc/api/1.1/CController#getViewFile-detail)

[http://www.yiiframework.com/doc/api/1.1/CWidget#getViewFile-detail](http://www.yiiframework.com/doc/api/1.1/CWidget#getViewFile-detail)

# asp.net - 如何编辑gridview字段

> ID：14685534
> 
> 赞同：2
> 
> 时间：2013-02-04T11:12:06.927
> 
> 标签：asp.net, gridview

> 我有**gridview**并且我添加了编辑功能来更新网格内容，因为当用户单击显示带有网格内容的字段的编辑按钮面板时，用户可以编辑具有位置数据的这些数据下拉列表之一的数据。**但是当我点击编辑按钮时，所有字段都有网格内容，但 DDL 第一次有第一个项目，当我再次点击编辑时，DDL 有正确的项目**。那么它的问题是什么？

 ````
 protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "editrow")
    {
        GridViewRow row = (GridViewRow)(((ImageButton)e.CommandSource).NamingContainer);

        TextBox name = row.FindControl("Lbl_Name") as TextBox;

        TextBox address = row.FindControl("Lbl_Address") as TextBox;
        Label mobile = row.FindControl("Lbl_Mobile") as Label;
        Label tele = row.FindControl("Lbl_Tele") as Label;

        Label area = row.FindControl("Lbl_Area_ID") as Label;
        Label location = row.FindControl("Lbl_Loc_ID") as Label;
        Label category = row.FindControl("Lbl_Cat_ID") as Label;

        txt_adr.Text = address.Text;
        txt_mobile.Text = mobile.Text;
        txt_name.Text = name.Text;
        txt_tele.Text = tele.Text;
        ddl_category.SelectedValue = category.Text;
        //the problem here on ddloc
        ddloc.SelectedValue = location.Text;

        DDL_AREA.SelectedValue = area.Text;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:22:16.950

代替

```
ddloc.SelectedValue = location.Text; 
```

利用

```
ddloc.Selecteditem.Text = location.Text; 
````

# java - 如何在 Android 中使用 SVN 管理文件权限

> ID：14685537
> 
> 赞同：1
> 
> 时间：2013-02-04T11:12:13.567
> 
> 标签：java, android, svn

我们正在使用 SVN 作为版本控制系统在 Java 中开发一个 Android 应用程序。

我希望一些源文件不被共享。也就是说，我不希望每个开发人员都拥有所有源文件，否则它应该只有他正在使用的文件。但我希望将这些源文件上传到 SVN 管理器。

问题是所有源文件都是在模拟器中运行应用程序所必需的。

在 Embarcadero Delphi 中，我只能给他们 .dcu 文件（预编译文件），然后，他们只有我让他们提供的源文件。

我不知道如何在 Android 中做到这一点，以及我应该如何使用 SVN 来管理它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:29:25.830

您可以创建一个 Android 库项目并仅将已编译的类文件放在 JAR 中。然后将此 JAR 保存在 Subversion 存储库中，以便开发人员可以签出并在他们的项目中使用它。

# ssl - 将 OpenSSL 与自定义通道一起使用

> ID：14685539
> 
> 赞同：5
> 
> 时间：2013-02-04T11:12:20.113
> 
> 标签：ssl, openssl

我（在 CPP 中）开发了一种基于 HTTP 的独特协议，并使用它与我的服务器进行通信。现在，我想通过我的专有协议建立 SSL 连接来传输数据本身。

我可以使用 OpenSSL 吗？我在网上搜索，我发现的都是与 BIO 相关的东西，但我不明白如何使用它来满足我的需求..

无论如何，对我来说最好的解决方案是一种我可以通过 OpenSSL 我的专有发送和接收功能的方式，这样所有的通信本身就只能通过我的功能进行。

TNX 领先 :)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T11:32:48.090

使用 BIO 对。[您可以在ssltest.c](http://www.opensource.apple.com/source/OpenSSL/OpenSSL-7.1/openssl/ssl/ssltest.c)程序中找到一个示例，在源代码中搜索`bio_pair`. 基本思想是将 OpenSSL 引擎视为一个黑匣子。

您的代码必须做四件事：

1.  当您通过与另一端的连接接收加密数据时，您必须将其写入 SSL 引擎的加密 BIO。

2.  当 SSL 引擎要向对方发送加密数据时，你必须从 SSL 引擎的加密 BIO 中读取数据并将其传输到对方。

3.  当您有要加密和发送的明文时，您必须将其写入 SSL 引擎的明文 BIO。

4.  当 SSL 引擎有它为您解密的明文时，您必须从 SSL 引擎的明文 BIO 中读取它。

OpenSSL 纯粹充当遵循 SSL 协议并在两个 BIO 之间移动数据的引擎。只要您保持所有这四个数据流的移动，它就会为您完成所有协议协商和操作。

我可以给你的一个警告是——不要假设这些事物之间有任何特殊关系。例如，您可能有一些明文要加密并发送，当您将其写入 SSL 引擎的明文 BIO 时，SSL 引擎可能无法继续前进，直到它从另一端接收到一些加密数据。将 SSL 引擎视为一个黑匣子，尽可能做所有这四件事。不要试图“看穿” SSL 引擎，例如，期望因为您将一些加密数据交给 SSL 引擎，所以它必然会为您提供明文。它可能会，但它可能还需要将加密数据发送到另一端。

另一个注意事项：SSL 引擎只有一种状态。它没有读状态和写状态。（如果您想了解丑陋的细节，请在[此线程](http://www.mentby.com/david-schwartz/is-full-duplex-socket-use-possible-with-openssl.html)中搜索“噩梦场景”。）如果您使用具有多个线程的 SSL 连接并期望它的行为就像 TCP 连接（其中读取和写入双方是独立的，除非发生致命错误或连接关闭）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:07:11.323

> 第二种选择 - 具有自己的消息并使用 HTTP 在客户端和服务器之间传递它们的协议。

如果您使用 HTTP 来传递您自己的消息，那么使用 OpenSSL for SSL/TLS 意味着您也需要编写自己的 HTTP 库库。

相反，使用支持 HTTPS（大多数都支持）的 HTTP 库，无论是否通过 OpenSSL。在 HTTPS 之上交换您的自定义消息应该是相当透明的，并且类似于使用纯 HTTP。您只需要正常配置 HTTPS。

# prolog - Prolog 删除功能

> ID：14685543
> 
> 赞同：2
> 
> 时间：2013-02-04T11:12:28.683
> 
> 标签：prolog

我是 prolog 的新手，我希望能够从列表中删除两个位置。我用它来检查我的代码：

```
 remove(e,[(d,1),(e,2),(e,3),(a,4),(b,5),(c,7)], M2). 
```

但它只删除了两个位置中的一个（即 e）。谁能帮我？这是代码的其余部分。

```
 remove(J, [(J,_)|Tail], Tail).

    remove(J, [Head|Tail1], C2) :-
        remove(J, Tail1, C2). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:12:54.313

如果您的 Prolog 有库（[列表](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.12%27,swi%28%27/doc/Manual/lists.html%27%29%29)），则可以重用“功能”列表操作内置函数：它们将“功能”行为归因于它们将谓词作为参数的事实，（通常）应用于每个列表元素（内置是[排除](http://www.swi-prolog.org/pldoc/doc_for?object=exclude/3)/3)

```
% this must adapt to your data structure
match_key(K, (K, _)).

remove(Key, List, Rest) :-
   exclude(match_key(Key), List, Rest). 
```

测试：

```
?- remove(e,[(d,1),(e,2),(e,3),(a,4),(b,5),(c,7)], M2).
M2 = [ (d, 1), (a, 4), (b, 5), (c, 7)]. 
```

我认为它值得学习，因为一个精心设计的库是一门好语言的重要组成部分，学习更简单的部分会让你更容易地了解更高级的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:19:41.987

您当前的版本实际上删除了所有直到第一次出现的`e`. 试试这个：

```
remove(_, [], []).

% matches if current head element is equals to remove element.
remove(J, [(J,_)|Tail], Res) :- remove(J, Tail, Res). 

% matches if current head element IS NOT equal to remove element. 
% J \= K checks it.  
remove(J, [(K, V) | Tail], [(K, V) | Res]) :- 
    J \= K, remove(J, Tail, Res). 
```

# android - 找不到目录资源。在阅读 epub 内容时在 android 中

> ID：14685545
> 
> 赞同：1
> 
> 时间：2013-02-04T11:12:30.773
> 
> 标签：android, epub

我正在尝试使用在 android 中读取和显示 epub 的内容

```
public class MainActivity extends Activity {
WebView webview;
String line, line1 = "", finalstr = "";
int i = 0;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    webview = (WebView) findViewById(R.id.tv);
    AssetManager assetManager = getAssets();
    try {
        InputStream epubInputStream = assetManager
                .open("life.epub");
        Book book = (new EpubReader()).readEpub(epubInputStream);

        // Log the book's authors
        Log.i("author", " : " + book.getMetadata().getAuthors());

        // Log the book's title
        Log.i("title", " : " + book.getTitle());
        // Log the tale of contents
        logTableOfContents(book.getTableOfContents().getTocReferences(), 0);
    } catch (IOException e) {
        Log.e("epublib exception", e.getMessage());
    }

    String javascrips = "";
    try {
        // InputStream input = getResources().openRawResource(R.raw.lights);
        InputStream input = this.getAssets().open(
                "life.epub");
        int size;
        size = input.available();
        byte[] buffer = new byte[size];
        input.read(buffer);
        input.close();
        // byte buffer into a string
        javascrips = new String(buffer);
    } catch (IOException e) {
        e.printStackTrace();
    }
    // String html = readFile(is);

    webview.loadDataWithBaseURL("file:///android_asset/", javascrips,
            "application/epub+zip", "UTF-8", null);
}

@SuppressWarnings("unused")
private void logTableOfContents(List<TOCReference> tocReferences, int depth) {
    if (tocReferences == null) {
        return;
    }

    for (TOCReference tocReference : tocReferences) {
        StringBuilder tocString = new StringBuilder();
         for (int i = 0; i < depth; i++) {
         tocString.append("\t");
         }
         tocString.append(tocReference.getTitle());
         Log.i("TOC", tocString.toString());

        try {
            InputStream is = tocReference.getResource().getInputStream();
            BufferedReader r = new BufferedReader(new InputStreamReader(is));

            while ((line = r.readLine()) != null) {
                // line1 = Html.fromHtml(line).toString();
                Log.v("line" + i, Html.fromHtml(line).toString());
                // line1 = (tocString.append(Html.fromHtml(line).toString()+
                // "\n")).toString();
                line1 = line1.concat(Html.fromHtml(line).toString());
            }
            finalstr = finalstr.concat("\n").concat(line1);
            // Log.v("Content " + i, finalstr);
            i++;
        } catch (IOException e) {

        }

        logTableOfContents(tocReference.getChildren(), depth + 1);
    }
    webview.loadDataWithBaseURL("", finalstr, "text/html", "UTF-8", "");
}
} 
```

我的 logcat 显示一个警告并在 logacat 中显示为

```
 02-04 16:33:54.319: W/System.err(32455): 499 [main] ERROR nl.siegmann.epublib.epub.PackageDocumentReader - Could not find table of contents resource. Tried resource with id '', toc, TOC and any NCX resource.
 02-04 16:33:54.319: W/System.err(32455): 500 [main] ERROR nl.siegmann.epublib.epub.NCXDocument - Book does not contain a table of contents file
 02-04 16:33:54.319: I/author(32455):  : [Dylan, Jesse]
 02-04 16:33:54.319: I/title(32455):  : Thomas Cole - The Voyage of Life
 02-04 16:33:54.329: D/dalvikvm(32455): GC_FOR_ALLOC freed 1038K, 19% free 7619K/9352K, paused 14ms, total 14ms
 02-04 16:33:54.329: I/dalvikvm-heap(32455): Grow heap (frag case) to 8.541MB for 970907-byte allocation
 02-04 16:33:54.349: D/dalvikvm(32455): GC_CONCURRENT freed <1K, 17% free 8567K/10304K, paused 2ms+2ms, total 16ms
 02-04 16:33:54.349: D/dalvikvm(32455): WAIT_FOR_CONCURRENT_GC blocked 11ms
 02-04 16:33:54.349: D/dalvikvm(32455): WAIT_FOR_CONCURRENT_GC blocked 14ms
 02-04 16:33:54.369: D/dalvikvm(32455): GC_FOR_ALLOC freed 0K, 17% free 8567K/10304K, paused 15ms, total 15ms
 02-04 16:33:54.369: I/dalvikvm-heap(32455): Grow heap (frag case) to 10.392MB for 1941798-byte allocation
 02-04 16:33:54.369: D/dalvikvm(32455): WAIT_FOR_CONCURRENT_GC blocked 32ms
 02-04 16:33:54.369: I/dalvikvm-heap(32455): Grow heap (frag case) to 10.392MB for 24-byte allocation
 02-04 16:33:54.389: D/dalvikvm(32455): GC_FOR_ALLOC freed 0K, 15% free 10463K/12204K, paused 17ms, total 17ms
 02-04 16:33:54.409: D/dalvikvm(32455): GC_CONCURRENT freed <1K, 15% free 10464K/12204K, paused 4ms+3ms, total 21ms
 02-04 16:33:54.809: D/dalvikvm(32455): GC_FOR_ALLOC freed <1K, 15% free 10464K/12204K, paused 13ms, total 13ms
 02-04 16:33:54.819: I/dalvikvm-heap(32455): Grow heap (frag case) to 12.118MB for 1807698-byte allocation
 02-04 16:33:54.839: D/dalvikvm(32455): GC_FOR_ALLOC freed 1896K, 27% free 10333K/13972K, paused 28ms, total 28ms
 02-04 16:33:54.869: D/dalvikvm(32455): GC_CONCURRENT freed 951K, 33% free 9395K/13972K, paused 3ms+2ms, total 22ms
 02-04 16:33:54.889: D/libEGL(32455): loaded /system/lib/egl/libEGL_tegra.so
 02-04 16:33:54.909: D/libEGL(32455): loaded /system/lib/egl/libGLESv1_CM_tegra.so
 02-04 16:33:54.919: D/libEGL(32455): loaded /system/lib/egl/libGLESv2_tegra.so
 02-04 16:33:54.939: D/OpenGLRenderer(32455): Enabling debug mode 0
 02-04 16:33:55.009: D/TilesManager(32455): Starting TG #0, 0x651f1f78
 02-04 16:33:55.009: D/TilesManager(32455): new EGLContext from framework: 64df0f40 
 02-04 16:33:55.009: D/GLWebViewState(32455): Reinit shader 
```

我得到的是空白屏幕而不是 epub 的内容！我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:25:46.060

用这个

```
 public class MainActivity extends Activity {
  WebView webview;
String line, line1 = "", finalstr = "";
int i = 0;
Book book;
String linez;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    webview = (WebView) findViewById(R.id.tv);
    AssetManager assetManager = getAssets();
   try {
        // find InputStream for book
        InputStream epubInputStream = assetManager
                .open("widget.epub");

        // Load Book from inputStream
        book = (new EpubReader()).readEpub(epubInputStream);

        // Log the book's authors
        Log.i("author", " : " + book.getMetadata().getAuthors());

        // Log the book's title
        Log.i("title", " : " + book.getTitle());

        /* Log the book's coverimage property */
         Bitmap coverImage =BitmapFactory.decodeStream(book.getCoverImage().getInputStream());
        Log.i("epublib", "Coverimage is " + coverImage.getWidth() +  " by " + coverImage.getHeight() + " pixels");

        // Log the tale of contents

       logTableOfContents(book.getTableOfContents().getTocReferences(), 0);
    } catch (IOException e) {
        Log.e("epublib exception", e.getMessage());
    }
    Spine spine = book.getSpine(); 
    List<SpineReference> spineList = spine.getSpineReferences() ;
    int count = spineList.size();
    TextView tv=new TextView(getApplicationContext());
    tv.setText(Integer.toString(count));
    StringBuilder string = new StringBuilder();

    for (int i = 0; count > i; i++) {
        Resource res = spine.getResource(i);

        try {
            InputStream is = res.getInputStream();
            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            try {
                while ((line = reader.readLine()) != null) {
                    linez =   string.append(line + "\n").toString();

                }

            } catch (IOException e) {e.printStackTrace();}

            //do something with stream
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
    webview.loadData(linez, "text/html", "utf-8");
}

@SuppressWarnings("unused")
private void logTableOfContents(List<TOCReference> tocReferences, int depth) {
    if (tocReferences == null) {

        return;
    }

    for (TOCReference tocReference : tocReferences) {
        StringBuilder tocString = new StringBuilder();
         for (int i = 0; i < depth; i++) {
         tocString.append("\t");
         }
         tocString.append(tocReference.getTitle());
         Log.i("TOC", tocString.toString());

        try {
            InputStream is = tocReference.getResource().getInputStream();
            BufferedReader r = new BufferedReader(new InputStreamReader(is));

            while ((line = r.readLine()) != null) {
                // line1 = Html.fromHtml(line).toString();
                Log.v("line" + i, Html.fromHtml(line).toString());
                // line1 = (tocString.append(Html.fromHtml(line).toString()+
                // "\n")).toString();
                line1 = line1.concat(Html.fromHtml(line).toString());
            }
            finalstr = finalstr.concat("\n").concat(line1);
            // Log.v("Content " + i, finalstr);
            i++;
        } catch (IOException e) {

        }

        logTableOfContents(tocReference.getChildren(), depth + 1);
    }

    webview.loadDataWithBaseURL("", finalstr, "text/html", "UTF-8", "");
}
} 
```

# zend-framework2 - ZF2：如何将 Zend_Acl 组件包含到我的自定义构建的 php 应用程序中？

> ID：14685546
> 
> 赞同：1
> 
> 时间：2013-02-04T11:12:31.623
> 
> 标签：zend-framework2, php

我正在尝试在自定义构建的 php 应用程序中使用 Zend/Permissions/Acl/Acl 类，但遇到此错误时我无法克服：

> 致命错误：在第 9 行的 /users/myuser/htdocs/test/index.php 中找不到类 'Zend\Permissions\Acl\Acl'

这是我的文件系统组织和我正在使用的 php 代码的屏幕截图。我从这里的文档中复制了 Acl 初始化代码：http: [//framework.zend.com/manual/2.1/en/modules/zend.permissions.acl.intro.html](http://framework.zend.com/manual/2.1/en/modules/zend.permissions.acl.intro.html)

![在此处输入图像描述](../Images/22cf836ffd273d39fa2c175182a5c341.png)

我是 Zend 框架的新手，但我真的很想开始使用 Acl 类。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:22:20.063

`use`不是替代品`require`，您将需要一个自动加载器，以便包含文件。看看[`StandardAutoloader`](http://framework.zend.com/manual/2.0/en/modules/zend.loader.standard-autoloader.html)ZF 2。

单独说明：在包含路径中使用绝对路径更安全：

```
ini_set('include_path', ini_get('include_path') . PATH_SEPARATOR . __DIR__ . '/libraries'); 
```

# css - CSS - 文本溢出：仅显示 2 行文本

> ID：14685547
> 
> 赞同：3
> 
> 时间：2013-02-04T11:12:34.747
> 
> 标签：css

给定一长串内容，我只想显示前两行文本。此内容的容器是流动的，并且会根据浏览器的宽度调整大小。无论容器的宽度如何，我都希望文本始终只显示 2 行。有没有办法做到这一点？

如果没有办法做到以上几点，有没有办法根据字符数进行限制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-22T14:40:26.673

This snippet will help you.

Just Adjust **Max-Height** and **Line-height** for the change in font size.

```
 .limit-2 {
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    line-height: 21px;
    max-height: 48px;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:26:04.977

我有一些解决方法来解决您的问题（因为我认为这不可能通过 css）。

所以，我的解决方案如下：

```
var height = parseInt($("#foo").css("line-height"));
var lineCount = 2;
height *= lineCount;

$("#foo").css("height", height + "px"); 
```

你把`line-height`你的容器和容器集`height`带到`line-height * lineCount`.

[jsFiddle](http://jsfiddle.net/k4Srg/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:16:13.803

您可以修复 div 的高度并制作`overflow`为`hidden`

```
 div{
    height:auto;
    max-height:40px;
    overflow:hidden; 
    background:red
} 
```

**[演示更新](http://jsfiddle.net/fpvYB/5/)**

**或者**

使用简单的`Jquery`方法

```
$('p').condense({ellipsis:'&hellip;', condensedLength: 55}); 
```

**[演示 2](http://jsfiddle.net/HAtgn/163/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T11:17:51.730

纯 CSS 解决方案意味着对文本块和“文本溢出”属性使用规定的高度。这很难实现，因为 CSS 没有线条的概念。相反，JavaScript 解决方案将暗示匹配换行符的正则表达式。

# java - 不知道为什么我在声明数组时在 Java/Android 中出现段错误

> ID：14685553
> 
> 赞同：1
> 
> 时间：2013-02-04T11:12:48.770
> 
> 标签：java, android, memory, segmentation-fault

所以我有一些代码在 Android 中崩溃，我不知道为什么。

```
while(true)
{
    byte[] colorData = new byte[480*800];
    colorData = null;
    System.out.println("what");
} 
```

它打印出“什么”三遍，然后以“致命信号 11 SIGSEGV”崩溃（如下所示：http: [//i.imgur.com/FYAsi2C.png](http://i.imgur.com/FYAsi2C.png)）。它肯定在运行垃圾收集，所以问题似乎不是内存耗尽，但如果我降低数组的大小，崩溃需要更长的时间。

如果我删除 colorData 行，则代码可以正常工作并且不会崩溃。我很困惑。它可能是其他一些代码，但我不明白为什么添加/删除数组声明会导致程序崩溃/不崩溃。

有任何想法吗？

编辑：

因此，当我通过增加字节数组大小来强制程序耗尽内存时，我会遇到内存不足异常。到底是什么导致了这个段错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:21:33.230

Java 通常会在 SIGSEGV 上生成崩溃日志文件。.core 文件也在 *nix 系统上生成。这些文件可用于了解它崩溃的位置的堆栈跟踪，其中许多导致问题来源。

您的代码对我来说很好（Windows 7 上的 64 位 JDK 1.7.0_13）。它不应该耗尽内存，因为分配的字节数组在循环的下一次迭代中变得未被引用，并将被 GC 收集。

无论如何，如果您希望人们帮助您，您需要提供更多信息。至少包括以下内容：java 版本（运行“java -version”）、OS 版本（在 Windows 上运行“ver”或在 *nix 上运行“uname -a”）、JVM 生成的崩溃日志文件、完整的源代码跑步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:26:39.477

设置 colorData=null 后尝试添加 System.gc()。这应该强制释放对象。

# php - 使用 php 调用引导模式显示事件

> ID：14685555
> 
> 赞同：3
> 
> 时间：2013-02-04T11:13:00.690
> 
> 标签：php, javascript, jquery, twitter-bootstrap

我想`modal('show')`用 php 代码调用事件。我怎样才能做到这一点？我尝试了以下方法：

```
if(isset($_POST['Edit'])){
echo "<script> $('#Modal').modal('show') </script>";} 
```

我运行此代码，但`echo "<script> $('#Modal').modal('show') </script>";`不起作用。单击图像输入时如何显示模态？我不想用图像 onlick 打电话。

输入：

```
<input type="image" src="image.png" name="Edit" value="Edit" alt="Edit" /> 
```

模态：

```
<div class="modal hide fade" id="Modal" >
     <form method="post">
          <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal" style="margin-top:-10px">×</button>
          </div>
          <div class="modal-body">
               <textarea id="text" name="text">Test</textarea>
          </div>
          <div class="modal-footer">
          </div>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-07T01:10:23.837

设置document.ready函数如下图：

```
echo "<script type='text/javascript'>
$(document).ready(function(){
$('#Modal').modal('show');
});
</script>"; 
```

附带说明一下，如果您有一个模态登录表单并且需要在提交（或 $_POST）时提醒用户在单独的模态中出现任何提交错误，则此解决方法也很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:17:46.927

您可以使用 jquery fadeIn 函数来显示模型

```
$('#Modal').modal('show'); 
```

改成

```
$('#Modal').fadeIn('show'); 
```

希望它会帮助你。

# mysql - SQL 查找具有多个引用的行

> ID：14685557
> 
> 赞同：3
> 
> 时间：2013-02-04T11:13:04.227
> 
> 标签：mysql, sql

对于我们的在线订购平台，我们有一个商店送货到的街道数据库。基于我们 POS 系统的导出。

在现实世界中，只有一家商店可以送货到任何确切的街道地址。在我们的数据库中情况并非如此，其中街道名称在多个商店中计算。

表格是这样的 - 简化：

**街道**

```
street_id
street_name
street_from
street_to
store_id 
```

当前在表中的一些行示例：

```
1, "very nice street", 1, 999, 6
2, "very nice street", 1, 999, 10
3, "random street", 1, 53, 10
4, "random street", 2, 64, 10
5, "unique street", 1, 999, 10
6, "unique street", 1, 999, 6 
```

关于我如何获得所有行的任何想法，其中相同的街道名称被引用到两个或多个商店？在上面的示例中，我希望查询返回“非常漂亮的街道”和“独特的街道”。我不想要“随机街道”，因为它只引用了第 10 号商店。

因此以下 SQL 将返回“随机街道”

```
SELECT street_name, COUNT(*)
FROM streets
GROUP BY street_name
HAVING COUNT(*) > 1; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T11:15:06.677

`GROUP BY`您可以通过and实现此目的[`HAVING`](http://en.wikipedia.org/wiki/Having_%28SQL%29)：

`SELECT * from streets group by street_name having count(*) > 1`

这是一个工作示例：[SQLFiddle](http://sqlfiddle.com/#!2/9f698/2)。下面是一篇您可能会感兴趣的短文：[HAVING 和 GROUP BY SQL 子句](http://www.databasejournal.com/features/mysql/article.php/3469351/The-HAVING-and-GROUP-BY-SQL-clauses.htm)。

* * *

根据您的编辑，将返回所需结果的查询将是：

```
SELECT street_name, store_id, count(*) 
FROM streets 
GROUP BY street_name
HAVING COUNT(DISTINCT store_id) > 1 
```

注意使用`DISTINCT store_id`. 如果有另一个`random street`引用存储 #10，它不会通过，因为`DISTINCT`. 我在[更新的 SQLFiddle](http://sqlfiddle.com/#!2/9f4b4/1)中包含了一个示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T11:16:22.560

试试这个，

```
SELECT street_name, COUNT(*)
FROM streets
GROUP BY street_name
HAVING COUNT(*) > 1; 
```

# php - 如何在不同时区获得一天的结果 - php/mysql

> ID：14685559
> 
> 赞同：2
> 
> 时间：2013-02-04T11:13:07.280
> 
> 标签：php, mysql

我有一张桌子`GMT timezone`。现在我需要从不同的时区得到结果。

如果我搜索日期`04-02-2013` ，所有结果都将是 GMT 并且在转换到特定时区后它可能有`05-02-2013.`

所以。`04-02-2013`我需要特定时区的确切日期结果。例如`+5:30`偏移量。（即在 之间`GMT +5:30 and -5:30`）

如何在mysql中编写for。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:18:00.153

尝试：

```
SELECT CONVERT_TZ(datefield,'US/Eastern','US/Central'); 
```

发现于：[MySQL CONVERT_TZ()](https://stackoverflow.com/questions/2523286/mysql-convert-tz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:18:35.767

查看mysql官方网站的这个页面

```
http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz 
```

# iphone - UILabel 必须适合大小，单词中间没有中断

> ID：14685564
> 
> 赞同：0
> 
> 时间：2013-02-04T11:13:26.993
> 
> 标签：iphone, uilabel

我动态创建了一个 UILabel，我将动态更新数据。

我得到了很多行的输出，这很好我的问题是在下一行中间换行虽然我使用换行模式自动换行

帮我解决这个问题，我从 5 小时开始搜索它。

传递给该 UILabel 的数据是 orthogonist,endonist,psychologist,cardioligist

```
CGSize constraint8 = CGSizeMake(190, 2000.0f);
CGSize size8=[temp sizeWithFont:[UIFont fontWithName:@"Helvetica-Bold" size:14] constrainedToSize:constraint8 lineBreakMode:UILineBreakModeWordWrap];
specialities1 =[[UILabel alloc]init];
[specialities1 setFrame:CGRectMake(124,218,190, size8.height)];
specialities1.textAlignment=UITextAlignmentLeft;
specialities1.backgroundColor=[UIColor clearColor];
specialities1.numberOfLines=0;
specialities1.lineBreakMode=UILineBreakModeClip;
specialities1.font=[UIFont fontWithName:@"Helvetica-Bold" size:14];
specialities1.text=[NSString stringWithFormat:@"%@ ",temp ];
[specialities1 sizeToFit];
[testscroll addSubview:specialities1]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:16:36.257

改变：

```
specialities1.lineBreakMode=UILineBreakModeClip; 
```

至 ：

```
specialities1.lineBreakMode= UILineBreakModeWordWrap; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:43:38.833

更改代码中的这两行。

根据您上面的代码，您在标签中设置了 0 行。所以改成，

```
specialities1.numberOfLines=size8.height/12;//(=1000, or whatever according to your requirement)
specialities1.lineBreakMode= UILineBreakModeWordWrap; 
```

**资源**

**获取大小**

```
NSString *text = [dicOtherInfo  objectForKey:@"msg"];
CGSize constraint = CGSizeMake(200, 1000.0f);
CGSize size = [text sizeWithFont: [UIFont fontWithName:@"Verdana" size:12] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap]; 
```

**设置大小**

```
UILabel *lblMsg=[[UILabel alloc] initWithFrame:CGRectMake(5,15, size.width, size.height)];
[lblMsg setLineBreakMode:UILineBreakModeWordWrap];
lblMsg.text = text;
lblMsg.numberOfLines = (size.height/16);
lblMsg.textAlignment=UITextAlignmentLeft;
lblMsg.backgroundColor=[UIColor clearColor];
lblMsg.textColor=[UIColor redColor];
[lblMsg setFont:[UIFont fontWithName:@"Verdana" size:12]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:53:17.963

试试我下面的方法：

```
-(float) calculateHeightOfTextFromWidth:(NSString*) text: (UIFont*)withFont: (float)width :(UILineBreakMode)lineBreakMode
{
[text retain];
[withFont retain];
CGSize suggestedSize = [text sizeWithFont:withFont constrainedToSize:CGSizeMake(width, FLT_MAX) lineBreakMode:lineBreakMode];

[text release];
[withFont release];

return suggestedSize.height;
} 
```

并像下面这样使用它：

```
 UILabel *lblAddress = [[UILabel alloc]init];
    [lblAddress setFrame:CGRectMake(110, 31, 200, 50)];        
    lblAddress.text = @"your Text ";
    lblAddress.lineBreakMode = UILineBreakModeWordWrap;
    lblAddress.numberOfLines = 0;
    lblAddress.font = [UIFont fontWithName:@"Helvetica" size:12];

    lblAddress.frame = CGRectMake(lblAddress.frame.origin.x, lblAddress.frame.origin.y, 
                             200,[self calculateHeightOfTextFromWidth:lblAddress.text :lblAddress.font :200 :UILineBreakModeWordWrap] ); 

    lblAddress.textColor = [UIColor darkGrayColor];

    [self.view addSubview:lblAddress]; 
```

# windows-phone-7 - 在 Windows Phone 7 应用程序的外部浏览器中打开 href 链接

> ID：14685571
> 
> 赞同：0
> 
> 时间：2013-02-04T11:13:52.043
> 
> 标签：windows-phone-7, cordova

在我的应用程序中，我们在索引页面中有一个链接。如果我单击我想在 Windows Phone 7 上的浏览​​器中打开的链接。我不想在同一个应用程序浏览器中打开该链接，我想作为外部浏览器/实例打开。帮助我如何在外部浏览器 WP7 中打开外部链接。找到我用来打开我的网站的以下链接。

```
<a href="http://www.google.com">Click</a>

<a href="http://www.gmail.com">Click</a> 
```

如果我单击上面的链接，它应该在外部 Internet Explorer 中打开。我正在使用带有 phonegap 2.2.0 的 Windows phone 7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:02:23.987

看看[ChildBrowser 插件](https://github.com/phonegap/phonegap-plugins/tree/master/WindowsPhone/ChildBrowser)，它允许您打开一个新的浏览器窗口：

1.  通过向链接添加 onclick 处理程序来拦截点击，例如 onclick="openInExternalBrowser(this);return false;"

2.  用户 openInExternalBrowser 调用 ChildBrowser 插件

> ```
> var url = ...
> ChildBrowser.install();
> window.plugins.childBrowser.showWebPage(url); 
> ```

3.  如果它适用于您，您可以修改插件 .cs 代码以启动[`WebBrowserTask`](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.webbrowsertask(v=vs.92).aspx)。

**或者**

如果您知道必须在外部浏览器中打开什么 uri，您可以继续使用以下方法

```
> void WebBrowser1_Navigating(object sender, NavigatingEventArgs e) {
>     if (IsSupposedToOpenInPhoneBrowser(e.Uri))
>     {
>         e.Cancel = true;
>         WebBrowserTask task = new WebBrowserTask();
>         task.URL = e.Uri.ToString();
>         task.Show();
>     } } 
```

来源：[https ://stackoverflow.com/a/4780213/255654](https://stackoverflow.com/a/4780213/255654)

# makefile - 在 64 位 debian 6 (Make) 上构建 32 位应用程序

> ID：14685573
> 
> 赞同：0
> 
> 时间：2013-02-04T11:13:56.147
> 
> 标签：makefile, 64-bit, cmake, debian, 32bit-64bit

我想在 64 位模式下构建应用程序，这是我的 Makefile.am 我使用 debian 6 amd64 用于 64 位，这个 make 文件用于名为 theforgottenserver 的项目，该项目用于 tibia（游戏）

```
 noinst_PROGRAMS = theforgottenserver

CXXFLAGS = -g -O2 -pipe
AM_CXXFLAGS = $(XML_CPPFLAGS) $(OTSERV_FLAGS) $(LUA_CFLAGS) $(DEBUG_FLAGS)\
$(MYSQL_FLAGS) $(SQLITE_FLAGS) $(PGSQL_FLAGS) $(PROFILER_FLAGS)\
$(OPTIONAL_FLAGS) -D_THREAD_SAFE -D_REENTRANT -Wall -Wextra -Wno-strict-aliasing

theforgottenserver_LDADD = $(LUA_LIBS)

if USE_MYSQL
MAYBE_MYSQL = databasemysql.cpp databasemysql.h
endif
if USE_SQLITE
MAYBE_SQLITE = databasesqlite.cpp databasesqlite.h
endif
if USE_PGSQL
MAYBE_PGSQL = databasepgsql.cpp databasepgsql.h
endif
if LOGIN_SERVER
MAYBE_LOGIN = gameservers.cpp gameservers.h
endif
if OT_ADMIN
MAYBE_OTADMIN = admin.cpp admin.h
endif

theforgottenserver_SOURCES = account.h actions.cpp actions.h $(MAYBE_OTADMIN) \
    allocator.cpp allocator.h baseevents.cpp baseevents.h beds.cpp \
    beds.h chat.cpp chat.h combat.cpp combat.h condition.cpp condition.h \
    config.h configmanager.cpp configmanager.h connection.cpp connection.h \
    const.h container.cpp container.h creature.cpp creature.h \
    creatureevent.cpp creatureevent.h cylinder.cpp cylinder.h database.cpp \
    database.h databasemanager.cpp databasemanager.h $(MAYBE_MYSQL) \
    $(MAYBE_SQLITE) $(MAYBE_PGSQL) depot.cpp depot.h dispatcher.cpp \
    dispatcher.h exception.cpp exception.h fileloader.cpp fileloader.h \
    game.cpp game.h $(MAYBE_LOGIN) globalevent.cpp globalevent.h group.cpp \
    group.h house.cpp house.h housetile.cpp housetile.h ioban.cpp ioban.h \
    ioguild.cpp ioguild.h iologindata.cpp iologindata.h iomap.cpp iomap.h \
    iomapserialize.cpp iomapserialize.h item.cpp item.h itemattributes.cpp \
    itemattributes.h items.cpp items.h luascript.cpp luascript.h \
    mailbox.cpp mailbox.h manager.cpp manager.h map.cpp map.h monster.cpp \
    monster.h monsters.cpp monsters.h movement.cpp movement.h \
    networkmessage.cpp networkmessage.h npc.cpp npc.h otpch.h otserv.cpp \
    otsystem.h outfit.cpp outfit.h outputmessage.cpp outputmessage.h \
    party.cpp party.h player.cpp player.h position.cpp position.h \
    protocol.cpp protocol.h protocolgame.cpp protocolgame.h \
    protocolhttp.cpp protocolhttp.h protocollogin.cpp protocollogin.h \
    protocolold.cpp protocolold.h quests.cpp quests.h raids.cpp raids.h \
    rsa.cpp rsa.h scheduler.cpp scheduler.h scriptmanager.cpp \
    scriptmanager.h server.cpp server.h spawn.cpp spawn.h spells.cpp \
    spells.h status.cpp status.h talkaction.cpp talkaction.h teleport.cpp \
    teleport.h templates.h textlogger.cpp textlogger.h thing.cpp thing.h \
    tile.cpp tile.h tools.cpp tools.h town.h trashholder.cpp trashholder.h \
    waitlist.cpp waitlist.h waypoints.h weapons.cpp weapons.h vocation.cpp \
    vocation.h 
```

当我尝试使用“make”命令时，它给了我这个错误

```
/usr/bin/ld: i386 architecture of input file `allocator.o' is incompatible with i386:x86-64 output 
/usr/bin/ld: i386 architecture of input file `exception.o' is incompatible with i386:x86-64 output 
collect2: ld returned 1 exit status 
make[1]: *** [theforgottenserver] Error 1 
make[1]: Leaving directory `/home/theunkown/Downloads/TFS' 
make: *** [all] Error 2 
```

# zend-framework - 在zend框架中使用where条件获取数组

> ID：14685574
> 
> 赞同：0
> 
> 时间：2013-02-04T11:14:00.627
> 
> 标签：zend-framework

如何获取 catid="someid" 的数组？

我试过这个但没有用

```
public function findCatArr($catid)
{
    $select = $this->getDbTable()->select();
    $select->setIntegrityCheck(false);
    $select->from('photo',array('id','catid','pic','desc'
    ))->where("catid"." LIKE '%".$catid."%'");
    $row = $this->getDbTable()->fetchAll($select);

    if (0 == count($row)) {
        return;
    }else{

        return $row->toArray();

        }   
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T11:25:52.027

我想你想要：

```
->where('catid = ?', $catid); 
```

如果你真的想做一个 LIKE 搜索，那么它是：

```
->where('catid LIKE ?', '%'.$catid.'%'); 
```

但仅在需要时才使用它，因为 LIKE 搜索比直接索引查找要慢得多。

如果`$catid`是一个 ID 数组，那么这应该有效：

```
->where('catid IN (?)', $catid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:17:01.090

根据id在zend中获取数组

$select->where("catid = ?", $catid);

基于 Zend 中的 LIKE 搜索

$select->where("catid LIKE ?", '%'.$catid.'%');

# python - Django：如果用户没有注销，我如何检查用户的最后活动时间？

> ID：14685576
> 
> 赞同：14
> 
> 时间：2013-02-04T11:14:02.893
> 
> 标签：python, django, middleware

django 的 User 模型有一个`last_login`字段，如果所有用户每次离开站点时都要注销，这很好，但如果他们不这样做呢？

如何跟踪从未注销的用户及其在网站上的活动？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-04T11:24:53.307

您需要`last_activity`在用户配置文件（或自定义用户模型）中有该字段。该字段将在每次请求时更新。为此，您需要有自定义中间件：

配置文件/middleware.py：

```
from django.utils import timezone

from myproject.profiles.models import Profile

class UpdateLastActivityMiddleware(object):
    def process_view(self, request, view_func, view_args, view_kwargs):
        assert hasattr(request, 'user'), 'The UpdateLastActivityMiddleware requires authentication middleware to be installed.'
        if request.user.is_authenticated():
            Profile.objects.filter(user__id=request.user.id) \
                           .update(last_activity=timezone.now()) 
```

在你的设置文件中添加这个中间件：

```
MIDDLEWARE_CLASSES = (
    # other middlewares
    'myproject.profiles.middleware.UpdateLastActivityMiddleware',
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-24T23:53:00.227

我知道这个问题很老......当然它已经解决了......但这是我的贡献......在新版本的 django 中，您可以使用：

### “会话时间”-> 在配置文件中使用。“设置.py”

如果用户关闭浏览器，会话结束，必须重新登录...

```
SESSION_EXPIRE_AT_BROWSER_CLOSE = True 
```

如果用户没有关闭浏览器，您可以为会话设置时间限制...

```
SESSION_COOKIE_AGE = 60 * 60 
```

对于“SESSION_COOKIE_AGE”，如果我没记错的话，它是在几秒钟内定义的。[你可以在这里](https://docs.djangoproject.com/en/3.0/ref/settings/#session-cookie-age)看到更多......推荐阅读也是django自己的[关于会话的文档](https://docs.djangoproject.com/en/3.0/topics/http/sessions/)......

# php - PHP session.save_path & session.gc_maxlifetime 行为

> ID：14685577
> 
> 赞同：1
> 
> 时间：2013-02-04T11:14:12.510
> 
> 标签：php, session, garbage-collection, session-timeout

抱歉，如果在其他地方问过这个问题，但我找不到答案。

我最近创建了一个网站，我第一次在该网站上大量使用了会话变量。我以前从来没有费心调整 PHP 会话配置，因为它没有必要，会话变量已按预期工作。对于这个站点，我想控制会话的生命周期，所以我需要调整`gc_maxlifetime`. 由于似乎没有 0 或关闭设置，我将其设置为 31536000（365 天），目的是使用 PHP 脚本控制到期。

我正在`gc_maxlifetime`通过我的主机允许的本地 php.ini 文件进行设置。我也在`save_path`通过这个文件进行设置，因为`gc_maxlifetime`如果没有设置它似乎不起作用。我认为这是因为当`save_path`没有值时`/tmp`使用所有用户的默认文件夹（这是一个共享服务器），因此您不应该能够调整所有用户的生命周期。

这一切似乎都运行良好。我有两个保存位置，一个用于主站点，一个用于 CMS，在`/absolute/hosting/path/tmp/session`和处`/absolute/hosting/path/tmp/session/admin`，phpinfo 显示了正确的值，查看相关文件夹，我可以看到一堆会话文件。但是，一两个星期后（我不知道具体持续了多长时间），我网站的会话功能完全停止工作。根本没有创建新会话。为了解决这个问题，我已经`save_path`从我的 php.ini 文件中删除了，但现在我的会话只持续了默认的 24 分钟。

我最初的想法是文件夹内可能存在一些文件或文件夹大小限制`/tmp`，但我不知道如何更改它（大概是 Apache 的事情，我需要我的托管公司来更改），无论如何也没有多大意义，文件很小（1997个文件，主站点17KB，41个文件，CMS 9KB），并且CMS在主站点之后工作了一周左右，之前以同样的方式失败。

有谁知道这可能是什么原因？

# android - 在没有调用 Activity 作为背景的情况下显示 DialogFragment

> ID：14685582
> 
> 赞同：3
> 
> 时间：2013-02-04T11:14:26.423
> 
> 标签：android, android-activity, android-dialogfragment

我正在使用5 分钟后将`AlarmManager`a 传递`PendingIntent`给我。`BroadcastReceiver`现在，我想`DialogFragment`在警报响起时用户可能正在使用的任何应用程序之上向用户显示一个。例如，如果警报响起时用户正在使用 Chrome，我`DialogFragment`应该在用户的 Chrome 窗口上方弹出。

相反，我最终得到的`DialogFragment`是以我的应用程序的空白活动作为背景显示（如下图所示）

[http://i.stack.imgur.com/Vz9IZ.png](http://i.stack.imgur.com/Vz9IZ.png)

这是我在我的`BroadcastReceiver`, 中使用的代码来启动`FragmentActivity`第一个：

```
 public class AlarmReceiver extends BroadcastReceiver {

        @Override
        public void onReceive(Context context, Intent intent)
        {
            Intent hardReminderIntent = new Intent(context, AlarmHardActivity.class);
            hardReminderIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(hardReminderIntent);

        }
} 
```

接下来，从这个活动中，我弹出`DialogFragment`：

```
public class AlarmHardActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        FragmentManager fm = getSupportFragmentManager();
        AlarmHardDialog editNameDialog = new AlarmHardDialog();
        editNameDialog.show(fm, "fragment_dialog");
        //setContentView(R.layout.activity_alarm_hard);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        //getMenuInflater().inflate(R.menu.activity_alarm_hard, menu);
        return true;
    }

} 
```

**我的问题：**

1.  我找不到`getSupportFragmentManager`直接从`onReceive`my中调用的方法`BroadcastReceiver`，因此假设获得对话框的唯一方法是首先调用创建对话框的“虚拟”活动。有一个更好的方法吗？

2.  无论我的方法是否正确，我都希望由于`setContentView(..)`在 AlarmHardActivity 中没有调用，因此不会为它呈现 UI。我的理解错了吗？我也尝试调用`setContentView(..)`然后将布局标记为具有`Theme.NoDisplay`and `android:alpha="0"`，但无济于事。

任何帮助都感激不尽。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T13:51:01.387

除了在活动上显示对话框，更好的选择是通过使用对话框主题并将所有边的边距设置为所需的 dp，使活动看起来像对话框，以便活动被尖叫到对话框大小。

举几个例子看看这些帖子： [Android Activity as a dialog](https://stackoverflow.com/questions/1979369/android-activity-as-a-dialog)

[Android：如何创建一个透明的以对话框为主题的活动](https://stackoverflow.com/questions/6070505/android-how-to-create-a-transparent-dialog-themed-activity)

[如何将对话框主题的活动宽度设置为屏幕宽度？](https://stackoverflow.com/questions/2961833/how-to-set-a-dialog-themed-activity-width-to-screen-width)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T16:54:37.167

对于您的问题：

1.  片段只能附加到`Activity`( `ActivityFragment`)。所以，是的，你需要假人`Activity`。

2.  使用隐形主题`@android:style/Theme.Translucent.NoTitleBar`，不需要调用 setContentView。但是这个主题不兼容 Holo（在对话框中你会有旧的 Android 外观）。我用自定义主题解决了这个问题（我使用这个`ICS`，但它应该可以工作`HONEYCOMB`）：

```
<style name="InvisibleTheme" parent="@android:style/Theme.Holo.Light">
    <item name="android:windowActionBar">false</item>
    <item name="android:windowNoTitle">true</item>

    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:colorBackgroundCacheHint">@null</item>
    <item name="android:windowIsTranslucent">true</item>
    <!-- Note that we use the base animation style here (that is no animations) because we really have no idea how this kind of activity will be used. -->
    <item name="android:windowAnimationStyle">@android:style/Animation</item>
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:28:48.030

没有 Activity 是不可能显示这个对话框的。您可以尝试像在屏幕截图中一样运行您的应用程序，但要使用透明背景和隐藏的 ActionBar。但我从未尝试过这样做，所以我不确定它是否会起作用。

# cmake - 如何在 cmake 中包含生成的配置？

> ID：14685586
> 
> 赞同：0
> 
> 时间：2013-02-04T11:14:38.677
> 
> 标签：cmake

我的 CMakeLists.txt 需要包含 oem.cmake 作为

```
INCLUDE (oem.cmake) 
```

oem.cmake 的内容看起来像

```
SET (PRODUCT_NAME "...")
SET (PRODUCT_VENDOR "...")
... 
```

但它必须由 lua 脚本生成

```
lua generate_oem_conf.lua "<oem>" 
```

我尝试了 ADD_CUSTOM_COMMAND，但它不会被执行并且报告 oem.cmake is not found。

在包含之前有什么方法可以让 oem.cmake 生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:47:27.593

问题是，您提供给**add_custoum_command**的命令会在您编译程序时运行。
**include**需要您在配置期间要包含的文件，即在您运行 cmake 时。

您可以将[execute_process](http://cmake.org/cmake/help/v2.8.8/cmake.html#command%3aexecute_process)用于要在配置期间运行的命令。
例如

```
execute_process(COMMAND "lua" "generate_oem_conf.lua \"<oem>\""
                WORKING_DIRECTORY ${PATH_TO_GEN_LUA_FILE} )

include(oem.cmake) 
```

为此，lua 必须在您的 PATH 中。也许您必须转义**<**和**>**字符。

# css - Sass/CSS 网格和相同的高度/宽度

> ID：14685589
> 
> 赞同：1
> 
> 时间：2013-02-04T11:14:43.913
> 
> 标签：css, grid, dimensions, susy-compass

我已经定义了一个具有列宽的网格以适合我想要的内容。

说，然后我希望使用网格放置一个元素，所以我让它跨越 9 列中的 3 列，宽度约为 33.3%

然后我希望该元素的高度与其宽度相同。

这就是我总是卡住的地方。如果我使用 Compass Susy 的 columns() 函数，它会将高度设置为 33.3%，这正是它的目的，但显然这不是我想要的。

人们如何解决这个问题以获得预期的结果？

亲切的问候，尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:15:06.763

不需要JS。使用简单的 HTML 和 CSS 技巧就可以实现：

**HTML**

```
<div class="container">
<div class="item"><div class="content"></div></div>
<div class="item"><div class="content"></div></div>
<div class="item"><div class="content"></div></div>    
</div> 
```

**相关CSS**

```
.container{
  position: absolute;
}

.item{
    height: 0;
    position: relative;
    padding-bottom: 33%;
}

.item .content{
   height: 100%;
    width: 100%;
} 
```

jsFiddle 示例：http: [//jsfiddle.net/opherv/hjVSM/](http://jsfiddle.net/opherv/hjVSM/)

尝试调整浏览器的大小并查看它的行为。

想法是您使用元素的 padding-bottom 设置宽度/高度比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T17:12:42.363

感谢您的回答@OpherV，但@rctneil 甚至没有提到JS。他（和我一样）正在寻找 Sass/Susy 解决方案。

是否有任何 Sass mixin 设置动态宽度等于其宽度的元素的高度？

# c# - Windows Phone 中的 OnNavigatedTo 和 async/await

> ID：14685590
> 
> 赞同：1
> 
> 时间：2013-02-04T11:14:47.690
> 
> 标签：c#, windows-phone-7, navigation, windows-phone-8

问题是关于最佳实践。我有一个覆盖了 OnNavigatedTo 的 PhoneApplicationPage，我想在那里等待一些异步调用。当等待某个呼叫时，导航会发生什么？我的假设是在等待的调用返回之前导航不会完成。通过扩展，它将使调用的异步性质变得无用。这是真的吗？

另一件事是 OnNavigatedTo 返回 void，我无法将其更改为 Task。反过来，这意味着我的异步方法中的任何异常都会使应用程序完全崩溃。当然可以捕获异常，但我再次担心这是否是一个好方法。

总结一下：有人在 OnNavigatedTo 中使用 async/await 吗？你的经验是什么？您将它推荐给您的朋友或同事的可能性有多大？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T16:34:39.803

首先，我的回答与 WP7 + Async CTP 相关，而不是 WP8。但是，我怀疑这在 WP8 中有所改变。

> 我的假设是在等待的呼叫返回之前导航不会完成

错误的假设。导航将在第一次等待时完成。

> 我的异步方法中的任何异常都会使应用程序完全崩溃

不必要。您可以订阅`TaskScheduler.UnobservedTaskException`事件，并通过调用将异常标记为观察到`UnobservedTaskExceptionEventArgs.SetObserved`。但我宁愿捕捉异常..

> 您将它推荐给您的朋友或同事的可能性有多大？

如果您了解自己在做什么，它可以正常工作。但是，由于导航将在您的异步方法完成之前很长时间完成，因此该方法带来的价值很小。

PS我关于相关主题的问题“ [WP7同步网络请求](https://stackoverflow.com/questions/13283607/wp7-synchronous-web-request)” - 没有给出答案:-(

# sql-server - 查询以在 SQL Azure 中按 Top Tables 报告生成磁盘使用情况？

> ID：14685596
> 
> 赞同：10
> 
> 时间：2013-02-04T11:15:02.150
> 
> 标签：sql-server, tsql, azure-sql-database

我喜欢使用 SQL Management Studio 报告“Top Tables 的磁盘使用情况”来查看我的数据库中占用了哪些空间。我可以在 SQL Azure 中使用什么等效查询来查看

*   每张表的行数
*   每个表的磁盘使用情况（最好分解数据和索引）

在 SQL Profiler 中，我可以看到 Top Tables 的磁盘使用情况报告通常运行以下命令：

```
begin try 

    SELECT TOP 1000
        (row_number() over(order by (a1.reserved + ISNULL(a4.reserved,0)) desc))%2 as l1,
        a3.name AS [schemaname],
        a2.name AS [tablename],
        a1.rows as row_count,
        (a1.reserved + ISNULL(a4.reserved,0))* 8 AS reserved,
        a1.data * 8 AS data,
        (CASE WHEN (a1.used + ISNULL(a4.used,0)) > a1.data THEN (a1.used + ISNULL(a4.used,0)) - a1.data ELSE 0 END) * 8 AS index_size,
        (CASE WHEN (a1.reserved + ISNULL(a4.reserved,0)) > a1.used THEN (a1.reserved + ISNULL(a4.reserved,0)) - a1.used ELSE 0 END) * 8 AS unused

    FROM    (   SELECT
                ps.object_id,
                SUM ( CASE WHEN (ps.index_id < 2) THEN row_count    ELSE 0 END ) AS [rows],
                SUM (ps.reserved_page_count) AS reserved,
                SUM (CASE   WHEN (ps.index_id < 2) THEN (ps.in_row_data_page_count + ps.lob_used_page_count + ps.row_overflow_used_page_count)
                            ELSE (ps.lob_used_page_count + ps.row_overflow_used_page_count) END
                    ) AS data,
                SUM (ps.used_page_count) AS used
                FROM sys.dm_db_partition_stats ps
                GROUP BY ps.object_id
            ) AS a1

    LEFT OUTER JOIN (   SELECT
                        it.parent_id,
                        SUM(ps.reserved_page_count) AS reserved,
                        SUM(ps.used_page_count) AS used
                        FROM sys.dm_db_partition_stats ps
                        INNER JOIN sys.internal_tables it ON (it.object_id = ps.object_id)
                        WHERE it.internal_type IN (202,204)
                        GROUP BY it.parent_id
                    ) AS a4 ON (a4.parent_id = a1.object_id)

    INNER JOIN sys.all_objects a2  ON ( a1.object_id = a2.object_id )

    INNER JOIN sys.schemas a3 ON (a2.schema_id = a3.schema_id)

    WHERE a2.type <> N'S' and a2.type <> N'IT'

end try
begin catch
    select
    -100 as l1
    ,   1 as schemaname
    ,       ERROR_NUMBER() as tablename
    ,       ERROR_SEVERITY() as row_count
    ,       ERROR_STATE() as reserved
    ,       ERROR_MESSAGE() as data
    ,       1 as index_size
    ,       1 as unused
end catch 
```

但是当使用消息针对 SQL Azure 运行时失败

```
Msg 208, Level 16, State 1, Line 4
Invalid object name 'sys.internal_tables'. 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T14:44:55.420

**编辑 2016 年 5 月 24 日：**这些天似乎不起作用......我将不得不重做这个

好吧，我想既然这[`sys.internal_tables`](http://msdn.microsoft.com/en-us/library/ms187799.aspx)是问题所在，最简单的方法就是将其从混合中删除。稍作调整，我们就剩下了：

```
 SELECT TOP 1000
        a3.name AS SchemaName,
        a2.name AS TableName,
        a1.rows as Row_Count,
        (a1.reserved )* 8.0 / 1024 AS reserved_mb,
        a1.data * 8.0 / 1024 AS data_mb,
        (CASE WHEN (a1.used ) > a1.data THEN (a1.used ) - a1.data ELSE 0 END) * 8.0 / 1024 AS index_size_mb,
        (CASE WHEN (a1.reserved ) > a1.used THEN (a1.reserved ) - a1.used ELSE 0 END) * 8.0 / 1024 AS unused_mb

    FROM    (   SELECT
                ps.object_id,
                SUM ( CASE WHEN (ps.index_id < 2) THEN row_count    ELSE 0 END ) AS [rows],
                SUM (ps.reserved_page_count) AS reserved,
                SUM (CASE   WHEN (ps.index_id < 2) THEN (ps.in_row_data_page_count + ps.lob_used_page_count + ps.row_overflow_used_page_count)
                            ELSE (ps.lob_used_page_count + ps.row_overflow_used_page_count) END
                    ) AS data,
                SUM (ps.used_page_count) AS used
                FROM sys.dm_db_partition_stats ps
                GROUP BY ps.object_id
            ) AS a1

    INNER JOIN sys.all_objects a2  ON ( a1.object_id = a2.object_id )

    INNER JOIN sys.schemas a3 ON (a2.schema_id = a3.schema_id)

    WHERE a2.type <> N'S' and a2.type <> N'IT'   
    order by a1.data desc 
```

Azure 提供了一些有趣的[管理视图和功能](http://msdn.microsoft.com/en-us/library/ms188754.aspx)，但在这种情况下不需要……我想。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T11:46:08.410

尝试查询 sys.dm_db_partition_stats

例如，

-- 计算单个数据库对象的大小。

```
SELECT sys.objects.name, SUM(reserved_page_count) * 8.0 / 1024 as Size
FROM sys.dm_db_partition_stats, sys.objects 
WHERE sys.dm_db_partition_stats.object_id = sys.objects.object_id 
GROUP BY sys.objects.name
ORDER BY Size DESC;
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-13T18:30:38.043

这是一个在 SQL 2012 上运行的函数，其数据与报告基本相同。基于先前的答案并扩展了一点。

它封装在一个 SP 中，允许针对服务器上的任何数据库调用它，因此您不需要 20 个副本。

注释掉您不想要的任何单位大小。GB对我有用。

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE dbo.TableSizes

    @DB varchar(50) = 'OP'
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- DECLARE @DB AS varchar(50)='OP'; -- DEBUG LINE

    DECLARE @sql nvarchar(max)='
    WITH A AS (
        SELECT Sc.name AS SchemaName, O.name AS TableName
            , SUM(ps.row_count) AS TotalRows
            , CAST(SUM(ps.reserved_page_count) * 8.0 / 1024 / 1024 AS Decimal(28,6)) AS TotalSizeGB
            , CAST(SUM(ps.used_page_count) * 8.0 / 1024 / 1024 AS Decimal(28,6)) AS UsedTotalSizeGB
            , CAST(SUM(ps.reserved_page_count) * 8.0 / 1024 AS Decimal(28,3)) AS TotalSizeMB
            , CAST(SUM(ps.used_page_count) * 8.0 / 1024 AS Decimal(28,3)) AS UsedTotalSizeMB
            , CAST(SUM(ps.reserved_page_count) * 8.0 AS Decimal(28,0)) AS TotalSizeKB
            , CAST(SUM(ps.used_page_count) * 8.0 AS Decimal(28,0)) AS UsedTotalSizeKB
            --, O.Type
        FROM $DB$.sys.dm_db_partition_stats AS PS
            JOIN $DB$.sys.objects AS O ON PS.object_id=O.object_id
            JOIN $DB$.sys.schemas AS Sc on O.schema_id=Sc.Schema_id
        WHERE O.Type=''U'' -- user tables only
        GROUP BY Sc.name, O.name
            --, O.Type
    )
    SELECT A.*
        , CASE WHEN A.TotalSizeGB=0 THEN NULL ELSE 100.0 * A.UsedTotalSizeGB / A.TotalSizeGB END AS UsedPercent
    FROM A
    ORDER BY A.TotalSizeGB DESC
    '
    SET @sql=replace(@sql,'$DB$',@DB);

    EXEC sp_executesql @sql;

    -- EXEC Agent.TableSizes 'Scorecards' -- DEBUG LINE

END
GO 
```

# javascript - 用日期字符串在 javascript 中创建时间戳的正确方法是什么？

> ID：14685598
> 
> 赞同：0
> 
> 时间：2013-02-04T11:15:22.360
> 
> 标签：javascript, date, timestamp

当我在 javascript 中使用日期对象转换当前日期时，我将日期格式返回为 05-Jan、12-feb 等。我做了这样的事情

```
 var curr = new Date(),
            curr_year = curr.getFullYear(),
            curr_month = curr.getMonth(),
            curr_day = curr.getDay(),
            today = new Date(curr_year, curr_month, curr_day, 0, 0, 0, 0);
            console.log(today); 
```

在这里，今天返回为无效日期，我需要创建一个时间戳，该时间戳不应包括分钟秒和毫秒作为零，用于仅基于我可以分类的月份和日期的日期比较。有没有办法动态创建日期并比较那些给定格式的日期。当我尝试使用日期对象转换我的日期字符串时，它返回年份为 2001。如何根据当前年份比较日期。例如：在 php 中，我使用[mktime](http://php.net/manual/en/function.mktime.php)从给定的日期格式动态创建日期并比较这些结果。任何建议都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:19:15.113

您可以利用本机 JS 日期功能来获取人类可读的时间戳日期字符串。

```
var today = new Date();
console.log( today.toDateString() ); // Outputs "Mon Feb 04 2013" 
```

日期比较也是内置的。

```
var yesterday = new Date();
yesterday.setDate( yesterday.getDate() - 1);
console.log( yesterday.toDateString() ); // Outputs "Sun Feb 03 2013"
console.log( yesterday < today ); //Outputs true 
```

您可以使用其他内置方法对此比较进行微调，使其对分钟/秒敏感/不敏感，或将所有这些设置为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:21:02.343

你说你在 php 中使用了 mktime()，那么[这个](http://phpjs.org/functions/mktime/)呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:21:20.593

更改为：

```
 var curr = new Date(),
        curr_year = curr.getFullYear(),
        curr_month = curr.getMonth()+1,
        curr_day = curr.getDay(),
        today = curr_month+'/'+curr_day+'/'+curr_year;
        console.log(today); 
```

（getMonth()+1 是因为一月是 0）

改变：

```
 today = curr_month+'/'+curr_day+'/'+curr_year; 
```

到你喜欢的任何格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:35:00.290

我找到了一种将日期转换为时间戳的方法，我已经尝试过实现@nbrooks，但是 .toDateString 内置了日期比较，适用于运算符 < 和 >，但不适用于 == 运算符，我已经使用`Date.parse();`函数来实现它。来了。。

```
 var curr = new Date(),
 curr_year = curr.getFullYear(),
 curr_month = curr.getMonth(),
 curr_day = curr.getDate(),
 today = new Date(curr_year, curr_month, curr_day, 0,0,0,0);
 var dob = new Date('dob with month and date only'+curr_year);
 if(Date.parse(dob) == Date.parse(today)){
        //Birthdays....
        } 
```

此方法可用于为动态创建的日期创建时间戳。感谢您的建议。

# country-codes - maxmind 数据库中的一个国家代码，它指的是哪个国家？

> ID：14685600
> 
> 赞同：0
> 
> 时间：2013-02-04T11:15:30.590
> 
> 标签：country-codes, maxmind

从我的 maxmind 数据库中选择 distinct(country) 我发现代码为“AN”的国家/地区不在此处的列表中：http: [//dev.maxmind.com/geoip/codes/iso3166](http://dev.maxmind.com/geoip/codes/iso3166)

和维基： [http ://en.wikipedia.org/wiki/ISO_3166-1](http://en.wikipedia.org/wiki/ISO_3166-1)

它可以参考哪个国家？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:28:02.430

根据[http://www.iso.org/iso/home/standards/country_codes/iso-3166-1_decoding_table.htm](http://www.iso.org/iso/home/standards/country_codes/iso-3166-1_decoding_table.htm) 这是荷属安的列斯群岛

# android - android CursorWindowAllocationException 没有明显泄漏？

> ID：14685602
> 
> 赞同：2
> 
> 时间：2013-02-04T11:15:44.403
> 
> 标签：android, sqlite, ormlite

我有时会看到带有 android.database.CursorWindowAllocationException 的崩溃报告，这表明存在泄漏，就像在[分配游标时出现的其他 SO 问题 Out of Memory](https://stackoverflow.com/questions/12577400/out-of-memory-when-allocating-cursors)但我的异常有 '# Open Cursors=1 (# cursors opens by this proc =1)' 看起来我周围没有很多光标。

我正在使用 ORMLite，我想知道是否有什么办法可以准确地找出问题所在？

异常的堆栈跟踪如下所示：

```
android.database.CursorWindowAllocationException: Cursor window allocation of 2048 kb failed. # Open Cursors=1 (# cursors opened by this proc=1)
at android.database.CursorWindow.<init>(CursorWindow.java:104)
at android.database.AbstractWindowedCursor.clearOrCreateWindow(AbstractWindowedCursor.java:198)
at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:162)
at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:156)
at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:161)
at android.database.AbstractCursor.moveToFirst(AbstractCursor.java:201)
at com.j256.ormlite.android.AndroidDatabaseResults.first(AndroidDatabaseResults.java:73)
at com.j256.ormlite.android.AndroidDatabaseConnection.queryForOne(AndroidDatabaseConnection.java:176)
at com.j256.ormlite.stmt.mapped.MappedQueryForId.execute(MappedQueryForId.java:38)
at com.j256.ormlite.field.FieldType.assignField(FieldType.java:533)
at com.j256.ormlite.stmt.mapped.BaseMappedQuery.mapRow(BaseMappedQuery.java:71)
at com.j256.ormlite.stmt.StatementExecutor.queryForFirst(StatementExecutor.java:97)
at com.j256.ormlite.dao.BaseDaoImpl.queryForFirst(BaseDaoImpl.java:231)
at com.our.company.service.DownloadService.getLatestVoucherUpdate(DownloadService.java:354)
at com.our.company.service.DownloadService.downloadVouchers(DownloadService.java:831)
at com.our.company.service.DownloadService.onHandleIntent(DownloadService.java:1483)
at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.os.HandlerThread.run(HandlerThread.java:60) 
```

# c# - 哪个框架最支持高度可定制的 JSON 序列化？

> ID：14685604
> 
> 赞同：1
> 
> 时间：2013-02-04T11:15:54.743
> 
> 标签：c#, json, serialization

我正在寻找一个在低级别上支持 JSON（反）序列化或高度可定制的框架。

我必须序列化的许多对象模型类型必须以特定方式创建，并且并非所有信息都可用于通用解析器。目前我对大多数类型使用带有 JSONConverters 的 JSON.Net，但类型的实例化很棘手而且不是很干净（具有 JSONConstructor 属性的私有构造函数 + 提供剩余构造数据的构造后初始化方法）。

简而言之，OR-Mapper 对我来说并不理想，因为：

*   对象不是 POCO（没有默认构造函数，解析器中并非所有构造函数信息都可用）
*   某些类型可以表达得比 OR-Mapper 创建的更紧凑和可读（例如，值类型对可以存储为`{"theType" : "theValue"}`而不是`{"type": "theType", "value" : "theValue"}`- 这里的区别主要是可读性）
*   难以支持对领域模型的更改；我需要使用旧解析器将遗留数据解析为旧 POCO，将它们转换为当前 POCO 并使用当前解析器进行序列化（至少我假设这就是使用 OR-mappers 完成的方式）

当我编写所​​有 JSONConverters 时，我意识到提供低级序列化方法（WriteProperty、ReadValue、WriteObject）的框架对我来说就足够了，并且还提供了创建更紧凑、可读的 JSON 的灵活性，并允许我为不同的具有很少开销的域模型版本（与需要遗留域对象进行 ORM 解析相比）。

**是否有任何框架支持低级/高度定制的 JSON 解析？** 我宁愿自己不编写这样的解析器，尽管我认为它不会那么困难，因为 JSON 是一种简单的格式（尽管日期解析等可能会让人头疼）。

JSON.Net 的 JsonReader/Writer 类型基本上是我正在寻找的，但我不确定以这种方式使用这些类型是否是一个好主意。如果有其他库在提供此功能方面做得更好——JSON.Net 毕竟旨在用作 ORM 解析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:11:17.783

我们为 JSON 使用了这个[java 库](http://jackson.codehaus.org/)，它是非常可配置的。我们将它移植到 C#。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T10:11:53.087

为了结束这个问题，我会自己发布一个答案，尽管如果 Soundararajan 有机会完成他的计划并提供他的实施，我会接受他的答案。

我最终暂时使用了 JSON.Net 的 JsonReader/Writer 类型。

一旦/如果性能成为问题，我将切换到[支持 SAX-like parsing](https://stackoverflow.com/questions/15095991/can-i-use-protobuf-net-as-a-sax-like-parser-without-a-full-type-definition)的 protobuf-net 。

If someone knows a better library for highly customizable / SAX-like JSON serialization, feel free to leave an answer, I'll still watch this question.

# android - Device TabGroup 的 Tab 高度（以像素为单位）取决于设备屏幕尺寸

> ID：14685605
> 
> 赞同：0
> 
> 时间：2013-02-04T11:16:04.583
> 
> 标签：android, height, pixel

我需要在我的应用程序中以像素为单位获取标签的高度（如图所示）。我需要一些信息来帮助我了解 Tab 的高度取决于屏幕尺寸。谁能帮我？

提前致谢![在此处输入图像描述](../Images/3434cd82a4b34c1ec4086e513cdd5749.png)

说实话我在代码中不需要 Tab 的大小，我认为每个大小相同的设备都有相同的 Tab 高度，所以我想知道屏幕的哪个部分会占用我的 Tab ，

例如，我有 1080 X 720 像素的设备，我的选项卡将占 1/10 部分，这意味着选项卡的高度将为 108 像素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:38:40.670

我之前在评论中的意思是，这里有许多流行的解决方案来获取任何 android 视图的高度和宽度。我现在已经测试了这段代码，它工作正常。尝试这个：

```
final RelativeLayout topLayout  = (RelativeLayout) findViewById(R.id.topRelLayout);
        ViewTreeObserver viewTreeObserver = topLayout.getViewTreeObserver();
        if (viewTreeObserver.isAlive()) {
          viewTreeObserver.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                if(Integer.valueOf(android.os.Build.VERSION.SDK_INT) >= 16)
                topLayout.getViewTreeObserver().removeOnGlobalLayoutListener(this);
                else
                topLayout.getViewTreeObserver().removeGlobalOnLayoutListener(this);
             int  viewWidth = tabs.getWidth();
              int viewHeight = tabs.getHeight();

              Toast.makeText(HomeScreenActivity.this, "height = "  + viewHeight + " width = " + viewWidth , 2000).show();
            }
          });
        } 
```

其中 topRelLayout 是您的 xml 文件的根布局的 id，而 tabs 是对您的选项卡视图的引用。

即使遵循简单的代码也可以正常工作。

```
tabs.post(new Runnable() {
            @Override
            public void run() {
                int w = tabs.getMeasuredWidth();
                int h = tabs.getMeasuredHeight();
                Toast.makeText(HomeScreenActivity.this, "height = "  + h + " width = " + w , 2000).show();
            }
        }); 
```

使用任何一种解决方案，您都可以获得任何屏幕尺寸的任何视图的高度/宽度。

编辑 ：

阅读您编辑的问题后，我假设您需要 Tab 小部件占用了多少屏幕百分比。我知道可以实施的唯一解决方案是：

```
WindowManager wm = (WindowManager) getSystemService(Context.WINDOW_SERVICE);
         final   Display display = wm.getDefaultDisplay();

            tabs.post(new Runnable() {
                @Override
                public void run() {
                    int h = tabs.getMeasuredHeight();
                    int screenHeight = 0;
                    if(Integer.valueOf(android.os.Build.VERSION.SDK_INT) >= 13)
                    {
                        Point point = new Point();
                     display.getSize(point);
                     screenHeight = point.y;
                    }
                    else
                        screenHeight = display.getHeight();
                    double tabPart = (((double)h/(double)screenHeight) * 100); 
                    Toast.makeText(HomeScreenActivity.this, "height = "  + screenHeight + " tabPart = " + tabPart  + " %", 2000).show();

                }
            }); 
```

# jquery - ChekBox 检查总是返回 false

> ID：14685606
> 
> 赞同：0
> 
> 时间：2013-02-04T11:16:05.007
> 
> 标签：jquery

我有一个`CheckBoxes`，`GridView`现在我想检查是否`CheckBox`是`checked`。

```
<asp:CheckBox ID="cbIsReceived" runat="server" AutoPostBack="true" Checked='<%# Eval("IsReceived") %>' OnCheckedChanged="cbIsReceived_CheckedChanged" cssClass="cbIsReceived"/> 
```

我正在使用以下 Jquery 来查看`CheckBox`状态。

```
$('.cbIsReceived').live('click', function () {

        var result = $(this).is(':checked');
        alert(result);
    }); 
```

这总是警报错误。即使我检查它。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:19:33.710

```
$('#<%= cbIsReceived.ClientID%>').on('click', function () {
    var result = $(this).is(':checked');
    alert(result);
}); 
```

或者

```
$('.cbIsReceived').on('click', function () {
    var result = $(this).is(':checked');
    alert(result);
}); 
```

在不推荐使用的[live()](http://api.jquery.com/live/)中使用[on( )](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:20:25.747

[http://api.jquery.com/prop/](http://api.jquery.com/prop/)的使用`prop`功能`jquery`

`$(this).prop('checked');`

也不`live`适用于最新版本`jquery 1.9` `http://api.jquery.com/live/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:18:11.737

使用“更改”而不是“点击”。

```
$('.cbIsReceived').live('change', function () {

    var result = $(this).is(':checked');
    alert(result);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T11:18:28.620

试试这个代码：

```
$('.cbIsReceived').live('click', function () {
    if((this).is(':checked')){
        alert(result);
    }  
}); 
```

# magento - Magento - 一站式结账零订单

> ID：14685610
> 
> 赞同：1
> 
> 时间：2013-02-04T11:16:16.057
> 
> 标签：magento, customization

在 Magento 中，我们安装了付费扩展 -[一步结帐](http://www.onestepcheckout.com/)

它工作得很好，其他一些开发人员为特定位置定制了免费送货的代码。

定制后，订单为 0 值。即产品具有价值，但小计、运费和税收价值设置为 0，请参阅附件截图。 ![在此处输入图像描述](../Images/4ef72d6c885a3142efce977b0e0c3ddc.png)

我不知道问题出在哪里，请帮助我。

谢谢。

# android - 自动 GCM 注册？

> ID：14685620
> 
> 赞同：1
> 
> 时间：2013-02-04T11:16:40.517
> 
> 标签：android, push-notification, google-cloud-messaging

是否可以自动（以编程方式）注册到 GCM 服务以获取发件人 ID（或所需的任何 ID）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:35:23.573

我不确定我是否理解你的问题。向 GCM 服务的注册总是在 Android 应用程序中以编程方式完成。您发送一个包含发件人 ID（即 Google 项目 ID）的注册请求，并在回复中获得一个注册 ID，您将其发送到您的服务器（使用该 ID 向特定设备上的应用程序发送通知） .

除非您的意思是以编程方式获取项目 ID 本身。我不认为这是可能的。您必须手动创建一个 Google API 项目才能获得此类 ID。但是，您可以在您的 Android 应用程序中编写代码来连接您的服务器以获取项目 ID（您已经手动创建），然后使用它来注册到 GCM。这将允许您更改应用程序注册到的项目 ID，而无需更新应用程序的代码。

# scala - 如果数据库没有结果，如何设置默认 Seq[Seo]？

> ID：14685622
> 
> 赞同：1
> 
> 时间：2013-02-04T11:16:44.043
> 
> 标签：scala, playframework-2.0

`Seq[Seo]`如果数据库没有结果，如何设置默认值？

```
case class Seo( page: String, title: String, desc: String)

object Seo {

  val pageseo = {
      get[String]("seo.page") ~
      get[String]("seo.title") ~
      get[String]("seo.desc") map {
      case page~title~desc => Seo (page, title, desc)
    }

  }

  def getSeo(page : String) : Seq[Seo] = {
    DB.withConnection { implicit connection =>
      SQL("select * from seo where page = {page}").on('page -> page).as(Seo.pageseo *)
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:44:03.433

我从 Play 邮件列表中复制了我们的解决方案；）

```
 def getSeo(page: String): Seq[Seo] = {
    DB.withConnection { implicit connection =>
      SQL("select * from seo where page = {page}").on('page -> page).as(Seo.pageseo *)
    } match {
      case Nil => Seq(Seo("London", "hello", "o"))
      case result => result
    }
  } 
```

# ios - GCD 问题和线程过多

> ID：14685623
> 
> 赞同：7
> 
> 时间：2013-02-04T11:16:54.210
> 
> 标签：ios, multithreading, grand-central-dispatch

我有一个图像加载器类，它提供了来自网络的 NSURL 加载和图像并执行完成块。代码其实很简单

```
- (void)downloadImageWithURL:(NSString *)URLString completion:(BELoadImageCompletionBlock)completion
{
    dispatch_async(_queue, ^{
//    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
        UIImage *image = nil;
        NSURL *URL = [NSURL URLWithString:URLString];
        if (URL) {
            image = [UIImage imageWithData:[NSData dataWithContentsOfURL:URL]];
        }  
        dispatch_async(dispatch_get_main_queue(), ^{
            completion(image, URLString);
        });
    }); 
```

}

当我更换

```
dispatch_async(_queue, ^{ 
```

注释掉

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{ 
```

图像加载速度更快，这是非常合乎逻辑的（在图像一次加载一个之前，现在一堆同时加载）。我的问题是我可能有 50 张图片，我为所有图片调用了 downloadImageWithURL:completion: 方法，当我使用全局队列而不是 _queue 时，我的应用程序最终崩溃，我看到有 85 个以上的线程。问题可能是我连续 50 次调用 dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0) 会使 GCD 创建太多线程吗？我认为 gcd 处理所有的线程并确保线程数不是很大，但如果不是这样，有什么办法可以影响线程数吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T06:14:11.693

当全局并发队列的现有 GCD 工作线程上的工作单元在内核中被阻塞很长时间（只要全局队列上还有待处理的工作），内核会创建额外的线程。

这是必要的，以便应用程序可以继续总体上取得进展（例如，待处理块之一的执行可能是允许被阻塞线程被解除阻塞的原因）。

如果工作线程在内核中被阻塞的原因是 IO（例如`+[NSData dataWithContentsOfURL:]`在这个例子中），最好的解决方案是用一个 API 替换那些调用，该 API 将异步执行该 IO 而不会阻塞，例如`NSURLConnection`用于网络或调度 I/O文件系统 IO。

或者，您可以手动限制并发阻塞操作的数量，例如通过使用计数调度信号量。

[WWDC 2012](https://developer.apple.com/videos/wwdc/2012/) GCD 会议详细讨论了这个主题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T12:01:14.303

来自[http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)

> 并发队列（也称为全局调度队列的一种）同时执行一个或多个任务，但任务仍然按照它们添加到队列的顺序启动。当前正在执行的任务在由调度队列管理的不同线程上运行。在任何给定点执行的任务的确切数量是可变的，并且取决于系统条件。

和

> 串行队列（也称为私有调度队列）按添加到队列的顺序一次执行一项任务。当前正在执行的任务在由调度队列管理的不同线程上运行（可能因任务而异）。

通过将所有块分派到高优先级并发调度队列

```
[NSData dataWithContentsOfURL:URL] 
```

这是一个同步阻塞网络操作，看起来默认的 GCD 行为将产生大量线程以尽快执行您的块。

你应该派往`DISPATCH_QUEUE_PRIORITY_BACKGROUND`. 这些任务绝不是“高优先级”。任何图像处理都应该在有空闲时间并且主线程上没有任何事情发生时进行。

如果您想更好地控制一次发生多少这些事情，我建议您考虑使用`NSOperation`. 您可以使用您的块并将它们嵌入到操作中`NSBlockOperation`，然后您可以将这些操作提交给您自己的`NSOperationQueue`. 如果`NSOperationQueue`需要`- (NSInteger)maxConcurrentOperationCount`，还可以在调度后取消操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:49:28.423

您可以使用`NSOperationqueue`，它支持`NSURLConnection`

它具有以下实例方法：

```
- (void)setMaxConcurrentOperationCount:(NSInteger)count 
```

# windows-services - 如何使用 TcpListener 通过阻塞调用终止 Windows 服务

> ID：14685627
> 
> 赞同：1
> 
> 时间：2013-02-04T11:17:04.083
> 
> 标签：windows-services, tcplistener

我有一个运行单独的后台线程的 Windows 服务。在线程内部，它启动一个 TCP 服务器，该服务器使用 TcpListener 监听客户端。

我想知道当有这样的阻塞读取时如何优雅地关闭服务：

```
listener.AcceptTcpClient(); 
```

我发现显然 Windows 服务可以中止任何其他线程，只要它们被设置为后台线程，但是如果其中一个线程阻塞怎么办？这有什么不同吗？如果有，处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:19:28.123

最好的方法是调用`listener.Close()`服务的停止事件。它将中止阻塞呼叫`SocketException`。

线程的状态（阻塞或运行）不影响线程是后台的事实。因此，如果您`listener.AcceptTcpClient()`从后台线程调用它仍然会在服务停止时中止，

# android - Android：App/Activity 失去与 ActionBar 的连接

> ID：14685628
> 
> 赞同：0
> 
> 时间：2013-02-04T11:17:09.533
> 
> 标签：android, android-actionbar

大家早上好，

我的 Activity 的 ActionBar 在离开一段时间后无法保持正确的功能。基本上，我根据我所在的 ViewPager 中的哪个页面设置了不同的 ActionBar 视图。3的中间页面实现了ActionBar.NAVIGATION_MODE_LIST，带有一个列表，用于过滤该页面上ListView的内容。在其他两页上，此列表未显示。我处理这个的代码：

```
 public class SectionsPagerAdapter extends MyPagerAdapter  {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment;
        if(i==0){

            ActionBar bar = MyApp.this.getActionBar();
             bar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD); 
            fragment   = page1;

        }else if(i==1){
             fragment =  page2;

        }else{
            fragment   =  page3;                        
        }
        return fragment;
    }

    @Override
    public int getCount() {
        return 3;
    }

@Override
public void onPageSelected(int position) {

    if(position== 1  && menuSearch != null){     

            menuSearch.setVisible(true);       
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);   

    }else{   
        if(menuSearch != null){
            menuSearch.setVisible(false);
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);    
        }
    }

    currentPage = position;

}

public int getCurrentPage() {

    return currentPage;
} 
```

我目前可以通过启动一个新活动来强制测试失败，然后我可以强制关闭它，当我回到这个主要活动时，每个页面上都会显示 ActionBars 下拉菜单。该菜单也失去了与它在第 2 页中执行的过滤属性的连接。

更新 1：

我现在认为我的问题在于我的 ViewPager、ActionBar 和它们控制的 Fragments 之间的脱节。我将以下代码添加到 Activity 的 onNavigationItemSelected 部分：

```
@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {

        Log.i(TAG,"Fragment ID:" + String.valueOf(fragment.getId()));
    if(fragment.isAdded()){
        Log.i(TAG,"fragment.isAdded");
             } 
```

当我第一次运行应用程序时，这些日志返回以下内容：

**片段 ID：2131492869 fragment.isAdded**

但是，在我强制崩溃或离开应用程序并稍后返回后，日志返回

**片段 ID：0**

fragment.isAdded 在这一点上是假的，但我不知道为什么。

任何帮助将不胜感激。

谢谢，乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:25:19.580

> 谁能告诉我为什么会发生这种情况？我应该以某种方式在 onPause 中保存操作栏状态，然后在 onResume 中恢复吗？

是的，这是因为您没有保存最后一个索引，

所以基本上你需要做的是

在`onResume`

像这样设置 viewPager 当前索引：`viewPager.setCurrentItem(lastFragmentIndex);`

我认为您需要像这样保存片段`onSaveInstanceState`并恢复它们`onRestoreInstanceState` ：

```
protected void onSaveInstanceState(Bundle outState) {
        FragmentManager fm = getSupportFragmentManager();
            fm.putFragment(outState, 1, fragment1);
            fm.putFragment(outState, 2, fragment2);
} 
```

并恢复

```
 protected void onRestoreInstanceState(Bundle savedInstanceState) {
            super.onRestoreInstanceState(savedInstanceState);
            FragmentManager fm = getSupportFragmentManager();    
            fragment1 = (Fragment) fm.getFragment(savedInstanceState, 1);
} 
```

# javascript - 如果选中，获取表格行的ID？

> ID：14685630
> 
> 赞同：2
> 
> 时间：2013-02-04T11:17:15.713
> 
> 标签：javascript, jquery, html

我有一个包含汽车列表的数据表。html 中的每一行都包含一个汽车 ID。我已将复选框列添加到我的数据表中的第一个单元格 - 如果选中该行，则该行被高亮显示以向用户表明他们已选择该行。我要做的是获取用户在单击页面上的按钮时选择的所有汽车的所有 ID。（在我有复选框的表格行中还有其他列（即 - 手动列或自动列，有时会被检查 - 就像表格中的第 5 和第 6 列一样）

所以这是我页面的cshtml的一部分..

```
@foreach (var car in Model.Cars)
{
    <tr carId="@Html.DisplayFor(modelItem => car.CarID)">
       <td class="table-data">
            <input id="SelectIndividual" name="Select" type="checkbox" />
        </td>

//more stuff set in other tds in table 
```

然后这是我迄今为止为该页面所拥有的 JS。

```
$('#GetSelectedCars').click(function (event) {

    var cars= new Array();

    carsListTable.find("tr").each(function (index, para) {

        $('tr').find('td:input:checked:first').each(function () {
            var car= new Object();
            alert($(this).parent().parent().attr("carId"));
            car.ID = $(this).parent().parent().attr("carId");
            cars.push(car);
        });

    });

    var jsonString = $.toJSON(cars); 
```

然后我想将 json 字符串返回给我的控制器（我通过将值传递到模型上的隐藏字段然后反序列化来做到这一点 - 但现在我将它设为空。我的问题是获得最佳方法如果选中，则行中的 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:34:33.070

您可以使用选择器[:checkbox](http://api.jquery.com/checkbox-selector/) [:checked](http://api.jquery.com/checked-selector/)并使用[jQuery.map](http://api.jquery.com/map/)来转换数组。[jQuery.closest()](http://api.jquery.com/closest/)方法将给出与给定选择器匹配的最接近的祖先。

```
var cars = carsListTable.find('.table-data :checkbox:checked').map(function(i, v){
    return {
        ID : $(v).closest('tr').attr('carId')
    }
}); 
```

演示[小提琴](http://jsfiddle.net/arunpjohny/2ERts/1/)

注意：元素的 id 在文档中应该是唯一的，因此`id`应该`checkbox`删除或者必须以动态值（如汽车 id）作为后缀或前缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:54:01.717

首先，对于将​​出现多次的元素，您应该使用 class 而不是 id。我建议更改复选框输入）`#SelectIndividual`。`.SelectIndividual`您应该更改的另一件事是`carId`属性，因为它不是语义有效的。您应该改用[自定义数据属性](http://ejohn.org/blog/html-5-data-attributes/)。这就是您的代码的样子：

### HTML

```
@foreach (var car in Model.Cars)
{
    <tr data-carID="@Html.DisplayFor(modelItem => car.CarID)">
       <td class="table-data">
            <input id="SelectIndividual" name="Select" type="checkbox" />
        </td> 
```

### jQuery

```
$('#GetSelectedCars').click(function (event) {
    var cars= new Array();
    $('SelectIndividual:checked').each(function () {
        var car= new Object();
        car.ID = $(this).parent().parent().data('carID'); 
        cars.push(car);
    });
});
//keep doing things 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:26:24.990

我建议使用有效的 HTML5 的[data-*](http://www.w3.org/html/wg/drafts/html/master/dom.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)属性以及汽车 id 的 jQuery [.data()](http://api.jquery.com/jQuery.data/)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T11:27:08.830

您可以为第一列中的所有复选框分配一个类，然后试试这个

```
$('.cbClass:checked').each(function () {
    tr = $(this).closest('tr');

    // use the row
}) 
```

# c++ - 使用 IDA pro 在汇编代码中嵌入跟踪功能

> ID：14685631
> 
> 赞同：0
> 
> 时间：2013-02-04T11:17:21.550
> 
> 标签：c++, dll, ida

我必须监视 C++ DLL。我想在汇编代码中插入跟踪调用，例如修改代码以将跟踪某些变量的小代码放入文本文件中。我无法访问使用dll的机器的运行时，我只能访问存储，所以我不能使用IDA调试动态spy，我必须在里面放一些带有spy代码的文件然后启动机器，运行它然后关闭机器并取回最终在存储中创建的跟踪文件。

是否有某种方法可以使用 IDA Pro 或类似工具自动插入间谍代码。我已经使用 Hex-Ray 反编译了 Dll，是的，我可以修改 C 源代码并将函数植入那里，但不幸的是，Hex-Ray 无法反转所有代码，只有 90%，然后我不能使用这种方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:38:45.700

看到这是一个 dll，您可以使用[wrapgen](http://www.gamedeception.net/content/198-some-ida-plugins-I-wrote) IDA 插件创建一个包装 DLL，该 DLL 调用原始文件并插入您需要的任何跟踪和跟踪代码。

在更高级的情况下，如果需要监视函数局部变量，可以使用包装 dll 动态修补原始 dll。

# javascript - 如何格式化压缩字符串以进行数据传输

> ID：14685638
> 
> 赞同：0
> 
> 时间：2013-02-04T11:17:54.523
> 
> 标签：javascript, encode

我正在制作一个移动应用程序（不在浏览器中 - 所以没有传输层解决方案），它需要将压缩数据发送回服务器。我在javascript中找到了几个可以很好地压缩文本的库，但它们似乎都输出了一个数组。

使用 LZMA...

```
"Lorem ipsum sit amet decorum rex quandum et futurus..." 
```

变成

```
[93, 0, 0, 1, 0, 54, 0, 0, 0, 0, 0, 0, 0, 0, 38, 27, -54, 70, 103, 90, -14, 119, -72, 125, -122, -40, 66, 28, -27, -90, 80, 22, 44, 97, -102, -55, 19, 62, 83, -53, -64, 78, -1, 99, 100, 124, 91, -47, 58, -66, -12, -40, -18, 109, 98, 108, -31, -77, -110, 59, -33, 14, -60, -4, -20, 108, -1, -1, 18, -57, 0, 0] 
```

这很好，但现在我需要以适合作为 HTTP 请求的一部分发送的格式对其进行编码。

如果可能的话，我希望它以某种方式成为 base64 字符串，因为它在另一端很容易解码，并且似乎适合该任务 - 但我不知道如何将整数字符串转换为 base64 字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:25:00.310

在现代浏览器上：

```
var s = myArray.map(function(n) {
    return String.fromCharCode(n & 0xff);  // to fix your negative values
}).join('');

var base64 = btoa(s); 
```

where是一个全局函数，如果不存在`btoa`可以[填充。](https://github.com/davidchambers/Base64.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:21:49.310

这需要一个数组并返回一个 Base64 编码的字符串：

```
function(input)
    {
        var keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
        var output = "";
        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
        var i = 0;

        while (i < input.length)
        {
            chr1 = input[i++];
            chr2 = input[i++];
            chr3 = input[i++];

            enc1 = chr1 >> 2;
            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
            enc4 = chr3 & 63;

            if (isNaN(chr2))
                enc3 = enc4 = 64;
            else if (isNaN(chr3))
                enc4 = 64;

            output = output + keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);
        }

        return output;
    } 
```

# c# - 如何将自定义图标添加到 Sharepoint 2010 中的功能

> ID：14685643
> 
> 赞同：0
> 
> 时间：2013-02-04T11:18:13.207
> 
> 标签：c#, sharepoint-2010

当我部署解决方案时，我需要创建文件夹并将图标放在那里。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:40:52.630

您可以为此使用模块。

[http://msdn.microsoft.com/en-us/library/ms453137.aspx](http://msdn.microsoft.com/en-us/library/ms453137.aspx)

将模块添加到 Visual Studio 项目并在其中添加图像后，您可以通过以下方式引用它：

```
var web = SPContext.Current.Web; //web scope, if site scope then use SPContext.Current.Site.RootWeb instead.
var myFile = web.ServerRelativeUrl + "/ModuleName/image.jpg" 
```

# wso2 - 是否可以在 WSO2 CEP 分析的 WSO2 BAM 中显示数据？

> ID：14685649
> 
> 赞同：1
> 
> 时间：2013-02-04T11:18:28.750
> 
> 标签：wso2, complex-event-processing, wso2bam, wso2cep

我使用 CEP 分析了要在 BAM 中显示的数据。

我正在使用[KPI 分析器示例](http://docs.wso2.org/wiki/display/CEP201/KPI+Analyzer)

是否可以在 BAM 中显示？如果是，我应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:11:29.230

为此，您必须编写一个自定义代理，将 CEP 的输出存储到数据库中。

编写自定义代理的指南可在[http://suhothayan.blogspot.com/2013/02/writing-custom-broker-for-wso2-cep.html获得](http://suhothayan.blogspot.com/2013/02/writing-custom-broker-for-wso2-cep.html)

# java - 使用 java.util.Timer 监控 java 中的 2 个线程，它们基于时间相互依赖

> ID：14685653
> 
> 赞同：1
> 
> 时间：2013-02-04T11:18:40.993
> 
> 标签：java, multithreading, timer, telnet

我想知道如何监视两个线程，如果一个线程在特定时间处于等待状态，我想运行另一个线程......

要特别关注我正在做的事情。我有 2 个线程.. 作家线程：

```
writer = new Thread() {
  public void run() {
    try {
      Util.copyStream(remoteInput, localOutput);
    } catch(IOException e) {
      e.printStackTrace();
      System.exit(1);
    }
  }
};

writer.setPriority(Thread.currentThread().getPriority() + 1);
writer.start();
reader.setDaemon(true);
reader.start();

try {
  writer.join();
  reader.interrupt();
} catch(InterruptedException e) {

} 
```

和读者线程：

```
reader = new Thread() {
  public void run() {
    int ch;
    try {
        while(!interrupted() && (ch = localInput.read()) != -1) {
          System.out.print((char)ch);
          localOutput.write(ch);
          if (ch==10) {
              remoteOutput.write(ch);
              remoteOutput.flush();
              sleep(1000);
              continue;
          }
          remoteOutput.write(ch);
            remoteOutput.flush();
          }
    } catch(Exception e) {
      e.printStackTrace();
    }
  }
}; 
```

因此，如果我的编写器线程没有从“remoteInput”写入“localOutput”超过特定时间（例如 3 秒），我应该“运行”读取器线程..，以便读取器从“localInput”读取和写入“远程输出”。localInput 和 remoteInput 是**InputStreams**，而 remoteInput 和 remoteOutput 是简单的**OutputStreams**。我还想知道是否可以使用**java.util.Timer**来做到这一点， 请帮助我完成..提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:37:29.100

您可以结合使用等待/通知和 Timer 类来决定何时触发通知事件。

# jquery - ASP.Net jquery 从 web 方法返回数据

> ID：14685660
> 
> 赞同：0
> 
> 时间：2013-02-04T11:19:02.383
> 
> 标签：jquery, asp.net, webmethod

我从 jquery 调用一个 web 方法，它正确地做了一些数据库的东西，然后它应该返回一个字符串。在 Jquery 中，我想获取返回的字符串并将其显示在 Panel 对象中。但我无法获取字符串，也无法在面板中显示它

注意：我访问面板的方式是正确的。这有效 $('#<%=pnl_poll_result.ClientID %>').text("some string");

这是代码，

```
 $.ajax({
                    type: "POST",
                    url: "ViewPost.aspx/insert_post_poll_selections",
                    data: "{'ProfessionalId':'1','choice_id':'" + $('#<%=rbl_poll.ClientID %> input:checked').val() + "','PostId':'<%=Session["SessionPostId"].ToString() %>','UserId':'<%=Session["SessionUserId"].ToString() %>'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        $('#<%=pnl_poll_result.ClientID %>').text(data);
                    }
                }); 
```

这是网络方法

```
[WebMethod]
public static String insert_post_poll_selections(String ProfessionalId, String choice_id, string PostId, string UserId)
{

 //do some database stuff

    return "return message from web method";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:26:14.867

我认为您应该在 webbrowser 的控制台中调试代码以查看包含数据变量的内容。也许解决方案很简单，你应该使用

```
$('#<%=pnl_poll_result.ClientID %>').text(data.responseText); 
```

# html - 可访问性与只读输入

> ID：14685661
> 
> 赞同：0
> 
> 时间：2013-02-04T11:19:10.480
> 
> 标签：html, forms, accessibility

我有一个表单，其中包含一些只读字段，具体取决于客户角色。通常，我对这些输入使用只读字段。

您对这种使用辅助技术的方法有什么问题吗？

还有其他问题或好处吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T13:35:35.360

自 Internet Explorer 3.0 以来，我一直在使用屏幕阅读器，并且对只读字段没有任何问题。我的屏幕阅读器在读取值之前宣布该字段是只读的，因此我知道我无法编辑该字段。

# http - 英镑登录网址

> ID：14685667
> 
> 赞同：0
> 
> 时间：2013-02-04T11:19:24.960
> 
> 标签：http, url, fragment, http-referer, rfc

当我打开一个 url`http://stackoverflow.com/#abc`时，然后单击页面中的链接。我发现Referer仍然是`http://stackoverflow.com`（Chrome，F12）。为什么不`#abc`呢？

当我打开一个包含“#”的重定向 url 时，也会出现同样的问题。

有人可以解释一下吗？有没有相关的 RFC 文档？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:42:58.143

因为这就是为什么“referer”标头字段被指定为工作？（见[http://greenbytes.de/tech/webdav/rfc2616.html#header.referer](http://greenbytes.de/tech/webdav/rfc2616.html#header.referer)）

# rest - 如何为 RESTful Web 服务创建自定义媒体类型（应用程序/vnd）？

> ID：14685672
> 
> 赞同：35
> 
> 时间：2013-02-04T11:19:29.653
> 
> 标签：rest, media, restful-architecture, hateoas, hypermedia

我现在正在使用 REST，并认为我正确实施[HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)只是为了让所有概念都正确。

为此，我想创建自己的媒体类型（`application/vnd[...]+xml`和`application/vnd[...]+json`）。

第一个问题：**媒体类型是否定义了我的服务器和客户端之间的合同？**

媒体类型将定义我的消息格式，因此我需要添加 XML 模式和 JSON 模式以配合新的媒体类型（以便 REST 客户端知道消息中的内容以及发送回的内容）。

我在网上做了一些研究，但是缺少有关如何做到这一点的详细信息。它是否只涉及编写详尽的规范/文档，还是有一些技术步骤可以实施？（我不需要向 IANA 注册，对吗？）

**如何`application/vnd`创建一个新的 - 功能齐全的 - 媒体类型？以及您需要注意什么才能让客户正确使用它？**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-12T15:19:59.710

@约翰多多

> 第一个问题：媒体类型是否定义了我的服务器和客户端之间的合同？

是的，媒体类型是合同的一部分。与 SOAP（即 WSDL）不同，REST API 中的合同不是静态的。契约是由底层协议（即HTTP）、URIs和媒体类型（不禁止几种媒体类型一起使用）的组合定义的。媒体类型定义数据模型、处理模型、超媒体控件（即带注释的链接、输入表单等），并支持包括由链接关系、元素名称、id、类名等描述的附加应用程序特定信息...

> 媒体类型将定义我的消息格式，因此我需要添加 XML 模式和 JSON 模式以配合新的媒体类型（以便 REST 客户端知道消息中的内容以及发送回的内容）。

您只需要定义涵盖文档结构的通用模式。您不需要为特定消息定义单独的模式。您的消息必须符合媒体类型定义的结构。

> 如何创建新的 - 功能齐全的 - 应用程序/vnd 媒体类型？以及您需要注意什么才能让客户正确使用它？

1.  描述它（即编写格式规范）；
2.  向 IANA 注册：[http](http://www.iana.org/cgi-bin/mediatypes.pl) : //www.iana.org/cgi-bin/mediatypes.pl 在 vnd.* 树下注册媒体类型需要将近一周的时间来注册。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T21:57:41.660

通过三个简单的步骤查看[RESTful 超媒体 API](http://www.amundsen.com/blog/archives/1041)

您的媒体类型应该描述数据类型，但我不会使用 XML 模式来描述。如果您使用 XML 模式，我强烈建议您使用[松散版本控制策略](http://soa.dzone.com/news/web-service-contract)，否则您会发现每次要添加新元素或属性时都需要新的媒体类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T17:02:13.443

> 媒体类型是否定义了我的服务器和客户端之间的合同？

不，媒体类型只定义了数据的类型（例如应用程序）和子类型（例如json）

> 如何创建新的 - 功能齐全的 - 应用程序/vnd 媒体类型？以及您需要注意什么才能让客户正确使用它？（[http://www.ietf.org/rfc/rfc2046.txt?number=2046](http://www.ietf.org/rfc/rfc2046.txt?number=2046)）

如果您决定创建自己的自定义媒体子类型并希望它被广泛使用，则应在 IANA 注册 ( [http://www.iana.org/assignments/media-types](http://www.iana.org/assignments/media-types) )。这是与潜在客户共享带外信息的标准方式。

# c# - 等待来自服务器端的java脚本确认消息响应？

> ID：14685679
> 
> 赞同：0
> 
> 时间：2013-02-04T11:19:47.827
> 
> 标签：c#, javascript, asp.net

这样的事情可能吗？

```
 ScriptManager.RegisterClientScriptBlock(this.Page, this.GetType(), "Confirm", "x()", true);
    if (hid.Value != null)
    {
    }
    else
    {
    }

    function x() {
    var message = confirm("Are you sure you want to continue ?");
    if (message == true) {
        document.getElementById("hid").value = "1";
    }
    else {
        document.getElementById("hid").value = "0";
    }
} 
```

# jsf-2 - JSF 如何访问视图中的 HashMap 值？

> ID：14685680
> 
> 赞同：0
> 
> 时间：2013-02-04T11:19:47.367
> 
> 标签：jsf-2, hashmap, el

JSF 使用哪种方法来访问`HashMap`视图中的值？`HashMap`我知道使用 EL Expression获得价值的方法`#{bean.map.key}`，但我很好奇它是如何在幕后工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:24:22.103

这不是 JSF 的一部分。这是 EL 的一部分。EL 有一些默认的[解析器](http://docs.oracle.com/javaee/6/api/javax/el/ELResolver.html)。其中之一是[`MapELResolver`](http://docs.oracle.com/javaee/6/api/javax/el/MapELResolver.html). 您当然可以自制并通过`<application><el-resolver>`.

# android - 如何在android中用新的数据库文件替换现有的sqlite数据库文件

> ID：14685682
> 
> 赞同：8
> 
> 时间：2013-02-04T11:19:52.663
> 
> 标签：android, sqlite, android-sqlite

我正在做一个使用 sqlite 数据库的应用程序我的应用程序中有一个功能有一个按钮“更新数据库”。

当用户单击“更新数据库”按钮时，我需要使用来自 URL 的新 db 文件升级旧 db 文件。

这个怎么做。研究告诉我，我们无法更改 db，因为它位于 .apk 文件中。有没有办法解决这个问题。请帮帮我。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T11:42:55.747

```
private void importDatabase(String inputFileName) throws IOException
{
    InputStream mInput = new FileInputStream(inputFileName);
    String outFileName = YOUR_DB_PATH_HERE;
    OutputStream mOutput = new FileOutputStream(outFileName);
    byte[] mBuffer = new byte[1024];
    int mLength;
    while ((mLength = mInput.read(mBuffer))>0)
    {
        mOutput.write(mBuffer, 0, mLength);
    }
    mOutput.flush();
    mOutput.close();
    mInput.close();
} 
```

**编辑：**

您可能会发现它很有帮助：

[如何将现有数据库与 Android 应用程序一起使用](https://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application/9109728#9109728)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T11:38:26.473

只需使用下载管理器从 URL 下载 db 文件并将文件复制到此路径

```
 /data/data/<YOUR PACKAGE NAME>/databases/ 
```

它会自动更新。我已经使用了这个并且正在工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:22:55.697

在您的应用程序首次启动时，您应该将数据库从 apk 文件中复制到外部/内部存储中。当您需要更新（使用语句或通过替换整个数据库）时，您可以毫无问题地在内部/外部内存中操作。当您更新您的应用程序（并且可能新应用程序内部有一个新数据库）时，在新应用程序首次启动时，您应该替换您存储在内部/外部存储器中的数据库。

# python - 使用 Chameleon ZPT 渲染具有任意深度的嵌套元素

> ID：14685684
> 
> 赞同：3
> 
> 时间：2013-02-04T11:19:57.703
> 
> 标签：python, pyramid, chameleon, template-tal, template-metal

我正在使用 Pyramid 框架，我想用 Chameleon 渲染一个带有任意深度的嵌套列表（ul，li）的 html 菜单。

为了做到这一点，我在 Chameleon 中找不到某种递归方法。这似乎是一个普遍的需求，所以我想知道渲染具有任意深度的嵌套元素的正确方法是什么？

但是，可能还有一些菜单«widget»已经可用，经过全面测试并与金字塔和变色龙兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:49:23.987

```
<ul metal:define-macro="comment_list">
  <li tal:repeat="comment comments" class="comment" comment_id="${comment.id}">
    <div>ID: ${comment.id} ${comment.body}</div>
    <div tal:define="comments comment.children">
      <ul metal:use-macro="template.macros['comment_list']" />
    </div>
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-25T04:06:11.030

这是 Graeme 关于输入 bissigalis 答案的问题的一个答案。

您将从`Comment`这样的对象开始：

```
class Comment():                                                                                     

    id = 0                                                                                           
    body = ""                                                                                        
    children = []                                                                                    

    def __init__(self, id, body, children):                                                          
        self.id = id                                                                                 
        self.body = body                                                                             
        self.children = children 
```

然后，您将创建一个评论列表及其子项。为了玩玩，我只是手动完成了这个（对不起，如果它的样式不正确）：

```
comments = []
comment1 = Comment(1, "First comment", None)
comment2 = Comment(2, "Second comment", [
        Comment(3, "Third comment", [
                Comment(5, "Fifth comment", None)
            ]
        ),
        Comment(4, "Fourth comment", None),
    ]
)

comment6 = Comment(6, "Sixth comment", None)

comments.append(comment1)
comments.append(comment2)
comments.append(comment6) 
```

然后，您只需从视图代码中将其作为返回字典的一部分：

```
return {'comments': comments} 
```

bismagalis 答案中的模板代码将生成以下 HTML：

```
 <ul>
          <li class="comment" comment_id="1">
            <div>ID: 1 First comment</div>
            <div>
              <ul>

        </ul>
            </div>
          </li>
          <li class="comment" comment_id="2">
            <div>ID: 2 Second comment</div>
            <div>
              <ul>
          <li class="comment" comment_id="3">
            <div>ID: 3 Third comment</div>
            <div>
              <ul>
          <li class="comment" comment_id="5">
            <div>ID: 5 Fifth comment</div>
            <div>
              <ul>

        </ul>
            </div>
          </li>
        </ul>
            </div>
          </li>
          <li class="comment" comment_id="4">
            <div>ID: 4 Fourth comment</div>
            <div>
              <ul>

        </ul>
            </div>
          </li>
        </ul>
            </div>
          </li>
          <li class="comment" comment_id="6">
            <div>ID: 6 Sixth comment</div>
            <div>
              <ul>

        </ul>
            </div>
          </li>
        </ul> 
```

那里似乎有很多无关紧要的`<div>`标签`<ul>`，所以我可能错过了一些东西......

# c# - 使用 Aspose.Words v13.1.0 从第一列读取最后一行

> ID：14685686
> 
> 赞同：0
> 
> 时间：2013-02-04T11:19:59.593
> 
> 标签：c#, aspose

我有一个带有两列布局的word文档。如何在word文档中从第一列读取最后一行并从第二列读取第一行。如果第一列最后一行文本采用特定格式，则向下移动一行，这将自动将文本移动到下一列（第二个）。

请让我知道如何使用 Aspose.Words V13.1.0 在 .net 中实现这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:59:23.233

首先，您需要从此[链接](http://www.aspose.com/community/files/51/.net-components/aspose.words-for-.net/entry187174.aspx)下载离线示例包以使用以下代码示例。然后提取存档并从 DocumentLayoutHelper 示例中，将 RenderedDocument 和 LayoutEntities 源文件包含到他的应用程序中。

这是示例代码：

```
Document doc = new Document(dataDir + "Test.docx");

// This sample introduces the RenderedDocument class and other related classes which provide an API wrapper for
// the LayoutEnumerator. This allows you to access the layout entities of a document using a DOM style API.

// Create a new RenderedDocument class from a Document object.
RenderedDocument layoutDoc = new RenderedDocument(doc);

// Loop through the layout info of each page
foreach (RenderedPage page in layoutDoc.Pages)
{
    if (page.Columns.Count > 1)
    {
        // Find the last line in the first column on the page.
        RenderedLine lastLine = page.Columns.First.Lines.Last;

        // This is the pargraph which belongs to the last line on the page, implement required logic and checks here.
        Paragraph para = lastLine.Paragraph;
        if (para.ParagraphFormat.StyleIdentifier == StyleIdentifier.Heading1)
        {
            // Insert a blank paragraph before the last paragraph in the column.
            para.ParentNode.InsertBefore(new Paragraph(doc), para);
        }

        // This is how to get the first line in the second column and the related paragraph.
        // Use this if it is required.
        RenderedLine secondColumnLine = page.Columns[1].Lines.First;
        Paragraph secondColumnPara = lastLine.Paragraph;
    }
} 
```

*PS，希望上面的例子能满足你的要求。我叫 Nayyer，是 Aspose 的支持/Engangelist 开发人员。*

# c# - 无法访问已发布的表单数据 (MVC)

> ID：14685687
> 
> 赞同：-1
> 
> 时间：2013-02-04T11:20:01.927
> 
> 标签：c#, asp.net-mvc

## 如何在操作方法中访问已发布的表单数据并在视图中显示

我正在 MVC 中创建一个输入向导。有两个视图，一个用于从用户那里获取输入，另一个用于显示输入数据。

这是模型的代码：

```
 public class Info
  {
    public int CustomerId { set; get; }
    public double Price { set; get; }
    public string name { set; get; }
  }
} 
```

控制器代码-

```
 public ActionResult FillCustomer()
    {
        return View();
    }

    public ActionResult DisplayCustomer(FormCollection frm)
    {
        Info info = new Info();

        info.name = Convert.ToString( Request.Form["name"]);
        info.Price = Convert.ToDouble(Request.Form["price"]);
        info.CustomerId = Convert.ToInt32(Request.Form["customerid"]);

        return View(info);
    } 
```

FillCustomer View的代码-

```
<form method="post" action="DisplayCustomer">
Name: <input type="text" id="name" /><br />
Price: <input type="text" id="price" /><br />
CustomerId: <input type="text" id="customerid" />
<br />
<input type="submit" id="btn1" />
</form>
</body>
</html> 
```

DisplayCustomer View的代码-

```
<body>
<div>
Name is <%=Model.name %> and ID is <%=Model.CustomerId %>

<%if (Model.Price > 200)
  {%>

Greater than 200

<%}
  else %>

<%{%>Lesser than 200 

    <%} %>
    </div>
</body>
</html> 
```

我用调试器检查过，控制器没有收到发布的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:51:31.667

表单的输入元素应该有一个**name**属性

```
<form method="post" action="DisplayCustomer">
Name: <input type="text" id="name" name="name" /><br />
Price: <input type="text" id="price" name="price" /><br />
CustomerId: <input type="text" id="customerid" name="customerid" />
<br />
<input type="submit" id="btn1" />
</form> 
```

现在您将获得表单数据

```
 Info info = new Info();
        info.name = Convert.ToString( Request.Form["name"]);
        info.Price = Convert.ToDouble(Request.Form["price"]);
        info.CustomerId = Convert.ToInt32(Request.Form["customerid"]); 
```

*在控制器中，表单数据作为键/值对接收。并且键是从名称属性中生成的。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:20:12.513

您正在使用 MVC，因此 DisplayCustomer 方法中的参数是您从视图传递的模型，该模型由模型绑定器隐式创建。将类型从 FormCollection 更改为 Info 类，如下所示：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult DisplayCustomer(Info model)
{
   // you can now access to Info properties
} 
```

这样信息对象的值就会被填充，我认为这就是你想要完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:29:01.837

我认为您错过了编写 DisplayCustomer 函数的属性顶部。就写吧，希望能成功。

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult DisplayCustomer(FormCollection frm)
{
    Info info = new Info();

    info.name = Convert.ToString( Request.Form["name"]);
    info.Price = Convert.ToDouble(Request.Form["price"]);
    info.CustomerId = Convert.ToInt32(Request.Form["customerid"]);

    return View(info);
} 
```

# javascript - 为 itune 对象抛出未定义的错误

> ID：14685689
> 
> 赞同：1
> 
> 时间：2013-02-04T11:20:14.680
> 
> 标签：javascript, plugins

以下代码引发未定义的错误。

```
try {
    var iTunesApp = new ActiveXObject("itunes.application");
}
catch (err) {
    alert(err.Message);
} 
```

# jquery - 按字母顺序排序 UL 和 LI

> ID：14685694
> 
> 赞同：0
> 
> 时间：2013-02-04T11:20:29.463
> 
> 标签：jquery, html, list

大家早上好，

我有一些代码可以对我拥有的列表的直接 LI 进行排序，但是我希望它也可以按字母顺序对子级别进行排序，但是我尝试过的所有内容都不起作用，包括将类添加到子级别 - 这只是附加每个 LI 到它，这显然是错误的。

有人可以看一下代码并帮帮我吗？我将不胜感激:)

[http://codepen.io/andyjh07/pen/yetIq](http://codepen.io/andyjh07/pen/yetIq)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:45:55.163

试试这个：

```
function firstLevel(){
  var mylist = $('ul.sort');
  var listitems = mylist.children('li').get();

  listitems.sort(function(a, b) {
    var compA = $(a).text().toUpperCase();
    var compB = $(b).text().toUpperCase();
    return (compA < compB) ? -1 : (compA > compB) ? 1 : 0;
  });
  $.each(listitems, function(idx, itm) { 
    mylist.append(itm); 
  });

  secLevel();
}

function secLevel(){
  var sublist = $('ul.sort li ul');
  var sublistitems = sublist.children('li').get();
  sublistitems.sort(function(a, b) {
    var compA = $(a).text().toUpperCase();
    var compB = $(b).text().toUpperCase();
    return (compA < compB) ? -1 : (compA > compB) ? 1 : 0;
  });
  $.each(sublistitems, function(idx, itm2) { 
    sublist.append(itm2); 
  });

}

$(document).ready(function() {
  firstLevel()
}); 
```

# android - 地图视图为正方形

> ID：14685696
> 
> 赞同：0
> 
> 时间：2013-02-04T11:20:36.973
> 
> 标签：android, android-mapview

我有个问题。我总是生成 api 键来显示我的地图视图，我从来没有遇到过问题。现在，相反，每个生成的密钥都会使我的智能手机上的地图视图显示为小方块，就好像没有网络一样。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:37:22.637

是v1映射sdk吗？您是否正确许可（网络）？日志呢。地图正在记录错误，所以请看那里。

# android - Android 应用和网络服务之间的身份验证 + facebook 登录

> ID：14685700
> 
> 赞同：7
> 
> 时间：2013-02-04T11:20:51.610
> 
> 标签：android, facebook, web-services

我的 android 应用程序中唯一的登录选项是通过 Facebook 登录。我想使用 Web 服务 (ASMX)，并且对于每个请求，服务器必须验证用户是否通过 facebook 进行了身份验证。我找到了一个解决方案：

> 1) 从 Android 应用程序向 Facebook 验证用户
> 
> 2) 获取 FB auth token 到 android app
> 
> 3) 将身份验证令牌和 facebook UID 从 Android 转发到 Web 服务器
> 
> 4) 在 Web 服务器上，使用提交的令牌进行 Facebook API 调用。
> 
> 如果来自 web 服务器的 Facebook API 调用返回有效的身份验证，并且用户 id 等于 Android 应用程序提交的用户 id，则您的服务器可以信任该 id（并且您可以确定 Android 身份验证是真实的）
> 
> [关联](https://stackoverflow.com/questions/7756878/facebook-authentication-to-my-server-using-android)

我的问题是：

1.  每次向 Web 服务发送请求时，是否必须发送 facebook 用户 ID 和令牌？或者使用 cookie（如果可能的话）
2.  我必须将 Web 服务注册为 facebook 应用程序吗？我发现了这个： [C# Facebook SDK 入门](http://csharpsdk.org/docs/web/getting-started)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-21T12:28:08.387

您的解决方案看起来不错。实际上，Android 客户端唯一需要传递给 Web 服务的是身份验证令牌。使用该身份验证令牌，您可以做任何事情，当然还有用户授予的权限。因此，Android 客户端必须向用户询问您的 Web 服务将使用的权限。

对于您的 2 个问题：

1.  不可以。您应该只发送一次 FB 身份验证令牌。Web 服务器可以从 FB 检索用户信息后，您可以将这些信息保存到 DB（在简单的用户模型中），然后使用您自己的身份验证引擎（cookie、API 令牌等）创建会话

2.  不需要。您不需要将 Web 服务注册为 FB 应用程序。正如我上面提到的，使用 FB 身份验证令牌可以做很多事情。您还可以查看[Facebook Graph API](https://developers.facebook.com/docs/reference/api/publishing/)

# responsive-design - 响应式设计 - 禁用触摸屏的 jquery 效果

> ID：14685701
> 
> 赞同：1
> 
> 时间：2013-02-04T11:20:59.713
> 
> 标签：responsive-design, screen-orientation

我的网站上有一些 jquery 鼠标悬停效果，我需要禁用触摸屏，但是，我怎么知道禁用 JQuery 的屏幕宽度？目前我的分辨率低于 800 像素。这适用于 ipad 肖像，但是当我把它变成风景时，JQuery 再次被激活。我读过 Ipad 横向宽度为 1024 像素，但这也可能是小型非触摸屏的大小。有没有办法可以为某些设备指定效果而不是屏幕宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:36:29.743

要实现这一点，您应该考虑以另一种方式工作，而不是禁用触摸设备的鼠标悬停事件添加非触摸设备的事件。

将[Modernizr](http://modernizr.github.com)添加到您正在处理的项目中（您可能已经在其中获得了它）。添加后，您可以通过将其作为类添加到 HTML 元素来包含“触摸”测试

```
<html class="touch"> 
```

如果设备具有触摸功能，那么一切都将保持原样，但是如果设备没有触摸功能，则 moderizr 会将其从`touch`to 转换为 to`no-touch`

```
<html class="no-touch"> 
```

然后，您可以将鼠标事件绑定到具有类的 html 元素上`.no-touch`

我在代码笔中放了一个例子 - [http://rwd.is/VyRl37](http://rwd.is/VyRl37)

这假设您仍在为所有设备加载 j​​Query 库并决定是否加载基于触摸设备的鼠标悬停功能。如果您正在查看有条件地加载 jQuery 本身，那么您应该查看[enquire.js](http://wicky.nillia.ms/enquire.js/)以指定宽度加载 jQuery。

如果您想在较小的设备上保留 jQuery 的其他功能，但又想提高性能，您可以考虑使用[Zepto.js](http://zeptojs.com/)作为轻量级替代方案。

最后， [Response.js](http://responsejs.com/)还允许您在特定断点处调用函数，但您仍然会遇到不知道它是否启用触摸的问题。

# java - 如何描述共享引用？

> ID：14685707
> 
> 赞同：-2
> 
> 时间：2013-02-04T11:21:12.233
> 
> 标签：java

我试图以最好的方式理解共享引用，但我不确定我是否完全理解它。

我对共享引用的理解是，当我有一个集合并且代码中存在对该特定集合的两个或多个引用时，如果其中一个引用发生更改，另一个引用将不一样并产生错误，对吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:38:02.200

想象一下，你和你的兄弟在马戏团，你们每个人都赢得了一个气球和一支笔的奖品。你在气球上画了一张快乐的脸，而你的兄弟在他的气球上画了一张悲伤的脸。

现在您**没有**共享参考。你们每个人都可以更改气球上绘制的内容，而无需更改另一个。

可悲的是，你不小心放开了你的气球，但你的兄弟因为爱你，提议与你分享他的气球，所以他在气球上系了第二根绳子，然后把那根绳子递给了你。您现在已**共享对**一个气球的引用。

现在，无论对气球上的面部所做的任何更改都将由你们俩共享。有一个气球和两个绳子。如果你在你拿着的气球上画一张快乐的脸，你的兄弟也会在他拿着的气球上找到一张快乐的脸，因为它们是**同一个**气球。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:25:11.297

> 如果在其中一个引用中更改它，另一个引用将不一样并产生错误，对吗？

正确但部分。如果集合的内容通过一个引用发生更改，则另一个引用也将指向更新的内容。

你的另一部分说，它会产生错误。好吧，这取决于逻辑。

```
class A
{
    public static void main(String[] args)
    {
        A a1 = new A();
        A a2 = a1;
        A a3 = a2;
    }
} 
```

在这里，所有的引用都指向同一个对象。因此，如果对象被 修改`a1`，其他引用`a2`也`a3`将看到修改状态。

# c# - Web API 性能？

> ID：14685713
> 
> 赞同：10
> 
> 时间：2013-02-04T11:21:24.950
> 
> 标签：c#, asp.net, asp.net-mvc, .net-4.0, asp.net-web-api

我刚在想 ，

随着 `WebApi`它的`routing mechanism` 工作方式是读取`http verb`（ GET POST 等...），然后搜索匹配的方法名称/参数：

例如 ：

*   如果是`GET` 并且 URI 是`api/Customers/5`：

    *   方法应该从`Get`

    *   如果有`ID`，请搜索一个接受 int 作为参数的方法。

    *   等等（还有更多规则）。

我主要相信他们是使用反射来做到的。

**问题 ：**

对于每个 URI 请求，搜索所有这些数据只是为了附加一个方法，这难道不是对性能的影响吗？

我可以在哪里轻松地从客户端发送一个非常短的字符串，这将暗示服务器端的方法？

*为什么不以简单的方式来做呢？好的，因为我们想使用 http 动词作为含义。好的。但是这么多操作只是为了执行一个方法*

**示例 #1**

`get api/Customers/5`

可能

`a.ashx?m=gc&id=5 (method=GetCustomer & id=5)`

**示例 #2**

`put api/Customers/5?v=123`

可能

`a.ashx?m=uc&id=5?v=123' (method=UpdateCustomer & id=5 & value=123)`

我的更短。

不要误会我的意思。我相信这个 api 是由非常聪明的人完成的，他们知道他们在说什么。

只是想知道我错过了什么。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-04T12:19:31.237

如果您不对其进行编码，Web api 有很多 HTTP 处理程序所没有的选项完整列表：[http ://www.asp.net/whitepapers/mvc4-release-notes#_Toc317096197](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc317096197)

*   OData 支持（通过 Queryable 属性）
*   内容协商
*   过滤器
*   模型绑定和验证
*   能够在 IIS 之外自行托管
*   与包含路由规则的相关资源的链接生成
*   完全支持路由/路由
*   能够使用 IApiExplorer 创建自定义帮助和测试页面

性能比较 HttpHandler 与 WebAPI：[http ://www.west-wind.com/weblog/posts/2012/Sep/04/ASPNET-Frameworks-and-Raw-Throughput-Performance](http://www.west-wind.com/weblog/posts/2012/Sep/04/ASPNET-Frameworks-and-Raw-Throughput-Performance)

As always, you need to choose the the technology that suits you best, if you want performance go with Http Handler. If you want flexibility and rest go with Web API. You might want rest if you expose web services that other will consume

# tcl - 使用 tcl 命令运行 sipp

> ID：14685718
> 
> 赞同：-3
> 
> 时间：2013-02-04T11:21:36.077
> 
> 标签：tcl

我想使用 tcl 代码运行 sipp。有人可以帮我吗？我是 tcl 编码的新手。我在谷歌上冲浪，但没有得到太多帮助。步骤在这里

1.  打开命令提示符
2.  在我的情况下，转到 sipp 位置`C:\Sipp_3.1`
3.  运行此命令`sipp 10.232.249.124 -i 192.168.200.2 -sf reg.xml`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:10:56.153

最低限度，你可能会看到这个：

```
cd {C:\Sipp_3.1}
exec sipp 10.232.249.124 -i 192.168.200.2 -sf reg.xml 
```

当然，您最好使用一些变量将其分解，以便各种参数具有名称：

```
set workingDirectory {C:\Sipp_3.1}
set IP1 10.232.249.124
set IP2 192.168.200.2
set config reg.xml

cd $workingDirectory
exec sipp $IP1 -i $IP2 -sf $config 
```

名字可能会更好，但我对 sipp 程序真的不太了解。

# android - 如何在android中使用adb恢复出厂设置？

> ID：14685721
> 
> 赞同：46
> 
> 时间：2013-02-04T11:21:45.023
> 
> 标签：android, android-intent, android-emulator, android-widget

如何使用 ADB 命令在 android 中恢复出厂设置？我曾使用 adb reboot recovery 命令进行重置。但是第三方应用程序无法以某种方式清除。使用ADB实现的正确方法是什么？

实际上，我想通过 java 代码对 android 设备进行出厂重置。这里有什么解决方案？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2016-02-17T01:59:18.720

您可以在 adb 中发送意图**MASTER_CLEAR**：

```
adb shell am broadcast -a android.intent.action.MASTER_CLEAR 
```

或作为根

```
adb shell  "su -c 'am broadcast -a android.intent.action.MASTER_CLEAR'" 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-04T11:26:01.723

尝试 ：

```
adb shell
recovery --wipe_data 
```

这是[参数](https://stackoverflow.com/questions/10817721/wipe-data-factory-reset-through-adb)列表：

```
* The arguments which may be supplied in the recovery.command file:
 *   --send_intent=anystring - write the text out to recovery.intent
 *   --update_package=path - verify install an OTA package file
 *   --wipe_data - erase user data (and cache), then reboot
 *   --wipe_cache - wipe cache (but not user data), then reboot
 *   --set_encrypted_filesystem=on|off - enables / diasables encrypted fs 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-09-06T20:44:47.050

### 警告

来自@sidharth：“导致我的熔岩虹膜阿尔法进入引导循环:(”

* * *

对于运行 Android Marshmallow 6.0.1 的摩托罗拉 Nexus 6，我做了：

```
adb devices       # Check the phone is running
adb reboot bootloader
# Wait a few seconds
fastboot devices  # Check the phone is in bootloader
fastboot -w       # Wipe user data 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-02-25T22:00:33.290

我已经从快速启动模式（手机 - Xiomi Mi5 Android 6.0.1）

以下是步骤：

```
# check if device available
fastboot devices
# remove user data
fastboot erase userdata
# remove cache
fastboot erase cache 
# reboot device
fastboot reboot 
```

# sql - 在两个相似的表层次结构之间匹配一组子记录

> ID：14685730
> 
> 赞同：0
> 
> 时间：2013-02-04T11:22:10.233
> 
> 标签：sql, oracle, set

我有两个类似的表层次结构：

```
Owner -> OwnerGroup -> Parent 
```

和

```
Owner2 -> OwnerGroup2 
```

我想根据一组值确定 Owner2 中是否存在完全匹配的所有者。每个 Owner 表中大约有 100 万行。一些 OwnerGroup 最多包含 100 个所有者。

所以基本上，如果有一个 OwnerGroup 包含所有者“Smith”、“John”和“Smith、“Jane”，我想知道完全匹配的 OwnerGroup2 的 id。

第一次尝试是为每个所有者生成一个连接（这需要在应用程序中生成动态 sql：

```
select og.id
from owner_group2 og
-- dynamic bit starts here
join owner2 o1 on
(og.id = o1.og_id) AND
(o1.given_names = 'JOHN' and o1.surname='SMITH')
-- dynamic bit ends here
join owner2 o2 on
(og.id = o2.og_id) AND
(o2.given_names = 'JANE' and o2.surname='SMITH'); 
```

这在少数所有者之前工作得很好，但是当我们必须在一个组场景中处理 100 个所有者时，因为这个查询计划意味着有 100 个嵌套循环，并且需要将近一分钟的时间来运行。

我的另一个选择是在操作员周围使用一些东西`intersect`。例如

```
select * from ( 
select o.surname, o.given_names
from owner1 o1
join owner_group1 og1 on o1.og_id = og1.id 
where 
og1.parent_id = 1936233
)
intersect
select o.surname, o.given_names
from owner2 o2 
join owner_group2 og2 on og2.id = o2.og_id; 
```

我也不确定如何在这种情况下吸出 owner2.id - 而且它仍在 4-5 秒范围内运行。

我觉得我遗漏了一些明显的东西 - 所以请随时提供一些更好的解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:01:57.373

你在正确的轨道上`intersect`，你只需要走得更远一点。您需要将它的结果连接回`owner_groups2`表以查找 ID。

您可以使用该`listagg`函数将组转换为以逗号分隔的名称列表（注意 - 需要 11g）。然后，您可以使用这些名称列表的交集来查找匹配项并将其加入到 中的列表中`owner_groups2`。

我在下面创建了一个简化示例，其中“Dave, Jill”是两个表中都存在的组。

```
create table grps (id integer, name varchar2(100));
create table grps2 (id integer, name varchar2(100));

insert into grps values (1, 'Dave');
insert into grps values(1, 'Jill');

insert into grps values (2, 'Barry');
insert into grps values(2, 'Jane');

insert into grps2 values(3, 'Dave');
insert into grps2 values(3, 'Jill');

insert into grps2 values(4, 'Barry');

with grp1 as (
 SELECT id, listagg(name, ',') within group (order by name) n 
 FROM grps
 group by id
), grp2 as (
 SELECT id, listagg(name, ',') within group (order by name) n 
 FROM grps2
 group by id
)
SELECT * FROM grp2 
where  n in (
  -- find the duplicates
  select n from grp1 
  intersect
  select n from grp2
); 
```

请注意，这仍需要对 ; 进行全面扫描`owner_groups2`。我想不出一种方法可以避免这种情况。因此，您的查询可能会很慢。

# plugins - Winamp 在 Jscript 中使用 gen_scripting

> ID：14685732
> 
> 赞同：0
> 
> 时间：2013-02-04T11:22:17.613
> 
> 标签：plugins, jscript, winamp

使用 Winamp 的 gen_scripting 插件，您必须实例化该对象。在 VBS 中是

```
Set winamp = CreateObject("gen_scripting.WinAmp") 
```

但是，我很确定可以使用相同的插件使用 Jscript（或者甚至可能是 Javascript——对我来说是一个更好的选择）来编写 Winamp 脚本。所以，我试过了

```
var winamp = Object.create("gen_scripting.WinAmp");
x = winamp.GetVersion();
alert(x);
winamp.ButtonPlay; 
```

只是那是行不通的。任何让我开始的帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:16:06.180

VBScript 的 JScript 模拟`CreateObject()`是[`new ActiveXObject()`](http://msdn.microsoft.com/en-us/library/7sw4ddf8%28v=vs.84%29.aspx).

此外，`alert`是特定于浏览器的功能；在 Windows shell 脚本中，您应该使用[`WScript.Echo`](http://msdn.microsoft.com/en-us/library/h8f603s7%28v=vs.84%29.aspx).

```
var winamp = new ActiveXObject("gen_scripting.WinAmp");
var x = winamp.GetVersion();
WScript.Echo(x);
winamp.ButtonPlay(); 
```

# c# - 从 C# 中的不同驱动器检索文档

> ID：14685737
> 
> 赞同：0
> 
> 时间：2013-02-04T11:22:36.007
> 
> 标签：c#

我的 C# Web 应用程序驻留在`C`驱动器上。然而，应用程序接收用户上传的文档并将它们保存在`D`驱动器上。

如何在`D`驱动器上的 Web 应用程序中的 HyperLink 控件的 NavigateUrl 属性中指定驱动器上文档的路径`C`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:28:59.900

在服务器端，您可以在 a 中加载文件`Stream`并将此对象响应为`byte[]`

```
public void Page_Load(object sender, System.EventArgs e)
{
    // create a FileStream from a path from local (D:, C:, E:, etc...)
    FileStream file = File.OpenRead(@"d:\folder\yourfile.txt");

    //Convert the stream to an array of bytes.  
    byte[] byteArray = file.ToArray();

    // Clear all content output from the buffer stream
    Response.Clear();

    // Add a HTTP header to the output stream that specifies the default filename
    // for the browser's download dialog
    Response.AddHeader("Content-Disposition", "attachment; filename=foo.txt");

    // Add a HTTP header to the output stream that contains the 
    // content length(File Size). This lets the browser know how much data is being transfered
    Response.AddHeader("Content-Length", byteArray.Length.ToString());

    // Set the HTTP MIME type of the output stream
    Response.ContentType = "application/octet-stream";

    // Write the data out to the client.
    Response.BinaryWrite(byteArray);
} 
```

# android - Android：膨胀类错误 由 OutOfMemoryError 引起：位图大小超出 VM 预算

> ID：14685738
> 
> 赞同：2
> 
> 时间：2013-02-04T11:22:38.797
> 
> 标签：android, imageview

我有一个错误膨胀类错误，似乎是由位图引起的（更多详细信息：[Android：由于 ImageView 导致的内存错误？](https://stackoverflow.com/questions/14684165/android-memory-error-because-of-an-imageview)）但是当我评论位图时我仍然有错误，而当我评论 Imageview5 时，没有错误。stackoverflow 上有关此错误的所有帖子都无助于解决我的问题

```
02-04 10:03:04.353: E/AndroidRuntime(17427): FATAL EXCEPTION: main
02-04 10:03:04.353: E/AndroidRuntime(17427): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.kersplatt/com.example.kersplatt.ShareActivity}: android.view.InflateException: Binary XML file line #23: Error inflating class <unknown>
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.os.Looper.loop(Looper.java:130)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.ActivityThread.main(ActivityThread.java:3683)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at java.lang.reflect.Method.invokeNative(Native Method)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at java.lang.reflect.Method.invoke(Method.java:507)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at dalvik.system.NativeStart.main(Native Method)
02-04 10:03:04.353: E/AndroidRuntime(17427): Caused by: android.view.InflateException: Binary XML file line #23: Error inflating class <unknown>
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.createView(LayoutInflater.java:518)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.Activity.setContentView(Activity.java:1657)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at com.example.kersplatt.ShareActivity.onCreate(ShareActivity.java:64)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-04 10:03:04.353: E/AndroidRuntime(17427):    ... 11 more
02-04 10:03:04.353: E/AndroidRuntime(17427): Caused by: java.lang.reflect.InvocationTargetException
02-04 10:03:04.353: E/AndroidRuntime(17427):    at java.lang.reflect.Constructor.constructNative(Native Method)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.view.LayoutInflater.createView(LayoutInflater.java:505)
02-04 10:03:04.353: E/AndroidRuntime(17427):    ... 23 more
02-04 10:03:04.353: E/AndroidRuntime(17427): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.content.res.Resources.loadDrawable(Resources.java:1709)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.widget.ImageView.<init>(ImageView.java:118)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.widget.ImageView.<init>(ImageView.java:108)
02-04 10:03:04.353: E/AndroidRuntime(17427):    ... 26 more 
```

我的第 23 行是 imageview5

```
 <ImageView
         android:id="@+id/imageView5"
         android:layout_width="85dp"
         android:layout_height="100dp"
         android:layout_marginLeft="8dp"
         android:layout_marginTop="20dp"
         android:adjustViewBounds="true"
         android:src="@drawable/diviseur" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T11:25:38.530

这是一个非常具有误导性的错误，但它是由嵌套异常引起的，因为 VM 已用完可绘制除数的内存。查看堆栈跟踪的结尾：

```
02-04 10:03:04.353: E/AndroidRuntime(17427): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.content.res.Resources.loadDrawable(Resources.java:1709)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.widget.ImageView.<init>(ImageView.java:118)
02-04 10:03:04.353: E/AndroidRuntime(17427):    at android.widget.ImageView.<init>(ImageView.java:108)
02-04 10:03:04.353: E/AndroidRuntime(17427):    ... 26 more 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:02:06.740

有时可能会发生这种情况，最佳做法是使用位图工厂创建缩放位图，

```
Bitmap result = Bitmap.createScaledBitmap(bitmapPicture,
                    imageWidth, imageHeight, false); 
```

试试这个，看看它是否有帮助

还用，

```
BitmapFactory.Options opts = new BitmapFactory.Options();
opts.inPurgeable = true; // Tell to garbage collector that whether it needs free memory, the Bitmap can be cleared
opts.inTempStorage = new byte[32 * 1024]; 
```

并在您离开该活动时始终回收您的位图，因为它有助于释放内存。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-18T17:57:50.967

我得到了同样的错误。我的问题是每部手机都加载了 2k 图像作为活动的背景。我通过将此背景图像缩小到 800x480 和 1280x720 解决了这个问题。然后我将这些图像放入 ldpi、mdpi、... 文件夹中。现在它可以工作了

# algorithm - 找到由相邻网格点组成的多边形的所有内部网格点

> ID：14685739
> 
> 赞同：5
> 
> 时间：2013-02-04T11:22:42.973
> 
> 标签：algorithm, collision-detection, point

我有点列表（int x，int y）。它们一起形成区域，我检查该区域是否关闭，然后我需要获取由该区域内的所有位置形成的内部区域。

示例区域：

![在此处输入图像描述](../Images/b0efe535e7a6b1238efef5dab5f911dd.png)

我唯一的想法是将这个区域转换为矢量并检查每个点是否在多边形内，计算多边形的交点轴的点。

但我认为这不是最有效的方法。

另一个想法是首先获取外部的所有点，我从角开始（如果角不是点列表的一部分，则 100% 为空），添加所有空的相邻点并重复。那么所有不在外部且不在突出显示列表中的点都在内部。

但是再一次，它感觉有点麻烦......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:57:34.987

要找到网格多边形的所有内部网格点，可以利用以下观察结果：

1.  对于每个内部网格点 (x,y)， (x,y+0.5) 和 (x,y-0.5) 也是内部点。
2.  定义的线`y=n+0.5`与网格多边形有简单的交点

这导致以下算法：

1.  作为先决条件，需要所有非水平（即垂直和对角线）多边形边缘，实际上每个（第二个）中间行只有中心的 x 坐标按升序排列。

2.  在每隔一个水平“中线”扫描网格，即`y=2n+0.5`，其中 n 来自足够的整数范围，多边形被“覆盖”，参见图中的蓝线。

3.  从左边开始，所有与多边形的交点（即非水平边）和所有形式为 (m,2n+0.5) 的内部点都将被检测，见红色和绿色圆圈（这是通过迭代边缘中心的 x 坐标）
4.  现在内点 (m,2n+0.5) 的垂直网格邻居 (m,2n) 和 (m,2n+1) 是内点，如果它们不在边界上，请参见草图中的绿点。

![AlgoScetch_innerPoints](../Images/af3be0a817f99fba8ce0c23a87ca2bc1.png)

这是一些伪代码（C++/python 启发:-)）：

```
list<Point> polygon; // given polygon as list of neighbouring grid points

// get centers of non-horizontal edges organized by line
map<int, set<float> > edgeCentersX; // for each scan line the x-coords of edges in ascending order

p_i = polygon[0]
yMin, yMax =  999999, -999999
for (i=1; i<polygon.size(); ++i)
    p_i1 = polygon[i] // next point after p_i
    if (p_i.x == p_i1.x)
        continue // horizontal edges can be ignored
    yMin_i = min(p_i.y, p_i1.y)
    if (yMin_i % 2 == 1)
        continue // we only need to look at each second mid-row
    if (yMin_i < yMin)
        yMin = yMin_i
    if (yMin_i > yMax)
        yMax = yMin_i
    cx = 0.5*(p_i.x+p_i1.x)
    edgeCentersX[yMin_i].insert(cx) // store edge center (yMin_i+0.5, cx)
    p_i = p_i1

list<Point> innerPoints
for (y=yMin; y<= yMax; y+=2)
    inside = false
    cx_i = edgeCentersX[y][0]
    for (i=1; i<edgeCentersX[y].size(); ++i)
        cx_i1 = edgeCentersX[y][i]
        inside = !inside
        if (!inside)
            continue
        for (x=floor(cx_i)+1; x<cx_i1; ++x)
            pLower = Point(y,x)
            if (!polygon.contains(pLower))
                innerPoints.append(pLower)
            pUpper = Point(y+1,x)
            if (!polygon.contains(pUpper))
                innerPoints.append(pUpper) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:30:54.700

[Pick's theorem](http://en.wikipedia.org/wiki/Pick%27s_theorem)可能是您正在寻找的公式。它允许对角为网格点（即具有整数坐标）的多边形的面积进行相当简单的计算。

# internet-explorer - Fontawesome 图标在 IE9 和 Chrome 上不起作用

> ID：14685742
> 
> 赞同：1
> 
> 时间：2013-02-04T11:23:07.203
> 
> 标签：internet-explorer, firefox, font-awesome

我正在使用可用的最新可用版本。但是这些图标仍然在我的 IE9 应用程序中显示为框（注意：它在 IE8 上运行良好）。虽然打开 fontawesome 页面时，图标显示正常。

这是我在开发人员工具的控制台中得到的：

CSS3117：@font-face 跨域请求失败。资源访问受到限制。fontawesome-webfont.eot?#iefix&v=3.0.1 CSS3117：@font-face 跨域请求失败。资源访问受到限制。fontawesome-webfont.woff?v=3.0.1 CSS3117：@font-face 跨域请求失败。资源访问受到限制。fontawesome-webfont.ttf?v=3.0.1

我还发现它不适用于 Firefox。它仅适用于 chrome 和 IE8

任何可能导致问题的帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:08:04.487

就像控制台说的那样：你正在做跨域字体加载，而不是从服务器发送正确的标题来允许这样做。请参阅[http://dev.w3.org/csswg/css3-fonts/#same-origin-restriction](http://dev.w3.org/csswg/css3-fonts/#same-origin-restriction)了解此规范（Chrome 和 IE 未遵循该规范）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:06:30.363

我的被​​htaccess阻止了。

我的 .htaccess 上有这个，必须添加扩展名。

```
# Do not process images or CSS files further
RewriteRule \.(css|jpe?g|gif|png|js|ico|mp3|ogg|eot|svg|ttf|woff)$ - [L] 
```

# c# - Excel OleDbCommand SELECT * 不选择所有列

> ID：14685744
> 
> 赞同：1
> 
> 时间：2013-02-04T11:23:14.073
> 
> 标签：c#, excel, oledb

我下载了一个 XLS 电子表格，并尝试将其导入到 .net 数据表中。表结构如下：

（没有名称的日期列）、流入 (kWh)、流出 (kWh)、库存 (kWh)

连接字符串是：

```
" Provider=Microsoft.Jet.OleDb.4.0;Data Source=sheet.xls;Extended Properties="Excel 8.0;IMEX = 1" 
```

不起作用的事情：

```
- "SELECT * FROM [Sheet1$]" selects: NoName, Inflow_(kWh), Outflow_(kWh) and the last column is missing

- "SELECT [Stock (kWh)] FROM [Sheet1$]" returns: "No value given for one or more required parameters."

- "SELECT [Stock_(kWh)] FROM [Sheet1$]" returns: "No value given for one or more required parameters."

- "SELECT * FROM [Sheet1$A:D]" Selects: NoName, Inflow_(kWh), Outflow_(kWh) and the last column is missing 
```

有效但不是解决方案的事情：

```
- "SELECT * FROM [Sheet1$D:D]" Selects: Stock_(kWh) but all other columns are missing 
```

*   如果我在下载文件后在 Excel 中打开文件（不保存）然后尝试导入它，那么它可以工作。

*   Excel 互操作工作

有任何想法吗？任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:53:45.193

这是我在我的一个应用程序中使用的连接字符串，当我使用 SELECT * FROM [worksheetName$] 时一切正常

```
string connString = "provider=Microsoft.Jet.OLEDB.4.0;Data Source='{0}';Extended Properties=\"Excel 8.0;IMEX=1\"" 
```

它看起来与您的非常相似，除了我在数据源周围有单引号，并且我正在转义我的双引号（假设您也正确地这样做了，但只是没有显示它）。所以我不认为连接字符串是你的问题。

当您选择 D:D 仅获取缺少的 Stock 列时，它是什么数据类型？如果您使用 GetOleDbSchemaTable 查看元数据，它会为该表的列显示什么，以及缺失列的数据类型？

您能否给我们一些电子表格中的示例行，以便我们查看数据的样子，并尝试一下？另外，它是 XLS，而不是 XLSX，对吗？

# javascript - 带有最小和最大长度检查的电话号码验证的正则表达式

> ID：14685748
> 
> 赞同：1
> 
> 时间：2013-02-04T11:23:37.923
> 
> 标签：javascript, regex, validation

我需要一个简单的 javascript 正则表达式来验证电话号码。只有数字，“+”开头和“-”
数字的最大和最小长度应该是10 - 12

应该允许下一个电话：
1\. +380631505624
2\. 0631505624
3\. 063-15-05-624

不允许使用以下电话：
1\. +38063+1505624
2\. asd0631505624
3\. -063-15-05-624-
4\. +0---3-1--24

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:38:03.017

**Quentin 的评论是要走的路**，但是满足您需求的正则表达式可能是：

```
^\+?\d+(\d\-|\d)+\d$ 
```

我希望它有所帮助，或者至少是朝着正确方向发展的一点

这完全取决于您要检查的保存/严格程度

BTW .: javascript ist 看起来像这样吗

```
 ...
 if (/^\+?(\d\-|\d)+\d$/ig.test("+43595-995-995")){
    alert("GOOD");
 }
 ... 
```

在这里您可以找到使用 Chrome 24+ 测试的工作演示（[在 JsFiddler 上](http://jsfiddle.net/KRwHQ/)）（包含您问题的所有数字）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-04T05:29:26.683

在上面的代码中没有任何长度验证，所以我只是更正上面的答案

[http://jsfiddle.net/KRwHQ/4/](http://jsfiddle.net/KRwHQ/4/)

```
 if (/^\+?((\d\-|\d)+\d){4,}$/ig.test("+43595-995-995")){
     alert("GOOD");
 } 
```

# c# - 如何从 Base CRM API 身份验证中获取响应

> ID：14685749
> 
> 赞同：1
> 
> 时间：2013-02-04T11:23:37.373
> 
> 标签：c#, api, authentication, base

我正在尝试从 Base API 获得响应，但我不断收到“500 Internal Server Error”错误。我想获得至少 401 HTTP 响应，这意味着身份验证调用失败。下面是使用 Base API 认证的说明：

[http://dev.futuresimple.com/api/authentication](http://dev.futuresimple.com/api/authentication)

这是我的代码：

```
public string Authenticate()
        {
            string result = "";
            string url = "https://sales.futuresimple.com/api/v1/";
            string email = "mail@mail.com";
            string password = "pass";
            string postData = "email=" + email + "&password=" + password;
            HttpWebRequest request = null;
            Uri uri = new Uri(url + "authentication.xml");
            request = (HttpWebRequest)WebRequest.Create(uri);
            request.Method = "POST";
            request.ContentType = "application/xml";
            request.ContentLength = postData.Length;

            using (Stream writeStream = request.GetRequestStream())
            {
                UTF8Encoding encoding = new UTF8Encoding();
                byte[] bytes = encoding.GetBytes(postData);
                writeStream.Write(bytes, 0, bytes.Length);
                writeStream.Close();
            }

            try
            {
                using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
                {
                    using (Stream responseStream = response.GetResponseStream())
                    {
                        using (StreamReader readStream = new StreamReader(responseStream, Encoding.UTF8))
                        {
                            result = readStream.ReadToEnd();
                        }
                    }
                }
            }
            catch (WebException ex)
            {
                ex = ex;
            }
            return result;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:01:48.643

您正在设置`ContentType`to `application/xml`- 这是请求正文的类型。您发送的正文 ( `string postData = "email=" + email + "&password=" + password;`) 是表单编码的，而不是 xml。跳过这条线`request.ContentType = "application/xml";`应该可以解决问题。或者，您可以将请求正文编码为 xml。

# c - 我应该使用文件描述符还是流来读取/写入套接字

> ID：14685751
> 
> 赞同：11
> 
> 时间：2013-02-04T11:24:00.283
> 
> 标签：c, sockets, file-io

设置套接字后，更好的做法是在套接字描述符上使用 read(2) 和 write(2) 调用，还是使用 fdopen(3) 将流与套接字描述符相关联，然后使用 stdio(3) 函数?

```
int sfd = socket(PF_INET, SOCK_STREAM, 0);
// setup the socket using sfd
FILE * stream = fdopen(sfd, "r+");
// use fprintf, fscanf, etc 
```

编辑：我也取消缓冲流

```
setbuf(stream, NULL) 
```

为了避免不得不像评论中提到的那样冲洗它。

我一直在使用这种方法，因为它让我可以重用为 FILE* 流编写的代码，而且我的优势是能够使用格式字符串（我正在处理人类可读的文本）。GNU 似乎暗示这是个好主意。

[http://www.gnu.org/software/libc/manual/html_node/Streams-and-File-Descriptors.html](http://www.gnu.org/software/libc/manual/html_node/Streams-and-File-Descriptors.html)

但是，通常当我看到使用套接字的代码时，所有操作都使用套接字描述符而不是流。使用较低级别的功能有优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T11:42:07.057

如果您需要更精确地控制和处理错误条件，请使用`read`和`write`。如果您不这样做，并且更喜欢 stdio 函数的便利性，请使用`FILE*`包装器。

使用`FILE *`包装器的一个问题是您无法控制数据实际写入套接字的方式和时间。如果您不小心，这可能会导致网络利用率低下和延迟过多（由于 Nagle 的算法与延迟的 ACK 交互）。

如果这是一个高性能 Internet 应用程序，我建议直接使用`read`and 。`write`

# asp.net - Safari 增加了巨大的空白空间

> ID：14685753
> 
> 赞同：0
> 
> 时间：2013-02-04T11:24:05.573
> 
> 标签：asp.net, html, css

我在使用 Safari 时遇到了一些问题。

1.  虽然所有浏览器都可以正常显示页面，但 Safari 在主 ContentPlaceholder 上方添加了一个巨大的白色区域，如下图所示。这发生在每个页面上，所以我猜问题出在母版页上，但我不知道如何解决它。

2.  菜单上方的一些额外填充也存在一个小问题（Chrome 中也是如此）

我会很感激任何帮助。提前致谢。

![所有浏览器](../Images/3e378557ea31569da8a0a102d75d36dc.png)

![苹果浏览器](../Images/0099937ae288a62a6aa38dc33cd99aec.png)

这是我的母版页：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
<title></title>
<link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
<asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder>
</head>
<body>
<form runat="server">
<div class="page">
    <div class="header">
        <div class="title">
            <h1>
                My ASP.NET Application
            </h1>
        </div>
        <div class="loginDisplay">
            <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                <AnonymousTemplate>
                    ................
                </AnonymousTemplate>

                <LoggedInTemplate>
                    ................
                </LoggedInTemplate>
            </asp:LoginView>
        </div>
        <div class="clear hideSkiplink">
            <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                <Items>
                    ................
                </Items>
            </asp:Menu>
        </div>
    </div>
    <div class="leftMenu">
        <asp:ContentPlaceHolder ID="LeftMenuContent" runat="server"/>
    </div>
    <div class="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
    </div>

    <div class="clear">
    </div>
</div>
<div class="footer">

</div>
</form> 
```

这是源代码和 CSS：http: [//jsfiddle.net/V5aCa/6/](http://jsfiddle.net/V5aCa/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:29:54.987

这是因为您使用的`display:table` safari 对其他浏览器的处理方式不同

看看这个问题：

[Safari 5.1 打破 CSS 表格单元格间距](https://stackoverflow.com/questions/6960083/safari-5-1-breaks-css-table-cell-spacing)

或尝试使用`border-box`：

[CSS 宽度是否包括填充？](https://stackoverflow.com/questions/4698054/css-does-the-width-include-the-padding)

由于跳过导航锚点，您的导航上方的空间出现，如果您绝对定位或浮动它，您的空间应该消失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:29:15.673

尝试重置浏览器的边距和填充。

```
body {
      margin: 0px;
     padding: 0px;
} 
```

这应该迫使 safari 从您的设定值开始，而不是建立在其默认值上。

# jsf-2 - 在下面 不工作

> ID：14685757
> 
> 赞同：0
> 
> 时间：2013-02-04T11:24:21.790
> 
> 标签：jsf-2, primefaces

我遇到了一个关于`<p:outputPanel>`我放置的渲染的问题`<p:row>`。

我该如何解决这个问题？

任何指针都会对我很有帮助。谢谢。

## 编辑

```
<p:panelGrid>

---

  <p:outputPanel rendered="#{condition}">
    <p:row>
    <p:row>
  </p:outputPanel>
</p:panelGrid> 
```

在这种情况下，如果我将渲染条件的值设置为 true，那么该行也不会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:56:56.610

`<p:row>`与 panelGrid 或 DataTable 一起使用。像这样的东西...

```
<p:panelGrid rendered="#{condition}">
   <p:row>
       <p:column>AAA</p:column>
   </p:row>
</p:panelGrid> 
```

# google-chrome-extension - Chrome 扩展 API 未来版本

> ID：14685760
> 
> 赞同：0
> 
> 时间：2013-02-04T11:24:42.477
> 
> 标签：google-chrome-extension

有人可以帮我找到一个地方（URL、RSS 提要或其他东西），在那里我可以找到每个新 Chrome 版本中的 chrome 扩展 API 将进行哪些更改。在发布之前获得该信息以准备扩展将非常有用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:13:32.227

这应该是 Chrome 扩展（API 和其他重要主题）的“真实来源” - [http://blog.chromium.org/search/label/extensions](http://blog.chromium.org/search/label/extensions)

# c# - 果园自定义表单 DropDownLists

> ID：14685761
> 
> 赞同：4
> 
> 时间：2013-02-04T11:24:45.227
> 
> 标签：c#, asp.net-mvc-4, content-management-system, orchardcms, orchardcms-1.6

在玩了一些 Orchards 的自定义表单模块之后，我决定使用下拉列表来选择一个特定的人，并将他们的电子邮件作为该选定选项的值。当我创建表单时，我无论如何都看不到您可以为您的选项设置值。

例如，请参见下图： ![果园自定义表单内容类型](../Images/cf6d20ca75c9ddb1ba6a62bb906d85f4.png)

不要以为有人以前遇到过这个或有建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:04:54.113

在您的情况下，我不会担心字段的文本和值不同。将收件人电子邮件作为 HTML 表单的输入也具有潜在的危险。

Orchard 提供的自定义表单规则事件使您无法查看表单创建的内容类型的值。所以，你可能不得不自己写。您应该能够以 Orchard.CustomForms.Rules.CustomFormEvents 为基础。

有了这个，您就可以为每个可能的下拉值创建新规则，并在每个规则的操作中设置电子邮件地址。

# netbeans - WSIT，Netbeans 和 Metro JAX-WS RI 中客户端的策略设置

> ID：14685762
> 
> 赞同：3
> 
> 时间：2013-02-04T11:24:50.513
> 
> 标签：netbeans, jax-ws, wsit

我们使用的 Web 服务的已发布 wsdl 有一个 Policy 标签。

但是在我们使用 wsimport 和 Netbeans 创建客户端之后，它不允许编辑 WSIT 设置的任何属性。*在 Apache CXF 中，您可以通过 API 提供属性。*据我们所见，对于 Metro 和 Netbeans，它需要一个带有策略属性集的 xml 文件。文档说这些属性可以通过 Web 服务客户端的设置和自动生成的 xml 进行编辑。但在我们的例子中，没有 WSIT（安全）选项卡是可访问的。

![没有安全选项卡](../Images/b7523a83fbd907b6feb01c87c02f055f.png)

在这里，文档介绍了属性的外观。[http://metro.java.net/nonav/1.2/guide/Configuring_Security_Using_NetBeans_IDE.html#gfrds](http://metro.java.net/nonav/1.2/guide/Configuring_Security_Using_NetBeans_IDE.html#gfrds) （安全选项卡）

是否有任何简单的方法可以为客户端提供消息签名、密钥库和信任库等选项（根据需要发布的服务）？

# python - 扩展 get_object_or_404 以使用 select_related

> ID：14685771
> 
> 赞同：1
> 
> 时间：2013-02-04T11:25:19.127
> 
> 标签：python, django, methods, extend

我想做的是定义一个使用`django.shortcuts.get_object_or_404`and 的自定义方法`select_related`。我的方法定义如下：

### 模型.py

```
class Sample(models.Model):
    slug = models.SlugField()
    # Sample class fields 
```

### 助手.py

```
import models
from django.shortcuts import get_object_or_404

def get_sample_or_404(**kwargs):
    sample = get_object_or_404(models.Sample.objects.select_related(), kwargs)
    return sample 
```

现在，每当我尝试使用这种方法时，我都会得到`get_sample() got an unexpected keyword argument 'xxxx'`. 以下是我如何使用它：

```
sample = get_sample_or_404(slug='first-sample') 
```

有人能把我引向正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T13:38:40.273

kwargs 必须扩展：

```
sample = get_object_or_404(models.Sample.objects.select_related(), **kwargs) 
```

# android - 如何检查来自服务器的响应是 JSONAobject 还是 JSONArray？

> ID：14685777
> 
> 赞同：7
> 
> 时间：2013-02-04T11:25:37.637
> 
> 标签：android, json

> **可能重复：**
> [确定 JSON 是 JSONObject 还是 JSONArray](https://stackoverflow.com/questions/6118708/determine-whether-json-is-a-jsonobject-or-jsonarray)

我有一个默认返回一些 JSONArray 的服务器，但是当发生一些错误时，它会返回带有错误代码的 JSONObject。我正在尝试解析 json 并检查错误，我有一段代码可以检查错误：

```
public static boolean checkForError(String jsonResponse) {

    boolean status = false;
    try {

        JSONObject json = new JSONObject(jsonResponse);

        if (json instanceof JSONObject) {

            if(json.has("code")){
                int code = json.optInt("code");
                if(code==99){
                    status = true;
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return status ;
} 
```

但是当 jsonResponse 正常并且它是 JSONArray（JSONArray 无法转换为 JSONOBject）时我得到 JSONException 如何检查 jsonResponse 是否会为我提供 JSONArray 或 JSONObject ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-04T11:44:24.780

使用[`JSONTokener`](http://developer.android.com/reference/org/json/JSONTokener.html). 这[`JSONTokener.nextValue()`](http://developer.android.com/reference/org/json/JSONTokener.html#nextValue())将为您提供一个`Object`可以根据实例动态转换为适当类型的方法。

```
Object json = new JSONTokener(jsonResponse).nextValue();
if(json instanceof JSONObject){
    JSONObject jsonObject = (JSONObject)json;
    //further actions on jsonObjects
    //...
}else if (json instanceof JSONArray){
    JSONArray jsonArray = (JSONArray)json;
    //further actions on jsonArray
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:30:26.127

您正在尝试从服务器获得的转换字符串响应`JSONObject`导致异常。正如您所说，您`JSONArray`将从服务器获得，您尝试转换为`JSONArray`. 请参考此[链接](https://stackoverflow.com/questions/4244879/reading-a-json-array-in-android)，它将帮助您何时将字符串响应转换为`JSONObject`和`JSONArray`。如果您的响应以 [（开方括号）开头，则将其转换为 JsonArray，如下所示

```
JSONArray ja = new JSONArray(jsonResponse); 
```

如果您的回复以 {（开花括号）开头，则将其转换为

```
JSONObject jo = new JSONObject(jsonResponse); 
```

# php - 显示上传的图片

> ID：14685783
> 
> 赞同：0
> 
> 时间：2013-02-04T11:25:52.900
> 
> 标签：php

我正在尝试创建一个代码来获取上传的图像、存储它们并显示图像预览并确认图像已成功上传。

```
<?php
$name=$_FILES['myfile']['name'];
$tmp=$_FILES['myfile']['tmp_name'];
$error=$_FILES['myfile']['error'];
$path='myweb/';
if(move_uploaded_file($tmp,$path.$name)==1){echo 'success';}else{echo $error;};
echo ('<img src="$path.$name" height="100px" width="100px"/>');
<?php 
```

问题是图像不显示。

我也试过

```
echo ('<img src="$path$name" height="100px" width="100px"/>'); 
```

但它仍然不起作用。

如何让图像显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:29:06.687

```
<img src="<?php echo $path,$name; ?>" height="100px" width="100px"/> 
```

或者

```
echo '<img src="' . $path.$name . '" height="100px" width="100px"/>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:27:45.720

问题在于单引号和双引号。

```
echo '<img src="' . $path.$name . '" height="100px" width="100px"/>'; 
```

您使用了单引号，因此它没有使用变量名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:27:52.727

您必须在打印的字符串中包含变量，如下所示：

```
echo ('<img src="'.$path.$name.'" height="100px" width="100px"/>'); 
```

您可以在文档中阅读有关它[的更多信息。](http://php.net/manual/en/language.operators.string.php)

如果你不这样做，PHP 会认为你想打印文本`$path.$name`而不是变量内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T11:30:42.267

使用双 "" 和单 '' 引号是有区别的。

双引号正在被解析，这意味着

```
$variable = 10;
echo "$variable"; 
```

将输出：

```
10 
```

单引号不会被解析：

```
$variable = 10;
echo '$variable'; 
```

将输出：

```
$variable 
```

您在 '' 中使用变量，这意味着它们不会被解析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T12:08:27.177

我像这样替换了上面代码中的第 13 行。

`echo (" <img src=$path.$name height=100px width=100px/>");`

它现在正在工作。似乎双引号是这里的问题。我会读m0re关于它的。非常感谢你们，你们都非常有帮助。:)

# objective-c - 如何发送推送通知？

> ID：14685785
> 
> 赞同：0
> 
> 时间：2013-02-04T11:25:59.087
> 
> 标签：objective-c, xml, push-notification

我正在尝试向我的应用程序添加推送通知，但是到目前为止，我只能找到似乎过时的教程......有人可以解释我如何让我的应用程序发送通知吗？

我的应用程序从 xml 在线获取一些内容，我想在 xml 包含更新日期时发送通知。我可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:19:38.323

我在这里找到了一个简单而清晰的视频：[http](http://www.youtube.com/watch?v=_3YlqWWnI6s) ://www.youtube.com/watch?v=_3YlqWWnI6s 。它简单明了，之后我关注了[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)和[http://blog.serverdensity.com/2009/07 /10/how-to-build-an-apple-push-notification-provider-server-tutorial/](http://blog.serverdensity.com/2009/07/10/how-to-build-an-apple-push-notification-provider-server-tutorial/)。所以我设法发送推送通知。需要一些工作，但它并不像我想的那样难。

# html - 跨浏览器音频问题

> ID：14685787
> 
> 赞同：0
> 
> 时间：2013-02-04T11:26:03.017
> 
> 标签：html, google-chrome, firefox, audio, opera

我正在寻找创建一个自动播放一些声音的音频播放器，然后我通过控制面板进行控制。我试图让它跨浏览器工作，但有一个巨大的头痛。任何帮助将不胜感激。将有多种声音，所有声音都可以通过一组加号和减号来控制音量，所有声音都在加载时开始并全部循环。再次，非常感谢实现跨浏览器/设备兼容性的任何帮助。

```
 <audio id="player" src="assets/forest_ambience_loop.mp3", "assets/forest_ambience_loop.ogg" autoplay loop;>

    </audio>
    <div>
     <button
     onclick="document.getElementById('player').play()">
     Play
     </button>
     <button
     onclick="document.getElementById('player').pause()">
     Pause
     </button>
     <button
     onclick="document.getElementById('player').volume += 0.1">
     Volume Up
     </button>
     <button
     onclick="document.getElementById('player').volume -= 0.1">
     Volume Down
     </button>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:37:51.247

`<audio>`标签不正确。尝试这个，

```
<audio id="player" controls autoplay loop>
  <source src="assets/forest_ambience_loop.mp3" type="audio/mpeg">
  <source src="assets/forest_ambience_loop.ogg" type="audio/ogg">
Your browser does not support the audio element.
</audio> 
```

这是工作演示[http://jsfiddle.net/bgCTJ/2/](http://jsfiddle.net/bgCTJ/2/)

# android - 如何使按钮重定向到另一个 XML 布局

> ID：14685790
> 
> 赞同：1
> 
> 时间：2013-02-04T11:26:08.313
> 
> 标签：android, xml, button

我正在 xml(res/layout/activity_home.xml) 中制作一个按钮，如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".HomeActivity" >
    <ImageView
        android:id="@+id/imageView1"
        android:src="@drawable/schkopwide" 
        android:contentDescription="@string/HTI"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="78dp"
        android:onclick="Intent i = new Intent(activity_store.xml);
        startActivity(i);"
        android:text="@string/HTI" />
</RelativeLayout> 
```

那么我应该在这个xml中添加什么让它重定向到另一个xml页面（res/layout/activity_store.xml）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:32:08.153

您不能在 XML 的 onclick 参数中添加 Intent 的启动。你必须通过代码来完成。

在您的代码中：

```
 Button button = (Button)findViewById(R.id.button1);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent i = new Intent(this, ActivityStore.class);
            startActivity(i);
        }
    }); 
```

并在 ActivityStore 类的 OnCreate 中，把这个

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_store);
    } 
```

注意：我认为你的 activity_store 类被称为 ActivityStore

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:36:38.760

尝试如下：

> ```
>  <Button
>     android:id="@+id/button1"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_alignParentLeft="true"
>     android:layout_centerVertical="true"
>     android:layout_marginLeft="78dp"
>     android:onclick="start"
>     android:text="@string/HTI" /> 
> ```

在您的主要活动中：

```
 Button button = (Button)findViewById(R.id.button1);
button.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        Intent i = new Intent(this, ActivityStore.class);
        startActivity(i);
    }
}); 
```

这是您的 ActivityStore 类代码：

> ```
>  public class ActivityStore extends Activity {
>     @Override
>     protected void onCreate(Bundle savedInstanceState) {
>         super.onCreate(savedInstanceState);
>         setContentView(R.layout.activity_store);
>          }
>        } 
> ```

还将活动添加到您的 mainfest 文件中。

> ```
> <activity
>         android:name=".ActivityStore"
>         android:label="@string/app_name"/ > 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-13T05:29:03.370

如果你想在 Same Activity 中显示两种不同的布局，那么**ViewSwitcher**是最好的布局。

您可以在 ViewSwithcher 中添加多个布局。并使用**viewswitcher.next() 替换它们；** 功能。

```
<ViewSwitcher

android:id="@+id/viewswitcher"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<!--   Add Two View’s Here -- >

</ViewSwitcher> 
```

您可以从此链接参考： http: [//abhiandroid.com/ui/viewswitcher](http://abhiandroid.com/ui/viewswitcher)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T11:38:51.370

您需要查看 Android 文档：

*   活动
*   OnClickListener
*   意图

[http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T11:51:09.670

试试这个，

在其他 XML 布局中静态包含 XML 布局。使用`include`. 在您的 activity_store.xml 中添加以下代码

```
 <include layout="@layout/activity_home"/> 
```

当然你会得到解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-12T21:35:39.477

一种简单的方法是创建一个附加了另一个 xml 的 Activity，然后使用意图。

# backbone.js - 如何在backbonejs中获取模型的最新插入ID

> ID：14685793
> 
> 赞同：1
> 
> 时间：2013-02-04T11:26:19.460
> 
> 标签：backbone.js, codeigniter-restserver

我有一个设置，我通过表单动态添加模型。相同的数据被插入到表的行中。一旦插入该行，我就会在该行上附加一个删除按钮。

现在，当我尝试删除插入的行时，我无法删除，因为该特定模型没有附加唯一 ID，因此在 DELETE 请求中没有发送 ID。但是一旦我通过获取来刷新整个集合，它就可以工作了。

我尝试使用这样的 cid 来获取整个模型：

```
deleterow:function(){

window.rowList.get(this.model.cid).destroy({wait:true,success:function(){

 }}); 
```

这行不通。我正在为 codeigniter 使用 phil sturgeon REST API。

编辑：

```
$this->response(json_encode($Q),201); 
```

这里 $Q 是这样填充的：

```
 $this->db->where('id',$this->db->insert_id());
    $Q=$this->db->get('rows')->result(); 
```

作为回应，我得到这样的数据：

```
"[{\"id\":\"285\",\"name\":\"\",\"address\":\"\",\"city\":\"\",\"state\":\"\",\"zip\":\"\",\"email\":\"\",\"contact_number\":\"0\",\"alternate_number\":\"0\",\"row_type\":\"\",\"local_vat\":\"\",\"cst\":\"\",\"st\":\"\",\"excise_duty\":\"\"}]" 
```

所以它也不是正确的 JSON 格式。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:33:51.163

`model.save`当 Backbone 使用或创建或更新模型时`collection.create`，从服务器发回的任何 JSON 数据都会自动`set`进入模型。例如，如果您保存一个新模型：

```
var model = collection.create({foo:'bar'}); 
```

这将导致`POST`请求被发送到模型的 url 根目录，其正文如下：

```
{"foo":"bar"} 
```

您应该配置您的服务器以将创建的模型作为对`POST`请求的响应发回，例如：

```
{"id":100, "foo":"bar"} 
```

然后，Backbone 会自动将响应中的任何新的和更改的属性复制到模型中，因此您将拥有：

```
var model = collection.create({foo:'bar'}, {success: function() {
  console.log(model.id); // -> 100
}}); 
```

# eclipse - Eclipse：产品导出错误：产品可执行启动器无法找到其配套共享库

> ID：14685794
> 
> 赞同：3
> 
> 时间：2013-02-04T11:26:19.960
> 
> 标签：eclipse, eclipse-plugin

我正在使用产品导出向导导出 Eclipse 插件项目，我有 Eclipse Indigo 64 位。

当我尝试将其导出为 64 位项目时，一切正常。但是当我尝试将其导出到 32 位项目时出现问题。

我已经设置了目标平台，安装了 32 位 JRE，添加了所有必需的插件，程序在 32 位 JRE 上编译并运行良好。

该产品似乎也成功导出，但是，当我尝试运行 .Exe 时，它​​会引发错误“产品可执行启动器无法找到其配套共享库。”

我检查了 org.eclipse.equinox.launcher_1.2.0.v20110502.jar 和 org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502 都存在于插件文件夹中。我已经将 .product 文件的插件与运行时配置插件进行了比较，一切似乎都很好，但我就是无法启动 .exe。

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-24T15:12:34.630

据此[，](https://bugs.eclipse.org/bugs/show_bug.cgi?id=361628)解压 org.eclipse.equinox.launcher.win32.win32.x86_XXXXXXXX jar 在同一目录（即`plugins/`）中具有相同的名称解决了我的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T08:59:31.830

我对 64 位 Eclipse Mars SR1 也有同样的问题。问题是导出的产品具有 64 位启动器 EXE 而不是 32 位。解决方案是

1.  使用@RKM 的建议并将由 32 位 Eclipse 创建的启动器复制到您的应用程序中。
2.  直接使用 32 位 Eclipse 开发和导出产品。

# c++ - 对于 C/C++ 程序，是否有相当于 python 的 virtualenv？

> ID：14685798
> 
> 赞同：24
> 
> 时间：2013-02-04T11:26:36.453
> 
> 标签：c++, c, virtualenv

我必须开发必须在 Scientific Linux 5 或 6 上运行的 C++ 程序。我想在 Ubuntu 上使用 QtCreator 进行开发，它的库比 SCL6 上的库更新得多。

对于 C/C++ 程序，是否有相当于 Python 的 virtualenv？

使用具有所有必需库和依赖项的 chroot 可以完成这项工作。这存在吗？有关 chroot 的使用，请参见[http://rcrowley.org/articles/dependencies.html](http://rcrowley.org/articles/dependencies.html)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T02:51:09.027

使用 debootstrap 创建 chroot 环境（甚至将 ubuntu 安装在单独的分区上）。使用 mount -o bind 挂载你的主目录。使用 schroot 方便 chroot 设置。

[http://manpages.ubuntu.com/manpages/precise/en/man8/debootstrap.8.html](http://manpages.ubuntu.com/manpages/precise/en/man8/debootstrap.8.html)

[http://manpages.ubuntu.com/manpages/precise/en/man8/mount.8.html](http://manpages.ubuntu.com/manpages/precise/en/man8/mount.8.html)

[http://manpages.ubuntu.com/manpages/precise/en/man1/schroot.1.html](http://manpages.ubuntu.com/manpages/precise/en/man1/schroot.1.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-01-22T06:39:21.990

您可以使用以下工具：

*   柯南虚拟环境（[https://blog.conan.io/2016/08/04/Conan-virtual-environments-Manage-your-C-and-C++-tools.html](https://blog.conan.io/2016/08/04/Conan-virtual-environments-Manage-your-C-and-C++-tools.html)）
*   conda 虚拟环境（[https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html](https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html)）
*   码头集装箱

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T03:04:58.547

不确定它是否足够轻量级以满足您的需要（我对 virtualenv 不是很熟悉），但您可以尝试[CDE 项目](http://www.pgbovine.net/cde.html)，这是创建具有各种依赖项的虚拟沙箱的一种非常好的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-14T14:54:39.137

[您可以使用 bazel ( https://bazel.build/](https://bazel.build/) ) 或 please ( [https://please.build/](https://please.build/) )等构建系统为给定项目建立依赖关系和编译器。

由于语言的不同性质，它永远不会与 virtualenv 完全相同，因为它仍将使用系统编译器。如果您想让您的项目完全隔离，您可以将项目放在 docker 容器上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-25T16:32:26.120

我同意[SeF](https://stackoverflow.com/a/54693230/5595995)使用依赖项。对我来说，IDE 有助于设置不同的开发环境。

关于不同操作系统的IDE：

*   Linux：[埃克利斯](https://www.eclipse.org/)
*   视窗：[视觉工作室](https://visualstudio.microsoft.com/)

# java - _在java中的正则表达式中是什么意思

> ID：14685800
> 
> 赞同：0
> 
> 时间：2013-02-04T11:26:51.533
> 
> 标签：java, regex, parsing

这个正则表达式是什么意思？谁能解释一下`_`这里的意义。

```
String s =("[ ]*[nN][eE][wW][ ]*"+s1+"[ ][\\t]*[ =_a-zA-Z]*"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:31:19.760

没有什么特别的意思。所以它的字面意思是'_'字符。

你的正则表达式意味着：

*   空间 （' '）
*   后跟“n”或“N”
*   后跟“e”或“E”
*   后跟“w”或“W”
*   后跟空格（''）
*   后跟变量 s1 的内容（这里应该使用 Pattern.quote (s1)）
*   后跟空格（''）
*   后跟制表符重复零次或多次
*   后跟一个拉丁字母或下划线 ('_') 或等号 ('=') 或空格 (' ') 重复零次或多次。

# python - 向图像添加图层：Easy-Thumbnails

> ID：14685801
> 
> 赞同：0
> 
> 时间：2013-02-04T11:26:52.543
> 
> 标签：python, django, thumbnails, python-imaging-library, easy-thumbnails

在 Django 中，我使用的是 Easy-Thumbnails。在我的模型字段中保存图像文件之前，我只想对图像进行一些处理，例如在其上或后面添加图层或其他图像。

我该怎么做才能实现这一目标？

我已经浪费了 4 个小时来尝试这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:19:51.863

您可以定义[自定义处理器](http://easy-thumbnails.readthedocs.org/en/latest/ref/processors/#custom-processors)并将其添加到您的设置中。

# r - GenomicRanges 包中重叠段的宽度

> ID：14685802
> 
> 赞同：4
> 
> 时间：2013-02-04T11:26:58.620
> 
> 标签：r, overlapping, bioconductor, segments

我正在使用 GenomicRanges 来查找一个实验的哪些转录本与另一个实验的转录本重叠。

```
head(to_ranges1)
   knowngene  chr strand Start    Gene
1 uc001aaa.3  chr1    +  9873 16409   DDX11L1
2 uc001aac.4  chr1    - 12361 31370  WASH7P
3 uc001aae.4  chr1    - 12361 21759  WASH7P
library(GenomicRanges)
object_one<-with(to_ranges, GRanges(chr, IRanges(Start,End), 
                                     strand,names=knowngene,Gene=Gene)
object_two<-with(to_ranges, GRanges(chr, IRanges(Start,End), 
                                     strand,names=knowngene, Gene=Gene))
mm<-findOverlaps(object_one,object_two)
solution <- data.frame(as.data.frame(object_one[as.matrix(mm)[,1],]),
                       as.data.frame(object_two[as.matrix(mm)[,2],])) 
```

我试图找到的是解决方案数据框中的命中之间的重叠段的宽度，但是我能得到的唯一宽度是与重叠过程之前的原始成绩单相关。

你能帮我请求吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T11:49:33.380

您可以`ranges`在 hits class( results of `findOverlaps`) 上应用该函数。range 返回一个 Ranges，其中包含 Ranges 对象查询和主题中范围的交集。

您不提供可重现的示例，所以这里有一个示例：

```
query <- IRanges(c(1, 4, 9), c(5, 7, 10))
subject <- IRanges(c(2, 2, 10), c(2, 3, 12))
mm <- findOverlaps(query,subject)
ranges(mm,query,subject)
Ranges of length 3
    start end width
[1]     2   2     1
[2]     2   3     2
[3]    10  10     1 
```

# python - 获取两个分开的整数值

> ID：14685807
> 
> 赞同：-2
> 
> 时间：2013-02-04T11:27:14.250
> 
> 标签：python, arrays, list

假设我有这个列表 `[[55.0][75.1]]`，我怎么能把它变成两个分开的整数变量`55`和`75` 提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:33:15.323

```
>>> from decimal import Decimal
>>> [int(Decimal(x[0])) for x in i]
[55, 75] 
```

这是长版本：

```
results = []
for x in i:
   int_value = int(Decimal(x[0]))
   results.append(x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:29:35.327

```
k = []
k.append(55.0)
k.append(75.1)
l = [k]
print l

int0 = int(l[0][0])
int1 = int(l[0][1])
print int0
print int1 
```

印刷：

```
[[55.0, 75.1]]
55
75 
```

# jquery - jQuery相机滑块视频问题

> ID：14685810
> 
> 赞同：0
> 
> 时间：2013-02-04T11:27:20.160
> 
> 标签：jquery

我正在使用 jQuery Camera Slider 来显示图像和 Vimeo 视频。你可以[在这里](http://pattonnz.businesscatalyst.com)看到它。

我有三个问题。

1.  当页面加载时，我在滑块顶部看到白色圆圈闪烁，它看起来像分页按钮和加载图标。为什么会发生这种情况，我可以阻止它吗？

2.  页面加载后，如果立即单击分页按钮，则滑块会停止并锁定。我不知道为什么会这样。

3.  页面加载后，滑块完美地滚动图像，但是一旦播放视频，滑块的自动播放功能就会停止（分页仍然有效，只是不会自动）。

非常感谢您对这些问题的任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:16:48.850

我可以看到我末端的圆圈，但即使我快速点击幻灯片，滑块也能正常工作。虽然控制台中有很多错误......![在此处输入图像描述](../Images/bc1681e06a50643ac167120eb3b7403a.png) **更新**：是的，它挂起！我认为控制台中的错误是造成这种行为的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:58:32.987

我找到了解决这个问题的方法。在 CSS 中关闭元素，然后在页面准备好后加载它们。

通过它们的包装器引用控件：

```
CSS
.camera_pag {
    display: none;
} 
```

插件在适当的时候覆盖像这样的 'display: none' 样式是很自然的，但如果不是这样，我建议使用插件的 'onLoaded' 回调函数来显示控件。

```
JS
jQuery('#camera_wrap_1').camera({       
   /*/     /*sets the height */
    thumbnails: false,  //true will make thumbnails of the image appear on hovering over pagination dots
    pagination: true,
    onLoaded: function() {
        $(".camera_pag").show(); // or .fadeIn();
    }
}); 
```

# jquery - Ajax - 加载 ajax 内容时未加载 Jquery 和 Javascript

> ID：14685818
> 
> 赞同：0
> 
> 时间：2013-02-04T11:27:58.387
> 
> 标签：jquery

我正在使用 ajax 加载外部 HTML 文件。此内容需要 Javascript 和 Jquery 才能运行。当内容加载时，它没有正确运行。如果内容都在页面上而没有加载，那么一切正常。

这是我的加载内容的 Jquery/Ajax。

脚本没有放在头部，我将它放在需要加载内容的 div 上方。

```
 <script language="javascript">
function example_ajax_request() {
  $('#bottom_content').html('<p><img src="ajax-loader.gif" width="32" height="32" /></p>');
  setTimeout('example_ajax_request_go()', 2000);
}
function example_ajax_request_go() {
    $("#bottom_content")
        .hide()
        .load('bottom.html', function(){
        alert($(this).find('script').length)
            $(this)
                .fadeIn(2000)
                .find('script').appendTo('head');
        });
}
$(document).ready(function() {
   example_ajax_request();
});

</script>
  <div style="position:absolute; left: 44%; margin-left: -450px; top: -100px; background-image:url(images/AG_V4_bottom_section_back.png); width: 1126px; height: 296px; z-index: 5000;">
   <div id="bottom_content" style="width:1125px; height: 296px;"></div>
  </div> 
```

这是jquery。

它正在加载到一个名为 bottom_content 的 div id 中。

我尝试查看 getscript、.live、.on、ajaxcomplete，但我似乎无法将它们放在一起。

欢迎任何帮助。

古兹

* * *

bottom.html 代码

```
<div style="width: 370px; height: 45px; padding-left: 30px; float:left;">NEWS</div>
  <div style="width: 340px; height: 45px; padding-left: 30px; float:left;">FEATURED PROJECT</div>
  <div style="width: 310px; height: 45px; padding-left: 30px; float:left;">FEATURED PROJECT</div>
  <div class="percentagewrap" style="width: 400px; float:left; margin-right: 2px;">
    <div id='mycustomscroll2' class='flexcroll'>
      <div style="width: 325px; margin: auto; text-align:left;" class="white_text01"> <strong>6-27-12</strong><br />
        I made some changes to the site. I changes the backgrounds of each page. I hope you like them! <br />
        <br />
        <strong>3-20-12</strong> <br />
        I would like to welcome you to the launch of AndrewGuzman.com version 3\. I have redesigned everything from scratch and I have included some of my 3D work. I am currently upgrading my 3D skills so stay tuned to the site for more 3D content. And of course, I have my Web, Logo and Print sections as well. I would love to hear what you think about my site so send me your thoughts on my contact page. Thanks and Enjoy. <br />
        <br />
        <strong>10-10-11</strong> <br />
        3D Animation Content is coming soon I have been very hard at work on some intensive 3Ds Max training. Will have some 3D designs for the site around the X-mas holiday. I am very excited to show everyone what I have been doing. <br />
        <br />
      </div>
    </div>
  </div>
  <div style="float: left; width: 365px; height: 210px;"><div style="width: 293px; margin: auto;"><img src="images/featured_image.jpg" width="293" height="184" vspace="4" border="0" />
  <div style="height: 30px; width: 100%;"><div class="white_text01" style="margin: auto; width: 250px;">David-Alan-Hughes.com   | View Project</div></div>
  </div>
  </div>

  <div style="float: left; width: 340px; height: 210px;">
<div id="contact_form">
  <form name="contact" method="post" action="">
    <fieldset>
      <label for="name" id="name_label">Name</label>
      <input type="text" name="name" id="name" size="30" value="" class="text-input" />
      <label class="error" for="name" id="name_error">This field is required.</label>

      <label for="email" id="email_label">Return Email</label>
      <input type="text" name="email" id="email" size="30" value="" class="text-input" />
      <label class="error" for="email" id="email_error">This field is required.</label>

      <label for="phone" id="phone_label">Return Phone</label>
      <input type="text" name="phone" id="phone" size="30" value="" class="text-input" />
      <label class="error" for="phone" id="phone_error">This field is required.</label>

        <br />
      <input type="submit" name="submit" class="button" id="submit_btn" value="Send" />
    </fieldset>
  </form>
</div>

  </div> 
```

* * *

头上的脚本

```
<!-- news scroller-->
    <link href="css/tutorsty.css" rel="stylesheet" type="text/css" />
<link href="css/flexcrollstyles.css" rel="stylesheet" type="text/css" />
<script type='text/javascript' src="js/flexcroll.js"></script>

<!-- slider-->
<script src="js/modernizr-2.6.1.min.js"></script>
    <script src="js/jquery-1.2.3.pack.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.0.min.js"></script>

<script type="text/javascript">
jQuery.noConflict();
</script>
    <script src="js/lean-slider.js"></script>

  <link rel="stylesheet" href="css/lean-slider.css" type="text/css" />
    <link rel="stylesheet" href="css/sample-styles.css" type="text/css" />

<!-- ajax jquery contact form-->

<script src="js/runonload.js"></script>
<script src="js/tutorial.js"></script>
<link href="css/tutorial.css" media="all" type="text/css" rel="stylesheet"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:22:22.247

问题很可能是 runonload.js 和/或 tutorial.js 中的代码在您的 ajax 调用完成并且相应的 div 更新为新内容之前运行。

我认为您只需要延迟其中的任何代码，或者在填充 div 后重新运行它。

由于我不知道那些包含的 js 文件中会发生什么，我仍然只是猜测。

```
function example_ajax_request_go() {
    $("#bottom_content")
        .hide()
        .load('bottom.html', function(){
            //Here you need to add calls to initialize the contents
            $(this).fadeIn(2000);
    }); 
```

}

# java - 单击android中的imageview时，应用程序会强制关闭

> ID：14685819
> 
> 赞同：-3
> 
> 时间：2013-02-04T11:28:01.697
> 
> 标签：java, android, android-linearlayout

我的应用程序的所有页面中都有一个“菜单”图像视图，如果单击菜单，所有菜单项（如登录、主页、工作、关于）都会打开，如果我单击“关于”菜单项，应用程序会强制关闭并获取“菜单的 OnClicklistener”出现空指针异常，但其他菜单项没有此问题，请问有人可以解决这个问题吗？

```
public class About extends Activity {
LinearLayout line1, line2;
ImageView menu;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_about);
    menu.setOnClickListener(new View.OnClickListener() {

        ImageView menu = (ImageView)findViewById(R.id.menu);
        public void onClick(View v) {
           menu.setVisibility(View.VISIBLE);
          // TODO Auto-generated method stub
        line1.setVisibility(View.VISIBLE);
        if (line2.getVisibility() == View.INVISIBLE || line2.getVisibility() == View.GONE) {
            line2.setVisibility(View.VISIBLE); } 
        else { 
            line2.setVisibility(View.INVISIBLE); 
        } 
          }
        });

          ImageView home = (ImageView) findViewById(R.id.home);
          home.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v){
                startActivity(new Intent(About.this, Home.class));
             }
              });

          ImageView jobs = (ImageView) findViewById(R.id.jobs);
           jobs.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v){
                startActivity(new Intent(About.this, Jobs.class));
             }
              });

          ImageView log = (ImageView) findViewById(R.id.log);
          log.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v){
                startActivity(new Intent(About.this, Login.class));
             }
              });

          ImageView about = (ImageView) findViewById(R.id.about);
          about.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v){
                startActivity(new Intent(getApplicationContext(), About.class));
             }
              });

} 
```

XML 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/black" >

<LinearLayout
    android:id="@+id/ll1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@color/black" 
   android:layout_alignParentTop="true"
    android:layout_alignParentRight="true">

      <ImageView
    android:id="@+id/menu"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:src="@drawable/menu" />
</LinearLayout>

<LinearLayout
    android:id="@+id/ll2"
    android:layout_width="199dp"
    android:layout_height="wrap_content"
    android:background="@color/black" 
    android:layout_toRightOf="@+id/ll1"
    android:visibility="gone"
    >

    <ImageView
    android:id="@+id/about"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_above="@+id/textView1"
    android:layout_toLeftOf="@+id/jobs"
    android:src="@drawable/about" />

<ImageView
    android:id="@+id/jobs"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:src="@drawable/jobs" />

<ImageView
    android:id="@+id/log"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:src="@drawable/log" />

<ImageView
    android:id="@+id/home"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:src="@drawable/home" />

</LinearLayout>

<TextView
    android:id="@+id/textView3"
    android:layout_width="match_parent"
    android:layout_height="50dip"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:background="@color/white" 
    android:textColor="@color/white"/>

<TextView
    android:id="@+id/textView4"
    android:layout_width="match_parent"
    android:layout_height="710dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="46dp"
    android:text="@string/AboutPage"
    android:textColor="@color/white" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/ll1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="26dp"
    android:text="@string/WelcometoRebuixcom"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@color/white" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:30:29.230

你应该移动代码

```
ImageView menu = (ImageView)findViewById(R.id.menu); 
```

前

```
menu.setOnClickListener(new View.OnClickListener() {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:30:30.510

试试这个

```
 ImageView menu = (ImageView)findViewById(R.id.menu);
    menu.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {............ 
```

你应该把

```
 ImageView menu = (ImageView)findViewById(R.id.menu); 
```

之前

```
menu.setOnClickListener 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:30:39.853

```
 ImageView menu;
 menu.setOnClickListener(new View.OnClickListener() {
        ImageView menu = (ImageView)findViewById(R.id.menu); 
```

看看这些代码行，第二个是**Force Close**的原因，**NULL**`menu`也是。

 **像这样互换，

```
 menu = (ImageView)findViewById(R.id.menu);
 menu.setOnClickListener(new View.OnClickListener() { 
```

**更新：**

你在声明 `ImageView menu;`

现在第二行， `menu.setOnClickListener(new View.OnClickListener() {` 没有定义`ImageView menu`你正在设置`setOnCLickListener()`它，这会导致**NullPointerException**。

所以你必须 在声明之后定义`ImageView menu`like 。`menu = (ImageView)findViewById(R.id.menu);`

只需阅读有关如何声明和定义对象和成员变量的基本 Android 编程和核心 Java 教程。因为我认为您的编程概念很差。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T11:31:50.587

在 onclick 侦听器之前初始化您的 imageview，如下所示：

> ```
>  ImageView menu = (ImageView)findViewById(R.id.menu); <<---- Here
>     menu.setOnClickListener(new View.OnClickListener() {
>       public void onClick(View v) {
>        menu.setVisibility(View.VISIBLE);
>       // TODO Auto-generated method stub
>     line1.setVisibility(View.VISIBLE);
>     if (line2.getVisibility() == View.INVISIBLE || line2.getVisibility() == View.GONE) {
>         line2.setVisibility(View.VISIBLE); } 
>     else { 
>         line2.setVisibility(View.INVISIBLE); 
>     } 
>       }
>     }); 
> ```**

# c++ - CRect c 有什么区别？和 CRect c(); 当 CRect 是一个类？

> ID：14685820
> 
> 赞同：3
> 
> 时间：2013-02-04T11:28:01.367
> 
> 标签：c++

CRect c 有什么区别？和 CRect c()，当 CRect 是一个类时？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T11:29:48.983

```
CRect c; 
```

定义一个对象

```
CRect c(); 
```

声明一个函数返回`CRect`对象。

有时人们不知道第二种形式并被[大多数令人烦恼的解析所抓住。](http://en.wikipedia.org/wiki/Most_vexing_parse)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T11:29:50.817

这个

```
CRect c; 
```

创建一个`CRect`名为`c`.

这个

```
CRect c(); 
```

声明一个调用的函数，该函数`c()`返回一个`CRect`对象。这是一个令人烦恼的解析，然而，它并不是[最令人烦恼的](http://en.wikipedia.org/wiki/Most_vexing_parse)。

# excel - 运行时错误“9”下标超出条件格式代码的范围

> ID：14685822
> 
> 赞同：1
> 
> 时间：2013-02-04T11:28:07.700
> 
> 标签：excel, vba

我对 VBA（以及任何类型的编程）都很陌生，所以我不确定如何在这里进行。我猜我的错误与我的条件格式的重叠范围有关，因为当代码设置为不同的方式时，一旦范围不再重叠，我也会遇到错误。这可能不是这里的情况，但我认为这会有所帮助。

我收到以下代码的“下标超出范围”错误：

```
Sub test2()
    Dim rngToFormat As Range
    Set rngToFormat = ActiveSheet.Range("$a$1:$z$1000")
    Dim rngToFormat2 As Range
    Set rngToFormat2 = ActiveSheet.Range("$k$20:$k$1000")
    Dim rngToFormat3 As Range
    Set rngToFormat3 = ActiveSheet.Range("$j$22:$j$1000")
    Dim rngToFormat4 As Range
    Set rngToFormat4 = ActiveSheet.Range("$i$22:$i$1000")
    Dim rngToFormat5 As Range
    Set rngToFormat5 = ActiveSheet.Range("$g$20:$g$1000")
    Dim rngToFormat6 As Range
    Set rngToFormat6 = ActiveSheet.Range("$d$9, $f$9")
    Dim rngToFormat7 As Range
    Set rngToFormat7 = ActiveSheet.Range("$G$3:$G$7,$G$11:$G$15,$E$3:$E$7,$E$11:$E$15,$N$3:$N$7,$N$11:$N$15,$L$3:$L$7,$L$11:$L$15")
    rngToFormat.FormatConditions.Delete
    rngToFormat.FormatConditions.Add Type:=xlExpression, _
        Formula1:="=if(R[]C20=1, true(), false())"
        rngToFormat.FormatConditions(1).Font.Color = RGB(228, 109, 10)
    rngToFormat2.FormatConditions.Add Type:=xlExpression, _
        Formula1:="=and(R[]C7=""6\. Negotiate"", R[]C11<25)"
        rngToFormat2.FormatConditions(2).Font.ColorIndex = 3
    rngToFormat2.FormatConditions.Add Type:=xlExpression, _
        Formula1:="=and(R[]C7=""4\. Develop"", R[]C11<15)"
        rngToFormat2.FormatConditions(3).Font.ColorIndex = 3
    rngToFormat2.FormatConditions.Add Type:=xlExpression, _
        Formula1:="=and(R[]C7=""5\. Prove"", R[]C11<20)"
        rngToFormat2.FormatConditions(4).Font.ColorIndex = 3
    rngToFormat2.FormatConditions.Add Type:=xlExpression, _
        Formula1:="=and(R[]C7=""7\. Committed"", R[]C11<30)"
        rngToFormat2.FormatConditions(5).Font.ColorIndex = 3
    rngToFormat2.FormatConditions.Add Type:=xlExpression, _
        Formula1:="=and(R[]C7=""Closed Won"", R[]C11<35)"
        rngToFormat2.FormatConditions(6).Font.ColorIndex = 3
    rngToFormat3.FormatConditions.Add Type:=xlCellValue, _
        Operator:=xlGreater, Formula1:=200
        rngToFormat3.FormatConditions(7).Font.ColorIndex = 3
    rngToFormat4.FormatConditions.Add Type:=xlCellValue, _
        Operator:=xlGreater, Formula1:=60
        rngToFormat4.FormatConditions(8).Font.ColorIndex = 3
    rngToFormat5.FormatConditions.Add Type:=xlExpression, _
        Formula1:="=or(R[]C7=""1\. Plan"", R[]C7=""2\. Create"", R[]C7=""3\. Qualify"")"
        rngToFormat5.FormatConditions(9).Font.ColorIndex = 3
    rngToFormat6.FormatConditions.Add Type:=xlCellValue, _
        Operator:=xlLess, Formula1:=0
        rngToFormat6.FormatConditions(10).Font.ColorIndex = 3
        rngToFormat6.FormatConditions(10).Interior.Color = RGB(204, 204, 255)
        rngToFormat6.FormatConditions(10).Interior.Pattern = xlSolid
    rngToFormat7.FormatConditions.Add Type:=xlCellValue, _
        Operator:=xlLess, Formula1:=0
        rngToFormat7.FormatConditions(11).Font.ColorIndex = 3
        rngToFormat7.FormatConditions(11).Interior.Color = RGB(215, 228, 158)
        rngToFormat7.FormatConditions(11).Interior.Pattern = xlSolid
End Sub 
```

任何建议将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:37:34.090

您的代码有两个问题：

1.  您只删除第一个范围的条件格式 - 但将条件添加到所有范围 - 然后访问一个很可能不是您刚刚创建的特定格式 ( `FormatConditions(3)`)
2.  您输入的公式是默认的英文公式 - 出于某种原因，`FormatConditions.Add`需要本地公式。

我修改了你的代码，看看它是否解决了你的问题：

```
子测试2()

    fctApply rng:=Range("$a$1:$z$1000"), strFormulaR1C1:="=(R[]C20=1)", dblRGB:=RGB(228, 109, 10), blnDeleteOldConditions:=True

    fctApply rng:=Range("$k$20:$k$1000"), strFormulaR1C1:="=and(R[]C7=""6.Negotiate"",R[]C11<25)", intColorIndex:=3
    fctApply rng:=Range("$k$20:$k$1000"), strFormulaR1C1:="=and(R[]C7=""4\. Develop"", R[]C11<15)", intColorIndex:=3
    fctApply rng:=Range("$k$20:$k$1000"), strFormulaR1C1:="=and(R[]C7=""5\. Prove"", R[]C11<20)", intColorIndex:=3
    fctApply rng:=Range("$k$20:$k$1000"), strFormulaR1C1:="=and(R[]C7=""7\. Committed"", R[]C11<30)", intColorIndex:=3
    fctApply rng:=Range("$k$20:$k$1000"), strFormulaR1C1:="=and(R[]C7=""Closed Won"", R[]C11<35)", intColorIndex:=3

    fctApply rng:=Range("$j$22:$j$10000"), strFormulaR1C1:=200, intType:=xlCellValue, intOperator:=xlGreater, intColorIndex:=3

    fctApply rng:=Range("$i$22:$i$1000"), strFormulaR1C1:=60, intType:=xlCellValue, intOperator:=xlGreater, intColorIndex:=3

    使用 fctApply(rng:=Range("$g$20:$g$1000"), strFormulaR1C1:=0, intType:=xlCellValue, intOperator:=xlLess, intColorIndex:=3)
        .Interior.Color = RGB(204, 204, 255)
        .Interior.Pattern = xlSolid
    结束于

    使用 fctApply(rng:=Range("$G$3:$G$7,$G$11:$G$15,$E$3:$E$7,$E$11:$E$15,$N$3:$N$7,$ N$11:$N$15,$L$3:$L$7,$L$11:$L$15"), strFormulaR1C1:=0, intType:=xlCellValue, intOperator:=xlLess, intColorIndex:=3)
        .Interior.Color = RGB(215, 228, 158)
        .Interior.Pattern = xlSolid
    结束于
结束子

私有函数 fctApply(rng As Range, _
    strFormulaR1C1 作为变体，_
    可选的 intType As XlFormatConditionType = xlExpression, _
    可选的 intOperator 作为 XlFormatConditionOperator, _
    可选的 intColorIndex As Integer = -1, _
    可选 dblRGB As Double = -1, _
    可选的 blnDeleteOldConditions As Boolean = False _
    ) 作为格式条件

    将 objCond 调暗为 FormatCondition
    将 strFormula 调暗为字符串

    If blnDeleteOldConditions Then rng.FormatConditions.Delete

    strFormula = Application.ConvertFormula(strFormulaR1C1, xlR1C1, xlA1)

    出错时转到 ConvertLocal
    如果 intOperator <> 0 那么
        rng.FormatConditions.Add 类型：=intType，_
            公式1：=strFormula，运算符：=intOperator
    别的
        rng.FormatConditions.Add 类型：=intType，_
            公式1:=strFormula
    万一
    错误转到 0
    设置 objCond = rng.FormatConditions(rng.FormatConditions.Count)
    如果 intColorIndex <> -1 那么
        objCond.Font.ColorIndex = intColorIndex
    ElseIf dblRGB <> -1 则
        objCond.Font.Color = dblRGB
    万一
    设置 fctApply = objCond

    退出函数
本地转换：
    使用 Range("A1") ' 将其更改为空单元格地址 - 它暂时用于从本地公式转换为普通公式
        .Formula = strFormula
        strFormula = .FormulaLocal
        .Formula = ""
    结束于
    恢复
结束功能

```

# postgresql - 查询结构与函数结果类型不匹配，RETURNS TABLE

> ID：14685823
> 
> 赞同：3
> 
> 时间：2013-02-04T11:28:09.147
> 
> 标签：postgresql

我需要一个简单的函数来返回动态列集。我在 SO 上找到了几个示例，最终得到以下结果：

```
CREATE or replace FUNCTION getColumn(_column1 text, _column2 text, _column3 text, _table text)
  RETURNS TABLE(cmf1 text, cmf2 text, cmf3 text) AS $$
BEGIN
    RETURN QUERY EXECUTE 
        'SELECT ' 
            || quote_ident(_column1)::text || ' as cmf1,'
            || quote_ident(_column2)::text || ' as cmf2,'
            || quote_ident(_column3)::text || ' as cmf3'
        ' FROM '
            || quote_ident(_table); 
END;
 $$ LANGUAGE plpgsql; 
```

我需要这个函数只适用于 varchar/text 列，所以我创建了这个测试表：

```
create table test20130205 (
    a text,
    b text,
    c varchar,
    d text)
; 
```

最后，我可以运行一些测试：

```
select * from getColumn('a','b','d','test20130205');
-- ok
select * from getColumn('a','b','c','test20130205');
-- error
ERROR:  structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  PL/pgSQL function getcolumn(text,text,text,text) line 3 at RETURN QUERY 
```

似乎在强制转换之前检查了 c 列（varchar）的类型 - 这看起来很奇怪，但我想我错过了一些东西。

如何修复我的功能？

(PostgreSQL 9.1)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T12:30:53.233

在您当前的函数中，对文本的强制转换不适用于输出列的值，它们适用于它们的名称（的结果`quote_ident`）。

演员表应该在查询本身内部移动：

```
CREATE or replace FUNCTION getColumn(_column1 text, _column2 text, _column3 text, _table text)
  RETURNS TABLE(cmf1 text, cmf2 text, cmf3 text) AS $$
BEGIN
    RETURN QUERY EXECUTE 
        'SELECT ' 
            || quote_ident(_column1) || '::text as cmf1,'
            || quote_ident(_column2) || '::text as cmf2,'
            || quote_ident(_column3) || '::text as cmf3'
        ' FROM '
            || quote_ident(_table); 
END;
 $$ LANGUAGE plpgsql; 
```

# c# - 警报消息框

> ID：14685828
> 
> 赞同：4
> 
> 时间：2013-02-04T11:28:43.503
> 
> 标签：c#, asp.net, messagebox

我一直在使用标签文本在 asp.net 网站中显示不同的状态。

例如“配置文件更新”、“无效字符”等，但更喜欢弹出消息框。

这是我尝试过的 -

```
string alert = ws.webMethod(TextBox1.Text);
System.Web.HttpContext.Current.Response.Write("<SCRIPT LANGUAGE='JavaScript'>alert(" + alert + ")</SCRIPT>"); 
```

但是，当它被触发时，IE 中的屏幕似乎变大了，并且没有显示任何消息框。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T11:32:10.223

我不建议这样做，看起来您在页面加载时创建了一个模式对话框，这意味着您的页面在用户单击“确定”之前无法继续处理。

也就是说，但是，您的问题可能是`alert`ed 文本周围缺少引号：

`System.Web.HttpContext.Current.Response.Write("<SCRIPT LANGUAGE='JavaScript'>alert('" + alert + "')</SCRIPT>");`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T11:40:14.057

使用[ClientScriptManager.RegisterClientScriptBlock](http://msdn.microsoft.com/en-us/library/btf44dc9.aspx)而不是`Response.Write`

```
string alert = ws.webMethod(TextBox1.Text);
string script = "<SCRIPT LANGUAGE='JavaScript'>alert(" + alert + ")</SCRIPT>" 
Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "scriptBlockName", script ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T11:39:31.150

我在我的项目中使用过它，对我来说很好用

```
 ScriptManager.RegisterClientScriptBlock(Page, this.GetType(), "MessageBox", "alert('message')", true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T11:45:18.643

你可以使用或者你可以使用像[this](http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/)和[this这样](http://dev.iceburg.net/jquery/jqModal/)`alert`的jquery插件。如果使用 jquery 插件，您可以自定义消息框，例如更改背景颜色或...

# node.js - 关于我在 nodeload.js 脚本中的测试用例中发生的错误

> ID：14685832
> 
> 赞同：1
> 
> 时间：2013-02-04T11:28:55.307
> 
> 标签：node.js, elasticsearch

我设计了一个使用弹性搜索的应用程序。当我尝试使用 node load.js 编写测试用例时。我有一个问题，当我增加用户数量时，我收到警告“**警告：HTTP 请求期间出错：错误：ECONNREFUSED，无法联系 DNS 服务器**”并且我无法纠正问题，所以请帮我解决这个错误.

```
nl.run({
name: "test",
host: 'localhost',
port: 9200,
//path: '/my_river/page/_search?q=sweden',
numUsers: 2000,   //Increased my num of user**
timeLimit: 180,
targetRps: 500,
stats: [
    'result-codes', 
    { name: 'latency', percentiles: [0.9, 0.99] },
    'concurrency',
    'rps',
    'uniques',
    { name: 'http-errors', successCodes: [200,404], log: 'http-errors.log' }
], 
```

# java - 在 Eclips env 中调用 XML 中的 JAVA 方法

> ID：14685833
> 
> 赞同：-6
> 
> 时间：2013-02-04T11:28:58.077
> 
> 标签：java, xml

谁能告诉我如何在 XML 中调用 JAVA 方法以及如何给出类路径？我正在使用 1.0 xml 处理器，java 类和 xml 文件是否应该分别保存在不同的包中..？有什么材料可以读到吗？谁能帮我.........

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:53:16.143

使用视图的 onClick 属性，您可以从 xml 调用 java 方法。以下按钮的 xml 示例代码将对此进行演示。

```
<Button
            android:id="@+id/btnBuy"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Buy"
            android:onClick="upgradeToPremium"/> 
```

并在java中定义该方法

```
public void upgradeToPremium()
{
...
} 
```

# java - 如何更改 JXTaskPaneContainer 的背景颜色

> ID：14685838
> 
> 赞同：6
> 
> 时间：2013-02-04T11:29:09.370
> 
> 标签：java, swing, swingx, jxtaskpane

我想将 taskpanecontainer 的蓝色背景颜色更改为白色。我已经使用了下面的线，但这条线没有任何影响。

```
UIManager.put("TaskPaneContainer.background", Color.LIGHT_GRAY); 
```

请给我一些改变背景颜色的想法。

```
public class NewJFrame2 extends javax.swing.JFrame {

        public NewJFrame2() {
            initComponents();
            setSize(462, 300);
            add(doInit());
            setBackground(Color.WHITE);
        }

        private Component doInit() {
                JXTaskPaneContainer taskpanecontainer = new JXTaskPaneContainer();
                //taskpanecontainer.setLayout(new VerticalLayout(2));

                JXTaskPane taskpane1 = new JXTaskPane();
                taskpane1.setTitle("First TaskPane");
                JXTable table = new JXTable();
                DefaultTableModel model = new DefaultTableModel();
                model.addColumn("ParameterName");
                model.addColumn("ParameterType");
                model.addColumn("Operation");
                model.addRow(new Object[]{"Request", "String", "Delete"});
                model.addRow(new Object[]{"Request", "String", "Delete"});

                table.setModel(model);
                ((JComponent) taskpane1.getContentPane()).setBorder(BorderFactory.createEmptyBorder(0,5,0,5));
                taskpane1.add(table);

                taskpanecontainer.add(taskpane1);

                taskpanecontainer.setBorder(javax.swing.BorderFactory.createEmptyBorder(0,0,0,0));

                return taskpanecontainer;
            }
    } 
```

我也在分享图像，所以我已经在你的脑海中清除了.. ![在此处输入图像描述](../Images/d0a81ee3b8b6cf00f5c2faac1a2cc710.png)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T11:58:32.850

As always, the background property might not be respected by LAFs. That's f.i. the case for a taskpaneContainer in Win: it uses a (Swingx!) painter to fill its background. So the property to provide is

```
UIManager.put("TaskPaneContainer.backgroundPainter", new MattePainter(Color.RED)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-01T16:41:43.067

接下来的事情非常简单，对我来说就像一个魅力：

```
taskPaneContainer.setBackground(Color.WHITE);
taskPaneContainer.setBackgroundPainter(null); 
```

# python - python文件读取修改文件的行（Mac OS X）但不是Linux

> ID：14685841
> 
> 赞同：2
> 
> 时间：2013-02-04T11:29:21.410
> 
> 标签：python, linux, macos, file-io, generator

我继承了一些代码，这些代码读取大量数据文件并将这些数据打包成块，将其发送到某处的服务器并继续执行。

有时打包程序失败/死亡/无法联系服务器等，数据文件变大。在这一点上，执行所有这些操作的小型 ArchLinux 机器很少会无法完成该过程 - 此时我会在我的 Mac 上获取数据并在本地执行相同的任务（同时需要更好的解决方案）。

ArchLinux 机器永远不会出现我的 Mac 似乎总是遇到的相同错误，即：

该文件`1000`一次读取行，这是使用 实现的`islice`，这似乎是一种可接受的方式：[https ://stackoverflow.com/a/6335876/310391](https://stackoverflow.com/a/6335876/310391)

问题在于，在 Mac 上，这最终会将几行代码拼凑在一起。结果列表很`1000`长，但至少其中一行实际上是一行的串联，没有`\n`, 和另一行的大部分从稍微**向上**（36 行**返回**，在本例中正好 4096 字节）文件（这在向后读取文件时是有道理的，见下文）。

查看 之前和之后的文件`seek()`和`tell()`位置`islice`，我分别得到（例如）`3530855`和字节`3651687`的读取大小。`120832`

如果我在 pdb 中遇到此错误时将文件返回到`3530855`，然后`file.readlines(120832)`我会得到`1092`行（`readlines`' size 只是一个提示，所以这是有道理的），并且 munged 行不存在（但它的组成部分在各自正确的索引中完好无损）。

没有其他进程从该文件读取或写入该文件，因此我看不到它在执行时会如何“分流” `islice`，例如。

`tell()`前面给出的第一个位置`islice`，上面给出`3530855`的后向阅读器（生成器）（文件是`os.dup()`'d，首先，在生成器内部）`yield`逐行执行 - 生成器`break`s 找到时的循环包含它成功发送的最后一个时间戳的行：

```
for line in BackwardsFileReader(fp):
    if somecondition:
        break 
```

和

```
def BackwardsReader(seekfile, size=4096, pos=-1):
    """Read a file line by line, backwards"""
    fd = os.dup(seekfile.fileno())
    buf = ""
    whence = os.SEEK_END if pos < 0 else os.SEEK_SET

    with os.fdopen(fd) as readfile:
        readfile.seek(0, os.SEEK_END)
        if readfile.tell() == 0:
            # File is empty, bail.
            return
        readfile.seek(pos, whence)
        buf = readfile.read(size)
        readfile.seek(pos, whence)
        newline_pos = buf.find("\n")
        if newline_pos != -1:
            trailing_newline = True
            buf = buf[:newline_pos]
        else:
            trailing_newline = False

        while 1:
            newline_pos = buf.rfind("\n")
            pos = readfile.tell()
            if newline_pos != -1:
                # Found a newline
                line = buf[newline_pos+1:]
                # Seek the original file to the end of buf
                seekfile.seek(pos + len(buf), os.SEEK_SET)
                buf = buf[:newline_pos]
                if pos or newline_pos or trailing_newline:
                    line += "\n"
                yield line
            elif pos:
                # Need to fill buffer
                toread = min(size, pos)
                readfile.seek(-toread, 1)
                buf = readfile.read(toread) + buf
                readfile.seek(-toread, 1)
                if pos == toread:
                    buf = "\n" + buf
            else:
                # Start-of-file
                seekfile.seek(0)
                return 
```

如果我不费心对文件进行切片，并阅读全部内容（在我的 Mac 上），问题仍然会发生，但不是在同一个地方，而且频率较低。

我唯一能想到的是，生成器可能正在进一步向后推进文件（4096 字节，缓冲区大小），而 islice 正在向前读取文件......奇怪的是这在 Linux 机器上从未发生过。低级文件操作不是我的面包和黄油，当在这里与生成器结合使用时，我想我一定会遗漏一些东西 - 任何人都可以在这里建议下一个调试步骤，或者提供有关可能导致这种差异的提示吗？

# javascript - 如何使用 JSLQ 获得最高记录？

> ID：14685842
> 
> 赞同：2
> 
> 时间：2013-02-04T11:29:24.583
> 
> 标签：javascript, indexeddb, jaydata

我正在为 IndexedDB 使用 Jaydata JSLQ 和 Jaydata 提供程序，我想做的是获取“前 n 个”记录。我所做的是首先按降序获取记录，然后从中获取最大 n 条记录，看起来提供程序存在错误或其他问题，因为我得到的降序是正确的，但获取函数没有t 从有序列表返回顶部记录，它从上升记录中获取顶部记录！！。我也尝试过“第一个”功能，但也没有用！下面是我的代码的样子：

```
offlinedb.TodoItems.orderByDescending('it.Id').take(2).toArray(function(items){    
        alert(item.Name);    
}); 
```

如果有人能在这方面帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:40:59.593

该错误已在 InMemoryProvider.js 中修复，并将在 JayData 1.3 中发布。您可以使用开发分支创建一个新的 InMemoryProvider.js，也可以从 1.3-pre 下载此文件：http: [//include.jaydata.org/1.3pre/jaydataproviders/InMemoryProvider.js](http://include.jaydata.org/1.3pre/jaydataproviders/InMemoryProvider.js)

如果此修复无法解决问题，请重新打开问题 - [https://github.com/jaydata/jaydata/issues/81](https://github.com/jaydata/jaydata/issues/81)

# solr - 当我给 SEABISCUIT,SEA, BISCUIT 时，我失去了 BISCUIT 的同义词，因为空格给出了不同的结果

> ID：14685843
> 
> 赞同：2
> 
> 时间：2013-02-04T11:29:24.520
> 
> 标签：solr, websphere, whitespace

我失去了水果的同义词，因为我给了***SEABISCUIT***、***SEA、*** BISCUIT和 BISCUIT 给出了与 SEABISCUIT 相同的结果，因为我用于它们的同义词是“，”。请帮助我。有没有其他方法可以为 SEABISCUIT 和 SEA BISCUIT 获得相同的结果。不会丢失 BISCUIT 的结果。

我正在使用 websphere 7，并将 solr 作为单独的工具添加。

请帮我 ！！！

```
My schema.xml is as below

<fieldType name="text" class="solr.TextField"
            positionIncrementGap="100">
            <analyzer type="index">
                <tokenizer class="solr.KeywordTokenizerFactory" />
                <filter class="solr.StopFilterFactory" ignoreCase="true"
                    words="stopwords.txt" enablePositionIncrements="true" />
                <filter class="solr.WordDelimiterFilterFactory"
                    generateWordParts="1" generateNumberParts="1" catenateWords="1"
                    catenateNumbers="1" catenateAll="0" splitOnCaseChange="0" />
                <filter class="solr.LowerCaseFilterFactory" />
                <filter class="solr.SnowballPorterFilterFactory" language="English"
                    protected="protwords.txt" />

                <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="25" />
            </analyzer>
            <analyzer type="query">
                <tokenizer class="solr.KeywordTokenizerFactory" />
                <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt"
                    ignoreCase="true" expand="true" />
                <filter class="solr.StopFilterFactory" ignoreCase="true"
                    words="stopwords.txt" enablePositionIncrements="true" />
                <filter class="solr.WordDelimiterFilterFactory"
                    generateWordParts="1" generateNumberParts="1" catenateWords="0"
                    catenateNumbers="0" catenateAll="0" splitOnCaseChange="0" />
                <filter class="solr.LowerCaseFilterFactory" />
                <filter class="solr.SnowballPorterFilterFactory" language="English"
                    protected="protwords.txt" />

                <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="25" />
            </analyzer>
        </fieldType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:41:21.427

您在查询时拥有 SynonymFilterFactory。试着把它放在索引时间。多词同义词（参见[深入解释](http://nolanlawson.com/2012/10/31/better-synonym-handling-in-solr/)）和查询时扩展存在一个已知问题。这正在慢慢得到改善，但仍然不完美。

# jquery - 我如何定义 Jquery 按钮样式？

> ID：14685846
> 
> 赞同：3
> 
> 时间：2013-02-04T11:29:30.230
> 
> 标签：jquery, jquery-ui, jquery-mobile

我一直在开发一个 jquery 移动页面，它上面有几个按钮，它们具有独特的样式，例如：

作为一种客户端“jquery 驱动向导”的一部分，...

```
<button data-function="back" class="back">Back</button>
<button data-function="next" class="next">Next</button>
<button data-function="submit" class="submit">Submit</button> 
```

...根据您在向导中的位置，这些按钮会显示/隐藏。

没问题...直到我了解样式。JQuery 自行“包装我的按钮并隐藏它”，所以我最终得到的东西看起来像......

```
<div class="ui-btn ...">    
   <span class="ui-btn-inner ...">Back</span>
   <button class="back">Back</button> 
</div> 
```

如上所述，它隐藏了我的按钮，然后我的后退按钮自定义样式实际上丢失了。我不想只为我的自定义按钮设置所有按钮的样式。

我考虑过使用一些 JQuery 将我的自定义样式移动到父“div”元素作为文档就绪脚本的一部分，但这似乎很愚蠢，必须为每个按钮做，如果我有逻辑可能会变得非常复杂或冗长每次我想要不同的按钮类型时都这样做。

是否有一种标准的方式来表达“JQuery，我希望将此类应用于您生成的按钮元素......”或者这是一个错误？

我注意到其他人完全避免使用这种方法，例如...... [http://m.nationalrail.co.uk/pj/home](http://m.nationalrail.co.uk/pj/home)

访问按钮上的官方 JQuery 移动页面似乎表现出相同的行为：http: [//jquerymobile.com/demos//1.2.0/docs/buttons/buttons-types.html](http://jquerymobile.com/demos//1.2.0/docs/buttons/buttons-types.html)

（记得在访问之前将您的浏览器代理更改为移动设备）

有任何想法吗？理想情况下，我想避免使用我自己的一些 JQuery 将样式“破解”到正确的元素，以避免减慢页面速度并引入更多代码，然后我必须维护，因为我想要一个蓝色和一个橙色按钮彼此相邻。

麻烦的是这是我们公司的主要登陆页面，所以风格被认为是非常重要的。

编辑@Gajotres：

添加另一个主题可能会解决问题，但我对这个页面的职责是让它尽可能快地执行，并且加载具有多个主题的页面将意味着更多的加载时间。

我认为这样的事情是一种可能的解决方案，但我认为 JQuery 应该已经这样做了，所以我的想法是，也许我做错了什么......

```
<script type="text/javascript">
   var allButtons = $(button);
   allButtons.each(function() { 
      var css = $(this).className;
      $(this).prev().addClass(css);
   });
</script> 
```

这将导致我将按钮上的任何类应用于 jquery 生成的跨度标记，现在显示在它的位置。然后，我需要附加一些进一步的功能，以确保我有选择地复制某些类（只是愚蠢的 imo）。

在这里采用 JQuery 方法我可以添加类似...

```
data-customStyle="myClass" 
```

...对于我要设置样式的每个按钮，然后使用...

```
<script type="text/javascript">
   var customButtons = $("data-customStyle");
   customButtons.each(function() { 
      $(this).prev().addClass($(this).data("customStyle"));
   });
</script> 
```

...将样式附加到“代表按钮的jquery标记”。

我对此的想法...... WTF？！？！

JQuery 是为了让生活更轻松，而不是更难？我不应该“发布黑客插件”来做我在服务器上基本上已经做过的事情并且 JQuery 坏了。

这是 JQuery 中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:08:21.390

找到与 jQuery 关联的 css 文件，并尝试参考需要样式的 div 和不需要样式的 div 来编辑它。否则对于那些您不想要样式的按钮，只需将类或 id 更改为 css 文件中不存在的不同名称。

有时即使您更改了类（在 css 中类名在点示例“.class”之后）或 id（在 css 中，id 名在哈希“#id”之后），如果不是全部，有时可能会保留背景颜色等小的变化相同。为此检查对应于主要属性的 css 文件，如 or 或（在 css 中，属性名称放在方括号之间，例如“[title]”）。作为参考，您可以查看[http://www.w3schools.com/css/](http://www.w3schools.com/css/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-13T23:34:20.453

最终的答案落入了css中第一个c的领域。

如果您以正确的顺序将样式表放在页面上，则可以利用级联来正确覆盖内容。

JQuery 的“默认样式”非常具有侵略性，并且一些持久性通常会得到回报，尽管它可能意味着覆盖很多东西。

# jboss - JBoss 和 RewriteCond 和 RewriteRule

> ID：14685848
> 
> 赞同：2
> 
> 时间：2013-02-04T11:29:33.770
> 
> 标签：jboss, jboss-eap-6, jboss-eap-7

我需要重定向所有不来自此域**ti-passis.rhcloud.com**
的请求， 并使用 https 到 http 以避免证书错误。

示例：

[https](https://ti-passis.rhcloud.com/contato) ://ti-passis.rhcloud.com/contato（应该重定向）
[https://tetraimoveis.com/contato](https://tetraimoveis.com/contato)（应该因为证书错误而重定向，一旦证书用于“*.rhcloud. com")

```
RewriteCond %{HTTP_HOST} !^ti-passis.rhcloud.com$ [RC]
RewriteCond %{HTTP:X-Forwarded-Proto} https
RewriteRule .* http:// %{HTTP_HOST}%{REQUEST_URI} [R,L] 
```

RewriteCond 单独工作，但如果我把它们放在一起，什么都不起作用。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-09T17:14:10.017

正确的做法是（尽管您现在可能已经弄清楚了）

```
RewriteCond %{HTTP_HOST} !^ti-passis.rhcloud.com$ [RC,OR]
RewriteCond %{HTTP:X-Forwarded-Proto} https
RewriteRule .* http:// %{HTTP_HOST}%{REQUEST_URI} [R,L] 
```

你基本上只是在“或”表达。根据 JBoss “'ornext|OR'（或下一个条件）使用它来将规则条件与本地 OR 而不是隐式 AND。”

# python - 为什么我的 django 开发服务器在本地运行比在 Heroku 上运行相同的开发服务器要快得多？

> ID：14685858
> 
> 赞同：1
> 
> 时间：2013-02-04T11:29:51.280
> 
> 标签：python, django, heroku

我有一个使用 Django 的网站，它在输入时从 postgresql 数据库中的单个表加载大约 100 行。

**本地开发服务器**：页面加载时间为**300 毫秒**
**Heroku 上的生产服务器**：页面加载时间为**1.34 秒**（大约慢 4.13 倍）（集成并从非空闲测功机`gunicorn`加载我的静态文件）`aws S3`

有什么？

请注意，我的生产服务器上还没有流量，我正在使用 1 个测功机。

当我在 Heroku 上为我的生产服务器使用与我的开发服务器完全相同的设置时，它甚至更慢。**这样的加载时间差异正常吗？**

**我的电脑规格**：

```
Memory: 3.7 GiB  
Processor: Intel® Core™ i5 CPU M 520 @ 2.40GHz × 4   
OS type: 64-bit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:40:32.303

根据[这个来源](http://www.quora.com/Heroku/How-powerful-is-one-Heroku-dyno)，如果我的电脑大约有`3.9 Gb ram`一个 dyno 确实有，这意味着我的电脑有大约**7.8 倍的内存**。根据[这个源](http://jacobian.org/writing/django-performance-tips/)ram 对于提高数据库查询的性能非常重要。因为我做了很多查询，所以时差对我来说很有意义。`512Mb ram`

 **不过，在我的 heroku 应用程序目录中运行 top 会出人意料地返回`35 Gb ram`。但是根据[这个](https://stackoverflow.com/questions/11110088/load-on-heroku-instance-seen-in-heroku-run-top)在 Heroku 中运行的源代码`top`，是从您的应用程序运行的不同测功机（一次性测功机）执行的。

我现在唯一不明白的是为什么 a`one-off dyno`有这么多内存。

只要没有人给出更好的答案，我就会检查这个答案。**

# perl - 使用 Net::SSH::Expect 远程更改用户密码；

> ID：14685862
> 
> 赞同：1
> 
> 时间：2013-02-04T11:30:00.887
> 
> 标签：perl

```
#!/usr/bin/perl

use strict;
use warnings;
my $username = '$ARGV[0]';
my $password = '$ARGV[1]';
use Net::SSH::Expect;
my $ssh = Net::SSH::Expect-> new (
        host => "10.38.228.230",
        password => "lsxid4",
        user => "root",
        raw_pty => 1,
        timeout => 10,
        log_file => "log_file"  
);

my $login_output=$ssh->login();
if ( $login_output =~ /Last/ )
   {
   print "The login for ROOT was successful, Let's see if we can change the password \n";
   $ssh->send("passwd $username");
   $ssh->waitfor ('password:\s*', 10) or die "Where is the first password prompt??";
   $ssh->send("$password");
   $ssh->waitfor ('password:\s*', 10) or die "Where is the Second password promp??";
   $ssh->send("$password");
   $ssh->waitfor('passwd:\s*',5);
   print "The password for $username has been changed successfully \n";
   }
   else
   {
      die "The log in for ROOT was _not_ successful.\n";
   } 
```

我正在尝试通过以 root 身份登录到主机来更改远程主机上的用户密码，但 `$username, $password`如果我在其工作的代码中提供硬编码值，似乎并没有采用这些值。

在命令行上像这样运行：

```
bash-3.00# ./test6.pl rak xyz12   
The login for ROOT was successful, Let's see if we can change the password
Where is the first password prompt?? at ./test6.pl line 22.
bash-3.00# 
```

如何远程更改用户密码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:09:55.337

问题是您在这里使用单引号：

```
my $username = '$ARGV[0]';
my $password = '$ARGV[1]'; 
```

首先，以这种方式引用变量是完全没有必要的。其次，当使用单引号时，内容没有被插值，它只是文字字符串`$ARGV[0]`。

这应该是：

```
my $username = $ARGV[0];
my $password = $ARGV[1]; 
```

但更优雅的解决方案是：

```
my ($username, $password) = @ARGV; 
```

利用在列表上下文中进行分配的可能性。或者：

```
my $username = shift;
my $password = shift; 
```

`shift`根据上下文（无论您是否在子例程中），将隐式地将参数从`@ARGV`or中移开。`@_`

# javascript - jquery - 数据表更改 sScrollY

> ID：14685865
> 
> 赞同：10
> 
> 时间：2013-02-04T11:30:18.060
> 
> 标签：javascript, jquery, datatable

我想更改数据表的可滚动区域的大小。

```
$('#example').dataTable({"sScrollY": 100});
//some stuff..
$('#example').dataTable({"sScrollY":101}); //wrong: cannot reinitialize 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T11:48:10.547

```
$('.dataTables_scrollBody').css('height', 400); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T11:36:31.030

要更改 Y 滚动，请使用以下代码，

```
var objDataTable = $('#example').dataTable({"sScrollY" : 100});
objDataTable.fnSettings().oScroll.sY = 101;
objDataTable.fnDraw(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-16T17:39:55.677

如果您有多个数据表，您可以通过包装器访问每个数据表：

```
$('#example').dataTable({'sScrollY': 100});
//some stuff..
objDataTable.fnSettings().oScroll.sY = '225px';
$('#example_wrapper').children('.dataTables_scroll').children('.dataTables_scrollBody').css('height', '225px'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-04T01:07:23.030

对于 jquery.dataTables 1.10.x ：

```
$('div.dataTables_scrollBody').height( 400 ); 
```

根据 Datatables 文档，这是推荐的方式。根据相同的文档，不鼓励使用设置对象，因为它是内部的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-11T09:52:59.617

我不得不将两者结合起来解决我的问题。就我而言，我想做无休止的分页，问题是窗口调整大小后，dataTables_scrollBody 的高度保持固定，所以我必须调整 oScroll 以显示带有滚动条的表格数据。设置 dataTables_scrollBody 高度将在窗口大小更改时起作用，但在表格重绘后它将使用旧的 sScrollY 值回滚，Neo 的代码修复了这个问题。:)

```
objDataTable.fnSettings().oScroll.sY = 101;
objDataTable.fnDraw();
$('.dataTables_scrollBody').css('height', 400); 
```

# android - 如何取消选中或清除单选按钮组？

> ID：14685873
> 
> 赞同：1
> 
> 时间：2013-02-04T11:30:53.243
> 
> 标签：android, radio-button

我是安卓新手。。

我在取消选中组中的单选按钮时遇到问题....

我的问题是......

我正在开发一个基于测验的应用程序。当用户打开此应用程序时，将有 1 个任务和 4 个选择（单选按钮）单选按钮将被取消选中，但当用户回答 1 个任务并且当他进行下一个任务时，将选中单选按钮。我想取消选中/重置每个任务的单选按钮。我该怎么做？

我面临的另一个问题是......如果假设用户选择了第一个按钮，他想再次更改选项，所以他选择了另一个按钮，那时他不应该选择..

如何实施？

任何帮助，将不胜感激。

> ```
>  protected void onPostExecute(String file_url) {
>         pDialog.dismiss();
>      ques1=new ArrayList<String>(new ArrayList<String>(ques1));
>         //  j=0;
>         TextView txtque = (TextView) findViewById(R.id.que_txt); 
>         txtque.setText(ques1.get(j));
> answ1=new ArrayList<String>(new ArrayList<String>(answ1));
>         btn_practice1.setText(answ1.get(0));
>         btn_practice2.setText(answ1.get(1));
>         btn_practice3.setText(answ1.get(2));
>         btn_practice4.setText(answ1.get(3));
>         btn_practicerg.setOnCheckedChangeListener(new OnCheckedChangeListener() {
>             @Override
>             public void onCheckedChanged(RadioGroup group, int checkedId) { 
>                 RadioButton radioButton = (RadioButton) findViewById(checkedId);   // error       
>                                                                           //  is here 205 line..
>                 String temp = radioButton.getText().toString();
>                 crrtans=new ArrayList<String>(new ArrayList<String>(crrtans));
>                 if (temp.equals(crrtans.get(l))){
>                 TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                 txtRadio.setText("" + radioButton.getText() + " IS CORRECT");   
>                 txtRadio.setTextColor(Color.parseColor("#008000"));
>             }else{
>                 //RadioButton radioButton1 = (RadioButton) findViewById(checkedId);
>                    // Toast.makeText(Question.this, "" + radioButton.getText(), 2000).show(); 
>                     TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                     txtRadio.setText("" + radioButton.getText() + "is INCORRECT");
>                     txtRadio.setTextColor(Color.parseColor("#FF0000"));
>             }
>             }
>      });
>     Button nextBtn = (Button) findViewById(R.id.nxt_btn);
>     nextBtn.setOnClickListener(new Button.OnClickListener(){
>       public void onClick(View v){
>     //    btn_practicerg.clearCheck();
>           if (j == ques1.size() -1) {
>                 //finish();
>                 showAlert1();
>             }
>           else{ 
>             ++j;
>             TextView txtque = (TextView) findViewById(R.id.que_txt); 
>             txtque.setText(ques1.get(j));
>             ++k;
>             btn_practice1.setText(answ1.get((k*4)+0));
>             btn_practice2.setText(answ1.get((k*4)+1));
>             btn_practice3.setText(answ1.get((k*4)+2));
>             btn_practice4.setText(answ1.get((k*4)+3));
>           }
>           btn_practicerg.clearCheck();
>           btn_practicerg.setOnCheckedChangeListener(new OnCheckedChangeListener() {
>                 @Override
>                 public void onCheckedChanged(RadioGroup group, int checkedId) { 
>                     RadioButton radioButton = (RadioButton) findViewById(checkedId);
>                     String temp = radioButton.getText().toString();
>                     l++;
>                     if (temp.equals(crrtans.get(l))){
>                     TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                     txtRadio.setText("" + radioButton.getText() + " IS CORRECT");   
>                     txtRadio.setTextColor(Color.parseColor("#008000"));
>                 }else{
>                     //RadioButton radioButton1 = (RadioButton) findViewById(checkedId);
>                        // Toast.makeText(Question.this, "" + radioButton.getText(), 2000).show(); 
>                         TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                         txtRadio.setText("" + radioButton.getText() + " IS INCORRECT");
>                         txtRadio.setTextColor(Color.parseColor("#FF0000"));
>                 }
>                 }      
>          });
>      }
> });   
>     Button previousbtn = (Button) findViewById(R.id.prv_btn);
>     previousbtn.setOnClickListener(new Button.OnClickListener(){
>     public void onClick(View v){
>         if (j <= 0) {
>             Toast.makeText(Question.this, "First Question",Toast.LENGTH_SHORT).show();
>             } else {
>             --j;
>             TextView txtque = (TextView) findViewById(R.id.que_txt); 
>             txtque.setText(ques1.get(j));
>             --k;
>             btn_practice1.setText(answ1.get((k*4)+0));
>             btn_practice2.setText(answ1.get((k*4)+1));
>             btn_practice3.setText(answ1.get((k*4)+2));
>             btn_practice4.setText(answ1.get((k*4)+3));
>             }
>          btn_practicerg.clearCheck();
>          btn_practicerg.setOnCheckedChangeListener(new OnCheckedChangeListener() {
>                 @Override
>                 public void onCheckedChanged(RadioGroup group, int checkedId) { 
>                     RadioButton radioButton = (RadioButton) findViewById(checkedId);
>                     String temp = radioButton.getText().toString();
>                     l--;
>                     if (temp.equals(crrtans.get(l))){
>                     TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                     txtRadio.setText("" + radioButton.getText() + " IS CORRECT");   
>                     txtRadio.setTextColor(Color.parseColor("#008000"));
>                 }else{
>                     //RadioButton radioButton1 = (RadioButton) findViewById(checkedId);
>                        // Toast.makeText(Question.this, "" + radioButton.getText(), 2000).show(); 
>                         TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                         txtRadio.setText("" + radioButton.getText() + " IS INCORRECT");
>                         txtRadio.setTextColor(Color.parseColor("#FF0000"));
>                 }
>                 }      
>          });
>          }
>     });
>     } 
> ```
> 
> 日志猫

```
 E/AndroidRuntime(893): FATAL EXCEPTION: main
            E/AndroidRuntime(893): java.lang.ArrayIndexOutOfBoundsException
            E/AndroidRuntime(893):  at java.util.ArrayList.get(ArrayList.java:313)
            E/AndroidRuntime(893):  at 
         com.example.finalpractice.Question$LoadQuestions$2$1.onCheckedChanged(Question.java:243)
            E/AndroidRuntime(893):  at 
         android.widget.RadioGroup.setCheckedId(RadioGroup.java:172)
            E/AndroidRuntime(893):  at android.widget.RadioGroup.access$600(RadioGroup.java:52)
            E/AndroidRuntime(893):  at 
         android.widget.RadioGroup$CheckedStateTracker.onCheckedChanged(RadioGroup.java:342)
            E/AndroidRuntime(893):  at 
         android.widget.CompoundButton.setChecked(CompoundButton.java:127)
            E/AndroidRuntime(893):  at 
         android.widget.CompoundButton.toggle(CompoundButton.java:86)
            E/AndroidRuntime(893):  at android.widget.RadioButton.toggle(RadioButton.java:72)
            E/AndroidRuntime(893):  at 
         android.widget.CompoundButton.performClick(CompoundButton.java:98)
            E/AndroidRuntime(893):  at android.view.View$PerformClick.run(View.java:9080)
            E/AndroidRuntime(893):  at android.os.Handler.handleCallback(Handler.java:587)
            E/AndroidRuntime(893):  at android.os.Handler.dispatchMessage(Handler.java:92) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-19T15:55:30.460

就我而言，我有一个名为的单选组`rb`和其中的 2 个单选按钮 ( `rbY`, `rbN`)。

* * *

所以，这是我使用的实现`onClickListener`：

```
final RadioGroup rb = (RadioGroup) convertView.findViewById(R.id.creditcards);
                RadioButton rbY = (RadioButton) convertView.findViewById(R.id.radioButton);
                RadioButton rbN = (RadioButton) convertView.findViewById(R.id.radioButton2);

                final View finalConvertView = convertView;

                rbY.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        int selected = rb.getCheckedRadioButtonId();
                        RadioButton rbYes = (RadioButton) finalConvertView.findViewById(selected);
                        RadioButton rbN = (RadioButton) finalConvertView.findViewById(R.id.radioButton2);

                        if (rbYes.isSelected()) {
                            rbYes.setSelected(false);
                            rb.clearCheck();
                            rb.clearChildFocus(rbYes);
                        } else {
                            rbYes.setSelected(true);
                        }
                    }
                });

                rbN.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        int selected = rb.getCheckedRadioButtonId();
                        RadioButton rbNo = (RadioButton) finalConvertView.findViewById(selected);

                        if (rbNo.isSelected()) {
                            rbNo.setSelected(false);
                            rb.clearCheck();
                            rb.clearChildFocus(rbNo);
                        }
                        else {
                            rbNo.setSelected(true);
                        }
                    }
                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-28T15:24:42.097

我发现这很有用[https://github.com/ragunathjawahar/deselectable-radio-button](https://github.com/ragunathjawahar/deselectable-radio-button)。这是一个自定义单选按钮，可让您取消选择已选中的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-05T05:22:00.793

创建**clearRadioButtons**方法并调用 onCreate。

```
public void clearRadioButtons() {
    radiogroup.clearCheck();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T11:44:04.123

要选中/取消选中单选按钮，您可以使用`radioButton.setChecked(true);`（或 false 取消选中）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T07:07:37.053

更改您的代码，例如为 onCreate() 中的所有单选按钮查找 id，并将其设置为全局...

在下一个按钮的 onClickListener 中写入 radioButton.setChecked(false); 对于您使用的所有单选按钮...并删除行 btn_practicerg.clearCheck();

我试过这样工作正常..

# c# - 如何在 C# 中更改读取 RSS XML 的编码

> ID：14685882
> 
> 赞同：0
> 
> 时间：2013-02-04T11:31:20.570
> 
> 标签：c#, .net, windows-phone-7, encoding, rss

我想为我最喜欢的网站创建 RSS，但问题是它的 RSS XML 包含解析时破坏整个 RSS 的第一行。

我收到此错误：

`System does not support 'ISO-8859-2' encoding. Line 1, position 31.`

代码：

```
void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e) 
{
      SyndicationFeed feed;
      try {
           using (XmlReader reader = XmlReader.Create(e.Result)) { 
               // I WOULD LIKE to delete some rows from the Result
               feed = SyndicationFeed.Load(reader);
               lista.ItemsSource = feed.Items;
            }
       } catch (WebException we) { 
            MessageBox.Show("The internet connection is down.");
       }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:59:09.263

显然 WP7 中使用的 .NET 框架不支持除`UTF-8`和之外的其他编码`ISO-8859-1`。您可以做的是使用[此工具](http://www.hardcodet.net/2010/03/silverlight-text-encoding-class-generator)生成您自己的编码实现。

`StreamReader`然后，您通过使用自定义编码绕道读取流：

```
using ( StreamReader sReader = new StreamReader(e.Result, new CustomEncoding()) )
using ( XmlReader xReader = XmlReader.Create(sReader) ) 
{ 
    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:25:58.737

您可以尝试重新编码*e.Result*中的字符串，或许可以使用 .NET 中的[Encoding.Convert](http://msdn.microsoft.com/en-us/library/kdcak6ye.aspx)方法。但这可能还不够，因为我假设 xml 代码中有一个 encoding="ISO-8859-2" 属性。所以你可能还需要做一个字符串。用其他东西替换那个属性。

或者只是尝试用另一个属性替换该属性，看看是否有效。做一个 e.Result.Replace("ISO-8859-2", "UTF-8") 看看会发生什么。如果这不起作用，请尝试将字符串编码转换为另一个，然后再进行替换的第一个选项。

# ruby-on-rails - Rails 从 2.3.4 升级到 2.3.15 提供 ActionView::TemplateError

> ID：14685887
> 
> 赞同：0
> 
> 时间：2013-02-04T11:31:39.520
> 
> 标签：ruby-on-rails

我有一个在 Ruby[1.8.7] 和 Rails 2.3.4 上运行的应用程序，现在正在升级到 Rails 2.3.15（及其依赖项）。它开始在“生产”环境中抛出此错误

```
ActionView::TemplateError (mass_update_mygroups_url failed to generate from {:action=>"show", :my_group_name=>"Production", :id=>"show", :controller=>"admin/mygroups"}, expected: {:action=>"mass_update", :controller=>"admin/mygroups"}, diff: {:action=>"mass_update", :my_group_name=>"Production", :id=>"show"}) on line #64 of app/views/admin/mygroups/show.html.erb:
61: </div>
62: 
63: <div class="table-wrap">
64: <% form_remote_tag  :url =>mass_update_mygroups_path(@data,params.except(:mass_update,:service_profile,:app_details)), :loading=>"document.getElementById('lightboxs').style.display='inline';",:complete=>"constructCollapsableFieldsets();document.getElementById('lightboxs').style.display='none';", :html=>{:id=>"m_update", :name=>"m_update"} do %>
65: <fieldset id="f2" name="f1" style="border: 1px solid #ccc;" collapsed="true">
66: <legend style="margin-left: 20px; padding: 2px 10px 4px 5px; line-height:0px;" align="left">Mass Update</legend>
67: <div class="form-wrap">

    (eval):21:in `mass_update_mygroups_path'
    app/views/admin/mygroups/show.html.erb:64
    passenger (2.2.11) lib/phusion_passenger/rack/request_handler.rb:92:in `process_request'
    passenger (2.2.11) lib/phusion_passenger/abstract_request_handler.rb:207:in `main_loop'
    passenger (2.2.11) lib/phusion_passenger/railz/application_spawner.rb:418:in `start_request_handler'
    passenger (2.2.11) lib/phusion_passenger/railz/application_spawner.rb:358:in `handle_spawn_application'
    passenger (2.2.11) lib/phusion_passenger/utils.rb:184:in `safe_fork'
    passenger (2.2.11) lib/phusion_passenger/railz/application_spawner.rb:354:in `handle_spawn_application'
    passenger (2.2.11) lib/phusion_passenger/abstract_server.rb:352:in `__send__'
    passenger (2.2.11) lib/phusion_passenger/abstract_server.rb:352:in `main_loop'
    passenger (2.2.11) lib/phusion_passenger/abstract_server.rb:196:in `start_synchronously'
    passenger (2.2.11) lib/phusion_passenger/abstract_server.rb:163:in `start'
    passenger (2.2.11) lib/phusion_passenger/railz/application_spawner.rb:213:in `start'
    passenger (2.2.11) lib/phusion_passenger/spawn_manager.rb:262:in `spawn_rails_application'
    passenger (2.2.11) lib/phusion_passenger/abstract_server_collection.rb:126:in `lookup_or_add'
    passenger (2.2.11) lib/phusion_passenger/spawn_manager.rb:256:in `spawn_rails_application'
    passenger (2.2.11) lib/phusion_passenger/abstract_server_collection.rb:80:in `synchronize'
    passenger (2.2.11) lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    passenger (2.2.11) lib/phusion_passenger/spawn_manager.rb:255:in `spawn_rails_application'
    passenger (2.2.11) lib/phusion_passenger/spawn_manager.rb:154:in `spawn_application'
    passenger (2.2.11) lib/phusion_passenger/spawn_manager.rb:287:in `handle_spawn_application'
    passenger (2.2.11) lib/phusion_passenger/abstract_server.rb:352:in `__send__'
    passenger (2.2.11) lib/phusion_passenger/abstract_server.rb:352:in `main_loop'
    passenger (2.2.11) lib/phusion_passenger/abstract_server.rb:196:in `start_synchronously' 
```

如果我删除 Rails 2.3.15 并切换回 2.3.4，一切都会再次正常运行。更重要的是，在其他机器上一切正常，这次升级没有任何问题，所有页面即使在生产环境中也能正常工作。
这两个盒子的区别是一个是centOS 5.4（不工作）和centOS 6.3（工作）
除此之外所有的gem都是相同的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T17:15:38.480

通过将乘客版本也解析为 2.2.16 来解决此问题可能为时已晚

# sql - 按字段分组以获取特定值

> ID：14685888
> 
> 赞同：0
> 
> 时间：2013-02-04T11:31:41.333
> 
> 标签：sql, oracle, group-by, sqlplus

我们如何使用 group by 只考虑列的某个值

例如

如果该列具有类似的值，并且我只想使用 merge_ind = 'Y' 或 null 对记录进行分组，如果是 N，则记录应被视为单独的值

```
Merge1  Merge2  
A   Y  
A   Y  
A   Y  
B   Y  
B   Y  
B   Y    
C   N  
C   N  
C   N  
D   N  
D   N  
E   null  
E   null  
F   null  
F   null  
null    null 
```

o/p 应该是

```
count   Merge1  merge2  
3   A   Y   
3   B   Y  
1   C   N  
1   C   N  
1   C   N  
1   D   N  
1   D   N  
2   E   null  
1   F   null  
1   null    null 
```

我使用联合来实现它，但对性能不太满意。

谢谢阿里
_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:44:44.547

你可以这样做：

```
SQL>  with data as (select 'A' Merge1, 'Y' Merge2 from dual union all
  2  select 'A', 'Y' from dual union all
  3  select 'A', 'Y' from dual union all
  4  select 'B', 'Y' from dual union all
  5  select 'B', 'Y' from dual union all
  6  select 'B', 'Y' from dual union all
  7  select 'C', 'N' from dual union all
  8  select 'C', 'N' from dual union all
  9  select 'C', 'N' from dual union all
 10  select 'D', 'N' from dual union all
 11  select 'D', 'N' from dual union all
 12  select 'E', null from dual union all
 13  select 'E', null from dual union all
 14  select 'F', null from dual union all
 15  select 'F', null from dual union all
 16  select null, null from dual)
 17  select merge1, max(merge2), count(*)
 18    from (select merge1, merge2,
 19                 case when merge2 = 'Y' or merge2 is null then merge2 else to_char(rownum) end grp
 20            from data)
 21   group by merge1, grp
 22   order by merge1;

M M   COUNT(*)
- - ----------
A Y          3
B Y          3
C N          1
C N          1
C N          1
D N          1
D N          1
E            2
F            2
             1 
```

测试小提琴：[http ://sqlfiddle.com/#!4/b85cc/1](http://sqlfiddle.com/#!4/b85cc/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:09:28.677

尝试：

```
select Merge1, Merge2, count(*)
from table1
group by Merge1, Merge2, case when Merge2 = 'N' then to_char(rownum) else Merge2 end
order by Merge1 
```

[这是一个 sqlfiddle 演示](http://sqlfiddle.com/#!4/bf62d/11)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:44:43.187

经过一些相当大的混乱，我有一个可以完成这项工作的查询，尽管我可以发誓这个问题最初被标记为 mysql，不幸的是，这是一个 mysql 唯一的答案：

```
select count, merge1, merge2
from (
  select count(*) count, merge1, merge2,
  if(merge2 = 'Y' or merge2 is null, 0, n)
  from (
    select merge1, merge2,
    (@n := if(@n is null, 1, @n + 1)) n
    from t
  ) x
  group by 2, 3, 4
) y 
```

不是 Y 的值被视为具有自己的组的单独值。

它通过为每一行分配一个唯一编号来工作，当值不是 Y 时，它们也有选择地按该编号分组，从而为每个非 Y 行创建一个单独的组。

这是一个运行你的 dara 的查询的[sqlfiddle 。](http://sqlfiddle.com/#!2/48840/14)

# jquery - jQuery iframe.load 状态

> ID：14685890
> 
> 赞同：3
> 
> 时间：2013-02-04T11:31:48.247
> 
> 标签：jquery, iframe, load, http-headers

有没有办法可以找到 iframe 中是否存在 http 错误状态？

我正在使用动态构建的 url 加载 iframe，并在加载时删除加载 gif。

```
$("#reportFrame").load(function () {
        kendo.ui.progress($("#report-container"), false)
        $('#btnReportRefresh').removeAttr('disabled').removeClass('k-state-disabled');
        $(this).css('display', 'block');
    }); 
```

所有这些都可以，但是如果此页面内出现错误，我想显示我自己的错误文本，而不是 iframe 中显示的内容。

这可能吗？

**更新** 请注意，iframe 将始终加载到不同的域中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T01:20:58.060

我不相信这可能以您希望的方式实现，但是检查内容的间隔呢？就像是：

```
setInterval(function() {
  if ($("#reportFrame body").html() === "This is an error page") {
    // Do Something
  } else {
    //Do something else
}, 500) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T07:51:06.607

我忘记了这个问题，但这里有一个更新。

我走了类似这样的路线：

[根据内容调整 iframe 的大小](https://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content)

# xml - 仅允许在文档开头的 XML 声明

> ID：14685893
> 
> 赞同：6
> 
> 时间：2013-02-04T11:31:54.783
> 
> 标签：xml, wordpress, feed, feedburner

我今天的博客提要显示错误：

> 此页面包含以下错误：
> 
> 第 2 行第 6 列的错误：仅在文档开头允许 XML 声明
> 
> 下面是第一个错误之前的页面渲染

我的博客提要： http: [//feeds.feedburner.com/klassicblog](http://feeds.feedburner.com/klassicblog)

我的博客：[http ://blog.klassicweb.com](http://blog.klassicweb.com)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2019-09-13T15:55:11.807

这是我找到的解决方案首先，您在 wordpress 根目录上创建一个 php 文件（whitespacefix.php），其中包含以下内容。

```
<?php
function ___wejns_wp_whitespace_fix($input) {
    $allowed = false;
    $found = false;
    foreach (headers_list() as $header) {
        if (preg_match("/^content-type:\\s+(text\\/|application\\/((xhtml|atom|rss)\\+xml|xml))/i", $header)) {
            $allowed = true;
        }
        if (preg_match("/^content-type:\\s+/i", $header)) {
            $found = true;
        }
    }
    if ($allowed || !$found) {
        return preg_replace("/\\A\\s*/m", "", $input);
    } else {
        return $input;
    }
}
ob_start("___wejns_wp_whitespace_fix");
?> 
```

`<?php`然后打开 index.php 文件并在标记后添加以下行

```
include('whitespacefix.php'); 
```

[从这里](https://www.asce4s.me/fix-wordpress-sitemap-error/)引用

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-04T11:34:13.783

您的 xml 文档以换行符开头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-12T19:51:41.387

您页面上的每个页面（包括站点地图）在开头都包含空行。（您可以查看 HTML 源代码）您应该删除此行以修复站点地图。您可以尝试以下步骤：

**检查 wp-config.php 文件中括号部分之外的空白行。**

**检查主题的 functions.php 文件中括号部分之外的空白行。**

**一个一个地禁用插件并重新验证，直到您隔离导致问题的那个（如何检查插件冲突）**

请注意，所有 PHP 代码文件 - 模块、包含等（例如 wp-config.php、functions.php、...）中都应省略最后的 php ?>。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-01T01:04:34.023

如果您使用的是 wordpress，functions.php 文件的最后必须有 1 个以上的空白行。

只需删除这些空白行，错误就会消失。

如果您想了解有关错误的更多信息，请阅读本文： [http ://www.am22tech.com/fix-xml-declaration-rss-feed-error/](http://www.am22tech.com/fix-xml-declaration-rss-feed-error/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-18T13:23:03.663

您的主题或插件中包含的文件之一在开始前有一个空行

首先，停用所有插件，并尝试加载您的 sitemap.xml 链接。如果它现在可以工作，那么您的插件之一就是罪魁祸首。如果还是不行，那就继续...

其次，浏览构成 WordPress 主题的每一个 .php 文件。寻找任何起点

三、重新安装WordPress核心安装。如果仍然无法正常工作，请联系开发人员深入了解您的源代码。

# c# - Webbrowser 在圆角边框中显示角

> ID：14685894
> 
> 赞同：1
> 
> 时间：2013-02-04T11:31:56.640
> 
> 标签：c#, wpf, browser

我有以下代码 -

```
<Border Grid.Column="1" Grid.Row="1" Name="mask" CornerRadius="20" Height="auto" Width="auto" BorderThickness="1"
    BorderBrush="Black">
                        <WebBrowser Name="webBrowser" Source="http://www.google.com" Margin="1" />
                </Border> 
```

它提供了圆形边界，但 webbrowser contant 仍然显示角落。我想将多余的角剪辑到边界。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:18:14.947

不幸的是，WPF WebBrowser 不是正确的 WPF 控件，即使它位于 System.Windows.Controls 命名空间中。它只是 IE ActiveX 控件的包装。所以你不能应用样式，剪掉它的角落，改变控制模板，等等。所有 WPF 可以用 WebBrowser 做的就是改变它的大小和位置。我认为那里有一些技巧，但它肯定不会像设置属性那么容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:46:55.167

行。据我所知， UIElement 具有 Clip 属性，因此您可以指定要剪辑的元素

```
<WebBrowser Name="webBrowser" Source="http://www.google.com" Margin="1">
<WebBrowser.Clip>
<Border Grid.Column="1" Grid.Row="1" Name="mask" 
CornerRadius="20" Height="auto" 
Width="auto" BorderThickness="1" />
</WebBrowser.Clip>
</WebBrowser> 
```

# linux - 有没有办法知道 Linux 中的 init 脚本存储在哪里？

> ID：14685898
> 
> 赞同：4
> 
> 时间：2013-02-04T11:32:17.887
> 
> 标签：linux, bash, shell, init, init.d

正如我在标题中所问的那样，我正在寻找一个脚本/命令来找到正确的目录（通常是`/etc/init.d`or `/etc/rc.d/init.d`）。现在我正在使用

```
 dirname `find / -name acpid 2> /dev/null | grep /etc/` 
```

但有时我会得到不止一个结果（可能有些结果是链接）。有什么建议吗？

我使用 acpid 是因为它是一个脚本，应该存在于几乎所有非史前发行版中。如果有人对更好的脚本有建议，请告诉我，谢谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:19:51.137

我相信您的方法非常好，因为启动脚本的位置是发行版可靠的。只需添加*-type f*选项即可从结果中排除链接。

```
INITDIR=`find / -type f -name acpid 2> /dev/null | grep /etc/` 
```

# java - 使用先前由 maven 构建的依赖项在 IntelliJ 中构建单个类

> ID：14685902
> 
> 赞同：2
> 
> 时间：2013-02-04T11:32:44.867
> 
> 标签：java, maven, build, intellij-idea

我有一个使用 Maven 构建的应用程序，并且正在使用 IntelliJ IDEA。Maven 和 IntelliJ 都将类构建到同一个目标文件夹中，但是每当我选择在 IntelliJ 中重建单个类时，它都会抱怨它找不到它的依赖项，即使 Maven 刚刚构建它们并且它们位于输出文件夹中。如果我在 IntelliJ 中进行完全重建，它将构建类。

如何让 IntelliJ 使用 maven 构建的类作为它正在构建的单个类的依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:46:38.757

如果它是纯粹的类文件，我不确定如果它们都在您配置 IntelliJ 以用于项目的编译类的目录下，为什么会抱怨。

更常见的是，我遇到的是构建创建了类文件以外的一些东西，你必须创建一个指向其他东西的库，以便 IntelliJ 知道它们。另一个问题是资源文件，因为这些文件是相对于项目的工作目录而寻找的，默认情况下，通常是项目的根目录，这很少是正确的，因为大多数资源都被转储在“build”或“deploy”目录下。

如果一切都失败了，您应该能够吐出详细的 Maven 构建信息，并将它在编译时使用的类路径与 IntelliJ 用来尝试找出它们不同之处的类路径进行比较。

# php - 来自xml的PHP增量/减量值

> ID：14685904
> 
> 赞同：2
> 
> 时间：2013-02-04T11:32:51.397
> 
> 标签：php, xml, increment, decrement

这是我的xml。

```
 <episodes>
        <episode>
           <series_name>Test</series_name>
            <season_number>1</season_number>
            <episode_number>10</episode_number>
            <episodes_in_season>12</episodes_in_season>
            <notes>Testing</notes>
         </episode>
    </episodes> 
```

我想要做的是获取季节/剧集的数量并从该xml中增加或减少我，然后将其保存回来（我的页面上有用于season_number和episode_number的+/-按钮，我正在使用`$_post对于那个按钮）。

到目前为止，这是我的代码。

```
$xmlDoc = new DOMDocument();
$xmlDoc->load($user);
$xpath = new DOMXpath($xmlDoc);
$test = $xmlDoc->getElementsByTagName('episode')->item(0);

// example for episode number increment / decrement (what i think)

   $number = $test->childNodes->item(2); 

    $increment = $number + 1; 
    $decrement = $number - 1; // example 
```

我被困在这里，我没有完成它，因为我看不到发生了什么，`$number`因为我收到此错误**DOMElement 类的对象无法转换为 int。**

我也试过了， `(int)$number = $test->childNodes->item(2);`但没有运气。而且我是 php 的初学者，所以我可能把这件事弄错了。

**编辑：**

```
 $eNumber = $xpath->query('episode_number', 'episode')->item(0);
      $esNumber = $xpath->query('episodes_in_season', 'episode')->item(0);
     if ($eNumber == $esNumber)
     {
        echo "You have reached the max episode in season";

     }
     else
     {

     $eNumber->nodeValue++;
     } 
```

它总是说我已经达到了最大情节

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:35:09.240

您正在使用的[DOMNodelist::item()](http://www.php.net/manual/en/domnodelist.item.php)方法不返回值（既不是字符串也不是整数），它返回一个节点：

> `DOMNode DOMNodelist::item ( int $index )`

因此（假设您的 Xpath 查询是正确的），您需要访问它的[nodeValue](http://www.php.net/manual/en/class.domnode.php#domnode.props.nodevalue)属性来读取数字。然后，如果您转换为整数，请确保在将结果分配给变量*之前执行此操作：*

```
$number = (int)$test->childNodes->item(2)->nodeValue; 
```

...尽管通常没有必要，因为 PHP 会在您进行数学运算后立即为您完成：

```
$foo = '33';
var_dump($foo); // string(2) "33"
$foo++;
var_dump($foo); // int(34) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:50:19.523

如果`$number`是`DOMElement`对应于episode_number，请执行以下操作以增加：

```
$number->nodeValue++; 
```

顺便说一句，`$number = $test->childNodes->item(2);`我建议 XPath 始终处理正确的元素，而不是：

```
$number = $xpath->query('episode_number', $test)->item(0); 
```

# java - 使用 webdriver 找不到元素

> ID：14685905
> 
> 赞同：1
> 
> 时间：2013-02-04T11:32:55.360
> 
> 标签：java, selenium, webdriver, selenium-webdriver, xpath

有一个网页元素：

```
<select id="sel" onchange="refresh('sel')">
  <option value="1"> A</option>
  <option value="2"> B</option>
</select> 
```

因为它有`onchange`，我无法选择该选项。我的代码是这样的：

```
new Select(driver.findElement(By.id("sel"))).selectByValue("1"); 
```

但它不能工作。有可能让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:24:47.693

使用 xpath 而不是使用 id。因为根据代码，一旦您选择了值，它将刷新屏幕。尝试使用 xpath 并在 xpath 之后等待一段时间以进行刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:29:44.583

这就是我将尝试做的：（C#）

```
IWebElement element = driver.FindElement(By.XPath(XPATH_FOR_OPTION));
((IJavaScriptExecutor)driver).ExecuteScript("arguments[0].fireEvent('onclick');", element); 
```

# ios - iOS6 上的虚拟键盘错误（使用 FPC）

> ID：14685906
> 
> 赞同：0
> 
> 时间：2013-02-04T11:33:00.370
> 
> 标签：ios, lazarus, virtual-keyboard, fpc

我对仅在 iOS 6 上出现的虚拟键盘有疑问。

我有一个 UITextField 用于从虚拟键盘捕获键盘输入，但在 iOS 6 上它只显示一次，在键盘第一次关闭后它不再显示。

这是我用来显示带有键盘的 TextField 的代码。

```
if not Assigned( keysTextField ) Then
begin
  keysTextFrame := wndHandle.frame;
  keysTextField := zglCiOSTextField.alloc().initWithFrame(keysTextFrame );
  keysTextTraits := keysTextField;
  with keysTextField, keysTextTraits do
    begin
      setDelegate( appDelegate );
      setAutocapitalizationType( UITextAutocapitalizationTypeNone );
      setAutocorrectionType( UItextAutocorrectionTypeNo );
      setKeyboardAppearance( UIKeyboardAppearanceDefault );
      setReturnKeyType( UIReturnKeyDone );
      setSecureTextEntry( FALSE );
      addTarget_action_forControlEvents( appDelegate, objcselector('textFieldEditingChanged' ), UIControlEventEditingChanged );
    end;
  keysTextField.setText( utf8_GetNSString( Text ) );
  wndHandle.addSubview( keysTextField );
end;

if appFlags and APP_USE_ENGLISH_INPUT > 0 Then
  keysTextTraits.setKeyboardType( UIKeyboardTypeASCIICapable )
else
  keysTextTraits.setKeyboardType( UIKeyboardTypeDefault );

wndHandle.addSubview( keysTextField );
keysTextField.becomeFirstResponder(); 
```

这是关闭它的代码：

```
if Assigned( keysTextField ) Then
  keysTextField.removeFromSuperview(); 
```

* * *

任何人都知道我可以尝试解决这个问题吗？我第二次检查了 keyTextField.isFirstResponder() 返回 true，所以它应该可以工作（并且在 iOS < 6 中工作）。

谢谢

塞萨尔·瓦根海默

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T02:50:57.707

修复了更改命令

`keysTextField.resignFirstResponder();`从`textFieldShouldEndEditing`到`textFieldDidEndEditing`！

# azure-table-storage - InsertOrMerge 和 InsertOrReplace TableOperations 之间的区别

> ID：14685907
> 
> 赞同：37
> 
> 时间：2013-02-04T11:33:14.043
> 
> 标签：azure-table-storage

我正在使用 Azure 表存储来存储数据。我对何时使用[insertOrReplace](https://docs.microsoft.com/en-us/java/api/com.microsoft.azure.storage.table.tableoperation.insertorreplace?view=azure-java-legacy)和[insertOrMerge](https://docs.microsoft.com/en-us/java/api/com.microsoft.azure.storage.table.tableoperation.insertormerge?view=azure-java-legacy)感到困惑。我正在使用 Azure SDK 1.7。

我对 insertOrReplace 的理解是，如果实体存在，则用新实体替换先前实体的整个属性。如果新实体未定义属性或属性值为 null，则更新时将删除该属性。

而在 insertOrMerge 中，即使新实体没有在新实体中定义新属性，也会保留旧属性。我的理解正确吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-06T15:55:45.037

是的！你的理解是正确的。

`connectionString`您可以通过使用正确的和运行以下 C# 代码来测试它`tableName`：

```
class MyEntity : TableEntity
{
  public string MyString { get; set; }
}

class MySecondEntity : TableEntity
{
  public string MySecondString { get; set; }
}

public void MergeTest()
{
  CloudStorageAccount storageAccount = CloudStorageAccount.Parse(connectionString);
  CloudTableClient tableClient = storageAccount.CreateCloudTableClient();
  CloudTable table = tableClient.GetTableReference(tableName);
  table.CreateIfNotExists();
  // Insert an entity
  table.Execute(TableOperation.Insert(new MyEntity()
  { PartitionKey = "partition", RowKey = "row", MyString = "randomString" }));
  // Merge with a different class
  table.Execute(TableOperation.InsertOrMerge(new MySecondEntity()
  { PartitionKey = "partition", RowKey = "row", MySecondString = "randomSecondString" }));
} 
```

您最终应该在表中得到一个具有以下属性的实体：

```
{
  PartitionKey = "partition",
  RowKey = "row",
  MyString = "randomString",
  MySecondString = "randomSecondString"
} 
```

# r - 用循环填充矩阵

> ID：14685911
> 
> 赞同：6
> 
> 时间：2013-02-04T00:16:53.373
> 
> 标签：r, simulation, matrix

我正在尝试使用循环使用 mvn 协变量来创建矩阵`n`。很简单，但到目前为止还没有工作......这是我的代码：`k``k`

```
n=1000
k=5
p=100
mu=0
sigma=1
x=matrix(data=NA, nrow=n, ncol=k)

for (i in 1:k){
        x [[i]]= mvrnorm(n,mu,sigma)
       } 
```

少了什么东西？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-04T01:00:13.663

我在这里看到几件事：

1.  您可能需要设置可复制性的随机种子 ( `set.seed(20430)`)。这意味着每次运行代码时，都会得到完全相同的一组伪随机变量。
2.  接下来，您的数据将只是独立变量；它们实际上不会有任何多元结构（尽管这可能是您想要的）。一般来说，如果你想生成*多变量*数据，你应该使用[MASS](http://cran.r-project.org/web/packages/MASS/index.html)包中的[?mvrnorm 。](http://stat.ethz.ch/R-manual/R-patched/library/MASS/html/mvrnorm.html)（有关更多信息，请参见[此处](https://stats.stackexchange.com/questions/38856/how-to-generate-correlated-random-numbers-given-means-variances-and-degree-of)。）
3.  作为一个小点，如果你想要*标准*的正常数据，你不需要指定`mu = 0`and `sigma = 1`，因为它们是`rnorm()`.
4.  您不需要循环来填充 R 中的矩阵，只需生成任意数量的值并使用`data=`函数中的参数直接添加它们`matrix()`。如果您真的致力于使用循环，您可能应该使用双循环，以便您循环遍历列，并在每个循环中循环遍历行。（请注意，这是在 R 中编码的一种非常低效的方式——尽管我一直在做这样的事情 ;-)。
5.  最后，我不知道`p`你的代码应该做什么。

这是执行您似乎想要做的事情的基本方法：

```
set.seed(20430)
n   = 1000
k   = 5
dat = rnorm(n*k)
x   = matrix(data=dat, nrow=n, ncol=k) 
```

如果你真的想使用循环，你可以这样做：

```
mu    = 0
sigma = 1
x     = matrix(data=NA, nrow=n, ncol=k)

for(j in 1:k){
   for(i in 1:n){
        x[i,j] = rnorm(1, mu, sigma)
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-29T03:03:02.427

先定义矩阵

```
E<-matrix(data=0, nrow=10, ncol=10); 
```

运行两个循环来迭代 i 的行和 j 的列，我的是一个可交换的相关结构

```
for (i in 1:10)
{ 
  for (j in 1:10) 
  {
    if (i==j) {E[i,j]=1}
    else {E[i,j]=0.6}
  }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-04T19:16:39.317

```
A=c(2,3,4,5);# In your case row terms
B=c(3,4,5,6);# In your case column terms
x=matrix(,nrow = length(A), ncol = length(B));
for (i in 1:length(A)){
     for (j in 1:length(B)){
          x[i,j]<-(A[i]*B[j])# do the similarity function, simi(A[i],B[j])       
     }
}
x # matrix is filled 
```

我从我的问题的角度思考。

# jquery-ui - 将 jquery ui datepicker 上的 maxDate 设置为某个日期

> ID：14685913
> 
> 赞同：19
> 
> 时间：2013-02-04T11:33:25.240
> 
> 标签：jquery-ui, datepicker

我想将`maxDate`jQuery UI设置为，`18/02/2013`但在尝试后，它只能让我将其更新为今天的日期。

我该怎么做呢？

```
$("#datepicker'.$row['id'].'").datepicker({
    minDate: -0, 
    dateFormat: \'dd/mm/yy\',
    maxDate: 18/02/2013
}); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-04T11:37:01.083

试试这个：

```
$("#datepicker").datepicker({ minDate: -0, maxDate: new Date(2013, 1, 18) }); 
```

如果您想使用硬编码日期，请使用该`new Date(2013, 1, 18)`模式。

如果要使用通用模式，请使用`"+1D +1M +1Y"`.

参考链接：http: [//jsfiddle.net/pradkumar_n/wQe8c/](http://jsfiddle.net/pradkumar_n/wQe8c/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-01T10:30:08.637

```
$( "#datepicker" ).datepicker( { minDate: 0, maxDate: 365 });
//365 Days 
```

您也可以使用天数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-18T12:00:12.680

通过将结束日期选择器范围从今天设置为 7 天以上，这对我有用。

```
$endDateCtrl.datepicker("option", "minDate", -0);
$endDateCtrl.datepicker("option", "maxDate", '+7D');
$endDateCtrl.datepicker(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-08T10:24:38.260

我正在使用事件函数设置最大日期：

```
 $('#datepicker').datepicker({
        changeMonth: true,
        changeYear: true,
        yearRange: "-9:+1",// you can define range of year here.
        dateFormat: 'MM yy',
        onClose: function () {

            var iMonth = $("#ui-datepicker-div .ui-datepicker-month :selected").val();

            var iYear = $("#ui-datepicker-div .ui-datepicker-year :selected").val();

            $(this).datepicker('setDate', new Date(iYear, iMonth, 1));

        },
        beforeShow: function () {
            var selDate = $(this).val();
            if ((selDate.length) > 0) {
                iYear = selDate.substring(selDate.length - 4, selDate.length);
                iMonth = jQuery.inArray(selDate.substring(0, selDate.length - 5),

                $(this).datepicker('option', 'monthNames'));
                $(this).datepicker('option', 'defaultDate', new Date(lastYear, iMonth, 1));
                $(this).datepicker('option', 'maxDate', new Date(lastYear, 12, 1));
                $(this).datepicker('setDate', new Date(lastYear, iMonth, 1));
            }
        }
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-21T05:58:05.220

```
$(document).ready(function() {
 $( "#dob" ).datepicker({
       maxDate: -0,
      changeMonth:true,
      changeYear:true,
      yearRange:"-100:+100",
      dateFormat: "yy-mm-dd",
    });
}); 
```

# python - python中的选择排序

> ID：14685915
> 
> 赞同：0
> 
> 时间：2013-02-04T11:33:27.067
> 
> 标签：python, sorting, selection-sort

这是选择排序的代码，但它不打印排序列表。我该如何展示它？

```
badlist = input("Enter list: ")  
def select(badlist):  
        l = list[:]  
        sorted = []  
        while len(l):  
            lowest == l[0]  
            for x in l:  
                if x < lowest:  
                    lowest = x  
            sorted.append(lowest)  
            l.remove(lowest)  
        return sorted  
select(badlist) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:39:44.303

如果您输入`select(badlist)`Python shell 应该会显示结果，但是如果您将脚本作为文件运行，则需要使用`print`语句 as `print select(badlist)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:37:56.163

扩展我的评论：

为什么不简单地使用内置[`sorted(list)`](http://docs.python.org/2/library/functions.html#sorted)然后你可以让你的整个代码是：

`print sorted(input("Enter list: "))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:34:05.800

使用[`print`](http://docs.python.org/2/reference/simple_stmts.html#the-print-statement).

如果您使用的是 Python 2.x `print`，则为关键字：

```
result = select(badlist)
print result 
```

在 Python 3.x`print`中是一个函数，您必须使用括号：

```
result = select(badlist)
print(result) 
```

您还有至少两个其他错误：

*   您的函数参数被调用`badlist`，但您从不使用它。
*   `==`运算符是相等比较。你需要`=`分配。

此外，您的算法将非常慢，需要 O(n ² ) 操作。

# javascript - 根据使用 jquery 的按钮隐藏和显示 div

> ID：14685916
> 
> 赞同：2
> 
> 时间：2013-02-04T11:33:39.080
> 
> 标签：javascript, jquery, html

我需要根据使用 html 和 jquert 的按钮来隐藏和调整 div

是按钮名称=显示状态我单击按钮更改为名称=隐藏并显示div，同样的功能也相反

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:35:43.693

```
You could do something like this (Note the custom display attribute):

$("#btn").click(function() {
   var item = $("input[name=yourInput]");

   if (item.attr("display")) {
      item.show();
      item.attr("display", false);
   } else {
        item.hide();
        item.attr("display", true);
    }
});

<input name="yourInput" display="true" /> 
```

[http://jsfiddle.net/Jrz5Y/1/](http://jsfiddle.net/Jrz5Y/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:35:54.073

您可以创建一个设置为默认值的布尔变量，并在您单击按钮时将其更改为反向值。

根据布尔值的状态，您可以在方法中执行正确的路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:44:19.947

你可以用这个

```
<script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
    <script type="text/javascript">

    function ShowHide()
    {
            if ($("#divdata").css('display') == 'none'){
            $("#divdata").show();
            $("#btnClick").val("Hide");
        }
        else{
            $("#divdata").hide();
            $("#btnClick").val("Show Status");
        }
}

</script> 
```

你的 div 会是这样的。

```
<div id="divdata" style="display:none">
I have to show and hide this div.
</div> 
```

按钮将是这样的。

```
<input id="btnClick" type="button" value="Show Status"   onclick="ShowHide()" /> 
```

我希望它会起作用。

# jdbc - Camel：聚合器不保留 Exchange 属性

> ID：14685918
> 
> 赞同：2
> 
> 时间：2013-02-04T11:33:47.227
> 
> 标签：jdbc, properties, exchange-server, aggregator

我正在使用由 jdbc 支持的**camel:aggregate**，它似乎没有保存 Exchange 属性。例如，如果我配置了以下路由，并且一旦聚合完成并且在执行 camel:to(log) 强制聚合在重新启动时从数据库中检索数据之前就停止执行，那么 camel:to(log) 不会打印属性**myProperty**

```
<camel:route id="myRoute">
    <camel:from uri="direct:in"/>

    <camel:setProperty propertyName="myProperty">
        <camel:constant>myPropertyValue</camel:constant>
    </camel:setProperty>

    <camel:aggregate strategyRef="myStrategy" aggregationRepositoryRef="myAggregationRepo" discardOnCompletionTimeout="true" completionTimeout="86400000" >
        <camel:correlationExpression>
            <camel:simple>${property.partlastcorrelationkey}</camel:simple>
        </camel:correlationExpression>
        <camel:completionPredicate>
            <camel:simple>${property.partlastcorrelationwaitmore} == false</camel:simple>
        </camel:completionPredicate>

        <camel:to uri="log:com.test?showAll=true"/>

    </camel:aggregate>
</camel:route> 
```

我的聚合存储库是这样配置的：

```
<bean id="myAggregationRepo" class="org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository" init-method="start" destroy-method="stop">
    <property name="transactionManager" ref="transactionManager"/>
    <property name="repositoryName" value="PROC_AGG"/>
    <property name="dataSource" ref="oracle-ds"/>
    <property name="lobHandler">
        <bean class="org.springframework.jdbc.support.lob.OracleLobHandler">
            <property name="nativeJdbcExtractor">
                <bean class="org.springframework.jdbc.support.nativejdbc.CommonsDbcpNativeJdbcExtractor"/>
            </property>
        </bean>
    </property>
</bean> 
```

**使用聚合器时如何保存属性？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:49:12.473

我会自己回复。正如代码中所见，JdbcCamelCodec 在使用数据库支持聚合器时不允许保存属性：

```
public final class JdbcCamelCodec {
    public byte[] marshallExchange(CamelContext camelContext, Exchange exchange) throws IOException {
        // use DefaultExchangeHolder to marshal to a serialized object
        DefaultExchangeHolder pe = DefaultExchangeHolder.marshal(exchange, false);
        // add the aggregated size property as the only property we want to retain
        DefaultExchangeHolder.addProperty(pe, Exchange.AGGREGATED_SIZE, exchange.getProperty(Exchange.AGGREGATED_SIZE, Integer.class));
        // add the aggregated completed by property to retain
        DefaultExchangeHolder.addProperty(pe, Exchange.AGGREGATED_COMPLETED_BY, exchange.getProperty(Exchange.AGGREGATED_COMPLETED_BY, String.class));
        // add the aggregated correlation key property to retain
        DefaultExchangeHolder.addProperty(pe, Exchange.AGGREGATED_CORRELATION_KEY, exchange.getProperty(Exchange.AGGREGATED_CORRELATION_KEY, String.class));
        // persist the from endpoint as well
        if (exchange.getFromEndpoint() != null) {
            DefaultExchangeHolder.addProperty(pe, "CamelAggregatedFromEndpoint", exchange.getFromEndpoint().getEndpointUri());
        }
    return encode(pe);
} 
```

基本上，问题出在这一行，其中**false**表示：不保存属性。

```
DefaultExchangeHolder pe = DefaultExchangeHolder.marshal(exchange, false); 
```

标题和正文是唯一存储在数据库中的。

# java - 将 wms 和 wfs 与 osmdroid 或任何其他基于开源 Java 的库一起使用

> ID：14685919
> 
> 赞同：1
> 
> 时间：2013-02-04T11:33:47.420
> 
> 标签：java, android, android-mapview, kml, wms

我被要求开发一个使用来自 geoserver 的 wms-wfs 源的 android 地图应用程序。

为了更清楚我想完成

1.  发送 wms 'getmap' 请求，然后获取图像，然后将其作为叠加层附加到地图视图。
2.  当触摸 wms 覆盖时（我将获取触摸点的 x 和 y 值），然后将包含 x 和 y 的“getfeatureinfo”请求发送到地理服务器。Geoserver 将寻找其坐标对应于用户接触点的几何图形。如果有几何，geoserver 将发送一个 xml 文件，
3.  获取 xml 响应（kml 或 xml 文件，我不确定差异）然后解析此 xml 文件以获取接触点的几何信息。此 xml 可能包含此信息

    *   地理点（这可能是一个点、一条道路、一个 poligone 或一个 multipoligone...
    *   几何图形的显示名称（城市名称、道路名称等）
4.  根据此 xml 文件创建适当的几何图形。

    我知道我需要太多帮助。感谢您的任何回复（我可能会为该领域的任何新人解释可能的方式，也许这个问题会有所帮助）

顺便说一句，我在这段时间找到了一些资源。据说它们支持 wms、wfs 服务。让我分享它们：

*   [nutiteq](http://www.nutiteq.com/)这是一个商业图书馆
*   [openscales](http://openscales.org/)是一个基于 actionscript 的库
*   我找不到任何示例的 mapsforge

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:20:53.203

不完全确定你在上面寻找什么，但如果你能展示一些你尝试过/使用过的东西，以及你遇到问题的确切位置，那将会有所帮助。为了提供帮助，以下是我的谷歌搜索结果：

1.  在此处查找适用于 Android 的简单 KML 解析器示例：[http ://www.java2s.com/Open-Source/Android/android-core/platform-sdk/com/android/ddmuilib/location/KmlParser.java.htm](http://www.java2s.com/Open-Source/Android/android-core/platform-sdk/com/android/ddmuilib/location/KmlParser.java.htm)

2.  以下是 Android 上 XML 解析的示例：[http ://www.warriorpoint.com/blog/2009/07/19/android-simplified-source-code-for-parsing-and-working-with-xml-data-和-web-services-in-android/](http://www.warriorpoint.com/blog/2009/07/19/android-simplified-source-code-for-parsing-and-working-with-xml-data-and-web-services-in-android/)

3.  这是关于 Android 上 mapview 的教程：[https ://developers.google.com/maps/documentation/android/v1/hello-mapview](https://developers.google.com/maps/documentation/android/v1/hello-mapview)

请用更多细节更新您的问题，我希望您能得到更好的答复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:32:45.753

查看 Esri 的适用于 Android 的 ArcGIS SDK。它支持渲染 WMS 层（虽然不确定它与更高级的东西的关系）：

[适用于 Android 的 ArcGIS 运行时 SDK](http://resources.arcgis.com/content/arcgis-android/sdk)

# node.js - Nginx + (nodejs, socketio, express) + php 站点

> ID：14685924
> 
> 赞同：5
> 
> 时间：2013-02-04T11:34:09.623
> 
> 标签：node.js, nginx, express, websocket, socket.io

我正在开发一个完全 js、HTML5 画布游戏，并希望它是“实时的”。根据我的研究，我发现 node.js 是一个令人兴奋的前景，所以我在我的 ubuntu 12 网络服务器上使用 socket.io、express 等配置了它。

我是一名程序员，但只是网络服务器后端领域的新手，这就是我寻求您帮助的原因。我对整个系统模型感到困惑，想弄清楚它是如何工作的。也许，我在短时间内阅读了太多文章。

首先：我在我的网络服务器上运行 nginx 1.2.x。据我所知，nginx 正在处理 rquests，它专用于端口 80（对我而言）和服务 http 请求（也使用 php-fpm 服务 php）。再说一次，我在端口 8080 上有一个成功运行的 nodejs 服务器。我想要通过 websocket 连接（由于它的性质和协议），因为 nginx 不支持 websocket 但我对发生的事情感到困惑。

如果我去 http//mydomain.tld:8080，这是否会通过节点服务器并远离 nginx？在这种情况下，连接可以通过 websocket 而不是回退到 xhr 或其他任何东西（我不想要它，因为可伸缩性），对吧？

那么我应该怎么做才能在 http//mydomain.tld/game/ 产生相同的效果？只是将 nginx.conf 中的请求代理到节点服务器？像：

```
 # if a file does not exist in the specified root and nothing else is definded, we want to serve the request via node.js
try_files   $uri    @nodejs;          

location @nodejs
{       
     proxy_pass  127.0.0.1:8080;
     break;
} 
```

来自：[https ://stackoverflow.com/a/14025374/2039342](https://stackoverflow.com/a/14025374/2039342)

当我们需要通过 nginx 进行 websocket 通信时，它是否是一个很好的代理解决方法？当我们想要一个常规的 php 站点和其中的 socket.io 连接时，我们会这样做吗？到这个时候，我认为重点是在端口 80 上运行流量，并将标准请求和 websocket 流量分开。就我而言，最简单的解决方案是什么？

[http://www.exratione.com/2012/07/proxying-websocket-traffic-for-nodejs-the-present-state-of-play/](http://www.exratione.com/2012/07/proxying-websocket-traffic-for-nodejs-the-present-state-of-play/)在这篇文章中我发现 HAProxy 可能是我直到 nginx 1.3 的那个， 是吗？

我知道我的问题有点混乱，但我正在努力理解确切的技术。请给我一些提示| 文章阅读 | 起点 | 基本配置。

PS.：我在这里阅读了大部分相关主题。

Ps2.：看起来不那么愚蠢：我已经在red5（基于java的Flash服务器）+ Flash中完成了这个游戏，所以我只想重新考虑并使用适当的当前技术发布它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T13:59:11.677

最后，我的基本问题是以正确的方式配置 nginx。

首先，我使用 nginx_tcp_proxy_module 重新安装了 nginx 作为补丁版本。

下一步是设置正确的配置来处理请求：通过 http 或 tcp。我希望从 webroot 正常提供标准文件，只是 node.js 的游戏逻辑（以及 socket.io js 本身 ofc）和 php_fpm 的 .php 文件。

所以我最终得到了以下工作的 nginx 设置：

```
user  www-data;
worker_processes  16;

events {
    worker_connections  1024;
}

http {
    upstream node-js-myapp {
        server 127.0.0.1:3000;
    }

    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;
    keepalive_timeout  65;
    gzip  on;

    server {
        listen          80;
        server_name    domain.xx;  # Multiple hostnames seperated by spaces
        root            /var/www/domain.xx; # Replace this
        charset         utf-8;
        access_log  /var/log/nginx/domain.xx.access.log  combined;
        error_log   /var/log/nginx/domain.xx.error.log;

        location ~ \.php$ {
                fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name; 
                include /etc/nginx/conf.d/php_fpm; # Includes config for PHP-FPM (see below)
        }

        location / {
            index  index.html index.htm;
        }

        location ^~ /socket.io/ {
            try_files $uri @node-js-myapp;
        }

        location /status {
            check_status;
        }

        location @node-js-myapp { 
          proxy_set_header X-Real-IP  $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header Host $http_host;
          proxy_pass  http://node-js-myapp;
        }
    }
}

tcp {
  upstream websocket-myapp {
    server 127.0.0.1:8080;
    check interval=3000 rise=2 fall=5 timeout=1000;
  }

  server {
    listen 3000;
    server_name _;
    access_log  /var/log/nginx/domain.xx.access.log;

    proxy_read_timeout 200000;
    proxy_send_timeout 200000;
    proxy_pass websocket-myapp;
  }
} 
```

它与这个 node.js 服务器运行良好：

```
var app = require('express').createServer()
var io = require('socket.io').listen(app);
io.set('transports', [
    'websocket'
  , 'flashsocket'
  , 'htmlfile'
  , 'xhr-polling'
  , 'jsonp-polling'
  ]);

app.listen(8080); 
```

虽然请求的文件位于我的服务器的公共端及其 HEAD 部分：

```
<script src="/socket.io/socket.io.js"></script> 
```

我很确定我的 nginx 不完整并且可能包含公牛...，但它有点工作并且是一个很好的起点。

# javascript - JS 日期：在每一天或每一月前面加 0

> ID：14685933
> 
> 赞同：11
> 
> 时间：2013-02-04T11:34:35.407
> 
> 标签：javascript, date, momentjs

我将此日期从 api 解析为字符串：DD-MM-YYYY 但有时日期是 DD-M-YYYY 甚至 DM-YYYY。

例如：

**2013**年 4 月 1 日 或 **2013**年 10 月 10 日 或**2013 年 7 月 4 日**

年份总是 4 位数字，但天或月有时会变成一位数。**如何手动（使用 JS）在每个数字前添加 0 ？**

我正在使用 moment.js 进行一些计算，因此我删除了“-”使用

```
date.replace("-", "") 
```

得到一个整数（例如 4-1-2013 = 412013），所以我可以将它与 moment.js 一起使用，但如果它是一个数字，一切都会搞砸。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-04T11:45:27.837

您可以像这样首先标准化您的字符串：

```
date = date.replace(/\b(\d{1})\b/g, '0$1'); 
```

这将采用任何只有一个数字的“单词”并在前面加上一个零。

请注意，要全局替换每个`-`您必须使用的正则表达式版本`.replace`- 您使用的字符串版本仅替换第一次出现，因此：

```
date = date.replace(/\b(\d{1})\b/g, '0$1').replace(/-/g, ''); 
```

会做你需要的一切。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-04T17:16:14.083

Moment.js 支持带破折号的格式，因此您甚至不需要进行任何字符串处理。

```
moment('4-1-2013', 'MM-DD-YYYY').format("MMDDYYYY");   // 04012013
moment('10-10-2013', 'MM-DD-YYYY').format("MMDDYYYY"); // 10102013 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T11:45:16.587

如果日期变量是字符串格式（例如 from `input[type=date]`），那么您需要将数据组件拆分为单个项目。

```
date = date.split('-'); 
```

然后检查日期和月份的长度

```
day = date[0].length==1 ? "0"+date[0] : date[0];
month = date[1].length==1 ? "0"+date[1] : date[1]; 
```

然后将它们重新组合成您想要的格式

```
date = ""+day+month+date[2]; 
```

工作示例：http: [//jsfiddle.net/dzXPE/](http://jsfiddle.net/dzXPE/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T11:41:05.657

```
var day = new Date();
day = day.getDay();
if(day.toString().length <= 1) {
    day = '0' + day;
} 
```

您可以使用相同的月份。我不完全确定您需要转换为字符串，但它不会受到伤害。

# c# - 在 WinRT 中执行文件上传操作

> ID：14685934
> 
> 赞同：0
> 
> 时间：2013-02-04T11:34:37.497
> 
> 标签：c#, windows-8, winrt-async

我花了一些时间来了解如何使用 Windows RT 执行完整的文件上传过程。关于 StorageFolder、StorageFile、安全盒模型等的“情况”是（至少是已知的，但众所周知的）主题。或许我的出发点不对，但希望高手能帮我解答一下这个问题。

我有一个 - Windows 8 App Store 项目。- WinRT 商业 DLL 项目。- WinRT 单元测试项目。

这将确保我使用 WinRT 相关对象。

问题是：如何执行从我的测试项目到业务 DLL 项目中的逻辑的文件流？所以我可以将上传的文件流式传输到应用程序临时文件夹吗？

作为一个paranthese。在 Windows 8 App Store 项目中，老实说，我也在尝试让 FileOpenPicker 为我提供流，而不仅仅是文件名。下面附加的问题添加了一些有用的信息。虽然我觉得它更冗长然后需要？！

[在 c# 和 winrt 中将流保存到文件](https://stackoverflow.com/questions/13336341/save-stream-to-file-in-c-sharp-and-winrt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:29:27.903

从您的测试项目中，您可以使用[FileIO.ReadBufferAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.fileio.readbufferasync.aspx)将数据获取到[IBuffer](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.ibuffer.aspx)中。一旦你有了它，你可以随意使用[DataReader](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.datareader.aspx)或[DataWriter](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.datawriter.aspx)读取或写入它。查看[此示例](https://stackoverflow.com/questions/14499570/how-to-get-a-stream-from-a-byte-array-in-a-windows8-store-app/14507316#14507316)，了解如何使用读取器和写入器操作数据。

# ios - 将 NSValue 转换回存储在其中的结构类型？

> ID：14685938
> 
> 赞同：11
> 
> 时间：2013-02-04T11:34:48.247
> 
> 标签：ios, objective-c, cocoa-touch, chipmunk, nsvalue

我将 Chipmunk Physics 的`cpShape`对象存储在`NSMutableDictionary`对象`NSValue`和以下代码行中：

```
NSValue *shapeValue = [[NSValue alloc] initWithBytes: shape objCType: @encode(cpShape)];
[staticBodiesInUse setObject: shapeValue forKey: name]; 
```

我现在需要把`cpShape`背面拿出来，把它和另一个形状比较。我怎样才能做到这一点？我看到了一个`getValue:`方法，`NSValue`但它需要一个缓冲区，不太确定如何处理它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T01:29:55.217

所以特洛伊木马的答案只是部分正确。

这样做有*很大*的问题。当您以`NSValue`这种方式创建时，您正在复制`cpShape`结构，并将其取回，您正在再次复制它。`cpShape`结构几乎完全通过引用来使用。每次复制它时，您都会获得对新副本的新引用，并且其中一些副本存在于堆栈中并被静默自动销毁。非常非常糟糕。

相反，您想创建一个`NSValue`using`[NSValue valueWithPointer:shape]`并使用`[value pointerValue]`. 这样 NSValue 只存储一个指向原始的指针`cpShape`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T11:42:13.217

是不是很简单：

```
NSValue *value = [staticBodiesInUse objectForKey:name];
cpShape shape;
[value getValue:&shape]; 
```

# java - 拆分时处理双值的最佳方法是什么？

> ID：14685939
> 
> 赞同：0
> 
> 时间：2013-02-04T11:34:51.653
> 
> 标签：java

```
String x = "39.33";
String result ;
Double x1 = new Double(x);
System.err.println("value :"+ x1);
String[] parts = x1.toString().split("\\.");

if(parts != null )
{
 if((Integer.parseInt(parts[1])) > 0)
{
       result =x1;

}
 else
{
result= parts[0];
}
 } 
```

请让我知道格式化/拆分值的最佳方法：我的需要是....

```
 if x is 39
 so x1 is 39.0
 so i need result =39

 if x is 39.33
 so x1 is 39.33
 so i need result =39.33 
```

我不想使用拆分或条件检查`if((Integer.parseInt(parts[1])) > 0)`..请让我知道最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:39:14.833

如果将双精度转换为 int，则忽略小数位。

对于这个问题，它会是这样的：

```
String result;
String x = "39.33";
Double x1 = new Double(x);
int xPre = x1.intValue();

if ( x1 > xPre) {
    result = x1;
} else {
    result = Integer.toString(xPre);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:54:16.970

试试这个：

```
Double d = Double.parseDouble("35.0");
String result = NumberFormat.getNumberInstance().format(d.doubleValue())
System.out.println(result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T11:37:00.103

您需要做的就是将数字读取为 double 并将其转换为 int，这将有效地截断数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T11:37:07.017

你可以做

```
String x = "39.33";
long l = (long) Double.parseDouble(x); // == 39 
```

这将导致`l`成为双精度数的整数部分。（前提是数量少于 90 亿）

如果您真的想使用 split 您可以执行以下操作，这会稍微慢一些，但如果数字太大会抛出异常。

```
long l = Long.parseLong(x.split("\\.")[0]); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-04T11:43:05.420

```
public static void main(String[] args) {
    Double x = new Double("39.33");
    Double y = new Double("39.0");

   printDouble(x);
   printDouble(y);

}

public static void printDouble(Double dbl){
    System.out.println(dbl.toString().replaceAll("[0]*$", "").replaceAll(".$", ""));
} 
```

# apache - 我要apache不回应

> ID：14685944
> 
> 赞同：2
> 
> 时间：2013-02-04T11:35:27.360
> 
> 标签：apache, httpd.conf

我在我的 WinXP PC 上运行 apache2.2。我不想要任何主体，但需要指定的 IP 访问该站点。我已经使用 httpd.conf 拒绝其他请求。但这还不够，我现在想将 apache 设置为不发送响应，而不是 403。简单来说，我想隐藏我的服务器，我不想让其他人知道我正在运行一个网络服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:50:00.323

您只能将 Apache 服务器绑定到 localhost。我没有测试过，但是在ports.conf中，你可以改变：

```
Listen 80 
```

到

```
Listen 127.0.0.1:80 
```

这将使 apache 绑定到 IP 地址 127.0.0.1，该地址只能从机器本身获得。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T12:44:38.697

这显然是使用防火墙很容易做到的事情，因此您应该尝试安装和配置防火墙。

在 apache 方面，您唯一可以尝试的是将**mod_security**与“ **drop** ”操作一起使用。例如，检查[这个 servfault 答案](https://serverfault.com/a/401592/65727)。但是如果连接被 apache 关闭，攻击者仍然可以看到连接首先被接受，所以你的 web 服务器并没有真正隐藏。

# error-handling - 无法更改 CakePHP 2.3 中的默认错误消息

> ID：14685945
> 
> 赞同：1
> 
> 时间：2013-02-04T11:35:38.257
> 
> 标签：error-handling, cakephp-2.0

在我的 CakePHP 项目中，我想显示错误消息，但它不起作用。

当我提交时，我希望它显示一条错误消息，例如：“此字段是必需的”，但默认情况下它显示“请填写此字段”。我改变了信息，但它并没有从核心改变。

我的视图、模型和控制器代码如下：

`add_district.ctp`：

```
 <div class="pg_title txtLeft">Add District</div>

               <?php echo $this->Form->create('Admins', array('action' => 'add_district'));?>
                <table>
                    <tbody>

                        <tr>
                            <td><label>District Name<span class="red required">*</span></label></td>
                            <td><?php echo $this->Form->input('District.district_name',array('label'=>false,'div'=>false,'size'=>50,'style'=>'width:330px;')); ?></td>
                        </tr>

                        <tr>
                            <td colspan="2" align="right" style="padding-right: 113px;"><input type="reset" value="Reset"> | <?php echo $this->Form->submit('ADD', array('div' => false));?></td>
                        </tr>
                    </tbody>
                </table>  
            <?php print $this->Form->end();?>   

<div class="clear"></div> 
```

模型 ：`District.php`

```
<?php
App::uses('AppModel', 'Model');
/**
 * Admin Login Model
 *
 */
 class District extends AppModel
 {
    public $name='District';
    public $usetables='districts';

     public $validate = array(
     'district_name' => array(
                     'rule' => 'notEmpty',
                     'allowEmpty' => false,
                     'message' => 'This field is required'));

 }
?> 
```

我的控制器代码是（`AdminController.php`）：

```
public function add_district()
        {

            $this->layout='common';
            $this->District->create();
            $this->District->set($this->data);
          if(empty($this->data) == false)
            {
                    if($this->District->save($this->data))
                    {
                        $this->Session->setFlash('District Added Successfully.');
                        $this->redirect('add_district');
                    }

            }
            else
            {
                $this->set('errors', $this->District->invalidFields());     
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T10:10:25.830

该消息“请填写此字段”来自浏览器本身，而不是来自 CakePHP。

因此 Firefox 和 Chrome（可能还有其他浏览器？）会自动检查标记为必填的字段，然后当您提交表单时，甚至在将该表单数据发送到服务器之前，如果未填写必填字段，浏览器将给出您默认弹出消息：“请填写此字段”。

这是浏览器的默认行为，与您的代码无关。如果您想检查您的 Cake 错误消息是否正常，请在 Safari 中尝试（从 6.0.2 版开始，它似乎没有“自动检测必填字段”功能）。在 Safari 中，您应该得到您自己的 CakePHP 错误消息。

您还可以通过将表单本身的 autovalidate 属性传递为 false 来防止在浏览器中检查错误 - 请参阅[禁用 HTML5 表单元素的验证](https://stackoverflow.com/questions/3090369/disable-validation-of-html5-form-elements)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T20:22:53.337

实际上 CakePHP 是`required="required"`通过 FormHelper 添加 HTML5 属性来触发的。以前的 CakePHP 版本没有这样做。`'required' => false`如果您愿意，可以通过添加到表单输入属性数组来防止这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T04:45:03.497

问题是浏览器验证。至少在 Chrome 上，如果输入字段设置为“必填”，您会感到沮丧。它似乎在 Safari 上没有问题。

即使您从模型中添加 'required'=>false，它仍然可能无法正常工作。

我为使其正常工作所做的工作是在视图上，我添加了 'required'=>'false'

例如，我有一个用户视图和一个 add.ctp

```
echo $this->Form->input('fname', array('label' => 'First Name','required'=>'false')); 
```

在那之后，一切都解决了。但是我必须在所有输入字段上都这样做才能使蛋糕验证起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-21T17:39:20.533

在 add_district.ctp 中写入

```
<?php echo $this->Form->create('Admins', array('action' => 'add_district', 'novalidate' => true));?> 
```

我认为这将解决您的问题。

# r - RStudio 中的 data() 命令

> ID：14685949
> 
> 赞同：0
> 
> 时间：2013-02-04T11:35:54.410
> 
> 标签：r, rstudio

我刚刚意识到该 `data()`命令在 RStudio 中不起作用。它通常会为您提供所有可用数据集的列表（取决于您使用的软件包）。

有谁知道解决方法？

这是一个非常糟糕的解决方法：

```
x <- edit(data()) 
```

至少它确实在几个路径和其他列表之后为您提供了列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:29:58.810

正如许多人指出的那样，`data()`在 RStudio 中工作得很好。由于它会生成一个独立的窗口，因此默认情况下输出不是 RStudio 窗口，但您所要做的就是从该窗口“选择默认应用程序”对话框窗口中选择 RStudio，一切就绪。（vsn 97.245 w/ R2.15.2 和 Win7）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T07:58:34.700

这似乎只是 RStudio 的 Linux 版本的问题！

# c# - 在 asp.net 中使用 itextsharp 从 html 字符串转换为 pdf

> ID：14685950
> 
> 赞同：0
> 
> 时间：2013-02-04T11:35:57.217
> 
> 标签：c#, html, .net, pdf, itextsharp

我`iTextSharp`在我的项目中使用并使用此方法将 html 字符串解析为 pdf

```
public static MemoryStream MakePdf(string htmlCode)
        {
            MemoryStream msOutput = new MemoryStream();
            TextReader reader = new StringReader(htmlCode);

            Document document = new Document(PageSize.A4, 30, 30, 30, 30);
            PdfWriter writer = PdfWriter.GetInstance(document, msOutput);
            HTMLWorker worker = new HTMLWorker(document);
            document.Open();
            worker.StartDocument();
            worker.Parse(reader); // EXCEPTION IN THIS LINE!!!!
            worker.EndDocument();
            worker.Close();
            document.Close();

            return msOutput;
        } 
```

它对我不起作用。它在选定的行引发异常

> 不支持 URI 格式。

我怎么解决这个问题？

PS这是我需要解析的html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html" />
    <meta name="author" content="Boomer" />
    <style type="text/css">
        body 
        {
           font: 12px/18px Arial, Tahoma, Verdana, sans-serif;
           width: 100%;
           font-family: Myriad Pro;
           font-style: italic;
           background: #f3f3f3;
        }

        @font-face 
        {
            font-family: 'Myriad Pro';
            src: url('../fonts/myriadpro.eot');
            src: url('../fonts/myriadpro.eot?#iefix') format('embedded-opentype'),
                 url('../fonts/myriadpro.woff') format('woff'),
                 url('../fonts/myriadpro.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        .clear
        {
            clear: both;
        }

        a,.blue_text
        {
            color:#2aa2f6;
            text-decoration: none;
        }

        a:hover
        {
            text-decoration: underline;
        }

        .simple_title
        {
           font-size: 22px; 
        }

        .text750
        {
            width: 750px;
            margin: 20px 0;
        }

        .full_width_text
        {
            margin-right: 35px;
            text-align: justify;
        }

        .grey_text 
        {
            color:#afafaf;
        }

        .email_page
        {
            width: 1025px;
            margin: 20px auto;
            background: #fff;
            padding: 20px 0;
        }

        .email_page p
        {
            font-size: 18px;
        }

        .email_div
        {
            margin: 0 auto;
            background: #fff;
            width: 998px;
            border: 1px solid #ebebeb;
            border-radius: 10px;
           -webkit-border-radius:10px;
           -border-radius:10px;
           -moz-border-radius:10px;
           -o-border-radius:10px;
            display: table;
        }

        .email_content 
        {
            margin-left: 60px;
            margin-top: 40px;
        }

        .email_logo
        {
            float: left;
        }

        .email_title
        {
            float: left;
            margin-left: 130px;
            font-size: 22px;
            color:#f7941d;
            margin-top: 50px;
        }

        .email_img_container
        {
            float: right;
            width: 270px;
        }

        .email_img_container .text_description
        {
            font-size: 18px;
            color:#000000;
            margin-bottom: 15px;
        }

        .email_img_container img
        {
            border: 1px solid #ebebeb;
            border-radius: 10px;
           -webkit-border-radius:10px;
           -border-radius:10px;
           -moz-border-radius:10px;
           -o-border-radius:10px;
        }

        .text600
        {
            width: 600px;
            float: left;
        }
    </style>
    <title>Voucher</title>
</head>

<body>
    <div class="email_page">

    <div class="email_div">
        <div class="email_content">
           <div class="text600">
                <div class="email_logo">
                    <a href="#"> 
                        <img src="{EmailLogo}"  />
                    </a>

                </div>
                <div class="email_title">
                    Instant Gift Certificate
                </div>  
                <div class="clear"></div>
                <div>
                    <p>To: <span class="blue_text">{RecipientName}</span></p>
                    <p>
                    <div>{GiftVoucherName}</div>
                    <div>{GiftVoucherDescription}</div>
                    </p>
                    <p>
                        This gift is from:  <span class="blue_text">{SenderName}</span>
                    </p>
                </div>

            </div>

            <div class="email_img_container">
                <div class="text_description">
                    <div>SG Code: {SGCode}</div>
                    <div>Purchased on: {PurchaseDate}</div>
                </div>
                <img src="{MerchantImage}" alt="" />
            </div>
         <div class="clear"></div>
         <div class="text750">
            <p>
                This gift must be redeemed by: <span class="blue_text">{Date}</span><br />
                Redeemable at the following locations: <span class="blue_text">{Locations}</span><br />
                For other details and terms and conditions, please see the other attachment. 

            </p>

            <div class="simple_title">
                Disclaimer
            </div>
            <p>
                Test.com is not responsible for the content of the message or the selection of the gift by the sender.
                Once the sender enters the information, the instant gift is automatically generated and sent to
                the recipient.
            </p>
            <p>
                Visit us at: <a href="http://www.Test.com">www.Test.com</a>
            </p>
         </div>

        </div>

    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:35:37.063

要解决此问题，您可以使用`SetProviders`采用 IDictionary 的方法将 Providers 添加到 HTMLWorker，HTMLWorker 类具有字符串键的常量。在您的情况下，请查看 ILinkProvider 和/或 IImageProvider。这些提供了一种自己处理 HTML 中的图像和 URL 的方法，将它们转换为 PDF 的可用部分。

# c# - 如何在 C# 中访问 StackPanel 中项目的属性？

> ID：14685951
> 
> 赞同：0
> 
> 时间：2013-02-04T11:35:57.290
> 
> 标签：c#, windows-phone

```
<ListBox x:Name="noteListBox" 
                 VerticalAlignment="Stretch" 
                 HorizontalAlignment="Stretch" Foreground="#FF329BD6" Margin="0,24,0,85">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock x:Name="noteTitle"
                            FontSize="40"
                            Text="{Binding Titolo}"
                            Tag="{Binding FileName}"
                            Foreground="#FF45B1EE" Tap="apriNota" Margin="5,0,0,0" />
                        <TextBlock x:Name="noteDateCreated"
                            Text="{Binding DateCreated}"
                            Margin="10,0,0,10" Foreground="#FF60ADD8" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

我需要动态`TextBlocks`更改`StackPanel`. 问题是它们似乎无法从我的 C# 代码中访问，假设因为它们在`StackPanel`.

所以基本上这就是我需要做的：

```
noteTitle.Foreground = new SolidColorBrush(Color.FromArgb(255, 50, 155, 214)); 
```

但我什至无法`noteTitle`在我的 C# 代码中找到......我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:41:47.667

我建议为此目的使用价值转换器。我假设前景值取决于您绑定到的对象的状态`FileName`，`DateCreated`因此只需将此对象用作 converetr 参数并在转换器中进行主要计算以决定应为该特定项目返回哪个前景。

```
public class EntityToForegroundConverter : System.Windows.Data.IValueConverter
{
    public object Convert(object value, 
                         Type targetType, 
                         object parameter, 
                         CultureInfo culture) 
    {
        var entity = value as IMyEntity;
        // TODO: determine a foreground value based on bound 
        // object proerrty values
    }

    public object ConvertBack(object value, 
                              Type targetType, 
                              object parameter, 
                              CultureInfo culture)
    {
        return null;
    }
} 
```

```
<Control.Resources>
    <src:EntityToForegroundConverter x:Key="foregroundConverter"/>
</Control.Resources>

<TextBlock 
   Foreground="{Binding Converter={StaticResource foregroundConverter}}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:02:16.100

如果您想获取元素，可以使用以下代码： var a = noteListBox.ItemTemplate.LoadContent() as StackPanel; (a as StackPanel).Background = Brushes.Red;

```
 foreach (UIElement  child in a.Children)
        {
            if (child is TextBlock)
                if ((child as TextBlock).Name.CompareTo("noteDateCreated") == 0)
                {
                    (child as TextBlock).Foreground = Brushes.Red;
                }
        } 
```

或者你想改变模板，你可以通过代码创建模板，并覆盖模板：

DataTemplate 模板 = new DataTemplate(typeof(Test)); FrameworkElementFactory spOuterFactory =new FrameworkElementFactory(typeof(StackPanel)); FrameworkElementFactory block1 = new FrameworkElementFactory(typeof(TextBlock)); FrameworkElementFactory block2 = new FrameworkElementFactory(typeof(TextBlock));

```
 block1.SetValue(TextBlock.ForegroundProperty, Brushes.Red);
        Binding binding1 = new Binding();
        binding1.Path = new PropertyPath("Titolo");
        block1.SetBinding(TextBlock.TextProperty, binding1);

        block2.SetValue(TextBlock.ForegroundProperty, Brushes.Red);
        Binding binding2 = new Binding();
        binding2.Path = new PropertyPath("noteDateCreated");
        block2.SetBinding(TextBlock.TextProperty, binding2);         

        spOuterFactory.AppendChild(block1);
        spOuterFactory.AppendChild(block2);

        template.VisualTree = spOuterFactory;
        noteListBox.ItemTemplate = template; 
```

# java - 使用 servlet 获取用户详细信息

> ID：14685953
> 
> 赞同：2
> 
> 时间：2013-02-04T11:36:08.063
> 
> 标签：java, jakarta-ee, servlets, web

我正在尝试检索最近登录的用户的用户名。我使用`.getRemoteUser()`方法来读取用户名。但它没有显示用户信息。

我的代码是：

```
response.setContentType("text/plain");
PrintWriter out= response.getWriter();
// Some introductory HTML...
String remoteUser = request.getRemoteUser();
// See if the client is allowed
if(remoteUser == null) {
    out.println("Welcome");
} else {
    out.println("Welcome " + remoteUser + "!");
 } 
```

我不知道为什么它没有给出正确的结果。它总是产生结果“欢迎”。这意味着**request.getRemoteUser()==null**。请任何人告诉我如何检索远程用户信息。提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:45:55.497

**request.getRemoteUser()**将返回登录的用户，否则它将返回 null。这取决于您使用的身份验证类型。

另一个原因是客户端（浏览器）没有在请求中发送用户名。如果您位于要求身份验证的 URL 树之外，则可能会发生这种情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:42:35.050

只有使用 HTTP 基本身份验证才能填充远程用户。

[这是在 Java](http://docs.oracle.com/cd/E19798-01/821-1841/bncck/index.html)中设置基本 HTTP 身份验证的简单教程

事实上，您可以使用以下任何一种标准身份验证机制

> static String BASIC_AUTH 基本身份验证的字符串标识符。
> 
> static String CLIENT_CERT_AUTH 用于客户端证书身份验证的字符串标识符。
> 
> static String DIGEST_AUTH Digest 身份验证的字符串标识符。
> 
> 静态字符串 FORM_AUTH

# android - 显示字符串数组从 Soap Webservice 到 listview Android

> ID：14685954
> 
> 赞同：0
> 
> 时间：2013-02-04T11:36:16.657
> 
> 标签：android, arrays, android-listview, ksoap2

我试图将我的数组肥皂动作结果显示到列表视图。我设法检索项目并将其存储为字符串，但是，我似乎无法将所有字符串放入列表视图中。我在做什么错？？当我 Log.d 时，它会以正确的顺序显示所有内容（这就是我想要的）。但是，当我将它添加到我的 SearchResults 时，它只显示最后的详细信息。

```
 try
            {
                androidHttpTransport.call(SOAP_ACTION, envelope);
                SoapObject response = (SoapObject)envelope.getResponse();

                for (int i = 0; i < response.getPropertyCount(); i++) {
                    Object property = response.getProperty(i);
                    if (property instanceof SoapObject) {

                        ArrayList<SearchResults> results = new ArrayList<SearchResults>();
                         SearchResults sr1 = new SearchResults();

                      SoapObject info = (SoapObject) property;
                      String description = info.getProperty("description").toString();
                      String name = info.getProperty("name").toString();
                      String date = info.getProperty("date").toString(); 

                        Log.d("This is the list of id:",description);
                        Log.d("This is the list of name:",name);
                        Log.d("This is the list of date:",date);

                 sr1.setDescription(description);
                     sr1.setName(name);
                     sr1.setDate(date);                 
                     results.add(sr1);

                       final ListView lv1 = (ListView) findViewById(R.id.ListView01);
                       lv1.setAdapter(new MyCustomBaseAdapter(this, results));

                       lv1.setOnItemClickListener(new OnItemClickListener() {
                        @Override
                        public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                         Object object = lv1.getItemAtPosition(position);
                         SearchResults fullObject = (SearchResults)object;
                         Toast.makeText(second.this, "You have chosen: " + " " + fullObject.getName(), Toast.LENGTH_LONG).show();

                      //   return;
                        }  
                      });  
             }
           }
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:41:12.113

这是因为您`ArrayList`每次都在 a中创建一个新的`for loop`，所以它会覆盖创建的最后一个数据`ArrayList`。

应该是这样的，

```
ArrayList<SearchResults> results = new ArrayList<SearchResults>();
for (int i = 0; i < response.getPropertyCount(); i++) {
  SearchResults sr1 = new SearchResults();
  // fetch results
} 
// update the List
ListView lv1 = (ListView) findViewById(R.id.ListView01);   
lv1.setAdapter(new MyCustomBaseAdapter(this, results)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:52:57.973

试试这个：我已经更改了代码。因为 listview 适配器将结果绑定到循环之外。

```
 ArrayList<SearchResults> results = new ArrayList<SearchResults>();
  for (int i = 0; i < response.getPropertyCount(); i++) {
                Object property = response.getProperty(i);
                if (property instanceof SoapObject) {

                     SearchResults sr1 = new SearchResults();

                  SoapObject info = (SoapObject) property;
                  String description = info.getProperty("description").toString();
                  String name = info.getProperty("name").toString();
                  String date = info.getProperty("date").toString(); 

                    Log.d("This is the list of id:",description);
                    Log.d("This is the list of name:",name);
                    Log.d("This is the list of date:",date);

             sr1.setDescription(description);
                 sr1.setName(name);
                 sr1.setDate(date);                 
                 results.add(sr1);
}
}
                   final ListView lv1 = (ListView) findViewById(R.id.ListView01);
                   lv1.setAdapter(new MyCustomBaseAdapter(this, results));

                   lv1.setOnItemClickListener(new OnItemClickListener() {
                    @Override
                    public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                     Object object = lv1.getItemAtPosition(position);
                     SearchResults fullObject = (SearchResults)object;
                     Toast.makeText(second.this, "You have chosen: " + " " + fullObject.getName(), Toast.LENGTH_LONG).show();

                  //   return;
                    }  
                  });  
         } 
```

# ruby-on-rails-3 - Facebook 发布警报 - 2013 年 2 月的重大变化

> ID：14685956
> 
> 赞同：0
> 
> 时间：2013-02-04T11:36:25.783
> 
> 标签：ruby-on-rails-3, facebook-graph-api, alert

我正在开发一个 Rails 应用程序并使用[FBGraph](https://github.com/nov/fb_graph)在 Facebook 上发帖。当一个人点击想要按钮时，Facebook 帖子就会发生。我正在使用以下代码在用户的墙上发布：

```
if facebook_post.user.granted_publish_actions?
  me = FbGraph::User.me(facebook_post.user.oauth_token)
  me.feed!(
    :picture => facebook_post.picture_url,
    :link => facebook_post.link,
    :name => facebook_post.name,
    :description =>facebook_post.description
    ) 
end 
```

此代码不会调用 Open Graph API 来发布到用户的墙上。但是我的应用程序仍然收到[警报](https://developers.facebook.com/roadmap/#february-2013)，这基本上是对调用 Open Graph API 以发布在用户墙上的应用程序的警告。

如果我遗漏了什么，请指教。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:04:15.183

发送警报是因为您的“2013 年 2 月重大更改”应用设置已禁用。如果您没有要修改的内容，只需转到应用程序的高级设置页面并启用此功能。
设置页面的 URL 类似于“ [https://developers.facebook.com/apps/APP_ID/advanced](https://developers.facebook.com/apps/APP_ID/advanced) ”

# objective-c - CG图像记录失真

> ID：14685963
> 
> 赞同：3
> 
> 时间：2013-02-04T11:36:48.367
> 
> 标签：objective-c, macos, nsview, quartz-graphics, cgcontext

我编写了一个帮助类来记录 NSView 并将其保存到 QuickTime 文件中。该视图可以很好地记录到 QuickTime 电影中，但由于某种原因，输出会出现偏差。我的课程的核心如下，输出是这样的：

![倾斜的 .mov 文件](../Images/0dcd64f86acad352fcd3ef04b4765adf.png)

```
- (void) captureImage
{
    [self getCGImageFromView];
    pixelBuffer = [self getPixelBufferFromCGImage:viewCGImage size:CGRectMake(0, 0, mViewRect.size.width, mViewRect.size.height).size];

    if(pixelBuffer) {
        if(![adapter appendPixelBuffer:pixelBuffer withPresentationTime:CMTimeMake(mCurrentFrame, 20)])
            NSLog(@"AVAssetWriterInputPixelBufferAdaptor: Failed to append pixel buffer.");

        CFRelease(pixelBuffer);
        mCurrentFrame++;
    }
}

- (void) getCGImageFromView
{
    viewBitmapImageRep = [currentView bitmapImageRepForCachingDisplayInRect:mViewRect];
    [currentView cacheDisplayInRect:mViewRect toBitmapImageRep:viewBitmapImageRep];

    viewBitmapFormat = [viewBitmapImageRep bitmapFormat];
    viewCGImage = [viewBitmapImageRep CGImage];
}

- (CVPixelBufferRef)getPixelBufferFromCGImage:(CGImageRef)image size:(CGSize)size
{
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                        [NSNumber numberWithBool:YES], kCVPixelBufferCGImageCompatibilityKey,
                        [NSNumber numberWithBool:YES], kCVPixelBufferCGBitmapContextCompatibilityKey,
                        [NSNumber numberWithBool:YES], kCVPixelBufferOpenGLCompatibilityKey,
                        [NSNumber numberWithInt:size.width], kCVPixelBufferWidthKey,
                        [NSNumber numberWithInt:size.height], kCVPixelBufferHeightKey,
                         nil];

    CVPixelBufferRef pxbuffer = NULL;
    CVReturn status = CVPixelBufferCreate(NULL, size.width, size.height, kCVPixelFormatType_32ARGB, (__bridge CFDictionaryRef) options, &pxbuffer);

    NSParameterAssert(status == kCVReturnSuccess && pxbuffer != NULL);

    CVPixelBufferLockBaseAddress(pxbuffer, 0);
    void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);
    NSParameterAssert(pxdata != NULL);

    CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pxdata, size.width, size.height, 8, 4*size.width, rgbColorSpace, kCGImageAlphaPremultipliedFirst);
    NSParameterAssert(context);

    [[currentView layer] renderInContext:context];

    //CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image),    CGImageGetHeight(image)), image);
    CGColorSpaceRelease(rgbColorSpace);
    CGContextRelease(context);
    CVPixelBufferUnlockBaseAddress(pxbuffer, 0);

    return pxbuffer;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T11:58:35.363

这个问题是这条线。

```
 4*size.width, 
```

size.width 是奇数，不是 4 的倍数。传递给 CGBitmapContextCreate 的值必须是 4 的倍数。

```
4*ceil(size.width / 4) * 4 
```

这解决了问题。

# node.js - 子文件夹视图 expressjs 3x /nodejs

> ID：14685978
> 
> 赞同：0
> 
> 时间：2013-02-04T11:37:48.783
> 
> 标签：node.js, express

如何为我的“视图”使用子文件夹？在主“app.js”中，我为视图设置了根文件夹，如下所示：

```
 app.configure(function(){
       app.set('view engine', 'jade');
       app.set('views', __dirname + '/apps' );
       app.use(express.bodyParser());
       app.use(express.methodOverride());
       app.use(express.static(__dirname + '/apps' ));
       app.use(app.router);
 }); 
```

我的控制器看起来像这样：

```
 module.exports = function(req, res, base) {
       res.render( 'hello/views/');
 }; 
```

该文件夹如下所示：

```
 ./apps/hello/views/index.js 
```

但它仍然找不到它。“错误：无法查找视图“hello/views”谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:47:02.310

实际上，我提出了一个更好的解决方案。在应用程序配置中，我只是设置了默认视图，如下所示："

```
 app.set('view engine', 'jade');
 app.set('views', __dirname + '/views'); 
```

稍后我包含一个 boot.js（基于 expressjs 的 mvc 示例），其中包含以下内容：

```
 // allow specifying the view engine
 if (obj.engine) app.set('view engine', obj.engine);
 app.set('views', __dirname + '/../apps/' + name + '/views'); 
```

这会将视图文件夹覆盖到文件夹“apps/xxx/views”中指定的文件夹，甚至允许您在该文件夹的根目录中指定新的视图类型，如下所示：

```
 // filename = /apps/hello/index.js

 exports.engine = 'jade';

 // Render the indexpage
 exports.index = function(req, res, next){
      res.render('hello');
 }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:39:09.013

我很惊讶您的自我回答有效，因为您应该告诉 express 呈现特定视图，而 hello/views 是一个文件夹。但是我不熟悉您用于控制器的代码模式（`base`参数是让我失望的原因，因为 Express 中间件使用`function(req,res,next)`.）

我的路线如下所示：

```
app.set('views', __dirname + '/apps' );
...
app.get('/hello', function(req,res){
  res.render('hello/views/index')
}); 
```

在这种情况下`./apps/hello/views/index.jade`是一个玉文件，而不是一个 javascript 文件。如果您的模板是 javascript，也许您应该设置`view engine`为翡翠以外的其他内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-04T14:54:29.980

您可以将视图设置为路径数组

```
app.set('views', [path.join(__dirname, 'views/users/'), path.join(__dirname, 'views')]) 
```

您可以使用 app.get('views'); 检查生成的路径。它应该返回一个数组。

```
[/server/views/users/, /server/views] 
```

Express 将在数组中搜索可用路径。然后，您可以像这样仅使用文件名进行渲染

```
res.render( 'index');
res.render( 'profile'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:04:03.477

我通过将基础视图设置为目录的根来解决此问题，如下所示：

```
 app.set('views', __dirname); 
```

并在控制器中从根目录添加文件夹，如下所示：

```
 res.render( 'apps/hello/views/'); 
```

# perl - 从 sytem() 调用中过滤 STDOUT 并输出选择性文本

> ID：14685980
> 
> 赞同：0
> 
> 时间：2013-02-04T11:37:51.903
> 
> 标签：perl, stdout, expect

我有一个使用 system() 在 Expect 中执行不同命令的脚本。

对于其中的大多数，我不需要将 STDOUT 打印给用户，但在一种情况下，我只想将一小部分输出打印给用户。我已经使用下面的方法为所有不同的命令重定向 STDOUT 等。

我的问题很简单，我怎样才能改变它，以便我可以收集某个变量中的所有输出并将输出的一部分（例如“组号 = 12345”的字符串）打印给用户？

```
sub execute_cmd {   
my ($q) = @_;
my $para1 = $q->param('para1');
my $para2 = $q->param('para2');
my $para3 = $q->param('para3');
if($transtype eq "A") {
my $cmd = "\/\*ID\=66\*\/OOO LOIPAW\:XXX\=1\,ABC=K\'$para1\,DEF\=ALL\,GHI\=JKLMNO\,PQR\=$para2\;\r";
print $cmd;    
print "<br><br>";
open (TEMPERR, ">&STDERR");
open (TEMPOUT, ">&STDOUT");
open (STDERR, ">nul");
open (STDOUT, ">nul");
system ("./xxx.exp", $cmd);
open (STDERR, ">&TEMPERR");
open (STDOUT, ">&TEMPOUT");
close (TEMPERR);
close (TEMPOUT);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:35:31.897

您不需要花哨的 OUT/ERR 重定向来消除`system()`调用执行的命令的所有输出。

只需使用 shell 重定向：

```
system ("./xxx.exp $cmd > /dev/null"); # Get rid of STDOUT

system ("./xxx.exp $cmd > /dev/null 2>&1"); # Get rid of STDOUT AND STDERR 
```

现在，要捕获输出，您有 2 个选项：

1.  使用反引号（或`qx()`运算符）

    ```
    my $stdout = qx#./xxx.exp $cmd#; 
    ```

2.  重定向到文件并在文件中啜饮：

    我的 $out_filename = "./something.out"; 系统 ("./xxx.exp $cmd > $out_filename 2>&1"); # 捕获 STDOUT 和 STDERR 使用 File::Slurp; 我的@output = read_file($out_filename);

3.  打开管道并从中读取。

    open(my $output_fh, "./xxx.exp $cmd |") or die "Can't run program: $!\n"; while my $line () { # Do something with $line } close($output_fh);

4.  使用标准 IO 模块之一。例如，您可以绕过 Expect 并直接通过 OUT 和 IN 玩`IPC::Open2`

# twitter-bootstrap - 动画引导流体网格

> ID：14685981
> 
> 赞同：0
> 
> 时间：2013-02-04T11:37:53.060
> 
> 标签：twitter-bootstrap, grid, jquery-animate, scriptaculous, fluid-layout

我想知道您是否可以在这里就如何编写 Javascript 动画代码以在 Bootstrap 流体网格系统上执行出色的动画提供一些建议。

我的想法是我有一个带有搜索字段和按钮的简单页面。当用户输入一些关键字并按下按钮提交时，用户会得到一个返回的结果集并以很酷的动画行为显示在网格中。

我正在考虑[Script.aculo.us](http://script.aculo.us/)，我检查了他们的`Effect.appear()`例子`Effect.fade()`。我想将这两种效果结合在流体网格上，这样当轮廓网格出现（以延迟方式）时，出现在网格的行/列中的返回数据将具有淡入淡出效果。那应该可以完成工作。

我想知道是否可以将 Script.aculo.us 的出色动画框架合并到 Boostrap 中，并在我构建语言翻译应用程序时让这两者相互配合。

希望这是有道理的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T11:07:34.947

我终于解决了这个问题。

我让它工作了。

我应该如何加载 Scriptaculous 和 Bootstrap js 库有一个有序的顺序。

事实证明，在加载 Scriptaculous js 之前，我需要先在标签中加载核心 Bootstrap js 库！

然后我需要包含 jQuery.noConflict 方法，因为这两个核心库经常使用 jquery，所以在编写 jquery 代码时会发生一些冲突。

毕竟，它从那里工作正常！

# php - PHP CodeIgniter：试图获取非对象的属性

> ID：14685982
> 
> 赞同：0
> 
> 时间：2013-02-04T11:37:54.540
> 
> 标签：php, codeigniter

# 一切似乎都很好，但我不断收到以下错误：

遇到 PHP 错误

严重性：通知

消息：试图获取非对象的属性

文件名：models/ordermodel.php

行号：24

遇到 PHP 错误

严重性：通知

消息：试图获取非对象的属性

文件名：models/ordermodel.php

行号：31

==================================================== ===============

在视图中，我只是回显 $company_name

控制器：

```
 $city = $this->ordermodel->get_city($order_reference);
            $customerCompanyName = $this->ordermodel->get_company_name($order_reference);
            $data['company_name'] = $customerCompanyName; 
```

模型：

```
function get_city($ordernumber) {
    $this->db->where('order_number', $ordernumber);
    $city = $this->db->get('order');

    return $city->row()->city;
}

function get_company_name($ordernumber) {
    $this->db->where('order_number', $ordernumber);
    $companyname = $this->db->get('order');

    return $companyname->row()->company_name;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:16:53.140

使用他们的`result()`方法，它应该消除你所有的错误

`$row = $city->result(); return $row->city;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:41:59.260

似乎您的查询没有结果，请尝试：

```
function get_company_name($ordernumber) {
    $this->db->where('order_number', $ordernumber);
    $companyname = $this->db->get('order');

    if ($companyname->num_rows() > 0) {
        return $companyname->row()->company_name;
    }
    else {
        return '';
    }
} 
```

# colors - 崇高改变highlight_modified_tabs的颜色？

> ID：14685989
> 
> 赞同：5
> 
> 时间：2013-02-04T11:38:22.917
> 
> 标签：colors, tabs, sublimetext2

在`Sublime Text 2`编辑器中，我们可以像这样使用更改“修改/编辑的选项卡”的“文本颜色” `"highlight_modified_tabs": true`。有用。

但它是鲜红色的，我该如何改变`text color`它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-29T07:36:41.830

这些设置的正确位置是在目录内的安装包文件夹中（可以使用打开`Preferences -> Browse Packages`）**`Theme - Default`**，在一个名为`Default.sublime-theme`

在第 570 行附近的某处，配置了选项卡标签。

它们看起来有点像这样：

```
{
    "class": "tab_label",
    "parents": [{"class": "tab_control", "attributes": ["file_light"]}],
    "attributes": ["dirty"],
    "settings": ["highlight_modified_tabs"],
    "fg": [125, 00, 125]
}, 
```

您要配置其`settings`属性设置为的那些`["highlight_modified_tabs"]`。将属性更改`fg`为所需的 RGB 值。

有四个不同的部分需要更改，它们似乎与选项卡背景的阴影相对应。

请注意，无需修改默认主题。`Default.sublime-theme`您可以在`User`包目录中创建一个名为的新文件，并仅存储将在主主题文件之后应用**的更改。**

我复制并粘贴了四个`highlight_modified-tabs`部分并修改了我想要的两个。

***[包]*** **/User/Default.sublime-theme**：

```
[
    {
        "class": "tab_label",
        "parents": [{"class": "tab_control", "attributes": ["file_light"]}],
        "attributes": ["dirty"],
        "settings": ["highlight_modified_tabs"],
        "fg": [125, 00, 125]
    },
    {
        "class": "tab_label",
        "parents": [{"class": "tab_control", "attributes": ["file_medium"]}],
        "attributes": ["dirty"],
        "settings": ["highlight_modified_tabs"],
        "fg": [125, 00, 125]
    },
    {
        "class": "tab_label",
        "parents": [{"class": "tab_control", "attributes": ["file_medium_dark"]}],
        "attributes": ["dirty"],
        "settings": ["highlight_modified_tabs"],
        "fg": [255, 161, 52]
    },
    {
        "class": "tab_label",
        "parents": [{"class": "tab_control", "attributes": ["file_dark"]}],
        "attributes": ["dirty"],
        "settings": ["highlight_modified_tabs"],
        "fg": [255, 161, 52]
    }
] 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-07T02:32:16.857

得到了答案`Trevor Senior`

```
The color schemes in sublime text are located in your sublime packages. In the menu navigate to Preferences -> Browse Packages... and they will all be listed in the Color Scheme - Default 
```

# java - Android：同时录制视频和播放 mp3？

> ID：14685991
> 
> 赞同：3
> 
> 时间：2013-02-04T11:38:33.327
> 
> 标签：java, android, audio, video, android-camera

有没有办法在相机在 Android 4.x 上录制视频（无声音）时播放 mp3（或其他）音频文件？有没有人尝试过实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:17:36.490

我尝试在录制声音时播放声音并且它正在工作，所以我很确定在录制视频时也是可能的。您只需要有单独的线程来进行视频录制和声音播放。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-18T09:34:08.247

```
package com.technologies.mash.MySounds.Music;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.hardware.Camera;
import android.media.AudioManager;
import android.media.CamcorderProfile;
import android.media.MediaPlayer;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.RelativeLayout;
import android.widget.Toast;
import com.technologies.mash.CameraPreview;
import com.technologies.mash.PlayVideo;
import com.technologies.mash.R;
import com.technologies.mash.Sound;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;

public class AlbumDetailVideo extends Activity {

    private Camera mCamera;
    private CameraPreview mPreview;
    private MediaRecorder mediaRecorder;
    private Button capture, switchCamera;
    private Context myContext;
    private RelativeLayout cameraPreview;
    AudioManager audioManager;
    private boolean cameraFront = false;
    // private ArrayList<Sound> mSounds = null;
    int z = 0;
    Sound s1;
    MediaPlayer mPlayer;
    int sound;
    String urls;
    String audio, root, video, video_new, output;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_album_detail_video);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

        // getting songpath from server 

        Intent i = getIntent();
        urls = i.getStringExtra("songpath");

//        String urls = getIntent().getExtras().getString("songpath");
        Toast.makeText(AlbumDetailVideo.this, "Sound id" + urls, Toast.LENGTH_SHORT).show();
        Log.e("url", urls);
        //   mSounds = new ArrayList<Sound>();

        myContext = this;
        initialize();
    }

    private int findFrontFacingCamera() {
        int cameraId = -1;
        // Search for the front facing camera
        int numberOfCameras = Camera.getNumberOfCameras();
        for (int i = 0; i < numberOfCameras; i++) {
            Camera.CameraInfo info = new Camera.CameraInfo();
            Camera.getCameraInfo(i, info);
            if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
                cameraId = i;
                cameraFront = true;
                break;
            }
        }
        return cameraId;
    }

    private String readTxt() {

        InputStream inputStream = getResources().openRawResource(z);//getting the .txt file

        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

        int i;
        try {
            i = inputStream.read();
            while (i != -1) {
                byteArrayOutputStream.write(i);
                i = inputStream.read();
            }
            inputStream.close();
        } catch (IOException e) {

            e.printStackTrace();
        }

        return byteArrayOutputStream.toString();
    }

    private int findBackFacingCamera() {
        int cameraId = -1;
        // Search for the back facing camera
        // get the number of cameras
        int numberOfCameras = Camera.getNumberOfCameras();
        // for every camera check
        for (int i = 0; i < numberOfCameras; i++) {
            Camera.CameraInfo info = new Camera.CameraInfo();
            Camera.getCameraInfo(i, info);
            if (info.facing == Camera.CameraInfo.CAMERA_FACING_BACK) {
                cameraId = i;
                cameraFront = false;
                break;
            }
        }
        return cameraId;
    }

    public void onResume() {
        super.onResume();
        if (!hasCamera(myContext)) {
            Toast toast = Toast.makeText(myContext, "Sorry, your phone does not have a camera!", Toast.LENGTH_LONG);
            toast.show();
            finish();
        }
        if (mCamera == null) {
            // if the front facing camera does not exist
            if (findFrontFacingCamera() < 0) {
                Toast.makeText(this, "No front facing camera found.", Toast.LENGTH_LONG).show();
                switchCamera.setVisibility(View.GONE);
            }
            mCamera = Camera.open(findBackFacingCamera());
            mCamera.setDisplayOrientation(90);
            mPreview.refreshCamera(mCamera);
        }
    }

    public void initialize() {
        cameraPreview = (RelativeLayout) findViewById(R.id.camera_preview);

        mPreview = new CameraPreview(myContext, mCamera);
        cameraPreview.addView(mPreview);

        capture = (Button) findViewById(R.id.button_capture);
        capture.setOnClickListener(captrureListener);

        switchCamera = (Button) findViewById(R.id.button_ChangeCamera);
        switchCamera.setOnClickListener(switchCameraListener);
    }

    View.OnClickListener switchCameraListener = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // get the number of cameras
            if (!recording) {
                int camerasNumber = Camera.getNumberOfCameras();
                if (camerasNumber > 1) {
                    // release the old camera instance
                    // switch camera, from the front and the back and vice versa

                    releaseCamera();
                    chooseCamera();
                } else {
                    Toast toast = Toast.makeText(myContext, "Sorry, your phone has only one camera!", Toast.LENGTH_LONG);
                    toast.show();
                }
            }
        }
    };

    public void chooseCamera() {
        // if the camera preview is the front
        if (cameraFront) {
            int cameraId = findBackFacingCamera();
            if (cameraId >= 0) {
                // open the backFacingCamera
                // set a picture callback
                // refresh the preview

                mCamera = Camera.open(cameraId);
                mCamera.setDisplayOrientation(90);
                // mPicture = getPictureCallback();
                mPreview.refreshCamera(mCamera);
            }
        } else {
            int cameraId = findFrontFacingCamera();
            if (cameraId >= 0) {
                // open the backFacingCamera
                // set a picture callback
                // refresh the preview

                mCamera = Camera.open(cameraId);
                mCamera.setDisplayOrientation(90);
                // mPicture = getPictureCallback();
                mPreview.refreshCamera(mCamera);
            }
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        // when on Pause, release camera in order to be used from other
        // applications
        releaseCamera();
    }

    private boolean hasCamera(Context context) {
        // check if the device has camera
        if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
            return true;
        } else {
            return false;
        }
    }

    boolean recording = false;
    View.OnClickListener captrureListener = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(AlbumDetailVideo.this, "Playing.." + urls, Toast.LENGTH_SHORT).show();

            if (recording) {
                // stop recording and release camera
                mediaRecorder.stop(); // stop the recording
                releaseMediaRecorder(); // release the MediaRecorder object
                mPlayer.stop();

                Intent intent = new Intent(getApplicationContext(), PlayVideo.class);
                startActivity(intent);
                finish();
                Toast.makeText(AlbumDetailVideo.this, "Video captured!", Toast.LENGTH_LONG).show();
                recording = false;
            } else {

                if (!prepareMediaRecorder()) {
                    Toast.makeText(AlbumDetailVideo.this, "Fail in prepareMediaRecorder()!\n - Ended -", Toast.LENGTH_LONG).show();
                    finish();
                }
                // work on UiThread for better performance
                runOnUiThread(new Runnable() {
                    public void run() {

                        mPlayer = new MediaPlayer();
                        mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

                        try {
                            mPlayer.setDataSource(urls);
                        } catch (IllegalArgumentException e) {
                            Toast.makeText(AlbumDetailVideo.this, "You might not set the URI correctly!", Toast.LENGTH_LONG).show();
                        } catch (SecurityException e) {
                            Toast.makeText(AlbumDetailVideo.this, "You might not set the URI correctly!", Toast.LENGTH_LONG).show();
                        } catch (IllegalStateException e) {
                            Toast.makeText(AlbumDetailVideo.this, "You might not set the URI correctly!", Toast.LENGTH_LONG).show();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                        try {
                            mPlayer.prepare();
                        } catch (IllegalStateException e) {
                            Toast.makeText(AlbumDetailVideo.this, "You might not set the URI correctly!", Toast.LENGTH_LONG).show();
                        } catch (IOException e) {
                            Toast.makeText(AlbumDetailVideo.this, "You might not set the URI correctly!", Toast.LENGTH_LONG).show();
                        }
                        mediaRecorder.start();
                        mPlayer.start();

                    }
                });
                recording = true;
            }
        }
    };

    private void releaseMediaRecorder() {
        if (mediaRecorder != null) {
            mediaRecorder.reset(); // clear recorder configuration
            mediaRecorder.release(); // release the recorder object
            mediaRecorder = null;
            mCamera.lock(); // lock camera for later use
        }
    }

    private boolean prepareMediaRecorder() {

        mediaRecorder = new MediaRecorder();

        // CamcorderProfile profile = CamcorderProfile.get(CamcorderProfile.QUALITY_LOW);
        mCamera.unlock();
        mediaRecorder.setCamera(mCamera);

     //   mediaRecorder.setAudioSource(MediaRecorder.AudioEncoder.AAC_ELD);
        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.VOICE_RECOGNITION);
        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
    /*    mediaRecorder.setOutputFormat(profile.fileFormat);
        mediaRecorder.setVideoEncoder(profile.videoCodec);
        mediaRecorder.setVideoEncodingBitRate(profile.videoBitRate);
        mediaRecorder.setVideoFrameRate(profile.videoFrameRate);
        mediaRecorder.setVideoSize(profile.videoFrameWidth, profile.videoFrameHeight);*/
        mediaRecorder.setPreviewDisplay(mPreview.getHolder().getSurface());

        try {
            mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_LOW));
        } catch (Exception e) {

        }

        mediaRecorder.setOutputFile("/sdcard/rohit.mp4");
        mediaRecorder.setMaxDuration(600000); // Set max duration 60 sec.
        mediaRecorder.setMaxFileSize(50000000); // Set max file size 50M

        try {
            mediaRecorder.prepare();
        } catch (IllegalStateException e) {
            releaseMediaRecorder();
            return false;
        } catch (IOException e) {
            releaseMediaRecorder();
            return false;
        }
        return true;

    }

 /*   private boolean prepareMediaRecorder() {

        mediaRecorder = new MediaRecorder();

        mCamera.unlock();
        mediaRecorder.setCamera(mCamera);

        //mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        try {
            mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
        }catch (Exception e){

        }

        mediaRecorder.setOutputFile("/sdcard/myvideo.mp4");
        mediaRecorder.setMaxDuration(600000); // Set max duration 60 sec.
        mediaRecorder.setMaxFileSize(50000000); // Set max file size 50M

        try {
            mediaRecorder.prepare();
        } catch (IllegalStateException e) {
            releaseMediaRecorder();
            return false;
        } catch (IOException e) {
            releaseMediaRecorder();
            return false;
        }
        return true;

    }*/

    private void releaseCamera() {
        // stop and release camera
        if (mCamera != null) {
            mCamera.release();
            mCamera = null;
        }
    }

} 
```

# android - 如何在 Android 中使用滚动和捏缩放显示文档渲染的图像页面

> ID：14685992
> 
> 赞同：0
> 
> 时间：2013-02-04T11:38:35.270
> 
> 标签：android, imageview, scrollview, pinchzoom

我在服务器中有一个 pdf 文档，我通过服务作为一组图像获得。每个图像对应一个呈现的 PDF 页面。

我想在我的应用程序中显示文档的所有图像。用户应该能够向上滚动页面图像并缩放“捏”。

我使用滚动视图实现了滚动功能。但是，我没有找到通过捏合手势设置缩放的好的解决方案。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:51:34.123

我使用 MikeOrtiz 创建的 TouchImageView 在我的旧项目中实现了捏缩放

[https://github.com/MikeOrtiz/TouchImageView](https://github.com/MikeOrtiz/TouchImageView)

尝试一下 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:53:54.570

感谢 Sourab 的回答，

最后，我使用了 WebView 来执行该功能。这有点棘手，但它具有开箱即用的缩放和滚动功能

我所做的是创建一个包含如下图像的字符串：

```
String x= "<html><head><meta name=\"viewport\" content=\"width=device-width, minimum-scale=1.0\"/><style type=\"text/css\">html, body {margin: 0;padding: 0;} img {border: none;}</style><head><body style=\"background: black;\"><table><tr><td align=\"center\"><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA....\"/></td></tr></table></body></html>"; 
```

之后我加载 WebView：

```
aWebView.loadData(x, "text/html", "UTF-8"); 
```

将内容宽度调整为 webView 宽度的最后一个技巧：

```
aWebView.setInitialScale(30);
aWebView.getSettings().setUseWideViewPort(true); 
```

并允许缩放：

```
aWebView.getSettings().setBuiltInZoomControls(true); 
```

在字符串中加载图像不是很好，但它可以工作。

# php - 将php中的文件上传到mysql

> ID：14685994
> 
> 赞同：1
> 
> 时间：2013-02-04T11:38:45.403
> 
> 标签：php, mysql

我正在尝试将简单的文件从 php 上传到 mysql 并将其下载回来，但我似乎一直遇到问题，但我无法弄清楚。我尝试以这种形式上传的图片在 blob 列中创建了一些内容，但在下载时寡妇查看器给出了没有可用预览的错误

这是表单的代码

```
<form enctype="multipart/form-data" method="post" action="upload.php">
Choose your file <input name="file" type="file">
<input type="submit" >
</form> 
```

这是upload.php的代码

```
include('connect.php');
$actualname=$_FILES['file']['name'];
$type=$_FILES['file']['type'];
$name  = $_FILES['file']['tmp_name'];
$size = $_FILES['file']['size'];

$fresource=fopen($name,'r');
$content=fread($fresource,filesize($name));;
$content=addslashes($content);
fclose($fresource);

$query='INSERT INTO `files` (Name,Content,Type,Size) VALUES ("'.$actualname.'","'.$content.'","'.$type.'","'.$size.'")';
echo $query;
$var=mysql_query($query,$con); 
```

这是download.php的代码

```
include('connect.php');
$query='SELECT * FROM `files` WHERE ID="2"';
$res=mysql_query($query,$con);
$var=mysql_fetch_array($res);
header("Content-length: ".$var[4]);
header("Content-type: ".$var[3]);
header("Content-Disposition: attachment; filename=".$var[1]);
echo $var[1]; 
```

任何帮助将非常感激

文件表具有相同顺序的 ID、名称、内容、类型、大小列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:52:22.310

**不要使用 MYSQL_***

此外，addslashes() 是保护代码的一种糟糕且错误的方法。因为它的代码容易受到 SQL 注入的影响。

我假设您的数据库是

```
id name content type size 
```

所以将最后一行更改为

```
echo stripslashes($var[2]); 
```

自从

```
0 => id,
1 => name,
2 => content, 
```

并且您在内容中添加了斜线......所以现在您需要删除它们。

# python - 剪贴板内容更改时触发事件

> ID：14685999
> 
> 赞同：18
> 
> 时间：2013-02-04T11:38:56.027
> 
> 标签：python, multithreading, macos, events, clipboard

我正在尝试在我的 Mac Lion 上使用 Python 脚本获取剪贴板内容。

我正在搜索一个事件或类似的东西，因为如果我使用循环，我的应用程序会花费所有时间查看剪贴板。

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-04T13:09:53.007

您是否考虑过使用无限循环并在尝试之间“休眠”？我将[pyperclip](http://coffeeghost.net/2010/10/09/pyperclip-a-cross-platform-clipboard-module-for-python/)用于一个简单的 PoC，它就像一个魅力，以及 Windows 和 Linux。

```
import time
import sys
import os
sys.path.append(os.path.abspath("SO_site-packages"))

import pyperclip

recent_value = ""
while True:
    tmp_value = pyperclip.paste()
    if tmp_value != recent_value:
        recent_value = tmp_value
        print("Value changed: %s" % str(recent_value)[:20])
    time.sleep(0.1) 
```

而不是`print`，做任何你想做的事。如果您需要多线程方面的帮助才能将其放入后台线程，请告诉我。

**编辑**

这是一个完整的多线程示例。

```
import time
import threading

import pyperclip

def is_url_but_not_bitly(url):
    if url.startswith("http://") and not "bit.ly" in url:
        return True
    return False

def print_to_stdout(clipboard_content):
    print ("Found url: %s" % str(clipboard_content))

class ClipboardWatcher(threading.Thread):
    def __init__(self, predicate, callback, pause=5.):
        super(ClipboardWatcher, self).__init__()
        self._predicate = predicate
        self._callback = callback
        self._pause = pause
        self._stopping = False

    def run(self):       
        recent_value = ""
        while not self._stopping:
            tmp_value = pyperclip.paste()
            if tmp_value != recent_value:
                recent_value = tmp_value
                if self._predicate(recent_value):
                    self._callback(recent_value)
            time.sleep(self._pause)

    def stop(self):
        self._stopping = True

def main():
    watcher = ClipboardWatcher(is_url_but_not_bitly, 
                               print_to_stdout,
                               5.)
    watcher.start()
    while True:
        try:
            print("Waiting for changed clipboard...")
            time.sleep(10)
        except KeyboardInterrupt:
            watcher.stop()
            break

if __name__ == "__main__":
    main() 
```

我创建了一个 threading.Thread 的子类，覆盖了这些方法`run`并`__init__`创建了这个类的一个实例。通过调用`watcher.start()`（不是`run()`！），您启动线程。

为了安全地停止线程，我等待 -c （键盘中断）并告诉线程自行停止。

在类的初始化中，您还有一个参数`pause`来控制尝试之间的等待时间。

像在我的示例中一样使用类 ClipboardWatcher，将回调替换为您所做的，例如`lambda x: bitly(x, username, password)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T13:45:21.903

在`pyperclip`Macosx 上查看它的实质是：

```
import os
def macSetClipboard(text):
    outf = os.popen('pbcopy', 'w')
    outf.write(text)
    outf.close()

def macGetClipboard():
    outf = os.popen('pbpaste', 'r')
    content = outf.read()
    outf.close()
    return content 
```

这些对我有用，你过得怎么样？

我不太听从你关于处于循环中的评论。

* * *

**编辑**添加了 'orrid 轮询示例，显示如何`changeCount()`在每个`copy`粘贴板上颠簸。这仍然不是 OP 想要的，因为似乎没有任何事件或通知来修改`NSPasteboard`.

```
from LaunchServices import *
from AppKit import *
import os

from threading import Timer

def poll_clipboard():
    pasteboard = NSPasteboard.generalPasteboard()
    print pasteboard.changeCount()

def main():
    while True:
        t = Timer(1, poll_clipboard)
        t.start()
        t.join()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-15T04:52:30.447

简单的！

```
import os
def macSetClipboard(text):
    outf = os.popen('pbcopy', 'w')
    outf.write(text)
    outf.close()

def macGetClipboard():
    outf = os.popen('pbpaste', 'r')
    content = outf.read()
    outf.close()
    return content
current_clipboard = macGetClipboard()
while True:
   clipboard = macGetClipboard()

   if clipboard != current_clipboard:
       print(clipboard)
       macSetClipboard("my new string")
       print(macGetClipboard())
       break 
```