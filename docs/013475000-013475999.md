# StackOverflow 问答 13475000-13475999

# jquery - jQuery 水平切换 Div

> ID：13475004
> 
> 赞同：3
> 
> 时间：2012-11-20T14:09:27.380
> 
> 标签：jquery

我正在尝试创建一个滑出 div 功能。基本上，它是一个矩形图像地图 - 当您单击地图上的某个位置时，DIV 从右侧滑出以覆盖整个地图。我需要为多个位置（即多个 DIV）执行此操作

我尝试了一些来自 jQuery 的函数，但没有成功。切换效果只允许向上或向下运动，我无法让 .animate 效果按我想要的方式工作。

这个[**Jfiddle**](http://jsfiddle.net/rs2QK/979/)接近我所需要的，但我试图让活动的 DIV 在新的滑入之前滑出（并且 MAP DIV 应该始终保持静态，因此当 DIV 滑出时，您会在新的 div 幻灯片）。

这是 Jfiddle 中的内容：

```
jQuery(function($) {

    $('a.panel').click(function() {
        var $target = $($(this).attr('href')),
            $other = $target.siblings('.active');

        if (!$target.hasClass('active')) {
            $other.each(function(index, self) {
                var $this = $(this);
                $this.removeClass('active').animate({
                    left: $this.width()
                }, 500);
            });

            $target.addClass('active').show().css({
                left: -($target.width())
            }).animate({
                left: 0
            }, 500);
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:59:05.070

根据您的 jQuery 片段，我想出了

```
$(document).ready(function() {
    $('div.panel').css('left', '-200px');

    $('a.panel').click(function() {
        var a = $(this);
        var p = $(a.attr('href'));
        var pw = p.width();

        //-- if we have an active panel, hide it. otherwise, just show target
        if ($('div.panel').hasClass('active')) {
            //-- reset all panels
            $('div.panel').animate({
                left: -pw
            }, 500, function() {
                //-- when that is complete, move target panel to position
                p.addClass('active').show().animate({
                    left: 0
                });
            });
        } else {
            p.addClass('active').show().animate({
                left: 0
            });
        }
    });
}); 
```

更新了 jsFiddle：http: [//jsfiddle.net/rs2QK/982/](http://jsfiddle.net/rs2QK/982/)

*   更新 #1 CSS/HTML 以保持原始地图 div (#target1) 显示。CSS 有点多余，但考虑到这种方法，它可以完成工作。

*   更新 #2 更新了小提琴链接。我的印象是它在保存时更新。哎呀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:58:11.340

Don Boots，你所拥有的与我所寻找的很接近——但我认为我找到了一个更好的解决方案：

```
$(document).ready(function () {
var visible=true;
$("#test").on('click', function() { 
    $('.t1').animate({width: visible ? 300 : 0}, "slow");
     visible=!visible;  }); 
 $("#test2").on('click', function() { 
    $('.t2').animate({width: visible ? 300 : 0}, "slow");
     visible=!visible;         
});
$("#close").on('click', function() { 
    $('.common').animate({width: visible ? 0: 0}, "slow");
     visible=!visible;         
}); 
```

​</p>

[**提琴手**](http://jsfiddle.net/vHJj7/40/)

# vb6 - 将一个记录集复制到另一个

> ID：13475012
> 
> 赞同：4
> 
> 时间：2012-11-20T14:09:55.627
> 
> 标签：vb6

由于我的问题得到了如此好的和快速的解决方案，我将再次尝试从您那里获得一些帮助：

我打开了两个记录集。

```
 Set cmd1.ActiveConnection = cn1
 cmd1.CommandText = "SELECT * FROM mov Where [Date] >= #" & DateA & "#;"
 Set RSold = cmd1.Execute

 Set cmd2.ActiveConnection = cn2
 cmd2.CommandText = "SELECT * FROM mov"
 Set RSnew = cmd2.Execute 
```

（我只想保存文件的选定记录。）

我知道如何逐条复制，但是是否有“捷径”可以更快地完成？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T06:15:54.533

您可以使用代码：

## 设置 RSNew = RSOLD.Clone

```
@user1838163 :Saving the second Recordset as a file

Dim RFileNm  As String 
Dim fs
Set fs = CreateObject("Scripting.FileSystemObject")

RFileNm  = "c:\temp\" & Trim(RFileNm) & ".adt"
fs.DeleteFile (RFileNm)
RSNew .Save RFileNm, adPersistADTG
RSNew .Close
RSNew .Open RFileNm, , , , adCmdFile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:49:12.217

尝试这个：

```
Dim i As Long
Do While Not RSold.EOF
    ' You can place if condition here
    RSNew.AddNew
    For i = 0 To RSold.Fields.Count - 1
        RSNew.Fields(RSold.Fields(i).Name) = RSold.Fields(i).Value
    Next i
    RSNew.Update
    RSold.MoveNext
Loop 
```

这会将记录从 RSold 复制到 RSnew 记录集

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T23:04:21.553

我不认为克隆会做你想做的事。它只是为您提供了您已经拥有的相同记录集的另一个视图。这允许您使用多个书签等，但记录集仍附加到原来的同一数据库。我还需要一种方法来复制记录集并将其以新格式保存到新数据库中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T17:48:00.673

我认为这将通过一次完成所有操作来完成您想要的。

```
Dim objPB As New PropertyBag

objPB.WriteProperty "rs", RSOld
Set RSNew = objPB.ReadProperty("rs")

Set objPB = Nothing 
```

# windows-phone-8 - Windows Phone 工具包中缺少 winbase.inl

> ID：13475015
> 
> 赞同：1
> 
> 时间：2012-11-20T14:10:01.840
> 
> 标签：windows-phone-8, .lib

我有一些本机静态库（比如 MyLib），其中包括 windows.h，我正在尝试在我的 WP8 应用程序中重用它：

*   我已经复制了lib的项目文件，
*   重命名它（MyLibWP），
*   将平台工具集更改为`Windows Phone 8`
*   试图建造它。

之后我收到以下错误：

> C:\Program Files (x86)\Windows Phone Kits\8.0\Include\winbase.h(10170)：致命错误 C1083：无法打开包含文件：'winbase.inl'：没有这样的文件或目录

有点怪。检查了指定的文件夹 - 它确实说实话，文件丢失了。那么，所有这些东西有什么问题呢？

编辑：尝试手动将丢失的文件复制到 \Windows Phone Kits\8.0\Include\，但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:46:31.583

我会重新安装 SDK，我`winbase.h`在我的机器上，在`C:\Program Files (x86)\Windows Phone Kits\8.0\Include`

# javascript - 如何在更改文本输入时更新 html5 范围？

> ID：13475016
> 
> 赞同：14
> 
> 时间：2012-11-20T14:10:02.663
> 
> 标签：javascript, jquery, html

我有一个 html5 范围输入和一个文本框输入。当范围改变时，文本框将得到更新。但是我应该怎么做，当我在文本框中输入一个数字时，范围输入会更新？

这是我当前的代码：

```
<div>
<input id="slider" type="range" min="0" max="200" />
<input id="box" type="text" value="0"/>
</div>

<script>
var slider = document.getElementById('slider');
$('#box').change(function(){slider.value=parseInt(this.value)});
</script> 
```

当我编辑我的文本框时，我的滑块（范围输入）不会改变。我究竟做错了什么？难道我不应该使用slider.value 来更新滑块吗？如果这是原因，那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-03-10T05:35:12.630

嘿大家 那些不知道的人，我们不需要任何js或jquery

```
<form>
  <div>
    <input id="rangeInput" type="range" min="0" max="200" oninput="amount.value=rangeInput.value" />
    <input id="amount" type="number" value="100" min="0" max="200" oninput="rangeInput.value=amount.value" />
  </div>
</form>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-10T20:30:14.963

这是一个简单的脚本，只需执行以下操作：

```
<label for=range1>Slide, then press "Click to search slider value"</label>
<span>-1000 </span><input type="range" id="slide1" min="-1000" max="1000" value=0 step=0.25 onchange="printValue('slide1', 'rangeValue1')"><span> 1000    </span>
<i><input type=text id="rangeValue1" value=0 width=25% onchange="slideValue('slide1', 'rangeValue1');"><span> is the value of the slider now</span></i><br/><br/>
<script>
function printValue(sliderID, spanbox) {
    var x = document.getElementById(spanbox);
    var y = document.getElementById(sliderID);
    x.value = y.value;
}
function slideValue(sliderID, spanbox){
    var x = document.getElementById(spanbox);
    var y = document.getElementById(sliderID);
    y.value = parseInt(x.value);
}

window.onload = function() { printValue('slide1', 'rangeValue1'); }

</script> 
```

（当然，这仅在您按下回车并将值提交给“onchange”时才有效）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T03:52:30.890

在我这边，我只使用 Javascript 并添加了一个 onchange 事件。

我还将 value=0 添加到范围，以便从开头开始。

```
<div>
<input id="slider" type="range" min="0" max="200" value="0"/>
<input id="box" type="text" value="0"/>
</div> 
```

​​​​​​​​​</p>

```
var slider = document.getElementById('slider');
var box = document.getElementById("box");

slider.onchange = function(){
    box.value = slider.value;
} 
```

如果你想让它在两边都工作，请添加这个

```
box.onkeyup = function(){
      slider.value = box.value;      
} ​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T14:25:33.837

[这个小提琴有效](http://jsfiddle.net/jp9qY/)：

```
var slider = document.getElementById('slider');
$('#box').change(function(){
    slider.value=parseInt(this.value);
}); 
```

（实际上，这是您当前的代码。您是否导入了 jQuery 库？）
请记住，您已将滑块的范围设置为 200。尝试一些介于 0 和 200 之间的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-30T02:41:25.087

```
$('#box').change(function(){
    $('#slider').attr({"value":parseInt(this.value)});
}); 
```

可能会奏效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T03:43:52.033

这实际上很容易。这一切都写在[jQuery 工具 API 文档](http://jquerytools.org/documentation/rangeinput/index.html)中。所以我把我的代码改成了这个，它起作用了：

```
<div>
<input id="slider" type="range" min="0" max="200" />
<input id="box" type="text" value="0"/>
</div>
<script>
var sliderapi = $("#slider").data("rangeinput");
$('#box').change(function(){sliderapi.setValue(parseInt(this.value))});
</script> 
```

# jquery - 将两个功能合二为一

> ID：13475022
> 
> 赞同：0
> 
> 时间：2012-11-20T14:10:19.327
> 
> 标签：jquery, json, function

我已经多次重写我的脚本文件只是为了缩短它，除了两个功能之外，我已经用它很长时间了，

我希望将这些合并为一个

首先使用页面加载功能，这会在文档准备就绪时进行初始化

```
function pageload(elements, settings) {
elements = $.extend({}, defaultelements, elements || {});
settings = $.extend({}, defaultsettings, settings || {});

if( settings.url === '' ) {
    console.log('No soup for you!');
    movePage.prototype.pagein();
} else {
    $.ajax({
        url: location,
        data: {
            json: 'get_page',
            slug: settings.url
        },
        success: function(data) {
            var html = '<article id="' + data.page.slug + '" data-info="' + data.page.slug + '" class="subpage"></article>';

            if(settings.motion) return false;
                else settings.motion = true;

            elements.thumbs.before(html);
            var container = $('.subpage');
            elements.body.prepend('<div class="spinner"></div>');
            $('.spinner').hide();
            container.load(data.page.url).hide();

            elements.thumbs.stop().animate({
                'top' : '100%'
            }, settings.speed, settings.easing, function() {
                $('.spinner').fadeIn(259);
                setTimeout(function() {
                    $('.spinner').fadeOut(559);
                    setTimeout(function() {
                        container.fadeIn(659);
                    }, 450)
                    setTimeout(function() {
                        $('.spinner').remove();
                    }, 200)
                }, 1250);
                settings.motion = false;
                movePage.prototype.pagein();
            });
        }
    });
}
} 
```

还有导航json加载脚本

```
function navigation(elements, settings) {
elements = $.extend({}, defaultelements, elements || {});
settings = $.extend({}, defaultsettings, settings || {});

elements.navitem.live('click', function(event) {
    event.preventDefault();

    $('.current-menu-item').removeClass('current-menu-item');
    $(this).parent().addClass('current-menu-item');

    settings.url = $(this).html();
    $.ajax({
        url: location,
        data: {
            json: 'get_page',
            slug: settings.url
        },
        success: function(data) {
            var current = $('.subpage');

            if( settings.url == 'work' ) {
                settings.motion = false;
            } else if( current.attr('id') == settings.url ) {
                settings.motion = false;
                return;
            } else {
                var html = '<article id="' + data.page.slug + '" data-info="' + data.page.slug + '" class="subpage"></article>';

                if(settings.motion) return false;
                    else settings.motion = true;

                elements.thumbs.before(html);
                var container = $('.subpage');
                elements.body.prepend('<div class="spinner"></div>');
                $('.spinner').hide();
                container.load(data.page.url).hide();

                elements.thumbs.stop().animate({
                    'top' : '100%'
                }, settings.speed, settings.easing, function() {
                    $('.spinner').fadeIn(259);
                    setTimeout(function() {
                        $('.spinner').fadeOut(559);
                        setTimeout(function() {
                            container.fadeIn(659);
                        }, 450)
                        setTimeout(function() {
                            $('.spinner').remove();
                        }, 200)
                    }, 1250);
                    settings.motion = false;
                    movePage.prototype.pagein();
                    $('article:not(#' + data.page.slug + ')').remove();
                });
            }
        }
    });
});
} 
```

这里有没有人有一个解决方案，可以将这些功能变成一个我可以在页面加载和导航点击时调用的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:27:15.730

如果我正确理解您的问题... - 定义一个命名函数，包含您需要的函数调用。- 创建两个额外的（非常短的）函数，一个在页面加载时运行并调用较大的函数，另一个在 navclick 上运行并调用较大的函数

如果这不是您所需要的，那么是什么让这对您不起作用？

# android - 通过带有 unicode 描述的 csv 将应用内产品导入 google play

> ID：13475023
> 
> 赞同：3
> 
> 时间：2012-11-20T14:10:23.973
> 
> 标签：android

我一直在尝试使用 csv 导入功能将我的应用内产品导入 google play。

[http://developer.android.com/guide/google/play/billing/billing_admin.html#billing-bulk-add](http://developer.android.com/guide/google/play/billing/billing_admin.html#billing-bulk-add)

当文件包含标准 ascii 字符时，这一切都很好。当文件包含 unicode 字符时，它会崩溃。有没有人设法通过 csv 成功导入 unicode 字符？我有 13 种语言的 40 种产品，我宁愿不手动更新 unicode 标题和描述。

谢谢。

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T01:43:18.887

确保您的 csv 文件使用 UTF-8 编码保存。请注意，一些大脑受损的文本编辑器（如某些版本的 Windows 上的记事本）坚持添加字节顺序标记。不要使用这些编辑器之一；字节顺序标记不属于 UTF-8 流。

# r - 如何使用嵌套的while循环优化以下代码？多核选项？

> ID：13475039
> 
> 赞同：1
> 
> 时间：2012-11-20T14:11:19.250
> 
> 标签：r, optimization, while-loop, nested, multicore

我遇到了一段需要很长时间才能执行的代码的挑战，我想知道优化此代码执行时间的关键技巧是什么。我不得不承认输入 data.frame 很重要（140,000 行），而输出 data.frame 大约有 220,000 行。

输入 data.frame 的示例：

```
head(extremes)
X_BusinessIDDescription     min         max         month
ID105                       2007-12-01  2008-06-01  2007-12-01
ID206                       2007-12-01  2009-07-01  2007-12-01
ID204                       2007-12-01  2008-02-01  2007-12-01
ID785                       2008-07-01  2010-08-01  2008-07-01
ID125                       2007-11-01  2008-07-01  2007-11-01
ID107                       2007-11-01  2011-06-01  2007-11-01 
```

将使用循环扩展的 data.frame。启动 data.frame 以使结构到位。

```
output <- extremes[1,]
output
X_BusinessIDDescription     min         max         month
ID105                       2007-12-01  2008-06-01  2007-12-01 
```

其他值

```
IDcounter <- 1
IDmax <- nrow(extremes)
linecounter <- 1 
```

我想优化的while循环：

```
while (IDcounter <= IDmax){
    start <- extremes$min[IDcounter]
    end <- extremes$max[IDcounter] # add three months
    while(start <= end){
        output[linecounter,] <- extremes[IDcounter,]
        output$month[linecounter] <- start
        linecounter <- linecounter+1
        start <- seq(start, by ="month", length=2)[2]
    }
    IDcounter <- IDcounter + 1
} 
```

对于少数行，此代码执行得非常快，但随着输出的扩展，它似乎正在减慢。

输出看起来像这样：

```
head(output)
X_BusinessIDDescription     min         max         month
ID105                       2007-12-01  2008-06-01  2007-12-01
ID105                       2007-12-01  2008-06-01  2008-01-01
ID105                       2007-12-01  2008-06-01  2008-02-01
ID105                       2007-12-01  2008-06-01  2008-03-01
ID105                       2007-12-01  2008-06-01  2008-04-01
ID105                       2007-12-01  2008-06-01  2008-05-01 
```

对于极端文件中 min 和 max 之间的间隔中的每个月，都会创建一行。

我也有兴趣了解如何让这段代码为可用的计算资源的多个核心做好准备。好的，我承认这并不是真正的优化，但它会减少执行时间，这也很重要。

约赫姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:22:34.117

正如@CarlWitthoft 已经提到的，由于许多重复数据，您必须重新考虑您的数据结构。

在这里，您可以找到一种简单的矢量化方法：

```
 ## create all possible ranges of months
  ranges <- mapply(function(mi, ma) {seq(from=mi, to=ma, by="month")}, mi=extremes$min, ma=extremes$max)

  ## how many months per ID?
  n <- unlist(lapply(ranges, length))

  ## create new data.frame
  output <- data.frame(X_BusinessIDDescription=rep(extremes$X_BusinessIDDescription, n),
                      min=rep(extremes$min, n),
                      max=rep(extremes$max, n),
                      month=as.Date(unlist(ranges), origin="1970-01-01"), stringsAsFactors=FALSE) 
```

与您的方法比较：

```
extremes <- data.frame(X_BusinessIDDescription=c("ID105", "ID206", "ID204", "ID785", "ID125", "ID107"),
                      min=as.Date(c("2007-12-01", "2007-12-01", "2007-12-01", "2008-07-01", "2007-11-01", "2007-11-01")),
                      max=as.Date(c("2008-06-01", "2009-07-01", "2008-02-01", "2010-08-01", "2008-07-01", "2011-06-01")),
                      month=as.Date(c("2007-12-01", "2007-12-01", "2007-12-01", "2008-07-01", "2007-11-01", "2007-11-01")),
                      stringsAsFactors=FALSE)

approachWhile <- function(extremes) {
  output <- data.frame(X_BusinessIDDescription=NA, min=as.Date("1970-01-01"), max=as.Date("1970-01-01"), month=as.Date("1970-01-01"), stringsAsFactors=FALSE)
  IDcounter <- 1
  IDmax <- nrow(extremes)
  linecounter <- 1
  while (IDcounter <= IDmax){
    start <- extremes$min[IDcounter]
    end <- extremes$max[IDcounter] # add three months
    while(start <= end){
        output[linecounter,] <- extremes[IDcounter,]
        output$month[linecounter] <- start
        linecounter <- linecounter+1
        start <- seq(start, by ="month", length=2)[2]
    }
    IDcounter <- IDcounter + 1
  }
  return(output)
}

approachMapply <- function(extremes) {                       
  ranges <- mapply(function(mi, ma) {seq(from=mi, to=ma, by="month")}, mi=extremes$min, ma=extremes$max)

  n <- unlist(lapply(ranges, length))

  output <- data.frame(X_BusinessIDDescription=rep(extremes$X_BusinessIDDescription, n),
                      min=rep(extremes$min, n),
                      max=rep(extremes$max, n),
                      month=as.Date(unlist(ranges), origin="1970-01-01"), stringsAsFactors=FALSE)
  return(output)
}

identical(approachWhile(extremes), approachMapply(extremes)) ## TRUE

library("rbenchmark")

benchmark(approachWhile(extremes), approachMapply(extremes), order="relative")
#                      test replications elapsed relative user.self sys.self
#2 approachMapply(extremes)          100   0.176     1.00     0.172    0.000
#1  approachWhile(extremes)          100   6.102    34.67     6.077    0.008 
```

# haskell - 具有多参数功能的haskell中的点运算符

> ID：13475042
> 
> 赞同：6
> 
> 时间：2012-11-20T14:11:30.883
> 
> 标签：haskell, pointfree, dot-operator

我想在 haskell 中编写一个无点函数，为了简单起见，可以说我想做这个函数：

```
maxmin :: Ord a => a -> a -> a -> a
maxmin a b c = max a (min b c) 
```

我可以将其改进为

```
maxmin a b = (max a) . (min b) 
```

但是有没有办法摆脱a和b？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T14:26:53.407

我不会说这更简单，但你去：

```
maxmin :: Ord a => a -> a -> a -> a                                             
maxmin = (. min) . (.) . max 
```

`pl`（使用来自`lambdabot` [http://www.haskell.org/haskellwiki/Pointfree](http://www.haskell.org/haskellwiki/Pointfree)的工具生成）

```
lambdabot> pl maxmin a b c = max a (min b c)
maxmin = (. min) . (.) . max 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T16:05:08.103

为此，您只需使用[“三段定律”](https://stackoverflow.com/a/13147064/849891)，

```
(a `op` b) = (a `op`) b = (`op` b) a = op a b 
```

以便

```
import Control.Arrow

maxmin a b = (max a) . (min b)
           = (.) (max a) (min b)
           = uncurry (.) (max a, min b)
           = uncurry (.) . (max *** min) $ (a, b)
           = curry (uncurry (.) . (max *** min)) a b 
```

这也不太可读。:)

# android - 一键突出显示两个文本视图

> ID：13475043
> 
> 赞同：1
> 
> 时间：2012-11-20T14:11:33.223
> 
> 标签：android, textview, highlight

我有两个使用“选择器”资源作为背景的文本视图，因此当用户触摸它时它们会改变颜色。但是，我想这样做，以便当用户触摸其中一个文本视图时，两个文本视图都会突出显示。我该怎么做？

文本视图位于单独的线性布局中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:23:00.733

将它们组合成一个布局并将布局设置为可点击。此外，将两个文本视图的“重复父状态”设置为 true。

# mysql - 从mysql中的另一个表连接一行

> ID：13475047
> 
> 赞同：1
> 
> 时间：2012-11-20T14:11:39.490
> 
> 标签：mysql, sql

我在执行以下操作时遇到 sql 查询问题：

我需要从产品表中选择所有产品，并且对于每个产品，我需要从图像表中加入一个主图像（所有列）。产品图像表包含图像-产品关系和列 sortWeight。主图像是 sortWeight 最小的图像。

要获得主要产品图片，我会这样做：

```
SELECT * FROM images WHERE product=SOME_PRODUCT ORDER BY sortWeight ASC LIMIT 1; 
```

获取所有产品：

```
SELECT * FROM products; 
```

现在我需要以某种方式加入这两个，但问题是我不知道如何绕过以下限制：

```
SELECT P.* FROM products AS P 
LEFT JOIN 
    (SELECT * FROM images AS I WHERE I.product=P.id ORDER BY sortWeight ASC LIMIT 1) AS I1 
```

问题是 MySQL 不知道子查询中的 P.id 是什么。我也试过这样：

```
SELECT P.* FROM products AS P 
LEFT JOIN 
    (SELECT * FROM images AS I WHERE ORDER BY sortWeight ASC LIMIT 1) AS I1 ON (I1.product = P.id) 
```

但我认为这不会给出准确的结果，因为子查询有限制，它可能会从另一个具有较小 sortWeight 的产品中选择图像。

谁能帮我重写这个？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T14:22:54.650

尝试将其加入子查询，该子查询`min`为每个返回具有最小 () 排序权重的图像`product`。

这将返回每个产品的最小 sortWeight：

```
select product, min(sortWeight) as sortWeight
from images
group by product 
```

这是组合版本：

```
SELECT P.*, i.*
FROM products AS P 
left join images as i on p.id = i.product
LEFT JOIN (
    select product, min(sortWeight) as sortWeight
    from images
    group by product
) t on t.product = i.product and i.sortWeight = t.sortWeight 
```

# ios - UIButton 在 uiscrollView 中不起作用

> ID：13475050
> 
> 赞同：7
> 
> 时间：2012-11-20T14:11:45.703
> 
> 标签：ios, uiview, uiscrollview, uibutton

我有`scrollView`一个`UIView`作为子视图的。这有`UIView`一个子视图`UIButton`。只有`scrollView`连接到插座，其余全部在代码中。按钮不响应触摸，触摸时不变为蓝色。我该怎么做才能让它发挥作用？

这是代码：

```
 - (void)viewDidLoad
 {
       [super viewDidLoad];

      //......

      self.buttonHome = [UIButton buttonWithType:UIButtonTypeCustom];
      [self.buttonHome addTarget:self action:@selector(pressedHome:)
                                  forControlEvents:UIControlEventTouchUpInside];
      //....
      self.containerView =[[UIView alloc]initWithFrame:self.scrollView.frame];
      self.containerView.userInteractionEnabled=YES;

      [self.scrollView addSubview:self.containerView];
      [self.containerView addSubview:self.buttonHome];
  }

  -(void) pressedHome:(id)sender{
         //....
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:15:15.023

您必须设置视图的内容大小。那必须大于或等于scrollView的内容大小。

因为您的视图的默认尺寸是 320*480（3.5" 视网膜）和 320*568（4" 视网膜）。所以增加视野高度——

self.view.frame=CGRectMake(0, 0, 320, 700);

然后将此添加为您的滚动视图的子视图。

将带您找到解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:37:27.583

我解决它

```
 - (BOOL)touchesShouldCancelInContentView:(UIView *)view
  {
       return ![view isKindOfClass:[UIButton class]];
  } 
```

既然问题是放了一个按钮 UIButton

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:15:30.610

确保您的滚动视图没有吞下触摸：检查这个其他 SO[问题](https://stackoverflow.com/questions/11480201/how-to-stop-a-uiscrollview-from-swallowing-touches)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-18T21:26:13.740

使 containerView 视图高度与 scrollView 高度相同。

# drupal - 在 drupal 7 CCK 字段“list_text”中以编程方式添加允许值列表

> ID：13475054
> 
> 赞同：5
> 
> 时间：2012-11-20T14:11:51.090
> 
> 标签：drupal, drupal-7, drupal-modules, cck

我想知道是否可以以编程方式创建 CCK 字段实例并在单个阶段插入“allowed_values”。所以我尝试了这个：

```
 field_create_instance(array(
  'field_name' => 'card number',
  'entity_type' => 'payment_method',
  'bundle' => 'debit_card',
  'label' => t('Debit/Credit card'),
  'description' => t('Add card\'s number '),
  'widget' => array(
      'type' => 'options_select',
      'weight' => 0,
      'settings' => array('size' => 50),
   ),
  'required' => TRUE,
 )); 
```

我已经尝试过一些情况，即设置为 'setting' => array('allowed_values' => array( 1, 2, 3 ) ) 但什么也没发生。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:27:04.103

解决方案：

```
function MY_MODULE_install() {
  field_create_field(array(
    'field_name' => 'months',
    'type' => 'list_text',
    'cardinality' => 1,
    'settings' => array('allowed_values_function' => 'get_months'),
  'entity_types' => array('user', 'node'),
));
}

function get_months() {
  $months = array( '01', '02', '03',...'12');
  return $months;
} 
```

警告：回调函数必须始终位于自定义模块的 *.module 文件中。

# java - Mockito：多次调用同一个方法

> ID：13475057
> 
> 赞同：14
> 
> 时间：2012-11-20T14:12:00.290
> 
> 标签：java, unit-testing, junit, mocking, mockito

我正在用 Mockito 模拟一个对象，多次调用该对象上的相同方法，我想每次都返回相同的值。
这就是我所拥有的：

```
LogEntry entry = null; // this is a field
// This method is called once only.
when(mockLogger.createNewLogEntry()).thenAnswer(new Answer<LogEntry>() {
  @Override
  public LogEntry answer(InvocationOnMock invocationOnMock) throws Throwable {
    entry = new LogEntry();
    return entry;
  }
});
// This method can be called multiple times, 
// If called after createNewLogEntry() - should return initialized entry.
// If called before createNewLogEntry() - should return null.
when(mockLogger.getLogEntry()).thenAnswer(new Answer<LogEntry>() {
  @Override
  public LogEntry answer(InvocationOnMock invocationOnMock) throws Throwable {
    return entry;
  }
}); 
```

问题是，我的 getLogEntry 方法似乎只调用了一次。对于所有后续调用，`null`改为返回，我在测试中得到 NPE。
如何告诉 mockito 对所有调用使用存根版本？

==================================================== ===============
**为后代验尸**

我做了一些额外的调查，和往常一样，这不是图书馆的错，而是我的错。在我的代码中，调用`getLogEntry()`之前调用的方法之一`createNewLogEntry()`。NPE 是绝对合法的，测试实际上在我的代码中发现了一个错误，而不是我在 Mockito 中发现了一个错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T14:17:42.010

您的存根应该按您的意愿工作。来自[Mockito 文档](http://mockito.github.io/mockito/docs/current/org/mockito/Mockito.html#39)：

> 一旦被存根，该方法将始终返回存根值，无论它被调用多少次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T14:31:03.303

除非我遗漏了什么，否则如果您想为每个方法调用返回相同的对象，那么为什么不简单呢：

```
final LogEntry entry = new LogEntry()
when(mockLogger.createNewLogEntry()).thenReturn(entry);
when(mockLogger.getLogEntry()).thenReturn(entry);

...

verify(mockLogger).createNewLogEntry();
verify(mockLogger, times(???)).getLogEntry(); 
```

Mockito 将为每个匹配的调用返回相同的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T14:22:47.010

我错过了什么，还是以下就足够了？

```
LogEntry entry = null; // this is a field
when(mockLogger.createNewLogEntry()).thenAnswer(new Answer<LogEntry>() {
  @Override
  public LogEntry answer(InvocationOnMock invocationOnMock) throws Throwable {
    if (entry == null) {
      entry = new LogEntry();
    }
    return entry;
  }
});
when(mockLogger.getLogEntry()).thenAnswer(new Answer<LogEntry>() {
  @Override
  public LogEntry answer(InvocationOnMock invocationOnMock) throws Throwable {
    return entry;
  }
}); 
```

仅在`entry == null`.

# openerp - 将生物识别设备输出连接到 Open ERP 6.1

> ID：13475058
> 
> 赞同：3
> 
> 时间：2012-11-20T14:12:01.053
> 
> 标签：openerp, fingerprint, biometrics, hole-punching

是否可以将生物识别设备输出直接连接到 openERP？

我们公司有一个生物识别指纹机，在一天结束时，我们有一个包含所有员工出勤记录的 Excel 表。我们将这个excel表导入openERP。

但是无论如何，每当员工使用他们的指纹读取器时，记录就会被添加到 openERP 或数据库中。这样我们就不用每天一张一张地导入excel表格了。

感谢您的时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T08:42:52.270

这需要在时间和出勤方面进行开发，因此这在很大程度上取决于它的软件允许您做什么。通常，入门级解决方案不允许您做很多事情。

要写入 OpenERP，您可以使用[XML-RPC 调用](http://doc.openerp.com/v6.0/developer/6_22_XML-RPC_web_services/index.html)，或直接写入 OpenERPs 数据库中的表。

该[`import_sqlpush`](http://openerpmanagementsystem.blogspot.pt/2012/11/pushing-data-into-openerp.html)模块也可以是一个选项。我将它与[Pentaho PDI](http://www.pentaho.com/explore/pentaho-data-integration/)（又名 Kettle）一起使用来安排 OpenERP 和其他数据库之间的频繁数据交换。它甚至可以定期检查文件夹中的 excel 文件并在找到时将其导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-20T17:57:59.340

同样的问题已发布在[https://www.odoo.com/forum/help-1/question/is-it-possible-to-connect-biometric-device-output-directly-to-openerp-75132](https://www.odoo.com/forum/help-1/question/is-it-possible-to-connect-biometric-device-output-directly-to-openerp-75132)

根据该帖子中的最新更新，如果设备支持 WebAPI，则可以直接将生物识别机器与 openERP 连接。否则，您将不得不开发从机器读取考勤记录并使用 openERP 更新的中间件。

# c# - 如何使用 WrapPanel 在 ListBox 中显示垂直滚动条

> ID：13475059
> 
> 赞同：0
> 
> 时间：2012-11-20T14:12:00.257
> 
> 标签：c#, listbox, scrollbar, wrappanel

我有一个 ListBox，它在 WrapPanel 中显示其项目。ListBox 本身嵌入在 Border 中。但是我放入 ListBox 的项目越多，窗口就越大。如何防止这种情况并改为显示垂直滚动条？

我发现了其他几个帖子，但到目前为止没有任何效果。

![列表框](../Images/99e979a5d10069df3fcac9d8dba72742.png)

```
 <Border Background="WhiteSmoke" BorderBrush="Gray" BorderThickness="4" Margin="5"> 
            <ListBox Background="Transparent" BorderThickness="0" Height="Auto" 
                     ItemsSource="{Binding Path=Snapshots, RelativeSource={RelativeSource AncestorType=Demo:CameraCanvas}}"
                     SelectedItem="{Binding Path=Snapshots.SelectedSnapshot, RelativeSource={RelativeSource AncestorType=Demo:CameraCanvas}}"
                     ScrollViewer.VerticalScrollBarVisibility="Auto"
                     ScrollViewer.CanContentScroll="True"
                     >
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel 
                            Width="{Binding (FrameworkElement.ActualWidth), 
                            RelativeSource={RelativeSource AncestorType=ScrollContentPresenter}}" 
                            ItemWidth="{Binding (ListView.View).ItemWidth, RelativeSource={RelativeSource AncestorType=ListView}}"
                            MinWidth="{Binding ItemWidth, RelativeSource={RelativeSource Self}}" 
                            ItemHeight="{Binding (ListView.View).ItemHeight, RelativeSource={RelativeSource AncestorType=ListView}}" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border CornerRadius="5" Background="WhiteSmoke" BorderBrush="Gray" BorderThickness="2" Margin="5" Padding="2">
                            <StackPanel Orientation="Vertical">
                                <Image Source="{Binding Path=Image, UpdateSourceTrigger=PropertyChanged}" Width="64" Height="64" Stretch="Uniform" StretchDirection="Both" />
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            </Border> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:21:24.003

将 ListBox 放在 DockPanel 中，停靠面板的大小应受到限制。

阅读以下 msdn 主题[Panels Overview](http://msdn.microsoft.com/en-us/library/ms754152.aspx)

# oracle - TimesTen：无法连接到 TimesTen 守护进程

> ID：13475062
> 
> 赞同：1
> 
> 时间：2012-11-20T14:12:16.263
> 
> 标签：oracle, daemon, in-memory-database, timesten

我正在尝试使用 TimesTen insted 的家庭编写的 IMDB 创建一个原型应用程序。当我安装 TimesTen 时，会托管 TimesTen Data Manager 服务以及一些子守护进程和服务器。一切似乎都很好，但 ttDaemonAdmin 拒绝连接到主守护程序。当我从任务管理器中终止进程时，我可以使用 ttDaemonAdmin 运行它，但之后 none 命令不起作用。每次我得到一个“无法连接到守护进程。检查守护进程状态”，但它表明有一个守护进程（“守护进程 pid 3576 端口 53396 实例 tt1122_64”）。当我尝试运行 ttStatus 和 ttModInstall 命令时也会发生同样的事情，因此我无法更改端口号或任何其他选项。可能是什么问题？端口是否可能被阻塞或什么？我以具有管理员权限的用户身份登录，但时间安排进程的所有者是 SYSTEM。我尝试了可以​​在 oracle 文档中找到的所有可以想象的解决方案，但似乎没有任何效果。请帮忙！

提前感谢，

尼古拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T11:14:12.803

尝试使用您的时间安装用户。

```
ttisql "dsn= tt1122_64" 
```

如果您使用网络连接方式。利用

```
ttisqlcs "dsn= tt1122_64" 
```

尝试检查
1\. TNS_ADMIN
2.ORACLE 和 timesten lib
3.sys.odbc.ini
4.tnsnames.ora

# android - WebView 无限增长

> ID：13475064
> 
> 赞同：1
> 
> 时间：2012-11-20T14:12:20.340
> 
> 标签：android, webview, scrollview

我有一个显示用户输入字符串的 WebView。但是，我希望它能够在 iframe 中加载网页。

当我展示这个时：（必须启用 JavaScript 和插件才能对其进行测试）

```
<iframe src="http://santirivera.es" height="100%"/> 
```

WV 高度开始无止境地增长。

我的 WebView 在 ScrollView 内，因此滚动不是一个选项。

有什么方法可以让 WV 完全增长，直到它到达页面末尾，然后停止增长？

# mysql - 尝试检索存储函数的返回值时参数索引超出范围

> ID：13475065
> 
> 赞同：1
> 
> 时间：2012-11-20T14:12:24.813
> 
> 标签：mysql, jdbc, return-value, sqlexception, callable-statement

我有一个函数，它接受一些参数并生成一个唯一的 varchar id 以返回给应用程序。当我从我的 java 应用程序调用该函数时，它会执行（插入数据），但是当我尝试检索 outparam 时，它会引发 SQL 异常

参数索引超出范围（1 > 参数个数，即 0）。

爪哇代码：

```
String sql = "{?=call mytable.myFunction (?,?,?,?,?)}";
CallableStatement tmt = sqlConn.prepareCall(sql);
         tmt.registerOutParameter(1, Types.VARCHAR);
         tmt.setString(2, firstName);
         tmt.setString(3, lastName);
         tmt.setDate(4, new java.sql.Date(dob.getTime()));
         tmt.setString(5, null);
         tmt.setString(6, null);

         tmt.execute();

         String accountNumber = tmt.getString(1); 
```

我正在使用 Navicat 与 MySQL 一起工作，该过程在 Navicat 中执行并显示正确的返回值。但是，当我从 java 应用程序调用 tmt.getString(1) 时，它会引发上述异常。

请帮忙。谢谢你。

# mercurial - 如何仅将 Mercurial 队列补丁转换为本地更改？

> ID：13475073
> 
> 赞同：18
> 
> 时间：2012-11-20T14:13:14.917
> 
> 标签：mercurial, mercurial-queue

[这个答案](https://stackoverflow.com/questions/7297889/how-to-convert-n-local-topmost-commits-to-an-mq-patch)显示了如何将提交降级为补丁，但是如何将 mq 补丁仅转换为本地更改？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-20T14:13:14.917

**简短的回答**

确保应用了补丁，然后：

```
hg qrefresh nothing
hg qpop --keep-changes
hg qdelete "Name of patch" 
```

**长答案**

首先，您需要确保补丁没有跟踪任何更改。为此，请使用

```
hg qrefresh nothing 
```

`nothing`只是一个*不在*存储库中的随机文件名。我通常使用`hg qref 0`简洁。`hg qrefresh`接受可选的文件模式。如果给出，补丁将跟踪与模式匹配的更改 - 并且仅跟踪那些。当没有匹配文件模式时，补丁不会跟踪任何更改，因此只会有本地更改。

现在您有一个无用的补丁，并且您有一些本地更改。要清理，你可以这样做

```
hg qpop --keep-changes 
```

即使有本地更改，也要弹出补丁。最后，要删除死的、空的和未应用的补丁，您可以使用

```
hg qrm "Name of patch" 
```

您无法删除已应用的补丁，这就是您需要该`hg qpop --keep-changes`步骤的原因。

（注：`hg qrm`和`hg qremove`是 的别名`hg qdelete`。）

**如果使用 TortoiseHg**

使用 TortoiseHg，将补丁导出到剪贴板（工作台 > 右键单击​​补丁 > 导出 > 复制补丁），然后取消应用补丁，最后从剪贴板导入，目标为“工作目录”似乎可行。以下是演示此过程的一些屏幕截图： ![在此处输入图像描述](../Images/42bdfae024e56ae9b3ebc0a0b54d2821.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-04T18:34:49.347

一个可以说更简单的替代方案：

```
hg qfinish qtip
hg strip -k tip 
```

也就是说，完成补丁，然后删除生成的提交，同时保留其更改（`-k`选项`strip`）。

# iphone - 是否有适用于 iOS 的实时线性相位均衡器？

> ID：13475076
> 
> 赞同：1
> 
> 时间：2012-11-20T14:13:19.490
> 
> 标签：iphone, ios, audio, core-audio, equalizer

我认为 Core Audio 有一个 EQ 音频单元，但不是很幸运能找到关于它的好信息。这是一个线性相位均衡器吗？它支持多少个频段/频道？

是否有为 iOS 提供实时线性相位均衡器的开源库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:46:03.993

我几乎肯定内置的东西是 IIR（最小阶段）。

我不知道任何高质量且正确实施的开源 FIR（线性相位）滤波器。作为一个起点，Sox 表示它正在[开发 FIR 滤波器](http://sox.sourceforge.net/Docs/Features)。Audacity 也可能有一些简单的 FIR 滤波器。

# csv - Drools：CSV 中的合并单元格

> ID：13475081
> 
> 赞同：1
> 
> 时间：2012-11-20T14:13:30.447
> 
> 标签：csv, drools

我有一组存储在 Excel 文档中的 Drools 规则，由于各种原因需要用 .csv 文件替换。问题是 .csv 文件不支持合并单元格，因此即使不是不可能，也很难正确转换规则。

经过大量谷歌搜索，我发现使用“...”表示合并单元格的引用，但没有关于如何使用它的明确示例。源代码中的文档提供了更多提示，但仍然过于模棱两可；我尝试了无数种不同的解释，但都没有成功。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:13:09.440

我们和你有同样的问题。在查看了他们的源代码后：CsvParser + DefaultRuleSheetListener，我找到了解决方案。在这里，这篇文章可以帮助您节省时间。

仅在 ObjectType Matching 行中指定 ...，即 CONDTION、ACTION 行下方。从合并单元格的开头到合并单元格的结尾。请注意，对于继续合并的单元格，您不能只使用“...”，而是在规范化和修剪后代码会忽略它并将其视为空单元格并默默地忽略它。放任何东西，例如a...，b...等。这是示例。

另请注意，Drools 使用缓冲阅读器，而不是 CSV 阅读器，它无法处理跨越多行的一个单元格值。除非您有使用 CSVReader 的 CSVParser。

这是一个简化的例子。

```
条件，条件，条件，行动，行动
$Client:Client(),$Product:Product()...,anythingButNotJust3Dots...,,
"clientType == ""$param""","planType == ""$param""","accountType == ""$param""","documents.add(""$param"");" ,"documents.add(""$param"");"
个人，RRSP，现金，document1，document2
个人,RESP,CASH,document2,
个人，RIF，现金，document3，
个人,,保证金,document4,document6

```

# android - Android：使用 Unboundid LDAP SDK 时出现运行时错误

> ID：13475093
> 
> 赞同：0
> 
> 时间：2012-11-20T14:13:57.193
> 
> 标签：android, ldap, unboundid-ldap-sdk

我下载了 UnboundID LDAP SDK 并将其导入到我的 Eclipse Android 项目中。它利用 SDK 提供的现有 LDAPClient。

构建成功。但是，当我尝试启动应用程序时，它会给出以下运行时错误并且应用程序不会启动。

我是 Android 和 Eclipse 的新手。因此，任何帮助或提示将不胜感激。

如果需要任何详细信息，请告诉我。我可以添加它。

```
11-20 19:36:38.395: I/dalvikvm(636): Could not find method com.unboundid.ldap.sdk.Filter.create, referenced from method people.finder.PeopleFinder.goSearch
11-20 19:36:38.395: W/dalvikvm(636): VFY: unable to resolve static method 3247: Lcom/unboundid/ldap/sdk/Filter;.create (Ljava/lang/String;)Lcom/unboundid/ldap/sdk/Filter;
11-20 19:36:38.395: D/dalvikvm(636): VFY: replacing opcode 0x71 at 0x00d4
11-20 19:36:38.395: W/dalvikvm(636): VFY: unable to resolve exception class 451 (Lcom/unboundid/ldap/sdk/LDAPException;)
11-20 19:36:38.395: W/dalvikvm(636): VFY: unable to find exception handler at addr 0x113
11-20 19:36:38.405: W/dalvikvm(636): VFY:  rejected people/finder/PeopleFinder;.goSearch (Landroid/view/View;)V
11-20 19:36:38.405: W/dalvikvm(636): VFY:  rejecting opcode 0x0d at 0x0113
11-20 19:36:38.405: W/dalvikvm(636): VFY:  rejected /people/finder/PeopleFinder;.goSearch (Landroid/view/View;)V
11-20 19:36:38.405: W/dalvikvm(636): Verifier rejected class people/finder/PeopleFinder;
11-20 19:36:38.405: W/dalvikvm(636): Class init failed in newInstance call (people/finder/PeopleFinder;)
11-20 19:36:38.405: D/AndroidRuntime(636): Shutting down VM
11-20 19:36:38.405: W/dalvikvm(636): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-20 19:36:38.415: E/AndroidRuntime(636): FATAL EXCEPTION: main
11-20 19:36:38.415: E/AndroidRuntime(636): java.lang.VerifyError: people/finder/PeopleFinder
11-20 19:36:38.415: E/AndroidRuntime(636):  at java.lang.Class.newInstanceImpl(Native Method)
11-20 19:36:38.415: E/AndroidRuntime(636):  at java.lang.Class.newInstance(Class.java:1319)
11-20 19:36:38.415: E/AndroidRuntime(636):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
11-20 19:36:38.415: E/AndroidRuntime(636):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
11-20 19:36:38.415: E/AndroidRuntime(636):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-20 19:36:38.415: E/AndroidRuntime(636):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-20 19:36:38.415: E/AndroidRuntime(636):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-20 19:36:38.415: E/AndroidRuntime(636):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-20 19:36:38.415: E/AndroidRuntime(636):  at android.os.Looper.loop(Looper.java:137)
11-20 19:36:38.415: E/AndroidRuntime(636):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-20 19:36:38.415: E/AndroidRuntime(636):  at java.lang.reflect.Method.invokeNative(Native Method)
11-20 19:36:38.415: E/AndroidRuntime(636):  at java.lang.reflect.Method.invoke(Method.java:511)
11-20 19:36:38.415: E/AndroidRuntime(636):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-20 19:36:38.415: E/AndroidRuntime(636):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-20 19:36:38.415: E/AndroidRuntime(636):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:20:14.780

您需要确保在构建 .apk 文件时导出 jar。

在项目属性中，转到 Java Build Path > Order and Export ：填写与 LDAP sdk 对应的复选框

# wcf-ria-services - Silverlight WCF RIA 服务从 SQL 视图与 SQL 表中选择

> ID：13475097
> 
> 赞同：1
> 
> 时间：2012-11-20T14:14:04.433
> 
> 标签：wcf-ria-services, silverlight-5.0

我是通过一条曲折而令人沮丧的路线到达这个困境的，但我将从我现在所处的位置开始。有关信息，我正在使用 VS2010、Silverlight 5 以及最新版本的 Silverlight 和 RIA 工具包、SDK 等。

我的数据库中有一个视图（它现在实际上是一个索引视图，但这对行为没有影响）。出于测试目的（包括测试我的理智），我将视图复制为表（即相同的列名和定义），并将所有视图行插入表中。因此，如果我从查询分析器中的视图或表中选择 *，我会得到*相同*的结果。到目前为止，一切都很好。

我在 Silverlight 业务应用程序 Web 项目中创建了一个 EDF 模型，包括所有对象。

我基于模型创建了一个域服务，它为视图和表以及关联的查询对象创建了上下文类型和元数据。

如果我通过表查询在我的 Silverlight 项目中填充一个 Silverlight 列表框，它会返回表中的所有数据。

如果我通过 View Query 填充相同的 ListBox，它只返回一行，始终是集合中的第一行，但是它是有序的。事实上，如果我通过调试器深入研究内部工作原理，当它在服务中执行 ObjectContext Query 时，它会返回正确行数的结果集，但所有行都是相同的！如果我按升序排序，我得到第一行的 n 个副本，降序我得到最后一行的 n 个副本。

谁能把我从这里的痛苦中解脱出来，并告诉我为什么 View 不起作用？

阿德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:52:04.837

好吧，那是可以预见的——几乎每次我在论坛上提出问题时，我都会在等待响应涌入时偶然发现答案！

尽管已经通过了元数据和 model.designer 文件并确保所有“视图”和“表”类/方法定义等都是相同的，但它仍然显示出视图和表查询之间令人恼火的行为差异。所以问题一定是由数据库引起的，对吧？

果然，当我创建视图的“相同”表版本时，我没有注意到自己创建了 NOT NULL 列！尽管我使用 SELECT NEWID() 在视图上创建唯一键列，但数据库坚持认为视图中的 ID 列是 NULLABLE，这显然是导致问题的原因。

为了节省一些存储空间，我从使用 NEWID() 切换到使用 ROW_NUMBER() 来创建我的键列，但仍然存在“NULLABLE”属性问题。所以我然后将其更改为

SELECT ISNULL(ROW_NUMBER() (OVER...) , -1)

对于 ID 列，最后创建视图中的列 NOT NULL！尽管 NEWID() 和 ROW_NUMBER() 都不能生成 NULL 输出，但似乎您必须握住 SQL Server 的手，并使用 ISNULL 运算符对其进行确认，然后它才会相信自己。

完成此操作后，删除/重新创建了我的模型和服务文件，无需任何手动添加 [Key()] 属性或其他任何东西，一切都迸发出了光彩夺目的色彩生活。问题一直出在数据库上，而不是模型/服务/元数据定义。

希望这可以节省一些时间。现在我需要做的就是弄清楚为什么我两天前开始使用的原始存储过程方法不起作用 - 但至少我现在有了一个提示！

阿德

# jquery - 下载完成后如何关闭窗口

> ID：13475100
> 
> 赞同：0
> 
> 时间：2012-11-20T14:14:07.853
> 
> 标签：jquery

下载完成后如何关闭窗口

```
<html>
<hide>
  <script>
  $(function(){
   $("a").attr({
        "onclick":"javascript:window.close()",
        "target":"open"
        });

     $("a").click(function(){
     $("span").html("redy");
 });
  });

  </script>
</head>

<body>

<span></span> <br />
<a href="http://google.com">google</a>

</body>
</html> 
```

我想在加载页面后关闭窗口

但不要关闭窗口

但仅在新窗口中加载页面

我要在下载页面结束后，关闭窗口

……………………………………………………………………………………………………………………

**为了说明更多**

我想要当你按下按钮它打开一个新页面并打开后关闭窗口

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-20T14:29:14.177

下载后自动关闭窗口是特定于浏览器的。某些浏览器允许在下载窗口本身上检查此设置。

```
 <a href="http://www.somesite.com" target="_blank" onClick="javascript:window.close()"> 
```

这应该可以正常工作，但是在 fire-fox 上存在一些问题，因此您可以尝试解决方法

```
 onClick="javascript: setTimeout(window.close, 10);" 
```

设置 10 秒超时可能会有所帮助，但这只是一个技巧，可以有更好的方法来做到这一点....

# magento - Magento：sales_flat_order_payment 表上的 parent_id 字段是什么？

> ID：13475102
> 
> 赞同：3
> 
> 时间：2012-11-20T14:14:14.670
> 
> 标签：magento

桌子上的`parent_id`字段是做什么用的？`sales_flat_order_payment`我猜它是`entity_id`from `sales_flat_order`，但如果我正确阅读它，那么根据[http://www.magereverse.com/index/magento-database-diagram/version/1-7-0-1](http://www.magereverse.com/index/magento-database-diagram/version/1-7-0-1)`entity_id`表上的实际`sales_flat_order_payment`是指而是放在桌子上`entity_id`。`sales_flat_order`

在我们的生产机器上，parent_ids 都`entity_id`与`sales_flat_order_payment`. 在我们的开发机器上，有些匹配，有些不匹配。这是可以预料的吗？

使用 magento 1.7.0.1 谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T15:38:27.260

的输出`show create table sales_flat_order_payment;`是：

```
CONSTRAINT `FK_SALES_FLAT_ORDER_PAYMENT_PARENT_ID_SALES_FLAT_ORDER_ENTITY_ID` 
  FOREIGN KEY  (`parent_id`) REFERENCES `sales_flat_order` (`entity_id`) 
  ON DELETE CASCADE ON UPDATE CASCADE 
```

意味着你是绝对正确的`parent_id`，`entity_id`在`sales_flat_order`

# python - 将 lambda 表达式作为可调用传递给 dbus.Interface.connect_to_signal

> ID：13475107
> 
> 赞同：0
> 
> 时间：2012-11-20T14:14:33.667
> 
> 标签：python, lambda, signals, dbus

我有一个类“Listener”，它将回调连接到 D-Bus 信号。回调和信号名称由另一个类“客户端”提供。如果 Client 提供的回调传递给 connect_to_signal（在 dbus.Interface 上）作为接收信号时使用的回调，则一切都按预期工作，即当接收到连接的信号时调用类 Client 中的回调方法。

但是，如果我想在继续调用客户端回调之前“拦截”信号并评估有效负载，我想我可以使用 lambda 表达式并将其传递给 connect_to_signal 方法，如下例所示：

```
import dbus
from dbus.mainloop.glib import DBusGMainLoop
DBusGMainLoop(set_as_default=True)
from gi.repository import GObject

class Client(object):

    def __init__(self):
        bus = dbus.SystemBus()
        obj = bus.get_object("org.freedesktop.UDisks", "/org/freedesktop/UDisks")
        interface = dbus.Interface(obj, "org.freedesktop.UDisks")
        listener = Listener()
        signals_and_callbacks = {"DeviceAdded": self.device_added, 
            "DeviceChanged": self.device_changed}
        listener.listen_to_signals(interface, signals_and_callbacks)

    def device_added(self, payload):
        print "in device_added ", payload

    def device_changed(self, payload):
        print "in device_changed ", payload

class Listener(object):

    def listen_to_signals(self, interface, signals_and_callbacks):
        for signal, callback in signals_and_callbacks.items():
            cb = lambda x: self.signal_cb(x, callback)
            interface.connect_to_signal(signal, cb)

    def signal_cb(self, opath, subscriber_cb):
        print subscriber_cb
        subscriber_cb(opath)

if __name__ == "__main__":
    client = Client()
    mainloop = GObject.MainLoop()
    mainloop.run() 
```

But this does not work as intended. The signals gets connected, in this case the code reacts to both 'DeviceAdded' and 'DeviceChanged', but only the last callback added gets called. If I only connect one signal the behaviour is as expected, but as soon as I connect more than one signal, passing lambda expressions as callbacks, *both* signals triggers the call to the *last* callback added.

Does anyone have any idea what's going on here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:05:49.513

The basic problem is Python's scoping rules and how you set up the callback.
This example illustrates your problem (and the solution):

```
def test1():
    print("test1")

def test2():
    print("test2")

def caller(name, fn):
    print("calling function with name: {}".format(name))
    fn()

class Driver(object):
    def __init__(self):

        self.signals = []

    def connect_to_signal(self, name, what_to_call):
        self.signals.append((name, what_to_call))

    def run(self):
        for name, signal in self.signals:
            signal(1)

def main():
    signals = {'test1':test1, 'test2':test2}

    d = Driver()

    for signal, callback in signals.items():
        cb = lambda x: caller(signal, callback)
        #cb = lambda x,s=signal,c=callback: caller(s, c)  # TRY THIS INSTEAD!
        d.connect_to_signal(signal, cb)

    d.run()

if __name__ == '__main__':
    main() 
```

If you run this function as-is, you get the following:

```
calling function with name: test2
test2
calling function with name: test2
test2 
```

If you comment out the line starting cb = lambda x, and uncomment the following line, you now get the desired:

```
calling function with name: test1
test1
calling function with name: test2
test2 
```

The reason is that you need to `capture` the variables in your lambda expression, or their values will just be what they are at the end of your loop.

# sql - Oracle 解释行和/或字节的计划信方案

> ID：13475111
> 
> 赞同：0
> 
> 时间：2012-11-20T14:14:44.387
> 
> 标签：sql, oracle, optimization, sql-execution-plan

我一直无法找到可以清楚地定义这些值的含义的资源。我在下面有一个虚拟的解释计划，显示了我在 Oracle 中看到的所有不同字母：

```
Rows    |    Bytes

21P          10E  
11G          15G  
5M           7M 
```

我的问题是这些值是什么`G,P,E, and M`意思？此外，还有其他我没有见过的价值观吗？如果有，它们是什么意思，它们是什么字母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:24:58.940

我认为这些代表 Mega- Giga- Peta- 和 Exa- 这意味着您的 SQL 有一些非常糟糕的（tm）。你会不会错过一些非常大的表上的交叉连接？

检查事项：

*   确保所有涉及的表和索引的统计信息都是最新的
*   检查您是否有索引（如果可能）促进您的连接（即理想情况下两个表上连接列的索引）
*   完整性检查交叉连接的查询（从表 A 到表 B 的连接，没有“on”或“where”条件）

可能是 Oracle 优化器只是混淆了，也可能是您的查询确实返回了荒谬的数据量，无论是否有意。

# python - Python中的多处理：同时执行两个函数

> ID：13475113
> 
> 赞同：5
> 
> 时间：2012-11-20T14:14:45.903
> 
> 标签：python, parallel-processing, multiprocessing

我想同时执行以下两个功能。

```
from multiprocessing import Process
import os
import datetime

def func_1(title):
    now = datetime.datetime.now()
    print "hello, world"
    print "Current second: %d" % now.second
    print "Current microsecond: %d" % now.microsecond

def func_2(name):
    func_1('function func_2')
    now = datetime.datetime.now()
    print "Bye, world"
    print "Current second: %d" % now.second
    print "Current microsecond: %d" % now.microsecond

if __name__ == '__main__':
    p = Process(target=func_2, args=('bob',))
    p.start()
    p.join() 
```

而且我得到了微秒的差异。有没有办法同时执行两者？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T14:32:05.470

这是（1）通常是不可能的（“精确”部分）和（2）不是 Python 擅长的。如果您真的需要微秒级的执行精度，请使用 C 或 ASM，但比[COpython 的答案](https://stackoverflow.com/a/13475201/1110381)更接近的方法是忙于在两个不同的进程中等待商定的开始时间：

```
from multiprocessing import Process
import os
import datetime
from time import time

def func_1(title):
    now = datetime.datetime.now()
    print "hello, world"
    print "Current second: %d" % now.second
    print "Current microsecond: %d" % now.microsecond

def func_2(name):
    now = datetime.datetime.now()
    print "Bye, world"
    print "Current second: %d" % now.second
    print "Current microsecond: %d" % now.microsecond

def start_f1(name):
    while time() < start_time: pass
    func_1(name)

def start_f2(name):
    while time() < start_time: pass
    func_2(name)        

if __name__ == '__main__':
    procs = []
    procs.append(Process(target=start_f2, args=('bob',)))
    procs.append(Process(target=start_f1, args=('sir',)))
    start_time = time() + 10
    map(lambda x: x.start(), procs)
    map(lambda x: x.join(), procs) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T17:53:34.637

在编写以下代码的计算机上，此代码始终打印出相同的时间戳：

```
#! /usr/bin/env python3
from multiprocessing import Barrier, Lock, Process
from time import time
from datetime import datetime

def main():
    synchronizer = Barrier(2)
    serializer = Lock()
    Process(target=test, args=(synchronizer, serializer)).start()
    Process(target=test, args=(synchronizer, serializer)).start()

def test(synchronizer, serializer):
    synchronizer.wait()
    now = time()
    with serializer:
        print(datetime.fromtimestamp(now))

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T14:21:00.487

我不确定这是否会同时执行**，**但我认为它会让你更接近。

```
from multiprocessing import Process
import os
import datetime

def func_1(title):
    now = datetime.datetime.now()
    print "hello, world"
    print "Current second: %d" % now.second
    print "Current microsecond: %d" % now.microsecond

def func_2(name):
    now = datetime.datetime.now()
    print "Bye, world"
    print "Current second: %d" % now.second
    print "Current microsecond: %d" % now.microsecond

if __name__ == '__main__':
    procs = []
    procs.append(Process(target=func_2, args=('bob',)))
    procs.append(Process(target=func_1, args=('sir',)))
    map(lambda x: x.start(), procs)
    map(lambda x: x.join(), procs) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T15:57:37.797

`CPython`本质上是单线程的（谷歌“全局解释器锁”）。为了获得理论上的机会，您需要一个多核处理器，但即便如此，只有在非常低级别运行的操作系统才能做到这一点，即使那样您也需要特殊的硬件。您所要求的是，在任何实际意义上， 不可能的。

# c++ - C ++：getline不是参数列表的一部分

> ID：13475114
> 
> 赞同：2
> 
> 时间：2012-11-20T14:14:48.257
> 
> 标签：c++, getline

我对 C++ 很陌生，如果我的问题不够具体，请见谅。开始。

我试图`>>`为一个我称之为“书”的类重载运算符。“Book”包含“title”、“author”和“publisher”字符串对象、“student count”int 和“price”双变量。我的部分任务是从提供的 .txt 文件中获取这些值，并将值加载到它们相应的变量/对象中。所有值都在 .txt 文件中各自的行中，并且它们都遵循以下格式：

> ```
> //标题，作者，出版商，价格
> 
> 从 Java 开始
> 加迪斯  
> 斯科特/琼斯
> 105.99
> ```

我尝试使用`getline()`获取字符串值（我在将价格翻倍后使用临时字符串），但是当我输入它时，Visual Studio 说：

> 错误：没有重载函数“getline”的实例与参数列表匹配。

我不明白这一点。我包括了`<iostream>`和`<string>`，我相信它们都是`getline`工作所必需的。在转到主代码之前，我正在努力获取类文件，所以对于没有要发布的主代码，我深表歉意。这是课本的 .cpp 文件：

```
#include <iostream>
#include <string>
#include "book.h"

using namespace std;

book::book()
{
}

book::~book()
{
}

istream& operator>> (istream &in, book &bookInfo) {
    string temp;
    getline(in, bookInfo.title);
    return in;
} 
```

下面是第一个问题...

假设我可以`getline`上班，我还有另一个问题。Visual Studio 说这`bookInfo.title`是无法访问的，即使这是该类随附的 .cpp 文件。我什`istream&`至在类本身中将该函数列为友元函数：

```
#include <iostream>
#include <string>

class book {
    friend istream& operator>> (istream&, book&);

public:
    book();
    virtual ~book();

private:
    string title;
    string author;
    string publisher;
    double price;
}; 
```

应该注意的是，我对另一个类使用了几乎相同的语法，并且没有收到错误消息。

感谢您的快速回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:23:14.523

在您的标题中，您没有使用`std::`. 修复：

```
class book
{

    friend std::istream& operator>> (std::istream&, book&);

public:

    book();

    virtual ~book();

private:

    std::string title;
    std::string author;
    std::string publisher;
    double price;

}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T14:30:36.033

getline 是 std::istream 类的一种方法，请参见[此处](http://www.cplusplus.com/reference/iostream/istream/getline/)：

```
istream& getline (char* s, streamsize n );
istream& getline (char* s, streamsize n, char delim ); 
```

你应该在类实例上调用它，例如

```
your_input_stream.getline( your_params ... ) 
```

# html - 谷歌android浏览器中的text-aling：left align：left在页面的％20左右的列中制作文本如何解决？

> ID：13475116
> 
> 赞同：1
> 
> 时间：2012-11-20T14:14:58.517
> 
> 标签：html, android-browser

你好我有一个问题 text-align: left 或 align: left 不管我把文本卡在页面左侧的一个大列中如何解决这个问题？

代码示例：

```
<div class="maintext02"><span><p>text</p> 
```

```
.maintext02 {
font-family:Georgia, "Times New Roman", Times, serif; color:#545454; line-height:25px; font-size:12px;
width:943px;
padding-top:15px;
padding-bottom:15px;
text-align:left; 
```

}

# java - Helloworld Mule Rest WS 错误

> ID：13475119
> 
> 赞同：2
> 
> 时间：2012-11-20T14:15:15.563
> 
> 标签：java, web-services, rest, jersey, mule

我正在尝试让基本的 http rest helloworld 示例在 Mule 中工作，但出现此错误

`Could not find a transformer to transform "SimpleDataType{type=java.lang.String, mimeType='*/*'}" to "SimpleDataType{type=java.io.InputStream, mimeType='*/*'}". (org.mule.api.transformer.TransformerException). Message payload is of type: String`

这是我的配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:spring="http://www.springframework.org/schema/beans"
    xmlns:mulexml="http://www.mulesoft.org/schema/mule/xml" xmlns:jersey="http://www.mulesoft.org/schema/mule/jersey" 
    xsi:schemaLocation="  
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd  
    http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/3.3/mule.xsd  
    http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/3.3/mule-http.xsd  
    http://www.mulesoft.org/schema/mule/xml http://www.mulesoft.org/schema/mule/xml/3.3/mule-xml.xsd 
    http://www.mulesoft.org/schema/mule/jersey http://www.mulesoft.org/schema/mule/jersey/3.0/mule-jersey.xsd
    http://jersey.apache.org/core http://jersey.apache.org/schemas/core.xsd">

    <flow name="HelloWorld">
        <inbound-endpoint address="http://localhost:8081/api"/>
        <jersey:resources>
            <component class="com.helloworld.AdminApi"/>
        </jersey:resources>
    </flow> 
</mule> 
```

还有我的球衣服务班

```
@Path("version")
public class AdminApi {

    @GET
    @Produces("text/plain")
    public String sayHelloWithUri() {
        return "Version 999 " ;
    }
} 
```

我正在尝试使用以下方式访问服务：

```
http://localhost:8081/api/version 
```

我认为这应该是正确的网址，但没有运气，我总是收到上述异常消息。

任何人都知道这可能是什么？

编辑：

```
Root Exception stack trace:
org.mule.api.registry.ResolverException: There are two transformers that are an exact match for input: "class java.lang.String", output: "class java.io.InputStream". Transformers are: "_ObjectToInputStream(class org.mule.transformer.simple.ObjectToInputStream)" and "_ObjectToInputStream(class org.mule.transformer.simple.ObjectToInputStream)"
    at org.mule.transformer.graph.GraphTransformerResolver.resolve(GraphTransformerResolver.java:65)
    at org.mule.registry.TypeBasedTransformerResolver.resolve(TypeBasedTransformerResolver.java:93)
    at org.mule.registry.MuleRegistryHelper.resolveTransformer(MuleRegistryHelper.java:265)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:40:51.833

您的配置在 Mule 3.3.0 上运行得很好（在 Tomcat 之外，在 Eclipse 中测试），所以我怀疑问题来自您的 Web 应用程序类路径中缺少或重复的 JAR。

检查打包的 JAR和可能在 Tomcat目录`WEB-INF/lib`中手动添加的 JAR 。`/lib`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T09:39:10.993

```
<flow name="HelloWorld">
    <inbound-endpoint address="http://localhost:8081/api"/>
    <jersey:resources>
        <component class="com.helloworld.AdminApi"/>
    </jersey:resources>
</flow> 
```

并使用此网址。[http://localhost:8081/api/version](http://localhost:8081/api/version) 结果是 -Version 999

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-31T09:52:51.040

如果您使用 Mule Studio 3.3.0 运行，则必须输入 mimeType。例子：

```
 <flow name="RestServiceFlow" doc:name="RestServiceFlow">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8083"  doc:name="HTTP" mimeType="application/json"/>
        <jersey:resources doc:name="RESTUTCNotification">
            <component class="example.esb.restApi"/>
        </jersey:resources>
    </flow> 
```

# jquery - Jquery .hover 滑块暂停，

> ID：13475121
> 
> 赞同：0
> 
> 时间：2012-11-20T14:15:16.600
> 
> 标签：jquery, hover, slider, onmouseout

我正在尝试对名为 [http://wordpress.org/extend/plugins/easing-slider/](http://wordpress.org/extend/plugins/easing-slider/)的 wordpress 插件实现悬停暂停。

似乎正在使用以下 jquery 滑块来实际滑动 a 中的图像`<li><img src=""> </li>`：

```
/**
 * @version     $Id:  $Revision
 * @package     jquery
 * @subpackage  lofslidernews
 * @copyright   Copyright (C) JAN 2010 LandOfCoder.com <@emai:landofcoder@gmail.com>. All rights reserved.
 * @website     http://landofcoder.com 
```

我尝试了几种不同的选项，但无法使其正常工作

```
jQuery(document).ready(function(){  
jQuery("#lofslidecontent45").tabs({fx:{opacity: "toggle"}}).tabs("rotate", 5000, true);  
jQuery("#lofslidecontent45").hover(  
    function() {  
        jQuery("#lofslidecontent45").lof-main-wapper("rotate",0,true);  
    },  
    function() {  
        jQuery("#lofslidecontent45").lof-main-wapper("rotate",5000,true);  
    }  
) 
```

和这个：

```
 jQuery(document).ready(function(){  
jQuery('ul.lof-main-wapper').mouseover(function() {
jQuery(this).stop(true, true);
});
jQuery ('ul.lof-main-wapper').mouseout(function() {
if (jQuery(this).is(":visible") == true) {
    InOut(jQuery(this));
}
});
}); 
```

和这个：

```
 jQuery(function(){
jQuery("#lofslidecontent45").slides({
hoverPause: true
});
}); 
```

# c# - 远程服务器返回错误：(400) Bad Request (email account creator)

> ID：13475131
> 
> 赞同：0
> 
> 时间：2012-11-20T14:15:34.667
> 
> 标签：c#

我在我的电子邮件帐户创建者中收到此错误。我不知道问题可能出在哪里......它一直工作到上周。它一直说该帐户已经存在。我正在用 C# 做。

我有：

> ConfirmationBox、confirmationBox.Designer、ControlPanel、ControlPanel.Designer、LoginBox、LoginBox.Designer、Program和RandomPassword。

如果您想到问题可能出在哪里，请告诉我，这让我发疯。

并且用户不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:19:35.753

这是服务器错误，与 C# 无关。

检查该帐户是否已存在，尝试创建一个其他帐户。您还可以检查电子邮件服务器的区分大小写。

# java - 使用 TDTD 进行 Eclipse 分析 - 可能的堆问题

> ID：13475132
> 
> 赞同：2
> 
> 时间：2012-11-20T14:15:38.203
> 
> 标签：java, eclipse, profiling

我目前正在尝试使用 TDTD 和 Eclipse 3.7 Indigo 进行执行时间分析。正在分析的应用程序是一个 1k 测试用例的大型测试套件，在正常运行配置下运行大约 10 分钟。

![JVisualVM 屏幕截图 - 配置文件运行于 13:35 终止](../Images/d994f3659a546d3ace3fea964fb98fe3.png)

这是尝试分析测试套件时 Eclipse 的 JVisualVM 配置文件的屏幕截图。分析运行于 13:35 终止。大约 5 分钟后可以看出，分析达到某种上限，每秒事件降至最低（每秒几百个）。我已经将 Eclipse 的可用堆空间增加到 3gb。PermGen 空间最高可达 512mb，但保持在 120mb 左右，因此这似乎不是问题。

通常，在正常测试运行期间，堆空间消耗会高达 750mb 左右。更重要的是，在正常运行后，堆空间几乎立即被释放，而堆空间即使在分析终止后仍保持分配状态。

使用的 JRE 是 1.5.0.16。

Eclipse VMParameters：-Dosgi.requiredJavaVersion=1.5 -Xms196m -Xmx3072m -XX:MaxPermSize=512m

运行参数：-Xms512m -Xmx768m -XX:MaxPermSize=512m

知道如何进行这项工作或找到薄弱环节吗？

# eclipse - 颠覆性在结帐名称上创建，其中包含构建器

> ID：13475138
> 
> 赞同：1
> 
> 时间：2012-11-20T14:16:16.350
> 
> 标签：eclipse, svn, subversive

我目前面临一个奇怪的情况，我对此没有任何解释。来了……

我为我们公司提供了一个更新站点，为了测试那个更新站点，我通常会做一系列的事情。其中之一是从 Subversion 签出一个特殊的项目，该项目触发了许多 Checkstyle 和 PMD 规则。我使用这个项目至少有 4 年了，它一直都是这样工作的：

1.  在 Eclipse 中创建存储库位置。
2.  在那里选择您要签出的项目。
3.  从菜单`Check Out`中选择，然后使用默认值创建一个新的 (Java) 项目。

![在此处输入图像描述](../Images/90a8755ebbe3cb8b435d3dbed9ef5988.png)

生成的项目如下所示：

![在此处输入图像描述](../Images/526189961e01492956d9b951ab39c82c.png)

由于新版本（使用 Eclipse 3.7 SR2 Indigo 进行测试），我现在得到以下结果：

![在此处输入图像描述](../Images/0fd978089671bd4cefad406cab8d351d.png)

所以看起来建造者现在被添加到项目名称中（这对我来说似乎很荒谬）。我在这里错过了什么吗，这是一个功能，而不是一个错误？在 Subversive 的配置中有什么我可以做的吗？

我目前的配置是：

*   日食 3.7 SR2
*   视窗 7 64 位
*   JDK 1.7 64 位
*   颠覆性插件
    *   颠覆性 SVN Team Provider 1.0.0.I20121109-1700
    *   颠覆性 SVN 连接器 3.0.0.I20121109-1700

我[在 eclipse 中添加了一个错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=394761)，如果有答案，我会记录下来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:53:03.770

我在[Eclipse Bugzilla](https://bugs.eclipse.org/bugs/show_bug.cgi?id=394761)添加了一个错误，该错误已得到确认和修复。因此，将等待在 Subversive 的公共可用更新站点中解决该错误。

# api - 如何从 API 获取 Shopify 订单的正确税费

> ID：13475142
> 
> 赞同：0
> 
> 时间：2012-11-20T14:16:41.827
> 
> 标签：api, shopify, webhooks

我收到来自 Shopify 网络挂钩订单/创建的订单，需要存储适用于该订单的价格和税金。我在 Shopify 首选项中看到一些设置，这些设置允许我为每个送货目的地设置销售税。Shopify 还允许我选择收取运费税。我在订单上看到了“taxes_included”属性（我认为这意味着列出的价格是净价或毛价）。但似乎没有具体说明运费是否包含税费。有没有办法从 API 获取这些信息？

这是我在 web-hook 调用中传递的数据。如果信息可用，我可以进行进一步的 API 调用以获取信息，但无法在文档中找到所有信息。

我找到了国家 API，记录在这里：

```
http://api.shopify.com/country.html 
```

所以我应该能够从帐单地址 Province_code 和 country_code 中查找 line_items 的正确税率。

但是我找不到任何东西告诉我应该或不应该对航运公司征收什么税。

如果数据中确实提供了税收，那将更方便。它也应该更正确，因为在我收到回调和进一步请求税务信息之间，税率有可能（无论多么小）发生变化。有没有办法让 Shopify 在 web-hook 中提供该信息？

另外，到目前为止，我还未能在数据中的 tax_lines 属性中获取数据。我需要跳过任何箍来得到这个吗？

回调中提供的数据示例：

```
{"note":"",
 "total_discounts":"0.00",
 "cancel_reason":null,
 "shipping_lines":
 [{"code":"International Shipping",
   "price":"25.00",
   "source":"shopify",
   "title":"International Shipping"}],
 "landing_site_ref":null,
 "discount_codes":[],
 "currency":"CAD",
 "buyer_accepts_marketing":true,
 "customer":
 {"last_order_name":null,
  "note":null,
  "last_name":"Test",
  "state":"disabled",
  "updated_at":"2012-11-20T08:05:07-05:00",
  "last_order_id":null,
  "orders_count":0,
  "total_spent":"0.00",
  "created_at":"2012-11-05T10:50:23-05:00",
  "email":"test@example.com",
  "first_name":"Test",
  "accepts_marketing":true,
  "id":101986160,
  "tags":""},
 "token":"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
 "note_attributes":[],
 "gateway":"bogus",
 "cancelled_at":null,
 "name":"#1025",
 "processing_method":"direct",
 "updated_at":"2012-11-20T08:05:07-05:00",
 "payment_details":
 {"avs_result_code":null,
  "credit_card_bin":"1",
  "cvv_result_code":null,
  "credit_card_number":"XXXX-XXXX-XXXX-1",
  "credit_card_company":"Bogus"},
 "total_price":"44.00",
 "shipping_address":
 {"country":"United States",
  "last_name":"Test",
  "longitude":"-88.1632",
  "name":"Test Test",
  "address1":"Test",
  "province":"Alabama",
  "address2":"",
  "latitude":"30.3891",
  "city":"Test",
  "phone":"",
  "province_code":"AL",
  "first_name":"Test",
  "country_code":"US",
  "zip":"36523",
  "company":"Test"},
 "line_items":
 [{"variant_id":240781369,
   "quantity":1,
   "name":"product with stock code and shopify stock value",
   "properties":[],
   "title":"product with stock code and shopify stock value",
   "product_id":104741307,
   "variant_inventory_management":"shopify",
   "fulfillment_service":"manual",
   "sku":"some-stock-code",
   "variant_title":null,
   "requires_shipping":true,
   "price":"19.00",
   "vendor":"Shopify",
   "id":243081982,
   "grams":0,
   "fulfillment_status":null}],
 "closed_at":null,
 "billing_address":
 {"country":"United States",
  "last_name":"Test",
  "longitude":"-88.1632",
  "name":"Test Test",
  "address1":"Test",
  "province":"Alabama",
  "address2":"",
  "latitude":"30.3891",
  "city":"Test",
  "phone":"",
  "province_code":"AL",
  "first_name":"Test",
  "country_code":"US",
  "zip":"36523",
  "company":"Test"},
 "order_number":1025,
 "total_line_items_price":"19.00",
 "total_tax":"0.00",
 "tax_lines":[],
 "created_at":"2012-11-20T08:05:07-05:00",
 "landing_site":"\/",
 "fulfillments":[],
 "total_price_usd":"44.14",
 "financial_status":"authorized",
 "email":"test@example.com",
 "browser_ip":"1.2.3.4",
 "total_weight":0,
 "referring_site":"",
 "client_details":
 {"accept_language":"en-US,en;q=0.8",
  "browser_ip":"1.2.3.4",
  "session_hash":"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
  "user_agent":"Mozilla\/5.0 (X11; Linux x86_64) AppleWebKit\/537.1 (KHTML, like Gecko) Chrome\/21.0.1180.89 Safari\/537.1"},
 "subtotal_price":"19.00",
 "number":25,
 "taxes_included":false,
 "id":148179898,
 "cart_token":"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
 "fulfillment_status":null} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:46:08.860

假设对订单收取税款，所有税款都将显示在税线数组中。在测试中使用真实地址可能会更好。尝试著名的美国地标或其他东西。

如果商店设置为收取运费税，则该金额将包含在订单的税线中。您可以通过查看[Shop](http://api.shopify.com/shop.html)对象来了解商店是否收取运费税。

# python - 运行 sudo ps -ef 时织物中的奇怪效果

> ID：13475143
> 
> 赞同：1
> 
> 时间：2012-11-20T14:16:50.627
> 
> 标签：python, ssh, fabric

我的系统设置为允许某个用户在没有密码提示的情况下运行 sudo 命令。多年来，这一直运行良好。现在我遇到了一个非常不寻常的问题，其中某些命令提示输入 sudo 密码。我认为这是因为fabric 正在解析输出并决定在远端请求密码。

但是，实际上，这是错误的！没有请求密码（我可以使用 ssh 运行相同的命令，没有提示密码）。我至少认为该命令`ps -ef`有问题，我认为是因为正在生成的输出类型。

事实上，该命令`ps -ef`还显示了fabric 用于在远端运行此命令的命令，我认为这使fabric 令人困惑。可能认为 `sudo`输出中的 a 表示需要密码。这是阻止结构提示输入密码的输出部分：

```
[aaaa@bbbb:22] out: aaaa      9917  9790  0 15:10 ?        00:00:00 sshd: aaaa@notty 
[aaaa@bbbb:22] out: root      9918  9917  0 15:10 ?        00:00:00 sudo -S -p sudo password: 
```

是否可以告诉fabric no 来解析输出，或者至少不提示输入密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:51:33.297

在调用命令之前尝试将 shell 设置为 false。

```
env.shell = False 
```

# iphone - RestKit 序列化对象快捷方式

> ID：13475144
> 
> 赞同：1
> 
> 时间：2012-11-20T14:16:56.163
> 
> 标签：iphone, objective-c, ios, cocoa, restkit

有没有更短的方法来做到这一点？

我用一些谓词获取所有核心数据对象，然后使用 RestKit 和定义的映射将它们解析为 JSON……我仍然想使用 RestKit，但不能做得更简单吗？

```
- (NSArray *)serializedManagedObjectClass:(Class)managedObjectClass updatedSinceRevision:(long long)revision {

    NSArray * managedObjects = [managedObjectClass MR_findAllSortedBy:@"createdDate" ascending:YES withPredicate:[NSPredicate predicateWithFormat:@"revision > %lld", revision]];

    NSError * error = nil;

    NSMutableArray * serializedObjects = [[NSMutableArray alloc] initWithCapacity:[managedObjects count]];

    for (NSManagedObject * managedObject in managedObjects) {

        id object = [NSMutableDictionary new];

        RKObjectMappingOperation * op = [RKObjectMappingOperation mappingOperationFromObject:managedObject toObject:object withMapping:[self.objectManager.mappingProvider serializationMappingForClass:managedObjectClass]];
        BOOL success = [op performMapping:&error];

        if ((success) && (error == nil) && (object)) {
            [serializedObjects addObject:object];
        } else {
            ALog(@"Serialization problem with %@, possible error %@", managedObject, error);
        }

    }

    return serializedObjects;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:07:12.657

您不需要单独映射每个对象。只要您为该类设置了序列化映射，RestKit 就会在您尝试发送该对象的实例时处理序列化。看起来您已经为该类创建并分配了映射。

现在，只需将托管对象数组添加到要发送到服务器的参数字典中。RestKit 然后应该根据提供的映射映射每个对象。

# string - 在R中将文件从因子转换为字符

> ID：13475145
> 
> 赞同：-2
> 
> 时间：2012-11-20T14:17:04.277
> 
> 标签：string, r, character-encoding

> **可能重复：**
> [R：将 data.frame 列从因子转换为字符](https://stackoverflow.com/questions/2851015/r-convert-data-frame-columns-from-factors-to-characters)

跟进[问题](https://stackoverflow.com/questions/13471955/using-gsub-function-with-multiple-criteria-in-r/13472919#13472919)

假设我将一个 csv 文件上传到 R

```
DF <- read.csv("C:/Users/David Rogers/Desktop/FILENAME.csv") 
```

为了执行其他功能，我需要这个格式为 as.character 的文件。通常，我会从一开始就这样做：

```
DF <- read.csv("C:/Users/David Rogers/Desktop/FILENAME.csv", 
               header=TRUE, stringsAsFactors=FALSE) 
```

那会给我我需要的东西，但假设我不想从我的桌面上传这个文件。假设由于先前的操作，我已经在 R 中拥有它。如果我必须使用我的方法，我首先必须将文件导出为 csv，然后再次导入并添加上`"header=TRUE, stringsAsFactors=FALSE"`例中的函数。

是否有可能避免这种情况并简单地转换文件，而不是导出它并再次导入它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:49:42.307

用于`levels(dataframe$variable)[dataframe$variable]`进行从因子到字符的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:12:42.423

将第一行设为列名：

```
colnames(DF) <- DF[1,]
DF <- DF[-1,] 
```

将因子转换为字符（只是一个提示）：

`sapply(DF,class)=="factor"`将为您提供一个逻辑向量来选择哪些列是当前因素。

# java - 如何中断一个线程并在 Runnable 对象中捕获中断

> ID：13475153
> 
> 赞同：3
> 
> 时间：2012-11-20T14:17:50.503
> 
> 标签：java, multithreading

我有几个实现[Runnable](http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html)接口的对象，我在单独的[Threads](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html)中执行它们。基本上在`run()`Runnable 对象的方法中，我做了一些网络活动，包括调用在等待输入（来自网络）时阻塞的方法。请注意，我没有任何故意的暂停，即`Thread.sleep()`通话。任何暂停都是由调用可能阻塞的方法引起的。

这些 Runnable 对象在 GUI 的控制下，因此 GUI 界面和我希望提供给用户的一个功能是能够结束执行我的 Runnable 对象的线程，但是我无法理解如何执行此操作。

一种明显的方法是调用 Runnable 对象 Thread 的 Thread.interrupt() 方法，但是对 Thread 方法的调用如何传播到 Runnable 对象？例如我不能使用 try-catch，`InterruptedException`在 Runnable 对象中捕获似乎是不允许的；我的 IDE（netbeans）抱怨`InterruptedException`从未在`run()`方法中抛出。

我的代码在下面，为简洁起见。以下行在 GUI 线程的 GUI 代码中执行：

```
digiSearch = new DigiSearch(hostIP,this);
digiSearchThread = new Thread(digiSearch);
digiSearchThread.start(); 
```

以下是我的 Runnable 类，我希望/需要在其中捕获其执行线程的中断。

```
public class DigiSearch implements Runnable {

private String networkAdapterIP;
private DigiList digiList;

public DigiSearch (String ipAddress, DigiList digiList){
    networkAdapterIP = ipAddress;
    this.digiList = digiList;
}
@Override
public void run() {

    try{
        /*
 * Do some network and other activities here which includes calling some blocking methods.  However I would like to interrupt the run() method if possible by calling Thread.interrupt()
*/

    }  catch (Exception ex){
       digiList.digiListException(ex);
    } catch (Throwable t){
       System.out.println("Search thread interrupted");
    }
} 
```

}

有人可以启发我如何实现这一目标，或者解决我对中断线程的误解吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T14:35:08.040

你有任何阻止方法抛出`IOException`吗？如果是这样，这可能是您的`InterruptedException`占位符。其中许多方法是在`InterruptedException`引入之前编写的，因此它们不会更新会破坏遗留代码的接口，而是`InterruptedException`将`IOException`.

如果不是这种情况，你就有点卡住了。例如，如果您编写一个`Runnable`创建一个只工作且永不休眠的无限循环的 a，则中断该线程不会导致`InterruptedException`. `Runnable`定期检查是公司的责任`Thread.interrupted()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T15:17:13.803

这里需要注意几点：

1) 虽然我同意让用户停止执行线程的功能很有用，但我建议考虑线程已经在执行的操作。是否可以回滚操作？是否可以忽略该操作并停止执行？

2） Thread.stop() 和 Thread.destroy() 等是不推荐使用的方法（[http://docs.oracle.com/javase/6/docs/api/](http://docs.oracle.com/javase/6/docs/api/)）

那么通常如何中断线程执行呢？输入易失性状态变量。

```
public class MyClass implements Runnable {
    private volatile boolean isAlive=true;

   /**
    * Request thread stop by calling requestThreadStop() externally.
    */
    public void requestThreadStop() {
        isAlive = false;
    }

    @Override
    public void run() {
        while(isAlive) {
            //Do All your thread work
            //if isAlive is modified, the next iteration will not happen
        }
    }
} 
```

对于许多用例，上述实现都有效。但是，如果 run() 方法循环中的工作只是一次迭代并且可能会阻塞很长时间，则用户必须等待操作完成。

一旦用户从 GUI 请求终止，有没有办法几乎立即静默放弃线程的执行？也许。为此，您将不得不探索使用线程池。使用 ExecutorService，您可以为 shutdown() 和 shutdownNow() 方法提供挂钩。

为避免重复，您可以从之前的 stackoverflow 文章[How to stop the execution of Executor ThreadPool in java? 中找到更多关于线程池的此功能的信息？](https://stackoverflow.com/questions/1562079/how-to-stop-the-execution-of-executor-threadpool-in-java)

# asp.net - 使用 ASP.NET Web 窗体和路由处理返回 URL

> ID：13475157
> 
> 赞同：2
> 
> 时间：2012-11-20T14:18:03.240
> 
> 标签：asp.net, routing, webforms, url-routing, webforms-routing

我有一个 ASP.NET Web 表单应用程序（不是 MVC）设置使用在我的 Global.asax 文件中定义的路由，如下所示；

```
routes.Add("Login", New Route("login", New CustomRouteHandler("~/authenticate.aspx")))
routes.Add("AdditionalInfo", New Route("additional-information", New CustomRouteHandler("~/secure/additionalInfo.aspx"))) 
```

在整个应用程序中，需要对用户进行身份验证，这会将他们简单地重定向到登录屏幕。

我遇到的问题是如何将它们重定向回需要身份验证的位置？使用沼泽标准网址，我会做类似的事情；

```
http://www.site.com/login.aspx?returnURL=someReturnURL 
```

网络表单中的路线甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:25:41.860

在 Page_Load 事件中检索 QueryString 参数并将其保存在

```
ViewState["returnURL"] = Request.QueryString["returnURL"]; 
```

然后，在按钮单击事件中进行成功身份验证的重定向：

```
Response.Redirect(ViewState["returnURL"].ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T08:39:31.320

通常当用户点击登录按钮时，URL 不会改变。所以你仍然可以使用 'Request.QueryString["returnURL"];' 读取数据

# sql - SQL- 从 XML 父节点获取值（单独）

> ID：13475160
> 
> 赞同：1
> 
> 时间：2012-11-20T14:18:14.363
> 
> 标签：sql, sql-server

在我下面的查询中，它将所有重新编码集作为 XML 返回到单个变量中。但是我需要将所有父节点值放入单独的 while 循环中。只需运行以下查询：

---------只需声明临时表 ------------------------------------ -------------

```
IF OBJECT_ID('tempdb.dbo.##TestTable','U')IS NOT NULL DROP TABLE ##TestTable
CREATE TABLE ##TestTable(id int,Uname nvarchar(max),Uaddress nvarchar(max))
INSERT INTO ##TestTable values (1,'abc','NY')
INSERT INTO ##TestTable values (2,'def','WD')
INSERT INTO ##TestTable values (3,'','KL') 
```

* * *

```
DECLARE @XML XML
DECLARE @WhereClause nvarchar(max)
DECLARE @CountVal int
SELECT @CountVal=count(*) from ##TestTable
SET  @XML= (SELECT * FROM ##TestTable FOR XML PATH('ParentNode'), ELEMENTS XSINIL)
SELECT @XML
;with cte as
( select xr.value('fn:local-name(.)','nvarchar(max)') name, xr.value('.','nvarchar(max)') val  from @xml.nodes('//.') xq(xr)
    where xr.value('fn:local-name(.)','nvarchar(max)')<>''
)
SELECT @WhereClause= STUFF((select ' and ' + name + '='''+val+'''' from cte for xml path('')),1,4,'')
SELECT @WhereClause

WHILE (@CountVal>0)
BEGIN
    SELECT @WhereClause
    SET @CountVal=@CountVal-1
END
IF OBJECT_ID('tempdb.dbo.##TestTable','U')IS NOT NULL DROP TABLE ##TestTable 
```

当前示例 XML（在 @XML 中）：

```
<ParentNode xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><id>1</id><Uname>abc</Uname><Uaddress>NY</Uaddress></ParentNode><ParentNode xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><id>2</id><Uname>def</Uname><Uaddress>WD</Uaddress></ParentNode><ParentNode xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><id>3</id><Uname /><Uaddress>KL</Uaddress></ParentNode> 
```

当前@WhereClause 的输出是（全部在一个@WhereClause 变量中）：

```
ParentNode='1abcNY' and id='1' and Uname='abc' and Uaddress='NY' and ParentNode='2defWD' and id='2' and Uname='def' and Uaddress='WD' and ParentNode='3KL' and id='3' and Uname='' and Uaddress='KL' 
```

但我的预期输出是：

```
Firstly(in @WhereClause): id='1' and Uname='abc' and Uaddress='NY'
Secondly(in @WhereClause):id='2' and Uname='def' and Uaddress='WD'
Thirdly(in @WhereClause):id='3' and Uname='' and Uaddress='KL' 
```

. .

我怎么得到它。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:53:24.023

试试这个：

```
declare @WhereClause nvarchar(max)
declare @CountVal int

select @CountVal=count(*)
from ##TestTable

while @CountVal>0
begin
    select @WhereClause =
           (
             select ' and '+T.N.value('local-name(.)', 'nvarchar(max)')+'='+T.N.value('.', 'nvarchar(max)')
             from (
                    select *
                    from ##TestTable
                    where id = @CountVal
                    for xml path(''), type
                  ) as C(X)
               cross apply C.X.nodes('/*') as T(N)
             for xml path(''), type
           ).value('substring((./text())[1], 6)', 'nvarchar(max)')

    select @WhereClause
    set @CountVal=@CountVal-1
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T15:33:26.180

似乎迟到了，被误解了，那本来是我的方法

```
DECLARE @XML XML
DECLARE @WhereClause nvarchar(max)
DECLARE @CountVal int
SELECT @CountVal=count(*) from ##TestTable
SET  @XML= (SELECT * FROM ##TestTable FOR XML PATH('ParentNode'), ELEMENTS XSINIL)
SELECT @XML
;with cte as
( select xr.value('fn:local-name(.)','nvarchar(max)') name, xr.value('.','nvarchar(max)') val  from @xml.nodes('//.') xq(xr)
    where xr.value('fn:local-name(.)','nvarchar(max)')<>'' and xr.value('fn:local-name(.)','nvarchar(max)')<>'ParentNode'
)

SELECT @WhereClause= SubString((select Case when Name ='id'  then   CHAR(10) +''+ name + '='''+val+'''' else  ' and ' + name + '='''+val+'''' end from cte for xml path('')),2,100000000)
Print  @WhereClause 
```

# asp.net-mvc-3 - LINQ to Entities 仅支持转换 EDM 基元或枚举类型

> ID：13475162
> 
> 赞同：2
> 
> 时间：2012-11-20T14:18:30.923
> 
> 标签：asp.net-mvc-3, entity-framework, asp.net-mvc-4, entity-framework-4.1, webgrid

我创建了一个 MVC3 应用程序，用于`WebGrid`填充数据库中的数据。

我的数据库有一些列。说

`Id`| `FullName`| `Phone`|`Email`

**我可以对`Id`列进行排序。但是，如果我尝试对其他列进行排序，则会出现以下错误**

> 无法将类型“MvcApp.Models.Student”转换为类型“MvcApp.Models.Student”。LINQ to Entities 仅支持转换 EDM 基元或枚举类型。

我尝试调试并查看错误在哪里，我发现排序是完美的，但是当它返回数据`view`时会出错

我的查看代码：

```
@{
    ViewBag.Title = "listStudents";
    Layout = "~/Views/Shared/_Layout.cshtml";
    WebGrid grid = new WebGrid(Model, canPage: true, canSort: true, rowsPerPage: 3); 
}

@grid.Pager(WebGridPagerModes.NextPrevious)
        @grid.GetHtml(  //Error at this line
        htmlAttributes: new { id = "grdListStudents" },
    fillEmptyRows: true,
    headerStyle: "tblHeader",
    tableStyle: "tablestyle",
    mode: WebGridPagerModes.All,
    firstText: "<< First",
    previousText: "< Previous", nextText: "Next >",
    lastText: "Last >>",
    columns: new[]{
        grid.Column("intID","SId",canSort:true),
        grid.Column("strFirstName","Name",canSort:true,format:(item)=>item.strFirstName+"   "+item.strLastName),
        grid.Column("strPhone","Phone",canSort:true),
        grid.Column("strEmail","Email",canSort:true),
    }
    ) 
```

这是我在控制器中的代码：

```
public readonly IStudentInfo _istudentrepository; 

public studentController( IStudentInfo _iStudentRepository)
{
    this._istudentrepository = _iStudentRepository;
}

public ActionResult listBidder(string sort, string sortdir, int? page)
{
    int startPage = 0;
    IEnumerable<Students> sList;
    if (page.HasValue && page.Value > 0)
    {
        startPage = page.Value;
    }
    sList = _istudentrepository.GetList(startPage, PageSize, sort, sortdir);
    return View(sList);                
} 
```

接口 IStudentInfo 中的代码：

```
public interface IStudentInfo
{
    IEnumerable<Students> GetList(int intPage, int intRecords, string strSort, string sortdir);            
} 
```

模型中的代码：

```
private MyEntity _entity;

public StudentListRepository(MyEntity Ent)
{
    this._entity = Ent;
}
public IEnumerable<Students> GetList(int intPage, int intRecords, string strSort, string sortdir)
{

    var finalresult = new Students();
    var bidList = (from userInfo in _entity.tbl_UserInf
                   join user in _entity.tbl_User on userInfo.UserId equals user.UserId
                   select new Students()
                   {
                       intID=user.UserId,
                       strFirstName = user.FirstName,
                       strEmail = userInfo.EmailId,
                       intPhone=userInfo.Phone
                   }).OrderByDescending(m => m.intID);
    finalresult.TotalResult = bidList.Count();
    switch (strSort)
    {
        case "intID":
            if (sortdir == "ASC")
            {
                sList = sList.OrderBy(r => r.Id);
            }
            else
            {
                sList= sList.OrderByDescending(r => r.Id);
            }
            break;
        case "strFirstName":
            if (sortdir == "ASC")
            {
                sList = sList.OrderBy(r => r.strFirstName);
            }
            else
            {
                sList= sList.OrderByDescending(r => r.strFirstName);
            }
            break;
        case "strEmail":
            if (sortdir == "ASC")
            {
                sList = sList.OrderBy(r => r.strEmail);
            }
            else
            {
                sList= sList.OrderByDescending(r => r.strEmail);
            }
            break;
        //repeat same for phone
    }

    finalresult.lstStudents = sList.Skip(intPage * intRecords)
                                   .Take(intRecords)
                                   .ToList();
    return sList.AsEnumerable();
} 
```

我的代码有什么问题？请告诉我是否有人知道发生了什么。

请帮忙

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:03:12.130

尝试使用：

```
public ActionResult listBidder(string sort, string sortdir, int? page)
{
        int startPage = 0;
        if (page.HasValue && page.Value > 0)
        {
            startPage = page.Value;
        }
        var sList = _istudentrepository.GetList(startPage, PageSize, sort, sortdir);
        return View(sList);
}

public IEnumerable<Students> GetList(int intPage, int intRecords, string strSort, string sortdir)
{

        var finalresult = new Students();
        var bidList = (from userInfo in _entity.tbl_UserInf
                       join user in _entity.tbl_User on userInfo.UserId equals user.UserId
                       select new Students()
                       {
           intID=user.UserId,
                           strFirstName = user.FirstName,
                           strEmail = userInfo.EmailId,
                           intPhone=userInfo.Phone
                       }).OrderByDescending(m => m.intID);
       finalresult.TotalResult = bidList.Count();
       // There are some sorting and ordering
       finalresult.lstStudents = sList.Skip(intPage * intRecords).Take(intRecords).ToList();
       return bidList.ToArray(); 
```

}

# html - 在第一个加载页面中加载悬停图片

> ID：13475167
> 
> 赞同：0
> 
> 时间：2012-11-20T14:19:00.587
> 
> 标签：html, css

我有这个代码的 div

风格

```
#input{background:url(../image/main.png)}
#input:hover {background:url(../image/hover.png)} 
```

html

```
<div id="input">input div </div>
<div id="input">input div 2</div>
<div id="input">input div 3</div>
<div id="input">input div 4</div> 
```

当页面加载 main.png 加载并显示但当鼠标在 div 第一个 div 黑色和 2 或 3 秒后 hover.png 显示时。我的背景图片尺寸不大，但也许主机很弱，第一次加载两张图片并快速悬停图片显示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T14:21:20.643

您可以为此使用精灵，然后设置背景，`background-position`这样所有内容都会在第一时间加载。

sprite 最好的一点是它实际上使您的加载时间更快，因为每个图像都需要向服务器单独请求，但是如果您对大多数网站只请求一个文件，则可以显着增加加载时间。

这是一个很好的例子：

![在此处输入图像描述](../Images/7dcb2be66a1a57f70390cf768b538787.png)

代码将类似于：

```
.mydiv:hover{
   background-position:-30px 0px;
} 
```

[精灵如何工作的实时示例](http://jsfiddle.net/4qHGw/)

有关`background-positions`实际工作原理的进一步阅读，请查看以下内容：[http ://www.w3schools.com/cssref/pr_background-position.asp](http://www.w3schools.com/cssref/pr_background-position.asp)

# java - 带有继承的java静态初始化

> ID：13475172
> 
> 赞同：17
> 
> 时间：2012-11-20T14:19:17.003
> 
> 标签：java, inheritance, static, static-initialization

```
public class Main {

    public static void main(String[] args) {
        System.out.println(B.x);
    }

}
class A {
    public static String x = "x";
}
class B extends A {
    static {
        System.out.print("Inside B.");
    }
} 
```

问题：为什么输出会是：`x`. 但不是：`Inside B.x`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T14:27:15.903

引用`B.x`发出以下字节码：

```
getstatic       #3   <Field int B.x> 
```

根据[Java 虚拟机规范](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.4.3)

> Java 虚拟机指令 anewarray、checkcast、getfield、 **getstatic**、instanceof、invokedynamic、invokeinterface、invokespecial、invokestatic、invokevirtual、ldc、ldc_w、multianewarray、new、putfield 和 putstatic对运行时常量池进行**符号引用。**执行任何这些指令都需要 **解析其符号引用**。

**因此 JVM 应该将符号引用`B.x`**解析为. 字段分辨率是[这样指定的](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.4.3.2)：

> 要将未解析的符号引用从 D 解析到类或接口 C 中的字段，必须首先解析由字段引用给出的对 C 的符号引用（第 5.4.3.1 节）。
> 
> ...
> 
> **解析字段引用时，字段解析首先尝试在 C 及其超类中**查找引用的字段：
> 
> 如果 C 用字段引用指定的名称和描述符声明一个字段，则字段查找成功。声明的字段是字段查找的结果。
> 
> 否则，字段查找将递归地应用于指定类或接口 C 的直接超接口。
> 
> **否则，如果 C 具有超类 S，则将字段查找递归应用于 S。**
> 
> 否则，字段查找将失败。

换句话说，JVM 将解析`B.x`为`A.x`. 这就是为什么只`A`需要加载类。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T14:22:40.043

因为`B.x`实际上是`A.x`这样，所以只`A`需要加载类。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T16:45:51.603

[*Java 语言规范*，Java SE 7 版的第 12.4 节“类和接口的初始化”](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4)规定：

> *类的初始化*包括执行其`static`初始化程序和类中声明的静态字段（类变量）的初始化程序。
> 
> […]
> 
> `static`对字段的引用（[第 8.3.1.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.1)）只会初始化实际声明它的类或接口，即使它可能通过子类、子接口或实现接口的类的名称来引用。

So although — contrary to claims in some of the answers above — class `B` does have to be *loaded*, in order to determine that `B.x` is declared in `A`, class `B` is not *initialized* (i.e., its `static` initializers are not actually run) until you do something more specific to `B`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T14:21:51.007

`Class B`扩展`A`，其中有一个`public static variable x`您在调用时正在访问的`B.x`

如果您期望`Inside B.`输出，则必须创建该类的对象。执行所有静态代码块。或将该静态代码块移至类`A`:-)

当 JVM 加载类时，它将所有静态块分组并按照它们声明的顺序执行它们。

**编辑**（[**来源**](https://stackoverflow.com/a/1740664/1617189)）：简短的回答是静态在 Java 中不是继承的。相反，类中声明的静态成员（受“访问”限制）在派生类的命名空间中直接可见，除非它们被派生类中的声明“隐藏”。

> 因此，如果静态只属于类，为什么它会渗透到派生类？它不应该只保留在定义它的类中吗？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-20T14:33:36.683

它实际上不需要加载`B`，直到它直接访问静态成员`B`。请注意，此代码：

```
public class TestMain {
    public static void main(String[] args) {
        System.out.println(B.x);
        System.out.println(B.y);
    }

    static class A {
        public static String x = "x";
    }

    static class B extends A {
        public static String y = "y";
        static {
            System.out.print("Inside B.");
        }
    }
} 
```

将输出：

```
x
Inside B.y 
```

因为在访问`B`某些内容之前不需要加载。`B`

[这是关于这个主题的一个很好的链接。](http://www.jusfortechies.com/java/core-java/static-blocks.php)来自文章，“别忘了，这段代码将在 JVM 加载类时执行。JVM 将所有这些块组合成一个静态块然后执行。这里有几点我想提一下：”

# ruby - Heroku 数据库迁移因“无法连接”而失败

> ID：13475173
> 
> 赞同：0
> 
> 时间：2012-11-20T14:19:18.620
> 
> 标签：ruby, activerecord, heroku, migration

我有一段时间在 heroku 实例上获取 Postgres 数据库以允许我运行数据库迁移。

我对 Heroku 也很陌生，所以如果这是一个愚蠢的问题，请提前道歉:)

所以我的应用程序在 Heroku 上，并且可以成功连接到它的数据库——它不能*做*任何事情，因为表没有设置。我在代码中的连接块如下所示：

```
if ENV['DATABASE_URL']
ActiveRecord::Base.establish_connection(ENV['DATABASE_URL'])
else
ActiveRecord::Base.establish_connection(dbconfig['development'])
end 
```

环境变量由 Heroku 在部署时设置 - 这也有效。如果我在使用 Pry 或其他东西初始化所有内容后加入，则连接效果很好。dbconfig 哈希是从 my 填充的，`db/config.yml`它在本地运行良好。

我可以`rake db:migrate`在我的本地系统上很好。但是，尝试这个通过`heroku run rake db:migrate`给我一个错误转储，开头是：

```
rake aborted!
could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"? 
```

在这里我能想到的唯一一件奇怪的事情是我正在使用一个名为独立迁移的 gem（在 中声明`Gemfile`），它应该允许我在不引入 Rails 的其余部分的情况下执行此操作。

那么，我的问题是，为什么我的迁移没有运行？

# c# - 将所有 ListView 项目调整为相同大小

> ID：13475174
> 
> 赞同：0
> 
> 时间：2012-11-20T14:19:19.487
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

我有一个列表视图，显示来自网络的图像列表。图像在显示时加载。我在这个 ListView 的 CollectionView 中还有其他项目**（非图像） 。**

我希望列表视图中的所有项目都以相同的大小、高度和宽度显示。

列表中的所有图像大小相同，因此它适用于列表视图中的所有图像。但是，其他内容的大小不会调整为相同的大小。

我事先不知道图像的大小，因为它可能会有所不同，而且我必须将控件缩放到显示大小，这取决于所使用的设备是动态的。

我怎样才能做到这一点？

编辑：我澄清了我的要求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:41:22.830

如果我理解正确的话，您可以根据屏幕大小设置这些非图像的高度和宽度，然后将它们绑定。

我真的希望我在这里有意义！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:40:53.520

我通过为列表中的所有项目加载相同的图像作为背景并将不透明度设置为 0 解决了这个问题。这样，所有项目总是具有相同的大小。不漂亮，但它有效。

# javascript - 谷歌地图标记事件显示错误信息

> ID：13475176
> 
> 赞同：0
> 
> 时间：2012-11-20T14:19:22.137
> 
> 标签：javascript, html, maps

我的谷歌地图网络应用程序出现问题，我正在尝试向地图添加标记，然后当用户单击该标记时，会出现标记的名称。

我将有关每个标记的信息存储在一个数组中，如下所示：

```
var citymap = {};
      citymap['edinburgh'] = {
        center: new google.maps.LatLng(55.934120, -3.226569),
        population: 284,
        image:clueImage,
        color: '#ff0000',
        elementId:'clue1'
      };
       citymap['clue2'] = {
        center: new google.maps.LatLng(55.970783, -3.164594),
        population: 284,
        image:clueImage,
        color: '#ff0000',
        elementId:'clue2'
      }
         citymap['clue4'] = {
        center: new google.maps.LatLng(55.939583, -3.202092),
        population: 284,
        image:clueImage,
        color: '#ff0000',
        elementId:'clue3'
      }
         citymap['clue9'] = {
        center: new google.maps.LatLng(0, 0),
        population: 284,
        image:clueImage,
        color: '#ff0000',
        elementId:'clue1'
      } 
```

然后我循环遍历数组并将标记添加到地图：

```
for (var city in citymap) {

       var playerMarker = new google.maps.Marker({
      position: citymap[city].center,
      map: map,
      icon: citymap[city].image
      });

      google.maps.event.addListener(playerMarker, "click", function() {
      var elementConnected = citymap[city].elementId;
     console.log(elementConnected);
    });

        } 
```

一切都按预期工作，但是当我单击任何标记时，它们都会记录数组中最后一个标记的值。我知道这是因为那是循环完成的地方，但我想不出一种方法来完成这项工作。

帮助将非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:22:39.263

我认为这是人们在 Javascript 中普遍存在的“关闭”问题。有人可能会给出更好的方法，但我认为你需要这样的东西：

```
google.maps.event.addListener(playerMarker, "click", (function() {
    return function () {
        var elementConnected = citymap[city].elementId;
        console.log(elementConnected);
    };
})(city)); 
```

或者如果可能的话，取决于您在`click`活动中所做的其他事情，也许是这样的：

```
google.maps.event.addListener(playerMarker, "click", (function(elementId) {
    return function () {
        var elementConnected = elementId;
        console.log(elementConnected);
    };
})(citymap[city].elementId)); 
```

# asp.net-mvc-3 - MVC 3 @Html.DropDownListFor 模型绑定失败

> ID：13475183
> 
> 赞同：0
> 
> 时间：2012-11-20T14:19:58.470
> 
> 标签：asp.net-mvc-3, model-binding, html.dropdownlistfor

我正在将 VS 2010 与 MVC 3 和 EF 5 一起使用。我正在使用一种通用的下拉列表模式，该模式在除一个实例之外的所有实例中都能正常工作，我看不出为什么这个下拉列表未能在选择列表中选择正确的条目。以下是代码片段。

选择列表创建如下：

```
 public static IEnumerable<SelectListItem> GetOutcomes()
    {
        CodesEntities dataContextCodes = new CodesEntities(ConnectionString);

        return new SelectList(dataContextCodes.CodeOutcome.
            Where(x => x.DisplayOrder > 0).OrderBy(x => x.DisplayOrder), 
            "OutcomeCodeID", "Outcome");
    } 
```

这将返回正确的选择列表。

该视图具有以下代码：

```
@Html.DropDownListFor(m => m.OutcomeCodeID,
                PerintalFormViewModels.GetOutcomes(), "Please select an item") 
```

模型值`m.OutcomeCodeID`具有有效值 (1)，但未选择任何项目。

生成的 HTML 是：

```
<select id="CodeID" name="OutcomeCodeID" data-val-required="Outcome is required" data-val-number="The field outcome must be a number." data-val="true">
<option value="">Please select an item</option>
<option value="1">Termination</option>
<option value="2">Loss</option>
<option value="3">Still</option>
<option value="4">Live</option>
</select> 
```

我正处于头发撕裂，被逼疯的阶段。有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:36:42.930

你可以这样做：

```
public static IEnumerable<SelectListItem> GetOutcomes(string selectedID)
{
    CodesEntities dataContextCodes = new CodesEntities(ConnectionString);

    return new SelectList(dataContextCodes.CodeOutcome.
        Where(x => x.DisplayOrder > 0).OrderBy(x => x.DisplayOrder), 
        "OutcomeCodeID", "Outcome"
        , selectedID); // add this parameter
} 
```

或这个：

```
public static IEnumerable<SelectListItem> GetOutcomes(string selectedID)
{
    CodesEntities dataContextCodes = new CodesEntities(ConnectionString);

    return        
      dataContextCodes.CodeOutCome
      .Where(x => x.DisplayOrder > 0)
      .OrderBy(x => x.DisplayOrder)
      .ToList()
      .Select(x => new SelectListItem 
      { 
          Value = x.OutcomeCodeID.ToString(),
          Text = x.Outcome.ToString(),
          Selected = x.OutcomeCodeID == selectedID
      });
} 
```

然后像这样调用它：

```
@Html.DropDownListFor(m => m.OutcomeCodeID,
            PerintalFormViewModels.GetOutcomes(Model.OutcomeCodeID), 
            "Please select an item") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:35:12.573

您没有在任何地方设置默认选定值。

您用于 SelectList 的特定构造函数是这个：

```
public SelectList(
    IEnumerable items,
    string dataValueField,
    string dataTextField
) 
```

其中不设置默认值。要么你使用这个：

```
public SelectList(
    IEnumerable items,
    string dataValueField,
    string dataTextField,
    Object selectedValue
) 
```

并指定*selectedValue*或者您在要选择的项目上手动将 SelectedListItem 的 Selected 属性设置为 true (http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlistitem(v=vs.108 ).aspx)。

这是一个无耻的插件，但我仍然认为它是一个很好的资源：[http ://blinkingcaret.wordpress.com/2012/08/11/using-html-dropdownlistfor/](http://blinkingcaret.wordpress.com/2012/08/11/using-html-dropdownlistfor/)

# php - 使用 Facebook Like API 在网站上创建项目的候选清单/集合

> ID：13475189
> 
> 赞同：3
> 
> 时间：2012-11-20T14:20:13.843
> 
> 标签：php, javascript, facebook, facebook-like

我有一个客户网站，我们目前对网站上列出的项目有一个未充分利用的“候选清单”功能。在这种情况下，这些物品是待售物业，用户可以将他们感兴趣的物品添加到候选清单中以供将来参考。

我们最近还在网站上添加了 Facebook 的“Like”按钮，这些按钮已经被大量使用，进入门槛较低（我猜），因为用户已经登录到 Facebook。

因此，我想做的是修改属性候选列表功能，以便它只显示登录 Facebook 用户在客户端域上“喜欢”的属性列表。

我将如何使用 Facebook API 获取这些数据（通过 PHP 或 JS）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:13:00.380

开箱即用是不可能的。你有两种可能：

1.  显示一个社交插件（[Activity Feed](https://developers.facebook.com/docs/reference/plugins/activity/)）来显示提到的最近的动作（例如“喜欢”）。插件本身就像一个小部件，所以你根本无法设置它的样式。

2.  向用户请求“ [user_likes](https://developers.facebook.com/docs/reference/login/user-friend-permissions/) ”权限。如果用户验证了您的应用程序和附加权限，您可以执行 fql 查询以获取所有喜欢的项目。它比 (1) 稍微复杂一些，但是在提到的权限下，您拥有执行所需的自定义排序算法所需的所有数据。

# javascript - 正则表达式更改 html 标记内的文本

> ID：13475194
> 
> 赞同：0
> 
> 时间：2012-11-20T14:20:23.740
> 
> 标签：javascript, html, regex, replace, tags

首先，我是stackoverflow的新手，所以如果我在错误的部分发布了这个，我很抱歉。

我需要一个正则表达式来搜索 html 标记并将 - 替换为 _ 例如：

```
<TAG-NAME>-100</TAG-NAME> 
```

会成为

```
<TAG_NAME>-100</TAG_NAME> 
```

请注意，标签内的值不受影响。

任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:41:15.767

由于 JavaScript 是用于 DOM 操作**的**语言，因此您通常应该考虑正确解析 XML 并使用 JavaScript 的 DOM 遍历函数而不是正则表达式。

[下面是一些关于如何解析 XML 文档的示例代码，](https://stackoverflow.com/a/8412989/1633117)以便您可以使用 DOM 遍历函数。然后你可以遍历所有元素并更改它们的名称。这将自动排除文本节点、属性、评论和所有其他烦人的东西，你不想改变。

如果它**必须**是一个正则表达式，这里是一个临时的解决方案。请注意，如果您在属性名称或注释中有标签（甚至只有`>`），它会严重失败（实际上它也会将替换应用于注释）：

```
str = str.replace(/-(?=[^<>]*>)/g, '_'); 
```

`-`如果它后面跟着 a`>`而没有遇到`<`之前，这将匹配 a 。这个概念被称为[负前瞻](http://www.regular-expressions.info/lookaround.html)。`g`修饰符确保所有匹配项都被替换。

请注意，这会将替换应用于 . 前面的任何内容`>`。甚至属性值。如果您不希望这样，您还可以确保连字符和结尾之间有偶数个引号`>`，如下所示：

```
str = str.replace(/-(?=[^<>"]*(?:"[^<>"]*"[^<>"]*)*>)/g, '_'); 
```

不过，这仍会更改属性**名称**。

[这是一个正则表达式演示，显示了哪些有效，哪些无效。](http://regexpal.com/?flags=g&regex=-%28?=%5B%5E%3C%3E%22%5D*%28?:%22%5B%5E%3C%3E%22%5D*%22%5B%5E%3C%3E%22%5D*%29*%3E%29&input=%3CTAG-NAME%3E-100%3C/TAG-NAME%3E%0A%3Csome-other-tag%3E-100%3C/some-other-tag%3E%0A%3Cself-closing-tag/%3E-100%3C/some-other-tag%3E%0A%3Ctag%20attribute-name=%22attribute-value%22%3E-100%3C/tag%3E%0A%3C!--%20a%20comment%20with%20hy-phens%20--%3E%0A%3Csome-tag%20attribute=%22uh-oh%3E%22%20/%3E)尤其是评论行为相当可怕。当然，这可以通过更复杂的正则表达式来解决，但我想你知道这是怎么回事吗？您**真的**应该使用 XML 解析器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:35:31.723

```
s/(\<[^\>]+\>)\-([^\<]+\<\/)/\1_\2/ 
```

虽然我不熟悉 JS 库，但我很确定会有更好的库来解析 HTML。

# android - 通过单个 API 请求获取所有 Parse 对象

> ID：13475195
> 
> 赞同：2
> 
> 时间：2012-11-20T14:20:24.407
> 
> 标签：android, ios, parse-platform

是否可以使用 Parse iOS/Android SDK 通过单个 API 请求获取所有[Parse对象（不同类）？](http://parse.com)如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T22:31:37.347

从解析帮助[论坛](https://www.parse.com/questions/get-all-parse-objects-with-single-api-request#answer-at-the-moment-it-is-not-possible-to-do-this)：

> 目前，无法通过单个 API 请求执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T17:47:54.257

包括最新的库 ie Parse-1.3.1.jar 然后去 android 和 ios 的查询部分

[https://www.parse.com/docs/android_guide#queries](https://www.parse.com/docs/android_guide#queries)

# java - 检索 JSON 对象 Android

> ID：13475198
> 
> 赞同：1
> 
> 时间：2012-11-20T14:20:31.840
> 
> 标签：java, android, json, parsing

我正在尝试从 URL 获取 JSON 字符串，但我不断收到“NetworkOnMainThreadException”。我以为我将网络代码移到了另一个线程，但显然不是。

这是错误：![错误](../Images/25c86a6486139fe7203439854e492660.png)

JSON解析器

```
package com.example.jsonparsing;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.BasicHttpParams;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public String getJSONFromUrl(String url) {

        DefaultHttpClient   httpclient = new DefaultHttpClient(new BasicHttpParams());
        HttpPost httppost = new HttpPost("http://api.androidhive.info/contacts/");
        // Depends on your web service
        httppost.setHeader("Content-type", "application/json");

        InputStream inputStream = null;
        String result = null;
        HttpResponse response = null;
        try {
            response = httpclient.execute(httppost);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }           
        HttpEntity entity = response.getEntity();

        try {
            inputStream = entity.getContent();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        // json is UTF-8 by default i beleive
        BufferedReader reader = null;
        try {
            reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"), 8);
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null)
            {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return result = sb.toString();
    }
} 
```

主要活动

```
package com.example.jsonparsing;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class MainActivity extends Activity{

    // url to make request
    private static String url = "http://api.androidhive.info/contacts/";

    // contacts JSONArray
    JSONArray contacts = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        RetrieveJSONString retrieveJSON = new RetrieveJSONString();
        retrieveJSON.run();
        String whatever = retrieveJSON.getJSONString();
    }
}

class RetrieveJSONString implements Runnable{

    JSONParser jParser;
    String jsonString;

    public void run() {
         // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        String jsonString = jParser.getJSONFromUrl("http://api.androidhive.info/contacts/");

    }

    public String getJSONString(){

        return jsonString;
    }

} 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.jsonparsing"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

如果有人能对这个问题有所了解，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:50:17.940

您收到该错误是因为您尝试在 UI 线程上进行 HTTP 调用，并且您永远不应该这样做:) 请改用 AsyncTask。这是一个简单的例子：

```
GetJsonAsync getJson = new GetJsonAsync();
getJson.execute();

private class GetJsonAsync extends AsyncTask <String, Void, String> {

        @Override
        protected void onPreExecute() {
            // Do stuff before the operation
        }

        @Override
        protected String doInBackground(String... params){
            getJSONFromUrl();
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            // Do stuff after the operation
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T14:24:35.373

来自[Android SDK 文档](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。请参阅文档设计响应性。

本质上，您想做某种线程应用程序，否则 GUI 可能会卡住。查看 AsyncTask 或仅针对您的 JSON 解析需求进行线程化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T14:24:44.430

您应该调用`start()`a`Thread`而不是`run`直接调用该方法。您正在调用`retrieveJSON.run();`将在 UI 线程上运行的。

```
 new Thread(new RetrieveJSONString()).start(); 
```

* * *

我建议`AsyncTask`为此目的使用 a 而不是 Thread，因为您想在获取 JSON 后更新 UI。在 AsyncTask 中，当后台作业完成时，`onPOstExecute()`会调用该方法，您可以在其中更新 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T14:34:35.667

内部调用`getJSONFromUrl`方法`AscyTask`。当处理时间较长时会发生此异常。`AscyTask`使用此行调用此任务

> 新的 AppTask().execute();

```
public class AppTask extends AsyncTask<String, String, Void> {
   protected void onProgressUpdate(String... progress){}  protected void onPreExecute(){ }

   protected Void doInBackground(final String... args) {
       getJSONFromUrl();
       return null;
   }

   protected void onPostExecute(final Void unused) { }
} 
```

# c# - 如何反序列化 XML 中特定元素中属性的特定值？

> ID：13475206
> 
> 赞同：2
> 
> 时间：2012-11-20T14:21:12.093
> 
> 标签：c#, xml, xml-parsing, deserialization, xml-deserialization

我需要做的只是使用 System.XML 读取在 Packet Name="PacketOut" 中声明的 UnityObject 值。任何帮助将不胜感激，在此先感谢。这是截断的 XML：

```
 <IOConfig>

    <Packet Name="PacketOut" RemoteAddress="10.0.2.250" RemotePort="2020" NetworkInterface="ETH0" >
      <Signal Type="float" Name="x_out"        Unit="m/s"      Routing=""        UnityObject="CraneBoom"    ></Signal>
      <Signal Type="float" Name="y_out"        Unit="m/s"      Routing=""        UnityObject="CraneBoom"    ></Signal>
      <Signal Type="float" Name="z_out"        Unit="m/s"      Routing=""        UnityObject="CraneBoom"    ></Signal>
      <Signal Type="float" Name="alpha_out"    Unit="m/s"      Routing=""        UnityObject="CraneBoom"    ></Signal>
      <Signal Type="float" Name="theta_out"    Unit="m/s"      Routing=""        UnityObject="CraneBoom"    ></Signal>
      <Signal Type="float" Name="phi_out"      Unit="m/s"      Routing=""        UnityObject="CraneBoom"    ></Signal>

      <Signal Type="float" Name="x_out1"        Unit="m/s"      Routing=""       UnityObject="CraneSlewing" ></Signal>
      <Signal Type="float" Name="y_out1"        Unit="m/s"      Routing=""       UnityObject="CraneSlewing" ></Signal>
      <Signal Type="float" Name="z_out1"        Unit="m/s"      Routing=""       UnityObject="CraneSlewing" ></Signal>
      <Signal Type="float" Name="alpha_out1"    Unit="m/s"      Routing=""       UnityObject="CraneSlewing" ></Signal>
      <Signal Type="float" Name="theta_out1"    Unit="m/s"      Routing=""       UnityObject="CraneSlewing" ></Signal>
      <Signal Type="float" Name="phi_out1"      Unit="m/s"      Routing=""       UnityObject="CraneSlewing" ></Signal>

      <Signal Type="float" Name="x_out2"        Unit="m/s"      Routing=""        UnityObject="CraneBoom"    ></Signal>
      <Signal Type="float" Name="y_out2"        Unit="m/s"      Routing=""        UnityObject="CraneBoom"    ></Signal>
      <Signal Type="float" Name="z_out2"        Unit="m/s"      Routing=""        UnityObject="CraneBoom"    ></Signal>
      <Signal Type="float" Name="alpha_out2"    Unit="m/s"      Routing=""        UnityObject="CraneBoom"    ></Signal>
      <Signal Type="float" Name="theta_out2"    Unit="m/s"      Routing=""        UnityObject="CraneBoom"    ></Signal>
      <Signal Type="float" Name="phi_out2"      Unit="m/s"      Routing=""        UnityObject="CraneBoom"    ></Signal>
      </Packet>

    <Packet Name="PacketIn" LocalPort="2021" NetworkInterface="ETH0">
      <Signal Type="float" Name="x_in"        Unit="m/s"      Routing=""          UnityObject="CraneBoomCrash"></Signal>
      <Signal Type="float" Name="y_in"        Unit="m/s"      Routing=""          UnityObject="CraneBoomCrash"></Signal>
      <Signal Type="float" Name="z_in"        Unit="m/s"      Routing=""          UnityObject="CraneBoomCrash"></Signal>
      <Signal Type="float" Name="alpha_in"    Unit="m/s"      Routing=""          UnityObject="CraneBoomCrash"></Signal>
      <Signal Type="float" Name="theta_in"    Unit="m/s"      Routing=""          UnityObject="CraneBoomCrash"></Signal>
      <Signal Type="float" Name="phi_in"      Unit="m/s"      Routing=""          UnityObject="CraneBoomCrash"></Signal>

    <Signal Type="float" Name="x_in1"      Unit="m/s"      Routing=""          UnityObject="CraneBoomCrash"></Signal>
      <Signal Type="float" Name="y_in1"    Unit="m/s"      Routing=""          UnityObject="CraneBoomCrash"></Signal>
      <Signal Type="float" Name="z_in1"    Unit="m/s"      Routing=""          UnityObject="CraneBoomCrash"></Signal>
      <Signal Type="float" Name="alpha_in1"  Unit="m/s"      Routing=""          UnityObject="CraneBoomCrash"></Signal>
      <Signal Type="float" Name="theta_in1"  Unit="m/s"      Routing=""          UnityObject="CraneBoomCrash"></Signal>
      <Signal Type="float" Name="phi_in1"    Unit="m/s"      Routing=""          UnityObject="CraneBoomCrash"></Signal>
  </Packet>

  </IOConfig> 
```

我尝试了下面的代码，它在 XML 的其余部分中获取了 UnityObject 的所有值。

```
using UnityEngine;
using System.IO;
using System.Xml;
using System.Text; 
using System.Collections.Generic;
using System.Collections;

public class xmlreader : MonoBehaviour
{
    public static List<string> values; 
    public string gameObjects;

    public XmlReaderSettings settings;

    void Start ()
    {
            XmlReaderSettings settings = new XmlReaderSettings();
            settings.IgnoreWhitespace = true;
            settings.IgnoreComments = true;
            values = new List<string>();
        using ( XmlReader reader = XmlReader.Create("D://Docs/Unity3D/cdp/UDPApplication/Components/UDPIOServer.xml", settings) ) {

        while ( reader.Read() ) {
                    if ( reader.NodeType == XmlNodeType.Element) {

                        if ( reader.HasAttributes ) {

                        if ( reader.GetAttribute("UnityObject") != null ) {
                            gameObjects = reader.GetAttribute("UnityObject");
                            values.Add(gameObjects);

                }
                                }
                            }

                            }
                        }

    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:48:25.947

这可以通过一个非常简单的[XPath](http://msdn.microsoft.com/en-us/library/ms256086.aspx)表达式来完成：

```
XmlDocument doc = new XmlDocument();
doc.Load("D://Docs/Unity3D/cdp/UDPApplication/Components/UDPIOServer.xml");

XmlNodeList nodes =
    doc.SelectNodes("IOConfig/Packet[@Name='PacketOut']/Signal/@UnityObject");

List<string> result = new List<string>();
foreach (XmlNode node in nodes)
{
    result.Add(node.Value);
} 
```

`result`现在是`List<string>`那个样子`{"CraneBoom", "CraneBoom", ...}`。

此解决方案仅使用`System.Collections.Generic`和`System.Xml`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:44:53.807

你知道吗`xsd.exe`，它是 Visual Studio 附带的工具？

请注意，我重命名了您的 xml 文件 IOConfig.xml

尝试以下操作：

从文件中推断 xsd 架构并生成 IOConfig.xsd

`xsd.exe IOConfig.xml`

生成一个不错的 IOConfig.cs 文件，它可能会在您的旅程中为您提供帮助

`xsd.exe IOConfig.xsd /classes`

现在你只需要反序列化和处理你的对象：

```
 public void ReadIOConfig()
    {
        string fileName = @"C:\IOConfig.xml";
        XmlSerializer xs = new XmlSerializer(typeof(IOConfig));
        XmlReader reader = XmlReader.Create(fileName);
        IOConfig config = xs.Deserialize(reader) as IOConfig;
        var packetOut = (from configPacket in config.Items
                         where configPacket.Name == "PacketOut"
                         select configPacket).First();

        foreach (var signal in packetOut.Signal)
            Console.WriteLine(signal.UnityObject);

    } 
```

使用生成的文件：

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.269
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System.Xml.Serialization;

// 
// This source code was auto-generated by xsd, Version=4.0.30319.1.
// 

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public partial class IOConfig
{

    private IOConfigPacket[] itemsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Packet", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public IOConfigPacket[] Items
    {
        get
        {
            return this.itemsField;
        }
        set
        {
            this.itemsField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class IOConfigPacket
{

    private IOConfigPacketSignal[] signalField;

    private string nameField;

    private string remoteAddressField;

    private string remotePortField;

    private string networkInterfaceField;

    private string localPortField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("Signal", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public IOConfigPacketSignal[] Signal
    {
        get
        {
            return this.signalField;
        }
        set
        {
            this.signalField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Name
    {
        get
        {
            return this.nameField;
        }
        set
        {
            this.nameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string RemoteAddress
    {
        get
        {
            return this.remoteAddressField;
        }
        set
        {
            this.remoteAddressField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string RemotePort
    {
        get
        {
            return this.remotePortField;
        }
        set
        {
            this.remotePortField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string NetworkInterface
    {
        get
        {
            return this.networkInterfaceField;
        }
        set
        {
            this.networkInterfaceField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string LocalPort
    {
        get
        {
            return this.localPortField;
        }
        set
        {
            this.localPortField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class IOConfigPacketSignal
{

    private string typeField;

    private string nameField;

    private string unitField;

    private string routingField;

    private string unityObjectField;

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Type
    {
        get
        {
            return this.typeField;
        }
        set
        {
            this.typeField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Name
    {
        get
        {
            return this.nameField;
        }
        set
        {
            this.nameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Unit
    {
        get
        {
            return this.unitField;
        }
        set
        {
            this.unitField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Routing
    {
        get
        {
            return this.routingField;
        }
        set
        {
            this.routingField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string UnityObject
    {
        get
        {
            return this.unityObjectField;
        }
        set
        {
            this.unityObjectField = value;
        }
    }
} 
```

# three.js - THREE.js：从 THREE.WebGLRenderTarget 获取数据

> ID：13475209
> 
> 赞同：4
> 
> 时间：2012-11-20T14:21:22.920
> 
> 标签：three.js, render-to-texture

A`THREE.Texture`可以用作材质中的贴图，并具有称为“图像”的属性。A`THREE.WebGLRenderTarget`可以用作材质中的贴图，但没有称为“图像”的属性。

我将如何从 a 中检索纹理数据`WebGLRenderTarget`？我想将它保存到一个文件中（或者，如果不可能的话，作为一个字节数组）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-30T03:22:00.147

现在的新功能：

```
WebGLRenderer.readRenderTargetPixels ( renderTarget, x, y, width, height, buffer ) 
```

将来自 renderTarget 的像素数据读取到您传入的缓冲区中。缓冲区应该是一个用 new Uint8Array(renderTargetWidth * renderTargetWidth * 4) 实例化的 Javascript Uint8Array，以说明大小和颜色信息。这是 gl.readPixels 的包装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T15:13:14.137

我自己没有尝试过，但应该可以使用 WebGL 的[readPixels](http://www.khronos.org/registry/webgl/specs/latest/#5.14.12)函数传递渲染目标的（私有）`__webglTexture`属性来获取字节数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-22T13:51:39.397

将 THREE.WebGLRenderTarget 转换为 2D 画布的代码片段：

```
// allocate RGBA array

let pixels = new Uint8Array(_floor_width * _floor_height * 4);

let can = document.createElement("canvas"), ctx, ctxData, color;

// _floor_target is instance of THREE.WebGLRenderTarget of dimension _floor_width x _floor_height and _renderer is THREE.WebGLRenderer

_renderer.readRenderTargetPixels(_floor_target, 0, 0, _floor_width, _floor_height, pixels);

can.width = _floor_width;
can.height = _floor_height;

ctx = can.getContext('2d');
ctxData = ctx.getImageData(0, 0, can.width, can.height);

for (var fy = 0; fy < _floor_height; fy++) {
    for (var fx = 0; fx < _floor_width; fx++) {

        // retrieve exact rendered pixel

        color = [
            pixels[fy * _floor_width * 4 + fx * 4 + 0],
            pixels[fy * _floor_width * 4 + fx * 4 + 1],
            pixels[fy * _floor_width * 4 + fx * 4 + 2],
            pixels[fy * _floor_width * 4 + fx * 4 + 3]
        ];

        // put pixel to canvas image data (this whole thing might be done much faster)

        ctxData.data[(fy * can.width * 4) + (fx * 4) + 0] = color[0];
        ctxData.data[(fy * can.width * 4) + (fx * 4) + 1] = color[1];
        ctxData.data[(fy * can.width * 4) + (fx * 4) + 2] = color[2];
        ctxData.data[(fy * can.width * 4) + (fx * 4) + 3] = color[3];

    }
}

// update canvas image data

ctx.putImageData(ctxData, 0, 0);

document.body.appendChild(can); 
```

# java - 在 Java 中有效地解析和写入文件

> ID：13475211
> 
> 赞同：1
> 
> 时间：2012-11-20T14:21:30.863
> 
> 标签：java, string

我有一个没有换行符的文件。我想要每 160 个字符换行一个字符。

为此，我阅读了文件，然后执行以下操作：

```
String newLine = "";
int lineSize = 160;
char[] line = new char[lineSize];
while (rEntrada.read(line) > 0) {
   newLine = new String(line);
   String parsedLine = parseLine(newLine, date);
   fw.write(parsedLine);
} 
```

其中 parseLine 负责对行进行一些额外的解析。我的主要问题是在 while 循环中执行“新字符串”是否效率低下或不推荐，或者你们是否看到在此代码中可以做得更好的任何事情。我真的想在编码方面做得更好！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:38:05.057

试试这个。

*   首先阅读单行。

    ```
    FileReader r = new FileReader(new File("<file-name>"));
    // A buffered reader is fast
    BufferedReader = reader = new BufferedReader(r); 
    ```

    ```
    String line = reader.readLine();
    // Also use try-catch blocks! 
    ```

*   现在遍历字符串并`\n`在每 160^个位置插入 a 。

    ```
    StringBuilder sb = new StringBuilder();
    int counter = 0; 
    ```

    ```
    for (int i=0; i<line.length(); i++){
        sb.append(line.charAt(i));
        counter++;
        if (counter==160){
            sb.append("\n");
            counter = 0;
        }
    } 
    ```

    ```
    line = sb.toString(); 
    ```

*   现在您可以将这一行写入文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:28:06.243

对我来说看起来不错，我能看到的唯一低效率是如果`parseLine`可以写得更好，可能会被传递`line`而不是`newLine`. 这取决于`parseLine`实际做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:26:37.477

看一下 StringBuffer ，看看它在这种情况下是否不可用。

[字符串缓冲区 API 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html)

如果您不是多线程的，[StringBuilder也可能很有趣。](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)

# c# - 如何自定义列表框当前选中项的颜色？

> ID：13475216
> 
> 赞同：1
> 
> 时间：2012-11-20T14:21:54.683
> 
> 标签：c#, wpf, listbox, selecteditem

这个问题源于我在stackoverflow中的最后一个问题。自动滚动到特定项目的问题已解决，但现在我想将所选项目背景设置为透明或白色。我怎样才能做到这一点？？

**更新 1**

```
<ListBox ItemsSource="{Binding SomeData}"
         SelectedIndex="{Binding SomeIndex}">
   <ListBox.ItemsPanel>
      <ItemsPanelTemplate>
         <WrapPanel Orientation="Vertical" />
      </ItemsPanelTemplate>
   </ListBox.ItemsPanel>
   <ListBox.ItemTemplate>
      <DataTemplate>
         <SomeChart DataContext="{Binding }" />
      </DataTemplate>
   </ListBox.ItemTemplate>
 </ListBox> 
```

对于这个例子，我需要一种自定义选定项颜色的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:58:44.207

从窗口中的简单列表框开始：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="MainWindow"
    Width="525"
    Height="350">
<Window.DataContext>
    <local:ViewModel />
</Window.DataContext>
<Grid Name="LayoutRoot">
    <ListBox ItemsSource="{Binding Elements}"/>
</Grid> 
```

选择 ExpressionBlend 中的列表框：

![在此处输入图像描述](../Images/93b5bd2e2a4114c3b1a318892f05fa51.png)

然后在上级菜单中选择“对象”并选择：

![在此处输入图像描述](../Images/b97c046f9f6f1ab567bac9aaaafa8fcf.png)

这将创建一个新的 ListBoxItemStyle，并为新样式创建一个基于原始样式的新 ListBoxItem 模板。在默认模板中，已经有一些逻辑可以根据触发器和视觉状态更改元素的视觉效果。元素被选中时的视觉效果由触发器驱动，您可以对其进行修改以满足您的需求。

选择视图触发器。会有一些由“IsSelected”属性驱动的触发器。在那里，您可以更改项目在选择、选择和禁用等时的外观。

![在此处输入图像描述](../Images/7e5141f26602a5676707b5b3d254dea9.png)

只需从现有触发器中选择您想要的触发器（例如，“IsSelected = True”）并使用 Blend 录制修改模板元素的属性。默认情况下，有一些针对“目标元素”的属性更改，即模板本身，如“前景”。其他目标元素是模板，如边框“Bd”。

当然，您可以从头开始创建 ListBoxItemStyle，但如果您只想进行简单的更改，这种方式会更快。

# java - Java中数组的哈希值

> ID：13475226
> 
> 赞同：3
> 
> 时间：2012-11-20T14:22:16.760
> 
> 标签：java, data-structures

我正在尝试在 Java 中实现 Hash of Hashes of Arrays，并认为如果我将使用匿名 blah blah 会很好（我忘记了确切的术语/我不知道如何称呼它）。

```
HashMap<String, HashMap<String, String[]>> teams = 
    new HashMap<String, HashMap<String, String[]>>(){{
        put("east", new HashMap<String, String[]>(){{
            put("atlantic", new String[] { "bkn", "bos", "phi","tor", "ny" });
            put("central", new String[] { "chi", "cle", "det", "ind", "mil" });
            put("southeast", new String[] { "atl", "cha", "mia", "orl", "wsh" });
        }});
        put("west", new HashMap<String, String[]>(){{
            put("northwest", new String[] { "den", "min", "okc", "por", "utah" });
            put("pacific", new String[] { "gs", "lac", "lal", "phx", "sac" });
            put("southwest", new String[] { "dal", "hou", "mem", "no", "sa" });
        }});
    }}; 
```

我的问题是，是否有另一种考虑可读性的实现方式，或者完全改变实现方式？我知道 java 不是正确的工具，但我的老板告诉我这样做。另外，请让我知道正确的术语。TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:55:05.180

只要我们不关心运行速度，为什么不使用一种旨在表达分层数据结构的语言，如 JSON 呢？JAVA 对它有很好的外部库支持...

格森来救场！

```
 @SuppressWarnings("unchecked")
    HashMap teams = 
    new Gson().fromJson(
        "{'east' : { 'atlantic'  : ['bkn', 'bos', 'phi','tor', 'ny']," +
        "            'central'   : ['chi', 'cle', 'det', 'ind', 'mil']," +
        "            'southeast' : ['atl', 'cha', 'mia', 'orl', 'wsh']}," +
        " 'west' : { 'northwest' : ['den', 'min', 'okc', 'por', 'utah']," +
        "            'pacific'   : ['gs', 'lac', 'lal', 'phx', 'sac']," +
        "            'southwest' : ['dal', 'hou', 'mem', 'no', 'sa']}}",
        HashMap.class
    ); 
```

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:24:42.050

使用辅助方法

```
private void addTeams(String area, String codes) {
    String[] areas = area.split("/");
    Map<String, String[]> map = teams.get(areas[0]);
    if (map == null) teams.put(areas[0], map = new HashMap<String, String[]>());
    map.put(areas[1], codes.split(", ?"));
}

Map<String, Map<String, String[]>> teams = new HashMap<String, Map<String, String[]>>();{
    addTeams("east/atlantic", "bkn, bos, phi, tor, ny");
    addTeams("east/central", "chi, cle, det, ind, mil");
    addTeams("east/southeast", "atl, cha, mia, orl, wsh");
    addTeams("west/northwest", "den, min, okc, por, utah");
    addTeams("west/pacific", "gs, lac, lal, phx, sac");
    addTeams("west.southwest", "dal, hou, mem, no, sa");
} 
```

* * *

你可以更换

```
new String[] { "bkn", "bos", "phi","tor", "ny" } 
```

和

```
"bkn,bos,phi,tor,ny".split(","); 
```

# wpf - 根据条件检查复选框 - WPF

> ID：13475227
> 
> 赞同：-3
> 
> 时间：2012-11-20T14:22:16.553
> 
> 标签：wpf, silverlight

我正在从数据库中获取复选框的数据。

```
<stackPanel Name="StudentDetails">
  <checkBox Name="Left" Content="(M)" Unchecked="CheckBoxUnChecked" Checked="CheckBoxChecked" />
  <checkBox Name="Left" Content="(F)" Unchecked="CheckBoxUnChecked" Checked="CheckBoxChecked" />
  <Label Content="{Binding Path=Student.Name}" />
</stackPanel> 
```

如果我选择内容=（M）且标签内容=“Sam”的复选框，我想检查其他内容=（F）且标签内容=“Lucie”的复选框。

您能否为此提供示例代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:39:43.757

复选框不应具有相同的名称。

您需要绑定和 IValueConverter：

```
<stackPanel Name="StudentDetails">
  <checkBox Name="Left" 
            Content="(M)" 
            IsChecked="{Binding Student.Name, Converter={StaticResource StudentCheckedConverter}, ConverterParameter="M"}" />
  <checkBox Name="Left" 
            Content="(F)" 
            IsChecked="{Binding Student.Name, Converter={StaticResource StudentCheckedConverter}, ConverterParameter="F"}" />
  <Label Content="{Binding Student.Name}" />
</stackPanel> 
```

IValueConverter 看起来像：

```
public class StudentCheckedConverter : IValueConverter
{
   public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if ("M".Equals(parameter))
                return "Sam".Equals(value);
            if ("F".Equals(parameter))
                return "Lucie".Equals(value);
            throw new Exception("Unknown parameter or value");
        } 

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
} 
```

此外，您需要在 XAML 的资源中公开 StudentCheckedConverter，但我认为一点点谷歌搜索会对您有所帮助。

# html - 我应该在我的新作品中使用 html5 吗？

> ID：13475231
> 
> 赞同：0
> 
> 时间：2012-11-20T14:22:31.530
> 
> 标签：html, internet-explorer

我应该在我的新项目中使用 html5 吗？我不知道会有什么问题。MSIE 会发生什么？旧版本的 IE 是否支持此功能？我需要记住什么？

我搜索但找不到一个好的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:29:37.963

您应该记住，某些功能在旧浏览器上不起作用，但要使其在旧浏览器上运行良好，并使其在新浏览器中看起来很棒！HTML5 和 CSS3 是“现在”，如果你想为 web 开发，你必须了解它并开始使用它来帮助 web 共同成长。获取旧版本的 HTML 会起作用，但它无助于互联网向前迈出一步

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:25:22.293

您可以在新项目中使用 HTML5。在大多数情况下，它向后兼容，如果您使用新的 HTML5 功能，您可以使用 javascript polyfill 为旧浏览器提供功能或优雅地失败。

有关更多信息，请参见此处：http: [//www.netmagazine.com/features/making-html5-and-css3-work-polyfills-and-shims](http://www.netmagazine.com/features/making-html5-and-css3-work-polyfills-and-shims)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:32:17.000

这取决于您需要的功能，如果您需要 html5 的功能然后使用它，但一定要进行渐进式增强，这意味着，确保某些功能适用于旧版浏览器，并将这些功能升级到 html5，使其适用于两者.

对于基本标签的向后兼容性，您可以使用：

```
<!--[if lt IE 9]><script src=\"http://html5shiv.googlecode.com/svn/trunk/html5.js\"></script><![endif]--> 
```

这是一个用旧标签替换新的 html5 标签的脚本，所以你不必太担心它。

无论如何，最重要的部分存在于 javascript 和 css 中，因此例如，如果您创建一个链接，单击它会进行 ajax 调用，通常您会这样做：

```
$('.miLink').click(function(e){
    e.preventDefault();//this avoid the link to change to another page
    $.ajax(..... // ajax request;
}); 
```

因此，渐进增强的自然方法是让该链接以旧方式重定向到登录系统的页面，并添加 Jquery/javascript 功能，因此如果浏览器支持它，仍然会执行 ajax 请求。这样你就得到了一个在新旧浏览器上都可以使用的链接。

对于 CSS，您还可以始终包含适用于新浏览器的规则，并包含带有条件注释的特殊规则以覆盖之前的规则，因此适用于旧浏览器。

对于我的新项目，我使用了 html5，根据我的经验，用户使用不太旧的浏览器，而旧浏览器的用户在统计上每天都在减少。

我也支持技术进步的想法，让用户习惯使用最新的技术，这样网络开发就不会卡住。

# java - 检查字符串

> ID：13475241
> 
> 赞同：0
> 
> 时间：2012-11-20T14:23:03.450
> 
> 标签：java, etl, talend

你好我想测试字符串是否包含字符_然后我们`stringHandling.CHANGE(StringHandling.LEFT(row1.B,9),"_","S")`什么都不做。我不知道如何与 talend 一起做，谁能帮助我

```
 row1.B.contains("_")?StringHandling.CHANGE(StringHandling.LEFT(row1.B,9),"_","S") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:32:47.220

在这种情况下不要使用三元运算符（？：），因为它需要左侧的赋值运算符和右侧的两个选项（不适合）。

对于单个字符存在检查，我更喜欢`indexOf`如下：

```
 if(row1.B != null && row1.B.indexOf('_')>=0){
     StringHandling.CHANGE(StringHandling.LEFT(row1.B,9),"_","S");
 } 
```

# python - ElementTree XPath 表达式

> ID：13475247
> 
> 赞同：0
> 
> 时间：2012-11-20T14:23:19.257
> 
> 标签：python, elementtree

这是我的 XML 文件内容：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<TrainingCenterDatabase xmlns="http://www.garmin.com/xmlschemas/TrainingCenterDatabase/v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.garmin.com/xmlschemas/ActivityExtension/v2 http://www.garmin.com/xmlschemas/ActivityExtensionv2.xsd http://www.garmin.com/xmlschemas/TrainingCenterDatabase/v2 http://www.garmin.com/xmlschemas/TrainingCenterDatabasev2.xsd">

  <Activities>
    <Activity Sport="Running">
      <Id>2012-11-17T16:41:52Z</Id>
      <Lap StartTime="2012-11-17T16:41:52Z">
        <TotalTimeSeconds>473.6400000</TotalTimeSeconds>
        <DistanceMeters>1600.0000000</DistanceMeters>
      </Lap>
    </Activity>
  </Activities>
</TrainingCenterDatabase> 
```

我想在 Python 中使用 Elemtenttree 选择所有 Lap 节点：

```
tree = ET.parse(fileName)
elem = tree.getroot()

for ele in elem.findall('.//Lap'):
    print ele 
```

但是上面的代码不起作用..

有谁知道如何选择 Lap 节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:29:21.920

您需要指定命名空间：

```
>>> tree.findall('.//{http://www.garmin.com/xmlschemas/TrainingCenterDatabase/v2}Lap')
[<Element '{http://www.garmin.com/xmlschemas/TrainingCenterDatabase/v2}Lap' at 0x4698f90>] 
```

# python - 查找两个嵌套列表之间的差异

> ID：13475248
> 
> 赞同：1
> 
> 时间：2012-11-20T14:23:20.950
> 
> 标签：python, list

我有一个嵌套列表和另一个嵌套列表，它是第一个列表的子集：

```
lst = [[1, 2], [3, 4], [1, 2], [5, 6], [8, 3], [2, 7]]
sublst = [[1, 2], [8, 3]] 
```

如何找到不在子列表中的内部列表。使用上述示例所需的输出是：

```
diff = [[3, 4], [5, 6], [2, 7]] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T14:24:46.863

使用列表推导：

```
In [42]: lst = [[1, 2], [3, 4], [1, 2], [5, 6], [8, 3], [2, 7]]

In [43]: sublst = [[1, 2], [8, 3]]

In [44]: [x for x in lst if x not in sublst]
Out[44]: [[3, 4], [5, 6], [2, 7]] 
```

或`filter()`：

```
In [45]: filter(lambda x:x not in sublst,lst)
Out[45]: [[3, 4], [5, 6], [2, 7]] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T14:28:48.567

如果您将列表列表转换为元组列表，则可以从它们创建集合并使用集合差分运算符：

```
lst = [[1, 2], [3, 4], [1, 2], [5, 6], [8, 3], [2, 7]]
sublst = [[1, 2], [8, 3]]

def tuples(lst): return [tuple(l) for l in lst]

print set(tuples(lst)) - set(tuples(sublst)) 
```

将打印：

```
set([(5, 6), (2, 7), (3, 4)]) 
```

对于庞大的列表，它可能比评估更快`[x for x in lst if x not in sublst]`

# perl - 如何使用 Daemon::Simple 保持打开的 STDOUT 和 STDERR

> ID：13475252
> 
> 赞同：1
> 
> 时间：2012-11-20T14:23:55.440
> 
> 标签：perl, exec, fork

我一直在使用[`Daemon::Simple`](http://search.cpan.org/~khs/Daemon-Simple-0.1/lib/Daemon/Simple.pm)快速守护一些脚本并使它们能够启动/停止。但是，其中一些脚本是用 python 编写的，所以我通常称之为`Daemon::Simple::Init()`python`exec()`脚本。

但是，我发现`Daemon::Simple::Init()`关闭`STDOUT`and `STDERR`，并且似乎因此 python 脚本在写入`STDOUT`and时中断（只是退出） `STDERR`。在执行之前重新打开`STDOUT`并将`STDERR`它们重定向到文件没有帮助。

我发现确实有帮助的是改变来源`Daemon::Simple`：

```
close(STDOUT);
close(STDERR); 
```

至：

```
open STDOUT, "/dev/null"
open STDERR, "/dev/null" 
```

如果我在像以前一样调用之后再次打开`STDOUT`并将`STDERR`它们重定向到真实文件`Daemon::Simple:Init()`，这一次它可以工作。似乎关闭`STDOUT`和`STDERR`重新打开以某种方式破坏了它们`exec()`，但打开它们`/dev/null`并重新打开它们工作正常。

无论如何，我可以重新打开或保持打开状态`STDOUT`，而`STDERR`无需修改`Daemon::Simple`哪个幸存下来`exec()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:11:38.273

您尝试重新打开 STDERR 和 STDOUT 时使用的行是否相同？如果是这样，问题很可能是您打开它们是为了阅读而不是为了写作。尝试使用

```
open STDOUT, '>', '/dev/null'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T19:37:44.163

这对你有用吗？

```
use Daemon::Simple;

open(SAVEOUT, ">&STDOUT");
open(SAVEIN, "<&STDIN");

Daemon::Simple::init("daemon");

open(STDOUT, ">&SAVEOUT");
open(STDIN, "<&SAVEIN");

exec("python-script") or die "exec failed: $!"; 
```

# eclipse - Eclipse Window Builder Composite 的问题

> ID：13475253
> 
> 赞同：0
> 
> 时间：2012-11-20T14:24:03.670
> 
> 标签：eclipse, swt, composite, windowbuilder

我在使用 Window Builder 示例时遇到了一些问题： [https ://developers.google.com/web-toolkit/tools/gwtdesigner/features/custom_composites](https://developers.google.com/web-toolkit/tools/gwtdesigner/features/custom_composites)

当我将代码复制到我的 Eclipse 时，代码中出现错误：

```
 customComposite.setFirstFieldBackground(SWTResourceManager
            .getColor(SWT.COLOR_YELLOW)); 
```

Eclipse 告诉我没有 SWTResourceManager。

当我尝试在设计模式下展示表单时，代码中出现另一个错误：

```
 final Label thirdFieldLabel = new Label(customComposite.getComposite(),
            SWT.NONE);
    thirdFieldLabel.setText("Third Field"); 
```

错误：org.eclipse.wb.internal.core.utils.exception.DesignerException：2005（Null 作为父参数。）。

考虑到这个例子在 Web 中很常见，甚至在自己的 WindowBuilder 的帮助文件中，我想我的应用程序没有正确的设置/文件。

我会做些什么不同的事情？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:05:23.467

发生的事情是 SWTResourceManager 是一个在插件中创建的类，当您使用设计视图设置颜色等内容时，它特定于您的插件。因此，当您将代码复制到另一个引用该类的插件中时，您将得到一个找不到类的异常。最简单的方法就是复制代码。删除设置的颜色，在新插件的编辑器中设置颜色，然后将为该插件自动创建 SWTResourceManager。第二个 NPE 不确定听起来特定于环境，但根据经验，swt 资源管理器是特定于捆绑包的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:04:19.427

当您使用 Eclipse 向导（文件 > 新建 > 其他 > WindowBuilder> SWTDesigner）创建新的 WindowBuilder 项目时，通常会在 com.swtdesigner 包中生成 SWTResourceManager 类。

尝试使用此向导生成您的项目。

如果您仍然没有生成此类，这里是它的代码：

```
package com.swtdesigner;

import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.HashMap;
import java.util.Map;

import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.graphics.Cursor;
import org.eclipse.swt.graphics.Font;
import org.eclipse.swt.graphics.FontData;
import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.graphics.ImageData;
import org.eclipse.swt.graphics.RGB;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.widgets.Display;

/**
 * Utility class for managing OS resources associated with SWT controls such as colors, fonts, images, etc.
 * <p>
 * !!! IMPORTANT !!! Application code must explicitly invoke the <code>dispose()</code> method to release the
* operating system resources managed by cached objects when those objects and OS resources are no longer
* needed (e.g. on application shutdown)
* <p>
* This class may be freely distributed as part of any application or plugin.
* <p>
* @author scheglov_ke
* @author Dan Rubel
*/
public class SWTResourceManager {
   ////////////////////////////////////////////////////////////////////////////
   //
   // Color
   //
   ////////////////////////////////////////////////////////////////////////////
   private static Map<RGB, Color> m_colorMap = new HashMap<RGB, Color>();

  /**
   * Returns the system {@link Color} matching the specific ID.
   * 
   * @param systemColorID
   *            the ID value for the color
   * @return the system {@link Color} matching the specific ID
   */
  public static Color getColor(int systemColorID) {
     Display display = Display.getCurrent();
     return display.getSystemColor(systemColorID);
  }

  /**
   * Returns a {@link Color} given its red, green and blue component values.
   * 
   * @param r
   *            the red component of the color
   * @param g
   *            the green component of the color
   * @param b
   *            the blue component of the color
   * @return the {@link Color} matching the given red, green and blue component values
   */
  public static Color getColor(int r, int g, int b) {
     return getColor(new RGB(r, g, b));
  }

  /**
   * Returns a {@link Color} given its RGB value.
   * 
   * @param rgb
   *            the {@link RGB} value of the color
   * @return the {@link Color} matching the RGB value
   */
  public static Color getColor(RGB rgb) {
     Color color = m_colorMap.get(rgb);
     if (color == null) {
        Display display = Display.getCurrent();
        color = new Color(display, rgb);
        m_colorMap.put(rgb, color);
     }
     return color;
  }

  /**
   * Dispose of all the cached {@link Color}'s.
   */
  public static void disposeColors() {
     for (Color color : m_colorMap.values()) {
        color.dispose();
     }
     m_colorMap.clear();
  }

  ////////////////////////////////////////////////////////////////////////////
  //
  // Image
  //
  ////////////////////////////////////////////////////////////////////////////
  /**
   * Maps image paths to images.
   */
  private static Map<String, Image> m_imageMap = new HashMap<String, Image>();

  /**
   * Returns an {@link Image} encoded by the specified {@link InputStream}.
   * 
   * @param stream
   *            the {@link InputStream} encoding the image data
   * @return the {@link Image} encoded by the specified input stream
   */
  protected static Image getImage(InputStream stream) throws IOException {
     try {
        Display display = Display.getCurrent();
        ImageData data = new ImageData(stream);
        if (data.transparentPixel > 0) {
           return new Image(display, data, data.getTransparencyMask());
        }
        return new Image(display, data);
     } finally {
        stream.close();
     }
  }

  /**
   * Returns an {@link Image} stored in the file at the specified path.
   * 
   * @param path
   *            the path to the image file
   * @return the {@link Image} stored in the file at the specified path
   */
  public static Image getImage(String path) {
     Image image = m_imageMap.get(path);
     if (image == null) {
        try {
           image = getImage(new FileInputStream(path));
           m_imageMap.put(path, image);
        } catch (Exception e) {
           image = getMissingImage();
           m_imageMap.put(path, image);
        }
     }
     return image;
  }

  /**
   * Returns an {@link Image} stored in the file at the specified path relative to the specified class.
   * 
   * @param clazz
   *            the {@link Class} relative to which to find the image
   * @param path
   *            the path to the image file, if starts with <code>'/'</code>
   * @return the {@link Image} stored in the file at the specified path
   */
  public static Image getImage(Class<?> clazz, String path) {
     String key = clazz.getName() + '|' + path;
     Image image = m_imageMap.get(key);
     if (image == null) {
        try {
           image = getImage(clazz.getResourceAsStream(path));
           m_imageMap.put(key, image);
        } catch (Exception e) {
           image = getMissingImage();
           m_imageMap.put(key, image);
        }
     }
     return image;
  }

  private static final int MISSING_IMAGE_SIZE = 10;

  /**
   * @return the small {@link Image} that can be used as placeholder for missing image.
   */
  private static Image getMissingImage() {
     Image image = new Image(Display.getCurrent(), MISSING_IMAGE_SIZE, MISSING_IMAGE_SIZE);
     //
     GC gc = new GC(image);
     gc.setBackground(getColor(SWT.COLOR_RED));
     gc.fillRectangle(0, 0, MISSING_IMAGE_SIZE, MISSING_IMAGE_SIZE);
     gc.dispose();
     //
     return image;
  }

  /**
   * Style constant for placing decorator image in top left corner of base image.
   */
  public static final int TOP_LEFT = 1;

  /**
   * Style constant for placing decorator image in top right corner of base image.
   */
  public static final int TOP_RIGHT = 2;

  /**
   * Style constant for placing decorator image in bottom left corner of base image.
   */
  public static final int BOTTOM_LEFT = 3;

  /**
   * Style constant for placing decorator image in bottom right corner of base image.
   */
  public static final int BOTTOM_RIGHT = 4;

  /**
   * Internal value.
   */
  protected static final int LAST_CORNER_KEY = 5;

  /**
   * Maps images to decorated images.
   */
  @SuppressWarnings("unchecked")
  private static Map<Image, Map<Image, Image>>[] m_decoratedImageMap = new Map[LAST_CORNER_KEY];

  /**
   * Returns an {@link Image} composed of a base image decorated by another image.
   * 
   * @param baseImage
   *            the base {@link Image} that should be decorated
   * @param decorator
   *            the {@link Image} to decorate the base image
   * @return {@link Image} The resulting decorated image
   */
  public static Image decorateImage(Image baseImage, Image decorator) {
     return decorateImage(baseImage, decorator, BOTTOM_RIGHT);
  }

  /**
   * Returns an {@link Image} composed of a base image decorated by another image.
   * 
   * @param baseImage
   *            the base {@link Image} that should be decorated
   * @param decorator
   *            the {@link Image} to decorate the base image
   * @param corner
   *            the corner to place decorator image
   * @return the resulting decorated {@link Image}
   */
  public static Image decorateImage(final Image baseImage, final Image decorator, final int corner) {
     if (corner <= 0 || corner >= LAST_CORNER_KEY) {
        throw new IllegalArgumentException("Wrong decorate corner");
     }
     Map<Image, Map<Image, Image>> cornerDecoratedImageMap = m_decoratedImageMap[corner];
     if (cornerDecoratedImageMap == null) {
        cornerDecoratedImageMap = new HashMap<Image, Map<Image, Image>>();
        m_decoratedImageMap[corner] = cornerDecoratedImageMap;
     }
     Map<Image, Image> decoratedMap = cornerDecoratedImageMap.get(baseImage);
     if (decoratedMap == null) {
        decoratedMap = new HashMap<Image, Image>();
        cornerDecoratedImageMap.put(baseImage, decoratedMap);
     }
     //
     Image result = decoratedMap.get(decorator);
     if (result == null) {
        Rectangle bib = baseImage.getBounds();
        Rectangle dib = decorator.getBounds();
        //
        result = new Image(Display.getCurrent(), bib.width, bib.height);
        //
        GC gc = new GC(result);
        gc.drawImage(baseImage, 0, 0);
        if (corner == TOP_LEFT) {
           gc.drawImage(decorator, 0, 0);
        } else if (corner == TOP_RIGHT) {
           gc.drawImage(decorator, bib.width - dib.width, 0);
        } else if (corner == BOTTOM_LEFT) {
           gc.drawImage(decorator, 0, bib.height - dib.height);
        } else if (corner == BOTTOM_RIGHT) {
           gc.drawImage(decorator, bib.width - dib.width, bib.height - dib.height);
        }
        gc.dispose();
        //
        decoratedMap.put(decorator, result);
     }
     return result;
  }

  /**
   * Dispose all of the cached {@link Image}'s.
   */
  public static void disposeImages() {
     // dispose loaded images
     {
        for (Image image : m_imageMap.values()) {
           image.dispose();
        }
        m_imageMap.clear();
     }
     // dispose decorated images
     for (int i = 0; i < m_decoratedImageMap.length; i++) {
        Map<Image, Map<Image, Image>> cornerDecoratedImageMap = m_decoratedImageMap[i];
        if (cornerDecoratedImageMap != null) {
           for (Map<Image, Image> decoratedMap : cornerDecoratedImageMap.values()) {
              for (Image image : decoratedMap.values()) {
                 image.dispose();
              }
              decoratedMap.clear();
           }
           cornerDecoratedImageMap.clear();
        }
     }
  }

  ////////////////////////////////////////////////////////////////////////////
  //
  // Font
  //
  ////////////////////////////////////////////////////////////////////////////
  /**
   * Maps font names to fonts.
   */
  private static Map<String, Font> m_fontMap = new HashMap<String, Font>();

  /**
   * Maps fonts to their bold versions.
   */
  private static Map<Font, Font> m_fontToBoldFontMap = new HashMap<Font, Font>();

  /**
   * Returns a {@link Font} based on its name, height and style.
   * 
   * @param name
   *            the name of the font
   * @param height
   *            the height of the font
   * @param style
   *            the style of the font
   * @return {@link Font} The font matching the name, height and style
   */
  public static Font getFont(String name, int height, int style) {
     return getFont(name, height, style, false, false);
  }

  /**
   * Returns a {@link Font} based on its name, height and style. Windows-specific strikeout and underline
   * flags are also supported.
   * 
   * @param name
   *            the name of the font
   * @param size
   *            the size of the font
   * @param style
   *            the style of the font
   * @param strikeout
   *            the strikeout flag (warning: Windows only)
   * @param underline
   *            the underline flag (warning: Windows only)
   * @return {@link Font} The font matching the name, height, style, strikeout and underline
   */
  public static Font getFont(String name, int size, int style, boolean strikeout, boolean underline) {
     String fontName = name + '|' + size + '|' + style + '|' + strikeout + '|' + underline;
     Font font = m_fontMap.get(fontName);
     if (font == null) {
        FontData fontData = new FontData(name, size, style);
        if (strikeout || underline) {
           try {
              Class<?> logFontClass = Class.forName("org.eclipse.swt.internal.win32.LOGFONT"); //$NON-NLS-1$
              Object logFont = FontData.class.getField("data").get(fontData); //$NON-NLS-1$
              if (logFont != null && logFontClass != null) {
                 if (strikeout) {
                    logFontClass.getField("lfStrikeOut").set(logFont, Byte.valueOf((byte) 1)); //$NON-NLS-1$
                 }
                 if (underline) {
                    logFontClass.getField("lfUnderline").set(logFont, Byte.valueOf((byte) 1)); //$NON-NLS-1$
                 }
              }
           } catch (Throwable e) {
              System.err
                    .println("Unable to set underline or strikeout" + " (probably on a non-Windows platform). " + e); //$NON-NLS-1$ //$NON-NLS-2$
           }
        }
        font = new Font(Display.getCurrent(), fontData);
        m_fontMap.put(fontName, font);
     }
     return font;
  }

  /**
   * Returns a bold version of the given {@link Font}.
   * 
   * @param baseFont
   *            the {@link Font} for which a bold version is desired
   * @return the bold version of the given {@link Font}
   */
  public static Font getBoldFont(Font baseFont) {
     Font font = m_fontToBoldFontMap.get(baseFont);
     if (font == null) {
        FontData fontDatas[] = baseFont.getFontData();
        FontData data = fontDatas[0];
        font = new Font(Display.getCurrent(), data.getName(), data.getHeight(), SWT.BOLD);
        m_fontToBoldFontMap.put(baseFont, font);
     }
     return font;
  }

  /**
   * Dispose all of the cached {@link Font}'s.
   */
  public static void disposeFonts() {
     // clear fonts
     for (Font font : m_fontMap.values()) {
        font.dispose();
     }
     m_fontMap.clear();
     // clear bold fonts
     for (Font font : m_fontToBoldFontMap.values()) {
        font.dispose();
     }
     m_fontToBoldFontMap.clear();
  }

  ////////////////////////////////////////////////////////////////////////////
  //
  // Cursor
  //
  ////////////////////////////////////////////////////////////////////////////
  /**
   * Maps IDs to cursors.
   */
  private static Map<Integer, Cursor> m_idToCursorMap = new HashMap<Integer, Cursor>();

  /**
   * Returns the system cursor matching the specific ID.
   * 
   * @param id
   *            int The ID value for the cursor
   * @return Cursor The system cursor matching the specific ID
   */
  public static Cursor getCursor(int id) {
     Integer key = Integer.valueOf(id);
     Cursor cursor = m_idToCursorMap.get(key);
     if (cursor == null) {
        cursor = new Cursor(Display.getDefault(), id);
        m_idToCursorMap.put(key, cursor);
     }
     return cursor;
  }

  /**
   * Dispose all of the cached cursors.
   */
  public static void disposeCursors() {
     for (Cursor cursor : m_idToCursorMap.values()) {
        cursor.dispose();
     }
     m_idToCursorMap.clear();
  }

  ////////////////////////////////////////////////////////////////////////////
  //
  // General
  //
  ////////////////////////////////////////////////////////////////////////////
  /**
   * Dispose of cached objects and their underlying OS resources. This should only be called when the cached
   * objects are no longer needed (e.g. on application shutdown).
   */
  public static void dispose() {
     disposeColors();
     disposeImages();
     disposeFonts();
     disposeCursors();
  }
} 
```

# java - 3 秒后在侦听器中放置一个框架

> ID：13475255
> 
> 赞同：0
> 
> 时间：2012-11-20T14:24:06.740
> 
> 标签：java, swing, listener, wait

我想在我键入一个键后 3 秒处理框架。这是我的代码：

```
frame.addKeyListener(new KeyListener() {

        @Override
        public void keyTyped(KeyEvent e) {

                    Timer t = new Timer(3000, null);
                    t.addActionListener(new ActionListener() {

                        @Override
                        public void actionPerformed(ActionEvent e) {

                            System.out.println("test");
                            frame.dispose();

                        }
                    });

                    t.start();
             }
      } 
```

我可以从控制台看到打印的字符串，但框架没有关闭。我看过一个类似的线程，使用 Timer 似乎是解决方案，但它对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:38:24.790

`frame.dispose()`不保证立即执行。我发现`frame.setVisible(false)`先调用有助于加快处理过程。

**编辑**

此外，您可能希望查看使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)而不是键侦听器来触发您的事件。关键侦听器很复杂，通常不是很有用（它们需要专注于您正在与之交互的项目，它们往往会消耗事件，因此您看不到它们）。

**编辑 2**

在进一步检查您的代码后，问题似乎是您需要将计时器设置为不重复（在您调用 start 之前）：

```
t.setRepeats(false); 
```

这个例子对我有用 - 如果您仍然遇到问题，请告诉我（如果是这样，请发布您遇到的问题的可运行示例 - 我只能猜测可能导致问题的任何其他代码）：

```
import java.awt.event.*;
import javax.swing.*;

public class QuickTest {

    public QuickTest(){
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setSize(400, 300);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        frame.addKeyListener(new KeyAdapter() {

            @Override
            public void keyTyped(KeyEvent e) {

                Timer t = new Timer(3000, null);
                t.addActionListener(new ActionListener() {

                    @Override
                    public void actionPerformed(ActionEvent e) {

                        System.out.println("test");
                        frame.dispose();

                    }
                });
                t.setRepeats(false);
                t.start();
            }
        });     
    }

    public static void main(String[] args){
        new QuickTest();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:45:28.017

似乎对我来说工作得很好。

确保`setDefaultCloseOperation`未将其设置`DO_NOTHING`为，什么也不做

```
public class TestCloseFrame {

    public static void main(String[] args) {
        new TestCloseFrame();
    }

    public TestCloseFrame() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());

                JButton close = new JButton("Close");
                close.addActionListener(new CloseAction(frame, close));

                frame.add(close);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class CloseAction implements ActionListener {

        private JButton button;
        private JFrame frame;
        private int count = 0;

        public CloseAction(JFrame frame, JButton button) {
            this.button = button;
            this.frame = frame;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            button.setEnabled(false);
            Timer timer = new Timer(1000, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    count++;
                    button.setText(Integer.toString(4 - count));
                    if (count > 3) {
                        frame.dispose();
                        Timer timer = (Timer) e.getSource();
                        timer.stop();
                    }
                }
            });
            timer.setInitialDelay(0);
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }
    }
} 
```

# wikipedia - 是否有可以用作维基百科文章代表的图像？

> ID：13475263
> 
> 赞同：1
> 
> 时间：2012-11-20T14:24:25.893
> 
> 标签：wikipedia

我有一个维基百科文章列表（我自己的浏览器中的历史）。我想通过为每个内部维基百科超链接画一条线来绘制我在维基百科上的访问树。为了获得好的结果，我想用文章的名称来表示每个节点，并且对于正文中至少有一个图像的文章，从文章中提取的图像。

哪个图像是最佳候选？我注意到有时会有一个名为 thumbimage 的图像，但并非总是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:28:37.197

查看 DBPedia 图像数据集：

[http://wiki.dbpedia.org/Downloads38#h227-1](http://wiki.dbpedia.org/Downloads38#h227-1)

他们为许多文章选择了具有代表性的图像。他们并不经常更新（我认为最新的是从 2012 年 6 月开始，所以在我写这篇文章时是 4 个月前），但他们做得非常好，如果你需要更多最新的，你可以使用他们的代码库来解析自己数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:44:59.770

我有过类似的经历，试图从特定页面抓取相关图像。在我的例子中，我使用了 og:image 属性。

你可以在这里阅读更多信息：http: [//ogp.me/](http://ogp.me/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T22:29:41.783

另一种方法是使用 HTML 或 wikimedia 标记自行将图像解析出页面。我建议拍摄信息框图像（如果有的话），如果没有，则使用页面上的第一张图像。

# javascript - 我需要从_like 信息中获取like_count

> ID：13475275
> 
> 赞同：1
> 
> 时间：2012-11-20T14:25:04.560
> 
> 标签：javascript, facebook-fql

我在 javascript 中有 FQL 代码

```
SELECT caption,src_small,like_info from photo where object_id="123456789" 
```

哪个输出

```
{  "data": [   {
  "caption": "the caption", 
  "src_small": "theimageurl.jpg", 
  "like_info": {
    "can_like": true, 
    "like_count": 'thenumberoflikes', 
    "user_likes": true }}]} 
```

这是javascript：

```
query.wait(function(rows) {
                   document.getElementById('debug').innerHTML =  

                    '<img src="' +  rows[0].src_small + '" alt="" />' + "<br />"+
                     'Name: '+  rows[0].caption+ "<br />"+
                    *// 'Number of likes: '      +  rows[0].like_info.cells[0].like_count+ "<br />" ;*

                 }); 
```

现在我不知道如何获得它返回未定义的喜欢计数，任何人都知道如何获得 like_count 或单元格仅部分行。

谢谢是提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:49:30.757

以下工作可访问您的数据：

```
//Get like_count:
obj["data"][0].like_info.like_count 
```

因为返回的对象结构如下：

```
var obj = { "data": [
    {
        "caption": "the caption",
        "src_small": "theimageurl.jpg",
        "like_info": {
            "can_like": true,
            "like_count": 'thenumberoflikes',
            "user_likes": true
        }
    }
    ],[
    {
        "caption": "The second object!",
        "src_small": "theimageurl.jpg",
        "like_info": {
            "can_like": true,
            "like_count": 'thenumberoflikes',
            "user_likes": true
        }
    }
    ]
}; 
```

the`[0]`指的是结果中的第一个对象。要获取`user_likes`第二个对象，您可以使用：

```
obj["data"][1].like_info.user_likes 
```

在您的情况下，您可能必须替换`obj["data"]`为`rows`

# animation - Safari中的css3边框半径动画过渡不起作用

> ID：13475279
> 
> 赞同：0
> 
> 时间：2012-11-20T14:25:19.103
> 
> 标签：animation, safari, webkit, css

尝试在 Safari 中对图像的边框半径进行 css3 轻松过渡工作。

它只是有点闪烁到悬停状态而不是平滑过渡。任何帮助深表感谢

代码：

```
<style>
.all a:hover img {
    -webkit-border-radius: 50%;
    -moz-border-radius: 50%;
    border-radius: 50%;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    filter: alpha(opacity=100);
    -moz-opacity:1;
    -khtml-opacity: 1;
    opacity: 1;
    -webkit-filter: grayscale(0%);
}
.all a img {
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
    width: 50%;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    filter: alpha(opacity=90);
    -moz-opacity:0.9;
    -khtml-opacity: 0.9;
    opacity: 0.9;
}
.all a img {
    -moz-transition: all .3s ease;
    -webkit-transition: all .3s ease;
    -o-transition: all .3s ease;
    transition: all .3s ease;
}
.all a img {
    -webkit-filter: grayscale(100%);
    transition: border-radius .3s ease;
    -moz-transition: -moz-border-radius .3s ease,border-radius .3s ease;
    -webkit-transition: -webkit-border-radius .3s ease,border-radius .3s ease;

}
</style>

<ul class="thumbs">
    <li class="all identity">
        <a href="projects/project_identity/index.html"><img src="http://imjoeybrennan.com/images/logos_t.jpg" alt="Logos"/></a>
    </li>
</ul> 
```

网站链接：http: [//imjoeybrennan.com](http://imjoeybrennan.com)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-18T00:15:46.293

以下适用于父元素，边框半径适用于将 webkit 踢回对我来说：

```
-webkit-mask-image: -webkit-radial-gradient(white, black); 
```

另一种选择是将元素包装在两个边界半径父项中。

对我来说似乎很老套，但比双包装选项要好得多——有兴趣听听其他解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T15:36:11.013

这是一个简单的修复，Safari 不支持从像素到百分比的转换。如果您将悬停样式从 50% 更改为 100 像素，您会发现您的过渡将顺利进行。

```
.all a:hover img {
    -webkit-border-radius: 100px;
    -moz-border-radius: 100px
    border-radius: 100px;

} 
```

您可能希望将它们设置为图像高度和宽度的两倍，以确保它们在悬停时始终是圆形的。

# mysql - mySQL Workbench 和连接输出

> ID：13475281
> 
> 赞同：0
> 
> 时间：2012-11-20T14:25:29.517
> 
> 标签：mysql, mysql-workbench

我正在使用 mysql 工作台并使用 sql 创建一个按组件分组和按组件排序的每月输出列表

然后我可以将这些全部导出到单个 cdv 文件添加到每个列表的底部吗？

谢谢理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:29:14.757

你的意思是`GROUP_CONCAT`？前任，

```
SELECT ID, GROUP_CONCAT(CAtegoryID) CatIDList
FROM tableName
GROUP BY ID 
```

将返回

```
ID   CatIDList
===================
1    1,2,3
2    1,5
3    2,4,5,6 
```

*   [GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

# iphone - 更改一个部分中的按钮图像也更改另一个部分？

> ID：13475283
> 
> 赞同：0
> 
> 时间：2012-11-20T14:25:37.403
> 
> 标签：iphone, ios, ipad

我有一个应用程序，在该应用程序中，我从两个不同的自定义类在表格视图中加载两种类型的单元格。我的表格视图中有 5 个部分，每个部分都有单行。我在单元格中添加了一个按钮，单击它时会更改按钮的图像.as button.selected=YES;就像那样。但我的问题是当我滚动单元格时重复，即如果我连续选择了一个按钮，那么该行的背景图像只需要更改.但在我的情况下，一些单元格按钮也在改变。这就是我添加东西的方式。

```
- (UITableVieCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier1 = @"CellIdentifier";
    static NSString *CellIdentifier2 = @"Cell";
    if (indexPath.section == 0 && indexPath.row==0)
    { 
         CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier1];

        if (cell == nil)
        {
            cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier1] autorelease];
            cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"dhjkhs.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease];

        }
         cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.datelabel.text=@"skhfkhdf";
      cell.nameLabel.text=@"dsdbjsbjf";
    cell.msg.text=@"dshjshhshd";
 [cell.lbutton addTarget:self action:@selector(callAction:) forControlEvents:UIControlEventTouchUpInside];     
  cell.myImageView.image=[UIImage imageNamed:@"sdsd.png"];
  cell.llabel.text=@"sdjkjskljdls";   
        cell.llabel.tag=indexPath.section+1;

        return cell;

    }
    else 
    {

        Customcellwithimage *cell = (Customcellwithimage *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier2];

        if (cell == nil)
        {
            cell = [[[Customcellwithimage alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier2] autorelease];
             cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"sdsdsd.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease];
        }
         cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.datelabel1.text=@"sdsdsdsd";
        cell.nameLabel1.text=@"sdsdsdsdsd";
        cell.msg1.text=@"sdsasfkdakfhk ";

         [cell.likebutton1 addTarget:self action:@selector(callAction:) forControlEvents:UIControlEventTouchUpInside]; 
        cell.myImageView1.image=[UIImage imageNamed:@"jpg1.png"];
         cell.cellview1.image=[UIImage imageNamed:@"adsdsd.png"];

        cell.llabel1.text=@"sdsdsdsdl";
        cell.llabel1.tag=indexPath.section+2;
       cell.bannerview1.image=[UIImage imageNamed:@"dsdsd.png"];

        return cell;

    }

    return Nil;

} 
```

`i have 10 sections each returning 1 row.My problem is i need to change the image of the button when clicked.I was adding that button in the customcellwith image class as`

```
[lbutton1 setImage:[UIImage imageNamed:@"sdsd.png"] forState:UIControlStateNormal];
[lbutton1 setImage:[UIImage imageNamed:@"sdsdsd.png"] forState:UIControlStateSelected];
lbutton1.selected=NO;` 
```

在我的代码中我添加了`

```
UIButton *button = (UIButton *)sender;
      button.selected=YES; 
```

` 但这里的问题是它也改变了另一个部分的按钮。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:51:03.773

也许你的检查条件有问题`if (indexPath.section == 0 && indexPath.row==0)`。`NO`当它不是第一部分时，此检查将始终。`CustomCell`因此，除了第一部分的第一行之外，您的单元格不会被您的班级重复使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:28:19.783

我不确定我是否完全理解这个问题，但我认为你想将背景创建也移到 if 后面。一旦它被改变，你应该重置它，现在它不会被重置（就像你重置选择样式一样，你应该重置背景）

```
if (cell == nil)
{
    cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier1] autorelease];
}

cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"dhjkhs.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease];

cell.selectionStyle = UITableViewCellSelectionStyleNone;
cell.datelabel.text=@"skhfkhdf";
cell.nameLabel.text=@"dsdbjsbjf";
cell.msg.text=@"dshjshhshd";
[cell.lbutton addTarget:self action:@selector(callAction:) forControlEvents:UIControlEventTouchUpInside];     
cell.myImageView.image=[UIImage imageNamed:@"sdsd.png"];
cell.llabel.text=@"sdjkjskljdls";   
cell.llabel.tag=indexPath.section+1;

return cell; 
```

# sockets - ios6.0.1 recvfrom 总是在 iphone 上阻塞

> ID：13475285
> 
> 赞同：2
> 
> 时间：2012-11-20T14:25:39.927
> 
> 标签：sockets, ios6, udp

我们创建了一个 iOS 应用程序，它在一个线程（我们使用 bsd 套接字 API）中执行 UDP 发送操作（向服务器发送请求），另一个线程在同一个套接字上执行 UDP 接收操作（从服务器接收响应）。

它在 iOS 4/5 上正常工作，但是当我们在 iOS 6.0.1 (iPhone) 上测试它时它不起作用，在装有 iOS 6.0.1 和模拟器的 iPad 上没有发现问题。

该应用程序无限阻塞`recvfrom`，我们确定服务器有 UDP 响应。似乎与此问题相同：[https](https://groups.google.com/forum/#!msg/cocoaasyncsocket/rWokj2VO3VE/f-mZ6xWEUhkJ) ://groups.google.com/forum/#!msg/cocoaasyncsocket/rWokj2VO3VE/f-mZ6xWEUhkJ 。

代码片段：

```
char recvData[UDP_PACKAGE_LENGTH];
bzero(recvData, UDP_PACKAGE_LENGTH);
struct sockaddr_in fromAddr;
uint32_t len = sizeof(fromAddr);
int isHead = recvfrom(self->serverSock, recvData, UDP_PACKAGE_LENGTH, 0, (struct sockaddr*)(&fromAddr), &len); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:58:06.600

错误被发现！我们没有收到来自 Cellular 的 UDP 数据包，但 TCP 是可以通过的，因此 recvfrom 无限阻塞。

# jquery - 使用前进和后退按钮遍历图像

> ID：13475287
> 
> 赞同：0
> 
> 时间：2012-11-20T14:25:48.013
> 
> 标签：jquery, image, gallery, loops

我有五个图像，我想作为画廊进行迭代。因此，当用户单击“前进按钮”时，数组中的下一个图像将显示在 div 中。以及单击“后退按钮”时。对不起，如果这是愚蠢的编码，但我在这里很新。

```
$(document).ready(function () {
    // when thumbnail is clicked

    $("img#thumb").click(function () {
        var imgpath = $(this).attr("src");
        $("img#cover").attr("src", imgpath);

    });

    $(function () {
        $("img#thumb").bind('click', function () {
            var img = $(this).clone(); //this clones the img, so you do not need to re-load that using src path
            $("img#cover").hide().html(img).fadeIn(500); //remove .hide() segment if you just are hiding by css rules

        });
    });

    //when the nextimage link is clicked
    var imgs = ["images/exteriors/abandonned/img0.jpg",
                "images/exteriors/abandonned/img1.jpg",
                "images/exteriors/abandonned/img2.jpg"];

    $("img#nextimage").click(function () {

        $.each(imgs, function () {

            $("img#cover").attr("src", imgs); // I want to iterate each image and display when it is clicked
        });

    });
}); 
```

HTML：

```
<div id="thumbs"> <!--gallery thumbs-->
<img id="thumb1" src="images/exteriors/abandonned/img0.jpg" width="100px" height="80px" class="" /><br>
<img id="thumb2" src="images/exteriors/abandonned/img1.jpg" width="100px" height="80px" class="" /><br>
<img id="thumb3" src="images/exteriors/abandonned/img2.jpg" width="100px" height="80px" class="" /><br>
 <img id="thumb" src="images/exteriors/abandonned/img3.jpg" width="100px" height="80px" class="" /><br>
 <img id="thumb" src="images/exteriors/abandonned/img3.jpg" width="100px" height="80px" class="" /><br>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:30:57.630

您无需在每次单击下一个或上一个按钮时迭代图像；相反，使用变量将索引存储到 imgs 数组中，并让您的点击处理程序更新该索引，然后使用数组中该索引处的 URL 更新标记的 src 属性。像这样的东西，也许：

```
var imgindex = 0;

$('img#nextimage').click(function() {
  imgindex++; // increment the index into array 'imgs'
  if (imgindex > (imgs.length - 1)) { imgindex = 0; }; // if we just walked off the far end of the array, reset the index to zero (loop around to the 1st image)
  $('img#cover').attr('src', imgs[imgindex]); // update the img src
});

$('img#previmage').click(function() {
  imgindex--; // decrement the array index
  if (imgindex < 0) { imgindex = (images.length - 1); }; // if we just walked off the near end of the array, loop around to the last image
  $('img#cover').attr('src', imgs[imgindex]);
}); 
```

# regex - 正则表达式提取 Asterisk 队列统计信息

> ID：13475291
> 
> 赞同：0
> 
> 时间：2012-11-20T14:26:03.000
> 
> 标签：regex, perl, asterisk

我正在尝试构建一些正则表达式来提取 Asterisk 中队列状态的统计信息。我对正则表达式比较陌生，所以离解决方案还很远。我有以下输出要解析：

```
Parsing /etc/asterisk/extconfig.conf
0009*007 has 2 calls (max unlimited) in 'ringall' strategy (0s holdtime), W:0, C:0, A:7, SL:0.0% within 0s
   Members: 
      0009*001 (Local/0009*001@queue/nj) (In use) has taken no calls yet
   Callers: 
      1\. SIP/chan5-000a29f2 (wait: 0:08, prio: 0)
      2\. SIP/0139*741-000a29f7 (wait: 0:03, prio: 0) 
```

实际输出将包含多个队列的信息，因此它将从第二行重复。第一行只显示一次。

我需要得到队列 ID（在本例中为 0009*007）和呼叫列表及其各自的等待时间。

到目前为止，我已经使用以下正则表达式来匹配队列号：

```
\b^[0-9]{4}\*[0-9]{3}\b 
```

但这不起作用。不确定如何将呼叫与等待时间相匹配。理想情况下，我想要这样的输出：

```
0009*007,1,0:08
0009*007,2,0:03 
```

我很可能会用 Perl 编写最终脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:41:55.967

这是一个简单的状态机解决方案。正则表达式可能需要根据您期望日志文件中的变化类型进行更改。

```
use Modern::Perl;

my $current_queue;
my $in_callers = 0;
while (<DATA>)
{
    if (!defined $current_queue)
    {
         /(\d{4}\*\d{3})/ and $current_queue = $1; 
    }
    elsif (!$in_callers)
    {
        /Callers:/ and $in_callers++;
    }
    elsif (/^\s*(\d+)\..*wait:\s+(\d+:\d+),\s+prio:\s+(\d+)/)
    {
        say "$current_queue,$1,$2,$3";
    }
    else
    {
        #end of this queue; reset.
        undef $current_queue; $in_callers = 0; 
    }
}

__DATA__
Parsing /etc/asterisk/extconfig.conf
0009*007 has 2 calls (max unlimited) in 'ringall' strategy
   Members: 
      0009*001 (Local/0009*001@queue/nj) (In use) has taken no calls yet
   Callers: 
      1\. SIP/chan5-000a29f2 (wait: 0:08, prio: 0)
      2\. SIP/0139*741-000a29f7 (wait: 0:03, prio: 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:56:14.663

正如 m.buettner 所指出的，您将无法使用一个正则表达式来执行此操作。但是，您可以依靠您对数据重复性质的了解来生成包含所需数据的散列，然后在最后打印散列：

```
#!/usr/bin/perl

my %queues;
my $current_queue;

while (<DATA>) {
  chomp;

  if (m/^(\d+\*\d+)/) {
    $current_queue = $1;
  }
  elsif (m/^\s+(\d)\..+?\(wait:\s+([\d\:]+),/) {
    $queues{$current_queue}{$1} = $2;
  }
}

foreach my $queue (sort keys %queues) {
  foreach my $caller (sort keys %{ $queues{$queue} }) {
    print join (',', $queue, $caller, $queues{$queue}{$caller}) . "\n";
  }
}

exit;

__DATA__
Parsing /etc/asterisk/extconfig.conf
0009*007 has 2 calls (max unlimited) in 'ringall' strategy (0s holdtime), W:0, C:0, A:7, SL:0.0% within 0s
   Members:
      0009*001 (Local/0009*001@queue/nj) (In use) has taken no calls yet
   Callers:
      1\. SIP/chan5-000a29f2 (wait: 0:08, prio: 0)
      2\. SIP/0139*741-000a29f7 (wait: 0:03, prio: 0) 
```

# python - 如果我开始返回更多数据，则返回不会破坏客户端代码的不可打包值的可迭代

> ID：13475294
> 
> 赞同：3
> 
> 时间：2012-11-20T14:26:23.830
> 
> 标签：python, iterable-unpacking

假设您正在编写一个打算公开的 API。API 中的函数`quux`返回一个列表或元组生成器，例如`yield (foo, bar)`.

客户端代码通常会像这样使用它：

```
for foo, bar in quux(whatever):
    # do stuff with foo and bar 
```

现在，假设将来您可能想开始与和`baz`一起返回。你现在不想退回它，因为 YAGNI 直到证明不是这样。`foo``bar`

（尝试）确保未来这样的更改不会破坏客户端代码的最佳方法是什么？

我知道 Python 3 允许人们做类似的事情，`for foo, bar, *idontcare in quux(whatever)`并且在 Python 2 中，人们总是可以编写一个实用函数（像这样使用`for foo, bar in iterleft(quux(whatever), 2)`）：

```
def iterleft(iterable, limit):
    for item in iterable:
        yield item[:limit] 
```

但我想知道是否有更好的方法来做这样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T14:31:42.660

问题是您有没有与数据一起传递的语义数据（“元组的第一个元素表示 x，第二个元素表示 y，...”）。

解决此问题的通用方法是返回`{"foo": foo, "bar": bar, ...}`参数字典。当然，那么你不能使用元组解包。

否则，为了保持向后兼容性，您无法更改`quux`. 相反，您可以编写`quux_with_bar`生成`(foo, bar, baz)`元组，然后`quux`只过滤其中的前两个元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T16:26:11.567

返回 a[`namedtuple`](http://docs.python.org/2/library/collections.html#collections.namedtuple)而不是常规元组，您不需要解包它。然后您可以在不影响 API 的现有用户的情况下*扩展返回的元组：*

```
from collections import namedtuple

QuuxReturnValue = namedtuple('QuuxReturnValue', ('foo', 'bar'))

def quux(*args, **kw):
    while True:
        yield QuuxReturnValue(foo='foo', bar='bar') 
```

并且您的 API 的使用方式如下：

```
for retval in quux():
    print retval.foo, retval.bar 
```

如果您稍后更新`namedtuple`以添加第三个参数`'baz'`，则上述使用者仍然可以工作。

# f# - 如何在没有任何内置函数的列表中查看 int 是否存在？

> ID：13475295
> 
> 赞同：-5
> 
> 时间：2012-11-20T14:26:25.067
> 
> 标签：f#

首先编写一个名为 mem 的函数，给定一个整数和一个整数列表，如果整数在列表中至少出现一次，则返回 true，否则返回 false。这是我的第一个问题，我不想使用任何内置函数。

我的第二个问题：创建两个函数，每个函数都将两个整数列表作为参数，并分别返回被视为集合的列表的并集和交集。您可能想要使用先前定义的成员函数。列表不需要排序，但不能有任何重复。

我不知道如何在没有任何内置功能的情况下解决这个问题任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:36:12.743

如果您正在尝试学习 F#，那么您实际上应该尝试学习它，而不是在 StackOverflow 上提问。然而，这两个问题听起来像是一个合理的问题，实际上可以向社区的其他人展示一些基本的 F#，所以这里有一些可能的解决方案。

成员测试可以实现为递归函数。`true`这个想法是，如果你找到你需要的值，你会遍历一个列表并返回。如果找到另一个值，则需要递归处理列表的其余部分。如果到达末尾（并找到一个空列表），则返回`false`，因为空列表（显然）不包含您要查找的值：

```
let rec mem value = function
 | x::xs when x = value -> true
 | x::xs -> mem value xs
 | [] -> false 
```

如何实现联合使用`mem`？好吧，联合将包含一个列表中的所有元素，以及另一个列表中尚未包含在第一个列表中的所有元素（您不想创建重复项）。所以，`union list []`将是`list`。如果第二个列表是非空的 ( `x::xs`)，您需要检查元素`x`是否在第一个列表中。如果是，则要跳过它，否则将其添加到结果中：

```
let rec union list1 list2 = 
  match list2 with
  | [] -> list1
  | x::xs when mem x list1 -> union list1 xs
  | x::xs -> x::(union list1 xs) 
```

这不是最有效的解决方案，因为它没有使用*尾递归*，但它是最简单的开始。

# android - 使用 GSON 在 Android 中存储解析的 Json

> ID：13475296
> 
> 赞同：2
> 
> 时间：2012-11-20T14:26:29.150
> 
> 标签：android, json, api, rest, gson

我对 Android 很陌生，我目前正在开发 Android 应用程序，它将从 Restful API 解析 JSON 并在列表视图中显示一些数据。我研究过使用 GSON 进行解析，因为 JSON 非常复杂。现在我的主要问题是弄清楚如何将数据存储在某个地方，这样应用程序就不需要在每次点击活动时重新加载自己。我在这里查看了几个问题，但它们似乎都指向 JSON 而不是 GSON。任何人都可以推荐一种有效的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:42:59.817

如果您想永久存储数据，最好将反序列化对象插入到 sqlite 数据库或将它们作为文件存储在磁盘本地。

如果您的意图是为每次启动加载数据，那就更容易了。只需将您的对象放入公共静态对象中。所以你可以检查对象是否不为空。如果它为空，则必须加载数据。另一个机会是使用 SharedPreferences。

# php - 将动态内容传递给模态框，php和jquery

> ID：13475298
> 
> 赞同：1
> 
> 时间：2012-11-20T14:26:38.480
> 
> 标签：php, jquery, modal-dialog

我最初是使用弹出窗口来显示用户单击按钮时的动态信息：

```
newwindow=window.open('popup.php?ID=' + id,'name','height=500,width=500'); 
```

我切换到[使用此设置的模态框](https://stackoverflow.com/a/3937675/1774546)

要打开我正在使用的模式框 `openDialog($('#content'));` ，内容是 div 容器。

如何打开模式框并传递我在弹出窗口中使用的相同 php 文件？ `'popup.php?ID=' + id`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:30:00.373

您可以先使用 AJAX 加载内容，在完整回调中打开对话框

```
$('#content').load('popup.php?ID=' + id, function() {
    openDialog($('#content'));
}); 
```

文档[`.load()`](http://api.jquery.com/load/)

# maven - Maven内部库pom版本管理

> ID：13475301
> 
> 赞同：2
> 
> 时间：2012-11-20T14:27:11.317
> 
> 标签：maven, maven-3

是否有任何工具和/或最佳实践来帮助管理跨许多相关项目的大量内部库版本。请允许我详细说明，

假设您有产品 A、B、C。这些产品依赖于库 X、Y、Z，并且它们之间也存在依赖关系。

在这个世界上，我们希望将所有版本都保留在所有依赖项的最新*发布*版本上（除了工作副本之外，没有快照依赖项）。这使我们可以随时发布产品并强制所有项目在 CI (Hudson) 中运行。

问题在于保持 pom.xml 都是最新的。目前，我们使用一个自定义的 maven 插件，作为每个版本的一部分，它会在我们的 SCM 中搜索依赖于正在发布的项目的 pom.xml 并对其进行更新。这类似于[versions-maven-plugin](http://mojo.codehaus.org/versions-maven-plugin/)，只是您不需要每个项目的工作副本来执行此操作。

必须有更好的方法。其他团队如何处理许多项目中的许多共享库？组织这个的最佳方式是什么？多模块在某些情况下可以工作，但我们的大多数库都是相当独立的，并且被太多其他项目使用，以 (a) 决定它将属于哪个多模块以及 (b) 可以为此工作的层次结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:55:43.037

在 Maven 中管理依赖项可以很好地与 dependencyManagement 配合使用——我想你对它很熟悉。您可以将此dependencyManagement 外包给专用POM：所谓的BOM POM（请参阅[http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)）。

在您的情况下，此 BOM POM 可能由您的产品 A、B 和 C 共享。因此，您应该定义一个仅包含此 BOM POM 的 Maven 项目，以及第三方软件 X、Y 和 Z 的所有依赖项管理。该项目可以被释放，您可以使用范围导入添加对 BOM POM 的依赖项。

您的 BOM POM：

```
<project>
   <groupId>com.acme</groupId>
   <artifactId>my-thirdparty-bom-pom</artifactId>
   <version>1.0-SNAPSHOT</version>
   ...
   <dependencyManagement>
     <dependencies>
       <dependency>
         <groupId>...</groupId>
         <artifactId>X</artifactId>
         <version>...</version>
       </dependency>
       <dependency>
         <groupId>...</groupId>
         <artifactId>Y</artifactId>
         <version>...</version>
       </dependency>
       <dependency>
         <groupId>...</groupId>
         <artifactId>Z</artifactId>
         <version>...</version>
       </dependency>
     </dependencies>
   <dependencyManagement>
   ...
</project> 
```

项目 A 的示例导入

```
<project>
   ...
   <dependencyManagement>
     <dependencies>
       <dependency>
         <groupId>com.acme</groupId>
         <artifactId>my-thirdparty-bom-pom</artifactId>
         <version>1.0-SNAPSHOT</version>
         <scope>import</scope>
       <dependency>           
     </dependencies>
   <dependencyManagement>

   <dependencies>
     <dependency>
       <groupId>...</groupId>
       <artifactId>Y</artifactId>
       <!-- the version is managed by the thirdparty bom imported above -->
     </dependency>
   </dependencies>
   ...
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:02:39.390

最接近的方法是使用[依赖版本范围](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-dependencies.html)，然后在配置文件中覆盖您的 pom[存储库，将快照更改为 false](http://maven.apache.org/pom.html#Repositories)，确保在发布期间使用“-P”包含您的配置文件。

```
<dependency>
  <groupId>a</groupId>
  <artifactId>a</artifactId>
  <version>[3.8,4.0)</version>
</dependency> 
```

...

```
<profiles>
 <profile>
  <id>your-release</id>
  <repositories>
    <repository>
     ...
     <snapshots>
       <enabled>false</enabled>
     </snapshots>
    </repository>
  </repositories>
 </profile>
<profiles> 
```

另一种模式是[“bom”](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)，您可以在其中创建一个 pom（包装：pom），它声明一个依赖项列表以使管理更容易（更改更少）。

# php - PHP 会话处理程序未写入数据库

> ID：13475302
> 
> 赞同：1
> 
> 时间：2012-11-20T14:27:11.540
> 
> 标签：php, database, session, pdo

我需要以下课程的帮助 - 它没有写入数据库，我不知道为什么。我知道调用了“读取”方法，但没有调用“写入”方法：S

这是我正在使用的代码：

```
require '../application/database.php';
$db = new Database('localhost', 'root', '', 'gemgale');

require '../application/session.php';
$session = new Session($db);

session_set_save_handler(
    array(&$session, 'open'),
    array(&$session, 'close'),
    array(&$session, 'read'),
    array(&$session, 'write'),
    array(&$session, 'destroy'),
    array(&$session, 'clean')
);
session_start();
var_dump($session);
$_SESSION['something'] = "gem";
var_dump($_SESSION);
#$session->delete();
#var_dump($_SESSION); 
```

这就是课堂......

```
class Session
{
    ###########################################################################
    private $expiry = 3600;
    private $securityCode = "gnvriev847e8grdinvrdg5e8g4r7fr7rdvreh8^£*^£FGgyhf";
    private $tableName = "session_data";
    ###########################################################################
    private $dbh;

    function __construct(Database $db)
    {
        $this->dbh = $db->getConnection();

        ini_set('session.cookie_lifetime', 0);
        ini_set('session.gc_maxlifetime', $this->expiry);
    }

    function open($save_path, $session_name)
    {
        return true;
    }

    function close()
    {
        return true;
    }

    function read($session_id)
    {
        echo $session_id;
        print "READING";
        $time = time();
        $hua = isset($_SERVER['HTTP_USER_AGENT']) ? $_SERVER['HTTP_USER_AGENT'] : '';
        $hua = $hua . $this->securityCode;
        $hua = md5($hua);
        try {
            $stmt = $this->dbh->prepare("
            SELECT session_data
            FROM :tableName
            WHERE session_id = :sesID
              AND session_expire > :time
              AND http_user_agent = :hua
            LIMIT 1
        ");
            $stmt->bindParam("tableName", $this->tableName);
            $stmt->bindParam("sesID", $session_id);
            $stmt->bindParam("time", $time);
            $stmt->bindParam("hua", $hua);
            $stmt->execute();
        } catch (PDOException $e) {
            echo $e->getMessage();
            return false;
        }
        $rs = $stmt->fetch();
        if (!$rs)
            return '';
        else
            return $rs['session_data'];

    }

    function write($session_id, $session_data)
    {
        print "WRITING";
        $expiry = time() + $this->expiry;
        $hua = isset($_SERVER['HTTP_USER_AGENT']) ? $_SERVER['HTTP_USER_AGENT'] : '';
        $hua = $hua . $this->securityCode;
        $hua = md5($hua);
        try {
            $stmt = $this->dbh->prepare("
                INSERT INTO :tableName (
                  session_id,
                  http_user_agent,
                  session_data,
                  session_expiry
                )
                VALUES (
                  :sessID,
                  :hua,
                  :sdata,
                  :expiry
                )
                ON DUPLICATE KEY UPDATE
                  session_data = :sdata,
                  session_expire = :expiry
            ");

            $stmt->bindParam("tableName", $this->tableName);
            $stmt->bindParam("sessID", $session_id, PDO::PARAM_STR);
            $stmt->bindParam("hua", $hua);
            $stmt->bindParam("sdata", $session_data, PDO::PARAM_STR);
            $stmt->bindParam("expiry", $expiry);
            $stmt->execute();
        } catch (PDOException $e) {
            echo $e->getMessage();
            return false;
        }
        if ($stmt->rowCount() > 1)
            return true;
        else
            return '';

    }

    function destroy($session_id)
    {
        try {
            $stmt = $this->dbh->prepare("
                DELETE FROM :tableName
                WHERE session_id = :id
            ");
            $stmt->bindParam("tableName", $this->tableName, PDO::PARAM_STR);
            $stmt->bindParam("id", $session_id, PDO::PARAM_STR);
            $stmt->execute();
        } catch (PDOException $e) {
            echo $e->getMessage();
            return false;
        }
        return true;
    }

    function clean($maxLifeTime)
    {
        try {
            $x = time() - $maxLifeTime;
            $stmt = $this->dbh->prepare("
                DELETE FROM :tableName
                WHERE session_expire < :x
            ");
            $stmt->bindParam("tableName", $this->tableName, PDO::PARAM_STR);
            $stmt->bindParam("x", $x, PDO::PARAM_INT);
            $stmt->execute();
        } catch (PDOException $e) {
            die($e->getMessage());
        }
        return true;
    }

    function delete()
    {
        $oldID = session_id();
        session_regenerate_id();
        $this->destroy($oldID);
        session_unset();
        session_destroy();
    }

    function getActive()
    {
        $this->clean($this->expiry);
        try {
            $stmt = $this->dbh->prepare("
                SELECT COUNT(session_id) as count
                FROM :tableName
            ");
            $stmt->bindParam("tableName", $this->tableName, PDO::PARAM_STR);
            $stmt->execute();
            $rs = $stmt->fetch();
            return $rs['count'];
        } catch (PDOException $e) {
            die($e->getMessage());
        }
    }

} 
```

希望大家能帮忙:)

谢谢，宝石

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:36:53.703

一，你不需要通过引用传递。改为这样做：

```
session_set_save_handler(
   array($session, 'open'),
   array($session, 'close'),
   array($session, 'read'),
   array($session, 'write'),
   array($session, 'destroy'),
   array($session, 'clean')
); 
```

要测试保存/写入是否有效，您可以尝试以下操作：

```
session_start();
$_SESSION['something'] = "gem";
session_write_close();
echo "- Foo"; 
```

这应该触发对会话存储的写入并刷新要写入的任何内容。在这种情况下，它应该显示`WRITING- Foo`是否正在调用您的 write 方法。

如果没有写入数据库，但正在调用方法，则还有其他问题。

我首先要看的是您在准备好的语句中替换的 :tableName 。您不能准备替换列名或表。将您的声明更改为：

```
 $stmt = $this->dbh->prepare("
            INSERT INTO ".$this->tableName."  (
              session_id,
              http_user_agent,
              session_data,
              session_expiry
            )
            VALUES (
              :sessID,
              :hua,
              :sdata,
              :expiry
            )
            ON DUPLICATE KEY UPDATE
              session_data = :sdata,
              session_expire = :expiry
        "); 
```

如果您确实用变量替换表名或列，请确保在使用之前将它们列入白名单，以防止打开注入孔。

# ssh - 在非 22 端口上的 Amazon EC2 实例上运行 ssh

> ID：13475303
> 
> 赞同：15
> 
> 时间：2012-11-20T14:27:13.427
> 
> 标签：ssh, amazon-ec2, cloud

我无法通过 ssh 访问 Amazon EC2 实例，因为我在防火墙后面。所以，我想在 22 以外的端口上运行 ssh，比如 80 或 443。

我尝试使用以下“用户数据”通过 Web 管理控制台启动 Amazon EC2 实例：

```
#!/bin/bash -ex
perl -pi -e 's/^#?Port 22$/Port 80/' /etc/ssh/sshd_config
service sshd restart || service ssh restart 
```

想法是上述脚本将在实例启动时执行并将 ssh 从端口 22 切换到端口 80。（参考：[http](http://alestic.com/2010/12/ec2-ssh-port-80) ://alestic.com/2010/12/ec2-ssh-port-80 ）

但是 ssh 仍然无法在端口 80 上访问。显然“用户数据”脚本在启动时没有被执行？

我只能通过 Web 管理控制台启动停止实例，而不是从命令行（位于防火墙后面）

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-11-09T15:53:31.410

要通过 ssh 从不同于默认 22 的端口连接到 AWS 实例：

1.  打开您的实例的安全组，以便它允许从您选择的源连接到该端口（任何源为 0.0.0.0/0）。
2.  在你的例子中：

    *   这是一个新实例，您可以使用这样的用户数据脚本：

    `#!/bin/bash -ex perl -pi -e 's/^#?Port 22$/Port 443/' /etc/ssh/sshd_config service sshd restart || service ssh restart`

请注意，这仅在您启动新实例时才有效：

> 用户数据脚本和 cloud-init 指令仅在启动实例时的第一个引导周期内运行。

*   如果它不是一个新实例，请编辑`/etc/ssh/sshd_config`文件添加/更改`Port 22`到您希望通过 ssh 连接的端口（即`Port 443`：），然后执行`service ssh restart`，您应该完成。

注意：我是用一个 Ubuntu 实例做的，用另一个 Linux 实例可能会略有不同。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-20T14:29:44.557

亚马逊防火墙阻止除 22 以外的所有端口。您首先必须启用端口 80/443/whatever。

HOWTO：转到“安全组”->单击您为实例选择的组，然后单击“入站”选项卡。

在那里你可以添加你的端口。

编辑：如果您偶然还安装了 apache 或其他一些网络服务器，端口 80 将被使用并且不能被 sshd 使用。我不知道您的服务器上安装了哪个操作系统，但可能已经包含了一些网络服务器？

编辑 2：根据最后一条评论，现在似乎默认情况下所有端口都被阻止。因此，如果需要，您必须打开端口 22。八年前并非如此，但配置发生了变化；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-02T20:30:03.233

这是我想出的在 443 和 22 上运行 sshd 在 ec2 上有 rhel8

1.  确保您的安全组允许从您的网络/IP 连接到所需端口（在我的情况下为 22 和 443）

```
tcp 443 1.2.3.4/32 #allow access to 443 from IP 1.2.3.4
tcp 22 1.2.3.4/32 #allow access to 22 from IP 1.2.3.4 
```

2.  登录 EC2 并

```
#install semanage with
sudo yum install -y policycoreutils-python-utils
#delete 443 from http ports
sudo semanage port -d -t http_port_t -p tcp 443
#add 443 to ssh ports
sudo semanage port -m -t ssh_port_t -p tcp 443 
```

3.  编辑 /etc/ssh/sshd_config

```
Port 22
Port 443 
```

4.  重启sshd

```
sudo service sshd restart 
```

# ruby - 无法加载此类文件 - Windows 的 libxml_ruby

> ID：13475306
> 
> 赞同：4
> 
> 时间：2012-11-20T14:27:15.983
> 
> 标签：ruby, gem, libxml-ruby

我的步骤是，

1.  执行 RubyInstaller.exe 文件
2.  安装红宝石
3.  安装路径：c:\ruby193
4.  安装 DevKit
5.  宝石安装 libxml-ruby --platform x86-mswin32-60
6.  制作 test.rb 文件

    需要'rubygems'
    需要'xml'

7.  红宝石测试.rb

8.  打印错误信息

错误信息：

```
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require':
126: The specified module could not be found    - C:/Ruby193/lib/ruby/gems/1.9.1/gems/lib
xml-ruby-1.1.3-x86-mswin32-60/lib/libxml_ruby.so (LoadError)
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/libxml-ruby-1.1.3-x86-mswin32-6    0/lib/libxml.rb:9:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/libxml-ruby-1.1.3-x86-mswin32-6    0/lib/xml.rb:11:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
        from test.rb:2:in `<main>' 
```

我想解决这个问题。帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-28T09:27:30.410

在带有 libxml-ruby 2.3.3（Ruby 2、1.9.3 和 1.9.2）的 Windows 7x64 上存在类似问题。根据此解决方案：

[https://github.com/xml4r/libxml-ruby/issues/42#issuecomment-7040881](https://github.com/xml4r/libxml-ruby/issues/42#issuecomment-7040881)

我管理我的问题也解决了。解决方案（感谢原作者）：

1.  在 libxml-ruby gem 文件夹中找到“libxml.rb”（类似于“C:\Ruby\Ruby192\lib\ruby\gems\1.9.1\gems\libxml-ruby-2.3.3-x86-mingw32\lib”）
2.  在文件顶部添加以下内容：

    ENV['PATH'] = ENV['PATH'] + ';' + File.expand_path(File.dirname(__FILE__) + '/libs')

3.  保存并享受

# lwuit - 横向无限滚动 LWUIT

> ID：13475312
> 
> 赞同：0
> 
> 时间：2012-11-20T14:27:55.340
> 
> 标签：lwuit, lwuit-form, lwuit-scroll

当我使用诺基亚 2.0 SDK 开发应用程序时，我在我的应用程序中发现了这个错误。当设备处于纵向模式时，表单的滚​​动工作正常，但是当我将方向更改为横向时，我发现滚动比页面中的信息大。

我该如何解决？

![人像模式](../Images/a873e217648a68edec29903575b9f278.png) ![横向模式](../Images/1fbbf535a350fb801d6fe6d37b93c98e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:46:07.490

似乎是 S40 端口中的错误。只需检测方向更改（通过覆盖 Form 的大小更改）并再次调用 setText()。它将触发重新计算文本区域中的行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T08:42:28.073

我解决了！

我忘记将布局放入`Form`，它不会重新计算大小。

现在它正在工作！伟大的！

# dwolla - dwolla 是否允许商家向客户支付资金的功能？

> ID：13475313
> 
> 赞同：1
> 
> 时间：2012-11-20T14:27:57.267
> 
> 标签：dwolla

我正在一家初创公司工作，其中商家必须不时地定期向客户支付资金。将此视为客户忠诚度计划，现金返还等。

dwolla 是否支持将资金从商家转移到客户的能力？从技术上讲，从一个银行账户到另一个银行账户似乎是一样的，但只是想确认是否是这种情况。（是否有退款 API 可以帮助解决这个问题？）

另外，这样的事情会违反使用条款吗？是否有可能遇到合规瓶颈？

感谢您在这方面的帮助，因为这将帮助我选择 dwolla 作为我们的支付处理器。

谢谢和最好的问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:38:58.170

我也会让迈克尔响起，但一般的答案是肯定的。你可以这样做。您只需从银行（或 dwolla 余额）向收款人的电子邮件或电话号码付款。

完全不违反条款。如果您在此过程中需要任何指导，请告诉我们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:45:35.953

你描述的场景对我来说听起来完全合法。我可以在这里看到的唯一警告是，您必须存储商家的 PIN 码才能定期从他们的帐户汇款，而无需他们直接参与（或者我理解错了吗？） - 我们的服务条款要求您在您的数据库中散列/加密所述 PIN。

关于退款 API - 我们还没有。您必须简单地使用 send() 方法，如果您愿意，可以随意将金额分成 10 美元以避免任何费用。

底线：你应该很高兴。

# backbone.js - Backbone 中标签的自定义编辑器

> ID：13475317
> 
> 赞同：0
> 
> 时间：2012-11-20T14:28:06.507
> 
> 标签：backbone.js, tags, backbone-model

我正在使用[主干表单](https://github.com/powmedia/backbone-forms)，并且一直在创建自定义编辑器以满足我的需求。

我现在开始想要编辑模型的标签，在我继续实现自己的标签之前，我想知道是否已经有一个自定义编辑器能够做到这一点？

例如，模型可以将 tags 字段存储为字符串：

```
@model.tags # = 'this, and, that, foo, bar') 
```

我想如下定义我的主干形式：

```
class CPP.Models.Event extends Backbone.Model
  # Definitions (url etc)
  ...

  # Form Schema
  schema:
    tags:
      type: "TagEditor"
      url: "/someurl" 
```

这将产生一个具有以下字段的编辑器：

*   **文本字段**- 用于添加标签，使用从 url 加载的值自动完成（通过现有标签发送以避免重复）
*   **标签容器**- 在他们自己的 div 中包含所有标签（然后我会为这些设置样式）

当我通过按 Enter 添加新标签时，它会将标签添加到标签容器中，然后当我稍后从编辑器中读取时，它会将标签容器/标签压缩回逗号分隔的列表中。

希望这是有道理的，我几乎可以肯定我在某个地方的 github 存储库中看到有人这样做，但我一直在通过谷歌和我的历史搜索一个好小时，但我在任何地方都找不到。

非常感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:36:53.340

我最终在 github 上找到了我正在寻找的文件[https://github.com/jumski/backbone-widgets/blob/master/src/views/tag_editor.js.coffee](https://github.com/jumski/backbone-widgets/blob/master/src/views/tag_editor.js.coffee)

# php - 在 Magento 的可下载控制器中获取产品属性

> ID：13475321
> 
> 赞同：1
> 
> 时间：2012-11-20T14:28:39.410
> 
> 标签：php, magento, controllers

我正在尝试在我的可下载控制器中获取产品属性。我在一家电子书店工作。我创建了一个自定义模块 sp。我需要产品属性来为我的电子书添加水印。

我正在使用的控制器是 Mage/Downloadable/controllers/DownloadController.php

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:32:42.737

完全取决于你在做什么。

如果你看一下，`linkAction`你可以看到他们是如何获得产品的：

```
$id = $this->getRequest()->getParam('id', 0);
$linkPurchasedItem = Mage::getModel('downloadable/link_purchased_item')->load($id, 'link_hash');
[...]
$product = Mage::getModel('catalog/product')->load($linkPurchasedItem->getProductId()); 
```

现在产品已加载到`$product`变量中。`$product->getData('my_custom_attribute')`您可以像往常一样通过或获取产品属性`$product->getMyCustomAttribute`。

# r - 在 LaTeX 中错误识别 PDF 中的数学符号

> ID：13475324
> 
> 赞同：2
> 
> 时间：2012-11-20T14:29:02.903
> 
> 标签：r, math, pdf, latex, pdf-generation

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:41:01.820

对于没有编码问题的无缝集成，我会查看包“TikzDevice”。它以 LaTeX 格式输出 Tikz 图像。例如：

```
require(tikzDevice)

setwd("/Path/To/LaTeX/Files/")

#Names of LaTeX symbols
syms <- c('alpha', 'theta', 'tau', 'beta', 'vartheta', 'pi', 'upsilon', 'gamma', 'varpi', 'phi', 'delta', 'kappa', 'rho', 'varphi', 'epsilon', 'lambda', 'varrho', 'chi', 'varepsilon', 'mu', 'sigma', 'psi', 'zeta', 'nu', 'varsigma', 'omega', 'eta', 'xi', 'Gamma', 'Lambda', 'Sigma', 'Psi', 'Delta', 'Xi', 'Upsilon', 'Omega', 'Theta', 'Pi', 'Phi')
len <- length(syms)

# random colors (red, green, blue)
r <- round(runif(len), 2)
g <- round(runif(len), 2)
b <- round(runif(len), 2)

# calculate dummy data points
x <- runif(50,1,10)
y <- x + rnorm(length(x))
fit <- lm(y ~ x)
rsq <- summary(fit)$r.squared
rsq <- signif(rsq,4)

# plot the result, will create symbol-regression.tex in the working
# directory the first time this is run it may take a long time because the
# process of calulating string widths for proper placement is
# computationally intensive, the results will get cached for the current R
# session or will get permenantly cached if you set
# options( tikzMetricsDictionary='/path/to/dictionary' ) which will be
# created if it does not exist.  Also if the flag standAlone is not set to
# TRUE then a file is created which can be included with \include{}

tikz('symbolr.tex', width = 4,height = 4,pointsize = 12)

# The syntax is mar=c(bottom, left, top, right).
par(mar=c(2,2,2,2))
# plot the box and the regression line
plot(x, y, type='n', xlab='', ylab='')
box()
abline(fit)

# add the latex symbols as points
text(x, y, paste('\\color[rgb]{',r,',',g,',',b,'}{$\\',syms,'$}',sep=''))
# Display the correlation coefficient
mtext(paste("Linear model: $R^{2}=",rsq,"$" ),line=0.5)
# and the equation of the line
legend('bottom', legend = paste("$y = ", round(coef(fit)[2],3),'x +', round(coef(fit)[1],3), '$',  sep=''), bty= 'n')

# Close the device
dev.off() 
```

然后你所要做的就是在你的 LaTeX 文档中包含刚刚从 R 输出的文件。

# ruby-on-rails-3 - Rails 回调 before_create

> ID：13475325
> 
> 赞同：1
> 
> 时间：2012-11-20T14:29:02.377
> 
> 标签：ruby-on-rails-3

我有两个模型`Employee`和`Company`. 在`Employee`模型中我有一个`before_create`回调，但是在这样做时`@company.employees.create(params)`，回调不会被触发。使回调起作用的选择是什么？我使用 是`before_create`因为我只希望它第一次触发，创建对象。

# javascript - (!= and == and others)的jQuery解释

> ID：13475331
> 
> 赞同：0
> 
> 时间：2012-11-20T14:29:16.163
> 
> 标签：javascript, jquery

我正在学习 jQuery，我看到插件中的人使用了很多，但我不知道每个插件的含义。因此，每个人的解释将不胜感激。

所以这是列表，也许我打错了一些，但欢迎任何人编辑我的帖子。

```
==, ===, !0, !1, !=, !== 
```

请向我解释...谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T14:30:41.243

查看此 javascript 逻辑运算符列表：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)

和比较运算符：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T14:34:29.297

```
Operator    Description  
==          is equal to      
===         is exactly equal to (value and type)      
!=          is not equal     
!==         is not equal (neither value nor type)     
>           is greater than x>8  
<           is less than    x<8  
>=          is greater than or equal to  
<=          is less than or equal to
!0              Not 0 (could be used as not false)
!1              Not 1 (could be used as not true) 
```

[来源](http://www.w3schools.com/js/js_comparisons.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T14:32:40.210

```
// Comparison operators
var foo = 1;
var bar = 0;
var baz = "1";
var bim = 2;

foo == bar;   // returns false
foo != bar;   // returns true
foo == baz;   // returns true; but note that the types are different

foo === baz;             // returns false
foo !== baz;             // returns true
foo === parseInt( baz );   // returns true

foo > bim;    // returns false
bim > baz;    // returns true
foo <= baz;   // returns true 
```

链接：[http ://stage.learn.jquery.com/javascript-101/operators/](http://stage.learn.jquery.com/javascript-101/operators/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T14:50:10.347

简而言之，这些用于比较“if”语句中的 2 个值。它们被称为比较运算符。每个人都有不同的比较。最令人困惑的是 2= 和 3=。第三个等号比较数据类型和值。通常情况下，除非您正在创建“严格”代码，否则您不需要第三个 = 符号。运算符分解如下：

*   **==**等于

    *   *示例*: if (x == z) // 如果 x 和 z 都是数字 7，这将返回 true
*   **===**完全等于（比较值和类型）
    *   *示例*: if (x == z) // 如果 x 是字符串 7，z 是整数 7，则返回 false
*   **!=**不相等
    *   *示例*: if (x != z) // 如果 x 为 7 且 z 为 8，则 if 语句将返回 true
*   **!==**不相等（再次比较值和类型）

    *   *示例*: if (x !== z) // 如果 x 和 z 都是 7，但一个是字符串，另一个是整数，则返回 true，因为它们不是同一类型
*   **>**大于
    *   *示例*: if (x > z) // 如果 x 为 8，z 为 7，则返回 true
*   **<**小于
    *   *示例*: if (x < z) // 如果 x 为 8，z 为 7，则返回 false
*   **>=**大于或等于
    *   *示例*: if (x >= z) // 如果 x 是 8 或 7 并且 z 是 7，那么这在任何一种情况下都是正确的
*   **<=**小于或等于
    *   *示例*: if (x <= z) // 如果 x 为 8，z 为 7，则返回 false，但如果 x 为 7，则返回 true

欲了解更多信息，请点击以下链接：

*   [http://www.w3schools.com/js/js_comparisons.asp](http://www.w3schools.com/js/js_comparisons.asp)
*   [http://www.javascriptkit.com/jsref/comparison_operators.shtml](http://www.javascriptkit.com/jsref/comparison_operators.shtml)
*   [http://www.how-to-code.com/javascript/javascript-tutorial/comparison-operators-in-javascript.html](http://www.how-to-code.com/javascript/javascript-tutorial/comparison-operators-in-javascript.html)

# asp.net - 表不工作

> ID：13475335
> 
> 赞同：3
> 
> 时间：2012-11-20T14:29:37.410
> 
> 标签：asp.net

我在 asp.net webform 中使用表格

我正在尝试这样：

```
<div>
    <asp:Table ID="Table1" runat="server">
        <tr>
            <td> asdf </td>
            <td> asdf </td>
        </tr>
    </asp:Table>
</div> 
```

它不工作。

> asdf asdf 创建控件时出错 - UpdatePanel1System.Web.UI.WebControls.TableRowCollection 必须具有“System.Web.UI.WebControls.TableRow”类型的项目。“tr”的类型为“System.Web.UI.HtmlControls.HtmlTableRow”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:32:15.823

您将 ASP.NET 服务器端控件与标准 HTML 混合在一起。看看[MSDN 上的例子](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.aspx)：

```
<asp:Table id="Table1" runat="server"
    CellPadding="10" 
    GridLines="Both"
    HorizontalAlign="Center">
    <asp:TableRow>
        <asp:TableCell>
            Row 0, Col 0
        </asp:TableCell>
        <asp:TableCell>
            Row 0, Col 1
        </asp:TableCell>
    </asp:TableRow>
    <asp:TableRow>
        <asp:TableCell>
            Row 1, Col 0
        </asp:TableCell>
        <asp:TableCell>
            Row 1, Col 1
        </asp:TableCell>
    </asp:TableRow>
</asp:Table> 
```

`asp:Table`在这种情况下，an 的直接子标记是`asp:TableRow`（服务器端控件），而不是`tr`（HTML 标记）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:33:41.103

不能像在标准 HTML中那样使用`<tr>`,`<td>`或`<th>`标签 而是必须使用 ASP.NET 表格标签，如下所示：`<asp:Table>``<table>`

```
<asp:Table runat="server">  
  <asp:TableHeaderRow runat="server">  
    <asp:TableHeaderCell>Header 1</asp:TableHeaderCell>  
    <asp:TableHeaderCell>Header 2</asp:TableHeaderCell>  
    <asp:TableHeaderCell>Header 3</asp:TableHeaderCell>  
  </asp:TableHeaderRow>  
  <asp:TableRow runat="server"> 
    <asp:TableCell>Value 1</asp:TableCell>  
    <asp:TableCell>Value 2</asp:TableCell>  
    <asp:TableCell>Value 3</asp:TableCell>  
  </asp:TableRow>  
</asp:Table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:30:46.533

行和单元格必须是 asp.net 服务器控制版本。

```
<asp:Table ID="Table1" runat="server">
    <asp:TableRow>
        <asp:TableCell></asp:TableCell>
    </asp:TableRow>
</asp:Table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T14:32:43.963

用这个：

```
 <table ID="Table1" runat="server">
                    <tr>
                        <td> asdf </td>
                        <td> asdf </td>
                    </tr>
                </table> 
```

# javascript - jQuery 对话框：如何在对话框中滚动/跳转到顶部/底部/#link？

> ID：13475346
> 
> 赞同：0
> 
> 时间：2012-11-20T14:30:04.290
> 
> 标签：javascript, jquery, jquery-ui, dialog

我有一个带有这样链接的页面：

```
<a href="#link-1">Link 1</a> 
```

OnClick 它跳转到：

```
<a href="" name="link-1">Link 1 Topic</a> 
Text...
<a href="#top">top</a> 
```

一切正常，但现在我想在 jQuery 对话框中显示该页面的内容。

问题：onClick (top/bottom/#link) 整个页面跳转，但我只希望对话框内的内容跳转。

任何想法如何在没有太多 JS 的情况下简单地修复它？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:57:44.417

简单的解决方案：

```
<a href="" name="_top"></a>
<a href="#_top">top</a> 
```

**注意**：“顶部”之前的“_”！

# matlab - Matlab - 在程序中间调用mex文件时内存不足

> ID：13475348
> 
> 赞同：2
> 
> 时间：2012-11-20T14:30:18.410
> 
> 标签：matlab, memory

我问这个问题是因为我自己没有解决它，希望有人能给我任何建议。

我的问题是：

我的程序包括 3 个部分：

```
part-1: video encoder, 
part-2: channel coding - also call to a mex-files: complie from C-function "encodeBits.c" to Matlab-mexfile "encodeBits.mexw32", 
part-3: video decoder. 
```

我还执行 4 项检查：

检查1：**part-1 + part-2**作为一个整体。这意味着没有通道编码，程序运行良好。

检查 2：对 part-2 的伪输入，这意味着**part-2 保持独立**。第 2 部分效果很好。

```
part-2 still works well even under this condition:
                possible array:             **632** MB (6.623e+08 bytes) *
                Memory available for all arrays:   **1054** MB (1.105e+09 bytes) **
                Memory used by MATLAB:              653 MB (6.842e+08 bytes)
                Physical Memory (RAM):             2795 MB (2.930e+09 bytes) 
```

检查3：**part-1 + part-2 + part-3**作为一个整体。

```
 memory before part 1 runs:
        Maximum possible array:             877 MB (9.199e+08 bytes) *
        Memory available for all arrays:   1265 MB (1.326e+09 bytes) **
        Memory used by MATLAB:              441 MB (4.628e+08 bytes)
        Physical Memory (RAM):             2795 MB (2.930e+09 bytes)
    memory before part-2 runs, means after part-1 finished:
        Maximum possible array:             **869** MB (9.107e+08 bytes) *
        Memory available for all arrays:   **1270** MB (1.332e+09 bytes) **
        Memory used by MATLAB:              430 MB (4.511e+08 bytes)
        Physical Memory (RAM):             2795 MB (2.930e+09 bytes)
    and it results error right after part-2 starting with error
        Error using encodeBits
        Out of memory. Type HELP MEMORY for your options. 
```

检查 4：在清除检查 3 中的所有变量后**再次单独尝试第 2 部分它仍然导致错误**

```
 Error using encodeBits
        Out of memory. Type HELP MEMORY for your options. 
```

检查5：**关闭**Matlab窗口，打开Matlab窗口并**单独运行第2部分** 效果很好。

所以，我不明白它为什么会发生，我试图努力搜索，但我仍然无法解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:48:06.343

根据您在 mex 调用时/之后的负载检查失败以及使用 clear all 不修复它来判断，听起来您的 mex 代码中有内存泄漏。如果 mexFunction 分配内存并且不清除它，matlab 无法清除空间，因此它将保持分配状态，直到您关闭 matlab。

# facebook-graph-api - Facebook Graph API 如何向其他用户的公开帖子发表评论？

> ID：13475350
> 
> 赞同：3
> 
> 时间：2012-11-20T14:30:21.203
> 
> 标签：facebook-graph-api

它适用于在页面故事上发布：

```
postId + "/comments" 
```

例如 postId 在哪里

```
postId = "360637130688291_377801902305147" 
```

但是当发布到允许像[这样](http://www.facebook.com/permalink.php?id=1430496489&story_fbid=4047336948376)的评论的用户的公共故事中时，图形 api 无法找到它。

`"1430496489_4047336948376/comments"`得到答复：

```
{"error":{"message":"(#100) Error finding the requested story","type":"OAuthException","code":100}} 
```

这是一个常见问题还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:11:04.430

我已经在[http://developers.facebook.com/tools/explorer](http://developers.facebook.com/tools/explorer?method=POST&path=1430496489_4047336948376/comments)中对它进行了所有权限的测试，看来这是不可能的。

可能是为了避免垃圾邮件，否则任何人都可以开始创建应用程序，这些应用程序将在其他用户墙上的帖子中运行，并在那里发表评论并附上最近的色情网站的链接。

奇怪的是，这适用于第三方拥有的页面上的帖子。

# jquery - 在 jquery 上处理多个事件处理程序按键

> ID：13475352
> 
> 赞同：2
> 
> 时间：2012-11-20T14:30:23.780
> 
> 标签：jquery, jquery-ui

我有一个页面，其中有一个表单，我附加了一个 jquery 事件处理程序，通过在键盘上按 Enter 来提交此表单。

```
//Submit form when enter pressed
$(document).keypress(function (e) {
    if (e.which == 13) {
        $('form').submit();
    }
}); 
```

我还可以在同一页面上使用 jquery ui dialog() 显示模式。在模态（在调用 dialog() 之前是一个隐藏的 div）中有一个按钮，我还想让用户能够在他按键盘上的 Enter 键时“单击”该按钮。我遇到的问题是，如果我在页面上使用与以前相同的事件处理程序，它将同时提交表单并单击按钮。

我该如何处理，以便第二个事件处理程序仅限于模态/不传播到文档的其余部分？我试过 e.stopPropagation 在那种情况下不起作用。

```
//Handler on the modal
$(document).keypress(function(e) {
    e.stopPropagation();
    if($('#button-doc-validate').is(':visible') && e.which == 13) {
        //Click the button
        $('#button-doc-validate').click();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:47:40.327

如果您使用 for submit 处理您的表单（它将为您处理 enter 按键）..那么您可以在您的模式上绑定 keypress 事件处理程序以分隔两个不同的按键

```
$('form').submit(function(){}) //- will handle enter keypress and form submit action

$('modal').keypress(function(){}); //- will handle the keypress inside the modal 
```

所以输入按键将被分开

[http://jsfiddle.net/KMAYv/](http://jsfiddle.net/KMAYv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:53:11.573

答案很简单，我只是没想到这是可能的。

我刚刚在模态的 div 上绑定了 keypress 事件处理程序，而不是将其绑定到文档：

```
//Handler on the modal
$('#modal-container').keypress(function(e) {
    if($('#button-doc-validate').is(':visible') && e.which == 13) {
        //Click the button
        $('#button-doc-validate').click();
        return false;
    }
}); 
```

这样，它仅在模式上触发并取消返回 false 的传播，因此不会影响更通用的文档范围的按键处理程序。

# c++ - 从 Blackmagic 设备获取帧

> ID：13475353
> 
> 赞同：1
> 
> 时间：2012-11-20T14:30:30.683
> 
> 标签：c++, visual-studio-2010

我正在尝试开始使用 Balckagic SDK。而且我很难获得设备“DeckLink SDI”的框架

```
void    get_video(IDeckLink* decklink){
HRESULT                         result;
IDeckLinkInput*                 decklinkinput = NULL;
BSTR                            name = NULL;
IDeckLinkDisplayModeIterator*   displayModeIterator = NULL;
IDeckLinkInputCallback*         theCallback = NULL; 
IDeckLinkVideoInputFrame*       decklinkInputVideoframe =NULL;
IDeckLinkDisplayMode*           displayMode = NULL;
IDeckLinkVideoInputFrame*       inputVideoFrame;
IDeckLinkAudioInputPacket*      inputAudioPacket;
IBMDStreamingDeviceInput*       capture;
IDeckLinkVideoFrame*            deckLinkVideoFrame = NULL;
unsigned long                       avaibleFrames = NULL;

result = decklink->QueryInterface(IID_IDeckLinkInput,(void**) &decklinkinput);

result = decklinkinput->GetDisplayModeIterator(&displayModeIterator); 

result = decklinkinput->SetCallback(theCallback);
result = decklinkinput->EnableVideoInput(BMDDisplayMode::bmdModeHD1080i50,BMDPixelFormat::bmdFormat8BitYUV,bmdVideoInputEnableFormatDetection);
result = decklinkinput->DisableAudioInput();

result = decklinkinput->StartStreams();
decklinkinput->GetAvailableVideoFrameCount(&avaibleFrames); 

cout<<"Number of avaible frames " << avaibleFrames<<endl;
result = decklinkinput->SetCallback(theCallback);
theCallback->VideoInputFrameArrived(inputVideoFrame, inputAudioPacket);
result = decklinkinput->StopStreams();

} 
```

而且我没有语法错误，我得到的只是帧数为0。而且我不知道如何保存帧。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:50:13.217

看一下代码示例。过程：

1.  初始化 Decklink 板
2.  注册回调并开始流式传输
3.  继续主线程上的其他工作

现在每次有可用的帧时，Decklink SDK 都会用它刚刚处理的帧调用注册的回调函数。从上面的帖子中，我感觉您没有掌握回调的概念。

# html - 在 PHP 中添加逻辑以进行打印

> ID：13475354
> 
> 赞同：0
> 
> 时间：2012-11-20T14:30:32.943
> 
> 标签：html, css

我刚开始使用 PHP，并且无法正确打印我的页面结果。我从 index.php 调用下面的页面。如果我在显示器上显示页面看起来没问题，但是当我打印页面并且它超过一页时，页面末尾的部分被切断并在第二页上继续。我正在寻找一种方法，以便当我打印页面时，它将查看该部分（每个项目编号）是否适合该页面中的整个部分（修复描述、常见原因等）。如果没有，则只需在下一页上打印。

我还包括了 CSS 文件。基本上它所做的就是强制页面的宽度适合信纸大小的纸张。先感谢您。

```
 <?php include_once $_SERVER['DOCUMENT_ROOT'] .
    '/fms/includes/helpers.inc.php'; ?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Print Repair Form</title>
  <link rel='stylesheet' type='text/css' href='/fms/css/letter-size.css' />
</head>
<body>
  <div id="page-wrap">
    <table>
    <tr>
          <td rowspan = "3" id="logo"><a href="/fms/"><img src="/fms/images/flex_no_address_256.jpg" /></a></td>
      <td rowspan = "3" id="address">Address<br />
        City, State Zipcode <br />
        Phone number <br />
        website address
      </td>
      <td>
        <table>
        <tr>
              <td id="repairinfo" class="theading" colspan = "2">Repair Detail</td>
        </tr>
        <tr>
          <td><?php htmlout($custno); ?></td>
          <td width="100px">WO: <?php htmlout($wonum); ?></td>
        </tr>
        <tr>
          <td><?php htmlout($custname); ?></td>
          <td></td>
        </tr>
         </table>
      </td>
    </tr>
     </table>
     <br />
     <?php foreach($items as $item): ?>
     <table border ="1">
    <tr>
      <td class="theading">Type of Repair</td>
          <td class="theading">Repair ID</td>
      <td class="theading">Fault Picture</td>
    </tr>
    <tr>
      <td class="tablepadding"><?php htmlout($item['repairtype']); ?></td>
      <td class="tablepadding"><?php htmlout($item['itemno']); ?></td>
      <td rowspan="7" align="center">
          <img src="/fms/images/wo_items/<?php htmlout($item['filename']); ?>"          width="256" />
      </td>
    </tr>
    <tr>
      <td class="theading" colspan="2">Repair Description</td>
    </tr>
    <tr>
      <td class="tablepadding" colspan="2"><?php htmlout($item['repairdesc']); ?>
      </td>
    </tr>
    <tr>
      <td class="theading" colspan="2">Common Causes</td>
    </tr>
    <tr>
      <td class="tablepadding" colspan="2"><?php htmlout($item['commoncause']); ?>
      </td>
    </tr>
    <tr>
      <td class="theading" colspan="2">Preventive Measures and Maintenance</td>
    </tr>
    <tr>
      <td class="tablepadding" colspan="2"><?php htmlout($item['maintenance']); ?>
      </td>
    </tr>
      </table>
      <br />
      <?php endforeach; ?>
    </div>
</body>
</html> 
```

CSS：

```
* { margin: 0; padding: 0;}
body {
    font: 12px/1.4 Georgia, serif;
}

a img {
  border: none;
}
#page-wrap {
    width: 800px;
    margin: 0 auto;
}

table {
    width:100%;
}

#logo {
    width: 256px;
}

#address {
    width: 170px;
}

#repairinfo {
    border-bottom: solid 1px;
    text-align: center;
}

.theading {
  font-weight: bold;
  padding: 3px;
}

table tr td.tablepadding {
  padding: 3px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:38:34.377

您的问题不在于 PHP，而在于 CSS。您需要包含打印特定样式表，因为这将与您的计算机显示器样式不同。

这是一篇关于打印 CSS 的好博文 [http://www.webcredible.co.uk/user-friendly-resources/css/print-stylesheet.shtml](http://www.webcredible.co.uk/user-friendly-resources/css/print-stylesheet.shtml)

在您的 html 中，打印样式表`<link>`元素将需要一个`media="print"`属性

然后在您的打印样式表中，您可以指定宽度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:44:03.397

它应该通过 CSS 而不是 PHP 来实现，尽管您可以使用 php 以及一种解决方法，google for css media。

打印的 CSS 有一些技巧：http: [//slodive.com/web-development/css-print-page-tricks/](http://slodive.com/web-development/css-print-page-tricks/)

不能给你具体的细节，因为我没有做太多的印刷工作，但这一切都是为了测试适合纸的总高度，并在 php 中寻找一个度量（也许是线条？）所以如果尺寸更大比您设置的那个，它创建另一个表。

您还可以使用 Javascript，因为您可以检测元素（例如表格）的高度，并在达到最大高度时调用某些函数。

* * *

此外，如果不是完全必要，我建议您不要使用表格，这是一种非常老派的方法，修改起来很麻烦，跨浏览器有更多不同的行为，并且有更多不必要的代码。

# php - 设备上的 android 应用程序连接到 php 脚本

> ID：13475359
> 
> 赞同：2
> 
> 时间：2012-11-20T14:30:44.067
> 
> 标签：php, android, mysql, webserver

我的英语不是那么好，所以我将尝试解释我的问题：

我在服务器（外部网络服务器）中有一组 .php 文件。我在运行 android 3.2.1 的平板电脑上安装了 android 应用程序，我需要：

1）调用与数据库（mysql数据库）进行连接的php文件 2）在数据库上做一些事情（总是使用完成工作的php文件

我已经从[http://download.androidhive.info/download.php下载了教程](http://download.androidhive.info/download.php)

我已经尝试了所有方法来使它适用于我的情况，但没有任何结果。

也许我只是错过了一些东西......一些非常愚蠢的东西（一如既往）导致我的连接失败。提前谢谢，我会喜欢一些建议（不仅适用于 android java 文件，还适用于 php 文件）

```
<?php

/*
 * All database connection variables
 */

define('DB_USER', ""); // db user
define('DB_PASSWORD', ""); // db password (mention your db password here)
define('DB_DATABASE', "androidhive"); // database name
define('DB_SERVER', ""); // db server
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:26:26.047

将所有文件放在同一个文件夹下并将链接指向该文件夹（如果它在 /var/www 下只需写下省略该路径的地址）然后替换 : require_once **DIR**。'/db_connect.php'; 在 - require_once 'db_connect.php'; 将文件权限设置为 777（仅用于教程，在现实生活中您应该授予应该可以解决问题的权限...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:43:34.180

请检查一下： [http](http://ugirusgiarto.wordpress.com/2011/10/27/json-php-mysql-with-asynctask-progressdialog/)
://ugirusgiarto.wordpress.com/2011/10/27/json-php-mysql-with-asynctask-progressdialog/ 我认为最好先在本地主机上进行测试，使用 WAMP 或 XAMPP .
并在有人进入您的数据库之前删除您的数据库连接数据。

# jquery - 是否有一个 jQuery 插件可以让我在点击时交叉淡入淡出 2 个图像？

> ID：13475363
> 
> 赞同：2
> 
> 时间：2012-11-20T14:30:48.423
> 
> 标签：jquery, image-manipulation

我不想使用 Cycle 插件，因为它似乎无法轻松点击。我希望能够单击图像并通过交叉淡入淡出将其更改为另一个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:45:44.023

你可以像本[教程](http://css3.bradshawenterprises.com/cfimg/)一样使用 CSS3 和 jQuery :)

# ios - 在 UITableView 的 didSelectRow 之前调用 Storyboard segue

> ID：13475365
> 
> 赞同：5
> 
> 时间：2012-11-20T14:30:54.853
> 
> 标签：ios, storyboard, tableview, didselectrowatindexpath

我有一个带有表格单元格的故事板。我想在选择一行时使用一些数据设置一些属性，所以我执行以下操作：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [[ProperyManager sharedPropertyManager]setSelectedRow:[verseIds objectAtIndex:indexPath.row]];
    [[ProperyManager sharedPropertyManager]setID:[poemIDs objectAtIndex:indexPath.row]];
    [[ProperyManager sharedPropertyManager]setRowToReturn:[NSString stringWithFormat:@"%i",indexPath.row]];

} 
```

问题是，目标视图控制器的视图控制器生命周期方法（viewWillAppear 等）在上面的 didSelectRow 方法之前被调用，因为 segue 在执行委托方法之前推送视图。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T14:40:08.770

Rawkode 的答案是一个很好的解决方案 - 另一种方法是，在 中`prepareForSegue:`，您可以访问表格视图的选定行（`sender`参数将是表格视图单元格，然后您可以`[self.tableView indexPathForCell:(UITableViewCell*)sender]`获取索引路径）并设置您需要的任何内容在那时候。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-20T14:34:32.603

不要创建从 Cell 到新 VC 的 Segue，而是将 Segue 从旧 VC 设置到新 VC 并给 segue 一个标识符。

那么内

`didSelectRowAtIndexPath`你可以打电话

`[self performSegueWithIdentifier:@"Segue" sender:self]`

# jquery - Jquery - Flash 文本

> ID：13475368
> 
> 赞同：0
> 
> 时间：2012-11-20T14:30:57.317
> 
> 标签：jquery, html

任何人都可以建议一种使用 Jquery 制作漂亮的文本闪烁效果的方法吗？

我有一个计数器，它可以计算页面加载的动态百分比 - 我希望最终数字在达到其结果时闪烁 - 只是想知道是否有人可以提出一个很好的平滑方法？

干杯保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:49:51.270

[这是一个很好且简单的解决方案：](http://jsfiddle.net/M4Fcd/)

`effectFadeIn('test');`使用要闪烁的类名 调用函数。

```
var speed = 200;

function effectFadeIn(classname) {
    $("." + classname).fadeOut(speed).fadeIn(speed, effectFadeOut(classname))
}

function effectFadeOut(classname) {
    $("." + classname).fadeIn(speed).fadeOut(speed, effectFadeIn(classname))
}

$(document).ready(function() {
    effectFadeIn('test');
});​ 
```

# asp.net-mvc - MVC 4 Web API NullException 错误（Noobie）

> ID：13475372
> 
> 赞同：0
> 
> 时间：2012-11-20T14:31:03.053
> 
> 标签：asp.net-mvc, ldap, asp.net-web-api

我正在开发我的第一个 MVC 4 应用程序，遵循 Asp.net 上的 MVC First Web API 教程。我保留了相同的名称，但更改了模型和控制器代码。这是我的模型：

```
public class Product
{
    public string SID { get; set; }
    public string name { get; set; }
    public string givenName { get; set; }
    public string sn { get; set; }
    public string mail { get; set; }
    public string telephoneNumber { get; set; }
    public string mobile { get; set; }
    public string otherMobile { get; set; }
    public string title { get; set; }
    public string Manager { get; set; }
    public DateTime whenChanged { get; set; }
}

public class ProductModel
{
    public ProductModel()
    {
        ProductList = new List<Product>();
    }
    public IList<Product> ProductList { get; set; }
} 
```

这是我的 API 控制器：

```
 public class ProductsController : ApiController
{
    ProductModel products = new ProductModel();

    public IEnumerable<Product> GetAD()
    {
        DirectoryEntry domainRoot = new DirectoryEntry(LDAP_server);
        DirectorySearcher searcher = new DirectorySearcher(searchStr);
        SearchResultCollection results = searcher.FindAll();
        foreach (SearchResult srchResult in results)
        {
            DirectoryEntry dirEntry = srchResult.GetDirectoryEntry();
            if (dirEntry.Properties["givenName"].Value != null && dirEntry.Properties["sn"].Value != null && !dirEntry.Parent.Name.Contains("Terminated"))
            {
                products.ProductList.Add(new Product()
                {
                    SID = dirEntry.Properties["sid"].Value.ToString(),
                    name = dirEntry.Properties["name"].Value.ToString(),
                    givenName = dirEntry.Properties["givenName"].Value.ToString(),
                    sn = dirEntry.Properties["sn"].Value.ToString(),
                    mail = dirEntry.Properties["mail"].Value.ToString(),
                    telephoneNumber = dirEntry.Properties["telephoneNumber"].Value.ToString(),
                    mobile = dirEntry.Properties["mobile"].Value.ToString(),
                    otherMobile = dirEntry.Properties["otherMobile"].Value.ToString(),
                    title = dirEntry.Properties["title"].Value.ToString(),
                    Manager = dirEntry.Properties["Manager"].Value.ToString(),
                    whenChanged = Convert.ToDateTime(dirEntry.Properties["whenChanged"].Value.ToString()),
                });
            }
        }
        return products.ProductList;
    }
} 
```

我在 'products.ProductList.Add(new Product()' 上收到 NullException，我是否遗漏了一些简单的东西？请原谅我的编码，因为我只是想启动并运行它，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:47:40.473

问题很可能是处理 dirEntry，而不是 Web API 本身。与其将 LDAP 引入其中，不如创建一堆虚拟产品来返回。

仅供参考...使用 LDAP 对象也存在内存泄漏问题。无论是沿着幸福的道路还是抛出异常，都需要正确处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:10:58.153

我是个白痴。'sid' 不是来自 AD 的正确属性名称，它是 'objectSid'，因此总是返回 null。我知道这很简单。

# html - 框上的跨浏览器阴影

> ID：13475373
> 
> 赞同：2
> 
> 时间：2012-11-20T14:31:14.617
> 
> 标签：html, image, css

我正在构建一个新站点，该站点在各种页面元素（框、输入等）上都有阴影。整个站点需要在所有浏览器中都相同（回到 IE7）。

我的问题在于在新旧浏览器上的许多不同元素上实现这些阴影的最佳方法。

![在此处输入图像描述](../Images/3ffae33ecadc295e059d8d0d339a30b8.png)

我知道没有图像的 css3 解决方案：`box-shadow: 1px 1px #333`- 但这不会很好地降级。

我真的不想为每个元素都使用图像，因为我们会查看每个元素 4 个图像，并且对服务器的请求和页面加载时间会变得很荒谬，只是为了一个简单的效果。

甚至可以创建一个后备说：*如果浏览器不支持 box-shadow，使用图像*？我看到的唯一问题是很多额外的标记，这会使管理变得更加困难。

我想这里的困难是要求“我想要它现代但要很好地退化”。
**实施投影时，哪种解决方案最适合我（有替代方案）？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:48:29.970

您可以使用[http://modernizr.com](http://modernizr.com)来检测当前用户是否使用支持 css3 的浏览器，但我认为您最好使用旧方法制作带有阴影的框。

您可以使用“滑动门”技术制作盒子的顶部和底部，并为盒子本身使用另一个背景图像。

不管怎样，你可以使用 CSS3 pie ( [http://css3pie.com/](http://css3pie.com/) ) 但我通常不喜欢这个插件，因为它有时有点小错误，并且会提高浏览器性能所需的性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T14:40:37.373

你可以尝试使用css

```
filter: progid:DXImageTransform.Microsoft.Shadow(...); 
```

但这阴影很可怕。我认为最好的解决方案是仅在允许 box-shadow 的现代浏览器中显示阴影。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T14:36:42.063

嘿，你可以用Javascript检查它

```
var supports = (function() {  
   var div = document.createElement('div'),  
      vendors = 'Khtml Ms O Moz Webkit'.split(' '),  
      len = vendors.length;  
   return function(prop) {  
      if ( prop in div.style ) return true;  
      prop = prop.replace(/^[a-z]/, function(val) {  
         return val.toUpperCase();  
      });  
      while(len--) {  
         if ( vendors[len] + prop in div.style ) {  
            // browser supports box-shadow. Do what you need.  
            // Or use a bang (!) to test if the browser doesn't.  
            return true;  
         }  
      }  
      return false;  
   };  
})();  
if ( supports('textShadow') ) { 
   document.documentElement.className += ' textShadow';  
} 
```

然后输入你想要使用图像的 else 语句，或者你可以使用一个名为 Modernizer [http://www.modernizr.com/](http://www.modernizr.com/)的库，这样旧的浏览器就知道他们必须如何实现 css3 标签

链接到代码的源代码：[SOURCECODE](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-detect-css-support-in-browsers-with-javascript/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T14:37:14.203

您可以对旧版本的 IE 使用以下内容：

```
/* For IE 8 */
-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')";
/* For IE 5.5 - 7 */
filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000'); 
```

[此处为 MSDN 详细信息，此处](http://msdn.microsoft.com/en-us/library/ms533086%28v=vs.85%29.aspx)为[示例](http://samples.msdn.microsoft.com/workshop/samples/author/filter/Shadow.htm)

# c# - 将 String[][] 发送到 Web 服务

> ID：13475374
> 
> 赞同：3
> 
> 时间：2012-11-20T14:31:18.043
> 
> 标签：c#, jquery, ajax

需要通过对 Web 服务的 AJAX 调用将 Sqlite 表的值发送到服务器。我不知道如何以 Web 服务可以接受的方式打包该表的行。

Web 方法签名

```
[WebMethod]
    public void CVW(string[][] qAndA)
    {} 
```

客户端

```
var qAndA = new Array();
tx.executeSql("Select * From CVW Where CallNumber=?", [call], function (tx, result) {
                        var i = 0;
                        $.each(result.rows, function () {
                            qAndA[i] = result.rows.item(i);
                            i++;
                        });
$.ajax({
                            type: "POST",
                            dataType: "json",
                            contentType: "application/json",
                            url: "Service.asmx/CVW",
                            data: JSON.stringify({ qAndA: qAndA }),
                            success: function (data) {
                            },
                            error: function (xhr, status, error) {
                                var err = eval("(" + xhr.responseText + ")");
                                alert(err.Message);
                            }
                        });
                    }, onSQLError); 
```

这给了我`No parameterless constructor defined for type System.String`. 我尝试将 web 方法参数更改为 string[] 和 List 和相同的东西。

当我查看 Fire Bug 中发送的内容时，我发现它发送的数量与 Sqlite 查询中返回的行`Object[object Object][object Object][object Object]...`数一样多。`[object Object]`C# 中可以用作参数类型的对应类型是什么？

编辑：最终解决方案

在javascript中我不得不改变

```
data: JSON.stringify({ qAndA: qAndA }), 
```

至

```
var json = JSON.stringify(qAndA);
data: JSON.stringify({ qAndA: json }); 
```

并因此改变了Web方法

```
 [WebMethod]
    public void CVW(string qAndA)

JavaScriptSerializer ser = new JavaScriptSerializer();
List<CVWQuestion> list = ser.Deserialize<List<CVWQuestion>>(qAndA);

[Serializable]
public class CVWQuestion
{
    public string CallNumber {get;set;}
    public string Question { get; set; }
    public string P1 { get; set; }
    public string P2 { get; set; }
    public string P3 { get; set; }
    public string P4 { get; set; }
    public string P5 { get; set; }
    public string P6 { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:03:19.330

请参阅我编辑的帖子，了解最终对我有用的代码。在很大程度上找到了@SteveB，但从未作为答案提交，所以我无法接受。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T14:36:00.733

将 String[][] 参数更改为一个字符串。发送的数据只是一个字符串。您需要将其从字符串化的 JSON 对象转换为您可以解析的对象。查看[JObject](http://james.newtonking.com/projects/json/help/)。

从您的字符串化 JSON 转换看起来像......

`JObject.parse(myJSONString)`

我会将网络服务更改为类似

`public void CVW(string qAndAStringJson){`

 ````
 Object qAndAObj = JObject.parse(qAndAStringJson);
   string someVar = qAndAObj["someStringIndex"]; 
```` 

`}`

[在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)查看有关 Stringify 的文档。您对 Stringify 的调用是将数据更改为表示 JSON 对象的字符串。

我从链接中获取了这个。

`JSON.stringify({x: 5, y: 6}); // '{"x":5,"y":6}' or '{"y":6,"x":5}'`

请注意，它只是一个长字符串。

因此，如果您`JObject.parse()`在 Web 服务方法中调用 '{"x":5,"y":6}'，您可以进行如下调用

`string obj = JOBject.Parse('{"x":5,"y":6}');`

`string result = obj["x"]; //result = 5`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T14:56:58.487

您可以按以下格式传递二维数组

```
{
    "values[0][0]": "Some value",
    "values[1][0]": "Some value",
    "values[0][1]": "Some value",
    "values[1][2]": "Some value",
    "values[2][0]": "Some value",
    "values[0][2]": "Some value",
    "values[2][3]": "Some value",
    ...
} 
```

或者，如前所述，使用[JSON.stringify](http://msdn.microsoft.com/en-us/library/ie/cc836459%28v=vs.94%29.aspx)。

另外，请查看这篇文章[Parse JSON in C#](https://stackoverflow.com/q/1212344/786796)，它可能对您有所帮助。

# android - Mkmapview如何为多个地方设置方向？

> ID：13475375
> 
> 赞同：1
> 
> 时间：2012-11-20T14:31:17.577
> 
> 标签：android, android-mapview

我有这个应用程序，上面有很多屏幕，我有 9 个不同的屏幕，每个屏幕都有地图按钮，所以我导入了地图工具包框架和核心位置框架，然后我创建了一个带有 mkmapview 的视图控制器，然后链接了所有 9 个屏幕到它，当我模拟它实际工作时，但我现在需要做的是我想设置 9 个不同的位置，但我不知道如何做到这一点。我必须为每个屏幕创建多个地图视图吗？还是我必须改用 webview？

# memory - 在 Graphite 中捕获/监控应用服务器的系统数据

> ID：13475377
> 
> 赞同：0
> 
> 时间：2012-11-20T14:31:25.953
> 
> 标签：memory, monitor, metrics, graphite, statsd

我正在使用石墨服务器来捕获我的指标数据并生成图表。我有 4 个应用程序服务器，它们是负载平衡器设置。我的目标是捕获所有 4 个应用程序服务器的系统数据，例如 cpu 使用情况、内存使用情况、磁盘负载等。我在单独的服务器中设置了一个石墨环境，我想将所有应用程序服务器的系统数据推送到石墨并让它显示为图形。我不知道将系统数据提供给石墨需要做什么。我的想法是在所有应用程序服务器中安装 statsd 并将系统数据提供给石墨，但看起来 statsd 不支持系统数据而不是应用程序数据。

谁能帮我找到正确的轨道。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:17:41.067

使用[石墨代理](https://github.com/indygreg/collectd-carbon)运行[collectd](http://collectd.org)将是收集您之后的信息的绝佳开始。

几乎有无数种方法可以将您的数据放入石墨中。

您可以在 readthedocs.org 页面上找到已知可以很好地与石墨一起工作的工具列表：http: [//graphite.readthedocs.org/en/0.9.10/tools.html](http://graphite.readthedocs.org/en/0.9.10/tools.html)

在 carbon 项目中还有一个从系统收集平均负载的示例脚本：[example-client.py](https://github.com/graphite-project/carbon/blob/master/examples/example-client.py)

# apache - Apache 大小写敏感 URL

> ID：13475379
> 
> 赞同：1
> 
> 时间：2012-11-20T14:31:40.257
> 
> 标签：apache, url, case-sensitive

Apache 不允许我访问包含错误案例的链接。这个 URL 区分大小写真的很糟糕。任何人都可以帮助我如何配置我的 apache，以便我调用我的 URL 它必须工作。

我在共享的 linux 服务器上运行我的站点，并且没有提供 SSH。我尝试了谷歌中的所有解决方案，但对我没有任何帮助。任何人请帮助我。请不要告诉我进入某某选项（因为我的 cPanel 中提供的服务有限，请在下面的屏幕截图中找到它们）。

![在此处输入图像描述](../Images/07645873d8b3cb45ea3e0092e3e7bef8.png)

# php - 如何将数组对象移动到位置 0

> ID：13475382
> 
> 赞同：1
> 
> 时间：2012-11-20T14:31:50.230
> 
> 标签：php, arrays, sorting

我目前正在使用一个数组，我需要知道如何将该数组中的一个对象移动到第一个位置，位置 [0]。

我有这个

```
<?php    
$extensions = array(
        '.com'      => array('whois.verisign-grs.com','No match for'),
        '.info'     => array('whois.afilias.net','NOT FOUND'),  
        '.net'      => array('whois.crsnic.net','No match for'),
        '.co.uk'    => array('whois.nic.uk','No match'),        
        '.nl'       => array('whois.domain-registry.nl','is free'),
    );
?> 
```

现在，当用户从下拉列表中选择域时，我希望所选 TLD 成为该数组中的第一个。

例如。

用户选择 .net 域，数组将是：

```
$extensions = array(
        '.net'      => array('whois.crsnic.net','No match for'),
        '.com'      => array('whois.verisign-grs.com','No match for'),
        '.info'     => array('whois.afilias.net','NOT FOUND'),  
        '.co.uk'    => array('whois.nic.uk','No match'),        
        '.nl'       => array('whois.domain-registry.nl','is free'),
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:34:24.210

将嵌套数组合并到更大的数组中：

```
$ext = array(
    '.com'   => array('whois.verisign-grs.com','No match for'),
    '.info'  => array('whois.afilias.net','NOT FOUND'),  
    '.net'   => array('whois.crsnic.net','No match for'),
    '.co.uk' => array('whois.nic.uk','No match'),        
    '.nl'    => array('whois.domain-registry.nl','is free'),
);

$ext = array_merge( Array( ".net" => $ext[".net"] ), $ext ); 
```

演示：[http ://codepad.org/Mi2S9xTg](http://codepad.org/Mi2S9xTg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:38:18.357

删除它然后重新添加

```
$v = $extensions['.net'];
unset($extensions['.net']);
$extensions['.net'] = $v; 
```

# android - 在我的 Profile Activity 上加载图像并将其显示在我的 ImageView 上

> ID：13475383
> 
> 赞同：0
> 
> 时间：2012-11-20T14:31:53.207
> 
> 标签：android, android-layout

我有我正在制作的这个社交购物应用程序，它要求用户注册并上传个人资料图片和其他所需的信息，然后我试图在我的 android 项目中显示静态图像，但现在因为我即将上线。

我的问题是如何让用户上传图片并检索上传的图片以设置为用户的个人资料图片

# c# - RoutedEvent 隧道未到达子级

> ID：13475384
> 
> 赞同：5
> 
> 时间：2012-11-20T14:31:54.180
> 
> 标签：c#, wpf, routed-events

我发现了很多解释冒泡的例子，但没有关于隧道的，这是关于隧道的，例如父母对孩子。我认为我的主要问题是我不明白如何在孩子中注册路由事件（WindowControl 到 UserControl）。我有：

```
public partial class MyParent : UserControl
{
  public static readonly RoutedEvent RoutedMouseUpEvent = EventManager.RegisterRoutedEvent(
        "PreviewMouseLeftButtonUp", RoutingStrategy.Tunnel, typeof(RoutedEventHandler),   typeof(WindowControl)); 

// Provide CLR accessors for the event        
public event RoutedEventHandler MouseUp
{
  add { AddHandler(RoutedMouseUpEvent, value); }
  remove { RemoveHandler(RoutedMouseUpEvent, value); }
}

public addView(UserControl view)
{
WindowControl win = new WindowControl();
win.Content = view;
}

private void Grid_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
  RoutedEventArgs newEventArgs = new RoutedEventArgs(MyParent.RoutedMouseUpEvent);
            RaiseEvent(newEventArgs);
}
} 
```

addView的封装是必须的，应该没问题吧？孩子是通过 addView 添加的。调用 Grid_MouseLeftButtonUp。
接收器看起来像这样（它是 mvvm 所以没有太多）：

```
public partial class ChildView : UserControl
{
 void UserControl_PreviewMouseLeftButtonUp(object sender, RoutedEventArgs args)
 {
    int i = 0; // The breakpoint is never called
 }
} 
```

在xml中

```
<Grid>
   <Border BorderBrush="black" BorderThickness="1" HorizontalAlignment="Center"   VerticalAlignment="Center" PreviewMouseLeftButtonUp="UserControl_PreviewMouseLeftButtonUp">
</Border>
</Grid> 
```

如果我忘记了什么，请告诉我。问题是，路由事件没有到达 UserControl_PreviewMouseLeftButtonUp

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T14:37:44.427

这不是隧道路由策略的工作方式。隧道意味着事件将从根开始并沿着树路径向下到达调用控件。例如，如果我们有以下可视化树

```
Window
|
|--> SomeUserControl
|--> MyParent
     |
     |--> ChildView 
```

那么如果`MyParent`会引发隧道事件，隧道事件将访问：

1.  窗户
2.  我的父母

而**不是**

1.  我的父母
2.  子视图

总而言之，冒泡事件将始终从引发事件的控件开始并在可视化树的根部停止，而隧道事件将从可视化树的根部开始并在引发事件的控件结束（完全相同的路径，只能倒序）。

**编辑：您可以在**[MSDN 的 Routed Events Overview](http://msdn.microsoft.com/en-us/library/ms742806.aspx)中阅读有关路由事件的更多信息。它还有一个很好的图像来证明这一点：

![在此处输入图像描述](../Images/30aa6e3a57b1802456ef183da8d47fec.png)

# objective-c - 正确使用 CIDetectorTracking

> ID：13475387
> 
> 赞同：16
> 
> 时间：2012-11-20T14:31:57.777
> 
> 标签：objective-c, ios, face-detection

Apple 最近在`CIDetector`名为的类中添加了一个新常量，`CIDetectorTracking`它似乎能够在视频中的帧之间跟踪人脸。如果我能设法弄清楚它是如何工作的，这对我来说将是非常有益的..

我已经尝试使用我能想到的远程相关的每个对象将这个键添加到检测器选项字典中，包括我的 AVCaptureStillImageOutput 实例、我正在处理的 UIImage、YES、1 等。

```
NSDictionary *detectorOptions = [[NSDictionary alloc] initWithObjectsAndKeys:CIDetectorAccuracyHigh, CIDetectorAccuracy,myAVCaptureStillImageOutput,CIDetectorTracking, nil]; 
```

但无论我尝试传递什么参数，它要么崩溃（显然我在这里猜测）要么调试器输出：

> 指定了未知的 CIDetectorTracking。无视。

通常情况下，我不会猜到这一点，但是关于这个主题的资源几乎不存在。[苹果的类参考](http://developer.apple.com/library/mac/#documentation/CoreImage/Reference/CIDetector_Ref/Reference/Reference.html)状态：

> 用于启用或禁用检测器的面部跟踪的键。当您想要跨视频帧跟踪人脸时，请使用此选项。

除了可用性是 iOS 6+ 和 OS X 10.8+ 就是这样。

里面的评论`CIDetector.h`：

> /*选项字典中用于指定应使用特征跟踪的键。*/

如果这还不够糟糕，[Google](https://www.google.com/#hl=en&safe=off&tbo=d&output=search&sclient=psy-ab&q=CIDetectorTracking&oq=ci&gs_l=hp.3.0.35i39l2j0l2.112.289.0.1581.2.2.0.0.0.0.112.187.1j1.2.0.les;..0.0...1c.1.7vOQUaQf5sM&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=446947c761dc2ab3&bpcl=38625945&biw=1440&bih=688)搜索会提供 7 个结果（当他们找到这篇文章时为 8 个），所有这些结果要么是 Apple 类引用、API 差异、一个询问如何在 iOS 5 中实现这一点的 SO 帖子，要么是第 3 方副本前者的。

话虽如此，任何正确使用的提示或技巧`CIDetectorTracking`将不胜感激！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-24T21:41:20.597

你是对的，这个密钥没有很好的记录。除了 API 文档之外，它也*没有*在以下内容中解释：

*   CIDetector.h 头文件
*   核心图像编程指南
*   WWDC 2012 会议[*“520 - 相机捕捉的新功能”*](http://developer.apple.com/itunes/?destination=adc.apple.com.16351526909)
*   本次会议的示例代码 ( *StacheCam 2* )

我尝试了不同的值，`CIDetectorTracking`唯一接受的值似乎是`@(YES)`and `@(NO)`。使用其他值，它会在控制台中打印此消息：

> 指定了未知的 CIDetectorTracking。无视。

当您将值设置为时，`@(YES)`您应该使用检测到的面部特征获取跟踪 ID。

* * *

但是，当您想要检测从相机捕获的内容中的人脸时，您应该更喜欢 AVFoundation 中的人脸检测 API。它内置人脸跟踪，人脸检测在 GPU 的后台进行，比 CoreImage 人脸检测要快得多。它需要 iOS 6 和至少 iPhone 4S 或 iPad 2。

人脸作为元数据对象 ( `AVMetadataFaceObject`) 发送到`AVCaptureMetadataOutputObjectsDelegate`.

您可以使用此代码（取自*StacheCam 2*和上面提到的 WWDC 会话的幻灯片）来设置人脸检测并获取人脸元数据对象：

```
- (void) setupAVFoundationFaceDetection
{       
    self.metadataOutput = [AVCaptureMetadataOutput new];
    if ( ! [self.session canAddOutput:self.metadataOutput] ) {
        return;
    }

    // Metadata processing will be fast, and mostly updating UI which should be done on the main thread
    // So just use the main dispatch queue instead of creating a separate one
    // (compare this to the expensive CoreImage face detection, done on a separate queue)
    [self.metadataOutput setMetadataObjectsDelegate:self queue:dispatch_get_main_queue()];
    [self.session addOutput:self.metadataOutput];

    if ( ! [self.metadataOutput.availableMetadataObjectTypes containsObject:AVMetadataObjectTypeFace] ) {
        // face detection isn't supported (via AV Foundation), fall back to CoreImage
        return;
    }

    // We only want faces, if we don't set this we would detect everything available
    // (some objects may be expensive to detect, so best form is to select only what you need)
    self.metadataOutput.metadataObjectTypes = @[ AVMetadataObjectTypeFace ];

}

// AVCaptureMetadataOutputObjectsDelegate
- (void)captureOutput:(AVCaptureOutput *)captureOutput
         didOutputMetadataObjects:(NSArray *)metadataObjects
         fromConnection:(AVCaptureConnection *)c
{
   for ( AVMetadataObject *object in metadataObjects ) {
     if ( [[object type] isEqual:AVMetadataObjectTypeFace] ) {
      AVMetadataFaceObject* face = (AVMetadataFaceObject*)object;
      CMTime timestamp = [face time];
      CGRect faceRectangle = [face bounds];
      NSInteger faceID = [face faceID];
      CGFloat rollAngle = [face rollAngle];
      CGFloat yawAngle = [face yawAngle];
      NSNumber* faceID = @(face.faceID); // use this id for tracking
      // Do interesting things with this face
     }
} 
```

如果要在预览层中显示人脸框，则需要获取转换后的人脸对象：

```
AVMetadataFaceObject * adjusted = (AVMetadataFaceObject*)[self.previewLayer transformedMetadataObjectForMetadataObject:face]; 
```

有关详细信息，请查看[WWDC 2012 中的示例代码](https://developer.apple.com/devcenter/download.action?path=/wwdc_2012/wwdc_2012_sample_code/wwdc_2012_session_code.dmg)。

# java - 生成用空格填充的固定长度字符串

> ID：13475388
> 
> 赞同：116
> 
> 时间：2012-11-20T14:32:02.913
> 
> 标签：java, string, formatting

我需要生成固定长度的字符串来生成基于字符位置的文件。缺少的字符必须用空格字符填充。

例如，字段 CITY 具有 15 个字符的固定长度。对于输入“芝加哥”和“里约热内卢”，输出是

```
“ 芝加哥”
“ 里约热内卢”
```

.

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-11-20T14:32:02.913

从 Java 1.5 开始，我们可以使用方法[java.lang.String.format(String, Object...)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.util.Locale,%20java.lang.String,%20java.lang.Object...%29)并使用类似 printf 的格式。

格式字符串`"%1$15s"`完成这项工作。where`1$`表示参数索引，`s`表示参数是String，`15`表示String的最小宽度。把它们放在一起：`"%1$15s"`。

对于一般方法，我们有：

```
public static String fixedLengthString(String string, int length) {
    return String.format("%1$"+length+ "s", string);
} 
```

也许有人可以建议另一种格式字符串来用特定字符填充空格？

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2014-11-07T00:18:46.727

使用`String.format`'s padding 和空格并将它们替换为所需的字符。

```
String toPad = "Apple";
String padded = String.format("%8s", toPad).replace(' ', '0');
System.out.println(padded); 
```

打印`000Apple`。

* * *

**更新**更高性能的版本（因为它不依赖`String.format`），空格没有问题（感谢 Rafael Borja 的提示）。

```
int width = 10;
char fill = '0';

String toPad = "New York";
String padded = new String(new char[width - toPad.length()]).replace('\0', fill) + toPad;
System.out.println(padded); 
```

打印`00New York`。

但是需要添加检查以防止尝试创建负长度的 char 数组。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-06-29T21:21:22.917

该代码将具有给定数量的字符；填充空格或在右侧截断：

```
private String leftpad(String text, int length) {
    return String.format("%" + length + "." + length + "s", text);
}

private String rightpad(String text, int length) {
    return String.format("%-" + length + "." + length + "s", text);
} 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-08-17T07:42:18.133

对于正确的垫，你需要`String.format("%0$-15s", str)`

即`-`标志将“右”垫，没有`-`标志将“左”垫

看我的例子：

```
import java.util.Scanner;

public class Solution {

    public static void main(String[] args) {
            Scanner sc=new Scanner(System.in);
            System.out.println("================================");
            for(int i=0;i<3;i++)
            {
                String s1=sc.nextLine();

                Scanner line = new Scanner( s1);
                line=line.useDelimiter(" ");

                String language = line.next();
                int mark = line.nextInt();;

                System.out.printf("%s%03d\n",String.format("%0$-15s", language),mark);

            }
            System.out.println("================================");

    }
} 
```

输入必须是字符串和数字

示例输入：谷歌 1

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2020-01-01T12:09:42.823

```
String.format("%15s",s) // pads left
String.format("%-15s",s) // pads right 
```

很棒的总结[在这里](https://www.journaldev.com/17850/java-string-format#java-string-format-example)

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-01-23T20:09:04.007

```
import org.apache.commons.lang3.StringUtils;

String stringToPad = "10";
int maxPadLength = 10;
String paddingCharacter = " ";

StringUtils.leftPad(stringToPad, maxPadLength, paddingCharacter) 
```

比番石榴好得多。从未见过使用 Guava 的单个企业 Java 项目，但 Apache String Utils 非常普遍。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2013-03-21T18:09:41.360

您还可以编写一个简单的方法，如下所示

```
public static String padString(String str, int leng) {
        for (int i = str.length(); i <= leng; i++)
            str += " ";
        return str;
    } 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2012-11-20T17:16:37.170

[Guava 库](https://github.com/google/guava/wiki)有Strings.padStart[可以](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/Strings.html#padStart-java.lang.String-int-char-)完全满足您的需求，以及许多其他有用的实用程序。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2012-11-20T16:41:08.220

这是一个巧妙的技巧：

```
// E.g pad("sss","00000000"); should deliver "00000sss".
public static String pad(String string, String pad) {
  /*
   * Add the pad to the left of string then take as many characters from the right 
   * that is the same length as the pad.
   * This would normally mean starting my substring at 
   * pad.length() + string.length() - pad.length() but obviously the pad.length()'s 
   * cancel.
   *
   * 00000000sss
   *    ^ ----- Cut before this character - pos = 8 + 3 - 8 = 3
   */
  return (pad + string).substring(string.length());
}

public static void main(String[] args) throws InterruptedException {
  try {
    System.out.println("Pad 'Hello' with '          ' produces: '"+pad("Hello","          ")+"'");
    // Prints: Pad 'Hello' with '          ' produces: '     Hello'
  } catch (Exception e) {
    e.printStackTrace();
  }
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-03-05T12:52:41.233

这是带有测试用例的代码；）：

```
@Test
public void testNullStringShouldReturnStringWithSpaces() throws Exception {
    String fixedString = writeAtFixedLength(null, 5);
    assertEquals(fixedString, "     ");
}

@Test
public void testEmptyStringReturnStringWithSpaces() throws Exception {
    String fixedString = writeAtFixedLength("", 5);
    assertEquals(fixedString, "     ");
}

@Test
public void testShortString_ReturnSameStringPlusSpaces() throws Exception {
    String fixedString = writeAtFixedLength("aa", 5);
    assertEquals(fixedString, "aa   ");
}

@Test
public void testLongStringShouldBeCut() throws Exception {
    String fixedString = writeAtFixedLength("aaaaaaaaaa", 5);
    assertEquals(fixedString, "aaaaa");
}

private String writeAtFixedLength(String pString, int lenght) {
    if (pString != null && !pString.isEmpty()){
        return getStringAtFixedLength(pString, lenght);
    }else{
        return completeWithWhiteSpaces("", lenght);
    }
}

private String getStringAtFixedLength(String pString, int lenght) {
    if(lenght < pString.length()){
        return pString.substring(0, lenght);
    }else{
        return completeWithWhiteSpaces(pString, lenght - pString.length());
    }
}

private String completeWithWhiteSpaces(String pString, int lenght) {
    for (int i=0; i<lenght; i++)
        pString += " ";
    return pString;
} 
```

我喜欢 TDD ;)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-09-24T04:27:59.900

# 存在 Apache common lang3 依赖的 StringUtils 来解决 Left/Right Padding

**Apache.common.lang3**提供了一个`StringUtils`类，您可以在其中使用以下方法使用您的首选字符左填充。

```
StringUtils.leftPad(final String str, final int size, final char padChar); 
```

这里，这是一个静态方法和参数

1.  str - 字符串需要填充（可以为空）
2.  size - 要填充的大小
3.  padChar 要填充的字符

我们在该 StringUtils 类中还有其他方法。

1.  右垫
2.  重复
3.  不同的连接方法

我只是在此处添加 Gradle 依赖项供您参考。

```
 implementation 'org.apache.commons:commons-lang3:3.12.0' 
```

[https://mvnrepository.com/artifact/org.apache.commons/commons-lang3/3.12.0](https://mvnrepository.com/artifact/org.apache.commons/commons-lang3/3.12.0)

请查看此类的所有 utils 方法。

[https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html)

# GUAVA 库依赖

这是来自 jricher 的答案。Guava 库有 Strings.padStart 可以完全满足您的需求，以及许多其他有用的实用程序。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-10-09T07:46:25.470

这段代码很好用。[![预期产出](../Images/ed50220dc9e0433797e0a3b43ea1fd6f.png)](https://i.stack.imgur.com/u9lmy.png)

```
 String ItemNameSpacing = new String(new char[10 - masterPojos.get(i).getName().length()]).replace('\0', ' ');
  printData +=  masterPojos.get(i).getName()+ "" + ItemNameSpacing + ":   " + masterPojos.get(i).getItemQty() +" "+ masterPojos.get(i).getItemMeasure() + "\n"; 
```

编码快乐！！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-03-14T11:03:17.763

```
public class Solution {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        for (int i = 0; i < 3; i++) {
            int s;
            String s1 = sc.next();
            int x = sc.nextInt();
            System.out.printf("%-15s%03d\n", s1, x);
            // %-15s -->pads right,%15s-->pads left
        }
    }
} 
```

用于`printf()`在不使用任何库的情况下简单地格式化输出。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-12-15T23:09:02.470

```
public static String padString(String word, int length) {
    String newWord = word;
    for(int count = word.length(); count < length; count++) {
        newWord = " " + newWord;
    }
    return newWord;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-01-25T13:50:12.167

这个简单的功能对我有用：

```
public static String leftPad(String string, int length, String pad) {
      return pad.repeat(length - string.length()) + string;
    } 
```

调用：

```
String s = leftPad(myString, 10, "0"); 
```

# java - 使用 Maven 从一个项目生成多个 War

> ID：13475389
> 
> 赞同：2
> 
> 时间：2012-11-20T14:32:02.800
> 
> 标签：java, maven

我开发了一个与 3 个不同的应用程序（A、B 和 C）结合使用的 WebApp（我称之为 W）。

W 需要不同的依赖关系，具体取决于它与哪个应用程序结合使用（例如不同版本的 Oracle Coherence）。

目前，我使用 3 个具有完全相同代码（来自 W 的代码）的 maven 项目，具有不同的配置文件和不同的依赖项。

我希望能够生成我的 3 场战争，而无需在 3 个不同的项目中使用 3 次相同的代码（来自 W 的代码）。

有可能吗？maven可以吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:38:39.980

如果这些项目有任何共同点，那么拥有 4 个战争项目是最有意义的：

*   一个用于公共部分，包含所有公共类和资源
*   每个偏差一个

然后您可以使用[WAR Overlays](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)将公共部分嵌入到每个项目中。

恕我直言，这比尝试使用配置文件或其他技巧将所有依赖项放入一个 pom 更好。

顺便说一句[，这个问题](https://stackoverflow.com/questions/13193385/building-different-maven-artifacts-for-different-containers)与您的问题非常相似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:38:48.900

为什么不创建一个库项目并将其设置为您的 Web 应用程序的依赖项？

所以你只有一个代码库（在库中），配置在 3 个战争项目中。

# c# - 我如何使用事务操作 DB 和 File IO？

> ID：13475392
> 
> 赞同：1
> 
> 时间：2012-11-20T14:32:04.860
> 
> 标签：c#, file, transactions, io, transactionscope

**前言**

我有一个包含用户信息的表，其中一个字段是*AvatarUrl*，它由用户上传的头像 url 组成。

![用户表](../Images/18ca5fcce6f07e0be95eab9e2185da31.png)

我需要事务以跟踪数据库和文件 IO 中的更改。例如，当您删除用户记录时，AvatarUrl 位于要删除的用户对面。因此我使用事务。是否存在任何命令来跟踪数据库和文件 IO 中的更改。我的开发环境是 C#.net，我的数据库是 SQL Server 2008。

# windows-phone-8 - Windows Phone 8 服务器连接

> ID：13475397
> 
> 赞同：-2
> 
> 时间：2012-11-20T14:32:16.427
> 
> 标签：windows-phone-8

我想制作一个“hello world”应用程序，借此我可以向服务器或 WCF 服务发送一些数据/发出请求。一个简单的查询、保存、删除等应用程序。我的目标是将此学习应用程序放在 Windows Phone 8 平台上。

我过去在 WCF 和 RavenDB 中做过一些工作，但不知道在这种情况下该怎么做。

有人可以给我一些关于如何实现这一目标的提示/教程吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-24T16:26:30.967

我使用 WCF 创建了一个服务。该服务包含一个接口，这些接口是公开的操作，它们在不同的文件中实现。然后，我创建了一个 Windows Phone 应用程序，并通过提供服务的 URL 添加了服务参考。查询服务的代码很简单：

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        ServiceReference1.Service1Client myClient = new Service1Client();
        myClient.AddNumbersCompleted += new EventHandler<AddNumbersCompletedEventArgs>(myClient_AddNumbersCompleted);
        myClient.AddNumbersAsync(textBox1.Text, textBox2.Text);

    }

    void myClient_AddNumbersCompleted(object sender, AddNumbersCompletedEventArgs e)
    {
        textBlock1.Text = "Answer:" + e.Result.ToString();
    } 
```

# python - Python 拼图游戏

> ID：13475409
> 
> 赞同：1
> 
> 时间：2012-11-20T14:32:44.063
> 
> 标签：python, boggle

我正在尝试为学校完成这个 boggle 游戏 Python 挑战，我创建了一个绘图板函数，该函数创建一个包含 16 个随机字母的板。如何使用 def 函数要求用户输入一个单词，然后根据单词的长度对其进行评分？完成后，游戏应该可以正常运行。任何帮助将不胜感激 ：）

```
import random

def loadwords ():
    print "Loading word list from file.. "
    wordList = []
    inFile = open ('words.txt','r')
    for line in inFile:
        wordList.append(line.strip().lower())
    #inFile : locates file in the folder, opens it
    #wordlist: list of the words (strings)
    print " " , len(wordList), "words loaded"
    inFile.close()
    return wordList

def spellCheck (word, wordList):
    if (word in wordList) == True:
        return True
    else:
        return False

def drawBoard (randomLetters):

    '''Takes a randomList of 16 characters
    Prints out a 4 x 4 grid'''

    print " %s %s %s %s " %(randomLetters [0], randomLetters [1], randomLetters [2], randomLetters [3])
    print " %s %s %s %s " %(randomLetters [4], randomLetters [5], randomLetters [6], randomLetters [7])
    print " %s %s %s %s " %(randomLetters [8], randomLetters [9], randomLetters [10], randomLetters [11])
    print " %s %s %s %s " %(randomLetters [12], randomLetters [13], randomLetters [14], randomLetters [15])

def wordinput ():
    #asks user to input the longest word they can from grid
    wordinput = raw_input ("Enter a word made up of the letters in the 4x4 table")
    for letters in wordinput:
        letters == randomLetters

def randomLetters ():
    letters = []
    alphabet = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','v','w','x','y','z']
    for i in range (0,16,1):
        letters.append(random.choice(alphabet))
    return letters

dictionary = loadwords()
letterList = randomLetters()
drawBoard(letterList)
wordinput(randomLetters) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:50:07.553

`raw_input`（在 Python 2 中）或`input`（在 Python 3 中）允许读取字符串。

然后你需要检查所有字母是否都包含在字母表中......

```
def wordInLetter(word, letters):
    for i in range(word):
        if word[i] not in letters:
             return False
    return True 
```

或更短：

```
def wordInLetter(word, letters):
    return all(letter in letters for letter in word) 
```

但是等等，你不想让一个字母多次使用成为可能！

让我们使用`Counter`来跟踪每个字母在信袋中出现的次数并以此为基础进行计算：

```
from collections import Counter
def wordInLetter(word, letters):
    available = Counter(letters)
    for letter in word:
        if available[letter] == 0:
             return False
        available[letter] -= 1
    return True 
```

这似乎工作得很好。我希望这是你需要的。

```
In [3]: wordInLetter('kos','akos')
Out[3]: True

In [4]: wordInLetter('kos','ako')
Out[4]: False

In [5]: wordInLetter('koss','akos')
Out[5]: False 
```

* * *

编辑

所以我们不仅关心是否`word`可以组合 in `letters`，还想知道是否可以通过匹配相邻的字母来完成。所以再试一次：

```
import math
def wordInLetterSearch(word, letters, startX, startY):
    # Assume: letters is a list of X letters, where X is a k*k square
    k = int(len(letters) ** 0.5)

    if len(word) == 0:
        return True

    def letter(x, y):
        return letters[x + y*k]

    def adjacent(x, y):
        if x > 0:
           yield x-1, y
        if x < k-1:
           yield x+1, y
        if y > 0:
           yield x, y-1
        if y < k-1:
           yield x, y+1

    # try to move in all 4 directions
    return any(letter(x2, y2) == word[0] and wordInLetterSearch(word[1:], letters, x2, y2)
               for x2, y2 in adjacent(startX, startY))

def wordInLetter(word, letters):
    k = int(len(letters) ** 0.5)

    def coords(i):
        return i%k, i/k

    # look for a starting point
    return any(letter == word[0]
                    and wordInLetterSearch(word[1:], letters,
                                           coords(i)[0], coords(i)[1])
               for i, letter in enumerate(letters)) coords(i)[1])
                   for i, letter in enumerate(letters)) 
```

这有点复杂。基本上这是一个两步搜索：首先我们寻找一个起点（`letters`字母与单词的第一个字符匹配的位置），然后我们尽可能递归地将蛇形移动到相邻的字段。

只需少量修改即可完全匹配 Boggle 规则：

*   修改`adjacent`以允许对角线（简单），
*   防止两次访问同一地点（中等；提示：向 中添加参数`wordInLetterSearch`，使用 a `set`）。

我会把这些留作练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:01:44.677

这是另一个变体。它应该更容易阅读，但想法是一样的：简单[回溯](http://en.wikipedia.org/wiki/Backtracking)。有时，更容易在调用方中止迭代（不执行下一步），有时在被调用方（在每次迭代中，检查前置条件并在无效时中止）。

```
def wordInBoardIter(letters, word, x, y):
    n = int(len(letters)**0.5)
    if word == "": return True # empty - all letters are found
    if x<0 or y<0 or x>=n or y>= n: return False #outside of board
    if letters[x+y*n] != word[0]: return False # we are looking at the wrong position
    # one step further:
    return any(wordInBoardIter(letters, word[1:], x+dx,y+dy) for dx,dy in [(1,0), (0,1), (-1,0), (0,-1)])

def wordInBoard(letters, word):
    n = int(len(letters)**0.5)
    return any(any(wordInBoardIter(letters, word, x,y) for x in range(n)) for y in range(n))

if __name__ == '__main__':
    letters = ['a', 'h', 'e', 'l',
               'x', 'd', 'l', 'l',
               'y', 'v', 'r', 'o',
               'z', 'w', 'o', 'w']
    print "hello     : %s" % ("found" if wordInBoard(letters, "hello") else "not found")
    print "helloworld: %s" % ("found" if wordInBoard(letters, "helloworld") else "not found")
    print "foobar    : %s" % ("found" if wordInBoard(letters, "foobar") else "not found") 
```

在这个版本中有相同的*练习*（对角线瓷砖和不允许重复使用相同的字母两次）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:49:33.150

我没有玩太多 myslef，但是您可以用来执行此操作的解决方案是获取用户输入的单词并使用`len()`命令返回单词的长度。然后取那个长度并得分。这是一个基本示例（修改它以适应游戏规则）：

```
def wordinput ():
    #asks user to input the longest word they can from grid
    wordinput = raw_input ("Enter a word made up of the letters in the 4x4 table")
    for letters in wordinput:
        letters == randomLetters
    scoreWord(wordInput)

def scoreWord(word)
    #finds the amount of characters in the word
    wordLength = len(word)
    #multiplies the maunt of letters in the word by two to get the score
    #(not sure how boggle scoring works)
    score = wordLength * 2 
```

# ruby-on-rails - 验证一批更新

> ID：13475410
> 
> 赞同：4
> 
> 时间：2012-11-20T14:32:45.700
> 
> 标签：ruby-on-rails, validation

在 Rails 应用程序中，是否可以一次进行一批更改，仅验证更改的最终结果而不是每个单独的步骤？

这是一个有点模糊的问题，所以让我们把它具体化。假设我有一个杂货店应用程序：

```
class Store < ActiveRecord::Base
  has_many :fruits
end

class Fruit < ActiveRecord::Base
  belongs_to :store
  attr_accessible :kind, :number, :price
  validates_uniqueness_of :kind, :scope => :store_id
end 
```

我已经使用以下数据为数据库播种：

```
fruits:
 store_id |    kind    | number | price
----------------------------------------
        1 | apple      |     10 | 0.15
        1 | banana     |     80 | 0.02
        1 | cherry     |     25 | 0.50 
```

但我意识到我搞砸了，交换了香蕉和樱桃的数量和价格。我不能这样做：

```
store = Store.find(1)
old_bananas = store.fruits.where("kind = banana").first
old_cherries = store.fruits.where("kind = cherry").first
old_bananas.kind = "cherry"
old_cherries.kind = "banana"
old_bananas.save! # => Validation Error
old_cherries.save! 
```

因为保存第一行时违反了唯一性约束，即使保存第二行后也可以。是否可以将两个保存一起批处理，并让验证只看到一次进行所有更改的结果？

（我可以想到变通方法——例如，如果我进行了验证`:allow_nil`，那么在更改其中任何一行之前将每一行都归零——但我想知道是否存在“正确”的解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:59:12.890

如果您的约束只是验证，但您在数据库中没有强制执行该唯一索引，请使用该[`update_attribute`](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_attribute)方法 - 它会跳过验证。

```
store.fruits.where("kind = banana").first.update_attribute(:kind, "cherry")
store.fruits.where("kind = cherry").first.update_attribute(:kind, "banana") 
```

或者干脆使用`save(validate: false)`代替`save!`.

编辑：因为你有一个唯一的索引，死简单的解决方案是使用一个临时值：

```
store.fruits.where("kind = banana").first.update_attribute(:kind, "foo")
store.fruits.where("kind = cherry").first.update_attribute(:kind, "banana")
store.fruits.where("kind = foo"   ).first.update_attribute(:kind, "cherry") 
```

我不知道有一种方法可以在 SQL 中就地交换行之间的值，这确实是这里的问题，因为模型级验证很容易被绕过。

# php - 在mysql中通过php从android存储以base64编码的图像

> ID：13475411
> 
> 赞同：4
> 
> 时间：2012-11-20T14:32:42.853
> 
> 标签：php, android, mysql, encoding, base64

我一直在尝试将图像存储在 mysql 数据库中，方法是将它们编码为 base64 字符串，然后将它们传递给 php 脚本，该脚本又将这个字符串存储在 blob（我也尝试过文本）文件中。发生的情况是字符串按原样发送到 php 脚本，但是当存储在数据库中时，它被存储为完全不同的字符串。

这是我的做法：

```
 Bitmap image = BitmapFactory.decodeFile("/sdcard/photo2.jpg");

    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    image.compress(Bitmap.CompressFormat.PNG, 100, stream);

    byte[] byteImage = stream.toByteArray();

    String s = Base64.encodeToString(byteImage, Base64.NO_WRAP | Base64.URL_SAFE); 
```

然后将字符串 's' 传递给 php 脚本（正如我检查过的那样），然后脚本将其插入数据库中。

此链接[http://diffchecker.com/kKD4w16C](http://diffchecker.com/kKD4w16C)包含原始编码字符串（在屏幕左侧）和存储在数据库中的字符串（在屏幕右侧）。

任何想法为什么会发生这种情况以及如何防止它？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:14:41.500

你没有注意到，你只是剪掉了大约 20% 的绳子？似乎您的数据库字段有限制。类似的东西`varchar(255)`，你尝试存储`1500`长度字符串。

[http://tinyurl.com/c2e7hru](http://tinyurl.com/c2e7hru) - 见这里。我只是复制您的数据库字段值的末尾并在“原始”值中找到它。

另外，检查您的编码。

# ruby-on-rails - Thinking Sphinx - 跨多个模型排序

> ID：13475413
> 
> 赞同：1
> 
> 时间：2012-11-20T14:32:45.253
> 
> 标签：ruby-on-rails, thinking-sphinx

为了显示一个目录，我正在搜索以获取各种模型中的大量项目，所有这些项目都以这样的特定字母开头

```
@everything = ThinkingSphinx.search(
               "@name ^?",
               @letter,
              :match_mode => :extended,
              :classes => [Performer, Promoter, Tour, Venue, User],
              :order => :name_sort,
              :sort_mode => :asc
              ) 
```

但是，这些项目不按字母顺序排序。如果我将 asc 更改为 desc，则顺序会更改，但仍无法识别。

索引是这样设置的

```
performer.rb
define_index do
  indexes name, :sortable => true
  indexes description
  has created_at, updated_at
end

promoter.rb
define_index do
  indexes name, :sortable => true
  indexes description
  has created_at, updated_at
end

tour.rb
define_index do
  indexes name, :sortable => true
  indexes description
  has created_at, updated_at
end

venue.rb
define_index do
  indexes name, :sortable => true
  indexes description
  has created_at, updated_at
end

user.rb
define_index do
  indexes first_name, :sortable => true
  indexes last_name, :as => :name, :sortable => true
  indexes bio
  has role, created_at, updated_at
end 
```

如您所见，用户索引别名 last_name 作为名称，但这是唯一的奇怪之处。

我正在使用思考狮身人面像 2.0.12

# php - SimplePie 解析巨大的 XML 文件导致内存泄漏

> ID：13475414
> 
> 赞同：0
> 
> 时间：2012-11-20T14:32:47.423
> 
> 标签：php, xml-parsing, simplepie

我正在使用一个非常酷的应用程序[SimplePie](http://simplepie.org)，问题是当我解析这个非常大的 XML 文件`http://feeds.feedburner.com/HubSpot`时，它的大小约为 10Mb，当它开始解析时，它突然破坏了一切，因为它得到了这个错误`Allowed memory size of 33554432 bytes exhausted (tried to allocate 14441498 bytes) in...`

根据我在互联网上的研究，它说您可以剪切 xml 文件并逐个解析它们，然后通过 SimplePie 对其进行处理，这样您就不会出现内存泄漏或内存不足错误，这是[我研究的来源](http://simplepie.org/wiki/tutorial/how_to_edit_part_of_the_feed_before_parsing_it?s%5B%5D=set&s%5B%5D=raw&s%5B%5D=data)。我不知道该怎么做，你知道怎么做吗？

使用我上面提供的提要的示例将不胜感激和奖励！

谢谢！

# jquery - 如何使用 jquery 处理 Web 服务器响应以运行回调函数？

> ID：13475417
> 
> 赞同：-4
> 
> 时间：2012-11-20T14:32:48.187
> 
> 标签：jquery, asp.net, ajax, httpresponse, jquery-callback

有什么方法可以知道 Web 服务器响应何时发送到客户端，在传统的回发中，以便我可以执行 jQuery 函数？

例如，`div`不使用

```
Page.RegisterStartUpScript("<script type="text/javasctip">alert('Succeed')</script>); 
```

也不

```
var request = $.ajax({
   url: "page/someWebMethod",
   type: "POST",
   data: {id : menuId},
   dataType: "html"
 });

 request.done(function(msg) {
    $('DivOk').show();
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:46:19.150

如果没有特定的应用程序很难回答，但是，保留在 jQuery 方法中，您可以使用 jQuery 的 ajax 方法的 ansync: false 选项并进行同步，如这里的答案所示：[我如何让 jQuery 执行同步，而不是比异步的，Ajax 请求？](https://stackoverflow.com/questions/133310/how-can-i-get-jquery-to-perform-a-synchronous-rather-than-asynchronous-ajax-re)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:37:21.037

您可以检查使用的 HTTP 方法（例如假设您已经完成了 POST），然后做一些事情，例如在您的 ASPX 中：

```
<script type="text/javascript">

    var has_posted = <%= GetPosted() %>;

    if (has_posted) callSomething();

</script> 
```

在后面的代码中：

```
protected string GetPosted()
{
    return (Request.HttpMethod == "POST").ToString().ToLower();
} 
```

我通常这样做，`<form>`但是可以使用隐藏字段传递额外的检查`<input>`，但你明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:37:29.083

编辑：（非传统方式）:)

[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)的成功不应该给你你想要的吗？

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
}); 
```

# php - 用俄语解析月份

> ID：13475419
> 
> 赞同：5
> 
> 时间：2012-11-20T14:32:56.860
> 
> 标签：php, date

有以下几行（月份是俄语）：

```
"Ноябрь 20 2012"
"Декабрь 19 2012"
"Сентябрь 12 2012"
"Июнь 5 2012"
"Август 2 2012" 
```

我想将它们转换为以下格式：

```
11.20.2012
12.19.2012
09.12.2012
06.05.2012
08.02.2012 
```

当然，问题是月份是俄语，所以我尝试过的方法不起作用。

```
$date = "Ноябрь 20 2012";
print_r(date_parse_from_format("F j Y", $date)); 
```

如何解析带有俄罗斯月份的日期？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T14:41:54.060

您可以执行以下解决方法：

```
$ru_month = array( 'Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь' );
$en_month = array( 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' );

print_r(date_parse_from_format("F j Y", str_replace($ru_month, $en_month, $date))); 
```

* * *

PS：正如其他人所说，有一种直接的方法，这是您问题[的副本](https://stackoverflow.com/questions/4655305/parsing-localized-date-strings-in-php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T14:46:14.223

首先告诉 php 使用您的语言环境设置，

```
setlocale( LC_TIME, 'ru_RU', 'russian' ); 
```

然后尝试解析字符串。

```
$date = "Ноябрь 20 2012";
print_r( date_parse_from_format("F j Y", $date) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T14:39:31.033

用于`setlocale()`非`strftime()`英语日期

# c# - 为这个谜题提出一个逻辑或算法

> ID：13475421
> 
> 赞同：-1
> 
> 时间：2012-11-20T14:33:03.757
> 
> 标签：c#, algorithm, logic

有两个数组

```
Array1 {5,6,7,8} 
```

和

```
Array2 {2,1,1,0} 
```

这是满足特定条件的模式

```
8,6,5,7 
```

**条件：**考虑到 Array2 的相应元素到 Array1 的 8 上方的模式表示它在模式左侧有 0 个大于 8 的元素，类似地，Array2 到 Array1 的 6 的相应元素表示它的左侧有 1 个大于 6 的元素在模式中。等等......

给定 2 个数组是否有生成模式的方法。任何算法逻辑都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:45:06.207

这是一个应该有效的算法：

*   对数字进行排序。（**编辑**：按数字**，然后按左计数**）
*   对于每个数字，考虑到它的左边需要`n`更大的数字，把它放在左边的`n+1`第 th 个空闲槽中。
*   如果剩下的空闲插槽不多，则两个原始数组不允许这样的模式存在。

以下是它在您的示例中的工作方式：

*   从最小的数字 5 开始。它的左边需要两个较大的项目。由于*所有*其他项目都较大，所以把它从左边数第三个。`_ _ 5 _`
*   下一个最小的是 6。左边需要一个较大的项目。由于*所有*剩余项目都较大，因此需要进入第二个空闲槽。`_ 6 5 _`
*   下一个最小的是 7。它需要一个更大的项目在左边。由于*所有*剩余项目都较大，因此需要进入第二个空闲槽。`_ 6 5 7`
*   接下来是 8。左边不需要更大的项目。它需要进入第一个空闲插槽。`8 6 5 7`

这是 C# 中的粗略实现：

```
public static int[] algorithm(int[] numbers, int[] counts)
{
    var pairs = numbers                         // EDIT:
        .Zip(counts, (n, c) => new { n, c })    // This is needed to
        .OrderBy(p => p.n)                      // correctly handle
        .ThenBy(p => p.c)                       // duplicate numbers
        .ToArray();
    int[] output = new int[pairs.Length];
    List<int> freeIndices = Enumerable.Range(0, pairs.Length).ToList();
    for (int i = 0; i < pairs.Length; i++)
    {
        if (pairs[i].c < freeIndices.Count)
        {
            int outputIndex = freeIndices[pairs[i].c];
            freeIndices.RemoveAt(pairs[i].c);
            output[outputIndex] = pairs[i].n;
        }
        else
        {
            throw new ArgumentException();
        }
    }
    return output;
} 
```

**编辑**：我的原始代码没有正确处理重复的数字；这个版本现在应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:01:46.713

与其将其视为两个数组，不如将其视为 Number/LeftCount 对的单个列表。

首先只考虑 (LeftCount == 0) 的对集合。在这组中选择编号最小的一组 ( `n`)。

写到`n`屏幕上。

从列表中删除这对。

对于 Number 小于 的所有剩余对`n`，递减 LeftCount。

重复直到列表中没有任何对。

如果你理解这个算法的想法，把它编码成两个独立的数组就不会太难了。

# objective-c - 按钮中心作为坐标原点

> ID：13475423
> 
> 赞同：0
> 
> 时间：2012-11-20T14:33:14.237
> 
> 标签：objective-c

目前我在 ScrollView 上有一个可以缩放的按钮。当您缩放时，我已使按钮相对于图像上的位置保持在同一位置，但由于按钮的原点是 (0,0)，它最终会移动大约一厘米。无论如何我可以将按钮原点设置在按钮的中间吗？

我如何显示我的按钮：

```
UIButton *btn1 = [UIButton buttonWithType: UIButtonTypeDetailDisclosure];
[btn1 addTarget:self action:@selector(_openMiamiPage:) forControlEvents:UIControlEventTouchUpInside];
btn1.tag = kAddContactButton;
[_mapContentView addSubview:btn1]; 
```

- 从 plist 中获取 co-ordinatons。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:01:23.997

```
btn1.center = GCPointMake(0,0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:11:17.467

> 无论如何我可以将按钮原点设置在按钮的中间吗？

它有助于具体说明您正在谈论的坐标系。任何视图，包括您的按钮，都使用（至少）两个坐标系：它自己的和它的父视图。视图自己的坐标系是视图自己绘制的坐标系。超级视图的坐标系是视图位于超级视图内部的坐标系。

听起来您只想移动按钮，使中心位于超级视图的原点。如果是这种情况，Hermann Klecker 的回答是正确的——只需将按钮的`center`属性设置为代表原点的点即可。`center`类似和的属性`frame`在超级视图的坐标系中表示。

**更新：**该`center`属性表示[框架的中心](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/center)。更改它肯定*会*移动按钮。如果您将 (0,0) 分配给`center`并且按钮没有移动到您想要的位置，那么按钮的超级视图的坐标系不是您所期望的。您说您的按钮在滚动视图中，但您需要意识到按钮的超级视图是滚动视图的内容视图，而不是滚动视图本身。将按钮设置`center`为 (0,0) 会将按钮移动到内容视图的左上角，即在滚动视图内移动的区域。如果您希望按钮在内容在其下方滚动时保持静止，请将按钮*放在*滚动视图的顶部，而不是在其中。

# symfony-1.4 - symfony 1.4 有条件验证收货地址

> ID：13475426
> 
> 赞同：1
> 
> 时间：2012-11-20T14:33:18.693
> 
> 标签：symfony-1.4, symfony-forms

如何根据`bill_ceck`post 参数验证帐单地址？

我查看了帖子验证（[http://symfony.com/legacy/doc/cookbook/1_2/en/conditional-validator](http://symfony.com/legacy/doc/cookbook/1_2/en/conditional-validator)），但在我看来，它像是 AND 验证而不是 OR。

```
class OrderAddForm extends BaseOprOrderHeaderForm {
  public function configure() {
    $this->setWidgets(array(
        'email' => new sfWidgetFormInputText(),
        'name' => new sfWidgetFormInputText(),
        //....
        'city' => new sfWidgetFormInputText(),
        'street' => new sfWidgetFormInputText(),
        //....
        'bill_check' => new sfWidgetFormInputCheckbox(),
        'bill_name' => new sfWidgetFormInputText(),
        'bill_city' => new sfWidgetFormInputText(),
        'bill_street' => new sfWidgetFormInputText(),
        //....
    ));
    $this->widgetSchema['bill_check']->setOption('value_attribute_value', 1);
    $this->setValidators(array(
        'email' => new sfValidatorEmail(),
        'name' => new sfValidatorString(),
        //...
        'city' => new sfValidatorString(),
        'street' => new sfValidatorString(),
        //...
        'bill_check' => new sfValidatorBoolean(),
    ));
    if (/** the most convetional solution to check 'bill_check' state */) {
      $this->validatorSchema['bill_name'] = new sfValidatorString();
      $this->validatorSchema['bill_city'] = new sfValidatorString();
      $this->validatorSchema['bill_street'] = new sfValidatorString();
      //....
    }
    $this->widgetSchema->setNameFormat('orderAddForm[%s]');
  }
} 
```

谢谢，奥利弗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:33:11.893

你可以使用一个`postValidator`

```
public function configure() {
  // your current code
  $this->validatorSchema->setPostValidator(
    new sfValidatorCallback(array('callback' => array($this, 'checkOtherStuff')))
  );
}

public function checkOtherStuff($validator, $values)
{
  // $values is an array of POSTed values
  if ($values['bill_check'] == 'something in here')
  {
    if ($values['bill_city'] == '' || $values['bill_street'] == '') {
        throw new sfValidatorError($validator, 'You must complete all fields');
    }
  }
  // bill_check is correct, return the clean values
  return $values;
} 
```

[关于这个主题的博客文章在这里](http://symfony.com/blog/call-the-expert-how-to-implement-a-conditional-validator)

# c - C中的二维字符数组意外输出

> ID：13475427
> 
> 赞同：2
> 
> 时间：2012-11-20T14:33:18.403
> 
> 标签：c, arrays, char, 2d

我有这段代码，它将字符串存储在二维字符数组中。在我的代码中，我使用的是 2x6 二维字符数组。在提供 12 位字符串 LIKE >“COMEHOMEARUN”时。它应该将其存储为
COMEHO
MEARUN
，但我得到的输出为
COMEHM
MEARUN ...即 [0]6] 处的值自动获取 [1][0] 的值。

这是代码

```
#include<stdio.h>
#include<conio.h>
void main()
{
    char string[20];
    char aray[1][5];
    int i,j,k=0;
    gets(string);
    //storing the individual characters in the string in the form of 2x6 char array
    for(i=0;i<=1;i++)
    {
        for(j=0;j<=5;j++)
        {
            aray[i][j]=string[k];
            k++;
        }
    }
    //displaying the array Generated
    for(i=0;i<=1;i++)
    {
        for(j=0;j<=5;j++)
        {
            printf("%c ", aray[i][j]);
        }
        printf("\n");
    }
    getch();
} 
```

有人知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:39:36.310

在 C 数组声明`char array[N][M]`中，`N`和`M`值**不是**“最高有效索引”；它们的意思是“值的数量”。

所以你的声明

```
char aray[1][5]; 
```

定义一个大小为 1x5 的数组，*而不是*您想要的 2x6。

你需要：

```
char aray[2][6]; 
```

但当然，实际的索引是从 0 开始的，所以对于`char aray[2][6]`，“最后一个”元素是 at `aray[1][5]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:36:31.223

您可以尝试更改`char aray[1][5]`为`char aray[2][6]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T18:03:39.183

您的索引不正确。

当您声明任何 char 数组时，您必须提供足够的长度。在您的代码中，您给出了维度 1，但它需要 2。

将数组声明为：

```
 char array[2][6]; 
```

那可行。

# asp.net - ASP.Net 手动回发不适用于动态创建的链接按钮

> ID：13475428
> 
> 赞同：0
> 
> 时间：2012-11-20T14:33:19.493
> 
> 标签：asp.net, dopostback

我正在尝试实现手动回发以触发未附加到控件的代码。我不想使用 AJAX PageMethods，因为我需要在回发期间引用某些控件，并且希望结果更新到页面上的 gridview。

我已经有另外两种可行的方法，但由于某种原因，我的第三种方法没有部署一次，但**在**我的开发机器上运行良好。

背后的代码（Page_load）

```
 switch (Request["__EVENTARGUMENT"]) {
            case "ItemReserved":
                GetAllStock();
                break;
            case "PendingItemRemoved":
                PopulatePending();
                break;
            case "StockInSubmitted":
                SubmitNewStock();    // this doesn't fire
                break;
        } 
```

一旦代码到达“SubmitNewStock()”，我就插入了一行写入日志文件。日志写在我的开发机器上，但没有写在网络服务器上。其他两个回发都按预期工作。

页面脚本

```
 function ctxMenu_Reserve() {
        PageMethods.SetItemReserved(CGRefForMenu);
        __doPostBack('', 'ItemReserved');

        HideMouseMenu();
    }

    function ctxMenuPending_Remove() {
        PageMethods.RemovePendingItem(CGRefForPendingMenu);
        __doPostBack('', 'PendingItemRemoved');
    }

    function StockINSubmit(){
        SubmitPlaceHolder = document.getElementById('<%=PlaceholderStockInSubmit.ClientID %>');
        SubmitPlaceHolder.innerHTML = "Processing...";

        __doPostBack('', 'StockInSubmitted');  //Causes postback, but relevant code is not triggered once on my live server
    } 
```

有谁知道为什么在我将网站部署到我的实时网络服务器后这不起作用？

我应该提到 StockINSubmit() 是从动态创建的客户端链接按钮启动的，该按钮位于模式弹出框内。

```
 PlaceholderStockInSubmit.Controls.Add(
            new LinkButton() {
                OnClientClick = "StockINSubmit()",
                Text = "Submit",
                ID = "lnkStockInSubmit"
            }); 
```

StockINSubmit() 替换包含该按钮的 DIV 的 HTML 内容。（所以我点击“提交”，它变为“处理”标签）。我看不出这会导致任何问题的原因，但认为值得一提。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:55:53.877

我终于弄清楚发生了什么...

动态创建的链接按钮作为其服务器单击 (onClick) 事件的一部分执行回发（尽管我没有将任何事件绑定到它）。在我的开发机器上，OnClientClick 事件回发击败了 OnClick 回发，因此所有预期的代码都正常运行。

出于某种原因，一旦部署到服务器上，服务器的 OnClick 事件将击败 OnClientClick 事件，因此在没有 OnClientClick 事件提供的额外 __EVENTARGUMENT 信息的情况下发生了完整的回发。

为了解决这个问题，我[在这个网站上找到了另一篇文章](https://stackoverflow.com/questions/176827/disable-the-postback-on-an-asplinkbutton)，解释了如何取消默认回发，但仍然执行客户端 javascript。

我的服务器端代码现在更新如下：

```
 LinkButton newButton = new LinkButton() {
        OnClientClick = "StockINSubmit()",
        Text = "Submit",
        ID = "lnkStockInSubmit"
    };
    newButton.Attributes.Add("onClick", "return false;");
    PlaceholderStockInSubmit.Controls.Add(newButton); 
```

现在它就像一个魅力:)

谢谢你们的帮助。

# .net - 在 DataContractSerializer 中将已删除的类型反序列化为新类型（旧基类）

> ID：13475429
> 
> 赞同：1
> 
> 时间：2012-11-20T14:33:22.130
> 
> 标签：.net, vb.net, datacontractserializer

这是我的旧类图（简化）。

```
public class Main
    Public Property ListOfA As ClassACollection
End Class

Public Class ClassBase
End Class

Public Class ClassA
  Inherits ClassBase
End Class

Public Class ClassACollection
    Inherits System.Collections.ObjectModel.Collection(Of ClassA)
End Class

Public Class ClassB
  Inherits ClassBase
End Class

Public Class ClassBCollection
    Inherits System.Collections.ObjectModel.Collection(Of ClassB)
End Class 
```

当我用我序列化类`Main`时，`DataContractSerializer`我得到了这样的 XML：

```
<Main>
  <ListOfA>
    <ClassA>
      .....
    </ClassA>
    <ClassA>
      .....
    </ClassA>
  </ListOfA>
</Main> 
```

最近我删除了`ClassA`，`ClassB`因为它们是相同的！我删除了这两个集合以替换它们：

```
public class Main
    Public Property ListOfA As ClassBaseCollection
End Class

Public Class ClassBaseCollection
    Inherits System.Collections.ObjectModel.Collection(Of ClassBase)
End Class 
```

但是现在当我尝试反序列化 XML 时，集合`ListOfA`已创建但始终为空！在反序列化过程中我没有收到错误。

我尝试使用 a `DataContractResolver`，但该函数`ResolveName`从不调用`ClassA`or `ClassB`。

```
Dim dc As New Runtime.Serialization.DataContractSerializer(GetType(Main), Nothing, Integer.MaxValue, False, True, Nothing, New MyResolver())

Private Class MyResolver
    Inherits Runtime.Serialization.DataContractResolver

    Public Overrides Function ResolveName(typeName As String, typeNamespace As String, declaredType As System.Type, knownTypeResolver As System.Runtime.Serialization.DataContractResolver) As System.Type
      If typeName.Equals("ClassA") OrElse typeName.Equals("ClassB") Then
        Return GetType(ClassBase)
      Else
        'Defer to the known type resolver
        Return knownTypeResolver.ResolveName(typeName, typeNamespace, Nothing, Nothing)
      End If
  End Function
End Class 
```

是`DataContractResolver`做我想做的事的好方法吗？如果是，我还需要其他东西来完成这项`DataContractResolver`工作吗？

谢谢你的帮助！

* * *

**更新：** 我添加回来`ClassA`并`ClassB`在我的项目中进行以下测试：
- 我试图将它们作为已知数据类型放在`DataContractSerializer`构造函数中。- 我在 ClassBaseCollection 上
试过了。`KnownTypeAttribute`

在这 2 种情况下，`ResolveName`仍然不要求`ClassA`和`ClassB`。

我尝试使用从函数派生的类`IDataContractSurrogate`并转换函数中的类型，`GetDataContractType`并且该函数不调用`ClassA`and `ClassB`。

* * *

**更新#2：** 最后，我没有找到任何方法来做我想做的事。在序列化之前，我需要查看文件版本并用 XML 中的新标签替换旧标签。前任。：

```
data = data.Replace("<ClassA>", "<ClassBase>")
... 
```

这不是我第一个问题的答案，而是一种解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:20:54.523

> 但是现在当我尝试反序列化 XML 时，集合`ListOfA`已创建但始终为空！在反序列化过程中我没有收到错误。

在[有关数据合同版本控制的 msdn 文档中，](http://msdn.microsoft.com/en-us/library/ms731138.aspx)您可以找到有关为什么`ListOfA`为空的信息。您调整后的版本的反序列化引擎无法解释`ClassA`或`ClassB`因此丢弃此数据。

我认为您使用[Data Contract Resolver](http://msdn.microsoft.com/en-us/library/ee358759.aspx)进行了正确的跟踪。

> 数据协定解析器允许您动态配置已知类型。**序列化或反序列化数据协定不期望的类型时需要已知类型**。

由于您没有在[构造函数](http://msdn.microsoft.com/en-us/library/dd438223.aspx)的已知数据类型参数中指定`ClassA`和，因此不会为它们调用。有关已知数据类型[的更多信息，请查看 msdn 文档](http://msdn.microsoft.com/en-us/library/ms730167.aspx)。这意味着为了正确反序列化这些旧类，您仍然需要包含它们以实现向后兼容性。`ClassB`[`DataContractSerializer`](http://msdn.microsoft.com/en-us/library/dd438223.aspx)`ResolveName()`

# lotus-domino - web代理可以重定向到顶部目标吗？

> ID：13475432
> 
> 赞同：1
> 
> 时间：2012-11-20T14:33:45.777
> 
> 标签：lotus-domino, lotus, lotusscript

我正在**从 iframe**调用一个代理，该代理应该将用户重定向到整个页面上的给定页面。

这是一个 Lotus 脚本代理，它做他的事情，然后使用一个通用的重定向：

```
Print "[http://www.server.com/db.nsf/simpleForm?OpenForm]" 
```

我怎么能提到目标（在我的例子中是_top）？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:54:59.220

由于没有给出更好的回应，我分享了我的 Javascript 解决方案（欢迎评论）：

```
Print  |<html>
<head>
<script language="JavaScript" type="text/javascript">
<!-- 
window.top.location.href = "/myDB.nsf/MyFullRedirectedPage?OpenForm&L=|+lang+....+ |";
// -->
</script>
</head>
<body "style=\"margin:0 ; background:transparent\"">
processing... please wait!    N.B. this text will appear very short time.
</body>
</html>| 
```

我放了一个背景：透明，因为我在 iframe 中。我不喜欢在刷新整个页面之前几乎闪烁的这段代码。

# android - 恢复应用程序状态后不需要的 onItemSelected 调用

> ID：13475433
> 
> 赞同：1
> 
> 时间：2012-11-20T14:33:54.923
> 
> 标签：android, spinner, listener, state, restore

嗨，
我有一些 Spinner 对象，当它们被选中时，会更改 an`EditText`和 Button 的内容。一切正常，直到我打开和关闭屏幕。
我只设置了面向应用程序的横向，因此在打开和关闭屏幕时会导致活动被破坏。

这里出现的问题是我丢失了 Spinner、EditText 和 Button 对象的所有状态信息。
所以我尝试用`onSaveInstanceState`and`onRestoreInstanceState`方法解决这个问题，按顺序设置 Spinner、Button 和 EditText 的状态。
问题是，由于某种原因，`onItemSelected`在我恢复 Button 和 EditText 的状态后调用了该方法，因此它们被设置为默认值。
我尝试暂时禁用 onItemSelected 侦听器，但一旦我再次启用它们，就会调用 onItemSelected 方法并重置 Button 和 EditText 状态。

注意：我只想在应用程序被系统杀死后恢复状态，而不是用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:41:40.063

您可以创建一个全局布尔变量并在恢复时将其设置为 true。在 onItemSelected 中，您可以检查此变量，如果为 true，您将不会更改按钮和 editText 内容，只需将此变量设置为 false。在 onRestoreInstaceState 中：

```
wasRestored = true; 
```

在 onItemSelected 中：

```
if(wasRestored){
   wasRestored=false;
   return;
} else {//change editText and Button content} 
```

# ruby-on-rails - 使用 Devise 进行身份验证期间的可选密码

> ID：13475436
> 
> 赞同：0
> 
> 时间：2012-11-20T14:34:13.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2

如果我有一个 Rails 应用程序并且我想使用 Devise 添加身份验证，我将如何允许数据库中密码为空的用户在没有密码的情况下登录？

我有兴趣听到关于生命周期的答案以及我必须编写哪些文件才能完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:50:52.553

第 1 步：允许保存记录。
第二步：登录记录

要允许保存记录，您需要自己进行验证。我在这里描述如何进行自定义验证：http: [//jessewolgamott.com/blog/2011/12/08/the-one-where-devise-validations-are-customized/](http://jessewolgamott.com/blog/2011/12/08/the-one-where-devise-validations-are-customized/) ....在你的情况下，你会想要删除密码验证。

要登录记录，您需要有一个自定义登录路径。您可以覆盖设计会话控制器，但这可以解决问题：

```
class SessionsController < ApplicationController
  def create
    user = User.find_by_email!(params[:session][:email])
    sign_in user
    redirect_to root_path
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:17:11.047

事实证明，Devise 是建立在 Warden 之上的。这意味着我只需要创建自己的自定义 Warden 策略：

[https://github.com/hassox/warden/wiki/Strategies](https://github.com/hassox/warden/wiki/Strategies)

# javascript - 读取 url 的 Javascript 从 html 页面中获取某个 div 标签并将其放置在另一个页面中。

> ID：13475438
> 
> 赞同：1
> 
> 时间：2012-11-20T14:34:13.777
> 
> 标签：javascript, html

嗨，我对这些东西有点陌生，但我希望能够输入文件路径或 url，然后 javascript 将读取某个 div 标签，然后从该 html 页面中获取它并将其放在另一个页面中，我可以还输入 url 或文件路径。这可能吗？任何人都可以让我走上正轨吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:40:35.947

使用[Jquery](http://jquery.com/)和[AJAX](http://api.jquery.com/jQuery.ajax/)，您可以指定文件路径并读取某个 div 标签的 HTML。我不确定您是否可以将该 html 放入与您所在的页面不同的页面中。

```
$.ajax({
    url: 'ajax/test.html',
    success: function(data) {
        $('.result').html($(data).find("#myDiv").html());
    }
}); 
```

# c++ - 获取模板，模板类型

> ID：13475439
> 
> 赞同：5
> 
> 时间：2012-11-20T14:34:15.743
> 
> 标签：c++, class, templates, types

我正在创建一个小的“通用”寻路类，它采用将`Board`在其上查找路径的类类型，

```
//T - Board class type
template<class T>
class PathFinder
{...} 
```

而`Board`也被模板化以保存节点类型。（这样我就可以在 2D 或 3D 向量空间上找到路径）。

我希望能够声明和定义一个成员函数`PathFinder`，它将接受像这样的参数

```
//T - Board class type
PathFinder<T>::getPath( nodeType from, nodeType to); 
```

如何对作为参数输入函数的`T`和的节点类型执行类型兼容性？`nodeType`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T14:38:03.080

如果我明白你想要什么，请给`board`一个类型成员并使用它：

```
template<class nodeType>
class board {
  public:
    typedef nodeType node_type;
  // ...
};

PathFinder<T>::getPath(typename T::node_type from, typename T::node_type to); 
```

如果无法更改，也可以对其进行模式匹配`board`：

```
template<class Board>
struct get_node_type;
template<class T>
struct get_node_type<board<T> > {
  typedef T type;
};

PathFinder<T>::getPath(typename get_node_type<T>::type from, typename get_node_type<T>::type to); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T14:37:52.883

您可以`typedef` `nodeType`在类定义中：

```
typedef typename T::nodeType TNode;
PathFinder<T>::getPath( TNode from, TNode to); 
```

# java - 覆盖 ROME 的 DateParser 的简单方法？

> ID：13475447
> 
> 赞同：3
> 
> 时间：2012-11-20T14:34:44.517
> 
> 标签：java, rss, rome

我需要处理的 RSS 2.0 提要返回 ROME 的 DateParser 无法解析的日期条目，并提供`null`所有日期。不仅如此，不存在合适的 SimpleDateFormat 模式（可以简单地在 rome.properties 中指定），因此在解析输入之前需要对其进行预处理。ROME 的 DateParser 已经在内部完成了这些事情，例如在将 RFC822 日期输入中的“UT”替换为“GMT”之前，再将其提供给 Java DateFormat 解析器。我只需要添加一个类似的修改。

我现在要做的是在我的项目副本中包含 ROME 的 RSS20Parser.java 及其扩展的所有提要解析器类，以涵盖对 ROME 的 DateParser 的所有引用，并提供我自己的 DateParser 类，然后提要解析器类引用而不是原始的 DateParser。

鉴于 ROME 的插件结构，我希望能够简单地插入我自己的 DateParser，但找不到这样做的方法。我错过了什么？我能否以某种方式将 ROME 与我自己的 DateParser 一起使用，但不必复制所有预期使用它的提要解析器类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-01T14:12:11.507

[请参阅此处](http://rometools.github.io/rome/RssAndAtOMUtiliEsROMEV0.7DateAndTimeParsing.html)的手册 要在 ROME 中自定义 DateParser 的日期格式，您需要使用正确的创建自定义 rome.properties `datetime.extra.masks`，例如：

```
datetime.extra.masks=EEE, dd MMM yyyy HH:mm:ss z 
```

将自定义属性文件放在 src/main/resources 中。所有 rome.properties 文件将在加载时聚合。

# ios - iOS：拆分键 - 来自 NSString 的等号加入的值

> ID：13475448
> 
> 赞同：0
> 
> 时间：2012-11-20T14:34:47.230
> 
> 标签：ios, nsstring, split

我有以下字符串；

```
 key = value = 123 
```

我想把这个字符串分成两个字符串`"key"`和`"value = 123"`. 做这个的最好方式是什么？

我正在考虑使用`componentsSeparatedByString`“=”然后组合最后两个组件，但对我来说，`"key ="`是固定的，但右侧可以是任何值，`"value1 = 123, value2 = 123"`所以我不能使用这种方法。

基本上，如果有一种很好的方法来获取`key`（第一个 = 符号之前的所有字符）和第一个 = 符号之后的所有字符，`value`那么它会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:25:08.490

使用 NSScanner！

```
 NSString *key, *value;
       NSScanner *scanner = [NSScanner scannerWithString:yourstring];
       [scanner scanUpToString:@"=" intoString:&key];
       [scanner scanString:@"=" intoString:nil];
       value = [yourstring substringFromIndex:scanner.scanLocation];

       key = [key stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
       value = [value stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]; 
```

字符串`"key = value1 = 123, value2 = 456"`将导致`key = "key"`和`value = "value1 = 123, value2 = 456".`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:43:00.970

我不确定我是否完全理解你的问题？以下代码将获取密钥，无论它是什么，然后从原始字符串中剥离它以获取值。

```
NSString *strKeyKalue = @"key = value = 123";
NSArray *aryKeyValue = [strKeyKalue componentsSeparatedByString:@" = "];
NSString *key = [aryKeyValue objectAtIndex:0];
NSString *values = [strKeyValue substringFromIndex:[key length] + 3]; // Remember ' = ' 
```

所以`max_int = 17477575`会导致`key = max_int`和`value = 17477575`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:43:58.593

你的解释很混乱。如果您只想将 key 与 value = 123 分开，请使用 commentsSeperatedByString 然后 NSString *newString = [NSString stringWithFormat"@"%@ = %@", string1, string2];

# excel - Excel VBA - 如何在没有公式的情况下插入值？

> ID：13475450
> 
> 赞同：1
> 
> 时间：2012-11-20T14:34:48.023
> 
> 标签：excel, vba, formula

公式在执行后显示在每个单元格上，是否可以不显示公式？

VBA代码：

```
Set rngCell = wbk.Worksheets("TEST1").Range("C1")

  For i = 1 To 81
    rngCell.Offset(i, 0).Value = "=round((COUNTIF('T2'!C[7],RC[-2])/60),2)"
    rngCell.Offset(i, 1).Value = "=round((COUNTIF('T3'!C[6],RC[-3])/60),2)"
    rngCell.Offset(i, 2).Value = "=round((COUNTIF('T4'!C[5],RC[-4])/60),2)"
    rngCell.Offset(i, 3).Value = "=round((COUNTIF('T5'!C[4],RC[-5])/60),2)"
  Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:41:12.583

有很多方法可以做到这一点，可能是在循环之后添加它最简单的方法：

```
wbk.Worksheets("TEST1").Range("C2:F82").Value =  wbk.Worksheets("TEST1").Range("C2:F82").Value 
```

## 或者

```
wbk.Worksheets("TEST1").Range("C2:F" & i).Value =  wbk.Worksheets("TEST1").Range("C2:F" i).Value 
```

...我希望我的单元格引用正确...

# android - 如何在 Android 上的 MediaPlayer 中播放实时 HTTP 音频流？

> ID：13475451
> 
> 赞同：6
> 
> 时间：2012-11-20T14:34:58.547
> 
> 标签：android, media-player

我想在我的 Android 应用程序中播放实时 HTTP 流，因此我在同一 LAN 的另一台 PC 上安装了 Windows Media Encoder 9，并使用它来创建实时 HTTP 音频流。

直播的HTTP流还可以：我测试过，可以在PC上用Windows Media Player或VLC播放，在我的手机上也可以用VLC for Android播放。

因此，在我的 Android 应用程序中，我编写了以下代码：

```
private MediaPlayer player = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
            .detectDiskReads()
            .detectDiskWrites()
            .detectNetwork()   // or .detectAll() for all detectable problems
            .penaltyLog()
            .build());
    StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
            .detectLeakedSqlLiteObjects()
            //.detectLeakedClosableObjects()
            .penaltyLog()
            .penaltyDeath()
            .build());

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btnPlay = (Button)findViewById(R.id.play);
    address = (TextView)findViewById(R.id.address);

    btnPlay.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            play();
        }
    });

}

private void play()
{
    String serverIp;

    serverIp = address.getText().toString(); // get the uri address, for example http://xxx.xxx.xxx.xxx:2340

    if (player == null)
    {
        player = new MediaPlayer();
    }
    else
    {
        player.stop();
        player.reset();
    }
    try {
        Log.v("", "Init a new MediaPlayer");

        player.setAudioStreamType(AudioManager.STREAM_MUSIC);
        Log.v("", "Set the stream type to STREAM_MUSIC");

        player.setDataSource(this, Uri.parse(serverIp));
        Log.v("", "Set the source is " + serverIp);

        player.setOnBufferingUpdateListener(this);
        player.setOnPreparedListener(this);
        player.setOnErrorListener(this);

        player.prepareAsync();
        Log.v("", "After prepareAsync");
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        Log.v("IllegalArgumentException", e.toString());
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        Log.v("SecurityException", e.toString());
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        Log.v("IllegalStateException", e.toString());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Log.v("IOException", e.toString());
    } catch (Exception e) {
        Log.v("Exception",e.toString());
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onPrepared(MediaPlayer mp) {
    // TODO Auto-generated method stub
    try {
        Log.v("onPrepared", "After prepareAsync");
        mp.start();
    }
    catch (Exception e) {
        Log.v("play", e.toString());
    }
}

@Override
public void onBufferingUpdate(MediaPlayer mp, int percent) {
    // TODO Auto-generated method stub
    Log.v("onBufferingUpdate", "Buffering Update");
}

@Override
public boolean onError(MediaPlayer mp, int what, int extra) {
    // TODO Auto-generated method stub
    Log.v("MediaPlayer onError", "what=" + what + " extra=" + extra);

    return true;
} 
```

但它没有用。当我单击播放按钮时，没有任何反应。但是，如果我输入在 Internet 上找到的其他 URL（例如[http://www.example.com/song.mp3](http://www.example.com/song.mp3)），它就可以工作。

那么任何人都可以帮助我吗？日志信息如下。我的手机是HTC s710e，我的安卓版本是4.0.4。

```
11-20 22:28:14.137: V/(580): Init a new MediaPlayer
11-20 22:28:14.137: V/(580): Set the stream type tp STREAM_MUSIC
11-20 22:28:14.147: D/MediaPlayer(580): Couldn't open file on client side, trying server side
11-20 22:28:14.178: E/Trace(39): error opening trace file: No such file or directory (2)
11-20 22:28:14.178: V/(580): After prepareAsync
11-20 22:28:14.297: V/ChromiumHTTPDataSource(39): connect on behalf of uid 10044
11-20 22:28:14.339: I/qtaguid(39): Tagging socket 27 with tag 3f500000000(1013) for uid 10044 failed errno=-2
11-20 22:28:14.629: I/ChromiumHTTPDataSourceSupport(39): Server responded with http status 400
11-20 22:28:14.648: I/qtaguid(39): Untagging socket 27 failed errno=-2
11-20 22:28:14.657: I/AwesomePlayer(39): mConnectingDataSource->connect() returned -1004
11-20 22:28:14.657: E/MediaPlayer(580): error (1, -1004)
11-20 22:28:14.667: E/MediaPlayer(580): Error (1,-1004)
11-20 22:28:14.667: V/MediaPlayer onError(580): what=1 extra=-1004 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:42:54.390

你可以在 android 3.0 和 3.0 + 版本上玩 HLS，旧版本不支持 HLS。下面的这段代码，可以在 3.0 + 版本上运行。要播放所有 android 版本的视频，您必须使用 rtsp 流式传输或 http 渐进式下载。

玩家等级

```
import android.app.Activity;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnBufferingUpdateListener;
import android.media.MediaPlayer.OnCompletionListener;
import android.media.MediaPlayer.OnPreparedListener;
import android.media.MediaPlayer.OnVideoSizeChangedListener;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class VideoPlayerActivity extends Activity implements
        OnBufferingUpdateListener, OnCompletionListener,
        OnPreparedListener, OnVideoSizeChangedListener, SurfaceHolder.Callback {

    private static final String TAG = "MediaPlayerDemo";
    private int mVideoWidth;
    private int mVideoHeight;
    private MediaPlayer mMediaPlayer;
    private SurfaceView mPreview;
    private SurfaceHolder holder;
    private String path;
    private Bundle extras;
    private static final String MEDIA = "media";
    private static final int STREAM_VIDEO = 5;
    private boolean mIsVideoSizeKnown = false;
    private boolean mIsVideoReadyToBePlayed = false;

    /**
     * 
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        mPreview = (SurfaceView) findViewById(R.id.VideoView);
        holder = mPreview.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        extras = getIntent().getExtras();

    }

    private void playVideo(Integer Media) {
        doCleanUp();
        try {

            path = "http://www.pocketjourney.com/downloads/pj/video/famous.3gp";

            // Create a new media player and set the listeners
            mMediaPlayer = new MediaPlayer();
            mMediaPlayer.setDataSource(path);
            mMediaPlayer.setDisplay(holder);
            mMediaPlayer.prepare();
            mMediaPlayer.setOnBufferingUpdateListener(this);
            mMediaPlayer.setOnCompletionListener(this);
            mMediaPlayer.setOnPreparedListener(this);
            mMediaPlayer.setOnVideoSizeChangedListener(this);
            //mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

        } catch (Exception e) {
            Log.e(TAG, "error: " + e.getMessage(), e);
        }
    }

    public void onBufferingUpdate(MediaPlayer arg0, int percent) {
        Log.d(TAG, "onBufferingUpdate percent:" + percent);

    }

    public void onCompletion(MediaPlayer arg0) {
        Log.d(TAG, "onCompletion called");
    }

    public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
        Log.v(TAG, "onVideoSizeChanged called");
        if (width == 0 || height == 0) {
            Log.e(TAG, "invalid video width(" + width + ") or height(" + height + ")");
            return;
        }
        mIsVideoSizeKnown = true;
        mVideoWidth = width;
        mVideoHeight = height;
        if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {
            startVideoPlayback();
        }
    }

    public void onPrepared(MediaPlayer mediaplayer) {
        Log.d(TAG, "onPrepared called");
        mIsVideoReadyToBePlayed = true;
        if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {
            startVideoPlayback();
        }
    }

    public void surfaceChanged(SurfaceHolder surfaceholder, int i, int j, int k) {
        Log.d(TAG, "surfaceChanged called");

    }

    public void surfaceDestroyed(SurfaceHolder surfaceholder) {
        Log.d(TAG, "surfaceDestroyed called");
    }

    public void surfaceCreated(SurfaceHolder holder) {
        Log.d(TAG, "surfaceCreated called");
        playVideo(STREAM_VIDEO);

    }

    @Override
    protected void onPause() {
        super.onPause();
        releaseMediaPlayer();
        doCleanUp();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        releaseMediaPlayer();
        doCleanUp();
    }

    private void releaseMediaPlayer() {
        if (mMediaPlayer != null) {
            mMediaPlayer.release();
            mMediaPlayer = null;
        }
    }

    private void doCleanUp() {
        mVideoWidth = 0;
        mVideoHeight = 0;
        mIsVideoReadyToBePlayed = false;
        mIsVideoSizeKnown = false;
    }

    private void startVideoPlayback() {
        Log.v(TAG, "startVideoPlayback");
        holder.setFixedSize(mVideoWidth, mVideoHeight);
        mMediaPlayer.start();
    }
} 
```

主要 XML

```
 <VideoView
        android:id="@+id/VideoView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:layout_weight="1"/>

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" android:layout_weight="1" android:background="#aaaaaa">
    </LinearLayout>

</LinearLayout> 
```

你必须添加到你的清单互联网权限

```
uses-permission android:name="android.permission.INTERNET" /> 
```

# java - 将一个字节转换为 4 位后分隔的两个 int 值

> ID：13475455
> 
> 赞同：2
> 
> 时间：2012-11-20T14:35:05.417
> 
> 标签：java, binary, byte

我有这个`byte`/ `int` `0001 0010`（`18`）。我需要把这个`byte`/`int`分成

`0001 0000`( `16`) 和 `0000 0010`( `2`)。

我怎样才能在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:40:15.603

`&`是按位与。`-16`是`11110000`二进制的，`15`是`00001111`.

```
public static byte[] split(byte input) {
    byte[] output = new byte[2];

    output[0] = (byte) (input & -16);
    output[1] = (byte) (input & 15);

    return output;
} 
```

# wmi - 远程 WMI 方法权限

> ID：13475457
> 
> 赞同：0
> 
> 时间：2012-11-20T14:35:07.687
> 
> 标签：wmi

我们有一个使用 WMI 检测的应用程序，并添加了一个 WMI 方法，它是一个`ManagementTask`. 当我们尝试从另一个应用程序调用此管理任务时，该方法被调用得很好，但是在该执行线程中，我们正在尝试写入文件，向 SCM 发送命令，并执行调试日志记录。这三个项目都不会执行，因为它们似乎遇到了权限问题。

当我们尝试写入文件时，我们得到错误

> 未提供所需的模拟级别，或者提供的模拟级别无效。

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:27:32.880

艾尔，我感觉到你的痛苦。使用本机 WMI 方法写入文件的任何尝试都将失败，因为 WMI 无法执行此操作。但是，[Frank White 使用 C# 创建了一个解决方法，该解决方法在](https://stackoverflow.com/a/8913231/1569434)[VBS](https://stackoverflow.com/a/11948096/1569434)中得到了充实。这是他创造的那条神奇的线：

```
InputParameters("CommandLine") = "cmd /c echo myFTPCommands > c:\ftpscript.txt" 
```

完整描述请参考VBS方法，如有问题请回帖。是的，您需要设置 impersonationLevel，如 VBS 页面所示。

对于向单片机发送命令，这应该没有问题，因此请单独尝试以确保没有问题。对于调试日志，如果您要将文件写入远程系统，则必须使用上述解决方法。

# c++ - c++程序方法错误visual studio

> ID：13475460
> 
> 赞同：-1
> 
> 时间：2012-11-20T14:35:11.953
> 
> 标签：c++, visual-studio-2010, methods

好的，所以我制作了一个 C++ 程序，它有两种单独的方法来生成随机密码，另一种方法是让用户生成并验证它。但是我在方法和返回密码时遇到错误。我是 C++ 新手，所以如果有人可以的话，我很感激给我一些指示我犯错误的地方。我在声明方法时遇到了麻烦，因为我不确定它们是否带参数以及它们是否应该是 int 或其他。我收到以下错误：

> 错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数
> 
> 错误 C4244：'argument'：从 'time_t' 转换为 'unsigned int'，可能丢失数据
> 
> 错误 C2082：重新定义形式参数“str”
> 
> 错误 C2660：“countLetters”：函数不接受 6 个参数
> 
> 错误 C2110：“+”：无法添加两个指针
> 
> 错误 C2660：“countLetters”：函数不接受 6 个参数
> 
> 错误 C2110：“+”：无法添加两个指针
> 
> 警告 C4018：“<”：有符号/无符号不匹配

谢谢，

```
#include <stdlib.h>
#include <stdio.h>
#include <iostream>
#include <string>
#include <windows.h>
#include <ctime>
#include <string.h>

using namespace std;
#define MAX 80

//declaring functions
int showMenu();
int generatePass();
int validatePass();
int countLetters(char *, int *, int *, int *, int *);

main()
{
    int iChoice;
    // have menu appear, user makes decision, do work, reshow menu
    // do this until user enters 5

    do
    {
        iChoice = showMenu();
    }while(iChoice != 3);

    printf("\n\n\n");
    system("pause");
}        //end of main

//Methods placed here:

//showMenu method calls program menu,either 1.generate password,2.enter password and validate. or 3.exit(close program)
int showMenu() {
    int iChoice;
    system("cls");
    printf("\n\n\t\tWelcome to Password Generator and Validator\n\n");
    printf("\n\t\t1\. Generate");
    printf("\n\t\t2\. Validate");
    printf("\n\t\t3\. Exit");
    printf("\n\n\t\tEnter your menu choice: ");
    fflush(stdin);
    scanf("%d", &iChoice);

    // user enters one of 3 values
    // generate,validate or exit program

    switch (iChoice) {
    case 1:     // generate
    {
        generatePass();
        break;
    }
    case 2:     // validate
    {
        validatePass();
        break;
    }
    case 3:     // exit
    {
        printf("\n\nProgram exiting!...");
        break;
    }
    default: {
        break;
    }
    }     //end of switch

    return (iChoice);
} //end of showMenu

//method to generate a random password for user following password guidelines.  
string generatePass(string str) {
    char password[MAX + 1];
    int iChar, iUpper, iLower, iSymbol, iNumber, iTotal;

    printf("\n\n\t\tGenerate Password selected ");
    printf("\n\n\t\tPassword creation in progress... ");

    srand(time(0));
    string str =
            "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!£$%^&*()_+=#@;";
    int pos;

    iChar = countLetters(password, &iUpper, &iLower, &iSymbol, &iNumber,
            &iTotal);

    if (iUpper < 2) {
        printf("Not enough uppercase letters!!!\n");
    } else if (iLower < 2) {
        printf("Not enough lowercase letters!!!\n");
    } else if (iSymbol < 1) {
        printf("Not enough symbols!!!\n");
    } else if (iNumber < 2) {
        printf("Not enough numbers!!!\n");
    } else if (iTotal < 9 && iTotal > 15) {
        printf("Not enough characters!!!\n");
    }

    printf("\n\n\n Your new password is verified " + password);
    printf("\n\n\n");
    system("pause");
} //end of generatePass method.

//method to validate a user generated password following password guidelines.
int validatePass() {
    char password[MAX + 1];
    int iChar, iUpper, iLower, iSymbol, iNumber, iTotal;

    //shows user password guidelines
    printf("\n\n\t\tPassword rules: ");
    printf(
            "\n\n\t\t 1\. Passwords must be at least 9 characters long and less than 15 characters. ");
    printf("\n\n\t\t 2\. Passwords must have at least 2 numbers in them.");
    printf(
            "\n\n\t\t 3\. Passwords must have at least 2 uppercase letters and 2 lowercase letters in them.");
    printf(
            "\n\n\t\t 4\. Passwords must have at least 1 symbol in them (eg ?, $, £, %).");
    printf(
            "\n\n\t\t 5\. Passwords may not have small, common words in them eg hat, pow or ate.");
    //gets user password input
    printf("\n\n\t\tEnter your password following password rules: ");
    gets(password);

    iChar = countLetters(password, &iUpper, &iLower, &iSymbol, &iNumber,
            &iTotal);

    if (iUpper < 2) {
        printf("Not enough uppercase letters!!!\n");
    } else if (iLower < 2) {
        printf("Not enough lowercase letters!!!\n");
    } else if (iSymbol < 1) {
        printf("Not enough symbols!!!\n");
    } else if (iNumber < 2) {
        printf("Not enough numbers!!!\n");
    } else if (iTotal < 9 && iTotal > 15) {
        printf("Not enough characters!!!\n");
    }

    printf("\n\n\n Your new password is verified " + password);
    printf("\n\n\n");
    system("pause");

} //end validatePass method

int countLetters(char * Password, int * Upper, int * Lower, int * Symbol,
        int * Number) {
    int iTotal = 0, iC, tU = 0, tL = 0, tS = 0, tN = 0;

    //strlen- function that returns length
    for (iC = 0; iC < strlen(Password); iC++) {
        printf("%d", Password[iC]);
        //uppercase letters are in the range 65 - 90
        //lowercase letters are in the range 97 - 122
        //check upper case
        if ((Password[iC] < 64) && (Password[iC] < 91)) {
            tU++;
            iTotal++;
        } else if ((Password[iC] > 96) && (Password[iC] < 123)) {
            tL++;
            iTotal++;
        } else if ((Password[iC] > 32) && (Password[iC] < 48)) {
            tS++;
            iTotal++;
        } else if ((Password[iC] > 47) && (Password[iC] < 58)) {
            tN++;
            iTotal++;
        }

        *Upper = tU;/*set value at memory address = tU,passing by reference saves memory used.*/
        *Lower = tL;
        *Symbol = tS;
        *Number = tN;
    }            //end for statement

    return (iTotal);
}            //end of countLetters 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:58:59.023

除了@ahenderson 列出的错误：

```
printf("\n\n\n Your new password is verified " + password); 
```

您不能将 char[] 添加`password`到字符串文字中。请改用两个单独`printf`的 s。

```
printf("\n\n\n Your new password is verified ");
printf(password); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:55:09.440

**错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认输入**

1.  主要的（）

这应该是`int main()`

**错误 C2082：重新定义形式参数“str”**

1.  generatePass(字符串str)
2.  字符串 str ="01234..."

将变量名称之一更改为 str2

**错误 C2660：'countLetters'**

1.  int countLetters(char * Password, int * Upper, int * Lower, int * Symbol, int * Number) //取 5
2.  iChar = countLetters(密码, &iUpper, &iLower, &iSymbol, &iNumber, &iTotal); //给出 6

计算参数，它们不匹配

# android - 使用多点触控旋转对象

> ID：13475466
> 
> 赞同：0
> 
> 时间：2012-11-20T14:35:27.213
> 
> 标签：android, sprite, andengine

我是 andengine 甚至是 android 游戏开发的新手。我已经将精灵创建为一个盒子。这个框现在可以通过使用这个编码来拖动。它工作正常。

但我想要多点触控，我想在那个盒子里用两根手指旋转一个精灵，甚至它应该是可拖动的。....请帮助某人...

我正在尝试这很多天，但不知道。

```
 final float centerX = (CAMERA_WIDTH - this.mBox.getWidth()) / 2;

   final float centerY = (CAMERA_HEIGHT - this.mBox.getHeight()) / 2;
     Box= new Sprite(centerX, centerY, this.mBox,
            this.getVertexBufferObjectManager()) {

     public boolean onAreaTouched(TouchEvent pSceneTouchEvent,
                float pTouchAreaLocalX, float pTouchAreaLocalY) {
           this.setPosition(pSceneTouchEvent.getX() - this.getWidth()/ 2,
                           pSceneTouchEvent.getY() - this.getHeight() / 2);

             float pValueX = pSceneTouchEvent.getX();
            float pValueY = CAMERA_HEIGHT-pSceneTouchEvent.getY();

            float  dx = pValueX -  gun.getX();
            float  dy = pValueY -  gun.getY();

             double  Radius = Math.atan2(dy,dx);
             double Angle = Radius * 360 ;

                Box.setRotation((float)Math.toDegrees(Angle));
                 return true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T13:41:18.893

确保您在游戏中启用了多点触控。您可以在方法中使用[MultiTouchExample](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/MultiTouchExample.java)中使用的相同代码`onLoadEngine`。

该算法非常简单，类似于您在此处发布的内容。

1.  跟踪您在`onAreaTouched`方法中获得的最多 2 个指针 ID。（您可以通过调用获取指针ID `pSceneTouchEvent.getPointerID()`）。
2.  跟踪指针的状态（当前触摸/未触摸）和位置（`pTouchAreaLocalX`和`pTouchAreaLocalY`）。
3.  每当 2 个指针接触时（您都收到`ACTION_DOWN`了），保存初始角度。( `Math.tan2(pointer1Y - pointer2Y, pointer1X - pointer2X)`)。
4.  只要`ACTION_UP`不为指针调用，就在指针的每个`ACTION_MOVE`事件中更新新的角度，并获得角度增量 ( `delta = currentAngle - initialAngle`)。然后调用`setRotation(Math.toDegrees(delta))`。

要使精灵可以用 2 个指针拖动，您需要将精灵移动到每个指针移动的距离中的较小者。例如，如果：

```
pointer1.dX = 50;
pointer1.dY = -20;
pointer2.dX = 40;
pointer2.dY = -10; 
```

精灵应该在 X 轴上移动 +40 个单位，在 Y 轴上移动 -10 个单位。

# http - 在 Struts 2 中处理错误页面

> ID：13475468
> 
> 赞同：0
> 
> 时间：2012-11-20T14:35:33.950
> 
> 标签：http, exception, error-handling, struts2, struts

每当我输入 URL localhost:8443/context/anyname.anyextension 我得到状态 404（未找到）但是当我尝试类似 localhost:8443/context/anynameWithouthExtensions 时，似乎 Struts 2 试图映射到一个动作，然后我得到错误 500（内部服务器错误）。我不应该总是通过这两种方法获得状态 404 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:38:12.913

您可能使用了 `<default-action-ref`，它是对用于*该*名称空间的所有 UN 匹配请求的默认操作的引用。对于该命名空间，您有一些规则指定只处理没有扩展名的 URL。

看看这个：

文档：[http ://struts.apache.org/2.1.6/docs/action-configuration.html](http://struts.apache.org/2.1.6/docs/action-configuration.html)

```
<package name="Hello" extends="action-default">

    <default-action-ref name="UnderConstruction">

    <action name="UnderConstruction">
        <result>/UnderConstruction.jsp</result>
    </action> 
```

并最终发布您的配置。

如果是这种情况，我希望你得到 404 即使有

```
localhost:8443/context/SOME_INVENTED_PATH/anynameWithouthExtensions 
```

因为默认操作 ref 可能仅绑定到根。

并且默认操作会出错，当然......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:15:54.973

我相信这是 Struts 2 如何尝试将 URL 映射到操作的结果。当您提供“.anyextension”时，in 知道它不是有效的 Struts 2 操作，除非您要附加“.action”作为扩展名（这是 Struts 2 使用的默认扩展名）。任何其他的，它都知道这不是 Struts 2 调用。同样，我认为缺少扩展是 Struts 2 的默认设置，它会尝试查找操作，但由于没有有效操作而失败。

您可以通过将其添加到您的 struts.xml 来添加自定义扩展：

```
<constant name="struts.action.extension" value=",action,do" /> 
```

此外，您可以向 Struts 添加一些错误处理程序，以在有效操作的情况下返回 404 代码，但这将属于不同的问题。

谢谢，安迪

# sql - 重复行，不同的PK

> ID：13475470
> 
> 赞同：1
> 
> 时间：2012-11-20T14:35:41.477
> 
> 标签：sql, sql-server, distinct

我有这个查询：

```
SELECT pih.PID, piv.TSV, piv.Variable_ID, piv.Value_ID, piv.Manual_Value
FROM Process_Instance_Value AS piv
INNER JOIN Process_Instance_History AS pih ON piv.PID = pih.PID
WHERE piv.Variable_ID IN ( SELECT Variable_ID 
                           FROM someTable 
                           WHERE Transition_ID = @someValue) 
AND piv.PID = @someValue 
```

我明白了：

![在此处输入图像描述](../Images/6405b4f510515ce3f0fff7369c7d52ab.png)
我的问题是这些行是重复的，以供我此时使用。是否可以仅在 DISTINCT TSV 上获取行？或类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:38:07.860

你可以这样做：

```
;WITH CTE
AS
(
    SELECT 
      pih.PID, 
      piv.TSV, 
      piv.Variable_ID, 
      piv.Value_ID, 
      piv.Manual_Value,
      ROW_NUMBER() OVER (PARTITION BY piv.TSV ORDER BY pih.PID) rownum
    FROM Process_Instance_Value AS piv
    INNER JOIN Process_Instance_History AS pih ON piv.PID = pih.PID
    WHERE piv.Variable_ID IN ( SELECT Variable_ID 
                               FROM someTable 
                               WHERE Transition_ID = @someValue) 
    AND piv.PID = @someValue
)
SELECT *
FROM CTE
WHERE rownum = 1; 
```

**请注意：**如果您想要最大值，这将返回`pih.PID`每个不同的最小值，只需使用。`piv.TSV``ORDER BY pih.PID DESC`

**这是如何运作的：**

排名函数[**`ROW_NUMBER() OVER()`**](http://msdn.microsoft.com/en-us/library/ms186734.aspx)将为在 中列出的具有相同列的每个组提供一个排名编号`PARTITION BY`，在我们的例子`piv.TSV`中，对于每个组，这个排名编号将根据`ORDER BY`子句中定义的`OVER`子句进行排序，在我们的例子`ORDER BY pih.PID`中。我使用[**CTE**](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)而不是使用子查询。

然后我用`WHERE rownum = 1`了 ，因为`rownum`每组`piv.TSV`排名相同的记录都按照降序给出了排名号，那么带有的记录`rownum = 1`将是最小的记录`pih.PID`（想想看）。

但是，您可以使用内部联接获得相同的结果，`GROUP BY`如下所示：

```
 SELECT 
      pih.PID, 
      piv.TSV, 
      piv.Variable_ID, 
      piv.Value_ID, 
      piv.Manual_Value
    FROM Process_Instance_Value AS piv
    INNER JOIN
    (
        SELECT
          TSV, MIN(PID) MinPID
        FROM Process_Instance_Value 
        GROUP BY TSV
    ) piv2 ON piv.PID = piv2.MinPID
    INNER JOIN Process_Instance_History AS pih ON piv.PID = pih.PID
    WHERE piv.Variable_ID IN ( SELECT Variable_ID 
                               FROM someTable 
                               WHERE Transition_ID = @someValue) 
    AND piv.PID = @someValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:34:55.560

你想要

```
SELECT pih.PID,  piv.Variable_ID, piv.Value_ID, piv.Manual_Value
FROM Process_Instance_Value AS piv
INNER JOIN Process_Instance_History AS pih ON piv.PID = pih.PID
WHERE piv.Variable_ID IN ( SELECT Variable_ID 
                           FROM someTable 
                           WHERE Transition_ID = @someValue) 
AND piv.PID = @someValue
group by
pih.PID,  piv.Variable_ID, piv.Value_ID, piv.Manual_Value 
```

# performance - 边缘检测：任何性能评估技术？

> ID：13475473
> 
> 赞同：0
> 
> 时间：2012-11-20T14:35:59.990
> 
> 标签：performance, image-processing, edge-detection

我正在研究图像中的边缘检测，并想评估算法的性能，如果有人可以给我一个关于如何进行的参考或方法，那将非常有帮助。:)

我没有基本事实，数据集包括彩色和灰色图像。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:56:50.050

1.  创建具有已知边缘的合成数据集，例如通过 3D 渲染、通过使用精确蒙版合成 2D 图像（可在免版税照片集中获得）或直接引入边缘（细线/微弱线）。请记住添加一些看起来像边缘的混杂非边缘，其类型适合您正在调整的内容。

2.  使用您的（非合成）数据集。运行要比较的参考算法。还产生参考算法的组合，例如通过投票（多数，N 中至少 K 等）。计算您的算法与参考算法性能的统计数据，根据 (a) 您的算法分类为边缘的点数，每个参考算法或组合不分类为边缘（误报），或 (b) 点数参考算法将其分类为您的算法没有的边缘（假阴性）。您还可以通过查看每个点并查看哪些算法将（或不）分类为边缘来计算算法的等级相关类型数。

3.  手动创建基本事实。使用参考寻边算法作为起点，然后手动修复。无论如何，对于少量图像来说可能很有价值。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:49:36.430

对于比较，像我解释的@Alex 那样的定量测量是最好的。为此，您需要使用基本事实集定义什么是“正确的”，以及一种方法来始终如一地确定给定图像是否正确或更精细的水平，它的正确程度（例如百分比之类的数字）。@Alex我给了一个方法来做到这一点。

在没有基本事实的图形研究中经常使用的另一个选项是用户研究。通常不太理想，因为它们耗时且通常更昂贵。但是，如果您追求的是定性改进，或者定量测量太难做，那么用户研究是一个合适的解决方案。

当我指的是用户研究时，我的意思是就输入图像给出的结果对人们进行调查。你可以给他们一个等级来评价事物，并从你的结果和另一个算法的结果中随机给他们样本

当然，如果您仍然想要更多想法，请务必查看边缘检测论文以了解他们如何测量结果（实际上我会先看这里，因为他们已经经历了相同的过程并确定了最适合他们：[谷歌学者](http://scholar.google.com/scholar?hl=en&q=edge+detection&btnG=&as_sdt=1%2C45&as_sdtp=)）。

# php - PHP：为数据库格式化多个数组（laravel）

> ID：13475476
> 
> 赞同：1
> 
> 时间：2012-11-20T14:36:06.950
> 
> 标签：php, laravel

我有这个输入表单：（使用带有 Laravel 的刀片模板引擎，但是 html 应该很容易理解，并且最终是微不足道的）

```
{{ Form::text('amount[]', Input::old('amount')) }}
<?php echo Form::select('unit[]',
    array(
    'whole' => _('whole'),
    'ml'    => _('milliliter'),
    'l'     => _('liter'),
    'dl'    => _('deciliter'),
    'mg'    => _('milligram'),
    'g'     => _('gram'),
    'kg'    => _('kilogram'),
    'tsp'   => _('teaspoon'),
    'tbs'   => _('tablespoon'),
    )) ?>
{{ Form::text('ingredient[]', Input::old('ingredient')) }} 
```

我正在尝试将其格式化为我的数据库以将其以如下字符串返回：

```
<li><span>1</span> liter red wine</li> 
```

我正在考虑使它成为一种更简单的形式，并消除强制我的用户输入它的单位度量以实现灵活性，但我仍然必须将它全部压缩到我的数据库的一个表中。span 标签在 jQuery 中用于动态增加数字，因此是必需的。我已经断断续续地做了好几天了，但我无法破解如何做到这一点。

这是我的格式化逻辑：

```
$amount = Input::get('amount[]');
$unit = Input::get('unit[]');
$ingredient = Input::get('ingredient[]');

for ( $i = 0, $c = count(Input::get('ingredient[]')); $i < $c; $i++ ) 
{
    $ingredients .= '<li><span>'.$amount[$i].'</span>'.$unit[$i].' '.$ingredient[$i].'</li>';
} 
```

我发送它使用

```
$new = Recipe::create(array(
    'title' => Input::get('title'),
    'curiousity' => Input::get('curiousity'),
    'ingredients' => $ingredients,
    'steps' => Input::get('recipe')
)); 
```

我尝试了很多方法，但我得到了诸如 $ingredients 数组未定义或无法在变量中使用 [] 之类的错误。我尝试将变量定义为 '$ingredients = '';' 变量，但这只是产生了一个空字符串。我的问题一定出在逻辑上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:30:00.463

为简洁起见，在表单之外构建您的选择列表，以及（无论如何我都会这样做以保持控制器非常纤细）一次将输入全部发送到模型。

```
$input = Input::all();
$new = Recipe::create($input); 
```

为其他地方的成分构建数组。在模型中（也许？）：

```
$ingredients = array(
'dbname1' => 'displayname1',
'dbname2' => 'displayname2'
); 
```

并相应地显示它，然后表单输入应该与数组中的 $input 一起发送，您可以解析该数组，然后保存到您的数据库中。

有关 Blade 语法的其他说明。我不知道需要定义数组括号 []。

```
{{Form::open()}}
{{Form::label('label1','Display Label 1')}}
{{Form::text('fieldname1',Input::old('fieldname1'))}} 
```

已经构建了您的成分数组（您当前的语法将产生一个下拉列表，我假设您需要复选框）

```
{{Form::select('ingredientsFIELDNAME',$ingredients)}}
{{Form::close()}} 
```

在您的 Input::all() 数组中，如果您已将它构建为复选框而不是选择，那么您的 ingredientsFIELDNAME 字段名称将具有一个数组。希望这一切都有意义。

# java - 如何从 JBoss 中的 EJB 调用 JNI 代码

> ID：13475477
> 
> 赞同：3
> 
> 时间：2012-11-20T14:36:06.360
> 
> 标签：java, jboss, java-native-interface, ejb

我正在尝试从 EJB 调用本机 VOIP 库。然而，在

```
System.loadLibrary(...) 
```

JBoss 关闭：它说它收到了 ABRT 并关闭。

我知道 JCA，但我正在寻找更实用的解决方案。是否有从 EJB 调用 JNI 函数的（省力）方法？

（在 SLES 11 64 位上使用 JBoss EAP 6 + Java 6）

------> 感谢您提供有用的答案！我实现了一个小型外部 java 应用程序，它封装了 jni 的东西并提供了一个 web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:39:11.613

我已经有几年没有做过 EJB 了，但除非从那以后它发生了变化，否则 EJB 的限制之一就是你不能调用本机代码。

我是如何从 EJB 解决这个问题的，我可以调用 RMI 服务器，然后可以从那里进行 JNI 调用。

# mysql - MySQL 嵌套 SELECT 查询与无穷的孩子

> ID：13475479
> 
> 赞同：2
> 
> 时间：2012-11-20T14:36:10.190
> 
> 标签：mysql, sql, database, parent, parent-child

**我的数据库结构**

我从我的数据库开始。

**页表**

```
id    content
-------------
2     My content
4     Another content
7     Example content
8     Test content
11    Some content 
```

**父母表**

```
id    page_id    parent_id
--------------------------
1     2          0
2     4          2
3     7          2
4     8          7
5     11         8 
```

`parents_table.page_id`连接到`pages_table.id`。

**问题**

*   我可以使用 SQL 获取 page_id 11 并爬上该 id 的所有父母，直到我到达 parent_id 0 吗？
*   父母总数不详。

**也许是虚拟表？**

这是我能想到的，一个虚拟表。只是一个想法，可能不是正确的方法。

```
id    parent_id_1    parent_id_2    parent_id_3    parent_id_4    parent_id_5
-----------------------------------------------------------------------------
11    8              7              4              2              0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:17:07.500

它可能不[优雅](http://www.sqlsummit.com/AdjacencyList.htm)，但有一种聪明的方法可以在不使用“连接方式”的情况下解决问题 -[邻接列表模型](http://www.sitepoint.com/hierarchical-data-database/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:08:44.507

[使用MySql](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries003.htm)没有聪明而优雅的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:38:16.110

为什么不使用存储过程？

```
create table hier
(id int, page_id int, parent_id int);
insert into hier values
(1    , 2,          0),
(2   ,  4 ,         2),
(3  ,   7  ,        2),
(4 ,    8   ,       7),
(5,     11   ,      8);

drop procedure if exists getHier;
delimiter $$
create procedure getHier(start int)
begin

select @parent_id:=parent_id from hier where page_id = start;

drop table if exists result;
create temporary table result
(id int primary key auto_increment,
page_id int);

insert into result (page_id) values (@parent_id);

while @parent_id != 0 DO 
insert into result (page_id)
select @parent_id:=parent_id from hier where page_id = @parent_id;

end while;

select page_id from result order by id;
end $$
delimiter ; 
```

然后做

```
call getHier(11) 
```

结果：

```
page_id
8
7
2
0 
```

顺便说一句，您想要的输出是错误的；）

# asp.net - 将 CheckBox 值保存到 SQL 数据库表

> ID：13475481
> 
> 赞同：0
> 
> 时间：2012-11-20T14:36:15.880
> 
> 标签：asp.net, sql-server-2008

我在 ASP.NET 中有一个复选框值来保存到数据库。

现在 SQL Server 中的字段类型，我记得几年前使用布尔值，但在 SQL Server 2008 r2 下不存在。

现在用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:37:46.957

如果我让你正确的话.... bit 是你正在寻找的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:38:21.897

BIT 或 tinyint。它们在磁盘上占用相同的空间 - 1 个字节，位可以是 0 或 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:39:41.120

键入“Bit”就是您要查找的内容。

根据 MSDN：“一种整数数据类型，可以取值 1、0 或 NULL。”

使用值 1 表示真，0 表示假。

[MSDN 信息](http://msdn.microsoft.com/en-us/library/ms177603.aspx)

# iphone - 在windows7中部署iphone应用

> ID：13475482
> 
> 赞同：1
> 
> 时间：2012-11-20T14:36:22.083
> 
> 标签：iphone, ios

我有一个用 html 和 javascript 构建的应用程序，我想在 iphone 上进行测试。我有苹果开发者许可证。我如何将它从我的 windows 电脑获取到 iphone？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:53:50.577

其实是有办法的。请查看[该](http://support.brightcove.com/en/app-cloud/docs/step-step-guide-publishing-apple-app-store-using-windows)过程的分步指南。您也可以在[programmers.stackexchange.com上查看](https://softwareengineering.stackexchange.com/)[此](https://softwareengineering.stackexchange.com/questions/165644/is-there-a-way-to-publish-ios-app-from-windows-linux)问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:46:26.590

你需要买一台 Mac ......没有其他办法解决这个问题 :(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:48:52.250

一般来说，要为 iPhone 或 iOS 构建任何开发明智的东西，必须有一台 Mac。

但是，如果您需要测试的是 html 和 js，就像您提到的那样。看看这个用于谷歌浏览器的插件。

我以前用它来开发多平台网络应用程序。它还可以模拟加速度计和 gps。

[谷歌插件纹波模拟器](https://chrome.google.com/webstore/detail/ripple-emulator-beta/geelfhphabnejjhdalkjhgipohgpdnoc)

# mysql - MySQL GROUP BY 多列独占

> ID：13475487
> 
> 赞同：0
> 
> 时间：2012-11-20T14:36:51.520
> 
> 标签：mysql, sql

我在以下 MySQL 情况下遇到了一些问题。

我有以下表结构：

```
+----+---------+-----------------+------------------+--------------------------------------+------------+
| id |  author |    recipient    |        type      |                   data               |     date   |
+----+---------+-----------------+------------------+--------------------------------------+------------+
|  2 |    1    |        0        | added_item       | { "item_id": "18" }                  | 1352982623 |
| 11 |    1    |        7        | started_follow   |                                      | 1353030567 |
|  9 |    1    |        0        | added_collection | { "collection_id": "18" }            | 1352994561 |
| 12 |    7    |        1        | started_follow   |                                      | 1353030952 |
|  8 |    1    |        1        | started_follow   |                                      | 1352987839 |
| 14 |    1    |        0        | added_collection | { "collection_id": "19" }            | 1353056624 |
| 15 |    7    |        0        | added_collection | { "collection_id": "20" }            | 1353056731 |
| 16 |    1    |        7        | started_follow   |                                      | 1353057009 |
| 17 |    7    |        0        | added_item       | { "item_id": "21" }                  | 1353057054 |
| 24 |    2    |        0        | added_image      | { "image_id": "3", "item_id": "23" } | 1353419642 |
| 23 |    2    |        0        | added_item       | { "item_id": "23" }                  | 1353419159 |
| 22 |    2    |        0        | added_collection | { "collection_id": "22" }            | 1353419146 |
| 25 |    2    |        0        | added_image      | { "image_id": "4", "item_id": "23" } | 1353419644 |
| 26 |    2    |        0        | added_image      | { "image_id": "5", "item_id": "23" } | 1353419646 |
| 27 |    2    |        0        | added_collection | { "collection_id": "23" }            | 1353419953 |
| 28 |    2    |        0        | added_item       | { "item_id": "24" }                  | 1353419961 |
| 29 |    2    |        0        | added_image      | { "image_id": "6", "item_id": "24" } | 1353419982 |
| 30 |    2    |        0        | added_item       | { "item_id": "25" }                  | 1353420424 |
| 31 |    2    |        0        | added_image      | { "image_id": "7", "item_id": "25" } | 1353420435 |
+----+---------+-----------------+------------------+--------------------------------------+------------+ 
```

我想做的是在几秒钟内对所有故事进行分组，其中`author`和`type`字段相同。

这是我目前正在使用的查询，但这不会返回故事的所有实例，只是每个实例第一次`type`出现`users`：

```
SELECT  `activity`.`id` AS  `id` 
FROM  `activity` 
INNER JOIN  `user_privacy` ON  `user_privacy`.`user_id` =  `activity`.`author` 
WHERE (
`activity`.`author` =2
OR  `activity`.`recipient` =2
)
AND  `user_privacy`.`include_stream` =1
GROUP BY ROUND( UNIX_TIMESTAMP( DATE ) /300 ) ,  `type` 
ORDER BY  `activity`.`date` DESC 
LIMIT 300 
```

我在这里设置了一个 SQLFiddle 演示 > [http://sqlfiddle.com/#!2/2b5f4/1](http://sqlfiddle.com/#!2/2b5f4/1)。

鉴于上述数据和使用的查询，我想返回以下`id`s：

*   22
*   23
*   24
*   27
*   28
*   29
*   30
*   31

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:10:22.097

也许您误认为 UNIX_TIMESTAMP 和 FROM_UNIXTIME。只需更换它，您想要的结果集就在那里。 [在这里摆弄](http://sqlfiddle.com/#!2/2b5f4/39)

# jquery - MVC jquery datepicker dateformat 仅在使用后才设置

> ID：13475490
> 
> 赞同：4
> 
> 时间：2012-11-20T14:36:57.200
> 
> 标签：jquery, asp.net-mvc-3, datetimepicker

我有以下迄今为止工作正常的日期选择器：

```
$('.tmmdatepicker').datepicker({ showOn: "button",
                buttonImage: "../Content/images/ico-calendar.png",
                buttonImageOnly: true,
                dateFormat: "d M, yy",
                showAnim: "fadeIn",
                autosize:true
            }); 
```

这是剃刀视图：

```
<tr>
    <td>Start date:</td>
    <td> @Html.EditorFor(m => m.CurrentFilter.StartTime, 
        new { @class = "tmmdatepicker" , @style = "width:80px" })
   </td> 
```

到目前为止它运行良好，但是第一次加载视图时，时间不会以给定格式（d M，yy）格式化，只有在我使用一次 datetimepicker 之后，EditorFor 的内容才会更新为规则。

所以，当我第一次进入网站时：

![(http://i.imgur.com/nAm56.png)](../Images/19a12f6f73822a97ea8afbf26dc809c4.png)

在我使用按钮选择日期之后：

![在此处输入图像描述](../Images/07f8804b51ef55c451c02c70c148007a.png)<--- 这就是我想在一开始看到它的方式。

那么，有没有办法在一开始就加载这种行为？（对不起，我不能包含图片的直接链接）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:33:56.647

您可以使用 EditorTemplates。

`~/Views/Shared/EditorTemplates/DateTime.cshtml`使用以下代码创建文件：

```
@model DateTime?
@Html.TextBox("", (Model.HasValue ? Model.Value.ToString("dd MMM, yyyy") : string.Empty)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:30:52.983

问题是您在客户端指定日期时间格式，并且似乎完全忘记了服务器上发生的事情。首次加载视图时，值由 asp.net 视图引擎呈现，该引擎使用项目的当前 UI 文化信息将日期转换为字符串。您可以更改整个项目的文化或为 DateTime 类型创建编辑器模板，如答案之一中已建议的那样。

# visual-studio-2010 - VS2008构建的dll可以使用VS2010构建的dll吗

> ID：13475493
> 
> 赞同：3
> 
> 时间：2012-11-20T14:37:05.437
> 
> 标签：visual-studio-2010, visual-studio-2008, com, mixing

我有一个用 VS2010 构建的 dll（DLL A），它使用 MFC 和其他用 VS2010 构建的 dll。我有另一个使用 VS2008 构建的 dll (DLL B)，并在再次使用 VS2008 构建的应用程序上运行。DLL A 导入 DLLB（使用#import 指令）并创建 com 对象。对象本身的创建成功，但是应用程序在某处崩溃。我认为它在显示控件时崩溃（这些只是假设）。问题是我没有应用程序的源代码。DLL A 只是该应用程序的一个插件。问题是，在做这种混合时有什么需要考虑的吗？有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:46:36.213

*是的，如果*您使用 C 链接，那么跨 DLL 边界调用代码应该没问题，即。如果 DLL 边界使用原始 C 类型，如 char* 和 int。如果您要跨 DLL 边界传递 C++ 引用/指针，那么您真的应该使用相同的编译器标志和相同的编译器来构建双方。例如，不能保证 VS2010 编译器会以与 VS2008 编译器完全相同的方式为类对象布局内存 尽管如果使用相同的字节对齐标志，布局很可能是相同的，但您不能保证.

# actionscript-3 - Flash Builder - 导入 SWC 并使用按钮？

> ID：13475509
> 
> 赞同：0
> 
> 时间：2012-11-20T14:37:54.053
> 
> 标签：actionscript-3, flash, actionscript, flash-builder, flash-cs6

我可以将 SWC 放入我的项目中，并且可以看到它包含的各种按钮，但是.. 我似乎无法将它们放入我的自定义类中。

我认为这可能是答案，但我不知道如何格式化必要的导入语句：[Flash Builder - How to build or include an SWC](https://stackoverflow.com/questions/6333506/flash-builder-how-to-build-or-include-an-swc)

一张图片来证明我在说什么。 ![在此处输入图像描述](../Images/0cb132cb2ea8d45bfa97b4249f29ab0d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:14:02.970

我找到了我的答案[http://forums.adobe.com/thread/864992](http://forums.adobe.com/thread/864992)

这是一件简单的事情，我正在查看只需要公共声明的对象。

# php - php和mysql的问题

> ID：13475510
> 
> 赞同：2
> 
> 时间：2012-11-20T14:37:57.767
> 
> 标签：php, mysql

从以下条件检索数据时出现问题：

表**用户**（id、用户名、名字、姓氏、用户类型、状态）；

```
----------------------------------
|1 | bsmith | Bob | Smith | 1 | 1|
---------------------------------- 
```

表**USER_TYPE**（代码、描述）

```
-----------
|1 | admin|
|2 | guest|
----------- 
```

表**STATUS_TYPE**（id，描述）

```
-------------
|1 | active |
|2 | suspend|
------------- 
```

然后我使用以下 SQL 查询：

```
$sql = "SELECT u.id uid, username, last_name, first_name,
      status, t.description status_desc, user_type, w.description type_desc  
      FROM users u 
      LEFT JOIN status_type t ON u.status = t.id
      LEFT JOIN user_type w ON u.user_type = w.code
      "; 
```

当我执行上述 sql 语句时，它不会通过 PHP 返回任何数据。但它适用于 mySQL 命令行客户端。

此外，如果我只使用 PHP 进行左连接，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:32:20.730

好的，您似乎更正了 status_type / user_status 问题。还有这些

同样在您的查询中，您有：

```
FROM users u 
```

再次在原始描述中说表名是用户而不是用户。

还有更多错别字：

```
LEFT JOIN status_type t ON u.status = t.code
LEFT JOIN user_type w ON u.user_type = w.id 
```

user_type 的 code 不是 id，status_type 的 id 不是 code，应该是：

```
LEFT JOIN status_type t ON u.status = t.id
LEFT JOIN user_type w ON u.user_type = w.code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:27:46.193

您要么在“u.id”之后缺少逗号，要么在 u.id 之后缺少 AS：

```
SELECT u.id, uid, ... 
```

或（更有可能）：

```
SELECT u.id AS uid, ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:31:59.943

如果你把它放在你的 PHP 文件中并把输出放在这里怎么办：

```
$sql = ''; //USE THE STRING IN YOU'RE POST ABOVE
$query = mysql_query($sql); 
$result = mysql_fetch_object($query); 

echo '----' . "<br/>";
echo 'the result:' . "<br/>";  
print_r($result, true) . "<br/>"; 
echo '----' . "<br/>";
echo 'the error' . "<br/>";
echo mysql_error() . "<br/>"; 
echo '-----' . "<br/>"; 
```

* * *

你可以用这个替换你自己的查询（不要忘记评论它）：

```
SELECT
     `user`.`id` AS 'uid',
     `user`.`username`, 
     `user`.`last_name`,
     `user`.`first_name`,
     `user`.`status`,
     `user`.`user_type` AS 'type',
     `status_type`.`desciption` AS 'type_desc',
     `user_type`.`description` AS 'status_desc'
FROM `users` 
LEFT JOIN `status_type` ON `status_type`.`id` = `user`.`status`
LEFT JOIN `user_type` ON `user_type`.`code` = `user`.`user_type` 
```

# javascript - 在javascript中汇总html行的内容

> ID：13475522
> 
> 赞同：1
> 
> 时间：2012-11-20T14:38:26.297
> 
> 标签：javascript, html, html-table

我有一个有 20 行的表格，我希望他们的行在页面加载 1 分钟后上升（跳过第一行）。

前任：

*   最初的

第 1 行 第 2 行 第 3 行

*   第一节

第 2 行 第 3 行 第 1 行

*   第二状态

第 3 行 第 1 行 第 2 行

*   最后一步

第 1 行 第 2 行 第 3 行

我正在做这样的事情，但我不知道如何替换行的内容。如果可能的话，慢慢做（渐进会很好，但现在很重要）

```
function roll()
 {     
    var oRows = document.getElementById('ultNot').getElementsByTagName('tr');
    var iRowCount = oRows.length;
    //repeat this iRowCount-1?
    for (i=iRowCount; i=2;;i--){
        var tempRow= oRows[i];
        var origRow;
        if (i=rowCount) {
            origRow=oRows[1];
        } else {
            origRow=cRows[i-1];
        }    
         var tempContent=origRow;
         //replace the contents of the rows
    }
 } 
```

非常感谢您的帮助

* * *

谢谢Razvan，这成功了。完成我想要的整个代码（即在 40 秒后滚动完整的行组 1 次）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
</head>
<body>
  <table id="ultNot" style="border: 1">
    <tbody>
      <tr>
        <td>First row</td>
      </tr>
      <tr>
        <td>Second row</td>
      </tr>
      <tr>
        <td>Third row</td>
      </tr>
      <tr>
        <td>Fourth row</td>
      </tr>
      <tr>
        <td>Fifth row</td>
      </tr>
    </tbody>
  </table>
  <input type="button" onclick="iniciaScroll()" value="Click" />
  <script type="text/javascript">
    window.setTimeout(function() {
        iniciaScroll();
        ;
    }, 40000);
  </script>
  <script type="text/javascript">
    var interval;
    var cont = 0;
    var sizeTable = document.getElementById('ultNot').rows.length;
    function roll() {
        var table = document.getElementById('ultNot');
        var rows = table.rows;
        var firstRow = rows[1];
        var clone = firstRow.cloneNode(true);
        table.tBodies[0].appendChild(clone);
        table.tBodies[0].removeChild(firstRow);
        cont++;
        if (cont == (sizeTable - 1)) {
            clearInterval(interval);
            cont = 0;
        }
    }
    function iniciaScroll() {

        interval = window.setInterval(function() {
            roll();
        }, 3000);
    }
  </script>
  <!-- end: portal_latestthreads -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:36:29.280

可能有更好的方法，但这是我到目前为止所能想到的:)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <script type="text/javascript">
    function roll() {
      var table = document.getElementById('myTable');
      var rows = table.rows;
      var firstRow = rows[0];
      var clone = firstRow.cloneNode(true);
      table.tBodies[0].appendChild(clone);
      table.tBodies[0].removeChild(firstRow);
    }
  </script>
</head>
<body>
  <table id="myTable" style="border: 1">
    <tbody>
      <tr><td>First row</td></tr>
      <tr><td>Second row</td></tr>
      <tr><td>Third row</td></tr>
      <tr><td>Fourth row</td></tr>
      <tr><td>Fifth row</td></tr>
    </tbody>
  </table>
  <input type="button" onclick="roll()" value="Click"/>
</body>
</html> 
```

# delphi - 为什么我在未初始化的函数结果上调用方法时不会出现访问冲突？

> ID：13475523
> 
> 赞同：11
> 
> 时间：2012-11-20T14:38:28.293
> 
> 标签：delphi, delphi-xe

我的一位同事向我展示了一个用 Delphi-XE XE 版本 15.0.3953.35171 编写的代码，我认为它应该会引发访问冲突。代码如下：

```
unit Unit3;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type
  TForm3 = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
   function test:TstringList;
    { Public declarations }
  end;

var
  Form3: TForm3;

implementation

{$R *.dfm}

procedure TForm3.FormCreate(Sender: TObject);
var aStrList : TStringList;
begin
 aStrList := TStringList.Create;
 test;
 FreeAndNil(aStrList);
end;

function TForm3.test: TstringList;
var i:Integer;
begin
 for i:=0 to 1000 do
  Result.Add('aaa');//AV?
end;

end. 
```

检查 aStrList 和 Result 有以下结果：

```
aStrList: TStringList $12FEDC : $42138A

Result: TStringList $12FEC4 : $B01B90 
```

我不明白它为什么起作用。Result.Add 应该引发访问冲突

LE：它似乎只适用于调试构建配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T19:30:07.790

该`Result`函数中的变量尚未初始化，可以保存任何值。现在，实现细节意味着，在某些编译器选项组合中，您的代码恰好在`Result`引用有效对象的情况下运行。但这实际上只是那些实现细节的巧合。

如果这是 C++，那么该函数将表现出*未定义的行为*。尽管该术语在 Delphi 中没有正式含义，但在 Delphi 环境中使用该术语来表示与 C++ 上下文中相同的含义会很有帮助。

我还要指出，即使`Result`没有引用有效的字符串列表对象，也不能保证您的代码会引发访问冲突。它可能`Result`指向一块内存，恰好看起来像一个字符串列表，以便该代码成功执行。

如果你做事正确，你可以预测你的程序的行为。如果您的代码有缺陷并导致未定义的行为，那么您的程序的行为将变得不可预测。它可能会起作用。它可能会失败。或者该代码可能执行得很好，但随后会在程序执行的后期导致失败。等等。

# asp.net - Oracle SQL 更新从 .NET 作为参数（到存储过程）字符串传递

> ID：13475524
> 
> 赞同：1
> 
> 时间：2012-11-20T14:38:29.383
> 
> 标签：asp.net, sql, oracle, sql-update

我想知道如何完成这项任务。我查看了 CASE、DECODE 或 IF 条件，但无法使其正常工作。我的目标是将一个从 ASP.NET 数据构造的预定义列/值对块传递给我的 Oracle 存储过程。我试图只更新许多列中的某些列，以保留不需要更新的其他列。所以这是我的设置：

存储过程：

```
UpdateSelectedColumns(myValuePairString, updatedBy)

-- Passed variable from ASP.NET, myValuePairString = 'col1 = 10,col2 = 'Dog''

-- update statement final
UPDATE MyTable   
       SET
       col1 = 10,
       col2 = 'Dog'
       col3 = 'john';
COMMIT; 
```

先感谢您...

瑞奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:03:22.403

这一次我会建议不要使用存储过程。在这里使用存储过程没有意义。

因为它是你的存储过程会盲目地接受它的参数并执行更新而不添加任何值。此外，通过使用此过程，您可以避免使用绑定并将自己暴露于错误（每当您遇到带引号的值时`'`）、性能损失和 SQL 注入漏洞。

如果您将任意字符串作为参数并将其放入动态游标中，那么 PL/SQL 的优势（简单的透明绑定、游标的透明使用和重用、严格的静态 SQL 解析和元数据依赖）都毫无意义。

您最好使用您的语言本地游标并使用绑定变量。

如果您真的想使用 PL/SQL，请将您的单个参数替换为几个表。一个用于列名，一个用于变量值。然后，您可以使用[`DBMS_SQL`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_sql.htm#BABEDAHF)来解析语句并使用适当的绑定变量。您需要一些约定才能解析日期、数字和字符值。您需要从数据库中读取元数据以检查数据类型。这将是很多代码，没有一点价值。

# javascript - Sound Cloud 的 Javascript 接口

> ID：13475530
> 
> 赞同：1
> 
> 时间：2012-11-20T14:38:44.417
> 
> 标签：javascript, sdk, soundcloud

我正在为想要在他的网站上拥有一个声音云播放器的人构建一个网站，但希望它被皮肤化以看起来集成到该网站中。For the moment, I am using a script which will create an iframe element within a hidden div (which auto plays), and when a new item is selected to play, it clears the div, and replaces it with a new iframe element.

不过，该项目的下一阶段需要更多的集成。我一直在寻找 javascript 声音云集成，但它似乎提供的只是创建一个简单的链接，该链接将播放和暂停曲目（仅在用户请求时），使用一点 javascript 来哄它立即播放。

是否有任何其他通过 javascript 实现的声音云集成，允许播放、暂停、停止和获取有关当前播放位置（如来自事件）以及其他事件（如 onstart、onstop、onpositionchange 等）的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:45:44.067

啊哈，找到答案了。看看：http: [//developers.soundcloud.com/docs/api/sdks#javascript](http://developers.soundcloud.com/docs/api/sdks#javascript)

`SC.stream`似乎提供了所有的答案

# sed - 将未包含在双引号中的每个逗号替换为“|”

> ID：13475535
> 
> 赞同：8
> 
> 时间：2012-11-20T14:38:48.920
> 
> 标签：在sed, awk, , sed, awk

我想用'|'替换没有包含在双引号中的每个逗号 [在sed](/questions/tagged/sed "show questions tagged 'sed'")中使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")模式匹配。

例如，给定以下输入：

```
A,B,"C,D",E,"F,G",H,"I,J,K"
"Chang, Yao-Jen",33,MIS,"Taiwan, Taipei",M 
```

这是所需的输出：

```
A|B|"C,D"|E|"F,G"|H|"I,J,K"
"Chang, Yao-Jen"|33|MIS|"Taiwan, Taipei"|M 
```

我希望在不使用硬编码的情况下完成此操作，例如：

```
sed '2s/33,MIS/33|MIS|/' file. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T14:54:20.183

第一个样本：又快又脏：

如果您的逗号总是后跟文本字符串中的空格，并且从不在字段分隔中，您可以使用：

```
sed -e 's/,\([^ ]\)/\|\1/g'
"Chang, Yao-Jen"|33|MIS|"Taiwan, Taipei"|M 
```

但你必须*确定*下*一个字符*。

更精致的样品，无需空间，最接近您的原始想法。

```
sed -e ':a;s/^\(\("[^"]*"\|[^",]*\)*\),/\1|/;ta'

echo '"Chang, Yao-Jen",33,MIS,"Taiwan, Taipei",M' |
  sed -e ':a;s/^\(\("[^"]*"\|[^",]*\)*\),/\1|/;ta'
"Chang, Yao-Jen"|33|MIS|"Taiwan, Taipei"|M

echo '"Chang,Yao-Jen",33,MIS,"Taiwan,Taipei",M' |
  sed -e '1 { :a;s/^\(\("[^"]*"\|[^",]*\)*\),/\1|/;ta }'
"Chang,Yao-Jen"|33|MIS|"Taiwan,Taipei"|M 
```

解释：

```
sed -e '
    :a
    s/^\(\("[^"]*"\|[^",]*\)*\),/\1|/
    ta
' 
```

*   `:a`是分支（循环）的地址位置
*   `s/`从行首搜索 '[^",]*,' 或 '"...",' 而不是用 vbar 替换逗号。
*   `ta``s/`如果先前已匹配，则分支到 a 。

由于您要求在*第 2 行*进行操作，您必须：

```
sed -e '2 { :a; s/^\(\("[^"]*"\|[^",]*\)*\),/\1|/; ta } ' 
```

**编辑：** [错了！见*编辑 3* ]

如果您想要混合引号和双引号，则为另一个示例：

有一个示例包含混合引用、未引用和一个 **包含引号但双引号的**字段：

```
cat <<eof >sample
A,B,"C,D",E,"F,G",H,"I,J,K"
"Chang, Yao-Jen",33,MIS,"Taiwan, Taipei",M
A,B,'C,D',E,'F,G',H,'I,J,K'
'Chang, Yao-Jen',33,MIS,'Taiwan, Taipei',M
"Chang, Yao-Jen",33,MIS,"Taiwan, Taipei",M,'Chang,Yao-Jen',34,MZZ,'Taiwan, Taipei',Z
"Chang's son: Yao-Lu",55,MAA,'Taiwan, too',z
eof

sed -e ':a;s/^\(\(\(['\''"]\)[^\3]*\3\|[^",'\'']*\)*\),/\1|/;ta' sample
A|B|"C,D"|E|"F,G"|H|"I,J,K"
"Chang, Yao-Jen"|33|MIS|"Taiwan, Taipei"|M
A|B|'C,D'|E|'F,G'|H|'I,J,K'
'Chang, Yao-Jen'|33|MIS|'Taiwan, Taipei'|M
"Chang, Yao-Jen"|33|MIS|"Taiwan, Taipei"|M|'Chang,Yao-Jen'|34|MZZ|'Taiwan, Taipei'|Z
"Chang's son: Yao-Lu"|55|MAA|'Taiwan, too'|z 
```

其中 sed 脚本可以限制在一个更具可读性的脚本文件中：

```
cat <<oesedscript >csvtopsv.sed 
#!/bin/sed -f 
# Coma Separated Values to Pipe Separated Values
:a
s/^\(\(\(['"]\)[^\3]*\3\|[^",']*\)*\),/\1|/;
ta
oesedscript
chmod +x csvtopsv.sed

./csvtopsv.sed sample
A|B|"C,D"|E|"F|G"|H|"I|J|K"
"Chang, Yao-Jen"|33|MIS|"Taiwan, Taipei"|M
A|B|'C,D'|E|'F|G'|H|'I|J|K'
'Chang, Yao-Jen'|33|MIS|'Taiwan, Taipei'|M
"Chang, Yao-Jen"|33|MIS|"Taiwan, Taipei"|M|'Chang,Yao-Jen'|34|MZZ|'Taiwan, Taipei'|Z
"Chang's son: Yao-Lu"|55|MAA|'Taiwan, too'|z 
```

**解释：**

`s/`搜索引号或双引号作为第三个封闭的`['"]`正则表达式部分，后跟 0 个或更多*其他字符，而不是数学第三个封闭部分*，最后跟一个与第三个正则表达式部分相同的第二个字符......或者没有逗号，单引号或双引号`[,'"]`.. .

**编辑 3**警告！这是**错误的！**：

~~所以正确的答案似乎肯定是这样的：~~

```
sed -e ':a;s/^\(\(\(['\''"]\)[^\3]*\3\|[^",'\'']*\)*\),/\1|/;ta' 
```

`;L`您可以在添加调试之前看到我的错误`ta`：

```
sed -e ':a;s/^\(\(\(['\''"]\)[^\3]*\3\|[^",'\'']*\)*\),/\1|/;L;ta' 
```

在哪里

```
echo '1,"John Doe","6, rue Peuh",236,"B,-,F,H,P,-",-55' |
  sed -e ':a;s/^\(\("[^"]*"\|'\''[^'\'']*'\''\|[^",'\'']*\)*\),/\1#/;L;ta'
1#"John Doe","6, rue Peuh",236,"B,-,F,H,P,-",-55
1#"John Doe"#"6, rue Peuh",236,"B,-,F,H,P,-",-55
1#"John Doe"#"6, rue Peuh"#236,"B,-,F,H,P,-",-55
1#"John Doe"#"6, rue Peuh"#236#"B,-,F,H,P,-",-55
1#"John Doe"#"6, rue Peuh"#236#"B,-,F,H,P,-"#-55
1#"John Doe"#"6, rue Peuh"#236#"B,-,F,H,P,-"#-55
1#"John Doe"#"6, rue Peuh"#236#"B,-,F,H,P,-"#-55 
```

我们可以看到这并不那么简单......`[^\3]`不要给出预期的效果，而是匹配*not char`3`*。

最后，我们必须自己搜索每个分隔符：

```
:a;
s/^\(\("[^"]*"\|'[^']*'\|[^",']*\)*\),/\1\t/;
ta 
```

**注意：**从那里开始，我将以逗号形式呈现`csv2tsv`到*制表符分隔值*，如果您真的更喜欢使用`|`管道作为分隔符，您可以替换`\t`为`|`或任何您想要的字符。

命令行不那么性感：

```
echo '1,"John Doe","6, rue Peuh",236,"B,-,F,H,P,-",-55' |
  sed -e ':a;s/^\(\("[^"]*"\|'\''[^'\'']*'\''\|[^",'\'']*\)*\),/\1\t/;L;ta' 
1       "John Doe","6, rue Peuh",236,"B,-,F,H,P,-",-55
1       "John Doe"      "6, rue Peuh",236,"B,-,F,H,P,-",-55
1       "John Doe"      "6, rue Peuh"   236,"B,-,F,H,P,-",-55
1       "John Doe"      "6, rue Peuh"   236     "B,-,F,H,P,-",-55
1       "John Doe"      "6, rue Peuh"   236     "B,-,F,H,P,-"   -55
1       "John Doe"      "6, rue Peuh"   236     "B,-,F,H,P,-"   -55
1   "John Doe"      "6, rue Peuh"   236     "B,-,F,H,P,-"   -55 
```

但这符合需要。

```
echo '1,"John Doe","6, rue Peuh",236,"B,-,F,H,P,-",-55' |
  sed -e ':a;s/^\(\("[^"]*"\|'\''[^'\'']*'\''\|[^",'\'']*\)*\),/\1\t/;ta' 
1       "John Doe"      "6, rue Peuh"   236     "B,-,F,H,P,-"   -55 
```

很好，创建***sedscript***：

```
cat >csv2tsv.sed <<eof
#!/bin/sed -f
# Coma separated values to Tab separated values

:a
s/^\(\("[^"]*"\|'[^']*'\|[^",']*\)*\),/\1\t/;
ta
eof

chmod +x csv2tsv.sed 
```

现在：

```
cat >file.csv <<eof
A,B,"C,D",E,"F,G",H,"I,J,K"
"Chang, Yao-Jen",33,MIS,"Taiwan, Taipei",M
1,"John Doe","6, rue Peuh",236,"B,-,F,H,P,-",-55
4,"hacker's string",'one quote: "I have no special talents. I am only passionat\
ely curious." - Albert Einstein',unquoted string,9,1,1,3
eof

./csv2tsv.sed file.csv 
A   B       "C,D"   E      "F,G"    H    "I,J,K"
"Chang, Yao-Jen"    33     MIS      "Taiwan, Taipei"        M
1   "John Doe"      "6, rue Peuh"   236  "B,-,F,H,P,-"      -55
4   "hacker's string"      'one quote: "I have no special talents. I am only pa
ssionately curious." - Albert Einstein' unquoted string 9  1    1       3 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T15:43:51.603

这是使用`GNU awk`和[`FPAT`](http://www.gnu.org/software/gawk/manual/html_node/Splitting-By-Content.html)变量的一种方法：

```
awk 'BEGIN { FPAT="([^,]+)|(\"[^\"]+\")"; OFS="|" } $1=$1' file 
```

结果：

```
A|B|"C,D"|E|"F,G"|H|"I,J,K"
"Chang, Yao-Jen"|33|MIS|"Taiwan, Taipei"|M 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-21T16:59:30.443

```
$ awk 'BEGIN{FS=OFS="\""} {for (i=1;i<=NF;i+=2) gsub(/,/,"|",$i)}1' file
A|B|"C,D"|E|"F,G"|H|"I,J,K"
"Chang, Yao-Jen"|33|MIS|"Taiwan, Taipei"|M 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T17:01:03.660

除非这是关于 sed 的学习练习，否则我会使用带有适当 CSV 解析器的语言，例如：

```
ruby -rcsv -ne '
    puts CSV.generate_line(CSV.parse_line($_), {:col_sep => "|"})
' filename 
```

输出

```
A|B|C,D|E|F,G|H|I,J,K
Chang, Yao-Jen|33|MIS|Taiwan, Taipei|M 
```

引号消失了。这是因为没有需要引用的“内部”分隔符。如果输入中出现了一些管道，那么您将在输出中看到一些双引号字段。

# java - 使用spring mvc在按钮单击时在表上添加行并将添加的行绑定到modelAttribute

> ID：13475536
> 
> 赞同：11
> 
> 时间：2012-11-20T14:38:52.293
> 
> 标签：java, jquery, spring, jsp, spring-mvc

我有一个表，我从我的 spring 控制器方法传递学生对象列表，在页面加载时填充 3 行。我希望用户能够在单击按钮时添加更多行删除现有行。谁能告诉我如何实现这一目标。请参阅下面我的控制器和 jsp 代码。单击添加时，我想再添加 3 行选择复选框并单击删除行应该删除该行。我希望绑定添加的列

我对 jQuery 很陌生，如果没有 jQuery，这可能吗？如果没有，请详细告诉我如何使用 jQuery 实现这一点

![我的桌子快照](../Images/2814195119314dfd54ad767f1182d7db.png)

学生实体

```
@Entity
@Table(name="STUDENT_REGISTRATION")
public class Student {

    private int studentId;
    private String firstName;
    private String lastName;
    private Date dob;
    private String sex;
    private String status;
    private Date doj;
    private int deptId;
    private String deptName;
    private int batchId;
    private String batchName;
    private int roleId;
    private String roleName;
    private String regNo;
    public Student(){

    }

    public Student(int studentId, String firstName, String lastName, Date dob,
            String sex, String status, Date doj, int deptId,
            String deptName, int batchId, String batchName, int roleId,
            String roleName, String regNo) {
        super();
        this.studentId = studentId;
        this.firstName = firstName;
        this.lastName = lastName;
        this.dob = dob;
        this.sex = sex;
        this.status = status;
        this.doj = doj;
        this.deptId = deptId;
        this.deptName = deptName;
        this.batchId = batchId;
        this.batchName = batchName;
        this.roleId = roleId;
        this.roleName = roleName;
        this.regNo = regNo;
    }

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name="STUDENT_ID")
    public int getStudentId() {
        return studentId;
    }

    public void setStudentId(int studentId) {
        this.studentId = studentId;
    }
    @Column(name="STUDENT_FIRST_NAME")
    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
    @Column(name="STUDENT_LAST_NAME")
    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
    @Column(name="DOB")
    public Date getDob() {
        return dob;
    }

    public void setDob(Date dob) {
        this.dob = dob;
    }
    @Column(name="SEX")
    public String getSex() {
        return sex;
    }

    public void setSex(String sex) {
        this.sex = sex;
    }
    @Column(name="STATUS")
    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }
    @Column(name="DOJ")
    public Date getDoj() {
        return doj;
    }

    public void setDoj(Date doj) {
        this.doj = doj;
    }

    @Column(name="DEPT_ID")
    public int getDeptId() {
        return deptId;
    }

    public void setDeptId(int deptId) {
        this.deptId = deptId;
    }
    @Column(name="DEPT_NAME")
    public String getDeptName() {
        return deptName;
    }

    public void setDeptName(String deptName) {
        this.deptName = deptName;
    }
    @Column(name="BATCH_ID")
    public int getBatchId() {
        return batchId;
    }

    public void setBatchId(int batchId) {
        this.batchId = batchId;
    }
    @Column(name="BATCH_NAME")
    public String getBatchName() {
        return batchName;
    }

    public void setBatchName(String batchName) {
        this.batchName = batchName;
    }
    @Column(name="ROLE_ID")
    public int getRoleId() {
        return roleId;
    }

    public void setRoleId(int roleId) {
        this.roleId = roleId;
    }
    @Column(name="ROLE_NAME")
    public String getRoleName() {
        return roleName;
    }

    public void setRoleName(String roleName) {
        this.roleName = roleName;
    }

    @Column(name="REG_NO")
    public String getRegNo() {
        return regNo;
    }

    public void setRegNo(String regNo) {
        this.regNo = regNo;
    }

} 
```

学生 DTO

```
public class StudentDTO {

    private int studentId;
    private String firstName;
    private String lastName;
    private Date dob;
    private String sex;
    private String status;
    private Date doj;
    private int deptId;
    private String deptName;
    private int batchId;
    private String batchName;
    private int roleId;
    private String roleName;
    boolean select;
    private String regNo;

    public StudentDTO(){

    }

    public StudentDTO(int studentId, String firstName, String lastName,
            Date dob, String sex, String status, Date doj, int deptId,
            String deptName, int batchId, String batchName, int roleId,
            String roleName, boolean select, String regNo) {
        super();
        this.studentId = studentId;
        this.firstName = firstName;
        this.lastName = lastName;
        this.dob = dob;
        this.sex = sex;
        this.status = status;
        this.doj = doj;
        this.deptId = deptId;
        this.deptName = deptName;
        this.batchId = batchId;
        this.batchName = batchName;
        this.roleId = roleId;
        this.roleName = roleName;
        this.select = select;
        this.regNo = regNo;
    }

    public int getStudentId() {
        return studentId;
    }

    public void setStudentId(int studentId) {
        this.studentId = studentId;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public Date getDob() {
        return dob;
    }

    public void setDob(Date dob) {
        this.dob = dob;
    }

    public String getSex() {
        return sex;
    }

    public void setSex(String sex) {
        this.sex = sex;
    }

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }

    public Date getDoj() {
        return doj;
    }

    public void setDoj(Date doj) {
        this.doj = doj;
    }

    public int getDeptId() {
        return deptId;
    }

    public void setDeptId(int deptId) {
        this.deptId = deptId;
    }

    public String getDeptName() {
        return deptName;
    }

    public void setDeptName(String deptName) {
        this.deptName = deptName;
    }

    public int getBatchId() {
        return batchId;
    }

    public void setBatchId(int batchId) {
        this.batchId = batchId;
    }

    public String getBatchName() {
        return batchName;
    }

    public void setBatchName(String batchName) {
        this.batchName = batchName;
    }

    public int getRoleId() {
        return roleId;
    }

    public void setRoleId(int roleId) {
        this.roleId = roleId;
    }

    public String getRoleName() {
        return roleName;
    }

    public void setRoleName(String roleName) {
        this.roleName = roleName;
    }

    public boolean isSelect() {
        return select;
    }

    public void setSelect(boolean select) {
        this.select = select;
    }

    public String getRegNo() {
        return regNo;
    }

    public void setRegNo(String regNo) {
        this.regNo = regNo;
    }

} 
```

在这里，我添加了 3 个学生对象

```
 public List<StudentDTO> addStudentToList(){
        List<StudentDTO> studentList = new ArrayList<StudentDTO>();
        StudentDTO stud = new StudentDTO();
        for(int i=0; i<3; i++){
            studentList.add(stud);
        }

        return studentList;

    }

Student Controller class

    @RequestMapping(value="/addStudent", method=RequestMethod.GET)
    public ModelAndView getStudentForm(ModelMap model)
    {   List<StudentDTO> studentList = studentService.getStudentAttributesList();
        //List<Integer> userIdForDropDown = userDAO.getAllUserIdForDropDown();
        //model.addAttribute("userIdDropDown",userIdForDropDown);

        List<String> deptList = configDAO.getDeptListForDropDown();
        model.addAttribute("deptlist",deptList);
        List<String> batchList = configDAO.getAllBatchForDropDrown();
        model.addAttribute("batchList", batchList);
        ModelAndView mav = new ModelAndView("add_student");
        Student stu = new Student();
        mav.getModelMap().put("add_student", stu);
        StudentForm studentForm = new StudentForm();
        studentForm.setStudentList(studentList);
        model.addAttribute("studentForm",studentForm);
        return mav;
    }

@RequestMapping(value="/addStudent", method=RequestMethod.POST)
    public String saveStudent(@ModelAttribute("add_student") StudentForm studenfForm, BindingResult result, SessionStatus status, ModelMap model) throws ParseException{
        /*if(result.hasErrors()){
            return "add_student";
        }*/
        List<StudentDTO> newList = (List<StudentDTO>) studenfForm.getStudentList();
        List<Student> newList1 = new ArrayList<Student>();
        for(StudentDTO stud:studenfForm.getStudentList()){
            Student student = new Student();
            student.setBatchId(stud.getBatchId());
            student.setBatchName(stud.getBatchName());
            student.setDeptId(stud.getDeptId());
            student.setDeptName(stud.getDeptName());

            SimpleDateFormat sdf = new SimpleDateFormat("DD/MM/YYYY");      
            Date dateWithoutTime = sdf.parse(sdf.format(new Date()));

            student.setDob(stud.getDob());
            student.setDoj(stud.getDoj());
            student.setFirstName(stud.getFirstName());
            student.setLastName(stud.getLastName());
            student.setRegNo(stud.getRegNo());
            student.setRoleId(stud.getRoleId());
            student.setRoleName(stud.getRoleName());
            student.setStatus(stud.getStatus());
            student.setSex(stud.getSex());
            student.setStudentId(stud.getStudentId());
            newList1.add(student);
        }
        Integer saveStatus = studentDAO.saveStudentInfo(newList1);
        //Integer res = roleDAO.saveRole(role);
        if(saveStatus!=null){
            status.setComplete();
            model.addAttribute("savedMsg", "Student record saved Successfully.");

        }
        return "redirect:addStudent";

    } 
```

查看我的jsp页面

```
<table  bgcolor="white" width="1200" height="300" align="center" style="border-collapse: collapse;" border="1" bordercolor="#006699" >
    <form:form action="addStudent" method="post" commandName="add_student" modelAttribute="studentForm">
    <tr>
        <td align="center" style="background-color: lightblue"><h3>Add Student</h3></td>
    </tr>
    <tr align="left">
                <td align="left">
                <input type="button" id="addrows" name="addrows" class="addperson" value="Add Rows">

                <input type="button" id="removerows" class="removerows" value="Delete Rows" />  

                <input type="submit" value="Save" />
                </td>       
                </tr>
    <tr valign="middle" align="center">

    <td align="center" valign="middle">

            <table width="1200" height="200" style="border-collapse: collapse;" border="0" bordercolor="#006699" cellspacing="0" cellpadding="0">

                <thead>

                <tr height="1" bgcolor="lightblue">
                    <th colspan="1">
                        No
                    </th>
                    <th width="5">
                        Select
                    </th>
                    <th>
                        Reg No
                    </th>
                    <th>
                        First Name
                    </th>

                    <th>
                        Last Name
                    </th>

                    <th>
                        Sex
                    </th>

                    <th>
                        DOB
                    </th>

                    <th>
                        DOJ
                    </th>

                    <th>
                        Dept Name
                    </th>

                    <th>
                        Role Name
                    </th>
                    <th>
                        Batch Name
                    </th>

                    <th>
                        Status
                    </th>

                </tr>
                </thead>
                <tbody>
                <c:forEach var="rows" items="${studentForm.studentList}" varStatus="status">
                <tr class="${status.index % 2 == 0 ? 'even' : 'odd'}"  >

                    <td width="15">
                        <b>${status.count}</b>
                    </td>

                    <td width="10">
                        <form:checkbox path="studentList[${status.index}].select"/>
                    </td>

                    <td><form:input  path="studentList[${status.index}].regNo"/></td>

                    <td><form:input  path="studentList[${status.index}].firstName"/></td>

                    <td><form:input  path="studentList[${status.index}].lastName"/></td>

                    <td><form:select  path="studentList[${status.index}].sex">
                        <form:option value="NONE" label="--- Select ---"/>
                        <form:option value="M" label="Male"/>
                        <form:option value="F" label="Female"/>
                        </form:select></td>

                    <td><form:input  path="studentList[${status.index}].dob"/></td>

                    <td><form:input  path="studentList[${status.index}].doj"/></td>

                    <td><form:select  path="studentList[${status.index}].deptName">
                        <form:option value="NONE" label="--- Select ---"/>
                        <form:options items="${deptlist}" />
                        </form:select></td>

                    <td><form:select  path="studentList[${status.index}].roleName">
                        <form:option value="NONE" label="--- Select ---"/>
                        <form:option value="ROLE_STUDENT" label="Student"/>
                        <form:option value="ROLE_BATCHREP" label="Batch Rep"/>
                        </form:select></td>

                    <td><form:select  path="studentList[${status.index}].batchName">
                        <form:option value="NONE" label="--- Select ---"/>
                        <form:options items="${batchList}" />
                        </form:select>

                    </td>

                    <td><form:select  path="studentList[${status.index}].status">
                        <form:option value="NONE" label="--- Select ---"/>
                        <form:option value="E" label="Enable"/>
                        <form:option value="D" label="Disable"/>
                        </form:select></td>

                </tr>
                    </c:forEach>

                        </tbody>
            </table>

            </td>
            </tr>
            <tr align="center">
                        <td width="100" align="center"><B>
                        ${savedMsg}
                        </B>
                        </td>
                        </tr>   

        </form:form>

</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-09-05T01:12:58.797

即使这个线程较旧，为了其他需要这个的人的利益。

让我用一个最小的代码和带有*名字、电子邮件、用户名和性别*字段的用户示例来解释，这样人们就不会对更大的代码感到困惑。
考虑您从控制器发送用户列表中的 3 个空用户，这将创建 3 个空行。如果您检查/查看页面源代码，您将看到

*   `<input> tags`具有不同**id 的**Rows( )喜欢`list0.firstName` `list1.firstName`

*   `<input> tags`具有不同**名称**的行（ ），例如`list[0].firstName` `list[1].firstName`

每当提交表单时，服务器不会考虑**id**（添加仅用于帮助客户端验证），但**name 属性**将被解释为请求参数并用于构造您的 modelAttribute，因此属性名称在插入行时非常重要。

### 添加行

那么，如何构造/追加新行？
如果我从 UI 提交 6 个用户，控制器应该从 usersList 接收 6 个用户对象。下面给出了实现相同的步骤
1\. 右键单击`->` **​​查看页面源代码**。你会看到这样的行（你可以`*[0].*`在第一行和`*[1].*`第二行看到）

```
<tr>
    <td><input id="list0.firstName" name="list[0].firstName" type="text" value=""/></td>
    <td><input id="list0.email" name="list[0].email" type="text" value=""/></td>
    <td><input id="list0.userName" name="list[0].userName" type="text" value=""/></td>
    <td>
        <span>
            <input id="list0.gender1" name="list[0].gender" type="radio" value="MALE" checked="checked"/>Male
        </span>
        <span>
            <input id="list0.gender2" name="list[0].gender" type="radio" value="FEMALE"/>Female
        </span>
    </td>
</tr>

<tr>
    <td><input id="list1.firstName" name="list[1].firstName" type="text" value=""/></td>
    <td><input id="list1.email" name="list[1].email" type="text" value=""/></td>
    <td><input id="list1.userName" name="list[1].userName" type="text" value=""/></td>
    <td>
        <span>
            <input id="list1.gender1" name="list[1].gender" type="radio" value="MALE" checked="checked"/>Male
        </span>
        <span>
            <input id="list1.gender2" name="list[1].gender" type="radio" value="FEMALE"/>Female
        </span>
    </td>
</tr> 
```

2.  复制第一行并构造一个 javascript 字符串并将 '0' 替换为变量名索引。如以下示例所示

```
'<tr>'+
    '<td><input id="list'+ index +'.firstName" name="list['+ index +'].firstName" type="text" value=""/></td>'+
    '<td><input id="list'+ index +'.email" name="list['+ index +'].email" type="text" value=""/></td>'+
    ...
'</tr>'; 
```

3.  将构造的行附加到`<tbody>`. 在 UI 中添加行也将在提交表单时在控制器中接收新添加的行。

### 删除行

删除行有点复杂，我将尝试以最简单的方式解释

*   假设您添加了 row0、row1、row2、row3、row4、row5

*   删除了第 2 行、第 3 行。不要只是隐藏行，而是通过捕获事件将其从 DOM 中删除。

*   现在 row0,row1,row4,row5 将被提交，但在控制器中，您的 userList 将有 6 个用户对象，但 user[2].firstName 将为 null，user[3].firstName 将为 null。

*   因此，在您的控制器中迭代并检查 null 并删除用户。（使用迭代器不要使用 foreach 删除用户对象）

### 发布代码以使初学者受益。

```
//  In Controller
@RequestMapping(value = "/app/admin/add-users", method = RequestMethod.GET)
public String addUsers(Model model, HttpServletRequest request)
{
    List<DbUserDetails> usersList = new ArrayList<>();

    ListWrapper userListWrapper = new ListWrapper();
    userListWrapper.setList(usersList);

    DbUserDetails user;
    for(int i=0; i<3;i++)
    {
        user = new DbUserDetails();
        user.setGender("MALE"); //Initialization of Radio button/ Checkboxes/ Dropdowns
        usersList.add(user);
    }

    model.addAttribute("userListWrapper", userListWrapper);
    model.addAttribute("roleList", roleList);

    return "add-users";
}

@RequestMapping(value = "/app/admin/add-users", method = RequestMethod.POST)
public String saveUsers(@ModelAttribute("userListWrapper") ListWrapper userListWrapper, Model model, HttpServletRequest request)
{
    List<DbUserDetails> usersList = userListWrapper.getList();
    Iterator<DbUserDetails> itr = usersList.iterator();

    while(itr.hasNext())
    {
        if(itr.next().getFirstName() == null)
        {
            itr.remove();
        }
    }

    userListWrapper.getList().forEach(user -> {
        System.out.println(user.getFirstName());
    });
    return "add-users";
}

//POJO
@Entity
@Table(name = "userdetails")
@XmlRootElement(name = "user")
public class DbUserDetails implements Serializable
{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;
    private String  firstName;
    private String  userName;
    private String  email;
    private String  gender;

    //setters and getters
}

//list wrapper
public class ListWrapper
{
    private List<DbUserDetails> list;

    //setters and getters
} 
```

在 JSP 中

```
<form:form method="post" action="${pageContext.request.contextPath}/app/admin/add-users" modelAttribute="userListWrapper">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th><spring:message code="app.userform.firstname.label"/></th>
                <th><spring:message code="app.userform.email.label"/></th>
                <th><spring:message code="app.userform.username.label"/></th>
                <th><spring:message code="app.userform.gender.label"/></th>
            </tr>
        </thead>
        <tbody id="tbodyContainer">
            <c:forEach items="${userListWrapper.list}" var="user" varStatus="loop">
                <tr>
                    <td><form:input path="list[${loop.index}].firstName" /></td>
                    <td><form:input path="list[${loop.index}].email" /></td>
                    <td><form:input path="list[${loop.index}].userName" /></td>
                    <td>
                        <span>
                            <form:radiobutton path="list[${loop.index}].gender" value="MALE" /><spring:message code="app.userform.gender.male.label"/>
                        </span>
                        <span>
                            <form:radiobutton path="list[${loop.index}].gender" value="FEMALE" /><spring:message code="app.userform.gender.female.label"/>
                        </span>
                    </td>
                </tr>
            </c:forEach>
        </tbody>
    </table>
    <div class="offset-11 col-md-1">
        <button type="submit" class="btn btn-primary">SAVE ALL</button>     
    </div>
</form:form> 
```

Javascript 需要包含在 JSP 中

```
var currentIndex = 3; //equals to initialRow (Rows shown on page load)
function addRow()
{
    var rowConstructed = constructRow(currentIndex++);
    $("#tbodyContainer").append(rowConstructed);
}

function constructRow(index)
{
    return '<tr>'+
    '<td><input id="list'+ index +'.firstName" name="list['+ index +'].firstName" type="text" value=""/></td>'+
    '<td><input id="list'+ index +'.email" name="list['+ index +'].email" type="text" value=""/></td>'+
    '<td><input id="list'+ index +'.userName" name="list['+ index +'].userName" type="text" value=""/></td>'+
    '<td>'+
        '<span>'+
            '<input id="list'+ index +'.gender1" name="list['+ index +'].gender" type="radio" value="MALE" checked="checked"/>Male'+
        '</span>'+
        '<span>'+
            '<input id="list'+ index +'.gender'+ index +'" name="list['+ index +'].gender" type="radio" value="FEMALE"/>Female'+
        '</span>'+
    '</td>'+
'</tr>';
} 
```

# mouseover - 在 QML 桌面应用程序中模拟鼠标悬停

> ID：13475538
> 
> 赞同：0
> 
> 时间：2012-11-20T14:38:53.393
> 
> 标签：mouseover, qml, simulate

我的 QML 桌面应用程序中有三个单选按钮，当我单击一个时 - 我希望所有其他按钮都处于未选中状态，但是一旦我将它们设置为未选中状态，它们就会真正变为未选中状态，但直到我移动鼠标我才能看到在他们之上。我尝试了很多方法来解决它，但没有找到任何好的方法。您有什么方法可以模拟鼠标悬停事件，然后它们将显示为未选中？帮帮我plizzzzzzzzzzzz！！！我写了这段代码：

```
property int openSessionCurrentIndex: -1
onOpenSessionCurrentIndexChanged: {
    rbtnHexadecimal1.checked = openSessionCurrentIndex == 0
    rbtnDecimal1.checked = openSessionCurrentIndex == 1
    rbtnString1.checked = openSessionCurrentIndex == 2
} 
```

，和：

```
RadioButton{
    id:rbtnHexadecimal1
    width: 140
    onClicked:{
        openSessionItem.openSessionCurrentIndex = 0
    }
    text: "Hexadecimal Data"
    anchors.left: parent.left
    checked: true
}
RadioButton{
    id:rbtnDecimal1
    width: 130
    onClicked:{
        openSessionItem.openSessionCurrentIndex = 1
    }
    text: "Decimal Data"
    anchors.left:rbtnHexadecimal1.right
}
RadioButton{
    id:rbtnString1
    width: 140
    onClicked:{
        openSessionItem.openSessionCurrentIndex = 2
    }
    text: "String Data"
    anchors.left:rbtnDecimal1.right
} 
```

缩短，我需要一个解决方案，以便当单选按钮变为未选中时 - 它显示如下。有什么想法吗？Tnx 提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:19:43.830

您希望正确使用 RadioButton [platformExclusiveGroup](http://doc.qt.digia.com/qt-components-symbian/qml-radiobutton.html#platformExclusiveGroup-prop)属性，而不是任何幼稚的编码解决方案。

# java - libJdbcOdbc SQLAllocEnv 未定义和动态链接一般

> ID：13475543
> 
> 赞同：5
> 
> 时间：2012-11-20T14:39:29.273
> 
> 标签：java, jdbc, shared-libraries, elf

我在运行应用程序时收到消息

```
java: symbol lookup error: /usr/java/jdk1.7.0_09/jre/lib/amd64/libJdbcOdbc.so: undefined symbol: SQLAllocEnv 
```

该应用程序的目的是使用 Pentaho 水壶 jar 文件将数据从一台服务器迁移到另一台服务器。我在目标服务器上使用 Jdbc-Odbc 连接。我最近从 Oracles 网站安装了 java（jre 和 jdk）。当我设置

```
export LD_DEBUG=all 
```

我看到以下回复

```
binding file /usr/java/jdk1.7.0_09/jre/lib/amd64/libJdbcOdbc.so [0] to /lib64/libc.so.6 [0]: normal symbol `__cxa_finalize' [GLIBC_2.2.5]
      5193:
      5193:     calling init: /usr/java/jdk1.7.0_09/jre/lib/amd64/libJdbcOdbc.so
      5193:
      5193:     opening file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libJdbcOdbc.so [0]; direct_opencount=1
      5193:
      5193:     symbol=JNI_OnLoad;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libJdbcOdbc.so [0]
      5193:     symbol=JNI_OnLoad;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libjava.so [0]
      5193:     binding file /usr/java/jdk1.7.0_09/jre/lib/amd64/libJdbcOdbc.so [0] to /usr/java/jdk1.7.0_09/jre/lib/amd64/libjava.so [0]: normal symbol `JNI_OnLoad'
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libjava.so [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/server/libjvm.so [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libverify.so [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/libdl.so.2 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/libc.so.6 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/libm.so.6 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/libpthread.so.0 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/ld-linux-x86-64.so.2 [0]
      5193:     /usr/java/jdk1.7.0_09/jre/lib/amd64/libjava.so: error: symbol lookup error: undefined symbol: Java_sun_jdbc_odbc_JdbcOdbc_allocEnv (fatal)
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libzip.so [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/server/libjvm.so [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libjava.so [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/libc.so.6 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/libm.so.6 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/libdl.so.2 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/libpthread.so.0 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/ld-linux-x86-64.so.2 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libverify.so [0]
      5193:     /usr/java/jdk1.7.0_09/jre/lib/amd64/libzip.so: error: symbol lookup error: undefined symbol: Java_sun_jdbc_odbc_JdbcOdbc_allocEnv (fatal)
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libnio.so [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libjava.so [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libnet.so [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/libpthread.so.0 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/libdl.so.2 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/libc.so.6 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/server/libjvm.so [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libverify.so [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/ld-linux-x86-64.so.2 [0]
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/lib64/libm.so.6 [0]
      5193:     /usr/java/jdk1.7.0_09/jre/lib/amd64/libnio.so: error: symbol lookup error: undefined symbol: Java_sun_jdbc_odbc_JdbcOdbc_allocEnv (fatal)
      5193:     symbol=Java_sun_jdbc_odbc_JdbcOdbc_allocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libJdbcOdbc.so [0]
      5193:     binding file /usr/java/jdk1.7.0_09/jre/lib/amd64/libJdbcOdbc.so [0] to /usr/java/jdk1.7.0_09/jre/lib/amd64/libJdbcOdbc.so [0]: normal symbol `Java_sun_jdbc_odbc_JdbcOdbc_allocEnv'
      5193:     symbol=SQLAllocEnv;  lookup in file=java [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/lib64/libpthread.so.0 [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/usr/java/jdk1.7.0_09/bin/../jre/lib/amd64/jli/libjli.so [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/lib64/libdl.so.2 [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/lib64/libc.so.6 [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/lib64/ld-linux-x86-64.so.2 [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/server/libjvm.so [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/lib64/libm.so.6 [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libJdbcOdbc.so [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libjava.so [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/server/libjvm.so [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/lib64/libc.so.6 [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/usr/java/jdk1.7.0_09/jre/lib/amd64/libverify.so [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/lib64/libdl.so.2 [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/lib64/libm.so.6 [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/lib64/libpthread.so.0 [0]
      5193:     symbol=SQLAllocEnv;  lookup in file=/lib64/ld-linux-x86-64.so.2 [0]
      5193:     /usr/java/jdk1.7.0_09/jre/lib/amd64/libJdbcOdbc.so: error: symbol lookup error: undefined symbol: SQLAllocEnv (fatal) 
```

我已经安装了 unixODBC，这些函数的实现清晰地驻留在 libodbc.so（到 libodbc.so.2.0.0 的符号链接）中，

```
nm -a /usr/local/lib/libodbc.so | grep "SQLAllocEnv"
0000000000006f30 T SQLAllocEnv
0000000000000000 a SQLAllocEnv.c 
```

我的 LD_LIBRARY_PATH 中有 /usr/local/lib （我做了 export ）。我还在 /etc/ld.so.conf.d 中放置了一个新的配置文件并运行 ldconfig。但由于某种原因，此功能（可能还有其他功能）将无法加载。

还

```
ldd /usr/java/latest/jre/lib/amd64/libJdbcOdbc.so
        linux-vdso.so.1 =>  (0x00007fff09728000)
        libjava.so => /usr/java/latest/jre/lib/amd64/libjava.so (0x00007fb8d03ab000)
        libjvm.so => not found
        libc.so.6 => /lib64/libc.so.6 (0x00007fb8d000d000)
        libjvm.so => not found
        libverify.so => /usr/java/latest/jre/lib/amd64/libverify.so (0x00007fb8cfdfe000)
        libdl.so.2 => /lib64/libdl.so.2 (0x00007fb8cfbfa000)
        /lib64/ld-linux-x86-64.so.2 (0x000000368b000000)
        libjvm.so => not found 
```

谁能给我任何关于如何解决这个问题的建议。据我了解，当链接器动态解析调用时，它将使用 LD_LIBRARY_PATH 来搜索 elf 文件。这个对吗？是否有某种索引可以用来查找具有所需功能的共享库？我知道创建的 ld.so.cache，但必须有一些索引，即 SQLAllocEnv -> x.so、libodbc.so 等。是什么让链接器在这些特定文件中查找符号？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T16:33:49.627

此错误仅表示在默认位置找不到几个库文件。在您的情况下，您可以像 export LD_LIBRARY_PATH=/usr/java/latest/jre/lib/amd64 一样导出它。它应该可以解决问题。

# android - 双击一个词来选择它

> ID：13475549
> 
> 赞同：3
> 
> 时间：2012-11-20T14:39:42.440
> 
> 标签：android, double-click

考虑以下情况：我的屏幕上有一个文本，我想双击文本中的单词，例如让这个单词显示为一个 toast 消息。社区是否有任何想法如何实现此功能？我确实有一些为 android 开发的经验，但不多:(

我将非常感谢任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:53:00.010

您可以使用 GestureDetector.OnDoubleTapListener。这是文档

[http://developer.android.com/reference/android/view/GestureDetector.OnDoubleTapListener.html](http://developer.android.com/reference/android/view/GestureDetector.OnDoubleTapListener.html)

对于以下工作示例可能会有所帮助

[http://mobile.tutsplus.com/tutorials/android/android-gesture/](http://mobile.tutsplus.com/tutorials/android/android-gesture/)

# java - 使用 MyBatis，如何在不编写配置文件（即以编程方式）的情况下构建 SqlSessionFactory？

> ID：13475554
> 
> 赞同：0
> 
> 时间：2012-11-20T14:39:44.300
> 
> 标签：java, annotations, mybatis

我正在尝试为使用 MyBatis 使用注释实现的 DAO 编写单元测试。我想实例化该 DAO 以针对我的（内存中）数据库进行单元测试。但是，我看到实例化它`SqlSessionFactory`的唯一方法是通过 a ，而我看到实例化其中一个的`SqlSessionFactoryBuilder`唯一方法是使用配置文件中唯一的方法。

但是，在我的单元测试中，我已经与内存数据库建立了连接，我可以使用它来以某种方式实例化映射器吗？`Connection`如果我需要进行测试，这也将允许我模拟或监视后者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:37:11.243

该类`SqlSessionFactory`有一个`openSession(Connection connection)`方法。您可以使用它来检索您对内存数据库的`SqlSession`使用。`Connection`

您可以通过以下代码以编程方式构建，`SqlSessionFactory`而无需使用配置文件：

```
Environment environment = new Environment("ID", transactionFactory, dataSource);
Configuration configuration = new Configuration(environment);
configuration.addMappers(mappersPackageName);
// Other configuration tweaks
SqlSessionFactory sessionFactory = new SqlSessionFactoryBuilder().build(configuration); 
```

然后你可以模拟或存根`DataSource`返回你想要的`Connection`实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:30:21.650

使用[junit](https://github.com/kentbeck/junit/wiki)对此进行测试。查看[此链接](http://blog.idleworx.com/2011/02/part8-idleworx-monster-mybatis-tutorial.html)了解更多信息

在这种情况下，该`setup()`方法将是创建`SqlSessionFactory`对象的正确点

```
 @BeforeClass
 public static void setUp() throws Exception {
  log.info("starting up myBatis tests");
  String resource = "mybatis.config.xml";
  Reader reader = Resources.getResourceAsReader(resource); 
  sf = new SqlSessionFactoryBuilder().build(reader,"testing");
 } 
```

# android - 列表视图中的微调器

> ID：13475557
> 
> 赞同：1
> 
> 时间：2012-11-20T14:40:00.667
> 
> 标签：android, listview, android-listview, spinner, android-checkbox

我有一个列表视图（多选）。它工作完美。我为此使用了自定义适配器。每行都有一个文本和一个复选框。标记的项目将作为结果显示在文本视图中。

我想在 listview 行中添加一个微调器。我得到空点异常错误。提前致谢。

```
public class MainActivity extends Activity {

ListView myListView;
Button getResult;
Spinner spinner;

private ArrayList<String> dayOfWeekList = new ArrayList<String>();

private void initDayOfWeekList(){
    dayOfWeekList.add("Sunday");
    dayOfWeekList.add("Monday");
    dayOfWeekList.add("Tuesday");
    dayOfWeekList.add("Wednesday");
    dayOfWeekList.add("Thursday");
    dayOfWeekList.add("Friday");
    dayOfWeekList.add("Saturday");

}

String[] androidBooks = 
    {
    "Hello",
    "Professional",
    "Unlocking"
    };

MyArrayAdapter myArrayAdapter;
ArrayAdapter<String> spinnerAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    initDayOfWeekList();
    setContentView(R.layout.activity_main);
    spinnerAdapter = new ArrayAdapter<String> (this, 
            android.R.layout.simple_spinner_item, androidBooks);

    myListView = (ListView)findViewById(R.id.list);

    myArrayAdapter = new MyArrayAdapter(
            this,
            R.layout.row,
            android.R.id.text1,
            dayOfWeekList
            );

    myListView.setAdapter(myArrayAdapter);
    myListView.setOnItemClickListener(myOnItemClickListener);

    getResult = (Button)findViewById(R.id.getresult);
    getResult.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {
            String result = "";

            /*
            //getCheckedItemPositions
            List<Integer> resultList = myArrayAdapter.getCheckedItemPositions();
            for(int i = 0; i < resultList.size(); i++){
                result += String.valueOf(resultList.get(i)) + " ";
            }
            */

            //getCheckedItems
            List<String> resultList = myArrayAdapter.getCheckedItems();
            for(int i = 0; i < resultList.size(); i++){
                result += String.valueOf(resultList.get(i)) + "\n";
            }

            myArrayAdapter.getCheckedItemPositions().toString();
            Toast.makeText(
                    getApplicationContext(), 
                    result, 
                    Toast.LENGTH_LONG).show();
        }});

}

OnItemClickListener myOnItemClickListener
= new OnItemClickListener(){

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        myArrayAdapter.toggleChecked(position);

    }};

private class MyArrayAdapter extends ArrayAdapter<String>{

    private HashMap<Integer, Boolean> myChecked = new HashMap<Integer, Boolean>();

    public MyArrayAdapter(Context context, int resource,
            int textViewResourceId, List<String> objects) {
        super(context, resource, textViewResourceId, objects);

        for(int i = 0; i < objects.size(); i++){
            myChecked.put(i, false);
        }
    }

    public void toggleChecked(int position){
        if(myChecked.get(position)){
            myChecked.put(position, false);
        }else{
            myChecked.put(position, true);
        }

        notifyDataSetChanged();
    }

    public List<Integer> getCheckedItemPositions(){
        List<Integer> checkedItemPositions = new ArrayList<Integer>();

        for(int i = 0; i < myChecked.size(); i++){
            if (myChecked.get(i)){
                (checkedItemPositions).add(i);
            }
        }

        return checkedItemPositions;
    }

    public List<String> getCheckedItems(){
        List<String> checkedItems = new ArrayList<String>();

        for(int i = 0; i < myChecked.size(); i++){
            if (myChecked.get(i)){
                (checkedItems).add(dayOfWeekList.get(i));
            }
        }

        return checkedItems;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;

        spinner = (Spinner) row.findViewById(R.id.planets_spinner);
        spinner.setAdapter(spinnerAdapter);

        if(row==null){
            LayoutInflater inflater=getLayoutInflater();
            row=inflater.inflate(R.layout.row, parent, false);  
        }

        CheckedTextView checkedTextView =    (CheckedTextView)row.findViewById(R.id.text1);
        checkedTextView.setText(dayOfWeekList.get(position));

        Boolean checked = myChecked.get(position);
        if (checked != null) {
            checkedTextView.setChecked(checked);
        }

        return row;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:52:49.927

您的代码在 getView(..) 中出现故障

您正在尝试在膨胀视图之前检索您的微调器。如果 convertView 为空（这将是您的列表中的第一次），您的微调器将不会被发现..您不能在为空的东西上调用 findViewById..将您的操作顺序更改为以下

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;

        if(row==null){
            LayoutInflater inflater=getLayoutInflater();
            row=inflater.inflate(R.layout.row, parent, false);  
        }

        spinner = (Spinner) row.findViewById(R.id.planets_spinner);
        spinner.setAdapter(spinnerAdapter);
        CheckedTextView checkedTextView =    (CheckedTextView)row.findViewById(R.id.text1);
        checkedTextView.setText(dayOfWeekList.get(position));

        Boolean checked = myChecked.get(position);
        if (checked != null) {
            checkedTextView.setChecked(checked);
        }

        return row;
    } 
```

请注意，在检查视图是否为 null 并在需要时充气之后，我如何将检索微调器移动到

# sql - SQL Server，如果元素被删除，id会改变吗？

> ID：13475560
> 
> 赞同：-3
> 
> 时间：2012-11-20T14:40:06.713
> 
> 标签：sql

我想知道我是否将 10 个条目插入到 SQL Server 表中。如果我然后删除其中一个，id/index 会相应改变吗？

例子：

```
1 | Simon Cowell | 56 years
2 | Frank Lampard| 24 years
3 | Harry Bennet | 12 years 
```

如果我删除#2，Harry Bennet 的索引会变为 2 吗？

谢谢 ：）

编辑：对不起，我的愤怒，度过了糟糕的一天。是的，我应该自己研究一下，我应该被否决。我不求什么，我只想说对不起:|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:41:09.493

不，您可以根据需要设置触发器或逻辑来执行此操作；但是，它不会自动执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T15:07:40.240

由于您似乎将“id/index”混为一谈，让我们稍微谈谈关系数据库上下文中的主键和索引。

分配给 SQL 数据库中一行的“id”或主键是该行的唯一标识符。它可以由一列或多列组成。（当涉及多个列时，它被称为“复合”或“多部分”键。）主键实际上应该只是用于寻址行的唯一句柄：主键不应该包含任何有关由该行表示的实体的信息，特别是如果该信息有可能是可变的；一个例子是具有后缀的零件编号，该后缀代表零件的金属类型；如果该金属可能从钛变为 unobtainium，例如，该零件号将作为主键的错误选择；最好有另一列来存储金属的类型，而不是将金属类型的后缀作为主键的一部分。“有意义的”主键在遗留的非关系数据库中可能有意义，但在关系数据库中它们应该被避免。

当寻求强制主键的唯一性时，数据库引擎可以利用索引来快速测试键值是否存在。它可以使用二进制算法来查找值，避免需要逐行扫描实际数据“蛮力”，寻找值。 *但是引擎在幕后使用的索引来帮助它进行主键管理与主键本身是不同的*。

如果您有一个简单的连续整数作为主键，那么它们的数量是无限的，因此当分配给它的行已被删除时，当它变得可用时，无需重用整数。因此，关系数据库引擎不会自动尝试重用它，并且当数字序列中的“间隙”由删除。其他表中的许多其他行可能正在引用这些值，并且让它们可变会造成混乱或极大的低效率。

Hashing algorithms are another very efficient way a database engine can quickly test for the existence of a key value. It computes the location in the hashed-file where the key would be if it did exist, and then looks there for it. The rows are stored in no particular order, so such schemes are optimized for instant finding of records in a large table, not for culling records that have a common characteristic, such as all customers in zipcode 10023.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:41:47.933

不，它不会自动更改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T14:43:05.577

不，它不会。希望这就是您所希望的答案。对于任何自动生成的标识符（例如 IDENTITY 列），您应该尽可能忽略数据类型并将其视为身份信息的不透明“blob”。

它在插入期间被分配，您可以将其用于交叉引用目的，但它是数字的事实不是您应该使用或依赖的。它只是行的稳定标识符。

# android - Android 中的主题 - Eclipse

> ID：13475566
> 
> 赞同：1
> 
> 时间：2012-11-20T14:40:23.593
> 
> 标签：android

所以我正在编辑一个 go 启动器模板主题，我看到有一些我想要更改的部分未包含在模板中。例如，当你想删除应用程序顶部的小图标（kill.png kill_light.png 等）我添加了这段代码

```
<AppIcon text_color="#FFFFFFFF" text_bg_color="#ff3f3f3f" delete_app="kill"         
delete_app_highlight="kill_light" new_app_icon="new_install_app"   
update_icon="appfunc_app_update" locker_icon="promanage_lock_icon" 
close_app_icon="promanage_close_normal" close_app_light="promanage_close_light"/> 
```

在可绘制的 hdpi 文件夹中使用具有正确名称的 png，但是当我对其进行测试时它们不会出现。我错过了什么吗？我可以通过添加这个来更改应用程序抽屉中的媒体管理图标

```
<SwitchButtonBean button_galleryicon="appfunc_mediamanagement_switch _button_gallery"   
button_gallerylighticon="appfunc_mediamanagement_s witch_button_gallery_light" 
button_musicicon="appfunc_mediamanagement_switch_b utton_music"          
button_musiclighticon="appfunc_mediamanagement_swi tch_button_music_light" 
button_videoicon="appfunc_mediamanagement_switch_b utton_video"   
button_videolighticon="appfunc_mediamanagement_swi tch_button_video_light" 
button_appicon="appfunc_mediamanagement_switch_but ton_app"    
button_appiconlight="appfunc_mediamanagement_switc h_button_app_light"/> 
```

但它不适用于其他部分（媒体管理菜单中相同图标的较小版本）。我错过了什么？

# python - Python金字塔遍历

> ID：13475567
> 
> 赞同：7
> 
> 时间：2012-11-20T14:40:33.687
> 
> 标签：python, pyramid, traversal

我一直在尝试金字塔，这个遍历的东西让我发疯了。我基本上是在为购物车制作一个控制面板，这是我想到的基本结构。

登录页面

```
localhost:6543/admin_login 
```

登录成功后

```
localhost:6543/admin/home 
```

查看所有现有产品

```
localhost:6543/admin/product 
```

编辑产品 X

```
localhost:6543/admin/product/edit/1 
```

所以我的文件夹结构是这样的（大写文件是模型）

*   我的车
    *   资源.py
    *   管理员.py
    *   产品.py
    *   静止的
    *   模板
    *   意见
        *   __init__.py
        *   管理员.py
        *   根.py

我的资源.py

```
 from pyramid.security import Authenticated
    from pyramid.security import Allow
    from pyramid.response import Response

    class Root(object):
       __name__ = ''
       __parent__ = None

       def __init__(self, request):
          pass

       def __getitem__(self, key):

           if key == 'admin_login':
              return Admin()

           elif key == 'admin':
              return Admin()

           raise KeyError

    class Admin(object):

        __name__ = ''
        __parent__ = Root
        __acl__ = [(Allow, Authenticated, 'admin')]

        def __init__(self):
           pass 
```

在`views/__init.py`中，它只是一个空白文件。至于`root.py`，它只是一个`httpexceptions.HTTPNOTFOUND`，404代码

为了`views/admin.py`

```
 from pyramid.view import view_config, render_view
    import mycart.resources

    from pyramid.httpexceptions import HTTPNotFound, HTTPFound
    from mycart.views.root import strip_tags
    from pyramid_mailer import get_mailer
    from pyramid_mailer.message import Message

    from pyramid.security import remember , forget , authenticated_userid

    from pyramid.events import subscriber , BeforeRender

    from mycart.Admin import Admin
    from mycart.Product import Product

    @view_config(context='mycart:resources.Admin',   request_method='POST', renderer='admin/login.jinja2')
    def login_post(context, request):

      if 'btnLogin' in request.params:
        token = request.session.get_csrf_token()
        login = request.params['txtLogin']
        password = request.params['txtPassword']

        admin = Admin(login, request)

        if admin.validate_user( password):

            record = admin.find_user_by_login( login )

            request.session['bs_admin_id'] = str(record['_id'])
            request.session['bs_admin_name'] = record['usr']['fname'] + ' ' + record['usr']['lname'];
            request.session['bs_admin_type'] = record['usr']['type']
            headers = remember(request, login )
            return HTTPFound('/admin/home',  headers=headers)

        message = 'Failed login'

      return {'message': message,  'url': '/admin_login', 'page_title': 'Failed Login'}

      @view_config(context='mycart:resources.Admin', name="home", renderer='admin/home.jinja2', permission='admin')
      def home(context, request):
          logged_in = authenticated_userid(request)
          url = request.path_info

          admin = Admin( logged_in, request )
          rec = admin.find_user_by_objectid( request.session['bs_admin_id'] ) ;

          return { 'firstname': rec['usr']['fname']  }

     @view_config(context='mycart:resources.Admin', name="product", renderer='admin/product_listing.jinja2', permission='admin')
          def product_list(context, request):
          print ('yes, showing product listing requested by ', request.session['bs_admin_id'] ) 
```

登录后，我将 url 指向 localhost:6543/admin/product，我注意到它仍然呈现主页，而不是产品页面。

我知道我错过了一些东西，但我似乎无法找出原因。浏览[http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/traversal.html](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/traversal.html)，我知道我在正确的轨道上，因为可能存在任意部分。

我尝试将 resources.py 修改为以下

```
 .....

   class Admin(object):

       __name__ = ''
       __parent__ = Root
       __acl__ = [(Allow, Authenticated, 'admin')]

       def __init__(self):
           pass

       def __getitem__(self, key):

          if key == 'product':
             print ("WOOT! Listing products")
             ## this is the part where I don't know what should I return or set or how should I hook it up with view_config

          if key == 'home':
             print ("yes, I'm home!")
             ## this is the part where I don't know what should I return or set or how should I hook it up with view_config

          raise KeyError 
```

对于这一部分，我取得了一些进展，它肯定会在控制台中打印相应的消息。但是，我不知道应该如何将它与 view_configs 连接起来，如果需要进行任何更改，view_configs 的参数应该是什么。

我不知道版本是否会影响任何东西，但无论如何，我使用的是 python 3.3

任何帮助将不胜感激。谢谢！

这是我在多年 java 之后第一次用 python 编码。所以可能有一些我对金字塔/python不熟悉的术语/概念。

* * *

好吧，我想我有点想解决这个遍历的事情了。通过[http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/narr/traversal.html](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/narr/traversal.html)阅读，有两件事引起了我的注意。

例如，如果路径信息序列是 ['a', 'b', 'c']：

```
- Traversal starts by acquiring the root resource of the application by calling the root   factory. The root factory can be configured to return whatever object is appropriate as the traversal root of your application.

- Next, the first element ('a') is popped from the path segment sequence and is used as a key to lookup the corresponding resource in the root. This invokes the root resource’s __getitem__ method using that value ('a') as an argument.

- If the root resource “contains” a resource with key 'a', its __getitem__ method will return it. The context temporarily becomes the “A” resource. 
```

所以基于 localhost:6543/admin/products，view_config 的设置如下：

@view_config(context=Admin, name='products', .... )

因此，在对 resources.py 进行更改之后

```
 ## class Root(object):
       ....

    class ProductName(object):
        def __init__(self, _key):
            pass

    class Products(object):
        __name__ = ''
        __parent__ = Root

        def __init__(self):
            pass

        def __getitem__(self, key):
            print ('products: ', key)
            if key == 'add':
                return ProductName(key)

            print ('Approaching KeyError')
            raise KeyError

     class Admin(object):

        __name__ = ''
        __parent__ = Root
        __acl__ = [(Allow, Authenticated, 'admin')]

        def __init__(self):
            pass

        def __getitem__(self, key):

            if key == 'products':
               print ('admin: ', key)
               return Products()

            raise KeyError 
```

在views/admin.py

```
 @view_config(context=Admin, name='products',  renderer='admin/products.jinja2', permission = 'admin')
    def product_add(context, request):
        print 'hey products_add'
        return { 'msg': ''} 
```

不知何故，它不是呈现产品模板，而是呈现默认的 404。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T15:13:19.073

你看一下[关于 traversal 的文档](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/narr/traversal.html)，因为你还没有完全正确。[本教程](http://michael.merickel.org/projects/pyramid_auth_demo/resource_trees.html)对于理解遍历也非常有用。我将尝试在您的上下文中进行快速解释：

首先，请求的路径是拆分介绍段。例如`/admin/product`拆分为`['admin', 'product']`.

然后，金字塔尝试确定此请求的上下文。为此，它递归调用`__getitem__`（这只是另一种说法`object[segment]`）从根（它遍历）的每个段。在示例中，它会`root['admin']`返回一个管理对象，然后执行`admin['product']`. 它在遇到 KeyError 时停止。

一旦我们有了上下文，金字塔就会用这个上下文搜索一个视图，其视图名称是没有被遍历的部分。例如，如果`admin['product']`引发 KeyError，则金字塔会查找配置了`@view_config(context=Admin, name="product")`.

* * *

那么，您如何从中制作应用程序？首先，您确定什么是您的资源树。在您的情况下，它可能如下所示：

*   根
    *   行政
        *   产品容器
            *   产品

有一个以`home`管理上下文命名的视图 ( `/admin/home`)、一个没有名称的视图`ProductContainer`( `/admin/product`) 和一个以`edit`产品命名的视图 ( `/admin/product/1/edit`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T16:13:08.843

虽然我不知道下面的代码是否优雅或有任何漏洞，但它现在肯定对我有用。我会把它放进去，以防有人遇到和我一样的问题。

资源.py

```
 class ProductName(object):
        __name__ = ''
        __parent__ = Root
        __acl__ = [(Allow, Authenticated, 'admin')]

        def __init__(self, _key):
            pass

    class Products(object):

        __name__ = ''
        __parent__ = Root
        __acl__ = [(Allow, Authenticated, 'admin')]

        def __init__(self):
            pass

        def __getitem__(self, key):
            print ('products: ' + key)
            if key == 'add':
               return ProductName(key)

            print ('Approaching KeyError')
            raise KeyError 
```

意见/admin.py

```
 @view_config(context="**mycart:resources.ProductName**",  name="",     renderer='admin/product_add.jinja2', permission = 'admin')
        def product_add(context, request):
        print 'hey product add'
        return { 'msg': ''}

    @view_config(context="**mycart:resources.Products**", name='' , renderer='admin/product.jinja2', permission = 'admin')
    def product(context, request):
        print 'hey products listing'
        return { 'msg': ''} 
```

# .htaccess - .htaccess 将所有 image.php 重写为各自的图像 URL

> ID：13475568
> 
> 赞同：0
> 
> 时间：2012-11-20T14:40:34.077
> 
> 标签：.htaccess, url-rewriting

我想知道是否有一条规则可以添加到我的 .htaccess 文件中，使图像的 URL 显示为另一个图像 URL。这是我所指的用例：

我的应用程序使用 GD 库自动为图像添加水印。反过来，新加水印的图像有一个图像源`localhost/some/dir/image.php?original=someFilename.png`。

是否可以使该动态图像 URL 显示为原始 URL，但仍提供动态、带水印的图像？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:44:29.993

这应该有效（目前正在测试它）：

```
RewriteRule ^(.+\.png)$ /some/dir/image.php?original=$1 
```

对我有用，但您可能不想在文件名中允许任何字符（“.+”）。以下将更具限制性但也更安全：

```
RewriteRule ^([A-z0-9]+\.png)$ /some/dir/image.php?original=$1 
```

# ios - CPTBarPlot (Core-Plot) 上的定位标签

> ID：13475573
> 
> 赞同：4
> 
> 时间：2012-11-20T14:40:40.167
> 
> 标签：ios, position, label, core-plot, cptbarplot

我正在尝试使用 Core-Plot 更改条形图中标签的默认位置。我正在使用这种方法：

```
-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)idx; 
```

我回来了：

```
return textLayer = [[CPTTextLayer alloc] initWithText:@"2222" style:textStyle]; 
```

我得到这个结果：

![在此处输入图像描述](../Images/9e7392ef66abfab72a435e96c6f35680.png)

但我想出现如下：

![在此处输入图像描述](../Images/5451a39c65ed94682d6de0da3d8388de.png)

任何的想法？我试图在文档中找到答案，但我一直不可能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T01:48:50.857

`labelOffset`对条形图使用负数。默认值为 +10，将标签放置在条形上方 10 个像素处。此属性继承自，`CPTPlot`因此它适用于所有绘图类型，尽管默认值和行为有所不同。

# java - 在 user-service-ref 中使用 jdbc-user-service

> ID：13475575
> 
> 赞同：1
> 
> 时间：2012-11-20T14:40:45.127
> 
> 标签：java, session, authentication, spring-security

我正在使用spring security和基于数据库的身份验证，我使用了以下配置并且工作正常

```
<authentication-manager alias="authenticationManager">
  <authentication-provider>
     <jdbc-user-service data-source-ref="dataSource"
      users-by-username-query="SELECT ...... U.email_address=?"
      authorities-by-username-query="SELECT ... U.email_address=?">
  </authentication-provider>
</authentication-manager> 
```

现在我想向会话添加额外的信息，遇到了[将用户添加到会话，spring security default login](https://stackoverflow.com/questions/7806086/adding-user-to-session-spring-security-default-login)，我试过了，现在我遇到了问题。

XML 说我不能同时使用 user-service-ref 和 jdbc-user-service。有没有办法解决它，或者如果我必须使用 user-service-ref 标签来验证用户身份，我必须做什么？将额外信息添加到会话中的其他方法是什么，比如整个用户对象。？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:44:06.683

经过数小时的搜索和试验，我能够做到这一点。

1.  做一个新的服务说 MyUserService 将实现`org.springframework.security.core.userdetails.UserDetailsService`并具有 annotation `@Service`。UserDetailsS​​ervice 只有一种方法`loadUserByUserName`。此方法的实现将在 MyUserService 中。它看起来像这样。

    @Service 公共类 MyUserService 实现 UserDetailsS​​ervice {

    ```
    @Override
    public UserDetails loadUserByUsername(String arg0)
            throws UsernameNotFoundException {

        MyUser user=new MyUser();
        /*get details of user and authorities from database whose username is   
                arg0 and place them in user instance */
        return user;
    }

    } 
    ```

2.  MyUser 也是一个实现的新类，`org.springframework.security.core.userdetails.UserDetails`它的所有方法都在 MyUser 类中实现。它看起来像这样。

    ```
    public class MyUser implements UserDetails {
        private static final long serialVersionUID = 1L;
    /*All the variables their getter setters that you wish to store in session. And    
       implementation of all the methods of UserDetails go here.*/

     } 
    ```

3.  像这样定义一个bean `<bean id="customUserDetailsService" class="org.aurora.timeexpense.service.MyUserService"/>`

`org.aurora.timeexpense.service.MyUserService`我定义的实现 UserDetailsS​​ervice 的服务的路径在哪里。

4.Spring安全配置会这样 `<authentication-manager alias="authenticationManager">` `<authentication-provider user-service-ref="customUserDetailsService">` `</authentication-provider>` `</authentication-manager>`

你已准备好出发。

# eclipse - JBoss 6 Web 应用程序部署错误

> ID：13475576
> 
> 赞同：0
> 
> 时间：2012-11-20T14:40:47.133
> 
> 标签：eclipse, jboss

我正在尝试建立一个开发环境来处理现有的 Web 应用程序，但似乎无法通过 JBoss 部署 war 文件。我相当肯定我已经在生产环境中准确地复制了这些技术，但不幸的是我无法使用它来进行背靠背比较。我正在使用带有 JBoss 工具插件的 Eclipse 来生成 JBoss 6 优化版本的战争。这是我的错误输出：

```
 java.lang.RuntimeException: org.jboss.deployers.client.spi.IncompleteDeploymentException: Summary of incomplete deployments (SEE PREVIOUS ERRORS FOR DETAILS):

DEPLOYMENTS IN ERROR:
  Deployment "jboss.web.deployment:war=/newyork" is in error due to the following reason(s): org.jboss.deployers.spi.DeploymentException: URL file:/C:/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1353365065325/deploy/newyork.war/ deployment failed

        at org.jboss.profileservice.management.client.upload.StreamingDeploymentTarget.invoke(StreamingDeploymentTarget.java:320)
        at org.jboss.profileservice.management.client.upload.StreamingDeploymentTarget.start(StreamingDeploymentTarget.java:197)
        at org.jboss.profileservice.management.client.upload.DeploymentProgressImpl.start(DeploymentProgressImpl.java:232)
        at org.jboss.profileservice.management.client.upload.DeploymentProgressImpl.run(DeploymentProgressImpl.java:89)
        at org.rhq.plugins.jbossas5.util.DeploymentUtils.run(DeploymentUtils.java:155)
        at org.rhq.plugins.jbossas5.AbstractManagedDeploymentComponent.invokeOperation(AbstractManagedDeploymentComponent.java:162)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.rhq.core.pc.inventory.ResourceContainer$ComponentInvocationThread.call(ResourceContainer.java:525)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: org.jboss.deployers.client.spi.IncompleteDeploymentException: Summary of incomplete deployments (SEE PREVIOUS ERRORS FOR DETAILS):

DEPLOYMENTS IN ERROR:
  Deployment "jboss.web.deployment:war=/newyork" is in error due to the following reason(s): org.jboss.deployers.spi.DeploymentException: URL file:/C:/workspace/.metadata/.plugins/org.jboss.ide.eclipse.as.core/JBoss_6.x_Runtime_Server1353365065325/deploy/newyork.war/ deployment failed

        at org.jboss.deployers.plugins.deployers.DeployersImpl.checkComplete(DeployersImpl.java:1370)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.checkComplete(DeployersImpl.java:1316)
        at org.jboss.deployers.plugins.main.MainDeployerImpl.checkComplete(MainDeployerImpl.java:968)
        at org.jboss.system.server.profileservice.deployers.MainDeployerPlugin.checkComplete(MainDeployerPlugin.java:82)
        at org.jboss.profileservice.dependency.ProfileControllerContext$DelegateDeployer.checkComplete(ProfileControllerContext.java:138)
        at org.jboss.profileservice.plugins.deploy.actions.DeploymentStartAction.doPrepare(DeploymentStartAction.java:104)
        at org.jboss.profileservice.management.actions.AbstractTwoPhaseModificationAction.prepare(AbstractTwoPhaseModificationAction.java:101)
        at org.jboss.profileservice.management.ModificationSession.prepare(ModificationSession.java:87)
        at org.jboss.profileservice.management.AbstractActionController.internalPerfom(AbstractActionController.java:234)
        at org.jboss.profileservice.management.AbstractActionController.performWrite(AbstractActionController.java:213)
        at org.jboss.profileservice.management.AbstractActionController.perform(AbstractActionController.java:150)
        at org.jboss.profileservice.plugins.deploy.AbstractDeployHandler.startDeployments(AbstractDeployHandler.java:168)
        at org.jboss.profileservice.management.upload.remoting.DeployHandlerDelegate.startDeployments(DeployHandlerDelegate.java:74)
        at org.jboss.profileservice.management.upload.remoting.DeployHandler.invoke(DeployHandler.java:156)
        at org.jboss.remoting.ServerInvoker.invoke(ServerInvoker.java:898)
        at org.jboss.remoting.transport.local.LocalClientInvoker.invoke(LocalClientInvoker.java:106)
        at org.jboss.remoting.Client.invoke(Client.java:1961)
        at org.jboss.remoting.Client.invoke(Client.java:804)
        at org.jboss.profileservice.management.client.upload.StreamingDeploymentTarget.invoke(StreamingDeploymentTarget.java:312)
        ... 15 more 
```

# android - 如何在 Android 中自定义选择器？

> ID：13475578
> 
> 赞同：1
> 
> 时间：2012-11-20T14:40:47.983
> 
> 标签：android, android-widget, picker

我想知道我可以自定义选择器的任何方式 .in android 那里他们给出了一些可以在[这里完成的提示](http://developer.android.com/design/building-blocks/pickers.html)

但我找不到任何教程。基本上，我想创建一个城市选择器，我想知道有没有办法做到这一点。我真的希望我的应用程序有一些一致性，因为我已经在使用日期和时间选择器，我需要创建相同的主题选择器。

那么有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:46:27.293

找到了解决方案，我很惊讶它是如此简单，而且没有人指出它。我们只需要使用数字选择器并给出值。要获得价值，我只需添加一个侦听器

```
NumberPicker n = (NumberPicker)findViewById(R.id.numberPicker1);
        String[] a={"noman","iqbal","ikram","cheema"};
        n.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS);
        n.setDisplayedValues(a);
        n.setMaxValue(3);
        n.setMinValue(0);
        n.setOnValueChangedListener(new OnValueChangeListener() {

            @Override
            public void onValueChange(NumberPicker picker, int oldVal, int newVal) {

                Log.e(null, newVal+"");

            }
        }); 
```

当我显示一些价值时，它不断显示软键盘只是添加

```
 n.setDescendantFocusability(NumberPicker.FOCUS_BLOCK_DESCENDANTS); 
```

这条线，所以键盘不再显示。

# objective-c - 向基于文档的应用程序添加打开功能

> ID：13475580
> 
> 赞同：1
> 
> 时间：2012-11-20T14:40:50.237
> 
> 标签：objective-c, cocoa

我有一个基于文档的应用程序，带有一个 TextView。我想添加一个将其写入 TextView 的开放功能。我有代码，但它不起作用。TextView 是空的。这是我的代码：

```
 #import "Document.h"

@implementation Document

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    NSFont *courier = [NSFont fontWithName: @"Courier" size:12];
    [_textView setString: @"Blabla"];
    [_textView setFont:courier];
    NSLog(@"Tesg");
    [_textView setString:@"TEST"];

}

- (id)init
{
        NSLog(@"Tesg");

    self = [super init];
    if (self) {

        // Add your subclass-specific initialization here.

    }
    return self;
}

- (NSString *)windowNibName
{
    // Override returning the nib file name of the document
    // If you need to use a subclass of NSWindowController or if your document supports multiple NSWindowControllers, you should remove this method and override -makeWindowControllers instead.
    return @"Document";
}

- (void)windowControllerDidLoadNib:(NSWindowController *)aController
{
    [super windowControllerDidLoadNib:aController];
    // Add any code here that needs to be executed once the windowController has loaded the document's window.
}

+ (BOOL)autosavesInPlace
{
    return YES;
}

/*- (NSData *)dataOfType:(NSString *)typeName error:(NSError **)outError
{
    // Insert code here to write your document to data of the specified type. If outError != NULL, ensure that you create and set an appropriate error when returning nil.
    // You can also choose to override -fileWrapperOfType:error:, -writeToURL:ofType:error:, or -writeToURL:ofType:forSaveOperation:originalContentsURL:error: instead.
    NSException *exception = [NSException exceptionWithName:@"UnimplementedMethod" reason:[NSString stringWithFormat:@"%@ is unimplemented", NSStringFromSelector(_cmd)] userInfo:nil];
    @throw exception;
    return nil;
}
*/
- (NSData *)dataOfType:(NSString *)pTypeName error:(NSError **)pOutError {

    NSDictionary * zDict;

    if ([pTypeName compare:@"public.plain-text"] == NSOrderedSame ) {
        zDict = [NSDictionary dictionaryWithObjectsAndKeys:
                 NSPlainTextDocumentType,
                 NSDocumentTypeDocumentAttribute,nil];
    } else {
        NSLog(@"ERROR: dataOfType pTypeName=%@",pTypeName);
        *pOutError = [NSError errorWithDomain:NSOSStatusErrorDomain
                                         code:unimpErr
                                     userInfo:NULL];
        return NULL;
    } // end if

    NSString * zString = [[_textView textStorage] string];
    NSData * zData = [zString dataUsingEncoding:NSASCIIStringEncoding];
    return zData;

} // end dataOfType
/*
- (BOOL)readFromData:(NSData *)data ofType:(NSString *)typeName error:(NSError **)outError
{
    // Insert code here to read your document from the given data of the specified type. If outError != NULL, ensure that you create and set an appropriate error when returning NO.
    // You can also choose to override -readFromFileWrapper:ofType:error: or -readFromURL:ofType:error: instead.
    // If you override either of these, you should also override -isEntireFileLoaded to return NO if the contents are lazily loaded.
    NSLog(data);
    NSException *exception = [NSException exceptionWithName:@"UnimplementedMethod" reason:[NSString stringWithFormat:@"%@ is unimplemented", NSStringFromSelector(_cmd)] userInfo:nil];
    @throw exception;
    return YES;
}
*/

- (BOOL)readFromData:(NSData *)pData
              ofType:(NSString *)pTypeName
               error:(NSError **)pOutError {

    if ([pTypeName compare:@"public.plain-text"] != NSOrderedSame) {
        NSLog(@"** ERROR ** readFromData pTypeName=%@",pTypeName);
        *pOutError = [NSError errorWithDomain:NSOSStatusErrorDomain
                                         code:unimpErr
                                     userInfo:NULL];
        return NO;
    } // end if

    NSDictionary *zDict = [NSDictionary dictionaryWithObjectsAndKeys:
                           NSPlainTextDocumentType,
                           NSDocumentTypeDocumentAttribute,
                           nil];
    NSDictionary *zDictDocAttributes;
    NSError *zError = nil;
    zNSAttributedStringObj =
    [[NSAttributedString alloc]initWithData:pData
                                    options:zDict
                         documentAttributes:&zDictDocAttributes
                                      error:&zError];
    if ( zError != NULL ) {
        NSLog(@"Error readFromData: %@",[zError localizedDescription]);
        return NO;
    } // end if
    NSString *content = [zNSAttributedStringObj string];
    NSLog(@"%@", content);
    NSLog(@"%c", [_textView isEditable]);
    [_textView setString:content];

    return YES;

} // end readFromData

@end 
```

谢谢！

请不要将其标记为“不是真正的问题”或其他内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:54:21.043

问题是在创建窗口之前调用了 readXXX 方法。这意味着它`_textView`为零。您需要使用从文件加载的信息`-(void)windowControllerDidLoadNib:(NSWindowController *)windowController`来填充。`_textView`

您可以通过在代码中调用 NSAssert 来确认您的方法正确运行所需的先决条件，从而避免将来遇到此类问题：

```
NSAssert(_textView != nil, @"_textView not initialized"); 
```

# javascript - .replace() 方法确实改变了字符串

> ID：13475581
> 
> 赞同：1
> 
> 时间：2012-11-20T14:40:50.790
> 
> 标签：javascript, jquery

我只是尝试使用该`.replace()`方法。它不起作用。

HTML：

```
<div class="try"> </div> 
```

JS：

```
var valr='r';
valr.replace('r', 't');
$('.try').prepend('<div> ' + valr + '</div>'); 
```

结果：我得到'r'，而我想得到't'

知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T14:41:44.390

`replace()`（一个 JavaScript 函数，不是 jQuery）返回一个字符串，试试这个：

```
var valr='r';
valr = valr.replace('r', 't');
$('.try').prepend('<div> '+valr+'</div>'); 
```

[文档`.replace()`在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T14:41:57.340

替换后需要保存变量

```
valr = valr.replace('r','t'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-20T14:42:31.097

首先`replace`不是 jQuery 方法 - 它是纯 javascript。其次，它返回字符串的一个新实例，因此您需要：

```
valr = valr.replace('r', 't'); 
```

# c++ - 公共变量访问的线程安全

> ID：13475586
> 
> 赞同：4
> 
> 时间：2012-11-20T14:41:14.190
> 
> 标签：c++, boost, thread-safety, mutex, getter-setter

我的班级中有一些私有变量（比如int a、int b、int c）。由于一些内部操作，我需要以线程安全的方式设置/获取此类变量，因此我使用了一些包装 getter/setter 并使用了作用域互斥锁。

```
void setA(int a)
{
    unique_lock<mutex> lock(opMutex);

    this->a = a;
}

void getA(int a)
{
    unique_lock<mutex> lock(opMutex);

    return a;
}

void setB(int b)
{
    unique_lock<mutex> lock(opMutex);

    this->b = b;
}

void setC(int c)
{
    unique_lock<mutex> lock(opMutex);

    this->c = c;
} 
```

我的问题是：是否可以避免 getter/setter 方法（公共变量）并保持对此类变量的分配/读取操作的线程安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:45:29.057

如果您将线程安全同步代码移到 getter setter 之外，并且到处都使用样板代码锁定互斥锁使代码膨胀，是的，可以不使用 getter 和 setter，但这会**适得其反**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T14:50:42.810

如果 C++11 是一个选项，请考虑使用[`std::atomic_store`and`std::atomic_load`](http://en.cppreference.com/w/cpp/atomic/atomic_store) with `atomic_int`。但是，您可能仍应使用 getter/setter，因此您对如何管理数据的决定（例如，原子和互斥体之间的选择）不会影响类用户，即使只有您自己 :)

如果 C++11 不是一个选项，您可以使用 C++98 兼容的原子操作实现之一。我已经使用[建议的 boost atomic 库](http://www.chaoticmind.net/~hcb/projects/boost.atomic/doc/index.html)很长一段时间了，并且还有其他实现在 Internet 上漫游。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T15:38:37.950

Boost 中有一个类似的库[boost::atomic](http://www.chaoticmind.net/~hcb/projects/boost.atomic/doc/index.html)但它尚未包含在标准 AFAIK 中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T14:47:28.053

您可以使用`std::atomic<int> a, b, c;`

PS。呃，我没有看到 boost 标签，所以我以为你在说 C++11 ...

# ruby-on-rails - 使用 Devise 的导轨辅助方法

> ID：13475590
> 
> 赞同：1
> 
> 时间：2012-11-20T14:41:19.350
> 
> 标签：ruby-on-rails, methods, devise, has-one

我正在与 Devise 合作，我有三个模型：

```
class User < ActiveRecord::Base
  ...
  has_many :friendships
  has_many :friends, :through => :friendships
  has_one :address
end

class Friendship < ActiveRecord::Base  
  belongs_to :user
  belongs_to :friend, :class_name => "User"
end

class Address < ActiveRecord::Base
  belongs_to :user
end 
```

在我的一种观点中，您可以找到它：

```
Welcome <%= current_user.name %>
<% current_user.friends.each do |x| %>
<p><%= x.name + " " + x.address.data %></p>
<% end %> 
```

好吧，我不知道访问数据地址的方式是否正确，但我想做这样的事情：

哪里 get_address_data

```
def get_address
 this.address.data
end 
```

但我没有找到正确的方法来做到这一点。

# c# - 在使用 c# 的 winrt 中使用 SQLiteConnection 的问题？

> ID：13475592
> 
> 赞同：4
> 
> 时间：2012-11-20T14:41:23.497
> 
> 标签：c#, sqlite, windows-runtime

我是 WinRT 开发的新手。我正在尝试在 c# 中使用 sqlite，但是当我尝试像这样连接到本地数据库文件时：

```
string path = @"D:\product.s3db";
string constr = "Data Source=" + path + "; Version=3; PRAGMA temp_store_directory=" + Windows.Storage.ApplicationData.Current.TemporaryFolder.Path;
SQLiteConnection con = new SQLiteConnection(constr); 
```

它返回一个异常“无法打开数据库文件”，那么这里出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:27:27.693

我认为原因是 WinRT 应用程序是沙盒的，并且对文件系统的访问权限有限。请尝试将数据库存储在您的应用程序可用的文件夹中。
检查Windows 8：WinRT文章[中读取和写入文件的正确方法，它可能会有所帮助。](http://www.codeproject.com/Articles/432876/Windows-8-The-Right-Way-to-Read-Write-Files-in-Win)

# xml - 使用什么算法来针对 XSD 验证 XML？

> ID：13475593
> 
> 赞同：4
> 
> 时间：2012-11-20T14:41:25.420
> 
> 标签：xml, validation, parsing, xsd

我正在编写自己的验证 XML 解析器。（是的，我知道这是一项非常复杂的任务，使用现有的产品，如 libxml2 或 Xerces 将是更明智的选择。但这不是一个选项，所以请多多包涵。）

将 XML 和 XSD 文件解析为树结构应该不是很困难。但是，我似乎无法弄清楚使用什么算法来验证 XML 树与 XSD 的对比。

我做了一些研究，但我发现的一切要么太通用（如何编写编译器等），要么太具体（例如增量验证）。

我有一些自己的想法，但它们都相当复杂，所以在开始编码之前，我真的很想对我的想法的有效性（不是双关语）更加确定。

在此先感谢您，如果您认为可以提供帮助，请随时询问更多详细信息！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T15:37:20.477

编写 XSD 处理器并让它通过 W3C 测试套件中的 50,000 次左右的测试需要大量的工作。但是，如果您坚持使用针对语法验证实例的关键算法，这是一个很好的起点：

[http://www.ltg.ed.ac.uk/~ht/XML_Europe_2003.html](http://www.ltg.ed.ac.uk/~ht/XML_Europe_2003.html)

您还应该获得一份 Aho 和 Ullman 的副本，其中包含 Henry 引用的算法。

# jquery - 说目标元素获得动态边距顶部的“锚链接”

> ID：13475595
> 
> 赞同：5
> 
> 时间：2012-11-20T14:41:36.150
> 
> 标签：jquery, html, css, anchor, margin

我有一个小“大”问题，不知道如何解决。

如果我有一个带有锚点的链接，该锚点跳转到具有顶部边距的元素，则边距将被“忽略”，如下例所示：

[http://jsfiddle.net/T38uk/](http://jsfiddle.net/T38uk/)

如果我有一个margin-top =“0”的div，并且会动态添加一些margin-top，则锚点会跳转到“旧”位置，如下例所示：

[http://jsfiddle.net/eG2Gd/](http://jsfiddle.net/eG2Gd/)

是否可以告诉锚目标元素上存在动态更改的边距？

以下是单个代码片段：

HTML

```
<a href="#testanchor" class="link">Testanchor</a>
<div id="zwischenelement"></div>
<div id="testanchor">Hier muss der Anker hinspringen</div>​ 
```

CSS

```
body {
   height: 8000px;        
}

.link {
   display: block;
}

#zwischenelement {
   height: 200px;
   background-color: grey;    
}

#testanchor {
   margin-top: 40px;  
   background-color: red;
   padding:15px;   
}​ 
```

JS（包括“scrollAnimate”jQuery 插件）

```
$(document).ready(function() {

$('#testanchor').scrollAnimate({
    startScroll: 0,
    endScroll: 100,
    cssProperty: 'margin-top',
    before: 0,
    after: 40
});

}); 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:06:24.793

一种解决方案是用滚动到元素当前位置的 jQuery 函数替换正常的链接单击操作，加上您希望它向下移动的像素数：

```
$('a[href^=#]').on('click',function(e) {
    e.preventDefault();
    $(document).scrollTop($('#testanchor').position().top+40); 
    // 40 pixels is specific to this case
}); 
```

[http://jsfiddle.net/mblase75/eG2Gd/2/](http://jsfiddle.net/mblase75/eG2Gd/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:15:11.483

您将无法让锚点指向 div 的边距顶部，因为它链接到 div 并且边距只是 div 上方的间距。要么你需要做一些像 Blazemonger 建议的事情，要么在你想要链接的 div 周围创建一个 div 并链接到它。

例如：

```
<a href="#testAnchorHolder" class="link">Testanchor</a>
<div id="zwischenelement"></div>
<div id="testAnchorHolder">
    <div id="testanchor">Hier muss der Anker hinspringen</div>
</div> 
```

和CSS：

```
#testAnchorHolder {
    padding-top: 40px;
}
#testanchor { 
    background-color: red;
    padding:15px;   
}​ 
```

[http://jsfiddle.net/FchLX/](http://jsfiddle.net/FchLX/)

# linux - 是否可以使用 tail -f 选项打开文件时进行搜索

> ID：13475599
> 
> 赞同：4
> 
> 时间：2012-11-20T14:41:44.010
> 
> 标签：linux

我使用 tail -f mylog.log 打开了一个日志文件，我可以在这段时间内搜索特定的字符串吗？

意味着当应用程序正在运行时，我使用 tail 命令打开日志，是否可以在该日志中搜索特定键？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:46:51.050

我不认为`tail`可以做到这一点。

而不是`tail -f`, 使用`less +F`which 具有相同的行为。然后您可以按`Ctrl+C`停止拖尾并使用`?`向后搜索。要继续从内部拖尾文件`less`，请按`F`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:43:20.097

如果您询问该文件是否可以被另一个进程读取，是的，它可以。换句话说，例如，如果您从另一个 shell 实例中搜索文件，即使另一个实例正在对其进行 tail -f 操作，它也将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:43:44.693

是的。

通过管道将其导入 grep。

```
tail -f | grep searchstring 
```

# java - https到http重写，https检测，java spring mvc

> ID：13475607
> 
> 赞同：1
> 
> 时间：2012-11-20T14:42:00.437
> 
> 标签：java, http, https

我正在尝试通过修改以下代码来检测 https 请求：

```
public static boolean isOnHttps(HttpServletRequest request) {
    String protoHeader = request.getHeader(Constants.Header.X_FORWARDED_PROTO);

    if (null == protoHeader || ! protoHeader.equals("https")) {
        return false;
    }

    return true;
} 
```

上面的代码无法检测到一些 https 请求，对此我有两个问题：

1.  参数`getHeader`代表什么？

2.  我应该怎么做才能检测到通过 https 向我们的服务器发出的每个请求？

如果您能指出我的任何方向，那将非常有帮助。提前谢谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:58:37.280

> 问：getHeader 的参数代表什么？

的目的`X_FORWARD_PROTO`是确定一个 HTTP 请求的发起协议（因为中间的负载均衡器/代理可以终止 HTTPS 连接）。如果您发布您导入的常量，这将很有用。对于哪些请求，它无法检测到原始协议？但是，下面提到的方法应该会有所帮助..

> 问：我应该怎么做才能检测到通过 https 向我们的服务器发出的每个请求？

有一种方法可以在 https 请求的情况下`SerlvetRequest#isSecure()`返回`true`。来自[Javadoc](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/api/javax/servlet/ServletRequest.html#isSecure%28%29)：

> 返回一个布尔值，指示此请求是否使用安全通道（例如 HTTPS）发出。

如需进一步阅读，请考虑这个[很好的答案](https://stackoverflow.com/questions/8200853/how-can-i-know-if-the-request-to-the-servlet-was-executed-using-http-or-https)。

# iis - 来自模块的 Orchard CMS 静态资源返回 404

> ID：13475608
> 
> 赞同：2
> 
> 时间：2012-11-20T14:42:02.513
> 
> 标签：iis, orchardcms

我已经通过 Web PI 将 Orchard 部署到 IIS7。我遇到的问题是从 /Modules/ 目录请求的所有静态内容（css/js）都没有被服务器提供并返回 404。

同时来自 Core 的静态内容加载正常。

解决此问题的一般策略是什么？

Orchard 测试部署的 url 是[cms.radacode.com](http://cms.radacode.com)

PS Orchard 的全新 WebPI 安装受到相同问题的影响。很可能它与 IIS 上的权限有关，但尚不清楚为什么只有 /Modules/ 文件夹被阻止进行内容检索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T13:17:57.330

在找到解决方案之前，我遇到了同样的问题，弄乱了文件权限等。

我在我的 Win8 开发电脑上安装了 Orchard 1.6.1，一切正常。复制到我的 Windows Server 2008 托管服务器，我首先注意到的是 Admin -> Widgets 部分在托管服务器版本上的布局不正确。

经过一番调查，发现 /Modules/Orchard.Widgets/Styles/ 中的 css 文件给出了 404。

我终于找到了我的问题的原因是 UrlScan 阻止访问带有 . 在他们中！

将 UrlScan.ini 从 AllowDotInPath=0 更改为 AllowDotInPath=1，现在一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T19:13:31.040

如果您查看 Scripts、Content 等文件夹，则有一个 web.config 可以访问静态内容。您尝试从中访问静态文件的文件夹中是否有该 web.config？

这是博客模块中的一个示例：[Web.config](https://github.com/OrchardCMS/Orchard/blob/dev/src/Orchard.Web/Modules/Orchard.Blogs/Content/Web.config)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:20:36.033

我遇到了同样的问题，我通过将网站切换到 ASP.NET 4.0 集成模式（而不是标准经典模式）来解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T12:05:54.457

同样的问题，更多信息：

*   http : //MySite/Themes/ **TheThemeMachine** /Styles/Site.css 适合所有人
*   访问 http : //MySite/Themes/ **MyTheme** /Styles/site.css 仅对登录用户 (admin) 有效，对匿名用户无效
*   两个主题文件夹中的 web.config 相同
*   视窗服务器 2012
*   Orchard 1.6.1.0（从源代码编译）
*   在开发计算机上（使用开发服务器）一切正常，因此很难追踪问题。

作为一种解决方法，更改了 TheThemeMachine 上的 site.css，但仍在寻找适当的修复方法。

# xml - XSL 不同的值

> ID：13475609
> 
> 赞同：3
> 
> 时间：2012-11-20T14:42:12.423
> 
> 标签：xml, xslt, xslt-1.0

我有以下 XML 数据：

```
<Timesheet>
<WeekEnding>Oct 7, 2012</WeekEnding>
<JobNumber>Doe - 508</JobNumber>
<WGNumber>WG No.</WGNumber>
<Customer>Dummy Company</Customer>
<City>Raleigh</City>
<State>North Carolina</State>
<TeamMember>
    <EmployeeNumber>101010</EmployeeNumber>
    <EmployeeName>Doe, Joseph</EmployeeName>
    <EmployeeClass>UCL</EmployeeClass>
    <Monday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>safety meeting</WorkOrderNumber>
            <RegularHours>.5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Safety meeting</Notes>
        </TimeDetail>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>rain time</WorkOrderNumber>
            <RegularHours>2</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Rain time</Notes>
        </TimeDetail>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>777091</WorkOrderNumber>
            <RegularHours>7.5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Capital blvd st lights</Notes>
        </TimeDetail>
    </Monday>
    <Tuesday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>safety meeting</WorkOrderNumber>
            <RegularHours>.5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Safety meeting</Notes>
        </TimeDetail>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>777091</WorkOrderNumber>
            <RegularHours>9.5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Capital blvd st lights</Notes>
        </TimeDetail>
    </Tuesday>
    <Wednesday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>5555591</WorkOrderNumber>
            <RegularHours>10</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Capital blvd st lights</Notes>
        </TimeDetail>
    </Wednesday>
    <Thursday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>111122</WorkOrderNumber>
            <RegularHours>10</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>120 sigma dr</Notes>
        </TimeDetail>
    </Thursday>
    <Friday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>999935</WorkOrderNumber>
            <RegularHours>Regular</RegularHours>
            <OverTimeHours>8</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>St light job Progress to pay half time</Notes>
        </TimeDetail>
    </Friday>
    <Saturday></Saturday>
    <Sunday></Sunday>
</TeamMember>
<TeamMember>
    <EmployeeNumber>606060</EmployeeNumber>
    <EmployeeName>Does, Stephen</EmployeeName>
    <EmployeeClass>EO</EmployeeClass>
    <Monday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>safety meeting</WorkOrderNumber>
            <RegularHours>.5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Safety meeting</Notes>
        </TimeDetail>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>rain time</WorkOrderNumber>
            <RegularHours>2</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Rain time</Notes>
        </TimeDetail>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>777091</WorkOrderNumber>
            <RegularHours>7.5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Capital blvd st lights</Notes>
        </TimeDetail>
    </Monday>
    <Tuesday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>safety meeting</WorkOrderNumber>
            <RegularHours>.5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Safety meeting</Notes>
        </TimeDetail>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>777091</WorkOrderNumber>
            <RegularHours>9.5</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Capital blvd st lights</Notes>
        </TimeDetail>
    </Tuesday>
    <Wednesday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>5555591</WorkOrderNumber>
            <RegularHours>10</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Capital blvd st lights</Notes>
        </TimeDetail>
    </Wednesday>
    <Thursday></Thursday>
    <Friday></Friday>
    <Saturday></Saturday>
    <Sunday></Sunday>
</TeamMember>
<TeamMember>
    <EmployeeNumber>707070</EmployeeNumber>
    <EmployeeName>Hancock, Samuel</EmployeeName>
    <EmployeeClass>EO</EmployeeClass>
    <Monday></Monday>
    <Tuesday></Tuesday>
    <Wednesday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>5555591</WorkOrderNumber>
            <RegularHours>10</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>Capital blvd st lights</Notes>
        </TimeDetail>
    </Wednesday>
    <Thursday></Thursday>
    <Friday></Friday>
    <Saturday></Saturday>
    <Sunday></Sunday>
</TeamMember>
<TeamMember>
    <EmployeeNumber>808080</EmployeeNumber>
    <EmployeeName>Franklin, Ben</EmployeeName>
    <EmployeeClass>EO</EmployeeClass>
    <Monday></Monday>
    <Tuesday></Tuesday>
    <Wednesday></Wednesday>
    <Thursday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>111122</WorkOrderNumber>
            <RegularHours>10</RegularHours>
            <OverTimeHours>Over Time</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>120 sigma dr</Notes>
        </TimeDetail>
    </Thursday>
    <Friday></Friday>
    <Saturday></Saturday>
    <Sunday></Sunday>
</TeamMember>
<TeamMember>
    <EmployeeNumber>909090</EmployeeNumber>
    <EmployeeName>Doess, Smith</EmployeeName>
    <EmployeeClass>UCL</EmployeeClass>
    <Monday></Monday>
    <Tuesday></Tuesday>
    <Wednesday></Wednesday>
    <Thursday></Thursday>
    <Friday>
        <TimeDetail>
            <StartTime>Start</StartTime>
            <StopTime>Stop</StopTime>
            <WorkOrderNumber>999935</WorkOrderNumber>
            <RegularHours>4</RegularHours>
            <OverTimeHours>4</OverTimeHours>
            <OtherHours>Other</OtherHours>
            <PerDiem>NO</PerDiem>
            <Notes>St light job Progress to pay half time</Notes>
        </TimeDetail>
    </Friday>
    <Saturday></Saturday>
    <Sunday></Sunday>
</TeamMember> 
```

我正在遍历员工并使用以下循环显示数据：

```
<xsl:for-each select="Timesheet/TeamMember[EmployeeNumber!='Employee No.']"></xsl:for-each> 
```

在该循环中，我需要执行另一个循环，该循环将显示员工循环当前位置的不同工作订单。下面是我一直在使用的一些代码。问题是它返回整个 XML 文件而不是当前员工的所有不同工单。我已经反复修改了几个小时，但我要么得到 XML 文件中的所有工作订单，要么得到 0。有人能给我一点帮助吗？谢谢。

我在 XSLT 的顶部声明了这个键

```
<xsl:key name="distinctWorkOrder" match="//WorkOrderNumber" use="."></xsl:key> 
```

这是我一直试图为员工获取工作订单的循环

```
<xsl:for-each select="..//WorkOrderNumber[generate-id() = generate-id(key('distinctWorkOrder', .)[1])][//EmployeeNumber=$empId])"> 
```

更新：输出是 HTML。为了显示员工信息，我这样做了：

```
<tr style="height:20px;">
                        <td class="normalBorders" style="text-align:left;">Name</td>
                        <td class="borderT" style="text-align:center;">
                            <div style="border-bottom:1px solid black;height:12px;width:200px;">
                                <xsl:value-of select="EmployeeName"></xsl:value-of>
                            </div>
                        </td>
                        <td colspan="2" class="borderT" style="text-align:right;">Emp. ID#</td>
                        <td colspan="2" class="borderT" style="text-align:center">
                            <div style="border-bottom:1px solid black;height:15px; width:100%;display:inline-block;">
                                <xsl:value-of select="EmployeeNumber"/>
                            </div>
                        </td>
                        <td colspan="2" class="borderT">&#160;</td>
                        <td rowspan="2" colspan="4" class="borderT borderR">
                            <div style="width:100%;height:27px;border-bottom:1px solid black;">
                                <img src="{../Signatures/Path}" style="width:100%;height:34px;"/>
                            </div>
                        </td>
                    </tr>
                    <tr style="height:20px;">
                        <td class="borderL" style="text-align:left;">Sign/Date</td>
                        <td style="text-align:center;">
                            <div style="border-bottom:1px solid black;height:12px;width:200px;">
                                <xsl:value-of select="EmployeeName"></xsl:value-of>
                            </div>
                        </td>
                        <td colspan="5">&#160;</td>
                        <td style="text-align:right;">Approved</td>
                    </tr> 
```

这里我需要循环输出类似这样的工单数据

```
<xsl:for-each select="..//WorkOrderNumber[generate-id() = generate-id(key('distinctWorkOrder', .)[1])][//EmployeeNumber=$empId])">
<tr>
                 <td class="normalBorders"><xsl:value-of select="//WorkOrderNumber"/></td>
               <td>Other data</td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:51:40.283

**下面是如何做到这一点**（HTML 格式留给读者作为练习）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kEmpOrder"
  match="TeamMember[not(EmployeeNumber='Employee No.')]/*/*/WorkOrderNumber"
  use="concat(../../../EmployeeNumber, '+', .)"/>

 <xsl:template match="TeamMember">
  <Employee>
     <xsl:copy-of select="*[starts-with(name(), 'Employee')]"/>
     <WorkOrders>
      <xsl:copy-of select=
      "*/*/WorkOrderNumber
           [generate-id()
           =
            generate-id(key('kEmpOrder',
                             concat(../../../EmployeeNumber, '+', .)
                             )[1]
                      )
         ]
      "/>
     </WorkOrders>
    </Employee>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<Timesheet>
    <WeekEnding>Oct 7, 2012</WeekEnding>
    <JobNumber>Doe - 508</JobNumber>
    <WGNumber>WG No.</WGNumber>
    <Customer>Dummy Company</Customer>
    <City>Raleigh</City>
    <State>North Carolina</State>
    <TeamMember>
        <EmployeeNumber>101010</EmployeeNumber>
        <EmployeeName>Doe, Joseph</EmployeeName>
        <EmployeeClass>UCL</EmployeeClass>
        <Monday>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>safety meeting</WorkOrderNumber>
                <RegularHours>.5</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Safety meeting</Notes>
            </TimeDetail>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>rain time</WorkOrderNumber>
                <RegularHours>2</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Rain time</Notes>
            </TimeDetail>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>777091</WorkOrderNumber>
                <RegularHours>7.5</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Capital blvd st lights</Notes>
            </TimeDetail>
        </Monday>
        <Tuesday>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>safety meeting</WorkOrderNumber>
                <RegularHours>.5</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Safety meeting</Notes>
            </TimeDetail>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>777091</WorkOrderNumber>
                <RegularHours>9.5</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Capital blvd st lights</Notes>
            </TimeDetail>
        </Tuesday>
        <Wednesday>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>5555591</WorkOrderNumber>
                <RegularHours>10</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Capital blvd st lights</Notes>
            </TimeDetail>
        </Wednesday>
        <Thursday>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>111122</WorkOrderNumber>
                <RegularHours>10</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>120 sigma dr</Notes>
            </TimeDetail>
        </Thursday>
        <Friday>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>999935</WorkOrderNumber>
                <RegularHours>Regular</RegularHours>
                <OverTimeHours>8</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>St light job Progress to pay half time</Notes>
            </TimeDetail>
        </Friday>
        <Saturday></Saturday>
        <Sunday></Sunday>
    </TeamMember>
    <TeamMember>
        <EmployeeNumber>606060</EmployeeNumber>
        <EmployeeName>Does, Stephen</EmployeeName>
        <EmployeeClass>EO</EmployeeClass>
        <Monday>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>safety meeting</WorkOrderNumber>
                <RegularHours>.5</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Safety meeting</Notes>
            </TimeDetail>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>rain time</WorkOrderNumber>
                <RegularHours>2</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Rain time</Notes>
            </TimeDetail>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>777091</WorkOrderNumber>
                <RegularHours>7.5</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Capital blvd st lights</Notes>
            </TimeDetail>
        </Monday>
        <Tuesday>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>safety meeting</WorkOrderNumber>
                <RegularHours>.5</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Safety meeting</Notes>
            </TimeDetail>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>777091</WorkOrderNumber>
                <RegularHours>9.5</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Capital blvd st lights</Notes>
            </TimeDetail>
        </Tuesday>
        <Wednesday>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>5555591</WorkOrderNumber>
                <RegularHours>10</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Capital blvd st lights</Notes>
            </TimeDetail>
        </Wednesday>
        <Thursday></Thursday>
        <Friday></Friday>
        <Saturday></Saturday>
        <Sunday></Sunday>
    </TeamMember>
    <TeamMember>
        <EmployeeNumber>707070</EmployeeNumber>
        <EmployeeName>Hancock, Samuel</EmployeeName>
        <EmployeeClass>EO</EmployeeClass>
        <Monday></Monday>
        <Tuesday></Tuesday>
        <Wednesday>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>5555591</WorkOrderNumber>
                <RegularHours>10</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>Capital blvd st lights</Notes>
            </TimeDetail>
        </Wednesday>
        <Thursday></Thursday>
        <Friday></Friday>
        <Saturday></Saturday>
        <Sunday></Sunday>
    </TeamMember>
    <TeamMember>
        <EmployeeNumber>808080</EmployeeNumber>
        <EmployeeName>Franklin, Ben</EmployeeName>
        <EmployeeClass>EO</EmployeeClass>
        <Monday></Monday>
        <Tuesday></Tuesday>
        <Wednesday></Wednesday>
        <Thursday>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>111122</WorkOrderNumber>
                <RegularHours>10</RegularHours>
                <OverTimeHours>Over Time</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>120 sigma dr</Notes>
            </TimeDetail>
        </Thursday>
        <Friday></Friday>
        <Saturday></Saturday>
        <Sunday></Sunday>
    </TeamMember>
    <TeamMember>
        <EmployeeNumber>909090</EmployeeNumber>
        <EmployeeName>Doess, Smith</EmployeeName>
        <EmployeeClass>UCL</EmployeeClass>
        <Monday></Monday>
        <Tuesday></Tuesday>
        <Wednesday></Wednesday>
        <Thursday></Thursday>
        <Friday>
            <TimeDetail>
                <StartTime>Start</StartTime>
                <StopTime>Stop</StopTime>
                <WorkOrderNumber>999935</WorkOrderNumber>
                <RegularHours>4</RegularHours>
                <OverTimeHours>4</OverTimeHours>
                <OtherHours>Other</OtherHours>
                <PerDiem>NO</PerDiem>
                <Notes>St light job Progress to pay half time</Notes>
            </TimeDetail>
        </Friday>
        <Saturday></Saturday>
        <Sunday></Sunday>
    </TeamMember>
</Timesheet> 
```

**产生了想要的、正确分组的结果：**

```
<Employee>
   <EmployeeNumber>101010</EmployeeNumber>
   <EmployeeName>Doe, Joseph</EmployeeName>
   <EmployeeClass>UCL</EmployeeClass>
   <WorkOrders>
      <WorkOrderNumber>safety meeting</WorkOrderNumber>
      <WorkOrderNumber>rain time</WorkOrderNumber>
      <WorkOrderNumber>777091</WorkOrderNumber>
      <WorkOrderNumber>5555591</WorkOrderNumber>
      <WorkOrderNumber>111122</WorkOrderNumber>
      <WorkOrderNumber>999935</WorkOrderNumber>
   </WorkOrders>
</Employee>
<Employee>
   <EmployeeNumber>606060</EmployeeNumber>
   <EmployeeName>Does, Stephen</EmployeeName>
   <EmployeeClass>EO</EmployeeClass>
   <WorkOrders>
      <WorkOrderNumber>safety meeting</WorkOrderNumber>
      <WorkOrderNumber>rain time</WorkOrderNumber>
      <WorkOrderNumber>777091</WorkOrderNumber>
      <WorkOrderNumber>5555591</WorkOrderNumber>
   </WorkOrders>
</Employee>
<Employee>
   <EmployeeNumber>707070</EmployeeNumber>
   <EmployeeName>Hancock, Samuel</EmployeeName>
   <EmployeeClass>EO</EmployeeClass>
   <WorkOrders>
      <WorkOrderNumber>5555591</WorkOrderNumber>
   </WorkOrders>
</Employee>
<Employee>
   <EmployeeNumber>808080</EmployeeNumber>
   <EmployeeName>Franklin, Ben</EmployeeName>
   <EmployeeClass>EO</EmployeeClass>
   <WorkOrders>
      <WorkOrderNumber>111122</WorkOrderNumber>
   </WorkOrders>
</Employee>
<Employee>
   <EmployeeNumber>909090</EmployeeNumber>
   <EmployeeName>Doess, Smith</EmployeeName>
   <EmployeeClass>UCL</EmployeeClass>
   <WorkOrders>
      <WorkOrderNumber>999935</WorkOrderNumber>
   </WorkOrders>
</Employee> 
```

**说明**：

正确使用带有复合键的**[Muenchian 分组方法。](http://www.jenitennison.com/xslt/grouping/muenchian.html)**

# python - python 中用于定义插件的不同策略，这些插件也可以在其定义框架之外运行

> ID：13475614
> 
> 赞同：0
> 
> 时间：2012-11-20T14:42:31.637
> 
> 标签：python, class, plugins, metaclass

场景如下：

我正在构建一个将外部脚本用作插件的框架。人们将能够为符合某些接口的脚本创建“适配器”。这些适配器将被集成到框架中（因此需要插件注册）或通过简单的导入“松散地”使用。

换句话说，适配器用于脚本使用标准化。

我可能想得太复杂了，但我目前正在使用的解决方案涉及创建一个定义接口（和一些实用方法）的抽象类。抽象类的模块将只加载一次，框架将加载一个带有自注册元类的版本，而插件本身将加载一个更简单的版本（第一个注册抽象类的版本获胜）。

这迫使插件有一个定义抽象类的文件，因此是“合同”。我看不出有什么问题。

我不会真的有两个不同的抽象类，而是一个模块文件中的一个，它的行为取决于它的加载位置（框架或插件本身）。但这不应该是相关的（我认为）。

这就是抽象类/元类的样子

```
#imp/plugin.py
import abc
class PluginAbstract(object):
    class __metaclass__(abc.ABCMeta):
        def __init__(self, name, bases, namespace):
            if name != 'PluginAbstract':
                pass #We can register the new "sub-class" if required
            return abc.ABCMeta.__init__(abc.ABCMeta, name, bases, namespace) 
```

实现将类似于：

```
#impl/MyPlugin.py
if 'plugin' not in locals():
    from impl import plugin

class MyPlugin(plugin.PluginAbstract):
    pass  #rest of the implementation.... 
```

因此，如果框架已经注册`PluginAbstract`，则将继承该框架，否则将使用*合同文件中的那个。* `impl/plugin.py`

我不希望适配器需要安装框架，因此需要安装带有接口的单个​​文件。

这个策略有意义吗？还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:49:50.653

在 Python 中，“强制”一个接口是不寻常的。我们通常使用鸭式打字，这是通过合同或其他“束缚和纪律”方法进行设计的常识性替代方案。Duck-typing 的意思是，如果它像鸭子一样走路，像鸭子一样嘎嘎叫，那它一定是鸭子。

实际上，这意味着您根本不强制执行静态类型。相反，您相信使用正确的文档，您的代码的用户会简单地做正确的事情。这通常会大大简化您的代码。它还会让你专注于真正重要的事情，比如检查有效的输入数据。

对于具有静态类型背景（例如 Java 或 C++）的人来说，duck-typing 通常会引起某种存在主义焦虑，例如看着深渊，发现深渊回望过去。放手吧。没有深渊，只有在你的脑海里。

# java - Java-XMLSignature 验证在 weblogic 中失败

> ID：13475616
> 
> 赞同：1
> 
> 时间：2012-11-20T14:42:37.787
> 
> 标签：java, xml, validation, weblogic, signature

我正在开发一个用 Java 开发的 Web 服务，它接收一个对象作为参数。它的属性之一是用`XMLSignature`. 根据我在网上找到的一些示例，我创建了一些用于签名和验证 XML 的方法。

我已经在本地测试了我的代码（即使用一个简单的控制台应用程序），它运行良好。但是，当我将它部署到 weblogic （本地服务器）时，它没有通过验证。我被卡住了，我无法弄清楚它为什么会失败。

这是`XMLSignature`代码：[https ://gist.github.com/4118253](https://gist.github.com/4118253)

另外，我使用的是`JDev`11.1.1.1 (Java v1.6.0_11) 和`WebLogic`服务器 10.3.1.0。我很乐意提供任何其他相关信息，以帮助理解它为什么不起作用。

谢谢。

# javascript - Javascript 倒数计时器，使用 PHP 日期信息和变量从“小时：分钟：秒”开始计数

> ID：13475617
> 
> 赞同：0
> 
> 时间：2012-11-20T14:42:52.307
> 
> 标签：javascript, jquery, countdowntimer

我有一个 PHP 脚本，可以计算设定日期和当前日期（以 h:m:s 为单位）之间的差异，我想将该数据用于简单的可视化 Javascript 倒数计时器（使用 PHP 变量）。这是PHP代码：

```
$date = date('Y-m-d h:i:s a', time());
$d1 = new DateTime("2012-11-18 11:14:15");
$d2 = new DateTime($date);
$result = $d1->diff($d2);
$hours = ($result->d*24)+$result->h;
$minutes = $result->i;
$seconds = $result->s; 
```

在 Javascript 中显示倒数计时器的首选和最有效的方法是什么？（使用 $d1 和 $d2 还是 $hours、$minutes、$seconds？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:19:31.067

也许你可以使用一些 Jquery 插件，比如这个：[Jquery Countdown](http://keith-wood.name/countdown.html)

如果您不想使用插件，一般的想法是：

1.  PHP 将开始日期时间写入 HTML 标记或 javascrit 变量。

    `echo '<div id="year">$year</div>';`

2.  在 javascript 中，您创建一个函数，将当前日期时间减少 1 秒，必要时减少分钟、小时等。

    `function decrease_by_1_sec(){ ... }`

3.  接下来，在 $(document).ready() 函数上，使该`decrease_by_1_sec()`函数每秒执行一次。

    `setInterval(decrease_by_1_sec(), 1000);`

就是这样！这是一般的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:23:43.540

试试这个 jQuery 倒计时插件 - [http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

# android - Wi-Fi 是否有任何低级 API？

> ID：13475620
> 
> 赞同：4
> 
> 时间：2012-11-20T14:42:59.270
> 
> 标签：android, android-wifi

由于 API 中没有绑定，也许有一些低级 API 来控制 Wi-Fi 无线电的行为[？](https://stackoverflow.com/questions/3023226/android-2-2-wifi-hotspot-api)

更一般地说，问题是否**可以手动控制 Wi-Fi 无线电，即发送\接收数据包？**

# asp.net - 从 ASP.NET 使用 Excel 打开包含 CSV 的文本

> ID：13475622
> 
> 赞同：0
> 
> 时间：2012-11-20T14:43:03.710
> 
> 标签：asp.net, excel, c#-4.0, csv

我正在将旧的 asp.net 内部网应用程序转换为 .net 4.5。我遇到问题的部分之一应该是在 Excel 中打开一个包含 CSV 数据的字符串。

无论我如何尝试完成此操作，生成的 excel 文档都包含网站的内容，而不是我提供的文本。

另外一点，我目前在一个 Web 项目中拥有 aspx，而实用程序/业务类位于另一个中。我不知道这是否是问题的一部分。

请帮我解决这个问题。

**CSV 样本：**

```
string text = "\"Year\", \"Make\", \"Model\", \"Length\"\n\"1997\", \"Ford\", \"E350\", \"2.34\"\n\"2000\", \"Mercury\", \"Cougar\", \"2.38\"" 
```

**代码示例：**

```
private static void OpenCsvFile(string text, string name)
{
    var httpContext = HttpContext.Current;
    httpContext.Response.Clear();
    httpContext.Response.ContentType = "application/vnd.ms-excel";
    httpContext.Response.Charset = "";
    httpContext.Response.AppendHeader("Content-Disposition", "attachment; filename=" + name + ".csv");
    httpContext.Response.Write(text);
    httpContext.Response.Flush();
    httpContext.ApplicationInstance.CompleteRequest();
} 
```

**更新：**生成的文件包含网站内容而不是 CSV 文本。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head id="Head1">
    <title>
      "My WebSite"
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <link href="css/style.css" type="text/css" title="WebSite" rel="stylesheet" />
  </head>
  <body>
    <form method="post" action="Main.aspx" id="form1" name="form1">
      <table border="0" cellspacing="0" cellpadding="0" id="container">
        <td class="logo" onclick="window.location='Main.aspx';">
          <div class="logoDisplay">
            <img src="images/logo.gif" alt="" width="280px" height="67px" />
          </div>
        </td>
... etc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:19:22.623

答案是重启你的电脑。是的，它现在正在工作，无需任何进一步的代码更改。我简直不敢相信我花了这么长时间试图让它正常工作。

谢谢你的帮助，蒂姆。

# doctrine-orm - 从 Doctrine Entity 创建 ZF 2 表格

> ID：13475624
> 
> 赞同：8
> 
> 时间：2012-11-20T14:43:08.520
> 
> 标签：doctrine-orm, zend-framework2

我想知道的是创建与实体匹配的表单的最佳方法。

*   在代码中或使用表单注释手动创建表单？
*   使用实体的注释？

我看到了一些不同的例子，一些使用@Annotation 和其他使用@Form？有人可以解释一下区别吗？

对于具有相关/嵌套实体的实体，我是否需要为每个实体提供自定义水合器？我假设 Doctrine 可能已经有一个实现 hydrator 接口的？

总结： - 从实体创建表单的最佳方式。- @Form 和 @Annotation 之间的区别 - Doctrine 的实体有 Hydrator 吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T21:55:33.647

首先：注释是速度杀手。如果您想使用注释生成器，请始终缓存创建的对象。但是注释也是让表单运行的最简单方法；）

第二：水合器。当结合 Doctrine 2 使用 ZF2 Forms 时，您很可能希望使用位于内部的 DoctrineEntity Hydrator。考虑以下代码：

```
$form = new ReferenzwertForm();
$form->setHydrator(new DoctrineEntity($serviceLocator->get('Doctrine\ORM\EntityManager')))
     ->setObject(new Referenzwert())
     ->setInputFilter(new ReferenzwertFilter())
     ->setAttribute('method', 'post');
return $form; 
```

*   ReferenzwertForm() 是类型`Zend\Form\Form Object`
*   DoctrineEntity() 是类型`DoctrineORMModule\Stdlib\Hydrator\DoctrineEntity`
    *   DoctrineEntity 需要提供的 EntityManager。在 ZF2 中使用 Doctrine 2 时您应该熟悉这一点
*   Referenzwert() 是一个实体对象

当不使用注释并且您引用另一个实体时，请确保您使用适当的表单元素（在大多数情况下，这将是一个选择元素（例如为 BlogEntity 选择 CategoryEntity 或其他东西）

```
$this->add(array(
    'name' => 'type',
    'type' => 'DoctrineORMModule\Form\Element\DoctrineEntity',
    'options' => array(
          'label' => 'Choose a MyEntity',
          'object_manager' => $this->getEntityManager(),
          'target_class' => 'Namespace\Entity\MyEntity',
          'property' => 'name'
    ),
    'attributes' => array(
        'required' => true
    )
)); 
```

如您所见，Form 元素也需要了解 entityManager。这就是为什么理想情况下您希望使用另一个设置器扩展第一个代码示例以将 entityManager 注入您的表单对象。

```
$form->setEntityManager($serviceLocator->get('Doctrine\ORM\EntityManager'))
     ->set()//all the other stuff 
```

一般来说，最好的方法是什么？我会说没有。出于速度目的，注释只是一个杀手。使用缓存版本应该会有所帮助，尽管我还没有在 ZF2 中缓存的个人经验。我喜欢在注释之外手动创建表单，仅仅是因为我的 IDE 支持很多东西，但肯定不支持表单注释：D

希望这可以帮助你一点，我没有写太多脱离上下文：P

# xml - 在 xml 节点中转义 <

> ID：13475625
> 
> 赞同：1
> 
> 时间：2012-11-20T14:43:10.627
> 
> 标签：xml, parsing

我正在读取 php 中的 xml，但解析时出现错误：

> 警告：simplexml_load_string() [function.simplexml-load-string]：实体：第 5 行：解析器错误：解析属性名称时出错

我的 xml 字符串是：

```
$xmlString = '<?xml version="1.0" encoding="UTF-8"?>
<messages>
<message>
  <date>1352210570</date>
  <from>Rui <rui@mail.pt></from>
  <subject>Mensagem de Teste</subject>
  <url>test.com</url>
</message>
</messages>'; 
```

我用 simplexml_load_string($xmlString); 解析 xml

我怎样才能逃避 from 节点上的 < 和 > ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:44:42.867

```
$xmlString = '<?xml version="1.0" encoding="UTF-8"?>
<messages>
<message>
  <date>1352210570</date>
  <from><![CDATA[Rui <rui@mail.pt>]]></from>
  <subject>Mensagem de Teste</subject>
  <url>test.com</url>
</message>
</messages>'; 
```

添加到您的代码是`<![CDATA[`在您的标签之后`<from>`和您的标签`]]>`之前包含`</from>`。

请注意，在 CDATA 标记中，没有引号来表示字符串。这最初让我绊倒了，所以我试图确保它不会发生在其他人身上。

While `&lt;` and `&gt;` are probably a bit speedier in terms of performance, if you're writing potentially dynamic XML strings, The `<![CDATA[someText]]>` is much more of a "blanket escape"

# google-app-engine - 在谷歌应用引擎中使用数据存储

> ID：13475628
> 
> 赞同：-1
> 
> 时间：2012-11-20T14:43:21.260
> 
> 标签：google-app-engine, google-cloud-datastore

我开始使用 python 2.7 在应用程序引擎上进行开发，我真的对数据存储和祖先/密钥/父母感到困惑。

例如，我正在尝试开发一个包含类别、主题和响应的简单论坛。

我找不到表示关系和使用它们的方法。我已经探索并再次探索了文档，但我无法实现它。

您能否分享解释用于存储和获取数据的实体和查询之间关系的代码示例？

这是我在 models.py 中的课程

```
class UserInfo(db.Model):
    Email = db.EmailProperty()
    pseudo = db.StringProperty()
    UserID = db.StringProperty()

class Sujet(db.Model):
    Titre = db.StringProperty()
    Auteur = db.StringProperty()
    Date = db.DateTimeProperty(auto_now_add=True)

class Message(db.Model):
    Auteur = db.StringProperty()
    sujet = db.ReferenceProperty(Sujet, collection_name='messages')
    Date = db.DateTimeProperty(auto_now_add=True)
    Message = db.TextProperty() 
```

我的发帖方法：

```
def post (self):
    UserID = users.get_current_user().user_id()
    query = UserInfo.all()
    query.filter('UserID =',UserID)
    User_query = query.get()
    Auteur = User_query.pseudo
    Titre = self.request.get('titre')

    if Titre:
        sujet = Sujet()
        sujet.Auteur = Auteur
        sujet.Titre = Titre
        sujet.put()
        message = Message()
        message.Auteur = Auteur
        message.sujet = sujet
        message.Message = self.request.get('message')
        message.put()
    else:
        sujet = Sujet.all()
        sujet = sujet.filter('Titre =',self.request.get('sujet'))
        sujet = sujet.get()
        message = Message()
        message.Auteur = Auteur
        message.sujet = sujet
        message.Message = self.request.get('message')
        message.put() 
```

我必须采取行动。如果 Titre 存在，则创建一个新的“sujet”，如果不存在，则创建一个新消息。我的问题是，当我创建“sujet”时，引用属性运行良好，但是当我尝试添加消息时，引用属性设置为无......

我的 html 添加一个 sujet：

```
<h4>Nouveau sujet</h4>
<form action="/index/forum" method="post">
    <div><input type="text" name="titre" placeholder="Titre " size="24"</div>
    <div><textarea name="message" rows="5" cols="30" size="24"></textarea></div>
    <div><input type="submit" value="Créer" class="btn"></div>
</form> 
```

并将消息添加到现有消息：

```
<h3>{{ sujet.Titre }}</h3>
<div>
    <form action="/index/forum" method="post">
        <div><input type="hidden" name="sujet" value="{{ sujet.Titre }} " size="24" </div>
        <div><textarea name="message" rows="5" cols="30" size="24"></textarea></div>
        <div><input type="submit" value="Répondre" class="btn"></div>
      </form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:31:29.353

然后下载一个工作应用程序，这与您想要的非常相似：

[留言簿示例](http://code.google.com/p/google-app-engine-samples/source/browse/trunk/guestbook)

```
greetings = db.GqlQuery("SELECT * FROM Greeting ORDER BY date DESC LIMIT 10")

for greeting in greetings:
  if greeting.author:
    self.response.out.write('<b>%s</b> wrote:' % greeting.author.nickname())
  else:
    self.response.out.write('An anonymous person wrote:')
  self.response.out.write('<blockquote>%s</blockquote>' %
                          cgi.escape(greeting.content)) 
```

# php - php - 为表中的每个字段填充产品

> ID：13475629
> 
> 赞同：2
> 
> 时间：2012-11-20T14:43:24.127
> 
> 标签：php, mysql

我正在尝试在表格中填充客户信息。我已经通过下面的代码实现了这一点。我的问题是，在最后一列中，我有带有复选框的产品列表。我的编码方式仅填充表中的第一个字段（客户）。我希望它具有每个字段的唯一 ID，因为我计划传递 POST 函数，在 SQL 中创建一行，我可以将产品分配给客户。有什么想法可以实现这一目标吗？谢谢

```
 <table border="1" cellpadding="5" cellspacing="0" class="list" id="assign">
  <thead>
    <tr>
      <td class="left">First Name</td>
      <td class="left">Last Name</td>
      <td class="left">E-mail</td>
      <td class="left">Assign Product</td>
       </tr>
  </thead>
  <tbody>
    <?php
      if( mysql_num_rows( $selectRes )==0 ){
        echo '<tr><td colspan="4" class="left">No Rows Returned</td></tr>';
      }else{
        while( $row = mysql_fetch_assoc( $selectRes ) ){
          echo "<tr><td class='left'>{$row['firstname']}</td><td class='left'>{$row['lastname']}</td><td class='left'>{$row['email']}</td><td><div class='layer'><p class='heading'>Edit</p>";
        }
      }
       if( !( $selectRes2 = mysql_query( $selectSQL2 ) ) ){
    echo 'Retrieval of data from Database Failed - #'.mysql_errno().': '.mysql_error();
  }else{  }
   ?> 

   <div class='area'>
   <div class='scrollbox'>
   <?php
  if( mysql_num_rows( $selectRes2 )==0 ){
        echo '<div>No Rows Returned</div>';
      }else{
        while( $row = mysql_fetch_assoc( $selectRes2 ) ){
          echo "<div id='inline'><input type='checkbox'></input>{$row['name']}</div>";
         } echo "<input type='submit' value='Submit'></input>";
      } 
          ?>            
        </div>
    </div>
  </div>

    </td></tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:20:00.710

您想多了，只需将 id 添加到复选框的名称中，您甚至可以在其前面加上“CHK_”之类的前缀，然后使用处理表单帖子的代码将其解析出来。

```
 echo "<div id='inline'><input type='checkbox' name='CHK_{$row['id']}'></input>{$row['name']}</div>"; 
```

# watir - watir ruby 在新窗口中关注最终网址

> ID：13475631
> 
> 赞同：-1
> 
> 时间：2012-11-20T14:43:34.743
> 
> 标签：watir, watir-webdriver

我想在点击时关注新窗口 url，就像我有链接 somesite .com/osijejf 所以 watir 点击它并像下一个代码一样打开新窗口

```
<a href="some url" target="blank"> 
```

所以我想看看那个窗口的最终目标网址

hier是我到目前为止所做的：

```
b.frame(:id => 'main').link(:index => 0).click
url_after_click = b.url 
```

所以我有 url 但没有新窗口中的 url。使用 goto 我可以转到当前窗口，但我想看看新窗口中发生了什么并检索最终 url

如果有人可以帮助我吗？tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:07:16.980

如果您不知道窗口的任何详细信息并且您只是打开了窗口，您可以尝试使用`windows`集合中的最后一个窗口。（根据我的经验，windows 集合似乎总是按照打开窗口的顺序排列。）

您可以使用以下方法获取最后一个窗口：

```
browser.windows.last 
```

因此，您可以通过以下方式获取网址：

```
browser.windows.last.use do
  puts browser.url
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:58:54.203

我不确定我是否理解了这个问题，但我认为您想获取单击链接后打开的新窗口的 URL。

为此，您必须切换到新窗口。

```
browser.window(:title => "annoying popup").use do
  browser.url
end 
```

更多信息：[http ://watirwebdriver.com/browser-popups/](http://watirwebdriver.com/browser-popups/)

# canvas - 点击事件没有响应或不可预测（jCanvaScript）

> ID：13475633
> 
> 赞同：1
> 
> 时间：2012-11-20T14:43:39.660
> 
> 标签：canvas, click, jcanvascript

我正在使用 HTML5 画布和 jCanvaScript 库创建一个简单的游戏。

```
//JavaScript
function start() {
    jc.start("drawingCanvas", 380);
    text = jc.text('score: ' + score, 10, 10);
    clock = jc.text(round / 2, 285, 145);
    var millisecondsToWait = 500;
    inter = setInterval(nextRound, millisecondsToWait);
}

function nextRound() {
    round--;
    if(round % 2 == 0){
        clock.string(round / 2);
    }
    if (round == 0) {
        endGame();
    } else {
        draw();
    }
}

function draw() {
    var shape = jc.circle(random() * 300, random() * 100, random() * 10, randomRgba(), 1);
    shape.click(destroy);
    shape.animate({
        x : random() * 300,
        y : random() * 100,
        radius : random() * 100
    }, random() * 2000);
}
function destroy() {
    score += Math.round(100 - this._radius);
    text.string('score: ' + score);
    this.color('#ff0000');
    this.animate({
        radius : 0
    }, 1000);
} 
```

html太简单了：

```
<!DOCTYPE HTML>
<html>
    <head>
        <script src="http://jcscript.com/data/js/jCanvaScript.1.5.18.min.js"></script>
        <script src="js/canvasWithLibraries.js"></script>
        <link rel="stylesheet" href="css/canvaslib.css" />
        <title>Canvas with libraries demo</title>
    </head>
    <body>
        <canvas id="drawingCanvas">your browser does not support the canvas element</canvas>
    </body>
</html> 
```

**问题：**

正如您从代码中看到的，每次我单击一个形状时，该形状应该变成红色并变小直到消失。*有时*，这似乎有效。 当您测试此代码时，您会注意到点击似乎响应不同的形状或根本不响应或只是随机的。有谁知道问题是什么？

我猜这一切都在一个线程上，并且循环不会被正确中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:48:37.493

好的，我发现出了什么问题。我通过 CSS 设置画布的大小，你可能永远不会这样做，因为 CSS 会调整画布的大小并拉伸画布，而 javascript 并不知道。

所以我点击了由 CSS 转换的形状……而不是 javascript/canvas 中的实际形状。

我将高度和宽度内嵌在画布中，现在它就像一个魅力。

你可以在这里看到它的工作：[live example](http://yoerivandamme.com/html5/demos/canvas/canvasWithLibraries.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:02:11.747

如果您想让事件仅在第一个形状上起作用，则需要从事件函数返回 false。

# java - 从 JList 中删除一行

> ID：13475638
> 
> 赞同：0
> 
> 时间：2012-11-20T14:43:55.207
> 
> 标签：java, swing, jdbc, jlist, sql-delete

我正在制作一个项目，对于这个项目，我需要从 Jlist 中删除特定行。Jlist 由数据库中的数据填充。

现在，当我单击我的 Jbutton 时，我可以从列代码中删除一行，但是当我想删除一个新行时，我需要在新代码中更改查询。

执行的操作：

```
@Override
    public void Delete() {
        Connection conn;
        String sql = "DELETE FROM OEFENINGEN WHERE CODE = '5'"; 

        try{
            conn = OpenConnection();
            stmt = conn.createStatement();

            int result = stmt.executeUpdate(sql);
            if(result > 0){
                System.out.println("Record Delete");
            } else{
                System.out.println("Record NOT Delete");
            }
        }catch (SQLException e){
            e.printStackTrace();
        } finally {
            if (stmt != null){
                try{
                    stmt.close();
                }catch (SQLException e){
                    e.printStackTrace();
                }  
            }
        }
        }   
    } 
```

我希望当您在 JList 中选择一个随机行时，当您单击 Jbutton 时，他会从数据库和 Jlist 中删除该行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:47:16.343

确保列表的每一行都是代表数据库中数据的实际对象（或至少携带可识别所需的信息）

自己创建一个[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)，将`JList``ListModel` 的引用传递给它。

触发该`actionPerformed`方法时，检查选择了哪些行，从该方法中提取行数据`ListModel`并调用您的删除方法。在 delete 方法中，使用行中的信息来识别删除语句的条件

# java - Java 文件系统爬虫 - 奇怪的结果导致文件计数和空文件的荒谬率

> ID：13475640
> 
> 赞同：0
> 
> 时间：2012-11-20T14:43:58.047
> 
> 标签：java, windows, filesystems

我目前正在为“概率和统计”课程做一些作业，关于磁盘段的大小和效率。

我写了简单的文件爬虫来收集数据

```
public static void addTree(File file, Collection<File> all) {
    File[] children = file.listFiles();
    if (children != null) {
        for (File child : children) {
            addTree(child, all);
        }
    }else{
        all.add(file);
    }
}
public static void main(String[] args) {
    Collection<File> all = new ArrayList<File>();
    //build file list
    System.out.println("COLLECTING");
    addTree(new File("."), all);
    //result file
    try {
        //result file stream
        FileWriter fstream = null;
        fstream = new FileWriter("result.txt");
        //result file writer
        BufferedWriter out = new BufferedWriter(fstream);

        System.out.println("SAVING STARTED");

        //loop - find size and extension (lowercase)
        Iterator itr = all.iterator();
        while(itr.hasNext()){
            //get file
            File tested = (File) itr.next();
            //get ext
            String[] splitted = tested.getName().split("\\.");
            String ext = splitted[splitted.length-1];
            //get size
            long size = tested.length();
            //put into file
            //if(size!=0){
                out.write(size+" "+ext);
                out.newLine();
            //}
        }
        //close file / save
        out.close();
    }catch(IOException ex){}
} 
```

我有两个问题：1）扫描我的 D:/ 后，它显示爬虫发现了大约 480k 文件，但系统声称大约有 507k 文件。好的，我虽然可能是隐藏文件或类似的东西。但是在扫描 C:/ 之后，分数有点相反 - 爬虫发现 229k 而 windows 声称 227k。这让我有点难以理解，怎么会发生这样的事情。

2）如您所见

```
//if(size!=0){
    out.write(size+" "+ext);
    out.newLine();
//} 
```

爬虫获取所有文件（甚至是零大小的文件），它出现了，我的 D:/ 上只有大约 104k 非零文件 od 507k （不是操作系统分区 - 只有应用程序文件 - 没有系统文件相关），在我看来是什么80% 的文件完全没有内容是荒谬的。我明白了，有时需要创建文件以供以后使用，但这看起来像是有人将文件名误解为 OS 全局变量或什么。

有人可以澄清这个问题吗？

# html - 页脚 CSS 查询

> ID：13475644
> 
> 赞同：0
> 
> 时间：2012-11-20T14:44:11.883
> 
> 标签：html, css

**这是一些HTML代码：**

```
<div id="footer-widgets" class="grid-container clearfix">
    <div class="footer-box grid-3">
        <div class="footer-widget wpex-social-widget clearfix"><h4>UNITE WITH US :</h4><ul class="wpex-clearfix"><li class="wpex-social-twitter"><a href="https://twitter.com/mockinvest" title="twitter"><img src="http://www.invadewallst.com/wp-content/themes/invadewallst/images/social/twitter.png" alt="Twitter"></a></li><li class="wpex-social-facebook"><a href="http://www.facebook.com/pages/iMock-Invest/368514516550764?ref=hl" title="facebook"><img src="http://www.invadewallst.com/wp-content/themes/invadewallst/images/social/facebook.png" alt="Facebook"></a></li><li class="wpex-social-youtube"><a href="http://www.youtube.com/imockinvest" title="youtube"><img src="http://www.invadewallst.com/wp-content/themes/invadewallst/images/social/youtube.png" alt="YouTube"></a></li></ul></div>            </div>
    <!-- /footer-left -->
    </div>
    <!-- /footer-middle -->
    <div class="footer-box grid-3">
    </div>
    <!-- /footer-right -->
    <div class="footer-box grid-3">
    </div>
    <!-- /footer-right -->
</div>

<br/> 
```

**请告诉我要更改CSS ..**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:50:47.313

您使用了错误的标题，请`h4`改用`h3`

# mongodb - 如何在 MongoDB 中按特定数组插槽分组？

> ID：13475646
> 
> 赞同：0
> 
> 时间：2012-11-20T14:44:14.053
> 
> 标签：mongodb

我有以下文档结构：

```
{ "product": "x",
  "category": [ {"name": "y1", "id": "z1"},
        {"name": "y2", "id": "z2"}]
} 
```

如何仅按数组的第一个值分组，例如“类别 [0]”？我已经尝试过“category.0”和“category[0]”，返回的结果只是一个包含所有文档的组。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:25:30.337

如果您使用的是 MongoDB 2.2，则可以使用 $unwind 运算符，例如：

```
db.test.aggregate( {$project : {product:1, category:1}}, {$unwind: "$category"},{$group: {_id: "$category.name", productsPerCategory: {$sum:1}}}) 
```

这里描述了聚合框架：http: [//docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

# c# - 评估函数 通过类型的通用对象中的属性委托

> ID：13475648
> 
> 赞同：2
> 
> 时间：2012-11-20T14:44:21.403
> 
> 标签：c#, func

我在尝试使`Func<T>`表达式评估对象实例中的属性时遇到了一些困难，例如

```
var t = new Transition<ILexeme>( 1, () => TokenType == eToken.TOKEN_COMMENT ); 
```

Visual Studio 编译器抱怨**非静态字段、方法或属性“ILexeme.TokenType.get”**错误需要对象引用，因为它需要一个`ILexeme`对象实例。

我正在尝试做的是创建一个状态机，用于`Func<T>`调用转换函数的委托，该委托会测试该`eToken`属性的值是否与`eToken`令牌流中的值匹配。如果相等，则机器进入下一个状态。

问题是我`ILexeme`作为泛型类型传入`Transition`类，但我希望转换函数使用泛型类型中的属性，即`TokenType`. 我的问题是如何实现这一点，记住它**必须**适用于值类型，即`char`,`int`等？

以下是 ILexeme 的定义：

```
public interface ILexeme
{
    eToken TokenType { get; }
    String TokenString { get; }
} 
```

这是ILexeme的具体实现：

```
public enum eToken : int
{
    TOKEN_COMMENT,
    TOKEN_SEPARATOR
}

public class Token : ILexeme
{
    public eToken TokenType { get; }
    public String TokenString { get; }
} 
```

这是过渡的定义：

```
public readonly int FromState;
public readonly int ToState;
public readonly Func<T> Input;

public Transition( int fromState, Func<T> input, int toState )
{
    this.FromState = fromState;
    this.ToState = toState;
    this.Input = input;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:46:50.817

在您的`Transition<ILexeme>`-constructor 中，您期望 a`Func<ILexeme>`但您提供 a `Func<bool>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:48:48.647

我认为你写错了你的 lambda 表达式。由于`TokenType`是实例属性，因此您应该将对象的实例传递给 lambda。现在它是无参数的。所以，我认为它应该是这样的

```
var t = new Transition<ILexeme>( 1, eTok => eTok.TokenType == eToken.TOKEN_COMMENT ); 
```

和过渡班

```
public readonly int FromState;
public readonly int ToState;
public readonly Func<T, bool> Input;

public Transition( int fromState, Func<T, bool> input, int toState )
{
    this.FromState = fromState;
    this.ToState = toState;
    this.Input = input;
} 
```

此外，您可能希望将第二个类型参数引入`Transition`类，因此它变得非常普遍：

```
class Transition<TInput, TResult> {
public readonly int FromState;
public readonly int ToState;
public readonly Func<T, TResult> Input;

public Transition( int fromState, Func<T, TResult> input, int toState )
{
    this.FromState = fromState;
    this.ToState = toState;
    this.Input = input;
}
} 
```

如果是这种情况，您可能希望使用[where 子句](http://msdn.microsoft.com/en-us/library/bb384067%28v=vs.100%29.aspx)放置一些类型约束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T14:55:22.823

您得到的错误是因为 TokenType 是类型 ILexeme 的属性，但是在您对构造函数的调用中没有该类型的有效实例。也许你希望你的声明是

```
public Transition(int fromState, Func<T, bool>, int toState) { /* ... */ } 
```

然后你可以把你的代码写成：

```
var t = new Transition<ILexeme>(1, lex => lex.TokenType == eToken.TOKEN_COMMENT, 2); 
```

# c++ - 使用 this 指针调用一个期望自身实例地址的函数

> ID：13475649
> 
> 赞同：-1
> 
> 时间：2012-11-20T14:44:24.893
> 
> 标签：c++, function, this

我正在尝试拥有一个函数，该函数被传递给它所属的类的一个实例。我知道我可以用`this`指针做到这一点，但我不知道如何调用该函数。任何帮助表示赞赏！这是我的代码：

类A.h

```
ClassA{
     public:
         int Send(Foo &myFoo, ClassB &classb);
} 
```

A类.cpp

```
int ClassA::Send(Foo &myFoo, ClassB &classb)
{
...
} 
```

B类.cpp

```
void function(const Foo &thisFoo){
 ClassA myClassA;
 int ret =  myClassA.Send(&thisFoo, *this);
} 
```

我最终得到了这个错误：没有匹配函数调用 'ClassB::Send(const Foo*, ClassB&)'</p>

编辑：感谢您的输入！当我让 ClassA 期望 Send() 中的 const Foo 时，它起作用了。

类A.h

```
ClassA{
             public:
                 int Send(const Foo &myFoo, ClassB &classb);
        } 
```

A类.cpp

```
int ClassA::Send(const Foo &myFoo, ClassB &classb)
{
...
} 
```

B类.cpp

```
void function(const Foo &thisFoo){
 ClassA myClassA;
 int ret =  myClassA.Send(thisFoo, *this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:50:20.200

&thisFoo 导致 thisFoo 对象的地址。它的类型为 Foo*。你需要这样做：

```
int ret =  myClassA.Send(thisFoo, *this); 
```

**编辑**：您不能使用 thisFoo 参数调用 myClassA.Send() ，因为 thisFoo 被声明为 const 引用。因此，您必须将 thisFoo 参数设为非 const，或者（这有点奇怪）传递它的副本，或者执行 const_cast

# entity-framework - 为什么 EF 将 Contains 方法调用转换为 Exists 子句而不是 In 子句？

> ID：13475654
> 
> 赞同：2
> 
> 时间：2012-11-20T14:44:33.710
> 
> 标签：entity-framework

当我创建此查询时：

```
context.Orders.Where(x => context.Customers.Where(c => c.PersonID == 
10002).Select(c => c.CustomerID.Value).Contains(x.CustomerID.Value)).ToList(); 
```

我希望它创建一个这样的查询：

```
select * from Orders where CustomerID in (select CustomerID from Customers 
Where PersonID = 10002) 
```

但生成的查询相当于：

```
select * from Orders o where Exists(select 1 from Customers c where
c.PersonID = 10002 and c.CustomerID = o.CustomerID) 
```

这是一个非常简单的查询，可以写成：

```
context.Orders.Where(x => x.Customer.PersonID == 10002).ToList() 
```

但我的实际情况不可能。此外，对于这个简单的查询，执行时间没有什么不同，但在更复杂的情况下，预期的查询运行得更快。

如何强制 EF 以我想要的方式使用查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-25T18:24:44.863

我的理论是 EF 本身并不支持`Contains`，但它确实支持`Any`。作为一种技巧，它将您的表达式转换为等效的`Any`表达式，该表达式转换为`Exists`Sql 中的表达式。

我对这种方法的问题是 sql 查询比它需要的更混乱（你的问题），而且我还发现了数据库无法优化的示例。

我使用的解决方法是`Contains`用内部替换`Join`. 所以你的例子变成：

```
from c in context.Customers
join o in context.Orders on o.CustomerId equals c.CustomerId
where c.PersonId = 10002
select o; 
```

（抱歉，我知道您正在使用 lambda 表达式，但我不确定如何使用这些表达式编写连接）。

# flash - 如何修复“未找到初始内容”错误？

> ID：13475655
> 
> 赞同：7
> 
> 时间：2012-11-20T14:44:38.673
> 
> 标签：flash, apache-flex, debugging, air, flash-builder

在客户端的某些代码上使用 Flash Builder 4.6。单击调试（也尝试运行）并收到此错误：

```
Process terminated unexpectedly.

initial content not found

Launch command details:  "C:\Program Files\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0
\bin\adl.exe" -runtime "C:\Program Files\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0
\runtimes\air\win" -profile mobileDevice -screensize 640x920:640x960 -XscreenDPI 326 -
XversionPlatform IOS "C:\Users\tstiffler\Adobe Flash Builder 4.6\TP\bin-debug\TP-
app.xml" "C:\Users\tstiffler\Adobe Flash Builder 4.6\TP\bin-debug" 
```

我该如何解决？请尽可能详细，因为我以前从未使用过 Flash Builder。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T10:19:28.733

我有 Main-app.xml 文件，在其中我更改了以下行

```
<content>[This value will be overwritten by Flash Builder in the output app.xml]</content> 
```

至

```
<content>{yourAppName}.swf</content> 
```

解决了初始内容问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T21:41:57.327

当我的 SWF 元数据无效时，我遇到了这种情况。swf 甚至没有在我的项目的包内容中列出。因此，简而言之，请确保您的 swf 元数据有效。我从此更改了 backgroundColor 的值（有效）：

```
 [SWF(frameRate="60", width="480", height="800", backgroundColor="#000000")] 
```

至

```
 [SWF(frameRate="60", width="480", height="800", backgroundColor="#0x0")] 
```

backgroundColor 中的井号不应该存在，因此我遇到了 Flash Builder 初始内容错误。将第二行更改为：

```
 [SWF(frameRate="60", width="480", height="800", backgroundColor="0x0")] 
```

我的 swf 再次被包含在包中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T09:59:53.587

我像**hrehman**一样访问了应用程序描述符 XML 文件，但我的只有我一直在使用的 SWF 文件 - *MyGame-iOS.swf* - 我尝试将其更改为任何其他名称（*MyGame.swf*），然后尝试构建并运行，它工作正常。

不是最好的解决方案，但以防万一有人去做**hrehman**所做的事情，并且没有看到方括号中的消息并且仍然卡住。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-02T07:38:00.010

@hrehma 的回答是正确的。此外，如果您使用了错误的命名空间，编译器将无法获取 xml 标记。当您更改 AIR SDK 版本时会发生这种情况。

*   更正*内容*标签（如@hrehma 所说）
*   更正 application.xml 根目录中的*命名空间*。

*例如，如果您使用的是 AIR SDK 16：*

改变

```
<application xmlns="http://ns.adobe.com/air/application/15.0"> 
```

至

```
<application xmlns="http://ns.adobe.com/air/application/16.0"> 
```

希望这可以帮助你:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-27T11:35:42.683

对我来说，打开 Main-app.xml 文件，更改一些无关紧要的内容并再次保存，就可以了。也许与构建文件的缓存有关？我必须说，这是在 4.7 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-06T20:26:03.133

对我有用的是将我的项目的“bin-debug”文件夹（我编译的应用程序输出的目录）恢复到以前的版本。就我个人而言，我运行的是 Windows 7，所以我只是使用了操作系统的版本控制。

该线程上的其他建议对我不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-24T06:59:44.937

我认为这发生在我们更改应用程序主`mxml`文件的位置之后。*对我来说解决它的是*确保`YourApplication-app.xml`并且`YourApplication.mxml`都位于文件夹中。之后，重建项目应该可以工作。*`/src`*

 ** * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-08T05:20:36.733

昨天发生在我身上，我通过创建一个新项目并复制其中的所有内容来修复它，除了主构造函数 as3 文件。然后我从旧（break）主文件中复制了变量和函数，并将它们粘贴到新文件中。

我认为原因是主类获取文件以某种方式损坏，并且即使在编辑器中看起来不错，flash builder 也无法读取它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-15T11:37:34.807

我认为这个错误有点笼统，而且非常无益。*

# mysql - MySQL - 在大表的同一子集上运行多个更新查询

> ID：13475659
> 
> 赞同：0
> 
> 时间：2012-11-20T14:44:44.553
> 
> 标签：mysql

我有一个不断增长的大表（目前有 1400 万行并且还在增加）。它是来自日志的“错误”列表。其中一些错误是我想在上游修复时过滤的已知问题。在表中，我有两个位“CheckedForFilter”和“Filtered”，我想在 10,000 个行块中执行以下操作。

```
 1) Select on 10,000 rows (where 'CheckForFilter' is false)
 2) Run a series of queries that set the 'Filtered' bit in certain criteria is true
 3) After the last query runs set the 'CheckForFilter' bit to true 
```

可以设置“过滤”位的查询列表目前为 5，但我认为随着时间的推移它会增长。我的核心问题是我不知道如何每次都选择相同的行集。我需要将查询保持在可管理的大小，因为运行时间过长的查询会延迟服务器复制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:16:09.593

如果你的错误表上有一个 ID 字段，你可以这样做。

创建一个“过滤器”表，其中将包含接下来要检查的 10,000 个 ID 的最小和最大 ID 值。在此表中有一个名为“已检查”的标志，用于确定是否所有过滤器都已检查。

在错误表中的 ID 介于“已检查”字段 = 0 的“过滤器”表中的最小和最大 ID 值之间的情况下运行过滤器查询。

完成后，在“过滤器”表的最小和最大 ID 范围内更新这些记录上的 CheckedForFilters 标志。

更新“过滤器”表并将“已检查”字段设置为 1。如果您愿意，还可以存储日期和时间。

对接下来的 10,000 条记录运行此操作，直到完成。

这也将允许您保留过滤器运行时间的历史记录。如果您愿意，您还可以将每个批次运行的过滤器存储在单独的表中。

# primefaces - 填充动态树视图素面

> ID：13475662
> 
> 赞同：0
> 
> 时间：2012-11-20T14:44:50.073
> 
> 标签：primefaces, treeview

我刚刚开始处理 spring + hibernate primefaces，我想知道如何填充动态树视图。谁能给我一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:24:11.217

[http://www.ethemsulan.com/2011/03/dynamic-treeview-recursively-jsf-primefacescreate-dynamic-category-java.html](http://www.ethemsulan.com/2011/03/dynamic-treeview-recursively-jsf-primefacescreate-dynamic-category-java.html)，在这里找到一个工作示例，但在土耳其语，Primefaces作者的母语

# html - 内容改变高度的输入

> ID：13475664
> 
> 赞同：0
> 
> 时间：2012-11-20T14:44:58.237
> 
> 标签：html, css

我正在制作一个布局，以后我会喜欢玩。

目前，这是我的 HTML。

```
<!DOCTYPE html>
<html>
<head>
    <title>title</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<div id="top">
    <a class="title" href="index.html">TITLE</a>
</div>
<div id="middle">
    <h2>SubTitle</h2>
</div>
<div id="bottom">
    <ul>
         <a class="nav" href="#"><li>NAV1</li></a>
         <a class="nav" href="#"><li>NAV2</li></a>
         <a class="nav" href="#"><li>NAV3</li></a>
         <a class="nav" href="#"><li>NAV4</li></a>
         <a class="nav" href="#"><li>NAV5</li></a>
    </ul>
</div>
</body>

</html> 
```

和 CSS。

```
HTML, body {
margin: 0px;
padding: 0px;
height: 100%;
width: 100%;
color: #0d0d0d;
}

#top {
display: block;
width: 100%;
height: 15%;
border-bottom: 2px solid blue;
background-color: #f2f2f2;
box-sizing: border-box;
overflow: hidden;
margin: 0px;
padding: 0px;
}

.title {
display: block;
padding-top: 2%;
width: 100%;
text-align: center;
color: #0d0d0d;
font-family: arial black;
text-decoration: none;
font-size: 4em;
}

#middle {
display: block;
max-width: 600px;
height: 75%;
max-height: 75%;
margin: 0 auto;
}

#bottom {
display: block;
width: 100%;
height: 10%;
background-color: #f2f2f2;
margin: 0px;
padding: 0px;
}

ul
{
list-style-type:none;
margin:0;
padding:0;
width: 100%;
height: 100%;
}

li
{
float: left;
width: 20%;
height: 100%;
text-align: center;
box-sizing: border-box;
border-top: 2px solid blue;
border-right: 2px solid blue;
padding-top: 3%;
overflow: hidden;
-webkit-transition: color 500ms;  
-moz-transition: color 500ms;  
-o-transition: color 500ms;  
transition: color 500ms;   
}

.nav
{
display: inline;
text-decoration: none;
color: #0d0d0d;
font-family: arial black;
}

li:hover
{
color: orange;
} 
```

问题在于，当我用任何内容（例如标题或段落）填充“中间” div 时，它的高度会发生变化以扩大到应有的高度。该布局旨在没有滚动条，这就是为什么 div 的百分比加起来为 100% 的原因。

为什么添加内容时中间div会增长？我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:00:12.243

如果你想让它简单地切断额外的内容，添加`overflow:hidden`到`middle`div 将解决问题。

然而，更大的问题是，即使只是在较小的浏览器窗口中打开页面也会导致几乎每个部分都出现问题，更不用说像移动浏览器之类的东西了。

我建议通读[这个](https://stackoverflow.com/questions/5695698/my-content-disappears-when-i-set-the-html-tag-to-100-height?rq=1)类似问题的答案，以查看一些替代解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:56:18.037

添加`overflow:hidden`或添加`overflow:auto`到`middle`div

# java - Return TextField 在 AWT 中生成 BING

> ID：13475667
> 
> 赞同：0
> 
> 时间：2012-11-20T14:45:00.903
> 
> 标签：java, awt

为什么 Java AWT 中的 TextField 内的返回会在对话框中发出 bing 的声音？我在这里有一个旧的 AWT 程序，并在 Java 7 下运行它。TextField 是否具有动作侦听器似乎并不重要。

更新：我试图用对话框来隔离编写另一个应用程序的问题，但没有哔哔声。我还注意到光标上下在一个程序中起作用，而在另一个程序中它们会导致 bing。但是，没有明显的代码被调用来处理击键。

更新：我还发现鼠标右键在哔哔声应用程序中不起作用。

感谢您的回答和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:21:57.213

也许它`Toolkit.getDefaultToolkit().beep();`用于指示您在没有文本或其他验证原因时按下返回？

这可以通过外观调用。此应用程序是否加载了一些自定义外观？如果是这样，请尝试禁用它并查看行为是否消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:16:55.520

我发现了问题：它是 Java 7。在 Java 6 中一切正常。所以这是 Oracle 的工作，可能我们对此无能为力。

# mysql - MySQL第二次更新时错误地更新整数列

> ID：13475670
> 
> 赞同：7
> 
> 时间：2012-11-20T14:45:04.317
> 
> 标签：mysql, sql

我有一个非常奇怪的问题，这让我整天发疯。我有一个包含几列的简单 MySQL 表。一列是 int(11) NULL。当我更新它的值时，它按预期工作。但是，当我第二次更新它的值时，它被分配了“0”值。

我已经在我的 MySQL 5.1.58-1ubuntu1 和其他 MySQL 5.0.96-community 上测试了同样的行为，它们的行为完全相同。所以这显然不是一个版本的 MySQL 的问题。

我很难解释，但我附上了 2 个屏幕截图，它们会更好地告诉你哪里更好。

第一个屏幕截图是我正在更新的表的结构：

![表结构](../Images/084b0030f5eeb4c2fa18825a914cbee4.png)

这里显示了正在执行的 SQL 查询，您可以在其中看到，第一次更新是正确的，第二次在“invoice_number”列中无缘无故地产生“0”值：

![在此处输入图像描述](../Images/2ce6f0ad7d112c3a0a6095e8dca1bf67.png)

我是否忽略了一些明显的东西？它真的让我发疯，因为它对我没有任何意义......

感谢您提前提供任何帮助...

**编辑：**我尝试在查询中只使用数字，这是结果（对我来说也很奇怪）：

![在此处输入图像描述](../Images/403381bca19db2eab4009670b5a83648.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:17:23.587

这不是答案，但评论变得越来越拥挤。您显示的行为确实表明存在某种问题，但更有可能出现在您用来连接数据库的工具中，而不是在数据库中。

单引号的问题是转移注意力（即分心）。即使 '55' 的解释与 55 不同，它在`where`语句中的解释方式也会相同。此外，“35”有效，但“30”无效。

一个关键的见解是删除引号时的失败。该声明：

```
update i_orders
    set invoice_number = 30
    where id = 55 
```

*不*应该查找 30 的列索引。您看到的未知列错误表明发送到数据库的查询不是您在工具中看到的查询。

您可以在数据库中记录查询以查看实际发送的内容吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:42:29.273

好的，我终于想通了。问题出在其他地方，而不是 MySQL 本身。我已经从 MySQL 查询日志中复制了我的问题中显示的所有 SQL 查询，所以我从不怀疑可能有什么奇怪的东西。但是，在“35”值的开头有 - UTF-8 字节顺序标记（EF BB BF），当然，它是不可见的。

第一个更新查询来自我的应用程序的不同位置，其值“30”只是字符串（2）。但是当我在第二个查询中对值执行 var_dump 时，我注意到“35”实际上是 string(5)。该值来自 jQuery 的 $.get() 调用，并附有此 BOM...

两天的生命就在这样一个“隐形”上度过……

# java - java许可证强制执行，创建激活密钥的算法？

> ID：13475672
> 
> 赞同：2
> 
> 时间：2012-11-20T14:45:05.300
> 
> 标签：java, security, licensing, protection, license-key

我决定使用 TrueLicense 库来为我开发的 Java 应用程序实施复制保护。由于 TrueLicense 不提供复制保护架构，因此我需要一个。我只想将公司名称与 Mac ID 结合使用来创建许可证。我需要一种从公司名称和 Mac ID 创建激活密钥的算法，我想知道是否有人能指出我正确的方向？

我知道知识渊博的人可以在几分钟内破解应用程序。我明白，无论我使用什么保护措施，总有人可以通过它。我的目的是让简单的用户无法将应用程序复制到多台机器上。

再一次，我需要一种算法来根据公司名称和 Mac ID 创建激活密钥。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:04:27.547

如果您想要一个简单的方案，您可以将公司名称和 MAC 地址放在一起，计算一个哈希值（例如[SHA-1](http://en.wikipedia.org/wiki/SHA-1)），并将其用作激活密钥。

对于一些 Java 代码，请参阅[计算字节数组的 SHA-1](https://stackoverflow.com/questions/1515489/java-compute-sha-1)

# php - 使用 $_GET[] 在 php 中提取 url 变量

> ID：13475673
> 
> 赞同：-1
> 
> 时间：2012-11-20T14:45:05.517
> 
> 标签：php, url, variables

我有一个简单的 url，只是想在其中回显一个变量，但它不起作用。

这是代码

```
<?php    
$name = "mysite";    
echo "<a href= 'BusinessDisplay.php?address = $name'> hello </a>";    
?>

<?php     
echo $_GET['address'];    
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T14:48:44.690

这个间距是错误的。

```
"<a href= 'BusinessDisplay.php?address = $name'> hello </a>";
--------------------------------------^-^ 
```

# dictionary - 使用 EWS 更新联系人

> ID：13475674
> 
> 赞同：4
> 
> 时间：2012-11-20T14:45:11.040
> 
> 标签：dictionary, title, exchangewebservices, contact

我一直在努力寻找如何与 EWS 合作，并设法弄清楚如何做几乎所有我想做的事情。我正在使用 EWS 管理自定义数据库和 Exchange 服务器 (2007) 之间的联系人。添加和删​​除工作正常，但我无法更新联系人。为了解决这个问题，我删除了联系人并重新创建了它，但是当通过 Outlook（或其他任何方式）编辑联系人时，问题就出现了。

我试图按照此链接所说的内容进行操作：

[http://msdn.microsoft.com/en-us/library/exchange/ee693002(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/ee693002(v=exchg.80).aspx)

但我收到一条错误消息，说只能更新一个属性。然后我一次更新每个属性，一旦我尝试更新电话号码，我就会收到一条错误消息：“命名空间'http://schemas.microsoft.com/exchange/services 中的元素'更新' /2006/types' 的内容不完整。”

这是代码，基本上：

```
ItemId itemId = contactToUpdate.Id;
Contact updateContact = Contact.Bind(service, itemId);
updateContact.PhoneNumbers[PhoneNumberKey.HomePhone] = customContact.HomeTelephone;
updateContact.Update(ConflictResolutionMode.AlwaysOverwrite); 
```

有谁知道我为什么会收到这个错误？谁能回答如何实际更新项目？有没有我错过的文件？

EWS dll 的版本是 15.0.516.12。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T14:08:53.243

经过多次调试，我找到了答案。我不打算探索更多来找出原因，但你不能这样做：

```
updateContact = Contact.Bind(service, itemId);
updateContact.PhoneNumbers[PhoneNumberKey.HomePhone] = customContact.HomePhone;
updateContact.PhoneNumbers[PhoneNumberKey.MobilePhone] = customContact.MobilePhone;
updateContact.PhoneNumbers[PhoneNumberKey.BusinessPhone] = customContact.BusinessPhone;
updateContact.Update(ConflictResolutionMode.AlwaysOverwrite); 
```

但是，您可以只设置一个电话号码，然后在调试时（在断点上）更改另外两个的值。奇怪的。

无论如何，有一个问题 - 如果值没有改变，你不能更新其中一个字典值（这就是答案），所以先检查一下值是否改变。接下来，如果一个值是一个空字符串，您需要将其保存为 null。您还需要在尝试读取其值之前检查字典条目是否存在。

```
string number;
bool numberFound;

numberFound = updateContact.PhoneNumbers.TryGetValue(PhoneNumberKey.HomePhone, out number);
if ((numberFound && number != customContact.HomePhone) ||
    (!numberFound && !string.IsNullOrEmpty(customContact.HomePhone)))
{
    updateContact = Contact.Bind(service, itemId);
    updateContact.PhoneNumbers[PhoneNumberKey.HomePhone] = customContact.HomePhone == "" ? null : customContact.HomePhone;
    updateContact.Update(ConflictResolutionMode.AlwaysOverwrite);
} 
```

要更新地址：

```
updateContact = Contact.Bind(service, itemId);
updateContact.PhysicalAddresses[PhysicalAddressKey.Home].Street = customContact.Street == "" ? null : customContact.Street;
updateContact.PhysicalAddresses[PhysicalAddressKey.Home].State = customContact.Suburb == "" ? null : customContact.Suburb;
updateContact.PhysicalAddresses[PhysicalAddressKey.Home].City = customContact.City == "" ? null : customContact.City;
updateContact.PhysicalAddresses[PhysicalAddressKey.Home].CountryOrRegion = customContact.Country == "" ? null : customContact.Country;
updateContact.PhysicalAddresses[PhysicalAddressKey.Home].PostalCode = customContact.AreaCode == "" ? null : customContact.AreaCode;
updateContact.Update(ConflictResolutionMode.AlwaysOverwrite); 
```

在我看来，这是 API 的草率实现（以及糟糕的文档）。

~~需要对项目的每个属性执行更新这一事实可能是由于服务器运行 Exchange 2007，但这尚未得到证实。~~

我尝试使用 Microsoft.Exchange.WebServices 版本 14 和 15，结果相同。

**更新**

但是等等，还有更多。

我发布了很多代码来说明如何更新不同的电话号码、地址等。代码还显示了如何更新（或设置）标题、性别、后缀和自定义属性（用户定义的字段 - 如果你想要的话要出现在 Outlook 中，您需要将用户定义的字段添加到联系人文件夹）。

这是一个完整的工作代码：

```
Contact updateContact = Contact.Bind(service, itemId);
updateContact.GivenName = customContact.Name;
updateContact.Surname = customContact.Surname;

EmailAddress emailAddress;
bool emailAddressFound;

emailAddressFound = updateContact.EmailAddresses.TryGetValue(EmailAddressKey.EmailAddress1, out emailAddress);
if (emailAddressFound && emailAddress.Address != customContact.Email)
{
    emailAddress.Address = customContact.Email == "" ? null : customContact.Email;
}
else if (!emailAddressFound && !string.IsNullOrEmpty(customContact.Email))
{
    updateContact.EmailAddresses[EmailAddressKey.EmailAddress1] = customContact.Email;
}
updateContact.Initials = customContact.Initials;

string number;
bool numberFound;

numberFound = updateContact.PhoneNumbers.TryGetValue(PhoneNumberKey.HomePhone, out number);
if ((numberFound && number != customContact.HomePhone) || (!numberFound && !string.IsNullOrEmpty(customContact.HomePhone)))
{
    updateContact.PhoneNumbers[PhoneNumberKey.HomePhone] = customContact.HomePhone == "" ? null : customContact.HomePhone;
}
numberFound = updateContact.PhoneNumbers.TryGetValue(PhoneNumberKey.MobilePhone, out number);
if ((numberFound && number != customContact.CellPhone) || (!numberFound && !string.IsNullOrEmpty(customContact.CellPhone)))
{
    updateContact.PhoneNumbers[PhoneNumberKey.MobilePhone] = customContact.CellPhone == "" ? null : customContact.CellPhone;
}
numberFound = updateContact.PhoneNumbers.TryGetValue(PhoneNumberKey.BusinessPhone, out number);
if ((numberFound && number != customContact.WorkPhone) || (!numberFound && !string.IsNullOrEmpty(customContact.WorkPhone)))
{
    updateContact.PhoneNumbers[PhoneNumberKey.BusinessPhone] = customContact.WorkPhone == "" ? null : customContact.WorkPhone;
}

PhysicalAddressEntry phsicalAddress;
bool phsicalAddressFound;
int phsicalAddressLength = (customContact.Street + customContact.Suburb + customContact.City + customContact.Country + customContact.AreaCode).Length;
phsicalAddressFound = updateContact.PhysicalAddresses.TryGetValue(PhysicalAddressKey.Home, out phsicalAddress);
if (phsicalAddressFound)
{
    updateContact.PhysicalAddresses[PhysicalAddressKey.Home].Street = customContact.Street == "" ? null : customContact.Street;
    updateContact.PhysicalAddresses[PhysicalAddressKey.Home].State = customContact.Suburb == "" ? null : customContact.Suburb;
    updateContact.PhysicalAddresses[PhysicalAddressKey.Home].City = customContact.City == "" ? null : customContact.City;
    updateContact.PhysicalAddresses[PhysicalAddressKey.Home].CountryOrRegion = customContact.Country == "" ? null : customContact.Country;
    updateContact.PhysicalAddresses[PhysicalAddressKey.Home].PostalCode = customContact.AreaCode == "" ? null : customContact.AreaCode;
}
else if (!phsicalAddressFound && phsicalAddressLength > 0)
{
    updateContact.PhysicalAddresses[PhysicalAddressKey.Home] = homeAddress;
}
phsicalAddressLength = (customContact.BusinessStreet + customContact.BusinessSuburb + customContact.BusinessCity + customContact.BusinessCountry + customContact.BusinessAreaCode).Length;
phsicalAddressFound = updateContact.PhysicalAddresses.TryGetValue(PhysicalAddressKey.Business, out phsicalAddress);
if (phsicalAddressFound)
{
    updateContact.PhysicalAddresses[PhysicalAddressKey.Business].Street = customContact.BusinessStreet == "" ? null : customContact.BusinessStreet;
    updateContact.PhysicalAddresses[PhysicalAddressKey.Business].State = customContact.BusinessSuburb == "" ? null : customContact.BusinessSuburb;
    updateContact.PhysicalAddresses[PhysicalAddressKey.Business].City = customContact.BusinessCity == "" ? null : customContact.BusinessCity;
    updateContact.PhysicalAddresses[PhysicalAddressKey.Business].CountryOrRegion = customContact.BusinessCountry == "" ? null : customContact.BusinessCountry;
    updateContact.PhysicalAddresses[PhysicalAddressKey.Business].PostalCode = customContact.BusinessAreaCode == "" ? null : customContact.BusinessAreaCode;
}
else if (!phsicalAddressFound && phsicalAddressLength > 0)
{
    updateContact.PhysicalAddresses[PhysicalAddressKey.Business] = businessAddress;
}
updateContact.Birthday = customContact.Birthdate;
updateContact.WeddingAnniversary = customContact.MaritalStatusDate;
// Extended properties -------------------------------------------------------------
ExtendedPropertyDefinition extendedPropertyDefinition;
// Gender
if (!string.IsNullOrEmpty(customContact.Gender))
{
    extendedPropertyDefinition = new ExtendedPropertyDefinition(0x3a4d, MapiPropertyType.Short);
    switch (customContact.Gender)
    {
        case "Male":
            updateContact.SetExtendedProperty(extendedPropertyDefinition, 2);
            break;
        case "Female":
            updateContact.SetExtendedProperty(extendedPropertyDefinition, 1);
            break;
        default:
            updateContact.SetExtendedProperty(extendedPropertyDefinition, 3);
            break;
    }
}
// Title
if (!string.IsNullOrEmpty(customContact.Title))
{
    extendedPropertyDefinition = new ExtendedPropertyDefinition(0x3a45, MapiPropertyType.String);
    updateContact.SetExtendedProperty(extendedPropertyDefinition, customContact.Title);
}
// Suffix
if (!string.IsNullOrEmpty(customContact.Suffix))
{
    extendedPropertyDefinition = new ExtendedPropertyDefinition(0x3a05, MapiPropertyType.String);
    updateContact.SetExtendedProperty(extendedPropertyDefinition, customContact.Suffix);
}
// Custom property
extendedPropertyDefinition = new ExtendedPropertyDefinition(DefaultExtendedPropertySet.PublicStrings, "customProperty", MapiPropertyType.String);
updateContact.SetExtendedProperty(extendedPropertyDefinition, customContact.CustomProperty);
// File the contact
updateContact.Subject = customContact.Name + " " + customContact.Surname;
updateContact.DisplayName = customContact.Name + " " + customContact.Surname;
updateContact.Update(ConflictResolutionMode.AlwaysOverwrite); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T09:51:17.950

您是否尝试过使用 Microsoft 在[他们的示例](http://msdn.microsoft.com/en-us/library/ee693002%28v=exchg.80%29.aspx)中使用的方式来更新公司地址：

```
PhysicalAddressEntry PABusinessEntry = new PhysicalAddressEntry();
PABusinessEntry.Street = "4567 Contoso Way";
PABusinessEntry.City = "Redmond";
PABusinessEntry.State = "OH";
PABusinessEntry.PostalCode = "33333";
PABusinessEntry.CountryOrRegion = "United States of America";
contact.PhysicalAddresses[PhysicalAddressKey.Business] = PABusinessEntry; 
```

这样就创建了一个新的 PhysicalAddressEntry-object，它可能会解决您的问题。

（当然这对电话号码没有帮助。）

# ios6 - 使不同大小的细胞无间隙连接

> ID：13475679
> 
> 赞同：0
> 
> 时间：2012-11-20T14:45:32.430
> 
> 标签：ios6, uicollectionview

我正在使用 UICollectionView（和 PSTCollectionView 以实现旧版兼容性）。我想要实现的是创建一个包含不同高度元素的网格。现在它们排列成这样的行：

![在此处输入图像描述](../Images/2d68d29f7cb13604ae00f8b578ec7269.png)

您会看到黑色间隙并且行都对齐。每一行新的单元格都从相同的 Y 像素开始，即所有单元格都放入容器中，即最高单元格的高度。

有什么标准方法可以消除这些差距吗？因此，行呈现在另一行之下，没有间隙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:50:41.320

如果您的单元格具有相同的宽度，您可以将`CollectionViewFlowLayout`'`scrollDirection`属性设置为`UICollectionViewScrollDirectionHorizontal`. 这将使布局逐列填充内容区域，没有间隙。

如果您想消除间隙**并**垂直滚动，则无法使用`CollectionViewFlowLayout`. 要走的路是子类`CollectionViewLayout`化并自己实现布局。

# mvc-mini-profiler - MiniProfiler 在本地机器上工作，而不是在 QA 上工作

> ID：13475685
> 
> 赞同：3
> 
> 时间：2012-11-20T14:45:52.720
> 
> 标签：mvc-mini-profiler

我使用 NuGet 安装 MiniProfiler 和 MiniProfiler.MVC3 插件。[http://miniprofiler.com/](http://miniprofiler.com/)

我已经尝试了网站建议的所有内容，包括在 web.config 中添加：

```
<handlers>
<add name="MiniProfiler" path="mini-profiler-resources/*" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
</handlers> 
```

但是，它仍然不会显示在页面上。事实上，包含似乎根本没有呈现。是的，MiniProfiler.RenderIncludes() 在我的母版页上。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:51:02.647

我认为你需要插入这个并尝试调试。

```
protected void Application_BeginRequest()
{
//    if (Request.IsLocal)
    {
        MiniProfiler.Start();
    } 
} 
```

# android - Cordova 2.1.0 (PhoneGap) 为 Android 创建脚本说“项目已经存在”或“发生错误。删除项目”

> ID：13475687
> 
> 赞同：30
> 
> 时间：2012-11-20T14:46:00.387
> 
> 标签：android, cordova

我正在尝试使用 Cordova 2.2.0 (PhoneGap)在**Windows上创建一个 Android 项目。**根据这篇[博客文章](http://simonmacdonald.blogspot.ca/2012/11/getting-create-command-to-work-on.html)，这个命令应该可以工作 -

```
create <project_folder_path> <package_name> <project_name> 
```

但我收到一条消息“项目已经存在！”。我使用同一台 PC 来创建、打包和提交 Android 应用程序，所以我知道我安装了 Java、Javac、Ant、Android 等。

我也在带有 Cordova 2.1.0 的 Mac 上尝试过这个，我收到消息“发生错误。删除项目..”

您能否建议可能导致此错误的原因以及可能的修复方法？

谢谢。

**更新**

这个问题似乎在 Cordova 2.2.0 中得到解决，但我还没有找到 2.1.0 的解决方法

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-27T17:23:00.503

这把我逼到了墙角。解决方案。不要为项目创建文件夹。它将为您创建一个。

```
create <project_folder_path> <package_name> <project_name> 
```

指定时`<project_folder_path>`，**不要**先在 HD 上创建文件夹。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-28T19:42:33.200

需要明确的是，您的目标项目路径应该是您希望创建项目的位置，然后最后一个目录将是*您*想要创建的目录。例如：

```
./create ./test2 com.mytest MyTest 
```

在这种情况下，您想在当前目录中的一个名为“test2”的新文件夹中创建一个项目，并且该文件夹尚未创建（它将在运行时创建）。

**更新：**如果您使用的是更新版本的 Cordova Edge 或更高版本，我强烈建议您在此处使用 Cordova CLI 实用程序：http: [//cordova.apache.org/docs/en/edge/guide_cli_index.md.html#The% 20命令行%20界面](http://cordova.apache.org/docs/en/edge/guide_cli_index.md.html#The%20Command-Line%20Interface)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-30T17:57:45.060

需要检查一些事项以帮助解决此问题：

*   **您是否从正确的位置下载了正确版本的 PhoneGap？**似乎存在未与 打包的 PhoneGap 版本`Cordova-2.x.0.jar`，这是运行脚本所必需的。[在此处下载](http://incubator.apache.org/cordova/#download)以获取具有正确 JAR 文件的 PhoneGap。

*   **您是否已经创建了文件夹？**文档声称只要新文件夹为空白，您就可以使用此命令。*这不是真的*。**在尝试创建项目之前，请确保该文件夹不存在。**

*   **你有最新版本的 Ant 吗？**您需要 Ant 1.8.0 或更高版本才能在 Android 上运行 PhoneGap。用于`ant -v`验证您的版本。

*   **您的 .bash_profile/Environment Varibles PATH 设置是否正确？** [官方文档已更新以反映这一点](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android_3a_setup_your_path_environment_variable_on_mac_os)，但您绝对需要正确设置这些变量才能创建项目。

*   **您是否更新了终端以反映您的新路径？** `source .bash_profile`或`. .bash_profile`在您当前打开的终端窗口中，以便在运行`create`命令时更新您的路径。

*   **你有正确的公共编解码器吗？**您可能会收到有关丢失`commons-codec`文件的伴随错误，您可以[在此处](http://archive.apache.org/dist/commons/codec/binaries/commons-codec-1.6-bin.zip)下载该文件。

在所有这些之间，您应该能够使用 PhoneGap 2.1.0 或更高版本启动并运行 Android 项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T17:42:10.677

请确保您没有提供现有文件夹的文件夹路径。如果该文件夹已存在，请删除该文件夹。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-27T09:49:23.780

我遇到过同样的问题。我从这个位置运行命令

```
Harddriv:\cordova-2.1.0\incubator-cordova-android >create "Harddriv:\externalapps\phonegap_projects\HelloWorld\" com.phonegapaapp.helloworld helloworl 
```

我得到了你提到的错误。然后我尝试了该位置的相对路径，如下所示

```
Harddriv:\cordova-2.1.0\incubator-cordova-android >create "..\externalapps\phonegap_projects" com.phonegapaapp.helloworld helloworl 
```

它对我有用！！！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-20T15:23:31.293

我有这个问题使用：

```
create "c:\yada\yada\pic to post" <package_name> <project_name> 
```

但是当我从文件夹名称中取出空格时，它起作用了

```
create "c:\yada\yada\pictopost" <package_name> <project_name> 
```

因此，如果您在项目路径中有空格，请将它们取出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-28T17:48:50.993

我有错误：

*   *项目已经存在！*
    其次是：
*   *发生错误。正在删除项目...*

我发现对包和项目名称使用有效的字符集很重要。具体来说：

*   *package_name*允许`a-z`,`0-9`和`_`(下划线)
*   *project_name*允许`A-Z`, `a-z`,`0-9`和`_`（下划线）

我的*project_name*是`Test-Project`，例如带有破折号。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-26T19:23:37.310

命令：

```
export PATH=/android-sdks/tools/:$PATH 
```

为我做了伎俩。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-07T16:11:52.060

对于任何已经完成这些答案（就像我一样）并且仍然没有满足感的迷失灵魂，尽管所有配置都正确。

尝试从 Github repo 下载 phonegap，当前版本为 2.3.0

[https://github.com/phonegap/phonegap](https://github.com/phonegap/phonegap)

这对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-04T12:17:21.663

在创建新的 PhoneGap 项目时，我对 Windows 也有相同的体验。然后我尝试了相对路径。对于我的情况，我想在**C:\phonegap_projects\**父文件夹下创建项目，而我的 PhoneGap bin 在**C:\phonegap\cordova-2.7.0\android\**父文件夹下。所以我在导航到 C:\phonegap\cordova-2.7.0\android\bin 目录后尝试了：

```
create ..\..\..\..\phonegap_projects\<name_of_project> <package_name> <name_of_project> 
```

这对我有用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-13T13:58:57.783

我在这里遇到了一个类似的问题，脚本不想创建我的项目，我已经设置了所有路径，下载了所有 SDK 和工具，删除了空格 - 仍然无法正常工作。

问题是，脚本没有创建项目子目录。可以在此讨论中找到更新/修复的脚本：

[https://groups.google.com/forum/?fromgroups=#!topic/phonegap/7wOqriD4YjY](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/7wOqriD4YjY)

或直接在这里下载：

[https://phonegap.googlegroups.com/attach/b2d05c8a6a929569/create.js?view=1&part=4](https://phonegap.googlegroups.com/attach/b2d05c8a6a929569/create.js?view=1&part=4)

问候！

加速

# android - 以 Mongodb 为后端的 Android App 和 Node.js（快速框架）

> ID：13475705
> 
> 赞同：1
> 
> 时间：2012-11-20T14:47:25.210
> 
> 标签：android, node.js, mongodb

我是 Node.js 和 mongoDB 的新手。

我想创建一个具有 node.js 服务器和数据库作为 Mongo 的 Android 应用程序。

Android 应用程序的小背景：我想开发有点像 instagram 应用程序。我的应用程序包含从 android 上传图像文件并将上传请求发送到 node.js 服务器并存储在 CDN 和 mongoDB 上并从 DB 获取该图像并将其显示在 android 应用程序中。

我的问题是：-

1.  我如何实现这一点，所以我首先保存在 CDN 上（如何做到这一点？任何见解......我用谷歌搜索但我没有在 node.js 中找到任何示例），然后将 CDN url 保存在 mongoDB 中。
2.  这是一个好方法吗。将图像存储在云上并将该图像 url 保存在 mongodb 中的任何更好的选择？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:56:12.073

我建议您将 Amazon Cloud Front 用于您的 CDN 解决方案。您可以轻松地将 Cloud Front 与您的私有服务器或 Amazon S3 一起使用。亚马逊会为您处理所有数据缓存、分发过程。此外，通过 nodejs 将数据从您的服务器发送到亚马逊是一个超级简单的过程。[只需使用为 AWS aws-lib](https://github.com/livelycode/aws-lib)或[node-aws](https://github.com/exfm/node-aws)编写的 nodejs 模块之一。Amazon Cloud Front 还为您处理安全问题，只需将您的内容设为私有即可。

# php - PDOSession 的奇怪行为

> ID：13475706
> 
> 赞同：0
> 
> 时间：2012-11-20T14:47:27.670
> 
> 标签：php, session, pdo

我的 PDOSessions 有问题并寻求一些帮助调试（顺便说一句，这似乎只发生在 IE 上）

我有两个用于测试 index.php 和 session2.php 的文件（如下）

在 index.php 最后我有 ---> header("Location: session2.php");

偶尔浏览器会进入一个状态，当我去 session2.php 时 sessionid 是不同的，当然会话数据已经消失了

我有一个非常简单的 PDOSession 类，见下文

这是日志文件中的调试语句。出于某种原因，当我转到 session2.php 时，它具有不同的会话 ID。（OPEN/READ 和 CLOSE 来自 PDOSESSION 类）

我不确定这是否足以让任何人提供帮助，但我真的很难过..

谢谢你的帮助

```
[PDOSession] index.php OPEN 
[PDOSession] index.php READ id=vpodh6fornta10mg2lqkns2qb1
[11.20.12 8:33:09][session1]
[11.20.12 8:33:09][session1]->just before forwarding to session2.php
[11.20.12 8:33:09][session1][vpodh6fornta10mg2lqkns2qb1] Array
(
[TstpageID] => 1
)

[PDOSession] index.php WRITE id=vpodh6fornta10mg2lqkns2qb1
[PDOSession] index.php CLOSE 
[PDOSession] session2.php OPEN 
[PDOSession] session2.php READ id=f7s4u3bc1hbo0s0dj3s9o8g1u7
[11.20.12 8:33:09][session2]
[11.20.12 8:33:09][session2][f7s4u3bc1hbo0s0dj3s9o8g1u7] Array
(
)

[PDOSession] session2.php WRITE id=f7s4u3bc1hbo0s0dj3s9o8g1u7
[PDOSession] session2.php CLOSE 
```

这是 index.php

```
require 'functions.php';
$link = new PDO("mysql:host=".DB_HOST.";dbname=".DB_NAME, DB_USER, DB_PASSWD);
$link->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

PDOSession::init($link);    
errorLog("[session1]\n");

$pageID = 1 ;

$_SESSION['TstpageID'] = $pageID;
errorLog("[session1]->just before forwarding to session2.php\n");
errorLog("[session1][".session_id()."] ".print_r($_SESSION,true)."\n");
header("Location: session2.php");
?> 
```

这是 session2.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<?php
set_include_path('/home/unitnetfb/html/inc');

$noFACEBOOK_INIT = 1;
require 'functions.php';
$link = new PDO("mysql:host=".DB_HOST.";dbname=".DB_NAME, DB_USER, DB_PASSWD);
$link->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

PDOSession::init($link);    

errorLog("[session2]\n");

errorLog("[session2][".session_id()."] ".print_r($_SESSION,true)."\n");
?> 
```

这是 PDO 会话类

```
<?php
abstract class PDOSession
{
    private static $db;
    private static $oldData;
    public static function init(PDO $db){
            self::$db = $db;
            session_set_save_handler('PDOSession::open', 'PDOSession::close',
                                     'PDOSession::read', 'PDOSession::write',
                                     'PDOSession::destroy', 'PDOSession::garbageCollect');
            session_start();
    }
    public static function open($save_path, $session_name){
            error_log("[PDOSession] ".$_SERVER["SCRIPT_NAME"]." OPEN \n" , 3, "/tmp/phperror.log");
            return true;
    }
    public static function close(){
            error_log("[PDOSession] ".$_SERVER["SCRIPT_NAME"]." CLOSE \n" , 3, "/tmp/phperror.log");
            return true;
    }
    public static function read($id){
        try{
            error_log("[PDOSession] ".$_SERVER["SCRIPT_NAME"]." READ id=".$id."\n" , 3, "/tmp/phperror.log");
            $query = self::$db->prepare('
                    SELECT data
                    FROM sessions
                    WHERE id = :id');
            $query->execute(array(':id' => $id));
            return $query->fetchColumn();

        }catch(Exception $e){
            die("A hardware failure has cause a loss of connection to our databases.  We apologize for the inconvenience. [read]");
        }
    }
    public static function write($id, $data){
        try{
            error_log("[PDOSession] ".$_SERVER["SCRIPT_NAME"]." WRITE id=".$id."\n" , 3, "/tmp/phperror.log");
             $t = time();
            $stmt = self::$db->prepare("REPLACE INTO
            `sessions`
            VALUES (:id, :accessTime, :data)");
            return $stmt->execute(array(':id' => $id, ':accessTime' => $t, ':data' => $data));
        }catch(Exception $e){
            die("A hardware failure has cause a loss of connection to our databases.  We apologize for the inconvenience. [write]");
        }
    }
    public static function destroy($id){
        try{
            error_log("[PDOSession] ".$_SERVER["SCRIPT_NAME"]." DESTROY id=".$id."\n" , 3, "/tmp/phperror.log");
            self::$db
                    ->prepare('
                            DELETE FROM sessions
                            WHERE id = :id')
                    ->execute(array(':id' => $id));

        }catch(Exception $e){
            die("A hardware failure has cause a loss of connection to our databases.  We apologize for the inconvenience. [destroy]");
        }
    }
    public static function garbageCollect($lifetime){
        try{
            error_log("[PDOSession] ".$_SERVER["SCRIPT_NAME"]." GARBAGECollect\n" , 3, "/tmp/phperror.log");
            $t = time();
            self::$db
                    ->prepare('
                            DELETE FROM sessions
                            WHERE accessTime < :min_time')
                    ->execute(array(':min_time' => $t - $lifetime));
            errorLog("[".date("m.d.y G:i:s")."][garbageCollect]"." lifetime=$lifetime accessTime < ".$t - $lifetime );
        }catch(Exception $e){
            errorLog("[".date("m.d.y G:i:s")."][garbageCollect]"." Exception -->".$e->getMessage(),$e);
            die("A hardware failure has cause a loss of connection to our databases.  We apologize for the inconvenience. [gc]");
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:18:10.707

问题是带有 IE 的 iframe 中的第三方 cookie

header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"');

解决了问题

# d3.js - 改善制图可视化

> ID：13475708
> 
> 赞同：1
> 
> 时间：2012-11-20T14:47:27.930
> 
> 标签：d3.js, data-visualization, cartography

我需要一些关于如何改进制图信息可视化的建议。

用户可以选择不同的物种，网络地图应用程序会显示其地理分布（多边形度数单元格），每个物种都有不同的颜色范围（例如，我们可以找到更多信息的深橙色，更少信息的浅橙色）。

问题是当多个物种重叠时。我目前正在做的只是使用[http://www.xarg.org/project/jquery-color-plugin-xcolor/计算两种颜色的加色混合](http://www.xarg.org/project/jquery-color-plugin-xcolor/)

如下图所示，两个物种重叠（混合蓝色和黄色）的结果颜色根本不直观。

![在此处输入图像描述](../Images/472f85489e9671a867efa9d11129ce21.png)

有人有任何想法或知道类似的工具从哪里获得灵感？为了创建多边形，我使用 d3.js，所以如果必须创建更复杂的 SVG 功能，我可以尝试一下。

我的一些想法是...

1）多边形上的数据越多，边框越粗（或边框的每个部分都有相应的颜色）

2）在多边形的中心添加一个标签，说明有多少物种重叠。

3) 将多边形分成不同的部分，每个部分都有对应的物种颜色。

在此先感谢，佩雷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T05:57:56.317

我的建议与您列出的选项#3 类似，但有所不同。而是用物种颜色绘制整个单元格，在每个单元格中放置一个点，每个物种一个。您可以像现在一样改变每个点的颜色：颜色越深越深，颜色越浅越少。这不需要您混合颜色，它会显示更多地图以为数据提供更多上下文。我会在单元格的边界和没有边界的情况下尝试这种方法，看看哪一个效果最好。

您的可视化也可能受益于一些交互性。当用户将鼠标悬停在每个单元格上时，可能会显示提供更详细信息的工具提示，并且可能会显示进一步的信息细分。

所有这些都是非常主观的。但是有一点是肯定的：当您处理多维数据时，将维度投影到相同的视觉/感知轴上的次数越少越好。我已经看到一些“4 维热图”的例子成功地做到了这一点（[这是一个在热图上可视化延迟的例子，用不同的颜色识别不同的来源](http://dtrace.org/blogs/brendan/2011/09/26/observing-observer-a-cloud-analytics-case-study/)），但我认为没有任何尝试组合颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:00:58.527

我对您尝试创建的内容的最初想法（我相信，对于稍微拥挤的数据集的[热图的自定义变体：](http://en.wikipedia.org/wiki/Heat_map)

一种策略是采用建议的公式

> n + 1

关于 bin 间距的中断。这让我担心你的集合有多少异常值。

> 对于没有异常值的紧凑数据集，等间距的中断是理想的。在许多真实数据集中，尤其是[蛋白质组学](http://en.wikipedia.org/wiki/Proteomics)数据集中，异常值会降低这种表示的有效性。

我的一个建议是考虑在您的类别中添加一些过滤器（如果您还没有的话）的想法。这将允许缩小呈现的数据，以便用户更快地阅读。

另一种解决方案是使用[（综合）R](http://www.r-project.org/index.html) 甚至[DanteR](http://omics.pnl.gov/software/DanteR.php)

[使用热图显示基于质谱的蛋白质组数据的教程](http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3489527/) （我觉得特别值得注意的是“颜色映射”。）

# git - Github fork 新版本并与它合并更改

> ID：13475710
> 
> 赞同：1
> 
> 时间：2012-11-20T14:47:28.240
> 
> 标签：git, github

我认为关于标准 git/github 工作流程的问题。但我真的非常了解所有这些东西。

1.  一个月前，我分叉了一些项目。
2.  我用我需要的改变做了我的分支
3.  原来的项目已经改变了
4.  我想 fork 新版本并添加我对以前版本所做的更改

我该怎么做？我遇到的问题：

1）我不能fork新版本，当我按fork github将我重定向到我当前的新版本fork时，我是否必须删除它才能拥有新版本？

2）是否有可能以某种自动方式应用我对以前版本所做的更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T15:00:04.127

我认为你只需要获取上游。

```
$ git remote add upstream git@github.com:original-user/project-name.git
$ git checkout master
$ git checkout -b merge-upstream
$ git fetch upstream
$ git merge upstream/master 
```

此时，您在名为 的分支上拥有了新版本`merge-upstream`。如果一切仍然有效，您将希望将其合并到您的主人。

```
$ git checkout master
$ git merge merge-upstream 
```

现在你`master`应该和原来的主人相处得很好。删除您的工作分支。

```
$ git branch -d merge-upstream 
```

你现在有一个副本。因此，您可以针对新的`master`. 合并`master`到您的分支中进行测试。

```
$ git checkout my-feature
$ git merge master 
```

您现在应该将原始用户主分支的所有更改合并到您的功能分支中。

PS：在做一个长期运行的项目时，我尽量确保原主不会比我领先一两天。事实上，我总是将远程添加`upstream`到指向原始用户的存储库。然后我可以在需要时引入上游更改。

# java - 如何让 Hibernate 基于 DDL/SQL 脚本创建表？

> ID：13475714
> 
> 赞同：0
> 
> 时间：2012-11-20T14:47:42.700
> 
> 标签：java, sql, hibernate

我有一个包含 CREATE TABLE 命令的 sql /ddl 脚本。

我使用hibernate，我希望hibernate执行这个脚本来创建数据库结构。

这该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:11:20.980

如果您使用 Spring，您可以使用其 JDBC 实用程序填充数据库：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

    <jdbc:embedded-database id="dataSource" type="H2" />

    <bean class="org.springframework.jdbc.datasource.init.DataSourceInitializer" depends-on="sessionFactory">
        <property name="databasePopulator" ref="resourceDatabasePopulator" />
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="resourceDatabasePopulator" class="org.springframework.jdbc.datasource.init.ResourceDatabasePopulator">
        <property name="scripts">
            <array>
                <value>classpath*:init-hibernate.sql</value>
            </array>
        </property>
    </bean>
</beans> 
```

# .htaccess - htaccess 文件不适用于 wamp

> ID：13475715
> 
> 赞同：1
> 
> 时间：2012-11-20T14:47:47.897
> 
> 标签：.htaccess, wamp

我在我的 Win7 机器上运行 WAMP 并尝试配置一个 htaccess 文件夹以限制我的客人浏览目录结构。

现在，如果您前往[http://grovertechnologysolutions.com/Technical](http://grovertechnologysolutions.com/Technical)，它会列出我不想要的目录结构。他们应该只能访问 .html 站点。

我已经修改了 httpd.conf 文件以删除注释掉的重写模块。

我已将 htaccess 文件添加到我网站的文档根目录中。

我的 htaccess 文件如下所示：

```
options -indexes
# or #
IndexIgnore * 
```

我已经多次重新启动所有服务。htaccess 应该在 WWW 文件夹还是文档根目录中？我虚拟地运行了许多网站，只关心我的主站点，所以我一直将 htaccess 放在该文件夹中，但也尝试了 www。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T23:10:51.103

我假设您已经在网站的 DocumentRoot 文件夹中编辑了正确的 .htaccess 文件。

```
Options -Indexes 
```

仅当您的特定 WAMP 配置和网站的 VirtualHost 文件具有正确的 AllowOverride 值设置时，上述内容才有效，例如...

```
AllowOverride All 
```

检查网站的 VirtualHost 文件和/或 httpd.conf 是否有类似...

```
<Directory "C:/WampDeveloper/Websites/www.example.com/webroot">
    Options All
    AllowOverride All
    order allow,deny
    allow from all
</Directory> 
```

如果它没有设置为`All`nor lists `Indexes`，那 .htaccess 行将被忽略。

> 我已经修改了 httpd.conf 文件以删除注释掉的重写 mod

mod_rewrite 与此无关。

> 我已经多次重新启动所有服务。

.htaccess 文件在每次请求时都会重新读取。您不需要重新启动 Apache。

[http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)

# actionscript-3 - TLF 文本自动换行

> ID：13475717
> 
> 赞同：0
> 
> 时间：2012-11-20T14:47:57.367
> 
> 标签：actionscript-3, flash-cs5, word-wrap

假设我在我的应用程序中添加了一个名为“testTLF”的 TLF 文本，每行可以包含 6 个字符，并且还启用了自动换行……现在我将此文本附加到它：

```
testTLF.appendText("abc(ijklm"); 
```

问题是它不能满足每行 6 个字符，但它显示如下：

```
abc
(ijklm 
```

而我想要的是：

```
abc(ij
klm 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:52:20.190

在“属性”面板中，展开“高级字符”部分并将中断的值更改为任意。

# javascript - jQuery Mobile PhoneGap App 启动时闪烁

> ID：13475719
> 
> 赞同：2
> 
> 时间：2012-11-20T14:48:15.807
> 
> 标签：javascript, jquery, cordova, jquery-mobile, load

我有一个`jQuery Mobile` `PhoneGap`应用程序可以很好地加载我的所有页面，除了我的应用程序启动。
该应用程序显示一个屏幕，上面写着 Phone gap IPhone non-retina，然后在我的应用程序启动之前在一个屏幕上显示我创建的所有页面。我在 java 脚本文件中动态加载样式表脚本和 html 正文。
这是我端、电话间隙端或 JQM 端会发生的问题吗？如果需要，我会提供代码。我正在使用`JQM 1.2.0` `JQuery 1.8`和`JQM 1.2.0 css`

闪烁发生在启动页面和我的第一页加载之间。我使用这个 javascript 将页面加载到我的 index.html

javascript:

```
 $("body").load(remoteURL + "body.html?v="+getTimeStamp(),function()
       {
          loadPage();
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:15:02.377

加载所有脚本并设置您的页面需要一些时间。一旦页面完全加载，您可以转到 Phonegap.plist 并禁用**AutoHideSplashScreen并从 javascript 隐藏启动屏幕：**

```
navigator.splashscreen.hide(); 
```

这解决了我的问题。

# java - 构建有关使用 Sun 专有 API 的警告

> ID：13475722
> 
> 赞同：6
> 
> 时间：2012-11-20T14:48:33.947
> 
> 标签：java, build, jdk-internal-api

我正在尝试清理我的构建环境，并发现了一些关于使用 Sun 专有 API 的警告。

```
[javac] /workspace/<path-to-files>/Handler.java:18: warning: sun.net.www.protocol.http.Handler is Sun proprietary API and may be removed in a future release
[javac] public class Handler extends sun.net.www.protocol.http.Handler {
[javac]                                                       ^
[javac] /workspace/<path-to-files>/HttpClient.java:16: warning: sun.net.www.http.HttpClient is Sun proprietary API and may be removed in a future release 
[javac] public class HttpClient extends sun.net.www.http.HttpClient {
[javac]
[javac] /workspace/<path-to-files>/HttpURLConnection.java:19: warning: sun.net.www.protocol.http.HttpURLConnection is Sun proprietary API and may be removed in a future release
[javac] public class HttpURLConnection extends sun.net.www.protocol.http.HttpURLConnection {
[javac]                                                                 ^ 
```

和...

```
[javac] /workspace/<path-to-files>/JavaFile.java:17: warning: sun.misc.BASE64Decoder is Sun proprietary API and may be removed in a future release
[javac] import sun.misc.BASE64Decoder;
[javac]                ^
[javac] /workspace/<path-to-files>/JavaFile.java:338: warning: sun.misc.BASE64Encoder is Sun proprietary API and may be removed in a future release
[javac]          BASE64Encoder encoder = new BASE64Encoder();
[javac]          ^ 
```

任何人都可以建议这些 API 的一个很好的替代方案吗？或者可以用官方的 Java API 替换它们吗？我意识到这些只是警告，但这是我计划解决的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T14:51:48.617

不清楚你为什么要首先声明自己的类`HttpURLConnection`和`Handler`类 - 你*确定*要编译它们吗？

至于 Base64 - 我自己喜欢[这个公共领域的实现](http://iharder.net/base64)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T14:52:31.987

如果您编写了一个 http 客户端，那么您就重新发明了轮子。[apache http client](http://hc.apache.org/httpcomponents-client-ga/)中已经有一个非常好的。

[如果您想要 Base64 编码/解码，则在apache commons codec](http://commons.apache.org/codec/)中有一个类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T14:51:41.600

[Apache Commons Codec](http://commons.apache.org/codec/)包括[Base64](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html)类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-27T19:52:56.073

对于 Base64，从 Java 8 开始，您可以使用`java.util.Base64.getEncoder().encode(Byte[])`和`java.util.Base64.getDecoder().decode(Byte[])`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T15:01:20.920

我不确定为什么需要`sun.net.www.protocol.http`在代码中直接使用这些对象，因为它们是由[`HttpUrlConnection`](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html). 您可以使用该对象而不是内部对象。如果该 API 不能满足您的需求，可以[使用 Apache HttpClient](https://hc.apache.org/httpcomponents-client-ga/index.html)。

至于 base 64 编码，您可以使用[Java Mail](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/MimeUtility.html)提供的编码，如下所示：

```
final InputStream decoded = MimeUtility.decode(encodedInput, "base64"); 
```

或[Apache commons-codec](https://commons.apache.org/codec/api-release/org/apache/commons/codec/binary/Base64.html)。

# javascript - 在带有 Node.js 的 Mongoose 中使用虚拟 getter 是否会影响性能？

> ID：13475745
> 
> 赞同：5
> 
> 时间：2012-11-20T14:50:04.180
> 
> 标签：javascript, performance, node.js, mongoose

我开始在真实世界的应用程序中使用 Mongoose 中的虚拟 getter 方法，并且想知道使用它们是否会对性能产生影响，这将是很好的预先了解。

例如：

```
var User = new Schema({
  name: {
    first: String,
    last: String
  }
});

User.virtual('name.full').get(function () {
  return this.name.first + ' ' + this.name.last;
}); 
```

基本上，我还不明白 getter 是如何生成到 Mongoose 使用的对象中的，以及这些值是在对象初始化时还是按需填充的。

`__defineGetter__`可用于将属性映射到 Javascript 中的方法，但 Mongoose 似乎并未将其用于虚拟 getter（基于对代码的快速搜索）。

另一种方法是在初始化时填充每个虚拟路径，这意味着对于上面示例中的 100 个用户，连接名字和姓氏的方法被调用 100 次。

（我使用的是一个简化的例子，getter 可能要复杂得多）

检查原始对象本身（例如使用`console.dir`）有点误导，因为 Mongoose 使用内部方法来处理将对象转换为“普通”对象或 JSON，默认情况下不包括 getter。

如果有人能阐明这是如何工作的，以及大量吸气剂是否会成为大规模的问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:55:57.523

他们可能使用标准方式完成：

```
Object.defineProperty(someInstance, propertyName, {get: yourGetter}); 
```

...意思是“不在初始化”。我认为，在初始化时读取虚拟属性会破坏虚拟属性的意义。

# java - 全屏 AlertDialog 更改布局颜色

> ID：13475754
> 
> 赞同：1
> 
> 时间：2012-11-20T14:50:29.840
> 
> 标签：java, android

我在这里使用另一个答案的代码：

```
 AlertDialog.Builder adb = new AlertDialog.Builder(this);
    Dialog d = adb.setView(new View(this)).create();
    // (That new View is just there to have something inside the dialog that can grow big enough to cover the whole screen.)

    WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
    lp.copyFrom(d.getWindow().getAttributes());
    lp.width = WindowManager.LayoutParams.FILL_PARENT;
    lp.height = WindowManager.LayoutParams.FILL_PARENT;
    d.show();
    d.getWindow().setAttributes(lp); 
```

我真的发现全屏制作 alertDialog 很有用，但颜色最终是带有白色文本的黑色背景，而不是带有黑色文本的白色背景。我不知道这段代码如何改变颜色。谁能提供一些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:29:18.850

在行中：

```
Dialog d = adb.setView(new View(this)).create(); 
```

您创建了一个`View`默认为黑色背景的新选项。

然后你在任何地方都使用这个视图属性：

```
lp.copyFrom(d.getWindow().getAttributes());
d.getWindow().setAttributes(lp); 
```

**解决方案：**

创建新视图后，设置背景：

```
View view = new View(this);
view.setBackgroundColor(...);
Dialog d = adb.setView(view).create(); 
```

问候。

# android - 布局对齐问题

> ID：13475755
> 
> 赞同：0
> 
> 时间：2012-11-20T14:50:31.493
> 
> 标签：android, textview, alignment

我有一个相对布局，里面有两个线性布局，每个布局都有两个文本视图。我希望文本视图水平显示为一行。代码如下：

```
 <RelativeLayout
        android:id="@+id/linear2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <LinearLayout
            android:id="@+id/txtlinear"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/esms_parentfees_classtext"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/esms_parentfees_classdetais"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </LinearLayout>
      <LinearLayout
            android:layout_gravity="center_horizontal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/esms_parentfees_classdetais"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/esms_parentfees_datetext"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

            <TextView
                android:id="@+id/esms_parentfees_datedetais"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </LinearLayout>
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:55:24.737

关于您的 XML 的注释：

*   您不能在 LinearLayout 中使用 toRightOf 等
*   相对布局没有方向

出于某种原因需要显示所有 XML 吗？忽略这一行

```
<RelativeLayout 
    android:id="@+id/relativeLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/esms_parentfees_classtext"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.5" />

        <TextView
            android:id="@+id/esms_parentfees_classdetais"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.5" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/esms_parentfees_datetext"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.5" />

        <TextView
            android:id="@+id/esms_parentfees_datedetais"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.5" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:15:18.203

如果您需要连续四个文本视图，只需使用其中包含四个文本视图（或表格布局）的线性布局，而不是在相对布局中使用两个线性布局。

看看这个：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/txtlinear"
    >
   <TextView
        android:id="@+id/esms_parentfees_classtext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="hi" />

    <TextView
        android:id="@+id/esms_parentfees_classdetais"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="hi" />

    <TextView
        android:id="@+id/esms_parentfees_datetext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="hi" />

    <TextView
        android:id="@+id/esms_parentfees_datedetais"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="hi" />

</LinearLayout> 
```

或者

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignRight="@+id/txtlinear"
 >

<TableRow
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/esms_parentfees_classtext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="hi" />

    <TextView
        android:id="@+id/esms_parentfees_classdetais"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="hi" />

    <TextView
        android:id="@+id/esms_parentfees_datetext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="hi" />

    <TextView
        android:id="@+id/esms_parentfees_datedetais"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="hi" />
</TableRow>

</TableLayout> 
```

或者如果你需要一个包含两个线性布局的相对布局，你可以遵循上面的任何解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:52:40.723

最简单的方法是使外部 RelativeLayout 成为 LinearLayout

```
 <LinearLayout
    android:id="@+id/linear2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" > 
```

然后删除任何标签

```
android:layout_toRightOf="@+id/esms_parentfees_classdetais" 
```

或者，您可以将上面提到的标签更改为

```
android:layout_below="@+id/esms_parentfees_classdetais" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-20T14:57:06.483

```
<RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            >
            <TextView
                 android:id="@+id/esms_parentfees_classtext"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                />
            <TextView
                 android:id="@+id/esms_parentfees_classdetais"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toLeftOf="@+id/esms_parentfees_classtext"
                 />
        </RelativeLayout> 
```

# c++ - 提供/添加不同成员函数的 C++ 模板特化

> ID：13475758
> 
> 赞同：2
> 
> 时间：2012-11-20T14:50:48.500
> 
> 标签：c++, templates, typedef, template-specialization, typetraits

我正在尝试一些类型特征和模板专业化。例如：

```
enum TestEnum
{
    VALUE0 = 0,
    VALUE1 = 1,
    VALUE2 = 2
    //... And so on...
};

template<int Value>
class cTestClass;

//specializations
template<>
class cTestClass<VALUE0>
{
    static int GetVal() { return VALUE0; }
};

template<>
class cTestClass<VALUE1>
{
    static int GetVal() { return VALUE1; }
};

template<>
class cTestClass<VALUE2>
{
    static int GetVal() { return VALUE2; }
};

typedef cTestClass<VALUE0> cClassVal0; //(1)
typedef cTestClass<VALUE1> cClassVal1; //(2)
typedef cTestClass<VALUE2> cClassVal2; //(3)

//Later in the code
template<int Value>
cTestClass<Value>* Create()
{
    return new cTestClass<Value>(/*..*/);
}

//And using the upper function
cClassVal2* pTestClass = Create<VALUE2>(); 
```

这绝对没问题。目标是为界面用户提供一种不处理模板和模板参数的方法（好的，除了使用*Create()*）。这就是代码底部的 typedef 的原因。

不，这是我接下来要实现的目标：cTestClass 应该有一个可以通过成员函数访问的成员变量。在某些情况下，我希望用户能够修改成员变量或不修改成员变量。所以基本上这意味着两个成员函数，一个将成员作为 const 引用（不可修改）或非 const（可修改）返回。问题是，如果提供了这两个成员函数，用户总是有机会修改成员变量。所以我想在编译时选择合适的成员函数，只为用户提供一个正确的成员函数。

我想出的唯一解决方案基本上是这样的：

```
template<int Value, bool ConstAccess>
class cTestClass;

//specializations
template<>
class cTestClass<VALUE0, true>
{
    const std::string& get() const
    {
        return m_strName;
    }

    static int GetVal() { return VALUE0; }

private:
    std::string m_strName;
};

template<>
class cTestClass<VALUE0, false>
{
    std::string& get()
    {
        return m_strName;
    }

    static int GetVal() { return VALUE0; }

private:
    std::string m_strName;
};

//For every upcoming cTestClass two specializations

typedef cTestClass<VALUE0, true> cConstObjectVal0;
typedef cTestClass<VALUE0, false> cObjectVal0;
//And for the rest... 
```

除了这确实是不必要的代码重复这一事实之外，我总是必须为每个可能的 VALUE 指定两个 typedef。但是用户不应该面临这样的选择，他应该总是能够只使用上面给出的类型（参见 1、2、3）。

这甚至可能吗？

我用谷歌搜索了一下，找到了以下网站：[ACCU:: An Introduction to C++ traits](http://accu.org/index.php/journals/442)。这个解释似乎是一个匹配的蓝图，但我真的无法将各个部分放在一起。我发现的另一种可能性在这里描述：[C++ Template specialization to provide extra member function？](https://stackoverflow.com/questions/1699015/c-template-specialization-to-provide-extra-member-function)只添加一个函数是可能的，但这仍然不能解决我的 typedef 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:33:08.957

我们可以尝试使用[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)：

```
typedef char True;
typedef long False;

template <typename VALUE0, typename IsConst>
class cTestClass
{
public:

    template <typename T, T> struct TypeCheck {};

    const std::string& get(TypeCheck<IsConst, True >* dummy = NULL);
          std::string& get(TypeCheck<IsConst, False>* dummy = NULL);
}

typedef cTestClass<VALUE0, True>  cConstObjectVal0;
typedef cTestClass<VALUE0, False> cObjectVal0; 
```

我还没有尝试编译它，但一般的原则是阻止其中一个函数编译正确，然后，由于[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)原则，编译器只会丢弃错误的版本。

# php - MongoDB PHP：从 Slaves 读取并使用重读环境设置持久连接

> ID：13475762
> 
> 赞同：7
> 
> 时间：2012-11-20T14:50:57.410
> 
> 标签：php, mongodb, mongodb-php

我正在尝试将所有传入的读取查询设置为命中我的 mongo 服务器上的从属服务器。

我在 PHP 文档中看到了对以下内容的引用：

```
MongoCursor::$slaveOkay = true; 
```

但是，这似乎只是设置了要向从属设备发送的查询；不是真的做任何其他事情。我与服务器的连接如下所示：

```
$mongo = new Mongo("mongodb://my.server:27017", 
                      array("replicaSet" => 'replicaSet', "persist" => "pool")
                  ); 
```

*   当我只想连接到从站进行读取时，我是否需要对持久连接做任何不同的事情？

*   如何将查询定位到仅命中从属设备，以便我在主服务器上的写入不会阻塞传入的读取请求。

PHP 文档向我展示了这个例子：

```
$db->setSlaveOkay(true);
$c = $db->myCollection;

$cursor = $c->find(); 
```

但是，我对上述两者之间的差异以及是否需要两者感到困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T19:39:55.947

### SlaveOkay 和读取首选项

SlaveOkay 首选项实际上是“次要首选”，但仍允许从主要读取。

MongoDB 2.2 和 Mongo PHP 1.3.0 驱动程序引入了几种新的[读取偏好模式](http://docs.mongodb.org/manual/applications/replication/#read-preference-modes)，因此现在有：

*   `primary`- 只从主要读取
*   `primaryPreferred`- 从主数据库读取，除非它不可用
*   `secondary`- 只从二级读取
*   `secondaryPreferred`- 更喜欢从辅助读取（与 slaveOK 等效的语义）
*   `nearest`- 从副本集中最近的成员读取（按 ping 时间）

MongoDB 2.2 中的另一个新特性是对[Tag Sets](http://docs.mongodb.org/manual/applications/replication/#tag-sets)的支持，它允许您通过标记副本集成员来指定自定义读取首选项。这允许您定位特定的辅助节点。例如，副本集成员可以标记为：`{ 'group' : 'reporting' }`。

有关 PHP 驱动程序中读取首选项的更多信息，请参阅[PHP.net 上的 Mongo 手册：读取首选项](http://php.net/manual/en/mongo.readpreferences.php)。

### 持久连接

连接池已针对 PHP 1.3.0 驱动程序版本进行了重写，所有连接现在都是持久的。

根据[变更日志](http://php.net/manual/de/mongo.construct.php)：

> 删除了“持久”选项，因为所有连接现在都是持久的。它仍然可以使用，但它不会影响任何东西。

# javascript - 从当前位置相对移动选择

> ID：13475767
> 
> 赞同：0
> 
> 时间：2012-11-20T14:51:25.347
> 
> 标签：javascript, photoshop, extendscript, photoshop-script

我想将我在整个文档中所做的选择相对于其当前位置移动其宽度量（var x2）。在早期版本中似乎有一个翻译功能完全符合我的要求，但这个功能现在给出了“这个版本的 Photoshop 可能不支持”错误。我在**Photoshop Extended CS6**中工作。这是我的选择：

```
 var x2 = 720;
 var y2 = 350;

  docRef.selection.select(Array (Array(0, 0), Array(x2, 0), Array(x2, y2), Array(0, y2))); 
```

我试图为此建立一个等式，但我得到的只是垃圾选择，它们甚至不再是矩形了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:01:07.147

没关系，这很简单，我想我脑子里有个结。

这完美地工作：

```
 var offset = 720;   
 var x2 = 720+offset;
  var y2 = 350;

  docRef.selection.select(Array (Array(0+offset, 0), Array(x2,0), Array(x2, y2), Array(0+offset, y2))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:35:52.877

我认为翻译（在早期版本中）不起作用，或者现在已经过时，因为它是基于点的，而不是基于像素的。1 点 = 4.86127 像素

我倾向于使用这个函数来获得一个矩形或椭圆形的选择。我发现它比每次都定义四个限制（上、左、右、下）而不是四组 x 和 y 坐标更容易。

```
 selectThis(10, 10, 90, 90, "rect")

// function selectThis (top, left, right, bottom, ellipse or rect [default], antialias [default] )
// ----------------------------------------------------------------------------
function selectThis(top, left, right, bottom, shape, aa)
{
    srcDoc.selection.deselect()
    // =======================================================
    var id1 = charIDToTypeID( "setd" );
    var desc1 = new ActionDescriptor();
    var id2 = charIDToTypeID( "null" );
    var ref1 = new ActionReference();
    var id3 = charIDToTypeID( "Chnl" );
    var id4 = charIDToTypeID( "fsel" );
    ref1.putProperty( id3, id4 );
    desc1.putReference( id2, ref1 );
    var id5 = charIDToTypeID( "T   " );
    var desc2 = new ActionDescriptor();
    var id6 = charIDToTypeID( "Top " );
    var id7 = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( id6, id7, top );
    var id8 = charIDToTypeID( "Left" );
    var id9 = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( id8, id9, left );
    var id10 = charIDToTypeID( "Btom" );
    var id11 = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( id10, id11, bottom );
    var id12 = charIDToTypeID( "Rght" );
    var id13 = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( id12, id13, right );

    if (shape == "Elps" || shape == "oval")
    {
        var id14 = charIDToTypeID( "Elps" );
        desc1.putObject( id5, id14, desc2 );
        var id15 = charIDToTypeID( "AntA" );
        if (aa == true || aa == undefined)
        {
            desc1.putBoolean( id15, true );
        }
        else
        {
            desc1.putBoolean( id15, false );
        }
    }
    else
    {
        var id16 = charIDToTypeID( "Rctn" );
        desc1.putObject( id5, id16, desc2 );
    }

    executeAction( id1, desc1, DialogModes.NO );
} 
```

希望这会有所帮助。

# c# - Ninject - Binding.GetProvider 抛出 NullReferenceException

> ID：13475769
> 
> 赞同：8
> 
> 时间：2012-11-20T14:51:33.893
> 
> 标签：c#, asp.net, exception, dependency-injection, ninject

我在 asp.net Web 表单应用程序中使用 2.2.0.0 版的 Ninject，经过几百个请求后，它有时会在 Binding 类的 GetProvider 方法中引发 NullReferenceException。

示例堆栈跟踪： http: [//pastebin.com/BbhsPQMT](http://pastebin.com/BbhsPQMT)

仅当我对应用程序进行压力测试并且异常的来源通常不同（解析不同的接口）时才会发生异常。

为了试图理解为什么会出现这个问题，我查看了 Ninject 源代码并插入了一些代码行以进行调试。我后来确认为 null 的对象是 Binding 类中的 ProviderCallback 属性。

我还在 ProviderCallback 属性的 set 运算符中添加了一些代码，以便了解它是否被设置为 null。在运行了一些测试并查看了一些内存转储之后，似乎 ProviderCallback 属性没有设置为空值，因此我认为该实例正在由 GC 收集。

我仍然不明白为什么会这样......

任何帮助是极大的赞赏。

**编辑：**我们升级到最新版本的 Ninject 只是为了检查异常是否仍然发生，但在对应用程序进行压力测试后我们得到了相同的异常：http: [//pastebin.com/YaiaZndz](http://pastebin.com/YaiaZndz)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T18:07:01.830

我无法告诉您此问题的原因，因为我无法重现这种行为。但是，您可以采取一些步骤来确定问题。

正如您所说，问题是由 a `ProviderCallback`that is引起的`null`。这不能由 GC 引起，因为 GC 永远不会分配`null`给属性。相反，您将得到一个已经处理的异常或其他奇怪的行为。但是还有其他一些原因会发生这种情况：

1.  `Null`是在某个时间分配的，但是由于您已经对此进行了验证，因此这不是原因。
2.  它根本没有被分配。
3.  `BindingConfiguration`稍后会创建一个新的。

`BindingConfiguration`通过在构造函数中添加断点可以轻松验证第三点。在成功配置内核并开始解析对象后，不应再调用它。

对于第二个问题，在内核配置后执行以下命令：

```
var kernel = your fully configured kernel;
var bindingsField = typeof(KernelBase).GetField("bindings", BindingFlags.NonPublic | BindingFlags.Instance);
var bindings = bindingsField.GetValue(kernel) as IEnumerable<KeyValuePair<Type, ICollection<IBinding>>>;

foreach (var bindingsEntry in bindings
    .Where(bindingsEntry => bindingsEntry.Value
        .Any(binding => binding.BindingConfiguration.ProviderCallback == null)))
{
    throw new Exception(string.Format("No Provider callback defined for {0}.", bindingsEntry.Key));
} 
```

# xsd - JMeter - XML 模式断言不起作用？

> ID：13475770
> 
> 赞同：1
> 
> 时间：2012-11-20T14:51:36.607
> 
> 标签：xsd, jmeter, dtd

我在使用**DTD**或**XSD**格式的模式来验证返回给 JMeter 的 XML 时遇到问题。

我得到的错误代码是这样的。

```
Assertion error: true
Assertion failure: false
Assertion failure message: error: line=1 col=71 schema_reference.4: Failed to read schema document 'schema.dtd', because 
1) could not find the document; 
2) the document could not be read; 
3) the root element of the document is not <xsd:schema>. 
```

我已确保架构与 Jmeter 测试位于同一位置，并且不是只读等。

**示例 DTD**

```
<!ELEMENT userId (#PCDATA)>
<!ELEMENT recordId (#PCDATA)>
<!ELEMENT operationDateTime (#PCDATA)>
<!ELEMENT operationCode (#PCDATA)>
<!ELEMENT oldVal (#PCDATA)>
<!ELEMENT newVal (#PCDATA)>
<!ELEMENT listOfAuditItems ((auditItem))>
<!ELEMENT fieldName (#PCDATA)>
<!ELEMENT buscomp (#PCDATA)>
<!ELEMENT auditItem ((recordId, userId, operationCode, buscomp, operationDateTime, fieldName, oldVal, newVal))>
<!ELEMENT ariResponse ((listOfAuditItems))> 
```

[我在这里](http://www.validome.org/grammar/validate/)检查了DTD文件的有效性，它通过了！

**示例 XML**

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
    <ariResponse>
        <listOfAuditItems>
            <auditItem>
                <recordId>2-1DFSGT</recordId>
                <userId>1-1SJKJS</userId>
                <operationCode>Modify</operationCode>
                <buscomp>Service Request</buscomp>
                <operationDateTime>2010-05-12T15:23:53.000+05:30</operationDateTime>
                <fieldName />
                <oldVal />
                <newVal />
                <auditLog>2*C311*EVT_STAT_CD16*TODO_PLAN_END_DT11*OWNER_LOGIN2*N34*Open19*2011-01-06
                    16:28:567*RITESHP2*O30*0*0*
                </auditLog>
            </auditItem>
        </listOfAuditItems>
        <returncode>0</returncode>
        <errormessage />
    </ariResponse> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:51:35.157

摘要：最后我使用[http://path.to.schema/myschema.xsd](http://path.to.schema/myschema.xsd)作为断言中的文件名参数。

说明：按照 Alies Belik 的建议，我发现设置架构的代码如下所示：

```
DocumentBuilderFactory parserFactory = DocumentBuilderFactory.newInstance();
...
parserFactory.setAttribute("http://java.sun.com/xml/jaxp/properties/schemaSource", xsdFileName); 
```

其中 xsdFileName 是一个字符串（属性字符串实际上是一个常量，为了便于阅读，我将其内联）。

例如，根据此页面，该属性在以字符串的形式出现时，被解释为一个 URI——它包括 HTTP URL。由于我已经拥有可通过 HTTP 访问的架构，因此我选择了此解决方案。

# ios - 在手机上测试时没有出现 Game Center ViewController

> ID：13475774
> 
> 赞同：0
> 
> 时间：2012-11-20T14:51:50.773
> 
> 标签：ios, objective-c, game-center, sparrow-framework

我用的是iOS6，我的手机是4S。

我正在使用 GKLeaderboards 示例中的代码来使 Game Center 正常工作并通过本地玩家身份验证。这段代码我已经导入到我自己的 Sparrow 框架脚手架项目中。

这似乎在模拟器上工作得很好，我得到“欢迎回来 xxxx，**** 沙盒模式 *** ”消息。

但是当我在实际的 iPhone 上测试它时，我的游戏（现在只是由屏幕上的许多图块组成）减速到爬行，并且没有游戏中心消息出现。

查看代码，因为我在手机上使用不同的 Game Center 帐户（我不是沙盒帐户）登录，所以我认为它正在尝试使用新帐户视图显示登录，但它没有出现。

我正在使用的代码是...

```
localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error){
            // If there is an error, do not assume local player is not authenticated.
            if (viewController != nil)
            {
                [mainViewController presentViewController:viewController animated:NO completion:nil];
                //store this view controller pointer
                NSLog(@"viewController != nil");

            }
            else if (localPlayer.isAuthenticated)
            {
                NSLog(@"Authentication changed: player authenticated.");
            }
            else
            {
              NSLog(@"can't log in");
            }
           } 
```

我认为问题是由这条线引起的......

```
[mainViewController presentViewController:viewController animated:NO completion:nil]; 
```

游戏似乎没有崩溃，但似乎出了点问题，导致现在一切都变慢了，关于什么可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:51:16.403

好的，我似乎已经开始工作了。基本上我没有正确设置 mainViewController。

# makefile - 如何用clang编译c99-to-c89转换器？

> ID：13475775
> 
> 赞同：0
> 
> 时间：2012-11-20T14:51:52.033
> 
> 标签：makefile, ffmpeg, clang, llvm-clang

我正在尝试在 Windows 中为 VisualStudio 编译 ffmpeg，其中一个步骤是根据[这篇文章使用 clang 编译](http://blogs.gnome.org/rbultje/2012/09/27/microsoft-visual-studio-support-in-ffmpeg-and-libav/)[c99-to-c89](https://github.com/rbultje/c99-to-c89)代码。我设法创建了 clang.exe，但我如何用它编译 c99-to-c89 代码？

我在 c99-to-c89 中更改了一点 makefile，所以`CC`变量现在指向 clang.exe 编译器而不是 cl.exe

```
EXT=.exe

all: c99conv$(EXT) c99wrap$(EXT)

CLANGDIR=C:/build
CC=C:/build/bin/Release/clang.exe
CFLAGS=-nologo -Z7 -D_CRT_SECURE_NO_WARNINGS=1 -Dpopen=_popen -Dunlink=_unlink -Dstrdup=_strdup -Dsnprintf=_snprintf -I. -I$(CLANGDIR)/tools/clang/include
LDFLAGS=-nologo -Z7 $(CLANGDIR)/lib/Release/libclang.lib

clean:
    rm -f c99conv$(EXT) c99wrap$(EXT) convert.o compilewrap.o
    rm -f unit.c.c unit2.c.c

test1: c99conv$(EXT)
    $(CC) -P unit.c -Fiunit.prev.c
    ./c99conv unit.prev.c unit.post.c
    diff -u unit.{prev,post}.c

test2: c99conv$(EXT)
    $(CC) -P unit2.c -Fiunit2.prev.c
    ./c99conv unit2.prev.c unit2.post.c
    diff -u unit2.{prev,post}.c

test3: c99conv$(EXT)
    $(CC) $(CFLAGS) -P -Ficonvert.prev.c convert.c
    ./c99conv convert.prev.c convert.post.c
    diff -u convert.{prev,post}.c

c99conv$(EXT): convert.o
    $(CC) -Fe$@ $< $(LDFLAGS) $(LIBS)

c99wrap$(EXT): compilewrap.o
    $(CC) -Fe$@ $< $(LDFLAGS)

%.o: %.c
    $(CC) $(CFLAGS) -Fo$@ -c $< 
```

但是当我运行`make`命令时，我得到`clang: error: unsupported use of internal gcc -Z option '-Z7'`. 我猜是问题所在`CFLAGS`，`LDFLAGS`但我不知道如何解决它，因为缺乏对 makefile 和 clang 的了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:30:28.510

如果有人仍然需要，来自 libav 的人为我提供了[此](https://github.com/libav/c99-to-c89/downloads)链接以下载二进制文件`c99conv.exe`，，`c99wrap.exe``makedef`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:42:59.053

c99conv 必须用 msvc 编译器编译，但它使用来自 LLVM 的库。实际上，转换器使用 clang 作为解析器 C99 源。

因此 clang 需要用 MSVC 编译（因为 MSVC 会将 libclang 与 c99conv 链接）。

因此，只需从您链接的文章中引导构建说明。

*   运行 Visual Studio 命令提示符。
*   从 mingw 运行 msys shell。
*   为您的环境调整 Makefile.w32
*   使用 Makefile.w32 编译 c99conv

 *```
make -f Makefile.w32 
```*

# ruby-on-rails - 使用 gmail 问题通过 Rails 3 发送电子邮件

> ID：13475777
> 
> 赞同：2
> 
> 时间：2012-11-20T14:51:58.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, production-environment

我在尝试通过 gmail 发送电子邮件时收到此错误 -

```
Net::SMTPAuthenticationError (530 5.7.0 Must issue a STARTTLS command first. pw17sm4922458lab.5
):
  app/controllers/contact_controller.rb:11:in `create' 
```

我尝试了很多不同的东西，但无济于事，下面是我在 production.rb 中的设置

```
 # Change mail delvery to either :smtp, :sendmail, :file, :test
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = {
    address: "smtp.gmail.com",
    port: 587,
    domain: "bizmodev.com",
    authentication: "plain",
    enable_starttls_auto: true,
    user_name: '******.*****@gmail.com',
    password: '********'
  }

  # Specify what domain to use for mailer URLs
  config.action_mailer.default_url_options = {host: "bizmo.co.uk"} 
```

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:15:11.390

好的修复它，基本上我在我的 VPS 上安装了 sendmail，然后重新启动了 Apache，它现在可以工作了 -

Ubuntu Sendmail 命令行安装

```
apt-get install sendmail 
```

希望这可以帮助将来的人......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:09:31.777

您可以像这样启用 starttls：

```
config.action_mailer.smtp_settings = {
   ....
   :enable_starttls_auto => true} 
```

# android - Google Maps Android 上的多个图钉不起作用

> ID：13475780
> 
> 赞同：2
> 
> 时间：2012-11-20T14:52:07.620
> 
> 标签：android, google-maps

当用户的当前位置发生变化时，我一直在使用[先前的问题](https://stackoverflow.com/questions/10248648/draw-pins-mapoverlays-on-google-maps-with-latitude-and-longitude-from-an-object)和[Google 教程](https://developers.google.com/maps/documentation/android/hello-mapview)尝试在 Google 地图视图上添加多个图钉图像。

点击每个大头针时都会显示大头针的经度和纬度。

但是，目前我的代码仅显示一个图钉，并且在用户位置更改时不会添加另一张图像。我对 Android 比较陌生，不明白为什么这段代码不起作用？

[地图.java：](http://sprunge.us/LjLH)

```
import java.util.List;

import android.graphics.drawable.Drawable;
import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.OverlayItem;

import android.util.Log;

public class Map extends MapActivity {
   private MapView map;
   private MapController controller;
   private double lon, lat;
   private Drawable drawable;
   private MapOverlay itemizedoverlay;
   private List<Overlay> mapOverlays;

   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      setContentView(R.layout.maps);
      initMapView();
      mapOverlays = map.getOverlays();
      drawable = this.getResources().getDrawable(R.drawable.pin);
      itemizedoverlay = new MapOverlay(drawable, this);
      initMyLocation();

   }

   private void initMapView() {
      map = (MapView) findViewById(R.id.map);
      controller = map.getController();
      map.setSatellite(true);
      map.setBuiltInZoomControls(true);
   }

   private void initMyLocation() {
      final MyLocationOverlay overlay = new MyLocationOverlay(this, map);
      overlay.enableMyLocation();
      overlay.enableCompass(); // wont work in emulator
      overlay.runOnFirstFix(new Runnable() {
         public void run() {
            // Zoom in to current location - 1 is word view
            controller.setZoom(20);
            controller.animateTo(overlay.getMyLocation());
            lon = overlay.getMyLocation().getLongitudeE6();

            lat = overlay.getMyLocation().getLatitudeE6();
            setLON(lon);
            setLAT(lat);
            //-0.959896
            //51.742953
            Log.w("test-lon", Double.toString(lon/1E6));
            Log.w("test-lat", Double.toString(lat/1E6));
            GeoPoint point = new GeoPoint((int)(lat),(int)(lon));

            mapOverlays.add(itemizedoverlay);
            test(point);
         }
      });

      map.getOverlays().add(overlay);

   }

   public void setLON(double x){ //remove?

       lon = x;

   }
 public void setLAT(double x){ //remove?

       lat = x;
   }
   public void test(GeoPoint px){

       OverlayItem overlayitem = new OverlayItem(px,"Test Point" , "Lat: " + Double.toString(lat/1E6) + "\nLon: " + Double.toString(lon/1E6) );
       itemizedoverlay.addOverlay(overlayitem);

   }

   @Override
   protected boolean isRouteDisplayed() {
      // Required method from MapActivity

      return false;
   }
} 
```

[MapOverlay.java：](http://sprunge.us/EMNV)

```
import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class MapOverlay extends ItemizedOverlay {

    private ArrayList<OverlayItem> mapOverlay = new ArrayList<OverlayItem>();
    private Context mContext;

    public MapOverlay (Drawable defaultMarker, Context context) {
          super(boundCenterBottom(defaultMarker));
          mContext = context;
        }

    public MapOverlay(Drawable arg0) {
        super(boundCenterBottom(arg0));

    }

    public void addOverlay(OverlayItem overlay) {
        mapOverlay.add(overlay);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
      return mapOverlay.get(i);
    }

    @Override
    public int size() {
        return mapOverlay.size();
    }

    @Override
    protected boolean onTap(int index) {
      OverlayItem item = mapOverlay.get(index);
      AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
      dialog.setTitle(item.getTitle());
      dialog.setMessage(item.getSnippet());
      dialog.show();
      return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:48:30.153

你需要实现类 LocationListener 来监听我们的位置变化并在地图上更新。

```
class LocationsListeners implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {
        setLAT(location.getLatitude());
        setLON(location.getLongitude());
        setGeoPoint(lat, lon);
        mapOverlays.add(geoPoint);          
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

你需要计算 GeoPoint 的方法：

```
 public GeoPoint setGeoPoint(double lat, double lon){
       geoPoint = new GeoPoint((int) (lat * 1E6), (int)(lon  * 1E6));
       return geoPoint;
    } 
```

或使用 Little Fluffy Location - 它的库更新我们的位置并通知你，是广播接收器，非常简单和快速的实现：

尝试：

[http://code.google.com/p/little-fluffy-location-library/](http://code.google.com/p/little-fluffy-location-library/)

# objective-c - 在Objective C中使用对象更改字符串的字体

> ID：13475782
> 
> 赞同：0
> 
> 时间：2012-11-20T14:52:18.170
> 
> 标签：objective-c, json, fonts

我正在从`JSON`文件中引入一些数据，并且我想将字体更改为，`courier`但是当我尝试执行以下操作时，出现此错误：`"Property 'font' not found on object NSString"`. 有没有办法解决？

```
NSString *timePeriod = [diction objectForKey:@"Time Period"];  

UIFont *changeFont = [UIFont fontWithName:@"Courier" size:12];
timePeriod.font = changeFont; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:10:11.290

字体是属性字符串的一部分。

```
NSMutableAttributedString timeSringWithAttr = [[NSMutableAttributedString alloc] initWithString:timeString];
[timeStringWithAttr addAttribute:NSFontAttributeName
                           value:changeFont
                           range:NSRangeFromString(timeString)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:57:03.527

NSString 只存储字符串，它不知道字体。如果要在绘制字符串时设置字体，请使用 NSString AppKit 添加：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSString_AppKitAdditions/Reference/Reference.html#//apple_ref/doc/uid/20000155](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSString_AppKitAdditions/Reference/Reference.html#//apple_ref/doc/uid/20000155)

基本上，您想在将字符串绘制到屏幕时设置字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:21:04.010

NSString 类没有字体属性，它不应该因为每个 String 对象都是一个字符数组。
相反，使用 UILabel 或 UITextView，取决于您对其中文本的需求，并在它们上设置字体属性。

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 50)];
label.text = @"YOUR_TEXT";
label.font = [UIFont fontWithName:@"Courier" size:12.0f]; 
```

按照惯例，你不应该用动词名称命名变量，那些是用于函数的。
像 UIFont *changeFont..

# python - sudo virtualenv -p 给出 PermissionError: [Errno 13] Permission denied？

> ID：13475787
> 
> 赞同：1
> 
> 时间：2012-11-20T14:52:40.740
> 
> 标签：python, macos, virtualenv

当我尝试跑步时

```
sudo virtualenv -p /Library/Frameworks/Python.framework/Versions/7.3/Resources/Python.app/Contents/MacOS 
```

它显示以下错误：

```
Running virtualenv with interpreter 

/Library/Frameworks/Python.framework/Versions/7.3/Resources/Python.app/Contents/MacOS
Traceback (most recent call last):
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.3/bin/virtualenv", line 9, in <module>
    load_entry_point('virtualenv==1.8.2', 'console_scripts', 'virtualenv')()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/virtualenv.py", line 897, in main
    popen = subprocess.Popen([interpreter, file] + sys.argv[1:], env=env)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/subprocess.py", line 818, in __init__
    restore_signals, start_new_session)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/subprocess.py", line 1416, in _execute_child
    raise child_exception_type(errno_num, err_msg)
PermissionError: [Errno 13] Permission denied 
```

[我尝试按照此答案](https://stackoverflow.com/questions/11708708/pip-and-virtualenv-w-o-virtualenvwrapper-pip-install-package-name-gives-permi)的建议删除我的 pip.log 文件，但问题仍然存在。有什么解决办法吗？

编辑：

我应该解释一下，我正在尝试创建一个位于 的 virtualenv，`<path name>`因为我想为那个版本的 Python 安装一个带有 pip 的包。

# google-cloud-storage - Google Cloud Storage 免费试用配额详情

> ID：13475798
> 
> 赞同：0
> 
> 时间：2012-11-20T14:53:13.310
> 
> 标签：google-cloud-storage

*   当我处于免费试用配额时，是否可以为 Google Cloud Storage 设置配额（使用限制）？否则我有无限的风险，直到我注意到它并设置配额，当免费试用配额结束时。

    （我可以在我的 google api 控制台的配额选项卡上为已激活的 api 设置配额，例如预测 API。）

*   “Google Cloud Storage 在 2012 年 12 月 31 日之前提供免费试用配额”。之后会有免费试用名额吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:17:43.640

Google Cloud Storage 不对 XML API 或公共对象的 HTTP 读取实施使用限制。JSON API 在 Google API 控制台 -> 服务 ( [https://code.google.com/apis/console/](https://code.google.com/apis/console/) ) 中列出了每日上限（“礼貌限制” ）。您可以通过旁边的链接请求更改该上限，但不会影响访问数据的其他两个选项。

免费试用配额与此无关，它使每个月的初始使用免费。此处的详细信息：[https ://developers.google.com/storage/docs/pricingandterms](https://developers.google.com/storage/docs/pricingandterms)

# c++ - 为什么安装 VSTS 2010 SP1 后找不到 Ws2_32.lib

> ID：13475801
> 
> 赞同：0
> 
> 时间：2012-11-20T14:53:28.930
> 
> 标签：c++, windows, visual-studio-2010, visual-c++

为什么安装 VSTS 2010 SP1 后找不到 Ws2_32.lib？

我必须安装 Windows SDK 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:00:50.097

是的，下载并安装 Windows SDK。在您的 VS2010 情况下，它将是 Windows 7 SDK。

[http://cboard.cprogramming.com/networking-device-communication/98804-cannot-find-ws2_32-lib-socket-programming.html](http://cboard.cprogramming.com/networking-device-communication/98804-cannot-find-ws2_32-lib-socket-programming.html)

# extjs - Sencha Extjs CMD - 包括自定义 css

> ID：13475803
> 
> 赞同：2
> 
> 时间：2012-11-20T14:53:32.630
> 
> 标签：extjs, cmd, extjs4.1

我使用“sencha generate app”来创建我的 Extjs mvc 结构。我不知道在哪里添加我的自定义 css，以便在构建中使用它。在 Touch 中，我会把它放在 app.json 中。我查看了 .sencha 但找不到任何明显的地方。我还希望它在测试时与我的 index.html 一起工作。我只是把它放在我的 index.html 中吗？

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>AM</title>
<link rel="stylesheet" href="resources/css/default/app.css">

<!-- Like this ?  -->

 <link rel="stylesheet" href="resources/MyApp.css">
<!-- <x-compile> -->
    <!-- <x-bootstrap> -->
        <script src="ext/ext-dev.js"></script>
        <script src="bootstrap.js"></script>
    <!-- </x-bootstrap> -->
    <script src="app/app.js"></script>
<!-- </x-compile> -->
</head>
<body></body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:43:44.447

在该`<HEAD>`部分中，您将放置一般的[CSS 样式表](http://www.w3.org/TR/html4/present/styles.html)和 SCRIPT 标签。

建议将您的`<SCRIPT>`标签放在页面底部（之前`</body>`），因为在脚本完成加载之前页面不会加载页面的其余部分。

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>AM</title>
<link rel="stylesheet" href="resources/css/default/app.css">

<!-- Like this !  -->
<link rel="stylesheet" href="resources/MyApp.css">
</head>
<body>

  <script src="ext/ext-dev.js"></script>
  <script src="bootstrap.js"></script>
  <script src="app/app.js"></script>
</body>
</html> 
```

# opengl - OpenGL 的立体 3D 渲染问题

> ID：13475804
> 
> 赞同：0
> 
> 时间：2012-11-20T14:53:37.397
> 
> 标签：opengl, stereo-3d, stereoscopy, glx, 3d-rendering

我正在尝试在 NVIDIA Quadro 5000 上使用立体 3D 渲染绘制从 .obj 文件加载的基本网格。据我所知，我认为我的左眼和右眼截锥体和偏移量已相应设置，但我的主要问题是写入和清除 BACK_LEFT 和 BACK_RIGHT 缓冲区。似乎它完全错过了第一部分，只绘制了 BACK_RIGHT 缓冲区（渲染循环的第二部分）。如果我能得到一些关于如何在同一帧中写入/读取和清除这些缓冲区的指示，那就太好了。它是一个 Linux 应用程序，因此是 glXSwap()，不使用 glut 或 glew 并使用 glm 进行数学运算。这是我的绘图循环：

```
void GLDraw::Draw()
{
    //initialise shader in frame
    shader->UseShaderProgram();

    //select back_left buffer
    glDrawBuffer(GL_BACK_LEFT);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    //set projection and view for back_left
    projectionMatrix = glm::frustum(-xCoord - frustumAssymmetry, xCoord - frustumAssymmetry, -yCoord, yCoord, 0.1f, 200.0f);
    projectionMatrix *= glm::translate(glm::mat4(1.0f), glm::vec3(eyeOffset, 0.0f, 0.0f));
    glUniformMatrix4fv(projectionMatrixLocation, 1, GL_FALSE, value_ptr(projectionMatrix));
    glUniformMatrix4fv(viewMatrixLocation, 1, GL_FALSE, &viewMatrix[0][0]);

    //set model matrix for rendering calls   
    modelMatrix = scale(mat4(1.0f), vec3(0.7, 0.7, 0.5f));
    modelMatrix *= translate(mat4(1.0f), vec3(0.0f, 0.0f, 0.0f));
    modelMatrix *= rotate(mat4(1.0f), i+=0.04, vec3(0.0f, 1.0f, 0.0f));
    glUniformMatrix4fv(modelMatrixLocation, 1, GL_FALSE, &modelMatrix[0][0]);

    //draw VAO
    glBindVertexArray(vikingVAO);
    glDrawElements(GL_TRIANGLES, viking_elements.size() * sizeof(viking_elements[0]), GL_UNSIGNED_SHORT, 0);
    glBindVertexArray(0);

    //select back_right buffer  <-- SEEMS TO ONLY RENDER FROM HERE, MISSING THE FIRST PART
    glDrawBuffer(GL_BACK_RIGHT);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    //set projection and view for back_right
    projectionMatrix = glm::frustum(-xCoord + frustumAssymmetry, xCoord + frustumAssymmetry, -yCoord, yCoord, 0.1f, 200.0f);
    projectionMatrix *= glm::translate(glm::mat4(1.0f), glm::vec3(-eyeOffset, 0.0f, 0.0f));
    glUniformMatrix4fv(projectionMatrixLocation, 1, GL_FALSE, value_ptr(projectionMatrix));
    glUniformMatrix4fv(viewMatrixLocation, 1, GL_FALSE, &viewMatrix[0][0]);

    //set model matrix for rendering calls   
    modelMatrix = scale(mat4(1.0f), vec3(0.7, 0.7, 0.5f));
    modelMatrix *= translate(mat4(1.0f), vec3(0.0f, 0.0f, 0.0f));
    modelMatrix *= rotate(mat4(1.0f), i+=0.04, vec3(0.0f, 1.0f, 0.0f));
    glUniformMatrix4fv(modelMatrixLocation, 1, GL_FALSE, &modelMatrix[0][0]);

    //draw VAO
    glBindVertexArray(vikingVAO);
    glDrawElements(GL_TRIANGLES, viking_elements.size() * sizeof(viking_elements[0]), GL_UNSIGNED_SHORT, 0);
    glBindVertexArray(0);

    //clear shader
    shader->ClearShaderProgram();

    //swap buffers
    glXSwapBuffers(display, win);
} 
```

编辑：意识到如果我在正确的屏幕上运行我的应用程序，它会呈现 GL_BACK_RIGHT 缓冲区。在左侧屏幕上运行它会绘制 GL_BACK_LEFT。

有任何想法吗？可能是显示器设置？

# javascript - 有没有办法确定 IE 是标准浏览器还是 C# Form 中的嵌入式控件？

> ID：13475805
> 
> 赞同：0
> 
> 时间：2012-11-20T14:53:35.610
> 
> 标签：javascript, winforms, internet-explorer

在 HTML/JS 范围内，我想区分这两种情况。

我想知道是否有办法通过一些窗口/文档属性找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:34:39.850

查看[window.external](http://msdn.microsoft.com/en-us/library/ms535246%28v=vs.85%29.aspx)，它提供对 Windows Internet Explorer 浏览器组件的主机应用程序提供的附加对象模型的访问。您将能够在本机部分定义特殊标识符，然后从 html/js 中检查它。类似于[http://social.msdn.microsoft.com/forums/en-US/winforms/thread/737b54ee-6478-4354-8a51-bcf2e84256a3/](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/737b54ee-6478-4354-8a51-bcf2e84256a3/)

PS。如果是 Windows Phone 应用程序，您只需检查 window.external.notify - 仅存在于托管 Web 浏览器控制案例中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:51:04.707

不，真的没有确定的方法可以做到这一点。您可以根据 UserAgent 中传递的版本号进行一些猜测，但正如您所提到的，这可能会被欺骗。

我不确定您的确切用例是什么，但是当我发现嵌入式控件和浏览器的行为之间存在一些不一致时；[此](https://stackoverflow.com/questions/2055271/webbrowser-control-ie8-compatibility-mode-on-off-switch)答案中的信息很有帮助。

# php - 如何使用 PHP/Flex 将图像上传到 mysql 数据库

> ID：13475806
> 
> 赞同：1
> 
> 时间：2012-11-20T14:53:37.547
> 
> 标签：php, mysql, apache-flex, actionscript

我已经在网上搜索了几个星期，但找不到解决我的问题的方法。

我正在使用`Flex(front-end)`and开发一个 Web 应用程序`PHP/MySql(Back-end)`。

现在我想让用户为他们的个人资料图片上传图片......我正在将它们上传到服务器上的目录。现在我的老板“感觉”它们应该直接存储到数据库中，不仅存储图像的链接，还存储整个内容。

请帮助伙计们......我被困住了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:05:57.217

通常，最好将图像存储在文件系统上（速度和大小）。为此，您可以将图像存储在“images/profiles/{userID}.jpg”等位置。如果您确实想将图像存储在数据库中，只需将列类型设置为`blob`并将图像内容插入其中。一篇很好的文章，详细介绍了在 mysql 数据库中存储图像的详细[信息](http://www.phpriot.com/articles/images-in-mysql)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:07:14.967

首先，在您从中上传文件的表单中，您应该使用以下标签：

```
enctype="multipart/form-data" 
```

您还需要将该字段指定为以下之一：

> 小斑点，斑点，中斑点，长斑点

最后为您的数据库修改此代码即可：)

```
<?php
if(isset($_POST['upload']) && $_FILES['userfile']['size'] > 0)
{
   $fileName = $_FILES['userfile']['name'];
   $tmpName  = $_FILES['userfile']['tmp_name'];
   $fileSize = $_FILES['userfile']['size'];
   $fileType = $_FILES['userfile']['type'];

   $fp      = fopen($tmpName, 'r');
   $content = fread($fp, filesize($tmpName));
   $content = addslashes($content);
   fclose($fp);

if(!get_magic_quotes_gpc())
{
    $fileName = addslashes($fileName);
}

$query = "INSERT INTO upload (name, size, type, content ) ".
"VALUES ('$fileName', '$fileSize', '$fileType', '$content')";

mysql_query($query) or die('Error, query failed'); 

} 
```

?>

# c++ - 将类插入 STL 映射时出现“调用没有匹配函数”错误

> ID：13475807
> 
> 赞同：9
> 
> 时间：2012-11-20T14:53:45.710
> 
> 标签：c++, dictionary, stl, std

我在 C++ 中有一个 STL 映射，其中键是无符号整数，值是一个类，其构造函数是：

```
Foo::Foo(unsigned int integerValue){
    //Some stuff
} 
```

在其他课程中，我在标题处声明了 std::map ：

```
private:
    std::map<unsigned int, Foo> *m_mapFoo; 
```

在 cpp 文件中，我创建了它并插入了 Foo 的实例：

```
m_mapFoo = new std::map<unsigned int, Foo>;
m_mapFoo->insert(0, new Foo(0));
m_mapFoo->insert(1, new Foo(1)); 
```

但是我在插入方法中收到以下错误：

```
no matching function for call to ‘std::map<unsigned int, Foo, std::less<unsigned int>, std::allocator<std::pair<const unsigned int, Foo> > >::insert(const unsigned int&, Foo*)’ 
```

find 方法的类似问题：

```
m_mapFoo.find(0)->second->someFunctionIntoFooClass(); 
```

错误恰好如下：

```
request for member ‘find’ in ‘((Foo*)this)->Foo::m_mapGeoDataProcess’, which is of non-class type ‘std::map<unsigned int, Foo, std::less<unsigned int>, std::allocator<std::pair<const unsigned int, Foo> > >*’ 
```

附加说明：我没有 Foo 复制构造函数，但我认为这不是问题。

任何帮助理解这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T14:57:20.560

您有一个指向包含`Foo`值的地图的指针

```
std::map<unsigned int, Foo> *m_mapFoo; 
```

并且您将其视为包含`Foo`指针值：

```
std::map<unsigned int, Foo*> *m_mapFoo; 
```

试试这个：

```
m_mapFoo = new std::map<unsigned int, Foo>;
m_mapFoo->insert(std::make_pair(0, Foo(0)));
m_mapFoo->insert(std::make_pair(1, Foo(1))); 
```

至于第二个错误，你有一个指向地图的指针，所以你需要

```
std::map<unsigned int, Foo>::iterator it = m_mapFoo->find(0);
if (it) {
  it->second.someFunctionIntoFooClass();
} else {
  // entry not found
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T14:57:06.237

您的地图类型化以存储类型**对象**`Foo`，而不是**指向**类型对象的指针`Foo`。当您尝试使用 初始化元素`new`并通过 访问其成员时`->`，您可能想要：

```
private:
    std::map<unsigned int, Foo*> *m_mapFoo; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:24:53.453

从您提供的少量信息来看，您似乎不太可能需要在*任何地方*使用指针：试试这个：

在标题中：

```
private:
    std::map<unsigned int, Foo> m_mapFoo; 
```

在 cpp 文件中：

```
m_mapFoo[0] = Foo(0);
m_mapFoo[1] = Foo(1); 
```

的语义与`operator[]`略有不同`.insert()`。如果您需要`.insert()`，请使用它。但除非您依赖细微差别，否则请使用更具可读性的`operator[]`.

同样在 find 方法中，如果您避免使用指针并使用 ，则表达式变得更具可读性`operator[]`：

```
m_mapFoo[0].someFunctionIntoFooClass(); 
```

# jakarta-ee - 从 EAR 内的 WAR 中引用 Weblogic 中的共享 Java EE 库

> ID：13475811
> 
> 赞同：1
> 
> 时间：2012-11-20T14:54:04.573
> 
> 标签：jakarta-ee, deployment, weblogic, shared-libraries

我们有许多应用程序需要在 WebLogic 上引用 Oracle 和我们自己的共享 Java EE 库。它们的结构如下：

我们自己的共享库“框架”与所有非 Oracle 第三方库 (JAR:s) 一起打包为 EAR 中的 JAR，并作为共享库部署在 WebLogic 中。这是它的清单：

```
Manifest-Version: 1.0
Created-By: Apache Maven 3.0.4
Built-By: lajokon
Build-Jdk: 1.7.0_07
Implementation-Vendor: <organization>
Implementation-Title: Framework Lib
Implementation-Version: 15.0.2
Implementation-Vendor-Id: org
Specification-Vendor: <organization>
Specification-Title: Framework Lib
Specification-Version: 15.0.2
Extension-Name: framework-lib 
```

所有 JAR:s 都在 APP-INF/lib 中

每个应用程序都打包在其自己的 EAR 内的 WAR 中。WAR weblogic.xml：

```
<wls:weblogic-web-app>
    <wls:weblogic-version>10.3.6</wls:weblogic-version>
    <wls:context-root>app-name</wls:context-root>
    <wls:library-ref>
        <wls:library-name>adf.oracle.domain.webapp</wls:library-name>
        <wls:specification-version>1.0</wls:specification-version>
        <wls:exact-match>false</wls:exact-match>
    </wls:library-ref>
    <wls:library-ref>
        <wls:library-name>jsf</wls:library-name>
        <wls:specification-version>2.0</wls:specification-version>
        <wls:exact-match>false</wls:exact-match>
    </wls:library-ref>
</wls:weblogic-web-app> 
```

EAR 应用程序.xml：

```
<application>
  <display-name>app-name</display-name>
  <module>
    <web>
      <web-uri>app-name.war</web-uri>
      <context-root>/app-name</context-root>
    </web>
  </module>
</application> 
```

EAR weblogic-application.xml：

```
<weblogic-application>
    <library-ref>
        <library-name>adf.oracle.domain</library-name>
        <specification-version>1.0</specification-version>
        <exact-match>false</exact-match>
    </library-ref>
    <library-ref>
        <library-name>coherence</library-name>
        <specification-version>3.7</specification-version>
        <exact-match>false</exact-match>
    </library-ref>
    <library-ref>
        <library-name>framework-lib</library-name>
        <specification-version>15.0</specification-version>
        <exact-match>false</exact-match>
    </library-ref>
</weblogic-application> 
```

所有库都默认部署或在 WL 中正确部署。与应用程序 EAR 一样。

但是，当我访问应用程序时，我得到运行时错误，说它无法加载位于 WAR:s WEB-INF/classes 目录中的资源！？

但是，我可以从日志输出中看到，它从 Framework EAR 加载资源。为什么 WL 似乎不关心我的 WAR 的内容？

# python - 使用 python pandas 计算每日总和

> ID：13475812
> 
> 赞同：5
> 
> 时间：2012-11-20T14:54:13.933
> 
> 标签：python, pandas

我正在尝试使用熊猫计算每日值的总和。这是测试文件 - [http://pastebin.com/uSDfVkTS](http://pastebin.com/uSDfVkTS)

这是我到目前为止提出的代码：

```
import numpy as np
import datetime as dt
import pandas as pd

f = np.genfromtxt('test', dtype=[('datetime', '|S16'), ('data', '<i4')], delimiter=',')
dates = [dt.datetime.strptime(i, '%Y-%m-%d %H:%M') for i in f['datetime']]
s = pd.Series(f['data'], index = dates)
d = s.resample('D', how='sum') 
```

使用给定的测试文件会产生：

```
2012-01-02    1128
Freq: D 
```

第一个问题是计算的总和对应于第二天。我已经能够通过使用参数 loffset='-1d' 来解决这个问题。

现在实际的问题是数据可能不是从一天的 00:30 开始，而是从一天中的任何时间开始。此外，数据的空白处填充了“nan”值。

也就是说，是否可以设置计算每日总和所需的值的较低阈值？（例如，如果一天内的值少于 40 个，则输入 NaN 而不是总和）

我相信可以定义一个自定义函数来做到这一点并在“how”参数中引用它，但我不知道如何对函数本身进行编码。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T14:59:23.837

您可以直接在 Pandas 中执行此操作：

```
s = pd.read_csv('test', header=None, index_col=0, parse_dates=True)
d = s.groupby(lambda x: x.date()).aggregate(lambda x: sum(x) if len(x) >= 40 else np.nan)

             X.2
2012-01-01  1128 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-26T12:38:05.193

更简单的方法是使用`pd.Grouper`：

```
d = s.groupby(pd.Grouper(freq='1D')).sum() 
```

# iphone - 在选项卡式应用程序中仅旋转一个视图控制器

> ID：13475815
> 
> 赞同：0
> 
> 时间：2012-11-20T14:54:23.050
> 
> 标签：iphone, ios, uiviewcontroller, rotation, uitabbarcontroller

我已经阅读了很多帖子，但我找不到解决方案。

我有一个使用情节提要的选项卡式应用程序。该选项卡式应用程序的所有视图控制器都必须以纵向显示内容，但只有一个视图控制器（显示视频）我希望处于横向模式。

故事板说明：TabBarController -> 4x 导航控制器 -> 每个导航控制器指向他的 ViewController -> 其中一个视图控制器有一个图像，当我按下该图像时，我已经推送到另一个视图，该视图我想在横向模式下，因为我有一个 UIWebView 来显示视频。

我无法让所有应用程序仅处于纵向，并且提到的视图控制器能够在横向模式下旋转。

我的应用程序也支持 iOS 5，所以我知道有些方法已被弃用，我快疯了。

我相信在 Summary > iPhone / iPod Deployment info > Supported Interface Orientations > 那里我必须检查纵向、左右横向，然后通过方法启用或禁用旋转。我迷路了。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:19:09.773

如果您将视图作为模态推送，我认为您应该能够做到这一点。确保您的应用程序的 PList 文件（在 Supporting Files 文件夹下）设置为支持所有方向，然后只需将代码添加到模态视图控制器以显示类似这样的横向。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOr‌​ientation 
{ 
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft); 
} 
```

让我知道你是否有运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:12:49.553

当我为我的应用程序设计时，我建议您使用此解决方案。通过在 shouldAutorotateToInterfaceOrientation 方法方向类型中使用一些条件，我们可以解决此问题。尝试使用此链接将对您有所帮助。

[https://stackoverflow.com/questions/12021185/ios-rotate-view-only-one-view-controllers-view/15403129#1540312](https://stackoverflow.com/questions/12021185/ios-rotate-view-only-one-view-controllers-view/15403129#15403129)

# java - 尝试在 Java 中打印二维字符数组

> ID：13475820
> 
> 赞同：3
> 
> 时间：2012-11-20T14:54:36.293
> 
> 标签：java, for-loop, multidimensional-array

我的程序根本不打印任何东西。

首先，我在一个单独的类（板）中初始化了板：

```
 public class Board {
          public char board[][] = new char[9][9];   
          public void main(char[] args){

        for(int i=0; i<9; i++){
            board[i][0] = '_';
            board[i][8] = '_';
        }
        for(int h=0; h<9; h++){
            board[0][h] = '|';
            board[8][h] = '|';
        }

        for(int x=0; x>9; x++){
            for(int y=0; y>9; y++){
                System.out.println(board[x][y]);    
            }
        }
    }
} 
```

然后在 main 中调用它，使用`PrintLine`“Hello World”来检查代码是否被访问。没有错误被标记，但它也没有打印任何东西。下面的主要内容也只是为了检查我没有做任何简单而愚蠢的事情：

```
 public static void main(String[] args) {  
    Ticker T = new Ticker();
    Board B = new Board();       
    for(int x=0; x>9; x++){
        for(int y=0; y>9; y++){
            System.out.println("Hello World");
            System.out.print(B.board[x][y]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:55:47.517

`for`循环的终止条件不正确。应该的`<`，不是`>`的。改成：

```
for(int x=0; x<9; x++){
    for(int y=0; y<9; y++){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T14:56:05.293

您的 for 循环条件存在问题：-

```
for(int x=0; x>9; x++){
        for(int y=0; y>9; y++){ 
```

上面循环中的代码永远不会被执行。它应该是： -

```
for(int x=0; x<9; x++){
        for(int y=0; y<9; y++){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T15:24:50.150

除了 for 循环中的不正确条件之外，您还应该考虑使用

```
public class Board {
    public char board[][] = new char[9][9];

    // this is the constructor, it will be called if you say "new Board()"
    // the "main" method you had here will not be called automatically
    public Board() {
        for (int i = 0; i < 9; i++) {
            board[i][0] = '_';
            board[i][8] = '_';
        }
        for (int h = 0; h < 9; h++) {
            board[0][h] = '|';
            board[8][h] = '|';
        }

        for (int x = 0; x < 9; x++) {
            for (int y = 0; y < 9; y++) {
                // just a print so it does not make new lines for every char
                System.out.print(board[x][y]);
            }
            // new line once one column (board[x][0] - board[x][8]) is printed
            // note: you proably want to turn around the x and y above since
            // I guess you want to print rows instead of columns
            System.out.println();
        }
    }
} 
```

它解决了一些问题

*   for 循环的条件永远不会为真
*   用构造函数替换该`main`方法，以便执行您在那里编写的代码
*   改成一行打印内循环中打印的东西，所以看起来像一块板子

现在如果你这样做

```
public static void main(String[] args) {  
    Ticker T = new Ticker();
    Board B = new Board(); // << this line triggers printing
    // ...
} 
```

你应该看到一些类似板的东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T14:56:14.057

看一下 `for(int x=0; x>9; x++){`

它应该是`for(int x=0; x<9; x++){`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T14:56:47.877

您可能想选择 x<9 和 y<9 而不是 > ！;-) 这是条件循环。如果为假，则循环退出。在你的情况下它总是错误的。

# nuget - 如何打包2个第三方dll

> ID：13475821
> 
> 赞同：9
> 
> 时间：2012-11-20T14:54:37.410
> 
> 标签：nuget, nuget-package

我正在阅读 nuget 文档，但我并不完全了解 nuget 的工作原理。

我有 2 个第三方 dll，我被要求将其转换为 nuget 包，以便我们的本地开发人员可以通过 nuget 将它们安装到项目中。这将是我们将在本地托管的东西。

这是否意味着我只是在 vs 中创建一个项目并将 dll 放在项目中，还是我使用包资源管理器之类的东西。

如果这是一个愚蠢的问题，我提前道歉，但是当谈到 Nuget 等时，我是一个绝对的初学者。

任何提示将非常感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T20:33:55.713

启动和运行 nuget 包的最简单和最快的方法是启动包资源管理器 --> 创建一个新包 --> 将您的 dll 拖放到“包内容”区域，它会询问您是否想要“lib”文件夹中的dll，您可以这样做-> 创建一些关于包的元数据，即给它一个描述和版本等等，然后保存它。

保存后，您可以将 .nupkg 文件复制到共享位置 - 如果您可以访问中央服务器上的文件系统，然后设置对此“提要”（即共享文件夹）的访问权限，则可以在 Visual Studio 中（工具 --> 选项 --> 包管理器 --> 包源），因此：

![视觉工作室](../Images/1f1b51c722dc0fe03e08cabad0c3a21f.png)

或者，如果您想通过 http 托管软件包，您可以按照此处的说明进行操作：[https](https://github.com/NuGet/NuGetGallery/blob/master/README.markdown) ://github.com/NuGet/NuGetGallery/blob/master/README.markdown 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:57:39.220

其他选项是使用 Nuget.exe 规范，打包命令来快速创建包。更多细节在这里@ [http://docs.nuget.org/docs/reference/command-line-reference](http://docs.nuget.org/docs/reference/command-line-reference)

# javascript - 如何使用 jQuery/Ajax 基于变量更改成功函数的输出？

> ID：13475827
> 
> 赞同：2
> 
> 时间：2012-11-20T14:54:57.693
> 
> 标签：javascript, jquery, ajax

成功后，我想根据存在的价值显示不同的价值。例如，如果 $('#add').val() 有一个值，我想显示“添加视频”作为成功函数的一部分。如果 $('#remove').val() 有一个值，我想将“视频已删除”显示为成功功能的一部分。#add 或 #remove 在给定时间将有一个值。如何启用此功能？

```
<script type="text/javascript">
   $(document).ready(function() {
       $("#test").submit(function(event){
       event.preventDefault();
            $.ajax({
                 type:"POST",
                 url:"/edit_favorites/",
                 data: {
                        'video_add': $('#add').val(), // from form
                        'video_remove': $('#remove').val() // from form
                        },
                 success: function(){
                     $('#message').html("<h2>Video added!</h2>") 
                    }
            });
            return false;
       });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:58:13.497

如果您确定只有一个文本字段有值，您可以执行以下操作：

```
$('#message').html('<h2>' + $('#add').val() !== '' ? 'Video added' : 'Video removed' + '!</h2>' ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:05:20.350

如果只检查文本就足够了，您可以使用以下代码：

```
<script type="text/javascript">
   $(document).ready(function() {
       $("#test").submit(function(event){
       event.preventDefault();
            $.ajax({
                 type:"POST",
                 url:"/edit_favorites/",
                 data: {
                        'video_add': $('#add').val(), // from form
                        'video_remove': $('#remove').val() // from form
                        },
                 success: function(){
                     if ( $('#add').text() ) {
                        $('#message').html("<h2>Video added!</h2>");
                     } else if ( $('#add').text() ){
                        $('#message').html("<h2>Video removed!</h2>");
                     } else {
                        $('#message').html("<h2>Wasn't either add or remove!</h2>");
                     }
                    }
            });
            return false;
       });

    });
</script> 
```

我假设`#add`或者`#remove`是文本。关键是这个`if`检查：

```
if ( $('#add').text() ) {
   //... add is not empty because there is some text in it... 
```

如果`#add`或`#remove`可能包含文本或任何其他元素，您可以使用`:empty`选择器检查它们：

```
if ( !$('#add:empty').length ) {
   //... #add is not empty so something was added successfully ... 
```

如果`#add`或者`#remove`是`<input>`文本框之类的元素，您可以使用以下方法进行相同的检查：

```
if ( $('#add').val() ) {
   //... add is not empty ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:01:19.100

我喜欢在后端脚本执行后返回响应，XML 看起来像这样

```
 <status>true</status>
 <successMessage>Video deleted</successMessage> 
```

或者

```
<status>false</status>
<errorMessage>Video not found on the server</errorMessage> 
```

Javascript

```
success: function (response) {
   if($(response).find("status").text()=="true"){
        $(".success").html($(response).find("successMessage").text());
        $(".success").show();
   }else{
        $(".error").html($(response).find("errorMessage").text());
        $(".error").show();
   }
} 
```

# c - 最佳常见做法 I2C 寄存器映射

> ID：13475828
> 
> 赞同：5
> 
> 时间：2012-11-20T14:54:58.810
> 
> 标签：c, i2c

只是想知道在 C 中关于 I²C 寄存器映射的最佳实践是什么，或者更确切地说是其他人经常使用/喜欢什么。

到目前为止，我通常已经做了很多定义，一个用于每个寄存器，一个用于所有位、掩码、移位等。但是，最近我看到一些驱动程序使用（可能是打包的）结构而不是定义。我认为这些是 Linux 内核模块。

无论如何，他们会

```
struct i2c_sensor_fuu_registers {

    uint8_t  id;
    uint16_t big_register;
    uint8_t  another_register;
    ...

} __attribute__((packed)); 
```

然后他们将使用 offsetof（或宏）来获取 i2c 寄存器并使用 sizeof 来读取要读取的字节数。

我发现这两种方法都有其优点：

结构方法：

*   (+) 寄存器偏移在逻辑上都包含在结构中，而不必在定义中拼出每个寄存器。
*   (+) 条目大小使用适当大小的数据类型明确说明。
*   (-) 这不考虑广泛使用的位字段
*   (-) 这不考虑不是字节映射的寄存器映射（例如 LM75），其中一个从偏移量 n+0x00 读取 2 个字节，但 n+0x01 是另一个寄存器，而不是寄存器 n 的高/低字节+0x00
*   (-) 这并没有考虑地址空间中的大间隙（例如，0x00、0x01、0x80、0xAA 处的寄存器，没有中间...）并且（我认为？）依赖于编译器优化来摆脱结构.

定义方法：

*   (+) 每个寄存器及其位通常在一个块中定义，这使得查找正确的符号变得容易并依赖于命名约定。
*   (+) 透明/不知道地址空间间隙。
*   (-) 每个寄存器都必须单独定义，即使没有间隙
*   (-) 因为定义往往是全局的，所以名称通常很长，在源代码中有些乱七八糟的长符号名称。
*   (-) 要读取的数据大小通常是硬编码的幻数或 (end - start + 1) 样式的计算，符号名称可能很长。
*   (o) 透明/不知道数据大小与地图中的地址。

基本上，我正在寻找一种更聪明的方法来处理这些情况。我经常发现自己为每个寄存器和每个位以及可能的掩码和移位（后两个取决于数据类型）键入了很多令人痛苦的长符号名称，只是最终只使用了其中的几个（但讨厌稍后重新定义缺少的符号，这就是我在一个会话中输入所有符号的原因）。尽管如此，我注意到要读取/写入的字节大小主要是幻数，通常需要并排读取数据表和源代码才能理解最基本的交互。

我想知道其他人如何处理这些情况？我在网上找到了一些示例，其中人们还费力地在一个大标题中输入了每个寄存器、位等，但没有什么非常确定的……但是，在这一点上，上面的两个选项似乎都不太聪明:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:22:48.953

**警告**：此处描述的方法使用位域，其在内存中的排列是特定于实现的。如果你这样做，请确保你知道你的编译器在这方面是如何工作的。

正如您所指出的，每种方法都有优点和缺点。我喜欢混合方法。您可以定义寄存器偏移量，然后使用结构来表示内容，并使用联合来指定位或整个寄存器。在联合内部，对寄存器的大小使用正确的大小变量（正如您有时提到的，它们不是字节可寻址的）。您不需要那么多定义，而且您不太可能搞砸位移并且不需要掩码。例如：

```
#define unsigned char u8;
#define unsigned short u16;

#define CTL_REG_ADDR  0x1234
typedef union {
  struct { 
    u16 not_used:10; //top 10 bits ununsed
    u16 foo_bits:3;  //a multibit register
    u16 bar_bit:1;   //just one bit
    u16 baz_bits:2;  //2 more bits
  } fields;
  u16 raw;
} CTL_REG_DATA;

#define STATUS_REG_ADDR 0x58
typedef union {
  struct { 
    u8 bar_bits:4;  //upper nibble
    u8 baz_bits:4;  //lower nibble
  } fields;
  u8 raw;
} STATUS_REG_DATA;

//use them like the following
u16 readregister(u16);
void writeregister(u16,u16);

CTL_REG_DATA reg;
STATUS_REG_DATA rd;
rd = readregister(STATUS_REG_ADDR);
if (rd.fields.bar_bit) {
   reg.raw = 0xffff;        //set every bit
   reg.fields.bar_bit = 0;  //but clear this one bit
   writeregister(CTL_REG_ADDR, reg);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T20:43:28.560

在我的理想世界中，硬件设计人员会提供与 C++、C 和 ASM 兼容的头文件。根据实际硬件寄存器自动生成的一种。通过#defines（对于ASM）和typedef'd结构（对于C和C++）定义每个寄存器和位/字段的一个。一个指示每个位和字段的访问属性（只读、只写、写清除等）。其中包括定义每个寄存器及其位/字段的用途和目的的注释。它还需要考虑目标字节序和编译器，以确保正确排序任何寄存器和位域。

在以前的工作中，我尽可能地接近这个理想。我编写了一个脚本，它会解析一个寄存器描述文件（我定义的格式）并自动生成一个完整的头文件（结构和#defines）以及一个转储所有可读寄存器以进行调试的函数。我在其他公司看到过类似的方法，但没有一个能做到这一点。

我会指出，如果您使用 typedef 结构来定义您的寄存器布局，那么您可以轻松地解决定义中的大寄存器间隙。例如，只需添加一个“reserved[80]”或“unused[94]”或“unimplemented[2044]”或“gap[42]”数组元素来定义间隙。无论如何，您将始终将结构定义用作指向硬件基地址的指针，因此它不会占用内存中任何位置的结构的实际大小。

希望有帮助。

# entity-framework - 在 LINQPad 中使用 CreateSourceQuery

> ID：13475833
> 
> 赞同：1
> 
> 时间：2012-11-20T14:55:04.397
> 
> 标签：entity-framework, linqpad

如何让 linqpad 在以下 C# 语句中理解 CreateSourceQuery？

```
var airline = Airlines.FirstOrDefault(a => a.ID == 1776);
airline.Dump();
var crew = airline.Crew.CreateSourceQuery().Where(c => c.Title == "pilot");
crew.Dump(); 
```

Airlines.Crew 是一个导航属性。Linqpad 给出错误：

> “System.Data.Linq.EntitySet”不包含“CreateSourceQuery”的定义，并且找不到接受“System.Data.Linq.EntitySet”类型的第一个参数的扩展方法“CreateSourceQuery”

这可能只是我需要的参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:51:11.787

`CreateSourceQuery`是一个实体框架方法。LINQPad 默认使用 LINQ-2-SQL。

LINQPad 网站上有一个演练，它解释了如何将它与实体框架一起使用： [http ://www.linqpad.net/EntityFramework.aspx](http://www.linqpad.net/EntityFramework.aspx)

# google-apps-script - Google 协作平台中的 Apps 脚本表单没有响应

> ID：13475834
> 
> 赞同：0
> 
> 时间：2012-11-20T14:55:06.523
> 
> 标签：google-apps-script, google-sites

以下 Apps 脚本使用 Html 服务，按预期运行，并在单击提交按钮后显示响应页面。

**问题**：如果 Google 站点中包含 Apps 脚本（通过插入 > Apps 脚本小工具）并且提交了表单，则不会显示响应页面，也不会显示错误消息。

**代码.gs**

```
function doGet() {
  return HtmlService.createTemplateFromFile('myForm').evaluate();
}

function doPost() {
  return HtmlService.createTemplateFromFile('myResponse').evaluate();
} 
```

**myForm.html**

```
<html>
<body>
<form action="https://script.google.com/a/macros/.../exec" method="post">
<input type="submit" value="Submit">
</form>
</body>
</html> 
```

**我的响应.html**

```
<html>
<body>
<h3>Hello World!</h3>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:14:26.840

我能够重现这个问题。这是由于我们的问题跟踪器中存在一个[长期悬而未决的问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=546)，该问题仍在围绕加载非 sites.google.com 地址进行处理。这是由于帧级 URL 加载的安全限制。

解决方法是将 myForm.html 更改为指向 sites.google.com/a/macros 而不是 script.google.com/a/macros。我确认这适用于公共消费者帐户和 Google Apps 企业帐户。

```
<html>
<body>
<form action="https://sites.google.com/a/macros/.../exec" method="post">
<input type="submit" value="Submit">
</form>
</body>
</html> 
```

# javascript - 下划线 JS 模板最佳实践 - 如何避免将 JavaScript 与 HTML 混合

> ID：13475836
> 
> 赞同：4
> 
> 时间：2012-11-20T14:55:07.577
> 
> 标签：javascript, templates, backbone.js, underscore.js

我想知道是否有避免在 BackboneJS/UnderscoreJS 模板应用程序中将 JavaScript 与 HTML 混合的好方法。

我的理解是我们需要创建模板代码，看起来或多或少是这样的：

```
<table cellspacing='0' cellpadding='0' border='1' >
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
            </tr>
        </thead>
        <tbody>

        <% _.each(items,function(item,key,list){ %>
        <% var f = item.name; %>
            <tr>
                <td><%= key %></td>
                <td class="<%= f %>"><%= item.name %></td>
            </tr>
        <% }); %> <!-- this is hardly readable -->
    </tbody>
</table> 
```

那，困扰我的是必须在 <% %> scriptlet 内编写 JavaScript，然后是一些 HTML，然后是一些 JavaScript，循环或 if/else 条件必须在 <% %> 内的其他地方关闭。

这样的代码与我早期的 JSP 页面（JavaServer Pages）很相似——甚至 scriptlet 也使用相同的符号——我记得这种方法经常导致维护和调试问题。这里我遇到了类似的问题——scriptlet被模板引擎转换成实际的JavaScript，这不容易分析。

有什么方法可以更好地处理模板吗？即使我尝试在后端进行尽可能多的过滤和数据准备，也总是需要一些典型的前端逻辑（例如突出显示某些内容等）？

# c# - 覆盖用户的 IIdentity 属性

> ID：13475837
> 
> 赞同：5
> 
> 时间：2012-11-20T14:55:21.783
> 
> 标签：c#, asp.net-mvc, iidentity

我为我的 MVC 项目开发了一个简单的`IIdentity`and`IPrincipal`我想覆盖`User`and`User.Identity`以正确的类型返回值

这是我的自定义身份：

```
public class MyIdentity : IIdentity
{
    public MyIdentity(string name, string authenticationType, bool isAuthenticated, Guid userId)
    {
        Name = name;
        AuthenticationType = authenticationType;
        IsAuthenticated = isAuthenticated;
        UserId = userId;
    }

    #region IIdentity
    public string Name { get; private set; }
    public string AuthenticationType { get; private set; }
    public bool IsAuthenticated { get; private set; }
    #endregion

    public Guid UserId { get; private set; }
} 
```

这是我的自定义校长：

```
public class MyPrincipal : IPrincipal
{
    public MyPrincipal(IIdentity identity)
    {
        Identity = identity;
    }

    #region IPrincipal
    public bool IsInRole(string role)
    {
        throw new NotImplementedException();
    }

    public IIdentity Identity { get; private set; }
    #endregion
} 
```

这是我的自定义控制器，我成功更新了`User`属性以返回我的自定义主体类型：

```
public abstract class BaseController : Controller
{
    protected new virtual MyPrincipal User
    {
        get { return HttpContext == null ? null : HttpContext.User as MyPrincipal; }
    }
} 
```

如何以相同的方式`User.Identity`返回我的自定义身份类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:25:10.897

您可以`IPrincipal`在您的`MyPrincipal`类中显式实现，并添加您自己`Identity`的 type 属性`MyIdentity`。

```
public class MyPrincipal : IPrincipal 
{
    public MyPrincipal(MyIdentity identity)
    {
        Identity = identity;

    }

    public MyIdentity Identity {get; private set; }

    IIdentity IPrincipal.Identity { get { return this.Identity; } }

    public bool IsInRole(string role)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:13:48.863

您在问一些没有明确演员表就无法完成的事情

```
public class MyClass
{
    private SomeThing x;
    public ISomeThing X { get { return x; } }
} 
```

当你打电话时`MyClass.X`，你会得到一个`ISomeThing`，而不是一个`SomeThing`。你可以做一个明确的演员，但这有点笨拙。

```
MyClass myClass = new MyClass();
SomeThing someThing = (SomeThing)(myClass.X); 
```

理想情况下，您存储的价值`IPrincipal.Name`将是独一无二的。如果“jdoe”在您的应用程序中不是唯一的，那么您的`IPrincipal.Name`属性如果存储用户 ID 会更好。在您的情况下，这似乎是一个 GUID。

# multithreading - 不同主机上的 OpenMP 程序

> ID：13475838
> 
> 赞同：5
> 
> 时间：2012-11-20T14:55:21.813
> 
> 标签：multithreading, performance, parallel-processing, openmp, distributed-computing

我想知道是否可以在多个主机上运行 OpenMP 程序。到目前为止，我只听说过可以在多线程上执行但都在同一台物理计算机上的程序。是否可以在两个（或更多）客户端上执行程序？我不想使用 MPI。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T18:49:56.897

是的，可以在分布式系统上运行 OpenMP 程序，但我怀疑它是否在每个用户都可以接触到的范围内。ScaleMP 提供 vSMP - 一种昂贵的商业管理程序软件，它允许人们在许多联网主机之上创建虚拟 NUMA 机器，然后在此 VM 内运行常规操作系统（Linux 或 Windows）。它需要快速的网络互连（例如 InfiniBand）和专用主机（因为它在正常操作系统下作为管理程序运行）。我们这里有一个可操作的 vSMP 集群，它运行未经修改的 OpenMP 应用程序，但性能很大程度上取决于数据层次结构和访问模式。

NICTA 曾经开发过类似的名为 vNUMA 的 SSI 虚拟机管理程序，但开发也停止了。除了他们的解决方案是特定于 IA64 的（IA64 是 Intel Itanium，不要与 Intel64 混淆，这是他们当前一代的 x86 CPU）。

英特尔曾经开发过 Cluster OpenMP（ClOMP；不要误认为是为 Clang 带来 OpenMP 支持的同名项目），但由于“客户普遍缺乏兴趣，而且它显示出好处的案例少于预期”而被放弃（从[这里](http://software.intel.com/en-us/forums/topic/281819)）。ClOMP 是 Intel 对 OpenMP 的扩展，它内置于 Intel 编译器套件中，例如，您不能将它与 GCC 一起使用（这个为 GCC 启动 ClOMP 开发的[请求被搁置了）。](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=27541)如果您可以访问旧版本的英特尔编译器（从 9.1 到 11.1 的版本），则必须获得（试用）ClOMP 许可证，这可能几乎是不可能的，因为该产品已失效并且旧（试用）许可证已经已到期。再说一次，从 12.0 版开始，英特尔编译器不再支持 ClOMP。

存在其他研究项目（只需搜索“分布式共享内存”），但似乎只有 vSMP（ScaleMP 解决方案）对于生产 HPC 环境来说已经足够成熟（并且定价相应）。似乎现在大多数努力都转向了协数组语言（Co-Array Fortran、Unified Parallel C 等）的开发。我建议你看看[Berkeley UPC](http://upc.lbl.gov/)或花一些时间学习 MPI，因为它在未来几年内肯定不会消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T15:05:34.890

之前，有**[Cluster OpenMP](http://software.intel.com/sites/default/files/m/1/6/9/b/e/6330-cluster_omp_userguide.pdf)**。

Cluster OpenMP 是 OpenMP 的一种实现，它可以在不借助 MPI 的情况下使用多个 SMP 机器。这一进步的优势在于消除了编写显式消息传递代码的需要，以及不混合编程范式。Cluster OpenMP 中的共享内存通过分布式共享内存子系统在所有机器上维护。Cluster OpenMP 基于 OpenMP 宽松的内存一致性，允许共享变量仅在绝对必要时保持一致。[来源](http://www.dell.com/downloads/global/power/ps4q07-50080141-Intel.pdf)

**集群 OpenMP 的性能注意事项**

一些内存操作比其他的要**昂贵**得多。为了使用 Cluster OpenMP 获得良好的性能，相对于受保护页面的访问次数，对未受保护页面的访问次数必须尽可能高。这意味着一旦页面在给定节点上更新，在下一次同步之前应该对其进行大量访问。为了实现这一点，程序应该尽可能少地同步，并尽可能多地重用给定页面上的数据。这转化为避免细粒度同步，例如原子构造或锁，并具有高数据局部性[源](http://www.dell.com/downloads/global/power/ps4q07-50080141-Intel.pdf)。

# cocoa - 在界面生成器中，如何将自定义按钮添加到窗口标题栏？

> ID：13475844
> 
> 赞同：2
> 
> 时间：2012-11-20T14:55:27.170
> 
> 标签：cocoa, interface-builder, nspanel

在我的 OS X 应用程序中，使用 Interface Builder，我有一个如下所示的窗口：

![在此处输入图像描述](../Images/4dcc2c5b09bfeaf290e16111e962cd61.png)

我想在右侧添加一个按钮，以实现此目的：

![在此处输入图像描述](../Images/f2e48282c2db3c01dfad2ed4e656a036.png)

如果这是可能的，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T15:23:43.820

使用 Interface Builder 是不可能的，但是您可以通过一点编码来完成它：

```
NSButton *closeButton = [window standardWindowButton:NSWindowCloseButton]; // Get the existing close button of the window. Check documentation for the other window buttons.
NSView *titleBarView = closeButton.superview; // Get the view that encloses that standard window buttons.
NSButton *myButton = …; // Create custom button to be added to the title bar.
myButton.frame = …; // Set the appropriate frame for your button. Use titleBarView.bounds to determine the bounding rect of the view that encloses the standard window buttons.
[titleBarView addSubview:myButton]; // Add the custom button to the title bar. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-07T05:45:37.033

Swift 2.2 和**Auto Layout**，在标题栏右侧创建一个“确定”按钮：

```
let myButton = NSButton()
myButton.title = "OK"
myButton.bezelStyle = .RoundedBezelStyle

let titleBarView = window!.standardWindowButton(.CloseButton)!.superview!
titleBarView.addSubview(myButton)
myButton.translatesAutoresizingMaskIntoConstraints = false
titleBarView.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat("H:[myButton]-2-|", options: [], metrics: nil, views: ["myButton": myButton]))
titleBarView.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat("V:|-1-[myButton]-3-|", options: [], metrics: nil, views: ["myButton": myButton])) 
```

使用自动布局，您无需对按钮的框架进行硬编码。即使您调整窗口大小，它也始终位于标题栏的右侧。

# security - 现代网站如何在不实际存储密码的情况下检查您的密码？

> ID：13475845
> 
> 赞同：5
> 
> 时间：2012-11-20T14:55:28.763
> 
> 标签：security, hash, passwords, hashtable

有人告诉我，您不应该将用户密码存储在数据库中，但是如果我无法保存用户密码，我该如何验证用户身份？只是对它们进行加密就足以保证它们的安全吗？

最近新闻中有几篇关于高知名度网站遭到入侵的报道，例如 LinkedIn，我认为这样高知名度的网站不会存储纯文本密码，因此假设它们是加密的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T14:55:28.763

免责声明：*我最初[在 Quora 上发布了这个，](http://qr.ae/1pTuH)但觉得答案更适合 Stack Overflow。*

用于存储和检查用户密码而不实际保留密码的方法是将用户输入与存储的哈希值进行比较。

**什么是哈希？**

散列是通过一种算法传递可变长度的数据（小密码、大密码、二进制文件等）的过程，该算法将其作为一组固定长度的数据返回，称为散列值。哈希仅以一种方式起作用。一个由几 Mb 组成的 *.img 文件可以像密码一样进行哈希处理。（实际上，在大文件上使用散列来检查它们的完整性是一种常见的做法；假设您使用 bittorrent 下载了一个文件，当它完成时，软件会对其进行散列并将您拥有的散列与您应该使用的散列进行比较有，如果它们匹配，则下载未损坏）。

**带有哈希的身份验证如何工作？**

当用户注册时，他会给出一个密码，`pass123`然后将其散列（通过任何可用的散列算法：sha1、sha256 等，在这种情况下为 md5）到该值`32250170a0dca92d53ec9624f336ca24`，并且该值存储在数据库中。每次您尝试登录时，系统都会实时对您的密码进行哈希处理，并将其与存储的哈希值进行比较，如果匹配，您就可以开始了。您可以在这里尝试在线 md5 哈希：http: [//md5-hash-online.waraxe.us/](http://md5-hash-online.waraxe.us/)

**如果两个哈希值相同怎么办？用户可以使用不同的通行证登录吗？**

他可以！那就是所谓的碰撞。假设在一个虚构的散列算法上，值`pass123`会产生散列`ec9624`并且值`pass321`会产生完全相同的散列，那么散列算法就会被破坏。由于发现了冲突，常见的算法 md5 和 sha1（LinkedIn 使用的那个）都被破坏了。被打破并不一定意味着它不安全。

**如何利用碰撞？**

如果您可以生成哈希，则与您可以将该站点标识为用户的用户密码生成的哈希相同。

**彩虹桌攻击。**

破解者很快就明白，一旦他们捕获了散列密码表，逐个利用密码是不可行的，因此他们设计了一种新的攻击向量。他们将生成存在的每一个密码（aaa、aab、aac、aad 等）并将所有哈希值存储在数据库中。然后他们只需要使用所有顺序生成的哈希（亚秒级查询）在数据库中搜索被盗的哈希并获得相应的密码。

**盐来拯救（LinkedIn 失败的地方！）**

安全性是由破解者破解您的密码所需的时间以及您更改密码的频率来定义的。彩虹桌的安全性下降得非常快，所以业界想出了盐。如果每个密码都有一个独特的转折点怎么办？那是盐！对于每个注册的用户，您都会生成一个随机字符串，比如 3 个字符（业界建议使用 16 个字符 - [https://stackoverflow.com/a/18419 ......](https://stackoverflow.com/a/18419..)）。然后将用户密码与随机字符串连接起来。

```
password - salt - sha1 hash  
qwerty   - 123  - 5cec175b165e3d5e62c9e13ce848ef6feac81bff  
qwerty   - 321  - b8b92ab870c50ce5fc59571dc0c77f9a4a90323c  
qazwsx   - abc  - c6aec64efe2a25c6bc35aeea2aafb2e86ac96a0c  
qazwsx   - cba  - 31e42c24f71dc5a453b2635e6ec57eadf03090fd 
```

正如你所看到的，完全相同的密码，给定不同的盐值，生成完全不同的哈希值。这就是 salt 的目的，也是 LinkedIn 失败的原因。请注意，在表上您只会存储哈希和盐！永远不要密码！

拿到 LinkedIn 哈希值的人做的第一件事就是对哈希值进行排序，看看是否有匹配项（这是因为多个用户有相同的密码——真可惜！）这些用户是第一个放弃的。如果通行证表被加盐......这一切都不会发生，他们将需要大量的时间（和计算机资源）来破解每一个密码。这样一来，LinkedIn 就有足够的时间来实施新的密码政策。

希望答案的技术方面能够深入了解身份验证的工作原理（或应该如何工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:59:12.397

真的很喜欢，当有人问这个问题时，因为有人想做得更好。只知道几个重点，即使是知名网站也可以避免很多麻烦。

最近我写了一篇关于[哈希密码](http://www.martinstoeckli.ch/hash/hash.html)的教程，它使用了一种希望简单易懂的语言。它允许使用 SQL 注入，解释盐和胡椒的用法，并指出需要慢速密钥派生函数。

# ruby-on-rails - 如何将表单中的日期强制转换为rails中的特定时区

> ID：13475855
> 
> 赞同：1
> 
> 时间：2012-11-20T14:55:52.753
> 
> 标签：ruby-on-rails, ruby, timezone

当从文本字段中获取日期时：“20-11 15:43”是否可以在没有太多解析的情况下将其强制到特定时区？

`DateTime.strptime("20-11 15:43",'%d-%m %H:%M')`给我`Tue, 20 Nov 2012 15:43:00 +0000` 而不是`Tue, 20 Nov 2012 15:43:00 +0100`

现在我使用`DateTime.strptime(date_from_textfield+" +0100",'%d-%m %H:%M %Z')`这似乎没问题，但 id 而不是附加`+0100`到我的值。有没有办法让 DateTime 使用`config.time_zone = 'Amsterdam'`我在我的设置中设置的`application.rb`？

# c - pthread_cancel 总是崩溃

> ID：13475859
> 
> 赞同：0
> 
> 时间：2012-11-20T14:56:11.733
> 
> 标签：c, linux, pthreads

我有一个程序试图通过已实现的池使用创建和取消。

创作如下：

```
while (created<threadsNum){
    pthread_t newThread;
    pthread_struct *st; //Open the thread that handle the deleting of the sessions timeout.
    st = (pthread_struct*)malloc(sizeof(pthread_struct));
    st->id = created;
    st->t = &newThread;
    pthread_mutex_lock( &mutex_threadsPool );
    readingThreadsPool[created] = st;
    pthread_mutex_unlock( &mutex_threadsPool );
        if((threadRes1 = pthread_create( &newThread, NULL, pcapReadingThread, (void*)created)))
        {
        syslog(LOG_CRIT, "Creating Pcap-Reading Thread %d  failed.",created); 
                printf( "Creating Pcap-Reading Thread %d  failed.\n",created);
                exit(1);
        }
    syslog(LOG_INFO, "Created Pcap-Reading Thread %d Successfully.",created); 
    created++;
} 
```

后来我尝试取消它们并重新启动它们：

```
pthread_t* t;
pthread_struct* tstr;
int i;
pthread_mutex_unlock( &mutex_threadsPool );
//first go on array and kill all threads
for(i = 0; i<threadsNum ; i++ ){
    tstr = readingThreadsPool[i];
    if (tstr!=NULL){
        t = tstr->t;
                    //Reaches here :-)
        if (pthread_cancel(*t)!=0){
            perror("ERROR : Could not kill thread");
        }
        else{
            printf("Killed Thread %d \n",i);
        }
                    //doesnt reach here

    }
} 
```

我在第一部分检查了创建线程的内存中的地址，在第二部分检查了即将被取消的线程的地址..它们匹配..我读到了如果调用 killall( ）。

但我不..

有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:01:10.127

```
while (created<threadsNum){
    pthread_t newThread;
    pthread_struct *st;
    /* ... */
    st->t = &newThread;
    /* ... */
} 
```

你已经`st->t`指向一个局部变量`newThread`。`newThread`仅在当前循环迭代期间在范围内。在此迭代之后`st->t`将包含一个无效地址。

`newThread`位于堆栈上，因此在超出范围后，堆栈空间将用于其他变量。这在连续迭代中可能是不同`pthread_t`的，或者一旦循环结束，堆栈空间将用于完全不同类型的值。

要解决此问题，我可能会更改`pthread_struct.t`为 a`pthread_t`而不是 a `pthread_t *`，然后将 pthread_create 调用更改为：

```
pthread_create(&st->t, /*...*/) 
```

此外，`st`在调用`pthread_create`. 它可能应该在之后添加。就目前而言，线程池中有一个小窗口，`st->t`但尚未初始化。

# url - 允许国际化域名的 URL 规范？

> ID：13475867
> 
> 赞同：1
> 
> 时间：2012-11-20T14:56:35.157
> 
> 标签：url, idn

我正在尝试查找 URL 的当前规范。我找到[了 RFC3986](https://www.rfc-editor.org/rfc/rfc3986)，但它[不允许使用非 ASCII 字符](https://www.rfc-editor.org/rfc/rfc3986#section-2)，就像您在国际化域名 (IDNA) 中可能发现的那样。

URL 是 Internet 的关键部分之一；肯定有他们的规格吗？如果是这样，它在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:41:55.863

国际化资源标识符 (IRI)

[https://www.rfc-editor.org/rfc/rfc3987](https://www.rfc-editor.org/rfc/rfc3987)

> 本文档定义了一个新的协议元素，即国际化资源标识符 (IRI)，作为对统一资源标识符 (URI) 的补充。IRI 是来自通用字符集 (Unicode/ISO 10646) 的字符序列。定义了从 IRI 到 URI 的映射，这意味着可以在适当的情况下使用 IRI 代替 URI 来标识资源。

* * *

请注意，[Anne van Kesteren](http://annevankesteren.nl/)将[“新” URL 规范（在 WHATWG）](http://url.spec.whatwg.org/)编辑为“生活标准”，其目标是“使 RFC 3986 和 RFC 3987 与当代实现保持一致，并在此过程中淘汰它们。”。

# mysql - Yii 查询优化 MySQL

> ID：13475868
> 
> 赞同：2
> 
> 时间：2012-11-20T14:56:37.460
> 
> 标签：mysql, model, yii

我不太擅长数据库查询。而使用 Yii 则更复杂，因为我不太习惯它。我需要优化一个简单的查询

```
 $userCalendar = UserCalendar::model()->findByAttributes(array('user_id'=>$user->id));
   $unplannedEvents = CalendarEvent::model()->findAllByAttributes(array('calendar_id'=> $userCalendar->calendar_id,'planned'=>0)); 
```

CalendarEvent 表，即我需要记录的第二个表没有 user_id，但有一个 calendar_id，我可以从中获取 user_id 从 UserCalendar，即第一个表，因此我创建了一个 UserCalendar 对象，就我而言这不是一个很好的方法理解。

Q1。我该怎么做才能使它合二为一。
Q2。Yii 在内部完成了这一切，但我想知道它构建了什么查询来在 MySQL(phpMyAdmin) 中单独尝试它，有没有办法做到这一点？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:24:33.540

Q1：您需要在两个活动记录模型中定义 UserCalendar 和 CalendarEvent 之间的关系（在“关系”方法中）。

根据您的评论，您似乎拥有具有 CalendarEvent 模型和 UserCalendar 模型的 Calendar 模型。假设您在日历中的关系是：

```
relations() {
    return array( 
      'userCalendar' => array(self::HAS_MANY, 'UserCalendar', 'calendar_id'),
      'calendarEvent' => array(self::HAS_MANY, 'CalendarEvent', 'calendar_id'),
} 
```

在日历事件中：

```
relations() { 
    return array( 'calendar' => array(self::BELONGS_TO, 'Calendar', 'calendar_id'), );
} 
```

在用户日历中：

```
relations() { 
        return array( 'calendar' => array(self::BELONGS_TO, 'Calendar', 'calendar_id'), );
    } 
```

因此，要建立和之间的链接`UserCalendar`，`CalendarEvent`您需要使用日历

```
$criteria = new CDbCriteria;
$criteria->with = array(
   "calendarEvent"=>array('condition'=>'planned = 0'),
   "userCalendar"=>array('condition'=> 'user_id =' . $user->id),
);
$calendar = Calendar::model()->find($criteria); 
```

并将`$calendar->calendarEvent`返回一个属于用户的 calendarEvent 数组

Q2：您可以启用 Web 日志记录，以便所有 db 请求（和其他内容）将出现在页面末尾： [Logging in Yii（请参阅 CWebLogging）](http://www.yiiframework.com/doc/guide/1.1/en/topics.logging)

在您的应用程序配置中放置

```
'components'=>array(
        ......
        'log'=>array(
            'class'=>'CLogRouter',
            'routes'=>array(
                array(
                    'class'=>'CWebLogRoute',

                ),
           ),
        ),
    ), 
```

# android - 如何在android上修改帧率

> ID：13475871
> 
> 赞同：2
> 
> 时间：2012-11-20T14:56:41.833
> 
> 标签：android, frame-rate

我正在开发一个 android 应用程序来将实时视频和音频流发送到其他 PC，该应用程序可以捕获相机和麦克风并发送实时流并使用 VLC 播放器播放它，它在我的 htc s710e（android版本 4.0.4），但在其他手机中它非常不稳定。我测试了很多手机，有些手机的硬件比s710e高，有些比s710e低，但都非常不稳定。

我调试了太多时间，发现无法修改视频的帧率，虽然我设置的帧率是10或15，但是vlc中的直播视频显示帧率是30（H.263）。

那么如何修改帧率呢？希望有人可以帮助我，谢谢。

# mapserver - MS_DEFAULT_MAPFILE_PATTERN 验证失败

> ID：13475877
> 
> 赞同：2
> 
> 时间：2012-11-20T14:56:48.353
> 
> 标签：mapserver

我一直在处理 GetFeatureInfo 请求，但它失败了，我不知道为什么......

给我的错误就像

> 正则表达式错误。MS_DEFAULT_MAPFILE_PATTERN 验证失败。msEvalRegex()：正则表达式错误。字符串表达式测试失败。>

有人知道为什么会这样吗？

（关于这一点的奇怪之处在于，如果我通过 PHP 运行它会失败，但如果我直接在搜索栏上运行它，它就可以正常工作！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T06:42:17.607

请看一下： [https ://gis.stackexchange.com/questions/11443/why-cant-i-get-mapserver-to-show-a-raster](https://gis.stackexchange.com/questions/11443/why-cant-i-get-mapserver-to-show-a-raster)

地图位置丢失或格式错误。

# java - 如果 JTextField 不包含数据，则显示消息对话框

> ID：13475882
> 
> 赞同：1
> 
> 时间：2012-11-20T14:57:05.030
> 
> 标签：java, exception, exception-handling, jtextfield

我正在编写一个 BMI 计算器应用程序。目前，如果我没有在一个字段中输入数据，则会发生一个错误，导致程序停止工作。例如，“高度”有两个 JTextFIeld，一个是英尺，另一个是英寸。如果我只是在英尺 JTextField 中输入“6”而在英寸 JTextField 中不输入任何内容，然后在重量 JTextField 中输入我的体重并单击计算，它不起作用。

如果一个字段不包含数据，我想要做的是显示一个消息对话框，说“请确保所有字段都已填写”。

下面是添加到我的“计算”按钮的 ActionHandler 代码。

```
public void actionPerformed(ActionEvent e) {
    double heightFT = ((Double.parseDouble(heightFt_TF.getText()));
    double heightIn = (Double.parseDouble(heightIn_TF.getText()));
    double weight = (Double.parseDouble(weight_TF.getText()));
    double totalHeight = (heightFT*12) + heightIn;              

    BMI = (weight / (totalHeight*totalHeight)) * 703;
    String s = BMI+"";
    s = s.substring(0,4);
    BMI_TF.setText(s);                              
} 
```

* * *

### 解决了

我现在已经解决了这个问题。我所做的是在方法中添加“抛出 NumberFormatException”并尝试捕获。在 try 代码块中，如果输入了所有数据字段，我编写了要执行的代码。在 catch 子句中，我编写了使用 NumberFormatException 的代码，并简单地显示带有错误消息的消息对话框。现在，如果没有输入一个字段，则会出现消息对话框！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:03:16.270

只需检查您的 JTextField 对象是否包含文本。例如：

```
if (heightFt_TF.getText() == null || heightIn_TF.getText() == null || weight_TF.getText() == null) {
JOptionPane.showMessageDialog(null, "Please make sure all fields are filled in");
} 
```

当然，您还必须确保文本字段的内容确实包含一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:30:42.643

下载 Apache Commons Lang 库并用于`StringUtils.isBlank(myTextField.getText());`验证您的字段。

```
public boolean validateFields() {
    if (StringUtils.isBlank(heightFt_TF.getText()) {
        // show message
        return false;
    }

    if (StringUtils.isBlank(weight_TF.getText()) {
        // show message
        return false;
    }

    return true;
} 
```

仅当 validateFields() 返回 true 时才运行计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:45:26.173

```
public boolean validate(JTextField field) {

  boolean result = field.getText() != null;
  if (result) {
    try {
      Double.parseDouble(field.getText()));
    } catch(NumberFormatException e) {
      result = false
    } 
  }
  return result;                    
} 
```

# ruby-on-rails - Rails：从数组/列表实例变量中选择表单

> ID：13475885
> 
> 赞同：7
> 
> 时间：2012-11-20T14:57:07.580
> 
> 标签：ruby-on-rails, ruby, helpers

我有一个 Rails 应用程序，在表单中，我有一个表单选择（下拉列表）。例如，用户可以从 1,2,3,4,5 中进行选择

例如，我将这些值作为实例变量存储在数组中，例如：

> @formlist = [1,2,3,4,5]

我怎样才能简单地将数组放入表单选择助手中，而不是单独列出每个项目。目前我的代码是：

> ```
> <tr>
>   <th><%= f.label(:heat_level, "Heat Level") %></th>
>   <td><%= f.select(:heat_level,{ 1 => "1", 2 => "2", 3 => "3", 4 => "4", 5 => "5"}) %></td>
> </tr> 
> ```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-20T15:01:21.060

这应该工作：

```
f.select(:heat_level, @formlist.map { |value| [ value, value ] }) 
```

一些解释：

form`select`可以处理类似哈希和类似数组的选项列表。意思是，两者 `{ 1 => "1", 2 => "2", 3 => "3", 4 => "4", 5 => "5"}`

和

`[[1, 1], [2, 2], [3, 3], [4, 4], [5, 5]]`

将工作。

`@formlist.map { |value| [ value, value ] }`后者呢

# mysql - Joomla：一个视图的两个 mysql 查询模型函数

> ID：13475888
> 
> 赞同：0
> 
> 时间：2012-11-20T14:57:34.160
> 
> 标签：mysql, model, joomla2.5

我试图从一个视图运行两个模型函数。第一个查询似乎工作正常。第二个查询返回一个空白数组。在将查询打印到屏幕上时，我注意到查询似乎是连接在一起并且不是分开的，如下所示：

JDatabaseQueryMySQL 对象 ( [db:protected] => JDatabaseMySQL 对象 ( [name] => mysql [nameQuote:protected] => ` [nullDate:protected] => 0000-00-00 00:00:00 [dbMinimum:protected] = > 5.0.4 [_database:JDatabase:private] => Curling_Schedule [connection:protected] => Resource id #19 [count:protected] => 0 [cursor:protected] => Resource id #72 [debug:protected] = > [limit:protected] => 0 [log:protected] => Array () [offset:protected] => 0 [sql:protected] => SELECT team_name, Division FROM #_ *autoschedTeams ORDER BY division [tablePrefix:protected] => encex*[utf:protected] => 1 [errorNum:protected] => 0 [errorMsg:protected] => [hasQuoted:protected] => [quoted:protected] => Array ()) [type:protected] => 选择 [ element:protected] => [select:protected] => JDatabaseQueryElement Object ([name:protected] => SELECT [elements:protected] => Array ([0] => sheet, id) [glue:protected] => , ) [delete:protected] => [update:protected] => [insert:protected] => [from:protected] => JDatabaseQueryElement Object ([name:protected] => FROM [elements:protected] => Array ([ 0] => #__autoschedPlayingSheets ) [glue:protected] => , ) [join:protected] => [set:protected] => [where:protected] => [group:protected] => [having:protected] = > [columns:protected] => [values:protected] => [order:protected] => JDatabaseQueryElement Object ([name:protected] => ORDER BY [elements:protected] => Array ( [0] => sheet ) [glue:protected] => , ) [union:protected] => [autoIncrementField:protected] => )

模型：

```
 public function getTeams()
    {

            // Create a new query object.           
            $db = JFactory::getDBO();
            $query = $db->getQuery(true);
            // Select some fields
            $query->select('team_name, division');
            // From the hello table
            $query->from('#__autoschedTeams');
            $query->order('division');      
            $db->setQuery((string)$query);
            $teams = $db->loadResultArray();
            $div = $db->loadResultArray(1);
            $divs = array_unique($div);
            $result = [];
            foreach($divs as $key)
            {
                $result[$key] = [];
                foreach(array_keys($div, $key) as $index)
                {
                   array_push($result[$key], $teams[$index]);
                }
            }
            return $result;
 }
             public function getSheets()
    {

            // Create a new query object.           
            $db = JFactory::getDBO();
            print_r($query);
            $query = $db->getQuery(true);
            // Select some fields
            $query->select('sheet, id');
            // From the hello table
            $query->from('#__autoschedPlayingSheets');
            $query->order('sheet'); 
            //print_r($query);  
            $db->setQuery($query);
            $result = $db->loadResultArray();
            return $result;

    } 
```

}

查看相关代码：

```
$teams_sched = $this->get('Teams');
$sheets_sched = $this->get('Sheets'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:39:58.800

更改变量的名称并检查它。

如果您没有再次获得结果，请打印查询`echo $query;`并进行检查。

```
public function getSheets()
{      
    $db     = JFactory::getDBO();               
    $query  = $db->getQuery(true);                
    $query->select('sheet, id');
    $query->from('#__autoschedPlayingSheets');
    $query->order('sheet'); 
    $db->setQuery($query);
    $Sheets = $db->loadResultArray();

    print_r($Sheets);

    return $Sheets;

} 
```

# assembly - MIPS中除法的伪指令

> ID：13475890
> 
> 赞同：5
> 
> 时间：2012-11-20T14:57:41.980
> 
> 标签：assembly, mips, division

MIPS中除法的伪指令是什么？就像有一个乘法伪指令是 MIPS“mul”，它使生活更轻松。我正在使用 QT Spim。

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T16:20:57.910

要执行整数除法，您可以使用`div $t1, $t2, $t3`which 将设置`$t1`为 的整数除法`$t2/$t3`，或者`div $t1, $t2, imm`imm 是立即数。

同样，要计算整数除法的余数，您可以使用`rem $t1, $t2, $t3`或`rem $t1, $t2, imm`

这些伪指令基本上会执行 a `div $t1, $t2`，它将结果存储在特殊寄存器中（用于商`LO`和 `HI`余数），然后通过 和 将这些值移动到目标`mfhi`寄存器`mflo`。

要执行浮点除法，您需要使用浮点寄存器 $f0 到 $f31。一旦您将浮点数存储在其中一些寄存器中（正确编码为浮点数，例如 in`$f1`和） ，`$f2`您就会发出`div.s $f0, $f1, $f2`指令以获取`$f0`. `$f1/$f2`现在，要获得余数，您可以用截断的结果减去除法的结果。例如：

```
 li $a1, 20
     mtc1  $a1, $f1      
     cvt.s.w $f1, $f1    # $f1 = 20
     li $a1, 7
     mtc1  $a1, $f2     
     cvt.s.w $f2, $f2    # $f2 = 7

     div.s $f0, $f1, $f2 # $f0 = 20/7
     trunc.w.s $f3, $f0  
     cvt.s.w $f3, $f3    # $f3 = trunc(20/7)
     sub.s $f4, $f0, $f3 # $f4 = remainder of 20/7 
```

# php - foreach 中的参数无效

> ID：13475891
> 
> 赞同：0
> 
> 时间：2012-11-20T14:57:44.753
> 
> 标签：php, facebook-graph-api, foreach, json

我正在使用以下内容从 FB 中检索评论：

```
$url = urlencode("http://*****.com/pages/view?id=2153&item=Mens-Collection-Shoes");
$request_url ="https://graph.facebook.com/comments/?ids=" . $url;
$requests = file_get_contents($request_url); 
```

当我`print_r($requests);`得到以下信息但无法确定如何使用 foreach 循环对其进行格式化时：

```
{
    "http:\/\/*****.com\/pages\/view?id=2153&item=Mens-Collection-Shoes": {
        "comments": {
            "data": [{
                "id": "123456",
                    "from": {
                    "name": "Laurelle",
                        "id": "123456"
                },
                    "message": "I love these",
                    "can_remove": false,
                    "created_time": "2012-11-20T10:20:16+0000",
                    "like_count": 0,
                    "user_likes": false
            } {
                "id": "123456",
                    "from": {
                    "name": "Dan",
                        "id": "123456"
                },
                    "message": "I know, just stunning!",
                    "can_remove": false,
                    "created_time": "2012-11-20T14:24:15+0000",
                    "like_count": 0,
                    "user_likes": false
            }],
                "paging": {
                "next": "https:\/\/graph.facebook.com\/*****\/comments?limit=25&offset=25&__after_id=*****"
            }
        }
    }
} 
```

我试图得到：

```
data->from->id
data->from->name
data->message
data->created_time 
```

我试过了：

```
$fb_response = json_decode($requests);

foreach($fb_response->data as $item){
echo $item->from->id . '<br />';
echo $item->from->name . '<br />';
echo $item->message . '<br />';
echo $item->created_time . '<br /><br />';
} 
```

但没有运气

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:00:40.487

我想你正在寻找：

```
$originalUrl = "http://*****.com/pages/view?id=2153&item=Mens-Collection-Shoes";
$url = urlencode($originalUrl);
...
foreach($fb_response->$originalUrl->comments->data as $item) { 
```

`data`不是直接在 JSON 文档中的属性名称；它在`http://*****.com/pages/view?id=2153&item=Mens-Collection-Shoes`和之下`comments`。

# objective-c - Objective-C 解析 JSON NSNULL 错误，位置未显示

> ID：13475892
> 
> 赞同：0
> 
> 时间：2012-11-20T14:57:52.960
> 
> 标签：objective-c, xcode

我正在解析一个相当大的 JSON 模型，并且我设置了很多对象来处理所有数据。我最近向 JSON 模型添加了更多数据，以对其进行测试，但出现此错误

```
-[NSNull count]: unrecognized selector sent to instance 0xaed678 
```

但是，我需要确切地知道哪个函数崩溃才能修复它，但由于某种原因，xCode 不会告诉你函数崩溃的位置，这看起来很奇怪，因为如果你想纠正错误，这是非常重要的信息。无论如何，我是否可以准确找出导致应用程序崩溃的方法或功能？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:00:05.267

在无法识别的选择器上设置断点：

[在 Xcode 中为无法识别的选择器创建断点](https://stackoverflow.com/questions/7156090/creating-breakpoint-in-xcode-for-unrecognized-selector)

然后追溯代码。

# eclipse - 使用 eclipse / maven m2e 自动化构建任务

> ID：13475893
> 
> 赞同：0
> 
> 时间：2012-11-20T14:57:55.447
> 
> 标签：eclipse, maven, build, jar, customization

我即将使用 maven 来自动化我的构建。不幸的是，即使在阅读了几个教程之后，我也无法获得我想要的所有功能 :( 如果有人能解释一种我可以实现所有目标的方法，我会很高兴！我想通过几个动作自动化 3 个特定的构建任务eclipse中的一个项目，使用m2e：

1.  构建快照
    1.  编译
    2.  定义当前项目版本+日期为版本
    3.  构建jar文件
    4.  将 jar 文件复制到**项目路径本身的本地存储库中**（§{project}/builds/）
2.  调试快照
    1.  如上所述构建快照
    2.  将 jar 文件复制到本地测试服务器的插件文件夹
    3.  构建当前项目所依赖的另一个项目，将其 jar 文件也复制到 plugins 文件夹中
    4.  启动服务器/连接到 Eclipse 调试器*（我知道该怎么做，前面的步骤很重要）*
3.  创建发布
    1.  编译
    2.  将当前项目版本定义为版本
    3.  构建jar文件
    4.  将jar文件复制到**项目路径本身的本地存储库中**
    5.  创建 javadoc
    6.  将源文件和 javadoc 复制到存档文件夹
    7.  增加项目版本（例如 v6 -> v7）

如前所述，我不需要一个完美的解决方案，只需要一种实现这一点的方法；）（注释：链接多个启动配置不是问题。）

编辑：我必须修改 pom.xml 的哪些部分来实现这些步骤，以及如何使用 Eclipse 启动配置来调用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:58:30.230

嗨，根据您的要求，我可以说以下内容：

1.  构建快照

构建 SNAPSHOT 通常是开发周期中的惯例。

1.1 只使用约定。

1.2 日期作为版本

这是一个坏主意，因为 Maven 对版本的外观有[一些约定（1.0-SNAPSHOT 或 1.2.3-SNAPSHOT 等）](http://mojo.codehaus.org/versions-maven-plugin/version-rules.html)

1.3 构建jar文件

通常由 jar 生命周期完成（mvn 包）

1.4 本地存储库位于您所有项目的 ${HOME}/.m2/repository 的主驱动器上。从技术上讲，你可以做你喜欢做的事，但这违反了 Maven 约定。问题是你为什么需要这样的东西？

2.1 常规程序

2.2 通常部署不是 Maven 的工作，但您可以通过使用 cargo-maven-plugin（集成测试）来做这些事情。

2.3 如果您在项目之间存在依赖关系，则需要像 Jenkins 这样的 CI 解决方案来执行此类操作，否则您需要手动执行此操作。但这与多模块构建不同。

2.4 集成测试不同的故事。具体取决于你喜欢做什么。

3.

1-7 maven-release-plugin 将处理这些事情，除了复制到违反约定的项目路径本身。为此，您需要一个存储库管理器。

我可以推荐阅读这些书： http: [//www.sonatype.com/Support/Books](http://www.sonatype.com/Support/Books)

# vb.net - 快速反转一个很长的两个单词

> ID：13475894
> 
> 赞同：0
> 
> 时间：2012-11-20T14:57:59.763
> 
> 标签：vb.net, optimization, bit-manipulation

我有一个整数值，当满足某些条件时，必须像以下示例一样修改它：

```
00000001 10000000 11111111 00000000 
```

变成

```
11111111 00000000 00000001 10000000 
```

第一个 16 位字必须成为第二个字，反之亦然。我知道我可以轻松地将我的 long 转换为 0 和 1 的数组，然后我可以使用 2 的幂来重建我需要的 long，但我想知道是否还有其他更好、更快的方法来做它。更快是指执行明智。如果它更复杂但有更好的结果，我仍然可以。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T14:59:43.217

您可以使用移位和按位或：

```
value = (value << 16) | (value >> 16) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:01:19.197

在下面的代码中，我测试了 Pubby 答案的 VB.NET 版本`SwapMath`，针对显式结构偏移替代方案`SwapBits`. 前者快了大约 40 倍，可能部分原因是它几乎肯定是内联的。

```
Option Infer On
Option Strict On
Option Explicit On

Imports System.Runtime.InteropServices
Imports System.Diagnostics

Namespace Stackoverflow
Module SO13475894
  <StructLayout(LayoutKind.Explicit)> _
  Structure UShorts
    <FieldOffset(0)> Public x As UInteger
    <FieldOffset(0)> Public xLow  As UShort
    <FieldOffset(2)> Public xHigh As UShort
  End Structure

  Function SwapMath(ByVal x As UInteger) As UInteger
    Return (x >> 16) Or (x << 16)
  End Function

  ' About 40 times slower :-(
  Function SwapBits(ByVal x As UInteger) As UInteger
    Dim swapper As UShorts
    swapper.x = x
    Dim swapTemp = swapper.xLow
    swapper.xLow = swapper.xHigh
    swapper.xHigh = swapTemp
    Return swapper.x
  End Function

Sub Main()

  Dim x As UInteger = Convert.ToUInt32("11111111000000000000000110000000", fromBase:=2)

  Dim y = SwapMath(x)
  Dim z = SwapMath(y)
  Console.WriteLine(x)
  Console.WriteLine(Convert.ToString(y, toBase:=2))
  Console.WriteLine(z=x)

  y = SwapBits(x)
  z = SwapBits(y)
  Console.WriteLine(Convert.ToString(y, toBase:=2))
  Console.WriteLine(z=x)

  Const N As Integer = 100000000
  Dim sw = Stopwatch.StartNew

  For i = 1 To N
    y = SwapMath(x)
    z = SwapMath(y)
  Next
  sw.Stop
  Console.WriteLine(sw.Elapsed.TotalMilliseconds/CDbl(N))

  sw = Stopwatch.StartNew

  For i = 1 To N
    y = SwapBits(x)
    z = SwapBits(y)
  Next
  sw.Stop
  Console.WriteLine(sw.Elapsed.TotalMilliseconds/CDbl(N))

End Sub
End Module
End Namespace 
```

# android - 需要一个用 MonoDroid 和 MVVMCross 拍照的例子

> ID：13475896
> 
> 赞同：5
> 
> 时间：2012-11-20T14:58:06.927
> 
> 标签：android, camera, xamarin.android, mvvmcross

谁能指出我**拍摄照片并使用它存储`MVVMCross`**的示例？

我一直在寻找，但只找到了这个：

*   [Monodroid 用相机拍照](https://stackoverflow.com/questions/8433648/monodroid-take-a-picture-with-camera)（不实现 MVVMCross）

*   [视频录制](https://gist.github.com/3945799)（这是视频，我无法让它工作：S）

*   [Oficialy 配方示例](http://docs.xamarin.com/android/Recipes/Other_UX/Camera_Intent/Take_a_Picture_and_Save_Using_Camera_App)（它有效，但未实现 MVVMCross）

谢谢！！！

> **解决！**谢谢！
> 对未来的参考：（使用 Master 分支）
> *感谢 Stuart，我只是更改了代码以适应我的现实*

```
using Cirrious.MvvmCross.ExtensionMethods;
using Cirrious.MvvmCross.Interfaces.Platform.Tasks;
using Cirrious.MvvmCross.Interfaces.ServiceProvider;
using SIGEP.DummyService;
using SIGEP.Mobile.Core.Interfaces;

namespace SIGEP.Mobile.Core.Models
{
 public class PhotoService : IMvxServiceConsumer<IMvxPictureChooserTask>
{
    private const int MaxPixelDimension = 1024;
    private const int DefaultJpegQuality = 92;

    public void GetNewPhoto()
    {
        this.GetService<IMvxPictureChooserTask>().TakePicture(
            MaxPixelDimension,
            DefaultJpegQuality,
            HandlePhotoAvailable,
            () => { /* cancel is ignored */ });

    }

    public event EventHandler<PhotoStreamEventArgs> PhotoStreamAvailable;

    private void HandlePhotoAvailable(Stream pictureStream)
    {
        var handler = PhotoStreamAvailable;
        if (handler != null)
        {
            handler(this, new PhotoStreamEventArgs() { PictureStream = pictureStream, OnSucessGettingPhotoFileName = OnSucessGettingPhotoFileName });
        }
    }

    public static void TakePhoto(Action<string> successFileName, Action<Exception> error)
    {
        var service = new PhotoService();
        service.OnSucessGettingPhotoFileName = successFileName;
        service.OnError = error;
        service.GetNewPhoto();
        service.PhotoStreamAvailable += new EventHandler<PhotoStreamEventArgs>(service_PhotoStreamAvailable);
    }

    static void service_PhotoStreamAvailable(object sender, PhotoStreamEventArgs e)
    {
        //grava pra ficheiro!!!
        var directory = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
        var filename = Path.Combine(directory, "photo.jpeg");
        string saveTo = filename;
        FileStream writeStream = new FileStream(saveTo, FileMode.Create, FileAccess.Write);
        ReadWriteStream(e.PictureStream, writeStream);

        e.OnSucessGettingPhotoFileName(filename);

    }
    private static void ReadWriteStream(Stream readStream, Stream writeStream)
    {
        int Length = 256;
        Byte[] buffer = new Byte[Length];
        int bytesRead = readStream.Read(buffer, 0, Length);
        // write the required bytes
        while (bytesRead > 0)
        {
            writeStream.Write(buffer, 0, bytesRead);
            bytesRead = readStream.Read(buffer, 0, Length);
        }
        readStream.Close();
        writeStream.Close();
    }

    public Action<string> OnSucessGettingPhotoFileName { get; set; }
    public Action<Exception> OnError { get; set; }
}

[Serializable]
[ComVisible(true)]
public class PhotoStreamEventArgs : EventArgs
{
    public Stream PictureStream { get; set; }

    public Action<string> OnSucessGettingPhotoFileName { get; set; }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:11:19.710

我通常使用内置实现服务`IMvxPictureChooserTask`（如果使用 vNext，则在插件中）：

```
using Cirrious.MvvmCross.ExtensionMethods;
using Cirrious.MvvmCross.Interfaces.Platform.Tasks;
using Cirrious.MvvmCross.Interfaces.ServiceProvider;

public class PhotoService 
    : IMvxServiceConsumer<IMvxPictureChooserTask>
    , IPhotoService
{
    private const int MaxPixelDimension = 1024;
    private const int DefaultJpegQuality = 92;

    public void GetNewPhoto()
    {
        Trace.Info("Get a new photo started.");

        this.GetService<IMvxPictureChooserTask>().TakePicture(
            MaxPixelDimension,
            DefaultJpegQuality,
            HandlePhotoAvailable,
            () => { /* cancel is ignored */ });
    }

    public event EventHandler<PhotoStreamEventArgs> PhotoStreamAvailable;

    private void HandlePhotoAvailable(Stream pictureStream)
    {
        Trace.Info("Picture available");
        var handler = PhotoStreamAvailable;
        if (handler != null)
        {
            handler(this, new PhotoStreamEventArgs() { PictureStream = pictureStream });
        }
    }
} 
```

我一般在启动时将此服务注册为单例，然后从 ViewModel ICommand 处理程序中调用它。

* * *

使用此服务的一个应用程序是[Blooor](https://github.com/Zoldeper/Blooor)示例 - 请参阅[BaseEditProductViewModel.cs](https://github.com/Zoldeper/Blooor/blob/master/Ahwa.Attila.Core.Android/ViewModels/ProductViewModels/BaseEditProductViewModel.cs) - 这不是我与之有任何关系的示例，但我相信它带来了拍照和 ZXing - 两者都使用外部服务。

* * *

一个警告：在 MonoDroid 上，您可以看到一些奇怪/意外的 Activity/ViewModel 生命周期行为 - 基本上您可以看到您从中拍照的 Activity 在拍照期间从内存中卸载/擦除。如果您的应用发生这种情况，那么您可能需要开始查看以下问题：[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)- 这在 MvvmCross 中不会自动处理（目前）。

我相信 Blooor 样本可能会遇到这个问题 - 但用户是否会在正常的应用程序使用中看到它是有争议的。

* * *

作为该`IMvxPictureChooserTask`服务的替代方案，您还可以查看使用 Xamarin.Mobile 中的一些跨平台 API - 请参阅[MvvmCross vnext：monodroid 在插件](https://stackoverflow.com/questions/13016103/mvvmcross-vnext-monodroid-use-a-videoview-inside-a-plugin)中使用 VideoView 作为可能的起始位置 - 或者仅适用于 Android，您可以轻松实现你自己。

# sql - 执行case语句时出错

> ID：13475897
> 
> 赞同：1
> 
> 时间：2012-11-20T14:58:08.667
> 
> 标签：sql, oracle10g

我正在尝试执行 case 语句，但出现错误。这是我的查询

```
select LOSA_APP.app_ref_no AS "App.Ref.No.",  CODE_BRANCH.branch_name AS "BRANCH"
from losa_app LOSA_APP
INNER JOIN
    losa_app_z LOSA_APP_Z  
ON
    losa_app.app_ref_no = losa_app_z.app_ref_no 
INNER JOIN
    code_branch CODE_BRANCH
ON
    LOSA_APP.attend_branch = CODE_BRANCH.branch_id
where 
    LOSA_APP.app_status='A' -- Application Status in {‘accepted’} 
and 
    trunc(sysdate) between (nvl(LOSA_APP_Z.li_dt, LOSA_APP_Z.li_collect_dt)) AND ((trunc(sysdate))) -- falling under the reporting period
and
    (trunc(sysdate) - nvl(losa_app_z.li_dt,losa_app_z.li_collect_dt)) > 90  -- select application cases at any step after entering Documentation flows.
and 
    losa_app.product_type = 'MG' -- Select records based on input parameter value passed in. 
and
    case :input1
        when 'ABB' Then code_branch.branch_code1 like '%0232%'
        when 'AiBB' Then code_branch.branch_code1 like '%0347%'
    end 
```

在执行时它要求我输入。之后它给了我错误

```
ORA-00905: missing keyword
00905\. 00000 -  "missing keyword"
*Cause:    
*Action:
Error at Line: 22 Column: 50 
```

第 22 行是`when 'ABB' Then code_branch.branch_code1 like '%0232%'`

我缺少什么关键字？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:01:10.693

不要尝试从 CASE 语句返回逻辑布尔值。

相反，使 CASE 语句成为逻辑测试的一部分。如...

```
code_branch.branch_code1
like
case :input1 when 'ABB'  Then '%0232%'
             when 'AiBB' Then '%0347%' end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:02:48.693

试试这个

```
SELECT ....
FROM...
WHERE ....
AND
(
    ((:input1 = 'ABB') AND code_branch.branch_code1 like '%0232%') OR
    ((:input1 = 'AiBB') AND code_branch.branch_code1 like '%0347%')
) 
```

# derbyjs - 使用“derby new test”创建的 Derby 应用程序不起作用

> ID：13475899
> 
> 赞同：2
> 
> 时间：2012-11-20T14:58:23.250
> 
> 标签：derbyjs

我已经使用安装了 derbyjs `npm install -g derby`，然后使用`derby new test`.

然后我使用启动应用程序`node server.js`，得到以下输出：

```
info  - socket.io started
Starting cluster with 1 workers in undefined mode
`kill -s SIGUSR2 7161` to force cluster reload
Go to: http://localhost:3000/
info  - socket.io started 
```

因此，我尝试请求`http://localhost:3000/`，但该站点未完成加载，并且出现以下异常：

```
TEMPLATE ERROR
Error: Model mutation performed after bundling for clientId: 79f4a9f3-25fc-438d-b9f4-a450dccf9566
at Model.errorOnCommit [as _commit]   (/web/derby/test/node_modules/derby/node_modules/racer/lib/bundle/bundle.Model.js:64:9)
at /web/derby/test/node_modules/derby/node_modules/racer/lib/txns/txns.Model.js:120:15
at next (/web/derby/test/node_modules/derby/node_modules/racer/lib/middleware.js:7:26)
at /web/derby/test/node_modules/derby/node_modules/racer/lib/txns/txns.Model.js:107:16
at next (/web/derby/test/node_modules/derby/node_modules/racer/lib/middleware.js:7:26)
at /web/derby/test/node_modules/derby/node_modules/racer/lib/txns/txns.Model.js:101:16
at next (/web/derby/test/node_modules/derby/node_modules/racer/lib/middleware.js:7:26)
at /web/derby/test/node_modules/derby/node_modules/racer/lib/txns/txns.Model.js:92:16
at next (/web/derby/test/node_modules/derby/node_modules/racer/lib/middleware.js:7:26)
at Object.run (/web/derby/test/node_modules/derby/node_modules/racer/lib/middleware.js:10:12)

events.js:68
    throw arguments[1]; // Unhandled 'error' event
                   ^
Error: Cannot write after end
at Gzip.write (zlib.js:311:31)
at ServerResponse.res.write (/web/derby/test/node_modules/express/node_modules/connect/lib/middleware/compress.js:82:18)
at Object.View._render (/web/derby/test/node_modules/derby/lib/View.server.js:337:9)
at /web/derby/test/node_modules/derby/lib/View.server.js:276:10
at Array.2 (/web/derby/test/node_modules/derby/lib/View.server.js:300:5)
at Object.Promise.resolve    (/web/derby/test/node_modules/derby/node_modules/racer/lib/util/Promise.js:21:19)
at /web/derby/test/node_modules/derby/lib/View.server.js:136:17
at /web/derby/test/node_modules/derby/lib/files.js:224:7
at Object.oncomplete (fs.js:308:15)
at process._makeCallback (node.js:248:20) 
```

我完全不知道如何让它运行......这是一个错误，还是我做错了什么？

**更新**

我在 derby 存储库上创建了一个错误报告：[https ://github.com/codeparty/derby/issues/170](https://github.com/codeparty/derby/issues/170)

# java - 在 Web 应用 Java EE/Spring 的一部分上实现自定义安全/过滤器

> ID：13475900
> 
> 赞同：3
> 
> 时间：2012-11-20T14:58:29.923
> 
> 标签：java, spring, security, jakarta-ee, servlet-filters

我正在开发一个使用 Spring MVC 和 Spring 安全性的 Java EE Web 应用程序。到目前为止，我成功地使用自定义 userService（它从我的数据库中检索信息）实现了常见的安全功能，但我现在面临一个新的安全问题，我真的不知道解决它的最佳方法是什么。 .

这是我需要做的：在我的应用程序中经过身份验证的用户可以浏览他们的项目，但应该只能打开他们有权访问的项目（并打开里面的内容），而不能打开其他项目。

我当前的实现处理它的导航（用户界面）只向用户提供授权项目的列表。但是，如果聪明的用户直接编辑 URL 以打开具有另一个 id 的项目，则不会对项目 id 进行授权测试，并且用户已完成，因此它可以毫无问题地打开项目。

所以，我想添加的是对打开项目或其中的某些内容的每个请求的控制。此控件将测试当前用户是否可以打开请求的项目 ID。如果没有，它将向用户返回拒绝访问页面。这个控件本身很容易实现，但由于它是一些代码，可能在我的应用程序的许多方法中，我想找到最干净的方法来做到这一点！

您认为实现它的最佳方法是什么？我考虑了几种可能性，但我需要建议：

1）使用servlet过滤器？

2) 使用自定义 authenticationManager 添加对 Spring 安全性的特殊访问？就像是 ：

```
 <security:intercept-url pattern="/open*" access="canOpen()" /> 
```

（但我不确定如何定义它以及是否能够从原始请求中获取参数......）

3）使用面向方面的编程？（但我在某处读到它不适用于控制器调用）

4) 使用 Spring 拦截器？

5）其他想法？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:17:23.313

我建议您使用自定义 PermissionEvaluator 以便您基本上可以在网页和控制器中使用相同的实现：

在您可以使用的网页中：
`<security:authorize access="hasPermission(#project,'read')"></security:authorize>`

在您的控制器和您可以使用的任何服务方法中：
`@PreAuthorize("hasPermission(#project,'read')")`

或者也`@PostAuthorize`和`@PostFilter("hasPermission(filterObject,'read')")`（对于列表）

所有这些功能将根据您自己的权限评估者限制访问或过滤结果列表。它们都将指向相同的实现，看起来像这样：

```
@Component
public class MyPermissionEvaluator implements PermissionEvaluator {

    private final Log logger = LogFactory.getLog(getClass());

    @Override
    public boolean hasPermission(Authentication auth, Object arg1, Object arg2) {
        logger.info("hasPermission "+auth+" - "+arg1+" - "+arg2+" ");
        if(arg2 instanceof String && arg1 instanceof MyProject){
            MyProject project = (MyProject)arg1;
            if(((String) arg2).equals("read")){
                boolean result = hasPermissionReadProject(auth, project);                   
                return result;
            }
        }
        return false;
    }

    @Override
    public boolean hasPermission(Authentication arg0, Serializable arg1,
        String arg2, Object arg3) {
        logger.info("hasPermission "+arg0+" - "+arg1+" - "+arg2+" - "+arg3+" ");
        return false;
    }
} 
```

此外，当这些方法返回 false 时，它​​会自动抛出 AccessDeniedException，您可以轻松地将其配置为在 http 元素中重定向到您自己的 accessDenied 页面：

```
<http auto-config="true">
    <intercept-url pattern="/admin*" access="ROLE_ADMIN" />
    <access-denied-handler error-page="accessDeniedPage"/>
</http> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:18:44.610

我没有使用 Spring Security，但我不得不面对类似的情况。

我选择实现数据库访问验证。我的每个请求都有一个内置的用户/数据确认。也许这不是最简单的方法，但是这样，用户只能请求他们可以读/写的数据。我从来没有遇到过任何麻烦。

我的请求适用于登录用户角色。例如，在我的例子中，如果用户是学生，他只能访问自己的文件夹，但如果是老师，他可以访问他教给的学生的文件夹。

请求（简化​​了很多！）[使用 IBatis]：

```
SELECT * 
    FROM FOLDER F 
    <dynamic prepend="WHERE">
        <isNotEmpty property="user">
            <isEqual property="user.role" compareValue="student">
                F.ID_STUDENT = #user.idStudent:NUMERIC#
            </isEqual>
            <isEqual property="user.role" compareValue="teacher">
                F.ID_STUDENT IN 
                    (SELECT ID_STUDENT 
                        FROM CLASSES 
                    WHERE ID_TEACHER = #user.id:NUMERIC#)
            </isNotEmpty>
        </isNotEmpty>
        <isEmpty property="user">
            F.ID IS NULL
        </isEmpty>
    </dynamic> 
```

# php - 为什么我应该使用 bindValue / Param 与普通变量？

> ID：13475901
> 
> 赞同：1
> 
> 时间：2012-11-20T14:58:29.953
> 
> 标签：php, mysql, pdo, bindvalue

我可以看到很多关于为什么使用 PDO bindValue 与 bindValue 更好的讨论。但是我找不到关于为什么要在查询中使用它而不是简单变量的精确信息。谁能告诉我？谢谢

```
$sex = 'male';
$s = $dbh->prepare('SELECT name FROM students WHERE sex = :sex');
$s->bindParam(':sex', $sex); 
$s->execute(); 
```

VS

```
$sex = 'male';
$s = $dbh->query('SELECT name FROM students WHERE sex = $sex'); // OR PREPARE, The question is how to pass the variable. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:00:38.943

主要原因是通过使用准备好的语句和绑定变量，您可以保护自己免受用于 sql 注入攻击的最常见向量的侵害。

第二个原因是，如果您有多个请求来运行相同的查询语句，但使用不同的变量值，您可以通过只让服务器计算一次执行计划，然后在调用同一语句时在变量上运行它来节省时间一遍又一遍。考虑多次循环相同的语句。这是 mysql 允许和 PDO 支持的服务器端准备语句的概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T15:17:50.120

正如其他人所说，您想使用 PDO 来防止 SQL 注入。假设有恶意的用户`';drop table students;--`在您网站的输入框中输入了类似的内容。如果没有 PDO，最终查询将如下所示：

`SELECT name FROM students WHERE sex = '';drop table students;--'`

看看会发生什么？该`select`语句将运行并且找不到任何结果（除非您的表中有没有指定性别的学生）。然后，该`drop`语句将运行，并且您的整个学生表将被删除。

这只是一个例子——有各种各样的 SQL 注入攻击，其中许多比这更危险。使用 PDO 可以防止几乎所有这些。在内部，绑定变量与查询本身分开。

# php - 使用 REST 将文件上传到 Sharepoint DMS

> ID：13475903
> 
> 赞同：0
> 
> 时间：2012-11-20T14:58:42.223
> 
> 标签：php, sharepoint

我找不到任何关于使用 REST 服务将文件上传到 Sharepoint 2010 的示例，我们正在尝试使用 php 执行此操作，但不使用某些本机 sharepoint 库的任何语言的示例将是一个很好的起点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:01:21.910

对于任何看到这一点的人，经过一番搜索，无论如何都没有办法做到这一点。REST 可用于列表和其他简单任务，但这没有记录。似乎这将在 Sharepoint 2013 中发生变化，因为它提供了更大的 REST 实现。

# java - Java - 获取绘制组件的名称

> ID：13475907
> 
> 赞同：0
> 
> 时间：2012-11-20T14:58:53.877
> 
> 标签：java, events, click, mouse

我有一个包含五个按钮的 Java 应用程序：

i) 正方形 ii) 矩形 iii) 圆形 iv) 三角形 iv) 透明

单击四个按钮中的任何一个都将导致在绘图画布上绘制相应的形状。这是用于绘制形状的代码：

绘图画布类继承自 JPanel。用户单击并绘制到绘图画布的形状存储在名为**Shapes**的 ArrayList 中。

现在在绘图画布类中，我有许多鼠标侦听器。在 MousePressed 事件中，我想检测点击了什么。

这是我用于按钮的：

按钮的命名是使用 JButton 类的 setName 方法实现的。

但是，Graphics 类没有这样的方法。我怎样才能检测到其中一个形状已在画布上被点击（一旦它被绘制）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:04:49.850

要跟踪绘制的内容，您应该跟踪在集合（例如 ArrayList）中绘制到画布中的形状的坐标，并根据此数组检查单击的鼠标位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:10:55.937

如果您只是使用`fill`和`draw`方法绘制形状，[`Graphics`](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html)则无法再次获取信息，`Graphics`无论如何都无法获取对象。你将不得不自己做一些事情。

如果列表中的对象从[Shape](http://docs.oracle.com/javase/6/docs/api/java/awt/Shape.html)继承，那么您可以检查单击是否在每个形状的范围内。

```
public void mousePressed(MouseEvent e) {
  for (Shape shape : shapes) {
    if (shape.contains(e.getPoint())) {
      //the shape was clicked
    }
  }
} 
```

# c - 函数名称和原型中的斜线和点？

> ID：13475908
> 
> 赞同：18
> 
> 时间：2012-11-20T14:58:53.600
> 
> 标签：c, go, notation

我是 C 新手，查看[Go](https://code.google.com/p/go/)的源代码树，我发现了这个：

[https://code.google.com/p/go/source/browse/src/pkg/runtime/race.c](https://code.google.com/p/go/source/browse/src/pkg/runtime/race.c)

```
void runtime∕race·Read(int32 goid, void *addr, void *pc);
void runtime∕race·Write(int32 goid, void *addr, void *pc);

void
runtime·raceinit(void)
{
    // ...
} 
```

斜线和点 (·) 是什么意思？这是有效的C吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-21T10:07:18.993

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-20T15:07:22.107

“·”字符是`\xB7`根据我的 Javascript 控制台。“∕”字符是`\x2215`。

该点位于[C99 标准的](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)**附录 D**中，列出了哪些特殊字符在 C 源代码中可用作标识符。斜线似乎没有，所以我怀疑它通过#define 或预处理器魔术被用作其他东西（也许是命名空间）。

这可以解释为什么在实际的函数定义中存在点，而斜线却没有。

**编辑：**检查[此答案](https://stackoverflow.com/questions/8564148/non-ascii-characters-in-c)以获取更多信息。GCC 的实现可能只允许使用 unicode 斜杠。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-20T17:03:03.410

看来这不是标准 C，也不是 C99。特别是，即使在 C99 模式下，它`gcc`也会`clang`抱怨点。

此源代码由第 9 部分编译器套件（特别是 OS X 上的 ./pkg/tool/darwin_amd64/6c）编译，该套件由 Go 构建系统引导。根据[this document](http://plan9.bell-labs.com/sys/doc/comp.pdf)，第8页底部，Plan 9及其编译器根本不使用ASCII，而是使用Unicode。在第 9 页的底部，它指出任何具有足够高代码点的字符都被认为可以在标识符名称中使用。

根本没有预处理魔法——函数的定义与函数的声明不匹配，仅仅是因为它们是不同的函数。例如，`void runtime∕race·Initialize();`是一个外部函数，其定义出现在 ./src/pkg/runtime/race/race.go 中；同样对于`void runtime∕race·MapShadow(…)`.

稍后出现的函数`void runtime·raceinit(void)`, 是一个完全不同的函数，这与它实际调用的事实不同`runtime∕race·Initialize();`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-21T02:56:34.150

go 编译器/运行时是使用最初为 plan9 开发的 C 编译器编译的。当你从源代码构建 go 时，它会首先构建 plan9 编译器，然后使用它们来构建 Go。

plan9 编译器支持 unicode 函数名 [1]，Go 开发人员在其函数名中使用 unicode 字符作为伪命名空间。

[1] 看起来这实际上可能符合标准：[g++ unicode variable name](https://stackoverflow.com/questions/2681778/g-unicode-variable-name) but gcc does not support unicode function/variable names。

# windows-phone-7 - 使用社交网络登录 Windows Phone 7/8 应用程序

> ID：13475910
> 
> 赞同：1
> 
> 时间：2012-11-20T14:58:57.103
> 
> 标签：windows-phone-7

我希望用户使用来自 FB、Twitter、Google、Yahoo 等的现有凭据登录到我的应用程序。这背后的想法是，然后我将捕获他们的 userId 和可能的名称信息并保存/使用它。

我不熟悉目前允许 Windows Phone 7/8 使用此功能的任何控件 - 有没有人知道类似于 JanRain 或 oneall.com 为网站提供的控件，但针对 Windows Phone？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:45:29.170

您可以使用 Bruno Terkaly 发布的此方法：http: [//blogs.msdn.com/b/brunoterkaly/archive/2011/11/20/video-tutorial-how-to-add-identity-to-mobile-applications- windows-phone-7-and-the-access-control-service-facebook-yahoo-google-live-id.aspx](http://blogs.msdn.com/b/brunoterkaly/archive/2011/11/20/video-tutorial-how-to-add-identity-to-mobile-applications-windows-phone-7-and-the-access-control-service-facebook-yahoo-google-live-id.aspx)

# java - JBoss 5.1 计划作业停止执行

> ID：13475915
> 
> 赞同：0
> 
> 时间：2012-11-20T14:58:59.973
> 
> 标签：java, jboss, jax-ws, quartz-scheduler

我有状态完整的石英作业，由 JBoss 调度程序安排。它们每 20-30 秒发射一次。其中 4 个是 jax-ws 客户端。1 是轴 2 客户端，2 只是 http 客户端。

问题只发生在 jax-ws 客户端上。一段时间后，它们在执行过程中堆叠——当客户端尝试初始化soap服务时：

```
 soap = new MyService(new URL(targetEndpoint), new QName(
        "http://www.catmancer.com/Service", "myservice"))
        .getMyServiceSoap(); 
```

并且它们不再启动，直到服务器重新启动。甚至不会抛出石英作业超时异常。日志中也不例外。

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:42:10.533

好吧，如果连接被卡住（网络故障，防火墙，...）并挂起，Quartz 工作永远不会结束。它一直占用 Quartz 工作线程。我不认为 Quartz 内置了任何超时 - 工作只要它想要运行就可以运行。

由于您的工作是有状态的，Quartz 不会在旧的触发器完成之前启动新的触发器（这是有状态工作的定义）。

您可以做的最好的事情是对您的 SOAP 调用应用一些超时。它应该很简单。

# c# - 在转发器控件中回发后文本框丢失值

> ID：13475916
> 
> 赞同：0
> 
> 时间：2012-11-20T14:59:03.897
> 
> 标签：c#, asp.net

我在用户控件中有一个中继器控件。中继器控件有一个标签和一个文本框。单击按钮会在中继器控件中添加一个新行。如果我添加一行并在 textBox 中输入一些值，然后再次在转发器控件中添加一个新行，则在第一行的文本框中输入的值会丢失。

谁能帮助我在回发后如何保留文本框的价值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:02:29.177

您正在丢失它，因为您没有包裹在设置文本框值的代码周围的 If not IsPostBack。

因此，每次执行页面时，值都会被重置。将设置值的代码包装在 ispostback 周围，新值不会被覆盖。

> if (!Page.IsPostBack) { // 设置值 }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:25:29.930

您可以从以下**链接**获得帮助：

[http://ranafaisal.wordpress.com/2009/02/17/dynamically-adding-removing-textboxes-in-aspnet-repeater/](http://ranafaisal.wordpress.com/2009/02/17/dynamically-adding-removing-textboxes-in-aspnet-repeater/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T19:01:16.357

我已经尝试过自己并找到了解决方案：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;

    namespace RepeaterTest
    {
        public class Car
        {
            private string _year;
            private string _make;
            private string _model;

            public string Year
            {
                get
                {
                    return _year;
                }
                set
                {
                    _year = value;
                }
            }

            public string Make {
                get { return _make; }
                set { _make=value;}
            }

            public string Model
            {
                get { return _model; }
                set { _model = value; }
            }

            public Car(string year,string make,string model){
                _year = year;
                _make = make;
                _model = model;
        }

            public Car(){
        }

        }
    }

    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Collections;

    namespace RepeaterTest
    {
        public class Cars:CollectionBase
        {

            public int Add(Car car) {
                return List.Add(car);
            } 

        }
    }

    in code behind:
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;

    namespace RepeaterTest
    {
        public partial class WebForm1 : System.Web.UI.Page
        {
            protected void Page_Load(object sender, EventArgs e)
            {
                if (!Page.IsPostBack) {
                    Cars cars = new Cars();
                    Car c1 = new Car("2011", "Marcedez", "Marcedez");
                    Car c2 = new Car("2012", "BMW", "135i");
                   cars.Add(c1);
                   cars.Add(c2);
                    Repeater1.DataSource = cars;
                    Repeater1.DataBind();
                }
            }

            protected void Repeater1_ItemCommand(object source, RepeaterCommandEventArgs e)
            {
                if (e.CommandName == "Add") {
                    //Car carLastEntered = new Car();
                    Cars cars = new Cars();
                    foreach (RepeaterItem item in Repeater1.Items) {
                        Car car = new Car();
                        car.Year = ((TextBox)(item.FindControl("txtYear"))).Text;
                        car.Make = ((TextBox)(item.FindControl("txtMake"))).Text;
                        car.Model = ((TextBox)(item.FindControl("txtModel"))).Text;
                      cars.Add(car);
                      //carLastEntered = car;

                    }

                    //cars.Add(carLastEntered);
                    Repeater1.DataSource = cars;
                    Repeater1.DataBind();

                }
            }
        }
    }

    in aspx:
    <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="RepeaterTest.WebForm1" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
    </head>
    <body>
        <form id="form1" runat="server">
        <div>
            <asp:Repeater ID="Repeater1" runat="server" 
                onitemcommand="Repeater1_ItemCommand">
             <HeaderTemplate>
            <table cellpadding="0" cellspacing="5">
            <tr style="padding-top: 5px;">
                <td colspan="6">
                    <asp:Label ID="lblInstructions" runat="server" Text="Add your cars here:" />
                </td>
            </tr>
            <tr runat="server" id="trHeader" style="font-weight: bold;">
                <td>Year</td>
                <td>Make</td>
                <td>Model</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>         
        </HeaderTemplate> 
        <ItemTemplate>
            <tr>
                <td><asp:TextBox ID="txtYear" runat="server" Width="65" 
                     Text='<%#DataBinder.Eval(Container.DataItem, "Year")%>' /></td>
                <td><asp:TextBox ID="txtMake" runat="server" Width="70"             
                     Text='<%#DataBinder.Eval(Container.DataItem, "Make")%>' /></td>
                <td><asp:TextBox ID="txtModel" runat="server" Width="70" 
                     Text='<%#DataBinder.Eval(Container.DataItem, "Model")%>' /></td>
            </tr>
        </ItemTemplate> 
        <FooterTemplate>
            <tr style="padding-top: 5px;">
               <td colspan="6">
                   <asp:Button ID="btnAdd" runat="server" 
                    Text="Add Car" CommandName="Add" />
               </td>
            </tr>
            </table>
        </FooterTemplate>
            </asp:Repeater>
        </div>
        </form>
    </body>
    </html> 
```

希望这可以帮助。谢谢。

# c# - C# 中的拖放排序 - 最佳算法

> ID：13475920
> 
> 赞同：2
> 
> 时间：2012-11-20T14:59:06.613
> 
> 标签：c#, asp.net, drag-and-drop, telerik, radgrid

我有一个 Telerik RadGrid，它允许用户拖动行以重新排序。在服务器端会发生的是每行的一个 int 列将根据它们拖动的位置进行修改，然后我们在屏幕上对这个数字进行排序。

我想不通的是在后面的代码中处理重新排序的最简单方法。更新在拖动行之间增加/减少任何行的最简单/最佳方法是什么？

编辑：到目前为止我所拥有的

```
 //We should only allow one section to be dragged at a time
            GridDataItem draggedItem = e.DraggedItems.Single();
            TakeoffSection draggedSection = dc.TakeoffSections.Where(a => a.ID == (long)draggedItem.GetDataKeyValue("ID")).Single(); 
            int origDragSectNo = draggedSection.SectionNo;

            GridDataItem destItem = e.DestDataItem;
            TakeoffSection destSection = dc.TakeoffSections.Where(a => a.ID == (long)destItem.GetDataKeyValue("ID")).Single(); 
            int origDestSectNo = destSection.SectionNo;

            if (e.DropPosition == GridItemDropPosition.Above)
            {
                if (draggedSection.SectionNo < destSection.SectionNo)
                {
                    //They are dragging *down*!
                    draggedSection.SectionNo = destSection.SectionNo;
                    destSection.SectionNo++;

                    foreach (var item in dc.TakeoffSections.Where(a => a.RevisionID == ActiveRevisionID && a.SectionNo < origDestSectNo && a.SectionNo > origDestSectNo))
                        item.SectionNo--;
                    dc.SubmitChanges();
                }
                else
                {
                    //They are dragging *up*

                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:36:10.227

基本上，您需要更新所有项目的 SectionNo。换句话说，您不是在交换两个项目，而是在下推以下项目的 SectionNo。

这是我使用的算法。

```
protected void RadGrid1_RowDrop(object sender, GridDragDropEventArgs e)
{
   var ids = (from GridDataItem item in this.RadGrid1.Items
            select Convert.ToInt32(item.GetDataKeyValue("ID"))).ToList();

   // Rearranges item in requested order
   if (ids.Count > 0 && e.DestDataItem != null)
   {
     // Get the index of destination row
     int destItem = ids.FirstOrDefault(item => 
       item == Convert.ToInt32(e.DestDataItem.GetDataKeyValue("ID")));

     int destinationIndex = destItem == 0 ? -1 : ids.IndexOf(destItem);

     foreach (GridDataItem draggedItem in e.DraggedItems)
     {
       int draggedId = ids.FirstOrDefault(item => 
         item == Convert.ToInt32(draggedItem.GetDataKeyValue("ID")));

       if (draggedId != 0 && destinationIndex > -1)
       {
         // Remove and re-insert at specified index
         ids.Remove(draggedId);
         ids.Insert(destinationIndex, draggedId);
       }
     }
   }

   // Update each entity's display orders based on the given order
   MyUpdateDisplayOrder(ids);

   RadGrid1.Rebind();
} 
```

# java - 使用 Java Rally Rest API 向测试集添加 200 多个测试用例

> ID：13475927
> 
> 赞同：4
> 
> 时间：2012-11-20T14:59:37.273
> 
> 标签：java, rest, rally

使用以下代码，我可以将测试用例添加到 RALLY 中新创建的测试集中。但它只添加了测试用例列表中的前 200 个测试用例。

```
private static String createTestSet(RallyRestApi restApi, String TSName, String points)throws IOException, URISyntaxException {
  QueryRequest testcases = new QueryRequest("Test Case");
  testcases.setFetch(new Fetch("FormattedID", "Name", "Owner","Test Folder"));
  // All Test cases
  testcases.setQueryFilter(new QueryFilter("TestFolder.Name", "=","testFolder").and(new QueryFilter("Method", "=", "Manual")));

  testcases.setOrder("FormattedID ASC");
  QueryResponse queryResponse = restApi.query(testcases);
  JsonArray testCaseList = new JsonArray();
  if (queryResponse.wasSuccessful()) {
    System.out.println(String.format("\nTotal results: %d", queryResponse.getTotalResultCount()));
    testCaseList=queryResponse.getResults().getAsJsonArray();
  }else{
    for (String err : queryResponse.getErrors()) {
      System.err.println("\t" + err);
    }
  }

  String ref = "null";
  System.out.println("Creating TestSet: "+TSName);
  try {
    if(!testCaseList.isJsonNull()){
      restApi.setApplicationName("PSN");
      JsonObject newTS = new JsonObject();
      newTS.addProperty("Name", TSName);
      newTS.addProperty("PlanEstimate", points);
      newTS.addProperty("Project", Project_ID);
      newTS.addProperty("Release", Release_ID);
      newTS.addProperty("Iteration", Iteration_ID);
      newTS.add("TestCases", testCaseList);
      CreateRequest createRequest = new CreateRequest("testset",newTS);
      CreateResponse createResponse = restApi.create(createRequest);
      ref = createResponse.getObject().get("_ref").getAsString();
    }
  } catch (Exception e) {
    //System.out.println("Exception Caught: " + e.getMessage());
  }
  return ref;
} 
```

尽管测试用例查询过滤器的总结果计数大于 200，但创建的测试集仅包含 200 个测试用例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:53:40.020

@Brian 上面的评论是正确的。默认情况下[，RallyRestApi.query](https://docs.rallydev.com/javarestapi/com/rallydev/rest/RallyRestApi.html#query%28com.rallydev.rest.request.QueryRequest%29) () 只会返回一页数据（默认页面大小为 200）。 [QueryResponse.getTotalResultCount](https://docs.rallydev.com/javarestapi/com/rallydev/rest/response/QueryResponse.html#getTotalResultCount%28%29) () 将返回服务器上匹配的记录总数。为了获得多页数据，只需首先使用[QueryRequest.setLimit](https://docs.rallydev.com/javarestapi/com/rallydev/rest/request/QueryRequest.html#setLimit%28int%29) () 设置您希望返回的结果数的上限。

# title - 获取标题、导航标题和副标题

> ID：13475933
> 
> 赞同：0
> 
> 时间：2012-11-20T14:59:57.190
> 
> 标签：title, typo3, typoscript, subtitle

我想打印字段`title`，`nav_title`并`subtitle`使用 Typoscript。我看到有几种可能性。例如`data`, `field`, `levelfield`, `leveltitle`, ...

目前我正在使用这段代码（因为到目前为止唯一对我有用的代码）：

```
lib.heading = TEXT
lib.heading.dataWrap = <p class="title"> {leveltitle:0} </p> 
```

但我想要这样的替代品

`stdWrap.field = subtitle // nav_title // title`

检索这些字段的正确方法是什么？

编辑：

```
[userFunc = user_isMobile]

page.headerData.10 = TEXT
page.headerData.10.value (
    // ...
)

// ...

lib.heading = TEXT
#lib.heading.dataWrap = <p class="title"> {leveltitle:0} </p>

lib.heading {
  field = title 
  wrap = <p class="title"> | </p>
}

lib.subpages = HMENU
lib.subpages {
  // ...
}

[global] 
```

userfunction 本身是 php 脚本 (user_mobile.php) 中的一个函数。它对移动设备进行用户代理检测并返回真或假。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:42:57.817

`field`将从当前数据中获取值，在您的上下文中是当前页面的数据。

```
lib.heading = TEXT
lib.heading {
  field = subtitle // nav_title // title
  wrap = <p class="title">|</p>
} 
```

`leveltitle`, `leveluid`,`levelmedia`等允许您从当前页面的根行中的其他页面检索一些数据。

有关详细信息`getText`，请参阅**[文档](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.7.0/view/1/2/)**。

# javascript - 选择选项时获取选择标签中定义的数据值

> ID：13475934
> 
> 赞同：0
> 
> 时间：2012-11-20T14:59:57.753
> 
> 标签：javascript

我有以下标记，我需要在`data-base`下面的函数中获取值。

```
<select id="myid" onclick="myselected(this)" data-base="/admin/index">
<option value="2">Two</option>
<option value="3">Three</option>
</select> 
```

JS

```
function myselected(obj) {

  var idx = obj.selectedIndex;
  var ival = obj.options[idx].value;

   var baseval = .... ? how do I access data-base value?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:02:50.513

尝试[`element.getAttribute()`](https://developer.mozilla.org/en/docs/DOM/element.getAttribute)：

```
var baseval = obj.getAttribute('data-base') 
```

# javascript - 用于 Javascript 的 IE 内存分析器

> ID：13475937
> 
> 赞同：2
> 
> 时间：2012-11-20T15:00:06.247
> 
> 标签：javascript, internet-explorer, memory, profiler

> **可能重复：**
> [IE 中的 JavaScript Profiler](https://stackoverflow.com/questions/20376/javascript-profiler-in-ie)

我们有一个针对 Internet Explorer 7、8、9 的 Web 应用程序，它显然存在 IE 内存泄漏。我们可以看到内存在增长，性能在调用过程中持续下降。

是否有任何好的 Javascript 分析器工具可用于找出留在 IE 内存中的对象，例如用于 .Net 代码的 Ant 分析器。

我们已经尝试过 IEJSLeaksDetector - 它显示潜在的泄漏，但不显示内存分配。SoftwareVerify 的 JavaScript Memory Validator 提供了很好的分析，但不支持 IE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:03:35.023

有一个[MSDN Doc 用于调试 IE 中的内存泄漏](http://blogs.msdn.com/b/ie/archive/2007/11/29/tools-for-detecting-memory-leaks.aspx)

这里还有另一个好工具：[IE Sieve](http://home.wanadoo.nl/jsrosman/)

# c - 通过设置 IP_MULTICAST_IF 通过所有网络接口进行多播？

> ID：13475940
> 
> 赞同：1
> 
> 时间：2012-11-20T15:00:20.727
> 
> 标签：c, linux, sockets, networking

我需要通过机器中所有具有多播功能的接口多播一个数据包。通过使用 setsockopt() 设置 IP_MULTICAST_IF，我可以选择通过哪个接口多播我的数据包。不幸的是，我只能选择一个（不能吗？）。一个可能的解决方案是设置 IP_MULTICAST_IF，通过该接口多播数据包重置 IP_MULTICAST_IF，发送另一个数据包等等。不幸的是，套接字连接时无法修改套接字选项......我的问题有什么可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:20:03.360

最简单的解决方案是每个接口都有一个套接字，但我会质疑您的网络设置，您“需要通过所有接口多播数据包” - 这通常是设计不良的标志。

# r - R 中 lm() 的先验对比

> ID：13475946
> 
> 赞同：2
> 
> 时间：2012-11-20T15:00:44.780
> 
> 标签：r, lm, contrast

我在设置先验对比时遇到问题，想寻求帮助。以下代码应给出与因子水平“d”的两个正交对比。

```
Response <- c(1,3,2,2,2,2,2,2,4,6,5,5,5,5,5,5,4,6,5,5,5,5,5,5)
A <- factor(c(rep("c",8),rep("d",8),rep("h",8)))
contrasts(A) <- cbind("d vs h"=c(0,1,-1),"d vs c"=c(-1,1,0))
summary.lm(aov(Response~A)) 
```

我得到的是：

```
Call:
aov(formula = Response ~ A)

Residuals:
   Min         1Q     Median         3Q        Max 
-1.000e+00 -3.136e-16 -8.281e-18 -8.281e-18  1.000e+00 

Coefficients:
        Estimate Std. Error t value Pr(>|t|)    
(Intercept)   4.0000     0.1091  36.661  < 2e-16 ***
Ad vs h      -1.0000     0.1543  -6.481 2.02e-06 ***
Ad vs c       2.0000     0.1543  12.961 1.74e-11 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 0.5345 on 21 degrees of freedom
Multiple R-squared: 0.8889,     Adjusted R-squared: 0.8783 
F-statistic:    84 on 2 and 21 DF,  p-value: 9.56e-11 
```

但我希望 (Intercept) 的估计值为 5.00，因为它应该等于 d 级，对吧？其他估计也看起来很奇怪......

我知道我可以使用 relevel(A, ref="d") （它们正确显示的地方）更容易地获得正确的值，但我有兴趣学习正确的公式来测试自己的假设。如果我使用以下代码（来自网站）运行类似的示例，它会按预期工作：

```
irrigation<-factor(c(rep("Control",10),rep("Irrigated 10mm",10),rep("Irrigated20mm",10))) 
biomass<-1:30 
contrastmatrix<-cbind("10 vs 20"=c(0,1,-1),"c vs 10"=c(-1,1,0))
contrasts(irrigation)<-contrastmatrix 
summary.lm(aov(biomass~irrigation))

Call:
aov(formula = biomass ~ irrigation)

Residuals:
       Min         1Q     Median         3Q        Max 
-4.500e+00 -2.500e+00  3.608e-16  2.500e+00  4.500e+00 

Coefficients:
                   Estimate Std. Error t value Pr(>|t|)    
(Intercept)         15.5000     0.5528   28.04  < 2e-16 ***
irrigation10 vs 20 -10.0000     0.7817  -12.79 5.67e-13 ***
irrigationc vs 10   10.0000     0.7817   12.79 5.67e-13 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 3.028 on 27 degrees of freedom
Multiple R-squared: 0.8899,     Adjusted R-squared: 0.8817 
F-statistic: 109.1 on 2 and 27 DF,  p-value: 1.162e-13 
```

我真的很感激对此的一些解释。

谢谢， 杰里米亚斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T15:35:06.397

我认为问题在于理解`contrasts`（您可以`?contrasts`详细了解）。让我详细解释一下：

如果您使用默认方式`factor` `A`，

```
A <- factor(c(rep("c",8),rep("d",8),rep("h",8)))
> contrasts(A)
  d h
c 0 0
d 1 0
h 0 1 
```

因此模型`lm`给你的是

```
Mean(Response) = Intercept + beta_1 * I(d = 1) + beta_2 * I(h = 1)

summary.lm(aov(Response~A))
Coefficients:
    Estimate Std. Error t value Pr(>|t|)    
(Intercept)    2.000      0.189    10.6  7.1e-10 ***
Ad             3.000      0.267    11.2  2.5e-10 ***
Ah             3.000      0.267    11.2  2.5e-10 *** 
```

所以对于 group`c`来说，平均值就是截距`2`，对于 group`d`来说，平均值是`2 + 3 = 5`相同的 group `h`。

如果您使用自己的对比度怎么办：

```
contrasts(A) <- cbind("d vs h"=c(0,1,-1),"d vs c"=c(-1,1,0))

A
[1] c c c c c c c c d d d d d d d d h h h h h h h h
attr(,"contrasts")
    d vs h d vs c
c      0     -1
d      1      1
h     -1      0 
```

你适合的模型原来是

```
Mean(Response) = Intercept + beta_1 * (I(d = 1) - I(h = 1)) + beta_2 * (I(d = 1) - I(c = 1))
     = Intercept + (beta_1 + beta_2) * I(d = 1) - beta_2 * I(c = 1) - beta_1 * I(h = 1)

Coefficients:
Estimate Std. Error t value Pr(>|t|)    
(Intercept)    4.000      0.109   36.66  < 2e-16 ***
Ad vs h       -1.000      0.154   -6.48  2.0e-06 ***
Ad vs c        2.000      0.154   12.96  1.7e-11 *** 
```

所以对于组`c`，均值是`4 - 2 = 2`，对于组`d`，均值是`4 - 1 + 2 = 5`，对于组`h`，均值是`4 - (-1) = 5`。

===========================

更新：

进行对比的最简单方法是将基本（参考）级别设置为`d`.

```
contrasts(A) <- contr.treatment(3, base = 2)
Coefficients:
             Estimate Std. Error t value Pr(>|t|)    
(Intercept)  5.00e+00   1.89e-01    26.5  < 2e-16 ***
A1          -3.00e+00   2.67e-01   -11.2  2.5e-10 ***
A3          -4.86e-17   2.67e-01     0.0        1 
```

如果您想使用对比度：

```
Response <- c(1,3,2,2,2,2,2,2,4,6,5,5,5,5,5,5,4,6,5,5,5,5,5,5)
A <- factor(c(rep("c",8),rep("d",8),rep("h",8)))
mat<- cbind(rep(1/3, 3), "d vs h"=c(0,1,-1),"d vs c"=c(-1,1,0))
mymat <- solve(t(mat))
my.contrast <- mymat[,2:3]
contrasts(A) <- my.contrast
summary.lm(aov(Response~A))

Coefficients:
Estimate Std. Error t value Pr(>|t|)    
(Intercept) 4.00e+00   1.09e-01    36.7  < 2e-16 ***
Ad vs h     7.69e-16   2.67e-01     0.0        1    
Ad vs c     3.00e+00   2.67e-01    11.2  2.5e-10 *** 
```

参考： http: [//www.ats.ucla.edu/stat/r/library/contrast_coding.htm](http://www.ats.ucla.edu/stat/r/library/contrast_coding.htm)

# lucene - 如何在 apache lucene 搜索中搜索非索引字段

> ID：13475949
> 
> 赞同：1
> 
> 时间：2012-11-20T15:00:46.560
> 
> 标签：lucene

我有一个索引 5 列的表，我还有 5 个其他列没有索引。是否可以使用 lucene 查询使用非索引列进行搜索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:45:44.737

不可以，您只能搜索已编入索引的数据。

# asp.net - 如何指定复选框数据以保存到位域

> ID：13475953
> 
> 赞同：0
> 
> 时间：2012-11-20T15:00:52.107
> 
> 标签：asp.net

如果复选框产生 TRUE 或 FALSE，如何转换为 1 或 0 以将值保存到数据库？

ASP.NET

```
<asp:CheckBox ID="cbTermsandcond" runat="server" /> 
```

C＃

```
 BTermsandcondParam = new SqlParameter();
    BTermsandcondParam.ParameterName = "@BTermsandcondParam";
    BTermsandcondParam.SqlDbType = SqlDbType.Bit;
    BTermsandcondParam.Direction = ParameterDirection.Input;
    BTermsandcondParam.Value = cbTermsandcond. ???  ; 
```

编辑：

我写了这个有效。但是有没有更简单的方法？

```
 if (cbTermsandcond.Checked == true)
    {
        BTermsandcondParam.Value = 1; 
    }
    else
    {
        BTermsandcondParam.Value = 0;
    } 
```

敬茶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:00:27.243

```
BTermsandcondParam.Value = cbTermsandcond.Checked 
```

# c++ - 类视频数据的高效文件格式

> ID：13475954
> 
> 赞同：2
> 
> 时间：2012-11-20T15:00:54.620
> 
> 标签：c++, video, kinect, file-format

我正在使用 Kinect 传感器，我想存储和加载它产生的数据。本质上，它为我提供了两种类型的帧（颜色和深度），我将它们保存到二进制文件中。由于每个帧的大小刚刚超过 1Mb，并且 Kinect 以 30 fps 的速度记录，因此文件往往会增长得非常快。

现在我需要一种有效的方法来加载数据并快速随机访问帧。

我现在的做法是这样的：

*   我有一个`Frame`包含帧头（帧号、时间戳、类型、数据大小）和指向实际图像数据的指针的类
*   我有一个`Replay`类，它包含一个标题（帧数、分辨率等）和两个向量：`frames`它包含`Frame`数据指针初始化为 NULL 的对象，并将`framePositions`帧号映射到它在文件中的位置。
    *   当我需要一个框架时，我只需从文件中加载它的数据。

加载看起来像这样（压缩）：

```
Replay replay;
Frame frame;
int position = fStream.tellg();
fStream.read((char *) &frame.header, sizeof(frame.header));
fStream.ignore(frame.dataSize);    // skip image data for now
replay.insertFrame(frame, pos);    // put frame and pos into vectors 
```

所以这比将所有内容都加载到内存中要好，但它仍然很慢。有一个名为 Kinect Studio 的 MS 软件，它可以立即打开录制的文件。从字面上看是瞬间，而我的解决方案需要几秒钟来加载类似大小的文件。这是什么魔法？

现在我有了以下想法：在文件中创建一个帧位置数组，将其放在文件末尾（因为它将是可变大小），将其偏移量和大小放在标题中，甚至不用费心加载帧，只需加载数组并在需要时请求帧。

我认为它可以工作，但我决定在尝试实施之前寻求建议，因为我相信有处理此类问题的标准方法，我真的不想通过反复试验来重新发明轮子。

# performance - 詹金斯对主页请求的响应速度很慢

> ID：13475955
> 
> 赞同：0
> 
> 时间：2012-11-20T15:01:01.457
> 
> 标签：performance, jenkins

我在 1.491 版中使用战争中的詹金斯。
当我尝试加载主页时，它非常慢。
它是从 1.482 版本升级后开始的。

我试过 kill -3 并看到：

处理 GET / : RequestHandlerThread[#14]" daemon prio=10 tid=0x08c92800 nid=0x2ea6 runnable [0x9f9f3000..0x9f9f5e50] java.lang.Thread.State: RUNNABLE at java.io.UnixFileSystem.getBooleanAttributes0(Native Method) at java jenkins.model.model.lazy.AbstractLazyLoadRunMap.load(AbstractLazyLoadRunMap.java:599) 的 java.io.File.isDirectory(File.java:754) 的 .io.UnixFileSystem.getBooleanAttributes(UnixFileSystem.java:228)。 lazy.AbstractLazyLoadRunMap.search(AbstractLazyLoadRunMap.java:344) at hudson.model.AbstractBuild.getPreviousBuild(AbstractBuild.java:207) at hudson.model.AbstractBuild.getPreviousBuild(AbstractBuild.java:100) at hudson.model.Job.getLastFailedBuild (Job.java:824) 在 sun.reflect.GeneratedMethodAccessor42.invoke(Unknown Source) 在 sun.reflect。DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.commons.jexl.util.PropertyExecutor.execute(PropertyExecutor.java:125) at org .apache.commons.jexl.util.introspection.UberspectImpl$VelGetterImpl.invoke(UberspectImpl.java:314) 在 org.apache.commons.jexl.parser.ASTArrayAccess.evaluateExpr(ASTArrayAccess.java:185) 在 org.apache.commons .jexl.parser.ASTIdentifier.execute(ASTIdentifier.java:75) 在 org.apache.commons.jexl.parser.ASTReference.execute(ASTReference.java:83) 在 org.apache.commons.jexl.parser.ASTReference.value (ASTReference.java:57) 在 org.apache.commons.jexl.parser.ASTReferenceExpression.value(ASTReferenceExpression.java:51) 在 org.apache.commons.jexl.ExpressionImpl。在 org.apache.commons.jelly.tags.core.CoreTagLibrary$3.run(CoreTagLibrary.java:134) 在 org.apache.commons.jelly.tags.core.CoreTagLibrary 的 hudson.ExpressionFactory2$JexlExpression.evaluate(ExpressionFactory2.java:72) 评估(ExpressionImpl.java:80)。 apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95) at org.apache.commons.jelly.tags.core.CoreTagLibrary$2.run(CoreTagLibrary.java:105) at org.kohsuke.stapler.jelly .JellyViewScript.run(JellyViewScript.java:81) at org.kohsuke.stapler.jelly.IncludeTag.doTag(IncludeTag.java:146) at org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269 ) 在 org.apache.commons.jelly.tags.core.ForEachTag.doTag(ForEachTag.java:150) 在 org.apache.commons 的 org.apache.commons.jelly.TagSupport.invokeBody(TagSupport.java:161)。 jelly.impl.TagScript.run(TagScript.java:269) 在 org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95) 在 org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99) 在 org.apache.commons。 jelly.tags.core.CoreTagLibrary$2.run(CoreTagLibrary.java:105) at org.kohsuke.stapler.jelly.CallTagLibScript.run(CallTagLibScript.java:119) at org.apache.commons.jelly.TagSupport.invokeBody(TagSupport .java:161) 在 org.apache.commons.jelly.tags.core.ForEachTag.doTag(ForEachTag.java:150) 在 org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269) 在org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95) at org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99) at org.apache.commons.jelly.impl .ScriptBlock.run(ScriptBlock.java:95) org.apache.commons.jelly.tags.core.CoreTagLibrary$1.run(CoreTagLibrary.java:98) 在 org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95) 在 org. kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99) at org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95) at org.apache.commons.jelly.tags.core .CoreTagLibrary$2.run(CoreTagLibrary.java:105) at org.kohsuke.stapler.jelly.CallTagLibScript.run(CallTagLibScript.java:119) at org.kohsuke.stapler.jelly.groovy.JellyBuilder.doInvokeMethod(JellyBuilder.java: 283) 在 org.kohsuke.stapler.jelly.groovy.Namespace$ProxyImpl.invoke(Namespace.java:92) 在 $Proxy32.projectView(Unknown Source) 在 lib.JenkinsTagLib$projectView.call(Unknown Source) 在 org.codehaus .groovy.runtime。callsite.CallSiteArray.defaultCall(CallSiteArray.java:42) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108) at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.call(AbstractCallSite.java:108) java:120) 在 org.kohsuke.stapler.jelly.groovy.GroovierJellyScript.run(GroovierJellyScript.java:66) 在 org.kohsuke.stapler.jelly 的 hudson.model.View.main.run(main.groovy:14) .groovy.GroovierJellyScript.run(GroovierJellyScript.java:59) 在 org.kohsuke.stapler.jelly.IncludeTag.doTag(IncludeTag.java:146) 在 org.apache.commons.jelly.impl.TagScript.run(TagScript.java :269) 在 org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)呼叫（AbstractCallSite.java:108）在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:120) 在 hudson.model.View.main.run(main.groovy:14) 在 org.kohsuke .stapler.jelly.groovy.GroovierJellyScript.run(GroovierJellyScript.java:66) 在 org.kohsuke.stapler.jelly.groovy.GroovierJellyScript.run(GroovierJellyScript.java:59) 在 org.kohsuke.stapler.jelly.IncludeTag.doTag (IncludeTag.java:146) 在 org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269) 在 org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)呼叫（AbstractCallSite.java:108）在 org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:120) 在 hudson.model.View.main.run(main.groovy:14) 在 org.kohsuke .stapler.jelly.groovy.GroovierJellyScript.run(GroovierJellyScript.java:66) 在 org.kohsuke.stapler.jelly.groovy.GroovierJellyScript.run(GroovierJellyScript.java:59) 在 org.kohsuke.stapler.jelly.IncludeTag.doTag (IncludeTag.java:146) 在 org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269) 在 org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)在 org.kohsuke.stapler.jelly.groovy.GroovierJellyScript.run(GroovierJellyScript.java:59) 运行(GroovierJellyScript.java:66) 在 org.kohsuke.stapler.jelly.IncludeTag.doTag(IncludeTag.java:146) 在 org .apache.commons.jelly.impl.TagScript.run(TagScript.java:269) 在 org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)在 org.kohsuke.stapler.jelly.groovy.GroovierJellyScript.run(GroovierJellyScript.java:59) 运行(GroovierJellyScript.java:66) 在 org.kohsuke.stapler.jelly.IncludeTag.doTag(IncludeTag.java:146) 在 org .apache.commons.jelly.impl.TagScript.run(TagScript.java:269) 在 org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)

任何帮助表示赞赏。

PS - 还在 jenkins 开发组询问：[https ://groups.google.com/forum/?fromgroups=#!topic/jenkinsci-dev/DJpaLTEsJ-I](https://groups.google.com/forum/?fromgroups=#!topic/jenkinsci-dev/DJpaLTEsJ-I)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:44:35.710

还导致了一个错误：[https](https://issues.jenkins-ci.org/browse/JENKINS-16089) ://issues.jenkins-ci.org/browse/JENKINS-16089仍在等待解决

# ios - UITextField 多行

> ID：13475961
> 
> 赞同：9
> 
> 时间：2012-11-20T15:01:08.510
> 
> 标签：ios, xcode, textfield

只是想知道是否可以在 XCode 的 UITextField 中使用多行。我知道如何增加高度。但知道它的线条：/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T15:22:55.710

好的，我用一些技巧做到了；）首先制作了一个 UITextField 并像这样增加了它的大小：

```
var frameRect: CGRect = textField.frame
frameRect.size.height = 53
textField.frame = frameRect 
```

然后我在我制作 UITextField 的同一区域制作了一个 UITextView，并删除了它的背景颜色。现在看起来我有一个多行文本字段！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T15:05:12.603

不幸的是， UITextField 专门只有一行。您将需要使用 UITextView 而不是 UITextField 来显示和编辑多行文本；默认情况下它将是多行的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T15:02:28.347

您可以改用[`UITextView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uitextview_class/Reference/UITextView.html)“迷你记事本”视图。

# jsf - 如何解决 Jetty 上的 JSF 注释处理错误？

> ID：13475968
> 
> 赞同：1
> 
> 时间：2012-11-20T15:01:23.790
> 
> 标签：jsf, maven, jetty, managed-bean

使用注释*@ManagedBean*注释的托管 bean 的 JSF 加载机制中有一个错误。**通过mvn jetty:run 运行**应用程序时，该机制未激活。此处报告该错误：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=288243](https://bugs.eclipse.org/bugs/show_bug.cgi?id=288243)

这是一件非常讨厌的事情，因为 jetty:run 在调试时有很大的优势：

*   它很快
*   它直接使用工作区中的 jsf 文件，无需使用**FileSync**插件

但是，不支持注释将需要降级到 XML 配置。

这个错误有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:05:41.210

来源：您在问题中提供的链接，请阅读 Tomaz Lipinsi 评论

> 嗨，我找到了解决此问题的简单方法。实际上我不使用 Jetty，而是使用 Tomcat 和 Sysdeo Tomcat Launcher，但它的行为相同。JSF2 在两个地方寻找带注释的类： - WEB-INF/classes - 所以如果应用程序没有打包到 .war 中，则该目录不存在 - 类路径 jars (WEB-INF/lib) - 与上面类似我已经试图将默认的 com.sun.faces.spi.AnnotationProvider 覆盖为我自己的，以便我可以向他提供我的类列表（请参阅此类的 JavaDoc）。当我试图这样做时，我想到了一个想法，我可以简单地将我的编译类放在 WEB-INF/classes 目录中。将此添加到 pom.xml 解决了问题：
> src/main/webapp/WEB-INF/classes 缺点是现在我已经在源目录中编译了类，但最重要的是它可以工作。

建议您阅读那里的所有评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T20:30:07.057

为了避免 src 和类之间的混合，你可以在你的 maven 的 POM 中设置一些这样的：

```
<build>
    <finalName>my-project</finalName>
    <directory>target</directory>
    <outputDirectory>${basedir}/target/main/webapp/WEB-INF/classes</outputDirectory>
 ....

</build> 
```

在码头的 maven-plugin 的配置中你可以试试这个：
*编辑：码头使用的版本是 6.1.26*，如果标签'resources'不起作用，试试'resourcesAsCSV'

```
<configuration>
    ...
  <webAppConfig>
     <defaultsDescriptor>${basedir}/src/main/webapp/WEB-NF/webdefault.xml</defaultsDescriptor>
     <baseResource implementation="org.mortbay.resource.ResourceCollection">
          <resources>${basedir}/target/main/webapp,${basedir}/src/main/webapp</resources>
     </baseResource>
  </webAppConfig>
    ...
</configuration> 
```

**注意：webdefault.xml 用于在 jetty 运行时设置解锁文件所需的 init-param，参数为：

```
<init-param>
  <param-name>useFileMappedBuffer</param-name>
  <param-value>false</param-value>
</init-param> 
```

# python - 如何让每个孩子的一个类方法不同（并从基类调用它）

> ID：13475971
> 
> 赞同：1
> 
> 时间：2012-11-20T15:01:39.470
> 
> 标签：python, django

使用 Concert 的实例，我得到：必须使用 Concert 实例作为第一个参数调用未绑定的方法 do_stuff()（改为使用 ModelBase 实例）

模型.py：

```
class Event(models.Model):
    def do_stuff(self):
        response self.do_specific_stuff(self)

class Concert(Event):
    def do_specific_stuff(self):
        ...

class Party(Event):
    def do_specific_stuff(self):
        ... 
```

意见：

```
def index(request):
    x = Concert.objects.get(name='Jack White @ Oakland')
    output = x.do_stuff()
    return HttpResponse(output) 
```

**我的目标是循环遍历所有事件并根据事件类型执行 do_specific_stuff 子类方法。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:27:24.930

在 Django 中，继承触发了多表继承，但在 Python 中你没有得到多态性。它只是 ORM 的一个实例，没有提供数据模式和对象模型之间的完美对应。

换句话说，当您查询 Event 时，您会得到一大堆 Event 对象，而不管其中一些实际上是 Concert 还是 Party 对象。您必须手动向下转换。如果 Event 是 Concert，它将有一个名为 的属性`concert`，该属性指向相应的 Concert 子类。派对也是如此。如果它只是一个普通的 Event，它不会有任何属性。

您可以在 Event 上使用以下属性来自动向下转换您的对象：

```
@property
def as_child_class(self):
    """Casts this object to its subclass, if possible"""

    if hasattr(self, 'concert'):
        return self.concert
    elif hasattr(self, 'party'):
        return self.party
    else:
        return self 
```

然后你可以做类似的事情：

```
for event in Event.objects.all()
    event.as_child_class.do_specific_stuff() 
```

之前也出现过类似的问题：

*   [Django中的多态性](https://stackoverflow.com/questions/1397537/polymorphism-in-django)
*   [如何在不知道子类名称的情况下访问 django 中对象的子类？](https://stackoverflow.com/questions/929029/how-do-i-access-the-child-classes-of-an-object-in-django-without-knowing-the-nam/929982#929982)

这个链接还有一些其他的想法：

*   [http://jeffelmore.org/2010/11/11/automatic-downcasting-of-inherited-models-in-django/](http://jeffelmore.org/2010/11/11/automatic-downcasting-of-inherited-models-in-django/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:46:17.963

在我看来，您的`Event`模型**仅**用于继承，因此您应该抽象它：

```
class Event(models.Model):
    class Meta:
        absract = True

    def do_stuff(self):
        response self.do_specific_stuff()

    def do_specific_stuff(self):
        raise NotImplemented

class Concert(Event):
    def do_specific_stuff(self):
        ...

class Party(Event):
    def do_specific_stuff(self):
        ... 
```

我可能对您`Event`对`Event`.

希望这可以帮助！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:18:22.240

首先看[模板方法](http://en.wikipedia.org/wiki/Template_method_pattern/%22Template%20Method%20pattern%22)

其次，Event 类应该是抽象的。

```
class Event:
   def __init__:
       raise NotImplemented('This class is abstract') 
```

第三，参见[单表继承](http://martinfowler.com/eaaCatalog/singleTableInheritance.html%22Single%20table%22)和[类表继承](http://martinfowler.com/eaaCatalog/classTableInheritance.html%22Class%20Table%20Inheritance%22)模式。[还有](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)django-ORM的模式实现 祝你好运=）

# svn - SVN 和 GIT 并行

> ID：13475973
> 
> 赞同：3
> 
> 时间：2012-11-20T15:01:52.877
> 
> 标签：svn, github

我正在开发一个基于代码的项目。我将 SVN 与我的私人服务器一起使用，并使用 TRAC 进行票务和项目管理。并行我想将我的代码拉到 github 上进行讨论和开源思想。

首先提交更改到我的 svn 服务器，然后提交到 github。我忽略了 svn 中的 .git/* 文件，反之亦然。但是我在推送到 github 时总是遇到合并错误。

有没有人有使用这两种服务的经验并且可以给我提示？你的，拉斐尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:09:00.030

只需使用 git-svn（**一个**本地代码库 - Git repo）并拥有两个远程：SVN 和 Git

# phpmyadmin - 在 phpMyAdmin 中使用 between 函数

> ID：13475975
> 
> 赞同：10
> 
> 时间：2012-11-20T15:02:00.440
> 
> 标签：phpmyadmin

您如何使用 phpMyAdmin 搜索功能上的“介于”功能？

![在此处输入图像描述](../Images/6f60cf76d67c8cdea58e029fe82821d6.png)

我试过了

```
 2012-11-29 AND 2012-11-30 
```

和

```
 '2012-11-29' AND '2012-11-30' 
```

当我按“开始”时，它会返回此屏幕。肯定有结果，因为如果我将日期设置为 =`2012-11-29`我会得到结果。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T15:07:37.477

好吧，对于普通字段，您应该使用逗号分隔值。例如，要`BETWEEN 4 AND 5`在查询中包含子句，只需`4, 5`输入该输入即可。在您的情况下，输入`2012-11-29, 2012-11-30`应该可以解决问题。

有趣的是，(3.5.1) 的当前版本`phpMyAdmin`只是不允许逗号进入与日期时间列相关的输入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-10T23:02:11.460

您需要`,`在日期之间使用，因为该文件不允许您输入非数字字符，因此您可以`,`从其他地方复制并粘贴它 PHPMyAdmin。

# sql-server - 执行存储过程选择数据 - Mule 3.3.0

> ID：13475976
> 
> 赞同：0
> 
> 时间：2012-11-20T15:02:05.513
> 
> 标签：sql-server, sql-server-2008, mule, jtds

我正在尝试`SELECT`使用 Mule 3.3.0 对 SQL Server 2008 数据库中的数据执行存储过程。

在 Mule 文档中，有关于使用 Oracle 执行此操作的信息。我不确定这对于 SQL Server 是否可行。

这是我的 Mule 端点配置

```
<jdbc:outbound-endpoint exchange-pattern="request-response" queryTimeout="-1" connector-ref="sqlServerConnector" queryKey="selectCoupons" doc:name="Database">
    <jdbc:query key="selectCoupons" value="call sp_get_coupons()"/>
</jdbc:outbound-endpoint> 
```

这是输出

```
Root Exception stack trace:
java.sql.SQLException: The executeUpdate method must not return a result set.
    at net.sourceforge.jtds.jdbc.JtdsStatement.processResults(JtdsStatement.java:603)
    at net.sourceforge.jtds.jdbc.JtdsStatement.executeSQL(JtdsStatement.java:546)
    at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.executeUpdate(JtdsPreparedStatement.java:506)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything) 
```

我正在使用 jTDS 驱动程序。使用 JDBC 客户端测试存储过程，我得到了预期的结果集。

有什么建议么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-05-23T11:22:35.603

```
<db:stored-procedure config-ref="Oracle_Configuration1" doc:name="Database">
            <db:parameterized-query><![CDATA[{call apps.create_sales_Order(:p_header_rec_oper,:P_order_number,:P_ordered_date,:P_line_id,:p_flow_Status_code,:P_return_status)}]]></db:parameterized-query>
            <db:in-param name="p_header_rec_oper" value="CREATE"/>
            <db:out-param name="P_order_number" type="INTEGER"/>
            <db:out-param name="P_ordered_date" type="DATE"/>
            <db:out-param name="P_line_id" type="VARCHAR"/>
            <db:out-param name="p_flow_Status_code" type="VARCHAR"/>
            <db:out-param name="P_return_status" type="VARCHAR"/>

</db:stored-procedure>

{
•	P_return_status: "S",
•	P_line_id: "684229",
•	p_flow_Status_code: "ENTERED",
•	P_ordered_date: "2015-05-22",
•	P_order_number: 69393
}
```

# android - 我在哪里使用 TextWatcher 实现？

> ID：13475977
> 
> 赞同：0
> 
> 时间：2012-11-20T15:02:06.230
> 
> 标签：android, android-edittext, textwatcher

我的意思是，我应该在哪个功能中使用文本观察器？我尝试在 onResume() 函数中使用它，但没有奏效。

我正在尝试在用户键入时检查在我的 EditText 框中输入的每个字符之一。更具体地说，我给了用户一个谜语，答案是“SOS”。答案在 EditText 框中，我想在输入后立即检查每个字符（我在 edittext 框中添加了最大长度属性，因此它不会超过 3）。当我发现一个错误的字符时，我想设置一个可见的 X 图标图像，如果字符正确则相反。

这是我的 TextWatcher 代码片段：

```
final EditText editText=(EditText)findViewById(R.id.editTxt_three);
    editText.addTextChangedListener(new TextWatcher() 
    {
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) 
        {

        }
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) 
        {

        }
        @Override
        public void afterTextChanged(Editable s) 
        {
            for(int i=0;i<editText.length();i++)
            {
                if(i==0)
                {
                    img=(ImageView)findViewById(R.id.icon1);
                    if(s.charAt(i)!='s' || s.charAt(i)!='S')
                        img.setVisibility(1);
                    else
                        img.setVisibility(0);
                }
                if(i==1)
                {
                    img=(ImageView)findViewById(R.id.icon2);
                    if(s.charAt(i)!='o' || s.charAt(i)!='O')
                        img.setVisibility(1);
                    else
                        img.setVisibility(0);
                }
                if(i==2)
                {
                    img=(ImageView)findViewById(R.id.icon3);
                    if(s.charAt(i)!='s' || s.charAt(i)!='S')
                        img.setVisibility(1);
                    else
                        img.setVisibility(0);
                }
            }

        }
    }); 
```

简而言之，我应该在哪里使用此代码？如果您想到什么，请随意简化我的代码:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:04:09.413

您可以在 onCreate 中使用 textwatcher，我认为下面的代码可以帮助您。

```
import android.os.Bundle;
import android.app.Activity;
import android.text.Editable;
import android.text.TextWatcher;
import android.widget.EditText;
import android.widget.ImageView;

public class MainActivity extends Activity {
    ImageView img,img2,img3;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final EditText editText=(EditText)findViewById(R.id.editText1);
        editText.addTextChangedListener(new TextWatcher() 
        {
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) 
            {

            }
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) 
            {

            }

            @Override
            public void afterTextChanged(Editable arg0) {
                String s = editText.getText().toString();
                  for(int i=0;i<editText.getText().toString().length();i++)
                    {
                        if(i==0)
                        {
                            img=(ImageView)findViewById(R.id.imageView1);                           
                            if(s.charAt(i)!='s' || s.charAt(i)!='S')
                                img.setVisibility(1);
                            else
                                img.setVisibility(0);
                        }
                        if(i==1)
                        {
                            img2=(ImageView)findViewById(R.id.imageView2);
                            if(s.charAt(i)!='o' || s.charAt(i)!='O')
                                img2.setVisibility(1);
                            else
                                img2.setVisibility(0);
                        }
                        if(i==2)
                        {
                            img3=(ImageView)findViewById(R.id.imageView3);
                            if(s.charAt(i)!='s' || s.charAt(i)!='S')
                                img3.setVisibility(1);
                            else
                                img3.setVisibility(0);
                        }
                    }

            }
        });
    }

} 
```

# html - 如何在 HTML5 应用程序缓存错误事件中获取错误消息？

> ID：13475980
> 
> 赞同：6
> 
> 时间：2012-11-20T15:02:23.963
> 
> 标签：html, html5-appcache

在我的离线 webapp 缓存期间，我收到一个完全有效的错误，它显示在浏览器控制台中，如下所示：

```
Application Cache Error event: Manifest changed during update, scheduling retry 
```

我可以添加一个侦听器来通知发生了错误。

```
window.applicationCache.addEventListener('error', function(e){
  //handle error here
}, false); 
```

如何获取错误详细信息，在这种情况下“**更新期间清单已更改，计划重试**”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T14:30:15.170

您必须使用 window.onerror。回调可以有三个参数：

```
Error message (string)
Url where error was raised (string)
Line number where error was raised (number) 
```

检查此以获取更多信息： [https ://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers.onerror](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers.onerror)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-08T03:40:34.063

今天仍然是一个有效的问题。在我的示例中，我的错误日志不返回任何内容。我正在使用 IE11。

```
<html xmlns="http://www.w3.org/1999/xhtml" manifest="icozum.appcache"> 
```

onChecking 事件触发，但随后 onError 缓存状态 = 0，即未缓存。

```
 window.applicationCache.onchecking = function (e) {
       var doc = document.getElementById("cachestatus");
       if (doc != null) {
            doc.innerHTML += "Checking the cache.\n";
       }
 } 
```

然后onError

```
window.applicationCache.onerror = function (e) {
    var doc = document.getElementById("cachestatus");
    if (doc != null) {
         doc.innerHTML += "Cache error occurred." + applicationCache.status.toString() + "\n";
         console.log(e);
         console.log("test");
     }
 } 
```

屏幕上的输出是

> 检查缓存。发生缓存错误。0

onError 事件处理程序中没有关于错误的详细信息。按F12我得到了真正的错误。这是屏幕截图。有没有办法在 onError 事件处理程序中捕获这么多细节。

[![在此处输入图像描述](../Images/7044628dd658e9320ca802ac6be13a0a.png)](https://i.stack.imgur.com/U5m2m.png)

最后我发现了问题所在。该错误不是由于缺少文件。应用程序缓存文件确实存在，但是在 windows 中，visual studio (2013)/IIS 无法识别扩展名`.appcache`. 以下部分需要添加到`web.config`文件中。

```
<system.webServer>
  <staticContent>
    <mimeMap fileExtension=".appcache" mimeType="text/cache-manifest"/>
  </staticContent>
</system.webServer> 
```

# java - 检查目录文件大小以通过电子邮件通知它是否增长到某个点

> ID：13475982
> 
> 赞同：0
> 
> 时间：2012-11-20T15:02:29.377
> 
> 标签：java, filesize, ms-access-97

我在 Windows 上有一个 access 97 服务器，如果文件大小增加到 1GB，它就会崩溃。我需要找到一个软件或编写一些东西（在 java 中）来检查目录并在文件大小增长到 900MB 时通过电子邮件通知我们，以便我们修复它。有没有人对软件或解决方法有任何想法？我对编程很生疏，所以任何要点或提示都会有很大帮助。

Edit1：增长速度相对较慢（上次我们遇到问题大约是 3 个月前），所以我相信我们希望它每 15 分钟检查一次，如果这有任何改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:07:59.363

*   您可以使用 Java 中 Files 类中的 size() 定期检查文件的大小。 [http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)

*   如果您有更多文件要检查，您可以循环并累加它们的总大小。在你想要放置一个`sleep()`或类似的东西以避免耗尽你所有的 CPU 的时候。

*   要发送电子邮件，包[http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html)提供了 smtp 客户端的实现。

# windows - 是否可以用代理 dll 替换系统 dll？

> ID：13475993
> 
> 赞同：4
> 
> 时间：2012-11-20T15:03:03.217
> 
> 标签：windows, dll, proxy

阅读这篇有趣的文章后：http: [//www.codeproject.com/Articles/16541/Create-your-Proxy-DLLs-automatically](http://www.codeproject.com/Articles/16541/Create-your-Proxy-DLLs-automatically)

我决定尝试创建一个代理 dll 用于纯粹的研究目的。:-)

我做了所有的步骤`ws2_32.dll`，这是我得到的代码：

```
#include <windows.h>
#include <stdio.h>
#pragma pack(1)

HINSTANCE hLThis = 0;
HINSTANCE hL = 0;
FARPROC p[182] = {0};

BOOL WINAPI DllMain(HINSTANCE hInst,DWORD reason,LPVOID)
{
    //to get indication whether we were loaded  
    FILE* f;
    fopen_s(&f, "C:\\load.txt", "a+");
    fclose(f);

    if (reason == DLL_PROCESS_ATTACH)
    {
        hLThis = hInst;
        hL = LoadLibrary("ws2_32_.dll");
        if (!hL) return false;

        p[0] = GetProcAddress(hL,"FreeAddrInfoEx");
        p[1] = GetProcAddress(hL,"FreeAddrInfoExW");
        p[2] = GetProcAddress(hL,"FreeAddrInfoW");
        p[3] = GetProcAddress(hL,"GetAddrInfoExA");
        p[4] = GetProcAddress(hL,"GetAddrInfoExW");
        p[5] = GetProcAddress(hL,"GetAddrInfoW");
        p[6] = GetProcAddress(hL,"GetNameInfoW");
        p[7] = GetProcAddress(hL,"InetNtopW");
        p[8] = GetProcAddress(hL,"InetPtonW");
        p[9] = GetProcAddress(hL,"SetAddrInfoExA");
        p[10] = GetProcAddress(hL,"SetAddrInfoExW");
        p[11] = GetProcAddress(hL,"WEP");
        p[12] = GetProcAddress(hL,"WPUCompleteOverlappedRequest");
        p[13] = GetProcAddress(hL,"WSAAccept");
        p[14] = GetProcAddress(hL,"WSAAddressToStringA");
        p[15] = GetProcAddress(hL,"WSAAddressToStringW");
        p[16] = GetProcAddress(hL,"WSAAdvertiseProvider");
        p[17] = GetProcAddress(hL,"WSAAsyncGetHostByAddr");
        p[18] = GetProcAddress(hL,"WSAAsyncGetHostByName");
        p[19] = GetProcAddress(hL,"WSAAsyncGetProtoByName");
        p[20] = GetProcAddress(hL,"WSAAsyncGetProtoByNumber");
        p[21] = GetProcAddress(hL,"WSAAsyncGetServByName");
        p[22] = GetProcAddress(hL,"WSAAsyncGetServByPort");
        p[23] = GetProcAddress(hL,"WSAAsyncSelect");
        p[24] = GetProcAddress(hL,"WSACancelAsyncRequest");
        p[25] = GetProcAddress(hL,"WSACancelBlockingCall");
        p[26] = GetProcAddress(hL,"WSACleanup");
        p[27] = GetProcAddress(hL,"WSACloseEvent");
        p[28] = GetProcAddress(hL,"WSAConnect");
        p[29] = GetProcAddress(hL,"WSAConnectByList");
        p[30] = GetProcAddress(hL,"WSAConnectByNameA");
        p[31] = GetProcAddress(hL,"WSAConnectByNameW");
        p[32] = GetProcAddress(hL,"WSACreateEvent");
        p[33] = GetProcAddress(hL,"WSADuplicateSocketA");
        p[34] = GetProcAddress(hL,"WSADuplicateSocketW");
        p[35] = GetProcAddress(hL,"WSAEnumNameSpaceProvidersA");
        p[36] = GetProcAddress(hL,"WSAEnumNameSpaceProvidersExA");
        p[37] = GetProcAddress(hL,"WSAEnumNameSpaceProvidersExW");
        p[38] = GetProcAddress(hL,"WSAEnumNameSpaceProvidersW");
        p[39] = GetProcAddress(hL,"WSAEnumNetworkEvents");
        p[40] = GetProcAddress(hL,"WSAEnumProtocolsA");
        p[41] = GetProcAddress(hL,"WSAEnumProtocolsW");
        p[42] = GetProcAddress(hL,"WSAEventSelect");
        p[43] = GetProcAddress(hL,"WSAGetLastError");
        p[44] = GetProcAddress(hL,"WSAGetOverlappedResult");
        p[45] = GetProcAddress(hL,"WSAGetQOSByName");
        p[46] = GetProcAddress(hL,"WSAGetServiceClassInfoA");
        p[47] = GetProcAddress(hL,"WSAGetServiceClassInfoW");
        p[48] = GetProcAddress(hL,"WSAGetServiceClassNameByClassIdA");
        p[49] = GetProcAddress(hL,"WSAGetServiceClassNameByClassIdW");
        p[50] = GetProcAddress(hL,"WSAHtonl");
        p[51] = GetProcAddress(hL,"WSAHtons");
        p[52] = GetProcAddress(hL,"WSAInstallServiceClassA");
        p[53] = GetProcAddress(hL,"WSAInstallServiceClassW");
        p[54] = GetProcAddress(hL,"WSAIoctl");
        p[55] = GetProcAddress(hL,"WSAIsBlocking");
        p[56] = GetProcAddress(hL,"WSAJoinLeaf");
        p[57] = GetProcAddress(hL,"WSALookupServiceBeginA");
        p[58] = GetProcAddress(hL,"WSALookupServiceBeginW");
        p[59] = GetProcAddress(hL,"WSALookupServiceEnd");
        p[60] = GetProcAddress(hL,"WSALookupServiceNextA");
        p[61] = GetProcAddress(hL,"WSALookupServiceNextW");
        p[62] = GetProcAddress(hL,"WSANSPIoctl");
        p[63] = GetProcAddress(hL,"WSANtohl");
        p[64] = GetProcAddress(hL,"WSANtohs");
        p[65] = GetProcAddress(hL,"WSAPoll");
        p[66] = GetProcAddress(hL,"WSAProviderCompleteAsyncCall");
        p[67] = GetProcAddress(hL,"WSAProviderConfigChange");
        p[68] = GetProcAddress(hL,"WSARecv");
        p[69] = GetProcAddress(hL,"WSARecvDisconnect");
        p[70] = GetProcAddress(hL,"WSARecvFrom");
        p[71] = GetProcAddress(hL,"WSARemoveServiceClass");
        p[72] = GetProcAddress(hL,"WSAResetEvent");
        p[73] = GetProcAddress(hL,"WSASend");
        p[74] = GetProcAddress(hL,"WSASendDisconnect");
        p[75] = GetProcAddress(hL,"WSASendMsg");
        p[76] = GetProcAddress(hL,"WSASendTo");
        p[77] = GetProcAddress(hL,"WSASetBlockingHook");
        p[78] = GetProcAddress(hL,"WSASetEvent");
        p[79] = GetProcAddress(hL,"WSASetLastError");
        p[80] = GetProcAddress(hL,"WSASetServiceA");
        p[81] = GetProcAddress(hL,"WSASetServiceW");
        p[82] = GetProcAddress(hL,"WSASocketA");
        p[83] = GetProcAddress(hL,"WSASocketW");
        p[84] = GetProcAddress(hL,"WSAStartup");
        p[85] = GetProcAddress(hL,"WSAStringToAddressA");
        p[86] = GetProcAddress(hL,"WSAStringToAddressW");
        p[87] = GetProcAddress(hL,"WSAUnadvertiseProvider");
        p[88] = GetProcAddress(hL,"WSAUnhookBlockingHook");
        p[89] = GetProcAddress(hL,"WSAWaitForMultipleEvents");
        p[90] = GetProcAddress(hL,"WSApSetPostRoutine");
        p[91] = GetProcAddress(hL,"WSCDeinstallProvider");
        p[92] = GetProcAddress(hL,"WSCDeinstallProvider32");
        p[93] = GetProcAddress(hL,"WSCEnableNSProvider");
        p[94] = GetProcAddress(hL,"WSCEnableNSProvider32");
        p[95] = GetProcAddress(hL,"WSCEnumNameSpaceProviders32");
        p[96] = GetProcAddress(hL,"WSCEnumNameSpaceProvidersEx32");
        p[97] = GetProcAddress(hL,"WSCEnumProtocols");
        p[98] = GetProcAddress(hL,"WSCEnumProtocols32");
        p[99] = GetProcAddress(hL,"WSCGetApplicationCategory");
        p[100] = GetProcAddress(hL,"WSCGetProviderInfo");
        p[101] = GetProcAddress(hL,"WSCGetProviderInfo32");
        p[102] = GetProcAddress(hL,"WSCGetProviderPath");
        p[103] = GetProcAddress(hL,"WSCGetProviderPath32");
        p[104] = GetProcAddress(hL,"WSCInstallNameSpace");
        p[105] = GetProcAddress(hL,"WSCInstallNameSpace32");
        p[106] = GetProcAddress(hL,"WSCInstallNameSpaceEx");
        p[107] = GetProcAddress(hL,"WSCInstallNameSpaceEx32");
        p[108] = GetProcAddress(hL,"WSCInstallProvider");
        p[109] = GetProcAddress(hL,"WSCInstallProvider64_32");
        p[110] = GetProcAddress(hL,"WSCInstallProviderAndChains64_32");
        p[111] = GetProcAddress(hL,"WSCSetApplicationCategory");
        p[112] = GetProcAddress(hL,"WSCSetProviderInfo");
        p[113] = GetProcAddress(hL,"WSCSetProviderInfo32");
        p[114] = GetProcAddress(hL,"WSCUnInstallNameSpace");
        p[115] = GetProcAddress(hL,"WSCUnInstallNameSpace32");
        p[116] = GetProcAddress(hL,"WSCUpdateProvider");
        p[117] = GetProcAddress(hL,"WSCUpdateProvider32");
        p[118] = GetProcAddress(hL,"WSCWriteNameSpaceOrder");
        p[119] = GetProcAddress(hL,"WSCWriteNameSpaceOrder32");
        p[120] = GetProcAddress(hL,"WSCWriteProviderOrder");
        p[121] = GetProcAddress(hL,"WSCWriteProviderOrder32");
        p[122] = GetProcAddress(hL,"WahCloseApcHelper");
        p[123] = GetProcAddress(hL,"WahCloseHandleHelper");
        p[124] = GetProcAddress(hL,"WahCloseNotificationHandleHelper");
        p[125] = GetProcAddress(hL,"WahCloseSocketHandle");
        p[126] = GetProcAddress(hL,"WahCloseThread");
        p[127] = GetProcAddress(hL,"WahCompleteRequest");
        p[128] = GetProcAddress(hL,"WahCreateHandleContextTable");
        p[129] = GetProcAddress(hL,"WahCreateNotificationHandle");
        p[130] = GetProcAddress(hL,"WahCreateSocketHandle");
        p[131] = GetProcAddress(hL,"WahDestroyHandleContextTable");
        p[132] = GetProcAddress(hL,"WahDisableNonIFSHandleSupport");
        p[133] = GetProcAddress(hL,"WahEnableNonIFSHandleSupport");
        p[134] = GetProcAddress(hL,"WahEnumerateHandleContexts");
        p[135] = GetProcAddress(hL,"WahInsertHandleContext");
        p[136] = GetProcAddress(hL,"WahNotifyAllProcesses");
        p[137] = GetProcAddress(hL,"WahOpenApcHelper");
        p[138] = GetProcAddress(hL,"WahOpenCurrentThread");
        p[139] = GetProcAddress(hL,"WahOpenHandleHelper");
        p[140] = GetProcAddress(hL,"WahOpenNotificationHandleHelper");
        p[141] = GetProcAddress(hL,"WahQueueUserApc");
        p[142] = GetProcAddress(hL,"WahReferenceContextByHandle");
        p[143] = GetProcAddress(hL,"WahRemoveHandleContext");
        p[144] = GetProcAddress(hL,"WahWaitForNotification");
        p[145] = GetProcAddress(hL,"WahWriteLSPEvent");
        p[146] = GetProcAddress(hL,"__WSAFDIsSet");
        p[147] = GetProcAddress(hL,"accept");
        p[148] = GetProcAddress(hL,"bind");
        p[149] = GetProcAddress(hL,"closesocket");
        p[150] = GetProcAddress(hL,"connect");
        p[151] = GetProcAddress(hL,"freeaddrinfo");
        p[152] = GetProcAddress(hL,"getaddrinfo");
        p[153] = GetProcAddress(hL,"gethostbyaddr");
        p[154] = GetProcAddress(hL,"gethostbyname");
        p[155] = GetProcAddress(hL,"gethostname");
        p[156] = GetProcAddress(hL,"getnameinfo");
        p[157] = GetProcAddress(hL,"getpeername");
        p[158] = GetProcAddress(hL,"getprotobyname");
        p[159] = GetProcAddress(hL,"getprotobynumber");
        p[160] = GetProcAddress(hL,"getservbyname");
        p[161] = GetProcAddress(hL,"getservbyport");
        p[162] = GetProcAddress(hL,"getsockname");
        p[163] = GetProcAddress(hL,"getsockopt");
        p[164] = GetProcAddress(hL,"htonl");
        p[165] = GetProcAddress(hL,"htons");
        p[166] = GetProcAddress(hL,"inet_addr");
        p[167] = GetProcAddress(hL,"inet_ntoa");
        p[168] = GetProcAddress(hL,"inet_ntop");
        p[169] = GetProcAddress(hL,"inet_pton");
        p[170] = GetProcAddress(hL,"ioctlsocket");
        p[171] = GetProcAddress(hL,"listen");
        p[172] = GetProcAddress(hL,"ntohl");
        p[173] = GetProcAddress(hL,"ntohs");
        p[174] = GetProcAddress(hL,"recv");
        p[175] = GetProcAddress(hL,"recvfrom");
        p[176] = GetProcAddress(hL,"select");
        p[177] = GetProcAddress(hL,"send");
        p[178] = GetProcAddress(hL,"sendto");
        p[179] = GetProcAddress(hL,"setsockopt");
        p[180] = GetProcAddress(hL,"shutdown");
        p[181] = GetProcAddress(hL,"socket");
    }
    if (reason == DLL_PROCESS_DETACH)
    {
        FreeLibrary(hL);
    }

    return 1;
}

// FreeAddrInfoEx
extern "C" __declspec(naked) void __stdcall __E__0__()
{
    __asm
    {
        jmp p[0*4];
    }
}

// FreeAddrInfoExW
extern "C" __declspec(naked) void __stdcall __E__1__()
{
    __asm
    {
        jmp p[1*4];
    }
}

// FreeAddrInfoW
extern "C" __declspec(naked) void __stdcall __E__2__()
{
    __asm
    {
        jmp p[2*4];
    }
}

// GetAddrInfoExA
extern "C" __declspec(naked) void __stdcall __E__3__()
{
    __asm
    {
        jmp p[3*4];
    }
}

// GetAddrInfoExW
extern "C" __declspec(naked) void __stdcall __E__4__()
{
    __asm
    {
        jmp p[4*4];
    }
}
... 
```

我已经编译了它（使用`.def`文件）并得到了一个新`proxy.dll`文件。:-)

到目前为止，一切都很好。现在，在我的 VBox win7 x64 上，我已将原始文件重命名`ws2_32.dll`为`ws2_32_.dll`，放入`proxy.dll`其中`C:\\Windows\\System32\\`并将其重命名为`ws2_32.dll`. 由于 premmisions 问题，我使用 live-cd linux 完成了所有这些工作。

正如您所看到的代理负载`ws2_32_.dll`，所以我们应该没问题。但是当系统从引导返回时，每个程序使用都会`ws2_32.dll`引发错误，并且`C:\\load.txt`永远不会创建文件。

我不知道文章中的那个人做了什么让它起作用。我在谷歌上读到，您需要将其放置（并重命名）与`proxy.dll`您要运行代理 dll 的程序相同的目录中，但我正在寻找一个全局解决方案。

也许这是一个校验和问题？我读到微软在它的系统 PE 上使用了一些秘密校验和。

谢谢，gfgqtmakia。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:10:49.283

移动到 32 位，现在它正在工作。

还：

*   检查您的代理的依赖关系，它可能需要额外`.dll`的 s 才能运行。（[依赖步行者](http://www.dependencywalker.com/)）
*   使用[本指南](http://www.intowindows.com/how-to-take-ownership-of-a-folderfile-in-windows-7/)更换系统的`.dll`. 这比重新启动到 linux 更快。

# jquery - 为什么工具提示在 jquery 中不起作用

> ID：13475995
> 
> 赞同：0
> 
> 时间：2012-11-20T15:03:10.487
> 
> 标签：jquery, html, css

工具提示未显示。只有通常显示在浏览器中的标题显示...我该怎么办？

这是我的代码。

html代码：

```
<form action="/validate.php" method="post" id="myform">
<table width="100%" border="1"><tr><td style="max-width:150px;">
<span id="l1" class="label">Username:</span></td><td 
    style="min-width:500px;"><input type="text" name="username" id="username" 

class="input" title="Username must contain only alphabets and numbers"/>
</td></tr><tr><td>
<span class="label" id="l2">Password:</span></td><td><input 

type="password" name="pass" id="pass" class="input"/>
</td></tr><tr><td>
<span class="label" id="l3">Repeat password:</span></td><td><input 

type="password" name="rep-pass" id="rep-pass" class="input"/>
</td></tr></table>
</form> 
```

CSS：

```
.tooltip {
    background-color:#000;
    border:1px solid #fff;
    padding:10px 15px;
    width:200px;
    display:none;
    color:#fff;
    text-align:left;
    font-size:12px;
    -moz-box-shadow:0 0 10px #000;
    -webkit-box-shadow:0 0 10px #000;
} 
```

查询：

```
$(document).ready(function() {
$("#myform :input").tooltip({
position: "center right",
offset: [-2, 10],
effect: "fade",
opacity: 0.7
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:14:32.380

尝试更新您的 jQuery UI 库。我可能错了，但您的 1.8.2 版库应该是您的 jQuery 库。jQuery UI 在这个数字之上已经有一段时间了。即便如此，您必须运行 jQuery UI 1.9.0 版才能使用菜单、工具提示等新功能。

[下载 jQuery UI 1.9.0](http://jqueryui.com)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T17:10:20.847

As War10ck stated, this is not present in the version that you are using. You choices would be to either update it, or use a different library. I am a big fan of Twitter Bootstrap and the tooltips it offers, just my two cents :).

# c# - lambda 表达式是否使用反射？

> ID：13475997
> 
> 赞同：3
> 
> 时间：2012-11-20T15:03:19.997
> 
> 标签：c#, reflection, lambda

为了确保我理解有人可以确认 lambda 表达式使用反射吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:04:09.587

他们可以，但不是必须的。如果将它们编译为委托，则不需要反射：但是，如果将它们编译为 ab 表达式树，则表达式树**绝对**是基于反射的。表达式树的某些部分可以直接从元数据标记 (ldtoken) 组装 - 特别是方法（包括运算符和 getter/setter 以及类型） - 但其他部分**不能**。这包括属性（`PropertyInfo`不能通过令牌加载） - 因此编译的 lambda 的 IL 可以显式包含`GetProperty`等。

但是无论它是如何加载的（令牌或反射），表达式树**都是**用反射（`MemberInfo`等）表示的。这可能稍后会被编译，或者可能由提供者分析。

为了提高性能，表达式编译器可能会缓存部分或全部表达式树，并重新使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T15:07:59.597

编译器将 Lambda 表达式转换为匿名函数或表达式树。由于反射只能在运行时执行，因此在考虑编译器在任何一种情况下对它们做了什么时，它根本不会出现。

在运行时，lambda 表达式可能会导致在非常特定的情况下使用反射：

对于匿名函数：如果您编写了一个显式反映某事物的匿名函数，那么 lambda 将在调用时执行该反射。这当然与您从“正确”方法中进行反射一样。

对于表达式树（即[`Expression<TDelegate>`](http://msdn.microsoft.com/en-us/library/bb335710.aspx)some的类型值`TDelegate`）：在运行时使用它们`IQueryable`可能会导致[查询提供程序](http://msdn.microsoft.com/en-us/library/bb546158.aspx)使用反射。例如，假设您这样做：

```
var user = new User { Id = 42 };
var posts = Queryable.Posts.Where(p => p.UserId == user.Id); 
```

何时`posts`将要具体化，查询提供者看到它必须找到那些与变量的`UserId`相等的帖子。由于该 id 在运行时具有特定的已知值，因此查询提供程序需要将其从. 它可能决定这样做的一种方法是通过反思。`Id``user``user`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T15:06:33.520

lambda 表达式只是用于创建委托的编译器语法糖。这里没有使用反射。

# vb.net - 在MVC3中，如何在vb.Net中设置模型的可为空属性？

> ID：13475999
> 
> 赞同：1
> 
> 时间：2012-11-20T15:03:25.850
> 
> 标签：vb.net, properties, c#-to-vb.net

在带有 C# 的 MVC3 中，可为空的模型的属性定义为

```
public int? MyProperty { get; set; } 
```

但是我怎样才能用 vb.Net 语言翻译它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:10:33.083

`Public Property MyProperty As Integer?`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T15:07:18.680

```
public property MyProperty As Nullable(Of Integer) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-26T16:33:57.783

为了对此进行扩展，有 3 种公认的方式：

```
Dim ridesBusToWork1? As Boolean
Dim ridesBusToWork2 As Boolean?
Dim ridesBusToWork3 As Nullable(Of Boolean) 
```

更多信息在这里：[https ://docs.microsoft.com/en-us/dotnet/visual-basic/programming-guide/language-features/data-types/nullable-value-types](https://docs.microsoft.com/en-us/dotnet/visual-basic/programming-guide/language-features/data-types/nullable-value-types)