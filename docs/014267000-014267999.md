# StackOverflow 问答 14267000-14267999

# asp.net - ToolkitScriptManager 不是已知元素

> ID：14267002
> 
> 赞同：1
> 
> 时间：2013-01-10T20:48:19.373
> 
> 标签：asp.net, ajax, c#-4.0, ajaxcontroltoolkit

我有一个使用 AJAX Accordion Pane 的网站。为了充分使用`RequireOpenedPane="False"`我需要将其`ToolkitScriptManager`添加到站点。

我明白这一切，但有一个问题。Visual Studio 2012 说`ToolkitScriptManager is not a known element`

我有

`<add tagPrefix="asp" assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" />`

在 web.config 文件中，以及

`<asp:Accordion ID="Accordion1" runat="server" CssClass="accordion" SelectedIndex="-1" HeaderCssClass="accordionHeader" HeaderSelectedCssClass="accordionHeaderSelected" ContentCssClass="accordionContent" RequireOpenedPane="False" FramesPerSecond="25" Width="820px" >`

工作没有错误。但

`<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"></asp:ToolkitScriptManager>`

才不是。

有趣的是，如果我`ToolkitScriptManager`从页面中删除 ，它将加载 Accordion，但是，并非所有功能都可以正常工作（例如，单击手风琴标题不会选择标题，它只是扩展标题，但确实不显示为“已选择”）。

该页面也有一个 MasterPage，ToolkitScriptManager 位于正文的 ContentPlaceHolder 内。（它实际上就在 Accordion 控件的上方）。为什么会这样，我该如何解决？

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="page.aspx.cs" Inherits="page" %>

 <asp:Content ID="Content1" ContentPlaceHolderID="HeaderContent" runat="server">
 </asp:Content>
 <asp:Content ID="Content2" ContentPlaceHolderID="MenuContent" runat="server">
 </asp:Content>
 <asp:Content ID="Content3" ContentPlaceHolderID="MainContent" runat="server">
<h1 align="center">Classes</h1>
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"></asp:ToolkitScriptManager>
<asp:Accordion ID="Accordion1" runat="server" CssClass="accordion" SelectedIndex="-1" HeaderCssClass="accordionHeader" HeaderSelectedCssClass="accordionHeaderSelected" ContentCssClass="accordionContent" RequireOpenedPane="False" FramesPerSecond="25" Width="820px" >
    <Panes>
        <asp:AccordionPane runat="server" ID="AccordionPane0">` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T22:06:45.417

找到解决方案：

显然，在 Visual Studio 2010 上使用 NuGet 安装程序获得的 AjaxControlToolkit 没有 ToolkitScriptManager。我必须删除从 NuGet 安装的 DLL 并安装我自己的 DLL，其中确实包含 ToolkitScriptManager。

我不确定为什么 NuGet 版本不包含 ToolkitScriptManager。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T09:16:39.920

在您的解决方案 user1760784 之上，其他人可能还需要先设置 IIS 并将他们的应用程序导入其中。一旦应用程序在 IIS 中完全设置，然后尝试运行它。它应该工作。完成此过程后，我的问题得到了解决。请注意，测试 IIS 和实时/生产 IIS 都是如此。尽管我们都知道测试现场盒总是更安全。

为什么它只在 IIS 上测试时才解决？我真的不知道。但是我相信它可能是因为 http/browser 问题。也许你更聪明的人可以让我们知道这一点。

享受！

# css - CSS：如何让背景和边框溢出？

> ID：14267009
> 
> 赞同：3
> 
> 时间：2013-01-10T20:48:50.923
> 
> 标签：css

在我的网页中，我有用 CSS 固定的顶部和底部部分，`position: fixed;`

在顶部和底部之间，我有一个绝对定位的页面元素 - 一个 div - 这是我的大部分内容出现的地方。当页面元素的内容太大时，我希望它在 y 轴上溢出。在这种情况下，我希望滚动条出现**在屏幕的最右侧**（不是页面元素），所以我 `overflow-y: scroll;`在 body 元素上。（有关示例，请参见 Facebook）。

现在，除了页面元素的边框和背景之外，这一切正常。最初在视图中的内容既有边框又有背景，但是当我向下滚动到溢出区域时，它都没有。

我尝试使用绝对 ( `bottom: 105px`) 和相对 ( `height: 100%;`) 方法设置页面的高度，但都不起作用。我还尝试用 . 结束页面元素内的内容`<p style="clear: both"></p>`。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T01:01:11.590

我不太确定你的边框想要什么。[**此小提琴**](http://jsfiddle.net/ebNKP/7/)仅使用以下代码[在内容的顶部和底部有边框：](http://jsfiddle.net/ebNKP/7/)

**HTML**

```
<div class="top">Top</div>
<div class="middle">
  <div class="content"></div>
</div>
<div class="bottom">Bottom</div> 
```

**CSS**

```
.top,
.bottom {
  position: fixed;
  height: 100px;
  top: 0;
  left: 0;
  right: 0;
  background-color: red;
  z-index: 1;
}

.bottom {
  bottom: 0;
  top: auto;
  background-color: blue;
}

.middle {
  position: absolute;
  top: 100px;
  left: 0;
  right: 0;
  bottom: 100px;
}

.content {
  width: 100%;
  height: 1000px;
  background-color: yellow;
  border: 10px solid black;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  margin-bottom: 100px;
} 
```

[](http://jsfiddle.net/ebNKP/9/)**这段代码（与上面的 html 相同）[**在这个小提琴**](http://jsfiddle.net/ebNKP/9/)[周围不断有边框：](http://jsfiddle.net/ebNKP/9/)**

 ****CSS**

```
.top,
.bottom {
  position: fixed;
  height: 100px;
  top: 0;
  left: 0;
  right: 0;
  background-color: red;
  border-bottom: 10px solid black;
  z-index: 1;
}

.bottom {
  bottom: 0;
  top: auto;
  background-color: blue;
  border-top: 10px solid black;
  border-bottom: 0;
}

.middle {
  position: absolute;
  top: 110px;
  left: 0;
  right: 0;
  bottom: 110px;
}

.content {
  width: 100%;
  height: 1000px;
  background-color: yellow;
  border-right: 10px solid black;
  border-left: 10px solid black;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  margin-bottom: 110px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:03:20.157

问题很可能是`height: 100%;`实际问题。当您填充背景颜色时，它会以 100% 的方式填充它（可见区域）。问题是，由于溢出*超过*100%，背景颜色不会粘住。

不要使用`height:100%`，而是放置`min-height`任何你想要的绝对定位元素。这样，当`background-color`填充它时，它会填充整个东西，因为溢出总是会继续高于那个最小高度。

编辑：我意识到答案的一大块词很烦人。更简洁：

你有过：

```
.middle {height:100%;} 
```

摆脱它并将其更改为：

```
.middle {min-height:100%;} 
```**

# ssl - 如何为测试目的创建自签名 SSL 证书？

> ID：14267010
> 
> 赞同：76
> 
> 时间：2013-01-10T20:48:52.410
> 
> 标签：ssl, https, ssl-certificate

如何轻松创建自签名 SSL 证书以进行测试？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-01-10T20:48:52.410

您可以通过 openssl 执行此操作：

1.  安装 openssl 包（如果您使用的是 Windows，请[在此处](https://www.openssl.org/related/binaries.html)下载二进制文件）。

2.  生成私钥：`openssl genrsa 2048 > private.pem`

3.  生成自签名证书：`openssl req -x509 -days 1000 -new -key private.pem -out public.pem`

4.  如果需要，创建 PFX：`openssl pkcs12 -export -in public.pem -inkey private.pem -out mycert.pfx`

# php - PHP合并图像的透明度不起作用

> ID：14267013
> 
> 赞同：0
> 
> 时间：2013-01-10T20:48:56.143
> 
> 标签：php, image, png, gd

我正在使用 imagecopymerge 创建图像，但覆盖在顶部的图像是 PNG，但透明部分是纯白色的。如何启用透明度？

```
$image = imagecreatefromjpeg($this->getFile());

    $size = getimagesize($this->getFile());  

    $watermark = imagecreatefrompng('../watermark.png');
    $watermark_width = imagesx($watermark);  
    $watermark_height = imagesy($watermark);

    $dest_x = $size[0] - $watermark_width - 10;  

    $dest_y = $size[1] - $watermark_height - 5; 

    //die($watermark_width);

    $thumb_image = imagecreatetruecolor($this->getThumbWidth(), $this->getThumbHeight());

    imagealphablending($thumb_image,true);
    imagealphablending($image,true);

    imagecopymerge($image, $watermark, $dest_x, $dest_y, 0, 0, $watermark_width, $watermark_height, 100);  

    imagecopyresampled( $thumb_image, $image, 0, 0, 0, 0, $this->getThumbResizeWidth(), $this->getThumbResizeHeight(), $this->getWidth(), $this->getHeight() );
    imagejpeg( $thumb_image, $this->getThumbDestination(), $this->getThumbQuality() );

    imagedestroy($thumb_image);
    imagedestroy($image); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:07:31.567

所以我终于找到了解决方案。它正在使用`imagecopy()`.

这是将我推向正确方向的[文章。](http://php.net/manual/en/image.examples-watermark.php)

这花了好几个小时的研究！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:50:27.497

采用`imagecolortransparent()`

[在这里](http://php.net/manual/en/function.imagecolortransparent.php)阅读更多

编辑：更好的解决方案在这里：

[https://stackoverflow.com/a/313103/1533203](https://stackoverflow.com/a/313103/1533203)

# java - StringTemplate 4 空指针异常

> ID：14267017
> 
> 赞同：0
> 
> 时间：2013-01-10T20:49:04.337
> 
> 标签：java, stringtemplate-4

我有 NullPointerException

```
java.lang.NullPointerException
at org.stringtemplate.v4.STGroup.loadTemplateFile(STGroup.java:663)
at org.stringtemplate.v4.STGroupDir.loadTemplateFile(STGroupDir.java:176)
at org.stringtemplate.v4.STGroupDir.load(STGroupDir.java:136)
at org.stringtemplate.v4.STGroup.lookupTemplate(STGroup.java:237)
at org.stringtemplate.v4.STGroup.getInstanceOf(STGroup.java:172) 
```

和控制台日志：“模板 11:82: '(' 对我来说完全是一个惊喜”对于我的模板：

```
matrix(type, id, variable, path) ::= <<
new Runnable() {
    private <type> variable;
    private Runnable init (<type> var)
    {
        variable = var; return this;
    }
    @Override
    public void run() {
        int i=0, j=0; String matrix = "{";
        for (i = 0; i < variable.getRowDimension(); i++)
        {
            matrix += "{";
            for (j = 0; j < variable.getColumnDimension(); j++)
            {
                matrix += variable.get(i,j);
                if (j != variable.getColumnDimension() - 1)
                    matrix += ",";
                else 
                    matrix += "}";
            }
            if (i != variable.getRowDimension() - 1)
                matrix += ",";
        }
        matrix += "}";
        File file = new File("<path>");
        try {
            FileUtils.writeStringToFile(file, "<id>"+matrix);
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }
    }
}.init(<variable>).run(); 
```

>>

我想，'for-statement' 有问题，因为在它被删除后，一切正常。

更新：在文档中找到解决方案 - [http://www.antlr.org/wiki/display/ST4/StringTemplate+cheat+sheet](http://www.antlr.org/wiki/display/ST4/StringTemplate+cheat+sheet) [http://www.antlr.org/wiki/display/ST/How+to+Allow+双+角+括号+as+a+字符串](http://www.antlr.org/wiki/display/ST/How+to+Allow+Double+Angle+Brackets+as+a+String)

我应该使用 '\<' 来防止 '<' 启动属性表达式

# mysql - MySQL 确定性迁移脚本

> ID：14267018
> 
> 赞同：0
> 
> 时间：2013-01-10T20:49:10.387
> 
> 标签：mysql, sql, stored-procedures, database-versioning

我目前正在寻找一种方法让我的数据库处于版本控制之下。为此，我希望拥有只能运行一次的确定性过程（具有相应的撤消）。

我在构建第一个充满小错误的脚本时遇到问题。

以下是 3 个主要部分：

执行查询的条件（如果字段不存在）

```
SELECT *
FROM information_schema.COLUMNS
WHERE TABLE_SCHEMA = 'my_database'
  AND TABLE_NAME = 'my_table'
  AND COLUMN_NAME = 'full_name' 
```

表改：

```
ALTER TABLE
  my_table
  ADD full_name VARCHAR(255) NOT NULL; 
```

最后是数据迁移

```
UPDATE candidat dest JOIN candidat src ON dest.id = src.id
      SET dest.full_name = CONCAT(src.first_name, ' ', IF(src.middle_name='', '', CONCAT(src.middle_name, ' ')), src.last_name); 
```

我正在尝试以这种形式进行这项工作：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS migration_001;

CREATE PROCEDURE migration_001()

BEGIN
  IF NOT EXISTS (
    SELECT *
    FROM information_schema.COLUMNS
    WHERE TABLE_SCHEMA = 'my_database'
      AND TABLE_NAME = 'my_table'
      AND COLUMN_NAME = 'full_name') 
   THEN

     ALTER TABLE
      my_table
      ADD full_name VARCHAR(255) NOT NULL;

    UPDATE candidat dest JOIN candidat src ON dest.id = src.id
          SET dest.full_name = CONCAT(src.first_name, ' ', IF(src.middle_name='', '', CONCAT(src.middle_name, ' ')), src.last_name);
  END IF
END;
$$ 
```

我得到的当前错误：

```
1064 : ...  right syntax to use near 'CREATE PROCEDURE migration_001() BEGIN IF NOT EXISTS ( SELECT * ' at line 3 
```

谁能指出我解决这个问题的正确方向？

顺便说一句，我正在使用`5.5.16-log - MySQL Community Server`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:36:26.150

改变顺序

```
DELIMITER $$ 
```

和

```
DROP PROCEDURE IF EXISTS migration_001; 
```

当前，您使用错误的分隔符来删除该过程。

# adobe - ExtendScript 的 UnitValue

> ID：14267019
> 
> 赞同：3
> 
> 时间：2013-01-10T20:49:11.437
> 
> 标签：adobe, extendscript

因此，在我的一生中，我找不到 ExtendScript 的 UnitValue 对象的组件的明确细分。我发现的每个来源都与 Adob​​e 有关，但没有解释。我真的很想有一个完整的参考，但如果没有人能找到，我至少需要回答一些关于它的问题。

首先，它的构造函数是什么？
*        我已经看到`UnitValue(10,'px')`这是有道理的，但我也看到`UnitValue(20,20)`*
了第二，你怎么能从一个单位转换为另一个单位？
第三，如何找到它的值和单位？
        *我想我已经看到`uv.value`但没有得到单位*

最后，正如我的标签所示，这当然是针对 Adob​​e 的，因为我从未见过或听说过任何其他使用 ExtendScript 的程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:58:36.050

[UnitValue](http://estk.aenhancers.com/8%20-%20ExtendScript%20Tools%20and%20Features/specifying-measurement-values.html#unitvalue-object)记录在[Adob​​e JavaScript 工具指南](http://estk.aenhancers.com/index.html)中。

特别是，您创建一个带有 的对象`v = new UnitValue(number, unit)`，其中`unit`是一个字符串值，如`in`（英寸）、`mm`（毫米）、`pt`（点）、`px`（像素）等。

要将 UnitValue 转换为实际数字，请使用该`as`方法，例如`v.as("cm")`转换`v`为厘米。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T00:41:56.543

好吧，其他人似乎都不知道，我终于弄明白了一些，所以我想我会自己回答：

[<This site>](http://jongware.mit.edu/Js/pc_UnitValue.html)作为文档有点帮助，但我认为 Adob​​e 的功能与它略有不同。

UnitValue 的主要构造函数是：

```
 UnitValue(numericalvalue,unit) 
```

我还看到了一种接受一个字符串的替代方法：

```
 UnitValue("42 in") 
```

对于转换，UnitValue 带有一个方便的`as`方法，该方法接受要转换为的单位（作为字符串），然后以该单位返回其测量值，即：

```
 UnitValue(5,'ft').as('in') === 60 
```

（注意，根据我找到的参考资料，我相信该`as`方法应该在转换为指示的单位后返回 UnitValue 实例；然而，Adobe 的实现似乎只是返回值 - 因此我使用类型相等运算符上面展示了 Adob​​e 的方法）为了获得数值和测量单位，存在以下两个属性：

```
 UnitValue.value  // number: the numerical value
    UnitValue.type  // string: the unit of measurement 
```

这是我通过研究所能找到的。*如果有人有更好的答案，请将其发布，我可能会接受。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-19T09:08:14.833

我真正感兴趣的是`baseValue`允许我们更改转换参考框架的属性。例如：

```
var startUnit = UnitValue(500, "px");

startUnit.baseValue = UnitValue(1 / 72, "in"); // from what I can tell this is the default baseUnit value
$.writeln(v.as("in")); // returns 6.94444444444444 which is what 500px @ 72 dpi is as expressed in inches

startUnit.baseValue = UnitValue(1 / 300, "in"); // set to 300dpi
$.writeln(v.as("in")); // returns 1.66666666666667 which is what 500px @ 300 dpi is as expressed in inches 
```

`UnitValue(1/72, "in")`我认为即使 app.preferences.rulerUnits 设置为任何其他类型的测量值，默认的 baseValue 也总是如此，但我并没有真正深入研究它

# blackberry - ZIP 文件中捆绑子文件夹的正确名称格式？

> ID：14267020
> 
> 赞同：0
> 
> 时间：2013-01-10T20:49:19.147
> 
> 标签：blackberry, release, blackberry-playbook, appworld

我是BB开发的新手。

我需要为在供应商门户上发布应用程序制作一个 ZIP 文件。我正在阅读：[https ://developer.blackberry.com/devzone/appworld/preparing_your_zip_file.html#pde1350481571678](https://developer.blackberry.com/devzone/appworld/preparing_your_zip_file.html#pde1350481571678)

我无法理解 ZIP 文件中 Bundle 子文件夹的名称格式...

> 捆绑包子文件夹的名称指定捆绑包支持的操作系统的最早版本。名称必须使用以下格式：bundle_name_x.xxx，其中 xxxx 代表 BlackBerry Device Software 或 BlackBerry PlayBook OS 的版本。

我的应用程序必须面向 BlackBerry PlayBook OS 2.0（或更高版本）。那么我应该把什么作为子文件夹的名称？黑莓_PlayBook_OS_2.0.0.0 ???

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:54:11.063

正确，使用 BlackBerry_PlayBook_OS_2.0.0.0 来定位 PlayBook OS 2.0 或更高版本。

采用这种格式的原因是，作为供应商的您可以很好地控制您的目标平台。假设 PlayBook OS 2.0.0.1 中存在影响您的应用的操作系统错误。

如果您想确保只有支持操作系统的用户才能下载您的应用程序，您可以创建一个名为 BlackBerry_PlayBook_OS_2.0.0.2 的文件夹

# java - Android LinearLayout 获取屏幕上的视图/行

> ID：14267021
> 
> 赞同：0
> 
> 时间：2013-01-10T20:49:21.030
> 
> 标签：java, android

假设我有一个`LinearLayout`垂直设置，并且我添加了 100 个视图，每个视图的高度为 50dp。用户将在其上上下滚动和翻动`LinearLayout`。

我需要知道屏幕上视图的索引号。即，如果他们飞到中间并停下来，并在他们的屏幕上看到 5 个项目，我需要推断 50-55。

```
 <LinearLayout
                android:orientation="vertical"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:id="@id/listing_main">
            </LinearLayout> 
```

我尝试了很多方法来推断当前的可见视图——比如获取`scrollY`我的项目的位置和高度……似乎没有奏效。

`view.getScrollY()`与其他滚动测量相比，似乎完全任意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:56:50.930

如果将它们放在列表中，则可以使用`getFirstVisiblePosition()`and`getLastVisiblePosition()`并使用它们从头到尾获取所有这些。

[http://developer.android.com/reference/android/widget/AdapterView.html](http://developer.android.com/reference/android/widget/AdapterView.html)

# ios - 自定义 UIView 不显示

> ID：14267027
> 
> 赞同：0
> 
> 时间：2013-01-10T20:49:40.510
> 
> 标签：ios, uiview, uiviewcontroller, uistoryboard

我在 IB 中创建了一个带有标签的自定义 UIView。（我的观点）

我将 UIView 从 Objects 窗口拖到我的 Initial View -> View Controller ( Storyboard) 上。

我将 UiView（我刚刚拖动）设置为我的自定义视图“MyView”。

当它运行或处于设计模式时，我无法在自定义视图或情节提要中看到我的标签。

![在此处输入图像描述](../Images/fd4442adb45c422107167a44e06f2f60.png)

![在此处输入图像描述](../Images/6f5e8d7667d25a36f92fe0eac0c34782.png)

![在此处输入图像描述](../Images/2b17733f80387f2ffb53d4acc539d22a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:33:48.637

如果要将其添加到情节提要中的控制器中，则不应在 xib 中创建该自定义视图（您可以这样做，但必须在代码中添加自定义视图）。只需将视图添加到视图控制器，将标签添加到视图，然后将该视图的类更改为 MyView，所有这些都在情节提要中。

# c# - DateTime 比较不包括最近的日期

> ID：14267031
> 
> 赞同：4
> 
> 时间：2013-01-10T20:49:44.507
> 
> 标签：c#, datetime, comparison

我试图了解为什么以下功能不起作用。

```
public IEnumerable<LogFile> GetLogs(string directory, DateTime start, DateTime end)
{
    DirectoryInfo di = new DirectoryInfo(directory);
    return di.GetFiles("*debug.log").Where(f => f.LastWriteTime > start && f.LastWriteTime <= end).Select(f => new LogFile(f.FullName));
} 
```

为什么第二次比较`(f.LastWriteTime <= end)`省略了指定的结束日期？

第一个比较`(f.LastWriteTime > start)`确实包括指定的开始日期。

例如，如果我将开始日期设置为 2013 年 1 月 4 日，将结束日期设置为 2013 年 1 月 8 日，则函数返回具有以下日期的文件：

2013 年 1 月 4 日、2013 年 1 月 5 日、2013 年 1 月 6 日、2013 年 1 月 7 日

尽管在代码中使用了 <=，但它不包括 2013 年 1 月 8 日。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T20:51:43.080

您正在处理日期和时间值，而不仅仅是日期值。

`1/6/2013 4:30`不等于`1/6/2013 12:00`，尽管日期相同。

您可以使用`Date`每个对象的属性来获取时间始终为午夜的`DateTime`新对象。`DateTime`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T20:56:03.130

DateTime 也包含（顾名思义）时间组件。所以你的比较实际上是：

```
f.LastWriteTime > start && f.LastWriteTime <= end

f.LastWriteTime > 1/4/2013 00:00:00 && f.LastWriteTime <= 1/8/2013 00:00:00 
```

最后的文件日期可能类似于 1/8/2013 13:45:12 所以

```
1/8/2013 13:45:12 <= 1/8/2013 00:00:00 
```

是假的。由于时间分量，结果中包含第一个日期：

```
1/4/2013 00:00:00 > 1/4/2013 13:45:12 
```

是真的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:56:39.490

但是当与日期时间比较时，不包括最后一秒的值：时间 <= 1/14/2013 1:26:42 am，它包括 1/14/2013 1:26:41 AM ？

# android - 所有安卓设备都有不可移动的外部存储吗？

> ID：14267032
> 
> 赞同：4
> 
> 时间：2013-01-10T20:49:46.610
> 
> 标签：android, android-sdcard

此处的此[链接](http://developer.android.com/training/basics/data-storage/files.html#InternalVsExternalStorage)描述了有关不可移动外部存储的信息。所有的安卓设备都有不可移动的外部存储吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:51:04.127

不，这完全取决于制造商。Nexus S、Galaxy Nexus 和 Nexus 4 等设备具有不可移动的外部存储，而 Optimus One 等设备只有可移动的外部存储。有些设备甚至可能有两个外部存储器，一个是板载内存芯片上的分区，另一个是 SD 卡。

**编辑**

正如 CommonsWare 在评论中指出的那样，就标准的 Android SDK 而言，您的设备上只有一个外部存储（您可以通过[Environment.getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)获得）。正如文档所述，如果存在多个外部存储，这将返回主外部存储：

> 在具有多个“外部”存储目录（例如安全应用存储和可挂载共享存储）的设备中，该目录代表用户将与之交互的“主要”外部存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T20:51:44.743

从那个链接

> 由于外部存储可能不可用（例如，当用户将存储安装到 PC 或移除了提供外部存储的 SD 卡时）您应该始终在访问之前验证该卷是否可用。

# javascript - 根据用户编辑的表值创建新数组

> ID：14267040
> 
> 赞同：0
> 
> 时间：2013-01-10T20:50:43.440
> 
> 标签：javascript, jquery

我有一个这种形式的数组：

```
[ [1,"item1","oldvalue1"] , [2,"item2","oldvalue2"] , [3,"item3","oldvalue3"] , ... ] 
```

我这样显示它：

```
 name  |   default_value  |  new_value 
------- ------------------ -----------
item 1 |     oldvalue1    |   oldvalue1

item 2 |     oldvalue2    |   oldvalue2

item 3 |     oldvalue3    |   oldvalue3 
```

首先，我希望 NEW_VALUE 列显示每个项目的默认值（这些是原始数组中的“旧”值）。

但我希望这第三列中的单元格是可编辑的。例如，在本例中，我选择编辑第 1 项和第 3 项的值，第 2 项保持之前的旧值。编辑我的单元格后，我会得到这个：

```
 name  |   default_value  |  new_value 
------- ------------------ -----------
item 1 |     oldvalue1    |   newvalue1

item 2 |     oldvalue2    |   oldvalue2

item 3 |     oldvalue 3   |   newvalue3 
```

然后从这张决赛桌中，我希望能够得到一个像这样的数组：

```
[ [1,"item1","newvalue1"] , [2,"item2","oldvalue2"] , [3,"item3","newvalue3"] , ... ] 
```

我正在寻找有关如何实现这一点的一些想法。我不确定下一步应该做什么。

我需要帮助的是

1.  如何使第三列可编辑（我正在考虑使用一个名为 Jeditable 的插件......）
2.  如何从表值构建数组...

谢谢你的帮助。我不确定如何命名这篇文章，如果您认为我应该将其更改为更有帮助的内容，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:10:08.497

使第三列可编辑的最简单方法是`<input type="text" />`表单字段，这也表明它是可编辑的。

要构建数组，您可以`.each()`结合使用`$(selector, column)`（列是您当前迭代的列），因此只需搜索与当前列内的选择器匹配的元素。

我还建议您将数据包装到额外的标签中以将其与标签分开，例如在第一列中：

```
<td>item <span>1</span></td> 
```

这样您就不需要通过字符串操作将数据与值分开。

另请参阅：[http](http://api.jquery.com/each/) ://api.jquery.com/each/、http : [//api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)（查看上下文参数）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:10:51.337

我使用以下函数编写了一个使用 jQuery 制作的示例`data`：

[jsFiddle](http://jsfiddle.net/nescalante/PgMpA/)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T21:19:50.057

我试图模拟一个听起来像你正在寻找的样本：

**HTML：**

```
<table>
   <tr>
     <td>item 1</td>
     <td>5</td>
     <td><input  size="3" value="5"></input></td>
  </tr>  
  <tr>
     <td>item 2</td>
     <td>6</td>
     <td><input  size="3" value="6"></input></td>
  </tr>
  <tr>
     <td>item 3</td>
     <td>7</td>
     <td><input size="3" value="7"></input></td>
  </tr>
</table>

<input type="button" id="CA" value="Create Array"></input> 
```

`input`s 被添加到`td`每个列的最后，`tr`以使该列中的内容*可编辑*。另请注意，我最初设置这些值。当您设置旧值时，您也可以在`input`s 中这样做，以便将旧值加载到文本框中。

**jQuery：**

```
$(document).on("click", "#CA", function(){ //when the button is clicked
  var array = []; //array to hold the changed information
  $("tr").each(function(i){
    array.push([i, 
                $(this).children("td:eq(0)").text(), //get the text from the first td
                $(this).children("td:eq(2)").children("input").val()]); //get the value from the last td's input
  });
  console.log(array);
}); 
```

**[例子](http://jsfiddle.net/cqpTT/)**

# c++ - 字符串比较不起作用

> ID：14267041
> 
> 赞同：0
> 
> 时间：2013-01-10T20:50:45.597
> 
> 标签：c++, comparison, stdstring

我有一个代码如下。每当`temps = $Nodes`循环应该结束。我检查了`temps`每次迭代，并按预期看到了`temps = $Nodes`一次，但循环没有结束。此代码适用于 VS10，但不适用于 linux。任何想法？

```
std::string temps;
s_mesh_file.open (mesh_file.c_str());

do
{
    getline (s_mesh_file, temps);
    std::cout << "temps: " << temps << std::endl;
    std::cin.ignore();
}
while (temps != "$Nodes"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:09:42.320

他们是否使用相同的输入文件？包括 Windows 换行符？Linux 不喜欢 windows 换行符。（Windows 也不像 Linux）

在 Windows 中，每个换行符`\r`后面是一个`\n`. 在 Linux 中，换行符*就是* `\n`. 流默认以“文本模式”打开，它将系统换行符转换为`\n`. 因此，当您在 Windows 中读取文件时，它会`\r`很有帮助地删除。但是，Linux 并没有意识到它是换行符的一部分，因此`\r`像任何其他普通字符一样将`"$Nodes"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:59:53.617

删除`std::cin.ignore();`. 您实际上正在等待用户输入。在linux上测试。

# wordpress - 如何在 buddypress 论坛回复中添加评论

> ID：14267042
> 
> 赞同：0
> 
> 时间：2013-01-10T20:50:47.223
> 
> 标签：wordpress, buddypress

我正在设置自定义 buddypress 安装，并希望直接在论坛主题页面上发表评论。我看到可以在小组活动流中显示您的论坛回复，但我希望反过来。我基本上发布了一个问题作为“主题”，让每个人在他们的回复中回答这个问题，但我希望看到人们评论其他人的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:39:30.563

我们现在正在解决同样的问题，这是我向我的开发团队提出的建议 -

> 我们可以直接复制 wordpress 附带的评论功能和 wp_comments 表的数据库模式。每个主题帖子都可以像带有评论的博客帖子一样。上面的动作钩子将有助于获取和显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T06:54:02.323

我在 Buddypress 论坛帖子上寻找相同的功能，最后通过唯一可用的插件 bbPress Threaded Replies 获得了成功。这个插件为我的 buddypress-bbpress 论坛帖子添加了与我的一般站点活动相同的评论和回复系统。

如果需要，您可以在[http://wordpress.org/plugins/bbpress-threaded-replies/下载并安装相同的内容](http://wordpress.org/plugins/bbpress-threaded-replies/)

# java - 使用 Java 代码运行 RMI 注册表

> ID：14267045
> 
> 赞同：-2
> 
> 时间：2013-01-10T20:50:56.723
> 
> 标签：java, rmi

有没有办法通过 Java 代码运行 RMIregistry？这是可能的还是我只能通过 NetBeans 或 Eclipse IDE 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:54:43.787

当然，这里的教程[http://docs.oracle.com/javase/tutorial/rmi/index.html](http://docs.oracle.com/javase/tutorial/rmi/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T21:04:24.033

既然我们知道您真正想要什么，请调用 LocateRegistry.createRegistry()，但我真的觉得您可以通过一些研究自己找到它。

# php - 只有在登录时才能点击。最佳实践？

> ID：14267049
> 
> 赞同：1
> 
> 时间：2013-01-10T20:51:02.930
> 
> 标签：php, jquery, html, laravel

我正在为使用 Laravel 作为 php 框架的网站开发前端。我有一个带有几个可点击 div 的区域，如果登录应该将您重定向到另一个页面，如果没有显示工具提示，告诉用户先登录。

工具提示使用 jquery 显示，如下所示：

```
$(".flip-container").click(function(){
    $("div.login li .tooltip").fadeIn(200);
});

$(".flip-container .back").mouseout(function(){
    $("div.login li .tooltip").fadeOut(200);    
}); 
```

现在，当用户登录时，这显然不应该发生，并且 .flip-container 应该有一个链接。我只是使用 laravel Auth:check 方法来检查用户是否登录：

```
@if (Auth::check()) 
```

那么，如果用户已登录，如何阻止 jquery 运行呢？我是否必须给 .flip-container 另一个名称并为其分配相同的 css，还是有另一种更好的方法来做到这一点？我不希望用户只是进入检查员并更改课程..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:54:06.870

一种方法是将执行工具提示的 JS 分离到某个文件中，如果用户已登录，则不要包含该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:53:39.923

您应该在 PHP 中的 .flip-container div 中添加一个登录类。然后在 jQuery 中检查它是否有类 .logged-in 并从那里开始。

# jquery - Bootstrap：如何从按钮中删除点击事件

> ID：14267054
> 
> 赞同：0
> 
> 时间：2013-01-10T20:51:17.747
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

[**Twitter Bootstrap**](http://twitter.github.com/bootstrap/javascript.html#modals)能够“通过数据属性”调用模式，这很好，但我不知道如何关闭它们或替换按钮的事件。

通过属性设置的示例：

```
<button id="launch-btn" type="button" data-toggle="modal" data-target="#myModal">
   Launch modal
</button> 
```

我试过了：

```
$('#launch-btn').off('click');
$('#launch-btn').unbind('click');
$('#launch-btn').on('click', function(e){e.preventDefault();}); 
```

但所有似乎仍然打开模态。如果满足条件，我想阻止默认模式打开并用另一个操作替换它。我知道我可以使用模态的`show`事件来阻止显示，但我不想在这里这样做，我想控制按钮的行为。

我也意识到使用 JS 而不是让引导程序通过数据属性处理它可能更容易处理动态模式的创建，但我现在是一个好奇的乔治，我试图发现我是什么做错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:22:57.140

这有效：`$(document).off('click.modal.data-api', '[data-toggle="modal"]');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:09:27.267

尝试将模式的显示选项设置为 false：

[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

您可以附加另一个数据属性：

```
<button id="launch-btn" type="button" data-toggle="modal" data-show="false" data-target="#myModal">
   Launch modal
</button> 
```

# ios - 仅针对调试模式显示设置包

> ID：14267056
> 
> 赞同：5
> 
> 时间：2013-01-10T20:51:25.570
> 
> 标签：ios, debugging, macros, settings.bundle

我正在使用[本教程](http://useyourloaf.com/blog/2010/05/18/adding-a-settings-bundle-to-an-iphone-app.html)在我的应用程序中创建一个简单的设置包。问题是我想在发布版本中完全隐藏设置，但我找不到办法。我读过[这个问题](https://stackoverflow.com/questions/8805359/is-there-a-way-to-have-a-settings-bundle-only-in-the-debug-version-of-my-app)，但我仍然不清楚。

提前致谢

我设法从目标中删除 Settings.bundle 并将此脚本添加到构建阶段来完成此操作：

```
if [ ${CONFIGURATION} == "Debug" ]; then
cp -r ${PROJECT_DIR}/HotelZilla/Classes/Settings/Settings.bundle ${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app
fi 
```

但是还是有问题。如果我删除该应用程序然后在发布方案模式下启动它，则设置包不会出现。然后，我更改为调试方案并重建，设置出现，但是，如果我再次切换到发布，设置仍然存在，所以如果我向发布应用程序添加设置，我似乎永远无法再次删除捆绑包。是对的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T21:15:35.310

如果您使用设置包进行设置，则需要在发布配置中将其从应用程序的构建过程中排除。`#ifdef DEBUG`宏只会帮助您处理要从编译中排除的代码 - 它不会帮助排除设置包。

您需要添加一个构建阶段以根据您正在使用的构建配置包含/排除您的设置包。查看[如何在 Xcode 中有条件地包含基于构建配置的文件？](https://stackoverflow.com/questions/8496476/how-can-i-conditionally-include-a-file-based-on-build-configuration-in-xcode)寻求帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-20T13:49:53.973

这可以通过运行脚本来完成。

*   选择项目

*   选择目标

*   切换到`Build Phases`选项卡

*   `Add Build Phase`(+) 按钮

*   选择`Add Run Script`

添加脚本：

```
if [ "${CONFIGURATION}" == "Debug" ]; then
cp -r "${PROJECT_DIR}/${PRODUCT_NAME}/Settings/Settings_Debug.bundle/Root.plist" "${PROJECT_DIR}/${PRODUCT_NAME}/Settings.bundle/Root.plist"
echo "Debug settings bundle copied"
else
cp -r "${PROJECT_DIR}/${PRODUCT_NAME}/Settings/Settings_Release.bundle/Root.plist" "${PROJECT_DIR}/${PRODUCT_NAME}/Settings.bundle/Root.plist"
echo "Release settings bundle copied"
fi 
```

> 注意：您需要创建 3 个设置包（Settings.bundle、Settings_Debug.bundle、Settings_Release.bundle）。因此，您可以在构建后保留实际文件。

# android - 如何在运行时使用“su”发送命令并从 DataInputStream 取回所有行

> ID：14267057
> 
> 赞同：2
> 
> 时间：2013-01-10T20:51:27.160
> 
> 标签：android, datainputstream

我正在开发一个程序，该程序需要能够确定 Xlocation 的 android 设备上的内容。我正在使用“su ls Xlocation”

我想取回文件的数组列表，但只能设法取回第一个项目。我是否缺少获取下一行的命令？或者还有什么我需要做的。

下面是我发送的命令

```
String[] commands = new String[]{"ls /system/app/"};
return doCommand(commands); 
```

下面是我当前的 doCommand 方法

```
 private boolean doCommand(String[] commands)
    {
    ArrayList<String> output = new ArrayList<String>();

    boolean ran = false;
    try
    {
        Process process = Runtime.getRuntime().exec("su");
        DataOutputStream os = new DataOutputStream(process.getOutputStream());
        DataInputStream ins = new DataInputStream(process.getInputStream());

        // This part works I sends the command right!
        for (String single : commands) 
        {
            os.writeBytes(single + "\n");
            os.flush();
            os.writeBytes("exit\n");
            os.flush();
            process.waitFor();
            ran = true;
        }

        int av = -1;
        while (av != 0)
        {

//////////////////////////// WORKING ON THIS TO GET ALL INFO /////////////////
            av = ins.available();
            if (av != 0) 
            {
                byte[] b = new byte[av];
                ins.read(b);
                output.add(new String(b));
                System.out.println(new String(b) + "Recieved form modem");
            }
        }
    }
    catch(Exception ex){}
    return ran;
} 
```

如目前所见，它只返回真或假。但是在调试中运行我只得到输出中的第一项。（输出=“[first.apk”）

**编辑了较新的版本；**

```
 public ArrayList<String> doCommand(String[] commands)
{

    ArrayList<String> output = new ArrayList<String>();

    try
    {

        Process process = Runtime.getRuntime().exec("su");
        DataOutputStream os = new DataOutputStream(process.getOutputStream());  
        DataInputStream ins = new DataInputStream(process.getInputStream());
        for (String single : commands) 
        {
            os.writeBytes(single + "\n");

            //os.flush();
            output.add("true");
        }
        os.writeBytes("exit\n");

        byte[] bc = new byte[10000];
        String st = "";
        while(ins.read(bc) != -1)
        {
        st += new String(bc);
        os.flush();

        }
        output.add(st);

        os.flush();
        os.close();
        ins.close();
        process.waitFor();          
    }
    catch(Exception ex)
    {}

    return output;
} 
```

现在获得了相当数量的输出，但仍然不是所有目录都在我检查过的字节 [10000] 大小限制内有大项目的地方。

如果有人想对此进行改进并获得有效的确切答案，那么我仍然会查看此帖子。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:53:59.910

您可以尝试从我的开源用户管理 ( [GitHub](https://github.com/RaghavSood/UserManagement) ) 应用程序中调整此方法来执行您想要的操作。这将在终端命令之后读取输出的每一行：

```
public static String[] getUserList()
{
    Process p;
    try {
        p = Runtime.getRuntime().exec("su");
        DataOutputStream os = new DataOutputStream(p.getOutputStream());  
        BufferedReader bf = new BufferedReader(new InputStreamReader(p.getInputStream()));

            os.writeBytes("pm list-users"+"\n");
            os.writeBytes("exit\n"); 
            ArrayList<String> users = new ArrayList<String>();
            String test;
            bf.readLine();
            while((test = bf.readLine()) != null)
            {
                users.add(test);
            }

            String[] userList = (String[]) users.toArray(new String[users.size()]);

        os.flush();
        return userList;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-10T04:05:00.470

我对 Java 有点陌生，但我相信这个问题只是一个小小的疏忽。我在其中遇到过几次 Python ;)

因为您已将以下内容添加到您的 while 循环中：

```
 os.writeBytes("exit\n");
        os.flush(); 
```

每次迭代后，您都试图退出终端会话。在第一次迭代之后，终端会话已经关闭，所以这可以解释为什么只返回第一个结果。

我建议在 while 循环完成后添加退出代码，以确保您不会将其余命令发送到死会话。或者，您也可以在每次迭代期间重新创建 os ，但这似乎有点多余。;)

**编辑#1**

我不熟悉字节的使用，但我已经能够使用类似的 while 循环来解析命令的输出。我还在输入中添加了 stderr 以确保在需要时清空缓冲区。乍一看您的新代码，您似乎在 while 循环的每次迭代期间定义了一个新字符串，而不是将该行附加到变量中。这将导致您的变量在每次迭代期间被覆盖。;)

下面是我过去用来完成类似任务的一些代码。我很快从我的源代码进行了修改，但我目前无法对其进行测试。请记住，您的*os* 是我的*stdout*，而您的*ins*是我的*stdin*。

```
Runtime          terminal = (Runtime) Runtime.getRuntime();
Process          process  = terminal.exec("su");
DataOutputStream stdout   = new DataOutputStream(process.getOutputStream());
InputStream      stderr   = process.getErrorStream();
BufferedReader   stdin    = new BufferedReader(new InputStreamReader(stderr));
String           line     = "";
String           output   = "";

// Execute command and flush 
stdout.writeBytes("your command here\n");
stdout.flush();

// Append stdin.readLine() to output variable until line is null
while ((line = stdin.readLine()) != null)
    output += line;

// I've had mixed luck getting waitFor() to work, but technically it should force
// the shell to wait until the command completes. Uncomment it to try it out.
//process.waitFor();
stdout.writeBytes("exit\n");
stdout.flush();

// Print output to logcat
System.out.println(output); 
```

# database - 添加/编辑按钮给出数据类型错误

> ID：14267063
> 
> 赞同：2
> 
> 时间：2013-01-10T20:51:51.447
> 
> 标签：database, ms-access, database-design, vba, ms-access-2010

我有一个主窗体和子窗体。我在主表单中有文本框，允许我在子表单中添加/编辑信息。添加工作正常，但是当我尝试编辑记录时，所选记录的信息会像我想要的那样显示在文本框中，但是当我尝试更新时，出现数据类型错误。此外，当我尝试删除记录时，我也会收到数据类型错误。

我试图复制我的一个合作伙伴为以前的项目所做的工作（CarDealership）。我希望在 KeyInventory 数据库中获得类似的功能。这是我使用的文件：http: [//jumpshare.com/b/t7Lot8](http://jumpshare.com/b/t7Lot8)

***我只完成了 mainKeys 表单上的按钮的代码***

**错误重现：**我单击删除键，得到构象对话框。选择是，这会产生“运行时错误“3464”：条件表达式中的数据类型不匹配”

这是添加/更新按钮的代码：

```
 Private Sub cmdAdd_Click()
    If Me.keyID.Tag & "" = "" Then
        CurrentDb.Execute "INSERT INTO KEYS(KEY_ID, ROOM, DRAWER)" & _
            " VALUES(" & Me.keyID & ",'" & Me.roomID & "'," & Me.drawerID & ")"
              subKey.Form.Requery
    Else
        CurrentDb.Execute "UPDATE KEYS " & _
        " SET KEY_ID=" & Me.keyID & _
        ", ROOM='" & Me.roomID & "'" & _
        ", DRAWER='" & Me.drawerID & "'" & _
        " WHERE KEY_ID=" & Me.keyID.Tag
    End If

    cmdReset_Click

    subKey.Form.Requery
    End Sub 
```

这是删除按钮的代码：

```
 Private Sub cmdDelete_Click()
    If Not (Me.subKey.Form.Recordset.EOF And Me.subKey.Form.Recordset.BOF) Then
        If MsgBox("Confirm Deletion?", vbYesNo) = vbYes Then
            CurrentDb.Execute "DELETE FROM KEYS" & _
                " WHERE KEY_ID=" & Me.subKey.Form.Recordset.Fields("KEY_ID")
                    Me.subKey.Form.Requery
        End If
    End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:18:36.913

假设这是触发“*标准表达式中的数据类型不匹配*”错误的行...

```
CurrentDb.Execute "DELETE FROM KEYS" & _
    " WHERE KEY_ID=" & Me.subKey.Form.Recordset.Fields("KEY_ID") 
```

...给自己一个机会来检查您要求数据库引擎执行的语句。`cmdDelete_Click()`用以下代码替换该行：

```
Dim strSql As String
strSql = "DELETE FROM KEYS" & _
    " WHERE KEY_ID=" & Me.subKey.Form.Recordset.Fields("KEY_ID")
Debug.Print strSql ' <- prints to Immediate window
CurrentDb.Execute strSql, dbFailOnError 
```

然后，在表单视图中使用您的表单，单击导致错误的命令按钮。当您收到错误消息时，请转到“立即”窗口 ( `Ctrl`+ `g`) 并查看该`DELETE`语句。如果该语句的问题不明显，您可以复制语句文本并将其粘贴到新查询的 SQL 视图中进行测试。如果您需要更多帮助，请向我们展示。

注意：此建议不会修复错误。它仅用于帮助您诊断失败的`DELETE`语句。

如果您的 KEY_ID 字段的数据类型是文本，请在您的 DELETE 语句中为数字添加引号，类似于此：

```
DELETE FROM KEYS WHERE KEY_ID='7' 
```

如果可行，请修改代码以包含引号。

```
strSql = "DELETE FROM KEYS WHERE KEY_ID='" & _
    Me.subKey.Form.Recordset.Fields("KEY_ID") & "'" 
```

# sql-server - 寻找更有效的方法来选择跨多个表的最大 RowUpdateDateTime 列

> ID：14267065
> 
> 赞同：1
> 
> 时间：2013-01-10T20:52:02.450
> 
> 标签：sql-server, tsql, loops

我的数据库的每个表中的每一行都有一个 RowUpdateDateTime 列，这是更新或插入特定行的最新时间。每个表中还有 1 到 7 个不同的数据源；有的有1个，有的有7个。

基本上，我试图遍历这些表，并在适用的情况下为这些表中的每一个找到这些源中的每一个的最新 RowUpdateDateTime。这是我和一位同事为此写的很长的查询。它是功能性的，但我怀疑可以重写。

```
IF OBJECT_ID('tempdb..#SourceID') IS NOT NULL
BEGIN
    DROP TABLE #SourceID
END

IF OBJECT_ID('tempdb..#Tables') IS NOT NULL
BEGIN
    DROP TABLE #Tables
END

IF OBJECT_ID('tempdb..#UpdateCount') IS NOT NULL
BEGIN
    DROP TABLE #UpdateCount
END

GO

CREATE TABLE #SourceID
    (
    SourceID varchar(4),
    CounterID int
    )

INSERT INTO #SourceID (SourceID,CounterID)
SELECT 'ZEND',1
UNION ALL
SELECT 'ABC',2
UNION ALL
SELECT 'DEF',3
UNION ALL 
SELECT 'GHI',4
UNION ALL
SELECT 'JKL',5
UNION ALL
SELECT 'MNO',6
UNION ALL
SELECT 'PQR',7
UNION ALL
SELECT 'STU',8

GO  

CREATE TABLE #Tables
    (
    Name varchar(100),
    CounterID int
    )

INSERT INTO #Tables (Name,CounterID)
SELECT 'livendb..Table1',1
UNION ALL
SELECT 'livendb..Table2',2
UNION ALL
SELECT 'livendb..Table3',3
UNION ALL
SELECT 'livendb..Table4',4
UNION ALL
SELECT 'livendb..Table5',5
UNION ALL
SELECT 'livendb..Table6',6
UNION ALL
SELECT 'livendb..Table7',7
UNION ALL
SELECT 'livefdb..Table8',8
UNION ALL
SELECT 'livefdb..Table9',9
UNION ALL
SELECT 'livefdb..Table10',10
UNION ALL
SELECT 'livefdb..Table11',11
UNION ALL
SELECT 'livefdb..Table12',12
UNION ALL
SELECT 'livefdb..Table13',13

GO

Declare @counter varchar(10)
Declare @tablename varchar(100)
Declare @query varchar(1100)
Declare @sourceid varchar(4)
Declare @sourcecounter varchar(10) 

CREATE TABLE #UpdateCount
    (
    SourceID varchar(3),
    TableName Varchar(100),
    MaxRowUpdateDateTime datetime,
    --TotalRowCount int
    )

SET @sourcecounter = (SELECT COUNT(*) FROM #SourceID)
SET @counter = (SELECT COUNT (*) FROM #Tables)

WHILE @sourcecounter >= 0
BEGIN
    SET @sourceid = (SELECT SourceID FROM #SourceID WHERE CounterID = (@sourcecounter))
        IF @sourceid <> 'ZEND'
        BEGIN
                WHILE @counter >=0
                BEGIN
                    SET @tablename = (SELECT Name FROM #Tables WHERE CounterID = (@counter))

                    IF @counter <> 0
                    BEGIN
                    SET @query = 'INSERT INTO #UpdateCount (SourceID,TableName,MaxRowUpdateDateTime)
                                VALUES (
                                        (SELECT SourceID FROM #SourceID WHERE CounterID = '+@sourcecounter+')
                                        ,(SELECT Name FROM #Tables WHERE CounterID = '+@counter+')
                                        ,(SELECT MAX(RowUpdateDateTime) FROM '+@tablename+' WHERE SourceID = 
                                                        (SELECT SourceID FROM #SourceID WHERE CounterID = '+@sourcecounter+')))'

                    EXECUTE (@query)
                    END
                SET @counter = (@counter-1)
                END

        END

    SET @sourcecounter = (@sourcecounter-1)
    SET @counter = (SELECT COUNT (*) FROM #Tables)
END

        SELECT  SourceID
                ,SUBSTRING(TableName,10,22) as TableName
                ,MaxRowUpdateDateTime
                --,TotalRowCount
        FROM #UpdateCount 
            Where MaxRowUpdateDateTime IS NOT NULL
            ORDER BY TableName

DROP TABLE #Tables
DROP TABLE #UpdateCount
DROP TABLE #SourceID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:31:00.617

按照这个例子的模式，你可能会更好（因为代码更简单）。它不能回答您的整个问题（至少对我而言，在没有数据的情况下编写动态 SQL 非常困难）。

这应该为您提供一个良好的工作起点。

```
USE AdventureWorks2012
GO

DECLARE @Query VARCHAR(MAX) =''

;WITH Tables AS
(
    SELECT DISTINCT TABLE_NAME = '[' + TABLE_SCHEMA + ']' + '.' + '[' + TABLE_NAME + ']'
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE COLUMN_NAME = 'ModifiedDate'
)
SELECT  @Query  = @Query + 
'   SELECT   SourceTable    = '''+ TABLE_NAME + '''
            ,RecentMod      = MAX(ModifiedDate) 
    FROM ' + TABLE_NAME + ' UNION ALL'
FROM Tables

SET @Query = LEFT(@Query, LEN(@Query) - LEN(' UNION ALL'))

EXEC (@Query) 
```

产生这样的结果；

```
SourceTable                                     |   RecentMod
===========================================================================
[dbo].[AWBuildVersion]                          |   2012-03-14 00:00:00.000
[dbo].[OLE DB Destination]                      |   2008-07-31 00:00:00.000
[HumanResources].[Department]                   |   2002-06-01 00:00:00.000
[HumanResources].[Employee]                     |   2009-01-26 09:17:08.637
[HumanResources].[EmployeeDepartmentHistory]    |   2007-12-15 00:00:00.000
[HumanResources].[EmployeePayHistory]           |   2008-07-31 00:00:00.000
[HumanResources].[JobCandidate]                 |   2008-01-23 18:32:21.313
[HumanResources].[Shift]                        |   2002-06-01 00:00:00.000
[HumanResources].[vJobCandidate]                |   2008-01-23 18:32:21.313
[Person].[Address]                              |   2008-07-31 00:00:00.000
[Person].[AddressType]                          |   2002-06-01 00:00:00.000
[Person].[BusinessEntity]                       |   2012-01-14 13:47:22.467
[Person].[BusinessEntityAddress]                |   2008-10-13 11:15:06.967
... 
```

# awk - 计算传递闭包

> ID：14267069
> 
> 赞同：2
> 
> 时间：2013-01-10T20:52:33.200
> 
> 标签：awk, bioinformatics, dna-sequence, transitive-closure

我的成对 DNA 序列数据以下列方式显示相似性。

```
AATGCTA|1   AATCGTA|2
AATCGTA|2   AATGGTA|3
AATGGTA|3   AATGGTT|8
TTTGGTA|4   ATTGGTA|5
ATTGGTA|5   CCTGGTA|9
CCCGGTA|6   GCCGGTA|7
GGCGGTA|10  AATCGTA|2
GGCGGTA|10  TGCGGTA|11
CAGGCA|12   GAGGCA|13 
```

以上是一个示例输入文件，原始文件是几百万行。我希望输出根据行之间的公共元素对重叠的 id 进行聚类，并将它们输出到每个聚类的一行，如下所示

```
AATGCTA|1   AATCGTA|2   AATGGTA|3   AATGGTT|8   GGCGGTA|10  TGCGGTA|11
TTTGGTA|4   ATTGGTA|5   CCTGGTA|9
CCCGGTA|6   GCCGGTA|7
CAGGCA|12   GAGGCA|13 
```

我目前正在尝试使用[mcl](http://micans.org/mcl/)和[silix](http://lbbe.univ-lyon1.fr/Documentation.html?lang=en)对它们进行集群，但我没有成功运行 silix。但是 mcl 目前正在进行中，我想知道在 awk 或 perl 中是否有其他聪明的方法可以做到这一点。我很感激一些解决方案，谢谢。（这是我的第一篇文章，如果我犯了一些错误，我很抱歉）

只是为了让它更简单......很容易说我的输入是，

```
1   2
2   3
3   8
4   5
5   9
6   7
10  2
10  11
12  13 
```

我希望输出是，

```
1   2   3   8   10  11
4   5   9
6   7
12  13 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:21:39.073

我认为这不是真的，但无论如何：

```
use strict;
use warnings;
my @rows;
my %indx;
while(<DATA>) {
  chomp;
  my @v = split (/\s+/);
  my $r = {};
  for my $k (@v) {
    $r = $indx{$k}[0] if defined $indx{$k};
  }
  $r->{$v[0]}++;
  $r->{$v[1]}++;
  # print join(",", @v), "\n";
  push(@{$indx{$v[0]}}, $r);
  push(@{$indx{$v[1]}}, $r);
  push(@rows,  $r);
}
my %seen;
for my $r (@rows) {
  print (join("\t", keys %$r), "\n") if not $seen{$r}++;
}

__DATA__
AATGCTA|1   AATCGTA|2
AATCGTA|2   AATGGTA|3
AATGGTA|3   AATGGTT|8
TTTGGTA|4   ATTGGTA|5
ATTGGTA|5   CCTGGTA|9
CCCGGTA|6   GCCGGTA|7
GGCGGTA|10  AATCGTA|2
GGCGGTA|10  TGCGGTA|11
CAGGCA|12   GAGGCA|13 
```

## 输出：

```
GGCGGTA|10  AATGCTA|1   AATGGTT|8   AATCGTA|2   AATGGTA|3   TGCGGTA|11
CCTGGTA|9   TTTGGTA|4   ATTGGTA|5
CCCGGTA|6   GCCGGTA|7
CAGGCA|12   GAGGCA|13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T22:37:15.373

如您所愿，这里有 awk 解决方案：

```
awk 'BEGIN{f=1}{c=0;
        for(i=1;i<=f;i++){
                if(!a[i]){
                        a[i]=$1" "$2; c=1; break;
                }else if(a[i]~$1){
                        a[i]=a[i]" "$2; c=1; break;
                }else if(a[i]~$2){ a[i]=a[i]" "$1; c=1; break; }
        }
        if(!c){ a[++f]=$1" "$2; c=0; }
} END{for(x=1;x<=f;x++)print a[x]}' DnaFile 
```

上面的代码已使用您更简单的输入文件和原始文件（使用 CCGGTTAA 等）进行了测试，两者都有效。输出省略。

# perl - PostgreSQL 阻塞过多的插入

> ID：14267070
> 
> 赞同：2
> 
> 时间：2013-01-10T20:52:43.173
> 
> 标签：perl, postgresql, twitter, insert

我正在开发一个研究平台，该平台通过 Twitter API 读取相关的 Twitter 提要，并将它们存储在 PostgreSQL 数据库中以供将来分析。中间件是 Perl，服务器是 HP ML310，8GB RAM 运行 Debian linux。

问题是 twitter 提要可能非常大（每秒有很多条目），我不能在返回等待下一条推文之前等待插入。所以我所做的是使用一个 fork() ，所以每条推文都有一个新的进程来插入数据库和侦听器并快速返回以获取下一条推文。然而，因为这些进程中的每一个都有效地打开了到 PostgreSQL 后端的新连接，所以系统永远不会赶上它的 twitter 提要。

如果有必要，我愿意使用连接池建议和/或升级硬件来完成这项工作，但如果有任何建议，我将不胜感激。这可能是 RAM 限制，还是我可以尝试使系统足够快的配置或软件方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T21:20:30.390

如果您为**每个**插入打开和关闭一个新连接，那将会很痛苦。您应该改用连接池。创建一个新的数据库连接不是一件轻量级的事情。

为每个插入执行 aa fork() 也可能不是一个好主意。难道你不能创建一个进程来简单地处理插入并在套接字上侦听，或者扫描目录或类似的东西，以及另一个进程发出插入进程的信号（经典的生产者/消费者模式）。或者使用某种消息队列（我不知道 Perl，所以我不能说那里有哪些可用的工具）。

在进行批量插入时，在单个事务中进行，最后发送提交。不要提交每个插入。另一种选择是将行写入文本文件，然后用于`COPY`将它们插入数据库（它不会比这更快）。

您还可以稍微调整 PostgreSQL 服务器。如果您能承受在系统崩溃时丢失一些事务，您可能需要`synchronous_commit`关闭。

如果您可以随时从头开始重建表（例如通过重新插入推文），您可能还希望将该表设为“未记录”表。它的书写速度比普通表格要快，但如果 Postgres 没有清晰地显示出来，就会丢失表格中的所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:43:26.607

Use COPY command. One script reads Tweeter and appends strings to the CSV file on disk. Other scripts looking for CSV file on disk, renamed this file file and started [COPY](http://www.postgresql.org/docs/8.1/static/sql-copy.html) command from this file.

# wpf - WPF 仅在应用程序中增加感知分辨率（不是操作系统）

> ID：14267077
> 
> 赞同：-1
> 
> 时间：2013-01-10T20:53:11.590
> 
> 标签：wpf, screen-resolution

我有一个 WPF，它将显示在具有小屏幕的非常小的设备上，但操作系统具有高分辨率。无法更改分辨率（硬件限制），因此我必须“放大”我的 WPF 应用程序，以便它可以在小型设备上使用。

我的想法是在 chrome 中做一些类似“放大/缩小”功能的事情（好吧，其他浏览器也是如此）。例如，访问[jquery mobile](http://jquerymobile.com/demos/1.2.0/)并按 ctrl+。我希望 WPF 应用程序具有类似的效果。

我在想类似...

```
ZoomFactor = 2
WPFApp.RenderSize.Width = WPFApp.Size.Width / ZoomFactor
WPFApp.RenderSize.Height = WPFApp.Size.Height / ZoomFactor 
```

这将“理论上”使 WPF 认为它正在为大屏幕呈现，但应用程序实际上仍将具有两倍的不动产（ZoomFactor）。

然后，我在想 ScaleTransform 会缩放渲染的内容以填充整个应用程序。

```
WFPApp.RenderedContent.ScaleTransformX = ZoomFactor
WPFApp.RenderedContent.ScaleTransformY = ZoomFactor 
```

这也将允许以任何方式调整应用程序的大小，并且 ZoomFactor 仍将应用于内容。

我对 WPF 比较陌生，所以可能有一种开箱即用的方法，但如果没有，我将如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:24:56.340

> 尝试使用带有比例变换的布局变换。

像魅力一样工作。这是我用来生成比例的逻辑。

```
public static double GetElementScale(Size designSize, Size currentSize)
{
    var ratioY = currentSize.Height / designSize.Height;
    var ratioX =  currentSize.Width / designSize.Width;

    return Math.Max(ratioX, ratioY);
} 
```

然后，在我的页面上有两个比例属性，我使用了以下内容。

```
<controls:MPage.LayoutTransform>
    <ScaleTransform  ScaleY="{Binding Path=ScaleY, RelativeSource={RelativeSource AncestorType={x:Type controls:MPage}}}" ScaleX="{Binding Path=ScaleX, RelativeSource={RelativeSource AncestorType={x:Type controls:MPage}}}" />
</controls:MPage.LayoutTransform> 
```

# tcl - TCL 获取连接变量的值

> ID：14267079
> 
> 赞同：0
> 
> 时间：2013-01-10T20:53:15.557
> 
> 标签：tcl

`x`是设备名称列表 (device-1, device-2, device-3) 通过连接字符串 port 为每个 device1 创建一个变量，因此您最终得到`$device-1port`.

循环 x 创建

```
[expr $${x}port-2000 ]   #x is device-1 so it is trying $device-1port-2000 which throws error. 
```

我想将 的数值`$device-1port`放入不带破折号的变量中。

```
set xvar $${x}port

[expr $xvar-2000 ] 
```

或者我可以`$${x}port`在`expr`声明中包含一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:57:53.270

要读取名称中带有插值的变量，请使用单参数`set`：

```
set withoutadash [set device-${x}port] 
```

一般来说，这种事情最好使用数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:11:12.840

使用此类复杂变量的最佳方法之一是使用该`upvar`命令为该变量创建一个本地“好”别名。特别是，`upvar 0`为局部变量创建局部别名；有点棘手，但一种已知的技术。

```
upvar 0 ${x}port current_port 
```

现在，我们有任何读、写或取消设置`current_port`与具有笨拙名称的端口的读/写/取消设置相同，您可以简单地编写代码：

```
puts [expr { $current_port - 2000 }]
set current_port 12345
# etc. 
```

在当前过程结束时将忘记别名。

* * *

当然，您可能应该考虑改用数组。它们更简单，您不需要努力使用计算变量名称：

```
set x 1
set device($x,port) 12345
puts [expr {$device($x,port) - 2000}] 
```

# assembly - JE/JNE和JZ/JNZ的区别

> ID：14267081
> 
> 赞同：101
> 
> 时间：2013-01-10T20:53:29.203
> 
> 标签：assembly, x86

在 x86 汇编代码中，和`JE`与 和`JNE`完全一样吗？`JZ``JNZ`

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-01-10T21:31:34.027

`JE`并且`JZ`只是完全相同的事物的不同名称：当`ZF`（“零”标志）等于1时的条件跳转。

（类似地，当等于 0时， `JNE`and`JNZ`只是条件跳转的不同名称。 ）`ZF`

你*可以*互换使用它们，但你*应该*根据你在做什么来使用它们：

*   `JZ`/`JNZ`当您明确测试等于零的东西时更合适：

    ```
    dec  ecx
    jz   counter_is_now_zero 
    ```

*   `JE`并且在指令`JNE`之后更合适：`CMP`

    ```
    cmp  edx, 42
    je   the_answer_is_42 
    ```

    （一条`CMP`指令执行减法，并把结果的值扔掉，同时保留标志；这就是为什么`ZF=1`当操作数相等而`ZF=0`它们不相等时得到的原因。）

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-01-10T21:32:49.487

从[Intel 的手册 - Instruction Set Reference](http://download.intel.com/products/processor/manual/325383.pdf)中，`JE`and`JZ`具有相同的操作码（`74`for rel8 / `0F 84`for rel 16/32）也 `JNE`和`JNZ`（`75`for rel8 / `0F 85`for rel 16/32）共享操作码。

`JE`并且`JZ`它们都检查（或零标志），虽然手册中对第一个rel8 和rel8用法`ZF`的描述略有不同，但基本上它们是相同的。`JE``JZ``ZF`

这是手册第 464、465 和 467 页的摘录。

```
 Op Code    | mnemonic  | Description
 -----------|-----------|-----------------------------------------------  
 74 cb      | JE rel8   | Jump short if equal (ZF=1).
 74 cb      | JZ rel8   | Jump short if zero (ZF ← 1).

 0F 84 cw   | JE rel16  | Jump near if equal (ZF=1). Not supported in 64-bit mode.
 0F 84 cw   | JZ rel16  | Jump near if 0 (ZF=1). Not supported in 64-bit mode.

 0F 84 cd   | JE rel32  | Jump near if equal (ZF=1).
 0F 84 cd   | JZ rel32  | Jump near if 0 (ZF=1).

 75 cb      | JNE rel8  | Jump short if not equal (ZF=0).
 75 cb      | JNZ rel8  | Jump short if not zero (ZF=0).

 0F 85 cd   | JNE rel32 | Jump near if not equal (ZF=0).
 0F 85 cd   | JNZ rel32 | Jump near if not zero (ZF=0). 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2019-07-05T06:41:52.423

```
 je : Jump if equal:

  399  3fb:   64 48 33 0c 25 28 00    xor    %fs:0x28,%rcx
  400  402:   00 00
  401  404:   74 05                   je     40b <sims_get_counter+0x51> 
```

# c# - 正则表达式 - 在一个参数后删除一个数字

> ID：14267082
> 
> 赞同：0
> 
> 时间：2013-01-10T20:53:31.970
> 
> 标签：c#, regex, replace

所以我有这个字符串：“ID:300,Order:1,Number:30.99,Other:null}”。我正在使用 c#。

出于安全原因，我想使用正则表达式从数字“参数”中隐藏“30.99”，并将其替换为***，但我仍然是正则表达式的新手，无法弄清楚。

“数字”可以是任何十进制形式 0 到 999999999.......

最终结果将是“ID:300,Order:1,Number: *** ,Other:null}”

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:20:38.300

与结果为单个 * (ID:300,Order:1,Number:*,Other:null) 的标记答案不同，此答案将所有数字和句点替换为 *。

```
Console.WriteLine(
         Regex.Replace("ID:300,Order:1,Number:30.99,Other:null}",
                     @"(?<Text>Number\:)(?<Digits>[^,]+)",
                     new MatchEvaluator((mtch) =>
                           {
                              return mtch.Groups["Text"].Value + Regex.Replace( mtch.Groups["Digits"].Value, @".", "*");
                           }))
                           );

// Result:
// ID:300,Order:1,Number:*****,Other:null} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:56:05.250

您可以使用 Regex.Replace 来做到这一点：

```
string s = Regex.Replace( 
    "ID:300,Order:1,Number:30.99,Other:null",
    @"(?<=Number:).*?(?=,|$)",
    m => "*" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T20:56:58.933

代替：

```
(?<=\bNumber:)\d+(\.\d+)? 
```

用一个`*`.

# c# - linq2sql 在数据库一对多关系中插入数据

> ID：14267086
> 
> 赞同：0
> 
> 时间：2013-01-10T20:53:40.133
> 
> 标签：c#, wpf, windows-phone-7, linq-to-sql, model-associations

我正在写一个 wpf 应用程序。我有一个本地数据库（sqlCE），其中有两个实体类对应于不同的表。第一个类是 Account，第二个类是 Movements。两个表之间存在一对多的关系：一个帐户可以有更多的动作。这是帐户类：

```
[Table]
public class Account
{
    .....other private fields...
    private Int16 iDA;
    private EntitySet<Movement> movements;

    ...other properties with column attribute....

    //primary key
    [Column(IsPrimaryKey = true, Storage="iDA", IsDbGenerated = true, AutoSync = AutoSync.OnInsert, DbType = "smallint")]
    public Int16 IDA
    {
        get { return iDA; }
        private set { iDA = value; }
    }

    //association
    [Association(Storage = "movements", OtherKey = "IDA")]
    public EntitySet<Movement> Movements
    {
        get { return movements; }
        set { this.movements.Assign(value); }
    }       

    public Account()
    {
        this.movements = new EntitySet<Movement>();
    }
} 
```

这是运动课：

```
[Table]
public class Movement
{
    ...other fields...
    private Int16 iDA;
    private int iDM;
    private EntityRef<Account> myAcc;

    //primary key
    [Column(IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert, DbType = "int NOT NULL IDENTITY", Storage = "iDM")]
    public int IDM
    {
        get { return iDM; }
        set { iDM = value; }
    }

    //property links the two tables
    [Column(DbType = "smallint", Storage="iDA", isPrimaryKey=true)]
    public Int16 IDA
    {
        get { return iDA; }
        set { iDA = value; }
    }

    //association
    [Association(Storage = "myAcc", ThisKey = "IDA")]
    public Account MyAccount
    {
        get { return this.myAcc.Entity; }
        set { this.myAcc.Entity = value; }
    }

    ......

    public Movement()
    {
        this.myAcc = new EntityRef<Account>();
    }

} 
```

我定义 IDA 属性来链接这两个表。之后我编写 datacontext 类：

```
public class DataBase : DataContext
{

    public Table<Account> AccountTable
    {
        get { return this.GetTable<Account>(); }
    }
    public Table<Movement> MovementTable
    {
        get { return this.GetTable<Movement>(); }
    }

    public DataBase(string connection) : base(connection) { }
} 
```

在主类中我创建了数据库，但是当我尝试使用帐户对象填充它时，我得到了一个 sql 异常！我可以毫无问题地插入调用 InsertOnSubmit(Account a) 的数据，但是当我调用 SubmitChanges() 时，程序停止并且异常显示“列不能包含空值。[列名 = IDA，表名 = 账户]”。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:27:34.073

我已经解决了我的问题，在两个类中更改了 Int IDA 属性并进行了一些调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T06:22:00.613

尝试对 IDA 字段的 Column 属性使用`DbType = "smallint not null identity"`和`CanBeNull = false`参数。

# ruby - 乘客生成服务器加载错误

> ID：14267088
> 
> 赞同：1
> 
> 时间：2013-01-10T20:53:57.900
> 
> 标签：ruby, ubuntu, passenger, redmine

我已经挣扎了几个小时，在互联网上找不到合适的答案。我试图将 ruby​​1.8 升级到 1.9.3 但没有运气。Ruby 1.9.3 已安装，但我的 rails 应用程序（redmine）将不再启动。

这是错误：

```
/usr/bin/ruby: No such file or directory -- /usr/lib/phusion_passenger/passenger-spawn-server (LoadError)
[ pid=30103 file=ext/apache2/Hooks.cpp:727 time=2013-01-10 21:49:06.819 ]:
  Unexpected error in mod_passenger: Cannot spawn application '/usr/share/redmine': Could not read from the spawn server: Connection reset by peer (104)
  Backtrace:
     (empty) 
```

真的，我坚持这一点，任何帮助表示赞赏！

-布赖恩

# java - 使用反射代替开关

> ID：14267096
> 
> 赞同：-2
> 
> 时间：2013-01-10T20:54:31.697
> 
> 标签：java, reflection

我不知道如何重建这个简单的计算器 - 我必须使用调用方法而不是 switch。特定操作员必须动态运行适当的方法。你有什么建议吗？提前致谢！

```
import javax.swing.*;
import java.util.*;
import java.awt.*;
import java.awt.event.*;
public class TokenTest extends JFrame
 {
 private JLabel prompt;
 private JTextField input;
 private JLabel result;
 public TokenTest()
     {
     super( "Testing Class StringTokenizer" );
     Container c = getContentPane();
     c.setLayout( new FlowLayout() );
     prompt = new JLabel( "Enter number1 operator number2 and press Enter" );
     c.add( prompt );
    input = new JTextField( 10 );
     input.addActionListener( new ActionListener()
                 {
         public void actionPerformed( ActionEvent e )
             {
             String stringToTokenize = e.getActionCommand();
             StringTokenizer tokens = new StringTokenizer( stringToTokenize );
             double res;
             double num1 = Integer.parseInt(tokens.nextToken());
             String sop = tokens.nextToken();
             double num2 = Integer.parseInt(tokens.nextToken());

             switch (sop.charAt(0)) {
             case '+' : res = num1 + num2; break;
             case '-' : res = num1 - num2; break;
             case '*' : res = num1 * num2; break;
             case '/' : res = num1 / num2; break;
             default  : throw new IllegalArgumentException();
           }         
             result.setText(String.valueOf(res));                
         }
     });
     c.add( input );

    result = new JLabel("");
    c.add(result);

     setSize( 375, 160 ); 
     show();
 }
    public static void main( String args[] )
     {
     TokenTest app = new TokenTest();

     app.addWindowListener( new WindowAdapter()
         {
         public void windowClosing( WindowEvent e )
             {
             System.exit( 0 );
         }
     });
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:31:35.943

如果您不允许使用 switch 或有其他原因不使用它，您可以使用地图来代替。

```
Map<Character, Command> map = new HashMap<>();
map.put('+', sumCommand);
map.put('-', subCommand);
map.put('*', multCommand);
map.put('/', divCommand); 
```

然后你可以简单地执行：

```
Command r = map.get(sop.charAt(0));
if (r != null) {
    r.execute(num1, num2);
} else {
    throw new IllegalArgumentException(); // I'd recommend using assertions here, like assert n != null.
} 
```

该`Command`接口及其实现之一将如下所示。

```
public interface Command {
    double execute(double num1, double num2);
}

public class SumCommand implements Command {
    public double execute(double num1, double num2) {
        return num1 + num2;
    }
} 
```

但是，当然，带有 switch 的原始解决方案更容易且更具可读性。

# facebook-opengraph - 发送应用请求时出错：100 参数信息为必填项

> ID：14267098
> 
> 赞同：1
> 
> 时间：2013-01-10T20:54:44.610
> 
> 标签：facebook-opengraph

在没有让这个工作之后，我回到了 facebook 发布的示例。不幸的是，即使他们的例子也失败了。有谁知道如何解决这个问题？

curl -X POST -F 'message=Post%20with%20app%20access%20token' -F 'access_token=mytoken' [https://graph.facebook.com/545991534/apprequests](https://graph.facebook.com/545991534/apprequests) -k

返回：{"error":{"Message:"(#100) 参数message为必填项","type":"OAuthException","code":100}}

任何想法如何解决这个问题？

好的，我用双引号替换了单引号，得到了以下内容。但似乎仍然没有工作。{"请求":"192998830846523","to":["545991534"]}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:44:57.597

用双引号替换单引号，并检查您的 ID

# asp.net-mvc - 基于参数启用链接的侧边栏无 Cookie 渲染

> ID：14267100
> 
> 赞同：0
> 
> 时间：2013-01-10T20:54:51.290
> 
> 标签：asp.net-mvc, cookies, asp.net-mvc-4, partial-views

我有一个 MVC 4 站点，它呈现一个左侧边栏，上面有一堆菜单链接。当用户登录时，他们会被定向到搜索某人的页面。一旦他们选择了某人并提交了表单，`id`就会设置一个 cookie。

这`id`决定了侧边栏菜单中的各种链接是否启用，因为它是这些链接导致的许多操作的必需参数。菜单本身，因为它位于站点的每个页面上，所以在 _Layout 部分中设置：

```
<div id="contentwrapper">
    <div id="left-menu">
        @Html.Action("Display", "Menu", new { Area = "" })
    </div>
    <div id="mainbody">
        <section>
            @RenderBody()
        </section>
    </div>
    <div id="footer">
    </div>
</div> 
```

`Display`返回表示侧边栏菜单的局部视图。由于我在 _Layout 中渲染菜单侧边栏，因此我没有可使用的模型。有什么方法可以在**不**使用 cookie 的情况下将参数获取到我的菜单部分视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:07:17.433

我会使用隐藏的字段和 viewbag

```
Public ActionResult Index(){
ViewBag.id = // set your id initially 

} 
```

如果 javascript/jquery 对你没问题...

```
$(function(){
var myID = @Html.Raw(Json.Encode(ViewBag.id));
$('#hidID').val(myID);
}); 
```

HTML

```
<input type="hidden" name="hidID" id="hidID" /> 
```

然后..显示动作

```
Public ActionResult Display(int hidID){    
// this will be current id,
// if id is reset , pass the new one to viewbag , jquery will reset hidden field on client
} 
```

# php - Magento isSalable 什么都不返回

> ID：14267101
> 
> 赞同：2
> 
> 时间：2013-01-10T20:54:58.780
> 
> 标签：php, magento

我以某种方式遇到了一个问题，即有库存且数量超过 400000 的产品说它无法销售。或者更确切地说 isSalable 没有返回值。

我拉起功能来看看，我发现了一些奇怪的东西。

这是功能：

```
public function isSalable(){
    Mage::dispatchEvent('catalog_product_is_salable_before', array(
        'product'   => $this
    ));
    $salable = $this->isAvailable();
    $object = new Varien_Object(array(
        'product'    => $this,
        'is_salable' => $salable
    ));
    Mage::dispatchEvent('catalog_product_is_salable_after', array(
        'product'   => $this,
        'salable'   => $object
    ));
    // echo "variable: ".$salable."<br />object: ".$object->getIsSalable();

    return $object->getIsSalable();
} 
```

注释的回显是在将其放入对象之前查看值以及从对象中检索到的值。在我得到的问题产品上：

```
variable: 1
object: 
```

在其他产品上，它们都返回为 1。

有谁知道什么会导致这种情况发生？

**- -编辑 - -**

抱歉，函数返回`$object->getIsSalable()`，而不是`$salable`。

这是**Magento Enterprise 1.12**

我现在意识到对象调用返回错误。在一天结束时发布此内容的效果。

我将回声移到了事件调度之前，并且两者都返回为 1，因此我查看了事件并追踪了将其设置为 false 的位置。

我在 Enterprise/CatalogEvent 中跟踪到了这个函数：

```
public function applyIsSalableToProduct(Varien_Event_Observer $observer){
    $event = $observer->getEvent()->getProduct()->getEvent();
    echo "<br />".$event->getStatus()."<br />";
    if ($event && in_array($event->getStatus(), array(
                Enterprise_CatalogEvent_Model_Event::STATUS_CLOSED,
                Enterprise_CatalogEvent_Model_Event::STATUS_UPCOMING
    ))) {
        $observer->getEvent()->getSalable()->setIsSalable(false);
    }
    return $this;
} 
```

如果我`$event->getStatus()`在 if 之外回显，则问题产品的状态为已关闭，而其他产品会抛出错误，因为 $event 不存在。

是什么导致了差异？

**---编辑2---**

我发现关闭来自产品事件。

```
$event = $observer->getEvent()->getProduct()->getEvent(); 
```

我在创建对象后返回`isSalable()`并添加`print_r($this->getEvent()->getData());`并得到了这个：

```
Array([event_id] => 3 [category_id] => 12 [date_start] => 2012-11-28 09:54:00 [date_end] => 2012-11-29 09:54:00 [display_state] => [sort_order] => [status] => closed) 
```

同样，正常产品返回错误，因为产品上没有事件。

这个事件从哪里来？

随着我的进步，我会不断更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:18:02.183

弄清楚了。有一个目录事件集将状态设置为关闭。删除了活动，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:54:32.630

我有点不清楚调试语句的输出是什么，但我能得出的唯一合乎逻辑的结论是：

```
variable: 1
object: 0 
```

由于`$object`它是一个对象，它通过引用传递给事件，因此如果您的安装有任何事件监听器`catalog_product_is_salable_after`，这可能会修改该对象的值。由于`isAvailable`返回一个布尔值，`$salable`变量本身不能从事件内部修改，因此在事件侦听器中修改 'salable' 字段没有多大意义，因为在事件触发后不会检索该值，因此它永远不会被退回。

这完全是一种说法，如果在你的输出中`$salable`变量是 1，那么函数应该返回 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T10:39:40.243

我偶然发现了 isSaleable() 总是在我的产品上返回 false 的问题，问题是我正在获取集合但没有将属性价格添加到集合中。在 isSaleable() 函数中有一个检查来确保价格不为 0，它需要 price 属性来检查：

改变：

```
$collection = Mage::getModel('catalog/product')->getCollection();
        $collection->addAttributeToSelect('name')
                ->addAttributeToSelect('image')
                ->addAttributeToSelect('url_path')
                ->addAttributeToSelect('status')
                ->addUrlRewrite(); 
```

到：

```
$collection = Mage::getModel('catalog/product')->getCollection();
        $collection->addAttributeToSelect('name')
                ->addAttributeToSelect('image')
                ->addAttributeToSelect('price')
                ->addAttributeToSelect('url_path')
                ->addAttributeToSelect('status')
                ->addUrlRewrite(); 
```

成功了:)

# cocoa - 如何在锁定主应用程序时启动包文件并等待它终止

> ID：14267102
> 
> 赞同：0
> 
> 时间：2013-01-10T20:55:02.643
> 
> 标签：cocoa

我希望启动一个包文件并等待安装完成/关闭。同时主调用应用程序应该被锁定直到完成。

到目前为止，我已经尝试了以下...

```
- (IBAction)installDriver:(id)sender
{
    NSString *file = [[NSBundle mainBundle] pathForResource:@"ExamplePackage" ofType:@"pkg"];
    [[NSWorkspace sharedWorkspace] openFile:file];
    [[[NSWorkspace sharedWorkspace] notificationCenter] addObserver:self selector:@selector(appDidEnd:) name:NSWorkspaceDidTerminateApplicationNotification object:nil];
}

- (void)appDidEnd:(NSNotification *)notification
{
    NSLog(@"app info: %@", [notification userInfo]);
} 
```

问题是每当任何应用程序关闭时都会调用 appDidEnd，而且无法检测 ExamplePackage.pkg 是否是关闭的，因为 userinfo 将 installer.app 报告为正在关闭的应用程序。

关于我要达到的目标的任何想法....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:33:07.113

Ok 在意识到 NSTask 的存在后找到了解决方案。

```
NSTask *task = [[NSTask alloc] init];
[task setLaunchPath:@"/usr/bin/open"];
[task setArguments:[NSArray arrayWithObjects:[[NSBundle mainBundle] pathForResource:@"MyPackageFile" ofType:@"pkg"], nil]];
[task launch];
[task waitUntilExit]; 
```

当你知道如何时很容易:)

# php - PHP ASCII Armored PGP 加密字符串

> ID：14267103
> 
> 赞同：1
> 
> 时间：2013-01-10T20:55:09.320
> 
> 标签：php, gnupg

我需要使用第三方提供给我的公钥在 MediaWiki 环境中对一个小字符串/令牌进行 PGP 加密和 ASCII 保护。这给了我：

*   需要使用PHP
*   最好远离 exec_shell() ...真的吗？
*   网络服务器环境

我打算在阅读后使用 GnuPG lib：http: [//devzone.zend.com/1278/using-gnupg-with-php/](http://devzone.zend.com/1278/using-gnupg-with-php/)

哪些用户应该将 PGP 公钥存储在他们的 .gnupg 文件夹中？

* * *

**更新 1**

到目前为止，我正在测试硬编码公钥（现在，只是为了测试它）

```
// GnuPG stuff
putenv("GNUPGHOME=/tmp");
$pubkey = "-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.2.6 (GNU/Linux)
...key...
-----END PGP PUBLIC KEY BLOCK-----";

$ token="some text";
$gpg = new gnupg();
$gpg->seterrormode(gnupg::ERROR_EXCEPTION); 

try 
{
    $info = $gpg->import($pubkey);
//  var_dump($info); // to see fingerprint
    $info = $gpg -> addencryptkey("...fingerprint...");
    $enc = $gpg -> encrypt($token);
} 
catch (Exception $e) {
    echo 'ERROR: ' . $e->getMessage();
}

$token = urlencode($enc);
echo $token, "\n"; 
```

它似乎加密了，现在我只需要弄清楚我是否需​​要/可以剥离

```
Encrypted Data: -----BEGIN PGP MESSAGE-----
Version: GnuPG v1.4.5 (GNU/Linux) 
```

因为我正在加密 URL 的令牌

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T22:03:21.740

可以使用 PHP 的[gnupg-functions](http://php.net/manual/en/ref.gnupg.php)启用 Ascii 装甲输出。看看[`setarmor`](http://php.net/manual/en/function.gnupg-setarmor.php)。

添加这一行，最好在创建`$gpg`对象后直接添加：

```
$gpg -> setarmor(1); 
```

但是文档说 ascii 装甲将是默认的；你得到什么输出，你想要什么？邮寄时发送ASCII装甲很方便；否则你通常直接选择较小的二进制格式。从未见过剥离“标题”的 ascii 装甲 OpenPGP。

* * *

对于您的小问题：

> 最好远离 exec_shell() ...真的吗？

如果它无论如何都被禁用，则没有决定。只要 PHP 的 gnupg-functions 具有您需要的所有功能，就更喜欢它们；它们将您从麻烦的 gpg 接口中解脱出来（没有直接的 API，只有命令行工具）。引入任何漏洞的机会也更小。

> 哪些用户应该将 PGP 公钥存储在他们的 .gnupg 文件夹中？

为网络服务器选择一个可读（可能不可写？）但无法使用 HTTP 访问的任意文件夹（因此没有人能够获取您的密钥）。看来您已经意识到如何设置此路径。

> 它似乎加密了，现在我只需要弄清楚我是否需​​要/可以剥离
> 
> [剪辑]

我会为此使用一些正则表达式。

```
preg_match('/[\n\r]([=\n\r[:alnum:]]+)[\n\r]/', $token, $matches); 
```

应该做; 将所有行剥离为空或包含斜杠或冒号可能更优雅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:02:15.097

在基本级别上，请尝试以下代码。它没有添加 ASCII 装甲，但它确实将它变成了一种屏幕友好（非二进制）格式，您可以轻松地为自己装甲。

```
<?php
$data = 'Secret info';
$encrypted = null;
$ok = openssl_public_encrypt($data, $encrypted, $pubKey);

if ($ok) {
    // Optionally, encode it so you can echo it onscreen
    $encrypted = base64_encode($encrypted);
    echo $encrypted . "\n";
} else {
    echo "Failed to encrypt\n";
} 
```

我不知道您是否可以将 PGP 公钥直接导入 OpenSSH，但如果需要，[此答案可能会帮助您在密钥格式之间进行转换。](https://stackoverflow.com/questions/57384/inter-convertability-of-asymmetric-key-containers-eg-x-509-pgp-openssh)

# google-maps - 谷歌地图 - 将 v2 转换为 v3 - 拖动图标并检索纬度/经度

> ID：14267104
> 
> 赞同：0
> 
> 时间：2013-01-10T20:55:14.147
> 
> 标签：google-maps

我有一个多年前在 Google Map v2 中编写的应用程序，它显示了来自给定初始纬度/经度的地图，并在地图上放置了一个图标。该网页是一个带有经纬度文本框的表格。该页面允许用户将图标拖动到野火所在的实际位置。新的纬度/经度被放入文本框中，用户可以提交表单。我没有在 v3 中找到适合此过程的替代品。现在我收到一条错误消息，提示需要从 Google 地图获取新的 API 密钥。但我也知道在 5 月 v2 可能不再有效。所以我想将此应用程序更新到 v3。关于我在哪里可以找到这个的任何想法？这是旧页面的示例 [http://nfsdata.unl.edu/wildfire/testmap.asp](http://nfsdata.unl.edu/wildfire/testmap.asp) 该页面是用 ASP 编写的。而且我们无法访问此服务器上的 PHP。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:35:52.553

这是一个非常简单的应用程序。

您的 v2 代码：

```
<script type="text/javascript">
//<![CDATA[
function load() {
  if (GBrowserIsCompatible()) {
    var map = new GMap2(document.getElementById("map"));
    var center = new GLatLng(41.33,-96.95);
    map.addControl(new GLargeMapControl());
    map.addControl(new GMapTypeControl());      
    map.setCenter(center, 13);
    var marker = new GMarker(center, {draggable: false});
    map.addOverlay(marker);
    GEvent.addListener(map, "click", function(overlay, point) { 
                    if (overlay) { 
                            map.removeOverlay(overlay); 
                    } else { 
                            map.clearOverlays() 
                            map.addOverlay(new GMarker(point)); 
                            document.getElementById("loclats").value = point.lat(); 
                            document.getElementById("loclongs").value = point.lng(); 

                    } 
    }); 

  }
}

//]]>
</script> 
```

简单翻译为 v3（未测试）：

```
<script type="text/javascript">
//<![CDATA[
function load() {
    var center = new google.maps.LatLng(41.33,-96.95);
    map = new google.maps.Map(document.getElementById("map"),{
         center:center,
         zoom: 13
    });
   var marker = new google.maps.Marker({
         map: map,
         position:center
    });
google.maps.event.addListener(marker, "click", function() {
         marker.setMap(null);
    }); 
google.maps.event.addListener(map, "click", function(evt) { 
         var point = evt.latLng;
         marker.setPosition(point);
         document.getElementById("loclats").value = point.lat(); 
         document.getElementById("loclongs").value = point.lng(); 
    }); 

  }
}
//]]>
</script> 
```

[工作示例](http://www.geocodezip.com/v3_simpleMap_click4coords.html)

# emacs - 为 Emacs 选择字体字符串

> ID：14267111
> 
> 赞同：2
> 
> 时间：2013-01-10T20:55:39.167
> 
> 标签：emacs

我喜欢 Emacs 的这种特定字体：

```
 -unknown-DejaVu LGC Sans Mono-normal-normal-normal-*-*-*-*-*-m-0-iso10646-1 
```

我知道我喜欢它，因为我`M-x helm-select-xfont`使用 Emacs [helm](https://github.com/emacs-helm/helm/wiki)扩展（以前称为任何东西）对其进行了测试。此命令显示我系统上可用的字体列表，它允许我临时尝试它们。

如何将此字体设置为我的 Emacs 初始化文件中的默认字体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:58:35.563

```
(set-default-font "FONT-NAME") 
```

您将 FONT-NAME 替换为`-unknown-DejaVu LGC Sans Mono-normal-normal-normal-*-*-*-*-*-m-0-iso10646-1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:19:27.707

也许更简单的解决方案是使用菜单（虽然我反对使用菜单，但如果您不想弄脏手，请尝试以下操作）：

菜单：选项 -> 设置默认字体...，然后选择该字体（您也可以将其设置为**粗体**等）。

接下来，返回选项并点击“保存选项”。我相信这会为以后的会议保存这个。

# makefile - 强制 Makefile 中的先决条件顺序

> ID：14267123
> 
> 赞同：14
> 
> 时间：2013-01-10T20:56:15.087
> 
> 标签：makefile, gnu-make

我有一个第三方生成文件，我希望在先构建另一个自定义目标 (T2) 之前不要构建其中一个目标 (T1)。通常，这可以通过使 T2 成为 T1 的先决条件来实现。但是，T1 在其规则之一中使用 $^.. 所以，通过添加先决条件，我最终破坏了构建......我所拥有的是：

```
T1: x y z T2
    $(MAKE) -j $^;
    # fails because T2 should not be passed to the make!!!

.PHONY: T2

T2:
    #do some linking and prep for T1 
```

有什么好的方法可以确保 T2 在 T1 之前运行吗？（注：上面的例子其实稍微简化了一点。T1其实是Linux内核makefile中的vmlinux目标，所以重写它不仅困难，而且使代码不可移植。另外，我之前不能运行T2由于其他一些依赖关系，在内核上调用 make ）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-10T22:56:04.417

将 T2 作为[仅订单的先决条件](http://www.gnu.org/software/make/manual/make.html#Prerequisite-Types)：

```
T1: x y z | T2
    $(MAKE) -j $^;
    # Make will run the T2 rule before this one, but T2 will not appear in $^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:33:21.823

您能否在构建脚本中以正确的顺序调用 Make 并使用两个目标，例如

```
make T2 T1 
```

这样您就不需要对 T1 进行任何修改。

# selenium-webdriver - Selenium Web 驱动程序无法识别链接文本

> ID：14267126
> 
> 赞同：1
> 
> 时间：2013-01-10T20:56:19.340
> 
> 标签：selenium-webdriver

在我正在自动化的 Web 应用程序之一中，我发现我遇到了一些没有 ID 或类或任何关联或动态关联且无法捕获的元素，因此我必须使用链接文本，例如，“加拿大”，然后当我这样做时

```
driver.FindElements(By.LinkText("Canada")).Count > 0 , 
```

尽管“加拿大”就在那里，但我不会得到“真实”。有没有人遇到过这个并且知道为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:26:55.047

采用

```
driver.switchTo().frame("Your LinkText Frame Name");
driver.FindElements(By.LinkText("Canada")).Count > 0 ; 
```

并尝试。

我认为它可能会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:19:55.683

您确定“加拿大”确实在`<a>`标签中吗？`By.LinkText`用于搜索锚文本

您当然可以创建一个 XPath 来搜索`By.xpath`。像 "//*[contains(text(),'Canada')]" 之类的东西（这是我可以在不知道您的 HTML 结构的情况下给您的唯一 xpath）

# c++ - Opengl奇怪的旋转

> ID：14267132
> 
> 赞同：2
> 
> 时间：2013-01-10T20:56:34.000
> 
> 标签：c++, opengl, rotation, scaling, linear-algebra

我正在尝试旋转一个简单的三角形。问题是当它正确旋转时，它会减小它的大小直到它消失。

到目前为止我的一些代码：

```
// Vertices
GLfloat vertexArray[] = 
{
    1.0f, -1.0f, 0.0f,
    -1.0f, -1.0f, 0.0f,
    0.0f,  1.0f, 0.0f,
};

// Render funcion (called every frame)
void render()
{
    glClearColor(0.0f, 0.0f, 0.4f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    glBindBuffer(GL_ARRAY_BUFFER, vertexBufferObj);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertexArray), vertexArray, GL_DYNAMIC_DRAW); 
    glUseProgram(programID); // simple vertex/frag shader

    glDrawArrays(GL_TRIANGLES, 0, 3);

    // Swap buffers
    glfwSwapBuffers();
}

// Update funcion (called every frame before render function)
void update(float elapsedTime)
{
    printf("elapsedTime: %f \r", elapsedTime);

    float static theta = elapsedTime * 0.2f;

    for(int i = 0; i < 9; i+=3)
    {
        vertexArray[i] =   (vertexArray[i] * cosf(theta)) - (vertexArray[i+1] * sinf(theta));
        vertexArray[i+1] = (vertexArray[i] * sinf(theta)) + (vertexArray[i+1] * cosf(theta));
        vertexArray[i+2] = 0;
    }
} 
```

如您所见，我正在使用 for 循环旋转更新函数上的每个顶点。也许最好的方法是使用着色器（如果我错了，请纠正我），但我想在这里保持简单，只是为了说明问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:04:46.357

我认为问题在于，当您计算时，`vertexArray[i+1] = (vertexArray[i] * sinf(theta)) + (vertexArray[i+1] * cosf(theta));`您没有使用上一次迭代中的值`vertexArray[i]`，**而是**使用for 循环的第一次分配中计算的*新值。* `vertexArray[i]`

试试这个：

```
for(int i = 0; i < 9; i+=3)
{
    double tmp = vertexArray[i];

    vertexArray[i] = (tmp * cosf(theta)) - (vertexArray[i+1] * sinf(theta));
    vertexArray[i+1] = (tmp * sinf(theta)) + (vertexArray[i+1] * cosf(theta));
    vertexArray[i+2] = 0;
} 
```

# android - 即使我的应用程序没有运行，如何阻止音量按钮

> ID：14267136
> 
> 赞同：0
> 
> 时间：2013-01-10T20:56:40.450
> 
> 标签：android, android-activity, android-mediaplayer, android-event

即使我的应用程序没有运行，我也想阻止音量按钮怎么做..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:01:09.410

你不能这样做。音量按钮不能被您的应用程序监控或访问，除非它是当前的前台应用程序（即您有一个可见的活动并在屏幕上使用）。

# ruby-on-rails - 如何在 Rails 中重新定义/覆盖初始化变量？

> ID：14267141
> 
> 赞同：0
> 
> 时间：2013-01-10T20:57:02.897
> 
> 标签：ruby-on-rails, initialization, global-variables

我的一个应用程序将 yml 文件加载为 config/environment.rb 中的全局变量，以便可以全局使用该变量，如下所示。

CFILE = YAML::load(File.open('path/to/the/file'))

现在我需要定期将文件重新加载到同一个变量，因为文件会定期修改。我试过用上面的同一行添加一个 rake 任务，但它并没有真正做出改变。

如何更新变量？

* * *

[已解决] 用 CFILE.replace new_cfile 解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:00:49.710

你不应该那样做。：） 但是你可以！

```
Object.send(:remove_const, :CFILE) 
```

然后重新定义，就好像它从未存在过一样。

# apache - 在我的 API 中重写 Apache URL，例如 http://www.example.com/api/list/office?key=abc

> ID：14267143
> 
> 赞同：0
> 
> 时间：2013-01-10T20:57:04.307
> 
> 标签：apache, mod-rewrite

您好，目前我的 URL 模块如下：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^([a-zA-Z0-9/?+]+)$ index.php?a=$1 [nc] 
```

这将使以下

www.example.com/api/movie/details/50

前往

```
www.example.com/index.php?a=api/movie/details/50 
```

在 php 中，我将提供正确的代码。一切都很好。

但现在我希望能够在我的网址中执行以下操作：

```
www.example.com/api/movie/details/50/?key=abcdefgh&country=nl 
```

我希望这个 url 被重写为：

```
www.example.com/index.php?a=api/movie/details/50&key=abcdefgh&country=nl 
```

对于这样的事情，apache 重写代码会是什么？

对不起，我是这个领域的菜鸟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:24:23.920

尝试像这样替换规则：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^([a-zA-Z0-9/?+]+)$ index.php?a=$1&%{QUERY_STRING} [L,NC,QSA] 
```

# macos - 在后台线程上渲染 OpenGL，并且仍然可以在 Mac OSX 中使用 Cocoa Controls

> ID：14267147
> 
> 赞同：0
> 
> 时间：2013-01-10T20:57:14.277
> 
> 标签：macos, cocoa, opengl, nsopenglview

我正在开发基于 OpenGL 的 mac osx 控件。目前我正在使用 NSOpenGLView 和 CVDisplayLink 来协调我在后台线程上的渲染。这很好用，但我需要允许 Cocoa 控件显示在这个基于 OpenGL 的控件上。

我意识到您可以通过将 Cocoa 控件放在无边框窗口中来做到这一点，但是，对于我的用户来说，这似乎不是一个很好的工作流程。

或者，我可以让视图层支持并且我得到了它的工作，但是我不喜欢在主线程上渲染我的 OpenGL 内容，有时它会在帧速率下降时阻塞主线程。

是否有任何示例展示了如何实现两全其美？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-10T21:28:55.153

用于渲染的后台线程完全无关紧要。您只需要为视图启用图层支持，然后子视图/控件将在您的 OpenGL 内容之上正确合成。您还可以使用 CAOpenGLLayer 来使用 CALayers 进行更明确的分层。

# c# - 如何以编程方式添加 PushPin，我可以让它有一个自定义图像吗？

> ID：14267149
> 
> 赞同：2
> 
> 时间：2013-01-10T20:57:15.983
> 
> 标签：c#, maps, windows-phone-8

我正在尝试创建一个地图应用程序，但我找到的示例描述了`myMap.Children`我的`myMap`对象没有的列表:-(

我创建了一张地图，非常简单：

```
<maps:Map Visibility="Collapsed" Name="MyMap" Height="670" Width="400" ZoomLevel="10" Pitch="0" CartographicMode="Hybrid" Margin="30,0" /> 
```

那么我如何在 C# 中添加 PushPins，并且这些图像可以来自`Assets`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T23:53:07.297

请参阅诺基亚地图教程“[将图形添加到地图控件](http://www.developer.nokia.com/Resources/Library/Lumia/#!guide-to-the-maps.html;#toc_Addinggraphicstoamapcontrol)”或参阅 MSDN 的“[如何在 Windows Phone 8 中将 UIElements 添加到地图控件](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207037%28v=vs.105%29.aspx)”。

它主要是围绕添加您自己的 MapLayer，并在其上添加多个 MapOverlay：

```
private void DrawMapMarkers()
{
    MyMap.Layers.Clear();
    MapLayer mapLayer = new MapLayer();

    // Draw marker for current position
    if (MyCoordinate != null)
    {
        DrawAccuracyRadius(mapLayer);
        DrawMapMarker(MyCoordinate, Colors.Red, mapLayer);
    }

    ...

    MyMap.Layers.Add(mapLayer);
}

private void DrawMapMarker(GeoCoordinate coordinate, Color color, MapLayer mapLayer)
{
    // Create a map marker
    Polygon polygon = new Polygon();
    polygon.Points.Add(new Point(0, 0));
    polygon.Points.Add(new Point(0, 75));
    polygon.Points.Add(new Point(25, 0));
    polygon.Fill = new SolidColorBrush(color);

    // Enable marker to be tapped for location information
    polygon.Tag = new GeoCoordinate(coordinate.Latitude, coordinate.Longitude);
    polygon.MouseLeftButtonUp += new MouseButtonEventHandler(Marker_Click);

    // Create a MapOverlay and add marker
    MapOverlay overlay = new MapOverlay();
    overlay.Content = polygon;
    overlay.GeoCoordinate = new GeoCoordinate(coordinate.Latitude, coordinate.Longitude);
    overlay.PositionOrigin = new Point(0.0, 1.0);
    mapLayer.Add(overlay);
} 
```

为了对新的 WP8 Nokia Map 控件进行数据绑定，请使用新[Windows Phone Toolkit](http://phone.codeplex.com)中的 MapExtensions 。例如，这里是[如何使用 MapExtensions 在特定地理坐标中创建](http://phone.codeplex.com/SourceControl/changeset/view/80797#1336302)PushPin。

```
<maps:Map x:Name="Map" Grid.Row="1" Hold="OnMapHold">
    <maptk:MapExtensions.Children>
        <maptk:Pushpin x:Name="RouteDirectionsPushPin" Visibility="Collapsed"/>
        <maptk:MapItemsControl Name="StoresMapItemsControl">
            <maptk:MapItemsControl.ItemTemplate>
                <DataTemplate>
                    <maptk:Pushpin GeoCoordinate="{Binding GeoCoordinate}" Visibility="{Binding Visibility}" Content="{Binding Address}"/>
                </DataTemplate>
            </maptk:MapItemsControl.ItemTemplate>
        </maptk:MapItemsControl>
        <maptk:UserLocationMarker x:Name="UserLocationMarker" Visibility="Collapsed"/>
    </maptk:MapExtensions.Children>
</maps:Map> 
```

# javascript - 带有自定义 HTML 信息框的多个 Bing 地图图钉

> ID：14267154
> 
> 赞同：1
> 
> 时间：2013-01-10T20:58:07.607
> 
> 标签：javascript, html, asp.net-mvc-4, bing-maps

我一直在寻找一个使用自定义信息框加载多个 Bing 地图图钉的示例。经过大量的搜索和拼接。我已经找到了解决方案。这适用于我的电脑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T20:58:07.607

HTML 代码：

```
<div id="map" style="height: 800px; width: 100%"></div>
<link href="@Url.Content("~/Content/infoboxStyles.css")" rel="stylesheet" type="text/css">
<script type="text/javascript">
    $(function () {
        var map = null;
        var location = null;

        var pinInfoBox;  //the pop up info box
        var infoboxLayer = new Microsoft.Maps.EntityCollection();
        var pinLayer = new Microsoft.Maps.EntityCollection();
        var pushpinFrameHTML = '<div class="infobox"><a class="infobox_close" href="javascript:closeInfobox()"><img src="@Url.Action("../images/BingMap/close.png")"/></a><div class="infobox_content">{content}</div></div><div class="infobox_pointer"><img src="@Url.Action("../images/BingMap/pointer_shadow.png")"></div>';

        function loadMap() {
            // initialize the map
            map = new Microsoft.Maps.Map(document.getElementById('map'), {
                credentials: "Your Bing Map Id",
                enableSearchLogo: false

            });

        }

        function showPosition(position) {
            //display position

            pinInfobox = new Microsoft.Maps.Infobox(new Microsoft.Maps.Location(0, 0), { visible: false });
            infoboxLayer.push(pinInfobox);
            var location = position.coords;
            var i = 0;
            map.setView({
                zoom: 10,
                center: new Microsoft.Maps.Location(location.latitude,
                                                    location.longitude)
            });

            $.getJSON("Home/GetLocations", function (locationsArray) {
                $.each(locationsArray, function (index, location) {

                    var pushpinOptions = { icon: '../images/BingMap/discussion-icon-ny.png', width: 30, height: 40 };
                    var latLon = new Microsoft.Maps.Location(location.latitude, location.longitude);
                    var pin = new Microsoft.Maps.Pushpin(latLon, pushpinOptions);
                    pin.title = "Pin 1";
                    pin.description = "This is pin0000 1<br/><i>Here is custom HTML</i>";
                    pinLayer.push(pin);//add pushpin to pinLayer
                    Microsoft.Maps.Events.addHandler(pin, 'click', displayInfobox);
                    i++;

              });
                map.entities.push(pinLayer);
                map.entities.push(infoboxLayer);
            });
        }
        function displayInfobox(e) {
            if (e.targetType == "pushpin") {
                var pin = e.target;

                var html = "<span class='infobox_title'>" + pin.title + "</span><br/>" + pin.description + "<img src='http://www.w3schools.com/images/tryitimg.gif' alt='some_text'>";

                pinInfobox.setOptions({
                    visible: true,
                    offset: new Microsoft.Maps.Point(-33, 20),
                    htmlContent: pushpinFrameHTML.replace('{content}', html)
                });

                //set location of infobox
                pinInfobox.setLocation(pin.getLocation());
            }
        }

        function closeInfobox() {
            pinInfobox.setOptions({ visible: false });
        }

        function hideInfobox(e) {
            pinInfobox.setOptions({ visible: false });
        }

        function positionError(position) {
            alert("Error getting position. Code: " + position.code);
        }

        loadMap();
        navigator.geolocation.getCurrentPosition(showPosition, positionError);
    });
</script> 
```

CSS 文件：

```
.infobox {
    position: relative;
    background-color: white;
    border: 1px solid rgb(136, 136, 136);
    left: 0px;
    top: 0px;
    width: 256px;
}

.infobox_close {
    cursor: pointer;
    position: absolute;
    right: 5px;
    top: 5px;
    border: none;
}

.infobox_content {
    margin: 5px;
    font-family: Arial;
    font-size: 11px;
    line-height: 22px;
}

.infobox_pointer {
    width: 33px;
    height: 38px;
    overflow: hidden;
    position: relative;
    z-index: 1;
    left: 20px;
    top: -1px;
}

.infobox_title {
    font-weight: bold;
    font-size: 15px;
} 
```

# java - 如何使复杂的条件看起来不错并节省语句的数量？

> ID：14267155
> 
> 赞同：8
> 
> 时间：2013-01-10T20:58:07.423
> 
> 标签：java, conditional-statements

在我的 java 应用程序中，我有大量的条件只决定一个动作。我的问题是如何让它看起来不错（我使用 NetBeans，所以我更喜欢不会被其代码格式化功能破坏的解决方案）。我还希望有尽可能少的 if/else 语句，因为我*认为*它会使其更快。

我原来的代码是一团糟，所以我做了一个动作图：![充满条件的复杂动作图](../Images/525cc390cc48adb1d3abd3458815e137.png). 如果您想玩它，[请复制一份。](https://docs.google.com/drawings/d/1fevh-3vWebwYKiugC3Wb9eIwXcnWDQzlSaPJLeNT-VU/edit)请记住，该图对于 UML*语法*并不完美，部分原因是我使用谷歌文档制作的。

这是代码：

```
if (!config.get("checkForSpecials") || event.isNotSpecial()) {
    if (config.get("filterMode").equals("blacklist")) {
        if (!itemFilter.contains(event.getItem().getName())) {
            item.process();
        }
    } else if (config.get("filterMode").equals("whitelist")) {
        if (itemFilter.contains(event.getItem().getName())) {
            item.process();
        }
    } else {
        item.process();
    }
} 
```

有两点我不喜欢它 - 条件不太清楚（特别是当我展开完整的方法名称和配置字符串时），以及 process 方法调用存在 3 次这一事实。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T21:13:54.860

将布尔值分解并缓存来自方法调用的返回值有助于澄清代码。

此外，将所有结果绘制在逻辑表上会有所帮助。我使用[这个工具](http://www.ee.calpoly.edu/media/uploads/resources/KarnaughExplorer_1.html)来提供帮助。

使用链接工具：

```
A: config.get("filterMode").equals("blacklist")
B: config.get("filterMode").equals("whitelist")
C: filterContainsName (see below) 
```

该工具产生：

```
(!A && !B) || (!A && C) || (A && !C) 
```

这导致下面的代码（用一个小调整替换`(!A && C)`）`(B && C)`：

```
boolean filterContainsName = itemFilter.contains(event.getItem().getName());
boolean useBlacklist       = config.get("filterMode").equals("blacklist");
boolean useWhitelist       = config.get("filterMode").equals("whitelist");

if (!config.get("safeMode") || event.isSafe()) {
    if((!useBlackList && !useWhiteList) ||
       ( useWhiteList &&  filterContainsName) ||
       ( useBlackList && !filterContainsName)) {
        item.process();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T21:06:27.040

使用地图。映射的键是条件/案例，值是包含该条件逻辑的单个方法类/匿名用户接口。每当您遇到某种情况/情况时，您只需在地图中查找并执行相关功能。这样，您甚至可以将您的逻辑按条件拆分为单独的类（如果为了代码美观而需要）。作为额外奖励，当条件数 > 10 时，您可能会获得性能奖励。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T21:14:26.160

对我来说看起来不错。也许您可以隔离调用方法的有效条件`item.process()`以使其更易于理解。

```
if (!config.get("safeMode") || event.isSafe()) {
    if (isItemValidForProcess(config, itemFilter, event)) {
        item.process();
    }
}

boolean isItemValidForProcess(config, itemFilter, event) {
    String filterMode = config.get("filterMode");
    if (filterMode.equals("whitelist")) {
        return itemFilter.contains(event.getItem().getName());
    }
    if (filterMode.equals("blacklist")) {
        return !itemFilter.contains(event.getItem().getName());
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T22:58:25.033

信不信由你，该图并没有那么复杂:) 没有循环，它是线性的。

这是一个实现它的伪代码

```
void action()

    if <sort out specials>
        if <is it special>
            return;

    if <check for unsafe items>
        if not <safe items list contains item>
            return;

    if <filter status = on>
        if < filter mode = whitelist>
            if not <item is on filter>
                return;
        else // black list
            if not <item is on filter>
                return;

    // finally!            
    [process item] 
```

对于非常复杂的图表，答案是 ... **goto** ...

# bash - 保存返回码并在 bash 中返回

> ID：14267165
> 
> 赞同：10
> 
> 时间：2013-01-10T20:58:46.763
> 
> 标签：bash

我想在 bash 中执行此操作

```
#!/bin/bash

func(){
    return 1;
}

e=func
echo some text
exit e 
```

但我得到

```
exit: func: numeric argument required 
```

bash 中的 AFAIK 变量没有类型，如何将其“转换”为 int 以满足要求？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-10T21:00:07.123

您需要`$`在变量前面添加 a 以“取消引用”它。此外，您必须这样做：

```
func
e=$?
# some commands
exit $e 
```

`$?`包含最后执行的“命令”的返回码

将string`e=func`设置`func`为 variable `e`。

# google-maps - Drupal 7 Gmap 视图没有标记可见

> ID：14267169
> 
> 赞同：2
> 
> 时间：2013-01-10T20:59:12.103
> 
> 标签：google-maps, drupal-7, views, google-maps-markers

我已经安装了所有需要的模块。如果我将视图设置为表格，我可以看到“位置”字段（经度、纬度、...），但是当我使用 Gmap 作为格式时，我只能在视图页面上看到一个空的谷歌地图。

我做了一个截图：

![视图设置截图](../Images/a2f9d2d84a830245718431e050ea8d61.png)

什么地方出了错？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:48:43.593

1.  清除缓存
2.  尝试使用纬度/经度字段作为数据源，而不是 Location.module

# php - 使用 PHP 的实时 jQuery 缩略图

> ID：14267170
> 
> 赞同：0
> 
> 时间：2013-01-10T20:59:12.983
> 
> 标签：php, jquery, mysql

我正在尝试用我的 PHP 页面实现 jQuery 实时缩略图。在页面上，我正在检索事件信息以及以逗号分隔的缩略图值列表。该插件的工作方式与此略有不同，我很难调整我的脚本来工作。该插件位于[http://tutorialzine.com/2012/12/album-photo-previews-jquery/](http://tutorialzine.com/2012/12/album-photo-previews-jquery/)。在他们的示例中，他们使用数组，而我有一个逗号分隔的缩略图列表。我到目前为止的代码在这里......

```
<?php foreach ($events as $event) { ?>
    <div class="left13 section_home" style="margin-bottom:25px;">
        <h2><?php echo $event['event_title']; ?></h2>
        <div align="center">
            <?php foreach ($event['thumbnails'] as $thumbnail) { ?>
                <a href="#" data-images="<?php echo str_replace(',', '|', $event['thumbnails']); ?>" class="album">
                <img src="<?php echo ($event['thumbnails'] != '') ? base_url() . 'media/photos/thumbnail/' . $event['thumbnails'] : base_url() . 'images/no_photo_thumbnail.png'; ?>" alt="" title="" /><span class="preloader"></span></a>
                <p><?php echo ($event['event_description'] != '') ? substr($event['event_description'], 0, 200) : 'No description yet...'; ?></p>
                <a href="<?php echo base_url(); ?>profile/events/view/<?php echo $event['event_id']; ?>" class="section_more"><span class="swirl_left"><span class="swirl_right">View This Event</span></span></a>
            <?php } ?>
        </div>
    </div>
<?php } ?> 
```

我如何能够通过使用逗号分隔的缩略图值列表而不是教程中使用的数组来使这个脚本工作？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:29:06.737

我想通了，答案很简单。首先，我来自数据库的数据包括一个逗号分隔的缩略图列表。我只是使用适当的函数将该数据插入到脚本中。我现在唯一的问题是我需要将路径添加到逗号分隔列表中每个值的开头。有没有一个PHP函数可以做到这一点？下面是我几乎完成的代码。

```
<div class="content">
    <?php foreach ($events as $event) {
        // Create an array out of the comma separated list of thumbnails 
        $thumbnails = explode(',', $event['thumbnails']); ?>
        <div class="left13 section_home" style="margin-bottom:25px;">
            <h2><?php echo $event['event_title']; ?></h2>
            <div align="center">
                <a href="#" data-images="<?php echo str_replace(',', '|', $event['thumbnails']); ?>" class="album"><img src="<?php echo base_url() . 'media/photos/thumbnail/' . $thumbnails[0]; ?>" alt="" title="" /><span class="preloader"></span></a>
                <p><?php echo ($event['event_description'] != '') ? substr($event['event_description'], 0, 200) : 'No description yet...'; ?></p>
                <a href="<?php echo base_url(); ?>profile/events/view/<?php echo $event['event_id']; ?>" class="section_more"><span class="swirl_left"><span class="swirl_right">View This Event</span></span></a>
            </div>
        </div>
    <?php } ?>
</div> 
```

为了完成这个，我需要将以下内容添加到 $event['thumbnails'] 中每个项目的开头...

```
<?php echo base_url(); ?>media/photos/thumbnail/ 
```

那么它应该可以完美地工作。

# android - 在 Content Provider 中关闭 SQLiteDatabase

> ID：14267176
> 
> 赞同：3
> 
> 时间：2013-01-10T21:00:03.143
> 
> 标签：android, android-contentprovider, android-sqlite

我正在查看 Android SDK 附带的 NotePad 示例，我想知道是否有人可以澄清为什么变量 db 永远不会在更新函数中关闭？通常最好在不再使用数据库时关闭数据库以防止泄漏。想法？

```
 @Override
    public int update(Uri uri, ContentValues values, String where, String[] whereArgs) {

        // Opens the database object in "write" mode.
        SQLiteDatabase db = mOpenHelper.getWritableDatabase();

        ... // More code, db.close() is never called?!

        // Returns the number of rows updated.
        return count;
    } 
```

# ms-access - 访问选择唯一标识符的最新条目

> ID：14267184
> 
> 赞同：1
> 
> 时间：2013-01-10T21:00:30.430
> 
> 标签：ms-access, ms-access-2010

我有一个 Access 表，每个唯一标识符都有多个日期条目

```
Year      ID  TotalSpent
2003-2004 001 1000
2002-2003 001  900
2001-2002 001  100
2009-2010 002 8000
2008-2009 002 4000
2000-2001 003  100
1999-2000 003    0 
```

我想为要生成的每个唯一 ID 保留最新（顶部）条目

```
Year      ID  TotalSpent
2003-2004 001 1000
2009-2010 002 8000
2000-2001 003  100 
```

我查看了 top() 函数，但不能让它产生超过 1 个结果（而不是每个唯一 ID 1 个结果）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:09:39.427

Remou 提出了一个有效的观点，即唯一 ID 将是有益的，因为它将允许在未来引用第一行，但这可能是您无法控制的约束。

连字符年份的数据源有点尴尬，这会阻止简单的分组查询。第二个问题是，您不能只按`TotalSpent`字段的最大值进行分组，因为它可能不是最后一个字段（例如，大笔退款可能会影响一年的总数）。

我的解决方案包括查找每个 ID 的最新年份（查询 A），然后修改年份标签以连接到表 B。我不想对计算字段执行连接，因此我将其包装在另一个子查询（查询乙）。然后将其连接到原始表/查询以提取关键行和值。

```
SELECT YourTable.[YourYearField],
   YourTable.ID,
   YourTable.TotalSpent
FROM   (SELECT A.ID,
           [StartYear] & "-" & [EndYear] AS Grouping
    FROM   (SELECT YourTable.ID,
                   Max(Val(Right$([YourYearField], 4)))     AS EndYear,
                   Max(Val(Right$([YourYearField], 4)) - 1) AS StartYear
            FROM   YourTable
            GROUP  BY YourTable.ID) AS A
    GROUP  BY A.ID,
              [StartYear] & "-" & [EndYear]) AS B
   INNER JOIN YourTable
           ON ( B.Grouping = YourTable.[YourYearField] )
              AND ( B.ID = YourTable.ID )
GROUP  BY YourTable.[YourYearField],
      YourTable.ID,
      YourTable.TotalSpent; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:49:32.343

您可以使用此查询获取所需的`Year`和值：`ID`

```
SELECT ID, Max([Year]) AS MaxOfYear
FROM YourTable
GROUP BY ID; 
```

然后要获取相应的`TotalSpent`值，请将该 SQL 用于您加入的子查询`YourTable`。

```
SELECT y.Year, y.ID, y.TotalSpent
FROM
    YourTable AS y
    INNER JOIN
        (
            SELECT ID, Max([Year]) AS MaxOfYear
            FROM YourTable
            GROUP BY ID
        ) AS sub
    ON
            (y.Year = sub.MaxOfYear)
        AND (y.ID = sub.ID); 
```

# php - PHP 函数中的 HTML 代码

> ID：14267189
> 
> 赞同：0
> 
> 时间：2013-01-10T21:00:42.340
> 
> 标签：php, html

我在 php 函数中有 html 代码，它显示了我需要的一切。然而，我发现很难理解代码的使用`.`和`'`拆分时间。我希望更改布局以将值放在表中，但很难获得正确的语法。目前它看起来像这样；

```
$sub = $get_row['price']*$value; // Creates Subtotal of product
echo $get_row['name'].' x '.$value.' @ &pound;'.number_format($get_row['price'], 2).' = &pound; '.number_format($sub, 2).'
<a href="../anonymous/anonymous.master.php?page=cart.php&remove='.$id.'">[-]</a> 
<a href="../anonymous/anonymous.master.php?page=cart.php&add='.$id.'">[+]</a> 
<a href="../anonymous/anonymous.master.php?page=cart.php&delete='.$id.'">[Delete]</a><br/>'; 
```

是否有关于如何轻松设置样式的好教程/示例？谁能指导我应该如何设计？

我希望把它放在下面；

```
<table>
<th>Name</th>
<th>Price</th>
<th>Subtotal</th>
..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:17:46.763

如果您不介意使用无引号键（请参阅[访问数组但不引用键](https://stackoverflow.com/questions/3891832/accessing-arrays-whitout-quoting-the-key)），我发现尽可能将变量放在双引号内会使整个字符串更具可读性并减少您需要进行的连接量。

```
echo "$get_row[name] x  $value  @ &pound;".number_format($get_row['price'], 2)." = &pound; ".number_format($sub, 2); 
```

如果您想要更具可读性，请先将`number_format`计算存储在变量中。

此外，对于大的 html 字符串，我喜欢关闭 php 并使用标签来回显变量，因为它对我来说更具可读性（我更喜欢短回显标签 ( `<?=` `?>`)，但官方不鼓励它，所以我不能正式推荐它这里 ;） ）。

```
?>
<a href="../anonymous/anonymous.master.php?page=cart.php&remove=<?php echo $id?>">[-]</a> 
<a href="../anonymous/anonymous.master.php?page=cart.php&add=<?php echo $id?>">[+]</a> 
<a href="../anonymous/anonymous.master.php?page=cart.php&delete=<?php echo $id?>">[Delete]</a><br/>
<? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:08:06.887

我认为你正在寻找的是这样的

```
while($row - mysqli_fetch_array($here is your query)){
     $id = $row["id"];
     $name = $row["name"];

    $html .='
           <a href="../anonymous/anonymous.master.php?page=cart.php&remove='.$id.'">[-]</a>
           <a href="../anonymous/anonymous.master.php?page=cart.php&add='.$id.'">[+]</a> 
           <a href="../anonymous/anonymous.master.php?page=cart.php&delete='.$id.'">[Delete]</a><br/>';

 }
 ?>
<html>
    <?php echo $html;?> 
```

在这种情况下，它会遍历您的查询，并为找到的每个 ID 创建您的链接并将其附加到 $html 变量。然后，当您回显时，它们将按顺序显示。

# javascript - underscore.template 的 _.templateSettings 的正确胡子模板配置是什么？

> ID：14267191
> 
> 赞同：2
> 
> 时间：2013-01-10T21:00:48.620
> 
> 标签：javascript, regex, underscore.js, mustache

我四处寻找，我找不到一个真正有效的。

在 Mustache 中，当你抛出 2 curly 时，里面的字符串将被转义，如果你抛出 3，它不会。

```
// when you pass {foo: '"bar"'} as hash, the following template will be: 
 {{foo}}  // => &quot;bar&quot;
{{{foo}}} // => "bar" 
```

对？所以我创建了以下内容。

[http://jsfiddle.net/beatak/6s5PU/](http://jsfiddle.net/beatak/6s5PU/)

这显示了相反的插值和转义，这意味着未转义的 2 卷曲 3 转义的。当我在`escape`和之间切换`interpolate`时`_.templateSettings`，它不起作用。为什么？下划线模板优先于这三个 ( `escape`,`interpolate`和`evaluate`)？

我知道我现在忽略`evaluate`了 jsfiddle，如果它一起工作那将是很棒的，但现在，我想让 2 和 3 卷曲工作得很好......</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T22:56:04.857

搜索转义的正则表达式，然后插值，然后评估。这就是为什么您的转义形式`{{ }}`在您的未转义形式之前匹配`{{{ }}}`。您可以在源代码中自行更改顺序`_.template`。

```
var matcher = new RegExp([
  (settings.escape || noMatch).source,
  (settings.interpolate || noMatch).source,
  (settings.evaluate || noMatch).source
].join('|') + '|$', 'g'); 
```

更改上述行的顺序将更改优先级。

如果不想更改下划线优先级，可以使用更复杂的转义正则表达式。没有负面的后视很棘手，但我想出了：

```
/\{\{([^\{\}]+?)(?!\}\}\})\}\}/ 
```

这应该意味着：`{{`，后跟一个或多个*非大括号*字符，后面不应跟三花括号 ( `}}}`)，后跟双花括号`}}`。它适用于您的小提琴，希望对您有用。

# jquery - 使用 jQuery 将删除的文件添加到文件输入

> ID：14267193
> 
> 赞同：15
> 
> 时间：2013-01-10T21:00:58.327
> 
> 标签：jquery, drag-and-drop, file-io

我有一个自定义文件输入：

```
<div id="wrapper">
    <span id="fake-text-input"></span>
    <button id="select-a-file"></button>
    <input id="hidden-file-input" type="file" />
</div> 
```

`input[type="file"]`隐藏 ( ) 并通过侦听\触发和事件`display: none`来处理选择文件。`click``change`

我也想支持文件删除。`drop`当文件被放下时，我能够收听事件，`#fake-text-input`但我不知道如何将`drop`事件转发给`input[type="file"]`..这甚至可能吗？

我对文件输入不透明度技巧不感兴趣:)

```
$('body').on('drop', '#wrapper', function(e) {
    var file = e.originalEvent.dataTransfer.files[0];

    // I have the file.. now what?
}); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-28T03:55:36.437

这在谷歌浏览器中与我一起使用，现在其他浏览器的问题

```
$("input[type='file']").prop("files", e.originalEvent.dataTransfer.files); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-01T15:45:08.483

从@NassimPHP 的回答来看，这行得通！

```
$("input[type='file']").prop("files", e.dataTransfer.files); 
```

# algorithm - 在 Haskell 中快速获取所有大小为 N 的子集

> ID：14267196
> 
> 赞同：4
> 
> 时间：2013-01-10T21:01:12.833
> 
> 标签：algorithm, haskell, optimization, complexity-theory, set

以下（非最优）代码为某个子集生成所有大小为 N 的子集。

该代码有效，但正如我所说，它非常不理想。使用中间列表来避免 Set.insert 的 O(log(n)) 似乎没有帮助，因为稍后将列表重新转换为 Set 的成本很高

有人可以建议如何优化代码吗？

```
import qualified Data.Set as Set

subsetsOfSizeN :: Ord a => Int -> Set.Set a -> Set.Set (Set.Set a)
subsetsOfSizeN n s
  | Set.size s < n || n < 0 = error "subsetOfSizeN: wrong parameters"
  | otherwise = doSubsetsOfSizeN n s
 where doSubsetsOfSizeN n s
        | n == 0 = Set.singleton Set.empty
        | Set.size s == n = Set.singleton s
        | otherwise =
           case Set.minView s of
             Nothing -> Set.empty
             Just (firstS, restS) ->
               let partialN n = doSubsetsOfSizeN n restS in
               Set.map (Set.insert firstS) (partialN (n-1)) `Set.union` partialN n 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-11T20:24:52.403

这是受到帕斯卡三角形的启发。

```
choose :: [b] -> Int -> [[b]]
_      `choose` 0       = [[]]
[]     `choose` _       =  []
(x:xs) `choose` k       =  (x:) `fmap` (xs `choose` (k-1)) ++ xs `choose` k 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T23:16:01.060

> 该代码有效，但正如我所说，它非常不理想。

对我来说似乎并没有那么糟糕。`k`一组大小的大小子集的数量`n`增长`n `choose` k`得相当快`k ~ n/2`。因此，创建所有子集必须严重扩展。

> 由于稍后将列表重新转换为 Set 的成本很高，因此使用中间列表来避免`O(log(n))`of`Set.insert`似乎没有帮助。

嗯，我发现使用列表可以提供更好的性能。我认为不是渐近的，而是一个不可忽略的或多或少的常数因素。

但首先，您的代码效率低下很容易修复：

```
Set.map (Set.insert firstS) (partialN (n-1)) 
```

请注意，`Set.map`必须从头开始重建树。但是我们知道它`firstS`总是小于 中任何集合中的任何元素`partialN (n-1)`，因此我们可以使用`Set.mapMonotonic`可以重用集合的脊椎的那个。

而这个原则也是使列表有吸引力的原因，子集是按字典顺序生成的，所以`Set.fromList`我们可以使用更高效的`Set.fromDistinctAscList`. 转录算法产生

```
onlyLists :: Ord a => Int -> Set.Set a -> Set.Set (Set.Set a)
onlyLists n s
    | n == 0                    = Set.singleton Set.empty
    | Set.size s < n || n < 0   = error "onlyLists: out of range n"
    | Set.size s == n           = Set.singleton s
    | otherwise                 = Set.fromDistinctAscList . map Set.fromDistinctAscList $
                                                         go n (Set.size s) (Set.toList s)
      where
        go 1 _ xs = map return xs
        go k l (x:xs)
            | k == l = [x:xs]
            | otherwise = map (x:) (go (k-1) (l-1) xs) ++ go k (l-1) xs 
```

在我运行的几个基准测试中，它比使用`Set`s 的修正算法快 1.5 到 2 倍。

[反过来，在我的标准基准测试中，速度几乎是dave4420](https://stackoverflow.com/a/14268763/1011995)的两倍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T13:15:46.503

```
subsets :: Int -> [a] -> [[a]]
subsets 0 _ = [[]]
subsets _ [] = []
subsets k (x:xs) = map (x:) (subsets (k - 1) xs) ++ subsets k xs 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T22:53:47.617

首先，使用更好的算法。

看看你的最后一行：

```
 Set.map (Set.insert firstS) (partialN (n-1)) `Set.union` partialN n 
```

评估`doSubsetsOfSizeN k (Set.fromList $ 1:2:xs)`将涉及评估`doSubsetsOfSizeN (k-1) (Set.fromList xs)` *两次*（插入`1`时一次，插入时一次`2`）。这种重复是浪费的。

输入更好的算法。

```
mine :: Ord a => Int -> Set.Set a -> Set.Set (Set.Set a)
mine n s | Set.size s < n || n < 0 = Set.empty
         | otherwise               = Set.foldr cons nil s !! n
    where
        nil :: Ord a => [Set.Set (Set.Set a)]
        nil = Set.singleton Set.empty : repeat Set.empty
        cons :: Ord a => a -> [Set.Set (Set.Set a)] -> [Set.Set (Set.Set a)]
        cons x sets = zipWith Set.union sets
                               (Set.empty : map (Set.map $ Set.insert x) sets) 
```

`mine 9 (Data.Set.fromList [0..18]) `seq` ()`比`subsetsOfSizeN 9 (Data.Set.fromList [0..18]) `seq` ()`并且应该有更好的渐近性能。

我还没有尝试进一步优化这个。可能还有更好的算法。

（如果成本`insert`和`fromList`是问题，您应该考虑返回一个列表列表而不是一组集合。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T23:15:07.673

我找到了这个，也许它可以帮助你

```
f []  = [[1]]
f l   = (:) [u] l'
    where 
        u  = succ (head (head l))
        l' = (++) l (map(\x->(:) u x) l)

fix f n = if (n==0) then [] else f (fix f (n-1)) 
```

测试它

```
$ length $ (fix f 10) => 1023 -- The empty set is always include then == 1024 
```

# php - 关于array_map()，回调类型指的是什么？

> ID：14267197
> 
> 赞同：0
> 
> 时间：2013-01-10T21:01:13.427
> 
> 标签：php, functional-programming

多年来，我一直在努力尝试用 PHP 编写函数式代码，如下所示：

```
class Foo {
    function addOne($wu) {
        return $wu + 1;
    }
    function getBiggerThings(array $things) {
        $that = $this;
        return array_map(function ($i) use ($that) {
            return $that->addOne($i);
        }, $things); 
} 
```

今天有同事指出我可以这样写：

```
return array_map(array($this, 'addOne'), $things); 
```

我在 php.net 上找不到任何关于此的文档。我是否错误地阅读了[回调类型文档](http://php.net/manual/en/language.pseudo-types.php#language.types.callback)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:03:05.097

这记录在[有关 Callable 类型的文档中](http://php.net/types.callable)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T21:03:28.713

我想从[评论的 PHP 文档](http://php.net/language.types.callable)中强调以下内容：

> 实例化对象的方法作为数组传递，该数组包含索引 0 处的对象和索引 1 处的方法名称。

这实际上已经有很长一段时间了，可以说在 PHP 5.3 之前允许您使用匿名函数“解决方法”。

# r - tm::findAssocs 的数学 这个函数是如何工作的？

> ID：14267199
> 
> 赞同：3
> 
> 时间：2013-01-10T21:01:20.327
> 
> 标签：r, text-mining

我一直在使用`findAssoc()`文本挖掘（`tm`包），但意识到我的数据集似乎有些不对劲。

我的数据集是保存在一列 csv 文件中的 1500 个开放式答案。所以我像这样调用数据集并使用典型`tm_map`将其制成语料库。

```
library(tm)
Q29 <- read.csv("favoritegame2.csv")
corpus <- Corpus(VectorSource(Q29$Q29))
corpus <- tm_map(corpus, tolower)
corpus <- tm_map(corpus, removePunctuation)
corpus <- tm_map(corpus, removeNumbers)
corpus<- tm_map(corpus, removeWords, stopwords("english"))
dtm<- DocumentTermMatrix(corpus)

findAssocs(dtm, "like", .2)
> cousin  fill  ....
  0.28    0.20 
```

Q1。当我找到与 相关的术语时`like`，我没有将输出`like = 1`视为输出的一部分。然而，

```
dtm.df <-as.data.frame(inspect(dtm)) 
```

该数据框由 1500 个 obs 组成。1689 个变量..（或者是因为数据保存在一行 csv 文件中？）

Q2。即使`cousin`and`fill`出现过一次，当目标词`like`出现一次时，分数就不同了。他们不应该一样吗？

我试图找到数学`findAssoc()`但还没有成功。任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-04-03T18:43:50.613

我认为没有人回答你的最后一个问题。

> 我试图找到 findAssoc() 的数学，但还没有成功。任何建议都非常感谢！

findAssoc() 的数学运算基于 R 的 stats 包中的标准函数 cor()。给定两个数值向量，cor() 计算它们的协方差除以两个标准差。

因此，给定一个包含术语“word1”和“word2”的 DocumentTermMatrix dtm，使得 findAssocs(dtm,“word1”, 0) 返回值为 x 的“word2”，“word1”和“word2”的术语向量的相关性是 x。

对于一个冗长的例子

```
> data <-  c("", "word1", "word1 word2","word1 word2 word3","word1 word2 word3 word4","word1 word2 word3 word4 word5") 
> dtm <- DocumentTermMatrix(VCorpus(VectorSource(data)))
> as.matrix(dtm)
    Terms
Docs word1 word2 word3 word4 word5
   1     0     0     0     0     0
   2     1     0     0     0     0
   3     1     1     0     0     0
   4     1     1     1     0     0
   5     1     1     1     1     0
   6     1     1     1     1     1
> findAssocs(dtm, "word1", 0) 
$word1
word2 word3 word4 word5 
 0.63  0.45  0.32  0.20 

> cor(as.matrix(dtm)[,"word1"], as.matrix(dtm)[,"word2"])
[1] 0.6324555
> cor(as.matrix(dtm)[,"word1"], as.matrix(dtm)[,"word3"])
[1] 0.4472136 
```

第 4 和第 5 字以此类推。

另见[http://r.789695.n4.nabble.com/findAssocs-tt3845751.html#a4637248](http://r.789695.n4.nabble.com/findAssocs-tt3845751.html#a4637248)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T23:35:52.707

```
 findAssocs
#function (x, term, corlimit) 
#UseMethod("findAssocs", x)
#<environment: namespace:tm>

methods(findAssocs )
#[1] findAssocs.DocumentTermMatrix* findAssocs.matrix*   findAssocs.TermDocumentMatrix*

 getAnywhere(findAssocs.DocumentTermMatrix)
#-------------
A single object matching ‘findAssocs.DocumentTermMatrix’ was found
It was found in the following places
  registered S3 method for findAssocs from namespace tm
  namespace:tm
with value

function (x, term, corlimit) 
{
    ind <- term == Terms(x)
    suppressWarnings(x.cor <- cor(as.matrix(x[, ind]), as.matrix(x[, 
        !ind]))) 
```

那就是删除自我引用的地方。

```
 findAssocs(x.cor, term, corlimit)
}
<environment: namespace:tm>
#-------------
 getAnywhere(findAssocs.matrix)
#-------------
A single object matching ‘findAssocs.matrix’ was found
It was found in the following places
  registered S3 method for findAssocs from namespace tm
  namespace:tm
with value

function (x, term, corlimit) 
sort(round(x[term, which(x[term, ] > corlimit)], 2), decreasing = TRUE)
<environment: namespace:tm> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-30T22:21:24.847

顺便说一句，如果您的术语文档矩阵非常大，您可能想尝试以下版本`findAssocs`：

```
# u is a term document matrix (transpose of a DTM)
# term is your term
# corlimit is a value -1 to 1

findAssocsBig <- function(u, term, corlimit){
  suppressWarnings(x.cor <-  gamlr::corr(t(u[ !u$dimnames$Terms == term, ]),        
                                         as.matrix(t(u[  u$dimnames$Terms == term, ]))  ))  
  x <- sort(round(x.cor[(x.cor[, term] > corlimit), ], 2), decreasing = TRUE)
  return(x)
} 
```

这样做的好处是它使用不同的方法将 TDM 转换为矩阵`tm:findAssocs`。这种不同的方法可以更有效地使用内存，这意味着您可以使用`tm:findAssocs`无法处理的大型 TDM（或 DTM）。当然，使用足够大的 TDM/DTM 时，使用此功能也会出现有关内存分配的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T02:28:04.767

您的 dtm 有 1689 个变量，因为这是您观察中唯一词的数量（不包括停用词和数字）。可能“喜欢”这个词出现在你的 1500 次观察中不止一个，并且并不总是伴随着“表亲”和“填充”。你数过“喜欢”出现了多少次吗？

# linq - 使用 LINQ 按字母顺序对记录进行分组的最有效方法

> ID：14267202
> 
> 赞同：0
> 
> 时间：2013-01-10T21:01:35.597
> 
> 标签：linq, entity-framework

我正在尝试使用 LINQ 和实体框架创建一个包含大量联系人的 rolodex 样式分组。

我有一个`Contacts`模型，它需要包装在一个`GroupedContacts`模型中，其中包含一个`Initial`属性。我想，如果存在信件的记录，要填写的初始属性和要填充的`Contacts`列表：-

```
public char Initial { get; set; }
public List<Contacts> Contacts { get; set; } 
```

任何人都可以借给我他们的 LINQ 禅级别来实现这一点吗？

为了完整起见，我的联系人`get`目前如下所示：-

```
using (var ctx = new atomicEntities())
            {
                var contacts = from c in ctx.Contacts
                               where c.ClientId == clientid
                               select c;
                return contacts.ToList();
            } 
```

一如既往，感谢您的帮助:)

**编辑**

我重新阅读了我的问题几次，觉得它有点含糊。为了澄清，我试图创建这样的数据： -

```
{
        initial: 'c',
        contacts: [
            {
                name: 'Charlie Chaplin',
                primaryContact: {
                    type: 'phone',
                    value: '0123456789'
                }
            },
            {
                name: 'Charlie Sheen',
                primaryContact: {
                    type: 'email',
                    value: 'sheen@charliepower.com'
                }
            },
            {
                name: 'Colin Caterpiller',
                primaryContact: {
                    type: 'email',
                    value: 'colin@caterpiller.com'
                }
            }
        ]
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:05:55.980

看看这是否有效：

```
contacts
.GroupBy(c=>string.IsNullOrEmpty(c.Name) ? '' : c.Name[0])
.Select(g=>new GroupedContacts {Initial = g.Key, Contacts = g.ToList()}); 
```

这将按`Name`属性的第一个字符（如果`Name`为空或，则为空字符串`null`）分组，并将分组键返回为 ，`Initial`并将该组中的联系人列表返回为`Contacts`。

# vb.net - 用于在 Windows 窗体上停靠控制按钮的自定义大小

> ID：14267206
> 
> 赞同：2
> 
> 时间：2013-01-10T21:02:07.503
> 
> 标签：vb.net

我有一个停靠在 Windows 窗体 TabControl 中的按钮。我希望它停靠在右下角，同时保持我定义的大小。默认停靠样式为左、右、上、下或填充。

如何将按钮设置为自定义大小，同时保持停靠在右下角？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:08:23.563

您需要查看`Anchor`Property 而不是`Dock`.

# git - 应该使用什么 git 命令来删除之前的 git 信息

> ID：14267207
> 
> 赞同：0
> 
> 时间：2013-01-10T21:02:11.833
> 
> 标签：git, git-clone

我制作了一个 php 项目的副本（克隆）并将其重命名，以便我可以使用它的代码作为进一步开发的基础。在这一点上，我决定不使用 git 的分支功能，尽管我知道这可能是一种选择。我想基本上在这个新项目的 git 目录上执行一个新的初始化，这样就没有过去的记忆了。

我在想：

```
git reset --hard HEAD 
```

这有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:04:39.780

您可以删除`.git`存储库根目录中的目录。Git 将他知道的所有内容都存储在其中，因此将其删除将等同于从该 repo 中删除 git。您可以`git init`再次运行以更改 git 存储库中的目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T21:04:59.107

`git reset --hard HEAD`将您恢复到最新的提交，丢弃当前的更改。出于您的目的，您应该`.git`从 repo 中删除该目录。

# android - Android - 布局在视图底部且不覆盖

> ID：14267210
> 
> 赞同：0
> 
> 时间：2013-01-10T21:02:19.323
> 
> 标签：android, android-layout, overlay

我在布局视图时遇到问题。我希望“buttonsLayout”停靠在视图的底部。没问题，但我的“buttonsLayout”覆盖了“寻呼机”。我希望“寻呼机”在“buttonsLayout”开始的地方停止。

我已经阅读了很多帖子，但没有任何帮助。怎么了 ？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rootLayout"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<android.support.v4.view.ViewPager
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:background="@color/gray" >
</android.support.v4.view.ViewPager>

<RelativeLayout
    android:id="@+id/buttonsLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:orientation="horizontal" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="Left" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="Right" />
</RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:06:00.300

将 android:layout_above = "@+id/buttonsLayout" 添加到您的寻呼机布局中。所以寻呼机永远不会覆盖按钮。

PS 我在你的 xml 中看不到另一个关闭的 RelativeLayout 标记...

# php - 仅在 PHP 抛出错误时让 cron 发送邮件

> ID：14267215
> 
> 赞同：2
> 
> 时间：2013-01-10T21:02:52.850
> 
> 标签：php, email, cron, stderr

我有一些每 1 或 2 分钟运行一次小型 PHP 脚本的 cronjobs。显然我不想每分钟都收到电子邮件。我确实想知道 cron 何时失败或何时遇到任何类型的错误（= 通知、警告、错误或未捕获的异常）。

我的 PHP 脚本打印了大量元数据（使用`echo`），因此可以手动运行和检查。如果发生错误，我希望将所有元数据发送给我。如果没有发生错误，我不想要邮件，但是因为有输出，cron 无论如何都会给我发一封电子邮件。

有没有办法让 cron 只在发生错误时向我发送整个输出？

*   我不想手动发送电子邮件
*   我宁愿不使用 ob （如果这在 cronjob 中甚至可能的话）
*   我可以更改我的输出方法（`print`或自定义函数而不是`echo`等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:05:51.637

查看 crronic - 它是一个提供此功能的 shell 包装器：

[http://habilis.net/cronic/](http://habilis.net/cronic/)

请注意，如果发生错误（为了触发邮件），您需要以非零退出值退出。

# java - Java String For Loop不读取if语句

> ID：14267220
> 
> 赞同：0
> 
> 时间：2013-01-10T21:03:30.500
> 
> 标签：java, loops, if-statement

我想知道为什么这不起作用？我一直在看它一段时间，想知道为什么它不起作用。它似乎没有阅读 if 语句。一切对我来说都是正确的，即使你输入了一个像“A5”这样的合法字符串。

```
 System.out.println("PLEASE TYPE IN A COORDINATE, LETTER FIRST, THEN NUMBER.");
    System.out.println();
    System.out.print("CAPITALS ONLY, PLEASE. ENTER COORDINATE HERE: ");

    String placement = scan.next();
    String letter = placement.substring(0,1);
    String number = placement.substring(1);

    System.out.println(letter);
    //System.out.println(placement);
    System.out.println(number);

    String cord[] = {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J"};

    for(int s = 0; s < cord.length; s++)
    {
        //System.out.println(cord[s]);
        if(cord[s] == letter)
        {
            System.out.print("yay, it worked");
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T21:04:16.130

常见错误：`String/Object`比较应该使用`equals()`代替`==`（字符串文字比较除外）。

```
if(cord[s] == letter) 
```

应该

```
if(letter.equals(cords[s])) 
```

`equals()`比较对象内容的相等性。`==`比较引用相等性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:06:10.983

`letter`是一个`String`对象。在你的循环中，`cord[s]`也是一个`String`对象。但它们是两个*不同*的对象。

写作`letter == cord[s]`不比较值，它比较*引用*。您需要用于`.equals()`比较值，即 write `letter.equals(cord[s])`。

请参阅有关 Object 的 javadoc，尤其是`.equals()`/ `.hashCode()`。

# tridion - 我可以删除 SDL Tridion 默认组吗？

> ID：14267222
> 
> 赞同：4
> 
> 时间：2013-01-10T21:03:34.673
> 
> 标签：tridion

我假设默认的 Tridion 组（例如编辑、主编等）有一些独特或特别之处，因为创建新出版物似乎会自动获取这些组。

我实际上看到新出版物在创建时会在其指定的父级中获取所有组，这不一定是因为它们是默认组。

**我可以删除这些默认组吗？除了开箱即用的工作流程选项之外，还有什么理由从编程或技术角度将这些留在 Tridion 中？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T21:24:52.647

现有蓝图之外的新出版物将从默认组中获取默认权限。如果您不需要任何开箱即用的设置，您应该可以删除它们（但我从未尝试过，所以可能不可能）。在数据库中，它们有一个特殊标志 (IS_DEFAULT_GROUP)。

我倾向于使用它们来控制权限，并使我的其他组成为作者和编辑等的成员，这样我就可以立即获得所有出版物的一些基本权利。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T19:08:28.943

在 R5 安全性的原始设计中，可以删除预定义的组，这是有意的。如果您收到一条特定消息，告诉您这是不可能的，那么这个约束一定是后来添加的，大概是因为代码是为 2011 年重写的。

R5 中的想法是预定义组将提供良好的“开箱即用”体验，并为人们节省一些配置。（当然，它提供了与 R4 的向后兼容性。）其他特性与此相呼应：例如，如果您在蓝图中创建一个出版物，预定义组的权限将从父出版物克隆。对于您自己创建的组，这不会发生。毕竟 - 如果您选择进行自定义安全设置，那么期望您自己自定义所有内容是合理的，对吧？

我想不出阻止他们删除的充分理由。也许有人认为“自定义”方法太不友好了，但我在猜测。（有人知道真正的原因吗？）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T15:05:14.643

不，不可能删除预定义的组——您​​总是会收到一条错误提示。

我无法说出其中的原因，但我想它们被用于新出版物这一事实至少是部分原因。

不过，您不需要实际使用它们。

# c# - 从 DrawingGroup 获取图像

> ID：14267228
> 
> 赞同：3
> 
> 时间：2013-01-10T21:04:00.060
> 
> 标签：c#, wpf, image, bitmap, drawing

也许这是一个愚蠢的问题，但我在找到正确答案时遇到了一些问题：S

如何从`Bitmap`'s 或`Image`'s （或类似的东西）获取帧`DrawingGroup`？我真的不知道怎么咬它。我试图在互联网上寻找它，但在找到有用的东西时遇到了问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T22:02:39.227

如果您需要将图像用作[Image控件的](http://msdn.microsoft.com/en-us/library/system.windows.controls.image%28v=vs.110%29.aspx)[Source](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.source.aspx)，您可以简单地将绘图放入[DrawingImage 中](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingimage.aspx)：

```
var drawing = ...
var drawingImage = new DrawingImage(drawing);
image.Source = drawingImage; 
```

如果问题是关于创建[BitmapSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapsource.aspx)（即可以由[BitmapEncoder](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapencoder.aspx)通过[BitmapFrame](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapframe.aspx)编码的东西），则没有直接转换。您必须将图像放入中间 Image 控件并将该控件呈现到[RenderTargetBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)中，这是一个 BitmapSource：

```
var drawing = ...
var drawingImage = new DrawingImage(drawing);
var image = new Image { Source = drawingImage };
var bitmap = new RenderTargetBitmap(100, 100, 96, 96, PixelFormats.Pbgra32);
image.Arrange(new Rect(0, 0, bitmap.Width, bitmap.Height));
bitmap.Render(image); 
```

# c# - 通过 LINQ 解析 XML

> ID：14267229
> 
> 赞同：0
> 
> 时间：2013-01-10T21:04:09.797
> 
> 标签：c#, .net, xml, wcf, linq

我正在使用 WCF 做我的 Web 服务项目。问题是我有一个这样的 XML 文件：

```
<Cars>
    <Make Name="Honda">
        <Model Name="Accord" Year="2013">
            <Price>22480</Price>
        </Model>
        <Model Name="Civic" Year="2013">
            <Price>17965</Price>
        </Model>
        <Model Name="Crosstour" Year="2013">
            <Price>27230</Price>
        </Model>
        <Model Name="CR-V" Year="2013">
            <Price>22795</Price>
        </Model>
    </Make>
</Cars> 
```

我想检索用户提供属性`Price`的给定`Model`位置。`Name`我正在使用这种方法：

```
var DBCodes = from Cars in XmlEdit.Descendants("Cars")
    from Make in Cars.Elements("Make")
    from Made in Make.Elements("Made")
    where Made.Attribute("Name").Value == CarName //Variable for Name
    select Make;

foreach (var Make in DBCodes)
{
    if (Make != null)
        PriceOfCar = Make.Element("Price").Value.ToString();
    else
        break;
} 
```

但它不起作用。我在哪里犯错？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:17:53.430

```
var cars = 
    XDocument.Load("a.xml")
        .Descendants("Make")
        .Select(make => new
        {
            Name = make.Attribute("Name").Value,
            Models = make.Descendants("Model")
                         .Select(model => new{
                             Name = (string)model.Attribute("Name"),
                             Year = (int)model.Attribute("Year"),
                             Price = (int)model.Element("Price")
                         })
                         .ToList()
        })
        .ToList();

string userInput="Civic";
var price = cars.SelectMany(c => c.Models).First(m => m.Name == userInput).Price; 
```

* * *

您甚至可以直接从 xml 中获取价格，而无需将其转换为临时结构

```
string userInput="Civic";
var price = (int)XDocument.Load("a.xml")
            .Descendants("Model")
            .First(m => (string)m.Attribute("Name") == userInput)
            .Element("Price"); 
```

# node.js - 基准 Node.JS 服务器

> ID：14267232
> 
> 赞同：3
> 
> 时间：2013-01-10T21:04:23.090
> 
> 标签：node.js, redis, socket.io, benchmarking

我编写了一个 Node.JS 服务器，我想对其进行基准测试。它有以下组件，我想单独进行基准测试： - socket.io：它可以接受和处理多少个连续连接（饱和点在哪里） - redis：同上 - express：不想进行基准测试它

我知道互联网上有很多（不是很多）文档，但我不喜欢重新发明轮子，而且我不想花无数时间尝试一些结果证明是的解决方案不适合这份工作。

这就是为什么我在这里问你们：我应该使用什么来获取服务器可以同时处理而不会陷入困境的同时连接数量的数字/图表（无论如何）？监视进程的 cpu、内存和交换也很好（是的，是的，我知道我可以使用无数种技术或编写自己的脚本，但可能已经存在类似的东西）。

我不是在寻找答案，您将在其中粘贴指向我已经知道它存在的某个解决方案的链接，我希望以这种方式获得答案，以便提供它的人有一些实际经验并且可以真正做出点一两点，把我指向正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:02:12.210

您可以使用 ApacheBench`ab`测试服务器可能承受的负载 -[手册页](http://linux.die.net/man/1/ab)

一些不错的教程：

*   [nixcraft/howto-performance-benchmarks-a-web-server](http://www.cyberciti.biz/tips/howto-performance-benchmarks-a-web-server.html)

*   [petefreitag/使用 Apache Bench 进行简单的负载测试](http://www.petefreitag.com/item/689.cfm)

用法 ：

`$ ab -k -n 1000 -c 100 www.yourserver.com`

`-k`- 活着

`-n N`- 将`N`请求发送到服务器

`-c X`- 将`X`同时发送数据包

# android - Eclipse/编辑器显示透明视图，但在部署到设备时 - 不透明

> ID：14267238
> 
> 赞同：0
> 
> 时间：2013-01-10T21:04:38.210
> 
> 标签：android, layout, transparency, android-view

我正在构建一个具有一定透明度的 UI。我已经设法让不同的按钮和布局变得透明，所以当我想要有点透明的视图开始表现得很奇怪时，我有点惊讶。

在“设计器”中查看布局时，有问题的视图在 Eclipse 中显示为部分透明。但是当我将它部署到设备（三星 S2、Android 4）时，那个特定的视图会变成纯黑色。

解释它是如何构建的有点混乱，但我会尝试。

首先，我希望它看起来如何（透明度，它在 Eclipse 中的外观）：

![绿色圆圈周围的框是透明的](../Images/bda8306ad5e18551f5283d814f2be73a.png)

这是部署到设备时的样子（不透明）：

![在此处输入图像描述](../Images/ed4791a00fca56f9c54c070d810f2287.png)

**第一个问题：**

为什么 Eclipse/designer 与部署的版本不同？我已经清理了几次项目，我已经重新启动了 Eclipse 等。

下一步是看看结构如何。

简化版：

> [activity_main] --> [LinearLayout] --> [包括“logobar”]

“logobar”看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:background="#80000000" >

    <RadioGroup
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:orientation="horizontal" >

        <!-- Here is the box, and then the green circle inside the box -->
        <FrameLayout
            android:layout_width="50dp"
            android:layout_height="30dp"
            android:layout_marginLeft="10dp"
            android:background="@drawable/status_background"
            android:padding="0dp" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/bullet_ball_glass_green" />
        </FrameLayout>
        <!-- end of box -->

        <ImageView
            android:id="@+id/logo"
            android:layout_width="220dip"
            android:layout_height="55dip"
            android:background="@android:color/transparent"
            android:paddingLeft="10dp"
            android:src="@drawable/logo_demo" >
        </ImageView>
    </RadioGroup>

</RelativeLayout> 
```

这是可绘制的“status_background”（分层以获得一些斜面效果）：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape android:shape="rectangle" >
            <stroke
                android:width="1px"
                android:color="#77000000" />

            <corners android:radius="5dp" >
            </corners>
        </shape>
    </item>
    <item
        android:left="1dip"
        android:top="1dp">
        <shape android:shape="rectangle" >
            <stroke
                android:width="1px"
                android:color="#77ffffff" />

            <corners android:radius="5dp" >
            </corners>
        </shape>
    </item>
    <item
        android:left="1dip"
        android:top="1dp">
        <shape android:shape="rectangle" >
            <solid android:color="#11FFFFFF"/>
            <corners android:radius="5dp" >
            </corners>
        </shape>
    </item>
</layer-list> 
```

**那么第二个问题：** 谁能告诉我我在这里做错了什么？=) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:55:54.833

像往常一样，在尝试了几个小时之后，我去了心爱的 Stack Overflow，并且，和以前一样，我在发布后不久就设法解决了这个问题（好吧，它的一部分）。

所以，我无法解释为什么 Eclipse 显示透明度，但设备没有。奇怪的行为。

但是，如果我更改 status_background 如下，那么它适用于两者：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape android:shape="rectangle" >
            <solid android:color="@android:color/transparent"/>
            <stroke android:width="1px" android:color="#77000000" />
            <corners android:radius="5dp"></corners>
        </shape>
    </item>
    <item android:left="1dip" android:top="1dp">
        <shape android:shape="rectangle" >
            <solid android:color="@android:color/transparent"/>
            <stroke android:width="1px" android:color="#77ffffff" />
            <corners android:radius="5dp" ></corners>
        </shape>
    </item>
    <item>
        <shape android:shape="rectangle" >
            <solid android:color="#11FFFFFF"/>
            <corners android:radius="5dp" ></corners>
        </shape>
    </item>
</layer-list> 
```

# c++ - 以编程方式选择 QListWidget 中的多个项目

> ID：14267241
> 
> 赞同：8
> 
> 时间：2013-01-10T21:04:40.693
> 
> 标签：c++, qt, qlistwidget

可以选择单个项目/行，但我想设置选择的多个项目（小部件配置为允许这样做）。是否可以？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T21:15:01.883

您可以找到您想要选择的所有 QListWidgetItem* 项目并在它们上使用 QListWidgetItem::setSelected。如果为 QAbstractItemView::ExtendedSelection 配置列表，这应该支持多选。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-18T14:36:56.760

我在寻找相同答案时发现了这个问题。但是，我将 Python (PyQt5) 与 Qt Creator 一起使用。

使用 PyQt5，您可以使用以下方法设置 SelectionMode：

```
from PyQt5 import QtWidgets    

QtWidgets.QListWidget.setSelectionMode(2) 
```

在哪里

*   SelectionMode = 0 => 无选择
*   SelectionMode = 1 => SingleSelection
*   SelectionMode = 2 => 多选
*   SelectionMode = 3 => 扩展选择
*   SelectionMode = 4 => ContiguousSelection

[参考](https://doc.qt.io/archives/qt-4.8/qabstractitemview.html#SelectionMode-enum)

在 Qt Creator 中，您可以在此处找到此选项： [![在此处输入图像描述](../Images/e6e3be7cf455f4ec74556f6827621607.png)](https://i.stack.imgur.com/WTfmi.png)

# javascript - 在 Angular E2E 测试中使用 select(name).options

> ID：14267248
> 
> 赞同：3
> 
> 时间：2013-01-10T21:05:04.937
> 
> 标签：javascript, angularjs

我有一个多值选择器，我正在尝试为其编写 E2E 测试。使用`select(name).option`效果很好，但是当我尝试使用`select(name).options`来选择多个值时它不起作用。

我试图将一些代码放在一起进行演示，但无法使其正常工作。

HTML：

```
<html lang="en">
   <head>
      <title>End2end Test Runner</title>
      <script src="http://code.angularjs.org/1.0.1/angular-scenario-1.0.1.js"
      ng-autotest>
      </script>
   </head>
   <body ng-app="MyApp">
      <div ng-controller="MyAppCtrl">
         {{model.exampleValue}}
         <select id="a_selector"                 
            ng-model="model.selectedItems"
            ng-options="item.name for item in model.items"
            multiple="multiple">
         </select>
      </div>
   </body> 
```

Javascript：

```
var app = angular.module('MyApp', ['ngResource'])
app.controller('MyAppCtrl', function($scope) {         
     $scope.model = {};
     $scope.model.exampleValue="an example value";
     $scope.model.items = [{"name": "Product1"}, {"name": "Product2"}];
});
app.config(['$routeProvider', function ($routeProvider, $scope) {
  $routeProvider.when('/', {controller:MyAppCtrl});
}]);
describe('my app', function() { 
  it('should display the home page', function() {                  
    browser().navigateTo('/');
    // this should work (when I can fix this code!)
    select("model.selectedItems").option("Product1");
    expect(element("#a_selector option:selected").count()).toEqual(1)

    // this doesn't, nothing is selected
    select("model.selectedItems").options("Product1", "Product2");
    expect(element("#a_selector option:selected").count()).toEqual(2)
  });
}); 
```

线

```
select("model.selectedItems").option("Product1"); 
```

失败并显示错误消息：

```
Selector select[ng\:model="model.selectedItems"] did not match any elements. 
```

如果有人可以（1）帮助我确定上述代码根本不起作用的原因，以及（2）帮助我理解为什么不起作用，我将不胜感激`select(name).options`。（我知道我可以使用其他技术来实现相同的目标，但是`select`生产代码中的 real 也有一个`ng-change`属性，当我尝试变通方法时不会触发）。

谢谢，

格雷姆·路德维希。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:21:19.803

我仍在试图弄清楚为什么`select(name).option()`不起作用，但我可以通过以下修改使您的示例正常工作：

1.  在 angular-scenario.js 之前包含 angular.js
2.  去掉 ngResource 依赖——这里不需要
3.  放在`<span>{{model.selectedItems}}</span>`你的`<select>`标签后面，看看你选择了什么。

一旦我弄清楚第二部分，我会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T12:10:19.017

不`select("model.selectedItems").option("Product1");`应该`select("#a_selector").option("Product1");`取而代之吗？

# jasper-reports - textField 位置和 isStretchWithOverflow 基线偏移问题

> ID：14267251
> 
> 赞同：1
> 
> 时间：2013-01-10T21:05:17.260
> 
> 标签：jasper-reports

我有一个带有*textField*元素的 JasperReport。

简单的 XML：

```
<textField isStretchWithOverflow="true">
  <reportElement uuid="2e3604dd-1f53-44d6-ab66-b3e41732955b" x="247" y="229" width="232" height="20"/>
  <textElement>
    <font fontName="CBSwiss721BT-Light"/>
  </textElement>
  <textFieldExpression>
    <![CDATA[$F{meetingPurpose}]]>
  </textFieldExpression>
</textField> 
```

如果字段的***meetingPurpose***值的长度小于*textField*的宽度，它会打印得很漂亮，但是如果长度导致文本环绕和拉伸*textField*，则文本的基线会向下移动 1/2 X 高度。

我看不到任何可以访问的单元格填充，我无法弄清楚。如果是功能，是否有关闭开关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:39:04.723

我可能完全错误地阅读了您的问题，但是要访问 Padding 右键单击​​元素选择填充和边框

它会改变你的xml看起来像这样

```
<textField isStretchWithOverflow="true" isBlankWhenNull="true">
    <reportElement x="0" y="0" width="100" height="20"/>
    <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1"/>
    <textElement/>
    <textFieldExpression><![CDATA[$F{SYSDATE}]]></textFieldExpression>
</textField> 
```

# css-tables - Squarespace中表格的CSS代码？

> ID：14267255
> 
> 赞同：0
> 
> 时间：2013-01-10T21:05:27.453
> 
> 标签：css-tables, squarespace

我正在寻找有关创建带有图像和文本换行的纯色表格的 CSS 代码。这将在 Squarespace 中使用。有谁知道我怎么能得到它？

```
 <html>
    <head>
        <style type="text/css">
            .mycss {
                background-color: #997E6E;
                border: 21px solid #997E6E;
                color: #FFFFFF;
                font-family: arial, helvetica, sans-serif;
                font-size: 15px;
                font-weight:normal;
                letter-spacing: 1pt;
                line-height:1;
                word-spacing: 2pt;
                text-align: left;
            }
        </style>
    </head>
    <body>
        <p class="mycss">
            As my teacher says, our bodies are the best technology we have! Through it, we can transform ourselves from being blocked and out of balance into being energetic, clear-minded and open-hearted.
        </p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T02:07:09.290

如果您在开发人员平台之外执行此操作...

我会把类放在一个 div 而不是 p

```
<div class="mycss">
    <p> As my teacher says, our bodies are the best technology we have! Through it, we can transform ourselves from being blocked and out of balance into being energetic, clear-minded and open-hearted.</p>
</div> 
```

你的CSS看起来很好的边界。如果要在此 div 内将图像浮动到右侧，请添加

```
.mycss img { 
float:right;
} 
```

# java - 我在 Eclipse 中收到 NullPointerException 错误

> ID：14267258
> 
> 赞同：-1
> 
> 时间：2013-01-10T21:05:43.013
> 
> 标签：java, arrays, arraylist, nullpointerexception

我在 Eclipse 中收到 NullPointerException 错误。现在的代码：

爪哇：

```
import java.io.File;
import java.io.IOException;
import java.util.Scanner;
import java.util.ArrayList;
import java.util.Collections;
import static java.lang.System. * ;

public class MadLib {
    private ArrayList<String> verbs = new ArrayList<String>();
    private ArrayList<String> nouns = new ArrayList<String>();
    private ArrayList<String> adjectives = new ArrayList<String>();

    public MadLib() {}

    public MadLib(String fileName) {
        //load stuff
        try {
            Scanner file = new Scanner(new File(fileName));
        }
        catch(Exception e) {
            out.println("Houston we have a problem!");
        }
    }

    public void loadNouns() {
        nouns = new ArrayList < String > ();
        try {
            Scanner chopper = new Scanner("nouns.dat");
            while (chopper.hasNext()) {
                nouns.add(chopper.next());
            }
            chopper.close();
            out.println(nouns);
        }
        catch(Exception e) {
            out.println("Will");
        }
    }

    public void loadVerbs() {
        verbs = new ArrayList < String > ();
        try {
            Scanner chopper = new Scanner("verbs.dat");
            while (chopper.hasNext()) {
                verbs.add(chopper.next());
            }
            chopper.close();
        }
        catch(Exception e) {
            out.println("run");
        }
    }

    public void loadAdjectives() {
        adjectives = new ArrayList < String > ();
        try {
            Scanner chopper = new Scanner("adjectives.dat");
            while (chopper.hasNext()) {
                adjectives.add(chopper.next());
            }
            chopper.close();
        }
        catch(Exception e) {}
    }

    public String getRandomVerb() {
        String verb = "";
        int num = 0;
        num = (int)(Math.random() * verbs.size());
        verb = verbs.get(num);
        return verb;
    }

    public String getRandomNoun() {
        String noun = "";
        int num = 0;
        num = (int)(Math.random() * nouns.size());
        noun = nouns.get(num);
        return noun;
    }

    public String getRandomAdjective() {
        String adj = "";
        int num = 0;
        num = (int)(Math.random() * adjectives.size());
        adj = adjectives.get(num);
        return adj;
    }

    public String toString() {
        String output = "The " + getRandomNoun() + getRandomVerb() + " after the " + getRandomAdjective() + getRandomAdjective() + getRandomNoun() + " while the " + getRandomNoun() + getRandomVerb() + " the " + getRandomNoun();
        return output;
    }
} 
```

Eclipse 指出了在线上发生的问题，`num = (int)(Math.random()*nouns.size());`但这对我来说似乎没有多大意义。

我`ArrayList<String>`在方法上初始化了私有`loadNouns`。我最初是在`ArrayList<String> nouns`处初始化的`getRandomNoun()`，但这引发了一个不同的错误，因此建议我将初始化语句移至该`loadNouns`方法。

跑者类：

```
import static java.lang.System.*;

public class Lab16d 
public static void main( String args[] ) {
     //make a new MadLib
     MadLib fun = new MadLib();
     out.println(fun);
} 
```

更新：

真正的问题似乎是`ArrayList<String> nouns`永远不会“加载”应该从 nouns.dat 文件中扫描的单独字符串

更新 2：

爪哇：

```
import java.io.File;
import java.io.IOException;
import java.util.Scanner;
import java.util.ArrayList;
import java.util.Collections;
import static java.lang.System. * ;

public class MadLib {
    private ArrayList<String> verbs = new ArrayList<String>();
    private ArrayList<String> nouns = new ArrayList<String>();
    private ArrayList<String> adjectives = new ArrayList<String>();

    public MadLib() {
        loadNouns();
        loadVerbs();
        loadAdjectives();
        out.println(nouns);
    }

    public MadLib(String fileName) {
        //load stuff
        loadNouns();
        loadVerbs();
        loadAdjectives();
        try {
            Scanner file = new Scanner(new File(fileName));
        }
        catch(Exception e) {
            out.println("Houston we have a problem!");
        }
    }

    public void loadNouns() {
        nouns = new ArrayList < String > ();
        try {
            //nouns = new ArrayList<String>();
            String nou = "";
            Scanner chopper = new Scanner(new File("nouns.dat"));

            //chopper.nextLine();
            while (chopper.hasNext()) {
                nou = chopper.next();
                out.println(nou);
                nouns.add(nou);
                //chopper.nextLine();
            }
            //chopper.close();
            out.println(nouns.size());
        }
        catch(Exception e) {
            out.println("Will");
        }
    }

    public void loadVerbs() {
        verbs = new ArrayList < String > ();
        try {
            Scanner chopper = new Scanner(new File("verbs.dat"));
            while (chopper.hasNext()) {
                verbs.add(chopper.next());
                chopper.nextLine();
            }
            chopper.close();
        }
        catch(Exception e) {
            out.println("run");
        }
    }

    public void loadAdjectives() {
        adjectives = new ArrayList < String > ();
        try {
            Scanner chopper = new Scanner(new File("adjectives.dat"));
            while (chopper.hasNext()) {
                adjectives.add(chopper.next());
                chopper.nextLine();
            }
            chopper.close();
        }
        catch(Exception e) {}
    }

    public String getRandomVerb() {

        String verb = "";
        int num = 0;
        num = (int)(Math.random() * (verbs.size() - 1));
        verb = verbs.get(num);
        return verb;
    }

    public String getRandomNoun() {
        String noun = "";
        int num = 0;
        if (nouns == null) {
            loadNouns();
        }
        double rand = (Math.random());
        num = (int)(rand * (nouns.size() - 1));
        out.println(num);
        noun = nouns.get((int) num);
        out.print(noun);
        return noun;
    }

    public String getRandomAdjective() {
        String adj = "";
        int num = 0;
        num = (int)(Math.random() * (adjectives.size() - 1));
        adj = adjectives.get(num);
        return adj;
    }

    public String toString() {
        String output = "The " + getRandomNoun() + getRandomVerb() + " after the " + getRandomAdjective() + getRandomAdjective() + getRandomNoun() + " while the " + getRandomNoun() + getRandomVerb() + " the " + getRandomNoun();
        return output;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:07:06.183

您正在创建一个 MadLib 的实例，然后在 Runner 类的 println 中打印该对象...

```
 //make a new MadLib
     MadLib fun = new MadLib();
     out.println(fun); 
```

out.println 调用您在 MadLib 中覆盖的 toString() 方法...

```
 String output = "The " + getRandomNoun() + getRandomVerb() + " after the " + getRandomAdjective() + getRandomAdjective() + getRandomNoun() + " while the " + getRandomNoun() + getRandomVerb() + " the " + getRandomNoun();
    return output; 
```

您的 MadLib 对象有 3 个您从未初始化过的 ArrayList，因此它们为空...

```
private ArrayList<String> verbs;
private ArrayList<String> nouns;
private ArrayList<String> adjectives 
```

解决这个问题的最简单方法`NullPointerException`是初始化变量....

```
private ArrayList<String> verbs = new ArrayList<String>();
private ArrayList<String> nouns = new ArrayList<String>();
private ArrayList<String> adjectives = new ArrayList<String>(); 
```

但是，我真正认为您想要做的是在构造对象时加载所有名词、动词和形容词，以便您的 toString 实际上打印一些有用的东西。我也会将此添加到您的构造函数中...

```
public MadLib() {
  loadNouns();
  loadVerbs();
  loadAdjectives();
} 
```

**编辑：** 您的 getRandom 方法需要检查列表是否为空以避免 IndexOutOfBounds 异常...

```
public String getRandomVerb() {
    String verb = "";

    if (!verbs.isEmpty()) {
        int num = (int) (Math.random() * verbs.size() - 1);
        verb = verbs.get(num);
    }

    return verb;
}

public String getRandomNoun() {
    String noun = "";

    if (!nouns.isEmpty()) {
        int num = (int) (Math.random() * nouns.size() - 1);
        noun = nouns.get(num);
    }

    return noun;
}

public String getRandomAdjective() {
    String adj = "";

    if (!adjectives.isEmpty()) {
        int num = (int) (Math.random() * adjectives.size());
        adj = adjectives.get(num);
    }

    return adj;
} 
```

希望有帮助

# sql - 添加主键后如何重建表？

> ID：14267264
> 
> 赞同：0
> 
> 时间：2013-01-10T21:05:55.123
> 
> 标签：sql, sql-server-2008, foreign-keys, primary-key, rdbms

我想向现有表添加主键。我认为最好的方法是做`SELECT INTO`一个临时表，删除并创建表，然后`INSERT INTO`从临时表中创建表。是否有任何问题可能由此产生？

这是最佳做法吗？

```
SET XACT_ABORT ON

--SAVE DATA
SELECT * INTO #TempTable
FROM dbo.OldTable AS tt

-- Drop and Create dbo.OldTable

-- Restore data
INSERT INTO dbo.OldTable (Column1, Column2, Column3)
SELECT
    tt.Column1,
    tt.Column2,
    tt.Column3
FROM #TempTable AS tt

COMMIT TRANSACTION -- roll back in case there are any FK issues 
```

此数据库在 SQL Server 2008 中实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:10:32.657

您不必重新创建表。使用这个脚本：

```
ALTER TABLE dbo.YourTable ADD PRIMARY KEY (KeyColumn1,KeyColumn2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:08:42.997

1.  根据需要创建新表。
2.  插入新表。
3.  放下旧桌子。
4.  重命名新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:15:04.727

最好的方法是在“现场”添加 PK，因为这样可以节省处理时间和使用的日志空间。

所以只需执行以下操作：

```
alter table dbo.OldTable add constraint PK_OldTable primary key (xxx) 
```

# java - 如何使用 javassist 获取常量池表

> ID：14267267
> 
> 赞同：1
> 
> 时间：2013-01-10T21:05:59.433
> 
> 标签：java, javassist

我们如何使用 javassist 从类文件中获取常量池表？

我已经写了代码到这里：

```
ClassPool pool = ClassPool.getDefault();
pool.insertClassPath(filepath);
CtClass cc = pool.get(filename); 
```

现在请告诉我进一步的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:21:08.990

拥有 CtClass 后，您只需访问 classFile 对象即可检索常量池，如下所示：

```
ClassPool pool = ClassPool.getDefault(); 
pool.insertClassPath(filepath); 
CtClass cc = pool.get(filename);
ConstPool classConstantPool = cc.getClassFile().getConstPool() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-02T12:53:42.783

如果有人在这里绊倒，可以以更有效的方式完成（不使用 a `ClassPool`）：

```
try (InputStream inputStream = Files.newInputStream(Paths.get(filepath))) {
  return new ClassFile(new DataInputStream(inputStream)).getConstPool();
} 
```

* * *

如果性能真的很重要，可以对其进行优化，以便只从文件中读取常量池：

```
try (InputStream inputStream = Files.newInputStream(Paths.get(filepath))) {
  return readConstantPool(new DataInputStream(inputStream));
} 
```

在哪里：

```
// copied from ClassFile#read(DataInputStream)
private static ConstPool readConstantPool(@NonNull DataInputStream in) throws IOException {
  int magic = in.readInt();
  if (magic != 0xCAFEBABE) {
    throw new IOException("bad magic number: " + Integer.toHexString(magic));
  }

  int minor = in.readUnsignedShort();
  int major = in.readUnsignedShort();
  return new ConstPool(in);
} 
```

# django - Django 加载初始数据可防止显示错误

> ID：14267269
> 
> 赞同：0
> 
> 时间：2013-01-10T21:06:11.083
> 
> 标签：django, django-forms, django-views

我有一个带有表单的 Django 页面。我有一些视图代码可以正常处理表单，但如果可用，则使用来自用户会话的初始数据预填充表单。这样当用户返回此表单时，他们会看到之前选择的选项（是的，表单非常广泛）。

我的观点，py：

```
def myView(request):   
    ...
    form = ProjectInfoForm(request.POST or None)
    if form.is_valid():
        # process form, including a redirect
        ...

    # if there is form data in the session, let's use that
    # to initaliaze our from with data
    if key in request.session:
        form = ProjectInfoForm(
            initial={
                 'model': request.session.get('model'),
                 ...
            }
        )
    return render_to_response(template_name, {
        ...
    }, RequestContext(request)) 
```

问题是：如果我加载会话数据，那么页面不会显示任何错误消息。表单确实没有通过验证，我只是没有得到任何输出。这里有什么冲突`initial`吗？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:10:24.393

好吧，从那个片段中，如果找到了会话数据，那么您将完全重新初始化表单：包含 POST 数据和任何错误的原始、经过验证的实例现在已经被处理掉了。`if`据推测，如果请求不是 POST ，您可能只想输入那一秒。

# php - 检查某事是否在时间之前

> ID：14267270
> 
> 赞同：0
> 
> 时间：2013-01-10T21:06:22.937
> 
> 标签：php, time

我想做类似的事情：

```
$time = time();
//Store the time in the dabase

//Some time later, say three hours this code runs
// so if your time() was 2pm its now 5pm when this statement
// is run.
if($time < 4 hours){
    // do something.
} 
```

但我不确定最干净的方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:22:56.017

OOP 风格

```
$start = new DateTime;

// Do something

if ($start < new DateTime('-4 hours')) {
    // Do something different
} 
```

[http://php.net/datetime](http://php.net/datetime)

非OOP方式也很简单

```
$start = time();

// Do something

if ($start < strtotime('-4 hours')) {
    // Do something different
} 
```

[http://php.net/strtotime](http://php.net/strtotime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:23:02.560

time() 将以秒为单位返回 php 时间。当您的第二个代码块运行时，您想再次检查 time()，因此您应该执行以下操作：

```
$timeNow = time();
if($savedTime < $timeNow-14400){
    // do something
} 
```

其中 14400 是以秒为单位的 4 小时 (60*60*4 == 14400)。当然，可能没有理由将 time() 设置为变量，但以防万一。

# ios - 如何通过单击按钮以编程方式增加自定义 uiview 及其在 uiviewcontroller 中的所有子视图的宽度

> ID：14267271
> 
> 赞同：1
> 
> 时间：2013-01-10T21:06:25.493
> 
> 标签：ios, uiview

我有一个自定义 UIview，我需要动态增加它的宽度以及它的子视图的宽度，比如 webviews 和另一个标签等。

我用过 `_view.setframe - xframe;`// 这增加了宽度，但内容停留在它所在的位置 _view setneedsdisplay 或 needslayout 不起作用。在控制器中添加视图之前是否使用自动调整大小掩码？如何？

有人可以告诉我如何去做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:40:01.163

您需要将父级上的 autoResizesSubviews 设置为 YES，然后为每个子视图设置 autoresizingmask。这是 autoresizingmask 的文档

[https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW5](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW5)

这张来自苹果的图片应该可以帮助您理解： ![在此处输入图像描述](../Images/9c79c943ca13c3fddb49e3baa2eddd79.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:59:23.273

感谢您的输入，但我通过回忆 [self layoutSubviews];// 并更改宽度来工作

# .net - DevExpress XtraGrid LayoutView - 如何显示图像

> ID：14267277
> 
> 赞同：0
> 
> 时间：2013-01-10T21:07:02.707
> 
> 标签：.net, winforms, devexpress, xtragrid

我有一个包含两个字段的数据表：`skin_name`和`image_path`。示例皮肤图像存储在 HDD 上。

现在，我想通过 LayoutView（轮播模式）在 GridControl 中显示皮肤。

我在gridcontrol中加载了数据，现在，我怎么能显示图像呢？

我不想将图像存储在数据库中。

您能否发布示例代码？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:15:51.563

请查看以下知识库文章：
[**A2707** - 如果数据源仅包含指向图像的链接，如何在网格列中显示外部图像](http://www.devexpress.com/Support/Center/kb/p/A2707.aspx)。

本文示例代码：[**E538**](http://www.devexpress.com/Support/Center/p/E538.aspx)

# c# - 如何在c#中替换字符串模式

> ID：14267280
> 
> 赞同：1
> 
> 时间：2013-01-10T21:07:29.710
> 
> 标签：c#, xml

我的 c# 程序从我的数据库中检索一个 xml 数据列，其中包含一个文本文件的路径，如下所示

```
<path>
  <path name="myfile" url="/test/dir/YUUHGGGVFY/grgrggr.text" />
</path> 
```

所以上面存储在一个字符串变量中`name = pathstring`

如何格式化上述字符串以仅提取`"/test/dir/YUUHGGGVFY/grgrggr.text"`部分？

字符串的其他部分将始终相同：

所以`pathstring = "/test/dir/YUUHGGGVFY/grgrggr.text"`部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:10:55.190

您可以使用[Linq to Xml](http://msdn.microsoft.com/en-us/library/bb387098.aspx)解析您的字符串并从中获取`url`属性`path`

```
string xml = 
  @"<path>
       <path name=""myfile"" url=""/test/dir/YUUHGGGVFY/grgrggr.text"" />
    </path>";
XElement pathElement = XElement.Parse(xml);
var pathString = (string)pathElement.Element("path").Attribute("url"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:14:56.720

看看 LINQ2XML。我将为您提供针对该特定用例的有效解决方案：

```
string path = 
  @"<path>
      <path name=""myfile"" url=""/test/dir/YUUHGGGVFY/grgrggr.text"" />
    </path>";
XDocument xdoc = XDocument.Parse(path);
var pathString = (string)xdoc.Element("path").Element("path").Attribute("url"); 
```

# c++ - 是否可以 NULL 终止 C++ 结构的二维数组？

> ID：14267283
> 
> 赞同：0
> 
> 时间：2013-01-10T21:07:41.363
> 
> 标签：c++

下午好，是否可以 NULL 终止 C++ 结构的二维数组？谢谢你。

```
sPRIORITYANALYZER sArrayOfArrayAnalyzerArray[3][3] = {
{ 
  {mdMUReadWrite::First,mdProfiler::DataTypeFirstName},
  {mdMUReadWrite::FullName,mdProfiler::DataTypeFullName},
  {mdMUReadWrite::InverseName,mdProfiler::DataTypeInverseName} 
},

{ 
  {mdMUReadWrite::Last,mdProfiler::DataTypeFirstName},
  {mdMUReadWrite::FullName,mdProfiler::DataTypeFullName},
  {mdMUReadWrite::InverseName,mdProfiler::DataTypeInverseName} 
},

{
  {mdMUReadWrite::Zip9,mdProfiler::DataTypeZipOrPostalCode},
  {mdMUReadWrite::Zip5,mdProfiler::DataTypeZipOrPostalCode},
  {mdMUReadWrite::CityStZip,mdProfiler::DataTypeCityStateZip}

}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:08:56.197

只有当您有一个指针数组时，空终止才有意义。您必须在此处放置一个完整的空行：

```
{ { 0, 0 }, { 0, 0 }, { 0, 0 } } 
```

幸运的是，C 和 C++ 让您只需进行一次初始化即可，因此`{ { 0 } }`应该可以工作。您也需要将数组大小设置为`[4][3]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:55:20.163

晚上好，以下代码是正确的建议答案，并在 Microsoft Visual Studio 9.0 C++ 编译器上编译。谢谢你。

sPRIORITYANALYZER sArrayOfArrayAnalyzerArray[][4] = {

```
{ 
  {mdMUReadWrite::First,mdProfiler::DataTypeFirstName},
  {mdMUReadWrite::FullName,mdProfiler::DataTypeFullName},
  {mdMUReadWrite::InverseName,mdProfiler::DataTypeInverseName},
  (mdMUReadWrite::MatchcodeMapping)0
},

{ 
  {mdMUReadWrite::Last,mdProfiler::DataTypeFirstName},
  {mdMUReadWrite::FullName,mdProfiler::DataTypeFullName},
  {mdMUReadWrite::InverseName,mdProfiler::DataTypeInverseName},
  (mdMUReadWrite::MatchcodeMapping)0
},

{
  {mdMUReadWrite::Zip9,mdProfiler::DataTypeZipOrPostalCode},
  {mdMUReadWrite::Zip5,mdProfiler::DataTypeZipOrPostalCode},
  {mdMUReadWrite::CityStZip,mdProfiler::DataTypeCityStateZip},
  (mdMUReadWrite::MatchcodeMapping)0

},

{ { (mdMUReadWrite::MatchcodeMapping)0, (mdProfiler::ProfilerDataType)0 }, { (mdMUReadWrite::MatchcodeMapping)0, (mdProfiler::ProfilerDataType)0 }, {(mdMUReadWrite::MatchcodeMapping) 0, (mdProfiler::ProfilerDataType)0 } } 
```

};

# regex - 从文件中提取正则表达式并与文件中的每一行进行比较

> ID：14267286
> 
> 赞同：0
> 
> 时间：2013-01-10T21:08:06.093
> 
> 标签：regex, perl, eval, runtime-error

我找到了可以在 perlmonks.org ( [http://www.perlmonks.org/?node_id=870806](http://www.perlmonks.org/?node_id=870806) ) 上使用的东西，但我无法让它工作。

我可以毫无问题地读取文件并构建一个数组。然后，我想将数组的每个索引（每个正则表达式）与文件的每一行进行比较，打印出匹配行之前的行和匹配行之后的行。

我的代码：

```
# List of regex's.  If this file doesn't exist, we can't continue
open ( $fh, "<", $DEF_FILE ) || die ("Can't open regex file: $DEF_FILE");
while (<$fh>) {
    chomp;
    push (@bad_strings, $_);
}
close $fh || die "Cannot close regex file: $DEF_FILE: $!";

$file = '/tmp/mydirectory/myfile.txt';
eval { open ( $fh, "<", $file ); };
if ($@) {
      # If there was an error opening the file, just move on
      print "Error opening file: $file.\n";
} else {
      # If no error, process the file
      foreach $bad_string (@bad_strings) {
              $this_line = "";
              $do_next = 0;
              seek($fh, 0, 0); # move pointer to 0 each time through
              while(<$fh>) {
                      $last_line = $this_line;
                      $this_line = $_;
                      my $rege = eval "sub{ \$_[0] =~ $bad_string }"; # Real-time regex
                      if ($rege->( $this_line )) {                    # Line 82
                             print $last_line unless $do_next;
                             print $this_line;
                             $do_next = 1;
                      } else {
                             print $this_line if $do_next;
                             $last_line = "";
                             $do_next = 0;
                      }
              }
      }
}  # End "if error opening file" check 
```

当我在文件中每行只有一个字符串并执行简单的测试`if ($this_line =~ /$string_to_search_for/i )`时，这是可行的，但是当我在文件中切换到正则表达式和“实时”eval语句时，我现在得到`Can't use string ("") as a subroutine ref while "strict refs" in use at scrub_file.pl line 82`第 82 行是`if ($rege->($this_line)) {`.

在该错误消息之前，我收到：`Use of uninitialized value in subroutine entry at scrub_hhsysdump_file.pl line 82, <$fh>` 我对该错误消息有一些了解，但到目前为止似乎无法让 perl 引擎对我的代码感到满意。

perl 还是新手，总是在寻找指针。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:33:40.310

我看不出这些`eval`陈述的原因——他们似乎所做的只是使代码变得更加复杂和难以调试。

但是`$rege`是 undef 因为`eval "sub{ \$_[0] =~ $bad_string }"`字符串有语法错误而无法正常工作。我不知道 中的内容`$DEF_FILE`，但除非它具有正确分隔的正则表达式，否则您需要在`eval`字符串中添加分隔符。

```
my $rege = eval "sub{ \$_[0] =~ /$bad_string/ }" 
```

可能有效，但`/\Q$bad_string/`如果其中的字符串`$DEF_FILE`包含正则表达式元字符并且您希望它们被视为文字字符，则您可能需要。

我建议您的程序的这个版本似乎可以满足您的需要，而无需大惊小怪`eval`。

```
use strict;
use warnings;

use Fcntl ':seek';

my $DEF_FILE = 'myfile';

my @bad_strings = do {
  open my $fh, '<', $DEF_FILE or die qq(Can't open regex file "$DEF_FILE": $!);
  <$fh>;
};
chomp @bad_strings;

my $file = '/tmp/mydirectory/myfile.txt';

open my $fh, '<', $file or die qq(Unable to open "$file" for input: $!);

for my $bad_string (@bad_strings) {

  my $regex = qr/$bad_string/;

  my ($last_line, $this_line, $do_next) = ('', '', 0);

  seek $fh, 0, SEEK_SET;

  while (<$fh>) {

    ($last_line, $this_line) = ($this_line, $_);

    if ($this_line =~ $regex) {
      print $last_line unless $do_next;
      print $this_line;
      $do_next = 1;
    }
    else {
      print $this_line if $do_next;
      $do_next = 0;
    }
  }
} 
```

# c - Linux shell 不执行我的 c 程序

> ID：14267289
> 
> 赞同：3
> 
> 时间：2013-01-10T21:08:16.430
> 
> 标签：c, linux, bash, shell, ubuntu

在一些服务器更新后，我无法执行 C 程序（它昨天还在工作，我的服务器发生了一些变化，导致了这个问题）。

我在这个文件夹 /home/int/exe/ ac 名为 aesdecript 的程序具有 777 权限。因此，如果以 root 身份键入以下命令：

```
$ cd /home/int/exe/
$ ./aesdecrypt
-bash: /home/int/exe/aesdecrypt: No such file or directory
$ sh aesdecrypt
aesdecrypt: 1: Syntax error: "(" unexpected
$ ldconfig aesdecrypt
ldconfig: relative path `aesdecrypt' used to build cache
$ system("/home/int/exe/aesdecrypt")
-bash: syntax error near unexpected token `"/home/int/exe/aesdecrypt"' 
```

aesdecrypt 是一个 C 程序。

有人知道吗？该程序几天前正在运行。

下面是aesdecrypt源代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>
#include <unistd.h>
#include <sys/stat.h>

#include "aes.h"

int aes_crypt_decrypt(int encrypt, char *finput, char *foutput);

#define TRUE 1
#define FALSE 0

int main(int argc, char **argv) {
    puts("Oi mundo!"); /* prints Magick Teste! */
    /*if( argc < 3 )
        return (1);

aes_crypt_decrypt( TRUE, argv[1], argv[2] );*/
return EXIT_SUCCESS;
} 
```

问候，蒂亚戈

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T21:13:56.353

您描述的症状与您尝试在 64 位系统上执行 32 位二进制文​​件时遇到的症状非常相似，并且 32 位“仿真”不可用。在这种情况下，即使二进制文件是可执行的并且一切正常，系统错误代码也是“没有这样的文件或目录”。为了解决此问题，请使用以下命令安装对 32 位可执行文件的支持：

```
sudo apt-get install ia32-libs 
```

这可能是升级后丢失的内容。有关更长的故事，请参阅[这篇文章](http://www.markusbe.com/2009/09/about-running-32-bit-programs-on-64-bit-ubuntu-and-shared-libraries/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:14:13.537

**更新：**在评论中，OP 向我们展示了 的输出`file aesdescrypt`，这与我在这个答案中所做的假设不一致。一旦问题得到解决，我可能会删除这个答案，如果不是更早的话。

如果`aesdecrypt`是你的 C*源程序*的名字，你不能直接执行它。

shell 试图将其作为脚本执行，并且由于它不是以`#!`行开头，因此它假定它是一个`/bin/sh`脚本。

`/bin/sh`阻塞 C 语法。

您需要先编译它，例如：

```
mv aesdecrypt aesdecrypt.c
gcc aesdecrypt.c -o aesdecrypt
./aesdecrypt 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T21:12:08.183

您很可能缺少与您的 aesdescript 程序链接的一个或多个库。使用 ldd 实用程序检查它所关注的库。

# codeigniter - Codeigniter 分页无法初始化

> ID：14267304
> 
> 赞同：2
> 
> 时间：2013-01-10T21:09:28.377
> 
> 标签：codeigniter, pagination

这是控制器....

```
public function viewdeals (){

  $this ->load-> model ('model_dealview');
  if (  $q1 = $this-> model_dealview-> getdeals()){

      $this->load->library('pagination');

      $config['base_url'] = 'formalert/viewdeals';
      $config['total_rows'] = 40;
      $config['per_page'] = 5;

      $this->pagination->initialize($config);
      $q1['pagination'] = $this->pagination->create_links();
      $this -> load -> view ('view_deals', $q1);

 } 
```

问题是，每当我尝试使用分页运行它时......我都会收到此错误

遇到 PHP 错误

```
Severity: Notice

Message: Undefined property: Contoller_name::$pagination

Fatal error: Call to a member function initialize() on a non-object in
C:\wamp\www\ci\application\controllers\controllerfile_name.php on line 108 
```

没有分页一切正常...

我已经尝试在 cofig 文件中加载库......几乎完成了所有工作......甚至从互联网上复制了对其他人有用的代码......需要帮助！...

请注意它没有识别属性`$pagination`......所以代码中的其他小问题无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:03:41.340

好的问题解决了。您需要自动加载分页库...仅将其加载到函数中是行不通的。

# c# - C# 自适应声音消除

> ID：14267311
> 
> 赞同：5
> 
> 时间：2013-01-10T21:09:48.513
> 
> 标签：c#, audio, noise-reduction

在我的工作中，整个工程部门刚刚搬进了一个新的座位安排，让声音传播得比我们任何人都愿意享受的多一点。我想尝试用一种很酷的工程方式来解决这个问题。是否可以使用以下方法创建自适应声音消除：

1.  麦克风输入
2.  频率计算
3.  扬声器播放

如果是这样，我想看哪些图书馆？我假设 FFT（快速傅里叶变换）麦克风输入和频率播放。谁能指出具有这些功能的优秀库？（如果这是可能的）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T21:23:47.620

这将是困难的/不切实际的/不可能的，主要有两个原因：

1.  速度：声音消除必须***非常***快速地捕获、计算消除并生成消除，延迟可能不超过 1 毫秒。托管代码很难做到这一点。

2.  相位定位：任何声音/噪音的正确消除相位完全取决于麦克风、扬声器和您的耳朵之间的精确距离关系。前两个保持不变，但你的耳朵往往会随着你的头去哪里，你的代码无法知道。（这是耳机降噪效果如此出色的一个重要原因，但不适用于其他任何东西）。

# ruby - 为什么 Ruby 对指数方程的变量和数字有不同的处理方式？

> ID：14267312
> 
> 赞同：1
> 
> 时间：2013-01-10T21:09:51.670
> 
> 标签：ruby, math

使用负数作为基数执行指数计算时，如果使用原始值而不是包含该值的变量，则会返回不一致的结果。

在 IRB 中：

```
1.9.3p194 :001 > -4.5 ** 0.5
 => -2.1213203435596424 
1.9.3p194 :002 > foo = -4.5
 => -4.5 
1.9.3p194 :003 > foo ** 0.5
 => (1.2989340843532398e-16+2.1213203435596424i) 
1.9.3p194 :004 > (-4.5) ** 0.5
 => (1.2989340843532398e-16+2.1213203435596424i) 
```

是什么赋予了？显然编译器解释`-4.5 ** 0.5`为`-(4.5 ** 0.5)`，但是为什么使用变量时会有不同的行为呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:11:31.523

它以第一行为

```
-(4.5 ** 0.5) 
```

这给出了 4.5 的负平方根。第二个方程等价于

```
(-4.5) ** 0.5 
```

因此复杂的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T21:12:39.527

因为运算符优先级。求幂`**`具有最高的精度。所以你首先提出一个正数`0.5`，然后否定它，而不是你期望的。然而，在第二种情况下， foo 已经`-4.5`如此否定优先。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T21:25:31.977

如果您的问题不是关于优先级，而是关于为什么`foo`一旦分配`-4.5`就不能分解为`-`and `4.5`，那么答案就太明显了。这是一个非常基本的特性，对所有类似系统的语言都是通用的，包括所有编程语言和所有自然语言，以及数学符号。一旦某个对象`x`被评估/计算，那么它就是一个单一的东西。您无法返回将其重新解释为多个部分。一种语言所能做的（无论是自然语言还是编程语言）都是将`x`其视为一个对象，然后将其与其他部分进一步连接以计算更大的含义。没有回头和分解曾经评估/计算过的东西。

在自然语言中，这称为*constituency*。如果一个单词序列`foo bar baz`被解释为`[foo bar] baz`，那么就不能同时返回并将其解释为`foo [bar baz]`。

在数学中，有时 的计算值`(foo bar) baz`可能等于`foo (bar baz)`，但这只是通过应用称为*关联*性的特殊属性，即使值可能变得相同，它们也意味着不同的东西。此外，关联性通常不成立。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T21:23:55.713

`**`具有比 更高的运算符优先级`-`。这是您可能更熟悉的运算符的示例。

```
1 + 2 * 3  => 7

x = 1 + 2  => 3

x * 3      => 9 
```

# database - ZendFramework 2 SQL 语句执行返回对象数组

> ID：14267320
> 
> 赞同：1
> 
> 时间：2013-01-10T21:10:40.060
> 
> 标签：database, zend-framework2

我试图弄清楚如何让`execute`ZF2 SQL 语句类的方法返回对象数组而不是数组数组。该领域的文档/参考似乎严重缺乏，并且代码没有正确记录。

这就是我所拥有的（我正在使用 PDO MySQL 驱动程序，但这不应该是相关的）：

```
$sql = new Sql( $db );

$query = $sql->select()
   ->from('users')
   ->where('id > 1');

$stmt = $sql->prepareStatementForSqlObject( $query );
$results = $stmt->execute(); 
```

`$results`现在是一个数组数组，但我需要它是一个对象数组。我该如何指定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:23:26.160

我认为大多数人使用 ORM 的学说 [http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/](http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/)

# c++ - 如何将变量发送到类方法

> ID：14267324
> 
> 赞同：-3
> 
> 时间：2013-01-10T21:10:58.357
> 
> 标签：c++

我的程序中有一些变量实际上在 case 语句中。我试图让他们参加我的课堂活动，但我一直收到错误消息。我想将变量转到 SalriedEmployee 和 Administrator 类。

```
//Lynette Wilkins
//Week 12

#include <iostream>
#include <cstdlib>
#include <string>
#include <iomanip>
#include <cmath>

using namespace std;

class SalariedEmployee
{
private:
    double wageRate;
    int hours;
protected:
    string name;
    string ssn;
    double netPay;
    string department;

public:
    SalariedEmployee(string n, string s, double np, double w, int h, string d);
     ~SalariedEmployee() {cout<<endl;}
     string Getname();  //returns name
     string Getssn();   // returns social security number
     double GetnetPay(); //returns netPay
     string Getdepartment(); // returns department
     double GetwageRate(); //returns wage rate
     int Gethours(); //returns hours
     void Setname(string); //sets name
     void Setssn(string); //sets ssn
     void SetnetPay(double); //sets net pay
     void Setdepartment(string); //sets department
     void SetwageRate(double); //sets wage rate
     void Sethours(int); //sets hours

};

string SalariedEmployee::Getname()
{
    return name;
}

string SalariedEmployee::Getssn()
{
    return ssn;
}

double SalariedEmployee::GetnetPay()
{
    return netPay;
}

double SalariedEmployee::GetwageRate()
{
    return wageRate;
}

int SalariedEmployee::Gethours()
{
    return hours;
}
void SalariedEmployee::Setname(string n)
{
    name = n;

}

void SalariedEmployee::Setssn(string s)
{
    ssn = s;
}

void SalariedEmployee::SetnetPay(double np)
{
    netPay = np;
}

void SalariedEmployee::Setdepartment(string d)
{
    department = d;
}

void SalariedEmployee::SetwageRate(double w)
{
    wageRate = w;
}

void SalariedEmployee::Sethours(int h)
{
    hours = h;
}

class Administrator : public SalariedEmployee
{
protected:
    string title;
    string responsi;
    string super;
    double salary;
public:
    Administrator(string t, string r, string s, double sa);
     ~Administrator();
    string Gettitle();
    string Getresponsi();
    string Getsuper();
    double Getsalary();
    void Settitle(string);
    void Setresponsi(string);
    void Setsuper(string);
    void Setsalary(double);
    void print();
};

Administrator::~Administrator()
{
    cout<<endl;
}

string Administrator::Gettitle()
{
    return title;
}

string Administrator::Getresponsi()
{
    return responsi;
}

string Administrator::Getsuper()
{
    return super;
}

double Administrator::Getsalary()
{
    return salary;
}
void Administrator::Settitle(string ti)
{
    title = ti;
}
void Administrator::Setresponsi(string re)
{
    responsi = re;
}

void Administrator::Setsuper(string su)
{
    super=su;
}

void Administrator::Setsalary(double sa)
{
    salary= sa;
}

void Administrator::print( )
  {

    cout << "\n_______________________________________________\n";

    cout << "Pay to the order of " << name<< endl;
    cout << "The sum of " << netPay << " Dollars\n";
    cout << "_________________________________________________\n";
    cout <<endl<<endl;
    cout << "Employee Number: " << ssn << endl;
    cout << "Salaried Employee. Regular Pay: " 
       << salary << endl; 
    cout << "_________________________________________________\n";
  }

int main()
{

    string name;
    string soc;
    double net = 0;
    double wage = 0;
    int hrs = 0;
    string dept;
    string admtitle;
    string resp;
    string sup;
    double sal = 0;
    int response;

    string date = "January 12, 2013";

    cout<<setprecision(2)
    <<setiosflags(ios::fixed)
    <<setiosflags(ios::showpoint);

    SalariedEmployee emp1(name, soc,net, wage, hrs, dept);

while(response != 4){

    cout<<"Employee and Administrator Salary Program "<<endl;
    cout<<"(You will have to enter data first before you do anything else)"<<endl<<endl;
    cout<<"Enter Employee Data,  Enter 1"<<endl;
    cout<<"Change data,   Enter 2"<<endl;
    cout<<"Print Check,   Enter 3"<<endl;
    cout<<"End Program, Enter 4"<<endl<<endl;
    cout<<"Please make your selection"<<endl;

cin>> response;

    switch (response)

    {
    case 1:
        cout <<"The employee's data will be entered here: "<<endl<<endl;

        cout<<"Enter the employees name: ";
        cin.ignore();
        getline(cin, name);

        cout<<"Enter the employees social security number: ";
         cin.ignore();
        getline(cin, soc);

        cout<<"Enter the employees net pay: ";
        cin>>net;

        cout<<"Enter the employees wage rate: ";
        cin>>wage;

        cout<<"Enter the number of hours the employer worked: ";
        cin>>hrs;

        cout<<"Enter the employees title: ";
        cin.ignore();
        getline(cin,admtitle);

        cout<<"Enter the employees area responsibility: ";
        cin.ignore();
        getline(cin, resp);

        cout<<"Enter the employees salary: ";
        cin>>sal;

        cout<<endl<<endl<<endl;

        break;

    case 2:

        cout<<"Please change the data you entered previously here. " <<endl<<endl;

        cout<<"Enter the employees name: ";
        cin.ignore();
        getline(cin, name);

        cout<<"Enter the employees social security number: ";
         cin.ignore();
        getline(cin, soc);

        cout<<"Enter the employees net pay: ";
        cin>>net;

        cout<<"Enter the employees wage rate: ";
        cin>>wage;

        cout<<"Enter the number of hours the employer worked: ";
        cin>>hrs;

        cout<<"Enter the employees title: ";
        cin.ignore();
        getline(cin,admtitle);

        cout<<"Enter the employees area responsibility: ";
        cin.ignore();
        getline(cin, resp);

        cout<<"Enter the employees salary: ";
        cin>>sal;

        cout<<endl<<endl<<endl;
break;

    case 3:

        cout <<"Information Printed"<<endl<<endl;

        cout<<"_____________________________"<<date<<endl;
        &Administrator::print;

        break;

    default:

        cout<<endl<<endl
            <<"Invalid Selection! Try Again"<<endl;
        exit(1);

}
}

    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:22:53.380

您从未定义过 SalriedEmployee 或 Administrator 的构造函数。另一个回答者展示了如何定义与现有定义中的签名匹配的构造函数的实现，但是在您的代码中，`emp1`无论如何实例化对象时，这些变量的值都是没有意义的，因此您最好只使用默认构造函数，您只需将大多数变量初始化为 0：

```
SalariedEmployee::SalariedEmployee() :
    wageRate(0), hours(0), netPay(0) {} 
```

请注意，我没有费心初始化`string`成员；他们自动将自己初始化为“”（无）。

此外，当您使用 输入数据时`getline()`，您不会对它做任何事情。调用您的 setter 函数之一，将您读取的值传递`getline(cin,...)`给您的 emp1 对象。您的选项“3”看起来应该打印您之前输入的任何内容，但您没有调用任何“打印”函数。您的代码有`&Administrator::print;`，但不会打印任何内容。该语句计算为类`print`方法的地址`Administrator`，但您对该地址不做任何事情，因此该语句什么也不做。您可能想调用`emp1.print()`, but`emp1`是类型的对象`SalariedEmployee`， not `Administrator`，并且类中没有`print()`方法`SalariedEmployee`。

您的班级是否讨论过虚拟继承（多态性）？如果是这样，那么您可能应该`print()`在您的类中声明一个方法`SalariedEmployee`，然后在`Administrator`. 所以在 中`class SalariedEmployee`，你会想要这个：

```
void print() = 0; 
```

然后，在 中`class Administrator`，就像您所做的那样定义它。但是当你创建你的`emp1`对象时，确保它的类型是`Administrator`因为`SalariedEmployee`它只是一个抽象基类（因为你只声明继承自的类型的对象`SalariedEmployee`应该有一个 print() 方法，但 print() 实际上并没有定义在类`SalariedEmployee`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:18:37.017

您没有实现 SalariedEmployee 的构造函数。你需要类似的东西：

```
SalariedEmployee::SalariedEmployee(string n, string s, double np,
                                   double w, int h, string d)
    : name(n),
      ssn(s),
      netPay(np),
      wageRate(w),
      hours(h),
      department(d)
{
} 
```

# java - 某种算法的大 O 表示法？

> ID：14267325
> 
> 赞同：2
> 
> 时间：2013-01-10T21:11:01.100
> 
> 标签：java, algorithm, big-o

我有以下算法来确定两个数字 x 和 y 的最大公约数。我需要找到描述该算法的大符号并解释原因，但我不知道如何做到这一点。

有人可以看看我的代码并解释它是什么类型的大哦符号吗？

```
 public void question1(int x, int y){
            ArrayList divisorx = new ArrayList(); //the list of divisors of number x
            ArrayList divisory = new ArrayList();//divisors of number y
            ArrayList answerSet = new ArrayList();//the common divisors from both   
            //divisorx and divisory

            for(int i=1; i<=x; i++){//this loop finds the divisors of number x and 
                                    //adds them to divisorx
                    double remainder = x%i;
                    if(remainder==0){
                        //i is a divisor
                        divisorx.add(i);
                    }
            }
            for(int i2=1; i2<=y; i2++){//this loop finds the divisors of number y 
                                       //and adds them to divisory
                    double remainder2 = y%i2;
                    if(remainder2==0){
                        //i2 is a divisor
                        divisory.add(i2);
                    }
            }
      int xsize = divisorx.size();
      int ysize = divisory.size();

            for(int i=0; i<xsize; i++){//this massive loop compares each element of 
        //divisorx to those of divisory to find common divisors. It adds those common
        //divisors to the arraylist answerSet
               for(int j=0; j<ysize; j++){
                   if(divisorx.get(i)==divisory.get(j)){
                       //common divisor has been found
                       //add it to an answer array

                       answerSet.add(divisorx.get(i));

                   }
                }
            }
    Collections.sort(answerSet);//sorts the answerSet from smallest to greatest

    Object gcd = answerSet.get(answerSet.size()-1);//get the last element of the
                                                   //arraylist, which is the gcd       
    System.out.print("Your Answer: "+gcd);//print out the greatest common divisor
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:28:57.187

前两个循环的成本分别为**O(X)**和**O(Y)**。

N 的除数是 O(sqrt(N))（见注释），所以 xsize 和 ysize 是 O(sqrt(X)) 和 O(sqrt(Y))。

因此，您的最后一个循环花费了**O(sqrt(X).sqrt(Y))**。

`answerSet`大小为 O(min(sqrt(X),sqrt(Y)))，因为它是 和 的`divisorx`交集`divisory`。

您对 answerSet 执行排序，即**O(min(sqrt(X),sqrt(Y)) log(min(sqrt(X),sqrt(Y)))**

所有这些都是 O(X+Y)，所以总复杂度是**O(X+Y)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:31:05.133

最大的**复杂性**是您拥有的*两个嵌套 for 循环*。**大 O**是*顺序*，意味着它是相对于输入大小的复杂性。在这里，您的输入大小是您在线性时间（每个 1 个 for 循环）中找到的除数数，意思是`n + n`或`O(n)`。您示例中的排序通常具有`n*log(n)`. 您的嵌套 for 循环是方形含义`O(n^2)`。那么你的订单就是`O(n^2)`因为这是计算中最大的复杂性。我们在多项式表达式中取最大次数，将所有复杂性相加，因此`O(n^2 + n*log(n) + 2n)`它是二次多项式，因此是 ~ `O(n^2)`。

**需要注意的是，顺序是空间和时间的较大复杂度。因此，如果内存使用复杂度大于计算复杂度，那么就会接管。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:33:39.347

第一个循环准确地完成了`X`几次。
第二个循环`Y`时间。
第三个循环肯定少于`(X/2 + 1) * (Y/2 + 1)`次（因为一个数字最多`N`可以有`N/2 + 1`除数）。所以最坏的情况是`O(XY/4) = O(XY)`。
list 的大小相同，`answerSet`最多可以有`XY/4`元素。最后排序是在`O(nlogn)`（根据javadoc）中完成的，也就是说，在你的情况下，`O(XYlog(XY))`.
所以最终的复杂度是`O(X + Y + XY + XYlog(XY)) = O(XYlog(XY))`。
如果您只想用泛型来表达复杂性`N`，那么就是`O((N^2)logN)`, where `N = max(X, Y)`。

# objective-c - Objective-C GameKit 嵌套块内存泄漏

> ID：14267326
> 
> 赞同：1
> 
> 时间：2013-01-10T21:11:15.203
> 
> 标签：objective-c, memory-management, memory-leaks, objective-c-blocks, gamekit

我的 iPhone 游戏包含以下代码：

```
[friendLeaderboardRequest_ loadScoresWithCompletionHandler:^(NSArray *scores, NSError *error)
{
    friendLeaderboardRequest_ = nil;

    if (error)
        return;

    NSMutableArray* playerIDs = [NSMutableArray array];
    for (GKScore* score in scores)
        [playerIDs addObject:score.playerID];

    [GKPlayer loadPlayersForIdentifiers:playerIDs withCompletionHandler:^(NSArray* players, NSError* error)
    {
        ...
    }];
}]; 
```

嵌套块调用泄漏 3 个`__NSCFString`对象。每次，负责的框架都是`-[NSXPCDecoder _initWithRootXPCObject:]`。嵌套调用会导致泄漏。我已将调用移到第一个块之外，并`[NSArray arrayWithObject:[GKLocalPlayer localPlayer].playerID]`作为玩家 ID 数组和一个空块作为块传递，并且没有泄漏。我在第一个块中尝试了相同的虚拟调用，泄漏再次发生。

基于这些测试，我假设泄漏是由 Foundation 库引起的。我错过了什么吗？有没有人遇到过类似的事情？

# css - LESS 和 Twitter Bootstrap 效果不佳

> ID：14267328
> 
> 赞同：-1
> 
> 时间：2013-01-10T21:11:20.530
> 
> 标签：css, twitter-bootstrap, less

所以我正在开发一个非常强大的 WordPress 网站，我在其中使用 320press Twitter Bootstrap 主题，并且我正在使用 LESS CSS。

**需要了解的一些一般信息：**

*   WordPress 3.5
*   引导程序 2.0
*   少 1.3.3

在 WordPress 方面，Bootstrap 方面等一切都运行良好。但是......我有一段时间让 LESS 正常工作。我从lesscss.org 下载了less-1.3.3-min.js 文件并将其放到了相应的文件夹中。然后我在 header.php 文件中引用了它。我知道所有内容都正确链接，因为如果您在页面上查看源代码并单击 less-1.3.3.js 引用，它会完美加载。

这是我的 header.php 文件中的代码部分

`<link rel="stylesheet" type="text/css" href="<?php echo get_template_directory_uri(); ?>/library/css/fonts.css">`

`<link rel="stylesheet" type="text/css" href="<?php echo get_template_directory_uri(); ?>/library/css/custom.css">`

`<link rel="stylesheet/less" type="text/css" href="<?php echo get_template_directory_uri(); ?>/library/less/bootstrap.less">`

`<link rel="stylesheet/less" type="text/css" href="<?php echo get_template_directory_uri(); ?>/library/less/responsive.less">`

`<script type="text/javascript" src="<?php echo get_template_directory_uri(); ?>/library/js/less-1.3.3-min.js"></script>`

因此，按照 LESS 网站上的说明，我在加载 CSS 文件后加载了脚本。事情应该开始发生正确吗？不，所以我玩了很多，但无法弄清楚。

![在此处输入图像描述](../Images/96841cd13a61fba851be71407940867b.png)<-- LESS 不工作时的阅读器文本

然后我在 GIT 上找到了常规的“less-1.3.3.js”文件并下载了它。BOOM 一切正常。

![在此处输入图像描述](../Images/5303b1e19f24cfcd6592a0d00c2f823e.png)

![在此处输入图像描述](../Images/cf4b3e32322874d41d83591bdaeb42c5.png)<-- 这就是它应该看起来的样子（“读者”这个词）

哇哦，胜利之舞。

没那么快……

当我将浏览器缩小到 979 像素或更低时，导航下方会出现巨大的间隙。

![这个差距不应该存在](../Images/046b9b2fac8dfd58ad5b23aeb0aef103.png)

这个差距应该更像这样：

![在此处输入图像描述](../Images/35b5d17be95793c548a2c5c872505c90.png)

好的，也许我搞砸了一些 CSS……经过大约 4 小时的调查后，我注意到编译的 Bootstrap.css 文件显示了两次。曾经作为链接样式表：

![在此处输入图像描述](../Images/222d181f23ae6896eed7e88ab0579dcd.png)

然后再次作为嵌入式样式表。

![在此处输入图像描述](../Images/4a6d9fbb2cab5464560e440147fc4220.png)

在 Firefox 中使用 Web Developer Extension 我删除了所有嵌入的样式，一切看起来都很棒。但我无法弄清楚除了 javascript 之外，是什么将其转储到网站头部。这会发生在每个人身上吗？

有任何想法吗？当然，这是一个仅限内部网络的开发环境，所以我无法与您分享 URL，但我已经提供了一些屏幕截图来显示我在说什么。

请帮帮我！我的大脑正在试图找到这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:01:25.020

感谢 Scott Simpson 的指导。我到处找，但functions.php文件是我的第一个问题。

我在 funcitons.php 文件中注释掉了 responsive.css 并修复了它。我知道这将是一件愚蠢的事情。

再次感谢你。

# c# - 简单的 C# Windows 应用程序 - 无论如何 Catch 语句总是执行

> ID：14267329
> 
> 赞同：0
> 
> 时间：2013-01-10T21:11:21.103
> 
> 标签：c#, validation, textbox, try-catch

这是所涉及的事件处理程序的代码：

```
private void textBox1_TextChanged(object sender, EventArgs e)
        {
            try
            {
                seed = Convert.ToInt32(this.Text);
            }
            catch (FormatException)
            {
                MessageBox.Show("Input string is not a sequence of digits.");
            }
            catch (OverflowException)
            {
                MessageBox.Show("The number cannot fit in an Int32.");
            }

        } 
```

它应该确保用户不会`Int32`在文本框中输入除允许的数字之外的任何内容，但是每次您尝试在框中输入任何内容时都会执行第一个 catch 语句。我环顾四周，但我似乎无法弄清楚为什么......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T21:12:52.400

可能是因为`this.Text`不是从输入框中读取，而是从定义处理程序的类中读取。

我相信你想要的是：

```
try
{
    seed = Convert.ToInt32(((TextBox)caller).Text);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:14:45.377

```
private void textBox1_TextChanged(object sender, EventArgs e)
        {
            try
            {
                seed = Convert.ToInt32(textBox1.text);
            }
            catch (FormatException)
            {
                MessageBox.Show("Input string is not a sequence of digits.");
            }
            catch (OverflowException)
            {
                MessageBox.Show("The number cannot fit in an Int32.");
            }

        } 
```

请使用上述语句，它应该可以正常工作。如果您输入一个数字，第一个异常将不会执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:35:43.630

使用以下内容（当然是暂时的）查看错误消息可能会有所帮助：

```
catch (FormatException exception)
{

    MessageBox.Show("Input string is not a sequence of digits."
                    + "Exception message was: " + exception.getMessage());
} 
```

# ruby-on-rails-3 - 提交表单时如何让 Rails 页面更新？

> ID：14267337
> 
> 赞同：-1
> 
> 时间：2013-01-10T21:11:48.637
> 
> 标签：ruby-on-rails-3, forms, action

我一直在努力解决这个问题，搜索过等等，现在我已经准备好寻求帮助了。

我有一个控制器'DashboardController'，我有一个单一的视图'dashboard.html.erb'。

dashboard.html.erb 页面包含三个组件；一些使用模型数据创建图表的 javascript，用于保存图表的 div，以及用于选择图表选项的表单。

这一切都有效。当我提交表单时，我可以让表单正确地将参数放入查询字符串中，但是包含图表目标的 div 在提交时不会更新。

基本上希望有一个表格驱动的图表，不能让它发生。令人沮丧。

我是 Rails 的新手，我对控制器、路由和操作的了解仍在不断发展。

在我的代码中遇到了 Rails 的 form_tag 方面的问题，我在这里切换到了一个简单的表单。依然没有。

任何帮助，将不胜感激。

```
<script type="text/javascript">
$(function() {
    new Highcharts.Chart({
        chart: {
            renderTo: "orders_chart",
            type: "column"
        },
        title: {
            text: "Sales Billings - <%= params[:sale_year] %>"
        },
        xAxis: {
            categories: [1,2,3,4]
        },
        yAxis: {
            text: "Billings"
        },
        tooltip: {
            formatter: function() {
                return 'Q-' + this.x + ': ' +
                    "$" + Highcharts.numberFormat(this.y,2);
            }
        },
        series: [{
        name: "Business Unit A",
        data: <%= Sale.where(:year => params[:id], :segment => 'IT    Infrastructure').each.map { |row| row.billings.to_f }.inspect %>
        },{
        name: "Business Unit B",
        data: <%= Sale.where(:year => params[:id], :segment => 'Collaboration').each.map { |row| row.billings.to_f }.inspect %>
        },{
        name: "Business Unit C",
        data: <%= Sale.where(:year => params[:id], :segment => 'MSP').each.map { |row| row.billings.to_f }.inspect %>
        }]
    });

}); 
```

```
<div id="orders_chart" style="width:560px; height:380px;"></div>
<form accept-charset="UTF-8" action="/dashboard" method=""> 
    <select id="sale[:year]" name="sale_year" data-mini="true" data-corners="false">
    <option>Year</option>
    <%  @salesyear = Sale.select(:year).uniq
        @salesyear.each do |years| %>
        <option value="<%=years.year %>"><%=years.year %></option>
    <% end %> 
    </select>

    <select id="sale[:quarter]" name="sale_quarter" data-mini="true" data-corners="false">
    <option>Quarter</option>
    <%  @salesqtr = Sale.select(:quarter).uniq
        @salesqtr.each do |qtr| %>
        <option value="<%=qtr.quarter %>">Q<%=qtr.quarter %></option>
    <% end %> 
    </select>

    <select id="sale[:month]" name="sale_month" data-mini="true" data-corners="false">
    <option>Month</option>
    <%  @salesm = Sale.select(:month).uniq
        @salesm.each do |month| %>
        <option value="<%=month.month %>">Month - <%=month.month %></option>
    <% end %> 
    </select>

<input name="commit" type="submit" value="Update" class="ui-btn-hidden" aria-disabled="false" data-theme="c" data-mini="true" data-icon="search" data-iconpos="right" data-corners="false">

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:11:25.823

如果没有看到您的 routes.rb 文件或您`DashboardsController`的 ，很难推断发生了什么。

我可以说您的表单标签需要使用预期的方法（可能是“post”或“put”）提交正确的操作。您已指定“/dashboard”操作并且没有方法：

```
<form accept-charset="UTF-8" action="/dashboard" method=""> 
```

我猜“/dashboard”映射到您的 routes.rb 文件中的“get”请求，例如：

```
match "/dashboard", to: "dashboards#dashboard" 
```

一个非典型但可能很快的改变是允许“get”和“post”请求：

```
match "/dashboard", to: "dashboards#dashboard", via: [:get, :post] 
```

您还需要确保将控制器操作设置为处理发布请求发送的参数。

# actionscript-3 - Starling MovieClip 内的补间帧

> ID：14267338
> 
> 赞同：1
> 
> 时间：2013-01-10T21:11:55.210
> 
> 标签：actionscript-3, tween, starling-framework

我注意到 Starling MovieClip 没有公开“gotoAndPlay”方法。那么，您将如何补间 Starling MovieClip 的帧？

甚至可能吗？

我想避免使用传统的 MovieClip 并使用 bitmapData 绘制方法来生成用于 Starling Image 的纹理。通常我只会使用 TweenLite 和补间 frame 属性。

```
TweenLite.to(mc, .7, {frame:<frame number here>}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:26:21.990

尝试...

```
mc.currentFrame = 0; //stop on first frame

//make a repeat tween
var tweenPlay:Tween = new Tween(mc, mc.numFrames / mc.fps, Transitions.LINEAR);
tweenPlay.animate("currentFrame", mc.numFrames - 1); //0 based frames
tweenPlay.onComplete = repeatPlay;
tweenPlay.onCompleteArgs = [mc];

//add tween to juggler
Starling.current.juggler.add(tweenPlay); 
```

# javascript - 承诺的 JavaScript 命名约定？

> ID：14267346
> 
> 赞同：62
> 
> 时间：2013-01-10T21:12:26.513
> 
> 标签：javascript, naming-conventions, deferred, promise

**我觉得为持有promise**的 JavaScript 变量制定一个命名约定会很有用。我通常不喜欢或提倡编程语言标准之外的命名约定，但在编程风格中，promise 作为函数参数传递，通常很难一眼看出变量是否持有 promise 或“真实的东西”。

我个人使用过`promiseOfFoo`and `pFoo`，但我觉得前者有点冗长，而后者让我想起了匈牙利语。

有没有常用的约定？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-10T21:53:22.800

这更多地取决于您将如何使用它们，不是吗？

如果您的代码如下所示：

```
var imageLoading = loadImage(url); // returns promise
imageLoading.done(showImage);

// imageLoading.done
// imageLoading.error
// imageLoading.then
// imageLoading.success
// imageLoading.fail
// ... whatever your library supports 
```

然后，我可能建议将承诺命名为现在时动词......

但是，如果您正在构建一个依赖于延迟对象的库

```
// accepts a promise
var showImage = function (promise) {
    promise.done(function (img) { /* ...... */ });
}; 
```

然后，将变量命名为名词并没有什么特别的错误，只要了解哪些方法接受承诺，哪些不接受承诺。

```
var image = loadImage(url); // returns promise
showImage(image);           // acts on promise 
```

现在您的界面非常干净，您可以编写看起来 100% 程序化的代码。...buuuut，您需要知道哪些函数/方法使用承诺以及哪些使用对象。

如果您在对象方法内部将 Promise 作为回调传递，那么您可以愉快地命名它们`promise`或`tweetLoading`或`dataParsing`或在该特定情况的上下文中有意义的任何内容。

对于 的定义`showImage`，我选择的参数是 flat-out called `promise`，因此，如果您正在处理该函数，或者您需要调试一系列东西，您可以看到它花费了承诺对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:37:00.307

我不知道公共约定，但在我自己的代码中使用了以下内容：

*   `var dfrd`：一个 Deferred 对象（我不记得在同一范围内需要两个或更多）
*   `var p`： 一个承诺
*   `var p_foo`: 几个命名的 Promises 之一
*   `var promises`: 包含 Promises 的数组或普通对象

例外是一个`jqXHR`对象，我将命名它`var jqXHR`（同样，我不记得在同一范围内需要两个或更多）。

# c# - Try/Catch 块 - 退出尝试代码

> ID：14267347
> 
> 赞同：-1
> 
> 时间：2013-01-10T21:12:34.407
> 
> 标签：c#, try-catch, request.querystring

我有这个 C# 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.OleDb;
using System.Data;

public partial class UpdateArticle : System.Web.UI.Page
{
    public string ArticleTitle, ArticleBody, PostDate;

    protected void Page_Load(object sender, EventArgs e)
    {
        string ArticleId;
        try
        { ArticleId = Request.QueryString["ArticleId"].ToString();
            string dpath = Server.MapPath(@"App_Data") + "/MySite.mdb";
            string connectionstring = @"Data source='" + dpath + "';Provider='Microsoft.Jet.OLEDB.4.0';";
            string q = string.Format("select *  from tblArticles where ArticleId={0}", ArticleId);
            OleDbConnection con = new OleDbConnection(connectionstring);
            OleDbCommand cmd = new OleDbCommand(q, con);
            con.Open();
            cmd.ExecuteNonQuery();
            OleDbDataAdapter da = new OleDbDataAdapter(cmd);
            DataSet ds = new DataSet();
            da.Fill(ds, "tbl");
            con.Close();
            ArticleTitle = ds.Tables[0].Rows[0]["ArticleTitle"].ToString();
            ArticleBody = ds.Tables[0].Rows[0]["ArticleBody"].ToString();
            PostDate = ds.Tables[0].Rows[0]["PostDate"].ToString();

        }
        catch
        { }
        string NewArticleTitle, NewArticleDate, NewArticleBody, ArticleId1;  
        try
        {

                NewArticleTitle = Request.Form["ArticleTitle"].ToString();
                NewArticleDate = Request.Form["ArticleDate"].ToString();
                NewArticleBody = Request.Form["ArticleBody"].ToString();
                ArticleId1 = Request.QueryString["ArticleId"].ToString();
                string dpath = Server.MapPath(@"App_Data") + "/MySite.mdb";
                string connectionstring = @"Data source='" + dpath + "';Provider='Microsoft.Jet.OLEDB.4.0';";
                OleDbConnection con = new OleDbConnection(connectionstring);
                string QuaryString = string.Format("insert into tblArticles(ArticleTitle, ArticleBody, PostDate) values ('{0}','{1}','{2}') where ArticleId='{3}'", NewArticleTitle, NewArticleBody, NewArticleDate, ArticleId1);
                OleDbCommand cmd = new OleDbCommand(QuaryString, con);
                OleDbDataAdapter da = new OleDbDataAdapter(cmd);
                DataSet ds = new DataSet();
                da.Fill(ds, "tbl");
                con.Close();
            }
            catch { }
       // Response.Redirect("ArticlesTable.aspx");

}} 
```

我的代码中的问题是，当涉及到这一行时：

```
ArticleId1 = Request.QueryString["ArticleId"].ToString(); 
```

它从 try 块中退出。上面几行我写了这段代码：

```
ArticleId = Request.QueryString["ArticleId"].ToString(); 
```

它工作得很好。那么为什么下线不起作用呢？当我第一次调试它时：[1](https://i.stack.imgur.com/esh4j.png)：在ASPX页面中提交表单后：http: [//i.stack.imgur.com/CfKXL.png](https://i.stack.imgur.com/CfKXL.png) ：这是aspx代码：

```
<b>
כותרת המאמר :<br /></b><input id="Text1" type="text" name="ArticleTitle" value="<%=ArticleTitle %>"/><p></p>
<b>

תאריך פרסום: <br /></b><input id="Text2" type="text" name="ArticleDate" value="<%=PostDate %>"/><p></p>

<b>

תוכן המאמר: <br /></b> <textarea rows="10" cols="60"  name="ArticleBody"><%=ArticleBody %></textarea>
<br />
<input id="Reset1" type="reset" value="נקה" />
<input id="Submit1" type="submit" value="שלח כתבה!" />
</form>
<p></p><p></p>

<a href="Default.aspx">חזור לדף הבית</a> 
```

并且在提交之后（var 没有得到 Id 值！）![在此处输入图像描述](../Images/0977c801546c817a86c70a58ba80a8d0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:27:43.460

如果您的代码突然意外地从`try`块中退出，则它正在捕获异常。

如果您的 catch 语句像以前那样抛出该异常 `catch { }`，那么您将永远看不到它。

您应该`try/catch`完全删除并让错误自然冒泡，或者您应该抓住它并对其进行处理：

```
catch (Exception ex)
{
   // However you want to handle things going wrong.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:31:23.777

您的代码抛出异常，很可能是因为`Request.QueryString["ArticleId"]`超出了范围。我不确定为什么会发生这种情况，但这是最有可能的解释。更改`catch {}`并`catch (Exception e) {}`在那里设置一个断点，以便您可以检查异常。假设这是正在发生的事情，`ArticleId1`请在第一次尝试之外声明 a ，然后在设置后将其设置为行`ArticleId`（在第一次尝试中）。

# javascript - 引用外部对象的 Javascript 范围

> ID：14267351
> 
> 赞同：3
> 
> 时间：2013-01-10T21:12:40.757
> 
> 标签：javascript, jquery, closures, encapsulation, joose

[基本上，我使用一个名为Joose](http://joose.it) for Javascript的元类框架，它允许我使用更优雅的类语法——但我不知道如何从类的更深层次的方法中引用对象的范围宣言。我还使用 require.js 进行依赖管理...

这是一个示例类定义：

```
 define([
      'jquery',
      'handlebars',
   ], function($, Handlebars){

      var MyClass = Class("MyClass", {

         //inheritance         
         isa: SuperClass,

         //instance vars
         has: {

            hello:{
               is: 'r',
               init: 'Hi There!',
            },

            someVarToBeSetUsingAjax:{
               is: 'rw',
               init: false,
            },
         },

         //methods
         methods: {

            init: function () {

               var self = this;
               self.getAjaxVar();

            },

            getAjaxVar: function() {

               var self = this;

               //HOW CAN I REFERENCE 'self' THROUGHOUT MY OBJECT?

               $.get('ajax/test.html', function(response) {
                 self.someVarToBeSetUsingAjax = response.value;
               });
            },

            //lots more methods...

         }
    });

   return MyClass;

}); 
```

好的，所以我的问题是 - 在 AJAX 函数中，我必须编写 var self = this 才能让我的对象进入 AJAX 调用的范围 - 没问题。但是，我发现自己几乎对我的类声明中的每一个方法都这样做了！如何以干净有效的方式在所有方法中引用 self ？我知道您可以通过设置参数在 AJAX 中使用作用域，假设它不仅仅是 AJAX，而是其他将作用域关闭到外部的函数。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:29:40.887

每次嵌套函数时，都必须考虑`this`. 但是如果你不嵌套一个函数，或者那个函数不使用`this`你就不需要考虑它。

```
 init: function () {
           var self = this;
           self.getAjaxVar();
        }, 
```

所以在这种情况下没有必要。这完全一样：

```
 init: function () {
           this.getAjaxVar();
        }, 
```

但在这儿：

```
 getAjaxVar: function() {
           var self = this;

           $.get('ajax/test.html', function(response) {
             self.someVarToBeSetUsingAjax = response.value;
           });
        }, 
```

您创建了一个内部函数，并且您希望引用 的原始值`this`，因此您必须使用别名`this`来`self`使其可访问。

没有办法`this`从课堂上的任何地方固定一个值。

* * *

也就是说，你确实有一些选择。

`Function.prototype.bind()`能够帮助。

```
var func = function() { return this.name };
var obj = { name: 'Bob' };
var boundFunc = func.bind(obj);
boundFunc(); // 'Bob' 
```

`bind`将返回一个`this`始终设置为特定对象的新函数。

所以：

```
 getAjaxVar: function() {
           $.get('ajax/test.html', function(response) {
             this.someVarToBeSetUsingAjax = response.value;
           }.bind(this));
        }, 
```

请注意，并非所有浏览器都支持此功能，您可能需要为旧浏览器添加 shim。

或者只是习惯`self = this`。

* * *

我也想对coffeescript 稍微点头，因为它支持声明在运行时不会改变上下文的函数。

```
obj = {
  name: "bob"
  sayHello: ->
    doSomeAjax({
      success: =>
        alert "successfully made " + this.name + " say hello!"
    })
}

obj.sayHello() 
```

`->`做一个正常的功能。但是胖箭头`=>`将改为保留`this`函数内部和外部的值。在实例方法中的回调中非常方便。当编译为 JS 时，它基本上`self = this`为你做了一个别名，`self`每次都在内部函数中使用来引用`this`. 它很光滑。

不过，在纯 JS 中，最常见的模式是简单的`self = this`，坚持下去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:25:13.123

答案是使用`this`. 您只需要创建一个闭包（`var self = this;`当您有一个将在对象外部调用的函数时，您可以这样做。（就像您在此处使用 ajax 调用的返回一样）。

没有其他方法可以创建闭包。

* * *

需要明确的是（因为有些人会因为任何轻微的技术挥手而跳），你不需要创建一个闭包。但我认为你应该—— JavaScript 被设计为与闭包一起工作，它们运行良好，并且被其他 JavaScript 程序员很好地理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:26:45.427

> 我发现自己几乎对我的类声明中的每一个方法都这样做了！如何以干净有效的方式在所有方法中引用 self ？

你不能。的值（`self`由 引用的实例`this`）仅在调用该方法时才知道。

`self`如果您在构造函数（您的方法？）中声明了一个公共变量`init`并在那里创建了所有回调函数，您只能解决这个问题并使用一个公共变量。但是，可能不是最节省内存的方法：

```
return Class("MyClass", {
     // …

     methods: {
         init: function () {
             var self = this;
             this.ajaxVarCallback = function(response) {
                 self.someVarToBeSetUsingAjax = response.value;
             };
             // and other functions that use "self"

             this.getAjaxVar();
         },
         getAjaxVar: function() {
             $.get('ajax/test.html', this.ajaxVarCallback);
         },
         // …
     }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T21:28:24.610

除了始终将 MyClass 的所有实例保持在范围内（或作为全局变量）之外，我没有看到任何解决方案。但是，您可以通过以下方式不必在`self`任何地方声明`Function.prototype.bind`：

```
$.get('ajax/test.html', function(response) {
  this.someVarToBeSetUsingAjax = response.value;
}.bind(this)); 
```

这不仅限于 $.get()，您可以在任何使用回调函数的地方使用它。

# java - 如何在开发模式下启动 GWT 调试

> ID：14267353
> 
> 赞同：0
> 
> 时间：2013-01-10T21:12:49.480
> 
> 标签：java, gwt

在迁移到 maven 之前，我们使用 Ant，从 IntelliJ IDEA 下启动 Dev Mode 没有问题。但现在该项目在 Maven 下。所以我认为，我做了所有需要的配置，当我运行调试器时，我看到了登录页面，但登录后我收到以下错误：

> > [错误] 找不到资源 img/remove_filter_btn.png。指定为 Class.getResource() 的名称是预期的吗？

这是我使用资源的方式：

```
public interface Resources extends ClientBundle {

    @Source("img/remove_filter_btn.png")
    ImageResource removeBtn();
} 
```

项目结构如下：

```
Module
|--Submodule
|  |--src
|  | |--main
|  | | |--java
|  | |   |--package
|  | |     |--class
|  | |--webapp
|  |   |--img
|  |     |--remove_filter_btn.png
|  |--target
|    |--ROOT
|      |--img
|        |--remove_filter_btn.png
|--utils
   |--tomcat
      |--webapps
         |--ROOT
            |--img
               |--remove_filter_btn.png 
```

War 文件在 utils 文件夹中的 tomcat 中启动。

事实上，我不知道 GWT 在哪里寻找这个资源。也许有一个解决方案来说明如何让 GWT 开始寻找资源？

目前这是唯一的问题，因为我认为这是调试开始工作之前唯一剩下的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:28:12.457

`ClientBundle`into s使用的图像`ImageResource`应该在源代码树中，而不是在外部 Web 资源中（即在 target/ 或 webapp/ 中）。

当你写

```
package my.project.something.client
//...
public interface Resources extends ClientBundle {
    @Source("img/remove_filter_btn.png")
    ImageResource removeBtn();
} 
```

你告诉 ClientBundle 它可以在 src/my/project/something/client/img/remove_filter_btn.png 找到图像。

请记住，ClientBundle 的目的不仅仅是包装路径名字符串以便它们可以在代码中轻松使用，而是将图像实际编译到您的应用程序中。在小图像的情况下，它通常会将整个图像放入应用程序中，因此根本不需要任何精灵。即使这是不可能的，它仍然会重写图像，以便它们可以被浏览器永久缓存，并尝试优化它们以不使用比实际需要更多的空间。

# php - fgetcsv 在奇怪的地方拆分列

> ID：14267356
> 
> 赞同：4
> 
> 时间：2013-01-10T21:12:56.310
> 
> 标签：php, csv

我试图让 fgetcsv() 读取逗号分隔值文件。通常这可以按预期工作，但是我遇到了一个文件，其中一些列被拆分为新的数据行，而不是被视为一个。

这是给我带来麻烦的行示例： [pastie.org/5664800](http://pastie.org/5664800)

造成问题的列是构成描述的多行列。

fgetcsv 在到达以下行时结束第一次读取：

```
- Length/Width/Height: 3.75\""x2.4\""x2.4\"" (95.25X60.96x60.96) 
```

例如，如果我有代码：

```
ini_set('auto_detect_line_endings', true);

while ($row = fgetcsv($filepointer, 5000, ',', '"') {
    echo '<pre>'; var_dump($row); echo '</pre><br />';
} 
```

我得到一个以“”结尾的大部分完整的数据行，`Length/Width/Height: 3.75\"x2.4\""x2.4\"" (95.25X60.96x60.96)`然后将之后的每个换行符都视为自己的行，一直到最后。

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T00:39:33.627

问题是您的数据包含字符序列`\""`。从上下文来看，很明显 this*应该*表示字面量 substring `\"`；也就是说，黑斜杠应该是文字反斜杠，而双引号已通过加倍来转义。

但是，默认情况下，[`fgetcsv()`](http://php.net/fgetcsv)将反斜杠视为转义字符，因此它将字符解析`\"`为反斜杠转义的文字双引号，然后假定第二个`"`结束双引号字符串。

修复很简单，只要您使用的是 PHP 5.3.0 或更高版本：只需`fgetcsv()`将一些其他字符作为第五个参数传递给它，告诉不要将反斜杠视为转义字符。显然，传递`null`or `false`or`''`不会完全禁用转义字符，但是传递`'"'`（即与引号字符相同的值）可以：

```
while ( $row = fgetcsv( $filepointer, 0, ',', '"', '"' ) ) {
    var_export( $row );
    echo "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:19:37.533

[fgetcsv()](http://www.php.net/manual/en/function.fgetcsv.php)的第五个参数是当它出现在封闭的字符串中时如何转义 " 封闭字符

# java - Java and file list

> ID：14267362
> 
> 赞同：0
> 
> 时间：2013-01-10T21:13:16.683
> 
> 标签：java, file-io, io

I should get a list of file contained in a directory.

What I do is:

```
 File file = new File(PATH);
    for (File index:file.listFiles)
        System.out.println(index.toString()); 
```

The matter is that doing this I get printed also files I shouldn't see, temporary, for example.

In my test directory I have to file: *ciao* and *test*, but when I run my code I see *ciao*, *ciao~*, *test~*, and also other stuff if I modify a file (I suppose they are buffer file).

So, how can I get only *true* file, as if I was browsing my fileSystem?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:16:56.850

If you want to list only files whose attributes (name included) obey a set of conditions, you need to use another version of `.listFiles()` which takes a `FileFilter` as an argument. This interface has a sole `accept()` method which returns true if the file can be listed.

This simple example will filter out files whose name end with a `~`:

```
file.listFiles(new FileFilter() {
    @Override
    public boolean accept(File pathname) {
        return !pathname.getName().endsWith("~");
    }
}) 
```

If your `FileFilter` is more complex than the one above, consider exernalizing it to a variable (`private static final` if the filter will never change).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:16:52.837

use

```
if (!index.isHidden()) {
    System.out.println(index.toString());
} 
```

to suppress hidden files.

you further can check for

```
index.isDirectory() 
```

if you dont want subdirectory to be listed.

But dont expect an method that can read your thougts what you call an real (or clean, or nice) file.

You could write yourself a filter for that, once you now what files to exclude.

See `java.io.FileFilter` for more.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T21:19:18.797

Files you don't see are probably hidden, you can check that:

```
File file = ...;
if(file.isHidden()){...} 
```

# javascript - 查找点是否在多边形中

> ID：14267363
> 
> 赞同：3
> 
> 时间：2013-01-10T21:13:31.133
> 
> 标签：javascript, math, google-maps-api-3, coordinates

我这里有这段代码，它试图计算一个点是否`latLng`穿过一个多边形`Maps.area`。

```
Maps.ui.contains = function(latLng){
    //poly.getBounds gets the 'box' around the polygon
    if(!Maps.ui.getBounds().contains(latLng))
        return false;
    //So we dont need to check t/f, we either set it or we dont
    var inPolygon = false;
    var count = 0;

    Maps.area.getPaths().forEach(function(el0, index0){
        var last = el0.getLength() - 1;
        el0.forEach(function(el1, index1){
            count += Maps.ui.ray_intersect_segment(latLng, el1, el0.getAt(last));
            last = index1; 
        });
    });

    if(Maps.area.getPaths().getLength()%2 == 0)
        return count%2==0;
    else
        return count%2!=0;

}

var eps = 0.0001;
var inf = 1e600;
Maps.ui.ray_intersect_segment = function(point, i1, i2){
    var p = point;
    var segment = (i1.lng() > i2.lng())?[i2, i1]:[i1, i2];

    p = (p.lng() == segment[0].lng() || p.lng() == segment[1].lng())?new google.maps.LatLng(p.lng() + eps):p;

    if(p.lng() < segment[0].lng() || p.lng() > segment[1].lng() || p.lat() > [segment[0].lat(), segment[1].lng()].max())
        return 0;
    if(p.lat() < [segment[0].lat(), segment[1].lat()].min())
        return 1;

    var a = (segment[0].lat() != segment[1].lat())?(segment[1].lng() - segment[0].lng())/(segment[1].lat() - segment[0].lat()):inf;
    var b = (segment[0].lat() != p.lat()) ? (p.lng() - segment[0].lng())/(p.lat() - segment[0].lat()):inf;

    return (b > a)?1:0;
}

Maps.ui.getBounds = function() {
    //Lets make a box
    var bounds = new google.maps.LatLngBounds();
    //Get all the points lines of the polly
    var paths = Maps.area.getPaths();
    for (var p = 0; p < paths.getLength(); p++)
        //To store each path
        var path = paths.getAt(p);
        //Now lets expand the box
        for (var i = 0; i < path.getLength(); i++)
            //Add each point of the line to the 'box' making it bigger each time
            bounds.extend(path.getAt(i));
    //Reaturn the bounds, this has a contains method so we can check if the latLng is in it. 
    return bounds;
}

Array.prototype.max = function() {
  return Math.max.apply(null, this)
}

Array.prototype.min = function() {
  return Math.min.apply(null, this)
} 
```

但我似乎无法解决它。对于一个简单的三角形或正方形，它可以完美地工作，但是当我们遇到这样的事情时它就不起作用了，因为我们无法确定`count`应该是偶数还是奇数

![在此处输入图像描述](../Images/5ed8b015b051014704885ec8535309d4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:40:30.513

Google Maps API v3[球面几何](https://developers.google.com/maps/documentation/javascript/geometry)库具有[poly.contains](https://developers.google.com/maps/documentation/javascript/reference#poly)。采用 LatLng 和 Polygon 并告诉您该点是否在多边形中。

```
containsLocation(point:LatLng, polygon:Polygon) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:20:19.633

这是地理信息系统的一个相当标准的问题。有几种“标准”算法可以解决这个问题。下面的链接记录了其中的一些并提供了一个示例。请注意，算法往往会在边缘情况下崩溃，例如当多边形跨越极端纬度/经度边界时，例如极点和子午线。

[多边形算法](http://alienryderflex.com/polygon/)

# javascript - Crockford 的原型继承 - 用法

> ID：14267364
> 
> 赞同：13
> 
> 时间：2013-01-10T21:13:35.783
> 
> 标签：javascript, inheritance

我一直在构建一个小型 JS 框架以供我的工作使用，我想采用 Douglas Crockford 的原型继承模式。我想我对原型对象的工作原理有了大致的了解，但除了最简单的示例之外，我还不清楚我将如何使用这种模式。

我会充实到我理解的程度。

```
(function () {

    'use strict';

    var Vehicles = {};

    Vehicles.Vehicle = function () {
        this.go = function () {
            //go forwards
        };

        this.stop = function () {
            //stop
        };
    };

    Vehicles.Airplane = Object.create(Vehicles.Vehicle());

}()); 
```

所以现在我的 Vehicles.Airplane 对象可以 go() 和 stop()，但我想要更多。我想为这个对象添加 takeOff() 和 land() 方法。之后我可以使用丑陋的点符号：

```
Vehicles.Airplane.takeOff = function () {
    //take off stuff
} 
```

但这似乎是错误的，特别是如果我要添加许多方法或属性。在这里提出的[问题](https://stackoverflow.com/questions/6323099/crockford-prototypical-inheritance/6323134)似乎与我的非常相似，但答案对我来说并不完全正确。答案表明我应该在使用 Object.create 之前构建一个对象字面量，并且我应该将该对象字面量传递给 create 方法。然而，在给出的示例代码中，看起来他们的新对象现在根本没有继承任何东西。

我希望的是一些类似于以下的语法：

```
Vehicles.Airplane = Object.create(Vehicles.Vehicle({
    this.takeOff = function () {
        //takeOff stuff
    };
    this.land = function () {
        //land stuff
    };
})); 
```

我知道这个语法现在会被 Object.create 严重破坏，因为我当然是在传递 Vehicle.Vehicle 一个函数而不是一个对象文字。那是无关紧要的。我想知道我应该以什么方式将新属性构建到从另一个继承的对象中，而不必事后用点符号一次列出一个。

* * *

编辑：

Bergi，在对这个话题进行了一些痛苦的思考之后，我想我真的很想采用你所说的“古典模式”。这是我的第一次尝试（现在使用实际的代码片段而不是模拟假设 - 你甚至可以看到我蹩脚的方法存根）：

```
CS.Button = function (o) {
    o = o || {};

    function init(self) {
        self.domNode = dce('a');
        self.text = o.text || '';
        self.displayType = 'inline-block';
        self.disabled = o.disabled || false;

        self.domNode.appendChild(ctn(self.text));
        if (o.handler) {
            self.addListener('click', function () {
                o.handler(self);
            });
        }
    }

    this.setText = function (newText) {
        if (this.domNode.firstChild) {
            this.domNode.removeChild(this.domNode.firstChild);
        }
        this.domNode.appendChild(ctn(newText));
    };

    init(this);
};
CS.Button.prototype = Object.create(CS.Displayable.prototype, {
    constructor: {value: CS.Button, configurable: true}
});

CS.Displayable = function (o) { // o = CS Object
    o = o || {};

    var f = Object.create(new CS.Element(o));

    function init(self) {
        if (!self.domAnchor) {
            self.domAnchor = self.domNode;
        }
        if (self.renderTo) {
            self.renderTo.appendChild(self.domAnchor);
        }
    }

    //Public Methods
    this.addClass = function (newClass) {
        if (typeof newClass === 'string') {
            this.domNode.className += ' ' + newClass;
        }
    };
    this.addListener = function (event, func, capture) {
        if (this.domNode.addEventListener) {
            this.domNode.addEventListener(event, func, capture);
        } else if (this.domNode.attachEvent) {
            this.domNode.attachEvent('on' + event, func);
        }
    };
    this.blur = function () {
        this.domNode.blur();
    };

    this.disable = function () {
        this.disabled = true;
    };

    this.enable = function () {
        this.disabled = false;
    };

    this.focus = function () {
        this.domNode.focus();
    };

    this.getHeight = function () {
        return this.domNode.offsetHeight;
    };

    this.getWidth = function () {
        return this.domNode.offsetWidth;
    };

    this.hide = function () {
        this.domNode.style.display = 'none';
    };

    this.isDisabled = function () {
        return this.disabled;
    };

    this.removeClass = function (classToRemove) {
        var classArray = this.domNode.className.split(' ');
        classArray.splice(classArray.indexOf(classToRemove), 1);
        this.domNode.className = classArray.join(' ');
    };

    this.removeListener = function () {
        //Remove DOM element listener
    };

    this.show = function () {
        this.domNode.style.display = this.displayType;
    };

    init(this);
};
CS.Displayable.prototype = Object.create(CS.Element.prototype, {
    constructor: {value: CS.Displayable, configurable: true}
}); 
```

我应该很清楚并说它还没有完全起作用，但主要是我想听听你对我是否走在正确的轨道上的看法。您在示例的评论中提到了“特定于实例的属性和方法”。这是否意味着我的 this.setText 方法和其他方法放置错误，并且原型链上的后代项目无法使用？

此外，在使用时，似乎声明的顺序现在很重要（我无法访问 CS.Displayable.prototype，因为（我认为）首先列出了 CS.Button，而当时我没有定义 CS.Displayable我试图引用它）。这是我只需要处理和处理的事情（按照代码中的祖先顺序而不是我的强迫症字母顺序）还是我在那里也忽略了一些东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T21:49:36.057

```
Vehicles.Airplane = Object.create(Vehicles.Vehicle()); 
```

那条线是错误的。您似乎想使用- 永远不要在没有!`new Vehicles.Vehicle`的情况下调用构造函数。`new`

不过，我不确定您要使用哪种模式。我想到了两个：

## 古典图案

您正在使用构造函数，就像在标准 JS 中一样。继承是通过相互继承原型对象并将父构造函数应用于子实例来完成的。您的代码应如下所示：

```
Vehicles.Vehicle = function () {
    // instance-specific properties and methods,
    // initialising
}
Vehicles.Vehicle.prototype.go = function () {
     //go forwards
};
Vehicles.Vehicle.prototype.stop = function () {
    //stop
};

Vehicles.Airplane = function() {
    // Vehicles.Vehicle.apply(this, arguments);
    // not needed here as "Vehicle" is empty

    // maybe airplane-spefic instance initialisation
}
Vehicles.Airplane.prototype = Object.create(Vehicles.Vehicle.prototype, {
    constructor: {value:Vehicles.Airplane, configurable:true}
}); // inheriting from Vehicle prototype, and overwriting constructor property

Vehicles.Airplane.prototype.takeOff = function () {
   //take off stuff
};

// usage:
var airplane = new Vehicles.Airplace(params); 
```

## 纯原型模式

您正在使用普通对象而不是构造函数 - 没有初始化。创建实例和设置继承，only`Object.create`被使用。这就像只有原型对象和空的构造函数。`instancof`在这里不起作用。代码如下所示：

```
Vehicles.Vehicle = {
    go: function () {
         //go forwards
    },
    stop: function () {
         //stop
    }
}; // just an object literal

Vehicles.Airplane = Object.create(Vehicles.Vehicle); // a new object inheriting the go & stop methods
Vehicles.Airplane.takeOff = function () {
   //take off stuff
};

// usage:
var airplane = Object.create(Vehicles.Airplane);
airplane.prop = params; // maybe also an "init" function, but that seems weird to me 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T21:45:08.333

You got `Object.create` wrong. **The first argument should be an object** (maybe that's why people suggested you pass a literal).

In your first example, you're actually passing `undefined`:

```
Vehicles.Airplane = Object.create(Vehicles.Vehicle()); // the function call will
                                                       // return undefined 
```

The following would work, but it's not very Crockford-ish:

```
Vehicles.Airplane = Object.create(new Vehicles.Vehicle()); 
```

The way I believe Crockford would do it (or, at least, wouldn't complain of):

```
var Vehicles = {};

Vehicles.Vehicle = {
    go : function() {
        // go stuff
    },
    stop : function() {
        // go stuff
    }
};

Vehicles.Airplane = Object.create(Vehicles.Vehicle, {
    takeOff : { 
        value : function() {
            // take-off stuff
        }
    },
    land : {
        value: function() {
            // land stuff
        }
    }
}); 
```

Note that `Vehicles.Vehicle` is just a literal, which will be used as the prototype for other objects. When we call `Object.create`, we pass `Vehicles.Vehicle` as the prototype, and `takeOff` and `land` will be own properties of `Vehicles.Airplane`. You may then call `Object.create` again, passing `Vehicles.Airplane` as the prototype, if you want to create e.g. a Boeing.

The own properties passed as the second parameter are packed in an object that contains a representation of their [property descriptors](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty). The outer keys are the names of your properties/methods, and each one points to another object containing the actual implementation as the `value`. You may also include other keys like `enumerable`; if you don't they'll take the default values. You can read more about descriptors on the [MDN page about `Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty).

# https - 将 YUI3 与 HTTPS 一起使用的“正确”方式是什么？

> ID：14267371
> 
> 赞同：4
> 
> 时间：2013-01-10T21:14:09.093
> 
> 标签：https, yui

我在 YUI2 方面有很多经验，并且我正在加快 YUI3 的速度。我正在编写的服务需要 HTTPS，但香草 YUI 体验从 Yahoo 的仅 HTTP CDN 加载，当浏览器尝试将 HTTPS 页面与 HTTP javascript 混合时，它在 Chrome 中悄悄失败，在现代 IE 中大声失败。

我的目标是获得所有：

1.  站点使用 HTTPS
2.  YUI 在 Chrome 和 IE 中工作（因此脚本也必须通过 SSL 传递）
3.  使用 YUI 3 的现代版本（这使[YUI PHP 加载器](https://github.com/yui/phploader)失去资格，它尚未更新以支持 YUI 3.4，而 3.8 是“当前”）
4.  使用汇总组合来提高速度，而不是使用许多 JS 和 CSS 文件（这会取消 Google 的 CDN 的资格……如果 YUI 3 实际上托管在那里，但我找不到。）
5.  站点动态加载 YUI 依赖项（当我添加功能时，依赖项会定期更改，返回到[配置](http://yuilibrary.com/yui/configurator/)器并每次保存一个新包是一个 PITA）

显而易见的解决方案似乎是放弃目标 #5 而只使用自托管组合。

我怎样才能实现**所有 5**个目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-03-17T18:23:10.100

解决它的最简单方法是将基本 URL 从
[http://yui.yahooapis.com/](http://yui.yahooapis.com/)更改为
[https://yui-s.yahooapis.com/](https://yui-s.yahooapis.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T02:32:10.230

# ruby - 在 RSpec 中存根 RestClient 响应

> ID：14267373
> 
> 赞同：12
> 
> 时间：2013-01-10T21:14:19.930
> 
> 标签：ruby, rspec, sinatra, rest-client

我有以下规格...

```
 describe "successful POST on /user/create" do
    it "should redirect to dashboard" do
      post '/user/create', {
          :name => "dave",
          :email => "dave@dave.com",
          :password => "another_pass"
      }
      last_response.should be_redirect
      follow_redirect!
      last_request.url.should == 'http://example.org/dave/dashboard'
    end
  end 
```

Sinatra 应用程序上的 post 方法使用 rest-client 调用外部服务。我需要以某种方式存根其余客户端调用以发送回预设响应，因此我不必调用实际的 HTTP 调用。

我的应用程序代码是...

```
 post '/user/create' do
    user_name = params[:name]
    response = RestClient.post('http://localhost:1885/api/users/', params.to_json, :content_type => :json, :accept => :json)
    if response.code == 200
      redirect to "/#{user_name}/dashboard"
    else
      raise response.to_s
    end
  end 
```

有人可以告诉我如何使用 RSpec 做到这一点吗？我在谷歌上搜索过很多博客文章，这些文章只是表面的，但我实际上找不到答案。我对 RSpec 时期很陌生。

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T22:17:42.327

使用[模拟](https://relishapp.com/rspec/rspec-mocks/docs)作为响应，您可以做到这一点。一般来说，我对 rspec 和测试仍然很陌生，但这对我有用。

```
describe "successful POST on /user/create" do
  it "should redirect to dashboard" do
    RestClient = double
    response = double
    response.stub(:code) { 200 }
    RestClient.stub(:post) { response }

    post '/user/create', {
      :name => "dave",
      :email => "dave@dave.com",
      :password => "another_pass"
    }
    last_response.should be_redirect
    follow_redirect!
    last_request.url.should == 'http://example.org/dave/dashboard'
  end
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-11T01:58:31.000

[实例双打](https://www.rubydoc.info/github/rspec/rspec-mocks/RSpec%2FMocks%2FExampleMethods:instance_double)是要走的路。如果你存根一个不存在的方法，你会得到一个错误，这会阻止你在生产代码中调用一个不存在的方法。

```
 response = instance_double(RestClient::Response,
                                 body: {
                                   'isAvailable' => true,
                                   'imageAvailable' => false,
                                 }.to_json)
      # or :get, :post, :etc
      allow(RestClient::Request).to receive(:execute).and_return(response) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T22:26:18.377

我会考虑使用 gem 来完成这样的任务。

最流行的两个是[WebMock](https://github.com/bblimke/webmock)和[VCR](https://github.com/vcr/vcr)。

# matlab - 从文件中绘制数据

> ID：14267382
> 
> 赞同：0
> 
> 时间：2013-01-10T21:15:01.733
> 
> 标签：matlab

> **可能重复：**
> [文件的计算](https://stackoverflow.com/questions/14265718/calculations-of-files)

```
Day              price1          price2

2/2/2000         10                15

3/2/2000         12                18

4/2/2000         14                19 
```

我如何绘制 x=day 和 y=price1？

```
file = xlsread('example.xls');

x = file(:,1);

y = file(:,2);

plot(x,y); 
```

它没有给出 x 行中的天数，它给出了 2/2/2000 的数字 0、1、2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:36:23.783

让 x 轴显示日期的最简洁方法是通过`datetick`函数。我曾经手动完成，正如这个问题的其他答案所建议的那样，直到我发现这个奇妙的功能。

将以下示例剪切并粘贴到 Matlab 脚本中并逐行运行：

```
y = randn(4, 1); %# Simulate random observations
Dates = {'1/1/2000', '2/1/2000', '3/1/2000', '4/1/2000'}; %# Build a vector of date strings
DatesNum = datenum(Dates, 'dd/mm/yyyy'); %# Convert date strings to date numbers
plot(DatesNum, y); %# Plot the data
datetick('x', 'dd/mm/yyyy'); %# Convert date numbers on plot to string format 
```

最后一行基本上说“在当前绘图的 x 轴上，使用格式字符串 dd/mm/yyyy 以日期时间格式显示数字”。

一旦您熟悉了此示例的工作原理，您应该能够使此示例适应您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:36:08.587

您可以使用日期字符串`xtick`在图中标记您的标记。首先，我们需要将日期编号转换为日期字符串，使用`datestr`.

```
[file, text] = xlsread('example.xls');
x = file(:, 1);
y = file(:, 2);
x0 = datenum(2000, 2, 2);
cal = cellstr(datestr(x + x0)); 
```

然后我们可以绘制和标记刻度线。

```
plot(x, y);
set(gca(), 'xtick', 1 : length(y), 'xticklabel', cal);; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:35:33.330

如果您没有可用的 Excel COM 服务器（可能是在 unix/linux 上运行的情况），日期将显示为 Excel 序列日期编号（整数）。这些与 MATLAB 日期序列号不同。它们可以使用 x2mdate() 进行转换：

```
file = xlsread('example.xls')
file(:,1) = x2mdate(file(:,1))
set(gca,'Xtick',file(:,1),'XTickLabel',datestr(file(:,1))) 
```

在这里，我假设您的日期列中的日期被 Excel/LibreOffice 格式化为日期，而不是字符串。

# javascript - 带有 jQ uery .domready() 的 requirejs 未正确触发

> ID：14267386
> 
> 赞同：3
> 
> 时间：2013-01-10T21:15:14.990
> 
> 标签：javascript, jquery, requirejs, jquery-events, domready

当您使用 requirejs 2.1.1 加载 jquery 1.8.2 时`$(document).ready()`， `$(window).load()`事件开始表现得非常奇怪。

有时只有其中一个会被触发，有时两者都会触发，但在所有情况下，它们都会在加载所有内容、图像等后触发 - `.load() event`。

切换到 jQuery 1.7.2 可以 正常`.load()`工作，但不会在真正的 DOM 就绪事件上触发。我在这里做错了什么，或者不仅仅是我有这些问题？`.ready()``.load()`

**示例**（打开控制台并刷新）：

[http://jsbin.com/epujom/5](http://jsbin.com/epujom/5)

**来源**：

[http://jsbin.com/epujom/5/edit](http://jsbin.com/epujom/5/edit)

**编辑：** 我已经更新了测试用例。现在可以清楚地看到，`jQuery.isReady = false`即使 DOM 已准备好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:25:07.780

RequireJS 提供了一个[轻量级的 domReady 模块](http://requirejs.org/docs/download.html#domReady)，您可以将它与其他模块一起使用。通过这样做，您无需在 dom 就绪功能可用之前等待 jQuery 被加载和解析。

更多细节 - [http://requirejs.org/docs/api.html#pageload](http://requirejs.org/docs/api.html#pageload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:15:12.513

我可以达到我想要的结果的唯一方法是加载**头部**domready 插件，比如

[https://github.com/freelancephp/DOMReady](https://github.com/freelancephp/DOMReady)

或者

[https://github.com/requirejs/domReady](https://github.com/requirejs/domReady)

domready 插件或附加事件应始终在实际浏览器 domready 事件发生之前运行，否则它们都在等待加载所有图像，这不是您想要的。

# haskell - yesod 教程、nicEdit 和静态 gif 参考

> ID：14267388
> 
> 赞同：4
> 
> 时间：2013-01-10T21:15:18.677
> 
> 标签：haskell, yesod

博客示例和 yesodweb 教程中的 nicEditor 可以正常工作。为了学习一些关于 yesod 和脚手架等的知识，我下载了 nicEdit，将其解压缩，并将其放入 /static/js/nicEdit.js。

然后我编辑了 Handler/Blog.hs 并在那里添加了以下内容（从 Yesod.Form.Nic + 一些导入进行了一些修改）：

```
-- nicHtmlField2 :: YesodNic master => Field sub master Html
nicHtmlField2 = Field
    { fieldParse = \e _ -> return . Right . fmap (preEscapedText . sanitizeBalance) . listToMaybe $ e
    , fieldView = \theId name attrs val _isReq -> do
        toWidget [shamlet|
$newline never
    <textarea id="#{theId}" *{attrs} name="#{name}" .html>#{showVal val}
|]
        -- addScript' urlNicEdit
        addScript $ StaticR js_nicEdit_js
        -- addScript $ StaticR img_nicEditorIcons_gif
        master <- lift getYesod
        toWidget $
          case jsLoader master of
            BottomOfHeadBlocking -> [julius|
bkLib.onDomLoaded(function(){new nicEditor({fullPanel:true}).panelInstance("#        {rawJS theId}")});
|]
            _ -> [julius|
(function(){new nicEditor({fullPanel:true}).panelInstance("#{rawJS theId}")})();
|]
    , fieldEnctype = UrlEncoded
    }
  where
    showVal = either id (pack . renderHtml) 
```

然后，entryForm在Handler/Blog.hs中使用上述函数，之后

```
Settings.StaticFiles 
```

进入阴谋集团，

```
/static StaticR Static getStatic 
```

进入配置/路由并触摸设置/静态文件。

如果我回想所有步骤，编辑器现在会使用本地静态 javascript 文件显示。

问题是 static/js/nicEdit.js 引用了 nicEditorIcons.gif。目前，我不知道如何对 yesod 说，如何找到 gif 文件。编辑器工作，按钮在那里没有任何图标。我试图通过添加到静态图标文件 img_nicEditorIcons_gif 的路由来获取它们。现在 yesod 日志显示 yesod 找到了图标。但是，这些图标在表单中的 nicEdit 中不可见。

我想这是一个基本的事情，但找不到问题的答案......所以

1.  是否可以直接在nicEdit.js中引用img_nicEditorIcons_gif？如果是这样，怎么做？

2.  是否可以告诉 yesod 让 nicEdit 找到 gif 而无需编辑 nicEdit.js 文件（通过使用路由或句柄或其他东西）？

3.  使用莎士比亚的方法，将 nicEdit.js 内容放入 julius 文件和 gif 作为静态路由...这意味着 js 文件不再是静态的？不管怎样，我也要试试这个。

到目前为止我发现了什么？

1.  nicEdit.js 的变化

    ```
     iconsPath : './nicEditorIcons.gif', 
    ```

    使用 @{Img_nicEditorIcons_gif} 或与 #{} 不起作用。（Gif 在 static/img-dir 中，现在也在许多其他地方。）

    部分答案是在 nicEdit.js 中使用

    ```
     iconsPath : 'http://localhost:3000/static/img/nicEditorIcons.gif?etag=gUsMv6k-', 
    ```

    现在图标出现了！但是，从某种意义上说，这很笨拙，让小部件（Field -function）自动找出 etag-part 会好得多。Etag-part 可以从没有显示图标的网页的源代码中找到。

    实际上，在 nicEdit.js 中，可以使用以下前两个中的任何一个，并且会显示图标：

    ```
     iconsPath : './static/img/nicEditorIcons.gif',
     // iconsPath : 'http://localhost:3000/static/img/nicEditorIcons.gif',
     // iconsPath : './nicEditorIcons.gif', 
    ```

    这现在几乎可以接受了。剩下的唯一恼人的事情是，作为图书馆用户，我仍然应该稍微编辑一下原始来源。

2.  下面的处理程序呢：

    ```
    module Handler.Img_nicEditorIcons_gif where

    import Import
    getImg_nicEditorIcons_gif :: Handler RepHtml
    getImg_nicEditorIcons_gif = do 
        defaultLayout $ do
            -- $(widgetFile "img_nicEditorIcons_gif")
            -- [whamlet|@{StaticR img_nicEditorIcons_gif}|]
            [whamlet|<img src=@{StaticR img_nicEditorIcons_gif}>|] 
    ```

    现在服务器说：

    ```
     GET /blog
     Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
     11/Jan/2013:22:05:09 +0200 [Debug#SQL] "SELECT \"id\",\"title\",\"content\" FROM     \"article\" ORDER BY \"title\" DESC" [] @(persistent-   1.1.3.2:Database.Persist.GenericSql.Raw ./Database/Persist/GenericSql/Raw.hs:121:12)
     Status: 200 OK. /blog
     GET /nicEditorIcons.gif
     Accept: image/png,image/*;q=0.8,*/*;q=0.5
     Status: 200 OK. /nicEditorIcons.gif 
    ```

    但是编辑器仍然没有找到图标。路线有效，如果放入浏览器。Img-tag 在单独的页面上很好地显示图标。同样，如果使用 StaticR，则可以从 javascript 部分（页脚中的链接）找到图标，但不能在编辑器中找到...

3.  朱利叶斯案，也部分成功。

    与第一种情况（静态）一样，通过使用

    ```
     iconsPath : 'http://localhost:3000/static/img/nicEditorIcons.gif', 
    ```

    在 blog3.julius 文件中，图标出现了。在这种情况下，Handler/Blog3.hs 中的 blog3-handler 是

    ```
     getBlog3R :: Handler RepHtml
     getBlog3R = do
       defaultLayout $ do
         setTitle "Trial to find the icons"
         $(widgetFile "articles3")
         $(widgetFile "blog3")
         toWidget $ [julius|
     bkLib.onDomLoaded(function(){new nicEditor({fullPanel:true}).panelInstance("h3")});
     |] 
    ```

    对应的template/articles3.hamlet为

    ```
     <h1> Articles3
     $if null articles
       -- Show a standard message if there is no article
       <p> There are no articles in the blog
     $else
       -- Show the list of articles
       <ul>
         $forall Entity articleId article <- articles
           <li> 
              <a href=@{ArticleR articleId} > #{articleTitle article} 
    ```

    文件 blog3.hamlet 是

    ```
     <hr>
       <form method="post" enctype="application/x-www-form-urlencoded">
         <input type="hidden" name="_token" value="8mFKLWnKcn">
         <div class="required ">
           <label for="h2">Title
           <input id="h2" name="f2" type="text" required value="">
         <div class="required ">
           <label for="h3">Content
           <textarea id="h3" name="f3">
         <div>
          <input type="submit" value="Post New Article"> 
    ```

    但如前所述，在此解决方案中也需要稍微编辑 nicEdit.js 源...

即使这几乎解决了，如果有人有更好的选择，我想听听......上面的案例二，我会怀疑它目前还没有任何可用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-12T07:42:32.457

很可能为时已晚，但这是答案：

新的 nicEditor( {iconsPath : "your_path"} )

在这里看到：http: [//nicedit.com/demos.php ?demo=2](http://nicedit.com/demos.php?demo=2)

# c# - Automapper 在第一次调用时正确映射，但在第二次调用时跳过属性

> ID：14267390
> 
> 赞同：5
> 
> 时间：2013-01-10T21:15:25.347
> 
> 标签：c#, model-view-controller, automapper

我定义了以下类：

```
public class ImageIndexModel {
   public string Description {get; set;}
   public string InstrumentNumber {get; set;}
}

public class ImageEditModel : ImageIndexModel {
    public int TotalCount = 0;
}

public class Clerk {  //This is actually a class defined by LinqToSql
    public string Description {get; set;}
    public string InstrumentNo {get; set;}
} 
```

现在，在我`global.asax`的`Application_Start()`.

```
Mapper.CreateMap<ImageIndexModel, Clerk>()
   .ForMember(dest => dest.InstrumentNo,
              opt => opt.MapFrom(src => src.InstrumentNumber)); 
```

最后，在我的一个控制器中，我有以下代码：

```
var _existing = new Clerk();
var _default = new ImageEditModel() {
                 InstrumentNumber = "12345678", Description = "Test"
               };
Mapper.Map(_default, _existing); 
```

我第一次在控制器上调用 Action 并运行此映射时，一切正常，并且`InstrumentNumber`正确映射到`InstrumentNo`对象的`Clerk`。但是，第二次调用 Action 时，`InstrumentNo`不会映射。 `InstrumentNumber`肯定有一个值，但`InstrumentNo`仍然为空。

有什么想法可能在这里发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:39:00.860

我曾经遇到过相反的问题，即发生了太多映射。它是通过调用 mapper.reset() 来解决的，[因为可能有其他原因](https://stackoverflow.com/questions/6365649/automapper-in-the-dal-when-to-use-mapper-reset)。也许您的应用程序中的其他东西正在从您下方重置您的映射器，使其不再解析您认为应该（并且会在短时间内完成）的映射？另一个问题的关键是 Automapper 是单例的，因此您的代码的另一部分可以在您不知情的情况下加载或后期绑定并弄乱它。

# javascript - Knockout.js 数组追加更多对象

> ID：14267396
> 
> 赞同：2
> 
> 时间：2013-01-10T21:15:52.503
> 
> 标签：javascript, knockout.js

我正在使用 Ajax 加载数据，对于初始加载，我可以使用它来绑定所有数据到 observableArry：

```
 success: function (result) {
                var mappedData = $.map(result.d, function (item) {
                    return new Applicant(item);
                });
                self.Applicants(mappedData);
            } 
```

问题是当我想向数组加载更多时，我知道如何添加一个，但是如果下一次加载将超过 1 个对象，并且我想绑定到数组，我该怎么做呢？

self.Applicants.push(mappedData); 不会工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:18:43.793

如果您需要将一堆对象添加到可观察数组中，我只需将整个数组设置为其当前内容，并与新对象连接。

以下应该有效：

```
self.Applicants(self.Applicants().concat(mappedData)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:20:46.237

我会使用：

```
Array.prototype.push.apply(self.Applicants(), mappedData);
self.Applicants.valueHasMutated(); 
```

有关使用可观察数组的一般提示和技巧，请务必查看[Ryan Niemeyer 的文章](http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html)。

# c++ - std::array 可以在 constexpr 类中使用吗？

> ID：14267399
> 
> 赞同：36
> 
> 时间：2013-01-10T21:16:25.207
> 
> 标签：c++, arrays, c++11, constexpr

我目前正在创建一个带有`constexpr`构造函数的类，我想知道是否可以使用 an`std::array`来存储此类的数据。标准是否明确指定 an`std::array`具有`constexpr`构造函数并且可以在编译时访问其内容？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-10T22:21:20.333

因为`std::array<T, N>`是一个聚合，它可以被初始化为`constexpr`当且仅当底层类型`T`有一个`constexpr`构造函数（当与你提供的每个初始化器一起出现时）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-10T21:43:23.563

基于@MarkGlisse 的评论：这个[编译](http://liveworkspace.org/code/2yUyxm$13)

```
#include <array> 
#include <iostream>

template<typename T, std::size_t N> 
struct X 
{ 
   constexpr X(const std::array<T,N>& a):arr(a){} 

   private: 
   std::array<T,N> arr; 
}; 

constexpr std::array<int,2> a {{ 13, 18 }}; 
constexpr X<int,2> x = a;

int main() 
{        
} 
```

我相信我在这里找到了标准的相关引用：

**12.1 构造函数 [class.ctor]**

> 6 一个默认且未定义为已删除的默认构造函数在它被强制（3.2）创建其类类型（1.8）的对象时或当它在第一次声明后显式默认时被隐式定义。隐式定义的默认构造函数执行类的一组初始化，这些初始化将由用户编写的该类的默认构造函数执行，没有 ctor-initializer (12.6.2) 和空的复合语句。如果该用户编写的默认构造函数格式不正确，则程序格式错误。如果用户编写的默认构造函数满足 constexpr 构造函数 (7.1.5) 的要求，则隐式定义的默认构造函数是 constexpr。

这看起来基本上像@BenVoigt 的答案。

# entity-framework - 具有现有数据库的实体框架 5，使用生成的 POCO？将 POCO 转移到自己的项目中？

> ID：14267401
> 
> 赞同：3
> 
> 时间：2013-01-10T21:16:29.343
> 
> 标签：entity-framework, poco

我有一个带有现有数据库的项目，该数据库最初是为遗留应用程序创建的。它工作正常，但随着时间的推移，相当多的表/字段已经丢失或未充分利用，但历史数据可能有朝一日有用，所以它们不会去任何地方。

进入 2012 ('13) 和 Entity Framework 5，这是一个内置 POCO 生成的 ORM（不错的添加！）。太棒了.. 连接到 Oracle 数据库，gen。了解上下文和一些 POCO 的.. suh-weet ！但是等等..我的 POCO 并不是我想要处理的 POCO ......有一堆我不再需要的字段（不是说我永远不需要它们，但我不能确定），所以现在我有了这些 POCO，它们基本上是臃肿的表映射器......那我该怎么办。

我在这里看到一些解决方案..

1）。我可以把它们扔掉，只使用我需要的字段。

2）。我可以进入模型表面并开始删除未使用的字段。

3）。“代码优先”方法并将对象绑定到现有数据库中，但它是一个大型数据库（我很确定这是可能的，对吧？）

4）。在它自己的模型项目中创建我自己的 POCO / DTO，这些将基本上成为我的“域模型”，但是映射回上下文可能会很痛苦..

最后，这些 POCO / DTO 是否需要在他们自己的项目中？真的有什么好处……看到像“YAGNI”这样的东西，我觉得它可以坐在.edmx下面，从不打扰任何人..

附带说明一下，我也将需要其中一些通过 JSON，因此需要考虑整个可序列化能力。

我可以只对生成的 POCO 进行部分分类，而只对我需要的属性进行“属性”吗？

无论如何，很高兴听到过去的经验或对此事的想法..

我可以在*Programmers*中看到它，但我想我会从这里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:44:47.817

我们有一个非常相似的情况，一个大型的遗留 DB2 数据库，我们需要一小部分特定表用于我们的应用程序。

为此，我们对我们感兴趣的相关数据子部分使用实体框架代码优先模型。这意味着我们可以做一些重要的事情：

*   从模型中删除不相关的数据，使代码更容易被发现
*   重命名我们模型中的字段并将它们映射到在应用程序中有意义的名称而不是现有的列名称
*   减少查询拉回的数据量（即我们的选择不会抓取所有额外的位）
*   存在 2 种数据格式的地方使用现代标准而不是历史格式

这对我们来说非常有效，但有几点需要注意：

*   如果您正在写作，请确保在模型中包含所有必填字段
*   你可以生成你的 CF 类，但你必须稍微修剪一下
*   从非 mssql 生成有时会更棘手

在 json 序列化方面，我们也这样做，但是我们为此使用不同的模型并使用 automapper 进行翻译。在大多数情况下，您应该能够在不需要添加额外属性的情况下进行序列化，但如果需要它们，您可以将它们与任何 ef 属性一起添加到您的 pocos 中。

# mysql - 远程连接到mysql数据库

> ID：14267405
> 
> 赞同：-3
> 
> 时间：2013-01-10T21:16:43.997
> 
> 标签：mysql, database

我想做的是连接到运行网站的数据库。然后将该数据库的内容复制到不同服务器上的另一个数据库。这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:30:08.997

这是可以做到的，并且有不同的方法可以做到。我将列出 3 种不同的方式

1.  运行`mysqldump -h<source host> | mysql -h<target host>`。您必须阅读 mysqldump 选项来决定需要添加哪些选项，并且您可能还需要为用户、密码和数据库设置选项。
2.  复制 mysql 使用的所有文件并将它们放在新主机上。只要新服务器的配置方式相同，它就可以工作
3.  使用 Perconas [xtrabackup](http://www.percona.com/doc/percona-xtrabackup/)。如果数据库很大，这可能是最好的选择。在进行备份时，数据库仍然可以运行。此选项将创建数据库的精确副本，可能需要也可能不需要。

通常，如果数据库很小，选项 1 是最简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:26:43.833

是的，但这取决于数据库的设置方式。

出于安全原因，大多数在 Web 服务器后面运行的数据库将无法从外部访问。假设您可以访问服务器，最好的选择是登录到 shell 并转储数据库。MySQL 有工具`mysqldump`可以帮助解决这个问题。紧要关头：

```
mysqldump -u username -p schemaname > yourdatabasedump.sql 
```

或者，您可以安装`PhpMyAdmin`在您的服务器上（假设启用了 PHP）并从那里转储数据库。

进口则相反。在另一台服务器上获取 shell 访问权限并执行以下操作...首先，创建您的架构：

```
mysql -u someuser -p

 > CREATE DATABASE schemaname;
 > exit 
```

然后导入。

```
mysql -u someuser -p schemaname < yourdatabasedump.sql 
```

# html - 更改用户选择颜色

> ID：14267407
> 
> 赞同：0
> 
> 时间：2013-01-10T21:16:49.380
> 
> 标签：html, css

当我浏览并最终意外选择网页上的文本或元素时，我讨厌它；一切都变蓝了！所以目前，我在页面的某些部分使用这个类，用户可能会错误地选择一些东西：

```
.NoSelect{
    -webkit-user-select:none;
    -moz-user-select:none;
    -ms-user-select:none;} 
```

这很好用，但问题是我最终得到了很多具有此类的 div。

有没有办法改变所选文本和所选元素的颜色并使其透明？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:21:09.207

您可以使用[`::selection`](https://developer.mozilla.org/en-US/docs/CSS/%3a%3aselection)CSS 属性。

一切：

```
::selection { background: transparent; } 
```

或者只是`p`标签，例如：

```
p::selection { background: transparent; } 
```

这是[一个例子](http://jsfiddle.net/edelman/a7t3x/)。

# c# - 为什么 DataColumn.Caption 不起作用？

> ID：14267408
> 
> 赞同：17
> 
> 时间：2013-01-10T21:16:50.143
> 
> 标签：c#, .net, datacolumn

我正在尝试创建 a`DataTable`并将其绑定到`DataGridView`. 它可以工作，但我无法通过该`Caption`属性设置列标题。`ColumnName`它使用("City") 代替显示标题。[MSDN](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.caption.aspx)说

> “您可以使用 Caption 属性来显示 DataColumn 的描述性或友好名称。”

这是我的代码：

```
DataColumn dc = new DataColumn("City", typeof(string));
dc.Caption = "Город"; 

DataTable dt = new DataTable();
dt.Columns.Add(dc); 

DataRow row = dt.NewRow(); 
row["City"] = "Moscow";
dt.Rows.Add(row);

datagridview.DataSource = dt; 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-10T21:30:39.303

嗯，MSDN 是对的。这就是`Caption`房产的用途。但是，这并不意味着控件制作者必须使用标题属性。在这种情况下，微软没有这样做（尽管他们确实应该这样做）。您可以将代码修改为此：

```
///snip

dataGridView1.DataSource = dt;

foreach (DataGridViewColumn col in dataGridView1.Columns) {
  col.HeaderText = dt.Columns[col.HeaderText].Caption;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T21:28:15.717

我认为当您绑定到 DataTable 时，DataGridView 不使用 Caption 属性。它仅在您绑定到 DataSet 时才有效。

您可以像这样手动修改列标题：

```
dataGridView.Columns[i].HeaderText = dt.Columns[i].Caption; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T21:29:08.077

你应该试试这个：

```
datagridView.Columns[0].HeaderText = "Title Goes Here."; 
```

您可以针对已添加的列数执行此操作。只有索引会改变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-25T17:45:59.843

@aquinas，这对我有用

```
foreach (DataGridViewColumn col in dataGridView1.Columns) {
  col.HeaderText = dt.Columns[col.Name].Caption;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-02T08:16:16.813

在 vb.net 代码中：

```
Dim dt As New DataTable
dt.Columns.Add("col1").Caption = "Your Header Text"
'and add more columns with .caption
GridView1.DataSource = dt

For Each col As DataColumn In dt.Columns
    GridView1.Columns(col.ColumnName).HeaderText = col.Caption
Next 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-05-31T20:39:38.033

```
 foreach (DataTable dataTable in dataSet.Tables)
        {
            form1.Controls.Add(new LiteralControl(String.Format("<h1>{0}</h1>", dataTable.TableName)));
            GridView grid = new GridView();
            grid.AllowPaging = false;
            grid.AutoGenerateColumns = false;

            foreach (DataColumn col in dataTable.Columns)
            {
                grid.Columns.Add(new BoundField { DataField = col.ColumnName, HeaderText = col.Caption });
            }

            grid.DataSource = dataTable;
            grid.DataBind();

            form1.Controls.Add(grid);
        } 
```

# sql-server-2008 - 从 Visual Studio 部署到分析服务器时出错

> ID：14267410
> 
> 赞同：0
> 
> 时间：2013-01-10T21:16:52.760
> 
> 标签：sql-server-2008, sql-server-2008-r2, ssas, business-intelligence

我已连接到分析服务器：localhost\sqlr2。我使用的是windows认证，所以用户名和密码都是灰色的。我正在尝试将项目从 Visual Studio BI 部署到 SQL Server 2008R2 分析服务器并收到以下错误：

```
Error   1   Internal error: The operation terminated unsuccessfully.        0   0   
Error   2   OLE DB error: OLE DB or ODBC error: Login timeout expired; HYT00; A network-related or instance-specific error has occurred while establishing a connection to SQL Server. Server is not found or not accessible. Check if instance name is correct and if SQL Server is configured to allow remote connections. For more information see SQL Server Books Online.; 08001; Named Pipes Provider: Could not open a connection to SQL Server [53]. ; 08001\.       0   0   
Error   3   Errors in the high-level relational engine. A connection could not be made to the data source with the DataSourceID of 'Max Min Manufacturing DM', Name of 'Max Min Manufacturing DM'.      0   0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:38:06.230

看起来您的数据源设置错误。处理时，立方体指向哪个服务器？SSAS 在什么帐户下运行？您如何在数据源中设置连接字符串？您是否在 SQL Server 日志中看到失败的登录尝试？

```
Error 2 OLE DB error: OLE DB or ODBC error: Login timeout expired; HYT00; 
A network-related or instance-specific error has occurred while establishing a 
connection to SQL Server. Server is not found or not accessible. 
Check if instance name is correct and if SQL Server is configured 
to allow remote connections. 
```

我会专注于此。我假设您必须能够连接到 Visual Studio 中的 SQL Server 来构建您的多维数据集，所以我猜 Analysis Services 没有权限。检查您的连接字符串。

您说您使用的是 Windows 身份验证，那么运行 Analysis Services 的服务帐户是否可以访问所需的数据库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T14:03:57.650

我想分享我对这个错误的经验以及我是如何发现解决方案的。希望能帮助到你！

[http://afsawaf.blogspot.com/2013/08/ole-db-error-ole-db-or-odbc-error.html](http://afsawaf.blogspot.com/2013/08/ole-db-error-ole-db-or-odbc-error.html)

---感谢@kleopatra 的建议。在我的情况下，我连接了错误的提供程序，我试图使用**SQL Server Native Client 11.0**连接到 MS SQL Server 2005 DB，这导致了我的类似问题。当我恢复到**10.0 版本**时，效果很好！

# android - android 本地化不适用于某些语言

> ID：14267419
> 
> 赞同：5
> 
> 时间：2013-01-10T21:17:35.490
> 
> 标签：android, localization, resources, translation, hebrew

我创建了一个 values-he 文件夹，其中的 strings.xml 文件与默认的 strings.xml 文件相同，并带有翻译的字符串值，但在希伯来语选择的真实设备和希伯来语选择的 AVD 上运行该应用程序仍会显示默认的英文文本。任何想法为什么？

编辑：已回答 - 在某些情况下，包括希伯来语，一些 android 设备支持已弃用的语言代码。对于希伯来语，某些设备仍支持旧的“iw”代码而不是“he”。众所周知，在其他一些语言中就是这种情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T21:48:50.857

从 Android [Locale](http://developer.android.com/reference/java/util/Locale.html)类中可以看出：

请注意，Java 使用了几个已弃用的两字母代码。希伯来语（“he”）语言代码被改写为“iw”，印尼语（“id”）改写为“in”，意第绪语（“yi”）改写为“ji”。即使您构造自己的 Locale 对象，这种重写也会发生，而不仅仅是各种查找方法返回的实例。此外，一些设备也将 he 用于希伯来语，以便与使用**values-iw**和**values-he兼容**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-21T07:13:01.717

从 2021 年夏季开始，Google 现在要求您上传捆绑包 (.aab) 而不是 .apk 文件。通过该更改，**如果您的设备不支持特定语言，则不会从 Play Store 下载**。

[在此处](https://stackoverflow.com/a/69657375/6869609)检查解决方案。

# c# - 在 C# 中从没有颜色对象的像素中提取 RGB

> ID：14267425
> 
> 赞同：3
> 
> 时间：2013-01-10T21:18:09.300
> 
> 标签：c#, .net, rgb

我正在尝试从以下代码中的像素中提取 RGB 值：

```
for ( int i=0; i < pixeldata.length; i++)
    {
        IntPtr ptr = bmd.Scan0+i;
        byte* pixel = (byte*)ptr;

        //here is the problem :O

        float r = pixel[1];
        float g = pixel[2];
        float b = pixel[3];
     }
.... 
```

其中 bmd 是像素数据数组：

```
BitmapData bmd = source.LockBits(rect, ImageLockMode.ReadOnly, source.PixelFormat); 
```

source 是我输入的位图，它是一个图像。我试图避免使用 Color 对象。我已经这样做了，它可以工作，我想以其他方式使用，但问题是 ptr 是一个数字，我必须从中提取 RGB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T18:00:49.220

这是为您提供正确答案的解决方案。

```
Bitmap source = new Bitmap(image);

            Rectangle rect = new Rectangle(0, 0, source.Width, source.Height);

            BitmapData bmd = source.LockBits(rect, ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);

            int totalPixels = rect.Height * rect.Width;
            int[] pixelData = new int[totalPixels];
            for (int i = 0; i < totalPixels; i++)
            {
                byte* pixel = (byte*)bmd.Scan0;
                pixel = pixel + (i * 4);

                byte b = pixel[0];
                byte g = pixel[1];
                byte r = pixel[2];

                int luma = (int)(r * 0.3 + g * 0.59 + b * 0.11);
                pixelData[i] = luma;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:21:14.980

如果您有一种格式，将 R、G 和 B 存储为一个字节，每个字节按该顺序线性存储在内存中，则提取 RGB 值的代码应如下所示

```
byte r = pixel[0];
byte g = pixel[1];
byte b = pixel[2]; 
```

请注意，索引偏移量从 0 开始，并且返回的值`byte`不是`float`（尽管您当然可以根据需要进行转换）。

此外，您必须将*i*增加 3 而不是 1，因为 3 个相邻字节代表一个像素。

您最好测试一下`source.PixelFormat`确实使用了您假设的格式。

您还必须使用 /unsafe 开关进行编译才能在 C# 中使用指针。

**更新**

根据@Don 的评论以及您自己的评论，线性内存中的顺序将是 ABGR。这意味着代码将是：

```
for ( int i=0; i < pixeldata.length; i+=4)
{
    IntPtr ptr = bmd.Scan0+i;
    byte* pixel = (byte*)ptr;

    byte a = pixel[0]; // You can ignore if you do not need alpha.
    byte b = pixel[1];
    byte g = pixel[2];
    byte r = pixel[3];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T22:43:24.380

好的，这很有趣，我已经编写了一些代码来玩。假设您的图像具有格式像素`Format24bppRgb`（有关格式的更多信息：http: [//msdn.microsoft.com/en-us/library/system.drawing.imaging.pixelformat.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.pixelformat.aspx)）。这种格式以 24 位依次存储 B、G、R 值。

下面的代码将解析硬盘驱动器中的一些图像，并使用来自第一个图像数据的字节数组的信息 B、G、R 信息`d:\\24bits.bmp`创建新的相同图像。`"d:\\24bits_1.bmp"`

```
unsafe private static void TestBMP()
{
    Bitmap bmp = new Bitmap("d:\\24bits.bmp");

    // Ensure that format is Format24bppRgb.
    Console.WriteLine(bmp.PixelFormat);

    Bitmap copyBmp = new Bitmap(bmp.Width, bmp.Height, System.Drawing.Imaging.PixelFormat.Format24bppRgb);

    // Copy all pixels of initial image for verification.
    int pixels = bmp.Height * bmp.Width;
    Color[,] allPixels = new Color[bmp.Height, bmp.Width];
    for (int i = 0; i < bmp.Height; i++)
        for (int j = 0; j < bmp.Width; j++)
            allPixels[i, j] = bmp.GetPixel(j, i);

    // Lock the bitmap's bits.  
    Rectangle rect = new Rectangle(0, 0, bmp.Width, bmp.Height);
    System.Drawing.Imaging.BitmapData bmpData =
        bmp.LockBits(rect, System.Drawing.Imaging.ImageLockMode.ReadOnly,
        bmp.PixelFormat);

    IntPtr ptr = bmpData.Scan0;

    byte* stream = (byte*)ptr;

    for (int y = 0; y < bmp.Height; y++)
        for (int x = 0; x < bmp.Width; x++)
        {
            int byteIndex = y * bmpData.Stride + x * 3;

            byte r = stream[byteIndex + 2];
            byte g = stream[byteIndex + 1];
            byte b = stream[byteIndex];

            Color c = allPixels[y, x];
            if (r != c.R || g != c.G || b != c.B)
            {
                Console.WriteLine("This should never appear");
            }
            copyBmp.SetPixel(x, y, Color.FromArgb(255, r, g, b));
        }

    // Save new image. It should be the same as initial one.
    copyBmp.Save("d:\\24bits_1.bmp");
} 
```

# firefox - Greasemonkey 脚本在 Firefox 16.0.2 中有效，但在 17.0.1 或更高版本中无效？

> ID：14267426
> 
> 赞同：1
> 
> 时间：2013-01-10T21:18:18.893
> 
> 标签：firefox, greasemonkey, cdata, e4x, scriptish

我有旧的 jQuery 用户脚本，在 Firefox 16 中运行良好，但在 Firefox 17 版本中停止运行。

所以，直到今天我尝试升级到 18 时，我一直在使用版本 16.0.2，但同样的问题仍然存在。首先，我认为可能是 Greasemonkey 并尝试了 1.6 版本和 Scriptish 插件，但没有成功。所以我尝试更新 jQuery 版本但没有解决方案。这不是一个脚本，它们都带有任何 jQuery 代码。控制台上也没有报告错误。

有人知道发生了什么吗？

firebug 控制台报告的一些错误：

```
o.attachEvent("on"+e, h); 
```

从：

```
window.addListener=function(o, e, h){
try{
o.attachEvent("on"+e, h);
}catch(a){
o.addEventListener(e, h, false);
}
} 
```

另一个脚本上的另一个错误

```
GM_addStyle ( (<><![CDATA[ 
```

从：

```
GM_addStyle ( (<><![CDATA[
    #dtl {
        position:           absolute;
        top:                0;
        right:              0;      
    }
    #dtl iframe {
        width:              950;
        height:             680;
        border:             none;
    }

]]></>).toString () ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:20:37.213

jQuery 和 Greasemonkey 在 Firefox 17 和 18 中运行良好（[只要您保持沙箱处于活动状态](https://stackoverflow.com/q/12146445/331508)）；**那不是问题。**

*   **发布和/或链接到失败的脚本！**
*   **发布[SSCCE](http://sscce.org/)。**
*   **请遵循[此清单](https://meta.stackexchange.com/questions/156810/stack-overflow-question-checklist)**（以及[“如何提问”指南](https://stackoverflow.com/questions/how-to-ask)）。

FF 17 改变的唯一主要事情是影响了很多 Greasemonkey 脚本，那就是[**Firefox 放弃了对 E4X 的支持。**](https://developer.mozilla.org/en-US/docs/E4X)

使用 E4X，我们可以`CDATA`很好地制作健壮的多行字符串，如下所示：

```
GM_addStyle ( (<><![CDATA[
    #someNodeID {
        position:           fixed;
        top:                0;
        right:              0;
    }
]]></>).toString () ); 
```

但是，现在不再支持 E4X，我们必须`CDATA`将使用的每一段代码重构为使用 javascript 字符串转义 ( `\`)，如下所示：

```
GM_addStyle ( '                         \
    #someNodeID {                       \
        position:           fixed;      \
        top:                0;          \
        right:              0;          \
    }                                   \
' ); 
```

使用该转义符时，您必须特别注意如何混合`'`和`"`引用。

# python - 如何在 Emacs 中更改缩进宽度后重新缩进 Python 代码？

> ID：14267427
> 
> 赞同：6
> 
> 时间：2013-01-10T21:18:29.253
> 
> 标签：python, emacs

我`python-indent`从 3 变成了 4。然后我`mark-whole-buffer`和`indent-for-tab-command`. 它给了我垃圾。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T21:21:49.877

有`indent-region`功能。所以我会尝试标记整个缓冲区，然后`M-x`输入`indent-region`. `C-M-\`据我所知，它通常绑定到。

**编辑**

重新缩进不适用于`tab-width`更改。正如我在评论中所写，将空格更改为制表符，然后更改`tab-width`是一个解决方案：

“猜想你是用空格而不是制表符缩进，你首先要`tabify`对缓冲区内容进行`tab-width`设置，并将其设置为 3。然后更改`tab-width`为 4 并运行`untabify`。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T21:29:11.383

这是一种黑客，但它不会给你`indent-region`正在给你的垃圾

1) 确保将制表符作为空格设置为 4 个空格。在暂存缓冲区类型中：

```
(setq tab-width 4) 
```

然后通过标记和使用来评估它`M-x eval-region`

2）用制表符全局替换所有三个空格的集合

```
M-x replace-regexp [SPC][SPC][SPC][RET] C-q[TAB][RET] 
```

3) 突出显示整个缓冲区并取消制表符

```
M-x mark-whole-buffer M-x untabify 
```

这会将所有制表符转换为四个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T21:22:13.153

This is a bit of a hack, but it worked for me as a quick work-around: to a "M-X replace-string", " " -> " ". Then you have to close and re-open if your emacs does an automatic idnent-detection on the file. Then you have to go through and fix mult-line code (with tab), and strings that have lots of spaces.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T21:23:29.320

尝试`indent-region`在缓冲区上。最初有界`C-M-\`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-13T15:41:36.867

这也可能有帮助：

[http://www.emacswiki.org/emacs/IndentingPython](http://www.emacswiki.org/emacs/IndentingPython)

特别是，[PythonTidy](http://lacusveris.com/PythonTidy/)对重组杂乱的代码非常有效，有一些小问题（不幸的是，该工具不容易配置）：

[http://www.emacswiki.org/emacs/PythonProgrammingInEmacs#toc17](http://www.emacswiki.org/emacs/PythonProgrammingInEmacs#toc17)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-01T18:10:05.913

可能它不会有用或不是按主题，但我使用这样的脚本。从命令行运行它。(python reindent.py some.py)

更改 string_equal 和 replace_to。

```
import sys

file_name = sys.argv[1]
string_equal = "   "
replace_to =  "    "

with open(file_name) as f:
    data = f.readlines()
    f.close()

def create_new_line(i):
    new_line = ""
    flag = True
    cur_s = ""
    for k in i:
        if flag and k == " ":
            cur_s += k
            if cur_s == string_equal:
                new_line += replace_to
                cur_s = ""
        else:
            flag = False
            new_line += k
    return new_line

with open(file_name, "w") as f:
    for i in data:
        l = create_new_line(i)
        f.write(l)
    f.close() 
```

# php - 如何使用 PHP DOMDocument 解析 HTML？

> ID：14267435
> 
> 赞同：0
> 
> 时间：2013-01-10T21:19:09.597
> 
> 标签：php, html, parsing, domdocument

我在这里有一个 HTML 块：

```
<div class="title">
    <a href="http://test.com/asus_rt-n53/p195257/">
        Asus RT-N53
    </a>
</div>
<table>
    <tbody>
        <tr>
            <td class="price-status">
                <div class="status">
                    <span class="available">Yes</span>
                </div>
                <div name="price" class="price">
                    <div class="uah">758<span> ua.</span></div>
                    <div class="usd">$&nbsp;62</div>
                </div> 
```

如何解析链接 ( `http://test.com/asus_rt-n53/p195257/`)、标题 ( `Asus RT-N53`) 和价格 ( `758`)？

卷曲代码在这里：

```
$dom = new DOMDocument();
$dom->preserveWhiteSpace = false;
$dom->loadHTML($content);
$xpath = new DOMXPath($dom);
$models = $xpath->query('//div[@class="title"]/a');
foreach ($models as $model) {
    echo $model->nodeValue;
    $prices = $xpath->query('//div[@class="uah"]');
    foreach ($prices as $price) {
        echo $price->nodeValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:37:22.130

一种丑陋的解决方案是将价格结果转换为仅保留数字：

```
echo (int) $price->nodeValue; 
```

或者，您可以查询以查找 div 内的跨度，并将其从价格中删除（在 foreach 的价格内）：

```
$span = $xpath->query('//div[@class="uah"]/span')->item(0);
$price->removeChild($span);
echo $price->nodeValue; 
```

**编辑：**

要检索链接，只需使用`getAttribute()`并获取`href`一个：

```
$model->getAttribute('href') 
```

# git - 自动将“git update-index --chmod=+x”应用于可执行文件

> ID：14267441
> 
> 赞同：75
> 
> 时间：2013-01-10T21:19:21.337
> 
> 标签：git, executable, file-permissions

我经常将 bash 脚本添加到我的 Git 存储库中，并且这些脚本在`git add`. 但是在将添加的文件推送到远程存储库并拉入另一个位置后，这些文件显示为具有不可执行的权限。似乎有两种方法可以解决这个问题：

1.  ```
    chmod u+x $script 
    git commit -am "fixing the script permissions... again..." 
    ```

2.  ```
    git update-index --chmod=+x $script 
    ```

不是每次都修复权限，有没有办法让 Git 在 期间简单地查看脚本上的文件权限`git add`，识别“嘿，这是一个可执行文件！” 并直接将其添加到具有可执行权限的存储库中？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2016-07-09T19:14:19.303

git 2.9.X/2.10（2016 年第三季度）带来`chmod`了`git add`！

请参阅[Edward Thomson (](https://github.com/ethomson) [)的](https://github.com/ethomson)[提交 4e55ed3](https://github.com/git/git/commit/4e55ed32db81d06a4f618e2cc0f9da0e223ae304)（2016 年 5 月 31 日） 。 帮助者：[Johannes Schindelin (](https://github.com/dscho) [)](https://github.com/dscho)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 c8b080a](https://github.com/git/git/commit/c8b080af7108744299e26e8d38cb6587b933f9fc))^(中，2016 年 7 月 6 日）)[`ethomson`](https://github.com/ethomson)
[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

> ## `add`：添加`--chmod=+x`/`--chmod=-x`选项
> 
> *对于设置为 false 的存储库中的路径，将不会*检测到可执行位（因此不会设置）`core.filemode`，尽管用户可能仍希望将文件添加为可执行文件以与其他具有 功能的用户兼容。 例如，添加 shell 脚本的 Windows 用户可能希望将它们添加为可执行文件，以便与非 Windows 上的用户兼容。*`core.filemode`* 
> 
>  *Although this can be done with a plumbing command (`git update-index --add --chmod=+x foo`), **teaching the `git-add` command allows users to set a file executable with a command that they're already familiar with**.*

 *You can see the origin of this new feature in "[How to create file execute mode permissions in Git on Windows?](https://stackoverflow.com/a/21694391/6309)" (Feb. 2011)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-03-28T10:53:34.120

有几种方法可以做到这一点。

1.  Git 别名
2.  Bash 别名
3.  甚至结合 bash 和 git 别名

1.  **Git 别名**

    你总是可以在你的 git 别名中使用 bash。

    *   打开你的 git 配置：

        `vim ~/.gitconfig`

    *   向其中添加别名部分（如果不存在）：

        ```
        [alias]
            addscr = !sh -c 'if [[ ${0: -3} == ".sh" ]]; then git update-index --chmod=+x $0; git add $0' 
        ```

2.  **Bash 别名**

    *   编辑您的 bash 配置文件：

        `vim ~/.bashrc`

    *   在文件末尾添加：

        ```
        function gitadd(){
            if [[ ${1: -3} == ".sh" ]]
                then git update-index --chmod=+x $1
            fi
            git add $1
         }
         alias gitadd='gitadd' 
        ```

3.  **结合 git 和 bash 别名**

    *   编辑您的 bash 配置文件：

        `vim ~/.bashrc`

    *   将此添加到文件末尾：

        ```
        function checkShellFile(){
            return ${1: -3} == ".sh"
        }
        alias gitadd='checkShellFile ? git addsrcipt "$1" : && git add "$1"' 
        ```

    *   编辑你的 git 配置文件：

        `vim ~/.gitconfig`

    *   向其中添加别名部分（如果不存在）：

        ```
        [alias]
            addscript = !sh -c 'git update-index --chmod=+x $0 && git add $0' 
        ```

**以上均未经过测试**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-11T19:13:44.057

这是一个自动应用于`git update-index --chmod+x`可执行文件的脚本：

```
for f in `find . -name '*.sh' -o -regex './s?bin/[^/]+' -o -regex './usr/sbin/[^/]+' -o -regex './usr/lib/[^/]+' `;do
 ( cd `dirname $f` && git update-index --chmod=+x  `basename $f` )
done 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-03-30T13:36:46.380

**没有花哨的 bash 脚本的解决方案**：

1.  `fileMode = true`在您的`.git/config`文件中设置（或`git config core.filemode true`按照其他人指出的那样运行）
2.  更改文件权限的可执行位并提交此更改。（`chmod u+x $script`正如你所指出的）。您只需执行一次。
3.  推送到遥控器

下次您从那里拉取时，git 将在文件上设置已提交的可执行位。我也有类似的问题，这解决了。

`fileMode = true`告诉 git 跟踪它唯一可以跟踪的权限：可执行位。这意味着对可执行位的更改将被 git 识别为工作树中的更改，并且这些更改将与您的下一次提交一起存储在 repo 中。

一旦您提交了所需的可执行位，您还可以将您重置`fileMode`为，`false`这样下次当您不想提交时，git 就不会因为此类更改而打扰您。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T05:18:56.147

我不认为这可以在`git add`命令上完成，但您可能能够在运行`git commit`命令后立即运行脚本，但在实际创建提交之前。

看一下预提交钩子。

[http://git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)

基本上只需在 .git/hooks/ 文件夹中创建一个名为 pre-commit 的文件。（你的钩子文件夹中应该已经有样本，重命名它们以删除末尾的“.sample”以激活一个。）

有一个问题。确保您的脚本`git stash -q`首先运行，以便您处理文件的实际分阶段版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-26T15:56:33.163

I just added thru' Tortoise Git folder update. Right click on all files and update the execute permission checkbox to true and commit/push with message. Git Command line add/commit should also work.*

# php - 将变量从 jquery 传递到 php

> ID：14267444
> 
> 赞同：0
> 
> 时间：2013-01-10T21:19:27.607
> 
> 标签：php, jquery, phpquery

我正在尝试将变量从 jquery 传递给 php

我的jQuery代码：

```
<script>
$(window).load(function(){
$.get("as.php",url="http://www.wired.co.uk/news/archive/2013-01/10/chinese-desert-mystery", function(data,status){
$('#lax').html(data);
});
});
</script>
<div id="lax" >
</div> 
```

而我的“as.php”文件如下：

```
<?php
include('phpQuery.php');
$file = mysqli_real_escape_string($dbc, strip_tags(trim($_GET['url'])));  
phpQuery::newDocumentFileHTML($file);
$titleElement = pq('title'); 
$title = $titleElement->html();
echo '<a href="" >' . htmlentities( $title) . '</a><br/>';

foreach(pq('meta') as $li)

  if ((pq($li)->attr('name')=='description')||(pq($li)->attr('name')=='Description')){
   echo '<p>'.pq($li)->attr('content').'</p>';
}
?> 
```

我正在尝试将 'url' 变量从 jquery 代码传递到我的“as.php”文件，但无法这样做。我一定哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:20:55.373

你需要创建一个对象

```
url="http://www.wired.co.uk/news/archive/2013-01/10/chinese-desert-mystery" 
```

应该：

```
{url :"http://www.wired.co.uk/news/archive/2013-01/10/chinese-desert-mystery"} 
```

[**jQuery 文档**](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:39:57.120

我没有看到您打开数据库连接，因此您发布的代码`$dbc`将是`NULL`.

这也会导致`mysqli_real_escape_string`返回`NULL`。

由于您没有进行任何数据库操作，因此您应该完全摆脱`mysqli_real_escape_string`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T22:05:21.723

在你的jQuery中：

```
<script>
$(window).load(function(){
$.get("as.php",
{url:"http://www.wired.co.uk/news/archive/2013-01/10/chinese-desert-mystery"}, function(data){
$('#lax').html(data);
});
});
</script> 
```

在你的 php 中尝试使用`$_REQUEST`

```
<?php
include('phpQuery.php');
$file = mysqli_real_escape_string($dbc, strip_tags(trim($_REQUEST['url'])));  
phpQuery::newDocumentFileHTML($file);
$titleElement = pq('title'); 
$title = $titleElement->html();
echo '<a href="" >' . htmlentities( $title) . '</a><br/>';

foreach(pq('meta') as $li)

  if ((pq($li)->attr('name')=='description')||(pq($li)->attr('name')=='Description')){
   echo '<p>'.pq($li)->attr('content').'</p>';
}
?> 
```

# bash - bash循环中的多个变量

> ID：14267445
> 
> 赞同：2
> 
> 时间：2013-01-10T21:19:30.310
> 
> 标签：bash, svn

我正在编写一个 shell 脚本，它可以让我了解 svn 中目录的状态，然后循环遍历它并添加或删除文件。

这个 svn 命令

```
$ svn status /myLocalDir/files 
```

返回我在本地添加或删除的文件。? = 添加，！= 已删除

```
!        /myLocalDir/files/deletedPicture.png
?        /myLocalDir/files/addedPicture.png 
```

我在我的 bash 脚本中使用了一个循环（见下文）。我需要做的是，当我遍历已添加或删除的文件/文件夹的根目录时，我需要

A. 打印出“删除”[X]或“添加”[X]

B. 根据第一个字符 (?,!) 确定是否应该删除循环中的当前文件或将当前文件添加到 svn。

我只是不确定如何解析字符串“！/myLocalDir/files/deletedPicture.png”的语法来做到这一点

```
for X in `svn status /myLocalDir/files | cut -c 8-300`
            do  
                if [ "!" ]
                    then
                        echo "Deleting " $X
                        #svn $CREDENTIALS delete $X
                    else
                        echo "Adding " $X
                        #svn $CREDENTIALS  add $X
                fi

            done 
```

我注意到的另一件事..甚至认为命令行中的 svn 状态

```
!        /myLocalDir/files/deletedPicture.png
?        /myLocalDir/files/addedPicture.png 
```

我的 bash 循环回声是这样的

```
!        
/myLocalDir/files/deletedPicture.png
?
/myLocalDir/files/addedPicture.png 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:45:42.450

`X`只会是一个字段，而不是一整行，你的代码的编写方式。试试这个：

```
while IFS= read -r status file; do
    case $status in
      \! )  echo "Deleting" ;;
      \? ) echo "Adding" ;;
      # etc.
    esac
done <( svn status /myLocalDir/files ) 
```

您可以改变模式以匹配返回的任何状态代码，并在此框架`svn status`中放置您需要的任何代码来代替s。`echo`

编辑：将 Josh 的代码添加到答案中以提供更好的格式：

```
while read -r line; do
    file="${line#????????}"        # Strip off the 7 flag columns and the separator
    status="${line%$file}"         # Get the 7 flags columns
    case "$status" in 
        '!'*) echo "Do something" ;;
        '?'*) echo "Do something else with $file";;
    esac
 done <( svn status /myLocalDir/files ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T22:31:17.567

感谢所有的投入！！但这就是我所做的......我真正需要做的就是根据一个字符串的第一个字符确定基础，该字符被删除并被添加，所以我对它进行了子串化。我用破折号替换了空格，这解决了我的 for 循环问题，然后我根据我的条件对每个空格进行了子串化

```
for X in `svn status /myLocalDir/files |tr " " "-"`
            do  
                if [ ${X:0:1} == "!" ]
                    then
                        echo "Deleting " ${X:8}
                        svn delete ${X:8}
                    elif [ ${X:0:1} == "?" ]
                        echo "Adding " ${X:8}
                        svn add ${X:8}
                fi

            done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T21:27:28.760

如果您只想检查第一个单词并将其余单词视为第二个单词，那么您可以这样做：

```
svn status /myLocalDir/files | while IFS= " " read -r line;
            do  
            read a b <<<$line

                if [ $a == "!" ]
                    then
                        echo "Deleting " "$b"
                        #svn $CREDENTIALS delete $b
                    else
                        echo "Adding " "$b"
                        #svn $CREDENTIALS  add $b
                fi
            done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T21:50:26.823

好的，你可以用更简单、更优雅（甚至可能更正确）的方式来做到这一点

*   在一个命令中添加树中的所有新文件：（`svn add --force /myLocalDir/files/*`需要--force，因为已经有版本化文件，否则会产生*警告*“...已经在版本控制下”），也许它可以在没有--force的情况下使用，但是带有 -q 用于抑制输出
*   带有用于添加|删除的管道的单行代码，没有大的 bashisms：

`svn status | awk '/\?/ {print $2}' | xargs svn add`

`svn status | awk '/\!/ {print $2}' | xargs svn rm`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T21:52:19.517

编辑：为 stat 添加了所有可能的字段。查看`svn help status`它们的含义和价值。

```
treeConflict=" "
oldIFS="$IFS"
IFS=$'\n'
for line in $(svn stat "$path")
do 
   if [[ "$treeConflict" == "C" ]]; then
       continue # skip or handle tree conflict line
   fi

   operation="${line:0:1}"
   modifications="${line:1:1}"
   lock="${line:2:1}"
   history="${line:3:1}"
   external="${line:4:1}"
   repoLock="${line:5:1}"
   treeConflict="${line:6:1}"
   file="$(echo ${line} | sed "s#^.......##")"
done
IFS="$oldIFS" 
```

# sql-server - SQL 查询在 SSMS 中有效，但在 cmd 文件中使用 osql 命令时无效

> ID：14267451
> 
> 赞同：2
> 
> 时间：2013-01-10T21:19:54.633
> 
> 标签：sql-server, sql-server-2008, cmd, ssms, osql

我无法让某个查询在 SSMS 之外工作。该查询收集所有用户定义的数据类型并创建 IF EXISTS 语句和 CREATE TYPE 命令，以便轻松传输所有用户定义的数据类型。这样做的查询如下（不是我写的，而是在[https://stackoverflow.com/a/12761027/865893](https://stackoverflow.com/a/12761027/865893)找到的）

```
SET NOCOUNT ON

SELECT 'USE ' + QUOTENAME(DB_NAME(), '[') + '
GO';

SELECT '
IF  EXISTS (SELECT * FROM sys.types st JOIN sys.schemas ss ON st.schema_id = ss.schema_id WHERE st.name = N''' + st.[name] + ''' AND ss.name = N''' + ss.[name] + ''')
    DROP TYPE ' + QUOTENAME(ss.name, '[') + '.' + QUOTENAME(st.name, '[') + '
GO

CREATE TYPE ' + QUOTENAME(ss.name, '[') + '.' + QUOTENAME(st.name, '[') + ' FROM ' + 
QUOTENAME(bs.[name], '[') + 
    CASE bs.[name]
        WHEN 'char' THEN (CASE ISNULL(st.max_length, 0) WHEN 0 THEN '' WHEN -1 THEN '(MAX)' ELSE '(' + convert(varchar(10), st.max_length) + ')' END)
        WHEN 'nchar' THEN (CASE ISNULL(st.max_length, 0) WHEN 0 THEN '' WHEN -1 THEN '(MAX)' ELSE '(' + convert(varchar(10), st.max_length/2) + ')' END)
        WHEN 'varchar' THEN (CASE ISNULL(st.max_length, 0) WHEN 0 THEN '' WHEN -1 THEN '(MAX)' ELSE '(' + convert(varchar(10), st.max_length) + ')' END)
        WHEN 'nvarchar' THEN (CASE ISNULL(st.max_length, 0) WHEN 0 THEN '' WHEN -1 THEN '(MAX)' ELSE '(' + convert(varchar(10), st.max_length/2) + ')' END)
        WHEN 'numeric' THEN (CASE ISNULL(st.[precision], 0) WHEN 0 THEN '' ELSE '(' + convert(varchar(10), st.[precision]) + ', ' + convert(varchar(10), st.[scale]) + ')' END)
        WHEN 'decimal' THEN (CASE ISNULL(st.[precision], 0) WHEN 0 THEN '' ELSE '(' + convert(varchar(10), st.[precision]) + ', ' + convert(varchar(10), st.[scale]) + ')' END)
        WHEN 'varbinary' THEN (CASE st.max_length WHEN -1 THEN '(max)' ELSE '(' + convert(varchar(10), st.max_length) + ')' END)
        ELSE ''
    END + 
'
GO
'
FROM sys.types st 
    INNER JOIN sys.schemas ss ON st.[schema_id] = ss.[schema_id]
    INNER JOIN sys.types bs ON bs.[user_type_id] = st.[system_type_id]
WHERE st.[is_user_defined] = 1 -- exclude system types
ORDER BY st.[name], ss.[name] 
```

这就像 SSMS 中的魅力一样，但我希望不必每次都进入 SSMS 并自己将其导出到文件中。当我通过批处理文件中的 osql 命令运行查询时，如下所示。

```
@echo off
cls

set /p SName=Server Name :
set /p UName=User Name :
set /p Pwd=Password :
set /p DbName=Database Name :

set /p choice=ARE YOU SURE TO EXECUTE SCRIPTS in %DbName% (y/n) ?

if '%choice%'=='y' goto begin
goto end

:begin
if exist _Deploy.txt del _Deploy.txt

@echo on

DEL addUserDefinedTypes.txt
osql -n -S %SName% -d master -U %UName% -i "getTypesSelectQuery.sql" -o addUserDefinedTypes.txt -P %Pwd%

@notepad addUserDefinedTypes.txt

:end 
```

然而，这给了我以下输出：

```
Msg 105, Level 15, State 1, Server US1524NB, Line 8
Unclosed quotation mark after the character string '
'.
Msg 102, Level 15, State 1, Server US1524NB, Line 8
Incorrect syntax near '
'.
Msg 102, Level 15, State 1, Server US1524NB, Line 2
Incorrect syntax near ' + QUOTENAME(ss.name, '.
Msg 105, Level 15, State 1, Server US1524NB, Line 14
Unclosed quotation mark after the character string '
'.
Msg 105, Level 15, State 1, Server US1524NB, Line 1
Unclosed quotation mark after the character string '
FROM sys.types st 
INNER JOIN sys.schemas ss ON st.[schema_id] = ss.[schema_id]
INNER JOIN sys.types bs ON bs.[user_type_id] = st.[system_type_id]
WHERE st.[is_user_defined] = 1 -- exclude system types
ORDER BY st.[name], ss.[name]
'. 
```

任何线索都会很棒。我环顾谷歌一段时间，不知道要改变什么/如何解决这个问题。像它所说的那样删除或关闭引号会破坏事情。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:29:57.693

您使用的是什么**版本的 SQL Server？**

从 SQL Server **2005 开始**，从命令行执行 SQL 脚本的首选方法是**`SQLCMD`**代替`osql`.

有关可用 cmd 线路开关的更多详细信息，请参阅[MSDN SQL Server 联机丛书主题。`SQLCMD`](http://msdn.microsoft.com/en-us/library/ms165702%28v=sql.105%29.aspx)

# python - 在 Python 3 中迭代单个字节

> ID：14267452
> 
> 赞同：60
> 
> 时间：2013-01-10T21:20:01.620
> 
> 标签：python, python-3.x

`bytes`当在 Python 3 中迭代一个对象时，一个人会`bytes`得到`ints`：

```
>>> [b for b in b'123']
[49, 50, 51] 
```

如何获取长度为 1 的`bytes`对象？

以下是可能的，但对读者来说不是很明显，很可能表现不佳：

```
>>> [bytes([b]) for b in b'123']
[b'1', b'2', b'3'] 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-10T21:53:00.003

如果您担心此代码的性能并且`int`作为字节不适合您的情况，那么您可能应该重新考虑您使用的数据结构，例如，改用`str`对象。

您可以对对象进行切片`bytes`以获得 1 长度的`bytes`对象：

```
L = [bytes_obj[i:i+1] for i in range(len(bytes_obj))] 
```

有PEP 0467 -提出方法[的二进制序列的次要 API 改进：](https://www.python.org/dev/peps/pep-0467/)`bytes.iterbytes()`

```
>>> list(b'123'.iterbytes())
[b'1', b'2', b'3'] 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-08-18T10:08:12.737

**int.to_bytes**

`int`对象有一个[to_bytes](https://docs.python.org/3.7/library/stdtypes.html#int.to_bytes)方法，可用于将 int 转换为其对应的字节：

```
>>> import sys
>>> [i.to_bytes(1, sys.byteorder) for i in b'123']
[b'1', b'2', b'3'] 
```

与其他一些答案一样，尚不清楚这是否比 OP 的原始解决方案更具可读性：我认为长度和字节顺序参数使它变得更加嘈杂。

**结构体解包**

另一种方法是使用[struct.unpack](https://docs.python.org/3.7/library/struct.html#struct.unpack)，尽管这也可能被认为难以阅读，除非您熟悉 struct 模块：

```
>>> import struct
>>> struct.unpack('3c', b'123')
(b'1', b'2', b'3') 
```

（正如 jfs 在评论中观察到的，格式字符串 for`struct.unpack`可以动态构造；在这种情况下，我们知道结果中的单个字节数必须等于原始字节串中的字节数，所以这`struct.unpack(str(len(bytestring)) + 'c', bytestring)`是可能的。）

**表现**

```
>>> import random, timeit
>>> bs = bytes(random.randint(0, 255) for i in range(100))

>>> # OP's solution
>>> timeit.timeit(setup="from __main__ import bs",
                  stmt="[bytes([b]) for b in bs]")
46.49886950897053

>>> # Accepted answer from jfs
>>> timeit.timeit(setup="from __main__ import bs",
                  stmt="[bs[i:i+1] for i in range(len(bs))]")
20.91463226894848

>>>  # Leon's answer
>>> timeit.timeit(setup="from __main__ import bs", 
                  stmt="list(map(bytes, zip(bs)))")
27.476876026019454

>>> # guettli's answer
>>> timeit.timeit(setup="from __main__ import iter_bytes, bs",        
                  stmt="list(iter_bytes(bs))")
24.107485140906647

>>> # user38's answer (with Leon's suggested fix)
>>> timeit.timeit(setup="from __main__ import bs", 
                  stmt="[chr(i).encode('latin-1') for i in bs]")
45.937552741961554

>>> # Using int.to_bytes
>>> timeit.timeit(setup="from __main__ import bs;from sys import byteorder", 
                  stmt="[x.to_bytes(1, byteorder) for x in bs]")
32.197659170022234

>>> # Using struct.unpack, converting the resulting tuple to list
>>> # to be fair to other methods
>>> timeit.timeit(setup="from __main__ import bs;from struct import unpack", 
                  stmt="list(unpack('100c', bs))")
1.902243083808571 
```

`struct.unpack`似乎比其他方法至少快一个数量级，大概是因为它在字节级别上运行。 `int.to_bytes`另一方面，它的性能比大多数“明显”的方法差。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-08-20T14:20:37.530

我认为比较不同方法的运行时可能很有用，所以我做了一个基准测试（使用我的库[`simple_benchmark`](https://github.com/MSeifert04/simple_benchmark)）：

[![在此处输入图像描述](../Images/fe2fdbe5f692eab06e8673a7ac79e453.png)](https://i.stack.imgur.com/Pm8kz.png)

毫无疑问，NumPy 解决方案是迄今为止处理大字节对象最快的解决方案。

但是，如果需要一个结果列表，那么 NumPy 解决方案（带有`tolist()`）和`struct`解决方案都比其他替代方案快得多。

我没有包括 guettlis 答案，因为它几乎与 jfs 解决方案相同，只是使用了生成器函数而不是理解。

```
import numpy as np
import struct
import sys

from simple_benchmark import BenchmarkBuilder
b = BenchmarkBuilder()

@b.add_function()
def jfs(bytes_obj):
    return [bytes_obj[i:i+1] for i in range(len(bytes_obj))]

@b.add_function()
def snakecharmerb_tobytes(bytes_obj):
    return [i.to_bytes(1, sys.byteorder) for i in bytes_obj]

@b.add_function()
def snakecharmerb_struct(bytes_obj):
    return struct.unpack(str(len(bytes_obj)) + 'c', bytes_obj)

@b.add_function()
def Leon(bytes_obj):
    return list(map(bytes, zip(bytes_obj)))

@b.add_function()
def rusu_ro1_format(bytes_obj):
    return [b'%c' % i for i in bytes_obj]

@b.add_function()
def rusu_ro1_numpy(bytes_obj):
    return np.frombuffer(bytes_obj, dtype='S1')

@b.add_function()
def rusu_ro1_numpy_tolist(bytes_obj):
    return np.frombuffer(bytes_obj, dtype='S1').tolist()

@b.add_function()
def User38(bytes_obj):
    return [chr(i).encode() for i in bytes_obj]

@b.add_arguments('byte object length')
def argument_provider():
    for exp in range(2, 18):
        size = 2**exp
        yield size, b'a' * size

r = b.run()
r.plot() 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-08-19T19:28:34.607

从 python 3.5 开始，您可以[对字节和字节数组使用 % 格式](https://www.python.org/dev/peps/pep-0461/)：

```
[b'%c' % i for i in b'123'] 
```

输出：

```
[b'1', b'2', b'3'] 
```

上述解决方案比您的初始方法快 2-3 倍，如果您想要更快速的解决方案，我建议使用[numpy.frombuffer](https://docs.scipy.org/doc/numpy/reference/generated/numpy.frombuffer.html)：

```
import numpy as np
np.frombuffer(b'123', dtype='S1') 
```

输出：

```
array([b'1', b'2', b'3'], 
      dtype='|S1') 
```

第二种解决方案比 struct.unpack 快约 10%（我使用了与 @snakecharmerb 相同的性能测试，针对 100 个随机字节）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-08-14T20:34:45.183

的三重奏`map()`，`bytes()`并且`zip()`成功了：

```
>>> list(map(bytes, zip(b'123')))
[b'1', b'2', b'3'] 
```

但是我不认为它比它更具可读性`[bytes([b]) for b in b'123']`或性能更好。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-08-14T10:46:07.533

我使用这个辅助方法：

```
def iter_bytes(my_bytes):
    for i in range(len(my_bytes)):
        yield my_bytes[i:i+1] 
```

适用于 Python2 和 Python3。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-18T00:22:35.253

一个简短的方法来做到这一点：

```
[bytes([i]) for i in b'123\xaa\xbb\xcc\xff'] 
```

# firefox - Firefox 18 打破 mootools 1.2.5 选择器引擎

> ID：14267457
> 
> 赞同：6
> 
> 时间：2013-01-10T21:20:32.020
> 
> 标签：firefox, mootools

在这里工作的 jsfiddle 示例：http: [//jsfiddle.net/CfJyd/](http://jsfiddle.net/CfJyd/)

这个问题只发生在我知道的 Firefox 18 中。

以下html：

```
<div class="test">Test Div</div>
<div class="testIgnore">This should stay the same</div> 
```

有了这个js：

```
window.addEvent('domready',function() {
    $$('.test').set('html','Only Test should update');
}); 
```

输出结果：

```
Only Test should update
Only Test should update 
```

由于许多使用 1.2.5 的插件，目前无法选择升级到 Mootools 1.4.5，任何人都可以为我指出正确的修复方向吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T06:09:44.820

我在这里找到了答案：[https ://groups.google.com/forum/#!msg/mootools-users/W7MHwTFHYQ4/B4HcR951XQYJ](https://groups.google.com/forum/#!msg/mootools-users/W7MHwTFHYQ4/B4HcR951XQYJ)

在 javascript 中的任意位置添加以下代码 - 我在 mootools 上方添加了它，它运行良好：

```
String.prototype.contains = function(string, separator){
    return (separator) ? (separator + this + separator).indexOf(separator + string + separator) > -1 : String(this).indexOf(string) > -1;
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T22:37:27.297

已知的错误。如果我没记错的话，这与 Gecko 中*提议*的ES 和谐的早期引入有关`String.prototype.contains`，它与 1.2.5 中的第二参数不同

`delete Sting.prototype.contains`一个快速的解决方法是在加载 MooTools 之前说做，以便它重新定义它。从 1.3 开始，这已不再是受保护的原型方法，并且已正确重新定义。我认为大约 6 个月前，其中一个 FireFox 人员可能在回购中提出了一个错误，因为它即将登陆 FF 17...

看到这个：[https ://bugzilla.mozilla.org/show_bug.cgi?id=789036#c23](https://bugzilla.mozilla.org/show_bug.cgi?id=789036#c23)

甚至 Brendan Eich 也对此发表了评论，并暗示它可能会在 18.0.1 中被禁用，因为它被过早地采用了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T19:53:20.157

有关此的更多背景信息：[MooTools 1.2.x 通过添加 String.prototype.contains 被破坏](https://bugzilla.mozilla.org/show_bug.cgi?id=789036)

解决方案是使用其他评论中的解决方法或升级到 MooTools 1.3 或 1.4

# google-chrome - Google Chrome 客户端证书弹出窗口

> ID：14267459
> 
> 赞同：15
> 
> 时间：2013-01-10T21:20:44.770
> 
> 标签：google-chrome, certificate, client-certificates, certificate-store

我正在为我的客户实施相互身份验证，以解决不必不断地将一些具有动态 ip 的代理列入白名单的问题。该过程在我在 Windows 环境（Windows 7）中尝试过的所有浏览器中都能正常工作。

问题是每次用户访问该站点时都会弹出一个窗口。在大多数浏览器上，这是一次性的，当您第一次访问该网站时。但是，在 Google Chrome 上，弹出窗口似乎出现在每个 POST/GET 请求上。我找到了如何通过以下链接禁用 IE 和 FF 的弹出窗口：http: [//docs.threerings.org.uk/wiki/Certificates_without_prompting](http://docs.threerings.org.uk/wiki/Certificates_without_prompting)，但 Chrome 仍然存在问题。

我尝试将证书安装到受信任的根证书颁发机构，但我收到一条错误消息，“导入失败，因为存储是只读的，存储已满，或者存储未正确打开。”。

如果有人知道我可以做些什么来绕过 Chrome 的弹出窗口，我们将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T12:31:13.810

这就是您要查找的内容：http: [//www.chromium.org/administrators/policy-list-3#AutoSelectCertificateForUrls](http://www.chromium.org/administrators/policy-list-3#AutoSelectCertificateForUrls)

我可以告诉你如何准确地做到这一点，但我的诚实意见是，这是你必须自己解决的问题。您需要知道发生了什么，因为您很可能会遇到错误（不是错误*本身*，而是一些不希望或不需要的结果）。

我不得不承认，谷歌 Chrome 和 Chromium 是很棒的浏览器，但是在客户端证书方面，它们还有很多需要改进的地方。

# r - 如何在R中创建一个连续年份的连续天数作为x轴的图？

> ID：14267463
> 
> 赞同：0
> 
> 时间：2013-01-10T21:20:54.583
> 
> 标签：r, days

我正在尝试绘制连续两年的温度数据（比如 2010 年 11 月 5 日至 2011 年 3 月 30 日），其中的天数为 x 轴值。例如：

```
temp<-c(30.1:40.1) # y axis
doy<-c(360:365,1:5) # x axis 
```

请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:36:20.797

```
temp<-c(30.1:40.1) # y axis
doy<-c(360:365,1:5) # x axis

doy2 <- c(360:365,c(1:5)+365)

plot(temp ~ doy2, xaxt="n", xlab = "doy")
axis(1,doy,at=doy2) 
```

或者：

解决这个问题的最严格方法是使用 R 中的日期时间对象。然后 R 会将“临时”数据识别为日期，因此在绘制时会给出正确的结果。日期时间对象很复杂，但如果你经常处理它们，它们是值得学习的：

```
temp<-c(30.1:40.1) # y axis
doy<-c(360:365,1:5) # x axis

doy2 <- c(360:365,c(1:5)+365)  #we sill need this to place numbers 1:5 into a new year (i.e. 365 days later)

doy.date <- as.Date("2011-01-01")   #Set a base date (choose the year that you will start with

doy.date <- doy.date + doy2 - 1  #add the days of year to the base date and subtract one (the base date was January 1st)

plot(temp ~ doy.date, xlab = "doy")    #plot as usual

#see documentation on dates
?date

#or for date with times:
?POSIXct 
```

# linux - 完全禁用 Raspbian 中的 Alt 键

> ID：14267465
> 
> 赞同：4
> 
> 时间：2013-01-10T21:21:07.903
> 
> 标签：linux, raspberry-pi

我希望将树莓派开发成能够运行免费使用的公共网络终端的东西，该终端将被锁定到某个域。这是给我的雇主，一个乡镇，他想在乡镇周围设置终端，以便我们社区中不幸的人能够联系和互动乡镇提供的各种服务，而无需找到行政部门的方法中央。

我已经能够得到我想要的大部分工作，但我想禁用`Alt`键盘上的键。这将阻止用户`Ctrl`++或`Alt`+退出浏览器环境，以及智能用户可以用来破坏我的信息亭的 LXDE 的各种其他功能（如虚拟终端）。我以为我已经找到了使用 xmodmap 执行此操作的方法，但是当我运行此命令时`Del``Alt``F4`

```
xmodmap -e "keycode 204 = " 
```

据我所知，应该将所有映射的正确`Alt`键设置为空，仍然让我`Alt`+`F4`铬和其他东西。

我还尝试编辑`~/.config/openbox/lxde-rc.xml`并更改其中的键盘绑定。我可以通过它禁用`Ctrl`++ ，但是当我更改或删除其中的其他键绑定时，什么也没有发生。所以我试图找出我必须禁用此应用程序上的密钥的其他选项。有任何想法吗？`Alt``Del``Alt`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:34:35.477

Soo, I actually just answered my own question. Fixing the problem indeed lies in the `~/.config/openbox/lxde-rc.xml` file, but I was not doing it right. To set the Ctrl Alt Delete option, you need to change the value between `<command></command>` to `false` (or a program that pops up a finger wag to the user).

The problem was, only four or so of the keys entries have a `<command>` field to them, and all of the other use an `<action="whatever"></action>` field to define the action that is being performed by the key. I was changing the value of "whatever" to false and was under the impression that would have the same effect as changing the command field.

But really, what you need to do is change the value of "whatever" to "Execute", and then nest a set of `<command></command>` with a value set to false and it will set the key's mapping to false. I guess there must be a set of default values that are used to override improper changes to the lxde-rc.xml files, and that's why things kept working after removing the entries.

# jquery - 100% 使用 jQuery 的 div 高度

> ID：14267468
> 
> 赞同：0
> 
> 时间：2013-01-10T21:21:12.397
> 
> 标签：jquery, html, height, css

我在将我的 Div 设置为窗口的 100% 时遇到了一些问题，希望能得到一些帮助来解决这个问题。

这是缩写的html...

```
<div id="full-slider-wrapper">
  <div id="full-slider">
    <div class="slide-panel active">
       CONTENT
    </div>
  </div>
</div> 
```

这是相关的CSS：

```
/*SLIDER
===================================
*/

#full-slider-wrapper {
    overflow: hidden;
}

#full-slider {
    position: relative;
    width: auto;
    min-height: 1250px;
    margin: 0 auto;
}

#full-slider .slide-panel {
    position: absolute;
    top: 0;
    left: 0;
    width: auto;
    visibility: hidden;
}

#full-slider .slide-panel.active {
    visibility: visible;
     } 
```

我一直在使用 min-height: 1250px; 作为一种解决方法，但我使用的是 SKELETON 主题，当我调整窗口大小时，内容会缩小，并且在内容和页脚之间留下大量空白空间。

我知道有很多类似的问题被问到，但我似乎无法得到任何解决方案。似乎我最好的选择是使用一些 jQuery，如下所示：

```
$(function() {
    $(window).resize(function() {
        $('div:full-slider').height($(window).height() - $('div:full-slider').offset().top);
    });
    $(window).resize();
}); 
```

不幸的是，我对 jQuery 不是很精通，每当我尝试实现上述或类似的东西时，我的内容就会消失。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:24:30.167

除非所有父母（祖先）都定义了高度，否则百分比高度将不起作用，因此添加：

```
html, body, #full-slider-wrapper, #full-slider { height:100%; } 
```

如果有的话，还添加`height:100%`到所有其他祖先`#full-slider-wrapper`。

当然，如果您有页脚，则必须平衡高度以为页脚腾出空间，例如`#full-slider-wrapper { height:90%; }`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T21:59:23.407

像这样的情况非常适合使所有位置都成为绝对位置，但要命名所有四个位置。例子：

```
#full-slider {
    position:absolute;
    top:0;
    left:0;
    right:0;
    bottom:0;
} 
```

这个特定的将强制 $full-slider 到其父项的边缘，但逻辑适用于所有内容。想要 50px 的页脚高度？做底部：50px。根据需要进行更改。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-10T22:36:33.397

尝试这个：

```
$('element').css('height','100vh'); 
```

或这个：

```
.element_class{
   height:100vh;
} 
```

# sql - Oracle：通过视图控制对数据的访问？

> ID：14267470
> 
> 赞同：0
> 
> 时间：2013-01-10T21:21:15.740
> 
> 标签：sql, oracle, view

我在控制对数据库中数据的访问时遇到问题。这些数据是我公司的价格数据和从数据提供商处购买的价格数据的混合体，由于它们按可以访问其数据的用户收费，因此我需要能够限制对数据的访问。

我有一个包含所有价格数据的方案“DATA”。我正在考虑有 2 个额外的方案（例如：LIM_ACCESS 和 FULL_ACCESS）以及基于 DATA 方案构建的 VIEWS。例子：

```
CREATE VIEW LIM_ACCESS.V_PRICES AS<br>
SELECT [] FROM DATA.PRICES<br>
WHERE SOURCE = [MyCompany]

CREATE VIEW FULL_ACCESS.V_PRICES AS<br>
SELECT [] FROM DATA.PRICES 
```

但是根据我的经验，LIM_ACCESS- 和 FULL_ACCESS-schemes 必须在 DATA 表上具有 select-privelige 才能创建视图，然后我回到第 1 格。

作为数据库的新手，我觉得必须有一个相对简单的解决方案，所以任何建议或提示（如果这个问题之前已经被问过和回答过）都会受到赞赏:-)

亲切的问候，
斯文德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:01:59.843

您可以将所有视图放在 DATA 模式中。然后`GRANT SELECT`根据需要将它们添加到其他模式，最好是通过 Woot4Moo 建议的数据库角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:23:13.673

视图的使用不会阻止一部分用户访问数据。您需要做的是实现行级安全性。

另一种方法是使用某种形式的基于角色的权限，它只允许您想要访问“付费”信息的特定用户组。这可以相当简单地完成，示例如下。

```
create user foo  
identified by password; 
```

--没有权限

```
create role paid_data; 
```

--在此处为`paid_data`角色授予权限

```
grant paid_data to foo 
```

用户`foo`现在将拥有该`paid_data`角色所拥有的权限。使用这样的角色的优点是您可以快速撤消该组中每个人的访问权限/添加更多访问权限，因为他们需要合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:55:06.160

另一种方法是使用 Oracle[行级安全](http://docs.oracle.com/cd/E11882_01/server.112/e10575/tdpsg_securing_data.htm#TDPSG30035)性，也称为 Oracle 标签安全性。我用它来极大地简化我的应用程序设计，同时确保用户只能看到他们被允许看到的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T08:07:37.693

As GriffeyDog suggested, this is the best way to do it. First create two views in your schema and then grant select on those views to the two users.

```
CREATE VIEW LIM_ACCESS_V_PRICES AS<br>
SELECT [] FROM DATA.PRICES<br>
WHERE SOURCE = [MyCompany];

GRANT SELECT ON LIM_ACCESS_V_PRICES TO LIM_ACCESS;

CREATE VIEW FULL_ACCESS_V_PRICES AS<br>
SELECT [] FROM DATA.PRICES;

GRANT SELECT ON FULL_ACCESS_V_PRICES TO FULL_ACCESS; 
```

# database - DB 行长度/复杂性与行数：前者有理由吗？

> ID：14267471
> 
> 赞同：1
> 
> 时间：2013-01-10T21:21:17.927
> 
> 标签：database, database-normalization

我们有一个数据库表，我将其称为 TIMES。它传统上看起来像这样：

```
ID    Blah1 Blah2 Blah3  Description
1     a     b     c      Day
2     d     e     f      Night 
```

（我添加了 Blah 列主要是为了表明表中存在更多列，但与我们尝试进行的升级没有直接关系。）

我们想为从 db 获得的结果添加一些语言支持。所以我的建议是：

a) 走懒惰的路，只为语言添加一个新列，给我们

```
ID    Blah1 Blah2 Blah3  Description  Language
1     a     b     c      Day          English
2     d     e     f      Night        English
1     a     b     c      Tag          German
2     d     e     f      Nacht        German 
```

或者，最好是 b) 进行一些规范化并创建一个仅包含相关值的新表：

```
ID      Description  Language
1       Day          English
2       Night        English
1       Tag          German
2       Nacht        German 
```

我们的数据库人员说，好吧，我们可以只使用原始表并将所有内容都包含在 xml 中……这样我们就可以节省行数。

```
ID        Blah1 Blah2 Blah3  Language
1         a     b     c      <TimeDescriptions>
                                 <TimeDescription language='English'>
                                     Day
                                 </TimeDesciption>
                                 <TimeDescription language='German'>
                                     Tag
                                 </TimeDesciption>
                             </TimeDescriptions>        
2         d     e     f      <TimeDescriptions>
                                 <TimeDescription language='English'>
                                     Night
                                 </TimeDesciption>
                                 <TimeDescription language='German'>
                                     Nacht
                                 </TimeDesciption>
                             </TimeDescriptions> 
```

“节省行数”？我不是一个真正的数据库人，但这对我来说听起来很奇怪。当然，它会节省一些行......但是当行本身更长时，这是一个整体的胜利吗？（很有可能）除此之外，它似乎打破了我习惯的规范化规则。我也知道可以在 SQL 中使用 XML 并对其进行搜索（尽管我没有这样做，并且对细节非常模糊），但我只是看不到这样做的胜利。

当我问起这件事时，他开始变得棘手，所以我退缩了，但我仍然想知道我是否遗漏了什么。显然很多细节都丢失了，但我不是在寻找详细的分析......我只是想知道这是否合理。

编辑：啊。你会认为我在这里待的时间足够长，已经学会了正确的格式，但我把最后一点搞砸了……我会尝试修复它，但欢迎进行其他编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:19:04.870

> 当然，它会节省一些行......但是当行本身更长时，这是一个整体的胜利吗？

可能。但这意味着页面中的行数更少，这通常意味着更多的磁盘访问和更多的磁盘 I/O。这些行现在*看起来*还不错，但是如果您支持十几种语言，那么仅针对 XML 数据，您可能会看到每行 1Kb。我粗略计算的经验法则是每页使用 8Kb（有时可以调整，具体取决于您的 dbms），因此每页只有 8 行。

此外，这意味着使用 like 子句查询行`WHERE Description = 'Day'`要困难得多。（不过，这在您的应用程序中可能无关紧要。）此外，使用现有结构，如果需要，您可以在“语言”上对表进行分区。

向原始表添加新列*似乎*会引入多值依赖关系，这将违反 4NF。(Language->>Description) 但是如果你可以将它建模为一个复合属性，你就可以消除这种依赖关系。

**复合属性**：复合属性是具有内部结构的属性，dbms a) 完全忽略或 b) 提供函数和运算符，以便用户可以操作片段。最常见的示例是“日期”类型的列。日期具有内部结构——年、月、日。它们具有内部多值依赖关系。但是 dbms 提供了函数和运算符，以便在您需要时获取它们。

*您的 dbms 可能会使用Compound*、*composite*、*user-defined*、*type*、*column*和*attribute*等词的某种组合来描述此功能。

如果您的 dbms 支持用户定义的类型，您可能能够为特定于语言环境的单词创建一个类型，并在表中使用它。

但无论如何，这不应该是一个意见问题。您应该能够在一个下午或一天内测试带有代理键的 5NF 方法、不带代理键的 5NF、带有复合类型或用户定义类型的 5NF 以及 XML。然后再花一个下午确保您的索引和查询做得很好，这样性能差异不仅仅是由于错误、匆忙或无知造成的。

最后，权衡最佳表现者与维护成本。（并用这些新获得的技能更新你的简历。）

# google-app-engine - GAE - 下载实体样本

> ID：14267474
> 
> 赞同：1
> 
> 时间：2013-01-10T21:21:33.793
> 
> 标签：google-app-engine, google-cloud-datastore

我的生产应用程序中有 23GB 的实体。我只想将其中的一小部分下载到我的开发应用程序中进行调试。

我已阅读[https://developers.google.com/appengine/docs/python/tools/uploadingdata](https://developers.google.com/appengine/docs/python/tools/uploadingdata)。它解释了如何下载和上传所有数据，而不仅仅是数据样本。我正在寻找的是“要下载的实体实例数量”配置选项，但我看不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:38:37.420

我相信批量下载会做很多小批量的实体；你可以在整个过程中停止它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:54:23.480

如果您的需求只是少数几个实体，并且您知道哪些实体或对其有查询，您可以编写一个快速的 Web 处理程序来查询数据，并将字节流回以用作简单的文件下载。

从中长期来看，这可能最终成为一个有用的实用程序，可以在您需要数据进行调试时调用。

# database - 以编程方式在 TDBLookupComboBox 中选择记录

> ID：14267478
> 
> 赞同：0
> 
> 时间：2013-01-10T21:22:05.983
> 
> 标签：database, combobox, c++builder

我正在使用几个 ADOQuery 在数据库中插入记录，其中一个与 DBLookupComboBox 相关联。我希望用户能够插入一条记录，将 DBLookupComboBox 留空，并以编程方式在该组合框中为他们选择一个值。我相当确定这很简单，我只是找不到执行此操作所需的确切代码。

我希望我可以翻阅填充组合框的 ADOQuery 中的记录并将其设置在我正在寻找的记录上，但是当代码执行 Post 时，它会引发一个关于无法输入 null 的异常值到表中（如，组合框仍然没有发送任何内容，而不是新值）

有谁知道我需要改变什么才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:02:08.323

答案比我想象的还要简单。

```
ADOQueryToUpdate->FieldByName("Column_Name")->AsInteger = ADOQueryFillingList->FieldByName("Column_Name")->AsInteger; 
```

早些时候我试图投射和使用 FieldByName()->Value （这是一个变种），这不起作用。只需使用 AsInteger，它就会按照您的预期更新 ComboBox。

遗憾的是，我希望对 C++ Builder 有更大的支持兴趣。

# android - Android：以编程方式打开“最近的应用程序”对话框

> ID：14267482
> 
> 赞同：13
> 
> 时间：2013-01-10T21:22:25.860
> 
> 标签：android

我希望能够从我的应用程序中打开“最近使用的应用程序”对话框。这是通过长按主页按钮打开的对话框。我正在为 Android 4.1 或更早版本编程。我通过实现自定义 AccessibilityService 并调用 AccessibilityService.performGlobalAction(GLOBAL_ACTION_RECENTS) 找到了一种方法，但这需要在手机上启用可访问性，这不是很理想。有没有其他方法可以从应用程序打开此对话框？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-12T06:47:31.250

**此代码不适用于 Nougat 或更高版本**

可以触发最近的应用程序活动。

StatusBarManagerService 实现了一个可以通过反射使用的公共方法。

您可以使用以下代码：

```
Class serviceManagerClass = Class.forName("android.os.ServiceManager");
Method getService = serviceManagerClass.getMethod("getService", String.class);
IBinder retbinder = (IBinder) getService.invoke(serviceManagerClass, "statusbar");
Class statusBarClass = Class.forName(retbinder.getInterfaceDescriptor());
Object statusBarObject = statusBarClass.getClasses()[0].getMethod("asInterface", IBinder.class).invoke(null, new Object[] { retbinder });
Method clearAll = statusBarClass.getMethod("toggleRecentApps");
clearAll.setAccessible(true);
clearAll.invoke(statusBarObject); 
```

玩得开心

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T10:17:28.997

您无法访问它。但是，自己动手并不难。[getRecentTasks()](http://developer.android.com/reference/android/app/ActivityManager.html#getRecentTasks%28int,%20int%29)方法返回最近运行的应用程序列表。只需获取列表并向其中添加您自己的 UI。

这样做的一个好处是默认的，至少在旧版本的 Android 上，只显示大约 8 个应用程序。如果您自己滚动，可以显示任意数量的内容。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-01T17:25:45.080

这可以使用**TOGGLE_RECENTS** Intent 来完成。

```
Intent intent = new Intent ("com.android.systemui.recent.action.TOGGLE_RECENTS");
intent.setComponent (new ComponentName ("com.android.systemui", "com.android.systemui.recent.RecentsActivity"));
startActivity (intent); 
```

> **注意**包将根据 API 级别进行更改。[**看这里。**](https://stackoverflow.com/a/42773533/3496570)

```
Android 4.1: "com.android.internal.policy.impl.RecentApplicationsDialog"
Android 4.2 - 4.4: "com.android.systemui.recent.RecentsActivity"
Android 5.0 - 7.1: "com.android.systemui.recents.RecentsActivity" ("s" letter was added) 
```

# java - Java - 解析此示例数据的最佳方式

> ID：14267486
> 
> 赞同：1
> 
> 时间：2013-01-10T21:22:38.927
> 
> 标签：java, string, string-matching

我有这种形式的样本数据：

```
{
 ID:2
 Type:None
 Reference1:6369-545.1
 Reference2:6369-545.2
 Name:"John Smith Abbott"
 Extra:""
},
{
 ID:3
 Type:None
 Reference1:7854-568.1
 Reference2:6369-545.2
 Name:"Dave St. Ledger"
 Extra:""
},
{
 ID:4
 Type:None
 Reference1:8765-177.1
 Reference2:6369-545.2
 Name:"Martha Stone"
 Extra:""
},
{
 ID:6
 Type:None
 Reference1:9856-487.1
 Reference2:6369-545.2
 Name:"Peter O'Neill"
 Extra:""
}, 
```

还有很多记录，但我只放了一个小样本，并更改​​了一些名称。

在我看来，这是非常糟糕的格式。它与 java 中的 JSON 解析器不兼容，因为这些字段没有被双引号括起来，而且我无法进行大量查找/替换。此外，每条记录的结尾没有用逗号分隔，所以虽然我可以将每条记录放入 a`String[]`中，但我无法将它们进一步分开。看这里：

```
ID:2 Type:None Reference1:6369-545.1 Reference2:6369-545.2 Name:"John Smith Abbott" Extra:""} 
```

通常我会`split()`用空格，但由于人名中有空格，所以不能这样做。

我做了一个大规模的查找/替换`},`来替换，`};`就像我上面说的那样，我能够分离出每条记录，但随后就无法再进一步了。我想我可能需要对这些数据进行更多的查找/替换操作以使其可用。理想情况下，我希望能够`comma`在每行数据的末尾添加一个，而不是在现有的`},`和`{`行中添加一个。

最终目标是将这些数据插入到数据库中。它的原始文本及其格式。我无法更改源以重新格式化它，但我可以对这些数据做任何我想做的事情，因为它在一个大文本文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:29:08.723

这并不难：

只需逐行读取文件：

如果您读取“{”，则调用 readObject() 方法，该方法将读取到下一个（包括）“}”。

在此 readObject 中：
您逐行阅读，并使用`String.split()`分隔符“：”；这样第一个存储在可变键中，值存储在 val 中。

```
String lineSplitted = line.split(":");
String key = lineSplitted[0];
String value = lineSplitted[1]; 
```

现在要么通过将键与所有可能性进行比较来找到要设置的成员，要么使用反射来获取名为“键”的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:30:06.543

您可以使用 Matcher 类来分隔单个记录，然后会很容易，您可以使用 ':" 来拆分数据

# makefile - Makefiles：仅订购先决条件和 $^

> ID：14267489
> 
> 赞同：1
> 
> 时间：2013-01-10T21:22:50.337
> 
> 标签：makefile, gnu-make

我在makefile中有以下内容：

```
.PHONY: preq_test a b c d

a b c d:
    @echo building $@

preq_test : a b | c d
    @echo preq prequisites are: $^; 
```

现在，`$^`应该根据文档列出所有先决条件（除了重复项）：

```
$^
$+
    The names of all the prerequisites, with spaces between them. For prerequisites
    which are archive members, only the named member is used (see Archives). The value
    of $^ omits duplicate prerequisites, while $+ retains them and preserves their
    order. 
```

但仅订购的先决条件未出现在`$^`：

```
building a
building b
building c
building d
preq prequisites are: a b 
```

我可以依赖当前的行为，还是应该以其他方式工作，或者这应该被视为未定义的行为？

谢谢，

约翰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T21:31:42.677

`$^`的[记录行为](http://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html#index-_005e-_0028automatic-variable_0029)是省略仅订购的先决条件，因此您可以依赖它（您[可以使用](http://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html#index-_007c-_0028automatic-variable_0029) `$|`它来获取*仅*订购的先决条件，顺便说一句）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:58:16.797

是的，正如 Anton 所说`$^`，不会列出仅订单的先决条件，以便在`|`您必须使用`$|`.

检查下面的makefile代码，

> A B C D：
> 
> ```
>  @echo building $@ 
> ```
> 
> preq_test : ab | 光盘
> 
> ```
>  @echo preq prequisites are: $^ $|; 
> ```

欲了解更多信息：

`$^` 所有先决条件的名称，它们之间有空格。对于存档成员的先决条件，仅使用命名成员（请参阅存档）。目标对其依赖的每个其他文件只有一个先决条件，无论每个文件被列为先决条件多少次。因此，如果您为某个目标多次列出先决条件，则 $^ 的值仅包含该名称的一个副本。`This list does not contain any of the order-only prerequisites; for those use` $| `variable.`

`$+` 这类似于`$^`，但不止一次列出的先决条件按照它们在 makefile 中列出的顺序重复。这主要用于链接命令，其中以特定顺序重复库文件名是有意义的。

`$|` `The names of all the order-only prerequisites, with spaces between them.`

# ruby-on-rails - 轨道、载波、多个图像

> ID：14267494
> 
> 赞同：1
> 
> 时间：2013-01-10T21:22:57.583
> 
> 标签：ruby-on-rails, carrierwave, nested-forms

我正在开发我的第一个 Rails 应用程序，并尝试在一个表单中设置多个图像上传。我创建了一个有很多参赛作品的比赛，参赛作品可以有很多图像。我有参赛作品，但我无法让表格的图片上传部分正常工作。我正在关注链接到载波 wiki 的本教程[http://lucapette.com/rails/multiple-files-upload-with-carrierwave-and-nested_form/ 。](http://lucapette.com/rails/multiple-files-upload-with-carrierwave-and-nested_form/)

参赛作品模型

```
class ContestEntry < ActiveRecord::Base
  attr_accessible :body, :title, :contest_id, :entry_images_attributes
  validates :user_id, presence: true
  validates :title, presence: true, length: { maximum: 140 }
  validates :body, presence: true
  validates :contest_id, presence: true

  belongs_to :contest
  belongs_to :user

  has_many :entry_images, as: :imageable

  accepts_nested_attributes_for :entry_images
end 
```

入口形象模型

```
class EntryImage < ActiveRecord::Base
  attr_accessible :alt, :image_path

  belongs_to :imageable, :polymorphic => true

  validates :image_path, presence: true

  mount_uploader :image, ImageUploader
end 
```

新的报名表

```
<%= nested_form_for([:contest, @entry], :html => {:multipart => true}) do |f| %>
    <%= render 'shared/error_messages', object: f.object %>
    <%= f.hidden_field :contest_id %>
    <p>
        <%= f.label :title %><br />
        <%= f.text_field :title %>
    </p>

    <p>
        <%= f.label :body %><br>
        <%= f.text_area :body %>
    </p>

    <%= f.fields_for :entry_images do |builder|  %>
        <p>
        <%= builder.label :alt %><br />
        <%= builder.text_field :alt %>
        </p>
        <p>
        <%= builder.label :image_path %><br />
        <%= builder.file_field :image_path %>
        </p>

    <% end %>
    <p><%= f.link_to_add "Add Image", :entry_images %></p>

    <%= f.submit "Enter", class: "btn btn-large btn-primary" %>
<% end %>
<%= javascript_include_tag :defaults,"nested_form" %> 
```

出于某种原因，<%= f.fields_for :entry_images do |builder| 中没有显示任何内容 %> 块。它只是空白，也没有错误消息。如果我将它切换到 <%= f.fields_for :entry_image do |builder| %> 并切换到使用 form_for 而不是 nested_form_for 插件，所有字段都会显示，但是在提交时出现错误。

有任何想法吗？

谢谢，科里

# html - 如何设置html元素的侧面？

> ID：14267497
> 
> 赞同：1
> 
> 时间：2013-01-10T21:23:08.393
> 
> 标签：html, css

我有这个网站的一部分，我想要看起来像这样的 H3...

------------------- 居中文本 -------------------

其中“---”部分是花哨的摇摆背景图像。左边和右边是彼此的反映。

所以一种选择是...

```
<h3>
    <div class="left-image-thing"></div>
    <span>Centered Text Here</span>
    <div class="right-image-thing"></div>
</h3> 
```

...并将图像放在跨度周围的 div 中。但我只想拥有...

```
<h3>Centered Text Here</h3> 
```

...并且只需将 css 用于左右背景图像。有没有办法做到这一点？只有一个标签，CSS等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:27:47.153

您可以使用[伪元素](https://developer.mozilla.org/en-US/docs/CSS/Pseudo-elements)，`:before`并且`:after`：

```
h3 {
   text-align: center;
}

h3:before { 
    content: url('myimageurl1.png');
}

h3:after { 
    content: url('myimageurl2.png');
} 
```

当然，您的 CSS 会更复杂，但这是处理用例的一种方式。

**编辑**：这是[一个例子](http://jsfiddle.net/edelman/gYX25/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:20:01.530

伪元素吓到我了，因为我们需要支持低端浏览器......这将适用于任何地方（甚至是低端）：

CSS：

```
h3 {
   background: url('myimageurl1.png') no-repeat left middle;
   padding-left: 100px /*This should be the width of myimageurl1.png */
}

h3 span {
   background: url('myimageurl2.png') no-repeat right middle;
   padding-right: 100px /*This should be the width of myimageurl2.png */
} 
```

HTML：

```
<h3><span>Centered Text Here</span></h3> 
```

# php - PHP 不喜欢 echo " ";

> ID：14267498
> 
> 赞同：0
> 
> 时间：2013-01-10T21:23:09.133
> 
> 标签：php

这有什么问题？

```
<div id="container">

        <div id="container_middle">

            <?php

                echo "<div>";

                    echo 'simple';

                echo "</div>";

            ?>

        </div>
    </div> 
```

注意标记：

![在此处输入图像描述](../Images/c88edcd513e00585116e24271ac011eb.png)

如果我用例如一个段落替换 div，它可以正常工作：

![在此处输入图像描述](../Images/d65eb83d624fa25f37bbb475751bc79f.png)

它适用于除 div 之外的所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:27:00.577

PHP 可以很好地处理这个问题，你的编辑器不喜欢 PHP 回显`<div>`.

但是，最好避免在 PHP 中回显 HTML，而是执行以下操作：

```
<div id="container">
    <div id="container_middle">
        <div><?php echo 'simple' ?></div>
    </div>
</div> 
```

# mouseevent - 在打印布局中选择单元格

> ID：14267500
> 
> 赞同：0
> 
> 时间：2013-01-10T21:23:15.870
> 
> 标签：mouseevent, reportviewer, reporting-services

我想在`Print Layout Mode`我的报告中，通过单击`cell`Table 中的 a *`(Tablix)`*，该更改的边框颜色`cell`，然后单击 another `cell`，它的`border color`更改和另一个的边框变回。

实际上我想换句话说显示选定的项目。我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:36:29.960

哦，这有点棘手，但有效。

您可以使用每个单元格的操作选项来调用相同的报告。

在特定单元格中，右键单击 > 文本框属性 > 操作。从这里您有 2 个选项： 1\. 调用相同的报告并使用参数传递 HEX 颜色代码。2.调用已定义相关颜色的报告副本。

希望对你有帮助...

# f# - 扩展 websharper 以支持十进制数据类型是否可能和可行？

> ID：14267504
> 
> 赞同：4
> 
> 时间：2013-01-10T21:23:23.753
> 
> 标签：f#, decimal, websharper

我正在寻找一个可以为客户端生成 Javascript 的框架，并且我愿意学习更多的 F# 来做到这一点。

在 Javascript 中必须有一个十进制完全兼容的数据类型可以做到吗？是否有任何扩展 Websharper 的指南？

我注意到在 websharper 网站上没有论坛链接，而 websharper 谷歌组有 2011 年的最新帖子。

该项目是否仍然活跃、维护和开发？

# ruby - 不断得到@controller 是零错误

> ID：14267506
> 
> 赞同：3
> 
> 时间：2013-01-10T21:23:33.623
> 
> 标签：ruby, ruby-on-rails-3

作为 Rubyonrails 教程的一部分，我在尝试运行 Rspec 测试时不断收到此错误

失败：

1) GET 'about' 应该是成功的

```
 Failure/Error: get 'about'
 RuntimeError:
   @controller is nil: make sure you set it in your test's setup method.
 # ./spec/controllers/pages_controller_spec.rb:27:in `block (2 levels) in <top (required)>' 
```

我已尽我所能尝试纠正它，但一切都证明是徒劳的。任何帮助将不胜感激。

**这是我的 spec_helper.rb 文件**

```
require 'rubygems'
require 'spork'

Spork.prefork do
end
Spork.each_run do
end

ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'

Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
config.include RSpec::Rails::ControllerExampleGroup
config.mock_with :rspec
config.fixture_path = "#{::Rails.root}/spec/fixtures"
config.use_transactional_fixtures = true
end 
```

**pages_controller.rb 文件：**

```
class PagesController < ApplicationController
 def home
 end

 def contact
 end

 def about
 end
 end 
```

**pages_controller_spec.rb 文件：**

```
require 'spec_helper'

describe PagesController do
  render_views

  describe "GET 'home'" do
    render_views
    it "should be successful" do
      get 'home'
      response.should be_success
    end
  end

  describe "GET 'contact'" do
    render_views
    it "should be successful" do
      get 'contact'
      response.should be_success
    end
  end

end

  describe "GET 'about'" do
    render_views
    it "should be successful" do
      get 'about'
      response.should be_success
    end
  end 
```

**routes.rb 文件：**

```
SampleApp::Application.routes.draw do
  get "pages/home"

  get "pages/contact"

  get "pages/about"

end 
```

顺便说一句，我运行 Spork 和自动测试没有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T21:52:48.803

问题在于测试中的嵌套：该`describe PagesController`块仅包含前两个测试，而不是最后一个。

它应该如下所示：

```
describe PagesController do
  render_views

  describe "GET 'home'" do
    it "should be successful" do
      get 'home'
      response.should be_success
    end
  end

  describe "GET 'contact'" do
    it "should be successful" do
      get 'contact'
      response.should be_success
    end
  end

  describe "GET 'about'" do
    it "should be successful" do
      get 'about'
      response.should be_success
    end
  end
end 
```

请参阅：[我如何摆脱 @controller 在我的测试中是零错误](https://stackoverflow.com/questions/7743059/how-do-i-get-rid-of-controller-is-nil-error-in-my-tests)

ps 我已经删除了`render_views`除了顶层`describe`块中的所有内容——您应该只需要为该块调用一次（请参阅[规范](https://www.relishapp.com/rspec/rspec-rails/v/2-1/docs/controller-specs/render-views)）。

# php - 如何在不手动定义数组 ID 的情况下显示 foreach 输出？

> ID：14267507
> 
> 赞同：0
> 
> 时间：2013-01-10T21:23:34.790
> 
> 标签：php, arrays

[我的数组和输出示例](http://codepad.org/6OFkbWoc)

如何管理我的 foreach 而不在每个循环上手动编写它？因为我不知道儿童用户会选择的深度。

```
$array['0']['children']
$array['1']['children']
$array['2']['children'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:42:02.333

您应该创建一个递归函数来调用您的数组。

例子：

```
<html><body>
<h1>test</h1>
<?php

$array = array(
    '0' => array(
        'id' => 1, 
        'name' => 'Sizes',
        'parent' => 0,
        'children' => array(
            '0' => array('id' => 4, 'name' => 'S', 'parent' => 1),
            '1' => array('id' => 5, 'name' => 'L', 'parent' => 1),
            '2' => array('id' => 6, 'name' => 'M', 'parent' => 1)
        )
    ),
    '1' => array(
        'id' => 2,
        'name' => 'Colors',
        'parent' => 0,
        'children' => array(
            '0' => array('id' => 7, 'name' => 'White', 'parent' => 2),
            '1' => array('id' => 8, 'name' => 'Black', 'parent' => 2)
        )
    ),
     '2' => array(
        'id' => 3,
        'name' => 'Types',
        'parent' => 0,
        'children' => array(
            '0' => array('id' => 9, 'name' => 'Polyester', 'parent' => 3),
            '1' => array('id' => 10, 'name' => 'Lycra', 'parent' => 3)
        )
    )
 );

function my_recurse($array, $depth=0) {
   //to avoid infinite depths check for a high value
   if($depth>100) {  return; }  

   //

   foreach ($array as $id => $child) {
        echo "Array element $id = " . $child['id'] . " " . $child['name'] . "<br>\n";    //whatever you wanna output
     // test if got ghildren
     if(isset($child['children'])) {   
         my_recurse($child['children'], $depth+1); // Call to self on infinite depth. 
     }
   }
}

my_recurse($array);

?>
</body></html> 
```

请注意！始终在函数中使用深度检查以避免无限递归。

这在我的浏览器中给出了以下输出：

## 测试

数组元素 0 = 1 大小

数组元素 0 = 4 S

数组元素 1 = 5 L

数组元素 2 = 6 M

数组元素 1 = 2 颜色

数组元素 0 = 7 白色

数组元素 1 = 8 黑色

数组元素 2 = 3 种类型

数组元素 0 = 9 聚酯

阵列元素 1 = 10 莱卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:36:18.590

我想这就是我会这样做的方式......

```
foreach($array as $item) {
    foreach($item['children'] as $child) {
          echo $child['stuff'];
    }
} 
```

# html - 包含缩放 div 的大小 div 定位不正确

> ID：14267512
> 
> 赞同：0
> 
> 时间：2013-01-10T21:23:47.323
> 
> 标签：html, css, iframe, contentflow

对于过于具体的问题标题，我很抱歉，但我不知道会发生什么更普遍的事情。显然我错过了一些东西

看看这个jsbin：

[http://jsbin.com/aguhux/1/edit](http://jsbin.com/aguhux/1/edit)

请注意，您必须在编辑模式下查看它，出于某种原因（我怀疑这与我基本上在 jsbin 内部执行 jsbin 技术这一事实有关）js 在完整视图中转义并清理页面。

我所拥有的基本上是

```
p{slipsum text}
div#preview (hard coded height, width)
  div (css3 scale transform)
     iframe
p{slipsum text} 
```

iframe 的内容是动态构建的，并且还手动设置了它们的高度和宽度。

#preview 的空间已在流内容中正确分配，但由于某种原因，它的子项逃离了容器并覆盖了底部段落。

为什么会发生这种情况？我怎样才能阻止它？

这发生在 chrome 和 firefox 中，所以我知道这不是浏览器错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:54:38.673

好的，我想通了——它与缩放有关。

[这是工作的jsbin](http://jsbin.com/aguhux/3/edit)

显然，当您缩放一个元素时，您会缩放它的内容，但如果内容没有被缩放，元素本身的大小仍然是它本来的大小（为什么这将是默认功能超出了我的范围）。因此，解决方案是将所有内容都向上翻译`scalingFactor*originalHeight`- 这可以让您垂直定位。由于某种原因要水平定位，您必须向左平移`scalingFactor*expectedWidth`（应该是`scalingFactor*scalingFactor*originalWidth`）。

任何想为这种疯狂辩护的人......我都在听。

# sql-server - 避免成为数据库死锁的受害者

> ID：14267521
> 
> 赞同：1
> 
> 时间：2013-01-10T21:24:08.883
> 
> 标签：sql-server, database, deadlock

每天我都会运行一个 sql server 脚本来更新我的表。每周一次，我成为数据库死锁的受害者。有几个人可以访问数据库，他们都知道他们不应该在数据库更新时访问数据库。但是在更新期间有人正在访问数据库，我们遇到了死锁。有没有办法避免成为僵局的受害者？我听说过死锁优先级。如果我将死锁优先级设​​置为 10 会有帮助吗？使用死锁优先级是否有任何性能问题或后果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:28:04.657

假设其他进程的死锁优先级小于 10，这应该会导致您赢得死锁解决方案。

> 如果会话具有不同的死锁优先级，则选择具有最低死锁优先级的会话作为死锁牺牲品。

[http://msdn.microsoft.com/en-us/library/ms186736.aspx](http://msdn.microsoft.com/en-us/library/ms186736.aspx)

当然，您始终可以在更新期间运行脚本删除其他用户的更新权限...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:51:51.740

> 有几个人可以访问数据库，他们都知道他们不应该在数据库更新时访问数据库

为什么不将数据库放在单用户中，在一个事务中进行更新并恢复为多用户？

拉吉

# sql - Oracle SQL：计算分组数据 Z 分数的最有效方法

> ID：14267522
> 
> 赞同：3
> 
> 时间：2013-01-10T21:24:09.373
> 
> 标签：sql, oracle, plsql, statistics

我有两张桌子： `DATA`

```
DATA_ID  |  SAMPLE_ID  |  ASSAY_ID  |  SIGNAL
101      |  201        |  301       |  2.87964
102      |  201        |  302       |  7.64623
103      |  202        |  301       |  1.98473
... 
```

并且`SAMPLES`：

```
SAMPLE_ID  |  SAMPLE_NAME  |  CATEGORY
201        |  SAMP0001     |  CAT A  
202        |  SAMP0002     |  CAT B
203        |  SAMP0003     |  CAT A
... 
```

中大约有 20,000 行`SAMPLES`。对于每个样本，在`DATA`. 每个`ASSAY_ID`样本在 中每个样本只发生一次`DATA`。我需要获取样本的子集`SAMPLE`并计算 中的每个信号值的标准/z 分数值`DATA`，按 分组`ASSAY_ID`。我正在尝试创建一个将被重复调用的存储过程，它将接受单个`ASSAY_ID`值并为预定义样本子集中的所有样本返回`SAMPLE_ID`和配对。`ZSCORE`

给定测定的一组样本信号值 ( `X = [3.21, 4.56, 1.12, ..]`)，在这种情况下，标准/z 分数计算为

```
(X[i] - median(X))/(K * MAD) 
```

其中`K`，比例因子等于 1.4826，MAD 是调整偏差的中值，等于：

```
median(|X[i]-median(X)|) 
```

知道了？好:) 现在，使用 SQL 查询执行此计算的最有效方法是什么？执行时间是关键，因为其中有近十亿行，并且几乎每个值`DATA`都需要计算 z 分数。`SIGNAL`

这是迄今为止我能想到的最好的查询：

```
WITH BASE AS (
    SELECT 
        S.SAMPLE_ID,
        D.SIGNAL
    FROM
        DATA D
        JOIN SAMPLES S
            ON D.SAMPLE_ID = S.SAMPLE_ID
    WHERE 
        S.CATEGORY IN ('CAT A', 'CAT B')
        AND D.ASSAY_ID = 12345
        AND S.SAMPLE_NAME NOT IN ('SAMP0003', 'SAMP0005', 'SAMP0008')          
)
SELECT  
    A.SAMPLE_ID,
    (A.SIGNAL-B.MED)/(1.4826*C.MAD) AS ZSCORE
FROM 
    BASE A,
    (
        SELECT MEDIAN(X.SIGNAL) AS MED 
        FROM BASE X
    ) B,
    (
        SELECT MEDIAN(ABS(Y.SIGNAL-YY.MED)) AS MAD 
        FROM BASE Y, 
        (SELECT MEDIAN(SIGNAL) AS MED FROM BASE) YY
    ) C 
```

有没有更有效的方法来执行这个查询？

**奖励问题：**我可以编写一个 SQL 查询，`ASSAY_ID`在一次执行中为每个执行此计算吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T23:49:34.960

你能看看：

```
SELECT ASSAY_ID, SAMPLE_ID, 
       (SIGNAL - MED)/(1.4826F * MAD) AS ZSCORE
  FROM (
        SELECT ASSAY_ID, SAMPLE_ID, SIGNAL, MED,
               MEDIAN(ABS(SIGNAL - MED)) OVER (PARTITION BY ASSAY_ID) AS MAD
          FROM (
                SELECT ASSAY_ID, SAMPLE_ID, SIGNAL,
                       MEDIAN(SIGNAL) OVER (PARTITION BY ASSAY_ID) AS MED
                  FROM DATA    D
                  JOIN SAMPLES S USING (SAMPLE_ID)
                 WHERE S.CATEGORY IN ('CAT A', 'CAT B')
                   AND S.SAMPLE_NAME NOT IN ('SAMP0003', 'SAMP0005', 'SAMP0008')  
                   AND D.ASSAY_ID = 301
               )
       ); 
```

这是正确的吗？它更快吗？如果是，只需删除**奖金问题**`AND D.ASSAY_ID = 301`的条款:-)

 **On the physical side, I would look into the data type for signal (`BINARY_FLOAT` or `BINARY_DOUBLE` are supposedly faster than `NUMBER`). And, if this is an option, I'd try to physically collocate the assays with partitions.**

# java - 当对象的使用仅在一个地方存在同步块时会发生什么？

> ID：14267526
> 
> 赞同：2
> 
> 时间：2013-01-10T21:24:46.647
> 
> 标签：java

```
Class A {
    private Map<Oject,Object> map;
    public void clear() {
        map.clear();
    }

    public void work() {
        synchronized (map) {
            map.put(new Object, new Object();
        }
    }
} 
```

如果线程 A 在方法的中间，`work()`这是否意味着线程 B 在执行该方法时不会阻塞`clear()`？

上面的代码和有这个有什么区别？

```
 public void clear() {
        synchronized (map) {
            map.clear();
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T21:29:21.490

你的怀疑是正确的；这段代码有一个错误。

你也需要锁定`clear()`；除此以外; 您仍然可以`put()`同时运行`clear()`。

但是，您实际上应该使用 a`ConcurrentHashMap()`代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:29:17.357

正确的。为什么会呢？这就是`synchronized`块的重点——线程 B 还没有执行`synchronized`块。在这种情况下，就像根本没有同步一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:30:00.567

对于应该控制对给定资源的访问的每个位置，您应该同步。您的第一个示例只有在遇到同步块（它不在`clear()`）时才会以同步方式运行，否则它将继续正常运行。您在第二个示例中的锁定`clear()`将导致线程 B 进行检查。

# iphone - UIWebView 和 CSS 固定位置

> ID：14267527
> 
> 赞同：1
> 
> 时间：2013-01-10T21:24:48.917
> 
> 标签：iphone, ios, css, xcode, uiwebview

我有一个`UIWebView`使用固定位置的标题。

当`ViewController`包含 的`UIWebView`是初始视图时，固定位置的 div 没有问题。

`ViewController`当我通过 Modal segue显示相同的内容时，就会出现问题。

我第一次在页面上滚动时，div 会随着页面移动并滚动，但是一旦我第一次放开滚动，div 就会返回到它的固定位置，并且错误再也不会发生。

有任何想法吗？我已经看到`iScroll`，它不像我想要的页面那样工作，我认为有一个更简单的方法，因为我只在初始加载时遇到问题`UIWebView`......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T23:41:35.020

我使用了 CSS 解决方法，将标题定位为左上角的绝对标题，并给主标题`<div>`一个`overflow-y: scroll;`，并保留`body { height: 100%; }`.

这导致了一种仿冒的 iScroll！

**编辑**

此外，您可以插入以下内容：

`-webkit-overflow-scrolling: touch;`

进入主`<div>`css 以获得更原生的感觉。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T22:02:38.877

很遗憾。`position: fixed`在 iOS 上还不可靠。这意味着您需要在某处做出妥协。

iScroll*可能*有效，但充其量只是一个 hack。根据设备的不同，它的滚动速度可能不够快，无法提供您想要的“固定”外观。

您没有向我们提供有关此标头中内容的详细信息，但这里有一些其他可能性：

一个。将您需要固定到屏幕顶部的任何东西放在 ViewController 顶部的 UIView 中，UIWebView 位于其下方。

湾。更改您的故事板流程以消除对模态转场的需要。

C。不要使用情节提要，从而消除了segue的问题。

d。重新设计您的 HTML，从而消除对固定标题的需求。

告诉我们更多关于这个固定标题中的内容，也许我们可以提出其他想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:29:31.547

`position: fixed`在 iOS 上还不能很好地工作。

iScroll 是一个更安全的选择。

# java - TestNG 并行测试配置

> ID：14267528
> 
> 赞同：2
> 
> 时间：2013-01-10T21:24:50.150
> 
> 标签：java, maven-2, testng, java-6

在 Java 6 上使用 TestNG，这就是我想在我的 Maven 项目中做的事情：

1.  `testAbc`启动一个可以使用基于队列的多线程运行的测试方法 ( )`DataProvider`
2.  在所有线程完成后启动一个依赖于`testAbc`( ) 的测试`testXyz``testAbc`

我以为我已经正确配置了它，但我没有。

目前我已将其配置为：

```
@Test ( singleThreaded = false )
public class AutomatedTest {

  @Test (
    alwaysRun = true,
    dataProviderClass = UseCaseProvider.class,
    dataProvider = "getUseCasesNoDependencies",
    skipFailedInvocations = false,
    threadPoolSize = 25
  )
  public void testAbc(UseCase useCase) {
    executeUseCase(useCase);
  }

  @Test (
    dependsOnMethods = {"testAbc"},
    dataProviderClass = UseCaseProvider.class,
    dataProvider = "getUseCasesDependencies",
    singleThreaded = true
  )
  public void testXyz(UseCase useCase) {
    executeUseCase(useCase);
  }
} 
```

提供的所有测试`testAbc`都`@DataProvider`需要很长时间才能运行，但最多可以同时运行 25 个（其中有好几百个）。中的所有`testXyz`内容都不能并行运行，因为不仅所有情况都依赖`testAbc`，而且处理对这样的线程池不友好。

我的 Maven 配置设置如下：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-surefire-plugin</artifactId>
      <configuration>
        <parallel>methods</parallel>
        <threadCount>25</threadCount>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

当我运行时，`mvn -U test`我看不到我的测试实际上是并行运行的。帮助！

```
$ mvn -version
Apache Maven 2.2.1 (r801777; 2009-08-06 15:16:01-0400)
Java version: 1.6.0_35
Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Default locale: en_US, platform encoding: MacRoman
OS name: "mac os x" version: "10.7.5" arch: "x86_64" Family: "mac" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:32:52.793

怎么加`threadPoolSize`

```
@Test ( singleThreaded = false, threadPoolSize = 5 )
public class AutomatedTest {
... 
```

该`threadPoolSize`属性允许您指定应为此执行分配多少线程。

编辑

刚刚注意到你错过了`invocationCount`。请注意，`threadPoolSize`如果`invocationCount`未指定，则将被忽略。

因此，请尝试按原样离开@Test 课程并更新`testAbc`

```
 @Test (
    alwaysRun = true,
    dataProviderClass = UseCaseProvider.class,
    dataProvider = "getUseCasesNoDependencies",
    skipFailedInvocations = false,
    threadPoolSize = 25,
    invocationCount = 25
  )
  public void testAbc(UseCase useCase) {
    executeUseCase(useCase);
  } 
```

# c++ - 适合新手的 SQLite

> ID：14267541
> 
> 赞同：-1
> 
> 时间：2013-01-10T21:25:27.370
> 
> 标签：c++, sqlite, shared-libraries

好像有什么不明白的。我决定在我的项目中使用 sqlite。我在这里查看了下载页面：[http](http://www.sqlite.org/download.html) : //www.sqlite.org/download.html 认为这就是我需要的，开发人员站点。

我认为我需要几个 *.dll 文件和头文件供他们使用。也许还有一些帮助和“howto”示例。

但我在那里找不到。存在没有标头的库（适用于 Windows），或者没有可能编译库的源……那是官方网站……

帮我找到我需要在 windows 下的 C++ 程序中使用 sqlite 的库和头文件？=)

任务很简单，所以在这里很难找到类似的，大多数人对此没有问题，但我有。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:35:54.053

它是如此精简，你只需要这些 h 和 c 文件

# vb.net - 通过单击按钮完成行的第二部分？

> ID：14267545
> 
> 赞同：-1
> 
> 时间：2013-01-10T21:25:48.927
> 
> 标签：vb.net, button, datagrid, datagridview

我有一个包含两个按钮和一个包含 6 列的数据网格的屏幕。当按下按钮 1 时，它会在行中显示第 1 到第 4 列的数据。当我按下按钮 2 时，我希望我的应用程序填充行中的剩余列（即第 5 列和第 6 列）。

解决方案可能很明显，但我不确定如何解决它。

**编辑：**对不起，我之前忘了提，当我点击第二个按钮时，数据出现在正确的位置，即最后两列。除非它不在同一行。数据显示在下一行。

这是我的代码：

```
Private Sub btnClockIn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnClockIn.Click

Homescreen.DataGridViewEmployee.ColumnCount = 6
Homescreen.DataGridViewEmployee.Columns(0).Name = "Employee Number"
Homescreen.DataGridViewEmployee.Columns(1).Name = "Day"
Homescreen.DataGridViewEmployee.Columns(2).Name = "Week Number"
Homescreen.DataGridViewEmployee.Columns(3).Name = "Time In"
Homescreen.DataGridViewEmployee.Columns(4).Name = "Time Out"
Homescreen.DataGridViewEmployee.Columns(5).Name = "Hours"

Dim row As String() = New String() {ENumber, day, WeekNum, StartTime, "", ""}
Homescreen.DataGridViewEmployee.Rows.Add(row)
Homescreen.DataGridViewEmployee.ReadOnly = True

Private Sub btnClockOut_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnClockOut.Click

Homescreen.DataGridViewEmployee.ColumnCount = 6
Homescreen.DataGridViewEmployee.Columns(0).Name = "Employee Number"
Homescreen.DataGridViewEmployee.Columns(1).Name = "Day"
Homescreen.DataGridViewEmployee.Columns(2).Name = "Week Number"
Homescreen.DataGridViewEmployee.Columns(3).Name = "Time In"
Homescreen.DataGridViewEmployee.Columns(4).Name = "Time Out"
Homescreen.DataGridViewEmployee.Columns(5).Name = "Hours"

Dim row As String() = New String() {"", "", "", "", EndTime, Diff}
Homescreen.DataGridViewEmployee.Rows.Add(row)
Homescreen.DataGridViewEmployee.ReadOnly = True 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:49:16.407

问题是您使用的`rows.add()`方法的第二个按钮被命名为添加到一行。如果要添加到最后一行，则需要使用获取最后一行，`rows(rows.Count -1)`然后编辑列表中的相关字段

```
Dim row as DataGridViewRow = rows(rows.Count -1)
row(4) = EndTime
row(5) = Diff 
```

无需在每次按下按钮时设置数据网格视图的属性，因此可以删除所有关于列名的代码，只读设置也可以。

# android - 通过数据库中颜色列的参数更改文本视图的颜色。安卓

> ID：14267546
> 
> 赞同：0
> 
> 时间：2013-01-10T21:25:54.353
> 
> 标签：android, database, colors, cursor

我在 SimpleCursorAdapter 的 ListView 中显示数据库中的一列，其中包含事件名称，数据库中的一列包含颜色的字符串名称，是否可以根据来自此颜色的值以不同颜色显示数据库中的这些条目柱子？

```
 String[] from = new String[] { "event" };
    int[] to = new int[] { R.id.eventTextView };
    conAdapter = new SimpleCursorAdapter(Clock.this, R.layout.day_plan, null, from, to);
    setListAdapter(conAdapter); 
```

# css - CSS问题与 Firefox 中的标记

> ID：14267547
> 
> 赞同：3
> 
> 时间：2013-01-10T21:26:08.730
> 
> 标签：css, html-lists

以下布局在 Chrome、Safari、IE 和 Opera 中正确呈现。在 Firefox 中，中断被忽略。

这是预期的结果：

![预期结果](../Images/b02bc597894dc0b372e548df32b0b6f3.png)

我的偏好是一个 CSS 调整，可以让它在 FF 中工作（并让它在其他地方工作），但如果有必要，我会采取另一种方法来实现相同的结果。

# [JSFiddle](http://jsfiddle.net/7mNmn/)

```
<!DOCTYPE html>
<html>
<head>

<style>

  ul {
    list-style-type: none;
    margin: 0;
    padding: 0
  }

  ul li {
    clear: both;
  }

  ul li * {
    float: left;
  }

  ul li div:first-child {
    width: 100px;
  }

</style>
</head>

<body>

<ul>
  <li><div>One</div><div>A</div></li>
  <li><div>Two</div><div>B</div></li>
  <li><div>Three</div><div>C</div></li>
  <li><div>Four</div><div>D - 1<br>D - 2<br>D - 3<br>D - 4</div></li>
</ul>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:31:36.233

```
br { float:none !important; } 
```

[**小提琴**](http://jsfiddle.net/7mNmn/1/)

或者使用更具体的规则而不是`ul li *`不将 float 应用于`br`s。

在 Nightly 21 和 Canary 26 上进行了测试。`float`似乎`br`只影响 Firefox 中的元素。

# javascript - 为什么这个自定义的 jQuery 提示会在每 n 次使用它时重复它的回调动作 n 次？

> ID：14267552
> 
> 赞同：1
> 
> 时间：2013-01-10T21:26:39.293
> 
> 标签：javascript, jquery, html

```
<html>
    <div id="pnl_prompt" style="display:none; background-color:#808080">
        <b id="lbl_prompt_title">Prompt</b> <br />
        <span id="lbl_prompt_name" class="right">Field:</span>  <input id="txt_prompt_field" type="text"/>  <hr />
        <input id="btn_prompt_ok" type="button" value="OK"/>
        <input id="btn_prompt_cancel" type="button" value="Cancel"/>
        <script type="text/javascript">
            function myPrompt(title, name, isPassword, callback){
                $("#btn_prompt_ok").click(function(){
                    $("#pnl_prompt").css("display","none");
                    ENTERED_VALUE = $("#txt_prompt_field").val();
                    if(callback)    callback();
                });
                $("#btn_prompt_cancel").click(function(){
                    $("#pnl_prompt").css("display","none");
                    ENTERED_VALUE = null;
                    $("#txt_prompt_field").val("");
                });

                ENTERED_VALUE = null;
                $("#lbl_prompt_title").html(title);
                $("#lbl_prompt_name").html(name+":");
                if(isPassword)  $("#txt_prompt_field").prop("type", "password");
                $("#pnl_prompt").css("display","block").css({position:"absolute",left:"100px",top:"100px"});
                $("#txt_prompt_field").val("").focus();
            }
        </script>
    </div>
</html> 
```

上面的 div 展示了一个带有 OK 和 Cancel 按钮的文本字段。myPrompt 函数使 div 出现，并声明 OK/Cancel 按钮操作。OK 将文本输入值存储到 window.ENTERED_VALUE，然后隐藏 div。考虑以下测试 javascript 调用：

javascript:myPrompt("Hello", "World", false, function(){alert(ENTERED_VALUE);});

它应该在用户通过 OK 按钮提交他的值后提醒输入的值。它会这样做，但如果您再次运行呼叫，则会出现 2 个警报。再次带来 3 个警报等。这是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T21:28:59.077

好吧...每次`myPrompt`使用这些行调用时，您都会分配一个新的单击处理程序：

```
function myPrompt(title, name, isPassword, callback){
        $("#btn_prompt_ok").click(function(){ // new callback for clicking!
            $("#pnl_prompt").css("display","none");
            ENTERED_VALUE = $("#txt_prompt_field").val();
            if(callback)    callback();
        });

        $("#btn_prompt_cancel").click(function(){ // new callback for clicking!
            ... 
```

# python - 在Python中找到大于或等于n的2的最小幂

> ID：14267555
> 
> 赞同：30
> 
> 时间：2013-01-10T21:26:42.723
> 
> 标签：python

返回大于或等于 Python 中给定非负整数的 2 的最小幂的最简单函数是什么？

例如，大于或等于 6 的 2 的最小幂是 8。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-10T21:44:57.483

让我们测试一下：

```
import collections
import math
import timeit

def power_bit_length(x):
    return 2**(x-1).bit_length()

def shift_bit_length(x):
    return 1<<(x-1).bit_length()

def power_log(x):
    return 2**(math.ceil(math.log(x, 2)))

def test(f):
    collections.deque((f(i) for i in range(1, 1000001)), maxlen=0)

def timetest(f):
    print('{}: {}'.format(timeit.timeit(lambda: test(f), number=10),
                          f.__name__))

timetest(power_bit_length)
timetest(shift_bit_length)
timetest(power_log) 
```

我使用的原因不仅仅是`range(1, 1000001)`版本将在. 我在较大范围内使用少量代表而不是在小范围内使用大量代表的原因是因为我希望不同的版本在不同的域上具有不同的性能。（当然，如果您希望使用巨大的千位数来调用它，那么您需要一个使用这些的测试。）`range(1000000)``power_log``0`

使用 Apple Python 2.7.2：

```
4.38817000389: power_bit_length
3.69475698471: shift_bit_length
7.91623902321: power_log 
```

使用 Python.org Python 3.3.0：

```
6.566169916652143: power_bit_length
3.098236607853323: shift_bit_length
9.982460380066186: power_log 
```

使用 pypy 1.9.0/2.7.2：

```
2.8580930233: power_bit_length
2.49524712563: shift_bit_length
3.4371240139: power_log 
```

我相信这表明这`2**`是缓慢的部分；使用`bit_length`代替`log`确实可以加快速度，但使用`1<<`代替`2**`更重要。

另外，我认为它更清楚。OP 的版本要求您从对数到位进行心理上下文切换，然后再返回指数。要么始终保持位 ( `shift_bit_length`)，要么保持对数和指数 ( `power_log`)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-10T21:26:42.723

总是返回`2**(x - 1).bit_length()`是不正确的，因为尽管它为 x=1 返回 1，但它为 x=0 返回一个非单调的 2。对于 x=0 来说单调安全的简单修复是：

```
def next_power_of_2(x):  
    return 1 if x == 0 else 2**(x - 1).bit_length() 
```

示例输出：

```
>>> print(', '.join(f'{x}:{next_power_of_2(x)}' for x in range(10)))
0:1, 1:1, 2:2, 3:4, 4:4, 5:8, 6:8, 7:8, 8:8, 9:16 
```

可以迂腐地争论 x=0 应该返回 0（而不是 1），因为`2**float('-inf') == 0`.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-10T21:33:19.503

这对你有用吗：

```
import math

def next_power_of_2(x):
    return 1 if x == 0 else 2**math.ceil(math.log2(x)) 
```

请注意，`math.log2`它在 Python 3 中可用，但在 Python 2 中不可用。使用它而不是`math.log`避免后者在 2**29 及以后出现数值问题。

示例输出：

```
>>> print(', '.join(f'{x}:{next_power_of_2(x)}' for x in range(10)))
0:1, 1:1, 2:2, 3:4, 4:4, 5:8, 6:8, 7:8, 8:8, 9:16 
```

可以迂腐地争论 x=0 应该返回 0（而不是 1），因为`2**float('-inf') == 0`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-18T13:21:38.883

我们可以使用位操作来做到这一点：

```
def next_power_of_2(n):
    if n == 0:
        return 1
    if n & (n - 1) == 0:
        return n
    while n & (n - 1) > 0:
        n &= (n - 1)
    return n << 1 
```

示例输出：

```
>>> print(', '.join(f'{x}:{next_power_of_2(x)}' for x in range(10)))
0:1, 1:1, 2:2, 3:4, 4:4, 5:8, 6:8, 7:8, 8:8, 9:16 
```

如需进一步阅读，请参阅[此资源](https://www.geeksforgeeks.org/smallest-power-of-2-greater-than-or-equal-to-n/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T07:07:07.857

```
v+=(v==0);
v--;
v|=v>>1;
v|=v>>2;
v|=v>>4;
v|=v>>8;
v|=v>>16;
v++; 
```

对于 16 位整数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-30T04:39:12.810

嗯，我知道这个问题很老，我的答案很简单，但我真的很惊讶一直没有人在这里发布它，所以我将它作为答案发布。

最简单的解决方案真的很简单，不需要导入任何库，使用***`while`***语句就可以一个循环！

所以逻辑很简单，创建一个值为1的变量，而变量的值小于数字，将变量乘以2！

代码：

```
i = 1
while i < n: i *=2 
```

n = 1、63、64、255、256、1000、4095 的返回值：

```
2, 64, 64, 256, 256, 1024, 4096 
```

这可以很容易地修改以计算下一个电源柜到许多其他基地：

```
def nextpower(num, base):
  i = 1
  while i < num: i *= base
  return i 
```

# php - 创建用于过滤数据表的自定义 WHERE 子句

> ID：14267561
> 
> 赞同：0
> 
> 时间：2013-01-10T21:27:07.273
> 
> 标签：php, javascript, jquery, mysql, datatables

我正在使用数据表，并且正在尝试创建自定义 WHERE 子句。我有以下代码：

```
$sWhere = "WHERE office=".$varOffice;
if ( isset($_GET['sSearch']) && $_GET['sSearch'] != "" )
{
    $sWhere = "WHERE (";
    for ( $i=0 ; $i<count($aColumns) ; $i++ )
    {
        if ( isset($_GET['bSearchable_'.$i]) && $_GET['bSearchable_'.$i] == "true" )
        {
            $sWhere .= "`".$aColumns[$i]."` LIKE '%".mysql_real_escape_string( $_GET['sSearch'] )."%' OR ";
        }
    }
    $sWhere = substr_replace( $sWhere, "", -3 );
    $sWhere .= ') AND office='.$varOffice;
} 
```

调试后，我发现 MySQL 报错了。错误 1605。

我决定回应`$sQuery`这里的发现：

```
$sQuery = "
        SELECT SQL_CALC_FOUND_ROWS `".str_replace(" , ", " ", implode("`, `", $aColumns))."`
        FROM   $sTable
        $sWhere
        $sOrder
        $sLimit
        "; 
```

然后我发现错误是因为 WHERE 子句没有引号，如下所示：

```
SELECT SQL_CALC_FOUND_ROWS `amount_due_owed`, `amount_paid`, `amount_remaining`, `reference_number` FROM accounting WHERE office=Office 1 
```

它应该是：

```
WHERE office='Office 1' 
```

我一直在尝试，但我无法弄清楚。我应该如何在变量周围加上单引号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:29:06.310

在第一行添加单引号：

```
$sWhere = "WHERE office='".$varOffice."'"; 
```

另外：如果你只是在`$_GET`你的 SQL 查询中插入随机变量，你最终会遇到[麻烦](https://www.google.com/search?q=sql+injection)。请使用[PDO](http://php.net/manual/en/intro.pdo.php)或更安全的东西（甚至`mysql_real_escape_string()`不是那么安全。）。

# r - 使用带有箱形图的 ggplot2 aes_string 的问题

> ID：14267562
> 
> 赞同：5
> 
> 时间：2013-01-10T21:27:07.110
> 
> 标签：r, ggplot2

我似乎在使用 ggplot2 时遇到问题。

尝试使用 aes_string 绘制箱线图时出现以下错误：

> 错误：stat_boxplot 需要以下缺失的美学：x、y

这是一个例子：

```
x='group'
y='value'
df=data.frame(group=c('A','A','B','B','C','C'),value=c(1,2,3,4,5,6))
ggplot(data=df,aes_string(x,y)) + geom_boxplot() #returns the error
ggplot(data=df,aes(x,y)) + geom_boxplot() #plots nonsense (naturally)
ggplot(data=df,aes(group,value)) + geom_boxplot() #works, but not strings 
```

关于如何使用字符串进行这项工作的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T21:44:28.137

`aes`允许前两个参数不命名，并假定为 x 和 y（分别）；`aes_string`没有这个快捷方式，因此所有参数都必须命名。尝试：

```
ggplot(data=df,aes_string(x='group',y='value')) + geom_boxplot() 
```

# google-chrome - 在更新之间丢失数据（chrome 打包的应用程序）

> ID：14267564
> 
> 赞同：1
> 
> 时间：2013-01-10T21:27:13.473
> 
> 标签：google-chrome, indexeddb, chrome-web-store, google-chrome-app

我正在开发一个在本地保存大量数据的 chrome 打包应用程序。我最近把它放在了 chrome 商店。令我沮丧的是，每当我的用户的 chrome 安装更新应用程序（例如 v1.1.1 到 v1.1.2）时，他们所有的本地数据都消失了（indexeddb 数据）。为什么会这样？

在更新时清除所有数据库是预期的行为吗？除了不推出更新之外，还有什么方法可以防止这种情况发生吗？

（如果有的话，我在哪里可以报告这个问题/错误？）

* * *

更新：提交了错误报告，但现在我无法重现该问题。不确定它是否已修复或我的情况是侥幸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:12:37.320

文档对此很模糊：

[https://developer.chrome.com/trunk/apps/app_lifecycle.html](https://developer.chrome.com/trunk/apps/app_lifecycle.html)

防止数据丢失

用户可以随时卸载您的应用。卸载后，不会留下任何执行代码或私有数据。这可能会导致数据丢失，因为用户可能正在卸载具有本地编辑的未同步数据的应用程序。您应该存储数据以防止数据丢失。

我希望他们能详细说明这一点，因为在每次升级时更新用户数据并不是很好的用户体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:07:21.260

我提出一个问题：

[http://code.google.com/p/chromium/issues/detail?id=169417](http://code.google.com/p/chromium/issues/detail?id=169417)

一位开发人员回复我说：

> 我不记得我头顶上的版本号，但是在某些时候，当我们打开正确的分区存储时，会出现一次性数据丢失。这是在打包应用正式推出稳定版之前完成的。如果在 chrome 升级过程中发生数据丢失，那么我会说这是意料之中的。它当然不应该再发生了。

# vb.net - 尝试强制转换控件时出现空引用异常

> ID：14267569
> 
> 赞同：0
> 
> 时间：2013-01-10T21:27:42.663
> 
> 标签：vb.net, visual-studio-2008

我正在尝试将一个菜单项转换为富文本框，它抛出了一个空引用异常。

代码是

```
' ensure above it true and find parent
Dim mnuItem As MenuItem = TryCast(sender, MenuItem)
If mnuItem IsNot Nothing Then
  Dim menu As Menu = TryCast(mnuItem.Parent, Menu)
  If menu IsNot Nothing Then
    Dim rtb As RichTextBox = TryCast(menu.Container, RichTextBox)
    If rtb IsNot Nothing Then
      rtb.Copy()
    End If
  End If
End If 
```

代码在 rtb.Copy() 行抛出异常。谁能指导我如何解决这个问题？

编辑：当我单步执行代码时，它显示 rbt 为“无”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:51:01.710

`menu.container`in`Dim rtb As RichTextBox = TryCast(menu.Container, RichTextBox)`可能不是 RichTextBox。使用调试器，停在该行，突出显示“menu.container”，然后按 Shift-F9 以查看它的真正含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:29:52.287

它说“IsNothing”，你的意思是测试不是什么都没有。

```
If rtb Is Nothing Then
    rtb.Copy()
End If 
```

应该：

```
If rtb IsNot Nothing Then
    rtb.Copy()
End If 
```

# php - 每次在网页中执行查询时，如何使用当前日期更新 phpmyadmin 中定义为日期的字段？

> ID：14267575
> 
> 赞同：0
> 
> 时间：2013-01-10T21:28:12.390
> 
> 标签：php, mysql, phpmyadmin

我在我的网站 php 页面中添加了一个查询。好像有什么...

```
mysql_select_db("my_db", $con); 

$sq2="INSERT INTO querylog(QueryID, Module, AskedBy, Date)
VALUES
('', '$_POST[Module]', '$_POST[Name]', '')";

$row = !mysql_query($sq2,$con) 
```

我希望 phpmyadmin 表中的“日期”列自动更新。不知道如何进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:32:43.793

您可以将列设置为默认值，也可以将其`NOW()`插入`NOW()`查询。

```
$sq2 = "INSERT INTO querylog (QueryID, Module, AskedBy, `Date`)
    VALUES ('', '$_POST[Module]', '$_POST[Name]', NOW())"; 
```

请不要`mysql_`在新代码中使用函数。它们不再被维护并被正式弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:36:14.817

一种可能的解决方案是将您的日期列更改为时间戳。 [http://dev.mysql.com/doc/refman/5.5/en/timestamp-initialization.html](http://dev.mysql.com/doc/refman/5.5/en/timestamp-initialization.html)

另一种解决方案是使用触发器。

[http://dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

在 phpMyAdmin 打开 SQL 选项卡并粘贴如下内容：

```
DELIMITER $$
CREATE TRIGGER autoSetDate BEFORE INSERT ON yourDatabaseName.yourTableName
FOR EACH ROW
BEGIN
    NEW.date=NOW();
END; $$
DELIMITER ; 
```

# php - jquery ajax 只是不工作

> ID：14267577
> 
> 赞同：0
> 
> 时间：2013-01-10T21:28:22.520
> 
> 标签：php, jquery, ajax

好的，这基本上就是我得到的。我也尝试过静态值。

```
$('#submitForm').submit(function() {
    $.ajax({
        type: $(this).attr('method'),
        url: $(this).attr('action'),
        data: $(this).serialize(),
        success: function (data) {
            console.log(data);
        },
        error: function (data) {
            console.log(data);
        }
    });
}); 
```

我得到的回应是：

```
Object {readyState: 0, responseText: "", status: 0, statusText = "error"} 
```

php 脚本（只是一个简单的回显）在该 ajax 调用之后正常运行。我究竟做错了什么？我的提交脚本对我来说看起来并没有那么错，而且我没有做 XSS。: - (

我的 HTML 表单如下所示：

```
<form action="http://dev.xxxxxxx.de/users/register" method="post" accept-charset="utf-8" class="form-horizontal" id="submitForm">                <div class="control-group">
                <label class="control-label" for="inputUsername">Nickname</label>
                <div class="controls">
                    <input type="text" name="username" id="inputUsername" value="" placeholder="Nickname" />
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="inputEmail">E-Mail</label>
                <div class="controls">
                    <input type="text" name="email" id="inputEmail" value="" placeholder="E-Mail" />
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="inputPassword">Passwort</label>
                <div class="controls">
                    <input type="password" name="password" id="inputPassword" value="" placeholder="Passwort" />
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <input type="submit" class="btn" value="Account erstellen" />
                </div>
            </div>
        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:32:44.480

您需要告诉浏览器默认情况下不要提交表单：

```
e.preventDefault(); 
```

所以：

```
$('#submitForm').submit(function(e) {
    e.preventDefault();
    $.ajax({
        type: this.method,
        url: this.action,
        data: $(this).serialize(),
        success: function (data) {
            console.log(data);
        },
        error: function (data) {
            console.log(data);
        }
    });
}); 
```

否则，您的表单将在您的 AJAX 返回之前根据“action”属性提交。

# authentication - Symfony2 身份验证/登录使用电子邮件而不是用户名

> ID：14267581
> 
> 赞同：6
> 
> 时间：2013-01-10T21:28:44.250
> 
> 标签：authentication, symfony, login, doctrine, entity

我今天一直在尝试使用 Symfony2 创建一个登录表单，用户可以使用他们的电子邮件地址和密码登录。我遇到了很多问题，最后意识到只有在我的实体类中有一个`$username`属性时它才会起作用。`AdminUser`我已经尝试在可能的情况下使用电子邮件而不是用户名，所以有人可以解释为什么`$username`需要或我哪里出错了？另外，在我的`login.html.twig`文件中，我仍在使用，`_username`而不是`_email`这有什么不同？我的代码如下（我删除了一些不适用的 getter 和 setter）：

管理员用户实体：

```
namespace XXX\WebsiteBundle\Entity;

use Symfony\Component\Security\Core\User\UserInterface;
use Doctrine\ORM\Mapping as ORM;

/**
* AdminUser
*
* @ORM\Table(name="admin_user",indexes={@ORM\Index(name="indexes", columns={"deleted"})})
* @ORM\Entity
* @ORM\HasLifecycleCallbacks()
*/
class AdminUser implements UserInterface
{
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string
 *
 * @ORM\Column(name="name", type="string", length=45)
 */
private $name;

/**
 * @var string
 *
 * @ORM\Column(name="email", type="string", length=45, unique=true)
 */
private $email;

/**
 * @var string
 *
 * @ORM\Column(name="salt", type="string", length=255)
 */
private $salt;

/**
 * @var string
 *
 * @ORM\Column(name="password", type="string", length=255)
 */
private $password;

/**
 * @var integer
 *
 * @ORM\Column(name="enabled", type="integer", options={"default" = 0})
 */
private $enabled;

/**
 * @var string[] $roles
 *
 * @ORM\Column(name="roles", type="array")
 */
private $roles = array();

private $username;

/**
 * Gets the username.
 *
 * @return string The username.
 */
public function getUsername()
{
    return $this->email;
}

/**
 * Erases the user credentials.
 */
public function eraseCredentials()
{

}

/**
 * Returns the roles granted to the user.
 *
 * <code>
 * public function getRoles()
 * {
 *     return array('ROLE_USER');
 * }
 * </code>
 *
 * Alternatively, the roles might be stored on a ``roles`` property,
 * and populated in any number of different ways when the user object
 * is created.
 *
 * @return Role[] The user roles
 */
public function getRoles() {
    return $this -> roles;
}

/**
 * Set the roles of the user
 *
 * @var string[] $roles
 *
 * @return \XXX\WebsiteBundle\Entity\User this
 */
public function setRoles(array $roles) {
    $this -> roles = $roles;

    return $this;
}

} 
```

我的`security.yml`文件是：

> jms_security_extra：secure_all_services：假表达式：真

```
security:
encoders:
    XXX\WebsiteBundle\Entity\AdminUser: sha512

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    main_provider:
        entity: { class: XXX\WebsiteBundle\Entity\AdminUser, property: email }

firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    admin_firewall:
        pattern:  ^/admin.*
        anonymous: ~
        form_login:
            login_path:  /admin/login
            check_path:  /admin/login_check

access_control:
    - { path: ^/admin/login.*, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/admin.*, roles: ROLE_ADMIN } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T16:16:02.817

我想您应该使用电子邮件更改属性，您也可以通过以下方式更改 _username 参数：

```
entity:
            entity:
                class:               SecurityBundle:User
                property:            username 
```

和

```
firewalls
    form_login:
        username_parameter: _username 
```

可能你应该看看[安全配置文件](http://symfony.com/doc/2.1/reference/configuration/security.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-17T04:52:59.287

```
firewalls:
 main:
  form_login: 
    username_parameter: _email 
```

您的所有代码都是正确的，您只需要在 security.yml 文件中进行一些更改。只需添加用户名参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:33:27.587

尝试使用[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)。

它有一个默认[功能](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/logging_by_username_or_email.md)，用户可以使用他们的用户名或电子邮件字段登录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T22:54:48.627

这有点骇人听闻，但您可以从注册表单中删除用户名字段，并在您的用户实体中执行以下操作：

```
public function setEmail($email) 
{
    $this->email = $email;
    $this->username = $email;
} 
```

# java - 获取页面适配器内的屏幕尺寸？

> ID：14267582
> 
> 赞同：2
> 
> 时间：2013-01-10T21:28:44.700
> 
> 标签：java, android, screen

我正在尝试在页面适配器内获取屏幕尺寸。我可以把它放进去`MainActivity`并将它传递给适配器，但最好把它拿到那里。我该怎么做，直接在适配器内部或内部`instantiateItem`？

这是我的代码：

```
public class MyPagerAdapter extends PagerAdapter {
    Display display = getWindowManager().getDefaultDisplay(); // The method getWindowManager() is undefined for the type MyPagerAdapter
    display.getSize(size);
    ...
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T21:59:32.060

您快到了。你已经有一个[`context`](http://developer.android.com/reference/android/content/Context.html). 有了它，您可以检索`WindowManager`通过[`getSystemService(WINDOW_SERVICE)`](http://developer.android.com/reference/android/content/Context.html#getSystemService%28java.lang.String%29)

```
WindowManager wm = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
Display display = wm.getDefaultDisplay(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-10T21:52:22.390

从任何上下文引用（例如在您的）中，您可以通过执行来获取对该类`intantiateItem`的引用`DisplayMetrics`

`context.getResources().getDisplayMetrics()`

[它为您提供了对DisplayMetrics](http://developer.android.com/reference/android/util/DisplayMetrics.html)`DisplayMetrics`类的参考

对您特别有用的是 this 的`widthPixels`和`heightPixels`属性，它返回设备的原始像素高度和宽度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-21T14:47:15.160

```
public class MyPagerAdapter extends PagerAdapter {
    DisplayMetrics displayMetrics = context.getResources().getDisplayMetrics();
    int pxWidth = displayMetrics.widthPixels;
    float dpWidth = pxWidth / displayMetrics.density;
    int pxHeight = displayMetrics.heightPixels;
    float dpHeight = pxHeight / displayMetrics.density;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-12T13:02:51.067

您可以使用 WindowManager 执行此操作

```
WindowManager wm = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
Display display = wm.getDefaultDisplay(); 
```

# ruby-on-rails-3 - Rails 应用程序的要求

> ID：14267583
> 
> 赞同：0
> 
> 时间：2013-01-10T21:28:46.517
> 
> 标签：ruby-on-rails-3, web-hosting

我为一个学生团体做了一个 Rails 应用程序。我想通过伯克利开放计算设施 (OCF) 启动应用程序。我目前在 Heroku 上运行了该应用程序，但 OCF 提供了 GigaBytes 数量级的存储，这比我在 Heroku 免费获得的要多。然而，OCF 声称“已安装并支持 Ruby 1.8.7。像 Django、Rails、当月风味的框架可能可以工作，但不受支持。”

是否可以通过 OCF 托管运行应用程序？还是主机必须明确支持 Rails？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:37:14.487

主机需要能够支持 Rails 可以在其下运行的一些 Web 堆栈。这将包括[HTTP 服务器（Apache、Nginx 等）和应用程序服务器（Passenger、Unicorn 等）](https://stackoverflow.com/questions/4113299/ruby-on-rails-server-options)。如果他们有，并且您有权连接应用程序 - 那么您可以安装 Rails。

连接应用程序将涉及修改配置文件和重新启动应用程序服务器。因此，在尝试继续之前，请确保您（或可以帮助您的人）有权这样做。

# c# - C# 相对于鼠标位置围绕其位置旋转图像

> ID：14267587
> 
> 赞同：1
> 
> 时间：2013-01-10T21:28:59.853
> 
> 标签：c#, image, rotation, cursor

我在相对于鼠标位置的位置旋转图像时遇到了一些麻烦。我只能让图像围绕它自己的点旋转，而不是在它上面旋转。

下图说明了我想要做的事情：

![在此处输入图像描述](../Images/3b5dc70507b56325abfcc7a703609db8.png)

这是我的代码：

```
Image sprite = Image.FromFile("1.png");
private Point spritePos;

public Enemy(Point Position)
{
    spritePos = Position;
}

public void Render(Graphics dc)
{
    dc.TranslateTransform(spritePos.X, spritePos.Y); //Sets rotation point

    float angle = CalcAngle(Cursor.Position);

    dc.RotateTransform(angle); //Rotates the graphics transform

    dc.DrawImage(sprite, spritePos);

    dc.TranslateTransform(-(spritePos.X), -(spritePos.Y));
}

private float CalcAngle(Point TargetPos)
{
    Point ZeroPoint = spritePos;
    if (TargetPos == ZeroPoint)
    {
        return 0;
    }

    double angle;
    double hypotenuse;

    //Calculates the hypotenuse using Phytagoras(a^2 + b^2 = c^2)
    hypotenuse = Math.Sqrt(                                      //hypotenuse = squared(c^2)
                           Math.Pow((TargetPos.Y), 2) + //a^2  +
                           Math.Pow((TargetPos.X), 2)); //        b^2

    angle = Math.Acos((TargetPos.X) / hypotenuse); //Calculates the angle in radians
    angle = angle * 180 / Math.PI;                          //Converts the radians to degree's

    //If the cursor's y position is negative('above' the player), the returned angle is also negative
    if (TargetPos.Y < 0)
    {
        return -(float)angle;
    }
    else
    {
        return (float)angle;
    }
} 
```

一些正确方向的指示将不胜感激谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:31:53.930

你有正确的基本想法，但错误的顺序。

首先，您应该将您的转换`dc`为 0,0。然后旋转，然后平移回原始位置。

```
dc.TranslateTransform(-spritePos.X, -spritePos.Y); //Sets rotation point

float angle = CalcAngle(Cursor.Position);

dc.RotateTransform(angle); //Rotates the graphics transform

dc.DrawImage(sprite, spritePos);

dc.TranslateTransform((spritePos.X), (spritePos.Y)); 
```

当前，您将精灵放置在距离原点两倍的位置，然后旋转，然后将其移回原始位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-29T18:42:43.227

您应该翻译到图像的中间：

```
dc.TranslateTransform(-spritePos.X / 2, -spritePos.Y / 2);
float angle = CalcAngle(Cursor.Position);

dc.RotateTransform(angle); //Rotates the graphics transform

dc.DrawImage(sprite, spritePos);

dc.TranslateTransform((spritePos.X / 2), (spritePos.Y / 2)); 
```

# html - Safari 上的 CSS Google 字体加粗

> ID：14267588
> 
> 赞同：0
> 
> 时间：2013-01-10T21:29:01.167
> 
> 标签：html, css, fonts, bold

我自己对这个问题进行了很多研究，我知道这是很多人的常见问题，但很多人通常会找到解决问题的方法，但我做不到。

我目前正在使用这种字体： http: [//fonts.googleapis.com/css?family=Questrial](http://fonts.googleapis.com/css?family=Questrial)

它可以在 Windows 7 Firefox、Chrome 和 IE 上完美呈现。但是，在 Safari 上，字体粗细过粗。

请参阅下面的比较：

![火狐与 Safari](../Images/0fe45e179ee14d01f23aaee078d0e398.png)

现在这个例子是 h6 标签的一个主要问题：

```
h6 {
  font-size: 14px;
  line-height: 24px;
  font-weight: normal;
  font-family: Questrial;
  -webkit-font-smoothing: antialiased; //This does nothing to help
  margin-bottom: 10px
} 
```

那么甚至有解决办法吗？

# javascript - 是否有更优雅的方法来检测触摸事件支持并分配“点击”或“触摸结束”事件？

> ID：14267598
> 
> 赞同：4
> 
> 时间：2013-01-10T21:29:27.023
> 
> 标签：javascript, jquery, touch

```
var ClickOrTouchEvent = ("ontouchend" in document.documentElement ? "touchend" : "click");

$("#MyButton").on(ClickOrTouchEvent, function () {
  // Do something
}); 
```

这可行，但可能有一种更优雅的方法来检测触摸事件支持并分配“点击”或“触摸结束”事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T22:19:18.513

人们创建了许多插件来为他们的基于 jquery 的 Web 应用程序（如拖放）添加更高级的触摸支持。您可以使用其中之一，而不是尝试自己制作。

也就是说，在我的经验中，他们似乎都有自己的奇怪问题，所以你可能不得不考虑一下。看起来您的解决方案与他们的大多数解决方案属于同一家族。以下是几个流行的插件以及它们用于决定触摸或点击的解决方案：

[TouchPunch](http://touchpunch.furf.com/)为所有内容添加触摸，如下所示：

```
// Detect touch support and save it in support
  $.support.touch = 'ontouchend' in document;

  // Ignore browsers without touch support
  if (!$.support.touch) {
    return;
  }
//rest of plugin code follows 
```

[jquery-ui-for-ipad-and-iphone](http://code.google.com/p/jquery-ui-for-ipad-and-iphone/)有一个方法，你必须调用它才能将触摸事件添加到所需的元素......但前提是浏览器支持它。

```
// Same deal. Detect touch support and save it in support
$.extend($.support, {
        touch: "ontouchend" in document
});

//
// Hook up touch events
//
$.fn.addTouch = function() {
        if ($.support.touch) {
                this.each(function(i,el){
                        el.addEventListener("touchstart", iPadTouchHandler, false);
                        el.addEventListener("touchmove", iPadTouchHandler, false);
                        el.addEventListener("touchend", iPadTouchHandler, false);
                        el.addEventListener("touchcancel", iPadTouchHandler, false);
                });
        }
};

.... 
```

然后在应用了 jQuery UI 函数的元素上调用 addTouch：

```
$('Element').dialog().addTouch(); 
```

# java - servlet 容器与应用程序服务器 - 商业用途

> ID：14267609
> 
> 赞同：-1
> 
> 时间：2013-01-10T21:30:03.700
> 
> 标签：java, application-server, servlet-container

根据[https://stackoverflow.com/a/5039371/769384](https://stackoverflow.com/a/5039371/769384)明确说明 servlet 容器和应用服务器之间的区别，似乎 Tomcat 等 Web 容器不应该广泛用于企业应用程序。

必须额外安装许多库，因此安装提供它的应用服务器要容易得多。

问题是——我做对了吗？是否有任何企业应用程序在tomcat 上运行？在 Tomcat 而不是 GlassFish 服务器上部署 Java EE (EJB+JPA+JSF+...) 有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:46:50.513

Servlet 容器也可以称为 Web 容器，不支持 EJB，它们只支持 Servlet 和 JSP 以及其他相关技术。

如果您需要部署和 EJB，那么您将需要一个应用程序服务器。

# string - Scala检查元素是否存在于列表中

> ID：14267612
> 
> 赞同：99
> 
> 时间：2013-01-10T21:30:08.610
> 
> 标签：string, list, scala, find

我需要检查一个字符串是否存在于列表中，并相应地调用一个接受布尔值的函数。

是否有可能用一个衬垫来实现这一目标？

下面的代码是我能得到的最好的：

```
val strings = List("a", "b", "c")
val myString = "a"

strings.find(x=>x == myString) match {
  case Some(_) => myFunction(true)
  case None => myFunction(false)
} 
```

我确信可以用更少的编码来做到这一点，但我不知道怎么做！

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-01-10T21:31:22.787

只需使用`contains`

```
myFunction(strings.contains(myString)) 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-01-10T22:32:14.713

如果你不想使用严格相等，你可以使用存在：

```
 myFunction(strings.exists { x => customPredicate(x) }) 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-01-22T11:57:59.527

更容易！

```
strings contains myString 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-20T14:38:29.960

这也适用于不同的谓词

```
myFunction(strings.find( _ == mystring ).isDefined) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-04T08:45:20.943

在您的情况下，我会考虑使用 Set 而不是 List，以确保您只有唯一的值。除非您有时需要包含重复项。

在这种情况下，您不需要在列表周围添加任何包装函数。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-02-06T09:16:34.937

你也可以用 实现一个`contains`方法`foldLeft`，非常棒。我只是喜欢 foldLeft 算法。

例如：

```
object ContainsWithFoldLeft extends App {

  val list = (0 to 10).toList
  println(contains(list, 10)) //true
  println(contains(list, 11)) //false

  def contains[A](list: List[A], item: A): Boolean = {
    list.foldLeft(false)((r, c) => c.equals(item) || r)
  }
} 
```

# jquery-ui - 显示/隐藏多个分层的 jQuery UI 小部件

> ID：14267614
> 
> 赞同：0
> 
> 时间：2013-01-10T21:30:08.210
> 
> 标签：jquery-ui

我对这一切都很陌生，所以请多多包涵。

我一直在使用一些 jQuery UI 小部件，并且我想创建具有自己的一组子类别（儿童）的类别（成人）单选按钮，这些子类别仅在选择适当的成人时出现。

这是我到目前为止的代码：http: [//jsfiddle.net/99azd/](http://jsfiddle.net/99azd/)

问题只是最初的一组子作品的格式，其他的显示为普通的复选框。我认为这与**div id="format"**有关，但我不确定。

```
<div style="display: none;" id="Adult1Children">
  <div id="format">
    <input type="checkbox" id="child1" value="child1"/><label for="child1">child1</label>
    <input type="checkbox" id="child2" value="child2"/><label for="child2">child2</label>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:32:57.727

从 IRC 频道获得了一些帮助 - 这是固定代码：http: [//jsfiddle.net/w6qFC/](http://jsfiddle.net/w6qFC/)

我有一个重复的 id “格式”，所以它只运行第一个。我所要做的就是将 id 更改为一个类，然后在 js 中从 #format 更改为 .format。简单的。

```
$( ".format" ).buttonset();

and

<div class="format"> 
```

# android - 进度条冻结几秒钟，然后显示网格视图

> ID：14267616
> 
> 赞同：0
> 
> 时间：2013-01-10T21:30:16.933
> 
> 标签：android, gridview, progressdialog

好的，我正在从服务器获取图像并在带有标题的**gridview中显示它们...我使用****baseadapter** for gridview ...一切运行良好...我只有一个问题，我需要在获取数据时显示**进度**对话框来自服务器并填充在gridview上......我现在使用**AsyncTask**显示进度对话框，但它冻结了几秒钟（如10）秒，然后gridview显示......

这是我的 baseadapter 类：

```
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = listInflater.inflate(R.layout.grid_adapter_view, null);
        holder = new ViewHolder();
        holder.gridImg = (ImageView) convertView
                .findViewById(R.id.grid_item_image);
        holder.gridTitle = (TextView) convertView
                .findViewById(R.id.grid_item_label);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    holder.gridTitle.setText(catItems.get(position).getName());
    try {
        URL url = new URL(catItems.get(position).getImg());
        Bitmap img = BitmapFactory.decodeStream(url.openConnection()
                .getInputStream());
        holder.gridImg.setImageBitmap(img);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        holder.gridImg.setImageResource(R.drawable.no_image);
        e.printStackTrace();
    }
    return convertView;
}

public class ViewHolder {
    ImageView gridImg;
    TextView gridTitle;

} 
```

这是我使用的异步任务：

```
mytask = new AsyncTask<Void, Void, Boolean>() {

        @Override
        protected void onPostExecute(Boolean result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            main_grid.setAdapter(adater);
            if (progress.isShowing()) {
                progress.dismiss();
            }

        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            progress.show();
        }

        @Override
        protected Boolean doInBackground(Void... params) {
            JSONArray jArray = request.getCategories();
            try {
                for (int i = 0; i < jArray.length(); i++) {
                    CategoriesDetail catDetail = new CategoriesDetail();
                    JSONObject jobj = jArray.getJSONObject(i);
                    catDetail.setId(jobj.getString("id").toString());
                    catDetail.setName(jobj.getString("name").toString());
                    catDetail.setImg(jobj.getString("img").toString());
                    catDetail.setOrder(jobj.getString("order").toString());
                    items.add(catDetail);
                }
                adater = new CatGridAdapter(MainActivity.this, items);
                return true;
            } catch (Exception e) {
                e.printStackTrace();
                progress.dismiss();
                Toast.makeText(MainActivity.this,
                        "Error: " + e.getMessage(), Toast.LENGTH_LONG)
                        .show();
                return false;
            }

        }

    }; 
```

请告诉我我在哪里做错了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:09:40.527

您正在 UI 线程上执行网络操作。

```
BitmapFactory.decodeStream(url.openConnection().getInputStream()); 
```

看看这个：http: [//developer.android.com/training/displaying-bitmaps/process-bitmap.html](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)

**编辑：** 而不是解码流，`getView()`只将默认图像设置为`gridImg`and trigger `loadBitmap(catItems.get(position).getImg(), holder.gridImg)`。

```
public void loadBitmap(String url, ImageView imageView) {
    new BitmapWorkerTask(imageView).execute(url);
}

class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap> {
    private final WeakReference<ImageView> imageViewReference;

    public BitmapWorkerTask(ImageView imageView) {
        // Use a WeakReference to ensure the ImageView can be garbage collected
        imageViewReference = new WeakReference<ImageView>(imageView);
    }

    // Decode image in background.
    @Override
    protected Bitmap doInBackground(String... params) {
        return BitmapFactory.decodeStream(params[0].openConnection().getInputStream());
    }

    // Once complete, see if ImageView is still around and set bitmap.
    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (imageViewReference != null && bitmap != null) {
            final ImageView imageView = imageViewReference.get();
            if (imageView != null) {
                imageView.setImageBitmap(bitmap);
            }
        }
    }
} 
```

这一切都在上面的链接中描述。您应该真正阅读它以更好地理解 android 中的线程。

# ios - 如何在 RestKit 0.20 中接收整数值？

> ID：14267618
> 
> 赞同：0
> 
> 时间：2013-01-10T21:30:19.227
> 
> 标签：ios, mapping, restkit

我将对象休息为：

```
@interface VFEQuestionnaireRest : NSObject
    @property(copy ,nonatomic) NSNumber *iid;
    @property(copy, nonatomic)NSString *namePoll;
    @property(copy, nonatomic)NSSet *questions;
@end 
```

并将JSON作为：

```
 {"questionnaire":[
      {"id":4,"namePoll":"questionario4","questions":              
         {"id":13,"idQuestionnaire":4,"nameQuestion":"costo?",
            "questionType":{"id":2,"nameType":"WHOLE"}}}]} 
```

值“iid”始终为“0”，namePoll 具有正确的值。如何将 int 值从 JSON 映射到`NSNumber`objC？

-

```
RKObjectMapping *questionnaireMapping = [RKObjectMapping mappingForClass:[VFEQuestionnaireRest class]];
    [questionnaireMapping addAttributeMappingsFromDictionary:
     @{@"iid":@"id",
    @"namePoll":@"namePoll"
     }];
[questionnaireMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"questions" toKeyPath:@"questions"  withMapping:questionMapping]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T14:10:07.287

我相信您的映射不正确。它应该是源 -> 目标，而不是相反：

```
RKObjectMapping *questionnaireMapping = [RKObjectMapping mappingForClass:[VFEQuestionnaireRest class]];
[questionnaireMapping addAttributeMappingsFromDictionary:
   @{ @"id":@"iid",
   @"namePoll":@"namePoll" }]; 
```

Restkit 自动执行 int -> NSNumber 转换。

# algorithm - 超时随机算法

> ID：14267619
> 
> 赞同：4
> 
> 时间：2013-01-10T21:30:22.767
> 
> 标签：algorithm, random, benchmarking

我有一个随机递归回溯算法来生成数独谜题（见[这里](https://stackoverflow.com/questions/14147761/generating-minimal-irreducible-sudokus)）。它的平均工作速度足够快，但最坏情况下的运行时间慢得令人无法接受。这是 100 次试验的运行时间直方图（以毫秒为单位）（“更多”约为 200,000 毫秒！）：

![在此处输入图像描述](../Images/e1d2d8cb5a69bf5c1d92f54646d043b8.png)

*我想通过简单地在t* ms后将其超时并使用新的随机种子重新启动来改进算法。为了防止这种情况无限重复，我要么在*n*次尝试后停止，要么在每次尝试失败后增加*t 。*如果*t*远大于中位数，则很有可能在随后的尝试中获得更快的运行速度。

问题：

1.  如何调整不同处理器的超时时间*t ？*是否有一种快速、可靠的方法可以在每次运行之前对处理器性能进行基准测试？或者，我是否应该在多次运行中适应处理器，例如使用所有先前运行的平均运行时间？如果相关的话，我正在 Android 上运行它。
2.  是否有更好的策略来完全避免运行时分布中的长尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:36:21.923

既然你的算法是递归的，为什么不建立一个最大递归深度呢？如果特定的随机种子导致您根据经验确定的递归深度足够高，以至于您将击中长尾，则在该点中止。

通过视觉近似，看起来在 4500 毫秒后，您对给定种子的投资不会获得显着回报。重新运行该基准并跟踪递归深度，并查看该数字是多少。不过，我会运行 100 多个样本。

该解决方案与 CPU 速度无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:41:42.933

1.  是的，它被称为**[置信区间](http://en.wikipedia.org/wiki/Confidence_interval)**。通过在预处理中（或在运行中）多次运行算法，您可以用 x% 置信度（`x`参数在哪里）确定运行时间中位数所在的 *区间*
    。您可以通过以下方式减小区间大小减少`x`或增加算法运行的次数。

    当然，如果你不能真正运行算法本身，你可以尝试在某台机器上对其进行基准测试并找到置信区间（让它成为`I`），并创建一些`f(I,s)`给定**不同**算法时序的函数（它的时序是 s ) 在不同的机器 (M) 上，预测机器 M 的间隔应该是多少。
    `s`以类似的方式进行查找- 使用置信区间。

2.  您的方法似乎很好，我可能也会这样做 - 我将首先设置一个小因素，并在每次尝试失败后增加它。请注意，这在某种程度上类似于[TCP 协议中的拥塞控制](http://en.wikipedia.org/wiki/TCP_congestion_avoidance_algorithm)（来自网络领域），以查找网络上可接受的包传输速率。

# macos - 将输出图像向下移动 Gnuplot

> ID：14267620
> 
> 赞同：0
> 
> 时间：2013-01-10T21:30:22.290
> 
> 标签：macos, gnuplot, x11

我在 textedit 中输入此内容，稍后将其加载到 gnuplot 中。当我这样做时，图像会稍微偏离屏幕顶部，这意味着我看不到其中的一些。有没有办法将整个图像向下移动，或者在图像上开始降低 z 轴？

另外，我如何使我的观点或我的线条变黑？目前我的球体的线是红色的，点是蓝色的。

```
set pointsize 2
set tics
set border
unset key
set size ratio -1
set size square
unset xzeroaxis
unset yzeroaxis
unset zzeroaxis
# linetype linewidth 
set xrange[-1.2:1.2]
set yrange[-1.2:1.2]
set zrange[-1.2:1.2]
set view equal xyz
set xyplane at -1.2
set parametric
set isosamples 20
set hidden3d
set urange [0:2.0*pi]
set vrange [-pi/2:pi/2]
r=1.0;
# Parametric functions for the sphere
fx(v,u) = r*cos(v)*cos(u)
fy(v,u) = r*cos(v)*sin(u)
fz(v)   = r*sin(v)
splot fx(v,u),fy(v,u),fz(v),"mypoints" u 1:2:3 w p 3 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:06:34.807

我将尝试转换的东西，但要尝试进一步解释我的问题，只需看看这些图片。

第一个是我运行代码时得到的结果（现在我已经把所有东西都变黑了）。第二张是同一张图片，但经过旋转（只需单击、按住和移动鼠标）。正如您在旋转时看到的那样，图片不在屏幕上。我只是希望图片位于屏幕中央，我想不出为什么它不会。

另外为什么图像下方的 z 轴有 1 或 1.5？我也不想在那里。有没有办法在 x、y 和 z 轴上设置比例相等？设置正方形的东西已经为 x 和 y 完成了它，但是正如您所看到的，球体也被压扁了。

谢谢。

[http://tinypic.com/view.php?pic=k59gx&s=6](http://tinypic.com/view.php?pic=k59gx&s=6)

[http://tinypic.com/view.php?pic=2v9eo93&s=6](http://tinypic.com/view.php?pic=2v9eo93&s=6)

注意：由于缺少代表，我无法上传图片，但我认为这将是说明我的问题的最佳方式。链接显示了我正在谈论的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:56:06.747

运行你的脚本，省略对“mypoints”的引用，我得到了你想要的图，没有任何额外的 z 轴或顶部被切断。我正在使用 gnuplot v.4.4.3。你用的是什么版本？您是否尝试过没有绘制“mypoints”？里面可能有什么东西影响了剧情。此外，您可能想要探索坐标映射（在提示符下尝试“帮助映射”）以在球坐标中绘制数据文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:58:22.577

好的，所以基本上有很多问题需要解决，所以这里是：

1）不要将图片向下移动，从边框的z部分去掉小标签结束。这使图片更加中心化。

去做这个：`set ticslevel 0.0`

2) X11 中没有保持纵横比，所以看起来都被压扁了。这是在这里谈到的：

[http://sourceforge.net/tracker/index.php?func=detail&aid=3331162&group_id=2055&atid=102055](http://sourceforge.net/tracker/index.php?func=detail&aid=3331162&group_id=2055&atid=102055)

他们所说的解决方法是将 X11 输出的窗口大小设置为方形，以执行此操作：`set terminal x11 size 800,800`

3）注意，您现在不需要：（`set xyplane at -1.2`或您想要的任何 z 值），因为这是使用 set ticslevel 命令处理的。

所以现在我有了这个：

```
set pointsize 2
set tics nomirror
set ticslevel 0.0
set border
set view equal xyz
unset key
unset xzeroaxis
unset yzeroaxis
unset zzeroaxis
# linetype linewidth 
set xrange[-1.2:1.2]
set yrange[-1.2:1.2]
set zrange[-1.2:1.2]
set parametric
set isosamples 20
unset hidden3d
set urange [0:2.0*pi]
set vrange [-pi/2:pi/2]
r=1.0;
# Parametric functions for the sphere
fx(v,u) = r*cos(v)*cos(u)
fy(v,u) = r*cos(v)*sin(u)
fz(v)   = r*sin(v)
splot fx(v,u) w lines lc rgb "black",fy(v,u) w lines lc rgb "black",fz(v) w lines lc rgb "black","mypoints" u 1:2:3 w points lc rgb "red" p 2 
```

希望这对未来的人们有所帮助。

# java - Java 强制转换：如果未在要转换的类中声明，您可以强制转换为接口吗？

> ID：14267621
> 
> 赞同：3
> 
> 时间：2013-01-10T21:30:24.720
> 
> 标签：java, casting

我想这是不可能的，但我想知道：

您可以将符合特定接口方法（但不使用“实现接口”）的类强制转换为该接口吗？

任何解决方法？我想为某个类使用包装类，但无法访问它的构造函数，也无法修改需要该类的接收代码。

-edit- 抱歉，我不清楚界面。实际上，两条思路合并为一个问题的那些。我应该问一下关于将一个类转换为另一个类的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:33:10.093

简短的回答是否定的。系统怎么可能知道？这充其量只是巧合。

现在就解决方​​法而言，反射是您的朋友。 [甲骨文教程](http://docs.oracle.com/javase/tutorial/reflect/class/classNew.html)

示例代码：

```
import java.lang.reflect.Constructor;
import java.lang.reflect.Field;
import java.lang.reflect.Method;
import java.lang.reflect.Member;
import static java.lang.System.out;

enum ClassMember { CONSTRUCTOR, FIELD, METHOD, CLASS, ALL }

public class ClassSpy {
    public static void main(String... args) {
    try {
        Class<?> c = Class.forName(args[0]);
        out.format("Class:%n  %s%n%n", c.getCanonicalName());

        Package p = c.getPackage();
        out.format("Package:%n  %s%n%n",
               (p != null ? p.getName() : "-- No Package --"));

        for (int i = 1; i < args.length; i++) {
        switch (ClassMember.valueOf(args[i])) {
        case CONSTRUCTOR:
            printMembers(c.getConstructors(), "Constructor");
            break;
        case FIELD:
            printMembers(c.getFields(), "Fields");
            break;
        case METHOD:
            printMembers(c.getMethods(), "Methods");
            break;
        case CLASS:
            printClasses(c);
            break;
        case ALL:
            printMembers(c.getConstructors(), "Constuctors");
            printMembers(c.getFields(), "Fields");
            printMembers(c.getMethods(), "Methods");
            printClasses(c);
            break;
        default:
            assert false;
        }
        }

        // production code should handle these exceptions more gracefully
    } catch (ClassNotFoundException x) {
        x.printStackTrace();
    }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:35:19.380

不，你不能，因为其他海报已经回答了。

对于（丑陋的）解决方法：您可以使用`java.lang.Reflection`, 访问任何构造函数，甚至是私有构造函数。

通过反射通过私有无参数构造函数实例化对象的示例：

```
java.lang.reflect.Constructor[] c = clazz.getDeclaredConstructors();
c[0].setAccessible(true);
Object instance = c[0].newInstance(new Object[] {}); 
```

但是请注意，在我的生活中，曾经看到一个配置为（通过 SecurityManager）的 VM，使得通过反射访问私有字段不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:41:29.947

不，但您可以使用适配器设计模式解决此问题。创建一个实现接口的类，并将相关类的实例作为构造函数参数。然后将所有方法委托给这个实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T21:36:04.443

您不能将对象引用转换为不在对象继承链中的类，也不能转换为对象未实现的接口。发生运行时检查以防止这种情况发生。

（当涉及到转换引用数组时，它变得更加严格。）

# verilog - Verilog中的键盘界面设计

> ID：14267622
> 
> 赞同：1
> 
> 时间：2013-01-10T21:30:26.997
> 
> 标签：verilog

我是 Verilog 的新手，我正在尝试创建我的第一个程序，当按下键盘上的键时应该显示一些东西。我想使用 Verilog 课程手册中的示例代码，但我在引脚分配方面遇到了一些问题（我使用的是 Altera 的 DE2-70）。

1.  为什么我有`input ReadKB;`，而模块定义中没有这样的东西？
2.  我知道哪些引脚应该分配给 KBclk 和 KBdata。(`PS2_KBCLK PIN_F24 PS/2 Clock`和 ( `PS2_KBDAT PIN_E24 PS/2 Data`) ResetKB 怎么样？

在教科书中没有解释，我真的很好奇。

代码：

```
module KeyboardInterface(KBclk, KBdata, ResetKB, SYNclk, ScanRdy, ScanCode, KeyReleased);
input KBclk;
input KBdata; 
input ResetKB;
input ReadKB;
input SYNclk;
output ScanRdy;
output ScanCode; 
output KeyReleased;

    //Generate an internal synchronized clock
    reg Clock;
    always @(posedge SYNclk) Clock = KBclk;

    reg[3:0] BitCount;
    reg StartBitDetected, ScanRdy;
    reg[7:0] ScanCode;

    //Count the number of serial bits and collect data into ScanCode
    always @(posedge Clock) begin
        if(ResetKB) begin
            BitCount=0; StartBitDetected =0;
        end else begin
            if(KBdata == 0 && StartBitDetected == 0) begin
                StartBitDetected=1;
                ScanRdy = 0;
            end else if (StartBitDetected) begin
                if(BitCount < 8) begin
                    BitCount = BitCount + 1;
                    ScanCode = {KBdata, ScanCode[7:1]};
                end else begin
                    StartBitDetected = 0;
                    BitCount = 0;
                    ScanRdy = 1;
                end
            end
        end
    end

    reg [1:0] CompletionState;
    wire KeyReleased;

        //keep track of the state of Scan Codes outputted
    always @(posedge SYNclk) begin
        if(ResetKB) CompletionState = 0;

        else case(CompletionState)
            0: if(ScanCode == 8'h70 && ScanRdy == 1) CompletionState =1;
                else CompletionState =0;
            1:  if(ScanRdy == 1) CompletionState =1;
                else CompletionState =2;
            2: if(ScanRdy == 0) CompletionState = 2;
                else CompletionState = 0;
            3: CompletionState = 0;
        endcase
    end

    assign KeyReleased = CompletionState == 3 ? 1 : 0; 

endmodule 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:21:41.163

1.  这看起来像是一个错字，只需将缺少的线添加到模块定义中即可。
2.  如果这就是您所要求的，那么您的键盘可能实际上并没有“重置”。如果有的话，我会把它绑在 Altera 上的某个按钮上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:43:24.320

它只是一个高电平复位信号。您可以将其与按钮连接，然后您可以使用按钮重置 reg 信号、bitcount 和 startbitdetect。

但是你应该注意的一件重要的事情是 reg 信号不能在 always 部分中使用“=”，它应该是“<=”。这就是阻塞赋值和非阻塞赋值的区别，你应该多加注意。祝你好运。：-）

# javascript - 如何在数字分页中选择脚？辐射网格

> ID：14267623
> 
> 赞同：1
> 
> 时间：2013-01-10T21:30:32.080
> 
> 标签：javascript, jquery, .net, footer, radgrid

我目前有一个 js 函数，仅当网格上有更改时才将 onchange 绑定到 onbeforeunload 或确认框。

我正在尝试选择页脚分页锚点，以便它不会触发确认或 onbeforeunload。无论网格上是否有变化，用户都应该选择数字分页。

锚点上没有 ID 或类名，所以我无法访问它。

提前致谢。

RadGrid 属性：

```
 <telerik:RadGrid 
             runat="server" 
             ID="DataGridFooItems" 
             AllowSorting="true" 
             AutoGenerateColumns="false" 
             EnableViewState="True" 
             GridLines="Vertical" 
             AllowPaging="True" 
             PagerStyle-Mode="NumericPages">

             <MasterTableView 
             AllowPaging="true" 
             DataKeyNames="foopersonID,fooItemID" 
             AllowAutomaticDeletes="true" 
             CommandItemDisplay="None" 
             NoMasterRecordsText="" > 
```

这是 .aspx 在下面生成的：

```
 <TFOOT>
<TR class=rgPager>
<TD colSpan=20>
<TABLE style="WIDTH: 100%" border=0 cellSpacing=0>
<TBODY>
<TR>
<TD class="rgPagerCell NumericPages">
<DIV class="rgWrap rgNumPart">
<A class=rgCurrentPage onclick="returnfalse;"href="javascript:__doPostBack('ctl00$ph$FOO$rgItems$ctl00$ctl03$ctl01$ctl02','')"><SPAN>1</SPAN></A><A 
href="javascript:__doPostBack('ctl00$ph$FOO$rgItems$ctl00$ctl03$ctl01$ctl04','')"><SPAN>2</SPAN></A><A
href="javascript:__doPostBack('ctl00$ph$FOO$rgItems$ctl00$ctl03$ctl01$ctl06','')"><SPAN>3</SPAN></A><A
href="javascript:__doPostBack('ctl00$ph$FOO$rgItems$ctl00$ctl03$ctl01$ctl08','')"><SPAN>4</SPAN></A><A
href="javascript:__doPostBack('ctl00$ph$FOO$rgItems$ctl00$ctl03$ctl01$ctl10','')"><SPAN>5</SPAN></A><A
href="javascript:__doPostBack('ctl00$ph$FOO$rgItems$ctl00$ctl03$ctl01$ctl12','')"><SPAN>6</SPAN></A><A
href="javascript:__doPostBack('ctl00$ph$FOO$rgItems$ctl00$ctl03$ctl01$ctl14','')"><SPAN>7</SPAN></A><A
href="javascript:__doPostBack('ctl00$ph$FOO$rgItems$ctl00$ctl03$ctl01$ctl16','')"><SPAN>8</SPAN></A><A
href="javascript:__doPostBack('ctl00$ph$FOO$rgItems$ctl00$ctl03$ctl01$ctl18','')"><SPAN>9</SPAN></A><A
href="javascript:__doPostBack('ctl00$ph$FOO$rgItems$ctl00$ctl03$ctl01$ctl20','')"><SPAN>10</SPAN></A><A
href="javascript:__doPostBack('ctl00$ph$FOO$rgItems$ctl00$ctl03$ctl01$ctl22','')"><SPAN>...</SPAN></A> 
</DIV></TD></TR></TBODY></TABLE></TD></TR></TFOOT> 
```

**更新：回答！**

找到了！对类似的 Telerik 解决方案进行了一些研究和调整。

我写了这个：

1.  我声明了一个选择一个类的变量。
2.  然后我在对象中搜索所有锚点。
3.  之后，如果锚不在当前页面上（不应该有点击事件，因为用户已经在页面上），我使用了一个循环。如果锚的 href 为 __doPostback。
4.  然后我将属性 onclick 事件设置为确认。这一步包装了 __doPostback。

来源：[http ://www.telerik.com/community/forums/aspnet-ajax/grid/radgrid-paging---pageindexchanged-event-issue.aspx](http://www.telerik.com/community/forums/aspnet-ajax/grid/radgrid-paging---pageindexchanged-event-issue.aspx)

```
function preventPromptOnFooter() {

            var pagerCell = $('[class="rgPagerCell NumericPages"]')
            var anchors = $(pagerCell).find('a');
            for (var i = 0; i < anchors.length; i++) {
                if (anchors[i].className != "rgCurrentPage" && anchors[i].href.indexOf("javascript:__doPostBack") > -1) {
                    var clickScript = anchors[i].attributes["onclick"].value;
                    anchors[i].onclick = disableOnbeforeUnloadForFooter;
                }
            }

            function disableOnbeforeUnloadForFooter() {
                window.onbeforeunload = null;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:39:53.070

找到了！对类似的 Telerik 解决方案进行了一些研究和调整。

我写了这个：

1.  我声明了一个选择一个类的变量。
2.  然后我在对象中搜索所有锚点。锚
3.  之后，如果锚点不在当前页面上（不应该有点击事件，因为用户已经在页面上），我使用循环锚点。&& 如果锚点的 href 为 __doPostback。
    1.  如果步骤 (3.) 为真，它将属性 onclick 事件设置为确认。这一步包装了 __doPostback。

来源： [http ://www.telerik.com/community/forums/aspnet-ajax/grid/radgrid-paging---pageindexchanged-event-issue.aspx](http://www.telerik.com/community/forums/aspnet-ajax/grid/radgrid-paging---pageindexchanged-event-issue.aspx)

```
function preventPromptOnFooter() {

            var pagerCell = $('[class="rgPagerCell NumericPages"]')
            var anchors = $(pagerCell).find('a');
            for (var i = 0; i < anchors.length; i++) {
                if (anchors[i].className != "rgCurrentPage" && anchors[i].href.indexOf("javascript:__doPostBack") > -1) {
                    var clickScript = anchors[i].attributes["onclick"].value;
                    anchors[i].onclick = disableOnbeforeUnloadForFooter;
                }
            }

            function disableOnbeforeUnloadForFooter() {
                window.onbeforeunload = null;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:52:41.677

你可以试试：

```
var pageLinks = document.querySelectorAll(".rgWrap.rgNumPart a"); 
```

它适用于 Chrome、Firefox 3.5+、ie8+、Opera 10 和 Safari 3.2+。如果您必须支持较旧的浏览器，您可以尝试通过类名获取父 div，然后使用 getElementsByTagName('A') 的组合。或者使用像[jQuery](http://jquery.com/)这样的库来实现跨浏览器的高级 CSS 选择器。

# c++ - 如何找出哪个用户启动了作为系统运行的进程

> ID：14267627
> 
> 赞同：0
> 
> 时间：2013-01-10T21:30:53.420
> 
> 标签：c++, windows

我创建了一个 Windows 安装程序，它在安装和卸载过程中运行自定义 exe。在卸载期间，我需要找出启​​动卸载操作的用户的用户名。我当然尝试了 GetUserNameEx()，但是当从卸载程序运行时，它只返回系统名称，而不是调用该操作的用户。

我认为该信息是可用的，因为使用 ShGetFolderPath() 能够获取特定于用户的路径。

使用 OpenProcessToken() 并检索 TokenUser 和 TokenSource 都只返回“系统”用户的 SID。

# c# - 动态添加超链接或按钮以打开本地文件？

> ID：14267631
> 
> 赞同：1
> 
> 时间：2013-01-10T21:31:03.473
> 
> 标签：c#, asp.net

我正在尝试制作一个按钮或超链接来打开本地 html 文件。我已经尝试了一切，但没有一个不起作用。曾尝试使用 LinkBut​​ton、Button 和 Hyperlink。下面是我尝试过的代码。

```
byte[] buffer = (byte[])data.GetValue(i);
File.WriteAllBytes(@"C:\test.html", buffer);
//LinkButton sysInfo = new LinkButton();
//sysInfo.Text = "Please click to see more info";
//sysInfo.CommandName = "ID";
//sysInfo.CommandArgument = id.ToString();
//sysInfo.Command += new CommandEventHandler(sysInfo_Click);
//sysInfo.Click += new EventHandler(this.sysInfo_Click);

HyperLink link = new HyperLink();

link.Target = "_blank";
link.Text = "Please click to see more information";
link.Attributes.Add("onclick", "window.open('" + ResolveUrl("file:///c:/test.html") + "');");
link.NavigateUrl = ResolveUrl("file:///c:/test.html");
fieldCl.Controls.Add(link);
//sysInfo.Click += new EventHandler(sysInfo_Click);
//sysInfo.CommandName = "ID";
//sysInfo.CommandArgument = id.ToString();
//sysInfo.Command += new CommandEventHandler(sysInfo_Click); 
```

我试图做的是在 sql server 中有 html 字节并检索字节以在 C:local 上创建文件。然后我想在新窗口上打开本地 html 文件。

检索字节并创建文件似乎没问题。但是当我使用超链接时，它什么也没做。我听说它不允许我打开本地文件。所以我尝试使用按钮，但是当我使用按钮并创建 Click 事件时，它甚至没有进入 Click 事件。

如果无论如何只打开文件而不保存，那就太好了，但如果不能，那也没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:34:44.383

我只是把你的链接变成一个字符串。它只需要：`c:\\test.html`

一旦你把你的链接变成一个字符串，我会尝试：`System.Diagnostics.Process.Start(link);`

如果这不起作用，我会在您的代码中放置一个中断并获取字符串的内容 - 将其粘贴到您的地址栏中，看看会发生什么。

# javascript - SEO ajax 和链接

> ID：14267636
> 
> 赞同：0
> 
> 时间：2013-01-10T21:31:22.843
> 
> 标签：javascript, html, ajax, seo, web-crawler

我一直在考虑 SEO、ajax 和链接。在查看来自不同网页的代码以及它们似乎如何处理此问题时，我感到困惑。

我一直确保进行 ajax 调用的函数存在静态上下文。我没有将 javascript 内联到我的标记中，但我宁愿使用 id 来调用具有外部 js 文件的函数。我自己的一个典型例子如下：

```
<a href="/resource?take=10" id="next-ten">Link</a> 
```

然后用点击功能连接 id。

但我在一些主要页面上看到的是它们使用如下内容：

```
<a href="#" onclick="ajaxCall();">Link</a>
<a href="javascript:void(0)" onclick="ajaxCall()">Link</a> 
```

像上面那样使用 javascript inline 有什么好处吗？没看懂，好像各大网站都在用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:35:31.147

第二种方法不好，因为不使用 javascript 的爬虫将无法使用第二种方法。

**如果不使用 javascript，第一种方法仍然有效。**

只要您的链接名称正确且符合上下文，并且在不启用 javascript 的情况下表现正确，您应该 100% 没问题。

并不是说某些爬虫确实使用 javascript，所以即使第二种变体很差，它有时仍然可以工作。

tl；博士：如果它在没有 javascript 的情况下工作，那你很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:13:44.000

**在 HTML 部分这样写：**

```
<a href="/resource?take=10" onclick="return ajaxCall()">Link</a> 
```

**在 JavaScript 部分，这样写：**

```
function ajaxCall() {
    // AJAX functionalities will go here
    return false;
} 
```

搜索引擎将索引 url，因为在爬虫获取页面期间不会执行 JavaScript 代码。但是当用户使用浏览器浏览这个页面时，JavaScript 代码会被执行（假设用户没有禁用 JavaScript），并且该`ajaxCall`函数会被调用。

> **注意**：当函数返回时`false`，用户将不会导航到`href`部分中定义的 URL。但是如果它返回`true`or `void`，那么用户将被导航到定义的位置。

# java - 写入数据库会杀死应用程序

> ID：14267638
> 
> 赞同：0
> 
> 时间：2013-01-10T21:31:23.820
> 
> 标签：java, android, sqlite

我正在尝试从我的应用程序中的三个 EditText 框中获取文本输入并将它们存储到数据库中。我按照教程创建数据库，但不确定如何查看它是否有效。我知道当我点击提交按钮发布到数据库时，我的应用程序突然根据 android 停止。

```
public void insertData(int name, int location, int kill){
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues cv = new ContentValues();
    db.open();
    cv.put(colDeptID, 1);
    cv.put(colDeptName, "Sales");
    db.insert(deptTable, colDeptID, cv);
    cv.put(colDeptID, 2);
    cv.put(colDeptName, "IT");
    db.insert(deptTable, colDeptID, cv);
    db.close();                   

} 
```

这是我在子例程中为按钮调用的子例程，以及为数据库中的新变量分配名称、位置和 kill。这是我的按钮按下子程序：

```
public void postResults(View button){
    findViewById(R.id.hunters_name);
    findViewById(R.id.location);
    findViewById(R.id.results);
    int kill = R.id.results;
    int location = R.id.location;
    int name = R.id.hunters_name;
    DatabaseHelper dbHelp = new DatabaseHelper(null);
    dbHelp.insertData(name, location, kill);

} 
```

我不知道为什么我的应用程序被杀死了。

日志猫：

```
FATAL EXCEPTION: main
01-10 21:15:50.568: E/AndroidRuntime(973): java.lang.IllegalStateException: Could not execute method of the activity
01-10 21:15:50.568: E/AndroidRuntime(973):  at android.view.View$1.onClick(View.java:3597)
01-10 21:15:50.568: E/AndroidRuntime(973):  at android.view.View.performClick(View.java:4202)
01-10 21:15:50.568: E/AndroidRuntime(973):  at android.view.View$PerformClick.run(View.java:17340)
01-10 21:15:50.568: E/AndroidRuntime(973):  at android.os.Handler.handleCallback(Handler.java:725)
01-10 21:15:50.568: E/AndroidRuntime(973):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-10 21:15:50.568: E/AndroidRuntime(973):  at android.os.Looper.loop(Looper.java:137)
01-10 21:15:50.568: E/AndroidRuntime(973):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-10 21:15:50.568: E/AndroidRuntime(973):  at java.lang.reflect.Method.invokeNative(Native Method)
01-10 21:15:50.568: E/AndroidRuntime(973):  at java.lang.reflect.Method.invoke(Method.java:511)
01-10 21:15:50.568: E/AndroidRuntime(973):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-10 21:15:50.568: E/AndroidRuntime(973):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-10 21:15:50.568: E/AndroidRuntime(973):  at dalvik.system.NativeStart.main(Native Method)
01-10 21:15:50.568: E/AndroidRuntime(973): Caused by: java.lang.reflect.InvocationTargetException
01-10 21:15:50.568: E/AndroidRuntime(973):  at java.lang.reflect.Method.invokeNative(Native Method)
01-10 21:15:50.568: E/AndroidRuntime(973):  at java.lang.reflect.Method.invoke(Method.java:511)
01-10 21:15:50.568: E/AndroidRuntime(973):  at android.view.View$1.onClick(View.java:3592)
01-10 21:15:50.568: E/AndroidRuntime(973):  ... 11 more
01-10 21:15:50.568: E/AndroidRuntime(973): Caused by: java.lang.NullPointerException
01-10 21:15:50.568: E/AndroidRuntime(973):  at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
01-10 21:15:50.568: E/AndroidRuntime(973):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
01-10 21:15:50.568: E/AndroidRuntime(973):  at com.example.test.DatabaseHelper.insertData(DatabaseHelper.java:77)
01-10 21:15:50.568: E/AndroidRuntime(973):  at com.example.test.MainActivity.postResults(MainActivity.java:77)
01-10 21:15:50.568: E/AndroidRuntime(973):  ... 14 more 
```

我看到 NullPointerException，但我不明白如何修复它。

构造函数：public DatabaseHelper(Context context) { super(context, dbName, null,33); }

onCreate: @Override public void onCreate(SQLiteDatabase db) { // TODO 自动生成的方法存根

```
 db.execSQL("CREATE TABLE "+deptTable+" ("+colDeptID+ " INTEGER PRIMARY KEY , "+
    colDeptName+ " TEXT)");

  db.execSQL("CREATE TABLE "+employeeTable+" ("+colID+" INTEGER PRIMARY KEY AUTOINCREMENT, "+
        colName+" TEXT, "+colAge+" Integer, "+colDept+" INTEGER NOT NULL ,FOREIGN KEY ("+colDept+") REFERENCES"+deptTable+" ("+colDeptID+"));");

  db.execSQL("CREATE TRIGGER fk_empdept_deptid " +
    " BEFORE INSERT "+
    " ON "+employeeTable+

    " FOR EACH ROW BEGIN"+
    " SELECT CASE WHEN ((SELECT "+colDeptID+" FROM "+deptTable+"WHERE "+colDeptID+"=new."+colDept+" ) IS NULL)"+
    " THEN RAISE (ABORT,'Foreign Key Violation') END;"+
    "  END;");

  db.execSQL("CREATE VIEW "+viewEmps+
    " AS SELECT "+employeeTable+"."+colID+" AS _id,"+
    " "+employeeTable+"."+colName+","+
    " "+employeeTable+"."+colAge+","+
    " "+deptTable+"."+colDeptName+""+
    " FROM "+employeeTable+" JOIN "+deptTable+
    " ON "+employeeTable+"."+colDept+" ="+deptTable+"."+colDeptID
    );
  //Inserts pre-defined departments
 // InsertDepts(db);  
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:38:34.890

检查您的 Logcat 输出。您可能会在那里看到一个 NULLPointer 异常。

$>adb logcat（是您查看日志的方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:38:44.477

你的方法 postResult 应该做什么？因为

```
findViewById(R.id.hunters_name);
findViewById(R.id.location);
findViewById(R.id.results); 
```

没做什么

和：

```
int kill = R.id.results;
int location = R.id.location;
int name = R.id.hunters_name; 
```

给你一些类似指向这个视图的指针。

如果在您的 xml 中，您有：

```
 <EditText android:id="@+id/foobar" 
```

然后会自动在 R.id 中创建指向此 EditText 的指针。

```
R.id.foobar 
```

只给你数值（识别正确的资源 - 你的editText）

要获得此资源，您应该使用：

```
View v = findViewById(R.id.foobar); 
```

如果是 EditText，您可以使用演员表：

```
EditText et = (EditText) findViewById(R.id.foobar) 
```

如果在此 editText 中您有价值并想要读取此值：

```
int kill = et.getText(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T22:23:43.793

可能您需要将上下文作为 DatabaseHelper 的参数。改变：

```
DatabaseHelper dbHelp = new DatabaseHelper(null); 
```

为了：

```
DatabaseHelper dbHelp = new DatabaseHelper(getApplicationContext()); 
```

如果没有帮助，请显示您从 DatabaseHelper 类中使用的构造函数、onCreate 方法和创建语句

# php - IF Else 让我失望了

> ID：14267639
> 
> 赞同：0
> 
> 时间：2013-01-10T21:31:27.593
> 
> 标签：php, forms, if-statement

我不断收到错误消息，我必须在代码中正确输入两个新密码。那不是我想要的。如果密码字段已填写，则应检查密码是否匹配并符合要求。否则，它应该更新配置文件。但它没有这样做。IT 仍会检查密码字段。你能告诉我我的代码做错了什么吗？

```
 <?php
    if ($post == "yes") {

    $uppercase = preg_match('@[A-Z]@', $password);
    $lowercase = preg_match('@[a-z]@', $password);
    $number    = preg_match('@[0-9]@', $password);

    if (isset($password) && ($password != $password2 || !$uppercase || !$lowercase ||    !$number || strlen($password) < 8)) {
    echo "<table class=tablenews><tr><td>There is an error with your passwords. Either they do not match, or your new password does not contain 8 characters, a number, a lower and an upper case letter. Go back and retry again. </td></tr></table>";

    }

    else {
     $password = generateHash($password);

    $result = mysql_query("UPDATE users SET avatar='" . $avatar . "' WHERE id='". $_SESSION['user_id'] . "'") 
    or die(mysql_error());  
    $result = mysql_query("UPDATE users SET u_signature='" . $signature . "' WHERE id='".   $_SESSION['user_id'] . "'") 
     or die(mysql_error()); 
    $result = mysql_query("UPDATE users SET u_bio='" . $bio . "' WHERE id='".    $_SESSION['user_id'] . "'") 
    or die(mysql_error()); 
    $result = mysql_query("UPDATE users SET u_desc='" . $desc . "' WHERE id='". $_SESSION['user_id'] . "'") 
    or die(mysql_error()); 
    $result = mysql_query("UPDATE users SET u_intro='" . $intro . "' WHERE id='".     $_SESSION['user_id'] . "'") 
    or die(mysql_error()); 
        $result = mysql_query("UPDATE users SET password='" . $password . "' WHERE id='". $_SESSION['user_id'] . "'") 
or die(mysql_error()); 
printf('<script>window.location = "http://www.sw-bfs.com/index.php?siteid=profileedit"</script>');
}

    if (!isset($password)) {
$result = mysql_query("UPDATE users SET avatar='" . $avatar . "' WHERE id='". $_SESSION['user_id'] . "'") 
or die(mysql_error());  
$result = mysql_query("UPDATE users SET u_signature='" . $signature . "' WHERE id='". $_SESSION['user_id'] . "'") 
or die(mysql_error()); 
$result = mysql_query("UPDATE users SET u_bio='" . $bio . "' WHERE id='". $_SESSION['user_id'] . "'") 
or die(mysql_error()); 
$result = mysql_query("UPDATE users SET u_desc='" . $desc . "' WHERE id='". $_SESSION['user_id'] . "'") 
or die(mysql_error()); 
$result = mysql_query("UPDATE users SET u_intro='" . $intro . "' WHERE id='". $_SESSION['user_id'] . "'") 
or die(mysql_error()); 

    printf('<script>window.location = "http://www.sw-bfs.com/index.php?siteid=profileedit"</script>');

}

}

else {
?>

<table class="tablenews">
<tr><th>Edit your Profile</th></tr>

<?php
$userfinalid = $_SESSION['user_id'];
$prAvatar = get_user_data($userfinalid, avatar);
$prSignature = get_user_data($userfinalid, signature);
$prBio = get_user_data($userfinalid, bio);
$prDesc = get_user_data($userfinalid, desc);
$prIntro = get_user_data($userfinalid, intro);
?>

<br><tr><td>
<form method="post" action="<?php echo $thispage . "?siteid=profileedit"; ?>&proc=New&post=yes&<?php echo $pagevars; ?>">

<?php

echo '<label for="avatar" class=customlabelname>Avatar Link:</label><br><input type="text" class=customlabel name="avatar" value="' . $prAvatar .'"><br>';
echo '<label for="bio" class=customlabelname>User Bio:</label><br><textarea rows="10" cols="40" class=customlabel name="bio">' . $prBio .'</textarea><br>';
echo '<label for="desc" class=customlabelname>User Description:</label><br><textarea rows="10" cols="40" class=customlabel name="desc">' . $prDesc .'</textarea><br>';
echo '<label for="intro" class=customlabelname>User PM Intro:</label><br><textarea rows="10" cols="40" class=customlabel name="intro">' . $prIntro .'</textarea><br>';
echo '<label for="signature" class=customlabelname>User Signature:</label><br><textarea rows="10" cols="40" class=customlabel name="signature">' . $prSignature .'</textarea><br>';
echo '<label for="password" class=customlabelname>New Password(Leave Blank if it will be the same):</label><input type=password rows="10" cols="40" class=customlabel name="password"></textarea><br>';
echo '<label for="password2" class=customlabelname>ReType Password:</label><input type=password rows="10" cols="40" class=customlabel name="password2"></textarea><br>';
echo '<input type=submit value="submit" class=button2>';
?>

</td>
</tr>
</table>
<?php
}
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:35:02.167

```
if (isset($_POST['password']) ...) {
    // ... display error
} 
```

这意味着*如果该`password`键确实存在于`$_POST`数组中，则显示错误*。我认为您的意思是*如果数组**中不**存在`password`密钥**`$_POST`*****，则显示错误。`!`您应该通过在 if之前放置 a 来反转 if ：**

 **```
if (!isset(...) ...) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:55:10.700

这是否完成了您想要做的事情：

```
if(isset($password)) {
    if ($password != $password2 || !$uppercase || !$lowercase || !$number || strlen($password) < 8) {
        error_log('error');
    echo "<table class=tablenews><tr><td>There is an error with your passwords. Either they do not match, or your new password does not contain 8 characters, a number, a lower and an upper case letter. Go back and retry again. </td></tr></table>";

    } else {
        $password = generateHash($password);

        $result = mysql_query("UPDATE users SET avatar='" . $avatar . "' WHERE id='". $_SESSION['user_id'] . "'")
        or die(mysql_error());
        $result = mysql_query("UPDATE users SET u_signature='" . $signature . "' WHERE id='".   $_SESSION['user_id'] . "'")
         or die(mysql_error());
        $result = mysql_query("UPDATE users SET u_bio='" . $bio . "' WHERE id='".    $_SESSION['user_id'] . "'")
        or die(mysql_error());
        $result = mysql_query("UPDATE users SET u_desc='" . $desc . "' WHERE id='". $_SESSION['user_id'] . "'")
        or die(mysql_error());
        $result = mysql_query("UPDATE users SET u_intro='" . $intro . "' WHERE id='".     $_SESSION['user_id'] . "'")
        or die(mysql_error());
            $result = mysql_query("UPDATE users SET password='" . $password . "' WHERE id='". $_SESSION['user_id'] . "'")
        or die(mysql_error());
        printf('<script>window.location = "http://www.sw-bfs.com/index.php?siteid=profileedit"</script>');
    }
} 
```

将其余代码保持不变，只需替换第一个 if/else。

您的代码格式可以使用一些清理，您应该真正压缩 mysql 查询。**

# android - 如何在不扩展 TabActivity 的情况下显示选项卡视图

> ID：14267644
> 
> 赞同：0
> 
> 时间：2013-01-10T21:31:35.277
> 
> 标签：android, tabs, android-tabhost, tabactivity

我正在尝试使用 TabHost 小部件。我没有意识到 TabActivity 已被弃用。当我运行我的活动时，我无法在屏幕上实际显示我的 TabHost。目前我的 XML 文件包含以下内容：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </LinearLayout>
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

我的 MainActivity.java 包含：

```
public class MainActivity extends Activity {

TabHost myTabBar;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
} 
```

如何让 TabHost 出现在屏幕上？每次我在谷歌上搜索 TabHost 时，所有教程都涉及扩展 TabActivity！

谢谢。

编辑：做这样的事情时我走在正确的轨道上吗？

```
myTabBar = (TabHost)findViewById(android.R.id.tabhost);
    myTabBar.setup(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:04:10.333

选项卡中的活动已被弃用，Google 同意这样做是个坏主意，您必须考虑使用视图作为选项卡的内容，[这里](https://github.com/commonsguy/cw-android/tree/master/Fancy/DynamicTab)是 CommonsWare 书中的一个示例，您可以找到有用的资源。

# java - 发送包含 JAXB 元素的对象时出现 java.io.NotSerializableException

> ID：14267646
> 
> 赞同：2
> 
> 时间：2013-01-10T21:31:35.720
> 
> 标签：java, apache, jaxb, queue, activemq

通过 ActiveMQ 将对象发送到队列时，我遇到了问题。我发送的对象是一个 BrokerRequest，它包含一个 UUID、一个优先级 (1,2,3) 和一个作为 JAXB 对象的 DocumentType。

这是我正在使用的代码块：

```
DocumentType jaxbDoc = getJaxbFromFile("/home/dev/document.xml");
BrokerRequest brokerRequest = new BrokerRequest(UUID.randomUUID(), 1, jaxbDoc);
    ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(ActiveMQConnection.DEFAULT_BROKER_URL);
            Connection connection = connectionFactory.createConnection();       
            connection.start();
            Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
            Destination destination = session.createQueue(topic);
            MessageProducer producer = session.createProducer(destination);
            producer.setDeliveryMode(DeliveryMode.PERSISTENT);
            ObjectMessage objectMessage = session.createObjectMessage(brokerRequest);
            producer.send(objectMessage);
            connection.close(); 
```

方法“getJaxbFromFile”接收路径，其中我有一个表示此 Jaxb 类型的 xml 文档，我在该方法中所做的是将 xml 解组到 Jaxb DocumentType 以将其包含在我的 BrokerRequest 对象中。

但是每当我尝试将 objectMessage 发送到代理时，我都会收到 notSerializable 异常，但是 JaxB 中涉及的所有元素都是可序列化的，这就是为什么我不明白为什么会收到此错误。

```
Exception in thread "main" java.lang.RuntimeException: jaxb.mapped.elements.xsd.commons.MonetaryTotalType
    at org.apache.activemq.command.ActiveMQObjectMessage.storeContent(ActiveMQObjectMessage.java:111)
    at org.apache.activemq.command.ActiveMQObjectMessage.setObject(ActiveMQObjectMessage.java:162)
    at org.apache.activemq.ActiveMQSession.createObjectMessage(ActiveMQSession.java:381)
    at efact.alfa1lab.test.commons.MessageUtils.putMessageOnBroker(MessageUtils.java:184)
    at test.commons.MessageUtils.main(MessageUtils.java:97)
Caused by: java.io.NotSerializableException: jaxb.mapped.elements.xsd.commons.MonetaryTotalType
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
    at org.apache.activemq.command.ActiveMQObjectMessage.storeContent(ActiveMQObjectMessage.java:105) 
```

如果有人可以帮助我，我将非常感激，如果有人能给我关于这个问题的线索，我将不胜感激。

============================== MonetaryType 的代码如下：

```
import javax.xml.bind.annotation.XmlAccessType;
import java.io.Serializable;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;
import oasis.names.specification.ubl.schema.xsd.commonbasiccomponents_2.AllowanceTotalAmountType;
import oasis.names.specification.ubl.schema.xsd.commonbasiccomponents_2.ChargeTotalAmountType;
import oasis.names.specification.ubl.schema.xsd.commonbasiccomponents_2.LineExtensionAmountType;
import oasis.names.specification.ubl.schema.xsd.commonbasiccomponents_2.PayableAmountType;
import oasis.names.specification.ubl.schema.xsd.commonbasiccomponents_2.PayableRoundingAmountType;
import oasis.names.specification.ubl.schema.xsd.commonbasiccomponents_2.PrepaidAmountType;
import oasis.names.specification.ubl.schema.xsd.commonbasiccomponents_2.TaxExclusiveAmountType;
import oasis.names.specification.ubl.schema.xsd.commonbasiccomponents_2.TaxInclusiveAmountType;

/**
 * 
 *         
 * <pre>
 * &lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;ccts:Component xmlns:ccts="urn:un:unece:uncefact:documentation:2" xmlns="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2" xmlns:udt="urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;&lt;ccts:ComponentType&gt;ABIE&lt;/ccts:ComponentType&gt;&lt;ccts:DictionaryEntryName&gt;Monetary Total. Details&lt;/ccts:DictionaryEntryName&gt;&lt;ccts:Definition&gt;Information about Monetary Totals.&lt;/ccts:Definition&gt;&lt;ccts:ObjectClass&gt;Monetary Total&lt;/ccts:ObjectClass&gt;
 *         &lt;/ccts:Component&gt;
 * </pre>
 * 
 *       
 * 
 * <p>Java class for MonetaryTotalType complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="MonetaryTotalType">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element ref="{urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2}LineExtensionAmount" minOccurs="0"/>
 *         &lt;element ref="{urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2}TaxExclusiveAmount" minOccurs="0"/>
 *         &lt;element ref="{urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2}TaxInclusiveAmount" minOccurs="0"/>
 *         &lt;element ref="{urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2}AllowanceTotalAmount" minOccurs="0"/>
 *         &lt;element ref="{urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2}ChargeTotalAmount" minOccurs="0"/>
 *         &lt;element ref="{urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2}PrepaidAmount" minOccurs="0"/>
 *         &lt;element ref="{urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2}PayableRoundingAmount" minOccurs="0"/>
 *         &lt;element ref="{urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2}PayableAmount"/>
 *       &lt;/sequence>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "MonetaryTotalType", propOrder = {
    "lineExtensionAmount",
    "taxExclusiveAmount",
    "taxInclusiveAmount",
    "allowanceTotalAmount",
    "chargeTotalAmount",
    "prepaidAmount",
    "payableRoundingAmount",
    "payableAmount"
})
public class MonetaryTotalType implements Serializable {

    @XmlElement(name = "LineExtensionAmount", namespace = "urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2")
    protected LineExtensionAmountType lineExtensionAmount;
    @XmlElement(name = "TaxExclusiveAmount", namespace = "urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2")
    protected TaxExclusiveAmountType taxExclusiveAmount;
    @XmlElement(name = "TaxInclusiveAmount", namespace = "urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2")
    protected TaxInclusiveAmountType taxInclusiveAmount;
    @XmlElement(name = "AllowanceTotalAmount", namespace = "urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2")
    protected AllowanceTotalAmountType allowanceTotalAmount;
    @XmlElement(name = "ChargeTotalAmount", namespace = "urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2")
    protected ChargeTotalAmountType chargeTotalAmount;
    @XmlElement(name = "PrepaidAmount", namespace = "urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2")
    protected PrepaidAmountType prepaidAmount;
    @XmlElement(name = "PayableRoundingAmount", namespace = "urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2")
    protected PayableRoundingAmountType payableRoundingAmount;
    @XmlElement(name = "PayableAmount", namespace = "urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2", required = true)
    protected PayableAmountType payableAmount;

    /**
     * 
     *             
     * <pre>
     * &lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;ccts:Component xmlns:ccts="urn:un:unece:uncefact:documentation:2" xmlns="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2" xmlns:udt="urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;&lt;ccts:ComponentType&gt;BBIE&lt;/ccts:ComponentType&gt;&lt;ccts:DictionaryEntryName&gt;Monetary Total. Line Extension Amount. Amount&lt;/ccts:DictionaryEntryName&gt;&lt;ccts:Definition&gt;The total of Line Extension Amounts net of tax and settlement discounts, but inclusive of any applicable rounding amount.&lt;/ccts:Definition&gt;&lt;ccts:Cardinality&gt;0..1&lt;/ccts:Cardinality&gt;&lt;ccts:ObjectClass&gt;Monetary Total&lt;/ccts:ObjectClass&gt;&lt;ccts:PropertyTerm&gt;Line Extension Amount&lt;/ccts:PropertyTerm&gt;&lt;ccts:RepresentationTerm&gt;Amount&lt;/ccts:RepresentationTerm&gt;&lt;ccts:DataType&gt;Amount. Type&lt;/ccts:DataType&gt;
     *             &lt;/ccts:Component&gt;
     * </pre>
     * 
     *           
     * 
     * @return
     *     possible object is
     *     {@link LineExtensionAmountType }
     *     
     */
    public LineExtensionAmountType getLineExtensionAmount() {
        return lineExtensionAmount;
    }

    /**
     * Sets the value of the lineExtensionAmount property.
     * 
     * @param value
     *     allowed object is
     *     {@link LineExtensionAmountType }
     *     
     */
    public void setLineExtensionAmount(LineExtensionAmountType value) {
        this.lineExtensionAmount = value;
    }

    /**
     * 
     *             
     * <pre>
     * &lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;ccts:Component xmlns:ccts="urn:un:unece:uncefact:documentation:2" xmlns="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2" xmlns:udt="urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;&lt;ccts:ComponentType&gt;BBIE&lt;/ccts:ComponentType&gt;&lt;ccts:DictionaryEntryName&gt;Monetary Total. Tax Exclusive Amount. Amount&lt;/ccts:DictionaryEntryName&gt;&lt;ccts:Definition&gt;The total amount exclusive of taxes.&lt;/ccts:Definition&gt;&lt;ccts:Cardinality&gt;0..1&lt;/ccts:Cardinality&gt;&lt;ccts:ObjectClass&gt;Monetary Total&lt;/ccts:ObjectClass&gt;&lt;ccts:PropertyTerm&gt;Tax Exclusive Amount&lt;/ccts:PropertyTerm&gt;&lt;ccts:RepresentationTerm&gt;Amount&lt;/ccts:RepresentationTerm&gt;&lt;ccts:DataType&gt;Amount. Type&lt;/ccts:DataType&gt;
     *             &lt;/ccts:Component&gt;
     * </pre>
     * 
     *           
     * 
     * @return
     *     possible object is
     *     {@link TaxExclusiveAmountType }
     *     
     */
    public TaxExclusiveAmountType getTaxExclusiveAmount() {
        return taxExclusiveAmount;
    }

    /**
     * Sets the value of the taxExclusiveAmount property.
     * 
     * @param value
     *     allowed object is
     *     {@link TaxExclusiveAmountType }
     *     
     */
    public void setTaxExclusiveAmount(TaxExclusiveAmountType value) {
        this.taxExclusiveAmount = value;
    }

    /**
     * 
     *             
     * <pre>
     * &lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;ccts:Component xmlns:ccts="urn:un:unece:uncefact:documentation:2" xmlns="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2" xmlns:udt="urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;&lt;ccts:ComponentType&gt;BBIE&lt;/ccts:ComponentType&gt;&lt;ccts:DictionaryEntryName&gt;Monetary Total. Tax Inclusive Amount. Amount&lt;/ccts:DictionaryEntryName&gt;&lt;ccts:Definition&gt;The total amount inclusive of taxes.&lt;/ccts:Definition&gt;&lt;ccts:Cardinality&gt;0..1&lt;/ccts:Cardinality&gt;&lt;ccts:ObjectClass&gt;Monetary Total&lt;/ccts:ObjectClass&gt;&lt;ccts:PropertyTerm&gt;Tax Inclusive Amount&lt;/ccts:PropertyTerm&gt;&lt;ccts:RepresentationTerm&gt;Amount&lt;/ccts:RepresentationTerm&gt;&lt;ccts:DataType&gt;Amount. Type&lt;/ccts:DataType&gt;
     *             &lt;/ccts:Component&gt;
     * </pre>
     * 
     *           
     * 
     * @return
     *     possible object is
     *     {@link TaxInclusiveAmountType }
     *     
     */
    public TaxInclusiveAmountType getTaxInclusiveAmount() {
        return taxInclusiveAmount;
    }

    /**
     * Sets the value of the taxInclusiveAmount property.
     * 
     * @param value
     *     allowed object is
     *     {@link TaxInclusiveAmountType }
     *     
     */
    public void setTaxInclusiveAmount(TaxInclusiveAmountType value) {
        this.taxInclusiveAmount = value;
    }

    /**
     * 
     *             
     * <pre>
     * &lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;ccts:Component xmlns:ccts="urn:un:unece:uncefact:documentation:2" xmlns="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2" xmlns:udt="urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;&lt;ccts:ComponentType&gt;BBIE&lt;/ccts:ComponentType&gt;&lt;ccts:DictionaryEntryName&gt;Monetary Total. Allowance Total Amount. Amount&lt;/ccts:DictionaryEntryName&gt;&lt;ccts:Definition&gt;The total amount of all allowances.&lt;/ccts:Definition&gt;&lt;ccts:Cardinality&gt;0..1&lt;/ccts:Cardinality&gt;&lt;ccts:ObjectClass&gt;Monetary Total&lt;/ccts:ObjectClass&gt;&lt;ccts:PropertyTerm&gt;Allowance Total Amount&lt;/ccts:PropertyTerm&gt;&lt;ccts:RepresentationTerm&gt;Amount&lt;/ccts:RepresentationTerm&gt;&lt;ccts:DataType&gt;Amount. Type&lt;/ccts:DataType&gt;
     *             &lt;/ccts:Component&gt;
     * </pre>
     * 
     *           
     * 
     * @return
     *     possible object is
     *     {@link AllowanceTotalAmountType }
     *     
     */
    public AllowanceTotalAmountType getAllowanceTotalAmount() {
        return allowanceTotalAmount;
    }

    /**
     * Sets the value of the allowanceTotalAmount property.
     * 
     * @param value
     *     allowed object is
     *     {@link AllowanceTotalAmountType }
     *     
     */
    public void setAllowanceTotalAmount(AllowanceTotalAmountType value) {
        this.allowanceTotalAmount = value;
    }

    /**
     * 
     *             
     * <pre>
     * &lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;ccts:Component xmlns:ccts="urn:un:unece:uncefact:documentation:2" xmlns="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2" xmlns:udt="urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;&lt;ccts:ComponentType&gt;BBIE&lt;/ccts:ComponentType&gt;&lt;ccts:DictionaryEntryName&gt;Monetary Total. Charge Total Amount. Amount&lt;/ccts:DictionaryEntryName&gt;&lt;ccts:Definition&gt;The total amount of all charges.&lt;/ccts:Definition&gt;&lt;ccts:Cardinality&gt;0..1&lt;/ccts:Cardinality&gt;&lt;ccts:ObjectClass&gt;Monetary Total&lt;/ccts:ObjectClass&gt;&lt;ccts:PropertyTerm&gt;Charge Total Amount&lt;/ccts:PropertyTerm&gt;&lt;ccts:RepresentationTerm&gt;Amount&lt;/ccts:RepresentationTerm&gt;&lt;ccts:DataType&gt;Amount. Type&lt;/ccts:DataType&gt;
     *             &lt;/ccts:Component&gt;
     * </pre>
     * 
     *           
     * 
     * @return
     *     possible object is
     *     {@link ChargeTotalAmountType }
     *     
     */
    public ChargeTotalAmountType getChargeTotalAmount() {
        return chargeTotalAmount;
    }

    /**
     * Sets the value of the chargeTotalAmount property.
     * 
     * @param value
     *     allowed object is
     *     {@link ChargeTotalAmountType }
     *     
     */
    public void setChargeTotalAmount(ChargeTotalAmountType value) {
        this.chargeTotalAmount = value;
    }

    /**
     * 
     *             
     * <pre>
     * &lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;ccts:Component xmlns:ccts="urn:un:unece:uncefact:documentation:2" xmlns="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2" xmlns:udt="urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;&lt;ccts:ComponentType&gt;BBIE&lt;/ccts:ComponentType&gt;&lt;ccts:DictionaryEntryName&gt;Monetary Total. Prepaid Amount. Amount&lt;/ccts:DictionaryEntryName&gt;&lt;ccts:Definition&gt;The total prepaid amount.&lt;/ccts:Definition&gt;&lt;ccts:Cardinality&gt;0..1&lt;/ccts:Cardinality&gt;&lt;ccts:ObjectClass&gt;Monetary Total&lt;/ccts:ObjectClass&gt;&lt;ccts:PropertyTerm&gt;Prepaid Amount&lt;/ccts:PropertyTerm&gt;&lt;ccts:RepresentationTerm&gt;Amount&lt;/ccts:RepresentationTerm&gt;&lt;ccts:DataType&gt;Amount. Type&lt;/ccts:DataType&gt;
     *             &lt;/ccts:Component&gt;
     * </pre>
     * 
     *           
     * 
     * @return
     *     possible object is
     *     {@link PrepaidAmountType }
     *     
     */
    public PrepaidAmountType getPrepaidAmount() {
        return prepaidAmount;
    }

    /**
     * Sets the value of the prepaidAmount property.
     * 
     * @param value
     *     allowed object is
     *     {@link PrepaidAmountType }
     *     
     */
    public void setPrepaidAmount(PrepaidAmountType value) {
        this.prepaidAmount = value;
    }

    /**
     * 
     *             
     * <pre>
     * &lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;ccts:Component xmlns:ccts="urn:un:unece:uncefact:documentation:2" xmlns="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2" xmlns:udt="urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;&lt;ccts:ComponentType&gt;BBIE&lt;/ccts:ComponentType&gt;&lt;ccts:DictionaryEntryName&gt;Monetary Total. Payable_ Rounding Amount. Amount&lt;/ccts:DictionaryEntryName&gt;&lt;ccts:Definition&gt;The rounding amount (positive or negative) added to the calculated Line Extension Total Amount to produce the rounded Line Extension Total Amount.&lt;/ccts:Definition&gt;&lt;ccts:Cardinality&gt;0..1&lt;/ccts:Cardinality&gt;&lt;ccts:ObjectClass&gt;Monetary Total&lt;/ccts:ObjectClass&gt;&lt;ccts:PropertyTermQualifier&gt;Payable&lt;/ccts:PropertyTermQualifier&gt;&lt;ccts:PropertyTerm&gt;Rounding Amount&lt;/ccts:PropertyTerm&gt;&lt;ccts:RepresentationTerm&gt;Amount&lt;/ccts:RepresentationTerm&gt;&lt;ccts:DataType&gt;Amount. Type&lt;/ccts:DataType&gt;
     *             &lt;/ccts:Component&gt;
     * </pre>
     * 
     *           
     * 
     * @return
     *     possible object is
     *     {@link PayableRoundingAmountType }
     *     
     */
    public PayableRoundingAmountType getPayableRoundingAmount() {
        return payableRoundingAmount;
    }

    /**
     * Sets the value of the payableRoundingAmount property.
     * 
     * @param value
     *     allowed object is
     *     {@link PayableRoundingAmountType }
     *     
     */
    public void setPayableRoundingAmount(PayableRoundingAmountType value) {
        this.payableRoundingAmount = value;
    }

    /**
     * 
     *             
     * <pre>
     * &lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;ccts:Component xmlns:ccts="urn:un:unece:uncefact:documentation:2" xmlns="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2" xmlns:udt="urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2" xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;&lt;ccts:ComponentType&gt;BBIE&lt;/ccts:ComponentType&gt;&lt;ccts:DictionaryEntryName&gt;Monetary Total. Payable_ Amount. Amount&lt;/ccts:DictionaryEntryName&gt;&lt;ccts:Definition&gt;The total amount to be paid.&lt;/ccts:Definition&gt;&lt;ccts:Cardinality&gt;1&lt;/ccts:Cardinality&gt;&lt;ccts:ObjectClass&gt;Monetary Total&lt;/ccts:ObjectClass&gt;&lt;ccts:PropertyTermQualifier&gt;Payable&lt;/ccts:PropertyTermQualifier&gt;&lt;ccts:PropertyTerm&gt;Amount&lt;/ccts:PropertyTerm&gt;&lt;ccts:RepresentationTerm&gt;Amount&lt;/ccts:RepresentationTerm&gt;&lt;ccts:DataType&gt;Amount. Type&lt;/ccts:DataType&gt;
     *             &lt;/ccts:Component&gt;
     * </pre>
     * 
     *           
     * 
     * @return
     *     possible object is
     *     {@link PayableAmountType }
     *     
     */
    public PayableAmountType getPayableAmount() {
        return payableAmount;
    }

    /**
     * Sets the value of the payableAmount property.
     * 
     * @param value
     *     allowed object is
     *     {@link PayableAmountType }
     *     
     */
    public void setPayableAmount(PayableAmountType value) {
        this.payableAmount = value;
    }

} 
```

再次提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:41:57.603

看起来您将 XML 文件解组为自定义类，其中一个是`jaxb.mapped.elements.xsd.commons.MonetaryTotalType`. 该类不可序列化，导致抛出异常。`Serializable`通常，您应该可以通过实现接口将类标记为可序列化。

此外，请考虑使用以您的产品或至少公司名称为前缀的包名称；调用根包`jaxb`会让人感到困惑，因为这不是您自己的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T20:40:33.140

我有一个类似的问题。我的可序列化对象有一个不可序列化的成员对象变量。使其实现可序列化后，错误消失了。

# ruby - 在 Ruby 中如何欺骗源地址？

> ID：14267650
> 
> 赞同：0
> 
> 时间：2013-01-10T21:31:48.427
> 
> 标签：ruby, sockets, spoofing

我正在编写一小段代码，它只会接收 UDP SNMP 陷阱，并将它们转发到多个位置，但源地址信息需要保持完整。否则，所有陷阱似乎都来自运行此分发器代码的系统。这是 UDP 单向通信，所以我不必担心任何响应。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:23:15.307

您需要创建一个`RAW`套接字并从头开始创建自己的数据包。如果您有一个工作示例，例如`traceroute`使用 UDP 做什么，或者非常严格地遵循 RFC 规范，这将非常简单。

`pack`使用正确的选项来组装这些并不难。

# gimp - 复制图像后，Script-fu 无法缩放图像

> ID：14267652
> 
> 赞同：2
> 
> 时间：2013-01-10T21:31:56.947
> 
> 标签：gimp, script-fu

以下是我正在尝试编写的更大的 Script-fu 脚本的一部分。

我在尝试复制打开的 .xcf 文件然后将其缩放到某个用户指定的维度时遇到了问题。

以下是我认为可行的方法：

```
(define (my-duplicate-and-scale inImage inDrawable inWidth inHeight)
    (let* ((theDuplicateImage (gimp-image-duplicate inImage)))

        (gimp-image-scale theDuplicateImage inWidth inHeight)
    )
)

(script-fu-register
    "my-duplicate-and-scale"   ;func name
    "Duplicate and Scale ..."  ;menu label
    ""                         ;description
    ""                         ;author
    ""                         ;copyright notice
    ""                         ;date created
    "*"                        ;image type that the script works on
    SF-IMAGE    "Image"    0
    SF-DRAWABLE "Drawable" 0
    SF-VALUE    "Width"    "512"
    SF-VALUE    "Height"   "512"
)

(script-fu-menu-register "my-duplicate-and-scale" "<Image>/File/My") 
```

当我执行该函数时，我收到以下错误：

```
Error while executing my-duplicate-and-scale:

Error: ( : 2) Invalid type for argument 1 to gimp-image-scale 
```

根据过程浏览器`gimp-image-duplicate`返回一个`IMAGE`，第一个参数`gimp-image-scale`是一个`IMAGE`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:20:43.263

试试这个代码：

代替：

```
(let* ((theDuplicateImage (gimp-image-duplicate inImage))) 
```

和：

```
(let* ((theDuplicateImage (car (gimp-image-duplicate inImage)))) 
```

# python - 扁平化变量层次结构

> ID：14267654
> 
> 赞同：2
> 
> 时间：2013-01-10T21:32:09.193
> 
> 标签：python

我有一个变量层次结构，比如

```
a.b.c.d1
a.b.c.d2
a.b.c.d3
a.b.c.d4 
```

现在我想让它们全部进入本地命名空间：

```
d1=2
d2=3
... 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:41:40.003

实际上，您可以在 Python 中以类似 dict 的方式访问对象的所有字段，只要它是新样式的类，即该类`object`直接或间接继承。

让我们将层次结构减少到一级，就像@unutbu 建议的那样。那么解决方案是：

```
class A(object):
    d0 = 0
    def __init__(self):
        self.d1 = 1
        self.d2 = 2
        self.d3 = 3
        self.d4 = 4

a = A()

for k in a.__dict__:
    print k, a.__dict__[k]
    globals()[k] = a.__dict__[k]

print d1, d2, d3, d4
print d0 
```

这给了我们作为输出：

```
d4 4
d2 2
d3 3
d1 1
1 2 3 4
Traceback (most recent call last):
  File "/../stackoverflow/14267654.py", line 24, in <module>
    print d0
NameError: name 'd0' is not defined 
```

这意味着：可以通过特殊字段访问**新式类的实例变量。**`a.__dict__`全局变量可以在返回的字典中设置`globals()`。把这些放在一起，你就有了解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:35:56.433

你可以定义

```
d1 = a.b.c.d1
d2 = a.b.c.d2 
```

但是像

```
d1 = 2 
```

只会影响局部变量`d1`，不会`a.b.c.d1`。

如果您希望分配影响`a.b.c.d1`，请使用

```
c = a.b.c
c.d1 = 2 
```

没有办法只使用像`d1`.

# java - 如何从 jar 中读取外部文本文件

> ID：14267655
> 
> 赞同：0
> 
> 时间：2013-01-10T21:32:16.650
> 
> 标签：java, file-io, jar, inputstream

我有一个写入网络文件夹的文本文件，我希望我的用户能够单击一个 jar 文件，该文件将读取文本文件，对其进行排序，并将排序后的文件输出到同一文件夹。但是我无法格式化`InputStream`读取文件的语法。

当我使用 a`FileReader`而不是`InputStreamReader`以下代码在 eclipse 中工作正常，但从 jar 运行时返回空。当我将其更改为`InputStream`喜欢我的研究建议时 - 我得到一个`NullPointerException`喜欢它找不到文件。

我哪里做错了？:)

```
public class sort {

    /**
     * @param args
     */
    public static void main(String[] args) {
        sort s = new sort();
        ArrayList<String> farmRecords = new ArrayList<String>();
        farmRecords = s.getRecords(); 

        String testString = new String(); 
        if(farmRecords.size() > 0){
            //do some work to sort the file

        }else{
            testString = "it didn't really work"; 
        }
        writeThis(testString); 
    }

public ArrayList<String> getRecords(){
        ArrayList<String> records = new ArrayList(); 
        BufferedReader br; 
        InputStream recordsStream = this.getClass().getResourceAsStream("./input.IDX");
        try {

            String sCurrentLine;
            InputStreamReader recordsStreamReader = new InputStreamReader(recordsStream);
            br = new BufferedReader(recordsStreamReader);
            while ((sCurrentLine = br.readLine()) != null) {
                System.out.println(sCurrentLine); 
            }
            br.close();

        } catch (IOException e) {
            e.printStackTrace();
        } 

        return records; 
}

private static void writeThis(String payload){
    String filename = "./output.IDX"; 
    try {
        BufferedWriter fr = new BufferedWriter(new FileWriter(filename));
        fr.write(payload);
        fr.close();
    } catch (IOException e) {

        e.printStackTrace();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:35:04.973

`getResourceAsStream()`从类路径加载文件。如果从命令行运行它，则需要`.`类路径上的当前目录 ( )。如果你想从文件系统加载任意文件，你应该使用`FileInputStream`（或者`FileReader`省去随后将输入流包装在阅读器中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:56:32.317

使用 FIS 获取 jar 中的文件将不起作用，因为该文件本身不在文件系统上。您应该为此使用 getResrouceAsStream() 。

此外，要访问 jar 中的文件，您必须添加“！” 到文件路径。文件在罐子里吗？如果没有，则在传递类路径后尝试一个脚本来启动 jar：

```
start.sh

    java -cp .:your.jar com.main.class.example.run 
```

执行此脚本（在 linux 上）或根据您的平台对其进行修改。

此外，您可以使用以下代码打印出类路径。这样您可以检查您的类路径是否包含该文件？

```
ClassLoader sysClassLoader = ClassLoader.getSystemClassLoader();

    // Get the URLs
    URL[] urls = ((URLClassLoader) sysClassLoader).getURLs();

    for (int i = 0; i < urls.length; i++) {
        System.out.println(urls[i].getFile());
    }
} 
```

# php - 使用 preg_match 获取值

> ID：14267658
> 
> 赞同：0
> 
> 时间：2013-01-10T21:32:36.550
> 
> 标签：php, request, preg-match

我将如何尝试`$_REQUEST`基于`preg_match`. 该`$_REQUEST`值将保持**15h56的值**

抓住`$_REQUESTS`我目前正在使用的

```
foreach ($_REQUEST as $k => $v) {
    $a[] = "$k=$v";
}
$ref_val = implode("&", $a); 
```

所以基本上我试图确定 $_REQUEST KEY 保存此数据**15h56**因为密钥将动态生成。

我尝试过以下操作

```
if(preg_match("/[0-9]n([0-9]+)[=]?(.*)$/", $ref_val, $matches)) {
$the_key_i_need = $matches[1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:34:23.197

你为什么要使用`preg_match()`- 你有`$_REQUEST`数组中的数据，只需使用[`array_search()`](http://php.net/array_search)：

```
$key = array_search( '15h56', $_REQUEST, true); 
```

如果你`$_REQUEST`看起来像：

```
array( 'something_unknown_here' => '15h56') 
```

然后在执行后`$key`会相等。`something_unknown_here``array_search()`

**编辑：**澄清后，该值似乎是未知的，但会匹配一个模式。因此，您可以迭代`$_REQUEST`以找到密钥，如下所示：

```
$found_key = null;
foreach ($_REQUEST as $k => $v) {
    if( preg_match( '#\d+h\d+#', $v)) {
        $found_key = $k;
        break;
    }
} 
```

现在`$found_key`将要么是`null`，表示没有与模式匹配的值，要么是`$_REQUEST`某个值，它是进入的键`$_REQUEST`。请注意，这只会找到值与模式匹配的第一个键。

# c# - C#中的剪贴板问题

> ID：14267664
> 
> 赞同：0
> 
> 时间：2013-01-10T21:32:53.713
> 
> 标签：c#, exception, clipboard

我以前写过*很多*Visual Basic 6.0，最近我涉足了 VB.NET。我一直在和我的一个创业朋友一起做一些一般性的编程，发现 C# 非常简单。

我编写的应用程序在 99% 的情况下都可以正常工作，但有时，如果应用程序崩溃到“Windows 检测到问题”，我就无法写入剪贴板。

这是事件日志中的内容：

```
Application: SLicenseTool.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Runtime.InteropServices.COMException
Stack:
   at System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32, IntPtr)
   at System.Runtime.InteropServices.Marshal.ThrowExceptionForHR(Int32, IntPtr)
   at System.Windows.Clipboard.Flush()
   at System.Windows.Clipboard.CriticalSetDataObject(System.Object, Boolean)
   at System.Windows.Clipboard.SetDataInternal(System.String, System.Object)
   at System.Windows.Clipboard.SetText(System.String, System.Windows.TextDataFormat)
   at System.Windows.Clipboard.SetText(System.String)
   at SLicenseTool.MainWindow.GenerateLicense_Click(System.Object, System.Windows.RoutedEventArgs)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(System.Object, System.Windows.RoutedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(System.Object, System.Windows.RoutedEventArgs, Boolean)
   at System.Windows.UIElement.RaiseEventImpl(System.Windows.DependencyObject, System.Windows.RoutedEventArgs)
   at System.Windows.UIElement.RaiseEvent(System.Windows.RoutedEventArgs)
   at System.Windows.Controls.Primitives.ButtonBase.OnClick()
   at System.Windows.Controls.Button.OnClick()
   at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(System.Windows.Input.MouseButtonEventArgs)
   at System.Windows.UIElement.OnMouseLeftButtonUpThunk(System.Object, System.Windows.Input.MouseButtonEventArgs)
   at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(System.Delegate, System.Object)
   at System.Windows.RoutedEventArgs.InvokeHandler(System.Delegate, System.Object)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(System.Object, System.Windows.RoutedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(System.Object, System.Windows.RoutedEventArgs, Boolean)
   at System.Windows.UIElement.ReRaiseEventAs(System.Windows.DependencyObject, System.Windows.RoutedEventArgs, System.Windows.RoutedEvent)
   at System.Windows.UIElement.OnMouseUpThunk(System.Object, System.Windows.Input.MouseButtonEventArgs)
   at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(System.Delegate, System.Object)
   at System.Windows.RoutedEventArgs.InvokeHandler(System.Delegate, System.Object)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(System.Object, System.Windows.RoutedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(System.Object, System.Windows.RoutedEventArgs, Boolean)
   at System.Windows.UIElement.RaiseEventImpl(System.Windows.DependencyObject, System.Windows.RoutedEventArgs)
   at System.Windows.UIElement.RaiseTrustedEvent(System.Windows.RoutedEventArgs)
   at System.Windows.UIElement.RaiseEvent(System.Windows.RoutedEventArgs, Boolean)
   at System.Windows.Input.InputManager.ProcessStagingArea()
   at System.Windows.Input.InputManager.ProcessInput(System.Windows.Input.InputEventArgs)
   at System.Windows.Input.InputProviderSite.ReportInput(System.Windows.Input.InputReport)
   at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr, System.Windows.Input.InputMode, Int32, System.Windows.Input.RawMouseActions, Int32, Int32, Int32)
   at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr, MS.Internal.Interop.WindowMessage, IntPtr, IntPtr, Boolean ByRef)
   at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
   at MS.Win32.HwndWrapper.WndProc(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(System.Object)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate)
   at System.Windows.Threading.Dispatcher.LegacyInvokeImpl(System.Windows.Threading.DispatcherPriority, System.TimeSpan, System.Delegate, System.Object, Int32)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr, Int32, IntPtr, IntPtr)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(System.Windows.Interop.MSG ByRef)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame)
   at System.Windows.Threading.Dispatcher.PushFrame(System.Windows.Threading.DispatcherFrame)
   at System.Windows.Threading.Dispatcher.Run()
   at System.Windows.Application.RunDispatcher(System.Object)
   at System.Windows.Application.RunInternal(System.Windows.Window)
   at System.Windows.Application.Run(System.Windows.Window)
   at System.Windows.Application.Run()
   at SLicenseTool.App.Main() 
```

我正在使用[rhino-licensing](https://github.com/ayende/rhino-licensing/)库。

这是 GenerateLicense_Click 中的代码：

```
var license = generator.Generate(txtName.Text, id, expirationDate, attribs, licenseType);
Clipboard.SetText(license); 
```

我不确定为什么它会在我的电脑上运行，在我朋友的电脑上运行几次，但它随机失败。访问剪贴板似乎有一些问题，但我不确定调试/修复它的下一步是什么。

我将重写应用程序以停止使用剪贴板，而是使用常规的保存文件/打开文件对话框。似乎更可靠。

# python - Python：从元组列表中获取元素，一次n，列表长度未知

> ID：14267668
> 
> 赞同：0
> 
> 时间：2013-01-10T21:33:17.160
> 
> 标签：python, list, iteration

我从长度未知的元组列表中一次打印出 n 个元素，这真是太棒了。

一副纸牌，例如：

```
a = [ ('2','c'), ('2','d'), ('2','h'), ('2','s'), ('3','c'), ('3','d'), ... ,('A',h'),('A','s') ] 
```

此示例中的列表以 52 长度开始，但我正在弹出元素。我想以四个为一组打印出来（对于这个例子），但我一直在最后一组可能有少于四个元素的地方搞砸了。

弹出一堆卡片后的预期输出是：

```
('2','c'), ('2','d'), ('2','h'), ('2','s')
('3','c'), ('3','d'), ('3','h'), ('3','s')
...
('J','c'), ('J','d'), ('J','h'), ('J','s')
('Q','c'), ('Q','d') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:37:50.907

简单的：

```
a = [ ('2','c'), ('2','d'), ('2','h'), ('2','s'), ('3','c'), ('3','d'), ... ,('A','h'),('A','s') ]

for e in range(0, len(a), 4):
    for i in a[e:e+4]:
        print i,
    print 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:35:58.747

添加一张支票，上面写着，`if len(a)<4 then pop len(a)-1`

# android - 这个逻辑语句（Android）有什么问题？

> ID：14267678
> 
> 赞同：0
> 
> 时间：2013-01-10T21:33:56.723
> 
> 标签：android, logic

我不明白为什么以下逻辑不起作用：

```
 if (cursorCount > 1 && (!"x".equals(componentType) || !"y".equals(componentType))){
                        message.append("s");
                    } 
```

因此，如果光标计数超过 1，但仅当 componentType 不等于 x 或 y 时，我想打印 's'。

有趣的是，似乎适用于 y 但不是 x 的情况。

困惑的.com！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T21:36:17.983

尝试

```
if (cursorCount > 1 && !("x".equals(componentType) || "y".equals(componentType))) 
```

等效地你可以做

```
if (cursorCount > 1 && !"x".equals(componentType) && !"y".equals(componentType)) 
```

这来自将德摩根定律应用于您的逻辑。

我相信这些更符合您对您想要的东西的英文描述。

**编辑：**

为了消除混淆，让我们分析一下您英文描述的最后一部分的逻辑：

> ...但仅当 componentType 不等于 x 或 y 时。

陈述同一件事的另一种方式是“componentType 既不是 x 也不是 y”。为了将它翻译成代码，我们应该更进一步，将这个条件改写为“不是 componentType 是 x 或 comonentType 是 y”。这个最终版本表明正确的布尔公式是

```
!(A || B) 
```

这与您的原始代码非常不同，其形式为

```
!A || !B 
```

请注意，我最后的改写更加冗长，但多余的措辞使逻辑更加清晰。

分析逻辑的另一种方法是查看您提供的代码：

```
!"x".equals(componentType) || !"y".equals(componentType) 
```

让我们看几个例子：

1.  `"x".equals(componentType) is true. This means the negation is false. It also means that` "y".equals(componentType)` 是假的，*它的*否定是真的。因此，您的代码计算结果为 true。

2.  `"y".equals(componentType) is true. This means the negation is false. It also means that` "x".equals(componentType)` 是假的，*它的*否定是真的。因此，您的代码计算结果为 true。

3.  `"x".equals(componentType) nor` "y".equals(componentType) 都不是真的。这意味着两个否定都是错误的，并且您的代码评估为错误。

请注意，您的代码在 1\. 和 2 两种情况下都为 true。这与您的英文描述所期望的结果不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:39:13.550

您的“x”条件之前有一个不应该存在的“（”。然后从整个`if`语句的末尾删除其中一个。您应该将那些属于一起的条件包装在“（）”中，因为它令人困惑哎呀，这样读。

if ((cursorCount > 1 && !"x".equals(componentType)) || (!"y".equals(componentType)))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:41:21.850

```
if ((cursorCount > 1 && !"x".equals(componentType)) 
|| (cursorCount > 1 && !"y".equals(componentType))) 
  message.append("s"); 
```

或者你可以嵌套它们，如果它更容易的话

```
if (cursorCount > 1)
  if (componentType!="y" || componentType!="x")
    message.append("s"); 
```

这将使其更容易理解并且减少谬误。

# asp.net - 在不同平台上开发的多个站点的单次登录

> ID：14267679
> 
> 赞同：0
> 
> 时间：2013-01-10T21:33:59.963
> 
> 标签：asp.net, sql, web-services, single-sign-on

我公司有5个产品网站，使用ASP.net、PHP、Flex等开发，大部分都是普通用户。要求是避免同一用户访问这些网站时多次登录。我们为每个站点提供不同的数据库进行身份验证。只有注册用户才能访问相应的网站。

这样做的简单易行的方法是什么？由于平台不同，Cookie 无法正常工作。我想使用 ASP.net/c#/SQL 服务器进行开发。市场上有不同的 SSO 可用（带有组件空间库的 SAML 2.0），但不确定在我们的案例中是否需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:40:20.533

这可以实现的方式是使用基于声明的身份验证。

基本上，您将生成某种令牌，该令牌将跟随用户从一个系统到另一个系统。（加密，验证了一些来自可信来源的方法。）

使用该令牌，每个系统都可以验证用户身份并在成功时授权访问。

这类似于某些网站（如 StackOverflow）允许您使用 Google 或 Facebook 帐户登录而无需创建个人帐户的方式。然后，当您登录时，FB 或 Google 会发出一个令牌（又称声明），表明您就是您所说的那个人。因为 StackOverflow 信任 Google，所以他们接受了您就是您的声明（承诺），实际上就是您。

# sql - MongoDB查询区分、排序、限制和偏移

> ID：14267684
> 
> 赞同：5
> 
> 时间：2013-01-10T21:34:45.780
> 
> 标签：sql, mongodb

我正在寻找相当于以下内容的Mongo：

```
select distinct event_type_id from events
order by created_at desc
limit 10,20 
```

Event Mongo 文档如下：

```
{
  _id: BSON(), event_type_id: 1, created_at: Date(), other_data: {}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T22:22:59.163

您可以在新的 mongo 版本上使用[聚合框架。](http://docs.mongodb.org/manual/applications/aggregation/)这是开始的示例：

```
db.events.aggregate([
    {$sort:{"created_at":-1}},
    {$project:{"event_type_id":1}},
    {$group:{"_id":"$event_type_id"}},
    {$skip:10},
    {$limit:20}
]) 
```

这是另一种方法，感谢@JoachimIsaksson

```
db.events.aggregate([
    {$group:{"_id":"$event_type_id", "created_at":{$max:"$created_at"}}},
    {$sort:{"created_at":-1}},
    {$skip:10},
    {$limit:20},
    {$project:{"event_type_id":1}}
]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T22:18:34.580

您始终可以通过 v2.2 中引入的聚合框架执行此操作：

```
db.col.aggregate(
    {$group: {_id: "$event_type_id", created_at: "$created_at"}},
    ($sort: {"$created_at":-1}
); 
```

像这样的东西将分组，这实际上与 distinct 相同，所有`event_type_id`值并按降序排序`created_at`。

这应该没问题，但请注意，目前它的输出限制 (atm) 为 16meg，因此如果您要输出一个巨大的文档，您可能会发现它很困难。

### 编辑

为了提高性能，您实际上可以先使用索引进行排序，然后`$group`：

```
db.col.aggregate(
    { $sort: {"$created_at":-1} },
    { $group: {_id: "$event_type_id", created_at: {$first: "$created_at"}} }
); 
```

这使用`$first`（[http://docs.mongodb.org/manual/reference/aggregation/first/](http://docs.mongodb.org/manual/reference/aggregation/first/)）运算符来获取该组中该字段的第一个值。您也可以使用`$last`运算符，这些当然转换为正常的`$min`，`$max`但用于排序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T22:10:03.980

我认为您不能将限制和跳过命令与 mongo 中的不同查询结合使用。下面的代码将返回相当于下面的 sql 语句：

```
select distinct event_type_id from events
order by created_at desc

db.events.distinct( 'event_type_id', {}, {{createdAt: -1} }) 
```

检索结果后，您可以根据需要从中提取子集。您也可以查看以下帖子：[How to use Distinct, Sort, limit with mongodb](https://stackoverflow.com/questions/9998915/how-to-use-distinct-sort-limit-with-mongodb)

显然这是 mongo 社区的一张公开票，您也可以检查问题，看起来他们暂时不会实现 limit 和 distinct 的组合[https://jira.mongodb.org/browse/SERVER-2130](https://jira.mongodb.org/browse/SERVER-2130)

# python - 使用记录的鼠标坐标在 d3 画布上绘制

> ID：14267687
> 
> 赞同：0
> 
> 时间：2013-01-10T21:34:59.877
> 
> 标签：python, events, d3.js

有没有办法将“假”事件发送到 d3 画布？我想根据预先记录的轨迹为弹跳球制作动画。我的代码库是 C++，我在我的程序中嵌入了 python 代码以在 d3 上发布它。

编辑：也许 mouseEvents 不是最好的看点。将来，我将在场景中滚动超过 1 个球。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:42:45.497

我认为您可以使用[PyQt4](http://www.riverbankcomputing.com/software/pyqt/download)框架。它有一个类[QMouseEvent](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/qmouseevent.html)，您可以在其中指定鼠标的位置。

# c# - 在 C# 中集成 LaTeX 解析器

> ID：14267692
> 
> 赞同：3
> 
> 时间：2013-01-10T21:35:18.910
> 
> 标签：c#, parsing, tex

我正在尝试制作一个在 C# 中使用 LaTeX 解析器的编辑器，如下所示：[Online Parser](https://www.writelatex.com/32492rqtrzj)

我正在使用两个简单的 RichTextBox，一个用于在其中写入，一个用于在其中显示解析的文本。

我想实时解析代码，但我不知道我是否需要库或其他东西来实现这一点。我不需要也不想自己编写解析器。我想使用已经构建的东西。

那么，有什么我可以使用的，比如将文本发送到解析器，然后从它接收已经解析的结果？

# grails - Groovy AST 转换不会在 Grails 编译期间应用，仅在自动重新加载期间应用

> ID：14267694
> 
> 赞同：6
> 
> 时间：2013-01-10T21:35:24.207
> 
> 标签：grails, groovy, abstract-syntax-tree, grails-2.1

我编写了一个 Groovy AST 转换，它仅在 Grails 自动重新加载要应用的类时为我运行。如果我清理项目并使用 run-app 启动应用程序，则 AST 转换不会运行。触摸类以便 grails 自动重新加载会导致转换运行。

注释和 ASTTransformation 实现是 groovy 类，位于我的 Grails 应用程序的 src/groovy 目录中。注释用于域类，在域目录中以 groovy 编写。

这是否可能是由 groovy 文件的编译顺序或类加载器加载它们时引起的？如果是这样，我如何确保在域类之前编译/加载我的 ast 转换？

注释：

```
@Target([ElementType.TYPE])
@Retention(RetentionPolicy.RUNTIME)
@GroovyASTTransformationClass(["com.abc.annotation.SecuredObjectASTTransformation"])
public @interface SecuredObject {
} 
```

ASTTransforamtion 实现：

```
@GroovyASTTransformation(phase = CompilePhase.CANONICALIZATION)
class SecuredObjectASTTransformation implements ASTTransformation {

    @Override
    public void visit(ASTNode[] nodes, SourceUnit sourceUnit) {
        // add some new properties...
    }
} 
```

Grails 版本是 2.1.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T23:34:21.063

所有各种`src/groovy`,`src/java`和`grails-app/*`文件一次编译在一起，因此编译器在编译域类时无法使用 AST 转换。但是插件在应用程序之前在单独的通道中编译，因此一种选择可能是创建一个非常简单的插件，只包含注释和 AST 转换类，并将其声明为内联插件`BuildConfig`

```
grails.plugin.location.'secured-objects' = '../secured-objects' 
```

然后，转换将在插件编译过程中构建，并在构建域时位于编译器类路径中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-22T21:09:28.143

AST 转换需要在您的项目代码之前编译。最简单的方法是使用脚本挂钩 grails 编译事件。查看这篇博文，了解如何使用新的 ant 任务创建脚本以预编译 src/ast 文件夹中的源代码。 [http://reinhard-seiler.blogspot.com.au/2011/09/grails-with-ats-transformation-tutorial.html](http://reinhard-seiler.blogspot.com.au/2011/09/grails-with-ats-transformation-tutorial.html)

如果您只有几个 AST 转换，那么这是迄今为止最好的方法。使用已编译的 jar 创建一个插件或单独的项目对于我的需要来说是太多的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T05:07:10.723

此外，如果您想避免注释并将其应用于每个班级，您可以 [在此处查看](https://stackoverflow.com/a/27738864/2711378)我的答案！

答案描述了如何应用 Global ASTTransforms。您可以在 Transformer 之后编译的所有类中应用转换。

# c# - 我需要向 WiX 提供哪些 Visual Studio 文件，如何获取它们？

> ID：14267695
> 
> 赞同：0
> 
> 时间：2013-01-10T21:35:28.783
> 
> 标签：c#, visual-studio-2012, wix, visual-studio-express

我有 Visual Studio Express 2012，我希望使用 WiX 为它创建一个安装项目。我不能使用插件，因为它是 Express，所以我使用的是烛光方法。

我知道如何制作我需要的 wxs 文件，但我的问题是我不确定安装应用程序中要包含哪些文件（例如实际的应用程序文件）以及如何让 Visual Studio 给我这些文件。

任何帮助将不胜感激。谢谢。-商标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:39:19.630

`.exe`您需要在Release配置中构建您的项目，这将`.dll`在`bin\Release`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T01:14:03.777

你有另一台机器吗？我碰巧知道 WiX 与免费的 Visual Studio Integrated Shell 配合得很好。

# java - 如何读取 3gp / AMR-NB 音频格式的原始值？

> ID：14267707
> 
> 赞同：7
> 
> 时间：2013-01-10T21:36:04.987
> 
> 标签：java, android, audio

在我的 Android 应用程序中，我正在录制用户的声音，并将其保存为 .3gp 编码的音频文件。

我想要做的是打开它，即表示音频样本的序列 x[n]，以便执行一些音频信号分析。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T21:21:46.377

您可以使用 Android [MediaCodec](http://developer.android.com/reference/android/media/MediaCodec.html)类来解码 3gp 或其他媒体文件。解码器输出是标准的 PCM 字节数组。您可以直接将此输出发送到 Android AudioTrack 类进行播放或继续使用此输出字节数组进行进一步处理，例如 DSP。要应用 DSP 算法，必须将字节数组转换为浮点/双精度数组。有几个步骤可以获得字节数组输出。总而言之，它看起来如下所示：

1.  实例化媒体编解码器

    ```
    String mMime = "audio/3gpp"
    MediaCodec  mMediaCodec = MediaCodec.createDecoderByType(mMime); 
    ```

2.  创建媒体格式并配置媒体编解码器

    ```
    MediaFormat mMediaFormat = new MediaFormat();
    mMediaFormat = MediaFormat.createAudioFormat(mMime,
        mMediaFormat.getInteger(MediaFormat.KEY_SAMPLE_RATE),
        mMediaFormat.getInteger(MediaFormat.KEY_CHANNEL_COUNT));

    mMediaCodec.configure(mMediaFormat, null, null, 0);
    mMediaCodec.start(); 
    ```

3.  从 MediaCodec 捕获输出（应该在线程内处理）

    ```
    MediaCodec.BufferInfo buf_info = new MediaCodec.BufferInfo();
    int outputBufferIndex = mMediaCodec.dequeueOutputBuffer(buf_info, 0);
    byte[] pcm = new byte[buf_info.size];
    mOutputBuffers[outputBufferIndex].get(pcm, 0, buf_info.size); 
    ```

这个[Google IO talk](http://www.youtube.com/watch?v=RQws6vsoav8)可能与此处相关。

# mysql - MySQL 服务代理

> ID：14267716
> 
> 赞同：2
> 
> 时间：2013-01-10T21:36:39.957
> 
> 标签：mysql, sql-server-2008

MSSQL Service Broker：MySQL 中是否有类似的技术？

如果没有，任何建议如何处理可以在 MSSQL 中使用 Service Broker 实现的异步任务？

客户端平台是.NET。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-12T13:04:37.653

我建议看一下[RabbitMQ](https://www.rabbitmq.com/)。它是一个独立的消息队列服务器，实现了与 SQL Server 服务代理极为相似的“代理”模式。您可以将它安装在 Windows 或任何 Linux 上。并且有一个非常不错的 .NET 客户端库。

# python - Python list.remove() 跳过列表中的下一个元素

> ID：14267722
> 
> 赞同：14
> 
> 时间：2013-01-10T21:37:14.157
> 
> 标签：python

Python，但不是编程，新手在这里。我正在使用列表进行编程并且遇到了一个有趣的问题。

```
width = 2
height = 2

# Traverse the board
def traverse(x, y):
    # The four possible directions
    squares = [(x - 1, y), (x + 1, y), (x, y - 1), (x, y + 1)]
    print squares

    # Remove impossible squares
    for square in squares:
        print "now accessing", square
        if (square[0] < 1 or square[0] > width or 
            square[1] < 1 or square[1] > height or
            square == (1, height)):
            squares.remove(square)
            print "removed", square
    print(squares)

# Testing traverse
traverse(1,1) 
```

这将产生以下输出：

```
[(0, 1), (2, 1), (1, 0), (1, 2)]
now accessing (0, 1)
removed (0, 1)
now accessing (1, 0)
removed (1, 0)
[(2, 1), (1, 2)] 
```

它完全跳过元素 (2,1) 和 (1,2) - 甚至不检查它们！我在这里找到了答案，说我不应该在遍历列表时修改它，是的，这绝对是有道理的。菜鸟失误。但是有人能告诉我为什么它不起作用吗？Python 列表的面纱背后是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-11T17:25:22.677

其他人解释说，您不应该从正在迭代的数组中删除元素；但是，如果您向后遍历数组，则没有问题。

解决这个问题的最简洁的方法（假设你完成后不需要原始数组的副本）是使用`reversed()`函数，如

`for square in reversed(squares)`

这将从数组的末尾开始迭代，并向后工作。以这种方式取出元素不会影响其余代码，因为您不会更改尚未访问的元素的顺序。我认为这是解决这个问题的最优雅的方法。[我在这里](http://effbot.org/pyfaq/how-do-i-iterate-over-a-sequence-in-reverse-order.htm)学到了这个技巧

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-10T21:39:41.130

该语句`for square in squares`只是按顺序访问列表中的每个项目：`squares[0]`，然后`squares[1]`，然后`squares[2]`，等等，直到它用完正方形。

删除`squares[0]`将列表中的所有其他项目移到左侧一个插槽；原来`squares[1]`是 now `squares[0]`，所以 for 循环会跳过它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T21:39:33.477

您在迭代列表时从列表中删除。这不是一个好主意。
还有其他方法可以执行您正在尝试的操作，其中一种是跟踪要从列表中删除的所有项目的列表索引，然后将它们从 for 循环中删除

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T21:42:27.780

When you are accessing a list in Python and remove an element, the list becomes shorter. Simple example: take the list 1,2,3,4,5, and remove the prime numbers > 1.
If you look at the second element (2) and decide to remove it, you end up with a list that goes 1,3,4,5 Now you look at the third element (you have already looked at the second one), and you find it's 4\. That's not prime, so you go to the fifth element - 5\. Remove it.
Result: you have 1,3,4,5. If you had started from the other end of the array, things would work just fine. Make sense?

EDIT: I have created another answer below - other posters gave a better explanation of the problem than I gave here, but I think I have a more elegant solution.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T21:58:40.733

不要修改您正在迭代的列表！

相反，请执行以下操作：

```
for square in squares[:]: 
```

这样您就可以在更改原始列表的同时迭代列表的副本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-09T17:09:42.223

不建议在 for 循环中删除数组元素，因为 for 循环会按顺序检查索引，而在循环中删除元素会将进行中的元素左移一个索引，如果要这样做，请使用 reversed()

arr = [1,2,3,4,5]

for ele in reversed(arr): 条件：arr.remove(ele)

# windows - 使用支持 NFC 的手机解锁计算机

> ID：14267723
> 
> 赞同：3
> 
> 时间：2013-01-10T21:37:18.357
> 
> 标签：windows, macos, authentication, applescript, nfc

我想在我的笔记本电脑/台式机上贴一个 NFC 贴纸，用我的 NFC 手机刷一下它就会解锁我的电脑。如果我没有带手机，我仍然可以使用我的普通密码登录。到目前为止，我购买了一些 NFC 贴纸并在我的手机上安装了[TagStand](https://play.google.com/store/apps/details?id=com.jwsoft.nfcactionlauncher)，它可以发布到我控制的服务器上。如果服务器告诉我的计算机这样做，我想编写一些小软件来监听该服务器并解锁我的计算机。我没有完成最后一部分，因为我不知道如何为 Mac 或 PC 编写这样的软件。是否可以？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T01:53:52.950

NFC部分很简单，但解锁部分比你想象的要复杂。*永远* **不要**以编程方式解锁您的计算机，因为如果您的程序可以做到，**那么其他人也可以。**更不用说这个“程序”将基于远程服务器与其自身之间的通信来运行。这是一场**安全噩梦**，除了实验优势之外没有其他用处。

如果您进行了足够的研究，您会发现可以通过编程方式锁定（而不是解锁）计算机。另一方面解锁并不容易..

这里有几个链接给你，我以前做过，但从来没有测试过......

[远程解锁 Windows 工作站](http://www.codeproject.com/Articles/16197/Remotely-Unlock-a-Windows-Workstation)

[使用网络解锁本地计算机](https://stackoverflow.com/questions/5764174/unlock-local-computer-using-net)

[以编程方式解锁 Windows 工作站](https://stackoverflow.com/questions/174225/unlock-windows-workstation-programatically)

[奥村](http://www.paralint.com/projects/aucun/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T22:13:09.867

我认为实现此目的的另一种方法是反过来。让您的手机将您的密码存储在可以将其传递给计算机的应用程序中。计算机需要某种本质上充当键盘的 USB NFC 阅读器。当您将手机轻触到 USB 设备时，它会将您的密码“输入”到文本框中，应用程序所做的最后一件事是“按 Enter 键” 明显的安全问题是，如果您正在运行解锁器应用程序，它基本上只是不断发送出你的密码...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-27T14:15:04.597

我想指出，华硕已经推出了一款适用于 Windows 8 的产品（允许 NFC 登录），所以这是可能的——至于它的安全性我不知道......

# android - 结合 Amazon EC2、Amazon S3 和 Android 应用程序进行照片共享

> ID：14267726
> 
> 赞同：0
> 
> 时间：2013-01-10T21:37:23.863
> 
> 标签：android, amazon-s3, amazon-ec2

我决定在我的 Android 云应用程序中使用 Amazon AWS，这是一个照片共享应用程序。我用 PHP 和 MySql 在 EC2 上建立了一个实例，用于处理简单的请求和存储基本的用户信息。我还设置了一个 S3 服务来存储所有照片。

但现在我想要一些建议。我不确定如何同时处理这三个。EC2 服务器是否应该始终用作使用应用程序的最终用户和 S3 服务之间的中介？或者，Android 上的最终用户是否应该在可能的情况下直接与 S3 通信？

例如，用户在我的应用上注册并决定上传图片。我是否应该将 JPEG 发送到我的 EC2 服务器，然后让服务器将图片发送到 S3？还是应该直接将其发送到 S3，在设备上取回 URL，然后将其发送到我的 EC2 服务器？无论哪种方式，我都需要将 S3 url 地址存储在我的 MySQL 数据库中，以便将它们发送给其他用户，以便他们可以访问新的公共图像。

关于我应该如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:02:30.730

我不认为你真的有选择。为了安全起见，您将不得不通过 EC2。如果手机应用程序直接上传到 S3，则意味着 S3 存储桶要么是公开可写的，要么访问凭证存储在用户的手机上，这两者都是危险的。这意味着您需要通过 EC2 上传或至少让 EC2 向 S3 颁发时间有限的凭据（不确定后者是否可行或一个好主意）。

如果您愿意允许任何人查看任何图片，那么您可以让 S3 实例公开可读，并且手机应用程序可以从 EC2 实例获取 url，然后直接从 S3 下载图片。这将减轻一些 EC2 负载。

减轻 EC2 负载的另一种方法是拥有一个专用的 EC2 实例，仅用于处理与运行数据库的实例分开的上传。这样，如果您的上传服务器受到重创，您的应用程序仍然可以访问数据库、检索 S3 url 并下载图片。

您还需要考虑应用程序的可扩展性和正常运行时间。Amazon 对单个 EC2 实例甚至单个可用区都没有任何正常运行时间保证，因此如果您希望您的服务器可靠地在那里，您需要至少跨两个可用区进行扩展。（两个区域也不是一个坏主意，但对于大多数应用程序来说太过分了。）

# java - 我无法将节点添加到空列表中

> ID：14267727
> 
> 赞同：0
> 
> 时间：2013-01-10T21:37:29.083
> 
> 标签：java, linked-list, nodes

我偶然发现了一个奇怪的问题，即在 Java 中将两个链表添加到第三个链表中，第一个链表“myList1”，第二个链表“myList2”，第三个链表“myList3”。

组合方法应该将第一个 LinkedList“myList1”然后第二个“myList2”添加到第三个 LinkedList“myList3”中，但是当第三个列表为空时，我遇到了将它们添加到第三个列表的问题，但是如果第三个列表在至少一个元素每件事都顺利进行。

编码：

```
Node current = myList1.head;            
while (current != null) {                                                                       
    Node newcurrent = myList3.head;
    int h1 = current.getData();                                  
    Node newNode = new Node(h1);
    if (newcurrent == null)     
        //the problem is with this code                                             
        newcurrent = newNode;                           
    else {                                     
        if (newcurrent.getLink() == null) {
            newNode.setLink(newcurrent.getLink());                                         
            newcurrent.setLink(newNode);                                      
        } else {                                        
            Node current11 = newcurrent;                                                
            while (current11.getLink() != null) {
                current11 = current11.getLink();
            }                       
            current11.setLink(newNode);                          
        }                                    
    }                                                           
    current = current.getLink();                            
} 
```

如果第三个列表为空，则该节点不会添加到第三个 LinkedList，并且我尝试了许多其他代码但它也不起作用，但是如果我在第三个 LinkedList 中输入了至少一个元素，则列表会正常添加。

我试过的其他代码：

```
newcurrent.setLink(newNode); 
```

和

```
newNode = newcurrent; 
newcurrent = newNode; 
```

和

```
newNode.setLink(newcurrent); 
newcurrent.setLink(newNode); 
```

和

```
newNode.link = newcurrent; 
newcurrent.link = newNode; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:53:38.603

```
Node newcurrent = myList3.head;
....
if (newcurrent == null)     
    //the problem is with this code                                             
    newcurrent = newNode; 
```

不知道为什么你有两个列表，但上面的最后一行只是分配给局部变量。应该改为如下？

```
myList3.head = newNode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:17:50.237

我认为你有点过于复杂了。列表中的链接已经存在。您只需要链接`myList3.tail`到`myList1.head`，无需循环添加每个节点。由于您看起来不像在存储 a `tail`，因此您需要迭代到末尾`myList3`才能找到它。

```
if (myList3.head == null)
    myList3.head = myList1.head;
else {
    Node list3iter = myList3.head;
    while (list3iter.getLink() != null) {
        list3iter = list3iter.getLink();
    }
    list3iter.setLink(myList1.head);
    }
} 
```

进一步说明，我发现尝试跟踪诸如`current`、`current11`、`newcurrent`等名称是很痛苦的。它们对我的大脑意味着几乎相同的东西。如果您像我一样，更具描述性的命名可能会帮助您跟踪变量在此处的用途。

# python-2.7 - Python中需要相同的相对级别节点（兄弟姐妹）DAG算法

> ID：14267731
> 
> 赞同：0
> 
> 时间：2013-01-10T21:37:51.203
> 
> 标签：python-2.7, ontology, directed-acyclic-graphs

因此，我目前正在开发一个快速而肮脏的 Python 项目，该项目支持由字典构成的数据结构，其键是来自开放生物本体格式的 GOID。它散列到另一个字典，其中包含父节点或术语和子节点或术语的列表，帮助我形成本体中给定节点的所有子节点或所有祖先的列表（使用 GO .obo 文件，如果这对任何人都有帮助）。

我的问题是我一直在寻找一种算法，它可以帮助我返回与给定节点 id 在同一级别上的所有相同节点，该节点 id 必须是相对的，因为可能有多个路径到节点（它是有向的无环图，但每个节点可以有多个父节点）。我基本上需要查找节点的父节点，将父节点的子节点全部存储在一个公共列表中，然后在添加的每个节点上重复此过程，而不会重复节点或显着减慢计算速度。

我认为这可以很容易地使用一组来防止重复条目，并且只跟踪我访问过的父母，直到所有兄弟姐妹的父母都被访问过而无法添加新的父母，但我怀疑这可能非常低效。如果有人对这种算法有经验，我们将不胜感激！希望这足够清楚，可以做出回应。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:54:54.577

好的，这就是我到目前为止所开发的，但由于某些奇怪的原因，它似乎一直给我错误的值。是否有任何人可以看到我意外未正确终止的小错误？

```
 # A helper function to find generations of a given node
  def getGenerationals(self,goid):
    quit = False
    visitedParents = set()
    generation = set()
    tempGen = set()
    generation.add(goid)
    while not quit:
      quit = True
      generation |= tempGen
      tempGen = set()
      print "TEMP GEN:",tempGen
      for g in generation:
        parents = set(self._terms[g]['p'])
        for p in parents:
          if p not in visitedParents:
            visitedParents.add(p)
            print "Parent:",p
            quit = False
            tempGen |= set(self._terms[p]['c'])
    raw_input("Break")
    return generation

  # Working function
  def getGeneration(self,goid):
    generation = list(self.getGenerationals(goid))
    generation.remove(goid)
    return list(generation) 
```

# android - 更换方向后丢失的片段Android

> ID：14267733
> 
> 赞同：1
> 
> 时间：2013-01-10T21:38:00.270
> 
> 标签：android, android-fragments, onconfigurationchanged

我有一个在 onCreate 中加载片段（比如 Fragment1）的活动。当用户按下 Fragment1 中的按钮时，我将 Fragment1 替换为新的 Fragment，例如 Fragment2。问题在于，在 Fragment2 中更改方向时，将重新创建活动并显示 Fragment1 而不是 Fragment2。（因为我在 onCreate 中创建了 Fragment1）我怎样才能坚持 Fragment2 并在方向改变时保持其状态？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:46:41.773

当片段事务发生时，分配一个变量以便您知道正在创建哪个片段。然后覆盖 OnSavedInstanceState 并将您的变量传递到包中。

然后在方向更改时，将调用 onCreate，您可以从 savedInstanceStateBundle 中检索您的变量。然后，您可以选择将在 onCreate 中“加载”哪个片段。

# mysql - MySQL全文表结构

> ID：14267735
> 
> 赞同：0
> 
> 时间：2013-01-10T21:38:08.557
> 
> 标签：mysql, database, full-text-search, large-data-volumes

我有一个包含 6000 万多条记录的数据库。目前的设置是有 1 张桌子有 30+ 百万和几个小桌子，每张桌子有 500 万（ish）。每个表的数据结构都是相同的。第一次创建我们搜索的人（3-4 年前，在我来到这里之前）使用了多个小桌子。我们`match against`为每个连接使用。我的老板和他的印象是，使用多个表可以让 MySQL 同时搜索每个表。在我读到的所有内容中，每个人都说一张大桌子会更好，但随着 30 多万张桌子变大，它的速度似乎会显着放缓，有时需要 40 多秒。这比它应该慢吗？

选择语句

```
SELECT $stuff FROM table1 WHERE MATCH (Name) AGAINST ('+john +smith' IN BOOLEAN MODE) UNION ALL
SELECT $stuff FROM table2 WHERE MATCH (Name) AGAINST ('+john +smith' IN BOOLEAN MODE) UNION ALL
SELECT $stuff FROM table3 WHERE MATCH (Name) AGAINST ('+john +smith' IN BOOLEAN MODE) UNION ALL
SELECT $stuff FROM table4 WHERE MATCH (Name) AGAINST ('+john +smith' IN BOOLEAN MODE) UNION ALL
SELECT $stuff FROM table5 WHERE MATCH (Name) AGAINST ('+john +smith' IN BOOLEAN MODE) UNION ALL
SELECT $stuff FROM table6 WHERE MATCH (Name) AGAINST ('+john +smith' IN BOOLEAN MODE) UNION ALL
SELECT $stuff FROM table7 WHERE MATCH (Name) AGAINST ('+john +smith' IN BOOLEAN MODE) UNION ALL
SELECT $stuff FROM table8 WHERE MATCH (Name) AGAINST ('+john +smith' IN BOOLEAN MODE) UNION ALL
SELECT $stuff FROM table9 WHERE MATCH (Name) AGAINST ('+john +smith' IN BOOLEAN MODE) UNION ALL
SELECT $stuff FROM table10 WHERE MATCH (Name) AGAINST ('+john +smith' IN BOOLEAN MODE) 
```

这些表是 MyISAM，并且 col 上有一个全文索引`Name`。`Table3`是一个拥有 30+ 百万条记录（大约 10gb）的记录。将它放在一张表中或将其拆分会大大提高性能吗？我还缺少其他东西？或者是 60+ 百万条记录很大以获得对全文搜索的快速响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:47:20.550

先来个小笔记。除了“尝试改变它”之外，没有其他真正的答案。也就是说，

如果您总是查询所有表并且您主要进行读取，那么我很确定使用一张大表会更快。

使用联合（或全部联合）将始终将单个结果放在临时表中，如果该表足够大，它将在磁盘上创建。如果您有一张大表，您可以将结果直接返回给客户端。

如果你做了很多插入，如果你把它们放在一个较小的表中，它们会更快（因为要遍历的索引更小。

但是，如果您可以确定哪些表可能返回结果并仅在查询中使用它们，您可以获得很多拆分它们。这也可以通过[分区来完成](http://dev.mysql.com/doc/refman/5.5/en/partitioning.html)

此外，如果您可以将查询放在您的应用程序中并并行执行它们并在 MySQL 外部进行连接，您可能会获得一些性能，但同样，您需要尝试和测量才能真正了解。

# ios - 根据 iPhone 屏幕大小显示不同的 xib 文件

> ID：14267736
> 
> 赞同：0
> 
> 时间：2013-01-10T21:38:09.180
> 
> 标签：ios, view, uiviewcontroller, toggle, iphone-5

我现在已经制作了一些适用于 iPhone 5 和 iPhone 的应用程序，并且根据 frame.view.height 对所有内容进行编程和调整大小确实变得很麻烦，所以这次我在我的 xib 文件中进行了视图，一个使用 iPhone 5个视网膜UIView和一个带有常规UIView的...现在，如果用户使用的是iPhone 4-，我如何显示一个，如果用户使用的是iPhone5+，则如何显示另一个...我假设它将在某处完成应用委托。

我可以通过检查 ViewDidAppear 中的超级视图帧高度来检测用户是否使用 iPhone 5（*它在 ViewDidLoad 中不起作用）

但是我从那里去哪里选择我显示的视图...我有 1 个视图控制器，并且 xib 文件中的两个视图内容都连接到受控的视图。视图本身没有连接...只有一个带有空白 Xcode 项目附带的默认“*view”，我不知道如何添加第二个。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:24:19.747

您可以测试`[UIScreen mainScreen].bounds.size.height`而不是您的视图来准确找到屏幕的高度。如果是 480 就是 iPhone 4/4s，如果是 568 就是 iPhone 5 4 英寸屏幕

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T07:30:06.537

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        // iPhone Classic
    }
    if(result.height == 568)
    {
        // iPhone 5
    }
} 
```

# cygwin - 能够在 cygwin 控制台中单击文件名以启动文件

> ID：14267738
> 
> 赞同：1
> 
> 时间：2013-01-10T21:38:25.503
> 
> 标签：cygwin, putty, iterm

iTerm for mac 有一个很棒的功能，它允许您在终端中按住 ctrl 单击文件名。（即来自 ls 或 find 等），终端将尝试使用给定文件类型的默认应用程序启动该文件。

我熟悉使用命令从 cygwin 打开文件的各种方法，但如果有人知道鼠标单击打开文件的方法，我会更感兴趣。

想知道是否有人在 cygwin/putty 中看到/使用过这样的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:15:43.030

这是在 Mintty 终端中实现的以及许多其他不错的功能，因此请使用它而不是默认的 cygwin ，如果您不从[此处](https://code.google.com/p/mintty/)下载它，您应该已经拥有它。

# gwt - 使用 phoneGap 让 GWT 应用程序在我的手机上运行

> ID：14267739
> 
> 赞同：1
> 
> 时间：2013-01-10T21:38:28.770
> 
> 标签：gwt, cordova

当您创建 GWT 应用程序时，您可以将其作为 Web 应用程序运行并将您的浏览器指向主页并且它可以工作。现在，在这种情况下，您的浏览器正在从服务器获得 Javascript，因此从您的 Javascript 对服务器的所有调用都可以正常工作。但是，如果您随后获取生成的 Java 脚本，而不是将其从服务器获取到服务器，只是将其保存在本地，您将如何让服务器调用正常工作。假设您的服务器在 localhost 上运行，您如何使其工作。我想要做的是获取一个工作的 GWT 应用程序并提取生成的 Java 脚本并将其包装在一个启用 phoneGap 的应用程序中，但我无法让我的服务器调用工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:03:15.293

而不是尝试临时方法。您应该查看 MGWT 和 PhoneGap - Reference [http://www.m-gwt.com/](http://www.m-gwt.com/)提供的选项。

# amazon-s3 - 如何通过 API 获取用户的 Google Cloud 存储项目列表？

> ID：14267740
> 
> 赞同：3
> 
> 时间：2013-01-10T21:38:29.817
> 
> 标签：amazon-s3, storage, google-cloud-storage

我正在努力将 PaaS 产品与 Google Cloud Storage API v2 集成，并且很高兴 OAuth2 可用。让我想知道的是，必须在每个请求上指定“x-goog-project-id”标头，因为这意味着我的产品的用户会在漂亮的 OAuth2 过程中额外提供该数字。我知道我可以要求我的产品的用户按下“将此作为可互操作存储访问的默认项目”按钮来启用 v1 访问，但这对用户来说相当不友好，而且听起来也不太适合未来。

相反，我想知道是否有办法使用用户的 OAuth2 访问令牌来检索用户有权访问的 Cloud Storage 项目列表。然后我可以让用户决定使用哪个项目。这样的 API 存在吗？未来提供这样的 API 的可能性有多大？有没有其他方法来处理这个特殊问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:15:08.043

没有 API 可以列出用户的 Cloud Storage 项目。用户必须向您提供他们的项目 ID。

# xcode - Xcode 为在 .pch 文件中导入的 C 函数生成警告“函数 N 的隐式声明在 C99 中无效”

> ID：14267741
> 
> 赞同：5
> 
> 时间：2013-01-10T21:38:32.253
> 
> 标签：xcode

与此 SO 主题中描述的行为不同：[xCode 4.4 没有获取所有 .pch 文件头导入？](https://stackoverflow.com/questions/11840622/xcode-4-4-does-not-get-all-the-pch-file-headers-imports)，我的项目确实构建成功，但无论如何我看到 Xcode 在它的编辑器中给我这些恼人的黄色高光。

我如何教 Xcode 获取 .pch 文件头导入，或者这是一个错误的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T22:09:59.883

这很奇怪，但是在重新启动 Xcode 并清理构建文件夹后（只需一个命令+alt+shift+K 以响应@Matthias 评论）警告就消失了。

我说“奇怪”是因为我确实看到它们大约一周（在我提取了几个小的实用 C 函数作为 Cocoa Pod 并开始将它们导入我的 .pch 文件中之后）。

如果我再次看到此行为并注意有关它如何发生的任何详细信息，我将在此处提供更多详细信息。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-06-26T07:12:18.057

我通过在我的 xcode 项目的 .pch 文件中添加 #include <arpa/inet.h> 来修复它

# sql-server - 在 SQL Server 中将数据插入到表的列中

> ID：14267745
> 
> 赞同：0
> 
> 时间：2013-01-10T21:38:39.597
> 
> 标签：sql-server, tsql, triggers

我有一个有 2 列的表：`SolarDate`,`GregorianDate`

我有一个在 T-SQL 中将公历日期转换为太阳日期的函数。当一行插入到这个表中时，它只会填充`GregorianDate`列。

我想在插入一行时，`SolarDate`也填充字段。

我需要触发吗？还是别的东西？

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T21:42:39.410

You could use a trigger - or just define your `SolarDate` as a **computed column** based on that function that you have.

In that case - you need to first remove that column `SolarDate` that you already have, and then add it again as a **computed column**:

```
ALTER TABLE dbo.YourTable
ADD SolarDate AS dbo.DetermineSolarDate(GregorianDate) 
```

This would constantly and automatically determine the `SolarDate` whenever you need that value, and you don't need to have a trigger in place for this to work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:41:47.560

您可以在使用 UDF 的表上创建计算列。

```
CREATE FUNCTION ArbSQ
(
    @Num1 INT
)
RETURNS INT
AS
BEGIN

    RETURN POWER(@Num1, 2)

END
GO

CREATE TABLE MyTable
(
    MyNum INT
    ,MySQ AS dbo.ArbSQ(MyNum) 
)

INSERT INTO MyTable
VALUES (1), (2), (3)

SELECT *
FROM MyTable 
```

在此示例中（不再使用标量 UDF），计算列可以是[PERSISTED](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)；

```
CREATE TABLE MyTable
(
    MyNum INT
    ,MySQ AS POWER(MyNum, 2) PERSISTED
)

INSERT INTO MyTable
VALUES (1), (2), (3)

SELECT *
FROM MyTable 
```

# listview - ItemCommand Update 和 ItemUpdating 在 ListView 中不起作用

> ID：14267748
> 
> 赞同：0
> 
> 时间：2013-01-10T21:38:52.757
> 
> 标签：listview, user-controls

我似乎无法让我的 Listview 更新命令工作。这是我的数据网格：

```
<asp:ListView ID="lvECOItems" runat="server" 
    EnableViewState="False" DataKeyNames="ID,ECOID"
    onitemupdating="lvECOItems_ItemUpdating" 
    EnableModelValidation="True" 
    onitemcommand="lvECOItems_ItemCommand" 
    onitemcanceling="lvECOItems_ItemCanceling" 
    onitemdeleting="lvECOItems_ItemDeleting" 
    onitemediting="lvECOItems_ItemEditing">
    <AlternatingItemTemplate>
        <div class="listViewRow" style="border-bottom: solid 1px #C0C0C0; background-color: #fff; padding-top: 5px; padding-bottom: 5px;">
            <table style="width: 100%;" class="data-table">
                <tr>
                    <td style="width: 3%;"><asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit"></asp:LinkButton></td>
                    <td style="width: 8%;"><asp:Label ID="DocumentNumber" runat="server" Text='<%# Eval("DocumentNumber") %>'></asp:Label></td>
                    <td style="width: 10%;"><asp:Label ID="title" runat="server" Text='<%# Eval("Title") %>'></asp:Label></td>
                    <td style="width: 2%; text-align:center;"><asp:Label ID="RevisionFrom" runat="server" Text='<%# Eval("RevisionFrom") %>'></asp:Label></td>
                    <td style="width: 2%; text-align:center;"><asp:Label ID="To" runat="server" Text='<%# Eval("To") %>'></asp:Label></td>
                    <td style="width: 1%; text-align:right;"><asp:ImageButton ID="btnDelete" ToolTip="Delete this record" ImageUrl="~/images/delete.jpg" runat="server" OnClientClick="return confirm('Are you sure you want to delete this record?')" CausesValidation="False" CommandName="Delete" Text="Delete"></asp:ImageButton></td>
                </tr>
            </table>
            <asp:Label ID="IDLabel" Visible="false" runat="server" Text='<%# Eval("ID") %>' ></asp:Label>
            <asp:Label ID="ECOIDLabel" Visible="false" runat="server" Text='<%# Eval("ECOID") %>' ></asp:Label>
        </div>
    </AlternatingItemTemplate>
    <LayoutTemplate>
        <div class="listViewHeader">
            <table style="width: 100%; border-bottom: solid 1px #808080; border-top: solid 1px #808080;" class="data-table">
                <tr>
                    <td class="rowheader" style="width: 3%;"></td>
                    <td class="rowheader" style="width: 8%;"></td>
                    <td class="rowheader" style="width: 10%;"></td>
                    <td class="rowheader" style="width: 4%; text-align:center; border-bottom: solid 1px #fff; font-style: italic;" colspan="2">Revision</td>
                </tr>
                <tr>
                    <td class="rowheader" style="width: 3%;"></td>
                    <td class="rowheader" style="width: 8%;">Document #</td>
                    <td class="rowheader" style="width: 10%;">Title</td>
                    <td class="rowheader" style="width: 2%; text-align:center;">From</td>
                    <td class="rowheader" style="width: 2%; text-align:center;">To</td>
                    <td class="rowheader" style="width: 1%;"></td>
                </tr>
            </table>
        </div>
       <asp:PlaceHolder runat="server" ID="itemPlaceholder"></asp:PlaceHolder>
    </LayoutTemplate>
    <EmptyItemTemplate><div></div></EmptyItemTemplate>
    <InsertItemTemplate></InsertItemTemplate>
    <SelectedItemTemplate></SelectedItemTemplate>
    <EmptyDataTemplate>
        <div class="listViewEmptyDataTemplate" style="width: 650px;">
            <span>
                This list does not contain any items.
            </span>
        </div>
    </EmptyDataTemplate>
    <EditItemTemplate>
        <div class="listViewEditRow" style="background-color: #fff; border-top: solid 1px #000; border-bottom: solid 1px #000; padding-top: 10px; padding-left: 10px">
            <asp:Label ID="IDLabel" Visible="false" runat="server" Text='<%# Bind("ID") %>' ></asp:Label>
            <asp:Label ID="ECOIDLabel" Visible="false" runat="server" Text='<%# Bind("ECOID") %>' ></asp:Label>
            <div style="float: left;">
                <table class="data-table">
                    <tr>
                        <td style="width: 175px;">Document Number:</td>
                        <td colspan="3"><asp:Textbox ID="txtDocumentNumber" Width="300px" runat="server" Text='<%# Bind("DocumentNumber") %>'></asp:Textbox></td>
                    </tr>
                    <tr>
                        <td style="width: 175px;">Title:</td>
                        <td colspan="3"><asp:Textbox ID="txttitle" Width="300px" runat="server" Text='<%# Bind("Title") %>'></asp:Textbox></td>
                    </tr>
                    <tr>
                        <td style="width: 175px;">Revision From:</td>
                        <td><asp:Textbox ID="txtRevisionFrom" Width="50px" runat="server" Text='<%# Bind("RevisionFrom") %>'></asp:Textbox></td>
                        <td>To:</td>
                        <td><asp:Textbox ID="txtTo" runat="server" Width="50px" Text='<%# Bind("To") %>'></asp:Textbox></td>
                    </tr>
                </table>
            </div>
            <div class="clear" style="margin-top: 5px;">&nbsp;</div>
            <div style="padding-bottom: 5px;">
                <asp:Button ID="LinkButton4" runat="server" Width="75px" style="margin-right: 10px;" CausesValidation="False" ValidationGroup="vgUpdate" CommandName="Update" Text="Update"></asp:Button>
                <asp:Button ID="LinkButton3" runat="server" Width="75px" ForeColor="#B22222" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:Button>
            </div>
            <asp:RequiredFieldValidator ID="vDocumentNumber" runat="server" 
                ControlToValidate="txtDocumentNumber" ValidationGroup="vgUpdate" Display="None" 
                ErrorMessage="Document # is required"></asp:RequiredFieldValidator>
            <asp:ValidationSummary ID="ValidationSummary2" ValidationGroup="vgUpdate" runat="server" ShowMessageBox="True" ShowSummary="False" HeaderText="The record cannot be updated due to the following:" />
        </div>
    </EditItemTemplate>
    <ItemTemplate>
        <div class="listViewRow" style="border-bottom: solid 1px #C0C0C0; background-color: #fff; padding-top: 5px; padding-bottom: 5px;">
            <table style="width: 100%;" class="data-table">
                <tr>
                    <td style="width: 3%;"><asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit"></asp:LinkButton></td>
                    <td style="width: 8%;"><asp:Label ID="DocumentNumber" runat="server" Text='<%# Eval("DocumentNumber") %>'></asp:Label></td>
                    <td style="width: 10%;"><asp:Label ID="title" runat="server" Text='<%# Eval("Title") %>'></asp:Label></td>
                    <td style="width: 2%; text-align:center;"><asp:Label ID="RevisionFrom" runat="server" Text='<%# Eval("RevisionFrom") %>'></asp:Label></td>
                    <td style="width: 2%; text-align:center;"><asp:Label ID="To" runat="server" Text='<%# Eval("To") %>'></asp:Label></td>
                    <td style="width: 1%; text-align:right;"><asp:ImageButton ID="btnDelete" ToolTip="Delete this record" ImageUrl="~/images/delete.jpg" runat="server" OnClientClick="return confirm('Are you sure you want to delete this record?')" CausesValidation="False" CommandName="Delete" Text="Delete"></asp:ImageButton></td>
                </tr>
            </table>
            <asp:Label ID="IDLabel" Visible="false" runat="server" Text='<%# Eval("ID") %>' ></asp:Label>
            <asp:Label ID="ECOIDLabel" Visible="false" runat="server" Text='<%# Eval("ECOID") %>' ></asp:Label>
        </div>
    </ItemTemplate>
</asp:ListView> 
```

和我的`ItemCommand`活动：

```
protected void lvECOItems_ItemCommand(object sender, ListViewCommandEventArgs e)
{
    Label ecoItemIDLabel = (Label)e.Item.FindControl("IDLabel");
    string id = ecoItemIDLabel.Text;
    // get the list item id from the ListView
    if (!String.IsNullOrEmpty(this.ecoID) && !String.IsNullOrEmpty(id))
    {
        if (e.CommandName == "Delete")
        {
            ECOItemsRepository ecoItemsRepository = new ECOItemsRepository();
            ECOItems ecoItems = new ECOItems();
            ecoItems.ECOID = this.ecoID;
            ecoItems.ID = Int32.Parse(id);
            ecoItemsRepository.Delete(ecoItems);
        }
        else if (e.CommandName == "Update")
        {
            ECOItemsRepository ecoItemsRepository = new ECOItemsRepository();
            ECOItems ecoItems = new ECOItems();

            Label IDLabel = (Label)e.Item.FindControl("IDLabel");
            TextBox txtDocumentNumber = (TextBox)e.Item.FindControl("txtDocumentNumber");
            TextBox txttitle = (TextBox)e.Item.FindControl("txttitle");
            TextBox txtRevisionFrom = (TextBox)e.Item.FindControl("txtRevisionFrom");
            TextBox txtTo = (TextBox)e.Item.FindControl("txtTo");

            ecoItems.ECOID = this.ecoID;
            ecoItems.ID = Int32.Parse(IDLabel.Text);
            ecoItems.DocumentNumber = txtDocumentNumber.Text;
            ecoItems.title = txttitle.Text;
            ecoItems.RevisionFrom = txtRevisionFrom.Text;
            ecoItems.To = txtTo.Text;
            ecoItemsRepository.Edit(ecoItems);
        }
        BindListView();
    }
} 
```

我什至在尝试这个`ItemUpdating`事件：

```
protected void lvECOItems_ItemUpdating(object sender, ListViewUpdateEventArgs e)
{
    ECOItemsRepository ecoItemsRepository = new ECOItemsRepository();
    ECOItems ecoItems = new ECOItems();
    Label IDLabel = (Label)lvECOItems.EditItem.FindControl("IDLabel");
    TextBox txtDocumentNumber = (TextBox)lvECOItems.EditItem.FindControl("txtDocumentNumber");
    TextBox txttitle = (TextBox)lvECOItems.EditItem.FindControl("txttitle");
    TextBox txtRevisionFrom = (TextBox)lvECOItems.EditItem.FindControl("txtRevisionFrom");
    TextBox txtTo = (TextBox)lvECOItems.EditItem.FindControl("txtTo");

    ecoItems.ECOID = this.ecoID;
    ecoItems.ID = Int32.Parse(IDLabel.Text);
    ecoItems.DocumentNumber = txtDocumentNumber.Text;
    ecoItems.title = txttitle.Text;
    ecoItems.RevisionFrom = txtRevisionFrom.Text;
    ecoItems.To = txtTo.Text;
    ecoItemsRepository.Edit(ecoItems);

    this.lvECOItems.EditIndex = -1;
    BindListView(); 
```

最后，我的绑定方法：

```
protected void BindListView()
{
    if (!String.IsNullOrEmpty(this.ecoID))
    {
        ECOItemsRepository ecoItemsRepository = new ECOItemsRepository();
        this.lvECOItems.DataSource = ecoItemsRepository.GetECOItems(ecoID);
        this.lvECOItems.DataBind();
        this.lvECOItems.Enabled = true;
    }
    else
    {
        this.lvECOItems.Enabled = false;
    }
} 
```

当我单击编辑链接时，ListView 会像它应该那样进入编辑模式。

当我单击更新按钮时，`EditItemTemplate`它不会触发`ItemCommand`事件。删除和取消都有效。

该`ItemUpdating`事件根本不会触发。

注意：此 ListView 位于 sharepoint webpart 内的用户控件中，因此用户控件是动态创建的。我有一个偷偷摸摸的怀疑它与在回发上绑定网格有关。但如果我不这样做，则列表视图不会填充，除非页面的初始加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:41:28.563

我决定采用不同的方法，因为我无法使更新正常工作。相反，我只使用 Select 命令和 SelectedIndexChanging 事件来填充我当前用于插入的控件集。ItemTemplate 中的链接按钮标记为“编辑”，但使用 CommandName="Select"。不是一个完美的解决方案，但它有效。

# image-processing - 查找条形码和相机之间的距离？

> ID：14267750
> 
> 赞同：3
> 
> 时间：2013-01-10T21:39:04.987
> 
> 标签：image-processing, computer-vision, robotics

如果知道实际条形码的大小和相机检测到的条形码所有角的（x，y），是否可以找到检测到的qr条形码（正方形）和相机之间的距离？

即使相机与条形码成一定角度，我也希望该方法能够正常工作。

我尝试使用像 f=d*z/D 这样的简单方程，其中 f 是相机的局部长度，D 是对象的大小，d 是检测到的对象的宽度（以像素为单位），z 是两者之间的距离相机和条形码。首先，我使用已知距离的数据计算焦距，然后相应地获取 z 值。

虽然上述方法效果很好，但如果相机倾斜，它会产生很多错误。

有没有更好的方法来做到这一点？

另外，我只能使用一个摄像头，不能使用两个摄像头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:25:12.743

使用您当前的公式（您声明效果很好）针对最长边及其相反，然后平均结果。

或者，只需平均最长边及其对边的长度。这些关系都是线性的，因此您最终应该得到相同的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T13:39:16.737

首先你要知道相机的角度。如果您无法从设备中读取该参数，则可以使用其他措施估计该参数。

例如，您知道条形码是矩形的。因此，通过检测它，您可以获得四个角度，并从中估计出同形矩阵。通过了解单应矩阵，您可以通过将坐标乘以单应逆矩阵来简化问题。

当出现已知模式（例如棋盘）时，单应矩阵广泛用于相机校准。

# php - 通过 php shell_exec 调用 osascript 不起作用

> ID：14267756
> 
> 赞同：0
> 
> 时间：2013-01-10T21:39:40.590
> 
> 标签：php, shell-exec, osascript

当我遇到这个问题时，我正在尝试使用 osascript 做一些事情。

这是我的测试：

```
/usr/bin/osascript <<-EOF

    tell application "System Events"
        activate
        display dialog "Hello world"
    end tell

EOF 
```

这是我的 PHP 文件。

```
<?php
$output = shell_exec("./test");
echo "<pre>$output</pre>";
?> 
```

你有什么想法为什么这不起作用？（这不是很重要，但我只是好奇）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:05:11.930

我怀疑 osascript 可执行文件需要设置环境变量才能正常工作，这就是为什么从控制台可以正常工作的原因。请参阅[此答案](https://stackoverflow.com/a/10056329/472495)以向您展示如何从 PHP 进行设置。

在我的情况下，它是`HOME`变量，但它可能是别的东西。继续添加它们直到它起作用！

# javascript - 淡化单独的 div

> ID：14267759
> 
> 赞同：0
> 
> 时间：2013-01-10T21:39:58.450
> 
> 标签：javascript, html, fadein, fadeout

不知道如何做到这一点，但我已经尝试过完成这项工作，但是当我放入`fadeOut`.

我试图在没有按钮和信息跳跃的情况下调整 div 的速度`fadeIn`和`fadeOut`速度。

**HTML**

```
<div class="item-1 content-item">
    I am the 1st image content
</div>

<div class="item-2 content-item" style="display: none;">
    I am the 2nd image content
</div>

<div class="item-3 content-item" style="display: none;">
    I am the 3rd image content
</div>

<div class="item-1 content-item">
    I am the content for item 1
</div>

<div class="item-2 content-item" style="display: none;">
    I am the content for item 2
</div>

<div class="item-3 content-item" style="display: none;">
    I am the content for item 3
</div>

<ul>
    <li class="change-item" data-item="1">Item 1</li>
    <li class="change-item" data-item="2">Item 2</li>
    <li class="change-item" data-item="3">Item 3</li>
</ul> 
```

javascript

```
$('.change-item').click(function(){
    var this_item = $(this).attr("data-item");
    $('.content-item').hide();
    $('.item-' + this_item).fadeIn();
}); 
```

# java - 在 IntelliJ IDEA 中使用 JUnit RunListener

> ID：14267766
> 
> 赞同：7
> 
> 时间：2013-01-10T21:40:30.123
> 
> 标签：java, junit, intellij-idea, maven-surefire-plugin

我正在处理需要在运行每个 JUnit 测试之前执行一些操作的项目。`RunListener`使用可以添加到 JUnit 核心的方法解决了这个问题。项目组装是使用 Maven 完成的，所以我的`pom`文件中有以下几行：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12</version>
            <configuration>
                <properties>
                    <property>
                        <name>listener</name>
                        <value>cc.redberry.core.GlobalRunListener</value>
                    </property>
                </properties>
            </configuration>
        </plugin> 
```

所以，一切都使用：

```
mvn clean test 
```

但是，当使用 IntelliJ（使用其内部测试运行程序）开始测试时，我们`RunListener`中编码的操作不会执行，因此无法使用 IntelliJ 基础架构执行测试。

如我所见，IntelliJ 不会从 pom 文件中解析此配置，那么有没有办法明确告诉 IntelliJ 添加`RunListener`到 JUnit 核心？可能在配置中使用了一些 VM 选项？

使用漂亮的 IntelliJ 测试环境而不是读取 maven 输出要方便得多。

PS我需要执行的操作基本上是静态环境的重置（我的类中的一些静态字段）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T04:35:41.377

我没有看到在 Intellij 中指定 RunListener 的方法，但另一种解决方案是编写您自己的客户 Runner 并在您的测试中注释 @RunWith()。

```
public class MyRunner extends BlockJUnit4ClassRunner {
    public MyRunner(Class<?> klass) throws InitializationError {
        super(klass);
    }

    @Override
    protected void runChild(final FrameworkMethod method, RunNotifier notifier) {
        // run your code here. example:
        Runner.value = true;            

        super.runChild(method, notifier);
    }
} 
```

示例静态变量：

```
public class Runner {
    public static boolean value = false;
} 
```

然后像这样运行你的测试：

```
@RunWith(MyRunner.class)
public class MyRunnerTest {
    @Test
    public void testRunChild() {
        Assert.assertTrue(Runner.value);
    }
} 
```

这将允许您在没有 RunListener 的情况下进行静态初始化。

# java - 如何在groovy中打印特殊字符

> ID：14267768
> 
> 赞同：1
> 
> 时间：2013-01-10T21:41:03.870
> 
> 标签：java, groovy

我想在 groovy 中打印 √ (\u221A) [http://www.fileformat.info/info/unicode/char/221a/index.htm](http://www.fileformat.info/info/unicode/char/221a/index.htm)字符

```
file = new File("log.txt")
if(!file.exists()){
    file.createNewFile()
}

file.withWriter('UTF-8'){
    file.write("\u221A √")
} 
```

我在十六进制编辑器中得到**3F** 20 **E2 3F 9A**。

我不知道为什么会这样。在第二种情况下，它看起来类似于 0xE2 0x88 0x9A ，这是该字符的正确 UTF-8。

我尝试使用选项 -c UTF-8 运行 groovy，但我得到了`3F 20 3F`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T01:17:01.650

原来我需要

```
JAVA_TOOL_OPTIONS -Dfile.encoding=UTF8 
```

在我的 Windows 环境变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-21T19:39:10.067

对于那些使用 Groovy 脚本处理此错误并使用另一个控制台（例如 Git Bash）的人，请将变量名称更改`JAVA_TOOL_OPTIONS`为`JAVA_OPTS`

```
export JAVA_OPTS=-Dfile.encoding=UTF-8 
```

# ios - iPad 子视图似乎具有纵向方向

> ID：14267771
> 
> 赞同：0
> 
> 时间：2013-01-10T21:41:19.553
> 
> 标签：ios, objective-c, ios5, ios6

我有一个只支持横向的应用程序，它在 ios6 中运行良好，但在 ios5 中，一些子视图似乎具有纵向坐标和大小。我放了

```
- (BOOL)shouldAutorotateToInterfaceOrientation:   (UIInterfaceOrientation)interfaceOrientation {
   return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
      interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

我能想象到的任何地方，但这些视图似乎都停留在肖像上，我的宽度参数似乎是高度，反之亦然。

主视图似乎是正确的，但一些子视图似乎是错误的，尤其是那些从其他元素计算它们的位置和大小的视图，我害怕交换尺寸，因为这会破坏 ios6，如果我不想做任何条件代码可以避免。

有人见过这个吗？我阅读了其他一些问题，但它们似乎处理了轮换，但就我而言，我没有轮换。

基本上在我的导航控制器的 viewDidLoad 中

我的框架有：

```
2013-01-10 17:14:29.445 EdwardsSync[29070:c07] Width:: 768.000000
2013-01-10 17:14:29.445 EdwardsSync[29070:c07] Height:: 1024.000000 
```

即使它出现在风景中。框架和边界也是如此。

如果我等到 viewDidAppear 坐标正确，这很有趣。

有没有办法更快地告诉我的应用程序方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:53:40.340

UIViewController 对旋转的支持在 iOS 6 中发生了变化。查看此页面的处理视图旋转部分：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

特别是检查`supportedInterfaceOrientations`和`shouldAutorotate`方法。头文件中的注释很有帮助。

另外，您在应用程序的 Info.plist 文件中定义了哪些方向？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:10:38.603

还要进入 Interface Builder 中的 xib 并调整视图的尺寸。视图下的属性选择方向横向。它在模拟指标下。您还可以指定 1024 x 768 等大小指标。

如果需要，在构建设置中删除纵向视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T04:46:02.780

为您的视图设置 autoresizingMask

```
yourview.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth; 
```

使用它来获取高度和宽度

```
CGRectGetWidth(self.view.frame)
CGRectGetHeight(self.view.frame) 
```

# jquery - 如何重置先前选择的行并突出显示 JQGrid 中的新行

> ID：14267778
> 
> 赞同：1
> 
> 时间：2013-01-10T21:41:40.693
> 
> 标签：jquery, jqgrid

我选择并突出显示了第 1 行，然后选择第 2 行被突出显示；当我选择第 2 行时，我只想用 CSS 突出显示第 2 行，第 1 行应该是默认的，或者可能是第 1 行，我想删除 CSS。请帮忙

```
onSelectRow: function(id){
              var rowData = $(this).getRowData(id); 
              var memberId= rowData['memberId'];//replace name with any column

              if(id!==lastSel){ 

                 $(this).find('.ui-state-highlight').css({background:'#80BFFF'});
                 lastSel=id; 

                }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:49:16.850

看来您实际上是在修改“选定”行的 CSS。为了正确删除先前选定元素的“选定”突出显示，您还必须删除 css 修改。我建议将您的突出显示颜色放在选定的类中，然后基于此添加/删除：

**CSS**

```
.selected{
background-color:#80BFFF !important;
} 
```

**JS**

```
onSelectRow: function(id){
          var rowData = $(this).getRowData(id); 
          var memberId= rowData['memberId'];//replace name with any column

          if(id!==lastSel){
             $(this).find(".selected").removeClass('selected');
             $('#results_table').jqGrid('resetSelection', lastSel, true);

             $(this).find('.ui-state-highlight').addClass('selected');
             lastSel=id; 

            }

    } 
```

# javascript - 使用 JavaScript 对 HTML 表格进行排序

> ID：14267781
> 
> 赞同：97
> 
> 时间：2013-01-10T21:41:48.180
> 
> 标签：javascript, sorting, html-table

我正在寻找一个表格排序解决方案（在 JavaScript 中），但我似乎还找不到合适的解决方案。我只需要它按字母顺序对每一列进行排序。它不需要忽略任何代码或任何数字或使用货币。只需单击列标题即可将其从已排序的 az/za 切换。

有谁知道这样一个非常简单的解决方案？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2018-03-01T01:46:28.717

只是重新审视[一个旧的解决方案](https://stackoverflow.com/questions/3160277/jquery-table-sort/19947532#19947532)，我想我会在它的 5 周年纪念日给它改头换面！

*   纯 Javascript (ES6)
*   是否进行字母和数字排序 - 升序和降序
*   适用于**Chrome**、**Firefox**、**Safari**（和**IE11**，见下文）

### 快速解释

1.  `click`向所有标题 ( ) 单元格添加事件`th`...
2.  对于当前`table`，查找所有行（第一行除外）...
3.  根据单击列的值对行进行排序...
4.  以新的顺序将行重新插入表中。

```
const getCellValue = (tr, idx) => tr.children[idx].innerText || tr.children[idx].textContent;

const comparer = (idx, asc) => (a, b) => ((v1, v2) => 
    v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2) ? v1 - v2 : v1.toString().localeCompare(v2)
    )(getCellValue(asc ? a : b, idx), getCellValue(asc ? b : a, idx));

// do the work...
document.querySelectorAll('th').forEach(th => th.addEventListener('click', (() => {
    const table = th.closest('table');
    Array.from(table.querySelectorAll('tr:nth-child(n+2)'))
        .sort(comparer(Array.from(th.parentNode.children).indexOf(th), this.asc = !this.asc))
        .forEach(tr => table.appendChild(tr) );
})));
```

```
table, th, td {
    border: 1px solid black;
}
th {
    cursor: pointer;
}
```

```
<table>
    <tr><th>Country</th><th>Date</th><th>Size</th></tr>
    <tr><td>France</td><td>2001-01-01</td><td><i>25</i></td></tr>
    <tr><td><a href=#>spain</a></td><td><i>2005-05-05</i></td><td></td></tr>
    <tr><td><b>Lebanon</b></td><td><a href=#>2002-02-02</a></td><td><b>-17</b></td></tr>
    <tr><td><i>Argentina</i></td><td>2005-04-04</td><td><a href=#>100</a></td></tr>
    <tr><td>USA</td><td></td><td>-6</td></tr>
</table>
```

* * *

## IE11 支持（非 ES6）

如果你想支持 IE11，你需要放弃 ES6 语法并使用 and 的替代[`Array.from`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from#Polyfill)方法[`Element.closest`](https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#Polyfill)。

### IE

```
var getCellValue = function(tr, idx){ return tr.children[idx].innerText || tr.children[idx].textContent; }

var comparer = function(idx, asc) { return function(a, b) { return function(v1, v2) {
        return v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2) ? v1 - v2 : v1.toString().localeCompare(v2);
    }(getCellValue(asc ? a : b, idx), getCellValue(asc ? b : a, idx));
}};

// do the work...
Array.prototype.slice.call(document.querySelectorAll('th')).forEach(function(th) { th.addEventListener('click', function() {
        var table = th.parentNode
        while(table.tagName.toUpperCase() != 'TABLE') table = table.parentNode;
        Array.prototype.slice.call(table.querySelectorAll('tr:nth-child(n+2)'))
            .sort(comparer(Array.prototype.slice.call(th.parentNode.children).indexOf(th), this.asc = !this.asc))
            .forEach(function(tr) { table.appendChild(tr) });
    })
}); 
```

### 比较器功能分解

为了简洁起见，我压缩了`comparer()`函数。它有点复杂/难以阅读，所以在这里再次分解/格式化/注释。

```
// Returns a function responsible for sorting a specific column index 
// (idx = columnIndex, asc = ascending order?).
var comparer = function(idx, asc) { 

    // This is used by the array.sort() function...
    return function(a, b) { 

        // This is a transient function, that is called straight away. 
        // It allows passing in different order of args, based on 
        // the ascending/descending order.
        return function(v1, v2) {

            // sort based on a numeric or localeCompare, based on type...
            return (v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2)) 
                ? v1 - v2 
                : v1.toString().localeCompare(v2);
        }(getCellValue(asc ? a : b, idx), getCellValue(asc ? b : a, idx));
    }
}; 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2013-01-10T22:15:06.637

我写了一些代码，它将按行对表格进行排序，假设只有一个`<tbody>`并且单元格没有*colspan*。

```
function sortTable(table, col, reverse) {
    var tb = table.tBodies[0], // use `<tbody>` to ignore `<thead>` and `<tfoot>` rows
        tr = Array.prototype.slice.call(tb.rows, 0), // put rows into array
        i;
    reverse = -((+reverse) || -1);
    tr = tr.sort(function (a, b) { // sort rows
        return reverse // `-1 *` if want opposite order
            * (a.cells[col].textContent.trim() // using `.textContent.trim()` for test
                .localeCompare(b.cells[col].textContent.trim())
               );
    });
    for(i = 0; i < tr.length; ++i) tb.appendChild(tr[i]); // append each row in order
}
// sortTable(tableNode, columId, false); 
```

如果您不想做出上述假设，则需要考虑在每种情况下您希望如何表现。（例如，将所有内容合二为一`<tbody>`或将所有前面的*colspan*值相加，等等）

然后，您可以将其附加到您的每个表中，例如假设标题在`<thead>`

```
function makeSortable(table) {
    var th = table.tHead, i;
    th && (th = th.rows[0]) && (th = th.cells);
    if (th) i = th.length;
    else return; // if no `<thead>` then do nothing
    while (--i >= 0) (function (i) {
        var dir = 1;
        th[i].addEventListener('click', function () {sortTable(table, i, (dir = 1 - dir))});
    }(i));
}

function makeAllSortable(parent) {
    parent = parent || document.body;
    var t = parent.getElementsByTagName('table'), i = t.length;
    while (--i >= 0) makeSortable(t[i]);
} 
```

然后调用`makeAllSortable` *onload*。

* * *

它在桌子上工作的示例[**小提琴**](http://jsfiddle.net/zscQy/)。

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2018-12-21T06:53:39.273

[Nick Grealy 接受的答案](https://stackoverflow.com/a/49041392/736937)很好，但如果您的行位于标签内，则行为有点古怪`<tbody>`（第一行从未排序，排序后的行最终位于 tbody 标签之外，可能会丢失格式）。

这是一个简单的修复，但是：

只是改变：

```
document.querySelectorAll('th').forEach(th => th.addEventListener('click', (() => {
  const table = th.closest('table');
  Array.from(table.querySelectorAll('tr:nth-child(n+2)'))
    .sort(comparer(Array.from(th.parentNode.children).indexOf(th), this.asc = !this.asc))
    .forEach(tr => table.appendChild(tr) ); 
```

到：

```
document.querySelectorAll('th').forEach(th => th.addEventListener('click', (() => {
  const table = th.closest('table');
  const tbody = table.querySelector('tbody');
  Array.from(tbody.querySelectorAll('tr'))
    .sort(comparer(Array.from(th.parentNode.children).indexOf(th), this.asc = !this.asc))
    .forEach(tr => tbody.appendChild(tr) ); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-10T21:43:40.270

它不仅仅是“排序”，而是 dataTables.net 可以满足您的需求。我每天都使用它并且得到很好的支持并且非常快（确实需要 jQuery）

[http://datatables.net/](http://datatables.net/)

> DataTables 是 jQuery Javascript 库的插件。它是一个高度灵活的工具，基于渐进增强的基础，它将向任何 HTML 表格添加高级交互控件。

Google Visualizations 是另一种选择，但需要比 dataTables 更多的设置，但不需要任何特定的框架/库（除了 google.visualizations）：

[http://code.google.com/apis/ajax/playground/?type=visualization#table](http://code.google.com/apis/ajax/playground/?type=visualization#table)

还有其他选择……特别是如果您使用其他 JS 框架之一。Dojo、Prototype 等都有可用的“表格增强”插件，至少提供表格排序功能。许多提供更多，但我会重申......我还没有遇到过像 datatables.net 一样强大和快速的。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-06-14T14:15:37.473

我知道使用 javascript 对 HTML 表进行排序的最佳方法是使用以下函数。

只需将您要排序的表的 ID 和行上的列号传递给它。它假定您正在排序的列是数字或其中包含数字，并将执行正则表达式替换以获取数字本身（非常适合货币和其他带有符号的数字）。

```
function sortTable(table_id, sortColumn){
    var tableData = document.getElementById(table_id).getElementsByTagName('tbody').item(0);
    var rowData = tableData.getElementsByTagName('tr');            
    for(var i = 0; i < rowData.length - 1; i++){
        for(var j = 0; j < rowData.length - (i + 1); j++){
            if(Number(rowData.item(j).getElementsByTagName('td').item(sortColumn).innerHTML.replace(/[^0-9\.]+/g, "")) < Number(rowData.item(j+1).getElementsByTagName('td').item(sortColumn).innerHTML.replace(/[^0-9\.]+/g, ""))){
                tableData.insertBefore(rowData.item(j+1),rowData.item(j));
            }
        }
    }
} 
```

使用示例：

```
$(function(){
    // pass the id and the <td> place you want to sort by (td counts from 0)
    sortTable('table_id', 3);
}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-10T21:46:11.877

您可以处理 json 数组和`sort`函数。这是一个非常容易操作的可维护结构（例如：排序）。

未经测试，但这是这个想法。如果您传入一个数组，在该数组中将列按照它们应该排序的顺序放置，那将支持多重排序和顺序排序。

```
var DATA_TABLE = {
    {name: 'George', lastname: 'Blarr', age:45},
    {name: 'Bob', lastname: 'Arr', age: 20}
    //...
};

function sortDataTable(arrayColNames, asc) { // if not asc, desc
    for (var i=0;i<arrayColNames.length;i++) {
        var columnName = arrayColNames[i];
        DATA_TABLE = DATA_TABLE.sort(function(a,b){
            if (asc) {
                return (a[columnName] > b[columnName]) ? 1 : -1;
            } else {
                return (a[columnName] < b[columnName]) ? 1 : -1;
            }
        });
    }
}

function updateHTMLTable() {
    // update innerHTML / textContent according to DATA_TABLE
    // Note: textContent for firefox, innerHTML for others
} 
```

现在让我们假设您需要按姓氏排序，然后是姓名，最后是年龄。

```
var orderAsc = true;
sortDataTable(['lastname', 'name', 'age'], orderAsc); 
```

它应该导致类似：

```
{name: 'Jack', lastname: 'Ahrl', age: 20},
{name: 'Jack', lastname: 'Ahrl', age: 22},
//... 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-06-04T19:23:44.363

这是一个使用纯 JavaScript 的完整示例。用于排序的算法基本上是[BubbleSort](https://en.wikipedia.org/wiki/Bubble_sort)。这是一个[小提琴](https://jsfiddle.net/m1rzupv0/)。

```
 <!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">

<script type="text/javascript">
    function sort(ascending, columnClassName, tableId) {
        var tbody = document.getElementById(tableId).getElementsByTagName(
                "tbody")[0];
        var rows = tbody.getElementsByTagName("tr");

        var unsorted = true;

        while (unsorted) {
            unsorted = false

            for (var r = 0; r < rows.length - 1; r++) {
                var row = rows[r];
                var nextRow = rows[r + 1];

                var value = row.getElementsByClassName(columnClassName)[0].innerHTML;
                var nextValue = nextRow.getElementsByClassName(columnClassName)[0].innerHTML;

                value = value.replace(',', '.'); // in case a comma is used in float number
                nextValue = nextValue.replace(',', '.');

                if (!isNaN(value)) {
                    value = parseFloat(value);
                    nextValue = parseFloat(nextValue);
                }

                if (ascending ? value > nextValue : value < nextValue) {
                    tbody.insertBefore(nextRow, row);
                    unsorted = true;
                }
            }
        }
    };
</script>
</head>
<body>
    <table id="content-table">
        <thead>
            <tr>
                <th class="id">ID <a
                    href="javascript:sort(true, 'id', 'content-table');">asc</a> <a
                    href="javascript:sort(false, 'id', 'content-table');">des</a>
                </th>
                <th class="country">Country <a
                    href="javascript:sort(true, 'country', 'content-table');">asc</a> <a
                    href="javascript:sort(false, 'country', 'content-table');">des</a>
                </th>
                <th class="some-fact">Some fact <a
                    href="javascript:sort(true, 'some-fact', 'content-table');">asc</a>
                    <a href="javascript:sort(false, 'some-fact', 'content-table');">des</a>
                <th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="id">001</td>
                <td class="country">Germany</td>
                <td class="some-fact">16.405</td>
            </tr>
            <tr>
                <td class="id">002</td>
                <td class="country">France</td>
                <td class="some-fact">10.625</td>
            </tr>
            <tr>
                <td class="id">003</td>
                <td class="country">UK</td>
                <td class="some-fact">15.04</td>
            </tr>
            <tr>
                <td class="id">004</td>
                <td class="country">China</td>
                <td class="some-fact">13.536</td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

您还可以从这里查看源代码：[https ://github.com/wmentzel/table-sort](https://github.com/wmentzel/table-sort)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-02-07T02:12:39.540

按单元格对表格行进行排序。1.简单一点，有一些特点。2.区分'数字'和'字符串'排序 3.添加切换以按ASC，DESC排序

```
var index;      // cell index
var toggleBool; // sorting asc, desc 
function sorting(tbody, index){
    this.index = index;
    if(toggleBool){
        toggleBool = false;
    }else{
        toggleBool = true;
    }

    var datas= new Array();
    var tbodyLength = tbody.rows.length;
    for(var i=0; i<tbodyLength; i++){
        datas[i] = tbody.rows[i];
    }

    // sort by cell[index] 
    datas.sort(compareCells);
    for(var i=0; i<tbody.rows.length; i++){
        // rearrange table rows by sorted rows
        tbody.appendChild(datas[i]);
    }   
}

function compareCells(a,b) {
    var aVal = a.cells[index].innerText;
    var bVal = b.cells[index].innerText;

    aVal = aVal.replace(/\,/g, '');
    bVal = bVal.replace(/\,/g, '');

    if(toggleBool){
        var temp = aVal;
        aVal = bVal;
        bVal = temp;
    } 

    if(aVal.match(/^[0-9]+$/) && bVal.match(/^[0-9]+$/)){
        return parseFloat(aVal) - parseFloat(bVal);
    }
    else{
          if (aVal < bVal){
              return -1; 
          }else if (aVal > bVal){
                return 1; 
          }else{
              return 0;       
          }         
    }
} 
```

下面是html示例

```
 <table summary="Pioneer">

                <thead>
                    <tr>
                        <th scope="col"  onclick="sorting(tbody01, 0)">No.</th>
                        <th scope="col"  onclick="sorting(tbody01, 1)">Name</th>
                        <th scope="col"  onclick="sorting(tbody01, 2)">Belong</th>
                        <th scope="col"  onclick="sorting(tbody01, 3)">Current Networth</th>
                        <th scope="col"  onclick="sorting(tbody01, 4)">BirthDay</th>
                        <th scope="col"  onclick="sorting(tbody01, 5)">Just Number</th>
                    </tr>
                </thead>

                <tbody id="tbody01">
                    <tr>
                        <td>1</td>
                        <td>Gwanshic Yi</td>
                        <td>Gwanshic Home</td>
                        <td>120000</td>
                        <td>1982-03-20</td>
                        <td>124,124,523</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Steve Jobs</td>
                        <td>Apple</td>
                        <td>19000000000</td>
                        <td>1955-02-24</td>
                        <td>194,523</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Bill Gates</td>
                        <td>MicroSoft</td>
                        <td>84300000000</td>
                        <td>1955-10-28</td>
                        <td>1,524,124,523</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>Larry Page</td>
                        <td>Google</td>
                        <td>39100000000</td>
                        <td>1973-03-26</td>
                        <td>11,124,523</td>
                    </tr>
                </tbody>
            </table> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-08-03T01:22:59.133

另一种对 HTML 表格进行排序的方法。（基于**[W3.JS HTML 排序](https://www.w3schools.com/w3js/w3js_sort.asp)**）

```
var collection = [{
  "Country": "France",
  "Date": "2001-01-01",
  "Size": "25",
}, {
  "Country": "spain",
  "Date": "2005-05-05",
  "Size": "",
}, {
  "Country": "Lebanon",
  "Date": "2002-02-02",
  "Size": "-17",
}, {
  "Country": "Argentina",
  "Date": "2005-04-04",
  "Size": "100",
}, {
  "Country": "USA",
  "Date": "",
  "Size": "-6",
}]

for (var j = 0; j < 3; j++) {
  $("#myTable th:eq(" + j + ")").addClass("control-label clickable");
  $("#myTable th:eq(" + j + ")").attr('onClick', "w3.sortHTML('#myTable', '.item', 'td:nth-child(" + (j + 1) + ")')");
}

$tbody = $("#myTable").append('<tbody></tbody>');

for (var i = 0; i < collection.length; i++) {
  $tbody = $tbody.append('<tr class="item"><td>' + collection[i]["Country"] + '</td><td>' + collection[i]["Date"] + '</td><td>' + collection[i]["Size"] + '</td></tr>');
}
```

```
.control-label:after {
  content: "*";
  color: red;
}

.clickable {
  cursor: pointer;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://www.w3schools.com/lib/w3.js"></script>
<link href="https://www.w3schools.com/w3css/4/w3.css" rel="stylesheet" />
<p>Click the <strong>table headers</strong> to sort the table accordingly:</p>

<table id="myTable" class="w3-table-all">
  <thead>
    <tr>
      <th>Country</th>
      <th>Date</th>
      <th>Size</th>
    </tr>
  </thead>
</table>
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-11-18T12:34:21.020

另一个紧凑但可读的解决方案：它只需要将类添加到要排序的每一列`.order`的元素中`<th>`

```
document.querySelectorAll('th.order').forEach(th_elem => {
    let asc=true
    const index = Array.from(th_elem.parentNode.children).indexOf(th_elem)          
    th_elem.addEventListener('click', (e) => {              
        const arr = [... th_elem.closest("table").querySelectorAll('tbody tr')]
        arr.sort( (a, b) => {
            const a_val = a.children[index].innerText
            const b_val = b.children[index].innerText                   
            return (asc) ? a_val.localeCompare(b_val) : b_val.localeCompare(a_val)
        })
        arr.forEach(elem => {                   
            th_elem.closest("table").querySelector("tbody").appendChild(elem)
        })
        asc = !asc
    })
}) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-11-18T17:32:44.947

具有 :hover 箭头效果的表格排序。只需将类添加到要排序的每一列`.order`的元素中`<th>`

```
function table_sort() {
  const styleSheet = document.createElement('style')
  styleSheet.innerHTML = `
        .order-inactive span {
            visibility:hidden;
        }
        .order-inactive:hover span {
            visibility:visible;
        }
        .order-active span {
            visibility: visible;
        }
    `
  document.head.appendChild(styleSheet)

  document.querySelectorAll('th.order').forEach(th_elem => {
    let asc = true
    const span_elem = document.createElement('span')
    span_elem.style = "font-size:0.8rem; margin-left:0.5rem"
    span_elem.innerHTML = "▼"
    th_elem.appendChild(span_elem)
    th_elem.classList.add('order-inactive')

    const index = Array.from(th_elem.parentNode.children).indexOf(th_elem)
    th_elem.addEventListener('click', (e) => {
      document.querySelectorAll('th.order').forEach(elem => {
        elem.classList.remove('order-active')
        elem.classList.add('order-inactive')
      })
      th_elem.classList.remove('order-inactive')
      th_elem.classList.add('order-active')

      if (!asc) {
        th_elem.querySelector('span').innerHTML = '▲'
      } else {
        th_elem.querySelector('span').innerHTML = '▼'
      }
      const arr = Array.from(th_elem.closest("table").querySelectorAll('tbody tr'))
      arr.sort((a, b) => {
        const a_val = a.children[index].innerText
        const b_val = b.children[index].innerText
        return (asc) ? a_val.localeCompare(b_val) : b_val.localeCompare(a_val)
      })
      arr.forEach(elem => {
        th_elem.closest("table").querySelector("tbody").appendChild(elem)
      })
      asc = !asc
    })
  })
}

table_sort()
```

```
<table>
  <thead>
    <tr>
      <th class="order">Country</th>
      <th class="order">Date</th>
      <th class="order">Size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>France</td>
      <td>2001-01-01</td>
      <td><i>25</i></td>
    </tr>
    <tr>
      <td><a href=#>spain</a></td>
      <td><i>2005-05-05</i></td>
      <td></td>
    </tr>
    <tr>
      <td><b>Lebanon</b></td>
      <td><a href=#>2002-02-02</a></td>
      <td><b>-17</b></td>
    </tr>
    <tr>
      <td><i>Argentina</i></td>
      <td>2005-04-04</td>
      <td><a href=#>100</a></td>
    </tr>
    <tr>
      <td>USA</td>
      <td></td>
      <td>-6</td>
    </tr>
  </tbody>
</table>
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-05-16T14:13:52.523

如果您的表格没有`th`s 但只有`td`s （包括标题），您可以尝试以下基于 Nick Grealy 上面的回答：

```
const getCellValue = (tr, idx) => tr.children[idx].innerText || tr.children[idx].textContent;

const comparer = (idx, asc) => (a, b) => ((v1, v2) => 
    v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2) ? v1 - v2 : v1.toString().localeCompare(v2)
    )(getCellValue(asc ? a : b, idx), getCellValue(asc ? b : a, idx));

// do the work...
document.querySelectorAll('tr:first-child td').forEach(td => td.addEventListener('click', (() => {
    const table = td.closest('table');
    Array.from(table.querySelectorAll('tr:nth-child(n+2)'))
        .sort(comparer(Array.from(td.parentNode.children).indexOf(td), this.asc = !this.asc))
        .forEach(tr => table.appendChild(tr) );
})));
```

```
@charset "UTF-8";
@import url('https://fonts.googleapis.com/css?family=Roboto');

*{
  font-family: 'Roboto', sans-serif;
  text-transform:capitalize;
  overflow:hidden;
  margin: 0 auto;
  text-align:left;
}

table {
	color:#666;
	font-size:12px;
	background:#124;
	border:#ccc 1px solid;
	-moz-border-radius:3px;
	-webkit-border-radius:3px;
	border-radius:3px;
  border-collapse: collapse;
  width: 100%;
}

table td {
	padding:10px;
	border-top: 1px solid #ffffff;
	border-bottom:1px solid #e0e0e0;
	border-left: 1px solid #e0e0e0;
	background: #fafafa;
	background: -webkit-gradient(linear, left top, left bottom, from(#fbfbfb), to(#fafafa));
	background: -moz-linear-gradient(top,  #fbfbfb,  #fafafa);
  width: 6.9in;
}

table tbody tr:first-child td
{
	background: #124!important;
  color:#fff;
}

table tbody tr th
{
  padding:10px;
  border-left: 1px solid #e0e0e0;
	background: #124!important;
  color:#fff;
}
```

```
<table>
        <tr><td>Country</td><td>Date</td><td>Size</td></tr>
        <tr><td>France</td><td>2001-01-01</td><td><i>25</i></td></tr>
        <tr><td>spain</td><td>2005-05-05</td><td></td></tr>
        <tr><td>Lebanon</td><td>2002-02-02</td><td><b>-17</b></td></tr>
        <tr><td>Argentina</td><td>2005-04-04</td><td>100</td></tr>
        <tr><td>USA</td><td></td><td>-6</td></tr>
    </table>
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-29T10:00:53.460

在页面加载时对 html 表格列进行排序

```
var table = $('table#all_items_table');
var rows = table.find('tr:gt(0)').toArray().sort(comparer(3));
for (var i = 0; i < rows.length; i++) {
    table.append(rows[i])
}
function comparer(index) {
    return function (a, b) {
        var v1= getCellValue(a, index),
        v2= getCellValue(b, index);
        return $.isNumeric(v2) && $.isNumeric(v1) ? v2 - v1: v2.localeCompare(v1)
    }
}

function getCellValue(row, index) {
    return parseFloat($(row).children('td').eq(index).html().replace(/,/g,'')); //1234234.45645->1234234
} 
```

[![在此处输入图像描述](../Images/ed5f788483238792d1c7114b132a89ac.png)](https://i.stack.imgur.com/1RgWu.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-11-16T18:43:32.180

我已经编辑了此处示例之一的代码以使用 jquery。不过，它仍然不是 100% jquery。关于这两个不同版本的任何想法，比如***每个版本的优缺点是***什么？

```
function column_sort() {
    getCellValue = (tr, idx) => $(tr).find('td').eq( idx ).text();

    comparer = (idx, asc) => (a, b) => ((v1, v2) => 
        v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2) ? v1 - v2 : v1.toString().localeCompare(v2)
        )(getCellValue(asc ? a : b, idx), getCellValue(asc ? b : a, idx));

    table = $(this).closest('table')[0];
    tbody = $(table).find('tbody')[0];

    elm = $(this)[0];
    children = elm.parentNode.children;
    Array.from(tbody.querySelectorAll('tr')).sort( comparer(
        Array.from(children).indexOf(elm), table.asc = !table.asc))
        .forEach(tr => tbody.appendChild(tr) );
}

table.find('thead th').on('click', column_sort); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-09T16:10:06.107

```
<!DOCTYPE html>
<html>
<head>
<style>
  table, td, th {
    border: 1px solid;
    border-collapse: collapse;
  }
  td , th {
    padding: 5px;
    width: 100px;
  }
  th {
    background-color: lightgreen;
  }
</style>
</head>
<body>

<h2>JavaScript Array Sort</h2>

<p>Click the buttons to sort car objects on age.</p>

<p id="demo"></p>

<script>
var nameArrow = "", yearArrow = "";
var cars = [
  {type:"Volvo", year:2016},
  {type:"Saab", year:2001},
  {type:"BMW", year:2010}
];
yearACS = true;
function sortYear() {
  if (yearACS) {
    nameArrow = "";
    yearArrow = "";
    cars.sort(function(a,b) {
      return a.year - b.year;
    });
    yearACS = false;
  }else {
    nameArrow = "";
    yearArrow = "";
    cars.sort(function(a,b) {
      return b.year - a.year;
    });
    yearACS = true;
  }
  displayCars();
}
nameACS = true;
function sortName() {
  if (nameACS) {
    nameArrow = "";
    yearArrow = "";
    cars.sort(function(a,b) {
      x = a.type.toLowerCase();
      y = b.type.toLowerCase();
      if (x > y) {return 1;}
      if (x < y) {return -1};
      return 0;
    });
    nameACS = false;
  } else {
    nameArrow = "";
    yearArrow = "";
    cars.sort(function(a,b) {
      x = a.type.toUpperCase();
      y = b.type.toUpperCase();
      if (x > y) { return -1};
      if (x <y) { return 1 };
      return 0;
    });
    nameACS = true;
  }
  displayCars();
}

displayCars();

function displayCars() {
  var txt = "<table><tr><th onclick='sortName()'>name " + nameArrow + "</th><th onclick='sortYear()'>year " + yearArrow + "</th><tr>";
  for (let i = 0; i < cars.length; i++) {
    txt += "<tr><td>"+ cars[i].type + "</td><td>" + cars[i].year + "</td></tr>";
  }
  txt += "</table>";
  document.getElementById("demo").innerHTML = txt;
}

</script>

</body>
</html>
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-11-11T00:02:32.887

我非常感谢[接受的答案](https://stackoverflow.com/a/49041392/1521064)和[jedwards 的修复](https://stackoverflow.com/a/53880407/1521064)，但我也发现它们的可读性很差。所以这是我的重构和详细版本：

```
// Remember that strings are false positives for isNaN
const isEmptyOrNaN = (obj) => obj === "" || isNaN(obj);

const getCellValueInColumn = (tr, columnIdx) =>
  tr.children[columnIdx].innerText || tr.children[columnIdx].textContent;

const compareCellValues = (cellValue1, cellValue2) => {
  return isEmptyOrNaN(cellValue1) || isEmptyOrNaN(cellValue2)
    ? cellValue1.toString().localeCompare(cellValue2)
    : cellValue1 - cellValue2;
};

const compareFnFactory = (columnIdx, ascending) => (firstEl, secondEl) => {
  const cellValue1 = getCellValueInColumn(firstEl, columnIdx);
  const cellValue2 = getCellValueInColumn(secondEl, columnIdx);
  return ascending
    ? compareCellValues(cellValue1, cellValue2)
    : compareCellValues(cellValue2, cellValue1);
};

document.querySelectorAll("th").forEach((th) =>
  th.addEventListener("click", () => {
    const table = th.closest("table");
    const tbody = table.querySelector("tbody");
    const columnIdx = Array.from(th.parentNode.children).indexOf(th);
    const compareFn = compareFnFactory(columnIdx, (this.ascending = !this.ascending));
    Array.from(tbody.querySelectorAll("tr"))
      .sort(compareFn)
      .forEach((tr) => tbody.appendChild(tr));
  })
); 
```

如果您发现任何多余的空格或括号、不必要的缩进等，那是因为我已将代码格式化为更漂亮。

我已将此代码包装在一个：

```
javascript: (function () {
  // Code here
})(); 
```

并将其放入书签中，所以现在我可以在 Keycloak 管理控制台中对列进行排序。

# php - New html5 canvas attribute with javascript interaction

> ID：14267797
> 
> 赞同：0
> 
> 时间：2013-01-10T21:43:06.800
> 
> 标签：php, javascript, mysql, css, html

I am very interested in creating a dynamic pie chart based on percentages pulled by php from my sql database (these percentages change). Basically the numbers are pulled and percentages factored by php, then the lines are drawn mby JS HTML5 canvas and CSS. If anyone has a better idea on how to do it i would love to hear it. But i guess my question is, how should i go about this? Can someone set me at a good starting point? perhaps a tutorial or something of that sort.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:12:08.780

改写你的问题。是否值得开发自定义数据可视化库或使用免费的东西？

1.  是的，值得去做。数据可视化是目前非常活跃的发展领域。这是一门非常有趣且具有挑战性的学科。它需要大量的优化来使图表变得漂亮和快速，并且它有很大的空间来使用经典的图论算法。是的，我完全支持你的举动。

2.  不，你在浪费时间和金钱。互联网上已经有很多非常成熟的库，在 GPL 和 MIT 许可下分发。

如果您真的想尝试开发自己的饼图。查找 Raphael.js 示例并尝试改进它的 Pie。

# android - How can I draw a progressing ring with a gradient in Android?

> ID：14267798
> 
> 赞同：1
> 
> 时间：2013-01-10T21:43:09.743
> 
> 标签：android, automatic-ref-counting, gradient, shapedrawable

I have a ShapeDrawable Object in my class in the form of an arc.

```
ShapeDrawable progressArc = new ShapeDrawable(new ArcShape(120, 12)); 
```

Now I would like to use a radial gradient effect on the color and also display just a ring instead of a filled arc. Does the Android SDK provide such a feature?

Currently using the below code, I get a gradient on the circle.

```
progressArc.setIntrinsicHeight(500);
progressArc.setIntrinsicWidth(500);

Shader shader1 = new LinearGradient(5, -5, 35, 0, new int[] { 0xFF33B5E5,0xFFFFFFFF }, null, Shader.TileMode.MIRROR);
progressArc.getPaint().setShader(shader1);
progressArc.getPaint().setStrokeWidth(1);
progressArc.getPaint().setColor(Color.RED);
progressArc.getPaint().setStyle(Paint.Style.FILL_AND_STROKE); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T22:15:39.523

您可以使用 a[`SweepGradient`](http://developer.android.com/reference/android/graphics/SweepGradient.html)来获得径向渐变：

```
Shader s = new SweepGradient(0, 0, new int[] { 0xFF33B5E5,0xFFFFFFFF }, null);
//or if you only use two colors:
Shader s = new SweepGradient(0, 0, 0xFF33B5E5, 0xFFFFFFFF); 
```

为避免填充，只需使用`Paint.Style.STROKE`样式，并带有适当的`strokeWidth`.

# jquery - jquery on window scroll position from top

> ID：14267799
> 
> 赞同：0
> 
> 时间：2013-01-10T21:43:12.687
> 
> 标签：jquery, if-statement

I'm trying to change a class based on how far from the top of the document the window is, and when it's greater then a certain value to make the switch, for some reason it's not happening, this is what I have so far:

```
$(window).scroll(function() {

    if ($('html, body').offset.top > ($("#top_section").outerHeight(true) + $("#grid").outerHeight(true))) { 
        $(".nav_middle_text").removeClass("selected");
        $(".nav_middle_text").addClass("notselected");
        $("#about_link").removeClass("notselected");
        $("#about_link").addClass("selected");    
    } 

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:56:02.983

去吧，

```
$(window).scroll(function() {
    var scroll = $(window).scrollTop();
    if (scroll >= ($("#top_section").outerHeight(true) + $("#grid").outerHeight(true))- 70) { 
        $(".nav_middle_text").removeClass("selected");
        $(".nav_middle_text").addClass("notselected");
        $("#about_link").removeClass("notselected");
        $("#about_link").addClass("selected");    
   } 

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T12:30:43.377

```
$(window).scroll(function() {

    if ($(window).scrollTop() >= 50 ) {

        $('.floating-header').addClass('hide');
        $('.fixed-header').addClass('fixed');

    } else {

        $('.floating-header').removeClass('hide').addClass('show');
        $('.fixed-header').removeClass('fixed');
    }
}); 
```

# javascript - Video Texture Not Showing On Cube

> ID：14267803
> 
> 赞同：0
> 
> 时间：2013-01-10T21:43:28.787
> 
> 标签：javascript, three.js, webgl

Hey guys im trying to figure out why my `Cube` isnt showing the video texture that I added... It shows a image, which is pretty simple to implement.. But when trying to map a video texture its not doing it...

```
video = document.createElement('video');
video.width = 320;
video.height = 240;
video.autoplay = true;
video.src = "my video.....";

var videoTexture = new THREE.Texture( video );

var material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors,
 map:texture, map: videoTexture} );

// render update....
 if( video.readyState === video.HAVE_ENOUGH_DATA ){ videoTexture.needsUpdate = true; } 
```

but still its not showing my video on the cubes.

Any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:11:55.800

您在那里定义了 2 个地图：

```
map:texture, map: videoTexture 
```

也许第一个覆盖了第二个。

# python - merge arrays in python based on a similar value

> ID：14267806
> 
> 赞同：1
> 
> 时间：2013-01-10T21:43:41.307
> 
> 标签：python

I want to merge two arrays in python based on the first element in each column of each array.

For example,

```
A = ([[1, 2, 3],
[4, 5, 6],
[4, 6, 7],
[5, 7, 8], 
[5, 9, 1]])

B = ([[1, .002],
[4, .005],
[5, .006]]) 
```

So that I get an array

```
C = ([[1, 2, 3, .002],
[4, 5, 6, .005],
[4, 6, 7, .005],
[5, 7, 8, .006],
[5, 9, 1, .006]]) 
```

For more clarity:

First column in A is 1, 4, 4, 5, 5 and First column of B is 1, 4, 5

So that 1 in A matches up with 1 in B and gets .002

How would I do this in python? Any suggestions would be great.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:51:47.917

`A`原地修改可以吗？：

```
d = dict((x[0],x[1:]) for x in B) 
```

现在`d`是一个字典，其中第一列是键，后续列是值。

```
for lst in A:
    if lst[0] in d: #Is the first value something that we can extend?
        lst.extend(d[lst[0]])

print A 
```

做它不合适（受Ashwini回答的启发）：

```
d = dict((x[0],x[1:]) for x in B)
C = [lst + d.get(lst[0],[]) for lst in A] 
```

但是，使用这种方法，您*需要*在 A 和 B 中都有列表。如果您有一些列表和一些元组，它将失败（尽管如果需要，它可以解决），但它会使代码稍微复杂化。

**使用这些答案中的任何一个，`B`都可以有任意数量的列**

作为风格的旁注：我会将列表写为：

```
A = [[1, 2, 3],
     [4, 5, 6],
     [4, 6, 7],
     [5, 7, 8], 
     [5, 9, 1]] 
```

我把括号去掉的地方......他们让它看起来太像你把一个列表放在`tuple`. Python 的自动续行发生在圆括号`()`、方括号`[]`或大括号`{}`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T01:45:31.970

这是一个解决方案，使用`itertools.product()`它可以避免为 B 创建字典：

```
In [1]: from itertools import product

In [2]: [lst_a + lst_b[1:] for (lst_a, lst_b) in product(A, B) if lst_a[0] == lst_b[0]]
Out[2]:
[[1, 2, 3, 0.002],
 [4, 5, 6, 0.005],
 [4, 6, 7, 0.005],
 [5, 7, 8, 0.006],
 [5, 9, 1, 0.006]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:47:50.260

*（这个答案假设这些只是常规列表。如果它们是 NumPy 数组，你有更多选择。）*

看起来您想使用 B 作为查找表来查找要添加到 A 的每一行的值。

我将从 B 中的数据制作字典开始。碰巧的是，B 已经以正确的形式传递给`dict()`内置函数：

```
B_dict = dict(B) 
```

然后你只需要逐行构建C。

对于 A 中的每一行，`row[0]`第一个元素是第一个元素，因此`B_dict[row[0]]`要添加到行尾的值也是。因此`row + [B_dict[row[0]]`是您要添加到 C 中的行。

这是一个从 A 和 B_dict 构建 C 的列表推导。

```
C = [row + [B_dict[row[0]]] for row in A] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T21:53:19.970

您可以转换`B`为`dictionary`第一个，每个子列表的第一个元素作为键，第二个作为值。

然后简单地迭代`A`并附加从字典中获取的相关值。

```
In [114]: A = ([1, 2, 3],
[4, 5, 6],
[4, 6, 7],
[5, 7, 8], 
[6, 9, 1])

In [115]: B = ([1, .002],
[4, .005],
[5, .006])

In [116]: [x + [dic[x[0]]] if x[0] in dic else []  for x in A]
Out[116]: 
[[1, 2, 3, 0.002],
 [4, 5, 6, 0.005],
 [4, 6, 7, 0.005],
 [5, 7, 8, 0.006],
 [6, 9, 1]] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T02:04:42.483

天真的，简单的方法：

```
for alist in A:
    for blist in B:
        if blist[0] == alist[0]:
            alist.extend(blist[1:])
            # alist.append(blist[1]) if B will only ever contain 2-tuples.
            break  # Remove this if you want to append more than one. 
```

这里的缺点是它的复杂度为 O(N^2)。对于大多数小型数据集，这应该没问题。如果您正在寻找更全面的东西，您可能需要查看@mgilson 的答案。一些比较：

1.  他的响应将所有内容转换`B`为 dict 并对每个元素执行列表切片。如果您在 中有很多值`B`，那可能会很昂贵。这使用现有列表（无论如何，您只查看第一个值）。
2.  因为他使用的是 dicts，所以他的查找时间为 O(1)（他的回答还假设您永远不会将多个值附加到 中的值的末尾`A`）。这意味着总体而言，他的算法将达到 O(N)。您需要权衡创建 dict 的开销是否会超过`B`.

# node.js - 如何直接调用Connect中间件？

> ID：14267807
> 
> 赞同：4
> 
> 时间：2013-01-10T21:43:41.347
> 
> 标签：node.js, connect, express

我有这样的快速路线：

```
app.get('/', auth.authOrDie, function(req, res) {
    res.send();
}); 
```

其中`authOrDie`函数是这样定义的（在我的`auth.js`模块中）：

```
exports.authOrDie = function(req, res, next) {
    if (req.isAuthenticated()) {
        return next();
    } else {
        res.send(403);
    }
}); 
```

现在，当用户未通过身份验证时，我想验证 http 请求是否具有 Authorization (Basic) 标头。为此，我想使用出色的连接中间件[basicAuth()](http://www.senchalabs.org/connect/middleware-basicAuth.html)。

如您所知，Express 建立在 Connect 之上，因此我可以使用`express.basicAuth`.

`basicAuth`通常这样使用：

```
app.get('/', express.basicAuth(function(username, password) {
    // username && password verification...
}), function(req, res) {
    res.send();
}); 
```

但是，我想在我的`authOrDie`函数中使用它：

```
exports.authOrDie = function(req, res, next) {
    if (req.isAuthenticated()) {
        return next();
    } else if {
        // express.basicAuth ??? ******
    } else {
        res.send(403);
    }
}); 
```

`******`如何使用良好的参数调用 basicAuth 函数（req ？ res ？ next ？ ...）。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T22:03:17.477

调用该`express.basicAuth`函数会返回要调用的中间件函数，因此您可以像这样直接调用它：

```
exports.authOrDie = function(req, res, next) {
    if (req.isAuthenticated()) {
        return next();
    } else {
        return express.basicAuth(function(username, password) {
            // username && password verification...
        })(req, res, next);
    }
}); 
```

# api - Shopify API: How to load a content from 3rd party server into Shopify's store during the page load?

> ID：14267808
> 
> 赞同：0
> 
> 时间：2013-01-10T21:43:46.010
> 
> 标签：api, shopify, remote-server, schema.org

I'm building a Shopify's app which suppose to add Schema.org rich snippets according to data which is remotely stored on my server. In order that Google's crawler will actually analyze this snippets, they must be loaded during the page load, and not dynamically by some JavaScript.

Any suggestions if / how can I do something like that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:49:24.247

在他们的文档页面上查看[修改现有主题。](http://api.shopify.com/theme.html)

您也可以根据[这个答案尝试](https://stackoverflow.com/questions/13932861/can-shopify-app-automatically-inject-liquid-code-inside-shops-theme/13936306#13936306)[资产](http://api.shopify.com/asset.html)。

# eclipse - eclipse: want to view a css file but get "Cannot create extension" error

> ID：14267811
> 
> 赞同：2
> 
> 时间：2013-01-10T21:43:59.847
> 
> 标签：eclipse

since i rebooted my computer and started eclipse again i can't view css or js files anymore. all i get is this bizarre error, see stack below:

![Image](../Images/003c820c2f518fe5420f1b3c989ce211.png)

> ```
>  org.eclipse.core.runtime.CoreException: Cannot create extension
>     at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:287)
>     at org.eclipse.ui.internal.registry.EditorDescriptor.createEditor(EditorDescriptor.java:235)
>     at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:319)
>     at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.createPart(CompatibilityPart.java:262)
>     at org.eclipse.ui.internal.e4.compatibility.CompatibilityEditor.createPart(CompatibilityEditor.java:61)
>     at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:299)
>     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
>     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
>     at java.lang.reflect.Method.invoke(Method.java:601)
>     at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
>     at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:861)
>     at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:841)
>     at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:113)
>     at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:321)
>     at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:242)
>     at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
>     at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
>     at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
>     at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
>     at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:892)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:627)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:729)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:700)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:694)
>     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:679)
>     at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1115)
>     at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:98)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:643)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:729)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:700)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:694)
>     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:679)
>     at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:639)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:729)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:700)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:694)
>     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:679)
>     at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:639)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$6.run(PartRenderingEngine.java:518)
>     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:503)
>     at org.eclipse.e4.ui.workbench.renderers.swt.ElementReferenceRenderer.createWidget(ElementReferenceRenderer.java:74)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:892)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:627)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:729)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:700)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:694)
>     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:679)
>     at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:639)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:729)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:700)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:694)
>     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:679)
>     at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:639)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:729)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:700)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:694)
>     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:679)
>     at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:639)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:729)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:700)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:694)
>     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:679)
>     at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
>     at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveRenderer.processContents(PerspectiveRenderer.java:59)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:639)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:729)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:700)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:694)
>     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:679)
>     at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveStackRenderer.showTab(PerspectiveStackRenderer.java:103)
>     at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:98)
>     at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveStackRenderer.postProcess(PerspectiveStackRenderer.java:77)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:643)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:729)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:700)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:694)
>     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:679)
>     at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:639)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:729)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:700)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:694)
>     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:679)
>     at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
>     at org.eclipse.e4.ui.workbench.renderers.swt.WBWRenderer.processContents(WBWRenderer.java:644)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:639)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:729)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:700)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:694)
>     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:679)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:985)
>     at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
>     at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:940)
>     at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
>     at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:587)
>     at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
>     at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:542)
>     at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
>     at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
>     at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
>     at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
>     at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
>     at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
>     at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
>     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
>     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
>     at java.lang.reflect.Method.invoke(Method.java:601)
>     at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
>     at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
>     at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
> Caused by: java.lang.NullPointerException
>     at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:263) 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T15:51:19.320

这一直发生在我身上。尝试重新安装 Eclipse、pydev、Java、MS Word（开玩笑）。最后，我创建了一个新的工作区，将我的源文件拖放到其中，从此过上了幸福的生活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T15:30:23.510

这一切都是日食中的一些小插曲。关闭并再次打开文件，一切都很好......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-06T22:24:22.363

使用`sudo apt-get install ia32-libs`.

对于 Ubuntu 14.10，使用`sudo apt-get install lib32z1`.

# r - How to extract sample titles (names) using GEOquery package?

> ID：14267813
> 
> 赞同：4
> 
> 时间：2013-01-10T21:44:04.920
> 
> 标签：r, bioinformatics, geo

[GEOquery](http://www.bioconductor.org/packages/release/bioc/vignettes/GEOquery/inst/doc/GEOquery.pdf) is a great R package to retrieve and analyze the Gene Expression data stored in [NCBI Gene Expression Omnibus (GEO) database](http://www.ncbi.nlm.nih.gov/geo/). I have used the following code provided from [GEO2R](http://www.ncbi.nlm.nih.gov/geo/geo2r/) service of GEO database (that generates the initial R script to analyze your desired data automatically) to extract some GEO series of experiments:

```
gset <- getGEO("GSE10246", GSEMatrix =TRUE)
if (length(gset) > 1) idx <- grep("GPL1261", attr(gset, "names")) else idx <- 1
    gset <- gset[[idx]]
gset # displays a summary of the data stored in this variable 
```

The problem is that I can not retrieve the sample titles from it. I have found some function `Columns()` that works on GDS datasets and returns the sample names, but not on GSE.

Please note I am not interested in sample accession IDs (i.e. GSM258609 GSM258610, etc), what I want is the sample human readable titles.

Is there any idea? Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T23:05:34.377

后

```
gset <- getGEO("GSE10246", GSEMatrix =TRUE) 
```

`gset`是一个简单的列表，它的第一个元素是 an `ExpressionSet`，示例信息在`phenoData`or`pData`中，所以也许您正在寻找

```
pData(gset[[1]]) 
```

查看`?ExpressionSet`更多。

# git - Git: Merge fork to main repo as a new branch

> ID：14267818
> 
> 赞同：2
> 
> 时间：2013-01-10T21:44:34.830
> 
> 标签：git

In git, is it possible to merge the master of a fork to the main repo but only as a new branch? That way nothing really gets replaced and it's easier to go back since it's in a separate branch.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:54:55.450

您只需要将 fork 的 master 分支作为单独的分支提取到主 repo。例如

```
cd /path/to/master
git fetch /path/to/fork master:fork 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:49:13.580

### 将 Master 推送到新的 Refspec

在 Git 中，分支只是一个 refspec，因此您可以将任何 refspec 推送到任何其他 refspec。例如：

```
git checkout master
git push origin master:copy_of_master 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T21:51:07.060

将叉子添加为遥控器并执行此操作，仅`git checkout -b branchname remotename/master`此而已。

# magento - 使用现有密码将客户导入 magento

> ID：14267821
> 
> 赞同：1
> 
> 时间：2013-01-10T21:44:47.603
> 
> 标签：magento, csv, import, passwords

我正在将 15000 个用户从 mercurial 导入 magento，但无法正确导入密码。

我的问题是密码的散列方式不同。

Virtuemart HASH = md5($password.$salt);

Magento HASH = md5($salt.$password);

示例密码如下所示：

```
c957d358c8a79e66af10086b53b5a069:AuHg2mCXUhViqKYCLtFco22rmUCDwIFI 
```

下面提供了一个答案，部分解决了我的问题。应用此设置允许我的美德玛客户登录，但会导致管理员登录出现问题并强制新用户使用美德玛密码哈希格式。

我现在需要对其进行修改，使其检查核心散列方法，如果失败，则检查允许两种密码格式登录的美德玛特散列方法。

我在想一些事情

```
public function getHash($password, $salt = false)
{
    if (is_integer($salt)) {
        $salt = $this->_helper->getRandomString($salt);
    }
    return $salt === false ? $this->hash($password) : $this->hash($password . $salt) . ':' . $salt : $this->hash($salt . $password) . ':' . $salt;
} 
```

.

```
 public function validateHash($password, $hash)
{
    $hashArr = explode(':', $hash);
    switch (count($hashArr)) {
        case 1:
            // no hash
            return $this->hash($password) === $hash;
        case 2:
            // magento default hash
            return $this->hash($hashArr[1] . $password) === $hashArr[0];
        case 3:
            // virtuemart hash
            return $this->hash($password . $hashArr[1]) === $hashArr[0];        }
    Mage::throwException('Invalid hash.');
} 
```

但是您可能会说这不起作用，因为我无法检查哈希类型方法。

请问我该怎么做？

更新 - 这是我的最新尝试。

```
public function validateHash($password, $hash)
{
    $hashArr = explode(':', $hash);
    if(admin_login_handling_and_api_user_accounts){
        switch (count($hashArr)) {
            case 1:
                return $this->hash($password) === $hash;
            case 2:
                return $this->hash($hashArr[1] . $password) === $hashArr[0];
        }
    } else if(Magento_customer_handling){
        switch (count($hashArr)) {
            case 1:
                return $this->hash($password) === $hash;
            case 2:
                    return $this->hash($password . $hashArr[1]) === $hashArr[0];
        }
    } else if(soap_Api_customer_handling){
        switch (count($hashArr)) {
            case 1:
                return $this->hash($password) === $hash;
            case 2:
                return $this->hash($hashArr[1] . $password) === $hashArr[0];
        }
    }
} 
```

我已将 validatehash 函数更改为包含 if 语句，但这似乎没有被识别。我的 php 技能处于非常基础的方面，所以如果有人可以解释一下我哪里出了问题，或者是否有更好的方法来解决它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:07:30.880

这一切都取决于算法在 mercurialt 中的工作方式。在快速谷歌之后，它似乎需要用户提供的密码并将盐（分号后的部分）附加到末尾，然后是 md5 的值，它与密码哈希（半前的部分）进行比较-数据库中的冒号）。

与此相反，Magento 在 md5 散列密码之前将盐添加到密码的开头，而不是结尾。

长话短说，应该通过编辑来实现快速获胜，`Mage_Core_Model_Encryption::validateHash`这样如果`$hashArr`计数为 2，它将附加散列，而不是前置。

```
// replace
return $this->hash($hashArr[1] . $password) === $hashArr[0];
// with
return $this->hash($password . $hashArr[1]) === $hashArr[0]; 
```

# bash - 处理可选参数的 bash 脚本

> ID：14267822
> 
> 赞同：5
> 
> 时间：2013-01-10T21:44:48.527
> 
> 标签：bash, shell

我有一个 bashscript，它需要一个可选参数，如下所示，有几件事我想改进它，以便我可以以不同的方式传递第一个参数（0，假表示假值，所有其他字符串表示true，默认为 false），编写此脚本的优雅方法是什么？我想使用带有正确布尔表达式的 if 语句。

```
如果 [ -n "$1" ]; 然后
    update_httpconf="$1";
菲
如果 [ "$update_httpconf" = "true" ]; 然后
    回声“嗨”；
菲

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T22:18:46.887

如果您这样做是为了使第一个参数`--update-httpconf`计为真，而其他任何参数都计为假，那么它将与其他 unixey 命令行实用程序更加一致。

这可能是一个很好的起点：

```
while [ $# -gt 0 ]
do
    case $1 in
        '--update-httpconf')
            update_httpconf=true
            ;;
        *)
            echo "unrecognised arg $1"; exit
            ;;
    esac
    shift
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:15:11.720

使用`case`声明：

```
case "$1" in
  0|false|FALSE) do_something;;
  *) do_something_else;;
esac 
```

# iphone - Keyboard hiding textfield animation for another View

> ID：14267824
> 
> 赞同：0
> 
> 时间：2013-01-10T21:44:56.703
> 
> 标签：iphone, ios, xcode

When I press my textfield, the keyboard hides it. So I have implemented this code to "scroll" the view up:

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [self animateTextField: textField up: YES];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    [self animateTextField: textField up: NO];
}

- (void) animateTextField: (UITextField*) textField up: (BOOL) up
{
    const int movementDistance = 80; // tweak as needed
    const float movementDuration = 0.3f; // tweak as needed

    int movement = (up ? -movementDistance : movementDistance);

    [UIView beginAnimations: @"anim" context: nil];
    [UIView setAnimationBeginsFromCurrentState: YES];
    [UIView setAnimationDuration: movementDuration];
    self.view.frame = CGRectOffset(self.view.frame, 0, movement);
    [UIView commitAnimations];
} 
```

The UIView I'm trying to do this on is in another nib. I think since I have two UIViews, the program is getting confused and doesn't know which one to set the animation to.

I don't get any errors, but the animation isn't happening.

I've declared the UIView "surveyPage" for the view I'm trying to animate. Is there somewhere in the code above where I have to specify the UIView I want to animate?

**Update:**

The suggestion below didn't work for me. I tried changing self.view to surveyPage.

Above the code I posted above, I have this in my program:

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.view endEditing:YES];
} 
```

The above code works without a problem, yet the animation does not.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:49:34.550

您在此处指定 UIView：

```
self.view.frame = CGRectOffset(self.view.frame, 0, movement); 
```

它是`self.view`。

尝试：

```
[UIView animateWithDuration:movementDuration animations:^{
    self.view.frame = CGRectOffset(self.view.frame, 0, movement);
}]; 
```

代替

```
[UIView beginAnimations: @"anim" context: nil];
[UIView setAnimationBeginsFromCurrentState: YES];
[UIView setAnimationDuration: movementDuration];
self.view.frame = CGRectOffset(self.view.frame, 0, movement);
[UIView commitAnimations]; 
```

# android - 我如何在 Android 中只用一个 Intent 共享任何内容？

> ID：14267827
> 
> 赞同：1
> 
> 时间：2013-01-10T21:45:17.997
> 
> 标签：android, android-intent

我如何有目的地分享任何类型的内容。我知道分享文字是`Intent.EXTRA_TEXT`和图像`Intent.EXTRA_STREAM`。但我想分享任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:48:52.073

`putExtra`您可以多次调用Intent：

```
Intent intentShare = new Intent(Intent.ACTION_SEND);  
intentShare.putExtra(Intent.EXTRA_STREAM,imgUri);  
intentShare.putExtra(Intent.EXTRA_TEXT,text); 
```

# php - 如何使用 Node.js 从 PHP 运行 JS 并返回一个值？

> ID：14267829
> 
> 赞同：1
> 
> 时间：2013-01-10T21:45:20.820
> 
> 标签：php, javascript, node.js

这不是为了任何严肃的事情，更重要的是只是玩耍和试验。只是不确定我会从哪里开始。也没有绑定到 Node.js，只是认为它是最流行的服务器端 JS 工具。

尽管如果有一些主要的技术原因不应该在真实网站上做这样的事情，请随意将它们扔在那里。

我要问的是……</p>

```
$input = $js_string_built_via_php;

if ($run_on_server)
     $output = node.js($input);
else
     $output = '<script type="text/javascript">'.$input.'</script>';

echo $output; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T17:58:52.253

这里有几种使用节点的替代方法。

你见过[V8js PHP 扩展](http://php.net/manual/en/book.v8js.php)，它集成了 V8 引擎和 PHP 吗？不过，我自己没有任何使用它的经验。

或者，与使用节点类似，您可以安装[Rhino](https://developer.mozilla.org/en-US/docs/Rhino)（至少从 12.04 开始在 Ubuntu 存储库中提供）。或另一个命令行 javascript 解释器。然后你可以从 shell 执行 javascript：

```
rhino -e '<javascript code>'; 
```

因此，您应该能够执行以下操作。您必须使用 print 来输出数据，然后以某种方式将输出解析回 php：

```
<?php

function execute_js($script) {
    return shell_exec('rhino -e '.escapeshellarg($script));
}

$javascript = "
    function add(a,b) {
        return a+b;
    }
    print(add(5,6));
";

$result = execute_js($javascript);

print $result; 
```

我怀疑这在生产应用程序中是否是一个好主意，并且看起来它可能很容易受到更大的攻击面。客户端能够注入实际在服务器上执行的 javascript 代码。加载时可能也很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T14:06:55.967

## 3年后更好的解决方案？

[dnode-php](https://github.com/bergie/dnode-php)将是您今天想要的更好的解决方案。

[这里](http://bergie.iki.fi/blog/dnode-make_php_and_node-js_talk_to_each_other/)有一个很酷的介绍。正如作者 Henri Bergius 所说：

> 顾名思义，DNode 是最初为 Node.js 编写的远程方法调用协议。但由于协议本身非常简单，只需通过 TCP 连接发送换行符终止的 JSON 数据包，因此其他语言的实现已经开始出现。你可以用 Ruby、Perl、Python、Java 和现在的 PHP 来谈论 DNode。

# ruby-on-rails - 使用 RESTKit 和设计令牌进行授权

> ID：14267831
> 
> 赞同：0
> 
> 时间：2013-01-10T21:45:30.683
> 
> 标签：ruby-on-rails, restkit, token

iOS 新手... 我有一个使用 token_authenticable 设置的 Rails/Devise 应用程序。我有一个令牌控制器，它在发布有效的电子邮件和密码时返回一个令牌：

```
URL: http://localhost:3000/tokens.json

Body: email=example@example.com&password=foobar

Response: 
{
  "token": "xyzxyztoken"
} 
```

创建此令牌后，将授予对站点其他部分的访问权限，并且可以在测试客户端 (RESTClient) 中使用。我在 iOS 中使用 RESTKit 连接到它已经卡住了一段时间。

我在 AppDelegate.m 中创建了我的 RKObjectManager：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://localhost:3000"];
    self.objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];
    self.objectManager.client.baseURL = baseURL;

    return YES;
} 
```

我有一个视图控制器，当您点击一个按钮时，它会调用它：

```
-(IBAction)btnLoginRegisterTapped:(UIButton*)sender
{
    // get the object manager
    RKObjectManager *objectManager = [RKObjectManager sharedManager];
    objectManager.serializationMIMEType = RKMIMETypeJSON;

    // set mapping
    RKObjectMapping *nameMapping = [RKObjectMapping mappingForClass:[Token class]];
    [nameMapping mapKeyPathsToAttributes:@"token", @"token", nil];
    [objectManager.mappingProvider setMapping:nameMapping forKeyPath:@""];

    // create url
    NSDictionary *queryParams;
    queryParams = [NSDictionary dictionaryWithObjectsAndKeys:@"example@example.com", @"email", @"foobar", @"password", nil];
    RKURL *URL = [RKURL URLWithBaseURL:[objectManager baseURL] resourcePath:@"/tokens.json" queryParameters:queryParams];

    [objectManager loadObjectsAtResourcePath:[NSString stringWithFormat:@"%@?%@", [URL resourcePath], [URL query]] delegate:self];
} 
```

这是我的错误：

```
2013-01-10 16:32:55.554 MyApp[69314:14003] response code: 404
2013-01-10 16:32:55.555 MyApp[69314:14003] W restkit.network:RKObjectLoader.m:300 Unable to find parser for MIME Type 'text/html'
2013-01-10 16:32:55.555 MyApp[69314:14003] W restkit.network:RKObjectLoader.m:329 Encountered unexpected response with status code: 404 (MIME Type: text/html -> URL: http://localhost:3000/tokens.json?password=foobar&email=example%40example.com -- http://localhost:3000 -- http://localhost:3000)
2013-01-10 16:32:55.556 MyApp[69314:14003] Error: The operation couldn’t be completed. (org.restkit.RestKit.ErrorDomain error 4.) 
```

这可能是一个简单的问题，但我迷路了。我想我只是不理解一般的 iOS 发布。可能要注意的一件事是，在浏览器中查看 /tokens.json 会返回一个路由错误，因为我实际上并没有对此的看法：

```
No route matches [GET] "/tokens.json" 
```

无论如何，这一切的重点是让用户登录并获取存储的令牌，然后使用它从 rails 应用程序访问其他数据。

如果需要更多说明，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T23:06:11.203

在您的 rails 应用程序中，打开 config/routes.rb

添加

```
resources :tokens 
```

# javascript - 如何使用 jQuery ui datepicker 计算从今天开始的天数？

> ID：14267832
> 
> 赞同：3
> 
> 时间：2013-01-10T21:45:38.037
> 
> 标签：javascript, jquery, jquery-ui, date, jquery-ui-datepicker

再会，

从 jQuery datepicker 选择日期后，我在计算从现在到选定日期的天数时遇到了一些麻烦。

我认为日期选择器正在更改选择日期的日期格式并导致计算出错，但我不知道如何解决这个问题。我确定是我，但我看不到森林只见树木，所以任何建议都会非常有帮助。

这是代码：

```
<input type="text" class="datepicker-calc" />
<input type="text" id="tbAddDays" /> 
```

```
$(document).ready(function () {
    $(".datepicker-calc").datepicker({
        dateFormat: "dd/mm/yy",
        changeMonth: true,
        changeYear: true,
        onSelect: function (date, e) {
            var expDate = new Date(date);
            var date = e.selectedDay;
            if (date < 10) {
                date = ("0" + e.selectedDay)
            }
            var month = e.selectedMonth;
            if (month < 10) {
                month = ("0" + e.selectedMonth)
            }
            var year = e.selectedYear;
            var endDate = month + "/" + date + "/" + year;
            updateDays(endDate, e);
            $(".datepicker-calc").datepicker("hide");
        }
    });

    function treatAsUTC(date) {
        var result = new Date(date);
        result.setMinutes(result.getMinutes() - result.getTimezoneOffset());
        return result;
    }

    function updateDays(expDate, e) {
        var now = new Date();
        var startDate = now.toDateString('dd/MM/yyyy');
        var exp = new Date(expDate);
        var endDate = exp.toDateString('dd/MM/yyyy');
        var millisecondsPerDay = 24 * 60 * 60 * 1000;
        var totalDays = (treatAsUTC(endDate) - treatAsUTC(startDate)) / millisecondsPerDay;
        $('#tbAddDays').val(totalDays);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:04:52.007

该`onSelect`事件将接收指定格式的字符串，即`dd/mm/yy`. JavaScript`Date.parse`方法会错误地解析这些日期，或者根本不解析它们。解决方案是使用[`parseDate()`](http://api.jqueryui.com/datepicker/#utility-parseDate)jQuery ui 中内置的函数：

```
onSelect: function (dateText, inst) {
  var expDate = $.datepicker.parseDate(inst.settings.dateFormat, dateText, inst.settings);
  var diff = expDate - new Date();
  var days = diff / 1000 / 60 / 60 / 24;
  alert( /* ceil, floor, round */ days);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:57:33.167

意识到我需要显示为 jQuery dd/mm/yy (dd/mm/yyyy) 格式，所以保留它并对传递给 updateDays() 方法的 expDate 进行了一些操作，以确保要计算的日期会由JS正确处理。

工作脚本：

```
$(".datepicker-calc").datepicker({
      dateFormat: "dd/mm/yy",
      changeMonth: true,
      changeYear: true,
      onSelect: function (selectdate, e) {
      var newDate = selectdate.slice(0,2);
      var newMonth = selectdate.slice(4,6);
      if (newMonth < "10") { newMonth = ("0" + newMonth.slice(0,1));};
      var newYear = selectdate.slice(6,11);
      var expDate = newMonth + "/" + newDate + "/" + newYear;
      updateDays(expDate, e);
      $(".datepicker-calc").datepicker("hide");
   }
});

function treatAsUTC(date) {
    var result = new Date(date);
    result.setMinutes(result.getMinutes() - result.getTimezoneOffset());
    return result;
}

function updateDays(expDate, e) {
    var now = new Date();
    var startDate = now.toDateString('dd/MM/yyyy');
    var expire = new Date(expDate);
    var endDate = expire.toDateString('dd/MM/yyyy');
    var millisecondsPerDay = 24 * 60 * 60 * 1000;
    var totalDays = (treatAsUTC(endDate) - treatAsUTC(startDate)) / millisecondsPerDay;
    $('#tbAddDays').val(totalDays);
} 
```

# ssl - SSL 证书 SAN 还是通配符？

> ID：14267833
> 
> 赞同：1
> 
> 时间：2013-01-10T21:45:41.153
> 
> 标签：ssl, certificate, wildcard

我想用 SSL 证书覆盖几个域。例如

*   门户网站.domain.com
*   app.domain.com
*   app1.domain.com
*   app2.domain.com

对于是否可以购买更便宜的统一通信证书，或者是否需要购买通配符证书，我有点困惑。唯一的区别是通配符可以拥有无​​限数量的子域，而 UCC 仅涵盖 SAN 下的一组数量？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T06:04:13.960

是的，你是对的，统一通信证书涵盖了 SAN 上的一组，但它可以保护多个域，以及在 Exchange 服务器中配置的主机，而传统通配符 SSL 不能。例如，通配符 ssl 可以保护第一级子域，例如 *.example dot com，其中统一通信证书可以保护 www.example dot com、www.example dot net 等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T10:20:20.963

是的。请记住，一些旧的 X.509 实现可能不支持 SAN，但如今这种情况非常罕见（例如，一些 Symbian OS 手机，请参阅[http://www.digicert.com/subject-alternative-name-compatibility.htm](http://www.digicert.com/subject-alternative-name-compatibility.htm)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-15T20:05:02.793

通常，域名或 URL 只需要一个证书即可保证安全。但是，如果您需要保护多个域怎么办？您如何在不牺牲预算和时间的情况下管理他们的安全？

保护多个域

可以使用 2 种方法来保护多个域，通配符证书和统一通信证书 (UCC)，也称为 SAN（主题备用名称）。SAN 允许您指定要由单个 SSL 证书保护的其他主机名（站点、IP 地址、公用名等），而通配符证书可以支持单个域和无限数量的一级子域。SAN/UCC 也可以作为扩展与通配符组合，以向证书添加功能。您可以根据需要将这两个证书组合为多域通配符 SSL 证书。这使得管理多个网站的安全性比为您拥有的每个域管理单独的 SSL 证书更容易、更便宜。

阅读更多：[**通配符与 SAN/UCC 证书**](http://ssladvice.com/securing-multiple-domains-with-sanucc-certificates/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T10:57:55.867

UCC 和 SAN 仅推荐用于 Exchange 服务器。您的要求似乎需要具有通用名称 *.domain.com 的 ssl，以便单个 ssl 适用于所有子域。

了解 UCC 和 SAN 到底是什么。仅当您需要保护不同的 tld（如 urdomain.com urdomain.co.uk urmydomain.net）时，才建议使用 UCC / SAN 证书。这种证书的成本太高，因为它从 200 美元起。

回答您的问题，我检查了几个品牌通配符 ssl RapidSSL 通配符、comodo positive ssl 通配符、globalsign alphassl 通配符、geotrust 通配符 ssl。我在我的 iPhone 和三星安卓手机中测试了这些品牌安装的 ssl 网站。一切都很完美。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T20:22:39.690

直到一定数量的域才更便宜，因为 UC 和 SAN 证书按每个域名收费。当您输入并从此[UCC 链接中减去域时，您会注意到价格变化](http://www.ssl.com/certificates/ucc/buy)

如果您知道您将拥有超过 5 个子域，请使用通配符节省一些现金，因为无论子域的数量如何，它都是一个固定价格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-14T14:12:27.320

我查看了许多 ssl 提供商的 UC 证书定价。除了定价之外，我发现一些 ssl 提供商销售相同的产品但名称不同，例如多域 ssl、san 证书和 uc 证书。

Microsoft Exchange Server 需要典型的 UC 证书，Microsoft 强烈推荐。我决定购买 UC 证书，但它的成本太高了，从 comodo、globalsign、digicerts 等 Veriour 提供商的价格从 300 美元到 600 美元不等。首先我购买了单域 ssl，但交换服务器安装失败。我认为可以使用单域 ssl 节省 $$$。

后来我搜索了 50 到 100 美元的 UC 证书价格，发现 ssl2buy ssl 公司只提供 60 美元的 comodo uc 证书，它包括 4 个域。

[https://www.ssl2buy.com/comodo-multi-domain-ssl.php](https://www.ssl2buy.com/comodo-multi-domain-ssl.php)

我购买了这个 uc 证书并安装在我的交换服务器上。它工作正常！没有错误 - 没有安装问题，什么都没有。

# serialization - 将groovy映射序列化为带引号的字符串

> ID：14267836
> 
> 赞同：30
> 
> 时间：2013-01-10T21:45:51.710
> 
> 标签：serialization, groovy, deserialization

我正在尝试将 groovy 映射保存到文件中。我目前的尝试是写出字符串表示形式，然后将其读回并`evaluate`在我准备好再次使用它时调用它以重新创建地图。

我遇到的问题是`toString()`地图的方法从元素的值中删除了重要的引号。当我的代码调用评估时，它抱怨一个未知的标识符。

这段代码演示了这个问题：

```
m = [a: 123, b: 'test']
print "orig: $m\n"

s = m.toString()
print " str: $s\n"

m2 = evaluate(s)
print " new: ${m2}\n" 
```

前两个打印语句几乎可以工作——但是键值周围的引号`b`消失了。它不是显示`[a: 123, b: 'test']`，而是显示`[a: 123, b: test]`。

至此，伤害就完成了。当`evaluate`它尝试`test`作为标识符而不是字符串进行评估时，调用会阻塞。

所以，我的具体问题：

1.  有没有更好的方法在 Groovy 中序列化/反序列化地图？
2.  有没有办法用正确的引号生成地图的字符串表示？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-10T22:05:13.533

Groovy 提供了[`inspect()`](http://docs.groovy-lang.org/latest/html/groovy-jdk/java/lang/Object.html#inspect())将对象作为可解析字符串返回的方法：

```
// serialize
def m = [a: 123, b: 'test']
def str = m.inspect()

// deserialize
m = Eval.me(str) 
```

另一种将 groovy 映射序列化为可读字符串的方法是使用 JSON：

```
// serialize
import groovy.json.JsonBuilder
def m = [a: 123, b: 'test']
def builder = new JsonBuilder()
builder(m)
println builder.toString()

// deserialize
import groovy.json.JsonSlurper
def slurper = new JsonSlurper()
m = slurper.parseText('{"a": 123, "b": "test"}') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-23T19:31:51.873

您可以使用`myMap.toMapString()`

# azure - 2013 Azure recommended Session State for multiple instances

> ID：14267837
> 
> 赞同：12
> 
> 时间：2013-01-10T21:46:10.163
> 
> 标签：azure

I'm looking for the current (2013) recommendation for Session State management on Windows Azure. There is a number of articles I found on the web but they reference older mythologies. I thought I found the latest method in [this Microsoft article](http://msdn.microsoft.com/en-us/library/windowsazure/gg278339.aspx) but when I went got to step 2 that says to setup Caching in Windows Azure Management Portal, it wasn't an option. I'm assume that there is a newer methodology that I just didn't see.

Here are my requirements:

1.  All load balanced instances of the application can use a shared Session State.
2.  That session state is not affected if one of the web role instances fails.

Basically I'm looking for the equivalent to out-of-process storage providers such as Session State Service or SQL Session State option that are used in non-Azure ASP.NET deployments.

One other concern I have to using the Cache is what are the scenarios when sessions are deleted? Normally I think of Cache as not guaranteed because of expiration and making room for newer cache items. I want to make sure sessions don't start to disappear because they are in Cache.

**UPDATES:**

1.  I found [this Microsoft article](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/) and I'm going through the steps, it doesn't have a date last updated but seems to be recent. I'd still like to know if there is a better solution based on my requirements.
2.  I found this [FAQ from Fall 2012](http://msdn.microsoft.com/en-us/library/windowsazure/hh914142.aspx) that answers the question about the preferred Caching options.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T22:33:55.693

You are on the right track to use caching for shared state. Where caching gets confusing and temporal (as you have seen by different articles on different dates) is that what used to be called Azure caching is now called [Windows Azure Shared Caching](http://msdn.microsoft.com/en-us/library/windowsazure/hh697522.aspx). In October 2012, [Windows Azure Caching](http://msdn.microsoft.com/en-us/library/windowsazure/hh914142.aspx) was released (as per the article you found) and is role (instance-based as opposed to shared) caching. Use the 'Caching' and not 'Shared Caching' as shared caching does not perform that well, is expensive, and generally replaced by (non-shared) caching. If you need it, shared caching is still available in the old Silverlight portal, which you get to by selecting 'Previous portal' on the drop-down menu on your name. Other features, such as reporting services, are currently only available in the 'previous portal'.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T18:05:23.050

We are using the October 2012, [Windows Azure Caching](http://msdn.microsoft.com/en-us/library/windowsazure/hh914142.aspx). We started using the co-located caching (cache cluster shared across each instance, but an azure data loss that brought down the storage container that our cache config was stored in caused an all day outage.

We just moved to using a dedicated cache role for our instances. In this configuration, the cache config is only used on startup. So far, the dedicated cache role has been working well.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T19:37:18.693

On September 3rd 2013 Microsoft announced a retirement of the existing "Shared Caching Service" in coordination with the announcement of the preview for "Windows Azure Cache". This service will be retired no later than August 29, 2014 as the Silverlight Portal used to manage Shared Caching will be decommissioned on March 31, 2014\.

You can find out more of the new "Windows Azure Cache" here:

[http://www.windowsazure.com/en-us/services/cache/](http://www.windowsazure.com/en-us/services/cache/)

# java - java.lang.ClassCastException：antlr.CommonToken 无法在 Jenkins Checkstyle 报告中转换为 antlr.Token

> ID：14267839
> 
> 赞同：0
> 
> 时间：2013-01-10T21:46:17.333
> 
> 标签：java, jenkins, antlr, checkstyle

我在我的项目中使用 checkstyle 5.5 并使用 Jenkins 1.462 进行构建。

我的项目构建成功，但是我的项目中的每个 java 类都会导致 Checkstyle 创建一个高优先级，`TreeWalker`如下所示的错误：

> ProductComparisonService.java:0, TreeWalker, Priority: High Got an exception - java.lang.ClassCastException: antlr.CommonToken cannot be cast to antlr.Token
> 
> 没有可用的描述。请升级到最新的 checkstyle 版本。

我尝试升级到 checkstyle 5.6，但这并没有解决问题。我会很感激任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:58:21.223

您正在使用的其他插件中存在冲突的 antlr(works) 版本，这会干扰类加载器。您需要卸载该其他插件。

我自己没有测试过，但这里有一些推荐的工具，它们可能能够为你找到有问题的 jar：

*   [JarAnalyzer](http://www.kirkk.com/main/Main/JarAnalyzer)，在[这个线程中推荐](https://stackoverflow.com/questions/4417820/how-to-list-dependencies-of-a-jar)
*   [JBoss TattleTale](http://www.jboss.org/tattletale)，[这里推荐](https://stackoverflow.com/questions/786708/how-to-check-dependencies-between-jar-files)
*   [依赖查找器](http://depfind.sourceforge.net/)

# git - 有没有办法防止“git stash pop”将文件标记为已修改？

> ID：14267841
> 
> 赞同：3
> 
> 时间：2013-01-10T21:46:23.470
> 
> 标签：git, git-stash

我实现了一个 git-hook 来通过 pyflakes 和 jshint 扫描我的提交，在阅读了 Yipit 关于[为什么大多数预提交挂钩被破坏](http://tech.yipit.com/2011/11/16/183772396/)的评论之后，我选择了实现他的`git stash`建议`git stash pop`。

不幸的是，`git stash pop`将文件标记为“已修改”，这会导致我的 IDE 在我返回该页面时警告我“已在磁盘上修改。从磁盘重新读取？” 然后它会询问“您确定要编辑此缓冲区吗？” 最后是“您确定要将此缓冲区保存在修改后的文件上吗？”

我很欣赏它试图为我做的一切，但它问我关于功能上不存在的“变化”。

除了玩奇怪的猜谜游戏之外，`touch`是否有某种方法可以防止`git stash pop`将它触及的所有文件标记为已更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:29:37.830

我不这么认为（例如，时间戳已更改，如“ [GIT：将本地更改添加到非当前分支](https://stackoverflow.com/a/4625061/6309)”中所述）。

最简单的方法是将您的 IDE 配置为自动刷新。

例如，对于 Eclipse，这将是设置["Refresh on Access"](https://stackoverflow.com/a/6049245/6309)。

* * *

另一种方法是保留另一个*本地*存储库（一个没有本地修改的存储库，因此无需存储）。
您的预提交挂钩保留在您当前的存储库中。

您的钩子将使用您当前的索引（您添加的），但*另一个*工作树存储库。
为此，您需要提交：

```
git commit --work-tree=/path/to/other/local/repo -m "my commit message" 
```

如果钩子没有失败，您可以让提交后钩子（仍在您当前的仓库中）转到另一个仓库，并拉出当前分支，更新其（原始）工作树。

```
cd /path/to/other/local/repo 
git --work-tree=/path/to/other/local/repo --git-dir=/path/to/other/local/repo/.git pull 
```

（注意你的钩子，它存在于你的第一个 repo 中，需要指定`work-tree`和`git-dir`第二个 repo，才能正常工作）。
这是一个简化的提议，因为它没有考虑您正在处理的当前分支（它假设只有一个分支“主”）。
但是您可以[检测到分支](https://stackoverflow.com/a/7332273/6309)并从那里调整钩子（通过正确的结帐并切换到正确的分支）。

在其工作树的第二次 repo 更新后（通过第一个 repo 的 post-commit 挂钩），第二个 repo 已准备好用作原始工作树，您的 pre-commit hook（您的第一个和当前 repo）可以针对它安全运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:52:16.003

您确定这些更改不存在吗？如果文件显示为已修改，则表明某些内容已更改，即使它是空格或文件的权限（可执行状态）。您可以使用`git diff`来查看更改。您还可以使用`git commit -av`命令查看更改（-v 标志将显示提交的差异）。

您的 IDE 将保持文件的当前“缓冲区”状态。如果该文件在磁盘上发生更改（这`git stash pop|apply`会发生），IDE 将识别这一点，除非您将其设置为自动刷新文件（通常在您的 IDE 设置/首选项中），否则它可能会提示您是否要保存当前缓冲区作为一个新文件——这在使用 git 时通常不是必需的——或者使用文件的更改状态重新加载缓冲区。

# app-store - 在发布日期之前发布应用程序

> ID：14267844
> 
> 赞同：2
> 
> 时间：2013-01-10T21:46:33.380
> 
> 标签：app-store, app-store-connect

我已将一个新应用程序上传到 iTunes connect 并将发布日期设置为 1 月 20 日，因为该应用程序的内容是从网络服务器检索的，我认为该网站要到此日期才能完成。

但是我现在准备将应用程序发布到应用程序商店但找不到这样做的方法，我进入了“权利和定价”并将可用日期更改为今天，但我的应用程序状态仍然是“准备出售”其他一切都没有改变。

如何在预定的发布日期之前发布我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:57:56.083

这是可以做到的。我在上面做的方式是正确的，但是苹果没有给你任何消息说它会提前发布或者你的更改已经保存或任何东西。

今天早上在应用商店直播！

# ssrs-2008 - SSRS 多数据集错误

> ID：14267848
> 
> 赞同：2
> 
> 时间：2013-01-10T21:46:54.550
> 
> 标签：ssrs-2008, reporting-services

我有一个简单的 SSRS 报告，它显示一个表中的数据。我想要做的是在下拉列表中显示一个与该表不同的列表供用户选择。如果我只使用一个数据集，我可以显示它，但它会多次显示列中的值。

例子

```
Bob
Bob
Bob
Cathy
Cathy 
```

如果我创建将列出不同值的第二个数据集，则会收到以下错误消息：

> *本地报告处理期间发生错误。报告的定义无效。报表“正文”的变量表达式直接引用该字段，而不指定数据集聚合。当报表包含多个数据集时，数据区域之外的字段引用必须包含在指定数据集范围的聚合函数中。*

我正在尝试遵循我在这里找到的示例：http: [//msdn.microsoft.com/en-us/library/aa337400.aspx](http://msdn.microsoft.com/en-us/library/aa337400.aspx)

第二个数据集仅用于参数列表。我不明白为什么它会导致实际报告出现问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T22:38:32.420

如果没有报表定义，就无法准确判断在哪里，但报表上有一个项目正在引用字段或数据集，并且隐式使用报表中存在的唯一数据集，但现在不知道要使用哪个数据集报告中添加了多个。

例如，当您创建一个表时，您可以设置一个与之关联的数据集。如果未设置且只有一个数据集，则无关紧要，因为它将采用唯一可用的数据集。添加新数据集后，该表不知道要使用哪个数据集，您将收到您所看到的错误。

另一种获取错误的方法是在表达式中指定一个字段，例如在报告中某处的 TextBox 中，而不指定范围；只需将范围设置为特定的数据集，例如，如果您有：

```
=Count(Fields!name.Value) 
```

将其更改为：

```
=Count(Fields!name.Value, "DatasetToUse") 
```

如果您只有一个数据集，则第一个表达式将通过使用唯一可用的表达式运行良好，但是一旦添加另一个，它将不知道该使用哪个并且会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:31:32.067

在查询（SQL）中，您应该`DISTINCT`在开头添加子句，这样，每个值您只会获得一条记录。查看[http://www.w3schools.com/sql/sql_distinct.asp](http://www.w3schools.com/sql/sql_distinct.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-17T01:47:33.740

双击包含该字段的数据集。转到左侧的字段并删除该字段。通过单击添加 -> 查询字段来添加新字段。只需在字段名称和字段来源下输入新字段的名称即可。

当您通过从数据集字段列表选项卡中选择“计算字段”而不是“查询字段”来添加字段时，就会发生这种情况。

干杯，艾哈迈德·拉蒂夫

# php - 正则表达式替换用磅符号包装数字

> ID：14267851
> 
> 赞同：0
> 
> 时间：2013-01-10T21:47:01.850
> 
> 标签：php, regex

我的文本中包含用大括号括起来的数字，即`{123}`或`{456ABC}`. 我也有没有用括号括起来的数字，即`789`. 我想匹配这些尚未包装的数字并使用 PHP 的 preg_replace 将它们用磅符号 ie 包装起来`#789#`。数字的范围通常为 1-3 位。

```
print(preg_replace('/\d+/','#$0#',
'1) I can count to 2997510\. You can only count to {456ABC}.')); 
```

期望的输出：

```
#1#) I can count to #2997510#. You can only count to {456ABC}. 
```

什么正则表达式会匹配这些数字？我已经尝试过负前瞻`(?![^\{])\d+`和`[^\{](\d+)[^\{]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:11:24.083

`[^\{\dA-F]([A-F\d]+)[^\}\dA-F]`

（我假设您正在尝试将十六进制数字与大写字母匹配；如果不是，只需适当地更改字符类。）

额外`\d`的 's 在负字符类中，因为如果它们不存在，那么引擎将通过切断最外面的数字来避免括号。例如，`[^\{](\d+)[^\}]`将匹配 {34567} 中的 456。

数字本身是任何匹配的“第 1 组”。如果您需要整个匹配本身作为数字，请使用前瞻和后瞻：

`(?<=[^\{\dA-F])([A-F\d]+)(?=[^\}\dA-F])`

这是插入`#`'s 的 Perl 风格的搜索和替换，没有前瞻或后瞻：

`s/([^\{\dA-F])([A-F\d]+)([^\}\dA-F])/$1#$2#$3/g`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:24:32.147

`(\A|[^{\d])(\d[\d\w]*)(\z|[^\}\d\z])`应该为你做。

像这样使用：

```
print(preg_replace('/(\A|[^{\d])(\d[\d\w]*)(\z|[^\}\d\z])/','$1#$2#$3',
'1) I can count to 2997510\. You can only count to {456ABC}.')); 
```

解释：

*   第一部分`(\A|[^{\d])`匹配输入的开头（以捕获字符串开头的数字）或非`{`数字或数字。这部分确保数字尚未包装。

*   第二部分`(\d[\d\w]*)`进行数字的实际匹配。它匹配任何以数字开头后跟任意数量的连续数字或字母的内容。

*   最后一部分`(\z|[^\}\d\z])`类似于第一部分，除了查找输入的结尾。

*   因为这个正则表达式可以在目标数字之前和之后捕获一个字符，所以使用第一个和第三个匹配的子组重新添加这些字符很重要（如 PHP 示例中所示。

# ios - 带有图像和标题的 UISegmentedControl

> ID：14267853
> 
> 赞同：2
> 
> 时间：2013-01-10T21:47:20.230
> 
> 标签：ios, uiimage, uisegmentedcontrol

我有一个带有 2 个部分的自定义 UISegmentedControl，它以编程方式声明，所以我不能使用 IB。我设置了背景图像、色调和标题。我需要有一个与标题一致的图像显示。如果我设置图像，标题就会消失，反之亦然。

我需要一种在段上同时显示图像和标题的方法。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T14:40:13.977

创建 UISegmentedControl 的子类，覆盖

```
[MySegmentedControl initWithItems:] 
-(id) initWithItems:(NSArray*)items {
    [self setImage:anImage forState:aState barMetrics:UIBarMetricsDefault];
    [self setTitleTextAttributes:aDict forState:aState];
    [self setDividerImage:anImage forLeftSegmentState:aState rightSegmentState:aState barMetrics:UIBarMetricsDefault];
    ... do more UI stuff ...
} 
```

在您的视图控制器中，您可以使用以下命令调用它：

```
-(void)viewDidLoad {
    [self.view addSubview:[MySegmentedControl alloc] initWithItems:@[@"one",@"two"]]];
    ... 
```

在 iOS6/7 上可靠地为我工作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-11T01:27:32.767

假设 segmentedControl 在您的 .h 中

```
@property (weak, nonatomic) IBOutlet UISegmentedControl *segmentedControl; 
```

在您的 .m 中为您的 viewController 执行此操作并在代码中设置段

```
[self.segmentedControl insertSegmentWithTitle:@"Title with Image" atIndex:0 animated:YES];
        [self.segmentedControl setImage:[UIImage imageNamed:@"whatever.png"] forSegmentAtIndex:0]; 
```

# jenkins - 将 Nexus 工件下载到 Jenkins Job 工作区

> ID：14267854
> 
> 赞同：0
> 
> 时间：2013-01-10T21:47:21.307
> 
> 标签：jenkins, nexus, jobs, artifact

我有一个用例，我需要将选定的 jar 文件从 nexus 存储库下载到 Jenkins 作业工作区，并在下载的 jar 文件上运行程序。（我想使用罐子里的**.class文件）**

是否有任何可用的 Jenkins 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:17:23.607

您可以尝试[groovy 插件](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)并将脚本嵌入到您的 Jenkins 作业中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:04:56.103

在执行实际工作之前，在作业中添加一个构建步骤，
并使用复制（或 ftp）命令来获取文件。

# javascript - 如何通过单击我网站中的链接让我的 PDF 在 Adob e Reader 中打开？

> ID：14267855
> 
> 赞同：2
> 
> 时间：2013-01-10T21:47:23.150
> 
> 标签：javascript, html, pdf

我真的有一些问题，我希望我的访问者从我网站上的链接打开某个 PDF，但是，我可以让它显示在我网站旁边的单独选项卡上，但我真正想要的是它强制在 Adob​​e Reader 中打开。这可能吗？有没有人设法做到这一点？

我设置了链接，它们在单独的选项卡中打开，但我觉得如果在 Adob​​e Reader 中打开它会更专业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-02T10:28:54.747

我一直在寻找同样的东西，答案很简单：将下载添加到您的 a href 代码中：`< a href="document.pdf" download>`

它会提示一个框，询问您是要保存还是只打开文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:51:11.790

通常，浏览器会检测到带有 .pdf 的链接，它会在浏览器查看器中打开 PDF，我几乎在所有浏览器中都看到了这一点。然后您将能够使用给定的功能，如大小、打印和保存。

# html - 使用 Meteor 插入 HTML 标记

> ID：14267856
> 
> 赞同：27
> 
> 时间：2013-01-10T21:47:28.483
> 
> 标签：html, templates, meteor, markup

如何在 Meteor 模板中显示标记的字符串数据？

我需要从我的数据库中显示一个包含一些基本 HTML 标记的字符串，以便正确格式化生成的文本。它目前只显示标记文本。

这是模板的相关部分：

```
<span class="description">{{description}}</span> 
```

其中 {{description}} 是包含标记的字符串（如“hello<br>world”）。

我希望它显示

```
hello
world 
```

而不是

```
hello<br>world 
```

我想这类似于在 javascript 中使用 innerHTML。

提前致谢！

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-10T21:57:13.370

要覆盖 Handlebars 中的 HTML 转义，请使用三重存储：

```
<span class="description">{{{description}}}</span> 
```

# php - Laravel - 使用控制器而不是路由进行操作

> ID：14267857
> 
> 赞同：0
> 
> 时间：2013-01-10T21:47:37.330
> 
> 标签：php, laravel

我今天确实下载了 Laravel，并且喜欢事物的外观，但我在两件事上苦苦挣扎。

1) 我喜欢控制器分析 url 而不是使用路由的操作方法，它似乎让所有东西都更干净，但可以说我想去

```
/account/account-year/ 
```

我怎样才能为此编写一个动作函数？IE

```
function action_account-year()... 
```

显然是无效的语法。

2）如果我有

```
function action_account_year( $year, $month ) { ... 
```

并参观了

```
/account/account_year/ 
```

将显示有关缺少参数的错误，您如何使此用户友好/加载差异页面/显示错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T22:01:00.377

您必须手动路由连字符版本，例如

```
Route::get('account/account-year', 'account@account_year'); 
```

关于参数，这取决于您的路由方式。您必须接受路由中的参数。如果您使用完整的控制器路由（例如`Route::controller('account')`），那么该方法将自动传递参数。

如果您是手动路由，则必须捕获参数，

```
Route::get('account/account-year/(:num)/(:num)', 'account@account_year'); 
```

所以参观`/account/account-year/1/2`就可以了`->account_year(1, 2)`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T14:47:33.690

你也可以想到以下可能

```
class AccountController extends BaseController {

    public function getIndex()
    {
        //
    }

    public function getAccountYear()
    {
        //
    }

} 
```

现在只需按以下方式在您的路由文件中定义一个 RESTful 控制器

```
Route::controller('account', 'AccountController'); 
```

访问`'account/account-year'`将自动路由到操作`getAccountYear`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T23:53:55.390

我想我会添加这个作为答案，以防其他人正在寻找它：

1)

```
public function action_account_year($name = false, $place = false ) { 
     if( ... ) { 
             return View::make('page.error' ); 
     }
} 
```

2)

还不是一个可靠的解决方案：

laravel/routing/controller.php，方法“响应”

```
public function response($method, $parameters = array())
{
    // The developer may mark the controller as being "RESTful" which
    // indicates that the controller actions are prefixed with the
    // HTTP verb they respond to rather than the word "action".

    $method = preg_replace( "#\-+#", "_", $method );            

    if ($this->restful)
    {
        $action = strtolower(Request::method()).'_'.$method;
    }
    else
    {
        $action = "action_{$method}";
    }

    $response = call_user_func_array(array($this, $action), $parameters);

    // If the controller has specified a layout view the response
    // returned by the controller method will be bound to that
    // view and the layout will be considered the response.
    if (is_null($response) and ! is_null($this->layout))
    {
        $response = $this->layout;
    }

    return $response;
} 
```

# php - 如果语句不适用于文本字段

> ID：14267858
> 
> 赞同：-3
> 
> 时间：2013-01-10T21:47:41.243
> 
> 标签：php, if-statement

我正在尝试做一个 if 语句来检查是否有任何内容输入到一个字段中。如果什么都没有，那么这里不会显示该字段是代码。

```
<?php if(class_exists( 'guys') && meta('guys')?> <option value="<?php meta('guys'); ?>">GUYS</option><?php endif; ?> 
```

这部分是显示字段文本的部分，也是我需要检查的部分。

```
<?php meta('guys'); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:51:12.130

您在 if 中同时需要 ) 和 a : 并且需要回显该值，如下所示

```
<?php if(class_exists( 'guys') && meta('guys')) :?> 
    <option value="<?php echo meta('guys'); ?>">GUYS</option>
<?php endif; ?> 
```

# c - 修改linux中的bio结构

> ID：14267859
> 
> 赞同：2
> 
> 时间：2013-01-10T21:47:44.143
> 
> 标签：c, linux, io, linux-kernel, linux-device-driver

我正在尝试修改 linux-3.2.0（运行 Ubuntu）的 bio 结构（在 blk_types.h 中）。我唯一需要对这个结构做的就是添加一个额外的变量来跟踪一个整数变量（它用于污染算法）。但是，添加单行，例如“int id;” 到该结构会停止操作系统的启动顺序。

它可以编译，但是在启动时会出现以下错误：

```
>Gave up wiating for root device. Common problems:  
>Boot args  
>check rootdelay= ...  
>check root= ...  
>missing modules (cat /proc/modules; ls /dev)  
>ALERT! /dev/disk/by-uuid/15448888-84a0-4ccf-a02a-0feb3f150a84 does not exist. Dropping to a shell!  
>BusyBox Built In Shell ...  
>(initramfs) 
```

我使用给定的 shell 环顾四周，无法通过 uuid 或其他方式（没有 /dev/sda）找到所需的文件系统。任何想法可能会发生什么？

谢谢，

-米修

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:48:14.233

我设法在您的帮助下解决了问题 Caf。虽然重新构建/安装模块似乎没有立即帮助，但我能够通过将 SATA 驱动程序构建到内核中来启动系统，正如这个论坛帖子所建议的那样：[https ://unix.stackexchange.com/问题/8405/kernel-cant-find-dev-sda-file-during-boot](https://unix.stackexchange.com/questions/8405/kernel-cant-find-dev-sda-file-during-boot)。

谢谢你的帮助，

-米修

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T16:45:09.820

我想您正在尝试修改 Linux 内核头文件 bio.h，而不是它的用户态“朋友”bui.h。

说我必须警告你，在内核 sizeof() 周围的许多地方可能会使用更便携的，也许其他一些实现或 API 可能需要一些固定的大小。如果后者是真的，那么您将遇到问题，因为您已更改了 bio 结构大小。

这是一个猜测，我没有进一步调查（我的意思是我没有详细调查 bio）但是在修补 Linux 内核时，必须确保任何可能的副作用并考虑整个情况，特别是在修改时下层实现。

Bio helper 函数对 bio 结构进行大量低级操作，例如在 bio_integrity.c 中进行掠夺。

# javascript - jquery vs google 闭包 ajax

> ID：14267863
> 
> 赞同：3
> 
> 时间：2013-01-10T21:48:09.670
> 
> 标签：javascript, jquery, ajax, google-closure-library

我一直在研究 ajax 调用的 google 闭包库，并且我经历了一个看起来像这样的示例：

```
goog.events.listen(request, "complete", function(){
  if (request.isSuccess()) {
    // do something cool
   } else {
     // display an apologize message
   }
}); 
```

与看起来像这样的 jquery 示例相反：

```
$.ajax({url: url, success: function () { }, error: function () { }}); 
```

我已经看到更多谷歌关闭弹出窗口，但在这种情况下会有什么优势或劣势？对于像这样的 ajax 相关调用，jquery 库调用似乎要简单得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T00:54:28.080

您的 Closure 示例不完整。我假设就在您的示例之前，您创建了一个`XhrIo`实例并调用`send()`了它。

如果您想要一个更简单的 Closure 等效于您发布的 jQuery 示例，您可以使用 static `XhrIo.send()`。它看起来像这样：

```
goog.net.XhrIo.send(
  url,
  function(event) {
    var xhr = event.target;
    if (xhr.isSuccess()) {
      // do something cool
    } else {
      // display an apologize message
    }
  }); 
```

无可否认，这比 jQuery 版本更笨重。一般来说，Closure 在设计时考虑到了面向对象的编程（与主要是静态函数的 jQuery 形成鲜明对比）。这可能适合您或不适合您，这取决于您是否喜欢以面向对象的方式编写 JS 代码。

在这种特殊情况下，如果您创建一个`XhrIo`可重复用于多个请求的对象（例如，您可以`setTimeoutInterval()`将其用于所有请求），您可能会从 Closure 中获得一点优势。如果您关心内存，Closure 还可以让您更明确地控制垃圾收集。

# javascript - facebook 和 twitter iframe 请求访问集“document.domain”错误

> ID：14267864
> 
> 赞同：4
> 
> 时间：2013-01-10T21:48:10.383
> 
> 标签：javascript, facebook, twitter

我正在将 Tweet 和 Facebook Like 按钮放在我正在工作的项目上。一切似乎都在工作，但是当单击 btns 我得到这个 JS 错误：

```
Unsafe JavaScript attempt to access frame with URL http://platform.twitter.com/widgets/tweet_button.1357735024.html#_=1357834238249&count=none&id=twitter-widget-0&lang=en&original_referer=http%3A%2F%2Fwww.sandals.com%2Fmain%2Fnegril%2Fne-home.cfm&size=m&text=Negril%2C%20Jamaica%20All%20Inclusive%20Vacation%20-%20Sandals%20Negril%20Beach%20Resort%20%26%20Spa&url=http%3A%2F%2Fwww.sandals.com%2Fmain%2Fnegril%2Fne-home.cfm&via=SandalsResorts from frame with URL http://www.facebook.com/plugins/like.php?locale=en_US&app_id=150389325070106&href=www.sandals.com/main/negril/ne-home.cfm&send=false&layout=button_count&width=60&show_faces=false&action=like&colorscheme=light&font&height=21\. The frame requesting access set 'document.domain' to 'facebook.com', the frame being accessed set it to 'twitter.com'. Both must set 'document.domain' to the same value to allow access. 
```

这是我用于 fb 和 twitter 的代码

```
window.fbAsyncInit = function() {
// init the FB JS SDK
FB.init({
appId      : '150389325070106', // App ID from the App Dashboard
channelUrl : '//www.sandals.com', // Channel File for x-domain communication
status     : false, // check the login status upon init?
cookie     : true, // set sessions cookies to allow your server to access the session?
xfbml      : true,  // parse XFBML tags on this page?
frictionlessRequests: true
});
// Additional initialization code such as adding Event Listeners goes here
};

// Load the SDK's source Asynchronously
(function(d, debug){
var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
if (d.getElementById(id)) {return;}
js = d.createElement('script'); js.id = id; js.async = true;
js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
ref.parentNode.insertBefore(js, ref);
}(document, /*debug*/ false));

// Twitter Btn JS
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs"); 
```

我按照 fb 开发站点中的步骤操作，但仍然出现这些错误：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:59:29.177

正如您在链接的答案中所读到的，这是 Twitter API 的一个问题。作为链接问题的答案的替代方案，我创建了一个自定义推文按钮，该按钮看起来与 Twitter 的 JS API 完全相同，但不使用它，但仍包含共享计数。随意使用它。

演示： http: [//fiddle.jshell.net/eyecatchup/Th6P2/2/show/](http://fiddle.jshell.net/eyecatchup/Th6P2/2/show/)
代码：[https ://github.com/eyecatchup/tweetbutton](https://github.com/eyecatchup/tweetbutton)

# c++ - 使用 SDL 时出现分段错误

> ID：14267869
> 
> 赞同：0
> 
> 时间：2013-01-10T21:48:41.510
> 
> 标签：c++, segmentation-fault, sdl

[已解决]我正在关注[本教程（视频）](http://www.youtube.com/watch?v=55AKZx1TByw&list=PL949B30C9A609DEE8)，我就在此时此刻。我在编译时没有问题，但是在运行程序时它只是闪烁一秒钟然后关闭。所以我运行了调试器，发现`SDL_DisplayFormat`我的`load_image`函数中有一个分段错误，当我注释掉加载图像的行时，它工作正常，但我找不到问题的原因。

[解决方案] 我没有填写 .bmp 文件，这就是 SDL_DisplayFormat 不起作用的原因。提交图纸后，一切都开始工作了。

这是我的代码：

```
#include "game.h"
/*TODO 
*stworzyć plik z blokami "blocks.bmp"
*stworzyć plik  z tlem "background.bmp"
*uzywac jako tla do obrazkow 000,255,255
*
*/
game::game()
{
    //zaladowanie ekranu
    SDL_Init(SDL_INIT_EVERYTHING);
    screen = SDL_SetVideoMode(SCREEN_WIDTH, SCREEN_HEIGTH, 32, SDL_SWSURFACE);
    //ladowanei obrazkow

    //ustawianie polozenia i rozmiaru kamery
    camera.x = camera.y = 0;
    camera.w = SCREEN_WIDTH;
    camera.h = SCREEN_HEIGTH;
    //inicjalizacja kierunku w kotrym sie poruszamy
    direction[0] = direction[1] = 0;
    running = true;
    block = (load_image("blocks.bmp"));
    background = (load_image("background.bmp"));
}
game::~game()
{
    SDL_FreeSurface(block);
    SDL_FreeSurface(background);
    SDL_Quit();
}
SDL_Surface* game::load_image (const char* filename)
{
    SDL_Surface* tmp = SDL_LoadBMP(filename);
    SDL_Surface* tmp2 = SDL_DisplayFormat(tmp);
    //do odkomentowania kolorkey na razie zeby sprawdzac kolizje
    //  SDL_SetColorKey(tmp2, SDL_SRCCOLORKEY, SDL_MapRGB(screen->format, 0x00, 0xff, 0xff)
    SDL_FreeSurface(tmp);
    return tmp2;
}
void game::handleEvents()
{
    SDL_Event event;
    while(SDL_PollEvent(&event))
    {
        switch(event.type)
        {
            case SDL_QUIT:
                running = false;
                return;
            case SDL_KEYDOWN:
                switch(event.key.keysym.sym)
                {
                    case SDLK_LEFT:
                        direction[0] = 1;
                        break;
                    case SDLK_RIGHT:
                        direction[1] = 1;
                        break;
                }
                break;
            case SDL_KEYUP:
                switch(event.key.keysym.sym)
                {
                    case SDLK_LEFT:
                        direction[0] = 0;
                        break;
                    case SDLK_RIGHT:
                        direction[1] = 0;
                        break;
                }
                break;
        }
    }
}
void game::start()
{
    while(1)
    {
        handleEvents();
        SDL_Flip(screen);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:10:21.497

一个预先建议：提供完整的、最少的代码，包括编译指令。您的没有 main() 函数，并且也缺少类定义（game.h）。在重构它并在调试器中运行它之后，我发现第一个 SDL_LoadBMP() 返回 NULL （也许这和你的一样，但这里肯定是我没有相应的文件），所以我不知道如果你有同样的问题。

现在，您可以尝试解决此问题的是检查返回值。在这种情况下，试试这个：

```
SDL_Surface* tmp = SDL_LoadBMP(filename);
if(!tmp)
    throw std::runtime_error("SDL_LoadBMP() failed"); 
```

为了不泄漏资源，使用 unique_ptr 或一些自定义包装类也是一个很好的建议。

# javascript - 如何在创建的动态（JSP）中获取选项数量部分，在 JavaScript 中？我用这个生成页面： <%List <string>someList = new ArrayList<string>(); someList = SQL();%> <select id="Select"><% for (int i =0; i < someList.size(); i++) { %> <option value="<%=" som<="" h1="">ID：14267870 赞同：1 时间：2013-01-10T21:48:41.947 标签：javascript, jsp 回答 #1 赞同：3 时间：2013-01-10T21:52:08.530 只需获取选项列表的“长度”属性： var optionCount = y.options.length; 编辑哎呀“y”不是选择元素；它会是这样的： var y = document.getElementById("Select"); var yvalue = y.value, ycount = y.options.length; 等等 回答 #2 赞同：3 时间：2013-01-10T21:52:46.260 options.length选择元素的使用 var counter=0; function updateParagraph() { var x = document.getElementById("paragraph"+counter); var y = document.getElementById("Select"); if (counter < y.options.length) { x.innerHTML = y.value; counter++ } }</option></select></string></string>

# haskell - 函数语言中的对数，仅加法和乘法

> ID：14267871
> 
> 赞同：3
> 
> 时间：2013-01-10T21:48:47.123
> 
> 标签：haskell, functional-programming, logarithm

在学习考试时，我刚刚在练习中发现了以下任务：

*编写一个函数，将整数对数以 2 为底（四舍五入），同时仅使用乘法和加法。*

我立即尝试，但无法找到任何解决方案。我认为这将是一件容易的事，但我只能在使用整数除法时找到解决方案（例如在 Haskell 中）：

```
log2 :: Int -> Int
log2 1 = 0
log2 2 = 1
log2 x = 1 + log2 (x `div` 2) 
```

这个任务完全可以用乘法来完成吗？在左侧（模式）上使用乘法总是会导致编译器错误。并在右侧使用它，我如何将解决方案追溯到较低的数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T22:11:27.770

> 并在右侧使用它，我如何将解决方案追溯到较低的数字？

递归。由于计算下限更容易，我们使用以下事实

```
ceiling (log_2 n) == floor (log_2 (2*n-1)) 
```

很容易看出。然后为了找到以底为底`b`的对数，我们计算以底为底的对数`b²`并进行调整：

```
log2 :: Int -> Int
log2 1 = 0
log2 2 = 1
log2 n
    | n < 1     = error "Argument of logarithm must be positive"
    | otherwise = fst $ doLog 2 1
      where
        m = 2*n-1
        doLog base acc
            | base*acc > m = (0, acc)
            | otherwise = case doLog (base*base) acc of
                            (e, a) | base*a > m -> (2*e, a)
                                   | otherwise  -> (2*e+1,a*base) 
```

需要更多步骤的更简单算法是简单地迭代，在每一步中乘以 2，然后计数，直到达到或超过参数值：

```
log2 :: Int -> Int
log2 n
    | n < 1     = error "agument of logarithm must be positive"
    | otherwise = go 0 1
      where
        go exponent prod
            | prod < n  = go (exponent + 1) (2*prod)
            | otherwise = exponent 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T13:50:00.270

怎么样：

```
log2 n = length (takeWhile (<n) (iterate (*2) 1)) 
```

?

我假设您可以使用 Prelude 中的函数（如`error`,`fst`和比较运算符）。如果这在考试中是不允许的，理论上你可以使用 的定义`length`，`takeWhile`并且`iterate`最终得到与丹尼尔的答案相对接近的东西（在精神上，可能不是在信中！）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T22:39:12.980

也许您可以使用级数展开来近似 log 函数。尤其是[泰勒的那些](http://en.wikipedia.org/wiki/Taylor_series)。

# linux - Mercurial Hg 未发现任何变化 - Hg 无法推出

> ID：14267873
> 
> 赞同：1
> 
> 时间：2013-01-10T21:48:51.070
> 
> 标签：linux, mercurial, push, output, mercurial-keyring

有人可以告诉我为什么我最后没有发现任何变化。

另外，我收到一条烦人的消息，“ **.hg/hgrc 中未指定用户名。不会使用密钥环。** ”

版本工具：Hg 最新版本服务器：Linux 工作区：~/2012WS

```
    LinuxServer123:~/2012WS #hg 克隆 http://LinuxServer123/hg/GigaTest/
    .hg/hgrc 中未指定用户名。不会使用密钥环。
    需要http授权
    领域：Mercurial 存储库
    用户：u123456
    密码：
    目标目录：GigaTest
    请求所有更改
    添加变更集
    添加清单
    添加文件更改
    添加了 14 个变更集，对 575 个文件进行了 585 处更改（+1 个头）
    已更新 2 个文件，已合并 0 个文件，已删除 0 个文件，未解决 0 个文件
    更新到分支默认值
    0 个文件已更新，0 个文件已合并，0 个文件已删除，0 个文件未解决
    LinuxServer123:~/2012WS #

    LinuxServer123:~/2012WS # cd GigaTest/
    LinuxServer123:~/2012WS/GigaTest # ls -tlr
    共 12 个
    -rw-r--r-- 1 根 25 Jan 10 16:36 hello.py
    -rw-r--r-- 1 根 25 Jan 10 16:36 HELLO-UP.PY
    drwxr-xr-x 4 根根 4096 Jan 10 16:36 .hg
    LinuxServer123:~/2012WS/GigaTest # vi hello.py
    LinuxServer123:~/2012WS/GigaTest # ls -l > new.txt
    LinuxServer123:~/2012WS/GigaTest #hg add new.txt
    LinuxServer123:~/2012WS/GigaTest #

    LinuxServer123:~/2012WS/GigaTest #
    LinuxServer123:~/2012WS/GigaTest # hg stat
    M你好.py
    一个新的.txt
    LinuxServer123:~/2012WS/GigaTest #

    LinuxServer123:~/2012WS/GigaTest # hg out
    与 http://LinuxServer123/hg/GigaTest/ 比较
    .hg/hgrc 中未指定用户名。不会使用密钥环。
    需要http授权
    领域：Mercurial 存储库
    用户：u123456
    密码：
    寻找变化
    未发现任何更改
    LinuxServer123:~/2012WS/GigaTest #

```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:51:30.570

你必须先做`hg commit`。

`hg stat`显示对当前工作存储库所做的更改（自上次提交以来）并`hg out`显示对您的存储库所做的提交，这些提交将被推送到`hg push`.

并且消息“用户名未在 .hg/hgrc 中指定”表示您的用户名未在 .hg/hgrc 文件中指定。Keyring 是我不熟悉的扩展；大概它会使用您的用户名并使用密钥执行某些操作。

# ios - iOS 解析 JSON 和 AFNetworking

> ID：14267880
> 
> 赞同：2
> 
> 时间：2013-01-10T21:49:20.797
> 
> 标签：ios, json, parsing, afnetworking

我正在使用这样的 AFNetworking 工具使用 Web 服务：

```
NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    [self GotJSONSuccess:JSON :response ];
} failure: nil ];

[operation start]; 
```

Web 服务响应并给我以下 json：

```
[
{
    "statusid": 1,
    "statusdesc": "ASSIGNED"
},
{
    "statusid": 2,
    "statusdesc": "COMPLETED"
},
{
    "statusid": 3,
    "statusdesc": "IN TRANSIT"
},
{
    "statusid": 4,
    "statusdesc": "DELAYED"
},
{
    "statusid": 5,
    "statusdesc": "ON HOLD"
}
] 
```

我正在使用以下内容尝试解析 json：

```
- (void)GotJSONSuccess: (NSString*) JSON : (NSHTTPURLResponse*) response
{

NSString *newString = [NSString stringWithFormat:@"%@",JSON];

NSLog(@"response: %@", JSON);
NSData* data = [newString dataUsingEncoding:NSUTF8StringEncoding];
NSError* error;
id jsonObjects = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

if (error){
    NSLog(@"error is %@", [error localizedDescription]);
    return;
}

NSArray *keys = [jsonObjects allKeys];

for (NSString *key in keys){
    NSLog(@"%@ is %@",key, [jsonObjects objectForKey:key]);
}
} 
```

但是代码落入错误块中，输出为“无法完成操作。（Cocoa 错误 3840。）”

我在解析这个简单的 json 时做错了什么？

有没有比我正在采用的更好的解析方法？

如果可能的话，我想坚持使用原生 iOS 类和方法进行解析。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:58:00.683

您可以使用 NSJSONSerialization 类来创建这样的数组

```
NSArray *arr = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil]; 
```

然后对于您的每个状态 ID，您只需将索引编入数组并拉出字典，如下所示：

```
NSDictionary *dict = [arr objectAtIndex:0]; 
```

最后一行会退出：`

```
{
    "statusid": 1,
    "statusdesc": "ASSIGNED"
} 
```

然后您可以使用对象等方法作为字典上的键。`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:11:21.720

如果你查看 FoundationErrors.h（或者只是搜索你的项目，包括链接的框架，3840，这就是我所做的）你会看到错误对应于 NSPropertyListReadCorruptError。谷歌搜索表明您的 JSON 可能无效。也许您在 JSON 之前或之后有额外的空格字符？您可以发布您从服务器获得的 URL 或完整响应吗？

什么是 kNilOptions？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T12:30:14.680

```
NSArray *array = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
NSArray *arrStatusid = [array valueForKey:@"statusid"]; 
```

尝试使用新版本（第 2 版）的**AFNetworking**：

```
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:req];
operation.responseSerializer = [AFJSONResponseSerializer serializer];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id response){

    //data is in response

} failure:^(AFHTTPRequestOperation *operation, NSError *err){

    //some code on failure
}];
[operation start]; 
```

# pentaho - Pentaho 水壶勺日期操作

> ID：14267882
> 
> 赞同：0
> 
> 时间：2013-01-10T21:49:24.107
> 
> 标签：pentaho, kettle

我正在使用 Pentaho Spoon 进行一些转换。我正在使用“表格输入”并加入多个表格以获得最终输出表格。

我需要实现：

```
SELECT COUNT(distinct ID)
FROM TBLA join TBLB ON TBLA.ID=TBLB.ID
WHERE
  TBLA.ID=334
  AND TBLA.date = '2013-1-9'
  AND TBLB.date BETWEEN '2012-11-15' AND '2013-1-9'; 
```

我正在手动插入“2012-11-15”，但我正在使用`Get System Data`插入“2012-1-9”。我正在使用 1 `Get System Data`。

我的查询是：

```
SELECT COUNT(distinct ID)
FROM TBLA join TBLB ON TBLA.ID=TBLB.ID
WHERE
  TBLA.ID=334
  AND TBLA.date='?'
  AND TBLB.date BETWEEN '2012-11-15' AND '?'; 
```

我在表格输入中收到错误消息说`No value specified for parameter 2`

任何建议将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:06:05.917

简单的一个这个；您需要“复制”系统日期。所以在“获取系统数据”中添加另一行名为“date2”或其他内容，使其与第一行相同，然后它将填写第二个参数或？

或者只需将查询更改为在 '2012-11-15' 和 TBLA.date 之间说，那么您不需要第二个参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T21:54:36.283

就我个人而言，我更喜欢获取系统信息/添加常量步骤的模式，以创建包含多个列的一行，这些列馈送到数据库连接步骤中。然后将查询中的参数替换为列而不是行，并且可以多次指定一列。

# sql - SQL Server：使用 VIEW 时无法绑定多部分标识符

> ID：14267883
> 
> 赞同：2
> 
> 时间：2013-01-10T21:49:25.653
> 
> 标签：sql

我有一些表已在一个视图中连接在一起，当我想提取结果时我会执行该视图。我想将 where 子句应用于视图，以便过滤视图提供的结果，但是当我这样做时，我得到错误 The multi-part identifier could not be bound。

当从视图中获取 SQL 查询并使用我的 where 子句作为独立查询运行时，它运行良好，所以我在将 where 子句应用于我的视图时遇到了问题。

看法

```
SELECT     
   dbo.Assets.assetid, dbo.Assets.assetcommonname, dbo.Assets.assetcode,   
   dbo.Assets.assetserial, dbo.Assets.assetinternallocation, dbo.Assets.assetmodel, 
   dbo.Assets.assetmake, dbo.Assets.assetmac, dbo.Assets.assetnotes, 
   dbo.AssetTypes.typename, dbo.Locations.locationame, dbo.Customers.customername, 
   dbo.Routes.routename, dbo.Locations.customerid
FROM         
   dbo.Assets 
INNER JOIN
   dbo.AssetTypes ON dbo.Assets.assettype = dbo.AssetTypes.typeid 
INNER JOIN
   dbo.Locations ON dbo.Assets.assetlocation = dbo.Locations.locationid 
INNER JOIN
   dbo.Customers ON dbo.Locations.customerid = dbo.Customers.customerid 
INNER JOIN
   dbo.Routes ON dbo.Locations.locationroute = dbo.Routes.routeid 
```

我如何使用 where 子句执行视图

```
select * from afViewassetlinked where (Locations.customerid = '1') 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:50:25.357

改变

```
select * from afViewassetlinked where (Locations.customerid = '1') 
```

到

```
select * from afViewassetlinked where (customerid = '1') 
```

视图`afViewassetlinked`不是表`Locations`。

# ios - 类保留计数

> ID：14267887
> 
> 赞同：2
> 
> 时间：2013-01-10T21:49:56.450
> 
> 标签：ios, objective-c, singleton, retaincount, retain-cycle

这里有很多关于避免使用块的保留循环的文章，但是在使用类和类方法时呢？假设我有这样的课程：

```
// MyClass.h

+ (void)doSomethingAsynch:(void (^)(void))block;
+ (void)doSomethingElse; 
```

来电者想说：

```
[MyClass doSomethingAsynch:^{
    [MyClass doSomethingElse];
} 
```

调用者必须声明 MyClass 的 unsafe_unretained 副本吗？还是像单例这样的类，不会增加它的保留计数？既然我们希望它一直存在，我们是否将一个类的保留计数发送到月球是否重要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T22:16:53.877

`[[NSObject class] retainCount]`返回`NSUIntegerMax`，所以，是的，类被实现为单例，并且可能`release`作为无操作覆盖。

**附录：**

在第 1659 行的[objc 运行时实现](http://www.opensource.apple.com/source/objc4/objc4-532/runtime/NSObject.mm)中`NSObject`，您会发现...

```
+ (id)retain {
    return (id)self;
} 
```

...这验证了`[NSObject retain]`它什么都不做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T21:52:47.840

正如您所建议的，类永远不会被系统释放，因此如果您反复保留它们并且从不释放它们，这并不重要。我的猜测是`retain`在课堂上什么都不做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T22:08:57.463

`[[MyClass alloc] init]`您将这些方法公开为静态/类方法（前面的“+”而不是实例方法的“-”），所以当然，如果您只想使用这些方法，则不需要为这个特定的类做任何事情。由于您不使用`alloc`，因此您不必担心`retain`或`release`。

现在有了 ARC（自动引用计数），您**几乎**不必担心`retain`，`release`无论如何，它会在编译时为您添加所有这些。

**编辑：主要是**强调，因为有时你仍然需要担心它，也增加了一些清晰度

# google-maps - 谷歌地图保存地理编码点侵权

> ID：14267889
> 
> 赞同：-2
> 
> 时间：2013-01-10T21:50:02.737
> 
> 标签：google-maps, google-maps-api-3

我知道将地理编码的 lat,lng 保存在数据库（或其他媒体）中是违反使用条款的，但是如果我“采取”这一点（当然是在地图上显示它时）而不是将其保存`lat,lng`在数据库，我保存：

```
lat + C , lng + C 
```

其中 C 是一些常量。

稍后当我从数据库查询时，我查询 lat -C ， lng -C。

这合法吗？目前我没有所需的 1 万美元，我确实想使用他们的地理编码器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T01:44:26.387

**当你偷了一个钱包并把自己的一美元放进去，那是合法的吗？**

但是：将 latLng 存储在某个地方并不违法，只要您将它们存储在那里以便以后**仅**在 Maps-API-应用程序中使用它们。

[https://developers.google.com/maps/faq?hl=en#geocoder_exists](https://developers.google.com/maps/faq?hl=en#geocoder_exists)

# android - 如何在android中动态地动画/调整圆形的形状？

> ID：14267892
> 
> 赞同：1
> 
> 时间：2013-01-10T21:50:06.047
> 
> 标签：android

我必须在画布上绘制圆形，其形状会随着直径长度的变化而不断变化。（注意，直径长度根据意图数据进行修改）。我们可以显示相同形状的平滑过渡，例如从大尺寸到小尺寸）

我当前的圈子代码如下所示，（这是在onCreate里面）

```
bitmap = Bitmap.createBitmap((int) getWindowManager()
            .getDefaultDisplay().getWidth(), (int) getWindowManager()
            .getDefaultDisplay().getHeight(), Bitmap.Config.ARGB_8888);
        canvas = new Canvas(bitmap);
        paint = new Paint();
        paint.setColor(Color.BLACK);
        paint.setStyle(Paint.Style.STROKE);

        drawingImageView.setImageBitmap(bitmap);
     // Draw Circle
        canvas.drawCircle(50, 50, 20, paint); // circle example 
```

我正在使用 ImageView。如何动态更改同一个圆圈的大小。有如下接收器

```
registerReceiver( ) 
  onReceive(Context c,Intent i){
//   Based on data , modify the drawn Circle
} 
```

OnReceive 将接收意图并根据数据，我们需要保持圆形形状的变化。当我将 drawCircle 代码放入 onReceive 时，它​​也不会渲染圆圈。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:47:22.540

我宁愿使用 SurfaceView 而不是 ImageView + Bitmap。一个可能的解决方案可能如下所示：

```
SurfaceHolder mHolder = mSurfaceView.getHolder();

Canvas canvas = mHolder.lockCanvas();
yourDrawCircleMethod(canvas);
canvas.unlockCanvasAndPost(); 
```

请注意，您还应该实现 SurfaceHolder.Callback 以获取有关 SurfaceViews 状态的通知。

# callback - 回调函数出错

> ID：14267895
> 
> 赞同：0
> 
> 时间：2013-01-10T21:50:11.723
> 
> 标签：callback, void, point-cloud-library

我正在尝试使用点云库 API 将键盘回调函数注册到 3D 查看器。

我这样做：

```
viewer->registerKeyboardCallback(&(RailExtraction::keyboard_callback), (void*)(&gt_data)); 
```

但我收到以下错误消息：

```
note: no known conversion for argument 1 from 'void (RailExtraction< pcl::PointXYZI >::*) 
(const pcl::visualization::KeyboardEvent&, void*)' to 'void (*)(const pcl::visualization::KeyboardEvent&, void*)' 
```

我试图理解错误信息。我明白什么`void`和`void *`意思，但这是什么意思`void(*)(...)`？`void(RailExtraction< pcl::PointXYZI >::*>(...)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T21:24:03.400

我发现了我使用错误版本的问题`registerKeyBoardCallBack`。我目前正在尝试使用此签名：

`registerKeyboardCallback (void (*callback) (const pcl::visualization::KeyboardEvent&, void*), void* cookie = NULL)`

但我应该使用这个签名： `registerKeyboardCallback (void (T::*callback) (const pcl::visualization::KeyboardEvent&, void*), T& instance, void* cookie = NULL)`

这是因为我的`keyboard_callback`函数是类的一部分，因此我需要指定类的实例，以便编译器可以确定`keyboard_callback`要使用的函数实例。因此，我的新调用`registerKeyboardCallBack`如下所示：

查看器->registerKeyboardCallback(&RailExtraction::keyboard_callback, *this, (void*)>_data);

# python - 将资源管理器文件拖放到 tkinter 条目小部件？

> ID：14267900
> 
> 赞同：29
> 
> 时间：2013-01-10T21:50:30.150
> 
> 标签：python, tkinter

我对 Python 还很陌生。我正在尝试将文件名（包含完整路径）输入到 TKinter 条目小部件。由于文件名的路径可能很长，我希望能够直接从 Windows 资源管理器拖放文件。在 Perl 中，我看到了以下内容：

```
use Tk::DropSite;
.
.
my $mw = new MainWindow;
$top = $mw->Toplevel;
$label_entry = $top->Entry(-width => '45',. -background => 'ivory2')->pack();
$label_entry->DropSite(-dropcommand => \&drop,-droptypes => 'Win32',); 
```

我可以在 Python 中使用 TKinter 做类似的事情吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-11T17:24:41.577

Tk 没有任何命令来处理它，并且 Python 不包含任何额外的 Tk 扩展来执行拖放间应用程序，因此您需要一个扩展来执行该操作。Tkdnd（[http://sourceforge.net/projects/tkdnd](http://sourceforge.net/projects/tkdnd)上的 Tk 扩展，不是 Tkdnd.py 模块）对我有用。要从 Python 中使用它，需要一个包装器。赶紧找了一个，好像[http://mail.python.org/pipermail/tkinter-discuss/2005-July/000476.html](http://mail.python.org/pipermail/tkinter-discuss/2005-July/000476.html)包含这样的代码。我又做了一个，因为我不喜欢另一个。我的包装器的问题是它未经测试，实际上我只使用了该功能`bindtarget`并且只使用了 10 秒左右。

使用下面的包装器，您可以创建一些小部件并宣布它支持接收拖动的文件。这是一个例子：

```
# The next two lines are not necessary if you installed TkDnd
# in a proper place.
import os
os.environ['TKDND_LIBRARY'] = DIRECTORYTOTHETKDNDBINARY

import Tkinter
from untested_tkdnd_wrapper import TkDND

root = Tkinter.Tk()

dnd = TkDND(root)

entry = Tkinter.Entry()
entry.pack()

def handle(event):
    event.widget.insert(0, event.data)

dnd.bindtarget(entry, handle, 'text/uri-list')

root.mainloop() 
```

这是代码`untested_tkdnd_wrapper.py`：

```
import os
import Tkinter

def _load_tkdnd(master):
    tkdndlib = os.environ.get('TKDND_LIBRARY')
    if tkdndlib:
        master.tk.eval('global auto_path; lappend auto_path {%s}' % tkdndlib)
    master.tk.eval('package require tkdnd')
    master._tkdnd_loaded = True

class TkDND(object):
    def __init__(self, master):
        if not getattr(master, '_tkdnd_loaded', False):
            _load_tkdnd(master)
        self.master = master
        self.tk = master.tk

    # Available pre-defined values for the 'dndtype' parameter:
    #   text/plain
    #   text/plain;charset=UTF-8
    #   text/uri-list

    def bindtarget(self, window, callback, dndtype, event='<Drop>', priority=50):
        cmd = self._prepare_tkdnd_func(callback)
        return self.tk.call('dnd', 'bindtarget', window, dndtype, event,
                cmd, priority)

    def bindtarget_query(self, window, dndtype=None, event='<Drop>'):
        return self.tk.call('dnd', 'bindtarget', window, dndtype, event)

    def cleartarget(self, window):
        self.tk.call('dnd', 'cleartarget', window)

    def bindsource(self, window, callback, dndtype, priority=50):
        cmd = self._prepare_tkdnd_func(callback)
        self.tk.call('dnd', 'bindsource', window, dndtype, cmd, priority)

    def bindsource_query(self, window, dndtype=None):
        return self.tk.call('dnd', 'bindsource', window, dndtype)

    def clearsource(self, window):
        self.tk.call('dnd', 'clearsource', window)

    def drag(self, window, actions=None, descriptions=None,
            cursorwin=None, callback=None):
        cmd = None
        if cursorwin is not None:
            if callback is not None:
                cmd = self._prepare_tkdnd_func(callback)
        self.tk.call('dnd', 'drag', window, actions, descriptions,
                cursorwin, cmd)

    _subst_format = ('%A', '%a', '%b', '%D', '%d', '%m', '%T',
            '%W', '%X', '%Y', '%x', '%y')
    _subst_format_str = " ".join(_subst_format)

    def _prepare_tkdnd_func(self, callback):
        funcid = self.master.register(callback, self._dndsubstitute)
        cmd = ('%s %s' % (funcid, self._subst_format_str))
        return cmd

    def _dndsubstitute(self, *args):
        if len(args) != len(self._subst_format):
            return args

        def try_int(x):
            x = str(x)
            try:
                return int(x)
            except ValueError:
                return x

        A, a, b, D, d, m, T, W, X, Y, x, y = args

        event = Tkinter.Event()
        event.action = A       # Current action of the drag and drop operation.
        event.action_list = a  # Action list supported by the drag source.
        event.mouse_button = b # Mouse button pressed during the drag and drop.
        event.data = D         # The data that has been dropped.
        event.descr = d        # The list of descriptions.
        event.modifier = m     # The list of modifier keyboard keys pressed.
        event.dndtype = T
        event.widget = self.master.nametowidget(W)
        event.x_root = X       # Mouse pointer x coord, relative to the root win.
        event.y_root = Y
        event.x = x            # Mouse pointer x coord, relative to the widget.
        event.y = y

        event.action_list = str(event.action_list).split()
        for name in ('mouse_button', 'x', 'y', 'x_root', 'y_root'):
            setattr(event, name, try_int(getattr(event, name)))

        return (event, ) 
```

与 Tkdnd 一起，您会发现一个`tkdnd.tcl`比它提供的自己的 C 扩展更高级别的程序。我没有包装这个更高级别的代码，但是在 Python 中复制它可能比使用这个较低级别的包装器更有趣。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-10-21T16:11:32.173

自从这个问题最初发布以来，事情已经取得了进展，并且可以在 SourceForge.net 上轻松获得 tkdnd2.8（Tcl 扩展）和 TkinterDnD2（tkdnd2.8 的 Python 包装器）。

这是最小的示例代码，可以完全按照您的要求进行操作。

```
import Tkinter
from TkinterDnD2 import *

def drop(event):
    entry_sv.set(event.data)

root = TkinterDnD.Tk()
entry_sv = Tkinter.StringVar()
entry = Tkinter.Entry(root, textvar=entry_sv, width=80)
entry.pack(fill=Tkinter.X)
entry.drop_target_register(DND_FILES)
entry.dnd_bind('<<Drop>>', drop)
root.mainloop() 
```

您可以查看[如何在 OSX 上通过 Python 2.7 Tkinter 安装和使用 TkDnD，以](https://stackoverflow.com/questions/25427347/)获取 Python 2.7 和 3.6 上 Windows 和 Mac 的下载和安装信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-07T09:55:33.157

您现在可以简单地使用[tkinterdnd2](https://github.com/Eliav2/tkinterdnd2)。我已经分叉了它，构建了它，并将它上传到 pypi，这样你就可以简单地`pip install tkinterdnd2`. [这里的](https://github.com/Eliav2/tkinterdnd2/tree/master/demos)用法示例

或者如果你太懒，这里有一个简单的例子：

```
import tkinter as tk

from tkinterdnd2 import DND_FILES, TkinterDnD

root = TkinterDnD.Tk()  # notice - use this instead of tk.Tk()

lb = tk.Listbox(root)
lb.insert(1, "drag files to here")

# register the listbox as a drop target
lb.drop_target_register(DND_FILES)
lb.dnd_bind('<<Drop>>', lambda e: lb.insert(tk.END, e.data))

lb.pack()
root.mainloop() 
```

这将打开这个 [![在此处输入图像描述](../Images/9d1f83b5f6b62a5413b4f05ac4aecc56.png)](https://i.stack.imgur.com/jnOWd.png) 你只需拖动文件

（顺便说一句，我使用了列表框而不是条目，但它的工作原理完全相同）

# php - 字符串内的多个文本替换，同时保留所选变量

> ID：14267901
> 
> 赞同：0
> 
> 时间：2013-01-10T21:50:30.680
> 
> 标签：php, regex, string, url, wildcard

我有一个 Web 脚本，可以将 HTML 页面创建为 PHP 字符串，然后将其传递给用户。所有页面均由 index.php 生成，具有唯一的 url。

```
domain.host.com/index.php?loadpage=/BLAH 
```

主页是静态 HTML，但其他所有页面都是动态生成到这个 PHP 字符串中的。这看起来像是在漫无边际，只是试图提供尽可能多的信息。我创建了一个 javascript 代码来修改链接 url：

```
 <a href="http://domain.com/BLAH" onclick="location.href='?loadpage=/BLAH'; return false;" title="BLAH Description">BLAH Link</a> 
```

这基本上在状态栏中显示了漂亮整洁的链接，但是 javascript 将它发送到我想要的 URL（我不需要修改 url 栏，因为这是`iframe`在

这些链接在静态页面上很好。但是在 PHP 字符串中动态生成的页面上，这有点困难。我需要通过一个字符串搜索每次出现：

```
href="?loadpage=/ [WILDCARD] " title= 
```

并将其替换为：

```
href="http://domain.com/ [WILDCARD] " onclick="location.href='?loadpage=/ [WILDCARD] '; return false;" title= 
```

这对我来说似乎很复杂，我认为它可能是`ereg`/ `preg match`/ `replace`，但对正则表达式一无所知。

简而言之，我需要某种方式来搜索包含完整页面 html 的 php 字符串，并用第二个字符串替换第一个字符串（在每次出现带有 '?loadpage/' 的链接时。但每个链接都会有一个不同`[WILDCARD]`所以我假设脚本需要找到每一个出现，保存`[WILDCARD]`到一个变量，然后执行替换功能，并从第一个 url 插入刚刚保存为变量的单词。

编辑。

只是为了澄清原始链接的样子：

```
<a id="random" href="?loadpage=/BLAH" title="BLAH Title"></a> 
```

这就是为什么我只从`href`属性中搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:43:45.430

你是对的，你需要的是一个正则表达式。（你需要一个通配符替换是线索）。这个答案不应该是一个完整的解决方案，只是让您了解正则表达式的工作原理。我会留给你将它与 php 集成（尝试 preg_match_all）

这是您要匹配的模式：

```
"\?loadpage=\/([^"]*)" 
```

\ 是在正则表达式中具有特殊含义的字符的转义符

所以忽略逃逸，这是

```
"?loadpage=/   //the start of the string up to the wildcard part

()   // capturing parentheses, indicating a part that 
     // you want to access in the replace string

[^"]*  // any number of occurences of any character that is NOT doublequote
       // ^ is the negation symbol
       // * indicates "zero or more occurrences"

    followed by...
"   doublequote character 
```

现在你需要一个替换字符串......为此你只需要知道你的（捕获括号）允许你回忆匹配的那部分。在大多数正则表达式风格中，您可以将这些捕获到一系列编号的变量中，通常表示为 $1, $2, $3.. \1 \2 \3... 在您的情况下，您只有一个捕获变量要处理。

所以你的替换字符串可能看起来像

```
"http://domain.com/$1/" onclick="location.href='?loadpage=/$1'; return false" 
```

在 perl 中，你会像这样把整个事情放在一起：

```
$string =~ s|"\?loadpage=\/([^"]*)"|"http://domain.com/$1/" onclick=\"location.href='?loadpage=/$1'\; return false"|g; 
```

请注意，您*不需要*转义引号。这可能在 php.ini 中有所不同。

正如您将看到的那样，它很容易变得非常神秘。[regular-expressions.info](http://www.regular-expressions.info/)是一个有用的在线参考。

* * *

只是为了让你知道你在看什么（你不需要在 php 中这样做）......

`=~`是 perl 正则表达式运算符（您不会在 php 中使用它，请查看 preg_match 文档）

然后你有表格

```
s|match_pattern|replace_pattern|g; 
```

其中 s 表示替换（相对于简单匹配） g 表示全局匹配（否则进程将在第一次匹配时停止）||| 是分隔符。通常写成 /// 但是你必须转义你所有的 URL //s，这会加倍难以辨认。

但这现在是太多 perl 特定的细节，请阅读 php regex 文档！

# java - 在 HTTP 服务器上直接从 JAR 本身运行 java 小程序

> ID：14267903
> 
> 赞同：0
> 
> 时间：2013-01-10T21:50:34.827
> 
> 标签：java, applet, httpserver

我有以下问题。

我有一个 JAR 文件，其中包括`Main.class`和`Applet.class`. 在 Main.class 中，我在端口 8888 上运行 HTTP 服务器，其中设置了我的处理程序`com.sun.net.httpserver.HttpHandler`。我想做以下事情：我想将 Headers Content-Type 设置为 Java Applet，所以不要发送一些 HTML 代码，而是发送 Applet.class 以在浏览器中运行。这意味着，如果有人打开 8888 端口的 IP 地址，它会向他发送运行 Applet.class 的请求，但不会向他发送任何 HTML。这有可能吗？

这可以通过 Java (.jsp) 页面解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:12:17.393

不会。浏览器不会运行没有 HTML 页面的小程序。

您可以编写一个 Java 客户端应用程序来下载和运行您的 applet，而无需任何 HTML，或者您可以使用 Java Web Start。

# linux - 为什么指定提供者时 puppet 资源的行为不同

> ID：14267906
> 
> 赞同：1
> 
> 时间：2013-01-10T21:50:59.977
> 
> 标签：linux, puppet

我在玩 puppet 并注意到了这种行为。

```
# puppet resource file /etc/passwd
file { '/etc/passwd':
  ensure   => 'file',
  content  => '{md5}7a63b133e1a086d9f35c2014b3b09218',
  ctime    => 'Thu Jan 10 17:16:11 -0700 2013',
  group    => '0',
  mode     => '644',
  mtime    => 'Thu Jan 10 17:16:11 -0700 2013',
  owner    => '0',
  selrange => 's0',
  selrole  => 'object_r',
  seltype  => 'etc_t',
  seluser  => 'system_u',
  type     => 'file',
} 
```

对比

```
# puppet resource file /etc/passwd provider=posix
file { '/etc/passwd':
  ensure   => 'file',
  selrange => 's0',
  selrole  => 'object_r',
  seltype  => 'etc_t',
  seluser  => 'system_u',
} 
```

这是在文件提供程序应该是 POSIX 的 Linux 系统上。为什么明确指定提供者时输出不同？

**编辑**：添加了命令的特定输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:53:58.643

Puppetlabs 最近建立了他们自己的堆栈交换实例，并在那里回答了这个问题：[https ://ask.puppetlabs.com/question/241/why-does-puppet-resource-behave-differently-when-specifying-the-provider /?answer=253#post-id-253](https://ask.puppetlabs.com/question/241/why-does-puppet-resource-behave-differently-when-specifying-the-provider/?answer=253#post-id-253)

# asp.net-mvc - .NET 中 TinyMCE 的 jQuery 拼写检查插件

> ID：14267911
> 
> 赞同：1
> 
> 时间：2013-01-10T21:51:23.083
> 
> 标签：asp.net-mvc, iis-7, tinymce, ckeditor, spell-checking

我们有一个用 .NET/MVC (C#) 编写的应用程序，它使用 TinyMCE 作为所见即所得的编辑器。工作正常，除了本机没有拼写检查。当前选项非常有限（IE 的 iespell 但需要 ActiveX，或 PHP 的拼写检查器）。

我偶然发现了[这个网站](http://jquery-spellchecker.badsyntax.co/tinymce.html)，它看起来很有希望，直到我阅读了文档并看到它在后端也需要 PHP。

所以我正在寻找一个替代方案 - jQuery 插件，它可以与 .NET 后端一起使用，或者可能替换 TinyMCE 并使用支持 SCAYT 的 CKEditor。

任何人都知道是否有一个好的 jQuery 插件可以使用，或者我可能会坚持撕掉 TinyMCE 并用 CKEditor 替换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:08:18.920

您可以使用[typo.js](http://www.chrisfinke.com/2011/03/31/announcing-typo-js-client-side-javascript-spellchecking/)，您可以使用它来检测单词是否拼写错误，还可以获取建议列表，但您必须自己处理替换。我在我的 asp.net Mvc 项目中将它与 CodeMirror 一起使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-08T12:18:51.583

致稍后出现此帖子的任何人：

TinyMCE 现在可以使用浏览器内置的拼写检查功能，只需打开选项如下：

```
tinymce.init({
  selector: 'textarea',  // change this value according to your HTML
  browser_spellcheck: true
}); 
```

更多细节在[官方文档的相关部分](https://www.tinymce.com/docs/get-started/spell-checking/#browser-basedspellchecking)。

然后，您应该在浏览器中获得红色波浪线：

[![在此处输入图像描述](../Images/f3722f6c5a59083a935572c9a66ce623.png)](https://i.stack.imgur.com/gQ0E7.png)

# python - Python矩阵输入

> ID：14267918
> 
> 赞同：-2
> 
> 时间：2013-01-10T21:52:03.113
> 
> 标签：python, matrix

我正在编写一个程序，用户必须输入一个二进制矩阵。我怎样才能做到这一点。告诉用户如何输入该矩阵的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T22:01:47.053

有许多不同的可能性。例如：

首先，您可以使用类似电子表格的 GUI（或类似`curses`的 UI）、控制台样式的文本输入或各种其他东西。

假设您已决定使用控制台输入，最明显的解决方案可能是空格分隔的列、换行符分隔的行。但这可能不是您的用例的*最佳解决方案。*

如果您的用户可能希望将一个运行的输出复制并粘贴到下一个运行的输入中，您可能希望允许或需要括号和逗号，因为您将要打印它们。或者，如果他们可能从 CSV 文件中复制，则允许或要求使用逗号。等等。

如果矩阵必须是正方形，则不需要换行符。另一方面，让它们使输入看起来更好，并允许您提供更好的错误处理（“第 3 行有 8 个值而不是 7”与“你输入 50 个值而不是 49”）。

由于值是二进制的，因此您也不需要空格。这有类似的权衡。

您还可以在键盘上使用比`1`and更靠近的两个字符`0`，或者在视觉上更明显（例如，`X`and `.`），或者与您的问题空间更相关。

等等。关键是，没有一种“最好的方法”；有许多权衡需要做出，甚至可能会导致更多权衡的创新设计决策。

一旦你选择了一个，它们几乎都很容易实现。例如，让我们用空格分隔列，换行分隔行，空行表示结束：

```
 print("Please enter your matrix as 1s and 0s, with spaces between the columns.")
 print("Use one row per line, and a blank row when you're done.")
 matrix = []
 while True:
     line = input()
     if not line: break
     values = line.split()
     row = [int(value) for value in values]
     matrix.append(row) 
```

您显然可以将其中一些行合并在一起，或者将整个内容转换为列表理解或生成器，但我将其保留为这样，您可以添加任何您认为合适的错误处理。（你可能会注意到根本没有错误处理——如果你在某行输入了错误的列数，你会得到一个锯齿状的矩阵；如果你不小心输入`q`而不是`1`它会引发异常；等等）

# html - Glassfish如何防止直接访问html文件

> ID：14267921
> 
> 赞同：0
> 
> 时间：2013-01-10T21:52:11.007
> 
> 标签：html, .htaccess, glassfish

我正在运行 glassfish 3.1 假设我有 2 个 html 文件：a.html b.html 并且它们的网址是：

```
http://localhost:8080/mysite/a.html
http://localhost:8080/mysite/b.html 
```

我只希望用户单击**a.html**中的链接以访问**b.html。**如果用户尝试使用 直接访问 b.html `http://localhost:8080/mysite/b.html`，他应该被重定向回 a.html。

我如何实现这一目标？我读了一些关于 .htaccess 文件的内容。glassfish 是否支持这个我应该在哪里找到这个文件并修改它以满足我的需要，如上所述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:06:26.573

当用户单击 a.html 上的链接以转到 b.html 时，在数据库中保存一个标志（使用 javascript 进行单击 -> 数据库进行保存）。在加载 b.html 时，首先检查标志（用于检索的数据库 -> 要检查的 javascript），如果不正确，则返回 a.html，否则显示 b.html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:13:57.010

取决于您的用户如何从页面 a 移动到 b。你可以做的是，而不是点击一个链接去 page-b 有一个按钮。然后，该按钮可以是具有隐藏值的表单的一部分......并检查 page-b 是否已发布该值，如果未发布，则例如重定向到 page-a。页-a：

```
<form action="b.php" method="post">
<input type="submit" name="a_submit" value="Go to page b">
</form> 
```

页首-b：

```
<?php
if(isset($_POST['a_submit'])){
///they came from page a
}else{
header('Location:a.html');
}
?> 
```

使用这两段代码，您可以完全实现您想要的。唯一的问题是您必须将 b.html 重命名为 b.php 这是因为只有 php 文件才能处理 php 脚本。但是不要担心使用 php 文件而不是 html 没有缺点；它们的行为完全相同，但它们也只允许运行 php 脚本。

# java - 在 Java 中读取和写入 TCP 标头（选项）

> ID：14267923
> 
> 赞同：5
> 
> 时间：2013-01-10T21:52:12.050
> 
> 标签：java, networking, tcp, header

我正在尝试做的是：编写客户端和服务器以使用 Java 通过 TCP 发送字符串，到目前为止使用套接字和输入/输出流没有问题。

但现在我正在尝试将 3 个数字添加到 tcp 标头中的“选项”字段![在此处输入图像描述](../Images/aead359c04c32becdca3f665da4c5154.png)。我找不到任何有用的教程或有关如何自定义标题以及如何阅读它的其他内容。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T21:55:28.540

你不能：

*   在应用程序级别，您无权访问 TCP 标头；
*   Java 也没有原始套接字。

不过，您可以通过设置不同的套接字选项来影响*某些TCP 行为。*但不直接操作 TCP 标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T23:08:31.190

并非没有使用像 jNetPcap 这样的外部库。jNetPcap 允许您格式化和发送自己的数据包。

[jNetPcap 安装指南 (Eclipse)](http://jnetpcap.com/eclipse)

[jNetPcap 安装指南 (NetBeans)](http://jnetpcap.com/netbeans)

用于[格式化和发送数据包](http://jnetpcap.com/examples/sendpacket)的非常粗略的示例代码。可能很粗糙，但它向您展示了自定义数据包的可能性。

编辑：忘了提到 jNetPcap 是 libpcap 的 Java 包装器。它们旨在首先用于读取数据包。

# python - 如何打开文件并遍历它，仅从某些行添加数据？

> ID：14267924
> 
> 赞同：1
> 
> 时间：2013-01-10T21:52:11.970
> 
> 标签：python, parsing, file-io

我有以下代码

```
my_file=open("test.stl","r+")
vertices=[]

for line in my_file:
    line=line.strip()
    line=line.split()
    if line.startswith('vertex'):
        vertices.append([[line[1],line[2],line[3]])

print vertices

my_file.close() 
```

现在它给出了这个错误：

```
 File "convert.py", line 10
    vertices.append([[line[1],line[2],line[3]])
                                              ^
SyntaxError: invalid syntax 
```

我的文件中有很多行，例如，其中很多行格式为顶点 5.6354345 3.34344 7.345345（stl 文件）。我想将这三个数字添加到我的数组中，以便我的数组最终将具有 [[v1,v2,v3],[v1,v2,v3],....] ，其中所有这些 v 都来自行。阅读其他类似的问题，我可能需要导入 sys，但我不确定这是为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:57:15.613

您的 STL 文件中的行是否有任何前导空格？

如果他们这样做，您需要先将其剥离。

```
 line = line.strip() 
```

另外：呼叫`line.split()`不影响线路。它会生成一个新列表，您应该为新列表命名并在之后使用它，如下所示：

```
 fields = line.split()
    vertices.append([fields[1], fields[2], fields[3]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T21:59:14.357

您没有将 line.strip 分配给变量，例如：

```
line_split = line.split()
vertices.append([[line_split[1],line_split[2],line_split[3]]) 
```

另一种方法是：

```
for line in my_file:
    line_split = line.split()
    if line_split[0] == 'vertex':
        vertices.append([[line_split[1],line_split[2],line_split[3]]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T03:07:18.537

```
vertices.append([[line[1],line[2],line[3]])
                                          ^
SyntaxError: invalid syntax 
```

删除第一个`[`（否则缺少`]`）以修复`SyntaxError`. 您的代码中还有其他错误。

* * *

解析具有以下内容的行：

```
vertex 5.6354345 3.34344 7.345345 
```

格式化为具有浮点坐标的 3D 点列表：

```
with open("test.stl") as file:
    vertices = [map(float, line.split()[1:4])
                for line in file
                if line.lstrip().startswith('vertex')]
print vertices 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T22:00:42.380

`list.split()`不修改列表；它会生成一个全新的列表。

将结果分配`line.split()`到行：`line = line.split()`

然后照常进行。

[http://www.tutorialspoint.com/python/string_split.htm](http://www.tutorialspoint.com/python/string_split.htm)

这不会解决问题，因为您仍然应该将单个字符拉出`line`（而不是空格），因为字符串作为开始的字符列表（见下文）。

```
text = "cat"
print(text[1])

>>> 'a' 
```

我怀疑 Python 永远不会超过这个`if line.startswith('vertex'):`条件。正如其他人所说，核心问题可能涉及前导空间或文件本身。

此外，如果您只是读取文件，则无需包含访问模式“r+”。`my_file=open("test.stl")`效果也很好，而且更 Pythonic。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T22:01:50.590

除了其他人提到的：

```
 vertices.append([[line[1],line[2],line[3]]) 
```

第 [1] 行之前的左括号过多，应该是：

```
 vertices.append([line[1],line[2],line[3]])

print verticies 
```

您的列表被命名为顶点，而不是顶点。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-10T21:56:12.377

尝试使用： `for line in my_file.readlines():` readlines 返回文件中所有行的列表。

您不需要在您的情况下导入 sys 。

# c# - 在脚本中发布构建事件#

> ID：14267937
> 
> 赞同：2
> 
> 时间：2013-01-10T21:53:04.200
> 
> 标签：c#, script#

我正在尝试创建构建后事件以将我的 script# 项目的最终 .js 和 .debug.js 文件复制到正确的目录中。我无法使用常规输出文件夹，因为我有多个项目引用另一个项目，并且总是导致构建错误（无法复制引用的脚本，因为它正在被另一个进程使用）。

问题是 C# 编译器似乎在写入实际的 .js 文件之前运行构建后事件，因此在构建后事件发生时它们不存在。

有没有其他解决方案可以使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:06:26.880

您可以在您的 csproj 中设置 DeploymentPath 属性，生成的脚本将被复制到那里。

所有的逻辑都在这里：[https](https://github.com/nikhilk/scriptsharp/blob/cc/src/Core/Build/Tasks/ScriptCompilerTask.cs) ://github.com/nikhilk/scriptsharp/blob/cc/src/Core/Build/Tasks/ScriptCompilerTask.cs ...所以另一种选择是自定义构建任务以完全符合您的要求要求。

如果您查看 github 存储库，那么最新的工作还包括在 msbuild 项目的构建步骤中完成的构建过程的脚本# 部分，因此应该可以释放构建后的步骤，让您可以做您想做的事情使用生成的脚本。请参阅[https://github.com/nikhilk/scriptsharp/blob/cc/src/Core/Build/ScriptSharp.targets](https://github.com/nikhilk/scriptsharp/blob/cc/src/Core/Build/ScriptSharp.targets)。同样，它只是 msbuild 的东西，所以如果 .targets 文件不符合您的需要，您也可以根据自己的喜好自定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:11:37.657

我通过在使用 script# 项目输出的项目上添加“复制”命令作为预构建步骤来解决这个问题，然后添加一个依赖项，以便首先构建 script# 项目。

# visual-c++ - msbuild，如何设置环境变量？

> ID：14267938
> 
> 赞同：27
> 
> 时间：2013-01-10T21:53:05.700
> 
> 标签：visual-c++, msbuild

我正在尝试使用项目文件（例如 .vcxproj）设置环境变量

我查看了属性函数，但它似乎没有这样的功能。

我知道有一种方法可以检索环境变量，但找不到如何设置它。

我觉得应该有办法在项目文件中设置环境变量。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-11-16T03:44:44.737

自 MSBuild v4.0 起，编码任务可以直接放在项目文件中。像这样：

```
<UsingTask
  TaskName="SetEnvironmentVariableTask"
  TaskFactory="CodeTaskFactory"
  AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v$(MSBuildToolsVersion).dll">

  <ParameterGroup>
    <Name ParameterType="System.String" Required="true" />
    <Value ParameterType="System.String" Required="true" />
  </ParameterGroup>

  <Task>
    <Using Namespace="System" />
    <Code Type="Fragment" Language="cs">
      <![CDATA[
        Environment.SetEnvironmentVariable(Name, Value);
      ]]>
    </Code>
  </Task>

</UsingTask> 
```

请注意，在 MSBuild 14+ 中，AssemblyFile 引用应该只是：

```
AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.Core.dll" 
```

然后`SetEnvironmentVariableTask`可以从目标使用：

```
<Target Name="SampleTarget" BeforeTargets="Build">
  <SetEnvironmentVariableTask Name="TEST_ENV_VAR" Value="$(MSBuildProjectName)" />
</Target> 
```

这比为小型 MSBuild 任务编写单独的 .DLL 要方便得多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-11T03:41:50.163

有几件事：

1.  如果您只在 MSBuild 的上下文中使用该变量，那么您可以只使用标准的 MSBuild 变量，而不是尝试设置环境变量

2.  如果确实需要设置环境变量，那么这不是开箱即用的东西。您需要编写一个自定义任务，然后在项目文件中使用它。这是一个指向 MSDN 线程的链接，其中概述了如何执行此操作。
    [如何在 MSBuild 文件中设置环境变量？](http://social.msdn.microsoft.com/forums/en-US/msbuild/thread/0fb8d97d-513e-4d37-8528-52973f65a034)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-01T00:51:49.120

您可以考虑将环境变量作为 SET XXX=$(XXX) 行的序列写入文本文件 (.cmd)。然后在命令窗口中执行 .cmd。

例如，使用所有 SET 命令定义一个 ItemGroup，然后使用 Task 'WriteLinesToFile' 将每个项目写入 .cmd 文本文件中的一行。

```
<ItemGroup>
  <BuildEnvItem Include="REM This file is auto generated. Do not edit" />
  <BuildEnvItem Include="SET TEST_ENV_VAR=$(TEST_ENV_VAR)" />
  <!-- add more as needed -->
<ItemGroup>

<Target Name="DefineBuildEnvironmentVariables">
    <WriteLinesToFile File="Build_env.cmd" Lines="@(BuildEnvItem)" Overwrite="true" Encoding="Unicode"/>
</Target> 
```

这在存在使用 msbuild 的现有 .cmd 的情况下可能很有用。初始 .cmd 使用 msbuild 生成 Build_env.cmd，然后在继续之前调用 Build_env.cmd。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-19T15:30:52.447

在最新版本的 MS Build（[自 2016 年以来](https://docs.microsoft.com/en-us/visualstudio/msbuild/exec-task)）中，您可以简单地执行以下操作：

```
<Target Name="MyEnvironmentVariables">
    <Exec Command="A command that needs environment variables" EnvironmentVariables="HANDY_ENV_VAR_1=500;HANDY_ENV_VAR_2=A Useful Value"  />
</Target> 
```

确保用分号分隔变量。不过，您不需要尾随分号。

# javascript - 停止在 youtube 无铬播放器上循环播放

> ID：14267939
> 
> 赞同：0
> 
> 时间：2013-01-10T21:53:15.977
> 
> 标签：javascript, youtube, youtube-api, youtube-javascript-api

我在**[我的网站](http://www.olmasigereken.com/demo3/)**上播放视频时正在使用以下功能。我想自动开始视频，但当它结束时我不希望它重新开始。我改变了，`loop=0`但天知道为什么它不起作用。我必须添加任何其他代码吗？

```
 function ytplayer_render_player( )
  {
    swfobject.embedSWF
    (
      'http://www.youtube.com/apiplayer?video_id='+ ytplayer_playlist[ ytplayer_playitem ].videoid + '&enablejsapi=1&autoplay=1&loop=0&version=3&rel=0&fs=1&playerapiid=ytplayer',
      'ytplayer',
      '400',
      '225',
      '10',
      null,
      null,
      {
        allowScriptAccess: 'always',
        allowFullScreen: 'true'
      },
      {
        id: 'ytplayer'
      }
    );
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:20:20.010

我看了你的演示。您有以下代码：

```
function ytplayerOnStateChange( state )
{
  if ( state == 0 )
  {
    ytplayer_playitem += 1;
    ytplayer_playitem %= ytplayer_playlist.length;
    ytplayer_playlazy( 100 );
  }
} 
```

因此，只要播放结束（状态为 0），您就会再次开始播放。这就是您看到循环的原因；它来自您自己的代码，而不是 API。

# php - XML 元素到 csv

> ID：14267944
> 
> 赞同：0
> 
> 时间：2013-01-10T21:53:28.840
> 
> 标签：php, xml, xml-parsing

我有这段代码来解析 XML 文件

我需要获取元素“名称”并将它们与其余 XML 数据一起写入 csv 标头（来自 XML 中的每个产品），但我需要将值作为 csv 中的数据

现在我可以只写标题，但我只得到 csv 中的最后一个值，而不是所有值，我必须将值同步到 csv 中的名称，如何实现？

我现在有这个：

```
 <?php

            /* Set internal character encoding to UTF-8 */
            //mb_internal_encoding("UTF-8");
            ini_set('default_charset', 'utf-8');

            // Postavljamo vremenski limit za izvršavanje skripte
            set_time_limit(600);

            //delimiter
            define('DELIMITER','^');

            $delimiter = '^';

            function start_time(){
                $time = microtime();
                $time = explode(' ', $time);
                $time = $time[1] + $time[0];
                $start = $time;
                return $start;
            }

            function duration_time($start){
                $time = microtime();
                $time = explode(' ', $time);
                $time = $time[1] + $time[0];
                $finish = $time;
                $total_time = round(($finish - $start), 4);
                return $total_time;
            }

            $start_time=start_time();

            $xml_url='lista.xml';

            //$xml_url='product-hr-709-ProductList.xml';
            $xml = simplexml_load_file(utf8_encode($xml_url), 'SimpleXMLElement', LIBXML_NOCDATA);
            if(!$xml){echo "xml $xml_url not loaded.";exit;}

            // create array for writing header

             $csv_head = array("ProductCode","Vendor","ProductType","ProductCode","ProductDescription");
             // create array for writing data
            // $csv_rows = array($node->ProductCode,'Vendor','ProductType','ProductCode','ProductDescription');

            //jel ovo ispravno????
            foreach($xml as $data_h) {
            $csv_rows = array($data_h->ProductCode,$data_h->Vendor,$data_h->ProductType,$data_h->ProductCategory,$data_h->ProductDescription);
                    }

            foreach($xml as $node) {

             // echo $node->ProductCode,"<br/>\n"; // in csv header under ProductCode
             // echo $node->Vendor,"<br/>\n"; // in csv header under Vendor
             // echo $node->ProductType,"<br/>\n"; // in csv header under ProductType
             // echo $node->ProductCategory,"<br/>\n"; // in csv header under ProductCategory
             // echo $node->ProductDescription,"<br/>\n"; // in csv header under ProductDescription

             //echo $node->Images,"<br/>\n";
             $csv_rows = array($node->ProductCode,$node->Vendor,$node->ProductType,$node->ProductCategory,$node->ProductDescription);

                 // here I need to get all the Name values and put them in header of csv file but no doubles
                 // also to write Values for that products in csv under tab Name
                 // weight has to be also value in csv header and get value from features
                 // not all features are here and not all have to be for every product
                 // for this I need Box Weight Brutto (kg) as standalone for every product as tezina just value without kg
                 // values need to go under names in csv, duplicated names are removed from array sto that needs to be sorted
                    foreach($node->AttrList->children() as $field)
                    {

                        //echo $field["Name"],"<br />"; // this goes into csv header for name of features
                        //echo $field["Value"]; // this are product features

                        // save name to string
                        $feature_name=$field["Name"]; // name 
                        $feature_value=$field["Value"]; // value 

                        // this is for kg
                        // $tezina=$field["Value"]->"Pack Weight Brutto (kg)"; // value 
                        // echo $tezina;

                        //$feature_name=explode('"', $field["Name"]); // delimiter is the last?

                        //add to header array
                        array_push($csv_head, $feature_name);
                        //add to header array
                        array_push($csv_rows, $feature_value);
                        //$appended_data = array_merge($csv_rows,$feature_value); 
                    }

                    // for images
                    // images have to have seperator like comma (,) when writing to csv
                    // in csv header under Images
                    foreach($node->Images->children() as $slika)
                    {
                        //echo $field["Name"],"<br />";
                        //echo $slika,",";
                        //echo $field["Value"];

                        //add to header array
                        //array_push($csv_head, $feature_name,$slika);
                        //add to header array
                        //array_push($csv_rows, $feature_value);
                    }

                    // marketing info, just tags, plain text
                    // in csv header under MarketingInfo
                    foreach($node->MarketingInfo->children() as $marketing)
                    {
                        //echo $field["Name"],"<br />";
                        ///echo $marketing,",";
                        //echo $field["Value"];
                    }

            }

            //print_r($csv_head);
            //echo $csv_head;

                foreach($csv_head as $hed) {
                   //echo $hed . "\n";
                   //$hed = explode(',', $hed);
                   echo $hed. "\n";
                }

                foreach($csv_rows as $bub) {
                   //echo $hed . "\n";
                   //$hed = explode(',', $hed);
                   echo $bub. "\n";
                }

                        //write it to csv
                        $fp = fopen('asbis_katalog.csv', 'w');

                        // non duplicates row names in csv
                        // there should be one attribut
                        $result_csv_header = array_unique($csv_head);

                        //fwrite($fp, implode($delimiter, $csv_head)."\r\n");
                        fwrite($fp, implode($delimiter, $result_csv_header)."\r\n");
                        //fputcsv($fp,implode($delimiter, $csv_head));
                        //fclose($fp);

                        // csv data
                            fwrite($fp,implode($delimiter, $csv_rows));

            echo '<br>Page generated in '.duration_time($start_time).' seconds.';

                fclose($fp);
            ?> 
```

这是 XML 文件，它的一部分：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <ProductCatalog>
      <Product>
        <ProductCode>AXXRJ45DB92</ProductCode>
        <Vendor>INTEL</Vendor>
        <ProductType>Cable</ProductType>
        <ProductCategory>Cables</ProductCategory>
        <ProductDescription>INTEL Serial Cable (1xRJ-45 (Male) - 1xD-Sub 9-pin (DB-9)) for Intel® Server Chassis SR1300(Coronado-W), Intel® Server Chassis SR2300(Stayton-W)</ProductDescription>
        <Image>https://www.it4profit.com/catalogimg/wic/1/AXXRJ45DB92</Image>
        <ProductCard>https://content.it4profit.com/itshop/itemcard_cs.jsp?ITEM=50409104041464518&amp;THEME=asbis&amp;LANG=hr</ProductCard>
        <AttrList>
          <element Name="Cable Functionality" Value="Serial Cable"/>
          <element Name="Platform Compability" Value="PC"/>
          <element Name="Left Connector Type" Value="RJ-45"/>
          <element Name="Left Connector Gender" Value="Male"/>
          <element Name="Left Connector Quantity" Value="1"/>
          <element Name="Right Connector Type" Value="D-Sub 9-pin (DB-9)"/>
          <element Name="Right Connector Quantity" Value="1"/>
          <element Name="Parent Products(1)" Value="Intel® Server Chassis SR1300(Coronado-W), Intel® Server Chassis SR2300(Stayton-W)"/>
          <element Name="Nominal Weight" Value="0.5875 kg"/>
          <element Name="Pack Weight Brutto (kg)" Value="0.5875 kg"/>
          <element Name="Pieces in pack" Value="1"/>
        </AttrList>
        <MarketingInfo>
          <element>Intel is the world leader in the field of computer engineering, computer innovations, development of software and hardware. Specialists Intel did not stop searching for new ways to make the next leap ahead - in the IT-technology, education, culture, production and social sphere.</element>
        </MarketingInfo>
        <Images>
          <Image>https://content.it4profit.com/pimg/s/resize/160x160x160x160/110519101431810915.jpg</Image>
          <Image>https://content.it4profit.com/pimg/s/resize/400x300x400x300/110519101431813128.jpg</Image>
          <Image>https://content.it4profit.com/pimg/s/resize/362x362x362x362/110519101431861327.jpg</Image>
          <Image>https://content.it4profit.com/pimg/s/resize/362x362x362x362/110519101431818713.jpg</Image>
        </Images>
      </Product> 
```

我需要这样的东西：

```
 ProductCode,Vendor,ProductType,ProductCategory,ProductDescription,Images,Cable Functionality.....
            AXXRJ45DB92,INTEL,Cable,Cables,INTEL Serial Cable, imgurls,Serial Cable.... 
```

# c# - 瞄准摇杆 XNA

> ID：14267945
> 
> 赞同：0
> 
> 时间：2013-01-10T21:53:31.287
> 
> 标签：c#, xna, angle, xbox360

目前在 XNA 中为 XBox 控制器编写一个自上而下的射击游戏时有一些乐趣，但我现在遇到了一些问题。

所以我用左摇杆移动我的角色并用我的右手瞄准，所以基本上我可以向任何方向移动并且仍然可以 360 度角拍摄。我现在拥有的东西有效，但它非常敏感和“俗气”，如果我在完美的外圈中移动拇指杆，它喜欢在所有 90 个角度上多贴一点，然后再移动到下一个角度。

所以这就是我现在所拥有的：

```
direction.X = gpState_new.ThumbSticks.Right.X;
direction.Y = gpState_new.ThumbSticks.Right.Y;
rotation = Math.Atan2(direction.Y, direction.X); 
```

然后当我绘制玩家时，我使用旋转作为绘制它的角度。你有关于如何更好地做到这一点的任何提示吗？

弗雷德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:00:37.850

看起来这是因为棍子上的“死区”。基本修复可能类似于使用 GamePadDeadZone.Circular。也许在你的代码之前，像

```
GamePadState gpSTate_new = GamePad.GetState(playerIndex, GamePadDeadZone.Circular); 
```

在 GameDev 上提出了一个非常相似的[问题（您可以在那里看到更详细的答案），将来您可能会在这类问题上获得更好的运气。](https://gamedev.stackexchange.com/questions/35992/xbox-thumbstick-used-to-rotate-sprite-basic-formula-makes-it-stick-or-feel-s)

# spring - Spring Web Flow 2 结束状态

> ID：14267949
> 
> 赞同：0
> 
> 时间：2013-01-10T21:53:53.080
> 
> 标签：spring, spring-webflow-2

我有一个简单的问题。我正在开发一个带有几个选项卡的简单应用程序。应用程序使用很少的外部服务来查询数据并显示它以获得更好的数据挖掘体验。另外我决定合并 Spring Web-Flow 主要是为了对该主题进行一些学习。

通过浏览 web 流的规范，它们显示了明确定义的逻辑视图状态和转换以及其他东西，这些东西逐渐朝着一些不可避免的最终状态工作。现在每个州都有自己的范围，我真的很喜欢。您可以放置​​信息并在状态甚至其他流之间来回传递信息，但令我惊讶的是我的应用程序仅用于浏览。除非用户在消化他正在寻找的内容或感到无聊时关闭浏览器或关闭选项卡，否则我没有明确的最终状态。DTO 的所有实例和我放入 flow-scopes 的其他东西会发生什么？

根据[http://static.springsource.org/spring-webflow/docs/pr5/api/org/springframework/webflow/EndState.html](http://static.springsource.org/spring-webflow/docs/pr5/api/org/springframework/webflow/EndState.html)这个API规范，结束状态终止流并且也破坏了它的会话，我假设它破坏了所有范围内充满了数据，所以我担心我可能有内存泄漏。还是 webflow 会话有一些超时和有条件的内存管理，最终落入垃圾收集器的摆布？

有人可以支持我吗？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T15:04:56.333

您有可以覆盖的默认设置：

```
<webflow:flow-execution-repository max-executions="5" max-execution-snapshots="10" /> 
```

这些将防止您发生任何内存泄漏。旧的执行和快照将被删除。

# c# - Java 和 C# 的通用 Web 服务架构师

> ID：14267951
> 
> 赞同：-2
> 
> 时间：2013-01-10T21:54:05.077
> 
> 标签：c#, java, web-services, architecture

我们有一个在 Window 2008 上运行的用 C# 编写的 Web 服务。我们有两个需要访问该 Web 服务的应用程序。一种是用 C# 编写的，另一种是用 Java 编写的。我们想要开发一个包罗万象的架构，这样两者都可以调用 Web 服务，而无需我们编写两个单独的接口。有谁知道最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:34:11.463

Answer : To use Window Communication Foundation WCF.

# ios - 开发者优先考虑的各种iOS版本有什么区别？

> ID：14267952
> 
> 赞同：2
> 
> 时间：2013-01-10T21:54:12.417
> 
> 标签：ios, ios5, ios4, ios6

这个问题在 iOS 的所有其他新版本中都会出现。所以我决定记下我所知道的版本之间的所有差异。让我知道他们是否更多。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T21:56:48.433

**iOS 4.0**

1.  多任务处理（GCD 和 Blocks 介绍）
2.  本地通知
3.  广告
4.  活动套件（用于日历访问）
5.  高分辨率屏幕支持

**iOS 4.1**

1.  游戏中心和排行榜

**iOS 4.2**

1.  隔空播放
2.  无线打印

**iOS 4.3**

1.AirPlay视频支持

**iOS 5.0**

1.  iCloud
2.  自动引用计数
3.  故事板
4.  报亭支持
5.  推特框架

**iOS 5.1**

1.  文本视图的听写支持。

**iOS 6.0**

1.  地图
2.  社交框架（Facebook 和 Twitter）
3.  通行证
4.  游戏中心
5.  余数
6.  在应用程序内购买
7.  自动布局
8.  集合视图

[这里](https://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS)有一个 Apple 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:25:16.963

不要忘记弃用 viewDidUnload 和其他 UIViewController 方法；）

还弃用了一些保留属性

# kendo-ui - 如何在 Kendo Tree 视图中执行不区分大小写的排序？

> ID：14267953
> 
> 赞同：0
> 
> 时间：2013-01-10T21:54:12.367
> 
> 标签：kendo-ui, kendo-treeview

我正在使用下面的代码对树的值进行排序，似乎排序是基于 CASE 发生的。

我正在尝试找出一种方法来执行不区分大小写的排序，有人可以帮我吗？

```
if(sortValue == 'Ascending') {
    $("#groupTree").data("kendoTreeView").dataSource.sort({ field: "text", dir: "asc" });
} else if(sortValue == 'Descending') {
    $("#groupTree").data("kendoTreeView").dataSource.sort({ field: "text", dir: "desc" });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:07:25.247

即使您的问题说“在 Kendo Tree View 中排序”，它实际上是指 Kendo DataSource。

**话虽如此，但**在 KendoUI 论坛中不支持它，但有可能有效的解决方案。[在这里](http://www.kendoui.com/forums/ui/grid/how-to-enable-case-insensitive-sorting-on-kendo-ui-grid.aspx)检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:29:20.887

只是想列出一个示例代码来帮助其他正在寻找解决方法的人在使用 Kendo 数据源时执行不区分大小写的排序。

```
var homogeneous = new kendo.data.HierarchicalDataSource({
  data: [{
    "id":"1237",
    "text":"b",
    "encoded":false,
    "items":[{
      "id":"234",
      "text":"b1",
      "encoded":false,
      "items":[{
        "id":"456",
        "text":"se",
        "encoded":false,
        "items":[{
          "id":"567",
          "text":"BB",
          "encoded":false
        }]
      }]
    }]
  }, {
    id: 1,
    // lowercase foo should be after 'text:b' in case-insensitive sort
    text: "foo"
  }],
  schema: {
    parse: function(data) {
      for (var i = 0; i < data.length; i++) {
        data[i].lowerText = data[i].text.toLowerCase();
      }
      return data;
    },
    model: {
      id: "id",
      children: "items"
    }
  },
  sort: { field: "lowerText", dir: "asc" }
});

$("#tree").kendoTreeView({
  dataSource: homogeneous
}); 
```

# ruby-on-rails-3 - Rails 3 使用 Sunspot 搜索 HTML 内容

> ID：14267954
> 
> 赞同：1
> 
> 时间：2013-01-10T21:54:16.223
> 
> 标签：ruby-on-rails-3, sunspot

我在我的数据库中存储了一些 HTML 内容，我希望能够使用 Sunspot 执行搜索，同时从命中输出中省略 HTML，如果可能的话，搜索本身。

我的模型：

```
class Article < ActiveRecord::Base

  attr_accessible :caption
  searchable do
    text :content, :stored => true
  end

end 
```

搜索动作：

```
def find    
  @search = Article.search do
    fulltext params[:search] do
      highlight :name
    end
  end      
end 
```

模板：

```
- @search.each_hit_with_result do |hit, article|
  - unless hit.highlight(:content).nil?
      %p= hit.highlight(:content).format { |word| "<span class=\"highlight\">#{strip_tags(word)}</span>"}.html_safe 
```

正在搜索的一些示例内容可能类似于：

```
<h1>Hello world</h1>
<p> Search for me me!</p>
<a href="#">Link</a> 
```

请注意，我将输出标记为 html_safe？这是因为我希望用突出显示跨度来包装搜索文本，但是除此之外，我希望从返回的被命中的文本中完全剥离其他所有内容。这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T22:52:00.503

最终为我工作的是剥离被 solr 索引的内容。为此，我必须在模型内部进行以下更改：

```
 include ActionView::Helpers::SanitizeHelper

  searchable do
    text :content, :stored => true do
      strip_tags(content)
    end
  end 
```

添加这些更改并运行 rake sunspot:solr:reindex 就像一个魅力！

# ajax - 如何在没有 head 标签的情况下对 AJAX 加载的页面进行 noindex 索引？

> ID：14267956
> 
> 赞同：0
> 
> 时间：2013-01-10T21:54:27.457
> 
> 标签：ajax, wordpress, seo, robots.txt, noindex

在客户的网站上有一系列位于不同页面上的导师弹出窗口。

[http://launcheducation.com/](http://launcheducation.com/)

问题是它们不需要被编入索引，它们只是主页上的弹出窗口。如果您直接加载链接，则它们的样式不正确。它们没有适当的 html 或 head 标签，因为它们只是通过 AJAX 加载的。

因为他们没有头标签，所以我不能给它添加元标签。我是 SEO n00b，我只知道基础知识。但我当然不认为我可以添加没有头标签的元标签。所以我将它们添加到 robots.txt 中。

我以为这就结束了，但我的客户正在使用 SEOmoz 工具栏，上面说他们仍在被跟踪。我认为这根本不是问题，我认为只是工具栏没有检查 robots.txt，但他不断反复提出。

我不知道该怎么做，所以我想澄清一下将链接放在 robots.txt 中是否可行。这是我的 robots.txt：

```
User-agent: *
Disallow: /wp-admin/
Disallow: /wp-content/
Disallow: /wp-includes/
Disallow: /wp-content/themes/launcheducation/tutor-ajax/*?
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=90&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=90
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=359&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=359
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=362&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=362
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=365&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=365
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=367&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=367
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=369&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=369
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=371&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=371
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=373&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=373
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=897&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=897
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=900&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=900
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=902&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=902
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1003&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1003
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1017&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1017
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1020&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1020
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1023&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1023
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1031&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1031
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1123&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1123
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1297&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1297
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1300&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1300
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1305&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1305
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1669&linker=home
Disallow: /wp-content/themes/launcheducation/tutor-ajax/?id=1669 
```

是的，我确实从“禁止：/wp-content/themes/launcheducation/tutor-ajax/*？”开始。当插件仍然没有确认更改时，我将它们全部添加。robots.txt 也可以清楚地加载到根目录中：

[http://launcheducation.com/robots.txt](http://launcheducation.com/robots.txt)

任何帮助将不胜感激，即使它只是确认我的陈述是正确的并且它只是不检查 robots.txt 的插件。如果我错了，当然，我想知道如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:59:18.907

看起来你在正确的轨道上。我不确定 SEOMoz 工具，但您应该使用的是 Google Webmaster Tool。在该工具中，有一项功能可让您使用 Googlebot 抓取任何给定的 URL。这将明确地告诉您您的 AJAX 部分是否被 robots.txt 正确阻止

如果存在 URL 模式与您希望可抓取的内容匹配的任何极端情况，您始终可以通过 http 标头发送 NOINDEX 命令，因为您无法添加元标记。X-Robots-Tag http 标头用于此目的，主要用于 PDF 和图像无法呈现 HTML 的情况......它适用于您的情况。

完整的规格在这里：[https ://developers.google.com/webmasters/control-crawl-index/docs/robots_meta_tag](https://developers.google.com/webmasters/control-crawl-index/docs/robots_meta_tag)

顺便说一句，像 SEOMoz 这样的 3rd 方工具很棒，但没有什么比引擎本身提供的工具更好的了。:)

# javascript - jquery选择嵌套的div

> ID：14267958
> 
> 赞同：2
> 
> 时间：2013-01-10T21:54:42.837
> 
> 标签：javascript, jquery, html, css

如何选择包含“我的内容”的 div？

```
<table>
  <tr>
    <td class="ms-disc-bordered-noleft">
      <div class="">
        <div>some content</div>
        <div>my content</div>
      </div>
    </td>
  </tr>
</table> 
```

该 div 与 td.ms-disc-bordered-noleft 有什么关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T22:10:59.150

*   `$('.ms-disc-bordered-noleft div:last')`
*   `$('.ms-disc-bordered-noleft div:eq(2)')`
*   `$('.ms-disc-bordered-noleft').find('div:eq(2)');`
*   或者 `$("div:contains('my content'):last");`

返回机器人...我的意思是 div...您正在寻找。

我有一种感觉，这`$('.ms-disc-bordered-noleft div:last')`是你最好的选择；[我的性能测试](http://jsperf.com/jquery-select-nested-div)表明它通常是 4 个提案中最快的（FireFox 更喜欢`$('.ms-disc-bordered-noleft').find('div:eq(2)');`）。

有关使用的不同选择器的示例，请参见[http://jsfiddle.net/jhfrench/cfeZU](http://jsfiddle.net/jhfrench/cfeZU)。

* * *

至于你问题的第二部分，那个 div 是`td.ms-disc-bordered-noleft`元素的“后代”。更具体地说，它是 td 的孩子的孩子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T21:55:39.790

作为 inner 的第二个孩子的一种选择`<div>`：

```
var div = $(".ms-disc-bordered-noleft > div > div:eq(1)"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T21:57:38.033

> 如何选择包含“我的内容”的 div？

```
$('.ms-disc-bordered-noleft').find('div').contains("my content"); 
```

如果我不太了解您的 Q. ...您可以使用：

```
$('.ms-disc-bordered-noleft div').find('div:last');

        ^^-parent         ^^-first children  ^^-last div 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T21:57:43.873

它是一个父节点，您可以使用`.parent()`and`.children()`或`.find()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T22:02:43.237

最直接的路线是：

```
var div = $("div:contains('my content'):last"); 
```

就与 td 的关系而言，您可以从上述内容开始，然后返回。

```
var cell = div.closest('td'); 
```

就性能而言，这些不一定是最快的选项，但它们是最短的代码。我喜欢短代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T00:08:53.583

```
.ms-disc-bordered-noleft div div:nth-child(2) 
```

或者

```
.ms-disc-bordered-noleft div div:last-child 
```

# javascript - 如何使用javascript将数组中的值显示到日历上

> ID：14267960
> 
> 赞同：0
> 
> 时间：2013-01-10T21:54:48.907
> 
> 标签：javascript, for-loop, calendar, logic

在这里，我有一个 java 脚本，它将根据`document.write(makeCalendar(2013,0))`第一个参数中选择的年份和月份构建一个日历，第二个参数是月份。我已经工作到它只显示当天的日历事件但无法在我的“`HolidayName[]`这是我的数组和循环显示事件”中显示其余日期的地步，尽管稍后会添加新事件。它只能显示第一个日期，我不明白为什么，因为它应该一直循环。下面是我的循环，然后是 javascript。

```
var HolidayName = new Array (0, 1, "New Years Day",6, 1, "Canada Day",11, 25, "Christmas Day",11, 26, "Boxing Day")
function getHoliday(month, day)
{
    for(var index = 0; HolidayName.length > index; index++)
    {
        if(HolidayName[index] == month && HolidayName[index+1] == day)
        {
            var name = HolidayName[index+2]
        }
        else
        {
            return ""
        }
        return name
    }
} 
```

下面是代码，事件显示在函数的显示日期部分`getHoliday(mth, dayCtr)`

```
function leapYear(yr) { 
if (yr < 1000) yr+=1900
return((yr%4 == 0) && ((yr%100 == 0) || (yr%400 ==0)))
}

function startCol(width, height, color){
return('<TD WIDTH=' + width + ' HEIGHT=' + height + '>' + '<FONT COLOR="' + color + '">');
}

function makeCalendar(yr, mth){

var months    = new Array("Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sept", "Oct", "Nov", "Dec")
var days      = new Array(31, leapYear(yr)?29:28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31)
var weekDays  = new Array("Sun", "Mon", "Tues", "Wed", "Thurs", "Fri", "Sat")
var HolidayName = new Array (0, 1, "New Years Day",6, 1, "Canada Day",11, 25, "Christmas Day",11, 26, "Boxing Day")

function getHoliday(month, day)
{
    for(var index = 0; HolidayName.length > index; index++)
    {
        if(HolidayName[index] == month && HolidayName[index+1] == day)
        {
            var name = HolidayName[index+2]
        }
        else
        {
            return ""
        }
        return name
    }
}   

var mthSz         = days[mth]
var mthName       = months[mth]
var firstDyofMnth = new Date(yr, mth, 1)
var firstDay      = firstDyofMnth.getDay() + 1
var numRows       = Math.ceil((mthSz + firstDay-1)/7)
var mthNameHeight = 50

var borderWidth   = 2
var cellSpacing   = 4 
var cellHeight    = 80 

var hdrColor      = "midnightblue" 
var hdrSz         = "+3" 
var colWidth      = 100 

var dayCellHeight = 25 
var dayColor      = "black" 
var dayCtr    = 1

// Build the HTML Table 
var txt = '<CENTER>'
txt += '<TABLE BORDER=' + borderWidth + ' CELLSPACING=' + cellSpacing + '>' 

//Show Month Name and Year
txt += '<TH COLSPAN=7 HEIGHT=' + mthNameHeight + '>' 
txt += '<FONT COLOR="' + hdrColor + '" SIZE=' + hdrSz + '>' 
txt += mthName + ' ' + year + '</FONT>' + '</TH>'

// Show Days of the Week 
txt += '<TR ALIGN="center" VALIGN="center">'
for (var dy = 0; dy < 7; ++dy) {
    txt += startCol(colWidth, dayCellHeight, dayColor) + weekDays[dy] + '</FONT></TD>' 
}
txt += '</TR>'

// Show Dates in Calendar
for (var row=1; row <= numRows; ++row) {
    txt += '<TR ALIGN="right" VALIGN="top">'
    for (var col = 1; col <= 7; ++col) {
        if (((col < firstDay) && (row==1)) || (dayCtr>mthSz))
            {txt += '<TD BGCOLOR="Gainsboro"><BR></TD>'}
        else
            {
            txt += '<TD HEIGHT=' + cellHeight + '><FONT COLOR="' + dayColor + '"> <B>'
            txt += dayCtr 
            txt += '</B></FONT><BR>' + getHoliday(mth,dayCtr) + '</TD>'
            dayCtr++;
            }
    }
    txt += '</TR>'
}

// close all basic table tags and output txt string
txt += '</TABLE></CENTER>'
document.write(txt) 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:05:43.053

因为你有`else { return "" }`然后外面的`if...else`语句，`return name`. 因此，无论条件是真还是假，您的函数都将在循环的第一次运行期间终止，如果条件为真则返回名称，否则返回空字符串。

另外，我认为您需要在每个循环上将索引增加 3，而不是 1；并且您应该使用分号来结束每一行（除非它是 {} 块的开始或结束）。

```
var HolidayName = new Array(0, 1, "New Years Day", 6, 1, "Canada Day", 11, 25, "Christmas Day", 11, 26, "Boxing Day");

function getHoliday(month, day) {
  for (var index = 0; index + 2 < HolidayName.length; index+=3) {
    if (HolidayName[index] == month && HolidayName[index + 1] == day) {
      return HolidayName[index + 2];
    }
  }
  return '';
} 
```

# c# - 等待以另一种方法启动的任务

> ID：14267962
> 
> 赞同：3
> 
> 时间：2013-01-10T21:55:05.897
> 
> 标签：c#, .net, unit-testing, async-await

在继续进行其余的单元测试之前，我需要确保完成一项任务。

但这是在另一个方法中等待的任务（我正在对该方法进行单元测试。）

我试过等待任务或调用 task.Wait() 但每次测试都不起作用。

实际方法如下所示：

```
private async void DoStuff(long idToLookUp)
{
    IOrder order = await orderService.LookUpIdAsync(idToLookUp);   

    OtherStuff = false;
} 
```

我正在尝试像这样对它进行单元测试：

```
[TestMethod]
public void TestDoStuff()
{
    //+ Arrange
    var lookupTask = Task<IOrderableTest>.Factory.StartNew(() => validOrder);
    orderService.LookUpIdAsync(Arg.Any<long>()).Returns(lookupTask);

    //+ Act
    myViewModel.DoStuff();
    await lookupTask;

    //+ Assert
    myViewModel.OtherStuff.Should().BeFalse();
} 
```

它失败的方式非常无益。它会导致另一个测试失败，并显示“测试运行时代理进程已停止”。（据我所知，这意味着后台线程在测试运行时抛出了异常。）

**所以我想知道如何让我的代码等待单元测试完成。**

我看到[这个](https://stackoverflow.com/a/5097066/16241)答案似乎相当不错。但它更适合于方法的调用。我不叫它，我只有任务。

注意：我的目标是使用 ansyc 包的 .NET 4.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T22:03:10.120

你不应该有一个`void`返回`async`方法，除非它是一个事件处理程序（在这种情况下你别无选择）。当一个`async`方法是`void`你无法知道它什么时候结束。

该方法应该返回 a `Task`（`Task<T>`如果它没有有意义的结果，则不是 a，只是表明它完成了）。

一旦它返回 a`Task`你就可以`await`在测试它时使用它，或者使用`Wait`，如果合适的话。

您正在等待该方法所依赖的任务之一，但这并不意味着它已经完成了它自己的代码。这意味着您的测试引入了竞争条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:01:19.413

`await myViewModel.DoStuff();`只要点击 await 关键字，这个调用 就会返回（除非它很快完成）。另外，正如 Slaks 提到的，您不能等待 void 返回方法。

然后你 Wait on`var lookupTask = Task<IOrderableTest>.Factory.StartNew(() => validOrder);` 似乎没有做太多，除了返回一个`IOrderableTest`.

另外，我认为您不应该这样做`await lookupTask`，这将再次返回给调用者，在这种情况下，TestRunner 不会/可能不会期望这一点。

您应该改用`lookupTask.Wait()`（这是一个**阻塞**调用）；并确保它也需要足够的时间`myViewModel.DoStuff();`才能完成。

**摘要**：

```
private async Task DoStuff(long idToLookUp)
{
    IOrder order = await orderService.LookUpIdAsync(idToLookUp);   

    OtherStuff = false;
    return;
} 
```

……

```
 var task = myViewModel.DoStuff();
 Task.WaitAll(task, lookupTask); 
```

# haskell - 如何将haskell字段名称放在不同的名称空间中？

> ID：14267969
> 
> 赞同：5
> 
> 时间：2013-01-09T22:41:38.493
> 
> 标签：haskell

考虑以下两种类型：

```
data Point=Point{x::Float,y::Float}
data Rectangle = {upperLeft::Point, bottomRight::Point}
data Square = {upperLeft::Point, bottomRight::Point} 
```

ghc 编译器抱怨 Rectangle 中的 upperLeft 字段名称与 Square 的名称冲突。这看起来很奇怪，因为从表面上看，每个字段名都应该在类型的命名空间中，否则不能重用字段名，我怀疑这将是一个足够普遍的期望。

例如，要定义一个变量，我们编写：

```
let a=Rectangle{upperLeft=Point 2 3, bottomRight=Point 7 7}
let a=Square{upperLeft=Point 2 3, bottomRight=Point 7 7} 
```

从这里我们可以看到，我们应该能够期望每个字段名称都应该在它们各自的类型命名空间内。

我的用法是正确的还是我的期望是错误的？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:04:33.347

由于可以通过其字段名称访问对象，因此编译器必须能够从其字段名称推断对象的类型。例如，在

```
boundingBox x = bottomRight x - upperLeft x 
```

访问器`bottomRight`和`upperLeft`用于推断`x`. 如果允许多个类型具有相同的访问器名称，则无法推断类型。

为了避免名称冲突，一个常见的约定是在所有字段名称上加上前缀。该约定用于 GHC 项目。

```
data Rectangle = {rc_upperLeft :: Point, rc_bottomRight :: Point}
data Square =    {sq_upperLeft :: Point, sq_bottomRight :: Point} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T22:54:06.407

在 Haskell 中，创建记录类型也会创建访问器函数。例如，您可以`x (upperLeft a)`在上面定义的任一变量上运行：以获得 2。这是[记录语法的摘要](http://book.realworldhaskell.org/read/defining-types-streamlining-functions.html#deftypes.record)。

您可以选择在记录中使用不同的字段名称，或者将它们放在单独的模块中。因为每个模块都有自己的名称空间，如果将 Square 放在 Square 模块中，将 Rectangle 放在 Rectangle 模块中，您将能够重用字段名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T18:52:27.853

您可能可以将 Square 构造函数放在 Rectangle 类型中，因为它实际上更像是该类型的特化。

从在 GHCI 中输入内容，这似乎工作正常：

```
data Point
    = Point{x::Float,y::Float}
    deriving (Eq, Show)

data Rectangle
    = Rectangle {upperLeft::Point, bottomRight::Point}
    | Square    {upperLeft::Point, bottomRight::Point}
    deriving (Eq, Show)

let r = Rectangle (Point 3.0 4.0) (Point 4.0 2.0)
let s = Square (Point 2.0 4.0) (Point 4.0 2.0) 
```

然后你可以同时调用：

```
upperLeft s
upperLeft r 
```

尽管您可能想要更改 Square，因为它必须满足一些限制：

```
data Rectangle
    = Rectangle {upperLeft::Point, bottomRight::Point}
    | Square    {upperLeft::Point, size::Float}
    deriving (Eq, Show) 
```

# datetime - 对视频批处理文件重命名器的最后润色/调整

> ID：14267974
> 
> 赞同：1
> 
> 时间：2013-01-10T21:55:34.093
> 
> 标签：datetime, batch-file, rename, batch-processing

当前代码：

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion

:: Create Empty Folder
rd /Q "%Temp%\Temp" 2>nul & mkdir "%Temp%\Temp"

:: Loop through Folders
pushd "xPath=c:\processing"
for /d %%D in (*) do call :Process "%%~fD"
popd
goto End

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:Process <Parent>
:: Folder Name
set "xFolder=%~nx1"

:: Set Sub Folder
if not exist "%~1\VIDEO\" goto :eof
pushd "%~1\VIDEO"

:: Loop through Videos
for /f "delims=" %%A in ('dir *.avi /b') do if exist "%%~fA" (
    set "xDateWritten=%%~tA"
    set "xDateGMT=0000/00/00 00:00:00"
    for /f "tokens=1,2" %%X in ('robocopy . "%Temp%\Temp" "%%~nxA" /TS /FP /NS /NC /NP /NJH /NJS /NDL /L') do set "xDateGMT=%%X %%Y"
    rem Format = FF-FF-YYYYMMDD-HHhMMmSSs-FF-FF.ext
set "xFrame=00,00000"
for /f %%X in ('exiftool -p "$Framerate,$Framecount" "%%~fA"') do set "xFrame=%%~X"
set "xSize=%%~zA"
set "xName=%xFolder:~0,2%-%xFolder:~2,2%-!xDateWritten:~6,4!!xDateWritten:~0,2!!xDateWritten:~3,2!-!xDateWritten:~11,2!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xA"
echo !xName!
ren "%%~fA" "!xName!"
echo !xName!,!xSize!,!xFrame!>>C:\processing\RenameOutput.csv
)
popd
goto :eof

:End
endlocal
pause 
```

我以前认为我的文件夹结构将是前：

> C:\处理\15010107\视频\files.avi

，但实际上是

> C:\processing\15010107\Video\filedate\files.avi

，所以我需要它比以前多搜索 1 个子文件夹。

此外，重命名的文件需要有**24 小时格式**的时间，它当前正在输出 pm 时间但没有 pm 标志，这可能与 am 文件混淆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:29:59.860

我相信这些更改应该涵盖您的新问题。

1.  将文件夹循环更改为也循环遍历子`filedate`文件夹。
2.  该`Process`函数现在采用两个参数`parent`文件夹和`current`文件夹。
3.  小时现在调整为 24 小时格式。

完整脚本（添加评论）

```
@echo off
setlocal EnableExtensions EnableDelayedExpansion

:: Create Empty Folder
rd /Q "%Temp%\Temp" 2>nul & mkdir "%Temp%\Temp"

:: Loop through Folders
pushd "xPath=c:\processing"
for /d %%D in (*) do if exist "%%~fD\VIDEO\" (
    pushd "%%~fD\VIDEO\"
    for /d %%S in (*) do call :Process "%%~fD" "%%~fS"
    popd
)
popd
goto End

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:Process <Parent> <Working>
:: Folder Name
set "xFolder=%~nx1"

:: Set Working Directory
if not exist "%~f2" goto :eof
pushd "%~f2"

:: Loop through Videos
for /f "delims=" %%A in ('dir *.avi /b') do if exist "%%~fA" (
    rem Retrieve the file time stamp
    set "xDateWritten=%%~tA"
    rem Retrieve the Seconds using RoboCopy
    set "xDateGMT=0000/00/00 00:00:00"
    for /f "tokens=1,2" %%X in ('robocopy . "%Temp%\Temp" "%%~nxA" /TS /FP /NS /NC /NP /NJH /NJS /NDL /L') do set "xDateGMT=%%X %%Y"
    rem Retrieve the Video frame information
    set "xFrame=00,00000"
    for /f %%X in ('exiftool -p "$Framerate,$Framecount" "%%~fA"') do set "xFrame=%%~X"
    rem Retrieve the file size
    set "xSize=%%~zA"
    rem Adjust to 24 hours
    set "xHour=!xDateWritten:~11,2!"
    if "!xDateWritten:~17,2!"=="PM" set /a "xHour+=12"
    rem Format = FF-FF-YYYYMMDD-HHh-MMm-SSs-FF-FF.ext
    set "xName=%xFolder:~0,2%-%xFolder:~2,2%-!xDateWritten:~6,4!!xDateWritten:~0,2!!xDateWritten:~3,2!-!xHour!h-!xDateWritten:~14,2!m-!xDateGMT:~17,2!s-%xFolder:~4,2%-%xFolder:~6,2%%%~xA"
    rem Display, Rename, and Save
    echo !xName!
    ren "%%~fA" "!xName!"
    echo !xName!,!xSize!,!xFrame!>>C:\processing\RenameOutput.csv
)
popd
goto :eof

:End
endlocal
pause 
```

# php - 如何在类中调用变量

> ID：14267975
> 
> 赞同：1
> 
> 时间：2013-01-10T21:55:34.543
> 
> 标签：php, class, variables

我是一个新手，试图设计一个计算学生分数的应用程序。我正在尝试使用 OOP 简化我的工作，但我一直在这里遇到错误。这是我做的课：

```
class fun {
var $totalscore;
public function score($assignment,$cat,$exam){

      return $totalscore = $assignment+$cat+$exam;

        if($totalscore <=100 && $totalscore >=70){
            return $grade = "A";
        }
        elseif($totalscore <=69 && $totalscore>=60){
            return $grade = "B";
        }
        elseif($totalscore <=59 && $totalscore>=50){
            return $grade = "C";
        }
        elseif($totalscore <=35 && $totalscore>=49){
            return $grade = "D";
        }
        elseif($totalscore <=40 && $totalscore>=34){
            return $grade = "E";
        }
        elseif($totalscore <=39 && $totalscore>=0){
        return $grade = "F";

 }
 }
 } 
```

现在我试图在下面的其他 php 中调用变量我的意思是 $totalscore 和 $grade

```
if(isset($_POST['update'])){
    $gnsa = $_POST['gnsa'];
    $gnst =$_POST['gnst'];
    $gnse =$_POST['gnse'];
    $agidi =$_POST['matric'];

   include ("class.php");
   $fun = new fun;
   $fun-> score($gnsa,$gnst,$gnse);
   if($totalscore > 100){
    echo "invalid score";
   }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:03:33.747

```
class fun
{
    // notice these 2 variables... they will be available to you after you
    // have created an instance of the class (with $fun = new fun())
    public $totalscore;
    public $grade;

    public function score($assignment, $cat, $exam)
    {
        $this->totalscore = $assignment + $cat + $exam;

        if ($this->totalscore >= 70) {
            $this->grade = "A";
        }
        else if ($this->totalscore <= 69 && $this->totalscore >= 60) {
            $this->grade = "B";
        }
        else if ($this->totalscore <= 59 && $this->totalscore >= 50) {
            $this->grade = "C";
        }

        else if ($this->totalscore <= 35 && $this->totalscore >= 49) {
            $this->grade = "D";
        }

        // there is probably something wrong here... this number (40) shouldn't
        // be higher than the last one (35)
        else if ($this->totalscore <= 40 && $this->totalscore >= 34) {
            $this->grade = "E";
        }
        else {
            $this->grade = "F";
        }
    }
} 
```

现在，完成后，您将能够分别使用和`$fun->score($gnsa,$gnst,$gnse);`访问总分和成绩。`$fun->totalscore``$fun->grade`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:00:01.953

使用您的课程时，您正确地调用了这样的方法：

```
$fun->score($gnsa,$gnst,$gnse); 
```

类的变量（通常称为成员或属性）的调用方式类似（假设它们是公共的）：

```
if($fun->totalscore > 100){
    echo "invalid score";
} 
```

# c# - 如何以秒为单位创建时间戳

> ID：14267984
> 
> 赞同：6
> 
> 时间：2013-01-10T21:56:11.740
> 
> 标签：c#, .net, timestamp, seconds

我有这个任务来填充这个字段：

> x_fp_timestamp 是生成表单时创建的时间戳。它等于 UTC（协调世界时）自 1970 年 1 月 1 日以来的秒数。

所以我在 C# 中所做的是

```
 long ts =  DateTime.Now.Ticks / TimeSpan.TicksPerSecond; 
```

但在那种情况下，我收到了这个错误：

> *   x_fp_timestamp : x_fp_timestamp 无效。不在当前时间的 15 分钟内：2013 年 1 月 10 日星期四 21:30:25 GMT。预计 1357853425 加/减 900，但收到 63493442997。

所以我的问题是如何以秒为单位生成当前时间戳？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-10T21:59:05.243

`DateTime.Now.Ticks` [不是从 1970 年开始的](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)；尝试这样的事情：

```
 (DateTime.Now.ToUniversalTime() - new DateTime (1970, 1, 1)).TotalSeconds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-17T17:21:47.007

我发现[DateTimeOffset.ToUnixTimeSeconds](https://docs.microsoft.com/en-us/dotnet/api/system.datetimeoffset.tounixtimeseconds?view=net-6.0)最适合我的具体情况（Unity 3D [.NET 标准 2.1]）

```
 long timeNow = DateTimeOffset.Now.ToUnixTimeSeconds();
    string timeStamp = timeNow.ToString(); 
```

# c# - 我可以更改弹出窗口的对齐方式，使其显示在按钮的左侧而不是右侧吗？

> ID：14267986
> 
> 赞同：2
> 
> 时间：2013-01-10T21:56:18.117
> 
> 标签：c#, wpf, xaml, popup, togglebutton

关于如何移动位置的任何想法？这是菜单：

![在此处输入图像描述](../Images/903ab890d3447ad2fe000a5ceb0b6718.png)

这是 XAML：

```
<Canvas MinHeight="25" Panel.ZIndex="99">
<ToggleButton x:Name="btnPluginMenu" Content="CT" Width="48" Height="48" Canvas.Left="452" Canvas.Top="263"/>
<Popup Placement="Top" PlacementTarget="{Binding ElementName=btnPluginMenu}" IsOpen="{Binding ElementName=btnPluginMenu, Path=IsChecked}">
<Grid Background="Gray" Width="175" Height="130">
                    <Grid.BitmapEffect>
                        <DropShadowBitmapEffect />
                    </Grid.BitmapEffect>
 </Grid>
            </Popup>
</Canvas> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T22:29:09.083

从[MSDN](http://msdn.microsoft.com/en-us/library/bb613596.aspx)您可以使用以下`Placement=Relative`模式：

> Popup 控件相对于 PlacementTarget 左上角的位置，偏移量由 Horizo​​ntalOffset 和 VerticalOffset 属性值定义。如果屏幕边缘遮挡了 Popup，则控件会重新定位自身以与屏幕边缘对齐。

换句话说，你可以这样做：

```
<ToggleButton x:Name="btnPluginMenu" Content="CT" Width="48" Height="48" Canvas.Left="452" Canvas.Top="263"/>
<Popup Placement="Relative"  HorizontalOffset="-120" VerticalOffset="-130" PlacementTarget="{Binding ElementName=btnPluginMenu}" IsOpen="{Binding ElementName=btnPluginMenu, Path=IsChecked}"> 
```

注意负值的使用`HorizontalOffset`和`VerticalOffset`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-18T16:00:28.433

从按钮单击事件

```
private void button_Click(object sender, RoutedEventArgs e)
{
  Button button = sender as Button;
  popup.PlacementTarget = button;
  popup.HorizontalOffset = -120;
  popup.VerticalOffset = -130;
  popup.IsOpen = true;
} 
```

# jquery - ASP 代码中的 ADODB 字段错误

> ID：14267987
> 
> 赞同：0
> 
> 时间：2013-01-10T21:56:20.120
> 
> 标签：jquery, html, sql, asp-classic, ado

问题：我有一个搜索，它工作正常，直到用户进行没有结果的查询。发生这种情况时，下拉菜单（从 sql 中获取选项，停止工作）。我得到以下信息：

```
<option label=' <font face="Arial" size=2>
<p>ADODB.Field</font> <font face="Arial" size=2>error '80020009'</font>
<p>
<font face="Arial" size=2>Either BOF or EOF is True, or the current record has been deleted. Requested operation requires a current record.</font>
<p>
<font face="Arial" size=2>/junk/dbinstant.htm</font><font face="Arial" size=2>, line 0</font> 
```

发生这种情况时，它似乎切断了它下面的所有代码。

我认为负责的代码是：

```
<%if request.querystring("abn") = "all" then 
response.write("")
else
response.write("<option label='")%><%=lcon("legal")%><%response.write("' value='")%><%=(src_abn)%><%response.write("' selected></option>'")
end if %> 
```

整页：

```
<%@ LANGUAGE="VBSCRIPT" %>
<%
pagetitle="Contractor Details"
%>
<!--#INCLUDE VIRTUAL="/_lib/include/header.htm"-->
<!--#INCLUDE VIRTUAL="/_lib/include/menu.htm"-->
<script>
$(document).ready(function() {
    $("#abn,#cat").change(function () {
    this.form.submit();
})
});
</script>
<div class="twoColumnRow">
<div class="twoColumnContent">
<p class="breadCrm"><a href="/index.htm">Home</a> <span>&gt;</span> <a href="/tools/index.htm">Tools of the Trade</a> <span>&gt;</span> <a href="/tools/finance/index.htm">Finance and Purchasing</a><span>&gt;</span> <a href="/tools/finance/procurement/index.htm">Procurement and Contracts information</a></p>
<div class="contentPad">
<!-- Start of main content -->

<p class="imageRight">&nbsp;</p>
<h1><%=pagetitle%></h1>

<%
        Dim connectString, connect, conDB, sconDB, lDB, con, scon, lcon, src_abn, src_cat
        connectString = "Driver={Microsoft Text Driver (*.txt; *.csv)}; DBQ=" & Server.MapPath("data")
              src_abn = Request.QueryString("abn")
              src_cat = Request.QueryString("cat")
        set connect = Server.CreateObject("ADODB.connection")
        connect.open connectString

        if src_abn = "all" and src_cat = "all" then
        conDB = "SELECT * FROM cont.csv"
        lDB = "SELECT * FROM cont.csv"
        elseif src_abn = "all" then
        conDB = "SELECT * FROM cont.csv WHERE " & src_cat & " = 'Yes'"  
        lDB = "SELECT * FROM cont.csv WHERE " & src_cat & " = 'Yes'"    
        elseif src_cat = "all" then
        conDB = "SELECT * FROM cont.csv WHERE ucase(abn) LIKE ucase('%"+src_abn+"%')"   
        lDB = "SELECT * FROM cont.csv WHERE ucase(abn) LIKE ucase('%"+src_abn+"%')" 
        else 
        conDB = " SELECT * FROM cont.csv WHERE " & src_cat & " = 'Yes' AND ucase(abn) LIKE ucase('%"+src_abn+"%')"
        lDB = " SELECT * FROM cont.csv WHERE " & src_cat & " = 'Yes' AND ucase(abn) LIKE ucase('%"+src_abn+"%')"
        end if

        sconDB = "SELECT * FROM cont.csv"   

        set con = connect.execute(conDB)
        set scon = connect.execute(sconDB)
        set lcon = connect.execute(lDB)
%>
<h2>Search results</h2><hr />
<% if not con.BOF then %>
<div style="margin-top:1em">

  <form action="dbinstant.htm" method="get">

      <p>Company name:1<br/>
      <select id="abn" name="abn">
        <option label="All companies" value="all" <%if request.querystring("abn") = "all" then response.write("selected") %>></option>
        <%if request.querystring("abn") = "all" then 
        response.write("<option label='All companies' value='all' selected></option>")
        else
        response.write("<option label='")%><%=lcon("legal")%><%response.write("' value='")%><%=(src_abn)%><%response.write("' selected></option>'")
        end if %>
        <% while (NOT scon.EOF) %>
        <option label="<%=scon("legal")%>" value="<%=scon("abn")%>" <%if request.querystring("abn") = "response.write(src_abn)" then 
        response.write("selected") 
        end if %>></option>
        <%scon.MoveNext()
                          Wend %>
      </select>
      </p>
     <p>Categories for Creative Design:<br/>
      <select id="cat" name="cat">
        <option class="group" label="All categories" value="all" <%if request.querystring("cat") = "all" then response.write("selected") %>></option>
        <option class="group" label="Strategic brand, marketing and communications advice" value="a" <%if request.querystring("cat") = "a" then response.write("selected") %>></option>
        <option class="group" label="Graphic design and layout" value="b" <%if request.querystring("cat") = "b" then response.write("selected") %>></option>
        <option class="group" label="Forms design" value="c" <%if request.querystring("cat") = "c" then response.write("selected") %>></option>
        <option class="group" label="Web design and development" value="d" <%if request.querystring("cat") = "d" then response.write("selected") %>></option>
        <option class="group" label="Authoring services" value="e" <%if request.querystring("cat") = "e" then response.write("selected") %>></option>
        <option class="group" label="Editorial services" value="f" <%if request.querystring("cat") = "f" then response.write("selected") %>></option>
        <option class="group" label="Translation services" value="g" <%if request.querystring("cat") = "g" then response.write("selected") %>></option>
        <option class="group" label="Photography and film services" value="h" <%if request.querystring("cat") = "h" then response.write("selected") %>></option>
        <option class="group" label="Scanning and digitisation services" value="i" <%if request.querystring("cat") = "i" then response.write("selected") %>></option>
        <option class="group" label="Multimedia editing services" value="j" <%if request.querystring("cat") = "j" then response.write("selected") %>></option>
      </select>
    </p>
    <input type="submit" value="Search" />
  </form>
  <br /><hr />

    <table style="font-size:.9em;" class="contentTable">
          <tr>
                <th>ABN:</th>
                <th>Company Name:</td>
          </tr>
  <% con.Movefirst() %>
  <% while (NOT con.EOF) %>
          <tr>
                <td width="120px"><%=con("abn")%></th>
                <td><a href="dbcomp.htm?abn=<%=con("abn")%>&cat=all"><%=con("legal")%></a></td>
          </tr>
  <%
    con.MoveNext()
    Wend
  %>
</table>

</div>
<% else %>
    <% scon.Movefirst() %>
  <form action="dbinstant.htm" method="get">

      <p>Company name:2<br/>
      <select id="abn" name="abn">
        <option label="All companies" value="all" <%if request.querystring("abn") = "all" then response.write("selected") %>></option>
        <%if request.querystring("abn") = "all" then 
        response.write("")
        else
        response.write("<option label='")%><%=lcon("legal")%><%response.write("' value='")%><%=(src_abn)%><%response.write("' selected></option>'")
        end if %>

        <% while (NOT scon.EOF) %>
        <option label="<%=scon("legal")%>" value="<%=scon("abn")%>" <%if request.querystring("abn") = "response.write(src_abn)" then 
        response.write("selected") 
        end if %>></option>
        <%scon.MoveNext()
                          Wend %>
      </select>
      </p>
     <p>Categories for Creative Design:<br/>
      <select id="cat" name="cat">
        <option class="group" label="All categories" value="all" <%if request.querystring("cat") = "all" then response.write("selected") %>></option>
        <option class="group" label="Strategic brand, marketing and communications advice" value="a" <%if request.querystring("cat") = "a" then response.write("selected") %>></option>
        <option class="group" label="Graphic design and layout" value="b" <%if request.querystring("cat") = "b" then response.write("selected") %>></option>
        <option class="group" label="Forms design" value="c" <%if request.querystring("cat") = "c" then response.write("selected") %>></option>
        <option class="group" label="Web design and development" value="d" <%if request.querystring("cat") = "d" then response.write("selected") %>></option>
        <option class="group" label="Authoring services" value="e" <%if request.querystring("cat") = "e" then response.write("selected") %>></option>
        <option class="group" label="Editorial services" value="f" <%if request.querystring("cat") = "f" then response.write("selected") %>></option>
        <option class="group" label="Translation services" value="g" <%if request.querystring("cat") = "g" then response.write("selected") %>></option>
        <option class="group" label="Photography and film services" value="h" <%if request.querystring("cat") = "h" then response.write("selected") %>></option>
        <option class="group" label="Scanning and digitisation services" value="i" <%if request.querystring("cat") = "i" then response.write("selected") %>></option>
        <option class="group" label="Multimedia editing services" value="j" <%if request.querystring("cat") = "j" then response.write("selected") %>></option>
      </select>
    </p>
    <input type="submit" value="Search" />
  </form>
  <br /><hr />
<p>No records match your query.</p>
<p><a href="dbtest.htm">Return to search page</a></p>
<%
  end if
  con.close
%>

<!-- End of main content -->
</div> <!-- end contentPad div -->
</div> <!-- end twocolumncontent div -->
<div class="twoColumnLinks">

<!--<div class="relatedLinks">
<h3>Related Links</h3>
<ul>
<li><a href="/index.htm">Related link 1</a></li>
</ul>
</div>--> <!-- end relatedlinks div -->
<!--#INCLUDE VIRTUAL="/_lib/include/quicklinks.htm"-->
<!--#INCLUDE VIRTUAL="/_lib/include/mylinks.htm"-->
</div> <!-- end twocolumnlinks div -->
</div> <!-- end twocolumnrow div -->
<!--#INCLUDE VIRTUAL="/_lib/include/footer.htm"--> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T22:42:47.093

尝试更改`con.BOF`为`con.EOF`.

除此之外，您的代码中存在严重的 SQL 注入漏洞。我希望你知道这一点:-)

例如，你想改变这样的事情

```
conDB = "SELECT * FROM cont.csv WHERE ucase(abn) LIKE ucase('%"+src_abn+"%')" 
```

进入那个

```
conDB = "SELECT * FROM cont.csv WHERE ucase(abn) LIKE ucase('%"+ Replace(src_abn, "'", "''") + "%')" 
```

从这些开始：

1.  [经典 ASP SQL 注入保护](https://stackoverflow.com/q/149848/290343)
2.  [防止 ASP 中的 SQL 注入](http://msdn.microsoft.com/en-us/library/cc676512.aspx)
3.  [从经典 ASP 过滤 SQL 注入](http://blogs.iis.net/nazim/archive/2008/04/28/filtering-sql-injection-from-classic-asp.aspx)

# javascript - 擦除 paper.js 中的路径？

> ID：14267992
> 
> 赞同：1
> 
> 时间：2013-01-10T21:56:41.603
> 
> 标签：javascript, canvas, html5-canvas, paperjs

我基本上想创建一个新路径，将画布 globalCompositeOperation 设置为“destination-out”。这可能吗？如果是这样，怎么做？

我注意到 Item 有一个 blendMode 属性：[http://paperjs.org/reference/item#blendmode](http://paperjs.org/reference/item#blendmode)，但尝试不同的值并不能提供预期的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:47:15.657

[http://jsfiddle.net/D8vMG/12/](http://jsfiddle.net/D8vMG/12/)

根据您最近的评论，您需要创建图层，如下所述：

[http://paperjs.org/tutorials/project-items/project-hierarchy/#removing-items-and-children](http://paperjs.org/tutorials/project-items/project-hierarchy/#removing-items-and-children)

然后您可以将路径添加到图层并执行以下操作：

```
 //add image to project as background
 // ... your code here ...

 var secondLayer = new Layer(); 
```

每当您创建一个新层时，它就会成为项目的活动层，然后您可以在第二层之上绘制您想要的所有内容。

如果你想要一个简单的“撤消”按钮，你可以这样做：

```
 function onMouseDown(event) {
     if (window.mode == "drawing") {
        myPath = new Path();
        myPath.strokeColor = 'black';
     }
     else if (window.mode == "undo") {
        myPath.opacity = '0'; //this makes the last path used completely see through
        // or myPath.remove(); // this removes the path.
        //if you're intent on something that writes and erases, you could do 
     }
 } 
```

但是你正在寻找的是这样的：

```
 function onMouseDrag(event) {
   if (window.mode == "drawing") {
     myPath.add(event.point);
   }
   else if (window.mode == "erasing") {
     myPath.removeSegment(0);
   }
 } 
```

这会从头到尾擦除路径段。对于完整的功能，您需要在点击时标识路径的东西（layer.getChildren() ？然后选择子项）。然后使用鼠标移动点，您需要识别段索引并使用 .removeSegment(index) 将其从路径中删除。

[http://paperjs.org/reference/path#removesegment-index](http://paperjs.org/reference/path#removesegment-index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:04:17.080

好吧，简单的解决方案是只创建一条白色的路径。 [http://jsfiddle.net/D8vMG/11/](http://jsfiddle.net/D8vMG/11/)

```
function onMouseDown(event) {
    if (window.mode == "drawing") {
       myPath = new Path();
       myPath.strokeColor = 'black';
     }
     else if (window.mode == "erasing") {
        myPath = new Path();
        myPath.strokeColor = 'white';
        myPath.strokeWidth =  10;
     }
} 
```

# video - 如果设置为“幻灯片”，第一个视频将不会使用 Flexslider 在 iPad 中加载

> ID：14267993
> 
> 赞同：2
> 
> 时间：2013-01-10T21:56:42.463
> 
> 标签：video, flexslider

这是一个非常奇怪的问题，我很难过。我有一个带有 HTML5 视频的 Flexslider。它可以在我的 Firefox、Safari 和 Chrome 笔记本电脑上完美运行。除了第一个视频外，它在 iPad 上也可以正常工作。它只是加载和加载，从不播放。如果我改变了视频的顺序，它仍然是第一个不会加载的视频，所以我知道它不是那个特定的视频。如果我将动画设置更改为“淡入淡出”，它会加载得很好。如果设置为“幻灯片”，它就不会加载第一个视频。我在 flexslider 中有其他设置，但如果我将它们全部删除并将它们保留为默认值，同样的问题。我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T18:20:05.593

我们通过挂钩开始和之后的 API 解决了这个问题，然后克隆视频，删除原始视频，然后重新添加视频。

```
 after: function(slider) {
                var clone =  jQuery('.flex-active-slide .video-container video').clone();
                jQuery('.flex-active-slide .video-container video').remove();
                jQuery('.flex-active-slide .video-container').append(clone);
            },
            start: function(slider) {
                var clone =  jQuery('.flex-active-slide .video-container video').clone();
                jQuery('.flex-active-slide .video-container video').remove();
                jQuery('.flex-active-slide .video-container').append(clone);
            }, 
```

# javascript - JQuery 移动滑块未重新启用

> ID：14267996
> 
> 赞同：2
> 
> 时间：2013-01-10T21:56:50.717
> 
> 标签：javascript, jquery-mobile

所以我认为我用我的 jquery 移动滑块做的一切都是正确的，但是控件没有被重新启用。我用它做了一个相当不错的 jsFiddle，希望有人能很快发现错误。

在小提琴上，您将看到 jQuery moblie 控件。如果单击并移动滑块位置，该事件将触发控件值更改。如果您最终在 20 秒内更改值超过 5 次，则控件将锁定。您可以将其视为冷却时间。控制冷却后，它应该重新启用以进行更多的糖化。

问题是，控件永远不会从被禁用中恢复过来！

[http://jsfiddle.net/Narq6/](http://jsfiddle.net/Narq6/)

示例 Javascript：

```
var sent = 0;
var disabled = false;

$('#slider-fill').on( 'slidestop', function()
                     {
                       send();
                       writeConsole(sent);                                           
                     })

function send()
{
 setTimeout(decrease, 4000);
    sent +=1;

  if(sent > 5)
  {
     $('#slider-fill').prop('disabled', 'disabled');

    disabled = true;
  }  
}
function decrease()
{
  if(sent > 0)
     sent -= 1;
 writeConsole('decrease'); 
 writeConsole(sent); 

  if(sent === 0)
  {
    //CODE TO DISABLE HERE!!!
    //LOOK HERE THIS IS WHERE I REMOVE THE DISABLE!!!
      writeConsole('no longer disabled!');     
     $('#slider-fill').prop('disabled', '');
    ///YOU LOOKED TOO FAR GO BACK A LITTLE BIT :D
  }
}

function writeConsole(message)
{
  var miniconsole = $('#miniConsole');
  var contents = miniconsole.html();
  miniconsole.html(contents + message + '<br/>' );
  miniconsole.scrollTop(10000);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:49:06.310

You were using incorrect enable/disable syntax.

This one is a coorect syntax:

```
$('#slider-fill').slider('disable'); 
```

and

```
$('#slider-fill').slider('enable'); 
```

Here's am working example made from your jsFiddle: [http://jsfiddle.net/Gajotres/djDDr/](http://jsfiddle.net/Gajotres/djDDr/)

# jquery - 如何在 Meteor.js 上应用 jQuery

> ID：14267997
> 
> 赞同：5
> 
> 时间：2013-01-10T21:56:53.913
> 
> 标签：jquery, meteor

我已经为meteor.js 创建了一个模板，我想要的是为tran_button 上的onclick 事件应用jQuery 效果，该效果的想法是与按钮关联的div 消失。我没有通过流星控制台或萤火虫控制台收到任何错误。

```
Template.tran.events({
    'click .tran_button' : function(){
       $(this._id).slideUp('slow');
     }
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T22:26:09.807

$(event.target).slideUp('slow');

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T22:16:54.733

将事件传递给函数并从 event.currentTarget 获取 id：

```
Template.tran.events({
    'click .tran_button' : function(event){
        $('#' + event.currentTarget.id).slideUp('slow');
    }
}); 
```